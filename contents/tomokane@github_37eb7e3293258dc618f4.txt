{"context": "\u3053\u306e\u8a18\u4e8b\u306fGo (\u305d\u306e3) Advent Calendar 2016\u306e9\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u8abf\u67fb\u306e\u3044\u3063\u304b\u3093\u3068\u3057\u3066\u3001go\u88fd\u306eWebAPI\u7528\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30afflorest\u3068\u3044\u3046\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3001\u3053\u3053\u306b\u307e\u3068\u3081\u308b\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\u3053\u3053\u3067\u306f\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u305f\u3002\n\ngo 1.7.3\nflorest (github\u306e2016/11/7\u306emaster\u306ehead\uff09\ngingko\n\ngingko\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u4ee5\u4e0b\n$ go get github.com/onsi/ginkgo/ginkgo\n$ go get github.com/onsi/gomega\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\u307e\u305a\u3001florest-core\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30ed\u30fc\u30ab\u30eb\u306bclone\u3057\u307e\u3059\u3002\n$ git clone https://github.com/jabong/florest-core\n\n\u3055\u3089\u306bclone\u3057\u305fflorest-core\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u3066\u3001\u30a2\u30d7\u30ea\u306e\u96db\u5f62\u3092\u3064\u304f\u308a\u307e\u3059\u3002\nmake newapp\u3092\u5b9f\u884c\u3059\u308b\u969b\u306b\u74b0\u5883\u5909\u6570NEWAPP\u306b\u5c55\u958b\u5148\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n$ cd florest-core\n$ make newapp NEWAPP=\"~/newapp\"\nbuilding new app\ncopying dependent libs\n$ cd ~/newapp\n\n\u3053\u308c\u3067\u30db\u30fc\u30e0\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306bnewapp\u304c\u4f5c\u3089\u308c\u307e\u3057\u305f\u3002\n\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u6210\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 _libs\n\u251c\u2500\u2500 config\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 logger\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 logger.json\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 newapp\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 conf.json\n\u251c\u2500\u2500 main.go\n\u251c\u2500\u2500 scripts\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 README.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 logger.sh\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 swagger.sh\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 README.md\n    \u251c\u2500\u2500 common\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 appconfig\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 application_config.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 appconstant\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 error_codes.go\n    \u251c\u2500\u2500 hello\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 api_definition.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 data_structures.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world_health_checker.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 swagger.go\n    \u2514\u2500\u2500 test\n        \u251c\u2500\u2500 coverage.sh\n        \u251c\u2500\u2500 servicetest\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 config_initialize.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 logger_initialize.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 service_initialize.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 service_test.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 service_test_helper.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 test_web_server.go\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 testdata\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 testconf.json\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 testloggerAsync.json\n        \u2514\u2500\u2500 utils\n            \u251c\u2500\u2500 request_helper.go\n            \u2514\u2500\u2500 response_status_helper.go\n\n\u3055\u3089\u306b\u5b9f\u884c\u30a8\u30e9\u30fc\u306a\u3069\u3092\u5410\u304d\u51fa\u3059\u30ed\u30b0\u7528\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001/var/log/\u30a2\u30d7\u30ea\u540d\u306b\u4f5c\u3089\u308c\u308b\u306e\u3067\u3001sudo\u3092\u4f7f\u3063\u3066\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u305f\u3042\u3068\u306b\u3001florest\u3092\u5b9f\u884c\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306b\u6240\u6709\u8005\u3092\u5909\u66f4\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ sudo mkdir /var/log/newapp\n$ sudo chown myuser /var/log/newapp\n\n\u6700\u4f4e\u9650\u306e\u6e96\u5099\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u8a66\u3057\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n$ cd ~/newapp\n$ make deploy\n\nbin\u30d5\u30a9\u30eb\u30c0\u914d\u4e0b\u306b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002bin\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ cd bin\n$ ./newapp\nAPPLICATION BEGIN\n2016/11/15 00:14:41 Web server Initialization begin\n2016/11/15 00:14:41\nInitializing Config\nconfig &{AppName: AppVersion: ServerPort: LogConfFile: MonitorConfig:{APPName: APIKey: APPKey: AgentServer: Platform: Verbose:false Enabled:false MetricsServer:} Performance:{UseCorePercentage:0 GCPercentage:0} DynamicConfig:{Active:false RefreshInterval:0 ConfigKey: CacheKey:} HTTPConfig:{MaxConn:0 MaxIdleConns:0 ResponseHeaderTimeout:0 DisableKeepAlives:false} Profiler:{Enable:false SamplingRate:0} ResponseHeaders:{CacheControl:{ResponseType: NoCache:false NoStore:false MaxAgeInSeconds:0}} ApplicationConfig:0xc4200cbe20 AppRateLimiterConfig:<nil>}\n2016/11/15 00:14:41 Application Config Created\n2016/11/15 00:14:41\nGlobal Config=&{AppName:newapp AppVersion:1.0.0 ServerPort:8080 LogConfFile:conf/logger.json MonitorConfig:{APPName:newapp APIKey: APPKey: AgentServer:datadog:8125 Platform:DatadogAgent Verbose:false Enabled:false MetricsServer:datadog:8065} Performance:{UseCorePercentage:100 GCPercentage:1000} DynamicConfig:{Active:false RefreshInterval:0 ConfigKey: CacheKey:} HTTPConfig:{MaxConn:0 MaxIdleConns:0 ResponseHeaderTimeout:0 DisableKeepAlives:false} Profiler:{Enable:false SamplingRate:0} ResponseHeaders:{CacheControl:{ResponseType: NoCache:false NoStore:false MaxAgeInSeconds:0}} ApplicationConfig:0xc4200cbe20 AppRateLimiterConfig:<nil>}\n2016/11/15 00:14:41\nApplication Config=&{Hello:{ResponseHeaders:{CacheControl:{ResponseType: NoCache:false NoStore:false MaxAgeInSeconds:0}}}}\nNo of Cpu Core to be Used = 4\n\n8080\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\u3068\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8ffd\u52a0\nbook\u3068\u3044\u3046\u65b0\u3057\u3044\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n\u6700\u521d\u306b\u3001src\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306ehello\u30d5\u30a9\u30eb\u30c0\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u3066\u3001\n\u5185\u90e8\u306e\u5909\u6570\u540d\u306a\u3069\u306e\u5024\u3092\u5168\u3066\u7f6e\u63db\u3057\u307e\u3059\u3002\n$ cp -R src/hello src/book\n$ find src/book -name \"hello_world*\" -exec rename s/hello_world/book/ {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/helloWorld/book/g' {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/hello/book/g' {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/HelloWorld/Book/g' {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/Hello/Book/g' {} +\n\n\nmain.go\u3078\u306eAPI\u306e\u8ffd\u52a0\n\u6b21\u306bmain.go\u306b\u3001\u3055\u304d\u307b\u3069\u8907\u88fd\u3057\u3066\u30ea\u30cd\u30fc\u30e0\u3057\u305fbook API\u3078\u306eimport\u306e\u8ffd\u52a0\u3068\u3001\nflorest\u306eservice\u306bBookAPI\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nimport (\n        \"common/appconfig\"\n        \"common/appconstant\"\n        \"fmt\"\n        \"hello\"\n        \"book\" // \u8ffd\u52a0\n\n        \"github.com/jabong/florest-core/src/core/service\"\n)\n\n//main is the entry point of the florest web service\nfunc main() {\n        fmt.Println(\"APPLICATION BEGIN\")\n        webserver := new(service.Webserver)\n        registerConfig()\n        registerErrors()\n        registerAllApis()\n        webserver.Start()\n}\n\nfunc registerAllApis() {\n        service.RegisterAPI(new(hello.HelloAPI))\n        service.RegisterAPI(new(book.BookAPI)) // \u8ffd\u52a0\n}\n\n\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30d1\u30b9\u306e\u8a2d\u5b9a\nsrc/book/api_definition.go\n\u3067\u3001\u30db\u30b9\u30c8\u540d\u4ee5\u4e0b\u306e\u30d1\u30b9\u540d\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u3055\u3089\u306b\u3001Book ID\u3092\u6307\u5b9a\u3057\u3066\u3001\u6307\u5b9a\u306eID\u306e\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u30d1\u30b9\u5185\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bfbookId\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nfunc (a *BookAPI) GetVersion() versionmanager.Version {\n        return versionmanager.Version{\n                Resource: \"BOOK\", //\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u7d42\u7aef\u306e\u30d1\u30b9\u540d\n                Version:  \"V1\", // \u30a2\u30d7\u30ea\u540d\u306e\u6b21\u306b\u304f\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u540d\n                Action:   \"GET\", // \u30ea\u30af\u30a8\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\n                BucketID: constants.OrchestratorBucketDefaultValue, //todo - should it be a constant\n                Path:     \"{bookId}\", // bookId\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n        }\n}\n\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u306b\u3088\u308a\nhttp://\u30db\u30b9\u30c8\u540d:8080/newapp/v1/book/{bookId}\n\u3068\u3044\u3046\u30d1\u30b9\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\nnewapp\u306e\u90e8\u5206\u306f\u3001bin/conf/conf.json\u306e\u3001\u30eb\u30fc\u30c8\u306eAppName\u30ad\u30fc\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5024\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u305f\u6642\u306e\u51e6\u7406\u306e\u8ffd\u52a0\nsrc/book/book.go\u306e\u3001func (a Book) Execute(io workflow.WorkFlowData) (workflow.WorkFlowData, error)\u306bBook API\u306e\u51e6\u7406\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u5f15\u6570\u306eio\u306b\u306f\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u60c5\u5831\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u60c5\u5831\u304c\u542b\u307e\u308c\u307e\u3059\u3002\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53d6\u5f97\nio\u306eIOData.Get\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u5024\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u5f15\u6570\u306b\u5165\u308b\u5024\u306f\u3001request_response_constants.go\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5b9a\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002PathParams\u3092\u53d6\u5f97\u3057\u305f\u3044\u306e\u3067\u3001\u5f15\u6570\u306bconstants.PathParams\n\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n        pathp, _ := io.IOData.Get(constants.PathParams)\n        fmt.Println(pathp)\n\ndeploy\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089curl\u3067bookId\u3092\u6307\u5b9a\u3057\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u3066\u307f\u307e\u3059\u3002\n$ curl -XGET \"http://localhost:8080/newapp/v1/book/123\" | jq .\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   158  100   158    0     0  22829      0 --:--:-- --:--:-- --:--:-- 26333\n{\n  \"status\": {\n    \"httpStatusCode\": 200,\n    \"success\": true,\n    \"errors\": null\n  },\n  \"data\": null,\n  \"_metaData\": {\n    \"urlParams\": {},\n    \"apiMetaData\": {}\n  }\n}\n\n\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30b3\u30f3\u30bd\u30fc\u30eb\u5074\u306e\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u30a2\u30a6\u30c8\u306b\u306f\n123\n\n\u3068\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u6307\u5b9a\u3057\u305f\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u8a18\u8ff0\n\u51e6\u7406\u3057\u305f\u7d50\u679c\u306a\u3069\u3092\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u5185\u5bb9\u306b\u8a18\u8ff0\u3059\u308b\u306b\u306f\u3001io\u306eIOData.Set\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u3053\u3061\u3089\u3082\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u7b2c\u4e00\u5f15\u6570\u306b\u306f\u3001request_response_constants.go\u306e\u5b9a\u6570\u304b\u3089\u9078\u629e\u3057\u307e\u3059\u3002\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306eJSON\u306edata\u30ad\u30fc\u306e\u5024\u306b\u7d50\u679c\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306f\u3001constants.Result\u3092\u4f7f\u3044\u307e\u3059\u3002\n        io.IOData.Set(constants.Result, \"test\")\n\n\u540c\u69d8\u306b\u3001Deploy\u3057\u305f\u3042\u3068\u306bWebAPI\u306e\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u3001curl\u3092\u4f7f\u3063\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ curl -XGET \"http://localhost:8080/newapp/v1/book/123\" | jq .\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   125  100   125    0     0   8965      0 --:--:-- --:--:-- --:--:--  9615\n{\n  \"status\": {\n    \"httpStatusCode\": 200,\n    \"success\": true,\n    \"errors\": null\n  },\n  \"data\": \"test\",\n  \"_metaData\": {\n    \"urlParams\": {},\n    \"apiMetaData\": {}\n  }\n}\n\n\u7b2c2\u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u6587\u5b57\u5217test\u304cdata\u30ad\u30fc\u306b\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\nSwagger\u306e\u51fa\u529b\n\n\u4f9d\u5b58\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nSwagger\u3092\u6271\u3046\u305f\u3081\u306b\u3001\u307e\u305ago\u306eswagger\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ go get github.com/yvasiyarov/swagger\n\n\nSwagger\u306e\u5b9a\u7fa9\u3092\u8a18\u8ff0\nsrc/book/swagger.go\n\u306bAPI\u306e\u4ed5\u69d8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\npackage \u306e\u8a18\u8ff0\u306e\u4e0a\u306b\u3001API\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068basePath\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n// @APIVersion 1.0.0\n// @basePath /newapp/v1\npackage book\n\n\u6b21\u306btest\u3092\u53d6\u5f97\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n// @Title test\n// @Description get test book\n// @Accept  json\n// @Param   BookId     path    string     true        \"book_id\"\n// @Router /book/{BookId} [get]\nfunc test() {}\n\n\u30e1\u30bd\u30c3\u30c9\u540d\u306f\u3001nickname\u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\u305d\u306e\u307b\u304b\u306e\u5b9a\u7fa9\u306b\u3064\u3044\u3066\u306f\u3001\nWhats swagger\n\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nSwagger\u306e\u751f\u6210\nSwagger\u3092\u751f\u6210\u3059\u308b\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ make deploy SWAGGER=book\n\n\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u305d\u3046\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3067\u3001swagger\u5f62\u5f0f\u306eJSON\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\nhttp://localhost:8080/swagger/v1/book/apidocs.json\n\u3053\u3053\u307e\u3067\u3067\u304d\u308c\u3070\u3001\u3042\u3068\u306fSwagger UI\u3092\u4f7f\u3063\u3066\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u751f\u6210\u3057\u305f\u308a\u306a\u3069\u3001\u3084\u308a\u653e\u984c\u3067\u3059\u3002\n\n\u305d\u306e\u4ed6\u306b\u63d0\u4f9b\u3055\u308c\u308b\u6a5f\u80fd\n\u3053\u3053\u307e\u3067\u3001\u6700\u4f4e\u9650\u306e\u6a5f\u80fd\u306b\u3064\u3044\u3066\u3001\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3057\u305f\u3002\nflorest\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u4ed6\u306e\u6a5f\u80fd\u3068\u3057\u3066\u306f\u3001\n\nMySQL Components\nmongodb Components\nA/B Test\n\u975e\u540c\u671f\u306eLogging (Logstash\u5f62\u5f0f\u306eJSON\u306b\u5bfe\u5fdc)\nDatadog\u3092\u4f7f\u3063\u305f\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u306a\u3069\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\n\u5404\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u6642\u9593\u306e\u8a08\u6e2c\n\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u975e\u540c\u671f\u5b9f\u884c\u3055\u308c\u308bWorker pool\n\u30a8\u30e9\u30fc\u3084\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306a\u3069Http Utilitiy\nFault tolerance\u306a\u6a5f\u80fd\n\u5358\u7d14\u306a\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\nRate limit\n\n\u306a\u3069\u304c\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\u99c6\u3051\u8db3\u3067\u307e\u3068\u3081\u305f\u305f\u3081\u3001\u8aac\u660e\u4e0d\u8db3\u306e\u90e8\u5206\u304c\u591a\u3005\u3042\u308a\u307e\u3059\u304c\u3001go\u521d\u5fc3\u8005\u306e\u81ea\u5206\u306b\u306f\u3001\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306a\u3069\u5b66\u3076\u90e8\u5206\u304c\u591a\u3005\u3042\u308a\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u306e\u8a18\u4e8b\u306f[Go (\u305d\u306e3) Advent Calendar 2016](http://qiita.com/advent-calendar/2016/go3)\u306e9\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u306e\u8abf\u67fb\u306e\u3044\u3063\u304b\u3093\u3068\u3057\u3066\u3001go\u88fd\u306eWebAPI\u7528\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af[florest](https://github.com/jabong/florest-core/wiki/Workflow)\u3068\u3044\u3046\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3001\u3053\u3053\u306b\u307e\u3068\u3081\u308b\u3002\n\n# \u524d\u63d0\u6761\u4ef6\n\n\u3053\u3053\u3067\u306f\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u305f\u3002\n\n- go 1.7.3\n- florest (github\u306e2016/11/7\u306emaster\u306ehead\uff09\n- [gingko](https://onsi.github.io/ginkgo/)\n\ngingko\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u4ee5\u4e0b\n\n```bash\n$ go get github.com/onsi/ginkgo/ginkgo\n$ go get github.com/onsi/gomega\n```\n\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\n\u307e\u305a\u3001florest-core\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30ed\u30fc\u30ab\u30eb\u306bclone\u3057\u307e\u3059\u3002\n\n```bash\n$ git clone https://github.com/jabong/florest-core\n```\n\n\u3055\u3089\u306bclone\u3057\u305fflorest-core\u306e\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u3066\u3001\u30a2\u30d7\u30ea\u306e\u96db\u5f62\u3092\u3064\u304f\u308a\u307e\u3059\u3002\n`make newapp`\u3092\u5b9f\u884c\u3059\u308b\u969b\u306b\u74b0\u5883\u5909\u6570NEWAPP\u306b\u5c55\u958b\u5148\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```bash\n$ cd florest-core\n$ make newapp NEWAPP=\"~/newapp\"\nbuilding new app\ncopying dependent libs\n$ cd ~/newapp\n```\n\n\u3053\u308c\u3067\u30db\u30fc\u30e0\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306bnewapp\u304c\u4f5c\u3089\u308c\u307e\u3057\u305f\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u69cb\u6210\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```bash\n.\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 _libs\n\u251c\u2500\u2500 config\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 logger\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 logger.json\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 newapp\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 conf.json\n\u251c\u2500\u2500 main.go\n\u251c\u2500\u2500 scripts\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 README.md\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 logger.sh\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 swagger.sh\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 README.md\n    \u251c\u2500\u2500 common\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 appconfig\n    \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 application_config.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 appconstant\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 error_codes.go\n    \u251c\u2500\u2500 hello\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 api_definition.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 data_structures.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world.go\n    \u2502\u00a0\u00a0 \u251c\u2500\u2500 hello_world_health_checker.go\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 swagger.go\n    \u2514\u2500\u2500 test\n        \u251c\u2500\u2500 coverage.sh\n        \u251c\u2500\u2500 servicetest\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 config_initialize.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 logger_initialize.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 service_initialize.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 service_test.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 service_test_helper.go\n        \u2502\u00a0\u00a0 \u251c\u2500\u2500 test_web_server.go\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 testdata\n        \u2502\u00a0\u00a0     \u251c\u2500\u2500 testconf.json\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 testloggerAsync.json\n        \u2514\u2500\u2500 utils\n            \u251c\u2500\u2500 request_helper.go\n            \u2514\u2500\u2500 response_status_helper.go\n```\n\n\u3055\u3089\u306b\u5b9f\u884c\u30a8\u30e9\u30fc\u306a\u3069\u3092\u5410\u304d\u51fa\u3059\u30ed\u30b0\u7528\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001`/var/log/\u30a2\u30d7\u30ea\u540d`\u306b\u4f5c\u3089\u308c\u308b\u306e\u3067\u3001sudo\u3092\u4f7f\u3063\u3066\u30d5\u30a9\u30eb\u30c0\u3092\u4f5c\u6210\u3057\u305f\u3042\u3068\u306b\u3001florest\u3092\u5b9f\u884c\u3059\u308b\u30e6\u30fc\u30b6\u30fc\u306b\u6240\u6709\u8005\u3092\u5909\u66f4\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\n$ sudo mkdir /var/log/newapp\n$ sudo chown myuser /var/log/newapp\n```\n\n\u6700\u4f4e\u9650\u306e\u6e96\u5099\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u8a66\u3057\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\n```bash\n$ cd ~/newapp\n$ make deploy\n```\n\n`bin`\u30d5\u30a9\u30eb\u30c0\u914d\u4e0b\u306b\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002bin\u30d5\u30a9\u30eb\u30c0\u306b\u79fb\u52d5\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\n$ cd bin\n$ ./newapp\nAPPLICATION BEGIN\n2016/11/15 00:14:41 Web server Initialization begin\n2016/11/15 00:14:41\nInitializing Config\nconfig &{AppName: AppVersion: ServerPort: LogConfFile: MonitorConfig:{APPName: APIKey: APPKey: AgentServer: Platform: Verbose:false Enabled:false MetricsServer:} Performance:{UseCorePercentage:0 GCPercentage:0} DynamicConfig:{Active:false RefreshInterval:0 ConfigKey: CacheKey:} HTTPConfig:{MaxConn:0 MaxIdleConns:0 ResponseHeaderTimeout:0 DisableKeepAlives:false} Profiler:{Enable:false SamplingRate:0} ResponseHeaders:{CacheControl:{ResponseType: NoCache:false NoStore:false MaxAgeInSeconds:0}} ApplicationConfig:0xc4200cbe20 AppRateLimiterConfig:<nil>}\n2016/11/15 00:14:41 Application Config Created\n2016/11/15 00:14:41\nGlobal Config=&{AppName:newapp AppVersion:1.0.0 ServerPort:8080 LogConfFile:conf/logger.json MonitorConfig:{APPName:newapp APIKey: APPKey: AgentServer:datadog:8125 Platform:DatadogAgent Verbose:false Enabled:false MetricsServer:datadog:8065} Performance:{UseCorePercentage:100 GCPercentage:1000} DynamicConfig:{Active:false RefreshInterval:0 ConfigKey: CacheKey:} HTTPConfig:{MaxConn:0 MaxIdleConns:0 ResponseHeaderTimeout:0 DisableKeepAlives:false} Profiler:{Enable:false SamplingRate:0} ResponseHeaders:{CacheControl:{ResponseType: NoCache:false NoStore:false MaxAgeInSeconds:0}} ApplicationConfig:0xc4200cbe20 AppRateLimiterConfig:<nil>}\n2016/11/15 00:14:41\nApplication Config=&{Hello:{ResponseHeaders:{CacheControl:{ResponseType: NoCache:false NoStore:false MaxAgeInSeconds:0}}}}\nNo of Cpu Core to be Used = 4\n```\n\n8080\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\u3068\u30b5\u30fc\u30d0\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n# \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8ffd\u52a0\n\nbook\u3068\u3044\u3046\u65b0\u3057\u3044\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n## \u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n\u6700\u521d\u306b\u3001src\u30d5\u30a9\u30eb\u30c0\u306e\u4e0b\u306ehello\u30d5\u30a9\u30eb\u30c0\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u3066\u3001\n\u5185\u90e8\u306e\u5909\u6570\u540d\u306a\u3069\u306e\u5024\u3092\u5168\u3066\u7f6e\u63db\u3057\u307e\u3059\u3002\n\n```bash\n$ cp -R src/hello src/book\n$ find src/book -name \"hello_world*\" -exec rename s/hello_world/book/ {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/helloWorld/book/g' {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/hello/book/g' {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/HelloWorld/Book/g' {} +\n$ find src/book -name \"*.go\" -exec sed -i 's/Hello/Book/g' {} +\n```\n\n## main.go\u3078\u306eAPI\u306e\u8ffd\u52a0\n\u6b21\u306bmain.go\u306b\u3001\u3055\u304d\u307b\u3069\u8907\u88fd\u3057\u3066\u30ea\u30cd\u30fc\u30e0\u3057\u305fbook API\u3078\u306eimport\u306e\u8ffd\u52a0\u3068\u3001\nflorest\u306eservice\u306bBookAPI\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```go\nimport (\n        \"common/appconfig\"\n        \"common/appconstant\"\n        \"fmt\"\n        \"hello\"\n        \"book\" // \u8ffd\u52a0\n\n        \"github.com/jabong/florest-core/src/core/service\"\n)\n\n//main is the entry point of the florest web service\nfunc main() {\n        fmt.Println(\"APPLICATION BEGIN\")\n        webserver := new(service.Webserver)\n        registerConfig()\n        registerErrors()\n        registerAllApis()\n        webserver.Start()\n}\n\nfunc registerAllApis() {\n        service.RegisterAPI(new(hello.HelloAPI))\n        service.RegisterAPI(new(book.BookAPI)) // \u8ffd\u52a0\n}\n\n```\n\n## \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u30d1\u30b9\u306e\u8a2d\u5b9a\n\n`src/book/api_definition.go`\n\n\u3067\u3001\u30db\u30b9\u30c8\u540d\u4ee5\u4e0b\u306e\u30d1\u30b9\u540d\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u3055\u3089\u306b\u3001Book ID\u3092\u6307\u5b9a\u3057\u3066\u3001\u6307\u5b9a\u306eID\u306e\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u30d1\u30b9\u5185\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf`bookId`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```go\nfunc (a *BookAPI) GetVersion() versionmanager.Version {\n        return versionmanager.Version{\n                Resource: \"BOOK\", //\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u7d42\u7aef\u306e\u30d1\u30b9\u540d\n                Version:  \"V1\", // \u30a2\u30d7\u30ea\u540d\u306e\u6b21\u306b\u304f\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u540d\n                Action:   \"GET\", // \u30ea\u30af\u30a8\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\n                BucketID: constants.OrchestratorBucketDefaultValue, //todo - should it be a constant\n                Path:     \"{bookId}\", // bookId\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n        }\n}\n```\n\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u306b\u3088\u308a\n\n`http://\u30db\u30b9\u30c8\u540d:8080/newapp/v1/book/{bookId}`\n\n\u3068\u3044\u3046\u30d1\u30b9\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\n\n`newapp`\u306e\u90e8\u5206\u306f\u3001`bin/conf/conf.json`\u306e\u3001\u30eb\u30fc\u30c8\u306e`AppName`\u30ad\u30fc\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5024\u306b\u306a\u308a\u307e\u3059\u3002\n\n## \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u305f\u6642\u306e\u51e6\u7406\u306e\u8ffd\u52a0\n\n`src/book/book.go`\u306e\u3001`func (a Book) Execute(io workflow.WorkFlowData) (workflow.WorkFlowData, error)`\u306bBook API\u306e\u51e6\u7406\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n\u5f15\u6570\u306e`io`\u306b\u306f\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u60c5\u5831\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u60c5\u5831\u304c\u542b\u307e\u308c\u307e\u3059\u3002\n\n### \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u53d6\u5f97\n\n`io`\u306e`IOData.Get`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3063\u3066\u5024\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u5f15\u6570\u306b\u5165\u308b\u5024\u306f\u3001[request_response_constants.go](https://github.com/jabong/florest-core/blob/master/src/common/constants/request_response_constants.go)\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5b9a\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002`PathParams`\u3092\u53d6\u5f97\u3057\u305f\u3044\u306e\u3067\u3001\u5f15\u6570\u306b`constants.PathParams`\n\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n```go\n        pathp, _ := io.IOData.Get(constants.PathParams)\n        fmt.Println(pathp)\n```\n\n`deploy`\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089curl\u3067bookId\u3092\u6307\u5b9a\u3057\u3066\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ curl -XGET \"http://localhost:8080/newapp/v1/book/123\" | jq .\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   158  100   158    0     0  22829      0 --:--:-- --:--:-- --:--:-- 26333\n{\n  \"status\": {\n    \"httpStatusCode\": 200,\n    \"success\": true,\n    \"errors\": null\n  },\n  \"data\": null,\n  \"_metaData\": {\n    \"urlParams\": {},\n    \"apiMetaData\": {}\n  }\n}\n```\n\n\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u3044\u308b\u30b3\u30f3\u30bd\u30fc\u30eb\u5074\u306e\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u30a2\u30a6\u30c8\u306b\u306f\n\n```bash\n123\n```\n\n\u3068\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u6307\u5b9a\u3057\u305f\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n### \u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u8a18\u8ff0\n\n\u51e6\u7406\u3057\u305f\u7d50\u679c\u306a\u3069\u3092\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u5185\u5bb9\u306b\u8a18\u8ff0\u3059\u308b\u306b\u306f\u3001`io`\u306e`IOData.Set`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u3053\u3061\u3089\u3082\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u7b2c\u4e00\u5f15\u6570\u306b\u306f\u3001[request_response_constants.go](https://github.com/jabong/florest-core/blob/master/src/common/constants/request_response_constants.go)\u306e\u5b9a\u6570\u304b\u3089\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306eJSON\u306edata\u30ad\u30fc\u306e\u5024\u306b\u7d50\u679c\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u306b\u306f\u3001`constants.Result`\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```go\n        io.IOData.Set(constants.Result, \"test\")\n```\n\n\u540c\u69d8\u306b\u3001Deploy\u3057\u305f\u3042\u3068\u306bWebAPI\u306e\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u3001curl\u3092\u4f7f\u3063\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u5024\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n$ curl -XGET \"http://localhost:8080/newapp/v1/book/123\" | jq .\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   125  100   125    0     0   8965      0 --:--:-- --:--:-- --:--:--  9615\n{\n  \"status\": {\n    \"httpStatusCode\": 200,\n    \"success\": true,\n    \"errors\": null\n  },\n  \"data\": \"test\",\n  \"_metaData\": {\n    \"urlParams\": {},\n    \"apiMetaData\": {}\n  }\n}\n```\n\n\u7b2c2\u5f15\u6570\u306b\u6307\u5b9a\u3057\u305f\u6587\u5b57\u5217`test`\u304cdata\u30ad\u30fc\u306b\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n# Swagger\u306e\u51fa\u529b\n\n## \u4f9d\u5b58\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nSwagger\u3092\u6271\u3046\u305f\u3081\u306b\u3001\u307e\u305ago\u306eswagger\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ go get github.com/yvasiyarov/swagger\n```\n\n## Swagger\u306e\u5b9a\u7fa9\u3092\u8a18\u8ff0\n\n`src/book/swagger.go`\n\n\u306bAPI\u306e\u4ed5\u69d8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n`package` \u306e\u8a18\u8ff0\u306e\u4e0a\u306b\u3001API\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068`basePath`\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```go\n// @APIVersion 1.0.0\n// @basePath /newapp/v1\npackage book\n```\n\n\u6b21\u306btest\u3092\u53d6\u5f97\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```go\n// @Title test\n// @Description get test book\n// @Accept  json\n// @Param   BookId     path    string     true        \"book_id\"\n// @Router /book/{BookId} [get]\nfunc test() {}\n```\n\n\u30e1\u30bd\u30c3\u30c9\u540d\u306f\u3001`nickname`\u3068\u3057\u3066\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\u305d\u306e\u307b\u304b\u306e\u5b9a\u7fa9\u306b\u3064\u3044\u3066\u306f\u3001\n\n[Whats swagger](https://github.com/swagger-api/swagger-ui#whats-swagger)\n\n\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## Swagger\u306e\u751f\u6210\n\nSwagger\u3092\u751f\u6210\u3059\u308b\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\n$ make deploy SWAGGER=book\n```\n\n\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u305d\u3046\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3067\u3001swagger\u5f62\u5f0f\u306eJSON\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\nhttp://localhost:8080/swagger/v1/book/apidocs.json\n\n\u3053\u3053\u307e\u3067\u3067\u304d\u308c\u3070\u3001\u3042\u3068\u306f[Swagger UI](http://swagger.io/swagger-ui/)\u3092\u4f7f\u3063\u3066\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u751f\u6210\u3057\u305f\u308a\u306a\u3069\u3001\u3084\u308a\u653e\u984c\u3067\u3059\u3002\n\n# \u305d\u306e\u4ed6\u306b\u63d0\u4f9b\u3055\u308c\u308b\u6a5f\u80fd\n\n\u3053\u3053\u307e\u3067\u3001\u6700\u4f4e\u9650\u306e\u6a5f\u80fd\u306b\u3064\u3044\u3066\u3001\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\nflorest\u3067\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u4ed6\u306e\u6a5f\u80fd\u3068\u3057\u3066\u306f\u3001\n\n- MySQL Components\n- mongodb Components\n- A/B Test\n- \u975e\u540c\u671f\u306eLogging (Logstash\u5f62\u5f0f\u306eJSON\u306b\u5bfe\u5fdc)\n- Datadog\u3092\u4f7f\u3063\u305f\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u306a\u3069\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\n- \u5404\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u30b3\u30fc\u30c9\u306e\u5b9f\u884c\u6642\u9593\u306e\u8a08\u6e2c\n- \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u975e\u540c\u671f\u5b9f\u884c\u3055\u308c\u308bWorker pool\n- \u30a8\u30e9\u30fc\u3084\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306a\u3069Http Utilitiy\n- Fault tolerance\u306a\u6a5f\u80fd\n- \u5358\u7d14\u306a\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n- Rate limit\n\n\u306a\u3069\u304c\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n\n# \u307e\u3068\u3081\n\n\u99c6\u3051\u8db3\u3067\u307e\u3068\u3081\u305f\u305f\u3081\u3001\u8aac\u660e\u4e0d\u8db3\u306e\u90e8\u5206\u304c\u591a\u3005\u3042\u308a\u307e\u3059\u304c\u3001go\u521d\u5fc3\u8005\u306e\u81ea\u5206\u306b\u306f\u3001\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306a\u3069\u5b66\u3076\u90e8\u5206\u304c\u591a\u3005\u3042\u308a\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n", "tags": ["Go", "swagger"]}