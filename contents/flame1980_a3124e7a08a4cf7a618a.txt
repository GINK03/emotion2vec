{"tags": ["groonga", "mroonga"], "context": " More than 1 year has passed since last update.2014/04/29 \u306b\u958b\u50ac\u3055\u308c\u305f Groonga Meetup \u306e\u5185\u5bb9\n\uff08\u4e00\u90e8\u72ec\u7fd2\u3042\u308a\uff09\n\n\u306f\u3058\u3081\u306b\n\n\u74b0\u5883\n\nCentOS 6.5\n\n\n\u53c2\u8003\n\nhttp://groonga.org/ja/docs/\nhttp://mroonga.org/ja/docs/\n\n\n\u767a\u8868\u8cc7\u6599\n\nhttp://www.slideshare.net/kenhys/groonga-meetup-20140429\n\n\nGroonga\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u307e\u305a\u306fgroonga-httpd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo rpm -ivh http://packages.groonga.org/centos/groonga-release-1.1.0-1.noarch.rpm\n$ sudo yum makecache\n$ sudo yum -y install groonga-httpd\n\n\n\u30c8\u30fc\u30af\u30ca\u30a4\u30b6\u30fcmecab\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install -y groonga-tokenizer-mecab\n\n\nIPA\u8f9e\u66f8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install -y mecab-ipadic\n\n\n\u30ce\u30fc\u30de\u30e9\u30a4\u30b6\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install -y install groonga-normalizer-mysql\n\n\nGroonga\u3092\u4f7f\u3063\u3066\u307f\u308b\n\nGroonga\u3092\u8d77\u52d5\n$ sudo service groonga-httpd start\n\n\nGroonga DB\u3092\u4f5c\u6210\n$ sudo mkdir /tmp/groonga-databases\n$ sudo groonga -n /tmp/groonga-databases/introduction.db\n\n\nGroonga\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\n$ groonga /tmp/groonga-databases/introduction.db\n> status\n[[0,1398756630.8737,0.00139641761779785],{\"alloc_count\":140,\"starttime\":1398756628,\"uptime\":2,\"version\":\"4.0.1\",\"n_queries\":0,\"cache_hit_rate\":0.0,\"command_version\":1,\"default_command_version\":1,\"max_command_version\":2}]\n\n\nGroonga\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\n> table_create --name Site --flags TABLE_HASH_KEY --key_type ShortText\n[[0,1398756749.4216,0.00644159317016602],true]\n\n\nSELECT\u3057\u3066\u307f\u308b\n> select --table Site\n[[0,1398756771.4205,0.000464677810668945],[[[0],[[\"_id\",\"UInt32\"],[\"_key\",\"ShortText\"]]]]]\n\n\n\u30ab\u30e9\u30e0\u3092\u4f5c\u6210\n> column_create --table Site --name title --type ShortText\n[[0,1398756827.25259,0.0061037540435791],true]\n\n\n\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b\n> load --table Site\n[\n{\"_key\":\"http://example.org/\",\"title\":\"This is test record 1!\"},\n{\"_key\":\"http://example.net/\",\"title\":\"test record 2.\"},\n{\"_key\":\"http://example.com/\",\"title\":\"test test record three.\"},\n{\"_key\":\"http://example.net/afr\",\"title\":\"test record four.\"},\n{\"_key\":\"http://example.org/aba\",\"title\":\"test test test record five.\"},\n{\"_key\":\"http://example.com/rab\",\"title\":\"test test test test record six.\"},\n{\"_key\":\"http://example.net/atv\",\"title\":\"test test test record seven.\"},\n{\"_key\":\"http://example.org/gat\",\"title\":\"test test record eight.\"},\n{\"_key\":\"http://example.com/vdw\",\"title\":\"test test record nine.\"},\n]\n[[0,1398756868.73675,0.00151777267456055],9]\n\n\n\u6295\u5165\u3055\u308c\u305f\u304b\u78ba\u8a8d\n> select --table Site\n[[0,1398756991.26957,9.03606414794922e-05],[[[9],[[\"_id\",\"UInt32\"],[\"_key\",\"ShortText\"],[\"title\",\"ShortText\"]],[1,\"http://example.org/\",\"This is test record 1!\"],[2,\"http://example.net/\",\"test record 2.\"],[3,\"http://example.com/\",\"test test record three.\"],[4,\"http://example.net/afr\",\"test record four.\"],[5,\"http://example.org/aba\",\"test test test record five.\"],[6,\"http://example.com/rab\",\"test test test test record six.\"],[7,\"http://example.net/atv\",\"test test test record seven.\"],[8,\"http://example.org/gat\",\"test test record eight.\"],[9,\"http://example.com/vdw\",\"test test record nine.\"]]]]\n\n\n\u691c\u7d22\u3057\u3066\u307f\u308b\n> select --table Site --query _id:1\n[[0,1398757017.42761,0.00126171112060547],[[[1],[[\"_id\",\"UInt32\"],[\"_key\",\"ShortText\"],[\"title\",\"ShortText\"]],[1,\"http://example.org/\",\"This is test record 1!\"]]]]\n\n\nMroonga\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install centos-release-SCL\n$ sudo yum -y install mysql mysql55-mysql-server\n$ sudo /etc/init.d/mysql55-mysqld start\n$ sudo yum -y install mysql55-mroonga\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n$ mysql -u root test\n$ SHOW ENGINES;\n\n\u7d50\u679c\n\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |\n| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |\n| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |\n| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |\n| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |\n| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |\n| mroonga            | YES     | CJK-ready fulltext search, column store                        | NO           | NO   | NO         |\n| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |\n| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |\n| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n10 rows in set (0.00 sec)\n\n\u3053\u308c\u3067mroonga\u30a8\u30f3\u30b8\u30f3\u304c\u898b\u308c\u3066\u3044\u308c\u3070OK\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u78ba\u8a8d\nmysql> SELECT * FROM mysql.plugin;\n+---------+---------------+\n| name    | dl            |\n+---------+---------------+\n| mroonga | ha_mroonga.so |\n+---------+---------------+\n1 row in set (0.00 sec)\n\n\n\u95a2\u6570\u78ba\u8a8d\nmysql> SELECT * FROM mysql.func;\n+--------------------+-----+---------------+----------+\n| name               | ret | dl            | type     |\n+--------------------+-----+---------------+----------+\n| last_insert_grn_id |   2 | ha_mroonga.so | function |\n| mroonga_snippet    |   0 | ha_mroonga.so | function |\n| mroonga_command    |   0 | ha_mroonga.so | function |\n| mroonga_escape     |   0 | ha_mroonga.so | function |\n+--------------------+-----+---------------+----------+\n4 rows in set (0.00 sec)\n\n\n\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\nmysql> CREATE DATABASE MroongaTest;\nmysql> CREATE TABLE diaries (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  content VARCHAR(255),\n  FULLTEXT INDEX (content)\n) ENGINE = mroonga DEFAULT CHARSET utf8\n;\n\n\n\u30c7\u30fc\u30bf\u3092INSERT\u3059\u308b\nmysql> INSERT INTO diaries (content) VALUES (\"It'll be fine tomorrow.\"); \nmysql> INSERT INTO diaries (content) VALUES (\"It'll rain tomorrow\"); \n\n\n\u5168\u6587\u691c\u7d22\u3092\u3057\u3066\u307f\u308b\nmysql> SELECT * FROM diaries WHERE MATCH(content) AGAINST(\"fine\");\n\n\u7d50\u679c\n\n+----+-------------------------+\n| id | content                 |\n+----+-------------------------+\n|  1 | It'll be fine tomorrow. |\n+----+-------------------------+\n1 row in set (0.01 sec)\n\n\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u4f7f\u3063\u3066\u307f\u308b\n\n\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u89e3\u51cd\n$ wget http://packages.groonga.org/tmp/groonga-meetup-20140429.tar.gz\n$ tar zxvf groonga-meetup-20140429.tar.gz\n$ cd examples/\n\n\n\u30ed\u30fc\u30c9\u3057\u3066\u307f\u308b\n$ cd 001-load/\n$ ./load-fail.sh\n[[0,1398757567.55438,0.00307273864746094],true]\n[[0,1398757567.55753,0.00510597229003906],true]\n[[0,1398757567.56268,0.00349569320678711],true]\n[[0,1398757567.56621,0.00398659706115723],true]\n[[0,1398757567.57024,0.00527501106262207],true]\n[[0,1398757567.57555,0.00219011306762695],true]\n[[0,1398757572.61219,0.00156879425048828],2]\n$ ./load-succeed.sh\n[[0,1398757587.44647,0.00412511825561523],true]\n[[0,1398757587.45159,0.00542593002319336],true]\n[[0,1398757587.45706,0.00334930419921875],true]\n[[0,1398757587.46064,0.00371170043945312],true]\n[[0,1398757587.46439,0.00915384292602539],true]\n[[0,1398757587.47359,0.00220870971679688],true]\n[[0,1398757592.53038,0.00335979461669922],3]\n\n\n\u66f4\u65b0\u3057\u3066\u307f\u308b\n$ cd 002-update/\n$ ./update-status.sh\n[[0,1398757712.52183,0.00171470642089844],[[[3],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[1,\"JR\u5317\u6d77\u9053\",0],[2,\"JR\u6771\u65e5\u672c\",0],[3,\"JR\u6771\u6d77\",0]]]]\n[[0,1398757712.52369,0.000189065933227539],1]\n[[0,1398757712.52393,0.000104427337646484],[[[3],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[1,\"JR\u5317\u6d77\u9053\",0],[2,\"JR\u6771\u65e5\u672c\",0],[3,\"JR\u6771\u6d77\",1]]]]\n\n\n\u691c\u7d22\u3057\u3066\u307f\u308b\n$ cd 003-search/\n$ ./search-name.sh\n[[0,1398757796.71279,0.00573444366455078],[[[0],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]]]]]\n\n\u691c\u7d22\u3067\u304d\u306a\u3044\u3002INDEX\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u3002\n\n$ ./add-index.sh\n[[-22,1398757873.51991,0.000749111175537109,\"table not found.\",[[\"proc_table_remove\",\"proc.c\",1267]]],false]\n[[0,1398757873.52077,0.0132768154144287],true]\n[[0,1398757873.53409,0.019017219543457],true]\n\n\u8ffd\u52a0\u3057\u3066\n\n$ ./search-name.sh\n[[0,1398757888.0436,0.00251364707946777],[[[2],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]],[2,\"JR\u6771\u65e5\u672c\"],[3,\"JR\u6771\u6d77\"]]]]\n\n\u6b63\u3057\u304f\u691c\u7d22\u3067\u304d\u305f\u3002\n\n\u524a\u9664\u3057\u3066\u307f\u308b\n\nKey\u6307\u5b9a\u3067\u524a\u9664\n$ ./delete-by-key.sh\n[[0,1398757988.83756,0.00121164321899414],[[[3],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]],[1,\"JR\u5317\u6d77\u9053\"],[2,\"JR\u6771\u65e5\u672c\"],[3,\"JR\u6771\u6d77\"]]]]\n[[0,1398757988.83935,0.00123763084411621],true]\n[[0,1398757988.84063,0.000100374221801758],[[[2],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]],[1,\"JR\u5317\u6d77\u9053\"],[3,\"JR\u6771\u6d77\"]]]]\n\n\n\u5185\u5bb9\u3067\u524a\u9664\n$ ./delete-by-name.sh\n[[0,1398758027.33819,0.00152397155761719],[[[2],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[1,\"JR\u5317\u6d77\u9053\",0],[3,\"JR\u6771\u6d77\",1]]]]\n[[0,1398758027.33984,0.00244832038879395],true]\n[[0,1398758027.34233,6.98566436767578e-05],[[[1],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[3,\"JR\u6771\u6d77\",1]]]]\n\n\nStatus\u3067\u524a\u9664\n$ ./delete-by-status.sh\n[[0,1398758043.58458,0.00207901000976562],[[[1],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[3,\"JR\u6771\u6d77\",1]]]]\n[[0,1398758043.5868,0.00520038604736328],true]\n[[0,1398758043.59204,6.50882720947266e-05],[[[0],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]]]]]\n\n\nHTTP\u7d4c\u7531\u3067\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n$ ./create-table.sh\n[[-22,1398758111.06572,0.00279664993286133,\"table not found.\",[[\"proc_table_remove\",\"proc.c\",1267]]],false][[0,1398758111.07654,0.00604772567749023],true]table_create Company TABLE_HASH_KEY UInt32\n$ ./register-normalizer.sh\n[[0,1398758159.72772,0.000623226165771484],true]\n\n\nHTTP\u7d4c\u7531\u3067\u30ab\u30e9\u30e0\u8ffd\u52a0\n$ ./create-column.sh\n[[-22,1398758237.59277,0.00063014030456543,\"column not found.\",[[\"proc_column_remove\",\"proc.c\",1408]]],false][[0,1398758237.59922,0.00746011734008789],true]table_create Company TABLE_HASH_KEY UInt32\ncolumn_create Company full_name COLUMN_SCALAR ShortText\n\n\nPOST\u3067\u30c7\u30fc\u30bf\u66f4\u65b0\n$ ./post-data.sh\n[[0,1398758285.00032,0.00106167793273926],true][[0,1398758285.00743,0.00356841087341309],true][[0,1398758285.01732,0.00328946113586426],true][[0,1398758285.02703,0.00469160079956055],true][[0,1398758285.03932,0.00430917739868164],true][[0,1398758285.05058,0.00552940368652344],true][[0,1398758285.06584,0.00384759902954102],true][[0,1398758285.07753,0.0031428337097168],true][[0,1398758285.08816,0.00513648986816406],true][[0,1398758285.10026,0.00368595123291016],true][[0,1398758285.11063,0.00301361083984375],true][[0,1398758285.12507,0.00776052474975586],165]\n\n\nHTTP\u7d4c\u7531\u3067\u691c\u7d22\n$ ./search-http.sh\n[[-22,1398758329.08624,0.000628471374511719,\"table not found.\",[[\"proc_table_remove\",\"proc.c\",1267]]],false][[0,1398758329.09341,0.0181374549865723],true][[0,1398758329.12223,0.0185294151306152],true][[0,1398758329.14737,0.00194764137268066],[[[1],[[\"_id\",\"UInt32\"],[\"_key\",\"UInt32\"],[\"full_name\",\"ShortText\"],[\"hiragana\",\"ShortText\"],[\"katakana\",\"ShortText\"],[\"name\",\"ShortText\"],[\"romaji\",\"ShortText\"],[\"short_name\",\"ShortText\"],[\"sort\",\"UInt32\"],[\"status\",\"UInt32\"],[\"type\",\"UInt32\"]],[10,14,\"\u4eac\u738b\u96fb\u9244\u682a\u5f0f\u4f1a\u793e\",\"\u3051\u3044\u304a\u3046\u3067\u3093\u3066\u3064\",\"\u30b1\u30a4\u30aa\u30a6\u30c7\u30f3\u30c6\u30c4\",\"\u4eac\u738b\u96fb\u9244\",\"keioudentetsu\",\"\u4eac\u738b\",14,0,2]]]]\n\n\nGroonga\u7ba1\u7406\u753b\u9762\nhttp://[HOST OR IP]:10041/\n2014/04/29 \u306b\u958b\u50ac\u3055\u308c\u305f Groonga Meetup \u306e\u5185\u5bb9\n\uff08\u4e00\u90e8\u72ec\u7fd2\u3042\u308a\uff09\n\n# \u306f\u3058\u3081\u306b\n\n## \u74b0\u5883\n- CentOS 6.5\n\n## \u53c2\u8003\n- http://groonga.org/ja/docs/\n- http://mroonga.org/ja/docs/\n\n## \u767a\u8868\u8cc7\u6599\n- http://www.slideshare.net/kenhys/groonga-meetup-20140429\n\n# Groonga\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n## \u307e\u305a\u306f`groonga-httpd`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo rpm -ivh http://packages.groonga.org/centos/groonga-release-1.1.0-1.noarch.rpm\n$ sudo yum makecache\n$ sudo yum -y install groonga-httpd\n```\n\n## \u30c8\u30fc\u30af\u30ca\u30a4\u30b6\u30fc`mecab`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo yum install -y groonga-tokenizer-mecab\n```\n\n## IPA\u8f9e\u66f8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo yum install -y mecab-ipadic\n```\n\n## \u30ce\u30fc\u30de\u30e9\u30a4\u30b6\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo yum install -y install groonga-normalizer-mysql\n```\n\n## Groonga\u3092\u4f7f\u3063\u3066\u307f\u308b\n\n### Groonga\u3092\u8d77\u52d5\n```\n$ sudo service groonga-httpd start\n```\n\n### Groonga DB\u3092\u4f5c\u6210\n```\n$ sudo mkdir /tmp/groonga-databases\n$ sudo groonga -n /tmp/groonga-databases/introduction.db\n```\n### Groonga\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\n```\n$ groonga /tmp/groonga-databases/introduction.db\n> status\n[[0,1398756630.8737,0.00139641761779785],{\"alloc_count\":140,\"starttime\":1398756628,\"uptime\":2,\"version\":\"4.0.1\",\"n_queries\":0,\"cache_hit_rate\":0.0,\"command_version\":1,\"default_command_version\":1,\"max_command_version\":2}]\n```\n\n### Groonga\u306b\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\n```\n> table_create --name Site --flags TABLE_HASH_KEY --key_type ShortText\n[[0,1398756749.4216,0.00644159317016602],true]\n```\n\n### SELECT\u3057\u3066\u307f\u308b\n```\n> select --table Site\n[[0,1398756771.4205,0.000464677810668945],[[[0],[[\"_id\",\"UInt32\"],[\"_key\",\"ShortText\"]]]]]\n```\n\n### \u30ab\u30e9\u30e0\u3092\u4f5c\u6210\n```\n> column_create --table Site --name title --type ShortText\n[[0,1398756827.25259,0.0061037540435791],true]\n```\n\n### \u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u307f\u308b\n```\n> load --table Site\n[\n{\"_key\":\"http://example.org/\",\"title\":\"This is test record 1!\"},\n{\"_key\":\"http://example.net/\",\"title\":\"test record 2.\"},\n{\"_key\":\"http://example.com/\",\"title\":\"test test record three.\"},\n{\"_key\":\"http://example.net/afr\",\"title\":\"test record four.\"},\n{\"_key\":\"http://example.org/aba\",\"title\":\"test test test record five.\"},\n{\"_key\":\"http://example.com/rab\",\"title\":\"test test test test record six.\"},\n{\"_key\":\"http://example.net/atv\",\"title\":\"test test test record seven.\"},\n{\"_key\":\"http://example.org/gat\",\"title\":\"test test record eight.\"},\n{\"_key\":\"http://example.com/vdw\",\"title\":\"test test record nine.\"},\n]\n[[0,1398756868.73675,0.00151777267456055],9]\n```\n\n### \u6295\u5165\u3055\u308c\u305f\u304b\u78ba\u8a8d\n```\n> select --table Site\n[[0,1398756991.26957,9.03606414794922e-05],[[[9],[[\"_id\",\"UInt32\"],[\"_key\",\"ShortText\"],[\"title\",\"ShortText\"]],[1,\"http://example.org/\",\"This is test record 1!\"],[2,\"http://example.net/\",\"test record 2.\"],[3,\"http://example.com/\",\"test test record three.\"],[4,\"http://example.net/afr\",\"test record four.\"],[5,\"http://example.org/aba\",\"test test test record five.\"],[6,\"http://example.com/rab\",\"test test test test record six.\"],[7,\"http://example.net/atv\",\"test test test record seven.\"],[8,\"http://example.org/gat\",\"test test record eight.\"],[9,\"http://example.com/vdw\",\"test test record nine.\"]]]]\n```\n\n### \u691c\u7d22\u3057\u3066\u307f\u308b\n```\n> select --table Site --query _id:1\n[[0,1398757017.42761,0.00126171112060547],[[[1],[[\"_id\",\"UInt32\"],[\"_key\",\"ShortText\"],[\"title\",\"ShortText\"]],[1,\"http://example.org/\",\"This is test record 1!\"]]]]\n```\n\n\n# Mroonga\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo yum install centos-release-SCL\n$ sudo yum -y install mysql mysql55-mysql-server\n$ sudo /etc/init.d/mysql55-mysqld start\n$ sudo yum -y install mysql55-mroonga\n```\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\n```\n$ mysql -u root test\n$ SHOW ENGINES;\n```\n\u7d50\u679c\n```\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| Engine             | Support | Comment                                                        | Transactions | XA   | Savepoints |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n| MEMORY             | YES     | Hash based, stored in memory, useful for temporary tables      | NO           | NO   | NO         |\n| MRG_MYISAM         | YES     | Collection of identical MyISAM tables                          | NO           | NO   | NO         |\n| CSV                | YES     | CSV storage engine                                             | NO           | NO   | NO         |\n| BLACKHOLE          | YES     | /dev/null storage engine (anything you write to it disappears) | NO           | NO   | NO         |\n| MyISAM             | YES     | MyISAM storage engine                                          | NO           | NO   | NO         |\n| InnoDB             | DEFAULT | Supports transactions, row-level locking, and foreign keys     | YES          | YES  | YES        |\n| mroonga            | YES     | CJK-ready fulltext search, column store                        | NO           | NO   | NO         |\n| FEDERATED          | NO      | Federated MySQL storage engine                                 | NULL         | NULL | NULL       |\n| PERFORMANCE_SCHEMA | YES     | Performance Schema                                             | NO           | NO   | NO         |\n| ARCHIVE            | YES     | Archive storage engine                                         | NO           | NO   | NO         |\n+--------------------+---------+----------------------------------------------------------------+--------------+------+------------+\n10 rows in set (0.00 sec)\n```\n\n\u3053\u308c\u3067mroonga\u30a8\u30f3\u30b8\u30f3\u304c\u898b\u308c\u3066\u3044\u308c\u3070OK\n\n## \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u78ba\u8a8d\n```\nmysql> SELECT * FROM mysql.plugin;\n+---------+---------------+\n| name    | dl            |\n+---------+---------------+\n| mroonga | ha_mroonga.so |\n+---------+---------------+\n1 row in set (0.00 sec)\n```\n\n## \u95a2\u6570\u78ba\u8a8d\n```\nmysql> SELECT * FROM mysql.func;\n+--------------------+-----+---------------+----------+\n| name               | ret | dl            | type     |\n+--------------------+-----+---------------+----------+\n| last_insert_grn_id |   2 | ha_mroonga.so | function |\n| mroonga_snippet    |   0 | ha_mroonga.so | function |\n| mroonga_command    |   0 | ha_mroonga.so | function |\n| mroonga_escape     |   0 | ha_mroonga.so | function |\n+--------------------+-----+---------------+----------+\n4 rows in set (0.00 sec)\n```\n\n\n## \u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3059\u308b\n```sql\nmysql> CREATE DATABASE MroongaTest;\nmysql> CREATE TABLE diaries (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  content VARCHAR(255),\n  FULLTEXT INDEX (content)\n) ENGINE = mroonga DEFAULT CHARSET utf8\n;\n```\n\n## \u30c7\u30fc\u30bf\u3092INSERT\u3059\u308b\n```sql\nmysql> INSERT INTO diaries (content) VALUES (\"It'll be fine tomorrow.\"); \nmysql> INSERT INTO diaries (content) VALUES (\"It'll rain tomorrow\"); \n```\n\n### \u5168\u6587\u691c\u7d22\u3092\u3057\u3066\u307f\u308b\n```sql\nmysql> SELECT * FROM diaries WHERE MATCH(content) AGAINST(\"fine\");\n```\n\u7d50\u679c\n```\n+----+-------------------------+\n| id | content                 |\n+----+-------------------------+\n|  1 | It'll be fine tomorrow. |\n+----+-------------------------+\n1 row in set (0.01 sec)\n```\n\n# \u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u4f7f\u3063\u3066\u307f\u308b\n\n## \u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u89e3\u51cd\n```\n$ wget http://packages.groonga.org/tmp/groonga-meetup-20140429.tar.gz\n$ tar zxvf groonga-meetup-20140429.tar.gz\n$ cd examples/\n```\n\n## \u30ed\u30fc\u30c9\u3057\u3066\u307f\u308b\n```\n$ cd 001-load/\n$ ./load-fail.sh\n[[0,1398757567.55438,0.00307273864746094],true]\n[[0,1398757567.55753,0.00510597229003906],true]\n[[0,1398757567.56268,0.00349569320678711],true]\n[[0,1398757567.56621,0.00398659706115723],true]\n[[0,1398757567.57024,0.00527501106262207],true]\n[[0,1398757567.57555,0.00219011306762695],true]\n[[0,1398757572.61219,0.00156879425048828],2]\n$ ./load-succeed.sh\n[[0,1398757587.44647,0.00412511825561523],true]\n[[0,1398757587.45159,0.00542593002319336],true]\n[[0,1398757587.45706,0.00334930419921875],true]\n[[0,1398757587.46064,0.00371170043945312],true]\n[[0,1398757587.46439,0.00915384292602539],true]\n[[0,1398757587.47359,0.00220870971679688],true]\n[[0,1398757592.53038,0.00335979461669922],3]\n```\n\n## \u66f4\u65b0\u3057\u3066\u307f\u308b\n```\n$ cd 002-update/\n$ ./update-status.sh\n[[0,1398757712.52183,0.00171470642089844],[[[3],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[1,\"JR\u5317\u6d77\u9053\",0],[2,\"JR\u6771\u65e5\u672c\",0],[3,\"JR\u6771\u6d77\",0]]]]\n[[0,1398757712.52369,0.000189065933227539],1]\n[[0,1398757712.52393,0.000104427337646484],[[[3],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[1,\"JR\u5317\u6d77\u9053\",0],[2,\"JR\u6771\u65e5\u672c\",0],[3,\"JR\u6771\u6d77\",1]]]]\n```\n\n## \u691c\u7d22\u3057\u3066\u307f\u308b\n```\n$ cd 003-search/\n$ ./search-name.sh\n[[0,1398757796.71279,0.00573444366455078],[[[0],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]]]]]\n```\n\u691c\u7d22\u3067\u304d\u306a\u3044\u3002INDEX\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u3002\n```\n$ ./add-index.sh\n[[-22,1398757873.51991,0.000749111175537109,\"table not found.\",[[\"proc_table_remove\",\"proc.c\",1267]]],false]\n[[0,1398757873.52077,0.0132768154144287],true]\n[[0,1398757873.53409,0.019017219543457],true]\n```\n\u8ffd\u52a0\u3057\u3066\n```\n$ ./search-name.sh\n[[0,1398757888.0436,0.00251364707946777],[[[2],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]],[2,\"JR\u6771\u65e5\u672c\"],[3,\"JR\u6771\u6d77\"]]]]\n```\n\u6b63\u3057\u304f\u691c\u7d22\u3067\u304d\u305f\u3002\n\n## \u524a\u9664\u3057\u3066\u307f\u308b\n### Key\u6307\u5b9a\u3067\u524a\u9664\n```\n$ ./delete-by-key.sh\n[[0,1398757988.83756,0.00121164321899414],[[[3],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]],[1,\"JR\u5317\u6d77\u9053\"],[2,\"JR\u6771\u65e5\u672c\"],[3,\"JR\u6771\u6d77\"]]]]\n[[0,1398757988.83935,0.00123763084411621],true]\n[[0,1398757988.84063,0.000100374221801758],[[[2],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"]],[1,\"JR\u5317\u6d77\u9053\"],[3,\"JR\u6771\u6d77\"]]]]\n```\n### \u5185\u5bb9\u3067\u524a\u9664\n```\n$ ./delete-by-name.sh\n[[0,1398758027.33819,0.00152397155761719],[[[2],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[1,\"JR\u5317\u6d77\u9053\",0],[3,\"JR\u6771\u6d77\",1]]]]\n[[0,1398758027.33984,0.00244832038879395],true]\n[[0,1398758027.34233,6.98566436767578e-05],[[[1],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[3,\"JR\u6771\u6d77\",1]]]]\n```\n### Status\u3067\u524a\u9664\n```\n$ ./delete-by-status.sh\n[[0,1398758043.58458,0.00207901000976562],[[[1],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]],[3,\"JR\u6771\u6d77\",1]]]]\n[[0,1398758043.5868,0.00520038604736328],true]\n[[0,1398758043.59204,6.50882720947266e-05],[[[0],[[\"_key\",\"UInt32\"],[\"name\",\"ShortText\"],[\"status\",\"UInt8\"]]]]]\n```\n\n## HTTP\u7d4c\u7531\u3067\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n```\n$ ./create-table.sh\n[[-22,1398758111.06572,0.00279664993286133,\"table not found.\",[[\"proc_table_remove\",\"proc.c\",1267]]],false][[0,1398758111.07654,0.00604772567749023],true]table_create Company TABLE_HASH_KEY UInt32\n$ ./register-normalizer.sh\n[[0,1398758159.72772,0.000623226165771484],true]\n```\n\n## HTTP\u7d4c\u7531\u3067\u30ab\u30e9\u30e0\u8ffd\u52a0\n```\n$ ./create-column.sh\n[[-22,1398758237.59277,0.00063014030456543,\"column not found.\",[[\"proc_column_remove\",\"proc.c\",1408]]],false][[0,1398758237.59922,0.00746011734008789],true]table_create Company TABLE_HASH_KEY UInt32\ncolumn_create Company full_name COLUMN_SCALAR ShortText\n```\n\n## POST\u3067\u30c7\u30fc\u30bf\u66f4\u65b0\n```\n$ ./post-data.sh\n[[0,1398758285.00032,0.00106167793273926],true][[0,1398758285.00743,0.00356841087341309],true][[0,1398758285.01732,0.00328946113586426],true][[0,1398758285.02703,0.00469160079956055],true][[0,1398758285.03932,0.00430917739868164],true][[0,1398758285.05058,0.00552940368652344],true][[0,1398758285.06584,0.00384759902954102],true][[0,1398758285.07753,0.0031428337097168],true][[0,1398758285.08816,0.00513648986816406],true][[0,1398758285.10026,0.00368595123291016],true][[0,1398758285.11063,0.00301361083984375],true][[0,1398758285.12507,0.00776052474975586],165]\n```\n\n## HTTP\u7d4c\u7531\u3067\u691c\u7d22\n```\n$ ./search-http.sh\n[[-22,1398758329.08624,0.000628471374511719,\"table not found.\",[[\"proc_table_remove\",\"proc.c\",1267]]],false][[0,1398758329.09341,0.0181374549865723],true][[0,1398758329.12223,0.0185294151306152],true][[0,1398758329.14737,0.00194764137268066],[[[1],[[\"_id\",\"UInt32\"],[\"_key\",\"UInt32\"],[\"full_name\",\"ShortText\"],[\"hiragana\",\"ShortText\"],[\"katakana\",\"ShortText\"],[\"name\",\"ShortText\"],[\"romaji\",\"ShortText\"],[\"short_name\",\"ShortText\"],[\"sort\",\"UInt32\"],[\"status\",\"UInt32\"],[\"type\",\"UInt32\"]],[10,14,\"\u4eac\u738b\u96fb\u9244\u682a\u5f0f\u4f1a\u793e\",\"\u3051\u3044\u304a\u3046\u3067\u3093\u3066\u3064\",\"\u30b1\u30a4\u30aa\u30a6\u30c7\u30f3\u30c6\u30c4\",\"\u4eac\u738b\u96fb\u9244\",\"keioudentetsu\",\"\u4eac\u738b\",14,0,2]]]]\n```\n\n# Groonga\u7ba1\u7406\u753b\u9762\nhttp://[HOST OR IP]:10041/\n\n"}