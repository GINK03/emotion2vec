{"context": "\n\n\u307e\u3048\u304c\u304d\nOpenLDAP\u4f5c\u308b\u306e\u306f\u3001\u793e\u5185\u306e\u5c02\u9580\u5bb6\u306e\u4eba\u306b\u3084\u3063\u3066\u3082\u3089\u3046\u306e\u304c\u307b\u3068\u3093\u3069\u306a\u306e\u3067\u3001\u81ea\u5206\u3067\u4f5c\u308b\u3053\u3068\u306f\u307e\u305a\u306a\u3044\u3093\u3060\u3051\u3069\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u7528\u4e8b\u3067\u81ea\u524d\u3067\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u3063\u3066\u3001\u305d\u306e\u3068\u304d\u306b\u6b8b\u3057\u305f\u30e1\u30e2\u3002\n\u3068\u308a\u3042\u3048\u305a\u7528\u610f\u3059\u308b\u3060\u3051\u3063\u3066\u3044\u3046\u306a\u3089\u3053\u308c\u3067OK\u306a\u306f\u305a\u3002\n\u3061\u306a\u307f\u306b\u5049\u5927\u306a\u5148\u4eba\u305f\u3061\u306e\u307b\u307c\u30b3\u30d4\u30da\u3067\u3059\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n\u74b0\u5883\nCentOS 7(1503)\n\n\u53c2\u8003URL\n\n\nhttp://qiita.com/kazukikudo/items/703d6e6664e13882fa0b #\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\nhttp://www.unix-power.net/linux/openldap.html\nhttps://www.osstech.co.jp/~hamano/posts/centos7-openldap-ssh/\n\n\n\u6e96\u5099\nyum install openldap openldap-clients openldap-devel openldap-servers\ncp -a /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nsystemctl enable slapd\nsystemctl start slapd\n\n\n\u5b9f\u4f5c\u696d\n\u57fa\u672c\u30d1\u30bf\u30fc\u30f3\u3068\u3057\u3066\u3001OpenLDAP\u306b\u4f55\u304b\u3092\u8ffd\u52a0\u3057\u305f\u3044\u3068\u304d\u306fldapadd\u3092\u4f7f\u7528\u3057\u3066\u3001\u4f55\u304b\u3092\u5909\u66f4\u3057\u305f\u3044\u3068\u304d\u306fldapmodify\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u305d\u308c\u305e\u308c\u306e\u30b3\u30de\u30f3\u30c9\u3067\"-w\"\u3067\u6307\u5b9a\u3059\u308b\u306e\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u3002\n\u4eca\u56de\u306e\u5834\u5408\u3001hogehoge\u3092\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u3057\u3066\u5229\u7528\u3057\u3066\u3044\u308b\u3002\n\n\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\nslappasswd\u3092\u4f7f\u3046\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u3001\u4eca\u5f8c\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u3057\u3066\u4f7f\u7528\u3057\u305f\u3044\u6587\u5b57\u5217\u3092\u5165\u529b\n\u305d\u3046\u3059\u308b\u3068\u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u305f\u6587\u5b57\u5217\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001add_rootpw.ldif\u306b\u5165\u529b\nslappasswd\nvim add_rootpw.ldif\nldapadd -Y EXTERNAL -H ldapi:// -f add_rootpw.ldif \n\n\nadd_rootpw.ldif\ndn: olcDatabase={0}config,cn=config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: [slappasswd\u3067\u51fa\u529b\u3055\u308c\u305f\u30cf\u30c3\u30b7\u30e5\u6587\u5b57\u5217\u3092\u5165\u529b]\n\n\n\n\u30d9\u30fc\u30b9DN\u306e\u5909\u66f4\nvim mod_dom.ldif\nldapmodify -x -D cn=config -w hogehoge -f change_dom.ldif \n\n\nmod_dom.ldif\ndn: olcDatabase={1}monitor,cn=config\nchangetype: modify\nreplace: olcAccess\nolcAccess: {0}to * by dn.base=\"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\" read by dn.base=\"cn=Manager,dc=example,dc=com\" read by * none\n\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nreplace: olcSuffix\nolcSuffix: dc=example,dc=com\n\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nreplace: olcRootDN\nolcRootDN: cn=Manager,dc=example,dc=com\n\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: {SSHA}gWJiHlXNx+FxMwDjIbY2v4Wn8/YcrPza\n\n\n\ndc\u3068\u304bou\u3068\u304b\u8ffd\u52a0\nvim base.ldif\nldapadd -x -D \"cn=Manager,dc=example,dc=com\" -w hogehoge -f base.ldif \n\n\nbase.ldif\ndn: dc=example,dc=com\nobjectClass: dcObject\nobjectClass: organization\ndc: example\no: Example Inc.\n\ndn: ou=People,dc=example,dc=com\nobjectClass: organizationalUnit\nou: People\n\ndn: ou=Group,dc=example,dc=com\nobjectClass: organizationalUnit\nou: Group\n\n\n\n\u30b9\u30ad\u30fc\u30de\u62e1\u5f35\n\u3053\u308c\u3084\u3089\u306a\u3044\u3068\u30e6\u30fc\u30b6\u8ffd\u52a0\u3059\u308b\u3068\u304d\u306bobjectClass\u306a\u3044\u3084\u3067\u30fc\u3063\u3066\u8a00\u308f\u308c\u3066\u5f3e\u304b\u308c\u308b\u304b\u3089\u5fc5\u9808\nldapadd -Y EXTERNAL -H ldapi:// -f /etc/openldap/schema/cosine.ldif \\\nldapadd -Y EXTERNAL -H ldapi:// -f /etc/openldap/schema/inetorgperson.ldif\nldapadd -Y EXTERNAL -H ldapi:// -f /etc/openldap/schema/nis.ldif \n\n\n\u30e6\u30fc\u30b6\u8ffd\u52a0\nvim add_user.ldif \nldapadd -x -D \"cn=Manager,dc=example,dc=com\" -w hogehoge -f add_user.ldif \n\n\nadd_user.ldif\ndn: uid=0024a59b6ad0,ou=People,dc=example,dc=com\nobjectClass: posixAccount\nobjectClass: inetOrgPerson\nsn: 0024a59b6ad0\ncn: 0024a59b6ad0\nuid: 0024a59b6ad0\ndisplayName: 100\nhomeDirectory: /home/0024a59b6ad0\nloginShell: /bin/bash\nuidNumber: 1004\ngidNumber: 1004\nuserPassword: 0024a59b6ad0\n\n\n\n\u78ba\u8a8d\n\u3053\u308c\u3067\u5168\u30e6\u30fc\u30b6\u3072\u3063\u3071\u308c\u308b\nldapsearch -x -w hogehoge -D \"cn=Manager,dc=example,dc=com\" -b \"ou=People,dc=example,dc=com\"\n\n\n\u304a\u307e\u3051(\u30e6\u30fc\u30b6\u306e\u5c5e\u6027\u5909\u66f4)\nvim mod_user.ldif\nldapmodify -x -D \"cn=Manager,dc=example,dc=com\" -w hogehoge -f mod_user.ldif\n\n\nmod_user.ldif\ndn: uid=0024a59b6ad0,ou=People,dc=example,dc=com\nchangetype: modify\nreplace: displayName\ndisplayName: 999\n\n\n# \u307e\u3048\u304c\u304d\nOpenLDAP\u4f5c\u308b\u306e\u306f\u3001\u793e\u5185\u306e\u5c02\u9580\u5bb6\u306e\u4eba\u306b\u3084\u3063\u3066\u3082\u3089\u3046\u306e\u304c\u307b\u3068\u3093\u3069\u306a\u306e\u3067\u3001\u81ea\u5206\u3067\u4f5c\u308b\u3053\u3068\u306f\u307e\u305a\u306a\u3044\u3093\u3060\u3051\u3069\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u7528\u4e8b\u3067\u81ea\u524d\u3067\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u3063\u3066\u3001\u305d\u306e\u3068\u304d\u306b\u6b8b\u3057\u305f\u30e1\u30e2\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u7528\u610f\u3059\u308b\u3060\u3051\u3063\u3066\u3044\u3046\u306a\u3089\u3053\u308c\u3067OK\u306a\u306f\u305a\u3002\n\n\u3061\u306a\u307f\u306b\u5049\u5927\u306a\u5148\u4eba\u305f\u3061\u306e\u307b\u307c\u30b3\u30d4\u30da\u3067\u3059\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n\n\n# \u74b0\u5883\nCentOS 7(1503)\n\n# \u53c2\u8003URL\n* <http://qiita.com/kazukikudo/items/703d6e6664e13882fa0b> #\u975e\u5e38\u306b\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\u3002\n* <http://www.unix-power.net/linux/openldap.html>\n* <https://www.osstech.co.jp/~hamano/posts/centos7-openldap-ssh/>\n\n# \u6e96\u5099\n```\nyum install openldap openldap-clients openldap-devel openldap-servers\ncp -a /usr/share/openldap-servers/DB_CONFIG.example /var/lib/ldap/DB_CONFIG\nsystemctl enable slapd\nsystemctl start slapd\n```\n\n# \u5b9f\u4f5c\u696d\n\u57fa\u672c\u30d1\u30bf\u30fc\u30f3\u3068\u3057\u3066\u3001OpenLDAP\u306b\u4f55\u304b\u3092\u8ffd\u52a0\u3057\u305f\u3044\u3068\u304d\u306fldapadd\u3092\u4f7f\u7528\u3057\u3066\u3001\u4f55\u304b\u3092\u5909\u66f4\u3057\u305f\u3044\u3068\u304d\u306fldapmodify\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u305d\u308c\u305e\u308c\u306e\u30b3\u30de\u30f3\u30c9\u3067\"-w\"\u3067\u6307\u5b9a\u3059\u308b\u306e\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u3002\n\u4eca\u56de\u306e\u5834\u5408\u3001hogehoge\u3092\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u3057\u3066\u5229\u7528\u3057\u3066\u3044\u308b\u3002\n\n## \u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\nslappasswd\u3092\u4f7f\u3046\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u3001\u4eca\u5f8c\u7ba1\u7406\u8005\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u3057\u3066\u4f7f\u7528\u3057\u305f\u3044\u6587\u5b57\u5217\u3092\u5165\u529b\n\u305d\u3046\u3059\u308b\u3068\u30cf\u30c3\u30b7\u30e5\u5316\u3055\u308c\u305f\u6587\u5b57\u5217\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001add_rootpw.ldif\u306b\u5165\u529b\n\n```\nslappasswd\nvim add_rootpw.ldif\nldapadd -Y EXTERNAL -H ldapi:// -f add_rootpw.ldif \n```\n\n```bash:add_rootpw.ldif\ndn: olcDatabase={0}config,cn=config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: [slappasswd\u3067\u51fa\u529b\u3055\u308c\u305f\u30cf\u30c3\u30b7\u30e5\u6587\u5b57\u5217\u3092\u5165\u529b]\n```\n\n## \u30d9\u30fc\u30b9DN\u306e\u5909\u66f4\n```\nvim mod_dom.ldif\nldapmodify -x -D cn=config -w hogehoge -f change_dom.ldif \n```\n\n```bash:mod_dom.ldif\ndn: olcDatabase={1}monitor,cn=config\nchangetype: modify\nreplace: olcAccess\nolcAccess: {0}to * by dn.base=\"gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth\" read by dn.base=\"cn=Manager,dc=example,dc=com\" read by * none\n\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nreplace: olcSuffix\nolcSuffix: dc=example,dc=com\n\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nreplace: olcRootDN\nolcRootDN: cn=Manager,dc=example,dc=com\n\ndn: olcDatabase={2}hdb,cn=config\nchangetype: modify\nadd: olcRootPW\nolcRootPW: {SSHA}gWJiHlXNx+FxMwDjIbY2v4Wn8/YcrPza\n```\n\n## dc\u3068\u304bou\u3068\u304b\u8ffd\u52a0\n```\nvim base.ldif\nldapadd -x -D \"cn=Manager,dc=example,dc=com\" -w hogehoge -f base.ldif \n```\n\n```bash:base.ldif\ndn: dc=example,dc=com\nobjectClass: dcObject\nobjectClass: organization\ndc: example\no: Example Inc.\n\ndn: ou=People,dc=example,dc=com\nobjectClass: organizationalUnit\nou: People\n\ndn: ou=Group,dc=example,dc=com\nobjectClass: organizationalUnit\nou: Group\n```\n\n## \u30b9\u30ad\u30fc\u30de\u62e1\u5f35\n\u3053\u308c\u3084\u3089\u306a\u3044\u3068\u30e6\u30fc\u30b6\u8ffd\u52a0\u3059\u308b\u3068\u304d\u306bobjectClass\u306a\u3044\u3084\u3067\u30fc\u3063\u3066\u8a00\u308f\u308c\u3066\u5f3e\u304b\u308c\u308b\u304b\u3089\u5fc5\u9808\n\n```\nldapadd -Y EXTERNAL -H ldapi:// -f /etc/openldap/schema/cosine.ldif \\\nldapadd -Y EXTERNAL -H ldapi:// -f /etc/openldap/schema/inetorgperson.ldif\nldapadd -Y EXTERNAL -H ldapi:// -f /etc/openldap/schema/nis.ldif \n```\n\n## \u30e6\u30fc\u30b6\u8ffd\u52a0\n\n```\nvim add_user.ldif \nldapadd -x -D \"cn=Manager,dc=example,dc=com\" -w hogehoge -f add_user.ldif \n```\n\n```bash:add_user.ldif\ndn: uid=0024a59b6ad0,ou=People,dc=example,dc=com\nobjectClass: posixAccount\nobjectClass: inetOrgPerson\nsn: 0024a59b6ad0\ncn: 0024a59b6ad0\nuid: 0024a59b6ad0\ndisplayName: 100\nhomeDirectory: /home/0024a59b6ad0\nloginShell: /bin/bash\nuidNumber: 1004\ngidNumber: 1004\nuserPassword: 0024a59b6ad0\n```\n\n## \u78ba\u8a8d\n\u3053\u308c\u3067\u5168\u30e6\u30fc\u30b6\u3072\u3063\u3071\u308c\u308b\n\n```\nldapsearch -x -w hogehoge -D \"cn=Manager,dc=example,dc=com\" -b \"ou=People,dc=example,dc=com\"\n```\n\n## \u304a\u307e\u3051(\u30e6\u30fc\u30b6\u306e\u5c5e\u6027\u5909\u66f4)\n```\nvim mod_user.ldif\nldapmodify -x -D \"cn=Manager,dc=example,dc=com\" -w hogehoge -f mod_user.ldif\n```\n\n```bash:mod_user.ldif\ndn: uid=0024a59b6ad0,ou=People,dc=example,dc=com\nchangetype: modify\nreplace: displayName\ndisplayName: 999\n```\n", "tags": ["Linux", "CentOS", "openldap"]}