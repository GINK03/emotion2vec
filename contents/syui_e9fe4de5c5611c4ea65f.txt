{"context": "\u6700\u8fd1\u3001GitLab\u3092\u4f7f\u3044\u59cb\u3081\u3066\u3044\u307e\u3059\u304c\u3001\u4e00\u8a00\u3067\u8a00\u3046\u3068\u300c\u3088\u3044\u300d\u3067\u3059\u3002GitLab\u306fGitHub\u3092\u771f\u4f3c\u3057\u3066\u4f5c\u3089\u308c\u307e\u3057\u305f\u304c\u3001\u7121\u6599\u6a5f\u80fd\u304c\u5fae\u5999\u306b\u9055\u3044\u307e\u3059\u3002\u7279\u306b\u5927\u304d\u3044\u306e\u306f\u4ee5\u4e0b\u3067\u3059\u306d\u3002\n\n\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3048\u308b\nGitLab CI\u304c\u4f7f\u3048\u308b\n\n\u4eca\u307e\u3067CI\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u7ba1\u7406\u3068\u306f\u5225\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u4f7f\u3063\u3066\u3044\u305f\u3072\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002GitHub+Wercker\u3084GitHub+Travis\u306a\u3069\u3002\n\u3057\u304b\u3057\u3001GitLab\u306f\u4f8b\u3048\u3070\u3001GitLab Pages\u3092\u30ea\u30dd\u30b8\u30c8\u30ea(master)\u3067\u4f5c\u308a\u3001GitLab CI\u3092\u4f7f\u3063\u3066\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3001\u5373\u5ea7\u306b\u30da\u30fc\u30b8\u3092\u516c\u958b\u3067\u304d\u307e\u3059\u3002\u4eca\u307e\u3067CI\u30b5\u30fc\u30d3\u30b9\u306b\u7d10\u4ed8\u3051\u3057\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u8fba\u306f\u968f\u5206\u7c21\u5358\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nhttps://gitlab.com/groups/pages\n\u4f8b\u3048\u3070\u3001hugo\u3067\u30da\u30fc\u30b8\u3092\u4f5c\u308a\u305f\u3044\u306a\u3089\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u516c\u958b\u3067\u304d\u307e\u3059\u3002\n$ git clone git@gitlab.com:pages/hugo.git\n$ cd hugo\n$ rm -rf .git\n\n# \u81ea\u5206\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u306bhugo\u3092\u4f5c\u6210\u3057\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n$ git init\n$ git remote add origin git@gitlab.com:$USER/hugo.git\n\n# baseurl\u3092\u81ea\u8eab\u306e\u3082\u306e\u306b\u5909\u66f4\u3059\u308b\n$ vim config.toml\nbaseurl       = \"https://$USER.gitlab.io/hugo/\"\n\n$ git add .\n$ git commit -m \"first\"\n$ git push -u origin master\n\n# \u30da\u30fc\u30b8\u304c\u51fa\u6765\u4e0a\u304c\u308b\u307e\u3067\u591a\u5c11\u5f85\u305f\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n$ curl -sL $USER.gitlab.io/hugo\n\nhttps://syui.gitlab.io/hugo\n\u3059\u3054\u304f\u7c21\u5358\u3067\u3059\u306d\u3002.gitlab-ci\u3092\u7f6e\u3044\u3066\u304a\u304f\u3068\u3001\u30bd\u30fc\u30b9\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u5ea6\u306b\u30da\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\n\u3053\u3053\u3067\u3001$user.gitlab.io\u306a\u3069\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u540d\u306b\u3059\u308b\u3068\u3001\u30a2\u30c9\u30ec\u30b9\u304c\u30c8\u30c3\u30d7\u306b\u306a\u308a\u3001\u305d\u308c\u4ee5\u5916\u306a\u3089$user.gitlab.io/repo\u3068\u3044\u3046\u5f62\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306a\u95a2\u4fc2\u304b\u3089\u3053\u3061\u3089\u306b\u3042\u308b\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3092\u4f7f\u3063\u3066\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\u4f7f\u7528\u3059\u308b\u30a2\u30c9\u30ec\u30b9\u306b\u3088\u3063\u3066\u306f\u30bd\u30fc\u30b9\u306e\u5909\u66f4\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001Octopress\u3067$user.gitlab.io\u3068\u3044\u3046\u5f62\u3067\u30da\u30fc\u30b8\u3092\u4f5c\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u53c2\u8003\u306b/octopress\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3061\u306a\u307f\u306b\u3001\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092GitLab\u306e$user.gitlab.io\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u4f7f\u3046\u3068\u3001\u4f55\u3082\u3057\u306a\u304f\u3066\u3082\u305d\u306e\u307e\u307e\u30da\u30fc\u30b8\u3092\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3001_config.yml\u306eURL\u306f\u30e6\u30fc\u30b6\u30fc\u306e\u3082\u306e\u306b\u5909\u66f4\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u304c\u3002\n\n\u516c\u5f0f\u306f$user.gitlab.io/octopress\u3068\u3044\u3046\u5f62\u3092\u4e88\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\u306b\u3001\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3057\u306a\u3044\u3068\u9069\u5207\u306b\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\u5177\u4f53\u7684\u306b\u306f\u3001/octopress\u3068\u3044\u3046\u6307\u5b9a\u3092\u30b3\u30fc\u30c9\u304b\u3089\u524a\u9664\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30c8\u30c3\u30d7\u3067\u306f\u306a\u304f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001/octopress\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u7f6e\u304d\u63db\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3001\u30b0\u30eb\u30fc\u30d7\u3082\u4f7f\u3048\u307e\u3059\u306e\u3067\u3001$user\u306e\u3068\u3053\u308d\u306f\u3001\u65e2\u306bGitLab\u3067\u53d6\u5f97\u3055\u308c\u3066\u3044\u306a\u3044\u30a2\u30ab\u30a6\u30f3\u30c8ID\u3067\u306a\u3044\u304b\u304e\u308a\u5909\u66f4\u53ef\u80fd\u3067\u3059\u3002\n\u7279\u306bCI\u3068\u306e\u9023\u643a\u304c\u6a5f\u80fd\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u3053\u3068\u306f\u3001\u5358\u7d14\u306aWeb\u30b5\u30a4\u30c8\u4f5c\u6210\u624b\u9806\u3092\u898b\u3066\u3082\u660e\u3089\u304b\u3067\u3059\u3002\n\nHugo\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\nHugo\u306b\u5168\u8a18\u4e8b\u4e00\u89a7\u3092\u5206\u304b\u308a\u3084\u3059\u304f\u8868\u793a\u3059\u308b\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3067\u3060\u3044\u305f\u3044\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nhttps://parsiya.net/blog/2016-02-14-archive-page-in-hugo/\n\u81ea\u5206\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u30ec\u30a4\u30a2\u30a6\u30c8\u3002\n\nlayouts/archive/single.html\n{{ partial \"head\" . }}\n{{ partial \"header\" . }}\n<div id=\"container\">\n   <div class=\"outer\">\n        <div id=\"blog-archives\" class=\"category\">\n          {{ .Content }}\n          {{ range (where .Site.Pages \"Type\" \"post\") }}\n            <h1>\n        <time datetime=\"{{ .Date }}\" itemprop=\"datePublished\">{{ .Date.Format .Site.Params.date_format }}</time>\n                <a href=\"{{ .Permalink }}\" title=\"{{ .Title }}\">{{ .Title }}</a>\n            </h1>\n          {{ end }}\n        </div>\n    </div>\n</div>\n{{ partial \"footer\" . }}\n</body>\n</html>\n\n\n\u3042\u307e\u308a\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\nHugo\u306e\u691c\u7d22\u30b7\u30b9\u30c6\u30e0\nHugo\u306e\u691c\u7d22\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\u5927\u4f53\u306f\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306e\u3068\u304a\u308a\u3067\u3059\u3002\u5177\u4f53\u7684\u306bGrunt.js\u3068Lunr.js\u3067Hugo\u7528\u306b\u69cb\u7bc9\u3057\u307e\u3059\u3002\nhttps://gist.github.com/sebz/efddfc8fdcb6b480f567\n\u81ea\u5206\u306e\u5834\u5408\u306e\u69cb\u7bc9\u65b9\u6cd5\u3067\u3059\u3002\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3060\u3068config\u306eparmalink\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u5834\u5408\u306e\u51fa\u529b\u304c\u5f97\u3089\u308c\u307e\u3059\u304c\u3001\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\u3057\u305f\u304c\u3063\u3066\u3001\u6025\u907d\u7121\u7406\u3084\u308aShellScript\u3067\u66f8\u304d\u76f4\u3057\u307e\u3059\u3002\u3053\u308c\u306fGruntfile.js\u3092\u76f4\u305b\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u6b63\u76f4\u3001\u9762\u5012\u304f\u3055\u304b\u3063\u305f...\u3002\n#!/bin/zsh\nd=${0:a:h:h}\n# backup\nh=${0:a:h}\nif cat $j|jq . ;then\n    cp $j $h\nfi\nh=$h/PagesIndex.json\nj=$d/static/bower_components/lunr.js/PagesIndex.json\nt=`cat $j |jq '.[]'|sed -e 's#/post##g'`\na=`cat $j | sed -e 's#/post##g'`\necho $a >! $j\nt=`echo $t|jq -r '.href'|cut -d - -f 1-4`\n\nfor (( i=1;i<=`echo \"$t\"|wc -l`;i++ ))\ndo\n    f=`echo \"$t\"|awk \"NR==$i\"`\n    c=`echo $f|tr '-' '/'`\n    sed -i \"\" \"s#${f}#${c}#g\" $j\ndone\n\ncat $j\n\ndiff $j $h\n\n\u3068\u308a\u3042\u3048\u305a\u8a18\u4e8b\u306b\u3042\u308bGrntfile.js\u3092\u9069\u6642\u4fee\u6b63\u3057\u4f5c\u6210\u3057\u3001\u30d3\u30eb\u30c9\u5f8c\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u3044\u3046\u624b\u9806\u3002\n\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306f/bower_components/lunr.js/PagesIndex.json\u306b\u7f6e\u304f\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\nlayouts/partials/widgets/search.html\n<div class=\"widget-wrap\">\n<input id=\"search\" type=\"text\" placeholder=\"search\">\n<ul id=\"results\">\n</ul>\n<script type=\"text/javascript\" src=\"/js/search.js\"></script>\n<script type=\"text/javascript\" src=\"/bower_components/lunr.js/lunr.min.js\"></script>\n</div>\n\n\n\njs/search.html\nvar lunrIndex,\n    $results,\n    pagesIndex;\n\n// Initialize lunrjs using our generated index file\nfunction initLunr() {\n    // First retrieve the index file\n    $.getJSON(\"/bower_components/lunr.js/PagesIndex.json\")\n        .done(function(index) {\n            pagesIndex = index;\n            console.log(\"index:\", pagesIndex);\n\n            // Set up lunrjs by declaring the fields we use\n            // Also provide their boost level for the ranking\n            lunrIndex = lunr(function() {\n                this.field(\"title\", {\n                    boost: 10\n                });\n                this.field(\"tags\", {\n                    boost: 5\n                });\n                this.field(\"content\");\n\n                // ref is the result item identifier (I chose the page URL)\n                this.ref(\"href\");\n            });\n\n            // Feed lunr with each file and let lunr actually index them\n            pagesIndex.forEach(function(page) {\n                lunrIndex.add(page);\n            });\n        })\n        .fail(function(jqxhr, textStatus, error) {\n            var err = textStatus + \", \" + error;\n            console.error(\"Error getting Hugo index flie:\", err);\n        });\n}\n\n// Nothing crazy here, just hook up a listener on the input field\nfunction initUI() {\n    $results = $(\"#results\");\n    $(\"#search\").keyup(function() {\n        $results.empty();\n\n        // Only trigger a search when 2 chars. at least have been provided\n        var query = $(this).val();\n        if (query.length < 2) {\n            return;\n        }\n\n        var results = search(query);\n\n        renderResults(results);\n    });\n}\n\n/**\n * Trigger a search in lunr and transform the result\n *\n * @param  {String} query\n * @return {Array}  results\n */\nfunction search(query) {\n    // Find the item in our index corresponding to the lunr one to have more info\n    // Lunr result: \n    //  {ref: \"/section/page1\", score: 0.2725657778206127}\n    // Our result:\n    //  {title:\"Page1\", href:\"/section/page1\", ...}\n    return lunrIndex.search(query).map(function(result) {\n            return pagesIndex.filter(function(page) {\n                return page.href === result.ref;\n            })[0];\n        });\n}\n\n/**\n * Display the 10 first results\n *\n * @param  {Array} results to display\n */\nfunction renderResults(results) {\n    if (!results.length) {\n        return;\n    }\n\n    // Only show the ten first results\n    results.slice(0, 10).forEach(function(result) {\n        var $result = $(\"<li>\");\n        $result.append($(\"<a>\", {\n            href: result.href,\n            text: \"\u00bb \" + result.title\n        }));\n        $results.append($result);\n    });\n}\n\n// Let's get started\ninitLunr();\n\n$(document).ready(function() {\n    initUI();\n});\n\n\n\u3053\u308c\u3067\u691c\u7d22\u30b7\u30b9\u30c6\u30e0\u306e\u5b8c\u6210\u3067\u3059\u3002Hugo Build\u3067\u540c\u6642\u306bPagesIndex\u3092\u4f5c\u6210\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070OK\u3067\u3059\u3002\n\n\u6700\u8fd1\u3001[GitLab](https://gitlab.com/)\u3092\u4f7f\u3044\u59cb\u3081\u3066\u3044\u307e\u3059\u304c\u3001\u4e00\u8a00\u3067\u8a00\u3046\u3068\u300c\u3088\u3044\u300d\u3067\u3059\u3002GitLab\u306f[GitHub](https://github.com)\u3092\u771f\u4f3c\u3057\u3066\u4f5c\u3089\u308c\u307e\u3057\u305f\u304c\u3001\u7121\u6599\u6a5f\u80fd\u304c\u5fae\u5999\u306b\u9055\u3044\u307e\u3059\u3002\u7279\u306b\u5927\u304d\u3044\u306e\u306f\u4ee5\u4e0b\u3067\u3059\u306d\u3002\n\n- \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3048\u308b\n\n- GitLab CI\u304c\u4f7f\u3048\u308b\n\n\u4eca\u307e\u3067CI\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u7ba1\u7406\u3068\u306f\u5225\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u4f7f\u3063\u3066\u3044\u305f\u3072\u3068\u304c\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002GitHub+[Wercker](https://wercker.com)\u3084GitHub+[Travis](https://travis-ci.org/)\u306a\u3069\u3002\n\n\u3057\u304b\u3057\u3001GitLab\u306f\u4f8b\u3048\u3070\u3001[GitLab Pages](http://doc.gitlab.com/ee/pages/README.html)\u3092\u30ea\u30dd\u30b8\u30c8\u30ea(master)\u3067\u4f5c\u308a\u3001[GitLab CI](http://doc.gitlab.com/ce/ci/quick_start/README.html)\u3092\u4f7f\u3063\u3066\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3001\u5373\u5ea7\u306b\u30da\u30fc\u30b8\u3092\u516c\u958b\u3067\u304d\u307e\u3059\u3002\u4eca\u307e\u3067CI\u30b5\u30fc\u30d3\u30b9\u306b\u7d10\u4ed8\u3051\u3057\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d3\u30eb\u30c9\u3092\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u8fba\u306f\u968f\u5206\u7c21\u5358\u306b\u306a\u3063\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n[https://gitlab.com/groups/pages](https://gitlab.com/groups/pages)\n\n\u4f8b\u3048\u3070\u3001[hugo](https://gitlab.com/pages/hugo)\u3067\u30da\u30fc\u30b8\u3092\u4f5c\u308a\u305f\u3044\u306a\u3089\u3001\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u516c\u958b\u3067\u304d\u307e\u3059\u3002\n\n```bash:\n$ git clone git@gitlab.com:pages/hugo.git\n$ cd hugo\n$ rm -rf .git\n\n# \u81ea\u5206\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u306bhugo\u3092\u4f5c\u6210\u3057\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n$ git init\n$ git remote add origin git@gitlab.com:$USER/hugo.git\n\n# baseurl\u3092\u81ea\u8eab\u306e\u3082\u306e\u306b\u5909\u66f4\u3059\u308b\n$ vim config.toml\nbaseurl       = \"https://$USER.gitlab.io/hugo/\"\n\n$ git add .\n$ git commit -m \"first\"\n$ git push -u origin master\n\n# \u30da\u30fc\u30b8\u304c\u51fa\u6765\u4e0a\u304c\u308b\u307e\u3067\u591a\u5c11\u5f85\u305f\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n$ curl -sL $USER.gitlab.io/hugo\n```\n\nhttps://syui.gitlab.io/hugo\n\n\u3059\u3054\u304f\u7c21\u5358\u3067\u3059\u306d\u3002`.gitlab-ci`\u3092\u7f6e\u3044\u3066\u304a\u304f\u3068\u3001\u30bd\u30fc\u30b9\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u5ea6\u306b\u30da\u30fc\u30b8\u304c\u30d3\u30eb\u30c9\u3055\u308c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u3001`$user.gitlab.io`\u306a\u3069\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(\u30ea\u30dd\u30b8\u30c8\u30ea)\u540d\u306b\u3059\u308b\u3068\u3001\u30a2\u30c9\u30ec\u30b9\u304c\u30c8\u30c3\u30d7\u306b\u306a\u308a\u3001\u305d\u308c\u4ee5\u5916\u306a\u3089`$user.gitlab.io/repo`\u3068\u3044\u3046\u5f62\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u95a2\u4fc2\u304b\u3089[\u3053\u3061\u3089](https://gitlab.com/groups/pages)\u306b\u3042\u308b\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3092\u4f7f\u3063\u3066\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\u4f7f\u7528\u3059\u308b\u30a2\u30c9\u30ec\u30b9\u306b\u3088\u3063\u3066\u306f\u30bd\u30fc\u30b9\u306e\u5909\u66f4\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001Octopress\u3067`$user.gitlab.io`\u3068\u3044\u3046\u5f62\u3067\u30da\u30fc\u30b8\u3092\u4f5c\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u53c2\u8003\u306b`/octopress`\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3061\u306a\u307f\u306b\u3001\u3053\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092GitLab\u306e`$user.gitlab.io`\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u4f7f\u3046\u3068\u3001\u4f55\u3082\u3057\u306a\u304f\u3066\u3082\u305d\u306e\u307e\u307e\u30da\u30fc\u30b8\u3092\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3001`_config.yml`\u306eURL\u306f\u30e6\u30fc\u30b6\u30fc\u306e\u3082\u306e\u306b\u5909\u66f4\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u304c\u3002\n\n![](https://raw.githubusercontent.com/mba-hack/images/master/octopress_gitlab_pages_user.png)\n\n\u516c\u5f0f\u306f`$user.gitlab.io/octopress`\u3068\u3044\u3046\u5f62\u3092\u4e88\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\u306b\u3001\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3057\u306a\u3044\u3068\u9069\u5207\u306b\u8868\u793a\u3055\u308c\u307e\u305b\u3093\u3002\u5177\u4f53\u7684\u306b\u306f\u3001`/octopress`\u3068\u3044\u3046\u6307\u5b9a\u3092\u30b3\u30fc\u30c9\u304b\u3089\u524a\u9664\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30c8\u30c3\u30d7\u3067\u306f\u306a\u304f\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001`/octopress`\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u540d\u306b\u7f6e\u304d\u63db\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3082\u3061\u308d\u3093\u3001\u30b0\u30eb\u30fc\u30d7\u3082\u4f7f\u3048\u307e\u3059\u306e\u3067\u3001`$user`\u306e\u3068\u3053\u308d\u306f\u3001\u65e2\u306bGitLab\u3067\u53d6\u5f97\u3055\u308c\u3066\u3044\u306a\u3044\u30a2\u30ab\u30a6\u30f3\u30c8ID\u3067\u306a\u3044\u304b\u304e\u308a\u5909\u66f4\u53ef\u80fd\u3067\u3059\u3002\n\n\u7279\u306bCI\u3068\u306e\u9023\u643a\u304c\u6a5f\u80fd\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u3053\u3068\u306f\u3001\u5358\u7d14\u306aWeb\u30b5\u30a4\u30c8\u4f5c\u6210\u624b\u9806\u3092\u898b\u3066\u3082\u660e\u3089\u304b\u3067\u3059\u3002\n\n\n## Hugo\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\n\nHugo\u306b\u5168\u8a18\u4e8b\u4e00\u89a7\u3092\u5206\u304b\u308a\u3084\u3059\u304f\u8868\u793a\u3059\u308b\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3067\u3060\u3044\u305f\u3044\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\nhttps://parsiya.net/blog/2016-02-14-archive-page-in-hugo/\n\n\u81ea\u5206\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u30ec\u30a4\u30a2\u30a6\u30c8\u3002\n\n```html:layouts/archive/single.html\n{{ partial \"head\" . }}\n{{ partial \"header\" . }}\n<div id=\"container\">\n   <div class=\"outer\">\n        <div id=\"blog-archives\" class=\"category\">\n          {{ .Content }}\n          {{ range (where .Site.Pages \"Type\" \"post\") }}\n            <h1>\n\t\t<time datetime=\"{{ .Date }}\" itemprop=\"datePublished\">{{ .Date.Format .Site.Params.date_format }}</time>\n                <a href=\"{{ .Permalink }}\" title=\"{{ .Title }}\">{{ .Title }}</a>\n            </h1>\n          {{ end }}\n        </div>\n    </div>\n</div>\n{{ partial \"footer\" . }}\n</body>\n</html>\n```\n\n\u3042\u307e\u308a\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n\n## Hugo\u306e\u691c\u7d22\u30b7\u30b9\u30c6\u30e0\n\nHugo\u306e\u691c\u7d22\u30b7\u30b9\u30c6\u30e0\u3092\u69cb\u7bc9\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\n\u5927\u4f53\u306f\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306e\u3068\u304a\u308a\u3067\u3059\u3002\u5177\u4f53\u7684\u306b[Grunt.js](http://gruntjs.com/)\u3068[Lunr.js](http://lunrjs.com/)\u3067Hugo\u7528\u306b\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\nhttps://gist.github.com/sebz/efddfc8fdcb6b480f567\n\n\u81ea\u5206\u306e\u5834\u5408\u306e\u69cb\u7bc9\u65b9\u6cd5\u3067\u3059\u3002\u66f8\u3044\u3066\u3042\u308b\u3068\u304a\u308a\u3060\u3068`config`\u306e`parmalink`\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u5834\u5408\u306e\u51fa\u529b\u304c\u5f97\u3089\u308c\u307e\u3059\u304c\u3001\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\u3057\u305f\u304c\u3063\u3066\u3001\u6025\u907d\u7121\u7406\u3084\u308aShellScript\u3067\u66f8\u304d\u76f4\u3057\u307e\u3059\u3002\u3053\u308c\u306f`Gruntfile.js`\u3092\u76f4\u305b\u3070\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u6b63\u76f4\u3001\u9762\u5012\u304f\u3055\u304b\u3063\u305f...\u3002\n\n```bash:\n#!/bin/zsh\nd=${0:a:h:h}\n# backup\nh=${0:a:h}\nif cat $j|jq . ;then\n\tcp $j $h\nfi\nh=$h/PagesIndex.json\nj=$d/static/bower_components/lunr.js/PagesIndex.json\nt=`cat $j |jq '.[]'|sed -e 's#/post##g'`\na=`cat $j | sed -e 's#/post##g'`\necho $a >! $j\nt=`echo $t|jq -r '.href'|cut -d - -f 1-4`\n\nfor (( i=1;i<=`echo \"$t\"|wc -l`;i++ ))\ndo\n\tf=`echo \"$t\"|awk \"NR==$i\"`\n\tc=`echo $f|tr '-' '/'`\n\tsed -i \"\" \"s#${f}#${c}#g\" $j\ndone\n\ncat $j\n\ndiff $j $h\n```\n\n\u3068\u308a\u3042\u3048\u305a\u8a18\u4e8b\u306b\u3042\u308b`Grntfile.js`\u3092\u9069\u6642\u4fee\u6b63\u3057\u4f5c\u6210\u3057\u3001\u30d3\u30eb\u30c9\u5f8c\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3068\u3044\u3046\u624b\u9806\u3002\n\n\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u306f`/bower_components/lunr.js/PagesIndex.json`\u306b\u7f6e\u304f\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\n```html:layouts/partials/widgets/search.html\n<div class=\"widget-wrap\">\n<input id=\"search\" type=\"text\" placeholder=\"search\">\n<ul id=\"results\">\n</ul>\n<script type=\"text/javascript\" src=\"/js/search.js\"></script>\n<script type=\"text/javascript\" src=\"/bower_components/lunr.js/lunr.min.js\"></script>\n</div>\n```\n\n```html:js/search.html\nvar lunrIndex,\n    $results,\n    pagesIndex;\n\n// Initialize lunrjs using our generated index file\nfunction initLunr() {\n    // First retrieve the index file\n    $.getJSON(\"/bower_components/lunr.js/PagesIndex.json\")\n        .done(function(index) {\n            pagesIndex = index;\n            console.log(\"index:\", pagesIndex);\n\n            // Set up lunrjs by declaring the fields we use\n            // Also provide their boost level for the ranking\n            lunrIndex = lunr(function() {\n                this.field(\"title\", {\n                    boost: 10\n                });\n                this.field(\"tags\", {\n                    boost: 5\n                });\n                this.field(\"content\");\n\n                // ref is the result item identifier (I chose the page URL)\n                this.ref(\"href\");\n            });\n\n            // Feed lunr with each file and let lunr actually index them\n            pagesIndex.forEach(function(page) {\n                lunrIndex.add(page);\n            });\n        })\n        .fail(function(jqxhr, textStatus, error) {\n            var err = textStatus + \", \" + error;\n            console.error(\"Error getting Hugo index flie:\", err);\n        });\n}\n\n// Nothing crazy here, just hook up a listener on the input field\nfunction initUI() {\n    $results = $(\"#results\");\n    $(\"#search\").keyup(function() {\n        $results.empty();\n\n        // Only trigger a search when 2 chars. at least have been provided\n        var query = $(this).val();\n        if (query.length < 2) {\n            return;\n        }\n\n        var results = search(query);\n\n        renderResults(results);\n    });\n}\n\n/**\n * Trigger a search in lunr and transform the result\n *\n * @param  {String} query\n * @return {Array}  results\n */\nfunction search(query) {\n    // Find the item in our index corresponding to the lunr one to have more info\n    // Lunr result: \n    //  {ref: \"/section/page1\", score: 0.2725657778206127}\n    // Our result:\n    //  {title:\"Page1\", href:\"/section/page1\", ...}\n    return lunrIndex.search(query).map(function(result) {\n            return pagesIndex.filter(function(page) {\n                return page.href === result.ref;\n            })[0];\n        });\n}\n\n/**\n * Display the 10 first results\n *\n * @param  {Array} results to display\n */\nfunction renderResults(results) {\n    if (!results.length) {\n        return;\n    }\n\n    // Only show the ten first results\n    results.slice(0, 10).forEach(function(result) {\n        var $result = $(\"<li>\");\n        $result.append($(\"<a>\", {\n            href: result.href,\n            text: \"\u00bb \" + result.title\n        }));\n        $results.append($result);\n    });\n}\n\n// Let's get started\ninitLunr();\n\n$(document).ready(function() {\n    initUI();\n});\n```\n\n\u3053\u308c\u3067\u691c\u7d22\u30b7\u30b9\u30c6\u30e0\u306e\u5b8c\u6210\u3067\u3059\u3002Hugo Build\u3067\u540c\u6642\u306bPagesIndex\u3092\u4f5c\u6210\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070OK\u3067\u3059\u3002\n\n", "tags": ["Hugo", "jgo", "golang"]}