{"tags": ["Mapserver", "leaflet", "GIS", "jsdo"], "context": "\n\n\u6982\u8981\nMapserver\u306e\u5730\u56f3\u3092leaflet\u3067\u8868\u793a\u3057\u3066\u307f\u305f\u3002\n\n\u5199\u771f\n\n\n\u6210\u679c\u7269\nhttp://jsdo.it/ohisama1/K7mP\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\nvar map = L.map('map').setView([38.0, 140.0], 11);\nvar mvr = L.tileLayer(\"\", {\n    attribution: 'mvr',\n    maxZoom: 18,\n});\nmvr.getTileUrl = function(coord) {\n    var zoom = coord.z;\n    var s = Math.pow(2, coord.z);\n    var llp = L.point((coord.x * 256 + 128) / s, (coord.y * 256 + 128) / s);\n    var ll = fromPointToLatLng(llp, s);\n    var lng = ll.lng;    \n    var lat = ll.lat;\n    return \"http://yumeblog.dip.jp/yb2g0.php?zoom=\" + zoom + \"&long=\" + lng + \"&lat=\" + lat;\n};\nmvr.addTo(map);\nfunction fromPointToLatLng(point, max_zoom) {\n    var size = (1 << max_zoom) * 256,\n        lat = (2 * Math.atan(Math.exp((point.y - size / 2) / -(size / (2 * Math.PI)))) - (Math.PI / 2)) * (180 / Math.PI),\n        lng = (point.x - size / 2) * (360 / size);\n    return L.latLng(lat, lng);\n}\n\n#\u6982\u8981\nMapserver\u306e\u5730\u56f3\u3092leaflet\u3067\u8868\u793a\u3057\u3066\u307f\u305f\u3002\n\n#\u5199\u771f\n\n![](http://jsdo-static-contents.s3.amazonaws.com/images/capture/K/7/m/K7mP.jpg?t=1489472185)\n\n#\u6210\u679c\u7269\n\nhttp://jsdo.it/ohisama1/K7mP\n\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n```\nvar map = L.map('map').setView([38.0, 140.0], 11);\nvar mvr = L.tileLayer(\"\", {\n    attribution: 'mvr',\n    maxZoom: 18,\n});\nmvr.getTileUrl = function(coord) {\n    var zoom = coord.z;\n    var s = Math.pow(2, coord.z);\n    var llp = L.point((coord.x * 256 + 128) / s, (coord.y * 256 + 128) / s);\n    var ll = fromPointToLatLng(llp, s);\n    var lng = ll.lng;    \n    var lat = ll.lat;\n    return \"http://yumeblog.dip.jp/yb2g0.php?zoom=\" + zoom + \"&long=\" + lng + \"&lat=\" + lat;\n};\nmvr.addTo(map);\nfunction fromPointToLatLng(point, max_zoom) {\n\tvar size = (1 << max_zoom) * 256,\n\t\tlat = (2 * Math.atan(Math.exp((point.y - size / 2) / -(size / (2 * Math.PI)))) - (Math.PI / 2)) * (180 / Math.PI),\n\t\tlng = (point.x - size / 2) * (360 / size);\n\treturn L.latLng(lat, lng);\n}\n```\n"}