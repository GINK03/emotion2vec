{"context": " More than 1 year has passed since last update.Square\u793e\u306eRetrofit\u306fREST\u901a\u4fe1\u3092\u7c21\u6f54\u306b\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u51fa\u6765\u305f\u5b50\u3067\u3059\u304c\u3001\u3044\u308d\u3044\u308d\u3068\u9762\u5012\u306aMultipart\u306ePOST\uff08PUT\uff09\u9001\u4fe1\u3082\u7c21\u6f54\u306b\u3067\u304d\u307e\u3059\u3002\n\n\u3044\u3064\u3082\u3069\u304a\u308a\u306bRestAdapter\u304b\u3089API\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nfinal Executor executor = Executors.newCachedThreadPool();\nfinal OkHttpClient okHttpClient = new OkHttpClient();\nRestAdapter mRestAdapter = new RestAdapter.Builder()\n    .setClient(new OkClient(okHttpClient))\n    .setExecutors(executor, new MainThreadExecutor())\n    .setEndpoint(\"https://api.hoge.com\")\n    .setRequestInterceptor(requestInterceptor)\n    .setConverter(new GsonConverter(new Gson()))\n    .build();\nApi mApi = mRestAdapter.create(Api.class);\n\n\nAPI\u901a\u4fe1\u5074\u3092\u4f5c\u6210\u3002\n\nApi.java\n@Multipart\n@POST(\"/upload\")\nvoid updateMultipart(\n    @Header(\"Authorization\") String token,              //\u30d8\u30c3\u30c0\u30fc\n    @Part(\"fileContent\") TypedFile file,                //\u5358\u4e00\u30d5\u30a1\u30a4\u30eb\n    @PartMap HashMap<String, TypedFile> fileParams,     //\u8907\u6570\u30d5\u30a1\u30a4\u30eb\n    @Part(\"textContent\") String text,                   //\u5358\u4e00\u30d5\u30a1\u30a4\u30eb\n    @PartMap HashMap<String, String> stringParams,      //\u8907\u6570\u30c6\u30ad\u30b9\u30c8\n    Callback<MultipartResponse> callback                //\u975e\u540c\u671f\u306b\u3057\u305f\u3044\u306e\u3067\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u6e21\u3059\n    );\n\n\n\nAPI\u3092\u30b3\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n//\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u7528\nHashMap<String, TypedFile> fileParam = new HashMap<String, TypedFile>();\n//\u8907\u6570\u30c6\u30ad\u30b9\u30c8\u7528\nHashMap<String, String> stringParams = new HashMap<String, String>();\n\nfileParam.put(\"fileContent1\", new TypedFile(\"image/jpeg\", new File(filePath1)));\nfileParam.put(\"fileContent2\", new TypedFile(\"image/jpeg\", new File(filePath2)));\n\nstringParams.put(\"textContent1\", \"text1\");\nstringParams.put(\"textContent2\", \"text2\");\n\nApi.updateMultipart(\n        \"token\",\n        new TypedFile(\"image/jpeg\", new File(filePath)),\n        fileParam,\n        \"hoge\",\n        stringParams,\n        new Callback<CreateResponse>() {\n            @Override\n            public void success(MultipartResponse mMultipartResponse, Response response) {\n                    //\u30ea\u30af\u30a8\u30b9\u30c8\u6210\u529f\n            }\n\n            @Override\n            public void failure(RetrofitError error) {\n                    //\u30ea\u30af\u30a8\u30b9\u30c8\u5931\u6557\n            }\n        });\n\n\n\u4ee5\u524d\u306eAndroid\u3067\u306eMultipart\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u6bd4\u3079\u3066\u968f\u5206\u3068\u7c21\u6f54\u306b\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\nSquare\u793e\u306e[Retrofit](http://square.github.io/retrofit/ \"Retrofit\")\u306fREST\u901a\u4fe1\u3092\u7c21\u6f54\u306b\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u51fa\u6765\u305f\u5b50\u3067\u3059\u304c\u3001\u3044\u308d\u3044\u308d\u3068\u9762\u5012\u306aMultipart\u306ePOST\uff08PUT\uff09\u9001\u4fe1\u3082\u7c21\u6f54\u306b\u3067\u304d\u307e\u3059\u3002\n\n####\u3044\u3064\u3082\u3069\u304a\u308a\u306bRestAdapter\u304b\u3089API\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\nfinal Executor executor = Executors.newCachedThreadPool();\nfinal OkHttpClient okHttpClient = new OkHttpClient();\nRestAdapter mRestAdapter = new RestAdapter.Builder()\n\t.setClient(new OkClient(okHttpClient))\n\t.setExecutors(executor, new MainThreadExecutor())\n\t.setEndpoint(\"https://api.hoge.com\")\n\t.setRequestInterceptor(requestInterceptor)\n\t.setConverter(new GsonConverter(new Gson()))\n\t.build();\nApi mApi = mRestAdapter.create(Api.class);\n```\n\n\n####API\u901a\u4fe1\u5074\u3092\u4f5c\u6210\u3002\n\n\n```Api.java\n@Multipart\n@POST(\"/upload\")\nvoid updateMultipart(\n\t@Header(\"Authorization\") String token,\t\t\t\t//\u30d8\u30c3\u30c0\u30fc\n\t@Part(\"fileContent\") TypedFile file,\t\t\t\t//\u5358\u4e00\u30d5\u30a1\u30a4\u30eb\n\t@PartMap HashMap<String, TypedFile> fileParams,\t\t//\u8907\u6570\u30d5\u30a1\u30a4\u30eb\n\t@Part(\"textContent\") String text,\t\t\t\t\t//\u5358\u4e00\u30d5\u30a1\u30a4\u30eb\n\t@PartMap HashMap<String, String> stringParams,\t\t//\u8907\u6570\u30c6\u30ad\u30b9\u30c8\n\tCallback<MultipartResponse> callback\t\t\t\t//\u975e\u540c\u671f\u306b\u3057\u305f\u3044\u306e\u3067\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u6e21\u3059\n    );\n```\n\n####API\u3092\u30b3\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n\n//\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u7528\nHashMap<String, TypedFile> fileParam = new HashMap<String, TypedFile>();\n//\u8907\u6570\u30c6\u30ad\u30b9\u30c8\u7528\nHashMap<String, String> stringParams = new HashMap<String, String>();\n\nfileParam.put(\"fileContent1\", new TypedFile(\"image/jpeg\", new File(filePath1)));\nfileParam.put(\"fileContent2\", new TypedFile(\"image/jpeg\", new File(filePath2)));\n\nstringParams.put(\"textContent1\", \"text1\");\nstringParams.put(\"textContent2\", \"text2\");\n\nApi.updateMultipart(\n\t\t\"token\",\n\t\tnew TypedFile(\"image/jpeg\", new File(filePath)),\n\t\tfileParam,\n\t\t\"hoge\",\n\t\tstringParams,\n\t\tnew Callback<CreateResponse>() {\n            @Override\n            public void success(MultipartResponse mMultipartResponse, Response response) {\n            \t\t//\u30ea\u30af\u30a8\u30b9\u30c8\u6210\u529f\n            }\n\n            @Override\n            public void failure(RetrofitError error) {\n            \t\t//\u30ea\u30af\u30a8\u30b9\u30c8\u5931\u6557\n            }\n        });\n\t\t\n```\n\n\u4ee5\u524d\u306eAndroid\u3067\u306eMultipart\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u6bd4\u3079\u3066\u968f\u5206\u3068\u7c21\u6f54\u306b\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Java", "gradle", "Android"]}