{"context": " More than 1 year has passed since last update.\u3053\u3061\u3089\u306e\u8a18\u4e8bhttp://fromatom.hatenablog.com/entry/2015/01/09/185942 \u3092\u53c2\u8003\u306bLaTex\u306e\u81ea\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u306e\u69cb\u7bc9\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3088\u3046\u3068\u3057\u305f\u3051\u3069,\u3046\u307e\u304f\u884c\u304b\u306a\u304b\u3063\u305f\u306e\u3067Python\u3067\u4f5c\u3063\u3066\u307f\u305f.\n\n\u74b0\u5883\n\nUbuntu 14.04\nPython 3.4.0\n\n\n\u30d5\u30a1\u30a4\u30eb\u76e3\u8996\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u305fhttp://qiita.com/PyYoshi@github/items/9744a138c018734c69db\nPython\u306b\u306fwatchdog\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u76e3\u8996\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u305f\npip\u3067install\u3067\u304d\u305f\npip install watchdog\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3067\u306e\u81ea\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u8003\u3048\u308b\n *--build/   --\u3053\u306e\u4e2d\u306bdvi\u3084pdf\u304c\u751f\u6210\u3055\u308c\u308b\n |  |\n |  *--doc.dvi\n |  |\n |  *--doc.pdf\n |  |\n |  :\n |\n *--image/ --\u753b\u50cf\u3092\u5165\u308c\u308b\n |  |\n |  * --figure.png\n |  \n *--doc.tex  --\u30bf\u30fc\u30b2\u30c3\u30c8\u306etex\u30d5\u30a1\u30a4\u30eb\n |\n *--auto_latex.py\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\n\nauto_latex.py\n\nimport time\nimport os\n\nfrom watchdog.events import FileSystemEventHandler\nfrom watchdog.observers import Observer\n\n# \u76e3\u8996\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\nobserved_file_type = (\n    '.tex',\n    '.jpg',\n    '.png',\n    '.eps',\n    '.sty',\n)\n\n# \u8a2d\u5b9a\nBASEDIR = os.path.abspath(os.path.dirname(__file__))\nTARGET = 'doc'\nLATEX = 'platex'\nOUTPUT = 'build'\nLATEX_OPTION = '-interaction=nonstopmode -output-directory=%s' % OUTPUT\nDVIPDFMX = 'dvipdfmx'\nDVIPDFMX_OPTION=''\n\n# platex\u30b3\u30de\u30f3\u30c9\nlatex_compile = ' '.join([\n    LATEX,\n    LATEX_OPTION,\n    TARGET + '.tex',\n])\n\n# dvipdfmx\u30b3\u30de\u30f3\u30c9\ndvi2pdf = ' '.join([\n    DVIPDFMX,\n    DVIPDFMX_OPTION,\n    '-o %s/%s.pdf' % (OUTPUT, TARGET),\n    '%s/%s.dvi' % (OUTPUT, TARGET),\n])\n\n\n# \u5909\u66f4\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u76e3\u8996\u5bfe\u8c61\u3067\u3042\u308b\u304b\u3092\u8abf\u3079\u308b\ndef match(path):\n    return any([path.endswith(ft) for ft in observed_file_type])\n\n\n# tex\u30d5\u30a1\u30a4\u30eb\u304b\u3089dvi\u3068pdf\u3092\u751f\u6210\ndef build():\n    os.system(latex_compile)\n    os.system(dvi2pdf)\n\n\n# \u5909\u66f4\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\nclass ChangeHandler(FileSystemEventHandler):\n    def on_create(self, event):\n        if event.is_directory:\n            return\n        if match(event.src_path):\n            build()\n\n    def on_modified(self, event):\n        if event.is_directory:\n            return\n        if match(event.src_path):\n            build()\n\n    def on_deleted(self, event):\n        if event.is_directory:\n            return\n        if match(event.src_path):\n            build()\n\n\nif __name__ in '__main__':\n    event_handler = ChangeHandler()\n    observer = Observer()\n    observer.schedule(event_handler, BASEDIR, recursive=True)\n    observer.start()\n    try:\n        while True:\n            time.sleep(0.1)\n    except KeyboardInterrupt:\n        observer.stop()\n    observer.join()\n\n\n\n\u76e3\u8996\u958b\u59cb\u306f\npython auto_latex.py\n\n\u3042\u3068\u306fdoc.tex\u306a\u3069\u306e\u76e3\u8996\u5bfe\u8c61\u306b\u52d5\u304d\u304c\u3042\u308b\u3068\u81ea\u52d5\u7684\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b.\nUbuntu\u306e\u6a19\u6e96PDF\u30ea\u30fc\u30c0evince\u306f\u81ea\u52d5\u3067\u30ed\u30fc\u30c9\u3092\u884c\u3063\u3066\u304f\u308c\u308b\u306e\u3067,\u4e00\u5ea6doc.pdf\u3092\u958b\u3044\u3066\u304a\u3051\u3070doc.tex\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3073\u306b(Vim\u306a\u3089:w\u3059\u308b\u305f\u3073\u306b)evince\u306b\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u308b.\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\n\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30eabuild\u3092\u4f5c\u3063\u3066auto_latex.py\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308b\u5fc5\u8981\u304c\u3042\u308b\u304c,\u9762\u5012\u306a\u306e\u3067\u81ea\u52d5\u5316\u3059\u308b.\u50d5\u306f~/mycommand/\u306b\u30d1\u30b9\u3092\u901a\u3057\u3066\u3044\u308b\u306e\u3067\u305d\u3053\u306b\u30b3\u30de\u30f3\u30c9\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u3092\u7f6e\u304f\n\n~/mycommand/latexproject\n\n#!/usr/bin/zsh\n\nmkdir $1\nmkdir $1/build\nmkdir $1/image\ncp ~/mycommand/auto_latex.py $1\ncp ~/mycommand/doc.tex $1\n\n\n\n\u4f5c\u3063\u305fauto_latex.py\u3084LaTex\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30ebdoc.tex\u3082~/mycommand/\u306b\u304a\u304f\n\u4f7f\u7528\u4f8b\n> latexproject NewLateProject\n> ls NewLatexProject\nauto_latex.py  build/  doc.tex  image/\n\n\n\u6539\u5584\u70b9\n\nbibtex\u306a\u3069\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u306a\u3044\u3051\u3069,\u62e1\u5f35\u306f\u7c21\u5358\u306a\u306f\u305a\n\u30d3\u30eb\u30c9\u30b3\u30de\u30f3\u30c9\u306f\u5168\u90e8Makefile\u306b\u66f8\u3044\u3066auto_latex.py\u304b\u3089\u306fmake\u30b3\u30de\u30f3\u30c9\u3060\u3051\u3092\u547c\u3073\u51fa\u3059\u3068\u30b9\u30c3\u30ad\u30ea\u3059\u308b?\n\n\u3053\u3061\u3089\u306e\u8a18\u4e8bhttp://fromatom.hatenablog.com/entry/2015/01/09/185942 \u3092\u53c2\u8003\u306bLaTex\u306e\u81ea\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u74b0\u5883\u306e\u69cb\u7bc9\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3088\u3046\u3068\u3057\u305f\u3051\u3069,\u3046\u307e\u304f\u884c\u304b\u306a\u304b\u3063\u305f\u306e\u3067Python\u3067\u4f5c\u3063\u3066\u307f\u305f.\n\n# \u74b0\u5883\n* Ubuntu 14.04\n* Python 3.4.0\n\n# \u30d5\u30a1\u30a4\u30eb\u76e3\u8996\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u305fhttp://qiita.com/PyYoshi@github/items/9744a138c018734c69db\nPython\u306b\u306fwatchdog\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u76e3\u8996\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u305f\npip\u3067install\u3067\u304d\u305f\n\n`pip install watchdog`\n\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3067\u306e\u81ea\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u8003\u3048\u308b\n\n```\n *--build/   --\u3053\u306e\u4e2d\u306bdvi\u3084pdf\u304c\u751f\u6210\u3055\u308c\u308b\n |  |\n |  *--doc.dvi\n |  |\n |  *--doc.pdf\n |  |\n |  :\n |\n *--image/ --\u753b\u50cf\u3092\u5165\u308c\u308b\n |  |\n |  * --figure.png\n |  \n *--doc.tex  --\u30bf\u30fc\u30b2\u30c3\u30c8\u306etex\u30d5\u30a1\u30a4\u30eb\n |\n *--auto_latex.py\n```\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\n\n```python:auto_latex.py\n\nimport time\nimport os\n\nfrom watchdog.events import FileSystemEventHandler\nfrom watchdog.observers import Observer\n\n# \u76e3\u8996\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\nobserved_file_type = (\n    '.tex',\n    '.jpg',\n    '.png',\n    '.eps',\n    '.sty',\n)\n\n# \u8a2d\u5b9a\nBASEDIR = os.path.abspath(os.path.dirname(__file__))\nTARGET = 'doc'\nLATEX = 'platex'\nOUTPUT = 'build'\nLATEX_OPTION = '-interaction=nonstopmode -output-directory=%s' % OUTPUT\nDVIPDFMX = 'dvipdfmx'\nDVIPDFMX_OPTION=''\n\n# platex\u30b3\u30de\u30f3\u30c9\nlatex_compile = ' '.join([\n    LATEX,\n    LATEX_OPTION,\n    TARGET + '.tex',\n])\n\n# dvipdfmx\u30b3\u30de\u30f3\u30c9\ndvi2pdf = ' '.join([\n    DVIPDFMX,\n    DVIPDFMX_OPTION,\n    '-o %s/%s.pdf' % (OUTPUT, TARGET),\n    '%s/%s.dvi' % (OUTPUT, TARGET),\n])\n\n\n# \u5909\u66f4\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u76e3\u8996\u5bfe\u8c61\u3067\u3042\u308b\u304b\u3092\u8abf\u3079\u308b\ndef match(path):\n    return any([path.endswith(ft) for ft in observed_file_type])\n\n\n# tex\u30d5\u30a1\u30a4\u30eb\u304b\u3089dvi\u3068pdf\u3092\u751f\u6210\ndef build():\n    os.system(latex_compile)\n    os.system(dvi2pdf)\n\n\n# \u5909\u66f4\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\nclass ChangeHandler(FileSystemEventHandler):\n    def on_create(self, event):\n        if event.is_directory:\n            return\n        if match(event.src_path):\n            build()\n\n    def on_modified(self, event):\n        if event.is_directory:\n            return\n        if match(event.src_path):\n            build()\n\n    def on_deleted(self, event):\n        if event.is_directory:\n            return\n        if match(event.src_path):\n            build()\n\n\nif __name__ in '__main__':\n    event_handler = ChangeHandler()\n    observer = Observer()\n    observer.schedule(event_handler, BASEDIR, recursive=True)\n    observer.start()\n    try:\n        while True:\n            time.sleep(0.1)\n    except KeyboardInterrupt:\n        observer.stop()\n    observer.join()\n\n```\n\n\u76e3\u8996\u958b\u59cb\u306f\n\n```\npython auto_latex.py\n```\n\n\u3042\u3068\u306fdoc.tex\u306a\u3069\u306e\u76e3\u8996\u5bfe\u8c61\u306b\u52d5\u304d\u304c\u3042\u308b\u3068\u81ea\u52d5\u7684\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u308b.\nUbuntu\u306e\u6a19\u6e96PDF\u30ea\u30fc\u30c0evince\u306f\u81ea\u52d5\u3067\u30ed\u30fc\u30c9\u3092\u884c\u3063\u3066\u304f\u308c\u308b\u306e\u3067,\u4e00\u5ea6doc.pdf\u3092\u958b\u3044\u3066\u304a\u3051\u3070doc.tex\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3073\u306b(Vim\u306a\u3089:w\u3059\u308b\u305f\u3073\u306b)evince\u306b\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u308b.\n\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\n\u30b5\u30d6\u30c7\u30a3\u30ec\u30af\u30c8\u30eabuild\u3092\u4f5c\u3063\u3066auto_latex.py\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308b\u5fc5\u8981\u304c\u3042\u308b\u304c,\u9762\u5012\u306a\u306e\u3067\u81ea\u52d5\u5316\u3059\u308b.\u50d5\u306f~/mycommand/\u306b\u30d1\u30b9\u3092\u901a\u3057\u3066\u3044\u308b\u306e\u3067\u305d\u3053\u306b\u30b3\u30de\u30f3\u30c9\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\u3092\u7f6e\u304f\n\n```bash:~/mycommand/latexproject\n\n#!/usr/bin/zsh\n\nmkdir $1\nmkdir $1/build\nmkdir $1/image\ncp ~/mycommand/auto_latex.py $1\ncp ~/mycommand/doc.tex $1\n\n```\n\u4f5c\u3063\u305fauto_latex.py\u3084LaTex\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30ebdoc.tex\u3082~/mycommand/\u306b\u304a\u304f\n\n\u4f7f\u7528\u4f8b\n\n```\n> latexproject NewLateProject\n> ls NewLatexProject\nauto_latex.py  build/  doc.tex  image/\n```\n\n# \u6539\u5584\u70b9\n* bibtex\u306a\u3069\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u306a\u3044\u3051\u3069,\u62e1\u5f35\u306f\u7c21\u5358\u306a\u306f\u305a\n* \u30d3\u30eb\u30c9\u30b3\u30de\u30f3\u30c9\u306f\u5168\u90e8Makefile\u306b\u66f8\u3044\u3066auto_latex.py\u304b\u3089\u306fmake\u30b3\u30de\u30f3\u30c9\u3060\u3051\u3092\u547c\u3073\u51fa\u3059\u3068\u30b9\u30c3\u30ad\u30ea\u3059\u308b?\n", "tags": ["python3", "LaTeX"]}