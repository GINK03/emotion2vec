{"context": "\n\n\u3053\u3093\u306a\u65b9\u3078\n\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u5f15\u304d\u3053\u3082\u3063\u3066\u4f5c\u696d\u3092\u3057\u3066\u3044\u3066\uff0c\u6c17\u3065\u3044\u305f\u3089\u304a\u6e6f\u3092\u5165\u308c\u305f\u30ab\u30c3\u30d7\u30e9\u30fc\u30e1\u30f3\u306e\u9eba\u304c\u4f38\u3073\u304d\u3063\u3066\u3057\u307e\u3063\u305f\uff0e\u7686\u3055\u3093\u3082\u3053\u3093\u306a\u7d4c\u9a13\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\uff0e\u643a\u5e2f\u306a\u3069\u306e\u30bf\u30a4\u30de\u30fc\u3092\u30bb\u30c3\u30c8\u3059\u308b\u306e\u3082\u624b\u3067\u3059\u304c\uff0c\u3069\u3046\u305b\u306a\u3089\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u884c\u3063\u3061\u3083\u3044\u305f\u3044\u3067\u3059\u3088\u306d\uff01\n\u3068\u3046\u3044\u3046\u4e8b\u3067\uff0c\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u52c9\u5f37\u304c\u3066\u3089\u3061\u3087\u3063\u3068\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\uff0e\u74b0\u5883\u306ftmux\u3092\u4f7f\u3063\u3066\u3044\u308b\u4e8b\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\uff0e\n\n\u5b8c\u6210\u5f62\n\u666e\u6bb5\u306f\uff0c\u753b\u9762\u53f3\u4e0a\u306b\u6642\u523b\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u81ea\u7531\u306b\u6307\u5b9a\u3067\u304d\u307e\u3059\uff09\u304c\uff0c\n\ntimerx 3\u3068\u3059\u308b\u3068\uff0c\u6642\u523b\u306e\u90e8\u5206\u306b3\u5206\u306e\u30bf\u30a4\u30de\u30fc\u304c\u30bb\u30c3\u30c8\u3055\u308c\u30ab\u30a6\u30f3\u30c8\u30c0\u30a6\u30f3\u304c\u59cb\u307e\u308a\u307e\u3059\uff0e\n\n\u6642\u9593\u306b\u306a\u308b\u3068\u5143\u306e\u6642\u523b\u8868\u793a\u306b\u623b\u308a\uff0c\n\nMac\u306e\u5834\u5408\u306f\uff0c\u901a\u77e5\u30bb\u30f3\u30bf\u30fc\u304b\u3089\u304a\u77e5\u3089\u305b\u3057\u3066\u304f\u308c\u307e\u3059\uff0e\n\n\u89aa\u5207\u3067\u3059\u306d\uff01\nLinux\u3067\u306f\uff0cecho ^G\u3067\u30d3\u30fc\u30d7\u97f3\u3092\u9cf4\u3089\u3059\u304b\uff0cnotify-send \u3092\u4f7f\u3063\u3066\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306b\u901a\u77e5\u3059\u308b\u306a\u3069\u306e\u65b9\u6cd5\u304c\u3042\u308a\u305d\u3046\u3067\u3059\uff0e\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306fMac\u7528\u3067\u3059\u304c\uff0cLinux\u3067\u3082\u307b\u307c\u540c\u3058\u611f\u3058\u3067\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\uff0e\n\ntimerx\n#!/bin/bash\n\nfunction timer_on() {\n  let seconds=$1*60 # minutes -> seconds\n  local last=`expr $(date +%s) + $seconds`\n  echo -e \"SWITCH: TIMER\\nLAST: $last\" > $TMPFILE\n}\nfunction timer_off() { init; }\nfunction init() { echo -e \"SWITCH: DATE\\nLAST:\\n\" > $TMPFILE; }\nfunction get() { cat $TMPFILE | awk '/'$1'/ {print $2}'; } # $1: SWITCH or LAST\nfunction countdown() {\n  let diff=$(get \"LAST\")-$(date +%s)\n  if [ $diff -lt 0 ]; then\n    timer_off\n    reattach-to-user-namespace osascript -e 'display notification \"Tea is ready\" with title \"Timer\" sound name \"\"'\n    exit\n  fi\n  # let hour=\"$diff / 3600\"\n  # let diff=\"$diff % 3600\"\n  let minute=\"$diff / 60\"\n  let second=\"$diff % 60\"\n  # printf \"%02d:%02d:%02d\" $hour $minute $second\n  printf \"%02d:%02d\" $minute $second\n}\n\n# temporary file\nTMPFILE=\"${TMPDIR}timerx_tmp\"\n! [ -e $TMPFILE ] && init\n\n# check argument\n# --------------\ncase \"$1\" in\n  \"-h\")\n    echo \"usage: timerx [minutes|--off]\" 1>&2\n    exit\n    ;;\n  \"--off\")\n    timer_off\n    exit\n    ;;\n  -*|--*)\n    echo \"$1: unknown option\" 1>&2\n    exit 1\n    ;;\nesac\nexpr \"$1\" + 1 >/dev/null 2>&1 # check if $1 is numeric or not\nif [ $? -lt 2 ]; then\n  timer_on $1\n  exit\nfi\n\n# check switch\n# ------------\nSWITCH=$(get \"SWITCH\")\nif [ $SWITCH = \"DATE\" ]; then\n  echo $(date \"$@\")\nelif [ $SWITCH = \"TIMER\" ]; then\n  countdown\nfi\n\n\n\u6642\u523b\u60c5\u5831\u306a\u3069\u3092\u4fdd\u6301\u3059\u308b\u305f\u3081\u306b\uff0c${TMPDIR}timerx_tmp\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\uff08\u3053\u306e\u65b9\u6cd5\u304c\u3044\u3044\u306e\u304b\u826f\u304f\u5206\u304b\u3089\u306a\u3044\u306e\u3067\uff0c\u4ed6\u306b\u826f\u3044\u65b9\u6cd5\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u304f\u3060\u3055\u3044\uff09\uff0e\u4fdd\u5b58\u5185\u5bb9\u306f\n\n${TMPDIR}timerx_tmp\nSWITCH: DATE\nLAST:\n\n\n\u3068\u3044\u3046\u3088\u3046\u306a\u611f\u3058\u3067\u3059\uff0e\u30bf\u30a4\u30de\u30fc\u304c\u30bb\u30c3\u30c8\u3055\u308c\u305f\u5834\u5408\u306f\uff0cDATE\u304cTIMER\u306b\u306a\u308a\uff0cLAST\u306e\u7b87\u6240\u306b\u5024\u304c\u4fdd\u6301\u3055\u308c\u307e\u3059\uff0e\u3042\u3068\u306f\uff0c~/.tmux.conf\u3092\n\n~/.tmux.conf\n# \u6642\u523b\u8868\u793a\u306e\u8a2d\u5b9a\nset-option -g status-right '#(timerx +\"%a %H:%M\")'\n\n# \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u30921\u79d2\u6bce\u306b\u63cf\u753b\u3057\u76f4\u3059\nset-option -g status-interval 1\n\n\n\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308c\u3070\uff0c1\u79d2\u3054\u3068\u306btimerx\u3092\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u3068\u3044\u3046\u611f\u3058\u3067\u3059\uff0etimerx\u306fSWITCH\u306e\u5024\u304cDATE\u306e\u5834\u5408\u306f\uff0cdate\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307e\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\uff0c\u6642\u523b\u8868\u793a\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f~/.tmux.conf\u5185\u306etimerx\u306e\u5f15\u6570\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\uff0e\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306ereattach-to-user-namespace osascript -e 'display notification \"Tea is ready\" with title \"Timer\" sound name \"\"'\u306f\uff0cMac\u306e\u901a\u77e5\u30bb\u30f3\u30bf\u30fc\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u7b87\u6240\u3067\u3059\u304c\uff0c\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u306b\u306fbrew install reattach-to-user-namespace\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff08\u53c2\u8003\uff09\ntimerx\u306fchmod u+x timerx\u306a\u3069\u3068\u3057\u3066\uff0c\u30d1\u30b9\u306e\u901a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u306b\u914d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\uff01\n\n\u3053\u308c\u3067\u7f8e\u5473\u3057\u3044\u30ab\u30c3\u30d7\u30e9\u30fc\u30e1\u30f3\u304c\u98df\u3079\u308c\u307e\u3059\u306d\uff01\n# \u3053\u3093\u306a\u65b9\u3078\n\u30bf\u30fc\u30df\u30ca\u30eb\u306b\u5f15\u304d\u3053\u3082\u3063\u3066\u4f5c\u696d\u3092\u3057\u3066\u3044\u3066\uff0c\u6c17\u3065\u3044\u305f\u3089\u304a\u6e6f\u3092\u5165\u308c\u305f\u30ab\u30c3\u30d7\u30e9\u30fc\u30e1\u30f3\u306e\u9eba\u304c\u4f38\u3073\u304d\u3063\u3066\u3057\u307e\u3063\u305f\uff0e\u7686\u3055\u3093\u3082\u3053\u3093\u306a\u7d4c\u9a13\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\uff0e\u643a\u5e2f\u306a\u3069\u306e\u30bf\u30a4\u30de\u30fc\u3092\u30bb\u30c3\u30c8\u3059\u308b\u306e\u3082\u624b\u3067\u3059\u304c\uff0c\u3069\u3046\u305b\u306a\u3089\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u884c\u3063\u3061\u3083\u3044\u305f\u3044\u3067\u3059\u3088\u306d\uff01\n\n\u3068\u3046\u3044\u3046\u4e8b\u3067\uff0c\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u52c9\u5f37\u304c\u3066\u3089\u3061\u3087\u3063\u3068\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\uff0e\u74b0\u5883\u306ftmux\u3092\u4f7f\u3063\u3066\u3044\u308b\u4e8b\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\uff0e\n\n# \u5b8c\u6210\u5f62\n\u666e\u6bb5\u306f\uff0c\u753b\u9762\u53f3\u4e0a\u306b\u6642\u523b\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u81ea\u7531\u306b\u6307\u5b9a\u3067\u304d\u307e\u3059\uff09\u304c\uff0c\n<img width=\"919\" alt=\"Screenshot 2016-05-03 11.32.28.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121993/4c65ae65-0d83-1192-b74e-886a1db6c48b.png\">\n`timerx 3`\u3068\u3059\u308b\u3068\uff0c\u6642\u523b\u306e\u90e8\u5206\u306b3\u5206\u306e\u30bf\u30a4\u30de\u30fc\u304c\u30bb\u30c3\u30c8\u3055\u308c\u30ab\u30a6\u30f3\u30c8\u30c0\u30a6\u30f3\u304c\u59cb\u307e\u308a\u307e\u3059\uff0e\n<img width=\"919\" alt=\"Screenshot 2016-05-03 11.35.56.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121993/fc699337-bf44-71f4-7521-b2a7956f8fd6.png\">\n\u6642\u9593\u306b\u306a\u308b\u3068\u5143\u306e\u6642\u523b\u8868\u793a\u306b\u623b\u308a\uff0c\n<img width=\"919\" alt=\"Screenshot 2016-05-03 11.40.07.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121993/5d56f7e9-0e3c-61cd-68f3-a9c1f4c0a7c6.png\">\n\nMac\u306e\u5834\u5408\u306f\uff0c\u901a\u77e5\u30bb\u30f3\u30bf\u30fc\u304b\u3089\u304a\u77e5\u3089\u305b\u3057\u3066\u304f\u308c\u307e\u3059\uff0e\n\n<img width=\"335\" alt=\"Screenshot 2016-05-03 11.38.19.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/121993/59b816bf-f01e-9df2-098c-070525632fb5.png\">\n\n\u89aa\u5207\u3067\u3059\u306d\uff01\n\nLinux\u3067\u306f\uff0c`echo ^G`\u3067\u30d3\u30fc\u30d7\u97f3\u3092\u9cf4\u3089\u3059\u304b\uff0c[notify-send \u3092\u4f7f\u3063\u3066\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306b\u901a\u77e5\u3059\u308b](http://krakenbeal.blogspot.jp/2013/05/notify-send.html)\u306a\u3069\u306e\u65b9\u6cd5\u304c\u3042\u308a\u305d\u3046\u3067\u3059\uff0e\n\n# \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u306fMac\u7528\u3067\u3059\u304c\uff0cLinux\u3067\u3082\u307b\u307c\u540c\u3058\u611f\u3058\u3067\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\uff0e\n\n```sh:timerx\n#!/bin/bash\n\nfunction timer_on() {\n  let seconds=$1*60 # minutes -> seconds\n  local last=`expr $(date +%s) + $seconds`\n  echo -e \"SWITCH: TIMER\\nLAST: $last\" > $TMPFILE\n}\nfunction timer_off() { init; }\nfunction init() { echo -e \"SWITCH: DATE\\nLAST:\\n\" > $TMPFILE; }\nfunction get() { cat $TMPFILE | awk '/'$1'/ {print $2}'; } # $1: SWITCH or LAST\nfunction countdown() {\n  let diff=$(get \"LAST\")-$(date +%s)\n  if [ $diff -lt 0 ]; then\n    timer_off\n    reattach-to-user-namespace osascript -e 'display notification \"Tea is ready\" with title \"Timer\" sound name \"\"'\n    exit\n  fi\n  # let hour=\"$diff / 3600\"\n  # let diff=\"$diff % 3600\"\n  let minute=\"$diff / 60\"\n  let second=\"$diff % 60\"\n  # printf \"%02d:%02d:%02d\" $hour $minute $second\n  printf \"%02d:%02d\" $minute $second\n}\n\n# temporary file\nTMPFILE=\"${TMPDIR}timerx_tmp\"\n! [ -e $TMPFILE ] && init\n\n# check argument\n# --------------\ncase \"$1\" in\n  \"-h\")\n    echo \"usage: timerx [minutes|--off]\" 1>&2\n    exit\n    ;;\n  \"--off\")\n    timer_off\n    exit\n    ;;\n  -*|--*)\n    echo \"$1: unknown option\" 1>&2\n    exit 1\n    ;;\nesac\nexpr \"$1\" + 1 >/dev/null 2>&1 # check if $1 is numeric or not\nif [ $? -lt 2 ]; then\n  timer_on $1\n  exit\nfi\n\n# check switch\n# ------------\nSWITCH=$(get \"SWITCH\")\nif [ $SWITCH = \"DATE\" ]; then\n  echo $(date \"$@\")\nelif [ $SWITCH = \"TIMER\" ]; then\n  countdown\nfi\n```\n\n\u6642\u523b\u60c5\u5831\u306a\u3069\u3092\u4fdd\u6301\u3059\u308b\u305f\u3081\u306b\uff0c`${TMPDIR}timerx_tmp`\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\uff08\u3053\u306e\u65b9\u6cd5\u304c\u3044\u3044\u306e\u304b\u826f\u304f\u5206\u304b\u3089\u306a\u3044\u306e\u3067\uff0c\u4ed6\u306b\u826f\u3044\u65b9\u6cd5\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u304f\u3060\u3055\u3044\uff09\uff0e\u4fdd\u5b58\u5185\u5bb9\u306f\n\n```:${TMPDIR}timerx_tmp\nSWITCH: DATE\nLAST:\n```\n\n\u3068\u3044\u3046\u3088\u3046\u306a\u611f\u3058\u3067\u3059\uff0e\u30bf\u30a4\u30de\u30fc\u304c\u30bb\u30c3\u30c8\u3055\u308c\u305f\u5834\u5408\u306f\uff0c`DATE`\u304c`TIMER`\u306b\u306a\u308a\uff0c`LAST`\u306e\u7b87\u6240\u306b\u5024\u304c\u4fdd\u6301\u3055\u308c\u307e\u3059\uff0e\u3042\u3068\u306f\uff0c`~/.tmux.conf`\u3092\n\n```sh:~/.tmux.conf\n# \u6642\u523b\u8868\u793a\u306e\u8a2d\u5b9a\nset-option -g status-right '#(timerx +\"%a %H:%M\")'\n\n# \u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u30921\u79d2\u6bce\u306b\u63cf\u753b\u3057\u76f4\u3059\nset-option -g status-interval 1\n```\n\n\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308c\u3070\uff0c1\u79d2\u3054\u3068\u306b`timerx`\u3092\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u3068\u3044\u3046\u611f\u3058\u3067\u3059\uff0e`timerx`\u306f`SWITCH`\u306e\u5024\u304c`DATE`\u306e\u5834\u5408\u306f\uff0c`date`\u30b3\u30de\u30f3\u30c9\u3092\u305d\u306e\u307e\u307e\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\uff0c\u6642\u523b\u8868\u793a\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f`~/.tmux.conf`\u5185\u306e`timerx`\u306e\u5f15\u6570\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\uff0e\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e`reattach-to-user-namespace osascript -e 'display notification \"Tea is ready\" with title \"Timer\" sound name \"\"'`\u306f\uff0cMac\u306e\u901a\u77e5\u30bb\u30f3\u30bf\u30fc\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u7b87\u6240\u3067\u3059\u304c\uff0c\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u306b\u306f`brew install reattach-to-user-namespace`\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff08[\u53c2\u8003](http://apple.stackexchange.com/questions/174779/unable-to-run-display-notification-using-osascript-in-a-tmux-session)\uff09\n\n`timerx`\u306f`chmod u+x timerx`\u306a\u3069\u3068\u3057\u3066\uff0c\u30d1\u30b9\u306e\u901a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u306b\u914d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\uff01\n\n# \u3053\u308c\u3067\u7f8e\u5473\u3057\u3044\u30ab\u30c3\u30d7\u30e9\u30fc\u30e1\u30f3\u304c\u98df\u3079\u308c\u307e\u3059\u306d\uff01\n", "tags": ["tmux", "Zsh", "Bash", "Mac", "Linux"]}