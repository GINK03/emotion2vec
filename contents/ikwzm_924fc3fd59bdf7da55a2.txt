{"context": "\n\n\u306f\u3058\u3081\u306b\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)\u306e\u7d9a\u304d\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001\u524d\u56de\u4f5c\u3063\u305f Accumulator \u3068 MessagePack-RPC \u30b5\u30fc\u30d0\u30fc\u3092 IP \u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3059\u308b\u624b\u9806\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u958b\u767a\u30c4\u30fc\u30eb\n\nXilinx\u793e Vivado 2015.3\n\n\n\u624b\u98061\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u5404submodule \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\nshell% git clone git://github.com/ikwzm/msgpack-vhdl-examples.git\nshell% cd msgpack-vhdl-examples\nshell% git submodule init\nshell% git submodule update\nshell% cd examples/accumulator/fpga/xilinx/ip\n\n\n\u624b\u98062\n\u6700\u521d\u306e\u96e3\u95a2\u306f\u3001\u3042\u3061\u3053\u3061\u306b\u5206\u6563\u3055\u308c\u305f VHDL \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u3069\u306e\u3088\u3046\u306b\u304b\u304d\u96c6\u3081\u308b\u304b\u3067\u3059\u3002\u7279\u306b\u3001MessagePack for VHDL \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u7d50\u69cb\u30d5\u30a1\u30a4\u30eb\u6570\u304c\u591a\u304f\u3001\u30a2\u30ca\u30e9\u30a4\u30ba\u3059\u308b\u9806\u756a\u306b\u5236\u7d04\u304c\u3042\u308a\u307e\u3059\u3002\nmsgpack-vhdl-examples.git \u306b\u306f\u3001\u3042\u3089\u304b\u3058\u3081 examples/accumulator/fpga/xilinx/ip \u306b MessagePack for VHDL \u306e\u5fc5\u8981\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u307f\u3092\u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f msgpack.vhd \u3068\u3001\u305d\u308c\u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u3092 Vivado \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb add_sources.tcl \u304c\u7528\u610f\u3057\u3066\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u624b\u98063\u306b\u98db\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\u3053\u3053\u3067\u306f msgpack.vhd \u3068 add_souces.tcl \u3092\u751f\u6210\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u6b21\u306e\u3088\u3046\u306a yaml \u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\nadd_souces.yml\n- Library:\n    Name     :  msgpack\n    Archive  :  msgpack.vhd\n    PathList :  \n        - \"../../../../../msgpack-vhdl/src/msgpack/\"\n\n- Library:\n    Name     :  work\n    Print    :  true\n    Format   :  \"add_vhdl_file sources_1 #{library_name} #{file_name}\"\n    PathList :  \n        - \"../../../src/main/vhdl/\"\n        - \"../../../src/main/synthesijer/Accumulator.vhd\"\n    Top      :  [\"Accumulator_Server\"]\n\n\n\u6b21\u306b ../../../../../PipeWork/tools/vhdl-archiver.rb \u3092\u4f7f\u3063\u3066\u3001msgpack.vhd \u3068 add_sources.tcl \u3092\u4f5c\u308a\u307e\u3059\u3002\nshell% ../../../../../PipeWork/tools/vhdl-archiver.rb --config add_sources.yml > add_sources.tcl\n\n\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3088\u308a\u3001../../../../../mstpack-vhdl/src/msgpack \u304b\u3089\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3092\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb msgpack.vhd \u306b\u307e\u3068\u3081\u307e\u3059\u3002\nadd_sources.tcl \u306f\u6b21\u306e\u3088\u3046\u306a Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\nadd_sources.tcl\nadd_vhdl_file sources_1 WORK ../../../src/main/synthesijer/Accumulator.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/add_interface.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/get_interface.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/set_interface.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/accumulator_server.vhd\n\n\n\u3053\u308c\u3067\u3001IP \u306b\u5fc5\u8981\u306a\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u304c\u63c3\u3044\u307e\u3057\u305f\u3002\n\n\u624b\u98063\nVivado \u306e IP-Packager \u3092\u8d77\u52d5\u3057\u3066 IP \u3092\u4f5c\u308a\u307e\u3059\u3002\n\u3044\u3061\u3044\u3061 GUI \u3067\u30dc\u30bf\u30f3\u3092\u30da\u30c1\u30da\u30c1\u3084\u308b\u306e\u306f\u975e\u52b9\u7387\u306a\u306e\u3067\u3001Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\ncreate_ip.tcl\n#\n# create_ip.tcl  Tcl script for create project and generate IP\n#\nset ip_name                 \"accumulator_server\"\nset ip_vendor_name          \"ikwzm\"\nset ip_library_name         \"msgpack\"\nset ip_root_directory       [file join [file dirname [info script]] $ip_name]\nset project_name            \"accumulator_server\"\nset project_directory       [file join [file dirname [info script]] \"work\"]\nset device_parts            \"xc7z010clg400-1\"\n#\n# Create project\n#\ncreate_project -force $project_name $project_directory\n#\n# Set project properties\n#\nset_property \"part\"               $device_parts    [get_projects $project_name]\nset_property \"default_lib\"        \"xil_defaultlib\" [get_projects $project_name]\nset_property \"simulator_language\" \"Mixed\"          [get_projects $project_name]\nset_property \"target_language\"    \"VHDL\"           [get_projects $project_name]\n#\n# Create fileset \"sources_1\"\n#\nif {[string equal [get_filesets -quiet sources_1] \"\"]} {\n    create_fileset -srcset sources_1\n}\n#\n# Create fileset \"constrs_1\"\n#\nif {[string equal [get_filesets -quiet constrs_1] \"\"]} {\n    create_fileset -constrset constrs_1\n}\n#\n# Create fileset \"sim_1\"\n#\nif {[string equal [get_filesets -quiet sim_1] \"\"]} {\n    create_fileset -simset sim_1\n}\n#\n# Create run \"synth_1\" and set property\n#\nif {[string equal [get_runs -quiet synth_1] \"\"]} {\n    create_run -name synth_1 -part $device_parts -flow \"Vivado Synthesis 2014\" -strategy \"Vivado Synthesis Defaults\" -constrset constrs_1\n} else {\n    set_property strategy \"Vivado Synthesis Defaults\" [get_runs synth_1]\n    set_property strategy \"Flow_PerfOptimized_High\"   [get_runs synth_1]\n}\ncurrent_run -synthesis [get_runs synth_1]\n#\n# Create run \"impl_1\" and set property\n#\nif {[string equal [get_runs -quiet impl_1] \"\"]} {\n    create_run -name impl_1 -part $device_parts -flow \"Vivado Implementation 2014\" -strategy \"Vivado Implementation Defaults\" -constrset constrs_1 -parent_run synth_1\n} else {\n    set_property strategy \"Vivado Implementation Defaults\" [get_runs impl_1]\n    set_property strategy \"Performance_Explore\"            [get_runs impl_1]\n}\ncurrent_run -implementation [get_runs impl_1]\n#\n# Add files\n#\nproc add_vhdl_file {fileset library_name file_name} {\n    set file     [file normalize $file_name]\n    set fileset  [get_filesets   $fileset  ] \n    set file_obj [import_files -norecurse -fileset $fileset $file]\n    set_property \"file_type\" \"VHDL\"        $file_obj\n    set_property \"library\"   $library_name $file_obj\n}\nadd_vhdl_file sources_1 MsgPack msgpack.vhd\nsource \"add_sources.tcl\"\n#\n# Create IP-Package project\n#\nipx::package_project -root_dir $ip_root_directory -vendor $ip_vendor_name -library $ip_library_name -taxonomy /UserIP -generated_files -import_files -force\n#\n# Infer Bus Interfaces\n#\nipx::infer_bus_interfaces xilinx.com:interface:aximm_rtl:1.0 [ipx::current_core]\nipx::infer_bus_interfaces xilinx.com:interface:axis_rtl:1.0  [ipx::current_core]\n#\n# Set Supported Families\n#\nset_property supported_families {zynq Production virtex7 Production qvirtex7 Production kintex7 Production kintex7l Production qkintex7 Production qkintex7l Production artix7 Production artix7l Production aartix7 Production qartix7 Production zynq Production qzynq Production azynq Production} [ipx::current_core]\n#\n# Set Core Version\n#\nset_property core_revision 1 [ipx::current_core]\n#\n# Generate files\n#\nipx::create_xgui_files       [ipx::current_core]\nipx::update_checksums        [ipx::current_core]\nipx::save_core               [ipx::current_core]\n#\n# Close and Done.\n#\nclose_project\n\n\n\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u809d\u306f\n\nadd_vhdl_file\u3000\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3067 VHDL\u30d5\u30a1\u30a4\u30eb\u3092\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a2d\u5b9a\u3057\u3064\u3064import\u3057\u3066\u3044\u308b\nipx::package_project \u3067 IP-Package\u7528\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\nipx::infer_bus_interfaces \u3067 Interface \u3092\u63a8\u5b9a\u3055\u305b\u3066\u3044\u308b\n\n\u3053\u3068\u3067\u3059\u3002\u7279\u306b\u4eca\u56de\u306e IP \u3067\u306f MessagePack \u306e\u5165\u51fa\u529b\u306b AXI4-Stream \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067 Vivado \u304c\u81ea\u52d5\u7684\u306b Interface \u3092\u63a8\u5b9a\u3057\u3066\u5b9a\u7fa9\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u5927\u5909\u697d\u3067\u3059\u3002\n\u3053\u306e create_ip.tcl \u3092\u6b21\u306e\u3088\u3046\u306b Vivado \u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nshell% vivado -mode batch -source create_ip.tcl\n\n\u307e\u305f\u306f Vivado GUI \u3092\u8d77\u52d5\u3057\u3066\u3001Tools > Run Tcl Script... \u304b\u3089 create_ip.tcl \u3092\u9078\u629e\u3002\n\u3053\u308c\u3067 ./examples/accumulator/fpga/xilinx/ip/accumulator_server \u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n\u53c2\u7167\nMessagePack for VHDL (https://github.com/ikwzm/msgpack-vhdl)\nMessagePack for VHDL Examples (https://github.com/ikwzm/msgpack-vhdl-examples)\nMessagePack-RPC\u3092\u4f7f\u3063\u3066FPGA\u3092\u5236\u5fa1\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(ZYNQ\u8ad6\u7406\u5408\u6210\u7de8)\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(MessagePack-Ruby\u7de8)\nSynthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u30fc\u7de8)\n##\u306f\u3058\u3081\u306b\n\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)](http://qiita.com/ikwzm/items/6cb623b057a687ff4a8e)\u306e\u7d9a\u304d\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001[\u524d\u56de](http://qiita.com/ikwzm/items/6cb623b057a687ff4a8e)\u4f5c\u3063\u305f Accumulator \u3068 MessagePack-RPC \u30b5\u30fc\u30d0\u30fc\u3092 IP \u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3059\u308b\u624b\u9806\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n##\u958b\u767a\u30c4\u30fc\u30eb\n\n - Xilinx\u793e Vivado 2015.3\n\n##\u624b\u98061\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u5404submodule \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n````\nshell% git clone git://github.com/ikwzm/msgpack-vhdl-examples.git\nshell% cd msgpack-vhdl-examples\nshell% git submodule init\nshell% git submodule update\nshell% cd examples/accumulator/fpga/xilinx/ip\n````\n\n##\u624b\u98062\n\n\u6700\u521d\u306e\u96e3\u95a2\u306f\u3001\u3042\u3061\u3053\u3061\u306b\u5206\u6563\u3055\u308c\u305f VHDL \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u3069\u306e\u3088\u3046\u306b\u304b\u304d\u96c6\u3081\u308b\u304b\u3067\u3059\u3002\u7279\u306b\u3001MessagePack for VHDL \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u7d50\u69cb\u30d5\u30a1\u30a4\u30eb\u6570\u304c\u591a\u304f\u3001\u30a2\u30ca\u30e9\u30a4\u30ba\u3059\u308b\u9806\u756a\u306b\u5236\u7d04\u304c\u3042\u308a\u307e\u3059\u3002\n\nmsgpack-vhdl-examples.git \u306b\u306f\u3001\u3042\u3089\u304b\u3058\u3081 examples/accumulator/fpga/xilinx/ip \u306b MessagePack for VHDL \u306e\u5fc5\u8981\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u307f\u3092\u30a2\u30fc\u30ab\u30a4\u30d6\u3057\u305f msgpack.vhd \u3068\u3001\u305d\u308c\u4ee5\u5916\u306e\u30d5\u30a1\u30a4\u30eb\u3092 Vivado \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u8aad\u307f\u8fbc\u3080\u305f\u3081\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb add_sources.tcl \u304c\u7528\u610f\u3057\u3066\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u624b\u98063\u306b\u98db\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\n\u3053\u3053\u3067\u306f msgpack.vhd \u3068 add_souces.tcl \u3092\u751f\u6210\u3059\u308b\u65b9\u6cd5\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u6b21\u306e\u3088\u3046\u306a yaml \u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n````YAML:add_souces.yml\n- Library:\n    Name     :  msgpack\n    Archive  :  msgpack.vhd\n    PathList :  \n        - \"../../../../../msgpack-vhdl/src/msgpack/\"\n\n- Library:\n    Name     :  work\n    Print    :  true\n    Format   :  \"add_vhdl_file sources_1 #{library_name} #{file_name}\"\n    PathList :  \n        - \"../../../src/main/vhdl/\"\n        - \"../../../src/main/synthesijer/Accumulator.vhd\"\n    Top      :  [\"Accumulator_Server\"]\n````\n\n\u6b21\u306b ../../../../../PipeWork/tools/vhdl-archiver.rb \u3092\u4f7f\u3063\u3066\u3001msgpack.vhd \u3068 add_sources.tcl \u3092\u4f5c\u308a\u307e\u3059\u3002\n\n````\nshell% ../../../../../PipeWork/tools/vhdl-archiver.rb --config add_sources.yml > add_sources.tcl\n````\n\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3088\u308a\u3001../../../../../mstpack-vhdl/src/msgpack \u304b\u3089\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3092\u4e00\u3064\u306e\u30d5\u30a1\u30a4\u30eb msgpack.vhd \u306b\u307e\u3068\u3081\u307e\u3059\u3002\nadd_sources.tcl \u306f\u6b21\u306e\u3088\u3046\u306a Tcl \u30b9\u30af\u30ea\u30d7\u30c8\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n````Tcl:add_sources.tcl\nadd_vhdl_file sources_1 WORK ../../../src/main/synthesijer/Accumulator.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/add_interface.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/get_interface.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/set_interface.vhd\nadd_vhdl_file sources_1 WORK ../../../src/main/vhdl/accumulator_server.vhd\n````\n\n\u3053\u308c\u3067\u3001IP \u306b\u5fc5\u8981\u306a\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u304c\u63c3\u3044\u307e\u3057\u305f\u3002\n\n##\u624b\u98063\n\nVivado \u306e IP-Packager \u3092\u8d77\u52d5\u3057\u3066 IP \u3092\u4f5c\u308a\u307e\u3059\u3002\n\u3044\u3061\u3044\u3061 GUI \u3067\u30dc\u30bf\u30f3\u3092\u30da\u30c1\u30da\u30c1\u3084\u308b\u306e\u306f\u975e\u52b9\u7387\u306a\u306e\u3067\u3001Tcl\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n````Tcl:create_ip.tcl\n#\n# create_ip.tcl  Tcl script for create project and generate IP\n#\nset ip_name                 \"accumulator_server\"\nset ip_vendor_name          \"ikwzm\"\nset ip_library_name         \"msgpack\"\nset ip_root_directory       [file join [file dirname [info script]] $ip_name]\nset project_name            \"accumulator_server\"\nset project_directory       [file join [file dirname [info script]] \"work\"]\nset device_parts            \"xc7z010clg400-1\"\n#\n# Create project\n#\ncreate_project -force $project_name $project_directory\n#\n# Set project properties\n#\nset_property \"part\"               $device_parts    [get_projects $project_name]\nset_property \"default_lib\"        \"xil_defaultlib\" [get_projects $project_name]\nset_property \"simulator_language\" \"Mixed\"          [get_projects $project_name]\nset_property \"target_language\"    \"VHDL\"           [get_projects $project_name]\n#\n# Create fileset \"sources_1\"\n#\nif {[string equal [get_filesets -quiet sources_1] \"\"]} {\n    create_fileset -srcset sources_1\n}\n#\n# Create fileset \"constrs_1\"\n#\nif {[string equal [get_filesets -quiet constrs_1] \"\"]} {\n    create_fileset -constrset constrs_1\n}\n#\n# Create fileset \"sim_1\"\n#\nif {[string equal [get_filesets -quiet sim_1] \"\"]} {\n    create_fileset -simset sim_1\n}\n#\n# Create run \"synth_1\" and set property\n#\nif {[string equal [get_runs -quiet synth_1] \"\"]} {\n    create_run -name synth_1 -part $device_parts -flow \"Vivado Synthesis 2014\" -strategy \"Vivado Synthesis Defaults\" -constrset constrs_1\n} else {\n    set_property strategy \"Vivado Synthesis Defaults\" [get_runs synth_1]\n    set_property strategy \"Flow_PerfOptimized_High\"   [get_runs synth_1]\n}\ncurrent_run -synthesis [get_runs synth_1]\n#\n# Create run \"impl_1\" and set property\n#\nif {[string equal [get_runs -quiet impl_1] \"\"]} {\n    create_run -name impl_1 -part $device_parts -flow \"Vivado Implementation 2014\" -strategy \"Vivado Implementation Defaults\" -constrset constrs_1 -parent_run synth_1\n} else {\n    set_property strategy \"Vivado Implementation Defaults\" [get_runs impl_1]\n    set_property strategy \"Performance_Explore\"            [get_runs impl_1]\n}\ncurrent_run -implementation [get_runs impl_1]\n#\n# Add files\n#\nproc add_vhdl_file {fileset library_name file_name} {\n    set file     [file normalize $file_name]\n    set fileset  [get_filesets   $fileset  ] \n    set file_obj [import_files -norecurse -fileset $fileset $file]\n    set_property \"file_type\" \"VHDL\"        $file_obj\n    set_property \"library\"   $library_name $file_obj\n}\nadd_vhdl_file sources_1 MsgPack msgpack.vhd\nsource \"add_sources.tcl\"\n#\n# Create IP-Package project\n#\nipx::package_project -root_dir $ip_root_directory -vendor $ip_vendor_name -library $ip_library_name -taxonomy /UserIP -generated_files -import_files -force\n#\n# Infer Bus Interfaces\n#\nipx::infer_bus_interfaces xilinx.com:interface:aximm_rtl:1.0 [ipx::current_core]\nipx::infer_bus_interfaces xilinx.com:interface:axis_rtl:1.0  [ipx::current_core]\n#\n# Set Supported Families\n#\nset_property supported_families {zynq Production virtex7 Production qvirtex7 Production kintex7 Production kintex7l Production qkintex7 Production qkintex7l Production artix7 Production artix7l Production aartix7 Production qartix7 Production zynq Production qzynq Production azynq Production} [ipx::current_core]\n#\n# Set Core Version\n#\nset_property core_revision 1 [ipx::current_core]\n#\n# Generate files\n#\nipx::create_xgui_files       [ipx::current_core]\nipx::update_checksums        [ipx::current_core]\nipx::save_core               [ipx::current_core]\n#\n# Close and Done.\n#\nclose_project\n````\n\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u809d\u306f\n\n - add_vhdl_file\u3000\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3067 VHDL\u30d5\u30a1\u30a4\u30eb\u3092\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8a2d\u5b9a\u3057\u3064\u3064import\u3057\u3066\u3044\u308b\n - ipx::package_project \u3067 IP-Package\u7528\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u308b\n - ipx::infer_bus_interfaces \u3067 Interface \u3092\u63a8\u5b9a\u3055\u305b\u3066\u3044\u308b\n\n\u3053\u3068\u3067\u3059\u3002\u7279\u306b\u4eca\u56de\u306e IP \u3067\u306f MessagePack \u306e\u5165\u51fa\u529b\u306b AXI4-Stream \u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067 Vivado \u304c\u81ea\u52d5\u7684\u306b Interface \u3092\u63a8\u5b9a\u3057\u3066\u5b9a\u7fa9\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u5927\u5909\u697d\u3067\u3059\u3002\n\n\u3053\u306e create_ip.tcl \u3092\u6b21\u306e\u3088\u3046\u306b Vivado \u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n````\nshell% vivado -mode batch -source create_ip.tcl\n````\n\n\u307e\u305f\u306f Vivado GUI \u3092\u8d77\u52d5\u3057\u3066\u3001Tools > Run Tcl Script... \u304b\u3089 create_ip.tcl \u3092\u9078\u629e\u3002\n\n\u3053\u308c\u3067 ./examples/accumulator/fpga/xilinx/ip/accumulator_server \u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n##\u53c2\u7167\n\n[MessagePack for VHDL (https://github.com/ikwzm/msgpack-vhdl)](https://github.com/ikwzm/msgpack-vhdl)\n[MessagePack for VHDL Examples (https://github.com/ikwzm/msgpack-vhdl-examples)](https://github.com/ikwzm/msgpack-vhdl-examples)\n[MessagePack-RPC\u3092\u4f7f\u3063\u3066FPGA\u3092\u5236\u5fa1](http://qiita.com/ikwzm/items/2644c6e50a7049c75d49)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u7de8)](http://qiita.com/ikwzm/items/6cb623b057a687ff4a8e)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(ZYNQ\u8ad6\u7406\u5408\u6210\u7de8)](http://qiita.com/ikwzm/items/0254f1d49602095b5cde)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(TTY\u30c9\u30e9\u30a4\u30d0\u7de8)](http://qiita.com/ikwzm/items/533b905f7d1eb2e6c4d5)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(MessagePack-Ruby\u7de8)](http://qiita.com/ikwzm/items/f742e2c9b5d9642d8857)\n[Synthesijer\u3067\u4f5c\u3063\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092MessagePack-RPC\u3067\u5236\u5fa1\u3059\u308b(\u30ea\u30e2\u30fc\u30c8\u30b5\u30fc\u30d0\u30fc\u7de8)](http://qiita.com/ikwzm/items/cfde888094c7c73f4ba6)\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "tags": ["MessagePack", "Synthesijer", "VHDL", "FPGA", "Vivado"]}