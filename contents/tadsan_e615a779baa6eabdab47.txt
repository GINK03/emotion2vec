{"context": "\u4eba\u9593\u306f\u7686\u8ab0\u3057\u3082\u5b9f\u884c\u6642\u306bSQL\u3092\u7d44\u307f\u7acb\u3066\u3066\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u51fa\u3059\u3053\u3068\u304c\u5927\u597d\u304d\u3060\u3002\u305d\u3057\u3066\u305d\u306e\u884c\u70ba\u306e\u5371\u967a\u3055\u3082\u308f\u304b\u3089\u306c\u307e\u307e\u4eba\u985e\u306f\u592a\u967d\u306b\u5411\u304b\u3063\u3066\u3086\u304f\u3002\n\u3042\u3068\u3053\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u3066\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u79c1\u304c\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u3058\u3083\u306a\u3044\u3067\u3059 \u30fe(\u3003\uff1e\uff1c)\uff89\uff9e\n\n\u306f\u3058\u3081\u306b\n\u307e\u3042\u843d\u3061\u7740\u3044\u3066\u3001\u53bb\u5e74\u306ePHP\u30ab\u30f3\u30d5\u30a1\u30ec\u30f3\u30b9\u306e\u5fb3\u4e38\u5148\u751f1\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u8aad\u3093\u3067\u307b\u3057\u3044\u3002\u3061\u306a\u307f\u306b\u79c1\u306f\u53bb\u5e74\u306ePHP\u30ab\u30f3\u30d5\u30a1\u30ec\u30f3\u30b9\u306f\u98a8\u90aa\u3067\u30c0\u30a6\u30f3\u3057\u3066\u305f\u306e\u3067\u884c\u3051\u306a\u304b\u3063\u305f\u3002Qiita\u306b\u306fSlideShare\u306e\u57cb\u3081\u8fbc\u307f\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u2193\u306e\u67a0\u306f\u305f\u3060\u306e\u753b\u50cf\u30ea\u30f3\u30af\u3060\u3002\n\n Phpcon2015  from Hiroshi Tokumaru \n\u300c\u3046\u3061\u306fO/R\u30de\u30c3\u30d1\u30fc\u3092\u4f7f\u3063\u3066\u308b\u3088\u300d\u3063\u3066\u3072\u3068\u306b\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306f\u304b\u3093\u3051\u3044\u306a\u3044\u3002\u305d\u3046\u3001\u4eba\u985e\u306fDoctrine\u306e\u3088\u3046\u306a\u53e1\u667a\u3092\u624b\u306b\u3057\u3066\u308b\u3002\u7d20\u76f4\u306b\u7d20\u6674\u3089\u3057\u3044MVC\u30e2\u30c7\u30eb\u3084DB\u30ec\u30a4\u30e4\u30fc\u3092\u6301\u3063\u305f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u9078\u3076\u3079\u304d\u3060\u3002\u79c1\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u7121\u8cac\u4efb\u306a\u767a\u8a00\u306f\u3067\u304d\u306a\u3044\u304c\u3001Laravel\u306e\u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u30fc\u3082\u306a\u304b\u306a\u304b\u4f7f\u3072\u52dd\u624b\u306f\u826f\u3055\u305d\u3046\u306b\u898b\u3048\u308b\u3002\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068 Doctrine (\u201cThe Model\u201d) | Symfony2\u65e5\u672c\u8a9e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nDatabase: Query Builder - Laravel - The PHP Framework For Web Artisans\n\n\nPHP\u3068DB/SQL\n\u305d\u308c\u3067\u3082\u4eba\u985e\u306f\u3001\u81ea\u5206\u306e\u624b\u3067SQL\u3092\u66f8\u304d\u305f\u304c\u308b\u3002PDO\u3092\u4f7f\u3063\u3066\u3002\u305d\u3093\u306a\u3068\u304d\u306f\u5fc5\u305a\u4ee5\u4e0b\u306e\u8a18\u4e8b\u306e\u5185\u5bb9\u3092\u982d\u306b\u53e9\u304d\u8fbc\u307e\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\nPHP\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u3068\u304d\u306e\u307e\u3068\u3081 - Qiita by @mpyw\n\n\n\u4e16\u306e\u4e2d\u306b\u306f\u300c\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3057\u3001\u30b7\u30f3\u30d7\u30eb\u306aPHP\u3067\u2026\u300d\u3068\u304a\u3063\u3057\u3083\u308b\u521d\u5fc3\u8005\u306e\u578b\u3082\u5c45\u308b\u304c\u3001\u305d\u3093\u306a\u3072\u3068\u306b\u306f\u300c\u6025\u304c\u3070\u56de\u308c\u300d\u3068\u306e\u540d\u305b\u308a\u3075\u3092\u8d08\u308a\u305f\u3044\u3002\u305f\u3076\u3093\u6709\u540d\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u4e57\u3063\u305f\u65b9\u304c\u5b89\u5168\u3060\u30882\u3002\n\u3042\u3001PDO(PHP Data Objects)\u3092\u4f7f\u3063\u3066\u306a\u3044\u3072\u3068\u306f\u3001\u3053\u308c\u4ee5\u4e0a\u3053\u306e\u8a18\u4e8b\u3092\u8aad\u3080\u610f\u5473\u306f\u3042\u3093\u307e\u308a\u306a\u3044\u3067\u3059\u3002\n\n\nPDO\u306e\u3044\u3044\u3068\u3053\u308d\n\u6587\u5b57\u5217\u3068\u304b\u3092\u3044\u3044\u611f\u3058\u306b\u30a8\u30b9\u30b1\u30fc\u30d7\u3057\u3066\u304f\u308c\u308b\u3068\u3053\u308d\u3002\n$stmt->bindValue(':user', $user, \\PDO::PARAM_STR);\n\n\nPDO\u306e\u3060\u3081\u306a\u3068\u3053\u308d\n\u53ef\u5909\u500b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5f31\u3059\u304e\u308b\u2026 \u3064\u307e\u308a\u3001IN\u4fee\u98fe\u5b50\u3002\nSELECT * FROM `users` WHERE `id` IN (123, 343, 893, 114, 514)\n\n\u3053\u306e\u5f62\u5f0f\u3092PDO\u3067\u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u306b\u57cb\u3081\u8fbc\u3080\u65b9\u6cd5\u306f\u5f53\u7136\u3042\u308b\u306e\u3060\u3051\u308c\u3069\u3001\u3053\u3053\u3067\u306f\u7d39\u4ecb\u3057\u306a\u3044\u3002\n\nTetoSQL\n\nBaguettePHP/TetoSQL\nzonuexe/tetosql - Packagist\n\nPackagist\u306b\u767b\u9332\u6e08\u307f\u306a\u306e\u3067\u3001Composer\u5c0e\u5165\u6e08\u307f\u306e\u74b0\u5883\u3067composer require zonuexe/tetosql\u3092\u5b9f\u884c\u3059\u308c\u3070\u5c0e\u5165\u53ef\u80fd\u3002\n\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306fSQL\u306b\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u5024\u306e\u5b9f\u884c\u6642\u578b\u691c\u67fb\u3092\u884c\u3063\u305f\u4e0a\u3067PDO\u306e\u6a5f\u80fd\u3092\u30e9\u30c3\u30d7\u3059\u308b\u3042\u305f\u308a\u304c\u7279\u5fb4\u3067\u3001SQL\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u8106\u5f31\u6027\u306b\u4e00\u5b9a\u306e\u52b9\u679c\u306f\u3042\u308b\u3060\u308d\u3046\u3002\u914d\u5217\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067IN\u4fee\u98fe\u5b50\u3082\u554f\u984c\u306a\u304f\u5229\u7528\u3067\u304d\u308b\u3002\n\u5fa1\u8a17\u306f\u3044\u3044\u306e\u3067\u5229\u7528\u4f8b\u3092\u898b\u305b\u308b\u3002\n<?php\nnamespace MyApp;\nuse Teto\\SQL;\n\nconst find = '\n SELECT * FROM `users`\n WHERE `status` IN (:statuses@int[]) \n LIMIT :offset@int, :limit@int\n';\n$conn = new \\PDO('sqlite:/tmp/db.sq3', null, null, [PDO::ATTR_PERSISTENT => true]);\n$data = Query::execute($conn, find, [\n    ':statuses' => [1, 3],\n    ':offset'   => 60,\n    ':limit'    => 30,\n])->fetch(\\PDO::FETCH_ASSOC);\n\n\u304a\u3066\u304c\u308b\u3067\u3059\u306d\u3002\u696d\u52d9\u3067\u306f\u57fa\u672c\u7684\u306bMySQL\u3092\u4f7f\u3063\u3066\u308b\u304c\u3001\u304a\u305d\u3089\u304fSQLite\u306a\u3069\u306eDB\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3060\u308d\u3046\u3002\n\n\u5bfe\u8c61DB\n\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3082\u3068\u3082\u3068MySQL\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u66f8\u304b\u308c\u305f\u304c\u3001PDO\u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308bDB\u3067\u3042\u308c\u3070\u304a\u3088\u305d\u52d5\u4f5c\u3059\u308b\u3060\u308d\u3046\u3002\u305f\u3060\u3057\u3001\u5f8c\u8ff0\u3059\u308bINT\u306e\u7bc4\u56f2\u306b\u3088\u308a\u610f\u56f3\u3057\u306a\u3044\u52d5\u4f5c\u3092\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3002\n\nSQL\u6587\n\u73fe\u5728\u306e\u4ed5\u69d8\u3067\u306f\u3001TetoSQL\u304c\u53d7\u3051\u5165\u308c\u308bSQL\u6587\u306f\u3059\u3079\u3066\u6539\u884c\u30b3\u30fc\u30c9\u304cLF\u3067\u3042\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3001\u3053\u308c\u3092\u3059\u3079\u3066\u53d6\u308a\u9664\u304f\u3002\u5909\u6570\u304c\u4ee3\u5165\u3055\u308c\u308b\u524d\u306b\u51e6\u7406\u3059\u308b\u305f\u3081\u3001\u5165\u529b\u3059\u308b\u5024\u304b\u3089\u6539\u884c\u30b3\u30fc\u30c9\u304c\u53d6\u308a\u9664\u304b\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3002\u3053\u306e\u4ed5\u69d8\u306f\u8981\u671b\u304c\u3042\u308c\u3070\u5c06\u6765\u7684\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u3046\u308b\u304c\u3001\u5f37\u3044\u5e0c\u671b\u304c\u306a\u3051\u308c\u3070\u7279\u306b\u5909\u66f4\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3060\u308d\u3046\u3002\n\u5ff5\u306e\u305f\u3081\u306b\u65ad\u3063\u3066\u304a\u304f\u304c\u3001\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306fSQL\u306e\u69cb\u6587\u306b\u3064\u3044\u3066\u5e72\u6e09\u3057\u306a\u3044\u3002\u5b9f\u884c\u7d50\u679c\u304c\u59a5\u5f53\u306aSQL\u6587\u306b\u306a\u308b\u3053\u3068\u306f\u4fdd\u969c\u3057\u306a\u3044\u3002\u6587\u5b57\u5217\u306e\u30af\u30aa\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u306fPDO::quote()\u306e\u4ed5\u7d44\u307f\u306b\u3088\u3063\u3066\u5404SQL\u30c9\u30e9\u30a4\u30d0\u304c\u3044\u3044\u611f\u3058\u306b\u3057\u3066\u304f\u308c\u308b\u3060\u308d\u3046\u3002\u305f\u3076\u3093\u3002\n\n\u5909\u6570\nTetoSQL\u306f\u300cSQL\u300d\u3068\u540d\u306f\u3064\u304f\u304c\u3001\u5b9f\u969b\u306f\u305f\u3060\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308b\u3002SQL\u306e\u69cb\u6587\u306e\u59a5\u5f53\u6027\u306b\u3064\u3044\u3066\u306f\u4e00\u5207\u4fdd\u969c\u3057\u306a\u3044\u3002\u5909\u6570\u540d\u306f:name\u306e\u3088\u3046\u306b\u3001\u304b\u306a\u3089\u305a:\u304c\u524d\u7f6e\u3055\u308c\u308b\u3002\u307e\u305f\u3001SQL\u6587\u306e\u4e2d\u3067\u306f:name@string\u306e\u3088\u3046\u306b\u578b\u304c\u660e\u793a\u3055\u308c\u308b\u3002\n\u5909\u6570\u306fSQL\u6587\u4e2d\u3067\u8907\u6570\u56de\u5c55\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u3053\u306e\u4ed5\u69d8\u306f\u3001\u305f\u3068\u3078\u3070MySQL\u306eINSERT \u301c ON DUPLICATE KEY UPDATE\u306a\u3069\u306b\u5229\u7528\u3067\u304d\u308b\u3002\n\n\u578b\nTetoSQL\u306b\u306f\u578b\u306e\u6982\u5ff5\u304c\u3042\u308b\u3002\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u5024\u306f\u5fc5\u305a\u578b\u3092\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\n@int: -9223372036854775808\u304b\u30899223372036854775807\u306e\u7bc4\u56f2\u306e\u6574\u6570\u5024\n\n@string: \u6587\u5b57\u5217\n\n@int[]: \u8907\u6570\u306e@int\u5024\n\n@string[]: \u8907\u6570\u306e@string\u5024\n\n@ascdesc: ASC\u3068DESC (ORDER BY\u306e\u6607\u9806/\u964d\u9806)\n\nint\u306f\u3001\u3044\u306f\u3086\u308b\u7b26\u53f7\u4ed8\u304dBIGINT\u3068\u4e00\u81f4\u3059\u308b\u3002\u307e\u305f\u300164bit\u74b0\u5883\u306b\u304a\u3051\u308bPHP_INT_MAX, PHP_INT_MIN\u306e\u7bc4\u56f2\u3068\u3082\u4e00\u81f4\u3059\u308b\u3002\n[]\u304c\u4ed8\u3044\u305f\u578b\u8868\u8a18\u306f,\u3067\u533a\u5207\u3063\u3066\u5c55\u958b\u3055\u308c\u308b\u3002\u3053\u306e\u578b\u8868\u8a18\u304c\u671f\u5f85\u3059\u308b\u306e\u306f\u5358\u7d14\u306a\u30ea\u30b9\u30c8\u3067\u3042\u308a\u3001\u3044\u306f\u3086\u308b\u9023\u60f3\u914d\u5217\u3092\u671f\u5f85\u3057\u306a\u3044\u3002\u5178\u578b\u7684\u306a\u5229\u7528\u4f8b\u306fWHERE \u301c IN\u3067\u3042\u308b\u3002\n\nPDO\nTetoSQL\u306fPDO\u307e\u305f\u306f\u3001PDO\u3068\u540c\u3058\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6301\u3064\u30af\u30e9\u30b9\u3092\u53d7\u3051\u53d6\u308b\u3002PDO\u30af\u30e9\u30b9\u3092\u72ec\u81ea\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306bPDOInterface\u3092\u7528\u610f\u3057\u305f\u304c\u3001\u30bf\u30a4\u30d7\u30d2\u30f3\u30c8\u306f\u6307\u5b9a\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001PDO\u3068\u540c\u69d8\u306e\u52d5\u4f5c\u3092\u3059\u308b\u6700\u4f4e\u9650\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308c\u3070\u554f\u984c\u306a\u3044\u3060\u308d\u3046\u3002\nPDOStatement\u30af\u30e9\u30b9\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u3067\u3001PDOStatement\u3063\u307d\u3044\u632f\u821e\u3092\u3059\u308b\u306a\u3089\u3070\u52d5\u4f5c\u306f\u671f\u5f85\u3067\u304d\u308b\u3002PDOStatementInterface\u3082\u7528\u610f\u3057\u305f\u304c\u3001\u7279\u306b\u5229\u7528\u306f\u5fc5\u8981\u306a\u3044(\u73fe\u5728\u306e\u3068\u3053\u308d)\u3002\n\n\u5b9f\u7528\u4f8b\n\u30a4\u30f3\u30b9\u30d1\u30a4\u30e4\u3055\u308c\u3066\u63b2\u793a\u677f\u3092\u4f5c\u308a\u305f\u304f\u306a\u3063\u305f(1)\u30b7\u30ea\u30fc\u30ba\u3068\u304b\u3067\u4f7f\u3063\u3066\u307e\u3059\u2026 \u304c\u3001\u6700\u8fd1\u5168\u7136\u66f4\u65b0\u3067\u304d\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u305d\u308d\u305d\u308d\u518d\u958b\u3059\u308b\u3088 \u30fe(\u3003\uff1e\uff1c)\uff89\uff9e\u2606\n\n\u672a\u6765\n\u79c1\u3001\u5b9f\u306fO/R\u30de\u30c3\u30d1\u30fc\u3063\u3066\u3057\u3063\u304f\u308a\u3053\u306a\u3044\u3093\u3067\u3059\u2026 \u3063\u3066\u611f\u3058\u306f\u3042\u308b\u306e\u3067\u3001\u305d\u308c\u306a\u308a\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3068\u304b\u6a5f\u80fd\u8ffd\u52a0\u3068\u304b\u3057\u3066\u304f\u6c17\u304c\u3057\u307e\u3059\u3002\uff77\uff76\uff9e\uff91\uff72\uff80\uff97\uff88\u2026\n\n\u811a\u6ce8\n\n\n\n\n\u300c\u5fb3\u4e38\u672c\u300d\u306e\u4f5c\u8005\u3068\u3057\u3066\u6709\u540d\u306a\u578b\u3067\u3059\u00a0\u21a9\n\n\n\u79c1\u306f\u300c\u65e2\u5b58\u306eWAF\u3063\u3066\u3057\u3063\u304f\u308a\u3053\u306a\u3044\u3093\u3067\u3059\u2026\u300d\u3068\u8a00\u3063\u3066\u8a2d\u8a08\u3092\u59cb\u3081\u3066\u3057\u307e\u3063\u305f\u3051\u3069\u00a0\u21a9\n\n\n\n\u4eba\u9593\u306f\u7686\u8ab0\u3057\u3082\u5b9f\u884c\u6642\u306bSQL\u3092\u7d44\u307f\u7acb\u3066\u3066\u30c7\u30fc\u30bf\u3092\u53d6\u308a\u51fa\u3059\u3053\u3068\u304c\u5927\u597d\u304d\u3060\u3002\u305d\u3057\u3066\u305d\u306e\u884c\u70ba\u306e\u5371\u967a\u3055\u3082\u308f\u304b\u3089\u306c\u307e\u307e\u4eba\u985e\u306f\u592a\u967d\u306b\u5411\u304b\u3063\u3066\u3086\u304f\u3002\n\n\u3042\u3068\u3053\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u3066\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u79c1\u304c\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u3058\u3083\u306a\u3044\u3067\u3059 \u30fe(\u3003\uff1e\uff1c)\uff89\uff9e\n\n## \u306f\u3058\u3081\u306b\n\n\u307e\u3042\u843d\u3061\u7740\u3044\u3066\u3001\u53bb\u5e74\u306ePHP\u30ab\u30f3\u30d5\u30a1\u30ec\u30f3\u30b9\u306e\u5fb3\u4e38\u5148\u751f[^1]\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u8aad\u3093\u3067\u307b\u3057\u3044\u3002\u3061\u306a\u307f\u306b\u79c1\u306f\u53bb\u5e74\u306ePHP\u30ab\u30f3\u30d5\u30a1\u30ec\u30f3\u30b9\u306f\u98a8\u90aa\u3067\u30c0\u30a6\u30f3\u3057\u3066\u305f\u306e\u3067\u884c\u3051\u306a\u304b\u3063\u305f\u3002Qiita\u306b\u306fSlideShare\u306e\u57cb\u3081\u8fbc\u307f\u304c\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u2193\u306e\u67a0\u306f\u305f\u3060\u306e\u753b\u50cf\u30ea\u30f3\u30af\u3060\u3002\n\n[![\u4eca\u3069\u304d\u306eSQL\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u306e\u8a71\u984c\u7dcf\u307e\u3068\u3081](https://qiita-image-store.s3.amazonaws.com/0/4121/5026c3b3-73ae-9835-6a60-f0456e316d57.png)](//www.slideshare.net/ockeghem/phpcon2015)\n<strong> <a href=\"\" title=\"Phpcon2015\" target=\"_blank\">Phpcon2015</a> </strong> from <strong><a href=\"//www.slideshare.net/ockeghem\" target=\"_blank\">Hiroshi Tokumaru</a></strong> </div>\n\n\u300c\u3046\u3061\u306fO/R\u30de\u30c3\u30d1\u30fc\u3092\u4f7f\u3063\u3066\u308b\u3088\u300d\u3063\u3066\u3072\u3068\u306b\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306f\u304b\u3093\u3051\u3044\u306a\u3044\u3002\u305d\u3046\u3001\u4eba\u985e\u306fDoctrine\u306e\u3088\u3046\u306a\u53e1\u667a\u3092\u624b\u306b\u3057\u3066\u308b\u3002\u7d20\u76f4\u306b\u7d20\u6674\u3089\u3057\u3044MVC\u30e2\u30c7\u30eb\u3084DB\u30ec\u30a4\u30e4\u30fc\u3092\u6301\u3063\u305f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u9078\u3076\u3079\u304d\u3060\u3002\u79c1\u306f\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u7121\u8cac\u4efb\u306a\u767a\u8a00\u306f\u3067\u304d\u306a\u3044\u304c\u3001Laravel\u306e\u30af\u30a8\u30ea\u30d3\u30eb\u30c0\u30fc\u3082\u306a\u304b\u306a\u304b\u4f7f\u3072\u52dd\u624b\u306f\u826f\u3055\u305d\u3046\u306b\u898b\u3048\u308b\u3002\n\n* [\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068 Doctrine (\u201cThe Model\u201d) | Symfony2\u65e5\u672c\u8a9e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.symfony.gr.jp/symfony2/book/doctrine.html)\n* [Database: Query Builder - Laravel - The PHP Framework For Web Artisans](https://laravel.com/docs/5.1/queries)\n\n## PHP\u3068DB/SQL\n\n\u305d\u308c\u3067\u3082\u4eba\u985e\u306f\u3001\u81ea\u5206\u306e\u624b\u3067SQL\u3092\u66f8\u304d\u305f\u304c\u308b\u3002[PDO](http://php.net/manual/en/book.pdo.php)\u3092\u4f7f\u3063\u3066\u3002\u305d\u3093\u306a\u3068\u304d\u306f\u5fc5\u305a\u4ee5\u4e0b\u306e\u8a18\u4e8b\u306e\u5185\u5bb9\u3092\u982d\u306b\u53e9\u304d\u8fbc\u307e\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n* [PHP\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3059\u308b\u3068\u304d\u306e\u307e\u3068\u3081 - Qiita](http://qiita.com/mpyw/items/b00b72c5c95aac573b71) by @mpyw\n\n\u4e16\u306e\u4e2d\u306b\u306f\u300c\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3057\u3001\u30b7\u30f3\u30d7\u30eb\u306aPHP\u3067\u2026\u300d\u3068\u304a\u3063\u3057\u3083\u308b\u521d\u5fc3\u8005\u306e\u578b\u3082\u5c45\u308b\u304c\u3001\u305d\u3093\u306a\u3072\u3068\u306b\u306f\u300c\u6025\u304c\u3070\u56de\u308c\u300d\u3068\u306e\u540d\u305b\u308a\u3075\u3092\u8d08\u308a\u305f\u3044\u3002\u305f\u3076\u3093\u6709\u540d\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u4e57\u3063\u305f\u65b9\u304c\u5b89\u5168\u3060\u3088[^2]\u3002\n\n\u3042\u3001PDO(PHP Data Objects)\u3092\u4f7f\u3063\u3066\u306a\u3044\u3072\u3068\u306f\u3001\u3053\u308c\u4ee5\u4e0a\u3053\u306e\u8a18\u4e8b\u3092\u8aad\u3080\u610f\u5473\u306f\u3042\u3093\u307e\u308a\u306a\u3044\u3067\u3059\u3002\n\n-----\n\n### PDO\u306e\u3044\u3044\u3068\u3053\u308d\n\n\u6587\u5b57\u5217\u3068\u304b\u3092\u3044\u3044\u611f\u3058\u306b\u30a8\u30b9\u30b1\u30fc\u30d7\u3057\u3066\u304f\u308c\u308b\u3068\u3053\u308d\u3002\n\n```php\n$stmt->bindValue(':user', $user, \\PDO::PARAM_STR);\n```\n\n### PDO\u306e\u3060\u3081\u306a\u3068\u3053\u308d\n\n\u53ef\u5909\u500b\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5f31\u3059\u304e\u308b\u2026 \u3064\u307e\u308a\u3001IN\u4fee\u98fe\u5b50\u3002\n\n```sql\nSELECT * FROM `users` WHERE `id` IN (123, 343, 893, 114, 514)\n```\n\n\u3053\u306e\u5f62\u5f0f\u3092PDO\u3067\u30d7\u30ec\u30fc\u30b9\u30db\u30eb\u30c0\u306b\u57cb\u3081\u8fbc\u3080\u65b9\u6cd5\u306f\u5f53\u7136\u3042\u308b\u306e\u3060\u3051\u308c\u3069\u3001\u3053\u3053\u3067\u306f\u7d39\u4ecb\u3057\u306a\u3044\u3002\n\n## TetoSQL\n\n* [BaguettePHP/TetoSQL](https://github.com/BaguettePHP/TetoSQL)\n* [zonuexe/tetosql - Packagist](https://packagist.org/packages/zonuexe/tetosql)\n\nPackagist\u306b\u767b\u9332\u6e08\u307f\u306a\u306e\u3067\u3001Composer\u5c0e\u5165\u6e08\u307f\u306e\u74b0\u5883\u3067`composer require zonuexe/tetosql`\u3092\u5b9f\u884c\u3059\u308c\u3070\u5c0e\u5165\u53ef\u80fd\u3002\n\n\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306fSQL\u306b\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u5024\u306e\u5b9f\u884c\u6642\u578b\u691c\u67fb\u3092\u884c\u3063\u305f\u4e0a\u3067PDO\u306e\u6a5f\u80fd\u3092\u30e9\u30c3\u30d7\u3059\u308b\u3042\u305f\u308a\u304c\u7279\u5fb4\u3067\u3001SQL\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u8106\u5f31\u6027\u306b\u4e00\u5b9a\u306e\u52b9\u679c\u306f\u3042\u308b\u3060\u308d\u3046\u3002\u914d\u5217\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067IN\u4fee\u98fe\u5b50\u3082\u554f\u984c\u306a\u304f\u5229\u7528\u3067\u304d\u308b\u3002\n\n\u5fa1\u8a17\u306f\u3044\u3044\u306e\u3067\u5229\u7528\u4f8b\u3092\u898b\u305b\u308b\u3002\n\n```php\n<?php\nnamespace MyApp;\nuse Teto\\SQL;\n\nconst find = '\n SELECT * FROM `users`\n WHERE `status` IN (:statuses@int[]) \n LIMIT :offset@int, :limit@int\n';\n$conn = new \\PDO('sqlite:/tmp/db.sq3', null, null, [PDO::ATTR_PERSISTENT => true]);\n$data = Query::execute($conn, find, [\n    ':statuses' => [1, 3],\n    ':offset'   => 60,\n    ':limit'    => 30,\n])->fetch(\\PDO::FETCH_ASSOC);\n```\n\n\u304a\u3066\u304c\u308b\u3067\u3059\u306d\u3002\u696d\u52d9\u3067\u306f\u57fa\u672c\u7684\u306bMySQL\u3092\u4f7f\u3063\u3066\u308b\u304c\u3001\u304a\u305d\u3089\u304fSQLite\u306a\u3069\u306eDB\u3067\u3082\u52d5\u4f5c\u3059\u308b\u3060\u308d\u3046\u3002\n\n### \u5bfe\u8c61DB\n\n\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3082\u3068\u3082\u3068MySQL\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u66f8\u304b\u308c\u305f\u304c\u3001PDO\u304c\u30b5\u30dd\u30fc\u30c8\u3059\u308bDB\u3067\u3042\u308c\u3070\u304a\u3088\u305d\u52d5\u4f5c\u3059\u308b\u3060\u308d\u3046\u3002\u305f\u3060\u3057\u3001\u5f8c\u8ff0\u3059\u308bINT\u306e\u7bc4\u56f2\u306b\u3088\u308a\u610f\u56f3\u3057\u306a\u3044\u52d5\u4f5c\u3092\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u3002\n\n### SQL\u6587\n\n\u73fe\u5728\u306e\u4ed5\u69d8\u3067\u306f\u3001TetoSQL\u304c\u53d7\u3051\u5165\u308c\u308bSQL\u6587\u306f\u3059\u3079\u3066\u6539\u884c\u30b3\u30fc\u30c9\u304cLF\u3067\u3042\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3001\u3053\u308c\u3092\u3059\u3079\u3066\u53d6\u308a\u9664\u304f\u3002\u5909\u6570\u304c\u4ee3\u5165\u3055\u308c\u308b\u524d\u306b\u51e6\u7406\u3059\u308b\u305f\u3081\u3001\u5165\u529b\u3059\u308b\u5024\u304b\u3089\u6539\u884c\u30b3\u30fc\u30c9\u304c\u53d6\u308a\u9664\u304b\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3002\u3053\u306e\u4ed5\u69d8\u306f\u8981\u671b\u304c\u3042\u308c\u3070\u5c06\u6765\u7684\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u306f\u3042\u308a\u3046\u308b\u304c\u3001\u5f37\u3044\u5e0c\u671b\u304c\u306a\u3051\u308c\u3070\u7279\u306b\u5909\u66f4\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3060\u308d\u3046\u3002\n\n\u5ff5\u306e\u305f\u3081\u306b\u65ad\u3063\u3066\u304a\u304f\u304c\u3001\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306fSQL\u306e\u69cb\u6587\u306b\u3064\u3044\u3066\u5e72\u6e09\u3057\u306a\u3044\u3002\u5b9f\u884c\u7d50\u679c\u304c\u59a5\u5f53\u306aSQL\u6587\u306b\u306a\u308b\u3053\u3068\u306f\u4fdd\u969c\u3057\u306a\u3044\u3002\u6587\u5b57\u5217\u306e\u30af\u30aa\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u306f[PDO::quote()](http://php.net/manual/pdo.quote.php)\u306e\u4ed5\u7d44\u307f\u306b\u3088\u3063\u3066\u5404SQL\u30c9\u30e9\u30a4\u30d0\u304c\u3044\u3044\u611f\u3058\u306b\u3057\u3066\u304f\u308c\u308b\u3060\u308d\u3046\u3002\u305f\u3076\u3093\u3002\n\n### \u5909\u6570\n\nTetoSQL\u306f\u300cSQL\u300d\u3068\u540d\u306f\u3064\u304f\u304c\u3001\u5b9f\u969b\u306f\u305f\u3060\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30b7\u30b9\u30c6\u30e0\u3067\u3042\u308b\u3002SQL\u306e\u69cb\u6587\u306e\u59a5\u5f53\u6027\u306b\u3064\u3044\u3066\u306f\u4e00\u5207\u4fdd\u969c\u3057\u306a\u3044\u3002\u5909\u6570\u540d\u306f`:name`\u306e\u3088\u3046\u306b\u3001\u304b\u306a\u3089\u305a`:`\u304c\u524d\u7f6e\u3055\u308c\u308b\u3002\u307e\u305f\u3001SQL\u6587\u306e\u4e2d\u3067\u306f`:name@string`\u306e\u3088\u3046\u306b\u578b\u304c\u660e\u793a\u3055\u308c\u308b\u3002\n\n\u5909\u6570\u306fSQL\u6587\u4e2d\u3067\u8907\u6570\u56de\u5c55\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u3053\u306e\u4ed5\u69d8\u306f\u3001\u305f\u3068\u3078\u3070MySQL\u306e`INSERT \u301c ON DUPLICATE KEY UPDATE`\u306a\u3069\u306b\u5229\u7528\u3067\u304d\u308b\u3002\n\n### \u578b\n\nTetoSQL\u306b\u306f\u578b\u306e\u6982\u5ff5\u304c\u3042\u308b\u3002\u30d0\u30a4\u30f3\u30c9\u3059\u308b\u5024\u306f\u5fc5\u305a\u578b\u3092\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n* `@int`: `-9223372036854775808`\u304b\u3089`9223372036854775807`\u306e\u7bc4\u56f2\u306e\u6574\u6570\u5024\n* `@string`: \u6587\u5b57\u5217\n* `@int[]`: \u8907\u6570\u306e`@int`\u5024\n* `@string[]`: \u8907\u6570\u306e`@string`\u5024\n* `@ascdesc`: `ASC`\u3068`DESC` (`ORDER BY`\u306e\u6607\u9806/\u964d\u9806)\n\n`int`\u306f\u3001\u3044\u306f\u3086\u308b\u7b26\u53f7\u4ed8\u304dBIGINT\u3068\u4e00\u81f4\u3059\u308b\u3002\u307e\u305f\u300164bit\u74b0\u5883\u306b\u304a\u3051\u308b`PHP_INT_MAX`, `PHP_INT_MIN`\u306e\u7bc4\u56f2\u3068\u3082\u4e00\u81f4\u3059\u308b\u3002\n\n`[]`\u304c\u4ed8\u3044\u305f\u578b\u8868\u8a18\u306f`,`\u3067\u533a\u5207\u3063\u3066\u5c55\u958b\u3055\u308c\u308b\u3002\u3053\u306e\u578b\u8868\u8a18\u304c\u671f\u5f85\u3059\u308b\u306e\u306f\u5358\u7d14\u306a\u30ea\u30b9\u30c8\u3067\u3042\u308a\u3001\u3044\u306f\u3086\u308b\u9023\u60f3\u914d\u5217\u3092\u671f\u5f85\u3057\u306a\u3044\u3002\u5178\u578b\u7684\u306a\u5229\u7528\u4f8b\u306f`WHERE \u301c IN`\u3067\u3042\u308b\u3002\n\n### PDO\n\nTetoSQL\u306fPDO\u307e\u305f\u306f\u3001PDO\u3068\u540c\u3058\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u6301\u3064\u30af\u30e9\u30b9\u3092\u53d7\u3051\u53d6\u308b\u3002PDO\u30af\u30e9\u30b9\u3092\u72ec\u81ea\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306b`PDOInterface`\u3092\u7528\u610f\u3057\u305f\u304c\u3001\u30bf\u30a4\u30d7\u30d2\u30f3\u30c8\u306f\u6307\u5b9a\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001PDO\u3068\u540c\u69d8\u306e\u52d5\u4f5c\u3092\u3059\u308b\u6700\u4f4e\u9650\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308c\u3070\u554f\u984c\u306a\u3044\u3060\u308d\u3046\u3002\n\n`PDOStatement`\u30af\u30e9\u30b9\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u3067\u3001`PDOStatement`\u3063\u307d\u3044\u632f\u821e\u3092\u3059\u308b\u306a\u3089\u3070\u52d5\u4f5c\u306f\u671f\u5f85\u3067\u304d\u308b\u3002`PDOStatementInterface`\u3082\u7528\u610f\u3057\u305f\u304c\u3001\u7279\u306b\u5229\u7528\u306f\u5fc5\u8981\u306a\u3044(\u73fe\u5728\u306e\u3068\u3053\u308d)\u3002\n\n## \u5b9f\u7528\u4f8b\n\n[\u30a4\u30f3\u30b9\u30d1\u30a4\u30e4\u3055\u308c\u3066\u63b2\u793a\u677f\u3092\u4f5c\u308a\u305f\u304f\u306a\u3063\u305f(1)](http://qiita.com/tadsan/items/cdbbb5b08591af2b110d)\u30b7\u30ea\u30fc\u30ba\u3068\u304b\u3067\u4f7f\u3063\u3066\u307e\u3059\u2026 \u304c\u3001\u6700\u8fd1\u5168\u7136\u66f4\u65b0\u3067\u304d\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u305d\u308d\u305d\u308d\u518d\u958b\u3059\u308b\u3088 \u30fe(\u3003\uff1e\uff1c)\uff89\uff9e\u2606\n\n## \u672a\u6765\n\n\u79c1\u3001\u5b9f\u306f[O/R\u30de\u30c3\u30d1\u30fc](https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E9%96%A2%E4%BF%82%E3%83%9E%E3%83%83%E3%83%94%E3%83%B3%E3%82%B0)\u3063\u3066\u3057\u3063\u304f\u308a\u3053\u306a\u3044\u3093\u3067\u3059\u2026 \u3063\u3066\u611f\u3058\u306f\u3042\u308b\u306e\u3067\u3001\u305d\u308c\u306a\u308a\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3068\u304b\u6a5f\u80fd\u8ffd\u52a0\u3068\u304b\u3057\u3066\u304f\u6c17\u304c\u3057\u307e\u3059\u3002\uff77\uff76\uff9e\uff91\uff72\uff80\uff97\uff88\u2026\n\n## \u811a\u6ce8\n\n[^1]: \u300c\u5fb3\u4e38\u672c\u300d\u306e\u4f5c\u8005\u3068\u3057\u3066\u6709\u540d\u306a\u578b\u3067\u3059\n[^2]: \u79c1\u306f\u300c\u65e2\u5b58\u306eWAF\u3063\u3066\u3057\u3063\u304f\u308a\u3053\u306a\u3044\u3093\u3067\u3059\u2026\u300d\u3068\u8a00\u3063\u3066\u8a2d\u8a08\u3092\u59cb\u3081\u3066\u3057\u307e\u3063\u305f\u3051\u3069\n", "tags": ["PHP", "PDO"]}