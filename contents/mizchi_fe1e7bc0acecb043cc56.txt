{"context": " More than 1 year has passed since last update.\u5148\u306b\u66f8\u3044\u305ffacebook/flow\u30d5\u30a1\u30fc\u30b9\u30c8\u30a4\u30f3\u30d7\u30ec\u30c3\u30b7\u30e7\u30f3 - Qiita\u3067\u306f\u81ea\u5206\u3067\u30b3\u30fc\u30c9\u66f8\u3044\u305f\u308a\u3057\u306a\u304b\u3063\u305f\u3093\u3060\u3051\u3069\u3001\u4eca\u56de\u306f\u3061\u3083\u3093\u3068\u624b\u89e6\u308a\u8fbc\u307f\u3067\u3002\n\nHello World!\nmkdir flow-playground\ncd flow-playground\nflow init\nvim hello.flow.js\n\n/* @flow */\n\nfunction foo(x) {\n  return x * 10;\n}\n\nfoo('Hello, world!')\n\nflow check\n\n\u578b\u30a8\u30e9\u30fc\u8d77\u3053\u3057\u3066\u307f\u308b\n~/s/flow-playground $ flow check\n/Users/mizchi/sandbox/flow-playground/hello.js:4:11,22: number\nThis type is incompatible with\n  /Users/mizchi/sandbox/flow-playground/hello.js:3:37,42: string\n\nFound 1 error\n\n\u305f\u3076\u3093\u3053\u3053\u3058\u3083\u4f1d\u308f\u3089\u306a\u3044\u3051\u3069\u3001\u51fa\u529b\u304c\u3081\u3063\u3061\u3083\u30ab\u30e9\u30d5\u30eb\n\nClasses\n/* @flow */\n\nclass A {\n  a: number;\n  constructor(public prop: number){\n  }\n}\n\nnew A(3);\n\nTypeScript\u306b\u3042\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u521d\u671f\u5316\u306f\u306a\u3044\u3002\n/Users/mizchi/sandbox/flow-playground/classes.js:5:15,20: Use of future reserved word in strict mode\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3053\u308c\u306f\u901a\u308b\n/* @flow */\n\nclass A {\n  a: number;\n  constructor(prop: number){\n    this.a = prop;\n  }\n}\n\nnew A(3);\n\n\nUnion and Type Alises\n/* @flow */\n\nclass A {\n  a: number;\n  constructor(prop: number){\n    this.a = prop;\n  }\n}\n\nclass B {\n  b: number;\n  constructor(prop: number){\n    this.b = prop;\n  }\n}\n\ntype T = A | B | string;\n\nvar x: T = new A(3);\n\n\n\u307e\u3042\u52d5\u304f\u3002\n\u2028\n\nlambda function\n\u8a66\u3057\u3066\u305f\u3089\u6b21\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u305f\n/* @flow */\nvar _: any = require('lodash');\nvar arr: number[] =  _.map([1,2,3], (n: number) => n * n);\nconsole.log(_.map([1,2,3], (n) => n * n));\n\n/Users/mizchi/sandbox/flow-playground/requiring.js:4:39,39: Unexpected token :\n\n(n: number) => {}\n\u3053\u306e\u69cb\u6587\u306f\u307e\u3060\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u306a\u3044\u306e\u304b\u306a\uff1f\n\nrequire\nsub.js\n/* @flow */\n\nmodule.exports = function(n: number): number{\n  return n * n;\n}\n\nmain.js\n/* @flow */\n\nvar sub = require('./sub');\nsub('hoge');\n\n~/s/flow-playground $ flow check\n\n/Users/mizchi/sandbox/flow-playground/main.js:4:5,10: string\nThis type is incompatible with\n  /Users/mizchi/sandbox/flow-playground/sub.js:3:30,35: number\n\n\n\u3061\u3083\u3093\u3068require\u5148\u306e\u578b\u3092\u307f\u3066\u304f\u308c\u3066\u308b\uff01\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\nreact-tools\u3064\u304b\u3048\u3068\u306e\u3053\u3068\nnpm install -g react-tools\n\n\u3069\u3046\u3067\u3082\u3044\u3044\u3093\u3060\u3051\u3069 react-tools\u3067jsx\u30b3\u30de\u30f3\u30c9\u5165\u308b\u306e\u306a\u3093\u3067\u3084\n~/s/flow-playground $ jsx --strip-types --harmony classes.js \nbuilt Module(\"classes\")\n/* @flow */\n\n\n\n  function A(prop)        {\"use strict\";\n    this.a = prop;\n  }\n\n\n\n\n  function B(prop)        {\"use strict\";\n    this.b = prop;\n  }\n\n\n\n\n\nvar x    = new A(3);\n\n\u305f\u3057\u304b\u306b\uff01\uff01\uff01\uff01\uff01\n\nhoge.flow.js\u3092node\u74b0\u5883\u3067require\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\nnode\u3067require\u3059\u308b\u3068\u304d\u3001\u62e1\u5f35\u5b50\u304choge.flow.js\u3060\u3063\u305f\u3089\u4e0a\u306e\u5909\u5f62\u3092\u66f8\u3051\u3066\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u3059\u308b\u3002\n\u3067\u3063\u3061\u4e0a\u3052\u308b\u305f\u3081\u306b\u3055\u3063\u304f\u308acoffee\u3067\u66f8\u3044\u305f\u3002\nfs = require 'fs'\nreactTools = require('react-tools')\nrequire.extensions['.flow.js'] = (module, filename) ->\n  code = fs.readFileSync(filename).toString()\n  transformed = reactTools.transform(code, {harmony: true, stripTypes: true})\n  module._compile(transformed)\n\nrequire './hello.flow.js'\n\n\u3053\u308c\u3067flow check\u3057\u3064\u3064node\u74b0\u5883\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u51fa\u6765\u305d\u3046\u3002\n\u3042\u3068\u3067\u8aad\u307f\u8fbc\u307f\u90e8\u5206\u306fnpm package\u306b\u3057\u3066\u304a\u304f\u3002\n\u5148\u306b\u66f8\u3044\u305f[facebook/flow\u30d5\u30a1\u30fc\u30b9\u30c8\u30a4\u30f3\u30d7\u30ec\u30c3\u30b7\u30e7\u30f3 - Qiita](http://qiita.com/mizchi/items/d50fbdd8c2dcd01c38f9 \"facebook/flow\u30d5\u30a1\u30fc\u30b9\u30c8\u30a4\u30f3\u30d7\u30ec\u30c3\u30b7\u30e7\u30f3 - Qiita\")\u3067\u306f\u81ea\u5206\u3067\u30b3\u30fc\u30c9\u66f8\u3044\u305f\u308a\u3057\u306a\u304b\u3063\u305f\u3093\u3060\u3051\u3069\u3001\u4eca\u56de\u306f\u3061\u3083\u3093\u3068\u624b\u89e6\u308a\u8fbc\u307f\u3067\u3002\n\n## Hello World!\n\n```\nmkdir flow-playground\ncd flow-playground\nflow init\nvim hello.flow.js\n```\n\n```js\n/* @flow */\n\nfunction foo(x) {\n  return x * 10;\n}\n\nfoo('Hello, world!')\n```\n\n\n```\nflow check\n```\n\n\u578b\u30a8\u30e9\u30fc\u8d77\u3053\u3057\u3066\u307f\u308b\n\n\n```\n~/s/flow-playground $ flow check\n/Users/mizchi/sandbox/flow-playground/hello.js:4:11,22: number\nThis type is incompatible with\n  /Users/mizchi/sandbox/flow-playground/hello.js:3:37,42: string\n\nFound 1 error\n```\n\n\u305f\u3076\u3093\u3053\u3053\u3058\u3083\u4f1d\u308f\u3089\u306a\u3044\u3051\u3069\u3001\u51fa\u529b\u304c\u3081\u3063\u3061\u3083\u30ab\u30e9\u30d5\u30eb\n\n\n### Classes\n\n```\n/* @flow */\n\nclass A {\n  a: number;\n  constructor(public prop: number){\n  }\n}\n\nnew A(3);\n```\n\nTypeScript\u306b\u3042\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u521d\u671f\u5316\u306f\u306a\u3044\u3002\n\n```\n/Users/mizchi/sandbox/flow-playground/classes.js:5:15,20: Use of future reserved word in strict mode\n```\n\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3053\u308c\u306f\u901a\u308b\n\n```\n/* @flow */\n\nclass A {\n  a: number;\n  constructor(prop: number){\n    this.a = prop;\n  }\n}\n\nnew A(3);\n```\n\n\n### Union and Type Alises\n\n\n```\n/* @flow */\n\nclass A {\n  a: number;\n  constructor(prop: number){\n    this.a = prop;\n  }\n}\n\nclass B {\n  b: number;\n  constructor(prop: number){\n    this.b = prop;\n  }\n}\n\ntype T = A | B | string;\n\nvar x: T = new A(3);\n\n```\n\n\u307e\u3042\u52d5\u304f\u3002\n\u2028\n### lambda function\n\n\u8a66\u3057\u3066\u305f\u3089\u6b21\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u305f\n\n```\n/* @flow */\nvar _: any = require('lodash');\nvar arr: number[] =  _.map([1,2,3], (n: number) => n * n);\nconsole.log(_.map([1,2,3], (n) => n * n));\n```\n\n```\n/Users/mizchi/sandbox/flow-playground/requiring.js:4:39,39: Unexpected token :\n```\n\n(n: number) => {}\n\u3053\u306e\u69cb\u6587\u306f\u307e\u3060\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u306a\u3044\u306e\u304b\u306a\uff1f\n\n### require \n\n\nsub.js\n\n```js\n/* @flow */\n\nmodule.exports = function(n: number): number{\n  return n * n;\n}\n```\n\nmain.js\n\n```js\n/* @flow */\n\nvar sub = require('./sub');\nsub('hoge');\n```\n\n```\n~/s/flow-playground $ flow check\n\n/Users/mizchi/sandbox/flow-playground/main.js:4:5,10: string\nThis type is incompatible with\n  /Users/mizchi/sandbox/flow-playground/sub.js:3:30,35: number\n\n```\n\n\n\u3061\u3083\u3093\u3068require\u5148\u306e\u578b\u3092\u307f\u3066\u304f\u308c\u3066\u308b\uff01\n\n\n\n\n### \u30b3\u30f3\u30d1\u30a4\u30eb\n\n\nreact-tools\u3064\u304b\u3048\u3068\u306e\u3053\u3068\n\n```\nnpm install -g react-tools\n```\n\n\u3069\u3046\u3067\u3082\u3044\u3044\u3093\u3060\u3051\u3069 react-tools\u3067jsx\u30b3\u30de\u30f3\u30c9\u5165\u308b\u306e\u306a\u3093\u3067\u3084\n\n```\n~/s/flow-playground $ jsx --strip-types --harmony classes.js \nbuilt Module(\"classes\")\n/* @flow */\n\n\n            \n  function A(prop)        {\"use strict\";\n    this.a = prop;\n  }\n\n\n\n            \n  function B(prop)        {\"use strict\";\n    this.b = prop;\n  }\n\n\n                        \n\n\nvar x    = new A(3);\n```\n\n\u305f\u3057\u304b\u306b\uff01\uff01\uff01\uff01\uff01\n\n\n### hoge.flow.js\u3092node\u74b0\u5883\u3067require\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\nnode\u3067require\u3059\u308b\u3068\u304d\u3001\u62e1\u5f35\u5b50\u304choge.flow.js\u3060\u3063\u305f\u3089\u4e0a\u306e\u5909\u5f62\u3092\u66f8\u3051\u3066\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u3067\u3063\u3061\u4e0a\u3052\u308b\u305f\u3081\u306b\u3055\u3063\u304f\u308acoffee\u3067\u66f8\u3044\u305f\u3002\n\n```coffeescript\nfs = require 'fs'\nreactTools = require('react-tools')\nrequire.extensions['.flow.js'] = (module, filename) ->\n  code = fs.readFileSync(filename).toString()\n  transformed = reactTools.transform(code, {harmony: true, stripTypes: true})\n  module._compile(transformed)\n\nrequire './hello.flow.js'\n```\n\n\u3053\u308c\u3067flow check\u3057\u3064\u3064node\u74b0\u5883\u3067\u52d5\u304b\u3059\u3053\u3068\u304c\u51fa\u6765\u305d\u3046\u3002\n\u3042\u3068\u3067\u8aad\u307f\u8fbc\u307f\u90e8\u5206\u306fnpm package\u306b\u3057\u3066\u304a\u304f\u3002\n", "tags": ["flow", "JavaScript"]}