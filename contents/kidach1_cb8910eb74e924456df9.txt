{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nRuby on Rails Tutorial\u306e\u30a8\u30c3\u30bb\u30f3\u30b9\u3092\u81ea\u5206\u306a\u308a\u306b\u6574\u7406\u3057\u3066\u307f\u308b2\nRails\u3092\u652f\u3048\u308b\u57fa\u672c\u6982\u5ff5\u306e\u6574\u7406\uff08RESTful\u3084\u30ea\u30bd\u30fc\u30b9\u306a\u3069\uff09\nhttp://qiita.com/kidachi_/items/43e53811c12351915278\n\u306e\u7d9a\u304d\u3002\nRuby on Rails Tutorial\uff08chapter3\uff09\nhttp://railstutorial.jp/chapters/static-pages?version=4.0#sec-spork\n\n\u4e0b\u6e96\u5099\n\nrails new\nRSpec\u3092\u7528\u3044\u308b\u305f\u3081\u3001test-unit\u306f\u4e0d\u8981\u3002\n$ rails new rspec_sample --skip-test-unit\n\n\nGemfile\u306e\u8a2d\u5b9a\n\nGemfile\ngroup :development, :test do\n  gem 'sqlite3', '1.3.8'\n  gem 'rspec-rails', '2.13.1'\nend\n\ngroup :test do\n  gem 'selenium-webdriver', '2.35.1'\n  gem 'capybara', '2.1.0'\nend\n\ngroup :production do\n  gem 'pg', '0.15.1'\n  gem 'rails_12factor', '0.0.2'\nend\n\n\n\ncapybara\nWeb \u306e\u30a2\u30af\u30bb\u30b9\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3059\u308b\u30d8\u30eb\u30d1\u30fc\u3002\n\u30d6\u30e9\u30a6\u30b6\u3084\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u4e0a\u3067\u60f3\u5b9a\u3055\u308c\u308b\u64cd\u4f5c\u3092ruby\u3067\u66f8\u304d\u3001\n\u30c6\u30b9\u30c8\u306b\u542b\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\n\ncapybara \u3067\u5feb\u9069\u306a\u30c6\u30b9\u30c8\u751f\u6d3b\u3092\nhttp://www.slideshare.net/tricknotes/capybara-introduction\n\npg\nPostgreSQL\u3092\u6271\u3046\u305f\u3081\u306egem\nrails_12factor\nHeroku\u3092Rails\u3067\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306egem\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5\n\ncontroller\u306e\u4f5c\u6210\n$ rails g controller <ClassName> <ActionName(\u4efb\u610f\u500b\u6570)>\n\n$ rails g controller StaticPages home help --no-test-framework\n\n\u203bRSpec\u7528\u306btest-unit\u306f\u9664\u304f\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u81ea\u52d5\u751f\u6210\n\nconfig/routes.rb\nSampleApp::Application.routes.draw do\n  get \"static_pages/home\"\n  get \"static_pages/help\"\n  ~\nend\n\n\n/static_pages/home\uff08\u3068/help\uff09\u3068\u3044\u3046URL\u306b\u5bfe\u3059\u308bGET\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3001\nStaticPages\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306ehome\uff08\u3068help\uff09\u30a2\u30af\u30b7\u30e7\u30f3\u3068\u7d50\u3073\u3064\u3051\u3066\u3044\u308b\n\n\uff08\u304a\u307e\u3051\uff09\u5404\u7a2e\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u65b9\u6cd5\n\ncontroller\n $ rails g controller FooBars baz quux\n//controller\u540d\u3068action\u540d\n $ rails destroy  controller FooBars baz quux\n\n\nmodel\u2028\n$ rails g model Foo bar:string baz:integer\n//model\u540d\u306e\u307f\u3067ok\n$ rails destroy model Foo\n\n\ndb\n$ rake db:migrate\n//1\u3064\u524d\u306e\u72b6\u614b\u306b\u623b\u3059\n$ rake db:rollback\n//\u6700\u521d\u306e\u72b6\u614b\u306b\u623b\u3059\n$ rake db:migrate VERSION=0\n\n\u203b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u9010\u6b21\u7684\u306b\u5b9f\u884c\u3055\u308c\u3001\u305d\u308c\u305e\u308c\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u30c6\u30b9\u30c8\u99c6\u52d5\u306e\u958b\u59cb\n\n\u7d50\u5408\u30c6\u30b9\u30c8 (request spec) \u3092\u751f\u6210\n$ rails g integration_test static_pages\n\n\n/home\u306eview\u306f\u3001'Micro'\u3068\u3044\u3046\u6587\u5b57\u5217\uff08\u30a2\u30d7\u30ea\u540d\uff09\u3092\u6301\u3063\u3066\u3044\u308b\u3079\u304d\n\nspec/requests/static_pages_spec.rb\nrequire 'spec_helper'\n\ndescribe \"StaticPages\" do\n  describe \"Home page\" do\n    it \"should have the content 'Micro'\" do\n      visit '/static_pages/home'\n      expect(page).to have_content('Micro')\n    end\n  end\nend\n\n\n\n\nRSpec\u5b9f\u884c\n$ bundle exec rspec spec/requests/static_pages_spec.rb\nF\n\nFailures:\n\n  1) StaticPages Home page should have the content 'Micro'\n     Failure/Error: expect(page).to have_content('Micro')\n       expected #has_content?(\"Micro\") to return true, got false\n     # ./spec/requests/static_pages_spec.rb:7:in `block (3 levels) in <top (required)>'\n\nFinished in 0.83735 seconds\n1 example, 1 failure\n\nFailed examples:\n\nrspec ./spec/requests/static_pages_spec.rb:5 # StaticPages Home page should have the content 'Micro'\n\nRandomized with seed 4199\n\n\u60f3\u5b9a\u901a\u308aRed\uff08\u5931\u6557\uff09\n\u30c6\u30b9\u30c8\u3092\u30d1\u30b9\u3059\u308b\u3088\u3046\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u624b\u3092\u52a0\u3048\u308b\u3002\n\napp/views/static_pages/home.html.erb\n<h1>Micro</h1>\n<p>\n  This is the home page for the\n  <a href=\"http://railstutorial.jp/\">Ruby on Rails Tutorial</a>\n  sample application.\n</p>\n\n\n\u518d\u5ea6\u5b9f\u884c\n$ bundle exec rspec spec/requests/static_pages_spec.rb\n.\n\nFinished in 0.07615 seconds\n1 example, 0 failures\n\nRandomized with seed 11765\n\nGreen\uff08\u6210\u529f\uff09\u3002\n\nGuard\u306e\u5c0e\u5165\n\nGuard\u3068\u306f\n\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u52a0\u308f\u3063\u305f\u6642\u3001\u81ea\u52d5\u3067\u305d\u308c\u306b\u5bfe\u3059\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3002\n\nGemfile\n~\ngroup :development, :test do\n  gem 'sqlite3', '1.3.8'\n  gem 'rspec-rails', '2.13.1'\n  gem 'guard-rspec', '2.5.0'\nend\n~\n\n\nGemfile\u306b\u8ffd\u8a18\u306e\u4e0a\u3001bundle install\u3002\n$ bundle install\n#Guard\u3092\u521d\u671f\u5316\u3057\u3001RSpec\u3068\u4e00\u7dd2\u306b\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n$ bundle exec guard init rspec\n\n\u7d50\u5408\u30c6\u30b9\u30c8\u3068\u30d3\u30e5\u30fc\u304c\u66f4\u65b0\u3055\u308c\u305f\u3089\u81ea\u52d5\u7684\u306b\u9069\u5207\u306a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306bGuardfile\u3092\u4fee\u6b63\n\nGuardfile\nrequire 'active_support/inflector'\n\n#\u5931\u6557\u3057\u305f\u30c6\u30b9\u30c8\u304c\u5f8c\u306b\u30d1\u30b9\u3057\u305f\u3068\u304d\u3001\u4ed6\u306e\u4f59\u5206\u306a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\nguard 'rspec', all_after_pass: false do\n~\n  # Custom Rails Tutorial specs\n  watch(%r{^app/controllers/(.+)_(controller)\\.rb$})  do |m|\n    [\"spec/routing/#{m[1]}_routing_spec.rb\",\n     \"spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb\",\n     \"spec/acceptance/#{m[1]}_spec.rb\",\n     (m[1][/_pages/] ? \"spec/requests/#{m[1]}_spec.rb\" :\n                       \"spec/requests/#{m[1].singularize}_pages_spec.rb\")]\n  end\n  watch(%r{^app/views/(.+)/}) do |m|\n    (m[1][/_pages/] ? \"spec/requests/#{m[1]}_spec.rb\" :\n                      \"spec/requests/#{m[1].singularize}_pages_spec.rb\")\n  end\n  watch(%r{^app/controllers/sessions_controller\\.rb$}) do |m|\n    \"spec/requests/authentication_pages_spec.rb\"\n  end\n~\nend\n\n\nGuard\u306e\u5b9f\u884c\u3002\n$ bundle exec guard\n\n\nSpork\u306e\u5c0e\u5165\n\nSpork\u3068\u306f\nRails\u306b\u304a\u3051\u308b\u30c6\u30b9\u30c8\u306e\u5b9f\u884c\u6642\u9593\u3092\u77ed\u7e2e\u3057\u3066\u304f\u308c\u308b\u30c6\u30b9\u30c8\u7528\u30b5\u30fc\u30d0\u3002\n\nGemfile\n~\ngroup :development, :test do\n  gem 'sqlite3', '1.3.8'\n  gem 'rspec-rails', '2.13.1'\n  gem 'guard-rspec', '2.5.0'\n  gem 'spork-rails', '4.0.0'\n  gem 'guard-spork', '1.5.0'\n  gem 'childprocess', '0.3.9'\nend\n~\n\n\nGemfile\u306b\u8ffd\u8a18\u306e\u4e0a\u3001bundle install\u3002\n$ bundle install\n$ bundle exec spork --bootstrap\n\n--bootstrap\u3092\u4ed8\u3051\u305f\u5b9f\u884c\u306b\u3088\u308a\u3001spec/spec_helper.rb\u306bSpork \u5b9f\u884c\u7528\u306e\u30b3\u30fc\u30c9\u304c\u8ffd\u8a18\u3055\u308c\u308b\u3002\nRSpec \u306e\u30c6\u30b9\u30c8\u304c Spork \u306b\u3088\u3063\u3066\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u4fee\u6b63\u3002\n\nspec/spec_helper.rb\nrequire 'rubygems'\nrequire 'spork'\n\nSpork.prefork do\n  ENV[\"RAILS_ENV\"] ||= 'test'\n  require File.expand_path(\"../../config/environment\", __FILE__)\n  require 'rspec/rails'\n  require 'rspec/autorun'\n\n  # Requires supporting ruby files with custom matchers and macros, etc,\n  # in spec/support/ and its subdirectories.\n  Dir[Rails.root.join(\"spec/support/**/*.rb\")].each {|f| require f}\n\n  # Checks for pending migrations before tests are run.\n  # If you are not using ActiveRecord, you can remove this line.\n  ActiveRecord::Migration.check_pending! if defined?(ActiveRecord::Migration)\n\n  RSpec.configure do |config|\n    # ## Mock Framework\n    #\n    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:\n    #\n    # config.mock_with :mocha\n    # config.mock_with :flexmock\n    # config.mock_with :rr\n\n    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures\n    config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n\n    # If you're not using ActiveRecord, or you'd prefer not to run each of your\n    # examples within a transaction, remove the following line or assign false\n    # instead of true.\n    config.use_transactional_fixtures = true\n\n    # If true, the base class of anonymous controllers will be inferred\n    # automatically. This will be the default behavior in future versions of\n    # rspec-rails.\n    config.infer_base_class_for_anonymous_controllers = false\n\n    # Run specs in random order to surface order dependencies. If you find an\n    # order dependency and want to debug it, you can fix the order by providing\n    # the seed, which is printed after each run.\n    #     --seed 1234\n    config.order = \"random\"\n    # Include the Capybara DSL so that specs in spec/requests still work.\n    config.include Capybara::DSL\n    # Disable the old-style object.should syntax.\n    config.expect_with :rspec do |c|\n      c.syntax = :expect\n    end\n  end\nend\n\nSpork.each_run do\n  # This code will be run each time you run your specs.\n\nend\n\n\nspork\u5b9f\u884c\n$ bundle exec spork\n#--drb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\n$ time bundle exec rspec spec/requests/static_pages_spec.rb --drb\n......\n\n6 examples, 0 failures\n\nreal    0m2.649s\nuser    0m1.259s\nsys 0m0.258s```\n\n\u30c6\u30b9\u30c8\u6642\u9593\u306e\u77ed\u7e2e\u304c\u5206\u304b\u308b\u3002\n\u6bce\u56de--drb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u306e\u306f\u4e0d\u4fbf\u306a\u306e\u3067\u3001.rspec\u3092\u4fee\u6b63\u3002\n--colour\n--drb\n\n\nGuard\u3068Spork\u306e\u9023\u643a\nGuard\u3092\u521d\u671f\u5316\u3057\u3001Spork\u3068\u4e00\u7dd2\u306b\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n$ bundle exec guard init spork\n\nGuardfile\u306e\u4fee\u6b63\u3002\nguard\u306e\u5909\u6570\u306b :cli => --drb \u3092\u8ffd\u52a0\u3057\u3001Guard\u304c\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5e38\u306bSpork\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308b\u3002\n\nGuardfile\nguard 'rspec', all_after_pass: false do\n\u2193\nguard 'rspec', after_all_pass: false, cli: '--drb' do\n\n\n\u2028\u4ee5\u4e0b\u3067Guard\u3068Spork\u3092\u540c\u6642\u306b\u8d77\u52d5\u3002\n$ bundle exec guard\n\n\n\u8ffd\u8a181 Guard\u304c\u52d5\u304b\u306a\u304f\u306a\u3063\u305f\u3089\n\u305f\u307e\u306bGuard\u304c\u53cd\u5fdc\u3057\u306a\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\uff08\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u51fa\u306a\u3044\u3002\uff09\n\u3053\u3046\u3044\u3046\u30b1\u30fc\u30b9\u3067\u306f\u3001\u4e71\u66b4\u3060\u304cGuard\u3068Spork\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u6bba\u3057\u3066\u518d\u8d77\u52d5\u3059\u308b\u3002\n$ kill -9 `pgrep -f 'spork'`\n$ kill -9 `pgrep -f 'guard'`\n$ bundle exec guard\n\n\u203b\u6839\u672c\u539f\u56e0\u3092\u3054\u5b58\u77e5\u306e\u65b9\u306f\u30a2\u30c9\u30d0\u30a4\u30b9\u9802\u3051\u307e\u3059\u3068\u5e78\u3044\u3067\u3059\uff01\n\n\u8ffd\u8a182 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bTest::Unit\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\n\u3082\u3057\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bTest::Unit\u3082\u542b\u3081\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u3068\u3001\uff08Test::Unit\u7528\u306e\u8a2d\u5b9a\u306f\u884c\u3063\u3066\u3044\u306a\u3044\u305f\u3081\uff09\u4ee5\u4e0b\u306e\u69d8\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\n18:43:40 - INFO - Starting Spork for RSpec, Test::Unit\nCouldn't find a supported test framework that begins with 'testunit'\n\nSupported test frameworks:\n( ) Cucumber\n(*) RSpec\n\nLegend: ( ) - not detected in project   (*) - detected\nUsing RSpec, Rails\nPreloading Rails environment\nLoading Spork.prefork block...\nSpork is ready and listening on 8989!\n18:44:10 - ERROR - Could not start Spork server for RSpec, Test::Unit after 30 seconds. I will continue waiting for a further 60 seconds.\n\n18:45:10 - ERROR - Could not start Spork server for RSpec, Test::Unit. Make sure you can use it manually first.\n\n\u305d\u306e\u5834\u5408\u306f\u3001Guardfile\u3067\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u52a0\u3048\u3066\u89e3\u6c7a\u3002\n-guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do\n+guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' }, :test_unit => false do\n\n\n\u4ee5\u4e0b\u306b\u7d9a\u304f\nRails\u3092\u89e6\u308b\u969b\u77e5\u3063\u3066\u3044\u308b\u3068\u4fbf\u5229\u306aRuby\u306e\u57fa\u790e [\u30d6\u30ed\u30c3\u30af\u3068\u304b\u30b7\u30f3\u30dc\u30eb\u3068\u304b]\nhttp://qiita.com/kidachi_/items/46a6e49b6306655ccd64\n[Ruby\u57fa\u790e] \u30d6\u30ed\u30c3\u30af\u3068Proc\u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3059\u308b\nhttp://qiita.com/kidachi_/items/15cfee9ec66804c3afd2\n\n\n##\u6982\u8981\nRuby on Rails Tutorial\u306e\u30a8\u30c3\u30bb\u30f3\u30b9\u3092\u81ea\u5206\u306a\u308a\u306b\u6574\u7406\u3057\u3066\u307f\u308b2\n\nRails\u3092\u652f\u3048\u308b\u57fa\u672c\u6982\u5ff5\u306e\u6574\u7406\uff08RESTful\u3084\u30ea\u30bd\u30fc\u30b9\u306a\u3069\uff09\nhttp://qiita.com/kidachi_/items/43e53811c12351915278\n\u306e\u7d9a\u304d\u3002\n\nRuby on Rails Tutorial\uff08chapter3\uff09\nhttp://railstutorial.jp/chapters/static-pages?version=4.0#sec-spork\n\n\n\n##\u4e0b\u6e96\u5099\n\n####rails new\n\nRSpec\u3092\u7528\u3044\u308b\u305f\u3081\u3001test-unit\u306f\u4e0d\u8981\u3002\n\n```sh\n$ rails new rspec_sample --skip-test-unit\n```\n\n####Gemfile\u306e\u8a2d\u5b9a\n\n```ruby:Gemfile\ngroup :development, :test do\n  gem 'sqlite3', '1.3.8'\n  gem 'rspec-rails', '2.13.1'\nend\n\ngroup :test do\n  gem 'selenium-webdriver', '2.35.1'\n  gem 'capybara', '2.1.0'\nend\n\ngroup :production do\n  gem 'pg', '0.15.1'\n  gem 'rails_12factor', '0.0.2'\nend\n```\n\n- capybara\nWeb \u306e\u30a2\u30af\u30bb\u30b9\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30c8\u3059\u308b\u30d8\u30eb\u30d1\u30fc\u3002\n\u30d6\u30e9\u30a6\u30b6\u3084\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u4e0a\u3067\u60f3\u5b9a\u3055\u308c\u308b\u64cd\u4f5c\u3092ruby\u3067\u66f8\u304d\u3001\n\u30c6\u30b9\u30c8\u306b\u542b\u3081\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\n\n capybara \u3067\u5feb\u9069\u306a\u30c6\u30b9\u30c8\u751f\u6d3b\u3092\nhttp://www.slideshare.net/tricknotes/capybara-introduction\n\n- pg\nPostgreSQL\u3092\u6271\u3046\u305f\u3081\u306egem\n\n- rails_12factor\nHeroku\u3092Rails\u3067\u52d5\u4f5c\u3055\u305b\u308b\u305f\u3081\u306egem\n\n\n\n##\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u88c5\n\n###controller\u306e\u4f5c\u6210\n\n```sh\n$ rails g controller <ClassName> <ActionName(\u4efb\u610f\u500b\u6570)>\n```\n\n```sh\n$ rails g controller StaticPages home help --no-test-framework\n```\n\n\u203bRSpec\u7528\u306btest-unit\u306f\u9664\u304f\n\n###\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u81ea\u52d5\u751f\u6210\n\n```config/routes.rb\nSampleApp::Application.routes.draw do\n  get \"static_pages/home\"\n  get \"static_pages/help\"\n  ~\nend\n```\n/static_pages/home\uff08\u3068/help\uff09\u3068\u3044\u3046URL\u306b\u5bfe\u3059\u308bGET\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3001\nStaticPages\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306ehome\uff08\u3068help\uff09\u30a2\u30af\u30b7\u30e7\u30f3\u3068\u7d50\u3073\u3064\u3051\u3066\u3044\u308b\n\n##\uff08\u304a\u307e\u3051\uff09\u5404\u7a2e\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u65b9\u6cd5\n\n####controller\n```sh\n $ rails g controller FooBars baz quux\n//controller\u540d\u3068action\u540d\n $ rails destroy  controller FooBars baz quux\n```\n\n####model\u2028\n```sh\n$ rails g model Foo bar:string baz:integer\n//model\u540d\u306e\u307f\u3067ok\n$ rails destroy model Foo\n```\n\n####db\n\n```sh\n$ rake db:migrate\n//1\u3064\u524d\u306e\u72b6\u614b\u306b\u623b\u3059\n$ rake db:rollback\n//\u6700\u521d\u306e\u72b6\u614b\u306b\u623b\u3059\n$ rake db:migrate VERSION=0\n```\n\n\u203b\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u9010\u6b21\u7684\u306b\u5b9f\u884c\u3055\u308c\u3001\u305d\u308c\u305e\u308c\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u3002\n\n\n\n##\u30c6\u30b9\u30c8\u99c6\u52d5\u306e\u958b\u59cb\n\n#####\u7d50\u5408\u30c6\u30b9\u30c8 (request spec) \u3092\u751f\u6210\n\n```sh\n$ rails g integration_test static_pages\n```\n\n#####/home\u306eview\u306f\u3001'Micro'\u3068\u3044\u3046\u6587\u5b57\u5217\uff08\u30a2\u30d7\u30ea\u540d\uff09\u3092\u6301\u3063\u3066\u3044\u308b\u3079\u304d\n\n```spec/requests/static_pages_spec.rb\nrequire 'spec_helper'\n\ndescribe \"StaticPages\" do\n  describe \"Home page\" do\n    it \"should have the content 'Micro'\" do\n      visit '/static_pages/home'\n      expect(page).to have_content('Micro')\n    end\n  end\nend\n\n```\n\n#####RSpec\u5b9f\u884c\n\n```sh\n$ bundle exec rspec spec/requests/static_pages_spec.rb\nF\n\nFailures:\n\n  1) StaticPages Home page should have the content 'Micro'\n     Failure/Error: expect(page).to have_content('Micro')\n       expected #has_content?(\"Micro\") to return true, got false\n     # ./spec/requests/static_pages_spec.rb:7:in `block (3 levels) in <top (required)>'\n\nFinished in 0.83735 seconds\n1 example, 1 failure\n\nFailed examples:\n\nrspec ./spec/requests/static_pages_spec.rb:5 # StaticPages Home page should have the content 'Micro'\n\nRandomized with seed 4199\n```\n\u60f3\u5b9a\u901a\u308aRed\uff08\u5931\u6557\uff09\n\n\u30c6\u30b9\u30c8\u3092\u30d1\u30b9\u3059\u308b\u3088\u3046\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u624b\u3092\u52a0\u3048\u308b\u3002\n\n```app/views/static_pages/home.html.erb\n<h1>Micro</h1>\n<p>\n  This is the home page for the\n  <a href=\"http://railstutorial.jp/\">Ruby on Rails Tutorial</a>\n  sample application.\n</p>\n```\n\n\u518d\u5ea6\u5b9f\u884c\n\n```sh\n$ bundle exec rspec spec/requests/static_pages_spec.rb\n.\n\nFinished in 0.07615 seconds\n1 example, 0 failures\n\nRandomized with seed 11765\n```\n\nGreen\uff08\u6210\u529f\uff09\u3002\n\n\n##Guard\u306e\u5c0e\u5165\n\n#####Guard\u3068\u306f\n\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u304c\u52a0\u308f\u3063\u305f\u6642\u3001\u81ea\u52d5\u3067\u305d\u308c\u306b\u5bfe\u3059\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n\n```ruby:Gemfile\n~\ngroup :development, :test do\n  gem 'sqlite3', '1.3.8'\n  gem 'rspec-rails', '2.13.1'\n  gem 'guard-rspec', '2.5.0'\nend\n~\n```\nGemfile\u306b\u8ffd\u8a18\u306e\u4e0a\u3001bundle install\u3002\n\n```sh\n$ bundle install\n#Guard\u3092\u521d\u671f\u5316\u3057\u3001RSpec\u3068\u4e00\u7dd2\u306b\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n$ bundle exec guard init rspec\n```\n\n\u7d50\u5408\u30c6\u30b9\u30c8\u3068\u30d3\u30e5\u30fc\u304c\u66f4\u65b0\u3055\u308c\u305f\u3089\u81ea\u52d5\u7684\u306b\u9069\u5207\u306a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306bGuardfile\u3092\u4fee\u6b63\n\n```ruby:Guardfile\nrequire 'active_support/inflector'\n\n#\u5931\u6557\u3057\u305f\u30c6\u30b9\u30c8\u304c\u5f8c\u306b\u30d1\u30b9\u3057\u305f\u3068\u304d\u3001\u4ed6\u306e\u4f59\u5206\u306a\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\nguard 'rspec', all_after_pass: false do\n~\n  # Custom Rails Tutorial specs\n  watch(%r{^app/controllers/(.+)_(controller)\\.rb$})  do |m|\n    [\"spec/routing/#{m[1]}_routing_spec.rb\",\n     \"spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb\",\n     \"spec/acceptance/#{m[1]}_spec.rb\",\n     (m[1][/_pages/] ? \"spec/requests/#{m[1]}_spec.rb\" :\n                       \"spec/requests/#{m[1].singularize}_pages_spec.rb\")]\n  end\n  watch(%r{^app/views/(.+)/}) do |m|\n    (m[1][/_pages/] ? \"spec/requests/#{m[1]}_spec.rb\" :\n                      \"spec/requests/#{m[1].singularize}_pages_spec.rb\")\n  end\n  watch(%r{^app/controllers/sessions_controller\\.rb$}) do |m|\n    \"spec/requests/authentication_pages_spec.rb\"\n  end\n~\nend\n```\n\nGuard\u306e\u5b9f\u884c\u3002\n\n```sh\n$ bundle exec guard\n```\n\n##Spork\u306e\u5c0e\u5165\n\n#####Spork\u3068\u306f\nRails\u306b\u304a\u3051\u308b\u30c6\u30b9\u30c8\u306e\u5b9f\u884c\u6642\u9593\u3092\u77ed\u7e2e\u3057\u3066\u304f\u308c\u308b\u30c6\u30b9\u30c8\u7528\u30b5\u30fc\u30d0\u3002\n\n```ruby:Gemfile\n~\ngroup :development, :test do\n  gem 'sqlite3', '1.3.8'\n  gem 'rspec-rails', '2.13.1'\n  gem 'guard-rspec', '2.5.0'\n  gem 'spork-rails', '4.0.0'\n  gem 'guard-spork', '1.5.0'\n  gem 'childprocess', '0.3.9'\nend\n~\n```\nGemfile\u306b\u8ffd\u8a18\u306e\u4e0a\u3001bundle install\u3002\n\n```sh\n$ bundle install\n$ bundle exec spork --bootstrap\n```\n\n--bootstrap\u3092\u4ed8\u3051\u305f\u5b9f\u884c\u306b\u3088\u308a\u3001spec/spec_helper.rb\u306bSpork \u5b9f\u884c\u7528\u306e\u30b3\u30fc\u30c9\u304c\u8ffd\u8a18\u3055\u308c\u308b\u3002\n\nRSpec \u306e\u30c6\u30b9\u30c8\u304c Spork \u306b\u3088\u3063\u3066\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u4fee\u6b63\u3002\n\n```spec/spec_helper.rb\nrequire 'rubygems'\nrequire 'spork'\n\nSpork.prefork do\n  ENV[\"RAILS_ENV\"] ||= 'test'\n  require File.expand_path(\"../../config/environment\", __FILE__)\n  require 'rspec/rails'\n  require 'rspec/autorun'\n\n  # Requires supporting ruby files with custom matchers and macros, etc,\n  # in spec/support/ and its subdirectories.\n  Dir[Rails.root.join(\"spec/support/**/*.rb\")].each {|f| require f}\n\n  # Checks for pending migrations before tests are run.\n  # If you are not using ActiveRecord, you can remove this line.\n  ActiveRecord::Migration.check_pending! if defined?(ActiveRecord::Migration)\n\n  RSpec.configure do |config|\n    # ## Mock Framework\n    #\n    # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:\n    #\n    # config.mock_with :mocha\n    # config.mock_with :flexmock\n    # config.mock_with :rr\n\n    # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures\n    config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n\n    # If you're not using ActiveRecord, or you'd prefer not to run each of your\n    # examples within a transaction, remove the following line or assign false\n    # instead of true.\n    config.use_transactional_fixtures = true\n\n    # If true, the base class of anonymous controllers will be inferred\n    # automatically. This will be the default behavior in future versions of\n    # rspec-rails.\n    config.infer_base_class_for_anonymous_controllers = false\n\n    # Run specs in random order to surface order dependencies. If you find an\n    # order dependency and want to debug it, you can fix the order by providing\n    # the seed, which is printed after each run.\n    #     --seed 1234\n    config.order = \"random\"\n    # Include the Capybara DSL so that specs in spec/requests still work.\n    config.include Capybara::DSL\n    # Disable the old-style object.should syntax.\n    config.expect_with :rspec do |c|\n      c.syntax = :expect\n    end\n  end\nend\n\nSpork.each_run do\n  # This code will be run each time you run your specs.\n\nend\n```\n\nspork\u5b9f\u884c\n\n```\n$ bundle exec spork\n#--drb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\n$ time bundle exec rspec spec/requests/static_pages_spec.rb --drb\n......\n\n6 examples, 0 failures\n\nreal\t0m2.649s\nuser\t0m1.259s\nsys\t0m0.258s```\n```\n\n\u30c6\u30b9\u30c8\u6642\u9593\u306e\u77ed\u7e2e\u304c\u5206\u304b\u308b\u3002\n\n\u6bce\u56de--drb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u306e\u306f\u4e0d\u4fbf\u306a\u306e\u3067\u3001.rspec\u3092\u4fee\u6b63\u3002\n\n```.rspec\n--colour\n--drb\n```\n\n\n\n##Guard\u3068Spork\u306e\u9023\u643a\n\nGuard\u3092\u521d\u671f\u5316\u3057\u3001Spork\u3068\u4e00\u7dd2\u306b\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n```sh\n$ bundle exec guard init spork\n```\n\nGuardfile\u306e\u4fee\u6b63\u3002\nguard\u306e\u5909\u6570\u306b `:cli => --drb` \u3092\u8ffd\u52a0\u3057\u3001Guard\u304c\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5e38\u306bSpork\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308b\u3002\n\n```ruby:Guardfile\nguard 'rspec', all_after_pass: false do\n\u2193\nguard 'rspec', after_all_pass: false, cli: '--drb' do\n```\n\u2028\u4ee5\u4e0b\u3067Guard\u3068Spork\u3092\u540c\u6642\u306b\u8d77\u52d5\u3002\n\n```sh\n$ bundle exec guard\n```\n\n## \u8ffd\u8a181 Guard\u304c\u52d5\u304b\u306a\u304f\u306a\u3063\u305f\u3089\n\n\u305f\u307e\u306bGuard\u304c\u53cd\u5fdc\u3057\u306a\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\uff08\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u51fa\u306a\u3044\u3002\uff09\n\n\u3053\u3046\u3044\u3046\u30b1\u30fc\u30b9\u3067\u306f\u3001\u4e71\u66b4\u3060\u304cGuard\u3068Spork\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u6bba\u3057\u3066\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n```\n$ kill -9 `pgrep -f 'spork'`\n$ kill -9 `pgrep -f 'guard'`\n$ bundle exec guard\n```\n\n\u203b\u6839\u672c\u539f\u56e0\u3092\u3054\u5b58\u77e5\u306e\u65b9\u306f\u30a2\u30c9\u30d0\u30a4\u30b9\u9802\u3051\u307e\u3059\u3068\u5e78\u3044\u3067\u3059\uff01\n\n\n## \u8ffd\u8a182 \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bTest::Unit\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\n\n\u3082\u3057\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bTest::Unit\u3082\u542b\u3081\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u3068\u3001\uff08Test::Unit\u7528\u306e\u8a2d\u5b9a\u306f\u884c\u3063\u3066\u3044\u306a\u3044\u305f\u3081\uff09\u4ee5\u4e0b\u306e\u69d8\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\n\n```sh\n18:43:40 - INFO - Starting Spork for RSpec, Test::Unit\nCouldn't find a supported test framework that begins with 'testunit'\n\nSupported test frameworks:\n( ) Cucumber\n(*) RSpec\n\nLegend: ( ) - not detected in project   (*) - detected\nUsing RSpec, Rails\nPreloading Rails environment\nLoading Spork.prefork block...\nSpork is ready and listening on 8989!\n18:44:10 - ERROR - Could not start Spork server for RSpec, Test::Unit after 30 seconds. I will continue waiting for a further 60 seconds.\n\n18:45:10 - ERROR - Could not start Spork server for RSpec, Test::Unit. Make sure you can use it manually first.\n```\n\u305d\u306e\u5834\u5408\u306f\u3001Guardfile\u3067\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u52a0\u3048\u3066\u89e3\u6c7a\u3002\n\n```Guardfile\n-guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' } do\n+guard 'spork', :cucumber_env => { 'RAILS_ENV' => 'test' }, :rspec_env => { 'RAILS_ENV' => 'test' }, :test_unit => false do\n```\n\n##\u4ee5\u4e0b\u306b\u7d9a\u304f\nRails\u3092\u89e6\u308b\u969b\u77e5\u3063\u3066\u3044\u308b\u3068\u4fbf\u5229\u306aRuby\u306e\u57fa\u790e [\u30d6\u30ed\u30c3\u30af\u3068\u304b\u30b7\u30f3\u30dc\u30eb\u3068\u304b]\nhttp://qiita.com/kidachi_/items/46a6e49b6306655ccd64\n\n[Ruby\u57fa\u790e] \u30d6\u30ed\u30c3\u30af\u3068Proc\u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3059\u308b\nhttp://qiita.com/kidachi_/items/15cfee9ec66804c3afd2", "tags": ["Spork", "Rails", "RSpec", "Guard", "Ruby"]}