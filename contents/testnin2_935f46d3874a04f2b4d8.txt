{"context": "\n\n1. \u554f\u984c\u5224\u5225\u3067\u6700\u521d\u306b\u884c\u3046\u3053\u3068\n\u4e8b\u524d\u306b\u74b0\u5883\u306b\u3064\u3044\u3066\u5341\u5206\u306a\u77e5\u8b58\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u4eba\u304c\u3001\u300c\u52d5\u304b\u306a\u3044\u306e\u3067\u8abf\u3079\u3066\u300d\u3068\u8a00\u308f\u308c\u3066\u3059\u3050\u306b\u554f\u984c\u5224\u5225\u306b\u53d6\u308a\u639b\u304b\u308c\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u969b\u306b\u6700\u521d\u306b\u3084\u3089\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3053\u3068\u306f\u3001\u4eca\u8d77\u3053\u3063\u3066\u3044\u308b\u554f\u984c\u306b\u3064\u3044\u3066\u4f59\u3059\u3068\u3053\u308d\u306a\u304f\u8aac\u660e\u3059\u308b\u6e96\u5099\u3092\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u3053\u306e\u554f\u984c\u306e\u8a18\u8ff0\u306a\u3057\u306b\u306f\u3001\u539f\u56e0\u8abf\u67fb\u3092\u3069\u3053\u304b\u3089\u59cb\u3081\u308c\u3070\u3088\u3044\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u3067\u3057\u3087\u3046\u3002\u554f\u984c\u306e\u672c\u8cea\u3092\u6574\u7406\u3057\u3001\u30b9\u30e0\u30fc\u30ba\u306a\u652f\u63f4\u3092\u53d7\u3051\u305f\u308a\u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u6c7a\u3081\u308b\u305f\u3081\u306b\u306f\u3001\u307e\u305a\u306f\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u6574\u7406\u3057\u3066\u5468\u308a\u3068\u5171\u6709\u3059\u308b\u3053\u3068\u304b\u3089\u958b\u59cb\u3059\u308b\u3079\u304d\u3067\u3059\u3002\n\n\u554f\u984c\u306f\u4f55\u3067\u3059\u304b?\n\n\n\u8ab0(\u4f55)\u304c\u554f\u984c\u3092\u5831\u544a\u3057\u3066\u3044\u307e\u3059\u304b?\n\u554f\u984c\u306e\u75c7\u72b6\u306f\u4f55\u3067\u3059\u304b?\n\u3053\u306e\u554f\u984c\u306f\u3069\u306e\u3088\u3046\u306a\u30d3\u30b8\u30cd\u30b9\u30fb\u30a4\u30f3\u30d1\u30af\u30c8\u304c\u3042\u308a\u307e\u3059\u304b?\u5f53\u9762\u306e\u56de\u907f\u7b56\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\n\n\n\u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u74b0\u5883\u3092\u8aac\u660e\u3067\u304d\u307e\u3059\u304b\uff1f\n\n\n\u69cb\u6210\u56f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u56f3\u3092\u4f7f\u3063\u3066\u8aac\u660e\u3067\u304d\u307e\u3059\u304b\uff1f\n\u4e0d\u660e\u306a\u7b87\u6240\u306e\u74b0\u5883\u306f\u8ab0\u306a\u3089\u3070\u77e5\u3063\u3066\u3044\u307e\u3059\u304b\uff1f\u305d\u306e\u4eba\u3092\u554f\u984c\u5224\u5225\u306e\u305f\u3081\u306b\u5dfb\u304d\u8fbc\u3080\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304b\uff1f\n\n\n\u554f\u984c\u306f\u3069\u306e\u3088\u3046\u306a\u72b6\u6cc1\u3067\u767a\u751f\u3057\u307e\u3059\u304b?\n\n\n\u3044\u3064\u3082\u767a\u751f\u3057\u3066\u3044\u307e\u3059\u304b\uff1f\u305d\u308c\u3068\u3082\u7279\u5b9a\u306e\u6642\u9593\u5e2f\u3060\u3051\u3067\u3059\u304b\uff1f\n\u3044\u3064\u304b\u3089\u3053\u306e\u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3059\u304b\uff1f\uff08\u904e\u53bb\u306b\u4e00\u5ea6\u3067\u3082\u6210\u529f\u3057\u305f\u3053\u3068\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\u6700\u8fd1\u4f55\u304b\u3084\u308a\u307e\u3057\u305f\u304b\uff1f\uff09\n\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u306e\u306f\u3001\u4ed6\u306b\u3082\u4f55\u304b\u5b9f\u884c\u3057\u3066\u3044\u308b\u6642\u3060\u3051\u3067\u3059\u304b?\n\n\n\u554f\u984c\u306f\u518d\u73fe\u53ef\u80fd\u3067\u3059\u304b?\n\n\n\u540c\u4e00\u306e\u554f\u984c\u3092\u518d\u73fe\u3067\u304d\u308b\u958b\u767a\u74b0\u5883\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u60c5\u5831\u3092\u53ce\u96c6\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304b\uff1f\n\u3088\u308a\u30b7\u30f3\u30d7\u30eb\u306a\u69cb\u6210\u3067\u554f\u984c\u3092\u518d\u73fe\u3067\u304d\u307e\u3059\u304b\uff1f\uff08\u554f\u984c\u306e\u672c\u8cea\u3092\u62bd\u51fa\u3057\u3001\u518d\u73fe\u74b0\u5883\u69cb\u7bc9\u306e\u6577\u5c45\u3092\u4e0b\u3052\u308b\u305f\u3081\uff09\n\n\n\n\n2. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u554f\u984c\u5206\u6790\u30c4\u30fc\u30eb\u306e\u5c0e\u5165\u65b9\u6cd5(CentOS/Redhat\u7cfb\u306e\u5834\u5408\uff09\n\u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u3056\u5224\u5225\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u300c\u30c4\u30fc\u30eb\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u306a\u3044\uff01\u3067\u3082\u4eca\u66f4\u672c\u756a\u74b0\u5883\u306b\u624b\u3092\u5165\u308c\u3089\u308c\u306a\u3044\uff01\u300d\u306a\u3093\u3066\u3044\u3046\u8a71\u306f\u3088\u304f\u805e\u304d\u307e\u3059\u3002\u30b7\u30e3\u30fc\u30ed\u30c3\u30af\u30db\u30fc\u30e0\u30ba\u306e\u6709\u540d\u306a\u53f0\u8a5e\uff08When you have eliminated the impossible, whatever remains, however improbable, must be the truth.\uff09\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u4e00\u898b\u5f53\u305f\u308a\u524d\u3067\u554f\u984c\u304c\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u3053\u3068\u306b\u601d\u308f\u306c\u898b\u843d\u3068\u3057\u304c\u3042\u308a\u3001\u5b9f\u306f\u5de1\u308a\u3081\u3050\u3063\u3066\u5206\u304b\u3063\u305f\u7d50\u679c\u3001\u521d\u6b69\u7684\u304c\u30df\u30b9\u304c\u539f\u56e0\u3067\u3057\u305f\u3001\u3001\u3001\u3068\u3044\u3046\u7d4c\u9a13\u3092\u3055\u308c\u305f\u65b9\u3082\u3044\u3089\u3063\u3057\u3083\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\u3053\u3046\u3057\u305f\u72b6\u6cc1\u3092\u9632\u3050\u305f\u3081\u306b\u306f\u300c\u554f\u984c\u304c\u306a\u3044\u300d\u3068\u5224\u65ad\u3057\u305f\u6839\u62e0\u306f\u3001\u4eee\u306b\u5f53\u305f\u308a\u524d\u3060\u3068\u601d\u3046\u3053\u3068\u3067\u3082\u3057\u3063\u304b\u308a\u3068\u8a18\u9332\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u306f\u3001\u30b7\u30b9\u30c6\u30e0\u8a2d\u8a08\u306e\u6bb5\u968e\u3067\u3001\u30c8\u30e9\u30d6\u30eb\u767a\u751f\u6642\u306b\u3069\u3053\u304b\u3089\u3069\u3046\u3044\u3046\u624b\u6bb5\u3067\u554f\u984c\u5224\u5225\u3092\u884c\u3046\u306e\u304b\u3092\u5341\u5206\u306b\u8003\u616e\u3057\u3001\u4e88\u3081\u69cb\u7bc9\u6bb5\u968e\u304b\u3089\u6700\u4f4e\u9650\u306e\u554f\u984c\u5224\u5225\u306b\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3057\u3066\u304a\u304d\u3001\u30c4\u30fc\u30eb\u306e\u5229\u7528\u6cd5\u306e\u78ba\u8a8d\u3084\u6b63\u5e38\u6642\u306e\u30c7\u30fc\u30bf\u306e\u53ce\u96c6\u3092\u884c\u3063\u3066\u304a\u304f\u3053\u3068\u306f\u91cd\u8981\u306a\u3053\u3068\u3067\u3059\u3002\n\nmtr\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\n# yum install -y mtr\n\n\n\ntraceroute\uff08Linux\uff09\u306e\u5c0e\u5165\n# yum install -y traceroute\n\n\n\nwhois(IP\u30a2\u30c9\u30ec\u30b9\u3084\u30c9\u30e1\u30a4\u30f3\u306e\u60c5\u5831\u691c\u7d22\u30c4\u30fc\u30eb\uff09\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\n# yum install -y whois\n\n\n\nnmap(\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u30c4\u30fc\u30eb)\u306e\u5c0e\u5165\n# yum install -y nmap\n\n\n\ntcpdump\uff08\u30d1\u30b1\u30c3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u30c4\u30fc\u30eb\uff09\u306e\u5c0e\u5165\n# yum install -y tcpdump\n\n\n\n3. ping/mtr/traceroute/tracert\u306e\u57fa\u672c\u3068\u6ce8\u610f\u70b9\n\n ping\u306fICMP\u3092\u5229\u7528\u3002\n\n\n \u4ee5\u4e0b\u306f\u983b\u51fa\u3002\u591a\u5206\u6b63\u5e38\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u30920\u306b\u3057\u305f\u304b\u3063\u305f\u304b\u3089echo reply\u304c0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3060\u3068\u601d\u308f\u308c\u308b\u3002\n\n\n echo reply(Type 0)\n destination unreachable(Type 3)\n\n\n code 1: host unreachable\n code 3: port unreachable\n code 4: packet too big\n\n\n echo request(Type 8)\n time exceeded(Type 11)\n\n\n iptables\u3067\u3044\u3046\u3068\u3001ping\u306e\u5b9b\u5148\u30b5\u30fc\u30d0\u30fc\u306b\u3066\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u76f8\u5f53\u306e\u8a2d\u5b9a\u304c\u5b58\u5728\u3057\u306a\u3044\u3068\u305d\u306e\u5b9b\u5148\u30b5\u30fc\u30d0\u30fc\u306fICMP\u30d1\u30b1\u30c3\u30c8\u3092\u53d7\u4fe1\u3057\u306a\u3044\u3001\u3082\u3057\u304f\u306f\u5fdc\u7b54\u3057\u306a\u3044\u3002\n\n\n -A INPUT  -p icmp --icmp-type 8 -j ACCEPT\n\n -A OUTPUT -p icmp --icmp-type 0 -j ACCEPT\n\n\n\n ICMP\u306fTCP\u3067\u3082UDP\u3067\u3082\u306a\u3044\u306e\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u306f\u5b58\u5728\u3057\u306a\u3044\u3002\u300c\u3042\u308c\u30fc\u3001\u305d\u308c\u3060\u3063\u305f\u3089NAPT\u3067\u304d\u306a\u3044\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\u300d\u3068\u601d\u3046\u306e\u306f\u5f53\u7136\u3060\u304c\u3001\u5b9f\u969bping\u3067NAPT\u8d8a\u3048\u3067\u304d\u3066\u3057\u307e\u3046\u30b1\u30fc\u30b9\u306b\u906d\u9047\u3059\u308b\u3053\u3068\u306f\u591a\u3044\uff08\u3060\u304b\u3089\u3053\u305d\u3001ICMP\u304cTCP\u3084UDP\u306e\u4e00\u7a2e\u3067\u3042\u308b\u304b\u306e\u3088\u3046\u306a\u8aa4\u89e3\u3092\u3057\u3066\u3044\u308b\u4eba\u3082\u591a\u3044\u306e\u3060\u304c\uff09\u3002\u305d\u306e\u5834\u5408\u306f\u3001ICMP\u7cfb\u306b\u306fIdentifier\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3044\u3046\u3082\u306e\u304c\u5b58\u5728\u3057\u3001\u3053\u308c\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u4ee3\u7528\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3002\n\n\n mtr\u306fICMP\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3002TCP\u3084UDP\u3092\u4f7f\u3046\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306a\u306e\u3067\u3001Firewall\u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u306fICMP\u3092\u901a\u3055\u306a\u3044\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u3066\u3082\u30ec\u30dd\u30fc\u30c8\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\u4f7f\u3044\u65b9\u306f\u6b21\u9805\u53c2\u7167\u3002\n traceroute(Linux)\u306fUDP\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u306f\u7279\u306b\u5b9a\u307e\u3063\u3066\u3044\u306a\u3044\u3002ICMP(-I\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\u3084TCP(-T -p 80\u3067\u30dd\u30fc\u30c880\u756a\u3092\u6307\u5b9a)\u306b\u5909\u66f4\u53ef\u80fd\u3002\u4ed6\u306b\u3001-A\u3068\u304b-e\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u6709\u52b9\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u3082\u53c2\u7167\u306e\u3053\u3068\u3002\n\n\nICMP\u304c\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u308b\u74b0\u5883\u3067\u306emtr\u3084traceroute\u306e\u53d6\u5f97\u65b9\u6cd5\n traceroute -A\u3068traceroute -e\n\n\n\n tracert(Windows)\u306fICMP\u3092\u5229\u7528\uff08\u5909\u66f4\u4e0d\u53ef\uff09\u3002Windows\u3068Linux\u3067\u6319\u52d5\u304c\u9055\u3046\uff01\u3063\u3066\u9a12\u3050\u524d\u306b\u3001\u305d\u3082\u305d\u3082\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u304c\u7570\u306a\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002\n\n\n DNS\u306b\u3088\u308b\u30db\u30b9\u30c8\u540d\u89e3\u6c7a\u304c\u4e0d\u8981\u3067\u3042\u308b\u5834\u5408\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u306a\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d4c\u8def\u7b49\uff09\u3067\u3042\u308c\u3070\u3001-d\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3068\u3088\u3044\u3002tracert\u304c\u9045\u3044\uff01\u3068\u9a12\u3044\u3067\u3044\u308b\u4eba\u306e\u539f\u56e0\u306e\u6b86\u3069\u304c-d\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u3044\u306a\u3044\u3053\u3068\u304c\u539f\u56e0\u3002\n\n\n\u30eb\u30fc\u30bf\u30fc\u3092\u901a\u308b\u5ea6\u306bIP\u30d8\u30c3\u30c0\u306eTTLmtr/traceroute/tracert\u306a\u3069\u306f\u3001\u57fa\u672c\u7684\u306b\u306fIP\u30d8\u30c3\u30c0\u306eTTL(\u30eb\u30fc\u30bf\u3092\u901a\u904e\u3067\u304d\u308b\u6700\u5927\u56de\u6570)\u5024\u304c1\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u51fa\u3001TTL=2\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u51fa\u3001\u3001\u3001\u3068\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3057\u305f\u7aef\u672b\u304b\u3089\u9001\u51fa\u3057\u3001TTL\u5024\u304c0\u306b\u306a\u3063\u305f\u6642\u70b9\u3067\u30eb\u30fc\u30bf\u30fc\u306f\u30d1\u30b1\u30c3\u30c8\u3092\u7834\u68c4\u3057\u3066ICMP Time Exceed(Type 11)\u3092\u8fd4\u3059\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3002\u9014\u4e2d\u7d4c\u8def\u306e\u30eb\u30fc\u30bf\u30fc\u304cICMP Time Exceeded(Type 11)\u306e\u9001\u4fe1\u3092\u30d6\u30ed\u30c3\u30af\u3057\u3066\u3044\u308c\u3070\u3001\u5f53\u7136\u305d\u306e\u30eb\u30fc\u30bf\u30fc\u304b\u3089\u306e\u60c5\u5831\u306f\u5f97\u3089\u308c\u306a\u3044\u3002\n\n\nmtr\u3084traceroute\u306b\u3066ICMP/TCP/UDP\u306e\u3044\u305a\u308c\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u7d4c\u8def\u9014\u4e2d\u306e\u30eb\u30fc\u30bf\u30fc\u304b\u3089\u306e\u8fd4\u308a\u306e\u30d1\u30b1\u30c3\u30c8\u306fICMP Time Exceeded(Type 11)\u306b\u306a\u308b\u3002\u3088\u3063\u3066\u3001iptables\u3067\u3044\u3046\u3068\u3001-A INPUT  -p icmp --icmp-type 11 -j ACCEPT\u76f8\u5f53\u306e\u8a2d\u5b9a\u304c\u30b3\u30de\u30f3\u30c9\u9001\u4fe1\u5143\u306b\u5b58\u5728\u3057\u306a\u3044\u3068ICMP Time Exceeded(Type 11)\u3092\u53d7\u3051\u53d6\u308c\u306a\u3044\u3002\n\u6700\u7d42\u5230\u9054\u5148\u304b\u3089\u9001\u4fe1\u5143\u304c\u53d7\u4fe1\u3059\u308b\u30d1\u30b1\u30c3\u30c8\u306f\u3001ICMP Time Exceeded(Type 11)\u3067\u306f\u306a\u3044\u3002\u305d\u308c\u305e\u308c\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u4f7f\u7528\u6642\u306b\u5fdc\u3058\u3066\u3001ICMP echo reply(Type 0)\u304a\u3088\u3073TCP/UDP\u3067\u6307\u5b9a\u3057\u305f\u305d\u308c\u305e\u308c\u306e\u30dd\u30fc\u30c8\u304b\u3089\u306e\u5fdc\u7b54\u306b\u306a\u308b\u3002\n\u5404\u30b3\u30de\u30f3\u30c9\u306b\u3066\u51fa\u529b\u3055\u308c\u308b\u6642\u9593\u306f\u3001\u3053\u306eRTT(Round Trip Trime)\u306b\u4ed6\u306a\u3089\u306a\u3044\u3002\u3064\u307e\u308a\u3001\u9001\u4fe1\u5143\u304b\u3089\u30d1\u30b1\u30c3\u30c8\u3092\u6295\u3052\u3066ICMP Time Exceeded(Type 11)\u304c\u8fd4\u3063\u3066\u6765\u308b\u307e\u3067\u306e\u6642\u9593\u3092\u6307\u3059\u3002\n\u300c\u3042\u308c\uff1f\u9001\u4fe1\u5143\u3067\u306fICMP\u306b\u3088\u308b\u5916\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306f\u5168\u90e8\u906e\u65ad\u3057\u3066\u3044\u308b\u7b48\u306a\u306e\u306b\u3061\u3083\u3093\u3068mtr\u3068\u304btraceroute\u306f\u5b9f\u884c\u3067\u304d\u3066\u3044\u308b\u3088\uff1f\u300d\u3068\u3044\u3046\u4eba\u306f\u3001\u304a\u305d\u3089\u304f\u5b9a\u756a\u306e\u3088\u3046\u306b\u5165\u308c\u3066\u3044\u308b-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\u306e\u304a\u304b\u3052\u306e\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3002iptables\u306eman\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\n\n\nESTABLISHED: meaning that the packet is associated with a connection which has seen packets in both directions\nRELATED: meaning  that the packet is starting a new connection, but is associated with an existing connection, such as an FTP data transfer, or an ICMP error.\n\n\nFirewall\u306a\u3069\u304c\u539f\u56e0\u3067\u3001\u3042\u308b\u4e2d\u7d99\u30eb\u30fc\u30bf\u30fc\u3084\u6700\u7d42\u5b9b\u5148\u304b\u3089\u5148\u306e\u5fdc\u7b54\u3092\u5168\u304f\u53d7\u3051\u53d6\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u9001\u4fe1\u5143\u7aef\u672b\u304b\u3089TTL\u3092\uff11\u3064\u305a\u3064\u5897\u3084\u3057\u3066\u8a66\u884c\u3057\u3066\u3082\u5168\u90e8NG\u3068\u306a\u308b\u7d50\u679c\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u51fa\u529b\u7d50\u679c\u306b\u30a2\u30b9\u30bf\u30ea\u30b9\u30af\uff08\uff0a\uff09\u304cTTL\u6700\u5927\u8a66\u884c\u5024\u307e\u3067\u7d9a\u304f\u3053\u3068\u306b\u306a\u308b\u3002\n\n\n\n\n4. \u63a5\u7d9a\u3067\u304d\u306a\u3044\u30fb\u63a5\u7d9a\u304c\u4e0d\u5b89\u5b9a\uff01\uff1f\u5b9f\u4f8b\u3092\u901a\u3057\u3066\u898b\u3066\u307f\u3088\u3046\u3002\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e2\u62e0\u70b9\u9593\u306b\u304a\u3051\u308b\u7d4c\u8def\u306f\u3088\u304f\u5909\u66f4\u3055\u308c\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u884c\u304d\u306e\u7d4c\u8def\uff08\u5f80\u8def\uff09\u3068\u5e30\u308a\u306e\u7d4c\u8def\uff08\u5fa9\u8def\uff09\u304c\u7570\u306a\u308b\u3053\u3068\u3082\u591a\u304f\u5b58\u5728\u3057\u307e\u3059\u3002\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u901a\u4fe1\u554f\u984c\u306f\u3001\u5f80\u8def\u30fb\u5fa9\u8def\u306e\u53cc\u65b9\u306b\u554f\u984c\u304c\u5b58\u5728\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3001SoftLayer\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u901a\u4fe1\u554f\u984c\u306e\u30c1\u30b1\u30c3\u30c8\u3092\u8d77\u7968\u3057\u305f\u969b\u306b\u306f\u3001\u30b5\u30dd\u30fc\u30c8\u306bEnd to end\u3067\u306e\u53cc\u65b9\u5411\u306emtr\uff08bidirectional mtr)\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u3002\u6570\u56de\u30ec\u30d9\u30eb\u3060\u3068\u305f\u307e\u305f\u307e\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u3044\u305f\u3068\u3044\u3046\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067\u3001\u5341\u5206\u306a\u6570\u306e\u65bd\u884c\u3092\u9451\u307f\u308b\u3068\u3001-c 100\u3050\u3089\u3044\u3067\u53d6\u5f97\u3059\u308b\u306e\u304c\u63a8\u5968\u3067\u3059\u3002\nmtr\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u65b9\u6cd5\u4f8b\n\n-r: report\u5f62\u5f0f\n-w: \u30db\u30b9\u30c8\u540d\u3092\u77ed\u7e2e\u305b\u305a\u306b\u8868\u793a\n-n: \u30db\u30b9\u30c8\u540d\u3067\u306f\u306a\u304fIP\u30a2\u30c9\u30ec\u30b9\u306e\u307f\u8868\u793a\uff08DNS lookup\u306b\u3088\u308b\u30db\u30b9\u30c8\u540d\u51fa\u529b\u304c\u610f\u5473\u304c\u306a\u3044\u74b0\u5883\u3067\u306f\u63a8\u5968\u3002\u7279\u306b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3092\u7d4c\u7531\u3057\u306a\u3044\u74b0\u5883\u3067\u306f\u30db\u30b9\u30c8\u540d\u306b\u3088\u308b\u540d\u524d\u89e3\u6c7a\u306f\u610f\u5473\u304c\u306a\u3044\u306e\u3060\u304b\u3089\u3001\u591a\u304f\u306e\u30b1\u30fc\u30b9\u3067\u4ed8\u3051\u308b\u65b9\u304c\u826f\u3044\uff09\n-b: \u30db\u30b9\u30c8\u540d\u3068IP\u30a2\u30c9\u30ec\u30b9\u306e\u4e21\u65b9\u3092\u8868\u793a\n-c: ping\u306e\u8ee2\u9001\u6570\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f10\u56de\u3002SoftLayer\u306b\u30ec\u30dd\u30fc\u30c8\u3059\u308b\u6642\u306b\u306f100\u56de\u3050\u3089\u3044\u306b\u3057\u3066\u304a\u304f\u3053\u3068\u3092\u63a8\u5968\u3002\n-T -P 80: -T\u3067TCP\u3092-P\u3067port\u756a\u53f7\u3092\u6307\u5b9a\uff08\u3053\u306e\u4f8b\u3060\u3068port\u756a\u53f780\u3092\u6307\u5b9a\uff09\u3002\n\n\nmtr\u306e\u5b9f\u884c\u4f8b\n#\u30b5\u30fc\u30d0\u30fcA(161.202.xx.xx) -> \u30b5\u30fc\u30d0\u30fcB(169.47.xx.xx)\u3078\u306emtr\u30ec\u30dd\u30fc\u30c8\n#\u4eca\u56de\u306f\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u306a\u306e\u3067\u30db\u30b9\u30c8\u540d\u89e3\u6c7a\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3066-n\u306e\u4ee3\u308f\u308a\u306b-b\u3092\u5229\u7528\u3002\n\n# mtr -rwb -c 100 169.47.xx.xx\nStart: Tue Feb 14 02:03:30 2017\nHOST: powertokyo.softlayer.com                              Loss%   Snt   Last   Avg  Best  Wrst StDev\n  1.|-- xx.xx.xxxx.ip4.static.sl-reverse.com (161.202.xx.xx)   0.0%   100    0.7   0.7   0.5   3.7   0.3\n  2.|-- ae11.dar02.tok02.networklayer.com (161.202.118.132)    0.0%   100    0.3   0.5   0.3   7.8   0.9\n  3.|-- ae9.bbr01.eq01.tok01.networklayer.com (50.97.19.134)   0.0%   100    0.8   0.9   0.7   4.6   0.4\n  4.|-- ae2.bbr02.eq01.sjc02.networklayer.com (50.97.18.160)   0.0%   100   99.3  97.1  96.2 100.4   0.7\n  5.|-- ae6.cbs02.eq01.sjc02.networklayer.com (50.97.17.78)    8.0%   100   98.0  98.4  95.7 100.9   0.9\n  6.|-- ae0.cbs02.cs01.lax01.networklayer.com (50.97.17.86)    2.0%   100  103.6 104.0 102.5 111.9   1.1\n  7.|-- ae7.cbs01.cs01.lax01.networklayer.com (50.97.17.60)   44.0%   100  103.0 104.3 103.0 113.0   1.4\n  8.|-- ae0.cbs01.eq01.dal03.networklayer.com (50.97.17.81)   64.0%   100  132.2 132.1 131.1 134.1   0.5\n  9.|-- ae0.dar01.dal10.networklayer.com (50.97.17.9)          0.0%   100  130.1 131.3 129.9 154.4   2.9\n 10.|-- ae0.ppr04.dal10.networklayer.com (169.46.118.135)      0.0%   100  134.0 134.3 133.0 136.1   0.6\n 11.|-- po4.fcr01b.dal10.networklayer.com (169.46.118.171)     0.0%   100  132.5 133.3 132.4 137.9   0.8\n 12.|-- xx.xx.xxxx.ip4.static.sl-reverse.com (169.47.xx.xx)  0.0%   100  130.4 130.8 130.1 132.4   0.5\n\n#\u30b5\u30fc\u30d0\u30fcB(169.47.xx.xx) -> \u30b5\u30fc\u30d0\u30fcA(161.202.xx.xx)\u3078\u306emtr\u30ec\u30dd\u30fc\u30c8\n# mtr -rwb -c 100 161.202.xx.xx\nStart: Tue Feb 14 02:08:07 2017\nHOST: powerdallas.softlayer.com                            Loss%   Snt   Last   Avg  Best  Wrst StDev\n  1.|-- ???                                                  100.0   100    0.0   0.0   0.0   0.0   0.0\n  2.|-- ae103.ppr02.dal10.networklayer.com (169.46.118.158)   0.0%   100    2.5   2.2   1.5   2.9   0.0\n  3.|-- ae3.dar01.dal10.networklayer.com (169.46.118.130)     0.0%   100    0.5   1.2   0.4  26.0   3.4\n  4.|-- ae10.cbs01.eq01.dal03.networklayer.com (50.97.17.8)  76.0%   100    3.0   3.1   2.2   6.8   0.8\n  5.|-- ae0.cbs01.cs01.lax01.networklayer.com (50.97.17.80)  21.0%   100   31.8  31.5  30.4  48.5   1.9\n  6.|-- ae7.cbs02.cs01.lax01.networklayer.com (50.97.17.61)  21.0%   100   31.4  31.7  30.6  51.7   3.0\n  7.|-- ae0.cbs02.eq01.sjc02.networklayer.com (50.97.17.87)  14.0%   100   38.5  38.4  37.5  40.0   0.2\n  8.|-- ae24.bbr02.eq01.sjc02.networklayer.com (50.97.17.79)  0.0%   100   53.4  39.3  35.9 121.6  11.0\n  9.|-- ae0.bbr01.eq01.tok01.networklayer.com (50.97.18.161)  0.0%   100  131.6 131.8 131.4 135.0   0.4\n 10.|-- ae5.dar01.tok02.networklayer.com (50.97.19.133)       0.0%   100  132.8 132.0 131.8 137.1   0.5\n 11.|-- po1.fcr01a.tok02.networklayer.com (161.202.118.131)   0.0%   100  132.0 130.8 129.9 132.3   0.7\n 12.|-- xx.xx.xxxx.ip4.static.sl-reverse.com (161.202.xx.xx)    0.0%   100  130.3 130.3 129.9 130.7   0.0\n\nLoss%: \u30d1\u30b1\u30c3\u30c8\u306e\u6d88\u5931\u7387\uff08\u8fd4\u3063\u3066\u3053\u306a\u304b\u3063\u305f\u7387\uff09\nSnt: \u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3057\u305f\u56de\u6570\nLast/Avg/Best/Wrst: \u6700\u65b0/\u5e73\u5747/\u6700\u826f/\u6700\u60aa\u306eRTT(Round-Trip Time:\u30d1\u30b1\u30c3\u30c8\u304c\u30b3\u30de\u30f3\u30c9\u767a\u884c\u5143\u7aef\u672b\u304b\u3089\u884c\u3063\u3066\u8fd4\u3063\u3066\u304f\u308b\u6642\u9593)\u3002\u5358\u4f4d\u306fms\u3002\nStDev: \u6a19\u6e96\u504f\u5dee\u3002\u5e73\u5747\u5024\u5468\u8fba\u306b\u5024\u304c\u504f\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u6307\u6a19\u3002\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u30d0\u30e9\u30c4\u30ad\u304c\u591a\u3044\u3002\n\n\n\n\u4e0a\u8a18\u306e\u89e3\u91c8\n\n\nDAR(Datacenter Aggregation Router)\u3084FCR(Frontend Customer Router)\u306a\u3069\u306e\u610f\u5473\u3092\u77e5\u308a\u305f\u3051\u308c\u3070\u3001SoftLayer\u306eNW\u69cb\u6210\u56f3\u3068\u3057\u3066\u306f\u3001http://www.softlayer.com/NETWORK \u3084http://knowledgelayer.softlayer.com/procedure/direct-link-connectivity-options \u306b\u6dfb\u4ed8\u3055\u308c\u3066\u3044\u308bpdf\u30d5\u30a1\u30a4\u30eb\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\u3082\u3057\u3053\u3046\u3057\u305f\u7528\u8a9e\u306b\u6163\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u3001\u3053\u306e\u69cb\u6210\u56f3\u3092\u4e00\u5ea6\u3088\u304f\u8aad\u3093\u3067\u307f\u308b\u3068\u3088\u3044\u3002\uff08\u6ce8\uff1aCBS\u306fCore Backbone Switch\u3001PPR\u306fPod to Pod Router\u3089\u3057\u3044\u3002\uff09\nmtr\u30ec\u30dd\u30fc\u30c8\u306f\u3001\u884c\u304d\u306e\u7d4c\u8def\uff08\u5f80\u8def\uff09\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u304c\u5e30\u308a\u306e\u7d4c\u8def\uff08\u5fa9\u8def\uff09\u306f\u8868\u793a\u3057\u3066\u3057\u306a\u3044\u3002\u884c\u304d\u306e\u7d4c\u8def\u3068\u5e30\u308a\u306e\u7d4c\u8def\u306f\u5168\u304f\u7570\u306a\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u305f\u3081\u3001\u53cc\u65b9\u5411\u306emtr\u30ec\u30dd\u30fc\u30c8\u306f\u91cd\u8981\u3002\n ICMP\u30d1\u30b1\u30c3\u30c8\u306e\u901a\u4fe1\u91cf\u3092\u308f\u3056\u3068\u5236\u9650\uff08ICMP rate limiting\uff09\u3057\u3066\u3044\u308b\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3082\u3044\u308b\u305f\u3081\u3001\u4e00\u898b\u30d1\u30b1\u30c3\u30c8\u30ed\u30b9\u304c\u767a\u751f\u3057\u3066\u3044\u305f\u308a\u3001\u5927\u304d\u306a\u9045\u5ef6\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u3066\u3082\u6b21\u306ehop\u3067Loss%\u304c0\u3067\u3042\u3063\u305f\u308aLatency\u304c\u6539\u5584\u3055\u308c\u3066\u3044\u308c\u3070\u554f\u984c\u306a\u3057\u3068\u307f\u306a\u3057\u3066\u3088\u3044\u3002\n\n\u4f8b\u3048\u3070\u4e0a\u8a18\u306emtr\u306e\u4f8b\u306b\u304a\u3044\u3066\u3001\u9014\u4e2d\u3067\u4e00\u898b\u30d1\u30b1\u30c3\u30c8\u30ed\u30b9\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u308b(lax01\u3084dal03\u306e\u8fba\u308a\uff09\u304c\u3001\u3088\u308a\u5f8c\u6bb5\u3067ICMP\u30d1\u30b1\u30c3\u30c8\u3092100\u56de\u9001\u3063\u3066\u5168\u90e8\u5230\u9054\u3067\u304d\u3066\u3044\u308b\uff08Loss%=0)\u306e\u3067\u554f\u984c\u306a\u3057\u3002\n\u6700\u521d\u306ehop\u306fFCR\u3060\u304c\u3001ICMP\u306b\u53cd\u5fdc\u3057\u3066\u304f\u308c\u308bDC\u3068\u305d\u3046\u3067\u306a\u3044DC\u304c\u3042\u308b\u307f\u305f\u3044\u3002TOK02\u3067\u306f\u53cd\u5fdc\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u304c\u3001DAL10\u3067\u306f\u53cd\u5fdc\u3057\u3066\u304f\u308c\u306a\u3044\u307f\u305f\u3044\u3002\u3069\u3061\u3089\u306e\u5834\u5408\u3067\u3042\u3063\u3066\u3082\u3001\u305d\u306e\u5f8c\u6bb5\u306ehop\u3067\u30d1\u30b1\u30c3\u30c8\u30ed\u30b9\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7684\u306b\u306f\u554f\u984c\u306a\u3057\u3002\n\n\nLatency\u306e\u6642\u9593\u304c\u5897\u3048\u305f\u5834\u6240\u306f\u3001\u4e00\u822c\u7684\u306b\u306f\u305d\u3053\u3067\u9060\u304f\u306b\u30d1\u30b1\u30c3\u30c8\u304c\u8ee2\u9001\u3055\u308c\u305f\u3068\u8003\u3048\u308b\u3068\u81ea\u7136\u3002\u3053\u306e\u4f8b\u3060\u3068\u3001tok01\u3068sjc02\u306e\u9593\uff08100msec\u7a0b\u5ea6\uff09\u3084\u3001lax01\u3068dal03(30msec\u7a0b\u5ea6\uff09\u306e\u9593\u306f\u305d\u308c\u306a\u308a\u306b\u96e2\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u4e88\u60f3\u3055\u308c\u308b\u3002\n\u9014\u4e2d\u7d4c\u8def\u306eIP\u30a2\u30c9\u30ec\u30b9\u306e\u6240\u6709\u7d44\u7e54\u306f\u8ab0\u304b\u3092\u8abf\u3079\u308b\u305f\u3081\u306b\u306f\u3001whois\u30b3\u30de\u30f3\u30c9\u304c\u6709\u52b9\u3002\n\n\n\n\nwhois\u306e\u5b9f\u884c\u4f8b\n\n# whois 161.202.118.132\n\uff08\u9014\u4e2d\u7565\uff09\norganisation:   ORG-STI12-RIPE\norg-name:       SoftLayer Technologies, Inc.\norg-type:       LIR\naddress:        14001 N.Dallas Parkway,Suite M100\naddress:        75240\naddress:        Dallas TX\naddress:        UNITED STATES\n\uff08\u9014\u4e2d\u7565\uff09\n\n\n\n5. Bluemix Infrastructure(SoftLayer)\u3067\u306e\u3042\u308b\u3042\u308b\u554f\u984c\u306e\u4e8b\u4f8b\n\n5.1 SoftLayer\u6240\u6709\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\uff08BBR\u3084DAR\uff09\u306b\u30d1\u30b1\u30c3\u30c8\u304c\u5230\u9054\u3067\u304d\u306a\u3044\n\nSoftLayer\u306bDDOS\u9632\u5fa1\u3067\u30b5\u30fc\u30d0\u30fc\u306b\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u8a72\u5f53IP\u3078\u306e\u63a5\u7d9a\u304c\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f(DDOS\u306f\u4e0d\u7279\u5b9a\u591a\u6570\u304b\u3089\u306e\u653b\u6483\u306a\u306e\u3067\u3001\u63a5\u7d9a\u5148\u3067\u7d5e\u308b\uff09\u3002\n\n\nSoftLayer\u306bTicket\u3092\u8d77\u7968\u3057\u3066\u3001NOC(Network Operation Center)\u304b\u3089\u78ba\u8a8d\u3092\u5f97\u308b\u3002\n\n\nSoftLayer\u306bSPAM\u9632\u5fa1\u3067\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u30ec\u30f3\u30b8\u304b\u3089\u306e\u63a5\u7d9a\u304c\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f\uff08\u63a5\u7d9a\u5143\u3092\u7d5e\u308b\uff09\u3002\n\n\nSoftLayer\u306bTicket\u3092\u8d77\u7968\u3057\u3066\u3001NOC(Network Operation Center)\u304b\u3089\u78ba\u8a8d\u3092\u5f97\u308b\u3002\n\u4e16\u306e\u4e2d\u7684\u306b\u8a72\u5f53IP\u304cSPAM\u3068\u3057\u3066\u8a8d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306f\u3001spamhaus\u306e\u60c5\u5831\u304c\u53c2\u8003\u306b\u306a\u308b\u3002https://www.spamhaus.org/lookup/\n\n\n\n\n\n5.2 SoftLayer\u304b\u3089\u30d1\u30b1\u30c3\u30c8\u304c\u5c4a\u304b\u306a\u3044\n\nSoftLayer\u306f\u539f\u5247Outbound\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u307e\u305b\u3093\u304c\u3001\u552f\u4e00\u306e\u4f8b\u5916\u3068\u3057\u3066OP25B\uff08Outbound Port 25 Blocking)\u5bfe\u7b56\u3068\u3057\u306625\u756a\u30dd\u30fc\u30c8\u3078\u306eOutbound\u901a\u4fe1\u306f\u30d6\u30ed\u30c3\u30af\u3057\u3066\u3044\u307e\u3059\u3002\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u969b\u306b\u306f\u3001submission port\u3068\u3057\u306625\u756a\u4ee5\u5916\u3092\u5229\u7528\u3057\u3066\u3044\u308bSendGrid\u306a\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u307e\u3057\u3087\u3046\u3002\n\n\nhttp://qiita.com/testnin2/items/ceb27d418a017c0c3490\nhttps://knowledgelayer.softlayer.com/procedure/outbound-email-port-25\n\n\n\n\n5.3 \u30b5\u30fc\u30d0\u30fc\u307e\u3067\u30d1\u30b1\u30c3\u30c8\u304c\u5230\u9054\u3067\u304d\u306a\u3044\n\nFirewall\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f\u3002\n\n\nLinux\u3067\u3042\u308c\u3070iptables -L -v -n\u306a\u3069\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u60c5\u5831\u3092\u78ba\u8a8d\u53ef\u80fd\u3002\nnmap\u306a\u3069\u3067\u5916\u90e8\u304b\u3089\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u3066\u30dd\u30fc\u30c8\u306e\u958b\u9589\u78ba\u8a8d\u53ef\u80fd\u3002\n\n\nOS\u4ed8\u5c5e\u306eFirewall\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f\n\n\nWindows\u3067McAfee VirusScan\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u3001Access Protection\u6a5f\u80fd\u306b\u3088\u3063\u3066\u5fc5\u8981\u306a\u30dd\u30fc\u30c8\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\n\nPrivate VLAN\u9593\u306e\u901a\u4fe1\u3084\u540c\u4e00Private VLAN\u5185\u3067\u3082\u7570\u306a\u308b\u30b5\u30d6\u30cd\u30c3\u30c8\u9593\u306e\u901a\u4fe1\u306f\u3001VLAN Spanning=ON\u306b\u3059\u308b\u304bVRF\u306e\u6709\u52b9\u5316\u304c\u5fc5\u8981\u3002\n\n\n5.4 \u5c4a\u304f\u6642\u3082\u3042\u308b\u304c\u6642\u9593\u5e2f\u306b\u3088\u3063\u3066\u306f\u5c4a\u304b\u306a\u3044\u6642\u3082\u3042\u308b\u5834\u5408\u306e\u4f8b\n\nSoftLayer\u306eBackbone network\u306e\u30b1\u30fc\u30d6\u30eb\u304c\u5207\u308c\u3066\u304a\u308a\u3001\u8fc2\u56de\u7d4c\u8def\u3092\u901a\u3063\u3066\u3044\u308b\u3002\n\n\n\u65e2\u77e5\u306e\u969c\u5bb3\u60c5\u5831\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n\n\nSoftLayer\u5185\u306eVLAN/\u7d4c\u8def\u60c5\u5831\u304c\u6b63\u3057\u304f\u306a\u304b\u3063\u305f\uff08\u8868\u793a\u4e0a\u306f\u6b63\u3057\u304f\u3066\u3082\u3001\u5b9f\u6a5f\u3067\u7247\u7cfb\u306b\u3057\u304b\u6b63\u3057\u304f\u69cb\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001repush\u304c\u5fc5\u8981\uff09\n\n\nSoftLayer\u306bTicket\u3092\u8d77\u7968\u3057\u3066\u3001\u69cb\u6210\u3092repush\u3057\u3066\u3082\u3089\u3046\n\n\nVyatta\u306econntrack\u5024\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u306e\u305f\u3081\u3001\uff08\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u304b\u3089\u306e\u653b\u6483\u306a\u3069\u3082\u542b\u3081\u3066\uff09\u9ad8\u8ca0\u8377\u6642\u306b\u30d1\u30b1\u30c3\u30c8\u304cdrop\u3055\u308c\u3066\u3044\u305f\n\n\nVyatta\u3067\u306ftable-size, hash-size, expect-table-size\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u5c0f\u3055\u3059\u304e\u308b\u306e\u3067\u3088\u308a\u5927\u304d\u306a\u5024\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\n\n\n\n\n6. \u3088\u308a\u7d30\u90e8\u306e\u5207\u308a\u5206\u3051\u306e\u305f\u3081\u306b\u306f\n\u8a72\u5f53\u30b5\u30fc\u30d0\u30fc\u306b\u3066\n\n\u30d1\u30b1\u30c3\u30c8\u304c\u672c\u5f53\u306b\u5c4a\u3044\u3066\u3044\u308b\u306e\u304b\uff1f\n\u3069\u3046\u3044\u3046\u30d1\u30b1\u30c3\u30c8\u304c\u5c4a\u3044\u3066\u3044\u308b\u306e\u304b\uff1f\n\u3069\u3046\u3044\u3046\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3057\u3066\u3044\u308b\u306e\u304b\uff1f\n\n\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u5b9f\u969b\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u3059\u308b\u306e\u304c\u4e00\u756a\u3067\u3059\u3002Linux\u3067\u306ftcpdump\u306a\u3069\u3067\u30d1\u30b1\u30c3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u3092\u53d6\u5f97\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\ntcpdump\u3067\u3088\u304f\u4f7f\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\n\n-i: \u6307\u5b9a\u3057\u306a\u3044\u3068eth0\u306e\u3088\u3046\u306a\u7279\u5b9a\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u307f\u3057\u304b\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3057\u306a\u3044\u3002\u30d1\u30b1\u30c3\u30c8\u306e\u6319\u52d5\u3092\u7591\u3046\u5834\u5408\u306fany\u6307\u5b9a\u3092\u3059\u308b\n-nn: IP\u30a2\u30c9\u30ec\u30b9/\u30dd\u30fc\u30c8\u756a\u53f7\u3067\u8868\u793a\nhost: \u8a72\u5f53\u306eIP\u3092\u542b\u3080\u30d1\u30b1\u30c3\u30c8\u306e\u307f\u3092\u8868\u793a\nport: \u8a72\u5f53\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u307f\u3092\u8868\u793a\n-s: \u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u3059\u308b\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\u3002-s0\u306f\u3059\u3079\u3066\u3002\n-A: \u30d1\u30b1\u30c3\u30c8\u306e\u4e2d\u8eab\u3092ASCII\u8868\u793a\u3002HTTP\u30a2\u30af\u30bb\u30b9\u306e\u6642\u306b\u91cd\u5b9d\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\n\ntcpdump\u5b9f\u884c\u4f8b\n# tcpdump -i any -nn icmp\n# tcpdump -i any -nn host xx.xx.xx.xx\n# tcpdump -i eth1 -nn net 183.79.0.0/16\n\n#\u4ee5\u4e0b\u3060\u3068TCP\u3082UDP\u3082\u3069\u3061\u3089\u306e\u30dd\u30fc\u30c8\u3082\u78ba\u8a8d\u53ef\u80fd\n# tcpdump -i eth0 -nn 'icmp or port 80 or port 443' \n\n#\u30d1\u30b1\u30c3\u30c8\u306e\u4e2d\u8eab\u3092\u7701\u7565\u306a\u3057\u3067ASCII\u3067\u8868\u793a  \n# tcpdump -i any -nn -s0 -A port 80 \n\n\n#1. \u554f\u984c\u5224\u5225\u3067\u6700\u521d\u306b\u884c\u3046\u3053\u3068\n\n\u4e8b\u524d\u306b\u74b0\u5883\u306b\u3064\u3044\u3066\u5341\u5206\u306a\u77e5\u8b58\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u4eba\u304c\u3001\u300c\u52d5\u304b\u306a\u3044\u306e\u3067\u8abf\u3079\u3066\u300d\u3068\u8a00\u308f\u308c\u3066\u3059\u3050\u306b\u554f\u984c\u5224\u5225\u306b\u53d6\u308a\u639b\u304b\u308c\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u969b\u306b\u6700\u521d\u306b\u3084\u3089\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3053\u3068\u306f\u3001\u4eca\u8d77\u3053\u3063\u3066\u3044\u308b\u554f\u984c\u306b\u3064\u3044\u3066**\u4f59\u3059\u3068\u3053\u308d\u306a\u304f**\u8aac\u660e\u3059\u308b\u6e96\u5099\u3092\u3059\u308b\u3053\u3068\u3067\u3059\u3002\u3053\u306e\u554f\u984c\u306e\u8a18\u8ff0\u306a\u3057\u306b\u306f\u3001\u539f\u56e0\u8abf\u67fb\u3092\u3069\u3053\u304b\u3089\u59cb\u3081\u308c\u3070\u3088\u3044\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u3067\u3057\u3087\u3046\u3002\u554f\u984c\u306e\u672c\u8cea\u3092\u6574\u7406\u3057\u3001\u30b9\u30e0\u30fc\u30ba\u306a\u652f\u63f4\u3092\u53d7\u3051\u305f\u308a\u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u6c7a\u3081\u308b\u305f\u3081\u306b\u306f\u3001\u307e\u305a\u306f\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u6574\u7406\u3057\u3066\u5468\u308a\u3068\u5171\u6709\u3059\u308b\u3053\u3068\u304b\u3089\u958b\u59cb\u3059\u308b\u3079\u304d\u3067\u3059\u3002\n\n1. \u554f\u984c\u306f\u4f55\u3067\u3059\u304b?\n    2. \u8ab0(\u4f55)\u304c\u554f\u984c\u3092\u5831\u544a\u3057\u3066\u3044\u307e\u3059\u304b?\n    3. \u554f\u984c\u306e\u75c7\u72b6\u306f\u4f55\u3067\u3059\u304b?\n    4. \u3053\u306e\u554f\u984c\u306f\u3069\u306e\u3088\u3046\u306a\u30d3\u30b8\u30cd\u30b9\u30fb\u30a4\u30f3\u30d1\u30af\u30c8\u304c\u3042\u308a\u307e\u3059\u304b?\u5f53\u9762\u306e\u56de\u907f\u7b56\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\n5. \u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u74b0\u5883\u3092\u8aac\u660e\u3067\u304d\u307e\u3059\u304b\uff1f\n    6. \u69cb\u6210\u56f3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u56f3\u3092\u4f7f\u3063\u3066\u8aac\u660e\u3067\u304d\u307e\u3059\u304b\uff1f\n    7. \u4e0d\u660e\u306a\u7b87\u6240\u306e\u74b0\u5883\u306f\u8ab0\u306a\u3089\u3070\u77e5\u3063\u3066\u3044\u307e\u3059\u304b\uff1f\u305d\u306e\u4eba\u3092\u554f\u984c\u5224\u5225\u306e\u305f\u3081\u306b\u5dfb\u304d\u8fbc\u3080\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304b\uff1f\n7. \u554f\u984c\u306f\u3069\u306e\u3088\u3046\u306a\u72b6\u6cc1\u3067\u767a\u751f\u3057\u307e\u3059\u304b?\n    8. \u3044\u3064\u3082\u767a\u751f\u3057\u3066\u3044\u307e\u3059\u304b\uff1f\u305d\u308c\u3068\u3082\u7279\u5b9a\u306e\u6642\u9593\u5e2f\u3060\u3051\u3067\u3059\u304b\uff1f\n    9. \u3044\u3064\u304b\u3089\u3053\u306e\u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u307e\u3059\u304b\uff1f\uff08\u904e\u53bb\u306b\u4e00\u5ea6\u3067\u3082\u6210\u529f\u3057\u305f\u3053\u3068\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\u6700\u8fd1\u4f55\u304b\u3084\u308a\u307e\u3057\u305f\u304b\uff1f\uff09\n    10. \u554f\u984c\u304c\u767a\u751f\u3059\u308b\u306e\u306f\u3001\u4ed6\u306b\u3082\u4f55\u304b\u5b9f\u884c\u3057\u3066\u3044\u308b\u6642\u3060\u3051\u3067\u3059\u304b?\n8. \u554f\u984c\u306f\u518d\u73fe\u53ef\u80fd\u3067\u3059\u304b?\n    9. \u540c\u4e00\u306e\u554f\u984c\u3092\u518d\u73fe\u3067\u304d\u308b\u958b\u767a\u74b0\u5883\u306f\u3042\u308a\u307e\u3059\u304b\uff1f\n    10. \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u60c5\u5831\u3092\u53ce\u96c6\u3059\u308b\u3053\u3068\u306f\u53ef\u80fd\u3067\u3059\u304b\uff1f\n    11. \u3088\u308a\u30b7\u30f3\u30d7\u30eb\u306a\u69cb\u6210\u3067\u554f\u984c\u3092\u518d\u73fe\u3067\u304d\u307e\u3059\u304b\uff1f\uff08\u554f\u984c\u306e\u672c\u8cea\u3092\u62bd\u51fa\u3057\u3001\u518d\u73fe\u74b0\u5883\u69cb\u7bc9\u306e\u6577\u5c45\u3092\u4e0b\u3052\u308b\u305f\u3081\uff09\n \n#2. \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u554f\u984c\u5206\u6790\u30c4\u30fc\u30eb\u306e\u5c0e\u5165\u65b9\u6cd5(CentOS/Redhat\u7cfb\u306e\u5834\u5408\uff09\n\n\u554f\u984c\u304c\u767a\u751f\u3057\u3066\u3044\u3056\u5224\u5225\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u300c\u30c4\u30fc\u30eb\u304c\u5c0e\u5165\u3055\u308c\u3066\u3044\u306a\u3044\uff01\u3067\u3082\u4eca\u66f4\u672c\u756a\u74b0\u5883\u306b\u624b\u3092\u5165\u308c\u3089\u308c\u306a\u3044\uff01\u300d\u306a\u3093\u3066\u3044\u3046\u8a71\u306f\u3088\u304f\u805e\u304d\u307e\u3059\u3002\u30b7\u30e3\u30fc\u30ed\u30c3\u30af\u30db\u30fc\u30e0\u30ba\u306e\u6709\u540d\u306a\u53f0\u8a5e\uff08**When you have eliminated the impossible, whatever remains, however improbable, must be the truth.**\uff09\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u4e00\u898b\u5f53\u305f\u308a\u524d\u3067\u554f\u984c\u304c\u306a\u3044\u3068\u601d\u3063\u3066\u3044\u305f\u3053\u3068\u306b\u601d\u308f\u306c\u898b\u843d\u3068\u3057\u304c\u3042\u308a\u3001\u5b9f\u306f\u5de1\u308a\u3081\u3050\u3063\u3066\u5206\u304b\u3063\u305f\u7d50\u679c\u3001\u521d\u6b69\u7684\u304c\u30df\u30b9\u304c\u539f\u56e0\u3067\u3057\u305f\u3001\u3001\u3001\u3068\u3044\u3046\u7d4c\u9a13\u3092\u3055\u308c\u305f\u65b9\u3082\u3044\u3089\u3063\u3057\u3083\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\u3053\u3046\u3057\u305f\u72b6\u6cc1\u3092\u9632\u3050\u305f\u3081\u306b\u306f\u300c\u554f\u984c\u304c\u306a\u3044\u300d\u3068\u5224\u65ad\u3057\u305f\u6839\u62e0\u306f\u3001\u4eee\u306b\u5f53\u305f\u308a\u524d\u3060\u3068\u601d\u3046\u3053\u3068\u3067\u3082\u3057\u3063\u304b\u308a\u3068\u8a18\u9332\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u306b\u306f\u3001**\u30b7\u30b9\u30c6\u30e0\u8a2d\u8a08\u306e\u6bb5\u968e\u3067\u3001\u30c8\u30e9\u30d6\u30eb\u767a\u751f\u6642\u306b\u3069\u3053\u304b\u3089\u3069\u3046\u3044\u3046\u624b\u6bb5\u3067\u554f\u984c\u5224\u5225\u3092\u884c\u3046\u306e\u304b\u3092\u5341\u5206\u306b\u8003\u616e\u3057\u3001\u4e88\u3081\u69cb\u7bc9\u6bb5\u968e\u304b\u3089\u6700\u4f4e\u9650\u306e\u554f\u984c\u5224\u5225\u306b\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3057\u3066\u304a\u304d\u3001\u30c4\u30fc\u30eb\u306e\u5229\u7528\u6cd5\u306e\u78ba\u8a8d\u3084\u6b63\u5e38\u6642\u306e\u30c7\u30fc\u30bf\u306e\u53ce\u96c6\u3092\u884c\u3063\u3066\u304a\u304f**\u3053\u3068\u306f\u91cd\u8981\u306a\u3053\u3068\u3067\u3059\u3002\n\n\n```txt:mtr\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\n# yum install -y mtr\n```\n\n```txt:traceroute\uff08Linux\uff09\u306e\u5c0e\u5165\n# yum install -y traceroute\n```\n\n```txt:whois(IP\u30a2\u30c9\u30ec\u30b9\u3084\u30c9\u30e1\u30a4\u30f3\u306e\u60c5\u5831\u691c\u7d22\u30c4\u30fc\u30eb\uff09\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\n# yum install -y whois\n```\n```txt:nmap(\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u30c4\u30fc\u30eb)\u306e\u5c0e\u5165\n# yum install -y nmap\n```\n```txt:tcpdump\uff08\u30d1\u30b1\u30c3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u30c4\u30fc\u30eb\uff09\u306e\u5c0e\u5165\n# yum install -y tcpdump\n```\n\n#3. ping/mtr/traceroute/tracert\u306e\u57fa\u672c\u3068\u6ce8\u610f\u70b9\n\n-  ping\u306fICMP\u3092\u5229\u7528\u3002\n    -  \u4ee5\u4e0b\u306f\u983b\u51fa\u3002\u591a\u5206\u6b63\u5e38\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u30920\u306b\u3057\u305f\u304b\u3063\u305f\u304b\u3089echo reply\u304c0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3060\u3068\u601d\u308f\u308c\u308b\u3002\n        -  echo reply(Type 0)\n        -  destination unreachable(Type 3)\n            -  code 1: host unreachable\n            -  code 3: port unreachable\n            -  code 4: packet too big\n        -  echo request(Type 8)\n        -  time exceeded(Type 11)\n    -  iptables\u3067\u3044\u3046\u3068\u3001ping\u306e\u5b9b\u5148\u30b5\u30fc\u30d0\u30fc\u306b\u3066\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u76f8\u5f53\u306e\u8a2d\u5b9a\u304c\u5b58\u5728\u3057\u306a\u3044\u3068\u305d\u306e\u5b9b\u5148\u30b5\u30fc\u30d0\u30fc\u306fICMP\u30d1\u30b1\u30c3\u30c8\u3092\u53d7\u4fe1\u3057\u306a\u3044\u3001\u3082\u3057\u304f\u306f\u5fdc\u7b54\u3057\u306a\u3044\u3002\n        -  `-A INPUT  -p icmp --icmp-type 8 -j ACCEPT`\n        -  `-A OUTPUT -p icmp --icmp-type 0 -j ACCEPT`\n    -  ICMP\u306fTCP\u3067\u3082UDP\u3067\u3082\u306a\u3044\u306e\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u306f\u5b58\u5728\u3057\u306a\u3044\u3002\u300c\u3042\u308c\u30fc\u3001\u305d\u308c\u3060\u3063\u305f\u3089NAPT\u3067\u304d\u306a\u3044\u3093\u3058\u3083\u306a\u3044\u306e\uff1f\u300d\u3068\u601d\u3046\u306e\u306f\u5f53\u7136\u3060\u304c\u3001\u5b9f\u969bping\u3067NAPT\u8d8a\u3048\u3067\u304d\u3066\u3057\u307e\u3046\u30b1\u30fc\u30b9\u306b\u906d\u9047\u3059\u308b\u3053\u3068\u306f\u591a\u3044\uff08\u3060\u304b\u3089\u3053\u305d\u3001ICMP\u304cTCP\u3084UDP\u306e\u4e00\u7a2e\u3067\u3042\u308b\u304b\u306e\u3088\u3046\u306a\u8aa4\u89e3\u3092\u3057\u3066\u3044\u308b\u4eba\u3082\u591a\u3044\u306e\u3060\u304c\uff09\u3002\u305d\u306e\u5834\u5408\u306f\u3001ICMP\u7cfb\u306b\u306fIdentifier\u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u3044\u3046\u3082\u306e\u304c\u5b58\u5728\u3057\u3001\u3053\u308c\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u4ee3\u7528\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u3002\n-  mtr\u306fICMP\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3002TCP\u3084UDP\u3092\u4f7f\u3046\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306a\u306e\u3067\u3001Firewall\u306e\u8a2d\u5b9a\u306b\u3088\u3063\u3066\u306fICMP\u3092\u901a\u3055\u306a\u3044\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u3066\u3082\u30ec\u30dd\u30fc\u30c8\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3002\u4f7f\u3044\u65b9\u306f\u6b21\u9805\u53c2\u7167\u3002\n-  traceroute(Linux)\u306fUDP\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30dd\u30fc\u30c8\u756a\u53f7\u306f\u7279\u306b\u5b9a\u307e\u3063\u3066\u3044\u306a\u3044\u3002ICMP(-I\u30aa\u30d7\u30b7\u30e7\u30f3\uff09\u3084TCP(-T -p 80\u3067\u30dd\u30fc\u30c880\u756a\u3092\u6307\u5b9a)\u306b\u5909\u66f4\u53ef\u80fd\u3002\u4ed6\u306b\u3001-A\u3068\u304b-e\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u6709\u52b9\u306a\u306e\u3067\u3001\u4ee5\u4e0b\u3082\u53c2\u7167\u306e\u3053\u3068\u3002\n    - [ICMP\u304c\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u3066\u3044\u308b\u74b0\u5883\u3067\u306emtr\u3084traceroute\u306e\u53d6\u5f97\u65b9\u6cd5](http://qiita.com/testnin2/items/efc9af88f0975c647e1b)\n    -  [traceroute -A\u3068traceroute -e](http://qiita.com/testnin2/items/f03c9e41fc827aaee625)\n-  tracert(Windows)\u306fICMP\u3092\u5229\u7528\uff08\u5909\u66f4\u4e0d\u53ef\uff09\u3002Windows\u3068Linux\u3067\u6319\u52d5\u304c\u9055\u3046\uff01\u3063\u3066\u9a12\u3050\u524d\u306b\u3001\u305d\u3082\u305d\u3082\u5229\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u304c\u7570\u306a\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002\n    -  DNS\u306b\u3088\u308b\u30db\u30b9\u30c8\u540d\u89e3\u6c7a\u304c\u4e0d\u8981\u3067\u3042\u308b\u5834\u5408\uff08\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u306a\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7d4c\u8def\u7b49\uff09\u3067\u3042\u308c\u3070\u3001-d\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3068\u3088\u3044\u3002tracert\u304c\u9045\u3044\uff01\u3068\u9a12\u3044\u3067\u3044\u308b\u4eba\u306e\u539f\u56e0\u306e\u6b86\u3069\u304c-d\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u3044\u306a\u3044\u3053\u3068\u304c\u539f\u56e0\u3002\n- \u30eb\u30fc\u30bf\u30fc\u3092\u901a\u308b\u5ea6\u306bIP\u30d8\u30c3\u30c0\u306eTTLmtr/traceroute/tracert\u306a\u3069\u306f\u3001\u57fa\u672c\u7684\u306b\u306fIP\u30d8\u30c3\u30c0\u306eTTL(\u30eb\u30fc\u30bf\u3092\u901a\u904e\u3067\u304d\u308b\u6700\u5927\u56de\u6570)\u5024\u304c1\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u51fa\u3001TTL=2\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u51fa\u3001\u3001\u3001\u3068\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3057\u305f\u7aef\u672b\u304b\u3089\u9001\u51fa\u3057\u3001TTL\u5024\u304c0\u306b\u306a\u3063\u305f\u6642\u70b9\u3067\u30eb\u30fc\u30bf\u30fc\u306f\u30d1\u30b1\u30c3\u30c8\u3092\u7834\u68c4\u3057\u3066ICMP Time Exceed(Type 11)\u3092\u8fd4\u3059\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3002\u9014\u4e2d\u7d4c\u8def\u306e\u30eb\u30fc\u30bf\u30fc\u304cICMP Time Exceeded(Type 11)\u306e\u9001\u4fe1\u3092\u30d6\u30ed\u30c3\u30af\u3057\u3066\u3044\u308c\u3070\u3001\u5f53\u7136\u305d\u306e\u30eb\u30fc\u30bf\u30fc\u304b\u3089\u306e\u60c5\u5831\u306f\u5f97\u3089\u308c\u306a\u3044\u3002\n    - mtr\u3084traceroute\u306b\u3066ICMP/TCP/UDP\u306e\u3044\u305a\u308c\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3063\u305f\u3068\u3057\u3066\u3082\u3001\u7d4c\u8def\u9014\u4e2d\u306e\u30eb\u30fc\u30bf\u30fc\u304b\u3089\u306e\u8fd4\u308a\u306e\u30d1\u30b1\u30c3\u30c8\u306fICMP Time Exceeded(Type 11)\u306b\u306a\u308b\u3002\u3088\u3063\u3066\u3001iptables\u3067\u3044\u3046\u3068\u3001`-A INPUT  -p icmp --icmp-type 11 -j ACCEPT`\u76f8\u5f53\u306e\u8a2d\u5b9a\u304c\u30b3\u30de\u30f3\u30c9\u9001\u4fe1\u5143\u306b\u5b58\u5728\u3057\u306a\u3044\u3068ICMP Time Exceeded(Type 11)\u3092\u53d7\u3051\u53d6\u308c\u306a\u3044\u3002\n    - \u6700\u7d42\u5230\u9054\u5148\u304b\u3089\u9001\u4fe1\u5143\u304c\u53d7\u4fe1\u3059\u308b\u30d1\u30b1\u30c3\u30c8\u306f\u3001ICMP Time Exceeded(Type 11)\u3067\u306f\u306a\u3044\u3002\u305d\u308c\u305e\u308c\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u4f7f\u7528\u6642\u306b\u5fdc\u3058\u3066\u3001ICMP echo reply(Type 0)\u304a\u3088\u3073TCP/UDP\u3067\u6307\u5b9a\u3057\u305f\u305d\u308c\u305e\u308c\u306e\u30dd\u30fc\u30c8\u304b\u3089\u306e\u5fdc\u7b54\u306b\u306a\u308b\u3002\n    - \u5404\u30b3\u30de\u30f3\u30c9\u306b\u3066\u51fa\u529b\u3055\u308c\u308b\u6642\u9593\u306f\u3001\u3053\u306eRTT(Round Trip Trime)\u306b\u4ed6\u306a\u3089\u306a\u3044\u3002\u3064\u307e\u308a\u3001\u9001\u4fe1\u5143\u304b\u3089\u30d1\u30b1\u30c3\u30c8\u3092\u6295\u3052\u3066ICMP Time Exceeded(Type 11)\u304c\u8fd4\u3063\u3066\u6765\u308b\u307e\u3067\u306e\u6642\u9593\u3092\u6307\u3059\u3002\n    - \u300c\u3042\u308c\uff1f\u9001\u4fe1\u5143\u3067\u306fICMP\u306b\u3088\u308b\u5916\u90e8\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u306f\u5168\u90e8\u906e\u65ad\u3057\u3066\u3044\u308b\u7b48\u306a\u306e\u306b\u3061\u3083\u3093\u3068mtr\u3068\u304btraceroute\u306f\u5b9f\u884c\u3067\u304d\u3066\u3044\u308b\u3088\uff1f\u300d\u3068\u3044\u3046\u4eba\u306f\u3001\u304a\u305d\u3089\u304f\u5b9a\u756a\u306e\u3088\u3046\u306b\u5165\u308c\u3066\u3044\u308b`-A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT`\u306e\u304a\u304b\u3052\u306e\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3002iptables\u306eman\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\n        - ESTABLISHED: meaning that the packet is associated with a connection which has seen packets in both directions\n        - RELATED: meaning  that the packet is starting a new connection, but is associated with an existing connection, such as an FTP data transfer, or **an ICMP error**.\n    - Firewall\u306a\u3069\u304c\u539f\u56e0\u3067\u3001\u3042\u308b\u4e2d\u7d99\u30eb\u30fc\u30bf\u30fc\u3084\u6700\u7d42\u5b9b\u5148\u304b\u3089\u5148\u306e\u5fdc\u7b54\u3092\u5168\u304f\u53d7\u3051\u53d6\u308c\u306a\u3044\u5834\u5408\u306f\u3001\u9001\u4fe1\u5143\u7aef\u672b\u304b\u3089TTL\u3092\uff11\u3064\u305a\u3064\u5897\u3084\u3057\u3066\u8a66\u884c\u3057\u3066\u3082\u5168\u90e8NG\u3068\u306a\u308b\u7d50\u679c\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u51fa\u529b\u7d50\u679c\u306b\u30a2\u30b9\u30bf\u30ea\u30b9\u30af\uff08\uff0a\uff09\u304cTTL\u6700\u5927\u8a66\u884c\u5024\u307e\u3067\u7d9a\u304f\u3053\u3068\u306b\u306a\u308b\u3002\n\n\n\n#4. \u63a5\u7d9a\u3067\u304d\u306a\u3044\u30fb\u63a5\u7d9a\u304c\u4e0d\u5b89\u5b9a\uff01\uff1f\u5b9f\u4f8b\u3092\u901a\u3057\u3066\u898b\u3066\u307f\u3088\u3046\u3002\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e2\u62e0\u70b9\u9593\u306b\u304a\u3051\u308b\u7d4c\u8def\u306f\u3088\u304f\u5909\u66f4\u3055\u308c\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u884c\u304d\u306e\u7d4c\u8def\uff08\u5f80\u8def\uff09\u3068\u5e30\u308a\u306e\u7d4c\u8def\uff08\u5fa9\u8def\uff09\u304c\u7570\u306a\u308b\u3053\u3068\u3082\u591a\u304f\u5b58\u5728\u3057\u307e\u3059\u3002\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u901a\u4fe1\u554f\u984c\u306f\u3001\u5f80\u8def\u30fb\u5fa9\u8def\u306e\u53cc\u65b9\u306b\u554f\u984c\u304c\u5b58\u5728\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u3001SoftLayer\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u901a\u4fe1\u554f\u984c\u306e\u30c1\u30b1\u30c3\u30c8\u3092\u8d77\u7968\u3057\u305f\u969b\u306b\u306f\u3001\u30b5\u30dd\u30fc\u30c8\u306bEnd to end\u3067\u306e\u53cc\u65b9\u5411\u306emtr\uff08bidirectional mtr)\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u3002\u6570\u56de\u30ec\u30d9\u30eb\u3060\u3068\u305f\u307e\u305f\u307e\u30c9\u30ed\u30c3\u30d7\u3057\u3066\u3044\u305f\u3068\u3044\u3046\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067\u3001\u5341\u5206\u306a\u6570\u306e\u65bd\u884c\u3092\u9451\u307f\u308b\u3068\u3001`-c 100`\u3050\u3089\u3044\u3067\u53d6\u5f97\u3059\u308b\u306e\u304c\u63a8\u5968\u3067\u3059\u3002\n\nmtr\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u65b9\u6cd5\u4f8b\n\n- -r: report\u5f62\u5f0f\n- -w: \u30db\u30b9\u30c8\u540d\u3092\u77ed\u7e2e\u305b\u305a\u306b\u8868\u793a\n- -n: \u30db\u30b9\u30c8\u540d\u3067\u306f\u306a\u304fIP\u30a2\u30c9\u30ec\u30b9\u306e\u307f\u8868\u793a\uff08DNS lookup\u306b\u3088\u308b\u30db\u30b9\u30c8\u540d\u51fa\u529b\u304c\u610f\u5473\u304c\u306a\u3044\u74b0\u5883\u3067\u306f\u63a8\u5968\u3002\u7279\u306b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3092\u7d4c\u7531\u3057\u306a\u3044\u74b0\u5883\u3067\u306f\u30db\u30b9\u30c8\u540d\u306b\u3088\u308b\u540d\u524d\u89e3\u6c7a\u306f\u610f\u5473\u304c\u306a\u3044\u306e\u3060\u304b\u3089\u3001\u591a\u304f\u306e\u30b1\u30fc\u30b9\u3067\u4ed8\u3051\u308b\u65b9\u304c\u826f\u3044\uff09\n- -b: \u30db\u30b9\u30c8\u540d\u3068IP\u30a2\u30c9\u30ec\u30b9\u306e\u4e21\u65b9\u3092\u8868\u793a\n- -c: ping\u306e\u8ee2\u9001\u6570\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f10\u56de\u3002SoftLayer\u306b\u30ec\u30dd\u30fc\u30c8\u3059\u308b\u6642\u306b\u306f100\u56de\u3050\u3089\u3044\u306b\u3057\u3066\u304a\u304f\u3053\u3068\u3092\u63a8\u5968\u3002\n- -T -P 80: -T\u3067TCP\u3092-P\u3067port\u756a\u53f7\u3092\u6307\u5b9a\uff08\u3053\u306e\u4f8b\u3060\u3068port\u756a\u53f780\u3092\u6307\u5b9a\uff09\u3002\n\n```txt:mtr\u306e\u5b9f\u884c\u4f8b\n#\u30b5\u30fc\u30d0\u30fcA(161.202.xx.xx) -> \u30b5\u30fc\u30d0\u30fcB(169.47.xx.xx)\u3078\u306emtr\u30ec\u30dd\u30fc\u30c8\n#\u4eca\u56de\u306f\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u63a5\u7d9a\u306a\u306e\u3067\u30db\u30b9\u30c8\u540d\u89e3\u6c7a\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u3066-n\u306e\u4ee3\u308f\u308a\u306b-b\u3092\u5229\u7528\u3002\n\n# mtr -rwb -c 100 169.47.xx.xx\nStart: Tue Feb 14 02:03:30 2017\nHOST: powertokyo.softlayer.com                              Loss%   Snt   Last   Avg  Best  Wrst StDev\n  1.|-- xx.xx.xxxx.ip4.static.sl-reverse.com (161.202.xx.xx)   0.0%   100    0.7   0.7   0.5   3.7   0.3\n  2.|-- ae11.dar02.tok02.networklayer.com (161.202.118.132)    0.0%   100    0.3   0.5   0.3   7.8   0.9\n  3.|-- ae9.bbr01.eq01.tok01.networklayer.com (50.97.19.134)   0.0%   100    0.8   0.9   0.7   4.6   0.4\n  4.|-- ae2.bbr02.eq01.sjc02.networklayer.com (50.97.18.160)   0.0%   100   99.3  97.1  96.2 100.4   0.7\n  5.|-- ae6.cbs02.eq01.sjc02.networklayer.com (50.97.17.78)    8.0%   100   98.0  98.4  95.7 100.9   0.9\n  6.|-- ae0.cbs02.cs01.lax01.networklayer.com (50.97.17.86)    2.0%   100  103.6 104.0 102.5 111.9   1.1\n  7.|-- ae7.cbs01.cs01.lax01.networklayer.com (50.97.17.60)   44.0%   100  103.0 104.3 103.0 113.0   1.4\n  8.|-- ae0.cbs01.eq01.dal03.networklayer.com (50.97.17.81)   64.0%   100  132.2 132.1 131.1 134.1   0.5\n  9.|-- ae0.dar01.dal10.networklayer.com (50.97.17.9)          0.0%   100  130.1 131.3 129.9 154.4   2.9\n 10.|-- ae0.ppr04.dal10.networklayer.com (169.46.118.135)      0.0%   100  134.0 134.3 133.0 136.1   0.6\n 11.|-- po4.fcr01b.dal10.networklayer.com (169.46.118.171)     0.0%   100  132.5 133.3 132.4 137.9   0.8\n 12.|-- xx.xx.xxxx.ip4.static.sl-reverse.com (169.47.xx.xx)  0.0%   100  130.4 130.8 130.1 132.4   0.5\n\n#\u30b5\u30fc\u30d0\u30fcB(169.47.xx.xx) -> \u30b5\u30fc\u30d0\u30fcA(161.202.xx.xx)\u3078\u306emtr\u30ec\u30dd\u30fc\u30c8\n# mtr -rwb -c 100 161.202.xx.xx\nStart: Tue Feb 14 02:08:07 2017\nHOST: powerdallas.softlayer.com                            Loss%   Snt   Last   Avg  Best  Wrst StDev\n  1.|-- ???                                                  100.0   100    0.0   0.0   0.0   0.0   0.0\n  2.|-- ae103.ppr02.dal10.networklayer.com (169.46.118.158)   0.0%   100    2.5   2.2   1.5   2.9   0.0\n  3.|-- ae3.dar01.dal10.networklayer.com (169.46.118.130)     0.0%   100    0.5   1.2   0.4  26.0   3.4\n  4.|-- ae10.cbs01.eq01.dal03.networklayer.com (50.97.17.8)  76.0%   100    3.0   3.1   2.2   6.8   0.8\n  5.|-- ae0.cbs01.cs01.lax01.networklayer.com (50.97.17.80)  21.0%   100   31.8  31.5  30.4  48.5   1.9\n  6.|-- ae7.cbs02.cs01.lax01.networklayer.com (50.97.17.61)  21.0%   100   31.4  31.7  30.6  51.7   3.0\n  7.|-- ae0.cbs02.eq01.sjc02.networklayer.com (50.97.17.87)  14.0%   100   38.5  38.4  37.5  40.0   0.2\n  8.|-- ae24.bbr02.eq01.sjc02.networklayer.com (50.97.17.79)  0.0%   100   53.4  39.3  35.9 121.6  11.0\n  9.|-- ae0.bbr01.eq01.tok01.networklayer.com (50.97.18.161)  0.0%   100  131.6 131.8 131.4 135.0   0.4\n 10.|-- ae5.dar01.tok02.networklayer.com (50.97.19.133)       0.0%   100  132.8 132.0 131.8 137.1   0.5\n 11.|-- po1.fcr01a.tok02.networklayer.com (161.202.118.131)   0.0%   100  132.0 130.8 129.9 132.3   0.7\n 12.|-- xx.xx.xxxx.ip4.static.sl-reverse.com (161.202.xx.xx)    0.0%   100  130.3 130.3 129.9 130.7   0.0\n\nLoss%: \u30d1\u30b1\u30c3\u30c8\u306e\u6d88\u5931\u7387\uff08\u8fd4\u3063\u3066\u3053\u306a\u304b\u3063\u305f\u7387\uff09\nSnt: \u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3057\u305f\u56de\u6570\nLast/Avg/Best/Wrst: \u6700\u65b0/\u5e73\u5747/\u6700\u826f/\u6700\u60aa\u306eRTT(Round-Trip Time:\u30d1\u30b1\u30c3\u30c8\u304c\u30b3\u30de\u30f3\u30c9\u767a\u884c\u5143\u7aef\u672b\u304b\u3089\u884c\u3063\u3066\u8fd4\u3063\u3066\u304f\u308b\u6642\u9593)\u3002\u5358\u4f4d\u306fms\u3002\nStDev: \u6a19\u6e96\u504f\u5dee\u3002\u5e73\u5747\u5024\u5468\u8fba\u306b\u5024\u304c\u504f\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306e\u6307\u6a19\u3002\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u30d0\u30e9\u30c4\u30ad\u304c\u591a\u3044\u3002\n```\n\n- \u4e0a\u8a18\u306e\u89e3\u91c8\n    - DAR(Datacenter Aggregation Router)\u3084FCR(Frontend Customer Router)\u306a\u3069\u306e\u610f\u5473\u3092\u77e5\u308a\u305f\u3051\u308c\u3070\u3001SoftLayer\u306eNW\u69cb\u6210\u56f3\u3068\u3057\u3066\u306f\u3001http://www.softlayer.com/NETWORK \u3084http://knowledgelayer.softlayer.com/procedure/direct-link-connectivity-options \u306b\u6dfb\u4ed8\u3055\u308c\u3066\u3044\u308bpdf\u30d5\u30a1\u30a4\u30eb\u304c\u53c2\u8003\u306b\u306a\u308b\u3002\u3082\u3057\u3053\u3046\u3057\u305f\u7528\u8a9e\u306b\u6163\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u3001\u3053\u306e\u69cb\u6210\u56f3\u3092\u4e00\u5ea6\u3088\u304f\u8aad\u3093\u3067\u307f\u308b\u3068\u3088\u3044\u3002\uff08\u6ce8\uff1aCBS\u306fCore Backbone Switch\u3001PPR\u306fPod to Pod Router\u3089\u3057\u3044\u3002\uff09\n    - mtr\u30ec\u30dd\u30fc\u30c8\u306f\u3001\u884c\u304d\u306e\u7d4c\u8def\uff08\u5f80\u8def\uff09\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u304c\u5e30\u308a\u306e\u7d4c\u8def\uff08\u5fa9\u8def\uff09\u306f\u8868\u793a\u3057\u3066\u3057\u306a\u3044\u3002\u884c\u304d\u306e\u7d4c\u8def\u3068\u5e30\u308a\u306e\u7d4c\u8def\u306f\u5168\u304f\u7570\u306a\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u305f\u3081\u3001\u53cc\u65b9\u5411\u306emtr\u30ec\u30dd\u30fc\u30c8\u306f\u91cd\u8981\u3002\n    -  **ICMP\u30d1\u30b1\u30c3\u30c8\u306e\u901a\u4fe1\u91cf\u3092\u308f\u3056\u3068\u5236\u9650\uff08ICMP rate limiting\uff09\u3057\u3066\u3044\u308b\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3082\u3044\u308b\u305f\u3081\u3001\u4e00\u898b\u30d1\u30b1\u30c3\u30c8\u30ed\u30b9\u304c\u767a\u751f\u3057\u3066\u3044\u305f\u308a\u3001\u5927\u304d\u306a\u9045\u5ef6\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u3066\u3082\u6b21\u306ehop\u3067Loss%\u304c0\u3067\u3042\u3063\u305f\u308aLatency\u304c\u6539\u5584\u3055\u308c\u3066\u3044\u308c\u3070\u554f\u984c\u306a\u3057\u3068\u307f\u306a\u3057\u3066\u3088\u3044\u3002**\n        - \u4f8b\u3048\u3070\u4e0a\u8a18\u306emtr\u306e\u4f8b\u306b\u304a\u3044\u3066\u3001\u9014\u4e2d\u3067\u4e00\u898b\u30d1\u30b1\u30c3\u30c8\u30ed\u30b9\u304c\u767a\u751f\u3057\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u308b(lax01\u3084dal03\u306e\u8fba\u308a\uff09\u304c\u3001\u3088\u308a\u5f8c\u6bb5\u3067ICMP\u30d1\u30b1\u30c3\u30c8\u3092100\u56de\u9001\u3063\u3066\u5168\u90e8\u5230\u9054\u3067\u304d\u3066\u3044\u308b\uff08Loss%=0)\u306e\u3067\u554f\u984c\u306a\u3057\u3002\n        - \u6700\u521d\u306ehop\u306fFCR\u3060\u304c\u3001ICMP\u306b\u53cd\u5fdc\u3057\u3066\u304f\u308c\u308bDC\u3068\u305d\u3046\u3067\u306a\u3044DC\u304c\u3042\u308b\u307f\u305f\u3044\u3002TOK02\u3067\u306f\u53cd\u5fdc\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3060\u304c\u3001DAL10\u3067\u306f\u53cd\u5fdc\u3057\u3066\u304f\u308c\u306a\u3044\u307f\u305f\u3044\u3002\u3069\u3061\u3089\u306e\u5834\u5408\u3067\u3042\u3063\u3066\u3082\u3001\u305d\u306e\u5f8c\u6bb5\u306ehop\u3067\u30d1\u30b1\u30c3\u30c8\u30ed\u30b9\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7684\u306b\u306f\u554f\u984c\u306a\u3057\u3002\n    - Latency\u306e\u6642\u9593\u304c\u5897\u3048\u305f\u5834\u6240\u306f\u3001\u4e00\u822c\u7684\u306b\u306f\u305d\u3053\u3067\u9060\u304f\u306b\u30d1\u30b1\u30c3\u30c8\u304c\u8ee2\u9001\u3055\u308c\u305f\u3068\u8003\u3048\u308b\u3068\u81ea\u7136\u3002\u3053\u306e\u4f8b\u3060\u3068\u3001tok01\u3068sjc02\u306e\u9593\uff08100msec\u7a0b\u5ea6\uff09\u3084\u3001lax01\u3068dal03(30msec\u7a0b\u5ea6\uff09\u306e\u9593\u306f\u305d\u308c\u306a\u308a\u306b\u96e2\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u4e88\u60f3\u3055\u308c\u308b\u3002\n    - \u9014\u4e2d\u7d4c\u8def\u306eIP\u30a2\u30c9\u30ec\u30b9\u306e\u6240\u6709\u7d44\u7e54\u306f\u8ab0\u304b\u3092\u8abf\u3079\u308b\u305f\u3081\u306b\u306f\u3001`whois\u30b3\u30de\u30f3\u30c9`\u304c\u6709\u52b9\u3002\n\n```txt:whois\u306e\u5b9f\u884c\u4f8b\n\n# whois 161.202.118.132\n\uff08\u9014\u4e2d\u7565\uff09\norganisation:   ORG-STI12-RIPE\norg-name:       SoftLayer Technologies, Inc.\norg-type:       LIR\naddress:        14001 N.Dallas Parkway,Suite M100\naddress:        75240\naddress:        Dallas TX\naddress:        UNITED STATES\n\uff08\u9014\u4e2d\u7565\uff09\n```\n\n\n#5. Bluemix Infrastructure(SoftLayer)\u3067\u306e\u3042\u308b\u3042\u308b\u554f\u984c\u306e\u4e8b\u4f8b\n\n##5.1 SoftLayer\u6240\u6709\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\uff08BBR\u3084DAR\uff09\u306b\u30d1\u30b1\u30c3\u30c8\u304c\u5230\u9054\u3067\u304d\u306a\u3044\n\n- SoftLayer\u306bDDOS\u9632\u5fa1\u3067\u30b5\u30fc\u30d0\u30fc\u306b\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u8a72\u5f53IP\u3078\u306e\u63a5\u7d9a\u304c\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f(DDOS\u306f\u4e0d\u7279\u5b9a\u591a\u6570\u304b\u3089\u306e\u653b\u6483\u306a\u306e\u3067\u3001\u63a5\u7d9a\u5148\u3067\u7d5e\u308b\uff09\u3002\n    - SoftLayer\u306bTicket\u3092\u8d77\u7968\u3057\u3066\u3001NOC(Network Operation Center)\u304b\u3089\u78ba\u8a8d\u3092\u5f97\u308b\u3002\n- SoftLayer\u306bSPAM\u9632\u5fa1\u3067\u7279\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\u30ec\u30f3\u30b8\u304b\u3089\u306e\u63a5\u7d9a\u304c\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f\uff08\u63a5\u7d9a\u5143\u3092\u7d5e\u308b\uff09\u3002\n    - SoftLayer\u306bTicket\u3092\u8d77\u7968\u3057\u3066\u3001NOC(Network Operation Center)\u304b\u3089\u78ba\u8a8d\u3092\u5f97\u308b\u3002\n    - \u4e16\u306e\u4e2d\u7684\u306b\u8a72\u5f53IP\u304cSPAM\u3068\u3057\u3066\u8a8d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306f\u3001spamhaus\u306e\u60c5\u5831\u304c\u53c2\u8003\u306b\u306a\u308b\u3002https://www.spamhaus.org/lookup/\n\n##5.2 SoftLayer\u304b\u3089\u30d1\u30b1\u30c3\u30c8\u304c\u5c4a\u304b\u306a\u3044\n\n- SoftLayer\u306f\u539f\u5247Outbound\u3092\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3057\u307e\u305b\u3093\u304c\u3001\u552f\u4e00\u306e\u4f8b\u5916\u3068\u3057\u3066OP25B\uff08Outbound Port 25 Blocking)\u5bfe\u7b56\u3068\u3057\u306625\u756a\u30dd\u30fc\u30c8\u3078\u306eOutbound\u901a\u4fe1\u306f\u30d6\u30ed\u30c3\u30af\u3057\u3066\u3044\u307e\u3059\u3002\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u969b\u306b\u306f\u3001submission port\u3068\u3057\u306625\u756a\u4ee5\u5916\u3092\u5229\u7528\u3057\u3066\u3044\u308bSendGrid\u306a\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u307e\u3057\u3087\u3046\u3002\n    - http://qiita.com/testnin2/items/ceb27d418a017c0c3490\n    - https://knowledgelayer.softlayer.com/procedure/outbound-email-port-25\n\n##5.3 \u30b5\u30fc\u30d0\u30fc\u307e\u3067\u30d1\u30b1\u30c3\u30c8\u304c\u5230\u9054\u3067\u304d\u306a\u3044\n\n- Firewall\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f\u3002\n    - Linux\u3067\u3042\u308c\u3070`iptables -L -v -n`\u306a\u3069\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u60c5\u5831\u3092\u78ba\u8a8d\u53ef\u80fd\u3002\n    - nmap\u306a\u3069\u3067\u5916\u90e8\u304b\u3089\u30dd\u30fc\u30c8\u30b9\u30ad\u30e3\u30f3\u3092\u304b\u3051\u3066\u30dd\u30fc\u30c8\u306e\u958b\u9589\u78ba\u8a8d\u53ef\u80fd\u3002\n- OS\u4ed8\u5c5e\u306eFirewall\u3067\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3055\u308c\u3066\u3044\u305f\n    - Windows\u3067McAfee VirusScan\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u3001Access Protection\u6a5f\u80fd\u306b\u3088\u3063\u3066\u5fc5\u8981\u306a\u30dd\u30fc\u30c8\u304c\u30d6\u30ed\u30c3\u30af\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n- Private VLAN\u9593\u306e\u901a\u4fe1\u3084\u540c\u4e00Private VLAN\u5185\u3067\u3082\u7570\u306a\u308b\u30b5\u30d6\u30cd\u30c3\u30c8\u9593\u306e\u901a\u4fe1\u306f\u3001VLAN Spanning=ON\u306b\u3059\u308b\u304bVRF\u306e\u6709\u52b9\u5316\u304c\u5fc5\u8981\u3002\n\n##5.4 \u5c4a\u304f\u6642\u3082\u3042\u308b\u304c\u6642\u9593\u5e2f\u306b\u3088\u3063\u3066\u306f\u5c4a\u304b\u306a\u3044\u6642\u3082\u3042\u308b\u5834\u5408\u306e\u4f8b\n\n- SoftLayer\u306eBackbone network\u306e\u30b1\u30fc\u30d6\u30eb\u304c\u5207\u308c\u3066\u304a\u308a\u3001\u8fc2\u56de\u7d4c\u8def\u3092\u901a\u3063\u3066\u3044\u308b\u3002\n    - \u65e2\u77e5\u306e\u969c\u5bb3\u60c5\u5831\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n- SoftLayer\u5185\u306eVLAN/\u7d4c\u8def\u60c5\u5831\u304c\u6b63\u3057\u304f\u306a\u304b\u3063\u305f\uff08\u8868\u793a\u4e0a\u306f\u6b63\u3057\u304f\u3066\u3082\u3001\u5b9f\u6a5f\u3067\u7247\u7cfb\u306b\u3057\u304b\u6b63\u3057\u304f\u69cb\u6210\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001repush\u304c\u5fc5\u8981\uff09\n    - SoftLayer\u306bTicket\u3092\u8d77\u7968\u3057\u3066\u3001\u69cb\u6210\u3092repush\u3057\u3066\u3082\u3089\u3046\n- Vyatta\u306econntrack\u5024\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u306e\u305f\u3081\u3001\uff08\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u304b\u3089\u306e\u653b\u6483\u306a\u3069\u3082\u542b\u3081\u3066\uff09\u9ad8\u8ca0\u8377\u6642\u306b\u30d1\u30b1\u30c3\u30c8\u304cdrop\u3055\u308c\u3066\u3044\u305f\n    - Vyatta\u3067\u306f`table-size`, `hash-size`, `expect-table-size`\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306f\u5c0f\u3055\u3059\u304e\u308b\u306e\u3067\u3088\u308a\u5927\u304d\u306a\u5024\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u3092\u63a8\u5968\n\n\n#6. \u3088\u308a\u7d30\u90e8\u306e\u5207\u308a\u5206\u3051\u306e\u305f\u3081\u306b\u306f\n\n\u8a72\u5f53\u30b5\u30fc\u30d0\u30fc\u306b\u3066\n\n- \u30d1\u30b1\u30c3\u30c8\u304c\u672c\u5f53\u306b\u5c4a\u3044\u3066\u3044\u308b\u306e\u304b\uff1f\n- \u3069\u3046\u3044\u3046\u30d1\u30b1\u30c3\u30c8\u304c\u5c4a\u3044\u3066\u3044\u308b\u306e\u304b\uff1f\n- \u3069\u3046\u3044\u3046\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u4fe1\u3057\u3066\u3044\u308b\u306e\u304b\uff1f\n\n\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u5b9f\u969b\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u3059\u308b\u306e\u304c\u4e00\u756a\u3067\u3059\u3002Linux\u3067\u306ftcpdump\u306a\u3069\u3067\u30d1\u30b1\u30c3\u30c8\u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u3092\u53d6\u5f97\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\ntcpdump\u3067\u3088\u304f\u4f7f\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\n\n- -i: \u6307\u5b9a\u3057\u306a\u3044\u3068eth0\u306e\u3088\u3046\u306a\u7279\u5b9a\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u307f\u3057\u304b\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3057\u306a\u3044\u3002\u30d1\u30b1\u30c3\u30c8\u306e\u6319\u52d5\u3092\u7591\u3046\u5834\u5408\u306fany\u6307\u5b9a\u3092\u3059\u308b\n- -nn: IP\u30a2\u30c9\u30ec\u30b9/\u30dd\u30fc\u30c8\u756a\u53f7\u3067\u8868\u793a\n- host: \u8a72\u5f53\u306eIP\u3092\u542b\u3080\u30d1\u30b1\u30c3\u30c8\u306e\u307f\u3092\u8868\u793a\n- port: \u8a72\u5f53\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u307f\u3092\u8868\u793a\n- -s: \u30ad\u30e3\u30d7\u30c1\u30e3\u30fc\u3059\u308b\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\u3002-s0\u306f\u3059\u3079\u3066\u3002\n- -A: \u30d1\u30b1\u30c3\u30c8\u306e\u4e2d\u8eab\u3092ASCII\u8868\u793a\u3002HTTP\u30a2\u30af\u30bb\u30b9\u306e\u6642\u306b\u91cd\u5b9d\u3059\u308b\u3053\u3068\u304c\u3042\u308b\u3002\n\n\n```txt:tcpdump\u5b9f\u884c\u4f8b\n# tcpdump -i any -nn icmp\n# tcpdump -i any -nn host xx.xx.xx.xx\n# tcpdump -i eth1 -nn net 183.79.0.0/16\n\n#\u4ee5\u4e0b\u3060\u3068TCP\u3082UDP\u3082\u3069\u3061\u3089\u306e\u30dd\u30fc\u30c8\u3082\u78ba\u8a8d\u53ef\u80fd\n# tcpdump -i eth0 -nn 'icmp or port 80 or port 443' \n\n#\u30d1\u30b1\u30c3\u30c8\u306e\u4e2d\u8eab\u3092\u7701\u7565\u306a\u3057\u3067ASCII\u3067\u8868\u793a  \n# tcpdump -i any -nn -s0 -A port 80 \n```\n", "tags": ["ShinobiLayer", "SoftLayer", "Bluemix", "mtr", "traceroute"]}