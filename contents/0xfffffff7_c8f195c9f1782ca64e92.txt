{"context": " More than 1 year has passed since last update.HTTP2\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u300cnghttp2\u300d\u3092\u7d39\u4ecb\u3059\u308b\u30a8\u30f3\u30c8\u30ea\u3067\u3059\u3002\n\u4eca\u56de\u306f\u8d77\u52d5\u307e\u3067\u884c\u3044\u307e\u3059\u3002\n\u8d77\u52d5\u3059\u308b\u3060\u3051\u306a\u3089\u57fa\u672c\u7684\u306b\u516c\u5f0f\u306eGithub\u306b\u66f8\u3044\u3066\u3042\u308b\u901a\u308a\u306e\u624b\u9806\u3067\u3057\u305f\u3002\n\nUbuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nUbuntu 14.04 LTS\n\u30db\u30b9\u30c8\u540d\u306f\u300cnghttp2.test\u300d\u306b\u3057\u307e\u3057\u305f\u3002\n\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install make binutils autoconf  automake autotools-dev libtool pkg-config zlib1g-dev libcunit1-dev libssl-dev libxml2-dev libev-dev libevent-dev libjansson-dev libjemalloc-dev cython python3.4-dev\n\n\nnghttp2\u3092git\u304b\u3089\u53d6\u5f97\u3059\u308b\nsudo apt-get install git\ngit clone https://github.com/tatsuhiro-t/nghttp2\n\n\nmake\u3059\u308b\n\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u5165\u308c\u308b\u3002\nsudo apt-get install g++\nsudo apt-get upgrade gcc\nsudo apt-get install clang\n\n\u30d3\u30eb\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\ncd nghttp2\nautoreconf -i\nsudo automake\nsudo autoconf\n./configure\nsudo make\nsudo make install\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30d1\u30b9\u3092\u901a\u3059\u304b/usr/lib/\u3078\u30b3\u30d4\u30fc\u3059\u308b\nsudo cp /usr/local/lib/libnghttp2.so.5 /usr/lib/\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u30d3\u30eb\u30c9\u3059\u308b\nsphinx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nsudo apt-get install python3-pip\nsudo pip3 install sphinx\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092make\u3059\u308b\u3002\nsudo make html\n\n\u4ee5\u4e0b\u306e\u30d1\u30b9\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3055\u308c\u308b\u3002\ndoc/manual/html/\n\n\nHTTP2\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u4f7f\u3046\ngoogle\u306b\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3002\n\u300c-nas\u300d\u3067\u6642\u9593\u8a08\u6e2c\u3092\u3059\u308b\u3002\n# nghttp -nas https://google.co.jp/\n\n  responseEnd: the  time  when  last  byte of  response  was  received\n               relative to connectEnd\n requestStart: the time  just before  first byte  of request  was sent\n               relative  to connectEnd.   If  '*' is  shown, this  was\n               pushed by server.\n      process: responseEnd - requestStart\n         code: HTTP status code\n         size: number  of  bytes  received as  response  body  without\n               inflation.\n          URI: request URI\n\nsee http://www.w3.org/TR/resource-timing/#processing-model\n\nsorted by 'complete'\n\nresponseEnd requestStart  process code size request path\n   +52.51ms       +263us  52.25ms  301  222 /\n\n\u300c-nv\u300d\u3067\u30d5\u30ec\u30fc\u30e0\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3002\nvagrant@nghttp2:~/nghttp2$ nghttp -nv https://google.co.jp/\n[  5.015] Connected\n[  5.021][NPN] server offers:\n          * h2-15\n          * h2-14\n          * spdy/3.1\n          * spdy/3\n          * http/1.1\nThe negotiated protocol: h2-14\n[  5.029] recv SETTINGS frame <length=18, flags=0x00, stream_id=0>\n          (niv=3)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):65535]\n          [SETTINGS_MAX_FRAME_SIZE(0x05):16384]\n[  5.030] recv WINDOW_UPDATE frame <length=4, flags=0x00, stream_id=0>\n          (window_size_increment=983041)\n[  5.031] send SETTINGS frame <length=12, flags=0x00, stream_id=0>\n          (niv=2)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):65535]\n[  5.032] send SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  5.032] send HEADERS frame <length=36, flags=0x05, stream_id=1>\n          ; END_STREAM | END_HEADERS\n          (padlen=0)\n          ; Open new stream\n          :method: GET\n          :path: /\n          :scheme: https\n          :authority: google.co.jp\n          accept: */*\n          accept-encoding: gzip, deflate\n          user-agent: nghttp2/0.7.10-DEV\n[  5.036] recv SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  5.082] recv (stream_id=1) :status: 301\n[  5.082] recv (stream_id=1) alternate-protocol: 443:quic,p=0.5\n[  5.082] recv (stream_id=1) cache-control: public, max-age=2592000\n[  5.082] recv (stream_id=1) content-length: 222\n[  5.082] recv (stream_id=1) content-type: text/html; charset=UTF-8\n[  5.082] recv (stream_id=1) date: Fri, 27 Mar 2015 15:06:34 GMT\n[  5.082] recv (stream_id=1) expires: Sun, 26 Apr 2015 15:06:34 GMT\n[  5.082] recv (stream_id=1) location: https://www.google.co.jp/\n[  5.082] recv (stream_id=1) server: gws\n[  5.082] recv (stream_id=1) x-frame-options: SAMEORIGIN\n[  5.082] recv (stream_id=1) x-xss-protection: 1; mode=block\n[  5.082] recv HEADERS frame <length=202, flags=0x04, stream_id=1>\n          ; END_HEADERS\n          (padlen=0)\n          ; First response header\n[  5.082] recv DATA frame <length=222, flags=0x01, stream_id=1>\n          ; END_STREAM\n[  5.083] recv PING frame <length=8, flags=0x00, stream_id=0>\n          (opaque_data=0000000000000000)\n[  5.083] send GOAWAY frame <length=8, flags=0x00, stream_id=0>\n          (last_stream_id=0, error_code=NO_ERROR(0x00), opaque_data(0)=[])\n\n\nSSL\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u4f7f\u3046\nCommonName\u300cnghttp2.test\u300d\u3067\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u306a\u3057\u3002\n# openssl genrsa 2048 > server.key\n# openssl req -new -key server.key > server.csr\nCommon Name (e.g. server FQDN or YOUR name) []:nghttp2.test\n# openssl x509 -days 3650 -req -signkey server.key < server.csr > server.crt\n# rm -f server.csr \n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3001\u3055\u304d\u307b\u3069\u306enghttp2\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4e00\u5f0f\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\nsudo mkdir /var/www\nsudo cp -r doc/ /var/www/\n\n\u30b9\u30ec\u30c3\u30c9\u65705\u3067\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n// \u30b9\u30ec\u30c3\u30c9\u65705\u3067\u8d77\u52d5\n# nghttpd -n 5 -d \"/var/www\" 8080 server.key server.crt\n\nIPv4: listen 0.0.0.0:8080\nIPv6: listen :::8080\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30de\u30b7\u30f3\u306ehosts\u306b\u300c192.168.xxx.xxx nghttp2.test\u300d\u66f8\u304d\u307e\u3059\u3002\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30de\u30b7\u30f3\u306bserver.crt\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u304b\u3001\u5f8c\u3067\u30d6\u30e9\u30a6\u30b6\u8b66\u544a\u3092\u7121\u8996\u3057\u307e\u3059\u3002\nChorme\u3067\u4e0b\u8a18\u306eURL\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\nhttps://nghttp2.test:8080/doc/manual/html/\n\n\nHTTP2\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u300cnghttp2\u300d\u3092\u7d39\u4ecb\u3059\u308b\u30a8\u30f3\u30c8\u30ea\u3067\u3059\u3002\n\n\u4eca\u56de\u306f\u8d77\u52d5\u307e\u3067\u884c\u3044\u307e\u3059\u3002\n\u8d77\u52d5\u3059\u308b\u3060\u3051\u306a\u3089\u57fa\u672c\u7684\u306b\u516c\u5f0f\u306eGithub\u306b\u66f8\u3044\u3066\u3042\u308b\u901a\u308a\u306e\u624b\u9806\u3067\u3057\u305f\u3002\n\n#Ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nUbuntu 14.04 LTS\n\u30db\u30b9\u30c8\u540d\u306f\u300cnghttp2.test\u300d\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nsudo apt-get install make binutils autoconf  automake autotools-dev libtool pkg-config zlib1g-dev libcunit1-dev libssl-dev libxml2-dev libev-dev libevent-dev libjansson-dev libjemalloc-dev cython python3.4-dev\n```\n\n# nghttp2\u3092git\u304b\u3089\u53d6\u5f97\u3059\u308b\n\n```\nsudo apt-get install git\ngit clone https://github.com/tatsuhiro-t/nghttp2\n```\n\n# make\u3059\u308b\n\n\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u5165\u308c\u308b\u3002\n\n```\nsudo apt-get install g++\nsudo apt-get upgrade gcc\nsudo apt-get install clang\n```\n\n\u30d3\u30eb\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```\ncd nghttp2\nautoreconf -i\nsudo automake\nsudo autoconf\n./configure\nsudo make\nsudo make install\n```\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30d1\u30b9\u3092\u901a\u3059\u304b/usr/lib/\u3078\u30b3\u30d4\u30fc\u3059\u308b\n\n```\nsudo cp /usr/local/lib/libnghttp2.so.5 /usr/lib/\n```\n\n# \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u30d3\u30eb\u30c9\u3059\u308b\n\nsphinx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```\nsudo apt-get install python3-pip\nsudo pip3 install sphinx\n```\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092make\u3059\u308b\u3002\n\n```\nsudo make html\n```\n\n\u4ee5\u4e0b\u306e\u30d1\u30b9\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3055\u308c\u308b\u3002\n\n```\ndoc/manual/html/\n```\n\n# HTTP2\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066\u4f7f\u3046\n\ngoogle\u306b\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3002\n\u300c-nas\u300d\u3067\u6642\u9593\u8a08\u6e2c\u3092\u3059\u308b\u3002\n\n```\n# nghttp -nas https://google.co.jp/\n\n  responseEnd: the  time  when  last  byte of  response  was  received\n               relative to connectEnd\n requestStart: the time  just before  first byte  of request  was sent\n               relative  to connectEnd.   If  '*' is  shown, this  was\n               pushed by server.\n      process: responseEnd - requestStart\n         code: HTTP status code\n         size: number  of  bytes  received as  response  body  without\n               inflation.\n          URI: request URI\n\nsee http://www.w3.org/TR/resource-timing/#processing-model\n\nsorted by 'complete'\n\nresponseEnd requestStart  process code size request path\n   +52.51ms       +263us  52.25ms  301  222 /\n```\n\n\u300c-nv\u300d\u3067\u30d5\u30ec\u30fc\u30e0\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3002\n\n```\nvagrant@nghttp2:~/nghttp2$ nghttp -nv https://google.co.jp/\n[  5.015] Connected\n[  5.021][NPN] server offers:\n          * h2-15\n          * h2-14\n          * spdy/3.1\n          * spdy/3\n          * http/1.1\nThe negotiated protocol: h2-14\n[  5.029] recv SETTINGS frame <length=18, flags=0x00, stream_id=0>\n          (niv=3)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):65535]\n          [SETTINGS_MAX_FRAME_SIZE(0x05):16384]\n[  5.030] recv WINDOW_UPDATE frame <length=4, flags=0x00, stream_id=0>\n          (window_size_increment=983041)\n[  5.031] send SETTINGS frame <length=12, flags=0x00, stream_id=0>\n          (niv=2)\n          [SETTINGS_MAX_CONCURRENT_STREAMS(0x03):100]\n          [SETTINGS_INITIAL_WINDOW_SIZE(0x04):65535]\n[  5.032] send SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  5.032] send HEADERS frame <length=36, flags=0x05, stream_id=1>\n          ; END_STREAM | END_HEADERS\n          (padlen=0)\n          ; Open new stream\n          :method: GET\n          :path: /\n          :scheme: https\n          :authority: google.co.jp\n          accept: */*\n          accept-encoding: gzip, deflate\n          user-agent: nghttp2/0.7.10-DEV\n[  5.036] recv SETTINGS frame <length=0, flags=0x01, stream_id=0>\n          ; ACK\n          (niv=0)\n[  5.082] recv (stream_id=1) :status: 301\n[  5.082] recv (stream_id=1) alternate-protocol: 443:quic,p=0.5\n[  5.082] recv (stream_id=1) cache-control: public, max-age=2592000\n[  5.082] recv (stream_id=1) content-length: 222\n[  5.082] recv (stream_id=1) content-type: text/html; charset=UTF-8\n[  5.082] recv (stream_id=1) date: Fri, 27 Mar 2015 15:06:34 GMT\n[  5.082] recv (stream_id=1) expires: Sun, 26 Apr 2015 15:06:34 GMT\n[  5.082] recv (stream_id=1) location: https://www.google.co.jp/\n[  5.082] recv (stream_id=1) server: gws\n[  5.082] recv (stream_id=1) x-frame-options: SAMEORIGIN\n[  5.082] recv (stream_id=1) x-xss-protection: 1; mode=block\n[  5.082] recv HEADERS frame <length=202, flags=0x04, stream_id=1>\n          ; END_HEADERS\n          (padlen=0)\n          ; First response header\n[  5.082] recv DATA frame <length=222, flags=0x01, stream_id=1>\n          ; END_STREAM\n[  5.083] recv PING frame <length=8, flags=0x00, stream_id=0>\n          (opaque_data=0000000000000000)\n[  5.083] send GOAWAY frame <length=8, flags=0x00, stream_id=0>\n          (last_stream_id=0, error_code=NO_ERROR(0x00), opaque_data(0)=[])\n```\n\n# SSL\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u4f7f\u3046\n\nCommonName\u300cnghttp2.test\u300d\u3067\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u306a\u3057\u3002\n\n```\n# openssl genrsa 2048 > server.key\n# openssl req -new -key server.key > server.csr\nCommon Name (e.g. server FQDN or YOUR name) []:nghttp2.test\n# openssl x509 -days 3650 -req -signkey server.key < server.csr > server.crt\n# rm -f server.csr \n```\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3001\u3055\u304d\u307b\u3069\u306enghttp2\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u4e00\u5f0f\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```\nsudo mkdir /var/www\nsudo cp -r doc/ /var/www/\n```\n\n\u30b9\u30ec\u30c3\u30c9\u65705\u3067\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n// \u30b9\u30ec\u30c3\u30c9\u65705\u3067\u8d77\u52d5\n# nghttpd -n 5 -d \"/var/www\" 8080 server.key server.crt\n\nIPv4: listen 0.0.0.0:8080\nIPv6: listen :::8080\n```\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30de\u30b7\u30f3\u306ehosts\u306b\u300c192.168.xxx.xxx nghttp2.test\u300d\u66f8\u304d\u307e\u3059\u3002\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30de\u30b7\u30f3\u306bserver.crt\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u304b\u3001\u5f8c\u3067\u30d6\u30e9\u30a6\u30b6\u8b66\u544a\u3092\u7121\u8996\u3057\u307e\u3059\u3002\n\nChorme\u3067\u4e0b\u8a18\u306eURL\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\n```\nhttps://nghttp2.test:8080/doc/manual/html/\n```\n\n![nghttp2.png](https://qiita-image-store.s3.amazonaws.com/0/33116/f4c0bb22-1c9d-aab2-e26a-2ea3af2a4c7f.png)\n", "tags": ["http2", "nghttp2", "C", "C++", "Ubuntu"]}