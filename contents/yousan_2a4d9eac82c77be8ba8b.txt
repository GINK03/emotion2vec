{"context": "\n\n\u306f\u3058\u3081\u306b\nLaravel\u3067HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u305f\u304b\u3063\u305f\u306e\u3067Guzzle\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u4ee5\u524d\u3067\u3059\u3068PEAR\u306eHTTP_Request2\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3042\u307e\u308a\u6700\u8fd1\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u65b0\u3057\u3044\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nHTTP_Request2\u306f\u9577\u5e74\u4f7f\u3063\u3066\u307e\u3057\u3066\u3001\u4f7f\u3044\u3084\u3059\u304f\u3066\u597d\u304d\u3067\u3059\u3002cURL\u3082\u60aa\u304f\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u2026\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ laravel new hogeproject\n$ cd hogeproject\n$ composer require guzzlehttp/guzzle\nUsing version ^6.2 for guzzlehttp/guzzle\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u4f5c\u6210\n$ php artisan make:controller HogeController\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4f5c\u6210\n$ php artisan make:controller HogeController\n\n\nroutes/web.php\nRoute::get('/basic_request', 'HogeController@basic_request');\nRoute::get('/with_headers', 'HogeController@with_headers');\n\n\n\nGET\nGET\u30ea\u30af\u30a8\u30b9\u30c8\n\napp/Http/Controllers/HogeController.php\npublic function basic_request() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n      'base_uri' => $base_url,\n    ] );\n    $path = '/index.html';\n    $response = $client->request( 'GET', $path,\n     [\n       'allow_redirects' => true,\n     ] );\n    $response_body = (string) $response->getBody();\n    echo $response_body;\n}\n\n\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u53d6\u5f97\n\npublic function get_http_status_code() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n        'base_uri' => $base_url,\n    ] );\n\n    $path = '/index.html';\n    $response = $client->request( 'GET', $path,\n        [\n            'allow_redirects' => true,\n        ] );\n    $response_body = (string) $response->getStatusCode();\n    echo $response_body;\n}\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305fURL\u306e\u78ba\u8a8d\n\u3061\u3087\u3063\u3068\u66f8\u304d\u65b9\u304c\u65b0\u3057\u3044\u3067\u3059\u306d\u3002on_stats\u306bTransferStatus\u3092\u53d7\u3051\u308b\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u6e21\u3059\u3068\u3001\u305d\u306e\u4e2d\u3067url\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\nuse\u3068\u53c2\u7167\u6e21\u3057\u3067\u5916\u5074\u3067\u3082\u53c2\u7167\u3067\u304d\u307e\u3059\u3002JavaScript\u3063\u307d\u3044\u3067\u3059\u306d\u3002\npublic function get_requested_url() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n        'base_uri' => $base_url,\n    ] );\n\n    $path = '/index.html';\n    $dev_null = $client->request( 'GET', $path,\n        [\n            'on_stats' => function (\\GuzzleHttp\\TransferStats $stats) use (&$url) {\n                $url = $stats->getEffectiveUri();\n            }\n        ] )->getBody()->getContents();\n    echo $url;\n}\n\n\u53c2\u8003: How to read the response effective URL in Guzzle ~6.0\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u30fc\u6307\u5b9a\n\u30ea\u30d5\u30a1\u30e9\u30fc\u306a\u3069\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306b\u306f\u914d\u5217\u3092\u6e21\u3059\u3002\n\napp/Http/Controllers/HogeController.php\npublic function with_headers() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n        'base_uri' => $base_url,\n    ] );\n\n    $path = '/index.html';\n    $headers = [\n        'Origin'                    => 'http://www.example.com',\n        'Accept-Encoding'           => 'gzip, deflate, br',\n        'Accept-Language'           => 'ja,en-US;q=0.8,en;q=0.6',\n        'Upgrade-Insecure-Requests' => '1',\n        'User-Agent'                => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36',\n        'Content-Type'              => 'application/x-www-form-urlencoded',\n        'Accept'                    => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n        'Cache-Control'             => 'max-age=0',\n        'Referer'                   => 'http://www.example.com',\n        'Connection'                => 'keep-alive'\n    ];\n    $response = $client->request( 'GET', $path,\n        [\n            'allow_redirects' => true,\n            'headers'         => $headers,\n            //'form_params'     => $form_params,\n        ] );\n    $response_body = (string) $response->getBody();\n    echo $response_body;\n}\n\n\n\nGET\u3067\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092\u6307\u5b9a\nhttp://docs.guzzlephp.org/en/latest/quickstart.html#query-string-parameters\nquery\u306b\u914d\u5217\u3092\u6307\u5b9a\u3059\u308b\u3068\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\npublic function get_with_params() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n        'base_uri' => $base_url,\n    ] );\n\n    $path = '/index.html';\n    $dev_null = $client->get($path,\n        [\n            'query' => ['foo' => 'bar'],\n            'on_stats' => function (\\GuzzleHttp\\TransferStats $stats) use (&$url) {\n                $url = $stats->getEffectiveUri();\n            }\n        ] )->getBody()->getContents();\n    echo $url;\n}\n\n\n\u53c2\u8003\nUsing GuzzleHttp with Laravel\nGuzzle \u3067 Twitter REST API \u3092\u53e9\u304f\n# \u306f\u3058\u3081\u306b\nLaravel\u3067HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u305f\u304b\u3063\u305f\u306e\u3067[Guzzle](https://github.com/guzzle/guzzle)\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u4ee5\u524d\u3067\u3059\u3068PEAR\u306e[HTTP_Request2](http://pear.php.net/package/HTTP_Request2/)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3042\u307e\u308a\u6700\u8fd1\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u65b0\u3057\u3044\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nHTTP_Request2\u306f\u9577\u5e74\u4f7f\u3063\u3066\u307e\u3057\u3066\u3001\u4f7f\u3044\u3084\u3059\u304f\u3066\u597d\u304d\u3067\u3059\u3002[cURL](http://php.net/manual/en/book.curl.php)\u3082\u60aa\u304f\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u2026\u3002\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ laravel new hogeproject\n$ cd hogeproject\n$ composer require guzzlehttp/guzzle\nUsing version ^6.2 for guzzlehttp/guzzle\n./composer.json has been updated\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\n```\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u4f5c\u6210\n\n```bash\n$ php artisan make:controller HogeController\n```\n\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4f5c\u6210\n\n```bash\n$ php artisan make:controller HogeController\n```\n\n```php:routes/web.php\nRoute::get('/basic_request', 'HogeController@basic_request');\nRoute::get('/with_headers', 'HogeController@with_headers');\n```\n\n## GET\nGET\u30ea\u30af\u30a8\u30b9\u30c8\n\n```php:app/Http/Controllers/HogeController.php\npublic function basic_request() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n      'base_uri' => $base_url,\n    ] );\n    $path = '/index.html';\n    $response = $client->request( 'GET', $path,\n     [\n       'allow_redirects' => true,\n     ] );\n    $response_body = (string) $response->getBody();\n    echo $response_body;\n}\n```\n\n## \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u53d6\u5f97\n```php\n\npublic function get_http_status_code() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n\t    'base_uri' => $base_url,\n    ] );\n\n    $path = '/index.html';\n    $response = $client->request( 'GET', $path,\n\t    [\n\t\t    'allow_redirects' => true,\n\t    ] );\n    $response_body = (string) $response->getStatusCode();\n    echo $response_body;\n}\n```\n\n## \u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305fURL\u306e\u78ba\u8a8d\n\u3061\u3087\u3063\u3068\u66f8\u304d\u65b9\u304c\u65b0\u3057\u3044\u3067\u3059\u306d\u3002`on_stats`\u306b`TransferStatus`\u3092\u53d7\u3051\u308b\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u6e21\u3059\u3068\u3001\u305d\u306e\u4e2d\u3067url\u3092\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n`use`\u3068\u53c2\u7167\u6e21\u3057\u3067\u5916\u5074\u3067\u3082\u53c2\u7167\u3067\u304d\u307e\u3059\u3002JavaScript\u3063\u307d\u3044\u3067\u3059\u306d\u3002\n\n```php\npublic function get_requested_url() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n\t    'base_uri' => $base_url,\n    ] );\n\n    $path = '/index.html';\n    $dev_null = $client->request( 'GET', $path,\n\t    [\n\t\t    'on_stats' => function (\\GuzzleHttp\\TransferStats $stats) use (&$url) {\n\t\t\t    $url = $stats->getEffectiveUri();\n\t\t    }\n\t    ] )->getBody()->getContents();\n    echo $url;\n}\n```\n\n\u53c2\u8003: [How to read the response effective URL in Guzzle ~6.0](http://stackoverflow.com/questions/30682307/how-to-read-the-response-effective-url-in-guzzle-6-0)\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u30fc\u6307\u5b9a\n\u30ea\u30d5\u30a1\u30e9\u30fc\u306a\u3069\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u30fc\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306b\u306f\u914d\u5217\u3092\u6e21\u3059\u3002\n\n```php:app/Http/Controllers/HogeController.php\npublic function with_headers() {\n\t$base_url = 'http://example.com';\n\t$client = new \\GuzzleHttp\\Client( [\n\t\t'base_uri' => $base_url,\n\t] );\n\n\t$path = '/index.html';\n\t$headers = [\n\t\t'Origin'                    => 'http://www.example.com',\n\t\t'Accept-Encoding'           => 'gzip, deflate, br',\n\t\t'Accept-Language'           => 'ja,en-US;q=0.8,en;q=0.6',\n\t\t'Upgrade-Insecure-Requests' => '1',\n\t\t'User-Agent'                => 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36',\n\t\t'Content-Type'              => 'application/x-www-form-urlencoded',\n\t\t'Accept'                    => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',\n\t\t'Cache-Control'             => 'max-age=0',\n\t\t'Referer'                   => 'http://www.example.com',\n\t\t'Connection'                => 'keep-alive'\n\t];\n\t$response = $client->request( 'GET', $path,\n\t\t[\n\t\t\t'allow_redirects' => true,\n\t\t\t'headers'         => $headers,\n\t\t\t//'form_params'     => $form_params,\n\t\t] );\n\t$response_body = (string) $response->getBody();\n\techo $response_body;\n}\n```\n\n## GET\u3067\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092\u6307\u5b9a\n\nhttp://docs.guzzlephp.org/en/latest/quickstart.html#query-string-parameters\n\n`query`\u306b\u914d\u5217\u3092\u6307\u5b9a\u3059\u308b\u3068\u30af\u30a8\u30ea\u30b9\u30c8\u30ea\u30f3\u30b0\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n```php\npublic function get_with_params() {\n    $base_url = 'http://example.com';\n    $client = new \\GuzzleHttp\\Client( [\n\t    'base_uri' => $base_url,\n    ] );\n\n    $path = '/index.html';\n    $dev_null = $client->get($path,\n\t    [\n\t        'query' => ['foo' => 'bar'],\n\t\t    'on_stats' => function (\\GuzzleHttp\\TransferStats $stats) use (&$url) {\n\t\t\t    $url = $stats->getEffectiveUri();\n\t\t    }\n\t    ] )->getBody()->getContents();\n    echo $url;\n}\n```\n\n# \u53c2\u8003\n[Using GuzzleHttp with Laravel]\n(https://medium.com/laravel-5-the-right-way/using-guzzlehttp-with-laravel-1dbea1f633da)\n[Guzzle \u3067 Twitter REST API \u3092\u53e9\u304f](http://qiita.com/kawanamiyuu/items/2cab57e3d3932a2c5e4e)\n", "tags": ["Guzzle", "HTTP", "laravel", "PHP"]}