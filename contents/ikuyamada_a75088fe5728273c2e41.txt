{"tags": ["Python", "MessagePack", "messagepack-rpc", "RPC"], "context": " More than 1 year has passed since last update.Python\u3067\u9ad8\u901f\u306aRPC\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308bMprpc\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u5185\u90e8\u3067\u306f\u3001MessagePack RPC\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u7528\u3044\u3066\u3044\u3066\u3001Java\u3001C++\u3001PHP\u3001Ruby\u306a\u3069\u65e2\u5b58\u306e\u4ed6\u8a00\u8a9e\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3082\u901a\u4fe1\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u7c21\u5358\u306bRPC\u30b5\u30fc\u30d0\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\nsum_server.py\nfrom gevent.server import StreamServer\nfrom mprpc import RPCServer\n\nclass SumServer(RPCServer):\n    def sum(self, x, y):\n        return x + y\n\nserver = StreamServer(('127.0.0.1', 6000), SumServer())\nserver.serve_forever()\n\n\nRPCServer\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u304c\u81ea\u52d5\u7684\u306bRPC\u306e\u95a2\u6570\u3068\u3057\u3066\u767b\u9332\u3055\u308c\u307e\u3059\u3002\n\nsum_client.py\nfrom mprpc import RPCClient\n\nclient = RPCClient('127.0.0.1', 6000)\nprint client.call('sum', 1, 2)\n\n\n\u3053\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n$ python sum_server.py &\n[1] 30945\n$ python sum_client.py\n3\n\n\u6700\u5f8c\u306b\u3001\u65e2\u5b58\u306e\u516c\u5f0fMessagePack RPC\u5b9f\u88c5(Tornado\u30d9\u30fc\u30b9)\u53ca\u3073dotCloud\u306eZeroRPC\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3059\u3002\u4f7f\u7528\u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u306b\u3042\u308a\u307e\u3059\u3002\n% python benchmarks/benchmark.py\ncall: 9508 qps\ncall_using_connection_pool: 10172 qps\n\n% pip install msgpack-rpc-python\n% python benchmarks/benchmark_msgpackrpc_official.py\ncall: 4976 qps\n\n% pip install zerorpc\n% python benchmarks/benchmark_zerorpc.py\ncall: 655 qps\n\n\n\u65e2\u5b58\u306eMessagePack RPC\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u7d042\u500d\u3001ZeroRPC\u306e\u7d0414\u500d\u9ad8\u901f\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\nPython\u3067\u9ad8\u901f\u306aRPC\u3092\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308b[Mprpc](http://mprpc.readthedocs.org/en/latest/)\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u5185\u90e8\u3067\u306f\u3001[MessagePack RPC](http://msgpack.org/)\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u7528\u3044\u3066\u3044\u3066\u3001Java\u3001C++\u3001PHP\u3001Ruby\u306a\u3069\u65e2\u5b58\u306e[\u4ed6\u8a00\u8a9e\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8](https://github.com/msgpack-rpc/msgpack-rpc)\u3068\u3082\u901a\u4fe1\u304c\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u7c21\u5358\u306bRPC\u30b5\u30fc\u30d0\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n```sum_server.py\nfrom gevent.server import StreamServer\nfrom mprpc import RPCServer\n\nclass SumServer(RPCServer):\n    def sum(self, x, y):\n        return x + y\n\nserver = StreamServer(('127.0.0.1', 6000), SumServer())\nserver.serve_forever()\n```\n\n*RPCServer*\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u304c\u81ea\u52d5\u7684\u306bRPC\u306e\u95a2\u6570\u3068\u3057\u3066\u767b\u9332\u3055\u308c\u307e\u3059\u3002\n\n```sum_client.py\nfrom mprpc import RPCClient\n\nclient = RPCClient('127.0.0.1', 6000)\nprint client.call('sum', 1, 2)\n```\n\n\u3053\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n\n```\n$ python sum_server.py &\n[1] 30945\n$ python sum_client.py\n3\n```\n\n\u6700\u5f8c\u306b\u3001\u65e2\u5b58\u306e\u516c\u5f0fMessagePack RPC\u5b9f\u88c5([Tornado](http://www.tornadoweb.org/)\u30d9\u30fc\u30b9)\u53ca\u3073dotCloud\u306e[ZeroRPC](http://zerorpc.dotcloud.com/)\u3068\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3059\u3002\u4f7f\u7528\u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306f[\u3053\u3061\u3089](https://github.com/studio-ousia/mprpc/tree/master/benchmarks)\u306b\u3042\u308a\u307e\u3059\u3002\n\n```\n% python benchmarks/benchmark.py\ncall: 9508 qps\ncall_using_connection_pool: 10172 qps\n\n% pip install msgpack-rpc-python\n% python benchmarks/benchmark_msgpackrpc_official.py\ncall: 4976 qps\n\n% pip install zerorpc\n% python benchmarks/benchmark_zerorpc.py\ncall: 655 qps\n```\n\n![\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6bd4\u8f03](https://camo.githubusercontent.com/c7427f7a2ad9da99cda87417540ff145dca5b442/68747470733a2f2f7261772e6769746875622e636f6d2f73747564696f2d6f757369612f6d707270632f6d61737465722f646f63732f696d672f706572662e706e67)\n\n\u65e2\u5b58\u306eMessagePack RPC\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u7d042\u500d\u3001ZeroRPC\u306e\u7d0414\u500d\u9ad8\u901f\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n"}