{"context": " More than 1 year has passed since last update.\u305f\u3068\u3048\u3070\u3042\u308b\u95a2\u6570\u3092\u7279\u5b9a\u306e\u30ed\u30fc\u30eb\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u307f\u306b\u8a31\u53ef\u3057\u305f\u3044\u5834\u5408\u306b\u3001PHPUnit\u3067\u4efb\u610f\u306e\u30ed\u30fc\u30eb\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3001\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u3001\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3002\n<?php\n\nclass SampleTest extends WP_UnitTestCase\n{\n\n    /**\n     * @test\n     */\n    public function sample_test()\n    {\n        // administrator\u3092\u8ffd\u52a0\u3057\u3066\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u30fc\u306b\u3002\n        $this->set_current_user( 'administrator' );\n        // switch_themes\u3092\u5b9f\u884c\u3067\u304d\u308b\n        $this->assertTrue( current_user_can( 'switch_themes' ) );\n\n        // editor\u3092\u8ffd\u52a0\u3057\u3066\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u30fc\u306b\u3002\n        $this->set_current_user( 'editor' );\n        // switch_themes\u306f\u5b9f\u884c\u3067\u304d\u3066\u306f\u3044\u3051\u306a\u3044\u3002\n        $this->assertFalse( current_user_can( 'switch_themes' ) );\n    }\n\n    /**\n     * Add user and set the user as current user.\n     *\n     * @param  string $role administrator, editor, author, contributor ...\n     * @return none \n     */\n    public function set_current_user( $role )\n    {\n        $user = $this->factory->user->create_and_get( array(\n            'role' => $role,\n        ) );\n\n        /*\n         * Set $user as current user\n         */\n        wp_set_current_user( $user->ID, $user->user_login );\n    }\n}\n\n\n\u305f\u3068\u3048\u3070\u3042\u308b\u95a2\u6570\u3092\u7279\u5b9a\u306e\u30ed\u30fc\u30eb\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u307f\u306b\u8a31\u53ef\u3057\u305f\u3044\u5834\u5408\u306b\u3001PHPUnit\u3067\u4efb\u610f\u306e\u30ed\u30fc\u30eb\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u3066\u3001\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u3001\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u306b\u4f7f\u7528\u3059\u308b\u3002\n\n```php\n<?php\n\nclass SampleTest extends WP_UnitTestCase\n{\n\n\t/**\n\t * @test\n\t */\n\tpublic function sample_test()\n\t{\n\t\t// administrator\u3092\u8ffd\u52a0\u3057\u3066\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u30fc\u306b\u3002\n\t\t$this->set_current_user( 'administrator' );\n\t\t// switch_themes\u3092\u5b9f\u884c\u3067\u304d\u308b\n\t\t$this->assertTrue( current_user_can( 'switch_themes' ) );\n\n\t\t// editor\u3092\u8ffd\u52a0\u3057\u3066\u30ab\u30ec\u30f3\u30c8\u30e6\u30fc\u30b6\u30fc\u306b\u3002\n\t\t$this->set_current_user( 'editor' );\n\t\t// switch_themes\u306f\u5b9f\u884c\u3067\u304d\u3066\u306f\u3044\u3051\u306a\u3044\u3002\n\t\t$this->assertFalse( current_user_can( 'switch_themes' ) );\n\t}\n\n\t/**\n\t * Add user and set the user as current user.\n\t *\n\t * @param  string $role administrator, editor, author, contributor ...\n\t * @return none \n\t */\n\tpublic function set_current_user( $role )\n\t{\n\t\t$user = $this->factory->user->create_and_get( array(\n\t\t\t'role' => $role,\n\t\t) );\n\n\t\t/*\n\t\t * Set $user as current user\n\t\t */\n\t\twp_set_current_user( $user->ID, $user->user_login );\n\t}\n}\n```\n", "tags": ["WordPress", "PHPUnit", "WP_UnitTestCase"]}