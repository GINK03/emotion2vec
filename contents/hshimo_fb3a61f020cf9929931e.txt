{"context": " More than 1 year has passed since last update.Eris\u3067\u30c6\u30b9\u30c8\u30fb\u958b\u767a\u7528\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u306a\u304c\u3089\u4f5c\u6210\u3059\u308b\n\n\u4e0b\u8a18\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u30e1\u30e2\u3067\u3059\u3002\n\n\nEris Industries Documentation | Tutorials | Making a Permissioned Chain - Eris v0.11\n\n\nEris version 0.11.0\n\u7d50\u679c: \u4ed6\u306e\u958b\u767a\u8005\u3068\u4e00\u7dd2\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u901a\u308a\u306b\u884c\u3063\u3066\u3082\u52d5\u4f5c\u3055\u305b\u3089\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002Eris\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u304b\u306a\u308a\u30a4\u30de\u30a4\u30c1\u3067\u3059\u3002\n\n\n\u30b9\u30c6\u30c3\u30d71. \u516c\u958b\u9375\u3092\u4f5c\u308b\neris keys\u30b3\u30de\u30f3\u30c9\n\u2028~/.eris/keys/data \u306b\u30c7\u30fc\u30bf\u3042\u308a\neris services start keys\n\n\u4e0a\u8a18\u3001\u9375\u3092\u4f5c\u308b\u305f\u3081\u3060\u3051\u306eDocker\u4e0a\u3067\u9375\u3092\u751f\u6210\u3057\u3066\u3044\u308b\u69d8\u5b50\u3002\n\n\u9375\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d\u2028\neris services ls\n\n\nSERVICES NAME    TYPE     RUNNING     CONTAINER NAME      CONTAINER #     PORTS\n\nkeys            service   Yes       eris_service_keys_1   1             4767/tcp\n  btcd                      No                              0\n  do_not_use                No                              0\n  eth                       No                              0\n  ipfs                      No                              0\n  mindy                     No                              0\n  mint                      No                              0\n  openbazaar                No                              0\n  tinydns                   No                              0\n  toadserver                No                              0\n\n\neris keys\u3067\u3001\u3067\u304d\u308b\u3053\u3068\u3092\u898b\u308b\neris services exec keys \"eris-keys -h\"\n\n\u9375\u7528Docker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u3001\"eris-keys -h\"\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b(?)\nA tool for doing a bunch of cool stuff with keys.\n\nUsage:\n  eris-keys [flags]\n  eris-keys [command]\n\nAvailable Commands:\n  gen         Generate a key\n  lock        lock a key\n  unlock      unlock a key\n  name        Manage key names. `eris-keys name <name> <address>`\n  sign        eris-keys sign --addr <address> <hash>\n  pub         eris-keys pub --addr <addr>\n  verify      eris-keys verify --addr <addr> <hash> <sig>\n  hash        eris-keys hash <some data>\n  server      eris-keys server\n  import      eris-keys import <priv key> | /path/to/keyfile | <key json>\n  help        Help about any command\n\nFlags:\n      --addr=\"\": address of key to use\n      --dir=\"/home/eris/.eris/keys\": specify the location of the directory containing key files\n  -h, --help=false: help for eris-keys\n      --host=\"keys\": set the host for talking to the key daemon\n  -l, --log=0: specify the location of the directory containing key files\n      --name=\"\": name of key to use\n      --port=\"4767\": set the port for key daemon to listen on\n\n\nUse \"eris-keys [command] --help\" for more information about a command.\n\n\neris keys -h\nUsage: eris keys COMMAND [FLAG...]\n\nThe keys subcommand is an opiniated wrapper around\neris-keys and requires a keys container to be running.\n\nIt is for development only.\nAdvanced functionality is available via: [eris services exec keys \"eris-keys CMD\"]\n\nsee https://docs.erisindustries.com/documentation/eris-keys/ for more info\n\nAvailable Commands:\n  gen         Generates an unsafe key using the keys container.\n  pub         Returns a machine readable pubkey given an address.\n  export      Export a key from container to host.\n  import      Import a key to container from host.\n  convert     Convert and eris-keys key to tendermint key\n\nGlobal Flags:\n  -d, --debug[=false]: debug level output\n  -m, --machine=\"eris\": machine name for docker-machine that is running VM\n  -n, --num=1: container number\n  -v, --verbose[=false]: verbose output\n\nUse \"eris keys COMMAND --help\" for more information about a command.\n\n\n\u9375\u3092\u4f5c\u308b!\neris keys gen\n\n\u30ad\u30fc\u30da\u30a2\u306e\u516c\u958b\u30a2\u30c9\u30ec\u30b9\u304c\u8868\u793a\u3055\u308c\u308b\n\u6ce8\u610f) \u3053\u308c\u4ee5\u964d\u306f\u3001\u30c7\u30e2\u76ee\u7684\u306e\u305f\u3081\u3060\u3051\u306e\u65b9\u6cd5\u3067\u3001\u672c\u756a\u3067\u306f\u3084\u3063\u3066\u3044\u3051\u306a\u3044\u65b9\u6cd5\u3067\u3059\u3002\n\n\u7ba1\u7406\u8005\u306e\u9375\u3092\u4f5c\u308b\nchain_dir=~/.eris/chains/idiaminchain\nmkdir $chain_dir\neris keys gen > $chain_dir/admin_addr\n\n\n5\u3064\u306evalidator\u306e\u9375\u3092\u4f5c\u308b\nfin=4\nfor ((i=0;i<=fin;i++)); do\n  eris keys gen >> $chain_dir/val_addr\ndone\n\n\neris-keys\u3067\u751f\u6210\u3057\u305f\u9375\u3092\u898b\u308b\neris services exec keys \"ls /home/eris/.eris/keys/data\"\n\n\u3053\u308c\u3089\u306e\u9375\u3092eris:db\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n\n\u6b63\u3057\u3044\u9375\u306e\u6587\u5b57\u5217\u3092\u5909\u6570\u306b\u5165\u308c\u308b\neris-keys\u306e\u5f62\u5f0f\u3092eris:db\u3067\u5229\u7528\u3067\u304d\u308b\u5f62\u5f0f\u306b\u3059\u308b\nadmin_addr=$(cat $chain_dir/admin_addr | sed -e 's/[[:space:]]//')\n\nbash\u306e\u5834\u5408\n(\u4ee5\u4e0b\u3001\u516c\u5f0f\u30de\u30cb\u30e5\u30a2\u30eb\u901a\u308a\u3067\u3059\u304c\u3001\u30d0\u30b0\u3063\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u307e\u3059\u3002)\nreadarray vals_addrs < $chain_dir/val_addr\nreadarray participant_addrs < $chain_dir/part_addr\n\n\u3053\u3061\u3089\u3067\u306f\u3001\u4e0a\u8a18\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nzsh\u306e\u5834\u5408\nzmodload -ap zsh/mapfile mapfile\nvals_addrs=( \"${(f)mapfile[$chain_dir/val_addr]}\" )\nparticipant_addrs=( \"${(f)mapfile[$chain_dir/part_addr]}\" )\n\n\n\u751f\u306e\u516c\u958b\u9375\u3092eris:db\u5f62\u5f0f\u306b\u3059\u308b\neris keys convert $admin_addr > $chain_dir/priv_validator.json\n\n\n\u540c\u3058\u3053\u3068\u3092validator key\u306b\u3082\u3059\u308b\ndeclare -a vals_keys\nfin=4\nfor ((i=0;i<=fin;i++)); do\n  addr=$(echo ${vals_addrs[$i]} | sed -e 's/[[:space:]]//')\n  vals_keys[$i]=$(eris keys pub $addr | sed -e 's/[[:space:]]//')\ndone\n\n\n\u540c\u3058\u3053\u3068\u3092participant keys\u306b\u3082\u3059\u308b\ndeclare -a participant_keys\nfin=19\nfor ((i=0;i<=fin;i++)); do\n  addr=$(echo ${participant_addrs[$i]} | sed -e 's/[[:space:]]//')\n  participant_keys[$i]=$(eris keys pub $addr | sed -e 's/[[:space:]]//')\ndone\n\n\u3053\u308c\u3067\u3001priv_validator.json\u304c\u4f5c\u6210\u3055\u308c\u305f\u3002\n\n\u30b9\u30c6\u30c3\u30d72. genesis.csv\u3092\u4f5c\u6210\n\u30b9\u30c6\u30c3\u30d73\u3067\u3001\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u305f\u3081\u306b\u5fc5\u8981\u306a.csv\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u4f5c\u3063\u3066\u3001\u505c\u6b62\u3059\u308b\neris chains new idiaminchain\neris chains stop idiaminchain\n\n\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u958b\u59cb\u3059\u308b\u65b9\u6cd5\neris chains start idiaminchain\n\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u898b\u308b\n% eris chains exec -p idiaminchain mintperms all\nPerms and SetBit (As Integers)\n16383,16383\n\nroot: true\nsend: true\ncall: true\ncreate_contract: true\ncreate_account: true\nbond: true\nname: true\nhas_base: true\nset_base: true\nunset_base: true\nset_global: true\nhas_role: true\nadd_role: true\nrm_role: true\n\n-p \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30e9\u30f3\u30c0\u30e0\u306bport\u3092\u516c\u958b\u3059\u308b\nchains exec\u30b3\u30de\u30f3\u30c9\u3067\u3001port is already allocated\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u3089\u4f7f\u3046\n\npermissions \u3068 set bits \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\u30e6\u30fc\u30b6\u306e\"types\"\u3054\u3068\u306bpermissions\u3068SetBit\u5909\u6570\u3092\u4fdd\u5b58\n\u516c\u5f0f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306f\u5225\u3005\u306b\u3084\u3063\u3066\u3044\u308b\u304c\u3001\u9762\u5012\u306a\u306e\u3067\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5316\u3057\u305f\u306e\u3067\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\n\nsetup_permissions_setbits.sh\n#!/bin/bash\nperms_admin=$(eris chains exec -p idiaminchain mintperms all | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $1}')\nsetbt_admin=$(eris chains exec -p idiaminchain mintperms all | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $2}')\nperms_part=$(eris chains exec -p idiaminchain mintperms int root:0 send:1 call:1 create_contract:1 create_account:1 bond:0 name:1 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $1}')\nsetbt_part=$(eris chains exec -p idiaminchain mintperms int root:0 send:1 call:1 create_contract:1 create_account:1 bond:0 name:1 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $2}')\nperms_vals=$(eris chains exec -p idiaminchain mintperms int root:0 send:0 call:0 create_contract:0 create_account:0 bond:1 name:0 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $1}')\nsetbt_vals=$(eris chains exec -p idiaminchain mintperms int root:0 send:0 call:0 create_contract:0 create_account:0 bond:1 name:0 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $2}')\n\n\necho $perms_part \u3067\u78ba\u8a8d\n\u3053\u308c\u3067\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u3067\u304d\u305f\n\n\u5404\u30e6\u30fc\u30b6\u306b\u30c8\u30fc\u30af\u30f3\u3092\u3042\u3052\u308b\ntokens=\"2251799813685248\"\n\n\naccounts.csv\u3068validators.csv\u3092\u4f5c\u6210\nchain_name=\"idiaminchain\"\nwrite_line() {\n  echo \"$1\",\"$2\",\"$3\",\"$4\",\"$5\" >> $chain_dir/accounts.csv\n}\nwrite_line_vals() {\n  echo \"$1\",\"$2\",\"$3\",\"$4\",\"$5\" >> $chain_dir/validators.csv\n}\n\n\naccount.csv\u306e\u4f8b\n\naccount.csv\n9B7C6F1F52400C35BE6F5CB7138304369A7DCD77,2251799813685248,idiaminchain_admin,16383,16383\n049387262939D3499CB52C9D4CF1E1EB70CF84CC,2251799813685248,idiaminchain_val_00,32,127\nE38899B3518EF34BFE3EA898C4D8981A7900202C,2251799813685248,idiaminchain_val_04,32,127\nA0FEFEB34F8065BFC6C53926994DD98F430585C6,2251799813685248,idiaminchain_particpant_00,94,127\n\n\n\nvalidators.csv\u306e\u4f8b\n049387262939D3499CB52C9D4CF1E1EB70CF84CC,2251799813685248,idiaminchain_val_00,32,127\n1798977C968653221907677907694FA629D30F15,2251799813685248,idiaminchain_val_01,32,127\nABF9F624E42ACB695F04301EBC7BC9B04C0D8464,2251799813685248,idiaminchain_val_02,32,127\n9F2891F348AF4748386EE86A9C113CA1E5D17BC9,2251799813685248,idiaminchain_val_03,32,127\nE38899B3518EF34BFE3EA898C4D8981A7900202C,2251799813685248,idiaminchain_val_04,32,127\n\n\n\u30b9\u30c6\u30c3\u30d73. \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n\u30b8\u30a7\u30cd\u30b7\u30b9\u30fb\u30d6\u30ed\u30c3\u30af\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u30d8\u30eb\u30d7\u3092\u8868\u793a\neris chains exec -p idiaminchain \"mintgen -h\"\n\n\n\u554f\u984c\u304c\u8d77\u304d\u305f\u6642\u306b\u3059\u308b\u3053\u3068\nDocker\u30d7\u30ed\u30bb\u30b9\u3092\u898b\u308b\ndocker ps -a\n\neris chains rm --data $chain_name\neris chains new $chain_name --dir $chain_name\neris chains stop $chain_name\n\ngenesis.json.bak\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b\neris chains exec -p $chain_name \"mintgen known --csv=/home/eris/.eris/chains/$chain_name/validators.csv,/home/eris/.eris/chains/$chain_name/accounts.csv $chain_name\" > $chain_dir/genesis.json.bak\n\n\ngenesis.json \u751f\u6210\u306e\u305f\u3081\u306e\u30b5\u30f3\u30d7\u30eb\u3068\u30b3\u30fc\u30c9\n\ngenesis.json \u30b5\u30f3\u30d7\u30eb\nhttps://github.com/eris-ltd/eris-pm/tree/master/tests/fixtures/chaindata\n\ngenesis.json.example\n{\n  \"chain_id\": \"my_tests\",\n  \"accounts\": [\n    {\n      \"address\": \"1040E6521541DAB4E7EE57F21226DD17CE9F0FB7\",\n      \"amount\": 999999999999,\n      \"permissions\": {\n        \"base\": {\n          \"perms\": 16383,\n          \"set\": 16383\n        },\n        \"roles\": []\n            }\n    },\n    {\n      \"address\": \"6A3AFFB16BFB95AA547930572D71C460EFBCD857\",\n      \"amount\": 110000000000\n    },\n    {\n      \"address\": \"58FD1799AA32DED3F6EAC096A1DC77834A446B9C\",\n      \"amount\": 110000000000\n    }\n  ],\n  \"validators\": [\n    {\n      \"pub_key\": [\n        1,\n        \"82DADAE153406412833F8098439ED4B5DCC26C0B43C2775EFFE8B911B49D0182\"\n      ],\n      \"amount\": 5000000000,\n      \"unbond_to\": [\n        {\n          \"address\": \"1040E6521541DAB4E7EE57F21226DD17CE9F0FB7\",\n          \"amount\": 5000000000\n        }\n      ]\n    }\n  ]\n}\n\n\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30b3\u30fc\u30c9\nhttps://github.com/eris-ltd/tendermint/blob/develop/account/account.go#L40-L49\n\naccount.go\ntype Account struct {\n    Address     []byte `json:\"address\"`\n    PubKey      PubKey `json:\"pub_key\"`\n    Sequence    int    `json:\"sequence\"`\n    Balance     int64  `json:\"balance\"`\n    Code        []byte `json:\"code\"`         // VM code\n    StorageRoot []byte `json:\"storage_root\"` // VM storage merkle root.\n\n    Permissions ptypes.AccountPermissions `json:\"permissions\"`\n}\n\n\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\nhttps://github.com/eris-ltd/tendermint/blob/develop/permission/types/permissions.go\n\nvalidators\u306e\u30b3\u30fc\u30c9\nhttps://github.com/eris-ltd/tendermint/blob/develop/types/validator.go#L14-L23\n\nvalidator.go\ntype ValidatorInfo struct {\n    Address         []byte            `json:\"address\"`\n    PubKey          acm.PubKeyEd25519 `json:\"pub_key\"`\n    UnbondTo        []*TxOutput       `json:\"unbond_to\"`\n    FirstBondHeight int               `json:\"first_bond_height\"`\n    FirstBondAmount int64             `json:\"first_bond_amount\"`\n    DestroyedHeight int               `json:\"destroyed_height\"` // If destroyed\n    DestroyedAmount int64             `json:\"destroyed_amount\"` // If destroyed\n    ReleasedHeight  int               `json:\"released_height\"`  // If released\n}\n\n\n\n\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\n\ncontainer already exists\u554f\u984c\n\u4f55\u304b\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u305f\u6642\u306b\u4ee5\u4e0b\u304c\u51fa\u308b\u554f\u984c\ncontainer already exists\n\n\u89e3\u6c7a\u65b9\u6cd5: \ndocker ps -a\n\n\u4e0a\u8a18\u3067\u3001eris_interactive_eris_chain_idiaminchain_1 \u304c\u3042\u308b\u306a\u3089\u3001\u524a\u9664\u3059\u308b\ndocker ps -a | grep eris_interactive_eris_chain_idiaminchain_1\ndocker rm [\u30b3\u30f3\u30c6\u30caID]\n\n\n\u691c\u7d22\u7528\u8a9e\n\nEthereum, \u30a4\u30fc\u30b5\u30ea\u30a2\u30e0\nEris, HydraChain, PoA\nPrivate blockchain, \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3, \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30c1\u30a7\u30fc\u30f3\nEris Industries, \u30a8\u30ea\u30b9\u30fb\u30a4\u30f3\u30c0\u30b9\u30c8\u30ea\u30fc\u30ba\n\n\n\nEris\u3067\u30c6\u30b9\u30c8\u30fb\u958b\u767a\u7528\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u306a\u304c\u3089\u4f5c\u6210\u3059\u308b\n\n\n* \u4e0b\u8a18\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u30e1\u30e2\u3067\u3059\u3002\n * [Eris Industries Documentation | Tutorials | Making a Permissioned Chain - Eris v0.11](https://docs.erisindustries.com/tutorials/chainmaking/)\n* Eris version 0.11.0\n* \u7d50\u679c: \u4ed6\u306e\u958b\u767a\u8005\u3068\u4e00\u7dd2\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u901a\u308a\u306b\u884c\u3063\u3066\u3082\u52d5\u4f5c\u3055\u305b\u3089\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002Eris\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u304b\u306a\u308a\u30a4\u30de\u30a4\u30c1\u3067\u3059\u3002\n\n\n\n\n## \u30b9\u30c6\u30c3\u30d71. \u516c\u958b\u9375\u3092\u4f5c\u308b\n\neris keys\u30b3\u30de\u30f3\u30c9\n\u2028~/.eris/keys/data \u306b\u30c7\u30fc\u30bf\u3042\u308a\n\n\n```\neris services start keys\n```\n\n\u4e0a\u8a18\u3001\u9375\u3092\u4f5c\u308b\u305f\u3081\u3060\u3051\u306eDocker\u4e0a\u3067\u9375\u3092\u751f\u6210\u3057\u3066\u3044\u308b\u69d8\u5b50\u3002\n\n\n### \u9375\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u78ba\u8a8d\u2028\n```\neris services ls\n```\n\n>  SERVICES NAME    TYPE     RUNNING     CONTAINER NAME      CONTAINER #     PORTS\n --------------- --------- --------- --------------------- ------------- ------------\n  keys            service   Yes       eris_service_keys_1   1             4767/tcp\n  btcd                      No                              0\n  do_not_use                No                              0\n  eth                       No                              0\n  ipfs                      No                              0\n  mindy                     No                              0\n  mint                      No                              0\n  openbazaar                No                              0\n  tinydns                   No                              0\n  toadserver                No                              0\n\n\n### eris keys\u3067\u3001\u3067\u304d\u308b\u3053\u3068\u3092\u898b\u308b\n\n```\neris services exec keys \"eris-keys -h\"\n```\n\n\u9375\u7528Docker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u3001\"eris-keys -h\"\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b(?)\n\n\n```\nA tool for doing a bunch of cool stuff with keys.\n\nUsage:\n  eris-keys [flags]\n  eris-keys [command]\n\nAvailable Commands:\n  gen         Generate a key\n  lock        lock a key\n  unlock      unlock a key\n  name        Manage key names. `eris-keys name <name> <address>`\n  sign        eris-keys sign --addr <address> <hash>\n  pub         eris-keys pub --addr <addr>\n  verify      eris-keys verify --addr <addr> <hash> <sig>\n  hash        eris-keys hash <some data>\n  server      eris-keys server\n  import      eris-keys import <priv key> | /path/to/keyfile | <key json>\n  help        Help about any command\n\nFlags:\n      --addr=\"\": address of key to use\n      --dir=\"/home/eris/.eris/keys\": specify the location of the directory containing key files\n  -h, --help=false: help for eris-keys\n      --host=\"keys\": set the host for talking to the key daemon\n  -l, --log=0: specify the location of the directory containing key files\n      --name=\"\": name of key to use\n      --port=\"4767\": set the port for key daemon to listen on\n\n\nUse \"eris-keys [command] --help\" for more information about a command.\n```\n\n\n### eris keys -h\n\n\n```\nUsage: eris keys COMMAND [FLAG...]\n\nThe keys subcommand is an opiniated wrapper around\neris-keys and requires a keys container to be running.\n\nIt is for development only.\nAdvanced functionality is available via: [eris services exec keys \"eris-keys CMD\"]\n\nsee https://docs.erisindustries.com/documentation/eris-keys/ for more info\n\nAvailable Commands:\n  gen         Generates an unsafe key using the keys container.\n  pub         Returns a machine readable pubkey given an address.\n  export      Export a key from container to host.\n  import      Import a key to container from host.\n  convert     Convert and eris-keys key to tendermint key\n\nGlobal Flags:\n  -d, --debug[=false]: debug level output\n  -m, --machine=\"eris\": machine name for docker-machine that is running VM\n  -n, --num=1: container number\n  -v, --verbose[=false]: verbose output\n\nUse \"eris keys COMMAND --help\" for more information about a command.\n```\n\n### \u9375\u3092\u4f5c\u308b!\n\n\n```\neris keys gen\n```\n\n\u30ad\u30fc\u30da\u30a2\u306e\u516c\u958b\u30a2\u30c9\u30ec\u30b9\u304c\u8868\u793a\u3055\u308c\u308b\n\n\n\u6ce8\u610f) \u3053\u308c\u4ee5\u964d\u306f\u3001\u30c7\u30e2\u76ee\u7684\u306e\u305f\u3081\u3060\u3051\u306e\u65b9\u6cd5\u3067\u3001\u672c\u756a\u3067\u306f\u3084\u3063\u3066\u3044\u3051\u306a\u3044\u65b9\u6cd5\u3067\u3059\u3002\n\n#### \u7ba1\u7406\u8005\u306e\u9375\u3092\u4f5c\u308b\n\n```\nchain_dir=~/.eris/chains/idiaminchain\nmkdir $chain_dir\neris keys gen > $chain_dir/admin_addr\n```\n\n#### 5\u3064\u306evalidator\u306e\u9375\u3092\u4f5c\u308b\n\n\n```sh\nfin=4\nfor ((i=0;i<=fin;i++)); do\n  eris keys gen >> $chain_dir/val_addr\ndone\n```\n\n\n#### eris-keys\u3067\u751f\u6210\u3057\u305f\u9375\u3092\u898b\u308b\n\n```\neris services exec keys \"ls /home/eris/.eris/keys/data\"\n```\n\n\u3053\u308c\u3089\u306e\u9375\u3092eris:db\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n\n\n#### \u6b63\u3057\u3044\u9375\u306e\u6587\u5b57\u5217\u3092\u5909\u6570\u306b\u5165\u308c\u308b\n\neris-keys\u306e\u5f62\u5f0f\u3092eris:db\u3067\u5229\u7528\u3067\u304d\u308b\u5f62\u5f0f\u306b\u3059\u308b\n\n```\nadmin_addr=$(cat $chain_dir/admin_addr | sed -e 's/[[:space:]]//')\n```\n\n\n\nbash\u306e\u5834\u5408\n(\u4ee5\u4e0b\u3001\u516c\u5f0f\u30de\u30cb\u30e5\u30a2\u30eb\u901a\u308a\u3067\u3059\u304c\u3001\u30d0\u30b0\u3063\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u307e\u3059\u3002)\n\n```bash\nreadarray vals_addrs < $chain_dir/val_addr\nreadarray participant_addrs < $chain_dir/part_addr\n```\n\n\u3053\u3061\u3089\u3067\u306f\u3001\u4e0a\u8a18\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nzsh\u306e\u5834\u5408\n\n```zsh\nzmodload -ap zsh/mapfile mapfile\nvals_addrs=( \"${(f)mapfile[$chain_dir/val_addr]}\" )\nparticipant_addrs=( \"${(f)mapfile[$chain_dir/part_addr]}\" )\n```\n\n#### \u751f\u306e\u516c\u958b\u9375\u3092eris:db\u5f62\u5f0f\u306b\u3059\u308b\n\n\n```\neris keys convert $admin_addr > $chain_dir/priv_validator.json\n```\n\n\n#### \u540c\u3058\u3053\u3068\u3092validator key\u306b\u3082\u3059\u308b\n\n\n```\ndeclare -a vals_keys\nfin=4\nfor ((i=0;i<=fin;i++)); do\n  addr=$(echo ${vals_addrs[$i]} | sed -e 's/[[:space:]]//')\n  vals_keys[$i]=$(eris keys pub $addr | sed -e 's/[[:space:]]//')\ndone\n```\n\n\n#### \u540c\u3058\u3053\u3068\u3092participant keys\u306b\u3082\u3059\u308b\n\n```\ndeclare -a participant_keys\nfin=19\nfor ((i=0;i<=fin;i++)); do\n  addr=$(echo ${participant_addrs[$i]} | sed -e 's/[[:space:]]//')\n  participant_keys[$i]=$(eris keys pub $addr | sed -e 's/[[:space:]]//')\ndone\n```\n\n\n\u3053\u308c\u3067\u3001priv_validator.json\u304c\u4f5c\u6210\u3055\u308c\u305f\u3002\n\n## \u30b9\u30c6\u30c3\u30d72. genesis.csv\u3092\u4f5c\u6210\n\n\n\u30b9\u30c6\u30c3\u30d73\u3067\u3001\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u305f\u3081\u306b\u5fc5\u8981\u306a.csv\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\n\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u4f5c\u3063\u3066\u3001\u505c\u6b62\u3059\u308b\n\n```\neris chains new idiaminchain\neris chains stop idiaminchain\n```\n\n\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u958b\u59cb\u3059\u308b\u65b9\u6cd5\n\n```\neris chains start idiaminchain\n```\n\n\n### \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u898b\u308b\n\n\n```\n% eris chains exec -p idiaminchain mintperms all\nPerms and SetBit (As Integers)\n16383,16383\n\nroot: true\nsend: true\ncall: true\ncreate_contract: true\ncreate_account: true\nbond: true\nname: true\nhas_base: true\nset_base: true\nunset_base: true\nset_global: true\nhas_role: true\nadd_role: true\nrm_role: true\n```\n\n-p \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30e9\u30f3\u30c0\u30e0\u306bport\u3092\u516c\u958b\u3059\u308b\n\nchains exec\u30b3\u30de\u30f3\u30c9\u3067\u3001`port is already allocated`\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u3089\u4f7f\u3046\n\n### permissions \u3068 set bits \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n\n\u30e6\u30fc\u30b6\u306e\"types\"\u3054\u3068\u306bpermissions\u3068SetBit\u5909\u6570\u3092\u4fdd\u5b58\n\n\n\u516c\u5f0f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306f\u5225\u3005\u306b\u3084\u3063\u3066\u3044\u308b\u304c\u3001\u9762\u5012\u306a\u306e\u3067\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5316\u3057\u305f\u306e\u3067\u3001\u4ee5\u4e0b\u3092\u5b9f\u884c\n\n```bash:setup_permissions_setbits.sh\n#!/bin/bash\nperms_admin=$(eris chains exec -p idiaminchain mintperms all | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $1}')\nsetbt_admin=$(eris chains exec -p idiaminchain mintperms all | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $2}')\nperms_part=$(eris chains exec -p idiaminchain mintperms int root:0 send:1 call:1 create_contract:1 create_account:1 bond:0 name:1 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $1}')\nsetbt_part=$(eris chains exec -p idiaminchain mintperms int root:0 send:1 call:1 create_contract:1 create_account:1 bond:0 name:1 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $2}')\nperms_vals=$(eris chains exec -p idiaminchain mintperms int root:0 send:0 call:0 create_contract:0 create_account:0 bond:1 name:0 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $1}')\nsetbt_vals=$(eris chains exec -p idiaminchain mintperms int root:0 send:0 call:0 create_contract:0 create_account:0 bond:1 name:0 | grep -C 1 \"(As Integers)\" | tail -n 1 | awk -F ',' '{print $2}')\n```\n\n\n`echo $perms_part` \u3067\u78ba\u8a8d\n\n\n\u3053\u308c\u3067\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u3067\u304d\u305f\n\n\n### \u5404\u30e6\u30fc\u30b6\u306b\u30c8\u30fc\u30af\u30f3\u3092\u3042\u3052\u308b\n\n\n```\ntokens=\"2251799813685248\"\n```\n\n\n### accounts.csv\u3068validators.csv\u3092\u4f5c\u6210\n\n\n\n```\nchain_name=\"idiaminchain\"\nwrite_line() {\n  echo \"$1\",\"$2\",\"$3\",\"$4\",\"$5\" >> $chain_dir/accounts.csv\n}\nwrite_line_vals() {\n  echo \"$1\",\"$2\",\"$3\",\"$4\",\"$5\" >> $chain_dir/validators.csv\n}\n```\n\n#### account.csv\u306e\u4f8b\n\n\n```csv:account.csv\n9B7C6F1F52400C35BE6F5CB7138304369A7DCD77,2251799813685248,idiaminchain_admin,16383,16383\n049387262939D3499CB52C9D4CF1E1EB70CF84CC,2251799813685248,idiaminchain_val_00,32,127\nE38899B3518EF34BFE3EA898C4D8981A7900202C,2251799813685248,idiaminchain_val_04,32,127\nA0FEFEB34F8065BFC6C53926994DD98F430585C6,2251799813685248,idiaminchain_particpant_00,94,127\n```\n\n\n### validators.csv\u306e\u4f8b\n\n\n```\n049387262939D3499CB52C9D4CF1E1EB70CF84CC,2251799813685248,idiaminchain_val_00,32,127\n1798977C968653221907677907694FA629D30F15,2251799813685248,idiaminchain_val_01,32,127\nABF9F624E42ACB695F04301EBC7BC9B04C0D8464,2251799813685248,idiaminchain_val_02,32,127\n9F2891F348AF4748386EE86A9C113CA1E5D17BC9,2251799813685248,idiaminchain_val_03,32,127\nE38899B3518EF34BFE3EA898C4D8981A7900202C,2251799813685248,idiaminchain_val_04,32,127\n```\n\n\n## \u30b9\u30c6\u30c3\u30d73. \u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n\n\n\u30b8\u30a7\u30cd\u30b7\u30b9\u30fb\u30d6\u30ed\u30c3\u30af\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n\n\u30d8\u30eb\u30d7\u3092\u8868\u793a\n\n```\neris chains exec -p idiaminchain \"mintgen -h\"\n```\n\n\n### \u554f\u984c\u304c\u8d77\u304d\u305f\u6642\u306b\u3059\u308b\u3053\u3068\n\n\nDocker\u30d7\u30ed\u30bb\u30b9\u3092\u898b\u308b\n\n```\ndocker ps -a\n```\n\n\n\n```\neris chains rm --data $chain_name\neris chains new $chain_name --dir $chain_name\neris chains stop $chain_name\n```\n\ngenesis.json.bak\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b\n\n```\neris chains exec -p $chain_name \"mintgen known --csv=/home/eris/.eris/chains/$chain_name/validators.csv,/home/eris/.eris/chains/$chain_name/accounts.csv $chain_name\" > $chain_dir/genesis.json.bak\n```\n\n\n\n\n\n## genesis.json \u751f\u6210\u306e\u305f\u3081\u306e\u30b5\u30f3\u30d7\u30eb\u3068\u30b3\u30fc\u30c9\n\n\n### genesis.json \u30b5\u30f3\u30d7\u30eb\n\nhttps://github.com/eris-ltd/eris-pm/tree/master/tests/fixtures/chaindata\n\n```json:genesis.json.example\n{\n  \"chain_id\": \"my_tests\",\n  \"accounts\": [\n    {\n      \"address\": \"1040E6521541DAB4E7EE57F21226DD17CE9F0FB7\",\n      \"amount\": 999999999999,\n      \"permissions\": {\n        \"base\": {\n          \"perms\": 16383,\n          \"set\": 16383\n        },\n        \"roles\": []\n\t\t\t}\n    },\n    {\n      \"address\": \"6A3AFFB16BFB95AA547930572D71C460EFBCD857\",\n      \"amount\": 110000000000\n    },\n    {\n      \"address\": \"58FD1799AA32DED3F6EAC096A1DC77834A446B9C\",\n      \"amount\": 110000000000\n    }\n  ],\n  \"validators\": [\n    {\n      \"pub_key\": [\n        1,\n        \"82DADAE153406412833F8098439ED4B5DCC26C0B43C2775EFFE8B911B49D0182\"\n      ],\n      \"amount\": 5000000000,\n      \"unbond_to\": [\n        {\n          \"address\": \"1040E6521541DAB4E7EE57F21226DD17CE9F0FB7\",\n          \"amount\": 5000000000\n        }\n      ]\n    }\n  ]\n}\n```\n\n\n### \u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30b3\u30fc\u30c9\n\nhttps://github.com/eris-ltd/tendermint/blob/develop/account/account.go#L40-L49\n\n```go:account.go\ntype Account struct {\n\tAddress     []byte `json:\"address\"`\n\tPubKey      PubKey `json:\"pub_key\"`\n\tSequence    int    `json:\"sequence\"`\n\tBalance     int64  `json:\"balance\"`\n\tCode        []byte `json:\"code\"`         // VM code\n\tStorageRoot []byte `json:\"storage_root\"` // VM storage merkle root.\n\n\tPermissions ptypes.AccountPermissions `json:\"permissions\"`\n}\n```\n\n\n### \u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\n\nhttps://github.com/eris-ltd/tendermint/blob/develop/permission/types/permissions.go\n\n\n### validators\u306e\u30b3\u30fc\u30c9\n\nhttps://github.com/eris-ltd/tendermint/blob/develop/types/validator.go#L14-L23\n\n\n```go:validator.go\ntype ValidatorInfo struct {\n\tAddress         []byte            `json:\"address\"`\n\tPubKey          acm.PubKeyEd25519 `json:\"pub_key\"`\n\tUnbondTo        []*TxOutput       `json:\"unbond_to\"`\n\tFirstBondHeight int               `json:\"first_bond_height\"`\n\tFirstBondAmount int64             `json:\"first_bond_amount\"`\n\tDestroyedHeight int               `json:\"destroyed_height\"` // If destroyed\n\tDestroyedAmount int64             `json:\"destroyed_amount\"` // If destroyed\n\tReleasedHeight  int               `json:\"released_height\"`  // If released\n}\n```\n\n\n## \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\n\n\n### container already exists\u554f\u984c\n\n\u4f55\u304b\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u305f\u6642\u306b\u4ee5\u4e0b\u304c\u51fa\u308b\u554f\u984c\n\n```\ncontainer already exists\n```\n\n\u89e3\u6c7a\u65b9\u6cd5: \n\n```\ndocker ps -a\n```\n\n\u4e0a\u8a18\u3067\u3001eris_interactive_eris_chain_idiaminchain_1 \u304c\u3042\u308b\u306a\u3089\u3001\u524a\u9664\u3059\u308b\n\n```\ndocker ps -a | grep eris_interactive_eris_chain_idiaminchain_1\ndocker rm [\u30b3\u30f3\u30c6\u30caID]\n```\n\n## \u691c\u7d22\u7528\u8a9e\n\n* Ethereum, \u30a4\u30fc\u30b5\u30ea\u30a2\u30e0\n* Eris, HydraChain, PoA\n* Private blockchain, \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30fb\u30d6\u30ed\u30c3\u30af\u30c1\u30a7\u30fc\u30f3, \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30c1\u30a7\u30fc\u30f3\n* Eris Industries, \u30a8\u30ea\u30b9\u30fb\u30a4\u30f3\u30c0\u30b9\u30c8\u30ea\u30fc\u30ba\n\n\n\n\n\n\n\n\n", "tags": ["Ethereum", "Eris"]}