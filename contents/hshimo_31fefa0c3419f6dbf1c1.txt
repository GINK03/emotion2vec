{"context": " More than 1 year has passed since last update.\n\u30e1\u30e2\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\ngeth 1.0.0/1.0.1\n2015/08/06\u6642\u70b9\n\n\n\u30b3\u30fc\u30c9\u306e\u5834\u6240\nchain_util.go\n\ngo-ethereum/chain_util.go at master \u00b7 ethereum/go-ethereum\n\n\n\u30b3\u30fc\u30c9: chain_util.go\n\nchain_util.go\n// CalcGasLimit computes the gas limit of the next block after parent.\n// The result may be modified by the caller.\nfunc CalcGasLimit(parent *types.Block) *big.Int {\n    decay := new(big.Int).Div(parent.GasLimit(), params.GasLimitBoundDivisor)\n    contrib := new(big.Int).Mul(parent.GasUsed(), big.NewInt(3))\n    contrib = contrib.Div(contrib, big.NewInt(2))\n    contrib = contrib.Div(contrib, params.GasLimitBoundDivisor)\n\n    gl := new(big.Int).Sub(parent.GasLimit(), decay)\n    gl = gl.Add(gl, contrib)\n    gl = gl.Add(gl, big.NewInt(1))\n    gl.Set(common.BigMax(gl, params.MinGasLimit))\n\n    if gl.Cmp(params.GenesisGasLimit) < 0 {\n        gl.Add(parent.GasLimit(), decay)\n        gl.Set(common.BigMin(gl, params.GenesisGasLimit))\n    }\n    return gl\n}\n\n\n\neth_estimateGas\n\nJSON RPC \u00b7 ethereum/wiki Wiki\n\n\ngas limit Pull Request #1578\nv1.0.0 -> v1.0.1 \u3067\u306e\u5909\u66f4\n\nminer: gas limit strategy, target 3141592 & def gas price 50 Shannon by Gustav-Simonsson \u00b7 Pull Request #1578 \u00b7 ethereum/go-ethereum\n\n\n\u8a08\u7b97\u65b9\u6cd5?\n\nparentGasLimit / 1024 -1\n\n\n5000/1024 = 4\n4 -1 = 3\n\n\n\n\n\u30de\u30a4\u30ca\u30fc\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u72b6\u6cc1\u3092\u63a8\u6e2c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\n\ngist:0ecf1db2fb7da8eeb706\n\n\nstrategy\nv1.0.1\u3067\u8ffd\u52a0\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u304b\u3089\n\nblock-to-mine\u306egasLimit\u306f\u3001\u89aa\u306egasUsed\u306e\u5024\u306b\u3088\u3063\u3066\u6c7a\u5b9a\n\u3082\u3057 parentGasUsed > parentGasLimit * (2/3) \u3060\u3063\u305f\u3089\u5897\u3084\u3059\u3002\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u6e1b\u3089\u3059(\u307e\u306f\u305f\u3001\u5909\u66f4\u306a\u3057\u3002)\n\u5897\u6e1b\u91cf\u306f\u3001parentGasLimit * (2/3) parentGasUsed \u304b\u3089\u3069\u308c\u3060\u3051\u96e2\u308c\u3066\u3044\u308b\u304b\u306b\u3088\u308b\n\n\n/*\n  strategy: gasLimit of block-to-mine is set based on parent's\n        gasUsed value.  if parentGasUsed > parentGasLimit * (2/3) then we\n        increase it, otherwise lower it (or leave it unchanged if it's right\n        at that usage) the amount increased/decreased depends on how far away\n        from parentGasLimit * (2/3) parentGasUsed is.\n */\n\n\n\u53c2\u8003\n\nEthereum(Go)\u306eGas Limit\u306e\u8a08\u7b97\u65b9\u6cd5\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 - Qiita\n\n\n\n* \u30e1\u30e2\n\n## \u30d0\u30fc\u30b8\u30e7\u30f3\n\n* geth 1.0.0/1.0.1\n* 2015/08/06\u6642\u70b9\n\n\n## \u30b3\u30fc\u30c9\u306e\u5834\u6240\n\nchain_util.go\n\n* [go-ethereum/chain_util.go at master \u00b7 ethereum/go-ethereum](https://github.com/ethereum/go-ethereum/blob/master/core/chain_util.go)\n\n\n## \u30b3\u30fc\u30c9: chain_util.go\n\n```go:chain_util.go\n// CalcGasLimit computes the gas limit of the next block after parent.\n// The result may be modified by the caller.\nfunc CalcGasLimit(parent *types.Block) *big.Int {\n\tdecay := new(big.Int).Div(parent.GasLimit(), params.GasLimitBoundDivisor)\n\tcontrib := new(big.Int).Mul(parent.GasUsed(), big.NewInt(3))\n\tcontrib = contrib.Div(contrib, big.NewInt(2))\n\tcontrib = contrib.Div(contrib, params.GasLimitBoundDivisor)\n\n\tgl := new(big.Int).Sub(parent.GasLimit(), decay)\n\tgl = gl.Add(gl, contrib)\n\tgl = gl.Add(gl, big.NewInt(1))\n\tgl.Set(common.BigMax(gl, params.MinGasLimit))\n\n\tif gl.Cmp(params.GenesisGasLimit) < 0 {\n\t\tgl.Add(parent.GasLimit(), decay)\n\t\tgl.Set(common.BigMin(gl, params.GenesisGasLimit))\n\t}\n\treturn gl\n}\n```\n\n\n## eth_estimateGas\n\n\n* [JSON RPC \u00b7 ethereum/wiki Wiki](https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_estimategas)\n\n\n## gas limit Pull Request #1578\n\nv1.0.0 -> v1.0.1 \u3067\u306e\u5909\u66f4\n\n* [miner: gas limit strategy, target 3141592 & def gas price 50 Shannon by Gustav-Simonsson \u00b7 Pull Request #1578 \u00b7 ethereum/go-ethereum](https://github.com/ethereum/go-ethereum/pull/1578/files)\n\n\n## \u8a08\u7b97\u65b9\u6cd5?\n\n* parentGasLimit / 1024 -1\n * 5000/1024 = 4\n * 4 -1 = 3\n\n## \u30de\u30a4\u30ca\u30fc\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u72b6\u6cc1\u3092\u63a8\u6e2c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\n\n* [gist:0ecf1db2fb7da8eeb706](https://gist.github.com/nand2/0ecf1db2fb7da8eeb706)\n\n\n## strategy\n\nv1.0.1\u3067\u8ffd\u52a0\u3055\u308c\u305f\u30b3\u30e1\u30f3\u30c8\u304b\u3089\n\n* block-to-mine\u306egasLimit\u306f\u3001\u89aa\u306egasUsed\u306e\u5024\u306b\u3088\u3063\u3066\u6c7a\u5b9a\n* \u3082\u3057 parentGasUsed > parentGasLimit * (2/3) \u3060\u3063\u305f\u3089\u5897\u3084\u3059\u3002\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u6e1b\u3089\u3059(\u307e\u306f\u305f\u3001\u5909\u66f4\u306a\u3057\u3002)\n* \u5897\u6e1b\u91cf\u306f\u3001parentGasLimit * (2/3) parentGasUsed \u304b\u3089\u3069\u308c\u3060\u3051\u96e2\u308c\u3066\u3044\u308b\u304b\u306b\u3088\u308b\n\n> /*\n>\tstrategy: gasLimit of block-to-mine is set based on parent's\n\t\tgasUsed value.  if parentGasUsed > parentGasLimit * (2/3) then we\n\t\tincrease it, otherwise lower it (or leave it unchanged if it's right\n\t\tat that usage) the amount increased/decreased depends on how far away\n\t\tfrom parentGasLimit * (2/3) parentGasUsed is.\n */\n\n\n## \u53c2\u8003\n\n* [Ethereum(Go)\u306eGas Limit\u306e\u8a08\u7b97\u65b9\u6cd5\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9 - Qiita](http://qiita.com/hshimo/items/31fefa0c3419f6dbf1c1)\n", "tags": ["Ethereum"]}