{"context": " More than 1 year has passed since last update.Structural Subtyping \u3068\u306f - \u3044\u3052\u592a\u306e\u30d6\u30ed\u30b0\n\nstructural subtyping \uff08\u69cb\u9020\u7684\u90e8\u5206\u578b\uff09\u3068\u306f\u3001\u5f37\u3044\u578b\u4ed8\u3051\u306b\u3088\u308b\u6069\u6075\u306f\u9b45\u529b\u7684\u3084\u306a\u3001\u3067\u3082\u578b\u306f\u5b9a\u7fa9\u3057\u3066\u3082\u7d99\u627f\u95a2\u4fc2\u307e\u3067\u306f\u5b9a\u7fa9\u3057\u305f\u304f\u306a\u3044\u3001\u5236\u9650\u306b\u3088\u308b\u5805\u3055\u306b\u5229\u306f\u3042\u308b\u3051\u3069\u67d4\u8edf\u6027\u3092\u5931\u3044\u3059\u304e\u308b\u306e\u3082\u3061\u3087\u3063\u3068\u306a\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3070\u3063\u304b\u308a\u3044\u304f\u3064\u3082\u5b9a\u7fa9\u3059\u308b\u306e\u3082\u30a2\u30db\u3089\u3057\u3044\u3057\u3001\u305d\u306e\u6642\u3005\u3067\u9069\u5f53\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5272\u308a\u632f\u308b\u3088\u3046\u306b\u3057\u305f\u3089\u30b9\u30c6\u30ad\u3084\u3093\u3001\u3068\u3044\u3046\u30b7\u30b0\u30cd\u30c1\u30e3\u81f3\u4e0a\u4e3b\u7fa9\u3060\u3002\n\n\u69cb\u9020\u7684\u90e8\u5206\u578b\u306e\u6bd4\u8f03 - \u307e\u3041\u3001\u305d\u3093\u306a\u3082\u3093\u3067\u3057\u3087\u3046\n\n\nOCaml\u306f\u5168\u3066\u578b\u63a8\u8ad6\u3057\u3066\u304f\u308c\u308b\u4ee3\u308f\u308a\u306b\u90e8\u5206\u578b\u3078\u306e\u5909\u63db\u306f\u660e\u793a\u7684\u3002\u90e8\u5206\u578b\u5909\u63db\u304c\u3067\u304d\u308b\u30d0\u30ea\u30a2\u30f3\u30c8\u304c\u3042\u308b\u3002\nhaXe\u306f\u5168\u3066\u578b\u63a8\u8ad6\u3057\u3066\u304f\u308c\u3066\u3001\u304b\u3064\u90e8\u5206\u578b\u3078\u306e\u5909\u63db\u3082\u6697\u9ed9\u7684\u306b\u3067\u304d\u308b\u3051\u3069\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u3068\u307e\u3089\u306a\u3044\nScala\u306f\u578b\u63a8\u8ad6\u306f(\u5b8c\u74a7\u306b\u306f)\u3057\u3066\u304f\u308c\u306a\u3044\u3051\u3069\u3001\u90e8\u5206\u578b\u3078\u306e\u5909\u63db\u306f\u6697\u9ed9\u7684\n\n\n\nScala\u306e\u69cb\u9020\u7684\u90e8\u5206\u578b\nhttp://www.ne.jp/asahi/hishidama/home/tech/scala/type.html\n// \u30af\u30e9\u30b9A\u3068B\u306b\u306f\u7d99\u627f\u95a2\u4fc2\u306f\u7121\u3044\nclass A {\n  def zzz() = println(\"aaa\")\n}\n\nclass B {\n  def zzz() = println(\"bbb\")\n}\n\nscala> var z : { def zzz() } = _\nz: AnyRef{def zzz(): Unit} = null\n\nscala> z = new A\nz: AnyRef{def zzz(): Unit} = A@61064425\n\nscala> z.zzz()\n<console>:9: warning: reflective access of structural type member method zzz should be enabled\nby making the implicit value scala.language.reflectiveCalls visible.\nThis can be achieved by adding the import clause 'import scala.language.reflectiveCalls'\nor by setting the compiler option -language:reflectiveCalls.\nSee the Scala docs for value scala.language.reflectiveCalls for a discussion\nwhy the feature should be explicitly enabled.\n              z.zzz()\n                ^\naaa\n\n\u4e0a\u306e\u8b66\u544a\u306f\n$ scala -language:reflectiveCalls\n\n\u3067\u9664\u3051\u308b\u3002\u660e\u793a\u7684\u306b\u6a5f\u80fd\u3092\u30aa\u30f3\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306f\u3001\n\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3044\u3044\u3088\u3063\u3066\u3044\u3046\u8a31\u53ef\u3092\u4e0e\u3048\u308b\u305f\u3081\u3002\nscala> class A { def zzz() = print(\"aaa\") }\ndefined class A\n\nscala> class B { def zzz() = print(\"bbb\") }\ndefined class B\n\nscala> val list = List[{ def zzz() }](new A, new B)\nlist: List[Object{def zzz(): Unit}] = List(A@f1da57d, B@194fad1)\n\nscala> for(z <- list) z.zzz()\naaabbb\n\nscala> def callzzz(x:X) = x.zzz()\n<console>:7: error: not found: type X\n       def callzzz(x:X) = x.zzz()\n                     ^\n\nscala> def callzzz(x:{def zzz()}) = x.zzz()\ncallzzz: (x: AnyRef{def zzz(): Unit})Unit\n\nscala> callzzz(new A)\naaa\nscala> callzzz(new B)\nbbb\n\n\nX\u306e\u90e8\u5206\u3092\u578b\u63a8\u8ad6\u3055\u305b\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u306e\u304b\u306a\uff1f\n\nHaXe\n\u69cb\u9020\u4f53(\u533f\u540d\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\nhttp://haxe.org/manual/struct?version=17720\nclass Person { // Person\u30af\u30e9\u30b9\u306fname\u95a2\u6570\u3092\u6301\u3063\u3066\u3044\u308b\n  public function new() { }\n  public function name() { return \"osiire\"; }\n  public function age() { return 20; }\n}\nclass Test {\n  public static function main() {\n    print(new Person());\n  }\n  public static function print( n ) { // name\u95a2\u6570\u304c\u3042\u308c\u3070\u3044\u3044\n   trace(n.name());\n  }\n}\n\n\u7d50\u679c\nosiire\n\nPerson\u30af\u30e9\u30b9\u304cname\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\nclass Person {\n  public function new() { }\n  public function age() { return 20; }\n}\n\nBuild failure\nTest.hx:10: characters 10-22 : Person should be { name : Void -> String }\nTest.hx:10: characters 10-22 : Person has no field name\nTest.hx:10: characters 10-22 : For function argument 'n'\n\n\nOCaml\n\nTypeScript\nhttp://yaakaito.org/blog/2013/05/02/typescript-subtyping/\n\n[Structural Subtyping \u3068\u306f](http://igeta.cocolog-nifty.com/blog/2008/05/subtyping.html) - \u3044\u3052\u592a\u306e\u30d6\u30ed\u30b0\n\n> structural subtyping \uff08\u69cb\u9020\u7684\u90e8\u5206\u578b\uff09\u3068\u306f\u3001\u5f37\u3044\u578b\u4ed8\u3051\u306b\u3088\u308b\u6069\u6075\u306f\u9b45\u529b\u7684\u3084\u306a\u3001\u3067\u3082\u578b\u306f\u5b9a\u7fa9\u3057\u3066\u3082\u7d99\u627f\u95a2\u4fc2\u307e\u3067\u306f\u5b9a\u7fa9\u3057\u305f\u304f\u306a\u3044\u3001\u5236\u9650\u306b\u3088\u308b\u5805\u3055\u306b\u5229\u306f\u3042\u308b\u3051\u3069\u67d4\u8edf\u6027\u3092\u5931\u3044\u3059\u304e\u308b\u306e\u3082\u3061\u3087\u3063\u3068\u306a\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3070\u3063\u304b\u308a\u3044\u304f\u3064\u3082\u5b9a\u7fa9\u3059\u308b\u306e\u3082\u30a2\u30db\u3089\u3057\u3044\u3057\u3001\u305d\u306e\u6642\u3005\u3067\u9069\u5f53\u306a\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u5272\u308a\u632f\u308b\u3088\u3046\u306b\u3057\u305f\u3089\u30b9\u30c6\u30ad\u3084\u3093\u3001\u3068\u3044\u3046\u30b7\u30b0\u30cd\u30c1\u30e3\u81f3\u4e0a\u4e3b\u7fa9\u3060\u3002\n\n\n[\u69cb\u9020\u7684\u90e8\u5206\u578b\u306e\u6bd4\u8f03](http://d.hatena.ne.jp/osiire/20091105) - \u307e\u3041\u3001\u305d\u3093\u306a\u3082\u3093\u3067\u3057\u3087\u3046\n\n> * OCaml\u306f\u5168\u3066\u578b\u63a8\u8ad6\u3057\u3066\u304f\u308c\u308b\u4ee3\u308f\u308a\u306b\u90e8\u5206\u578b\u3078\u306e\u5909\u63db\u306f\u660e\u793a\u7684\u3002\u90e8\u5206\u578b\u5909\u63db\u304c\u3067\u304d\u308b\u30d0\u30ea\u30a2\u30f3\u30c8\u304c\u3042\u308b\u3002\n* haXe\u306f\u5168\u3066\u578b\u63a8\u8ad6\u3057\u3066\u304f\u308c\u3066\u3001\u304b\u3064\u90e8\u5206\u578b\u3078\u306e\u5909\u63db\u3082\u6697\u9ed9\u7684\u306b\u3067\u304d\u308b\u3051\u3069\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u3068\u307e\u3089\u306a\u3044\n* Scala\u306f\u578b\u63a8\u8ad6\u306f(\u5b8c\u74a7\u306b\u306f)\u3057\u3066\u304f\u308c\u306a\u3044\u3051\u3069\u3001\u90e8\u5206\u578b\u3078\u306e\u5909\u63db\u306f\u6697\u9ed9\u7684\n\n\n## Scala\u306e\u69cb\u9020\u7684\u90e8\u5206\u578b\n\nhttp://www.ne.jp/asahi/hishidama/home/tech/scala/type.html\n\n```\n// \u30af\u30e9\u30b9A\u3068B\u306b\u306f\u7d99\u627f\u95a2\u4fc2\u306f\u7121\u3044\nclass A {\n  def zzz() = println(\"aaa\")\n}\n\nclass B {\n  def zzz() = println(\"bbb\")\n}\n```\n\n```\nscala> var z : { def zzz() } = _\nz: AnyRef{def zzz(): Unit} = null\n\nscala> z = new A\nz: AnyRef{def zzz(): Unit} = A@61064425\n\nscala> z.zzz()\n<console>:9: warning: reflective access of structural type member method zzz should be enabled\nby making the implicit value scala.language.reflectiveCalls visible.\nThis can be achieved by adding the import clause 'import scala.language.reflectiveCalls'\nor by setting the compiler option -language:reflectiveCalls.\nSee the Scala docs for value scala.language.reflectiveCalls for a discussion\nwhy the feature should be explicitly enabled.\n              z.zzz()\n                ^\naaa\n```\n\n\u4e0a\u306e\u8b66\u544a\u306f\n\n```\n$ scala -language:reflectiveCalls\n```\n\u3067\u9664\u3051\u308b\u3002\u660e\u793a\u7684\u306b\u6a5f\u80fd\u3092\u30aa\u30f3\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306f\u3001\n\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3044\u3044\u3088\u3063\u3066\u3044\u3046\u8a31\u53ef\u3092\u4e0e\u3048\u308b\u305f\u3081\u3002\n\n```\nscala> class A { def zzz() = print(\"aaa\") }\ndefined class A\n\nscala> class B { def zzz() = print(\"bbb\") }\ndefined class B\n\nscala> val list = List[{ def zzz() }](new A, new B)\nlist: List[Object{def zzz(): Unit}] = List(A@f1da57d, B@194fad1)\n\nscala> for(z <- list) z.zzz()\naaabbb\n```\n\n```\nscala> def callzzz(x:X) = x.zzz()\n<console>:7: error: not found: type X\n       def callzzz(x:X) = x.zzz()\n                     ^\n\nscala> def callzzz(x:{def zzz()}) = x.zzz()\ncallzzz: (x: AnyRef{def zzz(): Unit})Unit\n\nscala> callzzz(new A)\naaa\nscala> callzzz(new B)\nbbb\n\n```\n\n`X`\u306e\u90e8\u5206\u3092\u578b\u63a8\u8ad6\u3055\u305b\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u306e\u304b\u306a\uff1f\n\n## HaXe\n\n\u69cb\u9020\u4f53(\u533f\u540d\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\nhttp://haxe.org/manual/struct?version=17720\n\n```\nclass Person { // Person\u30af\u30e9\u30b9\u306fname\u95a2\u6570\u3092\u6301\u3063\u3066\u3044\u308b\n  public function new() { }\n  public function name() { return \"osiire\"; }\n  public function age() { return 20; }\n}\nclass Test {\n  public static function main() {\n    print(new Person());\n  }\n  public static function print( n ) { // name\u95a2\u6570\u304c\u3042\u308c\u3070\u3044\u3044\n   trace(n.name());\n  }\n}\n```\n\n\u7d50\u679c\n\n```\nosiire\n```\n\n`Person`\u30af\u30e9\u30b9\u304c`name`\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\n\n```\nclass Person {\n  public function new() { }\n  public function age() { return 20; }\n}\n```\n\n```\nBuild failure\nTest.hx:10: characters 10-22 : Person should be { name : Void -> String }\nTest.hx:10: characters 10-22 : Person has no field name\nTest.hx:10: characters 10-22 : For function argument 'n'\n```\n\n\n## OCaml\n\n## TypeScript\n\nhttp://yaakaito.org/blog/2013/05/02/typescript-subtyping/\n", "tags": ["\u69cb\u9020\u7684\u90e8\u5206\u578b", "\u9759\u7684\u578b", "\u90e8\u5206\u578b", "\u578b", "\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0"]}