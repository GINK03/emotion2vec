{"context": "\n\n\u306f\u3058\u3081\u306b\n\u81ea\u5b85\u306b\u53e4\u3044\u30b5\u30fc\u30d0\u3092\u518d\u5229\u7528\u3057\u305fVMware ESXi(\u4eee\u60f3\u30b5\u30fc\u30d0\u3001\u3077\u3061\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30af\u30e9\u30a6\u30c9\u7684\u306a\u3082\u306e)\u304c\u3042\u308a\u307e\u3057\u3066\u3001\u305d\u3053\u3067\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u305f\u3066\u3066\u65b0\u3057\u3044\u6280\u8853\u306e\u691c\u8a3c\u3084Qiita\u3067\u6c17\u306b\u306a\u3063\u305f\u3053\u3068\u3001\u8a66\u3057\u305f\u3044\u3053\u3068\u306a\u3069\u8272\u3005\u3057\u3066\u3044\u307e\u3059\u3002\n\u305f\u3060\u3001\u6bce\u56de\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u305f\u3066\u3066\u3001OS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u304c\u3059\u3054\u304f\u624b\u9593\u3067\u3059\u3002\u3002\u3002\n\uff08\u3048\uff1f\u3001vagrant\u3068\u304b\u4f7f\u3048\u3070\u3044\u3044\u3058\u3083\u3093\u3063\u3066\u3001\u3001\u30e1\u30a4\u30f3\u3067\u4f7f\u3063\u3066\u3044\u308b\u30ce\u30fc\u30c8PC\u304c\u30dd\u30f3\u30b3\u30c4\u3059\u304e\u3066\u3002\u3002\u3002\u30e1\u30e2\u30ea\u3068\u304b\u5168\u7136\u8db3\u308a\u306a\u3044\u3057\u3001\u306a\u308b\u3079\u304f\u30ed\u30fc\u30ab\u30eb\u306f\u6c5a\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3002\u3002\uff09\n\u306a\u306e\u3067\u3001\u81ea\u52d5\u5316\u3057\u3066\u30e9\u30af\u306bOS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\uff01\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\u30fbKickStart\u3092\u5229\u7528\u3057\u305fCentOS7\u3092\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bISO\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\u3000\u2190\u4eca\u56de\u3053\u308c\n\u30fbAnsible\u3067ESXi\u3092\u64cd\u4f5c\u3057\u3066\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210\u30fb\u524a\u9664\u30fb\u69cb\u6210\u306e\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u69cb\u6210\nISO\u306e\u4f5c\u6210\u306f\u57fa\u672c\u7684\u306b\u30dd\u30f3\u30b3\u30c4\u30ce\u30fc\u30c8PC\u3067\u884c\u3044\u3001\u4f5c\u6210\u3057\u305fISO\u30d5\u30a1\u30a4\u30eb\u3092ESXi\u30b5\u30fc\u30d0\u306b\u9001\u308a\u307e\u3059\u3002\n                     \u540c\u4e00LAN\n  \u30dd\u30f3\u30b3\u30c4\u30ce\u30fc\u30c8PC    <----------->    ESXi\u30b5\u30fc\u30d0\nip:192.168.10.10                  ip:192.168.10.8\n\n\n\u624b\u9806\n\nOS\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebISO\u306e\u3082\u3068\u3068\u306a\u308bCentOS7\u306eISO\u3092\u53d6\u5f97\nopen-vm-tools\u306a\u3069\u81ea\u52d5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u305f\u3081\u3001Minimal\u3067\u306f\u306a\u304fDVD\u7248\u306eISO\u3092\u53d6\u5f97\u3057\u3066\u304a\u304f\u3053\u3068\n# wget http://ftp.iij.ad.jp/pub/linux/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso\n\n\nCentOS7\u306eISO\u30d5\u30a1\u30a4\u30eb\u3092\u5c55\u958b\u3059\u308b\n# mount -r /root/CentOS-7-x86_64-DVD-1611.iso /mnt\n# mkdir -p /tmp/centos7/ks\n# cp -rp /mnt/* /tmp/centos7\n\n\nKickStart\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n# cd /tmp/centos7/ks\n# vi anaconda-ks.cfg\n\n\n/tmp/centos7/ks/anaconda-ks.cfg\n# version=DEVEL\n# System authorization information\nauth --enableshadow --passalgo=sha512\n# Use CDROM installation media\ncdrom\n# Use graphical install\ntext\n# Run the Setup Agent on first boot\nfirstboot --enable\n#ignoredisk --only-use=sda\n# Keyboard layouts\nkeyboard --vckeymap=jp --xlayouts='jp'\n# System language\nlang ja_JP.UTF-8\n\n# Network information\nnetwork  --bootproto=dhcp --device=ens192 --ipv6=auto --activate\nnetwork  --hostname=testvm\n\n# Root password\nrootpw --iscrypted $6$mdTPMO/VJC68VrUZ$ctM6wT.oT8WVVZ44ec6v.u1gn28IvAYo3tOEW/EfGmt9hxbJlwd60LAUi2lFAtDYFEwDBOOUAI/c9XhRVi10K.\n# Do not configure the X Window System\nskipx\n# System timezone\ntimezone Asia/Tokyo --isUtc\nuser --name=centos --password=$6$j4FkN7wJ5o2rU6X0$yDky4ZGY.GKq2XmSTErJJH4Amt2MvBMYgO0mwD9PYmmg.bY/FXG0QK0XPlWGfQS5V7xuY618XaWLWzYigIXNY. --iscrypted --gecos=\"centos\"\n\nzerombr\n# System bootloader configuration\nbootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=sda\n# Partition clearing information\nclearpart --all --initlabel\n# Disk partitioning information\nautopart\n#example partition setting\n#part pv.216 --fstype=\"lvmpv\" --ondisk=sda --size=15883\n#part /boot --fstype=\"xfs\" --ondisk=sda --size=500\n#volgroup centos --pesize=4096 pv.216\n#logvol /  --fstype=\"xfs\" --grow --maxsize=51200 --size=1024 --name=root --vgname=centos\n#logvol swap  --fstype=\"swap\" --size=1638 --name=swap --vgname=centos\n\n\nselinux --disabled\nfirewall --disabled\n\n%packages\n@^minimal\n@core\nkexec-tools\nvim\nopen-vm-tools\n%end\n\n\n%addon com_redhat_kdump --enable --reserve-mb='auto'\n\n%end\n\n# Reboot after the installation is complete.(eject DVD media before rebooting)\nreboot --eject\n\n\n\n\ntext\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u753b\u9762\u8a2d\u5b9a\u3002GUI/text\u30e2\u30fc\u30c9\u304b\u6307\u5b9a\u3059\u308b\u3002KickStart\u30d5\u30a1\u30a4\u30eb\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3059\u308b\u5834\u5408\u306f\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306e\u307b\u3046\u304c\u4f7f\u3044\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u304c\u3001\u6700\u7d42\u7684\u306b\u4f55\u53f0\u3082\u306e\u30de\u30b7\u30f3\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u306f\u3001text\u30e2\u30fc\u30c9\u304c\u65e9\u304f\u3066\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u30fb\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb(GUI)\u30e2\u30fc\u30c9\u306b\u3059\u308b\u5834\u5408\ngraphical\n\u30fb\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u306b\u3059\u308b\u5834\u5408\ntext\n\n\nselinux\u8a2d\u5b9a\n\nselinux\u306e\u8a2d\u5b9a\u3002\u7121\u52b9\u5316(--disabled)\u3001\u6709\u52b9\u5316(--enforcing)\u3001\u8b66\u544a\u51fa\u529b(--permissive)\u3092\u9078\u629e\u3057\u307e\u3059\u3002\nselinux [--disabled|--enforcing|--permissive]\n\nex)\nselinux --disabled\nfirewall --disabled\n\n\n\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u6709\u52b9\u30fb\u7121\u52b9\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8907\u6570\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u3001\u30b9\u30da\u30fc\u30b9\u3092\u5165\u308c\u308b\u3068\u305d\u308c\u4ee5\u964d\u306f\u8a8d\u8b58\u3055\u308c\u307e\u305b\u3093\u3002\n\u30b5\u30fc\u30d3\u30b9\u306e\u6709\u52b9\u5316\nservices --enabled=SERVICE1,SERVICE2,SERVICE3\n\u30b5\u30fc\u30d3\u30b9\u306e\u7121\u52b9\u5316\nservices --disabled=SERVICE1,SERVICE2,SERVICE3\n\n\nzerombr\n\n\u3053\u306e\u8a2d\u5b9a\u3092\u3044\u308c\u306a\u3044\u3068\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u521d\u671f\u5316\u306e\u8a2d\u5b9a\u753b\u9762\u306e\u3068\u3053\u308d\u3067\u3068\u307e\u3063\u3066\u3057\u307e\u3044\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u305b\u3093\u3002\n\n%packages\n\n%packages ~ %end\u3067\u56f2\u307e\u308c\u305f\u3053\u3068\u308d\u306b\u6307\u5b9a\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nKickStart\u5b8c\u4e86\u5f8c\u306e\u6319\u52d5\n\n\u30ea\u30d6\u30fc\u30c8\u3059\u308b\u5834\u5408\uff1a\"reboot --eject\"\u3000\u203b\"-eject\"\u306fdvd\u3092\u6392\u51fa\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\n\u96fb\u6e90OFF\u3059\u308b\u5834\u5408:\"poweroff\"\n\u4e00\u6642\u505c\u6b62\u3059\u308b\u5834\u5408\uff1a\"halt\"\n\n\n\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u8d77\u52d5\u30e1\u30cb\u30e5\u8a2d\u5b9a\nOS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u30e1\u30cb\u30e5\u306b\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30e1\u30cb\u30e5\u3092\u8ffd\u52a0\u3059\u308b\n# vi /tmp/centos7/isolinux/isolinux.cfg\n\ntimeout 600 <- 50\u5909\u66f4\n\u30fb\n\u30fb\n\u30fb\nlabel check\n  menu label Test this ^media & install CentOS Linux 7\n  #menu default\u3000\u3000<-\u3000\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n  kernel vmlinuz\n  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\\x207\\x20x86_64 rd.live.check quiet\n\n\u2193\u8ffd\u52a0\n\nlabel centos7auto\n  menu label ^Install CentOS 7\n  menu default\n  kernel vmlinuz\n  append initrd=initrd.img inst.stage2=cdrom inst.ks=cdrom:/ks/anaconda-ks.cfg\n\n\n\niso\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u306e\u3059\u308b\u305f\u3081\u306e\u30bd\u30d5\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum install genisoimage\n\u203b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u5f8c\u306bmkisofs\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308b\u3053\u3068\n\n\nmkisofs \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4e38\u3054\u3068\uff29\uff33\uff2f\u30a4\u30e1\u30fc\u30b8\u5316\n# cd /tmp/centos7\n# mkisofs -o ../CentOS-7-x86_64-DVD-1611_Auto.iso -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -R -J -v -T -V \"CentOS 7 x86_64\" ./\n\n\u203b\u3053\u308c\u3067OS\u3092\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bISO\u304c\u4f5c\u6210\u3055\u308c\u308b\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\n  -l                \uff1a Allow full 31 character filenames for ISO9660 names\n  -r                \uff1a Generate rationalized Rock Ridge directory information\n  -J                \uff1a Generate Joliet directory information\n  -o FILE           \uff1a Set output file name\n  -b FILE           \uff1a Set El Torito boot image name\n  -c FILE           \uff1a Set El Torito boot catalog name\n  -no-emul-boot     \uff1a Boot image is 'no emulation' image\n  -boot-load-size # \uff1a Set numbers of load sectors\n  -boot-info-table  \uff1a Patch boot image with info table\n\n\u53c2\u8003\nhttps://access.redhat.com/documentation/ja-JP/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html\n\nESXi\u306e\u30c6\u30fc\u30bf\u30b9\u30c8\u30a2\u3078\u8ee2\u9001\u3057\u3066\u304a\u304f\nESXi\u306eISO\u30d5\u30a1\u30a4\u30eb\u7f6e\u304d\u5834\u306f\u81ea\u5206\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u304f\u3060\u3055\u3044\u3002\n# scp /var/tmp/CentOS-7-x86_64-DVD-1611_Auto.iso root@192.168.10.8:/vmfs/volumes/datastore1/ISO/centos/\n\n# \u306f\u3058\u3081\u306b\n\u81ea\u5b85\u306b\u53e4\u3044\u30b5\u30fc\u30d0\u3092\u518d\u5229\u7528\u3057\u305fVMware ESXi(\u4eee\u60f3\u30b5\u30fc\u30d0\u3001\u3077\u3061\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30af\u30e9\u30a6\u30c9\u7684\u306a\u3082\u306e)\u304c\u3042\u308a\u307e\u3057\u3066\u3001\u305d\u3053\u3067\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u305f\u3066\u3066\u65b0\u3057\u3044\u6280\u8853\u306e\u691c\u8a3c\u3084Qiita\u3067\u6c17\u306b\u306a\u3063\u305f\u3053\u3068\u3001\u8a66\u3057\u305f\u3044\u3053\u3068\u306a\u3069\u8272\u3005\u3057\u3066\u3044\u307e\u3059\u3002\n\u305f\u3060\u3001\u6bce\u56de\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u305f\u3066\u3066\u3001OS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u304c\u3059\u3054\u304f\u624b\u9593\u3067\u3059\u3002\u3002\u3002\n\uff08\u3048\uff1f\u3001vagrant\u3068\u304b\u4f7f\u3048\u3070\u3044\u3044\u3058\u3083\u3093\u3063\u3066\u3001\u3001\u30e1\u30a4\u30f3\u3067\u4f7f\u3063\u3066\u3044\u308b\u30ce\u30fc\u30c8PC\u304c\u30dd\u30f3\u30b3\u30c4\u3059\u304e\u3066\u3002\u3002\u3002\u30e1\u30e2\u30ea\u3068\u304b\u5168\u7136\u8db3\u308a\u306a\u3044\u3057\u3001\u306a\u308b\u3079\u304f\u30ed\u30fc\u30ab\u30eb\u306f\u6c5a\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3002\u3002\uff09\n\u306a\u306e\u3067\u3001\u81ea\u52d5\u5316\u3057\u3066\u30e9\u30af\u306bOS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\uff01\n\n#\u3084\u308a\u305f\u3044\u3053\u3068\n\n\u30fbKickStart\u3092\u5229\u7528\u3057\u305fCentOS7\u3092\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bISO\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u3002\u3000***\u2190\u4eca\u56de\u3053\u308c***\n\u30fbAnsible\u3067ESXi\u3092\u64cd\u4f5c\u3057\u3066\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210\u30fb\u524a\u9664\u30fb\u69cb\u6210\u306e\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n\n\n#\u69cb\u6210\n\nISO\u306e\u4f5c\u6210\u306f\u57fa\u672c\u7684\u306b\u30dd\u30f3\u30b3\u30c4\u30ce\u30fc\u30c8PC\u3067\u884c\u3044\u3001\u4f5c\u6210\u3057\u305fISO\u30d5\u30a1\u30a4\u30eb\u3092ESXi\u30b5\u30fc\u30d0\u306b\u9001\u308a\u307e\u3059\u3002\n\n```\n                     \u540c\u4e00LAN\n  \u30dd\u30f3\u30b3\u30c4\u30ce\u30fc\u30c8PC    <----------->    ESXi\u30b5\u30fc\u30d0\nip:192.168.10.10                  ip:192.168.10.8\n```\n\n#\u624b\u9806\n\n## OS\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebISO\u306e\u3082\u3068\u3068\u306a\u308bCentOS7\u306eISO\u3092\u53d6\u5f97\n\nopen-vm-tools\u306a\u3069\u81ea\u52d5\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u305f\u3081\u3001Minimal\u3067\u306f\u306a\u304fDVD\u7248\u306eISO\u3092\u53d6\u5f97\u3057\u3066\u304a\u304f\u3053\u3068\n\n```\n# wget http://ftp.iij.ad.jp/pub/linux/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-1611.iso\n```\n\n##CentOS7\u306eISO\u30d5\u30a1\u30a4\u30eb\u3092\u5c55\u958b\u3059\u308b\n\n```\n# mount -r /root/CentOS-7-x86_64-DVD-1611.iso /mnt\n# mkdir -p /tmp/centos7/ks\n# cp -rp /mnt/* /tmp/centos7\n```\n\n\n## KickStart\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n```\n# cd /tmp/centos7/ks\n# vi anaconda-ks.cfg\n```\n\n```/tmp/centos7/ks/anaconda-ks.cfg\n# version=DEVEL\n# System authorization information\nauth --enableshadow --passalgo=sha512\n# Use CDROM installation media\ncdrom\n# Use graphical install\ntext\n# Run the Setup Agent on first boot\nfirstboot --enable\n#ignoredisk --only-use=sda\n# Keyboard layouts\nkeyboard --vckeymap=jp --xlayouts='jp'\n# System language\nlang ja_JP.UTF-8\n\n# Network information\nnetwork  --bootproto=dhcp --device=ens192 --ipv6=auto --activate\nnetwork  --hostname=testvm\n\n# Root password\nrootpw --iscrypted $6$mdTPMO/VJC68VrUZ$ctM6wT.oT8WVVZ44ec6v.u1gn28IvAYo3tOEW/EfGmt9hxbJlwd60LAUi2lFAtDYFEwDBOOUAI/c9XhRVi10K.\n# Do not configure the X Window System\nskipx\n# System timezone\ntimezone Asia/Tokyo --isUtc\nuser --name=centos --password=$6$j4FkN7wJ5o2rU6X0$yDky4ZGY.GKq2XmSTErJJH4Amt2MvBMYgO0mwD9PYmmg.bY/FXG0QK0XPlWGfQS5V7xuY618XaWLWzYigIXNY. --iscrypted --gecos=\"centos\"\n\nzerombr\n# System bootloader configuration\nbootloader --append=\" crashkernel=auto\" --location=mbr --boot-drive=sda\n# Partition clearing information\nclearpart --all --initlabel\n# Disk partitioning information\nautopart\n#example partition setting\n#part pv.216 --fstype=\"lvmpv\" --ondisk=sda --size=15883\n#part /boot --fstype=\"xfs\" --ondisk=sda --size=500\n#volgroup centos --pesize=4096 pv.216\n#logvol /  --fstype=\"xfs\" --grow --maxsize=51200 --size=1024 --name=root --vgname=centos\n#logvol swap  --fstype=\"swap\" --size=1638 --name=swap --vgname=centos\n\n\nselinux --disabled\nfirewall --disabled\n\n%packages\n@^minimal\n@core\nkexec-tools\nvim\nopen-vm-tools\n%end\n\n\n%addon com_redhat_kdump --enable --reserve-mb='auto'\n\n%end\n\n# Reboot after the installation is complete.(eject DVD media before rebooting)\nreboot --eject\n\n```\n\n\n- text\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306e\u753b\u9762\u8a2d\u5b9a\u3002GUI/text\u30e2\u30fc\u30c9\u304b\u6307\u5b9a\u3059\u308b\u3002KickStart\u30d5\u30a1\u30a4\u30eb\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3059\u308b\u5834\u5408\u306f\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306e\u307b\u3046\u304c\u4f7f\u3044\u3084\u3059\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u304c\u3001\u6700\u7d42\u7684\u306b\u4f55\u53f0\u3082\u306e\u30de\u30b7\u30f3\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u5834\u5408\u306f\u3001text\u30e2\u30fc\u30c9\u304c\u65e9\u304f\u3066\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\n\u30fb\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb(GUI)\u30e2\u30fc\u30c9\u306b\u3059\u308b\u5834\u5408\ngraphical\n\u30fb\u30c6\u30ad\u30b9\u30c8\u30e2\u30fc\u30c9\u306b\u3059\u308b\u5834\u5408\ntext\n```\n\n- selinux\u8a2d\u5b9a\n\nselinux\u306e\u8a2d\u5b9a\u3002\u7121\u52b9\u5316(--disabled)\u3001\u6709\u52b9\u5316(--enforcing)\u3001\u8b66\u544a\u51fa\u529b(--permissive)\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n``` \nselinux [--disabled|--enforcing|--permissive]\n\nex)\nselinux --disabled\nfirewall --disabled\n```\n\n- \u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u6709\u52b9\u30fb\u7121\u52b9\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8907\u6570\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f\u3001\u30b9\u30da\u30fc\u30b9\u3092\u5165\u308c\u308b\u3068\u305d\u308c\u4ee5\u964d\u306f\u8a8d\u8b58\u3055\u308c\u307e\u305b\u3093\u3002\n\n```\n\u30b5\u30fc\u30d3\u30b9\u306e\u6709\u52b9\u5316\nservices --enabled=SERVICE1,SERVICE2,SERVICE3\n\u30b5\u30fc\u30d3\u30b9\u306e\u7121\u52b9\u5316\nservices --disabled=SERVICE1,SERVICE2,SERVICE3\n```\n\n- zerombr\n\n\u3053\u306e\u8a2d\u5b9a\u3092\u3044\u308c\u306a\u3044\u3068\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u521d\u671f\u5316\u306e\u8a2d\u5b9a\u753b\u9762\u306e\u3068\u3053\u308d\u3067\u3068\u307e\u3063\u3066\u3057\u307e\u3044\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u305b\u3093\u3002\n\n- %packages\n\n`%packages ~ %end`\u3067\u56f2\u307e\u308c\u305f\u3053\u3068\u308d\u306b\u6307\u5b9a\u3057\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\n- KickStart\u5b8c\u4e86\u5f8c\u306e\u6319\u52d5\n\n```\n\u30ea\u30d6\u30fc\u30c8\u3059\u308b\u5834\u5408\uff1a\"reboot --eject\"\u3000\u203b\"-eject\"\u306fdvd\u3092\u6392\u51fa\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\n\u96fb\u6e90OFF\u3059\u308b\u5834\u5408:\"poweroff\"\n\u4e00\u6642\u505c\u6b62\u3059\u308b\u5834\u5408\uff1a\"halt\"\n```\n\n\n\n\n## \u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u8d77\u52d5\u30e1\u30cb\u30e5\u8a2d\u5b9a\n\nOS\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u30e1\u30cb\u30e5\u306b\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30e1\u30cb\u30e5\u3092\u8ffd\u52a0\u3059\u308b\n\n```\n# vi /tmp/centos7/isolinux/isolinux.cfg\n```\n\n```\ntimeout 600 <- 50\u5909\u66f4\n\u30fb\n\u30fb\n\u30fb\nlabel check\n  menu label Test this ^media & install CentOS Linux 7\n  #menu default\u3000\u3000<-\u3000\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n  kernel vmlinuz\n  append initrd=initrd.img inst.stage2=hd:LABEL=CentOS\\x207\\x20x86_64 rd.live.check quiet\n\n\u2193\u8ffd\u52a0\n\nlabel centos7auto\n  menu label ^Install CentOS 7\n  menu default\n  kernel vmlinuz\n  append initrd=initrd.img inst.stage2=cdrom inst.ks=cdrom:/ks/anaconda-ks.cfg\n\n```\n\n\n##iso\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u306e\u3059\u308b\u305f\u3081\u306e\u30bd\u30d5\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# yum install genisoimage\n\u203b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u5f8c\u306bmkisofs\u30b3\u30de\u30f3\u30c9\u304c\u3042\u308b\u3053\u3068\n```\n\n##  mkisofs \u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u4f5c\u696d\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4e38\u3054\u3068\uff29\uff33\uff2f\u30a4\u30e1\u30fc\u30b8\u5316\n\n```\n# cd /tmp/centos7\n# mkisofs -o ../CentOS-7-x86_64-DVD-1611_Auto.iso -b isolinux/isolinux.bin -c isolinux/boot.cat -no-emul-boot -boot-load-size 4 -boot-info-table -R -J -v -T -V \"CentOS 7 x86_64\" ./\n\n\u203b\u3053\u308c\u3067OS\u3092\u81ea\u52d5\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bISO\u304c\u4f5c\u6210\u3055\u308c\u308b\n```\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\n\n```\n  -l                \uff1a Allow full 31 character filenames for ISO9660 names\n  -r                \uff1a Generate rationalized Rock Ridge directory information\n  -J                \uff1a Generate Joliet directory information\n  -o FILE           \uff1a Set output file name\n  -b FILE           \uff1a Set El Torito boot image name\n  -c FILE           \uff1a Set El Torito boot catalog name\n  -no-emul-boot     \uff1a Boot image is 'no emulation' image\n  -boot-load-size # \uff1a Set numbers of load sectors\n  -boot-info-table  \uff1a Patch boot image with info table\n```\n\n\u53c2\u8003\nhttps://access.redhat.com/documentation/ja-JP/Red_Hat_Enterprise_Linux/7/html/Installation_Guide/sect-kickstart-syntax.html\n\n#ESXi\u306e\u30c6\u30fc\u30bf\u30b9\u30c8\u30a2\u3078\u8ee2\u9001\u3057\u3066\u304a\u304f\n\nESXi\u306eISO\u30d5\u30a1\u30a4\u30eb\u7f6e\u304d\u5834\u306f\u81ea\u5206\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u304f\u3060\u3055\u3044\u3002\n\n```\n# scp /var/tmp/CentOS-7-x86_64-DVD-1611_Auto.iso root@192.168.10.8:/vmfs/volumes/datastore1/ISO/centos/\n```\n\n\n", "tags": ["centos7", "ESXi", "kickstart"]}