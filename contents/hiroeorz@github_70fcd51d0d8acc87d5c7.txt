{"context": " More than 1 year has passed since last update.\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\npeerjs-server\u3092\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u30fc\u306b\u4f7f\u3063\u3066\u3001[\u30d6\u30e9\u30a6\u30b6 - iOS\u30cd\u30a4\u30c6\u30a3\u30f4\u30a2\u30d7\u30ea]\u9593\u3067WebRTC\u306a\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u3057\u305f\u3044\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u3067\u304d\u305f\u3082\u306e\niOS\u30cd\u30a4\u30c6\u30a3\u30f4\u30a2\u30d7\u30ea\u7528\u306ePeer\u30e9\u30a4\u30d6\u30e9\u30eaPeerObjectiveC\u4f5c\u3063\u305f\u3002\u4f5c\u3063\u305f\u3068\u3044\u3046\u304b\u3001WebRTC\u306eiOS\u30a2\u30d7\u30ea\u5411\u3051\u30b5\u30f3\u30d7\u30eb\u3067\u3042\u308bAppRTCDemo\u306b\u5909\u66f4\u3092\u52a0\u3048\u3066peerjs-server\u3068\u3084\u308a\u3068\u308a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\ngithub:PeerObjectiveC\n\n\u3068\u308a\u3042\u3048\u305a\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u3067\u304d\u305f\u3068\u3044\u3046\u30ec\u30d9\u30eb\u3067\u3001\u8272\u3005\u629c\u3051\u3084\u9593\u9055\u3044\u304c\u3042\u308b\u3068\u601d\u3046\u3002\n\u3061\u306a\u307f\u306bPeerJS\u306f\u4e00\u65e6XHRStreaming\u3067\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u30fc\u3068\u306e\u63a5\u7d9a\u30aa\u30fc\u30d7\u30f3\u3057\u305f\u306e\u3061WebSocket\u30aa\u30fc\u30d7\u30f3\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u3066\u30aa\u30fc\u30d7\u30f3\u3067\u304d\u305f\u3089WebSocket\u3067\u3001\u3060\u3081\u306a\u3089WebSocket\u306f\u8ae6\u3081\u3066XHRStreaming\u3067\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u7d4c\u8def\u3092\u78ba\u4fdd\u3059\u308b\u3088\u3046\u3060\u3051\u3069\u3001\u30b3\u30a4\u30c4\u306f\u305d\u308c\u306f\u3057\u3066\u306a\u3044\u3002\nWebSocket\u4e00\u672c\u3002WebSocket\u304c\u7e4b\u304c\u3089\u306a\u304b\u3063\u305f\u3089\u305d\u308c\u3067\u7d42\u4e86w\n\u3053\u3093\u306a\u611f\u3058\u3002\n\n\u5927\u304d\u304f\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u304cMacBook\u306eChrome(http://cdn.peerjs.com/demo/videochat/)\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u3066\u308b\u30ea\u30e2\u30fc\u30c8\u306e\u30d3\u30c7\u30aa\u6620\u50cf\u3002\u5c0f\u3055\u3044\u306e\u304ciPhone\u306e\u30ab\u30e1\u30e9\u304b\u3089\u53d6\u5f97\u3057\u3066\u308b\u30ed\u30fc\u30ab\u30eb\u306e\u6620\u50cf\u3002\u3053\u308c\u306f\u5f53\u7136\u3001Mac\u306e\u30d6\u30e9\u30a6\u30b6\u5074\u3067\u3082\u8868\u793a\u3055\u308c\u3066\u308b\u3002\n\u3061\u306a\u307f\u306bNTT\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u30ba\u306eSkyWay\u3068\u3082\u3084\u3063\u3066\u307f\u305f\u3051\u3069\u3001\u73fe\u72b6\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3002\nWebSocket\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u3001\u30d8\u30c3\u30c0\u306b Origin: <SkyWay\u306b\u767b\u9332\u3057\u305f\u30c9\u30e1\u30a4\u30f3>\u3068\u3059\u308b\u3068WebSocket\u30aa\u30fc\u30d7\u30f3\u5f8c\u306e{type:\"OPEN\"}\u53d7\u4fe1\u307e\u3067\u3044\u3063\u305f\u3093\u3060\u3051\u3069\u3001\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u4e2d\u306b\u306a\u3093\u304b\u5931\u6557\u3057\u3066\u3057\u307e\u3046\u3002\n\u3082\u3046\u3061\u3087\u3063\u3068\u9811\u5f35\u3063\u305f\u3089\u3064\u306a\u304c\u308a\u305d\u3046\u3060\u3063\u305f\u3051\u3069\u3001\u75b2\u308c\u305f\u306e\u3067\u3084\u3081\u305f(\u00b4\u03c9`;)\n\n\u4f7f\u3044\u65b9\n\u4f7f\u3044\u65b9\u306fREADME.md\u306b\u9811\u5f35\u3063\u3066\u66f8\u3044\u305f\u306e\u3067\u898b\u3066\u304f\u3060\u3055\u308c\u3002\n\u3042\u3068\u306f\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306eAppDelegate.m\u3068\u304bViewController.m\u3068\u304b\u3002\n\n\u30cf\u30de\u3063\u305f\u3068\u3053\n\u30cf\u30de\u308a\u3069\u3053\u308d\u3068\u3057\u3066\u306f\u3001\u30a2\u30d7\u30ea\u958b\u59cb\u6642\u306b\u4e00\u56de\u3060\u3051 [RTCPeerConnectionFactory initializeSSL] \u3057\u306a\u3044\u3068\u30ed\u30fc\u30ab\u30eb\u306eSessionDescription\u53d6\u5f97\u6642\u306b\u30a8\u30e9\u30fc\u304c\u3067\u3066\u5148\u306b\u9032\u3081\u306a\u3044\u3002\u6c17\u4ed8\u304f\u306e\u306b3\u6642\u9593\u304f\u3089\u3044\u304b\u304b\u3063\u305fo<\u00b4\u30fb\u03c9\u30fb\uff40>o\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3067\u3044\u3046\u3068\u30b3\u30b3\n\n\u308f\u304b\u3063\u305f\u3053\u3068\u3068\u304b\n\u3068\u308a\u3042\u3048\u305aAppRTCDemo\u3092peerjs-server\u5411\u3051\u306b\u5909\u66f4\u3059\u308b\u306b\u3042\u305f\u3063\u3066\u3001peerjs-server\u306e\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u8ffd\u3063\u3066\u307f\u305f\u3002\n\u3053\u3053\u304b\u3089\u5148\u306f\u5358\u306a\u308b\u899a\u66f8\u3002\u4e0b\u8a18\u306e\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u7d4c\u8def\u3092\u4f7f\u3063\u3066\u3001\u30ea\u30e2\u30fc\u30c8\u306eSessionDescription\u3092\u30ed\u30fc\u30ab\u30eb\u306ePeerConnection\u306b\u30bb\u30c3\u30c8\u3057\u3001\u30ed\u30fc\u30ab\u30eb\u306eSessionDescription\u3092\u30ea\u30e2\u30fc\u30c8\u306b\u9001\u308a\u3001\u3055\u3089\u306b\u304a\u4e92\u3044\u306bICE CANDIDATE\u3092\u6295\u3052\u5408\u3048\u3070WebRTC\u306b\u3088\u308b\u30d4\u30a2\u30c4\u30fc\u30d4\u30a2\u901a\u4fe1\u304c\u59cb\u307e\u308b\uff08\u4e71\u66b4\u3002\n\nHTTP API\nPeerJS\u306f\u6700\u521d\u306bid\u304c\u4e0e\u3048\u3089\u308c\u306a\u304b\u3063\u305f\u3089\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306aid\u3092\u53d6\u5f97\u3059\u308b\u3002\u3053\u308c\u306f\u5358\u7d14\u306bHTTP GET\u3067\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3059\u308b\u3002\n\nid\u53d6\u5f97\n\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306aid\u3092\u53d6\u5f97\u3059\u308b\u3002\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067id\u3092\u751f\u6210\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u306eAPI\u3092\u547c\u3073\u51fa\u3059\u51e6\u7406\u3092\u7701\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\nHTTP\u30e1\u30bd\u30c3\u30c9\nGET\n\nURL\n\nURL:\n\n\n/:key/id\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\n\n:key \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6e21\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fpeerjs\n\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\nid \u30b5\u30fc\u30d0\u30fc\u5074\u3067\u751f\u6210\u3057\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u6587\u5b57\u5217\n\n\n\u4f8b: eve816uhqazfflxr \n\n\n\n\n\n\n\u4f8b\n\u4ee5\u4e0b\u306ekey\u306f\u30c7\u30e2\u30a2\u30d7\u30ea\u306e\u30b3\u30fc\u30c9\u304b\u3089\u501f\u308a\u3066\u304d\u305f :p\n\u30ea\u30af\u30a8\u30b9\u30c8\n$ curl http://0.peerjs.com:9000/lwjd5qra8257b9/id\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\neve816uhqazfflxr\n\n\n\n\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u63a5\u7d9a\u958b\u59cb\u8981\u6c42\nXHR\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306fWebSocket\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044\u74b0\u5883\u3067\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u63a5\u7d9a\u3092\u884c\u3046\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3089\u3057\u3044\u3002\n\u5f93\u3063\u3066PeerJS\u306e\u5b9f\u88c5\u3067\u306f\u3001\u4e00\u65e6XHR\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u30aa\u30fc\u30d7\u30f3\u3057\u3066\u304a\u3044\u3066\u3001\u5f8c\u8ff0\u306eWebSocket\u63a5\u7d9a\u30aa\u30fc\u30d7\u30f3\u304c\u6210\u529f\u3057\u305f\u6642\u70b9\u3067XHR\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u7834\u68c4\u3057\u3066\u3044\u308b\u3002\n\n\u53c2\u80031\n\u53c2\u80032\n\n\nHTTP\u30e1\u30bd\u30c3\u30c9\nPOST\n\nURL\n\nURL\n\n\n/:key/:id/:token/id\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\n\n:key \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6e21\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fpeerjs\n\n\n:id id\u53d6\u5f97\u3067\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3057\u305fid\n\n:token \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u30c8\u30fc\u30af\u30f3\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\u6210\u529f\u6642:\n\n\n{\"type\":\"OPEN\"}\n\n\n\u30a8\u30e9\u30fc\u6642:\n\n\n{\"type\":\"ERROR\"}\n\n\n\u63a5\u7d9a\u306f\u305d\u306e\u307e\u307e\u7dad\u6301\u3055\u308c\u308b\u3002\n\n\n\n\n\u4f8b\n\u30ea\u30af\u30a8\u30b9\u30c8\n\u30ea\u30af\u30a8\u30b9\u30c8\n$ curl -X POST http://0.peerjs.com:9000/lwjd5qra8257b9/j2eythggd12lnmi/randomtoken/id\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n00000000000000000000000000000000000000000000000000000000000\n00000000000000000000000000000000000000000000000000000000000\n...(\u4e2d\u7565)...\n00000000000000000000000000000000000000000000000000000000000\n{\"type\":\"OPEN\"}\n\n\u305d\u306e\u307e\u307e\u63a5\u7d9a\u7dad\u6301\u3002\u5f8c\u8ff0\u306eWebSocket\u304c\u63a5\u7d9a\u6210\u529f\u3057\u305f\u3089\u30af\u30ed\u30fc\u30ba\u3055\u308c\u308b\u3002\u6210\u529f\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3053\u306e\u63a5\u7d9a\u3092\u7528\u3044\u3066\u4e0b\u8a18\u306eWebSocket API\u306e\u901a\u4fe1\u3092\u884c\u3046\u3002\n\nWebSocket API\n\nWebSocket\u63a5\u7d9a\u958b\u59cb\u8981\u6c42\n\nURL\n\nURL\n\n\nws://<\u30db\u30b9\u30c8\u540d>:<\u30dd\u30fc\u30c8\u756a\u53f7>/:path/peerjs?key=:key&id=:id&token=:token\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\n\n:key \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6e21\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fpeerjs\n\n\n:id id\u53d6\u5f97\u3067\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3057\u305fid\n\n:token \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u30c8\u30fc\u30af\u30f3\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n\n\n\u6210\u529f\u6642: \n\n\n{\"type\":\"OPEN\"}\n\n\n\u30a8\u30e9\u30fc\u6642: \n\n\n{\"type\":\"ERROR\", \"payload\":{\"msg\":\"No id, token, or key supplied to websocket server\"}}\n\n\n\u63a5\u7d9a\u306f\u305d\u306e\u307e\u307e\u7dad\u6301\u3055\u308c\u308b\u3002\n\n\n\n\n\u4f8b\n\u30ea\u30af\u30a8\u30b9\u30c8\n$ wscat -c \"ws://0.peerjs.com:9000/peerjs?key=lwjd5qra8257b9&id=j2eythggd12lnmi&token=randomtoken\"\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\n{\"type\":\"OPEN\"}\n\n\n\nWebRTC\u958b\u59cb\u8981\u6c42: OFFER\n\u9001\u4fe1\u5148\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306bP2P\u63a5\u7d9a\u306e\u30aa\u30fc\u30d7\u30f3\u3092\u8981\u6c42\u3059\u308b\u3002\n\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u30fc\u306f\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u3092\u305d\u306e\u307e\u307e\u9001\u4fe1\u5148\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8ee2\u9001\u3059\u308b\u3002\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\ntype: \"OFFER\" \u56fa\u5b9a\n\nsrc: \u9001\u4fe1\u5143id\n\ndst: \u9001\u4fe1\u5148id\n\npayload:\n\n\n\nsdp: pc.setLocalDescription\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305fsdp\n\ntype: \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u30bf\u30a4\u30d7\u3002media\u307e\u305f\u306fdata\n\n\nlabel: \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u6587\u5b57\u5217\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fid\u3068\u540c\u3058\u3002\n\nconnectionId: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6bce\u306eid(pc_xxxx)\n\nreliable: data channel\u306b\u4fe1\u983c\u6027\u3092\u3082\u305f\u305b\u308b\u304b\u3001\u3082\u305f\u305b\u306a\u3044\u304b\u306e\u6307\u5b9a(\u30c7\u30d5\u30a9\u30eb\u30c8\u306ffalse)\u3002\n\nserialization: \u30c7\u30fc\u30bf\u306e\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u65b9\u5f0f(binary\u3001binary-utf8\u3001json\u306e\u3044\u305a\u308c\u304b) \u3002\n\nmetadata: \u30e6\u30fc\u30b6\u30fc\u304b\u3089option\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u3002\n\nbrowser: \u30d6\u30e9\u30a6\u30b6\u306e\u7a2e\u985e(Firefox\u3001Chrome\u3001Supported\u3001Unsupported\u306e\u3044\u305a\u308c\u304b)\n\n\n\n\n\u4f8b\n{\"type\": \"OFFER\", \n \"src\": \"05u1k6gkhjwi2j4i\", \n \"dst\": \"haruhf6uvr9vygb9\", \n \"payload\": {\"sdp\": {\"type\": \"media\", \n                     \"connectionId\": \"pc_abc\", \n                     \"reliable\": false, \n                     \"serialization\": \"binary\", \n                     \"browser\": \"Chrome\", \n                     \"sdp\": \"(\u4e0b\u8a18\u306b\u4f8b\u3092\u8a18\u8f09)\"}}\n\n\nsdp\u306e\u4f8b\nv=0\\r\\no=- 7418734785428027033 2 IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\na=group:BUNDLE audio video\\r\\na=msid-semantic: WMS yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4\\r\\nm=audio 1 RTP/SAVPF 111 103 104 0 8 106 105 13 126\\r\\nc=IN IP4 0.0.0.0\\r\\na=rtcp:1 IN IP4 0.0.0.0\\r\\na=ice-ufrag:Hw3NWnb12md3lR6d\\r\\na=ice-pwd:otSaCLf4lCJ/thdp4vrZDBeT\\r\\na=ice-options:google-ice\\r\\na=fingerprint:sha-256 3C:7C:7F:50:12:01:52:1E:68:82:60:96:4F:E3:34:8E:93:6D:49:D7:FA:6C:C5:97:82:A9:17:F6:99:71:BB:B7\\r\\na=setup:actpass\\r\\na=mid:audio\\r\\na=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\\r\\na=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\\r\\na=recvonly\\r\\na=rtcp-mux\\r\\na=rtpmap:111 opus/48000/2\\r\\na=fmtp:111 minptime=10\\r\\na=rtpmap:103 ISAC/16000\\r\\na=rtpmap:104 ISAC/32000\\r\\na=rtpmap:0 PCMU/8000\\r\\na=rtpmap:8 PCMA/8000\\r\\na=rtpmap:106 CN/32000\\r\\na=rtpmap:105 CN/16000\\r\\na=rtpmap:13 CN/8000\\r\\na=rtpmap:126 telephone-event/8000\\r\\na=maxptime:60\\r\\nm=video 1 RTP/SAVPF 100 116 117 96\\r\\nc=IN IP4 0.0.0.0\\r\\na=rtcp:1 IN IP4 0.0.0.0\\r\\na=ice-ufrag:Hw3NWnb12md3lR6d\\r\\na=ice-pwd:otSaCLf4lCJ/thdp4vrZDBeT\\r\\na=ice-options:google-ice\\r\\na=fingerprint:sha-256 3C:7C:7F:50:12:01:52:1E:68:82:60:96:4F:E3:34:8E:93:6D:49:D7:FA:6C:C5:97:82:A9:17:F6:99:71:BB:B7\\r\\na=setup:actpass\\r\\na=mid:video\\r\\na=extmap:2 urn:ietf:params:rtp-hdrext:toffset\\r\\na=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\\r\\na=sendrecv\\r\\na=rtcp-mux\\r\\na=rtpmap:100 VP8/90000\\r\\na=rtcp-fb:100 ccm fir\\r\\na=rtcp-fb:100 nack\\r\\na=rtcp-fb:100 nack pli\\r\\na=rtcp-fb:100 goog-remb\\r\\na=rtpmap:116 red/90000\\r\\na=rtpmap:117 ulpfec/90000\\r\\na=rtpmap:96 rtx/90000\\r\\na=fmtp:96 apt=100\\r\\na=ssrc-group:FID 2413349061 3209926379\\r\\na=ssrc:2413349061 cname:LFa7v78rabKhSORN\\r\\na=ssrc:2413349061 msid:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4 6f957125-c30c-45f8-85a6-5ac644736662\\r\\na=ssrc:2413349061 mslabel:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4\\r\\na=ssrc:2413349061 label:6f957125-c30c-45f8-85a6-5ac644736662\\r\\na=ssrc:3209926379 cname:LFa7v78rabKhSORN\\r\\na=ssrc:3209926379 msid:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4 6f957125-c30c-45f8-85a6-5ac644736662\\r\\na=ssrc:3209926379 mslabel:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4\\r\\na=ssrc:3209926379 label:6f957125-c30c-45f8-85a6-5ac644736662\\r\\n\n\n\n\u5fdc\u7b54: ANSWER\n\u30d4\u30a2\u304b\u3089\u306eOFFER\u306b\u5bfe\u3059\u308b\u5fdc\u7b54\u3002\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\ntype: \"ANSWER\" \u56fa\u5b9a\n\nsrc: \u9001\u4fe1\u5143id\n\ndst: \u9001\u4fe1\u5148id\n\npayload:\n\n\n\nsdp: pc.setLocalDescription\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305fsdp\n\ntype: \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u30bf\u30a4\u30d7\u3002media\u307e\u305f\u306fdata\n\n\nconnectionId: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6bce\u306eid(pc_xxxx)\n\nbrowser: \u30d6\u30e9\u30a6\u30b6\u306e\u7a2e\u985e(Firefox\u3001Chrome\u3001Supported\u3001Unsupported\u306e\u3044\u305a\u308c\u304b)\n\n\n\n\n\u4f8b\n{\"type\": \"ANSWER\", \n \"src\": \"05u1k6gkhjwi2j4i\", \n \"dst\": \"haruhf6uvr9vygb9\", \n \"payload\": {\"sdp\": {\"type\": \"media\", \n                     \"connectionId\": \"pc_abc\", \n                     \"browser\": \"Chrome\", \n                     \"sdp\": \"(\u524d\u9805\u306b\u4f8b\u3092\u8a18\u8f09)\"}}\n\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u60c5\u5831\u306e\u4f1d\u9054: ICE CANDIDATE\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u540c\u58eb\u304cSTUN\u30b5\u30fc\u30d0\u30fc\u3068TURN\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u3044\u3066\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u60c5\u5831\u3092\u76f8\u4e92\u306b\u9001\u4fe1\u3059\u308b\u3002\n\u9001\u4fe1\u306f\u975e\u540c\u671f\u306b\u304a\u3053\u306a\u308f\u308c\u308b\u3002\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\ntype: \"CANDIDATE\" \u56fa\u5b9a\n\nsrc: \u9001\u4fe1\u5143id\n\ndst: \u9001\u4fe1\u5148id\n\npayload:\n\n\n\ncandidate: onicecandidate\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305f\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306ecandidate(evt.candidate)\n\ntype: \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u30bf\u30a4\u30d7\u3002media\u307e\u305f\u306fdata\n\n\nconnectionId: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6bce\u306eid(pc_xxxx)\n\n\n\n\n\u4f8b\n{\"type\": \"CANDIDATE\", \n \"src\": \"05u1k6gkhjwi2j4i\", \n \"dst\": \"haruhf6uvr9vygb9\", \n \"payload\": {\"candidate\": {\"type\": \"media\", \n                           \"connectionId\": \"pc_abc\", \n                           \"candidate\": {\"sdpMLineIndex\":1,\n                                         \"sdpMid\":\"video\",\n                                         \"candidate\":\"candidate:3013953624 2 udp 2122260223 192.168.1.123 60258 typ host generation 0\"}}}\n\n\ncandidate\u306e\u4f8b\n{\"sdpMLineIndex\":1,\n \"sdpMid\":\"video\",\n \"candidate\":\"candidate:3013953624 2 udp 2122260223 192.168.1.123 60258 typ host generation 0\"}\n\n\n\u9001\u4fe1\u30b3\u30fc\u30c9\u4f8b\nonicecandidate \u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u3001\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u306e\u305f\u3073\u306b\u30d4\u30a2\u306b\u9001\u4fe1\u3059\u308b\u3002\npc.onicecandidate = function(evt) {\n  if (evt.candidate) {\n    util.log('Received ICE candidates for:', connection.peer);\n    provider.socket.send({\n      type: 'CANDIDATE',\n      dst: peerId,\n      payload: {\n        candidate: evt.candidate,\n        type: connection.type,\n        connectionId: connection.id\n      }\n    });\n  }\n};\n\n\n\u901a\u4fe1\u7d42\u4e86: LEAVE\n\u901a\u4fe1\u76f8\u624b\u306e\u63a5\u7d9a\u304c\u9589\u3058\u305f\u3002\u3053\u306e\u901a\u77e5\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306f\u9001\u3089\u305a\u3001\u30b5\u30fc\u30d0\u30fc\u304c\u5224\u65ad\u3057\u3066\u63a5\u7d9a\u304c\u9589\u3058\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u901a\u4fe1\u4e2d\u3060\u3063\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\n\u9001\u4fe1\u30c7\u30fc\u30bf\n{\"type\": \"LEAVE\", \"src\": \"\u9001\u4fe1\u5143id\", \"dst\": \"\u9001\u4fe1\u5148id\"}\n\n\n\u4f8b\n{\"type\": \"LEAVE\", \"src\": \"05u1k6gkhjwi2j4i\", \"dst\": \"jghpgwypfucba9k9\"}\n\n\n\nOFFER\u306b\u5bfe\u3059\u308b\u5fdc\u7b54\u304c\u306a\u3044: EXPIRE\n\u30ea\u30e2\u30fc\u30c8\u306bOFFER\u3092\u9001\u3063\u305f\u304c\u5fdc\u7b54\u304c\u306a\u304b\u3063\u305f\u3002\u3053\u306e\u901a\u77e5\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306f\u9001\u3089\u305a\u3001\u30b5\u30fc\u30d0\u30fc\u304c\u5224\u65ad\u3057\u3066OFFER\u9001\u4fe1\u5143\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\n\u9001\u4fe1\u30c7\u30fc\u30bf\n{\"type\": \"EXPIRE\", \"src\": \"\u9001\u4fe1\u5143id\", \"dst\": \"\u9001\u4fe1\u5148id\"}\n\n\n\u4f8b\n{\"type\": \"EXPIRE\", \"src\": \"05u1k6gkhjwi2j4i\", \"dst\": \"jghpgwypfucba9k9\"}\n\n\n\u3053\u306e\u8fba\u307e\u3067\u3067\u306a\u3093\u3060\u304b\u3067\u304d\u305d\u3046\u306a\u6c17\u304c\u3057\u3066\u304d\u305f\u306e\u3067\u3001\u3053\u308c\u4ee5\u4e0a\u306f\u8ffd\u3063\u3066\u306a\u3044\u3002\n\n## \u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n\n[peerjs-server](https://github.com/peers/peerjs-server)\u3092\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u30fc\u306b\u4f7f\u3063\u3066\u3001<b>[\u30d6\u30e9\u30a6\u30b6 - iOS\u30cd\u30a4\u30c6\u30a3\u30f4\u30a2\u30d7\u30ea]</b>\u9593\u3067WebRTC\u306a\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u3057\u305f\u3044\u3002\n\n## \u3068\u308a\u3042\u3048\u305a\u3067\u304d\u305f\u3082\u306e\n\niOS\u30cd\u30a4\u30c6\u30a3\u30f4\u30a2\u30d7\u30ea\u7528\u306ePeer\u30e9\u30a4\u30d6\u30e9\u30ea[PeerObjectiveC](https://github.com/hiroeorz/PeerObjectiveC)\u4f5c\u3063\u305f\u3002\u4f5c\u3063\u305f\u3068\u3044\u3046\u304b\u3001WebRTC\u306eiOS\u30a2\u30d7\u30ea\u5411\u3051\u30b5\u30f3\u30d7\u30eb\u3067\u3042\u308bAppRTCDemo\u306b\u5909\u66f4\u3092\u52a0\u3048\u3066peerjs-server\u3068\u3084\u308a\u3068\u308a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n* [github:PeerObjectiveC](https://github.com/hiroeorz/PeerObjectiveC)\n\n\u3068\u308a\u3042\u3048\u305a\u30d3\u30c7\u30aa\u30c1\u30e3\u30c3\u30c8\u3067\u304d\u305f\u3068\u3044\u3046\u30ec\u30d9\u30eb\u3067\u3001\u8272\u3005\u629c\u3051\u3084\u9593\u9055\u3044\u304c\u3042\u308b\u3068\u601d\u3046\u3002\n\n\u3061\u306a\u307f\u306bPeerJS\u306f\u4e00\u65e6XHRStreaming\u3067\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u30fc\u3068\u306e\u63a5\u7d9a\u30aa\u30fc\u30d7\u30f3\u3057\u305f\u306e\u3061WebSocket\u30aa\u30fc\u30d7\u30f3\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u3066\u30aa\u30fc\u30d7\u30f3\u3067\u304d\u305f\u3089WebSocket\u3067\u3001\u3060\u3081\u306a\u3089WebSocket\u306f\u8ae6\u3081\u3066XHRStreaming\u3067\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u7d4c\u8def\u3092\u78ba\u4fdd\u3059\u308b\u3088\u3046\u3060\u3051\u3069\u3001\u30b3\u30a4\u30c4\u306f\u305d\u308c\u306f\u3057\u3066\u306a\u3044\u3002\nWebSocket\u4e00\u672c\u3002WebSocket\u304c\u7e4b\u304c\u3089\u306a\u304b\u3063\u305f\u3089\u305d\u308c\u3067\u7d42\u4e86w\n\n\u3053\u3093\u306a\u611f\u3058\u3002\n![IMG_4546.jpg](https://qiita-image-store.s3.amazonaws.com/0/13835/07c9412c-67d8-eafe-f323-bbc486acd79f.jpeg \"IMG_4546.jpg\")\n\n\u5927\u304d\u304f\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u306e\u304cMacBook\u306eChrome([http://cdn.peerjs.com/demo/videochat/](http://cdn.peerjs.com/demo/videochat/))\u304b\u3089\u9001\u3089\u308c\u3066\u304d\u3066\u308b\u30ea\u30e2\u30fc\u30c8\u306e\u30d3\u30c7\u30aa\u6620\u50cf\u3002\u5c0f\u3055\u3044\u306e\u304ciPhone\u306e\u30ab\u30e1\u30e9\u304b\u3089\u53d6\u5f97\u3057\u3066\u308b\u30ed\u30fc\u30ab\u30eb\u306e\u6620\u50cf\u3002\u3053\u308c\u306f\u5f53\u7136\u3001Mac\u306e\u30d6\u30e9\u30a6\u30b6\u5074\u3067\u3082\u8868\u793a\u3055\u308c\u3066\u308b\u3002\n\n\u3061\u306a\u307f\u306bNTT\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u30ba\u306e[SkyWay](http://nttcom.github.io/skyway/)\u3068\u3082\u3084\u3063\u3066\u307f\u305f\u3051\u3069\u3001\u73fe\u72b6\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3002\nWebSocket\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u3001\u30d8\u30c3\u30c0\u306b ```Origin: <SkyWay\u306b\u767b\u9332\u3057\u305f\u30c9\u30e1\u30a4\u30f3>```\u3068\u3059\u308b\u3068WebSocket\u30aa\u30fc\u30d7\u30f3\u5f8c\u306e```{type:\"OPEN\"}```\u53d7\u4fe1\u307e\u3067\u3044\u3063\u305f\u3093\u3060\u3051\u3069\u3001\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u4e2d\u306b\u306a\u3093\u304b\u5931\u6557\u3057\u3066\u3057\u307e\u3046\u3002\n\u3082\u3046\u3061\u3087\u3063\u3068\u9811\u5f35\u3063\u305f\u3089\u3064\u306a\u304c\u308a\u305d\u3046\u3060\u3063\u305f\u3051\u3069\u3001\u75b2\u308c\u305f\u306e\u3067\u3084\u3081\u305f(\u00b4\u03c9`;)\n\n## \u4f7f\u3044\u65b9\n\n\u4f7f\u3044\u65b9\u306f[README.md](https://github.com/hiroeorz/PeerObjectiveC/blob/master/README.md)\u306b\u9811\u5f35\u3063\u3066\u66f8\u3044\u305f\u306e\u3067\u898b\u3066\u304f\u3060\u3055\u308c\u3002\n\n\u3042\u3068\u306f\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306e[AppDelegate.m](https://github.com/hiroeorz/PeerObjectiveC/blob/master/PeerObjectiveC/AppDelegate.m)\u3068\u304b[ViewController.m](https://github.com/hiroeorz/PeerObjectiveC/blob/master/PeerObjectiveC/ViewController.m)\u3068\u304b\u3002\n\n## \u30cf\u30de\u3063\u305f\u3068\u3053\n\n\u30cf\u30de\u308a\u3069\u3053\u308d\u3068\u3057\u3066\u306f\u3001\u30a2\u30d7\u30ea\u958b\u59cb\u6642\u306b\u4e00\u56de\u3060\u3051 ```[RTCPeerConnectionFactory initializeSSL]``` \u3057\u306a\u3044\u3068\u30ed\u30fc\u30ab\u30eb\u306eSessionDescription\u53d6\u5f97\u6642\u306b\u30a8\u30e9\u30fc\u304c\u3067\u3066\u5148\u306b\u9032\u3081\u306a\u3044\u3002\u6c17\u4ed8\u304f\u306e\u306b3\u6642\u9593\u304f\u3089\u3044\u304b\u304b\u3063\u305fo<\u00b4\u30fb\u03c9\u30fb\uff40>o\n\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3067\u3044\u3046\u3068[\u30b3\u30b3](https://github.com/hiroeorz/PeerObjectiveC/blob/master/PeerObjectiveC/AppDelegate.m#L22)\n\n## \u308f\u304b\u3063\u305f\u3053\u3068\u3068\u304b\n\n\u3068\u308a\u3042\u3048\u305aAppRTCDemo\u3092peerjs-server\u5411\u3051\u306b\u5909\u66f4\u3059\u308b\u306b\u3042\u305f\u3063\u3066\u3001peerjs-server\u306e\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u8ffd\u3063\u3066\u307f\u305f\u3002\n\n\u3053\u3053\u304b\u3089\u5148\u306f\u5358\u306a\u308b\u899a\u66f8\u3002\u4e0b\u8a18\u306e\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u7d4c\u8def\u3092\u4f7f\u3063\u3066\u3001\u30ea\u30e2\u30fc\u30c8\u306eSessionDescription\u3092\u30ed\u30fc\u30ab\u30eb\u306ePeerConnection\u306b\u30bb\u30c3\u30c8\u3057\u3001\u30ed\u30fc\u30ab\u30eb\u306eSessionDescription\u3092\u30ea\u30e2\u30fc\u30c8\u306b\u9001\u308a\u3001\u3055\u3089\u306b\u304a\u4e92\u3044\u306bICE CANDIDATE\u3092\u6295\u3052\u5408\u3048\u3070WebRTC\u306b\u3088\u308b\u30d4\u30a2\u30c4\u30fc\u30d4\u30a2\u901a\u4fe1\u304c\u59cb\u307e\u308b\uff08\u4e71\u66b4\u3002\n\n\n## HTTP API\n\nPeerJS\u306f\u6700\u521d\u306bid\u304c\u4e0e\u3048\u3089\u308c\u306a\u304b\u3063\u305f\u3089\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306aid\u3092\u53d6\u5f97\u3059\u308b\u3002\u3053\u308c\u306f\u5358\u7d14\u306bHTTP GET\u3067\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3059\u308b\u3002\n\n### id\u53d6\u5f97\n\n\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306aid\u3092\u53d6\u5f97\u3059\u308b\u3002\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067id\u3092\u751f\u6210\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u306eAPI\u3092\u547c\u3073\u51fa\u3059\u51e6\u7406\u3092\u7701\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n#### HTTP\u30e1\u30bd\u30c3\u30c9\nGET\n\n#### URL\n\n* URL:\n    * ```/:key/id ```\n* \u30d1\u30e9\u30e1\u30fc\u30bf\n    * ```:key``` \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6e21\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f```peerjs```\n* \u30ec\u30b9\u30dd\u30f3\u30b9\n    * ```id``` \u30b5\u30fc\u30d0\u30fc\u5074\u3067\u751f\u6210\u3057\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u6587\u5b57\u5217\n        * \u4f8b: ```eve816uhqazfflxr``` \n\n\n#### \u4f8b\n\n\u4ee5\u4e0b\u306e```key```\u306f[\u30c7\u30e2\u30a2\u30d7\u30ea](http://cdn.peerjs.com/demo/videochat/#)\u306e\u30b3\u30fc\u30c9\u304b\u3089\u501f\u308a\u3066\u304d\u305f :p\n\n<b>\u30ea\u30af\u30a8\u30b9\u30c8</b>\n\n```\n$ curl http://0.peerjs.com:9000/lwjd5qra8257b9/id\n```\n\n<b>\u30ec\u30b9\u30dd\u30f3\u30b9</b>\n\n```\neve816uhqazfflxr\n```\n\n----\n\n### \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u63a5\u7d9a\u958b\u59cb\u8981\u6c42\n\nXHR\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u306fWebSocket\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044\u74b0\u5883\u3067\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u63a5\u7d9a\u3092\u884c\u3046\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3089\u3057\u3044\u3002\n\u5f93\u3063\u3066PeerJS\u306e\u5b9f\u88c5\u3067\u306f\u3001\u4e00\u65e6XHR\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u30aa\u30fc\u30d7\u30f3\u3057\u3066\u304a\u3044\u3066\u3001\u5f8c\u8ff0\u306eWebSocket\u63a5\u7d9a\u30aa\u30fc\u30d7\u30f3\u304c\u6210\u529f\u3057\u305f\u6642\u70b9\u3067XHR\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u7834\u68c4\u3057\u3066\u3044\u308b\u3002\n\n* [\u53c2\u80031](https://github.com/peers/peerjs/blob/master/lib/socket.js#L33)\n* [\u53c2\u80032](https://github.com/peers/peerjs/blob/master/lib/socket.js#L70)\n\n#### HTTP\u30e1\u30bd\u30c3\u30c9\nPOST\n\n#### URL\n\n* URL\n    * ```/:key/:id/:token/id```\n* \u30d1\u30e9\u30e1\u30fc\u30bf\n    * ```:key``` \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6e21\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f```peerjs```\n    * ```:id``` ```id\u53d6\u5f97```\u3067\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3057\u305fid\n    * ```:token``` \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u30c8\u30fc\u30af\u30f3\n* \u30ec\u30b9\u30dd\u30f3\u30b9\n    * \u6210\u529f\u6642:\n        * ```{\"type\":\"OPEN\"}```\n    * \u30a8\u30e9\u30fc\u6642:\n        * ```{\"type\":\"ERROR\"}```\n    * \u63a5\u7d9a\u306f\u305d\u306e\u307e\u307e\u7dad\u6301\u3055\u308c\u308b\u3002\n\n#### \u4f8b\n\n\u30ea\u30af\u30a8\u30b9\u30c8\n\n<b>\u30ea\u30af\u30a8\u30b9\u30c8</b>\n\n```\n$ curl -X POST http://0.peerjs.com:9000/lwjd5qra8257b9/j2eythggd12lnmi/randomtoken/id\n```\n\n<b>\u30ec\u30b9\u30dd\u30f3\u30b9</b>\n\n```\n00000000000000000000000000000000000000000000000000000000000\n00000000000000000000000000000000000000000000000000000000000\n...(\u4e2d\u7565)...\n00000000000000000000000000000000000000000000000000000000000\n{\"type\":\"OPEN\"}\n```\n\u305d\u306e\u307e\u307e\u63a5\u7d9a\u7dad\u6301\u3002\u5f8c\u8ff0\u306eWebSocket\u304c\u63a5\u7d9a\u6210\u529f\u3057\u305f\u3089\u30af\u30ed\u30fc\u30ba\u3055\u308c\u308b\u3002\u6210\u529f\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3053\u306e\u63a5\u7d9a\u3092\u7528\u3044\u3066\u4e0b\u8a18\u306eWebSocket API\u306e\u901a\u4fe1\u3092\u884c\u3046\u3002\n\n\n## WebSocket API\n\n### WebSocket\u63a5\u7d9a\u958b\u59cb\u8981\u6c42\n\n#### URL\n\n* URL\n    * ```ws://<\u30db\u30b9\u30c8\u540d>:<\u30dd\u30fc\u30c8\u756a\u53f7>/:path/peerjs?key=:key&id=:id&token=:token```\n* \u30d1\u30e9\u30e1\u30fc\u30bf\n    * ```:key``` \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6e21\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f```peerjs```\n    * ```:id``` ```id\u53d6\u5f97```\u3067\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u53d6\u5f97\u3057\u305fid\n    * ```:token``` \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30e9\u30f3\u30c0\u30e0\u306a\u30c8\u30fc\u30af\u30f3\n* \u30ec\u30b9\u30dd\u30f3\u30b9\n    * \u6210\u529f\u6642: \n        * ```{\"type\":\"OPEN\"}```\n    * \u30a8\u30e9\u30fc\u6642: \n        * ```{\"type\":\"ERROR\", \"payload\":{\"msg\":\"No id, token, or key supplied to websocket server\"}}```\n    * \u63a5\u7d9a\u306f\u305d\u306e\u307e\u307e\u7dad\u6301\u3055\u308c\u308b\u3002\n\n#### \u4f8b\n\n<b>\u30ea\u30af\u30a8\u30b9\u30c8</b>\n\n```\n$ wscat -c \"ws://0.peerjs.com:9000/peerjs?key=lwjd5qra8257b9&id=j2eythggd12lnmi&token=randomtoken\"\n```\n\n<b>\u30ec\u30b9\u30dd\u30f3\u30b9</b>\n\n```\n{\"type\":\"OPEN\"}\n```\n\n----\n\n## WebRTC\u958b\u59cb\u8981\u6c42: OFFER\n\n\u9001\u4fe1\u5148\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306bP2P\u63a5\u7d9a\u306e\u30aa\u30fc\u30d7\u30f3\u3092\u8981\u6c42\u3059\u308b\u3002\n\u30b7\u30b0\u30ca\u30ea\u30f3\u30b0\u30b5\u30fc\u30d0\u30fc\u306f\u53d7\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u3092\u305d\u306e\u307e\u307e\u9001\u4fe1\u5148\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8ee2\u9001\u3059\u308b\u3002\n\n### \u30d1\u30e9\u30e1\u30fc\u30bf\n\n* ```type```: \"OFFER\" \u56fa\u5b9a\n* ```src```: \u9001\u4fe1\u5143id\n* ```dst```: \u9001\u4fe1\u5148id\n* ```payload```:\n    * ```sdp```: ```pc.setLocalDescription```\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305fsdp\n    * ```type```: \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u30bf\u30a4\u30d7\u3002```media```\u307e\u305f\u306f```data```\n    * ```label```: \u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u6587\u5b57\u5217\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f```id```\u3068\u540c\u3058\u3002\n    * ```connectionId```: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6bce\u306eid(```pc_xxxx```)\n    * ```reliable```: data channel\u306b\u4fe1\u983c\u6027\u3092\u3082\u305f\u305b\u308b\u304b\u3001\u3082\u305f\u305b\u306a\u3044\u304b\u306e\u6307\u5b9a(\u30c7\u30d5\u30a9\u30eb\u30c8\u306f```false```)\u3002\n    * ```serialization```: \u30c7\u30fc\u30bf\u306e\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u65b9\u5f0f(```binary```\u3001```binary-utf8```\u3001```json```\u306e\u3044\u305a\u308c\u304b) \u3002\n    * ```metadata```: \u30e6\u30fc\u30b6\u30fc\u304b\u3089option\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u3002\n    * ```browser```: \u30d6\u30e9\u30a6\u30b6\u306e\u7a2e\u985e(```Firefox```\u3001```Chrome```\u3001```Supported```\u3001```Unsupported```\u306e\u3044\u305a\u308c\u304b)\n\n### \u4f8b\n\n```\n{\"type\": \"OFFER\", \n \"src\": \"05u1k6gkhjwi2j4i\", \n \"dst\": \"haruhf6uvr9vygb9\", \n \"payload\": {\"sdp\": {\"type\": \"media\", \n                     \"connectionId\": \"pc_abc\", \n                     \"reliable\": false, \n                     \"serialization\": \"binary\", \n                     \"browser\": \"Chrome\", \n                     \"sdp\": \"(\u4e0b\u8a18\u306b\u4f8b\u3092\u8a18\u8f09)\"}}\n```\n\n### sdp\u306e\u4f8b\n\n```\nv=0\\r\\no=- 7418734785428027033 2 IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\na=group:BUNDLE audio video\\r\\na=msid-semantic: WMS yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4\\r\\nm=audio 1 RTP/SAVPF 111 103 104 0 8 106 105 13 126\\r\\nc=IN IP4 0.0.0.0\\r\\na=rtcp:1 IN IP4 0.0.0.0\\r\\na=ice-ufrag:Hw3NWnb12md3lR6d\\r\\na=ice-pwd:otSaCLf4lCJ/thdp4vrZDBeT\\r\\na=ice-options:google-ice\\r\\na=fingerprint:sha-256 3C:7C:7F:50:12:01:52:1E:68:82:60:96:4F:E3:34:8E:93:6D:49:D7:FA:6C:C5:97:82:A9:17:F6:99:71:BB:B7\\r\\na=setup:actpass\\r\\na=mid:audio\\r\\na=extmap:1 urn:ietf:params:rtp-hdrext:ssrc-audio-level\\r\\na=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\\r\\na=recvonly\\r\\na=rtcp-mux\\r\\na=rtpmap:111 opus/48000/2\\r\\na=fmtp:111 minptime=10\\r\\na=rtpmap:103 ISAC/16000\\r\\na=rtpmap:104 ISAC/32000\\r\\na=rtpmap:0 PCMU/8000\\r\\na=rtpmap:8 PCMA/8000\\r\\na=rtpmap:106 CN/32000\\r\\na=rtpmap:105 CN/16000\\r\\na=rtpmap:13 CN/8000\\r\\na=rtpmap:126 telephone-event/8000\\r\\na=maxptime:60\\r\\nm=video 1 RTP/SAVPF 100 116 117 96\\r\\nc=IN IP4 0.0.0.0\\r\\na=rtcp:1 IN IP4 0.0.0.0\\r\\na=ice-ufrag:Hw3NWnb12md3lR6d\\r\\na=ice-pwd:otSaCLf4lCJ/thdp4vrZDBeT\\r\\na=ice-options:google-ice\\r\\na=fingerprint:sha-256 3C:7C:7F:50:12:01:52:1E:68:82:60:96:4F:E3:34:8E:93:6D:49:D7:FA:6C:C5:97:82:A9:17:F6:99:71:BB:B7\\r\\na=setup:actpass\\r\\na=mid:video\\r\\na=extmap:2 urn:ietf:params:rtp-hdrext:toffset\\r\\na=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time\\r\\na=sendrecv\\r\\na=rtcp-mux\\r\\na=rtpmap:100 VP8/90000\\r\\na=rtcp-fb:100 ccm fir\\r\\na=rtcp-fb:100 nack\\r\\na=rtcp-fb:100 nack pli\\r\\na=rtcp-fb:100 goog-remb\\r\\na=rtpmap:116 red/90000\\r\\na=rtpmap:117 ulpfec/90000\\r\\na=rtpmap:96 rtx/90000\\r\\na=fmtp:96 apt=100\\r\\na=ssrc-group:FID 2413349061 3209926379\\r\\na=ssrc:2413349061 cname:LFa7v78rabKhSORN\\r\\na=ssrc:2413349061 msid:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4 6f957125-c30c-45f8-85a6-5ac644736662\\r\\na=ssrc:2413349061 mslabel:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4\\r\\na=ssrc:2413349061 label:6f957125-c30c-45f8-85a6-5ac644736662\\r\\na=ssrc:3209926379 cname:LFa7v78rabKhSORN\\r\\na=ssrc:3209926379 msid:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4 6f957125-c30c-45f8-85a6-5ac644736662\\r\\na=ssrc:3209926379 mslabel:yuuHBnpn1dCjPmqLMDoylFMGwUNX5V7POuu4\\r\\na=ssrc:3209926379 label:6f957125-c30c-45f8-85a6-5ac644736662\\r\\n\n```\n\n## \u5fdc\u7b54: ANSWER\n\n\u30d4\u30a2\u304b\u3089\u306e```OFFER```\u306b\u5bfe\u3059\u308b\u5fdc\u7b54\u3002\n\n### \u30d1\u30e9\u30e1\u30fc\u30bf\n\n* ```type```: \"ANSWER\" \u56fa\u5b9a\n* ```src```: \u9001\u4fe1\u5143id\n* ```dst```: \u9001\u4fe1\u5148id\n* ```payload```:\n    * ```sdp```: ```pc.setLocalDescription```\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305fsdp\n    * ```type```: \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u30bf\u30a4\u30d7\u3002```media```\u307e\u305f\u306f```data```\n    * ```connectionId```: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6bce\u306eid(```pc_xxxx```)\n    * ```browser```: \u30d6\u30e9\u30a6\u30b6\u306e\u7a2e\u985e(```Firefox```\u3001```Chrome```\u3001```Supported```\u3001```Unsupported```\u306e\u3044\u305a\u308c\u304b)\n\n### \u4f8b\n\n```\n{\"type\": \"ANSWER\", \n \"src\": \"05u1k6gkhjwi2j4i\", \n \"dst\": \"haruhf6uvr9vygb9\", \n \"payload\": {\"sdp\": {\"type\": \"media\", \n                     \"connectionId\": \"pc_abc\", \n                     \"browser\": \"Chrome\", \n                     \"sdp\": \"(\u524d\u9805\u306b\u4f8b\u3092\u8a18\u8f09)\"}}\n```\n\n## \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u60c5\u5831\u306e\u4f1d\u9054: ICE CANDIDATE\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u540c\u58eb\u304cSTUN\u30b5\u30fc\u30d0\u30fc\u3068TURN\u30b5\u30fc\u30d0\u30fc\u3092\u7528\u3044\u3066\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306e\u60c5\u5831\u3092\u76f8\u4e92\u306b\u9001\u4fe1\u3059\u308b\u3002\n\u9001\u4fe1\u306f\u975e\u540c\u671f\u306b\u304a\u3053\u306a\u308f\u308c\u308b\u3002\n\n### \u30d1\u30e9\u30e1\u30fc\u30bf\n\n* ```type```: \"CANDIDATE\" \u56fa\u5b9a\n* ```src```: \u9001\u4fe1\u5143id\n* ```dst```: \u9001\u4fe1\u5148id\n* ```payload```:\n    * ```candidate```: ```onicecandidate```\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306b\u5f15\u6570\u3068\u3057\u3066\u6e21\u3055\u308c\u305f\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306ecandidate(```evt.candidate```)\n    * ```type```: \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u30bf\u30a4\u30d7\u3002```media```\u307e\u305f\u306f```data```\n    * ```connectionId```: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u751f\u6210\u3057\u305f\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u6bce\u306eid(```pc_xxxx```)\n\n### \u4f8b\n\n```\n{\"type\": \"CANDIDATE\", \n \"src\": \"05u1k6gkhjwi2j4i\", \n \"dst\": \"haruhf6uvr9vygb9\", \n \"payload\": {\"candidate\": {\"type\": \"media\", \n                           \"connectionId\": \"pc_abc\", \n                           \"candidate\": {\"sdpMLineIndex\":1,\n                                         \"sdpMid\":\"video\",\n                                         \"candidate\":\"candidate:3013953624 2 udp 2122260223 192.168.1.123 60258 typ host generation 0\"}}}\n```\n\n### candidate\u306e\u4f8b\n\n```\n{\"sdpMLineIndex\":1,\n \"sdpMid\":\"video\",\n \"candidate\":\"candidate:3013953624 2 udp 2122260223 192.168.1.123 60258 typ host generation 0\"}\n```\n\n### \u9001\u4fe1\u30b3\u30fc\u30c9\u4f8b\n\n```onicecandidate``` \u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u3001\u30a4\u30d9\u30f3\u30c8\u767a\u751f\u306e\u305f\u3073\u306b\u30d4\u30a2\u306b\u9001\u4fe1\u3059\u308b\u3002\n\n```javascript\npc.onicecandidate = function(evt) {\n  if (evt.candidate) {\n    util.log('Received ICE candidates for:', connection.peer);\n    provider.socket.send({\n      type: 'CANDIDATE',\n      dst: peerId,\n      payload: {\n        candidate: evt.candidate,\n        type: connection.type,\n        connectionId: connection.id\n      }\n    });\n  }\n};\n```\n\n\n## \u901a\u4fe1\u7d42\u4e86: LEAVE\n\n\u901a\u4fe1\u76f8\u624b\u306e\u63a5\u7d9a\u304c\u9589\u3058\u305f\u3002\u3053\u306e\u901a\u77e5\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306f\u9001\u3089\u305a\u3001\u30b5\u30fc\u30d0\u30fc\u304c\u5224\u65ad\u3057\u3066\u63a5\u7d9a\u304c\u9589\u3058\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u901a\u4fe1\u4e2d\u3060\u3063\u305f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\n### \u9001\u4fe1\u30c7\u30fc\u30bf\n\n```\n{\"type\": \"LEAVE\", \"src\": \"\u9001\u4fe1\u5143id\", \"dst\": \"\u9001\u4fe1\u5148id\"}\n```\n\n### \u4f8b\n\n```\n{\"type\": \"LEAVE\", \"src\": \"05u1k6gkhjwi2j4i\", \"dst\": \"jghpgwypfucba9k9\"}\n```\n\n----\n\n## OFFER\u306b\u5bfe\u3059\u308b\u5fdc\u7b54\u304c\u306a\u3044: EXPIRE\n\n\u30ea\u30e2\u30fc\u30c8\u306bOFFER\u3092\u9001\u3063\u305f\u304c\u5fdc\u7b54\u304c\u306a\u304b\u3063\u305f\u3002\u3053\u306e\u901a\u77e5\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306f\u9001\u3089\u305a\u3001\u30b5\u30fc\u30d0\u30fc\u304c\u5224\u65ad\u3057\u3066OFFER\u9001\u4fe1\u5143\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002\n\n### \u9001\u4fe1\u30c7\u30fc\u30bf\n\n```\n{\"type\": \"EXPIRE\", \"src\": \"\u9001\u4fe1\u5143id\", \"dst\": \"\u9001\u4fe1\u5148id\"}\n```\n\n### \u4f8b\n\n```\n{\"type\": \"EXPIRE\", \"src\": \"05u1k6gkhjwi2j4i\", \"dst\": \"jghpgwypfucba9k9\"}\n```\n\n----\n\n\n\u3053\u306e\u8fba\u307e\u3067\u3067\u306a\u3093\u3060\u304b\u3067\u304d\u305d\u3046\u306a\u6c17\u304c\u3057\u3066\u304d\u305f\u306e\u3067\u3001\u3053\u308c\u4ee5\u4e0a\u306f\u8ffd\u3063\u3066\u306a\u3044\u3002\n", "tags": ["PeerJS", "WebRTC", "iOS", "objectivec"]}