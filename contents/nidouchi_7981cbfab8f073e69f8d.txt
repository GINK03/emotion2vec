{"context": " More than 1 year has passed since last update.\u7b2c12\u56de\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u306e\u53c2\u8003\u554f\u984c\u3092Ruby\u3067\u89e3\u304d\u307e\u3057\u305f\u3002\n\u554f\u984c\u306f\u3053\u3061\u3089\u306e\u30ea\u30f3\u30af\u304b\u3089\u3002\nhttp://qiita.com/Nabetani/items/1de39df381dfeee305ab\nCHARS1=[\n  ('A'..'K').to_a,\n  ('L'..'V').to_a,\n  ('W'..'Z').to_a+('a'..'g').to_a\n]\nCHARS2=[\n  '52zwtqnkh'.split(''),\n  '630xuroli'.split(''),\n  '741yvspmj'.split('')\n]\n\ndef make_map\n  map = {}\n  [CHARS1,CHARS2].each{|chars|\n    chars.each_with_index{|row, i|\n      row.each_with_index{|c, j|\n        map[c] = []\n        if j > 0\n          nc = chars[i][j-1]\n          map[nc][0] = c\n          map[c][2] = nc\n        end\n        if i > 0\n          nc = chars[i-1][j]\n          map[nc][1] = c\n          map[c][3] = nc\n        end\n      }\n    }\n  }\n  3.times{|i|\n    c = CHARS1[2][-1-i]\n    nc = CHARS2[i][0]\n    map[c][1] = nc+'L'\n    map[nc][2] = c+'R'\n\n    c = CHARS2[i][-1]\n    nc = CHARS1[2][i]\n    map[c][0] = nc+'L'\n    map[nc][1] = c+'R'\n  }\n  map\nend\n\ndef rotate(dir,c)\n  if (c == 'L')\n    dir -= 1\n    dir = 3 if dir < 0\n  else\n    dir += 1\n    dir = 0 if dir > 3\n  end\n  dir\nend\n\ndef solve(q)\n  map = make_map\n  seq = \"A\"\n  cur = \"A\"\n  dir = 0\n  q.chars.each{|c|\n    move = c.to_i(16)\n    if move == 0\n      dir = rotate(dir,c)\n    else\n      move.times{\n        cur = map[cur][dir]\n        return seq + '?' if cur.nil?\n        if cur.size > 1\n          dir = rotate(dir, cur[1])\n          cur = cur[0]\n        end\n        seq += cur\n      }\n    end\n  }\n  seq\nend\n\nDATA.readlines.each do |line|\n  no,q,a = line.chop.split(/\\s+/)\n  ans = solve(q)\n  print no + \"\\t\" + ans\n  puts ans == a ? ' o' : ' x'\nend\n__END__\n0   2RcL3LL22   ABCNYjmpsvy147edcbcdef\n1   L3R4L5RR5R3L5   A?\n2   2ReLLe  ABCNYjmpsvy147eTITe741yvspmjYNC\n3   1ReRRe  ABMXilorux036fUJUf630xuroliXMB\n\n\u7b2c12\u56de\u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u306e\u53c2\u8003\u554f\u984c\u3092Ruby\u3067\u89e3\u304d\u307e\u3057\u305f\u3002\n\u554f\u984c\u306f\u3053\u3061\u3089\u306e\u30ea\u30f3\u30af\u304b\u3089\u3002\nhttp://qiita.com/Nabetani/items/1de39df381dfeee305ab\n\n```rb:\nCHARS1=[\n  ('A'..'K').to_a,\n  ('L'..'V').to_a,\n  ('W'..'Z').to_a+('a'..'g').to_a\n]\nCHARS2=[\n  '52zwtqnkh'.split(''),\n  '630xuroli'.split(''),\n  '741yvspmj'.split('')\n]\n\ndef make_map\n  map = {}\n  [CHARS1,CHARS2].each{|chars|\n    chars.each_with_index{|row, i|\n      row.each_with_index{|c, j|\n        map[c] = []\n        if j > 0\n          nc = chars[i][j-1]\n          map[nc][0] = c\n          map[c][2] = nc\n        end\n        if i > 0\n          nc = chars[i-1][j]\n          map[nc][1] = c\n          map[c][3] = nc\n        end\n      }\n    }\n  }\n  3.times{|i|\n    c = CHARS1[2][-1-i]\n    nc = CHARS2[i][0]\n    map[c][1] = nc+'L'\n    map[nc][2] = c+'R'\n\n    c = CHARS2[i][-1]\n    nc = CHARS1[2][i]\n    map[c][0] = nc+'L'\n    map[nc][1] = c+'R'\n  }\n  map\nend\n\ndef rotate(dir,c)\n  if (c == 'L')\n    dir -= 1\n    dir = 3 if dir < 0\n  else\n    dir += 1\n    dir = 0 if dir > 3\n  end\n  dir\nend\n\ndef solve(q)\n  map = make_map\n  seq = \"A\"\n  cur = \"A\"\n  dir = 0\n  q.chars.each{|c|\n    move = c.to_i(16)\n    if move == 0\n      dir = rotate(dir,c)\n    else\n      move.times{\n        cur = map[cur][dir]\n        return seq + '?' if cur.nil?\n        if cur.size > 1\n          dir = rotate(dir, cur[1])\n          cur = cur[0]\n        end\n        seq += cur\n      }\n    end\n  }\n  seq\nend\n\nDATA.readlines.each do |line|\n  no,q,a = line.chop.split(/\\s+/)\n  ans = solve(q)\n  print no + \"\\t\" + ans\n  puts ans == a ? ' o' : ' x'\nend\n__END__\n0\t2RcL3LL22\tABCNYjmpsvy147edcbcdef\n1\tL3R4L5RR5R3L5\tA?\n2\t2ReLLe\tABCNYjmpsvy147eTITe741yvspmjYNC\n3\t1ReRRe\tABMXilorux036fUJUf630xuroliXMB\n```", "tags": ["Ruby", "yhpg", "\u3069\u3046\u66f8\u304f"]}