{"tags": ["Linux", "USB"], "context": "\n\n\u8a8d\u8b58\u3067\u304d\u305f\u304c\u63a5\u7d9a\u3067\u304d\u305a\n\u524d\u306e\u8a18\u4e8b\u3067\u3001L-03D\u306e\u8a8d\u8b58\u306f\u3067\u304d\u305f\u3082\u306e\u306e\u3001qmicli\u306e--wds-start-network\u3067\u306fAPN\u306b\u63a5\u7d9a\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\u4f55\u3060\u304b\u304f\u3084\u3057\u3044\u3002USB\u30e2\u30c7\u30e0\u306e\u5236\u5fa1\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u3042\u308b\u3001QMI\u3092\u52c9\u5f37\u3059\u308b\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\u306b\u306a\u308a\u305d\u3046\u3002\n\nlibqmi\n\nqmicli\nqmicli --verbose\u3068\u3059\u308b\u3068\u3001QMI\u306e\u30d0\u30a4\u30c8\u5217\u306e\u610f\u5473\u3092\u3054\u4e01\u5be7\u306b\u8aac\u660e\u3057\u3066\u304f\u308c\u308b\u3002\n# qmicli --verbose -d /dev/cdc-wdm0 --get-service-version-info\n[26 Apr 2016, 22:57:24] [Debug] [/dev/cdc-wdm0] Opening device with flags 'none'...\n[26 Apr 2016, 22:57:24] [Debug] QMI Device at '/dev/cdc-wdm0' ready\n[26 Apr 2016, 22:57:24] [Debug] Getting service version info...\n[26 Apr 2016, 22:57:24] [Debug] [/dev/cdc-wdm0] Sent message...\n<<<<<< RAW:\n<<<<<<   length = 12\n<<<<<<   data   = 01:0B:00:00:00:00:00:01:21:00:00:00\n\n[26 Apr 2016, 22:57:24] [Debug] [/dev/cdc-wdm0] Sent message (translated)...\n<<<<<< QMUX:\n<<<<<<   length  = 11\n<<<<<<   flags   = 0x00\n<<<<<<   service = \"ctl\"\n<<<<<<   client  = 0\n<<<<<< QMI:\n<<<<<<   flags       = \"none\"\n<<<<<<   transaction = 1\n<<<<<<   tlv_length  = 0\n<<<<<<   message     = \"Get Version Info\" (0x0021)\n:\n\n\u3075\u30fc\u3093\u3002\u96f0\u56f2\u6c17\u306f\u308f\u304b\u3063\u305f\u30020x0021\u306fGet Version Info\u306a\u306e\u306d\u3002\n\nqmi_message_get_printable()\n\nlibqmi\u306b\u3001qmi_message_get_printable()\u3068\u3044\u3046\u4fbf\u5229\u95a2\u6570\u304c\u3042\u308b\u306e\u3092\u767a\u898b\u3002\n\nGets a printable string with the contents of the whole QMI message.\nIf known, the printable string will contain translated TLV values as well as the raw data buffer contents.\n\n\u3068\u306e\u3053\u3068\u3067\u3001\u304d\u3063\u3068\u30d0\u30a4\u30ca\u30ea\u5217\u3092\u98df\u308f\u305b\u308b\u3068qmicli --verbose\u307f\u305f\u3044\u306a\u8868\u793a\u3092\u3057\u3066\u304f\u308c\u308b\u306f\u305a\u3002\n\nUSBPcap\nUSB\u30d7\u30ed\u30a2\u30ca\u306f\u3055\u3059\u304c\u306b\u6301\u3063\u3066\u3044\u306a\u3044\u304c\u3001Windows\u3067\u52d5\u304b\u3057\u306a\u304c\u3089\u306a\u3089\u3001USBPcap\u3067\u3067\u304d\u308b\u3002\n\u6700\u8fd1\u306fWireshark\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u304b\u3089\u7c21\u5358\u306b\u5165\u308c\u3089\u308c\u308b\u306f\u305a\u3002\n\nWireshark\u3067\u30ad\u30e3\u30d7\u30c1\u30e3\u3059\u308b\nEthernet\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u3068\u540c\u3058\u3002USB\u3092\u9078\u3076\u3060\u3051\u3002\nQMI\u306f\u3001USB\u306eControl\u8ee2\u9001\u3092\u7528\u3044\u3066\u3044\u308b\u6a21\u69d8\u3002\n\u5b9f\u969b\u306bWindows\u3067L-03D\u3092\u52d5\u304b\u3057\u3066\u3001\u8868\u793a\u3092\u30d5\u30a3\u30eb\u30bf\u3057\u305f\u69d8\u5b50\u304c\u3053\u308c\u3002\n\n\u3088\u30fc\u304f\u898b\u308b\u3068\u3001\u3055\u3063\u304d\u306eqmicli --get-service-version-info\u306b\u51fa\u3066\u304f\u308b\u3001'21:00'\u3068\u3044\u3046\u306e\u304c\u5165\u3063\u3066\u3044\u308b\u3002\u305d\u306e\u5148\u304c\u3061\u3087\u3063\u3068\u9055\u3046\u3051\u3069\u3002\n\u3053\u308c\u3092Export\u3057\u3066qmi_message_get_printable()\u306b\u98df\u308f\u305b\u308c\u3070\u3001\u8272\u3005\u308f\u304b\u308b\u306e\u3067\u306f\u3002\n\nWireshark\u3067Export\u3059\u308b\n\u30d5\u30a3\u30eb\u30bf\u3057\u305f\u30d1\u30b1\u30c3\u30c8\u3060\u3051\u3092Plain Text\u3067\u3001\u304b\u3064USB\u30d8\u30c3\u30c0\u306f\u53d6\u308a\u9664\u3044\u3066\u30da\u30a4\u30ed\u30fc\u30c9\u3060\u3051\u3092Export\u3059\u308b\u3002\n\n\u7d50\u679c\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n0000  1c 00 e0 cd 84 af ff ff ff ff 00 00 00 00 08 00   ................\n0010  01 03 00 05 00 80 02 01 00 00 00 01 00            .............\n\n0000  1c 00 58 28 79 bc ff ff ff ff 00 00 00 00 08 00   ..X(y...........\n0010  01 03 00 05 00 00 02 10 00 00 00 01 01 0f 00 00   ................\n0020  00 00 00 01 21 00 04 00 01 01 00 ff               ....!.......\n:\n\n\u307b\u307b\u3046\u3002\u30d1\u30b1\u30c3\u30c8\u306e\u5207\u308c\u76ee\u3082\u3001\u308f\u304b\u308a\u3084\u3059\u3044\u3002\n\n\u9069\u5f53\u30d1\u30fc\u30b5\u30fc + qmi_message_get_printable()\n\nqmicli\u3092\u4e0b\u6577\u304d\u306b\u9069\u5f53\u306b\u4f5c\u3063\u3066\u307f\u305f\u306e\u304c\u3001\u3053\u308c\u3002\n\u4e0b\u6577\u304d\u306b\u3057\u3059\u304e\u3066\u3001libqmi\u306ebuild\u74b0\u5883\u306b\u4f9d\u5b58\u3002\nExport\u3057\u305fPlain Text\u3092\u98df\u308f\u305b\u305f\u7d50\u679c\u306f\u2026\nlen = 1\nbin = 00\n(null)---------------------------------------------------------------------------\nlen = 16\nbin = 01 0f 00 00 00 00 00 01 21 00 04 00 01 01 00 ff\nQMUX:\n  length  = 15\n  flags   = 0x00\n  service = \"ctl\"\n  client  = 0\nQMI:\n  flags       = \"none\"\n  transaction = 1\n  tlv_length  = 4\n  message     = \"Get Version Info\" (0x0021)\nTLV:\n  type   = 0x01\n  length = 1\n  value  = FF\n:\n\n\u304a\u304a! qmicli\u304c\u751f\u6210\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u6bd4\u3079\u3066\u3001TLV1\u500b\u5206\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304c\u8ffd\u52a0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306d\u3002\u307f\u305f\u3044\u306a\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n\u6b21\u56de\u306f\u3044\u3088\u3044\u3088\nL-03D\u3067AT\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u308f\u305a\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306bAttach!\n# \u8a8d\u8b58\u3067\u304d\u305f\u304c\u63a5\u7d9a\u3067\u304d\u305a\n[\u524d\u306e\u8a18\u4e8b](http://qiita.com/air-gh/items/6add3c0b19e8fe9469aa)\u3067\u3001L-03D\u306e\u8a8d\u8b58\u306f\u3067\u304d\u305f\u3082\u306e\u306e\u3001`qmicli`\u306e`--wds-start-network`\u3067\u306fAPN\u306b\u63a5\u7d9a\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\u4f55\u3060\u304b\u304f\u3084\u3057\u3044\u3002USB\u30e2\u30c7\u30e0\u306e\u5236\u5fa1\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3067\u3042\u308b\u3001QMI\u3092\u52c9\u5f37\u3059\u308b\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\u306b\u306a\u308a\u305d\u3046\u3002\n\n# libqmi\n## qmicli\n`qmicli --verbose`\u3068\u3059\u308b\u3068\u3001QMI\u306e\u30d0\u30a4\u30c8\u5217\u306e\u610f\u5473\u3092\u3054\u4e01\u5be7\u306b\u8aac\u660e\u3057\u3066\u304f\u308c\u308b\u3002\n\n```shell-session\n# qmicli --verbose -d /dev/cdc-wdm0 --get-service-version-info\n[26 Apr 2016, 22:57:24] [Debug] [/dev/cdc-wdm0] Opening device with flags 'none'...\n[26 Apr 2016, 22:57:24] [Debug] QMI Device at '/dev/cdc-wdm0' ready\n[26 Apr 2016, 22:57:24] [Debug] Getting service version info...\n[26 Apr 2016, 22:57:24] [Debug] [/dev/cdc-wdm0] Sent message...\n<<<<<< RAW:\n<<<<<<   length = 12\n<<<<<<   data   = 01:0B:00:00:00:00:00:01:21:00:00:00\n\n[26 Apr 2016, 22:57:24] [Debug] [/dev/cdc-wdm0] Sent message (translated)...\n<<<<<< QMUX:\n<<<<<<   length  = 11\n<<<<<<   flags   = 0x00\n<<<<<<   service = \"ctl\"\n<<<<<<   client  = 0\n<<<<<< QMI:\n<<<<<<   flags       = \"none\"\n<<<<<<   transaction = 1\n<<<<<<   tlv_length  = 0\n<<<<<<   message     = \"Get Version Info\" (0x0021)\n:\n```\n\n\u3075\u30fc\u3093\u3002\u96f0\u56f2\u6c17\u306f\u308f\u304b\u3063\u305f\u30020x0021\u306fGet Version Info\u306a\u306e\u306d\u3002\n\n## `qmi_message_get_printable()`\nlibqmi\u306b\u3001[`qmi_message_get_printable()`](https://www.freedesktop.org/software/libqmi/libqmi-gli![qmi1.tiff](https://qiita-image-store.s3.amazonaws.com/0/104225/4397780f-2be5-5caa-f0dd-2e6e8f36c455.tiff)\nb/latest/libqmi-glib-QmiMessage.html#qmi-message-get-printable)\u3068\u3044\u3046\u4fbf\u5229\u95a2\u6570\u304c\u3042\u308b\u306e\u3092\u767a\u898b\u3002\n\n> Gets a printable string with the contents of the whole QMI message.\n> If known, the printable string will contain translated TLV values as well as the raw data buffer contents.\n\n\u3068\u306e\u3053\u3068\u3067\u3001\u304d\u3063\u3068\u30d0\u30a4\u30ca\u30ea\u5217\u3092\u98df\u308f\u305b\u308b\u3068`qmicli --verbose`\u307f\u305f\u3044\u306a\u8868\u793a\u3092\u3057\u3066\u304f\u308c\u308b\u306f\u305a\u3002\n\n# USBPcap\nUSB\u30d7\u30ed\u30a2\u30ca\u306f\u3055\u3059\u304c\u306b\u6301\u3063\u3066\u3044\u306a\u3044\u304c\u3001Windows\u3067\u52d5\u304b\u3057\u306a\u304c\u3089\u306a\u3089\u3001[USBPcap](http://desowin.org/usbpcap/)\u3067\u3067\u304d\u308b\u3002\n\u6700\u8fd1\u306fWireshark\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u30fc\u304b\u3089\u7c21\u5358\u306b\u5165\u308c\u3089\u308c\u308b\u306f\u305a\u3002\n\n## Wireshark\u3067\u30ad\u30e3\u30d7\u30c1\u30e3\u3059\u308b\nEthernet\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u3068\u540c\u3058\u3002USB\u3092\u9078\u3076\u3060\u3051\u3002\nQMI\u306f\u3001USB\u306eControl\u8ee2\u9001\u3092\u7528\u3044\u3066\u3044\u308b\u6a21\u69d8\u3002\n\u5b9f\u969b\u306bWindows\u3067L-03D\u3092\u52d5\u304b\u3057\u3066\u3001\u8868\u793a\u3092\u30d5\u30a3\u30eb\u30bf\u3057\u305f\u69d8\u5b50\u304c\u3053\u308c\u3002\n\n<img width=\"919\" alt=\"qmi1.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/104225/4d88ab5f-2f24-82a5-6f4f-c0eb66276bb3.png\">\n\n\u3088\u30fc\u304f\u898b\u308b\u3068\u3001\u3055\u3063\u304d\u306e`qmicli --get-service-version-info`\u306b\u51fa\u3066\u304f\u308b\u3001'21:00'\u3068\u3044\u3046\u306e\u304c\u5165\u3063\u3066\u3044\u308b\u3002\u305d\u306e\u5148\u304c\u3061\u3087\u3063\u3068\u9055\u3046\u3051\u3069\u3002\n\u3053\u308c\u3092Export\u3057\u3066`qmi_message_get_printable()`\u306b\u98df\u308f\u305b\u308c\u3070\u3001\u8272\u3005\u308f\u304b\u308b\u306e\u3067\u306f\u3002\n\n## Wireshark\u3067Export\u3059\u308b\n\u30d5\u30a3\u30eb\u30bf\u3057\u305f\u30d1\u30b1\u30c3\u30c8\u3060\u3051\u3092Plain Text\u3067\u3001\u304b\u3064USB\u30d8\u30c3\u30c0\u306f\u53d6\u308a\u9664\u3044\u3066\u30da\u30a4\u30ed\u30fc\u30c9\u3060\u3051\u3092Export\u3059\u308b\u3002\n\n<img width=\"523\" alt=\"qmi2.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/104225/dd11a63d-9d6e-f3c5-a539-b39a3a71709b.png\">\n\n\u7d50\u679c\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n```\n0000  1c 00 e0 cd 84 af ff ff ff ff 00 00 00 00 08 00   ................\n0010  01 03 00 05 00 80 02 01 00 00 00 01 00            .............\n\n0000  1c 00 58 28 79 bc ff ff ff ff 00 00 00 00 08 00   ..X(y...........\n0010  01 03 00 05 00 00 02 10 00 00 00 01 01 0f 00 00   ................\n0020  00 00 00 01 21 00 04 00 01 01 00 ff               ....!.......\n:\n```\n\n\u307b\u307b\u3046\u3002\u30d1\u30b1\u30c3\u30c8\u306e\u5207\u308c\u76ee\u3082\u3001\u308f\u304b\u308a\u3084\u3059\u3044\u3002\n\n# \u9069\u5f53\u30d1\u30fc\u30b5\u30fc + `qmi_message_get_printable()`\n\nqmicli\u3092\u4e0b\u6577\u304d\u306b\u9069\u5f53\u306b\u4f5c\u3063\u3066\u307f\u305f\u306e\u304c\u3001[\u3053\u308c](https://github.com/air-gh/qmiparse)\u3002\n\u4e0b\u6577\u304d\u306b\u3057\u3059\u304e\u3066\u3001libqmi\u306ebuild\u74b0\u5883\u306b\u4f9d\u5b58\u3002\n\nExport\u3057\u305fPlain Text\u3092\u98df\u308f\u305b\u305f\u7d50\u679c\u306f\u2026\n\n```\nlen = 1\nbin = 00\n(null)---------------------------------------------------------------------------\nlen = 16\nbin = 01 0f 00 00 00 00 00 01 21 00 04 00 01 01 00 ff\nQMUX:\n  length  = 15\n  flags   = 0x00\n  service = \"ctl\"\n  client  = 0\nQMI:\n  flags       = \"none\"\n  transaction = 1\n  tlv_length  = 4\n  message     = \"Get Version Info\" (0x0021)\nTLV:\n  type   = 0x01\n  length = 1\n  value  = FF\n:\n```\n\n\u304a\u304a! qmicli\u304c\u751f\u6210\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3068\u6bd4\u3079\u3066\u3001TLV1\u500b\u5206\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u304c\u8ffd\u52a0\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306d\u3002\u307f\u305f\u3044\u306a\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n# \u6b21\u56de\u306f\u3044\u3088\u3044\u3088\nL-03D\u3067AT\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u308f\u305a\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306bAttach!\n"}