{"context": "Firebase\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u52a0\u3048\u3001\u8a8d\u8a3c\u3001\u30ce\u30fc\u30c6\u30a3\u30d5\u30a3\u30b1\u30fc\u30b7\u30e7\u30f3\u7b49\u3055\u307e\u3056\u307e\u306a\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u3001\u305d\u308c\u306b\u52a0\u3048\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u6a5f\u80fd\u3067\u9759\u7684\u30ea\u30bd\u30fc\u30b9(html, css, js, \u753b\u50cf\u306a\u3069)\u3092\u7c21\u5358\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u3001SPA routing\u6a5f\u80fd\u307e\u3067\u9762\u5012\u3092\u898b\u3066\u304f\u308c\u308b\u3002\n\u305d\u306e\u305f\u3081\u3001Angular2 SPA\u3001Progressive web app\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u6700\u9069\u306a\u3082\u306e\u306e\u4e00\u3064\u3068\u8003\u3048\u3089\u308c\u308b\u3002\n\u305d\u3053\u3067\u3001\u4eca\u56de\u306fAngular2\u3068Firebase hosting\u3067SPA\u958b\u767a\u74b0\u5883\u3092\u6574\u3048\u308b\u65b9\u6cd5\u3092\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u3067\u8aac\u660e\u3057\u3066\u3044\u304f\u3002\nDart\u7248\u3067\u8aac\u660e\u3057\u3066\u3044\u308b\u304cTypeScript\u7248\u3067\u3082\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u554f\u984c\u306a\u304f\u53c2\u8003\u306b\u3067\u304d\u308b\u3060\u308d\u3046\u3002\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3002\nhttps://github.com/ntaoo/ng2_firebase_gcp/releases/tag/v1.0\n\nAngular2\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nDart\n\u3082\u3057Dart\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u6e08\u3093\u3067\u3044\u306a\u3044\u5834\u5408\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nMacOS\u306e\u5834\u5408\u306f\u3001\nbrew tap dart-lang/dart\nbrew install dart --with-content-shell --with-dartium\nbrew linkapps dart\n\n\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3002\n\nStagehand\nStagehand\u306fyeoman\u306e\u3088\u3046\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npub global activate stagehand\n\n\nAngular2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nmkdir your_working_directory && cd your_working_directory\nstagehand web-angular\npub get\n\n\nFirebase hosting\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u306e\u3053\u3068\u3002\u4ee5\u4e0b\u306e\u8aac\u660e\u306f\u3001firebase init\u3067\u304d\u308b\u72b6\u614b\u307e\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u524d\u63d0\u3002\nhttp://qiita.com/potato4d/items/95eaf2e41404711e621e\nfirebase init\u3059\u308b\u3002\nfirebase init\n\n\u305d\u3057\u3066\u3001\u3069\u306e\u3088\u3046\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u3059\u308b\u304b\u306e\u8cea\u554f\u306b\u7b54\u3048\u3066\u3044\u304f\u3002    \n\nHosting\u3092\u9078\u629e\n? What Firebase CLI features do you want to setup for this folder? \n \u25c9 Database: Deploy Firebase Realtime Database Rules\n\u276f\u25c9 Hosting: Configure and deploy Firebase Hosting sites\n\n\n\u4f5c\u6210\u6e08\u307f\u306eFirebase Project\u3092\u9078\u629e(\u3082\u3057\u304f\u306f\u65b0\u898f\u4f5c\u6210)\n? What Firebase project do you want to associate as default? \n  [don't setup a default project] \n\u276f ng2-firebase-gcp (ng2-firebase-gcp) \n  [create a new project] \n\n\nDatabase Rules\u8a2d\u5b9a\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\n\u7279\u306b\u5909\u66f4\u306e\u5fc5\u8981\u304c\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u305d\u306e\u307e\u307eenter\u3092\u62bc\u3059\u3002\n? What file should be used for Database Rules? (database.rules.json) \n\n\nPublic directory\u306e\u8a2d\u5b9a\nPublic directory\u304c\u30c7\u30d7\u30ed\u30a4\u5bfe\u8c61\u306b\u306a\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fpublic directory\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\u4eca\u56de\u306fDart\u3092JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u306e\u3067\u3001build/web\u306b\u3057\u3066\u304a\u304f\u3002\u5f8c\u304b\u3089config\u3092\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3082\u7c21\u5358\u306b\u3067\u304d\u308b\u3002\n? What do you want to use as your public directory? (public) build/web                                          \n\n\nSPA(single-page app)\u3068\u3057\u3066\u8a2d\u5b9a\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fNO\u306a\u306e\u3067\u3001y\u3092\u5165\u529b\u3057\u3066SPA\u7528\u3068\u3057\u3066\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002\u30ea\u30e9\u30a4\u30c8\u30eb\u30fc\u30eb\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3002\u7c21\u5358\u89aa\u5207\u3067\u3042\u308b\u3002\n\u3057\u304b\u3057\u3001\u3053\u308c\u306fAngularDart\u958b\u767a\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u304b\u3089\u898b\u308b\u3068\u3042\u304f\u307e\u3067build\u3057\u3066JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5f8c\u306e\u30b3\u30fc\u30c9\u3092\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u969b\u3001\u304a\u3088\u3073\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u969b\u306e\u8a2d\u5b9a\u3002AngularDart\u3067\u306e\u958b\u767a\u6642\u306eSPA\u7528\u30ea\u30e9\u30a4\u30c8\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0\u3059\u308b\u3002\nConfigure as a single-page app (rewrite all urls to /index.html)? (y/N) y   \n\n\n\u30c7\u30d7\u30ed\u30a4\u3092\u3057\u3066\u307f\u308b\nfirebase deploy\n\n\u3067\u3001build/web\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fAngularDart\u3092JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u969b\u306b\u306f\u6d88\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308b)\nfirebase open hosting:site\n\n\u3067\u3001\u30b5\u30a4\u30c8\u306eURL\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u958b\u304f\u3002\n\n\u3068\u30d6\u30e9\u30a6\u30b6\u306b\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067https\u3067\u3042\u308b\u3002\u3082\u3061\u308d\u3093Custom Domain\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3002\n\u7c21\u5358\u3059\u304e\u308b...\u3059\u3054\u3044\u3002\n\nAngular2\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\u3053\u3053\u304b\u3089\u304c\u672c\u756a\u3002\n\u3068\u308a\u3042\u3048\u305astagehand\u3067\u751f\u6210\u3057\u305f\u307e\u307e\u306e\u72b6\u614b\u3067\u30c7\u30d7\u30ed\u30a4\u307e\u3067\u3057\u3066\u307f\u308b\u3002\n\npub serve\npub serve\n\n\u3067\u958b\u767a\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3061\u4e0a\u304c\u308b\u3002\nMacOS\u306e\u5834\u5408\u306f/Applications/Chromium.app\u3092\u8d77\u52d5\u3059\u308b\u3002\u3053\u308c\u304cDartVM\u304c\u8f09\u3063\u305fChromium\u3067\u3001Dartium\u3068\u547c\u3070\u308c\u3066\u3044\u308b\u3002\n\nChrome\u306a\u3069\u306eDartVM\u304c\u8f09\u3063\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u3067URL\u3092\u958b\u304f\u3068\u3001\u305d\u306e\u969b\u306b\u958b\u767a\u30b5\u30fc\u30d0\u30fc\u306f\u81ea\u52d5\u7684\u306bJS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304f\u308c\u308b\u3002\n\npub build\npub build\n\n\u3067JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fbuild\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u751f\u6210\u3055\u308c\u308b\u3002build/web\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u5f8c\u306bAngular2\u30a2\u30d7\u30ea\u3092\u52d5\u4f5c\u3055\u305b\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u5168\u3066\u3042\u308b\u3002\u4eca\u56de\u306f\u65e2\u306bFirebase\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6642\u306b\u30c7\u30d7\u30ed\u30a4\u5bfe\u8c61\u3092build/web\u306b\u3057\u3066\u3044\u308b\u3002\n\nfirebase deploy\nfirebase deploy \nfirebase open hosting:site\n\n\u3067\u7121\u4e8b\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3066Angular2Dart\u306eJS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30b3\u30fc\u30c9\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\nSPA\u7528\u306e\u8a2d\u5b9a\n\nLocal Reverse Proxy Server\n\u524d\u8ff0\u306e\u3068\u304a\u308a\u3001firebase\u3068\u306f\u5225\u306b\u958b\u767a\u6642\u306eSPA\u7528URL Rewrite\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u3055\u3082\u306a\u3044\u3068/index.html\u4ee5\u5916\u306eURL\u3067\u30da\u30fc\u30b8\u3092Refresh\u3059\u308b\u3068404\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u958b\u767a\u52b9\u7387\u304c\u975e\u5e38\u306b\u60aa\u3044\u3002\u305d\u306e\u305f\u3081\u5225\u9014Reverse Proxy Server\u3092\u7acb\u3066\u3066SPA\u7528\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nNginx\u3001Apache\u7b49\u3001\u3069\u306e\u3088\u3046\u306aserver\u3092\u4f7f\u3063\u3066\u3082\u826f\u3044\u3002\u81ea\u5206\u306fNginx\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u8a2d\u5b9a\u3092\u8f09\u305b\u3066\u304a\u304f\u3002\n\nnginx.conf\n# nginx.conf on reverse proxy for local SPA dev.\n# Nginx installed by macOS Homebrew.\n# Please rewrite paths and ports for your dev env.\n\n# Start: nginx -c $PWD/nginx.conf\n# Stop: nginx -s stop\n\nevents {}\n\nhttp {\n    include       /usr/local/etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    access_log  /usr/local/var/log/nginx/access.log;\n    error_log  /usr/local/var/log/nginx/error.log;\n\n    # SPA dev server. On Dart web dev, it is usually pub dev server.\n    upstream spa {\n        server localhost:9910;\n    }\n\n    server {\n        listen       9900;\n        server_name  localhost;\n\n        # Any files with extension.\n        location ~ .+\\.[^.]+$ {\n            proxy_pass http://spa;\n        }\n        # Fall back to a entry point for bootstrapping SPA with pushState mode (a.k.a html5 mode called in Angular1).\n        location / {\n            proxy_pass http://spa;\n            try_files $uri /index.html;\n        }\n    }\n}\n\n\nnginx.conf\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u305d\u308c\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066nginx\u3092\u8d77\u52d5\u3059\u308b\u3002\nnginx -c $PWD/nginx.conf\n\n\nAngular2\u5074\u306e\u8a2d\u5b9a\n<base href=\"/\">\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nweb/index.html\n  <head>\n    <meta charset=\"utf-8\">\n    <title>client</title>\n    <base href=\"/\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0\">\n\n    <script defer src=\"main.dart\" type=\"application/dart\"></script>\n    <script defer src=\"packages/browser/dart.js\"></script>\n  </head>\n\n\n\u307e\u305f\u3001SPA\u3068\u306f\u95a2\u4fc2\u304c\u306a\u3044\u304c\u3001stagehand\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u542b\u307e\u308c\u3066\u3044\u306a\u3044charset\u3068meta tag\u3092\u3053\u3053\u3067\u3064\u3044\u3067\u306b\u8ffd\u52a0\u3057\u3066\u304a\u3044\u305f\u3002\n\u307e\u305f\u3001app_component\u306b\u52d5\u4f5c\u78ba\u8a8d\u7528\u306erouting\u8a2d\u5b9a\u3068routing\u5bfe\u8c61components\u3092\u8ffd\u52a0\u3057\u305f\u3002\u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u306fGitHub\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\nSPA pushState routing\u306e\u52d5\u4f5c\u78ba\u8a8d\n\u524d\u8ff0\u306enginx.conf\u3067\u306f\u3001reverse proxy server\u3092localhost:9900\u306b\u3001Angular2\u306e spa dev server\u3092localhost:9910\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\npub serve --port=9910       \n\n\u3067pub dev server\u3092\u8d77\u52d5\u3057\u3001Dartium\u3067 http://localhost:9900/some \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u304cpub dev server\u306bforward\u3055\u308c\u3001pushState routing\u304c\u6a5f\u80fd\u3057\u3001/some\u3067reload\u3057\u3066\u3082\u6b63\u5e38\u306b\u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u305f\u3002\n\npub\u306bSPA\u7528\u306eoption\u304c\u8ffd\u52a0\u3055\u308c\u308b\u304b\u3082\n\u3053\u306e\u8fba\u308a\u306e\u63a8\u5968\u306e\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u306f\u305d\u306e\u3046\u3061angular.io\u306b\u8a18\u8f09\u3055\u308c\u308b\u306f\u305a\u3002pub\u306bSPA\u7528\u306eoption\u304c\u8ffd\u52a0\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u305a\u3001\u305d\u306e\u5834\u5408\u306f\u5358\u7d14\u306a\u7528\u9014\u3067\u306freverse proxy server\u3092\u5225\u9014\u6e96\u5099\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\u30c7\u30d7\u30ed\u30a4\nFirebase hosting\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3001Chrome\u306a\u3069\u306e\u30d6\u30e9\u30a6\u30b6\u3067Firebase\u306eSPA\u8a2d\u5b9a\u304c\u6a5f\u80fd\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\npub build\nfirebase deploy\nfirebase open hosting:site\n\n\n\u7c21\u5358\u4fbf\u5229\u3002\n\n\u3053\u3053\u307e\u3067\u306e\u30b3\u30fc\u30c9\nhttps://github.com/ntaoo/ng2_firebase_gcp/releases/tag/v1.0\n\n\u7d9a\u7de8\n\nAngularDart\u3068Firebase Authentication\n(http://qiita.com/ntaoo/items/5ac40ce8cecf9402169c)\n\n\n\u305d\u306e\u3046\u3061\u66f8\u304f\u304b\u3082\u3057\u308c\u306a\u3044\u3053\u3068\n\nFirebase database\u306e\u4f7f\u7528\nGCP backend servers\u3068\u306e\u9023\u643a\nOffline web application(Progressive web app)\u5316\nClient\u3068Server\u3067\u306e\u30b3\u30fc\u30c9\u5171\u6709\n\n\nFirebase\u306f\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u52a0\u3048\u3001\u8a8d\u8a3c\u3001\u30ce\u30fc\u30c6\u30a3\u30d5\u30a3\u30b1\u30fc\u30b7\u30e7\u30f3\u7b49\u3055\u307e\u3056\u307e\u306a\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u3066\u304a\u308a\u3001\u305d\u308c\u306b\u52a0\u3048\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u6a5f\u80fd\u3067\u9759\u7684\u30ea\u30bd\u30fc\u30b9(html, css, js, \u753b\u50cf\u306a\u3069)\u3092\u7c21\u5358\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u3001SPA routing\u6a5f\u80fd\u307e\u3067\u9762\u5012\u3092\u898b\u3066\u304f\u308c\u308b\u3002\n\u305d\u306e\u305f\u3081\u3001Angular2 SPA\u3001Progressive web app\u306e\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u6700\u9069\u306a\u3082\u306e\u306e\u4e00\u3064\u3068\u8003\u3048\u3089\u308c\u308b\u3002\n\n\u305d\u3053\u3067\u3001\u4eca\u56de\u306fAngular2\u3068Firebase hosting\u3067SPA\u958b\u767a\u74b0\u5883\u3092\u6574\u3048\u308b\u65b9\u6cd5\u3092\u30b9\u30c6\u30c3\u30d7\u30d0\u30a4\u30b9\u30c6\u30c3\u30d7\u3067\u8aac\u660e\u3057\u3066\u3044\u304f\u3002\nDart\u7248\u3067\u8aac\u660e\u3057\u3066\u3044\u308b\u304cTypeScript\u7248\u3067\u3082\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u554f\u984c\u306a\u304f\u53c2\u8003\u306b\u3067\u304d\u308b\u3060\u308d\u3046\u3002\n\n\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3002\nhttps://github.com/ntaoo/ng2_firebase_gcp/releases/tag/v1.0\n\n# Angular2\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n## Dart\n\n\u3082\u3057Dart\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u6e08\u3093\u3067\u3044\u306a\u3044\u5834\u5408\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nMacOS\u306e\u5834\u5408\u306f\u3001\n\n\tbrew tap dart-lang/dart\n\tbrew install dart --with-content-shell --with-dartium\n\tbrew linkapps dart\n\n\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3002\n\n## Stagehand\n\nStagehand\u306fyeoman\u306e\u3088\u3046\u306a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc\u3002\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\tpub global activate stagehand\n\t\n\n### Angular2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\t\t\n\n\tmkdir your_working_directory && cd your_working_directory\n\tstagehand web-angular\n\tpub get\n\n# Firebase hosting\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u306e\u3053\u3068\u3002\u4ee5\u4e0b\u306e\u8aac\u660e\u306f\u3001`firebase init`\u3067\u304d\u308b\u72b6\u614b\u307e\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u524d\u63d0\u3002\nhttp://qiita.com/potato4d/items/95eaf2e41404711e621e\n\n`firebase init\t`\u3059\u308b\u3002\n\n\n\tfirebase init\n\t\t\n\n\u305d\u3057\u3066\u3001\u3069\u306e\u3088\u3046\u306a\u30b3\u30f3\u30d5\u30a3\u30b0\u306b\u3059\u308b\u304b\u306e\u8cea\u554f\u306b\u7b54\u3048\u3066\u3044\u304f\u3002\t\n\n#### Hosting\u3092\u9078\u629e\n\n\t? What Firebase CLI features do you want to setup for this folder? \n\t \u25c9 Database: Deploy Firebase Realtime Database Rules\n\t\u276f\u25c9 Hosting: Configure and deploy Firebase Hosting sites\n\n\n### \u4f5c\u6210\u6e08\u307f\u306eFirebase Project\u3092\u9078\u629e(\u3082\u3057\u304f\u306f\u65b0\u898f\u4f5c\u6210)\n\n\t? What Firebase project do you want to associate as default? \n\t  [don't setup a default project] \n\t\u276f ng2-firebase-gcp (ng2-firebase-gcp) \n\t  [create a new project] \n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n### Database Rules\u8a2d\u5b9a\u7528\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\n\n\u7279\u306b\u5909\u66f4\u306e\u5fc5\u8981\u304c\u306a\u3044\u306e\u3067\u3001\u3053\u3053\u3067\u306f\u305d\u306e\u307e\u307eenter\u3092\u62bc\u3059\u3002\n\n\t? What file should be used for Database Rules? (database.rules.json) \n\t\t\t\t\t\t\n\t\t\t\t\t\t\n### Public directory\u306e\u8a2d\u5b9a \t\t\t\t\t\t\nPublic directory\u304c\u30c7\u30d7\u30ed\u30a4\u5bfe\u8c61\u306b\u306a\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f`public` directory\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\u4eca\u56de\u306fDart\u3092JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u306e\u3067\u3001`build/web`\u306b\u3057\u3066\u304a\u304f\u3002\u5f8c\u304b\u3089config\u3092\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3082\u7c21\u5358\u306b\u3067\u304d\u308b\u3002\n\n\t? What do you want to use as your public directory? (public) build/web\t\t\t\t\t\t\t\t\t\t\t\n\t\n### SPA(single-page app)\u3068\u3057\u3066\u8a2d\u5b9a\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fNO\u306a\u306e\u3067\u3001y\u3092\u5165\u529b\u3057\u3066SPA\u7528\u3068\u3057\u3066\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002\u30ea\u30e9\u30a4\u30c8\u30eb\u30fc\u30eb\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3002\u7c21\u5358\u89aa\u5207\u3067\u3042\u308b\u3002\n\u3057\u304b\u3057\u3001\u3053\u308c\u306fAngularDart\u958b\u767a\u306e\u30ef\u30fc\u30af\u30d5\u30ed\u30fc\u304b\u3089\u898b\u308b\u3068\u3042\u304f\u307e\u3067build\u3057\u3066JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5f8c\u306e\u30b3\u30fc\u30c9\u3092\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\u969b\u3001\u304a\u3088\u3073\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u969b\u306e\u8a2d\u5b9a\u3002AngularDart\u3067\u306e\u958b\u767a\u6642\u306eSPA\u7528\u30ea\u30e9\u30a4\u30c8\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u5f8c\u8ff0\u3059\u308b\u3002\n\n\tConfigure as a single-page app (rewrite all urls to /index.html)? (y/N) y\t\n\n### \u30c7\u30d7\u30ed\u30a4\u3092\u3057\u3066\u307f\u308b\n\t\n\tfirebase deploy\n\t\n\u3067\u3001`build/web`\u304c\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u3002(\u3053\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306fAngularDart\u3092JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u969b\u306b\u306f\u6d88\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u308b)\n\t\n\tfirebase open hosting:site\n\t\n\u3067\u3001\u30b5\u30a4\u30c8\u306eURL\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u958b\u304f\u3002\n\n![Screen Shot 2016-08-16 at 1.04.33 PM.png](https://qiita-image-store.s3.amazonaws.com/0/8065/fcc57f5f-3b75-a978-2c1c-151ea215f5d7.png \"Screen Shot 2016-08-16 at 1.04.33 PM.png\")\n\n\u3068\u30d6\u30e9\u30a6\u30b6\u306b\u8868\u793a\u3055\u308c\u305f\u3089\u6210\u529f\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067https\u3067\u3042\u308b\u3002\u3082\u3061\u308d\u3093[Custom Domain\u3092\u8a2d\u5b9a\u3059\u308b](https://firebase.google.com/docs/hosting/custom-domain)\u3053\u3068\u3082\u53ef\u80fd\u3002\n\n**\u7c21\u5358\u3059\u304e\u308b...\u3059\u3054\u3044\u3002**\n\n# Angular2\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\n\u3053\u3053\u304b\u3089\u304c\u672c\u756a\u3002\n\u3068\u308a\u3042\u3048\u305astagehand\u3067\u751f\u6210\u3057\u305f\u307e\u307e\u306e\u72b6\u614b\u3067\u30c7\u30d7\u30ed\u30a4\u307e\u3067\u3057\u3066\u307f\u308b\u3002\n\n## pub serve\n\n\tpub serve\n\t\n\u3067\u958b\u767a\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3061\u4e0a\u304c\u308b\u3002\nMacOS\u306e\u5834\u5408\u306f`/Applications/Chromium.app`\u3092\u8d77\u52d5\u3059\u308b\u3002\u3053\u308c\u304cDartVM\u304c\u8f09\u3063\u305fChromium\u3067\u3001Dartium\u3068\u547c\u3070\u308c\u3066\u3044\u308b\u3002\n\n![Screen Shot 2016-08-16 at 1.21.48 PM.png](https://qiita-image-store.s3.amazonaws.com/0/8065/4f9c856b-ce38-3aec-6018-690598f30597.png \"Screen Shot 2016-08-16 at 1.21.48 PM.png\")\n\nChrome\u306a\u3069\u306eDartVM\u304c\u8f09\u3063\u3066\u3044\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u3067URL\u3092\u958b\u304f\u3068\u3001\u305d\u306e\u969b\u306b\u958b\u767a\u30b5\u30fc\u30d0\u30fc\u306f\u81ea\u52d5\u7684\u306bJS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304f\u308c\u308b\u3002\n\n## pub build\n\t\n\tpub build\n\t\n\u3067JS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u308b\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f`build`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u751f\u6210\u3055\u308c\u308b\u3002`build/web`\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u5f8c\u306bAngular2\u30a2\u30d7\u30ea\u3092\u52d5\u4f5c\u3055\u305b\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u5168\u3066\u3042\u308b\u3002\u4eca\u56de\u306f\u65e2\u306bFirebase\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u6642\u306b\u30c7\u30d7\u30ed\u30a4\u5bfe\u8c61\u3092`build/web`\u306b\u3057\u3066\u3044\u308b\u3002\n\n## firebase deploy\n\n\tfirebase deploy\t\n\tfirebase open hosting:site\n\t\n\u3067\u7121\u4e8b\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u3066Angular2Dart\u306eJS\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30b3\u30fc\u30c9\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n![Screen Shot 2016-08-16 at 1.31.18 PM.png](https://qiita-image-store.s3.amazonaws.com/0/8065/c27990bd-1807-575b-8408-fd93b50dee6a.png \"Screen Shot 2016-08-16 at 1.31.18 PM.png\")\n\n\t\n# SPA\u7528\u306e\u8a2d\u5b9a\n\n## Local Reverse Proxy Server\n\n\u524d\u8ff0\u306e\u3068\u304a\u308a\u3001firebase\u3068\u306f\u5225\u306b\u958b\u767a\u6642\u306eSPA\u7528URL Rewrite\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u3055\u3082\u306a\u3044\u3068/index.html\u4ee5\u5916\u306eURL\u3067\u30da\u30fc\u30b8\u3092Refresh\u3059\u308b\u3068404\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u958b\u767a\u52b9\u7387\u304c\u975e\u5e38\u306b\u60aa\u3044\u3002\u305d\u306e\u305f\u3081\u5225\u9014Reverse Proxy Server\u3092\u7acb\u3066\u3066SPA\u7528\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nNginx\u3001Apache\u7b49\u3001\u3069\u306e\u3088\u3046\u306aserver\u3092\u4f7f\u3063\u3066\u3082\u826f\u3044\u3002\u81ea\u5206\u306fNginx\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u8a2d\u5b9a\u3092\u8f09\u305b\u3066\u304a\u304f\u3002\n\n```nginx.conf\n# nginx.conf on reverse proxy for local SPA dev.\n# Nginx installed by macOS Homebrew.\n# Please rewrite paths and ports for your dev env.\n\n# Start: nginx -c $PWD/nginx.conf\n# Stop: nginx -s stop\n\nevents {}\n\nhttp {\n    include       /usr/local/etc/nginx/mime.types;\n    default_type  application/octet-stream;\n\n    access_log  /usr/local/var/log/nginx/access.log;\n    error_log  /usr/local/var/log/nginx/error.log;\n\n    # SPA dev server. On Dart web dev, it is usually pub dev server.\n    upstream spa {\n        server localhost:9910;\n    }\n\n    server {\n        listen       9900;\n        server_name  localhost;\n\n        # Any files with extension.\n        location ~ .+\\.[^.]+$ {\n            proxy_pass http://spa;\n        }\n        # Fall back to a entry point for bootstrapping SPA with pushState mode (a.k.a html5 mode called in Angular1).\n        location / {\n            proxy_pass http://spa;\n            try_files $uri /index.html;\n        }\n    }\n}\n```\n\nnginx.conf\u3092\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u305d\u308c\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066nginx\u3092\u8d77\u52d5\u3059\u308b\u3002\n\n\tnginx -c $PWD/nginx.conf\n\n## Angular2\u5074\u306e\u8a2d\u5b9a\n\n`<base href=\"/\">`\u3092\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```html:web/index.html\n  <head>\n    <meta charset=\"utf-8\">\n    <title>client</title>\n    <base href=\"/\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0\">\n\n    <script defer src=\"main.dart\" type=\"application/dart\"></script>\n    <script defer src=\"packages/browser/dart.js\"></script>\n  </head>\n```\n\n\u307e\u305f\u3001SPA\u3068\u306f\u95a2\u4fc2\u304c\u306a\u3044\u304c\u3001stagehand\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u542b\u307e\u308c\u3066\u3044\u306a\u3044charset\u3068meta tag\u3092\u3053\u3053\u3067\u3064\u3044\u3067\u306b\u8ffd\u52a0\u3057\u3066\u304a\u3044\u305f\u3002\n\n\u307e\u305f\u3001app_component\u306b\u52d5\u4f5c\u78ba\u8a8d\u7528\u306erouting\u8a2d\u5b9a\u3068routing\u5bfe\u8c61components\u3092\u8ffd\u52a0\u3057\u305f\u3002\u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u306f[GitHub](https://github.com/ntaoo/ng2_firebase_gcp/releases/tag/v1.0)\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n## SPA pushState routing\u306e\u52d5\u4f5c\u78ba\u8a8d\n\n\u524d\u8ff0\u306enginx.conf\u3067\u306f\u3001reverse proxy server\u3092localhost:9900\u306b\u3001Angular2\u306e spa dev server\u3092localhost:9910\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n\tpub serve --port=9910\t\t\n\n\u3067pub dev server\u3092\u8d77\u52d5\u3057\u3001Dartium\u3067 http://localhost:9900/some \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n![Screen Shot 2016-08-17 at 4.20.11 AM.png](https://qiita-image-store.s3.amazonaws.com/0/8065/be5683aa-328a-746e-4999-a55414f4c384.png \"Screen Shot 2016-08-17 at 4.20.11 AM.png\")\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u304cpub dev server\u306bforward\u3055\u308c\u3001pushState routing\u304c\u6a5f\u80fd\u3057\u3001/some\u3067reload\u3057\u3066\u3082\u6b63\u5e38\u306b\u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u305f\u3002\n\n\n#### pub\u306bSPA\u7528\u306eoption\u304c\u8ffd\u52a0\u3055\u308c\u308b\u304b\u3082\n\t\n\u3053\u306e\u8fba\u308a\u306e\u63a8\u5968\u306e\u30bb\u30c3\u30c6\u30a3\u30f3\u30b0\u306f\u305d\u306e\u3046\u3061angular.io\u306b\u8a18\u8f09\u3055\u308c\u308b\u306f\u305a\u3002pub\u306bSPA\u7528\u306eoption\u304c\u8ffd\u52a0\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u305a\u3001\u305d\u306e\u5834\u5408\u306f\u5358\u7d14\u306a\u7528\u9014\u3067\u306freverse proxy server\u3092\u5225\u9014\u6e96\u5099\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\n# \u30c7\u30d7\u30ed\u30a4\n\nFirebase hosting\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u3001Chrome\u306a\u3069\u306e\u30d6\u30e9\u30a6\u30b6\u3067Firebase\u306eSPA\u8a2d\u5b9a\u304c\u6a5f\u80fd\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\tpub build\n\tfirebase deploy\n\tfirebase open hosting:site\n\t\n![Screen Shot 2016-08-17 at 4.46.11 AM.png](https://qiita-image-store.s3.amazonaws.com/0/8065/71cc5a78-799e-be50-ec5a-779e83866707.png \"Screen Shot 2016-08-17 at 4.46.11 AM.png\")\n\n\n\u7c21\u5358\u4fbf\u5229\u3002\n\n\n# \u3053\u3053\u307e\u3067\u306e\u30b3\u30fc\u30c9\n\nhttps://github.com/ntaoo/ng2_firebase_gcp/releases/tag/v1.0\n\n# \u7d9a\u7de8\n- AngularDart\u3068Firebase Authentication\n(http://qiita.com/ntaoo/items/5ac40ce8cecf9402169c)\n\n# \u305d\u306e\u3046\u3061\u66f8\u304f\u304b\u3082\u3057\u308c\u306a\u3044\u3053\u3068\n- Firebase database\u306e\u4f7f\u7528\n- GCP backend servers\u3068\u306e\u9023\u643a\n- Offline web application(Progressive web app)\u5316\n- Client\u3068Server\u3067\u306e\u30b3\u30fc\u30c9\u5171\u6709\n", "tags": ["Dart", "Firebase", "Angular2", "SPA"]}