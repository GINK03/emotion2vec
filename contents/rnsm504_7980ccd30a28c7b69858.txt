{"context": " More than 1 year has passed since last update.\n\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u6570\u79d2\u9593\u3092\u70b9\u6ec5\u3055\u305b\u3066\u3001\u7121\u6575\u6642\u9593\u306b\u3059\u308b\n\u305d\u306e\u70ba\u306b\u307e\u305a\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30ad\u30e3\u30e9\u306e\u30af\u30e9\u30b9\u3092\u4f5c\u6210\nimport Foundation\nimport SpriteKit\n\nclass BaseUnit: SKSpriteNode {\n    var hitPoint : Int = 0\n    var attackPoint : Int = 0\n}\n\n\u6b21\u306b\u30d7\u30ec\u30a4\u30e4\u30fc\u304c\u64cd\u4f5c\u3059\u308b\u30c9\u30e9\u30b4\u30f3\u306e\u30af\u30e9\u30b9\u3092\u30d9\u30fc\u30b9\u3092\u5143\u306b\u4f5c\u6210\u3002\u3053\u3053\u3067status\u3068\u3044\u3046\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8a2d\u5b9a\u3002\nimport Foundation\nimport UIKit\nimport SpriteKit\n\nclass DragonUnit: BaseUnit {\n    var status : String = \"\"\n\n    override init() {\n\n        let texture = SKTexture(imageNamed: \"charImage1.png\")\n\n        super.init(texture: texture, color: nil, size: texture.size())\n\n        hitPoint = 40\n    }\n\n    required override init(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n}\n\n\u3082\u3046\u3072\u3068\u3064\u6575\u306e\u30af\u30e9\u30b9\u3082\u4f5c\u6210\nimport Foundation\nimport UIKit\nimport SpriteKit\n\nclass EnemyUnit: BaseUnit {\n    override init() {\n\n        let random : Int = Int(arc4random() % 4)\n        var color : UIColor!\n\n        switch random {\n        case 0 :\n            color = UIColor.redColor()\n        case 1 :\n            color = UIColor.yellowColor()\n        case 2 :\n            color = UIColor.greenColor()\n        case 3 :\n            color = UIColor.brownColor()\n        default :\n            color = UIColor.blueColor()\n        }\n\n        super.init(texture: nil, color: color, size: CGSizeMake(50, 50))\n\n        hitPoint = 0\n        attackPoint = 10\n\n    }\n\n    required override init(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n\n\n}\n\nGameScene\u30af\u30e9\u30b9\u3067\u30c9\u30e9\u30b4\u30f3\u3092\u547c\u3073\u51fa\u3059\u7b87\u6240\u3092\u4fee\u6b63\n  override func didMoveToView(view: SKView) {\n          //\u30ad\u30e3\u30e9\u753b\u50cf\n//        let dragonImage = UIImage(named: \"charImage1.png\")\n//        let texture = SKTexture(image: dragonImage!)\n//        let dragon = SKSpriteNode(texture: texture)\n\n        let dragon = DragonUnit()\n\n\n\u885d\u7a81\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u3067\u6575\u3068\u30c9\u30e9\u30b4\u30f3\u304c\u3076\u3064\u304b\u3063\u305f\u6642\u3092\u4fee\u6b63\n    //\u885d\u7a81\u6642\u306e\u30a4\u30d9\u30f3\u30c8\n    func didBeginContact(contact: SKPhysicsContact) {\n\n           // \u30ad\u30e3\u30e9\u3068\u6575\u304c\u885d\u7a81\u3057\u305f\u5834\u5408\n        if((CollisionMember.Dragon.toInt() == contact.bodyA.categoryBitMask ||\n            CollisionMember.Dragon.toInt() == contact.bodyB.categoryBitMask ) &&\n            (CollisionMember.Enemy.toInt() == contact.bodyA.categoryBitMask ||\n                CollisionMember.Enemy.toInt() == contact.bodyB.categoryBitMask)){\n\n                    // \u30c0\u30e1\u30fc\u30b8\u3092\u70b9\u6ec5\u3067\u8868\u73fe\n                    let dragon: DragonUnit = childNodeWithName(\"dragon\") as DragonUnit\n\n                    if (dragon.status != \"damaged\"){\n                        dragon.status = \"damaged\"\n\n                        let enemy: EnemyUnit = childNodeWithName(\"Enemy\") as EnemyUnit\n                        dragon.hitPoint -= enemy.attackPoint\n\n                        // \u70b9\u6570\u3092\u6e1b\u7b97\n\n//                        let myPointLabel: SKLabelNode = childNodeWithName(\"pointLabel\") as SKLabelNode\n//                        myPointLabel.text = String(myPoint)\n//                       \n                        if(dragon.hitPoint > 0){\n                            myLabel.text = \"Ouch!\"\n\n                        // \u30c9\u30e9\u30b4\u30f3\u306e\u70b9\u6ec5\n                            let blank = SKAction.sequence([SKAction.fadeOutWithDuration(0.2),\n                                SKAction.fadeInWithDuration(0.2)])\n                            let repeat = SKAction.repeatAction(blank, count: 10)\n                            dragon.runAction(repeat, completion:{\n                                dragon.status = \"\"\n                                self.myLabel.text = \"Hello World\"\n\n                            })\n                        } else {\n                            myLabel.text = \"Game Over!Good bye\"\n\n                        }\n                    }\n\n\n                    // \u6575\u306e\u65b9\u3092\u6d88\u3059\n                    if(contact.bodyA.categoryBitMask == CollisionMember.Enemy.toInt()){\n                        contact.bodyA.node?.removeFromParent()\n                    } else {\n                        contact.bodyB.node?.removeFromParent()\n                    }\n        }        \n\n\n\u3076\u3064\u304b\u3063\u305f\u6642\u306bstatus\u306bdamaged\u3092\u30bb\u30c3\u30c8\u3002\u70b9\u6ec5\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u7d42\u4e86\u6642\u306bstatus\u306b\u30d6\u30e9\u30f3\u30af\u3092\u30bb\u30c3\u30c8\u3059\u308b\u307e\u3067\u30c0\u30e1\u30fc\u30b8\u3092\u8ca0\u308f\u306a\u3044\u3002\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u3089\u6575\u306e\u653b\u6483\u529b\u3067\uff28\uff30\u3092\u6e1b\u3089\u3059\u3002\uff10\u4ee5\u4e0b\u306b\u306a\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u306b\u306a\u308b\u3051\u3069\u3001\u4eca\u306e\u3068\u3053\u308d\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30a4\u30d9\u30f3\u30c8\u306f\u306a\u3057\u3002\n\u6b21\u306f\u30b9\u30bf\u30fc\u30c8\u753b\u9762\u3068\u7d42\u4e86\u753b\u9762\u3092\u8868\u793a\u3059\u308b\u3068\u3053\u308d\u306b\u6311\u6226\u3002\n\u306a\u304a\u3001\u4eca\u56de\u306f\u4ed6\u306b\u3082\u30c9\u30e9\u30b4\u30f3\u306e\u79fb\u52d5\u65b9\u6cd5\u306e\u5909\u66f4\u3084\u706b\u708e\u3092\u5410\u304f\u306e\u3092\u81ea\u52d5\u306b\u5909\u66f4\u3001\u6575\u30ad\u30e3\u30e9\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u51fa\u73fe\u3055\u305b\u308b\u3068\u3044\u3063\u305f\u4e8b\u4ee5\u5916\u306b\u3082\u6575\u3092\u6483\u7834\u3057\u305f\u3089\u70b9\u6570\u3092\u51fa\u3059\u3068\u3044\u3063\u305f\u4e8b\u3092\u3057\u3066\u3044\u308b\u304c\u305d\u3053\u306f\u5272\u611b\u3002\n\n\n![iphonePlay_20150402.gif](https://qiita-image-store.s3.amazonaws.com/0/40693/0145e381-c000-95be-3ca5-fe4eacaa4d7b.gif \"iphonePlay_20150402.gif\")\n\n\n\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u6570\u79d2\u9593\u3092\u70b9\u6ec5\u3055\u305b\u3066\u3001\u7121\u6575\u6642\u9593\u306b\u3059\u308b\n\u305d\u306e\u70ba\u306b\u307e\u305a\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30ad\u30e3\u30e9\u306e\u30af\u30e9\u30b9\u3092\u4f5c\u6210\n\n```\nimport Foundation\nimport SpriteKit\n\nclass BaseUnit: SKSpriteNode {\n    var hitPoint : Int = 0\n    var attackPoint : Int = 0\n}\n```\n\n\u6b21\u306b\u30d7\u30ec\u30a4\u30e4\u30fc\u304c\u64cd\u4f5c\u3059\u308b\u30c9\u30e9\u30b4\u30f3\u306e\u30af\u30e9\u30b9\u3092\u30d9\u30fc\u30b9\u3092\u5143\u306b\u4f5c\u6210\u3002\u3053\u3053\u3067status\u3068\u3044\u3046\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u8a2d\u5b9a\u3002\n\n```\nimport Foundation\nimport UIKit\nimport SpriteKit\n\nclass DragonUnit: BaseUnit {\n    var status : String = \"\"\n    \n    override init() {\n        \n        let texture = SKTexture(imageNamed: \"charImage1.png\")\n        \n        super.init(texture: texture, color: nil, size: texture.size())\n        \n        hitPoint = 40\n    }\n    \n    required override init(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n}\n```\n\n\u3082\u3046\u3072\u3068\u3064\u6575\u306e\u30af\u30e9\u30b9\u3082\u4f5c\u6210\n\n```\nimport Foundation\nimport UIKit\nimport SpriteKit\n\nclass EnemyUnit: BaseUnit {\n    override init() {\n        \n        let random : Int = Int(arc4random() % 4)\n        var color : UIColor!\n        \n        switch random {\n        case 0 :\n            color = UIColor.redColor()\n        case 1 :\n            color = UIColor.yellowColor()\n        case 2 :\n            color = UIColor.greenColor()\n        case 3 :\n            color = UIColor.brownColor()\n        default :\n            color = UIColor.blueColor()\n        }\n        \n        super.init(texture: nil, color: color, size: CGSizeMake(50, 50))\n\n        hitPoint = 0\n        attackPoint = 10\n\n    }\n    \n    required override init(coder aDecoder: NSCoder) {\n        fatalError(\"init(coder:) has not been implemented\")\n    }\n    \n\n}\n```\n\nGameScene\u30af\u30e9\u30b9\u3067\u30c9\u30e9\u30b4\u30f3\u3092\u547c\u3073\u51fa\u3059\u7b87\u6240\u3092\u4fee\u6b63\n\n```\n  override func didMoveToView(view: SKView) {\n          //\u30ad\u30e3\u30e9\u753b\u50cf\n//        let dragonImage = UIImage(named: \"charImage1.png\")\n//        let texture = SKTexture(image: dragonImage!)\n//        let dragon = SKSpriteNode(texture: texture)\n\n        let dragon = DragonUnit()\n\n```\n\n\u885d\u7a81\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u3067\u6575\u3068\u30c9\u30e9\u30b4\u30f3\u304c\u3076\u3064\u304b\u3063\u305f\u6642\u3092\u4fee\u6b63\n\n```\n    //\u885d\u7a81\u6642\u306e\u30a4\u30d9\u30f3\u30c8\n    func didBeginContact(contact: SKPhysicsContact) {\n    \n           // \u30ad\u30e3\u30e9\u3068\u6575\u304c\u885d\u7a81\u3057\u305f\u5834\u5408\n        if((CollisionMember.Dragon.toInt() == contact.bodyA.categoryBitMask ||\n            CollisionMember.Dragon.toInt() == contact.bodyB.categoryBitMask ) &&\n            (CollisionMember.Enemy.toInt() == contact.bodyA.categoryBitMask ||\n                CollisionMember.Enemy.toInt() == contact.bodyB.categoryBitMask)){\n                    \n                    // \u30c0\u30e1\u30fc\u30b8\u3092\u70b9\u6ec5\u3067\u8868\u73fe\n                    let dragon: DragonUnit = childNodeWithName(\"dragon\") as DragonUnit\n                    \n                    if (dragon.status != \"damaged\"){\n                        dragon.status = \"damaged\"\n                        \n                        let enemy: EnemyUnit = childNodeWithName(\"Enemy\") as EnemyUnit\n                        dragon.hitPoint -= enemy.attackPoint\n                        \n                        // \u70b9\u6570\u3092\u6e1b\u7b97\n                        \n//                        let myPointLabel: SKLabelNode = childNodeWithName(\"pointLabel\") as SKLabelNode\n//                        myPointLabel.text = String(myPoint)\n//                       \n                        if(dragon.hitPoint > 0){\n                            myLabel.text = \"Ouch!\"\n                            \n                        // \u30c9\u30e9\u30b4\u30f3\u306e\u70b9\u6ec5\n                            let blank = SKAction.sequence([SKAction.fadeOutWithDuration(0.2),\n                                SKAction.fadeInWithDuration(0.2)])\n                            let repeat = SKAction.repeatAction(blank, count: 10)\n                            dragon.runAction(repeat, completion:{\n                                dragon.status = \"\"\n                                self.myLabel.text = \"Hello World\"\n                                \n                            })\n                        } else {\n                            myLabel.text = \"Game Over!Good bye\"\n                            \n                        }\n                    }\n                    \n                    \n                    // \u6575\u306e\u65b9\u3092\u6d88\u3059\n                    if(contact.bodyA.categoryBitMask == CollisionMember.Enemy.toInt()){\n                        contact.bodyA.node?.removeFromParent()\n                    } else {\n                        contact.bodyB.node?.removeFromParent()\n                    }\n        }        \n\n```\n\n\u3076\u3064\u304b\u3063\u305f\u6642\u306bstatus\u306bdamaged\u3092\u30bb\u30c3\u30c8\u3002\u70b9\u6ec5\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u7d42\u4e86\u6642\u306bstatus\u306b\u30d6\u30e9\u30f3\u30af\u3092\u30bb\u30c3\u30c8\u3059\u308b\u307e\u3067\u30c0\u30e1\u30fc\u30b8\u3092\u8ca0\u308f\u306a\u3044\u3002\u30c0\u30e1\u30fc\u30b8\u3092\u53d7\u3051\u305f\u3089\u6575\u306e\u653b\u6483\u529b\u3067\uff28\uff30\u3092\u6e1b\u3089\u3059\u3002\uff10\u4ee5\u4e0b\u306b\u306a\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u306b\u306a\u308b\u3051\u3069\u3001\u4eca\u306e\u3068\u3053\u308d\u305d\u308c\u306b\u5bfe\u5fdc\u3057\u305f\u30a4\u30d9\u30f3\u30c8\u306f\u306a\u3057\u3002\n\n\u6b21\u306f\u30b9\u30bf\u30fc\u30c8\u753b\u9762\u3068\u7d42\u4e86\u753b\u9762\u3092\u8868\u793a\u3059\u308b\u3068\u3053\u308d\u306b\u6311\u6226\u3002\n\n\u306a\u304a\u3001\u4eca\u56de\u306f\u4ed6\u306b\u3082\u30c9\u30e9\u30b4\u30f3\u306e\u79fb\u52d5\u65b9\u6cd5\u306e\u5909\u66f4\u3084\u706b\u708e\u3092\u5410\u304f\u306e\u3092\u81ea\u52d5\u306b\u5909\u66f4\u3001\u6575\u30ad\u30e3\u30e9\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u51fa\u73fe\u3055\u305b\u308b\u3068\u3044\u3063\u305f\u4e8b\u4ee5\u5916\u306b\u3082\u6575\u3092\u6483\u7834\u3057\u305f\u3089\u70b9\u6570\u3092\u51fa\u3059\u3068\u3044\u3063\u305f\u4e8b\u3092\u3057\u3066\u3044\u308b\u304c\u305d\u3053\u306f\u5272\u611b\u3002\n", "tags": ["Swift", "SpriteKit"]}