{"context": " More than 1 year has passed since last update.\napp/controllers/users/sessions_controller.rb\nclass Users::SessionsController < Devise::SessionsController\n  # POST /resource/sign_in\n  def create\n    resource = warden.authenticate!(auth_options)\n    set_flash_message(:notice, :signed_in) if is_navigational_format?\n    sign_in(resource_name, resource)\n    respond_with resource, :location => after_sign_in_path_for(resource)\n  end\n\n  # \u8a8d\u8a3c\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u30a2\u30af\u30b7\u30e7\u30f3\n  def failed\n    # warden \u3067\u51fa\u529b\u3055\u308c\u305f\u30a8\u30e9\u30fc\u3092\u4fdd\u5b58\u3059\u308b\n    flash[:notice] = flash[:notice].to_a.concat [flash[:alert]]\n    redirect_to root_path\n  end\n\n  protected\n  def auth_options\n    # \u5931\u6557\u6642\u306b recall \u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u306e\u3067\u5909\u66f4\n    # { scope: resource_name, recall: \"#{controller_path}#new\" } # \u30c7\u30d5\u30a9\u30eb\u30c8\n    { scope: resource_name, recall: \"#{controller_path}#failed\" }\n  end\nend\n\n\n\u5931\u6557\u6642\u306b sessions/new \u3067\u306f\u306a\u304f root \u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u305f\u304b\u3063\u305f\u3093\u3060\u3051\u3069 Sessions#new \u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u306e\u304b\u3082\u3002\n\u666e\u901a\u306b\u4f5c\u3063\u3066\u308c\u3070\u5168\u7136\u5fc5\u8981\u306a\u3044\u6c17\u304c\u3059\u308b\u3057\u8a2d\u8a08\u306b\u554f\u984c\u304c\u3042\u308b\u304b\u3082\u3063\u3066\u304a\u3046\u304a\u3046\n``` ruby:app/controllers/users/sessions_controller.rb\nclass Users::SessionsController < Devise::SessionsController\n  # POST /resource/sign_in\n  def create\n    resource = warden.authenticate!(auth_options)\n    set_flash_message(:notice, :signed_in) if is_navigational_format?\n    sign_in(resource_name, resource)\n    respond_with resource, :location => after_sign_in_path_for(resource)\n  end\n\n  # \u8a8d\u8a3c\u304c\u5931\u6557\u3057\u305f\u5834\u5408\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u30a2\u30af\u30b7\u30e7\u30f3\n  def failed\n    # warden \u3067\u51fa\u529b\u3055\u308c\u305f\u30a8\u30e9\u30fc\u3092\u4fdd\u5b58\u3059\u308b\n    flash[:notice] = flash[:notice].to_a.concat [flash[:alert]]\n    redirect_to root_path\n  end\n\n  protected\n  def auth_options\n    # \u5931\u6557\u6642\u306b recall \u306b\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u306e\u3067\u5909\u66f4\n    # { scope: resource_name, recall: \"#{controller_path}#new\" } # \u30c7\u30d5\u30a9\u30eb\u30c8\n    { scope: resource_name, recall: \"#{controller_path}#failed\" }\n  end\nend\n```\n\n\u5931\u6557\u6642\u306b sessions/new \u3067\u306f\u306a\u304f root \u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u305f\u304b\u3063\u305f\u3093\u3060\u3051\u3069 ``Sessions#new`` \u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u306e\u304b\u3082\u3002\n\u666e\u901a\u306b\u4f5c\u3063\u3066\u308c\u3070\u5168\u7136\u5fc5\u8981\u306a\u3044\u6c17\u304c\u3059\u308b\u3057\u8a2d\u8a08\u306b\u554f\u984c\u304c\u3042\u308b\u304b\u3082\u3063\u3066\u304a\u3046\u304a\u3046", "tags": ["Rails", "devise"]}