{"tags": ["webpack", "stylus", "@import", "url-loader"], "context": "gulp\u304b\u3089webpack\u306b\u4e57\u308a\u63db\u3048\u3088\u3046\u3068\u8a66\u3057\u306b\u74b0\u5883\u4f5c\u3063\u3066\u305f\u3089\nstylus\u306e@import\u3057\u3066\u3044\u308bfile\u3067\u306e\u753b\u50cfpath\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\n\npackage\n\npackage.json\n  \"devDependencies\": {\n    \"autoprefixer\": \"^6.4.1\",\n    \"babel-core\": \"^6.14.0\",\n    \"babel-loader\": \"^6.2.5\",\n    \"babel-preset-es2015\": \"^6.14.0\",\n    \"babel-preset-react\": \"^6.11.1\",\n    \"babel-preset-react-hmre\": \"^1.1.1\",\n    \"css-loader\": \"^0.25.0\",\n    \"extract-text-webpack-plugin\": \"^1.0.1\",\n    \"postcss-loader\": \"^0.13.0\",\n    \"precss\": \"^1.4.0\",\n    \"react\": \"^15.3.1\",\n    \"react-dom\": \"^15.3.1\",\n    \"react-router\": \"^2.8.1\",\n    \"style-loader\": \"^0.13.1\",\n    \"stylus\": \"^0.54.5\",\n    \"stylus-loader\": \"^2.3.1\",\n    \"url-loader\": \"^0.5.7\",\n    \"webpack\": \"^1.13.2\",\n    \"webpack-dev-server\": \"^1.15.1\"\n  }\n\n\n\nwebpack\n\nwebpack.config.js\nimport path from 'path'\nimport webpack from 'webpack'\nimport ExtractTextPlugin from 'extract-text-webpack-plugin'\nimport autoprefixer from 'autoprefixer';\n\n\nconst src  = path.resolve(__dirname, 'src');\nconst dist = path.resolve(__dirname, 'dist');\n\nexport default {\n    devtool: 'source-map\\',\n\n    entry: src + '/js/index.jsx',\n\n    output: {\n        path: dist,\n        filename: 'js/bundle.js',\n        publicPath: 'http://localhost:3000/'\n    },\n\n    module: {\n        loaders: [\n            {\n                test: /\\.js[x]?$/,\n                exclude: /node_modules/,\n                loader: 'babel'\n            },\n            {\n                test: /\\.styl$/,\n                loader: ExtractTextPlugin.extract('style-loader','css-loader?sourceMap!postcss-loader!resolve-url!stylus-loader')\n            },\n\n            {\n                test: /\\.(jpe?g|png|gif|svg)$/i,\n                loader: 'url-loader'\n\n            }\n        ]\n    },\n\n    postcss: [ autoprefixer( { browsers: ['IE 9', 'IE 10', 'IE 11', 'last 2 versions'] } )],\n\n    devServer: {\n        contentBase: 'dist',\n        port: 3000\n    },\n\n    resolve: {\n        extensions: ['', '.js', '.jsx', 'stylus'],\n        alias: {\n            images: path.join(__dirname, 'dist/img')\n        }\n    },\n\n    plugins: [\n        new ExtractTextPlugin(\"./css/app.css\"),\n\n        new webpack.DefinePlugin({\n            'process.env':{\n                'NODE_ENV': JSON.stringify('production')\n            }\n        }),\n        new webpack.optimize.UglifyJsPlugin({\n            compress:{\n                warnings: true\n            }\n        })\n    ]\n}\n\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n\nsrc\n\n\nimg\n\n\ntest1.png\ntest2.png\n\n\nstyles\n\n\napp.styl\ncomponent\n\n\nheader.styl \n\n\n\n\njs\n\n\nindex.jsx\n\n\n\n\n\napp.styl\u3067\u306e\u8aad\u307f\u8fbc\u307f\u306f\u3046\u307e\u304f\u884c\u3063\u3066\u305f\u306e\u3060\u304c\nbackground url('../img/test.png')\napp.styl\u306bimport\u3057\u3066\u3044\u308bcomponent/header.styl\u5185\u3067\nbackground url('../../img/test.png')\n\u3068\u66f8\u304f\u3068\nModule not found: Error: Cannot resolve 'file' or 'directory'\n\u3063\u3066\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3046\u307e\u304f\u3044\u304b\u306a\u3044\nhttp://stackoverflow.com/questions/33450953/webpack-stylus-loader-incorrectly-resolve-url-paths\nhttp://stackoverflow.com/questions/35786100/unable-to-resolve-absolute-url-paths-for-background-images-in-css-with-webpack\n\u3053\u306e\u8fba\u53c2\u8003\u306b\nresolve-url-loader\n\u3063\u3066\u306e\u4f7f\u3063\u3066\nbackground url('img/test.png')\n\u3067\u66f8\u304d\u51fa\u3059\u3053\u3068\u304c\u51fa\u6765\u305f\u3002\nimages\u3092data-uri\u306b\u3057\u305f\u304f\u306a\u3044\u6642\u306f\nloader: 'url-loader?limit=10000&name=img/[name].[ext]\nloader\u3092\u5909\u3048\u308b\u3068\u5b9f\u969b\u306e\u30d1\u30b9\u304c\u5165\u308b\u3002\n\u3053\u306e\u8fba\u306ffile-loader\u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u3088\u3044\u3063\u3066\u8a18\u4e8b\u3082\u307f\u305f\u3051\u3069\u3069\u3046\u306a\u3093\u3060\u308d\u3002\n`gulp`\u304b\u3089`webpack`\u306b\u4e57\u308a\u63db\u3048\u3088\u3046\u3068\u8a66\u3057\u306b\u74b0\u5883\u4f5c\u3063\u3066\u305f\u3089\n`stylus`\u306e`@import`\u3057\u3066\u3044\u308bfile\u3067\u306e\u753b\u50cfpath\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\n\n###package\n```json:package.json\n  \"devDependencies\": {\n    \"autoprefixer\": \"^6.4.1\",\n    \"babel-core\": \"^6.14.0\",\n    \"babel-loader\": \"^6.2.5\",\n    \"babel-preset-es2015\": \"^6.14.0\",\n    \"babel-preset-react\": \"^6.11.1\",\n    \"babel-preset-react-hmre\": \"^1.1.1\",\n    \"css-loader\": \"^0.25.0\",\n    \"extract-text-webpack-plugin\": \"^1.0.1\",\n    \"postcss-loader\": \"^0.13.0\",\n    \"precss\": \"^1.4.0\",\n    \"react\": \"^15.3.1\",\n    \"react-dom\": \"^15.3.1\",\n    \"react-router\": \"^2.8.1\",\n    \"style-loader\": \"^0.13.1\",\n    \"stylus\": \"^0.54.5\",\n    \"stylus-loader\": \"^2.3.1\",\n    \"url-loader\": \"^0.5.7\",\n    \"webpack\": \"^1.13.2\",\n    \"webpack-dev-server\": \"^1.15.1\"\n  }\n```\n\n###webpack\n```js:webpack.config.js\nimport path from 'path'\nimport webpack from 'webpack'\nimport ExtractTextPlugin from 'extract-text-webpack-plugin'\nimport autoprefixer from 'autoprefixer';\n\n\nconst src  = path.resolve(__dirname, 'src');\nconst dist = path.resolve(__dirname, 'dist');\n\nexport default {\n    devtool: 'source-map\\',\n\n    entry: src + '/js/index.jsx',\n\n    output: {\n        path: dist,\n        filename: 'js/bundle.js',\n        publicPath: 'http://localhost:3000/'\n    },\n\n    module: {\n        loaders: [\n            {\n                test: /\\.js[x]?$/,\n                exclude: /node_modules/,\n                loader: 'babel'\n            },\n            {\n                test: /\\.styl$/,\n                loader: ExtractTextPlugin.extract('style-loader','css-loader?sourceMap!postcss-loader!resolve-url!stylus-loader')\n            },\n\n            {\n                test: /\\.(jpe?g|png|gif|svg)$/i,\n                loader: 'url-loader'\n\n            }\n        ]\n    },\n\n    postcss: [ autoprefixer( { browsers: ['IE 9', 'IE 10', 'IE 11', 'last 2 versions'] } )],\n\n    devServer: {\n        contentBase: 'dist',\n        port: 3000\n    },\n\n    resolve: {\n        extensions: ['', '.js', '.jsx', 'stylus'],\n        alias: {\n            images: path.join(__dirname, 'dist/img')\n        }\n    },\n\n    plugins: [\n        new ExtractTextPlugin(\"./css/app.css\"),\n\n        new webpack.DefinePlugin({\n            'process.env':{\n                'NODE_ENV': JSON.stringify('production')\n            }\n        }),\n        new webpack.optimize.UglifyJsPlugin({\n            compress:{\n                warnings: true\n            }\n        })\n    ]\n}\n```\n\n###\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n\n- src\n    - img\n        - test1.png\n        - test2.png\n    - styles\n        - app.styl\n        - component\n            - header.styl \n    - js\n        - index.jsx\n\n\napp.styl\u3067\u306e\u8aad\u307f\u8fbc\u307f\u306f\u3046\u307e\u304f\u884c\u3063\u3066\u305f\u306e\u3060\u304c\n`background url('../img/test.png')`\n\napp.styl\u306bimport\u3057\u3066\u3044\u308bcomponent/header.styl\u5185\u3067\n`background url('../../img/test.png')`\n\n\u3068\u66f8\u304f\u3068\nModule not found: Error: Cannot resolve 'file' or 'directory'\n\u3063\u3066\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3046\u307e\u304f\u3044\u304b\u306a\u3044\n\nhttp://stackoverflow.com/questions/33450953/webpack-stylus-loader-incorrectly-resolve-url-paths\n\nhttp://stackoverflow.com/questions/35786100/unable-to-resolve-absolute-url-paths-for-background-images-in-css-with-webpack\n\n\u3053\u306e\u8fba\u53c2\u8003\u306b\n\n`resolve-url-loader`\n\u3063\u3066\u306e\u4f7f\u3063\u3066\n`background url('img/test.png')`\n\n\u3067\u66f8\u304d\u51fa\u3059\u3053\u3068\u304c\u51fa\u6765\u305f\u3002\n\nimages\u3092data-uri\u306b\u3057\u305f\u304f\u306a\u3044\u6642\u306f\n`loader: 'url-loader?limit=10000&name=img/[name].[ext]`\nloader\u3092\u5909\u3048\u308b\u3068\u5b9f\u969b\u306e\u30d1\u30b9\u304c\u5165\u308b\u3002\n\u3053\u306e\u8fba\u306ffile-loader\u3092\u4f7f\u3063\u305f\u307b\u3046\u304c\u3088\u3044\u3063\u3066\u8a18\u4e8b\u3082\u307f\u305f\u3051\u3069\u3069\u3046\u306a\u3093\u3060\u308d\u3002\n"}