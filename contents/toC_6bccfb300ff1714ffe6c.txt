{"tags": ["Node.js", "cloud9", "ejs"], "context": "\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306eNode.js\u5165\u9580\u3092Cloud9\u306eNode.js\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u52d5\u304b\u3057\u3066\u5b66\u3093\u3067\u3044\u305f\u3068\u3053\u308d\u3001\u30d5\u30a9\u30fc\u30e0\u3092\u4f5c\u3063\u3066POST\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30a4\u30d9\u30f3\u30c8\u3067\u53d7\u3051\u53d6\u3063\u3066\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u5185\u5bb9\u3067\u8a70\u307e\u308a\u307e\u3057\u305f\u3002\n\nserver.js(\u4e00\u90e8\u7701\u7565\uff09\nfunction renderForm(posts,res){\nvar data = ejs.render(template,{\n        posts: posts\n    });\n    res.writeHead(200,{'Content-Type': 'text/html'});\n    res.write(data);\n    res.end();\n}\n\nserver.on('request',function(req,res){\n    if(req.method === 'POST'){\n        req.data = \"\";\n        req.on(\"readable\",function(){\n            req.data += req.read();\n        });\n        req.on(\"end\",function(){\n            var query = qs.parse(req.data);\n            posts.push(query.name);\n            console.log(posts);\n            renderForm(posts,res);\n        });\n    }else{\n        renderForm(posts,res);\n    }\n});\n\n\nreq.data += req.read();\u3057\u305f\u6642\u306e\u6587\u5b57\u5217\u306bnull\u304c\u5165\u3063\u3066\u304d\u3066\u3044\u3066\u3001posts\u3092\u8868\u793a\u3059\u308b\u3068\u300chogenull\u300d\u3068\u304b\u300cabcdnull\u300d\u306b\u3002\u539f\u56e0\u3092\u63a2\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u8a18\u4e8b\u304c\u30d2\u30c3\u30c8\u3057\u305f\u306e\u3067\u3001req.data += req.read() || '';\u3092\u8a66\u3057\u305f\u3089\u3044\u3051\u307e\u3057\u305f \n\u60c5\u5831\u5143\uff1anodejs\u306ereadable\u30a4\u30d9\u30f3\u30c8\u306f\u6700\u5f8c\u306bnull\u304c\u6765\u308b\u304b\u3082\n\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e[Node.js\u5165\u9580](http://dotinstall.com/lessons/basic_nodejs)\u3092Cloud9\u306eNode.js\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u52d5\u304b\u3057\u3066\u5b66\u3093\u3067\u3044\u305f\u3068\u3053\u308d\u3001\u30d5\u30a9\u30fc\u30e0\u3092\u4f5c\u3063\u3066POST\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30a4\u30d9\u30f3\u30c8\u3067\u53d7\u3051\u53d6\u3063\u3066\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u5185\u5bb9\u3067\u8a70\u307e\u308a\u307e\u3057\u305f\u3002\n\n```javascript:server.js(\u4e00\u90e8\u7701\u7565\uff09\nfunction renderForm(posts,res){\nvar data = ejs.render(template,{\n        posts: posts\n    });\n    res.writeHead(200,{'Content-Type': 'text/html'});\n    res.write(data);\n    res.end();\n}\n\nserver.on('request',function(req,res){\n    if(req.method === 'POST'){\n        req.data = \"\";\n        req.on(\"readable\",function(){\n            req.data += req.read();\n        });\n        req.on(\"end\",function(){\n            var query = qs.parse(req.data);\n            posts.push(query.name);\n            console.log(posts);\n            renderForm(posts,res);\n        });\n    }else{\n        renderForm(posts,res);\n    }\n});\n```\n\n`req.data += req.read();`\u3057\u305f\u6642\u306e\u6587\u5b57\u5217\u306b`null`\u304c\u5165\u3063\u3066\u304d\u3066\u3044\u3066\u3001posts\u3092\u8868\u793a\u3059\u308b\u3068\u300chogenull\u300d\u3068\u304b\u300cabcdnull\u300d\u306b\u3002\u539f\u56e0\u3092\u63a2\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u8a18\u4e8b\u304c\u30d2\u30c3\u30c8\u3057\u305f\u306e\u3067\u3001`req.data += req.read() || '';`\u3092\u8a66\u3057\u305f\u3089\u3044\u3051\u307e\u3057\u305f :+1:\n\n\u60c5\u5831\u5143\uff1a[nodejs\u306ereadable\u30a4\u30d9\u30f3\u30c8\u306f\u6700\u5f8c\u306bnull\u304c\u6765\u308b\u304b\u3082](http://var.blog.jp/archives/43995154.html)\n"}