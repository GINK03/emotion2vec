{"tags": ["Java1.8", "spring-boot1.2.0", "log4jdbc-log4j21.16"], "context": " More than 1 year has passed since last update.Spring Boot \u3067 log4jdbc-log4j2 \u3092\u4f7f\u7528\u3057\u3066SQL\u3092\u51fa\u529b\u3059\u308b\u305f\u3081\u306e\u624b\u9806\u3067\u3059\u3002\u958b\u767a\u6642\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u308bSQL\u3092\u78ba\u8a8d\u3057\u305f\u3044\u6642\u306b\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nhttp://code.google.com/p/log4jdbc-log4j2/ \u3092\u53c2\u7167\u3057\u307e\u3057\u305f\u3002\npom.xml \u306b log4jdbc-log4j2-jdbc4.1 \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\npom.xml\n        <dependency>\n            <groupId>org.bgee.log4jdbc-log4j2</groupId>\n            <artifactId>log4jdbc-log4j2-jdbc4.1</artifactId>\n            <version>1.16</version>\n        </dependency>\n\n\napplication.properties \u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002url\u306ejdbc\u306e\u5f8c\u306b :log4jdbc \u3092\u8ffd\u52a0\u3057\u3001driverClassName \u3092 net.sf.log4jdbc.sql.jdbcapi.DriverSpy \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\uff08\u5909\u66f4\u524d\uff09application.properties\nspring.datasource.url             = jdbc:mysql://localhost/world\nspring.datasource.driverClassName = com.mysql.jdbc.Driver\n\n\n\n\uff08\u5909\u66f4\u5f8c\uff09application.properties\nspring.datasource.url             = jdbc:log4jdbc:mysql://localhost/world\nspring.datasource.driverClassName = net.sf.log4jdbc.sql.jdbcapi.DriverSpy\n\n\n/resources \u306e\u4e0b\u306b log4jdbc.log4j2.properties \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nlog4jdbc.log4j2.properties\nlog4jdbc.spylogdelegator.name=net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator\n\n\n/resources \u306e\u4e0b\u306b logback.xml \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nlogback.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n    <include resource=\"org/springframework/boot/logging/logback/base.xml\"/>\n\n    <!-- log4jdbc-log4j2 -->\n    <logger name=\"jdbc.sqlonly\"        level=\"DEBUG\"/>\n    <logger name=\"jdbc.sqltiming\"      level=\"INFO\"/>\n    <logger name=\"jdbc.audit\"          level=\"INFO\"/>\n    <logger name=\"jdbc.resultset\"      level=\"ERROR\"/>\n    <logger name=\"jdbc.resultsettable\" level=\"ERROR\"/>\n    <logger name=\"jdbc.connection\"     level=\"DEBUG\"/>\n</configuration>\n\n\n\u4ee5\u4e0b\u306e Java Configuration \u306e\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n@Configuration\npublic class ApplicationConfig {\n\n    @Bean\n    @ConfigurationProperties(\"spring.datasource\")\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n}\n\nSpring Data JPA \u3067\u3082 MyBatis-Spring \u3067\u3082SQL\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\nSpring Boot \u3067 log4jdbc-log4j2 \u3092\u4f7f\u7528\u3057\u3066SQL\u3092\u51fa\u529b\u3059\u308b\u305f\u3081\u306e\u624b\u9806\u3067\u3059\u3002\u958b\u767a\u6642\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u308bSQL\u3092\u78ba\u8a8d\u3057\u305f\u3044\u6642\u306b\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\nhttp://code.google.com/p/log4jdbc-log4j2/ \u3092\u53c2\u7167\u3057\u307e\u3057\u305f\u3002\n\npom.xml \u306b log4jdbc-log4j2-jdbc4.1 \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```pom.xml\n        <dependency>\n            <groupId>org.bgee.log4jdbc-log4j2</groupId>\n            <artifactId>log4jdbc-log4j2-jdbc4.1</artifactId>\n            <version>1.16</version>\n        </dependency>\n```\n\napplication.properties \u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002url\u306ejdbc\u306e\u5f8c\u306b **:log4jdbc** \u3092\u8ffd\u52a0\u3057\u3001driverClassName \u3092 **net.sf.log4jdbc.sql.jdbcapi.DriverSpy** \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```\uff08\u5909\u66f4\u524d\uff09application.properties\nspring.datasource.url             = jdbc:mysql://localhost/world\nspring.datasource.driverClassName = com.mysql.jdbc.Driver\n```\n\n```\uff08\u5909\u66f4\u5f8c\uff09application.properties\nspring.datasource.url             = jdbc:log4jdbc:mysql://localhost/world\nspring.datasource.driverClassName = net.sf.log4jdbc.sql.jdbcapi.DriverSpy\n```\n\n/resources \u306e\u4e0b\u306b log4jdbc.log4j2.properties \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```log4jdbc.log4j2.properties\nlog4jdbc.spylogdelegator.name=net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator\n```\n\n/resources \u306e\u4e0b\u306b logback.xml \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```logback.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration>\n    <include resource=\"org/springframework/boot/logging/logback/base.xml\"/>\n\n    <!-- log4jdbc-log4j2 -->\n    <logger name=\"jdbc.sqlonly\"        level=\"DEBUG\"/>\n    <logger name=\"jdbc.sqltiming\"      level=\"INFO\"/>\n    <logger name=\"jdbc.audit\"          level=\"INFO\"/>\n    <logger name=\"jdbc.resultset\"      level=\"ERROR\"/>\n    <logger name=\"jdbc.resultsettable\" level=\"ERROR\"/>\n    <logger name=\"jdbc.connection\"     level=\"DEBUG\"/>\n</configuration>\n```\n\n\u4ee5\u4e0b\u306e Java Configuration \u306e\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```java\n@Configuration\npublic class ApplicationConfig {\n\n    @Bean\n    @ConfigurationProperties(\"spring.datasource\")\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n\n}\n```\n\nSpring Data JPA \u3067\u3082 MyBatis-Spring \u3067\u3082SQL\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n"}