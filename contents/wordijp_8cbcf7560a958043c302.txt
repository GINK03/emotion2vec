{"context": "webpack\u306e\u63d0\u4f9b\u3059\u308bHot Module Replacement(HMR)\u306eBrowserify\u3067\u306e\u5bfe\u5fdc\u306b\u3064\u3044\u3066\u3067\u3059\u3002\nHMR\u306e\u5bfe\u5fdc\u306bbrowserify-hmr\u3001\nCSS in JS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066Aphrodite\u3001\n\u305d\u308c\u3068\u306f\u5225\u306b\u3001\u5f93\u6765\u306eCSS\u3067\u8a18\u8ff0\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066cssify\n\u3092\u305d\u308c\u305e\u308c\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eGitHub\u306f\u3053\u3061\u3089\u3067\u3059\n\n\u64cd\u4f5c\u753b\u9762\n\u3053\u3061\u3089\u306fbrowserify-hmr\u306b\u3088\u308bJS\u3068CSS\u7de8\u96c6\u753b\u9762\u3067\u3059\n\n\nHMR\u5bfe\u5fdc\u306b\u3064\u3044\u3066\n.jsx\u5185\u306eHTML\u30bf\u30b0\u306f\u3001browserify-hmr\u306b\u3088\u308a\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3001\u5185\u90e8\u3067react-transform-hmr\u304c\u52d5\u3044\u3066\u304a\u308a\u3001\u305d\u308c\u304cHMR\u3078\u306e\u5c0e\u7dda\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3001\u305d\u308c\u3068\u3001\u64cd\u4f5c\u753b\u9762\u306b\u306f\u6620\u3063\u3066\u306a\u3044\u3067\u3059\u304c\u300cHello, world!\u300d\u306fjade\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3001\u3053\u3061\u3089\u3082HMR\u306e\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nCSS\u3078\u306e\u5bfe\u5fdc\u3067\u3059\u304c\u3001cssify\u306fCSS\u30d5\u30a1\u30a4\u30eb\u3092JS\u30b3\u30fc\u30c9\u3078\u3068\u57cb\u3081\u8fbc\u3093\u3067\u304a\u308a\u3001\u305d\u308c\u306b\u3088\u308aHMR\u306e\u5bfe\u8c61\u306b\u51fa\u6765\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3001\u4ed5\u7d44\u307f\u307e\u3067\u8a73\u3057\u304f\u7d42\u3048\u3066\u307e\u305b\u3093\u304c\u3001JS\u30b3\u30fc\u30c9\u5316\u51fa\u6765\u3066\u3044\u308b\u70ba\u306b\u305d\u308c\u3082HMR\u5bfe\u8c61\u3068\u3057\u3066\u62fe\u3063\u3066\u304f\u308c\u3066\u308b\u306e\u3060\u3068\u63a8\u6e2c\u3057\u3066\u3044\u307e\u3059\u3002\nCSS in JS(Aphrodite)\u306f\u6700\u521d\u304b\u3089JS\u3067\u5b8c\u7d50\u3057\u3066\u308b\u70ba\u3001\u4ed5\u7d44\u307f\u7684\u306b\u306fcssify\u306e\u6642\u3088\u308a\u3082\u5206\u304b\u308a\u3084\u3059\u3044\u304b\u3068\u601d\u3044\u307e\u3059(\u5185\u90e8\u5b9f\u88c5\u306f\u96e3\u3057\u3044\u3067\u3059\u304c)\u3002\n\nCSS Modules\u306f?\nCSS Modules\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001CSS\u3092\u5225\u9014bundle.css\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u70ba\u304b\u3001HMR\u306e\u5bfe\u8c61\u306b\u51fa\u6765\u306a\u304b\u3063\u305f\u70ba\u3053\u306e\u8a18\u4e8b\u3067\u306f\u6271\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\nSass\u5bfe\u5fdc\u306f?\nsassify\u3084scssify\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u305e\u308c\u4ee5\u4e0b\u306e\u7406\u7531\u3067\u6ca1\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\nsassify\nHMR\u306e\u5bfe\u8c61\u306b\u306f\u306a\u308b\u3093\u3067\u3059\u304c\u3001style\u306e\u524a\u9664\u3092\u3057\u3066\u3082\u4ee5\u524d\u306e\u8a2d\u5b9a\u304c\u6b8b\u3063\u305f\u307e\u307e\u3068\u306a\u308b\u70ba\u3001\u60dc\u3057\u3044\u3067\u3059\u304c\u6271\u3046\u306e\u3092\u3084\u3081\u306b\u3057\u307e\u3057\u305f\u3002\n\u306a\u304a\u3001\u5229\u7528\u306e\u969b\u306f\u3001cssify\u3068\u9055\u3044autoInject\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067false\u306e\u70ba\u3001transform\u306b\u6e21\u3059\u969b\u306btrue\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n$ browserify -p browserify-hmr -t [sassify --auto-inject true]\n\n\nscssify\nsassify\u3068\u540c\u3058\u304fstyle\u306e\u524a\u9664\u3092\u3057\u3066\u3082\u4ee5\u524d\u306e\u8a2d\u5b9a\u304c\u6b8b\u3063\u305f\u307e\u307e\u3068\u306a\u308a\u307e\u3059\u3002\n\npostcss\u5bfe\u5fdc\u306f?\n2016/12/29\u8ffd\u8a18\nbrowserify-postcss\u306b\u3053\u306e\u30d1\u30c3\u30c1(Gist)\u3092\u65bd\u305b\u3070\u5bfe\u5fdc\u3067\u304d\u307e\u3059\u3002\n\u30d1\u30c3\u30c1\u306e\u5185\u5bb9\u306fcssify\u3068\u540c\u3058\u3067\u3001css\u306b\u5bfe\u5fdc\u3057\u305f\u4e00\u610f\u306a\u540d\u524d(css\u3078\u306e\u30d5\u30eb\u30d1\u30b9\u306e\u30cf\u30c3\u30b7\u30e5\u5024)\u3092\u4e0e\u3048\u3001hmr\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308bcssify\u306b\u4e38\u6295\u3052\u3092\u3057\u3066\u3044\u307e\u3059\u3002\nPR\u3092\u9001\u3063\u3066\u3044\u306a\u3044\u306e\u306f\u3001postcss-import\u4f7f\u7528\u6642\u306e\u691c\u8a3c\u304c\u307e\u3060\u51fa\u6765\u3066\u3044\u306a\u3044\u305f\u3081\u3067\u3059\u3002\n\nbrowserify-postcss/browser.js\nmodule.exports = require('cssify')\n\n\n\nbrowserify-postcss/index.js\n// \u30d1\u30c3\u30c1\n     processor.process(body, postCssOptions)\n       .then(function (result) {\n-        self.push(moduleify(result.css, opts.inject))\n+        self.push(moduleify(result.opts.to, result.css, opts.inject))\n         done()\n       }, function (err) {\n\n// \u65b0\u898f\u30b3\u30fc\u30c9\nfunction hash (str) {\n  return '_' + stringHash(str).toString(36)\n}\n\nfunction moduleify(toName, css, inject) {\n  var exp\n  if (inject === 'base64') {\n    exp = 'module.exports = require(\"' + path.basename(path.dirname(__dirname)) + '\").byUrl(\"' + base64(css) + '\")'\n  } else if (inject) {\n    // cssify\u3068\u540c\u3058\u65b9\u6cd5\n    // NOTE : \u30d6\u30e9\u30a6\u30b6\u74b0\u5883\u3067\u306fbrowser.js\u304crequire\u3055\u308c\u308b(cssify\u3068\u540c\u3058\u30ed\u30b8\u30c3\u30af\u306b\u306a\u308b)\n    exp = [\n      \"var inject = require('browserify-postcss');\",\n      \"var css = '\" + css.replace(/'/gm, \"\\\\'\").replace(/\\n/gm, ' ') + \"';\",\n      \"inject(css, undefined, '\" + hash(toName) + \"');\",\n      \"module.exports = css;\",\n    ].join('\\n');\n  } else {\n    exp = 'module.exports = ' + JSON.stringify(css)\n  }\n  return exp\n}\n\n\n\n\u53c2\u8003\nGitHub: revathskumar/browserify-hmr-example\nHot Module Replacement\u306e\u8a2d\u5b9a\u3068\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3059\u308b\nReact\u3068\u4e00\u7dd2\u306b\u4f7f\u3046\u6642\u306eCSS in JS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u9078\u5b9a\u3068\u304b\u6240\u611f\u3068\u304b\nwebpack\u306e\u63d0\u4f9b\u3059\u308bHot Module Replacement(HMR)\u306eBrowserify\u3067\u306e\u5bfe\u5fdc\u306b\u3064\u3044\u3066\u3067\u3059\u3002\n\nHMR\u306e\u5bfe\u5fdc\u306b[browserify-hmr](https://github.com/AgentME/browserify-hmr)\u3001\nCSS in JS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u3057\u3066[Aphrodite](https://github.com/Khan/aphrodite)\u3001\n\u305d\u308c\u3068\u306f\u5225\u306b\u3001\u5f93\u6765\u306eCSS\u3067\u8a18\u8ff0\u3059\u308b\u65b9\u6cd5\u3068\u3057\u3066[cssify]\n(https://github.com/davidguttman/cssify)\n\u3092\u305d\u308c\u305e\u308c\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n[\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eGitHub\u306f\u3053\u3061\u3089\u3067\u3059](https://github.com/wordijp/browserify-hmr-with-cssinjs-sample)\n\n# \u64cd\u4f5c\u753b\u9762\n\n\u3053\u3061\u3089\u306fbrowserify-hmr\u306b\u3088\u308bJS\u3068CSS\u7de8\u96c6\u753b\u9762\u3067\u3059\n![hmr-navidate.gif](https://qiita-image-store.s3.amazonaws.com/0/51728/2883aa87-5176-7ba3-ef31-cf3cd3952d91.gif)\n\n# HMR\u5bfe\u5fdc\u306b\u3064\u3044\u3066\n\n.jsx\u5185\u306eHTML\u30bf\u30b0\u306f\u3001browserify-hmr\u306b\u3088\u308a\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3001\u5185\u90e8\u3067[react-transform-hmr](https://github.com/gaearon/react-transform-hmr)\u304c\u52d5\u3044\u3066\u304a\u308a\u3001\u305d\u308c\u304cHMR\u3078\u306e\u5c0e\u7dda\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3001\u305d\u308c\u3068\u3001\u64cd\u4f5c\u753b\u9762\u306b\u306f\u6620\u3063\u3066\u306a\u3044\u3067\u3059\u304c\u300cHello, world!\u300d\u306fjade\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u66f8\u3044\u3066\u3044\u307e\u3059\u3001\u3053\u3061\u3089\u3082HMR\u306e\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nCSS\u3078\u306e\u5bfe\u5fdc\u3067\u3059\u304c\u3001cssify\u306fCSS\u30d5\u30a1\u30a4\u30eb\u3092JS\u30b3\u30fc\u30c9\u3078\u3068\u57cb\u3081\u8fbc\u3093\u3067\u304a\u308a\u3001\u305d\u308c\u306b\u3088\u308aHMR\u306e\u5bfe\u8c61\u306b\u51fa\u6765\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3001\u4ed5\u7d44\u307f\u307e\u3067\u8a73\u3057\u304f\u7d42\u3048\u3066\u307e\u305b\u3093\u304c\u3001JS\u30b3\u30fc\u30c9\u5316\u51fa\u6765\u3066\u3044\u308b\u70ba\u306b\u305d\u308c\u3082HMR\u5bfe\u8c61\u3068\u3057\u3066\u62fe\u3063\u3066\u304f\u308c\u3066\u308b\u306e\u3060\u3068\u63a8\u6e2c\u3057\u3066\u3044\u307e\u3059\u3002\n\nCSS in JS(Aphrodite)\u306f\u6700\u521d\u304b\u3089JS\u3067\u5b8c\u7d50\u3057\u3066\u308b\u70ba\u3001\u4ed5\u7d44\u307f\u7684\u306b\u306fcssify\u306e\u6642\u3088\u308a\u3082\u5206\u304b\u308a\u3084\u3059\u3044\u304b\u3068\u601d\u3044\u307e\u3059(\u5185\u90e8\u5b9f\u88c5\u306f\u96e3\u3057\u3044\u3067\u3059\u304c)\u3002\n\n\n# CSS Modules\u306f?\n\nCSS Modules\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001CSS\u3092\u5225\u9014bundle.css\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u51fa\u529b\u3059\u308b\u70ba\u304b\u3001HMR\u306e\u5bfe\u8c61\u306b\u51fa\u6765\u306a\u304b\u3063\u305f\u70ba\u3053\u306e\u8a18\u4e8b\u3067\u306f\u6271\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\n\n# Sass\u5bfe\u5fdc\u306f?\n\nsassify\u3084scssify\u304c\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u308c\u305e\u308c\u4ee5\u4e0b\u306e\u7406\u7531\u3067\u6ca1\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\n## sassify\n\nHMR\u306e\u5bfe\u8c61\u306b\u306f\u306a\u308b\u3093\u3067\u3059\u304c\u3001style\u306e\u524a\u9664\u3092\u3057\u3066\u3082\u4ee5\u524d\u306e\u8a2d\u5b9a\u304c\u6b8b\u3063\u305f\u307e\u307e\u3068\u306a\u308b\u70ba\u3001\u60dc\u3057\u3044\u3067\u3059\u304c\u6271\u3046\u306e\u3092\u3084\u3081\u306b\u3057\u307e\u3057\u305f\u3002\n\u306a\u304a\u3001\u5229\u7528\u306e\u969b\u306f\u3001cssify\u3068\u9055\u3044autoInject\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067false\u306e\u70ba\u3001transform\u306b\u6e21\u3059\u969b\u306btrue\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n    $ browserify -p browserify-hmr -t [sassify --auto-inject true]\n\n## scssify\n\nsassify\u3068\u540c\u3058\u304fstyle\u306e\u524a\u9664\u3092\u3057\u3066\u3082\u4ee5\u524d\u306e\u8a2d\u5b9a\u304c\u6b8b\u3063\u305f\u307e\u307e\u3068\u306a\u308a\u307e\u3059\u3002\n\n# postcss\u5bfe\u5fdc\u306f?\n\n*2016/12/29\u8ffd\u8a18*\n\n[browserify-postcss](https://www.npmjs.com/package/browserify-postcss)\u306b[\u3053\u306e\u30d1\u30c3\u30c1(Gist)](https://gist.github.com/wordijp/840e5afcd7fe05083ea489bb9ab04882)\u3092\u65bd\u305b\u3070\u5bfe\u5fdc\u3067\u304d\u307e\u3059\u3002\n\u30d1\u30c3\u30c1\u306e\u5185\u5bb9\u306fcssify\u3068\u540c\u3058\u3067\u3001css\u306b\u5bfe\u5fdc\u3057\u305f\u4e00\u610f\u306a\u540d\u524d(css\u3078\u306e\u30d5\u30eb\u30d1\u30b9\u306e\u30cf\u30c3\u30b7\u30e5\u5024)\u3092\u4e0e\u3048\u3001hmr\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308bcssify\u306b\u4e38\u6295\u3052\u3092\u3057\u3066\u3044\u307e\u3059\u3002\nPR\u3092\u9001\u3063\u3066\u3044\u306a\u3044\u306e\u306f\u3001postcss-import\u4f7f\u7528\u6642\u306e\u691c\u8a3c\u304c\u307e\u3060\u51fa\u6765\u3066\u3044\u306a\u3044\u305f\u3081\u3067\u3059\u3002\n\n```js:browserify-postcss/browser.js\nmodule.exports = require('cssify')\n```\n\n```js:browserify-postcss/index.js\n// \u30d1\u30c3\u30c1\n     processor.process(body, postCssOptions)\n       .then(function (result) {\n-        self.push(moduleify(result.css, opts.inject))\n+        self.push(moduleify(result.opts.to, result.css, opts.inject))\n         done()\n       }, function (err) {\n\n// \u65b0\u898f\u30b3\u30fc\u30c9\nfunction hash (str) {\n  return '_' + stringHash(str).toString(36)\n}\n\nfunction moduleify(toName, css, inject) {\n  var exp\n  if (inject === 'base64') {\n    exp = 'module.exports = require(\"' + path.basename(path.dirname(__dirname)) + '\").byUrl(\"' + base64(css) + '\")'\n  } else if (inject) {\n    // cssify\u3068\u540c\u3058\u65b9\u6cd5\n    // NOTE : \u30d6\u30e9\u30a6\u30b6\u74b0\u5883\u3067\u306fbrowser.js\u304crequire\u3055\u308c\u308b(cssify\u3068\u540c\u3058\u30ed\u30b8\u30c3\u30af\u306b\u306a\u308b)\n    exp = [\n      \"var inject = require('browserify-postcss');\",\n      \"var css = '\" + css.replace(/'/gm, \"\\\\'\").replace(/\\n/gm, ' ') + \"';\",\n      \"inject(css, undefined, '\" + hash(toName) + \"');\",\n      \"module.exports = css;\",\n    ].join('\\n');\n  } else {\n    exp = 'module.exports = ' + JSON.stringify(css)\n  }\n  return exp\n}\n```\n\n# \u53c2\u8003\n[GitHub: revathskumar/browserify-hmr-example](https://github.com/revathskumar/browserify-hmr-example)\n[Hot Module Replacement\u306e\u8a2d\u5b9a\u3068\u4ed5\u7d44\u307f\u3092\u7406\u89e3\u3059\u308b](http://qiita.com/haradakunihiko/items/40486ec2b6b9aea119bb)\n[React\u3068\u4e00\u7dd2\u306b\u4f7f\u3046\u6642\u306eCSS in JS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u9078\u5b9a\u3068\u304b\u6240\u611f\u3068\u304b](http://qiita.com/inuscript/items/0cfdb1a0c1d172e27694#aphrodite)\n", "tags": ["browserify", "reactjs", "CSS", "Node.js", "React"]}