{"context": " More than 1 year has passed since last update.\n\u6575\u304c\u3046\u306d\u3046\u306d\u52d5\u3044\u3066\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u5411\u304b\u3063\u3066\u304d\u305f\u308a\u3001\u6575\u306e\u5f3e\u304c\u3053\u3061\u3089\u306b\u5411\u304b\u3063\u3066\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u96e3\u6613\u5ea6\u3092\u4e0a\u3052\u3066\u307f\u308b\u3002\n\u9ec4\u7dd1\u306e\u6575\u306f\u51fa\u73fe\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f4d\u7f6e\u3092\u76ee\u6307\u3057\u3066\u3001\u3046\u306d\u3046\u306d\u52d5\u3044\u3066\u63a5\u8fd1\u3057\u3066\u304f\u308b\nif (enemy.enemyColor == SKColor.greenColor()) {\n\n    // \u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f4d\u7f6e\n    let dragon: DragonUnit = childNodeWithName(\"dragon\") as! DragonUnit\n    // CGPath \u306e\u5ba3\u8a00\n    let path:CGMutablePath = CGPathCreateMutable()\n    let y = Int(arc4random() % 450) + 150\n    // \u59cb\u70b9\u3092\u6c7a\u5b9a\n    CGPathMoveToPoint(path, nil, CGRectGetMaxX(self.frame), CGFloat(y))\n\n    var cp1x : CGFloat = (2 * CGRectGetMaxX(self.frame) + dragon.position.x)/3\n    var cp1y : CGFloat = CGRectGetMinY(self.frame)\n    var cp2x : CGFloat = (CGRectGetMaxX(self.frame) + 2 * dragon.position.x)/3\n    var cp2y : CGFloat = CGRectGetMaxY(self.frame)\n\n    //\u6700\u7d42\u76ee\u6a19\u306f\u30d7\u30ec\u30a4\u30e4\u30fc\n    CGPathAddCurveToPoint(path, nil, cp1x, cp1y, cp2x, cp2y, dragon.position.x,     dragon.position.y)\n\n    //\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f4d\u7f6e\u304b\u3089\u753b\u9762\u306e\u7aef\u307e\u3067\u306e\u52d5\u304d                     \n    cp1x = dragon.position.x - (CGRectGetMaxX(self.frame) - dragon.position.x)/3\n    cp1y = CGRectGetMinY(self.frame)\n    cp2x = dragon.position.x - (CGRectGetMaxX(self.frame) - dragon.position.x)*2/3\n    cp2y = CGRectGetMaxY(self.frame)\n\n    CGPathAddCurveToPoint(path, nil, cp1x, cp1y, cp2x, cp2y,    CGRectGetMinX(self.frame), CGRectGetMidY(self.frame))\n\n    //\u4f5c\u3063\u305fCGPath\u3092SKAction\u306b\u30bb\u30c3\u30c8\n    let sequenceLeft = SKAction.followPath(path, asOffset: false,orientToPath: false, duration: 3.0)\n    let remove = SKAction.removeFromParent()\n    let sequence = SKAction.sequence([sequenceLeft, remove])\n\n    // \u6575SKSpriteNode\u306erunAction\u306b\u30bb\u30c3\u30c8 \n    enemy.runAction(sequence)\n}\n\n\u9ec4\u8272\u306e\u6575\u306e\u5834\u5408\u306f\u5f3e\u3092\u30d7\u30ec\u30a4\u30e4\u30fc\u76ee\u6307\u3057\u3066\u6483\u3063\u3066\u304f\u308b\nvar enemyShot1Last:CFTimeInterval! // \u6575\u30b7\u30e7\u30c3\u30c8\u30bf\u30a4\u30df\u30f3\u30b0\n\noverride func update(currentTime: CFTimeInterval) {\n\n  //\u6575\u30b7\u30e7\u30c3\u30c8\n     if(enemyShot1Last == nil){\n         enemyShot1Last = currentTime\n     }\n\n     if(enemyShot1Last+1.5 <= currentTime){\n         if(!self.paused){\n             enemyShot1Fire()\n         }\n         enemyShot1Last = currentTime\n     }\n}\n\n\u6575\u306e\u5f3e\u306f\u9ec4\u8272\u306e\u6575\u304c\u753b\u9762\u4e0a\u306b\u3042\u308b\u5834\u5408\u306e\u307f\u51fa\u529b\u3059\u308b\u3002\nif (enemy.enemyColor == SKColor.yellowColor()){\n    enemy.name = \"yellow\"\n}\n\n\u6575\u306e\u5f3e\u306f\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u76ee\u6307\u3057\u3064\u3064\u3001\u753b\u9762\u306e\u5916\u306b\u307e\u3067\u5411\u304b\u3046\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u51fa\u767a\u70b9\u304b\u3089\u30d7\u30ec\u30a4\u30e4\u30fc\u307e\u3067\u306ex\u8ef8\u3068y\u8ef8\u306e\u8ddd\u96e2\u3068\u3001\u753b\u9762\u306e\u7aef\uff08x\u8ef8\uff1d\uff10\uff09\u304b\u3089\u7aef\u6642\u70b9\u306e\u3067y\u8ef8\u3092\u6c42\u3081\u308b\nif((childNodeWithName(\"yellow\")) != nil){\n    let action = SKAction.animateWithTextures([b1, b2, b3, b4], timePerFrame: 0.5)\n    fire.runAction(SKAction.repeatActionForever(action))\n    fire.size = CGSizeMake(60, 60)\n\n    fire.position.x = enemyYellow.position.x + 5\n    fire.position.y = enemyYellow.position.y\n\n    let dragon: DragonUnit = childNodeWithName(\"dragon\") as! DragonUnit\n\n    let path:CGMutablePath = CGPathCreateMutable()\n\n    // \uff59\u306e\u5ea7\u6a19\u7b97\u51fa\n    let y2 : CGFloat = fire.position.y -\n     (fire.position.x * (fire.position.y -  dragon.position.y))/\n     (fire.position.x - dragon.position.x)\n\n    CGPathMoveToPoint(path, nil, fire.position.x, fire.position.y)\n    CGPathAddLineToPoint(path, nil, 0, y2)\n\n    fire.runAction(sequence)\n\n    self.addChild(fire)\n}\n\n\n![iphonePlay_20150608.gif](https://qiita-image-store.s3.amazonaws.com/0/40693/d7675bf1-da7e-a7d6-7dbd-c4753a37ace0.gif \"iphonePlay_20150608.gif\")\n\n\u6575\u304c\u3046\u306d\u3046\u306d\u52d5\u3044\u3066\u30d7\u30ec\u30a4\u30e4\u30fc\u306b\u5411\u304b\u3063\u3066\u304d\u305f\u308a\u3001\u6575\u306e\u5f3e\u304c\u3053\u3061\u3089\u306b\u5411\u304b\u3063\u3066\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u96e3\u6613\u5ea6\u3092\u4e0a\u3052\u3066\u307f\u308b\u3002\n\n\u9ec4\u7dd1\u306e\u6575\u306f\u51fa\u73fe\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u306e\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f4d\u7f6e\u3092\u76ee\u6307\u3057\u3066\u3001\u3046\u306d\u3046\u306d\u52d5\u3044\u3066\u63a5\u8fd1\u3057\u3066\u304f\u308b\n\n```createEnemy()\nif (enemy.enemyColor == SKColor.greenColor()) {\n\n\t// \u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f4d\u7f6e\n\tlet dragon: DragonUnit = childNodeWithName(\"dragon\") as! DragonUnit\n\t// CGPath \u306e\u5ba3\u8a00\n\tlet path:CGMutablePath = CGPathCreateMutable()\n\tlet y = Int(arc4random() % 450) + 150\n\t// \u59cb\u70b9\u3092\u6c7a\u5b9a\n\tCGPathMoveToPoint(path, nil, CGRectGetMaxX(self.frame), CGFloat(y))\n            \n\tvar cp1x : CGFloat = (2 * CGRectGetMaxX(self.frame) + dragon.position.x)/3\n\tvar cp1y : CGFloat = CGRectGetMinY(self.frame)\n\tvar cp2x : CGFloat = (CGRectGetMaxX(self.frame) + 2 * dragon.position.x)/3\n\tvar cp2y : CGFloat = CGRectGetMaxY(self.frame)\n                        \n\t//\u6700\u7d42\u76ee\u6a19\u306f\u30d7\u30ec\u30a4\u30e4\u30fc\n\tCGPathAddCurveToPoint(path, nil, cp1x, cp1y, cp2x, cp2y, dragon.position.x, \tdragon.position.y)\n\n\t//\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u4f4d\u7f6e\u304b\u3089\u753b\u9762\u306e\u7aef\u307e\u3067\u306e\u52d5\u304d                     \n\tcp1x = dragon.position.x - (CGRectGetMaxX(self.frame) - dragon.position.x)/3\n\tcp1y = CGRectGetMinY(self.frame)\n\tcp2x = dragon.position.x - (CGRectGetMaxX(self.frame) - dragon.position.x)*2/3\n\tcp2y = CGRectGetMaxY(self.frame)\n            \n\tCGPathAddCurveToPoint(path, nil, cp1x, cp1y, cp2x, cp2y, \tCGRectGetMinX(self.frame), CGRectGetMidY(self.frame))\n            \n\t//\u4f5c\u3063\u305fCGPath\u3092SKAction\u306b\u30bb\u30c3\u30c8\n\tlet sequenceLeft = SKAction.followPath(path, asOffset: false,orientToPath: false, duration: 3.0)\n\tlet remove = SKAction.removeFromParent()\n\tlet sequence = SKAction.sequence([sequenceLeft, remove])\n           \n\t// \u6575SKSpriteNode\u306erunAction\u306b\u30bb\u30c3\u30c8 \n\tenemy.runAction(sequence)\n}\n```\n\n\u9ec4\u8272\u306e\u6575\u306e\u5834\u5408\u306f\u5f3e\u3092\u30d7\u30ec\u30a4\u30e4\u30fc\u76ee\u6307\u3057\u3066\u6483\u3063\u3066\u304f\u308b\n\n```\nvar enemyShot1Last:CFTimeInterval! // \u6575\u30b7\u30e7\u30c3\u30c8\u30bf\u30a4\u30df\u30f3\u30b0\n\noverride func update(currentTime: CFTimeInterval) {\n    \n  //\u6575\u30b7\u30e7\u30c3\u30c8\n     if(enemyShot1Last == nil){\n         enemyShot1Last = currentTime\n     }\n        \n     if(enemyShot1Last+1.5 <= currentTime){\n         if(!self.paused){\n             enemyShot1Fire()\n         }\n         enemyShot1Last = currentTime\n     }\n}\n```\n\n\u6575\u306e\u5f3e\u306f\u9ec4\u8272\u306e\u6575\u304c\u753b\u9762\u4e0a\u306b\u3042\u308b\u5834\u5408\u306e\u307f\u51fa\u529b\u3059\u308b\u3002\n\n```createEnemy()\nif (enemy.enemyColor == SKColor.yellowColor()){\n\tenemy.name = \"yellow\"\n}\n```\n\n\u6575\u306e\u5f3e\u306f\u30d7\u30ec\u30a4\u30e4\u30fc\u3092\u76ee\u6307\u3057\u3064\u3064\u3001\u753b\u9762\u306e\u5916\u306b\u307e\u3067\u5411\u304b\u3046\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u51fa\u767a\u70b9\u304b\u3089\u30d7\u30ec\u30a4\u30e4\u30fc\u307e\u3067\u306ex\u8ef8\u3068y\u8ef8\u306e\u8ddd\u96e2\u3068\u3001\u753b\u9762\u306e\u7aef\uff08x\u8ef8\uff1d\uff10\uff09\u304b\u3089\u7aef\u6642\u70b9\u306e\u3067y\u8ef8\u3092\u6c42\u3081\u308b\n\n```enemyShot1Fire\nif((childNodeWithName(\"yellow\")) != nil){\n\tlet action = SKAction.animateWithTextures([b1, b2, b3, b4], timePerFrame: 0.5)\n\tfire.runAction(SKAction.repeatActionForever(action))\n\tfire.size = CGSizeMake(60, 60)\n            \n\tfire.position.x = enemyYellow.position.x + 5\n\tfire.position.y = enemyYellow.position.y\n            \n\tlet dragon: DragonUnit = childNodeWithName(\"dragon\") as! DragonUnit\n            \n\tlet path:CGMutablePath = CGPathCreateMutable()\n    \n    // \uff59\u306e\u5ea7\u6a19\u7b97\u51fa\n\tlet y2 : CGFloat = fire.position.y -\n\t (fire.position.x * (fire.position.y - \tdragon.position.y))/\n\t (fire.position.x - dragon.position.x)\n            \n\tCGPathMoveToPoint(path, nil, fire.position.x, fire.position.y)\n\tCGPathAddLineToPoint(path, nil, 0, y2)\n\t\n\tfire.runAction(sequence)\n            \n    self.addChild(fire)\n}\n```\n", "tags": ["Swift", "SpriteKit"]}