{"context": "\n\n\u6982\u8981\naws \u30a2\u30ab\u30a6\u30f3\u30c8\u9593\u3092\u307e\u305f\u3050s3\u306e\u30d0\u30b1\u30c3\u30c8\u30b3\u30d4\u30fc\u65b9\u6cd5\u3092\u3088\u304f\u5fd8\u308c\u308b\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n\u624b\u9806\n\n\u30b3\u30d4\u30fc\u5143\u30d0\u30b1\u30c3\u30c8\u30dd\u30ea\u30b7\u30fc\n\nPrincipal \u306b\u30b3\u30d4\u30fc\u5148\u306eaws \u30a2\u30ab\u30a6\u30f3\u30c8 ID \u3092\u8ffd\u52a0\n\n\n000000000001\n\n\n\u30b3\u30d4\u30fc\u5143 aws \u30a2\u30ab\u30a6\u30f3\u30c8\n\n\n000000000002\n\n\n\u30b3\u30d4\u30fc\u5148 aws \u30a2\u30ab\u30a6\u30f3\u30c8\n\n\n\n\n\n{\n    \"Version\": \"2012-10-17\",\n    \"Id\": \"Policy1485173315727\",\n    \"Statement\": [\n        {\n            \"Sid\": \"Stmt1485173309916\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"AWS\": [\n                    \"arn:aws:iam::000000000001:root\",\n                    \"arn:aws:iam::000000000002:root\"\n                ]\n            },\n            \"Action\": \"s3:*\",\n            \"Resource\": [\n                \"arn:aws:s3:::org.excample.com\",\n                \"arn:aws:s3:::org.excample.com/*\"\n            ]\n        }\n    ]\n}\n\n\n\u30b3\u30d4\u30fc\u5148EC2\nEC2\u304b\u3089 aws s3 \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u306e\u3067\u6a29\u9650\u7684\u306b\u306f s3:* \u306e iam role\u3092\u5272\u308a\u5f53\u3066\u3066\u304a\u304f\n\ns3 bucket \u30b3\u30d4\u30fc(\u30b3\u30d4\u30fc\u5148\u30a2\u30ab\u30a6\u30f3\u30c8\u306eEC2\u3067)\n\n\u30b3\u30d4\u30fc\u3057\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\n\naws s3 sync --region ap-northeast-1 s3://org.exsample.com/hogehoge s3://new.exsample.com/hogehoge\n\n# \u6982\u8981\naws \u30a2\u30ab\u30a6\u30f3\u30c8\u9593\u3092\u307e\u305f\u3050s3\u306e\u30d0\u30b1\u30c3\u30c8\u30b3\u30d4\u30fc\u65b9\u6cd5\u3092\u3088\u304f\u5fd8\u308c\u308b\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n# \u624b\u9806\n## \u30b3\u30d4\u30fc\u5143\u30d0\u30b1\u30c3\u30c8\u30dd\u30ea\u30b7\u30fc\n- Principal \u306b\u30b3\u30d4\u30fc\u5148\u306eaws \u30a2\u30ab\u30a6\u30f3\u30c8 ID \u3092\u8ffd\u52a0\n  - 000000000001\n     - \u30b3\u30d4\u30fc\u5143 aws \u30a2\u30ab\u30a6\u30f3\u30c8\n  - 000000000002\n     - \u30b3\u30d4\u30fc\u5148 aws \u30a2\u30ab\u30a6\u30f3\u30c8\n\n```json\n{\n\t\"Version\": \"2012-10-17\",\n\t\"Id\": \"Policy1485173315727\",\n\t\"Statement\": [\n\t\t{\n\t\t\t\"Sid\": \"Stmt1485173309916\",\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Principal\": {\n\t\t\t\t\"AWS\": [\n\t\t\t\t\t\"arn:aws:iam::000000000001:root\",\n\t\t\t\t\t\"arn:aws:iam::000000000002:root\"\n\t\t\t\t]\n\t\t\t},\n\t\t\t\"Action\": \"s3:*\",\n\t\t\t\"Resource\": [\n\t\t\t\t\"arn:aws:s3:::org.excample.com\",\n\t\t\t\t\"arn:aws:s3:::org.excample.com/*\"\n\t\t\t]\n\t\t}\n\t]\n}\n```\n\n## \u30b3\u30d4\u30fc\u5148EC2\nEC2\u304b\u3089 aws s3 \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u306e\u3067\u6a29\u9650\u7684\u306b\u306f `s3:*` \u306e iam role\u3092\u5272\u308a\u5f53\u3066\u3066\u304a\u304f\n\n## s3 bucket \u30b3\u30d4\u30fc(\u30b3\u30d4\u30fc\u5148\u30a2\u30ab\u30a6\u30f3\u30c8\u306eEC2\u3067)\n- \u30b3\u30d4\u30fc\u3057\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\n\n```\naws s3 sync --region ap-northeast-1 s3://org.exsample.com/hogehoge s3://new.exsample.com/hogehoge\n```\n", "tags": ["AWS", "S3"]}