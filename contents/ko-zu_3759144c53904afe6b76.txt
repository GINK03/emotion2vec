{"context": " More than 1 year has passed since last update.samba\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306bbtrfs\u3092\u4f7f\u3063\u3066\u3044\u305f\u308a\u3059\u308b\u3068\u3001mount\u304c\u9045\u3044\u4e0a\uff08\u5c11\u306a\u304f\u3068\u3082Fedora\u3067\u306f\uff09\u4f9d\u5b58\u30b5\u30fc\u30d3\u30b9\u304cmount\u5b8c\u4e86\u3092\u5f85\u3063\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001samba\u304c\u5148\u306b\u8d77\u52d5\u3057\u3066\u7a7a\u306e\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8868\u793a\u3057\u3066\u3057\u307e\u3046\u3002\nRequiresMountsFor\u547d\u4ee4\u3067samba\u5074\u3092\u5f85\u305f\u305b\u308b\u3053\u3068\u3067\u56de\u907f\u3067\u304d\u308b\u3002\n\u8a2d\u5b9a\u306f samba\u304c smb.service \u3068\u3057\u3066\u3001\n# /etc/systemd/system/smb.service.d/requiremount.conf\n[Unit]\nRequiresMountsFor=/mountpoint\nRequiresMountsFor=/anothermountpoint\n\n\nservice.d/*.conf\nsystemd\u306f foobar.service \u304c\u5b58\u5728\u3059\u308b\u3068\u304d\u3001\u81ea\u52d5\u3067foobar.service.d/*.conf\u3092\u30de\u30fc\u30b8\u3057\u3066\u304f\u308c\u308b\u3002\n\u30c7\u30a3\u30b9\u30c8\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bsmb.service\u306f\u624b\u3067\u5909\u66f4\u3057\u3066\u3082\u30d1\u30c3\u30b1\u30fc\u30b8\u66f4\u65b0\u3067\u4e0a\u66f8\u304d\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u3061\u3089\u3092\u4f7f\u3046\u3002\n\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3001\n# systemctl daemon-reload\n# systemctl show smb | grep RequiresMount\nRequiresMountsFor=/mountpoint /anothermountpoint\n\nsamba\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306bbtrfs\u3092\u4f7f\u3063\u3066\u3044\u305f\u308a\u3059\u308b\u3068\u3001mount\u304c\u9045\u3044\u4e0a\uff08\u5c11\u306a\u304f\u3068\u3082Fedora\u3067\u306f\uff09\u4f9d\u5b58\u30b5\u30fc\u30d3\u30b9\u304cmount\u5b8c\u4e86\u3092\u5f85\u3063\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001samba\u304c\u5148\u306b\u8d77\u52d5\u3057\u3066\u7a7a\u306e\u30de\u30a6\u30f3\u30c8\u30dd\u30a4\u30f3\u30c8\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8868\u793a\u3057\u3066\u3057\u307e\u3046\u3002\n\n`RequiresMountsFor`\u547d\u4ee4\u3067samba\u5074\u3092\u5f85\u305f\u305b\u308b\u3053\u3068\u3067\u56de\u907f\u3067\u304d\u308b\u3002\n\n\u8a2d\u5b9a\u306f samba\u304c `smb.service` \u3068\u3057\u3066\u3001\n\n```ini\n# /etc/systemd/system/smb.service.d/requiremount.conf\n[Unit]\nRequiresMountsFor=/mountpoint\nRequiresMountsFor=/anothermountpoint\n```\n\n## service.d/*.conf\n\nsystemd\u306f `foobar.service` \u304c\u5b58\u5728\u3059\u308b\u3068\u304d\u3001\u81ea\u52d5\u3067`foobar.service.d/*.conf`\u3092\u30de\u30fc\u30b8\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u30c7\u30a3\u30b9\u30c8\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b`smb.service`\u306f\u624b\u3067\u5909\u66f4\u3057\u3066\u3082\u30d1\u30c3\u30b1\u30fc\u30b8\u66f4\u65b0\u3067\u4e0a\u66f8\u304d\u3055\u308c\u308b\u305f\u3081\u3001\u3053\u3061\u3089\u3092\u4f7f\u3046\u3002\n\n\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3001\n\n```shell\n# systemctl daemon-reload\n# systemctl show smb | grep RequiresMount\nRequiresMountsFor=/mountpoint /anothermountpoint\n```\n\n", "tags": ["systemd"]}