{"context": " More than 1 year has passed since last update.Codeception\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u5c0e\u5165\u306f\u5272\u611b\u3002\nAPI\u3092\u60f3\u5b9a\u3057\u3066\u3001\u30ec\u30b9\u30dd\u30f3\u30b9JSON\u306e\u30c6\u30b9\u30c8\u3002\n\"\u30c6\u30b9\u30c8\u5b9f\u884c\u307e\u3067\"\u3068cest\u5f62\u5f0f\u3001\u521d\u671f\u51e6\u7406\u3001\u5f8c\u51e6\u7406\u306e\u5b9f\u884c\u306b\u3064\u3044\u3066\u306a\u3069\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u5b9f\u884c\u307e\u3067\n\u30c6\u30b9\u30c8\u5b9f\u884c\u307e\u3067\u306e\u624b\u9806\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30b9\u30a4\u30fc\u30c8\u751f\u6210\n.yml\u8a2d\u5b9a\n\u30af\u30e9\u30b9\u751f\u6210\n\u30c6\u30b9\u30c8\u5b9f\u884c\n\n\n\u30b9\u30a4\u30fc\u30c8\u751f\u6210\nphp codecept.phar generate:suite {suite_name}\n\n\u4f8b\n% php codecept.phar generate:suite api\n\n\n\n.yml\u8a2d\u5b9a\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bPhpBrowser, REST, ApiHelper\u3092enable\u306b\u3057\u3066\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u4f8b\nclass_name: ApiTester\nmodules:\n    enabled: [PhpBrowser, REST, ApiHelper]\n    config:\n        PhpBrowser:\n          url: 'http://example.com/'\n        REST:\n           url: 'https://example.com/v1/'\n\n\n\n\u30af\u30e9\u30b9\u751f\u6210(cest\u5f62\u5f0f)\nphp codecept.phar generate:cest {suite_name} {cest_name}\n\n\u4f8b\n% php codecept.phar generate:cest api People\n\n\n\n\u30c6\u30b9\u30c8\u5b9f\u884c\nphp codecept.phar run {suite_name}\n\n\u4f8b\n%php codecept.phar run api\n\n\n\n\u500b\u5225\u306b\u30c7\u30d0\u30c3\u30b0\nphp codecept.phar run --debug {suite_name} {class_name}\n\n\u4f8b\n% php codecept.phar run --debug api PeopleCest.php\n\n\n\ncest\u5f62\u5f0f\n\uff11\u3064\u306e\u30af\u30e9\u30b9\u3068\u3057\u3066\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u66f8\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u751f\u6210\u3055\u308c\u305f\u76f4\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\ntryToTest\u306f\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306b\uff11\u56de\u547c\u3070\u308c\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3001_before,_after\u306f\u5404\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u308b\u5ea6\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n_before\u306f\u521d\u671f\u51e6\u7406\u3001_after\u306f\u5f8c\u51e6\u7406\u3068\u306a\u3063\u3066\u304a\u308asend\u524d\u3068\u5f8c\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\nBasicCest.php\n<?php\nclass BasicCest\n{\n    public function _before(\\AcceptanceTester $I)\n    {\n    }\n\n    public function _after(\\AcceptanceTester $I)\n    {\n    }\n\n    // tests\n    public function tryToTest(\\AcceptanceTester $I) \n    {    \n    }\n}\n?>\n\n\n\n\u629c\u7c8b http://codeception.com/docs/07-AdvancedUsage \n\n\n\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\n\nPeopleCest.php\n    public function post(ApiTester $I)\n    {\n        $I->wantTo('POST Test');\n        $id   = 1;\n        $data = array(\"name\"=> \"taro\", \"age\" => 17);\n\n        $I->sendPOST('people/'.$id, json_encode($data));\n\n        $I->seeResponseContainsJson(array('result'=>0));\n        $I->seeResponseJsonMatchesJsonPath('$.response.result');\n    }\n\n\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff1a'people/1'\n\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\uff1a{\"name\":\"name\",\"age\":17}\n\nPOST\u9001\u4fe1\u3057\u3066\u3001\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u30dc\u30c7\u30a3\uff1a{\"response\":{\"result\":0}}\n\n\u3067\u3042\u308b\u3053\u3068\u3092\u30c6\u30b9\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5171\u901a\u306e\u521d\u671f\u51e6\u7406\u3001\u5f8c\u51e6\u7406\u3092\u5b9a\u7fa9\u3059\u308b\n\n\u5171\u901a\u51e6\u7406\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\nTestCommons.php\n<?php\nclass TestCommons\n{\n    public static function defaultHaveHttpHeader(ApiTester $I)\n    {\n        $I->haveHttpHeader('Content-Type', 'application/x-www-form-urlencoded');\n        $I->haveHttpHeader('DebugFlag', 1);\n    }\n\n    public static function commonSee(ApiTester $I)\n    {\n        $I->seeResponseCodeIs(200);\n        $I->seeResponseIsJson();\n    }\n}\n\n\n\n_bootstrap\u306b\u5b9a\u7fa9\n\n_bootstrap.php\n<?php\nrequire_once __DIR__.'/TestCommons.php';\n\n\n\n\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u3067\u547c\u3073\u51fa\u3059\n    public function _before(ApiTester $I)\n    {\n        TestCommons::defaultHaveHttpHeader($I);\n    }\n\n    public function _after(ApiTester $I)\n    {\n        TestCommons::commonSee($I);\n    }\n\n\u3068\u3063\u3066\u3082\u7c21\u5358\u306b\u30a8\u30f3\u30c9\u30c4\u30fc\u30a8\u30f3\u30c9\u306a\u30c6\u30b9\u30c8\u304c\u884c\u3048\u307e\u3059\u3002\n\n[Codeception](http://codeception.com/)\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u5c0e\u5165\u306f\u5272\u611b\u3002\nAPI\u3092\u60f3\u5b9a\u3057\u3066\u3001\u30ec\u30b9\u30dd\u30f3\u30b9JSON\u306e\u30c6\u30b9\u30c8\u3002\n\"\u30c6\u30b9\u30c8\u5b9f\u884c\u307e\u3067\"\u3068cest\u5f62\u5f0f\u3001\u521d\u671f\u51e6\u7406\u3001\u5f8c\u51e6\u7406\u306e\u5b9f\u884c\u306b\u3064\u3044\u3066\u306a\u3069\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n# \u30c6\u30b9\u30c8\u5b9f\u884c\u307e\u3067\n\n\u30c6\u30b9\u30c8\u5b9f\u884c\u307e\u3067\u306e\u624b\u9806\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n1. \u30b9\u30a4\u30fc\u30c8\u751f\u6210\n* .yml\u8a2d\u5b9a\n* \u30af\u30e9\u30b9\u751f\u6210\n* \u30c6\u30b9\u30c8\u5b9f\u884c\n\n\n## \u30b9\u30a4\u30fc\u30c8\u751f\u6210\nphp codecept.phar generate:suite {suite_name}\n\n``` bash:\u4f8b\n% php codecept.phar generate:suite api\n```\n\n## .yml\u8a2d\u5b9a\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bPhpBrowser, REST, ApiHelper\u3092enable\u306b\u3057\u3066\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8URL\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n``` yaml:\u4f8b\nclass_name: ApiTester\nmodules:\n    enabled: [PhpBrowser, REST, ApiHelper]\n    config:\n        PhpBrowser:\n          url: 'http://example.com/'\n        REST:\n           url: 'https://example.com/v1/'\n```\n\n\n## \u30af\u30e9\u30b9\u751f\u6210(cest\u5f62\u5f0f)\nphp codecept.phar generate:cest {suite_name} {cest_name}\n\n\n``` bash:\u4f8b\n% php codecept.phar generate:cest api People\n``` \n\n\n## \u30c6\u30b9\u30c8\u5b9f\u884c\nphp codecept.phar run {suite_name}\n\n``` bash:\u4f8b\n%php codecept.phar run api\n```\n\n### \u500b\u5225\u306b\u30c7\u30d0\u30c3\u30b0\nphp codecept.phar run --debug {suite_name} {class_name}\n\n``` bash:\u4f8b\n% php codecept.phar run --debug api PeopleCest.php\n```\n\n# cest\u5f62\u5f0f\n\n\uff11\u3064\u306e\u30af\u30e9\u30b9\u3068\u3057\u3066\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u3092\u66f8\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u751f\u6210\u3055\u308c\u305f\u76f4\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\ntryToTest\u306f\u30c6\u30b9\u30c8\u5b9f\u884c\u6642\u306b\uff11\u56de\u547c\u3070\u308c\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3001_before,_after\u306f\u5404\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u308b\u5ea6\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n_before\u306f\u521d\u671f\u51e6\u7406\u3001_after\u306f\u5f8c\u51e6\u7406\u3068\u306a\u3063\u3066\u304a\u308asend\u524d\u3068\u5f8c\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n\n``` php:BasicCest.php\n<?php\nclass BasicCest\n{\n    public function _before(\\AcceptanceTester $I)\n    {\n    }\n\n    public function _after(\\AcceptanceTester $I)\n    {\n    }\n\n    // tests\n    public function tryToTest(\\AcceptanceTester $I) \n    {    \n    }\n}\n?>\n```\n\n> \u629c\u7c8b http://codeception.com/docs/07-AdvancedUsage \n\n## \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\n\n``` php:PeopleCest.php\n    public function post(ApiTester $I)\n    {\n        $I->wantTo('POST Test');\n        $id   = 1;\n        $data = array(\"name\"=> \"taro\", \"age\" => 17);\n\n        $I->sendPOST('people/'.$id, json_encode($data));\n\n        $I->seeResponseContainsJson(array('result'=>0));\n        $I->seeResponseJsonMatchesJsonPath('$.response.result');\n    }\n```\n\n* \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff1a'people/1'\n* \u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\uff1a{\"name\":\"name\",\"age\":17}\n\nPOST\u9001\u4fe1\u3057\u3066\u3001\n\n* \u30ec\u30b9\u30dd\u30f3\u30b9\u30dc\u30c7\u30a3\uff1a{\"response\":{\"result\":0}}\n\n\u3067\u3042\u308b\u3053\u3068\u3092\u30c6\u30b9\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n# \u5171\u901a\u306e\u521d\u671f\u51e6\u7406\u3001\u5f8c\u51e6\u7406\u3092\u5b9a\u7fa9\u3059\u308b\n\n## \u5171\u901a\u51e6\u7406\u30af\u30e9\u30b9\u3092\u4f5c\u308b\n\n``` TestCommons.php\n<?php\nclass TestCommons\n{\n    public static function defaultHaveHttpHeader(ApiTester $I)\n    {\n        $I->haveHttpHeader('Content-Type', 'application/x-www-form-urlencoded');\n        $I->haveHttpHeader('DebugFlag', 1);\n    }\n\n    public static function commonSee(ApiTester $I)\n    {\n        $I->seeResponseCodeIs(200);\n        $I->seeResponseIsJson();\n    }\n}\n```\n\n## _bootstrap\u306b\u5b9a\u7fa9\n\n``` _bootstrap.php\n<?php\nrequire_once __DIR__.'/TestCommons.php';\n```\n\n## \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u3067\u547c\u3073\u51fa\u3059\n\n```\n    public function _before(ApiTester $I)\n    {\n        TestCommons::defaultHaveHttpHeader($I);\n    }\n\n    public function _after(ApiTester $I)\n    {\n        TestCommons::commonSee($I);\n    }\n```\n\n\u3068\u3063\u3066\u3082\u7c21\u5358\u306b\u30a8\u30f3\u30c9\u30c4\u30fc\u30a8\u30f3\u30c9\u306a\u30c6\u30b9\u30c8\u304c\u884c\u3048\u307e\u3059\u3002\n\n\n\n", "tags": ["PHP", "test", "codecept"]}