{"tags": ["Titanium", "Alloy"], "context": " More than 1 year has passed since last update.Android \u3067\u3059\u3068\u3001View \u30d1\u30fc\u30c4\u3092 console.log \u3059\u308b\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u30a4\u30d9\u30f3\u30c8\u304c\u53c2\u7167\u3067\u304d\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u305d\u3053\u305d\u3053\u81ea\u52d5\u5316\u3057\u3084\u3059\u3044\u306e\u3067\u3059\u304c\u3001iOS \u3082\u8996\u91ce\u306b\u3044\u308c\u308b\u3068\u3001\u306f\u3044\u3002\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u3059\u3057\u306d\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u304c\u3093\u3070\u308a\u307e\u3059\u3002\n\u6700\u65b0\u7248\u306e Alloy 1.5.1 \u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u5909\u6570\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3001Alloy \u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u6b63\u898f\u8868\u73fe\u3067\u62bd\u51fa\u3057\u305f\u308a\u3068\u7121\u8336\u3092\u3057\u3066\u3044\u308b\u6240\u304c\u3042\u308b\u306e\u3067\u3001Alloy \u304c\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u305f\u308a\u3059\u308b\u3068\u52d5\u304b\u306a\u304f\u306a\u308b\u6050\u308c\u304c\u3042\u308a\u307e\u3059\u3002\nalloy.jmk \u306f Alloy \u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u524d\u5f8c\u306b\u51e6\u7406\u3092\u30d5\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\u3057\u3001$ alloy generate jmk \u3068\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002projectDir/app/alloy.jmk \u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30da\u3057\u3066\u304f\u3060\u3055\u3044\u3002\ntask(\"pre:compile\", function(event,logger) {\n});\n\ntask(\"post:compile\",function(event,logger){\n    var fs = require('fs'),\n        path = require('path'),\n        wrench = require('wrench'),\n        _ = require('alloy/Alloy/lib/alloy/underscore'),\n        platforms = require('alloy/platforms/index'),\n        CONST = require('alloy/Alloy/common/constants');\n\n    var titaniumFolder = platforms[event.alloyConfig.platform].titaniumFolder,\n        controllerFolder = path.join(event.dir.resources, titaniumFolder, CONST.ALLOY_RUNTIME_DIR, CONST.DIR.CONTROLLER),\n        files = wrench.readdirSyncRecursive(controllerFolder),\n        js,\n        controller,\n        matches,\n        events = {};\n\n    _.each(files, function(_file){\n        if (_file === 'BaseController.js') {\n            return;\n        }\n\n        if (_file.match(/\\.js$/)) {\n            js = fs.readFileSync(path.join(controllerFolder, _file), 'utf-8');\n            controller = _file.replace(/\\.js$/, '')\n\n            if (matches = js.match(/(.+?)\\s\\?\\s\\$\\.__views\\.(.+?)\\.addEventListener\\([\"'](.+?)[\"'],\\s(.+?)\\)\\s:\\s__defers\\[[\"'](.+?)[\"']\\]\\s=\\strue;/ig)) {\n                _.each(matches, function(_event){\n                    var tmp = _event.split(/\\s[?:=]\\s/),\n                        handler = tmp[0].replace(/\\s/ig, ''),\n                        type = tmp[2].split('!')[1],\n                        id = tmp[1].split('.')[2];\n\n                    if (!_.has(events, controller)) {\n                        events[controller] = {};\n                    }\n\n                    if (!_.has(events[controller], id)) {\n                        events[controller][id] = [];\n                    }\n\n                    events[controller][id].push({\n                        type: type,\n                        handler: handler\n                    });\n                });\n            }\n        }\n    });\n\n    var code = 'var Alloy = require(\\'alloy\\'),\\n\\tBackbone = Alloy.Backbone,\\n\\t_ = Alloy._;\\n\\n' +\n        'var map = ' + JSON.stringify(events) + ';\\n\\n' +\n        'exports.get = function(_controller, _id){\\n' +\n        '\\t_id = _id || null;\\n' +\n        '\\n' +\n        '\\tif (!_.has(map, _controller)) {\\n' +\n        '\\t\\treturn null;\\n' +\n        '\\t}\\n' +\n        '\\n' +\n        '\\tif (_id) {\\n' +\n        '\\t\\tif (_.has(map[_controller], _id)) {\\n' +\n        '\\t\\t\\treturn map[_controller][_id]\\n' +\n        '\\t\\t} else {\\n' +\n        '\\t\\t\\treturn null;\\n' +\n        '\\t\\t}\\n' +\n        '\\t} else {\\n' +\n        '\\t\\treturn map[_controller];\\n' +\n        '\\t}\\n' +\n        '};';\n\n    fs.writeFileSync(path.join(event.dir.resources, titaniumFolder, 'EventMapper.js'), code);\n});\n\n\u4eca\u56de\u306f Alloy \u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5f8c\u306e\u30b3\u30fc\u30c9\u3092\u89e6\u308b\u306e\u3067\u3001post:compile \u3078\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n\nwrench \u3067\u5168\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u3055\u3089\u3044\u307e\u3059\uff08BaseController.js \u306f\u9664\u304f\uff09\n\u6b63\u898f\u8868\u73fe\u3067 addEventListener \u3057\u3066\u3044\u308b\u7b87\u6240\u3092\u629c\u304d\u51fa\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u6ce8\u610f\u3057\u3066\u3082\u3089\u3044\u305f\u3044\u306e\u304c\u3001addEventListener \u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u3092\u6b63\u898f\u5316\u3057\u305f\u3044\u306e\u3067\u3001View \u3067 onClick \u7b49\u3001onHogehoge \u3057\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u3060\u3051\u306b\u9650\u5b9a\u3057\u307e\u3059\uff08\u81ea\u5206\u3067 addEventListener \u3057\u3066\u3044\u308b\u306a\u3089\u81ea\u5206\u3067 removeEventListener \u3057\u3066\u304f\u3060\u3055\u3044\u306d\uff09\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\u3001View \u306e ID\u3001\u30cf\u30f3\u30c9\u30e9\u540d\u3067 JSON \u3092\u4f5c\u308a\u307e\u3059\u3002View \u306b ID \u3092\u3075\u3063\u3066\u3044\u306a\u3044\uff1f\u5927\u4e08\u592b\u3067\u3059\u3002Alloy \u304c\u52dd\u624b\u306b\u3075\u3063\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002Resources \u306e\u4e2d\u306e\u30b3\u30fc\u30c9\u3092\u898b\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001__alloyIdXX \u306a\u611f\u3058\u3067\u3059\nResources/[platform]/EventMapper.js \u3092\u66f8\u304d\u51fa\u3057\u307e\u3059\n\n\u3053\u308c\u3067\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u4e2d\u3067 var EventMappper = require('EventMapper'); \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u3067\u306f\u5b9f\u969b\u306b\u753b\u9762\u3092\u9589\u3058\u305f\u6642\u306b\u30a4\u30d9\u30f3\u30c8\u3092\u5916\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n<Alloy>\n  <Window onClose=\"doClose\">\n    <Label onClick=\"doClick\">\u3053\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\u3068\u3053\u306e\u30e9\u30d9\u30eb\u306e\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u304c\u52dd\u624b\u306b removeEventListener \u3055\u308c\u308b\u3088\uff01</Label>\n  </Window>\n</Alloy>\n\nvar EventMapper = require('EventMapper');\n\nfunction doClick() {\n  alert('\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30af\u30ed\u30fc\u30ba\u30a4\u30d9\u30f3\u30c8\u3082\u306d\uff01');\n}\n\nfunction doClose() {\n  var events = EventMapper.get($.__controllerPath)\n\n  _.each(events, function(_events, _id){\n    var _view = $.getView(_id);\n\n    _.each(_events, function(_event){\n      _view.removeEventListener(_event.type, eval(_event.handler));\n    });\n  });\n}\n\nEventMapper.get \u306f\u7b2c1\u5f15\u6570\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\uff08.js \u304c\u7121\u3044\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u3059\u306d\uff09\u3001\u7b2c2\u5f15\u6570\u306b View \u306e ID \u3067\u30a4\u30d9\u30f3\u30c8\u306e\u30bf\u30a4\u30d7\u3001\u30cf\u30f3\u30c9\u30e9\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7b2c2\u5f15\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3059\u3002\n\u8fd4\u5374\u5024\u306f JSON \u3067\u3059\u3002\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n{\n  \"index\": { // \u3053\u308c\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\n    \"label\": [ // \u3053\u308c View ID\n      {\n        \"type\": \"click\",\n        \"handler\": \"doClick\"\n      }\n    ]\n  }\n}\n\n\u4eca\u56de\u306f\u306a\u308b\u3079\u304f\u697d\u3057\u305f\u3044\u306e\u3067\u3001\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30af\u30ed\u30fc\u30ba\u30a4\u30d9\u30f3\u30c8\u3092\u30b3\u30d4\u30da\u3067\u6e08\u307e\u305b\u305f\u3044\u306e\u3067\u3059\u3002\u81ea\u5206\u81ea\u8eab\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\u3092\u6bce\u56de\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\uff1f\u3044\u3084\u3044\u3084\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u5909\u6570\u306b\u3042\u308b\u306e\u3067\u3059\u3088\u3001$.__controllerPath \u304c\u3002\u3053\u308c\u3067\u3053\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u5168\u3066\u53d6\u5f97\u3057\u307e\u3057\u3087\u3046\u3002\u7b2c2\u5f15\u6570\u3092\u7701\u7565\u3059\u308c\u3070 View ID \u3082\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\u3042\u3068\u306f _.each \u3067\u56de\u3057\u306a\u304c\u3089 removeEventListener \u3059\u308b\u3060\u3051\u3067\u3059\u3002eval \u3067\u3002\nAndroid \u3067\u3059\u3068\u3001View \u30d1\u30fc\u30c4\u3092 ```console.log``` \u3059\u308b\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u3067\u30a4\u30d9\u30f3\u30c8\u304c\u53c2\u7167\u3067\u304d\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u305d\u3053\u305d\u3053\u81ea\u52d5\u5316\u3057\u3084\u3059\u3044\u306e\u3067\u3059\u304c\u3001iOS \u3082\u8996\u91ce\u306b\u3044\u308c\u308b\u3068\u3001\u306f\u3044\u3002\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3067\u3059\u3057\u306d\u3002\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u304c\u3093\u3070\u308a\u307e\u3059\u3002\n\n\u6700\u65b0\u7248\u306e Alloy 1.5.1 \u3067\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u5909\u6570\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u308a\u3001Alloy \u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u6b63\u898f\u8868\u73fe\u3067\u62bd\u51fa\u3057\u305f\u308a\u3068\u7121\u8336\u3092\u3057\u3066\u3044\u308b\u6240\u304c\u3042\u308b\u306e\u3067\u3001Alloy \u304c\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u305f\u308a\u3059\u308b\u3068\u52d5\u304b\u306a\u304f\u306a\u308b\u6050\u308c\u304c\u3042\u308a\u307e\u3059\u3002\n\nalloy.jmk \u306f Alloy \u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u524d\u5f8c\u306b\u51e6\u7406\u3092\u30d5\u30c3\u30af\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a9\u30eb\u30c0\u3078\u79fb\u52d5\u3057\u3001```$ alloy generate jmk``` \u3068\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002projectDir/app/alloy.jmk \u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30da\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```js\ntask(\"pre:compile\", function(event,logger) {\n});\n\ntask(\"post:compile\",function(event,logger){\n\tvar fs = require('fs'),\n\t\tpath = require('path'),\n\t\twrench = require('wrench'),\n\t\t_ = require('alloy/Alloy/lib/alloy/underscore'),\n\t\tplatforms = require('alloy/platforms/index'),\n\t\tCONST = require('alloy/Alloy/common/constants');\n\n\tvar titaniumFolder = platforms[event.alloyConfig.platform].titaniumFolder,\n\t\tcontrollerFolder = path.join(event.dir.resources, titaniumFolder, CONST.ALLOY_RUNTIME_DIR, CONST.DIR.CONTROLLER),\n\t\tfiles = wrench.readdirSyncRecursive(controllerFolder),\n\t\tjs,\n\t\tcontroller,\n\t\tmatches,\n\t\tevents = {};\n\n\t_.each(files, function(_file){\n\t\tif (_file === 'BaseController.js') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (_file.match(/\\.js$/)) {\n\t\t\tjs = fs.readFileSync(path.join(controllerFolder, _file), 'utf-8');\n\t\t\tcontroller = _file.replace(/\\.js$/, '')\n\n\t\t\tif (matches = js.match(/(.+?)\\s\\?\\s\\$\\.__views\\.(.+?)\\.addEventListener\\([\"'](.+?)[\"'],\\s(.+?)\\)\\s:\\s__defers\\[[\"'](.+?)[\"']\\]\\s=\\strue;/ig)) {\n\t\t\t\t_.each(matches, function(_event){\n\t\t\t\t\tvar tmp = _event.split(/\\s[?:=]\\s/),\n\t\t\t\t\t\thandler = tmp[0].replace(/\\s/ig, ''),\n\t\t\t\t\t\ttype = tmp[2].split('!')[1],\n\t\t\t\t\t\tid = tmp[1].split('.')[2];\n\n\t\t\t\t\tif (!_.has(events, controller)) {\n\t\t\t\t\t\tevents[controller] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!_.has(events[controller], id)) {\n\t\t\t\t\t\tevents[controller][id] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tevents[controller][id].push({\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\thandler: handler\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tvar code = 'var Alloy = require(\\'alloy\\'),\\n\\tBackbone = Alloy.Backbone,\\n\\t_ = Alloy._;\\n\\n' +\n\t\t'var map = ' + JSON.stringify(events) + ';\\n\\n' +\n\t\t'exports.get = function(_controller, _id){\\n' +\n\t\t'\\t_id = _id || null;\\n' +\n\t\t'\\n' +\n\t\t'\\tif (!_.has(map, _controller)) {\\n' +\n\t\t'\\t\\treturn null;\\n' +\n\t\t'\\t}\\n' +\n\t\t'\\n' +\n\t\t'\\tif (_id) {\\n' +\n\t\t'\\t\\tif (_.has(map[_controller], _id)) {\\n' +\n\t\t'\\t\\t\\treturn map[_controller][_id]\\n' +\n\t\t'\\t\\t} else {\\n' +\n\t\t'\\t\\t\\treturn null;\\n' +\n\t\t'\\t\\t}\\n' +\n\t\t'\\t} else {\\n' +\n\t\t'\\t\\treturn map[_controller];\\n' +\n\t\t'\\t}\\n' +\n\t\t'};';\n\n\tfs.writeFileSync(path.join(event.dir.resources, titaniumFolder, 'EventMapper.js'), code);\n});\n```\n\n\u4eca\u56de\u306f Alloy \u304c\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u5f8c\u306e\u30b3\u30fc\u30c9\u3092\u89e6\u308b\u306e\u3067\u3001```post:compile``` \u3078\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n1. [wrench](https://www.npmjs.org/package/wrench) \u3067\u5168\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u3055\u3089\u3044\u307e\u3059\uff08BaseController.js \u306f\u9664\u304f\uff09\n2. \u6b63\u898f\u8868\u73fe\u3067 ```addEventListener``` \u3057\u3066\u3044\u308b\u7b87\u6240\u3092\u629c\u304d\u51fa\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u6ce8\u610f\u3057\u3066\u3082\u3089\u3044\u305f\u3044\u306e\u304c\u3001```addEventListener``` \u3057\u3066\u3044\u308b\u30b3\u30fc\u30c9\u3092\u6b63\u898f\u5316\u3057\u305f\u3044\u306e\u3067\u3001View \u3067 ```onClick``` \u7b49\u3001```onHogehoge``` \u3057\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u3060\u3051\u306b\u9650\u5b9a\u3057\u307e\u3059\uff08\u81ea\u5206\u3067 ```addEventListener``` \u3057\u3066\u3044\u308b\u306a\u3089\u81ea\u5206\u3067 ```removeEventListener``` \u3057\u3066\u304f\u3060\u3055\u3044\u306d\uff09\n3. \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\u3001View \u306e ID\u3001\u30cf\u30f3\u30c9\u30e9\u540d\u3067 JSON \u3092\u4f5c\u308a\u307e\u3059\u3002View \u306b ID \u3092\u3075\u3063\u3066\u3044\u306a\u3044\uff1f\u5927\u4e08\u592b\u3067\u3059\u3002Alloy \u304c\u52dd\u624b\u306b\u3075\u3063\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002Resources \u306e\u4e2d\u306e\u30b3\u30fc\u30c9\u3092\u898b\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001```__alloyIdXX``` \u306a\u611f\u3058\u3067\u3059\n4. Resources/[platform]/EventMapper.js \u3092\u66f8\u304d\u51fa\u3057\u307e\u3059\n\n\u3053\u308c\u3067\u3001\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u4e2d\u3067 ```var EventMappper = require('EventMapper');``` \u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u3067\u306f\u5b9f\u969b\u306b\u753b\u9762\u3092\u9589\u3058\u305f\u6642\u306b\u30a4\u30d9\u30f3\u30c8\u3092\u5916\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```xml\n<Alloy>\n  <Window onClose=\"doClose\">\n    <Label onClick=\"doClick\">\u3053\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u9589\u3058\u308b\u3068\u3053\u306e\u30e9\u30d9\u30eb\u306e\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u304c\u52dd\u624b\u306b removeEventListener \u3055\u308c\u308b\u3088\uff01</Label>\n  </Window>\n</Alloy>\n```\n\n```js\nvar EventMapper = require('EventMapper');\n\nfunction doClick() {\n  alert('\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30af\u30ed\u30fc\u30ba\u30a4\u30d9\u30f3\u30c8\u3082\u306d\uff01');\n}\n\nfunction doClose() {\n  var events = EventMapper.get($.__controllerPath)\n\n  _.each(events, function(_events, _id){\n    var _view = $.getView(_id);\n\n    _.each(_events, function(_event){\n      _view.removeEventListener(_event.type, eval(_event.handler));\n    });\n  });\n}\n```\n\n```EventMapper.get``` \u306f\u7b2c1\u5f15\u6570\u306b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\uff08.js \u304c\u7121\u3044\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u3059\u306d\uff09\u3001\u7b2c2\u5f15\u6570\u306b View \u306e ID \u3067\u30a4\u30d9\u30f3\u30c8\u306e\u30bf\u30a4\u30d7\u3001\u30cf\u30f3\u30c9\u30e9\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u7b2c2\u5f15\u6570\u306f\u7701\u7565\u53ef\u80fd\u3067\u3059\u3002\n\n\u8fd4\u5374\u5024\u306f JSON \u3067\u3059\u3002\u4e0b\u8a18\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```json\n{\n  \"index\": { // \u3053\u308c\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\n    \"label\": [ // \u3053\u308c View ID\n      {\n        \"type\": \"click\",\n        \"handler\": \"doClick\"\n      }\n    ]\n  }\n}\n```\n\n\u4eca\u56de\u306f\u306a\u308b\u3079\u304f\u697d\u3057\u305f\u3044\u306e\u3067\u3001\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30af\u30ed\u30fc\u30ba\u30a4\u30d9\u30f3\u30c8\u3092\u30b3\u30d4\u30da\u3067\u6e08\u307e\u305b\u305f\u3044\u306e\u3067\u3059\u3002\u81ea\u5206\u81ea\u8eab\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u540d\u3092\u6bce\u56de\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\uff1f\u3044\u3084\u3044\u3084\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u5909\u6570\u306b\u3042\u308b\u306e\u3067\u3059\u3088\u3001```$.__controllerPath``` \u304c\u3002\u3053\u308c\u3067\u3053\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u5168\u3066\u53d6\u5f97\u3057\u307e\u3057\u3087\u3046\u3002\u7b2c2\u5f15\u6570\u3092\u7701\u7565\u3059\u308c\u3070 View ID \u3082\u610f\u8b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u3042\u3068\u306f ```_.each``` \u3067\u56de\u3057\u306a\u304c\u3089 ```removeEventListener``` \u3059\u308b\u3060\u3051\u3067\u3059\u3002**eval** \u3067\u3002\n"}