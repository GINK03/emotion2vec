{"tags": ["python3", "Python", "tweepy"], "context": "\n\n\u306a\u306b\u3053\u308c?\nPython\u3067Tweepy\u3092\u4f7f\u3063\u3066\u3001\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3092\u76e3\u8996\u3057\u3066\u524a\u9664\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u3060\u3051\u3092\u6a19\u6e96\u51fa\u529b\u3059\u308b\u3060\u3051\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\n\n\u30cd\u30bf\u5143\n\nTwitter\u3001\u653f\u6cbb\u5bb6\u304c\u524a\u9664\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30b5\u30a4\u30c8\u300cPolitwoops\u300d\u5fa9\u6d3b\u3067\u5408\u610f\n\nPolitwoops (\u653f\u6cbb\u5bb6\u304c\u524a\u9664\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30b5\u30a4\u30c8)\n\n\n\u30b3\u30fc\u30c9\nPython3\u3067Tweepy\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059.pip install tweepy\u3059\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059.\nCONSUMER_KEY\u3068\u304b\u306f\u3054\u81ea\u8eab\u3067\u7528\u610f\u3057\u305f\u3082\u306e\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044.\n\ndelcheck.py\n\n# coding: UTF-8\nimport tweepy\nfrom datetime import timedelta\nimport json\n\nCONSUMER_KEY = \"\"\nCONSUMER_SECRET = \"\"\nACCESS_TOKEN = \"\"\nACCESS_TOKEN_SECRET = \"\"\n\nmy_db = {}\n\ndef get_oauth():\n    auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)\n    auth.set_access_token(ACCESS_TOKEN, ACCESS_TOKEN_SECRET)\n    return auth\n\ndef pprint(dict_data):\n    for k, v in dict_data.items():\n        print(k, v)\n\nclass Listener(tweepy.StreamListener):\n    def on_error(self, status_code):\n        print(\"Error: \" + str(status_code))\n\n    def on_data(self, data):\n        obj = json.loads(data, encoding=\"UFT-8\")\n        if \"delete\" in obj:\n            tweet_id = obj.get(\"delete\").get(\"status\").get(\"id\")\n            print(\"deleted!\")\n\n            if tweet_id in my_db:\n                print(my_db[tweet_id])\n            else:\n                print(\"-\")\n\n        elif \"text\" in obj:\n            my_db[obj.get(\"id\")] = obj.get(\"user\").get(\"screen_name\") + \": \" + obj.get(\"text\")\n\n    def on_timeout(self):\n        print(\"Timeout...\")\n\nif __name__ == \"__main__\":\n    auth = get_oauth()\n    listener = Listener()\n    stream = tweepy.Stream(auth, listener)\n    stream.userstream()\n\n\n\n\u86c7\u8db3\n\u524a\u9664\u3068\u304b\u306e\u901a\u77e5\u306fon_data\u306b\u6d41\u308c\u3066\u304d\u307e\u3059.\u30e6\u30fc\u30b6\u306e\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u306e\u30c7\u30fc\u30bf\u3092\u8d77\u52d5\u6642\u304b\u3089\u4fdd\u5b58\u3057\u3066\u304a\u304d,\u524a\u9664\u3055\u308c\u305f\u3082\u306e\u306b\u4fdd\u5b58\u3057\u3066\u3042\u3063\u305f\u3082\u306e\u304c\u3042\u3063\u305f\u3089\u6a19\u6e96\u51fa\u529b\u3057\u307e\u3059.\u3061\u3083\u3093\u3068\u3057\u305fDB\u3092\u7528\u3044\u305a\u306bmy_db(\u8f9e\u66f8\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u306b\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u304b\u3089\u306e\u30c7\u30fc\u30bf(\u30c4\u30a4\u30fc\u30c8\u672c\u6587\u306e\u307f)\u3092\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059.\n1\u65e5\u52d5\u304b\u3057\u3066\u307f\u3066\u6c17\u3065\u3044\u305f\u3053\u3068\u306f,\u308f\u308a\u3068\u307f\u3093\u306a\u30c4\u30a4\u30fc\u30c8\u6d88\u3057\u3066\u308b\u3053\u3068.\n# \u306a\u306b\u3053\u308c?\nPython\u3067Tweepy\u3092\u4f7f\u3063\u3066\u3001\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u3092\u76e3\u8996\u3057\u3066\u524a\u9664\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u3060\u3051\u3092\u6a19\u6e96\u51fa\u529b\u3059\u308b\u3060\u3051\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\n\n# \u30cd\u30bf\u5143\n- [Twitter\u3001\u653f\u6cbb\u5bb6\u304c\u524a\u9664\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30b5\u30a4\u30c8\u300cPolitwoops\u300d\u5fa9\u6d3b\u3067\u5408\u610f](https://japan.cnet.com/article/35075691/)\n- [Politwoops](https://projects.propublica.org/politwoops/) (\u653f\u6cbb\u5bb6\u304c\u524a\u9664\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u306e\u30a2\u30fc\u30ab\u30a4\u30d6\u30b5\u30a4\u30c8)\n\n# \u30b3\u30fc\u30c9\nPython3\u3067Tweepy\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059.```pip install tweepy```\u3059\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059.\nCONSUMER_KEY\u3068\u304b\u306f\u3054\u81ea\u8eab\u3067\u7528\u610f\u3057\u305f\u3082\u306e\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044.\n\n```python:delcheck.py\n\n# coding: UTF-8\nimport tweepy\nfrom datetime import timedelta\nimport json\n\nCONSUMER_KEY = \"\"\nCONSUMER_SECRET = \"\"\nACCESS_TOKEN = \"\"\nACCESS_TOKEN_SECRET = \"\"\n\nmy_db = {}\n\ndef get_oauth():\n    auth = tweepy.OAuthHandler(CONSUMER_KEY, CONSUMER_SECRET)\n    auth.set_access_token(ACCESS_TOKEN, ACCESS_TOKEN_SECRET)\n    return auth\n\ndef pprint(dict_data):\n    for k, v in dict_data.items():\n        print(k, v)\n\nclass Listener(tweepy.StreamListener):\n    def on_error(self, status_code):\n        print(\"Error: \" + str(status_code))\n\n    def on_data(self, data):\n        obj = json.loads(data, encoding=\"UFT-8\")\n        if \"delete\" in obj:\n            tweet_id = obj.get(\"delete\").get(\"status\").get(\"id\")\n            print(\"deleted!\")\n\n            if tweet_id in my_db:\n                print(my_db[tweet_id])\n            else:\n                print(\"-\")\n\n        elif \"text\" in obj:\n            my_db[obj.get(\"id\")] = obj.get(\"user\").get(\"screen_name\") + \": \" + obj.get(\"text\")\n\n    def on_timeout(self):\n        print(\"Timeout...\")\n\nif __name__ == \"__main__\":\n    auth = get_oauth()\n    listener = Listener()\n    stream = tweepy.Stream(auth, listener)\n    stream.userstream()\n```\n\n\n# \u86c7\u8db3\n\u524a\u9664\u3068\u304b\u306e\u901a\u77e5\u306fon_data\u306b\u6d41\u308c\u3066\u304d\u307e\u3059.\u30e6\u30fc\u30b6\u306e\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u306e\u30c7\u30fc\u30bf\u3092\u8d77\u52d5\u6642\u304b\u3089\u4fdd\u5b58\u3057\u3066\u304a\u304d,\u524a\u9664\u3055\u308c\u305f\u3082\u306e\u306b\u4fdd\u5b58\u3057\u3066\u3042\u3063\u305f\u3082\u306e\u304c\u3042\u3063\u305f\u3089\u6a19\u6e96\u51fa\u529b\u3057\u307e\u3059.\u3061\u3083\u3093\u3068\u3057\u305fDB\u3092\u7528\u3044\u305a\u306bmy_db(\u8f9e\u66f8\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u306b\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3\u304b\u3089\u306e\u30c7\u30fc\u30bf(\u30c4\u30a4\u30fc\u30c8\u672c\u6587\u306e\u307f)\u3092\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059.\n\n1\u65e5\u52d5\u304b\u3057\u3066\u307f\u3066\u6c17\u3065\u3044\u305f\u3053\u3068\u306f,\u308f\u308a\u3068\u307f\u3093\u306a\u30c4\u30a4\u30fc\u30c8\u6d88\u3057\u3066\u308b\u3053\u3068.\n"}