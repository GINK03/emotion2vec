{"tags": ["EC2", "CloudFormation", "amazonEC2"], "context": "\u4eca\u56de\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u8003\u616e\u3057\u3066\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u69cb\u6210\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067AWS\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308bCloudFormation\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u30fbAWS\u3078\u30b5\u30fc\u30d0\u30fc\u79fb\u884c\u3092\u884c\u3046\n\u30fb\u305d\u308c\u306b\u4f34\u3044\u30b5\u30fc\u30d0\u30fc\u6570\u3092\u500d\u4ee5\u4e0a\u306b\u5897\u3084\u3059\n\u30fb\u305d\u308c\u3089\u3092\u500b\u5225\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\nCloudFormation\u3068\u306f\nAWS\u4e0a\u306e\u69cb\u6210\u3092\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3057\u3001\u518d\u5229\u7528\u3057\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002\u3064\u307e\u308a\u7c21\u5358\u306b\u8a00\u3046\u3068\u300c\u81ea\u52d5\u7684\u306bAWS\u4e0a\u3067\u4f5c\u308a\u305f\u3044\u3082\u306e\u3092\u4f5c\u3063\u3066\u304f\u308c\u308b\u300dAWS\u304c\u7528\u610f\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3001\u81ea\u5206\u304c\u4f5c\u308a\u305f\u3044\u74b0\u5883\u3092\u5b9a\u7fa9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305d\u306e\u5b9a\u7fa9\u66f8\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u52d5\u3067\u74b0\u5883\u3092\u4f5c\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\u307e\u305f\u65b0\u898f\u4f5c\u6210\u306e\u307f\u3067\u306a\u304f\u66f4\u65b0\u6a5f\u80fd\u3082\u3042\u308a\u3001\u4f5c\u6210\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30bd\u30fc\u30b9\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u74b0\u5883\u306e\u69cb\u6210\u306a\u3069\u3092\u81ea\u7531\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3069\u3053\u3092\u3069\u3046\u5909\u66f4\u3057\u305f\u306e\u304b\u3068\u3044\u3063\u305f\u5909\u66f4\u5c65\u6b74\u3082\u4fdd\u6301\u3057\u3066\u3044\u308b\u306e\u3067\u8ffd\u8de1\u6027\u3082\u3042\u308a\u307e\u3059\u3002\n\n\u7528\u9014\n\u4e3b\u306b\u4ee5\u4e0b2\u70b9\u3002\n\u30fb\u65b0\u898f\u74b0\u5883\u306e\u69cb\u7bc9\u6642\u306e\u5229\u7528\n\u30fb\u69cb\u7bc9\u6e08\u307f\u306e\u74b0\u5883\u3092\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3057\u3066\u518d\u5229\u7528\n\u3044\u305a\u308c\u306b\u305b\u3088\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\u30fb\u30b5\u30fc\u30d0\u30fc\u95a2\u9023\u3068\u5927\u304d\u304f\uff12\u3064\u306b\u5206\u3051\u3066\u69cb\u7bc9\u3057\u3066\u3044\u304f\u306e\u304c\u500b\u4eba\u7684\u306b\u306f\u826f\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u5148\u307b\u3069\u3042\u3052\u305f\uff12\u70b9\u3067\u3059\u304c\u3001\u5f8c\u8005\u306e\u307b\u3046\u304c\u82e5\u5e72\u5384\u4ecb\u306a\u611f\u3058\u304c\u500b\u4eba\u7684\u306b\u306f\u3057\u3066\u3044\u308b\u306e\u3067\u4eca\u56de\u306f\u524d\u8005\u306e\u307b\u3046\u3067\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\uff0a\u5f8c\u8005\u306e\u307b\u3046\u306fCloudFormer\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u3092\u30b3\u30fc\u30c9\u5316\u3057\u307e\u3059\u3002\u5b9f\u969b\u884c\u3046\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u30b3\u30fc\u30c9\u5316\u3055\u308c\u305f\u3082\u306e\u306f\u4f7f\u3044\u56de\u3059\u3068\u3044\u3063\u305f\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u9069\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u968f\u6642\u5909\u66f4\u3057\u3066\u3044\u304f\u3068\u3044\u3063\u305f\u5bfe\u5fdc\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\n\n\u5b9f\u969b\u306b\u3084\u3063\u3066\u307f\u308b(\u65e2\u5b58\u306eVPC\u3068\u30b5\u30d6\u30cd\u30c3\u30c8\u306e\u4e2d\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3066\u307f\u308b)\n\u89e6\u3063\u3066\u307f\u308b\u5206\u306b\u306f\u5168\u304f\u3082\u3063\u3066\u96e3\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u6642\u70b9\u3067\u306f\u6599\u91d1\u306f\u304b\u304b\u308a\u307e\u305b\u3093\u3002\u6700\u5f8ccreate\u3059\u308b\u6642\u304b\u3089\u6599\u91d1\u304c\u767a\u751f\u3057\u307e\u3059(\u30da\u30fc\u30b8\u4e0b\u90e8\u306b\u8a18\u8ff0\u3042\u308a)\n1.CloudFormation\u306e\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\n2.\u521d\u3081\u3066\u306e\u5834\u5408\u306f\u300cDesign template\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nGUI\u306a\u306e\u3067\u3001\u6a2a\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3067\u69cb\u6210\u56f3\u3092\u4f5c\u6210\u3057\u3066\u3082\u53ef\u3067\u3059\u304c\u3001\u7d50\u69cb\u3044\u308d\u3044\u308d\u64cd\u4f5c\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u50d5\u306f\u4e0b\u56f3\u306e\u8d64\u67a0\u306e\u3088\u3046\u306b\u300cTemplate\u300d\u3068\u3044\u3046\u3068\u3053\u308d\u3092\u3044\u3058\u3063\u3066\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u300cTemplate\u300d\u306b\u5b9f\u969b\u306b\u66f8\u3044\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Description\": \"AWS CloudFormation Sample Template VPC_EC2_Instance_with_EIP_and_Security_Group: Sample template showing how to create an instance with an Elastic IP address and a security group in an existing VPC. It assumes you have already created a VPC. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.\",\n  \"Parameters\": {\n    \"KeyName\": {\n      \"Description\": \"Name of and existing EC2 KeyPair to enable SSH access to the instance\",\n      \"Type\": \"String\"\n    },\n    \"VpcId\": {\n      \"Type\": \"String\",\n      \"Description\": \"VpcId of your existing Virtual Private Cloud (VPC)\"\n    },\n    \"SubnetId\": {\n      \"Type\": \"String\",\n      \"Description\": \"SubnetId of an existing subnet in your Virtual Private Cloud (VPC)\"\n    },\n    \"SSHLocation\": {\n      \"Description\": \" The IP address range that can be used to SSH to the EC2 instances\",\n      \"Type\": \"String\",\n      \"MinLength\": \"9\",\n      \"MaxLength\": \"18\",\n      \"Default\": \"0.0.0.0/0\",\n      \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\n      \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\"\n    }\n  },\n  \"Resources\": {\n    \"IPAddress\": {\n      \"Type\": \"AWS::EC2::EIP\",\n      \"Properties\": {\n        \"Domain\": \"vpc\",\n        \"InstanceId\": {\n          \"Ref\": \"Ec2Instance\"\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"1b5c3844-2834-4ed8-a519-377ae14ab89e\"\n        }\n      }\n    },\n    \"InstanceSecurityGroup\": {\n      \"Type\": \"AWS::EC2::SecurityGroup\",\n      \"Properties\": {\n        \"VpcId\": {\n          \"Ref\": \"VpcId\"\n        },\n        \"GroupDescription\": \"Enable SSH access via port 22\",\n        \"SecurityGroupIngress\": [\n          {\n            \"IpProtocol\": \"tcp\",\n            \"FromPort\": \"22\",\n            \"ToPort\": \"22\",\n            \"CidrIp\": {\n              \"Ref\": \"SSHLocation\"\n            }\n          }\n        ]\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"696da90b-793a-4a36-8f34-4f94e50475b2\"\n        }\n      }\n    },\n    \"Ec2Instance\": {\n      \"Type\": \"AWS::EC2::Instance\",\n      \"Properties\": {\n        \"ImageId\": \"ami-374db956\",\n        \"InstanceType\": \"t2.nano\",\n        \"SecurityGroupIds\": [\n          {\n            \"Ref\": \"InstanceSecurityGroup\"\n          }\n        ],\n        \"SubnetId\": {\n          \"Ref\": \"SubnetId\"\n        },\n        \"KeyName\": {\n          \"Ref\": \"KeyName\"\n        },\n        \"Tags\": [\n          {\n            \"Key\": \"Name\",\n            \"Value\": \"TestCloudFormation\"\n          }\n        ],\n        \"UserData\": {\n          \"Fn::Base64\": {\n            \"Fn::Join\": [\n              \"\",\n              [\n                \"#!/bin/bash\\n\",\n                \"sudo yum update -y\\n\"\n              ]\n            ]\n          }\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\"\n        }\n      }\n    }\n  },\n  \"Outputs\": {\n    \"InstanceId\": {\n      \"Value\": {\n        \"Ref\": \"Ec2Instance\"\n      },\n      \"Description\": \"Instance Id of newly created instance\"\n    },\n    \"IPAddress\": {\n      \"Value\": {\n        \"Ref\": \"IPAddress\"\n      },\n      \"Description\": \"Public IP address of instance\"\n    }\n  },\n  \"Metadata\": {\n    \"AWS::CloudFormation::Designer\": {\n      \"696da90b-793a-4a36-8f34-4f94e50475b2\": {\n        \"size\": {\n          \"width\": 60,\n          \"height\": 60\n        },\n        \"position\": {\n          \"x\": 60,\n          \"y\": 90\n        },\n        \"z\": 1,\n        \"embeds\": []\n      },\n      \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\": {\n        \"size\": {\n          \"width\": 60,\n          \"height\": 60\n        },\n        \"position\": {\n          \"x\": 180,\n          \"y\": 90\n        },\n        \"z\": 1,\n        \"embeds\": [],\n        \"ismemberof\": [\n          \"696da90b-793a-4a36-8f34-4f94e50475b2\"\n        ]\n      },\n      \"1b5c3844-2834-4ed8-a519-377ae14ab89e\": {\n        \"size\": {\n          \"width\": 60,\n          \"height\": 60\n        },\n        \"position\": {\n          \"x\": 60,\n          \"y\": 210\n        },\n        \"z\": 1,\n        \"embeds\": [],\n        \"isconnectedto\": [\n          \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\"\n        ]\n      }\n    }\n  }\n}\n\n3.\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001\u4ee5\u4e0b\u56f3\u306e\u3088\u3046\u306b\u9032\u3093\u3067\u3044\u3051\u3070\u7121\u4e8b\u76ee\u7684\u304c\u9054\u6210\u3067\u304d\u307e\u3059\u3002\n\n\n\n\n\u6700\u7d42view\u30da\u30fc\u30b8\u306b\u306a\u308a\u3001create\u3059\u308b\u3068\u7121\u4e8b\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n\uff0a\u3053\u3053\u306ecreate\u3059\u308b\u3068\u5b9f\u969b\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306a\u3069\u304c\u4f5c\u6210\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u6599\u91d1\u304c\u304b\u304b\u3063\u3066\u304d\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\n\u5168\u4f53\u306e\u6d41\u308c\u304c\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\u6b21\u306b\u5b9f\u969b\u306b\u30b3\u30fc\u30c9\u3092\u8a73\u3057\u304f\u898b\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u307e\u305a\u306fParameters\u306e\u90e8\u5206\u3002\n  \"Parameters\": {\n    \"KeyName\": {\n      \"Description\": \"Name of and existing EC2 KeyPair to enable SSH access to the instance\",\n      \"Type\": \"String\"\n    },\n    \"VpcId\": {\n      \"Type\": \"String\",\n      \"Description\": \"VpcId of your existing Virtual Private Cloud (VPC)\"\n    },\n\n\u3053\u308c\u306f\u6c4e\u7528\u6027\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002\u5148\u307b\u3069\u56f3\u3067\u898b\u305b\u305f\u3001\u5b9f\u969b\u306bKeyPair\u306e\u540d\u524d\u3068\u304b\u3092\u5165\u529b\u3057\u305f\u7b87\u6240\u306b\u3042\u305f\u308a\u307e\u3059\u3002\n\n\u306a\u306e\u3067\u6c4e\u7528\u6027\u3092\u6301\u305f\u305b\u305f\u3044\u306a\u3068\u601d\u3046\u3082\u306e\u306fParameters\u3067\u5ba3\u8a00\u3057\u307e\u3057\u3087\u3046\u3002Parameters\u306b\u95a2\u3057\u3066\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3082\u3042\u308b\u306e\u3067\u98db\u3070\u305b\u308b\u3088\u3046\u306b\u30ea\u30f3\u30af\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u6b21\u306fResources\u306e\u90e8\u5206\u3002\u3053\u3053\u306f\u5b9f\u969b\u306b\u30c6\u30f3\u30d7\u30ec\u3068\u3057\u3066\u69cb\u6210\u56f3\u306b\u95a2\u308f\u3063\u3066\u304f\u308b\u90e8\u5206\u3067\u3059\u3002\u69cb\u6210\u7684\u306b\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n{\n  \"\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u540d\" : {\n    \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u540d\" : \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u5024\",\n    \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u540d\" : \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u5024\",\n      // \u4ee5\u4e0b\u7e70\u308a\u8fd4\u3057\n  }\n}\n\n\u305d\u308c\u3092\u5b9f\u969b\u306b\u5f53\u3066\u306f\u3081\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n  \"Resources\": {\n    \"IPAddress\": {\n      \"Type\": \"AWS::EC2::EIP\",\n      \"Properties\": {\n        \"Domain\": \"vpc\",\n        \"InstanceId\": {\n          \"Ref\": \"Ec2Instance\"\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"1b5c3844-2834-4ed8-a519-377ae14ab89e\"\n        }\n      }\n    },\n    \"InstanceSecurityGroup\": {\n      \"Type\": \"AWS::EC2::SecurityGroup\",\n      \"Properties\": {\n        \"VpcId\": {\n          \"Ref\": \"VpcId\"\n        },\n        \"GroupDescription\": \"Enable SSH access via port 22\",\n        \"SecurityGroupIngress\": [\n          {\n            \"IpProtocol\": \"tcp\",\n            \"FromPort\": \"22\",\n            \"ToPort\": \"22\",\n            \"CidrIp\": {\n              \"Ref\": \"SSHLocation\"\n            }\n          }\n        ]\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"696da90b-793a-4a36-8f34-4f94e50475b2\"\n        }\n      }\n    },\n    \"Ec2Instance\": {\n      \"Type\": \"AWS::EC2::Instance\",\n      \"Properties\": {\n        \"ImageId\": \"ami-374db956\",\n        \"InstanceType\": \"t2.nano\",\n        \"SecurityGroupIds\": [\n          {\n            \"Ref\": \"InstanceSecurityGroup\"\n          }\n        ],\n        \"SubnetId\": {\n          \"Ref\": \"SubnetId\"\n        },\n        \"KeyName\": {\n          \"Ref\": \"KeyName\"\n        },\n        \"Tags\": [\n          {\n            \"Key\": \"Name\",\n            \"Value\": \"TestCloudFormation\"\n          }\n        ],\n        \"UserData\": {\n          \"Fn::Base64\": {\n            \"Fn::Join\": [\n              \"\",\n              [\n                \"#!/bin/bash\\n\",\n                \"sudo yum update -y\\n\"\n              ]\n            ]\n          }\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\"\n        }\n      }\n    }\n  }\n\n\u89e3\u8aac\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fb\u307e\u305aResources\u3092\u5ba3\u8a00\u3057\u3001\u305d\u306e\u4e2d\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u9806\u306b\u8a18\u8ff0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fb\u305d\u306e\u3042\u3068\u300c\u4f55\u3092\u69cb\u6210\u3059\u308b\u306e\u304b\u300d\u3092\u5ba3\u8a00\u3059\u308b\u305f\u3081\u306bType\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u30fb\u305d\u3053\u304c\u8a18\u8ff0\u3057\u7d42\u308f\u3063\u305f\u3089\u3001\u6b21\u306f\u5b9f\u969b\u306b\u3069\u3046\u3044\u3046\u3084\u308a\u3068\u308a\u306e\u3042\u308b\u3082\u306e\u306b\u3059\u308b\u306e\u304b\u3068\u3044\u3063\u305f\u3053\u3068\u3092Properties\u306e\u4e2d\u306b\u8a18\u8ff0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fb\u6700\u5f8c\u3001Metadata\u3067\u3059\u304c\u3053\u308c\u306f\u69cb\u6210\u3059\u308b\u4e00\u3064\u4e00\u3064\u306b\u3064\u3044\u3066\u3044\u308b\u30c7\u30fc\u30bfID\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\u306a\u306e\u3067\u50d5\u305f\u3061\u304c\u76f4\u63a5\u3053\u3053\u3092\u3044\u3058\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u4e00\u3064\u53d6\u308a\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n    \"Ec2Instance\": {\n      \"Type\": \"AWS::EC2::Instance\",\n      \"Properties\": {\n        \"ImageId\": \"ami-374db956\",\n        \"InstanceType\": \"t2.nano\",\n        \"SecurityGroupIds\": [\n          {\n            \"Ref\": \"InstanceSecurityGroup\"\n          }\n        ],\n        \"SubnetId\": {\n          \"Ref\": \"SubnetId\"\n        },\n        \"KeyName\": {\n          \"Ref\": \"KeyName\"\n        },\n        \"Tags\": [\n          {\n            \"Key\": \"Name\",\n            \"Value\": \"TestCloudFormation\"\n          }\n        ],\n        \"UserData\": {\n          \"Fn::Base64\": {\n            \"Fn::Join\": [\n              \"\",\n              [\n                \"#!/bin/bash\\n\",\n                \"sudo yum update -y\\n\"\n              ]\n            ]\n          }\n        }\n      },\n\n\u30fb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306a\u306e\u3067Type\u3092\"Type\": \"AWS::EC2::Instance\"\u3068\u5ba3\u8a00\u3002\n\u30fbProperties\u3067\u3069\u3046\u3044\u3046\u69cb\u6210\u306a\u306e\u304b\u3092\u6307\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fbImageId\u306fAMI\u304c\u3069\u306e\u30bf\u30a4\u30d7\u306a\u306e\u304b\u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u4e0b\u56f3\u53c2\u7167\u3002\n\n\u30fbInstanceType\u3067\u30b9\u30da\u30c3\u30af\u3092\u6c7a\u3081\u308b\u3002\n\u30fbSecurityGroupIds\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u3092\u6c7a\u3081\u307e\u3059\u3002\u4eca\u56de\u306fRef\u3068\u3044\u3046\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3001\u3053\u308c\u306f\u300cInstanceSecurityGroup\u3068\u8a00\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u306e\u3082\u306e\u3092\u4f7f\u7528\u3059\u308b\u300d\u3068\u3044\u3063\u305f\u66f8\u304d\u65b9\u3067\u3059\u3002\u3002\nInstanceSecurityGroup\u3082\u5c11\u3057\u3060\u3051\u898b\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n    \"InstanceSecurityGroup\": {\n      \"Type\": \"AWS::EC2::SecurityGroup\",\n      \"Properties\": {\n        \"VpcId\": {\n          \"Ref\": \"VpcId\"\n        },\n        \"GroupDescription\": \"Enable SSH access via port 22\",\n        \"SecurityGroupIngress\": [\n          {\n            \"IpProtocol\": \"tcp\",\n            \"FromPort\": \"22\",\n            \"ToPort\": \"22\",\n            \"CidrIp\": {\n              \"Ref\": \"SSHLocation\"\n            }\n          }\n        ]\n      },\n\n\u3053\u308c\u3082\"Ref\": \"VpcId\"\u3068\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304b\u3089VpcId\u3068\u306a\u3063\u3066\u3044\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3092\u4f7f\u7528\u3059\u308b\u306e\u3060\u304cVpcId\u306fParameters\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a\u3001\n\n\u4e0a\u56f3\u306eview\u3067\u5ba3\u8a00\u3059\u308bID\u306eVPC\u3092\u4f7f\u7528\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u306e\u3067\u5b9f\u969b\u69cb\u6210\u3055\u308c\u308b\u3082\u306e\u3082\u65e2\u5b58\u306eVPC\u306e\u4e2d\u306bSecurityGroup\u3092\u5f35\u308a\u307e\u3059\u3002\u3067\u6700\u5f8cSecurityGroupIngress\u3067\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u56de\u306fSSH\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u30fb\u8a71\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u65b9\u306b\u623b\u3063\u3066\u3001\u6700\u5f8cUserData\u3067\u3059\u3002\u3053\u308c\u306f\u3053\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3068\u540c\u6642\u306b\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306a\u3069\u5fc5\u8981\u306a\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3082\u306e\u3067\u3059\u3002\n\n\u307e\u3068\u3081\n\u4e00\u5ea6\u5168\u4f53\u306e\u6d41\u308c\u3092\u3064\u304b\u3093\u3067\u3042\u3068\u306f\u5c11\u3057\u305a\u3064\u3044\u3058\u3063\u3066\u3044\u3051\u3070\u7c21\u5358\u306b\u69cb\u6210\u56f3\u901a\u308a\u306b\u69cb\u7bc9\u3057\u3066\u3044\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002CloudFormation\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u81ea\u4f53\u306f\u6599\u91d1\u304c\u304b\u304b\u3089\u306a\u3044\u306e\u3067\u65b0\u898f\u3067\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u969b\u306b\u306f\u662f\u975e\u89e6\u308c\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\u3002\n\u4eca\u56de\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u8003\u616e\u3057\u3066\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u69cb\u6210\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067AWS\u306e\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308bCloudFormation\u3092\u7528\u3044\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u30fbAWS\u3078\u30b5\u30fc\u30d0\u30fc\u79fb\u884c\u3092\u884c\u3046\n\u30fb\u305d\u308c\u306b\u4f34\u3044\u30b5\u30fc\u30d0\u30fc\u6570\u3092\u500d\u4ee5\u4e0a\u306b\u5897\u3084\u3059\n\u30fb\u305d\u308c\u3089\u3092\u500b\u5225\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n\n## CloudFormation\u3068\u306f\nAWS\u4e0a\u306e\u69cb\u6210\u3092\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3057\u3001\u518d\u5229\u7528\u3057\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306e\u30c4\u30fc\u30eb\u3067\u3059\u3002\u3064\u307e\u308a\u7c21\u5358\u306b\u8a00\u3046\u3068\u300c\u81ea\u52d5\u7684\u306bAWS\u4e0a\u3067\u4f5c\u308a\u305f\u3044\u3082\u306e\u3092\u4f5c\u3063\u3066\u304f\u308c\u308b\u300dAWS\u304c\u7528\u610f\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3001\u81ea\u5206\u304c\u4f5c\u308a\u305f\u3044\u74b0\u5883\u3092\u5b9a\u7fa9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305d\u306e\u5b9a\u7fa9\u66f8\u3092\u8aad\u307f\u8fbc\u3093\u3067\u81ea\u52d5\u3067\u74b0\u5883\u3092\u4f5c\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\u307e\u305f\u65b0\u898f\u4f5c\u6210\u306e\u307f\u3067\u306a\u304f\u66f4\u65b0\u6a5f\u80fd\u3082\u3042\u308a\u3001\u4f5c\u6210\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u30bd\u30fc\u30b9\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u74b0\u5883\u306e\u69cb\u6210\u306a\u3069\u3092\u81ea\u7531\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3069\u3053\u3092\u3069\u3046\u5909\u66f4\u3057\u305f\u306e\u304b\u3068\u3044\u3063\u305f\u5909\u66f4\u5c65\u6b74\u3082\u4fdd\u6301\u3057\u3066\u3044\u308b\u306e\u3067\u8ffd\u8de1\u6027\u3082\u3042\u308a\u307e\u3059\u3002\n\n## \u7528\u9014\n\u4e3b\u306b\u4ee5\u4e0b2\u70b9\u3002\n\u30fb\u65b0\u898f\u74b0\u5883\u306e\u69cb\u7bc9\u6642\u306e\u5229\u7528\n\u30fb\u69cb\u7bc9\u6e08\u307f\u306e\u74b0\u5883\u3092\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\u3057\u3066\u518d\u5229\u7528\n\u3044\u305a\u308c\u306b\u305b\u3088\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u95a2\u9023\u30fb\u30b5\u30fc\u30d0\u30fc\u95a2\u9023\u3068\u5927\u304d\u304f\uff12\u3064\u306b\u5206\u3051\u3066\u69cb\u7bc9\u3057\u3066\u3044\u304f\u306e\u304c\u500b\u4eba\u7684\u306b\u306f\u826f\u3044\u304b\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u5148\u307b\u3069\u3042\u3052\u305f\uff12\u70b9\u3067\u3059\u304c\u3001\u5f8c\u8005\u306e\u307b\u3046\u304c\u82e5\u5e72\u5384\u4ecb\u306a\u611f\u3058\u304c\u500b\u4eba\u7684\u306b\u306f\u3057\u3066\u3044\u308b\u306e\u3067\u4eca\u56de\u306f\u524d\u8005\u306e\u307b\u3046\u3067\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\uff0a\u5f8c\u8005\u306e\u307b\u3046\u306f[CloudFormer](http://dev.classmethod.jp/cloud/aws-cloudformation-cloudformer/)\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u65e2\u5b58\u306e\u30c7\u30fc\u30bf\u3092\u30b3\u30fc\u30c9\u5316\u3057\u307e\u3059\u3002\u5b9f\u969b\u884c\u3046\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u30b3\u30fc\u30c9\u5316\u3055\u308c\u305f\u3082\u306e\u306f\u4f7f\u3044\u56de\u3059\u3068\u3044\u3063\u305f\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u9069\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u968f\u6642\u5909\u66f4\u3057\u3066\u3044\u304f\u3068\u3044\u3063\u305f\u5bfe\u5fdc\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\n\n\n## \u5b9f\u969b\u306b\u3084\u3063\u3066\u307f\u308b(\u65e2\u5b58\u306eVPC\u3068\u30b5\u30d6\u30cd\u30c3\u30c8\u306e\u4e2d\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3066\u307f\u308b)\n\u89e6\u3063\u3066\u307f\u308b\u5206\u306b\u306f\u5168\u304f\u3082\u3063\u3066\u96e3\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u6642\u70b9\u3067\u306f\u6599\u91d1\u306f\u304b\u304b\u308a\u307e\u305b\u3093\u3002\u6700\u5f8ccreate\u3059\u308b\u6642\u304b\u3089\u6599\u91d1\u304c\u767a\u751f\u3057\u307e\u3059(\u30da\u30fc\u30b8\u4e0b\u90e8\u306b\u8a18\u8ff0\u3042\u308a)\n1.CloudFormation\u306e\u30da\u30fc\u30b8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n<img width=\"1274\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 8.37.29.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/f482cd54-1543-0344-a189-3e3b2cafb25d.png\">\n\n2.\u521d\u3081\u3066\u306e\u5834\u5408\u306f\u300cDesign template\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\nGUI\u306a\u306e\u3067\u3001\u6a2a\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u30c9\u30e9\u30c3\u30b0\uff06\u30c9\u30ed\u30c3\u30d7\u3067\u69cb\u6210\u56f3\u3092\u4f5c\u6210\u3057\u3066\u3082\u53ef\u3067\u3059\u304c\u3001\u7d50\u69cb\u3044\u308d\u3044\u308d\u64cd\u4f5c\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u50d5\u306f\u4e0b\u56f3\u306e\u8d64\u67a0\u306e\u3088\u3046\u306b\u300cTemplate\u300d\u3068\u3044\u3046\u3068\u3053\u308d\u3092\u3044\u3058\u3063\u3066\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n<img width=\"850\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 9.06.44.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/aab293bd-c99f-f273-c3e2-8b83adf0b366.png\">\n\n\u300cTemplate\u300d\u306b\u5b9f\u969b\u306b\u66f8\u3044\u3066\u3044\u308b\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n```\n{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Description\": \"AWS CloudFormation Sample Template VPC_EC2_Instance_with_EIP_and_Security_Group: Sample template showing how to create an instance with an Elastic IP address and a security group in an existing VPC. It assumes you have already created a VPC. **WARNING** This template creates an Amazon EC2 instance. You will be billed for the AWS resources used if you create a stack from this template.\",\n  \"Parameters\": {\n    \"KeyName\": {\n      \"Description\": \"Name of and existing EC2 KeyPair to enable SSH access to the instance\",\n      \"Type\": \"String\"\n    },\n    \"VpcId\": {\n      \"Type\": \"String\",\n      \"Description\": \"VpcId of your existing Virtual Private Cloud (VPC)\"\n    },\n    \"SubnetId\": {\n      \"Type\": \"String\",\n      \"Description\": \"SubnetId of an existing subnet in your Virtual Private Cloud (VPC)\"\n    },\n    \"SSHLocation\": {\n      \"Description\": \" The IP address range that can be used to SSH to the EC2 instances\",\n      \"Type\": \"String\",\n      \"MinLength\": \"9\",\n      \"MaxLength\": \"18\",\n      \"Default\": \"0.0.0.0/0\",\n      \"AllowedPattern\": \"(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})\\\\.(\\\\d{1,3})/(\\\\d{1,2})\",\n      \"ConstraintDescription\": \"must be a valid IP CIDR range of the form x.x.x.x/x.\"\n    }\n  },\n  \"Resources\": {\n    \"IPAddress\": {\n      \"Type\": \"AWS::EC2::EIP\",\n      \"Properties\": {\n        \"Domain\": \"vpc\",\n        \"InstanceId\": {\n          \"Ref\": \"Ec2Instance\"\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"1b5c3844-2834-4ed8-a519-377ae14ab89e\"\n        }\n      }\n    },\n    \"InstanceSecurityGroup\": {\n      \"Type\": \"AWS::EC2::SecurityGroup\",\n      \"Properties\": {\n        \"VpcId\": {\n          \"Ref\": \"VpcId\"\n        },\n        \"GroupDescription\": \"Enable SSH access via port 22\",\n        \"SecurityGroupIngress\": [\n          {\n            \"IpProtocol\": \"tcp\",\n            \"FromPort\": \"22\",\n            \"ToPort\": \"22\",\n            \"CidrIp\": {\n              \"Ref\": \"SSHLocation\"\n            }\n          }\n        ]\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"696da90b-793a-4a36-8f34-4f94e50475b2\"\n        }\n      }\n    },\n    \"Ec2Instance\": {\n      \"Type\": \"AWS::EC2::Instance\",\n      \"Properties\": {\n        \"ImageId\": \"ami-374db956\",\n        \"InstanceType\": \"t2.nano\",\n        \"SecurityGroupIds\": [\n          {\n            \"Ref\": \"InstanceSecurityGroup\"\n          }\n        ],\n        \"SubnetId\": {\n          \"Ref\": \"SubnetId\"\n        },\n        \"KeyName\": {\n          \"Ref\": \"KeyName\"\n        },\n        \"Tags\": [\n          {\n            \"Key\": \"Name\",\n            \"Value\": \"TestCloudFormation\"\n          }\n        ],\n        \"UserData\": {\n          \"Fn::Base64\": {\n            \"Fn::Join\": [\n              \"\",\n              [\n                \"#!/bin/bash\\n\",\n                \"sudo yum update -y\\n\"\n              ]\n            ]\n          }\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\"\n        }\n      }\n    }\n  },\n  \"Outputs\": {\n    \"InstanceId\": {\n      \"Value\": {\n        \"Ref\": \"Ec2Instance\"\n      },\n      \"Description\": \"Instance Id of newly created instance\"\n    },\n    \"IPAddress\": {\n      \"Value\": {\n        \"Ref\": \"IPAddress\"\n      },\n      \"Description\": \"Public IP address of instance\"\n    }\n  },\n  \"Metadata\": {\n    \"AWS::CloudFormation::Designer\": {\n      \"696da90b-793a-4a36-8f34-4f94e50475b2\": {\n        \"size\": {\n          \"width\": 60,\n          \"height\": 60\n        },\n        \"position\": {\n          \"x\": 60,\n          \"y\": 90\n        },\n        \"z\": 1,\n        \"embeds\": []\n      },\n      \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\": {\n        \"size\": {\n          \"width\": 60,\n          \"height\": 60\n        },\n        \"position\": {\n          \"x\": 180,\n          \"y\": 90\n        },\n        \"z\": 1,\n        \"embeds\": [],\n        \"ismemberof\": [\n          \"696da90b-793a-4a36-8f34-4f94e50475b2\"\n        ]\n      },\n      \"1b5c3844-2834-4ed8-a519-377ae14ab89e\": {\n        \"size\": {\n          \"width\": 60,\n          \"height\": 60\n        },\n        \"position\": {\n          \"x\": 60,\n          \"y\": 210\n        },\n        \"z\": 1,\n        \"embeds\": [],\n        \"isconnectedto\": [\n          \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\"\n        ]\n      }\n    }\n  }\n}\n```\n\n3.\u4f5c\u6210\u3067\u304d\u305f\u3089\u3001\u4ee5\u4e0b\u56f3\u306e\u3088\u3046\u306b\u9032\u3093\u3067\u3044\u3051\u3070\u7121\u4e8b\u76ee\u7684\u304c\u9054\u6210\u3067\u304d\u307e\u3059\u3002\n\n<img width=\"850\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 9.42.44.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/846014a0-1ba6-e10d-ed20-e232c5877e72.png\">\n\n<img width=\"854\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 9.47.01.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/0ee89f21-fa63-f0e8-83dc-b26638d350d9.png\">\n\n<img width=\"845\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 9.52.01.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/f995b27d-6462-be8f-1367-51f18e82f7e8.png\">\n\n<img width=\"841\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 9.54.26.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/15d2907f-0883-c8e9-a881-cd204187d5fb.png\">\n\n\u6700\u7d42view\u30da\u30fc\u30b8\u306b\u306a\u308a\u3001create\u3059\u308b\u3068\u7121\u4e8b\u4f5c\u6210\u3055\u308c\u308b\u3002\n#### \uff0a\u3053\u3053\u306ecreate\u3059\u308b\u3068\u5b9f\u969b\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306a\u3069\u304c\u4f5c\u6210\u3055\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u6599\u91d1\u304c\u304b\u304b\u3063\u3066\u304d\u307e\u3059\u3002\n\n\n## \u30b3\u30fc\u30c9\n\u5168\u4f53\u306e\u6d41\u308c\u304c\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\u6b21\u306b\u5b9f\u969b\u306b\u30b3\u30fc\u30c9\u3092\u8a73\u3057\u304f\u898b\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u305a\u306fParameters\u306e\u90e8\u5206\u3002\n\n```\n  \"Parameters\": {\n    \"KeyName\": {\n      \"Description\": \"Name of and existing EC2 KeyPair to enable SSH access to the instance\",\n      \"Type\": \"String\"\n    },\n    \"VpcId\": {\n      \"Type\": \"String\",\n      \"Description\": \"VpcId of your existing Virtual Private Cloud (VPC)\"\n    },\n```\n\n\u3053\u308c\u306f\u6c4e\u7528\u6027\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306e\u3082\u306e\u3067\u3059\u3002\u5148\u307b\u3069\u56f3\u3067\u898b\u305b\u305f\u3001\u5b9f\u969b\u306bKeyPair\u306e\u540d\u524d\u3068\u304b\u3092\u5165\u529b\u3057\u305f\u7b87\u6240\u306b\u3042\u305f\u308a\u307e\u3059\u3002\n<img width=\"845\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 9.52.01.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/f995b27d-6462-be8f-1367-51f18e82f7e8.png\">\n\u306a\u306e\u3067\u6c4e\u7528\u6027\u3092\u6301\u305f\u305b\u305f\u3044\u306a\u3068\u601d\u3046\u3082\u306e\u306fParameters\u3067\u5ba3\u8a00\u3057\u307e\u3057\u3087\u3046\u3002[Parameters\u306b\u95a2\u3057\u3066\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/parameters-section-structure.html)\u3082\u3042\u308b\u306e\u3067\u98db\u3070\u305b\u308b\u3088\u3046\u306b\u30ea\u30f3\u30af\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n\n\u6b21\u306fResources\u306e\u90e8\u5206\u3002\u3053\u3053\u306f\u5b9f\u969b\u306b\u30c6\u30f3\u30d7\u30ec\u3068\u3057\u3066\u69cb\u6210\u56f3\u306b\u95a2\u308f\u3063\u3066\u304f\u308b\u90e8\u5206\u3067\u3059\u3002\u69cb\u6210\u7684\u306b\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n```\n{\n  \"\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u540d\" : {\n    \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u540d\" : \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u5024\",\n    \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u540d\" : \"\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u5024\",\n      // \u4ee5\u4e0b\u7e70\u308a\u8fd4\u3057\n  }\n}\n```\n\n\u305d\u308c\u3092\u5b9f\u969b\u306b\u5f53\u3066\u306f\u3081\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n  \"Resources\": {\n    \"IPAddress\": {\n      \"Type\": \"AWS::EC2::EIP\",\n      \"Properties\": {\n        \"Domain\": \"vpc\",\n        \"InstanceId\": {\n          \"Ref\": \"Ec2Instance\"\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"1b5c3844-2834-4ed8-a519-377ae14ab89e\"\n        }\n      }\n    },\n    \"InstanceSecurityGroup\": {\n      \"Type\": \"AWS::EC2::SecurityGroup\",\n      \"Properties\": {\n        \"VpcId\": {\n          \"Ref\": \"VpcId\"\n        },\n        \"GroupDescription\": \"Enable SSH access via port 22\",\n        \"SecurityGroupIngress\": [\n          {\n            \"IpProtocol\": \"tcp\",\n            \"FromPort\": \"22\",\n            \"ToPort\": \"22\",\n            \"CidrIp\": {\n              \"Ref\": \"SSHLocation\"\n            }\n          }\n        ]\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"696da90b-793a-4a36-8f34-4f94e50475b2\"\n        }\n      }\n    },\n    \"Ec2Instance\": {\n      \"Type\": \"AWS::EC2::Instance\",\n      \"Properties\": {\n        \"ImageId\": \"ami-374db956\",\n        \"InstanceType\": \"t2.nano\",\n        \"SecurityGroupIds\": [\n          {\n            \"Ref\": \"InstanceSecurityGroup\"\n          }\n        ],\n        \"SubnetId\": {\n          \"Ref\": \"SubnetId\"\n        },\n        \"KeyName\": {\n          \"Ref\": \"KeyName\"\n        },\n        \"Tags\": [\n          {\n            \"Key\": \"Name\",\n            \"Value\": \"TestCloudFormation\"\n          }\n        ],\n        \"UserData\": {\n          \"Fn::Base64\": {\n            \"Fn::Join\": [\n              \"\",\n              [\n                \"#!/bin/bash\\n\",\n                \"sudo yum update -y\\n\"\n              ]\n            ]\n          }\n        }\n      },\n      \"Metadata\": {\n        \"AWS::CloudFormation::Designer\": {\n          \"id\": \"6fb04cb4-7cbb-4ca9-a01c-3a4c499e051b\"\n        }\n      }\n    }\n  }\n```\n\n\u89e3\u8aac\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30fb\u307e\u305aResources\u3092\u5ba3\u8a00\u3057\u3001\u305d\u306e\u4e2d\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u9806\u306b\u8a18\u8ff0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fb\u305d\u306e\u3042\u3068\u300c\u4f55\u3092\u69cb\u6210\u3059\u308b\u306e\u304b\u300d\u3092\u5ba3\u8a00\u3059\u308b\u305f\u3081\u306bType\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u30fb\u305d\u3053\u304c\u8a18\u8ff0\u3057\u7d42\u308f\u3063\u305f\u3089\u3001\u6b21\u306f\u5b9f\u969b\u306b\u3069\u3046\u3044\u3046\u3084\u308a\u3068\u308a\u306e\u3042\u308b\u3082\u306e\u306b\u3059\u308b\u306e\u304b\u3068\u3044\u3063\u305f\u3053\u3068\u3092Properties\u306e\u4e2d\u306b\u8a18\u8ff0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fb\u6700\u5f8c\u3001Metadata\u3067\u3059\u304c\u3053\u308c\u306f\u69cb\u6210\u3059\u308b\u4e00\u3064\u4e00\u3064\u306b\u3064\u3044\u3066\u3044\u308b\u30c7\u30fc\u30bfID\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\u306a\u306e\u3067\u50d5\u305f\u3061\u304c\u76f4\u63a5\u3053\u3053\u3092\u3044\u3058\u308b\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u4e00\u3064\u53d6\u308a\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n    \"Ec2Instance\": {\n      \"Type\": \"AWS::EC2::Instance\",\n      \"Properties\": {\n        \"ImageId\": \"ami-374db956\",\n        \"InstanceType\": \"t2.nano\",\n        \"SecurityGroupIds\": [\n          {\n            \"Ref\": \"InstanceSecurityGroup\"\n          }\n        ],\n        \"SubnetId\": {\n          \"Ref\": \"SubnetId\"\n        },\n        \"KeyName\": {\n          \"Ref\": \"KeyName\"\n        },\n        \"Tags\": [\n          {\n            \"Key\": \"Name\",\n            \"Value\": \"TestCloudFormation\"\n          }\n        ],\n        \"UserData\": {\n          \"Fn::Base64\": {\n            \"Fn::Join\": [\n              \"\",\n              [\n                \"#!/bin/bash\\n\",\n                \"sudo yum update -y\\n\"\n              ]\n            ]\n          }\n        }\n      },\n```\n\n\u30fb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306a\u306e\u3067Type\u3092`` \"Type\": \"AWS::EC2::Instance\"``\u3068\u5ba3\u8a00\u3002\n\u30fbProperties\u3067\u3069\u3046\u3044\u3046\u69cb\u6210\u306a\u306e\u304b\u3092\u6307\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30fbImageId\u306fAMI\u304c\u3069\u306e\u30bf\u30a4\u30d7\u306a\u306e\u304b\u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\u4e0b\u56f3\u53c2\u7167\u3002\n<img width=\"1120\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 21.57.35.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/c4b911d7-1870-be11-701d-5b83a885cd5b.png\">\n\u30fbInstanceType\u3067\u30b9\u30da\u30c3\u30af\u3092\u6c7a\u3081\u308b\u3002\n\u30fbSecurityGroupIds\u3067\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u3092\u6c7a\u3081\u307e\u3059\u3002\u4eca\u56de\u306fRef\u3068\u3044\u3046\u3082\u306e\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3001\u3053\u308c\u306f\u300cInstanceSecurityGroup\u3068\u8a00\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u306e\u3082\u306e\u3092\u4f7f\u7528\u3059\u308b\u300d\u3068\u3044\u3063\u305f\u66f8\u304d\u65b9\u3067\u3059\u3002\u3002\n\nInstanceSecurityGroup\u3082\u5c11\u3057\u3060\u3051\u898b\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n```\n    \"InstanceSecurityGroup\": {\n      \"Type\": \"AWS::EC2::SecurityGroup\",\n      \"Properties\": {\n        \"VpcId\": {\n          \"Ref\": \"VpcId\"\n        },\n        \"GroupDescription\": \"Enable SSH access via port 22\",\n        \"SecurityGroupIngress\": [\n          {\n            \"IpProtocol\": \"tcp\",\n            \"FromPort\": \"22\",\n            \"ToPort\": \"22\",\n            \"CidrIp\": {\n              \"Ref\": \"SSHLocation\"\n            }\n          }\n        ]\n      },\n```\n\n\u3053\u308c\u3082``\"Ref\": \"VpcId\"``\u3068\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304b\u3089VpcId\u3068\u306a\u3063\u3066\u3044\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u540d\u3092\u4f7f\u7528\u3059\u308b\u306e\u3060\u304cVpcId\u306fParameters\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3064\u307e\u308a\u3001\n<img width=\"845\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-20 9.52.01.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/74580/f995b27d-6462-be8f-1367-51f18e82f7e8.png\">\n\u4e0a\u56f3\u306eview\u3067\u5ba3\u8a00\u3059\u308bID\u306eVPC\u3092\u4f7f\u7528\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u306e\u3067\u5b9f\u969b\u69cb\u6210\u3055\u308c\u308b\u3082\u306e\u3082\u65e2\u5b58\u306eVPC\u306e\u4e2d\u306bSecurityGroup\u3092\u5f35\u308a\u307e\u3059\u3002\u3067\u6700\u5f8c```SecurityGroupIngress```\u3067\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u3066\u3044\u307e\u3059\u3002\u4eca\u56de\u306fSSH\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30fb\u8a71\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u65b9\u306b\u623b\u3063\u3066\u3001\u6700\u5f8cUserData\u3067\u3059\u3002\u3053\u308c\u306f\u3053\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7acb\u3061\u4e0a\u304c\u3063\u305f\u3068\u540c\u6642\u306b\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306a\u3069\u5fc5\u8981\u306a\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3082\u306e\u3067\u3059\u3002\n\n\n## \u307e\u3068\u3081\n\u4e00\u5ea6\u5168\u4f53\u306e\u6d41\u308c\u3092\u3064\u304b\u3093\u3067\u3042\u3068\u306f\u5c11\u3057\u305a\u3064\u3044\u3058\u3063\u3066\u3044\u3051\u3070\u7c21\u5358\u306b\u69cb\u6210\u56f3\u901a\u308a\u306b\u69cb\u7bc9\u3057\u3066\u3044\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002CloudFormation\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u81ea\u4f53\u306f\u6599\u91d1\u304c\u304b\u304b\u3089\u306a\u3044\u306e\u3067\u65b0\u898f\u3067\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u969b\u306b\u306f\u662f\u975e\u89e6\u308c\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\u3002\n"}