{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\u306e\u7d4c\u9a13\u304c\u3042\u3093\u307e\u308a\u306b\u3082\u306a\u3044\u306e\u3067\u3001\u4eca\u56de\u3084\u3063\u3066\u307f\u305f\u6d41\u308c\u3092\u307e\u3068\u3081\u3066\u307f\u305f\u3002\n\n\u76ee\u6b21\n\nnginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nphp\u53ca\u3073php-fpm\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30d0\u30fc\u30c1\u30e3\u30eb\u74b0\u5883\u69cb\u7bc9\n\n\n# EC2 IP Adress(\u4eee)\n52.111.111.111\n\n\nnginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nEC2\u3078\u30ed\u30b0\u30a4\u30f3\n[hoge@local ~]$ ssh -i \"XXX.pem\" ec2-user@52.111.111.111\n\n\n1. nginx\u60c5\u5831\u78ba\u8a8d\n[ec2-user@ip-172-31-4-XXX ~]$ yum info nginx\n\n\n2. nginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[ec2-user@ip-172-31-4-XXX ~]$ sudo yum install nginx -y\n\n\n3. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\n[ec2-user@ip-172-31-4-XXX ~]$ which nginx\n/usr/sbin/nginx\n\n\n4. nginx\u7a3c\u50cd\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx start\nStarting nginx:                                            [  OK  ]\n\n[ec2-user@ip-172-31-4-XXX ~]$ ps -ef | grep nginx\nroot      1563     1  0 09:06 ?        00:00:00 nginx: master process nginx\nnginx     1564  1563  0 09:06 ?        00:00:00 nginx: worker process\nec2-user   1566  1385  0 09:06 pts/0    00:00:00 grep nginx\n\n\n5. \u30d6\u30e9\u30a6\u30b6\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u78ba\u8a8d\u3059\u308b\n\u30d6\u30e9\u30a6\u30b6\u3067 http://52.111.111.111 \u3078\u30a2\u30af\u30bb\u30b9\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070 OK \u3002\n\n\n6. \u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u7a3c\u50cd\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\n[ec2-user@ip-172-31-4-XXX ~]$ sudo chkconfig nginx on\n\n\n7. nginx\u306e\u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u78ba\u8a8d\n[ec2-user@ip-172-31-4-XXX ~]$ tail -f /var/log/nginx/access.log\ntail: `/var/log/nginx/access.log' \u3092 \u8aad\u307f\u8fbc\u307f\u7528\u306b\u958b\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093: \u8a31\u53ef\u304c\u3042\u308a\u307e\u305b\u3093\n[ec2-user@ip-172-31-4-XXX ~]$ ls -ald /var/log/nginx\ndrwx------ 2 nginx nginx 4096  9\u6708 20 08:26 /var/log/nginx\n\n\n8. \u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u5909\u66f4\n[ec2-user@ip-172-31-4-XXX ~]$ sudo chmod 755 /var/log/nginx/\n[ec2-user@ip-172-31-4-XXX ~]$ ls -ald /var/log/nginx\ndrwxr-xr-x 2 nginx nginx 4096  9\u6708 20 08:26 /var/log/nginx\n[ec2-user@ip-172-31-4-XXX ~]$ tail -f /var/log/nginx/access.log\nXXX.XXX.XX.XXX - - [20/Sep/2015:08:29:09 +0000] ...\nXXX.XXX.XX.XXX - - [20/Sep/2015:08:30:01 +0000] ...\n\n\nphp-fpm\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1. php5.6\u53ca\u3073php-fpm\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[ec2-user@ip-172-31-4-XXX ~]$ sudo yum install php56 php56-fpm -y\n\n\n2. \u78ba\u8a8d\u7528\u306ephp\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n/usr/share/nginx/html/phpinfo.php\n<?php\n    phpinfo();\n\n\n\n3. php-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\n\nuser\u3068group\u3092apache\u304b\u3089nginx\u306b\u5909\u66f4\n\n/etc/php-fpm-5.6.d/www.conf\n- user = apache\n+ user = nginx\n\n- group = apache\n+ group = nginx\n\n\n\n4. nginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\n/etc/nginx/nginx.conf\n  http {\n-   index index.html index.htm;\n+   index index.php index.html index.htm;\n      server {\n       root /usr/share/nginx/html;\n\n-       #location ~ \\.php$ {\n-       #    root           html;\n-       #    fastcgi_pass   127.0.0.1:9000;\n-       #    fastcgi_index  index.php;\n-       #    fastcgi_param  SCRIPT_FILENAME/scripts$fastcgi_script_name;\n-       #    include        fastcgi_params;\n-       #}\n+       location ~ \\.php$ {\n+       root           html;\n+       fastcgi_pass   127.0.0.1:9000;\n+       fastcgi_index  index.php;\n+       fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n+       include        fastcgi_params;\n+     }\n\n\n\n5. php-fpm\u7a3c\u50cd\u53ca\u3073\u81ea\u52d5\u7a3c\u50cd\u8a2d\u5b9a\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service php-fpm start\n[ec2-user@ip-172-31-4-XXX ~]$ sudo chkconfig php-fpm on\n\n\n6. nginx\u518d\u8d77\u52d5\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx restart\n\n\n7. \u8a2d\u5b9a\u5909\u66f4\u306e\u78ba\u8a8d\n[ec2-user@ip-172-31-4-XXX ~]$ curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n<tr><td class=\"e\">PHP Version </td><td class=\"v\">5.6.8 </td></tr>\n\n\n8. nginx\u3068php-fpm\u306e\u63a5\u7d9a\u3092socket\u306b\u3059\u308b\n\nphp-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\n\n/etc/php-fpm-5.6.d/www.conf\n-   listen = 127.0.0.1:9000\n+   listen =  /var/run/php-fpm/php-fpm.sock\n\n-   ;listen.owner = nobody\n-   ;listen.group = nobody\n+   listen.owner = nginx  \n+   listen.group = nginx\n\n\n\nnginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\n/etc/nginx/nginx.conf\n-   fastcgi_pass   127.0.0.1:9000;\n+   fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;\n\n\n\n\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service php-fpm restart\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx restart \n\n\nphp\u5b9f\u884c\u306b\u554f\u984c\u306a\u3044\u304b\u78ba\u8a8d\n[ec2-user@ip-172-31-4-XXX ~]$ curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u74b0\u5883\u4f5c\u6210(feature1-develop.com)\n\n1. php-fpm\u3092\u8a2d\u5b9a\n\n/etc/php-fpm-5.6.d/php-fpm-feature1-develop.conf\n[feature1-develop]\nuser = nginx\ngroup = nginx\nlisten = /var/run/php-fpm/php-fpm-feature1-develop.sock\nlisten.owner = nginx\nlisten.group = nginx\nphp_admin_value[disable_functions] = exec,passthru,shell_exec,system\nphp_admin_flag[allow_url_fopen] = off\npm = dynamic\npm.max_children = 5\npm.start_servers = 2\npm.min_spare_servers = 1\npm.max_spare_servers = 3\nchdir = /\n\n\n\n2. nginx\u306evirtual.conf\u8a2d\u5b9a\n\n/etc/nginx/conf.d/virtual.conf\nserver {\n    listen        80;\n    server_name   feature1-develop.com;\n    access_log    /var/log/nginx/feature1-develop.access.log main;\n    error_log    /var/log/nginx/feature1-develop.error.log;\n    root /var/www/feature1;\n    index index.php;\n    location ~ \\.php$ {\n        root           /var/www/feature1;\n        fastcgi_pass   unix:/var/run/php-fpm/php-fpm-feature1-develop.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}\n\n\n\n3. \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\n[ec2-user@ip-172-31-4-XXX ~]$ sudo mkdir -p /var/www/feature1\n\n\n4. index.php\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n\n/var/www/feature1/index.php\n<?php\n    phpinfo();\n\n\n\n5. php-fpm\u3068nginx\u518d\u8d77\u52d5\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service php-fpm restart\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx restart\n\n\n6. sock\u30d5\u30a1\u30a4\u30eb\u8ffd\u52a0\u78ba\u8a8d\n[ec2-user@ip-172-31-4-XXX ~]$ ls -al /var/run/php-fpm/php-fpm-feature1-develop.sock\nsrw-rw---- 1 nginx nginx 0  9\u6708 20 08:54 /var/run/php-fpm/php-fpm-feature1-develop.sock\n\n\n7. \u81ea\u5206\u306e\u30d1\u30bd\u30b3\u30f3\u306b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a2d\u5b9a\n[hoge@local ~]$ sudo -- sh -c \"echo 52.111.111.111 feature1-develop.com >> /etc/hosts\"\n\n\n8. \u30a2\u30af\u30bb\u30b9\u78ba\u8a8d\n\nshell\u4e0a\u3067\u78ba\u8a8d\n# \u30a2\u30af\u30bb\u30b9\u78ba\u8a8d\n[hoge@local ~]$ curl -s http://feature1-develop.com/phpinfo.php | grep \"PHP Version\"\n<tr><td class=\"e\">PHP Version </td><td class=\"v\">5.6.12 </td></tr>\n\n# \u300cDOCUMENT_ROOT\u300d\u78ba\u8a8d\n[hoge@local ~]$ curl -s http://feature1-develop.com/phpinfo.php | grep \"DOCUMENT_ROOT\"\n<tr><td class=\"e\">_SERVER[\"DOCUMENT_ROOT\"]</td><td class=\"v\">/var/www/feature1</td></tr>\n\n\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u78ba\u8a8d\nhttp://feature1-develop.com/phpinfo.php\n\u300cDOCUMENT_ROOT\u300d\u304c\u300c/var/www/feature1\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\n\n\n\u6b21\u306b\u3084\u3063\u305f\u3053\u3068\n\nEC2\u3067php\u74b0\u5883\u69cb\u7bc9 \u2461 git\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9 + altax\u5c0e\u5165 + \u30c7\u30d7\u30ed\u30a4\u30b3\u30de\u30f3\u30c9\u4f5c\u6210\n\n# \u6982\u8981\n\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\u306e\u7d4c\u9a13\u304c\u3042\u3093\u307e\u308a\u306b\u3082\u306a\u3044\u306e\u3067\u3001\u4eca\u56de\u3084\u3063\u3066\u307f\u305f\u6d41\u308c\u3092\u307e\u3068\u3081\u3066\u307f\u305f\u3002\n\n\n# \u76ee\u6b21\n- nginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- php\u53ca\u3073php-fpm\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- \u30d0\u30fc\u30c1\u30e3\u30eb\u74b0\u5883\u69cb\u7bc9\n\n####### EC2 IP Adress(\u4eee)\n```\n52.111.111.111\n```\n# nginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n## EC2\u3078\u30ed\u30b0\u30a4\u30f3\n```bash\n[hoge@local ~]$ ssh -i \"XXX.pem\" ec2-user@52.111.111.111\n```\n## 1. nginx\u60c5\u5831\u78ba\u8a8d\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ yum info nginx\n```\n## 2. nginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo yum install nginx -y\n```\n\n## 3. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ which nginx\n/usr/sbin/nginx\n```\n\n## 4. nginx\u7a3c\u50cd\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx start\nStarting nginx:                                            [  OK  ]\n\n[ec2-user@ip-172-31-4-XXX ~]$ ps -ef | grep nginx\nroot      1563     1  0 09:06 ?        00:00:00 nginx: master process nginx\nnginx     1564  1563  0 09:06 ?        00:00:00 nginx: worker process\nec2-user   1566  1385  0 09:06 pts/0    00:00:00 grep nginx\n```\n\n## 5. \u30d6\u30e9\u30a6\u30b6\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u78ba\u8a8d\u3059\u308b\n\u30d6\u30e9\u30a6\u30b6\u3067 http://52.111.111.111 \u3078\u30a2\u30af\u30bb\u30b9\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308c\u3070 OK \u3002\n![20130818181233.png](https://qiita-image-store.s3.amazonaws.com/0/71860/8c9de119-a673-1daa-6b36-7284851c251a.png)\n\n## 6. \u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u7a3c\u50cd\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo chkconfig nginx on\n```\n## 7. nginx\u306e\u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u78ba\u8a8d\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ tail -f /var/log/nginx/access.log\ntail: `/var/log/nginx/access.log' \u3092 \u8aad\u307f\u8fbc\u307f\u7528\u306b\u958b\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093: \u8a31\u53ef\u304c\u3042\u308a\u307e\u305b\u3093\n[ec2-user@ip-172-31-4-XXX ~]$ ls -ald /var/log/nginx\ndrwx------ 2 nginx nginx 4096  9\u6708 20 08:26 /var/log/nginx\n```\n\n## 8. \u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u5909\u66f4\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo chmod 755 /var/log/nginx/\n[ec2-user@ip-172-31-4-XXX ~]$ ls -ald /var/log/nginx\ndrwxr-xr-x 2 nginx nginx 4096  9\u6708 20 08:26 /var/log/nginx\n[ec2-user@ip-172-31-4-XXX ~]$ tail -f /var/log/nginx/access.log\nXXX.XXX.XX.XXX - - [20/Sep/2015:08:29:09 +0000] ...\nXXX.XXX.XX.XXX - - [20/Sep/2015:08:30:01 +0000] ...\n```\n\n# php-fpm\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n## 1. php5.6\u53ca\u3073php-fpm\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo yum install php56 php56-fpm -y\n```\n\n## 2. \u78ba\u8a8d\u7528\u306ephp\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n```php:/usr/share/nginx/html/phpinfo.php\n<?php\n    phpinfo();\n```\n\n## 3. php-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\n###### user\u3068group\u3092apache\u304b\u3089nginx\u306b\u5909\u66f4\n```/etc/php-fpm-5.6.d/www.conf\n- user = apache\n+ user = nginx\n\n- group = apache\n+ group = nginx\n```\n## 4. nginx\u306e\u8a2d\u5b9a\u5909\u66f4\n```nginx:/etc/nginx/nginx.conf\n  http {\n-   index index.html index.htm;\n+   index index.php index.html index.htm;\n      server {\n       root /usr/share/nginx/html;\n\n-       #location ~ \\.php$ {\n-       #    root           html;\n-       #    fastcgi_pass   127.0.0.1:9000;\n-       #    fastcgi_index  index.php;\n-       #    fastcgi_param  SCRIPT_FILENAME/scripts$fastcgi_script_name;\n-       #    include        fastcgi_params;\n-       #}\n+       location ~ \\.php$ {\n+       root           html;\n+       fastcgi_pass   127.0.0.1:9000;\n+       fastcgi_index  index.php;\n+       fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n+       include        fastcgi_params;\n+     }\n```\n\n## 5. php-fpm\u7a3c\u50cd\u53ca\u3073\u81ea\u52d5\u7a3c\u50cd\u8a2d\u5b9a\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service php-fpm start\n[ec2-user@ip-172-31-4-XXX ~]$ sudo chkconfig php-fpm on\n```\n\n## 6. nginx\u518d\u8d77\u52d5\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx restart\n```\n## 7. \u8a2d\u5b9a\u5909\u66f4\u306e\u78ba\u8a8d\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n<tr><td class=\"e\">PHP Version </td><td class=\"v\">5.6.8 </td></tr>\n```\n\n## 8. nginx\u3068php-fpm\u306e\u63a5\u7d9a\u3092socket\u306b\u3059\u308b\n### php-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\n```/etc/php-fpm-5.6.d/www.conf\n-   listen = 127.0.0.1:9000\n+   listen =  /var/run/php-fpm/php-fpm.sock\n\n-   ;listen.owner = nobody\n-   ;listen.group = nobody\n+   listen.owner = nginx  \n+   listen.group = nginx\n```\n\n### nginx\u306e\u8a2d\u5b9a\u5909\u66f4\n```nginx:/etc/nginx/nginx.conf\n-   fastcgi_pass   127.0.0.1:9000;\n+   fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;\n```\n\n### \u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service php-fpm restart\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx restart \n```\n\n### php\u5b9f\u884c\u306b\u554f\u984c\u306a\u3044\u304b\u78ba\u8a8d\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n```\n\n# \u30d0\u30fc\u30c1\u30e3\u30eb\u74b0\u5883\u4f5c\u6210(feature1-develop.com)\n## 1. php-fpm\u3092\u8a2d\u5b9a\n```/etc/php-fpm-5.6.d/php-fpm-feature1-develop.conf\n[feature1-develop]\nuser = nginx\ngroup = nginx\nlisten = /var/run/php-fpm/php-fpm-feature1-develop.sock\nlisten.owner = nginx\nlisten.group = nginx\nphp_admin_value[disable_functions] = exec,passthru,shell_exec,system\nphp_admin_flag[allow_url_fopen] = off\npm = dynamic\npm.max_children = 5\npm.start_servers = 2\npm.min_spare_servers = 1\npm.max_spare_servers = 3\nchdir = /\n```\n\n## 2. nginx\u306evirtual.conf\u8a2d\u5b9a\n```nginx:/etc/nginx/conf.d/virtual.conf\nserver {\n    listen        80;\n    server_name   feature1-develop.com;\n    access_log    /var/log/nginx/feature1-develop.access.log main;\n    error_log    /var/log/nginx/feature1-develop.error.log;\n    root /var/www/feature1;\n    index index.php;\n    location ~ \\.php$ {\n        root           /var/www/feature1;\n        fastcgi_pass   unix:/var/run/php-fpm/php-fpm-feature1-develop.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}\n```\n\n## 3. \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo mkdir -p /var/www/feature1\n```\n## 4. index.php\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n```php:/var/www/feature1/index.php\n<?php\n    phpinfo();\n```\n\n## 5. php-fpm\u3068nginx\u518d\u8d77\u52d5\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service php-fpm restart\n[ec2-user@ip-172-31-4-XXX ~]$ sudo service nginx restart\n```\n\n## 6. sock\u30d5\u30a1\u30a4\u30eb\u8ffd\u52a0\u78ba\u8a8d\n```bash\n[ec2-user@ip-172-31-4-XXX ~]$ ls -al /var/run/php-fpm/php-fpm-feature1-develop.sock\nsrw-rw---- 1 nginx nginx 0  9\u6708 20 08:54 /var/run/php-fpm/php-fpm-feature1-develop.sock\n```\n\n## 7. \u81ea\u5206\u306e\u30d1\u30bd\u30b3\u30f3\u306b\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a2d\u5b9a\n```bash\n[hoge@local ~]$ sudo -- sh -c \"echo 52.111.111.111 feature1-develop.com >> /etc/hosts\"\n```\n\n## 8. \u30a2\u30af\u30bb\u30b9\u78ba\u8a8d\n#### shell\u4e0a\u3067\u78ba\u8a8d\n```bash\n# \u30a2\u30af\u30bb\u30b9\u78ba\u8a8d\n[hoge@local ~]$ curl -s http://feature1-develop.com/phpinfo.php | grep \"PHP Version\"\n<tr><td class=\"e\">PHP Version </td><td class=\"v\">5.6.12 </td></tr>\n\n# \u300cDOCUMENT_ROOT\u300d\u78ba\u8a8d\n[hoge@local ~]$ curl -s http://feature1-develop.com/phpinfo.php | grep \"DOCUMENT_ROOT\"\n<tr><td class=\"e\">_SERVER[\"DOCUMENT_ROOT\"]</td><td class=\"v\">/var/www/feature1</td></tr>\n```\n#### \u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u78ba\u8a8d\nhttp://feature1-develop.com/phpinfo.php\n\u300cDOCUMENT_ROOT\u300d\u304c\u300c**/var/www/feature1**\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\n![FireShot Capture 1 - phpinfo() - http___feature1-develop.com_.png](https://qiita-image-store.s3.amazonaws.com/0/71860/91ba9813-094c-8360-95ad-d6b43a46ba29.png)\n\n# \u6b21\u306b\u3084\u3063\u305f\u3053\u3068\n> [EC2\u3067php\u74b0\u5883\u69cb\u7bc9 \u2461 git\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9 + altax\u5c0e\u5165 + \u30c7\u30d7\u30ed\u30a4\u30b3\u30de\u30f3\u30c9\u4f5c\u6210](http://qiita.com/jjongs08/items/ba8b813182ef0d42e568)\n", "tags": ["nginx", "PHP", "php-fpm", "VirtualHost"]}