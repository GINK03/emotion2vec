{"context": " More than 1 year has passed since last update.\u3010ver2.1.1\u3011CentOS\u306bElasticSearch\u3092\u5165\u308c\u3066\u8d77\u52d5\u3059\u308b\u307e\u3067\u306e\u7d9a\u304d\u3067\u3059\uff01\n\n\u74b0\u5883(2016-1-12)\n\nCentOS6.5\nElasticSearch2.1.1\n\n\n\u6982\u8981\n\u30c7\u30fc\u30bf\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u306fEmbulk\u3092\u4f7f\u7528\u3057\u307e\u3059\uff01\uff01\nEmbulk\u306b\u306fBigQuery\u3084Redshift\u305d\u3057\u3066\u4eca\u56de\u306eElasticSearch\u3068\u3081\u3063\u3061\u3083\u52a9\u304b\u3063\u3066\u307e\u3059\n\n\u6d41\u308c\n\nEmbulk\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nEmbulk\u672c\u4f53\u306fhttps://github.com/embulk/embulk#linux--mac--bsd\u304b\u3089\u3069\u3046\u305e\n\n\u4f7f\u7528\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306f\ninput\u306bembulk-input-mysql\noutput\u306bembulk-output-elasticsearch\n\u3092\u4f7f\u7528\u3059\u308b\u3002\nembulk-input-mysql\u306b\u95a2\u3057\u3066\u306fembulk gem install embulk-input-mysql\u3067\u3044\u3051\u308b\u3093\u3060\u304c\nembulk-output-elasticsearch\u306b\u95a2\u3057\u3066\u306f2016/1/12\u6642\u70b9\u3067\u306f\u305d\u306e\u307e\u307e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3057\u307e\u3046\u3068\nrun\u3055\u305b\u305f\u6642\u306bFailed to deserialize exception response from stream\u3067\u6012\u3089\u308c\u308b\u306e\u3067gitclone\u3057\u3066build\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\ncd [\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \u203b\u4eca\u56de\u306f/tmp\u3092\u4f8b\u306b\u3059\u308b]\ngit clone https://github.com/muga/embulk-output-elasticsearch.git\ncd embulk-output-elasticsearch\n./gradlew gem\n\n\nElasticsearch\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\n\n/etc/elasticsearch/elasticsearch.yml\n# \u4e0b\u8a18\u3092\u8ffd\u52a0\u3059\u308b\u3002\n# \u4eca\u56de\u306f\u30af\u30e9\u30b9\u30bf\u3068\u304b\u3092\u7d44\u3080\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u3053\u306e\u30ce\u30fc\u30c9\u3092\u30de\u30b9\u30bf\u30fc\u306b\u3059\u308b\n# \u3053\u308c\u3092\u8a2d\u5b9a\u3057\u306a\u3044node\u306a\u3044\u3088\u301c\u3063\u3066\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\nnode.master: true\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\nconfig.yml\nin:\n  type: mysql\n  user: [user\u540d]\n  password: [password]\n  database: [\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d]\n  table: [\u30c6\u30fc\u30d6\u30eb\u540d]\n  host: [host]\n  select: \"*\"\nout:\n  type: elasticsearch\n  index: [index\u540d]\n  index_type: [index\u306e\u30bf\u30a4\u30d7]\n  nodes:\n  - {host: localhost, port: 9300}\n\n\n\npreview\n\nshell\nembulk preview -I /tmp/embulk-output-elasticsearch/lib config.yml\n\n\n\u30dd\u30a4\u30f3\u30c8\u306f-I /tmp/embulk-output-elasticsearch/lib\u3055\u304d\u307b\u3069\u5165\u308c\u305fembulk-output-elasticsearch\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3002\n\u3053\u308c\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\nrun\n\nshell\nembulk run -I /tmp/embulk-output-elasticsearch/lib config.yml\n\n\n\n\u5b9f\u88c5\u78ba\u8a8d\n\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\ncurl -XGET 'http://localhost:9200/[index\u540d]?pretty' \n\n\u30c7\u30fc\u30bf\u306e\u4fdd\u6301\u3055\u308c\u3066\u3044\u308b\u6570\u3092\u8abf\u3079\u308b\ncurl -XGET 'http://localhost:9200/[index\u540d]/[index\u30bf\u30a4\u30d7]/_count?pretty'\n\n\n\u6700\u5f8c\u306b\nEmbulk\u306b\u306f\u672c\u5f53\u306b\u611f\u8b1d\u3067\u3059\u3002\n[\u3010ver2.1.1\u3011CentOS\u306bElasticSearch\u3092\u5165\u308c\u3066\u8d77\u52d5\u3059\u308b\u307e\u3067](http://qiita.com/hata-yusaku/items/8645e4051b76ef63892c)\u306e\u7d9a\u304d\u3067\u3059\uff01\n\n## \u74b0\u5883(2016-1-12)\n* CentOS6.5\n* ElasticSearch2.1.1\n\n## \u6982\u8981\n\u30c7\u30fc\u30bf\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u306f[Embulk](https://github.com/embulk/embulk)\u3092\u4f7f\u7528\u3057\u307e\u3059\uff01\uff01\nEmbulk\u306b\u306fBigQuery\u3084Redshift\u305d\u3057\u3066\u4eca\u56de\u306eElasticSearch\u3068\u3081\u3063\u3061\u3083\u52a9\u304b\u3063\u3066\u307e\u3059\n\n## \u6d41\u308c\n### Embulk\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nEmbulk\u672c\u4f53\u306f[https://github.com/embulk/embulk#linux--mac--bsd](\u3053\u3053)\u304b\u3089\u3069\u3046\u305e\n\n### \u4f7f\u7528\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306f\ninput\u306b[embulk-input-mysql](https://github.com/embulk/embulk-input-jdbc/tree/master/embulk-input-mysql)\noutput\u306b[embulk-output-elasticsearch](https://github.com/muga/embulk-output-elasticsearch)\n\u3092\u4f7f\u7528\u3059\u308b\u3002\nembulk-input-mysql\u306b\u95a2\u3057\u3066\u306f`embulk gem install embulk-input-mysql`\u3067\u3044\u3051\u308b\u3093\u3060\u304c\nembulk-output-elasticsearch\u306b\u95a2\u3057\u3066\u306f2016/1/12\u6642\u70b9\u3067\u306f\u305d\u306e\u307e\u307e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3057\u307e\u3046\u3068\nrun\u3055\u305b\u305f\u6642\u306b`Failed to deserialize exception response from stream`\u3067\u6012\u3089\u308c\u308b\u306e\u3067gitclone\u3057\u3066build\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\n```\ncd [\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \u203b\u4eca\u56de\u306f/tmp\u3092\u4f8b\u306b\u3059\u308b]\ngit clone https://github.com/muga/embulk-output-elasticsearch.git\ncd embulk-output-elasticsearch\n./gradlew gem\n```\n\n### Elasticsearch\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\n```lang:/etc/elasticsearch/elasticsearch.yml\n# \u4e0b\u8a18\u3092\u8ffd\u52a0\u3059\u308b\u3002\n# \u4eca\u56de\u306f\u30af\u30e9\u30b9\u30bf\u3068\u304b\u3092\u7d44\u3080\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u3053\u306e\u30ce\u30fc\u30c9\u3092\u30de\u30b9\u30bf\u30fc\u306b\u3059\u308b\n# \u3053\u308c\u3092\u8a2d\u5b9a\u3057\u306a\u3044node\u306a\u3044\u3088\u301c\u3063\u3066\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\nnode.master: true\n```\n\n\n### \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n```lang:config.yml\nin:\n  type: mysql\n  user: [user\u540d]\n  password: [password]\n  database: [\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d]\n  table: [\u30c6\u30fc\u30d6\u30eb\u540d]\n  host: [host]\n  select: \"*\"\nout:\n  type: elasticsearch\n  index: [index\u540d]\n  index_type: [index\u306e\u30bf\u30a4\u30d7]\n  nodes:\n  - {host: localhost, port: 9300}\n```\n\n### preview\n```lang:shell\nembulk preview -I /tmp/embulk-output-elasticsearch/lib config.yml\n```\n\u30dd\u30a4\u30f3\u30c8\u306f`-I /tmp/embulk-output-elasticsearch/lib`\u3055\u304d\u307b\u3069\u5165\u308c\u305fembulk-output-elasticsearch\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3002\n\u3053\u308c\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n### run\n```lang:shell\nembulk run -I /tmp/embulk-output-elasticsearch/lib config.yml\n```\n\n## \u5b9f\u88c5\u78ba\u8a8d\n\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\n\n```\ncurl -XGET 'http://localhost:9200/[index\u540d]?pretty' \n```\n\n\u30c7\u30fc\u30bf\u306e\u4fdd\u6301\u3055\u308c\u3066\u3044\u308b\u6570\u3092\u8abf\u3079\u308b\n\n```\ncurl -XGET 'http://localhost:9200/[index\u540d]/[index\u30bf\u30a4\u30d7]/_count?pretty'\n```\n\n## \u6700\u5f8c\u306b\nEmbulk\u306b\u306f\u672c\u5f53\u306b\u611f\u8b1d\u3067\u3059\u3002\n", "tags": ["CentOS", "Elasticsearch", "MySQL", "Embulk"]}