{"context": "\n\n\u53c2\u8003\n\nAbout Puppet Collections and packages \u2014 Documentation \u2014 Puppet\n\ncentos7\u306e\u5834\u5408\u3001puppet2\u7cfb\u306f\u63d0\u4f9b\u3055\u308c\u3066\u3044\u306a\u3044\u3002\u3042\u3068ruby2.0\u304c\u5165\u308b\n\nhttps://yum.puppetlabs.com/el/7/products/x86_64/puppetlabs-release-7-12.noarch.rpm\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u6700\u65b0\u306fpuppet3\u7cfb\u3060\u304c\u3001puppet2\u7cfb\u3068\u4e92\u63db\u6027\u304c\u306a\u3044\npuppet2.6\u3068puppet2.7\u3067\u3082\u3046\u307e\u304f\u884c\u304b\u306a\u304b\u3063\u305f\u305f\u3081\u4eca\u56de\u306f2.6\u7cfb\u6700\u65b0\u306e2.6.18\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n\npuppet\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nrpm -ivh https://yum.puppetlabs.com/el/6/products/x86_64/puppetlabs-release-6-12.noarch.rpm\n\n#yum install puppet-server-2.7.26\nyum install puppet-server-2.6.18\n\n\n\n\u4f9d\u5b58\u95a2\u4fc2\n=================================================================================================================================\n \u30d1\u30c3\u30b1\u30fc\u30b8                      \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3        \u30d0\u30fc\u30b8\u30e7\u30f3                       \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc                        \u5bb9\u91cf\n=================================================================================================================================\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059:\n puppet-server                   noarch                2.6.18-1.el6                     puppetlabs-products                 22 k\n\u4f9d\u5b58\u6027\u95a2\u9023\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u307e\u3059\u3002:\n augeas-libs                     x86_64                1.0.0-10.el6                     base                               314 k\n compat-readline5                x86_64                5.2-17.1.el6                     base                               130 k\n dmidecode                       x86_64                1:2.12-7.el6                     base                                74 k\n facter                          x86_64                1:2.4.6-1.el6                    puppetlabs-products                 99 k\n libselinux-ruby                 x86_64                2.0.94-7.el6                     base                               100 k\n pciutils                        x86_64                3.1.10-4.el6                     base                                85 k\n pciutils-libs                   x86_64                3.1.10-4.el6                     base                                34 k\n puppet                          noarch                2.6.18-1.el6                     puppetlabs-products                816 k\n ruby                            x86_64                1.8.7.374-4.el6_6                base                               538 k\n ruby-augeas                     x86_64                0.4.1-3.el6                      puppetlabs-deps                     21 k\n ruby-libs                       x86_64                1.8.7.374-4.el6_6                base                               1.7 M\n ruby-shadow                     x86_64                1:2.2.0-2.el6                    puppetlabs-deps                     13 k\n virt-what                       x86_64                1.11-1.2.el6                     base                                24 k\n\n\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u8981\u7d04\n=================================================================================================================================\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb        14 \u30d1\u30c3\u30b1\u30fc\u30b8\n\n\u7dcf\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5bb9\u91cf: 3.9 M\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u5bb9\u91cf: 10 M\n\u3053\u308c\u3067\u3044\u3044\u3067\u3059\u304b? [y/N]\n\n\n\n\u8a2d\u5b9a\n# server\ntouch /etc/puppet/manifests/site.pp \nservice puppetmaster start\n\n# client\nsed -i -e \"s/#PUPPET_SERVER=puppet/PUPPET_SERVER=${HOSTNAME}/\" /etc/sysconfig/puppet\nservice puppet start\npuppet agent --server ${HOSTNAME} --test --noop\n\n\nsign\n# server\npuppet cert --list --all\n# \u81ea\u5206\u81ea\u8eab\u3067\u3042\u308c\u3070\u3059\u3067\u306bsign\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u98db\u3070\u3059\n#puppet cert sign ${HOSTNAME}\n\n# \u5ff5\u306e\u305f\u3081\u3001cert\u306e\u524a\u9664\u65b9\u6cd5\n#puppet cert clean ${HOSTNAME}\n\n# /etc/puppet/\u30922\u7cfb\u306e\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u305f\u6642\u306a\u3069\u3001ssl\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u5834\u5408\u306f\n#mv /var/lib/puppet/ssl /var/lib/puppet/ssl.bak\n#service puppet restart\n#service puppetmaster restart\n\n\n\n\u52d5\u4f5c\u4f8b\n\n \u4f8b\u3068\u3057\u3066\u300ctestgroup\u300d\u3068\u3044\u3046\u540d\u524d\u3067 GID\u300c2000\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\n\n\n/etc/puppet/manifests/site.pp\ngroup { 'testgroup':\n    ensure => present,\n    gid    => 2000,\n}\n\n\n# dry-run\npuppet agent --server ${HOSTNAME} --test --noop --verbose\n# \u5b9f\u884c\npuppet agent --server ${HOSTNAME} --test --verbose\n\n\n\u30a8\u30e9\u30fc\u4f8b\n$ puppet agent --server ${HOSTNAME} --test --noop --verbose\nnotice: Run of Puppet configuration client already in progress; skipping\n\n\u30ed\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u308b\u306e\u304c\u539f\u56e0\u3068\u306e\u60c5\u5831\u3082\u3042\u3063\u305f\u304c\u3001\n\u8a72\u5f53\u306e\u30ed\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n1\u5206\u5f8c\u304f\u3089\u3044\u306b\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u3068\u5b9f\u884c\u3067\u304d\u305f\u3002\n## \u53c2\u8003\n\n* [About Puppet Collections and packages \u2014 Documentation \u2014 Puppet](https://docs.puppet.com/puppet/latest/puppet_collections.html#puppet-collection-contents)\n\n```bash:\ncentos7\u306e\u5834\u5408\u3001puppet2\u7cfb\u306f\u63d0\u4f9b\u3055\u308c\u3066\u3044\u306a\u3044\u3002\u3042\u3068ruby2.0\u304c\u5165\u308b\n\nhttps://yum.puppetlabs.com/el/7/products/x86_64/puppetlabs-release-7-12.noarch.rpm\n```\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* \u6700\u65b0\u306fpuppet3\u7cfb\u3060\u304c\u3001puppet2\u7cfb\u3068\u4e92\u63db\u6027\u304c\u306a\u3044\n* puppet2.6\u3068puppet2.7\u3067\u3082\u3046\u307e\u304f\u884c\u304b\u306a\u304b\u3063\u305f\u305f\u3081\u4eca\u56de\u306f2.6\u7cfb\u6700\u65b0\u306e2.6.18\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```bash:puppet\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nrpm -ivh https://yum.puppetlabs.com/el/6/products/x86_64/puppetlabs-release-6-12.noarch.rpm\n\n#yum install puppet-server-2.7.26\nyum install puppet-server-2.6.18\n```\n\n```rb:\u4f9d\u5b58\u95a2\u4fc2\n=================================================================================================================================\n \u30d1\u30c3\u30b1\u30fc\u30b8                      \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3        \u30d0\u30fc\u30b8\u30e7\u30f3                       \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc                        \u5bb9\u91cf\n=================================================================================================================================\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059:\n puppet-server                   noarch                2.6.18-1.el6                     puppetlabs-products                 22 k\n\u4f9d\u5b58\u6027\u95a2\u9023\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u307e\u3059\u3002:\n augeas-libs                     x86_64                1.0.0-10.el6                     base                               314 k\n compat-readline5                x86_64                5.2-17.1.el6                     base                               130 k\n dmidecode                       x86_64                1:2.12-7.el6                     base                                74 k\n facter                          x86_64                1:2.4.6-1.el6                    puppetlabs-products                 99 k\n libselinux-ruby                 x86_64                2.0.94-7.el6                     base                               100 k\n pciutils                        x86_64                3.1.10-4.el6                     base                                85 k\n pciutils-libs                   x86_64                3.1.10-4.el6                     base                                34 k\n puppet                          noarch                2.6.18-1.el6                     puppetlabs-products                816 k\n ruby                            x86_64                1.8.7.374-4.el6_6                base                               538 k\n ruby-augeas                     x86_64                0.4.1-3.el6                      puppetlabs-deps                     21 k\n ruby-libs                       x86_64                1.8.7.374-4.el6_6                base                               1.7 M\n ruby-shadow                     x86_64                1:2.2.0-2.el6                    puppetlabs-deps                     13 k\n virt-what                       x86_64                1.11-1.2.el6                     base                                24 k\n\n\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u306e\u8981\u7d04\n=================================================================================================================================\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb        14 \u30d1\u30c3\u30b1\u30fc\u30b8\n\n\u7dcf\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u5bb9\u91cf: 3.9 M\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u5bb9\u91cf: 10 M\n\u3053\u308c\u3067\u3044\u3044\u3067\u3059\u304b? [y/N]\n```\n\n\n## \u8a2d\u5b9a\n\n```bash:\n# server\ntouch /etc/puppet/manifests/site.pp \nservice puppetmaster start\n\n# client\nsed -i -e \"s/#PUPPET_SERVER=puppet/PUPPET_SERVER=${HOSTNAME}/\" /etc/sysconfig/puppet\nservice puppet start\npuppet agent --server ${HOSTNAME} --test --noop\n```\n\n```bash:sign\n# server\npuppet cert --list --all\n# \u81ea\u5206\u81ea\u8eab\u3067\u3042\u308c\u3070\u3059\u3067\u306bsign\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u98db\u3070\u3059\n#puppet cert sign ${HOSTNAME}\n\n# \u5ff5\u306e\u305f\u3081\u3001cert\u306e\u524a\u9664\u65b9\u6cd5\n#puppet cert clean ${HOSTNAME}\n\n# /etc/puppet/\u30922\u7cfb\u306e\u3082\u306e\u306b\u5dee\u3057\u66ff\u3048\u305f\u6642\u306a\u3069\u3001ssl\u304c\u304a\u304b\u3057\u304f\u306a\u3063\u305f\u5834\u5408\u306f\n#mv /var/lib/puppet/ssl /var/lib/puppet/ssl.bak\n#service puppet restart\n#service puppetmaster restart\n```\n\n## \u52d5\u4f5c\u4f8b\n\n*  \u4f8b\u3068\u3057\u3066\u300ctestgroup\u300d\u3068\u3044\u3046\u540d\u524d\u3067 GID\u300c2000\u300d\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\n\n```puppet:/etc/puppet/manifests/site.pp\ngroup { 'testgroup':\n    ensure => present,\n    gid    => 2000,\n}\n```\n\n```bash:\n# dry-run\npuppet agent --server ${HOSTNAME} --test --noop --verbose\n# \u5b9f\u884c\npuppet agent --server ${HOSTNAME} --test --verbose\n```\n\n\n## \u30a8\u30e9\u30fc\u4f8b\n\n```\n$ puppet agent --server ${HOSTNAME} --test --noop --verbose\nnotice: Run of Puppet configuration client already in progress; skipping\n```\n\n\u30ed\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u308b\u306e\u304c\u539f\u56e0\u3068\u306e\u60c5\u5831\u3082\u3042\u3063\u305f\u304c\u3001\n\u8a72\u5f53\u306e\u30ed\u30c3\u30af\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n1\u5206\u5f8c\u304f\u3089\u3044\u306b\u518d\u5ea6\u5b9f\u884c\u3059\u308b\u3068\u5b9f\u884c\u3067\u304d\u305f\u3002\n", "tags": ["Puppet"]}