{"context": " More than 1 year has passed since last update.\n\nVagrant Tips\u306e\u30b5\u30de\u30ea\u30da\u30fc\u30b8\u306f\u3053\u3061\u3089\n\n\n\u3053\u306e\u8a18\u4e8b\u306e\u30b5\u30de\u30ea\n\u3053\u306e\u8a18\u4e8b\u306b\u63b2\u8f09\u3055\u308c\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092vagrant\u306b\u98df\u308f\u305b\u308b\u3068\u3001\u81ea\u52d5\u7684\u306bTomcat\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001java\u306eweb\u30a2\u30d7\u30ea\u306e\u5b9f\u9a13\u306a\u3069\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5bfe\u8c61\u8aad\u8005\ntomcat\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fsandbox\u3067\u3001Java\u306eweb\u30a2\u30d7\u30ea\u3092\u30a2\u30ec\u30b3\u30ec\u3068\u8a66\u3057\u3066\u307f\u305f\u3044\u4eba\u5411\u3051\u3002\n\n\u52d5\u4f5c\u78ba\u8a8d\u30d0\u30fc\u30b8\u30e7\u30f3\nvagrant version\u306e\u7d50\u679c\nInstalled Version: 1.7.4\n\n\u7d4c\u7def\n\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3092\u6c5a\u3055\u306a\u3044\u3067\u3001Java\u3067Web\u306a\u30a2\u30d7\u30ea\u306e\u691c\u8a3c\u3092\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u3068\u306f\nJava\u3067Web\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\u307b\u307c\u5fc5\u305a\u3068\u3044\u3063\u3066\u3088\u3044\u307b\u3069Servlet\u3068\u3044\u3046\u8a00\u8449\u304c\u51fa\u3066\u304d\u307e\u3059\u3002Struts\u3084Spring MVC\u3001Seasor\u306a\u3069\u306a\u3069Web\u5411\u3051\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u3063\u305f\u5834\u5408\u3082\u3001\u571f\u53f0\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u306fServlet\u306e\u6280\u8853\u3067\u3059\u3002\n\u3053\u306eServlet\u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001web\u30b3\u30f3\u30c6\u30ca\u3068\u304bServlet\u30b3\u30f3\u30c6\u30ca\u3068\u547c\u3070\u308c\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001Tomcat\u3084JBoss\u3001Jetty\u3001WebLogic Server\u3001WebSphere Application Server\u3068\u3044\u3063\u305f\u3082\u306e\u3067\u3059\u3002\n\u672c\u7a3f\u3067\u306f\u3001\u305d\u306e\u4e2d\u3067\u3082\u4e00\u756a\u4f7f\u308f\u308c\u3066\u3044\u308b\u3067\u3042\u308d\u3046Tomcat\u3092Vagrant\u4e0a\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308bTips\u3092\u7d39\u4ecb\u81f4\u3057\u307e\u3059\u3002\n\nTomcat\u74b0\u5883\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n\u305d\u308c\u3067\u306f\u3001\u5b9f\u969b\u306eVagrantfile\u3068\u3001tomcat\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u63d0\u793a\u3057\u307e\u3059\u3002\n\nVagrantfile\nVagrant::Config.run do |config|\n  config.vm.box = \"centos64_6_5\"\n  config.vm.box_url = \"http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_centos-6.5_chef-provisionerless.box\"\n\n  config.vm.define \"web\" do |web|\n    web.vm.network \"hostonly\", \"192.168.55.10\"\n    web.vm.provision \"shell\", path: \"setup_jdk7.sh\"\n    web.vm.provision \"shell\", path: \"setup_tomcat7.sh\"\n  end\nend\n\n\n\u2605setup_jdk.sh\u306f\u3001\nVagrant Tips#2 Oracle\u306ejdk\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u305b\u308b\u306b\u8a18\u8f09\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\ntomcat\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u305b\u308bshell\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002tomcat7.0.54\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f\u3067\u306a\u304b\u3063\u305f\u3089\u3001wget\u3067\u53d6\u5f97\u3059\u308b\u3088\u3046\u306a\u65b9\u5f0f\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fiptables\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u72b6\u614b\u3067\u3042\u308b\u305f\u3081off\u306b\u3057\u3066\u3044\u307e\u3059\u3002\uff08host-only\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u7279\u306b\u4e0b\u304c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3068\u306e\u5224\u65ad\u3067\u3059\u3002\uff09\n\nsetup_tomcat7.sh\n#!/bin/bash\n\nBASE_DIR=\"/vagrant\"\nPACKAGE_DIR=\"${BASE_DIR}/package\"\nTOMCAT_MAJOR_VERSION=7\nTOMCAT_VERSION=${TOMCAT_MAJOR_VERSION}.0.67\nTOMCAT_FILE_NAME=\"apache-tomcat-${TOMCAT_VERSION}\"\nARCHIVED_TOMCAT_FILE_NAME=\"apache-tomcat-${TOMCAT_VERSION}.tar.gz\"\nTOMCAT_URL=\"http://ftp.meisei-u.ac.jp/mirror/apache/dist/tomcat/tomcat-${TOMCAT_MAJOR_VERSION}/v${TOMCAT_VERSION}/bin/${ARCHIVED_TOMCAT_FILE_NAME}\"\nUSR_LOCAL_DIR=\"/usr/local/\"\nCATALINA_HOME=\"${USR_LOCAL_DIR}/tomcat${TOMCAT_MAJOR_VERSION}\"\nTOMCAT_REAL_PATH=\"${USR_LOCAL_DIR}/${TOMCAT_FILE_NAME}\"\n\n\n# create dir\nif [ ! -d ${PACKAGE_DIR} ]\nthen\n  mkdir -p ${PACKAGE_DIR}\nelse\n  echo \"${PACKAGE_DIR} Is Already Exists So Need Not Create\"\nfi\n\n# if \"archived tomcat file\" is noting\nif [ ! -f ${PACKAGE_DIR}/${ARCHIVED_TOMCAT_FILE_NAME} ]\nthen\n  wget ${TOMCAT_URL} -O ${PACKAGE_DIR}/${ARCHIVED_TOMCAT_FILE_NAME}\nelse\n  echo \"${ARCHIVED_TOMCAT_FILE_NAME} Is Already Exists So Need Not wget\"\nfi\n\n# gunzip \"archived tomcat file\"\nif [ ! -d ${TOMCAT_REAL_PATH} ]\nthen\n  cp -p ${PACKAGE_DIR}/${ARCHIVED_TOMCAT_FILE_NAME} /tmp/${ARCHIVED_TOMCAT_FILE_NAME}\n  tar -xvzf /tmp/${ARCHIVED_TOMCAT_FILE_NAME} -C ${USR_LOCAL_DIR}\n  sudo ln -s ${TOMCAT_REAL_PATH} ${CATALINA_HOME}\n  sudo chown -R vagrant:vagrant ${CATALINA_HOME}\nelse\n  echo \"${CATALINA_HOME} Is Already Exists\"\nfi\n\n# copy setenv.sh\necho \"copy setenv.sh\"\nsudo cp -p /vagrant/confs/tomcat/setenv.sh ${CATALINA_HOME}/bin\nsudo chown -R vagrant:vagrant ${CATALINA_HOME}/\n\n# setup tomcat init script\necho \"copy /etc/init.d/tomcat\"\nsudo cp -p /vagrant/confs/tomcat/tomcat /etc/init.d/\nsudo chown vagrant:vagrant /etc/init.d/tomcat\n\nsudo /etc/init.d/tomcat start\n\nsudo service iptables stop\n\n\n\nconfs/tomcat/setenv.sh\n#!/bin/sh\n\nexport CATALINA_OPTS=\"$CATALINA_OPTS -Xms64m\"\nexport CATALINA_OPTS=\"$CATALINA_OPTS -Xmx512m\"\nexport CATALINA_OPTS=\"$CATALINA_OPTS -XX:MaxPermSize=256m\"\nexport CATALINA_OPTS=\"$CATALINA_OPTS -server\"\n\n#DATE=`date +'%Y%m%d-%H%M'`\n#CATALINA_OPTS=\"-server -XX:MaxPermSize=256m -XX:PermSize=256m -XX:SurvivorRatio=2 -Xmn256 -Xmx256 -Xms256\"\n#CATALINA_OPTS=\"${CATALINA_OPTS} -XX:+PrintGCDetails -Xloggc:${CATALINA_BASE}/logs/gc.log.${DATE}\"\n#CATALINA_OPTS=\"${CATALINA_OPTS} -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=3333 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=true\"\n#CATALINA_OPTS=\"${CATALINA_OPTS} -Dcom.sun.management.jmxremote.password.file=${CATALINA_BASE}/conf/jmxremote.password -Dcom.sun.management.jmxremote.access.file=${CATALINA_BASE}/conf/jmxremote.access\"\n\necho \"Using CATALINA_BASE: ${CATALINA_OPTS}\"\nexport CATALINA_OPTS\n\n\n\nconfs/tomcat/tomcat\n#!/bin/bash\n#\n# Startup script for the Tomcat Servlet Container\n#\n# chkconfig: 2345 35 65\n# description: Tomcat is the servlet container that is used in the official \\\n#              Reference Implementation for the Java Servlet and JavaServer \\\n#              Pages technologies\n\nTOMCAT_USER=vagrant\nCATALINA_HOME=/usr/local/tomcat7\n\n. /etc/rc.d/init.d/functions\nprog=tomcat\n\nstart() {\n    echo -n $\"Starting $prog: \"\n    daemon --user $TOMCAT_USER $CATALINA_HOME/bin/startup.sh > /dev/null\n    RETVAL=$?\n    if [ $RETVAL -eq 0 ]; then\n        echo_success\n    else\n        echo_failure\n    fi\n    echo\n    [ $RETVAL = 0 ] && touch /var/lock/subsys/$prog\n    return $RETVAL\n}\nstop() {\n    echo -n $\"Stopping $prog: \"\n    daemon --user $TOMCAT_USER $CATALINA_HOME/bin/shutdown.sh > /dev/null\n    RETVAL=$?\n    if [ $RETVAL -eq 0 ]; then\n        echo_success\n    else\n        echo_failure\n    fi\n    echo\n    [ $RETVAL = 0 ] && rm -f /var/lock/subsys/$prog\n    return $RETVAL\n}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n    start\n    ;;\n  stop)\n    stop\n    ;;\n  restart)\n    stop\n    start\n    ;;\n  status)\n    INSTANCES=`ps --columns 512 -aef|grep java|grep tomcat|grep org.apache.catalina.startup.Bootstrap|wc -l`\n    if [ $INSTANCES -eq 0 ]; then\n        echo $prog is stopped\n        RETVAL=3\n    else\n        if [ $INSTANCES -eq 1 ]; then\n            echo $prog is running 1 instance...\n        else\n            echo $prog is running $INSTANCES instances...\n        fi\n        RETVAL=0\n    fi\n    ;;\n  *)\n    echo $\"Usage: $prog {start|stop|restart|status|help}\"\n    exit 1\nesac\n\nexit $RETVAL\n\n\n\u4e0a\u8a18\u3092\u914d\u7f6e\u3057\u3066\u3001vagrant up\u3057\u305f\u5f8c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u300chttp://192.168.55.10:8080/\u300d\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001Tomcat\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30da\u30fc\u30b8\u304c\u51fa\u3066\u304f\u308c\u3070OK\u3067\u3059\u3002\n\u3042\u3068\u306f\u3001\u9069\u5b9c\u30a2\u30d7\u30ea\u3092\u914d\u7f6e\u3057\u3066\u3042\u3052\u308c\u3070\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u5b9f\u9a13\u306b\u4f7f\u3048\u307e\u3059\u3002\n##[Vagrant Tips\u306e\u30b5\u30de\u30ea\u30da\u30fc\u30b8\u306f\u3053\u3061\u3089](http://qiita.com/yukimura1227/items/7e34bb12d36e8aa2e6c3)\n\n# \u3053\u306e\u8a18\u4e8b\u306e\u30b5\u30de\u30ea\n\u3053\u306e\u8a18\u4e8b\u306b\u63b2\u8f09\u3055\u308c\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092vagrant\u306b\u98df\u308f\u305b\u308b\u3068\u3001\u81ea\u52d5\u7684\u306bTomcat\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001java\u306eweb\u30a2\u30d7\u30ea\u306e\u5b9f\u9a13\u306a\u3069\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u5bfe\u8c61\u8aad\u8005\ntomcat\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fsandbox\u3067\u3001Java\u306eweb\u30a2\u30d7\u30ea\u3092\u30a2\u30ec\u30b3\u30ec\u3068\u8a66\u3057\u3066\u307f\u305f\u3044\u4eba\u5411\u3051\u3002\n\n# \u52d5\u4f5c\u78ba\u8a8d\u30d0\u30fc\u30b8\u30e7\u30f3\n`vagrant version`\u306e\u7d50\u679c\nInstalled Version: 1.7.4\n\n# \u7d4c\u7def\n\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3092\u6c5a\u3055\u306a\u3044\u3067\u3001Java\u3067Web\u306a\u30a2\u30d7\u30ea\u306e\u691c\u8a3c\u3092\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3002\n\n# \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u3068\u306f\nJava\u3067Web\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\u307b\u307c\u5fc5\u305a\u3068\u3044\u3063\u3066\u3088\u3044\u307b\u3069Servlet\u3068\u3044\u3046\u8a00\u8449\u304c\u51fa\u3066\u304d\u307e\u3059\u3002Struts\u3084Spring MVC\u3001Seasor\u306a\u3069\u306a\u3069Web\u5411\u3051\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u3063\u305f\u5834\u5408\u3082\u3001\u571f\u53f0\u3068\u306a\u3063\u3066\u3044\u308b\u306e\u306fServlet\u306e\u6280\u8853\u3067\u3059\u3002\n\u3053\u306eServlet\u3092\u5229\u7528\u3059\u308b\u306b\u306f\u3001web\u30b3\u30f3\u30c6\u30ca\u3068\u304bServlet\u30b3\u30f3\u30c6\u30ca\u3068\u547c\u3070\u308c\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002\u5177\u4f53\u7684\u306b\u306f\u3001Tomcat\u3084JBoss\u3001Jetty\u3001WebLogic Server\u3001WebSphere Application Server\u3068\u3044\u3063\u305f\u3082\u306e\u3067\u3059\u3002\n\u672c\u7a3f\u3067\u306f\u3001\u305d\u306e\u4e2d\u3067\u3082\u4e00\u756a\u4f7f\u308f\u308c\u3066\u3044\u308b\u3067\u3042\u308d\u3046Tomcat\u3092Vagrant\u4e0a\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308bTips\u3092\u7d39\u4ecb\u81f4\u3057\u307e\u3059\u3002\n\n# Tomcat\u74b0\u5883\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\n\u305d\u308c\u3067\u306f\u3001\u5b9f\u969b\u306eVagrantfile\u3068\u3001tomcat\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u63d0\u793a\u3057\u307e\u3059\u3002\n\n```ruby:Vagrantfile\nVagrant::Config.run do |config|\n  config.vm.box = \"centos64_6_5\"\n  config.vm.box_url = \"http://opscode-vm-bento.s3.amazonaws.com/vagrant/virtualbox/opscode_centos-6.5_chef-provisionerless.box\"\n\n  config.vm.define \"web\" do |web|\n    web.vm.network \"hostonly\", \"192.168.55.10\"\n    web.vm.provision \"shell\", path: \"setup_jdk7.sh\"\n    web.vm.provision \"shell\", path: \"setup_tomcat7.sh\"\n  end\nend\n```\n\n\u2605setup_jdk.sh\u306f\u3001\n[Vagrant Tips#2 Oracle\u306ejdk\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u305b\u308b](http://qiita.com/yukimura1227/items/4c30ceef01ddc6ac2da4)\u306b\u8a18\u8f09\u3057\u3066\u304a\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\ntomcat\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u305b\u308bshell\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002tomcat7.0.54\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f\u3067\u306a\u304b\u3063\u305f\u3089\u3001wget\u3067\u53d6\u5f97\u3059\u308b\u3088\u3046\u306a\u65b9\u5f0f\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u307e\u305f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fiptables\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u72b6\u614b\u3067\u3042\u308b\u305f\u3081off\u306b\u3057\u3066\u3044\u307e\u3059\u3002\uff08host-only\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u7279\u306b\u4e0b\u304c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3068\u306e\u5224\u65ad\u3067\u3059\u3002\uff09\n\n```bash:setup_tomcat7.sh\n#!/bin/bash\n\nBASE_DIR=\"/vagrant\"\nPACKAGE_DIR=\"${BASE_DIR}/package\"\nTOMCAT_MAJOR_VERSION=7\nTOMCAT_VERSION=${TOMCAT_MAJOR_VERSION}.0.67\nTOMCAT_FILE_NAME=\"apache-tomcat-${TOMCAT_VERSION}\"\nARCHIVED_TOMCAT_FILE_NAME=\"apache-tomcat-${TOMCAT_VERSION}.tar.gz\"\nTOMCAT_URL=\"http://ftp.meisei-u.ac.jp/mirror/apache/dist/tomcat/tomcat-${TOMCAT_MAJOR_VERSION}/v${TOMCAT_VERSION}/bin/${ARCHIVED_TOMCAT_FILE_NAME}\"\nUSR_LOCAL_DIR=\"/usr/local/\"\nCATALINA_HOME=\"${USR_LOCAL_DIR}/tomcat${TOMCAT_MAJOR_VERSION}\"\nTOMCAT_REAL_PATH=\"${USR_LOCAL_DIR}/${TOMCAT_FILE_NAME}\"\n\n\n# create dir\nif [ ! -d ${PACKAGE_DIR} ]\nthen\n  mkdir -p ${PACKAGE_DIR}\nelse\n  echo \"${PACKAGE_DIR} Is Already Exists So Need Not Create\"\nfi\n\n# if \"archived tomcat file\" is noting\nif [ ! -f ${PACKAGE_DIR}/${ARCHIVED_TOMCAT_FILE_NAME} ]\nthen\n  wget ${TOMCAT_URL} -O ${PACKAGE_DIR}/${ARCHIVED_TOMCAT_FILE_NAME}\nelse\n  echo \"${ARCHIVED_TOMCAT_FILE_NAME} Is Already Exists So Need Not wget\"\nfi\n\n# gunzip \"archived tomcat file\"\nif [ ! -d ${TOMCAT_REAL_PATH} ]\nthen\n  cp -p ${PACKAGE_DIR}/${ARCHIVED_TOMCAT_FILE_NAME} /tmp/${ARCHIVED_TOMCAT_FILE_NAME}\n  tar -xvzf /tmp/${ARCHIVED_TOMCAT_FILE_NAME} -C ${USR_LOCAL_DIR}\n  sudo ln -s ${TOMCAT_REAL_PATH} ${CATALINA_HOME}\n  sudo chown -R vagrant:vagrant ${CATALINA_HOME}\nelse\n  echo \"${CATALINA_HOME} Is Already Exists\"\nfi\n\n# copy setenv.sh\necho \"copy setenv.sh\"\nsudo cp -p /vagrant/confs/tomcat/setenv.sh ${CATALINA_HOME}/bin\nsudo chown -R vagrant:vagrant ${CATALINA_HOME}/\n\n# setup tomcat init script\necho \"copy /etc/init.d/tomcat\"\nsudo cp -p /vagrant/confs/tomcat/tomcat /etc/init.d/\nsudo chown vagrant:vagrant /etc/init.d/tomcat\n\nsudo /etc/init.d/tomcat start\n\nsudo service iptables stop\n```\n\n```bash:confs/tomcat/setenv.sh\n#!/bin/sh\n\nexport CATALINA_OPTS=\"$CATALINA_OPTS -Xms64m\"\nexport CATALINA_OPTS=\"$CATALINA_OPTS -Xmx512m\"\nexport CATALINA_OPTS=\"$CATALINA_OPTS -XX:MaxPermSize=256m\"\nexport CATALINA_OPTS=\"$CATALINA_OPTS -server\"\n\n#DATE=`date +'%Y%m%d-%H%M'`\n#CATALINA_OPTS=\"-server -XX:MaxPermSize=256m -XX:PermSize=256m -XX:SurvivorRatio=2 -Xmn256 -Xmx256 -Xms256\"\n#CATALINA_OPTS=\"${CATALINA_OPTS} -XX:+PrintGCDetails -Xloggc:${CATALINA_BASE}/logs/gc.log.${DATE}\"\n#CATALINA_OPTS=\"${CATALINA_OPTS} -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=3333 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=true\"\n#CATALINA_OPTS=\"${CATALINA_OPTS} -Dcom.sun.management.jmxremote.password.file=${CATALINA_BASE}/conf/jmxremote.password -Dcom.sun.management.jmxremote.access.file=${CATALINA_BASE}/conf/jmxremote.access\"\n\necho \"Using CATALINA_BASE: ${CATALINA_OPTS}\"\nexport CATALINA_OPTS\n```\n\n```bash:confs/tomcat/tomcat\n#!/bin/bash\n#\n# Startup script for the Tomcat Servlet Container\n#\n# chkconfig: 2345 35 65\n# description: Tomcat is the servlet container that is used in the official \\\n#              Reference Implementation for the Java Servlet and JavaServer \\\n#              Pages technologies\n\nTOMCAT_USER=vagrant\nCATALINA_HOME=/usr/local/tomcat7\n\n. /etc/rc.d/init.d/functions\nprog=tomcat\n\nstart() {\n    echo -n $\"Starting $prog: \"\n    daemon --user $TOMCAT_USER $CATALINA_HOME/bin/startup.sh > /dev/null\n    RETVAL=$?\n    if [ $RETVAL -eq 0 ]; then\n        echo_success\n    else\n        echo_failure\n    fi\n    echo\n    [ $RETVAL = 0 ] && touch /var/lock/subsys/$prog\n    return $RETVAL\n}\nstop() {\n    echo -n $\"Stopping $prog: \"\n    daemon --user $TOMCAT_USER $CATALINA_HOME/bin/shutdown.sh > /dev/null\n    RETVAL=$?\n    if [ $RETVAL -eq 0 ]; then\n        echo_success\n    else\n        echo_failure\n    fi\n    echo\n    [ $RETVAL = 0 ] && rm -f /var/lock/subsys/$prog\n    return $RETVAL\n}\n\n# See how we were called.\ncase \"$1\" in\n  start)\n    start\n    ;;\n  stop)\n    stop\n    ;;\n  restart)\n    stop\n    start\n    ;;\n  status)\n    INSTANCES=`ps --columns 512 -aef|grep java|grep tomcat|grep org.apache.catalina.startup.Bootstrap|wc -l`\n    if [ $INSTANCES -eq 0 ]; then\n        echo $prog is stopped\n        RETVAL=3\n    else\n        if [ $INSTANCES -eq 1 ]; then\n            echo $prog is running 1 instance...\n        else\n            echo $prog is running $INSTANCES instances...\n        fi\n        RETVAL=0\n    fi\n    ;;\n  *)\n    echo $\"Usage: $prog {start|stop|restart|status|help}\"\n    exit 1\nesac\n\nexit $RETVAL\n```\n\n\u4e0a\u8a18\u3092\u914d\u7f6e\u3057\u3066\u3001vagrant up\u3057\u305f\u5f8c\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u300c[http://192.168.55.10:8080/](http://192.168.55.10:8080/)\u300d\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001Tomcat\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30da\u30fc\u30b8\u304c\u51fa\u3066\u304f\u308c\u3070OK\u3067\u3059\u3002\n\u3042\u3068\u306f\u3001\u9069\u5b9c\u30a2\u30d7\u30ea\u3092\u914d\u7f6e\u3057\u3066\u3042\u3052\u308c\u3070\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u5b9f\u9a13\u306b\u4f7f\u3048\u307e\u3059\u3002\n\n", "tags": ["vagrant", "Vagrantfile", "Java"]}