{"context": " More than 1 year has passed since last update.\u3053\u3093\u306b\u3061\u306f\u3001cloudpack \u306e @dz_ \u3053\u3068\u5927\u5e73\u304b\u3065\u307f\u3067\u3059\u3002\n\nPrologue - \u306f\u3058\u3081\u306b\n\u6c17\u5206\u8ee2\u63db\u306b\u3001\u4e45\u3005\u306b\u30af\u30a4\u30c3\u30af\u548c\u8a33\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n[\u8a33] Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u30e9\u30f3\u30d6\u30c3\u30af\u3067\u306e OMS Search API \u306e\u6709\u52b9\u5229\u7528\nLeveraging the OMS Search API in an Azure Automation Runbook\n\nThe availability of the OMS Search API has enabled automation scenarios which involves alerting, notification and potential remediation based on log analytics data in Operations Management Suite (OMS).\n\n\"OMS search API \u306e\u5229\u7528\u306f\u3001Operations Management Suite (OMS) \u306e\u30ed\u30b0\u5206\u6790\u30c7\u30fc\u30bf\u306b\u57fa\u3065\u3044\u305f\u30a2\u30e9\u30fc\u30c8\u3084\u901a\u77e5\u3001\u6f5c\u5728\u7684\u306a\u6539\u5584\u306b\u95a2\u3059\u308b\u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u30b7\u30ca\u30ea\u30aa\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002\"\n\nIn this blog post we will talk about a sample scenario for monitoring a honeypot account with an Azure Automation runbook . This runbook checks if someone has attempted to logon with this account on a specific server. A honeypot account is often used to entice malicious attackers to use a specific account for which monitoring is setup. In addition we will also look into using a Hybrid Runbook Worker for not only leveraging my on-premises resources, but also to overcome potential challenges when there is no PowerShell module to upload to Azure Automation.\n\n\"\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u30e9\u30f3\u30d6\u30c3\u30af\u3092\u7528\u3044\u3066\u3001\u30cf\u30cb\u30fc\u30dd\u30c3\u30c8\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306e\u30b7\u30ca\u30ea\u30aa\u306b\u3064\u3044\u3066\u304a\u8a71\u3057\u307e\u3059\u3002\n\u3053\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u306f\u3001\u8ab0\u304b\u304c\u3053\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u30ed\u30b0\u30aa\u30f3\u672a\u9042\u3057\u305f\u304b\u3069\u3046\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\u3053\u306e\u30cf\u30cb\u30fc\u30dd\u30c3\u30c8\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u3001\u60aa\u610f\u306e\u3042\u308b\u653b\u6483\u8005\u3092\u76e3\u8996\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u7279\u5b9a\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u308f\u305b\u308b\u3088\u3046\u306b\u304a\u3073\u304d\u5bc4\u305b\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002\n\u52a0\u3048\u3066\u3001\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u30ef\u30fc\u30ab\u30fc\u304c\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u6709\u52b9\u306a\u3060\u3051\u3067\u306a\u304f\u3001Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306ePowerShell\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u306a\u3044\u5834\u5408\u306e\u6f5c\u5728\u7684\u306a\u8ab2\u984c\u306b\u5bfe\u51e6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\"\n\nOur runbook will talk to the OMS Search API and is able to execute searches or can retrieve the results of a saved search. Based on the query results we can decide to take corrective actions or to invoke other runbooks for alerting and notification purposes.  During conversations with customers we have been asked many times if OMS has similar System Center Operations Manager (SCOM) task integration to take actions based on OMS search query results. This blog post enables you to explore those options. One thing to point out though is that when using SCOM, the agent locally checks for a certain condition to be true and acts upon that, while in the OMS scenario the information gets sent to OMS first, is indexed and analyzed so that we can query against that data.\n\n\"\u79c1\u305f\u3061\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u306f\u3001OMS Search API \u3092\u7528\u3044\u3066\u3001\u691c\u7d22\u3092\u5b9f\u884c\u3057\u305f\u308a\u3001\u305d\u306e\u4fdd\u5b58\u3055\u308c\u305f\u691c\u7d22\u306e\u7d50\u679c\u3092\u53ce\u96c6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30af\u30a8\u30ea\u30fc\u306e\u7d50\u679c\u306b\u57fa\u3065\u3044\u3066\u3001\u79c1\u305f\u3061\u306f\u898b\u76f4\u3057\u3092\u884c\u3063\u305f\u308a\u3001\u30a2\u30e9\u30fc\u30c8\u3084\u901a\u77e5\u306e\u76ee\u7684\u306e\u305f\u3081\u306b\u4ed6\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u3092\u5b9f\u65bd\u3059\u308b\u3053\u3068\u3092\u6c7a\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u9867\u5ba2\u3068\u306e\u5bfe\u8a71\u306e\u9593\u306b\u3001OMS \u306f OMS search\u306e\u691c\u7d22\u7d50\u679c\u306b\u57fa\u3065\u3044\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u884c\u3046\u305f\u3081\u306e System Center Operations Manager (SCOM) \u306e\u30bf\u30b9\u30af\u9023\u643a\u3068\u540c\u3058\u3088\u3046\u306a\u3082\u306e\u306a\u306e\u304b\u3068\u3001\u4f55\u5ea6\u3082\u805e\u304b\u308c\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u3001\u3042\u306a\u305f\u306f\u3053\u308c\u3089\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u691c\u8a0e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\n\u6ce8\u76ee\u3059\u3079\u304d\u3053\u3068\u306e\u3072\u3068\u3064\u306f\u3001SCOM \u3092\u7528\u3044\u308b\u5834\u5408\u3067\u3082\u3001\u305d\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3042\u308b\u6761\u4ef6\u304c true \u306b\u306a\u308b\u304b\u30ed\u30fc\u30ab\u30eb\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3001\u305d\u306e\u4e0a\u3067\u52d5\u4f5c\u3057\u3001OMS \u30b7\u30ca\u30ea\u30aa\u3092\u5b9f\u65bd\u3057\u3066\u3044\u308b\u9593\u3001OMS\u306b\u6700\u521d\u306b\u9001\u4fe1\u3055\u308c\u305f\u305d\u306e\u60c5\u5831\u306f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5316\u3055\u308c\u3001\u5206\u6790\u3055\u308c\u308b\u305f\u3081\u3001\u79c1\u305f\u3061\u306f\u305d\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u691c\u7d22\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u3002\"\n\nAs mentioned in the OMS Search API announcement you have three different options to leverage the API:\n- Library for .NET\n- REST API\n- ARMClient\nIn this blog post I\u2019m going to use the ARMClient which you can download from Github. The ARMClient cannot really be used as a PowerShell module \u201cas is\u201d and uploaded to Azure Automation. This however is a great opportunity to test the Azure Automation Hybrid Runbook Worker which can overcome this challenge because the runbook is executed locally and has therefore access to local resources like our ARMClient.\n\n\"OMS Search API \u306e\u30a2\u30ca\u30a6\u30f3\u30b9\u3067\u89e6\u308c\u3089\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001\u3053\u306eAPI\u3092\u5229\u7528\u3059\u308b\u306b\u306f3\u3064\u306e\u7570\u306a\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002\n\nLibrary for .NET\nREST API\nARMClient\n\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001GitHub \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b ARMClient \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u3053\u306e ARMClient \u306f\u3001\u672c\u5f53\u306f PowerShell \u30e2\u30b8\u30e5\u30fc\u30eb\u305d\u306e\u3082\u306e\u3068\u3057\u3066\u4f7f\u3048\u305f\u308a\u3001Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u3001\u3053\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u306f\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u79c1\u305f\u3061\u306e ARMClient \u306e\u3088\u3046\u306b(Azure\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u306b)\u30ed\u30fc\u30ab\u30eb\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u524d\u8ff0\u306e\u8ab2\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u30ef\u30fc\u30ab\u30fc\u3092\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306b\u3088\u3044\u6a5f\u4f1a\u3068\u306a\u308a\u307e\u3059\u3002\"\n\nOk, time to set up the basics\n\n\"OK, \u57fa\u672c\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\"\n(\u3053\u306e\u8fba\u3067\u3001\u7d9a\u304d\u306f\u8ffd\u3005\u2026)\n\nEpilogue - \u304a\u308f\u308a\u306b\n\u3075\u3068\u6c17\u306b\u306a\u308b\u8a18\u4e8b\u3060\u3063\u305f\u306e\u3067\u3001\u8a33\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u307e\u3060\u9014\u4e2d\u3067\u3001\u624b\u9806\u306e\u90e8\u5206\u306f\u8ffd\u3005\u8a33\u305d\u3046\u3068\u601d\u3044\u307e\u3059\u3002\nAzure \u306f\u3069\u3093\u3069\u3093\u65b0\u3057\u304f\u306a\u3063\u3066\u3044\u3066\u8ffd\u3046\u306e\u304c\u5927\u5909\u3067\u3059\u304c\u3001\u9762\u767d\u3044\u306e\u3067\u5f15\u304d\u7d9a\u304d\u52c9\u5f37\u3057\u3066\u3044\u304d\u307e\u3059\u3002 \n\n\u8fd1\u6cc1\n\n\u6700\u8fd1\n\n\nCheck! Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3 \u30e9\u30f3\u30d6\u30c3\u30af\u3067 OMS Search API \u3092\u5229\u7528\u3059\u308b (\u548c\u8a33) \u2190  \n\n\n\nPhalcon\u95a2\u9023\n\n\u7206\u901f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af!! Phalcon PHP Framework\nMeet Volt ! Phalcon \u8b39\u88fd\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 Volt - from \u7b2c71\u56de PHP\u52c9\u5f37\u4f1a\nMeet Phalcon! - Phalcon PHP\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092 Nginx on Amazon EC2 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff01\n\n\nWeb\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u95a2\u9023\n\n[\u521d\u30e1\u30e2] \u306f\u3058\u3081\u3066\u306e Tomcat \u301c \u3064\u307e\u3065\u3044\u305f\u3068\u3053\u308d\u307e\u3068\u3081 (Java \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u3001\u8d77\u52d5\u30d1\u30e9\u30e1\u30fc\u30bf \u306a\u3069)\nCheck! \u306f\u3058\u3081\u3066\u306e CakePHP2\u00a0\u30dd\u30a4\u30f3\u30c8\u307e\u3068\u3081 \u301c Blog Tutorial \u3092\u52d5\u304b\u305d\u3046\nCheck! \u306f\u3058\u3081\u3066\u306e CakePHP2 \u301c bake \u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b9\u30b1\u30eb\u30c8\u30f3\u3092\u5229\u7528\u3059\u308b\n\n\n\u30af\u30e9\u30a6\u30c9\u30fb\u30a4\u30f3\u30d5\u30e9\u95a2\u9023\n\nCheck! \u306f\u3058\u3081\u3066\u306e fluentd \u3092 Amazon Linux \u3067\u52d5\u304b\u3057\u3066\u307f\u308b (\u30ed\u30b0\u3092 PHP \u304b\u3089\u9001\u308b)\nCheck! \u306f\u3058\u3081\u3066\u306e Fluentd \u301c IAM\u30ed\u30fc\u30eb\u3067 Amazon EC2 \u3068 S3 \u9593\u3092\u30bb\u30ad\u30e5\u30a2\u306b\nCheck! \u306f\u3058\u3081\u3066\u306e Zabbix \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb on Debian x Amazon RDS\n\n\n\u6280\u8853\u30d6\u30ed\u30b0\u5bc4\u7a3f\ncloudpack\u6280\u8853\u30d6\u30ed\u30b0\u3067\u3082\u3001AWS Lambda \u3084 \u904b\u7528\u30c4\u30fc\u30eb Serf \u306b\u95a2\u3057\u3066\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\u3054\u8208\u5473\u3042\u308c\u3070\u8aad\u3093\u3067\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\uff01\n\n\u5927\u5e73 \u304b\u3065\u307f \u306e\u8a18\u4e8b\u4e00\u89a7\n\n\u3053\u3093\u306b\u3061\u306f\u3001[cloudpack][] \u306e @dz_ \u3053\u3068[\u5927\u5e73\u304b\u3065\u307f][]\u3067\u3059\u3002\n\nPrologue - \u306f\u3058\u3081\u306b\n====\n\u6c17\u5206\u8ee2\u63db\u306b\u3001\u4e45\u3005\u306b\u30af\u30a4\u30c3\u30af\u548c\u8a33\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n[\u8a33] Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u30e9\u30f3\u30d6\u30c3\u30af\u3067\u306e OMS Search API \u306e\u6709\u52b9\u5229\u7528\n====\n[Leveraging the OMS Search API in an Azure Automation Runbook](https://azure.microsoft.com/blog/2015/07/21/leveraging-the-oms-search-api-in-an-azure-automation-runbook/ \"Leveraging the OMS Search API in an Azure Automation Runbook | Microsoft Azure Blog\")\n\n> The availability of the OMS Search API has enabled automation scenarios which involves alerting, notification and potential remediation based on log analytics data in Operations Management Suite (OMS).\n\n\"[OMS search API][] \u306e\u5229\u7528\u306f\u3001[Operations Management Suite](http://www.microsoft.com/oms \"Overview | Microsoft Operations Management Suite\") (OMS) \u306e\u30ed\u30b0\u5206\u6790\u30c7\u30fc\u30bf\u306b\u57fa\u3065\u3044\u305f\u30a2\u30e9\u30fc\u30c8\u3084\u901a\u77e5\u3001\u6f5c\u5728\u7684\u306a\u6539\u5584\u306b\u95a2\u3059\u308b\u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u30b7\u30ca\u30ea\u30aa\u3092\u53ef\u80fd\u306b\u3057\u307e\u3059\u3002\"\n\n[OMS search API]:https://azure.microsoft.com/en-us/documentation/articles/operational-insights-api-log-search/ \"Operational Insights Log Search API\"\n\n> In this blog post we will talk about a sample scenario for monitoring a honeypot account with an Azure Automation runbook . This runbook checks if someone has attempted to logon with this account on a specific server. A honeypot account is often used to entice malicious attackers to use a specific account for which monitoring is setup. In addition we will also look into using a Hybrid Runbook Worker for not only leveraging my on-premises resources, but also to overcome potential challenges when there is no PowerShell module to upload to Azure Automation.\n\n\"\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u30e9\u30f3\u30d6\u30c3\u30af\u3092\u7528\u3044\u3066\u3001[\u30cf\u30cb\u30fc\u30dd\u30c3\u30c8](https://en.wikipedia.org/wiki/Honeypot_(computing) \"Honeypot (computing) - Wikipedia, the free encyclopedia\")\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306e\u30b7\u30ca\u30ea\u30aa\u306b\u3064\u3044\u3066\u304a\u8a71\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u306f\u3001\u8ab0\u304b\u304c\u3053\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u7279\u5b9a\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u30ed\u30b0\u30aa\u30f3\u672a\u9042\u3057\u305f\u304b\u3069\u3046\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\u3053\u306e\u30cf\u30cb\u30fc\u30dd\u30c3\u30c8\u30a2\u30ab\u30a6\u30f3\u30c8\u306f\u3001\u60aa\u610f\u306e\u3042\u308b\u653b\u6483\u8005\u3092\u76e3\u8996\u304c\u8a2d\u5b9a\u3055\u308c\u305f\u7279\u5b9a\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f7f\u308f\u305b\u308b\u3088\u3046\u306b\u304a\u3073\u304d\u5bc4\u305b\u308b\u305f\u3081\u306b\u4f7f\u308f\u308c\u307e\u3059\u3002\n\n\u52a0\u3048\u3066\u3001\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u30ef\u30fc\u30ab\u30fc\u304c\u30aa\u30f3\u30d7\u30ec\u30df\u30b9\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u6709\u52b9\u306a\u3060\u3051\u3067\u306a\u304f\u3001Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u305f\u3081\u306ePowerShell\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u306a\u3044\u5834\u5408\u306e\u6f5c\u5728\u7684\u306a\u8ab2\u984c\u306b\u5bfe\u51e6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\"\n\n> Our runbook will talk to the OMS Search API and is able to execute searches or can retrieve the results of a saved search. Based on the query results we can decide to take corrective actions or to invoke other runbooks for alerting and notification purposes.  During conversations with customers we have been asked many times if OMS has similar System Center Operations Manager (SCOM) task integration to take actions based on OMS search query results. This blog post enables you to explore those options. One thing to point out though is that when using SCOM, the agent locally checks for a certain condition to be true and acts upon that, while in the OMS scenario the information gets sent to OMS first, is indexed and analyzed so that we can query against that data.\n\n\"\u79c1\u305f\u3061\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u306f\u3001OMS Search API \u3092\u7528\u3044\u3066\u3001\u691c\u7d22\u3092\u5b9f\u884c\u3057\u305f\u308a\u3001\u305d\u306e\u4fdd\u5b58\u3055\u308c\u305f\u691c\u7d22\u306e\u7d50\u679c\u3092\u53ce\u96c6\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u30af\u30a8\u30ea\u30fc\u306e\u7d50\u679c\u306b\u57fa\u3065\u3044\u3066\u3001\u79c1\u305f\u3061\u306f\u898b\u76f4\u3057\u3092\u884c\u3063\u305f\u308a\u3001\u30a2\u30e9\u30fc\u30c8\u3084\u901a\u77e5\u306e\u76ee\u7684\u306e\u305f\u3081\u306b\u4ed6\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u3092\u5b9f\u65bd\u3059\u308b\u3053\u3068\u3092\u6c7a\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u9867\u5ba2\u3068\u306e\u5bfe\u8a71\u306e\u9593\u306b\u3001OMS \u306f OMS search\u306e\u691c\u7d22\u7d50\u679c\u306b\u57fa\u3065\u3044\u305f\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u884c\u3046\u305f\u3081\u306e System Center Operations Manager (SCOM) \u306e\u30bf\u30b9\u30af\u9023\u643a\u3068\u540c\u3058\u3088\u3046\u306a\u3082\u306e\u306a\u306e\u304b\u3068\u3001\u4f55\u5ea6\u3082\u805e\u304b\u308c\u307e\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u3067\u3001\u3042\u306a\u305f\u306f\u3053\u308c\u3089\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u691c\u8a0e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u6ce8\u76ee\u3059\u3079\u304d\u3053\u3068\u306e\u3072\u3068\u3064\u306f\u3001SCOM \u3092\u7528\u3044\u308b\u5834\u5408\u3067\u3082\u3001\u305d\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3042\u308b\u6761\u4ef6\u304c true \u306b\u306a\u308b\u304b\u30ed\u30fc\u30ab\u30eb\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3001\u305d\u306e\u4e0a\u3067\u52d5\u4f5c\u3057\u3001OMS \u30b7\u30ca\u30ea\u30aa\u3092\u5b9f\u65bd\u3057\u3066\u3044\u308b\u9593\u3001OMS\u306b\u6700\u521d\u306b\u9001\u4fe1\u3055\u308c\u305f\u305d\u306e\u60c5\u5831\u306f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u5316\u3055\u308c\u3001\u5206\u6790\u3055\u308c\u308b\u305f\u3081\u3001\u79c1\u305f\u3061\u306f\u305d\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u691c\u7d22\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u3002\"\n\n> As mentioned in the OMS Search API announcement you have three different options to leverage the API:\n- Library for .NET\n- REST API\n- ARMClient\nIn this blog post I\u2019m going to use the ARMClient which you can download from Github. The ARMClient cannot really be used as a PowerShell module \u201cas is\u201d and uploaded to Azure Automation. This however is a great opportunity to test the Azure Automation Hybrid Runbook Worker which can overcome this challenge because the runbook is executed locally and has therefore access to local resources like our ARMClient.\n\n\"[OMS Search API][] \u306e\u30a2\u30ca\u30a6\u30f3\u30b9\u3067\u89e6\u308c\u3089\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001\u3053\u306eAPI\u3092\u5229\u7528\u3059\u308b\u306b\u306f3\u3064\u306e\u7570\u306a\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002\n\n- [Library for .NET](https://msdn.microsoft.com/library/azure/dn910477.aspx \"Class Library for .NET\")\n- [REST API](https://msdn.microsoft.com/library/azure/mt163658.aspx \"Azure \u30cd\u30c3\u30c8\u30ef\u30fc\u30af REST API \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\")\n- [ARMClient][]\n\n[ARMClient]:https://github.com/projectkudu/ARMClient \"projectkudu/ARMClient\"\n\n\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001[GitHub][ARMClient] \u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b **ARMClient** \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u3053\u306e ARMClient \u306f\u3001\u672c\u5f53\u306f PowerShell \u30e2\u30b8\u30e5\u30fc\u30eb\u305d\u306e\u3082\u306e\u3068\u3057\u3066\u4f7f\u3048\u305f\u308a\u3001Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u3001\u3053\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u306f\u30ed\u30fc\u30ab\u30eb\u3067\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u79c1\u305f\u3061\u306e ARMClient \u306e\u3088\u3046\u306b(Azure\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u3088\u3046\u306b)\u30ed\u30fc\u30ab\u30eb\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u524d\u8ff0\u306e\u8ab2\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u306e\u30e9\u30f3\u30d6\u30c3\u30af\u30ef\u30fc\u30ab\u30fc\u3092\u30c6\u30b9\u30c8\u3059\u308b\u306e\u306b\u3088\u3044\u6a5f\u4f1a\u3068\u306a\u308a\u307e\u3059\u3002\"\n\n> Ok, time to set up the basics\n\n\"OK, \u57fa\u672c\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\"\n\n*(\u3053\u306e\u8fba\u3067\u3001\u7d9a\u304d\u306f\u8ffd\u3005\u2026)*\n\nEpilogue - \u304a\u308f\u308a\u306b\n====\n\u3075\u3068\u6c17\u306b\u306a\u308b\u8a18\u4e8b\u3060\u3063\u305f\u306e\u3067\u3001\u8a33\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u307e\u3060\u9014\u4e2d\u3067\u3001\u624b\u9806\u306e\u90e8\u5206\u306f\u8ffd\u3005\u8a33\u305d\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\nAzure \u306f\u3069\u3093\u3069\u3093\u65b0\u3057\u304f\u306a\u3063\u3066\u3044\u3066\u8ffd\u3046\u306e\u304c\u5927\u5909\u3067\u3059\u304c\u3001\u9762\u767d\u3044\u306e\u3067\u5f15\u304d\u7d9a\u304d\u52c9\u5f37\u3057\u3066\u3044\u304d\u307e\u3059\u3002 :octocat:\n\n\u8fd1\u6cc1\n====\n\n\u6700\u8fd1\n----\n- [Check! Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3 \u30e9\u30f3\u30d6\u30c3\u30af\u3067 OMS Search API \u3092\u5229\u7528\u3059\u308b (\u548c\u8a33)](http://qiita.com/dz_/items/7de3c282adef71aae7c6/ \"Check! Azure \u30aa\u30fc\u30c8\u30e1\u30fc\u30b7\u30e7\u30f3 \u30e9\u30f3\u30d6\u30c3\u30af\u3067 OMS Search API \u3092\u5229\u7528\u3059\u308b (\u548c\u8a33)\") \u2190 :new: :sparkles:\n\nPhalcon\u95a2\u9023\n----\n\n- [\u7206\u901f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af!! Phalcon PHP Framework](\nhttp://qiita.com/dz_/items/55ae18f7fe3a873bace1 \"\u7206\u901f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af!! Phalcon PHP Framework\")\n- [Meet Volt ! Phalcon \u8b39\u88fd\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 Volt - from \u7b2c71\u56de PHP\u52c9\u5f37\u4f1a](http://qiita.com/dz_/items/974a90b32ba6a6e38182 \"Meet Volt ! Phalcon \u8b39\u88fd\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 Volt - from \u7b2c71\u56de PHP\u52c9\u5f37\u4f1a\")\n- [Meet Phalcon! - Phalcon PHP\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092 Nginx on Amazon EC2 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff01](http://qiita.com/dz_/items/e70d61487224b854b971 \"Meet Phalcon! - Phalcon PHP\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092 Nginx on Amazon EC2 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff01\")\n\nWeb\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u95a2\u9023\n----\n- [[\u521d\u30e1\u30e2] \u306f\u3058\u3081\u3066\u306e Tomcat \u301c \u3064\u307e\u3065\u3044\u305f\u3068\u3053\u308d\u307e\u3068\u3081 (Java \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u3001\u8d77\u52d5\u30d1\u30e9\u30e1\u30fc\u30bf \u306a\u3069)](http://qiita.com/dz_/items/879ca03b5b594007ceab \"[\u521d\u30e1\u30e2] \u306f\u3058\u3081\u3066\u306e Tomcat \u301c \u3064\u307e\u3065\u3044\u305f\u3068\u3053\u308d\u307e\u3068\u3081 (Java \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u6307\u5b9a\u3001\u8d77\u52d5\u30d1\u30e9\u30e1\u30fc\u30bf \u306a\u3069)\")\n- [Check! \u306f\u3058\u3081\u3066\u306e CakePHP2\u00a0\u30dd\u30a4\u30f3\u30c8\u307e\u3068\u3081 \u301c Blog Tutorial \u3092\u52d5\u304b\u305d\u3046](http://qiita.com/dz_/items/2dd4c68f43484f0f78da \"Check! \u306f\u3058\u3081\u3066\u306e CakePHP2\u00a0\u30dd\u30a4\u30f3\u30c8\u307e\u3068\u3081 \u301c Blog Tutorial \u3092\u52d5\u304b\u305d\u3046\")\n- [Check! \u306f\u3058\u3081\u3066\u306e CakePHP2 \u301c bake \u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b9\u30b1\u30eb\u30c8\u30f3\u3092\u5229\u7528\u3059\u308b](http://qiita.com/dz_/items/3fa2a7a184de645f71d4/ \"Check! \u306f\u3058\u3081\u3066\u306e CakePHP2 \u301c bake \u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30b9\u30b1\u30eb\u30c8\u30f3\u3092\u5229\u7528\u3059\u308b\")\n\n\u30af\u30e9\u30a6\u30c9\u30fb\u30a4\u30f3\u30d5\u30e9\u95a2\u9023\n----\n- [Check! \u306f\u3058\u3081\u3066\u306e fluentd \u3092 Amazon Linux \u3067\u52d5\u304b\u3057\u3066\u307f\u308b (\u30ed\u30b0\u3092 PHP \u304b\u3089\u9001\u308b)](http://qiita.com/dz_/items/960319ffffa0d7355f8c \"Check! \u306f\u3058\u3081\u3066\u306e fluentd \u3092 Amazon Linux \u3067\u52d5\u304b\u3057\u3066\u307f\u308b (\u30ed\u30b0\u3092 PHP \u304b\u3089\u9001\u308b)\")\n- [Check! \u306f\u3058\u3081\u3066\u306e Fluentd \u301c IAM\u30ed\u30fc\u30eb\u3067 Amazon EC2 \u3068 S3 \u9593\u3092\u30bb\u30ad\u30e5\u30a2\u306b](http://qiita.com/dz_/items/224607c84112ccafa2d6 \"Check! \u306f\u3058\u3081\u3066\u306e Fluentd \u301c IAM\u30ed\u30fc\u30eb\u3067 Amazon EC2 \u3068 S3 \u9593\u3092\u30bb\u30ad\u30e5\u30a2\u306b\")\n- [Check! \u306f\u3058\u3081\u3066\u306e Zabbix \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb on Debian x Amazon RDS](http://qiita.com/dz_/items/3e85dd369c8053ceffe8 \"Check! \u306f\u3058\u3081\u3066\u306e Zabbix \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb on Debian x Amazon RDS\")\n\n\n\u6280\u8853\u30d6\u30ed\u30b0\u5bc4\u7a3f\n----\n\n[cloudpack\u6280\u8853\u30d6\u30ed\u30b0][cloudpack-blog]\u3067\u3082\u3001AWS Lambda \u3084 \u904b\u7528\u30c4\u30fc\u30eb Serf \u306b\u95a2\u3057\u3066\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\u3054\u8208\u5473\u3042\u308c\u3070\u8aad\u3093\u3067\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\uff01\n\n- <a href=\"http://blog.cloudpack.jp/author/oohira/\" title=\"\u5927\u5e73 \u304b\u3065\u307f \u306e\u8a18\u4e8b\u4e00\u89a7 | cloudpack\u6280\u8853\u60c5\u5831\u30b5\u30a4\u30c8\"\u3000target=\"_blank\" rel=\"nofollow\">\u5927\u5e73 \u304b\u3065\u307f \u306e\u8a18\u4e8b\u4e00\u89a7</a>\n\n[cloudpack]:https://cloudpack.jp/ \"cloudpack\uff08\u30af\u30e9\u30a6\u30c9\u30d1\u30c3\u30af\uff09 400\u793e\u3092\u8d85\u3048\u308b\u5c0e\u5165\u5b9f\u7e3e! EC2\u306a\u3069AWS\u30af\u30e9\u30a6\u30c9\u306e\u5c0e\u5165\u8a2d\u8a08\u3001\u69cb\u7bc9\u3001\u904b\u7528\u4fdd\u5b88\u30b5\u30fc\u30d3\u30b9\"\n[cloudpack-blog]:http://blog.cloudpack.jp/ \"cloudpack\u6280\u8853\u60c5\u5831\u30b5\u30a4\u30c8\"\n[\u5927\u5e73\u304b\u3065\u307f]:http://blog.cloudpack.jp/author/oohira/ \"\u5927\u5e73\u304b\u3065\u307f\u306e\u8a18\u4e8b\u4e00\u89a7\"\n", "tags": ["Azure", "OperationsManagementSuite", "automation", "Cloud", ".NET"]}