{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nthree.js\u3092\u5229\u7528\u3057\u3066\u3001Leap\u3067\u691c\u77e5\u3057\u305f\u624b\u306e\u30e2\u30c7\u30eb\u3092\u5358\u7d14\u306b\u63cf\u753b\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u308b.\n\u5927\u67a0\u306e\u51e6\u7406\u306e\u6d41\u308c\u306f\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3067\u3042\u308b.\n\nthree.js\u306escene\u3092\u521d\u671f\u5316\u3059\u308b.\nLeap\u3067\u624b\u3092\u691c\u51fa\u3057\u3001three.js\u306escene\u3078mesh\u3092\u8ffd\u52a0.\nLeap\u3067\u624b\u3084\u6307\u306e\u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001mesh\u306e\u4f4d\u7f6e\u60c5\u5831\u3078\u53cd\u6620.\nLeap\u3067\u624b\u304c\u6d88\u5931\u3057\u305f\u3089\u3001three.js\u306escene\u304b\u3089mesh\u3092\u524a\u9664.\n2.\u301c4.\u3092\u7e70\u308a\u8fd4\u3059.\n\nleap.js\u3092\u751f\u3067\u4f7f\u3046\u3068\u3001\u4e0a\u8a18\u306e2.\u30844.\u304c\u767a\u751f\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u691c\u77e5\u3059\u308b\u305f\u3081\u306b\u3001 \n\u300cframe.hands\u306e\u8981\u7d20\u6bce\u306b`hand.id`\u3092\u53d6\u5f97\u3057\u3001\u524d\u56deframe\u3067\u4fdd\u6301\u3057\u3066\u304a\u3044\u305f`hand.id`\u3068\u6bd4\u8f03\u3057\u3066\u4e00\u81f4\u3057\u306a\u304b\u3063\u305f\u3089...\u300d\n\n\u306e\u3088\u3046\u306a\u5b9f\u88c5\u3092\u3059\u308b\u3053\u3068\u306b\u306a\u308b. \u307e\u305f\u3001\u7ba1\u7406\u3057\u3066\u3044\u308bhand.id\u3068\u4f5c\u6210\u3057\u305f\u30e1\u30c3\u30b7\u30e5\u306e\u7d10\u4ed8\u3051\u95a2\u4fc2\u3092\u4fdd\u6301\u3057\u305f\u308a\u3001\u7b49\u306e\u51e6\u7406\u304c\u5fc5\u8981\u3068\u306a\u308b\u304c\u3001\u4e00\u3005\u3053\u308c\u3092\u81ea\u5206\u3067\u66f8\u304f\u306e\u306f\u610f\u5916\u3068\u624b\u9593\u3067\u3042\u308b.\nleapjs-plugins\u3092\u5229\u7528\u3059\u308b\u3068\u3001\u3059\u3053\u3057\u697d\u304c\u3067\u304d\u308b\u306e\u3067\u7d39\u4ecb\u3057\u3066\u304a\u304f.\n\u306a\u304a\u3001\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u3092\u66f8\u304f\u306b\u3042\u305f\u308a\u3001Leap\u672c\u5bb6\u306eExample\u3092\u53c2\u8003\u306b\u3057\u305f.\n\nleapjs-plugins\u306e\u6a5f\u80fd\n\n\u5165\u624b\u65b9\u6cd5\nLeap\u306e\u30b5\u30a4\u30c8\u304b\u3089\u843d\u3068\u3059\u304b\u3001bower\u3092\u5229\u7528\u3057\u3066install\u3059\u308b\u306e\u304c\u3088\u3044.\n$ bower install leapjs-plugins\n\n\nhandEntry\nhandEntry\u306fLeap\u306eController\u306bhand\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u691c\u51fa\u30fb\u6d88\u5931\u30a4\u30d9\u30f3\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u6a5f\u80fd\u3067\u3042\u308b.\n\u5229\u7528\u65b9\u6cd5\u306f\u4e0b\u8a18\u306e\u30a4\u30e1\u30fc\u30b8.\n\nvar controller = new Leap.Controller();\n\n// \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5229\u7528\u306fuse\u3092\u5229\u7528.\ncontroller.use('handEntry');\n\ncontroller.on('handFound', function(hand){\n//\u624b\u304c\u691c\u51fa\u3055\u308c\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\n});\n\ncontroller.on('handLost', function(hand){\n//\u624b\u304c\u6d88\u5931\u3057\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\n});\n\ncontroller.connect();\n\n\n\nhandHold\nhandHold\u306f\u3001Leap\u306e\u5404Model(Hand\u3084Finger, Pointable)\u306bframe\u3092\u8de8\u3050\u30c7\u30fc\u30bf\u306e\u4fdd\u6301\u6a5f\u69cb\u3092\u63d0\u4f9b\u3059\u308b.\njQuery\u306e$.fn.data()\u3068\u5229\u7528\u65b9\u6cd5\u306f\u4f3c\u3066\u304a\u308a\u3001\u4ee5\u4e0b\u306e\u7528\u306b\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b.\n\n\u30c7\u30fc\u30bf\u306e\u683c\u7d0d\nframe.hands.forEach(function(hand){\n  var mesh = new TREE.mesh(...);\n  hand.data('palmMesh', mesh);\n});\n\n\n\n\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\nframe.hands.forEach(function(hand){\n  mesh = hand.data('palmMesh');\n});\n\n\nhandHold\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u3001\u5229\u7528\u6642\u306fConroller\u306b\u5bfe\u3057\u3066use('handHold')\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b.\nhandEntry, handHold\u3092\u5229\u7528\u3059\u308b\u3068\u3001Leap\u306e\u30e2\u30c7\u30eb\u3068Three.js\u306e\u30e1\u30c3\u30b7\u30e5\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u7c21\u5358\u306b\u7ba1\u7406\u51fa\u6765\u308b.\n\n\n.on('handFound')\u306b\u3066\u3001mesh\u3092\u4f5c\u6210\u3001.data\u3067\u30e2\u30c7\u30eb\u3068\u7d10\u4ed8\u3051\u308b\nrequestAnimationFrame\u306e\u4e2d\u3067\u3001.data\u3067\u30e2\u30c7\u30eb\u306b\u304b\u3089mesh\u3092\u53d6\u308a\u51fa\u3057\u3001\u4f4d\u7f6e\u306e\u66f4\u65b0\u51e6\u7406\u3092\u884c\u3046\n\n.on('handLost')\u3067mesh\u3092\u6d88\u6ec5\u3055\u305b\u3001\u30e2\u30c7\u30eb\u304b\u3089\u3082.data`\u306bnull\u3092\u30bb\u30c3\u30c8\n\n\n\u305d\u306e\u4ed6\u306e\u6a5f\u80fd\n\u4ed6\u306b\u3082\u3001leapjs-plugins\u306b\u306fLeap\u306eframe\u3092\u8a18\u9332\u30fb\u518d\u751f\u3059\u308b\u305f\u3081\u306ePlayBack\u30d7\u30e9\u30b0\u30a4\u30f3\u7b49\u3082\u542b\u307e\u308c\u3066\u3044\u308b. \u6a5f\u4f1a\u304c\u3042\u308c\u3070\u305d\u306e\u3046\u3061\u3002\n\n\u30b3\u30fc\u30c9\n\u5b9f\u969b\u306b\u4f5c\u6210\u3057\u305f\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18.\n\nJS\u306e\u53d6\u5f97\n\nbower install jquery threejs stats leapjs-plugins --save\n\n\nJavaScript\n\n\nscripts/main.js\n'use strict';\n\n(function($, Leap, THREE, Stats){\n\n    var baseBoneRotation = new THREE.Quaternion().setFromEuler(new THREE.Euler(Math.PI / 2, 0, 0));\n\n    // threejs\u95a2\u9023Object\u306e\u5b9a\u7fa9\n    var renderer, scene, camera;\n\n    // FPS\u8a08\u6e2c\u7528\n    var stats;\n\n    var $msg = $('#output');\n\n    /**\n     *\n     * Leap\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u5b9a\u7fa9.\n     *\n     **/\n    var leapController = new Leap.Controller();\n    leapController.use('handHold').use('handEntry').on('handFound', function(hand){\n        //\u624b\u304c\u691c\u51fa\u3055\u308c\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca.\n        //mesh\u3092\u4f5c\u6210\u3057\u3066hand.data\u3067\u4fdd\u6301.\n        hand.fingers.forEach(function (finger) {\n\n            var boneMeshes = [];\n            var jointMeshes = [];\n\n            finger.bones.forEach(function(bone) {\n\n                // create joints\n\n                // CylinderGeometry(radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded)\n                var boneMesh = new THREE.Mesh(\n                    new THREE.CylinderGeometry(3, 3, bone.length),\n                    new THREE.MeshBasicMaterial({\n                        color: 0xff0000,\n                        wireframe: true\n                    })\n                );\n\n                //boneMesh.material.color.setHex(0xffffff);\n                scene.add(boneMesh);\n                boneMeshes.push(boneMesh);\n            });\n\n            for (var i = 0; i < finger.bones.length + 1; i++) {\n\n                var jointMesh = new THREE.Mesh(\n                    new THREE.SphereGeometry(7, 6, 4),\n                    //new THREE.MeshPhongMaterial()\n                    new THREE.MeshBasicMaterial({\n                        color: 0xff0000,\n                        wireframe: true\n                    })\n                );\n                //jointMesh.material.color.setHex(0x0088ce);\n                scene.add(jointMesh);\n                jointMeshes.push(jointMesh);\n            }\n            finger.data('boneMeshes', boneMeshes);\n            finger.data('jointMeshes', jointMeshes);\n        });\n    }).on('handLost', function(hand){\n\n        //\u624b\u304c\u6d88\u5931\u3057\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca.\n        //hold\u3057\u3066\u3044\u308bmesh\u30c7\u30fc\u30bf\u3092three.js\u304b\u3089\u524a\u9664.\n        hand.fingers.forEach(function (finger) {\n\n            var boneMeshes = finger.data('boneMeshes');\n            var jointMeshes = finger.data('jointMeshes');\n\n            boneMeshes.forEach(function(mesh){\n                scene.remove(mesh);\n            });\n\n            jointMeshes.forEach(function(mesh){\n                scene.remove(mesh);\n            });\n\n            finger.data({\n                boneMeshes: null\n            });\n        });\n\n        //renderer.render(scene, camera);\n\n    }).on('frame', function(frame){\n        var msg = [];\n\n        msg.push('hands: ' + frame.hands.length);\n\n        frame.hands.forEach(function(hand){\n\n            //updateHand(hand);\n\n            msg.push('id: ' + hand.id);\n            hand.fingers.forEach(function(finger){\n                msg.push('fingerId: ' + finger.id);\n                msg.push('jointMeshes Length: ' + finger.data('jointMeshes').length);\n            });\n        });\n\n        $msg.text(msg.join());\n    });\n\n    var updateHand = function(hand){\n\n        hand.fingers.forEach(function (finger) {\n\n            finger.data('boneMeshes').forEach(function(mesh, i){\n                var bone = finger.bones[i];\n\n                mesh.position.fromArray(bone.center());\n\n                mesh.setRotationFromMatrix(new THREE.Matrix4().fromArray( bone.matrix() ));\n\n                mesh.quaternion.multiply(baseBoneRotation);\n            });\n\n            finger.data('jointMeshes').forEach(function(mesh, i){\n                var bone = finger.bones[i];\n\n                if (bone) {\n                    mesh.position.fromArray(bone.prevJoint);\n                }else{\n                    bone = finger.bones[i-1];\n                    mesh.position.fromArray(bone.nextJoint);\n                }\n\n            });\n\n        });\n\n        //renderer.render(scene, camera);\n    };\n\n    /**\n     *\n     * three.js\u306e\u521d\u671f\u5316\n     *\n     **/\n    var initScene = function(){\n\n        var width = $('#render_area').parent().innerWidth();\n        var height = window.innerHeight - $('#render_area').offset().top - 20;\n\n        renderer = new THREE.CanvasRenderer();\n        renderer.setSize(width, height);\n        $('#render_area')[0].appendChild(renderer.domElement);\n\n        camera = new THREE.PerspectiveCamera(45, width / height, 1, 10000);\n        camera.position.y = 160;\n        camera.position.z = 800;\n\n        // \u30ab\u30e1\u30e9\u3092\u30de\u30a6\u30b9&\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u64cd\u4f5c.\n        // \u8981threejs-example\u306eOrbitControls.js\n        new THREE.OrbitControls(camera, renderer.domElement);\n\n        scene = new THREE.Scene();\n\n        scene.add(new THREE.AxisHelper(400));\n        scene.add(new THREE.GridHelper(400, 10));\n\n        // FPS\u8a08\u6e2c\u5668\u306e\u521d\u671f\u5316.\n        stats = new Stats();\n        $('#stats_wrap').append($(stats.domElement));\n\n        return scene;\n\n    };\n\n    /**\n     *\n     * Leap\u578b\u306e\u76f4\u65b9\u4f53\u3092\u8ffd\u52a0\u3059\u308b\n     *\n     **/\n    var addLeapCube = function(scene){\n        var geometry, material, mesh;\n\n        geometry = new THREE.CubeGeometry(80, 11.5, 30);\n        material = new THREE.MeshBasicMaterial({\n            color: 0xff0000,\n            wireframe: true\n        });\n\n        mesh = new THREE.Mesh(geometry, material);\n        scene.add(mesh);\n    };\n\n    /**\n     *\n     * three.js\u306e\u30d5\u30ec\u30fc\u30e0\u63cf\u753b.\n     *\n     **/\n    var animate = function(){\n        window.requestAnimationFrame(animate);\n        renderer.render(scene, camera);\n        leapController.frame(0).hands.forEach(updateHand);\n        stats.update();\n    };\n\n\n    initScene();\n    addLeapCube(scene);\n    leapController.connect();\n    animate();\n\n})(jQuery, Leap, THREE, Stats);\n\n\n\nhtml\n\n\nindex.html\n<!doctype html>\n<head> </head>\n<body>\n<div class=\"container\">\n\n  <div class=\"row\">\n    <div class=\"col-md-2\">\n      <div id=\"stats_wrap\"></div>\n    </div>  \n    <div class=\"col-md10\" style=\"height:100px;\">\n      <p id=\"output\">hadnds:</p>\n    </div>  \n  </div>  \n\n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div id=\"render_area\">\n      </div>  \n    </div>  \n  </div>  \n</div>  \n\n<script src=\"bower_components/jquery/jquery.js\"></script>\n<script src=\"bower_components/threejs/build/three.js\"></script>\n<script src=\"bower_components/leapjs/leap-0.6.0.js\"></script>\n\n<script src=\"bower_components/leapjs-plugins/main/leap-plugins-0.1.6.js\"></script>\n<script src=\"bower_components/stats.js/src/Stats.js\"></script>\n<script src=\"bower_components/threejs-examples/examples/js/controls/OrbitControls.js\"></script>\n<script src=\"scripts/main.js\"></script>\n\n</body> \n</html> \n\n\n\n\n\u53c2\u8003\n\nhttp://leapmotion.github.io/leapjs-plugins/docs/\n\n## \u306f\u3058\u3081\u306b\n\nthree.js\u3092\u5229\u7528\u3057\u3066\u3001Leap\u3067\u691c\u77e5\u3057\u305f\u624b\u306e\u30e2\u30c7\u30eb\u3092\u5358\u7d14\u306b\u63cf\u753b\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u308b.\n\n\u5927\u67a0\u306e\u51e6\u7406\u306e\u6d41\u308c\u306f\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u306f\u305a\u3067\u3042\u308b.\n\n1. three.js\u306escene\u3092\u521d\u671f\u5316\u3059\u308b.\n1. Leap\u3067\u624b\u3092\u691c\u51fa\u3057\u3001three.js\u306escene\u3078mesh\u3092\u8ffd\u52a0.\n1. Leap\u3067\u624b\u3084\u6307\u306e\u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001mesh\u306e\u4f4d\u7f6e\u60c5\u5831\u3078\u53cd\u6620.\n1. Leap\u3067\u624b\u304c\u6d88\u5931\u3057\u305f\u3089\u3001three.js\u306escene\u304b\u3089mesh\u3092\u524a\u9664.\n1. 2.\u301c4.\u3092\u7e70\u308a\u8fd4\u3059.\n\nleap.js\u3092\u751f\u3067\u4f7f\u3046\u3068\u3001\u4e0a\u8a18\u306e2.\u30844.\u304c\u767a\u751f\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u691c\u77e5\u3059\u308b\u305f\u3081\u306b\u3001 \n\n    \u300cframe.hands\u306e\u8981\u7d20\u6bce\u306b`hand.id`\u3092\u53d6\u5f97\u3057\u3001\u524d\u56deframe\u3067\u4fdd\u6301\u3057\u3066\u304a\u3044\u305f`hand.id`\u3068\u6bd4\u8f03\u3057\u3066\u4e00\u81f4\u3057\u306a\u304b\u3063\u305f\u3089...\u300d\n\n\u306e\u3088\u3046\u306a\u5b9f\u88c5\u3092\u3059\u308b\u3053\u3068\u306b\u306a\u308b. \u307e\u305f\u3001\u7ba1\u7406\u3057\u3066\u3044\u308b`hand.id`\u3068\u4f5c\u6210\u3057\u305f\u30e1\u30c3\u30b7\u30e5\u306e\u7d10\u4ed8\u3051\u95a2\u4fc2\u3092\u4fdd\u6301\u3057\u305f\u308a\u3001\u7b49\u306e\u51e6\u7406\u304c\u5fc5\u8981\u3068\u306a\u308b\u304c\u3001\u4e00\u3005\u3053\u308c\u3092\u81ea\u5206\u3067\u66f8\u304f\u306e\u306f\u610f\u5916\u3068\u624b\u9593\u3067\u3042\u308b.\n\n[leapjs-plugins](https://github.com/leapmotion/leapjs-plugins)\u3092\u5229\u7528\u3059\u308b\u3068\u3001\u3059\u3053\u3057\u697d\u304c\u3067\u304d\u308b\u306e\u3067\u7d39\u4ecb\u3057\u3066\u304a\u304f.\n\n\u306a\u304a\u3001\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u3092\u66f8\u304f\u306b\u3042\u305f\u308a\u3001[Leap\u672c\u5bb6\u306eExample](https://developer.leapmotion.com/gallery/bone-hands)\u3092\u53c2\u8003\u306b\u3057\u305f.\n\n## leapjs-plugins\u306e\u6a5f\u80fd\n\n### \u5165\u624b\u65b9\u6cd5\n\n[Leap\u306e\u30b5\u30a4\u30c8](https://developer.leapmotion.com/leapjs/plugins)\u304b\u3089\u843d\u3068\u3059\u304b\u3001bower\u3092\u5229\u7528\u3057\u3066install\u3059\u308b\u306e\u304c\u3088\u3044.\n\n```bash\n$ bower install leapjs-plugins\n```\n\n### handEntry\n\nhandEntry\u306fLeap\u306eController\u306bhand\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u691c\u51fa\u30fb\u6d88\u5931\u30a4\u30d9\u30f3\u30c8\u3092\u8ffd\u52a0\u3059\u308b\u6a5f\u80fd\u3067\u3042\u308b.\n\u5229\u7528\u65b9\u6cd5\u306f\u4e0b\u8a18\u306e\u30a4\u30e1\u30fc\u30b8.\n\n```js\n\nvar controller = new Leap.Controller();\n\n// \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u5229\u7528\u306fuse\u3092\u5229\u7528.\ncontroller.use('handEntry');\n\ncontroller.on('handFound', function(hand){\n//\u624b\u304c\u691c\u51fa\u3055\u308c\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\n});\n\ncontroller.on('handLost', function(hand){\n//\u624b\u304c\u6d88\u5931\u3057\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\n});\n\ncontroller.connect();\n\n```\n\n### handHold\n\nhandHold\u306f\u3001Leap\u306e\u5404Model(Hand\u3084Finger, Pointable)\u306bframe\u3092\u8de8\u3050\u30c7\u30fc\u30bf\u306e\u4fdd\u6301\u6a5f\u69cb\u3092\u63d0\u4f9b\u3059\u308b.\njQuery\u306e`$.fn.data()`\u3068\u5229\u7528\u65b9\u6cd5\u306f\u4f3c\u3066\u304a\u308a\u3001\u4ee5\u4e0b\u306e\u7528\u306b\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b.\n\n```js:\u30c7\u30fc\u30bf\u306e\u683c\u7d0d\nframe.hands.forEach(function(hand){\n  var mesh = new TREE.mesh(...);\n  hand.data('palmMesh', mesh);\n});\n```\n\n```js:\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\nframe.hands.forEach(function(hand){\n  mesh = hand.data('palmMesh');\n});\n```\n\nhandHold\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u3001\u5229\u7528\u6642\u306fConroller\u306b\u5bfe\u3057\u3066`use('handHold')`\u3092\u5b9f\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b.\n\nhandEntry, handHold\u3092\u5229\u7528\u3059\u308b\u3068\u3001Leap\u306e\u30e2\u30c7\u30eb\u3068Three.js\u306e\u30e1\u30c3\u30b7\u30e5\u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\u3092\u7c21\u5358\u306b\u7ba1\u7406\u51fa\u6765\u308b.\n\n 1. `.on('handFound')`\u306b\u3066\u3001mesh\u3092\u4f5c\u6210\u3001`.data`\u3067\u30e2\u30c7\u30eb\u3068\u7d10\u4ed8\u3051\u308b\n 2. requestAnimationFrame\u306e\u4e2d\u3067\u3001`.data`\u3067\u30e2\u30c7\u30eb\u306b\u304b\u3089mesh\u3092\u53d6\u308a\u51fa\u3057\u3001\u4f4d\u7f6e\u306e\u66f4\u65b0\u51e6\u7406\u3092\u884c\u3046\n 3. `.on('handLost')\u3067mesh\u3092\u6d88\u6ec5\u3055\u305b\u3001\u30e2\u30c7\u30eb\u304b\u3089\u3082`.data`\u306bnull\u3092\u30bb\u30c3\u30c8\n\n### \u305d\u306e\u4ed6\u306e\u6a5f\u80fd\n\u4ed6\u306b\u3082\u3001leapjs-plugins\u306b\u306fLeap\u306eframe\u3092\u8a18\u9332\u30fb\u518d\u751f\u3059\u308b\u305f\u3081\u306ePlayBack\u30d7\u30e9\u30b0\u30a4\u30f3\u7b49\u3082\u542b\u307e\u308c\u3066\u3044\u308b. \u6a5f\u4f1a\u304c\u3042\u308c\u3070\u305d\u306e\u3046\u3061\u3002\n\n## \u30b3\u30fc\u30c9\n\n\u5b9f\u969b\u306b\u4f5c\u6210\u3057\u305f\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18.\n\n- JS\u306e\u53d6\u5f97\n\n```bash\nbower install jquery threejs stats leapjs-plugins --save\n```\n\n- JavaScript\n\n```js:scripts/main.js\n'use strict';\n\n(function($, Leap, THREE, Stats){\n\n\tvar baseBoneRotation = new THREE.Quaternion().setFromEuler(new THREE.Euler(Math.PI / 2, 0, 0));\n\n\t// threejs\u95a2\u9023Object\u306e\u5b9a\u7fa9\n\tvar renderer, scene, camera;\n\n\t// FPS\u8a08\u6e2c\u7528\n\tvar stats;\n\n\tvar $msg = $('#output');\n\n\t/**\n\t *\n\t * Leap\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u5b9a\u7fa9.\n\t *\n\t **/\n\tvar leapController = new Leap.Controller();\n\tleapController.use('handHold').use('handEntry').on('handFound', function(hand){\n\t\t//\u624b\u304c\u691c\u51fa\u3055\u308c\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca.\n\t\t//mesh\u3092\u4f5c\u6210\u3057\u3066hand.data\u3067\u4fdd\u6301.\n\t\thand.fingers.forEach(function (finger) {\n\n\t\t\tvar boneMeshes = [];\n\t\t\tvar jointMeshes = [];\n\n\t\t\tfinger.bones.forEach(function(bone) {\n\n\t\t\t\t// create joints\n\n\t\t\t\t// CylinderGeometry(radiusTop, radiusBottom, height, radiusSegments, heightSegments, openEnded)\n\t\t\t\tvar boneMesh = new THREE.Mesh(\n\t\t\t\t\tnew THREE.CylinderGeometry(3, 3, bone.length),\n\t\t\t\t\tnew THREE.MeshBasicMaterial({\n\t\t\t\t\t\tcolor: 0xff0000,\n\t\t\t\t\t\twireframe: true\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\t//boneMesh.material.color.setHex(0xffffff);\n\t\t\t\tscene.add(boneMesh);\n\t\t\t\tboneMeshes.push(boneMesh);\n\t\t\t});\n\n\t\t\tfor (var i = 0; i < finger.bones.length + 1; i++) {\n\n\t\t\t\tvar jointMesh = new THREE.Mesh(\n\t\t\t\t\tnew THREE.SphereGeometry(7, 6, 4),\n\t\t\t\t\t//new THREE.MeshPhongMaterial()\n\t\t\t\t\tnew THREE.MeshBasicMaterial({\n\t\t\t\t\t\tcolor: 0xff0000,\n\t\t\t\t\t\twireframe: true\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t//jointMesh.material.color.setHex(0x0088ce);\n\t\t\t\tscene.add(jointMesh);\n\t\t\t\tjointMeshes.push(jointMesh);\n\t\t\t}\n\t\t\tfinger.data('boneMeshes', boneMeshes);\n\t\t\tfinger.data('jointMeshes', jointMeshes);\n\t\t});\n\t}).on('handLost', function(hand){\n\n\t\t//\u624b\u304c\u6d88\u5931\u3057\u305f\u30d5\u30ec\u30fc\u30e0\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca.\n\t\t//hold\u3057\u3066\u3044\u308bmesh\u30c7\u30fc\u30bf\u3092three.js\u304b\u3089\u524a\u9664.\n\t\thand.fingers.forEach(function (finger) {\n\n\t\t\tvar boneMeshes = finger.data('boneMeshes');\n\t\t\tvar jointMeshes = finger.data('jointMeshes');\n\n\t\t\tboneMeshes.forEach(function(mesh){\n\t\t\t\tscene.remove(mesh);\n\t\t\t});\n\n\t\t\tjointMeshes.forEach(function(mesh){\n\t\t\t\tscene.remove(mesh);\n\t\t\t});\n\n\t\t\tfinger.data({\n\t\t\t\tboneMeshes: null\n\t\t\t});\n\t\t});\n\n\t\t//renderer.render(scene, camera);\n\n\t}).on('frame', function(frame){\n\t\tvar msg = [];\n\n\t\tmsg.push('hands: ' + frame.hands.length);\n\n\t\tframe.hands.forEach(function(hand){\n\n\t\t\t//updateHand(hand);\n\n\t\t\tmsg.push('id: ' + hand.id);\n\t\t\thand.fingers.forEach(function(finger){\n\t\t\t\tmsg.push('fingerId: ' + finger.id);\n\t\t\t\tmsg.push('jointMeshes Length: ' + finger.data('jointMeshes').length);\n\t\t\t});\n\t\t});\n\n\t\t$msg.text(msg.join());\n\t});\n\n\tvar updateHand = function(hand){\n\n\t\thand.fingers.forEach(function (finger) {\n\n\t\t\tfinger.data('boneMeshes').forEach(function(mesh, i){\n\t\t\t\tvar bone = finger.bones[i];\n\n\t\t\t\tmesh.position.fromArray(bone.center());\n\n\t\t\t\tmesh.setRotationFromMatrix(new THREE.Matrix4().fromArray( bone.matrix() ));\n\n\t\t\t\tmesh.quaternion.multiply(baseBoneRotation);\n\t\t\t});\n\n\t\t\tfinger.data('jointMeshes').forEach(function(mesh, i){\n\t\t\t\tvar bone = finger.bones[i];\n\n\t\t\t\tif (bone) {\n\t\t\t\t\tmesh.position.fromArray(bone.prevJoint);\n\t\t\t\t}else{\n\t\t\t\t\tbone = finger.bones[i-1];\n\t\t\t\t\tmesh.position.fromArray(bone.nextJoint);\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t});\n\n\t\t//renderer.render(scene, camera);\n\t};\n\n\t/**\n\t *\n\t * three.js\u306e\u521d\u671f\u5316\n\t *\n\t **/\n\tvar initScene = function(){\n\n\t\tvar width = $('#render_area').parent().innerWidth();\n\t\tvar height = window.innerHeight - $('#render_area').offset().top - 20;\n\n\t\trenderer = new THREE.CanvasRenderer();\n\t\trenderer.setSize(width, height);\n\t\t$('#render_area')[0].appendChild(renderer.domElement);\n\n\t\tcamera = new THREE.PerspectiveCamera(45, width / height, 1, 10000);\n\t\tcamera.position.y = 160;\n\t\tcamera.position.z = 800;\n\n\t\t// \u30ab\u30e1\u30e9\u3092\u30de\u30a6\u30b9&\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u64cd\u4f5c.\n\t\t// \u8981threejs-example\u306eOrbitControls.js\n\t\tnew THREE.OrbitControls(camera, renderer.domElement);\n\n\t\tscene = new THREE.Scene();\n\n\t\tscene.add(new THREE.AxisHelper(400));\n\t\tscene.add(new THREE.GridHelper(400, 10));\n\n\t\t// FPS\u8a08\u6e2c\u5668\u306e\u521d\u671f\u5316.\n\t\tstats = new Stats();\n\t\t$('#stats_wrap').append($(stats.domElement));\n\n\t\treturn scene;\n\n\t};\n\n\t/**\n\t *\n\t * Leap\u578b\u306e\u76f4\u65b9\u4f53\u3092\u8ffd\u52a0\u3059\u308b\n\t *\n\t **/\n\tvar addLeapCube = function(scene){\n\t\tvar geometry, material, mesh;\n\n\t\tgeometry = new THREE.CubeGeometry(80, 11.5, 30);\n\t\tmaterial = new THREE.MeshBasicMaterial({\n\t\t\tcolor: 0xff0000,\n\t\t\twireframe: true\n\t\t});\n\n\t\tmesh = new THREE.Mesh(geometry, material);\n\t\tscene.add(mesh);\n\t};\n\n\t/**\n\t *\n\t * three.js\u306e\u30d5\u30ec\u30fc\u30e0\u63cf\u753b.\n\t *\n\t **/\n\tvar animate = function(){\n\t\twindow.requestAnimationFrame(animate);\n\t\trenderer.render(scene, camera);\n\t\tleapController.frame(0).hands.forEach(updateHand);\n\t\tstats.update();\n\t};\n\n\n\tinitScene();\n\taddLeapCube(scene);\n\tleapController.connect();\n\tanimate();\n\n})(jQuery, Leap, THREE, Stats);\n```\n\n- html\n\n```html:index.html\n<!doctype html>\n<head> </head>\n<body>\n<div class=\"container\">\n          \n  <div class=\"row\">\n    <div class=\"col-md-2\">\n      <div id=\"stats_wrap\"></div>\n    </div>  \n    <div class=\"col-md10\" style=\"height:100px;\">\n      <p id=\"output\">hadnds:</p>\n    </div>  \n  </div>  \n          \n  <div class=\"row\">\n    <div class=\"col-md-12\">\n      <div id=\"render_area\">\n      </div>  \n    </div>  \n  </div>  \n</div>  \n        \n<script src=\"bower_components/jquery/jquery.js\"></script>\n<script src=\"bower_components/threejs/build/three.js\"></script>\n<script src=\"bower_components/leapjs/leap-0.6.0.js\"></script>\n        \n<script src=\"bower_components/leapjs-plugins/main/leap-plugins-0.1.6.js\"></script>\n<script src=\"bower_components/stats.js/src/Stats.js\"></script>\n<script src=\"bower_components/threejs-examples/examples/js/controls/OrbitControls.js\"></script>\n<script src=\"scripts/main.js\"></script>\n        \n</body> \n</html> \n\n```\n## \u53c2\u8003\n\n - http://leapmotion.github.io/leapjs-plugins/docs/\n", "tags": ["JavaScript", "LeapMotion", "three.js"]}