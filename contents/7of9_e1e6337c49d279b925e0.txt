{"tags": ["Network", "socat", "debug"], "context": "\n\u52d5\u4f5c\u74b0\u5883\nCentOS 6.8 (64bit)\nWindows 8.1 Pro (64bit)\n\n\n\u95a2\u9023 http://qiita.com/7of9/items/b7ef37e77dfd6a921bee\n(IP, port)\u306e\u30ea\u30ec\u30fc\u65b9\u6cd5\u3002\n\n\u4f55\u3092\u3057\u305f\u3044\u304b\n\nOS A\u304b\u3089\u9001\u4fe1\u30dd\u30fc\u30c86000\u3067OS B\u306b\u30b3\u30de\u30f3\u30c9\u3092\u9001\u4fe1\u3059\u308b\nOS B\u304c\u9001\u4fe1\u30b3\u30de\u30f3\u30c9\u306e\u30ea\u30ec\u30fc\u3092\u3059\u308b\n\u30ea\u30ec\u30fc\u5148\u3067\u30b3\u30de\u30f3\u30c9\u5fdc\u7b54\u51e6\u7406\u3092\u3059\u308b\nOS B\u304c\u5fdc\u7b54\u306e\u30ea\u30ec\u30fc\u3092\u3059\u308b\nOS A\u304c\u5fdc\u7b54\u3092\u53d7\u3051\u308b\n\n\n\u69cb\u6210\n\nOS A \n\n\nWindows 8.1 Pro (64bit)\n\u9001\u4fe1\u30bd\u30d5\u30c8: UDP/IP\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb by NonSoft\u3055\u3093\n\u53d7\u4fe1\u30bd\u30d5\u30c8: \u81ea\u4f5c\u306eUDP echo server (C++ Builder XE4\u3067\u5b9f\u88c5)\n\n\nOS B\n\n\nCentOS 6.8 (64bit)\n\u30ea\u30ec\u30fc: socat\u4f7f\u7528 (\u5f8c\u8ff0)\n\n\n\n\n\u65b9\u6cd5\nsocat\u3092\u4f7f\u3046\u3002\n\u53c2\u8003 http://mattryall.net/blog/2011/09/udp-port-forwarding-with-socat\n\n\u5b9f\u65bd\u624b\u9806\nOS B\u4e0a\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304a\u304f\u3002\n$ sudo socat UDP4-RECVFROM:6000,fork UDP4-SENDTO:192.168.3.141:7000\n\n\u3053\u3053\u3067192.168.3.141\u306f\u8ee2\u9001\u5148\u306eOS (\u3053\u306e\u4f8b\u3067\u306fOS A\u3068\u3057\u3066\u3044\u308b)\u3002\n\u4ee5\u4e0b\u3092\u884c\u3046\u3002\n\nOS A\u306b\u3066UDP echo server \u3092\u8d77\u52d5\n\n\n7000\u30dd\u30fc\u30c8\u3067\u53d7\u4fe1\u3057\u305f\u3082\u306e\u3092echo back\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n\nOS A\u304b\u3089UDP/IP\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u306b\u3066\u300cAAB\u300d\u3092\u9001\u4fe1\n\n\n\u30ea\u30ec\u30fc\u304c\u884c\u308f\u308cecho server\u304cecho back\u3059\u308b\n\u30ea\u30ec\u30fc\u304c\u884c\u308f\u308cecho back\u6587\u5b57\u5217\u304cUDP/IP\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u306e\u53d7\u4fe1\u3068\u3057\u3066\u51e6\u7406\u3055\u308c\u308b\n\n\n\n\n\u4ed6\u306b\u8a66\u3057\u305f\u3053\u3068 > \u5931\u6557\nnc (netcat)\u3067\u4ee5\u4e0b\u3092\u8a66\u3057\u305f\u3002\n$ nc -u -l 6000 | nc -u 192.168.3.141 7000\n\nOS B\u306e\u30dd\u30fc\u30c86000\u306b\u6765\u305f\u6587\u5b57\u3092OS A\u306e\u30dd\u30fc\u30c87000\u306b\u30ea\u30ec\u30fc\u306f\u3067\u304d\u305f\u3002\n\u554f\u984c\u306fecho back\u6587\u5b57\u5217\u304c\u30ea\u30ec\u30fc\u3067\u304d\u306a\u3044\u3053\u3068\u3002\necho back\u6587\u5b57\u5217\u306f\u5225\u306e\u30dd\u30fc\u30c8\u306b\u306a\u308a\u3001\u305d\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u5206\u304b\u3089\u306a\u3044\u3002\n\u8272\u3005\u8abf\u3079\u305f\u3068\u3053\u308d\u3001socat\u306e\u65b9\u304c\u697d\u3060\u3063\u305f\u3002\n\nsocat > \u7279\u5b9a\u306eNIC\u306b\u5bfe\u3059\u308b\u51e6\u7406\n\u8907\u6570\u306eNIC\u304c\u3042\u308b\u5834\u5408(eth0, eth1)\u3001eth1\u306e\u30dd\u30fc\u30c86000\u3060\u3051\u8ee2\u9001\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n$ sudo socat UDP4-RECVFROM:6000,fork,bindtodevice=eth1 UDP4-SENDTO:192.168.3.141:7000\n\n\u53c2\u8003 http://www.dest-unreach.org/socat/doc/linuxwochen2007-socat.pdf\n\u306ep27\u306bbindtodevice\u306e\u8a18\u8f09\u304c\u3042\u3063\u305f\u3002\nman\u306a\u3069\u3067\u898b\u305f\u5834\u5408,so-bindtodevice\u6307\u5b9a\u304b\u3068\u601d\u3063\u305f\u304c\u3001\u305d\u308c\u306f\u6709\u52b9\u3067\u306f\u306a\u304b\u3063\u305f\u3002\n```txt:\u52d5\u4f5c\u74b0\u5883\nCentOS 6.8 (64bit)\nWindows 8.1 Pro (64bit)\n```\n\n\u95a2\u9023 http://qiita.com/7of9/items/b7ef37e77dfd6a921bee\n\n(IP, port)\u306e\u30ea\u30ec\u30fc\u65b9\u6cd5\u3002\n\n\n### \u4f55\u3092\u3057\u305f\u3044\u304b\n\n1. OS A\u304b\u3089\u9001\u4fe1\u30dd\u30fc\u30c86000\u3067OS B\u306b\u30b3\u30de\u30f3\u30c9\u3092\u9001\u4fe1\u3059\u308b\n2. OS B\u304c\u9001\u4fe1\u30b3\u30de\u30f3\u30c9\u306e\u30ea\u30ec\u30fc\u3092\u3059\u308b\n3. \u30ea\u30ec\u30fc\u5148\u3067\u30b3\u30de\u30f3\u30c9\u5fdc\u7b54\u51e6\u7406\u3092\u3059\u308b\n4. OS B\u304c\u5fdc\u7b54\u306e\u30ea\u30ec\u30fc\u3092\u3059\u308b\n5. OS A\u304c\u5fdc\u7b54\u3092\u53d7\u3051\u308b\n\n### \u69cb\u6210\n\n- OS A \n    - Windows 8.1 Pro (64bit)\n    - \u9001\u4fe1\u30bd\u30d5\u30c8: [UDP/IP\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb](http://nonsoft.la.coocan.jp/Download/UdpTool/index.html) by NonSoft\u3055\u3093\n    - \u53d7\u4fe1\u30bd\u30d5\u30c8: \u81ea\u4f5c\u306eUDP echo server (C++ Builder XE4\u3067\u5b9f\u88c5)\n- OS B\n    - CentOS 6.8 (64bit)\n    - \u30ea\u30ec\u30fc: socat\u4f7f\u7528 (\u5f8c\u8ff0)\n\n### \u65b9\u6cd5\n\nsocat\u3092\u4f7f\u3046\u3002\n\n\u53c2\u8003 http://mattryall.net/blog/2011/09/udp-port-forwarding-with-socat\n\n### \u5b9f\u65bd\u624b\u9806\n\nOS B\u4e0a\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\u3066\u304a\u304f\u3002\n\n```\n$ sudo socat UDP4-RECVFROM:6000,fork UDP4-SENDTO:192.168.3.141:7000\n```\n\n\u3053\u3053\u3067`192.168.3.141`\u306f\u8ee2\u9001\u5148\u306eOS (\u3053\u306e\u4f8b\u3067\u306fOS A\u3068\u3057\u3066\u3044\u308b)\u3002\n\n\u4ee5\u4e0b\u3092\u884c\u3046\u3002\n\n1. OS A\u306b\u3066UDP echo server \u3092\u8d77\u52d5\n   - 7000\u30dd\u30fc\u30c8\u3067\u53d7\u4fe1\u3057\u305f\u3082\u306e\u3092echo back\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n2. OS A\u304b\u3089UDP/IP\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u306b\u3066\u300cAAB<CR><LF>\u300d\u3092\u9001\u4fe1\n   - \u30ea\u30ec\u30fc\u304c\u884c\u308f\u308cecho server\u304cecho back\u3059\u308b\n   - \u30ea\u30ec\u30fc\u304c\u884c\u308f\u308cecho back\u6587\u5b57\u5217\u304cUDP/IP\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u306e\u53d7\u4fe1\u3068\u3057\u3066\u51e6\u7406\u3055\u308c\u308b\n\n### \u4ed6\u306b\u8a66\u3057\u305f\u3053\u3068 > \u5931\u6557\n\nnc (netcat)\u3067\u4ee5\u4e0b\u3092\u8a66\u3057\u305f\u3002\n\n```\n$ nc -u -l 6000 | nc -u 192.168.3.141 7000\n```\n\nOS B\u306e\u30dd\u30fc\u30c86000\u306b\u6765\u305f\u6587\u5b57\u3092OS A\u306e\u30dd\u30fc\u30c87000\u306b\u30ea\u30ec\u30fc\u306f\u3067\u304d\u305f\u3002\n\u554f\u984c\u306fecho back\u6587\u5b57\u5217\u304c\u30ea\u30ec\u30fc\u3067\u304d\u306a\u3044\u3053\u3068\u3002\necho back\u6587\u5b57\u5217\u306f\u5225\u306e\u30dd\u30fc\u30c8\u306b\u306a\u308a\u3001\u305d\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u304c\u5206\u304b\u3089\u306a\u3044\u3002\n\u8272\u3005\u8abf\u3079\u305f\u3068\u3053\u308d\u3001socat\u306e\u65b9\u304c\u697d\u3060\u3063\u305f\u3002\n\n### socat > \u7279\u5b9a\u306eNIC\u306b\u5bfe\u3059\u308b\u51e6\u7406\n\n\u8907\u6570\u306eNIC\u304c\u3042\u308b\u5834\u5408(eth0, eth1)\u3001eth1\u306e\u30dd\u30fc\u30c86000\u3060\u3051\u8ee2\u9001\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n```\n$ sudo socat UDP4-RECVFROM:6000,fork,bindtodevice=eth1 UDP4-SENDTO:192.168.3.141:7000\n```\n\n\u53c2\u8003 http://www.dest-unreach.org/socat/doc/linuxwochen2007-socat.pdf\n\u306ep27\u306bbindtodevice\u306e\u8a18\u8f09\u304c\u3042\u3063\u305f\u3002\n\nman\u306a\u3069\u3067\u898b\u305f\u5834\u5408,`so-bindtodevice`\u6307\u5b9a\u304b\u3068\u601d\u3063\u305f\u304c\u3001\u305d\u308c\u306f\u6709\u52b9\u3067\u306f\u306a\u304b\u3063\u305f\u3002\n\n"}