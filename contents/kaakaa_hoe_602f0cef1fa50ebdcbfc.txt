{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nubuntu\u30db\u30b9\u30c8\u4e0a\u3067Docker\u306eCentOS\u30a4\u30e1\u30fc\u30b8\u4f7f\u3063\u3066docker build\u3057\u305f\u3089\u30a8\u30e9\u30fc\u3002\n\u4eca\u5f8c\u3082\u30cf\u30de\u308b\u3053\u3068\u304c\u3042\u308b\u6c17\u304c\u3057\u305f\u306e\u3067\u5099\u5fd8\u9332\u3002\n\u57fa\u672c\u7684\u306b\u306f\u4e0b\u8a18\u306e\u8a18\u4e8b\u3068\u540c\u3058\u3088\u3046\u306a\u5185\u5bb9\u3002\nCentOS7 + systemd + Docker \u3067\u30a4\u30f3\u30d5\u30e9CI\u3092\u3084\u3063\u3066\u3044\u304f - Qiita\n\u6700\u5f8c\u306e\u300c\u304a\u308f\u308a\u306b\u300d\u306b\u66f8\u304d\u307e\u3057\u305f\u304c\u3001aufs\u3092\u65b0\u3057\u304f\u3057\u3066CONFIG_AUFS_XATTR\u3092\u6709\u52b9\u306b\u3059\u308b\u306e\u304c\u6839\u6e90\u7684\u306a\u89e3\u6cd5\u3063\u307d\u3044\u3002\uff08\u672a\u78ba\u8a8d\uff09\n\u4eca\u56de\u306f\u500b\u4eba\u7684\u306bDocker\u3092\u89e6\u3063\u3066\u898b\u3066\u308b\u3060\u3051\u306a\u306e\u3067\u3001Docker\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u3092aufs\u4ee5\u5916\u306b\u3059\u308b\u3060\u3051\u306e\u624b\u8efd\u306b\u89e3\u6c7a\u3067\u304d\u308b\u65b9\u6cd5\u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001boot2docker\u3067\u3082\u540c\u3058\u554f\u984c\u304c\u8d77\u3053\u3063\u3066\u3044\u305f\u305d\u3046\u3067\u3059\u304c\u3001\u305d\u3061\u3089\u306f\u4fee\u6b63\u3055\u308c\u3066\u3044\u308b\u6a21\u69d8\u3002\nBump kernel and AUFS versions, update kernel config by pstengel \u00b7 Pull Request #818 \u00b7 boot2docker/boot2docker\n\u8ffd\u8a18\uff1a \nUbuntu\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u309215.05\u308415.10\u306b\u4e0a\u3052\u308c\u3070\u3053\u306e\u554f\u984c\u306f\u89e3\u6c7a\u3055\u308c\u308b\u3088\u3046\u306a\u306e\u3067\u3001Ubuntu\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u308b\u306e\u304c\u697d\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u74b0\u5883\n\u30db\u30b9\u30c8OS\u306eUbuntu\u4e0a\u3067CentOS7\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\u3002\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% cat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.3 LTS\"\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% arch\nx86_64\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% uname -a\nLinux kaakaa-System-Product-Name 3.13.0-74-generic #118-Ubuntu SMP Thu Dec 17 22:52:10 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker version\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker info\nContainers: 29\nImages: 307\nServer Version: 1.9.1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 365\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-74-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 8\nTotal Memory: 23.24 GiB\nName: kaakaa-System-Product-Name\nWARNING: No swap limit support\n\n\n\u4e8b\u8c61\n\u4e0b\u8a18\u306e\u3088\u3046\u306aDockerfile\u304b\u3089docker build\u3057\u305f\u3068\u3053\u308d\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3002\nDockerfile\u306e\u5185\u5bb9\u306f\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u305f\uff1aDockerfile\u3092\u4f7f\u3044\u3053\u306a\u3059(1) | Think IT\uff08\u30b7\u30f3\u30af\u30a4\u30c3\u30c8\uff09\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% cat Dockerfile \nFROM        centos:centos7.1.1503\nMAINTAINER  kaakaa\nENV     container docker\nRUN     yum swap -y fakesystemd systemd && yum clean all\nRUN     yum install -y httpd && yum clean all\nRUN     echo \"Hello Apache.\" > /var/www/html/index.html\nRUN     systemctl enable httpd\nEXPOSE      80\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker build -f ./Dockerfile -t centos:c71apache01 --no-cache=true .\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM centos:c71docker0001\n ---> 7e436e7a3b77\nStep 2 : MAINTAINER kaakaa\n ---> Running in 8fdbd6688031\n ---> a0275d7d2d5b\nRemoving intermediate container 8fdbd6688031\nStep 3 : ENV container docker\n ---> Running in 31b9611c1e1b\n ---> 943e6c11843b\nRemoving intermediate container 31b9611c1e1b\nStep 4 : RUN yum swap -y fakesystemd systemd && yum clean all\n ---> Running in 02272406c14e\nLoaded plugins: fastestmirror\n\n...\n\n<\u9014\u4e2d\u7701\u7565>\n\n... \n\nDependencies Resolved\n\n================================================================================\n Package             Arch          Version                    Repository   Size\n================================================================================\nInstalling:\n httpd               x86_64        2.4.6-40.el7.centos        base        2.7 M\nInstalling for dependencies:\n apr                 x86_64        1.4.8-3.el7                base        103 k\n apr-util            x86_64        1.5.2-6.el7                base         92 k\n centos-logos        noarch        70.0.6-3.el7.centos        base         21 M\n httpd-tools         x86_64        2.4.6-40.el7.centos        base         82 k\n mailcap             noarch        2.1.41-2.el7               base         31 k\n\nTransaction Summary\n================================================================================\nInstall  1 Package (+5 Dependent packages)\n\nTotal download size: 24 M\nInstalled size: 31 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                              356 kB/s |  24 MB  01:09     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : apr-1.4.8-3.el7.x86_64                                       1/6 \n  Installing : apr-util-1.5.2-6.el7.x86_64                                  2/6 \n  Installing : httpd-tools-2.4.6-40.el7.centos.x86_64                       3/6 \n  Installing : centos-logos-70.0.6-3.el7.centos.noarch                      4/6 \n  Installing : mailcap-2.1.41-2.el7.noarch                                  5/6 \n  Installing : httpd-2.4.6-40.el7.centos.x86_64                             6/6Error unpacking rpm package httpd-2.4.6-40.el7.centos.x86_64\n\nerror: unpacking of archive failed on file /usr/sbin/suexec: cpio: cap_set_file\nerror: httpd-2.4.6-40.el7.centos.x86_64: install failed\n  Verifying  : httpd-tools-2.4.6-40.el7.centos.x86_64                       1/6 \n  Verifying  : apr-1.4.8-3.el7.x86_64                                       2/6 \n  Verifying  : mailcap-2.1.41-2.el7.noarch                                  3/6 \n  Verifying  : apr-util-1.5.2-6.el7.x86_64                                  4/6 \n  Verifying  : centos-logos-70.0.6-3.el7.centos.noarch                      5/6 \n  Verifying  : httpd-2.4.6-40.el7.centos.x86_64                             6/6 \n\nDependency Installed:\n  apr.x86_64 0:1.4.8-3.el7                                                      \n  apr-util.x86_64 0:1.5.2-6.el7                                                 \n  centos-logos.noarch 0:70.0.6-3.el7.centos                                     \n  httpd-tools.x86_64 0:2.4.6-40.el7.centos                                      \n  mailcap.noarch 0:2.1.41-2.el7                                                 \n\nFailed:\n  httpd.x86_64 0:2.4.6-40.el7.centos                                            \n\nComplete!\nThe command '/bin/sh -c yum install -y httpd && yum clean all' returned a non-zero code: 1\n\nhttpd\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u5931\u6557\u3057\u3066\u3044\u308b\u3088\u3046\u3002\nerror: unpacking of archive failed on file /usr/sbin/suexec: cpio: cap_set_file\nerror: httpd-2.4.6-40.el7.centos.x86_64: install failed\n\n\n\u8abf\u67fb\ncap_set_file not permitted on aufs storage driver only \u00b7 Issue #6980 \u00b7 docker/docker\nDocker\u672c\u5bb6\u306eissue\u3067\u30822014\u5e74\u304b\u3089\u65e2\u77e5\u306e\u554f\u984c\u3002\uff08\u672a\u3060\u306b\u6cbb\u3089\u306a\u3044\u306e\u306f\u306a\u305c\uff1f\uff09   => aufs\u306eCONFIG_AUFS_XATTR\u8ffd\u52a0\u306b\u3088\u308a\u89e3\u6d88\u3055\u308c\u3066\u3044\u308b\u6a21\u69d8\n\u4eca\u56de\u306f\u30db\u30b9\u30c8Ubuntu\u306e\u5834\u5408\u3067\u767a\u751f\u3057\u307e\u3057\u305f\u304c\u3001boot2docker\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u6642\u3082\uff08issue\u306e\u7acb\u3066\u3089\u308c\u305f2014\u5e74\u9803\u306f\uff09\u767a\u751f\u3059\u308b\u3088\u3046\u3067\u3059\u3002\nCentOS7 + systemd + Docker \u3067\u30a4\u30f3\u30d5\u30e9CI\u3092\u3084\u3063\u3066\u3044\u304f - Qiita\n\u540c\u3058\u30a8\u30e9\u30fc\u306b\u3064\u3044\u3066\u89e6\u308c\u3066\u3044\u308bQiita\u8a18\u4e8b\u3002\n\naufs \u306e\u5834\u5408\u3060\u3051systemd\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u3067\u304d\u306a\u3044\u3089\u3057\u3044\u3002\u3002 doot2docker\u306a\u3093\u304b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u304caufs\u3067\u3042\u308b\u3002\u4e00\u6642\u7684\u306bdevicemapper\u3092\u4f7f\u3046\u3068\u304b\u3059\u308c\u3070\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\n\u89e3\u6c7a\uff1aDocker\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u3092\u5909\u66f4\u3059\u308b\ndocker\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u30fc\u3092devicemapper\u306b\u5909\u66f4\u3059\u308b\uff20Ubuntu 14.04 | Mazn.net\n\u4e0a\u8a18\u3092\u53c2\u8003\u306b/etc/default/docker\u306b DOCKER_OPTS=\"--storage-driver=devicemapper\"\u3092\u8ffd\u52a0\u3057\u3066\u3001docker\u3092restart\u3002\n\u203b\u65e2\u5b58\u306eDocker\u30a4\u30e1\u30fc\u30b8/\u30b3\u30f3\u30c6\u30ca\u306f\u65b0\u3057\u3044\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u3067\u4f7f\u7528\u3067\u304d\u306a\u304f\u306a\u308b\u305f\u3081\u6ce8\u610f\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% cat /etc/default/docker \n# Use DOCKER_OPTS to modify the daemon startup options.\nDOCKER_OPTS=\"--storage-driver=devicemapper\"\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% sudo service docker restart\ndocker stop/waiting\ndocker start/running, process 6791\n\n\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u30fc\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\u3002\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker info                \nContainers: 0\nImages: 0\nServer Version: 1.9.1\nStorage Driver: devicemapper\n Pool Name: docker-8:17-5113301-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 107.4 GB\n Backing Filesystem: ext4\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 1.821 GB\n Data Space Total: 107.4 GB\n Data Space Available: 48.64 GB\n Metadata Space Used: 1.479 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.146 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.77 (2012-10-15)\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-74-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 8\nTotal Memory: 23.24 GiB\nName: kaakaa-System-Product-Name\nWARNING: No swap limit support\n\n\u88dc\u8db3\uff1aboot2docker\u3067\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u5909\u66f4\u65b9\u6cd5\nThe PkgFarmers \u2014 Fixing yum install on boot2docker\nhttpd\u304c\u7121\u4e8b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001docker build\u304c\u6210\u529f\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker build -f ./Dockerfile -t centos:c71apache01 --no-cache=true .\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM centos:centos7.1.1503\n ---> 173339447b7e\nStep 2 : MAINTAINER kaakaa\n ---> Running in 9cedbb5714a1\n ---> e3bcc4967ffb\nRemoving intermediate container 9cedbb5714a1\nStep 3 : ENV container docker\n ---> Running in 7af6b54d9459\n ---> 8b51ce6f53b7\nRemoving intermediate container 7af6b54d9459\n\n...\n\n<\u7701\u7565>\n\n...\n\nDependencies Resolved\n\n================================================================================\n Package             Arch          Version                    Repository   Size\n================================================================================\nInstalling:\n httpd               x86_64        2.4.6-40.el7.centos        base        2.7 M\nInstalling for dependencies:\n apr                 x86_64        1.4.8-3.el7                base        103 k\n apr-util            x86_64        1.5.2-6.el7                base         92 k\n centos-logos        noarch        70.0.6-3.el7.centos        base         21 M\n httpd-tools         x86_64        2.4.6-40.el7.centos        base         82 k\n mailcap             noarch        2.1.41-2.el7               base         31 k\n\nTransaction Summary\n================================================================================\nInstall  1 Package (+5 Dependent packages)\n\nTotal download size: 24 M\nInstalled size: 31 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                              803 kB/s |  24 MB  00:31     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : apr-1.4.8-3.el7.x86_64                                       1/6 \n  Installing : apr-util-1.5.2-6.el7.x86_64                                  2/6 \n  Installing : httpd-tools-2.4.6-40.el7.centos.x86_64                       3/6 \n  Installing : centos-logos-70.0.6-3.el7.centos.noarch                      4/6 \n  Installing : mailcap-2.1.41-2.el7.noarch                                  5/6 \n  Installing : httpd-2.4.6-40.el7.centos.x86_64                             6/6 \n  Verifying  : httpd-2.4.6-40.el7.centos.x86_64                             1/6 \n  Verifying  : httpd-tools-2.4.6-40.el7.centos.x86_64                       2/6 \n  Verifying  : apr-1.4.8-3.el7.x86_64                                       3/6 \n  Verifying  : mailcap-2.1.41-2.el7.noarch                                  4/6 \n  Verifying  : apr-util-1.5.2-6.el7.x86_64                                  5/6 \n  Verifying  : centos-logos-70.0.6-3.el7.centos.noarch                      6/6 \n\nInstalled:\n  httpd.x86_64 0:2.4.6-40.el7.centos                                            \n\nDependency Installed:\n  apr.x86_64 0:1.4.8-3.el7                                                      \n  apr-util.x86_64 0:1.5.2-6.el7                                                 \n  centos-logos.noarch 0:70.0.6-3.el7.centos                                     \n  httpd-tools.x86_64 0:2.4.6-40.el7.centos                                      \n  mailcap.noarch 0:2.1.41-2.el7                                                 \n\nComplete!\nLoaded plugins: fastestmirror\nCleaning repos: base extras updates\nCleaning up everything\nCleaning up list of fastest mirrors\n ---> 3f9981b5b344\nRemoving intermediate container 874b59f7d611\nStep 6 : RUN echo \"Hello Apache.\" > /var/www/html/index.html\n ---> Running in 35ac84af5292\n ---> af126fbeaa9c\nRemoving intermediate container 35ac84af5292\nStep 7 : RUN systemctl enable httpd\n ---> Running in 1df2c5c8904f\nCreated symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.\n ---> 1e3a81ca9e1a\nRemoving intermediate container 1df2c5c8904f\nStep 8 : EXPOSE 80\n ---> Running in 0fb9300324e1\n ---> 003626f91226\nRemoving intermediate container 0fb9300324e1\nSuccessfully built 003626f91226\n\n\n\n\u304a\u308f\u308a\u306b\nCan't install httpd on fedora (cpio: cap_set_file), fixed somewhere or not? \u00b7 Issue #8966 \u00b7 docker/docker\n\u5143\u3005\u306faufs\u306e\u30d0\u30b0\uff08\uff1f\uff09\u306e\u3088\u3046\u306a\u306e\u3067\u3001CONFIG_AUFS_XATTR\u304c\u8a2d\u5b9a\u3067\u304d\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u307e\u3067aufs\u3092\u66f4\u65b0\u3057\u3066\u3001CONFIG_AUFS_XATTR\u3092enable\u306b\u3059\u308c\u3070\u3001boot2docker\u306b\u9650\u3089\u305a\u4ed6\u306eLinuxOS\u3067\u3082\u3053\u306e\u554f\u984c\u306f\u89e3\u6d88\u3059\u308b\u3068\u306e\u3053\u3068\u3002\n\nthaJeztah commented on 19 Apr 2015\n\nBasically, this is a duplicate of #6980. This is an issue with (older versions of) AUFS, see #6980 (comment):\nYou need a newer version of AUFS with support for CONFIG_AUFS_XATTR, and that kernel config option must be enabled. That fixes the cpio: cap_set_file on boot2docker (boot2docker/boot2docker#818), and should fix it on any Linux using AUFS.\nI just tested this issue and was able to reproduce it on a DigitalOcean droplet using AUFS. Switching to BTRFS as storage driver resolved the problem.\nI also spotted an external issue being linked to this, and there seems to be a 'workaround' here\nowncloud/core#12967 (comment) which I haven't tested.\nThis is not a bug in Docker, but an issue with older AUFS versions missing CONFIG_AUFS_XATTR support. To resolve the issue, update the AUFS version and enable the CONFIG_AUFS_XATTR attribute, or switch to another storage driver.\nI'm going to close this issue, because this is a duplicate of #6980 and (unfortunately) nothing Docker itself can resolve.\nFeel free to continue the discussion, perhaps someone is able to add additional tips.\n\n\naufs\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u3060\u3051\u306e\u5143\u6c17\u304c\u6b8b\u3063\u3066\u306a\u3044\u306e\u3067\u3001aufs\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3092\u6b8b\u3057\u3066\u7d42\u308f\u308a\u306b\u3059\u308b\u3002\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% dmesg | fgrep -i aufs\n[    5.851021] aufs 3.13-20140303\n[    6.457590] aufs au_opts_parse:1155:docker[2298]: unknown option dirperm1\n[ 8083.921023] Modules linked in: autofs4 nls_iso8859_1 nls_utf8 udf crc_itu_t veth xt_addrtype aufs pci_stub vboxpci(OX) vboxnetadp(OX) vboxnetflt(OX) ipt_MASQUERADE iptable_nat nf_nat_ipv4 nf_nat nf_conntrack_ipv4 nf_defrag_ipv4 xt_conntrack nf_conntrack ipt_REJECT xt_CHECKSUM iptable_mangle xt_tcpudp bridge stp llc vboxdrv(OX) ip6table_filter ip6_tables iptable_filter ip_tables ebtable_nat ebtables x_tables snd_hda_codec_hdmi snd_hda_codec_via joydev usb_storage hid_generic bnep rfcomm bluetooth hid_logitech_dj usbhid hid intel_rapl snd_hda_intel x86_pkg_temp_thermal snd_hda_codec intel_powerclamp eeepc_wmi asus_wmi snd_hwdep coretemp snd_pcm kvm_intel sparse_keymap kvm snd_page_alloc i915 snd_seq_midi snd_seq_midi_event snd_rawmidi crct10dif_pclmul crc32_pclmul binfmt_misc snd_seq snd_seq_device aesni_intel aes_x86_64 drm_kms_helper lrw gf128mul glue_helper snd_timer ablk_helper drm cryptd snd mei_me i2c_algo_bit mei soundcore shpchp lpc_ich wmi mac_hid video serio_raw parport_pc ppdev lp parport psmouse alx pata_acpi mdio\n[107238.762713] aufs au_opts_parse:1155:docker[27263]: unknown option dirperm1\n\n\u53c2\u8003\uff1a AuFS (Advanced multi layered unification filesystem) \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - \u79c1\u306e\u4e8c\u6b21\u8a18\u61b6\n## \u306f\u3058\u3081\u306b\n\nubuntu\u30db\u30b9\u30c8\u4e0a\u3067Docker\u306eCentOS\u30a4\u30e1\u30fc\u30b8\u4f7f\u3063\u3066docker build\u3057\u305f\u3089\u30a8\u30e9\u30fc\u3002\n\u4eca\u5f8c\u3082\u30cf\u30de\u308b\u3053\u3068\u304c\u3042\u308b\u6c17\u304c\u3057\u305f\u306e\u3067\u5099\u5fd8\u9332\u3002\n\n\u57fa\u672c\u7684\u306b\u306f\u4e0b\u8a18\u306e\u8a18\u4e8b\u3068\u540c\u3058\u3088\u3046\u306a\u5185\u5bb9\u3002\n[CentOS7 + systemd + Docker \u3067\u30a4\u30f3\u30d5\u30e9CI\u3092\u3084\u3063\u3066\u3044\u304f - Qiita](http://qiita.com/udzura/items/fa93f262bbe036a1413e)\n\n\u6700\u5f8c\u306e\u300c\u304a\u308f\u308a\u306b\u300d\u306b\u66f8\u304d\u307e\u3057\u305f\u304c\u3001aufs\u3092\u65b0\u3057\u304f\u3057\u3066`CONFIG_AUFS_XATTR`\u3092\u6709\u52b9\u306b\u3059\u308b\u306e\u304c\u6839\u6e90\u7684\u306a\u89e3\u6cd5\u3063\u307d\u3044\u3002\uff08\u672a\u78ba\u8a8d\uff09\n\u4eca\u56de\u306f\u500b\u4eba\u7684\u306bDocker\u3092\u89e6\u3063\u3066\u898b\u3066\u308b\u3060\u3051\u306a\u306e\u3067\u3001Docker\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u3092aufs\u4ee5\u5916\u306b\u3059\u308b\u3060\u3051\u306e\u624b\u8efd\u306b\u89e3\u6c7a\u3067\u304d\u308b\u65b9\u6cd5\u3092\u9078\u629e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001boot2docker\u3067\u3082\u540c\u3058\u554f\u984c\u304c\u8d77\u3053\u3063\u3066\u3044\u305f\u305d\u3046\u3067\u3059\u304c\u3001\u305d\u3061\u3089\u306f\u4fee\u6b63\u3055\u308c\u3066\u3044\u308b\u6a21\u69d8\u3002\n[Bump kernel and AUFS versions, update kernel config by pstengel \u00b7 Pull Request #818 \u00b7 boot2docker/boot2docker](https://github.com/boot2docker/boot2docker/pull/818)\n\n\n**\u8ffd\u8a18**\uff1a \nUbuntu\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u309215.05\u308415.10\u306b\u4e0a\u3052\u308c\u3070\u3053\u306e\u554f\u984c\u306f\u89e3\u6c7a\u3055\u308c\u308b\u3088\u3046\u306a\u306e\u3067\u3001Ubuntu\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u308b\u306e\u304c\u697d\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n## \u74b0\u5883\n\n\u30db\u30b9\u30c8OS\u306eUbuntu\u4e0a\u3067CentOS7\u306eDocker\u30a4\u30e1\u30fc\u30b8\u3092\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% cat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.3 LTS\"\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% arch\nx86_64\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% uname -a\nLinux kaakaa-System-Product-Name 3.13.0-74-generic #118-Ubuntu SMP Thu Dec 17 22:52:10 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker version\nClient:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.9.1\n API version:  1.21\n Go version:   go1.4.2\n Git commit:   a34a1d5\n Built:        Fri Nov 20 13:12:04 UTC 2015\n OS/Arch:      linux/amd64\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker info\nContainers: 29\nImages: 307\nServer Version: 1.9.1\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 365\n Dirperm1 Supported: false\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-74-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 8\nTotal Memory: 23.24 GiB\nName: kaakaa-System-Product-Name\nWARNING: No swap limit support\n```\n\n\n## \u4e8b\u8c61\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306aDockerfile\u304b\u3089`docker build`\u3057\u305f\u3068\u3053\u308d\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3002\nDockerfile\u306e\u5185\u5bb9\u306f\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u305f\uff1a[Dockerfile\u3092\u4f7f\u3044\u3053\u306a\u3059(1) | Think IT\uff08\u30b7\u30f3\u30af\u30a4\u30c3\u30c8\uff09](https://thinkit.co.jp/story/2015/10/06/6453)\n\n```\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% cat Dockerfile \nFROM\t\tcentos:centos7.1.1503\nMAINTAINER\tkaakaa\nENV\t\tcontainer docker\nRUN\t\tyum swap -y fakesystemd systemd && yum clean all\nRUN\t\tyum install -y httpd && yum clean all\nRUN\t\techo \"Hello Apache.\" > /var/www/html/index.html\nRUN\t\tsystemctl enable httpd\nEXPOSE\t\t80\n```\n\n```\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker build -f ./Dockerfile -t centos:c71apache01 --no-cache=true .\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM centos:c71docker0001\n ---> 7e436e7a3b77\nStep 2 : MAINTAINER kaakaa\n ---> Running in 8fdbd6688031\n ---> a0275d7d2d5b\nRemoving intermediate container 8fdbd6688031\nStep 3 : ENV container docker\n ---> Running in 31b9611c1e1b\n ---> 943e6c11843b\nRemoving intermediate container 31b9611c1e1b\nStep 4 : RUN yum swap -y fakesystemd systemd && yum clean all\n ---> Running in 02272406c14e\nLoaded plugins: fastestmirror\n\n...\n\n<\u9014\u4e2d\u7701\u7565>\n\n... \n\nDependencies Resolved\n\n================================================================================\n Package             Arch          Version                    Repository   Size\n================================================================================\nInstalling:\n httpd               x86_64        2.4.6-40.el7.centos        base        2.7 M\nInstalling for dependencies:\n apr                 x86_64        1.4.8-3.el7                base        103 k\n apr-util            x86_64        1.5.2-6.el7                base         92 k\n centos-logos        noarch        70.0.6-3.el7.centos        base         21 M\n httpd-tools         x86_64        2.4.6-40.el7.centos        base         82 k\n mailcap             noarch        2.1.41-2.el7               base         31 k\n\nTransaction Summary\n================================================================================\nInstall  1 Package (+5 Dependent packages)\n\nTotal download size: 24 M\nInstalled size: 31 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                              356 kB/s |  24 MB  01:09     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : apr-1.4.8-3.el7.x86_64                                       1/6 \n  Installing : apr-util-1.5.2-6.el7.x86_64                                  2/6 \n  Installing : httpd-tools-2.4.6-40.el7.centos.x86_64                       3/6 \n  Installing : centos-logos-70.0.6-3.el7.centos.noarch                      4/6 \n  Installing : mailcap-2.1.41-2.el7.noarch                                  5/6 \n  Installing : httpd-2.4.6-40.el7.centos.x86_64                             6/6Error unpacking rpm package httpd-2.4.6-40.el7.centos.x86_64\n \nerror: unpacking of archive failed on file /usr/sbin/suexec: cpio: cap_set_file\nerror: httpd-2.4.6-40.el7.centos.x86_64: install failed\n  Verifying  : httpd-tools-2.4.6-40.el7.centos.x86_64                       1/6 \n  Verifying  : apr-1.4.8-3.el7.x86_64                                       2/6 \n  Verifying  : mailcap-2.1.41-2.el7.noarch                                  3/6 \n  Verifying  : apr-util-1.5.2-6.el7.x86_64                                  4/6 \n  Verifying  : centos-logos-70.0.6-3.el7.centos.noarch                      5/6 \n  Verifying  : httpd-2.4.6-40.el7.centos.x86_64                             6/6 \n\nDependency Installed:\n  apr.x86_64 0:1.4.8-3.el7                                                      \n  apr-util.x86_64 0:1.5.2-6.el7                                                 \n  centos-logos.noarch 0:70.0.6-3.el7.centos                                     \n  httpd-tools.x86_64 0:2.4.6-40.el7.centos                                      \n  mailcap.noarch 0:2.1.41-2.el7                                                 \n\nFailed:\n  httpd.x86_64 0:2.4.6-40.el7.centos                                            \n\nComplete!\nThe command '/bin/sh -c yum install -y httpd && yum clean all' returned a non-zero code: 1\n```\n\n\nhttpd\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u5931\u6557\u3057\u3066\u3044\u308b\u3088\u3046\u3002\n\n```\nerror: unpacking of archive failed on file /usr/sbin/suexec: cpio: cap_set_file\nerror: httpd-2.4.6-40.el7.centos.x86_64: install failed\n```\n\n## \u8abf\u67fb\n\n[cap_set_file not permitted on aufs storage driver only \u00b7 Issue #6980 \u00b7 docker/docker](https://github.com/docker/docker/issues/6980)\n\nDocker\u672c\u5bb6\u306eissue\u3067\u30822014\u5e74\u304b\u3089\u65e2\u77e5\u306e\u554f\u984c\u3002~~\uff08\u672a\u3060\u306b\u6cbb\u3089\u306a\u3044\u306e\u306f\u306a\u305c\uff1f\uff09~~   => aufs\u306e`CONFIG_AUFS_XATTR`\u8ffd\u52a0\u306b\u3088\u308a\u89e3\u6d88\u3055\u308c\u3066\u3044\u308b\u6a21\u69d8\n\n\u4eca\u56de\u306f\u30db\u30b9\u30c8Ubuntu\u306e\u5834\u5408\u3067\u767a\u751f\u3057\u307e\u3057\u305f\u304c\u3001boot2docker\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u6642\u3082\uff08issue\u306e\u7acb\u3066\u3089\u308c\u305f2014\u5e74\u9803\u306f\uff09\u767a\u751f\u3059\u308b\u3088\u3046\u3067\u3059\u3002\n\n[CentOS7 + systemd + Docker \u3067\u30a4\u30f3\u30d5\u30e9CI\u3092\u3084\u3063\u3066\u3044\u304f - Qiita](http://qiita.com/udzura/items/fa93f262bbe036a1413e)\n\u540c\u3058\u30a8\u30e9\u30fc\u306b\u3064\u3044\u3066\u89e6\u308c\u3066\u3044\u308bQiita\u8a18\u4e8b\u3002\n\n> aufs \u306e\u5834\u5408\u3060\u3051systemd\u306e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u304c\u3067\u304d\u306a\u3044\u3089\u3057\u3044\u3002\u3002 doot2docker\u306a\u3093\u304b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u304caufs\u3067\u3042\u308b\u3002\u4e00\u6642\u7684\u306bdevicemapper\u3092\u4f7f\u3046\u3068\u304b\u3059\u308c\u3070\u826f\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n## \u89e3\u6c7a\uff1aDocker\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u3092\u5909\u66f4\u3059\u308b\n\n[docker\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u30fc\u3092devicemapper\u306b\u5909\u66f4\u3059\u308b\uff20Ubuntu 14.04 | Mazn.net](http://www.mazn.net/blog/2015/12/13/1545.html)\n\u4e0a\u8a18\u3092\u53c2\u8003\u306b`/etc/default/docker`\u306b `DOCKER_OPTS=\"--storage-driver=devicemapper\"`\u3092\u8ffd\u52a0\u3057\u3066\u3001docker\u3092restart\u3002\n\u203b\u65e2\u5b58\u306eDocker\u30a4\u30e1\u30fc\u30b8/\u30b3\u30f3\u30c6\u30ca\u306f\u65b0\u3057\u3044\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u3067\u4f7f\u7528\u3067\u304d\u306a\u304f\u306a\u308b\u305f\u3081\u6ce8\u610f\n\n```\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% cat /etc/default/docker \n# Use DOCKER_OPTS to modify the daemon startup options.\nDOCKER_OPTS=\"--storage-driver=devicemapper\"\n\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% sudo service docker restart\ndocker stop/waiting\ndocker start/running, process 6791\n```\n\n\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u30fc\u304c\u66f4\u65b0\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker info                \nContainers: 0\nImages: 0\nServer Version: 1.9.1\nStorage Driver: devicemapper\n Pool Name: docker-8:17-5113301-pool\n Pool Blocksize: 65.54 kB\n Base Device Size: 107.4 GB\n Backing Filesystem: ext4\n Data file: /dev/loop0\n Metadata file: /dev/loop1\n Data Space Used: 1.821 GB\n Data Space Total: 107.4 GB\n Data Space Available: 48.64 GB\n Metadata Space Used: 1.479 MB\n Metadata Space Total: 2.147 GB\n Metadata Space Available: 2.146 GB\n Udev Sync Supported: true\n Deferred Removal Enabled: false\n Deferred Deletion Enabled: false\n Deferred Deleted Device Count: 0\n Data loop file: /var/lib/docker/devicemapper/devicemapper/data\n Metadata loop file: /var/lib/docker/devicemapper/devicemapper/metadata\n Library Version: 1.02.77 (2012-10-15)\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.13.0-74-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 8\nTotal Memory: 23.24 GiB\nName: kaakaa-System-Product-Name\nWARNING: No swap limit support\n```\n\n\u88dc\u8db3\uff1aboot2docker\u3067\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30c9\u30e9\u30a4\u30d0\u5909\u66f4\u65b9\u6cd5\n[The PkgFarmers \u2014 Fixing yum install on boot2docker](http://pkgfarm.tumblr.com/post/114104687791/fixing-yum-install-on-boot2docker)\n\n\nhttpd\u304c\u7121\u4e8b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3001`docker build`\u304c\u6210\u529f\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% docker build -f ./Dockerfile -t centos:c71apache01 --no-cache=true .\nSending build context to Docker daemon 2.048 kB\nStep 1 : FROM centos:centos7.1.1503\n ---> 173339447b7e\nStep 2 : MAINTAINER kaakaa\n ---> Running in 9cedbb5714a1\n ---> e3bcc4967ffb\nRemoving intermediate container 9cedbb5714a1\nStep 3 : ENV container docker\n ---> Running in 7af6b54d9459\n ---> 8b51ce6f53b7\nRemoving intermediate container 7af6b54d9459\n\n...\n\n<\u7701\u7565>\n\n...\n\nDependencies Resolved\n\n================================================================================\n Package             Arch          Version                    Repository   Size\n================================================================================\nInstalling:\n httpd               x86_64        2.4.6-40.el7.centos        base        2.7 M\nInstalling for dependencies:\n apr                 x86_64        1.4.8-3.el7                base        103 k\n apr-util            x86_64        1.5.2-6.el7                base         92 k\n centos-logos        noarch        70.0.6-3.el7.centos        base         21 M\n httpd-tools         x86_64        2.4.6-40.el7.centos        base         82 k\n mailcap             noarch        2.1.41-2.el7               base         31 k\n\nTransaction Summary\n================================================================================\nInstall  1 Package (+5 Dependent packages)\n\nTotal download size: 24 M\nInstalled size: 31 M\nDownloading packages:\n--------------------------------------------------------------------------------\nTotal                                              803 kB/s |  24 MB  00:31     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : apr-1.4.8-3.el7.x86_64                                       1/6 \n  Installing : apr-util-1.5.2-6.el7.x86_64                                  2/6 \n  Installing : httpd-tools-2.4.6-40.el7.centos.x86_64                       3/6 \n  Installing : centos-logos-70.0.6-3.el7.centos.noarch                      4/6 \n  Installing : mailcap-2.1.41-2.el7.noarch                                  5/6 \n  Installing : httpd-2.4.6-40.el7.centos.x86_64                             6/6 \n  Verifying  : httpd-2.4.6-40.el7.centos.x86_64                             1/6 \n  Verifying  : httpd-tools-2.4.6-40.el7.centos.x86_64                       2/6 \n  Verifying  : apr-1.4.8-3.el7.x86_64                                       3/6 \n  Verifying  : mailcap-2.1.41-2.el7.noarch                                  4/6 \n  Verifying  : apr-util-1.5.2-6.el7.x86_64                                  5/6 \n  Verifying  : centos-logos-70.0.6-3.el7.centos.noarch                      6/6 \n\nInstalled:\n  httpd.x86_64 0:2.4.6-40.el7.centos                                            \n\nDependency Installed:\n  apr.x86_64 0:1.4.8-3.el7                                                      \n  apr-util.x86_64 0:1.5.2-6.el7                                                 \n  centos-logos.noarch 0:70.0.6-3.el7.centos                                     \n  httpd-tools.x86_64 0:2.4.6-40.el7.centos                                      \n  mailcap.noarch 0:2.1.41-2.el7                                                 \n\nComplete!\nLoaded plugins: fastestmirror\nCleaning repos: base extras updates\nCleaning up everything\nCleaning up list of fastest mirrors\n ---> 3f9981b5b344\nRemoving intermediate container 874b59f7d611\nStep 6 : RUN echo \"Hello Apache.\" > /var/www/html/index.html\n ---> Running in 35ac84af5292\n ---> af126fbeaa9c\nRemoving intermediate container 35ac84af5292\nStep 7 : RUN systemctl enable httpd\n ---> Running in 1df2c5c8904f\nCreated symlink from /etc/systemd/system/multi-user.target.wants/httpd.service to /usr/lib/systemd/system/httpd.service.\n ---> 1e3a81ca9e1a\nRemoving intermediate container 1df2c5c8904f\nStep 8 : EXPOSE 80\n ---> Running in 0fb9300324e1\n ---> 003626f91226\nRemoving intermediate container 0fb9300324e1\nSuccessfully built 003626f91226\n\n```\n\n\n## \u304a\u308f\u308a\u306b\n\n[Can't install httpd on fedora (cpio: cap_set_file), fixed somewhere or not? \u00b7 Issue #8966 \u00b7 docker/docker](https://github.com/docker/docker/issues/8966)\n\u5143\u3005\u306faufs\u306e\u30d0\u30b0\uff08\uff1f\uff09\u306e\u3088\u3046\u306a\u306e\u3067\u3001`CONFIG_AUFS_XATTR`\u304c\u8a2d\u5b9a\u3067\u304d\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u307e\u3067aufs\u3092\u66f4\u65b0\u3057\u3066\u3001`CONFIG_AUFS_XATTR`\u3092enable\u306b\u3059\u308c\u3070\u3001boot2docker\u306b\u9650\u3089\u305a\u4ed6\u306eLinuxOS\u3067\u3082\u3053\u306e\u554f\u984c\u306f\u89e3\u6d88\u3059\u308b\u3068\u306e\u3053\u3068\u3002\n\n> thaJeztah commented on 19 Apr 2015\n> > Basically, this is a duplicate of #6980. This is an issue with (older versions of) AUFS, see #6980 (comment):\n> > \n> > You need a newer version of AUFS with support for CONFIG_AUFS_XATTR, and that kernel config option must be enabled. That fixes the cpio: cap_set_file on boot2docker (boot2docker/boot2docker#818), and should fix it on any Linux using AUFS.\n> > I just tested this issue and was able to reproduce it on a DigitalOcean droplet using AUFS. Switching to BTRFS as storage driver resolved the problem.\n> > \n> > I also spotted an external issue being linked to this, and there seems to be a 'workaround' here\nowncloud/core#12967 (comment) which I haven't tested.\n> > \n> > This is not a bug in Docker, but an issue with older AUFS versions missing CONFIG_AUFS_XATTR support. To resolve the issue, update the AUFS version and enable the CONFIG_AUFS_XATTR attribute, or switch to another storage driver.\n> > \n> > I'm going to close this issue, because this is a duplicate of #6980 and (unfortunately) nothing Docker itself can resolve.\n> > \n> > Feel free to continue the discussion, perhaps someone is able to add additional tips.\n\n\naufs\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3059\u308b\u3060\u3051\u306e\u5143\u6c17\u304c\u6b8b\u3063\u3066\u306a\u3044\u306e\u3067\u3001aufs\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3092\u6b8b\u3057\u3066\u7d42\u308f\u308a\u306b\u3059\u308b\u3002\n\n```\n[kaakaa@kaakaa-System-Product-Name] ~/work/docker/book-practical-guide/ch5-1-1\n% dmesg | fgrep -i aufs\n[    5.851021] aufs 3.13-20140303\n[    6.457590] aufs au_opts_parse:1155:docker[2298]: unknown option dirperm1\n[ 8083.921023] Modules linked in: autofs4 nls_iso8859_1 nls_utf8 udf crc_itu_t veth xt_addrtype aufs pci_stub vboxpci(OX) vboxnetadp(OX) vboxnetflt(OX) ipt_MASQUERADE iptable_nat nf_nat_ipv4 nf_nat nf_conntrack_ipv4 nf_defrag_ipv4 xt_conntrack nf_conntrack ipt_REJECT xt_CHECKSUM iptable_mangle xt_tcpudp bridge stp llc vboxdrv(OX) ip6table_filter ip6_tables iptable_filter ip_tables ebtable_nat ebtables x_tables snd_hda_codec_hdmi snd_hda_codec_via joydev usb_storage hid_generic bnep rfcomm bluetooth hid_logitech_dj usbhid hid intel_rapl snd_hda_intel x86_pkg_temp_thermal snd_hda_codec intel_powerclamp eeepc_wmi asus_wmi snd_hwdep coretemp snd_pcm kvm_intel sparse_keymap kvm snd_page_alloc i915 snd_seq_midi snd_seq_midi_event snd_rawmidi crct10dif_pclmul crc32_pclmul binfmt_misc snd_seq snd_seq_device aesni_intel aes_x86_64 drm_kms_helper lrw gf128mul glue_helper snd_timer ablk_helper drm cryptd snd mei_me i2c_algo_bit mei soundcore shpchp lpc_ich wmi mac_hid video serio_raw parport_pc ppdev lp parport psmouse alx pata_acpi mdio\n[107238.762713] aufs au_opts_parse:1155:docker[27263]: unknown option dirperm1\n```\n\u53c2\u8003\uff1a [AuFS (Advanced multi layered unification filesystem) \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - \u79c1\u306e\u4e8c\u6b21\u8a18\u61b6](http://d.hatena.ne.jp/ayokoyama/20140604/p2)\n", "tags": ["Ubuntu14.04", "docker", "aufs"]}