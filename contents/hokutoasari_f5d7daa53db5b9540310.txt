{"context": " More than 1 year has passed since last update.\n\nOSX, phpenv \u3067\u4f5c\u6210\u3057\u305f\u74b0\u5883\u306b memcached \u3092\u8a2d\u5b9a\u3059\u308b\n\u30e1\u30e2\u3067\u3059\u3002\n\u304a\u305d\u3089\u304f\u3001 PECL \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f memcached \u306b\u9650\u3089\u305a\u3001\u307b\u307c\u540c\u69d8\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u306f\u305a\u3002\n\u203b\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001 php 5.4.16 \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n\nbrew \u304b\u3089\u3001memcached, libmemcached \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nmemcached, libmemcached \u306f brew \u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n$ brew install memcached\n$ brew install libmemcached\n\n\nphp \u304b\u3089\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\nPECL \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u53d6\u5f97\u3002\nphpize\n./configure\nmake && make install\n\u300cextension=memcached.so\u300d\u3092\u3069\u3053\u304b\u306b\u8a2d\u5b9a\n\n\n\u4efb\u610f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001phpize, ./configure, make, make install\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3002\n$ cd ~/Documents/tmp/pecl_librares/memcached # \u3069\u3053\u3067\u3082\u826f\u3044\n$ wget http://pecl.php.net/get/memcached-2.2.0.tgz\n$ tar zxvf memcached-2.2.0.tgz\n$ cd memcached-2.2.0\n$ phpize\n$ ./configure\n$ make\n$ make install\nInstalling shared extensions:     ~/.phpenv/versions/5.4.16/lib/php/extensions/no-debug-non-zts-20100525/\n$ ls ~/.phpenv/versions/5.4.16/lib/php/extensions/no-debug-non-zts-20100525/\nmemcached.so xdebug.so\n\n\u3053\u308c\u3067\u3001\u4eca phpenv \u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e ./lib/php/extensions/ \u4ee5\u4e0b\u306b memcached.so \u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\nmemcached.ini \u3092\u4f5c\u6210\u3057\u3066 memcached.so \u3092\u9069\u7528\nphp.ini \u306b\u8a18\u8f09\u3057\u3066\u3082\u540c\u3058\u3002\n./conf.d/ \u4ee5\u4e0b\u306e *.ini \u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u8a2d\u5b9a\u6e08\u307f\u306a\u306e\u3067\u3001\u4eca\u56de\u306f memcached.ini \u306b\u66f8\u304f\u3053\u3068\u306b\u3057\u305f\u3002\n$ vi ~/.phpenv/versions/5.4.16/etc/conf.d/memcached.ini\nextension=memcached.so\n$ php -i | grep mem # \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\n\n\u203b\u5f53\u305f\u308a\u524d\u3067\u3059\u304c\u3001\u3053\u306e\u72b6\u614b\u3067WEB\u304b\u3089\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u3068\u3001 memcached \u304c\u8d77\u52d5\u3057\u3066\u306a\u3044\u30a8\u30e9\u30fc\u3068\u306a\u308b\u3002(memcached \u8d77\u52d5\u3055\u305b\u3066\u306a\u3044\u3057\u3001web\u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\u3055\u305b\u3066\u306a\u3044\u3057\u3002)\n\nhoge.php\n$mc = new Memcached(); \n$mc->addServer(\"localhost\", 11211); \n\n$set_result = $mc->set(\"foo\", \"Hello!\"); \nvar_dump($mc->getResultCode());//int 47 // 47 = MEMCACHED_SERVER_TEMPORARILY_DISABLED via:http://www.php.net/manual/ja/memcached.getresultcode.php\n\n\n\nmemcached \u306e\u81ea\u52d5\u8d77\u52d5\u3092\u6709\u52b9\u306b\u3059\u308b\nbrew \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b plist \u3092\u4f7f\u3046\u3002\n\n\u81ea\u52d5\u8d77\u52d5\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n\u7121\u3051\u308c\u3070\u4f5c\u308b\u3002\n$ mkdir -p ~/Library/LaunchAgents\n\n\n\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b homebrew \u304c\u63d0\u4f9b\u3059\u308b plist \u3092\u30b3\u30d4\u30fc\n\u666e\u901a\u306b\u30b3\u30d4\u30fc\u3059\u308c\u3070\u826f\u3044\u3060\u3051\u3002\n$ cp /usr/local/Cellar/memcached/1.4.17/homebrew.mxcl.memcached.plist ~/Library/LaunchAgents/\n/usr/local/Cellar/memcached/1.4.17/homebrew.mxcl.memcached.plist -> ~/Library/LaunchAgents/homebrew.mxcl.memcached.plist\n\n/usr/local/Cellar/memcached/1.4.17/homebrew.mxcl.memcached.plist \u306f\u3001 RunAtLoad \u304c true \u306a\u306e\u3067\u3001\u30ed\u30fc\u30c9\u3055\u308c\u308c\u3070\u8d77\u52d5\u3059\u308b\u3002\n  <key>RunAtLoad</key>\n  <true/>\n\n\nmemcached \u306e\u8d77\u52d5\u3068\u52d5\u4f5c\u78ba\u8a8d\nlaunchctl load \u3067\u8d77\u52d5\u3055\u305b\u308b\u3002\n$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.memcached.plist\n$ ps ax | grep memcached # \u8d77\u52d5\u3057\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\u3059\u308b\n48184   ??  S      0:00.01 /usr/local/opt/memcached/bin/memcached -l localhost\n\n\nweb\u30b5\u30fc\u30d0\u30fc\u306e\u518d\u8d77\u52d5\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066 web \u30b5\u30fc\u30d0\u30fc\u3082\u518d\u8d77\u52d5\u3057\u3066\u304a\u304f\u3002\n$ sudo apachectl restart\n\n\u3053\u308c\u3067\u826f\u3044\u306f\u305a\u3002\n# OSX, phpenv \u3067\u4f5c\u6210\u3057\u305f\u74b0\u5883\u306b memcached \u3092\u8a2d\u5b9a\u3059\u308b\n\n\u30e1\u30e2\u3067\u3059\u3002\n\n\u304a\u305d\u3089\u304f\u3001 PECL \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306f memcached \u306b\u9650\u3089\u305a\u3001\u307b\u307c\u540c\u69d8\u306b\u8a2d\u5b9a\u3067\u304d\u308b\u306f\u305a\u3002\n\n\u203b\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001 php 5.4.16 \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n\n## brew \u304b\u3089\u3001memcached, libmemcached \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nmemcached, libmemcached \u306f brew \u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\n$ brew install memcached\n$ brew install libmemcached\n```\n\n## php \u304b\u3089\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n1. PECL \u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u53d6\u5f97\u3002\n2. phpize\n3. ./configure\n4. make && make install\n5. \u300cextension=memcached.so\u300d\u3092\u3069\u3053\u304b\u306b\u8a2d\u5b9a\n\n### \u4efb\u610f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001phpize, ./configure, make, make install\n\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3002\n\n```\n$ cd ~/Documents/tmp/pecl_librares/memcached # \u3069\u3053\u3067\u3082\u826f\u3044\n$ wget http://pecl.php.net/get/memcached-2.2.0.tgz\n$ tar zxvf memcached-2.2.0.tgz\n$ cd memcached-2.2.0\n$ phpize\n$ ./configure\n$ make\n$ make install\nInstalling shared extensions:     ~/.phpenv/versions/5.4.16/lib/php/extensions/no-debug-non-zts-20100525/\n$ ls ~/.phpenv/versions/5.4.16/lib/php/extensions/no-debug-non-zts-20100525/\nmemcached.so xdebug.so\n```\n\n\u3053\u308c\u3067\u3001\u4eca phpenv \u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u306e ./lib/php/extensions/ \u4ee5\u4e0b\u306b memcached.so \u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n### memcached.ini \u3092\u4f5c\u6210\u3057\u3066 memcached.so \u3092\u9069\u7528\n\nphp.ini \u306b\u8a18\u8f09\u3057\u3066\u3082\u540c\u3058\u3002\n\n./conf.d/ \u4ee5\u4e0b\u306e *.ini \u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u8a2d\u5b9a\u6e08\u307f\u306a\u306e\u3067\u3001\u4eca\u56de\u306f memcached.ini \u306b\u66f8\u304f\u3053\u3068\u306b\u3057\u305f\u3002\n\n```\n$ vi ~/.phpenv/versions/5.4.16/etc/conf.d/memcached.ini\nextension=memcached.so\n$ php -i | grep mem # \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\n```\n\n\u203b\u5f53\u305f\u308a\u524d\u3067\u3059\u304c\u3001\u3053\u306e\u72b6\u614b\u3067WEB\u304b\u3089\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u3068\u3001 memcached \u304c\u8d77\u52d5\u3057\u3066\u306a\u3044\u30a8\u30e9\u30fc\u3068\u306a\u308b\u3002(memcached \u8d77\u52d5\u3055\u305b\u3066\u306a\u3044\u3057\u3001web\u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\u3055\u305b\u3066\u306a\u3044\u3057\u3002)\n\n```hoge.php\n$mc = new Memcached(); \n$mc->addServer(\"localhost\", 11211); \n\n$set_result = $mc->set(\"foo\", \"Hello!\"); \nvar_dump($mc->getResultCode());//int 47 // 47 = MEMCACHED_SERVER_TEMPORARILY_DISABLED via:http://www.php.net/manual/ja/memcached.getresultcode.php\n```\n\n## memcached \u306e\u81ea\u52d5\u8d77\u52d5\u3092\u6709\u52b9\u306b\u3059\u308b\n\nbrew \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308b plist \u3092\u4f7f\u3046\u3002\n\n### \u81ea\u52d5\u8d77\u52d5\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n\n\u7121\u3051\u308c\u3070\u4f5c\u308b\u3002\n\n```\n$ mkdir -p ~/Library/LaunchAgents\n```\n\n### \u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b homebrew \u304c\u63d0\u4f9b\u3059\u308b plist \u3092\u30b3\u30d4\u30fc\n\n\u666e\u901a\u306b\u30b3\u30d4\u30fc\u3059\u308c\u3070\u826f\u3044\u3060\u3051\u3002\n\n```\n$ cp /usr/local/Cellar/memcached/1.4.17/homebrew.mxcl.memcached.plist ~/Library/LaunchAgents/\n/usr/local/Cellar/memcached/1.4.17/homebrew.mxcl.memcached.plist -> ~/Library/LaunchAgents/homebrew.mxcl.memcached.plist\n```\n\n/usr/local/Cellar/memcached/1.4.17/homebrew.mxcl.memcached.plist \u306f\u3001 RunAtLoad \u304c true \u306a\u306e\u3067\u3001\u30ed\u30fc\u30c9\u3055\u308c\u308c\u3070\u8d77\u52d5\u3059\u308b\u3002\n\n```\n  <key>RunAtLoad</key>\n  <true/>\n```\n\n### memcached \u306e\u8d77\u52d5\u3068\u52d5\u4f5c\u78ba\u8a8d\n\nlaunchctl load \u3067\u8d77\u52d5\u3055\u305b\u308b\u3002\n\n```\n$ launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.memcached.plist\n$ ps ax | grep memcached # \u8d77\u52d5\u3057\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\u3059\u308b\n48184   ??  S      0:00.01 /usr/local/opt/memcached/bin/memcached -l localhost\n```\n\n### web\u30b5\u30fc\u30d0\u30fc\u306e\u518d\u8d77\u52d5\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066 web \u30b5\u30fc\u30d0\u30fc\u3082\u518d\u8d77\u52d5\u3057\u3066\u304a\u304f\u3002\n\n```\n$ sudo apachectl restart\n```\n\n\u3053\u308c\u3067\u826f\u3044\u306f\u305a\u3002", "tags": ["PHP", "Memcached", "phpenv"]}