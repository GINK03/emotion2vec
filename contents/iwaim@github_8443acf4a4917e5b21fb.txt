{"context": "\n\n\u306f\u3058\u3081\u306b\nZabbix 2.2\u306e\u30bd\u30fc\u30b9\u306b\u306f\u300cconf/zabbix_agentd/userparameter_mysql.conf\u300d\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066MySQL\u3092\u76e3\u8996\u3057\u307e\u3059\u3002\u672c\u5bb6\u304c\u516c\u958b\u3057\u3066\u3044\u308bRPM\u30d1\u30c3\u30b1\u30fc\u30b8\u306ezabbix-agent\u306b\u3082\u300c/etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf\u300d\u3068\u3057\u3066\u540c\u68b1\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u624b\u9806\n\nZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3059\u308b\uff08\u3053\u3053\u3067\u306f\u8aac\u660e\u3057\u306a\u3044\uff09\nMySQL\u306bZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\n\u300cuserparameter_mysql.conf\u300d\u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bHOME\u306b\u300c.my.cnf\u300d\u3092\u4f5c\u6210\u3059\u308b\nZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u518d\u8d77\u52d5\u3059\u308b\nzabbix_get\u306a\u3069\u3067\u6319\u52d5\u3092\u78ba\u8a8d\u3059\u308b\n\n\n\u8a73\u7d30\u306a\u624b\u9806\n\n2. MySQL\u306bZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\nMySQL\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u540d\u300czabbix\u300d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u300czbxpasswd\u300d\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3002\nmysql> grant process on *.* to 'zabbix'@'localhost' identified by 'zbxpasswd';\n\n\n3. \u300cuserparameter_mysql.conf\u300d\u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bHOME\u306b\u300c.my.cnf\u300d\u3092\u4f5c\u6210\u3059\u308b\n\u300cuserparameter_mysql.conf\u300d\u3092\u307f\u308b\u3068HOME\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n/etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf\nHOME=/var/lib/zabbix\n\n\n\u300c/var/lib/zabbix/.my.cnf\u300d\u3092\u4f5c\u6210\u3057\u3001MySQL\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002\u300c/var/lib/zabbix\u300d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u304c\u306a\u3044\u5834\u5408\u306f\u305d\u308c\u3082\u4f5c\u6210\u3059\u308b\u3053\u3068\u3002\u307e\u305f\u3001\u300c/var/lib/zabbix/.my.cnf\u300d\u306b\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a18\u8f09\u3059\u308b\u306e\u3067\u3001\u6a29\u9650\u306f400\u3042\u305f\u308a\u306b\u3057\u3066\u304a\u304f\u3068\u3088\u3044\u3002\n\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306a\u624b\u9806\u306b\u306a\u308b\u3002\n$ sudo mkdir /var/lib/zabbix\n$ sudo vim /var/lib/zabbix/.my.cnf\n$ sudo chmod 400 /var/lib/zabbix/.my.cnf\n$ sudo chown -R zabbix:zabbix /var/lib/zabbix\n\n\u300c/var/lib/zabbix/.my.cnf\u300d\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u8a18\u8ff0\u3059\u308b\u3002\n[client]\nuser = zabbix\npassword= zbxpasswd\n\n\n\n5. zabbix_get\u306a\u3069\u3067\u6319\u52d5\u3092\u78ba\u8a8d\u3059\u308b\nZabbix\u30b5\u30fc\u30d0\u30fc\u5074\u304b\u3089zabbix_get\u3067\u6319\u52d5\u3092\u78ba\u8a8d\u3057\u3001\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308c\u3070OK\u3002\n\n$ zabbix_get -s IP\u30a2\u30c9\u30ec\u30b9 -k mysql.status[Com_insert]\n167105\n$ \n\n\u306f\u3058\u3081\u306b\n=======\n\nZabbix 2.2\u306e\u30bd\u30fc\u30b9\u306b\u306f\u300cconf/zabbix_agentd/userparameter_mysql.conf\u300d\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066MySQL\u3092\u76e3\u8996\u3057\u307e\u3059\u3002\u672c\u5bb6\u304c\u516c\u958b\u3057\u3066\u3044\u308b[RPM\u30d1\u30c3\u30b1\u30fc\u30b8](http://repo.zabbix.com/zabbix/2.2/rhel/6/ \" Zabbix SIA.\u304c\u516c\u958b\u3057\u3066\u3044\u308bRed Hat Enterprise Linux 6\u7528\u306eRPM\u30d1\u30c3\u30b1\u30fc\u30b8\")\u306ezabbix-agent\u306b\u3082\u300c/etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf\u300d\u3068\u3057\u3066\u540c\u68b1\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u624b\u9806\n====\n\n1. Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u9069\u5207\u306b\u8a2d\u5b9a\u3059\u308b\uff08\u3053\u3053\u3067\u306f\u8aac\u660e\u3057\u306a\u3044\uff09\n2. MySQL\u306bZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\n3. \u300cuserparameter_mysql.conf\u300d\u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bHOME\u306b\u300c.my.cnf\u300d\u3092\u4f5c\u6210\u3059\u308b\n4. Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u518d\u8d77\u52d5\u3059\u308b\n4. zabbix_get\u306a\u3069\u3067\u6319\u52d5\u3092\u78ba\u8a8d\u3059\u308b\n\n\u8a73\u7d30\u306a\u624b\u9806\n---------\n\n### 2. MySQL\u306bZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\n\nMySQL\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u30e6\u30fc\u30b6\u30fc\u540d\u300czabbix\u300d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u300czbxpasswd\u300d\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3002\n\n```\nmysql> grant process on *.* to 'zabbix'@'localhost' identified by 'zbxpasswd';\n```\n\n### 3. \u300cuserparameter_mysql.conf\u300d\u3067\u6307\u5b9a\u3055\u308c\u3066\u3044\u308bHOME\u306b\u300c.my.cnf\u300d\u3092\u4f5c\u6210\u3059\u308b\n\n\u300cuserparameter_mysql.conf\u300d\u3092\u307f\u308b\u3068HOME\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```:/etc/zabbix/zabbix_agentd.d/userparameter_mysql.conf\nHOME=/var/lib/zabbix\n```\n\n\u300c/var/lib/zabbix/.my.cnf\u300d\u3092\u4f5c\u6210\u3057\u3001MySQL\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3059\u308b\u3002\u300c/var/lib/zabbix\u300d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u304c\u306a\u3044\u5834\u5408\u306f\u305d\u308c\u3082\u4f5c\u6210\u3059\u308b\u3053\u3068\u3002\u307e\u305f\u3001\u300c/var/lib/zabbix/.my.cnf\u300d\u306b\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a18\u8f09\u3059\u308b\u306e\u3067\u3001\u6a29\u9650\u306f400\u3042\u305f\u308a\u306b\u3057\u3066\u304a\u304f\u3068\u3088\u3044\u3002\n\n\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306a\u624b\u9806\u306b\u306a\u308b\u3002\n\n```shell-session\n$ sudo mkdir /var/lib/zabbix\n$ sudo vim /var/lib/zabbix/.my.cnf\n$ sudo chmod 400 /var/lib/zabbix/.my.cnf\n$ sudo chown -R zabbix:zabbix /var/lib/zabbix\n```\n\n\u300c/var/lib/zabbix/.my.cnf\u300d\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u8a18\u8ff0\u3059\u308b\u3002\n\n```mysql\n[client]\nuser = zabbix\npassword= zbxpasswd\n\n```\n\n### 5. zabbix_get\u306a\u3069\u3067\u6319\u52d5\u3092\u78ba\u8a8d\u3059\u308b\n\nZabbix\u30b5\u30fc\u30d0\u30fc\u5074\u304b\u3089zabbix_get\u3067\u6319\u52d5\u3092\u78ba\u8a8d\u3057\u3001\u5024\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308c\u3070OK\u3002\n\n> $ zabbix_get -s IP\u30a2\u30c9\u30ec\u30b9 -k mysql.status[Com_insert]\n167105\n$ \n", "tags": ["zabbix2.2", "MySQL"]}