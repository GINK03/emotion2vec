{"context": "\nAndroidManifest.xml\n<uses-permission android:name=\"android.permission.INTERNET\"/>\n\n\n\nAndroidManifest.xml\n <ProgressBar\n        style=\"?android:attr/progressBarStyleLarge\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/progress\"\n        android:max=\"100\"\n        android:visibility=\"gone\"\n        />\n    <Button\n        android:layout_marginTop=\"50dp\"\n        android:id=\"@+id/btn\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"btn_onClick\"\n        android:text=\"\u30ad\u30e3\u30f3\u30bb\u30eb\"\n        />\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/txtResult\"/>\n\n\n\nMainActivity.java\npublic class MainActivity extends AppCompatActivity {\n    AsyncNetworkTask task;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        task = new AsyncNetworkTask(this);\n        task.execute(\"http://www.wings.msn.to/\");\n    }\n\n    public void btn_onClick(View view){\n        task.cancel(true);\n    }\n}\n\n\n\nAsyncNetworkTask.java\npublic class AsyncNetworkTask extends AsyncTask<String, Integer, String>{\n    private TextView txtResult;\n    private ProgressBar progress;\n\n    public AsyncNetworkTask(Context context){\n        super();\n        MainActivity activity = (MainActivity)context;\n        txtResult = (TextView)activity.findViewById(R.id.txtResult);\n        progress = (ProgressBar)activity.findViewById(R.id.progress);\n    }\n\n    @Override\n    protected void onPreExecute() {\n        progress.setVisibility(ProgressBar.VISIBLE);\n    }\n\n    @Override\n    protected String doInBackground(String... params) {\n        publishProgress(30);\n        SystemClock.sleep(3000);\n        publishProgress(60);\n        StringBuilder builder = new StringBuilder();\n\n        try {\n            URL url = new URL(params[0]);\n            HttpURLConnection con = (HttpURLConnection) url.openConnection();\n            con.setRequestMethod(\"GET\");\n            BufferedReader reader = new BufferedReader(\n                    new InputStreamReader(con.getInputStream(), \"Shift-JIS\"));\n            String line;\n            while((line = reader.readLine()) != null) {\n                builder.append(line);\n            }\n\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        publishProgress(100);\n        return builder.toString();\n    }\n\n    @Override\n    protected void onProgressUpdate(Integer... values) {\n        Log.d(\"url\", values[0].toString());\n    }\n\n    @Override\n    protected void onPostExecute(String s) {\n        txtResult.setText(s);\n        progress.setVisibility(ProgressBar.GONE);\n    }\n\n    @Override\n    protected void onCancelled() {\n        txtResult.setText(\"\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\");\n        progress.setVisibility(ProgressBar.GONE);\n    }\n}\n\n\n\n\n```xml:AndroidManifest.xml\n<uses-permission android:name=\"android.permission.INTERNET\"/>\n```\n\n```xml:AndroidManifest.xml\n <ProgressBar\n        style=\"?android:attr/progressBarStyleLarge\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/progress\"\n        android:max=\"100\"\n        android:visibility=\"gone\"\n        />\n    <Button\n        android:layout_marginTop=\"50dp\"\n        android:id=\"@+id/btn\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:onClick=\"btn_onClick\"\n        android:text=\"\u30ad\u30e3\u30f3\u30bb\u30eb\"\n        />\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:id=\"@+id/txtResult\"/>\n```\n\n```java:MainActivity.java\npublic class MainActivity extends AppCompatActivity {\n    AsyncNetworkTask task;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        task = new AsyncNetworkTask(this);\n        task.execute(\"http://www.wings.msn.to/\");\n    }\n\n    public void btn_onClick(View view){\n        task.cancel(true);\n    }\n}\n```\n\n```java:AsyncNetworkTask.java\npublic class AsyncNetworkTask extends AsyncTask<String, Integer, String>{\n    private TextView txtResult;\n    private ProgressBar progress;\n\n    public AsyncNetworkTask(Context context){\n        super();\n        MainActivity activity = (MainActivity)context;\n        txtResult = (TextView)activity.findViewById(R.id.txtResult);\n        progress = (ProgressBar)activity.findViewById(R.id.progress);\n    }\n\n    @Override\n    protected void onPreExecute() {\n        progress.setVisibility(ProgressBar.VISIBLE);\n    }\n\n    @Override\n    protected String doInBackground(String... params) {\n        publishProgress(30);\n        SystemClock.sleep(3000);\n        publishProgress(60);\n        StringBuilder builder = new StringBuilder();\n\n        try {\n            URL url = new URL(params[0]);\n            HttpURLConnection con = (HttpURLConnection) url.openConnection();\n            con.setRequestMethod(\"GET\");\n            BufferedReader reader = new BufferedReader(\n                    new InputStreamReader(con.getInputStream(), \"Shift-JIS\"));\n            String line;\n            while((line = reader.readLine()) != null) {\n                builder.append(line);\n            }\n\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        publishProgress(100);\n        return builder.toString();\n    }\n\n    @Override\n    protected void onProgressUpdate(Integer... values) {\n        Log.d(\"url\", values[0].toString());\n    }\n\n    @Override\n    protected void onPostExecute(String s) {\n        txtResult.setText(s);\n        progress.setVisibility(ProgressBar.GONE);\n    }\n\n    @Override\n    protected void onCancelled() {\n        txtResult.setText(\"\u30ad\u30e3\u30f3\u30bb\u30eb\u3055\u308c\u307e\u3057\u305f\");\n        progress.setVisibility(ProgressBar.GONE);\n    }\n}\n```\n", "tags": ["Get", "HTTP", "Android"]}