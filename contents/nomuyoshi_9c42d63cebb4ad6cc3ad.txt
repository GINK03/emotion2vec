{"tags": ["\u30e1\u30bf\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0", "eval", "Ruby"], "context": " More than 1 year has passed since last update.\n\nKernal.#eval\u3068\u306f\nKernel\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308beval\u30e1\u30bd\u30c3\u30c9\u306f\u5f15\u6570\u306b\u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002\nirb(main):001:0> eval \"1+2\"\n=> 3\nirb(main):002:0> eval \"[1,3,5].each { |value| p value }\"\n1\n3\n5\n=> [1, 3, 5]\n# \u5909\u6570\u64cd\u4f5c\u3082\u53ef\u80fd\nirb(main):003:0> a = 10\n=> 10\nirb(main):004:0> eval \"a = 1\"\n=> 1\nirb(main):005:0> a\n=> 1\n\nattr_reader\u30e1\u30bd\u30c3\u30c9\u306e\u3088\u3046\u306a\u30e1\u30bd\u30c3\u30c9\u540d\u306f\u9055\u3046\u304c\u51e6\u7406\u5185\u5bb9\u306f\u307b\u3068\u3093\u3069\u540c\u3058\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u304d\u306b\u4fbf\u5229\u3002\n\n\u4f8b. \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3078\u5024\u3092\u4ee3\u5165\u3057\u305f\u3068\u304d\u306b\u5225\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306b\u5909\u66f4\u524d\u306e\u5024\u3092\u4fdd\u5b58\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u308b\nclass LoggingInstanceVariable\n  logging_instance_val_names = %w(first_val second_val third_val)\n\n  logging_instance_val_names.each do |val_name|\n    eval <<-END_OF_DEF\n      attr_reader :#{val_name}, :before_#{val_name}\n\n      def #{val_name}=(val)\n        @before_#{val_name} = @#{val_name}\n        @#{val_name} = val\n      end\n    END_OF_DEF\n  end\nend\n\nobj = LoggingInstanceVariable.new\nobj.first_val = 1\nobj.first_val = 2\np obj.first_val        #=> 2\np obj.before_first_val #=> 1\n\nobj.third_val = \"third_val\"\nobj.third_val = :third_val\n\np obj.third_val        #=> :third_val\np obj.before_third_val #=> \"third_val\"\n\n# Kernal.#eval\u3068\u306f\nKernel\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308beval\u30e1\u30bd\u30c3\u30c9\u306f\u5f15\u6570\u306b\u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u3057\u3066\u5b9f\u884c\u3059\u308b\u3002\n\n```ruby\nirb(main):001:0> eval \"1+2\"\n=> 3\nirb(main):002:0> eval \"[1,3,5].each { |value| p value }\"\n1\n3\n5\n=> [1, 3, 5]\n# \u5909\u6570\u64cd\u4f5c\u3082\u53ef\u80fd\nirb(main):003:0> a = 10\n=> 10\nirb(main):004:0> eval \"a = 1\"\n=> 1\nirb(main):005:0> a\n=> 1\n```\n\n**attr_reader\u30e1\u30bd\u30c3\u30c9\u306e\u3088\u3046\u306a\u30e1\u30bd\u30c3\u30c9\u540d\u306f\u9055\u3046\u304c\u51e6\u7406\u5185\u5bb9\u306f\u307b\u3068\u3093\u3069\u540c\u3058\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u304d\u306b\u4fbf\u5229\u3002**\n\n## \u4f8b. \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3078\u5024\u3092\u4ee3\u5165\u3057\u305f\u3068\u304d\u306b\u5225\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u306b\u5909\u66f4\u524d\u306e\u5024\u3092\u4fdd\u5b58\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u307f\u308b\n\n```ruby\nclass LoggingInstanceVariable\n  logging_instance_val_names = %w(first_val second_val third_val)\n  \n  logging_instance_val_names.each do |val_name|\n    eval <<-END_OF_DEF\n      attr_reader :#{val_name}, :before_#{val_name}\n\n      def #{val_name}=(val)\n        @before_#{val_name} = @#{val_name}\n        @#{val_name} = val\n      end\n    END_OF_DEF\n  end\nend\n\nobj = LoggingInstanceVariable.new\nobj.first_val = 1\nobj.first_val = 2\np obj.first_val        #=> 2\np obj.before_first_val #=> 1\n\nobj.third_val = \"third_val\"\nobj.third_val = :third_val\n\np obj.third_val        #=> :third_val\np obj.before_third_val #=> \"third_val\"\n```\n\n"}