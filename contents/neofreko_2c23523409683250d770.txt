{"context": " More than 1 year has passed since last update.Based on this article, we can setup apache log processor to forward data to datadog.\nMind the format setting, change ltsv => apache2\n<source>\n    type tail\n    format apache2\n    #time_format %d/%b/%Y:%H:%M:%S %z\n    path /var/log/httpd/access_log\n    pos_file /tmp/access_log.pos\n    tag apache.access\n</source>\n\nRequired plugins:\n\nfluent-plugin-datacounter\nfluent-plugin-rename-key\nfluent-plugin-record-reformer\nfluent-plugin-forest\nfluent-plugin-dd\n\nIf you are using td-agent, plugin can be installed using: sudo /usr/lib64/fluent/ruby/bin/fluent-gem install fluent-plugin-record-reformer\nPermission issue may arise, so:\nchmod 0645 /var/log/httpd\nShoot, apparently we need to tweak to http status matching as well. Based on this article, we should math the code instead of status key\n<match apache.access>\n    type datacounter\n    tag apache.status\n    aggregate tag\n    count_key status\n    pattern1 2xx ^2\\d\\d$\n    pattern2 3xx ^3\\d\\d$\n    pattern3 4xx ^4\\d\\d$\n    pattern4 5xx ^5\\d\\d$\n</match>\n\nVoila\n\nNow we're talking ;)\nPS:\nBoth fluentd and datadog are new to me\n\nBased on this [article](http://qiita.com/takus/items/f3dfaa1ab431644b922b), we can setup apache log processor to forward data to datadog.\n\nMind the ```format``` setting, change ```ltsv``` => ```apache2```\n\n```\n<source>\n    type tail\n    format apache2\n    #time_format %d/%b/%Y:%H:%M:%S %z\n    path /var/log/httpd/access_log\n    pos_file /tmp/access_log.pos\n    tag apache.access\n</source>\n```\n\nRequired plugins:\n\n1. fluent-plugin-datacounter\n2. fluent-plugin-rename-key\n3. fluent-plugin-record-reformer\n4. fluent-plugin-forest\n5. fluent-plugin-dd\n\nIf you are using td-agent, plugin can be installed using: ```sudo /usr/lib64/fluent/ruby/bin/fluent-gem install fluent-plugin-record-reformer```\n\nPermission issue may arise, so:\n```chmod 0645 /var/log/httpd```\n\nShoot, apparently we need to tweak to http status matching as well. Based on this [article](http://www.fluentd.org/guides/recipes/apache-add-hostname), we should math the ```code``` instead of ```status``` key\n\n```\n<match apache.access>\n    type datacounter\n    tag apache.status\n    aggregate tag\n    count_key status\n    pattern1 2xx ^2\\d\\d$\n    pattern2 3xx ^3\\d\\d$\n    pattern3 4xx ^4\\d\\d$\n    pattern4 5xx ^5\\d\\d$\n</match>\n```\n\nVoila\n\n![Datadog timeseries](https://monosnap.com/file/DhscDbwuRlTmGbcWXcQmUhBFijkutQ.png)\n\nNow we're talking ;)\n\nPS:\nBoth fluentd and datadog are new to me\n\n", "tags": ["Apache", "Datadog", "fluentd"]}