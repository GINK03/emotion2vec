{"context": " More than 1 year has passed since last update.Wi-Fi\u30c0\u30a4\u30ec\u30af\u30c8\u3067\u76f4\u63a5\u30c7\u30d0\u30a4\u30b9\u306b\u7121\u7dda\u63a5\u7d9a\u3059\u308b\u3068\u304d\u306b\u3001\u6bce\u56de\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u304b\u3089\u9078\u3076\u306e\u304c\u9762\u5012\u306a\u306e\u3067\u4f5c\u308a\u307e\u3057\u305f\u3002\nYosemite 10.10.5\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\u307f\u3067\u3059\u3002\n\nwificonn_mac.sh\n#!/bin/bash\nset -u\nexport LANG=\"C\"\n\nfunction usage() {\n  cat <<EOT\nUsage: bash ${0##*/} <network-SSID> <password>\nEOT\n}\n\n# \u5f15\u6570\u30c1\u30a7\u30c3\u30af\nif [ $# -ne 2 ]; then usage && exit 1; fi\n\n# Wi-Fi\u306e\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u8abf\u3079\u308b\nWIFI_DEV_NAME=$(networksetup -listallhardwareports | grep -w Wi-Fi -A1 | awk '/^Device:/{ print $2 }')\nif [ -z \"${WIFI_DEV_NAME}\" ]; then\n  echo \"Wi-Fi device not found!\"\n  exit 2\nfi\n\n# \u3059\u3067\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308c\u3070\u7d42\u4e86\nnetworksetup -getairportnetwork ${WIFI_DEV_NAME} | grep -wq $1\nif [ $? -eq 0 ]; then\n  echo 'Already connected.'\n  exit 0\nfi\n\nPOWER_ON_WAIT=1\n# Wi-Fi\u306e\u96fb\u6e90\u304c\u5165\u3063\u3066\u306a\u3051\u308c\u3070\u5165\u308c\u308b\nnetworksetup -getairportpower ${WIFI_DEV_NAME} | grep -wiq 'off'\nif [ $? -eq 0 ]; then\n  networksetup -setairportpower ${WIFI_DEV_NAME} on\n  if [ $? -ne 0 ]; then\n    echo \"Failed to power on ${WIFI_DEV_NAME}.\"\n    exit 3\n  fi\n  sleep ${POWER_ON_WAIT}\nfi\n\n# airport\u30b3\u30de\u30f3\u30c9\u306e\u30d5\u30eb\u30d1\u30b9\nAIRPORT_CMD='/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport'\n# \u6307\u5b9a\u306eSSID\u3092\u6301\u3064\u30a2\u30af\u30bb\u30b9\u30dd\u30a4\u30f3\u30c8\u304c\u3042\u308b\u304b\u8abf\u3079\u308b\n${AIRPORT_CMD} --scan=$1 | grep -wq $1\nif [ $? -ne 0 ]; then\n  echo \"The wi-fi network with SSID:'$1' not found.\"\n  exit 4\nfi\n\n# \u63a5\u7d9a\u30ea\u30c8\u30e9\u30a4\u56de\u6570/\u30ea\u30c8\u30e9\u30a4\u9593\u9694\u79d2\u6570\nCONNECTION_RETRY=3\nRETRY_INTERNAL=2\n# \u63a5\u7d9a\u3059\u308b\nremain=${CONNECTION_RETRY}\nwhile [ ${remain} -gt  0 ]\ndo\n  # networksetup -setairportnetwork \u306f\u6210\u529f\u6642\u3082\u5931\u6557\u6642\u30820\u3092\u8fd4\u3057\u3066\u304f\u308b\u306e\u3067\u51fa\u529b\u3067\u5224\u65ad\n  networksetup -setairportnetwork ${WIFI_DEV_NAME} $1 $2 | grep -wq 'Error'\n  if [ $? -ne 0 ]; then\n    break\n  fi\n  ((remain--))\n  sleep ${RETRY_INTERNAL}\ndone\nif [ ${remain} -eq 0 ]; then\n  echo \"Failed to join the network. Password may be incorrect.\"\n  exit 5\nfi\n\n# \u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u304b\u5ff5\u306e\u305f\u3081\u78ba\u8a8d\nnetworksetup -getairportnetwork ${WIFI_DEV_NAME} | grep -wq $1\nif [ $? -ne 0 ]; then\n  echo 'Something wrong occured!'\n  exit 6\nfi\n\necho 'Connected successfully.'\nexit 0\n\n\n\n\u4f7f\u3044\u65b9\n$ bash wificonn_mac.sh <network-SSID> <password>\n\n\u751f\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6253\u3064\u306e\u3067\u3001\u5171\u540c\u306e\u30de\u30b7\u30f3\u3067\u306f\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nalias\u3068\u304b\u8a2d\u5b9a\u3057\u3066\u3084\u308b\u3068\u5e78\u305b\u306b\u306a\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u4e00\u5fdc\u89e3\u8aac\nMac\u3067\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306fnetworksetup\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\nnetworksetup\u306b\u306f\u591a\u69d8\u306a\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u4ed8\u5c5e\u3057\u3066\u304a\u308a\uff08\u6570\u3048\u305f\u3089119\u500b\u3082\u3042\u308a\u307e\u3057\u305f\uff09\u3001Wi-Fi\u3060\u3051\u3067\u306a\u304fBluetooth\u3084Thunderbolt\u306e\u8a2d\u5b9a\u3082\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\n\n\n\u30b3\u30de\u30f3\u30c9\n\u7528\u9014\n\n\n\n\nnetworksetup -listallhardwareports\n\u5168\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c7\u30d0\u30a4\u30b9\u3092\u8868\u793a\n\n\nnetworksetup -getairportpower <device name>\n\n<device name>\u306e\u96fb\u6e90\u306eON/OFF\u3092\u8abf\u3079\u308b\n\n\nnetworksetup -setairportpower <on off>\n\n<device name>\u306e\u96fb\u6e90\u3092ON/OFF\u3059\u308b\n\n\nnetworksetup -getairportnetwork <device name>\n\n<device name>\u306e\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u8868\u793a\u3059\u308b\n\n\nnetworksetup -setairportnetwork <device name> <network> [password]\n\n<device name>\u3092\u30d1\u30b9\u30ef\u30fc\u30c9=password\u3067SSID=network\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u63a5\u7d9a\u3059\u308b\n\n\n\n\u7121\u7dda\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u691c\u7d22\uff08\u30b9\u30ad\u30e3\u30f3\uff09\u306fnetworksetup\u304b\u3089\u306f\u3067\u304d\u305a\u3001\u4ee3\u308f\u308a\u306bairport\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u4f55\u6545\u304bairport\u30b3\u30de\u30f3\u30c9\u306b\u306f\u30d1\u30b9\u304c\u901a\u3063\u3066\u304a\u3089\u305a\u3001\n/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport\u3068\u3044\u3046\u9577\u3044\u9577\u3044\u30d5\u30eb\u30d1\u30b9\u3067\u547c\u3073\u3060\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f--scan=<network-SSID>\u3068\u3057\u3066\u691c\u7d22\u5bfe\u8c61\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3057\u307e\u3057\u305f\u304c\u3001\u5358\u306b--scan\u3068\u3059\u308c\u3070\u5468\u56f2\u306e\u5168\u3066\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u691c\u7d22\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\u63a5\u7d9a\u3057\u305f\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u7121\u3057\u3067\u5b9f\u884c\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\nWi-Fi\u30c0\u30a4\u30ec\u30af\u30c8\u3067\u76f4\u63a5\u30c7\u30d0\u30a4\u30b9\u306b\u7121\u7dda\u63a5\u7d9a\u3059\u308b\u3068\u304d\u306b\u3001\u6bce\u56de\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u304b\u3089\u9078\u3076\u306e\u304c\u9762\u5012\u306a\u306e\u3067\u4f5c\u308a\u307e\u3057\u305f\u3002\nYosemite 10.10.5\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\u307f\u3067\u3059\u3002\n\n```bash:wificonn_mac.sh\n#!/bin/bash\nset -u\nexport LANG=\"C\"\n\nfunction usage() {\n  cat <<EOT\nUsage: bash ${0##*/} <network-SSID> <password>\nEOT\n}\n\n# \u5f15\u6570\u30c1\u30a7\u30c3\u30af\nif [ $# -ne 2 ]; then usage && exit 1; fi\n\n# Wi-Fi\u306e\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u8abf\u3079\u308b\nWIFI_DEV_NAME=$(networksetup -listallhardwareports | grep -w Wi-Fi -A1 | awk '/^Device:/{ print $2 }')\nif [ -z \"${WIFI_DEV_NAME}\" ]; then\n  echo \"Wi-Fi device not found!\"\n  exit 2\nfi\n\n# \u3059\u3067\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308c\u3070\u7d42\u4e86\nnetworksetup -getairportnetwork ${WIFI_DEV_NAME} | grep -wq $1\nif [ $? -eq 0 ]; then\n  echo 'Already connected.'\n  exit 0\nfi\n\nPOWER_ON_WAIT=1\n# Wi-Fi\u306e\u96fb\u6e90\u304c\u5165\u3063\u3066\u306a\u3051\u308c\u3070\u5165\u308c\u308b\nnetworksetup -getairportpower ${WIFI_DEV_NAME} | grep -wiq 'off'\nif [ $? -eq 0 ]; then\n  networksetup -setairportpower ${WIFI_DEV_NAME} on\n  if [ $? -ne 0 ]; then\n    echo \"Failed to power on ${WIFI_DEV_NAME}.\"\n    exit 3\n  fi\n  sleep ${POWER_ON_WAIT}\nfi\n\n# airport\u30b3\u30de\u30f3\u30c9\u306e\u30d5\u30eb\u30d1\u30b9\nAIRPORT_CMD='/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport'\n# \u6307\u5b9a\u306eSSID\u3092\u6301\u3064\u30a2\u30af\u30bb\u30b9\u30dd\u30a4\u30f3\u30c8\u304c\u3042\u308b\u304b\u8abf\u3079\u308b\n${AIRPORT_CMD} --scan=$1 | grep -wq $1\nif [ $? -ne 0 ]; then\n  echo \"The wi-fi network with SSID:'$1' not found.\"\n  exit 4\nfi\n\n# \u63a5\u7d9a\u30ea\u30c8\u30e9\u30a4\u56de\u6570/\u30ea\u30c8\u30e9\u30a4\u9593\u9694\u79d2\u6570\nCONNECTION_RETRY=3\nRETRY_INTERNAL=2\n# \u63a5\u7d9a\u3059\u308b\nremain=${CONNECTION_RETRY}\nwhile [ ${remain} -gt  0 ]\ndo\n  # networksetup -setairportnetwork \u306f\u6210\u529f\u6642\u3082\u5931\u6557\u6642\u30820\u3092\u8fd4\u3057\u3066\u304f\u308b\u306e\u3067\u51fa\u529b\u3067\u5224\u65ad\n  networksetup -setairportnetwork ${WIFI_DEV_NAME} $1 $2 | grep -wq 'Error'\n  if [ $? -ne 0 ]; then\n    break\n  fi\n  ((remain--))\n  sleep ${RETRY_INTERNAL}\ndone\nif [ ${remain} -eq 0 ]; then\n  echo \"Failed to join the network. Password may be incorrect.\"\n  exit 5\nfi\n\n# \u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u304b\u5ff5\u306e\u305f\u3081\u78ba\u8a8d\nnetworksetup -getairportnetwork ${WIFI_DEV_NAME} | grep -wq $1\nif [ $? -ne 0 ]; then\n  echo 'Something wrong occured!'\n  exit 6\nfi\n\necho 'Connected successfully.'\nexit 0\n```\n\n## \u4f7f\u3044\u65b9\n\n```bash\n$ bash wificonn_mac.sh <network-SSID> <password>\n```\n\n\u751f\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6253\u3064\u306e\u3067\u3001\u5171\u540c\u306e\u30de\u30b7\u30f3\u3067\u306f\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nalias\u3068\u304b\u8a2d\u5b9a\u3057\u3066\u3084\u308b\u3068\u5e78\u305b\u306b\u306a\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n## \u4e00\u5fdc\u89e3\u8aac\n\nMac\u3067\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u3092\u8a2d\u5b9a\u3059\u308b\u306b\u306f`networksetup`\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\n`networksetup`\u306b\u306f\u591a\u69d8\u306a\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u4ed8\u5c5e\u3057\u3066\u304a\u308a\uff08\u6570\u3048\u305f\u3089119\u500b\u3082\u3042\u308a\u307e\u3057\u305f\uff09\u3001Wi-Fi\u3060\u3051\u3067\u306a\u304fBluetooth\u3084Thunderbolt\u306e\u8a2d\u5b9a\u3082\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\n| \u30b3\u30de\u30f3\u30c9                                                           | \u7528\u9014                                |\n|--------------------------------------------------------------------|-------------------------------------|\n| `networksetup -listallhardwareports`                                 | \u5168\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c7\u30d0\u30a4\u30b9\u3092\u8868\u793a        |\n| `networksetup -getairportpower <device name>`                        | `<device name>`\u306e\u96fb\u6e90\u306eON/OFF\u3092\u8abf\u3079\u308b |\n| `networksetup -setairportpower <on off>`                            | `<device name>`\u306e\u96fb\u6e90\u3092ON/OFF\u3059\u308b       |\n| `networksetup -getairportnetwork <device name>`                      | `<device name>`\u306e\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u8868\u793a\u3059\u308b |\n| `networksetup -setairportnetwork <device name> <network> [password]` | `<device name>`\u3092\u30d1\u30b9\u30ef\u30fc\u30c9=`password`\u3067SSID=`network`\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u63a5\u7d9a\u3059\u308b |\n\n\u7121\u7dda\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u691c\u7d22\uff08\u30b9\u30ad\u30e3\u30f3\uff09\u306f`networksetup`\u304b\u3089\u306f\u3067\u304d\u305a\u3001\u4ee3\u308f\u308a\u306b`airport`\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u4f55\u6545\u304b`airport`\u30b3\u30de\u30f3\u30c9\u306b\u306f\u30d1\u30b9\u304c\u901a\u3063\u3066\u304a\u3089\u305a\u3001\n`/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport`\u3068\u3044\u3046\u9577\u3044\u9577\u3044\u30d5\u30eb\u30d1\u30b9\u3067\u547c\u3073\u3060\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f`--scan=<network-SSID>`\u3068\u3057\u3066\u691c\u7d22\u5bfe\u8c61\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u6307\u5b9a\u3057\u307e\u3057\u305f\u304c\u3001\u5358\u306b`--scan`\u3068\u3059\u308c\u3070\u5468\u56f2\u306e\u5168\u3066\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u691c\u7d22\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\u63a5\u7d9a\u3057\u305f\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u7121\u3057\u3067\u5b9f\u884c\u3059\u308b\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n", "tags": ["Mac", "OSX", "Bash", "Network", "ShellScript"]}