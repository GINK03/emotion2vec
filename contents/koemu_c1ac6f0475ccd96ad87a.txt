{"context": "Guzzle\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u30921\u79d2\u672a\u6e80\u306b\u8a2d\u5b9a\u3057\u305f\u3044\u6642\u306b\u5fc5\u8981\u3068\u306a\u308b\u8a18\u8ff0\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\nGuzzle 6\u7cfb\nPHP 5.6\u7cfb\n\n\n\u89e3\u6c7a\u65b9\u6cd5\ncurl\u306e\u30aa\u30d7\u30b7\u30e7\u30f3 CURLOPT_NOSIGNAL \u3092 true \u306b\u3057\u307e\u3059\u3002\nuse GuzzleHttp\\Client;\n\n$request_params = ['hoge' => 'foo'];\n$guzzle_client = new Client(['base_uri' => 'http://example.com/']);\n$http_response = $guzzle_client->request(\n    'POST',\n    '/api',\n    [\n        'timeout' => 0.1,  // 100msec\n        'curl'    => [CURLOPT_NOSIGNAL => true],   // \u3053\u308c\u304c\u8981\uff01\n        'json'    => $request_params\n    ]\n);\nvar_dump($http_response->getBody());\n\n\n\u80cc\u666f\u8aac\u660e\n\u5185\u90e8\u7684\u306b\u306f\u3001Guzzle\u2192PHP\u2192libcurl\u3068\u3044\u3046\u6d41\u308c\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\u3002libcurl\u306f(\u5c11\u306a\u304f\u3068\u3082)Linux\u74b0\u5883\u306b\u304a\u3044\u3066\u3001\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u304c\u63d0\u4f9b\u3059\u308b\u6a19\u6e96\u306e\u3082\u306e\u3092\u5229\u7528\u3059\u308b\u3068\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306f\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308b\u30b7\u30b0\u30ca\u30eb SIGALRM \u3092\u4f7f\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001 SIGALRM \u306f\u79d2\u5358\u4f4d\u3067\u3057\u304b\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u3001\u4eca\u56de\u306e\u554f\u984c\u306e\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\u3067\u3059\u306e\u3067\u30011\u79d2\u672a\u6e80\u306b\u306a\u308b\u3068\u5207\u308a\u6368\u3066\u3089\u308c\u3066\u307e\u3068\u3082\u306b\u52d5\u304d\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067\u3001libcurl\u306b\u3066\u30b7\u30b0\u30ca\u30eb\u3092\u4f7f\u308f\u306a\u3044\u3088\u3046\u8a2d\u5b9a\u3092\u3057\u305f\u4e0a\u3067\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u30b7\u30b0\u30ca\u30eb\u306b\u983c\u3089\u305a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u89b3\u6e2c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u3001\u554f\u984c\u304c\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001Guzzle\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\u306f CURLOPT_TIMEOUT \u3067\u306f\u306a\u304f CURLOPT_TIMEOUT_MS \u3092\u4f7f\u3063\u3066\u3044\u3066\u3001Guzzle\u3068\u3057\u3066\u306f1\u79d2\u672a\u6e80\u306e\u5024\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u3002\u3053\u3053\u3001\u79c1\u304c\u52d8\u9055\u3044\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u3067\u3057\u305f\u3002\n\n\u8b1d\u8f9e\n@do-aki@github \u3055\u3093\u306b\u52a9\u8a00\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3069\u3046\u3082\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n\n\n\u53c2\u8003\u6587\u732e\n\nphp.net - curl_setopt\ncurl - CURLOPT_TIMEOUT_MS\ncurl - CURLOPT_NOSIGNAL\nLinux man - SIGNAL\nLinux man - ALARM\nGuzzle6 FAQ: How can I add custom cURL options?\n\nGuzzle\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u30921\u79d2\u672a\u6e80\u306b\u8a2d\u5b9a\u3057\u305f\u3044\u6642\u306b\u5fc5\u8981\u3068\u306a\u308b\u8a18\u8ff0\u3092\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n## \u524d\u63d0\u6761\u4ef6\n\n- Guzzle 6\u7cfb\n- PHP 5.6\u7cfb\n\n## \u89e3\u6c7a\u65b9\u6cd5\n\ncurl\u306e\u30aa\u30d7\u30b7\u30e7\u30f3 `CURLOPT_NOSIGNAL` \u3092 `true` \u306b\u3057\u307e\u3059\u3002\n\n```php\nuse GuzzleHttp\\Client;\n\n$request_params = ['hoge' => 'foo'];\n$guzzle_client = new Client(['base_uri' => 'http://example.com/']);\n$http_response = $guzzle_client->request(\n    'POST',\n    '/api',\n    [\n        'timeout' => 0.1,  // 100msec\n        'curl'    => [CURLOPT_NOSIGNAL => true],   // \u3053\u308c\u304c\u8981\uff01\n        'json'    => $request_params\n    ]\n);\nvar_dump($http_response->getBody());\n```\n\n## \u80cc\u666f\u8aac\u660e\n\n\u5185\u90e8\u7684\u306b\u306f\u3001Guzzle\u2192PHP\u2192libcurl\u3068\u3044\u3046\u6d41\u308c\u3067\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\u3002libcurl\u306f(\u5c11\u306a\u304f\u3068\u3082)Linux\u74b0\u5883\u306b\u304a\u3044\u3066\u3001\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u304c\u63d0\u4f9b\u3059\u308b\u6a19\u6e96\u306e\u3082\u306e\u3092\u5229\u7528\u3059\u308b\u3068\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306f\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308b\u30b7\u30b0\u30ca\u30eb `SIGALRM` \u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u3057\u304b\u3057\u3001 `SIGALRM` \u306f\u79d2\u5358\u4f4d\u3067\u3057\u304b\u8a2d\u5b9a\u3067\u304d\u306a\u3044\u3053\u3068\u304c\u3001\u4eca\u56de\u306e\u554f\u984c\u306e\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\u3067\u3059\u306e\u3067\u30011\u79d2\u672a\u6e80\u306b\u306a\u308b\u3068\u5207\u308a\u6368\u3066\u3089\u308c\u3066\u307e\u3068\u3082\u306b\u52d5\u304d\u307e\u305b\u3093\u3002\n\n\u305d\u3053\u3067\u3001libcurl\u306b\u3066\u30b7\u30b0\u30ca\u30eb\u3092\u4f7f\u308f\u306a\u3044\u3088\u3046\u8a2d\u5b9a\u3092\u3057\u305f\u4e0a\u3067\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u30b7\u30b0\u30ca\u30eb\u306b\u983c\u3089\u305a\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3092\u89b3\u6e2c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u3001\u554f\u984c\u304c\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\n\u306a\u304a\u3001Guzzle\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\u306f `CURLOPT_TIMEOUT` \u3067\u306f\u306a\u304f `CURLOPT_TIMEOUT_MS` \u3092\u4f7f\u3063\u3066\u3044\u3066\u3001Guzzle\u3068\u3057\u3066\u306f1\u79d2\u672a\u6e80\u306e\u5024\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u3059\u3002\u3053\u3053\u3001\u79c1\u304c\u52d8\u9055\u3044\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u3067\u3057\u305f\u3002\n\n## \u8b1d\u8f9e\n\n@do-aki@github \u3055\u3093\u306b\u52a9\u8a00\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3069\u3046\u3082\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n\n<blockquote class=\"twitter-tweet\" data-lang=\"en\"><p lang=\"ja\" dir=\"ltr\"><a href=\"https://twitter.com/koemu\">@koemu</a> guzzle \u3063\u3066\u3001 CURLOPT_CONNECTTIMEOUT_MS \u5229\u7528\u3057\u3066\u307e\u305b\u3093\uff1f</p>&mdash; \u3069\u3045\u30fc\u3042\u304d (@do_aki) <a href=\"https://twitter.com/do_aki/status/829609990205771777\">February 9, 2017</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n## \u53c2\u8003\u6587\u732e\n\n- [php.net - curl_setopt](http://php.net/curl_setopt)\n- [curl - CURLOPT_TIMEOUT_MS](https://curl.haxx.se/libcurl/c/CURLOPT_TIMEOUT_MS.html)\n- [curl - CURLOPT_NOSIGNAL](https://curl.haxx.se/libcurl/c/CURLOPT_NOSIGNAL.html)\n- [Linux man - SIGNAL](http://linuxjm.osdn.jp/html/LDP_man-pages/man7/signal.7.html)\n- [Linux man - ALARM](http://linuxjm.osdn.jp/html/LDP_man-pages/man2/alarm.2.html)\n- [Guzzle6 FAQ: How can I add custom cURL options?](http://docs.guzzlephp.org/en/latest/faq.html?highlight=curlopt#how-can-i-add-custom-curl-options)\n", "tags": ["Guzzle", "PHP", "Linux"]}