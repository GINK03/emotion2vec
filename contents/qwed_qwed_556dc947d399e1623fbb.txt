{"tags": ["JavaScript", "jQuery", "moment.js", "Backbone.js"], "context": " More than 1 year has passed since last update.\u30ea\u30c3\u30c1\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u7121\u3044\u3068\u304d\u6642\u7528\u306b\u3064\u304f\u3063\u305f\u30ab\u30ec\u30f3\u30c0\u30fc\n\n\u30b4\u30fc\u30eb\n\n\n\u30bd\u30fc\u30b9\n\nHTML\nBackbone\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\n\u8868\u793a\u7528\u306eDIV\u30bf\u30b0\u3092\u8a2d\u5b9a\n\nindex.html\n<!DOCTYPE HTML>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>\u30b7\u30f3\u30d7\u30eb\u306a\u30ab\u30ec\u30f3\u30c0\u30fc</title>\n    <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/css/bootstrap.css\" />\n    <style type=\"text/css\">.cal {width: 300px;margin: 20px auto;}</style>\n  </head>\n  <body>\n    <div id=\"cal\" class=\"cal\"></div>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.js\"></script>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js\"></script>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.3/backbone-min.js\"></script>\n    <script type=\"text/javascript\" src=\"/cal.js\"></script>\n    <script type=\"text/javascript\">\n    $(function () {\n      new CalendarView({el: '#cal'});\n    });\n    </script>\n  </body>\n</html>\n\n\n\njs\n1\u65e5\u306e\u66dc\u65e5 isWeek\n\u6700\u7d42\u65e5  totalDays\n\u65e5\u306b\u3061\u3092\u8868\u793a\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u884c\u6570 tableRowNum\n\u8868\u793a\u3059\u308b\u65e5\u3092\u6e96\u5099\nvar tablecont = [];\n_(7*tableRowNum).times(function(i){\n    tablecont[i] = \"\u3000\";\n});\n_(totalDays).times(function(i){\n    tablecont[i + isWeek] = i + 1;\n});\n\n\n\u5168\u6587\nvar CalendarView = null;\n\n(function(){\n\n  CalendarView = Backbone.View.extend({\n\n    weekLbl: [\"\u65e5\",\"\u6708\",\"\u706b\",\"\u6c34\",\"\u6728\",\"\u91d1\",\"\u571f\"],\n\n    initialize: function (config) {\n      this.c = config.current || moment();\n      this.render();\n    },\n\n    render: function () {\n      var self = this;\n      var isWeek = this.c.startOf('months').days();\n      var totalDays = this.c.endOf('month').date();\n      var tableRowNum = Math.ceil((isWeek + totalDays) / 7);\n      var tablecont = [];\n      _(7*tableRowNum).times(function(i){\n        tablecont[i] = \"\u3000\";\n      });\n      _(totalDays).times(function(i){\n        tablecont[i + isWeek] = i + 1;\n      });\n      this.table = $('<table class=\"table\">');\n      this.table.append($(\"<tr><td colspan='7' bgcolor='#EFEFEF' style='text-align:center'>\"+this.c.format('YYYY\u5e74MM\u6708')+\"</td></tr>\"));\n      this.$el.append(this.table);\n\n      var tr = $(\"<tr></tr>\");\n      _(7).times(function(i){\n        var td = $(\"<td class='weektd' data-week='\"+i+\"'></td>\").css({\n          \"font-size\": \"small\",\n          \"padding\": \"5px 0px\",\n          \"text-align\": \"center\",\n          \"user-select\": \"none\",\n          \"cursor\": \"pointer\"\n        });\n        td.text(self.weekLbl[i]);\n        tr.append(td);\n      });\n      this.table.append(tr);\n\n      _(tableRowNum).times(function(i){\n        var trw = $(\"<tr></tr>\");\n        _(7).times(function(j){\n          var td = $(\"<td style='padding:5px;'></td>\");\n          var dayview = new CalenderDayView({\n            el: td,\n            day: tablecont[j + i * 7],\n            week: j,\n            status: 1,\n            disp: tablecont[j + i * 7] && tablecont[j + i * 7] != \"\u3000\"\n          });\n          trw.append(dayview.el);\n        });\n        self.table.append(trw);\n      });\n    }\n  });\n\n  var CalenderDayView = Backbone.View.extend({\n    initialize: function (config) {\n      this.config = config;\n      this.day = config.day;\n      this.render();\n    },\n    render: function () {\n      this.$el.css({\n        \"padding\": \"10px 0px\",\n        \"text-align\": \"center\",\n        \"height\": \"48px\",\n        \"user-select\": \"none\",\n        \"cursor\": \"pointer\"\n      });\n      this.$el.html(this.day);\n    }\n  });\n})();\n\n\n\u6708\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\nnew CalendarView({\n  el: '#cal',\n  current: moment(\"2016-04\", \"YYYY-MM\") \n});\n\n\n\u30ea\u30c3\u30c1\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5fc5\u8981\u7121\u3044\u3068\u304d\u6642\u7528\u306b\u3064\u304f\u3063\u305f\u30ab\u30ec\u30f3\u30c0\u30fc\n\n#\u30b4\u30fc\u30eb\n![cal.png](https://qiita-image-store.s3.amazonaws.com/0/7370/0b6e62c0-b84d-3503-dd6f-fad63a83f184.png)\n\n#\u30bd\u30fc\u30b9\n\n##HTML\nBackbone\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\n\u8868\u793a\u7528\u306eDIV\u30bf\u30b0\u3092\u8a2d\u5b9a\n\n```index.html\n<!DOCTYPE HTML>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>\u30b7\u30f3\u30d7\u30eb\u306a\u30ab\u30ec\u30f3\u30c0\u30fc</title>\n    <link rel=\"stylesheet\" href=\"//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha/css/bootstrap.css\" />\n    <style type=\"text/css\">.cal {width: 300px;margin: 20px auto;}</style>\n  </head>\n  <body>\n    <div id=\"cal\" class=\"cal\"></div>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.js\"></script>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js\"></script>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.11.2/moment.min.js\"></script>\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.2.3/backbone-min.js\"></script>\n    <script type=\"text/javascript\" src=\"/cal.js\"></script>\n    <script type=\"text/javascript\">\n    $(function () {\n      new CalendarView({el: '#cal'});\n    });\n    </script>\n  </body>\n</html>\n```\n\n##js\n1\u65e5\u306e\u66dc\u65e5 `isWeek`\n\u6700\u7d42\u65e5  `totalDays `\n\u65e5\u306b\u3061\u3092\u8868\u793a\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a\u884c\u6570 `tableRowNum `\n\n\u8868\u793a\u3059\u308b\u65e5\u3092\u6e96\u5099\n\n```\nvar tablecont = [];\n_(7*tableRowNum).times(function(i){\n\ttablecont[i] = \"\u3000\";\n});\n_(totalDays).times(function(i){\n\ttablecont[i + isWeek] = i + 1;\n});\n```\n\n#\u5168\u6587\n\n```\nvar CalendarView = null;\n\n(function(){\n\n  CalendarView = Backbone.View.extend({\n\n    weekLbl: [\"\u65e5\",\"\u6708\",\"\u706b\",\"\u6c34\",\"\u6728\",\"\u91d1\",\"\u571f\"],\n\n    initialize: function (config) {\n      this.c = config.current || moment();\n      this.render();\n    },\n\n    render: function () {\n      var self = this;\n      var isWeek = this.c.startOf('months').days();\n      var totalDays = this.c.endOf('month').date();\n      var tableRowNum = Math.ceil((isWeek + totalDays) / 7);\n      var tablecont = [];\n      _(7*tableRowNum).times(function(i){\n        tablecont[i] = \"\u3000\";\n      });\n      _(totalDays).times(function(i){\n        tablecont[i + isWeek] = i + 1;\n      });\n      this.table = $('<table class=\"table\">');\n      this.table.append($(\"<tr><td colspan='7' bgcolor='#EFEFEF' style='text-align:center'>\"+this.c.format('YYYY\u5e74MM\u6708')+\"</td></tr>\"));\n      this.$el.append(this.table);\n\n      var tr = $(\"<tr></tr>\");\n      _(7).times(function(i){\n        var td = $(\"<td class='weektd' data-week='\"+i+\"'></td>\").css({\n          \"font-size\": \"small\",\n          \"padding\": \"5px 0px\",\n          \"text-align\": \"center\",\n          \"user-select\": \"none\",\n          \"cursor\": \"pointer\"\n        });\n        td.text(self.weekLbl[i]);\n        tr.append(td);\n      });\n      this.table.append(tr);\n\n      _(tableRowNum).times(function(i){\n        var trw = $(\"<tr></tr>\");\n        _(7).times(function(j){\n          var td = $(\"<td style='padding:5px;'></td>\");\n          var dayview = new CalenderDayView({\n            el: td,\n            day: tablecont[j + i * 7],\n            week: j,\n            status: 1,\n            disp: tablecont[j + i * 7] && tablecont[j + i * 7] != \"\u3000\"\n          });\n          trw.append(dayview.el);\n        });\n        self.table.append(trw);\n      });\n    }\n  });\n\n  var CalenderDayView = Backbone.View.extend({\n    initialize: function (config) {\n      this.config = config;\n      this.day = config.day;\n      this.render();\n    },\n    render: function () {\n      this.$el.css({\n        \"padding\": \"10px 0px\",\n        \"text-align\": \"center\",\n        \"height\": \"48px\",\n        \"user-select\": \"none\",\n        \"cursor\": \"pointer\"\n      });\n      this.$el.html(this.day);\n    }\n  });\n})();\n```\n\n#\u6708\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\n```\nnew CalendarView({\n  el: '#cal',\n  current: moment(\"2016-04\", \"YYYY-MM\") \n});\n```\n\n"}