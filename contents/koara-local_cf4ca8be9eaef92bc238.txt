{"context": "\n\n\u6982\u8981\nsubprocess\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u7d50\u69cb\u591a\u3044\u306e\u3067\u3001\u308f\u304b\u3089\u306a\u304f\u3066\u8abf\u3079\u305f\u70b9\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n\u8abf\u67fb\u6642\u306e\u81ea\u5206\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u3057\u3066Python 2.7\u74b0\u5883\u304c\u524d\u63d0\u3060\u3063\u305f\u305f\u3081\u3001\u672c\u8a18\u4e8b\u306fPython 2.7\u5411\u3051\u306b\u306a\u308a\u307e\u3059\u3002\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n17.1. subprocess \u2014 \u30b5\u30d6\u30d7\u30ed\u30bb\u30b9\u7ba1\u7406 \u2014 Python 2.7.x \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\u7279\u306bPython3.5\u4ee5\u4e0a\u306e\u5834\u5408\u306f\u6c4e\u7528\u306erun()\u30b3\u30de\u30f3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u305f\u308a\u3068\u4f7f\u7528\u65b9\u6cd5\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\n\u305d\u306e\u307e\u307e\u8ee2\u7528\u305b\u305a\u516c\u5f0f\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n17.5. subprocess \u2014 \u30b5\u30d6\u30d7\u30ed\u30bb\u30b9\u7ba1\u7406 \u2014 Python 3.5.2 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n\u30a4\u30f3\u30dd\u30fc\u30c8\u6307\u5b9a\n\nimport\nimport subprocess\n\n\n\n\u57fa\u672c\u7684\u306aAPI\n\nsubprocess.call\n\u30fb\u5b9f\u884c\u6642\u306e\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u306f\u5b9f\u884c\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51fa\u529b\u3055\u308c\u308b\n\u30fb\u6b63\u5e38\u6642\u3082\u7570\u5e38\u6642\u3082\u30ea\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\n\n\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nprint '!!! start'\n\ncmd = 'echo aaa'\nretcode = subprocess.call(cmd.split())\nprint retcode\n\ncmd = 'false'\nretcode = subprocess.call(cmd.split())\nprint retcode\n\nprint '!!! end'\n\n\n\n\u51fa\u529b\naaa\n!!! start\n0\n1\n!!! end\n\n\n\nsubprocess.check_call\n\u30fb\u5b9f\u884c\u6642\u306e\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u306f\u5b9f\u884c\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51fa\u529b\u3055\u308c\u308b\n\u30fb\u6b63\u5e38\u6642\u306b\u306f\u30ea\u30bf\u30fc\u30f3\u30b3\u30fc\u30c90\u3092\u8fd4\u3059\n\u30fb\u7570\u5e38\u6642\u306b\u306f subprocess.CalledProcessError \u4f8b\u5916\u3092\u9001\u51fa\u3059\u308b\n\n\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nprint '!!! start'\n\ncmd = 'echo aaa'\nretcode = subprocess.check_call(cmd.split())\nprint retcode\n\ncmd = 'false'\ntry:\n    retcode = subprocess.check_call(cmd.split())\nexcept subprocess.CalledProcessError as e:\n    print e.returncode\n    print e.cmd\n    print e.output\n\nprint '!!! end'\n\n\n\n\u51fa\u529b\naaa\n!!! start\n0\n1\n['false']\nNone\n!!! end\n\n\n\nsubprocess.check_output\n\u30fb\u5b9f\u884c\u6642\u306e\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u306f\u5b9f\u884c\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51fa\u529b\u3055\u308c\u308b\n\u30fb\u6b63\u5e38\u6642\u306b\u306f\u6a19\u6e96\u51fa\u529b\u3092\u8fd4\u3059\n\u30fb\u7570\u5e38\u6642\u306b\u306f subprocess.CalledProcessError \u4f8b\u5916\u3092\u9001\u51fa\u3059\u308b\n\n\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nprint '!!! start'\n\ncmd = 'echo aaa'\nd = subprocess.check_output(cmd.split())\nprint d,\n\ncmd = 'unexist_command'\ntry:\n    d = subprocess.check_output(\n            cmd.split(),\n            stderr=subprocess.STDOUT,\n            shell=True)\n    print d,\nexcept subprocess.CalledProcessError as e:\n    print e.returncode\n    print e.cmd\n    print e.output,\n\nprint '!!! end'\n\n\n\n\u51fa\u529b\n!!! start\naaa\n127\n['unexist_command']\n/bin/sh: unexist_command: command not found\n!!! end\n\n\n\nsubprocess.check_output \u4f7f\u7528\u6642\u306b\u6a19\u6e96\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\u3059\u308b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001stderr=subprocess.STDOUT \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\u4f7f\u7528\u4f8b\n    d = subprocess.check_output(\n            cmd.split(),\n            stderr=subprocess.STDOUT,\n            shell=True)\n\n\n\nsubprocess\u306e\u5b9f\u884c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5909\u66f4\u3059\u308b\n\ncwd \u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u4f7f\u7528\n\n\u5b9f\u884c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6307\u5b9a\nsubprocess.call(cmd, cwd=workdir)\n\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3059\u3002\n\n\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nd1 = subprocess.check_output(['pwd'])                   # \u521d\u671f\u4f4d\u7f6e /tmp\nd2 = subprocess.check_output(['pwd'], cwd='/tmp/hoge')  # \u7d76\u5bfe\u30d1\u30b9\u3067\u306e\u78ba\u8a8d\nd3 = subprocess.check_output(['pwd'])                   # \u4ed6\u306e\u79fb\u52d5\u306e\u5f71\u97ff\u306f\u53d7\u3051\u306a\u3044\nd4 = subprocess.check_output(['pwd'], cwd='./hoge')     # \u76f8\u5bfe\u30d1\u30b9\u3067\u306e\u78ba\u8a8d\n\nprint 'case 1:'\nprint d1,\nprint d2,\n\nprint 'case 2:'\nprint d3,\nprint d4,\n\n\n\n\u5b9f\u884c\u4f8b\ncase 1:\n/tmp\n/tmp/hoge\ncase 2:\n/tmp\n/tmp/hoge\n\n\npython subprocess changing directory - Stack Overflow\n\n\u6ce8\u610f\u70b9\n\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3092\u5916\u90e8\u304b\u3089\u53d6\u308a\u8fbc\u3080\u5834\u5408\u3001\u7279\u306b shell=True \u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30b3\u30de\u30f3\u30c9\u6ce8\u5165\u653b\u6483\u3092\u3055\u308c\u308b\u5834\u5408\u304c\u60f3\u5b9a\u3055\u308c\u308b\u305f\u3081\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u306f\u5341\u5206\u6ce8\u610f\u3059\u308b\u3053\u3068\n\n\u88dc\u8db3\uff1a\u30b3\u30de\u30f3\u30c9\u6ce8\u5165\u653b\u6483 / Shell Injection\nIPA ISEC\u3000\u30bb\u30ad\u30e5\u30a2\u30fb\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8b1b\u5ea7\uff1aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7de8\u3000\u7b2c6\u7ae0 \u5165\u529b\u5bfe\u7b56\uff1a\u30b3\u30de\u30f3\u30c9\u6ce8\u5165\u653b\u6483\u5bfe\u7b56\nCode injection - Wikipedia\n\n\u4e0d\u660e\u306a\u52d5\u4f5c\n\u30fbcheck_output\u3067shell=True\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306b\u3001\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u304c\u53d6\u5f97\u3067\u304d\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u3002(\u7a7a\u6587\u5b57\u5217\u304c\u8fd4\u308b)\n\n\u53c2\u8003\nPython \u306e subprocess \u3067\u51fa\u529b\u3092\u53d7\u3051\u53d6\u308b\u3068\u304d\u306f communicate() \u3092\u4f7f\u304a\u3046 - Qiita\npython\u3067\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3059\u308b\u306b\u306f - \u305d\u308c\u30de\u30b0\u3067\uff01\n# \u6982\u8981\nsubprocess\u3092\u4f7f\u3046\u6a5f\u4f1a\u304c\u7d50\u69cb\u591a\u3044\u306e\u3067\u3001\u308f\u304b\u3089\u306a\u304f\u3066\u8abf\u3079\u305f\u70b9\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n\u8abf\u67fb\u6642\u306e\u81ea\u5206\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u3057\u3066`Python 2.7`\u74b0\u5883\u304c\u524d\u63d0\u3060\u3063\u305f\u305f\u3081\u3001\u672c\u8a18\u4e8b\u306f`Python 2.7`\u5411\u3051\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u57fa\u672c\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n[17.1. subprocess \u2014 \u30b5\u30d6\u30d7\u30ed\u30bb\u30b9\u7ba1\u7406 \u2014 Python 2.7.x \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.python.jp/2.7/library/subprocess.html#module-subprocess)\n\n\u7279\u306bPython3.5\u4ee5\u4e0a\u306e\u5834\u5408\u306f\u6c4e\u7528\u306e`run()`\u30b3\u30de\u30f3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u305f\u308a\u3068\u4f7f\u7528\u65b9\u6cd5\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\n\u305d\u306e\u307e\u307e\u8ee2\u7528\u305b\u305a\u516c\u5f0f\u3092\u53c2\u7167\u3057\u3066\u4e0b\u3055\u3044\u3002\n[17.5. subprocess \u2014 \u30b5\u30d6\u30d7\u30ed\u30bb\u30b9\u7ba1\u7406 \u2014 Python 3.5.2 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.python.jp/3.5/library/subprocess.html#frequently-used-arguments)\n\n# \u30a4\u30f3\u30dd\u30fc\u30c8\u6307\u5b9a\n\n```py:import\nimport subprocess\n```\n\n# \u57fa\u672c\u7684\u306aAPI\n## subprocess.call\n\u30fb\u5b9f\u884c\u6642\u306e\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u306f\u5b9f\u884c\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51fa\u529b\u3055\u308c\u308b\n\u30fb\u6b63\u5e38\u6642\u3082\u7570\u5e38\u6642\u3082\u30ea\u30bf\u30fc\u30f3\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\n\n```py:\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nprint '!!! start'\n\ncmd = 'echo aaa'\nretcode = subprocess.call(cmd.split())\nprint retcode\n\ncmd = 'false'\nretcode = subprocess.call(cmd.split())\nprint retcode\n\nprint '!!! end'\n```\n```console:\u51fa\u529b\naaa\n!!! start\n0\n1\n!!! end\n```\n\n## subprocess.check_call\n\u30fb\u5b9f\u884c\u6642\u306e\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u306f\u5b9f\u884c\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51fa\u529b\u3055\u308c\u308b\n\u30fb\u6b63\u5e38\u6642\u306b\u306f\u30ea\u30bf\u30fc\u30f3\u30b3\u30fc\u30c90\u3092\u8fd4\u3059\n\u30fb\u7570\u5e38\u6642\u306b\u306f [`subprocess.CalledProcessError` \u4f8b\u5916](http://docs.python.jp/2.7/library/subprocess.html#subprocess.CalledProcessError)\u3092\u9001\u51fa\u3059\u308b\n\n```py:\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nprint '!!! start'\n\ncmd = 'echo aaa'\nretcode = subprocess.check_call(cmd.split())\nprint retcode\n\ncmd = 'false'\ntry:\n    retcode = subprocess.check_call(cmd.split())\nexcept subprocess.CalledProcessError as e:\n    print e.returncode\n    print e.cmd\n    print e.output\n\nprint '!!! end'\n```\n```console:\u51fa\u529b\naaa\n!!! start\n0\n1\n['false']\nNone\n!!! end\n```\n\n## subprocess.check_output\n\u30fb\u5b9f\u884c\u6642\u306e\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u306f\u5b9f\u884c\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51fa\u529b\u3055\u308c\u308b\n\u30fb\u6b63\u5e38\u6642\u306b\u306f\u6a19\u6e96\u51fa\u529b\u3092\u8fd4\u3059\n\u30fb\u7570\u5e38\u6642\u306b\u306f [`subprocess.CalledProcessError` \u4f8b\u5916](http://docs.python.jp/2.7/library/subprocess.html#subprocess.CalledProcessError)\u3092\u9001\u51fa\u3059\u308b\n\n```py:\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nprint '!!! start'\n\ncmd = 'echo aaa'\nd = subprocess.check_output(cmd.split())\nprint d,\n\ncmd = 'unexist_command'\ntry:\n    d = subprocess.check_output(\n            cmd.split(),\n            stderr=subprocess.STDOUT,\n            shell=True)\n    print d,\nexcept subprocess.CalledProcessError as e:\n    print e.returncode\n    print e.cmd\n    print e.output,\n\nprint '!!! end'\n```\n```console:\u51fa\u529b\n!!! start\naaa\n127\n['unexist_command']\n/bin/sh: unexist_command: command not found\n!!! end\n```\n\n# `subprocess.check_output` \u4f7f\u7528\u6642\u306b\u6a19\u6e96\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001`stderr=subprocess.STDOUT` \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n```py:\u4f7f\u7528\u4f8b\n    d = subprocess.check_output(\n            cmd.split(),\n            stderr=subprocess.STDOUT,\n            shell=True)\n```\n\n# subprocess\u306e\u5b9f\u884c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5909\u66f4\u3059\u308b\n\n## `cwd` \u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u4f7f\u7528\n\n```py:\u5b9f\u884c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6307\u5b9a\nsubprocess.call(cmd, cwd=workdir)\n```\n\n\u5b9f\u884c\u4f8b\u3092\u4ee5\u4e0b\u306b\u793a\u3059\u3002\n\n```py:\u5b9f\u884c\u30b5\u30f3\u30d7\u30eb\nimport subprocess\n\nd1 = subprocess.check_output(['pwd'])                   # \u521d\u671f\u4f4d\u7f6e /tmp\nd2 = subprocess.check_output(['pwd'], cwd='/tmp/hoge')  # \u7d76\u5bfe\u30d1\u30b9\u3067\u306e\u78ba\u8a8d\nd3 = subprocess.check_output(['pwd'])                   # \u4ed6\u306e\u79fb\u52d5\u306e\u5f71\u97ff\u306f\u53d7\u3051\u306a\u3044\nd4 = subprocess.check_output(['pwd'], cwd='./hoge')     # \u76f8\u5bfe\u30d1\u30b9\u3067\u306e\u78ba\u8a8d\n\nprint 'case 1:'\nprint d1,\nprint d2,\n\nprint 'case 2:'\nprint d3,\nprint d4,\n```\n\n```console:\u5b9f\u884c\u4f8b\ncase 1:\n/tmp\n/tmp/hoge\ncase 2:\n/tmp\n/tmp/hoge\n```\n\n[python subprocess changing directory - Stack Overflow](http://stackoverflow.com/questions/21406887/python-subprocess-changing-directory)\n\n# \u6ce8\u610f\u70b9\n\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3092\u5916\u90e8\u304b\u3089\u53d6\u308a\u8fbc\u3080\u5834\u5408\u3001\u7279\u306b `shell=True` \u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30b3\u30de\u30f3\u30c9\u6ce8\u5165\u653b\u6483\u3092\u3055\u308c\u308b\u5834\u5408\u304c\u60f3\u5b9a\u3055\u308c\u308b\u305f\u3081\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u306f\u5341\u5206\u6ce8\u610f\u3059\u308b\u3053\u3068\n\n## \u88dc\u8db3\uff1a\u30b3\u30de\u30f3\u30c9\u6ce8\u5165\u653b\u6483 / Shell Injection\n[IPA ISEC\u3000\u30bb\u30ad\u30e5\u30a2\u30fb\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8b1b\u5ea7\uff1aWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7de8\u3000\u7b2c6\u7ae0 \u5165\u529b\u5bfe\u7b56\uff1a\u30b3\u30de\u30f3\u30c9\u6ce8\u5165\u653b\u6483\u5bfe\u7b56](https://www.ipa.go.jp/security/awareness/vendor/programmingv2/contents/501.html)\n[Code injection - Wikipedia](https://en.wikipedia.org/wiki/Code_injection#Shell_injection)\n\n# \u4e0d\u660e\u306a\u52d5\u4f5c\n\u30fb`check_output`\u3067`shell=True`\u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306b\u3001\u6a19\u6e96\u51fa\u529b/\u6a19\u6e96\u30a8\u30e9\u30fc\u304c\u53d6\u5f97\u3067\u304d\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u3002(\u7a7a\u6587\u5b57\u5217\u304c\u8fd4\u308b)\n\n# \u53c2\u8003\n[Python \u306e subprocess \u3067\u51fa\u529b\u3092\u53d7\u3051\u53d6\u308b\u3068\u304d\u306f communicate() \u3092\u4f7f\u304a\u3046 - Qiita](http://qiita.com/mokemokechicken/items/a84b0aa96b94d1931f08)\n[python\u3067\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3059\u308b\u306b\u306f - \u305d\u308c\u30de\u30b0\u3067\uff01](http://takuya-1st.hatenablog.jp/entry/2014/08/23/022031)\n", "tags": ["Python", "python2.7", "shell"]}