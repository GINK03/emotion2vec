{"context": " More than 1 year has passed since last update.\u3053\u306e\u6295\u7a3f\u306f \u30af\u30ed\u30fc\u30e9\u30fc\uff0f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0 Advent Calendar 2014\u306e12\u670824\u65e5\u7528\u3067\u3059\u3002\n\n\u306f\u3058\u3081\u306b\nWeb\u30b5\u30a4\u30c8\u3092\u95b2\u89a7\u3057\u3066\u3044\u308b\u3068\u3001\u4efb\u610f\u306e\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\uff08zip\u3001pdf\uff09\u306a\u3069\u3092\u307e\u3068\u3081\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u624b\u4f5c\u696d\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u5834\u5408\u306fPython\u3084Ruby\u306a\u3069\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3092\u4f7f\u7528\u3059\u308b\u3068\u7c21\u5358\u306b\u51e6\u7406\u304c\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306fPython\u3092\u4f7f\u7528\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\n\u672c\u5f53\u306f\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u307f\u3067\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306f\u4e0b\u8a18\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\nrequests\nBeautifulSoup\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npip install requests\npip install BeautifulSoup\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\u51e6\u7406\u5185\u5bb9\u3068\u3057\u3066\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\nURL\u304b\u3089\u30ea\u30f3\u30af\u3092\u62bd\u51fa\n\u30ea\u30f3\u30af\u304b\u3089\u8a72\u5f53\u3059\u308b\u62e1\u5f35\u5b50\u306eURL\u3068\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u62bd\u51fa\n\u30d5\u30a1\u30a4\u30eb\u3092\u5c11\u3057\u3065\u3064\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport requests\nimport time\n\nfrom BeautifulSoup import BeautifulSoup\n\nBASE_URL = u\"http://seanlahman.com/\"\nEXTENSION = u\"csv.zip\"\n\nurls = [\n    u\"http://seanlahman.com/baseball-archive/statistics/\",\n]\n\nfor url in urls:\n\n    download_urls = []\n    r = requests.get(url)\n    soup = BeautifulSoup(r.content)\n    links = soup.findAll('a')\n\n    # URL\u306e\u62bd\u51fa\n    for link in links:\n\n        href = link.get('href')\n\n        if href and EXTENSION in href:\n            download_urls.append(href)\n\n    # \u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff08\u3072\u3068\u307e\u305a3\u4ef6\u306b\u5236\u9650\uff09\n    for download_url in download_urls[:3]:\n\n        # \u4e00\u79d2\u30b9\u30ea\u30fc\u30d7\n        time.sleep(1)\n\n        file_name = download_url.split(\"/\")[-1]\n\n        if BASE_URL in download_url:\n            r = requests.get(download_url)\n        else:\n            r = requests.get(BASE_URL + download_url)\n\n        # \u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\n        if r.status_code == 200:\n            f = open(file_name, 'w')\n            f.write(r.content)\n            f.close()\n\n\n\u7d42\u308f\u308a\u306b\n\u30a8\u30e9\u30fc\u51e6\u7406\u3084\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9URL\u306e\u8abf\u6574\u306a\u3069\u6539\u5584\u3059\u308b\u70b9\u306f\u591a\u3005\u3042\u308a\u307e\u3059\u304c\u3001\n\u3072\u3068\u307e\u305a\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\uff08zip, pdf\u306a\u3069\uff09\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nPython\u306a\u3069\u4f7f\u7528\u3059\u308b\u3068\u3001\u3068\u3066\u3082\u7c21\u5358\u306b\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3001\n\u30b5\u30a4\u30c8\u306b\u5408\u308f\u305b\u3066\u6539\u5584\u3057\u306a\u304c\u3089\u3001\u624b\u6301\u3061\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5897\u3084\u3057\u3066\u3044\u304f\u306e\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u53c2\u8003\u30ea\u30f3\u30af\nSean Lahman Database\u306b\u3064\u3044\u3066\n\nhttp://www.slideshare.net/shinyorke/python-39061157\n\n\n\u3053\u306e\u6295\u7a3f\u306f [\u30af\u30ed\u30fc\u30e9\u30fc\uff0f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0 Advent Calendar 2014](http://qiita.com/advent-calendar/2014/crawler)\u306e12\u670824\u65e5\u7528\u3067\u3059\u3002\n\n## \u306f\u3058\u3081\u306b\n\nWeb\u30b5\u30a4\u30c8\u3092\u95b2\u89a7\u3057\u3066\u3044\u308b\u3068\u3001\u4efb\u610f\u306e\u5f62\u5f0f\u306e\u30d5\u30a1\u30a4\u30eb\uff08zip\u3001pdf\uff09\u306a\u3069\u3092\u307e\u3068\u3081\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u624b\u4f5c\u696d\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u5834\u5408\u306fPython\u3084Ruby\u306a\u3069\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3092\u4f7f\u7528\u3059\u308b\u3068\u7c21\u5358\u306b\u51e6\u7406\u304c\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4eca\u56de\u306fPython\u3092\u4f7f\u7528\u3057\u3066\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u30e9\u30a4\u30d6\u30e9\u30ea\n\n\u672c\u5f53\u306f\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u307f\u3067\u3082\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306f\u4e0b\u8a18\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\n* [requests](http://docs.python-requests.org/en/latest/)\n* [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)\n\n## \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell\npip install requests\npip install BeautifulSoup\n```\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n\u51e6\u7406\u5185\u5bb9\u3068\u3057\u3066\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\n* URL\u304b\u3089\u30ea\u30f3\u30af\u3092\u62bd\u51fa\n* \u30ea\u30f3\u30af\u304b\u3089\u8a72\u5f53\u3059\u308b\u62e1\u5f35\u5b50\u306eURL\u3068\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u62bd\u51fa\n* \u30d5\u30a1\u30a4\u30eb\u3092\u5c11\u3057\u3065\u3064\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```python\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport requests\nimport time\n\nfrom BeautifulSoup import BeautifulSoup\n\nBASE_URL = u\"http://seanlahman.com/\"\nEXTENSION = u\"csv.zip\"\n\nurls = [\n    u\"http://seanlahman.com/baseball-archive/statistics/\",\n]\n\nfor url in urls:\n\n    download_urls = []\n    r = requests.get(url)\n    soup = BeautifulSoup(r.content)\n    links = soup.findAll('a')\n\n    # URL\u306e\u62bd\u51fa\n    for link in links:\n\n        href = link.get('href')\n\n        if href and EXTENSION in href:\n            download_urls.append(href)\n\n    # \u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff08\u3072\u3068\u307e\u305a3\u4ef6\u306b\u5236\u9650\uff09\n    for download_url in download_urls[:3]:\n\t\t \n        # \u4e00\u79d2\u30b9\u30ea\u30fc\u30d7\n        time.sleep(1)\n\n        file_name = download_url.split(\"/\")[-1]\n\n        if BASE_URL in download_url:\n            r = requests.get(download_url)\n        else:\n            r = requests.get(BASE_URL + download_url)\n        \n        # \u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\n        if r.status_code == 200:\n            f = open(file_name, 'w')\n            f.write(r.content)\n            f.close()\n```\n\n## \u7d42\u308f\u308a\u306b\n\n\u30a8\u30e9\u30fc\u51e6\u7406\u3084\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9URL\u306e\u8abf\u6574\u306a\u3069\u6539\u5584\u3059\u308b\u70b9\u306f\u591a\u3005\u3042\u308a\u307e\u3059\u304c\u3001\n\u3072\u3068\u307e\u305a\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\uff08zip, pdf\u306a\u3069\uff09\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nPython\u306a\u3069\u4f7f\u7528\u3059\u308b\u3068\u3001\u3068\u3066\u3082\u7c21\u5358\u306b\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3001\n\u30b5\u30a4\u30c8\u306b\u5408\u308f\u305b\u3066\u6539\u5584\u3057\u306a\u304c\u3089\u3001\u624b\u6301\u3061\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5897\u3084\u3057\u3066\u3044\u304f\u306e\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n## \u53c2\u8003\u30ea\u30f3\u30af\n\nSean Lahman Database\u306b\u3064\u3044\u3066\n\n* http://www.slideshare.net/shinyorke/python-39061157\n\n\n", "tags": ["\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0", "Python"]}