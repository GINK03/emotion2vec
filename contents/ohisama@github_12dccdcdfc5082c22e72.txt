{"context": " More than 1 year has passed since last update.\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u306e\u3088\u3046\u306a\u3084\u3064\u3002\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\npackage main\nimport (\n    \"fmt\"\n    \"github.com/ohisama/serial\"\n    \"github.com/ohisama/key\"\n    \"time\"\n)\nfunc main() {\n    device := \"COM5\"\n    baud := 9600\n    fmt.Println(\"open\", device, \"at\", baud)\n    port, err := serial.Open(device, baud)\n    if err != nil {\n        fmt.Println(\"open failed:\", err)\n        return\n    }\n    defer port.Close()\n    fmt.Println(\"ready\")\n    buf := make([]byte, 100)\n    c := make([]byte, 1)\n    for {\n        time.Sleep(200 * time.Millisecond)\n        c[0] = key.Scan()\n        if c[0] > 0 {\n            n, err := port.Write(c)\n            if err != nil {\n                fmt.Println(\"serial write error:\", err)\n            }\n            n, err = port.Read(buf)\n            if err != nil {\n                fmt.Println(\"serial read error:\", err)\n                break\n            }\n            fmt.Printf(string(buf[:n]))\n        }\n    }\n}\n\n\n## \u30bf\u30fc\u30df\u30ca\u30eb\u306e\u3088\u3046\u306a\u3084\u3064\u3002\n![term.PNG](https://qiita-image-store.s3.amazonaws.com/0/18104/94bc199b-82be-f767-5b17-4251cad101ac.png)\n\n## \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```\npackage main\nimport (\n\t\"fmt\"\n\t\"github.com/ohisama/serial\"\n\t\"github.com/ohisama/key\"\n\t\"time\"\n)\nfunc main() {\n\tdevice := \"COM5\"\n\tbaud := 9600\n\tfmt.Println(\"open\", device, \"at\", baud)\n\tport, err := serial.Open(device, baud)\n\tif err != nil {\n\t\tfmt.Println(\"open failed:\", err)\n\t\treturn\n\t}\n\tdefer port.Close()\n\tfmt.Println(\"ready\")\n\tbuf := make([]byte, 100)\n\tc := make([]byte, 1)\n\tfor {\n\t\ttime.Sleep(200 * time.Millisecond)\n\t\tc[0] = key.Scan()\n\t\tif c[0] > 0 {\n\t\t\tn, err := port.Write(c)\n\t\t\tif err != nil {\n\t\t\t\tfmt.Println(\"serial write error:\", err)\n\t\t\t}\n\t\t\tn, err = port.Read(buf)\n\t\t\tif err != nil {\n\t\t\t\tfmt.Println(\"serial read error:\", err)\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tfmt.Printf(string(buf[:n]))\n\t\t}\n\t}\n}\n\n```\n", "tags": ["Go", "Windows", "RS232C", "smallbasic"]}