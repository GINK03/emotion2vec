{"context": " More than 1 year has passed since last update.Solr \u306f\u3001\u4ed8\u5c5e\u306e\u7ba1\u7406\u753b\u9762\u9762\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u69d8\u3005\u306a\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u57fa\u672c\u7684\u306a Unix \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u52b9\u7387\u7684\u306b\u76ee\u7684\u306e\u60c5\u5831\u3092\u53d6\u5f97\u30fb\u52a0\u5de5\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u30d6\u30e9\u30a6\u30b6\u304c\u5229\u7528\u51fa\u6765\u306a\u3044\u74b0\u5883\u306a\u3069\u3067\u6709\u52b9\u3067\u3059\u3002\n\n\u6e96\u5099\n\u4eca\u56de\u5229\u7528\u3059\u308b\u306e\u306f\u4ee5\u4e0b\u306e Unix \u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\necho\n\u5f15\u6570\u306b\u6e21\u3057\u305f\u6587\u5b57\u5217\u3092\u3001\u6a19\u6e96\u51fa\u529b\u306b\u51fa\u529b\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002\n\ntr\necho \u304b\u3089\u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u306e\u7a7a\u767d\u3092\u6539\u884c\u306b\u5909\u66f4\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002\n\ncurl\nSolr \u3068\u306e\u901a\u4fe1\u3092\u304a\u3053\u306a\u3046 HTTP Client \u3068\u3057\u3066\u5229\u7528\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u5e38\u306b -s \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u307f\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\njq\nSolr Web API \u304b\u3089\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u89e3\u6790\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002 -r \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u5024\u3092\u56f2\u3046 '\"' \u3092\u524a\u9664\u3059\u308b\u4f7f\u3044\u65b9\u3082\u5229\u7528\u3057\u307e\u3059\u3002\n\nawk\n\u6a19\u6e96\u5165\u529b\u304b\u3089\u6e21\u3055\u308c\u305f\u6539\u884c\u533a\u5207\u308a\u306e\u6570\u5b57\u30c7\u30fc\u30bf\u3092\u52a0\u7b97\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002\n\nxargs\n-I \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u3001\u6a19\u6e96\u5165\u529b\u304b\u3089\u6e21\u3055\u308c\u305f\u6539\u884c\u533a\u5207\u308a\u306e\u30c7\u30fc\u30bf\u3092\u3001\u305d\u308c\u305e\u308c xargs \u306e\u5f15\u6570\u30b3\u30de\u30f3\u30c9\u306b\u308f\u305f\u3057\u307e\u3059\u3002\n\n\u691c\u7d22\u7d50\u679c\u3092 JSON \u3067\u53d6\u5f97\u3059\u308b\n\u4e00\u756a\u5358\u7d14\u306a\u30d1\u30bf\u30f3\u3067\u3059\u3002 URL \u306e\u30d1\u30e9\u30e1\u30bf\u90e8\u306b wt=json \u3092\u4ed8\u3051\u3001\u3064\u306d\u306b JSON \u5f62\u5f0f\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&wt=json\"\n\n\u51fa\u529b\u7d50\u679c:\n{\"responseHeader\":{\"status\":0,\"QTime\":2,\"params\":{\"q\":\"*:*\",\"wt\":\"json\"}},\"response\":{\"numFound\":80884,\"start\":0,\"docs\":[{...\n\n\n\u691c\u7d22\u7d50\u679c\u3092\u6574\u5f62\u3057\u305f JSON \u3067\u53d6\u5f97\u3059\u308b\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092 jq \u306e\u6a19\u6e96\u5165\u529b\u306b\u6e21\u3059\u3060\u3051\u3067\u3001JSON \u3092\u6574\u5f62\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&wt=json\" | jq .\n\n\u51fa\u529b\u7d50\u679c:\n{\n  \"responseHeader\": {\n    \"status\": 0,\n    \"QTime\": 1,\n    \"params\": {\n      \"q\": \"*:*\",\n      \"wt\": \"json\"\n    }\n  },\n  \"response\": {\n    \"numFound\": 80884,\n    \"start\": 0,\n    \"docs\": [\n      {\n        ....\n\n\u540c\u69d8\u306e\u3053\u3068\u306f URL\u306e\u30d1\u30e9\u30e1\u30bf\u90e8\u306b indent=2 \u3092\u8ffd\u52a0\u3059\u308b\u4e8b\u306b\u3088\u3063\u3066\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u4eca\u5f8c\u306f\u307b\u3068\u3093\u3069\u306e\u5834\u5408  jq \u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3001 \u6574\u5f62\u76ee\u7684\u306e indent \u30d1\u30e9\u30e1\u30bf\u306f\u4eca\u56de\u306f\u5229\u7528\u3057\u307e\u305b\u3093\u3002\n\nurl field \u306e\u307f\u3092\u53d6\u5f97\u3059\u308b\nSolr Document \u306e Unique Key \u3068\u3057\u3066\u5229\u7528\u3057\u3066\u3044\u308b field \u3092 url \u3068\u3057\u307e\u3059\u3002 \nURL\u306e\u30d1\u30e9\u30e1\u30bf\u90e8\u306b fl=url \u3092\u4ed8\u3051\u52a0\u3048\u308b\u3053\u3068\u306b\u3088\u308a\u3001 Unique Key \u3060\u3051\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq .\n\n\u51fa\u529b\u7d50\u679c:\n{\n  \"responseHeader\": {\n    \"status\": 0,\n    \"QTime\": 2,\n    \"params\": {\n      \"wt\": \"json\",\n      \"fl\": \"url\",\n      \"q\": \"*:*\"\n    }\n  },\n  \"response\": {\n    \"numFound\": 910,\n    \"start\": 0,\n    \"docs\": [\n      {\n        \"url\": \"http://promo.mobile.yahoo.co.jp/yjapp/\"\n      },\n      {\n        \"url\": \"http://promotion.yahoo.co.jp/visadebit1602/\"\n      },\n      {\n        \"url\": \"http://travel.yahoo.co.jp/\"\n      },\n      {\n        \"url\": \"http://dir.yahoo.co.jp/\"\n      },\n      {\n        \"url\": \"http://id.yahoo.co.jp/\"\n      },\n      {\n        \"url\": \"http://kids.yahoo.co.jp/\"\n      },\n      {\n        \"url\": \"http://bbpromo.yahoo.co.jp/\"\n      },\n      {\n        \"url\": \"http://search.yahoo.co.jp/\"\n      },\n      {\n        \"url\": \"http://dic.yahoo.co.jp/\"\n      },\n      {\n        \"url\": \"http://map.yahoo.co.jp/\"\n      }\n    ]\n  }\n}\n\n\nurl \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\njq \u306e\u5f15\u6570\u3092\u8abf\u6574\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001url \u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 \njq \u306e\u5f15\u6570\u306f\u5965\u304c\u6df1\u3044\u306e\u3067\u3001\u8a73\u3057\u304f\u306f\u672c\u5bb6\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u3054\u53c2\u7167\u4e0b\u3055\u3044\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq .response.docs[].url\n\n\u51fa\u529b\u7d50\u679c:\n\"http://promo.mobile.yahoo.co.jp/yjapp/\"\n\"http://promotion.yahoo.co.jp/visadebit1602/\"\n\"http://travel.yahoo.co.jp/\"\n\"http://dir.yahoo.co.jp/\"\n\"http://id.yahoo.co.jp/\"\n\"http://kids.yahoo.co.jp/\"\n\"http://bbpromo.yahoo.co.jp/\"\n\"http://search.yahoo.co.jp/\"\n\"http://dic.yahoo.co.jp/\"\n\"http://map.yahoo.co.jp/\"\n\n\nurl \u3092\u56f2\u3046 '\"' \u3092\u9664\u304f\njq \u306b -r \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3053\u3068\u306b\u3088\u308a\u3001URL \u3092\u56f2\u3046 '\"' \u3092\u53d6\u308a\u9664\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq -r .response.docs[].url\n\n\u51fa\u529b\u7d50\u679c:\nhttp://promo.mobile.yahoo.co.jp/yjapp/\nhttp://promotion.yahoo.co.jp/visadebit1602/\nhttp://travel.yahoo.co.jp/\nhttp://dir.yahoo.co.jp/\nhttp://id.yahoo.co.jp/\nhttp://kids.yahoo.co.jp/\nhttp://bbpromo.yahoo.co.jp/\nhttp://search.yahoo.co.jp/\nhttp://dic.yahoo.co.jp/\nhttp://map.yahoo.co.jp/\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u3092\u53d6\u5f97\u3059\u308b\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq -r .response.numFound\n\n\u51fa\u529b\u7d50\u679c:\n910\n\n\nSolr Core \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\nSolr Web API \u306e cores API \u3092\u4f7f\u3046\u3053\u3068\u306b\u3088\u308a\u3001Solr \u306b\u914d\u7f6e\u3057\u3066\u3042\u308b\u5168\u3066\u306e Solr Core \u306e\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\"  | jq .\n\n\u51fa\u529b\u7d50\u679c:\n{\n  \"responseHeader\": {\n    \"status\": 0,\n    \"QTime\": 33\n  },\n  \"status\": {\n    \"sample_core1\": {\n      \"name\": \"sample_core1\",\n      \"instanceDir\": \"/path/to/sample_core1/\",\n      \"dataDir\": \"/path/to/sample_core1/data/\",\n      \"startTime\": \"2015-09-24T05:21:14.755Z\",\n      \"uptime\": 13328994006,\n      \"index\": {\n        \"numDocs\": 3000,\n        \"maxDoc\": 3000,\n        ...\n\n\nSolr Core \u306e\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53d6\u5f97\u3059\u308b\njq \u306e\u5f15\u6570\u3092\u8abf\u6574\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u7279\u5b9a\u306e Solr Core \u306e\u7269\u7406\u914d\u7f6e\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\"  | jq -r .status.sample_core1.instanceDir\n\n\u51fa\u529b\u7d50\u679c:\n/path/to/sample_core1/\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u3092\u53d6\u5f97\u3059\u308b \u305d\u306e2\n\u4ee5\u4e0b\u306e\u65b9\u6cd5\u3067\u3082 Solr Core \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\"  | jq -r .status.sample_core1.index.numDocs\n\n\u51fa\u529b\u7d50\u679c:\n910\n\n\n\u5168 Solr Core \u306e \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u306e\u5408\u8a08\u3092\u53d6\u5f97\u3059\u308b\nawk \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u5168 Solr Core \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u306e\u5408\u8a08\u3092\u53d6\u5f97\u53ef\u80fd\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\ncurl \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\" -s | jq -r \".status | values[] | .index.numDocs\"  | awk '{a += $1}END{print a}'\n\n\nSolr Core \u3092\u8907\u6570\u6307\u5b9a\u3057\u3066\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\ncores API \u306b core \u30d1\u30e9\u30e1\u30bf\u3067 Solr Core \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u7279\u5b9a\u306e Solr Core \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u5c11\u3057\u8907\u96d1\u3067\u3059\u304c\u3001 echo \u3068 tr \u3068 xargs \u3092\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u306b\u3088\u308a\u30011 liner \u3067\u8907\u6570\u306e Solr \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001\u52a0\u5de5\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u4f8b\u306f\u3001\u7279\u5b9a\u306e Solr Core \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u306e\u5408\u8a08\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u4f8b\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9:\necho sample_core1 sample_core2 | tr \" \" \"\\n\" | xargs -IXXX curl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json&core=XXX\" | jq \".status | values[] | .index.numDocs\" |  awk '{a += $1}END{print a}'\n\n\u51fa\u529b\u7d50\u679c:\n\n\u307e\u3068\u3081\n\u57fa\u672c\u7684\u306a Unix \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066 Solr Web API \u304b\u3089\u5f97\u3089\u308c\u308b\u60c5\u5831\u3092\u52a0\u5de5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nSolr \u3060\u3051\u3067\u306f\u306a\u304f\u3001\u3044\u308d\u3044\u308d\u306a API \u3067\u5fdc\u7528\u53ef\u80fd\u3060\u3068\u304a\u3082\u3044\u307e\u3059\u306e\u3067\u3001\u662f\u975e\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nSolr \u306f\u3001\u4ed8\u5c5e\u306e\u7ba1\u7406\u753b\u9762\u9762\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u69d8\u3005\u306a\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u3057\u304b\u3057\u3001\u57fa\u672c\u7684\u306a Unix \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u52b9\u7387\u7684\u306b\u76ee\u7684\u306e\u60c5\u5831\u3092\u53d6\u5f97\u30fb\u52a0\u5de5\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u30d6\u30e9\u30a6\u30b6\u304c\u5229\u7528\u51fa\u6765\u306a\u3044\u74b0\u5883\u306a\u3069\u3067\u6709\u52b9\u3067\u3059\u3002\n\n# \u6e96\u5099\n\n\u4eca\u56de\u5229\u7528\u3059\u308b\u306e\u306f\u4ee5\u4e0b\u306e Unix \u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\n## echo\n\n\u5f15\u6570\u306b\u6e21\u3057\u305f\u6587\u5b57\u5217\u3092\u3001\u6a19\u6e96\u51fa\u529b\u306b\u51fa\u529b\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002\n\n## tr\n\n`echo` \u304b\u3089\u6e21\u3055\u308c\u305f\u6587\u5b57\u5217\u306e\u7a7a\u767d\u3092\u6539\u884c\u306b\u5909\u66f4\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002\n\n## curl\n\nSolr \u3068\u306e\u901a\u4fe1\u3092\u304a\u3053\u306a\u3046 HTTP Client \u3068\u3057\u3066\u5229\u7528\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u5e38\u306b `-s` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u307f\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n## jq\n\nSolr Web API \u304b\u3089\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u89e3\u6790\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002 `-r` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u5024\u3092\u56f2\u3046 '\"' \u3092\u524a\u9664\u3059\u308b\u4f7f\u3044\u65b9\u3082\u5229\u7528\u3057\u307e\u3059\u3002\n\n## awk\n\n\u6a19\u6e96\u5165\u529b\u304b\u3089\u6e21\u3055\u308c\u305f\u6539\u884c\u533a\u5207\u308a\u306e\u6570\u5b57\u30c7\u30fc\u30bf\u3092\u52a0\u7b97\u3059\u308b\u306e\u306b\u5229\u7528\u3057\u307e\u3059\u3002\n\n## xargs\n\n`-I` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u3001\u6a19\u6e96\u5165\u529b\u304b\u3089\u6e21\u3055\u308c\u305f\u6539\u884c\u533a\u5207\u308a\u306e\u30c7\u30fc\u30bf\u3092\u3001\u305d\u308c\u305e\u308c xargs \u306e\u5f15\u6570\u30b3\u30de\u30f3\u30c9\u306b\u308f\u305f\u3057\u307e\u3059\u3002\n\n# \u691c\u7d22\u7d50\u679c\u3092 JSON \u3067\u53d6\u5f97\u3059\u308b\n\n\u4e00\u756a\u5358\u7d14\u306a\u30d1\u30bf\u30f3\u3067\u3059\u3002 URL \u306e\u30d1\u30e9\u30e1\u30bf\u90e8\u306b `wt=json` \u3092\u4ed8\u3051\u3001\u3064\u306d\u306b JSON \u5f62\u5f0f\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&wt=json\"\n\n\u51fa\u529b\u7d50\u679c:\n\n    {\"responseHeader\":{\"status\":0,\"QTime\":2,\"params\":{\"q\":\"*:*\",\"wt\":\"json\"}},\"response\":{\"numFound\":80884,\"start\":0,\"docs\":[{...\n\n# \u691c\u7d22\u7d50\u679c\u3092\u6574\u5f62\u3057\u305f JSON \u3067\u53d6\u5f97\u3059\u308b\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u3092 `jq` \u306e\u6a19\u6e96\u5165\u529b\u306b\u6e21\u3059\u3060\u3051\u3067\u3001JSON \u3092\u6574\u5f62\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&wt=json\" | jq .\n\n\u51fa\u529b\u7d50\u679c:\n\n    {\n      \"responseHeader\": {\n        \"status\": 0,\n        \"QTime\": 1,\n        \"params\": {\n          \"q\": \"*:*\",\n          \"wt\": \"json\"\n        }\n      },\n      \"response\": {\n        \"numFound\": 80884,\n        \"start\": 0,\n        \"docs\": [\n          {\n            ....\n\n\u540c\u69d8\u306e\u3053\u3068\u306f URL\u306e\u30d1\u30e9\u30e1\u30bf\u90e8\u306b `indent=2` \u3092\u8ffd\u52a0\u3059\u308b\u4e8b\u306b\u3088\u3063\u3066\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u3057\u304b\u3057\u3001\u4eca\u5f8c\u306f\u307b\u3068\u3093\u3069\u306e\u5834\u5408  `jq` \u3092\u5229\u7528\u3059\u308b\u306e\u3067\u3001 \u6574\u5f62\u76ee\u7684\u306e `indent` \u30d1\u30e9\u30e1\u30bf\u306f\u4eca\u56de\u306f\u5229\u7528\u3057\u307e\u305b\u3093\u3002\n\n# url field \u306e\u307f\u3092\u53d6\u5f97\u3059\u308b\n\nSolr Document \u306e Unique Key \u3068\u3057\u3066\u5229\u7528\u3057\u3066\u3044\u308b field \u3092 `url` \u3068\u3057\u307e\u3059\u3002 \n\nURL\u306e\u30d1\u30e9\u30e1\u30bf\u90e8\u306b `fl=url` \u3092\u4ed8\u3051\u52a0\u3048\u308b\u3053\u3068\u306b\u3088\u308a\u3001 Unique Key \u3060\u3051\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq .\n\n\u51fa\u529b\u7d50\u679c:\n\n    {\n      \"responseHeader\": {\n        \"status\": 0,\n        \"QTime\": 2,\n        \"params\": {\n          \"wt\": \"json\",\n          \"fl\": \"url\",\n          \"q\": \"*:*\"\n        }\n      },\n      \"response\": {\n        \"numFound\": 910,\n        \"start\": 0,\n        \"docs\": [\n          {\n            \"url\": \"http://promo.mobile.yahoo.co.jp/yjapp/\"\n          },\n          {\n            \"url\": \"http://promotion.yahoo.co.jp/visadebit1602/\"\n          },\n          {\n            \"url\": \"http://travel.yahoo.co.jp/\"\n          },\n          {\n            \"url\": \"http://dir.yahoo.co.jp/\"\n          },\n          {\n            \"url\": \"http://id.yahoo.co.jp/\"\n          },\n          {\n            \"url\": \"http://kids.yahoo.co.jp/\"\n          },\n          {\n            \"url\": \"http://bbpromo.yahoo.co.jp/\"\n          },\n          {\n            \"url\": \"http://search.yahoo.co.jp/\"\n          },\n          {\n            \"url\": \"http://dic.yahoo.co.jp/\"\n          },\n          {\n            \"url\": \"http://map.yahoo.co.jp/\"\n          }\n        ]\n      }\n    }\n\n# url \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n\n`jq` \u306e\u5f15\u6570\u3092\u8abf\u6574\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001url \u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002 \n\n`jq` \u306e\u5f15\u6570\u306f\u5965\u304c\u6df1\u3044\u306e\u3067\u3001\u8a73\u3057\u304f\u306f\u672c\u5bb6\u306e\u30de\u30cb\u30e5\u30a2\u30eb\u3092\u3054\u53c2\u7167\u4e0b\u3055\u3044\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq .response.docs[].url\n\n\u51fa\u529b\u7d50\u679c:\n\n    \"http://promo.mobile.yahoo.co.jp/yjapp/\"\n    \"http://promotion.yahoo.co.jp/visadebit1602/\"\n    \"http://travel.yahoo.co.jp/\"\n    \"http://dir.yahoo.co.jp/\"\n    \"http://id.yahoo.co.jp/\"\n    \"http://kids.yahoo.co.jp/\"\n    \"http://bbpromo.yahoo.co.jp/\"\n    \"http://search.yahoo.co.jp/\"\n    \"http://dic.yahoo.co.jp/\"\n    \"http://map.yahoo.co.jp/\"\n\n## url \u3092\u56f2\u3046 '\"' \u3092\u9664\u304f\n\n`jq` \u306b `-r` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3053\u3068\u306b\u3088\u308a\u3001URL \u3092\u56f2\u3046 '\"' \u3092\u53d6\u308a\u9664\u304f\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq -r .response.docs[].url\n\n\u51fa\u529b\u7d50\u679c:\n\n    http://promo.mobile.yahoo.co.jp/yjapp/\n    http://promotion.yahoo.co.jp/visadebit1602/\n    http://travel.yahoo.co.jp/\n    http://dir.yahoo.co.jp/\n    http://id.yahoo.co.jp/\n    http://kids.yahoo.co.jp/\n    http://bbpromo.yahoo.co.jp/\n    http://search.yahoo.co.jp/\n    http://dic.yahoo.co.jp/\n    http://map.yahoo.co.jp/\n\n# \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u3092\u53d6\u5f97\u3059\u308b\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/sample_core1/select/?q=*:*&fl=url&wt=json\" | jq -r .response.numFound\n\n\u51fa\u529b\u7d50\u679c:\n\n    910\n\n# Solr Core \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\n\nSolr Web API \u306e cores API \u3092\u4f7f\u3046\u3053\u3068\u306b\u3088\u308a\u3001Solr \u306b\u914d\u7f6e\u3057\u3066\u3042\u308b\u5168\u3066\u306e Solr Core \u306e\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\"  | jq .\n\n\u51fa\u529b\u7d50\u679c:\n\n    {\n      \"responseHeader\": {\n        \"status\": 0,\n        \"QTime\": 33\n      },\n      \"status\": {\n        \"sample_core1\": {\n          \"name\": \"sample_core1\",\n          \"instanceDir\": \"/path/to/sample_core1/\",\n          \"dataDir\": \"/path/to/sample_core1/data/\",\n          \"startTime\": \"2015-09-24T05:21:14.755Z\",\n          \"uptime\": 13328994006,\n          \"index\": {\n            \"numDocs\": 3000,\n            \"maxDoc\": 3000,\n            ...\n\n# Solr Core \u306e\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53d6\u5f97\u3059\u308b\n\n`jq` \u306e\u5f15\u6570\u3092\u8abf\u6574\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u7279\u5b9a\u306e Solr Core \u306e\u7269\u7406\u914d\u7f6e\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\"  | jq -r .status.sample_core1.instanceDir\n\n\u51fa\u529b\u7d50\u679c:\n\n    /path/to/sample_core1/\n\n# \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u3092\u53d6\u5f97\u3059\u308b \u305d\u306e2\n\n\u4ee5\u4e0b\u306e\u65b9\u6cd5\u3067\u3082 Solr Core \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\"  | jq -r .status.sample_core1.index.numDocs\n\n\u51fa\u529b\u7d50\u679c:\n\n    910\n\n# \u5168 Solr Core \u306e \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u306e\u5408\u8a08\u3092\u53d6\u5f97\u3059\u308b\n\n`awk` \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u5168 Solr Core \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u306e\u5408\u8a08\u3092\u53d6\u5f97\u53ef\u80fd\u3067\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    curl \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json\" -s | jq -r \".status | values[] | .index.numDocs\"  | awk '{a += $1}END{print a}'\n\n# Solr Core \u3092\u8907\u6570\u6307\u5b9a\u3057\u3066\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\n\ncores API \u306b `core` \u30d1\u30e9\u30e1\u30bf\u3067 Solr Core \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u7279\u5b9a\u306e Solr Core \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u5c11\u3057\u8907\u96d1\u3067\u3059\u304c\u3001 `echo` \u3068 `tr` \u3068 `xargs` \u3092\u7d44\u307f\u5408\u308f\u305b\u308b\u3053\u3068\u306b\u3088\u308a\u30011 liner \u3067\u8907\u6570\u306e Solr \u306e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001\u52a0\u5de5\u3059\u308b\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u4f8b\u306f\u3001\u7279\u5b9a\u306e Solr Core \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6570\u306e\u5408\u8a08\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u4f8b\u3067\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9:\n\n    echo sample_core1 sample_core2 | tr \" \" \"\\n\" | xargs -IXXX curl -s \"http://localhost:60080/solr/admin/cores?action=STATUS&wt=json&core=XXX\" | jq \".status | values[] | .index.numDocs\" |  awk '{a += $1}END{print a}'\n\n\u51fa\u529b\u7d50\u679c:\n\n# \u307e\u3068\u3081\n\n\u57fa\u672c\u7684\u306a Unix \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066 Solr Web API \u304b\u3089\u5f97\u3089\u308c\u308b\u60c5\u5831\u3092\u52a0\u5de5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nSolr \u3060\u3051\u3067\u306f\u306a\u304f\u3001\u3044\u308d\u3044\u308d\u306a API \u3067\u5fdc\u7528\u53ef\u80fd\u3060\u3068\u304a\u3082\u3044\u307e\u3059\u306e\u3067\u3001\u662f\u975e\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["command", "solr", "jq", "xargs"]}