{"context": "\n\u3053\u3093\u306a\u53e4\u3044\u8a18\u4e8b\u898b\u3066\u306a\u3044\u3067browserify\u304bwebpack\u3092\u4f7f\u3044\u306a\u3055\u3044\n\n\u6570\u5343\u301c\u6570\u4e07\u884c\u3092\u60f3\u5b9a\u3002\u7279\u306b\u56fa\u6709\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u304b\u4f7f\u308f\u306a\u3044\u3002\n\u30d5\u30a1\u30a4\u30eb\u69cb\u6210\u4f8b\npackage.json\nGruntfile.js\napp\n\u251c\u2500\u2500 build\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app.js // concat\u3067\u4f5c\u6210\n\u2514\u2500\u2500 modules\n    \u251c\u2500\u2500 action1.js\n    \u251c\u2500\u2500 action2.js\n    \u251c\u2500\u2500 action3.js\n    \u251c\u2500\u2500 common.js\n    \u251c\u2500\u2500 constants.js\n    \u251c\u2500\u2500 fin.js // \u30d5\u30a1\u30a4\u30eb\u306e\u6700\u7d42\n    \u251c\u2500\u2500 init.js // \u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\n    \u2514\u2500\u2500 util.js\n\nGrunt\u30bf\u30b9\u30af\u4f8b\nconcat\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u5168\u4f53\u3092\u7121\u540d\u95a2\u6570\u3067\u56f2\u3093\u3067\u3001\u66f4\u306binit.js\u4ee5\u5916\u306e\u305d\u308c\u305e\u308c\u306e\u30d5\u30a1\u30a4\u30eb\u3082\u7d50\u5408\u6642\u306b\u7121\u540d\u95a2\u6570\u3067\u56f2\u3093\u3067\u3001\u4ed6\u304b\u3089\u53c2\u7167\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u96a0\u853d\u3002\n\u3053\u308c\u3092watch\u3067\u76e3\u8996\u3001jshint\u3082\u304b\u3051\u308b\u3068\u826f\u3055\u304c\u3042\u308b\u3002\n\nGruntfile.js\nvar dir = {\n    build: 'app/build',\n    modules: 'app/modules'\n};\n\nmodule.exports = function(grunt) {\n\n    grunt.initConfig({\n\n        dir: dir,\n        pkg: grunt.file.readJSON('package.json'),\n\n        concat: {\n            options: {\n                banner: \"(function(window){\\n'use strict';\\n\\n\",\n                footer: '\\n})(window);\\n',\n                process: function(src, filepath) {\n                    if (filepath.indexOf('/init.js') !== -1) {\n                        return src.trim() + '\\n';\n                    } else {\n                        return '(function(){\\n\\n' + src.trim() + '\\n\\n})();\\n';\n                    }\n                }\n            },\n            app: {\n                dest: '<%= dir.build %>/app.js',\n                src: [\n                    '<%= dir.modules %>/init.js',\n                    '<%= dir.modules %>/constants.js',\n                    '<%= dir.modules %>/common.js',\n                    '<%= dir.modules %>/util.js',\n                    '<%= dir.modules %>/action1.js',\n                    '<%= dir.modules %>/action2.js',\n                    '<%= dir.modules %>/action3.js',\n                    '<%= dir.modules %>/fin.js'\n                ]\n            }\n        },\n\n        watch: {\n            modules: {\n                files: ['<%= dir.modules %>/*.js'],\n                tasks: ['concat:app'],\n                options: {\n                    debounceDelay: 200\n                }\n            }\n        }\n\n    });\n\n    grunt.loadNpmTasks('grunt-contrib-concat');\n    grunt.loadNpmTasks('grunt-contrib-watch');\n    grunt.registerTask('default', ['concat']);\n\n};\n\n\nconcat\u5f8c\u306eapp.js\u306e\u72b6\u614b\n\napp.js\n(function(window){\n'use strict';\n\n// init.js\n\n(function(){\n// constants.js\n})();\n\n(function(){\n// common.js\n})();\n\n(function(){\n// util.js\n})();\n\n(function(){\n// action1.js\n})();\n\n...\n\n(function(){\n// fin.js\n})();\n\n})(window);\n\n\ninit.js \u3067\u306f\u5168\u4f53\u3067\u4f7f\u3046\u5909\u6570\u5ba3\u8a00\u3092\u884c\u3046\u3002\n\ninit.js\nvar CONSTANTS,\n    Util,\n    common,\n    action1,\n    action2,\n    action3\n;\n\n\n\u56fa\u6709\u306e\u30a2\u30af\u30b7\u30e7\u30f3\n\naction1.js\nfunction Action1(){}\n\nAction1.prototype = {\n    init: function(){\n        // Action1\n    }\n};\n\naction1 = new Action1();\n\n\n\u6700\u5f8c\u306b fin.js \u3067\u767a\u706b\n\nfin.js\naction1.init();\n\nif (common.func() === 1) {\n    action2.init();\n} else {\n    action3.init();\n}\n\n\n\u3053\u308c\u3067\u4f5c\u696d\u5206\u62c5\u3057\u3084\u3059\u304f\u306a\u308b\u3001\u306f\u305a\u3002\n\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u306e\u7d50\u5408\u306fusemin\u3067\u30d3\u30eb\u30c9\u6642\u306e\u307f\u884c\u3046\u3068\u9762\u5012\u304c\u306a\u3044\u3002\n\nindex.html\n<!-- build:js dest/script/app.js -->\n<script src=\"bower_components/jquery/dist/jquery.js\"></script>\n<script src=\"bower_components/underscore/underscore.js\"></script>\n<script src=\"app/build/app.js\"></script>\n<!-- endbuild -->\n\n\n\u3066\u3044\u3046\u306e\u3092Yeoman\u306ewebapp\u3068\u304b\u30d9\u30fc\u30b9\u306b\u3084\u308b\u3068\u697d\u3002\n- - -\n*\u3053\u3093\u306a\u53e4\u3044\u8a18\u4e8b\u898b\u3066\u306a\u3044\u3067browserify\u304bwebpack\u3092\u4f7f\u3044\u306a\u3055\u3044*\n- - -\n\n\u6570\u5343\u301c\u6570\u4e07\u884c\u3092\u60f3\u5b9a\u3002\u7279\u306b\u56fa\u6709\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u304b\u4f7f\u308f\u306a\u3044\u3002\n\n*\u30d5\u30a1\u30a4\u30eb\u69cb\u6210\u4f8b*\n\n```\npackage.json\nGruntfile.js\napp\n\u251c\u2500\u2500 build\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 app.js // concat\u3067\u4f5c\u6210\n\u2514\u2500\u2500 modules\n    \u251c\u2500\u2500 action1.js\n    \u251c\u2500\u2500 action2.js\n    \u251c\u2500\u2500 action3.js\n    \u251c\u2500\u2500 common.js\n    \u251c\u2500\u2500 constants.js\n    \u251c\u2500\u2500 fin.js // \u30d5\u30a1\u30a4\u30eb\u306e\u6700\u7d42\n    \u251c\u2500\u2500 init.js // \u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\n    \u2514\u2500\u2500 util.js\n```\n\n*Grunt\u30bf\u30b9\u30af\u4f8b*\n\nconcat\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u5168\u4f53\u3092\u7121\u540d\u95a2\u6570\u3067\u56f2\u3093\u3067\u3001\u66f4\u306binit.js\u4ee5\u5916\u306e\u305d\u308c\u305e\u308c\u306e\u30d5\u30a1\u30a4\u30eb\u3082\u7d50\u5408\u6642\u306b\u7121\u540d\u95a2\u6570\u3067\u56f2\u3093\u3067\u3001\u4ed6\u304b\u3089\u53c2\u7167\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u96a0\u853d\u3002\n\u3053\u308c\u3092watch\u3067\u76e3\u8996\u3001jshint\u3082\u304b\u3051\u308b\u3068\u826f\u3055\u304c\u3042\u308b\u3002\n\n```js:Gruntfile.js\nvar dir = {\n    build: 'app/build',\n    modules: 'app/modules'\n};\n\nmodule.exports = function(grunt) {\n\n    grunt.initConfig({\n\n        dir: dir,\n        pkg: grunt.file.readJSON('package.json'),\n\n        concat: {\n            options: {\n                banner: \"(function(window){\\n'use strict';\\n\\n\",\n                footer: '\\n})(window);\\n',\n                process: function(src, filepath) {\n                    if (filepath.indexOf('/init.js') !== -1) {\n                        return src.trim() + '\\n';\n                    } else {\n                        return '(function(){\\n\\n' + src.trim() + '\\n\\n})();\\n';\n                    }\n                }\n            },\n            app: {\n                dest: '<%= dir.build %>/app.js',\n                src: [\n                    '<%= dir.modules %>/init.js',\n                    '<%= dir.modules %>/constants.js',\n                    '<%= dir.modules %>/common.js',\n                    '<%= dir.modules %>/util.js',\n                    '<%= dir.modules %>/action1.js',\n                    '<%= dir.modules %>/action2.js',\n                    '<%= dir.modules %>/action3.js',\n                    '<%= dir.modules %>/fin.js'\n                ]\n            }\n        },\n\n        watch: {\n            modules: {\n                files: ['<%= dir.modules %>/*.js'],\n                tasks: ['concat:app'],\n                options: {\n                    debounceDelay: 200\n                }\n            }\n        }\n\n    });\n\n    grunt.loadNpmTasks('grunt-contrib-concat');\n    grunt.loadNpmTasks('grunt-contrib-watch');\n    grunt.registerTask('default', ['concat']);\n\n};\n```\n\nconcat\u5f8c\u306eapp.js\u306e\u72b6\u614b\n\n```js:app.js\n(function(window){\n'use strict';\n\n// init.js\n\n(function(){\n// constants.js\n})();\n\n(function(){\n// common.js\n})();\n\n(function(){\n// util.js\n})();\n\n(function(){\n// action1.js\n})();\n\n...\n\n(function(){\n// fin.js\n})();\n\n})(window);\n```\n\ninit.js \u3067\u306f\u5168\u4f53\u3067\u4f7f\u3046\u5909\u6570\u5ba3\u8a00\u3092\u884c\u3046\u3002\n\n```js:init.js\nvar CONSTANTS,\n    Util,\n    common,\n    action1,\n    action2,\n    action3\n;\n```\n\n\u56fa\u6709\u306e\u30a2\u30af\u30b7\u30e7\u30f3\n\n```js:action1.js\nfunction Action1(){}\n\nAction1.prototype = {\n    init: function(){\n        // Action1\n    }\n};\n\naction1 = new Action1();\n```\n\n\u6700\u5f8c\u306b fin.js \u3067\u767a\u706b\n\n```js:fin.js\naction1.init();\n\nif (common.func() === 1) {\n    action2.init();\n} else {\n    action3.init();\n}\n```\n\n\u3053\u308c\u3067\u4f5c\u696d\u5206\u62c5\u3057\u3084\u3059\u304f\u306a\u308b\u3001\u306f\u305a\u3002\n\n\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u306e\u7d50\u5408\u306fusemin\u3067\u30d3\u30eb\u30c9\u6642\u306e\u307f\u884c\u3046\u3068\u9762\u5012\u304c\u306a\u3044\u3002\n\n```html:index.html\n<!-- build:js dest/script/app.js -->\n<script src=\"bower_components/jquery/dist/jquery.js\"></script>\n<script src=\"bower_components/underscore/underscore.js\"></script>\n<script src=\"app/build/app.js\"></script>\n<!-- endbuild -->\n```\n\n\u3066\u3044\u3046\u306e\u3092Yeoman\u306ewebapp\u3068\u304b\u30d9\u30fc\u30b9\u306b\u3084\u308b\u3068\u697d\u3002\n\n\n", "tags": ["JavaScript", "grunt"]}