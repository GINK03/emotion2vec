{"context": " More than 1 year has passed since last update.\n\n\u53c2\u8003\n\nopenswan\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u66f4\u65b0\u3055\u308c\u305f\u306e\u3067\u3059\u304c\u3001\u3082\u3046\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3057\u3066\u306a\u3044\u304b\u3089strongSwan\u3068\u304b\u306b\u4e57\u308a\u63db\u3048\u3066\u306d\n\n\nstrongSwan \u3069\u3066\u3084\u306e\u622f\u308c\u8a00/\u30a6\u30a7\u30d6\u30ea\u30d6\u30ed\u30b0\nDebian GNU/Linux Wheezy \u3067 StrongSwan \u306b\u3066L2TP / IPsec \u30b5\u30fc\u30d0\u8a2d\u5b9a\u306e\u5099\u5fd8\u9332 \u2013 Open the Next\nLinux\u3067openswan\u3068xl2tpd\u4f7f\u3063\u3066L2TP/IPSec VPN\u3059\u308b\u65b9\u6cd5 - Qiita\nstrongswan/strongswan \u00b7 GitHub\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nubuntu15.04\u306b\u3066\u5b9f\u65bd\u3002\n\n\n\u3053\u306e\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u306f 192.168.100.121\n\n\n\n\nsudo apt-get install -y strongswan xl2tpd\n\n\nstrongswan (IPSec)\n\n/etc/ipsec.conf\nconfig setup\n\nconn L2TP-NAT\n    rightsubnet=0.0.0.0/0\n    also=L2TP-noNAT\n\nconn L2TP-noNAT\n    forceencaps=yes\n    authby=secret\n    auto=add\n    keyexchange=ikev1\n    keyingtries=3\n    ike=aes128-sha1-modp3072\n    esp=aes128-sha1-modp3072\n    rekey=no\n    ikelifetime=8h\n    lifetime=1h\n    type=transport\n    left=192.168.100.121    # \u81ea\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\n    leftprotoport=17/1701\n    right=%any\n    rightprotoport=17/%any\n    dpddelay=40\n    dpdtimeout=130\n    dpdaction=clear\n\n\n\n/etc/ipsec.secrets\n+ 192.168.100.121 %any : PSK \"PRESHAREDKEY\"\n\n\n\n/etc/strongswan.conf\n  charon {\n        load_modular = yes\n        plugins {\n                include strongswan.d/charon/*.conf\n        }\n+       dns1=8.8.8.8\n+       dns2=8.8.4.4\n  }\n\n  include strongswan.d/*.conf\n\n\nsystemctl start strongswan\n\n\nxl2tpd\n\n/etc/xl2tpd/xl2tpd.conf\n[lns default]\nip range = 192.168.100.4-192.168.100.5\nlocal ip = 192.168.100.121    ; \u81ea\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\nlength bit = yes\nrefuse chap = yes\nrequire authentication = yes\nname = l2tp\npppoptfile = /etc/ppp/options.l2tpd.lns\n\n\n\n/etc/ppp/options.l2tpd.lns\nname l2tp\nrefuse-pap\nrefuse-chap\nrefuse-mschap\nrequire-mschap-v2\nms-dns 8.8.8.8\nnodefaultroute\nlock\nnobsdcomp\nmtu 1280\nmru 1280\n\n\n\n/etc/ppp/chap-secrets\n# client        server  secret                  IP addresses\nclient1  l2tp   ep2fai6T        *\nclient2  l2tp   hahGiv4i        *\n\n\nsystemctl start xl2tpd\n\n\n\u30ed\u30b0\u306e\u898b\u65b9\nsudo journalctl -u strongswan -f -l\n\n\n\u63a5\u7d9a\u5b9f\u65bd\n\n\u8a2d\u5b9a\n\n\n\n\u63a5\u7d9a\u6210\u529f\n\n\nsudo ipsec status\n\n\n# \u53c2\u8003\n\n> openswan\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u66f4\u65b0\u3055\u308c\u305f\u306e\u3067\u3059\u304c\u3001\u3082\u3046\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3057\u3066\u306a\u3044\u304b\u3089strongSwan\u3068\u304b\u306b\u4e57\u308a\u63db\u3048\u3066\u306d\n\n\n* [strongSwan \u3069\u3066\u3084\u306e\u622f\u308c\u8a00/\u30a6\u30a7\u30d6\u30ea\u30d6\u30ed\u30b0](http://doteya.at.webry.info/201404/article_1.html)\n* [Debian GNU/Linux Wheezy \u3067 StrongSwan \u306b\u3066L2TP / IPsec \u30b5\u30fc\u30d0\u8a2d\u5b9a\u306e\u5099\u5fd8\u9332 \u2013 Open the Next](https://www.manabii.info/2014/08/debian-wheezy-strongswan-l2tp-ipsec.html)\n* [Linux\u3067openswan\u3068xl2tpd\u4f7f\u3063\u3066L2TP/IPSec VPN\u3059\u308b\u65b9\u6cd5 - Qiita](http://qiita.com/nyarla/items/490e10a5eaa6f0216909)\n* [strongswan/strongswan \u00b7 GitHub](https://github.com/strongswan/strongswan)\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* ubuntu15.04\u306b\u3066\u5b9f\u65bd\u3002\n  * \u3053\u306e\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u306f `192.168.100.121`\n\n```bash:\nsudo apt-get install -y strongswan xl2tpd\n```\n\n\n# strongswan (IPSec)\n\n```python:/etc/ipsec.conf\nconfig setup\n\nconn L2TP-NAT\n    rightsubnet=0.0.0.0/0\n    also=L2TP-noNAT\n\nconn L2TP-noNAT\n    forceencaps=yes\n    authby=secret\n    auto=add\n    keyexchange=ikev1\n    keyingtries=3\n    ike=aes128-sha1-modp3072\n    esp=aes128-sha1-modp3072\n    rekey=no\n    ikelifetime=8h\n    lifetime=1h\n    type=transport\n    left=192.168.100.121    # \u81ea\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\n    leftprotoport=17/1701\n    right=%any\n    rightprotoport=17/%any\n    dpddelay=40\n    dpdtimeout=130\n    dpdaction=clear\n```\n\n\n```diff:/etc/ipsec.secrets\n+ 192.168.100.121 %any : PSK \"PRESHAREDKEY\"\n```\n\n\n```diff:/etc/strongswan.conf\n  charon {\n        load_modular = yes\n        plugins {\n                include strongswan.d/charon/*.conf\n        }\n+       dns1=8.8.8.8\n+       dns2=8.8.4.4\n  }\n\n  include strongswan.d/*.conf\n```\n\n\n```bash:\nsystemctl start strongswan\n```\n\n# xl2tpd\n\n\n```bash:/etc/xl2tpd/xl2tpd.conf\n[lns default]\nip range = 192.168.100.4-192.168.100.5\nlocal ip = 192.168.100.121    ; \u81ea\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\nlength bit = yes\nrefuse chap = yes\nrequire authentication = yes\nname = l2tp\npppoptfile = /etc/ppp/options.l2tpd.lns\n```\n\n\n```bash:/etc/ppp/options.l2tpd.lns\nname l2tp\nrefuse-pap\nrefuse-chap\nrefuse-mschap\nrequire-mschap-v2\nms-dns 8.8.8.8\nnodefaultroute\nlock\nnobsdcomp\nmtu 1280\nmru 1280\n```\n\n```bash:/etc/ppp/chap-secrets\n# client        server  secret                  IP addresses\nclient1  l2tp   ep2fai6T        *\nclient2  l2tp   hahGiv4i        *\n```\n\n```bash:\nsystemctl start xl2tpd\n```\n\n# \u30ed\u30b0\u306e\u898b\u65b9\n\n```bash:\nsudo journalctl -u strongswan -f -l\n```\n\n# \u63a5\u7d9a\u5b9f\u65bd\n\n* \u8a2d\u5b9a\n\n![IMG_1299.jpg](https://qiita-image-store.s3.amazonaws.com/0/25728/448793ba-ffc4-0bbc-3d29-8e715cf4548e.jpeg \"IMG_1299.jpg\")\n\n* \u63a5\u7d9a\u6210\u529f\n\n![IMG_1300.jpg](https://qiita-image-store.s3.amazonaws.com/0/25728/c44415ff-2a76-8c43-4c23-13f0df261a92.jpeg \"IMG_1300.jpg\")\n\n\n\n```bash:\nsudo ipsec status\n```\n", "tags": ["VPN"]}