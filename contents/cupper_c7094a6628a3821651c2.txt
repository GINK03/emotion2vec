{"context": "\n\nCA\u306e\u4f5c\u6210\n\nCA\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\nmkdir /etc/pki/myCA\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n/etc/pki/tls/openssl.cnf\u3092myCA\u306b\u30b3\u30d4\u30fc\nopenssl.cnf\u306e\u4ee5\u4e0b\u3092\u7de8\u96c6\n[ CA_default ]\ndir = /etc/pki/myCA\n[ req ]\ndefault_md = sha256\n[ usr_cert ]\nbasicConstraints=CA:TRUE\nnsCertType = client, email\n\n\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\nmkdir certs\nmkdir crl\nmkdir newcerts\nmkdir private\ntouch index.txt\ntouch serial\necho \"01\" > serial\n\n\u8a8d\u8a3c\u5c40\u306e\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\nopenssl req -new -config ./openssl.cnf -x509 -keyout cakey.pem -out cacert.pem -days 3650 -sha256\n\n\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\n\n\u9375\u306e\u4f5c\u6210\nopenssl genrsa -out \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\n\nCSR\u3092\u4f5c\u6210\nopenssl req -new -sha256 -key \u9375\u30d5\u30a1\u30a4\u30eb -out \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\n\n\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092sha256\u3067\u7f72\u540d\u3059\u308b\nopenssl ca -md sha256 -config /etc/pki/myCA/openssl.cnf -cert CA\u306e\u8a3c\u660e\u66f8 -keyfile CA\u306e\u79d8\u5bc6\u9375 -out \u51fa\u529b\u30d5\u30a1\u30a4\u30eb -infiles CSR\u30d5\u30a1\u30a4\u30eb \n\n## CA\u306e\u4f5c\u6210\n### CA\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\nmkdir /etc/pki/myCA\n\n### \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\n/etc/pki/tls/openssl.cnf\u3092myCA\u306b\u30b3\u30d4\u30fc\nopenssl.cnf\u306e\u4ee5\u4e0b\u3092\u7de8\u96c6\n\n[ CA_default ]\ndir = /etc/pki/myCA\n\n[ req ]\ndefault_md = sha256\n\n[ usr_cert ]\nbasicConstraints=CA:TRUE\nnsCertType = client, email\n\n### \u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\nmkdir certs\nmkdir crl\nmkdir newcerts\nmkdir private\ntouch index.txt\ntouch serial\necho \"01\" > serial\n\n## \u8a8d\u8a3c\u5c40\u306e\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\nopenssl req -new -config ./openssl.cnf -x509 -keyout cakey.pem -out cacert.pem -days 3650 -sha256\n\n## \u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\n### \u9375\u306e\u4f5c\u6210\nopenssl genrsa -out \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\n\n### CSR\u3092\u4f5c\u6210\nopenssl req -new -sha256 -key \u9375\u30d5\u30a1\u30a4\u30eb -out \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\n\n## \u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092sha256\u3067\u7f72\u540d\u3059\u308b\nopenssl ca -md sha256 -config /etc/pki/myCA/openssl.cnf -cert CA\u306e\u8a3c\u660e\u66f8 -keyfile CA\u306e\u79d8\u5bc6\u9375 -out \u51fa\u529b\u30d5\u30a1\u30a4\u30eb -infiles CSR\u30d5\u30a1\u30a4\u30eb \n\n", "tags": ["openssl"]}