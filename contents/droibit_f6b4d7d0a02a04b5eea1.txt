{"context": " More than 1 year has passed since last update.RxJava\u3092Android\u306e\u958b\u767a\u306b\u53d6\u308a\u8fbc\u307f\u305f\u304f\u52c9\u5f37\u3057\u3066\u304a\u308a\u3001\u305d\u306e\u6210\u679c\u7b2c\u4e00\u5f3e\u3068\u3057\u3066 Activity#onActivityResult(int, int, Bundle) \u306e\u7169\u308f\u3057\u3055\u3092\u89e3\u6d88\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u958b\u59cb\u3068\u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\u3068\u3053\u308d\u304c\u5206\u304b\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u884c\u3063\u305f\u308a\u304d\u305f\u308a\u3057\u306a\u3051\u308c\u3044\u3051\u306a\u3044\u306e\u3067\u6b63\u76f4\u3081\u3093\u3069\u304f\u3055\u3044\u3068\u611f\u3058\u3066\u307e\u3057\u305f('A`)\n\u305d\u3093\u306a\u304a\u308a\u3001RxJava\u3092\u52c9\u5f37\u3057\u59cb\u3081\u3001RxPermissions \u3068\u3044\u3046Android6.0 \u3088\u308a\u5c0e\u5165\u3055\u308c\u305f\u65b0\u3057\u3044\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u30e2\u30c7\u30eb\u306e\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u51fa\u4f1a\u3044\u307e\u3057\u305f\u3002\nRxJava\u306e\u52c9\u5f37\u3092\u517c\u306d\u3066\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\uff08\u30af\u30e9\u30b9\u304c3\u3064\u3060\u3051\u306a\u306e\u3067\u975e\u5e38\u306b\u8aad\u307f\u3084\u3059\u3044\uff09\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u540c\u3058\u3088\u3046\u306a\u4ed5\u7d44\u307f\u3067 onActivityResult \u3082\u697d\u306b\u66f8\u3051\u308b\u3058\u3083\u306d\u3068\u3044\u3046\u3053\u3068\u3067\u5b9f\u969b\u306b\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306fGitHub\u306b\u3042\u308a\u307e\u3059\u306e\u3067\u3088\u3051\u308c\u3070\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nRxActivityLauncher\n\n\nActivity#onActivityResult\u306e\u9762\u5012\u304f\u3055\u3044\u3068\u3053\u308d\n\u3053\u306e onActivityResult \u304c\u51fa\u3066\u304f\u308b\u5834\u9762\u3068\u3044\u3048\u3070\u3001\u4ed6\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u8d77\u52d5\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u3046\u3051\u3068\u308b\u6642\u3067\u3059\u306d\u3002\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\npublic class MainActivity extends Activity {\n\n    private static final int REQUEST = 1;\n\n    // \u2461 \u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == REQUEST && resultCode == RESULT_OK) {\n            onReceiveResult(data);\n        }\n    }\n\n    // \u2460 \u5225\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u8d77\u52d5\n    private void startOtherActivity() {\n        Intent launchIntent = new Intent(this, OtherActivity.class);\n        startActivityForResult(launchIntent, REQUEST);\n    }\n\n    // \u2462 \u7d50\u679c\u3092\u53d7\u3051\u53d6\u3063\u3066\u4f55\u304b\u3059\u308b\n    private void onReceiveResult(Intent data) {\n    }\n}\n\n\u30a2\u30af\u30c6\u30a3\u306e\u958b\u59cb\u3068\u7d50\u679c\u306e\u53d7\u3051\u53d6\u308a\u306e\u51e6\u7406\u304c\u6563\u5728\u3057\u3066\u3057\u307e\u3044\u3001\u898b\u901a\u3057\u304c\u60aa\u3044\u3067\u3059\u3002\u305d\u3093\u306a\u6642\u3001RxJava\u3092\u4f7f\u3046\u3053\u3068\u3067\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nRxJava\u306e\u5c0e\u5165\n\u203b RxJava\u3068\u306f\u3001\u3068\u3044\u3046\u90e8\u5206\u306a\u5272\u611b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\nRxJava\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30af\u30c6\u30a3\u306e\u958b\u59cb~\u7d50\u679c\u306e\u53d7\u3051\u53d6\u308a\u306e\u6642\u9593\u306e\u6d41\u308c\u306b\u6cbf\u3063\u305f\u5f62\u3067\u51e6\u7406\u3092\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4e0a\u8a18\u306e\u4f8b\u3092\u66f8\u304d\u306a\u304a\u3057\u3066\u307f\u308b\u3068\u3001\n// \u203b \u51e6\u7406\u306e\u30a4\u30e1\u30fc\u30b8\u3067\u3059\nprivate void startOtherActivityUsingRxJava() {\n    // \u2460 \u5225\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u8d77\u52d5\n    Intent launchIntent = new Intent(this, OtherActivity.class);\n    startActivityForResult(launchIntent, REQUEST)\n        // \u2461 \u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\n        .filter(result -> result.requestCode == RESULT_OK)\n        .subscribe(result -> {\n            final Intent data = result.data;\n            // \u2462 \u4f55\u304b\u3059\u308b\n        })\n}\n\nOtherActivity \u3092\u8d77\u52d5\u3057\u3066\u3001\u7d50\u679c\u304cOK\u3060\u3063\u305f\u3089\u30c7\u30fc\u30bf\u304b\u3089\u5024\u3092\u53d6\u308a\u51fa\u3057\u3066\u4f55\u304b\u3059\u308b\u3068\u3044\u3046\u51e6\u7406\u304c\u3001RxJava\u3092\u4f7f\u3046\u3053\u3068\u3067\u975e\u5e38\u306b\u3059\u3063\u304d\u308a\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30c8\u30c3\u30d7\u30c0\u30a6\u30f3\u3067\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u304cRxJava\u3082\u3068\u3044\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u3044\u3044\u3068\u3053\u308d\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u3044\u65b9\n\u3053\u308c\u3092\u8e0f\u307e\u3048\u4f5c\u6210\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001\u4e0a\u8a18\u306e\u6a5f\u80fd\u3092\u5c11\u3057\u62e1\u5f35\u3057\u305f\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\u4ed6\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u958b\u59cb\u3001\u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u306f\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u4ee5\u5916\u306b\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u3082\u53ef\u80fd\u3067\u3059\u3002\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u8d77\u52d5\u5143\u306b\u3069\u308c\u304c\u304d\u3066\u3082\u5927\u4e08\u592b\u306a\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\npublic class MainActivity extends Activity {\n    // \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30e1\u30a4\u30f3\u3068\u306a\u308b\u30af\u30e9\u30b9\u3067\u3001\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u958b\u59cb\u3001Observable\u306e\u751f\u6210\u3092\u884c\u3046\n    private RxActivityLauncher mLauncher;\n\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        mLauncher = RxActivityLauncher.from(this);\n    }\n\n    // \u4f7f\u3044\u65b9\u306f\u540c\u3058\u3067\u3059\n    private void startOtherActivityUsingRxJava() {\n        Intent launchIntent = new Intent(this, OtherActivity.class);\n        mLauncher.startActivityForResult(launchIntent, REQUEST)\n                 .filter(result -> result.requestCode == RESULT_OK)\n                 .subscribe(result -> {\n                     final Intent data = result.data;\n                     // \u4f55\u304b\u3059\u308b\n                 })\n    }   \n}\n\n// or\n\npublic class MainFragment extends Fragment {\n    private RxActivityLauncher mLauncher;\n\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        // \u3053\u308c\u3082OK\n        mLauncher = RxActivityLauncher.from(this);\n    }\n}\n\n\u307e\u305f\u6697\u9ed9\u30a4\u30f3\u30c6\u30f3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001ActivityNotFoundException \u3084 SecurityException \u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u6642\u3082\u3001\nprivate void startActivityThenOccurException() {\n    Intent intent = new Intent(NOT_EXIST_ACTION);\n    mLauncher.startActivityForResult(intent, REQUEST)\n             .subscribe(new Observer<ActivityResult>() {\n                  @Override public void onCompleted() {}\n\n                  @Override public void onError(Throwable e) {\n                      // \u30a8\u30e9\u30fc\u51e6\u7406\n                  }\n\n                  @Override public void onNext(ActivityResult result) {\n                      // \u4f55\u304b\u3059\u308b\n                  }\n            });        \n}\n\nsubscribe\u3059\u308b\u969b\u306bObserver\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30eb\u3082\u884c\u3048\u307e\u3059\u3002\n\u672c\u5f53\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306a\u51e6\u7406\u3060\u3051\u3067\u5b8c\u7d50\u3059\u308c\u3070\u826f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u4f5c\u6210\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u306f\u7d50\u5c40\u3001onActivityResult \u304c\u51fa\u3066\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u4eca\u5f8c\u306e\u8ab2\u984c\u3067\u3059\u3002\npublic class MainActivity extends Activity {\n    private RxActivityLauncher mLauncher;\n\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        mLauncher = RxActivityLauncher.from(this);\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        // \u3042\u307e\u308a\u30a4\u30b1\u3066\u306a\u3044\u3002\u3002\u547c\u3076\u306e\u5fd8\u308c\u308b\u304b\u3082\u3002\u3002\u3002\n        mLauncher.onActivityResult(requestCode, resultCode, data);\n    }\n\n    private void startOtherActivityUsingRxJava() {\n    }\n}\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5b9f\u88c5\n\u5c0f\u3055\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u306e\u3067\u30dd\u30a4\u30f3\u30c8\u306f\u5c11\u306a\u3044\u3067\u3059\u304c\u3001\u3053\u306e\u3088\u3046\u306a\u51e6\u7406\u304c\u6563\u5728\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3092\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3067\u89e3\u6c7a\u3059\u308b\u5834\u5408\u306f\u3001 Subject \u3092\u4f7f\u3046\u3068\u3044\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\uff08Subject\u306fObservable\u3067\u3042\u308a\u3001Observer\u3067\u3082\u3042\u308b\u30af\u30e9\u30b9\u3067\u3059\uff09\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5b9f\u88c5\u306e\u30e1\u30a4\u30f3\u90e8\u5206\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\npublic Observable<ActivityResult> startActivityForResult(Intent intent, int requestCode, Bundle options) {\n    // \u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u958b\u59cb\uff08\u7701\u7565\uff09\n    return makeSubject(requestCode);\n}\n\nprivate Observable<ActivityResult> makeSubject(int requestCode) {\n    PublishSubject<ActivityResult> subject = mSubjects.get(requestCode);\n    if (subject == null) {\n        subject = PublishSubject.create();\n        mSubjects.put(requestCode, subject);\n    }\n    return subject;\n}\n\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n    // \u4ed6\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u304b\u3089\u306e\u7d50\u679c\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u305d\u306e\u307e\u307e\u6d41\u3059\n    final PublishSubject<ActivityResult> subject = mSubjects.get(requestCode);\n    if (subject == null) {\n        return;\n    }\n    subject.onNext(new ActivityResult(resultCode, data));\n    subject.onCompleted();\n    // \u5b8c\u4e86\u3057\u305f\u3089\u5fc5\u8981\u306a\u304f\u306a\u308b\u306e\u3067\u524a\u9664\n    mSubjects.remove(requestCode);\n}\n\n#onActivityResult \u304b\u3089\u3082\u3089\u3063\u305f\u7d50\u679c\u60c5\u5831\u3092Observer\u3078\u5782\u308c\u6d41\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\u3053\u306e\u3088\u3046\u306b\u30ed\u30b8\u30c3\u30af\u3068\u3044\u3046\u307b\u3069\u306e\u3082\u306e\u304c\u307b\u307c\u306a\u3044\u5834\u5408\u3001Subject\u3060\u3051\u3067\u5b8c\u7d50\u3067\u304d\u308b\u306e\u3067\u3001\u7c21\u5358\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u3082\u3046\u4e00\u3064\u306e\u8ab2\u984c\u3068\u3057\u3066\u3001unsubscribe\u3092\u30b9\u30de\u30fc\u30c8\u306b\u3067\u304d\u305f\u3089\u306a\u30fc\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\uff08\u3067\u304d\u308c\u3070\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u3067\u306a\u3093\u3068\u304b\u3057\u305f\u3044\u3002RxLifeCycle\u4f7f\u3048\u3070\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u7d99\u627f\u3092\u5897\u3084\u3057\u306a\u304f\u306a\u3044\u3002\u3002\u3002\uff09\n\u4ee5\u4e0a\u3001RxJava\u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u65b9\u306b\u3082RxJava\u306e\u4fbf\u5229\u3055\u304c\u5c11\u3057\u3067\u3082\u4f1d\u308f\u308c\u3070\u3068\u601d\u3044\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\nWritten with StackEdit.\n\n\n[RxJava](https://github.com/ReactiveX/RxJava)\u3092Android\u306e\u958b\u767a\u306b\u53d6\u308a\u8fbc\u307f\u305f\u304f\u52c9\u5f37\u3057\u3066\u304a\u308a\u3001\u305d\u306e\u6210\u679c\u7b2c\u4e00\u5f3e\u3068\u3057\u3066 `Activity#onActivityResult(int, int, Bundle)` \u306e\u7169\u308f\u3057\u3055\u3092\u89e3\u6d88\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u958b\u59cb\u3068\u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\u3068\u3053\u308d\u304c\u5206\u304b\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u884c\u3063\u305f\u308a\u304d\u305f\u308a\u3057\u306a\u3051\u308c\u3044\u3051\u306a\u3044\u306e\u3067\u6b63\u76f4\u3081\u3093\u3069\u304f\u3055\u3044\u3068\u611f\u3058\u3066\u307e\u3057\u305f('A`)\n\n\u305d\u3093\u306a\u304a\u308a\u3001RxJava\u3092\u52c9\u5f37\u3057\u59cb\u3081\u3001[RxPermissions](https://github.com/tbruyelle/RxPermissions) \u3068\u3044\u3046Android6.0 \u3088\u308a\u5c0e\u5165\u3055\u308c\u305f\u65b0\u3057\u3044\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u30e2\u30c7\u30eb\u306e\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u51fa\u4f1a\u3044\u307e\u3057\u305f\u3002\nRxJava\u306e\u52c9\u5f37\u3092\u517c\u306d\u3066\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\uff08\u30af\u30e9\u30b9\u304c3\u3064\u3060\u3051\u306a\u306e\u3067\u975e\u5e38\u306b\u8aad\u307f\u3084\u3059\u3044\uff09\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u540c\u3058\u3088\u3046\u306a\u4ed5\u7d44\u307f\u3067 `onActivityResult` \u3082\u697d\u306b\u66f8\u3051\u308b\u3058\u3083\u306d\u3068\u3044\u3046\u3053\u3068\u3067\u5b9f\u969b\u306b\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306fGitHub\u306b\u3042\u308a\u307e\u3059\u306e\u3067\u3088\u3051\u308c\u3070\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n* [RxActivityLauncher](https://github.com/droibit/rxactivitylauncher)\n\n## Activity#onActivityResult\u306e\u9762\u5012\u304f\u3055\u3044\u3068\u3053\u308d\n\n\u3053\u306e `onActivityResult` \u304c\u51fa\u3066\u304f\u308b\u5834\u9762\u3068\u3044\u3048\u3070\u3001\u4ed6\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u8d77\u52d5\u3057\u3066\u3001\u305d\u306e\u7d50\u679c\u3092\u3046\u3051\u3068\u308b\u6642\u3067\u3059\u306d\u3002\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```java\n\npublic class MainActivity extends Activity {\n\n    private static final int REQUEST = 1;\n\n    // \u2461 \u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        if (requestCode == REQUEST && resultCode == RESULT_OK) {\n            onReceiveResult(data);\n        }\n    }\n\n    // \u2460 \u5225\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u8d77\u52d5\n    private void startOtherActivity() {\n        Intent launchIntent = new Intent(this, OtherActivity.class);\n        startActivityForResult(launchIntent, REQUEST);\n    }\n\n    // \u2462 \u7d50\u679c\u3092\u53d7\u3051\u53d6\u3063\u3066\u4f55\u304b\u3059\u308b\n    private void onReceiveResult(Intent data) {\n    }\n}\n```\n\n\u30a2\u30af\u30c6\u30a3\u306e\u958b\u59cb\u3068\u7d50\u679c\u306e\u53d7\u3051\u53d6\u308a\u306e\u51e6\u7406\u304c\u6563\u5728\u3057\u3066\u3057\u307e\u3044\u3001\u898b\u901a\u3057\u304c\u60aa\u3044\u3067\u3059\u3002\u305d\u3093\u306a\u6642\u3001RxJava\u3092\u4f7f\u3046\u3053\u3068\u3067\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n## RxJava\u306e\u5c0e\u5165\n\n\u203b RxJava\u3068\u306f\u3001\u3068\u3044\u3046\u90e8\u5206\u306a\u5272\u611b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\n\nRxJava\u3092\u5c0e\u5165\u3059\u308b\u3053\u3068\u3067\u3001\u30a2\u30af\u30c6\u30a3\u306e\u958b\u59cb~\u7d50\u679c\u306e\u53d7\u3051\u53d6\u308a\u306e\u6642\u9593\u306e\u6d41\u308c\u306b\u6cbf\u3063\u305f\u5f62\u3067\u51e6\u7406\u3092\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4e0a\u8a18\u306e\u4f8b\u3092\u66f8\u304d\u306a\u304a\u3057\u3066\u307f\u308b\u3068\u3001\n\n```java\n// \u203b \u51e6\u7406\u306e\u30a4\u30e1\u30fc\u30b8\u3067\u3059\nprivate void startOtherActivityUsingRxJava() {\n\t// \u2460 \u5225\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u8d77\u52d5\n    Intent launchIntent = new Intent(this, OtherActivity.class);\n    startActivityForResult(launchIntent, REQUEST)\n\t    // \u2461 \u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\n        .filter(result -> result.requestCode == RESULT_OK)\n        .subscribe(result -> {\n            final Intent data = result.data;\n            // \u2462 \u4f55\u304b\u3059\u308b\n        })\n}\n```\n\n`OtherActivity` \u3092\u8d77\u52d5\u3057\u3066\u3001\u7d50\u679c\u304cOK\u3060\u3063\u305f\u3089\u30c7\u30fc\u30bf\u304b\u3089\u5024\u3092\u53d6\u308a\u51fa\u3057\u3066\u4f55\u304b\u3059\u308b\u3068\u3044\u3046\u51e6\u7406\u304c\u3001RxJava\u3092\u4f7f\u3046\u3053\u3068\u3067\u975e\u5e38\u306b\u3059\u3063\u304d\u308a\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30c8\u30c3\u30d7\u30c0\u30a6\u30f3\u3067\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u304cRxJava\u3082\u3068\u3044\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u3044\u3044\u3068\u3053\u308d\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n## \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u3044\u65b9\n\n\u3053\u308c\u3092\u8e0f\u307e\u3048\u4f5c\u6210\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001\u4e0a\u8a18\u306e\u6a5f\u80fd\u3092\u5c11\u3057\u62e1\u5f35\u3057\u305f\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4ed6\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u3092\u958b\u59cb\u3001\u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u306f\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u4ee5\u5916\u306b\u30d5\u30e9\u30b0\u30e1\u30f3\u30c8\u3082\u53ef\u80fd\u3067\u3059\u3002\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u8d77\u52d5\u5143\u306b\u3069\u308c\u304c\u304d\u3066\u3082\u5927\u4e08\u592b\u306a\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```java\npublic class MainActivity extends Activity {\n    // \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30e1\u30a4\u30f3\u3068\u306a\u308b\u30af\u30e9\u30b9\u3067\u3001\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u958b\u59cb\u3001Observable\u306e\u751f\u6210\u3092\u884c\u3046\n    private RxActivityLauncher mLauncher;\n    \n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n\t\tmLauncher = RxActivityLauncher.from(this);\n    }\n\n\t// \u4f7f\u3044\u65b9\u306f\u540c\u3058\u3067\u3059\n    private void startOtherActivityUsingRxJava() {\n        Intent launchIntent = new Intent(this, OtherActivity.class);\n        mLauncher.startActivityForResult(launchIntent, REQUEST)\n                 .filter(result -> result.requestCode == RESULT_OK)\n                 .subscribe(result -> {\n                     final Intent data = result.data;\n                     // \u4f55\u304b\u3059\u308b\n                 })\n    }\t\n}\n\n// or\n\npublic class MainFragment extends Fragment {\n    private RxActivityLauncher mLauncher;\n    \n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        // \u3053\u308c\u3082OK\n\t\tmLauncher = RxActivityLauncher.from(this);\n    }\n}\n```\n\n\u307e\u305f\u6697\u9ed9\u30a4\u30f3\u30c6\u30f3\u30c8\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u3001`ActivityNotFoundException` \u3084 `SecurityException` \u304c\u767a\u751f\u3059\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u3093\u306a\u6642\u3082\u3001\n\n```java\nprivate void startActivityThenOccurException() {\n    Intent intent = new Intent(NOT_EXIST_ACTION);\n    mLauncher.startActivityForResult(intent, REQUEST)\n             .subscribe(new Observer<ActivityResult>() {\n                  @Override public void onCompleted() {}\n\n                  @Override public void onError(Throwable e) {\n                      // \u30a8\u30e9\u30fc\u51e6\u7406\n                  }\n\n                  @Override public void onNext(ActivityResult result) {\n                      // \u4f55\u304b\u3059\u308b\n                  }\n            });        \n}\n```\n\nsubscribe\u3059\u308b\u969b\u306bObserver\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30a8\u30e9\u30fc\u30cf\u30f3\u30c9\u30eb\u3082\u884c\u3048\u307e\u3059\u3002\n\n\u672c\u5f53\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306a\u51e6\u7406\u3060\u3051\u3067\u5b8c\u7d50\u3059\u308c\u3070\u826f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u4f5c\u6210\u3057\u305f\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u306f\u7d50\u5c40\u3001`onActivityResult` \u304c\u51fa\u3066\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u4eca\u5f8c\u306e\u8ab2\u984c\u3067\u3059\u3002\n\n```java\npublic class MainActivity extends Activity {\n    private RxActivityLauncher mLauncher;\n    \n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        mLauncher = RxActivityLauncher.from(this);\n    }\n\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        // \u3042\u307e\u308a\u30a4\u30b1\u3066\u306a\u3044\u3002\u3002\u547c\u3076\u306e\u5fd8\u308c\u308b\u304b\u3082\u3002\u3002\u3002\n        mLauncher.onActivityResult(requestCode, resultCode, data);\n    }\n\n\tprivate void startOtherActivityUsingRxJava() {\n\t}\n}\n```\n\n\n### \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5b9f\u88c5\n\n\u5c0f\u3055\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u306e\u3067\u30dd\u30a4\u30f3\u30c8\u306f\u5c11\u306a\u3044\u3067\u3059\u304c\u3001\u3053\u306e\u3088\u3046\u306a\u51e6\u7406\u304c\u6563\u5728\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3092\u30ea\u30a2\u30af\u30c6\u30a3\u30d6\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3067\u89e3\u6c7a\u3059\u308b\u5834\u5408\u306f\u3001 **Subject** \u3092\u4f7f\u3046\u3068\u3044\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\uff08Subject\u306fObservable\u3067\u3042\u308a\u3001Observer\u3067\u3082\u3042\u308b\u30af\u30e9\u30b9\u3067\u3059\uff09\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u5b9f\u88c5\u306e\u30e1\u30a4\u30f3\u90e8\u5206\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```java\npublic Observable<ActivityResult> startActivityForResult(Intent intent, int requestCode, Bundle options) {\n    // \u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u306e\u958b\u59cb\uff08\u7701\u7565\uff09\n    return makeSubject(requestCode);\n}\n\nprivate Observable<ActivityResult> makeSubject(int requestCode) {\n    PublishSubject<ActivityResult> subject = mSubjects.get(requestCode);\n    if (subject == null) {\n        subject = PublishSubject.create();\n        mSubjects.put(requestCode, subject);\n    }\n    return subject;\n}\n\npublic void onActivityResult(int requestCode, int resultCode, Intent data) {\n\t// \u4ed6\u306e\u30a2\u30af\u30c6\u30a3\u30d3\u30c6\u30a3\u304b\u3089\u306e\u7d50\u679c\u3092\u53d7\u3051\u53d6\u3063\u305f\u3089\u305d\u306e\u307e\u307e\u6d41\u3059\n    final PublishSubject<ActivityResult> subject = mSubjects.get(requestCode);\n    if (subject == null) {\n        return;\n    }\n    subject.onNext(new ActivityResult(resultCode, data));\n    subject.onCompleted();\n    // \u5b8c\u4e86\u3057\u305f\u3089\u5fc5\u8981\u306a\u304f\u306a\u308b\u306e\u3067\u524a\u9664\n    mSubjects.remove(requestCode);\n}\n```\n\n`#onActivityResult` \u304b\u3089\u3082\u3089\u3063\u305f\u7d50\u679c\u60c5\u5831\u3092Observer\u3078\u5782\u308c\u6d41\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\u3053\u306e\u3088\u3046\u306b\u30ed\u30b8\u30c3\u30af\u3068\u3044\u3046\u307b\u3069\u306e\u3082\u306e\u304c\u307b\u307c\u306a\u3044\u5834\u5408\u3001Subject\u3060\u3051\u3067\u5b8c\u7d50\u3067\u304d\u308b\u306e\u3067\u3001\u7c21\u5358\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u3082\u3046\u4e00\u3064\u306e\u8ab2\u984c\u3068\u3057\u3066\u3001unsubscribe\u3092\u30b9\u30de\u30fc\u30c8\u306b\u3067\u304d\u305f\u3089\u306a\u30fc\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\n\uff08\u3067\u304d\u308c\u3070\u30e9\u30a4\u30d6\u30e9\u30ea\u5074\u3067\u306a\u3093\u3068\u304b\u3057\u305f\u3044\u3002RxLifeCycle\u4f7f\u3048\u3070\u3044\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u7d99\u627f\u3092\u5897\u3084\u3057\u306a\u304f\u306a\u3044\u3002\u3002\u3002\uff09\n\n\u4ee5\u4e0a\u3001RxJava\u3092\u4f7f\u3063\u305f\u3053\u3068\u304c\u306a\u3044\u65b9\u306b\u3082RxJava\u306e\u4fbf\u5229\u3055\u304c\u5c11\u3057\u3067\u3082\u4f1d\u308f\u308c\u3070\u3068\u601d\u3044\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\n\n> Written with [StackEdit](https://stackedit.io/).\n", "tags": ["Android", "RxJava"]}