{"context": "\n\nBotkit\nSlack\u7528\u306eBot\u3092\u7c21\u5358\u306b\u4f5c\u308b\u305f\u3081\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\nhttps://github.com/howdyai/botkit\n\n\u96d1\u8ac7\u5bfe\u8a71API\ndocomo\u304c\u516c\u958b\u3057\u3066\u3044\u308b\u3001\u30e6\u30fc\u30b6\u304c\u5165\u529b\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u3092\u53d7\u3051\u4ed8\u3051\u3001\u305d\u306e\u5165\u529b\u306b\u5bfe\u3057\u3066\u81ea\u7136\u306a\u4f1a\u8a71\u3068\u306a\u308b\u96d1\u8ac7\u3092\u63d0\u4f9b\u3059\u308b\nhttps://dev.smt.docomo.ne.jp/?p=docs.api.page&api_name=dialogue&p_name=api_usage_scenario\n\nSlack\u306eBot\u306e\u8ffd\u52a0\n\u4ee5\u4e0b\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066Bot\u3092\u4f5c\u6210\u3059\u308b\nhttps://my.slack.com/services/new/bot\n\n\n\u203bAPI token\u4ee5\u5916\u306f\u5fc5\u8981\u306a\u90e8\u5206\u3092\u5909\u66f4\u3059\u308b\n\ndocomo Developer support\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\n\u4ee5\u4e0bURL\u304b\u3089\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b\nhttps://dev.smt.docomo.ne.jp/?p=login\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u53d6\u5f97\u5f8c\u3001\u30de\u30a4\u30da\u30fc\u30b8\u304b\u3089 \u65b0\u898fAPI\u5229\u7528\u7533\u8acb \u3092\u884c\u3046\u3002\n\n API\u6a5f\u80fd\u9078\u629e \u3067 \u96d1\u8ac7\u5bfe\u8a71 \u3092\u9078\u629e\u3059\u308b\n\u7533\u8acb\u3057\u305f \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u60c5\u5831 \u304b\u3089 API key \u3092\u53d6\u5f97\u3059\u308b\n\n\nnode\u74b0\u5883\u306e\u69cb\u7bc9\nnode\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\n\u203b\u65e2\u306bnode\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u98db\u3070\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nyum install epel-release\nyum install nodejs npm --enablerepo=epel\n\n\nBotkit\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngit clone https://github.com/howdyai/botkit.git\ncd botkit\nnpm install\n\n\nBotkit\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u4f5c\u3055\u305b\u308b\ntoken=[Slack Bot\u7528\u306eAPI Token] node slack_bot.js\n\n\n\u9069\u5f53\u306a\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u4f5c\u6210\u3057\u305fBot\u3092\u62db\u5f85\u3059\u308b\n@\u4f5c\u6210\u3057\u305fbot\u540d hello\n\nHello. \u3068\u8fd4\u3057\u3066\u304f\u308c\u308c\u3070\u6210\u529f\n\n\n\u96d1\u8ac7\u5bfe\u8a71API\u3092\u7d44\u307f\u8fbc\u3093\u3060js\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\nif (!process.env.token) {\n    console.log('Error: Specify token in environment');\n    process.exit(1);\n}\n\nvar Botkit = require('./lib/Botkit.js');\nvar request = require('request');\n\nvar controller = Botkit.slackbot({\n    debug: false\n});\n\nvar bot = controller.spawn({\n    token: process.env.token\n}).startRTM();\n\n\nvar context = '';\nvar mode = 'dialog';\nvar place = '\u798f\u5ca1';\n\ncontroller.hears('', 'direct_message,direct_mention,mention', function(bot, message) {\n\n    var options = {\n        url: 'https://api.apigw.smt.docomo.ne.jp/dialogue/v1/dialogue?APIKEY={docomo\u96d1\u8ac7\u5bfe\u8a71API key\u3092\u6307\u5b9a\u3059\u308b}',\n        json: {\n            utt: message.text,\n            place: place,\n\n            // \u4ee5\u4e0b2\u884c\u306f\u3057\u308a\u3068\u308a\u4ee5\u5916\u306e\u4f1a\u8a71\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3044\u3044\u304b\u3082\n            // \u4f1a\u8a71\u3092\u7d99\u7d9a\u3057\u3066\u3044\u308b\u304b\u306e\u60c5\u5831\n            context: context,\n            mode: mode\n        }\n    }\n\n    //\u30ea\u30af\u30a8\u30b9\u30c8\u9001\u4fe1\n    request.post(options, function (error, response, body) {\n        context = body.context;\n        mode = body.mode;\n\n        bot.reply(message, body.utt);\n    })\n\n});\n\n\n\u5b9f\u884c\u3059\u308b\ntoken=[Slack Bot\u7528\u306eAPI Token] node docomo.js\n\n\u4ee5\u4e0b\u30012\u3064\u306e\u3069\u3061\u3089\u304b\u3067\u4f1a\u8a71\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\n\n\u9069\u5f53\u306b @\u4f5c\u6210\u3057\u305fbot\u540d \u9069\u5f53\u306a\u4f1a\u8a71 \u3067\u4f1a\u8a71\u3092\u3059\u308b\n\u300c@\u4f5c\u6210\u3057\u305fbot\u540d \u3057\u308a\u3068\u308a\u300d\u3068\u5b9f\u884c\u3059\u308b\u3068\u3057\u308a\u3068\u308a\u3092\u884c\u3048\u308b(\u3084\u308a\u53d6\u308a\u4e2d\u3082@\u30dc\u30c3\u30c8\u540d\u304c\u5fc5\u8981)\n\n## Botkit\n\nSlack\u7528\u306eBot\u3092\u7c21\u5358\u306b\u4f5c\u308b\u305f\u3081\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af  \nhttps://github.com/howdyai/botkit\n\n\n## \u96d1\u8ac7\u5bfe\u8a71API\n\ndocomo\u304c\u516c\u958b\u3057\u3066\u3044\u308b\u3001\u30e6\u30fc\u30b6\u304c\u5165\u529b\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u3092\u53d7\u3051\u4ed8\u3051\u3001\u305d\u306e\u5165\u529b\u306b\u5bfe\u3057\u3066\u81ea\u7136\u306a\u4f1a\u8a71\u3068\u306a\u308b\u96d1\u8ac7\u3092\u63d0\u4f9b\u3059\u308b  \nhttps://dev.smt.docomo.ne.jp/?p=docs.api.page&api_name=dialogue&p_name=api_usage_scenario\n\n## Slack\u306eBot\u306e\u8ffd\u52a0\n\n\u4ee5\u4e0b\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066Bot\u3092\u4f5c\u6210\u3059\u308b\n\nhttps://my.slack.com/services/new/bot\n\n![2016-04-24_23h57_05.png](https://qiita-image-store.s3.amazonaws.com/0/49429/6013a658-a243-684b-1ad5-bf0effc4d486.png)\n\n![2016-04-24_23h59_29.png](https://qiita-image-store.s3.amazonaws.com/0/49429/42a20117-f3b0-4448-f5d4-a1c51827ce73.png)\n\n\u203bAPI token\u4ee5\u5916\u306f\u5fc5\u8981\u306a\u90e8\u5206\u3092\u5909\u66f4\u3059\u308b\n\n## docomo Developer support\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u4f5c\u6210\n\n\u4ee5\u4e0bURL\u304b\u3089\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\nhttps://dev.smt.docomo.ne.jp/?p=login\n\n1. \u30a2\u30ab\u30a6\u30f3\u30c8\u53d6\u5f97\u5f8c\u3001\u30de\u30a4\u30da\u30fc\u30b8\u304b\u3089 `\u65b0\u898fAPI\u5229\u7528\u7533\u8acb` \u3092\u884c\u3046\u3002  \n2.  `API\u6a5f\u80fd\u9078\u629e` \u3067 `\u96d1\u8ac7\u5bfe\u8a71` \u3092\u9078\u629e\u3059\u308b\n3. \u7533\u8acb\u3057\u305f `\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u60c5\u5831` \u304b\u3089 `API key` \u3092\u53d6\u5f97\u3059\u308b\n\n## node\u74b0\u5883\u306e\u69cb\u7bc9\n\nnode\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002  \n\u203b\u65e2\u306bnode\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u98db\u3070\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nyum install epel-release\nyum install nodejs npm --enablerepo=epel\n```\n\n## Botkit\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ngit clone https://github.com/howdyai/botkit.git\ncd botkit\nnpm install\n```\n\n## Botkit\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u4f5c\u3055\u305b\u308b\n\n```\ntoken=[Slack Bot\u7528\u306eAPI Token] node slack_bot.js\n```\n\n1. \u9069\u5f53\u306a\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u4f5c\u6210\u3057\u305fBot\u3092\u62db\u5f85\u3059\u308b\n2. `@\u4f5c\u6210\u3057\u305fbot\u540d hello`\n3. `Hello.` \u3068\u8fd4\u3057\u3066\u304f\u308c\u308c\u3070\u6210\u529f\n\n## \u96d1\u8ac7\u5bfe\u8a71API\u3092\u7d44\u307f\u8fbc\u3093\u3060js\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\n```\nif (!process.env.token) {\n    console.log('Error: Specify token in environment');\n    process.exit(1);\n}\n\nvar Botkit = require('./lib/Botkit.js');\nvar request = require('request');\n\nvar controller = Botkit.slackbot({\n    debug: false\n});\n\nvar bot = controller.spawn({\n    token: process.env.token\n}).startRTM();\n\n\nvar context = '';\nvar mode = 'dialog';\nvar place = '\u798f\u5ca1';\n\ncontroller.hears('', 'direct_message,direct_mention,mention', function(bot, message) {\n\n    var options = {\n        url: 'https://api.apigw.smt.docomo.ne.jp/dialogue/v1/dialogue?APIKEY={docomo\u96d1\u8ac7\u5bfe\u8a71API key\u3092\u6307\u5b9a\u3059\u308b}',\n        json: {\n            utt: message.text,\n            place: place,\n\n            // \u4ee5\u4e0b2\u884c\u306f\u3057\u308a\u3068\u308a\u4ee5\u5916\u306e\u4f1a\u8a71\u306f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3044\u3044\u304b\u3082\n            // \u4f1a\u8a71\u3092\u7d99\u7d9a\u3057\u3066\u3044\u308b\u304b\u306e\u60c5\u5831\n            context: context,\n            mode: mode\n        }\n    }\n\n    //\u30ea\u30af\u30a8\u30b9\u30c8\u9001\u4fe1\n    request.post(options, function (error, response, body) {\n        context = body.context;\n        mode = body.mode;\n\n        bot.reply(message, body.utt);\n    })\n\n});\n```\n\n### \u5b9f\u884c\u3059\u308b\n\n```\ntoken=[Slack Bot\u7528\u306eAPI Token] node docomo.js\n```\n\n\u4ee5\u4e0b\u30012\u3064\u306e\u3069\u3061\u3089\u304b\u3067\u4f1a\u8a71\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\n\n1. \u9069\u5f53\u306b `@\u4f5c\u6210\u3057\u305fbot\u540d \u9069\u5f53\u306a\u4f1a\u8a71` \u3067\u4f1a\u8a71\u3092\u3059\u308b\n2. \u300c@\u4f5c\u6210\u3057\u305fbot\u540d \u3057\u308a\u3068\u308a\u300d\u3068\u5b9f\u884c\u3059\u308b\u3068\u3057\u308a\u3068\u308a\u3092\u884c\u3048\u308b(\u3084\u308a\u53d6\u308a\u4e2d\u3082@\u30dc\u30c3\u30c8\u540d\u304c\u5fc5\u8981)\n", "tags": ["Slack", "bot", "Botkit", "Node", "JavaScript"]}