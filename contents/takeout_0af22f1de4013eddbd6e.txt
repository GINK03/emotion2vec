{"context": "\n\n\u6982\u8981\n\u30fb\u30af\u30ea\u30c3\u30af\u3057\u305f\u3089\u81ea\u52d5\u7684\u306b\u7e2e\u5c0f\u30fb\u96e2\u3057\u305f\u3089\u62e1\u5927\n\u30fb\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u304c\u30b3\u30fc\u30c9\u304b\u3089\u8a2d\u5b9a\u3057\u3084\u3059\u3044\u3088\u3046\u306b\n\u30dc\u30bf\u30f3\u306e\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306bDotween\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nuGUI\u306eButton\u304c\u3042\u307e\u308a\u306b\u3082\u4f7f\u3044\u3065\u3089\u3044\u306e\u3067\u81ea\u5206\u3067\u3064\u304f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u6539\u826f\u7248\nhttp://qiita.com/takeout/items/d612ce8b30e3f16f78bc\n\n\u30bd\u30fc\u30b9\nUGUIButton.cs\n#if UNITY_EDITOR\nusing UnityEditor;\n#endif\nusing UnityEngine;\nusing UnityEngine.EventSystems;\nusing System;\nusing System.Collections;\nusing DG.Tweening;\n\n/// <summary>\n/// UGUI\u30dc\u30bf\u30f3\n/// </summary>\n\n\n#if UNITY_EDITOR\n    [InitializeOnLoad]\n#endif\n    [RequireComponent(typeof(EventTrigger))]\n    public class UGUIButton : UIBehaviour\n    {\n        /// \n        /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n        /// \n        public UGUIButton()\n        {\n#if UNITY_EDITOR\n            // \u30a8\u30c7\u30a3\u30bf\u66f4\u65b0\u6642\u306b\u81ea\u52d5\u3067\u30c8\u30ea\u30ac\u30fc\u3092\u5272\u308a\u5f53\u3066\u308b\n            EditorApplication.update = () =>\n            {\n                AutoAttach();\n                EditorApplication.update = null;\n            };\n#endif\n        }\n\n#if UNITY_EDITOR\n        /// \n        /// \u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30ac\u30fc\u3092\u898b\u3064\u3051\u3066\u5272\u308a\u5f53\u3066\u308b\n        /// \n        private void AutoAttach()\n        {\n            if (_trigger == null)\n            {\n                Debug.Log(\"\u30c8\u30ea\u30ac\u30fc\u3092\u81ea\u52d5\u8a2d\u5b9a\u3057\u307e\u3057\u305f\",this);\n                _trigger = GetComponent<EventTrigger>();\n            }\n        }\n#endif\n\n    /// <summary>\n    /// \u30c8\u30ea\u30ac\u30fc\n    /// </summary>\n    [SerializeField,Header(\"\u30c8\u30ea\u30ac\u30fc\u306f\u81ea\u52d5\u3067\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\")]\n    private EventTrigger _trigger;\n\n    /// <summary>\n    /// \u62e1\u5927\u3059\u308b\u304b\u3069\u3046\u304b\n    /// </summary>\n    [SerializeField]\n    private bool _isScalable = true;\n\n    /// <summary>\n    /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304b\u3069\u3046\u304b\n    /// </summary>\n    [SerializeField]\n    private bool _isDisable;\n\n    /// <summary>\n    /// \u62bc\u305b\u308b\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n    /// null\u8a31\u5bb9\n    /// </summary>\n    [SerializeField]\n    private GameObject _enableRoot;\n\n    /// <summary>\n    /// \u62bc\u305b\u306a\u3044\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n    /// null\u8a31\u5bb9\n    /// </summary>\n    [SerializeField]\n    private GameObject _disableRoot;\n\n    /// <summary>\n    /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\u306e\u30ea\u30b9\u30ca\u30fc\n    /// </summary>\n    public Action OnClickedListener;\n\n    /// <summary>\n    /// \u62e1\u5927\u53ef\u80fd\u72b6\u614b\u3092\u8a2d\u5b9a\n    /// </summary>\n    public void SetScalable(bool isScalable)\n    {\n        _isScalable = isScalable;\n    }\n\n    /// <summary>\n    /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u3092\u8a2d\u5b9a\n    /// </summary>\n    public void SetDisable(bool isDisable)\n    {\n        _isDisable = isDisable;\n        OnDisableChanged(isDisable);\n    }\n\n    /// <summary>\n    /// \u751f\u6210\u76f4\u5f8c\u306e\u51e6\u7406\n    /// </summary>\n    protected override void Awake()\n    {\n        base.Awake();\n\n        var clickEntry = new EventTrigger.Entry();\n        clickEntry.eventID = EventTriggerType.PointerClick;\n        clickEntry.callback.AddListener((_) => OnClicked());\n        _trigger.triggers.Add(clickEntry);\n\n        var pointerDown = new EventTrigger.Entry();\n        pointerDown.eventID = EventTriggerType.PointerDown;\n        pointerDown.callback.AddListener((_) => OnPointerDown());\n        _trigger.triggers.Add(pointerDown);\n\n        var pointerUp = new EventTrigger.Entry();\n        pointerUp.eventID = EventTriggerType.PointerUp;\n        pointerUp.callback.AddListener((_) => OnPointerUp());\n        _trigger.triggers.Add(pointerUp);\n\n        OnDisableChanged(_isDisable);\n    }\n\n    /// <summary>\n    /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\n    /// </summary>\n    private void OnClicked()\n    {\n        if (_isDisable)\n        {\n            return;\n        }\n        SystemUtility.SafeCall(OnClickedListener);\n    }\n\n    /// <summary>\n    /// \u62bc\u3055\u308c\u305f\u6642\n    /// </summary>\n    private void OnPointerDown()\n    {\n        if (_isDisable)\n        {\n            return;\n        }\n        if (_isScalable)\n        {\n            transform.DOScale(new Vector3(0.9f, 0.9f, 0.9f), 0.1f);\n        }\n    }\n\n    /// <summary>\n    /// \u96e2\u3055\u308c\u305f\u6642\n    /// </summary>\n    private void OnPointerUp()\n    {\n        if (_isDisable)\n        {\n            return;\n        }\n        if (_isScalable)\n        {\n            transform.DOScale(Vector3.one, 0.1f);\n        }\n    }\n\n    /// <summary>\n    /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304c\u5909\u308f\u3063\u305f\u6642\n    /// </summary>\n    private void OnDisableChanged(bool isDisable)\n    {\n        if (_enableRoot == null || _disableRoot == null)\n        {\n            return;\n        }\n        _disableRoot.SetActive(isDisable);\n        _enableRoot.SetActive(!isDisable);\n    }\n}\n\n\n\n\u3053\u308c\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\n[SerializeField]\nUGUIButton button;\n\nbutton.OnClickedListener = () =>\n{\n    Debug.Log(\"\u304f\u308a\u3063\u304f\uff01\");\n};\n\n\u3068\u3044\u3046\u3075\u3046\u306b\u30b3\u30fc\u30c9\u304b\u3089\u3082\u7c21\u5358\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nRequiredCommponent\u3067\u81ea\u52d5\u8ffd\u52a0\u3055\u308c\u308bEventTrigger\u3092\u81ea\u52d5\u3067\u683c\u7d0d\u3057\u3066\u307b\u3057\u304b\u3063\u305f\u306e\u3067\u3001\nEditorApplication.update\u306b\u81ea\u52d5\u8ffd\u52a0\u306e\u51e6\u7406\u3092\u4ed5\u8fbc\u307f\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308aImage\u306bUGUIButton\u3092AddCommponent\u3057\u305f\u3089\u52dd\u624b\u306b\u5272\u308a\u5f53\u3066\u3066\u304f\u308c\u3066\u5b09\u3057\u3044\u3002\nhttp://anchan828.github.io/editor-manual/web/callbacks.html\n\n\u6ce8\u610f\u70b9\nScrollRect\u306b\u4ed5\u8fbc\u3080\u3068\u3001\u30c9\u30e9\u30c3\u30b0\u64cd\u4f5c\u307e\u3067\u5438\u53ce\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u30e9\u30a4\u30bb\u30f3\u30b9\n\u81ea\u7531\u306b\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\n# \u6982\u8981\n\u30fb\u30af\u30ea\u30c3\u30af\u3057\u305f\u3089\u81ea\u52d5\u7684\u306b\u7e2e\u5c0f\u30fb\u96e2\u3057\u305f\u3089\u62e1\u5927\n\u30fb\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u304c\u30b3\u30fc\u30c9\u304b\u3089\u8a2d\u5b9a\u3057\u3084\u3059\u3044\u3088\u3046\u306b\n\u30dc\u30bf\u30f3\u306e\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306bDotween\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nuGUI\u306eButton\u304c\u3042\u307e\u308a\u306b\u3082\u4f7f\u3044\u3065\u3089\u3044\u306e\u3067\u81ea\u5206\u3067\u3064\u304f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6539\u826f\u7248\nhttp://qiita.com/takeout/items/d612ce8b30e3f16f78bc\n\n#\u30bd\u30fc\u30b9\nUGUIButton.cs\n<pre><code>\\#if UNITY_EDITOR\nusing UnityEditor;\n\\#endif\nusing UnityEngine;\nusing UnityEngine.EventSystems;\nusing System;\nusing System.Collections;\nusing DG.Tweening;\n\n    /// <summary>\n    /// UGUI\u30dc\u30bf\u30f3\n    /// </summary>\n\\#if UNITY_EDITOR\n    [InitializeOnLoad]\n\\#endif\n    [RequireComponent(typeof(EventTrigger))]\n    public class UGUIButton : UIBehaviour\n    {\n        /// <summary>\n        /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n        /// </summary>\n        public UGUIButton()\n        {\n\\#if UNITY_EDITOR\n            // \u30a8\u30c7\u30a3\u30bf\u66f4\u65b0\u6642\u306b\u81ea\u52d5\u3067\u30c8\u30ea\u30ac\u30fc\u3092\u5272\u308a\u5f53\u3066\u308b\n            EditorApplication.update = () =>\n            {\n                AutoAttach();\n                EditorApplication.update = null;\n            };\n\\#endif\n        }\n\n\\#if UNITY_EDITOR\n        /// <summary>\n        /// \u81ea\u52d5\u7684\u306b\u30c8\u30ea\u30ac\u30fc\u3092\u898b\u3064\u3051\u3066\u5272\u308a\u5f53\u3066\u308b\n        /// </summary>\n        private void AutoAttach()\n        {\n            if (_trigger == null)\n            {\n                Debug.Log(\"\u30c8\u30ea\u30ac\u30fc\u3092\u81ea\u52d5\u8a2d\u5b9a\u3057\u307e\u3057\u305f\",this);\n                _trigger = GetComponent\\<EventTrigger\\>();\n            }\n        }\n\\#endif\n\n        /// <summary>\n        /// \u30c8\u30ea\u30ac\u30fc\n        /// </summary>\n        [SerializeField,Header(\"\u30c8\u30ea\u30ac\u30fc\u306f\u81ea\u52d5\u3067\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\")]\n        private EventTrigger _trigger;\n\n        /// <summary>\n        /// \u62e1\u5927\u3059\u308b\u304b\u3069\u3046\u304b\n        /// </summary>\n        [SerializeField]\n        private bool _isScalable = true;\n\n        /// <summary>\n        /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304b\u3069\u3046\u304b\n        /// </summary>\n        [SerializeField]\n        private bool _isDisable;\n\n        /// <summary>\n        /// \u62bc\u305b\u308b\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n        /// null\u8a31\u5bb9\n        /// </summary>\n        [SerializeField]\n        private GameObject _enableRoot;\n\n        /// <summary>\n        /// \u62bc\u305b\u306a\u3044\u72b6\u614b\u306e\u6642\u306e\u8868\u793a\u7269\n        /// null\u8a31\u5bb9\n        /// </summary>\n        [SerializeField]\n        private GameObject _disableRoot;\n\n        /// <summary>\n        /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\u306e\u30ea\u30b9\u30ca\u30fc\n        /// </summary>\n        public Action OnClickedListener;\n\n        /// <summary>\n        /// \u62e1\u5927\u53ef\u80fd\u72b6\u614b\u3092\u8a2d\u5b9a\n        /// </summary>\n        public void SetScalable(bool isScalable)\n        {\n            _isScalable = isScalable;\n        }\n\n        /// <summary>\n        /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u3092\u8a2d\u5b9a\n        /// </summary>\n        public void SetDisable(bool isDisable)\n        {\n            _isDisable = isDisable;\n            OnDisableChanged(isDisable);\n        }\n\n        /// <summary>\n        /// \u751f\u6210\u76f4\u5f8c\u306e\u51e6\u7406\n        /// </summary>\n        protected override void Awake()\n        {\n            base.Awake();\n\n            var clickEntry = new EventTrigger.Entry();\n            clickEntry.eventID = EventTriggerType.PointerClick;\n            clickEntry.callback.AddListener((_) => OnClicked());\n            _trigger.triggers.Add(clickEntry);\n\n            var pointerDown = new EventTrigger.Entry();\n            pointerDown.eventID = EventTriggerType.PointerDown;\n            pointerDown.callback.AddListener((_) => OnPointerDown());\n            _trigger.triggers.Add(pointerDown);\n\n            var pointerUp = new EventTrigger.Entry();\n            pointerUp.eventID = EventTriggerType.PointerUp;\n            pointerUp.callback.AddListener((_) => OnPointerUp());\n            _trigger.triggers.Add(pointerUp);\n\n            OnDisableChanged(_isDisable);\n        }\n\n        /// <summary>\n        /// \u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u6642\n        /// </summary>\n        private void OnClicked()\n        {\n            if (_isDisable)\n            {\n                return;\n            }\n            SystemUtility.SafeCall(OnClickedListener);\n        }\n\n        /// <summary>\n        /// \u62bc\u3055\u308c\u305f\u6642\n        /// </summary>\n        private void OnPointerDown()\n        {\n            if (_isDisable)\n            {\n                return;\n            }\n            if (_isScalable)\n            {\n                transform.DOScale(new Vector3(0.9f, 0.9f, 0.9f), 0.1f);\n            }\n        }\n\n        /// <summary>\n        /// \u96e2\u3055\u308c\u305f\u6642\n        /// </summary>\n        private void OnPointerUp()\n        {\n            if (_isDisable)\n            {\n                return;\n            }\n            if (_isScalable)\n            {\n                transform.DOScale(Vector3.one, 0.1f);\n            }\n        }\n\n        /// <summary>\n        /// \u30c7\u30a3\u30bb\u30fc\u30d6\u30eb\u72b6\u614b\u304c\u5909\u308f\u3063\u305f\u6642\n        /// </summary>\n        private void OnDisableChanged(bool isDisable)\n        {\n            if (_enableRoot == null || _disableRoot == null)\n            {\n                return;\n            }\n            _disableRoot.SetActive(isDisable);\n            _enableRoot.SetActive(!isDisable);\n        }\n    }\n</pre></code>\n\n\n\u3053\u308c\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\n\n<pre><code>[SerializeField]\nUGUIButton button;\n\nbutton.OnClickedListener = () =>\n{\n    Debug.Log(\"\u304f\u308a\u3063\u304f\uff01\");\n};\n</code></pre>\n\u3068\u3044\u3046\u3075\u3046\u306b\u30b3\u30fc\u30c9\u304b\u3089\u3082\u7c21\u5358\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nRequiredCommponent\u3067\u81ea\u52d5\u8ffd\u52a0\u3055\u308c\u308bEventTrigger\u3092\u81ea\u52d5\u3067\u683c\u7d0d\u3057\u3066\u307b\u3057\u304b\u3063\u305f\u306e\u3067\u3001\nEditorApplication.update\u306b\u81ea\u52d5\u8ffd\u52a0\u306e\u51e6\u7406\u3092\u4ed5\u8fbc\u307f\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308aImage\u306bUGUIButton\u3092AddCommponent\u3057\u305f\u3089\u52dd\u624b\u306b\u5272\u308a\u5f53\u3066\u3066\u304f\u308c\u3066\u5b09\u3057\u3044\u3002\nhttp://anchan828.github.io/editor-manual/web/callbacks.html\n\n#\u6ce8\u610f\u70b9\nScrollRect\u306b\u4ed5\u8fbc\u3080\u3068\u3001\u30c9\u30e9\u30c3\u30b0\u64cd\u4f5c\u307e\u3067\u5438\u53ce\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n#\u30e9\u30a4\u30bb\u30f3\u30b9\n\u81ea\u7531\u306b\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\n", "tags": ["Unity", "uGUI", "Unity2D"]}