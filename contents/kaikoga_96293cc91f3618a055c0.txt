{"tags": ["Haxe"], "context": " More than 1 year has passed since last update.\n\n\u8981\u7d04\nhaxe.ds.Option\u304c\u5168\u7136null\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u306a\u3044\u4ef6\u3002\n\nhaxe.ds.Option\u304cnull\u30c1\u30a7\u30c3\u30af\u306b\u4fbf\u5229\u3089\u3057\u3044\uff1f\nHaxe\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u4e0a\u3067\u907f\u3051\u3066\u901a\u308c\u306a\u3044\u306e\u304c\u3001null\u30c1\u30a7\u30c3\u30af\u554f\u984c\u3002\n\u305f\u3044\u3066\u3044\u306e\u5834\u5408\u5b9f\u884c\u6642\u306b\u51fa\u529b\u3055\u308c\u305f\u30a8\u30e9\u30fc\u304b\u3089null\u30c1\u30a7\u30c3\u30af\u5fd8\u308c\u306e\u5b58\u5728\u3092\u77e5\u308b\u306e\u3067\u3001\u3067\u304d\u308c\u3070\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306bnull\u30c1\u30a7\u30c3\u30af\u3092\u5fd8\u308c\u3066\u306a\u3044\u304b\u3069\u3046\u304b\u78ba\u304b\u3081\u305f\u3044\u3002\n\u3068\u3053\u308d\u3067\u3001Haxe\u306b\u306fhaxe.ds.Option\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308a\u3001\u4ed6\u306e\u8a00\u8a9e\u306b\u304a\u3051\u308b\u540c\u7a2e\u306e\u6a5f\u80fd\u306fnull\u30c1\u30a7\u30c3\u30af\u306a\u3069\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u3089\u3057\u3044\u3002\n\u5177\u4f53\u7684\u306b\u306f\u3001\u5024\u304c\u3042\u308b\u6642\u306fSome(s)\u3001\u5024\u304c\u306a\u3044\u6642\u306fNone\u3067\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3046\u3063\u304b\u308anull\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u3092\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3042\u308b\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u3055\u3063\u305d\u304f\u4f7f\u3063\u3066\u307f\u308b\u3002\n\nMain.hx\npackage;\n\nimport haxe.ds.Option;\n\nclass Main {\n\n    public static function main():Void {\n        new Main();\n    }\n\n    private var s:String;\n    public function new() {\n        var some:Option<String> = Some(s);\n        switch (some) {\n            case Some(s): trace(s.length);\n            case None: trace(\"null\");\n        }\n    }\n\n}\n\n\n\nMain.js\n(function () { \"use strict\";\nvar Main = function() {\n    var some = haxe.ds.Option.Some(this.s);\n    switch(some[1]) {\n    case 0:\n        var s = some[2];\n        console.log(s.length);\n        break;\n    case 1:\n        console.log(\"null\");\n        break;\n    }\n};\nMain.main = function() {\n    new Main();\n};\nvar haxe = {};\nhaxe.ds = {};\nhaxe.ds.Option = { __constructs__ : [\"Some\",\"None\"] };\nhaxe.ds.Option.Some = function(v) { var $x = [\"Some\",0,v]; $x.__enum__ = haxe.ds.Option; return $x; };\nhaxe.ds.Option.None = [\"None\",1];\nhaxe.ds.Option.None.__enum__ = haxe.ds.Option;\nMain.main();\n})();\n\n\n\nconsole.log\nUncaught TypeError: Cannot read property 'length' of undefined Main.js:7\n\n\n\u3042\u3063\u308c\u30fc\uff1f\n\u3064\u307e\u308a\u3053\u308c\u306f\u305d\u308c\u304b\u3001Some\u306e\u4e2d\u8eab\u304cundefined\u3060\u3063\u3066\u6012\u3089\u308c\u3066\u308b\u306e\u304b\u3002\n\u3069\u3046\u3084\u3089\u3001\u521d\u671f\u5024\u304c\u672a\u5b9a\u7fa9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570s\u3092Some\u306b\u7a81\u3063\u8fbc\u3093\u3067\u3057\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u3060\u3002JavaScript\u3060\u3068\u521d\u671f\u5024\u3092\u66f8\u304b\u306a\u3044\u3068undefined\u306b\u306a\u308b\u306e\u3067\u3001\u305f\u3076\u3093\u305d\u3046\u3044\u3046\u3053\u3068\u3060\u3002\n\u3057\u304b\u3082\u3088\u304f\u898b\u305f\u3089\u3001\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3059\u308b\u305f\u3073\u306bSome(s)\u3092\u4f5c\u3063\u3066\u308b\u3002\u3053\u308c\u306f\u7121\u99c4\u3063\u307d\u304f\u898b\u3048\u308b\u304b\u3089\u3001Option\u578b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u76f4\u63a5\u6301\u3063\u3066\u304a\u3053\u3046\u3002\n\u3064\u3044\u3067\u306bSome\u306bundefined\u3092\u7a81\u3063\u8fbc\u3093\u3067\u308b\u30b3\u30fc\u30c9\u3092\u307e\u308b\u3063\u3068\u524a\u9664\u3057\u3066\u3057\u307e\u3048\u3070\u6012\u3089\u308c\u306a\u3044\u306f\u305a\uff01\uff01\uff01\uff01\uff11\n\nMain.hx\npackage;\n\nimport haxe.ds.Option;\n\nclass Main {\n\n    public static function main():Void {\n        new Main();\n    }\n\n    private var option:Option<String>;\n    public function new() {\n        var option:Option<String> = option;\n        switch (option) {\n            case Some(s): trace(s.length);\n            case None: trace(\"null\");\n        }\n    }\n\n}\n\n\n\nMain.js\n(function () { \"use strict\";\nvar Main = function() {\n    var option = this.option;\n    switch(option[1]) {\n    case 0:\n        var s = option[2];\n        console.log(s.length);\n        break;\n    case 1:\n        console.log(\"null\");\n        break;\n    }\n};\nMain.main = function() {\n    new Main();\n};\nvar haxe = {};\nhaxe.ds = {};\nhaxe.ds.Option = { __constructs__ : [\"Some\",\"None\"] };\nhaxe.ds.Option.Some = function(v) { var $x = [\"Some\",0,v]; $x.__enum__ = haxe.ds.Option; return $x; };\nhaxe.ds.Option.None = [\"None\",1];\nhaxe.ds.Option.None.__enum__ = haxe.ds.Option;\nMain.main();\n})();\n\n\n\nconsole.log\nUncaught TypeError: Cannot read property '1' of undefined Main.js:4\n\n\n\u3072\u3048\u30fc\u3002\n\n\u4ed5\u65b9\u304c\u306a\u3044\u306e\u3067abstract\u3092\u4f7f\u3046\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001Haxe\u306ehaxe.ds.Option\u306fnull\u30c1\u30a7\u30c3\u30af\u306e\u624b\u3092\u629c\u304f\u3068\u3044\u3046\u76ee\u7684\u306f\u3042\u3093\u307e\u308a\u6e80\u305f\u305b\u3066\u306a\u3044\u306e\u3067\u3059\u3002\n\n\u672a\u521d\u671f\u5316\u306e\u5909\u6570\u304b\u3089null\u304c\u7d1b\u308c\u8fbc\u3080\u3068\u3001Some(null)\u304c\u4f5c\u308c\u3066\u3057\u307e\u3046\u3002\n\u672a\u521d\u671f\u5316\u306eOption\u578b\u306e\u5909\u6570\u304b\u3089null\u304c\u7d1b\u308c\u8fbc\u3080\u3068\u3001\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u306b\u5931\u6557\u3059\u308b\u3002\n\u3044\u3063\u305f\u3093null\u304c\u7d1b\u308c\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u5834\u6240\u3067\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u304f\u308b\u3002\n\n\u3057\u304b\u3057\u3001\u3088\u304f\u8003\u3048\u305f\u3089\u3001haxe.ds.Option\u306fenum\u3067\u3042\u308b\u3002\u3064\u307e\u308a\u3001\u5024\u304c\u3042\u308b\u5834\u5408\u3068\u5024\u304c\u306a\u3044\u5834\u5408\u306e\u5834\u5408\u5206\u3051\u304c\u3067\u304d\u308b\u3068\u3044\u3046\u4ee5\u5916\u306e\u6a5f\u80fd\u306f\u672c\u6765\u306f\u6301\u3063\u3066\u306a\u3044\u306f\u305a\u3002\u81ea\u5206\u81ea\u8eab\u304cnull\u304b\u3069\u3046\u304b\u77e5\u308d\u3046\u306b\u3082\u3001enum\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f55\u3089\u30c1\u30a7\u30c3\u30af\u305b\u305a\u53d7\u3051\u5165\u308c\u3066\u3057\u307e\u3044\u3001\u307e\u305f\u81ea\u5206\u81ea\u8eab\u304cnull\u3067\u3042\u308b\u304b\u306f\u77e5\u308b\u7531\u3082\u306a\u3044\u306e\u3067\u3059\u3002\n\u3068\u3053\u308d\u3067\u3001\u4eca\u3084\u308a\u305f\u3044\u3053\u3068\u306f\u3001\u65e2\u5b58\u306e\u578b\u3078\u306enull\u30c1\u30a7\u30c3\u30af\u3068\u3044\u3046\u6a5f\u80fd\u306e\u4ed8\u52a0\u3002\n\u3053\u3053\u306f\u3001abstract\u306e\u51fa\u756a\u3067\u306f\u306a\u3044\u304b\uff1f\n\nNonNull.hx\npackage;\n\nabstract NonNull<T>(T) {\n    inline public function new(value:T) {\n        if (value == null) {\n            throw \"value must be non null\";\n        }\n        this = value;\n    }\n\n    @:from\n    inline public static function fromValue(value:T):NonNull<T> {\n        return new NonNull<T>(value);\n    }\n\n    public var value(get, never):T;\n\n    @:to\n    inline public function get_value():T {\n        return this;\n    }\n}\n\n\n\nMain.hx\npackage;\n\nclass Main {\n\n    public static function main():Void {\n        new Main();\n    }\n\n    public function new() {\n        var s:NonNull<String> = \"asdf\";\n        trace(s.value.length);\n        var ss:String = s;\n        trace(ss.length);\n\n        var s2 = s;\n        var s3:NonNull<String> = s;\n\n        ss = null;\n        s = ss;\n        trace(s.value.length);\n        ss = s;\n        trace(ss.length);\n    }\n\n}\n\n\n\nMain.js\n(function () { \"use strict\";\nvar Main = function() {\n    var s;\n    var this1;\n    this1 = \"asdf\";\n    s = this1;\n    console.log(s.length);\n    var ss = s;\n    console.log(ss.length);\n    var s2 = s;\n    var s3 = s;\n    ss = null;\n    var this2;\n    if(ss == null) throw \"value must be non null\";\n    this2 = ss;\n    s = this2;\n    console.log(s.length);\n    ss = s;\n    console.log(ss.length);\n};\nMain.main = function() {\n    new Main();\n};\nvar _NonNull = {};\n_NonNull.NonNull_Impl_ = function() { };\n_NonNull.NonNull_Impl_._new = function(value) {\n    var this1;\n    if(value == null) throw \"value must be non null\";\n    this1 = value;\n    return this1;\n};\n_NonNull.NonNull_Impl_.fromValue = function(value) {\n    var this1;\n    if(value == null) throw \"value must be non null\";\n    this1 = value;\n    return this1;\n};\n_NonNull.NonNull_Impl_.get_value = function(this1) {\n    return this1;\n};\nMain.main();\n})();\n\n\n\nconsole.log\n4 Main.js:7\n4 Main.js:9\nUncaught value must be non null Main.js:14\n\n\n\u3084\u3063\u3066\u308b\u3053\u3068\u306f\u3001abstract\u3092\u521d\u671f\u5316\u3059\u308b\u6642\u306bnull\u3060\u3063\u305f\u3089\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3060\u3051\u3002\u3053\u306e\u305f\u3081\u3001\u521d\u671f\u5316\u306b\u6210\u529f\u3057\u305fabstract\u306fnon null\u3067\u3042\u308b\u4e8b\u304c\u4fdd\u8a3c\u3055\u308c\u307e\u3059\u3002\u305d\u308c\u3060\u3051\u3067\u3059\u3002\n\u66f4\u306b\u3001 @:from \u3068\u304b @:to \u3068\u304b\u304c\u4eca\u56de\u306f\u3068\u3066\u3082\u52b9\u679c\u3092\u767a\u63ee\u3057\u3066\u3044\u3066\u3001\u666e\u901a\u306b\u4ee3\u5165\u6587\u3092\u66f8\u304f\u3060\u3051\u3067\u578b\u63a8\u8ad6\u306b\u3088\u3063\u3066\u6697\u9ed9\u7684\u306bNonNull\u3078\u306e\u5909\u63db\u3068NonNull\u304b\u3089\u306e\u5024\u306e\u53d6\u308a\u51fa\u3057\u3092\u3084\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u6642null\u30c1\u30a7\u30c3\u30af\u3058\u3083\u306a\u3044\u3001\u5b9f\u884c\u6642null\u30c1\u30a7\u30c3\u30af\u3058\u3083\u306a\u3044\u304b\uff1f\u3068\u3044\u3046\u898b\u65b9\u3082\u3067\u304d\u307e\u3059\u304c\u3001\u305d\u3082\u305d\u3082\u672a\u521d\u671f\u5316\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304b\u3089\u8aad\u307f\u53d6\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u304c\u3001\u672a\u521d\u671f\u5316\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u304b\u3089\u8aad\u307f\u53d6\u308b\u3068null\u3092\u8aad\u307f\u53d6\u308c\u3066\u3057\u307e\u3046\u3001\u3068\u3044\u3046\u3088\u308a\u306f\u305d\u3082\u305d\u3082\u5909\u6570\u306e\u521d\u671f\u5316\u3092\u7701\u7565\u3067\u304d\u3001\u7701\u7565\u3059\u308b\u3068null\u306b\u306a\u308b\u3068\u304b\u3044\u3046Haxe\u306e\u4ed5\u69d8\u304b\u3089\u8003\u3048\u308b\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u3069\u3053\u304b\u304b\u3089null\u304c\u7d1b\u308c\u8fbc\u307e\u306a\u3044\u3053\u3068\u3092\u4fdd\u8a3c\u3067\u304d\u306a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3044\u3046\u6c17\u3082\u3057\u307e\u3059\u3002\n\uff08Haxe\u306b\u306fNull<T>\u3068\u3044\u3046\u578b\u3082\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u73fe\u72b6\u3067\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6027\u4ee5\u5916\u306e\u610f\u5473\u3092\u7279\u306b\u6301\u3063\u3066\u306a\u3044\u3068\u304b\u3044\u3046\u6b8b\u5ff5\u306a\u72b6\u614b\u3002\uff09\n\u3053\u306e\u624b\u6cd5\u304c\u5b9f\u904b\u7528\u306b\u8010\u3048\u308b\u304b\u3069\u3046\u304b\u307e\u3067\u306f\u307e\u3060\u691c\u8a3c\u3057\u3066\u307e\u305b\u3093\u3002\u4eca\u306e\u3068\u3053\u308d\u3001NonNull<T>\u304b\u3089T\u306e\u5024\u3092\u53d6\u308a\u51fa\u3059\u306e\u306bvalue\u3092\u547c\u3070\u306a\u304d\u3083\u306a\u3089\u306a\u3044\u306e\u304c\u3061\u3087\u3063\u3068\u30c0\u30b5\u3044\u6c17\u304c\u3059\u308b\u3002\n\n\u5225\u89e3\nhaxe.ds.Option\u3092\u4f7f\u3063\u305f\u4e0a\u3067\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u304cnull\u304b\u3069\u3046\u304b\u3092\u898b\u3066Some\u304bNone\u304b\u3092\u8fd4\u3059\u3088\u3046\u306a\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u7528\u610f\u3059\u308b\u624b\u3082\u3042\u308a\u307e\u3059\u3002\n\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3092\u3057\u3063\u304b\u308a\u904b\u7528\u3067\u304d\u308b\u4eba\u306a\u3089\u3053\u3063\u3061\u306e\u624b\u6cd5\u3067\u3082\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u3068\u3081\nHaxe\u306eabstract\u3064\u3088\u3044\u3002\n\u3000\n\u3000\n\u3000\n\u3000\n\u3000\n\n\u5f8c\u65e5\u8ac7\n@:forward \u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u4ed8\u52a0\u3059\u308b\u3068abstract\u306e\u4e2d\u8eab\u3092\u53d6\u308a\u51fa\u3055\u306a\u304f\u3066\u3082\u76f4\u63a5\u30e1\u30f3\u30d0\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3089\u3057\u3044\u3067\u3059\u3002NonNull\u306e\u52d5\u4f5c\u306b\u3064\u3044\u3066\u4e00\u3064\u61f8\u5ff5\u70b9\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u691c\u8a3c\u306e\u3064\u3044\u3067\u306b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3061\u306a\u307f\u306b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308b\u3068@:forward(push, pop)\u3068\u304b\u66f8\u304f\u3068push\u3068pop\u3060\u3051\u516c\u958b\u3067\u304d\u308b\u3089\u3057\u3044\u3002\u3053\u308c\u306f\u3053\u308c\u3067\u3044\u308d\u3093\u306a\u4f7f\u3044\u9053\u304c\u3042\u308a\u305d\u3046\u3067\u3042\u308b\u3002\n\nNonNull.hx\npackage;\n\n@:forward\nabstract NonNull<T>(T) {\n    inline public function new(value:T) {\n        if (value == null) {\n            throw \"value must be non null\";\n        }\n        this = value;\n    }\n\n    @:from\n    inline public static function fromValue(value:T):NonNull<T> {\n        return new NonNull<T>(value);\n    }\n\n    public var value(get, never):T;\n\n    @:to\n    inline public function get_value():T {\n        return this;\n    }\n}\n\n\n\nMain.hx\npackage;\n\nclass Main {\n\n    public static function main():Void {\n        new Main();\n    }\n\n    var s:NonNull<String>;\n    public function new() {\n        var s1:NonNull<String> = \"hoge\";\n        var s2:NonNull<String> = s;\n        trace(s1.length);\n        trace(s2.length);\n    }\n\n}\n\n\n\nMain.js\n(function () { \"use strict\";\nvar Main = function() {\n    var s1;\n    var this1;\n    this1 = \"hoge\";\n    s1 = this1;\n    var s2 = this.s;\n    console.log(s1.length);\n    console.log(s2.length);\n};\nMain.main = function() {\n    new Main();\n};\nvar _NonNull = {};\n_NonNull.NonNull_Impl_ = function() { };\n_NonNull.NonNull_Impl_._new = function(value) {\n    var this1;\n    if(value == null) throw \"value must be non null\";\n    this1 = value;\n    return this1;\n};\n_NonNull.NonNull_Impl_.fromValue = function(value) {\n    var this1;\n    if(value == null) throw \"value must be non null\";\n    this1 = value;\n    return this1;\n};\n_NonNull.NonNull_Impl_.get_value = function(this1) {\n    return this1;\n};\nMain.main();\n})();\n\n\n\nconsole.log\n4 Main.js:8\nUncaught TypeError: Cannot read property 'length' of undefined Main.js:9\n\n\n\u3000\n\u30ad\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\n# \u8981\u7d04\n`haxe.ds.Option`\u304c\u5168\u7136null\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u306a\u3044\u4ef6\u3002\n\n# haxe.ds.Option\u304cnull\u30c1\u30a7\u30c3\u30af\u306b\u4fbf\u5229\u3089\u3057\u3044\uff1f\n\nHaxe\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u4e0a\u3067\u907f\u3051\u3066\u901a\u308c\u306a\u3044\u306e\u304c\u3001null\u30c1\u30a7\u30c3\u30af\u554f\u984c\u3002\n\u305f\u3044\u3066\u3044\u306e\u5834\u5408\u5b9f\u884c\u6642\u306b\u51fa\u529b\u3055\u308c\u305f\u30a8\u30e9\u30fc\u304b\u3089null\u30c1\u30a7\u30c3\u30af\u5fd8\u308c\u306e\u5b58\u5728\u3092\u77e5\u308b\u306e\u3067\u3001\u3067\u304d\u308c\u3070\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306bnull\u30c1\u30a7\u30c3\u30af\u3092\u5fd8\u308c\u3066\u306a\u3044\u304b\u3069\u3046\u304b\u78ba\u304b\u3081\u305f\u3044\u3002\n\n\u3068\u3053\u308d\u3067\u3001Haxe\u306b\u306f`haxe.ds.Option`\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308a\u3001\u4ed6\u306e\u8a00\u8a9e\u306b\u304a\u3051\u308b\u540c\u7a2e\u306e\u6a5f\u80fd\u306fnull\u30c1\u30a7\u30c3\u30af\u306a\u3069\u306b\u4f7f\u308f\u308c\u3066\u3044\u308b\u3089\u3057\u3044\u3002\n\u5177\u4f53\u7684\u306b\u306f\u3001\u5024\u304c\u3042\u308b\u6642\u306f`Some(s)`\u3001\u5024\u304c\u306a\u3044\u6642\u306f`None`\u3067\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3046\u3063\u304b\u308anull\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u3092\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3042\u308b\u3002\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u3055\u3063\u305d\u304f\u4f7f\u3063\u3066\u307f\u308b\u3002\n\n```lang:Main.hx\npackage;\n\nimport haxe.ds.Option;\n\nclass Main {\n\n\tpublic static function main():Void {\n\t\tnew Main();\n\t}\n\n\tprivate var s:String;\n\tpublic function new() {\n\t\tvar some:Option<String> = Some(s);\n\t\tswitch (some) {\n\t\t\tcase Some(s): trace(s.length);\n\t\t\tcase None: trace(\"null\");\n\t\t}\n\t}\n\n}\n```\n\n```lang:Main.js\n(function () { \"use strict\";\nvar Main = function() {\n\tvar some = haxe.ds.Option.Some(this.s);\n\tswitch(some[1]) {\n\tcase 0:\n\t\tvar s = some[2];\n\t\tconsole.log(s.length);\n\t\tbreak;\n\tcase 1:\n\t\tconsole.log(\"null\");\n\t\tbreak;\n\t}\n};\nMain.main = function() {\n\tnew Main();\n};\nvar haxe = {};\nhaxe.ds = {};\nhaxe.ds.Option = { __constructs__ : [\"Some\",\"None\"] };\nhaxe.ds.Option.Some = function(v) { var $x = [\"Some\",0,v]; $x.__enum__ = haxe.ds.Option; return $x; };\nhaxe.ds.Option.None = [\"None\",1];\nhaxe.ds.Option.None.__enum__ = haxe.ds.Option;\nMain.main();\n})();\n```\n\n```lang:console.log\nUncaught TypeError: Cannot read property 'length' of undefined Main.js:7\n```\n\n\u3042\u3063\u308c\u30fc\uff1f\n\n\u3064\u307e\u308a\u3053\u308c\u306f\u305d\u308c\u304b\u3001`Some`\u306e\u4e2d\u8eab\u304c`undefined`\u3060\u3063\u3066\u6012\u3089\u308c\u3066\u308b\u306e\u304b\u3002\n\n\u3069\u3046\u3084\u3089\u3001\u521d\u671f\u5024\u304c\u672a\u5b9a\u7fa9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570`s`\u3092`Some`\u306b\u7a81\u3063\u8fbc\u3093\u3067\u3057\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u3060\u3002JavaScript\u3060\u3068\u521d\u671f\u5024\u3092\u66f8\u304b\u306a\u3044\u3068`undefined`\u306b\u306a\u308b\u306e\u3067\u3001\u305f\u3076\u3093\u305d\u3046\u3044\u3046\u3053\u3068\u3060\u3002\n\u3057\u304b\u3082\u3088\u304f\u898b\u305f\u3089\u3001\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3059\u308b\u305f\u3073\u306b`Some(s)`\u3092\u4f5c\u3063\u3066\u308b\u3002\u3053\u308c\u306f\u7121\u99c4\u3063\u307d\u304f\u898b\u3048\u308b\u304b\u3089\u3001`Option`\u578b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u76f4\u63a5\u6301\u3063\u3066\u304a\u3053\u3046\u3002\n\u3064\u3044\u3067\u306b`Some`\u306b`undefined`\u3092\u7a81\u3063\u8fbc\u3093\u3067\u308b\u30b3\u30fc\u30c9\u3092\u307e\u308b\u3063\u3068\u524a\u9664\u3057\u3066\u3057\u307e\u3048\u3070\u6012\u3089\u308c\u306a\u3044\u306f\u305a\uff01\uff01\uff01\uff01\uff11\n\n```lang:Main.hx\npackage;\n\nimport haxe.ds.Option;\n\nclass Main {\n\n\tpublic static function main():Void {\n\t\tnew Main();\n\t}\n\n\tprivate var option:Option<String>;\n\tpublic function new() {\n\t\tvar option:Option<String> = option;\n\t\tswitch (option) {\n\t\t\tcase Some(s): trace(s.length);\n\t\t\tcase None: trace(\"null\");\n\t\t}\n\t}\n\n}\n```\n\n```lang:Main.js\n(function () { \"use strict\";\nvar Main = function() {\n\tvar option = this.option;\n\tswitch(option[1]) {\n\tcase 0:\n\t\tvar s = option[2];\n\t\tconsole.log(s.length);\n\t\tbreak;\n\tcase 1:\n\t\tconsole.log(\"null\");\n\t\tbreak;\n\t}\n};\nMain.main = function() {\n\tnew Main();\n};\nvar haxe = {};\nhaxe.ds = {};\nhaxe.ds.Option = { __constructs__ : [\"Some\",\"None\"] };\nhaxe.ds.Option.Some = function(v) { var $x = [\"Some\",0,v]; $x.__enum__ = haxe.ds.Option; return $x; };\nhaxe.ds.Option.None = [\"None\",1];\nhaxe.ds.Option.None.__enum__ = haxe.ds.Option;\nMain.main();\n})();\n```\n\n```lang:console.log\nUncaught TypeError: Cannot read property '1' of undefined Main.js:4\n```\n\n\u3072\u3048\u30fc\u3002\n\n# \u4ed5\u65b9\u304c\u306a\u3044\u306e\u3067abstract\u3092\u4f7f\u3046\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3001Haxe\u306e`haxe.ds.Option`\u306fnull\u30c1\u30a7\u30c3\u30af\u306e\u624b\u3092\u629c\u304f\u3068\u3044\u3046\u76ee\u7684\u306f\u3042\u3093\u307e\u308a\u6e80\u305f\u305b\u3066\u306a\u3044\u306e\u3067\u3059\u3002\n\n- \u672a\u521d\u671f\u5316\u306e\u5909\u6570\u304b\u3089null\u304c\u7d1b\u308c\u8fbc\u3080\u3068\u3001`Some(null)`\u304c\u4f5c\u308c\u3066\u3057\u307e\u3046\u3002\n- \u672a\u521d\u671f\u5316\u306e`Option`\u578b\u306e\u5909\u6570\u304b\u3089null\u304c\u7d1b\u308c\u8fbc\u3080\u3068\u3001\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u306b\u5931\u6557\u3059\u308b\u3002\n- \u3044\u3063\u305f\u3093null\u304c\u7d1b\u308c\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u5834\u6240\u3067\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u3066\u304f\u308b\u3002\n\n\u3057\u304b\u3057\u3001\u3088\u304f\u8003\u3048\u305f\u3089\u3001`haxe.ds.Option`\u306fenum\u3067\u3042\u308b\u3002\u3064\u307e\u308a\u3001\u5024\u304c\u3042\u308b\u5834\u5408\u3068\u5024\u304c\u306a\u3044\u5834\u5408\u306e\u5834\u5408\u5206\u3051\u304c\u3067\u304d\u308b\u3068\u3044\u3046\u4ee5\u5916\u306e\u6a5f\u80fd\u306f\u672c\u6765\u306f\u6301\u3063\u3066\u306a\u3044\u306f\u305a\u3002\u81ea\u5206\u81ea\u8eab\u304cnull\u304b\u3069\u3046\u304b\u77e5\u308d\u3046\u306b\u3082\u3001enum\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f55\u3089\u30c1\u30a7\u30c3\u30af\u305b\u305a\u53d7\u3051\u5165\u308c\u3066\u3057\u307e\u3044\u3001\u307e\u305f\u81ea\u5206\u81ea\u8eab\u304cnull\u3067\u3042\u308b\u304b\u306f\u77e5\u308b\u7531\u3082\u306a\u3044\u306e\u3067\u3059\u3002\n\n\u3068\u3053\u308d\u3067\u3001\u4eca\u3084\u308a\u305f\u3044\u3053\u3068\u306f\u3001\u65e2\u5b58\u306e\u578b\u3078\u306enull\u30c1\u30a7\u30c3\u30af\u3068\u3044\u3046\u6a5f\u80fd\u306e\u4ed8\u52a0\u3002\n\u3053\u3053\u306f\u3001abstract\u306e\u51fa\u756a\u3067\u306f\u306a\u3044\u304b\uff1f\n\n```lang:NonNull.hx\npackage;\n\nabstract NonNull<T>(T) {\n\tinline public function new(value:T) {\n\t\tif (value == null) {\n\t\t\tthrow \"value must be non null\";\n\t\t}\n\t\tthis = value;\n\t}\n\n\t@:from\n\tinline public static function fromValue(value:T):NonNull<T> {\n\t\treturn new NonNull<T>(value);\n\t}\n\n\tpublic var value(get, never):T;\n\n\t@:to\n\tinline public function get_value():T {\n\t\treturn this;\n\t}\n}\n```\n\n```lang:Main.hx\npackage;\n\nclass Main {\n\n\tpublic static function main():Void {\n\t\tnew Main();\n\t}\n\n\tpublic function new() {\n\t\tvar s:NonNull<String> = \"asdf\";\n\t\ttrace(s.value.length);\n\t\tvar ss:String = s;\n\t\ttrace(ss.length);\n\n\t\tvar s2 = s;\n\t\tvar s3:NonNull<String> = s;\n\n\t\tss = null;\n\t\ts = ss;\n\t\ttrace(s.value.length);\n\t\tss = s;\n\t\ttrace(ss.length);\n\t}\n\n}\n```\n\n```lang:Main.js\n(function () { \"use strict\";\nvar Main = function() {\n\tvar s;\n\tvar this1;\n\tthis1 = \"asdf\";\n\ts = this1;\n\tconsole.log(s.length);\n\tvar ss = s;\n\tconsole.log(ss.length);\n\tvar s2 = s;\n\tvar s3 = s;\n\tss = null;\n\tvar this2;\n\tif(ss == null) throw \"value must be non null\";\n\tthis2 = ss;\n\ts = this2;\n\tconsole.log(s.length);\n\tss = s;\n\tconsole.log(ss.length);\n};\nMain.main = function() {\n\tnew Main();\n};\nvar _NonNull = {};\n_NonNull.NonNull_Impl_ = function() { };\n_NonNull.NonNull_Impl_._new = function(value) {\n\tvar this1;\n\tif(value == null) throw \"value must be non null\";\n\tthis1 = value;\n\treturn this1;\n};\n_NonNull.NonNull_Impl_.fromValue = function(value) {\n\tvar this1;\n\tif(value == null) throw \"value must be non null\";\n\tthis1 = value;\n\treturn this1;\n};\n_NonNull.NonNull_Impl_.get_value = function(this1) {\n\treturn this1;\n};\nMain.main();\n})();\n```\n\n```lang:console.log\n4 Main.js:7\n4 Main.js:9\nUncaught value must be non null Main.js:14\n```\n\n\u3084\u3063\u3066\u308b\u3053\u3068\u306f\u3001abstract\u3092\u521d\u671f\u5316\u3059\u308b\u6642\u306bnull\u3060\u3063\u305f\u3089\u30a8\u30e9\u30fc\u3092\u5410\u304f\u3060\u3051\u3002\u3053\u306e\u305f\u3081\u3001\u521d\u671f\u5316\u306b\u6210\u529f\u3057\u305fabstract\u306fnon null\u3067\u3042\u308b\u4e8b\u304c\u4fdd\u8a3c\u3055\u308c\u307e\u3059\u3002\u305d\u308c\u3060\u3051\u3067\u3059\u3002\n\n\u66f4\u306b\u3001 `@:from` \u3068\u304b `@:to` \u3068\u304b\u304c\u4eca\u56de\u306f\u3068\u3066\u3082\u52b9\u679c\u3092\u767a\u63ee\u3057\u3066\u3044\u3066\u3001\u666e\u901a\u306b\u4ee3\u5165\u6587\u3092\u66f8\u304f\u3060\u3051\u3067\u578b\u63a8\u8ad6\u306b\u3088\u3063\u3066\u6697\u9ed9\u7684\u306b`NonNull`\u3078\u306e\u5909\u63db\u3068`NonNull`\u304b\u3089\u306e\u5024\u306e\u53d6\u308a\u51fa\u3057\u3092\u3084\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u6642null\u30c1\u30a7\u30c3\u30af\u3058\u3083\u306a\u3044\u3001\u5b9f\u884c\u6642null\u30c1\u30a7\u30c3\u30af\u3058\u3083\u306a\u3044\u304b\uff1f\u3068\u3044\u3046\u898b\u65b9\u3082\u3067\u304d\u307e\u3059\u304c\u3001\u305d\u3082\u305d\u3082*\u672a\u521d\u671f\u5316\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304b\u3089\u8aad\u307f\u53d6\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u304c\u3001\u672a\u521d\u671f\u5316\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u304b\u3089\u8aad\u307f\u53d6\u308b\u3068null\u3092\u8aad\u307f\u53d6\u308c\u3066\u3057\u307e\u3046*\u3001\u3068\u3044\u3046\u3088\u308a\u306f\u305d\u3082\u305d\u3082**\u5909\u6570\u306e\u521d\u671f\u5316\u3092\u7701\u7565\u3067\u304d\u3001\u7701\u7565\u3059\u308b\u3068`null`\u306b\u306a\u308b**\u3068\u304b\u3044\u3046Haxe\u306e\u4ed5\u69d8\u304b\u3089\u8003\u3048\u308b\u3068\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u3069\u3053\u304b\u304b\u3089null\u304c\u7d1b\u308c\u8fbc\u307e\u306a\u3044\u3053\u3068\u3092\u4fdd\u8a3c\u3067\u304d\u306a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3044\u3046\u6c17\u3082\u3057\u307e\u3059\u3002\n\uff08Haxe\u306b\u306f`Null<T>`\u3068\u3044\u3046\u578b\u3082\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u73fe\u72b6\u3067\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6027\u4ee5\u5916\u306e\u610f\u5473\u3092\u7279\u306b\u6301\u3063\u3066\u306a\u3044\u3068\u304b\u3044\u3046\u6b8b\u5ff5\u306a\u72b6\u614b\u3002\uff09\n\n\u3053\u306e\u624b\u6cd5\u304c\u5b9f\u904b\u7528\u306b\u8010\u3048\u308b\u304b\u3069\u3046\u304b\u307e\u3067\u306f\u307e\u3060\u691c\u8a3c\u3057\u3066\u307e\u305b\u3093\u3002\u4eca\u306e\u3068\u3053\u308d\u3001`NonNull<T>`\u304b\u3089`T`\u306e\u5024\u3092\u53d6\u308a\u51fa\u3059\u306e\u306b`value`\u3092\u547c\u3070\u306a\u304d\u3083\u306a\u3089\u306a\u3044\u306e\u304c\u3061\u3087\u3063\u3068\u30c0\u30b5\u3044\u6c17\u304c\u3059\u308b\u3002\n\n# \u5225\u89e3\n`haxe.ds.Option`\u3092\u4f7f\u3063\u305f\u4e0a\u3067\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u304cnull\u304b\u3069\u3046\u304b\u3092\u898b\u3066`Some`\u304b`None`\u304b\u3092\u8fd4\u3059\u3088\u3046\u306a\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u7528\u610f\u3059\u308b\u624b\u3082\u3042\u308a\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u898f\u7d04\u3092\u3057\u3063\u304b\u308a\u904b\u7528\u3067\u304d\u308b\u4eba\u306a\u3089\u3053\u3063\u3061\u306e\u624b\u6cd5\u3067\u3082\u3088\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u307e\u3068\u3081\nHaxe\u306eabstract\u3064\u3088\u3044\u3002\n\n\u3000\n\n\u3000\n\n\u3000\n\n\u3000\n\n\u3000\n\n# \u5f8c\u65e5\u8ac7\n`@:forward` \u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u4ed8\u52a0\u3059\u308b\u3068abstract\u306e\u4e2d\u8eab\u3092\u53d6\u308a\u51fa\u3055\u306a\u304f\u3066\u3082\u76f4\u63a5\u30e1\u30f3\u30d0\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3089\u3057\u3044\u3067\u3059\u3002`NonNull`\u306e\u52d5\u4f5c\u306b\u3064\u3044\u3066\u4e00\u3064\u61f8\u5ff5\u70b9\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u691c\u8a3c\u306e\u3064\u3044\u3067\u306b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u3061\u306a\u307f\u306b[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://haxe.org/manual/types-abstract-forward.html)\u306b\u3088\u308b\u3068`@:forward(push, pop)`\u3068\u304b\u66f8\u304f\u3068`push`\u3068`pop`\u3060\u3051\u516c\u958b\u3067\u304d\u308b\u3089\u3057\u3044\u3002\u3053\u308c\u306f\u3053\u308c\u3067\u3044\u308d\u3093\u306a\u4f7f\u3044\u9053\u304c\u3042\u308a\u305d\u3046\u3067\u3042\u308b\u3002\n\n```lang:NonNull.hx\npackage;\n\n@:forward\nabstract NonNull<T>(T) {\n\tinline public function new(value:T) {\n\t\tif (value == null) {\n\t\t\tthrow \"value must be non null\";\n\t\t}\n\t\tthis = value;\n\t}\n\n\t@:from\n\tinline public static function fromValue(value:T):NonNull<T> {\n\t\treturn new NonNull<T>(value);\n\t}\n\n\tpublic var value(get, never):T;\n\n\t@:to\n\tinline public function get_value():T {\n\t\treturn this;\n\t}\n}\n```\n\n```lang:Main.hx\npackage;\n\nclass Main {\n\n\tpublic static function main():Void {\n\t\tnew Main();\n\t}\n\n\tvar s:NonNull<String>;\n\tpublic function new() {\n\t\tvar s1:NonNull<String> = \"hoge\";\n\t\tvar s2:NonNull<String> = s;\n\t\ttrace(s1.length);\n\t\ttrace(s2.length);\n\t}\n\n}\n```\n\n```lang:Main.js\n(function () { \"use strict\";\nvar Main = function() {\n\tvar s1;\n\tvar this1;\n\tthis1 = \"hoge\";\n\ts1 = this1;\n\tvar s2 = this.s;\n\tconsole.log(s1.length);\n\tconsole.log(s2.length);\n};\nMain.main = function() {\n\tnew Main();\n};\nvar _NonNull = {};\n_NonNull.NonNull_Impl_ = function() { };\n_NonNull.NonNull_Impl_._new = function(value) {\n\tvar this1;\n\tif(value == null) throw \"value must be non null\";\n\tthis1 = value;\n\treturn this1;\n};\n_NonNull.NonNull_Impl_.fromValue = function(value) {\n\tvar this1;\n\tif(value == null) throw \"value must be non null\";\n\tthis1 = value;\n\treturn this1;\n};\n_NonNull.NonNull_Impl_.get_value = function(this1) {\n\treturn this1;\n};\nMain.main();\n})();\n```\n\n```lang:console.log\n4 Main.js:8\nUncaught TypeError: Cannot read property 'length' of undefined Main.js:9\n```\n\n\u3000\n\n\u30ad\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\u30a8\n"}