{"tags": ["unicorn"], "context": "Unicorn\u306eold\u30d7\u30ed\u30bb\u30b9\u3092\u524a\u9664\u3059\u308b\u3002\n\nunicorn\u3092\u505c\u6b62\u3059\u308b\nvagrant@vagrant-ubuntu-trusty:~/hoge_app$ bundle exec cap production unicorn:stop\n[ec2-user@ip-12345 current]$ ls\napp                     Capfile    db                      Gemfile.lock  public       REVISION  vendor\nassets_manifest_backup  config     ec2-user@12.345.67.890  lib           Rakefile     test\nbin                     config.ru  Gemfile                 log           README.rdoc  tmp\n[ec2-user@ip-12345 current]$ ps aux | grep unicorn #\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\uff01\uff01\nec2-user 12760  0.6  7.8 350136 80352 ?        Sl   22:03   0:01 unicorn master -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 12764  0.0  7.0 350136 71520 ?        Sl   22:03   0:00 unicorn worker[0] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 12767  0.0  6.9 350136 70664 ?        Sl   22:03   0:00 unicorn worker[1] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 17045  0.0  0.1 110456  1996 pts/1    S+   22:07   0:00 grep --color=auto unicorn\n[ec2-user@ip-12345 current]$ kill -s USR2 12760\n[ec2-user@ip-12345 current]$ ps aux | grep unicorn\nec2-user 12760  0.6  7.8 350136 80352 ?        Sl   22:03   0:01 unicorn master (old) -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 12764  0.0  7.0 350136 71520 ?        Sl   22:03   0:00 unicorn worker[0] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 12767  0.0  6.9 350136 70664 ?        Sl   22:03   0:00 unicorn worker[1] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 17046 73.5  7.8 350252 80304 ?        Sl   22:07   0:01 unicorn master -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 17050  0.0  6.9 350252 70548 ?        Sl   22:07   0:00 unicorn worker[0] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 17052  0.0  6.9 350252 70612 ?        Sl   22:07   0:00 unicorn worker[1] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D\nec2-user 17057  0.0  0.2 110456  2072 pts/1    S+   22:07   0:00 grep --color=auto unicorn\n[ec2-user@ip-12345 current]$ kill -s QUIT 12760\nUnicorn\u306eold\u30d7\u30ed\u30bb\u30b9\u3092\u524a\u9664\u3059\u308b\u3002\n\n# unicorn\u3092\u505c\u6b62\u3059\u308b\nvagrant@vagrant-ubuntu-trusty:~/hoge_app$ bundle exec cap production unicorn:stop\n\n[ec2-user@ip-12345 current]$ ls\napp                     Capfile    db                      Gemfile.lock  public       REVISION  vendor\nassets_manifest_backup  config     ec2-user@12.345.67.890  lib           Rakefile     test\nbin                     config.ru  Gemfile                 log           README.rdoc  tmp\n[ec2-user@ip-12345 current]$ ps aux | grep unicorn #\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\uff01\uff01\nec2-user 12760  0.6  7.8 350136 80352 ?        Sl   22:03   0:01 unicorn master -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                               \nec2-user 12764  0.0  7.0 350136 71520 ?        Sl   22:03   0:00 unicorn worker[0] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                            \nec2-user 12767  0.0  6.9 350136 70664 ?        Sl   22:03   0:00 unicorn worker[1] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                            \nec2-user 17045  0.0  0.1 110456  1996 pts/1    S+   22:07   0:00 grep --color=auto unicorn\n[ec2-user@ip-12345 current]$ kill -s USR2 12760\n[ec2-user@ip-12345 current]$ ps aux | grep unicorn\nec2-user 12760  0.6  7.8 350136 80352 ?        Sl   22:03   0:01 unicorn master (old) -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                         \nec2-user 12764  0.0  7.0 350136 71520 ?        Sl   22:03   0:00 unicorn worker[0] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                            \nec2-user 12767  0.0  6.9 350136 70664 ?        Sl   22:03   0:00 unicorn worker[1] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                            \nec2-user 17046 73.5  7.8 350252 80304 ?        Sl   22:07   0:01 unicorn master -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                               \nec2-user 17050  0.0  6.9 350252 70548 ?        Sl   22:07   0:00 unicorn worker[0] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                            \nec2-user 17052  0.0  6.9 350252 70612 ?        Sl   22:07   0:00 unicorn worker[1] -c /var/www/hoge_app/current/config/unicorn/production.rb -E deployment -D                                            \nec2-user 17057  0.0  0.2 110456  2072 pts/1    S+   22:07   0:00 grep --color=auto unicorn\n[ec2-user@ip-12345 current]$ kill -s QUIT 12760\n"}