{"context": " More than 1 year has passed since last update.\n\n\u95a2\u6570\u30fb\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u5b9a\u7fa9\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\nfunction prompt($message = 'prompt: ', $hidden = false) {\n    if (PHP_SAPI !== 'cli') {\n        return false;\n    }\n    echo $message;\n    $ret = \n        $hidden\n        ? exec(\n            PHP_OS === 'WINNT' || PHP_OS === 'WIN32'\n            ? __DIR__ . '\\prompt_win.bat'\n            : 'read -s PW; echo $PW'\n        )\n        : rtrim(fgets(STDIN), PHP_EOL)\n    ;\n    if ($hidden) {\n        echo PHP_EOL;\n    }\n    return $ret;\n}\n\nWindows\u306b\u5bfe\u5fdc\u3059\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u968e\u5c64\u306b\u8a2d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nprompt_win.bat\nSetLocal DisableDelayedExpansion\nSet \"Line=\"\nFor /F %%# In ('\"Prompt;$H & For %%# in (1) Do Rem\"') Do (\n    Set \"BS=%%#\"\n)\n\n:loop_start\n    Set \"Key=\"\n    For /F \"delims=\" %%# In ('Xcopy /L /W \"%~f0\" \"%~f0\" 2^>Nul') Do (\n        If Not Defined Key (\n            Set \"Key=%%#\"\n        )\n    )\n    Set \"Key=%Key:~-1%\"\n    SetLocal EnableDelayedExpansion\n    If Not Defined Key (\n        Goto :loop_end\n    )\n    If %BS%==^%Key% (\n        Set \"Key=\"\n        If Defined Line (\n            Set \"Line=!Line:~0,-1!\"\n        )\n    )\n    If Not Defined Line (\n        EndLocal\n        Set \"Line=%Key%\"\n    ) Else (\n        For /F \"delims=\" %%# In (\"!Line!\") Do (\n            EndLocal\n            Set \"Line=%%#%Key%\"\n        )\n    )\n    Goto :loop_start\n:loop_end\n\nEcho;!Line!\n\n\n\n\u4f7f\u3044\u65b9\n$id = prompt(\"ID: \");\n$pw = prompt(\"PW: \", true);\nvar_dump($id, $pw);\n\n\nWindows\u3067\u306e\u5b9f\u884c\u7d50\u679c\n\n\nLinux\u3067\u306e\u5b9f\u884c\u7d50\u679c\n\n## \u95a2\u6570\u30fb\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u5b9a\u7fa9\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```php:\nfunction prompt($message = 'prompt: ', $hidden = false) {\n    if (PHP_SAPI !== 'cli') {\n        return false;\n    }\n    echo $message;\n    $ret = \n        $hidden\n        ? exec(\n            PHP_OS === 'WINNT' || PHP_OS === 'WIN32'\n            ? __DIR__ . '\\prompt_win.bat'\n            : 'read -s PW; echo $PW'\n        )\n        : rtrim(fgets(STDIN), PHP_EOL)\n    ;\n    if ($hidden) {\n        echo PHP_EOL;\n    }\n    return $ret;\n}\n```\n\nWindows\u306b\u5bfe\u5fdc\u3059\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u968e\u5c64\u306b\u8a2d\u7f6e\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bat:prompt_win.bat\nSetLocal DisableDelayedExpansion\nSet \"Line=\"\nFor /F %%# In ('\"Prompt;$H & For %%# in (1) Do Rem\"') Do (\n    Set \"BS=%%#\"\n)\n\n:loop_start\n    Set \"Key=\"\n    For /F \"delims=\" %%# In ('Xcopy /L /W \"%~f0\" \"%~f0\" 2^>Nul') Do (\n        If Not Defined Key (\n            Set \"Key=%%#\"\n        )\n    )\n    Set \"Key=%Key:~-1%\"\n    SetLocal EnableDelayedExpansion\n    If Not Defined Key (\n        Goto :loop_end\n    )\n    If %BS%==^%Key% (\n        Set \"Key=\"\n        If Defined Line (\n            Set \"Line=!Line:~0,-1!\"\n        )\n    )\n    If Not Defined Line (\n        EndLocal\n        Set \"Line=%Key%\"\n    ) Else (\n        For /F \"delims=\" %%# In (\"!Line!\") Do (\n            EndLocal\n            Set \"Line=%%#%Key%\"\n        )\n    )\n    Goto :loop_start\n:loop_end\n\nEcho;!Line!\n```\n\n## \u4f7f\u3044\u65b9\n\n```php\n$id = prompt(\"ID: \");\n$pw = prompt(\"PW: \", true);\nvar_dump($id, $pw);\n```\n\n#### Windows\u3067\u306e\u5b9f\u884c\u7d50\u679c\n\n![Windows](https://qiita-image-store.s3.amazonaws.com/0/25060/2171c8e0-fc30-b8eb-b2f9-6706a18afe91.png)\n\n#### Linux\u3067\u306e\u5b9f\u884c\u7d50\u679c\n\n![ss+(2014-09-07+at+01.47.30).png](https://qiita-image-store.s3.amazonaws.com/0/25060/c47b3189-14c2-766a-4204-96cca2795646.png)\n\n\n", "tags": ["PHP", "Bash", "Windows", "\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb", "\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8"]}