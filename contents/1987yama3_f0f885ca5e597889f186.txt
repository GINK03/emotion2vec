{"context": " More than 1 year has passed since last update.1\u5e74\u307b\u3069\u524d\u306b\u81ea\u5206\u304c\u66f8\u3044\u305f\u8a18\u4e8b\nhttp://qiita.com/1987yama3/items/3d9b63bc1abb622bb8c1\n\u306e Navigation Timing API \u3092, Google Analytics\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066\u9001\u4fe1\u3057\u3066, Google Analytics\u3067\u95b2\u89a7\u8005\u306eNavigation Timing API\u306e\u30c7\u30fc\u30bf\u3092\u898b\u308c\u308b\u3088\u3046\u306b\u3057\u3088\u3046\u3068\u601d\u3044\u7acb\u3063\u3066, \u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f.\n\u57fa\u672c\u306f\u4e0b\u8a18\u306eJavaScript\u306e\u95a2\u6570\u3092\u30b3\u30d4\u30da\u3057\u3066\u81ea\u30b5\u30a4\u30c8\u306eGoogle Analytics\u304c\u52d5\u3044\u3066\u3044\u308b\u30da\u30fc\u30b8\u306b\u57cb\u3081\u8fbc\u3093\u3060\u3042\u3068,  gaPerformance \u95a2\u6570\u3092\u9069\u5207\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3059\u308c\u3070\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059.\n\u305f\u3060, \u9069\u5207\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u96e3\u3057\u304f, onLoad\u30a4\u30d9\u30f3\u30c8\u5185\u3067\u884c\u3046\u3068, window.performance.timing.loadEventEnd\u306e\u5024\u304c\u5165\u3089\u306a\u3044\u305f\u3081\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u3067\u304d\u306a\u304f\u306a\u308b\u3068\u601d\u3046\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059.\n\u81ea\u5206\u306e\u5834\u5408\u306f,\n$(function () {setTimeout(gaPerformance, 3000);});\n\n\u306a\u3069\u3068\u3057\u3066, onLoad\u30a4\u30d9\u30f3\u30c8\u5185\u30673\u79d2\u5f8c\u306b gaPerformance \u3092\u8d77\u52d5\u3059\u308b, \u3068\u304b\u3084\u3063\u3066\u307e\u3059\u304c, \u4ed6\u306b\u3044\u3044\u65b9\u6cd5\u304c\u3042\u308c\u3070\u662f\u975e\u6559\u3048\u3066\u304f\u3060\u3055\u3044.\n\u306a\u304a, \u30b3\u30fc\u30c9\u306fGithub\u306b\u3082\u3042\u3052\u3066\u307f\u307e\u3057\u305f\nhttps://github.com/1987yama3/ga-navigation-timing\n\nga-navigation-timing.js\nfunction gaPerformance () {\n   var sendEvent = function (category, action, label, value, opt_noninteraction) {\n      category = category || 'Performance';\n      if (typeof value !== 'undefined' && value < 0) {\n         return;\n      }\n      if (typeof _gaq !== 'undefined' && typeof _gaq.push === 'function') {\n         _gaq.push(['_trackEvent', category, action, label, value, opt_noninteraction]);\n      }\n   };\n   if (typeof window.performance !== 'undefined') {\n      var navigation = window.performance.navigation;\n      var timing = window.performance.timing;\n\n      sendEvent(undefined, 'Navigation', 'RedirectCount', navigation.redirectCount, true);\n      sendEvent(undefined, 'Timing', 'Redirect', (timing.redirectEnd - timing.redirectStart), true);\n      sendEvent(undefined, 'Timing', 'Application Cache', (timing.domainLookupStart - timing.fetchStart), true);\n      sendEvent(undefined, 'Timing', 'DNS Lookup', (timing.domainLookupEnd - timing.domainLookupStart), true);\n      sendEvent(undefined, 'Timing', 'TCP Connection', (timing.connectEnd - timing.connectStart), true);\n      sendEvent(undefined, 'Timing', 'Request Time', (timing.responseStart - timing.requestStart), true);\n      sendEvent(undefined, 'Timing', 'Response Time', (timing.responseEnd - timing.responseStart), true);\n      sendEvent(undefined, 'Timing', 'DOM Interactive Time', (timing.domInteractive - timing.domLoading), true);\n      sendEvent(undefined, 'Timing', 'DOM Complete', (timing.domComplete - timing.domLoading), true);\n      sendEvent(undefined, 'Timing', 'onLoad Event', (timing.loadEventEnd - timing.loadEventStart), true);\n      sendEvent(undefined, 'Timing', 'Total Time', (timing.loadEventEnd - timeing.navigationStart), true);\n   }\n}\n\n\n1\u5e74\u307b\u3069\u524d\u306b\u81ea\u5206\u304c\u66f8\u3044\u305f\u8a18\u4e8b\n\nhttp://qiita.com/1987yama3/items/3d9b63bc1abb622bb8c1\n\n\u306e **Navigation Timing API** \u3092, Google Analytics\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066\u9001\u4fe1\u3057\u3066, Google Analytics\u3067\u95b2\u89a7\u8005\u306eNavigation Timing API\u306e\u30c7\u30fc\u30bf\u3092\u898b\u308c\u308b\u3088\u3046\u306b\u3057\u3088\u3046\u3068\u601d\u3044\u7acb\u3063\u3066, \u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f.\n\n\u57fa\u672c\u306f\u4e0b\u8a18\u306eJavaScript\u306e\u95a2\u6570\u3092\u30b3\u30d4\u30da\u3057\u3066\u81ea\u30b5\u30a4\u30c8\u306eGoogle Analytics\u304c\u52d5\u3044\u3066\u3044\u308b\u30da\u30fc\u30b8\u306b\u57cb\u3081\u8fbc\u3093\u3060\u3042\u3068,  **gaPerformance** \u95a2\u6570\u3092\u9069\u5207\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3059\u308c\u3070\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059.\n\n\u305f\u3060, \u9069\u5207\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u96e3\u3057\u304f, onLoad\u30a4\u30d9\u30f3\u30c8\u5185\u3067\u884c\u3046\u3068, **window.performance.timing.loadEventEnd**\u306e\u5024\u304c\u5165\u3089\u306a\u3044\u305f\u3081\u30c8\u30e9\u30c3\u30ad\u30f3\u30b0\u3067\u304d\u306a\u304f\u306a\u308b\u3068\u601d\u3046\u306e\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059.\n\n\u81ea\u5206\u306e\u5834\u5408\u306f,\n\n```js\n$(function () {setTimeout(gaPerformance, 3000);});\n```\n\u306a\u3069\u3068\u3057\u3066, onLoad\u30a4\u30d9\u30f3\u30c8\u5185\u30673\u79d2\u5f8c\u306b **gaPerformance** \u3092\u8d77\u52d5\u3059\u308b, \u3068\u304b\u3084\u3063\u3066\u307e\u3059\u304c, \u4ed6\u306b\u3044\u3044\u65b9\u6cd5\u304c\u3042\u308c\u3070\u662f\u975e\u6559\u3048\u3066\u304f\u3060\u3055\u3044.\n\n\n\u306a\u304a, \u30b3\u30fc\u30c9\u306fGithub\u306b\u3082\u3042\u3052\u3066\u307f\u307e\u3057\u305f\nhttps://github.com/1987yama3/ga-navigation-timing\n\n```ga-navigation-timing.js\nfunction gaPerformance () {\n   var sendEvent = function (category, action, label, value, opt_noninteraction) {\n      category = category || 'Performance';\n      if (typeof value !== 'undefined' && value < 0) {\n         return;\n      }\n      if (typeof _gaq !== 'undefined' && typeof _gaq.push === 'function') {\n         _gaq.push(['_trackEvent', category, action, label, value, opt_noninteraction]);\n      }\n   };\n   if (typeof window.performance !== 'undefined') {\n      var navigation = window.performance.navigation;\n      var timing = window.performance.timing;\n\n      sendEvent(undefined, 'Navigation', 'RedirectCount', navigation.redirectCount, true);\n      sendEvent(undefined, 'Timing', 'Redirect', (timing.redirectEnd - timing.redirectStart), true);\n      sendEvent(undefined, 'Timing', 'Application Cache', (timing.domainLookupStart - timing.fetchStart), true);\n      sendEvent(undefined, 'Timing', 'DNS Lookup', (timing.domainLookupEnd - timing.domainLookupStart), true);\n      sendEvent(undefined, 'Timing', 'TCP Connection', (timing.connectEnd - timing.connectStart), true);\n      sendEvent(undefined, 'Timing', 'Request Time', (timing.responseStart - timing.requestStart), true);\n      sendEvent(undefined, 'Timing', 'Response Time', (timing.responseEnd - timing.responseStart), true);\n      sendEvent(undefined, 'Timing', 'DOM Interactive Time', (timing.domInteractive - timing.domLoading), true);\n      sendEvent(undefined, 'Timing', 'DOM Complete', (timing.domComplete - timing.domLoading), true);\n      sendEvent(undefined, 'Timing', 'onLoad Event', (timing.loadEventEnd - timing.loadEventStart), true);\n      sendEvent(undefined, 'Timing', 'Total Time', (timing.loadEventEnd - timeing.navigationStart), true);\n   }\n}\n```", "tags": ["JavaScript", "GoogleAnalytics"]}