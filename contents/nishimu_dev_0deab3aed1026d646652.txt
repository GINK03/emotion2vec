{"context": " More than 1 year has passed since last update.\n\nLISTAGG\u95a2\u6570\u306b\u3064\u3044\u3066\n\n\u7528\u9014\nselect\u3057\u305f\u7d50\u679c\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8868\u793a\u3057\u305f\u3044\u6642\u306a\u3069\u3002\n\n\u4f7f\u3044\u65b9\n\u8868A\n\n\n\nID\n\u90fd\u9053\u5e9c\u770c\u540d\n\n\n\n\n1\n\u611b\u5a9b\u770c\n\n\n2\n\u5cf6\u6839\u770c\n\n\n3\n\u5317\u6d77\u9053\n\n\n\n\u8868B\n\n\n\nID\n\u3086\u308b\u30ad\u30e3\u30e9\u540d\n\u30bd\u30fc\u30c8\n\n\n\n\n1\n\u30d0\u30ea\u30a3\u3055\u3093\n1\n\n\n1\n\u307f\u304d\u3083\u3093\n2\n\n\n2\n\u3057\u307e\u306d\u3063\u3053\n1\n\n\n3\n\u30ad\u30e5\u30f3\u3061\u3083\u3093\n1\n\n\n3\n\u30a2\u30c3\u30af\u30de\n2\n\n\n3\n\u30b3\u30a2\u30c3\u30af\u30de\n3\n\n\n\n\u4e0a\u8a18\uff12\u3064\u306e\u8868\u3092ID\u5217\u3067\u7d50\u5408\u3057\u3066\u3001\u3086\u308b\u30ad\u30e3\u30e9\u540d\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\n\u8868\u793a\u3057\u305f\u3044\u3068\u304d\n\nyuruchara.sql\nselect\n tab.id,\n tab.pref,\n listagg(tab.yuruc,',') within group (order by tab.sort_key asc ) yuruc_names\nfrom (\n  select\n   a.ID id,\n   a.\u90fd\u9053\u5e9c\u770c\u540d pref,\n   b.\u3086\u308b\u30ad\u30e3\u30e9\u540d yuruc,\n   b.\u30bd\u30fc\u30c8 sort_key\n  from\n   \u8868A a\n  left join\n   \u8868B b\n  on a.ID = b.ID ) tab\ngroup by tab.id,tab.pref\norder by tab.id;\n\n\n\u7d50\u679c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n\n\nid\npref\nyuruc_names\n\n\n\n\n1\n\u611b\u5a9b\u770c\n\u30d0\u30ea\u30a3\u3055\u3093,\u307f\u304d\u3083\u3093\n\n\n2\n\u5cf6\u6839\u770c\n\u3057\u307e\u306d\u3063\u3053\n\n\n3\n\u5317\u6d77\u9053\n\u30ad\u30e5\u30f3\u3061\u3083\u3093,\u30a2\u30c3\u30af\u30de,\u30b3\u30a2\u30c3\u30af\u30de\n\n\n\n\n\u3072\u3068\u3053\u3068\nlistagg\u306e\u3042\u3068\u306ewithin group\u306f\u7701\u7565\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8868\u793a\u3059\u308b\u5024\u304c\n\u30bd\u30fc\u30c8\u30ad\u30fc\u3092\u3082\u305f\u306a\u3044\u3068\u304d\u3001\n\nyuruchara_nosort.sql\nselect\n tab.id,\n tab.pref,\n listagg(tab.yuruc,',') within group (order by null) yuruc_names\n(\u4ee5\u4e0b\u7d9a\u304f)\n\n\n\u3068\u8a18\u8f09\u3057\u3066\u304a\u304f\u3002\nSQL\u306e\u6539\u884c\u304c\u3044\u3051\u3066\u306a\u3044\u306e\u306f\u304a\u3044\u304a\u3044\u30fb\u30fb\u30fb(\u00b4\u30fb\u03c9\u30fb\uff40)\n#LISTAGG\u95a2\u6570\u306b\u3064\u3044\u3066\n\n##\u7528\u9014\nselect\u3057\u305f\u7d50\u679c\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8868\u793a\u3057\u305f\u3044\u6642\u306a\u3069\u3002\n\n##\u4f7f\u3044\u65b9\n\n__\u8868A__\n\n| ID | \u90fd\u9053\u5e9c\u770c\u540d |\n|:--|:------|\n| 1 | \u611b\u5a9b\u770c |\n| 2 | \u5cf6\u6839\u770c |\n| 3 | \u5317\u6d77\u9053 |\n\n__\u8868B__\n\n| ID | \u3086\u308b\u30ad\u30e3\u30e9\u540d | \u30bd\u30fc\u30c8 |\n|:--|:------|:------|\n| 1 | \u30d0\u30ea\u30a3\u3055\u3093 | 1 |\n| 1 | \u307f\u304d\u3083\u3093 | 2 |\n| 2 | \u3057\u307e\u306d\u3063\u3053 | 1 |\n| 3 | \u30ad\u30e5\u30f3\u3061\u3083\u3093 | 1 |\n| 3 | \u30a2\u30c3\u30af\u30de | 2 |\n| 3 | \u30b3\u30a2\u30c3\u30af\u30de | 3 |\n\n\u4e0a\u8a18\uff12\u3064\u306e\u8868\u3092ID\u5217\u3067\u7d50\u5408\u3057\u3066\u3001\u3086\u308b\u30ad\u30e3\u30e9\u540d\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\n\u8868\u793a\u3057\u305f\u3044\u3068\u304d\n\n```SQL:yuruchara.sql\nselect\n tab.id,\n tab.pref,\n listagg(tab.yuruc,',') within group (order by tab.sort_key asc ) yuruc_names\nfrom (\n  select\n   a.ID id,\n   a.\u90fd\u9053\u5e9c\u770c\u540d pref,\n   b.\u3086\u308b\u30ad\u30e3\u30e9\u540d yuruc,\n   b.\u30bd\u30fc\u30c8 sort_key\n  from\n   \u8868A a\n  left join\n   \u8868B b\n  on a.ID = b.ID ) tab\ngroup by tab.id,tab.pref\norder by tab.id;\n```\n\n\u7d50\u679c\u306f\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n| id | pref | yuruc_names |\n|:--|:------|:------|\n| 1 | \u611b\u5a9b\u770c | \u30d0\u30ea\u30a3\u3055\u3093,\u307f\u304d\u3083\u3093 |\n| 2 | \u5cf6\u6839\u770c | \u3057\u307e\u306d\u3063\u3053 |\n| 3 | \u5317\u6d77\u9053 |\u30ad\u30e5\u30f3\u3061\u3083\u3093,\u30a2\u30c3\u30af\u30de,\u30b3\u30a2\u30c3\u30af\u30de |\n\n##\u3072\u3068\u3053\u3068\nlistagg\u306e\u3042\u3068\u306ewithin group\u306f\u7701\u7565\u3067\u304d\u306a\u3044\u306e\u3067\u3001\u30ab\u30f3\u30de\u533a\u5207\u308a\u3067\u8868\u793a\u3059\u308b\u5024\u304c\n\u30bd\u30fc\u30c8\u30ad\u30fc\u3092\u3082\u305f\u306a\u3044\u3068\u304d\u3001\n\n```SQL:yuruchara_nosort.sql\nselect\n tab.id,\n tab.pref,\n listagg(tab.yuruc,',') within group (order by null) yuruc_names\n(\u4ee5\u4e0b\u7d9a\u304f)\n```\n\n\u3068\u8a18\u8f09\u3057\u3066\u304a\u304f\u3002\n\nSQL\u306e\u6539\u884c\u304c\u3044\u3051\u3066\u306a\u3044\u306e\u306f\u304a\u3044\u304a\u3044\u30fb\u30fb\u30fb(\u00b4\u30fb\u03c9\u30fb\uff40)\n", "tags": ["oracle", "SQL"]}