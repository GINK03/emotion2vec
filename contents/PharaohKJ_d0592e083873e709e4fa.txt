{"context": " More than 1 year has passed since last update.\n\nnginx redirect to Github Pages\n\n\u3064\u307e\u308a\n\n\u904b\u55b6\u3057\u305f\u3044URL(\u30b5\u30fc\u30d0) http://takagi.makei.nu\n\u904b\u55b6\u3057\u305f\u3044\u30b3\u30f3\u30c6\u30f3\u30c4 http://pharaohkj.github.io/takagi.makei.nu/)\n\n\u3068\u3042\u3063\u3066\u3001\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7 nginx \u3092\u4f7f\u3063\u3066\u3001github-pages\u306e\u30a4\u30f3\u30d5\u30e9\u3092\u4f7f\u308f\u305b\u3066\u3082\u3089\u304a\u3046\u3068\u3044\u3046\u8a71\u3002\n\n\u307e\u305agithub-pages\n\nGithub\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3002\u4eca\u56de\u306f takagi.makei.nu\n\n\ngh-pages \u3068\u3044\u3046\u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u308b\n\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u66f8\u304f\n\nhttp://pharaohkj.github.io/takagi.makei.nu/ \u3067\u30da\u30fc\u30b8\u304c\u898b\u3089\u308c\u308b\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\nnginx\u306econf\u3092\u66f8\u304f\n\nCentOS\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u306f /etc/nginx/conf.d/xxx.conf\u306b\u66f8\u304f\u6d41\u5100\u3089\u3057\u3044\u306e\u3067\u3001/etc/nginx/conf.d/takagimakei.nu.conf\u3092\u4f5c\u6210\n\u4e2d\u8eab\u306f\u3053\u3093\u306a\u611f\u3058\n\n\nserver_name \u306f cname/a \u30ec\u30b3\u30fc\u30c9\u3067\u8a2d\u5b9a\u3057\u305f\u3082\u306e\nredirect\u306e\u30ed\u30b0\u306f\u51fa\u3057\u3066\u304a\u304f(notice\u3058\u3083\u306a\u3044\u3068\u51fa\u306a\u3044\u3089\u3057\u3044)\n\u66f8\u3044\u305f\u3089 /etc/init.d/nginx configtest \u304b\u3089\u306e service nginx reload\n\n\n\n\nserver {\n        access_log /var/log/nginx/takagi.makei.nu.access.log main;\n        error_log /var/log/nginx/takagi.makei.nu.error.log notice;\n        server_name takagi.makei.nu;\n        rewrite_log on;\n        # rewrite ^(.*) http://pharaohkj.github.io/takagi.makei.nu$1 ;\n        location / {\n                rewrite ^/(.+) $1 break;\n                proxy_pass http://pharaohkj.github.io/takagi.makei.nu/$1;\n        }\n}\n\n\n\u30c6\u30b9\u30c8\ncurl\u3092\u8a73\u7d30\u51fa\u529b\u5b9f\u884c\u3067\u30d8\u30c3\u30c0\u3084\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u307f\u3089\u308c\u3066\u308f\u304b\u308a\u3084\u3059\u3044\u3002\u3042\u3068\u3001nginx\u306e\u30ed\u30b0\u3082\u898b\u308b\u3053\u3068\u3002rewrite\u306f\u30cf\u30de\u308a\u3084\u3059\u3044\u3002\n$ curl http://takagi.makei.nu -v\n* STATE: INIT => CONNECT handle 0x60002d7e0; line 1011 (connection #-5000)\n* Rebuilt URL to: http://takagi.makei.nu/\n* Hostname was NOT found in DNS cache\n*   Trying 49.212.145.99...\n* Adding handle: conn: 0x60006a4d0\n* Adding handle: send: 0\n* Adding handle: recv: 0\n* Curl_addHandleToPipeline: length: 1\n* 0x60002d7e0 is at send pipe head!\n* - Conn 0 (0x60006a4d0) send_pipe: 1, recv_pipe: 0\n* STATE: CONNECT => WAITCONNECT handle 0x60002d7e0; line 1058 (connection #0)\n* Connected to takagi.makei.nu (49.212.145.99) port 80 (#0)\n* STATE: WAITCONNECT => DO handle 0x60002d7e0; line 1177 (connection #0)\n> GET / HTTP/1.1\n> User-Agent: curl/7.37.0\n> Host: takagi.makei.nu\n> Accept: */*\n>\n* STATE: DO => DO_DONE handle 0x60002d7e0; line 1263 (connection #0)\n* STATE: DO_DONE => WAITPERFORM handle 0x60002d7e0; line 1384 (connection #0)\n* STATE: WAITPERFORM => PERFORM handle 0x60002d7e0; line 1395 (connection #0)\n* HTTP 1.1 or later with persistent connection, pipelining supported\n< HTTP/1.1 200 OK\n* Server nginx/1.6.0 is not blacklisted\n< Server: nginx/1.6.0\n< Date: Tue, 16 Sep 2014 10:13:24 GMT\n< Content-Type: text/html; charset=utf-8\n< Content-Length: 1041\n< Connection: keep-alive\n< Last-Modified: Tue, 16 Sep 2014 04:04:34 GMT\n< Expires: Tue, 16 Sep 2014 10:23:24 GMT\n< Cache-Control: max-age=600\n< Accept-Ranges: bytes\n< Via: 1.1 varnish\n< Age: 0\n< X-Served-By: cache-ty68-TYO\n< X-Cache: MISS\n< X-Cache-Hits: 0\n< X-Timer: S1410862404.676017,VS0,VE170\n< Vary: Accept-Encoding\n<\n\n(\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u4e2d\u8eab)\n\n\n# nginx redirect to Github Pages #\n\n## \u3064\u307e\u308a\n\n- \u904b\u55b6\u3057\u305f\u3044URL(\u30b5\u30fc\u30d0) [http://takagi.makei.nu](http://takagi.makei.nu)\n\n- \u904b\u55b6\u3057\u305f\u3044\u30b3\u30f3\u30c6\u30f3\u30c4 [http://pharaohkj.github.io/takagi.makei.nu/](http://pharaohkj.github.io/takagi.makei.nu/))\n\n\u3068\u3042\u3063\u3066\u3001\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7 nginx \u3092\u4f7f\u3063\u3066\u3001github-pages\u306e\u30a4\u30f3\u30d5\u30e9\u3092\u4f7f\u308f\u305b\u3066\u3082\u3089\u304a\u3046\u3068\u3044\u3046\u8a71\u3002\n\n## \u307e\u305agithub-pages\n\n1. Github\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3002\u4eca\u56de\u306f *takagi.makei.nu*\n2. **gh-pages** \u3068\u3044\u3046\u30d6\u30e9\u30f3\u30c1\u3092\u4f5c\u308b\n3. \u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u66f8\u304f\n4. http://pharaohkj.github.io/takagi.makei.nu/ \u3067\u30da\u30fc\u30b8\u304c\u898b\u3089\u308c\u308b\u306e\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n## nginx\u306econf\u3092\u66f8\u304f\n\n1. CentOS\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u306f `/etc/nginx/conf.d/xxx.conf`\u306b\u66f8\u304f\u6d41\u5100\u3089\u3057\u3044\u306e\u3067\u3001`/etc/nginx/conf.d/takagimakei.nu.conf`\u3092\u4f5c\u6210\n2. \u4e2d\u8eab\u306f\u3053\u3093\u306a\u611f\u3058\n  - server_name \u306f cname/a \u30ec\u30b3\u30fc\u30c9\u3067\u8a2d\u5b9a\u3057\u305f\u3082\u306e\n  - redirect\u306e\u30ed\u30b0\u306f\u51fa\u3057\u3066\u304a\u304f(notice\u3058\u3083\u306a\u3044\u3068\u51fa\u306a\u3044\u3089\u3057\u3044)\n  - \u66f8\u3044\u305f\u3089 `/etc/init.d/nginx configtest` \u304b\u3089\u306e `service nginx reload`\n\n``` \nserver {\n        access_log /var/log/nginx/takagi.makei.nu.access.log main;\n        error_log /var/log/nginx/takagi.makei.nu.error.log notice;\n        server_name takagi.makei.nu;\n        rewrite_log on;\n        # rewrite ^(.*) http://pharaohkj.github.io/takagi.makei.nu$1 ;\n        location / {\n                rewrite ^/(.+) $1 break;\n                proxy_pass http://pharaohkj.github.io/takagi.makei.nu/$1;\n        }\n}\n```\n\n## \u30c6\u30b9\u30c8\n\ncurl\u3092\u8a73\u7d30\u51fa\u529b\u5b9f\u884c\u3067\u30d8\u30c3\u30c0\u3084\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u307f\u3089\u308c\u3066\u308f\u304b\u308a\u3084\u3059\u3044\u3002\u3042\u3068\u3001nginx\u306e\u30ed\u30b0\u3082\u898b\u308b\u3053\u3068\u3002rewrite\u306f\u30cf\u30de\u308a\u3084\u3059\u3044\u3002\n\n```\n$ curl http://takagi.makei.nu -v\n* STATE: INIT => CONNECT handle 0x60002d7e0; line 1011 (connection #-5000)\n* Rebuilt URL to: http://takagi.makei.nu/\n* Hostname was NOT found in DNS cache\n*   Trying 49.212.145.99...\n* Adding handle: conn: 0x60006a4d0\n* Adding handle: send: 0\n* Adding handle: recv: 0\n* Curl_addHandleToPipeline: length: 1\n* 0x60002d7e0 is at send pipe head!\n* - Conn 0 (0x60006a4d0) send_pipe: 1, recv_pipe: 0\n* STATE: CONNECT => WAITCONNECT handle 0x60002d7e0; line 1058 (connection #0)\n* Connected to takagi.makei.nu (49.212.145.99) port 80 (#0)\n* STATE: WAITCONNECT => DO handle 0x60002d7e0; line 1177 (connection #0)\n> GET / HTTP/1.1\n> User-Agent: curl/7.37.0\n> Host: takagi.makei.nu\n> Accept: */*\n>\n* STATE: DO => DO_DONE handle 0x60002d7e0; line 1263 (connection #0)\n* STATE: DO_DONE => WAITPERFORM handle 0x60002d7e0; line 1384 (connection #0)\n* STATE: WAITPERFORM => PERFORM handle 0x60002d7e0; line 1395 (connection #0)\n* HTTP 1.1 or later with persistent connection, pipelining supported\n< HTTP/1.1 200 OK\n* Server nginx/1.6.0 is not blacklisted\n< Server: nginx/1.6.0\n< Date: Tue, 16 Sep 2014 10:13:24 GMT\n< Content-Type: text/html; charset=utf-8\n< Content-Length: 1041\n< Connection: keep-alive\n< Last-Modified: Tue, 16 Sep 2014 04:04:34 GMT\n< Expires: Tue, 16 Sep 2014 10:23:24 GMT\n< Cache-Control: max-age=600\n< Accept-Ranges: bytes\n< Via: 1.1 varnish\n< Age: 0\n< X-Served-By: cache-ty68-TYO\n< X-Cache: MISS\n< X-Cache-Hits: 0\n< X-Timer: S1410862404.676017,VS0,VE170\n< Vary: Accept-Encoding\n<\n\n(\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u4e2d\u8eab)\n\n```\n", "tags": ["GitHub", "github-pages", "nginx"]}