{"context": " More than 1 year has passed since last update.slappasswd -c \"$1$%.8s\" \u3092\u5b9f\u884c\u3057\u305f\u969b\u306e\u52d5\u4f5c\u3092\u3001\u30bd\u30fc\u30b9\u3092\u8aad\u3093\u3067\u304b\u3058\u3063\u305f\u3002OpenLDAP\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.4.40\u3002\n\n\u52d5\u4f5c\u306e\u6982\u8981\n\u3056\u3063\u304f\u308a\u8a00\u3063\u3066\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u3059\u308b\u3002\n\n\n$1$%.8s \u306e %.8s \u3092\u3001\u30e9\u30f3\u30c0\u30e0\u306a8\u6587\u5b57\u306e\u30bd\u30eb\u30c8\u306b\u7f6e\u304d\u63db\u3048\u308b\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30681.\u3067\u751f\u6210\u3057\u305f\u30bd\u30eb\u30c8\u3092\u3001crypt(*key, *salt)\u306b\u6e21\u3059\ncrypt\u306e\u8fd4\u308a\u5024\u306e\u5148\u982d\u306b\u3001{CRYPT}\u3092\u3064\u3051\u308b\n\n\n\u3082\u3046\u3061\u3087\u3063\u3068\u8a73\u3057\u304f\n\nslappasswd.c\nOpenLDAP Source Repository - openldap.git/blob - servers/slapd/slappasswd.c\n\u307e\u305a\u3001 [openldap.git] / servers / slapd / slappasswd.c \u306e int slappasswd() \u304c\u547c\u3070\u308c\u308b\u3002\nl.128 \u3067 -c\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u30d1\u30fc\u30b9\u3059\u308b\u3002l.130\u306elutil_salt_format\u3067\u3001static\u5909\u6570\u306b\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6e21\u3057\u305f\u6587\u5b57\u5217\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\nslappasswd.c\n 128                 case 'c':       /* crypt salt format */\n 129                         scheme = \"{CRYPT}\";\n 130                         lutil_salt_format( optarg );\n 131                         break;\n\n\nl.259\u3067lutil_passwd_hash\u3092\u547c\u3073\u51fa\u3059\u3002&passwd\u306e\u69cb\u9020\u4f53\u306b\u3001\u6c42\u3081\u308b\u6697\u53f7\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5165\u308b\u3002\n\nslappasswd.c\n 259         lutil_passwd_hash( &passwd, scheme, &hash, &text );\n\n\n\npasswd.c\nOpenLDAP Source Repository - openldap.git/blob - libraries/liblutil/passwd.c\nlutil_passwd_hash\u306f[openldap.git] / libraries / liblutil / passwd.c \u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3002\n\npasswd.c\n 376 int lutil_passwd_hash(\n ...\n 382         const struct pw_scheme *sc = get_scheme( method );\n ...\n 399         return (sc->hash_fn)( &sc->name, passwd, hash, text );\n\n\nl.382\u3067\u3001{CRYPT}\u306b\u5bfe\u5fdc\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u6697\u53f7\u5316\u306e\u69cb\u9020\u4f53\u3092\u53d6\u3063\u3066\u304d\u3066\u3001l.399\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u6697\u53f7\u5316\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3002\n\npasswd.c\n171         { BER_BVC(\"{CRYPT}\"),           chk_crypt, hash_crypt },\n\n\nget_scheme \u304b\u3089\u3001l.171\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u69cb\u9020\u4f53\u3092\u53d7\u3051\u53d6\u308b\u306e\u3067\u3001hash_crypt\u304c\u547c\u3070\u308c\u308b\u3002\n\npasswd.c\n1184 static int hash_crypt(\n...\n1205         if( lutil_entropy( salt, sizeof( salt ) ) < 0 ) {\n1206                 return LUTIL_PASSWD_ERR; \n1207         }\n1208\n1209         for( i=0; i< ( sizeof(salt) - 1 ); i++ ) {\n1210                 salt[i] = crypt64[ salt[i] % (sizeof(crypt64)-1) ];\n1211         }\n1212         salt[sizeof( salt ) - 1 ] = '\\0';\n...\n1222         rc = lutil_cryptptr( passwd->bv_val, (char *) salt, &hash->bv_val );\n\n\nl.1205-l.1212\u3067\u30bd\u30eb\u30c8\u3092\u751f\u6210\u3059\u308b\u3002l.1205\u3067\u4e71\u6570\u3092\u3064\u304f\u308a\u30011.1209-1210\u3067Base64\u3067\u89e3\u91c8\u3067\u304d\u308b\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u3002lutil_entropy\u306fpassword.c\u3068\u540c\u4e00\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306eentropy.c\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3002\nl.1222\u3067crypt\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u30bd\u30eb\u30c8\u3092\u5f15\u304d\u6e21\u3059\u95a2\u6570\u3092\u547c\u3076\u3002\n\npasswd.c\n  98 lutil_cryptfunc *lutil_cryptptr = lutil_crypt;\n...\n 899 static int lutil_crypt(\n...\n 904         char *cr = crypt( key, salt );\n\n\nlutil_crypt_ptr \u306e\u5b9f\u4f53\u306f lutil_crypt\u3067\u3001\u305d\u306e\u5185\u90e8\u3067crypt\u3092\u547c\u3076\u3002\n\n\u53c2\u8003\n\nuserPassword \u306f\u3042\u3048\u3066 {CRYPT} - JULY\u306e\u65e5\u8a18\nMan page of CRYPT\nOpenLDAP, Source Repository\nOpenLDAP, Public License for 2.4.40\n\n```slappasswd -c \"$1$%.8s\"``` \u3092\u5b9f\u884c\u3057\u305f\u969b\u306e\u52d5\u4f5c\u3092\u3001\u30bd\u30fc\u30b9\u3092\u8aad\u3093\u3067\u304b\u3058\u3063\u305f\u3002OpenLDAP\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f2.4.40\u3002\n\n## \u52d5\u4f5c\u306e\u6982\u8981\n\n\u3056\u3063\u304f\u308a\u8a00\u3063\u3066\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u3059\u308b\u3002\n\n1. ```$1$%.8s``` \u306e ```%.8s``` \u3092\u3001\u30e9\u30f3\u30c0\u30e0\u306a8\u6587\u5b57\u306e\u30bd\u30eb\u30c8\u306b\u7f6e\u304d\u63db\u3048\u308b\n2. \u30d1\u30b9\u30ef\u30fc\u30c9\u30681.\u3067\u751f\u6210\u3057\u305f\u30bd\u30eb\u30c8\u3092\u3001```crypt(*key, *salt)```\u306b\u6e21\u3059\n3. crypt\u306e\u8fd4\u308a\u5024\u306e\u5148\u982d\u306b\u3001```{CRYPT}```\u3092\u3064\u3051\u308b\n\n## \u3082\u3046\u3061\u3087\u3063\u3068\u8a73\u3057\u304f\n\n### slappasswd.c\n\n[OpenLDAP Source Repository - openldap.git/blob - servers/slapd/slappasswd.c](http://www.openldap.org/devel/gitweb.cgi?p=openldap.git;a=blob;f=servers/slapd/slappasswd.c;h=7b698628347d1582a87ebdb22cce59bc94764415;hb=e648bdc22cd654d371a224a88973f986f67ba499)\n\n\u307e\u305a\u3001 [openldap.git] / servers / slapd / slappasswd.c \u306e int slappasswd() \u304c\u547c\u3070\u308c\u308b\u3002\n\nl.128 \u3067 -c\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u30d1\u30fc\u30b9\u3059\u308b\u3002l.130\u306e```lutil_salt_format```\u3067\u3001static\u5909\u6570\u306b\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6e21\u3057\u305f\u6587\u5b57\u5217\u304c\u4fdd\u5b58\u3055\u308c\u308b\u3002\n\n```slappasswd.c\n 128                 case 'c':       /* crypt salt format */\n 129                         scheme = \"{CRYPT}\";\n 130                         lutil_salt_format( optarg );\n 131                         break;\n```\n\nl.259\u3067```lutil_passwd_hash```\u3092\u547c\u3073\u51fa\u3059\u3002```&passwd```\u306e\u69cb\u9020\u4f53\u306b\u3001\u6c42\u3081\u308b\u6697\u53f7\u5316\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5165\u308b\u3002\n\n```slappasswd.c\n 259         lutil_passwd_hash( &passwd, scheme, &hash, &text );\n```\n\n### passwd.c\n\n[OpenLDAP Source Repository - openldap.git/blob - libraries/liblutil/passwd.c](http://www.openldap.org/devel/gitweb.cgi?p=openldap.git;a=blob;f=libraries/liblutil/passwd.c;h=383f32d8ffe9c5553f21dffa9362719ac24fe603;hb=e648bdc22cd654d371a224a88973f986f67ba499)\n\n```lutil_passwd_hash```\u306f[openldap.git] / libraries / liblutil / passwd.c \u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3002\n\n```passwd.c\n 376 int lutil_passwd_hash(\n ...\n 382         const struct pw_scheme *sc = get_scheme( method );\n ...\n 399         return (sc->hash_fn)( &sc->name, passwd, hash, text );\n```\n\nl.382\u3067\u3001{CRYPT}\u306b\u5bfe\u5fdc\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u6697\u53f7\u5316\u306e\u69cb\u9020\u4f53\u3092\u53d6\u3063\u3066\u304d\u3066\u3001l.399\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u6697\u53f7\u5316\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3002\n\n```passwd.c\n171         { BER_BVC(\"{CRYPT}\"),           chk_crypt, hash_crypt },\n```\n\n```get_scheme``` \u304b\u3089\u3001l.171\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u69cb\u9020\u4f53\u3092\u53d7\u3051\u53d6\u308b\u306e\u3067\u3001```hash_crypt```\u304c\u547c\u3070\u308c\u308b\u3002\n\n```passwd.c\n1184 static int hash_crypt(\n...\n1205         if( lutil_entropy( salt, sizeof( salt ) ) < 0 ) {\n1206                 return LUTIL_PASSWD_ERR; \n1207         }\n1208\n1209         for( i=0; i< ( sizeof(salt) - 1 ); i++ ) {\n1210                 salt[i] = crypt64[ salt[i] % (sizeof(crypt64)-1) ];\n1211         }\n1212         salt[sizeof( salt ) - 1 ] = '\\0';\n...\n1222         rc = lutil_cryptptr( passwd->bv_val, (char *) salt, &hash->bv_val );\n```\nl.1205-l.1212\u3067\u30bd\u30eb\u30c8\u3092\u751f\u6210\u3059\u308b\u3002l.1205\u3067\u4e71\u6570\u3092\u3064\u304f\u308a\u30011.1209-1210\u3067Base64\u3067\u89e3\u91c8\u3067\u304d\u308b\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u3002```lutil_entropy```\u306fpassword.c\u3068\u540c\u4e00\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306e[entropy.c](http://www.openldap.org/devel/gitweb.cgi?p=openldap.git;a=blob;f=libraries/liblutil/entropy.c;h=fddeea4ab9a0e46d9bcc0d1ecf0798cdca5addd7;hb=e648bdc22cd654d371a224a88973f986f67ba499)\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u3002\n\nl.1222\u3067```crypt```\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u30bd\u30eb\u30c8\u3092\u5f15\u304d\u6e21\u3059\u95a2\u6570\u3092\u547c\u3076\u3002\n\n```passwd.c\n  98 lutil_cryptfunc *lutil_cryptptr = lutil_crypt;\n...\n 899 static int lutil_crypt(\n...\n 904         char *cr = crypt( key, salt );\n```\n```lutil_crypt_ptr``` \u306e\u5b9f\u4f53\u306f ```lutil_crypt```\u3067\u3001\u305d\u306e\u5185\u90e8\u3067```crypt```\u3092\u547c\u3076\u3002\n\n\n\n## \u53c2\u8003\n\n* [userPassword \u306f\u3042\u3048\u3066 {CRYPT} - JULY\u306e\u65e5\u8a18](http://d.hatena.ne.jp/JULY/20130223)\n* [Man page of CRYPT](http://linuxjm.sourceforge.jp/html/LDP_man-pages/man3/crypt.3.html)\n* [OpenLDAP, Source Repository](http://www.openldap.org/software/repo.html)\n* [OpenLDAP, Public License for 2.4.40](http://www.openldap.org/software/release/license.html)\n", "tags": ["openldap", "C"]}