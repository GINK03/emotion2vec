{"tags": ["cookbooks", "chef", "opsworks"], "context": " More than 1 year has passed since last update.\n\n\u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u304b\u30891\u5e74\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002 \u6c17\u3092\u3064\u3051\u3066\u306d\u3002\n\nohai\u30b3\u30de\u30f3\u30c9\u3067\u51fa\u529b\u3055\u308c\u308bJson\u306f\u3001Ohai\u30d7\u30e9\u30b0\u30a4\u30f3\u9054\u306b\u3088\u308bautomatic attributes\u3067\u3059\u3002\n\u3053\u308c\u306f\u3053\u308c\u3067\u826f\u3044\u3067\u3059\u304c\u3001Chef\u3067\u306fCookbook\u306e\u306a\u304b\u3067\u3069\u3093\u3069\u3093Attributes\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\u3088\u3046\u306b\u4f5c\u3089\u308c\u3066\u3044\u308b\u305f\u3081\u3001ChefServer\u304c\u306a\u3044\u74b0\u5883\u3067\u306f\u6700\u7d42\u7684\u306bnode\u304c\u6301\u3064attributes\u306f\u304b\u306a\u308a\u62e1\u5f35\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u610f\u5916\u3068\u77e5\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\nnode\u306fMash\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(Hash\u62e1\u5f35)\u306a\u306e\u3067\u3001\u6298\u89d2\u3060\u304b\u3089\u30c0\u30f3\u30d7\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u30ec\u30b7\u30d4\n\nnode_dump/recipes/default.rb\nrequire 'json'\n\nfile \"/tmp/dna.json\" do\n  content JSON.pretty_generate(node)\nend\n\n\n\u3053\u308c\u3092run_list\u306e\u6700\u5f8c\u306b\u3067\u3082\u5165\u308c\u3066\u304a\u3051\u3070\u3001\u6700\u7d42\u7684\u306bnode\u304c\u3082\u3064attributes\u304c\u78ba\u8a8d\u3067\u304d\u3066debug\u7b49\u306b\u4f7f\u3048\u307e\u3059\u3002\n\n\u3064\u3044\u3067\u306bAWS OpsWorks\u3067\u8ffd\u52a0\u3055\u308c\u308bAttributes\u3092\u78ba\u8a8d\u3059\u308b\n\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u304cAWS OpsWorks\u306b\u3064\u3044\u3066\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\nAWS OpsWorks\u3067\u6301\u3063\u3066\u3044\u308b\u5024\u3092Custom Chef Recipe\u306e\u4e2d\u3067\u4f7f\u3044\u305f\u3044\uff01 \uff5c Developers.IO:\n\n\u672c\u5f53\u306fApplication\u306e\u5024\u3060\u3051\u3067\u306a\u304f\u3066\u3001Layer\u3068\u304bStack\u3067\u6c7a\u3081\u305f\u5024\u3082\u53d6\u308c\u308b\u304b\u306a\u3068\u671f\u5f85\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u898b\u3064\u3051\u308b\u4e8b\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3082\u3057\u304b\u3057\u305f\u3089\u4ed6\u306e\u3068\u3053\u308d\u306b\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u898b\u3064\u3051\u6b21\u7b2c\u8ffd\u8a18\u3057\u307e\u3059\u3002 \n\n\u30ab\u30b9\u30bf\u30e0\u30ec\u30b7\u30d4\u3068\u3057\u3066configure\u306ecustom recipe\u30ea\u30b9\u30c8\u306b\u5148\u307b\u3069\u306e\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\nnode[:opsworks]\u4ee5\u4e0b\u306bstack\u306e\u60c5\u5831\u304c\u3042\u308a\u307e\u3059\u306d\u3002\n\n/tmp/dna.json\n{\n    \"json_class\": \"Chef::Node\",\n    \"chef_type\": \"node\",\n    \"override\": {\n        \"etc\": {\n            \"passwd\": {\n              }\n          },\n        \"deploy\": {\n          }\n      },\n    \"automatic\": {\n\"--snip--\": null\n      },\n    \"run_list\": [\n      \"recipe[opsworks_custom_cookbooks::load]\",\n      \"recipe[opsworks_custom_cookbooks::execute]\"\n    ],\n    \"normal\": {\n        \"tags\": [\n\n        ],\n        \"opsworks_bundler\": {\n            \"version\": \"1.0.10\",\n            \"manage_package\": null\n          },\n        \"opsworks_test_suite_loader\": {\n            \"minitest_chef_handler\": {\n                \"version\": \"0.6.7\"\n              }\n          },\n        \"opsworks_rubygems\": {\n            \"version\": \"1.8.24\"\n          },\n        \"etc\": {\n            \"passwd\": {\n              }\n          },\n        \"packages\": {\n            \"dist_only\": false\n          },\n        \"opsworks_custom_cookbooks\": {\n            \"scm\": {\n                \"repository\": \"git://github.com/higanworks/opsworks-cookbooks.git\",\n                \"type\": \"git\",\n                \"revision\": null,\n                \"user\": null,\n                \"ssh_key\": null,\n                \"password\": null\n              },\n            \"enabled\": true,\n            \"recipes\": [\n              \"opsworks_ganglia::configure-client\",\n              \"ssh_users\",\n              \"agent_version\",\n              \"opsworks_stack_state_sync\",\n              \"node_dump::default\",\n              \"test_suite\",\n              \"opsworks_cleanup\"\n            ]\n          },\n        \"nginx\": {\n            \"binary\": \"/usr/sbin/nginx\",\n            \"log_dir\": \"/var/log/nginx\",\n            \"user\": \"www-data\",\n            \"dir\": \"/etc/nginx\"\n          },\n        \"runit\": {\n            \"service_dir\": \"/etc/service\",\n            \"chpst_bin\": \"/usr/bin/chpst\",\n            \"sv_dir\": \"/etc/sv\",\n            \"sv_bin\": \"/usr/bin/sv\"\n          },\n        \"deploy\": {\n            \"wp\": {\n                \"deploy_to\": \"/srv/www/wp\",\n                \"mounted_at\": null,\n                \"document_root\": null,\n                \"symlinks\": {\n                  },\n                \"database\": {\n                    \"database\": \"wp\",\n                    \"username\": \"root\",\n                    \"reconnect\": true,\n                    \"host\": null,\n                    \"password\": \"wiuhfzhstl\"\n                  },\n                \"scm\": {\n                    \"repository\": \"git://github.com/WordPress/WordPress.git\",\n                    \"revision\": \"3.5.1\",\n                    \"user\": null,\n                    \"scm_type\": \"git\",\n                    \"ssh_key\": null,\n                    \"password\": null\n                  },\n                \"restart_command\": \"echo 'restarting app'\",\n                \"migrate\": false,\n                \"sleep_before_restart\": 0,\n                \"ssl_certificate_key\": null,\n                \"group\": \"www-data\",\n                \"user\": \"www-data\",\n                \"domains\": [\n                  \"wp\"\n                ],\n                \"ssl_support\": false,\n                \"ssl_certificate\": null,\n                \"application\": \"wp\",\n                \"application_type\": \"php\",\n                \"memcached\": {\n                    \"host\": null,\n                    \"port\": 11211\n                  },\n                \"rails_env\": null,\n                \"ssl_certificate_ca\": null,\n                \"symlink_before_migrate\": {\n                    \"config/opsworks.php\": \"opsworks.php\"\n                  },\n                \"auto_bundle_on_deploy\": true\n              },\n            \"c5\": {\n                \"deploy_to\": \"/srv/www/c5\",\n                \"mounted_at\": null,\n                \"document_root\": \"web\",\n                \"symlinks\": {\n                  },\n                \"database\": {\n                    \"database\": \"c5\",\n                    \"username\": \"root\",\n                    \"reconnect\": true,\n                    \"host\": null,\n                    \"password\": \"wiuhfzhstl\"\n                  },\n                \"scm\": {\n                    \"repository\": \"git://github.com/concrete5/concrete5.git\",\n                    \"revision\": \"5.6.1.2\",\n                    \"user\": null,\n                    \"scm_type\": \"git\",\n                    \"ssh_key\": null,\n                    \"password\": null\n                  },\n                \"restart_command\": \"echo 'restarting app'\",\n                \"migrate\": false,\n                \"sleep_before_restart\": 0,\n                \"ssl_certificate_key\": null,\n                \"group\": \"www-data\",\n                \"user\": \"www-data\",\n                \"domains\": [\n                  \"c5\"\n                ],\n                \"ssl_support\": false,\n                \"ssl_certificate\": null,\n                \"application\": \"c5\",\n                \"application_type\": \"php\",\n                \"memcached\": {\n                    \"host\": null,\n                    \"port\": 11211\n                  },\n                \"rails_env\": null,\n                \"ssl_certificate_ca\": null,\n                \"symlink_before_migrate\": {\n                    \"config/opsworks.php\": \"opsworks.php\"\n                  },\n                \"auto_bundle_on_deploy\": true\n              }\n          },\n        \"opsworks\": {\n            \"activity\": \"configure\",\n            \"instance\": {\n                \"instance_type\": \"m1.small\",\n                \"availability_zone\": \"ap-northeast-1a\",\n                \"private_dns_name\": \"ip-10-152-59-198.ap-northeast-1.compute.internal\",\n                \"backends\": 5,\n                \"aws_instance_id\": \"i-d84cf4da\",\n                \"region\": \"ap-northeast-1\",\n                \"public_dns_name\": \"ec2-176-34-13-248.ap-northeast-1.compute.amazonaws.com\",\n                \"layers\": [\n                  \"dump\"\n                ],\n                \"id\": \"e6a12795-52d1-4acc-a047-a8ceef5624a6\",\n                \"hostname\": \"dump2\",\n                \"ip\": \"176.34.13.248\",\n                \"private_ip\": \"10.152.59.198\",\n                \"architecture\": \"x86_64\"\n              },\n            \"stack\": {\n                \"name\": \"all in one\"\n              },\n            \"valid_client_activities\": [\n              \"reboot\",\n              \"stop\",\n              \"setup\",\n              \"configure\",\n              \"update_dependencies\",\n              \"install_dependencies\",\n              \"update_custom_cookbooks\",\n              \"execute_recipes\"\n            ],\n            \"ruby_stack\": \"ruby_enterprise\",\n            \"ruby_version\": \"1.8.7\",\n            \"deployment\": null,\n            \"rails_stack\": {\n                \"name\": null\n              },\n            \"agent_version\": \"119\",\n            \"applications\": [\n              {\n                  \"slug_name\": \"c5\",\n                  \"application_type\": \"php\",\n                  \"name\": \"c5\"\n                },\n              {\n                  \"slug_name\": \"wp\",\n                  \"application_type\": \"php\",\n                  \"name\": \"wp\"\n                }\n            ],\n            \"layers\": {\n                \"wp\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"WP\",\n                    \"id\": \"f32f8e1b-30d1-44a6-8d99-b90dad09958c\"\n                  },\n                \"db-master\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"MySQL Master\",\n                    \"id\": \"e554fc61-25f0-4cde-ab21-0fb890f586b6\"\n                  },\n                \"php-app\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"PHP Application Server\",\n                    \"id\": \"d4ebe207-567f-4547-8e2d-403cd80cb81d\"\n                  },\n                \"dump\": {\n                    \"instances\": {\n                        \"dump2\": {\n                            \"instance_type\": \"m1.small\",\n                            \"availability_zone\": \"ap-northeast-1a\",\n                            \"private_dns_name\": \"ip-10-152-59-198.ap-northeast-1.compute.internal\",\n                            \"elastic_ip\": null,\n                            \"status\": \"online\",\n                            \"created_at\": \"2013-05-22T14:35:58+00:00\",\n                            \"backends\": 5,\n                            \"aws_instance_id\": \"i-d84cf4da\",\n                            \"region\": \"ap-northeast-1\",\n                            \"public_dns_name\": \"ec2-176-34-13-248.ap-northeast-1.compute.amazonaws.com\",\n                            \"booted_at\": \"2013-05-22T14:37:12+00:00\",\n                            \"ip\": \"176.34.13.248\",\n                            \"private_ip\": \"10.152.59.198\"\n                          }\n                      },\n                    \"name\": \"dump\",\n                    \"id\": \"aab925b1-b2b5-4874-8624-465b538a64b3\"\n                  },\n                \"web\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"Web Server\",\n                    \"id\": \"fd723151-8212-4e81-b033-4374a718596d\"\n                  }\n              },\n            \"sent_at\": 1369234053\n          },\n        \"mysql\": {\n            \"grants_path\": \"/etc/mysql/grants.sql\",\n            \"socket\": \"/var/run/mysqld/mysqld.sock\",\n            \"server_root_password\": \"wiuhfzhstl\",\n            \"conf_dir\": \"/etc/mysql\",\n            \"pid_file\": \"/var/run/mysqld/mysqld.pid\",\n            \"confd_dir\": \"/etc/mysql/conf.d\"\n          },\n        \"platform?\": [\n          \"centos\",\n          \"redhat\",\n          \"fedora\",\n          \"amazon\"\n        ],\n        \"ssh_users\": {\n          }\n      },\n    \"name\": \"dump2.localdomain\"\n  }\n\n\n\n\u5f8c\u8a18\n\u79c1\u3082OpsWorks\u306eStack\u60c5\u5831\u3092\u4f7f\u304a\u3046\u3068\u3057\u3066\u3001opsworks-agent-cli\u306eJSON\u51fa\u529b\u3092\u7121\u7406\u3084\u308aattributes\u306b\u8d77\u3053\u3059Ohai\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u66f8\u3044\u3066Feedback\u304b\u3089\u901f\u653b\u9001\u4fe1\u3057\u305f\u3089\u300e\u30a4\u30a4\u30cd\u3001\u3067\u3082node[:opsworks]\u306b\u6700\u521d\u304b\u3089\u3042\u308b\u3093\u3060\u300f\u3068\u5e30\u3063\u3066\u304d\u305f\u306e\u3092\u601d\u3044\u51fa\u3057\u307e\u3057\u305f\u3002\n<!-- too_old -->\n> **\u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u304b\u30891\u5e74\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002** \u6c17\u3092\u3064\u3051\u3066\u306d\u3002\n\nohai\u30b3\u30de\u30f3\u30c9\u3067\u51fa\u529b\u3055\u308c\u308bJson\u306f\u3001Ohai\u30d7\u30e9\u30b0\u30a4\u30f3\u9054\u306b\u3088\u308b`automatic attributes`\u3067\u3059\u3002\n\n\u3053\u308c\u306f\u3053\u308c\u3067\u826f\u3044\u3067\u3059\u304c\u3001Chef\u3067\u306fCookbook\u306e\u306a\u304b\u3067\u3069\u3093\u3069\u3093Attributes\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\u3088\u3046\u306b\u4f5c\u3089\u308c\u3066\u3044\u308b\u305f\u3081\u3001`ChefServer`\u304c\u306a\u3044\u74b0\u5883\u3067\u306f\u6700\u7d42\u7684\u306b`node`\u304c\u6301\u3064`attributes`\u306f\u304b\u306a\u308a\u62e1\u5f35\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u610f\u5916\u3068\u77e5\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\n`node`\u306fMash\u30aa\u30d6\u30b8\u30a7\u30af\u30c8(Hash\u62e1\u5f35)\u306a\u306e\u3067\u3001\u6298\u89d2\u3060\u304b\u3089\u30c0\u30f3\u30d7\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n## \u30ec\u30b7\u30d4\n\n```ruby:node_dump/recipes/default.rb\nrequire 'json'\n\nfile \"/tmp/dna.json\" do\n  content JSON.pretty_generate(node)\nend\n```\n\n\u3053\u308c\u3092run_list\u306e\u6700\u5f8c\u306b\u3067\u3082\u5165\u308c\u3066\u304a\u3051\u3070\u3001\u6700\u7d42\u7684\u306bnode\u304c\u3082\u3064`attributes`\u304c\u78ba\u8a8d\u3067\u304d\u3066debug\u7b49\u306b\u4f7f\u3048\u307e\u3059\u3002\n\n\n## \u3064\u3044\u3067\u306bAWS OpsWorks\u3067\u8ffd\u52a0\u3055\u308c\u308bAttributes\u3092\u78ba\u8a8d\u3059\u308b\n\n\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3055\u3093\u304c**AWS OpsWorks**\u306b\u3064\u3044\u3066\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n[AWS OpsWorks\u3067\u6301\u3063\u3066\u3044\u308b\u5024\u3092Custom Chef Recipe\u306e\u4e2d\u3067\u4f7f\u3044\u305f\u3044\uff01 \uff5c Developers.IO:](http://dev.classmethod.jp/cloud/aws/opsworks-deploy-variable/)\n\n> \u672c\u5f53\u306fApplication\u306e\u5024\u3060\u3051\u3067\u306a\u304f\u3066\u3001Layer\u3068\u304bStack\u3067\u6c7a\u3081\u305f\u5024\u3082\u53d6\u308c\u308b\u304b\u306a\u3068\u671f\u5f85\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u898b\u3064\u3051\u308b\u4e8b\u304c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3082\u3057\u304b\u3057\u305f\u3089\u4ed6\u306e\u3068\u3053\u308d\u306b\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u898b\u3064\u3051\u6b21\u7b2c\u8ffd\u8a18\u3057\u307e\u3059\u3002 \n\n\u30ab\u30b9\u30bf\u30e0\u30ec\u30b7\u30d4\u3068\u3057\u3066`configure`\u306e`custom recipe`\u30ea\u30b9\u30c8\u306b\u5148\u307b\u3069\u306e\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\nnode[:opsworks]\u4ee5\u4e0b\u306bstack\u306e\u60c5\u5831\u304c\u3042\u308a\u307e\u3059\u306d\u3002\n\n\n```json:/tmp/dna.json\n{\n    \"json_class\": \"Chef::Node\",\n    \"chef_type\": \"node\",\n    \"override\": {\n        \"etc\": {\n            \"passwd\": {\n              }\n          },\n        \"deploy\": {\n          }\n      },\n    \"automatic\": {\n\"--snip--\": null\n      },\n    \"run_list\": [\n      \"recipe[opsworks_custom_cookbooks::load]\",\n      \"recipe[opsworks_custom_cookbooks::execute]\"\n    ],\n    \"normal\": {\n        \"tags\": [\n\n        ],\n        \"opsworks_bundler\": {\n            \"version\": \"1.0.10\",\n            \"manage_package\": null\n          },\n        \"opsworks_test_suite_loader\": {\n            \"minitest_chef_handler\": {\n                \"version\": \"0.6.7\"\n              }\n          },\n        \"opsworks_rubygems\": {\n            \"version\": \"1.8.24\"\n          },\n        \"etc\": {\n            \"passwd\": {\n              }\n          },\n        \"packages\": {\n            \"dist_only\": false\n          },\n        \"opsworks_custom_cookbooks\": {\n            \"scm\": {\n                \"repository\": \"git://github.com/higanworks/opsworks-cookbooks.git\",\n                \"type\": \"git\",\n                \"revision\": null,\n                \"user\": null,\n                \"ssh_key\": null,\n                \"password\": null\n              },\n            \"enabled\": true,\n            \"recipes\": [\n              \"opsworks_ganglia::configure-client\",\n              \"ssh_users\",\n              \"agent_version\",\n              \"opsworks_stack_state_sync\",\n              \"node_dump::default\",\n              \"test_suite\",\n              \"opsworks_cleanup\"\n            ]\n          },\n        \"nginx\": {\n            \"binary\": \"/usr/sbin/nginx\",\n            \"log_dir\": \"/var/log/nginx\",\n            \"user\": \"www-data\",\n            \"dir\": \"/etc/nginx\"\n          },\n        \"runit\": {\n            \"service_dir\": \"/etc/service\",\n            \"chpst_bin\": \"/usr/bin/chpst\",\n            \"sv_dir\": \"/etc/sv\",\n            \"sv_bin\": \"/usr/bin/sv\"\n          },\n        \"deploy\": {\n            \"wp\": {\n                \"deploy_to\": \"/srv/www/wp\",\n                \"mounted_at\": null,\n                \"document_root\": null,\n                \"symlinks\": {\n                  },\n                \"database\": {\n                    \"database\": \"wp\",\n                    \"username\": \"root\",\n                    \"reconnect\": true,\n                    \"host\": null,\n                    \"password\": \"wiuhfzhstl\"\n                  },\n                \"scm\": {\n                    \"repository\": \"git://github.com/WordPress/WordPress.git\",\n                    \"revision\": \"3.5.1\",\n                    \"user\": null,\n                    \"scm_type\": \"git\",\n                    \"ssh_key\": null,\n                    \"password\": null\n                  },\n                \"restart_command\": \"echo 'restarting app'\",\n                \"migrate\": false,\n                \"sleep_before_restart\": 0,\n                \"ssl_certificate_key\": null,\n                \"group\": \"www-data\",\n                \"user\": \"www-data\",\n                \"domains\": [\n                  \"wp\"\n                ],\n                \"ssl_support\": false,\n                \"ssl_certificate\": null,\n                \"application\": \"wp\",\n                \"application_type\": \"php\",\n                \"memcached\": {\n                    \"host\": null,\n                    \"port\": 11211\n                  },\n                \"rails_env\": null,\n                \"ssl_certificate_ca\": null,\n                \"symlink_before_migrate\": {\n                    \"config/opsworks.php\": \"opsworks.php\"\n                  },\n                \"auto_bundle_on_deploy\": true\n              },\n            \"c5\": {\n                \"deploy_to\": \"/srv/www/c5\",\n                \"mounted_at\": null,\n                \"document_root\": \"web\",\n                \"symlinks\": {\n                  },\n                \"database\": {\n                    \"database\": \"c5\",\n                    \"username\": \"root\",\n                    \"reconnect\": true,\n                    \"host\": null,\n                    \"password\": \"wiuhfzhstl\"\n                  },\n                \"scm\": {\n                    \"repository\": \"git://github.com/concrete5/concrete5.git\",\n                    \"revision\": \"5.6.1.2\",\n                    \"user\": null,\n                    \"scm_type\": \"git\",\n                    \"ssh_key\": null,\n                    \"password\": null\n                  },\n                \"restart_command\": \"echo 'restarting app'\",\n                \"migrate\": false,\n                \"sleep_before_restart\": 0,\n                \"ssl_certificate_key\": null,\n                \"group\": \"www-data\",\n                \"user\": \"www-data\",\n                \"domains\": [\n                  \"c5\"\n                ],\n                \"ssl_support\": false,\n                \"ssl_certificate\": null,\n                \"application\": \"c5\",\n                \"application_type\": \"php\",\n                \"memcached\": {\n                    \"host\": null,\n                    \"port\": 11211\n                  },\n                \"rails_env\": null,\n                \"ssl_certificate_ca\": null,\n                \"symlink_before_migrate\": {\n                    \"config/opsworks.php\": \"opsworks.php\"\n                  },\n                \"auto_bundle_on_deploy\": true\n              }\n          },\n        \"opsworks\": {\n            \"activity\": \"configure\",\n            \"instance\": {\n                \"instance_type\": \"m1.small\",\n                \"availability_zone\": \"ap-northeast-1a\",\n                \"private_dns_name\": \"ip-10-152-59-198.ap-northeast-1.compute.internal\",\n                \"backends\": 5,\n                \"aws_instance_id\": \"i-d84cf4da\",\n                \"region\": \"ap-northeast-1\",\n                \"public_dns_name\": \"ec2-176-34-13-248.ap-northeast-1.compute.amazonaws.com\",\n                \"layers\": [\n                  \"dump\"\n                ],\n                \"id\": \"e6a12795-52d1-4acc-a047-a8ceef5624a6\",\n                \"hostname\": \"dump2\",\n                \"ip\": \"176.34.13.248\",\n                \"private_ip\": \"10.152.59.198\",\n                \"architecture\": \"x86_64\"\n              },\n            \"stack\": {\n                \"name\": \"all in one\"\n              },\n            \"valid_client_activities\": [\n              \"reboot\",\n              \"stop\",\n              \"setup\",\n              \"configure\",\n              \"update_dependencies\",\n              \"install_dependencies\",\n              \"update_custom_cookbooks\",\n              \"execute_recipes\"\n            ],\n            \"ruby_stack\": \"ruby_enterprise\",\n            \"ruby_version\": \"1.8.7\",\n            \"deployment\": null,\n            \"rails_stack\": {\n                \"name\": null\n              },\n            \"agent_version\": \"119\",\n            \"applications\": [\n              {\n                  \"slug_name\": \"c5\",\n                  \"application_type\": \"php\",\n                  \"name\": \"c5\"\n                },\n              {\n                  \"slug_name\": \"wp\",\n                  \"application_type\": \"php\",\n                  \"name\": \"wp\"\n                }\n            ],\n            \"layers\": {\n                \"wp\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"WP\",\n                    \"id\": \"f32f8e1b-30d1-44a6-8d99-b90dad09958c\"\n                  },\n                \"db-master\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"MySQL Master\",\n                    \"id\": \"e554fc61-25f0-4cde-ab21-0fb890f586b6\"\n                  },\n                \"php-app\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"PHP Application Server\",\n                    \"id\": \"d4ebe207-567f-4547-8e2d-403cd80cb81d\"\n                  },\n                \"dump\": {\n                    \"instances\": {\n                        \"dump2\": {\n                            \"instance_type\": \"m1.small\",\n                            \"availability_zone\": \"ap-northeast-1a\",\n                            \"private_dns_name\": \"ip-10-152-59-198.ap-northeast-1.compute.internal\",\n                            \"elastic_ip\": null,\n                            \"status\": \"online\",\n                            \"created_at\": \"2013-05-22T14:35:58+00:00\",\n                            \"backends\": 5,\n                            \"aws_instance_id\": \"i-d84cf4da\",\n                            \"region\": \"ap-northeast-1\",\n                            \"public_dns_name\": \"ec2-176-34-13-248.ap-northeast-1.compute.amazonaws.com\",\n                            \"booted_at\": \"2013-05-22T14:37:12+00:00\",\n                            \"ip\": \"176.34.13.248\",\n                            \"private_ip\": \"10.152.59.198\"\n                          }\n                      },\n                    \"name\": \"dump\",\n                    \"id\": \"aab925b1-b2b5-4874-8624-465b538a64b3\"\n                  },\n                \"web\": {\n                    \"instances\": {\n                      },\n                    \"name\": \"Web Server\",\n                    \"id\": \"fd723151-8212-4e81-b033-4374a718596d\"\n                  }\n              },\n            \"sent_at\": 1369234053\n          },\n        \"mysql\": {\n            \"grants_path\": \"/etc/mysql/grants.sql\",\n            \"socket\": \"/var/run/mysqld/mysqld.sock\",\n            \"server_root_password\": \"wiuhfzhstl\",\n            \"conf_dir\": \"/etc/mysql\",\n            \"pid_file\": \"/var/run/mysqld/mysqld.pid\",\n            \"confd_dir\": \"/etc/mysql/conf.d\"\n          },\n        \"platform?\": [\n          \"centos\",\n          \"redhat\",\n          \"fedora\",\n          \"amazon\"\n        ],\n        \"ssh_users\": {\n          }\n      },\n    \"name\": \"dump2.localdomain\"\n  }\n```\n\n\n## \u5f8c\u8a18\n\n\u79c1\u3082OpsWorks\u306eStack\u60c5\u5831\u3092\u4f7f\u304a\u3046\u3068\u3057\u3066\u3001`opsworks-agent-cli`\u306eJSON\u51fa\u529b\u3092\u7121\u7406\u3084\u308a`attributes`\u306b\u8d77\u3053\u3059Ohai\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u66f8\u3044\u3066**Feedback\u304b\u3089\u901f\u653b\u9001\u4fe1**\u3057\u305f\u3089\u300e\u30a4\u30a4\u30cd\u3001\u3067\u3082`node[:opsworks]`\u306b\u6700\u521d\u304b\u3089\u3042\u308b\u3093\u3060\u300f\u3068\u5e30\u3063\u3066\u304d\u305f\u306e\u3092\u601d\u3044\u51fa\u3057\u307e\u3057\u305f\u3002\n\n"}