{"tags": ["\u6700\u9069\u5316", "Python", "\u7d44\u5408\u305b\u6700\u9069\u5316"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u79c1\u306f\u3001\u696d\u52d9\u3067\u3001\u7d44\u5408\u305b\u6700\u9069\u5316\u6280\u8853\u3092\u7528\u3044\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a(\u4f8b\u3048\u3070\u3001\u7269\u6d41\u306b\u304a\u3051\u308b\u8f38\u9001\u30b3\u30b9\u30c8\u306e\u6700\u5c0f\u5316\u306a\u3069)\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u4ee5\u524d\u306f\u3001C++\u3084C#\u3092\u7528\u3044\u3066\u3001\u6700\u9069\u5316\u306e\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u6700\u8fd1\u3067\u306fPython\u3092\u7528\u3044\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u6700\u9069\u5316\u306b\u304a\u3051\u308bPython\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nPython\u306e\u30e1\u30ea\u30c3\u30c8\nPython\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u7406\u7531\u3068\u3057\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u70b9\u304c\u3042\u3052\u3089\u308c\u307e\u3059\u3002\n\n\u308f\u304b\u308a\u3084\u3059\u3044\u3002\u6570\u5f0f\u306b\u3088\u308b\u30e2\u30c7\u30eb\u3068Python\u306b\u3088\u308b\u30e2\u30c7\u30eb\u304c\u8fd1\u3044\u305f\u3081\u3001\u3088\u308a\u672c\u8cea\u7684\u306a\u8a18\u8ff0\u306b\u5c02\u5ff5\u3067\u304d\u3001\u4fdd\u5b88\u3057\u3084\u3059\u3044\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3067\u304d\u308b\u3002\n\n\u77ed\u3044\u8a18\u8ff0\u91cf\u3067\u6e08\u3080\u3002C++\u306a\u3069\u306b\u6bd4\u3079\u308b\u3068\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30b5\u30a4\u30ba\u306f\u3001\u6570\u5206\u306e1\u306b\u306a\u308b\u3002\n\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u5c0f\u3055\u3044\u3002\u30b7\u30f3\u30d7\u30eb\u306a\u6587\u6cd5\u3067\u3001\u4e88\u7d04\u8a9e\u3082\u5c11\u306a\u3044\u3002\nPython\u3067\u5b8c\u7d50\u3067\u304d\u308b\u3002\u6c4e\u7528\u8a00\u8a9e\u3067\u3042\u308b\u305f\u3081\u3001\u7a2e\u3005\u306e\u76ee\u7684\u306e\u51e6\u7406\u3082\u307b\u307cPython\u3067\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\u4f8b\u3048\u3070\u3001web\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3001\u96c6\u8a08\u3057\u3066\u3001\u5206\u6790\u3057\u3066\u3001\u6700\u9069\u5316\u3057\u3066\u3001\u53ef\u8996\u5316\u3059\u308b\u306a\u3069\u3001\u3059\u3079\u3066Python\u3067\u3067\u304d\u308b\u3002\n\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u591a\u3044\u3002\u30d1\u30c3\u30b1\u30fc\u30b8\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30b5\u30a4\u30c8 https://pypi.python.org/pypi \u3060\u3051\u3067\u3082\u7d049\u4e07\u3082\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3002\n\u4ed6\u306b\u3082\u3001https://github.com/ \u3084 https://anaconda.org/ \u306b\u3082\u591a\u304f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3002\n\u69d8\u3005\u306a\u74b0\u5883\u3067\u5b9f\u884c\u3067\u304d\u308b\u3002Windows\u3001Mac\u3001Linux\u306e\u5404\u7a2eOS\u3084\u3001\u51e6\u7406\u7cfb\u3082Cython\u3084Pypy\u3084IronPython\u306a\u3069\u304c\u3042\u308b\u3002\n\u591a\u304f\u306e\u6700\u9069\u5316\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304cPython\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\u6709\u6599\u3001\u7121\u6599\u542b\u3081\u3066\u3001\u591a\u304f\u306e\u6700\u9069\u5316\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u304c\u3001Python\u304b\u3089\u5229\u7528\u3067\u304d\u308b\u3082\u306e\u304c\u591a\u3044\u3002\n\nPython\u306f\u3001C++\u306a\u3069\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u8a00\u8a9e\u306b\u6bd4\u3079\u308b\u3068\u3001\u5b9f\u884c\u901f\u5ea6\u304c\u9045\u3044\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u6700\u9069\u5316\u306b\u304a\u3044\u3066\u306f\u3001\u4e3b\u306b\u30e2\u30c7\u30eb\u306e\u4f5c\u6210(\u30e2\u30c7\u30ea\u30f3\u30b0)\u306bPython\u3092\u7528\u3044\u3001\u6700\u9069\u5316\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u884c\u306fC++\u306a\u3069\u3067\u8a18\u8ff0\u3055\u308c\u305f\u5c02\u7528\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2(\u30bd\u30eb\u30d0\u30fc)\u3092\u7528\u3044\u307e\u3059\u3002\u3053\u306e\u305f\u3081\u3001\u6700\u9069\u5316\u3067Python\u3092\u5229\u7528\u3057\u3066\u3082\u3001\u5b9f\u884c\u6642\u9593\u306f\u3042\u307e\u308a\u554f\u984c\u3068\u306a\u308a\u307e\u305b\u3093\u3002\n\u6700\u9069\u5316\u306e\u30e2\u30c7\u30ea\u30f3\u30b0\u3067\u306f\u3001\u4e3b\u306bPuLP\u3068pandas\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u7528\u3044\u3066\u3044\u307e\u3059\u3002\n\nPuLP\u306f\u3001\u6570\u7406\u30e2\u30c7\u30ea\u30f3\u30b0\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3042\u308a\u3001pandas\u306f\u30c7\u30fc\u30bf\u5206\u6790\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3042\u308b\u3002\npandas\u306f\u3001\u30e2\u30c7\u30eb\u306b\u542b\u307e\u308c\u308b\u30c7\u30fc\u30bf\u306e\u4e2d\u3067\u3001\u8868\u3067\u8868\u73fe\u3067\u304d\u308b\u30c7\u30fc\u30bf\u3092\u6271\u3046\u306e\u306b\u9069\u3057\u3066\u304a\u308a\u3001\u8907\u96d1\u306a\u51e6\u7406\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\u307e\u305f\u3001pandas\u306f\u5185\u90e8\u3067numpy\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\nnumpy\u306f\u3001C\u3084Fortran\u3067\u66f8\u304b\u308c\u305f\u9ad8\u5ea6\u306b\u6700\u9069\u5316\u3055\u308c\u305f\u7dda\u5f62\u4ee3\u6570\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3057\u3066\u304a\u308a\u884c\u5217\u8a08\u7b97\u3092\u52b9\u7387\u3088\u304f\u8a08\u7b97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nPuLP\u306b\u3064\u3044\u3066\n\u6570\u7406\u6700\u9069\u5316\u554f\u984c\u3092\u89e3\u304f\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30e2\u30c7\u30e9\u30fc\u3067\u6570\u7406\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\n\n\u30bd\u30eb\u30d0\u30fc\u3092\u3088\u3073\u51fa\u3057\u3066\u3001\u89e3\u3092\u5f97\u307e\u3059\nPuLP\u306fCOIN\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u4f5c\u6210\u3055\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3001\u30e2\u30c7\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\nPuLP\u3067\u306f\u3001\u30bd\u30eb\u30d0\u30fc\u3068\u3057\u3066CBC,Gurobi,GLPK\u306a\u3069\u3044\u308d\u3044\u308d\u306a\u3082\u306e\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001CBC\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002PuLP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001CBC\u3082\u540c\u6642\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\nCBC: COIN\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7121\u6599\u30bd\u30eb\u30d0\u30fc(COIN-OR Branch and Cut \u306e\u7565)  https://projects.coin-or.org/Cbc\n\nGurobi: \u9ad8\u6027\u80fd\u306a\u5546\u7528\u30bd\u30eb\u30d0\u30fc http://www.gurobi.com/\n\nGLPK: GNU\u88fd\u306e\u7121\u6599\u30bd\u30eb\u30d0\u30fc www.gnu.org/software/glpk/\n\n\n\n\nPuLP\u3067\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u554f\u984c\u306f\u3001\u6df7\u5408\u6574\u6570\u6700\u9069\u5316\u554f\u984c\u3067\u3059\u3002\n\u6df7\u5408\u6574\u6570\u6700\u9069\u5316\u554f\u984c\u306f\u3001\u6570\u7406\u6700\u9069\u5316\u554f\u984c\u306e1\u7a2e\u3067\u3001\u4e0b\u8a18\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u9023\u7d9a(\u5b9f\u6570)\u5909\u6570\u3068\u6574\u6570\u5909\u6570\u3092\u4f7f\u3063\u3066\u8868\u73fe\u3055\u308c\u308b\n\u76ee\u7684\u95a2\u6570\u3068\u5236\u7d04\u6761\u4ef6\u304c1\u6b21\u5f0f\u3067\u3042\u308b\n\n\u3055\u3089\u306b\u8a73\u7d30\u306b\u3064\u3044\u3066\u8abf\u3079\u305f\u3044\u5834\u5408\u306f\u3001\u53c2\u8003\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nPuLP\u306e\u4f7f\u3044\u65b9\n\u4e0b\u8a18\u306e\u554f\u984c\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u554f\u984c\n\u6750\u6599A\u3068B\u304b\u3089\u5408\u6210\u3067\u304d\u308b\u5316\u5b66\u88fd\u54c1X\u3068Y\u3092\u305f\u304f\u3055\u3093\u4f5c\u6210\u3057\u305f\u3044\u3002\nX\u30921kg\u4f5c\u308b\u306e\u306b\u3001A\u304c1kg\u3001B\u304c2kg\u5fc5\u8981\u3067\u3042\u308b\u3002\nY\u30921kg\u4f5c\u308b\u306e\u306b\u3001A\u304c1kg\u3001B\u304c2kg\u5fc5\u8981\u3067\u3042\u308b\u3002\n\u307e\u305f\u3001X\u3082Y\u30821kg\u5f53\u308a\u306e\u4fa1\u683c\u306f100\u5186\u3067\u3042\u308b\u3002\n\u6750\u6599A\u306f16kg\u3001B\u306f18kg\u3057\u304b\u306a\u3044\u3068\u304d\u306b\u3001X\u3068Y\u306e\u4fa1\u683c\u306e\u5408\u8a08\u304c\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001\nX\u3068Y\u3092\u3069\u308c\u3060\u3051\u4f5c\u6210\u3059\u308c\u3070\u3088\u3044\u304b\u6c42\u3081\u3088\u3002\n\n\n\n\u554f\u984c\u3092\u6570\u7406\u30e2\u30c7\u30eb\u3067\u3042\u3089\u308f\u3059\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u6570\u7406\u30e2\u30c7\u30eb\u3092\u5f0f\u3067\u8868\u73fe\u3059\u308b\u3053\u3068\u3092\u5b9a\u5f0f\u5316\u3059\u308b\u3068\u3044\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3092PuLP\u3067\u30e2\u30c7\u30eb\u5316\u3057\u3066\u89e3\u3044\u3066\u307f\u307e\u3059\u3002\n\npython3\nfrom pulp import *\nm = LpProblem(sense=LpMaximize) # \u6570\u7406\u30e2\u30c7\u30eb\nx = LpVariable('x', lowBound=0) # \u5909\u6570\ny = LpVariable('y', lowBound=0) # \u5909\u6570\nm += 100 * x + 100 * y # \u76ee\u7684\u95a2\u6570\nm += x + 2 * y <= 16 # \u6750\u6599A\u306e\u4e0a\u9650\u306e\u5236\u7d04\u6761\u4ef6\nm += 3 * x + y <= 18 # \u6750\u6599B\u306e\u4e0a\u9650\u306e\u5236\u7d04\u6761\u4ef6\nm.solve() # \u30bd\u30eb\u30d0\u30fc\u306e\u5b9f\u884c\nprint(value(x), value(y)) # 4, 6\n\n\n\u4ee5\u4e0b\u3001\u9806\u756a\u306b\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\nfrom pulp import *\n\n\n\u6570\u7406\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\n\u6700\u5c0f\u5316\u554f\u984c\u306e\u3068\u304d: m = LpPrblem()\n\u6700\u5927\u5316\u554f\u984c\u306e\u3068\u304d: m = LpProblem(sense=LpMaximize)\n\n\n\u5909\u6570\u306e\u4f5c\u6210\n\u9023\u7d9a\u5909\u6570: x = LpVariable(\u5909\u6570\u540d, lowBound=0)\n0-1\u5909\u6570: x = LpVariable(\u5909\u6570\u540d, cat=LpBinary)\n\u9023\u7d9a\u5909\u6570\u306e\u30ea\u30b9\u30c8: x = [LpVariable(i\u756a\u76ee\u306e\u5909\u6570\u540d, lowBound=0) for i in range(n)]\n\u5909\u6570\u540d\u306f\u3001\u5fc5\u305a\u7570\u306a\u308b\u3088\u3046\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\n\n\n\u76ee\u7684\u95a2\u6570\u306e\u8a2d\u5b9a\nm += \u5f0f\n\n\n\u5236\u7d04\u6761\u4ef6\u306e\u8ffd\u52a0\nm += \u5f0f == \u5f0f\nm += \u5f0f <= \u5f0f\nm += \u5f0f >= \u5f0f\n\n\n\u5f0f\u306e\u4f8b\n2 * x + 3 * y - 5\n\u548c: lpSum(\u5909\u6570\u306e\u30ea\u30b9\u30c8)\n\u5185\u7a4d: lpDot(\u4fc2\u6570\u306e\u30ea\u30b9\u30c8, \u5909\u6570\u306e\u30ea\u30b9\u30c8)\n\n\n\u30bd\u30eb\u30d0\u30fc\u306e\u5b9f\u884c\nm.solve()\n\n\n\u5909\u6570\u3084\u5f0f\u3084\u76ee\u7684\u95a2\u6570\u306e\u5024\nvalue(\u5909\u6570)\u3001value(\u5f0f)\u3001value(m.objective)\n\n\nPuLP\u3068pandas\u306e\u7d44\u5408\u305b\u306b\u3064\u3044\u3066\nPuLP\u3068pandas\u3092\u7d44\u5408\u305b\u3066\u3001pandas\u306e\u8868(DataFrame)\u3067\u5909\u6570(LpVariable)\u3092\u7ba1\u7406\u3059\u308b\u3068\u3001\u5b9a\u5f0f\u5316\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u3067\u304d\u307e\u3059\u3002\n\u8f38\u9001\u6700\u9069\u5316\u554f\u984c\u3092\u4f8b\u306b\u3057\u3066\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u8f38\u9001\u6700\u9069\u5316\u554f\u984c\n\n\u5009\u5eab\u7fa4\u304b\u3089\u5de5\u5834\u7fa4\u3078\u90e8\u54c1\u3092\u642c\u9001\u3057\u305f\u3044\u3002\u8f38\u9001\u8cbb\u304c\u6700\u5c0f\u3068\u306a\u308b\u8a08\u753b\u3092\u6c42\u3081\u305f\u3044\u3002\n\n\n\u5009\u5eab\u7fa4\u304b\u3089\u5de5\u5834\u7fa4\u3078\u306e\u8f38\u9001\u91cf\u3092\u6c7a\u3081\u305f\u3044 \u2192 \u5909\u6570\n\u8f38\u9001\u30b3\u30b9\u30c8\u3092\u6700\u5c0f\u5316\u3057\u305f\u3044 \u2192 \u76ee\u7684\u95a2\u6570\n\u5404\u5009\u5eab\u304b\u3089\u306e\u642c\u51fa\u306f\u3001\u4f9b\u7d66\u53ef\u80fd\u91cf\u4ee5\u4e0b \u2192 \u5236\u7d04\n\u5404\u5de5\u5834\u3078\u306e\u642c\u5165\u306f\u3001\u9700\u8981\u91cf\u4ee5\u4e0a \u2192 \u5236\u7d04\n\n\n\n\u8f38\u9001\u8cbb\n\u7d44\u307f\u7acb\u3066\u5de5\u5834\n\n\nF1\nF2\nF3\nF4\n\u4f9b\u7d66\n\n\n\u5009\u5eab\nW1\n10\n10\n11\n17\n35\n\n\nW2\n16\n19\n12\n14\n41\n\n\nE3\n15\n12\n14\n12\n42\n\n\n\n\u9700\u8981\n28\n29\n31\n25\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8a2d\u5b9a\n\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002(\u6570\u5b57\u306f\u524d\u8868\u3068\u540c\u3058)\n\npython3\nimport numpy as np, pandas as pd\nfrom itertools import product\nfrom pulp import *\nnp.random.seed(1)\nnw, nf = 3, 4\npr = list(product(range(nw),range(nf)))\n\u4f9b\u7d66 = np.random.randint(30, 50, nw)\n\u9700\u8981 = np.random.randint(20, 40, nf)\n\u8f38\u9001\u8cbb = np.random.randint(10, 20, (nw,nf))\n\n\n\npandas\u3092\u4f7f\u308f\u306a\u3044\u6570\u7406\u30e2\u30c7\u30eb\n\u5909\u6570\u306f\u3001\u6dfb\u3048\u5b57\u3067\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\npython3\nm1 = LpProblem()\nv1 = {(i,j):LpVariable('v%d_%d'%(i,j), lowBound=0) for i,j in pr}\nm1 += lpSum(\u8f38\u9001\u8cbb[i][j] * v1[i,j] for i,j in pr)\nfor i in range(nw):\n    m1 += lpSum(v1[i,j] for j in range(nf)) <= \u4f9b\u7d66[i]\nfor j in range(nf):\n    m1 += lpSum(v1[i,j] for i in range(nw)) >= \u9700\u8981[j]\nm1.solve()\n{k:value(x) for k,x in v1.items() if value(x) > 0}\n>>>\n{(0, 0): 28.0,\n (0, 1): 7.0,\n (1, 2): 31.0,\n (1, 3): 5.0,\n (2, 1): 22.0,\n (2, 3): 20.0}\n\n\n\npandas\u3092\u4f7f\u3063\u305f\u6570\u7406\u30e2\u30c7\u30eb\n\u5909\u6570\u306f\u3001\u8868\u306e\u5c5e\u6027\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u307e\u305a\u3001\u8868\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\npython3\na = pd.DataFrame([(i,j) for i, j in pr], columns=['\u5009\u5eab', '\u5de5\u5834'])\na['\u8f38\u9001\u8cbb'] = \u8f38\u9001\u8cbb.flatten()\na[:3]\n\n\n\n\n\n\u5009\u5eab\n\u5de5\u5834\n\u8f38\u9001\u8cbb\n\n\n0\n0\n0\n10\n\n\n1\n0\n1\n10\n\n\n2\n0\n2\n11\n\n\n\u540c\u69d8\u306b\u6570\u7406\u30e2\u30c7\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\npython3\nm2 = LpProblem()\na['Var'] = [LpVariable('v%d'%i, lowBound=0) for i in a.index]\nm2 += lpDot(a.\u8f38\u9001\u8cbb, a.Var)\nfor k, v in a.groupby('\u5009\u5eab'):\n    m2 += lpSum(v.Var) <= \u4f9b\u7d66[k]\nfor k, v in a.groupby('\u5de5\u5834'):\n    m2 += lpSum(v.Var) >= \u9700\u8981[k]\nm2.solve()\na['Val'] = a.Var.apply(value)\na[a.Val > 0]\n\n\n\n\n\n\u5009\u5eab\n\u5de5\u5834\n\u8f38\u9001\u8cbb\nVar\nVal\n\n\n0\n0\n0\n10\nv0\n28.0\n\n\n1\n0\n1\n10\nv1\n7.0\n\n\n6\n1\n2\n12\nv6\n31.0\n\n\n7\n1\n3\n14\nv7\n5.0\n\n\n9\n2\n1\n12\nv9\n22.0\n\n\n11\n2\n3\n12\nv11\n20.0\n\n\n\u6dfb\u3048\u5b57\u3092\u4f7f\u3063\u305f\u8868\u73fe\u306f\u3001\u6dfb\u3048\u5b57\u304c\u4f55\u3092\u8868\u3057\u3066\u3044\u308b\u304b\u899a\u3048\u3066\u3044\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3057\u304b\u3057\u3001PuLP\u3068pandas\u3092\u7d44\u5408\u305b\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3001\u6570\u7406\u30e2\u30c7\u30eb\u304c\u7406\u89e3\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u5358\u306a\u308b\"i\"\u3068\u304b\u3067\u306f\u306a\u304f\u3001\"\u5009\u5eab\"\u306a\u3069\u306e\u5217\u540d\u304c\u4f7f\u3048\u308b\u3002\npandas\u306e\u6761\u4ef6\u5f0f\u3092\u4f7f\u3063\u3066\u3001\u6570\u5f0f\u3092\u7d44\u307f\u7acb\u3066\u3089\u308c\u308b\u3002(\u53c2\u8003 \u7d44\u5408\u305b\u6700\u9069\u5316\u3067N Queen\u554f\u984c\u3092\u89e3\u304f)\npandas\u306e\u4fbf\u5229\u306a\u95a2\u6570(groupby\u306a\u3069)\u304c\u4f7f\u3048\u308b\u3002\n\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\n\u8a18\u4e8b\n\n\n\u7d44\u5408\u305b\u6700\u9069\u5316\u3092\u4f7f\u304a\u3046\n\u6570\u7406\u30e2\u30c7\u30eb\u306b\u304a\u3051\u308b\u5909\u6570\u306e\u548c\n\u7d44\u5408\u305b\u6700\u9069\u5316\u30bd\u30eb\u30d0\u30fc\u306e\u5a01\u529b\n\u53cc\u5bfe\u554f\u984c\u3092\u8abf\u3079\u308b\nPuLP\u3068pandas\u306e\u7d44\u5408\u305b\u306e\u4f8b\n\n\n\u770c\u5225\u30c7\u30fc\u30bf\u306e\u53ef\u8996\u5316(4\u8272\u554f\u984c)\n\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u30c7\u30fc\u30c8\u30b3\u30fc\u30b9\u3092\u6c7a\u3081\u3088\u3046\n\u7d44\u5408\u305b\u6700\u9069\u5316\u3067N Queen\u554f\u984c\u3092\u89e3\u304f\n\u30cf\u30e9\u30cf\u30e9\u3059\u308b\u30c8\u30fc\u30ca\u30e1\u30f3\u30c8\u306e\u65e5\u7a0b\u3092\u6c42\u3081\u3088\u3046\n\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u5b66\u4f1a\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3059\u308b\n\u30ec\u30b9\u30c8\u30e9\u30f3\u306e\u58f2\u4e0a\u3092\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u6700\u5927\u5316\u3059\u308b\n\u6700\u9069\u5316\u3067\u9053\u8def\u8a2d\u7f6e\n\u6570\u72ec\u3092\u7d44\u5408\u305b\u6700\u9069\u3067\u89e3\u304f\n\u732e\u7acb\u3092\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u8003\u3048\u308b\n\n\n\n\n\u66f8\u7c4d\n\n\n\u300c\u4eca\u65e5\u304b\u3089\u4f7f\u3048\u308b!\u7d44\u5408\u305b\u6700\u9069\u5316\u300d\n\u300cPython\u8a00\u8a9e\u306b\u3088\u308b\u30d3\u30b8\u30cd\u30b9\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u300d\n\u300c\u30e2\u30c7\u30ea\u30f3\u30b0\u306e\u8af8\u76f8 (\u30b7\u30ea\u30fc\u30ba:\u6700\u9069\u5316\u30e2\u30c7\u30ea\u30f3\u30b0)\u300d\n\n\n\u30bd\u30eb\u30d0\u30fc\u95a2\u9023\n\n\nPuLP\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\u5bae\u4ee3\u5148\u751f\u306e\u6574\u6570\u8a08\u753b\u6cd5\u30e1\u30e2\n\n\u6574\u6570\u8a08\u753b\u6cd5\u306b\u3088\u308b\u5b9a\u5f0f\u5316\u5165\u9580\n\u6574\u6570\u8a08\u753b\u30bd\u30eb\u30d0\u30fc\u5165\u9580\nZIMPL\u8a00\u8a9e\u3068SCIP\u306b\u3088\u308b\u6570\u7406\u6700\u9069\u5316\nGurobi Optimizer\n\n\n\n\u4ee5\u4e0a\n# \u306f\u3058\u3081\u306b\n\u79c1\u306f\u3001\u696d\u52d9\u3067\u3001\u7d44\u5408\u305b\u6700\u9069\u5316\u6280\u8853\u3092\u7528\u3044\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a(\u4f8b\u3048\u3070\u3001\u7269\u6d41\u306b\u304a\u3051\u308b\u8f38\u9001\u30b3\u30b9\u30c8\u306e\u6700\u5c0f\u5316\u306a\u3069)\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u4ee5\u524d\u306f\u3001C++\u3084C#\u3092\u7528\u3044\u3066\u3001\u6700\u9069\u5316\u306e\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u6700\u8fd1\u3067\u306fPython\u3092\u7528\u3044\u308b\u3053\u3068\u304c\u591a\u3044\u3067\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u6700\u9069\u5316\u306b\u304a\u3051\u308bPython\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n# Python\u306e\u30e1\u30ea\u30c3\u30c8\nPython\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u7406\u7531\u3068\u3057\u3066\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u70b9\u304c\u3042\u3052\u3089\u308c\u307e\u3059\u3002\n\n- \u308f\u304b\u308a\u3084\u3059\u3044\u3002\u6570\u5f0f\u306b\u3088\u308b\u30e2\u30c7\u30eb\u3068Python\u306b\u3088\u308b\u30e2\u30c7\u30eb\u304c\u8fd1\u3044\u305f\u3081\u3001\u3088\u308a\u672c\u8cea\u7684\u306a\u8a18\u8ff0\u306b\u5c02\u5ff5\u3067\u304d\u3001\u4fdd\u5b88\u3057\u3084\u3059\u3044\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3067\u304d\u308b\u3002\n![sample.png](https://qiita-image-store.s3.amazonaws.com/0/13955/e5b72a98-4c4c-bff0-00c4-e260d752bb3f.png)\n\n\n- \u77ed\u3044\u8a18\u8ff0\u91cf\u3067\u6e08\u3080\u3002C++\u306a\u3069\u306b\u6bd4\u3079\u308b\u3068\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30b5\u30a4\u30ba\u306f\u3001\u6570\u5206\u306e1\u306b\u306a\u308b\u3002\n- \u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u5c0f\u3055\u3044\u3002\u30b7\u30f3\u30d7\u30eb\u306a\u6587\u6cd5\u3067\u3001\u4e88\u7d04\u8a9e\u3082\u5c11\u306a\u3044\u3002\n- Python\u3067\u5b8c\u7d50\u3067\u304d\u308b\u3002\u6c4e\u7528\u8a00\u8a9e\u3067\u3042\u308b\u305f\u3081\u3001\u7a2e\u3005\u306e\u76ee\u7684\u306e\u51e6\u7406\u3082\u307b\u307cPython\u3067\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\u4f8b\u3048\u3070\u3001web\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3001\u96c6\u8a08\u3057\u3066\u3001\u5206\u6790\u3057\u3066\u3001\u6700\u9069\u5316\u3057\u3066\u3001\u53ef\u8996\u5316\u3059\u308b\u306a\u3069\u3001\u3059\u3079\u3066Python\u3067\u3067\u304d\u308b\u3002\n- \u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u591a\u3044\u3002\u30d1\u30c3\u30b1\u30fc\u30b8\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30b5\u30a4\u30c8 https://pypi.python.org/pypi \u3060\u3051\u3067\u3082\u7d049\u4e07\u3082\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3002\n\u4ed6\u306b\u3082\u3001https://github.com/ \u3084 https://anaconda.org/ \u306b\u3082\u591a\u304f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3002\n- \u69d8\u3005\u306a\u74b0\u5883\u3067\u5b9f\u884c\u3067\u304d\u308b\u3002Windows\u3001Mac\u3001Linux\u306e\u5404\u7a2eOS\u3084\u3001\u51e6\u7406\u7cfb\u3082Cython\u3084Pypy\u3084IronPython\u306a\u3069\u304c\u3042\u308b\u3002\n- \u591a\u304f\u306e\u6700\u9069\u5316\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304cPython\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\u6709\u6599\u3001\u7121\u6599\u542b\u3081\u3066\u3001\u591a\u304f\u306e\u6700\u9069\u5316\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u304c\u3001Python\u304b\u3089\u5229\u7528\u3067\u304d\u308b\u3082\u306e\u304c\u591a\u3044\u3002\n\nPython\u306f\u3001C++\u306a\u3069\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u8a00\u8a9e\u306b\u6bd4\u3079\u308b\u3068\u3001\u5b9f\u884c\u901f\u5ea6\u304c\u9045\u3044\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u6700\u9069\u5316\u306b\u304a\u3044\u3066\u306f\u3001\u4e3b\u306b\u30e2\u30c7\u30eb\u306e\u4f5c\u6210(\u30e2\u30c7\u30ea\u30f3\u30b0)\u306bPython\u3092\u7528\u3044\u3001\u6700\u9069\u5316\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u884c\u306fC++\u306a\u3069\u3067\u8a18\u8ff0\u3055\u308c\u305f\u5c02\u7528\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2(\u30bd\u30eb\u30d0\u30fc)\u3092\u7528\u3044\u307e\u3059\u3002\u3053\u306e\u305f\u3081\u3001\u6700\u9069\u5316\u3067Python\u3092\u5229\u7528\u3057\u3066\u3082\u3001\u5b9f\u884c\u6642\u9593\u306f\u3042\u307e\u308a\u554f\u984c\u3068\u306a\u308a\u307e\u305b\u3093\u3002\n\n\u6700\u9069\u5316\u306e\u30e2\u30c7\u30ea\u30f3\u30b0\u3067\u306f\u3001\u4e3b\u306bPuLP\u3068pandas\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u7528\u3044\u3066\u3044\u307e\u3059\u3002\n\n- PuLP\u306f\u3001\u6570\u7406\u30e2\u30c7\u30ea\u30f3\u30b0\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3042\u308a\u3001pandas\u306f\u30c7\u30fc\u30bf\u5206\u6790\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u3042\u308b\u3002\n- pandas\u306f\u3001\u30e2\u30c7\u30eb\u306b\u542b\u307e\u308c\u308b\u30c7\u30fc\u30bf\u306e\u4e2d\u3067\u3001\u8868\u3067\u8868\u73fe\u3067\u304d\u308b\u30c7\u30fc\u30bf\u3092\u6271\u3046\u306e\u306b\u9069\u3057\u3066\u304a\u308a\u3001\u8907\u96d1\u306a\u51e6\u7406\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\u307e\u305f\u3001pandas\u306f\u5185\u90e8\u3067numpy\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\n- numpy\u306f\u3001C\u3084Fortran\u3067\u66f8\u304b\u308c\u305f\u9ad8\u5ea6\u306b\u6700\u9069\u5316\u3055\u308c\u305f\u7dda\u5f62\u4ee3\u6570\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3057\u3066\u304a\u308a\u884c\u5217\u8a08\u7b97\u3092\u52b9\u7387\u3088\u304f\u8a08\u7b97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n# PuLP\u306b\u3064\u3044\u3066\n\n\u6570\u7406\u6700\u9069\u5316\u554f\u984c\u3092\u89e3\u304f\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30b9\u30c6\u30c3\u30d7\u3092\u884c\u3044\u307e\u3059\u3002\n\n- \u30e2\u30c7\u30e9\u30fc\u3067\u6570\u7406\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\n- \u30bd\u30eb\u30d0\u30fc\u3092\u3088\u3073\u51fa\u3057\u3066\u3001\u89e3\u3092\u5f97\u307e\u3059\nPuLP\u306fCOIN\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u4f5c\u6210\u3055\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3001\u30e2\u30c7\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\nPuLP\u3067\u306f\u3001\u30bd\u30eb\u30d0\u30fc\u3068\u3057\u3066CBC,Gurobi,GLPK\u306a\u3069\u3044\u308d\u3044\u308d\u306a\u3082\u306e\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001CBC\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002PuLP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001CBC\u3082\u540c\u6642\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\n  - CBC: COIN\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7121\u6599\u30bd\u30eb\u30d0\u30fc(COIN-OR Branch and Cut \u306e\u7565)  https://projects.coin-or.org/Cbc\n  - Gurobi: \u9ad8\u6027\u80fd\u306a\u5546\u7528\u30bd\u30eb\u30d0\u30fc http://www.gurobi.com/\n  - GLPK: GNU\u88fd\u306e\u7121\u6599\u30bd\u30eb\u30d0\u30fc www.gnu.org/software/glpk/\n\nPuLP\u3067\u6271\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u554f\u984c\u306f\u3001\u6df7\u5408\u6574\u6570\u6700\u9069\u5316\u554f\u984c\u3067\u3059\u3002\n\u6df7\u5408\u6574\u6570\u6700\u9069\u5316\u554f\u984c\u306f\u3001\u6570\u7406\u6700\u9069\u5316\u554f\u984c\u306e1\u7a2e\u3067\u3001\u4e0b\u8a18\u306e\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\n\n- \u9023\u7d9a(\u5b9f\u6570)\u5909\u6570\u3068\u6574\u6570\u5909\u6570\u3092\u4f7f\u3063\u3066\u8868\u73fe\u3055\u308c\u308b\n- \u76ee\u7684\u95a2\u6570\u3068\u5236\u7d04\u6761\u4ef6\u304c1\u6b21\u5f0f\u3067\u3042\u308b\n\n\u3055\u3089\u306b\u8a73\u7d30\u306b\u3064\u3044\u3066\u8abf\u3079\u305f\u3044\u5834\u5408\u306f\u3001\u53c2\u8003\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n# PuLP\u306e\u4f7f\u3044\u65b9\n\u4e0b\u8a18\u306e\u554f\u984c\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```text:\u554f\u984c\n\u6750\u6599A\u3068B\u304b\u3089\u5408\u6210\u3067\u304d\u308b\u5316\u5b66\u88fd\u54c1X\u3068Y\u3092\u305f\u304f\u3055\u3093\u4f5c\u6210\u3057\u305f\u3044\u3002\nX\u30921kg\u4f5c\u308b\u306e\u306b\u3001A\u304c1kg\u3001B\u304c2kg\u5fc5\u8981\u3067\u3042\u308b\u3002\nY\u30921kg\u4f5c\u308b\u306e\u306b\u3001A\u304c1kg\u3001B\u304c2kg\u5fc5\u8981\u3067\u3042\u308b\u3002\n\u307e\u305f\u3001X\u3082Y\u30821kg\u5f53\u308a\u306e\u4fa1\u683c\u306f100\u5186\u3067\u3042\u308b\u3002\n\u6750\u6599A\u306f16kg\u3001B\u306f18kg\u3057\u304b\u306a\u3044\u3068\u304d\u306b\u3001X\u3068Y\u306e\u4fa1\u683c\u306e\u5408\u8a08\u304c\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001\nX\u3068Y\u3092\u3069\u308c\u3060\u3051\u4f5c\u6210\u3059\u308c\u3070\u3088\u3044\u304b\u6c42\u3081\u3088\u3002\n```\n\n![prob.png](https://qiita-image-store.s3.amazonaws.com/0/13955/8dd72ab1-25fd-c8c3-3e61-37a32f1070db.png)\n\n\u554f\u984c\u3092\u6570\u7406\u30e2\u30c7\u30eb\u3067\u3042\u3089\u308f\u3059\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u6570\u7406\u30e2\u30c7\u30eb\u3092\u5f0f\u3067\u8868\u73fe\u3059\u308b\u3053\u3068\u3092\u5b9a\u5f0f\u5316\u3059\u308b\u3068\u3044\u3044\u307e\u3059\u3002\n\n![formula.png](https://qiita-image-store.s3.amazonaws.com/0/13955/f32472bc-b2c7-5879-5ba8-428db713b2c9.png)\n\n\u3053\u308c\u3092PuLP\u3067\u30e2\u30c7\u30eb\u5316\u3057\u3066\u89e3\u3044\u3066\u307f\u307e\u3059\u3002\n\n```py3:python3\nfrom pulp import *\nm = LpProblem(sense=LpMaximize) # \u6570\u7406\u30e2\u30c7\u30eb\nx = LpVariable('x', lowBound=0) # \u5909\u6570\ny = LpVariable('y', lowBound=0) # \u5909\u6570\nm += 100 * x + 100 * y # \u76ee\u7684\u95a2\u6570\nm += x + 2 * y <= 16 # \u6750\u6599A\u306e\u4e0a\u9650\u306e\u5236\u7d04\u6761\u4ef6\nm += 3 * x + y <= 18 # \u6750\u6599B\u306e\u4e0a\u9650\u306e\u5236\u7d04\u6761\u4ef6\nm.solve() # \u30bd\u30eb\u30d0\u30fc\u306e\u5b9f\u884c\nprint(value(x), value(y)) # 4, 6\n```\n\n\u4ee5\u4e0b\u3001\u9806\u756a\u306b\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\n    from pulp import *\n\n## \u6570\u7406\u30e2\u30c7\u30eb\u306e\u4f5c\u6210\n    \u6700\u5c0f\u5316\u554f\u984c\u306e\u3068\u304d: m = LpPrblem()\n    \u6700\u5927\u5316\u554f\u984c\u306e\u3068\u304d: m = LpProblem(sense=LpMaximize)\n\n## \u5909\u6570\u306e\u4f5c\u6210\n    \u9023\u7d9a\u5909\u6570: x = LpVariable(\u5909\u6570\u540d, lowBound=0)\n    0-1\u5909\u6570: x = LpVariable(\u5909\u6570\u540d, cat=LpBinary)\n    \u9023\u7d9a\u5909\u6570\u306e\u30ea\u30b9\u30c8: x = [LpVariable(i\u756a\u76ee\u306e\u5909\u6570\u540d, lowBound=0) for i in range(n)]\n    \u5909\u6570\u540d\u306f\u3001\u5fc5\u305a\u7570\u306a\u308b\u3088\u3046\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\n\n## \u76ee\u7684\u95a2\u6570\u306e\u8a2d\u5b9a\n    m += \u5f0f\n\n## \u5236\u7d04\u6761\u4ef6\u306e\u8ffd\u52a0\n    m += \u5f0f == \u5f0f\n    m += \u5f0f <= \u5f0f\n    m += \u5f0f >= \u5f0f\n\n## \u5f0f\u306e\u4f8b\n    2 * x + 3 * y - 5\n    \u548c: lpSum(\u5909\u6570\u306e\u30ea\u30b9\u30c8)\n    \u5185\u7a4d: lpDot(\u4fc2\u6570\u306e\u30ea\u30b9\u30c8, \u5909\u6570\u306e\u30ea\u30b9\u30c8)\n\n## \u30bd\u30eb\u30d0\u30fc\u306e\u5b9f\u884c\n    m.solve()\n\n## \u5909\u6570\u3084\u5f0f\u3084\u76ee\u7684\u95a2\u6570\u306e\u5024\n    value(\u5909\u6570)\u3001value(\u5f0f)\u3001value(m.objective)\n\n\n# PuLP\u3068pandas\u306e\u7d44\u5408\u305b\u306b\u3064\u3044\u3066\nPuLP\u3068pandas\u3092\u7d44\u5408\u305b\u3066\u3001pandas\u306e\u8868(DataFrame)\u3067\u5909\u6570(LpVariable)\u3092\u7ba1\u7406\u3059\u308b\u3068\u3001\u5b9a\u5f0f\u5316\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u3067\u304d\u307e\u3059\u3002\n\n\u8f38\u9001\u6700\u9069\u5316\u554f\u984c\u3092\u4f8b\u306b\u3057\u3066\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n## \u8f38\u9001\u6700\u9069\u5316\u554f\u984c\n\n> \u5009\u5eab\u7fa4\u304b\u3089\u5de5\u5834\u7fa4\u3078\u90e8\u54c1\u3092\u642c\u9001\u3057\u305f\u3044\u3002\u8f38\u9001\u8cbb\u304c\u6700\u5c0f\u3068\u306a\u308b\u8a08\u753b\u3092\u6c42\u3081\u305f\u3044\u3002\n\n- \u5009\u5eab\u7fa4\u304b\u3089\u5de5\u5834\u7fa4\u3078\u306e\u8f38\u9001\u91cf\u3092\u6c7a\u3081\u305f\u3044 \u2192 \u5909\u6570\n- \u8f38\u9001\u30b3\u30b9\u30c8\u3092\u6700\u5c0f\u5316\u3057\u305f\u3044 \u2192 \u76ee\u7684\u95a2\u6570\n- \u5404\u5009\u5eab\u304b\u3089\u306e\u642c\u51fa\u306f\u3001\u4f9b\u7d66\u53ef\u80fd\u91cf\u4ee5\u4e0b \u2192 \u5236\u7d04\n- \u5404\u5de5\u5834\u3078\u306e\u642c\u5165\u306f\u3001\u9700\u8981\u91cf\u4ee5\u4e0a \u2192 \u5236\u7d04\n\n<table>\n<tr><td rowspan=\"2\" colspan=\"2\">\u8f38\u9001\u8cbb</td><td colspan=\"4\">\u7d44\u307f\u7acb\u3066\u5de5\u5834</td></tr>\n<tr><td>F1</td><td>F2</td><td>F3</td><td>F4</td><td>\u4f9b\u7d66</td></tr>\n<tr><td rowspan=\"3\">\u5009\u5eab</td><td>W1</td><td>10</td><td>10</td><td>11</td><td>17</td><td>35</td></tr>\n<tr><td>W2</td><td>16</td><td>19</td><td>12</td><td>14</td><td>41</td></tr>\n<tr><td>E3</td><td>15</td><td>12</td><td>14</td><td>12</td><td>42</td></tr>\n<tr><td></td><td>\u9700\u8981</td><td>28</td><td>29</td><td>31</td><td>25</td></tr>\n</table>\n\n## \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8a2d\u5b9a\n\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002(\u6570\u5b57\u306f\u524d\u8868\u3068\u540c\u3058)\n\n```py3:python3\nimport numpy as np, pandas as pd\nfrom itertools import product\nfrom pulp import *\nnp.random.seed(1)\nnw, nf = 3, 4\npr = list(product(range(nw),range(nf)))\n\u4f9b\u7d66 = np.random.randint(30, 50, nw)\n\u9700\u8981 = np.random.randint(20, 40, nf)\n\u8f38\u9001\u8cbb = np.random.randint(10, 20, (nw,nf))\n```\n\n## pandas\u3092\u4f7f\u308f\u306a\u3044\u6570\u7406\u30e2\u30c7\u30eb\n\u5909\u6570\u306f\u3001\u6dfb\u3048\u5b57\u3067\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\n```py3:python3\nm1 = LpProblem()\nv1 = {(i,j):LpVariable('v%d_%d'%(i,j), lowBound=0) for i,j in pr}\nm1 += lpSum(\u8f38\u9001\u8cbb[i][j] * v1[i,j] for i,j in pr)\nfor i in range(nw):\n    m1 += lpSum(v1[i,j] for j in range(nf)) <= \u4f9b\u7d66[i]\nfor j in range(nf):\n    m1 += lpSum(v1[i,j] for i in range(nw)) >= \u9700\u8981[j]\nm1.solve()\n{k:value(x) for k,x in v1.items() if value(x) > 0}\n>>>\n{(0, 0): 28.0,\n (0, 1): 7.0,\n (1, 2): 31.0,\n (1, 3): 5.0,\n (2, 1): 22.0,\n (2, 3): 20.0}\n```\n\n## pandas\u3092\u4f7f\u3063\u305f\u6570\u7406\u30e2\u30c7\u30eb\n\u5909\u6570\u306f\u3001\u8868\u306e\u5c5e\u6027\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\u307e\u305a\u3001\u8868\u3092\u4f5c\u6210\u3057\u307e\u3057\u3087\u3046\u3002\n\n```py3:python3\na = pd.DataFrame([(i,j) for i, j in pr], columns=['\u5009\u5eab', '\u5de5\u5834'])\na['\u8f38\u9001\u8cbb'] = \u8f38\u9001\u8cbb.flatten()\na[:3]\n```\n\n<table>\n<tr><th></th><th>\u5009\u5eab</th><th>\u5de5\u5834</th><th>\u8f38\u9001\u8cbb</th></tr>\n<tr><th>0</th><td>0</td><td>0</td><td>10</td></tr>\n<tr><th>1</th><td>0</td><td>1</td><td>10</td></tr>\n<tr><th>2</th><td>0</td><td>2</td><td>11</td></tr>\n</table>\n\n\u540c\u69d8\u306b\u6570\u7406\u30e2\u30c7\u30eb\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```py3:python3\nm2 = LpProblem()\na['Var'] = [LpVariable('v%d'%i, lowBound=0) for i in a.index]\nm2 += lpDot(a.\u8f38\u9001\u8cbb, a.Var)\nfor k, v in a.groupby('\u5009\u5eab'):\n    m2 += lpSum(v.Var) <= \u4f9b\u7d66[k]\nfor k, v in a.groupby('\u5de5\u5834'):\n    m2 += lpSum(v.Var) >= \u9700\u8981[k]\nm2.solve()\na['Val'] = a.Var.apply(value)\na[a.Val > 0]\n```\n\n<table>\n    <tr>\n      <th></th>\n      <th>\u5009\u5eab</th>\n      <th>\u5de5\u5834</th>\n      <th>\u8f38\u9001\u8cbb</th>\n      <th>Var</th>\n      <th>Val</th>\n    </tr>\n    <tr>\n      <th>0</th>\n      <td>0</td>\n      <td>0</td>\n      <td>10</td>\n      <td>v0</td>\n      <td>28.0</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>0</td>\n      <td>1</td>\n      <td>10</td>\n      <td>v1</td>\n      <td>7.0</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>1</td>\n      <td>2</td>\n      <td>12</td>\n      <td>v6</td>\n      <td>31.0</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>1</td>\n      <td>3</td>\n      <td>14</td>\n      <td>v7</td>\n      <td>5.0</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>2</td>\n      <td>1</td>\n      <td>12</td>\n      <td>v9</td>\n      <td>22.0</td>\n    </tr>\n    <tr>\n      <th>11</th>\n      <td>2</td>\n      <td>3</td>\n      <td>12</td>\n      <td>v11</td>\n      <td>20.0</td>\n    </tr>\n</table>\n\n\u6dfb\u3048\u5b57\u3092\u4f7f\u3063\u305f\u8868\u73fe\u306f\u3001\u6dfb\u3048\u5b57\u304c\u4f55\u3092\u8868\u3057\u3066\u3044\u308b\u304b\u899a\u3048\u3066\u3044\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3057\u304b\u3057\u3001PuLP\u3068pandas\u3092\u7d44\u5408\u305b\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u3001\u6570\u7406\u30e2\u30c7\u30eb\u304c\u7406\u89e3\u3057\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\n\n- \u5358\u306a\u308b\"i\"\u3068\u304b\u3067\u306f\u306a\u304f\u3001\"\u5009\u5eab\"\u306a\u3069\u306e\u5217\u540d\u304c\u4f7f\u3048\u308b\u3002\n- pandas\u306e\u6761\u4ef6\u5f0f\u3092\u4f7f\u3063\u3066\u3001\u6570\u5f0f\u3092\u7d44\u307f\u7acb\u3066\u3089\u308c\u308b\u3002(\u53c2\u8003 [\u7d44\u5408\u305b\u6700\u9069\u5316\u3067N Queen\u554f\u984c\u3092\u89e3\u304f](http://qiita.com/Tsutomu-KKE@github/items/8ae87b08668307b58006))\n- pandas\u306e\u4fbf\u5229\u306a\u95a2\u6570(groupby\u306a\u3069)\u304c\u4f7f\u3048\u308b\u3002\n\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\n\n- \u8a18\u4e8b\n    - [\u7d44\u5408\u305b\u6700\u9069\u5316\u3092\u4f7f\u304a\u3046](http://qiita.com/Tsutomu-KKE@github/items/bfbf4c185ed7004b5721)\n    - [\u6570\u7406\u30e2\u30c7\u30eb\u306b\u304a\u3051\u308b\u5909\u6570\u306e\u548c](http://qiita.com/Tsutomu-KKE@github/items/6701841122acc3130a29)\n    - [\u7d44\u5408\u305b\u6700\u9069\u5316\u30bd\u30eb\u30d0\u30fc\u306e\u5a01\u529b](http://qiita.com/Tsutomu-KKE@github/items/82831e01adc3f84c36f5)\n    - [\u53cc\u5bfe\u554f\u984c\u3092\u8abf\u3079\u308b](http://qiita.com/Tsutomu-KKE@github/items/d1812ff9b5ccf0ecc716)\n    - PuLP\u3068pandas\u306e\u7d44\u5408\u305b\u306e\u4f8b\n        - [\u770c\u5225\u30c7\u30fc\u30bf\u306e\u53ef\u8996\u5316(4\u8272\u554f\u984c)](http://qiita.com/Tsutomu-KKE@github/items/6d17889ba47357e44131#4%E8%89%B2%E5%95%8F%E9%A1%8C)\n        - [\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u30c7\u30fc\u30c8\u30b3\u30fc\u30b9\u3092\u6c7a\u3081\u3088\u3046](http://qiita.com/Tsutomu-KKE@github/items/364786bbcf57c5b922ad)\n        - [\u7d44\u5408\u305b\u6700\u9069\u5316\u3067N Queen\u554f\u984c\u3092\u89e3\u304f](http://qiita.com/Tsutomu-KKE@github/items/8ae87b08668307b58006)\n        - [\u30cf\u30e9\u30cf\u30e9\u3059\u308b\u30c8\u30fc\u30ca\u30e1\u30f3\u30c8\u306e\u65e5\u7a0b\u3092\u6c42\u3081\u3088\u3046](http://qiita.com/Tsutomu-KKE@github/items/402af3ea31c627f21750)\n        - [\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u5b66\u4f1a\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u3059\u308b](http://qiita.com/Tsutomu-KKE@github/items/305c171e0c562cad96b8)\n        - [\u30ec\u30b9\u30c8\u30e9\u30f3\u306e\u58f2\u4e0a\u3092\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u6700\u5927\u5316\u3059\u308b](http://qiita.com/Tsutomu-KKE@github/items/41341ed5a58890c931d2)\n        - [\u6700\u9069\u5316\u3067\u9053\u8def\u8a2d\u7f6e](http://qiita.com/Tsutomu-KKE@github/items/4d5715f6281be39f51c6)\n        - [\u6570\u72ec\u3092\u7d44\u5408\u305b\u6700\u9069\u3067\u89e3\u304f](http://qiita.com/Tsutomu-KKE@github/items/4f919f453aae95b3834b)\n        - [\u732e\u7acb\u3092\u7d44\u5408\u305b\u6700\u9069\u5316\u3067\u8003\u3048\u308b](http://qiita.com/Tsutomu-KKE@github/items/f8be15f56cbacdbb7bd9)\n- \u66f8\u7c4d\n    - [\u300c\u4eca\u65e5\u304b\u3089\u4f7f\u3048\u308b!\u7d44\u5408\u305b\u6700\u9069\u5316\u300d](https://www.amazon.co.jp/dp/4061565443/)\n    - [\u300cPython\u8a00\u8a9e\u306b\u3088\u308b\u30d3\u30b8\u30cd\u30b9\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u300d](http://logopt.com/python_analytics/)\n    - [\u300c\u30e2\u30c7\u30ea\u30f3\u30b0\u306e\u8af8\u76f8 (\u30b7\u30ea\u30fc\u30ba:\u6700\u9069\u5316\u30e2\u30c7\u30ea\u30f3\u30b0)\u300d](https://www.amazon.co.jp/dp/4764905191/)\n- \u30bd\u30eb\u30d0\u30fc\u95a2\u9023\n    - [PuLP\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://pythonhosted.org/PuLP/)\n    - \u5bae\u4ee3\u5148\u751f\u306e[\u6574\u6570\u8a08\u753b\u6cd5\u30e1\u30e2](http://web.tuat.ac.jp/~miya/ipmemo.html)\n    - [\u6574\u6570\u8a08\u753b\u6cd5\u306b\u3088\u308b\u5b9a\u5f0f\u5316\u5165\u9580](http://web.tuat.ac.jp/~miya/fujie_ORSJ.pdf)\n    - [\u6574\u6570\u8a08\u753b\u30bd\u30eb\u30d0\u30fc\u5165\u9580](http://web.tuat.ac.jp/~miya/miyashiro_ORSJ.pdf)\n    - [ZIMPL\u8a00\u8a9e\u3068SCIP\u306b\u3088\u308b\u6570\u7406\u6700\u9069\u5316](http://ir.acc.senshu-u.ac.jp/?action=pages_view_main&active_action=repository_view_main_item_detail&item_id=9818&item_no=1&page_id=13&block_id=52)\n    - [Gurobi Optimizer](https://www.octobersky.jp/products/gurobi/gurobi.html)\n\n\u4ee5\u4e0a\n"}