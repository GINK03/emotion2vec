{"tags": ["alpine", "docker"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nalpine linux\u3067Docker\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\u3068\u306a\u308b\u3068\u5927\u62b5\u306f\u300c\u3067\u304d\u308b\u3060\u3051\u5bb9\u91cf\u3092\u5c0f\u3055\u304f\u3057\u305f\u3044\u300d\u3068\u3044\u3046\u8003\u3048\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u5927\u62b5\u306e\u30a2\u30d7\u30ea\u3067\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3046\u3068\u601d\u3046\u306e\u3067\u3001mysql\u306e\u958b\u767a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5165\u308c\u305f\u4e0a\u3067\u305d\u308c\u305e\u308c\u306e\u8a00\u8a9e\u7528\u306e\u63a5\u7d9a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u308b\u3068\u601d\u3044\u307e\u3059\u3002alpine linux\u3067\u306emysql\u30e9\u30a4\u30d6\u30e9\u30ea\u306fmariadb-dev\u3067\u3059\u304c\u3053\u3044\u3064\u304c\u7570\u69d8\u306bfat\u3067\u3059\u3002\nhttps://pkgs.alpinelinux.org/package/main/x86_64/mariadb-dev\n\u63a5\u7d9a\u30e9\u30a4\u30d6\u30e9\u30ea\u3060\u3051\u306a\u306f\u305a\u306a\u306e\u306b\u306a\u3093\u3067\u3053\u3093\u306a\u306b\u91cd\u3044\u3093\u3060\u3068\u601d\u3063\u305f\u306e\u3067\u3002\n\n\u7d50\u8ad6\nalpine linux\u306emariadb-dev\u306fserver\u3054\u3068\u5165\u308b\u306e\u3067\u30c7\u30ab\u30a4\u3002Docker\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\u6642\u3067mariadb-dev\u3092\u4f7f\u3046\u969b\u306f\u30b5\u30fc\u30d0\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f\u8981\u3089\u306a\u3044\u306e\u3067Dockerfile\u306brm /usr/lib/mysqld*\u3068rm /usr/bin/mysql*\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\u4ee5\u4e0b\u8abf\u67fb\u5185\u5bb9\u3068\u524a\u9664\u524d\u5f8c\u306e\u30d3\u30d5\u30a9\u30fc\u30a2\u30d5\u30bf\u30fc\u3002\n\n\u72af\u4eba\u63a2\u3057\n\u9069\u5f53\u306balpine\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u3001mysql\u306edev\u30d1\u30c3\u30b1\u30fc\u30b8\u3060\u3051\u5165\u308c\u308b\u3002\ndocker run -dit alpine ash\n\napk add --update mariadb-dev\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5bb9\u91cf\u3092\u8abf\u67fb\n/ # du -sh /\n380.5M  /\n\n/ # du -sh /*\n796.0K  /bin\n0       /dev\n400.0K  /etc\n4.0K    /home\n3.5M    /lib\n0       /linuxrc\n16.0K   /media\n4.0K    /mnt\n0       /proc\n8.0K    /root\n4.0K    /run\n216.0K  /sbin\n0       /sys\n4.0K    /tmp\n374.8M  /usr\n808.0K  /var\n\n/ # du -sh /usr/*\n118.5M  /usr/bin\n12.0K   /usr/data\n6.6M    /usr/include\n234.4M  /usr/lib\n16.0K   /usr/local\n5.4M    /usr/mysql-test\n4.0K    /usr/sbin\n9.9M    /usr/share\n\n/ # ls -lah /usr/lib/\ntotal 233036\ndrwxr-xr-x    6 root     root        4.0K Mar  5 01:51 .\ndrwxr-xr-x   13 root     root        4.0K Mar  5 01:51 ..\ndrwxr-xr-x    2 root     root        4.0K Mar  5 01:50 engines\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libaio.so.1 -> libaio.so.1.0.1\n-rwxr-xr-x    1 root     root        5.2K Oct 29 19:39 libaio.so.1.0.1\n-rw-r--r--    1 root     root        4.1M Mar  1 16:17 libcrypto.a\nlrwxrwxrwx    1 root     root          18 Mar  5 01:50 libcrypto.so -> libcrypto.so.1.0.0\nlrwxrwxrwx    1 root     root          28 Mar  5 01:50 libcrypto.so.1.0.0 -> ../../lib/libcrypto.so.1.0.0\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libformw.so.6 -> libformw.so.6.0\n-rwxr-xr-x    1 root     root       58.9K Dec 18 16:06 libformw.so.6.0\n-rw-r--r--    1 root     root       73.8K Dec 16 10:40 libgcc_s.so.1\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libmenuw.so.6 -> libmenuw.so.6.0\n-rwxr-xr-x    1 root     root       25.9K Dec 18 16:06 libmenuw.so.6.0\n-rw-r--r--    1 root     root       10.6M Feb 10 09:16 libmysqlclient.a\nlrwxrwxrwx    1 root     root          20 Mar  5 01:51 libmysqlclient.so -> libmysqlclient.so.18\nlrwxrwxrwx    1 root     root          24 Mar  5 01:50 libmysqlclient.so.18 -> libmysqlclient.so.18.0.0\n-rwxr-xr-x    1 root     root        3.2M Feb 10 09:18 libmysqlclient.so.18.0.0\nlrwxrwxrwx    1 root     root          16 Mar  5 01:51 libmysqlclient_r.a -> libmysqlclient.a\nlrwxrwxrwx    1 root     root          17 Mar  5 01:50 libmysqlclient_r.so -> libmysqlclient.so\n-rw-r--r--    1 root     root      194.0M Feb 10 09:18 libmysqld.a\nlrwxrwxrwx    1 root     root          15 Mar  5 01:51 libmysqld.so -> libmysqld.so.18\n-rwxr-xr-x    1 root     root       13.1M Feb 10 09:18 libmysqld.so.18\n-rw-r--r--    1 root     root       38.0K Feb 10 09:14 libmysqlservices.a\nlrwxrwxrwx    1 root     root          18 Mar  5 01:50 libncursesw.so.6 -> libncursesw.so.6.0\n-rwxr-xr-x    1 root     root      338.5K Dec 18 16:06 libncursesw.so.6.0\nlrwxrwxrwx    1 root     root          16 Mar  5 01:50 libpanelw.so.6 -> libpanelw.so.6.0\n-rwxr-xr-x    1 root     root       13.5K Dec 18 16:06 libpanelw.so.6.0\n-rw-r--r--    1 root     root      719.1K Mar  1 16:17 libssl.a\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libssl.so -> libssl.so.1.0.0\nlrwxrwxrwx    1 root     root          25 Mar  5 01:50 libssl.so.1.0.0 -> ../../lib/libssl.so.1.0.0\nlrwxrwxrwx    1 root     root          19 Mar  5 01:50 libstdc++.so.6 -> libstdc++.so.6.0.21\n-rwxr-xr-x    1 root     root        1.3M Dec 16 10:40 libstdc++.so.6.0.21\ndrwxr-xr-x    3 root     root        4.0K Mar  5 01:50 mysql\ndrwxr-xr-x    2 root     root        4.0K Mar  5 01:50 pkgconfig\nlrwxrwxrwx    1 root     root          17 Mar  5 01:50 terminfo -> ../share/terminfo\n\n\u305d\u3046\u304b\u3001dev\u30d1\u30c3\u30b1\u30fc\u30b8\u3060\u304b\u3089\u30b5\u30fc\u30d0\uff08mysqld\uff09\u3082\u5165\u3063\u3066\u308b\u306e\u304b\u3002\n\u63a5\u7d9a\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3060\u3051\u6b32\u3057\u3044\u304b\u3089/usr/lib/mysqld*\u306f\u524a\u9664\u3057\u3066\u3088\u3055\u305d\u3046\u3002\n\u3068\u3044\u3046\u3053\u3068\u306f\n/ # ls -lah /usr/bin/mysql*\n-rwxr-xr-x    1 root     root       13.1M Feb 10 09:18 /usr/bin/mysql_client_test_embedded\n-rwxr-xr-x    1 root     root        4.4K Feb 10 09:14 /usr/bin/mysql_config\n-rwxr-xr-x    1 root     root        4.1K Feb 10 09:14 /usr/bin/mysql_convert_table_format\n-rwxr-xr-x    1 root     root       13.1M Feb 10 09:18 /usr/bin/mysql_embedded\n-rwxr-xr-x    1 root     root       16.3K Feb 10 09:14 /usr/bin/mysql_install_db\n-rwxr-xr-x    1 root     root        3.0M Feb 10 09:18 /usr/bin/mysql_plugin\n-rwxr-xr-x    1 root     root       11.7K Feb 10 09:14 /usr/bin/mysql_secure_installation\n-rwxr-xr-x    1 root     root       17.1K Feb 10 09:14 /usr/bin/mysql_setpermission\n-rwxr-xr-x    1 root     root        3.0M Feb 10 09:18 /usr/bin/mysql_tzinfo_to_sql\n-rwxr-xr-x    1 root     root        3.1M Feb 10 09:18 /usr/bin/mysql_upgrade\n-rwxr-xr-x    1 root     root        3.8K Feb 10 09:14 /usr/bin/mysql_zap\n-rwxr-xr-x    1 root     root        3.2M Feb 10 09:18 /usr/bin/mysqlbinlog\n-rwxr-xr-x    1 root     root       13.6M Feb 10 09:18 /usr/bin/mysqld\n-rwxr-xr-x    1 root     root       24.2K Feb 10 09:14 /usr/bin/mysqld_multi\n-rwxr-xr-x    1 root     root       30.8K Feb 10 09:14 /usr/bin/mysqld_safe\n-rwxr-xr-x    1 root     root       34.1K Feb 10 09:14 /usr/bin/mysqlhotcopy\n-rwxr-xr-x    1 root     root        3.1M Feb 10 09:18 /usr/bin/mysqlslap\n-rwxr-xr-x    1 root     root        3.6M Feb 10 09:18 /usr/bin/mysqltest\n-rwxr-xr-x    1 root     root       13.0M Feb 10 09:18 /usr/bin/mysqltest_embedded\n\nCLI\u3092\u4f7f\u308f\u306a\u3044\u306e\u3067/usr/bin/mysql*\u3082\u524a\u9664\u3057\u3066\u3088\u3044\u3067\u3059\u306d\u3002\n\n\u30d3\u30d5\u30a9\u30fc\u30a2\u30d5\u30bf\u30fc\n\u4e0b\u8a18\u306fGomitter\u3068\u3044\u3046\u30af\u30bd\u30a2\u30d7\u30ea\u3092\u666e\u901a\u306bDocker\u5316\u3057\u305f\u6642\u306e\u5bb9\u91cf\nREPOSITORY                TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nceleron1ghz/gomitter      latest              ba4aa7c1e2cb        32 minutes ago      492.7 MB\n\nREPOSITORY                TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nceleron1ghz/gomitter      latest              703a02f09970        4 minutes ago       200 MB\n\n\u534a\u5206\u4ee5\u4e0b\uff01\uff01\n\n## \u6982\u8981\nalpine linux\u3067Docker\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\u3068\u306a\u308b\u3068\u5927\u62b5\u306f\u300c\u3067\u304d\u308b\u3060\u3051\u5bb9\u91cf\u3092\u5c0f\u3055\u304f\u3057\u305f\u3044\u300d\u3068\u3044\u3046\u8003\u3048\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5927\u62b5\u306e\u30a2\u30d7\u30ea\u3067\u306f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f7f\u3046\u3068\u601d\u3046\u306e\u3067\u3001mysql\u306e\u958b\u767a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5165\u308c\u305f\u4e0a\u3067\u305d\u308c\u305e\u308c\u306e\u8a00\u8a9e\u7528\u306e\u63a5\u7d9a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u308b\u3068\u601d\u3044\u307e\u3059\u3002alpine linux\u3067\u306emysql\u30e9\u30a4\u30d6\u30e9\u30ea\u306f`mariadb-dev`\u3067\u3059\u304c\u3053\u3044\u3064\u304c\u7570\u69d8\u306bfat\u3067\u3059\u3002\n\nhttps://pkgs.alpinelinux.org/package/main/x86_64/mariadb-dev\n\n\u63a5\u7d9a\u30e9\u30a4\u30d6\u30e9\u30ea\u3060\u3051\u306a\u306f\u305a\u306a\u306e\u306b\u306a\u3093\u3067\u3053\u3093\u306a\u306b\u91cd\u3044\u3093\u3060\u3068\u601d\u3063\u305f\u306e\u3067\u3002\n\n\n## \u7d50\u8ad6\nalpine linux\u306e`mariadb-dev`\u306fserver\u3054\u3068\u5165\u308b\u306e\u3067\u30c7\u30ab\u30a4\u3002Docker\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\u6642\u3067`mariadb-dev`\u3092\u4f7f\u3046\u969b\u306f\u30b5\u30fc\u30d0\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306f\u8981\u3089\u306a\u3044\u306e\u3067`Dockerfile`\u306b`rm /usr/lib/mysqld*`\u3068`rm /usr/bin/mysql*`\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n\u4ee5\u4e0b\u8abf\u67fb\u5185\u5bb9\u3068\u524a\u9664\u524d\u5f8c\u306e\u30d3\u30d5\u30a9\u30fc\u30a2\u30d5\u30bf\u30fc\u3002\n\n\n## \u72af\u4eba\u63a2\u3057\n\u9069\u5f53\u306balpine\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u3001mysql\u306edev\u30d1\u30c3\u30b1\u30fc\u30b8\u3060\u3051\u5165\u308c\u308b\u3002\n\n```\ndocker run -dit alpine ash\n```\n\n```\napk add --update mariadb-dev\n```\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5bb9\u91cf\u3092\u8abf\u67fb\n\n```\n/ # du -sh /\n380.5M  /\n\n/ # du -sh /*\n796.0K  /bin\n0       /dev\n400.0K  /etc\n4.0K    /home\n3.5M    /lib\n0       /linuxrc\n16.0K   /media\n4.0K    /mnt\n0       /proc\n8.0K    /root\n4.0K    /run\n216.0K  /sbin\n0       /sys\n4.0K    /tmp\n374.8M  /usr\n808.0K  /var\n\n/ # du -sh /usr/*\n118.5M  /usr/bin\n12.0K   /usr/data\n6.6M    /usr/include\n234.4M  /usr/lib\n16.0K   /usr/local\n5.4M    /usr/mysql-test\n4.0K    /usr/sbin\n9.9M    /usr/share\n```\n\n```\n/ # ls -lah /usr/lib/\ntotal 233036\ndrwxr-xr-x    6 root     root        4.0K Mar  5 01:51 .\ndrwxr-xr-x   13 root     root        4.0K Mar  5 01:51 ..\ndrwxr-xr-x    2 root     root        4.0K Mar  5 01:50 engines\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libaio.so.1 -> libaio.so.1.0.1\n-rwxr-xr-x    1 root     root        5.2K Oct 29 19:39 libaio.so.1.0.1\n-rw-r--r--    1 root     root        4.1M Mar  1 16:17 libcrypto.a\nlrwxrwxrwx    1 root     root          18 Mar  5 01:50 libcrypto.so -> libcrypto.so.1.0.0\nlrwxrwxrwx    1 root     root          28 Mar  5 01:50 libcrypto.so.1.0.0 -> ../../lib/libcrypto.so.1.0.0\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libformw.so.6 -> libformw.so.6.0\n-rwxr-xr-x    1 root     root       58.9K Dec 18 16:06 libformw.so.6.0\n-rw-r--r--    1 root     root       73.8K Dec 16 10:40 libgcc_s.so.1\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libmenuw.so.6 -> libmenuw.so.6.0\n-rwxr-xr-x    1 root     root       25.9K Dec 18 16:06 libmenuw.so.6.0\n-rw-r--r--    1 root     root       10.6M Feb 10 09:16 libmysqlclient.a\nlrwxrwxrwx    1 root     root          20 Mar  5 01:51 libmysqlclient.so -> libmysqlclient.so.18\nlrwxrwxrwx    1 root     root          24 Mar  5 01:50 libmysqlclient.so.18 -> libmysqlclient.so.18.0.0\n-rwxr-xr-x    1 root     root        3.2M Feb 10 09:18 libmysqlclient.so.18.0.0\nlrwxrwxrwx    1 root     root          16 Mar  5 01:51 libmysqlclient_r.a -> libmysqlclient.a\nlrwxrwxrwx    1 root     root          17 Mar  5 01:50 libmysqlclient_r.so -> libmysqlclient.so\n-rw-r--r--    1 root     root      194.0M Feb 10 09:18 libmysqld.a\nlrwxrwxrwx    1 root     root          15 Mar  5 01:51 libmysqld.so -> libmysqld.so.18\n-rwxr-xr-x    1 root     root       13.1M Feb 10 09:18 libmysqld.so.18\n-rw-r--r--    1 root     root       38.0K Feb 10 09:14 libmysqlservices.a\nlrwxrwxrwx    1 root     root          18 Mar  5 01:50 libncursesw.so.6 -> libncursesw.so.6.0\n-rwxr-xr-x    1 root     root      338.5K Dec 18 16:06 libncursesw.so.6.0\nlrwxrwxrwx    1 root     root          16 Mar  5 01:50 libpanelw.so.6 -> libpanelw.so.6.0\n-rwxr-xr-x    1 root     root       13.5K Dec 18 16:06 libpanelw.so.6.0\n-rw-r--r--    1 root     root      719.1K Mar  1 16:17 libssl.a\nlrwxrwxrwx    1 root     root          15 Mar  5 01:50 libssl.so -> libssl.so.1.0.0\nlrwxrwxrwx    1 root     root          25 Mar  5 01:50 libssl.so.1.0.0 -> ../../lib/libssl.so.1.0.0\nlrwxrwxrwx    1 root     root          19 Mar  5 01:50 libstdc++.so.6 -> libstdc++.so.6.0.21\n-rwxr-xr-x    1 root     root        1.3M Dec 16 10:40 libstdc++.so.6.0.21\ndrwxr-xr-x    3 root     root        4.0K Mar  5 01:50 mysql\ndrwxr-xr-x    2 root     root        4.0K Mar  5 01:50 pkgconfig\nlrwxrwxrwx    1 root     root          17 Mar  5 01:50 terminfo -> ../share/terminfo\n```\n\n\u305d\u3046\u304b\u3001dev\u30d1\u30c3\u30b1\u30fc\u30b8\u3060\u304b\u3089\u30b5\u30fc\u30d0\uff08mysqld\uff09\u3082\u5165\u3063\u3066\u308b\u306e\u304b\u3002\n\u63a5\u7d9a\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3060\u3051\u6b32\u3057\u3044\u304b\u3089`/usr/lib/mysqld*`\u306f\u524a\u9664\u3057\u3066\u3088\u3055\u305d\u3046\u3002\n\u3068\u3044\u3046\u3053\u3068\u306f\n\n```\n/ # ls -lah /usr/bin/mysql*\n-rwxr-xr-x    1 root     root       13.1M Feb 10 09:18 /usr/bin/mysql_client_test_embedded\n-rwxr-xr-x    1 root     root        4.4K Feb 10 09:14 /usr/bin/mysql_config\n-rwxr-xr-x    1 root     root        4.1K Feb 10 09:14 /usr/bin/mysql_convert_table_format\n-rwxr-xr-x    1 root     root       13.1M Feb 10 09:18 /usr/bin/mysql_embedded\n-rwxr-xr-x    1 root     root       16.3K Feb 10 09:14 /usr/bin/mysql_install_db\n-rwxr-xr-x    1 root     root        3.0M Feb 10 09:18 /usr/bin/mysql_plugin\n-rwxr-xr-x    1 root     root       11.7K Feb 10 09:14 /usr/bin/mysql_secure_installation\n-rwxr-xr-x    1 root     root       17.1K Feb 10 09:14 /usr/bin/mysql_setpermission\n-rwxr-xr-x    1 root     root        3.0M Feb 10 09:18 /usr/bin/mysql_tzinfo_to_sql\n-rwxr-xr-x    1 root     root        3.1M Feb 10 09:18 /usr/bin/mysql_upgrade\n-rwxr-xr-x    1 root     root        3.8K Feb 10 09:14 /usr/bin/mysql_zap\n-rwxr-xr-x    1 root     root        3.2M Feb 10 09:18 /usr/bin/mysqlbinlog\n-rwxr-xr-x    1 root     root       13.6M Feb 10 09:18 /usr/bin/mysqld\n-rwxr-xr-x    1 root     root       24.2K Feb 10 09:14 /usr/bin/mysqld_multi\n-rwxr-xr-x    1 root     root       30.8K Feb 10 09:14 /usr/bin/mysqld_safe\n-rwxr-xr-x    1 root     root       34.1K Feb 10 09:14 /usr/bin/mysqlhotcopy\n-rwxr-xr-x    1 root     root        3.1M Feb 10 09:18 /usr/bin/mysqlslap\n-rwxr-xr-x    1 root     root        3.6M Feb 10 09:18 /usr/bin/mysqltest\n-rwxr-xr-x    1 root     root       13.0M Feb 10 09:18 /usr/bin/mysqltest_embedded\n```\n\nCLI\u3092\u4f7f\u308f\u306a\u3044\u306e\u3067`/usr/bin/mysql*`\u3082\u524a\u9664\u3057\u3066\u3088\u3044\u3067\u3059\u306d\u3002\n\n\n## \u30d3\u30d5\u30a9\u30fc\u30a2\u30d5\u30bf\u30fc\n\u4e0b\u8a18\u306f[Gomitter](https://github.com/celeron1ghz/Gomitter-Web)\u3068\u3044\u3046\u30af\u30bd\u30a2\u30d7\u30ea\u3092\u666e\u901a\u306bDocker\u5316\u3057\u305f\u6642\u306e\u5bb9\u91cf\n\n```\nREPOSITORY                TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nceleron1ghz/gomitter      latest              ba4aa7c1e2cb        32 minutes ago      492.7 MB\n```\n\n```\nREPOSITORY                TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\nceleron1ghz/gomitter      latest              703a02f09970        4 minutes ago       200 MB\n```\n\n\u534a\u5206\u4ee5\u4e0b\uff01\uff01\n"}