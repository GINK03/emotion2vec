{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u30bf\u30b0\u691c\u7d22\u7d50\u679c\u3092XML\u5f62\u5f0f\u3067\u53d6\u5f97\u3059\u308b\u3002\n\u65e2\u5b58\u306e\u691c\u7d22API\u304c\u3042\u308b\u305d\u3046\u3060\u304c\u3001\u30ed\u30b0\u30a4\u30f3\u5fc5\u9808\u3067\u4f7f\u3044\u306b\u304f\u3044\u3002\n\uff08\u2192\u53c2\u8003\u8a18\u4e8b\uff1a\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306esearch API\u4ed5\u69d8\u6574\u7406\uff09\n\u30ed\u30b0\u30a4\u30f3\u306a\u3057\u3067\u4f7f\u3046\u70ba\u306ePython\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3002\n\u203b\u65e2\u5b58\u306e\u691c\u7d22API\u3067\u306f51\u30da\u30fc\u30b8\u4ee5\u4e0a\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\u304c\u3001\u3053\u306e\u65b9\u6cd5\u306a\u3089\u53d6\u5f97\u3067\u304d\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n\n\u30b3\u30fc\u30c9\n\nnc2xml.py\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n# nc2xml.py\n# Copyright (c) 2014 nezuq\n# This software is released under the MIT License.\n# http://opensource.org/licenses/mit-license.php\n\nimport sys\nimport time\nimport datetime\nimport urllib\nimport urllib2\nfrom lxml import etree\n\nargvs = sys.argv\nargc = len(argvs)\n\n#\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\nKEYWORD = u'\uff77\uff8f\uff7c\uff80\uff9c\uff70'\nif 1 < argc:\n    KEYWORD = argvs[1].decode('utf-8')\n\n#\u30bd\u30fc\u30c8\u57fa\u6e96\n#SORT_TYPE = 'n' #\u6700\u65b0\u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\u65e5\u6642\n#SORT_TYPE = 'v' #\u518d\u751f\u6570\n#SORT_TYPE = 'm' #\u30de\u30a4\u30ea\u30b9\u30c8\n#SORT_TYPE = 'r' #\u30b3\u30e1\u30f3\u30c8\u6570\nSORT_TYPE = 'f' #\u6295\u7a3f\u65e5\u6642\n#SORT_TYPE = 'l' #\u518d\u751f\u6642\u9593\nif 2 < argc:\n    SORT_TYPE = argvs[2]\n\n#\u5bfe\u8c61\u30da\u30fc\u30b8\u756a\u53f7(ID\u53d6\u5f97\u958b\u59cb\u30da\u30fc\u30b8)\nMIN_PAGENUMBER = 1\nif 3 < argc:\n    MIN_PAGENUMBER = int(argvs[3])\n\n#\u5bfe\u8c61\u30da\u30fc\u30b8\u756a\u53f7(ID\u53d6\u5f97\u7d42\u4e86\u30da\u30fc\u30b8)\nMAX_PAGENUMBER = 3\nif 4 < argc:\n    MAX_PAGENUMBER = int(argvs[4])\n\n#\u691c\u7d22\u65b9\u6cd5\nSEARCH_TYPE = 'tag' #\u30bf\u30b0\u691c\u7d22\n\ndef main():\n    keyword = urllib2.quote(KEYWORD.encode(\"utf-8\"))\n    ids = []\n    nrow_bef = -1\n    npage = MIN_PAGENUMBER - 1\n    while ((nrow_bef != len(ids)) and (npage < MAX_PAGENUMBER)):\n        npage += 1\n        uri = 'http://www.nicovideo.jp/%s/%s?sort=%s&rss=2.0&page=%d' % (SEARCH_TYPE, keyword, SORT_TYPE, npage)\n        print u'\u52d5\u753bID\u554f\u5408\u305b\u4e2d  \uff1a ' + uri\n        time.sleep(1)\n        res = urllib2.urlopen(uri)\n        rss = etree.fromstring(res.read())\n        nrow_bef = len(ids)\n        ids += map((lambda x: x.text.rsplit('/', 1)[1]), rss.findall('./channel/item/link'))\n    query = 'http://i.nicovideo.jp/v3/video.array?v=' + ','.join(ids)\n    print u'\u52d5\u753b\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d \uff1a ' + query\n    d = datetime.datetime.today()\n    # \u203b\u554f\u3044\u5408\u308f\u305b\u306b20\u79d2\u4ee5\u4e0a\u304b\u304b\u308b\u5834\u5408\u306f\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u30010\u4ef6\u3068\u306a\u308b\u3002\n    # \u203b\u8ca0\u8377\u304c\u304b\u304b\u308b\u30af\u30a8\u30ea\u3092\u767a\u884c\u3059\u308b\u306e\u306fIP\u30d6\u30ed\u30c3\u30af\u3084API\u5c01\u9396\u306e\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067NG\u3002\n    time.sleep(1)\n    urllib.urlretrieve(query, u'%s_%s.xml' % (KEYWORD, d.strftime('%y%m%d%H%M%S')))\n    print 'end!'\n\nif __name__ == '__main__':\n    main()\n\n\n\nnc2xml.py\u3092\u5b9f\u884c\u3059\u308b\u3002\npython nc2xml.py \"\u767e\u5408\" m 1 3\n\n\n\n\u51fa\u529b\u30a4\u30e1\u30fc\u30b8\nhttp://i.nicovideo.jp/v3/video.array?v=sm9720246,sm19673281\n\n\u611f\u60f3\n\u767e\u5408\u6587\u5316\u767a\u5c55\u306e\u305f\u3081\u306b\u30c7\u30fc\u30bf\u5206\u6790\u3057\u306a\u304d\u3083\u2026\u2026\uff08\u4f7f\u547d\u611f\uff09\n\n\u53c2\u8003\u30da\u30fc\u30b8\n -> \u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306esearch API\u4ed5\u69d8\u6574\u7406\n -> i.nicovideo.jp API\u3068getthumbinfo API\u306e\u6bd4\u8f03\n -> \u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u691c\u7d22API\u306b\u3064\u3044\u3066\u8abf\u3079\u305f\u306e\u3067\u30e1\u30e2\n -> \u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u30bf\u30b0\u691c\u7d22\u7d50\u679c\u3092RSS\u3067\u53d6\u5f97\u3059\u308b\n#\u6982\u8981\n\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u30bf\u30b0\u691c\u7d22\u7d50\u679c\u3092XML\u5f62\u5f0f\u3067\u53d6\u5f97\u3059\u308b\u3002\n\u65e2\u5b58\u306e\u691c\u7d22API\u304c\u3042\u308b\u305d\u3046\u3060\u304c\u3001\u30ed\u30b0\u30a4\u30f3\u5fc5\u9808\u3067\u4f7f\u3044\u306b\u304f\u3044\u3002\n[\uff08\u2192\u53c2\u8003\u8a18\u4e8b\uff1a\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306esearch API\u4ed5\u69d8\u6574\u7406\uff09](http://qiita.com/sampleb3/items/f75173167e22fbbe4d90)\n\u30ed\u30b0\u30a4\u30f3\u306a\u3057\u3067\u4f7f\u3046\u70ba\u306ePython\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3002\n\n\u203b\u65e2\u5b58\u306e\u691c\u7d22API\u3067\u306f51\u30da\u30fc\u30b8\u4ee5\u4e0a\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\u304c\u3001\u3053\u306e\u65b9\u6cd5\u306a\u3089\u53d6\u5f97\u3067\u304d\u308b\u3068\u601d\u308f\u308c\u308b\u3002\n\n#\u30b3\u30fc\u30c9\n\n```py:nc2xml.py\n#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n\n# nc2xml.py\n# Copyright (c) 2014 nezuq\n# This software is released under the MIT License.\n# http://opensource.org/licenses/mit-license.php\n\nimport sys\nimport time\nimport datetime\nimport urllib\nimport urllib2\nfrom lxml import etree\n\nargvs = sys.argv\nargc = len(argvs)\n\n#\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\nKEYWORD = u'\uff77\uff8f\uff7c\uff80\uff9c\uff70'\nif 1 < argc:\n    KEYWORD = argvs[1].decode('utf-8')\n\n#\u30bd\u30fc\u30c8\u57fa\u6e96\n#SORT_TYPE = 'n' #\u6700\u65b0\u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\u65e5\u6642\n#SORT_TYPE = 'v' #\u518d\u751f\u6570\n#SORT_TYPE = 'm' #\u30de\u30a4\u30ea\u30b9\u30c8\n#SORT_TYPE = 'r' #\u30b3\u30e1\u30f3\u30c8\u6570\nSORT_TYPE = 'f' #\u6295\u7a3f\u65e5\u6642\n#SORT_TYPE = 'l' #\u518d\u751f\u6642\u9593\nif 2 < argc:\n    SORT_TYPE = argvs[2]\n\n#\u5bfe\u8c61\u30da\u30fc\u30b8\u756a\u53f7(ID\u53d6\u5f97\u958b\u59cb\u30da\u30fc\u30b8)\nMIN_PAGENUMBER = 1\nif 3 < argc:\n    MIN_PAGENUMBER = int(argvs[3])\n\n#\u5bfe\u8c61\u30da\u30fc\u30b8\u756a\u53f7(ID\u53d6\u5f97\u7d42\u4e86\u30da\u30fc\u30b8)\nMAX_PAGENUMBER = 3\nif 4 < argc:\n    MAX_PAGENUMBER = int(argvs[4])\n\n#\u691c\u7d22\u65b9\u6cd5\nSEARCH_TYPE = 'tag' #\u30bf\u30b0\u691c\u7d22\n\ndef main():\n    keyword = urllib2.quote(KEYWORD.encode(\"utf-8\"))\n    ids = []\n    nrow_bef = -1\n    npage = MIN_PAGENUMBER - 1\n    while ((nrow_bef != len(ids)) and (npage < MAX_PAGENUMBER)):\n        npage += 1\n        uri = 'http://www.nicovideo.jp/%s/%s?sort=%s&rss=2.0&page=%d' % (SEARCH_TYPE, keyword, SORT_TYPE, npage)\n        print u'\u52d5\u753bID\u554f\u5408\u305b\u4e2d  \uff1a ' + uri\n        time.sleep(1)\n        res = urllib2.urlopen(uri)\n        rss = etree.fromstring(res.read())\n        nrow_bef = len(ids)\n        ids += map((lambda x: x.text.rsplit('/', 1)[1]), rss.findall('./channel/item/link'))\n    query = 'http://i.nicovideo.jp/v3/video.array?v=' + ','.join(ids)\n    print u'\u52d5\u753b\u30c7\u30fc\u30bf\u53d6\u5f97\u4e2d \uff1a ' + query\n    d = datetime.datetime.today()\n    # \u203b\u554f\u3044\u5408\u308f\u305b\u306b20\u79d2\u4ee5\u4e0a\u304b\u304b\u308b\u5834\u5408\u306f\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u30010\u4ef6\u3068\u306a\u308b\u3002\n    # \u203b\u8ca0\u8377\u304c\u304b\u304b\u308b\u30af\u30a8\u30ea\u3092\u767a\u884c\u3059\u308b\u306e\u306fIP\u30d6\u30ed\u30c3\u30af\u3084API\u5c01\u9396\u306e\u53ef\u80fd\u6027\u3082\u3042\u308b\u306e\u3067NG\u3002\n    time.sleep(1)\n    urllib.urlretrieve(query, u'%s_%s.xml' % (KEYWORD, d.strftime('%y%m%d%H%M%S')))\n    print 'end!'\n\nif __name__ == '__main__':\n    main()\n```\n\n```bash:nc2xml.py\u3092\u5b9f\u884c\u3059\u308b\u3002\npython nc2xml.py \"\u767e\u5408\" m 1 3\n```\n\n#\u51fa\u529b\u30a4\u30e1\u30fc\u30b8\nhttp://i.nicovideo.jp/v3/video.array?v=sm9720246,sm19673281\n\n#\u611f\u60f3\n\u767e\u5408\u6587\u5316\u767a\u5c55\u306e\u305f\u3081\u306b\u30c7\u30fc\u30bf\u5206\u6790\u3057\u306a\u304d\u3083\u2026\u2026\uff08\u4f7f\u547d\u611f\uff09\n\n#\u53c2\u8003\u30da\u30fc\u30b8\n[ -> \u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306esearch API\u4ed5\u69d8\u6574\u7406](http://qiita.com/sampleb3/items/f75173167e22fbbe4d90)\n[ -> i.nicovideo.jp API\u3068getthumbinfo API\u306e\u6bd4\u8f03](http://qiita.com/sampleb3/items/c56dc9deaf0dc4980107)\n[ -> \u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u691c\u7d22API\u306b\u3064\u3044\u3066\u8abf\u3079\u305f\u306e\u3067\u30e1\u30e2](http://shouginekochann.blog9.fc2.com/blog-entry-151.html)\n[ -> \u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u306e\u30bf\u30b0\u691c\u7d22\u7d50\u679c\u3092RSS\u3067\u53d6\u5f97\u3059\u308b](http://appakumaturi.hatenablog.com/entry/2013/02/02/094356)\n", "tags": ["Python2.7.3", "\u30cb\u30b3\u30cb\u30b3\u52d5\u753b", "\u30cb\u30b3\u30cb\u30b3\u52d5\u753b\u7d71\u8a08\u30b7\u30ea\u30fc\u30ba"]}