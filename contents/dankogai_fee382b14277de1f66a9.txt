{"context": "\u524d\u3005\u56de\u306e\u6295\u7a3f\u306b\u5f15\u304d\u7d9a\u304d\u524d\u56de\u306e\u6295\u7a3f\u3082\u8a55\u5224\u826f\u304b\u3063\u305f\u306e\u3067\u8abf\u5b50\u306b\u4e57\u3063\u3066\u3084\u308a\u307e\u3057\u305f\u3002\u5f8c\u6094\u306f\u3057\u3066\u3044\u306a\u3044\u304c\u516c\u958b\u306f\u3057\u3066\u308b\u3002\n\n\n\nFilename\nzfs-xenial-fbsd11r-20170215.ova\n\n\n\n\nSize\n4,050,796,544B (3.77GiB)\n\n\nmd5\n612eba98ccc4d33ab9b6a7f822d23f4e\n\n\nsha1\n41ade4c475ffd8a5a2d12ea180f165c15ed98e1b\n\n\n\n\n\u306a\u3093\u305e\u3053\u308c?\n\u4e8b\u5b9f\u4e0a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4e00\u3064\u3057\u304b\u306a\u3044\u306e\u306b\u3001Ubuntu\u3060\u3051\u3067\u306f\u306a\u304fFreeBSD\u3082\u30d6\u30fc\u30c8\u3067\u304d\u307e\u3059\u3002Debian kFreeBSD\u3068\u304b\u3067\u306f\u306a\u304f\u6b63\u771f\u6b63\u9298The FreeBSD Project\u8b39\u88fd\u306eFreeBSD 11-RELEASE\u3067\u3059\u3002\n\nFreeBSD\u306e\u65b9\u306f\u8d77\u52d5\u6642\u306fCLI\u306e\u307f\u3067\u3059\u304c\u3001\n\nUsername: freebsd\nPassword: zfs\n\n\u3067\u30ed\u30b0\u30a4\u30f3\u5f8c\u306bstartx\u3059\u308b\u3068gnome3\u304c\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3059\u3002\n\nubuntu\u306e\u65b9\u306f\u524d\u56de\u306e\u6295\u7a3f\u3068\u540c\u69d8\u3067\u3059\u3002\u3068\u3044\u3046\u304b\u305d\u308c\u304c\u6750\u6599\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n\u4f5c\u308a\u65b9\n\n\u3059\u3067\u306bubuntu\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eVM\u3092\u7528\u610f\nFreeBSD-11-RELEASE\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092CD\u306b\u6307\u5b9a\u3057\u3066\u305d\u3053\u304b\u3089\u8d77\u52d5\nshell\u306b\u5165\u308b\nFreeBSD\u7528\u306e\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3092\u8ffd\u52a0\u3002\u3053\u3093\u306a\u611f\u3058\u3067\u3002\n\n# zpool import -f -N -R /mnt rpool\n# zfs create -o mountpoint=/ rpool/ROOT/freebsd\n# zfs mountpoint=/usr -o canmount=off rpool/usr\n# zfs create -o mountpoint=/usr/local -o canmount=off rpool/usr/local\n# zfs mountpoint=/var -o canmount=off rpool/var\n# zfs create -o mountpoint=/var/db -o canmount=off rpool/var/db\n# zfs mount rpool/ROOT/freebsd\n# zfs mount -a\n\n\nFreeBSD\u306etarball\u3092\u3076\u3061\u307e\u3051\u3002base\u3068kernel\u3060\u3051\u3067\u304ak\n\n# cd /usr/freebsd-dist/\n# tar zxvf base.tzx -C /mnt\n# tar zxvf kernel.tzx -C /mnt\n\n\nFreeBSD\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u30a4\u30e1\u30fc\u30b8\u3092\u5916\u3057\u3066ubuntu\u3067\u518d\u8d77\u52d5\ngrub\u306bFreeBSD\u306e\u30d6\u30fc\u30c8\u306e\u3057\u304b\u305f\u3092\u6559\u3048\u3066\u3042\u3052\u308b\u3002 /boot/grub/custom.cfg\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u901a\u308a\u4f5c\u6210\n\nmenuentry \"FreeBSD\" --class freebsd --class bsd --class os {\n        insmod zfs\n        search --no-floppy --set=root --label rpool --hint hd0,gpt1\n        echo 'Booting FreeBSD...'\n        kfreebsd /ROOT/freebsd@/boot/kernel/kernel\n        kfreebsd_module_elf /ROOT/freebsd@/boot/kernel/opensolaris.ko\n        kfreebsd_module_elf /ROOT/freebsd@/boot/kernel/zfs.ko\n        set kFreeBSD.vfs.root.mountfrom=zfs:rpool/ROOT/freebsd\n}GRUB_HIDDEN_TIMEOUT=0````\n\n\n\ngrub\u306e\u30e1\u30cb\u30e5\u30fc\u3092\u5fc5\u305a\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3002\n\n\n/etc/default/grub\u306eGRUB_HIDDEN_TIMEOUT=0\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u304b\u3089\nupdate-grub\n\n\n\u518d\u8d77\u52d5\u5f8c\u306b\u4e0a\u8a18\u306e\u753b\u9762\u304c\u51fa\u305f\u3089FreeBSD\u3092\u9078\u629e\n\u6211\u8f29\u306fFreeBSD\u3067\u3042\u308b\u3002root password\u306f\u307e\u3060\u306a\u3044;-)\n\u306e\u3067\u3042\u3068\u306f\u3042\u308c\u3053\u308c\u8a2d\u5b9a\u3002\u4eca\u56de\u306e.ova\u3067\u306ffreebsd\u3068\u3044\u3046\u521d\u671f\u30e6\u30fc\u30b6\u30fc\u3042\u308a\u3001root login\u4e0d\u80fd\u3068\u3044\u3046ubuntu\u7684\u8a2d\u5b9a\u306b\u3057\u3066\u3042\u308b\n\n\n\u6ce8\u610f\u70b9\n\n\nzpool upgrade\u306f\u3057\u3066\u306f\u3044\u3051\u307e\u305b\u3093\u3002ZFS on Linux\u306efeatures\u306e\u65b9\u304cFreeBSD\u3088\u308a\u3082\u53e4\u3044\u306e\u3067\n\u305d\u308c\u4ee5\u5916\u3067\u3042\u308c\u3070\u3001ubuntu\u3082FreeBSD\u3082\u666e\u901a\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u304b\u3051\u3089\u308c\u307e\u3059\u3002\nVMWare\u3067vmmouse\u3092\u4f7f\u3046\u306b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002(cf. http://qiita.com/dankogai/items/fd76333876b5f8a89e21)\n\n$ sudo -i\n# cd /etc/X11/etc/X11/xorg.conf.d\n# mv input.conf.vmmouse input.conf\n\n\nZFS on Linux\u306f\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u524d\u306bpool\u3092export\u3059\u308b\u3051\u3069\u3001FreeBSD\u306f\u3057\u306a\u3044\u3068\u3044\u3046\u91cd\u8981\u306a\u9055\u3044\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u305d\u306e\u307e\u307e\u3060\u3068FreeBSD\u306e\u5f8c\u306bubuntu\u8d77\u52d5\u3059\u308b\u3068\u3001initramfs\u3067\u6b62\u307e\u3063\u3061\u3083\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081 /usr/share/initramfs-tools/scripts/zfs \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d1\u30c3\u30c1\u3057\u3066\u3001root rool\u3092\u554f\u7b54\u7121\u7528\u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n--- zfs.orig    2016-04-13 19:43:25.000000000 +0900\n+++ zfs 2017-02-15 00:55:15.744039000 +0900\n@@ -54,7 +54,7 @@\n\n    # At this point, the pool either imported cleanly, or we ran out of the\n    # allowed time (rootdelay).  Perform the read-write import.\n-   ZFS_STDERR=$(zpool import -N \"$ZFS_RPOOL\" 2>&1)\n+   ZFS_STDERR=$(zpool import -f -N \"$ZFS_RPOOL\" 2>&1)\n    ZFS_ERROR=$?\n\n    if [ \"$ZFS_ERROR\" -ne 0 ]\n\n\u3082\u3046\u3061\u3087\u3044\u30a8\u30ec\u30ac\u30f3\u30c8\u306a\u3084\u308a\u65b9\u3001\u7de9\u52df\u3002\n\nBoot Environment\u3068\u3044\u3046\u767a\u60f3\n\u8981\u306f\u3053\u308c\u3001Boot Environment\u3068\u3044\u3046\u767a\u60f3\u3092\u305d\u306e\u307e\u307e\u30de\u30eb\u30c1OS\u30d6\u30fc\u30c8\u306b\u53cd\u6620\u3055\u305b\u305f\u3082\u306e\u306a\u3093\u3067\u3059\u306d\u3002\n\nhttps://docs.oracle.com/cd/E26924_01/html/E25778/index.html\nhttp://yskwkzhr.blogspot.jp/2013/03/use-boot-environments-on-freebsd.html\n\n\u96e3\u3057\u3044\u3053\u3068\u306f\u4f55\u3082\u306a\u304f\u3066\u3001OS\u3054\u3068\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304cOS\u3054\u3068\u306e\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u306a\u3063\u305f\u3060\u3051\u3002\u3057\u304b\u3057\u30d7\u30fc\u30eb\u306f\u5171\u6709\u3057\u3066\u3044\u308b\u306e\u3067\u3001/home\u306a\u3069\u306f\u3069\u306eOS\u304b\u3089\u3082\u898b\u3048\u307e\u3059\u3057\u3001\u4ed6\u306eOS\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u7a7a\u304d\u304c\u4f7f\u3044\u305f\u304f\u3066\u3082\u4f7f\u3048\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u307e\u305b\u3093\u3002\n\u307e\u3042beadm\u3068\u304b\u4f7f\u3063\u3066\u306a\u3044\u306e\u3067\u3001\u3042\u304f\u307e\u3067\u300c\u306a\u3093\u3061\u3083\u3063\u3066BE\u300d\u3067\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u3084\u3063\u3066\u308b\u3053\u3068\u306f\u540c\u3058\u3067\u3059\u3002\n\u4eee\u60f3\u30de\u30b7\u30f3\u3067\u3053\u308c\u3084\u3063\u3066\u3082\u81ea\u5df1\u6e80\u8db3\u4ee5\u4e0a\u306e\u3054\u5229\u76ca\u306f\u307b\u3068\u3093\u3069\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u3067USB\u30e1\u30e2\u30ea\u30fc\u3092\u4f5c\u3063\u3066\u304a\u304f\u3068\u3001\u4e07\u80fd\u306b\u8fd1\u3044 rescue drive \u306b\u306a\u308a\u307e\u3059\u3002UEFI\u5bfe\u5fdc\u306b\u3057\u3066\u304a\u304f\u3068\u3001Mac\u306b\u3059\u3089OK\u3067\u3057\u305f\u3002\n\u3068\u3044\u3046\u304b\u304a\u305d\u308b\u3079\u304d\u3053\u3068\u306b\u3001macOS boot on ZFS\u306f\u3059\u3067\u306b\u5b9f\u73fe\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3059\u3002\u3088\u3046\u306a\u306e\u3067\u3059\u3001\u3068\u66f8\u3044\u305f\u306e\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u624b\u5143\u3067\u306f\u518d\u73fe\u3067\u304d\u306a\u304b\u3063\u305f\u304b\u3089\u3002\n\nhttps://openzfsonosx.org/wiki/ZFS_on_Boot\n\n\u3068\u306f\u3044\u3063\u3066\u3082ubuntu\u3084FreeBSD\u3068\u7570\u306a\u308a\u3001\u30f4\u30a7\u30f3\u30c0\u30fc\u30b5\u30dd\u30fc\u30c8\u306f\u73fe\u72b6\u671f\u5f85\u3057\u3088\u3046\u304c\u3042\u308a\u307e\u305b\u3093\u304c\u3002Apple\u3001OpenZFS Project\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304f\u3093\u306a\u3044\u304b\u306a\u3042\u3002Microsoft\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304f\u308c\u305f\u308a\u3057\u3066:-)\u3002Windows 10 on ZFS\u3060\u3063\u3066\u3042\u308a\u3048\u306a\u304f\u306f\u306a\u3044\u306f\u305a\u2026\n\u52c7\u8005\u306f\u305c\u3072\u4e0a\u8a18\u306b macOS \u3068 illumos \u3082\u52a0\u3048\u305f\u30af\u30a2\u30c3\u30c9\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u3092\u3053\u3055\u3048\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nDan the Unofficial ZFS Evangelist\n\n\u8ffd\u8a18\nmacOS boot on ZFS \u3067\u304d\u3061\u3083\u3044\u307e\u3044\u3057\u305f\u3002VMWare Fusion\u4e0a\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001Terminal.app\u306e\u753b\u9762\u306b\u6ce8\u76ee\u3002O3X\u306eWiki\u3069\u304a\u308a\u3068\u306f\u3061\u3087\u3063\u3068\u884c\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3002\u3082\u3057\u304b\u3057\u305f\u3089\u5225\u8a18\u4e8b\u306b\u30ec\u30b7\u30d4\u66f8\u304f\u304b\u3082\u3002\n\n[\u524d\u3005\u56de\u306e\u6295\u7a3f]\u306b\u5f15\u304d\u7d9a\u304d[\u524d\u56de\u306e\u6295\u7a3f]\u3082\u8a55\u5224\u826f\u304b\u3063\u305f\u306e\u3067\u8abf\u5b50\u306b\u4e57\u3063\u3066\u3084\u308a\u307e\u3057\u305f\u3002\u5f8c\u6094\u306f\u3057\u3066\u3044\u306a\u3044\u304c\u516c\u958b\u306f\u3057\u3066\u308b\u3002\n\n[\u524d\u3005\u56de\u306e\u6295\u7a3f]: http://qiita.com/dankogai/items/ffc4f31a8a949bd7ec01\n[\u524d\u56de\u306e\u6295\u7a3f]: http://qiita.com/dankogai/items/3107a3f95fd805e6ccd7\n\n| Filename | [zfs-xenial-fbsd11r-20170215.ova] |\n|:--|--:|\n| Size | 4,050,796,544B (3.77GiB) |\n| md5  | `612eba98ccc4d33ab9b6a7f822d23f4e` |\n| sha1 | `41ade4c475ffd8a5a2d12ea180f165c15ed98e1b` | \n\n[zfs-xenial-fbsd11r-20170215.ova]: http://vps0.dan.co.jp/dist/zfs-xenial-fbsd11r-20170215.ova\n\n## \u306a\u3093\u305e\u3053\u308c?\n\n\u4e8b\u5b9f\u4e0a\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u4e00\u3064\u3057\u304b\u306a\u3044\u306e\u306b\u3001Ubuntu\u3060\u3051\u3067\u306f\u306a\u304fFreeBSD\u3082\u30d6\u30fc\u30c8\u3067\u304d\u307e\u3059\u3002Debian kFreeBSD\u3068\u304b\u3067\u306f\u306a\u304f\u6b63\u771f\u6b63\u9298The FreeBSD Project\u8b39\u88fd\u306eFreeBSD 11-RELEASE\u3067\u3059\u3002\n\n<img width=\"640\" alt=\"grub.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/19227/6b00e2ac-2e53-a5b3-a947-47525aea6754.png\">\n\nFreeBSD\u306e\u65b9\u306f\u8d77\u52d5\u6642\u306fCLI\u306e\u307f\u3067\u3059\u304c\u3001\n\n* Username: freebsd\n* Password: zfs\n\n\u3067\u30ed\u30b0\u30a4\u30f3\u5f8c\u306b`startx`\u3059\u308b\u3068gnome3\u304c\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3059\u3002\n\n<img width=\"512\" alt=\"freebsd-gnome3.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/19227/b98085c6-07e8-a029-8592-332ddc393de0.png\">\n\nubuntu\u306e\u65b9\u306f[\u524d\u56de\u306e\u6295\u7a3f]\u3068\u540c\u69d8\u3067\u3059\u3002\u3068\u3044\u3046\u304b\u305d\u308c\u304c\u6750\u6599\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n## \u4f5c\u308a\u65b9\n\n* \u3059\u3067\u306bubuntu\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eVM\u3092\u7528\u610f\n* FreeBSD-11-RELEASE\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092CD\u306b\u6307\u5b9a\u3057\u3066\u305d\u3053\u304b\u3089\u8d77\u52d5\n* shell\u306b\u5165\u308b\n* FreeBSD\u7528\u306e\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3092\u8ffd\u52a0\u3002\u3053\u3093\u306a\u611f\u3058\u3067\u3002\n\n````\n# zpool import -f -N -R /mnt rpool\n# zfs create -o mountpoint=/ rpool/ROOT/freebsd\n# zfs mountpoint=/usr -o canmount=off rpool/usr\n# zfs create -o mountpoint=/usr/local -o canmount=off rpool/usr/local\n# zfs mountpoint=/var -o canmount=off rpool/var\n# zfs create -o mountpoint=/var/db -o canmount=off rpool/var/db\n# zfs mount rpool/ROOT/freebsd\n# zfs mount -a\n````\n\n* FreeBSD\u306etarball\u3092\u3076\u3061\u307e\u3051\u3002base\u3068kernel\u3060\u3051\u3067\u304ak\n\n````\n# cd /usr/freebsd-dist/\n# tar zxvf base.tzx -C /mnt\n# tar zxvf kernel.tzx -C /mnt\n````\n\n* FreeBSD\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u30a4\u30e1\u30fc\u30b8\u3092\u5916\u3057\u3066ubuntu\u3067\u518d\u8d77\u52d5\n\n* grub\u306bFreeBSD\u306e\u30d6\u30fc\u30c8\u306e\u3057\u304b\u305f\u3092\u6559\u3048\u3066\u3042\u3052\u308b\u3002 `/boot/grub/custom.cfg`\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u901a\u308a\u4f5c\u6210\n\n````\nmenuentry \"FreeBSD\" --class freebsd --class bsd --class os {\n        insmod zfs\n        search --no-floppy --set=root --label rpool --hint hd0,gpt1\n        echo 'Booting FreeBSD...'\n        kfreebsd /ROOT/freebsd@/boot/kernel/kernel\n        kfreebsd_module_elf /ROOT/freebsd@/boot/kernel/opensolaris.ko\n        kfreebsd_module_elf /ROOT/freebsd@/boot/kernel/zfs.ko\n        set kFreeBSD.vfs.root.mountfrom=zfs:rpool/ROOT/freebsd\n}GRUB_HIDDEN_TIMEOUT=0````\n````\n\n* grub\u306e\u30e1\u30cb\u30e5\u30fc\u3092\u5fc5\u305a\u8868\u793a\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3002\n  * `/etc/default/grub`\u306e`GRUB_HIDDEN_TIMEOUT=0`\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u304b\u3089\n  * `update-grub`\n\n* \u518d\u8d77\u52d5\u5f8c\u306b\u4e0a\u8a18\u306e\u753b\u9762\u304c\u51fa\u305f\u3089FreeBSD\u3092\u9078\u629e\n* \u6211\u8f29\u306fFreeBSD\u3067\u3042\u308b\u3002root password\u306f\u307e\u3060\u306a\u3044;-)\n* \u306e\u3067\u3042\u3068\u306f\u3042\u308c\u3053\u308c\u8a2d\u5b9a\u3002\u4eca\u56de\u306e.ova\u3067\u306f`freebsd`\u3068\u3044\u3046\u521d\u671f\u30e6\u30fc\u30b6\u30fc\u3042\u308a\u3001root login\u4e0d\u80fd\u3068\u3044\u3046ubuntu\u7684\u8a2d\u5b9a\u306b\u3057\u3066\u3042\u308b\n\n## \u6ce8\u610f\u70b9\n\n* `zpool upgrade`\u306f**\u3057\u3066\u306f\u3044\u3051\u307e\u305b\u3093**\u3002ZFS on Linux\u306efeatures\u306e\u65b9\u304cFreeBSD\u3088\u308a\u3082\u53e4\u3044\u306e\u3067\n* \u305d\u308c\u4ee5\u5916\u3067\u3042\u308c\u3070\u3001ubuntu\u3082FreeBSD\u3082\u666e\u901a\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u304b\u3051\u3089\u308c\u307e\u3059\u3002\n* VMWare\u3067vmmouse\u3092\u4f7f\u3046\u306b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002(cf. http://qiita.com/dankogai/items/fd76333876b5f8a89e21)\n\n````\n$ sudo -i\n# cd /etc/X11/etc/X11/xorg.conf.d\n# mv input.conf.vmmouse input.conf\n````\n\n* ZFS on Linux\u306f\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u524d\u306bpool\u3092export\u3059\u308b\u3051\u3069\u3001FreeBSD\u306f\u3057\u306a\u3044\u3068\u3044\u3046\u91cd\u8981\u306a\u9055\u3044\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u305d\u306e\u307e\u307e\u3060\u3068FreeBSD\u306e\u5f8c\u306bubuntu\u8d77\u52d5\u3059\u308b\u3068\u3001initramfs\u3067\u6b62\u307e\u3063\u3061\u3083\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081 `/usr/share/initramfs-tools/scripts/zfs` \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d1\u30c3\u30c1\u3057\u3066\u3001root rool\u3092\u554f\u7b54\u7121\u7528\u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n````\n--- zfs.orig\t2016-04-13 19:43:25.000000000 +0900\n+++ zfs\t2017-02-15 00:55:15.744039000 +0900\n@@ -54,7 +54,7 @@\n \n \t# At this point, the pool either imported cleanly, or we ran out of the\n \t# allowed time (rootdelay).  Perform the read-write import.\n-\tZFS_STDERR=$(zpool import -N \"$ZFS_RPOOL\" 2>&1)\n+\tZFS_STDERR=$(zpool import -f -N \"$ZFS_RPOOL\" 2>&1)\n \tZFS_ERROR=$?\n \n \tif [ \"$ZFS_ERROR\" -ne 0 ]\n````\n\n\u3082\u3046\u3061\u3087\u3044\u30a8\u30ec\u30ac\u30f3\u30c8\u306a\u3084\u308a\u65b9\u3001\u7de9\u52df\u3002\n\n## Boot Environment\u3068\u3044\u3046\u767a\u60f3\n\n\u8981\u306f\u3053\u308c\u3001Boot Environment\u3068\u3044\u3046\u767a\u60f3\u3092\u305d\u306e\u307e\u307e\u30de\u30eb\u30c1OS\u30d6\u30fc\u30c8\u306b\u53cd\u6620\u3055\u305b\u305f\u3082\u306e\u306a\u3093\u3067\u3059\u306d\u3002\n\n* https://docs.oracle.com/cd/E26924_01/html/E25778/index.html\n* http://yskwkzhr.blogspot.jp/2013/03/use-boot-environments-on-freebsd.html\n\n\u96e3\u3057\u3044\u3053\u3068\u306f\u4f55\u3082\u306a\u304f\u3066\u3001OS\u3054\u3068\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304cOS\u3054\u3068\u306e\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u306a\u3063\u305f\u3060\u3051\u3002\u3057\u304b\u3057\u30d7\u30fc\u30eb\u306f\u5171\u6709\u3057\u3066\u3044\u308b\u306e\u3067\u3001`/home`\u306a\u3069\u306f\u3069\u306eOS\u304b\u3089\u3082\u898b\u3048\u307e\u3059\u3057\u3001\u4ed6\u306eOS\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u7a7a\u304d\u304c\u4f7f\u3044\u305f\u304f\u3066\u3082\u4f7f\u3048\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3082\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u307e\u3042`beadm`\u3068\u304b\u4f7f\u3063\u3066\u306a\u3044\u306e\u3067\u3001\u3042\u304f\u307e\u3067\u300c\u306a\u3093\u3061\u3083\u3063\u3066BE\u300d\u3067\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u3084\u3063\u3066\u308b\u3053\u3068\u306f\u540c\u3058\u3067\u3059\u3002\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u3067\u3053\u308c\u3084\u3063\u3066\u3082\u81ea\u5df1\u6e80\u8db3\u4ee5\u4e0a\u306e\u3054\u5229\u76ca\u306f\u307b\u3068\u3093\u3069\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u3067USB\u30e1\u30e2\u30ea\u30fc\u3092\u4f5c\u3063\u3066\u304a\u304f\u3068\u3001\u4e07\u80fd\u306b\u8fd1\u3044 rescue drive \u306b\u306a\u308a\u307e\u3059\u3002UEFI\u5bfe\u5fdc\u306b\u3057\u3066\u304a\u304f\u3068\u3001Mac\u306b\u3059\u3089OK\u3067\u3057\u305f\u3002\n\n\u3068\u3044\u3046\u304b\u304a\u305d\u308b\u3079\u304d\u3053\u3068\u306b\u3001macOS boot on ZFS\u306f\u3059\u3067\u306b\u5b9f\u73fe\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3059\u3002\u3088\u3046\u306a\u306e\u3067\u3059\u3001\u3068\u66f8\u3044\u305f\u306e\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u624b\u5143\u3067\u306f\u518d\u73fe\u3067\u304d\u306a\u304b\u3063\u305f\u304b\u3089\u3002\n\n* https://openzfsonosx.org/wiki/ZFS_on_Boot\n\n\u3068\u306f\u3044\u3063\u3066\u3082ubuntu\u3084FreeBSD\u3068\u7570\u306a\u308a\u3001\u30f4\u30a7\u30f3\u30c0\u30fc\u30b5\u30dd\u30fc\u30c8\u306f\u73fe\u72b6\u671f\u5f85\u3057\u3088\u3046\u304c\u3042\u308a\u307e\u305b\u3093\u304c\u3002Apple\u3001[OpenZFS Project]\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304f\u3093\u306a\u3044\u304b\u306a\u3042\u3002Microsoft\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u304f\u308c\u305f\u308a\u3057\u3066:-)\u3002Windows 10 on ZFS\u3060\u3063\u3066\u3042\u308a\u3048\u306a\u304f\u306f\u306a\u3044\u306f\u305a\u2026\n\n[OpenZFS Project]: http://open-zfs.org/wiki/Main_Page\n\n\u52c7\u8005\u306f\u305c\u3072\u4e0a\u8a18\u306b macOS \u3068 illumos \u3082\u52a0\u3048\u305f\u30af\u30a2\u30c3\u30c9\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u3092\u3053\u3055\u3048\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nDan the Unofficial ZFS Evangelist\n\n## \u8ffd\u8a18\n\nmacOS boot on ZFS \u3067\u304d\u3061\u3083\u3044\u307e\u3044\u3057\u305f\u3002VMWare Fusion\u4e0a\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001Terminal.app\u306e\u753b\u9762\u306b\u6ce8\u76ee\u3002O3X\u306eWiki\u3069\u304a\u308a\u3068\u306f\u3061\u3087\u3063\u3068\u884c\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3002\u3082\u3057\u304b\u3057\u305f\u3089\u5225\u8a18\u4e8b\u306b\u30ec\u30b7\u30d4\u66f8\u304f\u304b\u3082\u3002\n\n<img width=\"1136\" alt=\"Screen Shot 2017-02-18 at 15.42.39.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/19227/7ada3465-3c13-c092-875b-da23fd3ed7f5.png\">\n", "tags": ["ZFS", "Ubuntu", "FreeBSD"]}