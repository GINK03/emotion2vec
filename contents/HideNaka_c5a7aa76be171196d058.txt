{"context": " More than 1 year has passed since last update.\u3000\u30a2\u30c9\u30ec\u30b9\u5e33\u304b\u3089\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5f15\u3063\u5f35\u3063\u3066\u304d\u305f\u304b\u3063\u305f\u306e\u3067\u3001ABAddressBook\u3068ABAddressBookUI\u3092import\u3057\u3066\u3001\u30c7\u30ea\u30b2\u30fc\u30c8\u3092\u8a2d\u5b9a\u3057\u305f\u306e\u306b\u3046\u307e\u304f\u3044\u304b\u305a\u3001\u304b\u306a\u308a\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\niOS7.x.x\u307e\u3067\u306f\u3001\u4e0b\u8a18\u306e\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001\n\nViewController.swift\n// Person\u3092\u9078\u629e\u3057\u305f\u3068\u304d\u547c\u3070\u308c\u308b\uff08iOS8.0\u4ee5\u524d\uff09\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, shouldContinueAfterSelectingPerson person: ABRecord!) -> Bool {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c2\u4ef6\u4ee5\u4e0a\u3042\u308b\u5834\u5408\u3001\n    if ABMultiValueGetCount(multi) > 1 {\n        peoplePicker.displayedProperties = [NSNumber(int: kABPersonEmailProperty)]\n        println(\"Selected Person has multiple mail addresses.\")\n        return true\n    } else if ABMultiValueGetCount(multi) == 1 {\n        // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c1\u4ef6\u3060\u3051\u306e\u5834\u5408\u3001\n        let email = ABMultiValueCopyValueAtIndex(multi, 0).takeRetainedValue() as! String\n\n        _userDefaults.setValue(email, forKey: \"MailAddress\")\n        _userDefaults.synchronize()\n        println(\"(iOS7)Selected Email address is: \\(email)\")\n\n        _controller.popViewControllerAnimated(false)\n        self.dismissViewControllerAnimated(true, completion: nil)\n\n        return false\n    } else {\n        return false\n    }\n}\n\n// ABPeoplePickerNavigationController\u30671\u3064\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\uff08\u96fb\u8a71\u756a\u53f7\u3084\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u7b49\uff09\u3092\u9078\u629e\u3057\u305f\u3068\u304d\u3001\n// \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\uff08\u96fb\u8a71\u3092\u304b\u3051\u308b\u3001\u65b0\u898f\u30e1\u30fc\u30eb\u4f5c\u6210\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u7b49\uff09\u3092\u884c\u3046\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\u3002true\u3092\u8fd4\u3059\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u3002\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, shouldContinueAfterSelectingPerson person: ABRecord!, property: ABPropertyID, identifier: ABMultiValueIdentifier) -> Bool {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    let index: CFIndex = ABMultiValueGetIndexForIdentifier(multi, identifier)\n\n    let email = ABMultiValueCopyValueAtIndex(multi, index).takeRetainedValue() as! String\n\n    _userDefaults.setValue(email, forKey: \"MailAddress\")\n    _userDefaults.synchronize()\n    println(\"(iOS7.x)Selected Email address is: \\(email)\")\n\n    _controller.popViewControllerAnimated(false)\n    self.dismissViewControllerAnimated(true, completion: nil)\n\n    return false\n}\n\n\n\u3000iOS8.0\u4ee5\u964d\u3067\u306f\u540c\u30e1\u30bd\u30c3\u30c9\u306fdeprecated\u3068\u306a\u3063\u3066\u3044\u3066\u3001\u305d\u306e\u4ee3\u308f\u308a\u306b\u4e0b\u8a18\u306e\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nViewController.swift\n// \u9078\u629e\u3057\u305f\u3068\u304d\u547c\u3070\u308c\u308b\uff08iOS8.0\u4ee5\u4e0a\u306e\u3068\u304d\uff09\n// ABPeoplePickerNavigationController\u30671\u3064\u306e\u9023\u7d61\u5148\u3092\u9078\u629e\u3057\u305f\u3068\u304d\u3001\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, didSelectPerson person: ABRecord!) {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c2\u4ef6\u4ee5\u4e0a\u3042\u308b\u5834\u5408\u3001\n    if ABMultiValueGetCount(multi) > 1 {\n        peoplePicker.displayedProperties = [NSNumber(int: kABPersonEmailProperty)]\n        println(\"Selected Person has multiple mail addresses.\")\n        return\n    } else if ABMultiValueGetCount(multi) == 1 {\n        // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c1\u4ef6\u3060\u3051\u306e\u5834\u5408\u3001\n        let email = ABMultiValueCopyValueAtIndex(multi, 0).takeRetainedValue() as! String\n\n        _userDefaults.setValue(email, forKey: \"MailAddress\")\n        _userDefaults.synchronize()\n        println(\"(iOS8)Selected Email address is: \\(email)\")\n\n        _controller.popViewControllerAnimated(false)\n        self.dismissViewControllerAnimated(true, completion: nil)\n\n        return\n    }\n}\n\n// \u8a73\u7d30\u753b\u9762\u304b\u3089\u623b\u308b\u3068\u304d\u306b\u547c\u3070\u308c\u308b\uff08iOS8.0\u4ee5\u964d\u3067\u547c\u3070\u308c\u308b\uff09\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, didSelectPerson person: ABRecord!, property: ABPropertyID, identifier: ABMultiValueIdentifier) {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    let index: CFIndex = ABMultiValueGetIndexForIdentifier(multi, identifier)\n\n    let email = ABMultiValueCopyValueAtIndex(multi, index).takeRetainedValue() as! String\n\n    _userDefaults.setValue(email, forKey: \"MailAddress\")\n    _userDefaults.synchronize()\n    println(\"(iOS8.x)Selected Email address is: \\(email)\")\n\n    _controller.popToRootViewControllerAnimated(false)\n    self.dismissViewControllerAnimated(true, completion: nil)\n}\n\n\n\u3000\u3057\u304b\u3057\u3001\u30c7\u30ea\u30b2\u30fc\u30c8\u306e\u8a2d\u5b9a\u3057\u3066\u3001\u4e0a\u8a18\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u3066\u3082\u306a\u305c\u304b\u547c\u3070\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3000\u3044\u308d\u3044\u308d\u691c\u7d22\u3057\u3066\u8abf\u3079\u305f\u7d50\u679c\u3001\u4e0b\u8a18\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nGithub:mattneub/Programming-iOS-Book-Examples\n\n\nViewController.swift\nlet _controller = ABPeoplePickerNavigationController()\n// iOS8.0\u4ee5\u4e0a\u306e\u5bfe\u5fdc\nif _controller.respondsToSelector(Selector(\"predicateForEnablingPerson\")) {\n    // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u306a\u3044\u4eba\u306f\u8868\u793a\u3057\u306a\u3044\n    _controller.predicateForEnablingPerson = NSPredicate(format: \"emailAddresses.@count > 0\")\n    // true\uff1a\u9078\u629e\u3057\u305f\u4eba\u3092\u30a2\u30d7\u30ea\u306b\u8fd4\u3059\u3001false:\u9078\u629e\u3057\u305f\u4eba\u306e\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\uff08iOS8.0\u4ee5\u4e0a\u5bfe\u5fdc\uff09\n    _controller.predicateForSelectionOfPerson = NSPredicate(value: false)\n    // true\uff1a\u9078\u629e\u3057\u305f\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u30a2\u30d7\u30ea\u306b\u8fd4\u3059\u3001false:\u9078\u629e\u3057\u305f\u4eba\u306e\u8a73\u7d30\u30c7\u30fc\u30bf\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\uff08iOS8.0\u4ee5\u4e0a\u5bfe\u5fdc\uff09\n    _controller.predicateForSelectionOfProperty = NSPredicate(value: true)\n}\n\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3001\n_controller.predicate~\n\u3067\u6761\u4ef6\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u307e\u305b\u3093\u3002\nReference\u3092\u3061\u3083\u3093\u3068\u8aad\u3081\u3070\u5206\u304b\u308b\u3093\u3067\u3057\u3087\u3046\u3051\u3069\u3001\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\n\u3000\u30a2\u30c9\u30ec\u30b9\u5e33\u304b\u3089\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5f15\u3063\u5f35\u3063\u3066\u304d\u305f\u304b\u3063\u305f\u306e\u3067\u3001ABAddressBook\u3068ABAddressBookUI\u3092import\u3057\u3066\u3001\u30c7\u30ea\u30b2\u30fc\u30c8\u3092\u8a2d\u5b9a\u3057\u305f\u306e\u306b\u3046\u307e\u304f\u3044\u304b\u305a\u3001\u304b\u306a\u308a\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n iOS7.x.x\u307e\u3067\u306f\u3001\u4e0b\u8a18\u306e\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u3001\n\n```swift:ViewController.swift\n// Person\u3092\u9078\u629e\u3057\u305f\u3068\u304d\u547c\u3070\u308c\u308b\uff08iOS8.0\u4ee5\u524d\uff09\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, shouldContinueAfterSelectingPerson person: ABRecord!) -> Bool {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c2\u4ef6\u4ee5\u4e0a\u3042\u308b\u5834\u5408\u3001\n    if ABMultiValueGetCount(multi) > 1 {\n        peoplePicker.displayedProperties = [NSNumber(int: kABPersonEmailProperty)]\n        println(\"Selected Person has multiple mail addresses.\")\n        return true\n    } else if ABMultiValueGetCount(multi) == 1 {\n        // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c1\u4ef6\u3060\u3051\u306e\u5834\u5408\u3001\n        let email = ABMultiValueCopyValueAtIndex(multi, 0).takeRetainedValue() as! String\n            \n        _userDefaults.setValue(email, forKey: \"MailAddress\")\n        _userDefaults.synchronize()\n        println(\"(iOS7)Selected Email address is: \\(email)\")\n\n        _controller.popViewControllerAnimated(false)\n        self.dismissViewControllerAnimated(true, completion: nil)\n            \n        return false\n    } else {\n        return false\n    }\n}\n\n// ABPeoplePickerNavigationController\u30671\u3064\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\uff08\u96fb\u8a71\u756a\u53f7\u3084\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u7b49\uff09\u3092\u9078\u629e\u3057\u305f\u3068\u304d\u3001\n// \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\uff08\u96fb\u8a71\u3092\u304b\u3051\u308b\u3001\u65b0\u898f\u30e1\u30fc\u30eb\u4f5c\u6210\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u7b49\uff09\u3092\u884c\u3046\u304b\u3069\u3046\u304b\u3092\u8fd4\u3059\u3002true\u3092\u8fd4\u3059\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u52d5\u4f5c\u3002\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, shouldContinueAfterSelectingPerson person: ABRecord!, property: ABPropertyID, identifier: ABMultiValueIdentifier) -> Bool {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    let index: CFIndex = ABMultiValueGetIndexForIdentifier(multi, identifier)\n        \n    let email = ABMultiValueCopyValueAtIndex(multi, index).takeRetainedValue() as! String\n        \n    _userDefaults.setValue(email, forKey: \"MailAddress\")\n    _userDefaults.synchronize()\n    println(\"(iOS7.x)Selected Email address is: \\(email)\")\n        \n    _controller.popViewControllerAnimated(false)\n    self.dismissViewControllerAnimated(true, completion: nil)\n        \n    return false\n}\n```\n\n\u3000iOS8.0\u4ee5\u964d\u3067\u306f\u540c\u30e1\u30bd\u30c3\u30c9\u306fdeprecated\u3068\u306a\u3063\u3066\u3044\u3066\u3001\u305d\u306e\u4ee3\u308f\u308a\u306b\u4e0b\u8a18\u306e\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```swift:ViewController.swift\n// \u9078\u629e\u3057\u305f\u3068\u304d\u547c\u3070\u308c\u308b\uff08iOS8.0\u4ee5\u4e0a\u306e\u3068\u304d\uff09\n// ABPeoplePickerNavigationController\u30671\u3064\u306e\u9023\u7d61\u5148\u3092\u9078\u629e\u3057\u305f\u3068\u304d\u3001\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, didSelectPerson person: ABRecord!) {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c2\u4ef6\u4ee5\u4e0a\u3042\u308b\u5834\u5408\u3001\n    if ABMultiValueGetCount(multi) > 1 {\n        peoplePicker.displayedProperties = [NSNumber(int: kABPersonEmailProperty)]\n        println(\"Selected Person has multiple mail addresses.\")\n        return\n    } else if ABMultiValueGetCount(multi) == 1 {\n        // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c1\u4ef6\u3060\u3051\u306e\u5834\u5408\u3001\n        let email = ABMultiValueCopyValueAtIndex(multi, 0).takeRetainedValue() as! String\n            \n        _userDefaults.setValue(email, forKey: \"MailAddress\")\n        _userDefaults.synchronize()\n        println(\"(iOS8)Selected Email address is: \\(email)\")\n            \n        _controller.popViewControllerAnimated(false)\n        self.dismissViewControllerAnimated(true, completion: nil)\n            \n        return\n    }\n}\n\n// \u8a73\u7d30\u753b\u9762\u304b\u3089\u623b\u308b\u3068\u304d\u306b\u547c\u3070\u308c\u308b\uff08iOS8.0\u4ee5\u964d\u3067\u547c\u3070\u308c\u308b\uff09\nfunc peoplePickerNavigationController(peoplePicker: ABPeoplePickerNavigationController!, didSelectPerson person: ABRecord!, property: ABPropertyID, identifier: ABMultiValueIdentifier) {\n    let multi: ABMultiValueRef = ABRecordCopyValue(person, kABPersonEmailProperty).takeRetainedValue()\n    let index: CFIndex = ABMultiValueGetIndexForIdentifier(multi, identifier)\n        \n    let email = ABMultiValueCopyValueAtIndex(multi, index).takeRetainedValue() as! String\n        \n    _userDefaults.setValue(email, forKey: \"MailAddress\")\n    _userDefaults.synchronize()\n    println(\"(iOS8.x)Selected Email address is: \\(email)\")\n\n    _controller.popToRootViewControllerAnimated(false)\n    self.dismissViewControllerAnimated(true, completion: nil)\n}\n```\n\n\u3000\u3057\u304b\u3057\u3001\u30c7\u30ea\u30b2\u30fc\u30c8\u306e\u8a2d\u5b9a\u3057\u3066\u3001\u4e0a\u8a18\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u3066\u3082\u306a\u305c\u304b\u547c\u3070\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u3000\u3044\u308d\u3044\u308d\u691c\u7d22\u3057\u3066\u8abf\u3079\u305f\u7d50\u679c\u3001\u4e0b\u8a18\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n[Github:mattneub/Programming-iOS-Book-Examples\n](https://github.com/mattneub/Programming-iOS-Book-Examples/blob/master/bk2ch18p713addressBook/ch31p973addressBook/ViewController.swift)\n\n```swift:ViewController.swift\nlet _controller = ABPeoplePickerNavigationController()\n// iOS8.0\u4ee5\u4e0a\u306e\u5bfe\u5fdc\nif _controller.respondsToSelector(Selector(\"predicateForEnablingPerson\")) {\n    // \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c\u306a\u3044\u4eba\u306f\u8868\u793a\u3057\u306a\u3044\n    _controller.predicateForEnablingPerson = NSPredicate(format: \"emailAddresses.@count > 0\")\n    // true\uff1a\u9078\u629e\u3057\u305f\u4eba\u3092\u30a2\u30d7\u30ea\u306b\u8fd4\u3059\u3001false:\u9078\u629e\u3057\u305f\u4eba\u306e\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\uff08iOS8.0\u4ee5\u4e0a\u5bfe\u5fdc\uff09\n    _controller.predicateForSelectionOfPerson = NSPredicate(value: false)\n    // true\uff1a\u9078\u629e\u3057\u305f\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u30a2\u30d7\u30ea\u306b\u8fd4\u3059\u3001false:\u9078\u629e\u3057\u305f\u4eba\u306e\u8a73\u7d30\u30c7\u30fc\u30bf\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3059\u308b\uff08iOS8.0\u4ee5\u4e0a\u5bfe\u5fdc\uff09\n    _controller.predicateForSelectionOfProperty = NSPredicate(value: true)\n}\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3001\n_controller.predicate~\n\u3067\u6761\u4ef6\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u30c7\u30ea\u30b2\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u307e\u305b\u3093\u3002\n\nReference\u3092\u3061\u3083\u3093\u3068\u8aad\u3081\u3070\u5206\u304b\u308b\u3093\u3067\u3057\u3087\u3046\u3051\u3069\u3001\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\n", "tags": ["iOS", "Xcode", "Xcode6", "Swift", "iOS8"]}