{"context": "react\u3067\u3001\u30c7\u30e2\u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\ndjang rest api\u304b\u3089\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306ajson\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\njson\n{\n    \"company\": {\n        \"name\": \"\u4f1a\u793e\u540d\",\n        \"code\": 0,\n        \"type\": \"\"\n    },\n    \"risk_category\": 1,\n    \"rank\": \"D\",\n    \"title\": \"\u898b\u51fa\u3057\",\n    \"contents\": \"\u672c\u6587\",\n    \"date\": \"2016-08-31T04:04:05Z\"\n}\n\nclass RiskDetailBox extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      risk: {}\n    };\n  }\n\n  loadRiskFromServer(id) {\n    $.ajax({\n      url: \"http://127.0.0.1:8000/api/risks/\"+id,\n      dataType: 'json',\n      cache: false,\n      success: data => this.setState({risks: data}),\n      error: (xhr, status, err) => console.error(this.props.url, status, err.toString())\n    });\n  }\n\n  componentDidMount() {\n    this.loadRiskFromServer(this.props.params.id);\n  }\n\n  componentWillReceiveProps() {\n    this.loadRiskFromServer(this.props.params.id);\n  }\n\n  render() {\n    console.log(this.state.risk);\n    return (\n      <div className=\"wrapper subpageheader mdl-cell--12-col\">\n        <h1>Risk</h1>\n        <RiskDetailTable data={this.state.risk} />\n      </div>\n    );\n  }\n}\n\n\nclass RiskDetailTable extends Component {\n  render() {\n    // \u4e0b\u306ejs\u3067map\u3060\u3068\u3046\u307e\u304f\u3044\u3051\u308b\u306e\u304b\uff1f\u3063\u3068try\u3057\u3066\u307f\u307e\u3057\u305f\u304c\u5f53\u7136\u3060\u3081\u3067\u3057\u305f\u3002\n    let riskNodes = [this.props.data].map(risk => {\n      return (\n        <RiskBody company={risk.company.name} title={risk.title} date={risk.announcement_date} />\n      );\n    });\n    return (\n      <table className=\"mdl-data-table mdl-js-data-table mdl-shadow--2dp\">\n        <tbody>{riskNodes}</tbody>\n      </table>\n    );\n  }\n}\n\n\nclass RiskBody extends Component {\n\n  render() {\n    return (\n      <tbody>\n        <tr>\n          <th class=\"mdl-data-table\">\u4f01\u696d\u540d</th>\n          <td>{this.props.company}</td>\n        </tr>\n        <tr>\n          <th class=\"mdl-data-table\">\u696d\u7a2e</th>\n          <td></td>\n        </tr>\n        <tr>\n          <th class=\"mdl-data-table\">\u8a18\u4e8b\u63b2\u8f09\u65e5\u6642</th>\n          <td class=\"mdl-data-table\">{this.props.date}</td>\n        </tr>\n        <tr>\n          <th class=\"mdl-data-table\">\u8a18\u4e8b</th>\n          <td class=\"mdl-data-table\">{this.props.title}</td>\n        </tr>\n      </tbody>\n    )\n  }\n}\n\nexport default RiskDetailBox;\n\n\ncompany.name\u3092\u51fa\u529b\u3057\u305f\u3044\u306e\u3067\u3059\u304c\u3001\ncompany\u914d\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\nDetailPage.js:86 Uncaught TypeError: Cannot read property 'name' of undefined\n\u3068\u306a\u308a\u3001\u51fa\u529b\u3067\u304d\u307e\u305b\u3093\u3002\n\u4e0a\u8a18\u306ejson\u3092\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u3001\u53d7\u3051\u53d6\u308a\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u3067\u4e00\u89a7\u8868\u793a\u3055\u305b\u305f\u5834\u5408\u306b\u306f\u3001company.name\u306b\u554f\u984c\u306a\u304f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3057\u305f\u3002\nimport React, {Component} from 'react';\nimport './App.css';\nimport $ from 'jquery';\nimport { Link } from 'react-router';\n\nconst styles = {\n  propContainer: {\n    width: 200,\n    overflow: 'hidden',\n    margin: '20px auto 0',\n  },\n  propToggleHeader: {\n    margin: '20px auto 10px',\n  },\n};\n\nclass RiskListTable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      risks: []\n    };\n  }\n\n  loadRisksFromServer() {\n    $.ajax({\n      url: \"http://127.0.0.1:8000/api/risks/\",\n      dataType: 'json',\n      cache: false,\n      success: data => this.setState({risks: data}),\n      error: (xhr, status, err) => console.error(this.props.url, status, err.toString())\n    });\n  }\n\n  componentDidMount() {\n    this.loadRisksFromServer();\n  }\n\n  render() {\n    return (\n      <div className=\"wrapper subpageheader mdl-cell--12-col\">\n        <h1>Risks</h1>\n        <Link to=\"/detail/100\">detail</Link>\n        <RiskList data={this.state.risks} />\n      </div>\n\n    );\n  }\n}\n\nclass RiskList extends Component {\n  render() {\n    console.log(this.props.data[0]);\n    let riskNodes = this.props.data.map(risk => {\n      return (\n        <Risk company={risk.company.name} key={risk.id} title={risk.title} date={risk.announcement_date} />\n      );\n    });\n    return (\n      <table className=\"mdl-data-table mdl-js-data-table mdl-shadow--2dp\">\n        <thead>\n        <tr>\n          <th className=\"mdl-data-table\">\u4f01\u696d\u540d</th>\n          <th className=\"mdl-data-table\">\u8a18\u4e8b\u63b2\u8f09\u65e5\u6642</th>\n          <th className=\"mdl-data-table\">\u898b\u51fa\u3057</th>\n        </tr>\n        </thead>\n        <tbody>{riskNodes}</tbody>\n      </table>\n    );\n  }\n}\nclass Risk extends Component {\n\n  render() {\n    return (\n      <tr>\n        <td class=\"mdl-data-table\">{this.props.company}</td>\n        <td class=\"mdl-data-table\">{this.props.date}</td>\n        <td class=\"mdl-data-table\">{this.props.title.substring(0,70)}</td>\n      </tr>\n    )\n  }\n}\n\nexport default RiskListTable;\n\n\n\u3054\u5b58\u77e5\u306e\u65b9\u3001\u30a2\u30c9\u30d0\u30a4\u30b9\u3084\u3054\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059><\nreact\u3067\u3001\u30c7\u30e2\u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\ndjang rest api\u304b\u3089\u3001\b\u4e0b\u8a18\u306e\u3088\u3046\u306ajson\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\n```json\n{\n    \"company\": {\n        \"name\": \"\u4f1a\u793e\u540d\",\n        \"code\": 0,\n        \"type\": \"\"\n    },\n    \"risk_category\": 1,\n    \"rank\": \"D\",\n    \"title\": \"\u898b\u51fa\u3057\",\n    \"contents\": \"\u672c\u6587\",\n    \"date\": \"2016-08-31T04:04:05Z\"\n}\n```\n\n```javaScript\nclass RiskDetailBox extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      risk: {}\n    };\n  }\n\n  loadRiskFromServer(id) {\n    $.ajax({\n      url: \"http://127.0.0.1:8000/api/risks/\"+id,\n      dataType: 'json',\n      cache: false,\n      success: data => this.setState({risks: data}),\n      error: (xhr, status, err) => console.error(this.props.url, status, err.toString())\n    });\n  }\n\n  componentDidMount() {\n    this.loadRiskFromServer(this.props.params.id);\n  }\n\n  componentWillReceiveProps() {\n    this.loadRiskFromServer(this.props.params.id);\n  }\n\n  render() {\n    console.log(this.state.risk);\n    return (\n      <div className=\"wrapper subpageheader mdl-cell--12-col\">\n        <h1>Risk</h1>\n        <RiskDetailTable data={this.state.risk} />\n      </div>\n    );\n  }\n}\n\n\nclass RiskDetailTable extends Component {\n  render() {\n    // \u4e0b\u306ejs\u3067map\u3060\u3068\u3046\u307e\u304f\u3044\u3051\u308b\u306e\u304b\uff1f\u3063\u3068try\u3057\u3066\u307f\u307e\u3057\u305f\u304c\u5f53\u7136\u3060\u3081\u3067\u3057\u305f\u3002\n    let riskNodes = [this.props.data].map(risk => {\n      return (\n        <RiskBody company={risk.company.name} title={risk.title} date={risk.announcement_date} />\n      );\n    });\n    return (\n      <table className=\"mdl-data-table mdl-js-data-table mdl-shadow--2dp\">\n        <tbody>{riskNodes}</tbody>\n      </table>\n    );\n  }\n}\n\n\nclass RiskBody extends Component {\n\n  render() {\n    return (\n      <tbody>\n        <tr>\n          <th class=\"mdl-data-table\">\u4f01\u696d\u540d</th>\n          <td>{this.props.company}</td>\n        </tr>\n        <tr>\n          <th class=\"mdl-data-table\">\u696d\u7a2e</th>\n          <td></td>\n        </tr>\n        <tr>\n          <th class=\"mdl-data-table\">\u8a18\u4e8b\u63b2\u8f09\u65e5\u6642</th>\n          <td class=\"mdl-data-table\">{this.props.date}</td>\n        </tr>\n        <tr>\n          <th class=\"mdl-data-table\">\u8a18\u4e8b</th>\n          <td class=\"mdl-data-table\">{this.props.title}</td>\n        </tr>\n      </tbody>\n    )\n  }\n}\n\nexport default RiskDetailBox;\n\n```\n\ncompany.name\u3092\u51fa\u529b\u3057\u305f\u3044\u306e\u3067\u3059\u304c\u3001\ncompany\u914d\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\n`DetailPage.js:86 Uncaught TypeError: Cannot read property 'name' of undefined`\n\u3068\u306a\u308a\u3001\u51fa\u529b\u3067\u304d\u307e\u305b\u3093\u3002\n\n\n\u4e0a\u8a18\u306ejson\u3092\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u3001\u53d7\u3051\u53d6\u308a\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u3067\u4e00\u89a7\u8868\u793a\u3055\u305b\u305f\u5834\u5408\u306b\u306f\u3001company.name\u306b\u554f\u984c\u306a\u304f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3057\u305f\u3002\n\n```javaScript\nimport React, {Component} from 'react';\nimport './App.css';\nimport $ from 'jquery';\nimport { Link } from 'react-router';\n\nconst styles = {\n  propContainer: {\n    width: 200,\n    overflow: 'hidden',\n    margin: '20px auto 0',\n  },\n  propToggleHeader: {\n    margin: '20px auto 10px',\n  },\n};\n\nclass RiskListTable extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      risks: []\n    };\n  }\n\n  loadRisksFromServer() {\n    $.ajax({\n      url: \"http://127.0.0.1:8000/api/risks/\",\n      dataType: 'json',\n      cache: false,\n      success: data => this.setState({risks: data}),\n      error: (xhr, status, err) => console.error(this.props.url, status, err.toString())\n    });\n  }\n\n  componentDidMount() {\n    this.loadRisksFromServer();\n  }\n\n  render() {\n    return (\n      <div className=\"wrapper subpageheader mdl-cell--12-col\">\n        <h1>Risks</h1>\n        <Link to=\"/detail/100\">detail</Link>\n        <RiskList data={this.state.risks} />\n      </div>\n\n    );\n  }\n}\n\nclass RiskList extends Component {\n  render() {\n    console.log(this.props.data[0]);\n    let riskNodes = this.props.data.map(risk => {\n      return (\n        <Risk company={risk.company.name} key={risk.id} title={risk.title} date={risk.announcement_date} />\n      );\n    });\n    return (\n      <table className=\"mdl-data-table mdl-js-data-table mdl-shadow--2dp\">\n        <thead>\n        <tr>\n          <th className=\"mdl-data-table\">\u4f01\u696d\u540d</th>\n          <th className=\"mdl-data-table\">\u8a18\u4e8b\u63b2\u8f09\u65e5\u6642</th>\n          <th className=\"mdl-data-table\">\u898b\u51fa\u3057</th>\n        </tr>\n        </thead>\n        <tbody>{riskNodes}</tbody>\n      </table>\n    );\n  }\n}\nclass Risk extends Component {\n\n  render() {\n    return (\n      <tr>\n        <td class=\"mdl-data-table\">{this.props.company}</td>\n        <td class=\"mdl-data-table\">{this.props.date}</td>\n        <td class=\"mdl-data-table\">{this.props.title.substring(0,70)}</td>\n      </tr>\n    )\n  }\n}\n\nexport default RiskListTable;\n\n```\n\n\u3054\u5b58\u77e5\u306e\u65b9\u3001\u30a2\u30c9\u30d0\u30a4\u30b9\u3084\u3054\u6307\u6458\u304a\u9858\u3044\u3057\u307e\u3059><\n", "tags": ["react.js", "JavaScript", "ECMAScript6"]}