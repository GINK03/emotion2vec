{"context": "QtConcurrent::run\u306f\u5f15\u6570\u306b\u4e0e\u3048\u305f\u95a2\u6570\u3092\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u4fbf\u5229\u306a\u95a2\u6570\u3067\u3059\u304c\u3001\u540c\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b9\u30ec\u30c3\u30c9\u6570\u306b\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u906d\u9047\u3057\u305f\u554f\u984c\n\u7d44\u307f\u8fbc\u307f\u30de\u30b7\u30f3\u4e0a\u3067\u975e\u5e38\u306b\u6642\u9593\u306e\u304b\u304b\u308b\u51e6\u7406\u3092QtConcurrent::run()\u3067\u5b9f\u884c\u3057\u305f\u3068\u3053\u308d\u3001\u305d\u306e\u5f8c\u3067QtConcurrent::run()\u3067\u547c\u3073\u51fa\u3055\u308c\u305f\u51e6\u7406\u304c\u307e\u3063\u305f\u304f\u5b9f\u884c\u3055\u308c\u306a\u3044\u3068\u3044\u3046\u554f\u984c\u306b\u906d\u9047\u3057\u307e\u3057\u305f\u3002\n\nQtConcurrent::run()\u304c\u3084\u3063\u3066\u3044\u308b\u3053\u3068\nQtConcurrent::run\u306f\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u304b\u3089\u672a\u4f7f\u7528\u30b9\u30ec\u30c3\u30c9\u3092\u53d6\u308a\u51fa\u3057\u4e0e\u3048\u3089\u308c\u305f\u95a2\u6570\u306b\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\n\u660e\u793a\u7684\u306b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306fQThreadPool::globalInstance()\u3067\u53d6\u5f97\u3055\u308c\u308b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n\u3053\u306eQThreadPool\u3067\u3059\u304c\u3001\u540c\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b9\u30ec\u30c3\u30c9\u306e\u6570\u304c\u3042\u3089\u304b\u3058\u3081\u6c7a\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u306e\u6570\u306fOS\u3084\u30de\u30b7\u30f3\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u304c\u3001Linux\u3067\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306fCPU\u306e\u65701\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\nQt\u4e0a\u3067\u306f\u305d\u306e\u6570\u306fQThreadPool::maxThreadCount()\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\nQThreadPool::globalInstance()->maxThreadCount();\n\n\n\u554f\u984c\u306e\u539f\u56e0\u3068\u6539\u5584\n\u4e0a\u8a18\u4f8b\u306e\u74b0\u5883\u3067\u306fQThreadPool::globalInstance()\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u304c1\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u305d\u306e\u305f\u3081\u6642\u9593\u304c\u304b\u304b\u308b\u51e6\u7406\u3092QtConcurrent::run()\u3067\u5b9f\u884c\u3059\u308b\u3068\u305d\u306e\u51e6\u7406\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u3001\u4ed6\u306eQtConcurrent::run()\u306b\u3088\u308b\u51e6\u7406\u304c\u52d5\u4f5c\u3057\u306a\u3044\u3068\u3044\u3046\u4e8b\u614b\u3068\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u3053\u306e\u554f\u984c\u3092\u56de\u907f\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n\nQThreadPool\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u5897\u3084\u3059\n\u5225\u306eQThreadPool\u3092\u4f7f\u7528\u3059\u308b\n\n\nQThreadPool\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u5897\u3084\u3059\nQThreadPool::setMaxThreadCount()\u3067QThreadPool\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u5897\u3084\u3059\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u4f8b)\nQThreadPool::globalInstnace()->setMaxThreadCount(2);\n\n\n\u5225\u306eQThreadPool\u3092\u4f7f\u7528\u3059\u308b\n\nstatic QThreadPool thread_pool;\n\n//...\n\nQtConcurrent::run(&thread_pool, []{ /* \u6642\u9593\u306e\u304b\u304b\u308b\u51e6\u7406 */ });\n\n\n\n\n\n\u6b63\u78ba\u306b\u306fsysconf(_SC_NPROC_ONLN)(\u53c2\u7167)\u306b\u3088\u308a\u53d6\u5f97\u3055\u308c\u308b\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u6570\u00a0\u21a9\n\n\n\n\n[`QtConcurrent::run`](http://doc.qt.io/qt-5/qtconcurrentrun.html)\u306f\u5f15\u6570\u306b\u4e0e\u3048\u305f\u95a2\u6570\u3092\u5225\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u4fbf\u5229\u306a\u95a2\u6570\u3067\u3059\u304c\u3001\u540c\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b9\u30ec\u30c3\u30c9\u6570\u306b\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n# \u906d\u9047\u3057\u305f\u554f\u984c\n\n\u7d44\u307f\u8fbc\u307f\u30de\u30b7\u30f3\u4e0a\u3067\u975e\u5e38\u306b\u6642\u9593\u306e\u304b\u304b\u308b\u51e6\u7406\u3092`QtConcurrent::run()`\u3067\u5b9f\u884c\u3057\u305f\u3068\u3053\u308d\u3001\u305d\u306e\u5f8c\u3067`QtConcurrent::run()`\u3067\u547c\u3073\u51fa\u3055\u308c\u305f\u51e6\u7406\u304c\u307e\u3063\u305f\u304f\u5b9f\u884c\u3055\u308c\u306a\u3044\u3068\u3044\u3046\u554f\u984c\u306b\u906d\u9047\u3057\u307e\u3057\u305f\u3002\n\n\n# `QtConcurrent::run()`\u304c\u3084\u3063\u3066\u3044\u308b\u3053\u3068\n\n`QtConcurrent::run`\u306f\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u304b\u3089\u672a\u4f7f\u7528\u30b9\u30ec\u30c3\u30c9\u3092\u53d6\u308a\u51fa\u3057\u4e0e\u3048\u3089\u308c\u305f\u95a2\u6570\u306b\u5272\u308a\u5f53\u3066\u307e\u3059\u3002\n\u660e\u793a\u7684\u306b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f`QThreadPool::globalInstance()`\u3067\u53d6\u5f97\u3055\u308c\u308b\u30b9\u30ec\u30c3\u30c9\u30d7\u30fc\u30eb\u304c\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u306e`QThreadPool`\u3067\u3059\u304c\u3001\u540c\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u30b9\u30ec\u30c3\u30c9\u306e\u6570\u304c\u3042\u3089\u304b\u3058\u3081\u6c7a\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u306e\u6570\u306fOS\u3084\u30de\u30b7\u30f3\u306b\u3088\u3063\u3066\u7570\u306a\u308a\u307e\u3059\u304c\u3001Linux\u3067\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u306fCPU\u306e\u6570[^1]\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nQt\u4e0a\u3067\u306f\u305d\u306e\u6570\u306f`QThreadPool::maxThreadCount()`\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```cpp\nQThreadPool::globalInstance()->maxThreadCount();\n```\n\n[^1]: \u6b63\u78ba\u306b\u306f`sysconf(_SC_NPROC_ONLN)`([\u53c2\u7167](http://www.gnu.org/software/libc/manual/html_node/Processor-Resources.html))\u306b\u3088\u308a\u53d6\u5f97\u3055\u308c\u308b\u30d7\u30ed\u30bb\u30c3\u30b5\u306e\u6570\n\n# \u554f\u984c\u306e\u539f\u56e0\u3068\u6539\u5584\n\n\u4e0a\u8a18\u4f8b\u306e\u74b0\u5883\u3067\u306f`QThreadPool::globalInstance()`\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u304c1\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u305d\u306e\u305f\u3081\u6642\u9593\u304c\u304b\u304b\u308b\u51e6\u7406\u3092`QtConcurrent::run()`\u3067\u5b9f\u884c\u3059\u308b\u3068\u305d\u306e\u51e6\u7406\u304c\u7d42\u4e86\u3059\u308b\u307e\u3067\u3001\u4ed6\u306e`QtConcurrent::run()`\u306b\u3088\u308b\u51e6\u7406\u304c\u52d5\u4f5c\u3057\u306a\u3044\u3068\u3044\u3046\u4e8b\u614b\u3068\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u554f\u984c\u3092\u56de\u907f\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n1. `QThreadPool`\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u5897\u3084\u3059\n2. \u5225\u306e`QThreadPool`\u3092\u4f7f\u7528\u3059\u308b\n\n## `QThreadPool`\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u5897\u3084\u3059\n\n`QThreadPool::setMaxThreadCount()`\u3067`QThreadPool`\u306e\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u5897\u3084\u3059\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u4f8b)\n\n```cpp\nQThreadPool::globalInstnace()->setMaxThreadCount(2);\n```\n\n## \u5225\u306e`QThreadPool`\u3092\u4f7f\u7528\u3059\u308b\n\n\n```cpp\n\nstatic QThreadPool thread_pool;\n\n//...\n\nQtConcurrent::run(&thread_pool, []{ /* \u6642\u9593\u306e\u304b\u304b\u308b\u51e6\u7406 */ });\n```\n", "tags": ["Qt"]}