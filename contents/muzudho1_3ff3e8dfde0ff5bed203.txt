{"tags": ["Bash", "Ubuntu", "\u3055\u304f\u3089VPS", "Linux", "cron"], "context": "\u524d\u56de\u306e\u8a18\u4e8b : http://qiita.com/muzudho1/items/bf3f6debf6db7f96300c#_reference-bfc60da48dec57f06190\n\nbash \u3067\u7121\u9650\u30eb\u30fc\u30d7\u306f\u3069\u3046\u66f8\u304f\u306e\u304b\n\u8a66\u3057\u306b\u76f4\u63a5\u53e9\u3044\u3066\u307f\u308b\u3002\n./loop8.sh\n-su: ./loop8.sh: Permission denied\n\n\u3053\u308c\u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3058\u3083\u306a\u3044\u306e\u304b\u3002\u3042\u308b\u3044\u306f\u5b9f\u884c\u6a29\u9650\u304c\u3044\u308b\u306e\u304b\u3002\nls -an\n\uff5e\u4e2d\u7565\uff5e\n-rw-r--r-- 1 0 0  104 Mar  7 20:52 loop8.sh\nchmod 755 loop8.sh\nls -an\n\uff5e\u4e2d\u7565\uff5e\n-rwxr-xr-x 1 0 0  104 Mar  7 20:52 loop8.sh\n\n./loop8.sh\n\n\u3053\u308c\u3067\u30d6\u30ed\u30c3\u30af\u3055\u308c\u305f\u3002\n[Ctrl]+[Z]\n^Z\n[1]+  Stopped                 ./loop8.sh\njobs\n[1]+  Stopped                 ./loop8.sh\n\n\u76f4\u63a5\u5b9f\u884c\u3059\u308b\u3068\u3001jobs \u306b\u3044\u308b\u3088\u3046\u3060\u3002php \u306f\u76f4\u63a5\u5b9f\u884c\u3058\u3083\u306a\u3044\u304b\u3089\u30c0\u30e1\u306a\u306e\u304b\uff1f\nnohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n[2] 22501\njobs\n[1]+  Stopped                 ./loop8.sh\n[2]-  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n\n\u4eca\u5ea6\u306f\u5f8c\u308d\u3067\u8d70\u3063\u3066\u3044\u308b\u3088\u3046\u3060\u3002\u3055\u3063\u304d\u306f\u8d70\u3063\u3066\u306a\u304b\u3063\u305f\u6c17\u304c\u3059\u308b\u304c\u3002\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u306b\u5207\u308a\u66ff\u3048\u3088\u3046\nsu \u2605user\njobs\nps\n  PID TTY          TIME CMD\n21573 pts/1    00:00:00 bash\n21955 pts/1    00:00:00 php\n22536 pts/1    00:00:00 bash\n22546 pts/1    00:00:00 ps\n\n\u30b8\u30e7\u30d6\u306f\u7a7a\u3063\u307d\u3060\u304c\u3001\u30d7\u30ed\u30bb\u30b9\u306b\u306f bash \u304c\uff12\u3064\u3042\u308b\u3002 php \u3082\u3042\u308b\u304c\u2026\u2026\u3002\n$exit\nexit\n# jobs\n[1]+  Stopped                 ./loop8.sh\n[2]-  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n\nexit \u3068\u6253\u3064\u3068 exit \u3068\u8fd4\u3063\u3066\u304f\u308b\u306e\u304b\u3002\u307e\u304e\u3089\u308f\u3057\u3044\u306a\u3002\n\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u306b\u623b\u3063\u3066\u304f\u308b\u3068\u3001job \u304c\u898b\u3048\u305f\u3002\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u898b\u3048\u308b job \u304c\u7570\u306a\u308b\u306e\u304b\u3002\nbg 1\n[1]+ ./loop8.sh &\njobs\n[1]-  Running                 ./loop8.sh &\n[2]+  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n\nbg 1 \u30b3\u30de\u30f3\u30c9\u3067\u3000\u6b62\u307e\u3063\u3066\u3044\u308b\u30b8\u30e7\u30d6\u3092\u3000\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d70\u3089\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3082\u5206\u304b\u308b\u3002\n# exit\nlogout\n$ su \u2605user\nPassword:\n$ jobs\n$ exit\nexit\n$ jobs\n[1]+  Running                 nohup /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n\n\u3042\u308c\uff1f \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d70\u3063\u3066\u3044\u3063\u305f\u65b9\u306f\u6d88\u3048\u305f\u3002 nohup \u5fd8\u308c\u304b\u3002\nbg \u30b3\u30de\u30f3\u30c9\u3067 nohup \u306a\u3093\u304b\u3067\u304d\u308b\u306e\u304b\uff1f\u3000\u308f\u304b\u3089\u306a\u3044\u3002\nkill %1\n\n\u5225\u306e\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3092\u5909\u3048\u3066\u3001\u5143\u306e\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u306b\u623b\u3063\u3066\u304d\u305f\u3068\u304d\u306b job \u304c\u307e\u3060\u6b8b\u3063\u3066\u3044\u308b\u306e\u306f\u5206\u304b\u3063\u305f\u3002\n\u3058\u3083\u3042\u3001\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u3092\u629c\u3051\u3066\u3001\u3082\u3046\u4e00\u5ea6\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u3067\u5165\u3063\u305f\u3068\u304d\u306f\u3069\u3046\u304b\uff1f\n$ su \u2605user\nPassword:\n$ sudo su -\n[sudo] password for \u2605user:\nnohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n[1] 22897\njobs\n[1]+  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\nps\n  PID TTY          TIME CMD\n22468 pts/1    00:00:00 loop8.sh\n22501 pts/1    00:00:00 loop8.sh\n22849 pts/1    00:00:00 su\n22866 pts/1    00:00:00 sudo\n22867 pts/1    00:00:00 su\n22868 pts/1    00:00:00 bash\n22897 pts/1    00:00:00 loop8.sh\n22898 pts/1    00:00:00 sleep\n22899 pts/1    00:00:00 sleep\n22902 pts/1    00:00:00 sleep\n22909 pts/1    00:00:00 ps\n# exit\nlogout\n$ sudo su -\n# jobs\n# ^C \u203b\u6253\u3061\u9593\u9055\u3044\n# ps\n  PID TTY          TIME CMD\n22468 pts/1    00:00:00 loop8.sh\n22501 pts/1    00:00:00 loop8.sh\n22849 pts/1    00:00:00 su\n22897 pts/1    00:00:00 loop8.sh\n22914 pts/1    00:00:00 sleep\n22915 pts/1    00:00:00 sleep\n22918 pts/1    00:00:00 sleep\n22921 pts/1    00:00:00 sudo\n22922 pts/1    00:00:00 su\n22923 pts/1    00:00:00 bash\n22942 pts/1    00:00:00 ps\n\n\u7a7a\u3063\u307d\u3002\u3046\u30fc\u3080\u3002\n\nexit\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u306e\u3067\u306f\uff1f\nexit \u3059\u308b\u3068\u3000\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u7d42\u4e86\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u304b\uff1f\nexit \u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u306f\u9055\u3046\u306e\u304b\uff1f\n\u300clogout\u3068exit\u306e\u9055\u3044\u300d (\u3057\u3087\u307c\u3093\u30e1\u30e2\u30ea \uff08\u00b4\u30fb\u03c9\u30fb\uff40\uff09)\nhttp://shobon.hatenablog.com/entry/2014/06/27/212224\n\u6b21\u304b\u3089 logout \u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3002exit \u306f\u4f7f\u308f\u306a\u3044\u65b9\u5411\u3067\u3002\n\nexit\u3092\u4f7f\u308f\u305a\u3001logout \u3067\u3084\u308a\u76f4\u3057\u3066\u307f\u308b\n\u307e\u305a exit \u3092\u53e9\u304d\u307e\u304f\u3063\u3066\u3000\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u629c\u3051\u308b\u3002\n\u6b21\u306b\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u5165\u308a\u76f4\u3059\u3002\n$ jobs\n$ ps\n  PID TTY          TIME CMD\n23342 pts/2    00:00:00 bash\n23355 pts/2    00:00:00 ps\n\n\u6b21\u306b\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u306b\u306a\u308b\u3002\n$ sudo su -\n\u203b\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\n# nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n[1] 23422\n# jobs\n[1]+  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n\n\u3053\u3053\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3002\n# logout\n$ sudo su -\n# jobs\n\n\u304b\u3089\u3063\u307d\u3060\u3002\u30e6\u30fc\u30b6\u30fc\u3092\u30c1\u30a7\u30f3\u30b8\u3059\u308b\u3053\u3068\u306f\u3088\u304f\u3042\u308b\u306e\u3067\u3001exit \u3067\u3082 logout \u3067\u3082\u30b7\u30a7\u30eb\u304c\u6b62\u307e\u3063\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u306f\u3000\u30b5\u30fc\u30d0\u30fc\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u8a2d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\n\u3058\u3083\u3042\u3001\u30a2\u30d1\u30c3\u30c1\u306f\u3069\u3046\u3084\u3063\u3066\u5e38\u99d0\u3057\u3066\u3044\u308b\u306e\u304b\uff1f\n\u300cLAMP\u69cb\u6210\u304c\u57fa\u672c\u3089\u3057\u3044\u300d (\u25cb\u00d7\uff08\u307e\u308b\u307a\u3051\uff09\u3064\u304f\u308d\u30fc\u3069\u3063\u3068\u30b3\u30e0)\nhttp://marupeke296.com/IKDADV_SVR_LAMP.html\n\n\u30ea\u30e2\u30fc\u30c8\u304b\u3089\u30bb\u30c3\u30b7\u30e7\u30f3\u304d\u3063\u305f\u3089\u3000\u306a\u3093\u3067\u30b8\u30e7\u30d6\u304c\u6d88\u3048\u308b\u306e\u304b\uff1f\n\u300cLinux\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3084\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u5207\u65ad\u3057\u3066\u3082\u30b3\u30de\u30f3\u30c9\u3092\u7d9a\u884c\u3055\u305b\u308b\u65b9\u6cd5\u300d (\u5c0f\u7c8b\u7a7a\u9593)\nhttp://www.koikikukan.com/archives/2015/11/20-011111.php\n\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u52d5\u3044\u3066\u3044\u308b\u30b8\u30e7\u30d6\u304c\u3042\u3063\u3066\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5207\u308b\u3068\u6d88\u3048\u308b\u3002\nlogout\n\nsudo su -\n\n\u306e\u3069\u3061\u3089\u304b\u306b\u554f\u984c\u304c\u3042\u308b\u306e\u3060\u308d\u3046\u304b\u3002\nsu \u2605user \u3067\u3082\u3046\uff11\u56de\u5165\u3063\u3066 logout\u3002\n$ logout\nbash: logout: not login shell: use `exit'\n\n\u3046\u30fc\u3080\u3002\nsu \u2605user \u3067\u5165\u3063\u305f\u3089\u3001\u30b7\u30a7\u30eb\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u3067\u306f\u306a\u3044\u304b\u3089 exit \u3067\u629c\u3051\u308b\uff1f\uff1f\nexit \u3067\u540c\u3058\u30e6\u30fc\u30b6\u30fc\u306b\u623b\u3063\u3066\u304d\u3066\u3082\u3001jobs \u306f\u6b8b\u3063\u3066\u3044\u308b\u3002\n\n\u300csu \u30e6\u30fc\u30b6\u30fc\u540d\u300d\u306f\u3001\u4f55\u3092\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\uff1f\n\u300c\u3010 \u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3059 \u3011\u300d (ITpro)\nhttp://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231081/\nsu \u306e\u5f8c\u308d\u306b \u2010 \u304c\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\nPuTTY \u3092\u9589\u3058\u308b\u306b\u306f\uff1f\n[Alt]+[F4]\u30ad\u30fc\u3067\u3082\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5207\u308b\u3088\u3046\u3060\u304c\u3002\n\u63a5\u7d9a\u3059\u308b\u3068\u3001jobs \u306f\u7a7a\u3063\u307d\u306b\u306a\u3063\u3066\u3044\u308b\u3002\njob \u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u30fb\u30b9\u30b3\u30fc\u30d7\u306a\u3093\u3060\u308d\u3046\u304b\uff1f\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30b9\u30b3\u30fc\u30d7\u306f\u7121\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\n\nnohup \u306f\u4f7f\u308f\u306a\u304f\u3066\u3082\u3044\u3044\uff1f\n\u300cLinux\u306e\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066 \"nohup (\u30d7\u30ed\u30b0\u30e9\u30e0\u300d (YAHOO!JAPAN\u77e5\u6075\u888b)\nhttp://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q11164890521\n\u3058\u3083\u3042\n# /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n[1] 24330\n# jobs\n[1]+  Running                 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n$ sudo su -\n# jobs\n\n\u7a7a\u3063\u307d\u3002\n\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u3068\u3001\u306a\u3093\u3067\u3000\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306e\u30b8\u30e7\u30d6\u304c\u6d88\u3048\u308b\u3093\u3060\uff1f\n\u30e6\u30fc\u30b6\u30fc\u3092\u5207\u308a\u66ff\u3048\u305f\u6642\u70b9\u3067\u6d88\u3048\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\nPuTTY\n\u300cRunning a Process in the Background with Putty Closed\u300d (http://linux.ittoolbox.com)\nhttp://linux.ittoolbox.com/groups/technical-functional/linuxadmin-l/running-a-process-in-the-background-with-putty-closed-5205477\n\n\u3055\u304f\u3089VPS\nLinux\nUbuntu\nBash\nPuTTY\n\n\u3053\u308c\u4ee5\u5916\u306b\u539f\u56e0\u304c\u3042\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u5b9f\u884c\u3057\u305f\u3082\u306e\u306f\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u305f\u3089\u7d42\u4e86\u3059\u308b\n\u77e5\u3063\u3066\u308b\u4eba\u306b\u805e\u3044\u3066\u307f\u305f\u3002\u305d\u3046\u306a\u306e\u304b\u3002\n\u3058\u3083\u3042\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3082\u4f5c\u3063\u3066\u3000\u7f6e\u3044\u3066\u304a\u3044\u3066\u3001cron \u306b\u81ea\u52d5\u5b9f\u884c\u3055\u305b\u3066\u307f\u3088\u3046\u3002\n\uff11\u56de\u8e74\u3063\u3066\u3082\u3089\u3046\u3060\u3051\u3067\u3044\u3044\u3093\u3060\u304c\u3001cron \u306a\u3089\u3000\u30b3\u30b1\u3066\u3044\u3066\u3082\u53e9\u304d\u8d77\u3053\u3057\u3066\u304f\u308c\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3002\n\nUbuntu \u3067 cron \u3092\u4f7f\u3046\u306b\u306f\uff1f\n\u300cHow do I set up a Cron job?\u300d (ask ubuntu)\nhttp://askubuntu.com/questions/2368/how-do-i-set-up-a-cron-job\n/etc/ \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\n\n/etc/cron.daily\n/etc/cron.hourly\n/etc/cron.monthly\n/etc/cron.weekly\n\n\u306e\uff14\u3064\u304c\u3042\u308b\u3089\u3057\u3044\u3002\u8abf\u3079\u3066\u307f\u308b\u3068\u5168\u90e8\u3042\u308b\u3002\u4ed6\u306b\u3082\n\n/etc/cron.d\n/etc/crontab\n\n\u304c\u3042\u308b\u3002\u305b\u3063\u304b\u304f\u306a\u306e\u3067 nano \u3067\u4e2d\u8eab\u3092\u898b\u3066\u307f\u308b\u3002\ncrontab \u4ee5\u5916\u306f\u7a7a\u3063\u307d\u3060\u3063\u305f\u3002\ncrontab\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user  command\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.d$\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.w$\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.m$\n#\n\n\u3058\u3083\u3042\u3001\u4f7f\u3044\u65b9\u306f\u3069\u3046\u3059\u308b\u306e\u304b\uff1f\n\u300ccrontab\u306e\u66f8\u304d\u65b9\u300d \uff08server-memo.net\uff09\nhttp://www.server-memo.net/tips/crontab.html\n\u8868\u793a\ncrontab -l\nno crontab for root\n\n\u306a\u3093\u306e\u3053\u3063\u3061\u3083\u3002\ncrontab -e\nno crontab for root - using an empty one\n\nSelect an editor.  To change later, run 'select-editor'.\n  1. /bin/ed\n  2. /bin/nano        <---- easiest\n  3. /usr/bin/vim.tiny\n\n\u30a8\u30c7\u30a3\u30bf\u30fc\u3092\u9078\u3079\u3068\u3044\u3046\u3053\u3068\u304b\u3002 nano \u304c\u4e00\u756a\u7c21\u5358\u3001\u3068\u30b3\u30e1\u30f3\u30c8\u3082\u4ed8\u3044\u3066\u308b\u306a\u3002\n# Edit this file to introduce tasks to be run by cron.\n#\n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n#\n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').#\n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n#\n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n#\n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n#\n# For more information see the manual pages of crontab(5) and cron(8)\n#\n# m h  dom mon dow   command\n\n\u4f55\u304b\u30d5\u30a1\u30a4\u30eb\u304c\u958b\u304b\u308c\u305f\u3002\n10\u5206\u6bce\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u66f8\u304d\u65b9\n*/10  *  *  *  *  \u3053\u3053\u306b\u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304f\n\n\u307f\u305f\u3044\u306a\u3093\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u8d77\u52d5\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u8d77\u52d5\u3059\u308b\u3001\u3068\u3044\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u7d44\u307f\u305f\u3044\u304c\u2026\u2026\u3002\n\npgrep\n\u307e\u305a ps \u3067\u30d7\u30ed\u30bb\u30b9\u3092\u4e00\u89a7\u3057\u3066\u307f\u308b\u3002\nps\n  PID TTY          TIME CMD\n24330 pts/2    00:00:00 php\n24349 pts/2    00:00:00 sudo\n24350 pts/2    00:00:00 su\n24351 pts/2    00:00:00 bash\n25814 pts/2    00:00:00 ps\n\n\u6b21\u306b pgrep \u3067\u3001\u30b3\u30de\u30f3\u30c9\u540d\u3092\u4e00\u81f4\u691c\u7d22\u3059\u308b\u3002\npgrep -l su\n12129 su\n24349 sudo\n24350 su\n\n\u3053\u308c\u3060\u3068 PHP \u3092\u8d77\u52d5\u3059\u308b\u3068 php \u306b\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\nbash \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3057\u3066\u3082 bash \u306b\u306a\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3002\n\u30d7\u30ed\u30b0\u30e9\u30e0\u540d\u3092\u8abf\u3079\u3089\u308c\u306a\u3044\u3082\u306e\u304b\u3002\n\u3060\u3063\u305f\u3089 jobs \u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\uff1f \u30b3\u30de\u30f3\u30c9\u540d\u3060\u3051\u53d6\u308c\u308c\u3070\u3044\u3044\u304b\u3068\u601d\u3063\u305f\u304c\u3001\u305d\u3046\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u306a\u3044\u3088\u3046\u3060\u3002\njobs -r\n[1]+  Running                 nohup /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n\n\u3053\u3053\u3067\u982d30\u6587\u5b57\u3092\u524a\u308a\u53d6\u308c\u3070\u3001\u6b8b\u308a\u306f\u30b3\u30de\u30f3\u30c9\u540d\u306b\u306a\u308b\u3093\u3058\u3083\u306a\u3044\u304b\uff1f\n\u300ccut \u6587\u5b57\u5217\u3092\u5207\u308a\u51fa\u3059\u300d\u3000\uff08UNIX\u5165\u9580\uff09\nhttp://www.k4.dion.ne.jp/~mms/unix/linux_com/cut.html\n# jobs -r | cut -c31-\nnohup /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n\n\u3088\u3057\u3002\n\u3053\u306e\u6587\u5b57\u5217\u306b\u4e00\u81f4\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u3053\u3068\u306b\u3059\u308b\u3002\n\u305d\u308c\u3092\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u66f8\u304f\u306a\u3089\u2026\u2026\u3002\n\u5c11\u3057\u305a\u3064\u66f8\u3044\u3066\u3044\u3053\u3046\u3002PHP\u3068\u4f3c\u3066\u3044\u3066\u5168\u7136\u9055\u3046\u304b\u3089\u9593\u9055\u3048\u3084\u3059\u3044\u3002\n# nano tamesi9.sh\n\ntamesi9.sh\n#!/bin/bash\nCMD = $(jobs -r | cut -c31-)\necho \"(^q^)${CMD}\"\n\n# ls -an\n\u7565\n-rw-r--r-- 1 0 0   61 Mar  8 00:19 tamesi9.sh\n# chmod 755 tamesi9.sh\n# ls -an\n\u7565\n-rwxr-xr-x 1 0 0   61 Mar  8 00:19 tamesi9.sh\n# ./tamesi9.sh\n./tamesi9.sh: line 2: CMD: command not found\n(^q^)\n\n\u3046\u30fc\u3080\u3002\n\u300c\u30b7\u30a7\u30eb\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u57fa\u790e\u77e5\u8b58\u300d\u3000\uff08Shinta's WEBSITE\uff09\nhttp://www.gadgety.net/shin/tips/unix/shell.html\n\u30a4\u30b3\u30fc\u30eb\u306e\u4e21\u7aef\u306b\u3000\u30b9\u30da\u30fc\u30b9\u3092\u5165\u308c\u3066\u306f\u3044\u3051\u306a\u3044\u307f\u305f\u3044\u3060\u3002\ntamesi9.sh\n#!/bin/bash\nCMD=$(jobs -r | cut -c31-)\necho \"(^q^)${CMD}\"\n\n./tamesi9.sh\n(^q^)\n\n\u30a8\u30e9\u30fc\u306f\u7121\u304b\u3063\u305f\u304c\u3001\u671f\u5f85\u3057\u305f\u7d50\u679c\u3082\u7121\u304b\u3063\u305f\u3002\ntamesi9b1.sh\n#!/bin/bash\necho $(jobs -r | cut -c31-)\n\n\u884c\u3082\u51fa\u3066\u3053\u306a\u304f\u306a\u3063\u305f\u3002\ntamesi9b2.sh\n#!/bin/bash\njobs -r | cut -c31- | echo\n\n\u3053\u308c\u3082\u3001\u884c\u304c\u51fa\u3066\u3053\u306a\u3044\u3002\ntamesi9b3.sh\n#!/bin/bash\njobs | echo\n\n\u3053\u308c\u3082\u3001\u884c\u304c\u51fa\u3066\u3053\u306a\u3044\u3002\u3053\u3093\u306a\u66f8\u304d\u65b9\u7121\u3044\u306e\u304b\u3002\n\u300cbash \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5165\u9580 -\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3044\u308d\u306f-\u300d \uff08UNIX & Linux \u30b3\u30de\u30f3\u30c9\u30fb\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u300d\uff09\nhttp://shellscript.sunone.me/tutorial.html\n\u300c\u30b7\u30a7\u30eb\u306e\u5909\u6570\u306b\u6163\u308c\u308b\u300d \uff08@IT\uff09\nhttp://www.atmarkit.co.jp/ait/articles/0010/19/news003.html\n\u300cLinux\uff1a\u51fa\u529b\u7d50\u679c\u3084\u30c6\u30ad\u30b9\u30c8\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\u65b9\u6cd5\u300d \uff08raining\uff09\nhttp://raining.bear-life.com/linux/%E5%87%BA%E5%8A%9B%E7%B5%90%E6%9E%9C%E3%82%84%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99%E6%96%B9%E6%B3%95\ntamesi9b4.sh\n#!/bin/bash\nls | cut -c2- > tmp1.txt\n\n# nano tmp1.txt\noop8.sh\namesi9b1.sh\namesi9b2.sh\namesi9b3.sh\namesi9b4.sh\namesi9.sh\nmp1.txt\n\n\u3053\u306e\u66f8\u304d\u65b9\u3067\u3044\u3051\u308b\u306e\u304b\u3002\ntamesi9b5.sh\n#!/bin/bash\njobs -r | cut -c31- > tmp1.txt\n\n# chmod 755 tamesi9b5.sh\n# ./tamesi9b5.sh\n# nano tmp1.txt\n\n\u3060\u3081\u3002\ntamesi9b5.sh\n#!/bin/bash\njobs -r > tmp1.txt\ncut -c31- tmp1.txt > tmp1.txt\n\n\u3060\u3081\u3002\ntamesi9b5.sh\n#!/bin/bash\njobs -r > tmp1.txt\n# cut -c31- tmp1.txt > tmp1.txt\n\n\u3060\u3081\u3002\njobs -r \u306f\u51fa\u529b\u3067\u304d\u306a\u3044\u306e\u304b\uff1f\n\njobs -r\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u306f jobs -r \u304c\u52b9\u304f\u304c\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u306b\u66f8\u304f\u3068 \u4f55\u3082\u51fa\u529b\u3057\u306a\u3044\u3088\u3046\u3060\u3002\n\u4f55\u304c\u9055\u3046\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u3002\njobs > tmp1.txt \u3067\u3082\u30c0\u30e1\u3067\u3001 echo \"abc\" > tmp1.txt \u306a\u3089\u30aa\u30c3\u30b1\u30fc\u306e\u3088\u3046\u3060\u3002\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u3067\u306f jobs \u306f\u4f7f\u3048\u306a\u3044\u306e\u304b\u3002\n\n\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u306f\u51fa\u529b\u3067\u304d\u308b\u304b\n\u5148\u306b PHP \u306e\u65b9\u3067\u3001\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3057\u3088\u3046\u3002\n# nano loop10.php\n\n<?php\n// \u74b0\u5883\u8a2d\u5b9a\ndate_default_timezone_set('Asia/Tokyo');\n\n// \u8a2d\u5b9a\n$file = 'date.txt';\n\n// \u73fe\u5728\u6642\u523b\u3092\u30d5\u30a1\u30a4\u30eb\u3078\u66f8\u51fa\u3057\n$today = date(\"Y-m-d H:i:s\");\nfile_put_contents( $file, $today );\n\n# chmod 747 loop10.php\n# php loop10.php\n# nano date.txt\n2017-03-08 01:30:20\n\n\u65e5\u4ed8\u306f\u51fa\u529b\u3067\u304d\u305f\u3002\u3057\u304b\u3057\u30d0\u30c3\u30b7\u30e5\u3067\u3053\u306e\u65e5\u4ed8\u3092\u8aad\u8fbc\u3093\u3060\u308a\u3001\u65e5\u4ed8\u8a08\u7b97\u3057\u305f\u308a\u3067\u304d\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089 PHP \u3092\u8d77\u52d5\u3067\u304d\u308b\u304b\uff1f\nbash_receive\u3001php_receive \u3068\u3044\u3063\u305f\u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u3092\u3001\nbash_service\u3001php_service \u3068\u3044\u3063\u305f\u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u306b\u5909\u66f4\u3059\u308b\u3002\n# mv bash_receive bash_service\n# mv php_receive php_service\n\n# nano kicker_dequeueBroker.sh\n\nkicker_dequeueBroker.sh\n#!/bin/bash\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php > /home/\u2605user/shogi/php_log/dequeueBroker.out.log 2> /home/\u2605user/shogi/php_log/dequeueBroker.err.log < /dev/null &\n\n\u3053\u308c\u306f\u304a\u3044\u3068\u3044\u3066\u3001\u6b21\u306f PHP \u306e\u65b9\u3002\n# cp loop6.php dequeueBroker.php\n\n\u3053\u308c\u3067\u3088\u3057\u3002\u6b21\u3001cron \u306e\u8a2d\u5b9a\u3002\ncrontab -e\n\n55  *  *  *  *  /home/\u2605user/shogi/bash_service/kicker_dequeueBroker.sh\n\n\u3042\u308c\uff1f \u76f4\u63a5 PHP \u8e74\u3063\u305f\u3089\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u306e\u304b\uff1f \u3059\u308b\u3068\u30b3\u30de\u30f3\u30c9\u304c\u9577\u304f\u306a\u308b\u306e\u304b\u3002\u3058\u3083\u3042\u3053\u308c\u3067\u3044\u3044\u304b\u3002\n\u3053\u308c\u3067 \u6bce\u56de\u300155\u5206 \u306b\u5b9f\u884c\u3055\u308c\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\u300ccrontab\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u5f8c\u306e\u53cd\u6620\u300d \uff08U\u5b57\u8def\uff09\nhttp://blog.livedoor.jp/u_26/archives/1819139.html\n\n\u3057\u304f\u307f\n\u3053\u308c\u3067\u4eee\u306b\u52d5\u304f\u306a\u3089\u3001http://\u2605.\u2605.\u2605.\u2605/tamesi5.php \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\u306b\u6587\u5b57\u304c\u683c\u7d0d\u3055\u308c\u3066\u3001dequeueBroker.php \u304c\u305d\u308c\u3092\u53d6\u5f97\u3057\u3001dequeueBroker.out.log \u306b\u66f8\u304d\u51fa\u3059\u3001\u3068\u3044\u3063\u305f\u6d41\u308c\u306b\u306a\u308b\u306f\u305a\u3002\n\u305d\u3057\u3066\u3000\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3082\u52d5\u3044\u3066\u3044\u308b\u3068\u3044\u3046\u524d\u63d0\u3060\u3002\ncron \u304c\u52d5\u304b\u3057\u305f job \u3092\u898b\u308b\u65b9\u6cd5\u306f\u3042\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9\u3092\u3001\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3057\u3066\u304a\u304f\u3002\nloop6.sh\n#!/bin/bash\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n\n# chmod 755 loop6.sh\n\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u6642\u523b\u306f\u78ba\u8a8d\u3067\u304d\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\u300cLinux\u306eUbuntu\u3067\u65e5\u4ed8\u3084\u6642\u523b\u3092\u8868\u793a\u30fb\u8a2d\u5b9a\u3059\u308b\u30b3\u30de\u30f3\u30c9\u300d \uff08MiuxMiu\uff09\nhttp://www.miuxmiu.com/archives/2011/03/19/linux_ubuntu_date_time_view_settings_command.html\ndate\nWed Mar  8 02:07:39 JST 2017\n\n\u4eca\u30012017-03-08 \u306e 2\u66427\u5206\u3060\u304b\u3089\u3001\n\u30b5\u30fc\u30d0\u30fc\u6642\u523b\u306f 2017\u5e74\u306eMar\u67088\u65e5\u306e 2\u66427\u520639\u79d2\u3000\u306a\u3089\u5408\u3063\u3066\u308b\u304b\u3002\ncron \u5b9f\u884c\u3055\u308c\u306a\u304b\u3063\u305f\u306a\u3002\n\ncron \u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u3092\u3069\u3046\u3084\u3063\u3066\u78ba\u8a8d\u3059\u308b\u306e\u304b\uff1f\n\u300ccron\u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\u300d \uff08MAKIEDAN MEMO BLOG\uff09\nhttp://makiedan.hatenablog.com/entry/20140404/1396600750\n# /etc/rc.d/init.d/crond status\n-su: /etc/rc.d/init.d/crond: No such file or directory\n\nrc.d \u306f\u7121\u304f\u3066 rc0.d \uff5e rc6.d \u306a\u3089\u3042\u308b\u3093\u3060\u304c\u3001\u56f0\u3063\u305f\u3082\u3093\u3060\u3002\n\u300ccrontab\u306e\u4f7f\u3044\u65b9\u300d \uff08Saba note\uff09\nhttp://saba.omnioo.com/note/1233/crontab%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9/\ncron -l \u3060\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u3066\u304d\u3066\u3057\u307e\u3046\u3002\n# /etc/init.d/cron staus\n * Usage: /etc/init.d/cron {start|stop|status|restart|reload|force-reload}\n\n\u52d5\u3044\u3066\u306a\u3044\u306e\u304b\u306a\u3001\u3053\u308c\u3002\n\ncron \u3092\u8d77\u52d5\u3055\u305b\u308b\n# /etc/init.d/cron start\n[ ok ] Starting cron (via systemctl): cron.service.\n\n\u4eca\u52d5\u3044\u305f\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u3082\u3063\u3068\u7c21\u5358\u306b\n\n\u30b5\u30fc\u30d0\u30fc\u6642\u523b\u3092\u3001\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080\u30b3\u30de\u30f3\u30c9\u306f\uff1f\ndate > tmp3\n\ntmp3\nWed Mar  8 02:38:39 JST 2017\n\n\n\u30b5\u30fc\u30d0\u30fc\u6642\u523b\u3092\u3001\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\uff1f\ntamesi12.sh\n#!/bin/bash\ndate > tmp12\n\nWed Mar  8 02:52:13 JST 2017\n\n\u3053\u308c\u306f\u30aa\u30c3\u30b1\u30fc\u3060\u3002\n\n\u3058\u3083\u3042\u3001\u3053\u308c\u3092 1 \u5206\u6bce\u306b\u53e9\u304f cron \u30b8\u30e7\u30d6\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3060\u308d\u3046\u304b\uff1f\ncrontab -e\n\n# Edit this file to introduce tasks to be run by cron.\n#\n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n#\n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').#\n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n#\n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n#\n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n#\n# For more information see the manual pages of crontab(5) and cron(8)\n#\n# m h  dom mon dow   command\n0-59/1 * * * * /home/\u2605usr/shogi/php_service/tamesi12.sh\n\n\u3053\u308c\u3067\u3069\u3046\u304b\uff1f\ncrontab: installing new crontab\n\n\u306a\u3093\u304b\u521d\u3081\u3066\u898b\u308b\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u305f\u3002\u3055\u3063\u304d /etc/init.d/cron \u3092 start \u3055\u305b\u305f\u3053\u3068\u3068\u95a2\u4fc2\u3042\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\ncron \u306b\u306f\u3069\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u4e0e\u3048\u308c\u3070\u3044\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\n\u5b9f\u884c\u3059\u308b\u30d5\u30a1\u30a4\u30eb\n-rwxr-xr-x 1 0 0   26 Mar  8 02:51 tamesi12.sh\n\n\u66f8\u304d\u51fa\u3057\u5148\u30d5\u30a1\u30a4\u30eb\n# chmod 666 tmp12\n\n\u305c\u3093\u305c\u3093\u3000\u66f4\u65b0\u6642\u523b\u304c\u3000\u66f4\u65b0\u3055\u308c\u308b\u69d8\u5b50\u304c\u306a\u3044\u3002\n\ncron \u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3088\u3046\n# cron status\ncron: can't lock /var/run/crond.pid, otherpid may be 507: Resource temporarily unavailable\n\n\u300ccron deamon not working\u300d \uff08phusion/baseimage-docker\uff09\nhttps://github.com/phusion/baseimage-docker/issues/115\n# cat /etc/crontab\n\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user  command\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )\n#\n\n\nubuntu \u306e cron \u306f\u3001\u4ed6\u306e cron \u3068\u9055\u3046\u3093\u3058\u3083\u306a\u3044\u304b\uff1f\n\u300ccrontab\u304c\u4e0a\u624b\u304f\u52d5\u304b\u306a\u3044\u6642\u306e\u30d2\u30f3\u30c8\u300d \uff08\u30af\u30ea\u30a8\u30a4\u30bf\u30fc\u898b\u7fd2\u3044\u306e\u843d\u66f8\u304d\u30ce\u30fc\u30c8\uff09\nhttp://creatornote.blog87.fc2.com/blog-entry-24.html\n# less /var/log/syslog | grep CRON\n\uff5e\u7565\uff5e\nMar  8 03:26:01 \u2605\u7565 CRON[30356]: (root) CMD (/home/\u2605user/shogi/php_service/tamesi12.                                                sh)\n\n\u3046\u3093\uff1f cron \u306f\u52d5\u3044\u3066\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3001root\u30e6\u30fc\u30b6\u30fc\u3067\uff1f\n\u3067\u3082\u3000\u30d5\u30a1\u30a4\u30eb\u66f8\u304d\u8fbc\u307f\u306f\u3067\u304d\u3066\u306a\u3044\u3002\ncron \u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u53e9\u3044\u3066\u3044\u3066\u3001\u305d\u308c\u3067 \u30a8\u30e9\u30fc\u3068\u304b\u30ed\u30b0\u306f\u7121\u3044\u306e\u304b\uff1f\n\u300ccron\u304c\u6a5f\u80fd\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u300d \uff08Ubuntu\u65e5\u672c\u8a9e\u30d5\u30a9\u30fc\u30e9\u30e0\uff09\nhttps://forums.ubuntulinux.jp/viewtopic.php?id=6926\n\ncron\u3067 \u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u52d5\u304b\u3059\u3068\u304d\u306e\u66f8\u304d\u65b9\u306f\u3001\u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304f\u3068\u3053\u308d\u306e \u982d\u306bbash \u3092\u4ed8\u3051\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n0-59/2 * * * * /home/\u2605user/shogi/php_service/tamesi12.sh\n\n\u3053\u308c\u3067\uff12\u5206\u304a\u304d\u306b\u518d\u5ea6\u30c1\u30e3\u30ec\u30f3\u30b8\u3002\n\u5909\u5316\u306a\u3057\u3002\n\u8a18\u4e8b\u306b\u3042\u308b\u300ccron\u306e\u30e6\u30fc\u30b6\u30fc\u306froot\u300d\u3068\u3044\u3046\u8868\u73fe\u306f\u3000\u4f55\u3092\u6307\u3057\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\nman cron\nman cron\n\n\u3067\u8aac\u660e\u66f8\u304d\u304c\u51fa\u3066\u304d\u305f\u3002\n\n/etc/init.d\n/etc/init.d\n\u304b\u3069\u3053\u304b\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n# ls -an\ntotal 28\ndrwxr-xr-x   2 0 0  4096 Mar  8 03:25 .\ndrwxr-xr-x 102 0 0 12288 Mar  8 03:54 ..\n-rw-r--r--   1 0 0   670 Mar  2  2016 php\n-rw-r--r--   1 0 0   102 Feb  9  2013 .placeholder\n-rw-r--r--   1 0 0   190 Mar  4 21:13 popularity-contest\n\n\u3068\u304f\u306b\u4f55\u306b\u3082\u306a\u3044\u3002\n\n/etc/crontab\n/etc/crontab\n\u3068\u3044\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u306e\u304b\uff1f\n/etc/crontab\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user  command\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )\n#\n\n\u6642\u3001\u65e5\u3001\u6708\u3001\u9031\u3000\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\n/etc/environment\n/etc/environment\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\"\n\nWindows\u3067\u8a00\u3046\u3068\u3053\u308d\u306e\u74b0\u5883\u5909\u6570\u3067\u3082\u5165\u3063\u3066\u308b\u3093\u3060\u308d\u3046\u304b\u3002\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3078\u306e\u30d1\u30b9\u304c\u901a\u3057\u3066\u3042\u308b\u611f\u3058\u3002\n\u305d\u306e\u884c\u306e\u4e0a\u306b\u3001\uff11\u884c\u66f8\u304d\u8db3\u3057\u3066\u307f\u308b\u3002\nSHELL=/bin/bash\n\n\u305d\u306e\u3042\u3068\u306f\u4f55\u3092\u30ea\u30b9\u30bf\u30fc\u30c8\u3055\u305b\u305f\u3089\u3044\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\n/etc/init.d/cron status\n\u25cf cron.service - Regular background program processing daemon\n   Loaded: loaded (/lib/systemd/system/cron.service; enabled; vendor preset: enabled)\n   Active: active (running) since Sat 2017-03-04 21:18:23 JST; 3 days ago\n     Docs: man:cron(8)\n Main PID: 507 (cron)\n   CGroup: /system.slice/cron.service\n           \u2514\u2500507 /usr/sbin/cron -f\n\nMar 08 03:56:01 tk2-217-18401 CRON[31079]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 03:56:01 tk2-217-18401 CRON[31078]: pam_unix(cron:session): session closed for user root\nMar 08 03:58:01 tk2-217-18401 CRON[31116]: pam_unix(cron:session): session opened for user root by (uid=0)\nMar 08 03:58:01 tk2-217-18401 CRON[31117]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 03:58:01 tk2-217-18401 CRON[31116]: pam_unix(cron:session): session closed for user root\nMar 08 04:00:01 tk2-217-18401 CRON[31155]: pam_unix(cron:session): session opened for user root by (uid=0)\nMar 08 04:00:01 tk2-217-18401 CRON[31156]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 04:02:01 tk2-217-18401 CRON[31192]: pam_unix(cron:session): session opened for user root by (uid=0)\nMar 08 04:02:01 tk2-217-18401 CRON[31193]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 04:02:01 tk2-217-18401 CRON[31192]: pam_unix(cron:session): session closed for user root\n\n\u304a\u3084\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u304c\u898b\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u3060\u3063\u305f\u3089\u3000\u6628\u65e5\u306f\u52d5\u3044\u3066\u306a\u304b\u3063\u305f\u3093\u3060\u3002\n# /etc/init.d/cron restart\n[ ok ] Restarting cron (via systemctl): cron.service.\n\n\u52dd\u624b\u306b\u30ea\u30b9\u30bf\u30fc\u30c8\u3055\u305b\u305f\u3002\n\ncron \u306e\u30ed\u30b0\n/var/log/syslog\n\n\u3089\u3057\u3044\u3093\u3060\u304c\u3002\u304a\u3084\uff1f\u3000\u4eca\u898b\u306b\u3044\u304f\u3068\u3042\u308b\u3002\nMar  7 06:25:01 tk2-217-18401 CRON[5015]: (root) CMD (test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily ))\n\nkernel \u304c\u5927\u91cf\u306b\u30ed\u30b0\u3092\u5410\u3044\u3066\u3044\u308b\u304c\u3001CRON \u306f\u30a8\u30e9\u30fc\u3063\u307d\u3044\u306e\u306f\u5410\u3044\u3066\u3044\u306a\u3044\u3002\n\u3069\u3046\u3057\u305f\u3082\u306e\u304b\u3002\n\ncron \u306e\u30eb\u30fc\u30c8\u6a29\u9650\n\u300cUbuntu cron crontab \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 \u8a2d\u5b9a\u300d \uff08\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3068\u304b\u30d0\u30a4\u30af\u3068\u304b\u3002\uff09\nhttp://esoz.blog.fc2.com/blog-entry-40.html\n\u30eb\u30fc\u30c8\u6a29\u9650\u3067\u8a2d\u5b9a\u3059\u308b\u306b\u306f\nsudo crontab -e\n\n\u3068\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u304b\u3002\u81ea\u5206\u306ecron\u306e\u8a2d\u5b9a\u3060\u3051\u3044\u3058\u3063\u3066\u3066\u3082\u30c0\u30e1\u304b\u3002\nsudo crontab -e\n\n# Edit this file to introduce tasks to be run by cron.\n#\n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n#\n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').#\n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n#\n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n#\n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n#\n# For more information see the manual pages of crontab(5) and cron(8)\n#\n# m h  dom mon dow   command\n0-59/2 * * * * bash /home/\u2605user/shogi/php_service/tamesi12.sh\n\nbash \u3092\u7d76\u5bfe\u30d1\u30b9\u306b\u3057\u3066\u307f\u308b\u304b\uff1f\n\n0-59/2 * * * * /bin/bash /home/\u2605user/shogi/php_service/tamesi12.sh\n\ntail /var/log/syslog\n\n\u3068\u66f8\u304f\u3068\u3001\u30ed\u30b0\u306e\u6700\u8fd1\u306e\u6570\u4ef6\u3092\u53d6\u308c\u308b\u3088\u3046\u3060\u304c\u3001kernel \u3070\u3063\u304b\u308a\u3060\u3002\n\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u6642\u306e\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u60f3\u5b9a\u3068\u7570\u306a\u308b\u3002\n\u3000\u2192\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5192\u982d\u4ed8\u8fd1\u306b\u300ccd /hoge/hoge\u300d\u3092\u7d76\u5bfe\u30d1\u30b9\u3067\u66f8\u304d\u8fbc\u3093\u3067\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u300c\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3068\u304b\u30d0\u30a4\u30af\u3068\u304b\u3002\u300d \uff08Ubuntu cron crontab \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 \u8a2d\u5b9a\uff09\nhttp://esoz.blog.fc2.com/blog-entry-40.html\n\u306a\u3093\u306e\u3053\u3068\u3060\u308d\u3046\u304b\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306f\u3000\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u8a18\u8ff0\u3057\u3066\u304a\u304f\u3068\u3044\u3044\u306e\u304b\u3002\n\n\u306a\u3093\u3067 PHP\u7528\u306e\u30d5\u30a9\u30eb\u30c0\u30fc\u306b .sh \u3092\u5165\u308c\u3066\u308b\u3093\u3060\u3002\n\u79fb\u52d5\u3002\nmv tamesi12.sh ../bash_service/tamesi12.sh\nmv tmp12 ../bash_service/tmp12\n\n\u4fee\u6b63\nsudo crontab -e\n\n0-59/2 * * * * /bin/bash /home/\u2605user/shogi/bash_service/tamesi12.sh\n\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 04:26:01 tk2-217-18401 CRON[31790]: (root) CMD (/bin/bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar  8 04:28:01 tk2-217-18401 CRON[31844]: (root) CMD (/bin/bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar  8 04:28:01 tk2-217-18401 CRON[31843]: (CRON) info (No MTA installed, discarding output)\nMar  8 04:30:01 tk2-217-18401 CRON[31881]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi12.sh)\nMar  8 04:32:01 tk2-217-18401 CRON[31929]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi12.sh)\n\n\u30d5\u30a9\u30eb\u30c0\u30fc\u306e\u79fb\u52d5\u306f\u53cd\u6620\u3055\u308c\u305f\u3088\u3046\u3060\u304c\u3002\n\n\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\ntamesi12.sh\n#!/bin/bash\ndate > tmp12\n\n\u5b9f\u884c\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u3042\u308b\u5834\u6240\u3092\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3057\u3066\u304f\u308c\u308b\u308f\u3051\u3058\u3083\u306a\u3044\u306e\u304b\u3002\n\u3058\u3083\u3042\u3001\u8ffd\u8a18\u3002\ntamesi12.sh\n#!/bin/bash\ncd /home/\u2605user/shogi/bash_service\ndate > tmp12\n\n# ls -an\n\u7565\n-rw-rw-rw- 1 0 0   29 Mar  8 04:38 tmp12\n\n\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u308b\u3002\u30de\u30b8\u304b\u3002\n# nano tmp12\nWed Mar  8 04:38:01 JST 2017\n\nbash\u306e\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306f\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u66f8\u304b\u306a\u3044\u3068\u3060\u3081\u304b\uff5e\uff08\uff3e\uff5e\uff3e\uff09\n\n\u3058\u3083\u3042\u6b21\u306f cron \u3092\u4f7f\u3063\u3066 nohup \u304b\u3064 \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c\nloop13.sh\n#!/bin/bash\ncd /home/\u2605user/shogi/bash_service\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\necho \"(^q^)CRON: Start infinity loop!\"\n\n\u3042\u308c\u3001\u3053\u308c\u6bce\u5206\u5b9f\u884c\u3055\u308c\u305f\u3089\u3001\u7121\u9650\u30eb\u30fc\u30d7\u306e\u30d7\u30ed\u30bb\u30b9\u5927\u91cf\u751f\u7523\u3055\u308c\u3066\u3044\u3084\u3060\u306a\u2026\u2026\u3002\n\uff11\u56de\u3060\u3051\u5e38\u99d0\u3057\u3066\u304f\u308c\u305f\u3089\u3044\u3044\u3002\n# sudo crontab -e\n\n3 * * * * /bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh\n\n\u3053\u308c\u3067 3\u5206 \u306b\u306a\u3063\u305f\u3089\nless /var/log/syslog | grep CRON\n\n\u3057\u3088\u3046\u3002\nMar  8 05:03:01 tk2-217-18401 CRON[32719]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n\n\u53e9\u3044\u3066\u306f\u304f\u308c\u305f\u3093\u3060\u304c\u3001\u3046\u307e\u304f\u5b9f\u884c\u3055\u308c\u305f\u306e\u304b\u3069\u3046\u304b\u3001\u3069\u3046\u3084\u3063\u3066\u78ba\u8a8d\u3057\u3088\u3046\u3002 echo \u306f\u51fa\u529b\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u304a\u3084\uff1f\n/home/\u2605user/shogi/php_log# ls -l\ntotal 8\n-rw-rw-rw- 1 root root 588 Mar  8 05:47 loop6.err.log\n-rw-rw-rw- 1 root root 407 Mar  8 02:12 loop6.out.log\n\nloop6.err.log \u306b\u65e5\u4ed8\u306e\u66f4\u65b0\u304c\u3042\u308b\u3002\nPHP Fatal error:  Uncaught Error: Class 'PhpAmqpLib\\Message\\AMQPMessage' not found in /home/\u2605user/shogi/php_receive/vendor/php-amqplib/php-amqplib/PhpAmqpLib/Channel/AbstractChannel.php:264\nStack trace:\n#0 /home/\u2605user/shogi/php_receive/vendor/php-amqplib/php-amqplib/PhpAmqpLib/Channel/AbstractChannel.php(384): PhpAmqpLib\\Channel\\AbstractChannel->wait_content()\n#1 /home/\u2605user/shogi/php_receive/loop6.php(44): PhpAmqpLib\\Channel\\AbstractChannel->wait()\n#2 {main}\n  thrown in /home/\u2605user/shogi/php_receive/vendor/php-amqplib/php-amqplib/PhpAmqpLib/Channel/AbstractChannel.php on line 264\n\ncomposer.json \u3092\u8abf\u3079\u308b\u304b\u2026\u2026\u3002\n\u2605/home/\u2605user/shogi/php_service# composer install\nDo not run Composer as root/super user! See https://getcomposer.org/root for details\nLoading composer repositories with package information\nInstalling dependencies (including require-dev) from lock file\nNothing to install or update\nGenerating autoload files\n\u2605/home/\u2605user/shogi/php_service# composer update\nDo not run Composer as root/super user! See https://getcomposer.org/root for details\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\nNothing to install or update\nGenerating autoload files\n\n\u66f4\u65b0\u306f\u3067\u304d\u3066\u308b\u3063\u307d\u3044\u3002\n\u3042\u3089\u3063\uff01 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fb\u30d1\u30b9\u3092\u3088\u304f\u898b\u308b\u3068 php_receive \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u306b\u3044\u3063\u3066\u3044\u308b\u304c\u3001 php_service \u306b\u5909\u3048\u305f\u3093\u3060\u3063\u305f\u3002\u306a\u3093\u3067\u5909\u3048\u308b\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u306b\u884c\u3063\u3066\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\u8abf\u3079\u308b\u304b\u2026\u2026\u3002\n\ncron \u304c\u5b9f\u884c\u3057\u305f\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u30fb\u30b8\u30e7\u30d6\u3092\u505c\u6b62\u3055\u305b\u308b\u306b\u306f\uff1f\nless /var/log/syslog | grep tamesi13\n\nMar  8 05:03:01 tk2-217-18401 CRON[32719]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n\n\u3053\u306e 32719 \u3068\u3044\u3046\u306e\u306f\u30d7\u30ed\u30bb\u30b9ID\u3060\u3063\u305f\u308a\u3059\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\u300c\u3010ps\u30fbkill\u3011\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u8868\u793a\u3068\u5f37\u5236\u7d42\u4e86\u300d \uff08Qiita\uff09\nhttp://qiita.com/shuntaro_tamura/items/4016868bda604baeac3c\nps aux\n\u7565\nroot     24330  0.0  1.3 232308 14052 pts/2    S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n\n\u602a\u3057\u3044\u30d7\u30ed\u30bb\u30b9\u306f\u3044\u3063\u3071\u3044\u51fa\u3066\u304d\u305f\u304c\u300132719 \u3068\u3044\u3046\u30d7\u30ed\u30bb\u30b9\u756a\u53f7\u306f\u7121\u3044\u3088\u3046\u3060\u3002\nps aux | grep receive\nroot      2560  0.0  0.0  12936   988 pts/2    S+   06:19   0:00 grep --color=auto receive\nroot     20355  0.0  1.3 232308 14064 ?        S    Mar07   0:03 php /home/\u2605user/shogi/php_receive/loop6.php\nroot     22501  0.0  0.1  11248  1364 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     22897  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23422  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23910  0.0  1.3 232308 14052 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n\u2605user    23978  0.0  1.3 232308 14056 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\nroot     24330  0.0  1.3 232308 14052 pts/2    S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n\n\u5168\u90e8 S \u306a\u306e\u3067\u3001\u4e00\u6642\u505c\u6b62\u4e2d\u3060\u304c\u3001\u843d\u3068\u3057\u305f\u3089\u3044\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\nkill 24330\n\nps aux | grep receive\nroot      2588  0.0  0.0  12936   988 pts/2    S+   06:20   0:00 grep --color=auto receive\nroot     20355  0.0  1.3 232308 14064 ?        S    Mar07   0:03 php /home/\u2605user/shogi/php_receive/loop6.php\nroot     22501  0.0  0.1  11248  1364 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     22897  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23422  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23910  0.0  1.3 232308 14052 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n\u2605user    23978  0.0  1.3 232308 14056 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n\n\u304a\u3063\u3001\u843d\u3068\u305b\u305f\u3002\u8981\u3089\u306a\u3044\u306e\u5168\u90e8\u843d\u3068\u305d\u3046\u3002\n\u843d\u3068\u3057\u305f\u3002\n\u6b21\u306f\u307e\u305f cron \u3067\u5b9f\u884c\u3057\u3088\u3046\u3002\nsudo crontab -e\n\nless /var/log/syslog | grep CRON\nMar  8 06:28:01 tk2-217-18401 CRON[2889]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n\n\u3088\u3057\u3001\u5b9f\u884c\u3055\u308c\u305f\u3002\nCron \u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u5916\u3057\u3066\u304a\u304f\u3002\nps aux | grep receive\n\n\u3044\u306a\u3044\u306a\u3002\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u5916\u3059\u3068\u30c0\u30e1\u306a\u306e\u304b\uff1f\nps aux\n\u7565\nroot     28496  0.0  1.3 232308 14068 pts/2    S    02:01   0:01 /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php\n\n\u3053\u308c\u304c\u4e00\u6642\u505c\u6b62\u4e2d\u3060\u304c\u3001\u30a8\u30e9\u30fc\u3067\u3082\u51fa\u3066\u3044\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\nhttp://\u2605.\u2605.\u2605.\u2605/tamesi5.php \u306b\u6570\u56de\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3000\u30a8\u30f3\u30ad\u30e5\u30fc\u3000\u3057\u3066\u304a\u304f\u3002\n\u30c7\u30ad\u30e5\u30fc\u30fb\u30d6\u30ed\u30fc\u30ab\u30fc\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308c\u3070\u3001\u30ed\u30b0\u306b\u66f8\u304d\u51fa\u3059\u3060\u308d\u3046\u3002\n\u540c\u671f\u3057\u3066\u306a\u304f\u3066\u3044\u3044\u306f\u305a\u3060\u3002\n\uff14\uff15\u5206\u306b\u5b9f\u884c\u3002\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 06:45:01 tk2-217-18401 CRON[3243]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n\n/home/\u2605user/shogi/php_log# ls -l\ntotal 8\n-rw-rw-rw- 1 root root 588 Mar  8 06:04 loop6.err.log\n-rw-rw-rw- 1 root root 407 Mar  8 02:12 loop6.out.log\n\n6:45 \u306b\u30ed\u30b0\u306e\u66f4\u65b0\u306f\u306a\u3044\u3002\nps a\n  PID TTY      STAT   TIME COMMAND\n  757 ttyS0    Ss+    0:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220\n  758 tty1     Ss+    0:00 /sbin/agetty --noclear tty1 linux\n 3297 pts/2    R+     0:00 ps a\n24156 pts/2    Ss     0:00 -bash\n24349 pts/2    S      0:00 sudo su -\n24350 pts/2    S      0:00 su -\n24351 pts/2    S      0:02 -su\n28496 pts/2    S      0:01 /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php\n\ndequeueBroker.php \u306f\u505c\u6b62\u3057\u3066\u308b\u304c\u3001\u30a8\u30e9\u30fc\u30ed\u30b0\u306f\u7121\u3044\u3060\u308d\u3046\u304b\uff1f\n\u2605/home/\u2605user/shogi/bash_service# nano kicker_dequeueBroker.sh\n#!/bin/bash\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php > /home/\u2605user/shogi/php_log/dequeueBroker.out.log 2> /home/\u2605user/shogi/php_log/dequeueBroker.err.log < /dev/null &\n\n\u30a8\u30e9\u30fc\u304c\u3042\u308c\u3070 /home/\u2605user/shogi/php_log/dequeueBroker.err.log \u306b\u51fa\u529b\u3055\u308c\u308b\u306f\u305a\u3060\u304c\u3002\n\u3042\u308c\u3063\uff01\uff01\n\u2605/home/\u2605user/shogi/bash_service# nano kicker_dequeueBroker.sh\n\nkicker_dequeueBroker.sh\nnohup /usr/bin/php /home/csg10/shogi/php_service/dequeueBroker.php > /home/csg10/shogi/php_log/dequeueBroker.out.log 2> /home/csg10/shogi/php_log/dequeueBroker.err.log < /dev/null &\n\n\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u3066\u3044\u306a\u3044\u3058\u3083\u306a\u3044\u304b\u3002\ncd /home/\u2605user/shogi/bash_service\n\n\u3053\u308c\u3092\u66f8\u304d\u8db3\u3057\u3066\u304a\u3053\u3046\u3002\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 07:06:01 tk2-217-18401 CRON[3566]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n\n\u52d5\u3044\u305f\u3088\u3046\u3060\u3002\n\u30ed\u30b0\u306f\u6e2c\u308c\u3066\u3044\u306a\u3044\u3002\n\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3001\u60f3\u5b9a\u3057\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3002\ncd /home/\u2605user/shogi/php_service\n\n\u304a\u3084\u3063\uff01 \u5b9f\u884c\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u9593\u9055\u3048\u3066\u306a\u3044\u304b\uff1f\n'''\n29 * * * * /bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh\n'''\n\u3058\u3083\u306a\u304f\u3066\u3001\n'''\n29 * * * * /bin/bash /home/\u2605user/shogi/bash_service/kicker_dequeueBroker.sh\n'''\n\u3060\u308d\u3046\u3002\u306a\u3093\u3067\u898b\u3048\u306a\u3044\u3093\u3060\u308d\u3046\u3002\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 07:30:01 tk2-217-18401 CRON[4055]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/kicker_dequeueBroker.sh)\n/home/\u2605user/shogi/php_log# ls -l\ntotal 12\n-rw-r--r-- 1 root root   0 Mar  8 07:30 dequeueBroker.err.log\n-rw-r--r-- 1 root root 358 Mar  8 07:30 dequeueBroker.out.log\n-rw-rw-rw- 1 root root 588 Mar  8 06:04 loop6.err.log\n-rw-rw-rw- 1 root root 407 Mar  8 02:12 loop6.out.log\n\n\u30ed\u30b0\u304c\u3067\u304d\u3066\u3044\u308b\u3002\n\u4e2d\u8eab\u306f\u521d\u671f\u72b6\u614b\u306e\u3082\u306e\u3002\u30c7\u30ad\u30e5\u30fc\u3057\u3066\u3044\u308b\u69d8\u5b50\u306f\u306a\u3044\u3002\nphp \u3092\u76f4\u63a5\u53e9\u3044\u3066\u307f\u308b\u3002\u305d\u3057\u3066 [Ctrl]+[C] \u3067\u7d42\u4e86\u3002\nHow to use\n==========\n\n    Start infinity loop\n    -------------------\n        After ( nohup /usr/bin/php /home/\u2605user/shogi/php_service/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php$\n        By absolute path.\n\n    To finish kill\n    --------------\n        jobs\n        kill %(job number)\n [x] Received Flying Dragon!\n\n1\u884c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u3002\n\u66f8\u304d\u76f4\u3057\u3066\u307f\u308b\u3002\ndequeueBroker.php\n<?php\n// \u30c7\u30ad\u30e5\u30fc\n// Cron\u3067\uff11\u56de\u30ad\u30c3\u30af\u3057\u308d\u3060\u305c\u2606\uff08\uff3e\uff5e\uff3e\uff09\n\nrequire_once __DIR__ . '/vendor/autoload.php';\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\n\n// \u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u306e\u524d\u6e96\u5099\u3092\u3059\u308b\u305c\u2606\uff08\uff3e\uff5e\uff3e\uff09\n$connection = new AMQPStreamConnection('localhost', 5672, 'guest', 'guest');\n$channel = $connection->channel();\n$QKey = '1111';\n$channel->queue_declare($QKey, false, false, false, false);\n\n// \u30ad\u30e5\u30fc\u3092\u958b\u3044\u3066\u3057\u307e\u3048\u3070\u3001\u3042\u3068\u306f\u7121\u9650\u30eb\u30fc\u30d7\uff01\n\n// \u30c7\u30ad\u30e5\u30fc\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3059\u308b\u3053\u3068\u3092\u3053\u3053\u306b\u66f8\u304f\n$callback = function($msg) {\n    echo \" [x] Received \", $msg->body, \"\\n\";\n};\n$channel->basic_consume($QKey, '', false, true, false, false, $callback);\n\n// \u7121\u9650\u30eb\u30fc\u30d7\nwhile(count($channel->callbacks))\n{\n    // \u3053\u3053\u3067\u30d6\u30ed\u30c3\u30af\u3057\u306a\u304c\u3089\u30c7\u30ad\u30e5\u30fc\u3059\u308b\n    $channel->wait();\n}\n// \u3053\u3053\u306b\u6765\u306a\u3044\necho \"\u7121\u9650\u30eb\u30fc\u30d7\u3092\u629c\u3051\u305f\uff01\uff1f\u2606\uff08\uff3e\uff5e\uff3e\uff09\uff01\uff1f\";\n// $channel->close();\n// $connection->close();\n\n\u8aac\u660e\u306e\u51fa\u529b\u3092\u7701\u3044\u3066\u3001\u7121\u9650\u30eb\u30fc\u30d7\u3092\u629c\u3051\u305f\u3068\u304d\u306b\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\uff11\u3064\u30ed\u30b0\u306b\u5410\u304d\u51fa\u3059\u3053\u3068\u306b\u3057\u305f\u3002\nroot      4945  0.0  1.3 232308 14040 ?        S    08:05   0:00 /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php\n\n\u306a\u3093\u3067\u30b9\u30c8\u30c3\u30d7\u3057\u3066\u308b\u3093\u3060\u308d\u3002\n\n\u30d7\u30ed\u30bb\u30b9\u306f \u30b9\u30c8\u30c3\u30d7\u3057\u3066\u3044\u3066\u3082\u52d5\u3044\u3066\u3044\u308b \u306e\u3067\u306f\uff1f\n\u30b9\u30c8\u30c3\u30d7\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u3042\u308a\u3001\n\u30d6\u30e9\u30a6\u30b6\u3067 http://\u2605.\u2605.\u2605.\u2605/tamesi5.php \u3092\u53e9\u304f\u3068 \u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u6587\u5b57\u304c\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3001\n\u30d7\u30ed\u30bb\u30b9\u306f\u6b62\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u3066\u52d5\u3044\u3066\u3044\u308b\u306e\u304b\u3001\n\u305d\u308c\u3068\u3082\u3000\u30c6\u30b9\u30c8\u3067\u53e9\u3044\u305f \u5225\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u52d5\u3044\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\u533a\u5225\u304c\u3067\u304d\u306a\u3044\u3002\n\nPHP \u3067\u30c7\u30ad\u30e5\u30fc\u305b\u305a\u306b\u3001C# \u3067\u30c7\u30ad\u30e5\u30fc\u3067\u304d\u306a\u3044\u306e\u304b\uff1f\n\u306a\u3093\u3067 C# \u3067\u30c7\u30ad\u30e5\u30fc\u3067\u304d\u306a\u3044\u3093\u3060\u308d\u3046\u3002\ncsharp_service \u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u30fc\u3092\u6398\u308d\u3046\u3002\nmkdir csharp_service\nmkdir csharp_log\n\n\u3053\u306e\u4e2d\u306b\u8a66\u3057\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u79fb\u3059\u3053\u3068\u306b\u3059\u308b\u3002\nmv tamesi1 ape1.sh\nmv tamesi2 ape2.sh\nmv tamesi3 ape3.sh\nmv tamesi4 ape4.sh\nmv tamesi5 ape5.sh\nmv tamesi6 ape6.sh\nmv tamesi7 ape7.sh\nmv tamesi8 ape8.sh\nmv tamesi9 ape9.cs\nmv tamesi9.exe ape9.exe\nmv tamesi10 ape10.cs\nmv tamesi10.exe ape10.exe\n\nmv MsgQueue_Old.cs ../../csharp_service/MsgQueue_Old.cs\nmv MsgQueue.cs ../../csharp_service/MsgQueue.cs\nmv MsgQueue.exe ../../csharp_service/MsgQueue.exe\n\n\u306a\u305c\u3060\u304b\u5206\u304b\u3089\u306a\u3044\u304c\u3001C# \u304c\u30a8\u30f3\u30ad\u30e5\u30fc\u3057\u305f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u306f C# \u306b\u3057\u304b\u898b\u308c\u306a\u3044\u3057\u3001PHP \u304c\u30a8\u30f3\u30ad\u30e5\u30fc\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u30c7\u30ad\u30e5\u30fc\u3067\u304d\u306a\u3044\u3088\u3046\u3060\u3002\n\u306a\u3093\u3060\u308d\u3046\u3002\n\nPHP\u306e\u53d7\u3051\u53d6\u308a\u53e3\u3092\u6539\u9020\u3057\u3088\u3046\n\u3068\u308a\u3042\u3048\u305a\u5f79\u306b\u7acb\u3061\u305d\u3046\u306a\u306e\u306f\uff12\u3064\u3002\ntamesi2.php\ntamesi5.php\n\u3053\u308c\u3092\u7d71\u5408\u3057\u3066\u3001tamesi14.php \u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n<?php\nrequire_once __DIR__ . '/vendor/autoload.php';\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\nuse PhpAmqpLib\\Message\\AMQPMessage;\n\n// GET\u30af\u30a8\u30ea\u6587\u5b57\u5217\u3092\u53d6\u5f97\n$QMsg = urldecode($_SERVER['QUERY_STRING']);\nif( \"\" === $QMsg)\n{\n    $QMsg = \"hello, world\";\n}\n\n// \u5225\u306e\u30af\u30a8\u30ea\u30fc\u3082\u9001\u308c\u308b\u3053\u3068\u3092\u8aac\u660e\necho '\uff08\uff3e\uff51\uff3e\uff09' . $QMsg . '<br />';\necho '\u3053\u308c\u3092\uff11\u56de\u30af\u30ea\u30c3\u30af\u3057\u308d\u3060\u305c\u2606\uff4d\uff19\uff08\uff3e\uff5e\uff3e\uff09\uff01<br />';\necho '<a href=\"http://\u2605.\u2605.\u2605.\u2605/tamesi14.php?ClickSitanDaze\">http://\u2605.\u2605.\u2605.\u2605/tamesi14.php?ClickSitanDaze</a><br />';\n\n// \u30ad\u30e5\u30fc\u3092\u958b\u304f\n$connection = new AMQPStreamConnection('localhost', 5672, 'guest', 'guest');\n$channel = $connection->channel();\n$QKey = '1111';\n$channel->queue_declare($QKey, false, false, false, false);\n\n// \u30a8\u30f3\u30ad\u30e5\u30fc\u3059\u308b\n$msgObj = new AMQPMessage( $QMsg );\n$channel->basic_publish($msgObj ,'' ,$QKey);\n\necho \"\u5bfe\u5c40\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8fd1\u304f\u306b\u5c4a\u3051\u3066\u304a\u304f\u305c\u2606\uff08\uff3e\u25bd\uff3e\uff09\uff56 ['\" . $QMsg . \"']\\n\";\n\n// \u30ea\u30bd\u30fc\u30b9\u3092\u958b\u653e\u3059\u308b\n$channel->close();\n$connection->close();\n\n\n\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3082\u3001\u30d7\u30ed\u30bb\u30b9\u306f\u52d5\u3044\u3066\u3044\u308b\u3060\u308d\u3046\u304b\uff1f\ndequeueBroker.out.log \u306b\u6587\u5b57\u5217\u304c\u5165\u308b\u3068\u3053\u308d\u307e\u3067\u306f\u3067\u304d\u305f\u304c\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3082\u3000\u30d7\u30ed\u30bb\u30b9\u306f\u52d5\u3044\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u304c\u554f\u984c\u3060\u3002\n\u300cUbuntu Linux\u306bRabbitMQ\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u300d \uff08CLOVER\uff09\nhttp://d.hatena.ne.jp/Kazuhira/20160531/1464706671\nRabbitMQ \u304c\u843d\u3061\u3066\u308b\u306e\u304b\u3068\u601d\u3063\u305f\u304c\u30ed\u30b0\u306f\u5410\u3044\u3066\u308b\u3057\u3002\n\nPHP exec\n\u300c\u5916\u90e8\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c - exec()\u3001system()\u300d \uff08PHP\u5165\u9580\uff09\nhttp://webkaru.net/php/function-exec-system/\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e\u30b3\u30de\u30f3\u30c9\u3092 PHP \u304b\u3089\u4f7f\u3048\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\u8a66\u3057\u3066\u307f\u3088\u3046\u3002\nphp_service/tamesi15.php\n<?php\n// \u5f15\u6570\u7121\u3057\nvar_dump(\n    exec(\n        'ls'\n    )\n);\n\n// \u5f15\u6570\u6709\u308a\nvar_dump(\n    exec(\n        'ls', $out, $ret\n    )\n);\nprint_r( $out );\nvar_dump( $ret );\n\nphp tamesi15.php\n\nstring(6) \"vendor\"\nstring(6) \"vendor\"\nArray\n(\n    [0] => composer.json\n    [1] => composer.lock\n    [2] => dequeueBroker.php\n    [3] => loop10.php\n    [4] => loop6.php\n    [5] => tamesi15.php\n    [6] => vendor\n)\nint(0)\n\nexec( ) \u306e\u623b\u308a\u5024\u306f\u5358\u306b\u3000out\u306e\u6700\u7d42\u884c\u3060\u308d\u3046\u304b\u3002\u30b3\u30de\u30f3\u30c9\u306e\u623b\u308a\u5024\u306fout \u306e\u6700\u7d42\u884c\u3060\u308d\u3046\u304b\u3002\u30b3\u30de\u30f3\u30c9\u306e\u623b\u308a\u5024\u306f ret \u306b\u5165\u3063\u305f\u306e\u3060\u308d\u3046\u3002\n\nexpect \u30b3\u30de\u30f3\u30c9\n\u300cLinux\u306e\u5bfe\u8a71\u304c\u3081\u3093\u3069\u304f\u3055\u3044?\u305d\u3093\u306a\u6642\u3053\u305d\u81ea\u52d5\u5316\u3060\uff01-expect\u7de8-\u300d \uff08Qiita\uff09\nhttp://qiita.com/ine1127/items/cd6bc91174635016db9b\n\uff11\u884c\u3067\u66f8\u304f\u5f62\u5f0f\u306a\u306e\u304b\u3001\u6697\u53f7\u307f\u305f\u3044\u3060\u3002\n\u300cExpect \u306e\u4f7f\u7528\u4f8b\u300d (PHP\u30de\u30cb\u30e5\u30a2\u30eb)\nhttp://php.net/manual/ja/expect.examples-usage.php\n\u3053\u3063\u3061\u306f PHP\u30d7\u30ed\u30b0\u30e9\u30e0\u305d\u306e\u307e\u3093\u307e\u3063\u307d\u3044\u3002\n\n\u9577\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u6b21\u306e\u8a18\u4e8b\u3078\n\u524d\u56de\u306e\u8a18\u4e8b : http://qiita.com/muzudho1/items/bf3f6debf6db7f96300c#_reference-bfc60da48dec57f06190\n\n# bash \u3067\u7121\u9650\u30eb\u30fc\u30d7\u306f\u3069\u3046\u66f8\u304f\u306e\u304b\n\n\u8a66\u3057\u306b\u76f4\u63a5\u53e9\u3044\u3066\u307f\u308b\u3002\n\n```\n./loop8.sh\n-su: ./loop8.sh: Permission denied\n```\n\n\u3053\u308c\u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3058\u3083\u306a\u3044\u306e\u304b\u3002\u3042\u308b\u3044\u306f\u5b9f\u884c\u6a29\u9650\u304c\u3044\u308b\u306e\u304b\u3002\n\n```\nls -an\n\uff5e\u4e2d\u7565\uff5e\n-rw-r--r-- 1 0 0  104 Mar  7 20:52 loop8.sh\nchmod 755 loop8.sh\nls -an\n\uff5e\u4e2d\u7565\uff5e\n-rwxr-xr-x 1 0 0  104 Mar  7 20:52 loop8.sh\n```\n\n```\n./loop8.sh\n```\n\n\u3053\u308c\u3067\u30d6\u30ed\u30c3\u30af\u3055\u308c\u305f\u3002\n\n[Ctrl]+[Z]\n\n```\n^Z\n[1]+  Stopped                 ./loop8.sh\njobs\n[1]+  Stopped                 ./loop8.sh\n```\n\n\u76f4\u63a5\u5b9f\u884c\u3059\u308b\u3068\u3001jobs \u306b\u3044\u308b\u3088\u3046\u3060\u3002php \u306f\u76f4\u63a5\u5b9f\u884c\u3058\u3083\u306a\u3044\u304b\u3089\u30c0\u30e1\u306a\u306e\u304b\uff1f\n\n```\nnohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n[2] 22501\njobs\n[1]+  Stopped                 ./loop8.sh\n[2]-  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n```\n\n\u4eca\u5ea6\u306f\u5f8c\u308d\u3067\u8d70\u3063\u3066\u3044\u308b\u3088\u3046\u3060\u3002\u3055\u3063\u304d\u306f\u8d70\u3063\u3066\u306a\u304b\u3063\u305f\u6c17\u304c\u3059\u308b\u304c\u3002\n\n# \u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u306b\u5207\u308a\u66ff\u3048\u3088\u3046\n\n```\nsu \u2605user\njobs\nps\n  PID TTY          TIME CMD\n21573 pts/1    00:00:00 bash\n21955 pts/1    00:00:00 php\n22536 pts/1    00:00:00 bash\n22546 pts/1    00:00:00 ps\n```\n\n\u30b8\u30e7\u30d6\u306f\u7a7a\u3063\u307d\u3060\u304c\u3001\u30d7\u30ed\u30bb\u30b9\u306b\u306f bash \u304c\uff12\u3064\u3042\u308b\u3002 php \u3082\u3042\u308b\u304c\u2026\u2026\u3002\n\n```\n$exit\nexit\n# jobs\n[1]+  Stopped                 ./loop8.sh\n[2]-  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n```\n\nexit \u3068\u6253\u3064\u3068 exit \u3068\u8fd4\u3063\u3066\u304f\u308b\u306e\u304b\u3002\u307e\u304e\u3089\u308f\u3057\u3044\u306a\u3002\n\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u306b\u623b\u3063\u3066\u304f\u308b\u3068\u3001job \u304c\u898b\u3048\u305f\u3002**\u30e6\u30fc\u30b6\u30fc\u306b\u3088\u3063\u3066\u898b\u3048\u308b job \u304c\u7570\u306a\u308b\u306e\u304b\u3002**\n\n```\nbg 1\n[1]+ ./loop8.sh &\njobs\n[1]-  Running                 ./loop8.sh &\n[2]+  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n```\n\nbg 1 \u30b3\u30de\u30f3\u30c9\u3067\u3000\u6b62\u307e\u3063\u3066\u3044\u308b\u30b8\u30e7\u30d6\u3092\u3000\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d70\u3089\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3082\u5206\u304b\u308b\u3002\n\n```\n# exit\nlogout\n$ su \u2605user\nPassword:\n$ jobs\n$ exit\nexit\n$ jobs\n[1]+  Running                 nohup /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n```\n\n**\u3042\u308c\uff1f** \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d70\u3063\u3066\u3044\u3063\u305f\u65b9\u306f\u6d88\u3048\u305f\u3002 nohup \u5fd8\u308c\u304b\u3002\n\nbg \u30b3\u30de\u30f3\u30c9\u3067 nohup \u306a\u3093\u304b\u3067\u304d\u308b\u306e\u304b\uff1f\u3000\u308f\u304b\u3089\u306a\u3044\u3002\n\n```\nkill %1\n```\n\n\u5225\u306e\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3092\u5909\u3048\u3066\u3001\u5143\u306e\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u306b\u623b\u3063\u3066\u304d\u305f\u3068\u304d\u306b job \u304c\u307e\u3060\u6b8b\u3063\u3066\u3044\u308b\u306e\u306f\u5206\u304b\u3063\u305f\u3002\n\u3058\u3083\u3042\u3001\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u3092\u629c\u3051\u3066\u3001\u3082\u3046\u4e00\u5ea6\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u3067\u5165\u3063\u305f\u3068\u304d\u306f\u3069\u3046\u304b\uff1f\n\n```\n$ su \u2605user\nPassword:\n$ sudo su -\n[sudo] password for \u2605user:\nnohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n[1] 22897\njobs\n[1]+  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\nps\n  PID TTY          TIME CMD\n22468 pts/1    00:00:00 loop8.sh\n22501 pts/1    00:00:00 loop8.sh\n22849 pts/1    00:00:00 su\n22866 pts/1    00:00:00 sudo\n22867 pts/1    00:00:00 su\n22868 pts/1    00:00:00 bash\n22897 pts/1    00:00:00 loop8.sh\n22898 pts/1    00:00:00 sleep\n22899 pts/1    00:00:00 sleep\n22902 pts/1    00:00:00 sleep\n22909 pts/1    00:00:00 ps\n# exit\nlogout\n$ sudo su -\n# jobs\n# ^C \u203b\u6253\u3061\u9593\u9055\u3044\n# ps\n  PID TTY          TIME CMD\n22468 pts/1    00:00:00 loop8.sh\n22501 pts/1    00:00:00 loop8.sh\n22849 pts/1    00:00:00 su\n22897 pts/1    00:00:00 loop8.sh\n22914 pts/1    00:00:00 sleep\n22915 pts/1    00:00:00 sleep\n22918 pts/1    00:00:00 sleep\n22921 pts/1    00:00:00 sudo\n22922 pts/1    00:00:00 su\n22923 pts/1    00:00:00 bash\n22942 pts/1    00:00:00 ps\n```\n\n\u7a7a\u3063\u307d\u3002**\u3046\u30fc\u3080\u3002**\n\n# exit\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u306e\u3067\u306f\uff1f\n\nexit \u3059\u308b\u3068\u3000\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u7d42\u4e86\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u304b\uff1f\n**exit \u3068\u30ed\u30b0\u30a2\u30a6\u30c8\u306f\u9055\u3046\u306e\u304b\uff1f**\n\n\u300clogout\u3068exit\u306e\u9055\u3044\u300d (\u3057\u3087\u307c\u3093\u30e1\u30e2\u30ea \uff08\u00b4\u30fb\u03c9\u30fb\uff40\uff09)\nhttp://shobon.hatenablog.com/entry/2014/06/27/212224\n\n**\u6b21\u304b\u3089 logout \u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3002exit \u306f\u4f7f\u308f\u306a\u3044\u65b9\u5411\u3067\u3002**\n\n# exit\u3092\u4f7f\u308f\u305a\u3001logout \u3067\u3084\u308a\u76f4\u3057\u3066\u307f\u308b\n\n\u307e\u305a exit \u3092\u53e9\u304d\u307e\u304f\u3063\u3066\u3000\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u629c\u3051\u308b\u3002\n\n\u6b21\u306b\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u5165\u308a\u76f4\u3059\u3002\n\n```\n$ jobs\n$ ps\n  PID TTY          TIME CMD\n23342 pts/2    00:00:00 bash\n23355 pts/2    00:00:00 ps\n```\n\n\u6b21\u306b\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u306b\u306a\u308b\u3002\n\n```\n$ sudo su -\n\u203b\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\n# nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n[1] 23422\n# jobs\n[1]+  Running                 nohup /home/\u2605user/shogi/bash_receive/loop8.sh > /home/\u2605user/shogi/bash_log/loop8.out.log 2> /home/\u2605user/shogi/bash_log/loop8.err.log < /dev/null &\n```\n\n\u3053\u3053\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3002\n\n```\n# logout\n$ sudo su -\n# jobs\n```\n\n\u304b\u3089\u3063\u307d\u3060\u3002\u30e6\u30fc\u30b6\u30fc\u3092\u30c1\u30a7\u30f3\u30b8\u3059\u308b\u3053\u3068\u306f\u3088\u304f\u3042\u308b\u306e\u3067\u3001exit \u3067\u3082 logout \u3067\u3082\u30b7\u30a7\u30eb\u304c\u6b62\u307e\u3063\u3066\u3057\u307e\u3046\u3088\u3046\u3067\u306f\u3000\u30b5\u30fc\u30d0\u30fc\u30fb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u958b\u8a2d\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3002\n\n# \u3058\u3083\u3042\u3001\u30a2\u30d1\u30c3\u30c1\u306f\u3069\u3046\u3084\u3063\u3066\u5e38\u99d0\u3057\u3066\u3044\u308b\u306e\u304b\uff1f\n\n\u300cLAMP\u69cb\u6210\u304c\u57fa\u672c\u3089\u3057\u3044\u300d (\u25cb\u00d7\uff08\u307e\u308b\u307a\u3051\uff09\u3064\u304f\u308d\u30fc\u3069\u3063\u3068\u30b3\u30e0)\nhttp://marupeke296.com/IKDADV_SVR_LAMP.html\n\n# \u30ea\u30e2\u30fc\u30c8\u304b\u3089\u30bb\u30c3\u30b7\u30e7\u30f3\u304d\u3063\u305f\u3089\u3000\u306a\u3093\u3067\u30b8\u30e7\u30d6\u304c\u6d88\u3048\u308b\u306e\u304b\uff1f\n\n\u300cLinux\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3084\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u5207\u65ad\u3057\u3066\u3082\u30b3\u30de\u30f3\u30c9\u3092\u7d9a\u884c\u3055\u305b\u308b\u65b9\u6cd5\u300d (\u5c0f\u7c8b\u7a7a\u9593)\nhttp://www.koikikukan.com/archives/2015/11/20-011111.php\n\n\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u52d5\u3044\u3066\u3044\u308b\u30b8\u30e7\u30d6\u304c\u3042\u3063\u3066\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5207\u308b\u3068\u6d88\u3048\u308b\u3002\n\n```\nlogout\n```\n\n```\nsudo su -\n```\n\n\u306e\u3069\u3061\u3089\u304b\u306b\u554f\u984c\u304c\u3042\u308b\u306e\u3060\u308d\u3046\u304b\u3002\n\nsu \u2605user \u3067\u3082\u3046\uff11\u56de\u5165\u3063\u3066 logout\u3002\n\n```\n$ logout\nbash: logout: not login shell: use `exit'\n```\n\n\u3046\u30fc\u3080\u3002\n\nsu \u2605user \u3067\u5165\u3063\u305f\u3089\u3001\u30b7\u30a7\u30eb\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u3067\u306f\u306a\u3044\u304b\u3089 exit \u3067\u629c\u3051\u308b\uff1f\uff1f\n\nexit \u3067\u540c\u3058\u30e6\u30fc\u30b6\u30fc\u306b\u623b\u3063\u3066\u304d\u3066\u3082\u3001jobs \u306f\u6b8b\u3063\u3066\u3044\u308b\u3002\n\n# \u300csu \u30e6\u30fc\u30b6\u30fc\u540d\u300d\u306f\u3001\u4f55\u3092\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306a\u306e\u304b\uff1f\n\n\u300c\u3010 \u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3059 \u3011\u300d (ITpro)\nhttp://itpro.nikkeibp.co.jp/article/COLUMN/20060228/231081/\n\nsu \u306e\u5f8c\u308d\u306b \u2010 \u304c\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\n# PuTTY \u3092\u9589\u3058\u308b\u306b\u306f\uff1f\n\n[Alt]+[F4]\u30ad\u30fc\u3067\u3082\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5207\u308b\u3088\u3046\u3060\u304c\u3002\n\n\u63a5\u7d9a\u3059\u308b\u3068\u3001jobs \u306f\u7a7a\u3063\u307d\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\njob \u306f\u30bb\u30c3\u30b7\u30e7\u30f3\u30fb\u30b9\u30b3\u30fc\u30d7\u306a\u3093\u3060\u308d\u3046\u304b\uff1f\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30fb\u30b9\u30b3\u30fc\u30d7\u306f\u7121\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\n\n# nohup \u306f\u4f7f\u308f\u306a\u304f\u3066\u3082\u3044\u3044\uff1f\n\n\u300cLinux\u306e\u30b3\u30de\u30f3\u30c9\u306b\u3064\u3044\u3066 \"nohup (\u30d7\u30ed\u30b0\u30e9\u30e0\u300d (YAHOO!JAPAN\u77e5\u6075\u888b)\nhttp://detail.chiebukuro.yahoo.co.jp/qa/question_detail/q11164890521\n\n\u3058\u3083\u3042\n\n```\n# /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n[1] 24330\n# jobs\n[1]+  Running                 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n$ sudo su -\n# jobs\n```\n\n\u7a7a\u3063\u307d\u3002\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u3068\u3001\u306a\u3093\u3067\u3000\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306e\u30b8\u30e7\u30d6\u304c\u6d88\u3048\u308b\u3093\u3060\uff1f\n\u30e6\u30fc\u30b6\u30fc\u3092\u5207\u308a\u66ff\u3048\u305f\u6642\u70b9\u3067\u6d88\u3048\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n# PuTTY\n\n\u300cRunning a Process in the Background with Putty Closed\u300d (http://linux.ittoolbox.com)\nhttp://linux.ittoolbox.com/groups/technical-functional/linuxadmin-l/running-a-process-in-the-background-with-putty-closed-5205477\n\n- \u3055\u304f\u3089VPS\n- Linux\n- Ubuntu\n- Bash\n- PuTTY\n\n\u3053\u308c\u4ee5\u5916\u306b\u539f\u56e0\u304c\u3042\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n# \u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u5b9f\u884c\u3057\u305f\u3082\u306e\u306f\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u305f\u3089\u7d42\u4e86\u3059\u308b\n\n\u77e5\u3063\u3066\u308b\u4eba\u306b\u805e\u3044\u3066\u307f\u305f\u3002\u305d\u3046\u306a\u306e\u304b\u3002\n\u3058\u3083\u3042\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u3082\u4f5c\u3063\u3066\u3000\u7f6e\u3044\u3066\u304a\u3044\u3066\u3001cron \u306b\u81ea\u52d5\u5b9f\u884c\u3055\u305b\u3066\u307f\u3088\u3046\u3002\n\n\uff11\u56de\u8e74\u3063\u3066\u3082\u3089\u3046\u3060\u3051\u3067\u3044\u3044\u3093\u3060\u304c\u3001cron \u306a\u3089\u3000\u30b3\u30b1\u3066\u3044\u3066\u3082\u53e9\u304d\u8d77\u3053\u3057\u3066\u304f\u308c\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3002\n\n# Ubuntu \u3067 cron \u3092\u4f7f\u3046\u306b\u306f\uff1f\n\n\u300cHow do I set up a Cron job?\u300d (ask ubuntu)\nhttp://askubuntu.com/questions/2368/how-do-i-set-up-a-cron-job\n\n/etc/ \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\n\n- /etc/cron.daily\n- /etc/cron.hourly\n- /etc/cron.monthly\n- /etc/cron.weekly\n\n\u306e\uff14\u3064\u304c\u3042\u308b\u3089\u3057\u3044\u3002\u8abf\u3079\u3066\u307f\u308b\u3068\u5168\u90e8\u3042\u308b\u3002\u4ed6\u306b\u3082\n\n- /etc/cron.d\n- /etc/crontab\n\n\u304c\u3042\u308b\u3002\u305b\u3063\u304b\u304f\u306a\u306e\u3067 nano \u3067\u4e2d\u8eab\u3092\u898b\u3066\u307f\u308b\u3002\n\ncrontab \u4ee5\u5916\u306f\u7a7a\u3063\u307d\u3060\u3063\u305f\u3002\n\ncrontab\n\n```\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user  command\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.d$\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.w$\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.m$\n#\n```\n\n\u3058\u3083\u3042\u3001\u4f7f\u3044\u65b9\u306f\u3069\u3046\u3059\u308b\u306e\u304b\uff1f\n\n\u300ccrontab\u306e\u66f8\u304d\u65b9\u300d \uff08server-memo.net\uff09\nhttp://www.server-memo.net/tips/crontab.html\n\n\u8868\u793a\n\n```\ncrontab -l\nno crontab for root\n```\n\n\u306a\u3093\u306e\u3053\u3063\u3061\u3083\u3002\n\n```\ncrontab -e\nno crontab for root - using an empty one\n\nSelect an editor.  To change later, run 'select-editor'.\n  1. /bin/ed\n  2. /bin/nano        <---- easiest\n  3. /usr/bin/vim.tiny\n```\n\n\u30a8\u30c7\u30a3\u30bf\u30fc\u3092\u9078\u3079\u3068\u3044\u3046\u3053\u3068\u304b\u3002 nano \u304c\u4e00\u756a\u7c21\u5358\u3001\u3068\u30b3\u30e1\u30f3\u30c8\u3082\u4ed8\u3044\u3066\u308b\u306a\u3002\n\n```\n# Edit this file to introduce tasks to be run by cron.\n#\n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n#\n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').#\n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n#\n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n#\n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n#\n# For more information see the manual pages of crontab(5) and cron(8)\n#\n# m h  dom mon dow   command\n```\n\n\u4f55\u304b\u30d5\u30a1\u30a4\u30eb\u304c\u958b\u304b\u308c\u305f\u3002\n\n10\u5206\u6bce\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u66f8\u304d\u65b9\n\n```\n*/10  *  *  *  *  \u3053\u3053\u306b\u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304f\n```\n\n\u307f\u305f\u3044\u306a\u3093\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u8d77\u52d5\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u8d77\u52d5\u3059\u308b\u3001\u3068\u3044\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u7d44\u307f\u305f\u3044\u304c\u2026\u2026\u3002\n\n# pgrep\n\n\u307e\u305a ps \u3067\u30d7\u30ed\u30bb\u30b9\u3092\u4e00\u89a7\u3057\u3066\u307f\u308b\u3002\n\n```\nps\n  PID TTY          TIME CMD\n24330 pts/2    00:00:00 php\n24349 pts/2    00:00:00 sudo\n24350 pts/2    00:00:00 su\n24351 pts/2    00:00:00 bash\n25814 pts/2    00:00:00 ps\n```\n\n\u6b21\u306b pgrep \u3067\u3001\u30b3\u30de\u30f3\u30c9\u540d\u3092\u4e00\u81f4\u691c\u7d22\u3059\u308b\u3002\n\n```\npgrep -l su\n12129 su\n24349 sudo\n24350 su\n```\n\n\u3053\u308c\u3060\u3068 PHP \u3092\u8d77\u52d5\u3059\u308b\u3068 php \u306b\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\nbash \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3057\u3066\u3082 bash \u306b\u306a\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3002\n\u30d7\u30ed\u30b0\u30e9\u30e0\u540d\u3092\u8abf\u3079\u3089\u308c\u306a\u3044\u3082\u306e\u304b\u3002\n\n\u3060\u3063\u305f\u3089 jobs \u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\uff1f \u30b3\u30de\u30f3\u30c9\u540d\u3060\u3051\u53d6\u308c\u308c\u3070\u3044\u3044\u304b\u3068\u601d\u3063\u305f\u304c\u3001\u305d\u3046\u3044\u3046\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u306a\u3044\u3088\u3046\u3060\u3002\n\n```\njobs -r\n[1]+  Running                 nohup /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n```\n\n\u3053\u3053\u3067\u982d30\u6587\u5b57\u3092\u524a\u308a\u53d6\u308c\u3070\u3001\u6b8b\u308a\u306f\u30b3\u30de\u30f3\u30c9\u540d\u306b\u306a\u308b\u3093\u3058\u3083\u306a\u3044\u304b\uff1f\n\n\u300ccut \u6587\u5b57\u5217\u3092\u5207\u308a\u51fa\u3059\u300d\u3000\uff08UNIX\u5165\u9580\uff09\nhttp://www.k4.dion.ne.jp/~mms/unix/linux_com/cut.html\n\n```\n# jobs -r | cut -c31-\nnohup /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n```\n\n\u3088\u3057\u3002\n\n\u3053\u306e\u6587\u5b57\u5217\u306b\u4e00\u81f4\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u3001\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u3053\u3068\u306b\u3059\u308b\u3002\n\u305d\u308c\u3092\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u66f8\u304f\u306a\u3089\u2026\u2026\u3002\n\n\u5c11\u3057\u305a\u3064\u66f8\u3044\u3066\u3044\u3053\u3046\u3002PHP\u3068\u4f3c\u3066\u3044\u3066\u5168\u7136\u9055\u3046\u304b\u3089\u9593\u9055\u3048\u3084\u3059\u3044\u3002\n\n```\n# nano tamesi9.sh\n```\n\ntamesi9.sh\n\n```\n#!/bin/bash\nCMD = $(jobs -r | cut -c31-)\necho \"(^q^)${CMD}\"\n```\n\n```\n# ls -an\n\u7565\n-rw-r--r-- 1 0 0   61 Mar  8 00:19 tamesi9.sh\n# chmod 755 tamesi9.sh\n# ls -an\n\u7565\n-rwxr-xr-x 1 0 0   61 Mar  8 00:19 tamesi9.sh\n# ./tamesi9.sh\n./tamesi9.sh: line 2: CMD: command not found\n(^q^)\n```\n\n\u3046\u30fc\u3080\u3002\n\n\u300c\u30b7\u30a7\u30eb\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u306e\u57fa\u790e\u77e5\u8b58\u300d\u3000\uff08Shinta's WEBSITE\uff09\nhttp://www.gadgety.net/shin/tips/unix/shell.html\n\n\u30a4\u30b3\u30fc\u30eb\u306e\u4e21\u7aef\u306b\u3000\u30b9\u30da\u30fc\u30b9\u3092\u5165\u308c\u3066\u306f\u3044\u3051\u306a\u3044\u307f\u305f\u3044\u3060\u3002\n\ntamesi9.sh\n\n```\n#!/bin/bash\nCMD=$(jobs -r | cut -c31-)\necho \"(^q^)${CMD}\"\n```\n\n```\n./tamesi9.sh\n(^q^)\n```\n\n\u30a8\u30e9\u30fc\u306f\u7121\u304b\u3063\u305f\u304c\u3001\u671f\u5f85\u3057\u305f\u7d50\u679c\u3082\u7121\u304b\u3063\u305f\u3002\n\ntamesi9b1.sh\n\n```\n#!/bin/bash\necho $(jobs -r | cut -c31-)\n```\n\n\u884c\u3082\u51fa\u3066\u3053\u306a\u304f\u306a\u3063\u305f\u3002\n\ntamesi9b2.sh\n\n```\n#!/bin/bash\njobs -r | cut -c31- | echo\n```\n\n\u3053\u308c\u3082\u3001\u884c\u304c\u51fa\u3066\u3053\u306a\u3044\u3002\n\ntamesi9b3.sh\n\n```\n#!/bin/bash\njobs | echo\n```\n\n\u3053\u308c\u3082\u3001\u884c\u304c\u51fa\u3066\u3053\u306a\u3044\u3002\u3053\u3093\u306a\u66f8\u304d\u65b9\u7121\u3044\u306e\u304b\u3002\n\n\u300cbash \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5165\u9580 -\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u3044\u308d\u306f-\u300d \uff08UNIX & Linux \u30b3\u30de\u30f3\u30c9\u30fb\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u300d\uff09\nhttp://shellscript.sunone.me/tutorial.html\n\n\u300c\u30b7\u30a7\u30eb\u306e\u5909\u6570\u306b\u6163\u308c\u308b\u300d \uff08@IT\uff09\nhttp://www.atmarkit.co.jp/ait/articles/0010/19/news003.html\n\n\u300cLinux\uff1a\u51fa\u529b\u7d50\u679c\u3084\u30c6\u30ad\u30b9\u30c8\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u3059\u65b9\u6cd5\u300d \uff08raining\uff09\nhttp://raining.bear-life.com/linux/%E5%87%BA%E5%8A%9B%E7%B5%90%E6%9E%9C%E3%82%84%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%82%92%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AB%E6%9B%B8%E3%81%8D%E5%87%BA%E3%81%99%E6%96%B9%E6%B3%95\n\n\ntamesi9b4.sh\n\n```\n#!/bin/bash\nls | cut -c2- > tmp1.txt\n```\n\n```\n# nano tmp1.txt\noop8.sh\namesi9b1.sh\namesi9b2.sh\namesi9b3.sh\namesi9b4.sh\namesi9.sh\nmp1.txt\n```\n\n\u3053\u306e\u66f8\u304d\u65b9\u3067\u3044\u3051\u308b\u306e\u304b\u3002\n\ntamesi9b5.sh\n\n```\n#!/bin/bash\njobs -r | cut -c31- > tmp1.txt\n```\n\n```\n# chmod 755 tamesi9b5.sh\n# ./tamesi9b5.sh\n# nano tmp1.txt\n```\n\n\u3060\u3081\u3002\n\ntamesi9b5.sh\n\n```\n#!/bin/bash\njobs -r > tmp1.txt\ncut -c31- tmp1.txt > tmp1.txt\n```\n\n\u3060\u3081\u3002\n\ntamesi9b5.sh\n\n```\n#!/bin/bash\njobs -r > tmp1.txt\n# cut -c31- tmp1.txt > tmp1.txt\n```\n\n\u3060\u3081\u3002\n\njobs -r \u306f\u51fa\u529b\u3067\u304d\u306a\u3044\u306e\u304b\uff1f\n\n## jobs -r\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3067\u306f jobs -r \u304c\u52b9\u304f\u304c\u3001\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u306b\u66f8\u304f\u3068 \u4f55\u3082\u51fa\u529b\u3057\u306a\u3044\u3088\u3046\u3060\u3002\n\u4f55\u304c\u9055\u3046\u306e\u304b\u5206\u304b\u3089\u306a\u3044\u3002\njobs > tmp1.txt \u3067\u3082\u30c0\u30e1\u3067\u3001 echo \"abc\" > tmp1.txt \u306a\u3089\u30aa\u30c3\u30b1\u30fc\u306e\u3088\u3046\u3060\u3002\n\n\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u3067\u306f jobs \u306f\u4f7f\u3048\u306a\u3044\u306e\u304b\u3002\n\n# \u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u306f\u51fa\u529b\u3067\u304d\u308b\u304b\n\n\u5148\u306b PHP \u306e\u65b9\u3067\u3001\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3057\u3088\u3046\u3002\n\n```\n# nano loop10.php\n```\n\n```\n<?php\n// \u74b0\u5883\u8a2d\u5b9a\ndate_default_timezone_set('Asia/Tokyo');\n\n// \u8a2d\u5b9a\n$file = 'date.txt';\n\n// \u73fe\u5728\u6642\u523b\u3092\u30d5\u30a1\u30a4\u30eb\u3078\u66f8\u51fa\u3057\n$today = date(\"Y-m-d H:i:s\");\nfile_put_contents( $file, $today );\n```\n\n```\n# chmod 747 loop10.php\n# php loop10.php\n# nano date.txt\n2017-03-08 01:30:20\n```\n\n\u65e5\u4ed8\u306f\u51fa\u529b\u3067\u304d\u305f\u3002\u3057\u304b\u3057\u30d0\u30c3\u30b7\u30e5\u3067\u3053\u306e\u65e5\u4ed8\u3092\u8aad\u8fbc\u3093\u3060\u308a\u3001\u65e5\u4ed8\u8a08\u7b97\u3057\u305f\u308a\u3067\u304d\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n# \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089 PHP \u3092\u8d77\u52d5\u3067\u304d\u308b\u304b\uff1f\n\nbash_receive\u3001php_receive \u3068\u3044\u3063\u305f\u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u3092\u3001\nbash_service\u3001php_service \u3068\u3044\u3063\u305f\u30d5\u30a9\u30eb\u30c0\u30fc\u540d\u306b\u5909\u66f4\u3059\u308b\u3002\n\n```\n# mv bash_receive bash_service\n# mv php_receive php_service\n```\n\n```\n# nano kicker_dequeueBroker.sh\n```\n\nkicker_dequeueBroker.sh\n\n```\n#!/bin/bash\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php > /home/\u2605user/shogi/php_log/dequeueBroker.out.log 2> /home/\u2605user/shogi/php_log/dequeueBroker.err.log < /dev/null &\n```\n\n\u3053\u308c\u306f\u304a\u3044\u3068\u3044\u3066\u3001\u6b21\u306f PHP \u306e\u65b9\u3002\n\n```\n# cp loop6.php dequeueBroker.php\n```\n\n\u3053\u308c\u3067\u3088\u3057\u3002\u6b21\u3001cron \u306e\u8a2d\u5b9a\u3002\n\n```\ncrontab -e\n```\n\n```\n55  *  *  *  *  /home/\u2605user/shogi/bash_service/kicker_dequeueBroker.sh\n```\n\n**\u3042\u308c\uff1f** \u76f4\u63a5 PHP \u8e74\u3063\u305f\u3089\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u306e\u304b\uff1f \u3059\u308b\u3068\u30b3\u30de\u30f3\u30c9\u304c\u9577\u304f\u306a\u308b\u306e\u304b\u3002\u3058\u3083\u3042\u3053\u308c\u3067\u3044\u3044\u304b\u3002\n\n\u3053\u308c\u3067 \u6bce\u56de\u300155\u5206 \u306b\u5b9f\u884c\u3055\u308c\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\n\u300ccrontab\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u5f8c\u306e\u53cd\u6620\u300d \uff08U\u5b57\u8def\uff09\nhttp://blog.livedoor.jp/u_26/archives/1819139.html\n\n# \u3057\u304f\u307f\n\u3053\u308c\u3067\u4eee\u306b\u52d5\u304f\u306a\u3089\u3001http://\u2605.\u2605.\u2605.\u2605/tamesi5.php \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\u306b\u6587\u5b57\u304c\u683c\u7d0d\u3055\u308c\u3066\u3001dequeueBroker.php \u304c\u305d\u308c\u3092\u53d6\u5f97\u3057\u3001dequeueBroker.out.log \u306b\u66f8\u304d\u51fa\u3059\u3001\u3068\u3044\u3063\u305f\u6d41\u308c\u306b\u306a\u308b\u306f\u305a\u3002\n\n\u305d\u3057\u3066\u3000\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3082\u52d5\u3044\u3066\u3044\u308b\u3068\u3044\u3046\u524d\u63d0\u3060\u3002\n\ncron \u304c\u52d5\u304b\u3057\u305f job \u3092\u898b\u308b\u65b9\u6cd5\u306f\u3042\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u3088\u304f\u4f7f\u3046\u30b3\u30de\u30f3\u30c9\u3092\u3001\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3057\u3066\u304a\u304f\u3002\n\nloop6.sh\n\n```\n#!/bin/bash\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\n```\n\n```\n# chmod 755 loop6.sh\n```\n\n# \u30b5\u30fc\u30d0\u30fc\u306e\u6642\u523b\u306f\u78ba\u8a8d\u3067\u304d\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u300cLinux\u306eUbuntu\u3067\u65e5\u4ed8\u3084\u6642\u523b\u3092\u8868\u793a\u30fb\u8a2d\u5b9a\u3059\u308b\u30b3\u30de\u30f3\u30c9\u300d \uff08MiuxMiu\uff09\nhttp://www.miuxmiu.com/archives/2011/03/19/linux_ubuntu_date_time_view_settings_command.html\n\n```\ndate\nWed Mar  8 02:07:39 JST 2017\n```\n\n\u4eca\u30012017-03-08 \u306e 2\u66427\u5206\u3060\u304b\u3089\u3001\n\u30b5\u30fc\u30d0\u30fc\u6642\u523b\u306f 2017\u5e74\u306eMar\u67088\u65e5\u306e 2\u66427\u520639\u79d2\u3000\u306a\u3089\u5408\u3063\u3066\u308b\u304b\u3002\n\ncron \u5b9f\u884c\u3055\u308c\u306a\u304b\u3063\u305f\u306a\u3002\n\n# cron \u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u3092\u3069\u3046\u3084\u3063\u3066\u78ba\u8a8d\u3059\u308b\u306e\u304b\uff1f\n\n\u300ccron\u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u306e\u78ba\u8a8d\u300d \uff08MAKIEDAN MEMO BLOG\uff09\nhttp://makiedan.hatenablog.com/entry/20140404/1396600750\n\n```\n# /etc/rc.d/init.d/crond status\n-su: /etc/rc.d/init.d/crond: No such file or directory\n```\n\nrc.d \u306f\u7121\u304f\u3066 rc0.d \uff5e rc6.d \u306a\u3089\u3042\u308b\u3093\u3060\u304c\u3001\u56f0\u3063\u305f\u3082\u3093\u3060\u3002\n\n\u300ccrontab\u306e\u4f7f\u3044\u65b9\u300d \uff08Saba note\uff09\nhttp://saba.omnioo.com/note/1233/crontab%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9/\n\ncron -l \u3060\u3068\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u3066\u304d\u3066\u3057\u307e\u3046\u3002\n\n```\n# /etc/init.d/cron staus\n * Usage: /etc/init.d/cron {start|stop|status|restart|reload|force-reload}\n```\n\n\u52d5\u3044\u3066\u306a\u3044\u306e\u304b\u306a\u3001\u3053\u308c\u3002\n\n# cron \u3092\u8d77\u52d5\u3055\u305b\u308b\n\n```\n# /etc/init.d/cron start\n[ ok ] Starting cron (via systemctl): cron.service.\n```\n\n\u4eca\u52d5\u3044\u305f\u3093\u3060\u308d\u3046\u304b\uff1f\n\n# \u3082\u3063\u3068\u7c21\u5358\u306b\n\n##\u30b5\u30fc\u30d0\u30fc\u6642\u523b\u3092\u3001\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080\u30b3\u30de\u30f3\u30c9\u306f\uff1f\n\n```\ndate > tmp3\n```\n\ntmp3\n\n```\nWed Mar  8 02:38:39 JST 2017\n```\n\n##\u30b5\u30fc\u30d0\u30fc\u6642\u523b\u3092\u3001\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306f\uff1f\n\ntamesi12.sh\n\n```\n#!/bin/bash\ndate > tmp12\n```\n\n```\nWed Mar  8 02:52:13 JST 2017\n```\n\n\u3053\u308c\u306f\u30aa\u30c3\u30b1\u30fc\u3060\u3002\n\n## \u3058\u3083\u3042\u3001\u3053\u308c\u3092 1 \u5206\u6bce\u306b\u53e9\u304f cron \u30b8\u30e7\u30d6\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3060\u308d\u3046\u304b\uff1f\n\n```\ncrontab -e\n```\n\n```\n# Edit this file to introduce tasks to be run by cron.\n#\n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n#\n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').#\n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n#\n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n#\n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n#\n# For more information see the manual pages of crontab(5) and cron(8)\n#\n# m h  dom mon dow   command\n0-59/1 * * * * /home/\u2605usr/shogi/php_service/tamesi12.sh\n```\n\n\u3053\u308c\u3067\u3069\u3046\u304b\uff1f\n\n```\ncrontab: installing new crontab\n```\n\n\u306a\u3093\u304b\u521d\u3081\u3066\u898b\u308b\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u305f\u3002\u3055\u3063\u304d /etc/init.d/cron \u3092 start \u3055\u305b\u305f\u3053\u3068\u3068\u95a2\u4fc2\u3042\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\ncron \u306b\u306f\u3069\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u4e0e\u3048\u308c\u3070\u3044\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u5b9f\u884c\u3059\u308b\u30d5\u30a1\u30a4\u30eb\n\n```\n-rwxr-xr-x 1 0 0   26 Mar  8 02:51 tamesi12.sh\n```\n\n\u66f8\u304d\u51fa\u3057\u5148\u30d5\u30a1\u30a4\u30eb\n\n```\n# chmod 666 tmp12\n```\n\n\u305c\u3093\u305c\u3093\u3000\u66f4\u65b0\u6642\u523b\u304c\u3000\u66f4\u65b0\u3055\u308c\u308b\u69d8\u5b50\u304c\u306a\u3044\u3002\n\n## cron \u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3088\u3046\n\n```\n# cron status\ncron: can't lock /var/run/crond.pid, otherpid may be 507: Resource temporarily unavailable\n```\n\n\u300ccron deamon not working\u300d \uff08phusion/baseimage-docker\uff09\nhttps://github.com/phusion/baseimage-docker/issues/115\n\n```\n# cat /etc/crontab\n```\n\n```\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user  command\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )\n#\n```\n\n# ubuntu \u306e cron \u306f\u3001\u4ed6\u306e cron \u3068\u9055\u3046\u3093\u3058\u3083\u306a\u3044\u304b\uff1f\n\n\u300ccrontab\u304c\u4e0a\u624b\u304f\u52d5\u304b\u306a\u3044\u6642\u306e\u30d2\u30f3\u30c8\u300d \uff08\u30af\u30ea\u30a8\u30a4\u30bf\u30fc\u898b\u7fd2\u3044\u306e\u843d\u66f8\u304d\u30ce\u30fc\u30c8\uff09\nhttp://creatornote.blog87.fc2.com/blog-entry-24.html\n\n```\n# less /var/log/syslog | grep CRON\n\uff5e\u7565\uff5e\nMar  8 03:26:01 \u2605\u7565 CRON[30356]: (root) CMD (/home/\u2605user/shogi/php_service/tamesi12.                                                sh)\n```\n\n**\u3046\u3093\uff1f** cron \u306f\u52d5\u3044\u3066\u308b\u3093\u3058\u3083\u306a\u3044\u304b\u3001root\u30e6\u30fc\u30b6\u30fc\u3067\uff1f\n\n\u3067\u3082\u3000\u30d5\u30a1\u30a4\u30eb\u66f8\u304d\u8fbc\u307f\u306f\u3067\u304d\u3066\u306a\u3044\u3002\n\ncron \u306f\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u53e9\u3044\u3066\u3044\u3066\u3001\u305d\u308c\u3067 \u30a8\u30e9\u30fc\u3068\u304b\u30ed\u30b0\u306f\u7121\u3044\u306e\u304b\uff1f\n\n\u300ccron\u304c\u6a5f\u80fd\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\u300d \uff08Ubuntu\u65e5\u672c\u8a9e\u30d5\u30a9\u30fc\u30e9\u30e0\uff09\nhttps://forums.ubuntulinux.jp/viewtopic.php?id=6926\n\n## cron\u3067 \u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u52d5\u304b\u3059\u3068\u304d\u306e\u66f8\u304d\u65b9\u306f\u3001\u30b3\u30de\u30f3\u30c9\u3092\u66f8\u304f\u3068\u3053\u308d\u306e **\u982d\u306bbash** \u3092\u4ed8\u3051\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n```\n0-59/2 * * * * /home/\u2605user/shogi/php_service/tamesi12.sh\n```\n\n\u3053\u308c\u3067\uff12\u5206\u304a\u304d\u306b\u518d\u5ea6\u30c1\u30e3\u30ec\u30f3\u30b8\u3002\n\n\u5909\u5316\u306a\u3057\u3002\n\n\u8a18\u4e8b\u306b\u3042\u308b\u300ccron\u306e\u30e6\u30fc\u30b6\u30fc\u306froot\u300d\u3068\u3044\u3046\u8868\u73fe\u306f\u3000\u4f55\u3092\u6307\u3057\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\n# man cron\n\n```\nman cron\n```\n\n\u3067\u8aac\u660e\u66f8\u304d\u304c\u51fa\u3066\u304d\u305f\u3002\n\n## /etc/init.d\n\n/etc/init.d\n\n\u304b\u3069\u3053\u304b\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n```\n# ls -an\ntotal 28\ndrwxr-xr-x   2 0 0  4096 Mar  8 03:25 .\ndrwxr-xr-x 102 0 0 12288 Mar  8 03:54 ..\n-rw-r--r--   1 0 0   670 Mar  2  2016 php\n-rw-r--r--   1 0 0   102 Feb  9  2013 .placeholder\n-rw-r--r--   1 0 0   190 Mar  4 21:13 popularity-contest\n```\n\n\u3068\u304f\u306b\u4f55\u306b\u3082\u306a\u3044\u3002\n\n## /etc/crontab\n\n/etc/crontab\n\n\u3068\u3044\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u306e\u304b\uff1f\n\n/etc/crontab\n\n```\n# /etc/crontab: system-wide crontab\n# Unlike any other crontab you don't have to run the `crontab'\n# command to install the new version when you edit this file\n# and files in /etc/cron.d. These files also have username fields,\n# that none of the other crontabs do.\n\nSHELL=/bin/sh\nPATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin\n\n# m h dom mon dow user  command\n17 *    * * *   root    cd / && run-parts --report /etc/cron.hourly\n25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily )\n47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.weekly )\n52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.monthly )\n#\n```\n\n\u6642\u3001\u65e5\u3001\u6708\u3001\u9031\u3000\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\n# /etc/environment\n\n/etc/environment\n\n```\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games\"\n```\n\nWindows\u3067\u8a00\u3046\u3068\u3053\u308d\u306e\u74b0\u5883\u5909\u6570\u3067\u3082\u5165\u3063\u3066\u308b\u3093\u3060\u308d\u3046\u304b\u3002\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3078\u306e\u30d1\u30b9\u304c\u901a\u3057\u3066\u3042\u308b\u611f\u3058\u3002\n\n\u305d\u306e\u884c\u306e\u4e0a\u306b\u3001\uff11\u884c\u66f8\u304d\u8db3\u3057\u3066\u307f\u308b\u3002\n\n```\nSHELL=/bin/bash\n```\n\n\u305d\u306e\u3042\u3068\u306f\u4f55\u3092\u30ea\u30b9\u30bf\u30fc\u30c8\u3055\u305b\u305f\u3089\u3044\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\n\n```\n/etc/init.d/cron status\n\u25cf cron.service - Regular background program processing daemon\n   Loaded: loaded (/lib/systemd/system/cron.service; enabled; vendor preset: enabled)\n   Active: active (running) since Sat 2017-03-04 21:18:23 JST; 3 days ago\n     Docs: man:cron(8)\n Main PID: 507 (cron)\n   CGroup: /system.slice/cron.service\n           \u2514\u2500507 /usr/sbin/cron -f\n\nMar 08 03:56:01 tk2-217-18401 CRON[31079]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 03:56:01 tk2-217-18401 CRON[31078]: pam_unix(cron:session): session closed for user root\nMar 08 03:58:01 tk2-217-18401 CRON[31116]: pam_unix(cron:session): session opened for user root by (uid=0)\nMar 08 03:58:01 tk2-217-18401 CRON[31117]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 03:58:01 tk2-217-18401 CRON[31116]: pam_unix(cron:session): session closed for user root\nMar 08 04:00:01 tk2-217-18401 CRON[31155]: pam_unix(cron:session): session opened for user root by (uid=0)\nMar 08 04:00:01 tk2-217-18401 CRON[31156]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 04:02:01 tk2-217-18401 CRON[31192]: pam_unix(cron:session): session opened for user root by (uid=0)\nMar 08 04:02:01 tk2-217-18401 CRON[31193]: (root) CMD (bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar 08 04:02:01 tk2-217-18401 CRON[31192]: pam_unix(cron:session): session closed for user root\n```\n\n\u304a\u3084\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u304c\u898b\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u3060\u3063\u305f\u3089\u3000\u6628\u65e5\u306f\u52d5\u3044\u3066\u306a\u304b\u3063\u305f\u3093\u3060\u3002\n\n```\n# /etc/init.d/cron restart\n[ ok ] Restarting cron (via systemctl): cron.service.\n```\n\n\u52dd\u624b\u306b\u30ea\u30b9\u30bf\u30fc\u30c8\u3055\u305b\u305f\u3002\n\n# cron \u306e\u30ed\u30b0\n\n```\n/var/log/syslog\n```\n\n\u3089\u3057\u3044\u3093\u3060\u304c\u3002**\u304a\u3084\uff1f\u3000\u4eca\u898b\u306b\u3044\u304f\u3068\u3042\u308b\u3002**\n\n```\nMar  7 06:25:01 tk2-217-18401 CRON[5015]: (root) CMD (test -x /usr/sbin/anacron || ( cd / && run-parts --report /etc/cron.daily ))\n```\n\nkernel \u304c\u5927\u91cf\u306b\u30ed\u30b0\u3092\u5410\u3044\u3066\u3044\u308b\u304c\u3001CRON \u306f\u30a8\u30e9\u30fc\u3063\u307d\u3044\u306e\u306f\u5410\u3044\u3066\u3044\u306a\u3044\u3002\n\n\u3069\u3046\u3057\u305f\u3082\u306e\u304b\u3002\n\n# cron \u306e\u30eb\u30fc\u30c8\u6a29\u9650\n\n\u300cUbuntu cron crontab \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 \u8a2d\u5b9a\u300d \uff08\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3068\u304b\u30d0\u30a4\u30af\u3068\u304b\u3002\uff09\nhttp://esoz.blog.fc2.com/blog-entry-40.html\n\n\u30eb\u30fc\u30c8\u6a29\u9650\u3067\u8a2d\u5b9a\u3059\u308b\u306b\u306f\n\n```\nsudo crontab -e\n```\n\n\u3068\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u304b\u3002\u81ea\u5206\u306ecron\u306e\u8a2d\u5b9a\u3060\u3051\u3044\u3058\u3063\u3066\u3066\u3082\u30c0\u30e1\u304b\u3002\n\n```\nsudo crontab -e\n```\n\n```\n# Edit this file to introduce tasks to be run by cron.\n#\n# Each task to run has to be defined through a single line\n# indicating with different fields when the task will be run\n# and what command to run for the task\n#\n# To define the time you can provide concrete values for\n# minute (m), hour (h), day of month (dom), month (mon),\n# and day of week (dow) or use '*' in these fields (for 'any').#\n# Notice that tasks will be started based on the cron's system\n# daemon's notion of time and timezones.\n#\n# Output of the crontab jobs (including errors) is sent through\n# email to the user the crontab file belongs to (unless redirected).\n#\n# For example, you can run a backup of all your user accounts\n# at 5 a.m every week with:\n# 0 5 * * 1 tar -zcf /var/backups/home.tgz /home/\n#\n# For more information see the manual pages of crontab(5) and cron(8)\n#\n# m h  dom mon dow   command\n0-59/2 * * * * bash /home/\u2605user/shogi/php_service/tamesi12.sh\n```\n\nbash \u3092\u7d76\u5bfe\u30d1\u30b9\u306b\u3057\u3066\u307f\u308b\u304b\uff1f\n```\n0-59/2 * * * * /bin/bash /home/\u2605user/shogi/php_service/tamesi12.sh\n```\n\n```\ntail /var/log/syslog\n```\n\n\u3068\u66f8\u304f\u3068\u3001\u30ed\u30b0\u306e\u6700\u8fd1\u306e\u6570\u4ef6\u3092\u53d6\u308c\u308b\u3088\u3046\u3060\u304c\u3001kernel \u3070\u3063\u304b\u308a\u3060\u3002\n\n\n> \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u5b9f\u884c\u6642\u306e\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u60f3\u5b9a\u3068\u7570\u306a\u308b\u3002\n> \u3000\u2192\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5192\u982d\u4ed8\u8fd1\u306b\u300ccd /hoge/hoge\u300d\u3092\u7d76\u5bfe\u30d1\u30b9\u3067\u66f8\u304d\u8fbc\u3093\u3067\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u300c\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3068\u304b\u30d0\u30a4\u30af\u3068\u304b\u3002\u300d \uff08Ubuntu cron crontab \u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8 \u8a2d\u5b9a\uff09\nhttp://esoz.blog.fc2.com/blog-entry-40.html\n\n\u306a\u3093\u306e\u3053\u3068\u3060\u308d\u3046\u304b\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306f\u3000\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u8a18\u8ff0\u3057\u3066\u304a\u304f\u3068\u3044\u3044\u306e\u304b\u3002\n\n## \u306a\u3093\u3067 PHP\u7528\u306e\u30d5\u30a9\u30eb\u30c0\u30fc\u306b .sh \u3092\u5165\u308c\u3066\u308b\u3093\u3060\u3002\n\n\u79fb\u52d5\u3002\n\n```\nmv tamesi12.sh ../bash_service/tamesi12.sh\nmv tmp12 ../bash_service/tmp12\n```\n\n\u4fee\u6b63\n\n```\nsudo crontab -e\n```\n\n```\n0-59/2 * * * * /bin/bash /home/\u2605user/shogi/bash_service/tamesi12.sh\n```\n\n```\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 04:26:01 tk2-217-18401 CRON[31790]: (root) CMD (/bin/bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar  8 04:28:01 tk2-217-18401 CRON[31844]: (root) CMD (/bin/bash /home/\u2605user/shogi/php_service/tamesi12.sh)\nMar  8 04:28:01 tk2-217-18401 CRON[31843]: (CRON) info (No MTA installed, discarding output)\nMar  8 04:30:01 tk2-217-18401 CRON[31881]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi12.sh)\nMar  8 04:32:01 tk2-217-18401 CRON[31929]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi12.sh)\n```\n\n\u30d5\u30a9\u30eb\u30c0\u30fc\u306e\u79fb\u52d5\u306f\u53cd\u6620\u3055\u308c\u305f\u3088\u3046\u3060\u304c\u3002\n\n# \u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n\ntamesi12.sh\n\n```\n#!/bin/bash\ndate > tmp12\n```\n\n\u5b9f\u884c\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u3042\u308b\u5834\u6240\u3092\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3057\u3066\u304f\u308c\u308b\u308f\u3051\u3058\u3083\u306a\u3044\u306e\u304b\u3002\n\u3058\u3083\u3042\u3001\u8ffd\u8a18\u3002\n\ntamesi12.sh\n\n```\n#!/bin/bash\ncd /home/\u2605user/shogi/bash_service\ndate > tmp12\n```\n\n```\n# ls -an\n\u7565\n-rw-rw-rw- 1 0 0   29 Mar  8 04:38 tmp12\n```\n\n\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304c\u66f4\u65b0\u3055\u308c\u3066\u3044\u308b\u3002\u30de\u30b8\u304b\u3002\n\n```\n# nano tmp12\nWed Mar  8 04:38:01 JST 2017\n```\n\n**bash\u306e\u30b7\u30a7\u30eb\u30fb\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u306f\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u66f8\u304b\u306a\u3044\u3068\u3060\u3081\u304b\uff5e\uff08\uff3e\uff5e\uff3e\uff09**\n\n# \u3058\u3083\u3042\u6b21\u306f cron \u3092\u4f7f\u3063\u3066 nohup \u304b\u3064 \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u5b9f\u884c\n\nloop13.sh\n\n```\n#!/bin/bash\ncd /home/\u2605user/shogi/bash_service\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php_log/loop6.err.log < /dev/null &\necho \"(^q^)CRON: Start infinity loop!\"\n```\n\n\u3042\u308c\u3001\u3053\u308c\u6bce\u5206\u5b9f\u884c\u3055\u308c\u305f\u3089\u3001\u7121\u9650\u30eb\u30fc\u30d7\u306e\u30d7\u30ed\u30bb\u30b9\u5927\u91cf\u751f\u7523\u3055\u308c\u3066\u3044\u3084\u3060\u306a\u2026\u2026\u3002\n\uff11\u56de\u3060\u3051\u5e38\u99d0\u3057\u3066\u304f\u308c\u305f\u3089\u3044\u3044\u3002\n\n```\n# sudo crontab -e\n```\n\n```\n3 * * * * /bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh\n```\n\n\u3053\u308c\u3067 3\u5206 \u306b\u306a\u3063\u305f\u3089\n\n```\nless /var/log/syslog | grep CRON\n```\n\n\u3057\u3088\u3046\u3002\n\n```\nMar  8 05:03:01 tk2-217-18401 CRON[32719]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n```\n\n\u53e9\u3044\u3066\u306f\u304f\u308c\u305f\u3093\u3060\u304c\u3001\u3046\u307e\u304f\u5b9f\u884c\u3055\u308c\u305f\u306e\u304b\u3069\u3046\u304b\u3001\u3069\u3046\u3084\u3063\u3066\u78ba\u8a8d\u3057\u3088\u3046\u3002 echo \u306f\u51fa\u529b\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\n\u304a\u3084\uff1f\n\n```\n/home/\u2605user/shogi/php_log# ls -l\ntotal 8\n-rw-rw-rw- 1 root root 588 Mar  8 05:47 loop6.err.log\n-rw-rw-rw- 1 root root 407 Mar  8 02:12 loop6.out.log\n```\n\nloop6.err.log \u306b\u65e5\u4ed8\u306e\u66f4\u65b0\u304c\u3042\u308b\u3002\n\n```\nPHP Fatal error:  Uncaught Error: Class 'PhpAmqpLib\\Message\\AMQPMessage' not found in /home/\u2605user/shogi/php_receive/vendor/php-amqplib/php-amqplib/PhpAmqpLib/Channel/AbstractChannel.php:264\nStack trace:\n#0 /home/\u2605user/shogi/php_receive/vendor/php-amqplib/php-amqplib/PhpAmqpLib/Channel/AbstractChannel.php(384): PhpAmqpLib\\Channel\\AbstractChannel->wait_content()\n#1 /home/\u2605user/shogi/php_receive/loop6.php(44): PhpAmqpLib\\Channel\\AbstractChannel->wait()\n#2 {main}\n  thrown in /home/\u2605user/shogi/php_receive/vendor/php-amqplib/php-amqplib/PhpAmqpLib/Channel/AbstractChannel.php on line 264\n```\n\ncomposer.json \u3092\u8abf\u3079\u308b\u304b\u2026\u2026\u3002\n\n```\n\u2605/home/\u2605user/shogi/php_service# composer install\nDo not run Composer as root/super user! See https://getcomposer.org/root for details\nLoading composer repositories with package information\nInstalling dependencies (including require-dev) from lock file\nNothing to install or update\nGenerating autoload files\n\u2605/home/\u2605user/shogi/php_service# composer update\nDo not run Composer as root/super user! See https://getcomposer.org/root for details\nLoading composer repositories with package information\nUpdating dependencies (including require-dev)\nNothing to install or update\nGenerating autoload files\n```\n\n\u66f4\u65b0\u306f\u3067\u304d\u3066\u308b\u3063\u307d\u3044\u3002\n\n**\u3042\u3089\u3063\uff01** \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fb\u30d1\u30b9\u3092\u3088\u304f\u898b\u308b\u3068 php_receive \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u306b\u3044\u3063\u3066\u3044\u308b\u304c\u3001 php_service \u306b\u5909\u3048\u305f\u3093\u3060\u3063\u305f\u3002\u306a\u3093\u3067\u5909\u3048\u308b\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u898b\u306b\u884c\u3063\u3066\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u8abf\u3079\u308b\u304b\u2026\u2026\u3002\n\n# cron \u304c\u5b9f\u884c\u3057\u305f\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u30fb\u30b8\u30e7\u30d6\u3092\u505c\u6b62\u3055\u305b\u308b\u306b\u306f\uff1f\n\n```\nless /var/log/syslog | grep tamesi13\n```\n\n```\nMar  8 05:03:01 tk2-217-18401 CRON[32719]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n```\n\n\u3053\u306e 32719 \u3068\u3044\u3046\u306e\u306f\u30d7\u30ed\u30bb\u30b9ID\u3060\u3063\u305f\u308a\u3059\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\n\u300c\u3010ps\u30fbkill\u3011\u5b9f\u884c\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u8868\u793a\u3068\u5f37\u5236\u7d42\u4e86\u300d \uff08Qiita\uff09\nhttp://qiita.com/shuntaro_tamura/items/4016868bda604baeac3c\n\n```\nps aux\n\u7565\nroot     24330  0.0  1.3 232308 14052 pts/2    S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n```\n\n\u602a\u3057\u3044\u30d7\u30ed\u30bb\u30b9\u306f\u3044\u3063\u3071\u3044\u51fa\u3066\u304d\u305f\u304c\u300132719 \u3068\u3044\u3046\u30d7\u30ed\u30bb\u30b9\u756a\u53f7\u306f\u7121\u3044\u3088\u3046\u3060\u3002\n\n```\nps aux | grep receive\nroot      2560  0.0  0.0  12936   988 pts/2    S+   06:19   0:00 grep --color=auto receive\nroot     20355  0.0  1.3 232308 14064 ?        S    Mar07   0:03 php /home/\u2605user/shogi/php_receive/loop6.php\nroot     22501  0.0  0.1  11248  1364 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     22897  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23422  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23910  0.0  1.3 232308 14052 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n\u2605user    23978  0.0  1.3 232308 14056 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\nroot     24330  0.0  1.3 232308 14052 pts/2    S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n```\n\n\u5168\u90e8 S \u306a\u306e\u3067\u3001\u4e00\u6642\u505c\u6b62\u4e2d\u3060\u304c\u3001\u843d\u3068\u3057\u305f\u3089\u3044\u3044\u3093\u3060\u308d\u3046\u304b\uff1f\n\n```\nkill 24330\n```\n\n```\nps aux | grep receive\nroot      2588  0.0  0.0  12936   988 pts/2    S+   06:20   0:00 grep --color=auto receive\nroot     20355  0.0  1.3 232308 14064 ?        S    Mar07   0:03 php /home/\u2605user/shogi/php_receive/loop6.php\nroot     22501  0.0  0.1  11248  1364 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     22897  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23422  0.0  0.1  11248  1368 ?        S    Mar07   0:00 /bin/bash /home/\u2605user/shogi/bash_receive/loop8.sh\nroot     23910  0.0  1.3 232308 14052 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n\u2605user    23978  0.0  1.3 232308 14056 ?        S    Mar07   0:02 /usr/bin/php /home/\u2605user/shogi/php_receive/loop6.php\n```\n\n\u304a\u3063\u3001\u843d\u3068\u305b\u305f\u3002\u8981\u3089\u306a\u3044\u306e\u5168\u90e8\u843d\u3068\u305d\u3046\u3002\n\n\u843d\u3068\u3057\u305f\u3002\n\n\u6b21\u306f\u307e\u305f cron \u3067\u5b9f\u884c\u3057\u3088\u3046\u3002\n\n```\nsudo crontab -e\n```\n\n```\nless /var/log/syslog | grep CRON\nMar  8 06:28:01 tk2-217-18401 CRON[2889]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n```\n\n\u3088\u3057\u3001\u5b9f\u884c\u3055\u308c\u305f\u3002\nCron \u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u5916\u3057\u3066\u304a\u304f\u3002\n\n```\nps aux | grep receive\n```\n\n\u3044\u306a\u3044\u306a\u3002\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u304b\u3089\u5916\u3059\u3068\u30c0\u30e1\u306a\u306e\u304b\uff1f\n\n```\nps aux\n\u7565\nroot     28496  0.0  1.3 232308 14068 pts/2    S    02:01   0:01 /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php\n```\n\n\u3053\u308c\u304c\u4e00\u6642\u505c\u6b62\u4e2d\u3060\u304c\u3001\u30a8\u30e9\u30fc\u3067\u3082\u51fa\u3066\u3044\u308b\u3093\u3060\u308d\u3046\u304b\uff1f\n\nhttp://\u2605.\u2605.\u2605.\u2605/tamesi5.php \u306b\u6570\u56de\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3000\u30a8\u30f3\u30ad\u30e5\u30fc\u3000\u3057\u3066\u304a\u304f\u3002\n\u30c7\u30ad\u30e5\u30fc\u30fb\u30d6\u30ed\u30fc\u30ab\u30fc\u304c\u7a3c\u50cd\u3057\u3066\u3044\u308c\u3070\u3001\u30ed\u30b0\u306b\u66f8\u304d\u51fa\u3059\u3060\u308d\u3046\u3002\n\n\u540c\u671f\u3057\u3066\u306a\u304f\u3066\u3044\u3044\u306f\u305a\u3060\u3002\n\n\uff14\uff15\u5206\u306b\u5b9f\u884c\u3002\n\n```\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 06:45:01 tk2-217-18401 CRON[3243]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n\n/home/\u2605user/shogi/php_log# ls -l\ntotal 8\n-rw-rw-rw- 1 root root 588 Mar  8 06:04 loop6.err.log\n-rw-rw-rw- 1 root root 407 Mar  8 02:12 loop6.out.log\n```\n\n6:45 \u306b\u30ed\u30b0\u306e\u66f4\u65b0\u306f\u306a\u3044\u3002\n\n```\nps a\n  PID TTY      STAT   TIME COMMAND\n  757 ttyS0    Ss+    0:00 /sbin/agetty --keep-baud 115200 38400 9600 ttyS0 vt220\n  758 tty1     Ss+    0:00 /sbin/agetty --noclear tty1 linux\n 3297 pts/2    R+     0:00 ps a\n24156 pts/2    Ss     0:00 -bash\n24349 pts/2    S      0:00 sudo su -\n24350 pts/2    S      0:00 su -\n24351 pts/2    S      0:02 -su\n28496 pts/2    S      0:01 /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php\n```\n\ndequeueBroker.php \u306f\u505c\u6b62\u3057\u3066\u308b\u304c\u3001\u30a8\u30e9\u30fc\u30ed\u30b0\u306f\u7121\u3044\u3060\u308d\u3046\u304b\uff1f\n\n```\n\u2605/home/\u2605user/shogi/bash_service# nano kicker_dequeueBroker.sh\n#!/bin/bash\nnohup /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php > /home/\u2605user/shogi/php_log/dequeueBroker.out.log 2> /home/\u2605user/shogi/php_log/dequeueBroker.err.log < /dev/null &\n```\n\n\u30a8\u30e9\u30fc\u304c\u3042\u308c\u3070 /home/\u2605user/shogi/php_log/dequeueBroker.err.log \u306b\u51fa\u529b\u3055\u308c\u308b\u306f\u305a\u3060\u304c\u3002\n\n**\u3042\u308c\u3063\uff01\uff01**\n\n```\n\u2605/home/\u2605user/shogi/bash_service# nano kicker_dequeueBroker.sh\n```\n\nkicker_dequeueBroker.sh\n\n```\nnohup /usr/bin/php /home/csg10/shogi/php_service/dequeueBroker.php > /home/csg10/shogi/php_log/dequeueBroker.out.log 2> /home/csg10/shogi/php_log/dequeueBroker.err.log < /dev/null &\n```\n\n**\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u3066\u3044\u306a\u3044\u3058\u3083\u306a\u3044\u304b\u3002**\n\n```\ncd /home/\u2605user/shogi/bash_service\n```\n\n\u3053\u308c\u3092\u66f8\u304d\u8db3\u3057\u3066\u304a\u3053\u3046\u3002\n\n```\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 07:06:01 tk2-217-18401 CRON[3566]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh)\n```\n\n\u52d5\u3044\u305f\u3088\u3046\u3060\u3002\n\u30ed\u30b0\u306f\u6e2c\u308c\u3066\u3044\u306a\u3044\u3002\n\n**\u30ab\u30ec\u30f3\u30c8\u30fb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3001\u60f3\u5b9a\u3057\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6307\u5b9a\u3057\u306a\u3044\u3068\u3002**\n\n```\ncd /home/\u2605user/shogi/php_service\n```\n\n**\u304a\u3084\u3063\uff01** \u5b9f\u884c\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u9593\u9055\u3048\u3066\u306a\u3044\u304b\uff1f\n\n'''\n29 * * * * /bin/bash /home/\u2605user/shogi/bash_service/tamesi13.sh\n'''\n\n\u3058\u3083\u306a\u304f\u3066\u3001\n\n'''\n29 * * * * /bin/bash /home/\u2605user/shogi/bash_service/kicker_dequeueBroker.sh\n'''\n\n\u3060\u308d\u3046\u3002\u306a\u3093\u3067\u898b\u3048\u306a\u3044\u3093\u3060\u308d\u3046\u3002\n\n```\nless /var/log/syslog | grep CRON\n\u7565\nMar  8 07:30:01 tk2-217-18401 CRON[4055]: (root) CMD (/bin/bash /home/\u2605user/shogi/bash_service/kicker_dequeueBroker.sh)\n/home/\u2605user/shogi/php_log# ls -l\ntotal 12\n-rw-r--r-- 1 root root   0 Mar  8 07:30 dequeueBroker.err.log\n-rw-r--r-- 1 root root 358 Mar  8 07:30 dequeueBroker.out.log\n-rw-rw-rw- 1 root root 588 Mar  8 06:04 loop6.err.log\n-rw-rw-rw- 1 root root 407 Mar  8 02:12 loop6.out.log\n```\n\n\u30ed\u30b0\u304c\u3067\u304d\u3066\u3044\u308b\u3002\n\n\u4e2d\u8eab\u306f\u521d\u671f\u72b6\u614b\u306e\u3082\u306e\u3002\u30c7\u30ad\u30e5\u30fc\u3057\u3066\u3044\u308b\u69d8\u5b50\u306f\u306a\u3044\u3002\n\nphp \u3092\u76f4\u63a5\u53e9\u3044\u3066\u307f\u308b\u3002\u305d\u3057\u3066 [Ctrl]+[C] \u3067\u7d42\u4e86\u3002\n\n```\nHow to use\n==========\n\n    Start infinity loop\n    -------------------\n        After ( nohup /usr/bin/php /home/\u2605user/shogi/php_service/loop6.php > /home/\u2605user/shogi/php_log/loop6.out.log 2> /home/\u2605user/shogi/php$\n        By absolute path.\n\n    To finish kill\n    --------------\n        jobs\n        kill %(job number)\n [x] Received Flying Dragon!\n```\n\n1\u884c\u51fa\u529b\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u66f8\u304d\u76f4\u3057\u3066\u307f\u308b\u3002\n\ndequeueBroker.php\n\n```\n<?php\n// \u30c7\u30ad\u30e5\u30fc\n// Cron\u3067\uff11\u56de\u30ad\u30c3\u30af\u3057\u308d\u3060\u305c\u2606\uff08\uff3e\uff5e\uff3e\uff09\n\nrequire_once __DIR__ . '/vendor/autoload.php';\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\n\n// \u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u306e\u524d\u6e96\u5099\u3092\u3059\u308b\u305c\u2606\uff08\uff3e\uff5e\uff3e\uff09\n$connection = new AMQPStreamConnection('localhost', 5672, 'guest', 'guest');\n$channel = $connection->channel();\n$QKey = '1111';\n$channel->queue_declare($QKey, false, false, false, false);\n\n// \u30ad\u30e5\u30fc\u3092\u958b\u3044\u3066\u3057\u307e\u3048\u3070\u3001\u3042\u3068\u306f\u7121\u9650\u30eb\u30fc\u30d7\uff01\n\n// \u30c7\u30ad\u30e5\u30fc\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3059\u308b\u3053\u3068\u3092\u3053\u3053\u306b\u66f8\u304f\n$callback = function($msg) {\n    echo \" [x] Received \", $msg->body, \"\\n\";\n};\n$channel->basic_consume($QKey, '', false, true, false, false, $callback);\n\n// \u7121\u9650\u30eb\u30fc\u30d7\nwhile(count($channel->callbacks))\n{\n    // \u3053\u3053\u3067\u30d6\u30ed\u30c3\u30af\u3057\u306a\u304c\u3089\u30c7\u30ad\u30e5\u30fc\u3059\u308b\n    $channel->wait();\n}\n// \u3053\u3053\u306b\u6765\u306a\u3044\necho \"\u7121\u9650\u30eb\u30fc\u30d7\u3092\u629c\u3051\u305f\uff01\uff1f\u2606\uff08\uff3e\uff5e\uff3e\uff09\uff01\uff1f\";\n// $channel->close();\n// $connection->close();\n```\n\n\u8aac\u660e\u306e\u51fa\u529b\u3092\u7701\u3044\u3066\u3001\u7121\u9650\u30eb\u30fc\u30d7\u3092\u629c\u3051\u305f\u3068\u304d\u306b\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\uff11\u3064\u30ed\u30b0\u306b\u5410\u304d\u51fa\u3059\u3053\u3068\u306b\u3057\u305f\u3002\n\n```\nroot      4945  0.0  1.3 232308 14040 ?        S    08:05   0:00 /usr/bin/php /home/\u2605user/shogi/php_service/dequeueBroker.php\n```\n\n\u306a\u3093\u3067\u30b9\u30c8\u30c3\u30d7\u3057\u3066\u308b\u3093\u3060\u308d\u3002\n\n# \u30d7\u30ed\u30bb\u30b9\u306f **\u30b9\u30c8\u30c3\u30d7\u3057\u3066\u3044\u3066\u3082\u52d5\u3044\u3066\u3044\u308b** \u306e\u3067\u306f\uff1f\n\n\u30b9\u30c8\u30c3\u30d7\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u3042\u308a\u3001\n\u30d6\u30e9\u30a6\u30b6\u3067 http://\u2605.\u2605.\u2605.\u2605/tamesi5.php \u3092\u53e9\u304f\u3068 \u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u6587\u5b57\u304c\u66f8\u304d\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u3067\u3001\n\u30d7\u30ed\u30bb\u30b9\u306f\u6b62\u307e\u3063\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u3066\u52d5\u3044\u3066\u3044\u308b\u306e\u304b\u3001\n\u305d\u308c\u3068\u3082\u3000\u30c6\u30b9\u30c8\u3067\u53e9\u3044\u305f \u5225\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u52d5\u3044\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\n\n\u533a\u5225\u304c\u3067\u304d\u306a\u3044\u3002\n\n# PHP \u3067\u30c7\u30ad\u30e5\u30fc\u305b\u305a\u306b\u3001C# \u3067\u30c7\u30ad\u30e5\u30fc\u3067\u304d\u306a\u3044\u306e\u304b\uff1f\n\n\u306a\u3093\u3067 C# \u3067\u30c7\u30ad\u30e5\u30fc\u3067\u304d\u306a\u3044\u3093\u3060\u308d\u3046\u3002\n\ncsharp_service \u3068\u3044\u3046\u30d5\u30a9\u30eb\u30c0\u30fc\u3092\u6398\u308d\u3046\u3002\n\n```\nmkdir csharp_service\nmkdir csharp_log\n```\n\n\u3053\u306e\u4e2d\u306b\u8a66\u3057\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u79fb\u3059\u3053\u3068\u306b\u3059\u308b\u3002\n\n```\nmv tamesi1 ape1.sh\nmv tamesi2 ape2.sh\nmv tamesi3 ape3.sh\nmv tamesi4 ape4.sh\nmv tamesi5 ape5.sh\nmv tamesi6 ape6.sh\nmv tamesi7 ape7.sh\nmv tamesi8 ape8.sh\nmv tamesi9 ape9.cs\nmv tamesi9.exe ape9.exe\nmv tamesi10 ape10.cs\nmv tamesi10.exe ape10.exe\n\nmv MsgQueue_Old.cs ../../csharp_service/MsgQueue_Old.cs\nmv MsgQueue.cs ../../csharp_service/MsgQueue.cs\nmv MsgQueue.exe ../../csharp_service/MsgQueue.exe\n```\n\n\u306a\u305c\u3060\u304b\u5206\u304b\u3089\u306a\u3044\u304c\u3001C# \u304c\u30a8\u30f3\u30ad\u30e5\u30fc\u3057\u305f\u3000\u30e1\u30c3\u30bb\u30fc\u30b8\u306f C# \u306b\u3057\u304b\u898b\u308c\u306a\u3044\u3057\u3001PHP \u304c\u30a8\u30f3\u30ad\u30e5\u30fc\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3082\u30c7\u30ad\u30e5\u30fc\u3067\u304d\u306a\u3044\u3088\u3046\u3060\u3002\n\n\u306a\u3093\u3060\u308d\u3046\u3002\n\n# PHP\u306e\u53d7\u3051\u53d6\u308a\u53e3\u3092\u6539\u9020\u3057\u3088\u3046\n\n\u3068\u308a\u3042\u3048\u305a\u5f79\u306b\u7acb\u3061\u305d\u3046\u306a\u306e\u306f\uff12\u3064\u3002\n\ntamesi2.php\ntamesi5.php\n\n\u3053\u308c\u3092\u7d71\u5408\u3057\u3066\u3001tamesi14.php \u3092\u4f5c\u3063\u3066\u307f\u308b\u3002\n\n```\n<?php\nrequire_once __DIR__ . '/vendor/autoload.php';\nuse PhpAmqpLib\\Connection\\AMQPStreamConnection;\nuse PhpAmqpLib\\Message\\AMQPMessage;\n\n// GET\u30af\u30a8\u30ea\u6587\u5b57\u5217\u3092\u53d6\u5f97\n$QMsg = urldecode($_SERVER['QUERY_STRING']);\nif( \"\" === $QMsg)\n{\n    $QMsg = \"hello, world\";\n}\n\n// \u5225\u306e\u30af\u30a8\u30ea\u30fc\u3082\u9001\u308c\u308b\u3053\u3068\u3092\u8aac\u660e\necho '\uff08\uff3e\uff51\uff3e\uff09' . $QMsg . '<br />';\necho '\u3053\u308c\u3092\uff11\u56de\u30af\u30ea\u30c3\u30af\u3057\u308d\u3060\u305c\u2606\uff4d\uff19\uff08\uff3e\uff5e\uff3e\uff09\uff01<br />';\necho '<a href=\"http://\u2605.\u2605.\u2605.\u2605/tamesi14.php?ClickSitanDaze\">http://\u2605.\u2605.\u2605.\u2605/tamesi14.php?ClickSitanDaze</a><br />';\n\n// \u30ad\u30e5\u30fc\u3092\u958b\u304f\n$connection = new AMQPStreamConnection('localhost', 5672, 'guest', 'guest');\n$channel = $connection->channel();\n$QKey = '1111';\n$channel->queue_declare($QKey, false, false, false, false);\n\n// \u30a8\u30f3\u30ad\u30e5\u30fc\u3059\u308b\n$msgObj = new AMQPMessage( $QMsg );\n$channel->basic_publish($msgObj ,'' ,$QKey);\n\necho \"\u5bfe\u5c40\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8fd1\u304f\u306b\u5c4a\u3051\u3066\u304a\u304f\u305c\u2606\uff08\uff3e\u25bd\uff3e\uff09\uff56 ['\" . $QMsg . \"']\\n\";\n\n// \u30ea\u30bd\u30fc\u30b9\u3092\u958b\u653e\u3059\u308b\n$channel->close();\n$connection->close();\n```\n\n# \u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3082\u3001\u30d7\u30ed\u30bb\u30b9\u306f\u52d5\u3044\u3066\u3044\u308b\u3060\u308d\u3046\u304b\uff1f\n\ndequeueBroker.out.log \u306b\u6587\u5b57\u5217\u304c\u5165\u308b\u3068\u3053\u308d\u307e\u3067\u306f\u3067\u304d\u305f\u304c\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3082\u3000\u30d7\u30ed\u30bb\u30b9\u306f\u52d5\u3044\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u304c\u554f\u984c\u3060\u3002\n\n\u300cUbuntu Linux\u306bRabbitMQ\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u300d \uff08CLOVER\uff09\nhttp://d.hatena.ne.jp/Kazuhira/20160531/1464706671\n\nRabbitMQ \u304c\u843d\u3061\u3066\u308b\u306e\u304b\u3068\u601d\u3063\u305f\u304c\u30ed\u30b0\u306f\u5410\u3044\u3066\u308b\u3057\u3002\n\n# PHP exec\n\u300c\u5916\u90e8\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c - exec()\u3001system()\u300d \uff08PHP\u5165\u9580\uff09\nhttp://webkaru.net/php/function-exec-system/\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e\u30b3\u30de\u30f3\u30c9\u3092 PHP \u304b\u3089\u4f7f\u3048\u308b\u306e\u3060\u308d\u3046\u304b\uff1f\u8a66\u3057\u3066\u307f\u3088\u3046\u3002\n\nphp_service/tamesi15.php\n\n```\n<?php\n// \u5f15\u6570\u7121\u3057\nvar_dump(\n    exec(\n        'ls'\n    )\n);\n\n// \u5f15\u6570\u6709\u308a\nvar_dump(\n    exec(\n        'ls', $out, $ret\n    )\n);\nprint_r( $out );\nvar_dump( $ret );\n```\n\n```\nphp tamesi15.php\n```\n\n```\nstring(6) \"vendor\"\nstring(6) \"vendor\"\nArray\n(\n    [0] => composer.json\n    [1] => composer.lock\n    [2] => dequeueBroker.php\n    [3] => loop10.php\n    [4] => loop6.php\n    [5] => tamesi15.php\n    [6] => vendor\n)\nint(0)\n```\n\nexec( ) \u306e\u623b\u308a\u5024\u306f\u5358\u306b\u3000$out \u306e\u6700\u7d42\u884c\u3060\u308d\u3046\u304b\u3002\u30b3\u30de\u30f3\u30c9\u306e\u623b\u308a\u5024\u306f $ret \u306b\u5165\u3063\u305f\u306e\u3060\u308d\u3046\u3002\n\n# expect \u30b3\u30de\u30f3\u30c9\n\n\u300cLinux\u306e\u5bfe\u8a71\u304c\u3081\u3093\u3069\u304f\u3055\u3044?\u305d\u3093\u306a\u6642\u3053\u305d\u81ea\u52d5\u5316\u3060\uff01-expect\u7de8-\u300d \uff08Qiita\uff09\nhttp://qiita.com/ine1127/items/cd6bc91174635016db9b\n\n\uff11\u884c\u3067\u66f8\u304f\u5f62\u5f0f\u306a\u306e\u304b\u3001\u6697\u53f7\u307f\u305f\u3044\u3060\u3002\n\n\n\u300cExpect \u306e\u4f7f\u7528\u4f8b\u300d (PHP\u30de\u30cb\u30e5\u30a2\u30eb)\nhttp://php.net/manual/ja/expect.examples-usage.php\n\n\u3053\u3063\u3061\u306f PHP\u30d7\u30ed\u30b0\u30e9\u30e0\u305d\u306e\u307e\u3093\u307e\u3063\u307d\u3044\u3002\n\n# \u9577\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u6b21\u306e\u8a18\u4e8b\u3078\n"}