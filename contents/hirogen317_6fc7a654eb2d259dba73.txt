{"context": "\n\n\u6982\u8981\n\u81ea\u5206\u4ed5\u4e8b\u306e\u4fbf\u5229\u3059\u308b\u305f\u3081\u3001hive\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3092\u307e\u3068\u3081\u3057\u307e\u3059\u3002\n\u521d\u5fc3\u8005\u3067\u3059\u306e\u3067\u3001\u8aa4\u3063\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u5927\u304d\u3044\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u305f\u306f\u78ba\u8a8d\n#brew prune\nbrew update\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbrew install hadoop\nbrew install hive\n\n\n\u74b0\u5883\u5909\u6570\u306e\u8ffd\u52a0\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\nbrew info hadoop\nbrew info hive\n\nemacs ~/.bashrc\n\n# \u4e0b\u8a18\u306b\u8ffd\u52a0\nexport HADOOP_HOME=/usr/local/Cellar/hadoop/2.7.2/libexec\nexport HIVE_HOME=/usr/local/Cellar/hive/2.1.0/libexec\n\n# Enable the setting\nsource ~/.bashrc\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\ncd $HIVE_HOME/conf\ncp hive-default.xml.template hive-site.xml\nemacs hive-site.xml\n\nmetastoredb\u306e\u30d1\u30b9\u304c\u7d76\u5bfe\u30d1\u30b9\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n<property>\n  <name>hive.exec.scratchdir</name>\n  <value>/tmp/hive-${username}</value>\n</property>\n\n<property>\n  <name>hive.exec.local.scratchdir</name>\n  <value>/tmp/hive-${username}</value>\n</property>\n<property>\n    <name>hive.scratch.dir.permission</name>\n    <value>777</value>\n    <description>The permission for the user specific scratch directories that get created.</description>\n</property>\n<property>\n  <name>hive.downloaded.resources.dir</name>\n  <value>/tmp/hive/resources</value>\n</property>\n\n<property>\n  <name>hive.querylog.location</name>\n  <value>/tmp/hive/query_logs</value>\n</property>\n<property>\n  <name>hive.server2.logging.operation.log.location</name>\n  <value>/tmp/hive/operation_logs</value>\n</property>\n\n<property>\n  <name>javax.jdo.option.ConnectionURL</name>\n  <value>jdbc:derby:;databaseName=/usr/local/Cellar/hive/2.1.0/libexec/metastore_db;create=true</value>\n</property>\n\n\n\u521d\u671f\u5316\nmkdir -p /tmp/hive/resources\nmkdir -p /tmp/hive/query_logs\nmkdir -p /tmp/hive/operation_logs\n\n# make /tmp/hive writable\nchmod -R 777 /tmp/hive\n\n# initial schema\nschematool -initSchema -dbType derby\n\n\n\u52d5\u4f5c\u30c6\u30b9\u30c8\nhive> create database test;\nhive> use test;\nhive> create table test(id int, code String)  PARTITIONED BY(dt String) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\\t' LINES TERMINATED BY '\\n';\n\nhive> set hive.exec.dynamic.partition.mode=nonstrict;\nhive> insert into test PARTITION(dt) values(1, 'test', '2017-02-01');\n\nhive> select * from test;\nOK\n1   test    2017-02-01\n\n# \u6982\u8981\n\n\u81ea\u5206\u4ed5\u4e8b\u306e\u4fbf\u5229\u3059\u308b\u305f\u3081\u3001hive\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3092\u307e\u3068\u3081\u3057\u307e\u3059\u3002\n\u521d\u5fc3\u8005\u3067\u3059\u306e\u3067\u3001\u8aa4\u3063\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u5927\u304d\u3044\u3002\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u307e\u305f\u306f\u78ba\u8a8d\n\n```bash\n#brew prune\nbrew update\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbrew install hadoop\nbrew install hive\n```\n\n## \u74b0\u5883\u5909\u6570\u306e\u8ffd\u52a0\n\n```bash\n# \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\nbrew info hadoop\nbrew info hive\n\nemacs ~/.bashrc\n\n# \u4e0b\u8a18\u306b\u8ffd\u52a0\nexport HADOOP_HOME=/usr/local/Cellar/hadoop/2.7.2/libexec\nexport HIVE_HOME=/usr/local/Cellar/hive/2.1.0/libexec\n\n# Enable the setting\nsource ~/.bashrc\n```\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\n\n```bash\ncd $HIVE_HOME/conf\ncp hive-default.xml.template hive-site.xml\nemacs hive-site.xml\n```\n\nmetastoredb\u306e\u30d1\u30b9\u304c\u7d76\u5bfe\u30d1\u30b9\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```xml\n<property>\n  <name>hive.exec.scratchdir</name>\n  <value>/tmp/hive-${username}</value>\n</property>\n\n<property>\n  <name>hive.exec.local.scratchdir</name>\n  <value>/tmp/hive-${username}</value>\n</property>\n<property>\n    <name>hive.scratch.dir.permission</name>\n    <value>777</value>\n    <description>The permission for the user specific scratch directories that get created.</description>\n</property>\n<property>\n  <name>hive.downloaded.resources.dir</name>\n  <value>/tmp/hive/resources</value>\n</property>\n\n<property>\n  <name>hive.querylog.location</name>\n  <value>/tmp/hive/query_logs</value>\n</property>\n<property>\n  <name>hive.server2.logging.operation.log.location</name>\n  <value>/tmp/hive/operation_logs</value>\n</property>\n\n<property>\n  <name>javax.jdo.option.ConnectionURL</name>\n  <value>jdbc:derby:;databaseName=/usr/local/Cellar/hive/2.1.0/libexec/metastore_db;create=true</value>\n</property>\n```\n\n# \u521d\u671f\u5316\n\n```bash\nmkdir -p /tmp/hive/resources\nmkdir -p /tmp/hive/query_logs\nmkdir -p /tmp/hive/operation_logs\n\n# make /tmp/hive writable\nchmod -R 777 /tmp/hive\n\n# initial schema\nschematool -initSchema -dbType derby\n```\n\n# \u52d5\u4f5c\u30c6\u30b9\u30c8\n\n```hive\nhive> create database test;\nhive> use test;\nhive> create table test(id int, code String)  PARTITIONED BY(dt String) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\\t' LINES TERMINATED BY '\\n';\n\nhive> set hive.exec.dynamic.partition.mode=nonstrict;\nhive> insert into test PARTITION(dt) values(1, 'test', '2017-02-01');\n\nhive> select * from test;\nOK\n1\ttest\t2017-02-01\n```\n", "tags": ["hive"]}