{"context": " More than 1 year has passed since last update.\n\nReveal.js \u3092\u5229\u7528\u3057\u305f\u5185\u90e8\u516c\u958b\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u3067\u30b9\u30e9\u30a4\u30c9\u306e\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3046\n\n\u6982\u8981\nReveal.js \u3092\u5229\u7528\u3057\u305f\u5185\u90e8\u516c\u958b\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u3067\u30b9\u30e9\u30a4\u30c9\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u69cb\u6210\n\nGitLab : GitHub Clone \u3002Git \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u7ba1\u7406\nHubot  : \u30dc\u30c3\u30c8\u958b\u767a\u30fb\u5b9f\u884c\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\nKandan : HipChat Clone. \u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\n\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc (node.js / reveal.js / connect )\n\n\n\u69cb\u6210\u56f3\n\n\n\u51e6\u7406\u306e\u6d41\u308c\n\n\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u3001Reveal.js \u306e\u30b9\u30e9\u30a4\u30c9\u3092\u7de8\u96c6\u3057\u3001 GitLab \u30b5\u30fc\u30d0\u30fc\u306b push\nGitLab \u30b5\u30fc\u30d0\u30fc\u306f WebHooks \u3092\u5229\u7528\u3057\u3066 Hubot \u3078 push \u3092\u901a\u77e5\nHubot \u306f node.js \u306e child_process \u3092\u5229\u7528\u3057\u3066\u30b7\u30b9\u30c6\u30e0\u30b3\u30de\u30f3\u30c9\u304b\u3089\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u30c7\u30d7\u30ed\u30a4\u7528\u306e bash \u3092\u547c\u3073\u51fa\u3057\u3001\u30c7\u30d7\u30ed\u30a4\u3092\u5b9f\u884c\nHubot \u306f push \u306e\u5185\u5bb9\u3092 Kandan \u306e\u30c1\u30e3\u30c3\u30c8\u306b\u901a\u77e5\n\n\n\u524d\u63d0\n\n\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u306e\u521d\u671f\u69cb\u7bc9\u306f\u6e08\u3093\u3067\u3044\u308b\u524d\u63d0\nHubot \u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u3078\u306e \u516c\u958b\u9375\u306b\u3088\u308b ssh \u63a5\u7d9a\u8a2d\u5b9a\u3092\u6e08\u307e\u305b\u3066\u304a\u304f\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n\u30c7\u30d7\u30ed\u30a4\u7528\u306e bash\n\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u306b\u516c\u958b\u9375\u3067 ssh \u63a5\u7d9a\u3057\u3001\n\u5bfe\u8c61\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u5f8c\u3001 git pull \u3057\u307e\u3059\u3002\n\u9759\u7684\u30b5\u30a4\u30c8\u306b\u3064\u304d\u3001 git pull \u306e\u307f\u3067\u6700\u65b0\u5316\u5b8c\u4e86\u3002\nHubot \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u306b shells \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\n\u305d\u3053\u306b\u3001 deploy_slide.bash \u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\u203b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3084 bash \u306e\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066\u3001\u547d\u540d\u3084\u914d\u7f6e\u306f\u81ea\u7531\n#!/bin/bash\ncat << EOF > /tmp/CMD.txt\ncd /home/some_user/slides/\ngit pull\nEOF\nCMD=`cat /tmp/CMD.txt`\nrm /tmp/CMD.txt\nssh some_user@ip_or_name -i /home/some_user/.ssh/keyname \"$CMD\"\n\n\nHubot Script\nGitLab \u306e WebHooks \u306b Hubot Server \u3092\u767b\u9332\u3057\u3001\n\u30b9\u30e9\u30a4\u30c9\u30b7\u30e7\u30fc\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5bfe\u3057\u3066\u3001 push \u304c\u3042\u308c\u3070Hubot \u306b\u901a\u77e5\u3059\u308b\u3002\nHubot \u306f\u3001push \u306e\u901a\u77e5\u306b\u5bfe\u3057\u3066\n\npush \u5185\u5bb9\u3092 Kandan \u306b Chat\n\u30b7\u30b9\u30c6\u30e0\u30b3\u30de\u30f3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3001\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u306b\u30ea\u30e2\u30fc\u30c8\u63a5\u7d9a\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3092\u5b9f\u884c\n\n\u306e2\u3064\u306e\u30bf\u30b9\u30af\u3092\u884c\u3046\u3002\n# Description\n#   Deploy slide server(trigger is GitLab push event)\n#\n# Dependencies:\n#   None\n#\n# Configuration:\n#   None\nchild_process = require 'child_process'\n\nmodule.exports = (robot) ->\n  say = (message) ->\n    user = {\n      room :\n        id : 11 # Slide\n    }\n\n    robot.send user, message\n\n  robot.router.post \"/gitlab/hook/slides\", (req, res) ->\n    json  = req.body\n    say \"New Slide Added or Updated\"\n    say \"json['repository.name'] = #{json['repository']['name']}\"\n    say \"json['commits'][0]['message'] = #{json['commits'][0]['message']}\"\n    child_process.exec \". /path/to/hubot_project/shells/deploy_slide.bash\", (error, stdout, stderr) ->\n      if !error\n        say \"http://ip_or_domain:your_port/index.html\"\n      else\n        say \"error\"\n    res.send 200\n\n\n\u7d50\u679c\u78ba\u8a8d\n\n\u5b9f\u884c\u524d \u30b9\u30e9\u30a4\u30c9\u78ba\u8a8d\n\n\n\u5909\u66f4\u5185\u5bb9\n\n\u5909\u66f4\u524d\n\n##  Let's Publish Slideshow!\n\n\n\u5909\u66f4\u5f8c\n\n##  \u3055\u3041\u3001\u30b9\u30e9\u30a4\u30c9\u4f5c\u308b\u3079\u3055\n\n\n\u5909\u66f4\u9069\u7528\n$ git add -A\n$ git commit -m \"\u65e5\u672c\u8a9e\u306b\u3057\u305f\u3079\u3055\uff08\u691c\u8a3c\u4e2d\uff09\"\n$ git push origin master\n\n\n\u5b9f\u884c\u5f8c \u30b9\u30e9\u30a4\u30c9\u78ba\u8a8d\n\n\n\u5b9f\u884c\u5f8c Kandan \u30c1\u30e3\u30c3\u30c8\u78ba\u8a8d\n\n# Reveal.js \u3092\u5229\u7528\u3057\u305f\u5185\u90e8\u516c\u958b\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u3067\u30b9\u30e9\u30a4\u30c9\u306e\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3046\n\n## \u6982\u8981\nReveal.js \u3092\u5229\u7528\u3057\u305f\u5185\u90e8\u516c\u958b\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u3067\u30b9\u30e9\u30a4\u30c9\u81ea\u52d5\u30c7\u30d7\u30ed\u30a4\u3092\u884c\u3044\u307e\u3059\u3002\n\n## \u69cb\u6210\n* GitLab : GitHub Clone \u3002Git \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u7ba1\u7406\n* Hubot  : \u30dc\u30c3\u30c8\u958b\u767a\u30fb\u5b9f\u884c\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n* Kandan : HipChat Clone. \u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\n* \u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc (node.js / reveal.js / connect )\n\n## \u69cb\u6210\u56f3\n\n![slide_structures.png](https://qiita-image-store.s3.amazonaws.com/0/43480/6e4dc340-18c0-e665-1e35-dc275a718f69.png)\n\n## \u51e6\u7406\u306e\u6d41\u308c\n* \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u3001Reveal.js \u306e\u30b9\u30e9\u30a4\u30c9\u3092\u7de8\u96c6\u3057\u3001 GitLab \u30b5\u30fc\u30d0\u30fc\u306b push\n* GitLab \u30b5\u30fc\u30d0\u30fc\u306f WebHooks \u3092\u5229\u7528\u3057\u3066 Hubot \u3078 push \u3092\u901a\u77e5\n* Hubot \u306f node.js \u306e `child_process` \u3092\u5229\u7528\u3057\u3066\u30b7\u30b9\u30c6\u30e0\u30b3\u30de\u30f3\u30c9\u304b\u3089\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u30c7\u30d7\u30ed\u30a4\u7528\u306e bash \u3092\u547c\u3073\u51fa\u3057\u3001\u30c7\u30d7\u30ed\u30a4\u3092\u5b9f\u884c\n* Hubot \u306f push \u306e\u5185\u5bb9\u3092 Kandan \u306e\u30c1\u30e3\u30c3\u30c8\u306b\u901a\u77e5\n\n## \u524d\u63d0\n* \u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u306e\u521d\u671f\u69cb\u7bc9\u306f\u6e08\u3093\u3067\u3044\u308b\u524d\u63d0\n* Hubot \u30b5\u30fc\u30d0\u30fc\u304b\u3089\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u3078\u306e \u516c\u958b\u9375\u306b\u3088\u308b ssh \u63a5\u7d9a\u8a2d\u5b9a\u3092\u6e08\u307e\u305b\u3066\u304a\u304f\n\n## \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\n### \u30c7\u30d7\u30ed\u30a4\u7528\u306e bash\n\n\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u306b\u516c\u958b\u9375\u3067 ssh \u63a5\u7d9a\u3057\u3001\n\u5bfe\u8c61\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u5f8c\u3001 git pull \u3057\u307e\u3059\u3002\n\u9759\u7684\u30b5\u30a4\u30c8\u306b\u3064\u304d\u3001 git pull \u306e\u307f\u3067\u6700\u65b0\u5316\u5b8c\u4e86\u3002\n\nHubot \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u306b shells \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\n\u305d\u3053\u306b\u3001 deploy_slide.bash \u3068\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\u203b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u3084 bash \u306e\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066\u3001\u547d\u540d\u3084\u914d\u7f6e\u306f\u81ea\u7531\n\n~~~bash\n#!/bin/bash\ncat << EOF > /tmp/CMD.txt\ncd /home/some_user/slides/\ngit pull\nEOF\nCMD=`cat /tmp/CMD.txt`\nrm /tmp/CMD.txt\nssh some_user@ip_or_name -i /home/some_user/.ssh/keyname \"$CMD\"\n~~~\n\n### Hubot Script\n\nGitLab \u306e WebHooks \u306b Hubot Server \u3092\u767b\u9332\u3057\u3001\n\u30b9\u30e9\u30a4\u30c9\u30b7\u30e7\u30fc\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u5bfe\u3057\u3066\u3001 push \u304c\u3042\u308c\u3070Hubot \u306b\u901a\u77e5\u3059\u308b\u3002\n\nHubot \u306f\u3001push \u306e\u901a\u77e5\u306b\u5bfe\u3057\u3066\n\n* push \u5185\u5bb9\u3092 Kandan \u306b Chat\n* \u30b7\u30b9\u30c6\u30e0\u30b3\u30de\u30f3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3001\u30b9\u30e9\u30a4\u30c9\u30b5\u30fc\u30d0\u30fc\u306b\u30ea\u30e2\u30fc\u30c8\u63a5\u7d9a\u3057\u3066\u30c7\u30d7\u30ed\u30a4\u3092\u5b9f\u884c\n\n\u306e2\u3064\u306e\u30bf\u30b9\u30af\u3092\u884c\u3046\u3002\n\n~~~coffeescript\n# Description\n#   Deploy slide server(trigger is GitLab push event)\n#\n# Dependencies:\n#   None\n#\n# Configuration:\n#   None\nchild_process = require 'child_process'\n\nmodule.exports = (robot) ->\n  say = (message) ->\n    user = {\n      room :\n        id : 11 # Slide\n    }\n\n    robot.send user, message\n\n  robot.router.post \"/gitlab/hook/slides\", (req, res) ->\n    json  = req.body\n    say \"New Slide Added or Updated\"\n    say \"json['repository.name'] = #{json['repository']['name']}\"\n    say \"json['commits'][0]['message'] = #{json['commits'][0]['message']}\"\n    child_process.exec \". /path/to/hubot_project/shells/deploy_slide.bash\", (error, stdout, stderr) ->\n      if !error\n        say \"http://ip_or_domain:your_port/index.html\"\n      else\n        say \"error\"\n    res.send 200\n~~~\n\n## \u7d50\u679c\u78ba\u8a8d\n### \u5b9f\u884c\u524d \u30b9\u30e9\u30a4\u30c9\u78ba\u8a8d\n\n![before_deploy.png](https://qiita-image-store.s3.amazonaws.com/0/43480/b24bbbe5-9755-e9d9-13da-24bd8e620e5d.png)\n\n### \u5909\u66f4\u5185\u5bb9\n\n* \u5909\u66f4\u524d\n\n~~~markdown\n##  Let's Publish Slideshow!\n~~~\n\n* \u5909\u66f4\u5f8c\n\n~~~markdown\n##  \u3055\u3041\u3001\u30b9\u30e9\u30a4\u30c9\u4f5c\u308b\u3079\u3055\n~~~\n\n### \u5909\u66f4\u9069\u7528\n\n~~~bash\n$ git add -A\n$ git commit -m \"\u65e5\u672c\u8a9e\u306b\u3057\u305f\u3079\u3055\uff08\u691c\u8a3c\u4e2d\uff09\"\n$ git push origin master\n~~~\n\n### \u5b9f\u884c\u5f8c \u30b9\u30e9\u30a4\u30c9\u78ba\u8a8d\n\n![after_deploy.png](https://qiita-image-store.s3.amazonaws.com/0/43480/feaa6286-8180-89e2-d3ec-62b7ca12d427.png)\n\n### \u5b9f\u884c\u5f8c Kandan \u30c1\u30e3\u30c3\u30c8\u78ba\u8a8d\n\n![after_deploy_kandan.png](https://qiita-image-store.s3.amazonaws.com/0/43480/0e9f99c3-ae65-480c-f2f5-ec6e2233007f.png)\n", "tags": ["reveal.js", "Hubot", "kandan", "GitLab"]}