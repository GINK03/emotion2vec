{"context": " More than 1 year has passed since last update.\u307e\u305a\u306f\u30ea\u30af\u30eb\u30fc\u30c8WEB\u30b5\u30fc\u30d3\u30b9\u3000\u304b\u3089\u4f1a\u54e1\u767b\u9332\u3057\u3066API\u30ad\u30fc\u3092\u53d6\u5f97\u3002\n\u307b\u3044\u3067\u3001API\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u304b\u3089URL\u3092\u53d6\u5f97\u3002\nURL\u306f\u3053\u3093\u306a\u304b\u3093\u3058\u3002\nhttp://webservice.recruit.co.jp/hotpepper/gourmet/v1/?key=[API\u30ad\u30fc]&[\u30a8\u30ea\u30a2\u7b49\u306e\u7d5e\u308a\u8fbc\u307f]\n\u5b9f\u969bJS\u3067\u4f7f\u3046\u3068\u304d\u306f\u3046\u3057\u308d\u306b &format=jsonp&callback=?\" \u3092\u3064\u3051\u308b\n\u3061\u306a\u307f\u306b\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fc\u306e\u30af\u30ec\u30b8\u30c3\u30c8\u8868\u793a\u304c\u5fc5\u9808\u306a\u306e\u3067\u4e0b\u8a18\u304b\u3089\u53d6\u5f97\u3002\n\u30af\u30ec\u30b8\u30c3\u30c8\n\u30b5\u30f3\u30d7\u30eb\u306f\u4ee5\u4e0b\u3002\n<div id=\"gmap\"></div>\n\n<a href=\"http://webservice.recruit.co.jp/\"><img src=\"http://webservice.recruit.co.jp/banner/hotpepper-s.gif\" alt=\"\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fc Web\u30b5\u30fc\u30d3\u30b9\" width=\"135\" height=\"17\" border=\"0\" title=\"\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fc Web\u30b5\u30fc\u30d3\u30b9\"></a>\n\n<script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=true\"></script>\n<script type=\"text/javascript\" src=\"js/map.js\"></script>\n\n\n// GoogleMap\u3092\u751f\u6210\u3057\u3066\u8868\u793a\ngoogle.maps.event.addDomListener(window, \"load\", function(){\n    var map = document.getElementById(\"gmap\");\n    var options = {\n        zoom: 14,\n        center: new google.maps.LatLng(34.702485, 135.495951)\n    };\n    mapObj = new google.maps.Map(map, options);\n});\n\n\nvar currentInfoWin = null;\n\n// \u5e97\u8217\u60c5\u5831\u3092\u53d6\u5f97\nfunction getRamenShop() {\n    console.log( \"getRamenShop()\" );\n\n    // \u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\n    var url =\"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/?key=API\u30ad\u30fc&middle_area=Y300,Y305,Y310&genre=G013&format=jsonp&callback=?\";\n    // \u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u3092\u547c\u3073\u51fa\u3059\n    $.getJSON(url, {\"url\":url}).then(\n        //\u6210\u529f\u6642\u306e\u51e6\u7406\n        function(data){\n            disp(data);\n        },\n        //\u5931\u6557\u6642\u306e\u51e6\u7406\n        function(){\n            alert(\"Error\");\n        }\n    );\n}\n\n// GoogleMap\u306b\u8868\u793a\nfunction disp(resultJSON) {\n    // \u30de\u30fc\u30ab\u30fc\u753b\u50cf\u3092\u4f5c\u6210\n    var markerImg = new google.maps.MarkerImage(\n        \"http://\u753b\u50cf\u30d5\u30a1\u30a4\u30ebURL.png\"\n    );\n    // JSON\u306e\u5e97\u8217\u60c5\u5831\u5206\u3060\u3051\u7e70\u308a\u8fd4\u3057\u51e6\u7406\n    $(resultJSON.results.shop).each(function() {\n\n        // \u7def\u5ea6\u7d4c\u5ea6\u60c5\u5831\u3092\u53d6\u5f97\n        var lating = new google.maps.LatLng(this.lat, this.lng);\n\n        // \u30de\u30fc\u30ab\u30fc\u3092\u8a2d\u5b9a\n        var markerObj = new google.maps.Marker({\n            position: lating,\n            map: mapObj,\n            icon: markerImg\n        });\n\n        // \u60c5\u5831\u30a6\u30a3\u30f3\u30c9\u30a6\u306eHTML\u4f5c\u6210\n        var html = \"<div class='infoWindow'>\"\n                    + \"<div class='infoWindow-logo'>\"\n                    + \"<img src='\" + this.logo_image + \"'>\"\n                    + \"</div>\"\n                    + \"<div class='infoWindow-txt'>\"\n                    + \"<p>\" + this.name + \"</p>\"\n                    + \"<p>\" + this.address + \"</p>\"\n                    +\"</div>\"\n\n        // \u60c5\u5831\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\n        var infoWin = new google.maps.InfoWindow({maxWidth:300});\n        infoWin.setContent(html);\n\n        // \u30de\u30fc\u30ab\u30fc\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3089\u60c5\u5831\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u8868\u793a\n        google.maps.event.addListener(markerObj, 'click', function(){\n            if(currentInfoWin){\n                currentInfoWin.close();\n            }\n            infoWin.open(mapObj, markerObj);\n            currentInfoWin = infoWin;\n        });\n    });\n\n}\n\nwindow.onload = function() {\n  getRamenShop();\n}\n\n\u307e\u305a\u306f[\u30ea\u30af\u30eb\u30fc\u30c8WEB\u30b5\u30fc\u30d3\u30b9](http://webservice.recruit.co.jp/)\u3000\u304b\u3089\u4f1a\u54e1\u767b\u9332\u3057\u3066API\u30ad\u30fc\u3092\u53d6\u5f97\u3002\n\u307b\u3044\u3067\u3001[API\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://webservice.recruit.co.jp/hotpepper/reference.html)\u304b\u3089URL\u3092\u53d6\u5f97\u3002\nURL\u306f\u3053\u3093\u306a\u304b\u3093\u3058\u3002\nhttp://webservice.recruit.co.jp/hotpepper/gourmet/v1/?key=[API\u30ad\u30fc]&[\u30a8\u30ea\u30a2\u7b49\u306e\u7d5e\u308a\u8fbc\u307f]\n\u5b9f\u969bJS\u3067\u4f7f\u3046\u3068\u304d\u306f\u3046\u3057\u308d\u306b `&format=jsonp&callback=?\"` \u3092\u3064\u3051\u308b\n\n\u3061\u306a\u307f\u306b\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fc\u306e\u30af\u30ec\u30b8\u30c3\u30c8\u8868\u793a\u304c\u5fc5\u9808\u306a\u306e\u3067\u4e0b\u8a18\u304b\u3089\u53d6\u5f97\u3002\n[\u30af\u30ec\u30b8\u30c3\u30c8]\n(http://webservice.recruit.co.jp/hotpepper/guideline.html)\n\n\u30b5\u30f3\u30d7\u30eb\u306f\u4ee5\u4e0b\u3002\n\n```html\n<div id=\"gmap\"></div>\n\n<a href=\"http://webservice.recruit.co.jp/\"><img src=\"http://webservice.recruit.co.jp/banner/hotpepper-s.gif\" alt=\"\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fc Web\u30b5\u30fc\u30d3\u30b9\" width=\"135\" height=\"17\" border=\"0\" title=\"\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fc Web\u30b5\u30fc\u30d3\u30b9\"></a>\n\n<script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>\n<script type=\"text/javascript\" src=\"http://maps.google.com/maps/api/js?sensor=true\"></script>\n<script type=\"text/javascript\" src=\"js/map.js\"></script>\n```\n\n\n```js\n\n// GoogleMap\u3092\u751f\u6210\u3057\u3066\u8868\u793a\ngoogle.maps.event.addDomListener(window, \"load\", function(){\n\tvar map = document.getElementById(\"gmap\");\n\tvar options = {\n\t\tzoom: 14,\n\t\tcenter: new google.maps.LatLng(34.702485, 135.495951)\n\t};\n\tmapObj = new google.maps.Map(map, options);\n});\n\n\nvar currentInfoWin = null;\n\n// \u5e97\u8217\u60c5\u5831\u3092\u53d6\u5f97\nfunction getRamenShop() {\n\tconsole.log( \"getRamenShop()\" );\n\n\t// \u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\n\tvar url =\"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/?key=API\u30ad\u30fc&middle_area=Y300,Y305,Y310&genre=G013&format=jsonp&callback=?\";\n\t// \u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u3092\u547c\u3073\u51fa\u3059\n\t$.getJSON(url, {\"url\":url}).then(\n\t\t//\u6210\u529f\u6642\u306e\u51e6\u7406\n\t\tfunction(data){\n\t\t\tdisp(data);\n\t\t},\n\t\t//\u5931\u6557\u6642\u306e\u51e6\u7406\n\t\tfunction(){\n\t\t\talert(\"Error\");\n\t\t}\n\t);\n}\n\n// GoogleMap\u306b\u8868\u793a\nfunction disp(resultJSON) {\n\t// \u30de\u30fc\u30ab\u30fc\u753b\u50cf\u3092\u4f5c\u6210\n\tvar markerImg = new google.maps.MarkerImage(\n\t\t\"http://\u753b\u50cf\u30d5\u30a1\u30a4\u30ebURL.png\"\n\t);\n\t// JSON\u306e\u5e97\u8217\u60c5\u5831\u5206\u3060\u3051\u7e70\u308a\u8fd4\u3057\u51e6\u7406\n\t$(resultJSON.results.shop).each(function() {\n\n\t\t// \u7def\u5ea6\u7d4c\u5ea6\u60c5\u5831\u3092\u53d6\u5f97\n\t\tvar lating = new google.maps.LatLng(this.lat, this.lng);\n\n\t\t// \u30de\u30fc\u30ab\u30fc\u3092\u8a2d\u5b9a\n\t\tvar markerObj = new google.maps.Marker({\n\t\t\tposition: lating,\n\t\t\tmap: mapObj,\n\t\t\ticon: markerImg\n\t\t});\n\n\t\t// \u60c5\u5831\u30a6\u30a3\u30f3\u30c9\u30a6\u306eHTML\u4f5c\u6210\n\t\tvar html = \"<div class='infoWindow'>\"\n\t\t\t\t\t+ \"<div class='infoWindow-logo'>\"\n\t\t\t\t\t+ \"<img src='\" + this.logo_image + \"'>\"\n\t\t\t\t\t+ \"</div>\"\n\t\t\t\t\t+ \"<div class='infoWindow-txt'>\"\n\t\t\t\t\t+ \"<p>\" + this.name + \"</p>\"\n\t\t\t\t\t+ \"<p>\" + this.address + \"</p>\"\n\t\t\t\t\t+\"</div>\"\n\n\t\t// \u60c5\u5831\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\n\t\tvar infoWin = new google.maps.InfoWindow({maxWidth:300});\n\t\tinfoWin.setContent(html);\n\n\t\t// \u30de\u30fc\u30ab\u30fc\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u3089\u60c5\u5831\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u8868\u793a\n\t\tgoogle.maps.event.addListener(markerObj, 'click', function(){\n\t\t\tif(currentInfoWin){\n\t\t\t\tcurrentInfoWin.close();\n\t\t\t}\n\t\t\tinfoWin.open(mapObj, markerObj);\n\t\t\tcurrentInfoWin = infoWin;\n\t\t});\n\t});\n\n}\n\nwindow.onload = function() {\n  getRamenShop();\n}\n```\n", "tags": ["GoogleMapsAPI"]}