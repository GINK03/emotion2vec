{"context": " More than 1 year has passed since last update.SYmfony2\u3067\u30d1\u30f3\u304f\u305a\u6a5f\u80fd\u3092\u3064\u3051\u3088\u3046\u3068\u601d\u3046\u3068Bundle\u3092\u5165\u308c\u3066\u30fc\u3068\u304b\u9762\u5012\u306a\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u69d8\u3005\u306a\u65b9\u6cd5\u3092\u8003\u3048\u305f\u7d50\u679c\u3001\u7261\u8823\u306e\u65b9\u6cd5\u304c\u4e00\u756a\u697d\u3067\u30b9\u30de\u30fc\u30c8\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u308a\u3053\u308c\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nTwig\u30c6\u30f3\u30d7\u30ec\u306bbread_add\u3057\u3066\u3044\u304d\u3001bread_show\u3067\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\u8003\u3048\u65b9\u304c\u308f\u304b\u308c\u3070\u7c21\u5358\u3067\u3059\u3002\n\nservice.yml \u306b\u30af\u30e9\u30b9\u3092\u767b\u9332\napp/config/service.yml \u306b\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\u305d\u308c\u305e\u308c\u306eBundle\u4ee5\u4e0b\u306eservice.yml\u306b\u66f8\u3044\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\u4e0b\u8a18\u3067\u306fCommonExtension\u30af\u30e9\u30b9\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3001Twig\u306eExtension\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3059\u3002\n\napp/config/service.yml\nservices:\n\n    app_common.twig.extension:\n        class: App\\CommonBundle\\Twig\\CommonExtension\n        arguments: [\"@service_container\", \"@router\"]\n        tags:\n            - { name: twig.extension }\n        public: true\n\n\n\n\nCommonExtension\u30af\u30e9\u30b9\nCommonExtension.php \u306e\u4e2d\u8eab\u306f\u4e0b\u8a18\u306e\u3068\u304a\u308a\u3067\u3059\u3002bread_add, bread_show\u306efunction\u3092twig\u30c6\u30f3\u30d7\u30ec\u5185\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u306e\u4f5c\u308a\u65b9\u306f\u4eca\u56de\u306e\u30d1\u30f3\u304f\u305a\u306b\u9650\u3089\u305a\u5229\u7528\u304c\u3067\u304d\u307e\u3059\u3002\n\nsrc/App/CommonBundle/Twig/CommonExtension.php\n<?php\n\nnamespace App\\CommonBundle\\Twig;\n\nclass CommonExtension extends \\Twig_Extension\n{\n    private $breads;\n    private $container, $router;\n\n    public function __construct($container, $router)\n    {\n        $this->container = $container;\n        $this->router = $router;\n    }\n    public function getFilters()\n    {\n        return array(           \n            'bread_add' =>  new \\Twig_Filter_Method($this, 'addBread'),\n            'bread_show' =>  new \\Twig_Filter_Method($this, 'showBread', array('is_safe' => array('html')))\n        );\n    }\n    public function addBread($var)\n    {\n        if(!is_array($this->breads)) $this->breads = array();\n        if(is_array($var)){\n\n            foreach($var as $label=>$params){\n\n                if(isset($params['path'])){\n\n                    if(isset($params['params'])){\n                        $url = $this->container->get('router')->generate($params['path'], $params['params']);\n                    } else {\n                        $url = $this->container->get('router')->generate($params['path']);\n                    }\n                    $this->breads[ $label ] = $url;\n\n                } else {\n                    $this->breads[ $label ] = '';\n                }\n            }\n        }\n    }\n    public function showBread($var)\n    {\n        if(!is_array($this->breads)) $this->breads = array();\n        $this->addBread($var);\n\n        $breads = array();\n        foreach($this->breads as $label => $url){\n            if($url){\n                array_push($breads, '<a title=\"'.$label.'\" href=\"'.$url.'\" itemprop=\"url\"><span itemprop=\"title\">'.$label.'</span></a>');\n             } else {\n                array_push($breads, $label);\n             }\n        }\n        return join(' &gt; ', $breads);\n    }\n}\n?>\n\n\n\nbread_add, bread_show \u5229\u7528\u65b9\u6cd5\nbread_add\u3057\u3066\u3044\u304d\u3001bread_show\u3067\u8868\u793a\u3057\u307e\u3059\u3002bread_add('label' => array('path'=>'', 'title'=>''))  \n\n{% set bread = { '\u30da\u30fc\u30b8\u30bf\u30a4\u30c8\u30eb':{'path':'page'}, (title):{} } %}\n\n{{ {'\u30c8\u30c3\u30d7\u30da\u30fc\u30b8':{'path':'homepage'}}|bread_add }}\n{{ bread|bread_show }}\n\n\n\u3068\u3044\u3046\u98a8\u306b\u3059\u308b\u3068\n<a title=\"\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\" href=\"/\" itemprop=\"url\"><span itemprop=\"title\">\u30c8\u30c3\u30d7\u30da\u30fc\u30b8</span></a> &gt; \u30da\u30fc\u30b8\u30bf\u30a4\u30c8\u30eb\n\n\u3068\u3044\u3046\u98a8\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\nSYmfony2\u3067\u30d1\u30f3\u304f\u305a\u6a5f\u80fd\u3092\u3064\u3051\u3088\u3046\u3068\u601d\u3046\u3068Bundle\u3092\u5165\u308c\u3066\u30fc\u3068\u304b\u9762\u5012\u306a\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u69d8\u3005\u306a\u65b9\u6cd5\u3092\u8003\u3048\u305f\u7d50\u679c\u3001\u7261\u8823\u306e\u65b9\u6cd5\u304c\u4e00\u756a\u697d\u3067\u30b9\u30de\u30fc\u30c8\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u308a\u3053\u308c\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\nTwig\u30c6\u30f3\u30d7\u30ec\u306bbread_add\u3057\u3066\u3044\u304d\u3001bread_show\u3067\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\u8003\u3048\u65b9\u304c\u308f\u304b\u308c\u3070\u7c21\u5358\u3067\u3059\u3002\n\n#service.yml \u306b\u30af\u30e9\u30b9\u3092\u767b\u9332\n\napp/config/service.yml \u306b\u66f8\u304d\u307e\u3057\u305f\u304c\u3001\u305d\u308c\u305e\u308c\u306eBundle\u4ee5\u4e0b\u306eservice.yml\u306b\u66f8\u3044\u3066\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\u4e0b\u8a18\u3067\u306fCommonExtension\u30af\u30e9\u30b9\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3001Twig\u306eExtension\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```yaml:app/config/service.yml\nservices:\n\n    app_common.twig.extension:\n        class: App\\CommonBundle\\Twig\\CommonExtension\n        arguments: [\"@service_container\", \"@router\"]\n        tags:\n            - { name: twig.extension }\n        public: true\n    \n```\n\n# CommonExtension\u30af\u30e9\u30b9\n\nCommonExtension.php \u306e\u4e2d\u8eab\u306f\u4e0b\u8a18\u306e\u3068\u304a\u308a\u3067\u3059\u3002bread_add, bread_show\u306efunction\u3092twig\u30c6\u30f3\u30d7\u30ec\u5185\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u306e\u4f5c\u308a\u65b9\u306f\u4eca\u56de\u306e\u30d1\u30f3\u304f\u305a\u306b\u9650\u3089\u305a\u5229\u7528\u304c\u3067\u304d\u307e\u3059\u3002\n\n```php:src/App/CommonBundle/Twig/CommonExtension.php\n<?php\n\nnamespace App\\CommonBundle\\Twig;\n\nclass CommonExtension extends \\Twig_Extension\n{\n    private $breads;\n    private $container, $router;\n\n    public function __construct($container, $router)\n    {\n        $this->container = $container;\n        $this->router = $router;\n    }\n    public function getFilters()\n    {\n        return array(           \n            'bread_add' =>  new \\Twig_Filter_Method($this, 'addBread'),\n            'bread_show' =>  new \\Twig_Filter_Method($this, 'showBread', array('is_safe' => array('html')))\n        );\n    }\n    public function addBread($var)\n    {\n        if(!is_array($this->breads)) $this->breads = array();\n        if(is_array($var)){\n            \n            foreach($var as $label=>$params){\n                \n                if(isset($params['path'])){\n                    \n                    if(isset($params['params'])){\n                        $url = $this->container->get('router')->generate($params['path'], $params['params']);\n                    } else {\n                        $url = $this->container->get('router')->generate($params['path']);\n                    }\n                    $this->breads[ $label ] = $url;\n                    \n                } else {\n                    $this->breads[ $label ] = '';\n                }\n            }\n        }\n    }\n    public function showBread($var)\n    {\n        if(!is_array($this->breads)) $this->breads = array();\n        $this->addBread($var);\n        \n        $breads = array();\n        foreach($this->breads as $label => $url){\n            if($url){\n                array_push($breads, '<a title=\"'.$label.'\" href=\"'.$url.'\" itemprop=\"url\"><span itemprop=\"title\">'.$label.'</span></a>');\n             } else {\n                array_push($breads, $label);\n             }\n        }\n        return join(' &gt; ', $breads);\n    }\n}\n?>\n```\n\n#bread_add, bread_show \u5229\u7528\u65b9\u6cd5\n\nbread_add\u3057\u3066\u3044\u304d\u3001bread_show\u3067\u8868\u793a\u3057\u307e\u3059\u3002bread_add('label' => array('path'=>'__', 'title'=>'__'))  \n\n```php\n\n{% set bread = { '\u30da\u30fc\u30b8\u30bf\u30a4\u30c8\u30eb':{'path':'page'}, (title):{} } %}\n\n{{ {'\u30c8\u30c3\u30d7\u30da\u30fc\u30b8':{'path':'homepage'}}|bread_add }}\n{{ bread|bread_show }}\n\n```\n\n\u3068\u3044\u3046\u98a8\u306b\u3059\u308b\u3068\n\n```html\n<a title=\"\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\" href=\"/\" itemprop=\"url\"><span itemprop=\"title\">\u30c8\u30c3\u30d7\u30da\u30fc\u30b8</span></a> &gt; \u30da\u30fc\u30b8\u30bf\u30a4\u30c8\u30eb\n```\n\n\u3068\u3044\u3046\u98a8\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n", "tags": ["Symfony2"]}