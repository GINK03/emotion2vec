{"context": "\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306fUTF-8\u306a\u3093\u3060\u3051\u3069\u3001\u3069\u3046\u3057\u3066\u3082\u4e00\u90e8\u306e\u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u3092Shift_JIS\u306b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u5834\u5408\u3001afterFilter()\u3067\u5909\u63db\u3059\u308c\u3070UTF-8\u3067\u51fa\u529b\u3067\u304d\u307e\u3059\u3002\n\napp/Controller/HogeController.php\nclass HogeController extends AppController {\n\n    // sjis\u306e\u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u3092utf8\u306b\u5909\u63db\u3057\u3066\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\n    private $__sjis2utf8 = false;\n\n    public function afterFilter() {\n        parent::afterFilter();\n        // sjis\u3092utf8\u306b\u5909\u63db\n        if ($this->__sjis2utf8) {\n            $body = mb_convert_encoding($this->response->body(), 'UTF-8', 'SJIS-win');\n            // \u30e1\u30bf\u30bf\u30b0\u3082\u5909\u63db(\u72b6\u6cc1\u306b\u5fdc\u3058\u3066)\n            $body = str_replace('<meta http-equiv=Content-Type content=\"text/html; charset=shift_jis\">', '<meta http-equiv=Content-Type content=\"text/html; charset=UTF-8\">', $body);\n            $this->response->body($body);\n        }\n    }\n\n    // \u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u304csjis\u306a\u30a2\u30af\u30b7\u30e7\u30f3\n    public function fuga() {\n        .\n        .\n        .\n        $this->__sjis2utf8 = true;\n    }\n}\n\n\nlayout\u3068\u304b\u3082UTF-8\u306e\u3082\u306e\u3068\u5171\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u9055\u3046\u65b9\u6cd5\u3092\u8003\u3048\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u304b\u3082\u3002\n\u30b7\u30b9\u30c6\u30e0\u5168\u4f53\u306fUTF-8\u306a\u3093\u3060\u3051\u3069\u3001\u3069\u3046\u3057\u3066\u3082\u4e00\u90e8\u306e\u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u3092Shift_JIS\u306b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u5834\u5408\u3001afterFilter()\u3067\u5909\u63db\u3059\u308c\u3070UTF-8\u3067\u51fa\u529b\u3067\u304d\u307e\u3059\u3002\n\n```php:app/Controller/HogeController.php\nclass HogeController extends AppController {\n\n    // sjis\u306e\u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u3092utf8\u306b\u5909\u63db\u3057\u3066\u51fa\u529b\u3059\u308b\u304b\u3069\u3046\u304b\n    private $__sjis2utf8 = false;\n\n    public function afterFilter() {\n        parent::afterFilter();\n        // sjis\u3092utf8\u306b\u5909\u63db\n        if ($this->__sjis2utf8) {\n            $body = mb_convert_encoding($this->response->body(), 'UTF-8', 'SJIS-win');\n            // \u30e1\u30bf\u30bf\u30b0\u3082\u5909\u63db(\u72b6\u6cc1\u306b\u5fdc\u3058\u3066)\n            $body = str_replace('<meta http-equiv=Content-Type content=\"text/html; charset=shift_jis\">', '<meta http-equiv=Content-Type content=\"text/html; charset=UTF-8\">', $body);\n            $this->response->body($body);\n        }\n    }\n\n    // \u30d3\u30e5\u30fc\u30d5\u30a1\u30a4\u30eb\u304csjis\u306a\u30a2\u30af\u30b7\u30e7\u30f3\n    public function fuga() {\n        .\n        .\n        .\n        $this->__sjis2utf8 = true;\n    }\n}\n```\n\nlayout\u3068\u304b\u3082UTF-8\u306e\u3082\u306e\u3068\u5171\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u9055\u3046\u65b9\u6cd5\u3092\u8003\u3048\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u304b\u3082\u3002\n", "tags": ["CakePHP", "cakephp2", "Shift_JIS", "sjis", "UTF-8"]}