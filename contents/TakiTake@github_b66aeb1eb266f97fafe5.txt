{"tags": ["CoreOS", "docker-compose"], "context": "\n\nPrepare init script\nTo keep cloud-config.yml simple call init.sh only.\n$ cd /path/to/docker-compose/project\n$ vim init.sh\n\n#!/bin/bash -ex\n\ncd $(dirname $0)\n/opt/bin/docker-compose $1\n\n$ chmod +x init.sh\n\n\nRegister init script to cloud-config\n$ sudo vim /usr/share/oem/cloud-config.yml\n\n#cloud-config\n\ncoreos:\n  units:\n    - name: docker-xxx.service\n      command: start\n      content: |\n        [Unit]\n        Description=Xxx container\n        After=docker.service\n\n        [Service]\n        Restart=always\n        ExecStart=/path/to/docker-compose/project/init.sh start\n        ExecStop=/path/to/docker-compose/project/init.sh stop\n\n# Prepare init script\n\nTo keep cloud-config.yml simple call init.sh only.\n\n```bash\n$ cd /path/to/docker-compose/project\n$ vim init.sh\n```\n\n```bash\n#!/bin/bash -ex\n\ncd $(dirname $0)\n/opt/bin/docker-compose $1\n```\n\n```bash\n$ chmod +x init.sh\n```\n\n# Register init script to cloud-config\n\n```bash\n$ sudo vim /usr/share/oem/cloud-config.yml\n```\n\n```yaml\n#cloud-config\n\ncoreos:\n  units:\n    - name: docker-xxx.service\n      command: start\n      content: |\n        [Unit]\n        Description=Xxx container\n        After=docker.service\n\n        [Service]\n        Restart=always\n        ExecStart=/path/to/docker-compose/project/init.sh start\n        ExecStop=/path/to/docker-compose/project/init.sh stop\n```\n"}