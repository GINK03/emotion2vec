{"tags": ["Rails5", "Rails5", "Heroku", "api", "Ruby"], "context": "\u3053\u306e\u8a18\u4e8b\u306f\u3001\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u307e\u3068\u3081\u3067\u3059\u3002\n\nRails 5 (\u975ebeta) \u3067\u3064\u304f\u308b\u3001API\u30b5\u30fc\u30d0\nRails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Heroku\u3078\u30c7\u30d7\u30ed\u30a4\u3057\u3001\u7121\u6599\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u3082\u3089\u3046\ngithub: dogwood008/fetch_hatena_bookmark_and_post_to_hatena_blog\n\n\nRails 5\u3067\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\nRails 5\u306e\u4f7f\u7528\n\u307e\u305a\u306f\u6e96\u5099\u3002\n$ mkdir fetch_rss_and_post_hateblog\n$ cd fetch_rss_and_post_hateblog\n$ echo \"gem 'rails', '~>5.0'\" > Gemfile\n$ mkdir .bundle\n$ echo '---                                                                                                                  \nBUNDLE_PATH: vendor/bundle\nBUNDLE_DISABLE_SHARED_GEMS: 1\nBUNDLE_BIN: ./.bin' > .bundle/config\n$ sudo yum install -y sqlite-devel # \u5fc5\u8981\u306b\u5fdc\u3058\u3066apt-get\u306a\u3069\n$ bundle install\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3002\n$ rails new . --api\n$ echo \"development:\n  secret_key_base: `rake secret`\n\ntest:\n  secret_key_base: `rake secret`\n\nproduction:\n  secret_key_base: <%= ENV[\\\"SECRET_KEY_BASE\\\"] %>\" > config/secrets.yml\n\n\u3053\u3053\u307e\u3067\u306e\u95a2\u4fc2\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u65e6\u30d7\u30c3\u30b7\u30e5\u3002\n$ gibo osx ruby rails vim >> .gitignore\n$ git init\n$ git remote add origin git://github.com/user/repo.git\n$ git push origin master\n\n\nAPI\u30b5\u30fc\u30d0\u306e\u4f5c\u6210\nRSS\u3092\u53d6\u3063\u3066\u304d\u3066\u3001title, URL, description\u3092\u8fd4\u3059API\u30b5\u30fc\u30d0\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n$ rails g controller post\n\nAPI\u30e2\u30fc\u30c9\u3067\u4f5c\u3089\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\n$ cd app\n$ ls\nchannels  controllers  jobs  mailers  views\n\nRSS\u30d5\u30a3\u30fc\u30c9\u3092\u53d6\u3063\u3066\u304d\u3066\u3001JSON\u3067\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\u306f\u3066\u30d6\u306eRSS\u30d5\u30a3\u30fc\u30c9\u3092 RSS:Parser#parse \u3067\u53d6\u308c\u306a\u3044\u4ef6\u306f\u3001 \u306f\u3066\u306a\u306eAPI\u3092\u4f7f\u3046\u969b\u306b503\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u554f\u984c\u3068\u89e3\u6c7a\u7b56\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\napp/controllers/posts_controller.rb\ndef fetch\n  url = 'http://b.hatena.ne.jp/dogwood008/rss'\n  ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36'\n  rss = open(url, 'User-Agent' => ua)\n  feed = RSS::Parser.parse(rss)\n  rss.close\n  items = feed.items.map do |i|\n    { link: i.link, title: i.title, desc: i.description, date: i.dc_date }\n  end\n  render json: items\nend\n\n\n\nconfig/routes.rb\nRails.application.routes.draw do\n  get '/fetch', to: 'posts#fetch'\nend\n\n\n\u3044\u3056\u3001\u5b9f\u884c\u3002\n$ rails s -b 0.0.0.0\n\nhttp://localhost:3000/posts/fetch\n[{\n  link: \"http://brevis.exblog.jp/24515937/\",\n  title: \"\u30c8\u30e9\u30d6\u30eb\u306b\u306f\u6280\u8853\u7684\u539f\u56e0\u3068\u3001\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u7684\u539f\u56e0\u304c\u3042\u308b : \u30bf\u30a4\u30e0\u30fb\u30b3\u30f3\u30b5\u30eb\u30bf\u30f3\u30c8\u306e\u65e5\u8a8c\u304b\u3089\",\n  desc: \"\u3010\u8981\u7d04\u3068\u79c1\u611f\u3011\u201c\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u7684\u539f\u56e0\u201d = \u4ed5\u7d44\u307f\u306e\u539f\u56e0\u3002\u624b\u3063\u53d6\u308a\u65e9\u304f\u76f4\u3059\u306b\u306f\u6280\u8853\u7684\u8981\u56e0\u3092\u53d6\u308a\u9664\u3051\u3070\u826f\u3044\u3051\u3069\u3001\u4ed5\u7d44\u307f\u304c\u30c0\u30e1\u306a\u3089\u307e\u305f\u4f3c\u305f\u3088\u3046\u306a\u5931\u6557\u3092\u3046\u3080\u3002\",\n  date: \"2016-07-10T15:33:53.000+09:00\"\n},\n  {\n  link: \"http://qiita.com/teradonburi/items/a382a17e1e0245b7d831\",\n  title: \"AWS\u6599\u91d1\u65e9\u898b\u8868\uff08\u30b5\u30fc\u30d0\u30ec\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff09 - Qiita\",\n  desc: \"\u4e00\u5ea6\u81ea\u5206\u3067\u4e00\u901a\u308a\u3084\u3063\u3066\u307f\u305f\u3044\u611f\u3042\u308b\u3002\",\n  date: \"2016-07-10T15:27:49.000+09:00\"\n}, ...]\n\n\u30d2\u30e5\u30fc\u30c3\uff01\uff01\n\u305d\u306e\u4ed6\u3044\u308d\u3044\u308d\u4f5c\u308a\u307e\u3059\u3002\n\nHeroku\u3078\u306e\u30c7\u30d7\u30ed\u30a4\nGetting Started with Rails 5.x on Heroku\u3092\u53c2\u8003\u306b\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u6e96\u5099\nheroku\u306f PostgreSQL \u3092\u63a8\u5968\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u306b\u5408\u308f\u305b\u308b\u3002\n\nGemfile\ngroup :production do\n  gem 'pg'\nend\n\n\nheroku toolbelt\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n$ wget -O- https://toolbelt.heroku.com/install.sh | sh\n$ echo 'PATH=\"/usr/local/heroku/bin:$PATH\"' >> ~/.bash_profile\n$ source ~/.bash_profile\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\u4e88\u3081\u30a2\u30ab\u30a6\u30f3\u30c8\u306fWeb\u304b\u3089\u4f5c\u3063\u3066\u304a\u304f\u3002\n$ heroku login\nheroku-cli: Installing CLI... 21.83MB/21.83MB\nEnter your Heroku credentials.\nEmail: email@example.com\nPassword (typing will be hidden):\nLogged in as email@example.com\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\uff5e\u30c7\u30d7\u30ed\u30a4\n$ heroku create\nHeroku CLI submits usage information back to Heroku. If you would like to disable this, set `skip_analytics: true` in /home/kit/.heroku/config.json\nCreating app... done, \u2b22 XXXXX-YYYYY-12345\nhttps://XXXXX-YYYYY-12345.herokuapp.com/ | https://git.heroku.com/whispering-YYYYY-12345.git\n\norigin \u306e\u4ed6\u306b\u3001\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea heroku \u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n$ git remote show heroku\n* remote heroku\n  Fetch URL: https://git.heroku.com/XXXXX-YYYYY-12345.git\n  Push  URL: https://git.heroku.com/XXXXX-YYYYY-12345.git\n  HEAD branch: (unknown)\n\n\u65e9\u901f\u3001 Heroku \u3078\u30d7\u30c3\u30b7\u30e5\u3057\u3066\u307f\u307e\u3059\u3002\n$ git push heroku master\nCounting objects: 9, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 828 bytes | 0 bytes/s, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote:\nremote: -----> Ruby app detected\nremote: -----> Compiling Ruby/Rails\nremote: -----> Using Ruby version: ruby-2.3.0\nremote: ###### WARNING:\nremote:        You have the `.bundle/config` file checked into your repository\nremote:        It contains local state like the location of the installed bundle\nremote:        as well as configured git local gems, and other settings that should\nremote:        not be shared between multiple checkouts of a single repo. Please\nremote:        remove the `.bundle/` folder from your repo and add it to your `.gitignore` file.\nremote:        https://devcenter.heroku.com/articles/bundler-configuration\nremote:\nremote: -----> Installing dependencies using bundler 1.11.2\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Fetching gem metadata from https://rubygems.org/..........\nremote:        Fetching version metadata from https://rubygems.org/...\nremote:        Fetching dependency metadata from https://rubygems.org/..\nremote:        Installing rake 11.2.2\nremote:        Installing concurrent-ruby 1.0.2\nremote:        Installing i18n 0.7.0\nremote:        Installing thread_safe 0.3.5\nremote:        Installing minitest 5.9.0\nremote:        Installing builder 3.2.2\nremote:        Installing erubis 2.7.0\nremote:        Installing mini_portile2 2.1.0\nremote:        Installing pkg-config 1.1.7\nremote:        Installing nio4r 1.2.1 with native extensions\nremote:        Installing rack 2.0.1\nremote:        Installing websocket-extensions 0.1.2\nremote:        Installing arel 7.0.0\nremote:        Installing mime-types-data 3.2016.0521\nremote:        Installing method_source 0.8.2\nremote:        Using bundler 1.11.2\nremote:        Installing puma 3.4.0 with native extensions\nremote:        Installing thor 0.19.1\nremote:        Installing tzinfo 1.2.2\nremote:        Installing nokogiri 1.6.8 with native extensions\nremote:        Installing websocket-driver 0.6.4 with native extensions\nremote:        Installing rack-test 0.6.3\nremote:        Installing sprockets 3.6.3\nremote:        Installing mime-types 3.1\nremote:        Installing activesupport 5.0.0\nremote:        Installing mail 2.6.4\nremote:        Installing globalid 0.3.6\nremote:        Installing activemodel 5.0.0\nremote:        Installing activejob 5.0.0\nremote:        Installing activerecord 5.0.0\nremote:        Installing rails-dom-testing 2.0.1\nremote:        Installing loofah 2.0.3\nremote:        Installing rails-html-sanitizer 1.0.3\nremote:        Installing actionview 5.0.0\nremote:        Installing actionpack 5.0.0\nremote:        Installing actionmailer 5.0.0\nremote:        Installing actioncable 5.0.0\nremote:        Installing railties 5.0.0\nremote:        Installing sprockets-rails 3.1.1\nremote:        Installing rails 5.0.0\nremote:        Installing pg 0.18.4 with native extensions                                                                           \nremote:        Bundle complete! 9 Gemfile dependencies, 41 gems now installed. \nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\nremote:        Bundle completed (19.95s)\nremote:        Cleaning up the bundler cache.\nremote:\nremote: ###### WARNING:\nremote:        You have the `.bundle/config` file checked into your repository\nremote:        It contains local state like the location of the installed bundle\nremote:        as well as configured git local gems, and other settings that should\nremote:        not be shared between multiple checkouts of a single repo. Please\nremote:        remove the `.bundle/` folder from your repo and add it to your `.gitignore` file.\nremote:        https://devcenter.heroku.com/articles/bundler-configuration\nremote:\nremote: ###### WARNING:\nremote:        No Procfile detected, using the default web server.\nremote:        We recommend explicitly declaring how to boot your server process via a Procfile.\nremote:        https://devcenter.heroku.com/articles/ruby-default-web-server\nremote:\nremote: -----> Discovering process types\nremote:        Procfile declares types     -> (none)\nremote:        Default types for buildpack -> console, rake, web, worker\nremote:\nremote: -----> Compressing...\nremote:        Done: 23.1M\nremote: -----> Launching...\nremote:        Released v6\nremote:        https://XXXXX-YYYYY-12345.herokuapp.com/ deployed to Heroku\nremote:\nremote: Verifying deploy... done.\nTo https://git.heroku.com/XXXXX-YYYYY-12345.git\n * [new branch]      master -> master\n\n\u9014\u4e2d\u3067\u3001 sqlite3.h is missing \u307f\u305f\u3044\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u308a\u3001 \u300c\u8a73\u3057\u304f\u306f https://devcenter.heroku.com/articles/sqlite3 \u3092\u898b\u3066\u306d\u300d\u7684\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u306a\u3089\u3001 Gemfile \u306e group :development \u306e\u4e2d\u306b gem 'sqlite' \u3092\u62bc\u3057\u8fbc\u3081\u307e\u3057\u3087\u3046\u3002\n\nGemfile\ngroup :development do\n  # Use sqlite3 as the database for Active Record\n  gem 'sqlite3'\nend\n\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001DB\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3044\u307e\u3059\u3002\n$ heroku run rake db:migrate\nRunning rake db:migrate on \u2b22 XXXXX-YYYYY-12345... up, run.2785                                                               \nD, [2016-07-12T16:25:40.173919 #3] DEBUG -- :    (11.2ms)  CREATE TABLE \"schema_migrations\" (\"version\" character varying PRIMARY KEY)\nD, [2016-07-12T16:25:40.187941 #3] DEBUG -- :    (9.3ms)  CREATE TABLE \"ar_internal_metadata\" (\"key\" character varying PRIMARY KEY, \"value\" character varying, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\nD, [2016-07-12T16:25:40.190308 #3] DEBUG -- :    (1.0ms)  SELECT pg_try_advisory_lock(1753797496500759360);\nD, [2016-07-12T16:25:40.200901 #3] DEBUG -- :   ActiveRecord::SchemaMigration Load (1.1ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\nI, [2016-07-12T16:25:40.206248 #3]  INFO -- : Migrating to CreatePosts (20160710102422)\nD, [2016-07-12T16:25:40.208344 #3] DEBUG -- :    (0.7ms)  BEGIN\n== 20160710102422 CreatePosts: migrating ======================================\n-- create_table(:posts)\nD, [2016-07-12T16:25:40.216973 #3] DEBUG -- :    (7.4ms)  CREATE TABLE \"posts\" (\"id\" serial primary key, \"title\" character varying, \"url\" character varying, \"comment\" character varying, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\n   -> 0.0085s\n== 20160710102422 CreatePosts: migrated (0.0087s) =============================\n\nD, [2016-07-12T16:25:40.224358 #3] DEBUG -- :   SQL (1.1ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20160710102422\"]]\nD, [2016-07-12T16:25:40.227280 #3] DEBUG -- :    (2.6ms)  COMMIT\nI, [2016-07-12T16:25:40.227414 #3]  INFO -- : Migrating to AddDateToPost (20160710152551)\nD, [2016-07-12T16:25:40.228671 #3] DEBUG -- :    (0.7ms)  BEGIN\n== 20160710152551 AddDateToPost: migrating ====================================\n-- add_column(:posts, :date, :datetime)\nD, [2016-07-12T16:25:40.230074 #3] DEBUG -- :    (1.0ms)  ALTER TABLE \"posts\" ADD \"date\" timestamp\n   -> 0.0013s\n== 20160710152551 AddDateToPost: migrated (0.0014s) ===========================\n\nD, [2016-07-12T16:25:40.231584 #3] DEBUG -- :   SQL (0.8ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20160710152551\"]]\nD, [2016-07-12T16:25:40.233287 #3] DEBUG -- :    (1.5ms)  COMMIT\nD, [2016-07-12T16:25:40.240319 #3] DEBUG -- :   ActiveRecord::InternalMetadata Load (0.9ms)  SELECT  \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1 LIMIT $2  [[\"key\", :environment], [\"LIMIT\", 1]]\nD, [2016-07-12T16:25:40.248994 #3] DEBUG -- :    (0.7ms)  BEGIN\nD, [2016-07-12T16:25:40.251805 #3] DEBUG -- :   SQL (1.0ms)  INSERT INTO \"ar_internal_metadata\" (\"key\", \"value\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"key\"  [[\"key\", \"environment\"], [\"value\", \"production\"], [\"created_at\", 2016-07-12 16:25:40 +0000], [\"updated_at\", 2016-07-12 16:25:40 +0000]]\nD, [2016-07-12T16:25:40.253633 #3] DEBUG -- :    (1.5ms)  COMMIT\nD, [2016-07-12T16:25:40.254643 #3] DEBUG -- :    (0.8ms)  SELECT pg_advisory_unlock(1753797496500759360)\n\n\u3053\u308c\u3067\u304a\u3057\u307e\u3044\u3002\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u308c\u3070\u3001\u30ed\u30b0\u4e2d\u306b\u51fa\u3066\u304d\u305fhttp://~.herokuapp.com\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n\u30c7\u30d0\u30c3\u30b0\n\n\u30d7\u30ed\u30bb\u30b9\u72b6\u614b\nheroku ps \u3067\u73fe\u5728\u306e\u72b6\u614b\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n$ heroku ps\nFree dyno hours quota remaining this month: 1000h 0m (100%)\nFor more information on dyno sleeping and how to upgrade, see:\nhttps://devcenter.heroku.com/articles/dyno-sleeping\n\n=== web (Free): bin/rails server -p $PORT -e $RAILS_ENV (1)\nweb.1: up 2016/07/13 01:25:02 +0900 (~ 2m ago)\n\n\n\u30ed\u30b0\n\u30ed\u30b0\u3092\u898b\u308b\u306a\u3089 heroku logs \u3002 --tail \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3068\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u898b\u3089\u308c\u308b\u3002\n$ heroku logs\n$ heroku logs --tail\n\n\n\u74b0\u5883\u5909\u6570\n# \u74b0\u5883\u5909\u6570\u306e\u4e00\u89a7\n$ heroku config\n=== XXXXX-YYYYY-12345 Config Vars\nDATABASE_URL:             postgres://hogehogehoge:foobarbaz@ec2-NNN-NNN-NNN-NNN.compute-M.amazonaws.com:PPPP/fugapiyo\nLANG:                     en_US.UTF-8\nRACK_ENV:                 production\nRAILS_ENV:                production\nRAILS_LOG_TO_STDOUT:      enabled\nRAILS_SERVE_STATIC_FILES: enabled\nSECRET_KEY_BASE:          foobarbazhogefugapiyo\n\n# \u74b0\u5883\u5909\u6570\u306e\u3046\u3061\u3001\u6307\u5b9a\u3057\u305f\u3082\u306e\u3060\u3051\u3092\u8868\u793a\n$ heroku config:get LANG                                                              \nen_US.UTF-8\n\n# \u74b0\u5883\u5909\u6570\u3092\u30bb\u30c3\u30c8\n$ heroku config:set SECRET_KEY_BASE=`rake secret`                                     \nSetting SECRET_KEY_BASE and restarting \u2b22 XXXXX-YYYYY-12345... done, v8                                                       \nSECRET_KEY_BASE: hogefugapiyofoobarbaz\n\n\n\u30b3\u30f3\u30bd\u30fc\u30eb\n$ heroku run rails console\nRunning rails console on \u2b22 XXXXX-YYYYY-12345... up, run.4519\nLoading production environment (Rails 5.0.0)\nirb(main):001:0> \n\n\n\u30b5\u30fc\u30d0\u306e\u518d\u8d77\u52d5\n$ heroku restart\nRestarting dynos on \u2b22 XXXXX-YYYYY-12345... done\n\n\nHeroku \u7121\u6599\u67a0\u306e\u7bc4\u56f2\n1\u3064\u306e\u30b5\u30fc\u30d0\u30d7\u30ed\u30bb\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3068\u3001 1 dyno \u3092\u4f7f\u7528\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 1 dyno \u30921\u6642\u9593\u4f7f\u7528\u3059\u308b\u3068\u3001 1 dyno hour \u3092\u6d88\u8cbb\u3057\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u5404\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u5bfe\u3057 550 dyno hours \u3092\u3001\u6709\u52b9\u306a\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u3092 heroku \u306b\u767b\u9332\u3057\u3066\u3044\u308c\u3070\u3001\u3055\u3089\u306b 450 dyno hours\uff08\u8a08 1000 dyno hours\uff09 \u3092\u4e00\u6708\u306b\u4ed8\u4e0e\u3055\u308c\u307e\u3059\u3002\n31\u65e5\u9593\u306e\u53ef\u52d5\u306b\u5fc5\u8981\u306a dyno hours \u306f\u5358\u7d14\u8a08\u7b97\u3067 744 dyno hours (= 24 hours * 31 days) \u3067\u3059\u304c\u3001 heroku run console \u3084 heroku run rake db:migrate \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b One-off Dyno \u3068\u547c\u3070\u308c\u308b Dyno \u306e\u5b9f\u884c\u3082\u3001\u5229\u7528\u91cf\u306b\u542b\u307e\u308c\u308b\u306e\u3067\u6ce8\u610f\u3002\n\u4ee5\u524d\u306f\u300c18\u6642\u9593\u7a3c\u50cd\uff066\u6642\u9593\u30b9\u30ea\u30fc\u30d7\u300d\u306e\u3088\u3046\u306a\u5236\u9650\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001\u4eca\u306f\u4e0a\u8a18\u306e\u5236\u9650\u306b\u4ee3\u308f\u308a\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\n\n\u77e5\u3063\u3066\u304a\u304d\u305f\u3044\uff01Heroku\u3092\u4f7f\u3046\u4e0a\u3067\u306f\u5f53\u305f\u308a\u524d\uff1f\u306e16\u306e\u5e38\u8b58\nHeroku\u306e\u7121\u6599\u67a0\u306e\u6599\u91d1\u4f53\u7cfb\u304c2016\u5e746\u67081\u65e5\u304b\u3089\u5909\u308f\u3063\u305f\nFlexible Free Dyno Hours\n\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u307e\u3068\u3081\u3067\u3059\u3002\n\n- [Rails 5 (\u975ebeta) \u3067\u3064\u304f\u308b\u3001API\u30b5\u30fc\u30d0](http://blog.dogwood008.com/entry/rails5_api_server)\n- [Rails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Heroku\u3078\u30c7\u30d7\u30ed\u30a4\u3057\u3001\u7121\u6599\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3057\u3066\u3082\u3089\u3046](http://blog.dogwood008.com/entry/deploy_a_rails_project_to_heroku)\n- [github: dogwood008/fetch_hatena_bookmark_and_post_to_hatena_blog](https://github.com/dogwood008/fetch_hatena_bookmark_and_post_to_hatena_blog)\n\n# Rails 5\u3067\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n## Rails 5\u306e\u4f7f\u7528\n\n\u307e\u305a\u306f\u6e96\u5099\u3002\n\n```bash\n$ mkdir fetch_rss_and_post_hateblog\n$ cd fetch_rss_and_post_hateblog\n$ echo \"gem 'rails', '~>5.0'\" > Gemfile\n$ mkdir .bundle\n$ echo '---                                                                                                                  \nBUNDLE_PATH: vendor/bundle\nBUNDLE_DISABLE_SHARED_GEMS: 1\nBUNDLE_BIN: ./.bin' > .bundle/config\n$ sudo yum install -y sqlite-devel # \u5fc5\u8981\u306b\u5fdc\u3058\u3066apt-get\u306a\u3069\n$ bundle install\n```\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3002\n\n```bash\n$ rails new . --api\n$ echo \"development:\n  secret_key_base: `rake secret`\n\ntest:\n  secret_key_base: `rake secret`\n\nproduction:\n  secret_key_base: <%= ENV[\\\"SECRET_KEY_BASE\\\"] %>\" > config/secrets.yml\n```\n\n\u3053\u3053\u307e\u3067\u306e\u95a2\u4fc2\u30d5\u30a1\u30a4\u30eb\u3092\u4e00\u65e6\u30d7\u30c3\u30b7\u30e5\u3002\n\n```bash\n$ gibo osx ruby rails vim >> .gitignore\n$ git init\n$ git remote add origin git://github.com/user/repo.git\n$ git push origin master\n```\n\n## API\u30b5\u30fc\u30d0\u306e\u4f5c\u6210\n\nRSS\u3092\u53d6\u3063\u3066\u304d\u3066\u3001title, URL, description\u3092\u8fd4\u3059API\u30b5\u30fc\u30d0\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ rails g controller post\n```\n\nAPI\u30e2\u30fc\u30c9\u3067\u4f5c\u3089\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\n```bash\n\n$ cd app\n$ ls\nchannels  controllers  jobs  mailers  views\n```\n\nRSS\u30d5\u30a3\u30fc\u30c9\u3092\u53d6\u3063\u3066\u304d\u3066\u3001JSON\u3067\u8868\u793a\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u306f\u3066\u30d6\u306eRSS\u30d5\u30a3\u30fc\u30c9\u3092 `RSS:Parser#parse` \u3067\u53d6\u308c\u306a\u3044\u4ef6\u306f\u3001 [\u306f\u3066\u306a\u306eAPI\u3092\u4f7f\u3046\u969b\u306b503\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u554f\u984c\u3068\u89e3\u6c7a\u7b56](http://qiita.com/takuya-andou/items/97a68bdae1b7050d3fa5)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n```ruby:app/controllers/posts_controller.rb\ndef fetch\n  url = 'http://b.hatena.ne.jp/dogwood008/rss'\n  ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.103 Safari/537.36'\n  rss = open(url, 'User-Agent' => ua)\n  feed = RSS::Parser.parse(rss)\n  rss.close\n  items = feed.items.map do |i|\n    { link: i.link, title: i.title, desc: i.description, date: i.dc_date }\n  end\n  render json: items\nend\n```\n\n\n```ruby:config/routes.rb\nRails.application.routes.draw do\n  get '/fetch', to: 'posts#fetch'\nend\n```\n\n\u3044\u3056\u3001\u5b9f\u884c\u3002\n\n```bash\n$ rails s -b 0.0.0.0\n```\n\n`http://localhost:3000/posts/fetch`\n\n```json\n[{\n  link: \"http://brevis.exblog.jp/24515937/\",\n  title: \"\u30c8\u30e9\u30d6\u30eb\u306b\u306f\u6280\u8853\u7684\u539f\u56e0\u3068\u3001\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u7684\u539f\u56e0\u304c\u3042\u308b : \u30bf\u30a4\u30e0\u30fb\u30b3\u30f3\u30b5\u30eb\u30bf\u30f3\u30c8\u306e\u65e5\u8a8c\u304b\u3089\",\n  desc: \"\u3010\u8981\u7d04\u3068\u79c1\u611f\u3011\u201c\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u7684\u539f\u56e0\u201d = \u4ed5\u7d44\u307f\u306e\u539f\u56e0\u3002\u624b\u3063\u53d6\u308a\u65e9\u304f\u76f4\u3059\u306b\u306f\u6280\u8853\u7684\u8981\u56e0\u3092\u53d6\u308a\u9664\u3051\u3070\u826f\u3044\u3051\u3069\u3001\u4ed5\u7d44\u307f\u304c\u30c0\u30e1\u306a\u3089\u307e\u305f\u4f3c\u305f\u3088\u3046\u306a\u5931\u6557\u3092\u3046\u3080\u3002\",\n  date: \"2016-07-10T15:33:53.000+09:00\"\n},\n  {\n  link: \"http://qiita.com/teradonburi/items/a382a17e1e0245b7d831\",\n  title: \"AWS\u6599\u91d1\u65e9\u898b\u8868\uff08\u30b5\u30fc\u30d0\u30ec\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\uff09 - Qiita\",\n  desc: \"\u4e00\u5ea6\u81ea\u5206\u3067\u4e00\u901a\u308a\u3084\u3063\u3066\u307f\u305f\u3044\u611f\u3042\u308b\u3002\",\n  date: \"2016-07-10T15:27:49.000+09:00\"\n}, ...]\n```\n\n\u30d2\u30e5\u30fc\u30c3\uff01\uff01\n\u305d\u306e\u4ed6\u3044\u308d\u3044\u308d\u4f5c\u308a\u307e\u3059\u3002\n\n# Heroku\u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\n[Getting Started with Rails 5.x on Heroku](https://devcenter.heroku.com/articles/getting-started-with-rails5)\u3092\u53c2\u8003\u306b\u9032\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u6e96\u5099\n\nheroku\u306f PostgreSQL \u3092\u63a8\u5968\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u306b\u5408\u308f\u305b\u308b\u3002\n\n```ruby:Gemfile\ngroup :production do\n  gem 'pg'\nend\n```\n\nheroku toolbelt\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```bash\n$ wget -O- https://toolbelt.heroku.com/install.sh | sh\n$ echo 'PATH=\"/usr/local/heroku/bin:$PATH\"' >> ~/.bash_profile\n$ source ~/.bash_profile\n```\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\u4e88\u3081\u30a2\u30ab\u30a6\u30f3\u30c8\u306f[Web](https://www.heroku.com/)\u304b\u3089\u4f5c\u3063\u3066\u304a\u304f\u3002\n\n```bash\n$ heroku login\nheroku-cli: Installing CLI... 21.83MB/21.83MB\nEnter your Heroku credentials.\nEmail: email@example.com\nPassword (typing will be hidden):\nLogged in as email@example.com\n```\n\n## \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\uff5e\u30c7\u30d7\u30ed\u30a4\n\n```bash\n$ heroku create\nHeroku CLI submits usage information back to Heroku. If you would like to disable this, set `skip_analytics: true` in /home/kit/.heroku/config.json\nCreating app... done, \u2b22 XXXXX-YYYYY-12345\nhttps://XXXXX-YYYYY-12345.herokuapp.com/ | https://git.heroku.com/whispering-YYYYY-12345.git\n```\n\norigin \u306e\u4ed6\u306b\u3001\u30ea\u30e2\u30fc\u30c8\u30ea\u30dd\u30b8\u30c8\u30ea `heroku` \u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\n```bash\n$ git remote show heroku\n* remote heroku\n  Fetch URL: https://git.heroku.com/XXXXX-YYYYY-12345.git\n  Push  URL: https://git.heroku.com/XXXXX-YYYYY-12345.git\n  HEAD branch: (unknown)\n```\n\n\u65e9\u901f\u3001 `Heroku` \u3078\u30d7\u30c3\u30b7\u30e5\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ git push heroku master\nCounting objects: 9, done.\nDelta compression using up to 2 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (6/6), 828 bytes | 0 bytes/s, done.\nTotal 6 (delta 4), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote:\nremote: -----> Ruby app detected\nremote: -----> Compiling Ruby/Rails\nremote: -----> Using Ruby version: ruby-2.3.0\nremote: ###### WARNING:\nremote:        You have the `.bundle/config` file checked into your repository\nremote:        It contains local state like the location of the installed bundle\nremote:        as well as configured git local gems, and other settings that should\nremote:        not be shared between multiple checkouts of a single repo. Please\nremote:        remove the `.bundle/` folder from your repo and add it to your `.gitignore` file.\nremote:        https://devcenter.heroku.com/articles/bundler-configuration\nremote:\nremote: -----> Installing dependencies using bundler 1.11.2\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Fetching gem metadata from https://rubygems.org/..........\nremote:        Fetching version metadata from https://rubygems.org/...\nremote:        Fetching dependency metadata from https://rubygems.org/..\nremote:        Installing rake 11.2.2\nremote:        Installing concurrent-ruby 1.0.2\nremote:        Installing i18n 0.7.0\nremote:        Installing thread_safe 0.3.5\nremote:        Installing minitest 5.9.0\nremote:        Installing builder 3.2.2\nremote:        Installing erubis 2.7.0\nremote:        Installing mini_portile2 2.1.0\nremote:        Installing pkg-config 1.1.7\nremote:        Installing nio4r 1.2.1 with native extensions\nremote:        Installing rack 2.0.1\nremote:        Installing websocket-extensions 0.1.2\nremote:        Installing arel 7.0.0\nremote:        Installing mime-types-data 3.2016.0521\nremote:        Installing method_source 0.8.2\nremote:        Using bundler 1.11.2\nremote:        Installing puma 3.4.0 with native extensions\nremote:        Installing thor 0.19.1\nremote:        Installing tzinfo 1.2.2\nremote:        Installing nokogiri 1.6.8 with native extensions\nremote:        Installing websocket-driver 0.6.4 with native extensions\nremote:        Installing rack-test 0.6.3\nremote:        Installing sprockets 3.6.3\nremote:        Installing mime-types 3.1\nremote:        Installing activesupport 5.0.0\nremote:        Installing mail 2.6.4\nremote:        Installing globalid 0.3.6\nremote:        Installing activemodel 5.0.0\nremote:        Installing activejob 5.0.0\nremote:        Installing activerecord 5.0.0\nremote:        Installing rails-dom-testing 2.0.1\nremote:        Installing loofah 2.0.3\nremote:        Installing rails-html-sanitizer 1.0.3\nremote:        Installing actionview 5.0.0\nremote:        Installing actionpack 5.0.0\nremote:        Installing actionmailer 5.0.0\nremote:        Installing actioncable 5.0.0\nremote:        Installing railties 5.0.0\nremote:        Installing sprockets-rails 3.1.1\nremote:        Installing rails 5.0.0\nremote:        Installing pg 0.18.4 with native extensions                                                                           \nremote:        Bundle complete! 9 Gemfile dependencies, 41 gems now installed. \nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\nremote:        Bundle completed (19.95s)\nremote:        Cleaning up the bundler cache.\nremote:\nremote: ###### WARNING:\nremote:        You have the `.bundle/config` file checked into your repository\nremote:        It contains local state like the location of the installed bundle\nremote:        as well as configured git local gems, and other settings that should\nremote:        not be shared between multiple checkouts of a single repo. Please\nremote:        remove the `.bundle/` folder from your repo and add it to your `.gitignore` file.\nremote:        https://devcenter.heroku.com/articles/bundler-configuration\nremote:\nremote: ###### WARNING:\nremote:        No Procfile detected, using the default web server.\nremote:        We recommend explicitly declaring how to boot your server process via a Procfile.\nremote:        https://devcenter.heroku.com/articles/ruby-default-web-server\nremote:\nremote: -----> Discovering process types\nremote:        Procfile declares types     -> (none)\nremote:        Default types for buildpack -> console, rake, web, worker\nremote:\nremote: -----> Compressing...\nremote:        Done: 23.1M\nremote: -----> Launching...\nremote:        Released v6\nremote:        https://XXXXX-YYYYY-12345.herokuapp.com/ deployed to Heroku\nremote:\nremote: Verifying deploy... done.\nTo https://git.heroku.com/XXXXX-YYYYY-12345.git\n * [new branch]      master -> master\n```\n\n\u9014\u4e2d\u3067\u3001 `sqlite3.h is missing` \u307f\u305f\u3044\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u308a\u3001 \u300c\u8a73\u3057\u304f\u306f `https://devcenter.heroku.com/articles/sqlite3` \u3092\u898b\u3066\u306d\u300d\u7684\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u306a\u3089\u3001 `Gemfile` \u306e `group :development` \u306e\u4e2d\u306b `gem 'sqlite'` \u3092\u62bc\u3057\u8fbc\u3081\u307e\u3057\u3087\u3046\u3002\n\n```ruby:Gemfile\ngroup :development do\n  # Use sqlite3 as the database for Active Record\n  gem 'sqlite3'\nend\n```\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u3001DB\u306e\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u884c\u3044\u307e\u3059\u3002\n\n```bash\n$ heroku run rake db:migrate\nRunning rake db:migrate on \u2b22 XXXXX-YYYYY-12345... up, run.2785                                                               \nD, [2016-07-12T16:25:40.173919 #3] DEBUG -- :    (11.2ms)  CREATE TABLE \"schema_migrations\" (\"version\" character varying PRIMARY KEY)\nD, [2016-07-12T16:25:40.187941 #3] DEBUG -- :    (9.3ms)  CREATE TABLE \"ar_internal_metadata\" (\"key\" character varying PRIMARY KEY, \"value\" character varying, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\nD, [2016-07-12T16:25:40.190308 #3] DEBUG -- :    (1.0ms)  SELECT pg_try_advisory_lock(1753797496500759360);\nD, [2016-07-12T16:25:40.200901 #3] DEBUG -- :   ActiveRecord::SchemaMigration Load (1.1ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\nI, [2016-07-12T16:25:40.206248 #3]  INFO -- : Migrating to CreatePosts (20160710102422)\nD, [2016-07-12T16:25:40.208344 #3] DEBUG -- :    (0.7ms)  BEGIN\n== 20160710102422 CreatePosts: migrating ======================================\n-- create_table(:posts)\nD, [2016-07-12T16:25:40.216973 #3] DEBUG -- :    (7.4ms)  CREATE TABLE \"posts\" (\"id\" serial primary key, \"title\" character varying, \"url\" character varying, \"comment\" character varying, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\n   -> 0.0085s\n== 20160710102422 CreatePosts: migrated (0.0087s) =============================\n\nD, [2016-07-12T16:25:40.224358 #3] DEBUG -- :   SQL (1.1ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20160710102422\"]]\nD, [2016-07-12T16:25:40.227280 #3] DEBUG -- :    (2.6ms)  COMMIT\nI, [2016-07-12T16:25:40.227414 #3]  INFO -- : Migrating to AddDateToPost (20160710152551)\nD, [2016-07-12T16:25:40.228671 #3] DEBUG -- :    (0.7ms)  BEGIN\n== 20160710152551 AddDateToPost: migrating ====================================\n-- add_column(:posts, :date, :datetime)\nD, [2016-07-12T16:25:40.230074 #3] DEBUG -- :    (1.0ms)  ALTER TABLE \"posts\" ADD \"date\" timestamp\n   -> 0.0013s\n== 20160710152551 AddDateToPost: migrated (0.0014s) ===========================\n\nD, [2016-07-12T16:25:40.231584 #3] DEBUG -- :   SQL (0.8ms)  INSERT INTO \"schema_migrations\" (\"version\") VALUES ($1) RETURNING \"version\"  [[\"version\", \"20160710152551\"]]\nD, [2016-07-12T16:25:40.233287 #3] DEBUG -- :    (1.5ms)  COMMIT\nD, [2016-07-12T16:25:40.240319 #3] DEBUG -- :   ActiveRecord::InternalMetadata Load (0.9ms)  SELECT  \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1 LIMIT $2  [[\"key\", :environment], [\"LIMIT\", 1]]\nD, [2016-07-12T16:25:40.248994 #3] DEBUG -- :    (0.7ms)  BEGIN\nD, [2016-07-12T16:25:40.251805 #3] DEBUG -- :   SQL (1.0ms)  INSERT INTO \"ar_internal_metadata\" (\"key\", \"value\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"key\"  [[\"key\", \"environment\"], [\"value\", \"production\"], [\"created_at\", 2016-07-12 16:25:40 +0000], [\"updated_at\", 2016-07-12 16:25:40 +0000]]\nD, [2016-07-12T16:25:40.253633 #3] DEBUG -- :    (1.5ms)  COMMIT\nD, [2016-07-12T16:25:40.254643 #3] DEBUG -- :    (0.8ms)  SELECT pg_advisory_unlock(1753797496500759360)\n```\n\n\u3053\u308c\u3067\u304a\u3057\u307e\u3044\u3002\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u308c\u3070\u3001\u30ed\u30b0\u4e2d\u306b\u51fa\u3066\u304d\u305fhttp://~.herokuapp.com\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n## \u30c7\u30d0\u30c3\u30b0\n\n### \u30d7\u30ed\u30bb\u30b9\u72b6\u614b\n\n`heroku ps` \u3067\u73fe\u5728\u306e\u72b6\u614b\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```bash\n$ heroku ps\nFree dyno hours quota remaining this month: 1000h 0m (100%)\nFor more information on dyno sleeping and how to upgrade, see:\nhttps://devcenter.heroku.com/articles/dyno-sleeping\n\n=== web (Free): bin/rails server -p $PORT -e $RAILS_ENV (1)\nweb.1: up 2016/07/13 01:25:02 +0900 (~ 2m ago)\n```\n\n### \u30ed\u30b0\n\n\u30ed\u30b0\u3092\u898b\u308b\u306a\u3089 `heroku logs` \u3002 `--tail` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3068\u3001\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u898b\u3089\u308c\u308b\u3002\n\n```bash\n$ heroku logs\n$ heroku logs --tail\n```\n\n### \u74b0\u5883\u5909\u6570\n\n```bash\n# \u74b0\u5883\u5909\u6570\u306e\u4e00\u89a7\n$ heroku config\n=== XXXXX-YYYYY-12345 Config Vars\nDATABASE_URL:             postgres://hogehogehoge:foobarbaz@ec2-NNN-NNN-NNN-NNN.compute-M.amazonaws.com:PPPP/fugapiyo\nLANG:                     en_US.UTF-8\nRACK_ENV:                 production\nRAILS_ENV:                production\nRAILS_LOG_TO_STDOUT:      enabled\nRAILS_SERVE_STATIC_FILES: enabled\nSECRET_KEY_BASE:          foobarbazhogefugapiyo\n```\n\n```bash\n# \u74b0\u5883\u5909\u6570\u306e\u3046\u3061\u3001\u6307\u5b9a\u3057\u305f\u3082\u306e\u3060\u3051\u3092\u8868\u793a\n$ heroku config:get LANG                                                              \nen_US.UTF-8\n```\n\n```bash\n# \u74b0\u5883\u5909\u6570\u3092\u30bb\u30c3\u30c8\n$ heroku config:set SECRET_KEY_BASE=`rake secret`                                     \nSetting SECRET_KEY_BASE and restarting \u2b22 XXXXX-YYYYY-12345... done, v8                                                       \nSECRET_KEY_BASE: hogefugapiyofoobarbaz\n```\n\n### \u30b3\u30f3\u30bd\u30fc\u30eb\n\n```bash\n$ heroku run rails console\nRunning rails console on \u2b22 XXXXX-YYYYY-12345... up, run.4519\nLoading production environment (Rails 5.0.0)\nirb(main):001:0> \n```\n\n### \u30b5\u30fc\u30d0\u306e\u518d\u8d77\u52d5\n\n```bash\n$ heroku restart\nRestarting dynos on \u2b22 XXXXX-YYYYY-12345... done\n```\n\n## Heroku \u7121\u6599\u67a0\u306e\u7bc4\u56f2\n\n1\u3064\u306e\u30b5\u30fc\u30d0\u30d7\u30ed\u30bb\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3068\u3001 `1 dyno` \u3092\u4f7f\u7528\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002 `1 dyno` \u30921\u6642\u9593\u4f7f\u7528\u3059\u308b\u3068\u3001 `1 dyno hour` \u3092\u6d88\u8cbb\u3057\u305f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5404\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u5bfe\u3057 `550 dyno hours` \u3092\u3001\u6709\u52b9\u306a\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u3092 heroku \u306b\u767b\u9332\u3057\u3066\u3044\u308c\u3070\u3001\u3055\u3089\u306b `450 dyno hours\uff08\u8a08 1000 dyno hours\uff09` \u3092\u4e00\u6708\u306b\u4ed8\u4e0e\u3055\u308c\u307e\u3059\u3002\n\n31\u65e5\u9593\u306e\u53ef\u52d5\u306b\u5fc5\u8981\u306a `dyno hours` \u306f\u5358\u7d14\u8a08\u7b97\u3067 `744 dyno hours (= 24 hours * 31 days)` \u3067\u3059\u304c\u3001 `heroku run console` \u3084 `heroku run rake db:migrate` \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b `One-off Dyno` \u3068\u547c\u3070\u308c\u308b `Dyno` \u306e\u5b9f\u884c\u3082\u3001\u5229\u7528\u91cf\u306b\u542b\u307e\u308c\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n\u4ee5\u524d\u306f\u300c18\u6642\u9593\u7a3c\u50cd\uff066\u6642\u9593\u30b9\u30ea\u30fc\u30d7\u300d\u306e\u3088\u3046\u306a\u5236\u9650\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001\u4eca\u306f\u4e0a\u8a18\u306e\u5236\u9650\u306b\u4ee3\u308f\u308a\u307e\u3057\u305f\u3002\n\n### \u53c2\u8003\n\n- [\u77e5\u3063\u3066\u304a\u304d\u305f\u3044\uff01Heroku\u3092\u4f7f\u3046\u4e0a\u3067\u306f\u5f53\u305f\u308a\u524d\uff1f\u306e16\u306e\u5e38\u8b58](http://blog.mah-lab.com/2013/05/16/heroku-commons-16/)\n- [Heroku\u306e\u7121\u6599\u67a0\u306e\u6599\u91d1\u4f53\u7cfb\u304c2016\u5e746\u67081\u65e5\u304b\u3089\u5909\u308f\u3063\u305f](http://tdenc.com/blog/2016/06/03/heroku-new-free-dyno/)\n- [Flexible Free Dyno Hours](https://blog.heroku.com/announcing_heroku_free_ssl_beta_and_flexible_dyno_hours#flexible-free-dyno-hours)\n"}