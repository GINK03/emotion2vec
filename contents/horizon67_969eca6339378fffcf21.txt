{"context": "\n\nPHP7\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n$ sudo rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm\n\n\nPHP7\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install --enablerepo=webtatic-testing php70w php70w-devel php70w-fpm  php70w-mysql php70w-mbstring php70w-pdo php70w-xml\n# \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo chkconfig php-fpm on\n\n\nnginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install nginx\n# \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo chkconfig nginx on\n\n\nnginx\u8a2d\u5b9a\n/etc/nginx/nginx.conf\n# \u4e0b\u8a18\u3092\u4fee\u6b63\nroot         /var/www/html;\n# \u4e0b\u8a18\u3092\u8ffd\u52a0\nlocation ~ \\.php$ {\n    root           html;\n    fastcgi_pass   127.0.0.1:9000;\n    fastcgi_index  index.php;\n    fastcgi_param  SCRIPT_FILENAME  /var/www/html$fastcgi_script_name;\n    include        fastcgi_params;\n}\n\n\nmysql(server, client)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# mysql5.6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n$ sudo rpm -ihv http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm\n$ sudo yum install mysql-server mysql\n# \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo chkconfig mysqld on\n\n\n\u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n$ sudo useradd app\n\n\nwww \u30b0\u30eb\u30fc\u30d7\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u8ffd\u52a0\n$ sudo groupadd www\n\n\n\u30e6\u30fc\u30b6\u30fc\u3092 www \u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\n$ sudo usermod -a -G www app\n# \u30ed\u30b0\u30a2\u30a6\u30c8\n$ exit\n\n# \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u518d\u63a5\u7d9a\u3057groups\u3092\u78ba\u8a8d\n$ sudo su - app\n$ groups\napp www\n\n\n\u30b0\u30eb\u30fc\u30d7\u6240\u6709\u8005\u30fb\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u5909\u66f4\nsudo chown -R root:www /var/www\nsudo chmod 2775 /var/www\nfind /var/www -type d -exec sudo chmod 2775 {} \\;\nfind /var/www -type f -exec sudo chmod 0664 {} \\;\n\n\nphp-fpm\u8a2d\u5b9a\n/etc/php-fpm.d/www.conf\nuser = app\ngroup = www\n\n\nnginx/php-fpm\u8d77\u52d5\nsudo service nginx start\nsudo service php-fpm start\n\n\nPHP\u306e\u52d5\u4f5c\u78ba\u8a8d\n$ sudo su - app\n$ echo \"<?php phpinfo(); ?>\" > /var/www/html/phpinfo.php\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u4f5c\u78ba\u8a8d\nhttp://[\u30d1\u30d6\u30ea\u30c3\u30afip]/phpinfo.php\n\nComposer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ curl -sS https://getcomposer.org/installer | php\n$ sudo mv /home/ec2-user/composer.phar /usr/local/bin/composer\n\n\nlaravel\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo su - app\ncomposer global require \"laravel/installer\"\n\n\nproject\u4f5c\u6210\n$ sudo su - app\n$ cd /var/www/html/\n$ composer create-project --prefer-dist laravel/laravel test\n$ cd test\n$ composer install\n$ php artisan key:generate\n\n\nLaravel\u7528\u306bnginx\u8a2d\u5b9a\u3092\u4fee\u6b63\n/etc/nginx/nginx.conf\n# \u4ee5\u4e0b\u3092\u4fee\u6b63\nroot         /var/www/html/test/public;\n\nlocation / {\n    # \u4ee5\u4e0b\u3092\u8ffd\u52a0\n    try_files $uri /index.php?$query_string;\n}\n\nlocation ~ \\.php$ {\n    root           html;\n    fastcgi_pass   127.0.0.1:9000;\n    fastcgi_index  index.php;\n    # \u4ee5\u4e0b\u3092\u4fee\u6b63\n    fastcgi_param  SCRIPT_FILENAME  /var/www/html/test/public$fastcgi_script_name;\n    include        fastcgi_params;\n}\n\n\nnginx\u3068php-fpm \u518d\u8d77\u52d5\nsudo service nginx restart\nsudo service php-fpm restart\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u4f5c\u78ba\u8a8d\nhttp://[\u30d1\u30d6\u30ea\u30c3\u30afip]\n\u3067Laravel5 TOP\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n\u53c2\u8003\nhttp://owani.net/php/php7-nginx/285/\nhttp://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/install-LAMP.html\n## PHP7\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n```\n$ sudo rpm -Uvh https://mirror.webtatic.com/yum/el6/latest.rpm\n```\n\n## PHP7\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo yum install --enablerepo=webtatic-testing php70w php70w-devel php70w-fpm  php70w-mysql php70w-mbstring php70w-pdo php70w-xml\n# \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo chkconfig php-fpm on\n```\n\n## nginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo yum install nginx\n# \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo chkconfig nginx on\n```\n\n### nginx\u8a2d\u5b9a\n/etc/nginx/nginx.conf\n\n```\n# \u4e0b\u8a18\u3092\u4fee\u6b63\nroot         /var/www/html;\n# \u4e0b\u8a18\u3092\u8ffd\u52a0\nlocation ~ \\.php$ {\n    root           html;\n    fastcgi_pass   127.0.0.1:9000;\n    fastcgi_index  index.php;\n    fastcgi_param  SCRIPT_FILENAME  /var/www/html$fastcgi_script_name;\n    include        fastcgi_params;\n}\n```\n\n## mysql(server, client)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n# mysql5.6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n$ sudo rpm -ihv http://dev.mysql.com/get/mysql-community-release-el6-5.noarch.rpm\n$ sudo yum install mysql-server mysql\n# \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo chkconfig mysqld on\n```\n\n## \u30e6\u30fc\u30b6\u30fc\u4f5c\u6210\n```\n$ sudo useradd app\n```\n### www \u30b0\u30eb\u30fc\u30d7\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u8ffd\u52a0\n```\n$ sudo groupadd www\n```\n\n### \u30e6\u30fc\u30b6\u30fc\u3092 www \u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\n```\n$ sudo usermod -a -G www app\n# \u30ed\u30b0\u30a2\u30a6\u30c8\n$ exit\n\n# \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u518d\u63a5\u7d9a\u3057groups\u3092\u78ba\u8a8d\n$ sudo su - app\n$ groups\napp www\n```\n\n### \u30b0\u30eb\u30fc\u30d7\u6240\u6709\u8005\u30fb\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u5909\u66f4\n```\nsudo chown -R root:www /var/www\nsudo chmod 2775 /var/www\nfind /var/www -type d -exec sudo chmod 2775 {} \\;\nfind /var/www -type f -exec sudo chmod 0664 {} \\;\n```\n\n### php-fpm\u8a2d\u5b9a\n/etc/php-fpm.d/www.conf\n\n```\nuser = app\ngroup = www\n```\n\n### nginx/php-fpm\u8d77\u52d5\n```\nsudo service nginx start\nsudo service php-fpm start\n```\n\n## PHP\u306e\u52d5\u4f5c\u78ba\u8a8d\n```\n$ sudo su - app\n$ echo \"<?php phpinfo(); ?>\" > /var/www/html/phpinfo.php\n```\n\n### \u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u4f5c\u78ba\u8a8d\nhttp://[\u30d1\u30d6\u30ea\u30c3\u30afip]/phpinfo.php\n\n## Composer\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ curl -sS https://getcomposer.org/installer | php\n$ sudo mv /home/ec2-user/composer.phar /usr/local/bin/composer\n```\n\n## laravel\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ sudo su - app\ncomposer global require \"laravel/installer\"\n```\n\n## project\u4f5c\u6210\n```\n$ sudo su - app\n$ cd /var/www/html/\n$ composer create-project --prefer-dist laravel/laravel test\n$ cd test\n$ composer install\n$ php artisan key:generate\n```\n\n## Laravel\u7528\u306bnginx\u8a2d\u5b9a\u3092\u4fee\u6b63\n/etc/nginx/nginx.conf\n\n```\n# \u4ee5\u4e0b\u3092\u4fee\u6b63\nroot         /var/www/html/test/public;\n\nlocation / {\n    # \u4ee5\u4e0b\u3092\u8ffd\u52a0\n    try_files $uri /index.php?$query_string;\n}\n\nlocation ~ \\.php$ {\n    root           html;\n    fastcgi_pass   127.0.0.1:9000;\n    fastcgi_index  index.php;\n    # \u4ee5\u4e0b\u3092\u4fee\u6b63\n    fastcgi_param  SCRIPT_FILENAME  /var/www/html/test/public$fastcgi_script_name;\n    include        fastcgi_params;\n}\n```\n\n### nginx\u3068php-fpm \u518d\u8d77\u52d5\n```\nsudo service nginx restart\nsudo service php-fpm restart\n```\n\n### \u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u4f5c\u78ba\u8a8d\nhttp://[\u30d1\u30d6\u30ea\u30c3\u30afip]\n\u3067Laravel5 TOP\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n## \u53c2\u8003\nhttp://owani.net/php/php7-nginx/285/\nhttp://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/install-LAMP.html\n", "tags": ["PHP7", "laravel5"]}