{"context": " More than 1 year has passed since last update.\n\n\u7d4c\u7def\ngit\u3067yaml\u306ediff\u3060\u3051\u6587\u5b57\u5217\u3067\u53d6\u5f97\u3057\u305f\u304f\u306a\u3063\u305f\n\npython\u304b\u3089git\u4f7f\u3046\ngitpython \u3063\u3066\u3044\u3046\u306e\u3067git\u306e\u60c5\u5831\u3092\u3044\u305f\u3060\u304f\npip\u3067\u5165\u308b\npip install gitpython\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\nhttps://pythonhosted.org/GitPython/0.3.1/reference.html\n\u3053\u3093\u306a\u611f\u3058\u3067\u4f7f\u3048\u307e\u3057\u305f\n\ndiff.py\n# coding: utf-8\n\nimport git\nfrom . import PATH\n\n\"\"\"\ngit diff HEAD HEAD^\n\u3057\u305f\u3068\u304d\u306b .yaml\u30d5\u30a1\u30a4\u30eb\u306e\u5dee\u5206\u3060\u3051\u6587\u5b57\u5217\u3067\u3068\u308a\u305f\u3044\n\"\"\"\n\n\nclass Diff(object):\n    \"\"\"HEAD \u3068 HEAD^ \u306e\u5dee\u5206\u306ediff\u3092yaml\u306e\u3060\u3051\u5f15\u3044\u3066\u304f\u308c\u308b\"\"\"\n\n    DELIMITER = \"\\n\\n\"\n\n    def __init__(self, repo_path):\n        self.repo = git.Repo(repo_path)\n        self.head = self.repo.head.commit\n        self.parent = self.head.parents[0]\n\n    def yaml_diff_as_patch(self):\n        yaml_diffs = [\n            unicode(d.diff) for d\n            in self.parent.diff(self.head, \n                                create_patch=True)\n            # .yaml\u3063\u3066\u8a00\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u307f\n            if d.b_blob.name.endswith('.yaml') \n        ]\n        return self.DELIMITER.join(yaml_diffs)\n\n\nif __name__ == '__main__':\n    obj = Diff(PATH)\n    print obj.yaml_diff_as_patch()\n\n\n\n## \u7d4c\u7def\n\ngit\u3067yaml\u306ediff\u3060\u3051\u6587\u5b57\u5217\u3067\u53d6\u5f97\u3057\u305f\u304f\u306a\u3063\u305f\n\n\n## python\u304b\u3089git\u4f7f\u3046\n\ngitpython \u3063\u3066\u3044\u3046\u306e\u3067git\u306e\u60c5\u5831\u3092\u3044\u305f\u3060\u304f\npip\u3067\u5165\u308b\n\n```\npip install gitpython\n```\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u3053\u3061\u3089\nhttps://pythonhosted.org/GitPython/0.3.1/reference.html\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u4f7f\u3048\u307e\u3057\u305f\n\n\n```python:diff.py \n# coding: utf-8\n\nimport git\nfrom . import PATH\n\n\"\"\"\ngit diff HEAD HEAD^\n\u3057\u305f\u3068\u304d\u306b .yaml\u30d5\u30a1\u30a4\u30eb\u306e\u5dee\u5206\u3060\u3051\u6587\u5b57\u5217\u3067\u3068\u308a\u305f\u3044\n\"\"\"\n\n\nclass Diff(object):\n    \"\"\"HEAD \u3068 HEAD^ \u306e\u5dee\u5206\u306ediff\u3092yaml\u306e\u3060\u3051\u5f15\u3044\u3066\u304f\u308c\u308b\"\"\"\n\n    DELIMITER = \"\\n\\n\"\n\n    def __init__(self, repo_path):\n        self.repo = git.Repo(repo_path)\n        self.head = self.repo.head.commit\n        self.parent = self.head.parents[0]\n\n    def yaml_diff_as_patch(self):\n        yaml_diffs = [\n            unicode(d.diff) for d\n            in self.parent.diff(self.head, \n\t\t\t\t\t\t\t\tcreate_patch=True)\n\t\t\t# .yaml\u3063\u3066\u8a00\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u307f\n            if d.b_blob.name.endswith('.yaml') \n        ]\n        return self.DELIMITER.join(yaml_diffs)\n\n\nif __name__ == '__main__':\n    obj = Diff(PATH)\n    print obj.yaml_diff_as_patch()\n```\n", "tags": ["Python", "Git", "YAML"]}