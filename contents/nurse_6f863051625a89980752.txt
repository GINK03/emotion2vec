{"context": " More than 1 year has passed since last update.\n\n\u5e8f\n\u6628\u4eca\u3001Unix\u74b0\u5883\u3067\u306f\u305d\u308c\u305e\u308c\u306e\u30de\u30b7\u30f3\u3067Ruby\u3092\u30d3\u30eb\u30c9\u3057\u3001native gem\u3092\u30d3\u30eb\u30c9\u3059\u308b\u306e\u304c\u4e00\u822c\u7684\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u4e00\u65b9\u3001Windows\u3067\u306f\u672a\u3060\u306bC\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u74b0\u5883\u306f\u5c11\u6570\u6d3e\u3067\u3059\u306e\u3067\u3001\u30d0\u30a4\u30ca\u30eagem\u306e\u914d\u5e03\u304c\u671b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001Windows\u7528\u30d0\u30a4\u30ca\u30eagem\u30922.0.0/2.1/2.2\u306832bit/64bit\u30676\u30d0\u30fc\u30b8\u30e7\u30f3\u30d3\u30eb\u30c9\u3059\u308b\u306e\u306f\u8ab0\u306b\u3068\u3063\u3066\u3082\u8ca0\u62c5\u3067\u3059\u3002\n\nrake-compiler-dock is awesome\n\u305d\u3093\u306a\u72b6\u6cc1\u3092\u89e3\u6c7a\u3059\u308b\u30b9\u30fc\u30d1\u30fc\u30e9\u30a4\u30d5\u30c1\u30a7\u30f3\u30b8\u30f3\u30b0\u306agem\u304crake-compiler-dock\u3067\u3059\u3002\u8a73\u3057\u304f\u306fREADME\u306e\u901a\u308a\u3067\u3059\u304c\u3001Docker Toolbox\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u74b0\u5883\u3067rake-compiler-dock\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305fgem\u3092bundle exec rake build:windows\u3068\u3059\u308b\u3068\u3001docker\u3067\u30d3\u30eb\u30c9\u7528\u306eLinux\u74b0\u5883\u304c\u7acb\u3061\u4e0a\u304c\u308a\u3001\u3057\u3070\u3089\u304f\u5f85\u3064\u3068\u30ed\u30fc\u30ab\u30eb\u306bpkg/-x86-mingw32.gem\u3068-x64-mingw32.gem\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3059\u3002\u4fbf\u5229\uff01\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5909\u66f4\u3092\u884c\u3048\u3070\u5c0e\u5165\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u662f\u975e\u7686\u3055\u3093\u5c0e\u5165\u3057\u307e\u3057\u3087\u3046\u3002\ndiff --git a/Rakefile b/Rakefile\nindex 84443f9..dbfb045 100644\n--- a/Rakefile\n+++ b/Rakefile\n@@ -1,4 +1,5 @@\n-require \"bundler/gem_tasks\"\n+require \"bundler\"\n+Bundler::GemHelper.install_tasks\n require \"rspec/core/rake_task\"\n\n RSpec::Core::RakeTask.new(:spec)\n@@ -9,6 +10,19 @@ require \"rake/extensiontask\"\n task :build => :compile\n task :spec => :compile\n\n-Rake::ExtensionTask.new(\"strptime\") do |ext|\n-  ext.lib_dir = \"lib/strptime\"\n+spec = eval File.read(\"strptime.gemspec\")\n+Rake::ExtensionTask.new(\"strptime\", spec) do |ext|\n+  ext.ext_dir = 'ext/strptime'\n+  ext.cross_compile = true\n+  ext.lib_dir = File.join(*['lib', 'strptime', ENV['FAT_DIR']].compact)\n+  # cross_platform names are of MRI's platform name\n+  ext.cross_platform = ['x86-mingw32', 'x64-mingw32']\n+end\n+\n+namespace :build do\n+  desc 'Build gems for Windows per rake-compiler-dock'\n+  task :windows do\n+    require 'rake_compiler_dock'\n+    RakeCompilerDock.sh 'bundle && rake cross native gem RUBY_CC_VERSION=2.0.0:2.1.6:2.2.2'\n+  end\n end\ndiff --git a/lib/strptime.rb b/lib/strptime.rb\nindex 049d0c1..c18c7e2 100644\n--- a/lib/strptime.rb\n+++ b/lib/strptime.rb\n@@ -1,5 +1,9 @@\n require \"strptime/version\"\n-require \"strptime/strptime\"\n+begin\n+  require \"strptime/#{RUBY_VERSION[/\\d+\\.\\d+/]}/strptime\"\n+rescue LoadError\n+  require \"strptime/strptime\"\n+end\n\n class Strptime\n   # Your code goes here...\ndiff --git a/strptime.gemspec b/strptime.gemspec\nindex df30440..7b0a8e4 100644\n--- a/strptime.gemspec\n+++ b/strptime.gemspec\n@@ -23,6 +23,6 @@ Gem::Specification.new do |spec|\n\n   spec.add_development_dependency \"bundler\"\n   spec.add_development_dependency \"rake\"\n   spec.add_development_dependency \"rake-compiler\"\n+  spec.add_development_dependency 'rake-compiler-dock'\n   spec.add_development_dependency \"rspec\"\ndiff --git a/README.md b/README.md\nindex 29185fa..c5b8da5 100644\n--- a/README.md\n+++ b/README.md\n@@ -1,6 +1,8 @@\n # Strptime\n\n [![Build Status](https://travis-ci.org/nurse/strptime.png)](https://travis-ci.org/nurse/strptime)\n+[![Build status](https://ci.appveyor.com/api/projects/status/9wr116l8uy1bdcxf/branch/master?svg=true)](https://ci.appveyor.com/project/nurse/strptime/branch/master)\n+\n\n Welcome to your new gem! In this directory, you'll find the files you need to be able to package up your Ruby library into a gem. Put your Ruby code in the file `lib/strptime`. To experiment with that code, run `bin/console` for an interactive prompt.\n\ndiff --git a/appveyor.yml b/appveyor.yml\nnew file mode 100644\nindex 0000000..d848da2\n--- /dev/null\n+++ b/appveyor.yml\n@@ -0,0 +1,16 @@\n+---\n+install:\n+  - SET PATH=C:\\Ruby%ruby_version%\\bin;%PATH%\n+  - ruby --version\n+  - gem --version\n+  - bundle install\n+build_script:\n+  - bundle exec rake -rdevkit\n+environment:\n+  matrix:\n+    - ruby_version: \"200\"\n+    - ruby_version: \"200-x64\"\n+    - ruby_version: \"21\"\n+    - ruby_version: \"21-x64\"\n+    - ruby_version: \"22\"\n+    - ruby_version: \"22-x64\"\n\n\u306a\u304a\u3001\u3064\u3044\u3067\u306bAppVeyor\u306e\u8a2d\u5b9a\u3082\u306e\u8a2d\u5b9a\u3082\u8f09\u305b\u3066\u3044\u308b\u306e\u3067\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n## \u5e8f\n\u6628\u4eca\u3001Unix\u74b0\u5883\u3067\u306f\u305d\u308c\u305e\u308c\u306e\u30de\u30b7\u30f3\u3067Ruby\u3092\u30d3\u30eb\u30c9\u3057\u3001native gem\u3092\u30d3\u30eb\u30c9\u3059\u308b\u306e\u304c\u4e00\u822c\u7684\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u4e00\u65b9\u3001Windows\u3067\u306f\u672a\u3060\u306bC\u30b3\u30f3\u30d1\u30a4\u30e9\u3092\u5c0e\u5165\u3057\u3066\u3044\u308b\u74b0\u5883\u306f\u5c11\u6570\u6d3e\u3067\u3059\u306e\u3067\u3001\u30d0\u30a4\u30ca\u30eagem\u306e\u914d\u5e03\u304c\u671b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u304b\u3057\u3001Windows\u7528\u30d0\u30a4\u30ca\u30eagem\u30922.0.0/2.1/2.2\u306832bit/64bit\u30676\u30d0\u30fc\u30b8\u30e7\u30f3\u30d3\u30eb\u30c9\u3059\u308b\u306e\u306f\u8ab0\u306b\u3068\u3063\u3066\u3082\u8ca0\u62c5\u3067\u3059\u3002\n## rake-compiler-dock is awesome\n\u305d\u3093\u306a\u72b6\u6cc1\u3092\u89e3\u6c7a\u3059\u308b\u30b9\u30fc\u30d1\u30fc\u30e9\u30a4\u30d5\u30c1\u30a7\u30f3\u30b8\u30f3\u30b0\u306agem\u304c[rake-compiler-dock](https://github.com/rake-compiler/rake-compiler-dock)\u3067\u3059\u3002\u8a73\u3057\u304f\u306fREADME\u306e\u901a\u308a\u3067\u3059\u304c\u3001[Docker Toolbox](https://www.docker.com/docker-toolbox)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u74b0\u5883\u3067rake-compiler-dock\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u305fgem\u3092`bundle exec rake build:windows`\u3068\u3059\u308b\u3068\u3001docker\u3067\u30d3\u30eb\u30c9\u7528\u306eLinux\u74b0\u5883\u304c\u7acb\u3061\u4e0a\u304c\u308a\u3001\u3057\u3070\u3089\u304f\u5f85\u3064\u3068\u30ed\u30fc\u30ab\u30eb\u306bpkg/*-x86-mingw32.gem\u3068*-x64-mingw32.gem\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3059\u3002\u4fbf\u5229\uff01\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5909\u66f4\u3092\u884c\u3048\u3070\u5c0e\u5165\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u662f\u975e\u7686\u3055\u3093\u5c0e\u5165\u3057\u307e\u3057\u3087\u3046\u3002\n\n```diff\ndiff --git a/Rakefile b/Rakefile\nindex 84443f9..dbfb045 100644\n--- a/Rakefile\n+++ b/Rakefile\n@@ -1,4 +1,5 @@\n-require \"bundler/gem_tasks\"\n+require \"bundler\"\n+Bundler::GemHelper.install_tasks\n require \"rspec/core/rake_task\"\n \n RSpec::Core::RakeTask.new(:spec)\n@@ -9,6 +10,19 @@ require \"rake/extensiontask\"\n task :build => :compile\n task :spec => :compile\n \n-Rake::ExtensionTask.new(\"strptime\") do |ext|\n-  ext.lib_dir = \"lib/strptime\"\n+spec = eval File.read(\"strptime.gemspec\")\n+Rake::ExtensionTask.new(\"strptime\", spec) do |ext|\n+  ext.ext_dir = 'ext/strptime'\n+  ext.cross_compile = true\n+  ext.lib_dir = File.join(*['lib', 'strptime', ENV['FAT_DIR']].compact)\n+  # cross_platform names are of MRI's platform name\n+  ext.cross_platform = ['x86-mingw32', 'x64-mingw32']\n+end\n+\n+namespace :build do\n+  desc 'Build gems for Windows per rake-compiler-dock'\n+  task :windows do\n+    require 'rake_compiler_dock'\n+    RakeCompilerDock.sh 'bundle && rake cross native gem RUBY_CC_VERSION=2.0.0:2.1.6:2.2.2'\n+  end\n end\ndiff --git a/lib/strptime.rb b/lib/strptime.rb\nindex 049d0c1..c18c7e2 100644\n--- a/lib/strptime.rb\n+++ b/lib/strptime.rb\n@@ -1,5 +1,9 @@\n require \"strptime/version\"\n-require \"strptime/strptime\"\n+begin\n+  require \"strptime/#{RUBY_VERSION[/\\d+\\.\\d+/]}/strptime\"\n+rescue LoadError\n+  require \"strptime/strptime\"\n+end\n \n class Strptime\n   # Your code goes here...\ndiff --git a/strptime.gemspec b/strptime.gemspec\nindex df30440..7b0a8e4 100644\n--- a/strptime.gemspec\n+++ b/strptime.gemspec\n@@ -23,6 +23,6 @@ Gem::Specification.new do |spec|\n \n   spec.add_development_dependency \"bundler\"\n   spec.add_development_dependency \"rake\"\n   spec.add_development_dependency \"rake-compiler\"\n+  spec.add_development_dependency 'rake-compiler-dock'\n   spec.add_development_dependency \"rspec\"\ndiff --git a/README.md b/README.md\nindex 29185fa..c5b8da5 100644\n--- a/README.md\n+++ b/README.md\n@@ -1,6 +1,8 @@\n # Strptime\n \n [![Build Status](https://travis-ci.org/nurse/strptime.png)](https://travis-ci.org/nurse/strptime)\n+[![Build status](https://ci.appveyor.com/api/projects/status/9wr116l8uy1bdcxf/branch/master?svg=true)](https://ci.appveyor.com/project/nurse/strptime/branch/master)\n+\n \n Welcome to your new gem! In this directory, you'll find the files you need to be able to package up your Ruby library into a gem. Put your Ruby code in the file `lib/strptime`. To experiment with that code, run `bin/console` for an interactive prompt.\n \ndiff --git a/appveyor.yml b/appveyor.yml\nnew file mode 100644\nindex 0000000..d848da2\n--- /dev/null\n+++ b/appveyor.yml\n@@ -0,0 +1,16 @@\n+---\n+install:\n+  - SET PATH=C:\\Ruby%ruby_version%\\bin;%PATH%\n+  - ruby --version\n+  - gem --version\n+  - bundle install\n+build_script:\n+  - bundle exec rake -rdevkit\n+environment:\n+  matrix:\n+    - ruby_version: \"200\"\n+    - ruby_version: \"200-x64\"\n+    - ruby_version: \"21\"\n+    - ruby_version: \"21-x64\"\n+    - ruby_version: \"22\"\n+    - ruby_version: \"22-x64\"\n```\n\u306a\u304a\u3001\u3064\u3044\u3067\u306b[AppVeyor](http://www.appveyor.com/)\u306e\u8a2d\u5b9a\u3082\u306e\u8a2d\u5b9a\u3082\u8f09\u305b\u3066\u3044\u308b\u306e\u3067\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n", "tags": ["Windows", "Ruby", "rubygems"]}