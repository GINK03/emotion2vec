{"context": " More than 1 year has passed since last update.\n\n\u516c\u958b\u9375\u30fb\u79d8\u5bc6\u9375\u767a\u884c\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u7121\u3057\u3067\u516c\u958b\u9375\u30fb\u79d8\u5bc6\u9375\u767a\u884c\nssh-keygen -t rsa -b 2048 -N \"\" -f /tmp/id\n\n/tmp/id \u304c\u79d8\u5bc6\u9375\u3001/tmp/id.pub \u304c\u516c\u958b\u9375\u3068\u306a\u308b\n\u3053\u308c\u3089\u3092\u4eba\u6570\u5206\u767a\u884c\u3057\u3001\u79d8\u5bc6\u9375\u306f sftp \u306a\u3069\u306e\u30bb\u30ad\u30e5\u30a2\u306a\u901a\u4fe1\u3067\u5404\u4eba\u306b\u6e21\u3059\n\u516c\u958b\u9375\u306f cat \u306a\u3069\u3067\u4e2d\u8eab\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30b3\u30d4\u30da\u3067\u554f\u984c\u306a\u3044\n\u307e\u305f\u3001\u516c\u958b\u9375\u306f\u884c\u672b\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30db\u30b9\u30c8\u540d\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u3053\u308c\u306f\u524a\u9664\u3057\u3066\u304a\u304f\n\n/tmp/id\n-----BEGIN RSA PRIVATE KEY-----\nMIIEogIBAAKCAQEA6h7MF46Nxcuhp34o1THSBuVvy7DsL02mo0pB77KfD/XYZIq7\nCPkhnWm3Fp28+Yu85qalZmCD6wGIBQAEMVnXJmggjoRMExGu8bWtMLpZiWl9CUWi\n+m29p46L56GkTxpPdZkypYEEe7EGeNkh8bGtA7l2VLrVcYdv0grpu35DMUscSXAT\ndGpbcjQ5nDZm2pFRPRVLGHhZ5jY9kxF7jMYfTogOjwzkuvOc9U+zwei8Jy3g6xqk\nlfI5JNdUMIGQ0HM9FUHgBSHIBpZXXRtfcZig4VEXfSuVJMhJfM5TE1899Og2gTW1\nVu4DtUTjmPhZCz+7BayrdejxiB+92B6Jkb778wIBIwKCAQEAtJtqPg7iZWKSpce5\nGX40TnZ60FVIfEM3aAYVm6cM/a8GBGsFUBCk5yWqfyk6AlXa3dEDQFkVTuPsliSV\nhSgMX3Tl6kjM+MR/pITWD6WyyRbczKNvGPWSTg7g9IQCaOhpLtVEU8ntg/2XR0hq\npIG/+48SJBsZr1nZ6yz9c2FnCMNwMTCdLU3WR6g4bOcKVZdXUPmMpA+NPhrXG7ib\nr9rFTuV9KlpMq/XL8I6rEl6/xWF1VZByXRruVpv7lRfsZ13d7sg9U5iUn9afR3Gf\nq7TL+R72V+kS1C51NODSXn8n7apSP4+Ew20AGpZTw85sZ0QlL8ySbcA7/673/nxh\nVeoHKwKBgQD3ypBkmzPxV5LC6/hTzA7oCmtI727p8LMBXjkjUb0H6QiDudhD/8Hd\nnPPqmD4pTAwohRZIjFeZlK1Sq77jpU7Xhal+CHcGzYankiW62Vhx+HFTwZmzZw++\nS602ehnOaOqBUKzSGmHRZOrO+Xsce0RB9h/MKduICc3hHzXNO2X/UQKBgQDx4EtU\n4Nr/ABy7xEH8Lce1o8VVVF2S8Nuzlaaq29EOJSamNgHxfXfc56LYcKsCj2p/HQa+\nToqs+feCgR7sfzjwiXheV2m0tbcaNXVQ35gv+0XZu2O/2hQGOG90Mb0MYWNKkkoa\nsP7mU9AZ0RLV9yfgjzfVoVaW+f1F6keAiCmeAwKBgQCGg+f8Gb0cnUEKupy/xou/\nyyRMKjTlZWh9FeSA4zq7Jrt6tVgk6ezmBL7tENFJnk++OZ5h5cknfJial79louGo\nMp3WtCNbduKyvQ0q6wQgnM/OYch3VTRunhwzhByjQETJ21aArzxqW1rlYtxujA8c\nfkvGmmE7OIW0uSvVz8mn2wKBgHV7kk3MTRzFikyShnMsLc1A6tGsonqSPtOR1Jwh\noA4vTUlqsHycBwTliZxT+0pi6pWDIIhSCNesnMpb+RPIw+KL6gHv8YOouAVqbC6Y\nfR6enkUvIdI2uUTZlThv7hv0ydPDZdJzOfrYQIGRb4x/XIMDvAitczNjewSznxKL\nR2oBAoGALQKKyjxLKxiX89mMD7cLcT4Vg4Z2mpCGKEY9ZVeMz+aG+NR6AVR6j5Ik\n682R4Cgiln5UMXA9L6ZZaUqlspWbHnFbfZUbEv/Q2BZWLr6j4xc7Y8Hj1DAVAUKp\nSCkwwkWnJlwMGtTxI2aRuBUuWt5muJX84F1TxNM237W5MWea6D4=\n-----END RSA PRIVATE KEY-----\n\n\n\n/tmp/id.pub\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6h7MF46Nxcuhp34o1THSBuVvy7DsL02mo0pB77KfD/XYZIq7CPkhnWm3Fp28+Yu85qalZmCD6wGIBQAEMVnXJmggjoRMExGu8bWtMLpZiWl9CUWi+m29p46L56GkTxpPdZkypYEEe7EGeNkh8bGtA7l2VLrVcYdv0grpu35DMUscSXATdGpbcjQ5nDZm2pFRPRVLGHhZ5jY9kxF7jMYfTogOjwzkuvOc9U+zwei8Jy3g6xqklfI5JNdUMIGQ0HM9FUHgBSHIBpZXXRtfcZig4VEXfSuVJMhJfM5TE1899Og2gTW1Vu4DtUTjmPhZCz+7BayrdejxiB+92B6Jkb778w==\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u5074\u4f5c\u696d\n\nOpenSSH\u306eLDAP\u30b5\u30dd\u30fc\u30c8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nyum -y install openssh-ldap\ncp -a /usr/share/doc/openssh-ldap-5.3p1/openssh-lpk-openldap.schema /etc/openldap/schema/openssh.schema\n\n\nOpenLDAP\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\ninclude /etc/openldap/schema/openssh.schema \u3092\u8ffd\u8a18\u3059\u308b\n\n/etc/openldap/slapd.conf\ninclude /etc/openldap/schema/corba.schema\ninclude /etc/openldap/schema/core.schema\ninclude /etc/openldap/schema/cosine.schema\ninclude /etc/openldap/schema/duaconf.schema\ninclude /etc/openldap/schema/dyngroup.schema\ninclude /etc/openldap/schema/inetorgperson.schema\ninclude /etc/openldap/schema/java.schema\ninclude /etc/openldap/schema/misc.schema\ninclude /etc/openldap/schema/nis.schema\ninclude /etc/openldap/schema/openldap.schema\ninclude /etc/openldap/schema/ppolicy.schema\ninclude /etc/openldap/schema/collective.schema\ninclude /etc/openldap/schema/openssh.schema\n\n# \u63a5\u7d9a\u30d7\u30ed\u30c8\u30b3\u30eb\nallow bind_v2\n\n# \u7ba1\u7406\u30d5\u30a1\u30a4\u30eb\npidfile     /var/run/openldap/slapd.pid\nargsfile    /var/run/openldap/slapd.args\n\n# TLS\u8a2d\u5b9a\n#TLSCACertificatePath  /etc/openldap/ssl/cacert.pem\n#TLSCertificateFile    /etc/openldap/ssl/server.crt\n#TLSCertificateKeyFile /etc/openldap/ssl/server.key\n\n# userPassword\u306b\u95a2\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to attrs=userPassword\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by anonymous auth\n    by * none\n\n# \u305d\u306e\u4ed6\u306e\u5c5e\u6027\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to *\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by * read\n\n# monitor\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\ndatabase monitor\naccess to *\n    by dn.exact=\"cn=Manager,dc=example,dc=com\" read\n    by * none\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\ndatabase    bdb\nsuffix      \"dc=example,dc=com\"\ncheckpoint  1024 15\nrootdn      \"cn=Manager,dc=example,dc=com\"\nrootpw      {SSHA}fCkF7qPmO1cnQsPun1fixcrhCNP+Kerd\ndirectory   /var/lib/ldap\n\n# index\u306e\u8a2d\u5b9a\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n\n\n\nLDAP\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\n/etc/init.d/slapd stop\nrm -rf /etc/openldap/slapd.d/*\nsudo -u ldap slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d\n/etc/init.d/slapd start\n\n\nLDAP\u30b5\u30fc\u30d0\u30fc\u306b\u5404\u30e6\u30fc\u30b6\u30fc\u306e\u516c\u958b\u9375\u3092\u767b\u9332\u3059\u308b\n\n/etc/openldap/ldif/key.ldif\n# \u90e8\u9577\uff1a\u6b66\u7530 \u8cb4\u5f66\ndn: uid=takahiko.takeda,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6h7MF46Nxcuhp34o1THSBuVvy7DsL02mo0pB77KfD/XYZIq7CPkhnWm3Fp28+Yu85qalZmCD6wGIBQAEMVnXJmggjoRMExGu8bWtMLpZiWl9CUWi+m29p46L56GkTxpPdZkypYEEe7EGeNkh8bGtA7l2VLrVcYdv0grpu35DMUscSXATdGpbcjQ5nDZm2pFRPRVLGHhZ5jY9kxF7jMYfTogOjwzkuvOc9U+zwei8Jy3g6xqklfI5JNdUMIGQ0HM9FUHgBSHIBpZXXRtfcZig4VEXfSuVJMhJfM5TE1899Og2gTW1Vu4DtUTjmPhZCz+7BayrdejxiB+92B6Jkb778w==\n\n# \u958b\u767a\u8ab2 \u8ab2\u9577\uff1a\u6a2a\u5c71 \u771f\u4e5f\ndn: uid=shinya.yokoyama,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq3bXY1cd7S1deAGtmPN/CcvYo4ED2C/SL/Bru9OxxOJs0I2oik+HzTj2SYQiiN1Q4Zf5vuR9AMe8rSSFJOUGgTaliBLHU0scPPIrg8y7Un+InvoJdbYgD7c/7Tap6YytEaj7bdemhi1/Gy5kOwkcRmQYsZBNJy4KEQJe4kJHGBpokHcqkBafxVrv/CuXfwZjoqfb0K2N5SGMKudrgofHBP8b/qmWDDFR21ZFwk8cVJVprYmqshsCF0qeg/9NRb22Y2lZ3ZSlR8mlMobGgBuVAtx1epUm3f3UpbC44nbEDNeMzprENCjgVj02Z8pxWc1PmjSzi/Va2tz4jixB4I70bw==\n\n# \u904b\u7528\u8ab2 \u8ab2\u9577\uff1a\u4e95\u4e0a \u4fee\ndn: uid=osamu.inoue,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAyZYHfpIUjcXokOmzKJdlnrm1Gq02Ygi/PJnOlS5LqUJUVn03zYjCGjVln52izOZ2XgVEnzRlKXHadbUcf2KvYz2iJUqB5bH5yCla9butG1bEswRO2MUYU0vAjxToRZIT/aJAywgaW+OaPPv8112SwLNEgmzqN+N/4g9oCI03bKlhTEE6FzuHTi6V6FJOFTrwnbiv2ag/IFnsctk060qfLbl38aN3wVjpcnYBog/dTWLbcc1CcQ21Mfg9diO8BXpXZSUhyOjAGyYXv9+l4m17GGWmBRHYRh1jrdt1i8PVLUVg4gZ5YHhkEday0cWpNJieGrStsfN8cyKBBVlKmmV1fw==\n\n# \u958b\u767a\u8ab2 \u793e\u54e1\uff1a\u77f3\u5ddd \u76f4\u6a39\ndn: uid=naoki.ishikawa,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAoNuB16f1OiJeJoEuRKPlXSqn1Of9R4e5Rh4EzOKiRa6lD7pGr5KFin7TS5X1+5De6MDzv4/qhJNtAkQ7wOb7lNFn/8mlW6OXkNcPqoHvLCWs927NyXtwujhFFE+sTgibWIaf3NBeoq+dlG9RIFFHlMRg16pR9gr2/5Zehlr7UNYzdzwz0GG62uEoevdqwm3lmXD1YTFW48BXkMjgipsmD6cER10rbubMSSF8KY6p1a9ghEB9+y1Ii65HPEiQwsUwu8/bc7mfm4GsLiu98qokkyCOjLFp1kppkqWGMkCOcB6bia6o4K1Y62ituh45tJgJXgTL3SUU2QA7TONabF46qw==\n\n# \u904b\u7528\u8ab2 \u793e\u54e1\uff1a\u7530\u6751 \u548c\u592b\ndn: uid=kazuo.tamura,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAt6vDrw+mA/cOPzpcBF/UbplOT7VV7dPKDsCQyyBWPbTMCiOPl4FM/8CGg0NxdU3bW9fu0eF4qurwdhezrRVw72GeLOVUVsvcIEyjtvk4190OSZXkko/qIQvNre1vtf13WIE8w3fyJsc56LQJ/cM7/BpXma1fh5aCBxhyX+ea/uk/no6+E75gdGvsHurJxor0PE8FLl/ixovC+Ve+RcIvrW5rrO+TfxLdp54vqoqaWg4Lof/mRWpKfvsJkZ74zmbiFuqKQpVKWtTx5Gaf38HvqvaaE9nJJgmFIpE1y7+ZvxFu8lKft+Llca8qP0xbV2vPg5uy+5x9rVNt+qI16b4OTQ==\n\n\nldapmodify -x -D \"cn=Manager,dc=example,dc=com\" -W -f /etc/openldap/ldif/key.ldif\n\n\n\u30b5\u30fc\u30d0\u30fc\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u4f5c\u696d\n\nOpenSSH\u306eLDAP\u30b5\u30dd\u30fc\u30c8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nyum -y install openssh-ldap\n\n\nSSH\u8a2d\u5b9a\u7de8\u96c6\n\u516c\u958b\u9375\u8a8d\u8a3c\u3068\u3057\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u62d2\u5426\u3059\u308b\n\u307e\u305f\u3001root\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3082\u7981\u6b62\u3057\u3001LDAP\u7d4c\u7531\u3067\u516c\u958b\u9375\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n\n/etc/ssh/sshd_config\n#       $OpenBSD: sshd_config,v 1.80 2008/07/02 02:24:18 djm Exp $\n\n# This is the sshd server system-wide configuration file.  See\n# sshd_config(5) for more information.\n\n# This sshd was compiled with PATH=/usr/local/bin:/bin:/usr/bin\n\n# The strategy used for options in the default sshd_config shipped with\n# OpenSSH is to specify options with their default value where\n# possible, but leave them commented.  Uncommented options change a\n# default value.\n\n#Port 22\n#AddressFamily any\n#ListenAddress 0.0.0.0\n#ListenAddress ::\n\n# Disable legacy (protocol version 1) support in the server for new\n# installations. In future the default will change to require explicit\n# activation of protocol 1\nProtocol 2\n\n# HostKey for protocol version 1\n#HostKey /etc/ssh/ssh_host_key\n# HostKeys for protocol version 2\n#HostKey /etc/ssh/ssh_host_rsa_key\n#HostKey /etc/ssh/ssh_host_dsa_key\n\n# Lifetime and size of ephemeral version 1 server key\n#KeyRegenerationInterval 1h\n#ServerKeyBits 1024\n\n# Logging\n# obsoletes QuietMode and FascistLogging\n#SyslogFacility AUTH\nSyslogFacility AUTHPRIV\n#LogLevel INFO\n\n# Authentication:\n\n#LoginGraceTime 2m\nPermitRootLogin no\n#StrictModes yes\n#MaxAuthTries 6\n#MaxSessions 10\n\n#RSAAuthentication yes\nPubkeyAuthentication yes\n#AuthorizedKeysFile     .ssh/authorized_keys\nAuthorizedKeysCommand /usr/libexec/openssh/ssh-ldap-wrapper\nAuthorizedKeysCommandRunAs root\n\n# For this to work you will also need host keys in /etc/ssh/ssh_known_hosts\n#RhostsRSAAuthentication no\n# similar for protocol version 2\n#HostbasedAuthentication no\n# Change to yes if you don't trust ~/.ssh/known_hosts for\n# RhostsRSAAuthentication and HostbasedAuthentication\n#IgnoreUserKnownHosts no\n# Don't read the user's ~/.rhosts and ~/.shosts files\n#IgnoreRhosts yes\n\n# To disable tunneled clear text passwords, change to no here!\n#PasswordAuthentication yes\nPermitEmptyPasswords no\nPasswordAuthentication no\n\n# Change to no to disable s/key passwords\n#ChallengeResponseAuthentication yes\nChallengeResponseAuthentication no\n\n# Kerberos options\n#KerberosAuthentication no\n#KerberosOrLocalPasswd yes\n#KerberosTicketCleanup yes\n#KerberosGetAFSToken no\n#KerberosUseKuserok yes\n\n# GSSAPI options\n#GSSAPIAuthentication no\nGSSAPIAuthentication yes\n#GSSAPICleanupCredentials yes\nGSSAPICleanupCredentials yes\n#GSSAPIStrictAcceptorCheck yes\n#GSSAPIKeyExchange no\n\n# Set this to 'yes' to enable PAM authentication, account processing, \n# and session processing. If this is enabled, PAM authentication will \n# be allowed through the ChallengeResponseAuthentication and\n# PasswordAuthentication.  Depending on your PAM configuration,\n# PAM authentication via ChallengeResponseAuthentication may bypass\n# the setting of \"PermitRootLogin without-password\".\n# If you just want the PAM account and session checks to run without\n# PAM authentication, then enable this but set PasswordAuthentication\n# and ChallengeResponseAuthentication to 'no'.\n#UsePAM no\nUsePAM yes\n\n# Accept locale-related environment variables\nAcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES\nAcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT\nAcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE\nAcceptEnv XMODIFIERS\n\n#AllowAgentForwarding yes\n#AllowTcpForwarding yes\n#GatewayPorts no\n#X11Forwarding no\nX11Forwarding yes\n#X11DisplayOffset 10\n#X11UseLocalhost yes\n#PrintMotd yes\n#PrintLastLog yes\n#TCPKeepAlive yes\n#UseLogin no\n#UsePrivilegeSeparation yes\n#PermitUserEnvironment no\n#Compression delayed\n#ClientAliveInterval 0\n#ClientAliveCountMax 3\n#ShowPatchLevel no\nUseDNS no\n#PidFile /var/run/sshd.pid\n#MaxStartups 10:30:100\n#PermitTunnel no\n#ChrootDirectory none\n\n# no default banner path\n#Banner none\n\n# override default of no subsystems\nSubsystem       sftp    /usr/libexec/openssh/sftp-server\n\n# Example of overriding settings on a per-user basis\n#Match User anoncvs\n#       X11Forwarding no\n#       AllowTcpForwarding no\n#       ForceCommand cvs server\n\n\n\nSSH\u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\n/etc/init.d/sshd restart\n\n\n\u78ba\u8a8d\n\u5404\u4eba\u3001\u305d\u308c\u305e\u308c\u306e\u79d8\u5bc6\u9375\u3067SSH\u63a5\u7d9a\u53ef\u80fd\u304b\u3069\u3046\u304b\u3001\u8a66\u3059\n## \u516c\u958b\u9375\u30fb\u79d8\u5bc6\u9375\u767a\u884c\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u7121\u3057\u3067\u516c\u958b\u9375\u30fb\u79d8\u5bc6\u9375\u767a\u884c\n```shell-session\nssh-keygen -t rsa -b 2048 -N \"\" -f /tmp/id\n```\n\n`/tmp/id` \u304c\u79d8\u5bc6\u9375\u3001`/tmp/id.pub` \u304c\u516c\u958b\u9375\u3068\u306a\u308b\n\u3053\u308c\u3089\u3092\u4eba\u6570\u5206\u767a\u884c\u3057\u3001\u79d8\u5bc6\u9375\u306f **sftp** \u306a\u3069\u306e\u30bb\u30ad\u30e5\u30a2\u306a\u901a\u4fe1\u3067\u5404\u4eba\u306b\u6e21\u3059\n\u516c\u958b\u9375\u306f **cat** \u306a\u3069\u3067\u4e2d\u8eab\u3092\u8aad\u307f\u8fbc\u307f\u3001\u30b3\u30d4\u30da\u3067\u554f\u984c\u306a\u3044\n\u307e\u305f\u3001\u516c\u958b\u9375\u306f\u884c\u672b\u306b\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30db\u30b9\u30c8\u540d\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u3053\u308c\u306f\u524a\u9664\u3057\u3066\u304a\u304f\n\n```text:/tmp/id\n-----BEGIN RSA PRIVATE KEY-----\nMIIEogIBAAKCAQEA6h7MF46Nxcuhp34o1THSBuVvy7DsL02mo0pB77KfD/XYZIq7\nCPkhnWm3Fp28+Yu85qalZmCD6wGIBQAEMVnXJmggjoRMExGu8bWtMLpZiWl9CUWi\n+m29p46L56GkTxpPdZkypYEEe7EGeNkh8bGtA7l2VLrVcYdv0grpu35DMUscSXAT\ndGpbcjQ5nDZm2pFRPRVLGHhZ5jY9kxF7jMYfTogOjwzkuvOc9U+zwei8Jy3g6xqk\nlfI5JNdUMIGQ0HM9FUHgBSHIBpZXXRtfcZig4VEXfSuVJMhJfM5TE1899Og2gTW1\nVu4DtUTjmPhZCz+7BayrdejxiB+92B6Jkb778wIBIwKCAQEAtJtqPg7iZWKSpce5\nGX40TnZ60FVIfEM3aAYVm6cM/a8GBGsFUBCk5yWqfyk6AlXa3dEDQFkVTuPsliSV\nhSgMX3Tl6kjM+MR/pITWD6WyyRbczKNvGPWSTg7g9IQCaOhpLtVEU8ntg/2XR0hq\npIG/+48SJBsZr1nZ6yz9c2FnCMNwMTCdLU3WR6g4bOcKVZdXUPmMpA+NPhrXG7ib\nr9rFTuV9KlpMq/XL8I6rEl6/xWF1VZByXRruVpv7lRfsZ13d7sg9U5iUn9afR3Gf\nq7TL+R72V+kS1C51NODSXn8n7apSP4+Ew20AGpZTw85sZ0QlL8ySbcA7/673/nxh\nVeoHKwKBgQD3ypBkmzPxV5LC6/hTzA7oCmtI727p8LMBXjkjUb0H6QiDudhD/8Hd\nnPPqmD4pTAwohRZIjFeZlK1Sq77jpU7Xhal+CHcGzYankiW62Vhx+HFTwZmzZw++\nS602ehnOaOqBUKzSGmHRZOrO+Xsce0RB9h/MKduICc3hHzXNO2X/UQKBgQDx4EtU\n4Nr/ABy7xEH8Lce1o8VVVF2S8Nuzlaaq29EOJSamNgHxfXfc56LYcKsCj2p/HQa+\nToqs+feCgR7sfzjwiXheV2m0tbcaNXVQ35gv+0XZu2O/2hQGOG90Mb0MYWNKkkoa\nsP7mU9AZ0RLV9yfgjzfVoVaW+f1F6keAiCmeAwKBgQCGg+f8Gb0cnUEKupy/xou/\nyyRMKjTlZWh9FeSA4zq7Jrt6tVgk6ezmBL7tENFJnk++OZ5h5cknfJial79louGo\nMp3WtCNbduKyvQ0q6wQgnM/OYch3VTRunhwzhByjQETJ21aArzxqW1rlYtxujA8c\nfkvGmmE7OIW0uSvVz8mn2wKBgHV7kk3MTRzFikyShnMsLc1A6tGsonqSPtOR1Jwh\noA4vTUlqsHycBwTliZxT+0pi6pWDIIhSCNesnMpb+RPIw+KL6gHv8YOouAVqbC6Y\nfR6enkUvIdI2uUTZlThv7hv0ydPDZdJzOfrYQIGRb4x/XIMDvAitczNjewSznxKL\nR2oBAoGALQKKyjxLKxiX89mMD7cLcT4Vg4Z2mpCGKEY9ZVeMz+aG+NR6AVR6j5Ik\n682R4Cgiln5UMXA9L6ZZaUqlspWbHnFbfZUbEv/Q2BZWLr6j4xc7Y8Hj1DAVAUKp\nSCkwwkWnJlwMGtTxI2aRuBUuWt5muJX84F1TxNM237W5MWea6D4=\n-----END RSA PRIVATE KEY-----\n```\n\n```text:/tmp/id.pub\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6h7MF46Nxcuhp34o1THSBuVvy7DsL02mo0pB77KfD/XYZIq7CPkhnWm3Fp28+Yu85qalZmCD6wGIBQAEMVnXJmggjoRMExGu8bWtMLpZiWl9CUWi+m29p46L56GkTxpPdZkypYEEe7EGeNkh8bGtA7l2VLrVcYdv0grpu35DMUscSXATdGpbcjQ5nDZm2pFRPRVLGHhZ5jY9kxF7jMYfTogOjwzkuvOc9U+zwei8Jy3g6xqklfI5JNdUMIGQ0HM9FUHgBSHIBpZXXRtfcZig4VEXfSuVJMhJfM5TE1899Og2gTW1Vu4DtUTjmPhZCz+7BayrdejxiB+92B6Jkb778w==\n```\n\n## \u30b5\u30fc\u30d0\u30fc\u5074\u4f5c\u696d\n\n### OpenSSH\u306eLDAP\u30b5\u30dd\u30fc\u30c8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n```shell-session\nyum -y install openssh-ldap\ncp -a /usr/share/doc/openssh-ldap-5.3p1/openssh-lpk-openldap.schema /etc/openldap/schema/openssh.schema\n```\n\n### OpenLDAP\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\n`include /etc/openldap/schema/openssh.schema` \u3092\u8ffd\u8a18\u3059\u308b\n\n```text:/etc/openldap/slapd.conf\ninclude /etc/openldap/schema/corba.schema\ninclude /etc/openldap/schema/core.schema\ninclude /etc/openldap/schema/cosine.schema\ninclude /etc/openldap/schema/duaconf.schema\ninclude /etc/openldap/schema/dyngroup.schema\ninclude /etc/openldap/schema/inetorgperson.schema\ninclude /etc/openldap/schema/java.schema\ninclude /etc/openldap/schema/misc.schema\ninclude /etc/openldap/schema/nis.schema\ninclude /etc/openldap/schema/openldap.schema\ninclude /etc/openldap/schema/ppolicy.schema\ninclude /etc/openldap/schema/collective.schema\ninclude /etc/openldap/schema/openssh.schema\n\n# \u63a5\u7d9a\u30d7\u30ed\u30c8\u30b3\u30eb\nallow bind_v2\n\n# \u7ba1\u7406\u30d5\u30a1\u30a4\u30eb\npidfile     /var/run/openldap/slapd.pid\nargsfile    /var/run/openldap/slapd.args\n\n# TLS\u8a2d\u5b9a\n#TLSCACertificatePath  /etc/openldap/ssl/cacert.pem\n#TLSCertificateFile    /etc/openldap/ssl/server.crt\n#TLSCertificateKeyFile /etc/openldap/ssl/server.key\n\n# userPassword\u306b\u95a2\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to attrs=userPassword\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by anonymous auth\n    by * none\n\n# \u305d\u306e\u4ed6\u306e\u5c5e\u6027\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\naccess to *\n    by self write\n    by dn=\"cn=Manager,dc=example,dc=com\" write\n    by * read\n\n# monitor\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u5bfe\u3059\u308b\u30a2\u30af\u30bb\u30b9\u6a29\ndatabase monitor\naccess to *\n    by dn.exact=\"cn=Manager,dc=example,dc=com\" read\n    by * none\n\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8a2d\u5b9a\ndatabase    bdb\nsuffix      \"dc=example,dc=com\"\ncheckpoint  1024 15\nrootdn      \"cn=Manager,dc=example,dc=com\"\nrootpw      {SSHA}fCkF7qPmO1cnQsPun1fixcrhCNP+Kerd\ndirectory   /var/lib/ldap\n\n# index\u306e\u8a2d\u5b9a\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n```\n\n### LDAP\u60c5\u5831\u3092\u66f4\u65b0\u3059\u308b\n```shell-session\n/etc/init.d/slapd stop\nrm -rf /etc/openldap/slapd.d/*\nsudo -u ldap slaptest -f /etc/openldap/slapd.conf -F /etc/openldap/slapd.d\n/etc/init.d/slapd start\n```\n\n### LDAP\u30b5\u30fc\u30d0\u30fc\u306b\u5404\u30e6\u30fc\u30b6\u30fc\u306e\u516c\u958b\u9375\u3092\u767b\u9332\u3059\u308b\n```text:/etc/openldap/ldif/key.ldif\n# \u90e8\u9577\uff1a\u6b66\u7530 \u8cb4\u5f66\ndn: uid=takahiko.takeda,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6h7MF46Nxcuhp34o1THSBuVvy7DsL02mo0pB77KfD/XYZIq7CPkhnWm3Fp28+Yu85qalZmCD6wGIBQAEMVnXJmggjoRMExGu8bWtMLpZiWl9CUWi+m29p46L56GkTxpPdZkypYEEe7EGeNkh8bGtA7l2VLrVcYdv0grpu35DMUscSXATdGpbcjQ5nDZm2pFRPRVLGHhZ5jY9kxF7jMYfTogOjwzkuvOc9U+zwei8Jy3g6xqklfI5JNdUMIGQ0HM9FUHgBSHIBpZXXRtfcZig4VEXfSuVJMhJfM5TE1899Og2gTW1Vu4DtUTjmPhZCz+7BayrdejxiB+92B6Jkb778w==\n\n# \u958b\u767a\u8ab2 \u8ab2\u9577\uff1a\u6a2a\u5c71 \u771f\u4e5f\ndn: uid=shinya.yokoyama,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq3bXY1cd7S1deAGtmPN/CcvYo4ED2C/SL/Bru9OxxOJs0I2oik+HzTj2SYQiiN1Q4Zf5vuR9AMe8rSSFJOUGgTaliBLHU0scPPIrg8y7Un+InvoJdbYgD7c/7Tap6YytEaj7bdemhi1/Gy5kOwkcRmQYsZBNJy4KEQJe4kJHGBpokHcqkBafxVrv/CuXfwZjoqfb0K2N5SGMKudrgofHBP8b/qmWDDFR21ZFwk8cVJVprYmqshsCF0qeg/9NRb22Y2lZ3ZSlR8mlMobGgBuVAtx1epUm3f3UpbC44nbEDNeMzprENCjgVj02Z8pxWc1PmjSzi/Va2tz4jixB4I70bw==\n\n# \u904b\u7528\u8ab2 \u8ab2\u9577\uff1a\u4e95\u4e0a \u4fee\ndn: uid=osamu.inoue,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAyZYHfpIUjcXokOmzKJdlnrm1Gq02Ygi/PJnOlS5LqUJUVn03zYjCGjVln52izOZ2XgVEnzRlKXHadbUcf2KvYz2iJUqB5bH5yCla9butG1bEswRO2MUYU0vAjxToRZIT/aJAywgaW+OaPPv8112SwLNEgmzqN+N/4g9oCI03bKlhTEE6FzuHTi6V6FJOFTrwnbiv2ag/IFnsctk060qfLbl38aN3wVjpcnYBog/dTWLbcc1CcQ21Mfg9diO8BXpXZSUhyOjAGyYXv9+l4m17GGWmBRHYRh1jrdt1i8PVLUVg4gZ5YHhkEday0cWpNJieGrStsfN8cyKBBVlKmmV1fw==\n\n# \u958b\u767a\u8ab2 \u793e\u54e1\uff1a\u77f3\u5ddd \u76f4\u6a39\ndn: uid=naoki.ishikawa,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAoNuB16f1OiJeJoEuRKPlXSqn1Of9R4e5Rh4EzOKiRa6lD7pGr5KFin7TS5X1+5De6MDzv4/qhJNtAkQ7wOb7lNFn/8mlW6OXkNcPqoHvLCWs927NyXtwujhFFE+sTgibWIaf3NBeoq+dlG9RIFFHlMRg16pR9gr2/5Zehlr7UNYzdzwz0GG62uEoevdqwm3lmXD1YTFW48BXkMjgipsmD6cER10rbubMSSF8KY6p1a9ghEB9+y1Ii65HPEiQwsUwu8/bc7mfm4GsLiu98qokkyCOjLFp1kppkqWGMkCOcB6bia6o4K1Y62ituh45tJgJXgTL3SUU2QA7TONabF46qw==\n\n# \u904b\u7528\u8ab2 \u793e\u54e1\uff1a\u7530\u6751 \u548c\u592b\ndn: uid=kazuo.tamura,dc=People,dc=example,dc=com\nchangetype: modify\nadd: objectClass\nobjectClass: ldapPublicKey\n-\nadd: sshPublicKey\nsshPublicKey: ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAt6vDrw+mA/cOPzpcBF/UbplOT7VV7dPKDsCQyyBWPbTMCiOPl4FM/8CGg0NxdU3bW9fu0eF4qurwdhezrRVw72GeLOVUVsvcIEyjtvk4190OSZXkko/qIQvNre1vtf13WIE8w3fyJsc56LQJ/cM7/BpXma1fh5aCBxhyX+ea/uk/no6+E75gdGvsHurJxor0PE8FLl/ixovC+Ve+RcIvrW5rrO+TfxLdp54vqoqaWg4Lof/mRWpKfvsJkZ74zmbiFuqKQpVKWtTx5Gaf38HvqvaaE9nJJgmFIpE1y7+ZvxFu8lKft+Llca8qP0xbV2vPg5uy+5x9rVNt+qI16b4OTQ==\n```\n\n```shell-session\nldapmodify -x -D \"cn=Manager,dc=example,dc=com\" -W -f /etc/openldap/ldif/key.ldif\n```\n\n## \u30b5\u30fc\u30d0\u30fc\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u4f5c\u696d\n\n### OpenSSH\u306eLDAP\u30b5\u30dd\u30fc\u30c8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n```shell-session\nyum -y install openssh-ldap\n```\n\n### SSH\u8a2d\u5b9a\u7de8\u96c6\n\u516c\u958b\u9375\u8a8d\u8a3c\u3068\u3057\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u62d2\u5426\u3059\u308b\n\u307e\u305f\u3001root\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3082\u7981\u6b62\u3057\u3001LDAP\u7d4c\u7531\u3067\u516c\u958b\u9375\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n\n```text:/etc/ssh/sshd_config\n#       $OpenBSD: sshd_config,v 1.80 2008/07/02 02:24:18 djm Exp $\n\n# This is the sshd server system-wide configuration file.  See\n# sshd_config(5) for more information.\n\n# This sshd was compiled with PATH=/usr/local/bin:/bin:/usr/bin\n\n# The strategy used for options in the default sshd_config shipped with\n# OpenSSH is to specify options with their default value where\n# possible, but leave them commented.  Uncommented options change a\n# default value.\n\n#Port 22\n#AddressFamily any\n#ListenAddress 0.0.0.0\n#ListenAddress ::\n\n# Disable legacy (protocol version 1) support in the server for new\n# installations. In future the default will change to require explicit\n# activation of protocol 1\nProtocol 2\n\n# HostKey for protocol version 1\n#HostKey /etc/ssh/ssh_host_key\n# HostKeys for protocol version 2\n#HostKey /etc/ssh/ssh_host_rsa_key\n#HostKey /etc/ssh/ssh_host_dsa_key\n\n# Lifetime and size of ephemeral version 1 server key\n#KeyRegenerationInterval 1h\n#ServerKeyBits 1024\n\n# Logging\n# obsoletes QuietMode and FascistLogging\n#SyslogFacility AUTH\nSyslogFacility AUTHPRIV\n#LogLevel INFO\n\n# Authentication:\n\n#LoginGraceTime 2m\nPermitRootLogin no\n#StrictModes yes\n#MaxAuthTries 6\n#MaxSessions 10\n\n#RSAAuthentication yes\nPubkeyAuthentication yes\n#AuthorizedKeysFile     .ssh/authorized_keys\nAuthorizedKeysCommand /usr/libexec/openssh/ssh-ldap-wrapper\nAuthorizedKeysCommandRunAs root\n\n# For this to work you will also need host keys in /etc/ssh/ssh_known_hosts\n#RhostsRSAAuthentication no\n# similar for protocol version 2\n#HostbasedAuthentication no\n# Change to yes if you don't trust ~/.ssh/known_hosts for\n# RhostsRSAAuthentication and HostbasedAuthentication\n#IgnoreUserKnownHosts no\n# Don't read the user's ~/.rhosts and ~/.shosts files\n#IgnoreRhosts yes\n\n# To disable tunneled clear text passwords, change to no here!\n#PasswordAuthentication yes\nPermitEmptyPasswords no\nPasswordAuthentication no\n\n# Change to no to disable s/key passwords\n#ChallengeResponseAuthentication yes\nChallengeResponseAuthentication no\n\n# Kerberos options\n#KerberosAuthentication no\n#KerberosOrLocalPasswd yes\n#KerberosTicketCleanup yes\n#KerberosGetAFSToken no\n#KerberosUseKuserok yes\n\n# GSSAPI options\n#GSSAPIAuthentication no\nGSSAPIAuthentication yes\n#GSSAPICleanupCredentials yes\nGSSAPICleanupCredentials yes\n#GSSAPIStrictAcceptorCheck yes\n#GSSAPIKeyExchange no\n\n# Set this to 'yes' to enable PAM authentication, account processing, \n# and session processing. If this is enabled, PAM authentication will \n# be allowed through the ChallengeResponseAuthentication and\n# PasswordAuthentication.  Depending on your PAM configuration,\n# PAM authentication via ChallengeResponseAuthentication may bypass\n# the setting of \"PermitRootLogin without-password\".\n# If you just want the PAM account and session checks to run without\n# PAM authentication, then enable this but set PasswordAuthentication\n# and ChallengeResponseAuthentication to 'no'.\n#UsePAM no\nUsePAM yes\n\n# Accept locale-related environment variables\nAcceptEnv LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES\nAcceptEnv LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT\nAcceptEnv LC_IDENTIFICATION LC_ALL LANGUAGE\nAcceptEnv XMODIFIERS\n\n#AllowAgentForwarding yes\n#AllowTcpForwarding yes\n#GatewayPorts no\n#X11Forwarding no\nX11Forwarding yes\n#X11DisplayOffset 10\n#X11UseLocalhost yes\n#PrintMotd yes\n#PrintLastLog yes\n#TCPKeepAlive yes\n#UseLogin no\n#UsePrivilegeSeparation yes\n#PermitUserEnvironment no\n#Compression delayed\n#ClientAliveInterval 0\n#ClientAliveCountMax 3\n#ShowPatchLevel no\nUseDNS no\n#PidFile /var/run/sshd.pid\n#MaxStartups 10:30:100\n#PermitTunnel no\n#ChrootDirectory none\n\n# no default banner path\n#Banner none\n\n# override default of no subsystems\nSubsystem       sftp    /usr/libexec/openssh/sftp-server\n\n# Example of overriding settings on a per-user basis\n#Match User anoncvs\n#       X11Forwarding no\n#       AllowTcpForwarding no\n#       ForceCommand cvs server\n```\n\n### SSH\u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\n```shell-session\n/etc/init.d/sshd restart\n```\n\n### \u78ba\u8a8d\n\u5404\u4eba\u3001\u305d\u308c\u305e\u308c\u306e\u79d8\u5bc6\u9375\u3067SSH\u63a5\u7d9a\u53ef\u80fd\u304b\u3069\u3046\u304b\u3001\u8a66\u3059\n", "tags": ["CentOS6.5", "openldap2.4.23-34", "openssl1.0.1e-16", "OpenSSH5.3p1-94"]}