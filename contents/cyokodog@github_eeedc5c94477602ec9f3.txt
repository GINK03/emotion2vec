{"tags": ["Firebase", "JavaScript"], "context": "\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u5b9f\u88c5\u3057\u306a\u304f\u3066\u3082\u624b\u8efd\u306bOAuth\u8a8d\u8a3c\u3084\u30c7\u30fc\u30bf\u4fdd\u5b58\u304c\u3067\u304d\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u4fbf\u5229\u305d\u3046\u306a\u306e\u3067\u305f\u3081\u3057\u3066\u307f\u305f\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\n\nhttps://console.firebase.google.com/ \u3067\u300c\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3064\u304f\u308b\n\n\n\n\u300c\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u306b Firebase \u3092\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068Web\u30da\u30fc\u30b8\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\n\n\n\ngoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8a8d\u8a3c\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\n\n\nhttps://console.firebase.google.com/project/hoge-proj/authentication/users \u3067\u300c\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u3092\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\n\u300cGoogle\u300d\u3092\u6709\u52b9\u306b\u3059\u308b\n\n\nfirebase-tools\u3092\u4f7f\u3046\n\nnpm install -g firebase-tools\n\nfirebase login\u3067google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u9069\u5f53\u306b\u3064\u304f\u3063\u3066firebase init\u3059\u308b\n\n\n\n\u3044\u308d\u3044\u308d\u805e\u3044\u3066\u304f\u308b\u306e\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u56de\u7b54\n\n\nHosting: Configure and deploy Firebase Hosting sites\n[don't setup a default project]\n\u305d\u306e\u4ed6\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3069\u304a\u308a\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u3064\u304f\u3089\u308c\u308b\n\n\n\n\nfirebase serve\u3067 http://localhost:5000 \u304c\u7acb\u3061\u4e0a\u304c\u308apublic/index.html\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\n\n\n\ngoogle\u306eOAuth\u8a8d\u8a3c\u3092\u7d44\u307f\u8fbc\u3080\n\n\npublic/index.html\u306b\u300c\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u306b Firebase \u3092\u8ffd\u52a0\u300d\u3067\u8868\u793a\u3055\u308c\u308b\u8cbc\u308a\u4ed8\u3051\u30b3\u30fc\u30c9\u3092\u8cbc\u308b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n<button class=\"authBtn\" disabled></button>\n<span class=\"userId\"></span>\n\n<script>\nvar AuthUI = {\n  init: function(){\n    AuthUI.provider = new firebase.auth.GoogleAuthProvider();\n    AuthUI.elAuthBtn = document.querySelector('.authBtn');\n    AuthUI.elUserId = document.querySelector('.userId');\n    AuthUI.draw();\n    AuthUI.elAuthBtn.addEventListener('click', function(){\n      AuthUI.doAuth();\n    });\n    firebase.auth().getRedirectResult().then(function(result) {\n      AuthUI.elAuthBtn.disabled = false;\n      if (result.credential) {\n        // This gives you a Google Access Token. You can use it to access the Google API.\n        var token = result.credential.accessToken;\n      }\n      if(result.user){\n        AuthUI.data.authed = true;\n        AuthUI.data.userId = result.user.email;\n        AuthUI.draw();\n      }\n    }).catch(function(error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n      // ...\n    });\n  },\n  data: {\n    authed: false,\n    userId: '',\n    info: ''\n  },\n  draw: function(){\n    AuthUI.elAuthBtn.textContent = AuthUI.data.authed ? 'LOGOUT' : 'LOGIN';\n    AuthUI.elUserId.textContent = AuthUI.data.userId;\n  },\n  doAuth: function(){\n    if(AuthUI.data.authed){\n      firebase.auth().signOut().then(function() {\n        AuthUI.data.authed = false;\n        AuthUI.data.userId = '';\n        AuthUI.draw();\n      }, function(error) {\n        // An error happened.\n      });\n    }\n    else {\n      firebase.auth().signInWithRedirect(AuthUI.provider);\n    }\n  }\n};\nAuthUI.init();\n</script>\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u52d5\u304f\n\uff11\u56de\u76ee\u306e\u30ed\u30b0\u30a4\u30f3\n\n\uff12\u56de\u76ee\u4ee5\u964d\u306e\u30ed\u30b0\u30a4\u30f3\n\nGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u63a5\u7d9a\u8a31\u53ef\u306f\u4ee5\u4e0b\u3067\u7ba1\u7406\nhttps://security.google.com/settings/security/permissions?utm_source=OGB&pli=1\n\u3067\u3001\u3053\u308c\u3092\u3053\u306e\u307e\u307egh-pages\u3068\u304b\u3067\u52d5\u304b\u305d\u3046\u3068\u3057\u3066\u3082\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\u3001https://console.firebase.google.com/project/hoge-proj/authentication/providers \u306b\u3066OAuth\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30c9\u30e1\u30a4\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\nDemo\n\n\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u5b9f\u88c5\u3057\u306a\u304f\u3066\u3082\u624b\u8efd\u306bOAuth\u8a8d\u8a3c\u3084\u30c7\u30fc\u30bf\u4fdd\u5b58\u304c\u3067\u304d\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u4fbf\u5229\u305d\u3046\u306a\u306e\u3067\u305f\u3081\u3057\u3066\u307f\u305f\u3002\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\n- https://console.firebase.google.com/ \u3067\u300c\u65b0\u898f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3064\u304f\u308b\n\n<img width=\"985\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-24 13.46.47.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/15637/a56710fb-514a-3d84-c460-1902b4fdfcb1.png\">\n\n- \u300c\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u306b Firebase \u3092\u8ffd\u52a0\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068Web\u30da\u30fc\u30b8\u306b\u8cbc\u308a\u4ed8\u3051\u308b\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\n\n<img width=\"915\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-24 13.48.43.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/15637/5704e1b8-85f1-709a-c157-ff3597baa3f6.png\">\n\n## google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8a8d\u8a3c\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\n\n- https://console.firebase.google.com/project/hoge-proj/authentication/users \u3067\u300c\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u3092\u8a2d\u5b9a\u300d\u3092\u30af\u30ea\u30c3\u30af\n- \u300cGoogle\u300d\u3092\u6709\u52b9\u306b\u3059\u308b\n\n## firebase-tools\u3092\u4f7f\u3046\n\n- `npm install -g firebase-tools`\n- `firebase login`\u3067google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\n- \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u9069\u5f53\u306b\u3064\u304f\u3063\u3066`firebase init`\u3059\u308b\n\n<img width=\"651\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-24 13.55.40.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/15637/e2205d8f-5ea6-b631-c2a6-1291d748260f.png\">\n\n- \u3044\u308d\u3044\u308d\u805e\u3044\u3066\u304f\u308b\u306e\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u56de\u7b54\n\t- Hosting: Configure and deploy Firebase Hosting sites\n\t- [don't setup a default project]\n\t- \u305d\u306e\u4ed6\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3069\u304a\u308a\n- \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u3064\u304f\u3089\u308c\u308b\n\n<img width=\"208\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-24 13.57.11.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/15637/d00f0cb3-329a-2f46-3588-3cdbd40df3a5.png\">\n\n- `firebase serve`\u3067 http://localhost:5000 \u304c\u7acb\u3061\u4e0a\u304c\u308a`public/index.html`\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\n\n<img width=\"854\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-24 14.00.13.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/15637/9b602e70-1823-04dd-a419-f7ff110f0635.png\">\n\n\n## google\u306eOAuth\u8a8d\u8a3c\u3092\u7d44\u307f\u8fbc\u3080\n\n- `public/index.html`\u306b\u300c\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u306b Firebase \u3092\u8ffd\u52a0\u300d\u3067\u8868\u793a\u3055\u308c\u308b\u8cbc\u308a\u4ed8\u3051\u30b3\u30fc\u30c9\u3092\u8cbc\u308b\n- \u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```html\n<button class=\"authBtn\" disabled></button>\n<span class=\"userId\"></span>\n\n<script>\nvar AuthUI = {\n  init: function(){\n    AuthUI.provider = new firebase.auth.GoogleAuthProvider();\n    AuthUI.elAuthBtn = document.querySelector('.authBtn');\n    AuthUI.elUserId = document.querySelector('.userId');\n    AuthUI.draw();\n    AuthUI.elAuthBtn.addEventListener('click', function(){\n      AuthUI.doAuth();\n    });\n    firebase.auth().getRedirectResult().then(function(result) {\n      AuthUI.elAuthBtn.disabled = false;\n      if (result.credential) {\n        // This gives you a Google Access Token. You can use it to access the Google API.\n        var token = result.credential.accessToken;\n      }\n      if(result.user){\n        AuthUI.data.authed = true;\n        AuthUI.data.userId = result.user.email;\n        AuthUI.draw();\n      }\n    }).catch(function(error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // The email of the user's account used.\n      var email = error.email;\n      // The firebase.auth.AuthCredential type that was used.\n      var credential = error.credential;\n      // ...\n    });\n  },\n  data: {\n    authed: false,\n    userId: '',\n    info: ''\n  },\n  draw: function(){\n    AuthUI.elAuthBtn.textContent = AuthUI.data.authed ? 'LOGOUT' : 'LOGIN';\n    AuthUI.elUserId.textContent = AuthUI.data.userId;\n  },\n  doAuth: function(){\n    if(AuthUI.data.authed){\n      firebase.auth().signOut().then(function() {\n        AuthUI.data.authed = false;\n        AuthUI.data.userId = '';\n        AuthUI.draw();\n      }, function(error) {\n        // An error happened.\n      });\n    }\n    else {\n      firebase.auth().signInWithRedirect(AuthUI.provider);\n    }\n  }\n};\nAuthUI.init();\n</script>\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u52d5\u304f\n\n\uff11\u56de\u76ee\u306e\u30ed\u30b0\u30a4\u30f3\n![login.gif](https://qiita-image-store.s3.amazonaws.com/0/15637/34f5857d-2ce9-0b5e-35a5-68eb8a1e1d35.gif)\n\n\uff12\u56de\u76ee\u4ee5\u964d\u306e\u30ed\u30b0\u30a4\u30f3\n![login2.gif](https://qiita-image-store.s3.amazonaws.com/0/15637/ff7b77f4-c555-8489-cb24-77007ef1a179.gif)\n\nGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u63a5\u7d9a\u8a31\u53ef\u306f\u4ee5\u4e0b\u3067\u7ba1\u7406\nhttps://security.google.com/settings/security/permissions?utm_source=OGB&pli=1\n\n\u3067\u3001\u3053\u308c\u3092\u3053\u306e\u307e\u307egh-pages\u3068\u304b\u3067\u52d5\u304b\u305d\u3046\u3068\u3057\u3066\u3082\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\u3001https://console.firebase.google.com/project/hoge-proj/authentication/providers \u306b\u3066OAuth\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30c9\u30e1\u30a4\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n<img width=\"959\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-09-24 15.40.30.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/15637/fa7fe265-351d-44c0-d29e-0d3514dce898.png\">\n\n[Demo](https://cyokosaturn.github.io/cyokodog_net_demo/firebase/public/)\n\n"}