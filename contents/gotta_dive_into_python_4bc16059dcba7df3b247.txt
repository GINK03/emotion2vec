{"context": "\n\n\u306f\u3058\u3081\u306b\n\u904e\u53bb\u8a18\u4e8b\u306b\u3066\u30d5\u30a9\u30f3\u30c8\u3092\u9078\u3076\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u4f5c\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u5f8c\u30c0\u30a4\u30a2\u30ed\u30b0\u4ee5\u5916\u306e\u5f62\u3067\u3082\u3053\u306e\u6a5f\u80fd\u3092\u4f7f\u3048\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3044\u3001\u3088\u308a\u6c4e\u7528\u6027\u306e\u3042\u308b\u53ea\u306eWidget\u3068\u3057\u3066\u4f5c\u308a\u76f4\u3057\u307e\u3057\u305f\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u5c11\u3057\u6d17\u7df4\u3055\u308c\u3066\u8aad\u307f\u3084\u3059\u304f\u306a\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\nScreenshot\n\n\n\u30bd\u30fc\u30b9\n\nModule\n\nfontchooser.py\nimport os, os.path\n\nfrom kivy.lang import Builder\nfrom kivy.core.text import LabelBase\nfrom kivy.properties import StringProperty\nfrom kivy.uix.floatlayout import FloatLayout\n\n\nBuilder.load_string(r\"\"\"\n<FontChooser>:\n    Spinner:\n        id: spinner\n        size_hint: 0.4, 0.1\n        pos_hint: {r'x': 0.01, r'y': 0.89}\n        text: r'Click to Choose Font'\n    TextInput:\n        id: ti_sample\n        text: r'Sample Text'\n        size_hint: 0.57, 0.1\n        pos_hint: {r'x': 0.42, r'y': 0.89}\n    Label:\n        id: l_sample\n        size_hint: 0.98, 0.87\n        pos_hint: {r'x': 0.01, r'y': 0.01}\n        text: ti_sample.text  # TextInput(TextBox)\u306e\u5185\u5bb9\u304c\u305d\u306e\u307e\u307e\u30b5\u30f3\u30d7\u30eb\u306e\u30c6\u30ad\u30b9\u30c8\u306b\u306a\u308b\n        font_size: 100\n\"\"\")\n\n\n_fontnames = None  # Widget\u3092\u4f5c\u308b\u5ea6\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u691c\u7d22\u3059\u308b\u306e\u306f\u5acc\u306a\u306e\u3067\u3053\u306e\u5909\u6570\u306b\u300c\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u540d\u306elist\u300d\u3092\u4fdd\u5b58\u3057\u3066\u7f6e\u304f\n\n\ndef clear_cache():\n    r'''\u4fdd\u5b58\u3057\u3066\u7f6e\u3044\u305f\u300c\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u540d\u306elist\u300d\u3092\u524a\u9664'''\n    global _fontnames\n    _fontnames = None\n\n\ndef fontnames():\n    r'''\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u691c\u7d22\u3057\u305d\u306eiterable\u3092\u8fd4\u3059'''\n    global _fontnames\n    if _fontnames is None:\n        fontnamesset = set()\n        for directory in LabelBase.get_system_fonts_dir():\n            for filename in os.listdir(directory):\n                if os.path.isfile(os.path.join(directory, filename)):\n                    if filename.endswith(r'.ttf') or filename.endswith(r'.ttc'):\n                        fontnamesset.add(filename)\n        _fontnames = list(fontnamesset)\n        _fontnames.sort(key=(lambda x: x.lower()))\n    return _fontnames\n\n\nclass FontChooser(FloatLayout):\n\n    font_name = StringProperty()\n    sample_text = StringProperty(r'Sample Text')\n\n    def __init__(self, **kwargs):\n        super(FontChooser, self).__init__(**kwargs)\n        spinner = self.ids.spinner\n        spinner.values.extend(fontnames())\n        spinner.bind(text=self.setter(r'font_name'))\n        self.ids.ti_sample.bind(text=self.setter(r'sample_text'))\n\n    def on_font_name(self, ed, value):\n        self.ids.spinner.text = value\n        self.ids.l_sample.font_name = value\n\n    def on_sample_text(self, ed, value):\n        self.ids.ti_sample.text = value\n\n\n\n\n\u4f7f\u3046\u5074\n\ntest_fontchooser.py\nfrom kivy.base import runTouchApp\n\nimport fontchooser\n\nroot = fontchooser.FontChooser()\nroot.sample_text = '\u73cd\u73e0\u5976\u8336\\n\u3042\u3044\u3046\u3048\u304a\\nABCDE'\nroot.bind(font_name=(lambda widget, value: print(value)))\n\nrunTouchApp(root)\n\nprint(r'Last value', root.font_name)\n\n\n\n\u6a19\u6e96\u51fa\u529b\u306e\u4f8b\nDejaVuSans-BoldOblique.ttf\nDroidSerif-Italic.ttf\nVemana.ttf\nyutapon_coding_sl_080.ttc\numing.ttc\nTakaoExMincho.ttf\nLast value TakaoExMincho.ttf\n\n\n# \u306f\u3058\u3081\u306b\n\n[\u904e\u53bb\u8a18\u4e8b](http://qiita.com/gotta_dive_into_python/items/de118ba397969d4282ba)\u306b\u3066\u30d5\u30a9\u30f3\u30c8\u3092\u9078\u3076\u30c0\u30a4\u30a2\u30ed\u30b0\u3092\u4f5c\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u5f8c\u30c0\u30a4\u30a2\u30ed\u30b0\u4ee5\u5916\u306e\u5f62\u3067\u3082\u3053\u306e\u6a5f\u80fd\u3092\u4f7f\u3048\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3044\u3001\u3088\u308a\u6c4e\u7528\u6027\u306e\u3042\u308b\u53ea\u306eWidget\u3068\u3057\u3066\u4f5c\u308a\u76f4\u3057\u307e\u3057\u305f\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u5c11\u3057\u6d17\u7df4\u3055\u308c\u3066\u8aad\u307f\u3084\u3059\u304f\u306a\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\n# Screenshot\n![Screenshot at 2016-10-20 13:03:15.png](https://qiita-image-store.s3.amazonaws.com/0/144673/0860259c-deb3-1245-887c-a21459a821d0.png)\n\n# \u30bd\u30fc\u30b9\n\n### Module\n\n\n```python3:fontchooser.py\nimport os, os.path\n\nfrom kivy.lang import Builder\nfrom kivy.core.text import LabelBase\nfrom kivy.properties import StringProperty\nfrom kivy.uix.floatlayout import FloatLayout\n\n\nBuilder.load_string(r\"\"\"\n<FontChooser>:\n    Spinner:\n        id: spinner\n        size_hint: 0.4, 0.1\n        pos_hint: {r'x': 0.01, r'y': 0.89}\n        text: r'Click to Choose Font'\n    TextInput:\n        id: ti_sample\n        text: r'Sample Text'\n        size_hint: 0.57, 0.1\n        pos_hint: {r'x': 0.42, r'y': 0.89}\n    Label:\n        id: l_sample\n        size_hint: 0.98, 0.87\n        pos_hint: {r'x': 0.01, r'y': 0.01}\n        text: ti_sample.text  # TextInput(TextBox)\u306e\u5185\u5bb9\u304c\u305d\u306e\u307e\u307e\u30b5\u30f3\u30d7\u30eb\u306e\u30c6\u30ad\u30b9\u30c8\u306b\u306a\u308b\n        font_size: 100\n\"\"\")\n\n\n_fontnames = None  # Widget\u3092\u4f5c\u308b\u5ea6\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u691c\u7d22\u3059\u308b\u306e\u306f\u5acc\u306a\u306e\u3067\u3053\u306e\u5909\u6570\u306b\u300c\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u540d\u306elist\u300d\u3092\u4fdd\u5b58\u3057\u3066\u7f6e\u304f\n\n\ndef clear_cache():\n    r'''\u4fdd\u5b58\u3057\u3066\u7f6e\u3044\u305f\u300c\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u540d\u306elist\u300d\u3092\u524a\u9664'''\n    global _fontnames\n    _fontnames = None\n\n\ndef fontnames():\n    r'''\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u691c\u7d22\u3057\u305d\u306eiterable\u3092\u8fd4\u3059'''\n    global _fontnames\n    if _fontnames is None:\n        fontnamesset = set()\n        for directory in LabelBase.get_system_fonts_dir():\n            for filename in os.listdir(directory):\n                if os.path.isfile(os.path.join(directory, filename)):\n                    if filename.endswith(r'.ttf') or filename.endswith(r'.ttc'):\n                        fontnamesset.add(filename)\n        _fontnames = list(fontnamesset)\n        _fontnames.sort(key=(lambda x: x.lower()))\n    return _fontnames\n\n\nclass FontChooser(FloatLayout):\n\n    font_name = StringProperty()\n    sample_text = StringProperty(r'Sample Text')\n\n    def __init__(self, **kwargs):\n        super(FontChooser, self).__init__(**kwargs)\n        spinner = self.ids.spinner\n        spinner.values.extend(fontnames())\n        spinner.bind(text=self.setter(r'font_name'))\n        self.ids.ti_sample.bind(text=self.setter(r'sample_text'))\n\n    def on_font_name(self, ed, value):\n        self.ids.spinner.text = value\n        self.ids.l_sample.font_name = value\n\n    def on_sample_text(self, ed, value):\n        self.ids.ti_sample.text = value\n\n```\n\n### \u4f7f\u3046\u5074\n\n```python3:test_fontchooser.py\nfrom kivy.base import runTouchApp\n\nimport fontchooser\n\nroot = fontchooser.FontChooser()\nroot.sample_text = '\u73cd\u73e0\u5976\u8336\\n\u3042\u3044\u3046\u3048\u304a\\nABCDE'\nroot.bind(font_name=(lambda widget, value: print(value)))\n\nrunTouchApp(root)\n\nprint(r'Last value', root.font_name)\n```\n\n```:\u6a19\u6e96\u51fa\u529b\u306e\u4f8b\nDejaVuSans-BoldOblique.ttf\nDroidSerif-Italic.ttf\nVemana.ttf\nyutapon_coding_sl_080.ttc\numing.ttc\nTakaoExMincho.ttf\nLast value TakaoExMincho.ttf\n```\n", "tags": ["Python3", "Kivy1.9.1"]}