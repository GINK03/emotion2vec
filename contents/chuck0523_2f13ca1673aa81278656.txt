{"context": "RethinkDB\u3067tableJoin\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3002\n\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\nTable joins in RethinkDB\n\n\u4eca\u56de\u3064\u304b\u3046\u30c6\u30fc\u30d6\u30eb\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n\u30e6\u30fc\u30b6\u30fc\u30c6\u30fc\u30d6\u30eb\n\n\n\u30e1\u30c3\u30bb\u30fc\u30b8\u30c6\u30fc\u30d6\u30eb\n\n\u30e6\u30fc\u30b6\u30fc\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\uff11\u5bfe\u591a\u306e\u95a2\u4fc2\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nReQL\u30af\u30a8\u30ea\n\ninnerJoin\u3092\u4f7f\u3063\u305f\u5834\u5408\nReQL command: innerJoin\nr.db('DBName').table('messages').innerJoin(r.db('trialDB').table('users'), (messageRow, userRow) => {\n  return messageRow('userId').eq(userRow('id'))\n})\n\n\u3061\u3087\u3063\u3068\u9577\u3044\u3002\u3057\u304b\u3082\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308b\u3068\u3001innerJoin\u306f\u9045\u3044\u3057\u52b9\u7387\u304c\u826f\u304f\u306a\u3044\u306e\u3067\u975e\u63a8\u5968\u3068\u306e\u3053\u3068\u3002\uff08outerJoin\u3082\u540c\u69d8\uff09\n\neqJoin\u3092\u4f7f\u3063\u305f\u5834\u5408\nReQL command: eqJoin\nr.db('DBName').table('messages').eqJoin('userId', \nr.db('DBName').table('users'))\n\n\u77ed\u3044\u3002\n\n\u30af\u30a8\u30ea\u7d50\u679c\n\u3061\u306a\u307f\u306b\u3001\u30af\u30a8\u30ea\u7d50\u679c\u306f\u3053\u3093\u306a\u611f\u3058\u3002left, right\u306e\u9805\u76ee\u306b\u305d\u308c\u305e\u308c\u306e\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30de\u30c3\u30c1\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\n{\n  \"left\": {\n    \"id\": 3 ,\n    \"message\":  \"What's up?\" ,\n    \"userId\": 1\n  } ,\n  \"right\": {\n    \"id\": 1 ,\n    \"name\":  \"Sam\"\n  }\n} \n\n{\n  \"left\": {\n    \"id\": 1 ,\n    \"message\":  \"Hi, John\" ,\n    \"userId\": 1\n  } ,\n  \"right\": {\n    \"id\": 1 ,\n    \"name\":  \"Sam\"\n  }\n} \n\n{\n  \"left\": {\n    \"id\": 2 ,\n    \"message\":  \"Hi there, Sam\" ,\n    \"userId\": 2\n  } ,\n  \"right\": {\n    \"id\": 2 ,\n    \"name\":  \"John\"\n  }\n}\n\n\n\u30af\u30a8\u30ea\u7d50\u679c\u306e\u6574\u5f62\n\nzip\u3092\u4f7f\u3063\u3066\u30af\u30a8\u30ea\u7d50\u679c\u3092\u30de\u30fc\u30b8\nReQL command: zip\n\u5148\u7a0b\u306eeqJoin\u306e\u672b\u5c3e\u306bzip()\u3092\u4ed8\u3051\u8db3\u3059\u3068\u3001\u30af\u30a8\u30ea\u7d50\u679c\u306eright\u3092left\u306b\u30de\u30fc\u30b8\u3067\u304d\u308b\u3002\nr.db('DBName').table('messages').eqJoin('userId', \nr.db('DBName').table('users')).zip()\n\n\u2191\u306eReQL\u3092\u767a\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u7d50\u679c\u304c\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n{\n  \"id\": 1 ,\n  \"message\":  \"What's up?\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 1 ,\n  \"message\":  \"Hi, John\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 2 ,\n  \"message\":  \"Hi there, Sam\" ,\n  \"name\":  \"John\" ,\n  \"userId\": 2\n}\n\n\u3061\u3087\u3063\u3068id\u304c\u304a\u304b\u3057\u306a\u3053\u3068\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\nwithout\u3092\u3064\u304b\u3063\u3066\u4e0d\u8981\u306a\u8981\u7d20\u306e\u524a\u9664\nzip\u3092\u4f7f\u3063\u3066\u30de\u30fc\u30b8\u3059\u308b\u524d\u306b\u3001without\u3092\u4f7f\u3063\u3066right\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u7d50\u679c\u304b\u3089id\u3092\u629c\u3044\u3066\u304a\u304d\u307e\u3059\u3002\nReQL command: without\nr.db('DBName').table('messages').eqJoin('userId',\nr.db('DBName').table('users')).without({right: 'id'}).zip()\n\n\u30af\u30a8\u30ea\u7d50\u679c\u304c\u304d\u308c\u3044\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n{\n  \"id\": 3 ,\n  \"message\":  \"What's up?\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 1 ,\n  \"message\":  \"Hi, John\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 2 ,\n  \"message\":  \"Hi there, Sam\" ,\n  \"name\":  \"John\" ,\n  \"userId\": 2\n}\n\nid\u306e\u9806\u756a\u304c\u6574\u5217\u3057\u3066\u3044\u306a\u304f\u3066\u6c17\u6301\u3061\u60aa\u3044\u3067\u3059\u3002\n\norederBy\u3067\u9806\u5e8f\u6574\u7406\norderBy\u3092\u4f7f\u3063\u3066\u3001messageId\u306e\u9806\u306b\u6574\u5217\u3055\u305b\u307e\u3059\u3002\nReQL command: orderBy\nr.db('DBName').table('messages').eqJoin('userId',\nr.db('DBName').table('users')).without({right: 'id'}).zip().orderBy('id')\n\nzip\u306e\u7d50\u679c\u306b\u5bfe\u3057\u3066\u4e26\u3073\u66ff\u3048\u3092\u884c\u3046\u306e\u3067\u3001zip\u306e\u5f8c\u306b\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\n\u30af\u30a8\u30ea\u7d50\u679c\u304c\u3053\u3061\u3089\u3002\n{\n  \"id\": 1 ,\n  \"message\":  \"Hi, John\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} ,\n{\n  \"id\": 2 ,\n  \"message\":  \"Hi there, Sam\" ,\n  \"name\":  \"John\" ,\n  \"userId\": 2\n} ,\n{\n  \"id\": 3 ,\n  \"message\":  \"What's up?\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n}\n\n\u304d\u3061\u3093\u3068\u6574\u5217\u3057\u3066\u3044\u307e\u3059\u3002\nRethinkDB\u3067tableJoin\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3002\n\n## \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\n\n[Table joins in RethinkDB](https://www.rethinkdb.com/docs/table-joins/)\n\n## \u4eca\u56de\u3064\u304b\u3046\u30c6\u30fc\u30d6\u30eb\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n### \u30e6\u30fc\u30b6\u30fc\u30c6\u30fc\u30d6\u30eb\n\n<img width=\"483\" alt=\"Screen Shot 2016-09-18 at 7.36.08 PM.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77614/9506f448-bd22-2867-ef7b-c535acd34f61.png\">\n\n### \u30e1\u30c3\u30bb\u30fc\u30b8\u30c6\u30fc\u30d6\u30eb\n\n<img width=\"589\" alt=\"Screen Shot 2016-09-18 at 7.36.15 PM.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/77614/e8ab1714-bb5c-cc9c-3a52-7d0b866c9895.png\">\n\n\n\u30e6\u30fc\u30b6\u30fc\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\uff11\u5bfe\u591a\u306e\u95a2\u4fc2\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n## ReQL\u30af\u30a8\u30ea\n\n### innerJoin\u3092\u4f7f\u3063\u305f\u5834\u5408\n\n[ReQL command: innerJoin](https://www.rethinkdb.com/api/javascript/inner_join/)\n\n```js\nr.db('DBName').table('messages').innerJoin(r.db('trialDB').table('users'), (messageRow, userRow) => {\n  return messageRow('userId').eq(userRow('id'))\n})\n```\n\u3061\u3087\u3063\u3068\u9577\u3044\u3002\u3057\u304b\u3082\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308b\u3068\u3001innerJoin\u306f\u9045\u3044\u3057\u52b9\u7387\u304c\u826f\u304f\u306a\u3044\u306e\u3067\u975e\u63a8\u5968\u3068\u306e\u3053\u3068\u3002\uff08outerJoin\u3082\u540c\u69d8\uff09\n\n\n### eqJoin\u3092\u4f7f\u3063\u305f\u5834\u5408\n\n[ReQL command: eqJoin](https://www.rethinkdb.com/api/javascript/eq_join/)\n\n```js\nr.db('DBName').table('messages').eqJoin('userId', \nr.db('DBName').table('users'))\n```\n\n\u77ed\u3044\u3002\n\n## \u30af\u30a8\u30ea\u7d50\u679c\n\n\u3061\u306a\u307f\u306b\u3001\u30af\u30a8\u30ea\u7d50\u679c\u306f\u3053\u3093\u306a\u611f\u3058\u3002left, right\u306e\u9805\u76ee\u306b\u305d\u308c\u305e\u308c\u306e\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u30de\u30c3\u30c1\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\n\n```js\n{\n  \"left\": {\n    \"id\": 3 ,\n    \"message\":  \"What's up?\" ,\n    \"userId\": 1\n  } ,\n  \"right\": {\n    \"id\": 1 ,\n    \"name\":  \"Sam\"\n  }\n} \n\n{\n  \"left\": {\n    \"id\": 1 ,\n    \"message\":  \"Hi, John\" ,\n    \"userId\": 1\n  } ,\n  \"right\": {\n    \"id\": 1 ,\n    \"name\":  \"Sam\"\n  }\n} \n\n{\n  \"left\": {\n    \"id\": 2 ,\n    \"message\":  \"Hi there, Sam\" ,\n    \"userId\": 2\n  } ,\n  \"right\": {\n    \"id\": 2 ,\n    \"name\":  \"John\"\n  }\n}\n```\n\n\n## \u30af\u30a8\u30ea\u7d50\u679c\u306e\u6574\u5f62\n\n\n### zip\u3092\u4f7f\u3063\u3066\u30af\u30a8\u30ea\u7d50\u679c\u3092\u30de\u30fc\u30b8\n\n[ReQL command: zip](https://www.rethinkdb.com/api/javascript/zip/)\n\n\u5148\u7a0b\u306eeqJoin\u306e\u672b\u5c3e\u306bzip()\u3092\u4ed8\u3051\u8db3\u3059\u3068\u3001\u30af\u30a8\u30ea\u7d50\u679c\u306eright\u3092left\u306b\u30de\u30fc\u30b8\u3067\u304d\u308b\u3002\n\n```js\nr.db('DBName').table('messages').eqJoin('userId', \nr.db('DBName').table('users')).zip()\n```\n\n\n\u2191\u306eReQL\u3092\u767a\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u7d50\u679c\u304c\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n```js\n\n{\n  \"id\": 1 ,\n  \"message\":  \"What's up?\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 1 ,\n  \"message\":  \"Hi, John\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 2 ,\n  \"message\":  \"Hi there, Sam\" ,\n  \"name\":  \"John\" ,\n  \"userId\": 2\n}\n```\n\n\u3061\u3087\u3063\u3068id\u304c\u304a\u304b\u3057\u306a\u3053\u3068\u306b\u306a\u3063\u3066\u307e\u3059\u3002\n\n### without\u3092\u3064\u304b\u3063\u3066\u4e0d\u8981\u306a\u8981\u7d20\u306e\u524a\u9664\n\nzip\u3092\u4f7f\u3063\u3066\u30de\u30fc\u30b8\u3059\u308b\u524d\u306b\u3001without\u3092\u4f7f\u3063\u3066right\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u7d50\u679c\u304b\u3089id\u3092\u629c\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n[ReQL command: without](https://www.rethinkdb.com/api/javascript/without/)\n\n```js\nr.db('DBName').table('messages').eqJoin('userId',\nr.db('DBName').table('users')).without({right: 'id'}).zip()\n```\n\n\u30af\u30a8\u30ea\u7d50\u679c\u304c\u304d\u308c\u3044\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```js\n{\n  \"id\": 3 ,\n  \"message\":  \"What's up?\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 1 ,\n  \"message\":  \"Hi, John\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} \n\n{\n  \"id\": 2 ,\n  \"message\":  \"Hi there, Sam\" ,\n  \"name\":  \"John\" ,\n  \"userId\": 2\n}\n```\n\nid\u306e\u9806\u756a\u304c\u6574\u5217\u3057\u3066\u3044\u306a\u304f\u3066\u6c17\u6301\u3061\u60aa\u3044\u3067\u3059\u3002\n\n### orederBy\u3067\u9806\u5e8f\u6574\u7406\n\norderBy\u3092\u4f7f\u3063\u3066\u3001messageId\u306e\u9806\u306b\u6574\u5217\u3055\u305b\u307e\u3059\u3002\n\n[ReQL command: orderBy](https://www.rethinkdb.com/api/javascript/order_by/)\n\n\n```js\nr.db('DBName').table('messages').eqJoin('userId',\nr.db('DBName').table('users')).without({right: 'id'}).zip().orderBy('id')\n```\n\nzip\u306e\u7d50\u679c\u306b\u5bfe\u3057\u3066\u4e26\u3073\u66ff\u3048\u3092\u884c\u3046\u306e\u3067\u3001zip\u306e\u5f8c\u306b\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\n\n\u30af\u30a8\u30ea\u7d50\u679c\u304c\u3053\u3061\u3089\u3002\n\n```js\n{\n  \"id\": 1 ,\n  \"message\":  \"Hi, John\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n} ,\n{\n  \"id\": 2 ,\n  \"message\":  \"Hi there, Sam\" ,\n  \"name\":  \"John\" ,\n  \"userId\": 2\n} ,\n{\n  \"id\": 3 ,\n  \"message\":  \"What's up?\" ,\n  \"name\":  \"Sam\" ,\n  \"userId\": 1\n}\n```\n\n\u304d\u3061\u3093\u3068\u6574\u5217\u3057\u3066\u3044\u307e\u3059\u3002\n", "tags": ["RethinkDB"]}