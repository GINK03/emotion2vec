{"context": " More than 1 year has passed since last update.Fuelphp\u3067\u7d50\u5408\u8868(join\u3057\u305f\u8868)\u304b\u3089\u5024\u3092\u53d6\u5f97\u3059\u308b\u969b\u306bOR\u30de\u30c3\u30d1\u30fc\u3092\u7528\u3044\u308b\u3068\u91cd\u8907\u3059\u308b\u30ab\u30e9\u30e0\u540d\u304c\u3042\u3063\u3066\u3082\u3088\u3057\u306a\u306b\u51e6\u7406\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3059\u304c\u3001Query Builder\u306e\u5834\u5408\u306f\u4e00\u65b9\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u306e\u5024\u3057\u304b\u51fa\u529b\u3055\u308c\u306a\u3044\u305f\u3081\u3001\u91cd\u8907\u3059\u308b\u30ab\u30e9\u30e0\u540d\u306b\u5bfe\u3057\u3066\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4ed8\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u30ab\u30e9\u30e0\u540d\u3084\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\uff11\u3064\uff11\u3064\u624b\u3067\u6307\u5b9a\u3059\u308b\u306e\u306f\u975e\u5e38\u306b\u9762\u5012\u3067\u4fdd\u5b88\u6027\u3082\u826f\u304f\u306a\u3044\u305f\u3081\u3001\u4eca\u56de\u306fDB::list_columns\u95a2\u6570\u3067\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u540d\u3092\u53d6\u5f97\u3057\u3066\u3001\u305d\u308c\u3092\u3082\u3068\u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4f5c\u6210\u3057\u3066\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u30ab\u30e9\u30e0\u540d\u3068\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u51fa\u529b\u3059\u308b\u30b3\u30fc\u30c9\u306e\u4f8b\n$cols = array(\n    'users' => DB::list_columns('users'),\n    'user_infos' => DB::list_columns('user_infos')\n);\n\nforeach ($cols as $tbl => $col) {\n    foreach ($col as $val) {\n        $cols_name[$tbl . '.' . $val['name']] = array($tbl . '.' . $val['name'], $tbl . '_' . $val['name']);\n    }\n\n}\n\n\u5fc5\u8981\u306e\u306a\u3044\u30ab\u30e9\u30e0\u540d\u306f\u3001foreach\u306e\u4e2d\u306bswitch\u6587\u3067\u6761\u4ef6\u5206\u5c90\u3055\u305b\u3066\u53d6\u308a\u9664\u304f\u304b\u3001foreach\u524d\u3042\u308b\u3044\u306f\u5f8c\u306bunset\u95a2\u6570\u3067\u9664\u3051\u3070\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u3088\u308a\u53d6\u5f97\u3057\u305f\u30ab\u30e9\u30e0\u540d\u3092\u3082\u3068\u306bselect\u3059\u308b\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3068\u306a\u308a\u307e\u3059\u3002\n\u901a\u5e38\u306f\u7d20\u76f4\u306b\u4f8b\uff11\u306e\u65b9\u6cd5\u3092\u7528\u3044\u308c\u3070\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\uff08FuelPHP\u306b\u306fDB::select_array\u95a2\u6570\u304c\u3042\u308b\u306e\u3067\u3001\u4f8b\uff12\u306e\u3088\u3046\u306bcall_user_func_array\u95a2\u6570\u3067\u9811\u5f35\u3063\u3066\u914d\u5217\u3092\u5f15\u6570\u5316\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u307e\u3042\u3053\u3093\u306a\u65b9\u6cd5\u3082\u3042\u308b\u3088\u3068\u3044\u3046\u3053\u3068\u3067\uff09\n\n\u4f7f\u7528\u4f8b\n\n\u4f8b\uff11\uff1aDB::select_array\u95a2\u6570\u3067\u914d\u5217\u306e\u5024\u3092\u5f15\u6570\u3068\u3057\u3066\u7528\u3044\u308b\npublic static function get_user_list() {\n    $cols = array(\n        'users' => DB::list_columns('users'),\n        'user_infos' => DB::list_columns('user_infos')\n    );\n\n    foreach ($cols as $tbl => $col) {\n        foreach ($col as $val) {\n            $cols_name[] = array($tbl . '.' . $val['name'], $tbl . '_' . $val['name']);\n        }\n\n    }\n\n    $query = call_user_func_array('DB::select',$cols_name);\n    $query->from('users');\n    $query->join('user_infos','LEFT');\n    $query->on('users.id','=','user_infos.id');\n    $result = $query->execute()->as_array();\n    return $result;\n}\n\n\n\u4f8b\uff12\uff1acall_user_func_array\u95a2\u6570\u3067\u914d\u5217\u306e\u5024\u3092\u5f15\u6570\u3068\u3057\u3066\u7528\u3044\u308b\npublic static function get_user_list() {\n    $cols = array(\n        'users' => DB::list_columns('users'),\n        'user_infos' => DB::list_columns('user_infos')\n    );\n\n    foreach ($cols as $tbl => $col) {\n        foreach ($col as $val) {\n            $cols_name[] = array($tbl . '.' . $val['name'], $tbl . '_' . $val['name']);\n        }\n\n    }\n\n    $query = call_user_func_array('DB::select',$cols_name);\n    $query->from('users');\n    $query->join('user_infos','LEFT');\n    $query->on('users.id','=','user_infos.id');\n    $result = $query->execute()->as_array();\n    return $result;\n}\n\nFuelphp\u3067\u7d50\u5408\u8868(join\u3057\u305f\u8868)\u304b\u3089\u5024\u3092\u53d6\u5f97\u3059\u308b\u969b\u306bOR\u30de\u30c3\u30d1\u30fc\u3092\u7528\u3044\u308b\u3068\u91cd\u8907\u3059\u308b\u30ab\u30e9\u30e0\u540d\u304c\u3042\u3063\u3066\u3082\u3088\u3057\u306a\u306b\u51e6\u7406\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3059\u304c\u3001Query Builder\u306e\u5834\u5408\u306f\u4e00\u65b9\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u306e\u5024\u3057\u304b\u51fa\u529b\u3055\u308c\u306a\u3044\u305f\u3081\u3001\u91cd\u8907\u3059\u308b\u30ab\u30e9\u30e0\u540d\u306b\u5bfe\u3057\u3066\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4ed8\u52a0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3057\u304b\u3057\u3001\u30ab\u30e9\u30e0\u540d\u3084\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\uff11\u3064\uff11\u3064\u624b\u3067\u6307\u5b9a\u3059\u308b\u306e\u306f\u975e\u5e38\u306b\u9762\u5012\u3067\u4fdd\u5b88\u6027\u3082\u826f\u304f\u306a\u3044\u305f\u3081\u3001\u4eca\u56de\u306fDB::list_columns\u95a2\u6570\u3067\u30c6\u30fc\u30d6\u30eb\u306e\u30ab\u30e9\u30e0\u540d\u3092\u53d6\u5f97\u3057\u3066\u3001\u305d\u308c\u3092\u3082\u3068\u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4f5c\u6210\u3057\u3066\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n# \u30ab\u30e9\u30e0\u540d\u3068\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u51fa\u529b\u3059\u308b\u30b3\u30fc\u30c9\u306e\u4f8b\n```php\n$cols = array(\n    'users' => DB::list_columns('users'),\n    'user_infos' => DB::list_columns('user_infos')\n);\n\nforeach ($cols as $tbl => $col) {\n    foreach ($col as $val) {\n        $cols_name[$tbl . '.' . $val['name']] = array($tbl . '.' . $val['name'], $tbl . '_' . $val['name']);\n    }\n\n}\n```\n\n\u5fc5\u8981\u306e\u306a\u3044\u30ab\u30e9\u30e0\u540d\u306f\u3001foreach\u306e\u4e2d\u306bswitch\u6587\u3067\u6761\u4ef6\u5206\u5c90\u3055\u305b\u3066\u53d6\u308a\u9664\u304f\u304b\u3001foreach\u524d\u3042\u308b\u3044\u306f\u5f8c\u306bunset\u95a2\u6570\u3067\u9664\u3051\u3070\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u4e0a\u8a18\u30b3\u30fc\u30c9\u3088\u308a\u53d6\u5f97\u3057\u305f\u30ab\u30e9\u30e0\u540d\u3092\u3082\u3068\u306bselect\u3059\u308b\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3068\u306a\u308a\u307e\u3059\u3002\n\u901a\u5e38\u306f\u7d20\u76f4\u306b\u4f8b\uff11\u306e\u65b9\u6cd5\u3092\u7528\u3044\u308c\u3070\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\uff08FuelPHP\u306b\u306fDB::select_array\u95a2\u6570\u304c\u3042\u308b\u306e\u3067\u3001\u4f8b\uff12\u306e\u3088\u3046\u306bcall_user_func_array\u95a2\u6570\u3067\u9811\u5f35\u3063\u3066\u914d\u5217\u3092\u5f15\u6570\u5316\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u307e\u3042\u3053\u3093\u306a\u65b9\u6cd5\u3082\u3042\u308b\u3088\u3068\u3044\u3046\u3053\u3068\u3067\uff09\n\n# \u4f7f\u7528\u4f8b\n## \u4f8b\uff11\uff1aDB::select_array\u95a2\u6570\u3067\u914d\u5217\u306e\u5024\u3092\u5f15\u6570\u3068\u3057\u3066\u7528\u3044\u308b\n```php\npublic static function get_user_list() {\n\t$cols = array(\n\t    'users' => DB::list_columns('users'),\n\t    'user_infos' => DB::list_columns('user_infos')\n\t);\n\n\tforeach ($cols as $tbl => $col) {\n\t    foreach ($col as $val) {\n\t        $cols_name[] = array($tbl . '.' . $val['name'], $tbl . '_' . $val['name']);\n\t    }\n\n\t}\n\n\t$query = call_user_func_array('DB::select',$cols_name);\n\t$query->from('users');\n\t$query->join('user_infos','LEFT');\n\t$query->on('users.id','=','user_infos.id');\n\t$result = $query->execute()->as_array();\n\treturn $result;\n}\n```\n\n## \u4f8b\uff12\uff1acall_user_func_array\u95a2\u6570\u3067\u914d\u5217\u306e\u5024\u3092\u5f15\u6570\u3068\u3057\u3066\u7528\u3044\u308b\n```php\npublic static function get_user_list() {\n\t$cols = array(\n\t    'users' => DB::list_columns('users'),\n\t    'user_infos' => DB::list_columns('user_infos')\n\t);\n\n\tforeach ($cols as $tbl => $col) {\n\t    foreach ($col as $val) {\n\t        $cols_name[] = array($tbl . '.' . $val['name'], $tbl . '_' . $val['name']);\n\t    }\n\n\t}\n\n\t$query = call_user_func_array('DB::select',$cols_name);\n\t$query->from('users');\n\t$query->join('user_infos','LEFT');\n\t$query->on('users.id','=','user_infos.id');\n\t$result = $query->execute()->as_array();\n\treturn $result;\n}\n```\n", "tags": ["PHP", "FuelPHP"]}