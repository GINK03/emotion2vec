{"context": " More than 1 year has passed since last update.\u975e\u540c\u671f\u51e6\u7406\u3063\u3066\u3088\u304f\u805e\u304f\u3051\u3069\u3069\u3046\u3044\u3046\u3053\u3068\u306a\u306e\u304b\u3044\u307e\u3044\u3061\u5206\u304b\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001JavaScript\u3092\u984c\u6750\u306b\u52c9\u5f37\u304c\u3066\u3089\u57fa\u672c\u7684\u306a\u3068\u3053\u308d\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n\n\u975e\u540c\u671f\u51e6\u7406\u3063\u3066\u306a\u306b\uff1f\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3063\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b3\u30fc\u30c9\u3092\u4e0a\u304b\u3089\u9806\u306b1\u884c\u305a\u3064\u5b9f\u884c\u3057\u3066\u3044\u304d\u307e\u3059\u306d\u3002\n\u305d\u306e\u51e6\u7406\u306e1\u3064\u306b\u6642\u9593\u306e\u304b\u304b\u308b\u51e6\u7406\u304c\u3042\u308b\u3068\u3001\u305d\u306e\u5b9f\u884c\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u3001\u6b21\u306e\u884c\u306b\u306f\u9032\u307f\u307e\u305b\u3093\u3002\n\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3002\u5b9f\u884c\u74b0\u5883\u306fNode.js (v5.3.0) \u3067\u3059\u3002\n\u51e6\u7406\u306e\u9014\u4e2d\u30675\u79d2\u9593sleep\u3057\u307e\u3059\u3002\n\nsync_sleep.js\nconsole.log(\"start\");\n\nfunction sleep(milliSeconds) {\n  var startTime = new Date().getTime();\n  while (new Date().getTime() < startTime + milliSeconds);\n\n  console.log(\"sleep\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\");\n}\n\nsleep(5000); // \u5b9f\u884c\u3059\u308b\u306e\u306b5\u79d2\u304b\u304b\u308b\n\nconsole.log(\"end\");\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n$ node sync_sleep.js\nstart\nsleep\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\nend\n\n\u4e0a\u304b\u3089\u4e0b\u306b\u5411\u304b\u3063\u3066\u3001\u9806\u306b\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f\u3002\u307e\u30fc\u7279\u306b\u9055\u548c\u611f\u306f\u306a\u3044\u3068\u3044\u3046\u304b\u3001\u306a\u306b\u3092\u5f53\u305f\u308a\u524d\u306e\u3053\u3068\u3092\u8a00\u3063\u3066\u3044\u308b\u3093\u3060\u3068\u3044\u3046\u611f\u3058\u3002\n\n\u975e\u540c\u671f\u51e6\u7406\n\u3067\u3059\u304c\u3001\u4f8b\u3048\u3070\u30b5\u30fc\u30d0\u30fc\u3068\u901a\u4fe1\u3092\u884c\u3063\u305f\u969b\u306b\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u8fd4\u3063\u3066\u304f\u308b\u307e\u3067\u306b\u6570\u79d2\u4ee5\u4e0a\u3082\u304b\u304b\u308b\u3068\u56f0\u308a\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001\u300c\u3042\u308b\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u305f\u3068\u304d\u3001\u623b\u308a\u5024\u3068\u3057\u3066\u672c\u6765\u6e21\u3057\u305f\u3044\u7d50\u679c\u3092\u8fd4\u3059\u306e\u3067\u306f\u306a\u304f\u3001\u4e00\u5ea6\u95a2\u6570\u3068\u3057\u3066\u306f\u7d42\u4e86\u3057\uff08\uff1d\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308b\uff09\u3001\u5f8c\u3067\u300e\u672c\u6765\u6e21\u3057\u305f\u304b\u3063\u305f\u5024\u300f\u3092\u8fd4\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u306b\u305d\u306e\u5024\u3092\u901a\u77e5\u3059\u308b\u300d\u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u8003\u3048\u51fa\u3055\u308c\u307e\u3057\u305f\u3002\n\u3053\u306e\u3088\u3046\u306a\u4ed5\u7d44\u307f\u3092\u975e\u540c\u671f\u51e6\u7406\u3068\u3044\u3044\u3001\u306a\u306b\u304b\u3057\u3089\u306e\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089\u6e21\u3057\u305ffunction\u3092\u5b9f\u884c\u3055\u305b\u308b\u3068\u3044\u3046\u95a2\u6570\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u3068\u3044\u3044\u307e\u3059\u3002\n\u305f\u3068\u3048\u3070\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u53d6\u3063\u3066\u3001\u305d\u306e\u5185\u5bb9\u3092\u51fa\u529b\u3059\u308b\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\u307e\u305a\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\nnumber.txt\n1\n2\n\n\n\u6b21\u306b\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u3092\u8aad\u307f\u53d6\u3063\u3066\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\n\nasync_readfile.js\nconsole.log(\"start\");\n\nvar fs = require('fs');\nfs.readFile(\"number.txt\", \"utf-8\", function(err, data){\n  if (err) throw err;\n  console.log(\"\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u53d6\u308a\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\u3002\");\n  console.log(data);\n});\n\nconsole.log(\"end\");\n\n\n\u3067\u306f\u5b9f\u884c\u3002\n$ node async_readfile.js\nstart\nend\n\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u53d6\u308a\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n1\n2\n\n\u306a\u3093\u3068\u3001end\u304c\u5148\u306b\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\n\u307e\u305aasync_readfile.js\u306b\u8a18\u8f09\u3055\u308c\u305f\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u969b\u3001fs.readFile\u306f\u975e\u540c\u671f\u578b\u95a2\u6570\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u304a\u308a\u3001\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u306f\u4e00\u5ea6\u7d42\u4e86\u3057\u3001\u4e2d\u306e\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u6bb5\u968e\u3067\u547c\u3073\u51fa\u3057\u5143\u306b\u901a\u77e5\u3057\u307e\u3059\u3002\n\u7d50\u679c\u3001end\u304c\u5148\u306b\u51fa\u529b\u3055\u308c\u305f\u306e\u3067\u3059\u3002\n\u3053\u308c\u304c\u975e\u540c\u671f\u51e6\u7406\u3067\u3059\u3002\n\nNode.js\u306b\u3064\u3044\u3066\n\u3061\u3087\u3063\u3068\u8131\u7dda\u3057\u307e\u3059\u3051\u3069\u3001\u975e\u540c\u671f\u51e6\u7406\u3068\u3044\u3046\u3053\u3068\u3067Node.js\u306b\u3064\u3044\u3066\u8efd\u304f\u3054\u7d39\u4ecb\u3092\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9JavaScript\u5b9f\u884c\u74b0\u5883\u3067\u3042\u308b\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3067\u3042\u308b\u3002\n\u30bf\u30fc\u30df\u30ca\u30eb\u3067'node my_app.js'\u3068\u6253\u3064\u3053\u3068\u3067\u3001JavaScript\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3067\u304d\u308b\u3002\nJavaScript\u306f\u300cV8 javascript engine\u300d(Google Chrome\u3067\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3082\u306e)\u3067\u5b9f\u884c\u3055\u308c\u308b\u3002\nNode\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306eJavaScript API\u3092\u63d0\u4f9b\u3059\u308b\u3002\n\nWiki\u306b\u3088\u308b\u3068\n\nNode.js\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9JavaScript\u5b9f\u884c\u74b0\u5883\u3067\u3059\u3002Node.js\u306f\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u306e\u975e\u540c\u671fI/O\u30e2\u30c7\u30eb\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u9ad8\u3044\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u767a\u63ee\u3057\u307e\u3059\u3002\n\n\u3069\u3046\u3044\u3046\u3053\u3068\u304b\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u304b\u307f\u7815\u3044\u3066\u307f\u307e\u3059\u3002\n\n\u30a2\u30d1\u30c3\u30c1\u306a\u3069\u3067\u63a1\u7528\u3055\u308c\u3066\u3044\u308b\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u30e2\u30c7\u30eb\u306e\u96e3\u70b9\n\n\u30b9\u30ec\u30c3\u30c9\u6bce\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306e\u5727\u8feb\nI/O\u5f85\u3061\n\n\n\u4e0a\u8a18\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306eNode.js\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\n\n\u30b3\u30fc\u30c9\u3092\u3072\u3068\u3064\u306e\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3059\u308b \u2192 \u30b9\u30ec\u30c3\u30c9\u6bce\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306e\u5727\u8feb\u306e\u56de\u907f\nI/O\u51e6\u7406\u3092\u975e\u540c\u671f\u306b\u5b9f\u88c5\u3057\u3001\u30a4\u30d9\u30f3\u30c8\u30c8\u30ea\u30ac\u30fc\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u51e6\u7406\u306e\u9806\u5e8f\u6027\u3092\u4fdd\u3064 \u2192 I/O\u5f85\u3061\u306e\u4f4e\u6e1b\n\n\u3068\u3044\u3046\u3053\u3068\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u9ad8\u3044\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u767a\u63ee\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059(\u305f\u3060\u3057\u9069\u3057\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3001\u4e0d\u5411\u304d\u306a\u30b1\u30fc\u30b9\u3068\u3044\u3046\u306e\u306f\u3082\u3061\u308d\u3093\u3042\u308a\u307e\u3059)\u3002\n\u4e0a\u306easync_readfile.js\u306e\u4f8b\u3060\u3068\u3001async_readfile.js\u306b\u8a18\u8f09\u3055\u308c\u305f\u30b3\u30fc\u30c9\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u51fa\u3057\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u751f\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3001fs.readFile\u306e\u7b2c\u4e09\u5f15\u6570\u306b\u6307\u5b9a\u3055\u308c\u305f\u95a2\u6570(\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u3067\u3059\u306d)\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\u300c\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u306b\u884c\u304f\u300d\u3068\u3044\u3046\u51e6\u7406\u3092I/O\u5c02\u9580\u306e\u30ef\u30fc\u30ab\u30fc\u30b9\u30ec\u30c3\u30c9(\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u30bf\u30b9\u30af\u3092\u51e6\u7406\u3059\u308b\u30b9\u30ec\u30c3\u30c9)\u306b\u4efb\u305b\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u306d\u3002\n\u30dd\u30a4\u30f3\u30c8\u306f \u300c\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u304cI/O\u5f85\u3061\u3092\u884c\u3063\u3066\u3044\u306a\u3044\u4e8b\u300d\u3002\u51e6\u7406\u30b3\u30b9\u30c8\u306e\u9ad8\u3044I/O\u51e6\u7406\u3092\u30ef\u30fc\u30ab\u30fc\u306b\u4efb\u305b\u3066\u3044\u308b\u9593\u3001\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u306f\u5225\u306e\u4ed5\u4e8b\u3092\u884c\u3046\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30ea\u30bd\u30fc\u30b9\u3092\u52b9\u7387\u7684\u306b\u4f7f\u3046\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u554f\u984c\u70b9\nNode.js\u306b\u8a71\u304c\u305d\u308c\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u305d\u308d\u305d\u308d\u8a71\u3092\u623b\u3057\u307e\u3059\u3002\n\u3055\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u4f7f\u3063\u3066\u975e\u540c\u671f\u51e6\u7406\u3092\u66f8\u304f\u306e\u306f\u3001\u5358\u7d14\u306a\u30b1\u30fc\u30b9\u3067\u3042\u308c\u3070\u30b7\u30f3\u30d7\u30eb\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u3059\u304c\u3001\u8907\u96d1\u306a\u51e6\u7406\u306b\u306a\u308b\u3068\u3001\u3068\u305f\u3093\u306b\u5206\u304b\u308a\u306b\u304f\u304f\u306a\u308b\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\n\u4e00\u822c\u7684\u306b\u66f8\u304f\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u7b2c1\u5f15\u6570\u306bError\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3001\u7b2c2\u5f15\u6570\u306b\u5f97\u3089\u308c\u305f\u7d50\u679c\u3092\u6e21\u3059\u306e\u306fnode\u306e\u6163\u7fd2\u306a\u306e\u3067\u3001\u4eca\u56de\u306f\u30b9\u30ad\u30c3\u30d7\u3057\u307e\u3059\u3002\n\nnest_callback.js\nfunction sleep(callback) {\n  setTimeout(function() {\n    callback(null, '\u73fe\u5728\u6642\u523b:' + new Date());\n  }, 1000);\n}\n\nsleep(function(err, res) {\n  console.log(res);\n  sleep(function(err, res) {\n    console.log(res);\n    sleep(function(err, res) {\n      console.log(res);\n    });\n  });\n});\n\n\n\u3053\u306e\u3088\u3046\u306b\u4f55\u306e\u5de5\u592b\u3082\u305b\u305a\u306b\u66f8\u304f\u3068\u3001\u95a2\u6570\u306e\u5165\u308c\u5b50\u304c\u7a4d\u307f\u91cd\u306a\u3063\u3066\u3044\u304d\u3001\u30b3\u30fc\u30c9\u304c\u3069\u3093\u3069\u3093\u8aad\u307f\u306b\u304f\u304f\u306a\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u540c\u671f\u7684\u306b\u66f8\u3053\u3046\n\u3053\u308c\u3092\u8aad\u307f\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306b\u3001\u540c\u671f\u7684\u306b\u66f8\u3053\u3046\u3088\u3068\u3044\u3046\u306e\u304c\u3053\u308c\u304b\u3089\u306e\u304a\u8a71\u3067\u3059\u3002\n\u540c\u671f\u7684\u306b\u66f8\u304f\u3068\u306f\n\n\u30cd\u30b9\u30c8\u304c\u5165\u308c\u5b50\u306b\u306a\u3089\u306a\u3044\u3002\n\u4e0a\u304b\u3089\u4e0b\u306b\u8aad\u3093\u3067\u5b9f\u884c\u30d5\u30ed\u30fc\u304c\u628a\u63e1\u3067\u304d\u308b\u3002\n\u975e\u540c\u671f\u51e6\u7406\u306e\u7d50\u679c\u5f97\u3089\u308c\u305f\u5024\u3092\u6b21\u306e\u51e6\u7406\u306b\u5f15\u304d\u56de\u305b\u308b\u3002\ntry/catch\u3067\u7d20\u76f4\u306b\u4f8b\u5916\u3092\u6355\u6349\u3067\u304d\u308b\u3002\n\n\u4ee3\u8868\u7684\u306a\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u4e0b\u8a18\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\n\nPromise\u3092\u4f7f\u3046\u65b9\u6cd5\nGenerator\u3092\u4f7f\u3046\u65b9\u6cd5\n\n\u500b\u4eba\u7684\u306b\u306f\u3001\u6700\u8fd1\u306ejs\u975e\u540c\u671f\u51e6\u7406 Promise\u3068Generator\u306e\u5171\u5b58\u306b\u3042\u308b\u3088\u3046\u306b\u3001\n\n\u57fa\u672c\u306f\u5168\u3066Promise\u3067\u304f\u308b\u3080\u3002\n\u4e26\u5217\u51e6\u7406\u306fPromise.all\u3002\n\u76f4\u5217\u51e6\u7406\u306f1\u3092\u3055\u3089\u306bGenerator\u3067\u5305\u3080\u3002\n\n\u306e\u65b9\u91dd\u3067\u5b9f\u88c5\u3059\u308b\u306e\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3002\u3053\u306e\u8fba\u3069\u3046\u306a\u3093\u3067\u3057\u3087\u3046\u306d\u3002\n\u3068\u308a\u3042\u3048\u305a\u9806\u306b\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\nPromise\nPromise\u306e\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9\u306f\u300c\u975e\u540c\u671f\u7684\u306b\u52d5\u4f5c\u3059\u308b\u95a2\u6570\u306f\u3001\u672c\u6765\u8fd4\u3057\u305f\u3044\u623b\u308a\u5024\u306e\u4ee3\u308f\u308a\u306b\u300e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u300f\u3068\u3044\u3046\u7279\u5225\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u3066\u304a\u304d\u3001(\u672c\u6765\u8fd4\u3057\u305f\u3044)\u5024\u3092\u6e21\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3089\u3001\u305d\u306e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u901a\u3057\u3066\u547c\u3073\u51fa\u3057\u5143\u306b\u5024\u3092\u6e21\u3059\u300d\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\n\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u306f\u3001\u98df\u5802\u306b\u884c\u3063\u305f\u6642\u306b\u3001\u5148\u306b\u304a\u91d1\u3092\u6255\u3063\u3066\u98df\u5238\u3092\u3082\u3089\u3044\u3001\u3067\u304d\u3042\u304c\u3063\u305f\u3089\u98df\u5238\u3068\u5f15\u304d\u63db\u3048\u306b\u3054\u98ef\u3092\u53d7\u3051\u3068\u308b\u611f\u3058\u3002\n\n\u57fa\u672c\u306e\u4f7f\u3044\u65b9\n\u307e\u305a\u306f\u96f0\u56f2\u6c17\u3092\u63b4\u3093\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\nPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u8fd4\u3059\u3002Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f\u3001new Promise(fn)\u3002\n\nfn\u306b\u306f\u4f55\u3089\u304b\u306e\u51e6\u7406\u3092\u66f8\u304f\u3002\n\n\n\u51e6\u7406\u7d50\u679c\u304c\u6b63\u5e38\u306a\u3089\u3001resolve(\u7d50\u679c\u306e\u5024)\u3092\u547c\u3076\u3002\n\u51e6\u7406\u7d50\u679c\u304c\u30a8\u30e9\u30fc\u306a\u3089\u3001reject(Error\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u3092\u547c\u3076\u3002\n\n\n1\u306epromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066.then\u3067\u5024\u304c\u8fd4\u3063\u3066\u304d\u305f\u6642\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n1\u79d2\u305f\u3063\u305f\u3089\u6587\u5b57\u5217async\u3092\u8fd4\u3059\u975e\u540c\u671f\u51e6\u7406\u3092Promise\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\npromise.js\nconsole.log('start');\n\nfunction puts(str) {\n  // \u2460 Promise\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092 new \u3057\u3066\u3001promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve(str);\n    }, 1000);\n  });\n}\n\n// \u2461 \u2460\u306epromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066 .then \u3067\u5024\u304c\u8fd4\u3063\u3066\u304d\u305f\u6642\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\nputs('async').then(function(result) {\n  console.log(result)\n});\n\nconsole.log('end');\n\n\n\u5b9f\u884c\u7d50\u679c\u3002\n$ time node promise.js\nstart\nend\nasync\n\nnode promise.js  0.11s user 0.06s system 14% cpu 1.194 total\n\n\u6700\u5f8c\u306b\u6587\u5b57\u5217async\u304c\u8fd4\u3063\u3066\u304d\u3066\u3001\u3060\u3044\u305f\u30441\u79d2\u3067\u51e6\u7406\u5168\u4f53\u304c\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n\nPromise\u306e\u4ed5\u7d44\u307f\n\u3067\u306f\u3082\u3046\u5c11\u3057\u6df1\u304fPromise\u306e\u4ed5\u7d44\u307f\u3092\u898b\u3066\u3044\u304d\u307e\u3059\u3002\nPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u72b6\u614b\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306f\u4ee5\u4e0b\u306e3\u7a2e\u985e\u3067\u3059\u3002\n\nFulfilled: resolve(\u6210\u529f)\u3057\u305f\u6642\u3002\u3053\u306e\u6642onFulfilled\u304c\u547c\u3070\u308c\u308b\nRejected: reject(\u5931\u6557)\u3057\u305f\u6642\u3002\u3053\u306e\u6642onRejected\u304c\u547c\u3070\u308c\u308b\nPending: Fulfilled\u307e\u305f\u306fRejected\u3067\u306f\u306a\u3044\u6642\u3002\u3064\u307e\u308apromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u6210\u3055\u308c\u305f\u521d\u671f\u72b6\u614b\u7b49\u304c\u8a72\u5f53\u3059\u308b\n\n\u6700\u521d\u306fPending\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u5b8c\u4e86\u3059\u308b\u3068Fullfilled\u3001\u5931\u6557\u3059\u308b\u3068Rejected\u306b\u306a\u308a\u307e\u3059\u3002\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u3042\u308bPromise\u306b\u306f\u3001new\u3059\u308b\u6642\u3001function\u3092\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u307e\u3059\u3002\n\u3053\u306efunction\u306b\u306f\u30012\u3064\u306e\u5f15\u6570\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u7b2c\u4e00\u5f15\u6570\u3068\u3057\u3066\u6307\u5b9a\u3057\u3066\u3044\u308bresolve(\u5fc5\u9808)\u3002\u3053\u306eresolve\u306ffunction\u3067\u3001\u51e6\u7406\u7d50\u679c\u304c\u6b63\u5e38\u3060\u3063\u305f\u5834\u5408\u306b\u5b9f\u884c\u3055\u305b\u308b\u3002resolve\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u304cfulfilled\u306b\u306a\u308b\u3002\n\u7b2c\u4e8c\u5f15\u6570\u3067\u3042\u308breject(\u7701\u7565\u53ef)\u3002\u540c\u3058\u304ffunction\u3060\u304c\u3001resolve\u3068\u306f\u9006\u3067\u3001\u51e6\u7406\u7d50\u679c\u304c\u30a8\u30e9\u30fc\u3067\u3042\u3063\u305f\u5834\u5408\u306b\u5b9f\u884c\u3055\u305b\u308b\u3002reject\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u304crejected\u306b\u306a\u308b\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u3001Promise\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3057\u305ffunction\u5185\u3067\u3001Promsie\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u3092pending\u304b\u3089fulfilled\u53ca\u3073rejected\u306b\u5909\u5316\u3055\u305b\u307e\u3059\u3002\n\u4eca\u56de\u306fgetURL\u3068\u3044\u3046\u3001GET\u3092\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u3053\u306egetURL\u3067\u306f\u3001\u53d6\u5f97\u7d50\u679c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u304c200\u306e\u5834\u5408\u306e\u307f\u53d6\u5f97\u306b\u6210\u529f\u3001\u305d\u308c\u4ee5\u5916\u306f\u30a8\u30e9\u30fc\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nhttps-promise.js\nfunction getURL(url) {\n  // \u2460Promise\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092 new \u3057\u3066\u3001promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n  return new Promise(function (resolve, reject) {\n    const https = require('https');\n\n    https.get(url, function(res) {\n      if (res.statusCode === 200) {\n        res.on('data', function(chunk) {\n          // \u2461\u3046\u307e\u304f\u3044\u3063\u305f\u5834\u5408\u306e\u51e6\u7406\u3092\u8a18\u8f09\u3059\u308b\n          resolve(chunk);\n        });\n      } else {\n        // \u2461\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u51e6\u7406\u3092\u8a18\u8f09\u3059\u308b\n        reject(new Error(res.statusCode));\n      }\n    }).on('error', function(e) {\n      reject(new Error(e.message));\n    });\n  })\n}\n\nconst URL = \"https://www.google.co.jp\";\n// \u2462promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066 .then \u3067\u5024\u304c\u8fd4\u3063\u3066\u304d\u305f\u6642\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\ngetURL(URL).then(function onFulfilled(value){\n  console.log(value);\n}).catch(function onRejected(error){\n  console.error(error);\n});\n\n\n\n\u540c\u671f\u7684\u306a\u51e6\u7406\u3082\u6df7\u305c\u308b\nPromise\u306b\u540c\u671f\u7684\u306a\u51e6\u7406\u3092\u6df7\u305c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u975e\u540c\u671f\u51e6\u7406treble\u3067\u3001\u6e21\u3055\u308c\u305f\u6570\u5024\u30923\u500d\u306b\u3057\u3001Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u540c\u671f\u51e6\u7406dump\u3067\u3001\u6e21\u3055\u308c\u305f\u6570\u5024\u3092\u30ed\u30b0\u306b\u8868\u793a\u3057\u3001\u305d\u306e\u307e\u307e\u305d\u306e\u6570\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u3053\u306e2\u3064\u306e\u95a2\u6570\u304c\u6df7\u3056\u3063\u305f\u51e6\u7406\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\ntreble.js\n// \u975e\u540c\u671f\u51e6\u7406: 3\u500d\u306b\u3059\u308b\nconst treble = function(number) {\n  return new Promise(function(resolve) {\n    resolve(number * 3);\n  });\n};\n\n// \u540c\u671f\u51e6\u7406: \u30ed\u30b0\u306b\u8868\u793a\u3059\u308b\nconst dump = function(number) {\n  console.log(number);\n  return number;\n};\n\ntreble(10) // 10 * 3 -> 30\n  .then(treble) // 30 * 3 -> 90\n  .then(dump)\n  .then(treble) // 90 * 3 -> 270\n  .then(dump);\n\n\n\u5b9f\u884c\u7d50\u679c\u3002\n$ node treble.js\n90\n270\n\ndump\u306e\u3088\u3046\u306b\u3001onFulfilled\u30cf\u30f3\u30c9\u30e9\u5185\u3067Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4ee5\u5916\u304c\u8fd4\u3055\u308c\u305f\u5834\u5408\u3001\u65b0\u3057\u304fPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u6210\u3055\u308c\u3001\u8fd4\u3057\u305f\u5024\u3067\u3059\u3050\u306bresolve\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u4ed5\u7d44\u307f\u306e\u304a\u304b\u3052\u3067\u3001Promise\u3092\u7528\u3044\u3066\u540c\u671f\u51e6\u7406\u3068\u975e\u540c\u671f\u51e6\u7406\u3092\u6df7\u305c\u3066\u8a18\u8f09\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4e26\u5217\u51e6\u7406\n\u975e\u540c\u671f\u51e6\u7406\u3092\u6271\u3046\u6642\u306b\u30011\u3064\u305a\u3064\u9806\u756a\u306b\u6271\u3046\u306e\u3067\u306f\u306a\u304f\u3001\u8907\u6570\u306e\u51e6\u7406\u3092\u4e26\u5217\u306b\u8d70\u3089\u305b\u305f\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u306e\u5834\u5408\u306fpromise.all\u3092\u4f7f\u3044\u307e\u3059\u3002\n\npromise_all.js\nconsole.log('start');\n\nfunction puts(str) {\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve(str);\n    }, 1000);\n  });\n}\n\n\nvar promises = [\n  puts(1),\n  puts(2),\n  puts(3)\n];\n\n// \u4e26\u5217\u51e6\u7406\u306b\u5bfe\u3057\u3066Promise.all\u3092\u4f7f\u3046\nPromise.all(promises).then(function(results) {\n  console.log(results);\n});\n\nconsole.log('end');\n\n\n\u5b9f\u884c\u7d50\u679c\u3002\n$ time node promise_all.js\nstart\nend\n[ 1, 2, 3 ]\n\nnode promise_all.js  0.12s user 0.07s system 15% cpu 1.196 total\n\n\u4e26\u5217\u51e6\u7406\u306a\u306e\u3067\u7d041\u79d2\u3067\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n\nGenerator\n\u76f4\u5217\u51e6\u7406\u3092\u8a18\u8ff0\u3059\u308b\u306e\u306bGenerator\u3092\u4f7f\u3044\u307e\u3059(\u4e26\u5217\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059)\u3002\nGenerator\u306f\u4efb\u610f\u306e\u6642\u70b9\u3067\u51e6\u7406\u3092\u6b62\u3081\u3066\u305d\u3053\u304b\u3089\u518d\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u975e\u540c\u671f\u306e\u51e6\u7406\u3092\u3044\u3063\u305f\u3093\u6b62\u3081\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u7d42\u4e86\u3057\u305f\u3089\u518d\u958b\u3059\u308b\u3068\u3044\u3046\u51e6\u7406\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u76f4\u5217\u51e6\u7406\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n\n\u76f4\u5217\u51e6\u7406\n\u76f4\u5217\u51e6\u7406\u306f\u8272\u3005\u306a\u66f8\u304d\u65b9\u304c\u3042\u308b\u306e\u3067\u3059\u3051\u3069\u3001Generator\u3068co\u3092\u4f7f\u3063\u305f\u3084\u308a\u65b9\u304c\u3059\u3063\u304d\u308a\u3068\u66f8\u3051\u308b\u306e\u3067\u3001\u4eca\u56de\u306f\u305d\u306e\u3084\u308a\u65b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\ngenerator.js\n// co \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\n// $ npm install co\nconsole.log('start');\n\nfunction puts(str) {\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve(str);\n    }, 1000);\n  });\n}\n\nconst co = require('co')\nco(function* () {\n  const res1 = yield puts('1');\n  console.log(res1);\n\n  const res2 = yield puts('2');\n  console.log(res2);\n\n  const res3 = yield puts('3');\n  console.log(res3);\n});\n\nconsole.log('end');\n\n\n\u5b9f\u884c\u7d50\u679c\u3002\ntime node generator.js\nstart\nend\n1\n2\n3\n\nnode generator.js  0.12s user 0.07s system 5% cpu 3.227 total\n\nyield\u306bPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3057\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u6b21\u306e\u51e6\u7406\u306b\u9032\u307f\u307e\u3059\u3002\n\u76f4\u5217\u3067\u51e6\u7406\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u9806\u756a\u901a\u308a\u306b\u5b9f\u884c\u3055\u308c\u3001\u7d043\u79d2\u3067\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\n\u975e\u540c\u671f\u51e6\u7406\u3068\u306f\u300c\u3042\u308b\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u305f\u3068\u304d\u3001\u623b\u308a\u5024\u3068\u3057\u3066\u672c\u6765\u6e21\u3057\u305f\u3044\u7d50\u679c\u3092\u8fd4\u3059\u306e\u3067\u306f\u306a\u304f\u3001\u4e00\u5ea6\u95a2\u6570\u3068\u3057\u3066\u306f\u7d42\u4e86\u3057\uff08\uff1d\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308b\uff09\u3001\u5f8c\u3067\u300e\u672c\u6765\u6e21\u3057\u305f\u304b\u3063\u305f\u5024\u300f\u3092\u8fd4\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u306b\u305d\u306e\u5024\u3092\u901a\u77e5\u3059\u308b\u300d\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3002\nNode.js\u3067\u306fI/O\u51e6\u7406\u3092\u975e\u540c\u671f\u306b\u3059\u308b\u3053\u3068\u3067\u3001I/O\u5f85\u3061\u3092\u9632\u304e\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u3066\u3044\u308b\u3002\nJavaScript\u3067\u306e\u975e\u540c\u671f\u51e6\u7406\u3092\u884c\u3046\u969b\u306f\u3001\u4e0b\u8a18\u65b9\u91dd\u304c\u826f\u3055\u305d\u3046\u3002\n\n\n\u57fa\u672c\u306f\u5168\u3066Promise\u3067\u304f\u308b\u3080\u3002\n\u4e26\u5217\u51e6\u7406\u306fPromise.all\u3067\u307e\u3068\u3081\u3066\u51e6\u7406\u3067\u304d\u308b\u3002\n\u76f4\u5217\u51e6\u7406\u306fPromise\u3092\u3055\u3089\u306bGenerator\u3068co\u3067\u5305\u3080\u3068\u3001\u3059\u3063\u304d\u308a\u66f8\u3051\u308b\u3002\n\n\nPromise\u306f\u300c\u975e\u540c\u671f\u7684\u306b\u52d5\u4f5c\u3059\u308b\u95a2\u6570\u306f\u3001\u672c\u6765\u8fd4\u3057\u305f\u3044\u623b\u308a\u5024\u306e\u4ee3\u308f\u308a\u306b\u300e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u300f\u3068\u3044\u3046\u7279\u5225\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u3066\u304a\u304d\u3001(\u672c\u6765\u8fd4\u3057\u305f\u3044)\u5024\u3092\u6e21\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3089\u3001\u305d\u306e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u901a\u3057\u3066\u547c\u3073\u51fa\u3057\u5143\u306b\u5024\u3092\u6e21\u3059\u300d\u3068\u3044\u3046\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3067\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u73fe\u3055\u305b\u3066\u3044\u308b\u3002\nGenerator\u306f\u4efb\u610f\u306e\u6642\u70b9\u3067\u51e6\u7406\u3092\u6b62\u3081\u3066\u305d\u3053\u304b\u3089\u518d\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u975e\u540c\u671f\u306e\u51e6\u7406\u3092\u3044\u3063\u305f\u3093\u6b62\u3081\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u7d42\u4e86\u3057\u305f\u3089\u518d\u958b\u3059\u308b\u3068\u3044\u3046\u51e6\u7406\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u76f4\u5217\u51e6\u7406\u3092\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\n\n\u53c2\u8003\n\nUnderstanding node.js\n\u975e\u540c\u671f\u51e6\u7406\u3068Promise\uff08Deferred\uff09\u3092\u80cc\u666f\u304b\u3089\u7406\u89e3\u3057\u3088\u3046\n[Node.js] \u975e\u540c\u671f\u578b\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u3068\u306f \u301c JS\u304a\u304f\u306e\u307b\u305d\u9053 #001\ngenerator\u3068JavaScript\u306e\u975e\u540c\u671f\u51e6\u7406\n\u6700\u8fd1\u306ejs\u975e\u540c\u671f\u51e6\u7406 Promise\u3068Generator\u306e\u5171\u5b58\nJavaScript Promise\u306e\u672c\nPromise\u3067\u7c21\u5358\uff01JavaScript\u975e\u540c\u671f\u51e6\u7406\u5165\u9580\n\n\n\u975e\u540c\u671f\u51e6\u7406\u3063\u3066\u3088\u304f\u805e\u304f\u3051\u3069\u3069\u3046\u3044\u3046\u3053\u3068\u306a\u306e\u304b\u3044\u307e\u3044\u3061\u5206\u304b\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3001JavaScript\u3092\u984c\u6750\u306b\u52c9\u5f37\u304c\u3066\u3089\u57fa\u672c\u7684\u306a\u3068\u3053\u308d\u3092\u307e\u3068\u3081\u307e\u3059\u3002\n\n## \u975e\u540c\u671f\u51e6\u7406\u3063\u3066\u306a\u306b\uff1f\n\u30d7\u30ed\u30b0\u30e9\u30e0\u3063\u3066\u5b9f\u884c\u3059\u308b\u3068\u3001\u30b3\u30fc\u30c9\u3092\u4e0a\u304b\u3089\u9806\u306b1\u884c\u305a\u3064\u5b9f\u884c\u3057\u3066\u3044\u304d\u307e\u3059\u306d\u3002\n\u305d\u306e\u51e6\u7406\u306e1\u3064\u306b\u6642\u9593\u306e\u304b\u304b\u308b\u51e6\u7406\u304c\u3042\u308b\u3068\u3001\u305d\u306e\u5b9f\u884c\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u3001\u6b21\u306e\u884c\u306b\u306f\u9032\u307f\u307e\u305b\u3093\u3002\n\n\u4f8b\u3048\u3070\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3002\u5b9f\u884c\u74b0\u5883\u306fNode.js (v5.3.0) \u3067\u3059\u3002\n\n\u51e6\u7406\u306e\u9014\u4e2d\u30675\u79d2\u9593sleep\u3057\u307e\u3059\u3002\n\n```sync_sleep.js\nconsole.log(\"start\");\n\nfunction sleep(milliSeconds) {\n  var startTime = new Date().getTime();\n  while (new Date().getTime() < startTime + milliSeconds);\n\n  console.log(\"sleep\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\");\n}\n\nsleep(5000); // \u5b9f\u884c\u3059\u308b\u306e\u306b5\u79d2\u304b\u304b\u308b\n\nconsole.log(\"end\");\n```\n\n\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\u5b9f\u884c\u7d50\u679c\n$ node sync_sleep.js\nstart\nsleep\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\nend\n```\n\n\u4e0a\u304b\u3089\u4e0b\u306b\u5411\u304b\u3063\u3066\u3001\u9806\u306b\u5b9f\u884c\u3055\u308c\u307e\u3057\u305f\u3002\u307e\u30fc\u7279\u306b\u9055\u548c\u611f\u306f\u306a\u3044\u3068\u3044\u3046\u304b\u3001\u306a\u306b\u3092\u5f53\u305f\u308a\u524d\u306e\u3053\u3068\u3092\u8a00\u3063\u3066\u3044\u308b\u3093\u3060\u3068\u3044\u3046\u611f\u3058\u3002\n\n### \u975e\u540c\u671f\u51e6\u7406\n\u3067\u3059\u304c\u3001\u4f8b\u3048\u3070\u30b5\u30fc\u30d0\u30fc\u3068\u901a\u4fe1\u3092\u884c\u3063\u305f\u969b\u306b\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u8fd4\u3063\u3066\u304f\u308b\u307e\u3067\u306b\u6570\u79d2\u4ee5\u4e0a\u3082\u304b\u304b\u308b\u3068\u56f0\u308a\u307e\u3059\u3002\n\n\u305d\u3053\u3067\u3001\u300c\u3042\u308b\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u305f\u3068\u304d\u3001\u623b\u308a\u5024\u3068\u3057\u3066\u672c\u6765\u6e21\u3057\u305f\u3044\u7d50\u679c\u3092\u8fd4\u3059\u306e\u3067\u306f\u306a\u304f\u3001\u4e00\u5ea6\u95a2\u6570\u3068\u3057\u3066\u306f\u7d42\u4e86\u3057\uff08\uff1d\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308b\uff09\u3001\u5f8c\u3067\u300e\u672c\u6765\u6e21\u3057\u305f\u304b\u3063\u305f\u5024\u300f\u3092\u8fd4\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u306b\u305d\u306e\u5024\u3092\u901a\u77e5\u3059\u308b\u300d\u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u8003\u3048\u51fa\u3055\u308c\u307e\u3057\u305f\u3002\n\u3053\u306e\u3088\u3046\u306a\u4ed5\u7d44\u307f\u3092\u975e\u540c\u671f\u51e6\u7406\u3068\u3044\u3044\u3001\u306a\u306b\u304b\u3057\u3089\u306e\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089\u6e21\u3057\u305ffunction\u3092\u5b9f\u884c\u3055\u305b\u308b\u3068\u3044\u3046\u95a2\u6570\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u3068\u3044\u3044\u307e\u3059\u3002\n\n\u305f\u3068\u3048\u3070\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u53d6\u3063\u3066\u3001\u305d\u306e\u5185\u5bb9\u3092\u51fa\u529b\u3059\u308b\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\u307e\u305a\u30c6\u30ad\u30b9\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```number.txt\n1\n2\n```\n\n\u6b21\u306b\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u5bb9\u3092\u8aad\u307f\u53d6\u3063\u3066\u51fa\u529b\u3057\u3066\u307f\u307e\u3059\u3002\n\n```async_readfile.js\nconsole.log(\"start\");\n\nvar fs = require('fs');\nfs.readFile(\"number.txt\", \"utf-8\", function(err, data){\n  if (err) throw err;\n  console.log(\"\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u53d6\u308a\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\u3002\");\n  console.log(data);\n});\n\nconsole.log(\"end\");\n```\n\n\u3067\u306f\u5b9f\u884c\u3002\n\n```\u5b9f\u884c\u7d50\u679c\n$ node async_readfile.js\nstart\nend\n\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u53d6\u308a\u6e96\u5099\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n1\n2\n```\n\n\u306a\u3093\u3068\u3001`end`\u304c\u5148\u306b\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\n\u307e\u305a`async_readfile.js`\u306b\u8a18\u8f09\u3055\u308c\u305f\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u969b\u3001`fs.readFile`\u306f\u975e\u540c\u671f\u578b\u95a2\u6570\u3068\u3057\u3066\u5b9f\u88c5\u3055\u308c\u3066\u304a\u308a\u3001\u547c\u3073\u51fa\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u306f\u4e00\u5ea6\u7d42\u4e86\u3057\u3001\u4e2d\u306e\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u6bb5\u968e\u3067\u547c\u3073\u51fa\u3057\u5143\u306b\u901a\u77e5\u3057\u307e\u3059\u3002\n\u7d50\u679c\u3001`end`\u304c\u5148\u306b\u51fa\u529b\u3055\u308c\u305f\u306e\u3067\u3059\u3002\n\u3053\u308c\u304c\u975e\u540c\u671f\u51e6\u7406\u3067\u3059\u3002\n\n### Node.js\u306b\u3064\u3044\u3066\n\u3061\u3087\u3063\u3068\u8131\u7dda\u3057\u307e\u3059\u3051\u3069\u3001\u975e\u540c\u671f\u51e6\u7406\u3068\u3044\u3046\u3053\u3068\u3067Node.js\u306b\u3064\u3044\u3066\u8efd\u304f\u3054\u7d39\u4ecb\u3092\u3002\n\n* \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9JavaScript\u5b9f\u884c\u74b0\u5883\u3067\u3042\u308b\u3002\n* \u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30c4\u30fc\u30eb\u3067\u3042\u308b\u3002\n* \u30bf\u30fc\u30df\u30ca\u30eb\u3067'node my_app.js'\u3068\u6253\u3064\u3053\u3068\u3067\u3001JavaScript\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3067\u304d\u308b\u3002\n* JavaScript\u306f\u300cV8 javascript engine\u300d(Google Chrome\u3067\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3082\u306e)\u3067\u5b9f\u884c\u3055\u308c\u308b\u3002\n* Node\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306eJavaScript API\u3092\u63d0\u4f9b\u3059\u308b\u3002\n\n[Wiki](https://github.com/nodejs/node/wiki)\u306b\u3088\u308b\u3068\n\n> Node.js\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9JavaScript\u5b9f\u884c\u74b0\u5883\u3067\u3059\u3002Node.js\u306f\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u306e\u975e\u540c\u671fI/O\u30e2\u30c7\u30eb\u3092\u63a1\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u9ad8\u3044\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u767a\u63ee\u3057\u307e\u3059\u3002\n\n\u3069\u3046\u3044\u3046\u3053\u3068\u304b\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u304b\u307f\u7815\u3044\u3066\u307f\u307e\u3059\u3002\n\n##### \u30a2\u30d1\u30c3\u30c1\u306a\u3069\u3067\u63a1\u7528\u3055\u308c\u3066\u3044\u308b\u30de\u30eb\u30c1\u30b9\u30ec\u30c3\u30c9\u30e2\u30c7\u30eb\u306e\u96e3\u70b9\n* \u30b9\u30ec\u30c3\u30c9\u6bce\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306e\u5727\u8feb\n* I/O\u5f85\u3061\n\n##### \u4e0a\u8a18\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306eNode.js\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\n* \u30b3\u30fc\u30c9\u3092\u3072\u3068\u3064\u306e\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3059\u308b \u2192 \u30b9\u30ec\u30c3\u30c9\u6bce\u306e\u30e1\u30e2\u30ea\u9818\u57df\u306e\u5727\u8feb\u306e\u56de\u907f\n* I/O\u51e6\u7406\u3092\u975e\u540c\u671f\u306b\u5b9f\u88c5\u3057\u3001\u30a4\u30d9\u30f3\u30c8\u30c8\u30ea\u30ac\u30fc\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u51e6\u7406\u306e\u9806\u5e8f\u6027\u3092\u4fdd\u3064 \u2192 I/O\u5f85\u3061\u306e\u4f4e\u6e1b\n\n\u3068\u3044\u3046\u3053\u3068\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u9ad8\u3044\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u767a\u63ee\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059(\u305f\u3060\u3057\u9069\u3057\u3066\u3044\u308b\u30b1\u30fc\u30b9\u3001\u4e0d\u5411\u304d\u306a\u30b1\u30fc\u30b9\u3068\u3044\u3046\u306e\u306f\u3082\u3061\u308d\u3093\u3042\u308a\u307e\u3059)\u3002\n\n\u4e0a\u306e`async_readfile.js`\u306e\u4f8b\u3060\u3068\u3001`async_readfile.js`\u306b\u8a18\u8f09\u3055\u308c\u305f\u30b3\u30fc\u30c9\u306f\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u3067\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u51fa\u3057\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f\u3068\u3044\u3046\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u751f\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3001`fs.readFile`\u306e\u7b2c\u4e09\u5f15\u6570\u306b\u6307\u5b9a\u3055\u308c\u305f\u95a2\u6570(\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u3067\u3059\u306d)\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\u300c\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u306b\u884c\u304f\u300d\u3068\u3044\u3046\u51e6\u7406\u3092I/O\u5c02\u9580\u306e\u30ef\u30fc\u30ab\u30fc\u30b9\u30ec\u30c3\u30c9(\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u30bf\u30b9\u30af\u3092\u51e6\u7406\u3059\u308b\u30b9\u30ec\u30c3\u30c9)\u306b\u4efb\u305b\u3066\u3044\u308b\u308f\u3051\u3067\u3059\u306d\u3002\n\n\u30dd\u30a4\u30f3\u30c8\u306f \u300c\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u304cI/O\u5f85\u3061\u3092\u884c\u3063\u3066\u3044\u306a\u3044\u4e8b\u300d\u3002\u51e6\u7406\u30b3\u30b9\u30c8\u306e\u9ad8\u3044I/O\u51e6\u7406\u3092\u30ef\u30fc\u30ab\u30fc\u306b\u4efb\u305b\u3066\u3044\u308b\u9593\u3001\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u306f\u5225\u306e\u4ed5\u4e8b\u3092\u884c\u3046\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30ea\u30bd\u30fc\u30b9\u3092\u52b9\u7387\u7684\u306b\u4f7f\u3046\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\n\n## \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u554f\u984c\u70b9\nNode.js\u306b\u8a71\u304c\u305d\u308c\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u305d\u308d\u305d\u308d\u8a71\u3092\u623b\u3057\u307e\u3059\u3002\n\n\u3055\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u4f7f\u3063\u3066\u975e\u540c\u671f\u51e6\u7406\u3092\u66f8\u304f\u306e\u306f\u3001\u5358\u7d14\u306a\u30b1\u30fc\u30b9\u3067\u3042\u308c\u3070\u30b7\u30f3\u30d7\u30eb\u3067\u5206\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u3059\u304c\u3001\u8907\u96d1\u306a\u51e6\u7406\u306b\u306a\u308b\u3068\u3001\u3068\u305f\u3093\u306b\u5206\u304b\u308a\u306b\u304f\u304f\u306a\u308b\u3068\u3044\u3046\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4e00\u822c\u7684\u306b\u66f8\u304f\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u306e\u7b2c1\u5f15\u6570\u306bError\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3001\u7b2c2\u5f15\u6570\u306b\u5f97\u3089\u308c\u305f\u7d50\u679c\u3092\u6e21\u3059\u306e\u306fnode\u306e\u6163\u7fd2\u306a\u306e\u3067\u3001\u4eca\u56de\u306f\u30b9\u30ad\u30c3\u30d7\u3057\u307e\u3059\u3002\n\n```nest_callback.js\nfunction sleep(callback) {\n  setTimeout(function() {\n    callback(null, '\u73fe\u5728\u6642\u523b:' + new Date());\n  }, 1000);\n}\n\nsleep(function(err, res) {\n  console.log(res);\n  sleep(function(err, res) {\n    console.log(res);\n    sleep(function(err, res) {\n      console.log(res);\n    });\n  });\n});\n```\n\n\u3053\u306e\u3088\u3046\u306b\u4f55\u306e\u5de5\u592b\u3082\u305b\u305a\u306b\u66f8\u304f\u3068\u3001\u95a2\u6570\u306e\u5165\u308c\u5b50\u304c\u7a4d\u307f\u91cd\u306a\u3063\u3066\u3044\u304d\u3001\u30b3\u30fc\u30c9\u304c\u3069\u3093\u3069\u3093\u8aad\u307f\u306b\u304f\u304f\u306a\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n### \u540c\u671f\u7684\u306b\u66f8\u3053\u3046\n\n\u3053\u308c\u3092\u8aad\u307f\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306b\u3001\u540c\u671f\u7684\u306b\u66f8\u3053\u3046\u3088\u3068\u3044\u3046\u306e\u304c\u3053\u308c\u304b\u3089\u306e\u304a\u8a71\u3067\u3059\u3002\n\n\u540c\u671f\u7684\u306b\u66f8\u304f\u3068\u306f\n\n* \u30cd\u30b9\u30c8\u304c\u5165\u308c\u5b50\u306b\u306a\u3089\u306a\u3044\u3002\n* \u4e0a\u304b\u3089\u4e0b\u306b\u8aad\u3093\u3067\u5b9f\u884c\u30d5\u30ed\u30fc\u304c\u628a\u63e1\u3067\u304d\u308b\u3002\n* \u975e\u540c\u671f\u51e6\u7406\u306e\u7d50\u679c\u5f97\u3089\u308c\u305f\u5024\u3092\u6b21\u306e\u51e6\u7406\u306b\u5f15\u304d\u56de\u305b\u308b\u3002\n* try/catch\u3067\u7d20\u76f4\u306b\u4f8b\u5916\u3092\u6355\u6349\u3067\u304d\u308b\u3002\n\n\u4ee3\u8868\u7684\u306a\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u4e0b\u8a18\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\n\n* Promise\u3092\u4f7f\u3046\u65b9\u6cd5\n* Generator\u3092\u4f7f\u3046\u65b9\u6cd5\n\n\u500b\u4eba\u7684\u306b\u306f\u3001[\u6700\u8fd1\u306ejs\u975e\u540c\u671f\u51e6\u7406 Promise\u3068Generator\u306e\u5171\u5b58](http://qiita.com/kidach1/items/d997df84a0ede39d76ad)\u306b\u3042\u308b\u3088\u3046\u306b\u3001\n\n1. \u57fa\u672c\u306f\u5168\u3066Promise\u3067\u304f\u308b\u3080\u3002\n2. \u4e26\u5217\u51e6\u7406\u306fPromise.all\u3002\n3. \u76f4\u5217\u51e6\u7406\u306f1\u3092\u3055\u3089\u306bGenerator\u3067\u5305\u3080\u3002\n\n\u306e\u65b9\u91dd\u3067\u5b9f\u88c5\u3059\u308b\u306e\u304c\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u3002\u3053\u306e\u8fba\u3069\u3046\u306a\u3093\u3067\u3057\u3087\u3046\u306d\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u9806\u306b\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\n## Promise\nPromise\u306e\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9\u306f\u300c\u975e\u540c\u671f\u7684\u306b\u52d5\u4f5c\u3059\u308b\u95a2\u6570\u306f\u3001\u672c\u6765\u8fd4\u3057\u305f\u3044\u623b\u308a\u5024\u306e\u4ee3\u308f\u308a\u306b\u300e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u300f\u3068\u3044\u3046\u7279\u5225\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u3066\u304a\u304d\u3001(\u672c\u6765\u8fd4\u3057\u305f\u3044)\u5024\u3092\u6e21\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3089\u3001\u305d\u306e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u901a\u3057\u3066\u547c\u3073\u51fa\u3057\u5143\u306b\u5024\u3092\u6e21\u3059\u300d\u3068\u3044\u3046\u3082\u306e\u3067\u3059\u3002\n\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u306f\u3001\u98df\u5802\u306b\u884c\u3063\u305f\u6642\u306b\u3001\u5148\u306b\u304a\u91d1\u3092\u6255\u3063\u3066\u98df\u5238\u3092\u3082\u3089\u3044\u3001\u3067\u304d\u3042\u304c\u3063\u305f\u3089\u98df\u5238\u3068\u5f15\u304d\u63db\u3048\u306b\u3054\u98ef\u3092\u53d7\u3051\u3068\u308b\u611f\u3058\u3002\n\n### \u57fa\u672c\u306e\u4f7f\u3044\u65b9\n\u307e\u305a\u306f\u96f0\u56f2\u6c17\u3092\u63b4\u3093\u3067\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n1. Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u8fd4\u3059\u3002Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f\u3001`new Promise(fn)`\u3002\n2. `fn`\u306b\u306f\u4f55\u3089\u304b\u306e\u51e6\u7406\u3092\u66f8\u304f\u3002\n\t* \u51e6\u7406\u7d50\u679c\u304c\u6b63\u5e38\u306a\u3089\u3001resolve(\u7d50\u679c\u306e\u5024)\u3092\u547c\u3076\u3002\n\t* \u51e6\u7406\u7d50\u679c\u304c\u30a8\u30e9\u30fc\u306a\u3089\u3001reject(Error\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u3092\u547c\u3076\u3002\n3. 1\u306epromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066`.then`\u3067\u5024\u304c\u8fd4\u3063\u3066\u304d\u305f\u6642\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n1\u79d2\u305f\u3063\u305f\u3089\u6587\u5b57\u5217`async`\u3092\u8fd4\u3059\u975e\u540c\u671f\u51e6\u7406\u3092Promise\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```promise.js\nconsole.log('start');\n\nfunction puts(str) {\n  // \u2460 Promise\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092 new \u3057\u3066\u3001promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve(str);\n    }, 1000);\n  });\n}\n\n// \u2461 \u2460\u306epromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066 .then \u3067\u5024\u304c\u8fd4\u3063\u3066\u304d\u305f\u6642\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\nputs('async').then(function(result) {\n  console.log(result)\n});\n\nconsole.log('end');\n```\n\n\u5b9f\u884c\u7d50\u679c\u3002\n\n```\u5b9f\u884c\u7d50\u679c\n$ time node promise.js\nstart\nend\nasync\n\nnode promise.js  0.11s user 0.06s system 14% cpu 1.194 total\n```\n\n\u6700\u5f8c\u306b\u6587\u5b57\u5217`async`\u304c\u8fd4\u3063\u3066\u304d\u3066\u3001\u3060\u3044\u305f\u30441\u79d2\u3067\u51e6\u7406\u5168\u4f53\u304c\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n\n### Promise\u306e\u4ed5\u7d44\u307f\n\u3067\u306f\u3082\u3046\u5c11\u3057\u6df1\u304fPromise\u306e\u4ed5\u7d44\u307f\u3092\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\nPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306f\u72b6\u614b\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306f\u4ee5\u4e0b\u306e3\u7a2e\u985e\u3067\u3059\u3002\n\n* Fulfilled: resolve(\u6210\u529f)\u3057\u305f\u6642\u3002\u3053\u306e\u6642`onFulfilled`\u304c\u547c\u3070\u308c\u308b\n* Rejected: reject(\u5931\u6557)\u3057\u305f\u6642\u3002\u3053\u306e\u6642`onRejected`\u304c\u547c\u3070\u308c\u308b\n* Pending: Fulfilled\u307e\u305f\u306fRejected\u3067\u306f\u306a\u3044\u6642\u3002\u3064\u307e\u308apromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u6210\u3055\u308c\u305f\u521d\u671f\u72b6\u614b\u7b49\u304c\u8a72\u5f53\u3059\u308b\n\n\u6700\u521d\u306fPending\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u5b8c\u4e86\u3059\u308b\u3068Fullfilled\u3001\u5931\u6557\u3059\u308b\u3068Rejected\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u3042\u308bPromise\u306b\u306f\u3001new\u3059\u308b\u6642\u3001function\u3092\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u307e\u3059\u3002\n\n\u3053\u306efunction\u306b\u306f\u30012\u3064\u306e\u5f15\u6570\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n1. \u7b2c\u4e00\u5f15\u6570\u3068\u3057\u3066\u6307\u5b9a\u3057\u3066\u3044\u308bresolve(\u5fc5\u9808)\u3002\u3053\u306eresolve\u306ffunction\u3067\u3001\u51e6\u7406\u7d50\u679c\u304c\u6b63\u5e38\u3060\u3063\u305f\u5834\u5408\u306b\u5b9f\u884c\u3055\u305b\u308b\u3002resolve\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u304cfulfilled\u306b\u306a\u308b\u3002\n2. \u7b2c\u4e8c\u5f15\u6570\u3067\u3042\u308breject(\u7701\u7565\u53ef)\u3002\u540c\u3058\u304ffunction\u3060\u304c\u3001resolve\u3068\u306f\u9006\u3067\u3001\u51e6\u7406\u7d50\u679c\u304c\u30a8\u30e9\u30fc\u3067\u3042\u3063\u305f\u5834\u5408\u306b\u5b9f\u884c\u3055\u305b\u308b\u3002reject\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u304crejected\u306b\u306a\u308b\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u3057\u3066\u3001Promise\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3057\u305ffunction\u5185\u3067\u3001Promsie\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u72b6\u614b\u3092pending\u304b\u3089fulfilled\u53ca\u3073rejected\u306b\u5909\u5316\u3055\u305b\u307e\u3059\u3002\n\n\u4eca\u56de\u306f`getURL`\u3068\u3044\u3046\u3001GET\u3092\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u3053\u306e`getURL`\u3067\u306f\u3001\u53d6\u5f97\u7d50\u679c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u304c200\u306e\u5834\u5408\u306e\u307f\u53d6\u5f97\u306b\u6210\u529f\u3001\u305d\u308c\u4ee5\u5916\u306f\u30a8\u30e9\u30fc\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```https-promise.js\nfunction getURL(url) {\n  // \u2460Promise\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092 new \u3057\u3066\u3001promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n  return new Promise(function (resolve, reject) {\n    const https = require('https');\n\n    https.get(url, function(res) {\n      if (res.statusCode === 200) {\n        res.on('data', function(chunk) {\n          // \u2461\u3046\u307e\u304f\u3044\u3063\u305f\u5834\u5408\u306e\u51e6\u7406\u3092\u8a18\u8f09\u3059\u308b\n          resolve(chunk);\n        });\n      } else {\n        // \u2461\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u51e6\u7406\u3092\u8a18\u8f09\u3059\u308b\n        reject(new Error(res.statusCode));\n      }\n    }).on('error', function(e) {\n      reject(new Error(e.message));\n    });\n  })\n}\n\nconst URL = \"https://www.google.co.jp\";\n// \u2462promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066 .then \u3067\u5024\u304c\u8fd4\u3063\u3066\u304d\u305f\u6642\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u8a2d\u5b9a\u3059\u308b\ngetURL(URL).then(function onFulfilled(value){\n  console.log(value);\n}).catch(function onRejected(error){\n  console.error(error);\n});\n```\n\n### \u540c\u671f\u7684\u306a\u51e6\u7406\u3082\u6df7\u305c\u308b\nPromise\u306b\u540c\u671f\u7684\u306a\u51e6\u7406\u3092\u6df7\u305c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n\u975e\u540c\u671f\u51e6\u7406`treble`\u3067\u3001\u6e21\u3055\u308c\u305f\u6570\u5024\u30923\u500d\u306b\u3057\u3001Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u540c\u671f\u51e6\u7406`dump`\u3067\u3001\u6e21\u3055\u308c\u305f\u6570\u5024\u3092\u30ed\u30b0\u306b\u8868\u793a\u3057\u3001\u305d\u306e\u307e\u307e\u305d\u306e\u6570\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u3053\u306e2\u3064\u306e\u95a2\u6570\u304c\u6df7\u3056\u3063\u305f\u51e6\u7406\u3092\u898b\u3066\u307f\u307e\u3059\u3002\n\n```treble.js\n// \u975e\u540c\u671f\u51e6\u7406: 3\u500d\u306b\u3059\u308b\nconst treble = function(number) {\n  return new Promise(function(resolve) {\n    resolve(number * 3);\n  });\n};\n\n// \u540c\u671f\u51e6\u7406: \u30ed\u30b0\u306b\u8868\u793a\u3059\u308b\nconst dump = function(number) {\n  console.log(number);\n  return number;\n};\n\ntreble(10) // 10 * 3 -> 30\n  .then(treble) // 30 * 3 -> 90\n  .then(dump)\n  .then(treble) // 90 * 3 -> 270\n  .then(dump);\n```\n\n\u5b9f\u884c\u7d50\u679c\u3002\n\n```\u5b9f\u884c\u7d50\u679c\n$ node treble.js\n90\n270\n```\n\n`dump`\u306e\u3088\u3046\u306b\u3001onFulfilled\u30cf\u30f3\u30c9\u30e9\u5185\u3067Promise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u4ee5\u5916\u304c\u8fd4\u3055\u308c\u305f\u5834\u5408\u3001\u65b0\u3057\u304fPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4f5c\u6210\u3055\u308c\u3001\u8fd4\u3057\u305f\u5024\u3067\u3059\u3050\u306bresolve\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u4ed5\u7d44\u307f\u306e\u304a\u304b\u3052\u3067\u3001Promise\u3092\u7528\u3044\u3066\u540c\u671f\u51e6\u7406\u3068\u975e\u540c\u671f\u51e6\u7406\u3092\u6df7\u305c\u3066\u8a18\u8f09\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n### \u4e26\u5217\u51e6\u7406\n\u975e\u540c\u671f\u51e6\u7406\u3092\u6271\u3046\u6642\u306b\u30011\u3064\u305a\u3064\u9806\u756a\u306b\u6271\u3046\u306e\u3067\u306f\u306a\u304f\u3001\u8907\u6570\u306e\u51e6\u7406\u3092\u4e26\u5217\u306b\u8d70\u3089\u305b\u305f\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u306e\u5834\u5408\u306f`promise.all`\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```promise_all.js\nconsole.log('start');\n\nfunction puts(str) {\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve(str);\n    }, 1000);\n  });\n}\n\n\nvar promises = [\n  puts(1),\n  puts(2),\n  puts(3)\n];\n\n// \u4e26\u5217\u51e6\u7406\u306b\u5bfe\u3057\u3066Promise.all\u3092\u4f7f\u3046\nPromise.all(promises).then(function(results) {\n  console.log(results);\n});\n\nconsole.log('end');\n```\n\n\u5b9f\u884c\u7d50\u679c\u3002\n\n```\u5b9f\u884c\u7d50\u679c\n$ time node promise_all.js\nstart\nend\n[ 1, 2, 3 ]\n\nnode promise_all.js  0.12s user 0.07s system 15% cpu 1.196 total\n```\n\n\u4e26\u5217\u51e6\u7406\u306a\u306e\u3067\u7d041\u79d2\u3067\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n\n## Generator\n\u76f4\u5217\u51e6\u7406\u3092\u8a18\u8ff0\u3059\u308b\u306e\u306bGenerator\u3092\u4f7f\u3044\u307e\u3059(\u4e26\u5217\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059)\u3002\n\nGenerator\u306f\u4efb\u610f\u306e\u6642\u70b9\u3067\u51e6\u7406\u3092\u6b62\u3081\u3066\u305d\u3053\u304b\u3089\u518d\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u975e\u540c\u671f\u306e\u51e6\u7406\u3092\u3044\u3063\u305f\u3093\u6b62\u3081\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u7d42\u4e86\u3057\u305f\u3089\u518d\u958b\u3059\u308b\u3068\u3044\u3046\u51e6\u7406\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u76f4\u5217\u51e6\u7406\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n\n### \u76f4\u5217\u51e6\u7406\n\u76f4\u5217\u51e6\u7406\u306f\u8272\u3005\u306a\u66f8\u304d\u65b9\u304c\u3042\u308b\u306e\u3067\u3059\u3051\u3069\u3001Generator\u3068[co](https://github.com/tj/co)\u3092\u4f7f\u3063\u305f\u3084\u308a\u65b9\u304c\u3059\u3063\u304d\u308a\u3068\u66f8\u3051\u308b\u306e\u3067\u3001\u4eca\u56de\u306f\u305d\u306e\u3084\u308a\u65b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n```generator.js\n// co \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\n// $ npm install co\nconsole.log('start');\n\nfunction puts(str) {\n  return new Promise(function(resolve) {\n    setTimeout(function() {\n      resolve(str);\n    }, 1000);\n  });\n}\n\nconst co = require('co')\nco(function* () {\n  const res1 = yield puts('1');\n  console.log(res1);\n\n  const res2 = yield puts('2');\n  console.log(res2);\n\n  const res3 = yield puts('3');\n  console.log(res3);\n});\n\nconsole.log('end');\n```\n\n\u5b9f\u884c\u7d50\u679c\u3002\n\n```\u5b9f\u884c\u7d50\u679c\ntime node generator.js\nstart\nend\n1\n2\n3\n\nnode generator.js  0.12s user 0.07s system 5% cpu 3.227 total\n```\n\n`yield`\u306bPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3057\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u6b21\u306e\u51e6\u7406\u306b\u9032\u307f\u307e\u3059\u3002\n\u76f4\u5217\u3067\u51e6\u7406\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u9806\u756a\u901a\u308a\u306b\u5b9f\u884c\u3055\u308c\u3001\u7d043\u79d2\u3067\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u307e\u3068\u3081\n* \u975e\u540c\u671f\u51e6\u7406\u3068\u306f\u300c\u3042\u308b\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u305f\u3068\u304d\u3001\u623b\u308a\u5024\u3068\u3057\u3066\u672c\u6765\u6e21\u3057\u305f\u3044\u7d50\u679c\u3092\u8fd4\u3059\u306e\u3067\u306f\u306a\u304f\u3001\u4e00\u5ea6\u95a2\u6570\u3068\u3057\u3066\u306f\u7d42\u4e86\u3057\uff08\uff1d\u547c\u3073\u51fa\u3057\u5143\u306b\u623b\u308b\uff09\u3001\u5f8c\u3067\u300e\u672c\u6765\u6e21\u3057\u305f\u304b\u3063\u305f\u5024\u300f\u3092\u8fd4\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u3001\u547c\u3073\u51fa\u3057\u5143\u306b\u305d\u306e\u5024\u3092\u901a\u77e5\u3059\u308b\u300d\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3002\n* Node.js\u3067\u306fI/O\u51e6\u7406\u3092\u975e\u540c\u671f\u306b\u3059\u308b\u3053\u3068\u3067\u3001I/O\u5f85\u3061\u3092\u9632\u304e\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u5411\u4e0a\u3055\u305b\u3066\u3044\u308b\u3002\n* JavaScript\u3067\u306e\u975e\u540c\u671f\u51e6\u7406\u3092\u884c\u3046\u969b\u306f\u3001\u4e0b\u8a18\u65b9\u91dd\u304c\u826f\u3055\u305d\u3046\u3002\n\t1. \u57fa\u672c\u306f\u5168\u3066Promise\u3067\u304f\u308b\u3080\u3002\n\t2. \u4e26\u5217\u51e6\u7406\u306fPromise.all\u3067\u307e\u3068\u3081\u3066\u51e6\u7406\u3067\u304d\u308b\u3002\n\t3. \u76f4\u5217\u51e6\u7406\u306fPromise\u3092\u3055\u3089\u306bGenerator\u3068co\u3067\u5305\u3080\u3068\u3001\u3059\u3063\u304d\u308a\u66f8\u3051\u308b\u3002\n* Promise\u306f\u300c\u975e\u540c\u671f\u7684\u306b\u52d5\u4f5c\u3059\u308b\u95a2\u6570\u306f\u3001\u672c\u6765\u8fd4\u3057\u305f\u3044\u623b\u308a\u5024\u306e\u4ee3\u308f\u308a\u306b\u300e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u300f\u3068\u3044\u3046\u7279\u5225\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3057\u3066\u304a\u304d\u3001(\u672c\u6765\u8fd4\u3057\u305f\u3044)\u5024\u3092\u6e21\u305b\u308b\u72b6\u614b\u306b\u306a\u3063\u305f\u3089\u3001\u305d\u306e\u30d7\u30ed\u30df\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u901a\u3057\u3066\u547c\u3073\u51fa\u3057\u5143\u306b\u5024\u3092\u6e21\u3059\u300d\u3068\u3044\u3046\u51e6\u7406\u3092\u884c\u3046\u3053\u3068\u3067\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u73fe\u3055\u305b\u3066\u3044\u308b\u3002\n* Generator\u306f\u4efb\u610f\u306e\u6642\u70b9\u3067\u51e6\u7406\u3092\u6b62\u3081\u3066\u305d\u3053\u304b\u3089\u518d\u958b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u975e\u540c\u671f\u306e\u51e6\u7406\u3092\u3044\u3063\u305f\u3093\u6b62\u3081\u3066\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u7d42\u4e86\u3057\u305f\u3089\u518d\u958b\u3059\u308b\u3068\u3044\u3046\u51e6\u7406\u3092\u3059\u308b\u3053\u3068\u3067\u3001\u76f4\u5217\u51e6\u7406\u3092\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\n## \u53c2\u8003\n* [Understanding node.js](http://debuggable.com/posts/understanding-node-js:4bd98440-45e4-4a9a-8ef7-0f7ecbdd56cb)\n* [\u975e\u540c\u671f\u51e6\u7406\u3068Promise\uff08Deferred\uff09\u3092\u80cc\u666f\u304b\u3089\u7406\u89e3\u3057\u3088\u3046](https://www.htmlhifive.com/conts/web/view/study-room/async-programming-with-deferred)\n* [[Node.js] \u975e\u540c\u671f\u578b\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u3068\u306f \u301c JS\u304a\u304f\u306e\u307b\u305d\u9053 #001](http://qiita.com/hosomichi/items/16597eaabb1226975c51)\n* [generator\u3068JavaScript\u306e\u975e\u540c\u671f\u51e6\u7406](http://qiita.com/hitsujiwool/items/316f3e8a41fb7dc3a119)\n* [\u6700\u8fd1\u306ejs\u975e\u540c\u671f\u51e6\u7406 Promise\u3068Generator\u306e\u5171\u5b58](http://qiita.com/hitsujiwool/items/316f3e8a41fb7dc3a119)\n* [JavaScript Promise\u306e\u672c](http://azu.github.io/promises-book/)\n* [Promise\u3067\u7c21\u5358\uff01JavaScript\u975e\u540c\u671f\u51e6\u7406\u5165\u9580](https://html5experts.jp/takazudo/17107/)\n", "tags": ["Node.js", "JavaScript", "\u975e\u540c\u671f\u51e6\u7406"]}