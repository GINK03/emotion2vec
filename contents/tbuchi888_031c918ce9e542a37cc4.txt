{"tags": ["Ansible", "ansible-playbook"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u672c\u8a18\u4e8b\u306f\u3001Ansible\u306eplaybook\u3067with_items\u7b49\u3067\u30eb\u30fc\u30d7\u51e6\u7406\u3057\u305f\u6642\u306e\u5b9f\u884c\u7d50\u679c\u3092register\u3057\u305f\u5f8c\u306b\u3001debug\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5229\u7528\u3057\u3066\u3001\u6a19\u6e96\u51fa\u529b\u7d50\u679c\u3092\u30eb\u30fc\u30d7\u6570\u5206\u53d6\u308a\u51fa\u3059\u65b9\u6cd5\u3092\u8a66\u884c\u932f\u8aa4\u3057\u305f\u7d50\u679c\u3067\u3059\u3002\u30eb\u30fc\u30d7\u3057\u306a\u3051\u308c\u3070\u7c21\u5358\u306a\u306e\u3067\u3059\u304c\u3001\u5730\u5473\u306b\u306f\u307e\u308a\u307e\u3057\u305f\u3002\n\u306a\u304a\u3001\u30c7\u30d0\u30c3\u30b0\u30aa\u30d7\u30b7\u30e7\u30f3(-v)\u3092\u3064\u3051\u3066playbook\u3092\u5b9f\u884c\u3059\u308c\u3070\u3001register\u3068debug\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3053\u3093\u306a\u3053\u3068\u3092\u3057\u306a\u304f\u3066\u3082\u753b\u9762\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u304c\u3001\u6539\u884c\u3055\u308c\u305a\u898b\u3065\u3089\u3044\u7b49\u3082\u3042\u308b\u306e\u3067\u3001\u81ea\u5206\u7528\u306e\u5099\u5fd8\u30e1\u30e2\u3082\u304b\u306d\u3066\u3002\n\n\u30a2\u30b8\u30a7\u30f3\u30c0\nENV. \u5b9f\u884c\u74b0\u5883\nSample Playbook \u30b5\u30f3\u30d7\u30eb\u30d7\u30ec\u30a4\u30d6\u30c3\u30af\nResults \u30b5\u30f3\u30d7\u30eb\u30d7\u30ec\u30a4\u30d6\u30c3\u30af\u5b9f\u884c\u7d50\u679c\n\u89e3\u8aac\n\nEnv.\n# cat /etc/redhat-release\nCentOS release 6.7 (Final)\n#ansible --version\nansible 2.1.0 (devel d358a22542) last updated 2016/04/04 23:43:05 (GMT +900)\n  lib/ansible/modules/core: (detached HEAD a38bdfc720) last updated 2016/04/04 23:43:15 (GMT +900)\n  lib/ansible/modules/extras: (detached HEAD 7c3999a92a) last updated 2016/04/04 23:43:22 (GMT +900)\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = Default w/o overrides\n\n\nSample playbook\n\nreg_ret_with_items.yml\n- hosts: localhost\n  gather_facts: no\n  vars:\n    TEST_CMD:\n      - cmd: echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n      - cmd: echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n      - cmd: echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n\n  tasks:\n   - raw: echo \"# NOLOOP *** THIS IS NOLOOP STDOUT ***\"\n     register: RESULT\n   - name: \"DEBUG0: Output RESULT.stdout_lines\"\n     debug: var=RESULT.stdout_lines\n\n   - raw:  \"{{ item.cmd }}\"\n     register: CMD_RESULT\n     with_items: '{{ TEST_CMD }}'\n\n   - name: \"DEBUG1: Output CMD_RESULT.stdout_lines\"\n     debug: var=CMD_RESULT.stdout_lines\n\n   - name: \"DEBUG2: Output CMD_RESULT.results\"\n     debug: var=CMD_RESULT.results\n\n   - name: \"DEBUG3: Output CMD_RESULT.results.stdout_lines by using with_items loop\"\n     debug: var=item.stdout_lines\n     with_items: '{{ CMD_RESULT.results }}'\n\n   - name: \"DEBUG4: Output CMD_RESULT.results.stdout_lines by using jinjya2 fileter\"\n     debug:\n      msg: |\n        {% for r in CMD_RESULT.results %}\n          {{ r.stdout_lines | to_nice_json }}\n        {% endfor %}\n\n\n\nResults\n# ansible-playbook reg_ret_with_items.yml\n\nPLAY [localhost] ***************************************************************\n\nTASK [raw] *********************************************************************\nok: [localhost]\n\nTASK [DEBUG0: Output RESULT.stdout_lines] **************************************\nok: [localhost] => {\n    \"RESULT.stdout_lines\": [\n        \"# NOLOOP *** THIS IS NOLOOP STDOUT ***\"\n    ]\n}\n\nTASK [raw] *********************************************************************\nok: [localhost] => (item={u'cmd': u'echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"'})\nok: [localhost] => (item={u'cmd': u'echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"'})\nok: [localhost] => (item={u'cmd': u'echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"'})\n\nTASK [DEBUG1: Output CMD_RESULT.stdout_lines] **********************************\nok: [localhost] => {\n    \"CMD_RESULT.stdout_lines\": \"VARIABLE IS NOT DEFINED!\"\n}\n\nTASK [DEBUG2: Output CMD_RESULT.results] ***************************************\nok: [localhost] => {\n    \"CMD_RESULT.results\": [\n        {\n            \"_ansible_item_result\": true,\n            \"_ansible_no_log\": false,\n            \"invocation\": {\n                \"module_args\": {\n                    \"_raw_params\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n                },\n                \"module_name\": \"raw\"\n            },\n            \"item\": {\n                \"cmd\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n            },\n            \"rc\": 0,\n            \"stderr\": \"\",\n            \"stdout\": \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\n\",\n            \"stdout_lines\": [\n                \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n            ]\n        },\n        {\n            \"_ansible_item_result\": true,\n            \"_ansible_no_log\": false,\n            \"invocation\": {\n                \"module_args\": {\n                    \"_raw_params\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n                },\n                \"module_name\": \"raw\"\n            },\n            \"item\": {\n                \"cmd\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n            },\n            \"rc\": 0,\n            \"stderr\": \"\",\n            \"stdout\": \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\n\",\n            \"stdout_lines\": [\n                \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n            ]\n        },\n        {\n            \"_ansible_item_result\": true,\n            \"_ansible_no_log\": false,\n            \"invocation\": {\n                \"module_args\": {\n                    \"_raw_params\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n                },\n                \"module_name\": \"raw\"\n            },\n            \"item\": {\n                \"cmd\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n            },\n            \"rc\": 0,\n            \"stderr\": \"\",\n            \"stdout\": \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\n\",\n            \"stdout_lines\": [\n                \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n            ]\n        }\n    ]\n}\n\nTASK [DEBUG3: Output CMD_RESULT.results.stdout_lines by using with_items loop] *\nok: [localhost] => (item={'_ansible_no_log': False, 'stdout': u'# LOOP01 *** THIS IS LOOP01 STDOUT ***\\n', '_ansible_item_result': True, 'item': {u'cmd': u'echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"'}, 'stderr': u'', 'rc': 0, 'invocation': {'module_name': u'raw', 'module_args': {u'_raw_params': u'echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"'}}, 'stdout_lines': [u'# LOOP01 *** THIS IS LOOP01 STDOUT ***']}) => {\n    \"item\": {\n        \"invocation\": {\n            \"module_args\": {\n                \"_raw_params\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n            },\n            \"module_name\": \"raw\"\n        },\n        \"item\": {\n            \"cmd\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n        },\n        \"rc\": 0,\n        \"stderr\": \"\",\n        \"stdout\": \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\n\",\n        \"stdout_lines\": [\n            \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n        ]\n    },\n    \"item.stdout_lines\": [\n        \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n    ]\n}\nok: [localhost] => (item={'_ansible_no_log': False, 'stdout': u'# LOOP02 *** THIS IS LOOP02 STDOUT ***\\n', '_ansible_item_result': True, 'item': {u'cmd': u'echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"'}, 'stderr': u'', 'rc': 0, 'invocation': {'module_name': u'raw', 'module_args': {u'_raw_params': u'echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"'}}, 'stdout_lines': [u'# LOOP02 *** THIS IS LOOP02 STDOUT ***']}) => {\n    \"item\": {\n        \"invocation\": {\n            \"module_args\": {\n                \"_raw_params\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n            },\n            \"module_name\": \"raw\"\n        },\n        \"item\": {\n            \"cmd\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n        },\n        \"rc\": 0,\n        \"stderr\": \"\",\n        \"stdout\": \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\n\",\n        \"stdout_lines\": [\n            \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n        ]\n    },\n    \"item.stdout_lines\": [\n        \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n    ]\n}\nok: [localhost] => (item={'_ansible_no_log': False, 'stdout': u'# LOOP03 *** THIS IS LOOP03 STDOUT ***\\n', '_ansible_item_result': True, 'item': {u'cmd': u'echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"'}, 'stderr': u'', 'rc': 0, 'invocation': {'module_name': u'raw', 'module_args': {u'_raw_params': u'echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"'}}, 'stdout_lines': [u'# LOOP03 *** THIS IS LOOP03 STDOUT ***']}) => {\n    \"item\": {\n        \"invocation\": {\n            \"module_args\": {\n                \"_raw_params\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n            },\n            \"module_name\": \"raw\"\n        },\n        \"item\": {\n            \"cmd\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n        },\n        \"rc\": 0,\n        \"stderr\": \"\",\n        \"stdout\": \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\n\",\n        \"stdout_lines\": [\n            \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n        ]\n    },\n    \"item.stdout_lines\": [\n        \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n    ]\n}\n\nTASK [DEBUG4: Output CMD_RESULT.results.stdout_lines by using jinjya2 fileter] *\nok: [localhost] => {\n    \"msg\": \"  [\\n    \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\\n]\\n  [\\n    \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\\n]\\n  [\\n    \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\\n]\\n\"\n}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=7    changed=0    unreachable=0    failed=0\n\n#\n\n\n\u89e3\u8aac\n\n\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u306a\u3044\u5834\u5408\n\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u306a\u3044\u5834\u5408\u3001DEBUG0\u306e\u3088\u3046\u306b\u6a19\u6e96\u51fa\u529b\u306e\u7d50\u679c\u3092\u753b\u9762\u8868\u793a\u3067\u304d\u307e\u3059\u304c\u3001\nwith_items\u7b49\u3067\u30eb\u30fc\u30d7\u51e6\u7406\u3092\u3057\u305f\u5834\u5408\u306f\u3001\u5c11\u3057\u5de5\u592b\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u3042\u308b\u5834\u5408\n\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u3042\u308b\u5834\u5408\u3001register\u3057\u305f\u7d50\u679c\u306f\u3001\u5909\u6570\u540d.results\u306e\u4e0b\u306b\u914d\u5217\u3068\u3057\u3066\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u306a\u3044\u6642\u3068\u540c\u3058\u3088\u3046\u306b\u3057\u3066\u3082\u3046\u307e\u304f\u3044\u304d\u307e\u305b\u3093\u3002\n\n\nDEBUG1\u3067\u306f\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u7121\u3044\u3068\u304d\u3068\u540c\u3058\u3088\u3046\u306b\u66f8\u3044\u3066\u3044\u308b\u305f\u3081\u3001\"VARIABLE IS NOT DEFINED!\"\u3068\u3057\u3066\u51fa\u529b\u306b\u5931\u6557\u3057\u305f\u4f8b\u3067\u3059\u3002\n\nDEBUG2\u3067\u306f\u3001\u5909\u6570\u540d.results\u306e\u914d\u5217\u3092\u307e\u308b\u3054\u3068\u51fa\u529b\u3057\u305f\u4f8b\u3067\u3059\u3002\n\nDEBUG3\u3067\u306f\u3001\u5909\u6570\u540d.results.stdout_lines\u3092with_itmes\u3068\u3057\u3066\u5909\u6570\u540d.results\u3092\u6307\u5b9a\u3057\u305f\u4f8b\u3067\u3059\u3002item\u306e\u4e2d\u8eab\u3082\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u5c11\u3057\u898b\u305a\u3089\u3044\u3067\u3059\u3002\n\nDEBUG4\u3067\u306f\u3001\u5909\u6570\u540d.results.stdout_lines\u3092jinjya2 filter\u3092\u4f7f\u3063\u3066stdout_lines\u306e\u307f\u3092\u51fa\u529b\u3057\u305f\u4f8b\u3067\u3059\u304c\u3001jinjya2 filter\u306e\u7406\u89e3\u4e0d\u8db3\u306e\u305f\u3081\u304b\u6539\u884c\u51e6\u7406\u304c\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u3002\u3002\n\n\n\u304a\u308f\u308a\u306b\n\u3082\u3063\u3068\u4e0a\u624b\u3044\u66f8\u304d\u65b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u3093\u306a\u98a8\u306b\u3059\u308c\u3070\u826f\u3044\u7b49\u3001\u3042\u308a\u307e\u3057\u305f\u3089\u662f\u975e\u30b3\u30e1\u30f3\u30c8\u9802\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n# \u306f\u3058\u3081\u306b\n\u672c\u8a18\u4e8b\u306f\u3001Ansible\u306eplaybook\u3067`with_items`\u7b49\u3067\u30eb\u30fc\u30d7\u51e6\u7406\u3057\u305f\u6642\u306e\u5b9f\u884c\u7d50\u679c\u3092`register`\u3057\u305f\u5f8c\u306b\u3001`debug`\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5229\u7528\u3057\u3066\u3001\u6a19\u6e96\u51fa\u529b\u7d50\u679c\u3092\u30eb\u30fc\u30d7\u6570\u5206\u53d6\u308a\u51fa\u3059\u65b9\u6cd5\u3092\u8a66\u884c\u932f\u8aa4\u3057\u305f\u7d50\u679c\u3067\u3059\u3002\u30eb\u30fc\u30d7\u3057\u306a\u3051\u308c\u3070\u7c21\u5358\u306a\u306e\u3067\u3059\u304c\u3001\u5730\u5473\u306b\u306f\u307e\u308a\u307e\u3057\u305f\u3002\n\u306a\u304a\u3001\u30c7\u30d0\u30c3\u30b0\u30aa\u30d7\u30b7\u30e7\u30f3(-v)\u3092\u3064\u3051\u3066playbook\u3092\u5b9f\u884c\u3059\u308c\u3070\u3001`register`\u3068`debug`\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3053\u3093\u306a\u3053\u3068\u3092\u3057\u306a\u304f\u3066\u3082\u753b\u9762\u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u304c\u3001\u6539\u884c\u3055\u308c\u305a\u898b\u3065\u3089\u3044\u7b49\u3082\u3042\u308b\u306e\u3067\u3001\u81ea\u5206\u7528\u306e\u5099\u5fd8\u30e1\u30e2\u3082\u304b\u306d\u3066\u3002\n\n## \u30a2\u30b8\u30a7\u30f3\u30c0\nENV. \u5b9f\u884c\u74b0\u5883\nSample Playbook \u30b5\u30f3\u30d7\u30eb\u30d7\u30ec\u30a4\u30d6\u30c3\u30af\nResults \u30b5\u30f3\u30d7\u30eb\u30d7\u30ec\u30a4\u30d6\u30c3\u30af\u5b9f\u884c\u7d50\u679c\n\u89e3\u8aac\n\n## Env.\n```\n# cat /etc/redhat-release\nCentOS release 6.7 (Final)\n#ansible --version\nansible 2.1.0 (devel d358a22542) last updated 2016/04/04 23:43:05 (GMT +900)\n  lib/ansible/modules/core: (detached HEAD a38bdfc720) last updated 2016/04/04 23:43:15 (GMT +900)\n  lib/ansible/modules/extras: (detached HEAD 7c3999a92a) last updated 2016/04/04 23:43:22 (GMT +900)\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = Default w/o overrides\n```\n\n## Sample playbook\n\n``` reg_ret_with_items.yml\n- hosts: localhost\n  gather_facts: no\n  vars:\n    TEST_CMD:\n      - cmd: echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n      - cmd: echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n      - cmd: echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n\n  tasks:\n   - raw: echo \"# NOLOOP *** THIS IS NOLOOP STDOUT ***\"\n     register: RESULT\n   - name: \"DEBUG0: Output RESULT.stdout_lines\"\n     debug: var=RESULT.stdout_lines\n\n   - raw:  \"{{ item.cmd }}\"\n     register: CMD_RESULT\n     with_items: '{{ TEST_CMD }}'\n\n   - name: \"DEBUG1: Output CMD_RESULT.stdout_lines\"\n     debug: var=CMD_RESULT.stdout_lines\n\n   - name: \"DEBUG2: Output CMD_RESULT.results\"\n     debug: var=CMD_RESULT.results\n\n   - name: \"DEBUG3: Output CMD_RESULT.results.stdout_lines by using with_items loop\"\n     debug: var=item.stdout_lines\n     with_items: '{{ CMD_RESULT.results }}'\n\n   - name: \"DEBUG4: Output CMD_RESULT.results.stdout_lines by using jinjya2 fileter\"\n     debug:\n      msg: |\n        {% for r in CMD_RESULT.results %}\n          {{ r.stdout_lines | to_nice_json }}\n        {% endfor %}\n```\n\n## Results\n\n```\n# ansible-playbook reg_ret_with_items.yml\n\nPLAY [localhost] ***************************************************************\n\nTASK [raw] *********************************************************************\nok: [localhost]\n\nTASK [DEBUG0: Output RESULT.stdout_lines] **************************************\nok: [localhost] => {\n    \"RESULT.stdout_lines\": [\n        \"# NOLOOP *** THIS IS NOLOOP STDOUT ***\"\n    ]\n}\n\nTASK [raw] *********************************************************************\nok: [localhost] => (item={u'cmd': u'echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"'})\nok: [localhost] => (item={u'cmd': u'echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"'})\nok: [localhost] => (item={u'cmd': u'echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"'})\n\nTASK [DEBUG1: Output CMD_RESULT.stdout_lines] **********************************\nok: [localhost] => {\n    \"CMD_RESULT.stdout_lines\": \"VARIABLE IS NOT DEFINED!\"\n}\n\nTASK [DEBUG2: Output CMD_RESULT.results] ***************************************\nok: [localhost] => {\n    \"CMD_RESULT.results\": [\n        {\n            \"_ansible_item_result\": true,\n            \"_ansible_no_log\": false,\n            \"invocation\": {\n                \"module_args\": {\n                    \"_raw_params\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n                },\n                \"module_name\": \"raw\"\n            },\n            \"item\": {\n                \"cmd\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n            },\n            \"rc\": 0,\n            \"stderr\": \"\",\n            \"stdout\": \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\n\",\n            \"stdout_lines\": [\n                \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n            ]\n        },\n        {\n            \"_ansible_item_result\": true,\n            \"_ansible_no_log\": false,\n            \"invocation\": {\n                \"module_args\": {\n                    \"_raw_params\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n                },\n                \"module_name\": \"raw\"\n            },\n            \"item\": {\n                \"cmd\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n            },\n            \"rc\": 0,\n            \"stderr\": \"\",\n            \"stdout\": \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\n\",\n            \"stdout_lines\": [\n                \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n            ]\n        },\n        {\n            \"_ansible_item_result\": true,\n            \"_ansible_no_log\": false,\n            \"invocation\": {\n                \"module_args\": {\n                    \"_raw_params\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n                },\n                \"module_name\": \"raw\"\n            },\n            \"item\": {\n                \"cmd\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n            },\n            \"rc\": 0,\n            \"stderr\": \"\",\n            \"stdout\": \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\n\",\n            \"stdout_lines\": [\n                \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n            ]\n        }\n    ]\n}\n\nTASK [DEBUG3: Output CMD_RESULT.results.stdout_lines by using with_items loop] *\nok: [localhost] => (item={'_ansible_no_log': False, 'stdout': u'# LOOP01 *** THIS IS LOOP01 STDOUT ***\\n', '_ansible_item_result': True, 'item': {u'cmd': u'echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"'}, 'stderr': u'', 'rc': 0, 'invocation': {'module_name': u'raw', 'module_args': {u'_raw_params': u'echo \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"'}}, 'stdout_lines': [u'# LOOP01 *** THIS IS LOOP01 STDOUT ***']}) => {\n    \"item\": {\n        \"invocation\": {\n            \"module_args\": {\n                \"_raw_params\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n            },\n            \"module_name\": \"raw\"\n        },\n        \"item\": {\n            \"cmd\": \"echo \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\"\n        },\n        \"rc\": 0,\n        \"stderr\": \"\",\n        \"stdout\": \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\n\",\n        \"stdout_lines\": [\n            \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n        ]\n    },\n    \"item.stdout_lines\": [\n        \"# LOOP01 *** THIS IS LOOP01 STDOUT ***\"\n    ]\n}\nok: [localhost] => (item={'_ansible_no_log': False, 'stdout': u'# LOOP02 *** THIS IS LOOP02 STDOUT ***\\n', '_ansible_item_result': True, 'item': {u'cmd': u'echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"'}, 'stderr': u'', 'rc': 0, 'invocation': {'module_name': u'raw', 'module_args': {u'_raw_params': u'echo \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"'}}, 'stdout_lines': [u'# LOOP02 *** THIS IS LOOP02 STDOUT ***']}) => {\n    \"item\": {\n        \"invocation\": {\n            \"module_args\": {\n                \"_raw_params\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n            },\n            \"module_name\": \"raw\"\n        },\n        \"item\": {\n            \"cmd\": \"echo \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\"\n        },\n        \"rc\": 0,\n        \"stderr\": \"\",\n        \"stdout\": \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\n\",\n        \"stdout_lines\": [\n            \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n        ]\n    },\n    \"item.stdout_lines\": [\n        \"# LOOP02 *** THIS IS LOOP02 STDOUT ***\"\n    ]\n}\nok: [localhost] => (item={'_ansible_no_log': False, 'stdout': u'# LOOP03 *** THIS IS LOOP03 STDOUT ***\\n', '_ansible_item_result': True, 'item': {u'cmd': u'echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"'}, 'stderr': u'', 'rc': 0, 'invocation': {'module_name': u'raw', 'module_args': {u'_raw_params': u'echo \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"'}}, 'stdout_lines': [u'# LOOP03 *** THIS IS LOOP03 STDOUT ***']}) => {\n    \"item\": {\n        \"invocation\": {\n            \"module_args\": {\n                \"_raw_params\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n            },\n            \"module_name\": \"raw\"\n        },\n        \"item\": {\n            \"cmd\": \"echo \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\"\n        },\n        \"rc\": 0,\n        \"stderr\": \"\",\n        \"stdout\": \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\n\",\n        \"stdout_lines\": [\n            \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n        ]\n    },\n    \"item.stdout_lines\": [\n        \"# LOOP03 *** THIS IS LOOP03 STDOUT ***\"\n    ]\n}\n\nTASK [DEBUG4: Output CMD_RESULT.results.stdout_lines by using jinjya2 fileter] *\nok: [localhost] => {\n    \"msg\": \"  [\\n    \\\"# LOOP01 *** THIS IS LOOP01 STDOUT ***\\\"\\n]\\n  [\\n    \\\"# LOOP02 *** THIS IS LOOP02 STDOUT ***\\\"\\n]\\n  [\\n    \\\"# LOOP03 *** THIS IS LOOP03 STDOUT ***\\\"\\n]\\n\"\n}\n\nPLAY RECAP *********************************************************************\nlocalhost                  : ok=7    changed=0    unreachable=0    failed=0\n\n#\n```\n\n## \u89e3\u8aac\n### \u30eb\u30fc\u30d7\u51e6\u7406\u304c\u306a\u3044\u5834\u5408\n\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u306a\u3044\u5834\u5408\u3001*DEBUG0*\u306e\u3088\u3046\u306b\u6a19\u6e96\u51fa\u529b\u306e\u7d50\u679c\u3092\u753b\u9762\u8868\u793a\u3067\u304d\u307e\u3059\u304c\u3001\n`with_items`\u7b49\u3067\u30eb\u30fc\u30d7\u51e6\u7406\u3092\u3057\u305f\u5834\u5408\u306f\u3001\u5c11\u3057\u5de5\u592b\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n### \u30eb\u30fc\u30d7\u51e6\u7406\u304c\u3042\u308b\u5834\u5408\n\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u3042\u308b\u5834\u5408\u3001`register`\u3057\u305f\u7d50\u679c\u306f\u3001`\u5909\u6570\u540d.results`\u306e\u4e0b\u306b\u914d\u5217\u3068\u3057\u3066\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u306a\u3044\u6642\u3068\u540c\u3058\u3088\u3046\u306b\u3057\u3066\u3082\u3046\u307e\u304f\u3044\u304d\u307e\u305b\u3093\u3002\n\n+ *DEBUG1*\u3067\u306f\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u304c\u7121\u3044\u3068\u304d\u3068\u540c\u3058\u3088\u3046\u306b\u66f8\u3044\u3066\u3044\u308b\u305f\u3081\u3001\"VARIABLE IS NOT DEFINED!\"\u3068\u3057\u3066\u51fa\u529b\u306b\u5931\u6557\u3057\u305f\u4f8b\u3067\u3059\u3002\n+ *DEBUG2*\u3067\u306f\u3001`\u5909\u6570\u540d.results`\u306e\u914d\u5217\u3092\u307e\u308b\u3054\u3068\u51fa\u529b\u3057\u305f\u4f8b\u3067\u3059\u3002\n+ *DEBUG3*\u3067\u306f\u3001`\u5909\u6570\u540d.results.stdout_lines`\u3092`with_itmes`\u3068\u3057\u3066`\u5909\u6570\u540d.results`\u3092\u6307\u5b9a\u3057\u305f\u4f8b\u3067\u3059\u3002`item`\u306e\u4e2d\u8eab\u3082\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u5c11\u3057\u898b\u305a\u3089\u3044\u3067\u3059\u3002\n+ *DEBUG4*\u3067\u306f\u3001`\u5909\u6570\u540d.results.stdout_lines`\u3092jinjya2 filter\u3092\u4f7f\u3063\u3066stdout_lines\u306e\u307f\u3092\u51fa\u529b\u3057\u305f\u4f8b\u3067\u3059\u304c\u3001jinjya2 filter\u306e\u7406\u89e3\u4e0d\u8db3\u306e\u305f\u3081\u304b\u6539\u884c\u51e6\u7406\u304c\u3046\u307e\u304f\u3044\u3063\u3066\u3044\u307e\u305b\u3093\u3002\u3002\u3002\n\n## \u304a\u308f\u308a\u306b\n\u3082\u3063\u3068\u4e0a\u624b\u3044\u66f8\u304d\u65b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u3053\u3093\u306a\u98a8\u306b\u3059\u308c\u3070\u826f\u3044\u7b49\u3001\u3042\u308a\u307e\u3057\u305f\u3089\u662f\u975e\u30b3\u30e1\u30f3\u30c8\u9802\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n"}