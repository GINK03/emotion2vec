{"tags": ["MacOSX", "CoreFoundation", "C\u8a00\u8a9e", "macOSSierra"], "context": "\n\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304c\u30b9\u30ea\u30fc\u30d7\u3057\u305f\u72b6\u614b\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u89e3\u9664\u3059\u308b\u65b9\u6cd5\u304c\u306a\u3044\u304b\u8abf\u3079\u3066\u3044\u305f\u3089\u3001OSX \u306e\u30c4\u30fc\u30eb caffeinate(8) \u3092\u898b\u3064\u3051\u305f\u3002\n\ncaffeinate -u \u3068\u307b\u307c\u540c\u69d8\u306e\u3053\u3068\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308c\u3070\u3088\u3044\u307f\u305f\u3044\u3002\n\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3060\u3051\u3067\u306a\u304f\u30b7\u30b9\u30c6\u30e0\u3082\u30b9\u30ea\u30fc\u30d7\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u3001\u305f\u3060\u3057\u304f\u52d5\u304f\u304b\u3069\u3046\u304b\u306f\u5206\u304b\u3089\u306a\u3044\u3002\n\n#include <IOKit/pwr_mgt/IOPMLib.h>\n\n#ifndef kIOPMAssertionUserIsActive\n/* \u3053\u306e\u6587\u5b57\u5217\u5b9a\u6570\u306f IOMPLib.h \u306b\u306f\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u304c (\u4ed6\u306e\u5b9a\u6570 kIOPMAssertion* \u306f\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u306b)\u3001\n   caffeinate(8) \u306f\u3053\u306e\u5024\u3067 IOPMAssertionCreateWithDescription \u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3088\u3046\u3060\u3002*/\n#define kIOPMAssertionUserIsActive CFSTR(\"UserIsActive\")\n#endif\n\nvoid AwakeFromDisplaySleep()\n{\n    CFTimeInterval timeout = 5; /* magic number: caffeinate(8) \u306f -u \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6e21\u3055\u308c\u305f\u5834\u5408\u3053\u306e\u5024\u3092\u4f7f\u3046\u3088\u3046\u3060 */\n    IOPMAssertionID id = 0;\n    IOPMAssertionCreateWithDescription(\n        kIOPMAssertionUserIsActive,\n        CFSTR(\"TODO: name\"),                  /* \u9069\u5f53\u306b\u8a2d\u5b9a\u3059\u308b */\n        CFSTR(\"TODO: details\"),               /* \u9069\u5f53\u306b\u8a2d\u5b9a\u3059\u308b */\n        CFSTR(\"TODO: human readable reason\"), /* \u9069\u5f53\u306b\u8a2d\u5b9a\u3059\u308b */\n        CFSTR(\"/System/Library/CoreServices/powerd.bundle\"),\n        timeout,\n        kIOPMAssertionTimeoutActionRelease,\n        &id);\n}\n\n\n\u7de8\u96c6\u5c65\u6b74\n\nmacOS Sierra \u3067\u3082\u52d5\u3044\u305f\u306e\u3067\u8a18\u4e8b\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u5909\u66f4\u3057\u305f\u3002\n\n* \u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u304c\u30b9\u30ea\u30fc\u30d7\u3057\u305f\u72b6\u614b\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u89e3\u9664\u3059\u308b\u65b9\u6cd5\u304c\u306a\u3044\u304b\u8abf\u3079\u3066\u3044\u305f\u3089\u3001OSX \u306e\u30c4\u30fc\u30eb [caffeinate(8)](https://developer.apple.com/library/mac/documentation/Darwin/Reference/Manpages/man8/caffeinate.8.html) \u3092\u898b\u3064\u3051\u305f\u3002\n* ```caffeinate -u``` \u3068\u307b\u307c\u540c\u69d8\u306e\u3053\u3068\u3092\u5b9f\u73fe\u3059\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308c\u3070\u3088\u3044\u307f\u305f\u3044\u3002\n* \u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3060\u3051\u3067\u306a\u304f\u30b7\u30b9\u30c6\u30e0\u3082\u30b9\u30ea\u30fc\u30d7\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u3001\u305f\u3060\u3057\u304f\u52d5\u304f\u304b\u3069\u3046\u304b\u306f\u5206\u304b\u3089\u306a\u3044\u3002\n\n```c\n#include <IOKit/pwr_mgt/IOPMLib.h>\n\n#ifndef kIOPMAssertionUserIsActive\n/* \u3053\u306e\u6587\u5b57\u5217\u5b9a\u6570\u306f IOMPLib.h \u306b\u306f\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u304c (\u4ed6\u306e\u5b9a\u6570 kIOPMAssertion* \u306f\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u306e\u306b)\u3001\n   caffeinate(8) \u306f\u3053\u306e\u5024\u3067 IOPMAssertionCreateWithDescription \u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3088\u3046\u3060\u3002*/\n#define kIOPMAssertionUserIsActive CFSTR(\"UserIsActive\")\n#endif\n\nvoid AwakeFromDisplaySleep()\n{\n    CFTimeInterval timeout = 5; /* magic number: caffeinate(8) \u306f -u \u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u6e21\u3055\u308c\u305f\u5834\u5408\u3053\u306e\u5024\u3092\u4f7f\u3046\u3088\u3046\u3060 */\n    IOPMAssertionID id = 0;\n    IOPMAssertionCreateWithDescription(\n        kIOPMAssertionUserIsActive,\n        CFSTR(\"TODO: name\"),                  /* \u9069\u5f53\u306b\u8a2d\u5b9a\u3059\u308b */\n        CFSTR(\"TODO: details\"),               /* \u9069\u5f53\u306b\u8a2d\u5b9a\u3059\u308b */\n        CFSTR(\"TODO: human readable reason\"), /* \u9069\u5f53\u306b\u8a2d\u5b9a\u3059\u308b */\n        CFSTR(\"/System/Library/CoreServices/powerd.bundle\"),\n        timeout,\n        kIOPMAssertionTimeoutActionRelease,\n        &id);\n}\n```\n## \u7de8\u96c6\u5c65\u6b74\n* macOS Sierra \u3067\u3082\u52d5\u3044\u305f\u306e\u3067\u8a18\u4e8b\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u5909\u66f4\u3057\u305f\u3002\n"}