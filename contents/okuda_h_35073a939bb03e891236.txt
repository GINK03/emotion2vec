{"context": " More than 1 year has passed since last update.\u3053\u3061\u3089\u306e\u30e1\u30e2\u3067httpd\u3067ltsv\u3092\u8a2d\u5b9a\u3057\u305f\u306e\u3067td-agent\u3067\u53d6\u308a\u8fbc\u3080\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\nfluentd(td-agent)\u3092install\n\n\u53c2\u8003\nInstalling Fluentd Using rpm Package\n$ sudo yum update -y\n$ curl -L http://toolbelt.treasuredata.com/sh/install-redhat.sh | sh\n\n\nfluentd\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\n\n\u53c2\u8003\n(3) Re-use your config: the \u201cinclude\u201d directive\n\n/etc/td-agent/td-agent.conf\n# \u8ffd\u8a18\ninclude config.d/*.conf\n\n\n\n\n\u4ee5\u4e0b\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3066\u8a18\u8ff0\n\n/etc/td-agent/config.d/ltsvsample.conf\n# source\n<source>\n  type tail\n  format ltsv\n  time_key time\n  time_format %Y/%m/%d %H:%M:%S %z\n  path /var/log/httpd/access_log\n\u3000pos_file /var/log/td-agent/tmp/apache.access.log.pos\n  tag ltsv.sample\n</source>\n\n# match \n<match ltsv.sample>\n  type stdout\n</match>\n\n\n\nstdout\u30ed\u30b0\u3092\u958b\u3044\u3066\u78ba\u8a8d\u3057\u3066\u307f\u308b.\n\n/var/log/td-agent/td-agent.log\n2014-09-14 10:15:56 +0000 [info]: adding source type=\"http\"\n2014-09-14 10:15:56 +0000 [info]: adding source type=\"debug_agent\"\n2014-09-14 10:15:56 +0000 [info]: adding source type=\"tail\"\n2014-09-14 10:15:56 +0000 [warn]: 'pos_file PATH' parameter is not set to a 'tail' source.\n2014-09-14 10:15:56 +0000 [warn]: this parameter is highly recommended to save the position to resume tailing.\n2014-09-14 10:15:56 +0000 [info]: adding match pattern=\"apache\" type=\"file\"\n2014-09-14 10:15:56 +0000 [info]: adding match pattern=\"ltsv.sample\" type=\"stdout\"\n2014-09-14 10:15:56 +0000 [info]: listening fluent socket on 0.0.0.0:24224\n2014-09-14 10:15:56 +0000 [info]: listening dRuby uri=\"druby://127.0.0.1:24230\" object=\"Engine\"\n2014-09-14 10:15:56 +0000 [info]: following tail of /var/log/httpd/access_log\n2014-09-14 10:16:07 +0000 ltsv.sample: {\"domain\":\"xx.xx.xx.xx\",\"servername\":\"127.0.0.1\",\"host\":\"122.29.141.56\",\"server\":\"xxx.xx.xx.xxx\",\"ident\":\"-\",\"authuser\":\"-\",\"timestamp\":\"2014/09/14 10:16:07 +0000\",\"method\":\"GET\",\"reqpath\":\"/index.html\",\"path\":\"/index.html\",\"query\":\"\",\"protocol\":\"HTTP/1.1\",\"req_status\":\"304\",\"status\":\"304\",\"size\":\"0\",\"referer\":\"-\",\"agent\":\"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.36\",\"agent_out\":\"-\",\"response_time\":\"192\",\"cookie\":\"-\",\"set_cookie\":\"-\",\"xforwardfor\":\"-\",\"filename\":\"/var/www/html/index.html\",\"port\":\"80\",\"proc_id\":\"30711\",\"pid\":\"30711\",\"request\":\"GET / HTTP/1.1\",\"con_status\":\"-\",\"recv_size\":\"463\",\"send_size\":\"148\",\"exe_time\":\"0\"}\n\n\n\u4ee5\u4e0a\n\n[\u3053\u3061\u3089\u306e\u30e1\u30e2\u3067](http://qiita.com/okuda_h/items/0f735ac510474276bd5f)httpd\u3067ltsv\u3092\u8a2d\u5b9a\u3057\u305f\u306e\u3067td-agent\u3067\u53d6\u308a\u8fbc\u3080\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n# fluentd(td-agent)\u3092install\n\n##### \u53c2\u8003\n[Installing Fluentd Using rpm Package](http://docs.fluentd.org/articles/install-by-rpm)\n\n\n```\n$ sudo yum update -y\n$ curl -L http://toolbelt.treasuredata.com/sh/install-redhat.sh | sh\n```\n\n\n# fluentd\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\n\n##### \u53c2\u8003\n[(3) Re-use your config: the \u201cinclude\u201d directive](http://docs.fluentd.org/articles/config-file#3-re-use-your-config-the-ldquoincluderdquo-directive)\n\n\n```/etc/td-agent/td-agent.conf\n# \u8ffd\u8a18\ninclude config.d/*.conf\n\n```\n\n##### \u4ee5\u4e0b\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3066\u8a18\u8ff0\n\n\n\n``` /etc/td-agent/config.d/ltsvsample.conf\n# source\n<source>\n  type tail\n  format ltsv\n  time_key time\n  time_format %Y/%m/%d %H:%M:%S %z\n  path /var/log/httpd/access_log\n\u3000pos_file /var/log/td-agent/tmp/apache.access.log.pos\n  tag ltsv.sample\n</source>\n\n# match \n<match ltsv.sample>\n  type stdout\n</match>\n```\n\n# stdout\u30ed\u30b0\u3092\u958b\u3044\u3066\u78ba\u8a8d\u3057\u3066\u307f\u308b.\n\n``` /var/log/td-agent/td-agent.log\n2014-09-14 10:15:56 +0000 [info]: adding source type=\"http\"\n2014-09-14 10:15:56 +0000 [info]: adding source type=\"debug_agent\"\n2014-09-14 10:15:56 +0000 [info]: adding source type=\"tail\"\n2014-09-14 10:15:56 +0000 [warn]: 'pos_file PATH' parameter is not set to a 'tail' source.\n2014-09-14 10:15:56 +0000 [warn]: this parameter is highly recommended to save the position to resume tailing.\n2014-09-14 10:15:56 +0000 [info]: adding match pattern=\"apache\" type=\"file\"\n2014-09-14 10:15:56 +0000 [info]: adding match pattern=\"ltsv.sample\" type=\"stdout\"\n2014-09-14 10:15:56 +0000 [info]: listening fluent socket on 0.0.0.0:24224\n2014-09-14 10:15:56 +0000 [info]: listening dRuby uri=\"druby://127.0.0.1:24230\" object=\"Engine\"\n2014-09-14 10:15:56 +0000 [info]: following tail of /var/log/httpd/access_log\n2014-09-14 10:16:07 +0000 ltsv.sample: {\"domain\":\"xx.xx.xx.xx\",\"servername\":\"127.0.0.1\",\"host\":\"122.29.141.56\",\"server\":\"xxx.xx.xx.xxx\",\"ident\":\"-\",\"authuser\":\"-\",\"timestamp\":\"2014/09/14 10:16:07 +0000\",\"method\":\"GET\",\"reqpath\":\"/index.html\",\"path\":\"/index.html\",\"query\":\"\",\"protocol\":\"HTTP/1.1\",\"req_status\":\"304\",\"status\":\"304\",\"size\":\"0\",\"referer\":\"-\",\"agent\":\"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/37.0.2062.120 Safari/537.36\",\"agent_out\":\"-\",\"response_time\":\"192\",\"cookie\":\"-\",\"set_cookie\":\"-\",\"xforwardfor\":\"-\",\"filename\":\"/var/www/html/index.html\",\"port\":\"80\",\"proc_id\":\"30711\",\"pid\":\"30711\",\"request\":\"GET / HTTP/1.1\",\"con_status\":\"-\",\"recv_size\":\"463\",\"send_size\":\"148\",\"exe_time\":\"0\"}\n```\n\n\n\n\n\u4ee5\u4e0a\n", "tags": ["fluentd", "LTSV"]}