{"context": "\n\n\u304a\u984c\nRecyclerView\u3067\u30bb\u30af\u30b7\u30e7\u30f3\u5206\u3051\u3092\u3057\u305f\u3044\u3002\u3053\u3053\u3067\u306fString\u306e\u30ea\u30b9\u30c8\u3068Number\u306e\u30ea\u30b9\u30c8\u3092\u3001\u30bb\u30af\u30b7\u30e7\u30f3\u5206\u3051\u3057\u3066\u8868\u793a\u3059\u308bRecyclerView\u3092\u4f8b\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\n\u611a\u76f4\u306b\u3084\u308b\u4f8b\nRecyclerView.Adapter#getItemViewType(int position)\u3067\u30bb\u30af\u30b7\u30e7\u30f3\u3068\u8868\u793a\u3059\u308b\u8981\u7d20\u3068\u3067\u7570\u306a\u308b\u5024\u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308b\u3068\u3067\u304d\u307e\u3059\u3002\n\u611a\u76f4\u306b\u5b9f\u88c5\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\npublic class SimpleAndHonestAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {\n    static final int UNKNOWN = 0;\n    static final int STRING_HEADER = 1;\n    static final int STRING_DATA = 2;\n    static final int NUMBER_HEADER = 3;\n    static final int NUMBER_DATA = 4;\n\n    List<String> mStrings;\n    List<Number> mNumbers;\n\n    public SimpleAndHonestAdapter(List<String> strings, List<Number> Numbers) {\n        mStrings = strings;\n        mNumbers = Numbers;\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        RecyclerView.ViewHolder holder;\n        switch (viewType) {\n            case STRING_HEADER: {\n                holder = /* String\u306e\u30d8\u30c3\u30c0\u30fc\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case STRING_DATA: {\n                holder = /* String\u306e\u30c7\u30fc\u30bf\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case NUMBER_HEADER: {\n                holder = /* Number\u306e\u30d8\u30c3\u30c0\u30fc\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case NUMBER_DATA: {\n                holder = /* Number\u306e\u30c7\u30fc\u30bf\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case UNKNOWN:\n            default: {  // \u3042\u308a\u3048\u306a\u3044\u30a8\u30e9\u30fc\u30b1\u30fc\u30b9\u306a\u306e\u3067\u9069\u5f53\u306a\u306e\u3092\u8fd4\u3057\u3066\u304a\u304f\n                holder = new RecyclerView.ViewHolder(new View(parent.getContext())) {\n                };\n            }\n        }\n        return holder;\n    }\n\n    @Override\n    public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {\n        int viewType = getItemViewType(position);\n        switch (viewType) {\n            case STRING_DATA: {\n                String data = mStrings.get(position - 1);\n                /* \u3053\u3053\u3067holder\u306bdata\u306e\u5185\u5bb9\u3092\u8a2d\u5b9a\u3059\u308b */\n            }\n            case NUMBER_DATA: {\n                Number data = mNumbers.get(position - 2 - mStrings.size());\n                /* \u3053\u3053\u3067holder\u306bdata\u306e\u5185\u5bb9\u3092\u8a2d\u5b9a\u3059\u308b */\n            }\n        }\n    }\n\n    @Override\n    public int getItemViewType(int position) {\n        if (position == 0) {\n            return STRING_HEADER;\n        } else if (position < mStrings.size() + 1) {\n            return STRING_DATA;\n        } else if (position == mStrings.size() + 1) {\n            return NUMBER_HEADER;\n        } else {\n            return NUMBER_DATA;\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return mStrings.size() + mNumbers.size() + 2;\n    }\n}\n\nonCreateViewHolder / onBindViewHolder / getItemViewType / getItemCount \u30e1\u30bd\u30c3\u30c9\u305d\u308c\u305e\u308c\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8003\u616e\u3059\u308b\u3088\u3046\u306b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u6539\u4fee\u3059\u308b\u305f\u3073\u306b\u7d44\u307f\u63db\u3048\u304c\u5fc5\u8981\u3067\u7269\u51c4\u3044\u5927\u5909\u3067\u3059\u3002\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u6570\u304c\u5897\u3048\u305f\u3089\u5897\u3048\u305f\u5206\u3060\u3051\u96ea\u3060\u308b\u307e\u5f0f\u306b\u5927\u5909\u306b\u306a\u308a\u307e\u3059\u3002\nMergeRecyclerAdapter\u3092\u4f7f\u3048\u3070\u3053\u306e\u5927\u5909\u3055\u304b\u3089\u89e3\u653e\u3055\u308c\u307e\u3059\u3002\n\nMergeRecyclerAdapter\u3092\u4f7f\u3046\u4f8b\n\u524d\u6e96\u5099\u3068\u3057\u3066\u6b21\u306e\u3088\u3046\u306a\u3001\u305d\u308c\u305e\u308c\u306e\u30c7\u30fc\u30bf\u3092\u5358\u72ec\u3067\u8868\u793a\u3059\u308b\u30a2\u30c0\u30d7\u30bf\u30fc\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n- StringAdapter : String\u306e\u30ea\u30b9\u30c8\u7528\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\n- NumberAdapter : Number\u306e\u30ea\u30b9\u30c8\u7528\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\n- SingleViewAdapter : \u5358\u4e00\u306eView\u3092\u8868\u793a\u3067\u304d\u308b\u30a2\u30c0\u30d7\u30bf\u30fc(\u30d8\u30c3\u30c0\u30fc\u7528)\nMergeRecyclerAdapter\u3092\u4f7f\u3048\u3070\u5c02\u7528\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f5c\u308b\u3053\u3068\u7121\u304f\u3001\u65e2\u5b58\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u6d41\u7528\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u30b7\u30f3\u30d7\u30eb\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n// find views\nmRecyclerView = (RecyclerView) findViewById(R.id.recycler);\nmRecyclerView.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false));\n\n{   // prepare adapters\n    mMergeRecyclerAdapter = new MergeRecyclerAdapter<>(this);\n    {   // create strings header adapter\n        SingleViewAdapter stringsHeaderAdapter = new SingleViewAdapter(this, R.layout.view_header_string);\n        mMergeRecyclerAdapter.addAdapter(stringsHeaderAdapter);\n    }\n    {   // create strings adapter\n        List<String> items = /* String\u306e\u30ea\u30b9\u30c8\u3092\u6e96\u5099\u3059\u308b */;\n        StringAdapter stringsAdapter = new StringAdapter(this, items, mListenerRelay);\n        mMergeRecyclerAdapter.addAdapter(stringsAdapter);\n    }\n    {   // create numbers header adapter\n        SingleViewAdapter numbersHeaderAdapter = new SingleViewAdapter(this, R.layout.view_header_number);\n        mMergeRecyclerAdapter.addAdapter(numbersHeaderAdapter);\n    }\n    {   // create numbers adapter\n        List<Number> items = /* Number\u306e\u30ea\u30b9\u30c8\u3092\u6e96\u5099\u3059\u308b */;\n        NumberAdapter numbersAdapter = new NumberAdapter(this, items, mListenerRelay);\n        mMergeRecyclerAdapter.addAdapter(numbersAdapter);\n    }\n    mRecyclerView.setAdapter(mergeRecyclerAdapter);\n}\n\n\u305d\u308c\u305e\u308c\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\u3060\u3051\u3067\u7169\u308f\u3057\u3044\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u4e00\u3064\u8ab2\u984c\u3068\u3057\u3066\u3001\u30af\u30ea\u30c3\u30af\u306a\u3069\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u3068\u304d\u306bn\u756a\u76ee\u306e\u9805\u76ee\u304c\u4f55\u3067\u3042\u308b\u304b\u3092\u5224\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3067\u3066\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u5bfe\u5fdc\u7b56\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001MergeRecyclerAdapter#getAdapterOffsetForItem(int position)\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3068\u89e3\u6c7a\u3055\u308c\u307e\u3059\u3002\npublic LocalAdapter getAdapterOffsetForItem(final int position) {\n    /* \u7701\u7565 */\n}\n\n\u623b\u308a\u5024\u306eLocalAdapter\u306f\u6b21\u306e\u3088\u3046\u306a\u30e1\u30f3\u30d0\u5909\u6570\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\npublic class LocalAdapter extends RecyclerView.AdapterDataObserver {\n    public final T mAdapter;\n    public int mLocalPosition = 0;\n    /* \u7701\u7565 */\n}\n\n\u3053\u308c\u3089\u3092\u4f7f\u3046\u3068\u6b21\u306e\u3088\u3046\u306aView.OnClickListener\u3092\u4f5c\u308b\u3053\u3068\u3067\u3001\u30af\u30ea\u30c3\u30af\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\npublic void onClick(View view) {\n    ViewHolder holder = (ViewHolder) view.getTag();  // \u4e88\u3081setTag\u3057\u3066\u304a\u304f\u3053\u3068\n    LocalAdapter la = mMergeRecyclerAdapter.getAdapterOffsetForItem(holder.getAdapterPosition());\n    if (la.mAdapter instanceof StringAdapter) {\n        String data = ((StringAdapter)la.mAdapter).getItemAt(la.mLocalPosition);\n        /* String\u306e\u5834\u5408\u306e\u51e6\u7406\u3092\u3059\u308b */\n    } else if (la.mAdapter instanceof NumberAdapter) {\n        Number data = ((NumberAdapter)la.mAdapter).getItemAt(la.mLocalPosition);\n        /* Number\u306e\u5834\u5408\u306e\u51e6\u7406\u3092\u3059\u308b */\n    }\n}\n\n\u3082\u3046\u3061\u3087\u3063\u3068\u4f5c\u308a\u3053\u3093\u3060\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\n\n\u307e\u3068\u3081\nRecyclerView.Adapter\u306f\u6700\u4f4e\u9650\u306e\u6a5f\u80fd\u3057\u304b\u63d0\u4f9b\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u30bb\u30af\u30b7\u30e7\u30f3\u5206\u3051\u3092\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u53d6\u308a\u6271\u3044\u304c\u304b\u306a\u308a\u5927\u5909\u3067\u3059\u3002\u305d\u3057\u3066\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u7ba1\u7406\u3092\u5c11\u3057\u3067\u3082\u9593\u9055\u3048\u308b\u3068\u30ba\u30ec\u305f\u308aArrayIndexOutOfBoundsException\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u308a\u3067\u304b\u306a\u308a\u5371\u967a\u3067\u3059\u3002\u305d\u306e\u624b\u306e\u5371\u967a\u306a\u3053\u3068\u306fMergeRecyclerAdapter\u306e\u3088\u3046\u306a\u7279\u5b9a\u306e\u30af\u30e9\u30b9\u306b\u7ba1\u7406\u306e\u8cac\u52d9\u3092\u62bc\u3057\u4ed8\u3051\u3066\u5bfe\u5fdc\u3057\u307e\u3057\u3087\u3046\u3002\n\u5b9f\u969b\u306b\u52d5\u304f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3053\u3061\u3089\n## \u304a\u984c\nRecyclerView\u3067\u30bb\u30af\u30b7\u30e7\u30f3\u5206\u3051\u3092\u3057\u305f\u3044\u3002\u3053\u3053\u3067\u306fString\u306e\u30ea\u30b9\u30c8\u3068Number\u306e\u30ea\u30b9\u30c8\u3092\u3001\u30bb\u30af\u30b7\u30e7\u30f3\u5206\u3051\u3057\u3066\u8868\u793a\u3059\u308bRecyclerView\u3092\u4f8b\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/55138/5cc3223c-31e5-2a74-a0ea-9ba17d7e3cca.png)\n\n\n## \u611a\u76f4\u306b\u3084\u308b\u4f8b\n[RecyclerView.Adapter#getItemViewType(int position)](https://developer.android.com/reference/android/support/v7/widget/RecyclerView.Adapter.html#getItemViewType(int))\u3067\u30bb\u30af\u30b7\u30e7\u30f3\u3068\u8868\u793a\u3059\u308b\u8981\u7d20\u3068\u3067\u7570\u306a\u308b\u5024\u3092\u8fd4\u3059\u3088\u3046\u306b\u3059\u308b\u3068\u3067\u304d\u307e\u3059\u3002\n\n\u611a\u76f4\u306b\u5b9f\u88c5\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```java\npublic class SimpleAndHonestAdapter extends RecyclerView.Adapter<RecyclerView.ViewHolder> {\n    static final int UNKNOWN = 0;\n    static final int STRING_HEADER = 1;\n    static final int STRING_DATA = 2;\n    static final int NUMBER_HEADER = 3;\n    static final int NUMBER_DATA = 4;\n\n    List<String> mStrings;\n    List<Number> mNumbers;\n\n    public SimpleAndHonestAdapter(List<String> strings, List<Number> Numbers) {\n        mStrings = strings;\n        mNumbers = Numbers;\n    }\n\n    @Override\n    public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) {\n        RecyclerView.ViewHolder holder;\n        switch (viewType) {\n            case STRING_HEADER: {\n                holder = /* String\u306e\u30d8\u30c3\u30c0\u30fc\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case STRING_DATA: {\n                holder = /* String\u306e\u30c7\u30fc\u30bf\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case NUMBER_HEADER: {\n                holder = /* Number\u306e\u30d8\u30c3\u30c0\u30fc\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case NUMBER_DATA: {\n                holder = /* Number\u306e\u30c7\u30fc\u30bf\u7528\u306eViewHolder\u3092\u4f5c\u308b */;\n            }\n            case UNKNOWN:\n            default: {  // \u3042\u308a\u3048\u306a\u3044\u30a8\u30e9\u30fc\u30b1\u30fc\u30b9\u306a\u306e\u3067\u9069\u5f53\u306a\u306e\u3092\u8fd4\u3057\u3066\u304a\u304f\n                holder = new RecyclerView.ViewHolder(new View(parent.getContext())) {\n                };\n            }\n        }\n        return holder;\n    }\n\n    @Override\n    public void onBindViewHolder(RecyclerView.ViewHolder holder, int position) {\n        int viewType = getItemViewType(position);\n        switch (viewType) {\n            case STRING_DATA: {\n                String data = mStrings.get(position - 1);\n                /* \u3053\u3053\u3067holder\u306bdata\u306e\u5185\u5bb9\u3092\u8a2d\u5b9a\u3059\u308b */\n            }\n            case NUMBER_DATA: {\n                Number data = mNumbers.get(position - 2 - mStrings.size());\n                /* \u3053\u3053\u3067holder\u306bdata\u306e\u5185\u5bb9\u3092\u8a2d\u5b9a\u3059\u308b */\n            }\n        }\n    }\n\n    @Override\n    public int getItemViewType(int position) {\n        if (position == 0) {\n            return STRING_HEADER;\n        } else if (position < mStrings.size() + 1) {\n            return STRING_DATA;\n        } else if (position == mStrings.size() + 1) {\n            return NUMBER_HEADER;\n        } else {\n            return NUMBER_DATA;\n        }\n    }\n\n    @Override\n    public int getItemCount() {\n        return mStrings.size() + mNumbers.size() + 2;\n    }\n}\n```\n\nonCreateViewHolder / onBindViewHolder / getItemViewType / getItemCount \u30e1\u30bd\u30c3\u30c9\u305d\u308c\u305e\u308c\u304c\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u8003\u616e\u3059\u308b\u3088\u3046\u306b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u6539\u4fee\u3059\u308b\u305f\u3073\u306b\u7d44\u307f\u63db\u3048\u304c\u5fc5\u8981\u3067\u7269\u51c4\u3044\u5927\u5909\u3067\u3059\u3002\u30bb\u30af\u30b7\u30e7\u30f3\u306e\u6570\u304c\u5897\u3048\u305f\u3089\u5897\u3048\u305f\u5206\u3060\u3051\u96ea\u3060\u308b\u307e\u5f0f\u306b\u5927\u5909\u306b\u306a\u308a\u307e\u3059\u3002\nMergeRecyclerAdapter\u3092\u4f7f\u3048\u3070\u3053\u306e\u5927\u5909\u3055\u304b\u3089\u89e3\u653e\u3055\u308c\u307e\u3059\u3002\n\n\n## MergeRecyclerAdapter\u3092\u4f7f\u3046\u4f8b\n\u524d\u6e96\u5099\u3068\u3057\u3066\u6b21\u306e\u3088\u3046\u306a\u3001\u305d\u308c\u305e\u308c\u306e\u30c7\u30fc\u30bf\u3092\u5358\u72ec\u3067\u8868\u793a\u3059\u308b\u30a2\u30c0\u30d7\u30bf\u30fc\u304c\u3042\u308b\u3068\u3057\u307e\u3059\u3002\n- StringAdapter : String\u306e\u30ea\u30b9\u30c8\u7528\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\n- NumberAdapter : Number\u306e\u30ea\u30b9\u30c8\u7528\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\n- [SingleViewAdapter](https://github.com/cattaka/AdapterToolbox/blob/master/adapter-toolbox/src/main/java/net/cattaka/android/adaptertoolbox/adapter/SingleViewAdapter.java) : \u5358\u4e00\u306eView\u3092\u8868\u793a\u3067\u304d\u308b\u30a2\u30c0\u30d7\u30bf\u30fc(\u30d8\u30c3\u30c0\u30fc\u7528)\n\nMergeRecyclerAdapter\u3092\u4f7f\u3048\u3070\u5c02\u7528\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f5c\u308b\u3053\u3068\u7121\u304f\u3001\u65e2\u5b58\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u6d41\u7528\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u30b7\u30f3\u30d7\u30eb\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```java\n// find views\nmRecyclerView = (RecyclerView) findViewById(R.id.recycler);\nmRecyclerView.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false));\n\n{   // prepare adapters\n    mMergeRecyclerAdapter = new MergeRecyclerAdapter<>(this);\n    {   // create strings header adapter\n        SingleViewAdapter stringsHeaderAdapter = new SingleViewAdapter(this, R.layout.view_header_string);\n        mMergeRecyclerAdapter.addAdapter(stringsHeaderAdapter);\n    }\n    {   // create strings adapter\n        List<String> items = /* String\u306e\u30ea\u30b9\u30c8\u3092\u6e96\u5099\u3059\u308b */;\n        StringAdapter stringsAdapter = new StringAdapter(this, items, mListenerRelay);\n        mMergeRecyclerAdapter.addAdapter(stringsAdapter);\n    }\n    {   // create numbers header adapter\n        SingleViewAdapter numbersHeaderAdapter = new SingleViewAdapter(this, R.layout.view_header_number);\n        mMergeRecyclerAdapter.addAdapter(numbersHeaderAdapter);\n    }\n    {   // create numbers adapter\n        List<Number> items = /* Number\u306e\u30ea\u30b9\u30c8\u3092\u6e96\u5099\u3059\u308b */;\n        NumberAdapter numbersAdapter = new NumberAdapter(this, items, mListenerRelay);\n        mMergeRecyclerAdapter.addAdapter(numbersAdapter);\n    }\n    mRecyclerView.setAdapter(mergeRecyclerAdapter);\n}\n```\n\n\u305d\u308c\u305e\u308c\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304f\u3060\u3051\u3067\u7169\u308f\u3057\u3044\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u4e00\u3064\u8ab2\u984c\u3068\u3057\u3066\u3001\u30af\u30ea\u30c3\u30af\u306a\u3069\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u3068\u304d\u306bn\u756a\u76ee\u306e\u9805\u76ee\u304c\u4f55\u3067\u3042\u308b\u304b\u3092\u5224\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3067\u3066\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u5bfe\u5fdc\u7b56\u304c\u7528\u610f\u3055\u308c\u3066\u304a\u308a\u3001MergeRecyclerAdapter#getAdapterOffsetForItem(int position)\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3068\u89e3\u6c7a\u3055\u308c\u307e\u3059\u3002\n\n```java\npublic LocalAdapter getAdapterOffsetForItem(final int position) {\n    /* \u7701\u7565 */\n}\n```\n\n\u623b\u308a\u5024\u306eLocalAdapter\u306f\u6b21\u306e\u3088\u3046\u306a\u30e1\u30f3\u30d0\u5909\u6570\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\n```java\npublic class LocalAdapter extends RecyclerView.AdapterDataObserver {\n    public final T mAdapter;\n    public int mLocalPosition = 0;\n    /* \u7701\u7565 */\n}\n```\n\n\u3053\u308c\u3089\u3092\u4f7f\u3046\u3068\u6b21\u306e\u3088\u3046\u306aView.OnClickListener\u3092\u4f5c\u308b\u3053\u3068\u3067\u3001\u30af\u30ea\u30c3\u30af\u6642\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```java\npublic void onClick(View view) {\n    ViewHolder holder = (ViewHolder) view.getTag();  // \u4e88\u3081setTag\u3057\u3066\u304a\u304f\u3053\u3068\n    LocalAdapter la = mMergeRecyclerAdapter.getAdapterOffsetForItem(holder.getAdapterPosition());\n    if (la.mAdapter instanceof StringAdapter) {\n        String data = ((StringAdapter)la.mAdapter).getItemAt(la.mLocalPosition);\n        /* String\u306e\u5834\u5408\u306e\u51e6\u7406\u3092\u3059\u308b */\n    } else if (la.mAdapter instanceof NumberAdapter) {\n        Number data = ((NumberAdapter)la.mAdapter).getItemAt(la.mLocalPosition);\n        /* Number\u306e\u5834\u5408\u306e\u51e6\u7406\u3092\u3059\u308b */\n    }\n}\n```\n\n[\u3082\u3046\u3061\u3087\u3063\u3068\u4f5c\u308a\u3053\u3093\u3060\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089](https://github.com/cattaka/AdapterToolbox/blob/master/example/src/main/java/net/cattaka/android/adaptertoolbox/example/MultiAdapterExampleActivity.java)\n\n\n\n## \u307e\u3068\u3081\nRecyclerView.Adapter\u306f\u6700\u4f4e\u9650\u306e\u6a5f\u80fd\u3057\u304b\u63d0\u4f9b\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u30bb\u30af\u30b7\u30e7\u30f3\u5206\u3051\u3092\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u53d6\u308a\u6271\u3044\u304c\u304b\u306a\u308a\u5927\u5909\u3067\u3059\u3002\u305d\u3057\u3066\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u7ba1\u7406\u3092\u5c11\u3057\u3067\u3082\u9593\u9055\u3048\u308b\u3068\u30ba\u30ec\u305f\u308aArrayIndexOutOfBoundsException\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3057\u305f\u308a\u3067\u304b\u306a\u308a\u5371\u967a\u3067\u3059\u3002\u305d\u306e\u624b\u306e\u5371\u967a\u306a\u3053\u3068\u306fMergeRecyclerAdapter\u306e\u3088\u3046\u306a\u7279\u5b9a\u306e\u30af\u30e9\u30b9\u306b\u7ba1\u7406\u306e\u8cac\u52d9\u3092\u62bc\u3057\u4ed8\u3051\u3066\u5bfe\u5fdc\u3057\u307e\u3057\u3087\u3046\u3002\n\n[\u5b9f\u969b\u306b\u52d5\u304f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3053\u3061\u3089](https://github.com/cattaka/AdapterToolbox/)\n", "tags": ["Android", "RecyclerView"]}