{"context": "Emr\u3067\u306e\u3084\u308a\u65b9\u306f\u9700\u8981\u304c\u3042\u3063\u305f\u3089\u66f8\u304f\u304b\u306a\u3002\n\u3068\u3044\u3063\u3066\u3082\u8aac\u660e\u3059\u308b\u3053\u3068\u307b\u3068\u3093\u3069\u7121\u3044\u3051\u3069\u306d\u3002\u7d30\u304b\u3044\u8a2d\u5b9a\u95a2\u4fc2\u3092\u3069\u3053\u3067\u3069\u3046\u3059\u308b\u306e\u304b\u3063\u3066\u304f\u3089\u3044\u304b\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30bf\u30a4\u30c8\u30eb\u901a\u308aEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bpresto\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u3001s3\u306b\u7f6e\u3044\u305f\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb(orc)\u306b\u30af\u30a8\u30ea\u6295\u3052\u308b\u307e\u3067\u3092\u3056\u3056\u3063\u3068\u3002\u306a\u304a\u3001Hadoop\u306f\u64ec\u4f3c\u5206\u6563\u30e2\u30fc\u30c9\u3001presto\u306fcoordinator/worker\u304c\u540c\u3058\u30ce\u30fc\u30c9\u3067\u3059\u3002\n\n\u4f55\u6545\u304b\n\u4f5c\u696d\u6642\u3001\u9014\u4e2d\u307e\u3067root\u3067\u3084\u3063\u3066\u305f\u306e\u3067\u305d\u308c\u3092\u3053\u3053\u306b\u8a18\u3057\u307e\u3059\u3002\u9014\u4e2d\u304b\u3089ec2-user\u3067\u3084\u308a\u307e\u3057\u305f\u3002\nsudo su -\n\n\nHive \u30ed\u30fc\u30ab\u30eb\u30e1\u30bf\u30b9\u30c8\u30a2\u3067\u4f7f\u7528\u3059\u308b\u306e\u3067mysql\u3092\u3044\u308c\u3088\u3046\n\u307d\u3059\u3050\u308c\u3067\u3082\u826f\u3044\u3067\u3059\u304cmysql\u306e\u307b\u3046\u304c\u30e9\u30af\u3067\u3059\u3002\nmysql\u306f\u5927\u4eba\u306e\u4e8b\u60c5\u30675.7\u7cfb\u4f7f\u3044\u305f\u304b\u3063\u305f\u306e\u3067rpm\u3067\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-common-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-libs-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-libs-compat-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-client-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-server-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-devel-5.7.16-1.el6.x86_64.rpm\n\nservice mysqld start\nchkconfig mysqld on\n\n\u3044\u3089\u306a\u3044\u3082\u306e\u3082\u5165\u3063\u3066\u308b\u3057\u306a\u3093\u30671\u500b\u305a\u3064\u3084\u3063\u3066\u3093\u306d\u3093\u3063\u3066\u601d\u3044\u306f\u3057\u307e\u3059\u304c\u4f5c\u696d\u30e1\u30e2\u306b\u3053\u3046\u66f8\u3044\u3066\u3042\u3063\u305f\u306e\u3067\uff65\uff65\uff65\n\u306a\u304a\u3001rpm\u306eurl\u306f\u610f\u5916\u3068\u983b\u7e41\u306b\u5909\u308f\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u56fa\u5b9a\u306e\u89b3\u70b9\u304b\u3089\u3044\u3063\u3066\u3082s3\u304b\u3069\u3063\u304b\u306b\u7f6e\u3044\u3068\u304f\u307b\u3046\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u306d\u3002\n\n\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\u3068plugin\u306e\u7121\u52b9\u5316\n\u3068\u308a\u3042\u3048\u305a\u521d\u671f\u30d1\u30b9\u3092\u7372\u5f97\u3057\u307e\u3059\u3002\ncat /var/log/mysqld.log | grep \"temporary password\"\n\n\u2191\u3067root@localhost: XXXXXXX \u306eXXXXXXX\u3092\u4f7f\u3063\u3066mysql\u3078\u30ed\u30b0\u30a4\u30f3\u3002\n\u958b\u767a\u7528\u306e\u74b0\u5883\u3060\u3057validate_password\u306f\u95c7\u306b\u846c\u308a\u307e\u3059\u3002\nset password for root@localhost=password('passwordPASSWORD@999');\nuse mysql\nuninstall plugin validate_password;\nupdate user set authentication_string=PASSWORD('\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9') where User='root';\nflush privileges;\nexit\n\n\nJDK\u306e\u5165\u624b\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3068\u308a\u3042\u3048\u305a1.8\u7cfb\u306a\u3089\u305d\u308c\u3067\u826f\u3044\u3053\u3068\u306b\u3057\u307e\u3059\u3002\nhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\nLinux x64\u306erpm\u3092DL\u3002\nmv DL\u3057\u305f\u30d1\u30b9/jdk-8u111-linux-x64.rpm /usr/local/lib\nyum -y localinstall /usr/local/lib/jdk-8u111-linux-x64.rpm\njava -version\nrm -f /usr/local/lib/jdk-8u111-linux-x64.rpm\n\n\nJAVA_HOME\u306e\u8a2d\u5b9a\n\u3053\u3053\u304b\u3089ec2-user\u3067\u4f5c\u696d\u3057\u307e\u3059\u3002\u5225\u306broot\u306e\u307e\u307e\u3067\u826f\u3044\u4eba\u306f\u305d\u306e\u307e\u307e\u3067\u3002\nuser\u5909\u3048\u305f\u3089\u74b0\u5883\u5909\u6570JAVA_HOME\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\necho \"export JAVA_HOME=/usr/java/jdk1.8.0_111\" >> ~/.bashrc\n. ~/.bashrc\n\n\nSSH\u8a2d\u5b9a\nhadoop\u306fssh\u4f7f\u3046\u306e\u3067\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u7121\u3057\u3067localhost\u306bssh\u63a5\u7d9a\u53ef\u80fd\u306a\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\nssh-keygen\u6642\u306e\u5bfe\u8a71\u306f\u5168\u90e8\u30ce\u30fc\u30eb\u30c3\u30afenter\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\u3064\u3044\u3067\u306b\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u3082\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nssh-keygen\ncat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\nchmod 600 ~/.ssh/authorized_keys\nssh localhost\nexit\n\n\nHadoop\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttp://www.apache.org/dyn/closer.cgi/hadoop/common/\n\u306b\u8a18\u8f09\u3055\u308c\u3066\u308b\u9069\u5f53\u306a\u30b5\u30a4\u30c8\u304b\u3089\u76ee\u7684\u306eversion\u306ehadoop\u306eURL\u3092\u5165\u624b\u3057\u307e\u3059\u3002\n\u81ea\u5206\u306f2.7.3\u3067\u3084\u308a\u307e\u3057\u305f\u3002\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/hadoop-2.7.3.tar.gz\nsudo mv DL\u3057\u305f\u30d1\u30b9/hadoop-2.7.3.tar.gz /usr/local/lib\ncd /usr/local/lib\nsudo tar zxf hadoop-2.7.3.tar.gz\nsudo rm -f hadoop-2.7.3.tar.gz\nsudo ln -s hadoop-2.7.3 hadoop\n\n# owner\u3092ec2-user\u306b\u3057\u3066\u304a\u304f\nsudo su -\ncd /usr/local/lib\nchown ec2-user hadoop\nexit\n\n\n\u64ec\u4f3c\u5206\u6563\u30e2\u30fc\u30c9HDFS\u8a2d\u5b9a\n\u306a\u304a\u3001\u8907\u6570\u30ce\u30fc\u30c9\u7528\u610f\u3057\u3066\u3061\u3083\u3093\u3068\u5206\u6563\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3082\u3046\u3061\u3087\u3063\u3068\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u305d\u3046\u3067\u3059\u3002\n\u4eca\u56de\u306f\u64ec\u4f3c\u5206\u6563\u3067\u3002\n\u307e\u305a\u74b0\u5883\u5909\u6570HAOOP_HOME/HADOOP_CONF_DIR\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\necho \"export HADOOP_HOME=/usr/local/lib/hadoop\" >> ~/.bashrc\necho \"export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\" >> ~/.bashrc\n. ~/.bashrc\n\nHDFS\u683c\u7d0d\u5148\u3068\u306a\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u30d1\u30b9\u306f\u304a\u597d\u307f\u3067\u826f\u3044\u304b\u3068\u3002\nmkdir -p ~/var/hdfs/{name,data}\n\ncore-site.xml/hdfs-site.xml/yarn-site.xml\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\nsudo vi /usr/local/lib/hadoop/etc/hadoop/core-site.xml\n\n<configuration>\n  <property>\n    <name>fs.defaultFS</name>\n    <value>hdfs://localhost:9000</value>\n  </property>\n</configuration>\n\nsudo vi /usr/local/lib/hadoop/etc/hadoop/hdfs-site.xml\n\n<configuration>\n  <property>\n    <name>dfs.name.dir</name>\n    <value>/home/ec2-user/var/hdfs/name</value>\n  </property>\n  <property>\n    <name>dfs.data.dir</name>\n    <value>/home/ec2-user/var/hdfs/data</value>\n  </property>\n  <property>\n    <name>dfs.replication</name>\n    <value>1</value>\n  </property>\n</configuration>\n\nsudo vi /usr/local/lib/hadoop/etc/hadoop/yarn-site.xml\n(s3\u30a2\u30af\u30bb\u30b9\u306e\u305f\u3081)\n<configuration>\n\n<!-- Site specific YARN configuration properties -->\n  <property>\n    <name>fs.s3a.impl</name>\n    <value>org.apache.hadoop.fs.s3a.S3AFileSystem</value>\n  </property>\n  <property>\n    <name>fs.s3a.access.key</name>\n    <value>AWS\u30a2\u30af\u30bb\u30b9\u30ad\u30fc</value>\n  </property>\n  <property>\n    <name>fs.s3a.secret.key</name>\n    <value>AWS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc</value>\n  </property>\n</configuration>\n\nnamenode\u306e\u521d\u671f\u5316\u3092\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001namenode\u306fdatanode\u304c\u3069\u3046\u3044\u3063\u305f\u60c5\u5831\u3092\u8a18\u9332\u3057\u3066\u3044\u308b\u304b\u3092\u7ba1\u7406\u3057\u3066\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n/usr/local/lib/hadoop/bin/hadoop namenode -format\n\n\u6700\u5f8c\u306b\u8d77\u52d5\u3068\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n/usr/local/lib/hadoop/sbin/start-dfs.sh\n/usr/local/lib/hadoop/bin/hadoop fs -ls /\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u307e\u3060\u751f\u6210\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u308a\u3057\u306a\u3051\u308c\u3070\u554f\u984c\u306a\u3057\u3002\n\nS3\u3078\u89e6\u308b\u305f\u3081\u306b\u8ffd\u52a0\u8a2d\u5b9a\norg.apache.hadoop.fs.s3a.S3AFileSystem\u3092\u5229\u7528\u53ef\u80fd\u306b\u3059\u308b\u305f\u3081\u3001Hadoop\u306bclasspath\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u7279\u306b\u3069\u3053\u304b\u304b\u3089\u6301\u3063\u3066\u3053\u306a\u304f\u3066\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u3067jar\u305d\u306e\u3082\u306e\u306fshare/hadoop/tools/lib/\u306b\u3082\u3063\u3066\u307e\u3059\u3002\nsudo vi /usr/local/lib/hadoop/etc/hadoop/hadoop-env.sh\n\u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u306b\nexport HADOOP_CLASSPATH=$HADOOP_CLASSPATH:$HADOOP_HOME/share/hadoop/tools/lib/*\n\n\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n/usr/local/lib/hadoop/bin/hadoop fs -ls s3a://[[bucket\u540d]]/\n\nfs.s3.impl\u3082\u8a66\u3057\u307e\u3057\u305f\u304c\u3001-ls\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u65ad\u5ff5\u3002\n\nHive\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttp://www.apache.org/dyn/closer.cgi/hive/\nhadoop\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u4e0a\u306eURL\u304b\u3089\u76ee\u7684\u306eversion\u306ehive\u306eURL\u3092\u5165\u624b\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fapache-hive-2.1.1-bin.tar.gz\u3002\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/apache-hive-2.1.1-bin.tar.gz\nsudo mv DL\u3057\u305f\u30d1\u30b9/apache-hive-2.1.1-bin.tar.gz /usr/local/lib\ncd /usr/local/lib\nsudo tar zxf apache-hive-2.1.1-bin.tar.gz\nsudo rm -f apache-hive-2.1.1-bin.tar.gz\nsudo ln -s apache-hive-2.1.1-bin hive\n\n# owner\u5909\u66f4\nsudo su -\ncd /usr/local/lib\nchown ec2-user hive\nexit\n\n\u74b0\u5883\u5909\u6570HIVE_HOME\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\necho \"export HIVE_HOME=/usr/local/lib/hive\" >> ~/.bashrc\n. ~/.bashrc\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\n/usr/local/lib/hive/bin/hive -H\n\n\nJDBC\nmetastore\u306bmysql\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001\u30c9\u30e9\u30a4\u30d0\u3092\u8a2d\u7f6e\u3057\u307e\u3059\u3002\nhttp://dev.mysql.com/downloads/connector/j/\n\u3053\u3053\u306eTAR Archive\u306e\u307b\u3046\u3092DL\u3002\n\u4eca\u56de\u306fmysql-connector-java-5.1.40.tar.gz\u3067\u3057\u305f\u3002\n\u3053\u308c\u3092\u89e3\u51cd\u3057\u3066hive\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\ntar zxf DL\u3057\u305f\u30d1\u30b9/mysql-connector-java-5.1.40.tar.gz\nsudo mv mysql-connector-java-5.1.40/mysql-connector-java-5.1.40-bin.jar /usr/local/lib/hive/lib\n\n\nmetastore\u7528DB\u3068user\u4f5c\u6210\nmetastore\u306eDB\u3068user\u3092\u4f5c\u308a\u307e\u3059\u3002\u306a\u304a\u3001char set\u3092latin1\u306b\u3057\u306a\u3044\u3068hive\u304cmetastore\u30c7\u30fc\u30bf\u4f5c\u308b\u6642\u306b\n\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u5408\u8a08\u6587\u5b57\u9577\u306e\u5236\u7d04\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\nmysql -uroot -p\n\ncreate database hive_metastore default character set 'latin1';\nuse hive_metastore;\ncreate user 'hive'@'localhost' identified by '\u30d1\u30b9\u30ef\u30fc\u30c9';\ngrant select, insert, update, delete, alter, create, index, references on hive_metastore.* to 'hive'@'localhost';\n\n\nmetastore\u8a2d\u5b9a\nhive-site.xml\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nsudo vi /usr/local/lib/hive/conf/hive-site.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n  <property>\n    <name>javax.jdo.option.ConnectionURL</name>\n    <value><![CDATA[jdbc:mysql://localhost/hive_metastore?autoReconnect=true&useSSL=false]]></value>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionDriverName</name>\n    <value>com.mysql.jdbc.Driver</value>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionUserName</name>\n    <value>hive</value>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionPassword</name>\n    <value>\u30d1\u30b9\u30ef\u30fc\u30c9</value>\n  </property>\n  <property>\n    <name>datanucleus.fixedDatastore</name>\n    <value>false</value>\n  </property>\n  <property>\n    <name>hive.exec.local.scratchdir</name>\n    <value>/tmp/hive</value>\n  </property>\n  <property>\n    <name>hive.downloaded.resources.dir</name>\n    <value>/tmp/hive</value>\n  </property>\n  <property>\n    <name>hive.querylog.location</name>\n    <value>/tmp/hive</value>\n  </property>\n  <property>\n    <name>hive.server2.enable.doAs</name>\n    <value>false</value>\n  </property>\n</configuration>\n\n\n\u521d\u671f\u5316\u3068\u63a5\u7d9a\u78ba\u8a8d\n/usr/local/lib/hive/bin/schematool -dbType mysql -initSchema\n/usr/local/lib/hive/bin/hive\n\n\nORC\u30c6\u30fc\u30d6\u30eb\u30c7\u30fc\u30bf\u4f5c\u6210\n\n\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\n\u63a5\u7d9a\u3067\u304d\u305f\u3089\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u4f5c\u308a\u307e\u3059\u3002\n2017/01/01\u304b\u308903\u307e\u3067\u3068\u898b\u7acb\u3066\u3066\n10000,1,AAA\n10001,2,BBB\n\n20000,3,CCC\n20001,4,DDD\n\n30000,5,EEE\n30001,6,FFF\n\n\u3053\u3093\u306a\u611f\u3058\u306b3\u30d5\u30a1\u30a4\u30eb\u4f5c\u3063\u3066s3\u3078\u914d\u7f6e\u3002\n\u305d\u306e\u969b\u306e\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\n[[bucket]]/dir/2017/1/1\n[[bucket]]/dir/2017/1/2\n[[bucket]]/dir/2017/1/3\n\u3053\u3093\u306a\u611f\u3058\u3067\u3002\n\n\u751f\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u751f\u6210\n\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u305f\u3089hive\u30c7\u30fc\u30bf\u3092\u4f5c\u308a\u307e\u3059\u3002\n/usr/local/lib/hive/bin/hive\n\n\u3067hive\u63a5\u7d9a\u3057\u305f\u3089\nCREATE DATABASE test_orc;\n\nuse test_orc;\n\nCREATE EXTERNAL TABLE tmp1\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  LOCATION 's3a://[[bucket]]/dir/2017/1/1';\n\nCREATE EXTERNAL TABLE tmp2\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  LOCATION 's3a://[[bucket]]/dir/2017/1/2';\n\nCREATE EXTERNAL TABLE tmp3\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  LOCATION 's3a://[[bucket]]/dir/2017/1/3';\n\n\u8272\u3005\u3084\u308a\u65b9\u306f\u3042\u308a\u307e\u3059\u304c\u3068\u308a\u3042\u3048\u305a\u624b\u3063\u53d6\u308a\u65e9\u304f3\u30c6\u30fc\u30d6\u30eb\u4f5c\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u306a\u304a\u3001\u3053\u306e\u6642\u70b9\u3067\u30af\u30a8\u30ea\u767a\u884c\u3059\u308c\u3070\u3061\u3083\u3093\u3068\u30c7\u30fc\u30bf\u53d6\u308c\u307e\u3059\u3002\n\nORC\u30c6\u30fc\u30d6\u30eb\u751f\u6210\u3068insert\n\u6700\u5f8c\u306bORC\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u3001\u30c7\u30fc\u30bf\u3092\u5165\u308c\u307e\u3059\u3002\nCREATE EXTERNAL TABLE test\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  PARTITIONED BY (ts BIGINT)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  STORED AS ORC\n  LOCATION 's3a://[[bucket]]/orc';\n  tblproperties(\"orc.compress\"=\"zlib\");\n\nINSERT INTO TABLE test PARTITION (ts=10000) SELECT time,id,name FROM tmp1 ORDER BY time;\nINSERT INTO TABLE test PARTITION (ts=20000) SELECT time,id,name FROM tmp1 ORDER BY time;\nINSERT INTO TABLE test PARTITION (ts=30000) SELECT time,id,name FROM tmp1 ORDER BY time;\n\n\u3053\u308c\u3067ORC\u5f62\u5f0f\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u304c\u51fa\u6765\u307e\u3059\u3002\nORDER\u3092\u3064\u3051\u3066\u3044\u308b\u7406\u7531\u306fsmall files problem\u5bfe\u5fdc\u3067\u3059\u3002\n\nThriftMetastore\npresto\u304b\u3089hive metastore\u3092\u89e6\u308b\u3053\u3068\u306b\u306a\u308b\u305f\u3081\u3001hive\u3092\u30e1\u30bf\u30b9\u30c8\u30a2\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\nnohup /usr/local/lib/hive/bin/hive --service metastore &\n\n\npresto-server\nhttps://prestodb.io/docs/current/installation/deployment.html\n\u516c\u5f0f\u8cc7\u6599\u3002\u4e0a\u306e\u307b\u3046\u306bserver\u30d7\u30ed\u30b0\u30e9\u30e0\u304ctar.gz\u5f62\u5f0f\u3067\u30ea\u30f3\u30af\u8cbc\u3089\u308c\u3066\u3044\u308b\u305f\u3081\u4f8b\u306b\u3088\u3063\u3066DL\u3057\u3066\u89e3\u51cd\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fpresto-server-0.161.tar.gz\u3067\u3057\u305f\u3002\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/presto-server-0.161.tar.gz\nsudo mv DL\u3057\u305f\u30d1\u30b9/presto-server-0.161.tar.gz /usr/local/lib\ncd /usr/local/lib\nsudo tar zxf presto-server-0.161.tar.gz\nsudo rm -f presto-server-0.161.tar.gz\nsudo ln -s presto-server-0.161 presto\n\n# owner\u5909\u66f4\nsudo su -\ncd /usr/local/lib\nchown ec2-user presto\nexit\n\n\u3042\u3068\u306f\u516c\u5f0f\u306b\u5f93\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nmkdir -p ~/var/presto/data\ncd /usr/local/lib/presto\nmkdir etc\ncd etc\n\nvi node.properties\nnode.environment=production\nnode.id=ffffffff-ffff-ffff-ffff-ffffffffffff\nnode.data-dir=/home/ec2-user/var/presto/data\n\nvi jvm.config\nEmr\u3092\u4f7f\u7528\u3059\u308b\u3068\u3053\u306e\u8a2d\u5b9a\u306f\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3002\nEmr\u306e\u5834\u5408\u306f-Xmx\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30e2\u30ea\u91cf\u306e\u5927\u4f5390%\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n-server\n-Xmx16G\n-XX:+UseG1GC\n-XX:G1HeapRegionSize=32M\n-XX:+UseGCOverheadLimit\n-XX:+ExplicitGCInvokesConcurrent\n-XX:+HeapDumpOnOutOfMemoryError\n-XX:OnOutOfMemoryError=kill -9 %p\n\nvi config.properties\n\u30d1\u30d6\u30ea\u30c3\u30afDNS\u3067\u3082\u52d5\u4f5c\u306f\u3059\u308b\u306f\u305a\u3067\u3059\u3002\nquery.max-memory-per-node\u306fjvm\u306eXmx\u306e40%\u307e\u3067\u3057\u304b\u8a2d\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002\n\u8a2d\u5b9a\u3059\u308b\u3068\u30b5\u30fc\u30d0\u8d77\u52d5\u6642\u306b\u30a8\u30e9\u30fc\u51fa\u307e\u3059\u3002\ncoordinator=true\nnode-scheduler.include-coordinator=true\nhttp-server.http.port=8889\nquery.max-memory=5GB\nquery.max-memory-per-node=1GB\ndiscovery-server.enabled=true\ndiscovery.uri=http://[[coordinator\u30ce\u30fc\u30c9\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8DNS]]:8889\nquery.queue-config-file=/home/ec2-user/presto-queues.json\n\nvi log.properties\ncom.facebook.presto=INFO\n\n\nquery.queue-config-file\n\u30af\u30a8\u30ea\u306e\u6700\u5927\u540c\u6642\u5b9f\u884c\u6570\u3068\u6700\u5927\u5b9f\u884c\u5f85\u3061\u6570\u3092\u6c7a\u3081\u308b\u8a2d\u5b9a\u5024\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\nhttps://prestodb.io/docs/current/admin/queue.html\n\u516c\u5f0f\u8cc7\u6599\u3002\n{\n  \"queues\": {\n    \"user.${USER}\": {\n      \"maxConcurrent\": 100,\n      \"maxQueued\": 200\n    }\n  },\n  \"rules\": [\n    {\n      \"queues\": [\"user.${USER}\"]\n    }\n  ]\n}\n\n\u3053\u306e\u4f8b\u3067\u3044\u304f\u3068\u3001\u5b9f\u884c\u30e6\u30fc\u30b6\u304c\u8ab0\u3067\u3042\u3063\u3066\u3082\u6700\u5927\u540c\u6642\u5b9f\u884c\u6570\u306f100\u3067\u6700\u5927\u5b9f\u884c\u5f85\u3061\u6570\u306f200\u3067\u3059\u3002\n\nHive\u30ab\u30bf\u30ed\u30b0\u306e\u751f\u6210\n\u4eca\u56de\u306fHive\u30c7\u30fc\u30bf\u306b\u89e6\u308a\u305f\u3044\u306e\u3067Hive\u7528\u306ecatalog\u3092\u4f5c\u308a\u307e\u3059\u3002\nmkdir catalog\ncd catalog\n\nvi hive.properties\nhive.s3.use-instance-credentials\u306f\u30c7\u30d5\u30a9\u30eb\u30c8true\u3002\nIAM\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u5834\u5408true\u3060\u3068aws\u306emetadata\u304c\u53d6\u5f97\u3067\u304d\u306a\u3044\u3063\u3066\u3053\u3068\u3067\u30a8\u30e9\u30fc\u51fa\u307e\u3059\u3002\n\u307e\u305f\u3053\u3061\u3089\u3082\u30d1\u30d6\u30ea\u30c3\u30afDNS\u3067\u3082\u52d5\u4f5c\u3059\u308b\u306f\u305a\u3067\u3059\u3002\nconnector.name=hive-cdh5\nhive.metastore.uri=thrift://[[hive-metastore\u304c\u8d77\u52d5\u3057\u3066\u308b\u30b5\u30fc\u30d0/\u4eca\u56de\u306f\u540c\u3058\u30ce\u30fc\u30c9\u306a\u306e\u3067coordinator\u30ce\u30fc\u30c9\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8DNS]]:9083\nhive.config.resources=/usr/local/lib/hadoop/etc/hadoop/core-site.xml,/usr/local/lib/hadoop/etc/hadoop/hdfs-site.xml\nhive.s3.use-instance-credentials=false\nhive.s3.aws-access-key=AWS\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\nhive.s3.aws-secret-key=AWS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\nhive.s3.endpoint=\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n\n\npresto-client\nhttps://prestodb.io/docs/current/installation/cli.html\n\u4f8b\u306b\u3088\u3063\u3066\u516c\u5f0f\u8cc7\u6599\u306b\u5f93\u3063\u3066client\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/presto-cli-0.161-executable.jar\nsudo mv DL\u3057\u305f\u30d1\u30b9/presto-cli-0.161-executable.jar /usr/local/lib/presto/bin/\ncd /usr/local/lib/presto/bin/\nsudo mv presto-cli-0.161-executable.jar presto\nchmod +x presto\n\n\n\u8d77\u52d5\u3068\u30af\u30a8\u30ea\n\u3042\u3068\u306f\u8d77\u52d5\u3057\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u30af\u30a8\u30ea\u6295\u3052\u308b\u3060\u3051\u3067\u3059\u3002\n/usr/local/lib/presto/bin/launcher start\n/usr/local/lib/presto/bin/presto --server localhost:8889 --catalog hive\u3000--schema test_orc\n\n\u3082\u3057\u8d77\u52d5\u6642\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u8a2d\u5b9a\u901a\u308a\u306b\u3084\u3063\u3066\u3044\u308b\u5834\u5408\u306f\n/home/ec2-user/var/presto/data/var/log/server.log\n\n\u306b\u30ed\u30b0\u304c\u51fa\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3081\u3061\u3083\u3081\u3061\u3083\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u4ee5\u4e0a\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u5b8c\u4e86\u3067\u3059\u3002\nworker\u3092\u3061\u3083\u3093\u3068\u7acb\u3066\u305f\u3044\u5834\u5408\u306fhadoop\u306e\u5206\u6563\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u306a\u306e\u3067\u305d\u308c\u306f\u307e\u305f\u3044\u305a\u308c\u3068\u3044\u3046\u3053\u3068\u3067\uff65\uff65\uff65\nEmr\u3067\u306e\u3084\u308a\u65b9\u306f\u9700\u8981\u304c\u3042\u3063\u305f\u3089\u66f8\u304f\u304b\u306a\u3002\n\u3068\u3044\u3063\u3066\u3082\u8aac\u660e\u3059\u308b\u3053\u3068\u307b\u3068\u3093\u3069\u7121\u3044\u3051\u3069\u306d\u3002\u7d30\u304b\u3044\u8a2d\u5b9a\u95a2\u4fc2\u3092\u3069\u3053\u3067\u3069\u3046\u3059\u308b\u306e\u304b\u3063\u3066\u304f\u3089\u3044\u304b\u3002\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u30bf\u30a4\u30c8\u30eb\u901a\u308aEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bpresto\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u3001s3\u306b\u7f6e\u3044\u305f\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb(orc)\u306b\u30af\u30a8\u30ea\u6295\u3052\u308b\u307e\u3067\u3092\u3056\u3056\u3063\u3068\u3002\u306a\u304a\u3001Hadoop\u306f\u64ec\u4f3c\u5206\u6563\u30e2\u30fc\u30c9\u3001presto\u306fcoordinator/worker\u304c\u540c\u3058\u30ce\u30fc\u30c9\u3067\u3059\u3002\n\n## \u4f55\u6545\u304b\n\u4f5c\u696d\u6642\u3001\u9014\u4e2d\u307e\u3067root\u3067\u3084\u3063\u3066\u305f\u306e\u3067\u305d\u308c\u3092\u3053\u3053\u306b\u8a18\u3057\u307e\u3059\u3002\u9014\u4e2d\u304b\u3089ec2-user\u3067\u3084\u308a\u307e\u3057\u305f\u3002\n\n```\nsudo su -\n```\n\n## Hive \u30ed\u30fc\u30ab\u30eb\u30e1\u30bf\u30b9\u30c8\u30a2\u3067\u4f7f\u7528\u3059\u308b\u306e\u3067mysql\u3092\u3044\u308c\u3088\u3046\n\u307d\u3059\u3050\u308c\u3067\u3082\u826f\u3044\u3067\u3059\u304cmysql\u306e\u307b\u3046\u304c\u30e9\u30af\u3067\u3059\u3002\nmysql\u306f\u5927\u4eba\u306e\u4e8b\u60c5\u30675.7\u7cfb\u4f7f\u3044\u305f\u304b\u3063\u305f\u306e\u3067rpm\u3067\n\n```\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-common-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-libs-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-libs-compat-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-client-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-server-5.7.16-1.el6.x86_64.rpm\nyum -y install http://ftp.jaist.ac.jp/pub/mysql/Downloads/MySQL-5.7/mysql-community-devel-5.7.16-1.el6.x86_64.rpm\n\nservice mysqld start\nchkconfig mysqld on\n```\n\n\u3044\u3089\u306a\u3044\u3082\u306e\u3082\u5165\u3063\u3066\u308b\u3057\u306a\u3093\u30671\u500b\u305a\u3064\u3084\u3063\u3066\u3093\u306d\u3093\u3063\u3066\u601d\u3044\u306f\u3057\u307e\u3059\u304c\u4f5c\u696d\u30e1\u30e2\u306b\u3053\u3046\u66f8\u3044\u3066\u3042\u3063\u305f\u306e\u3067\uff65\uff65\uff65\n\u306a\u304a\u3001rpm\u306eurl\u306f\u610f\u5916\u3068\u983b\u7e41\u306b\u5909\u308f\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u56fa\u5b9a\u306e\u89b3\u70b9\u304b\u3089\u3044\u3063\u3066\u3082s3\u304b\u3069\u3063\u304b\u306b\u7f6e\u3044\u3068\u304f\u307b\u3046\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u306d\u3002\n\n## \u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\u3068plugin\u306e\u7121\u52b9\u5316\n\u3068\u308a\u3042\u3048\u305a\u521d\u671f\u30d1\u30b9\u3092\u7372\u5f97\u3057\u307e\u3059\u3002\n\n```\ncat /var/log/mysqld.log | grep \"temporary password\"\n```\n\n\u2191\u3067root@localhost: XXXXXXX \u306eXXXXXXX\u3092\u4f7f\u3063\u3066mysql\u3078\u30ed\u30b0\u30a4\u30f3\u3002\n\u958b\u767a\u7528\u306e\u74b0\u5883\u3060\u3057validate_password\u306f\u95c7\u306b\u846c\u308a\u307e\u3059\u3002\n\n```\nset password for root@localhost=password('passwordPASSWORD@999');\nuse mysql\nuninstall plugin validate_password;\nupdate user set authentication_string=PASSWORD('\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9') where User='root';\nflush privileges;\nexit\n```\n\n## JDK\u306e\u5165\u624b\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3068\u308a\u3042\u3048\u305a1.8\u7cfb\u306a\u3089\u305d\u308c\u3067\u826f\u3044\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\nhttp://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html\n\nLinux x64\u306erpm\u3092DL\u3002\n\n```\nmv DL\u3057\u305f\u30d1\u30b9/jdk-8u111-linux-x64.rpm /usr/local/lib\nyum -y localinstall /usr/local/lib/jdk-8u111-linux-x64.rpm\njava -version\nrm -f /usr/local/lib/jdk-8u111-linux-x64.rpm\n```\n\n#### JAVA_HOME\u306e\u8a2d\u5b9a\n\u3053\u3053\u304b\u3089ec2-user\u3067\u4f5c\u696d\u3057\u307e\u3059\u3002\u5225\u306broot\u306e\u307e\u307e\u3067\u826f\u3044\u4eba\u306f\u305d\u306e\u307e\u307e\u3067\u3002\nuser\u5909\u3048\u305f\u3089\u74b0\u5883\u5909\u6570JAVA_HOME\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\necho \"export JAVA_HOME=/usr/java/jdk1.8.0_111\" >> ~/.bashrc\n. ~/.bashrc\n```\n\n## SSH\u8a2d\u5b9a\nhadoop\u306fssh\u4f7f\u3046\u306e\u3067\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\u7121\u3057\u3067localhost\u306bssh\u63a5\u7d9a\u53ef\u80fd\u306a\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\nssh-keygen\u6642\u306e\u5bfe\u8a71\u306f\u5168\u90e8\u30ce\u30fc\u30eb\u30c3\u30afenter\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\u3064\u3044\u3067\u306b\u30d5\u30a3\u30f3\u30ac\u30fc\u30d7\u30ea\u30f3\u30c8\u3082\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\nssh-keygen\ncat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys\nchmod 600 ~/.ssh/authorized_keys\nssh localhost\nexit\n```\n\n## Hadoop\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n#### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttp://www.apache.org/dyn/closer.cgi/hadoop/common/\n\u306b\u8a18\u8f09\u3055\u308c\u3066\u308b\u9069\u5f53\u306a\u30b5\u30a4\u30c8\u304b\u3089\u76ee\u7684\u306eversion\u306ehadoop\u306eURL\u3092\u5165\u624b\u3057\u307e\u3059\u3002\n\u81ea\u5206\u306f2.7.3\u3067\u3084\u308a\u307e\u3057\u305f\u3002\n\n```\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/hadoop-2.7.3.tar.gz\nsudo mv DL\u3057\u305f\u30d1\u30b9/hadoop-2.7.3.tar.gz /usr/local/lib\ncd /usr/local/lib\nsudo tar zxf hadoop-2.7.3.tar.gz\nsudo rm -f hadoop-2.7.3.tar.gz\nsudo ln -s hadoop-2.7.3 hadoop\n\n# owner\u3092ec2-user\u306b\u3057\u3066\u304a\u304f\nsudo su -\ncd /usr/local/lib\nchown ec2-user hadoop\nexit\n```\n\n#### \u64ec\u4f3c\u5206\u6563\u30e2\u30fc\u30c9HDFS\u8a2d\u5b9a\n\u306a\u304a\u3001\u8907\u6570\u30ce\u30fc\u30c9\u7528\u610f\u3057\u3066\u3061\u3083\u3093\u3068\u5206\u6563\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3082\u3046\u3061\u3087\u3063\u3068\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u305d\u3046\u3067\u3059\u3002\n\u4eca\u56de\u306f\u64ec\u4f3c\u5206\u6563\u3067\u3002\n\n\u307e\u305a\u74b0\u5883\u5909\u6570HAOOP_HOME/HADOOP_CONF_DIR\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\necho \"export HADOOP_HOME=/usr/local/lib/hadoop\" >> ~/.bashrc\necho \"export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop\" >> ~/.bashrc\n. ~/.bashrc\n```\n\nHDFS\u683c\u7d0d\u5148\u3068\u306a\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u30d1\u30b9\u306f\u304a\u597d\u307f\u3067\u826f\u3044\u304b\u3068\u3002\n\n```\nmkdir -p ~/var/hdfs/{name,data}\n```\n\ncore-site.xml/hdfs-site.xml/yarn-site.xml\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\nsudo vi /usr/local/lib/hadoop/etc/hadoop/core-site.xml\n\n```xml\n\n<configuration>\n  <property>\n    <name>fs.defaultFS</name>\n    <value>hdfs://localhost:9000</value>\n  </property>\n</configuration>\n```\n\nsudo vi /usr/local/lib/hadoop/etc/hadoop/hdfs-site.xml\n\n```xml\n\n<configuration>\n  <property>\n    <name>dfs.name.dir</name>\n    <value>/home/ec2-user/var/hdfs/name</value>\n  </property>\n  <property>\n    <name>dfs.data.dir</name>\n    <value>/home/ec2-user/var/hdfs/data</value>\n  </property>\n  <property>\n    <name>dfs.replication</name>\n    <value>1</value>\n  </property>\n</configuration>\n```\n\n\nsudo vi /usr/local/lib/hadoop/etc/hadoop/yarn-site.xml\n(s3\u30a2\u30af\u30bb\u30b9\u306e\u305f\u3081)\n\n```\n<configuration>\n\n<!-- Site specific YARN configuration properties -->\n  <property>\n    <name>fs.s3a.impl</name>\n    <value>org.apache.hadoop.fs.s3a.S3AFileSystem</value>\n  </property>\n  <property>\n    <name>fs.s3a.access.key</name>\n    <value>AWS\u30a2\u30af\u30bb\u30b9\u30ad\u30fc</value>\n  </property>\n  <property>\n    <name>fs.s3a.secret.key</name>\n    <value>AWS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc</value>\n  </property>\n</configuration>\n```\n\nnamenode\u306e\u521d\u671f\u5316\u3092\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001namenode\u306fdatanode\u304c\u3069\u3046\u3044\u3063\u305f\u60c5\u5831\u3092\u8a18\u9332\u3057\u3066\u3044\u308b\u304b\u3092\u7ba1\u7406\u3057\u3066\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n\n```\n/usr/local/lib/hadoop/bin/hadoop namenode -format\n```\n\n\u6700\u5f8c\u306b\u8d77\u52d5\u3068\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n\n```\n/usr/local/lib/hadoop/sbin/start-dfs.sh\n/usr/local/lib/hadoop/bin/hadoop fs -ls /\n```\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u307e\u3060\u751f\u6210\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u308a\u3057\u306a\u3051\u308c\u3070\u554f\u984c\u306a\u3057\u3002\n\n#### S3\u3078\u89e6\u308b\u305f\u3081\u306b\u8ffd\u52a0\u8a2d\u5b9a\norg.apache.hadoop.fs.s3a.S3AFileSystem\u3092\u5229\u7528\u53ef\u80fd\u306b\u3059\u308b\u305f\u3081\u3001Hadoop\u306bclasspath\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u7279\u306b\u3069\u3053\u304b\u304b\u3089\u6301\u3063\u3066\u3053\u306a\u304f\u3066\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u3067jar\u305d\u306e\u3082\u306e\u306fshare/hadoop/tools/lib/\u306b\u3082\u3063\u3066\u307e\u3059\u3002\n\nsudo vi /usr/local/lib/hadoop/etc/hadoop/hadoop-env.sh\n\u30d5\u30a1\u30a4\u30eb\u672b\u5c3e\u306b\n\n```\nexport HADOOP_CLASSPATH=$HADOOP_CLASSPATH:$HADOOP_HOME/share/hadoop/tools/lib/*\n```\n\n\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n/usr/local/lib/hadoop/bin/hadoop fs -ls s3a://[[bucket\u540d]]/\n```\n\nfs.s3.impl\u3082\u8a66\u3057\u307e\u3057\u305f\u304c\u3001-ls\u3067\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u65ad\u5ff5\u3002\n\n## Hive\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhttp://www.apache.org/dyn/closer.cgi/hive/\nhadoop\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u4e0a\u306eURL\u304b\u3089\u76ee\u7684\u306eversion\u306ehive\u306eURL\u3092\u5165\u624b\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fapache-hive-2.1.1-bin.tar.gz\u3002\n\n```\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/apache-hive-2.1.1-bin.tar.gz\nsudo mv DL\u3057\u305f\u30d1\u30b9/apache-hive-2.1.1-bin.tar.gz /usr/local/lib\ncd /usr/local/lib\nsudo tar zxf apache-hive-2.1.1-bin.tar.gz\nsudo rm -f apache-hive-2.1.1-bin.tar.gz\nsudo ln -s apache-hive-2.1.1-bin hive\n\n# owner\u5909\u66f4\nsudo su -\ncd /usr/local/lib\nchown ec2-user hive\nexit\n```\n\n\u74b0\u5883\u5909\u6570HIVE_HOME\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\necho \"export HIVE_HOME=/usr/local/lib/hive\" >> ~/.bashrc\n. ~/.bashrc\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u78ba\u8a8d\n/usr/local/lib/hive/bin/hive -H\n```\n\n#### JDBC\nmetastore\u306bmysql\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u3001\u30c9\u30e9\u30a4\u30d0\u3092\u8a2d\u7f6e\u3057\u307e\u3059\u3002\nhttp://dev.mysql.com/downloads/connector/j/\n\u3053\u3053\u306eTAR Archive\u306e\u307b\u3046\u3092DL\u3002\n\u4eca\u56de\u306fmysql-connector-java-5.1.40.tar.gz\u3067\u3057\u305f\u3002\n\n\u3053\u308c\u3092\u89e3\u51cd\u3057\u3066hive\u3067\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```\ntar zxf DL\u3057\u305f\u30d1\u30b9/mysql-connector-java-5.1.40.tar.gz\nsudo mv mysql-connector-java-5.1.40/mysql-connector-java-5.1.40-bin.jar /usr/local/lib/hive/lib\n```\n\n#### metastore\u7528DB\u3068user\u4f5c\u6210\nmetastore\u306eDB\u3068user\u3092\u4f5c\u308a\u307e\u3059\u3002\u306a\u304a\u3001char set\u3092latin1\u306b\u3057\u306a\u3044\u3068hive\u304cmetastore\u30c7\u30fc\u30bf\u4f5c\u308b\u6642\u306b\n\u30e6\u30cb\u30fc\u30af\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u5408\u8a08\u6587\u5b57\u9577\u306e\u5236\u7d04\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\n```\nmysql -uroot -p\n\ncreate database hive_metastore default character set 'latin1';\nuse hive_metastore;\ncreate user 'hive'@'localhost' identified by '\u30d1\u30b9\u30ef\u30fc\u30c9';\ngrant select, insert, update, delete, alter, create, index, references on hive_metastore.* to 'hive'@'localhost';\n```\n\n#### metastore\u8a2d\u5b9a\nhive-site.xml\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nsudo vi /usr/local/lib/hive/conf/hive-site.xml\n\n```\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n<?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?>\n<configuration>\n  <property>\n    <name>javax.jdo.option.ConnectionURL</name>\n    <value><![CDATA[jdbc:mysql://localhost/hive_metastore?autoReconnect=true&useSSL=false]]></value>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionDriverName</name>\n    <value>com.mysql.jdbc.Driver</value>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionUserName</name>\n    <value>hive</value>\n  </property>\n  <property>\n    <name>javax.jdo.option.ConnectionPassword</name>\n    <value>\u30d1\u30b9\u30ef\u30fc\u30c9</value>\n  </property>\n  <property>\n    <name>datanucleus.fixedDatastore</name>\n    <value>false</value>\n  </property>\n  <property>\n    <name>hive.exec.local.scratchdir</name>\n    <value>/tmp/hive</value>\n  </property>\n  <property>\n    <name>hive.downloaded.resources.dir</name>\n    <value>/tmp/hive</value>\n  </property>\n  <property>\n    <name>hive.querylog.location</name>\n    <value>/tmp/hive</value>\n  </property>\n  <property>\n    <name>hive.server2.enable.doAs</name>\n    <value>false</value>\n  </property>\n</configuration>\n```\n\n#### \u521d\u671f\u5316\u3068\u63a5\u7d9a\u78ba\u8a8d\n\n```\n/usr/local/lib/hive/bin/schematool -dbType mysql -initSchema\n/usr/local/lib/hive/bin/hive\n```\n\n## ORC\u30c6\u30fc\u30d6\u30eb\u30c7\u30fc\u30bf\u4f5c\u6210\n#### \u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\n\u63a5\u7d9a\u3067\u304d\u305f\u3089\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u3092\u4f5c\u308a\u307e\u3059\u3002\n2017/01/01\u304b\u308903\u307e\u3067\u3068\u898b\u7acb\u3066\u3066\n\n```\n10000,1,AAA\n10001,2,BBB\n```\n\n```\n20000,3,CCC\n20001,4,DDD\n```\n\n```\n30000,5,EEE\n30001,6,FFF\n```\n\n\u3053\u3093\u306a\u611f\u3058\u306b3\u30d5\u30a1\u30a4\u30eb\u4f5c\u3063\u3066s3\u3078\u914d\u7f6e\u3002\n\u305d\u306e\u969b\u306e\u30ed\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\n[[bucket]]/dir/2017/1/1\n[[bucket]]/dir/2017/1/2\n[[bucket]]/dir/2017/1/3\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u3002\n\n#### \u751f\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u751f\u6210\n\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u305f\u3089hive\u30c7\u30fc\u30bf\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```\n/usr/local/lib/hive/bin/hive\n```\n\n\u3067hive\u63a5\u7d9a\u3057\u305f\u3089\n\n```\nCREATE DATABASE test_orc;\n\nuse test_orc;\n\nCREATE EXTERNAL TABLE tmp1\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  LOCATION 's3a://[[bucket]]/dir/2017/1/1';\n\nCREATE EXTERNAL TABLE tmp2\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  LOCATION 's3a://[[bucket]]/dir/2017/1/2';\n\nCREATE EXTERNAL TABLE tmp3\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  LOCATION 's3a://[[bucket]]/dir/2017/1/3';\n```\n\n\u8272\u3005\u3084\u308a\u65b9\u306f\u3042\u308a\u307e\u3059\u304c\u3068\u308a\u3042\u3048\u305a\u624b\u3063\u53d6\u308a\u65e9\u304f3\u30c6\u30fc\u30d6\u30eb\u4f5c\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u306a\u304a\u3001\u3053\u306e\u6642\u70b9\u3067\u30af\u30a8\u30ea\u767a\u884c\u3059\u308c\u3070\u3061\u3083\u3093\u3068\u30c7\u30fc\u30bf\u53d6\u308c\u307e\u3059\u3002\n\n#### ORC\u30c6\u30fc\u30d6\u30eb\u751f\u6210\u3068insert\n\u6700\u5f8c\u306bORC\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u3001\u30c7\u30fc\u30bf\u3092\u5165\u308c\u307e\u3059\u3002\n\n```\nCREATE EXTERNAL TABLE test\n(\n  time BIGINT,\n  id INT,\n  name STRING\n)\n  PARTITIONED BY (ts BIGINT)\n  ROW FORMAT DELIMITED\n  FIELDS TERMINATED BY ','\n  LINES TERMINATED BY '\\n'\n  STORED AS ORC\n  LOCATION 's3a://[[bucket]]/orc';\n  tblproperties(\"orc.compress\"=\"zlib\");\n```\n\n```\nINSERT INTO TABLE test PARTITION (ts=10000) SELECT time,id,name FROM tmp1 ORDER BY time;\nINSERT INTO TABLE test PARTITION (ts=20000) SELECT time,id,name FROM tmp1 ORDER BY time;\nINSERT INTO TABLE test PARTITION (ts=30000) SELECT time,id,name FROM tmp1 ORDER BY time;\n```\n\n\u3053\u308c\u3067ORC\u5f62\u5f0f\u30c7\u30fc\u30bf\u30c6\u30fc\u30d6\u30eb\u304c\u51fa\u6765\u307e\u3059\u3002\nORDER\u3092\u3064\u3051\u3066\u3044\u308b\u7406\u7531\u306fsmall files problem\u5bfe\u5fdc\u3067\u3059\u3002\n\n#### ThriftMetastore\npresto\u304b\u3089hive metastore\u3092\u89e6\u308b\u3053\u3068\u306b\u306a\u308b\u305f\u3081\u3001hive\u3092\u30e1\u30bf\u30b9\u30c8\u30a2\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3055\u305b\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n```\nnohup /usr/local/lib/hive/bin/hive --service metastore &\n```\n\n## presto-server\nhttps://prestodb.io/docs/current/installation/deployment.html\n\n\u516c\u5f0f\u8cc7\u6599\u3002\u4e0a\u306e\u307b\u3046\u306bserver\u30d7\u30ed\u30b0\u30e9\u30e0\u304ctar.gz\u5f62\u5f0f\u3067\u30ea\u30f3\u30af\u8cbc\u3089\u308c\u3066\u3044\u308b\u305f\u3081\u4f8b\u306b\u3088\u3063\u3066DL\u3057\u3066\u89e3\u51cd\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fpresto-server-0.161.tar.gz\u3067\u3057\u305f\u3002\n\n```\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/presto-server-0.161.tar.gz\nsudo mv DL\u3057\u305f\u30d1\u30b9/presto-server-0.161.tar.gz /usr/local/lib\ncd /usr/local/lib\nsudo tar zxf presto-server-0.161.tar.gz\nsudo rm -f presto-server-0.161.tar.gz\nsudo ln -s presto-server-0.161 presto\n\n# owner\u5909\u66f4\nsudo su -\ncd /usr/local/lib\nchown ec2-user presto\nexit\n```\n\n\u3042\u3068\u306f\u516c\u5f0f\u306b\u5f93\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\nmkdir -p ~/var/presto/data\ncd /usr/local/lib/presto\nmkdir etc\ncd etc\n```\n\nvi node.properties\n\n```\nnode.environment=production\nnode.id=ffffffff-ffff-ffff-ffff-ffffffffffff\nnode.data-dir=/home/ec2-user/var/presto/data\n```\n\nvi jvm.config\nEmr\u3092\u4f7f\u7528\u3059\u308b\u3068\u3053\u306e\u8a2d\u5b9a\u306f\u5909\u66f4\u3067\u304d\u307e\u305b\u3093\u3002\nEmr\u306e\u5834\u5408\u306f-Xmx\u306f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30e1\u30e2\u30ea\u91cf\u306e\u5927\u4f5390%\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n```\n-server\n-Xmx16G\n-XX:+UseG1GC\n-XX:G1HeapRegionSize=32M\n-XX:+UseGCOverheadLimit\n-XX:+ExplicitGCInvokesConcurrent\n-XX:+HeapDumpOnOutOfMemoryError\n-XX:OnOutOfMemoryError=kill -9 %p\n```\n\nvi config.properties\n\u30d1\u30d6\u30ea\u30c3\u30afDNS\u3067\u3082\u52d5\u4f5c\u306f\u3059\u308b\u306f\u305a\u3067\u3059\u3002\nquery.max-memory-per-node\u306fjvm\u306eXmx\u306e40%\u307e\u3067\u3057\u304b\u8a2d\u5b9a\u3067\u304d\u307e\u305b\u3093\u3002\n\u8a2d\u5b9a\u3059\u308b\u3068\u30b5\u30fc\u30d0\u8d77\u52d5\u6642\u306b\u30a8\u30e9\u30fc\u51fa\u307e\u3059\u3002\n\n```\ncoordinator=true\nnode-scheduler.include-coordinator=true\nhttp-server.http.port=8889\nquery.max-memory=5GB\nquery.max-memory-per-node=1GB\ndiscovery-server.enabled=true\ndiscovery.uri=http://[[coordinator\u30ce\u30fc\u30c9\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8DNS]]:8889\nquery.queue-config-file=/home/ec2-user/presto-queues.json\n```\n\nvi log.properties\n\n```\ncom.facebook.presto=INFO\n```\n\n#### query.queue-config-file\n\u30af\u30a8\u30ea\u306e\u6700\u5927\u540c\u6642\u5b9f\u884c\u6570\u3068\u6700\u5927\u5b9f\u884c\u5f85\u3061\u6570\u3092\u6c7a\u3081\u308b\u8a2d\u5b9a\u5024\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\nhttps://prestodb.io/docs/current/admin/queue.html\n\u516c\u5f0f\u8cc7\u6599\u3002\n\n```\n{\n  \"queues\": {\n    \"user.${USER}\": {\n      \"maxConcurrent\": 100,\n      \"maxQueued\": 200\n    }\n  },\n  \"rules\": [\n    {\n      \"queues\": [\"user.${USER}\"]\n    }\n  ]\n}\n```\n\n\u3053\u306e\u4f8b\u3067\u3044\u304f\u3068\u3001\u5b9f\u884c\u30e6\u30fc\u30b6\u304c\u8ab0\u3067\u3042\u3063\u3066\u3082\u6700\u5927\u540c\u6642\u5b9f\u884c\u6570\u306f100\u3067\u6700\u5927\u5b9f\u884c\u5f85\u3061\u6570\u306f200\u3067\u3059\u3002\n\n#### Hive\u30ab\u30bf\u30ed\u30b0\u306e\u751f\u6210\n\u4eca\u56de\u306fHive\u30c7\u30fc\u30bf\u306b\u89e6\u308a\u305f\u3044\u306e\u3067Hive\u7528\u306ecatalog\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```\nmkdir catalog\ncd catalog\n```\n\nvi hive.properties\nhive.s3.use-instance-credentials\u306f\u30c7\u30d5\u30a9\u30eb\u30c8true\u3002\nIAM\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u306a\u3044\u5834\u5408true\u3060\u3068aws\u306emetadata\u304c\u53d6\u5f97\u3067\u304d\u306a\u3044\u3063\u3066\u3053\u3068\u3067\u30a8\u30e9\u30fc\u51fa\u307e\u3059\u3002\n\u307e\u305f\u3053\u3061\u3089\u3082\u30d1\u30d6\u30ea\u30c3\u30afDNS\u3067\u3082\u52d5\u4f5c\u3059\u308b\u306f\u305a\u3067\u3059\u3002\n\n```\nconnector.name=hive-cdh5\nhive.metastore.uri=thrift://[[hive-metastore\u304c\u8d77\u52d5\u3057\u3066\u308b\u30b5\u30fc\u30d0/\u4eca\u56de\u306f\u540c\u3058\u30ce\u30fc\u30c9\u306a\u306e\u3067coordinator\u30ce\u30fc\u30c9\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8DNS]]:9083\nhive.config.resources=/usr/local/lib/hadoop/etc/hadoop/core-site.xml,/usr/local/lib/hadoop/etc/hadoop/hdfs-site.xml\nhive.s3.use-instance-credentials=false\nhive.s3.aws-access-key=AWS\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\nhive.s3.aws-secret-key=AWS\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\nhive.s3.endpoint=\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n```\n\n## presto-client\nhttps://prestodb.io/docs/current/installation/cli.html\n\u4f8b\u306b\u3088\u3063\u3066\u516c\u5f0f\u8cc7\u6599\u306b\u5f93\u3063\u3066client\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u307e\u3059\u3002\n\n```\nwget http://[[\u4e0a\u3067\u5165\u624b\u3057\u305fURL]]/presto-cli-0.161-executable.jar\nsudo mv DL\u3057\u305f\u30d1\u30b9/presto-cli-0.161-executable.jar /usr/local/lib/presto/bin/\ncd /usr/local/lib/presto/bin/\nsudo mv presto-cli-0.161-executable.jar presto\nchmod +x presto\n```\n\n## \u8d77\u52d5\u3068\u30af\u30a8\u30ea\n\u3042\u3068\u306f\u8d77\u52d5\u3057\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u30af\u30a8\u30ea\u6295\u3052\u308b\u3060\u3051\u3067\u3059\u3002\n\n```\n/usr/local/lib/presto/bin/launcher start\n/usr/local/lib/presto/bin/presto --server localhost:8889 --catalog hive\u3000--schema test_orc\n```\n\n\u3082\u3057\u8d77\u52d5\u6642\u306b\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u306f\u3001\u3053\u306e\u8a2d\u5b9a\u901a\u308a\u306b\u3084\u3063\u3066\u3044\u308b\u5834\u5408\u306f\n\n```\n/home/ec2-user/var/presto/data/var/log/server.log\n```\n\n\u306b\u30ed\u30b0\u304c\u51fa\u3066\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\u3081\u3061\u3083\u3081\u3061\u3083\u9577\u304f\u306a\u308a\u307e\u3057\u305f\u304c\u4ee5\u4e0a\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u5b8c\u4e86\u3067\u3059\u3002\nworker\u3092\u3061\u3083\u3093\u3068\u7acb\u3066\u305f\u3044\u5834\u5408\u306fhadoop\u306e\u5206\u6563\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u306a\u306e\u3067\u305d\u308c\u306f\u307e\u305f\u3044\u305a\u308c\u3068\u3044\u3046\u3053\u3068\u3067\uff65\uff65\uff65\n", "tags": ["EC2", "S3", "hadoop", "hive", "Presto"]}