{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\n\u524d\u56de\u306e\u300c\u7a74\u6398\u308a\u6cd5\u300d\u306f\u3001\u3069\u3061\u3089\u304b\u3068\u3044\u3046\u3068\u8ff7\u8def\u306e\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3060\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306f\u300c\u4e0d\u601d\u8b70\u306e\u30c0\u30f3\u30b8\u30e7\u30f3\u300d\u306e\u3088\u3046\u306a\u90e8\u5c4b\u304c\u5b58\u5728\u3059\u308b\u30c0\u30f3\u30b8\u30e7\u30f3\u3092\u81ea\u52d5\u751f\u6210\u3059\u308b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u88c5\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\n\u5b9f\u88c5\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\nhttp://2dgames.jp/unity/dggenerator/\n\n\u300c\u3082\u3046\uff11\u56de\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3054\u3068\u306b\u3001\u30c0\u30f3\u30b8\u30e7\u30f3\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\u304b\u3089Unity2D\u3067\u5b9f\u88c5\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u81ea\u7531\u306b\u4f7f\u3063\u3066\u9802\u3044\u3066\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u5b9f\u88c5\u65b9\u6cd5\n\n\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u30d5\u30ed\u30fc\n\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u30d5\u30ed\u30fc\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n1. \u521d\u671f\u5316 (2\u6b21\u5143\u914d\u5217\u4f5c\u6210\u30fb\u533a\u753b\u30ea\u30b9\u30c8\u4f5c\u6210)\n2. \u3059\u3079\u3066\u3092\u58c1\u306b\u3059\u308b\n3. \u30de\u30c3\u30d7\u30b5\u30a4\u30ba\u3067\u6700\u521d\u306e\u533a\u753b\u3092\u4f5c\u308b\n4. \u533a\u753b\u3092\u5206\u5272\u3057\u3066\u3044\u304f\n5. \u533a\u753b\u5185\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n6. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u308b\u901a\u8def\u3092\u4f5c\u308b\n\n\u56f3\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u30c7\u30fc\u30bf\u69cb\u9020\n\u30c7\u30fc\u30bf\u69cb\u9020\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u8a08\u3057\u307e\u3057\u305f\n\n\n\u81ea\u52d5\u751f\u6210\u7ba1\u7406\u30af\u30e9\u30b9 DgGenerator\n2\u6b21\u5143\u914d\u5217 Layer2D\n\u533a\u753b\u60c5\u5831\u7ba1\u7406 : DgDivision\n\n\n\u5916\u5468\u60c5\u5831(\u77e9\u5f62) : Outer(DgRect)\n\u90e8\u5c4b\u60c5\u5831(\u77e9\u5f62) : Room(DgRect)\n\n\n\nDgGenerator\u304c\u3059\u3079\u3066\u306e\u7ba1\u7406\u3092\u3057\u3066\u3044\u3066\u3001\u305d\u308c\u306bLayer2D\u3084\u533a\u753b\u60c5\u5831\u3067\u3042\u308bDgDivision\u304c\u3076\u3089\u4e0b\u304c\u308b\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002DgRect\u306f\u5358\u306a\u308b\u77e9\u5f62\u60c5\u5831\u3092\u4fdd\u6301\u3057\u305f\u30af\u30e9\u30b9\u3067\u3059\u3002\n\n2\u6b21\u5143\u914d\u5217 (Layer2D)\n\u307e\u305a\u306f2\u6b21\u5143\u914d\u5217\u7ba1\u7406\u30af\u30e9\u30b9\u3067\u3042\u308bLayer2D\u3067\u3059\u3002\n\nLayer2D.cs\n\nusing UnityEngine;\nusing System.Collections;\n\n/// 2\u6b21\u5143\u30ec\u30a4\u30e4\u30fc\npublic class Layer2D\n{\n\n    int _width; // \u5e45\n    int _height; // \u9ad8\u3055\n    int _outOfRange = -1; // \u9818\u57df\u5916\u3092\u6307\u5b9a\u3057\u305f\u6642\u306e\u5024\n    int[] _values = null; // \u30de\u30c3\u30d7\u30c7\u30fc\u30bf\n    /// \u5e45\n    public int Width\n    {\n        get { return _width; }\n    }\n    /// \u9ad8\u3055\n    public int Height\n    {\n        get { return _height; }\n    }\n\n    /// <summary>\n    /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    /// </summary>\n    /// <param name=\"width\"></param>\n    /// <param name=\"height\"></param>\n    public Layer2D(int width = 0, int height = 0)\n    {\n        if (width > 0 && height > 0)\n        {\n            Create(width, height);\n        }\n    }\n\n    /// \u4f5c\u6210\n    public void Create(int width, int height)\n    {\n        _width = width;\n        _height = height;\n        _values = new int[Width * Height];\n    }\n\n    /// \u5ea7\u6a19\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u5909\u63db\u3059\u308b\n    public int ToIdx(int x, int y)\n    {\n        return x + (y * Width);\n    }\n\n    /// \u9818\u57df\u5916\u304b\u3069\u3046\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\n    public bool IsOutOfRange(int x, int y)\n    {\n        if (x < 0 || x >= Width) { return true; }\n        if (y < 0 || y >= Height) { return true; }\n\n        // \u9818\u57df\u5185\n        return false;\n    }\n\n    /// <summary>\n    /// \u5024\u306e\u53d6\u5f97\n    /// </summary>\n    /// <param name=\"x\">X\u5ea7\u6a19</param>\n    /// <param name=\"y\">Y\u5ea7\u6a19</param>\n    /// <returns>\u6307\u5b9a\u306e\u5ea7\u6a19\u306e\u5024\uff08\u9818\u57df\u5916\u3092\u6307\u5b9a\u3057\u305f\u3089_outOfRange\u3092\u8fd4\u3059\uff09</returns>\n    public int Get(int x, int y)\n    {\n        if (IsOutOfRange(x, y))\n        {\n            return _outOfRange;\n        }\n\n        return _values[y * Width + x];\n    }\n\n    /// \u5024\u306e\u8a2d\u5b9a\n    // @param x X\u5ea7\u6a19\n    // @param y Y\u5ea7\u6a19\n    // @param v \u8a2d\u5b9a\u3059\u308b\u5024\n    public void Set(int x, int y, int v)\n    {\n        if (IsOutOfRange(x, y))\n        {\n            // \u9818\u57df\u5916\u3092\u6307\u5b9a\u3057\u305f\n            return;\n        }\n\n        _values[y * Width + x] = v;\n    }\n\n    /// <summary>\n    /// \u3059\u3079\u3066\u306e\u30bb\u30eb\u3092\u7279\u5b9a\u306e\u5024\u3067\u57cb\u3081\u308b\n    /// </summary>\n    /// <param name=\"val\">\u57cb\u3081\u308b\u5024</param>\n    public void Fill(int val)\n    {\n        for (int j = 0; j < Height; j++)\n        {\n            for (int i = 0; i < Width; i++)\n            {\n                Set(i, j, val);\n            }\n        }\n    }\n\n    /// <summary>\n    /// \u77e9\u5f62\u9818\u57df\u3092\u6307\u5b9a\u306e\u5024\u3067\u57cb\u3081\u308b\n    /// </summary>\n    /// <param name=\"x\">\u77e9\u5f62\u306e\u5de6\u4e0a(X\u5ea7\u6a19)</param>\n    /// <param name=\"y\">\u77e9\u5f62\u306e\u5de6\u4e0a(Y\u5ea7\u6a19)</param>\n    /// <param name=\"w\">\u77e9\u5f62\u306e\u5e45</param>\n    /// <param name=\"h\">\u77e9\u5f62\u306e\u9ad8\u3055</param>\n    /// <param name=\"val\">\u57cb\u3081\u308b\u5024</param>\n    public void FillRect(int x, int y, int w, int h, int val)\n    {\n        for (int j = 0; j < h; j++)\n        {\n            for (int i = 0; i < w; i++)\n            {\n                int px = x + i;\n                int py = y + j;\n                Set(px, py, val);\n            }\n        }\n    }\n\n    /// <summary>\n    /// \u77e9\u5f62\u9818\u57df\u3092\u6307\u5b9a\u306e\u5024\u3067\u57cb\u3081\u308b\uff084\u70b9\u6307\u5b9a)\n    /// </summary>\n    /// <param name=\"left\">\u5de6</param>\n    /// <param name=\"top\">\u4e0a</param>\n    /// <param name=\"right\">\u53f3</param>\n    /// <param name=\"bottom\">\u4e0b</param>\n    /// <param name=\"val\">\u57cb\u3081\u308b\u5024</param>\n    public void FillRectLTRB(int left, int top, int right, int bottom, int val)\n    {\n        FillRect(left, top, right - left, bottom - top, val);\n    }\n\n    /// \u30c7\u30d0\u30c3\u30b0\u51fa\u529b\n    public void Dump()\n    {\n        Debug.Log(\"[Layer2D] (w,h)=(\" + Width + \",\" + Height + \")\");\n        for (int y = 0; y < Height; y++)\n        {\n            string s = \"\";\n            for (int x = 0; x < Width; x++)\n            {\n                s += Get(x, y) + \",\";\n            }\n            Debug.Log(s);\n        }\n    }\n}\n\n\n\u751f\u306e2\u6b21\u5143\u914d\u5217\u3092\u4f7f\u3063\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u7ba1\u7406\u3092\u697d\u306b\u3059\u308b\u305f\u3081\u3053\u306e\u3088\u3046\u306a\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n\u533a\u753b\u60c5\u5831 / \u77e9\u5f62\u60c5\u5831 (DgDivision / DgRect)\n\u6b21\u306b\u533a\u753b\u60c5\u5831\u3067\u3042\u308bDgDivision\u30af\u30e9\u30b9\u3068\u3001\u77e9\u5f62\u3067\u3042\u308bDgRect\u30af\u30e9\u30b9\u3067\u3059\u3002DgRect\u306f\u5358\u306a\u308b\u77e9\u5f62\u3067\u3059\u3002DgDivision\u306f\u3001DgRect\u3092\u30e1\u30f3\u30d0\u5909\u6570\u306b\u6301\u3064\u30c7\u30fc\u30bf\u30af\u30e9\u30b9\u3067\u3059\u3002\u5916\u5468\uff08\u533a\u753b\uff09\u60c5\u5831\u3068\u3001\u305d\u306e\u5185\u90e8\u306b\u4f5c\u6210\u3059\u308b\u90e8\u5c4b\u3092\u77e9\u5f62\u60c5\u5831\u3068\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u307e\u3059\u3002\n\nDgDivision.cs\nusing UnityEngine;\nusing System.Collections;\n\n/// <summary>\n/// \u30c0\u30f3\u30b8\u30e7\u30f3\u533a\u753b\u60c5\u5831\n/// </summary>\npublic class DgDivision\n{\n    /// <summary>\n    /// \u77e9\u5f62\u7ba1\u7406\n    /// </summary>\n    public class DgRect\n    {\n        public int Left   = 0; // \u5de6\n        public int Top    = 0; // \u4e0a\n        public int Right  = 0; // \u53f3\n        public int Bottom = 0; // \u4e0b\n\n        /// <summary>\n        /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n        /// </summary>\n        public DgRect()\n        {\n            // \u7279\u306b\u4f55\u3082\u3057\u306a\u3044\n        }\n        /// <summary>\n        /// \u5024\u3092\u307e\u3068\u3081\u3066\u8a2d\u5b9a\u3059\u308b\n        /// </summary>\n        /// <param name=\"left\">\u5de6</param>\n        /// <param name=\"top\">\u4e0a</param>\n        /// <param name=\"right\">\u53f3</param>\n        /// <param name=\"bottom\">\u5de6</param>\n        public void Set(int left, int top, int right, int bottom)\n        {\n            Left   = left;\n            Top    = top;\n            Right  = right;\n            Bottom = bottom;\n        }\n        /// <summary>\n        /// \u5e45\n        /// </summary>\n        public int Width\n        {\n            get { return Right - Left; }\n        }\n        /// <summary>\n        /// \u9ad8\u3055\n        /// </summary>\n        public int Height\n        {\n            get { return Bottom - Top; }\n        }\n        /// <summary>\n        /// \u9762\u7a4d (\u5e45 x \u9ad8\u3055)\n        /// </summary>\n        public int Measure\n        {\n            get { return Width * Height; }\n        }\n\n        /// <summary>\n        /// \u77e9\u5f62\u60c5\u5831\u3092\u30b3\u30d4\u30fc\u3059\u308b\n        /// </summary>\n        /// <param name=\"rect\">\u30b3\u30d4\u30fc\u5143\u306e\u77e9\u5f62\u60c5\u5831</param>\n        public void Copy(DgRect rect)\n        {\n            Left   = rect.Left;\n            Top    = rect.Top;\n            Right  = rect.Right;\n            Bottom = rect.Bottom;\n        }\n\n        /// <summary>\n        /// \u30c7\u30d0\u30c3\u30b0\u51fa\u529b\n        /// </summary>\n        public void Dump()\n        {\n            Debug.Log(string.Format(\"<Rect l,t,r,b = {0},{1},{2},{3}> w,h = {4},{5}\",\n                Left, Top, Right, Bottom, Width, Height));\n        }\n    }\n\n    /// <summary>\n    /// \u5916\u5468\u306e\u77e9\u5f62\u60c5\u5831\n    /// </summary>\n    public DgRect Outer;\n    /// <summary>\n    /// \u533a\u753b\u5185\u306b\u4f5c\u3063\u305f\u30eb\u30fc\u30e0\u60c5\u5831\n    /// </summary>\n    public DgRect Room;\n\n    /// <summary>\n    /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    /// </summary>\n    public DgDivision()\n    {\n        Outer = new DgRect();\n        Room = new DgRect();\n    }\n    /// <summary>\n    /// \u30c7\u30d0\u30c3\u30b0\u51fa\u529b\n    /// </summary>\n    public void Dump()\n    {\n        Outer.Dump();\n        Room.Dump();\n    }\n}\n\n\n\n\u30c0\u30f3\u30b8\u30e7\u30f3\u751f\u6210 (DgGenerator)\n\u6700\u5f8c\u306b\u30c0\u30f3\u30b8\u30e7\u30f3\u751f\u6210\u30af\u30e9\u30b9\u3067\u3059\u3002\n\nDgGenerator.cs\n\nusing UnityEngine;\nusing System.Collections;\nusing System.Collections.Generic;\n\n/// <summary>\n/// \u30c0\u30f3\u30b8\u30e7\u30f3\u306e\u81ea\u52d5\u751f\u6210\u30e2\u30b8\u30e5\u30fc\u30eb\n/// </summary>\npublic class DgGenerator : MonoBehaviour\n{\n    /// <summary>\n    /// 2\u6b21\u5143\u914d\u5217\u60c5\u5831\n    /// </summary>\n    Layer2D _layer = null;\n    /// <summary>\n    /// \u533a\u753b\u30ea\u30b9\u30c8\n    /// </summary>\n    List<DgDivision> _divList = null;\n}\n\n\n\u3053\u306e\u30af\u30e9\u30b9\u306f\u3044\u304f\u3064\u304b\u5b9a\u6570\u3092\u6301\u305f\u305b\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u307f\u306b\u7701\u7565\u3057\u3066\u30b3\u30fc\u30c9\u3092\u4e57\u305b\u307e\u3057\u305f\u30022\u6b21\u5143\u914d\u5217\u306eLayer2D\u3092\u6301\u305f\u305b\u3001\u533a\u753b\u60c5\u5831\u3067\u3042\u308bDgDivision\u3092List\u3067\u4fdd\u6301\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u8aac\u660e\n\u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8aac\u660e\u304c\u7d42\u308f\u3063\u305f\u306e\u3067\u3001\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u8aac\u660e\u3067\u3059\u3002\n\u30d5\u30ed\u30fc\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n1. \u521d\u671f\u5316 (2\u6b21\u5143\u914d\u5217\u4f5c\u6210\u30fb\u533a\u753b\u30ea\u30b9\u30c8\u4f5c\u6210)\n2. \u3059\u3079\u3066\u3092\u58c1\u306b\u3059\u308b\n3. \u30de\u30c3\u30d7\u30b5\u30a4\u30ba\u3067\u6700\u521d\u306e\u533a\u753b\u3092\u4f5c\u308b\n4. \u533a\u753b\u3092\u5206\u5272\u3057\u3066\u3044\u304f\n5. \u533a\u753b\u5185\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n6. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u308b\u901a\u8def\u3092\u4f5c\u308b\n\n\u3053\u308c\u3089\u3092\u7d30\u304b\u304f\u8aac\u660e\u3057\u307e\u3059\u3002\n\n1\u301c3. \u306e\u8aac\u660e\nDgGenerator.cs\u306eStart\u95a2\u6570\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nDgGenerator.cs\n\n   void Start()\n    {\n        // \u25a01. \u521d\u671f\u5316\n        // 2\u6b21\u5143\u914d\u5217\u521d\u671f\u5316\n        _layer = new Layer2D(WIDTH, HEIGHT);\n\n        // \u533a\u753b\u30ea\u30b9\u30c8\u4f5c\u6210\n        _divList = new List<DgDivision>();\n\n        // \u25a02. \u3059\u3079\u3066\u3092\u58c1\u306b\u3059\u308b\n        _layer.Fill(CHIP_WALL);\n\n        // \u25a03. \u6700\u521d\u306e\u533a\u753b\u3092\u4f5c\u308b\n        CreateDivision(0, 0, WIDTH - 1, HEIGHT - 1);\n\n        // \u25a04. \u533a\u753b\u3092\u5206\u5272\u3059\u308b\n        // \u5782\u76f4 or \u6c34\u5e73\u5206\u5272\u30d5\u30e9\u30b0\u306e\u6c7a\u5b9a\n        bool bVertical = (Random.Range(0, 2) == 0);\n        SplitDivison(bVertical);\n\n        // \u25a05. \u533a\u753b\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n        CreateRoom();\n\n        // \u25a06. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3050\n        ConnectRooms();\n\n\n1\u30682\u306f\u305d\u306e\u307e\u307e\u3067\u3059\u306d\u30023 (CreateDivision\u95a2\u6570)\u3067\u306f\u533a\u753b\u60c5\u5831\u3092\u4f5c\u6210\u3057\u3001\u30ea\u30b9\u30c8\u306e\u5148\u982d\u306b\u767b\u9332\u3057\u3066\u3044\u307e\u3059\u3002\u5e45\u3068\u9ad8\u3055\u304b\u3089\u300c-1\u300d\u3057\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u3044\u308b\u306e\u306f\u3001\u5b9f\u969b\u306e\u53f3\u3084\u4e0b\u306e\u4f4d\u7f6e\u306f\u300c-1\u300d\u3055\u308c\u305f\u5024\u3068\u306a\u308b\u305f\u3081\u3067\u3059\u3002\n\nDgGenerator.cs\n    void CreateDivision(int left, int top, int right, int bottom)\n    {\n        DgDivision div = new DgDivision();\n        div.Outer.Set(left, top, right, bottom);\n        _divList.Add(div);\n    }\n\n\n\n4. \u533a\u753b\u306e\u5206\u5272\n\u5927\u304d\u306a\u533a\u753b\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u3053\u306e\u533a\u753b\u3092\u5206\u5272\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u5206\u5272\u306f\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u3067\u884c\u3044\u307e\u3059\u3002\n\n\u5206\u5272\u3057\u305f2\u3064\u306e\u533a\u753b\u306e\u3069\u3061\u3089\u304b\u3092\u3055\u3089\u306b\u5206\u5272\u3059\u308b\n\u6c34\u5e73\u65b9\u5411\u30fb\u5782\u76f4\u65b9\u5411\u306e\u5206\u5272\u3092\u4ea4\u4e92\u306b\u884c\u3046\n\n\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u307e\u305a\u533a\u753b\u3092\u5206\u5272\u3059\u308b\u65b9\u5411\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u3081\u307e\u3059\u3002\u4eca\u56de\u306f\u5782\u76f4\u304b\u3089\u59cb\u3081\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u305d\u306e\u5834\u5408\u306f\u533a\u753b\u306e\u5de6(a)\u3068\u53f3(b)\u306e\u9593\u304b\u3089\u3001\u5206\u5272\u3059\u308b\u30dd\u30a4\u30f3\u30c8(p)\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u3081\u307e\u3059\u3002\u305f\u3060\u3057\u5206\u5272\u306e\u6700\u5c0f\u5358\u4f4d\u3068\u306a\u308b\u90e8\u5c4b\u30b5\u30a4\u30ba\u3084\u4f59\u767d\u306a\u3069\u306e\u5236\u9650\u3092\u8003\u616e\u3057\u307e\u3059\u3002\u3053\u306e\u5236\u9650\u306f\u5f8c\u3005\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u306a\u308b\u300c\u90e8\u5c4b\u300d\u3084\u300c\u901a\u8def\u300d\u306e\u4f5c\u6210\u306b\u5fc5\u8981\u3068\u306a\u308b\u305f\u3081\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3060\u3068\u4ee5\u4e0b\u306e\u90e8\u5206\u3067\u3059\u306d\u3002\n\nDgGenerator.cs\n   // \u25bc\u7e26\u65b9\u5411\u306b\u5206\u5272\u3059\u308b\n   if (CheckDivisionSize(parent.Outer.Height) == false)\n   {\n       // \u7e26\u306e\u9ad8\u3055\u304c\u8db3\u308a\u306a\u3044\n       // \u89aa\u533a\u753b\u3092\u623b\u3057\u3066\u304a\u3057\u307e\u3044\n       _divList.Add(parent);\n       return;\n   }\n\n   // \u5206\u5272\u30dd\u30a4\u30f3\u30c8\u3092\u6c42\u3081\u308b\n   int a = parent.Outer.Top    + (MIN_ROOM + OUTER_MERGIN);\n   int b = parent.Outer.Bottom - (MIN_ROOM + OUTER_MERGIN);\n   // AB\u9593\u306e\u8ddd\u96e2\u3092\u6c42\u3081\u308b\n   int ab = b - a;\n   // \u6700\u5927\u306e\u90e8\u5c4b\u30b5\u30a4\u30ba\u3092\u8d85\u3048\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n   ab = Mathf.Min(ab, MAX_ROOM);\n\n   // \u5206\u5272\u70b9\u3092\u6c7a\u3081\u308b\n   int p = a + Random.Range(0, ab + 1);\n\n   // \u5b50\u533a\u753b\u306b\u60c5\u5831\u3092\u8a2d\u5b9a\n   child.Outer.Set(\n       parent.Outer.Left, p, parent.Outer.Right, parent.Outer.Bottom);\n\n   // \u89aa\u306e\u4e0b\u5074\u3092p\u5730\u70b9\u307e\u3067\u7e2e\u3081\u308b\n   parent.Outer.Bottom = child.Outer.Top;\n\n\n\n\u5206\u5272\u30eb\u30fc\u30eb\u3067\u306f\u300c\u5206\u5272\u3057\u305f2\u3064\u306e\u533a\u753b\u306e\u3069\u3061\u3089\u304b\u3092\u3055\u3089\u306b\u5206\u5272\u3059\u308b\u300d\u3068\u3042\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5206\u5272\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u53f3\u5074\u306e\u533a\u753b\u3092\u5206\u5272\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u307e\u305f\u5206\u5272\u65b9\u5411\u306f\u4ea4\u4e92\u306b\u884c\u3046\u306e\u3067\u3001\u6a2a\u5206\u5272\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u306f\u3001\u5206\u5272\u5bfe\u8c61\u3068\u306a\u308b\u533a\u753b\u3092 divList \u306e\u672b\u5c3e\u306b\u3042\u308b\u8981\u7d20\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u6700\u5f8c\u306b\u5206\u5272\u3057\u305f\u533a\u753b\u3092\u3055\u3089\u306b\u5206\u5272\u3059\u308b\u3001\u3068\u3044\u3046\u52d5\u4f5c\u3068\u306a\u308a\u307e\u3059\u3002\n\nDgGenerator.cs\n    /// <summary>\n    /// \u533a\u753b\u3092\u5206\u5272\u3059\u308b\n    /// </summary>\n    /// <param name=\"bVertical\">\u5782\u76f4\u5206\u5272\u3059\u308b\u304b\u3069\u3046\u304b</param>\n    void SplitDivison(bool bVertical)\n    {\n        // \u672b\u5c3e\u306e\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3057\n        DgDivision parent = _divList[_divList.Count - 1];\n        _divList.Remove(parent);\n\n\n\u305d\u3046\u3057\u3066\u5206\u5272\u3092\u7e70\u308a\u8fd4\u3057\u305f\u7d50\u679c\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u56f3\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u305d\u3057\u3066\u533a\u753b\u30ea\u30b9\u30c8\u306e\u672b\u5c3e\u304c\u5206\u5272\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u3089\u3001\u5206\u5272\u51e6\u7406\u306f\u7d42\u4e86\u3068\u306a\u308a\u307e\u3059\u3002\n\n5. \u533a\u753b\u5185\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n\u90e8\u5c4b\u3092\u4f5c\u308b\u51e6\u7406\u306f\u3001\u533a\u753b\u306e\u30b5\u30a4\u30ba\u304b\u3089\u4f59\u767d\uff08\u901a\u8def\u3092\u3064\u304f\u308b\u305f\u3081\u306e\u30b5\u30a4\u30ba\uff09\u3092\u5f15\u3044\u3066\u3001\u305d\u3053\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u6c7a\u5b9a\u3057\u3066\u3001\u5de6\u4e0a\u3092\u305a\u3089\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\n\nDgGenerator.cs\n     // \u57fa\u6e96\u30b5\u30a4\u30ba\u3092\u6c7a\u3081\u308b\n     int dw = div.Outer.Width - OUTER_MERGIN;\n     int dh = div.Outer.Height - OUTER_MERGIN;\n\n     // \u5927\u304d\u3055\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u3081\u308b\n     int sw = Random.Range(MIN_ROOM, dw);\n     int sh = Random.Range(MIN_ROOM, dh);\n\n     // \u6700\u5927\u30b5\u30a4\u30ba\u3092\u8d85\u3048\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n     sw = Mathf.Min(sw, MAX_ROOM);\n     sh = Mathf.Min(sh, MAX_ROOM);\n\n     // \u7a7a\u304d\u30b5\u30a4\u30ba\u3092\u8a08\u7b97 (\u533a\u753b - \u90e8\u5c4b)\n     int rw = (dw - sw);\n     int rh = (dh - sh);\n\n     // \u90e8\u5c4b\u306e\u5de6\u4e0a\u4f4d\u7f6e\u3092\u6c7a\u3081\u308b\n     int rx = Random.Range(0, rw) + POS_MERGIN;\n     int ry = Random.Range(0, rh) + POS_MERGIN;\n\n     int left   = div.Outer.Left + rx;\n     int right  = left + sw;\n     int top    = div.Outer.Top + ry;\n     int bottom = top + sh;\n\n     // \u90e8\u5c4b\u306e\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\n     div.Room.Set(left, top, right, bottom);\n\n     // \u90e8\u5c4b\u3092\u901a\u8def\u306b\u3059\u308b\n     FillRoom(div.Room);\n\n\n\n6. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u308b\u901a\u8def\u3092\u4f5c\u308b\n\u6700\u5f8c\u306b\u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u307e\u3059\u3002\n\n\u3053\u308c\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u884c\u3044\u307e\u3059\u3002\n1. \u96a3\u63a5\u3059\u308b\u90e8\u5c4b\u3092\u9078\u3076\n2. \u90e8\u5c4b\u304b\u3089\u901a\u8def\u3092\u4f38\u3070\u3059\u5834\u6240\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u3081\u308b\n3. \u305d\u308c\u305e\u308c\u306e\u90e8\u5c4b\u304b\u3089\u3001\u901a\u8def\u3092\u5916\u5468\u306e\u4f4d\u7f6e\u307e\u3067\u4f38\u3070\u3059\n4. \u4f38\u3070\u3057\u305f\u5148\u3092\u5916\u5468\u306b\u305d\u3063\u3066\u63a5\u7d9a\u3059\u308b\u901a\u8def\u3092\u4f5c\u308b\n\n1\u306b\u3064\u3044\u3066\u306f\u3001divList\u306e\u524d\u5f8c\u306f\u96a3\u63a5\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u306a\u306e\u3067divList\u306e\u524d\u5f8c\u3068\u306a\u308b\u533a\u753b\u3092\u9078\u3076\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nDgGenerator.cs\n /// <summary>\n /// \u90e8\u5c4b\u540c\u58eb\u3092\u901a\u8def\u3067\u3064\u306a\u3050\n /// </summary>\n void ConnectRooms()\n {\n    for (int i = 0; i < _divList.Count - 1; i++)\n    {\n        // \u30ea\u30b9\u30c8\u306e\u524d\u5f8c\u306e\u533a\u753b\u306f\u5fc5\u305a\u63a5\u7d9a\u3067\u304d\u308b\n        DgDivision a = _divList[i];\n        DgDivision b = _divList[i + 1];\n\n        // 2\u3064\u306e\u90e8\u5c4b\u3092\u3064\u306a\u3050\u901a\u8def\u3092\u4f5c\u6210\n        CreateRoad(a, b);\n    }\n }\n\n\n\n2\u306f\u305d\u308c\u305e\u308c\u306e\u90e8\u5c4b\u306e\u30b5\u30a4\u30ba\u304b\u3089\u901a\u8def\u3092\u4f38\u3070\u3059\u4f4d\u7f6e\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n\u6c7a\u307e\u3063\u305f\u3089\u3001\u533a\u753b\u306e\u5916\u5468\u307e\u3067\u901a\u8def\u3092\u4f38\u3070\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u5916\u5468\u306b\u305d\u3063\u3066\u901a\u8def\u3092\u63a5\u7d9a\u3059\u308c\u3070\u30012\u3064\u306e\u90e8\u5c4b\u3092\u63a5\u7d9a\u3059\u308b\u901a\u8def\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3059\u3002\n\n\u8ab2\u984c\n\u3053\u308c\u3067\u30c0\u30f3\u30b8\u30e7\u30f3\u306e\u81ea\u52d5\u751f\u6210\u306f\u5b8c\u4e86\u3057\u307e\u3057\u305f\u304c \u901a\u8def\u304c\u4e00\u672c\u9053\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b \u3068\u3044\u3046\u8ab2\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u89e3\u6c7a\u6cd5\u3068\u3057\u3066\u306f\u3001\u5b50\u3060\u3051\u3067\u306a\u304f\u3001\u5b6b\u306e\u533a\u753b\u306b\u3082\u63a5\u7d9a\u3057\u307e\u3059\u3002\u5b6b\u306e\u533a\u753b\u306f\u96a3\u63a5\u3057\u3066\u3044\u308c\u3070\u3001\u5fc5\u305a\u5b50\u306e\u533a\u753b\u3068\u540c\u3058\u65b9\u5411\u304b\u3089\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002\u305d\u3057\u3066\u5b6b\u3078\u63a5\u7d9a\u3059\u308b\u5834\u5408\u306f\u3001\u89aa\u306e\u901a\u8def\u306f\u5f15\u304b\u305a\u306b\u3001\u5b6b\u306e\u533a\u753b\u306e\u307f\u901a\u8def\u3092\u4f5c\u6210\u3059\u308b\u3001\u306a\u3069\u306e\u5de5\u592b\u3092\u3057\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u30fb\u6539\u826f\u7248\n\u4e00\u672c\u9053\u3068\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\n\nhttp://2dgames.jp/unity/dggenerator2/\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3082\u3053\u3061\u3089\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\n\n\u90e8\u5c4b\u3092\u3088\u308a\u591a\u304f\u4f5c\u308b\u65b9\u6cd5\n\u5206\u5272\u3059\u308b\u533a\u753b\u306f\u3001\u5206\u5272\u3057\u305f\u533a\u753b\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u3067\u9078\u3076\u3068\u3057\u307e\u3057\u305f\u304c\u3001\u533a\u753b\u306e\u9762\u7a4d\u3092\u6bd4\u8f03\u3057\u3066\u5927\u304d\u3044\u65b9\u3092\u6b21\u306e\u5206\u5272\u5bfe\u8c61\u3068\u3059\u308b\u3068\u3001\u3088\u308a\u591a\u304f\u306e\u90e8\u5c4b\u304c\u4f5c\u3089\u308c\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u53c2\u8003\n\n\u30c0\u30f3\u30b8\u30e7\u30f3\u30de\u30c3\u30d7\u3092\u751f\u6210\u3059\u308b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u89e3\u8aac\n\u30c0\u30f3\u30b8\u30e7\u30f3\u751f\u6210\u3057\u3066\u307f\u3088\u3046\n\n## \u306f\u3058\u3081\u306b\n\n![thumb.png](https://qiita-image-store.s3.amazonaws.com/0/43772/84421922-0e85-a663-f37e-cb64c578637c.png)\n\n\u524d\u56de\u306e\u300c[\u7a74\u6398\u308a\u6cd5](http://qiita.com/2dgames_jp/items/037dc62afb268759d16d \"\u7a74\u6398\u308a\u6cd5\")\u300d\u306f\u3001\u3069\u3061\u3089\u304b\u3068\u3044\u3046\u3068\u8ff7\u8def\u306e\u751f\u6210\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3060\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u4eca\u56de\u306f\u300c\u4e0d\u601d\u8b70\u306e\u30c0\u30f3\u30b8\u30e7\u30f3\u300d\u306e\u3088\u3046\u306a\u90e8\u5c4b\u304c\u5b58\u5728\u3059\u308b\u30c0\u30f3\u30b8\u30e7\u30f3\u3092\u81ea\u52d5\u751f\u6210\u3059\u308b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u88c5\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n## \u30b5\u30f3\u30d7\u30eb\n\u5b9f\u88c5\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n* http://2dgames.jp/unity/dggenerator/\n\n\u300c\u3082\u3046\uff11\u56de\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3054\u3068\u306b\u3001\u30c0\u30f3\u30b8\u30e7\u30f3\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b8\u304b\u3089Unity2D\u3067\u5b9f\u88c5\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u81ea\u7531\u306b\u4f7f\u3063\u3066\u9802\u3044\u3066\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n## \u5b9f\u88c5\u65b9\u6cd5\n### \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u30d5\u30ed\u30fc\n\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u30d5\u30ed\u30fc\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n1. \u521d\u671f\u5316 (2\u6b21\u5143\u914d\u5217\u4f5c\u6210\u30fb\u533a\u753b\u30ea\u30b9\u30c8\u4f5c\u6210)\n2. \u3059\u3079\u3066\u3092\u58c1\u306b\u3059\u308b\n3. \u30de\u30c3\u30d7\u30b5\u30a4\u30ba\u3067\u6700\u521d\u306e\u533a\u753b\u3092\u4f5c\u308b\n4. \u533a\u753b\u3092\u5206\u5272\u3057\u3066\u3044\u304f\n5. \u533a\u753b\u5185\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n6. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u308b\u901a\u8def\u3092\u4f5c\u308b\n```\n\n\u56f3\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![001.png](https://qiita-image-store.s3.amazonaws.com/0/43772/f43c11c2-add3-9124-39be-9a96906502a4.png)\n\n### \u30c7\u30fc\u30bf\u69cb\u9020\n\u30c7\u30fc\u30bf\u69cb\u9020\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u8a08\u3057\u307e\u3057\u305f\n\n![class.png](https://qiita-image-store.s3.amazonaws.com/0/43772/2437f12d-c4e2-8312-6adc-bcc3821d3c88.png)\n\n* \u81ea\u52d5\u751f\u6210\u7ba1\u7406\u30af\u30e9\u30b9 DgGenerator\n* 2\u6b21\u5143\u914d\u5217 Layer2D\n* \u533a\u753b\u60c5\u5831\u7ba1\u7406 : DgDivision\n    * \u5916\u5468\u60c5\u5831(\u77e9\u5f62) : Outer(DgRect)\n    * \u90e8\u5c4b\u60c5\u5831(\u77e9\u5f62) : Room(DgRect)\n\nDgGenerator\u304c\u3059\u3079\u3066\u306e\u7ba1\u7406\u3092\u3057\u3066\u3044\u3066\u3001\u305d\u308c\u306bLayer2D\u3084\u533a\u753b\u60c5\u5831\u3067\u3042\u308bDgDivision\u304c\u3076\u3089\u4e0b\u304c\u308b\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002DgRect\u306f\u5358\u306a\u308b\u77e9\u5f62\u60c5\u5831\u3092\u4fdd\u6301\u3057\u305f\u30af\u30e9\u30b9\u3067\u3059\u3002\n\n#### 2\u6b21\u5143\u914d\u5217 (Layer2D)\n\u307e\u305a\u306f2\u6b21\u5143\u914d\u5217\u7ba1\u7406\u30af\u30e9\u30b9\u3067\u3042\u308bLayer2D\u3067\u3059\u3002\n\n```csharp:Layer2D.cs\n\nusing UnityEngine;\nusing System.Collections;\n\n/// 2\u6b21\u5143\u30ec\u30a4\u30e4\u30fc\npublic class Layer2D\n{\n\n    int _width; // \u5e45\n    int _height; // \u9ad8\u3055\n    int _outOfRange = -1; // \u9818\u57df\u5916\u3092\u6307\u5b9a\u3057\u305f\u6642\u306e\u5024\n    int[] _values = null; // \u30de\u30c3\u30d7\u30c7\u30fc\u30bf\n    /// \u5e45\n    public int Width\n    {\n        get { return _width; }\n    }\n    /// \u9ad8\u3055\n    public int Height\n    {\n        get { return _height; }\n    }\n\n    /// <summary>\n    /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    /// </summary>\n    /// <param name=\"width\"></param>\n    /// <param name=\"height\"></param>\n    public Layer2D(int width = 0, int height = 0)\n    {\n        if (width > 0 && height > 0)\n        {\n            Create(width, height);\n        }\n    }\n\n    /// \u4f5c\u6210\n    public void Create(int width, int height)\n    {\n        _width = width;\n        _height = height;\n        _values = new int[Width * Height];\n    }\n\n    /// \u5ea7\u6a19\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u5909\u63db\u3059\u308b\n    public int ToIdx(int x, int y)\n    {\n        return x + (y * Width);\n    }\n\n    /// \u9818\u57df\u5916\u304b\u3069\u3046\u304b\u30c1\u30a7\u30c3\u30af\u3059\u308b\n    public bool IsOutOfRange(int x, int y)\n    {\n        if (x < 0 || x >= Width) { return true; }\n        if (y < 0 || y >= Height) { return true; }\n\n        // \u9818\u57df\u5185\n        return false;\n    }\n\n    /// <summary>\n    /// \u5024\u306e\u53d6\u5f97\n    /// </summary>\n    /// <param name=\"x\">X\u5ea7\u6a19</param>\n    /// <param name=\"y\">Y\u5ea7\u6a19</param>\n    /// <returns>\u6307\u5b9a\u306e\u5ea7\u6a19\u306e\u5024\uff08\u9818\u57df\u5916\u3092\u6307\u5b9a\u3057\u305f\u3089_outOfRange\u3092\u8fd4\u3059\uff09</returns>\n    public int Get(int x, int y)\n    {\n        if (IsOutOfRange(x, y))\n        {\n            return _outOfRange;\n        }\n\n        return _values[y * Width + x];\n    }\n\n    /// \u5024\u306e\u8a2d\u5b9a\n    // @param x X\u5ea7\u6a19\n    // @param y Y\u5ea7\u6a19\n    // @param v \u8a2d\u5b9a\u3059\u308b\u5024\n    public void Set(int x, int y, int v)\n    {\n        if (IsOutOfRange(x, y))\n        {\n            // \u9818\u57df\u5916\u3092\u6307\u5b9a\u3057\u305f\n            return;\n        }\n\n        _values[y * Width + x] = v;\n    }\n\n    /// <summary>\n    /// \u3059\u3079\u3066\u306e\u30bb\u30eb\u3092\u7279\u5b9a\u306e\u5024\u3067\u57cb\u3081\u308b\n    /// </summary>\n    /// <param name=\"val\">\u57cb\u3081\u308b\u5024</param>\n    public void Fill(int val)\n    {\n        for (int j = 0; j < Height; j++)\n        {\n            for (int i = 0; i < Width; i++)\n            {\n                Set(i, j, val);\n            }\n        }\n    }\n\n    /// <summary>\n    /// \u77e9\u5f62\u9818\u57df\u3092\u6307\u5b9a\u306e\u5024\u3067\u57cb\u3081\u308b\n    /// </summary>\n    /// <param name=\"x\">\u77e9\u5f62\u306e\u5de6\u4e0a(X\u5ea7\u6a19)</param>\n    /// <param name=\"y\">\u77e9\u5f62\u306e\u5de6\u4e0a(Y\u5ea7\u6a19)</param>\n    /// <param name=\"w\">\u77e9\u5f62\u306e\u5e45</param>\n    /// <param name=\"h\">\u77e9\u5f62\u306e\u9ad8\u3055</param>\n    /// <param name=\"val\">\u57cb\u3081\u308b\u5024</param>\n    public void FillRect(int x, int y, int w, int h, int val)\n    {\n        for (int j = 0; j < h; j++)\n        {\n            for (int i = 0; i < w; i++)\n            {\n                int px = x + i;\n                int py = y + j;\n                Set(px, py, val);\n            }\n        }\n    }\n\n    /// <summary>\n    /// \u77e9\u5f62\u9818\u57df\u3092\u6307\u5b9a\u306e\u5024\u3067\u57cb\u3081\u308b\uff084\u70b9\u6307\u5b9a)\n    /// </summary>\n    /// <param name=\"left\">\u5de6</param>\n    /// <param name=\"top\">\u4e0a</param>\n    /// <param name=\"right\">\u53f3</param>\n    /// <param name=\"bottom\">\u4e0b</param>\n    /// <param name=\"val\">\u57cb\u3081\u308b\u5024</param>\n    public void FillRectLTRB(int left, int top, int right, int bottom, int val)\n    {\n        FillRect(left, top, right - left, bottom - top, val);\n    }\n\n    /// \u30c7\u30d0\u30c3\u30b0\u51fa\u529b\n    public void Dump()\n    {\n        Debug.Log(\"[Layer2D] (w,h)=(\" + Width + \",\" + Height + \")\");\n        for (int y = 0; y < Height; y++)\n        {\n            string s = \"\";\n            for (int x = 0; x < Width; x++)\n            {\n                s += Get(x, y) + \",\";\n            }\n            Debug.Log(s);\n        }\n    }\n}\n```\n\n\u751f\u306e2\u6b21\u5143\u914d\u5217\u3092\u4f7f\u3063\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u7ba1\u7406\u3092\u697d\u306b\u3059\u308b\u305f\u3081\u3053\u306e\u3088\u3046\u306a\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\n#### \u533a\u753b\u60c5\u5831 / \u77e9\u5f62\u60c5\u5831 (DgDivision / DgRect)\n\u6b21\u306b\u533a\u753b\u60c5\u5831\u3067\u3042\u308bDgDivision\u30af\u30e9\u30b9\u3068\u3001\u77e9\u5f62\u3067\u3042\u308bDgRect\u30af\u30e9\u30b9\u3067\u3059\u3002DgRect\u306f\u5358\u306a\u308b\u77e9\u5f62\u3067\u3059\u3002DgDivision\u306f\u3001DgRect\u3092\u30e1\u30f3\u30d0\u5909\u6570\u306b\u6301\u3064\u30c7\u30fc\u30bf\u30af\u30e9\u30b9\u3067\u3059\u3002\u5916\u5468\uff08\u533a\u753b\uff09\u60c5\u5831\u3068\u3001\u305d\u306e\u5185\u90e8\u306b\u4f5c\u6210\u3059\u308b\u90e8\u5c4b\u3092\u77e9\u5f62\u60c5\u5831\u3068\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u307e\u3059\u3002\n\n```csharp:DgDivision.cs\nusing UnityEngine;\nusing System.Collections;\n\n/// <summary>\n/// \u30c0\u30f3\u30b8\u30e7\u30f3\u533a\u753b\u60c5\u5831\n/// </summary>\npublic class DgDivision\n{\n    /// <summary>\n    /// \u77e9\u5f62\u7ba1\u7406\n    /// </summary>\n    public class DgRect\n    {\n        public int Left   = 0; // \u5de6\n        public int Top    = 0; // \u4e0a\n        public int Right  = 0; // \u53f3\n        public int Bottom = 0; // \u4e0b\n\n        /// <summary>\n        /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n        /// </summary>\n        public DgRect()\n        {\n            // \u7279\u306b\u4f55\u3082\u3057\u306a\u3044\n        }\n        /// <summary>\n        /// \u5024\u3092\u307e\u3068\u3081\u3066\u8a2d\u5b9a\u3059\u308b\n        /// </summary>\n        /// <param name=\"left\">\u5de6</param>\n        /// <param name=\"top\">\u4e0a</param>\n        /// <param name=\"right\">\u53f3</param>\n        /// <param name=\"bottom\">\u5de6</param>\n        public void Set(int left, int top, int right, int bottom)\n        {\n            Left   = left;\n            Top    = top;\n            Right  = right;\n            Bottom = bottom;\n        }\n        /// <summary>\n        /// \u5e45\n        /// </summary>\n        public int Width\n        {\n            get { return Right - Left; }\n        }\n        /// <summary>\n        /// \u9ad8\u3055\n        /// </summary>\n        public int Height\n        {\n            get { return Bottom - Top; }\n        }\n        /// <summary>\n        /// \u9762\u7a4d (\u5e45 x \u9ad8\u3055)\n        /// </summary>\n        public int Measure\n        {\n            get { return Width * Height; }\n        }\n\n        /// <summary>\n        /// \u77e9\u5f62\u60c5\u5831\u3092\u30b3\u30d4\u30fc\u3059\u308b\n        /// </summary>\n        /// <param name=\"rect\">\u30b3\u30d4\u30fc\u5143\u306e\u77e9\u5f62\u60c5\u5831</param>\n        public void Copy(DgRect rect)\n        {\n            Left   = rect.Left;\n            Top    = rect.Top;\n            Right  = rect.Right;\n            Bottom = rect.Bottom;\n        }\n\n        /// <summary>\n        /// \u30c7\u30d0\u30c3\u30b0\u51fa\u529b\n        /// </summary>\n        public void Dump()\n        {\n            Debug.Log(string.Format(\"<Rect l,t,r,b = {0},{1},{2},{3}> w,h = {4},{5}\",\n                Left, Top, Right, Bottom, Width, Height));\n        }\n    }\n\n    /// <summary>\n    /// \u5916\u5468\u306e\u77e9\u5f62\u60c5\u5831\n    /// </summary>\n    public DgRect Outer;\n    /// <summary>\n    /// \u533a\u753b\u5185\u306b\u4f5c\u3063\u305f\u30eb\u30fc\u30e0\u60c5\u5831\n    /// </summary>\n    public DgRect Room;\n\n    /// <summary>\n    /// \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n    /// </summary>\n    public DgDivision()\n    {\n        Outer = new DgRect();\n        Room = new DgRect();\n    }\n    /// <summary>\n    /// \u30c7\u30d0\u30c3\u30b0\u51fa\u529b\n    /// </summary>\n    public void Dump()\n    {\n        Outer.Dump();\n        Room.Dump();\n    }\n}\n```\n\n#### \u30c0\u30f3\u30b8\u30e7\u30f3\u751f\u6210 (DgGenerator)\n\u6700\u5f8c\u306b\u30c0\u30f3\u30b8\u30e7\u30f3\u751f\u6210\u30af\u30e9\u30b9\u3067\u3059\u3002\n\n```csharp:DgGenerator.cs\n\nusing UnityEngine;\nusing System.Collections;\nusing System.Collections.Generic;\n\n/// <summary>\n/// \u30c0\u30f3\u30b8\u30e7\u30f3\u306e\u81ea\u52d5\u751f\u6210\u30e2\u30b8\u30e5\u30fc\u30eb\n/// </summary>\npublic class DgGenerator : MonoBehaviour\n{\n    /// <summary>\n    /// 2\u6b21\u5143\u914d\u5217\u60c5\u5831\n    /// </summary>\n    Layer2D _layer = null;\n    /// <summary>\n    /// \u533a\u753b\u30ea\u30b9\u30c8\n    /// </summary>\n    List<DgDivision> _divList = null;\n}\n```\n\n\u3053\u306e\u30af\u30e9\u30b9\u306f\u3044\u304f\u3064\u304b\u5b9a\u6570\u3092\u6301\u305f\u305b\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306e\u307f\u306b\u7701\u7565\u3057\u3066\u30b3\u30fc\u30c9\u3092\u4e57\u305b\u307e\u3057\u305f\u30022\u6b21\u5143\u914d\u5217\u306eLayer2D\u3092\u6301\u305f\u305b\u3001\u533a\u753b\u60c5\u5831\u3067\u3042\u308bDgDivision\u3092List\u3067\u4fdd\u6301\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n### \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u8aac\u660e\n\u30c7\u30fc\u30bf\u69cb\u9020\u306e\u8aac\u660e\u304c\u7d42\u308f\u3063\u305f\u306e\u3067\u3001\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u8aac\u660e\u3067\u3059\u3002\n\n\u30d5\u30ed\u30fc\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\n```\n1. \u521d\u671f\u5316 (2\u6b21\u5143\u914d\u5217\u4f5c\u6210\u30fb\u533a\u753b\u30ea\u30b9\u30c8\u4f5c\u6210)\n2. \u3059\u3079\u3066\u3092\u58c1\u306b\u3059\u308b\n3. \u30de\u30c3\u30d7\u30b5\u30a4\u30ba\u3067\u6700\u521d\u306e\u533a\u753b\u3092\u4f5c\u308b\n4. \u533a\u753b\u3092\u5206\u5272\u3057\u3066\u3044\u304f\n5. \u533a\u753b\u5185\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n6. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u308b\u901a\u8def\u3092\u4f5c\u308b\n```\n\n\u3053\u308c\u3089\u3092\u7d30\u304b\u304f\u8aac\u660e\u3057\u307e\u3059\u3002\n\n#### 1\u301c3. \u306e\u8aac\u660e\nDgGenerator.cs\u306eStart\u95a2\u6570\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```csharp:DgGenerator.cs\n\n   void Start()\n    {\n        // \u25a01. \u521d\u671f\u5316\n        // 2\u6b21\u5143\u914d\u5217\u521d\u671f\u5316\n        _layer = new Layer2D(WIDTH, HEIGHT);\n\n        // \u533a\u753b\u30ea\u30b9\u30c8\u4f5c\u6210\n        _divList = new List<DgDivision>();\n\n        // \u25a02. \u3059\u3079\u3066\u3092\u58c1\u306b\u3059\u308b\n        _layer.Fill(CHIP_WALL);\n\n        // \u25a03. \u6700\u521d\u306e\u533a\u753b\u3092\u4f5c\u308b\n        CreateDivision(0, 0, WIDTH - 1, HEIGHT - 1);\n\n        // \u25a04. \u533a\u753b\u3092\u5206\u5272\u3059\u308b\n        // \u5782\u76f4 or \u6c34\u5e73\u5206\u5272\u30d5\u30e9\u30b0\u306e\u6c7a\u5b9a\n        bool bVertical = (Random.Range(0, 2) == 0);\n        SplitDivison(bVertical);\n\n        // \u25a05. \u533a\u753b\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n        CreateRoom();\n\n        // \u25a06. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3050\n        ConnectRooms();\n```\n\n1\u30682\u306f\u305d\u306e\u307e\u307e\u3067\u3059\u306d\u30023 (CreateDivision\u95a2\u6570)\u3067\u306f\u533a\u753b\u60c5\u5831\u3092\u4f5c\u6210\u3057\u3001\u30ea\u30b9\u30c8\u306e\u5148\u982d\u306b\u767b\u9332\u3057\u3066\u3044\u307e\u3059\u3002\u5e45\u3068\u9ad8\u3055\u304b\u3089\u300c-1\u300d\u3057\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3057\u3066\u3044\u308b\u306e\u306f\u3001\u5b9f\u969b\u306e\u53f3\u3084\u4e0b\u306e\u4f4d\u7f6e\u306f\u300c-1\u300d\u3055\u308c\u305f\u5024\u3068\u306a\u308b\u305f\u3081\u3067\u3059\u3002\n\n```csharp:DgGenerator.cs\n    void CreateDivision(int left, int top, int right, int bottom)\n    {\n        DgDivision div = new DgDivision();\n        div.Outer.Set(left, top, right, bottom);\n        _divList.Add(div);\n    }\n```\n\n#### 4. \u533a\u753b\u306e\u5206\u5272\n\u5927\u304d\u306a\u533a\u753b\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u3053\u306e\u533a\u753b\u3092\u5206\u5272\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n![4.png](https://qiita-image-store.s3.amazonaws.com/0/43772/90e42ee0-27a7-290a-6b9b-787868a092b6.png)\n\n\u5206\u5272\u306f\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u3067\u884c\u3044\u307e\u3059\u3002\n\n* \u5206\u5272\u3057\u305f2\u3064\u306e\u533a\u753b\u306e\u3069\u3061\u3089\u304b\u3092\u3055\u3089\u306b\u5206\u5272\u3059\u308b\n* \u6c34\u5e73\u65b9\u5411\u30fb\u5782\u76f4\u65b9\u5411\u306e\u5206\u5272\u3092\u4ea4\u4e92\u306b\u884c\u3046\n\n\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3068\u306a\u308a\u307e\u3059\u3002\n\n![div1.png](https://qiita-image-store.s3.amazonaws.com/0/43772/9fbadc1e-fcfa-df60-b337-ac0e7675b6bd.png)\n\n\u307e\u305a\u533a\u753b\u3092\u5206\u5272\u3059\u308b\u65b9\u5411\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u3081\u307e\u3059\u3002\u4eca\u56de\u306f\u5782\u76f4\u304b\u3089\u59cb\u3081\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u305d\u306e\u5834\u5408\u306f\u533a\u753b\u306e\u5de6(a)\u3068\u53f3(b)\u306e\u9593\u304b\u3089\u3001\u5206\u5272\u3059\u308b\u30dd\u30a4\u30f3\u30c8(p)\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u3081\u307e\u3059\u3002\u305f\u3060\u3057\u5206\u5272\u306e\u6700\u5c0f\u5358\u4f4d\u3068\u306a\u308b\u90e8\u5c4b\u30b5\u30a4\u30ba\u3084\u4f59\u767d\u306a\u3069\u306e\u5236\u9650\u3092\u8003\u616e\u3057\u307e\u3059\u3002\u3053\u306e\u5236\u9650\u306f\u5f8c\u3005\u306e\u30b9\u30c6\u30c3\u30d7\u3068\u306a\u308b\u300c\u90e8\u5c4b\u300d\u3084\u300c\u901a\u8def\u300d\u306e\u4f5c\u6210\u306b\u5fc5\u8981\u3068\u306a\u308b\u305f\u3081\u3067\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3060\u3068\u4ee5\u4e0b\u306e\u90e8\u5206\u3067\u3059\u306d\u3002\n\n```csharp:DgGenerator.cs\n   // \u25bc\u7e26\u65b9\u5411\u306b\u5206\u5272\u3059\u308b\n   if (CheckDivisionSize(parent.Outer.Height) == false)\n   {\n       // \u7e26\u306e\u9ad8\u3055\u304c\u8db3\u308a\u306a\u3044\n       // \u89aa\u533a\u753b\u3092\u623b\u3057\u3066\u304a\u3057\u307e\u3044\n       _divList.Add(parent);\n       return;\n   }\n\n   // \u5206\u5272\u30dd\u30a4\u30f3\u30c8\u3092\u6c42\u3081\u308b\n   int a = parent.Outer.Top    + (MIN_ROOM + OUTER_MERGIN);\n   int b = parent.Outer.Bottom - (MIN_ROOM + OUTER_MERGIN);\n   // AB\u9593\u306e\u8ddd\u96e2\u3092\u6c42\u3081\u308b\n   int ab = b - a;\n   // \u6700\u5927\u306e\u90e8\u5c4b\u30b5\u30a4\u30ba\u3092\u8d85\u3048\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n   ab = Mathf.Min(ab, MAX_ROOM);\n\n   // \u5206\u5272\u70b9\u3092\u6c7a\u3081\u308b\n   int p = a + Random.Range(0, ab + 1);\n\n   // \u5b50\u533a\u753b\u306b\u60c5\u5831\u3092\u8a2d\u5b9a\n   child.Outer.Set(\n       parent.Outer.Left, p, parent.Outer.Right, parent.Outer.Bottom);\n\n   // \u89aa\u306e\u4e0b\u5074\u3092p\u5730\u70b9\u307e\u3067\u7e2e\u3081\u308b\n   parent.Outer.Bottom = child.Outer.Top;\n\n```\n\n\u5206\u5272\u30eb\u30fc\u30eb\u3067\u306f\u300c\u5206\u5272\u3057\u305f2\u3064\u306e\u533a\u753b\u306e\u3069\u3061\u3089\u304b\u3092\u3055\u3089\u306b\u5206\u5272\u3059\u308b\u300d\u3068\u3042\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5206\u5272\u3057\u307e\u3059\u3002\n\n![div2.png](https://qiita-image-store.s3.amazonaws.com/0/43772/87f149c4-8530-0b7f-70fa-d68afc39f155.png)\n\n\u3053\u3053\u3067\u306f\u53f3\u5074\u306e\u533a\u753b\u3092\u5206\u5272\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\u307e\u305f\u5206\u5272\u65b9\u5411\u306f\u4ea4\u4e92\u306b\u884c\u3046\u306e\u3067\u3001\u6a2a\u5206\u5272\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3067\u306f\u3001\u5206\u5272\u5bfe\u8c61\u3068\u306a\u308b\u533a\u753b\u3092 divList \u306e\u672b\u5c3e\u306b\u3042\u308b\u8981\u7d20\u3068\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u6700\u5f8c\u306b\u5206\u5272\u3057\u305f\u533a\u753b\u3092\u3055\u3089\u306b\u5206\u5272\u3059\u308b\u3001\u3068\u3044\u3046\u52d5\u4f5c\u3068\u306a\u308a\u307e\u3059\u3002\n\n```csharp:DgGenerator.cs\n    /// <summary>\n    /// \u533a\u753b\u3092\u5206\u5272\u3059\u308b\n    /// </summary>\n    /// <param name=\"bVertical\">\u5782\u76f4\u5206\u5272\u3059\u308b\u304b\u3069\u3046\u304b</param>\n    void SplitDivison(bool bVertical)\n    {\n        // \u672b\u5c3e\u306e\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3057\n        DgDivision parent = _divList[_divList.Count - 1];\n        _divList.Remove(parent);\n```\n\n\u305d\u3046\u3057\u3066\u5206\u5272\u3092\u7e70\u308a\u8fd4\u3057\u305f\u7d50\u679c\u304c\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u56f3\u3068\u306a\u308a\u307e\u3059\u3002\n\n![div3.png](https://qiita-image-store.s3.amazonaws.com/0/43772/c2c8b537-bd45-3922-386c-954f3e99f6d5.png)\n\n\u305d\u3057\u3066\u533a\u753b\u30ea\u30b9\u30c8\u306e\u672b\u5c3e\u304c\u5206\u5272\u3067\u304d\u306a\u304f\u306a\u3063\u305f\u3089\u3001\u5206\u5272\u51e6\u7406\u306f\u7d42\u4e86\u3068\u306a\u308a\u307e\u3059\u3002\n\n#### 5. \u533a\u753b\u5185\u306b\u90e8\u5c4b\u3092\u4f5c\u308b\n\u90e8\u5c4b\u3092\u4f5c\u308b\u51e6\u7406\u306f\u3001\u533a\u753b\u306e\u30b5\u30a4\u30ba\u304b\u3089\u4f59\u767d\uff08\u901a\u8def\u3092\u3064\u304f\u308b\u305f\u3081\u306e\u30b5\u30a4\u30ba\uff09\u3092\u5f15\u3044\u3066\u3001\u305d\u3053\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u306e\u30b5\u30a4\u30ba\u3092\u6c7a\u5b9a\u3057\u3066\u3001\u5de6\u4e0a\u3092\u305a\u3089\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\n![room.png](https://qiita-image-store.s3.amazonaws.com/0/43772/b4e41e54-3ae8-64f4-f59e-6e5d4f7b83ac.png)\n\n```csharp:DgGenerator.cs\n     // \u57fa\u6e96\u30b5\u30a4\u30ba\u3092\u6c7a\u3081\u308b\n     int dw = div.Outer.Width - OUTER_MERGIN;\n     int dh = div.Outer.Height - OUTER_MERGIN;\n\n     // \u5927\u304d\u3055\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u6c7a\u3081\u308b\n     int sw = Random.Range(MIN_ROOM, dw);\n     int sh = Random.Range(MIN_ROOM, dh);\n\n     // \u6700\u5927\u30b5\u30a4\u30ba\u3092\u8d85\u3048\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n     sw = Mathf.Min(sw, MAX_ROOM);\n     sh = Mathf.Min(sh, MAX_ROOM);\n\n     // \u7a7a\u304d\u30b5\u30a4\u30ba\u3092\u8a08\u7b97 (\u533a\u753b - \u90e8\u5c4b)\n     int rw = (dw - sw);\n     int rh = (dh - sh);\n     \n     // \u90e8\u5c4b\u306e\u5de6\u4e0a\u4f4d\u7f6e\u3092\u6c7a\u3081\u308b\n     int rx = Random.Range(0, rw) + POS_MERGIN;\n     int ry = Random.Range(0, rh) + POS_MERGIN;\n\n     int left   = div.Outer.Left + rx;\n     int right  = left + sw;\n     int top    = div.Outer.Top + ry;\n     int bottom = top + sh;\n\n     // \u90e8\u5c4b\u306e\u30b5\u30a4\u30ba\u3092\u8a2d\u5b9a\n     div.Room.Set(left, top, right, bottom);\n\n     // \u90e8\u5c4b\u3092\u901a\u8def\u306b\u3059\u308b\n     FillRoom(div.Room);\n```\n\n#### 6. \u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u308b\u901a\u8def\u3092\u4f5c\u308b\n\u6700\u5f8c\u306b\u90e8\u5c4b\u540c\u58eb\u3092\u3064\u306a\u3052\u307e\u3059\u3002\n\n![passage.png](https://qiita-image-store.s3.amazonaws.com/0/43772/a34cbc51-75ee-d998-83ba-e7371c7667ec.png)\n\n\u3053\u308c\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u884c\u3044\u307e\u3059\u3002\n\n```\n1. \u96a3\u63a5\u3059\u308b\u90e8\u5c4b\u3092\u9078\u3076\n2. \u90e8\u5c4b\u304b\u3089\u901a\u8def\u3092\u4f38\u3070\u3059\u5834\u6240\u3092\u30e9\u30f3\u30c0\u30e0\u3067\u6c7a\u3081\u308b\n3. \u305d\u308c\u305e\u308c\u306e\u90e8\u5c4b\u304b\u3089\u3001\u901a\u8def\u3092\u5916\u5468\u306e\u4f4d\u7f6e\u307e\u3067\u4f38\u3070\u3059\n4. \u4f38\u3070\u3057\u305f\u5148\u3092\u5916\u5468\u306b\u305d\u3063\u3066\u63a5\u7d9a\u3059\u308b\u901a\u8def\u3092\u4f5c\u308b\n```\n\n1\u306b\u3064\u3044\u3066\u306f\u3001divList\u306e\u524d\u5f8c\u306f\u96a3\u63a5\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u306a\u306e\u3067divList\u306e\u524d\u5f8c\u3068\u306a\u308b\u533a\u753b\u3092\u9078\u3076\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```csharp:DgGenerator.cs\n /// <summary>\n /// \u90e8\u5c4b\u540c\u58eb\u3092\u901a\u8def\u3067\u3064\u306a\u3050\n /// </summary>\n void ConnectRooms()\n {\n    for (int i = 0; i < _divList.Count - 1; i++)\n    {\n        // \u30ea\u30b9\u30c8\u306e\u524d\u5f8c\u306e\u533a\u753b\u306f\u5fc5\u305a\u63a5\u7d9a\u3067\u304d\u308b\n        DgDivision a = _divList[i];\n        DgDivision b = _divList[i + 1];\n\n        // 2\u3064\u306e\u90e8\u5c4b\u3092\u3064\u306a\u3050\u901a\u8def\u3092\u4f5c\u6210\n        CreateRoad(a, b);\n    }\n }\n\n```\n\n2\u306f\u305d\u308c\u305e\u308c\u306e\u90e8\u5c4b\u306e\u30b5\u30a4\u30ba\u304b\u3089\u901a\u8def\u3092\u4f38\u3070\u3059\u4f4d\u7f6e\u3092\u6c7a\u3081\u307e\u3059\u3002\n\n![path.png](https://qiita-image-store.s3.amazonaws.com/0/43772/f715e55b-7973-2d90-2404-aeedabb94753.png)\n\n\u6c7a\u307e\u3063\u305f\u3089\u3001\u533a\u753b\u306e\u5916\u5468\u307e\u3067\u901a\u8def\u3092\u4f38\u3070\u3057\u307e\u3059\u3002\u305d\u3057\u3066\u5916\u5468\u306b\u305d\u3063\u3066\u901a\u8def\u3092\u63a5\u7d9a\u3059\u308c\u3070\u30012\u3064\u306e\u90e8\u5c4b\u3092\u63a5\u7d9a\u3059\u308b\u901a\u8def\u304c\u3067\u304d\u3042\u304c\u308a\u307e\u3059\u3002\n\n## \u8ab2\u984c\n\u3053\u308c\u3067\u30c0\u30f3\u30b8\u30e7\u30f3\u306e\u81ea\u52d5\u751f\u6210\u306f\u5b8c\u4e86\u3057\u307e\u3057\u305f\u304c **\u901a\u8def\u304c\u4e00\u672c\u9053\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b** \u3068\u3044\u3046\u8ab2\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u89e3\u6c7a\u6cd5\u3068\u3057\u3066\u306f\u3001\u5b50\u3060\u3051\u3067\u306a\u304f\u3001\u5b6b\u306e\u533a\u753b\u306b\u3082\u63a5\u7d9a\u3057\u307e\u3059\u3002\u5b6b\u306e\u533a\u753b\u306f\u96a3\u63a5\u3057\u3066\u3044\u308c\u3070\u3001\u5fc5\u305a\u5b50\u306e\u533a\u753b\u3068\u540c\u3058\u65b9\u5411\u304b\u3089\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002\u305d\u3057\u3066\u5b6b\u3078\u63a5\u7d9a\u3059\u308b\u5834\u5408\u306f\u3001\u89aa\u306e\u901a\u8def\u306f\u5f15\u304b\u305a\u306b\u3001\u5b6b\u306e\u533a\u753b\u306e\u307f\u901a\u8def\u3092\u4f5c\u6210\u3059\u308b\u3001\u306a\u3069\u306e\u5de5\u592b\u3092\u3057\u307e\u3059\u3002\n\n### \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u30fb\u6539\u826f\u7248\n\u4e00\u672c\u9053\u3068\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\n\n* http://2dgames.jp/unity/dggenerator2/\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3082\u3053\u3061\u3089\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\n\n## \u90e8\u5c4b\u3092\u3088\u308a\u591a\u304f\u4f5c\u308b\u65b9\u6cd5\n\u5206\u5272\u3059\u308b\u533a\u753b\u306f\u3001\u5206\u5272\u3057\u305f\u533a\u753b\u304b\u3089\u30e9\u30f3\u30c0\u30e0\u3067\u9078\u3076\u3068\u3057\u307e\u3057\u305f\u304c\u3001\u533a\u753b\u306e\u9762\u7a4d\u3092\u6bd4\u8f03\u3057\u3066\u5927\u304d\u3044\u65b9\u3092\u6b21\u306e\u5206\u5272\u5bfe\u8c61\u3068\u3059\u308b\u3068\u3001\u3088\u308a\u591a\u304f\u306e\u90e8\u5c4b\u304c\u4f5c\u3089\u308c\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u3002\n\n## \u53c2\u8003\n\n* [\u30c0\u30f3\u30b8\u30e7\u30f3\u30de\u30c3\u30d7\u3092\u751f\u6210\u3059\u308b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u89e3\u8aac](http://wise9.jp/archives/6964 \"\u30c0\u30f3\u30b8\u30e7\u30f3\u30de\u30c3\u30d7\u3092\u751f\u6210\u3059\u308b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u89e3\u8aac\")\n* [\u30c0\u30f3\u30b8\u30e7\u30f3\u751f\u6210\u3057\u3066\u307f\u3088\u3046](http://befool.co.jp/blog/ayumegu/unity-study-create-dungeon/ \"\u30c0\u30f3\u30b8\u30e7\u30f3\u751f\u6210\u3057\u3066\u307f\u3088\u3046\")\n", "tags": ["\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0", "Unity4.6.1", "Unity2D4.6.1"]}