{"tags": ["CNA", "\u30cd\u30c3\u30c8\u30ef\u30fc\u30af", "P2P"], "context": " More than 1 year has passed since last update.\n\nModels of Interaction\n\nClient - Server\n\ncentral storage of information in always on server\ndistinction between client which recieves service and server which provides service\nnote that it is possible for a host to act as both a client and as a server in different intractions.\nWeb, e-mail, FTP\n\n\nPeerr to Peer\n\ndistributed storage of information\nno clear distinction between clients and servers. Hosts share typically equal control of processing and data.\nPeers dynamically join and leave.\nBit Torrent. (which is a popular P2P protocol for file distribution)\n\n\n\u30e1\u30ea\u30c3\u30c8\npeer\u306eupload capacity\u3092\u4f7f\u3063\u3066\u3001server\u306e\u8ca0\u62c5\u3092\u6e1b\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002server\u306f\u3042\u308b\u4e00\u5b9a\u306eupload capacity\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305f\u304f\u3055\u3093\u306ehost\u304b\u3089\u30a2\u30af\u30bb\u30b9\u304c\u3042\u308b\u3068\u3001\u4e00\u3064\u306ehost\u3042\u305f\u308a\u306b\u3055\u304b\u308c\u308bcapacity\u306f\u4f4e\u304f\u306a\u308b\u3002\u3067\u3082\u3001peer to peer\u3067host\u306euplaod capacity\u3082\u5229\u7528\u3067\u304d\u308c\u3070\u3001\u305d\u3044\u3064\u3089\u306ecapacity\u3092\u5229\u7528\u3057\u3066\u3001\u307b\u304b\u306ehost\u305f\u3061\u306e\u305f\u3081\u306eupload\u3092\u9032\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u30c7\u30e1\u30ea\u30c3\u30c8\n\u5e38\u306b\u540c\u3058server\u304c\u5b58\u5728\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u3044\u307eserver\u5f79\u3092\u3057\u3066\u3044\u308bpeer\u3082\u597d\u304d\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u629c\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u6d41\u52d5\u7684\u306b\u5909\u308f\u308b\u3002\n\nPure P2P architecture\n\nno always-on server\narbitary end systems directly communicate\npeers are intermittently connected and change IP addresses\nAdvantages\n\n\nDistributes load of serving files.\n\u6c17\u3092\u3064\u3051\u305f\u3044\u306e\u306f\u3001\u5fc5\u305a\u3057\u3082\u3001upload\u30b9\u30d4\u30fc\u30c9\u3092\u901f\u304f\u3059\u308b\u3068\u3044\u3046\u4fdd\u8a3c\u306f\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3002\u57fa\u672c\u7684\u306b\u3001\u666e\u901a\u306ePeer\u3088\u308a\u3082server\u306e\u65b9\u304c\u65e9\u3044upload\u30b9\u30d4\u30fc\u30c9\u3092\u6301\u3063\u3066\u3044\u308b\u305f\u3081\u3001Peer to Peer\u3088\u308a\u3001client-server\u578b\u306e\u65b9\u304c\u901f\u304f\u306a\u308b\u3053\u3068\u3082\u3042\u308a\u5f97\u308b\u3002\u4fdd\u8a3c\u3067\u304d\u308b\u5229\u70b9\u306f\u3001\u8ca0\u62c5\u3092\u5206\u6563\u3067\u304d\u308b\u3068\u3044\u3046\u70b9\u3067\u3042\u308b\u3002\n\n\nChallenges\n\n\nHow to find resources\n\u6d41\u52d5\u7684\u306bserver\u5f79\u3082\u51fa\u5165\u308a\u3059\u308b\u4e2d\u3067\u3001\u6bce\u56de\u63d0\u4f9b\u3057\u3066\u304f\u308c\u308bpeer\u3092\u898b\u3064\u3051\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u3002\nFairness\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u4eba\u304c\u30b7\u30a7\u30a2\u306b\u3082\u53c2\u52a0\u3059\u308b\u5e73\u7b49\u3055\n\n\nexamples:\n\n\nfile distribution (BitTorrent)\nStreaming (KanKan), VoIP(Skype)\n\n\n\n\nFile distribution: client-server vs P2P\n\nQuestion: how much time to distribute file(size F) from one server to N peers? - peer upload/download capacity is limited resource.\n\n\n\nN\u4eba\u306b\u5206\u914d\u3059\u308b\u306e\u306b\u304b\u304b\u308b\u6642\u9593\u306e\u5909\u5316\u306e\u4ed5\u65b9\u306e1\u4f8b\u3002\u6700\u521d\u306e\u4e00\u767a\u76ee\u306f\u3069\u3061\u3089\u3082server\u304b\u3089\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u304b\u304b\u308b\u6642\u9593\u306f\u4e00\u7dd2\u3002N\u304c\u5897\u3048\u308b\u306b\u3064\u308c\u3066\u3001distribution\u306b\u304b\u304b\u308b\u6642\u9593\u304cP2P\u3060\u3068\u53ce\u675f\u3063\u307d\u304f\u6642\u9593\u77ed\u7e2e\u3067\u304d\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\nP2P file distribution: BitTorrent\n\nflie divided into 256Kb chunks\npeers in torrent send/recieve file chunks\n\n\n\u307e\u305a\u521d\u3081\u306b\u3001user\u306ftracker\u306b\u4ecaparticipating\u306apeer\u306e\u4f4d\u7f6e\u3092\u6559\u3048\u3066\u3082\u3089\u3046\u3002\u3053\u308c\u304c\u3001p2p\u306eserving\u3057\u3066\u304f\u308c\u308b\u4eba\u306e\u898b\u3064\u3051\u65b9\u3002\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306echunks\u3092\u3084\u308a\u3068\u308a\u3057\u3066\u3044\u308bpeer\u305f\u3061\u306egroup\u3092torren(\u6fc0\u6d41)\u3068\u547c\u3076\u3002\n\npeer joinig to torrent:\n\nhas no chunks, but will accumulate them over time from other peers\n\nregisters with tracker to get list of peers, connects to subset of peers (\"neighbors\")\n\nwhile downloading, peer uploads chunks to other peers\npeer may change peers with whom it exchanges chunks\n\n\nchurn: peers may come and go\n#### Once peer has entire file, it may (selfishly) leave or (altruistically) remain in torrent\n\n\n\n\n\n\u6700\u521d\u306f\u3001chunk\u5168\u304f\u6301\u3063\u3066\u306a\u3044\u3051\u3069\u3001downloading\u3057\u3066\u3044\u304f\u4e2d\u3067\u305d\u308c\u3092\u84c4\u7a4d\u3057\u306a\u304c\u3089\u3001\u3055\u3089\u306b\u540c\u6642\u306b\u84c4\u7a4d\u3057\u305f\u30b7\u30a7\u30a2\u3057\u3066\u3044\u304f\u3002\u307b\u304b\u306epeers\u304c\u6301\u3063\u3066\u3044\u306a\u3044\u50be\u5411\u306b\u3042\u308bchunk\u3092\u7e4b\u304c\u3063\u3066\u308bpeer\u304b\u3089\u3082\u3089\u3046\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3002\u30ec\u30a2\u306achunk\u6301\u3063\u3066\u308b\u3084\u3064\u304c\u6d88\u3048\u305f\u3089\u56f0\u308b\u304b\u3089\u306d\u3002\n\nBitTorrent: requesting, sending file chunks\n\nrequesting chunks:\n\nat any given time, different peers have different subsets of file chunks\nperiodically, one asks each peer for list of chunks that they have\nthe one requests missing chunks from peers, rarest first\n\n\nsending chunks: tit-for-tat\n\none sends chunks to those four peers currently sending the one's chunks at highest rate\n\n\nother peers are choked by the one (do not recieve chunks from the one)\nre-evaluate top 4 every 10 secs\n\n\nevery 30 secs: randomly select another peer, starts sending chunks\n\n\n\"optimistically unchoke\" this peer\nnewly chosen peer may join top 4\n\n\n\n\n\n\u53c2\u8003\n\nhttp://ja.wikipedia.org/wiki/Peer_to_Peer\nhttp://bb.watch.impress.co.jp/cda/oshiete/9391.html\n\n\n# Models of Interaction\n\n## Client - Server\n\n  - central storage of information in always on server\n  - distinction between client which recieves service and server which provides service\n  - note that it is possible for a host to act as both a client and as a server in different intractions.\n  - Web, e-mail, FTP\n\n## Peerr to Peer\n\n  - distributed storage of information\n  - no clear distinction between clients and servers. Hosts share typically equal control of processing and data.\n  - Peers dynamically join and leave.\n  - Bit Torrent. (which is a popular P2P protocol for file distribution)\n\n\n### \u30e1\u30ea\u30c3\u30c8\npeer\u306eupload capacity\u3092\u4f7f\u3063\u3066\u3001server\u306e\u8ca0\u62c5\u3092\u6e1b\u3089\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002server\u306f\u3042\u308b\u4e00\u5b9a\u306eupload capacity\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305f\u304f\u3055\u3093\u306ehost\u304b\u3089\u30a2\u30af\u30bb\u30b9\u304c\u3042\u308b\u3068\u3001\u4e00\u3064\u306ehost\u3042\u305f\u308a\u306b\u3055\u304b\u308c\u308bcapacity\u306f\u4f4e\u304f\u306a\u308b\u3002\u3067\u3082\u3001peer to peer\u3067host\u306euplaod capacity\u3082\u5229\u7528\u3067\u304d\u308c\u3070\u3001\u305d\u3044\u3064\u3089\u306ecapacity\u3092\u5229\u7528\u3057\u3066\u3001\u307b\u304b\u306ehost\u305f\u3061\u306e\u305f\u3081\u306eupload\u3092\u9032\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n \n### \u30c7\u30e1\u30ea\u30c3\u30c8\n\u5e38\u306b\u540c\u3058server\u304c\u5b58\u5728\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u3044\u307eserver\u5f79\u3092\u3057\u3066\u3044\u308bpeer\u3082\u597d\u304d\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u629c\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u6d41\u52d5\u7684\u306b\u5909\u308f\u308b\u3002\n\n# Pure P2P architecture\n\n- no always-on server\n- arbitary end systems directly communicate\n- peers are intermittently connected and change IP addresses\n- Advantages\n  - Distributes load of serving files.  \n   \u6c17\u3092\u3064\u3051\u305f\u3044\u306e\u306f\u3001\u5fc5\u305a\u3057\u3082\u3001upload\u30b9\u30d4\u30fc\u30c9\u3092\u901f\u304f\u3059\u308b\u3068\u3044\u3046\u4fdd\u8a3c\u306f\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3002\u57fa\u672c\u7684\u306b\u3001\u666e\u901a\u306ePeer\u3088\u308a\u3082server\u306e\u65b9\u304c\u65e9\u3044upload\u30b9\u30d4\u30fc\u30c9\u3092\u6301\u3063\u3066\u3044\u308b\u305f\u3081\u3001Peer to Peer\u3088\u308a\u3001client-server\u578b\u306e\u65b9\u304c\u901f\u304f\u306a\u308b\u3053\u3068\u3082\u3042\u308a\u5f97\u308b\u3002\u4fdd\u8a3c\u3067\u304d\u308b\u5229\u70b9\u306f\u3001\u8ca0\u62c5\u3092\u5206\u6563\u3067\u304d\u308b\u3068\u3044\u3046\u70b9\u3067\u3042\u308b\u3002\n- Challenges\n  - How to find resources  \n   \u6d41\u52d5\u7684\u306bserver\u5f79\u3082\u51fa\u5165\u308a\u3059\u308b\u4e2d\u3067\u3001\u6bce\u56de\u63d0\u4f9b\u3057\u3066\u304f\u308c\u308bpeer\u3092\u898b\u3064\u3051\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u3002\n  - Fairness  \n    \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u4eba\u304c\u30b7\u30a7\u30a2\u306b\u3082\u53c2\u52a0\u3059\u308b\u5e73\u7b49\u3055\n- examples:\n  - file distribution (BitTorrent)\n  - Streaming (KanKan), VoIP(Skype)\n\n# File distribution: client-server vs P2P\n\n### Question: how much time to distribute file(size F) from one server to N peers? - peer upload/download capacity is limited resource.\n\n![Screen Shot 2015-04-20 at 7.11.25 PM.png](https://qiita-image-store.s3.amazonaws.com/0/71621/1f0f9637-4bda-110e-7d04-6765c37257db.png \"Screen Shot 2015-04-20 at 7.11.25 PM.png\")\n\n![new doc 1_1.jpg](https://qiita-image-store.s3.amazonaws.com/0/71621/331105f1-035d-b5f7-b02b-c5d09e55b3c6.jpeg)\n\n![Screen Shot 2015-04-20 at 6.33.10 PM.png](https://qiita-image-store.s3.amazonaws.com/0/71621/8521fb35-1fe5-3b61-195e-559625e7bba1.png \"Screen Shot 2015-04-20 at 6.33.10 PM.png\")\n\nN\u4eba\u306b\u5206\u914d\u3059\u308b\u306e\u306b\u304b\u304b\u308b\u6642\u9593\u306e\u5909\u5316\u306e\u4ed5\u65b9\u306e1\u4f8b\u3002\u6700\u521d\u306e\u4e00\u767a\u76ee\u306f\u3069\u3061\u3089\u3082server\u304b\u3089\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3001\u304b\u304b\u308b\u6642\u9593\u306f\u4e00\u7dd2\u3002N\u304c\u5897\u3048\u308b\u306b\u3064\u308c\u3066\u3001distribution\u306b\u304b\u304b\u308b\u6642\u9593\u304cP2P\u3060\u3068\u53ce\u675f\u3063\u307d\u304f\u6642\u9593\u77ed\u7e2e\u3067\u304d\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n# P2P file distribution: BitTorrent\n\n- flie divided into 256Kb chunks\n- peers in torrent send/recieve file chunks\n\n![Screen Shot 2015-04-20 at 6.35.52 PM.png](https://qiita-image-store.s3.amazonaws.com/0/71621/83fa0545-bd3d-9411-77d6-e641e88b98d4.png \"Screen Shot 2015-04-20 at 6.35.52 PM.png\")\n\n\u307e\u305a\u521d\u3081\u306b\u3001user\u306ftracker\u306b\u4ecaparticipating\u306apeer\u306e\u4f4d\u7f6e\u3092\u6559\u3048\u3066\u3082\u3089\u3046\u3002\u3053\u308c\u304c\u3001p2p\u306eserving\u3057\u3066\u304f\u308c\u308b\u4eba\u306e\u898b\u3064\u3051\u65b9\u3002\u3042\u308b\u30d5\u30a1\u30a4\u30eb\u306echunks\u3092\u3084\u308a\u3068\u308a\u3057\u3066\u3044\u308bpeer\u305f\u3061\u306egroup\u3092torren(\u6fc0\u6d41)\u3068\u547c\u3076\u3002\n\n### peer joinig to torrent:\n  - has no chunks, but will accumulate them over time from other peers\n  - registers with tracker to get list of peers, connects to subset of peers (\"neighbors\")\n     - while downloading, peer uploads chunks to other peers\n     - peer may change peers with whom it exchanges chunks\n        - churn: peers may come and go\n\n - #### Once peer has entire file, it may (selfishly) leave or (altruistically) remain in torrent\n\n\u6700\u521d\u306f\u3001chunk\u5168\u304f\u6301\u3063\u3066\u306a\u3044\u3051\u3069\u3001downloading\u3057\u3066\u3044\u304f\u4e2d\u3067\u305d\u308c\u3092\u84c4\u7a4d\u3057\u306a\u304c\u3089\u3001\u3055\u3089\u306b\u540c\u6642\u306b\u84c4\u7a4d\u3057\u305f\u30b7\u30a7\u30a2\u3057\u3066\u3044\u304f\u3002\u307b\u304b\u306epeers\u304c\u6301\u3063\u3066\u3044\u306a\u3044\u50be\u5411\u306b\u3042\u308bchunk\u3092\u7e4b\u304c\u3063\u3066\u308bpeer\u304b\u3089\u3082\u3089\u3046\u3068\u3044\u3046\u4ed5\u7d44\u307f\u3002\u30ec\u30a2\u306achunk\u6301\u3063\u3066\u308b\u3084\u3064\u304c\u6d88\u3048\u305f\u3089\u56f0\u308b\u304b\u3089\u306d\u3002\n\n## BitTorrent: requesting, sending file chunks\n\n### requesting chunks:\n- at any given time, different peers have different subsets of file chunks\n- periodically, one asks each peer for list of chunks that they have\n- the one requests missing chunks from peers, rarest first\n\n### sending chunks: tit-for-tat\n- one sends chunks to those four peers currently sending the one's chunks at highest rate\n   - other peers are choked by the one (do not recieve chunks from the one)\n   - re-evaluate top 4 every 10 secs\n- every 30 secs: randomly select another peer, starts sending chunks\n   - \"optimistically unchoke\" this peer\n   - newly chosen peer may join top 4\n\n****\n#### \u53c2\u8003\n- http://ja.wikipedia.org/wiki/Peer_to_Peer\n- http://bb.watch.impress.co.jp/cda/oshiete/9391.html\n"}