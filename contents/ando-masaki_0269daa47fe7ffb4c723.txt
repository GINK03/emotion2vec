{"context": " More than 1 year has passed since last update.\n\n\u30db\u30b9\u30c8\u9593\u3067serverspec\u30c6\u30b9\u30c8\u3092\u5171\u6709\u3059\u308b\u65b9\u6cd5\nserverspec-init \u30b3\u30de\u30f3\u30c9\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n|-- Rakefile\n`-- spec\n    |-- spec_helper.rb\n    `-- www.example.jp\n        `-- httpd_spec.rb\n\n\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u306f\u3001\u30db\u30b9\u30c8\u3054\u3068\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u3001\u3053\u306e\u3088\u3046\u306b\u5f79\u5272\u3054\u3068\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n|-- Rakefile\n`-- spec\n    |-- app\n    |   `-- ruby_spec.rb\n    |-- base\n    |   `-- users_and_groups_spec.rb\n    |-- db\n    |   `-- mysql_spec.rb\n    |-- proxy\n    |   `-- nginx_spec.rb\n    `-- spec_helper.rb\n\n\u3053\u306e\u3088\u3046\u306bRakefile\u306b\u30db\u30b9\u30c8\u306e\u95a2\u4fc2\u306b\u5f79\u5272\u3092\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nRakefile\nrequire 'rake'\nrequire 'rspec/core/rake_task'\n\nhosts = [\n  {\n    :name  => 'proxy001.example.jp',\n    :roles => %w( base proxy ),\n  },\n  {\n    :name  => 'proxy002.example.jp',\n    :roles => %w( base proxy ),\n  },\n  {\n    :name  => 'app001.example.jp',\n    :roles => %w( base app ),\n  },\n  {\n    :name  => 'app002.example.jp',\n    :roles => %w( base app ),\n  },\n  {\n    :name  => 'db001.example.jp',\n    :roles => %w( base db ),\n  },\n  {\n    :name  => 'db002.example.jp',\n    :roles => %w( base db ),\n  },\n]\n\nhosts = hosts.map do |host|\n  {\n    :name       => host[:name],\n    :short_name => host[:name].split('.')[0],\n    :roles      => host[:roles],\n  }\nend\n\ndesc \"Run serverspec to all hosts\"\ntask :serverspec => 'serverspec:all'\n\nnamespace :serverspec do\n  task :all => hosts.map {|h| 'serverspec:' + h[:short_name] }\n  hosts.each do |host|\n    desc \"Run serverspec to #{host[:name]}\"\n    RSpec::Core::RakeTask.new(host[:short_name].to_sym) do |t|\n      ENV['TARGET_HOST'] = host[:name]\n      t.pattern = 'spec/{' + host[:roles].join(',') + '}/*_spec.rb'\n    end\n  end\nend\n\n\n\u305d\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306bspec_helper.rb\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nspec_helper.rb\nrequire 'serverspec'\nrequire 'net/ssh'\n\ninclude Serverspec::Helper::Ssh\ninclude Serverspec::Helper::DetectOS\n\nRSpec.configure do |c|\n  c.host  = ENV['TARGET_HOST']\n  options = Net::SSH::Config.for(c.host)\n  user    = options[:user] || Etc.getlogin\n  c.ssh   = Net::SSH.start(c.host, user, options)\n  c.os    = backend.check_os\nend\n\n\n\u5b9f\u884c\u65b9\u6cd5\u3082 rake spec \u3067\u306f\u52d5\u304d\u307e\u305b\u3093\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u4e00\u53f0\u305a\u3064\u5b9f\u884c\u3059\u308b\u5834\u5408\n\n$ rake serverspec:\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\n\u4f8b\uff09\n$ rake serverspec:proxy001\n$ rake serverspec:proxy002\n$ rake serverspec:app001\n$ rake serverspec:app002\n$ rake serverspec:db001\n$ rake serverspec:db002\n\n\n\u5168\u53f0\u5b9f\u884c\u3059\u308b\u5834\u5408\n\n$ rake serverspec:all\n\n\u3053\u306e\u307e\u307e\u3067\u306f\u3069\u306e\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u306b-t(--trace)\u3092\u4ed8\u3051\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3088\u3044\u3002\n$ rake serverspec:all -t\n\n--\n\n\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\nserverspec\u306f\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u64cd\u308b\u5358\u7d14\u306a\u30e1\u30ab\u30cb\u30ba\u30e0\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u3001\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u3001YAML\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\ndb001.example.jp:\n  :roles:\n    - base\n    - db\n  :server_id: 101\ndb002.example.jp:\n  :roles:\n    - base\n    - db\n  :server_id: 102\n\nYAML\u30d5\u30a1\u30a4\u30eb\u306b\u6b21\u306e\u3088\u3046\u306a\u5f79\u5272\u3054\u3068\u306b\u5206\u3051\u3089\u308c\u305f\u30c6\u30b9\u30c8\u3092Rakefile\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nRakefile\nrequire 'rake'\nrequire 'rspec/core/rake_task'\nrequire 'yaml'\n\nproperties = YAML.load_file('properties.yml')\n\ndesc \"Run serverspec to all hosts\"\ntask :serverspec => 'serverspec:all'\n\nnamespace :serverspec do\n  task :all => properties.keys.map {|key| 'serverspec:' + key.split('.')[0] }\n  properties.keys.each do |key|\n    desc \"Run serverspec to #{key}\"\n    RSpec::Core::RakeTask.new(key.split('.')[0].to_sym) do |t|\n      ENV['TARGET_HOST'] = key\n      t.pattern = 'spec/{' + properties[key][:roles].join(',') + '}/*_spec.rb'\n    end\n  end\nend\n\n\nset_property \u3067\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u8a2d\u5b9a\u3092spec_helper.rb\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nspec_helper.rb\nrequire 'serverspec'\nrequire 'pathname'\nrequire 'net/ssh'\nrequire 'yaml'\n\ninclude Serverspec::Helper::Ssh\ninclude Serverspec::Helper::DetectOS\ninclude Serverspec::Helper::Properties\n\nproperties = YAML.load_file('properties.yml')\n\nRSpec.configure do |c|\n  c.host  = ENV['TARGET_HOST']\n  set_property properties[c.host]\n  options = Net::SSH::Config.for(c.host)\n  user    = options[:user] || Etc.getlogin\n  c.ssh   = Net::SSH.start(c.host, user, options)\n  c.os    = backend.check_os\nend\n\n\n\u3053\u306e\u3088\u3046\u306b property\u3068\u3044\u3046\u30cf\u30c3\u30b7\u30e5\u5909\u6570\u306b\u3088\u3063\u3066\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nrequire 'spec_helper'\n\ndescribe file('/etc/my.cnf') do\n  it { should contain \"server-id = #{property[:server_id]}\" }\nend\n\n--\n\nPATH\u74b0\u5883\u5909\u6570\n\u3053\u306e\u3088\u3046\u306bspec_helper.rb\u304b\u3001\u4ed6\u306e\u5834\u6240\u3067PATH\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nRSpec.configure do |c|\n  c.path = '/sbin:/usr/sbin'\n  ...\n\n\u3053\u306e\u5834\u5408\u3001\u30b3\u30de\u30f3\u30c9\u306fPATH=/sbin:/usr/sbin\u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\n\n\u30d6\u30ed\u30c3\u30af\u30b9\u30b3\u30fc\u30d7\u306ePATH\u74b0\u5883\u5909\u6570\n** \u3053\u306e\u6a5f\u80fd\u306f\u5b9f\u9a13\u7684\u306a\u3082\u306e\u3067\u3059\u3002\u5c06\u6765\u7684\u306b\u5909\u66f4\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002 **\n\u3053\u306e\u3088\u3046\u306b\u30d6\u30ed\u30c3\u30af\u30b9\u30b3\u30fc\u30d7\u5185\u3067\u3060\u3051PATH\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescribe package('jekyll') do\n  let(:path) { '/usr/local/rbenv/shims' }\n  it { should be_installed.by('gem') }\nend\n\n\n\u30d6\u30ed\u30c3\u30af\u30b9\u30b3\u30fc\u30d7\u306epre_command\u30d1\u30e9\u30e1\u30fc\u30bf\n** \u3053\u306e\u6a5f\u80fd\u306f\u5b9f\u9a13\u7684\u306a\u3082\u306e\u3067\u3059\u3002\u5c06\u6765\u7684\u306b\u5909\u66f4\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002 **\n\u3053\u306e\u3088\u3046\u306bpre_command\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\ndescribe service('httpd') do\n  let(:pre_command) { 'source ~/.zshrc' }\n  it { should be_running }\nend\n\n\u3053\u306e\u5834\u5408\u3001\u30b3\u30de\u30f3\u30c9\u306f source ~/.zshrc && service httpd status \u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\n## \u30db\u30b9\u30c8\u9593\u3067serverspec\u30c6\u30b9\u30c8\u3092\u5171\u6709\u3059\u308b\u65b9\u6cd5\n\n`serverspec-init` \u30b3\u30de\u30f3\u30c9\u306f\u3001\u3053\u306e\u3088\u3046\u306a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n```\n|-- Rakefile\n`-- spec\n    |-- spec_helper.rb\n    `-- www.example.jp\n        `-- httpd_spec.rb\n```\n\n\u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u306f\u3001\u30db\u30b9\u30c8\u3054\u3068\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u304b\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\u3057\u304b\u3057\u3001\u3053\u306e\u3088\u3046\u306b\u5f79\u5272\u3054\u3068\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n|-- Rakefile\n`-- spec\n    |-- app\n    |   `-- ruby_spec.rb\n    |-- base\n    |   `-- users_and_groups_spec.rb\n    |-- db\n    |   `-- mysql_spec.rb\n    |-- proxy\n    |   `-- nginx_spec.rb\n    `-- spec_helper.rb\n```\n\n\u3053\u306e\u3088\u3046\u306bRakefile\u306b\u30db\u30b9\u30c8\u306e\u95a2\u4fc2\u306b\u5f79\u5272\u3092\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```rb:Rakefile\nrequire 'rake'\nrequire 'rspec/core/rake_task'\n\nhosts = [\n  {\n    :name  => 'proxy001.example.jp',\n    :roles => %w( base proxy ),\n  },\n  {\n    :name  => 'proxy002.example.jp',\n    :roles => %w( base proxy ),\n  },\n  {\n    :name  => 'app001.example.jp',\n    :roles => %w( base app ),\n  },\n  {\n    :name  => 'app002.example.jp',\n    :roles => %w( base app ),\n  },\n  {\n    :name  => 'db001.example.jp',\n    :roles => %w( base db ),\n  },\n  {\n    :name  => 'db002.example.jp',\n    :roles => %w( base db ),\n  },\n]\n\nhosts = hosts.map do |host|\n  {\n    :name       => host[:name],\n    :short_name => host[:name].split('.')[0],\n    :roles      => host[:roles],\n  }\nend\n\ndesc \"Run serverspec to all hosts\"\ntask :serverspec => 'serverspec:all'\n\nnamespace :serverspec do\n  task :all => hosts.map {|h| 'serverspec:' + h[:short_name] }\n  hosts.each do |host|\n    desc \"Run serverspec to #{host[:name]}\"\n    RSpec::Core::RakeTask.new(host[:short_name].to_sym) do |t|\n      ENV['TARGET_HOST'] = host[:name]\n      t.pattern = 'spec/{' + host[:roles].join(',') + '}/*_spec.rb'\n    end\n  end\nend\n```\n\n\u305d\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306bspec_helper.rb\u3092\u5909\u66f4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```rb:spec_helper.rb\nrequire 'serverspec'\nrequire 'net/ssh'\n\ninclude Serverspec::Helper::Ssh\ninclude Serverspec::Helper::DetectOS\n\nRSpec.configure do |c|\n  c.host  = ENV['TARGET_HOST']\n  options = Net::SSH::Config.for(c.host)\n  user    = options[:user] || Etc.getlogin\n  c.ssh   = Net::SSH.start(c.host, user, options)\n  c.os    = backend.check_os\nend\n```\n\n\u5b9f\u884c\u65b9\u6cd5\u3082 `rake spec` \u3067\u306f\u52d5\u304d\u307e\u305b\u3093\u3002\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n* \u4e00\u53f0\u305a\u3064\u5b9f\u884c\u3059\u308b\u5834\u5408\n\n```bash\n$ rake serverspec:\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\n\u4f8b\uff09\n$ rake serverspec:proxy001\n$ rake serverspec:proxy002\n$ rake serverspec:app001\n$ rake serverspec:app002\n$ rake serverspec:db001\n$ rake serverspec:db002\n```\n\n* \u5168\u53f0\u5b9f\u884c\u3059\u308b\u5834\u5408\n\n```bash\n$ rake serverspec:all\n```\n\n\u3053\u306e\u307e\u307e\u3067\u306f\u3069\u306e\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u306b-t(--trace)\u3092\u4ed8\u3051\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3088\u3044\u3002\n\n```bash\n$ rake serverspec:all -t\n```\n--\n\n## \u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u7528\u3059\u308b\u65b9\u6cd5\n\nserverspec\u306f\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u64cd\u308b\u5358\u7d14\u306a\u30e1\u30ab\u30cb\u30ba\u30e0\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u4f8b\u3067\u306f\u3001\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306f\u3001YAML\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n```yaml\ndb001.example.jp:\n  :roles:\n    - base\n    - db\n  :server_id: 101\ndb002.example.jp:\n  :roles:\n    - base\n    - db\n  :server_id: 102\n```\n\nYAML\u30d5\u30a1\u30a4\u30eb\u306b\u6b21\u306e\u3088\u3046\u306a\u5f79\u5272\u3054\u3068\u306b\u5206\u3051\u3089\u308c\u305f\u30c6\u30b9\u30c8\u3092Rakefile\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```rb:Rakefile\nrequire 'rake'\nrequire 'rspec/core/rake_task'\nrequire 'yaml'\n\nproperties = YAML.load_file('properties.yml')\n\ndesc \"Run serverspec to all hosts\"\ntask :serverspec => 'serverspec:all'\n\nnamespace :serverspec do\n  task :all => properties.keys.map {|key| 'serverspec:' + key.split('.')[0] }\n  properties.keys.each do |key|\n    desc \"Run serverspec to #{key}\"\n    RSpec::Core::RakeTask.new(key.split('.')[0].to_sym) do |t|\n      ENV['TARGET_HOST'] = key\n      t.pattern = 'spec/{' + properties[key][:roles].join(',') + '}/*_spec.rb'\n    end\n  end\nend\n```\n\n`set_property` \u3067\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u8a2d\u5b9a\u3092spec_helper.rb\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```rb:spec_helper.rb\nrequire 'serverspec'\nrequire 'pathname'\nrequire 'net/ssh'\nrequire 'yaml'\n\ninclude Serverspec::Helper::Ssh\ninclude Serverspec::Helper::DetectOS\ninclude Serverspec::Helper::Properties\n\nproperties = YAML.load_file('properties.yml')\n\nRSpec.configure do |c|\n  c.host  = ENV['TARGET_HOST']\n  set_property properties[c.host]\n  options = Net::SSH::Config.for(c.host)\n  user    = options[:user] || Etc.getlogin\n  c.ssh   = Net::SSH.start(c.host, user, options)\n  c.os    = backend.check_os\nend\n```\n\n\u3053\u306e\u3088\u3046\u306b `property`\u3068\u3044\u3046\u30cf\u30c3\u30b7\u30e5\u5909\u6570\u306b\u3088\u3063\u3066\u30db\u30b9\u30c8\u56fa\u6709\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```rb\nrequire 'spec_helper'\n\ndescribe file('/etc/my.cnf') do\n  it { should contain \"server-id = #{property[:server_id]}\" }\nend\n```\n\n--\n\n## PATH\u74b0\u5883\u5909\u6570\n\n\u3053\u306e\u3088\u3046\u306bspec_helper.rb\u304b\u3001\u4ed6\u306e\u5834\u6240\u3067PATH\u74b0\u5883\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```rb\nRSpec.configure do |c|\n  c.path = '/sbin:/usr/sbin'\n  ...\n```\n\n\u3053\u306e\u5834\u5408\u3001\u30b3\u30de\u30f3\u30c9\u306f`PATH=/sbin:/usr/sbin`\u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\n\n## \u30d6\u30ed\u30c3\u30af\u30b9\u30b3\u30fc\u30d7\u306ePATH\u74b0\u5883\u5909\u6570\n\n** \u3053\u306e\u6a5f\u80fd\u306f\u5b9f\u9a13\u7684\u306a\u3082\u306e\u3067\u3059\u3002\u5c06\u6765\u7684\u306b\u5909\u66f4\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002 **\n\n\u3053\u306e\u3088\u3046\u306b\u30d6\u30ed\u30c3\u30af\u30b9\u30b3\u30fc\u30d7\u5185\u3067\u3060\u3051PATH\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe package('jekyll') do\n  let(:path) { '/usr/local/rbenv/shims' }\n  it { should be_installed.by('gem') }\nend\n```\n\n## \u30d6\u30ed\u30c3\u30af\u30b9\u30b3\u30fc\u30d7\u306epre_command\u30d1\u30e9\u30e1\u30fc\u30bf\n\n** \u3053\u306e\u6a5f\u80fd\u306f\u5b9f\u9a13\u7684\u306a\u3082\u306e\u3067\u3059\u3002\u5c06\u6765\u7684\u306b\u5909\u66f4\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002 **\n\n\u3053\u306e\u3088\u3046\u306bpre_command\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe service('httpd') do\n  let(:pre_command) { 'source ~/.zshrc' }\n  it { should be_running }\nend\n```\n\u3053\u306e\u5834\u5408\u3001\u30b3\u30de\u30f3\u30c9\u306f `source ~/.zshrc && service httpd status` \u306e\u3088\u3046\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002", "tags": ["Ruby", "serverspec", "bundler", "Gem", "RSpec"]}