{"tags": ["docker", "CoreOS", "vagrant"], "context": " More than 1 year has passed since last update.nsenter \u3092\u7c21\u5358\u306b\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8 docker-enter (docker-attch) \u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u305d\u3057\u3066\u4e01\u5ea6\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f CoreOS Alpha \u306e\u6700\u65b0\u7248 361.0.0 \u306b\u642d\u8f09\u3057\u307e\u3057\u305f\u3002\nyungsang/coreos-alpha\n\u8ffd\u8a18\uff1aboot2docker \u306b\u3082\u642d\u8f09\u3057\u307e\u3057\u305f\u3002\nyungsang/boot2docker\n\ndocker-enter\n#!/bin/sh\n\nprint_usage() {\n  echo \"Usage: $(basename $0) <container id/name> [{command:-$SHELL} [argments...]]\"\n}\n\nID=\"$1\"\nif [ -z \"$ID\" ] ; then\n  print_usage >&2\n  exit 1\nfi\nshift\n\nPID=$(docker inspect --format '{{.State.Pid}}' \"$ID\" 2> /dev/null)\nif [ -z \"$PID\" -o \"$PID\" = \"0\" ] ; then\n  echo \"$ID: no such container is running\" >&2\n  exit 1\nfi\n\necho nsenter --target $PID --mount --uts --ipc --net --pid -- \"$@\"\nsudo nsenter --target $PID --mount --uts --ipc --net --pid -- \"$@\"\n\n\n\u6700\u5f8c\u306e $@ \u306e\u51e6\u7406\u304c\u3061\u3087\u3063\u3068\u6c17\u306b\u306f\u306a\u3063\u3066\u307e\u3059\u3002\n-- $* \u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002\nsh -c \u5143\u3005\u8981\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u3063\u304d\u308a\u3057\u307e\u3057\u305f\u3002\nCf.) https://github.com/YungSang/docker-attach\n$ vagrant init yungsang/coreos-alpha -m\n$ vagrant up\n$ vagrant ssh\n   ______                ____  _____\n  / ____/___  ________  / __ \\/ ___/\n / /   / __ \\/ ___/ _ \\/ / / /\\__ \\\n/ /___/ /_/ / /  /  __/ /_/ /___/ /\n\\____/\\____/_/   \\___/\\____//____/\n(alpha 361.0.0)\ncore@localhost ~ $ docker-enter\nUsage: docker-enter <container id/name> [{command:-/bin/bash} [argments...]]\ncore@localhost ~ $ docker run -d yungsang/busybox nc -p 8080 -l -l -e echo hello world!\ncore@localhost ~ $ docker ps -l\nCONTAINER ID        IMAGE                     COMMAND                CREATED             STATUS              PORTS               NAMES\n1a1f6106a222        yungsang/busybox:latest   nc -p 8080 -l -l -e    27 seconds ago      Up 27 seconds                           dreamy_kowalevski\ncore@localhost ~ $ docker-enter $(docker ps -l -q) sh\nnsenter --target 636 --mount --uts --ipc --net --pid sh\n/ # ps\nPID   USER     COMMAND\n    1 root     nc -p 8080 -l -l -e echo hello world!\n    7 root     sh\n    8 root     ps\n/ # exit\ncore@localhost ~ $ exit\n$ vagrant ssh -c 'docker-enter $(docker ps -l -q) sh'\nnsenter --target 636 --mount --uts --ipc --net --pid sh\n/ # exit\n$ \n\n`nsenter` \u3092\u7c21\u5358\u306b\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8 `docker-enter` (`docker-attch`) \u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\n\u305d\u3057\u3066\u4e01\u5ea6\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f CoreOS Alpha \u306e\u6700\u65b0\u7248 361.0.0 \u306b\u642d\u8f09\u3057\u307e\u3057\u305f\u3002\n[yungsang/coreos-alpha](https://vagrantcloud.com/yungsang/coreos-alpha)\n\n<ins>\u8ffd\u8a18\uff1aboot2docker \u306b\u3082\u642d\u8f09\u3057\u307e\u3057\u305f\u3002</ins>\n[yungsang/boot2docker](https://vagrantcloud.com/yungsang/boot2docker)\n\n```bash:docker-enter\n#!/bin/sh\n\nprint_usage() {\n  echo \"Usage: $(basename $0) <container id/name> [{command:-$SHELL} [argments...]]\"\n}\n\nID=\"$1\"\nif [ -z \"$ID\" ] ; then\n  print_usage >&2\n  exit 1\nfi\nshift\n\nPID=$(docker inspect --format '{{.State.Pid}}' \"$ID\" 2> /dev/null)\nif [ -z \"$PID\" -o \"$PID\" = \"0\" ] ; then\n  echo \"$ID: no such container is running\" >&2\n  exit 1\nfi\n\necho nsenter --target $PID --mount --uts --ipc --net --pid -- \"$@\"\nsudo nsenter --target $PID --mount --uts --ipc --net --pid -- \"$@\"\n```\n\n<del>\u6700\u5f8c\u306e $@ \u306e\u51e6\u7406\u304c\u3061\u3087\u3063\u3068\u6c17\u306b\u306f\u306a\u3063\u3066\u307e\u3059\u3002</del>  \n`-- $*` <ins>\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\u3002</ins>\n`sh -c` <ins>\u5143\u3005\u8981\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u3059\u3063\u304d\u308a\u3057\u307e\u3057\u305f\u3002</ins>\n\nCf.) https://github.com/YungSang/docker-attach\n\n```\n$ vagrant init yungsang/coreos-alpha -m\n$ vagrant up\n$ vagrant ssh\n   ______                ____  _____\n  / ____/___  ________  / __ \\/ ___/\n / /   / __ \\/ ___/ _ \\/ / / /\\__ \\\n/ /___/ /_/ / /  /  __/ /_/ /___/ /\n\\____/\\____/_/   \\___/\\____//____/\n(alpha 361.0.0)\ncore@localhost ~ $ docker-enter\nUsage: docker-enter <container id/name> [{command:-/bin/bash} [argments...]]\ncore@localhost ~ $ docker run -d yungsang/busybox nc -p 8080 -l -l -e echo hello world!\ncore@localhost ~ $ docker ps -l\nCONTAINER ID        IMAGE                     COMMAND                CREATED             STATUS              PORTS               NAMES\n1a1f6106a222        yungsang/busybox:latest   nc -p 8080 -l -l -e    27 seconds ago      Up 27 seconds                           dreamy_kowalevski\ncore@localhost ~ $ docker-enter $(docker ps -l -q) sh\nnsenter --target 636 --mount --uts --ipc --net --pid sh\n/ # ps\nPID   USER     COMMAND\n    1 root     nc -p 8080 -l -l -e echo hello world!\n    7 root     sh\n    8 root     ps\n/ # exit\ncore@localhost ~ $ exit\n$ vagrant ssh -c 'docker-enter $(docker ps -l -q) sh'\nnsenter --target 636 --mount --uts --ipc --net --pid sh\n/ # exit\n$ \n```\n"}