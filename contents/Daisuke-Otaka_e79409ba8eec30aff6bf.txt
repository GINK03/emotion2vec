{"tags": ["guacamole", "AmazonLinux", "RDP"], "context": "\n\n\u306f\u3058\u3081\u306b\nApache Guacamole\u306f\u30d6\u30e9\u30a6\u30b6\u30d9\u30fc\u30b9\u306e\u30ea\u30e2\u30fc\u30c8\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3059\u3002\nHTML5\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30ea\u30e2\u30fc\u30c8\u63a5\u7d9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001Amazon Linux\u3092\u8e0f\u307f\u53f0\u306b\u3057\u3066\u3001\u5225\u306eWindows Server\u306bRDP\u63a5\u7d9a\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u74b0\u5883\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u4f5c\u6210\u3057\u305f\u3070\u3063\u304b\u308a\u306e\u72b6\u614b\u3067\u3059\u3002\nElastic IP\u306f\u5272\u308a\u5f53\u3066\u3066\u3042\u308a\u307e\u3059\u3002\n$ uname -a\nLinux ip-hoge-hoge-hoge-hoge 4.4.41-36.55.amzn1.x86_64 #1 SMP Wed Jan 18 01:03:26 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u4e0b\u6e96\u5099\n\nyum update\n$ sudo yum update\n\n\nEPEL\u6709\u52b9\u5316\n$ sudo yum-config-manager --enable epel\n\n\ngcc\n$ sudo yum install gcc\n\n\nJDK\n\u4e8b\u524d\u306bOracle\u304b\u3089JDK8\u306erpm\u3092\u5165\u624b\u3057\u3066~/\u306b\u914d\u5099\u3059\u308b\n$ sudo rpm -ivh jdk-8u121-linux-x64.rpm\n$ vim .bash_profile\nJAVA_HOME=/usr/java/default\nexport JAVA_HOME\n$ source .bash_profile\n\n\nMaven\n$ cd\n$ curl -O http://ftp.jaist.ac.jp/pub/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.zip\n$ unzip apache-maven-3.3.9-bin.zip\n$ sudo mv apache-maven-3.3.9 /opt/\n$ vim .bash_profile\nPATH=/opt/apache-maven-3.3.9/bin:$PATH\n$ source .bash_profile\n\n\nTomcat\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo useradd -s /sbin/nologin tomcat\n$ curl -O http://ftp.kddilabs.jp/infosystems/apache/tomcat/tomcat-8/v8.5.11/bin/apache-tomcat-8.5.11.tar.gz\n$ tar -xzvf apache-tomcat-8.5.11.tar.gz\n$ sudo mv apache-tomcat-8.5.11 /opt/apache-tomcat\n$ sudo chown -R tomcat:tomcat /opt/apache-tomcat\n\n\n\u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n$ sudo vim /etc/profile\n\n3\u884c\u8ffd\u52a0\n\n/etc/profile\nJRE_HOME=/usr/java/default\nCATALINA_HOME=/usr/local/tomcat\nexport JRE_HOME CATALINA_HOME\n\n\n$ source /etc/profile\n\n$ sudo vim /etc/init.d/tomcat8\n\n\n/etc/init.d/tomcat8\n#!/bin/bash\n#\n# tomcat8\n#\n# chkconfig: - 80 20\n#\n### BEGIN INIT INFO\n# Provides: tomcat8\n# Required-Start: $network $syslog\n# Required-Stop: $network $syslog\n# Default-Start:\n# Default-Stop:\n# Description: Tomcat 8\n# Short-Description: start and stop tomcat\n### END INIT INFO\n\n## Source function library.\n#. /etc/rc.d/init.d/functions\nexport GUACAMOLE_HOME=/etc/guacamole\nexport JAVA_HOME=/usr/java/default\nexport JAVA_OPTS=\"-Dfile.encoding=UTF-8 \\\n  -Dnet.sf.ehcache.skipUpdateCheck=true \\\n  -XX:+UseConcMarkSweepGC \\\n  -XX:+CMSClassUnloadingEnabled \\\n  -XX:+UseParNewGC \\\n  -Xms512m -Xmx512m\"\nexport PATH=$JAVA_HOME/bin:$PATH\nTOMCAT_HOME=/opt/apache-tomcat\nTOMCAT_USER=tomcat\nSHUTDOWN_WAIT=20\n\ntomcat_pid() {\n  echo `ps aux | grep org.apache.catalina.startup.Bootstrap | grep -v grep | awk '{ print $2 }'`\n}\n\nstart() {\n  pid=$(tomcat_pid)\n  if [ -n \"$pid\" ] \n  then\n    echo \"Tomcat is already running (pid: $pid)\"\n  else\n    # Start tomcat\n    echo \"Starting tomcat\"\n    ulimit -n 100000\n    umask 007\n    /bin/su -p -s /bin/sh $TOMCAT_USER $TOMCAT_HOME/bin/startup.sh\n  fi\n\n\n  return 0\n}\n\nstop() {\n  pid=$(tomcat_pid)\n  if [ -n \"$pid\" ]\n  then\n    echo \"Stoping Tomcat\"\n    /bin/su -p -s /bin/sh $TOMCAT_USER $TOMCAT_HOME/bin/shutdown.sh\n\n    let kwait=$SHUTDOWN_WAIT\n    count=0;\n    until [ `ps -p $pid | grep -c $pid` = '0' ] || [ $count -gt $kwait ]\n    do\n      echo -n -e \"\\nwaiting for processes to exit\";\n      sleep 1\n      let count=$count+1;\n    done\n\n    if [ $count -gt $kwait ]; then\n      echo -n -e \"\\nkilling processes which didn't stop after $SHUTDOWN_WAIT seconds\"\n      kill -9 $pid\n    fi\n  else\n    echo \"Tomcat is not running\"\n  fi\n\n  return 0\n}\n\ncase $1 in\nstart)\n  start\n;; \nstop)   \n  stop\n;; \nrestart)\n  stop\n  start\n;;\nstatus)\n  pid=$(tomcat_pid)\n  if [ -n \"$pid\" ]\n  then\n    echo \"Tomcat is running with pid: $pid\"\n  else\n    echo \"Tomcat is not running\"\n  fi\n;; \nesac    \nexit 0\n\n\n$ sudo chmod +x /etc/init.d/tomcat8\n$ sudo service tomcat8 start\n$ sudo chkconfig tomcat8 on\n\n\nManager App\u306e\u5229\u7528\u8a2d\u5b9a\n\u30e6\u30fc\u30b6\u8ffd\u52a0\n$ sudo vim /opt/apache-tomcat/conf/tomcat-users.xml\n\n\ntomcat-users.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n...\n<tomcat-users xmlns=\"http://tomcat.apache.org/xml\"\n              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n              xsi:schemaLocation=\"http://tomcat.apache.org/xml tomcat-users.xsd\"\n              version=\"1.0\">\n...\n  <role rolename=\"manager-gui\"/>\n  <user username=\"admin\" password=\"admin\" roles=\"manager-gui\"/>\n</tomcat-users>\n\n\n\u30a2\u30af\u30bb\u30b9\u5236\u9650\u89e3\u9664\n$ sudo vim /opt/apache-tomcat/webapps/manager/META-INF/context.xml\n\n\ntomcat-users.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n...\n<Context antiResourceLocking=\"false\" privileged=\"true\" >\n  <!-- <Valve className=\"org.apache.catalina.valves.RemoteAddrValve\"\n         allow=\"127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1\" /> -->\n</Context>\n\n\n\nRequired dependencies\u306b\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306fRDP\u5bfe\u5fdc\u3060\u3051\u3067\u3059\u3002\n$ sudo yum install cairo-devel libjpeg-turbo-devel libpng-devel uuid-devel freerdp-devel\n\n\nGuacamole\u30b5\u30fc\u30d0 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd\n$ curl -O http://ftp.meisei-u.ac.jp/mirror/apache/dist/incubator/guacamole/0.9.11-incubating/source/guacamole-server-0.9.11-incubating.tar.gz\n$ tar -xzf guacamole-server-0.9.11-incubating.tar.gz\n$ cd guacamole-server-0.9.11-incubating/\n\n$ ./configure --with-init-dir=/etc/init.d\n$ make\n$ sudo make install\n$ sudo ldconfig\n$ sudo chkconfig guacd on\n\n\nGuacamole\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd\n$ curl -O http://ftp.riken.jp/net/apache/incubator/guacamole/0.9.11-incubating/source/guacamole-client-0.9.11-incubating.tar.gz\n$ tar -xzf guacamole-client-0.9.11-incubating.tar.gz\n$ cd guacamole-client-0.9.11-incubating/\n$ mvn package\n$ sudo cp guacamole/target/guacamole-0.9.11-incubating.war /opt/apache-tomcat/webapps/guacamole.war\n\n\nGuacamole\u8a2d\u5b9a\n$ sudo mkdir /etc/guacamole\n\n$ sudo vim /etc/guacamole/guacamole.properties\n\n\nguacamole.properties\nguacd-hostname: localhost\nguacd-port: 4822\nuser-mapping: /etc/guacamole/user-mapping.xml\n\n\n$ sudo vim /etc/guacamole/user-mapping.xml\n\n<user-mapping>\n  <authorize\n   username=\"Guacamole\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u540d\"\n   password=\"Guacamole\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9(\u30cf\u30c3\u30b7\u30e5\u5024)\"\n   encoding=\"md5\">\n\n    <connection name=\"RDP\">\n      <protocol>rdp</protocol>\n      <param name=\"hostname\">\u63a5\u7d9a\u5148\u30db\u30b9\u30c8\u540d(IP\u30a2\u30c9\u30ec\u30b9)</param>\n      <param name=\"username\">RDP\u3067\u63a5\u7d9a\u3059\u308b\u30e6\u30fc\u30b6\u540d</param>\n      <param name=\"password\">RDP\u3067\u63a5\u7d9a\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9</param>\n      <param name=\"domain\">RDP\u3067\u63a5\u7d9a\u3059\u308bAD\u30c9\u30e1\u30a4\u30f3</param>\n      <param name=\"port\">RDP\u3067\u63a5\u7d9a\u3059\u308b\u30dd\u30fc\u30c8</param>\n    </connection>\n\n  </authorize>\n</user-mapping>\n\nmd5\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u53ef\u80fd\u3067\u3059\u3002\nRDP\u306e\u63a5\u7d9a\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001md5\u3067\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u306a\u3044\u3067\u305d\u306e\u307e\u307e\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\u203bencoding=\"md5\" \u3092\u8a18\u8ff0\u3057\u306a\u3051\u308c\u3070\u7d20\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3082\u66f8\u3051\u307e\u3059\necho -n '\u30d1\u30b9\u30ef\u30fc\u30c9' | md5sum\n\n\u8a2d\u5b9a\u304c\u7d42\u308f\u3063\u305f\u3089\u5404\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ sudo service guacd restart\n$ sudo service tomcat8 restart\n\n\n\u30ad\u30e3\u30d7\u30c1\u30e3\nhttp://hoge.hoge.hoge.hoge:8080/guacamole/\n\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3057\u305f\u3002\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092\u8a18\u8ff0\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u306a\u306b\u3082\u805e\u304b\u308c\u305a\u306b\u5373\u5ea7\u306bRDP\u3067\u63a5\u7d9a\u3055\u308c\u307e\u3059\u3002\n\n\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u3059\u308b\u3068\u3001\u3053\u3093\u306a\u753b\u9762\u3067\u3059\u3002\n\u300cRecconect\u300d\u3067\u518d\u63a5\u7d9a\u3057\u3001\u300cLogout\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u623b\u308a\u307e\u3059\u3002\n\n\nTODO\n/etc/init.d/tomcat8 \u306b\u300cGUACAMOLE_HOME\u300d\u3092\u8a18\u8ff0\u3059\u308b\u306e\u306f\u5982\u4f55\u306a\u3082\u306e\u304b\u3002\n\u306a\u306b\u304b\u826f\u3044\u65b9\u6cd5\u304c\u5206\u304b\u308c\u3070\u4fee\u6b63\u3059\u308b\u3002\n\n\u53c2\u8003\n\u30fbGuacamole Manual\n\u30fb\u8e0f\u307f\u53f0\u30b5\u30fc\u30d0\u306b\u6700\u9069\uff01\u30d6\u30e9\u30a6\u30b6\u304b\u3089VNC\u3001RDP\u306b\u63a5\u7d9a\u51fa\u6765\u308b\u30ea\u30e2\u30fc\u30c8\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u300eGuacamole\u300f\n\u30fb\u81ea\u5b85\u30b5\u30fc\u30d0\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30e9\u30dc\u5316 (2) Guacamole\u5c0e\u5165\n# \u306f\u3058\u3081\u306b\nApache Guacamole\u306f\u30d6\u30e9\u30a6\u30b6\u30d9\u30fc\u30b9\u306e\u30ea\u30e2\u30fc\u30c8\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u3059\u3002\nHTML5\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30ea\u30e2\u30fc\u30c8\u63a5\u7d9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u3001Amazon Linux\u3092\u8e0f\u307f\u53f0\u306b\u3057\u3066\u3001\u5225\u306eWindows Server\u306bRDP\u63a5\u7d9a\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n# \u74b0\u5883\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u4f5c\u6210\u3057\u305f\u3070\u3063\u304b\u308a\u306e\u72b6\u614b\u3067\u3059\u3002\nElastic IP\u306f\u5272\u308a\u5f53\u3066\u3066\u3042\u308a\u307e\u3059\u3002\n\n```bash\n$ uname -a\nLinux ip-hoge-hoge-hoge-hoge 4.4.41-36.55.amzn1.x86_64 #1 SMP Wed Jan 18 01:03:26 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n```\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb \u4e0b\u6e96\u5099\n\n## yum update\n\n```bash\n$ sudo yum update\n```\n\n## EPEL\u6709\u52b9\u5316\n\n```bash\n$ sudo yum-config-manager --enable epel\n```\n\n## gcc\n\n```bash\n$ sudo yum install gcc\n```\n\n## JDK\n\u4e8b\u524d\u306bOracle\u304b\u3089JDK8\u306erpm\u3092\u5165\u624b\u3057\u3066~/\u306b\u914d\u5099\u3059\u308b\n\n```bash\n$ sudo rpm -ivh jdk-8u121-linux-x64.rpm\n$ vim .bash_profile\nJAVA_HOME=/usr/java/default\nexport JAVA_HOME\n$ source .bash_profile\n```\n\n## Maven\n\n```bash\n$ cd\n$ curl -O http://ftp.jaist.ac.jp/pub/apache/maven/maven-3/3.3.9/binaries/apache-maven-3.3.9-bin.zip\n$ unzip apache-maven-3.3.9-bin.zip\n$ sudo mv apache-maven-3.3.9 /opt/\n$ vim .bash_profile\nPATH=/opt/apache-maven-3.3.9/bin:$PATH\n$ source .bash_profile\n```\n\n## Tomcat\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ sudo useradd -s /sbin/nologin tomcat\n$ curl -O http://ftp.kddilabs.jp/infosystems/apache/tomcat/tomcat-8/v8.5.11/bin/apache-tomcat-8.5.11.tar.gz\n$ tar -xzvf apache-tomcat-8.5.11.tar.gz\n$ sudo mv apache-tomcat-8.5.11 /opt/apache-tomcat\n$ sudo chown -R tomcat:tomcat /opt/apache-tomcat\n```\n\n### \u30b5\u30fc\u30d3\u30b9\u8a2d\u5b9a\n\n```bash\n$ sudo vim /etc/profile\n```\n\n3\u884c\u8ffd\u52a0\n\n```bash:/etc/profile\nJRE_HOME=/usr/java/default\nCATALINA_HOME=/usr/local/tomcat\nexport JRE_HOME CATALINA_HOME\n```\n\n```bash\n$ source /etc/profile\n```\n\n```bash\n$ sudo vim /etc/init.d/tomcat8\n```\n\n```bash:/etc/init.d/tomcat8\n#!/bin/bash\n#\n# tomcat8\n#\n# chkconfig: - 80 20\n#\n### BEGIN INIT INFO\n# Provides: tomcat8\n# Required-Start: $network $syslog\n# Required-Stop: $network $syslog\n# Default-Start:\n# Default-Stop:\n# Description: Tomcat 8\n# Short-Description: start and stop tomcat\n### END INIT INFO\n\n## Source function library.\n#. /etc/rc.d/init.d/functions\nexport GUACAMOLE_HOME=/etc/guacamole\nexport JAVA_HOME=/usr/java/default\nexport JAVA_OPTS=\"-Dfile.encoding=UTF-8 \\\n  -Dnet.sf.ehcache.skipUpdateCheck=true \\\n  -XX:+UseConcMarkSweepGC \\\n  -XX:+CMSClassUnloadingEnabled \\\n  -XX:+UseParNewGC \\\n  -Xms512m -Xmx512m\"\nexport PATH=$JAVA_HOME/bin:$PATH\nTOMCAT_HOME=/opt/apache-tomcat\nTOMCAT_USER=tomcat\nSHUTDOWN_WAIT=20\n\ntomcat_pid() {\n  echo `ps aux | grep org.apache.catalina.startup.Bootstrap | grep -v grep | awk '{ print $2 }'`\n}\n\nstart() {\n  pid=$(tomcat_pid)\n  if [ -n \"$pid\" ] \n  then\n    echo \"Tomcat is already running (pid: $pid)\"\n  else\n    # Start tomcat\n    echo \"Starting tomcat\"\n    ulimit -n 100000\n    umask 007\n    /bin/su -p -s /bin/sh $TOMCAT_USER $TOMCAT_HOME/bin/startup.sh\n  fi\n\n\n  return 0\n}\n\nstop() {\n  pid=$(tomcat_pid)\n  if [ -n \"$pid\" ]\n  then\n    echo \"Stoping Tomcat\"\n    /bin/su -p -s /bin/sh $TOMCAT_USER $TOMCAT_HOME/bin/shutdown.sh\n\n    let kwait=$SHUTDOWN_WAIT\n    count=0;\n    until [ `ps -p $pid | grep -c $pid` = '0' ] || [ $count -gt $kwait ]\n    do\n      echo -n -e \"\\nwaiting for processes to exit\";\n      sleep 1\n      let count=$count+1;\n    done\n\n    if [ $count -gt $kwait ]; then\n      echo -n -e \"\\nkilling processes which didn't stop after $SHUTDOWN_WAIT seconds\"\n      kill -9 $pid\n    fi\n  else\n    echo \"Tomcat is not running\"\n  fi\n\n  return 0\n}\n\ncase $1 in\nstart)\n  start\n;; \nstop)   \n  stop\n;; \nrestart)\n  stop\n  start\n;;\nstatus)\n  pid=$(tomcat_pid)\n  if [ -n \"$pid\" ]\n  then\n    echo \"Tomcat is running with pid: $pid\"\n  else\n    echo \"Tomcat is not running\"\n  fi\n;; \nesac    \nexit 0\n```\n\n```bash\n$ sudo chmod +x /etc/init.d/tomcat8\n$ sudo service tomcat8 start\n$ sudo chkconfig tomcat8 on\n```\n\n### Manager App\u306e\u5229\u7528\u8a2d\u5b9a\n\n\u30e6\u30fc\u30b6\u8ffd\u52a0\n\n```bash\n$ sudo vim /opt/apache-tomcat/conf/tomcat-users.xml\n```\n\n```xml:tomcat-users.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n...\n<tomcat-users xmlns=\"http://tomcat.apache.org/xml\"\n              xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n              xsi:schemaLocation=\"http://tomcat.apache.org/xml tomcat-users.xsd\"\n              version=\"1.0\">\n...\n  <role rolename=\"manager-gui\"/>\n  <user username=\"admin\" password=\"admin\" roles=\"manager-gui\"/>\n</tomcat-users>\n```\n\n\u30a2\u30af\u30bb\u30b9\u5236\u9650\u89e3\u9664\n\n```bash\n$ sudo vim /opt/apache-tomcat/webapps/manager/META-INF/context.xml\n```\n\n```xml:tomcat-users.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n...\n<Context antiResourceLocking=\"false\" privileged=\"true\" >\n  <!-- <Valve className=\"org.apache.catalina.valves.RemoteAddrValve\"\n         allow=\"127\\.\\d+\\.\\d+\\.\\d+|::1|0:0:0:0:0:0:0:1\" /> -->\n</Context>\n```\n\n## Required dependencies\u306b\u306a\u3063\u3066\u3044\u308b\u3082\u306e\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306fRDP\u5bfe\u5fdc\u3060\u3051\u3067\u3059\u3002\n\n```bash\n$ sudo yum install cairo-devel libjpeg-turbo-devel libpng-devel uuid-devel freerdp-devel\n```\n\n# Guacamole\u30b5\u30fc\u30d0 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ cd\n$ curl -O http://ftp.meisei-u.ac.jp/mirror/apache/dist/incubator/guacamole/0.9.11-incubating/source/guacamole-server-0.9.11-incubating.tar.gz\n$ tar -xzf guacamole-server-0.9.11-incubating.tar.gz\n$ cd guacamole-server-0.9.11-incubating/\n\n$ ./configure --with-init-dir=/etc/init.d\n$ make\n$ sudo make install\n$ sudo ldconfig\n$ sudo chkconfig guacd on\n```\n\n# Guacamole\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ cd\n$ curl -O http://ftp.riken.jp/net/apache/incubator/guacamole/0.9.11-incubating/source/guacamole-client-0.9.11-incubating.tar.gz\n$ tar -xzf guacamole-client-0.9.11-incubating.tar.gz\n$ cd guacamole-client-0.9.11-incubating/\n$ mvn package\n$ sudo cp guacamole/target/guacamole-0.9.11-incubating.war /opt/apache-tomcat/webapps/guacamole.war\n```\n\n# Guacamole\u8a2d\u5b9a\n\n```bash\n$ sudo mkdir /etc/guacamole\n```\n\n```bash\n$ sudo vim /etc/guacamole/guacamole.properties\n```\n\n```bash:guacamole.properties\nguacd-hostname: localhost\nguacd-port: 4822\nuser-mapping: /etc/guacamole/user-mapping.xml\n```\n\n```bash\n$ sudo vim /etc/guacamole/user-mapping.xml\n```\n\n```xml\n<user-mapping>\n  <authorize\n   username=\"Guacamole\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u540d\"\n   password=\"Guacamole\u3078\u306e\u30ed\u30b0\u30a4\u30f3\u30d1\u30b9\u30ef\u30fc\u30c9(\u30cf\u30c3\u30b7\u30e5\u5024)\"\n   encoding=\"md5\">\n   \n    <connection name=\"RDP\">\n      <protocol>rdp</protocol>\n      <param name=\"hostname\">\u63a5\u7d9a\u5148\u30db\u30b9\u30c8\u540d(IP\u30a2\u30c9\u30ec\u30b9)</param>\n      <param name=\"username\">RDP\u3067\u63a5\u7d9a\u3059\u308b\u30e6\u30fc\u30b6\u540d</param>\n      <param name=\"password\">RDP\u3067\u63a5\u7d9a\u3059\u308b\u30d1\u30b9\u30ef\u30fc\u30c9</param>\n      <param name=\"domain\">RDP\u3067\u63a5\u7d9a\u3059\u308bAD\u30c9\u30e1\u30a4\u30f3</param>\n      <param name=\"port\">RDP\u3067\u63a5\u7d9a\u3059\u308b\u30dd\u30fc\u30c8</param>\n    </connection>\n    \n  </authorize>\n</user-mapping>\n```\n\nmd5\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u53ef\u80fd\u3067\u3059\u3002\nRDP\u306e\u63a5\u7d9a\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u3001md5\u3067\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u306a\u3044\u3067\u305d\u306e\u307e\u307e\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\n\u203bencoding=\"md5\" \u3092\u8a18\u8ff0\u3057\u306a\u3051\u308c\u3070\u7d20\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3082\u66f8\u3051\u307e\u3059\n\n```bash\necho -n '\u30d1\u30b9\u30ef\u30fc\u30c9' | md5sum\n```\n\n\u8a2d\u5b9a\u304c\u7d42\u308f\u3063\u305f\u3089\u5404\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo service guacd restart\n$ sudo service tomcat8 restart\n```\n\n# \u30ad\u30e3\u30d7\u30c1\u30e3\n\nhttp://hoge.hoge.hoge.hoge:8080/guacamole/\n\u304b\u3089\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n![\u30ed\u30b0\u30a4\u30f3\u753b\u9762](https://qiita-image-store.s3.amazonaws.com/0/138821/bed4ae67-ef41-93f8-127e-26851dace83d.png)\n\n\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3057\u305f\u3002\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092\u8a18\u8ff0\u3057\u3066\u3042\u308b\u306e\u3067\u3001\u306a\u306b\u3082\u805e\u304b\u308c\u305a\u306b\u5373\u5ea7\u306bRDP\u3067\u63a5\u7d9a\u3055\u308c\u307e\u3059\u3002\n![RDP\u753b\u9762](https://qiita-image-store.s3.amazonaws.com/0/138821/633ddd4c-d072-6f7c-3a81-263a72400aef.png)\n\n\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u3059\u308b\u3068\u3001\u3053\u3093\u306a\u753b\u9762\u3067\u3059\u3002\n\u300cRecconect\u300d\u3067\u518d\u63a5\u7d9a\u3057\u3001\u300cLogout\u300d\u3067\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u623b\u308a\u307e\u3059\u3002\n![Disconnected\u753b\u9762](https://qiita-image-store.s3.amazonaws.com/0/138821/4ff8612d-2494-961f-06df-4ea7c851326b.png)\n\n# TODO\n/etc/init.d/tomcat8 \u306b\u300cGUACAMOLE_HOME\u300d\u3092\u8a18\u8ff0\u3059\u308b\u306e\u306f\u5982\u4f55\u306a\u3082\u306e\u304b\u3002\n\u306a\u306b\u304b\u826f\u3044\u65b9\u6cd5\u304c\u5206\u304b\u308c\u3070\u4fee\u6b63\u3059\u308b\u3002\n\n# \u53c2\u8003\n\n\u30fb[Guacamole Manual](http://guacamole.incubator.apache.org/doc/gug/index.html)\n\n\u30fb[\u8e0f\u307f\u53f0\u30b5\u30fc\u30d0\u306b\u6700\u9069\uff01\u30d6\u30e9\u30a6\u30b6\u304b\u3089VNC\u3001RDP\u306b\u63a5\u7d9a\u51fa\u6765\u308b\u30ea\u30e2\u30fc\u30c8\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u300eGuacamole\u300f](https://orebibou.com/2015/02/%E8%B8%8F%E3%81%BF%E5%8F%B0%E3%82%B5%E3%83%BC%E3%83%90%E3%81%AB%E6%9C%80%E9%81%A9%EF%BC%81%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%8B%E3%82%89vnc%E3%80%81rdp%E3%81%AB%E6%8E%A5%E7%B6%9A%E5%87%BA/)\n\n\u30fb[\u81ea\u5b85\u30b5\u30fc\u30d0\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30e9\u30dc\u5316 (2) Guacamole\u5c0e\u5165](http://ao-zai.blogspot.jp/2015/09/2-guacamole.html)\n"}