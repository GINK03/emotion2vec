{"context": "\n\n\u76ee\u6a19\n\u524d\u56de\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u3067\u4f5c\u6210\u3057\u305f\"\u3042\u3084\u3081\"\u306e\u5206\u985e\u30e2\u30c7\u30eb\u3092\u4f7f\u3044\u3001\n\u5916\u90e8\u304b\u3089\u591a\u9805\u5206\u985e\u53ef\u80fd\u306aAPI\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nPOST\u30c7\u30fc\u30bf\u3092HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u9001\u4fe1\u3057\u3001JSON\u5f62\u5f0f\u306e\u5206\u985e\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\u203b\u9001\u4fe1\u3059\u308bPOST\u30c7\u30fc\u30bf\u306e\u5f62\u5f0f\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n{\n  \"sl\" : \"5.7\",\n  \"sw\" : \"4.4\",\n  \"pl\" : \"1.5\",\n  \"pw\" : \"0.4\"\n}\n\n\n\u69cb\u6210\n\u5916\u90e8\u304b\u3089 AWS Machine Learning \u6a5f\u80fd\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001API Gateway\u3001Lambda \u3092\u7d4c\u7531\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\n\u74b0\u5883\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\u3053\u3053\u304b\u3089\u5404\u3005\u306e\u6a5f\u80fd\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nMachine Learning\n\nMachine Learning \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30ed\u30fc\u30eb\u3092\u4f5c\u6210\n\n\"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 & \u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\" \u304b\u3089 \"Identity & Access Management\" \u3092\u9078\u629e\n\n\"\u65b0\u3057\u3044\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\" \u3092\u9078\u629e\n\n\u4efb\u610f\u306e\u30ed\u30fc\u30eb\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"MachineLearningIrisRole\"\u3092\u5165\u529b\uff09\n\n\"AWS Lambda\" \u3092\u9078\u629e\n\n\u63a2\u3057\u3084\u3059\u304f\u3059\u308b\u305f\u3081 \"MachineLearning\" \u3067\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u304b\u3051\u3001\n\"AmazonMachineLearningRealTimePredictionOnlyAccess\" \u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u6b21\u3078\n\n\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u3001\"\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\" \u3092\u9078\u629e\n\n\nML model \u3092\u8a2d\u5b9a\n\n\u524d\u56de\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u4f5c\u6210\u3057\u305f \u30e2\u30c7\u30eb\u3092\u9078\u629e\n\nSummary \u304b\u3089 \"Create endpoint\" \u3092\u9078\u629e\n\u203b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u751f\u6210\u5f8c\u306b\u8868\u793a\u3055\u308c\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\u3068\u3053\u306e\u30e2\u30c7\u30ebID\u3092\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\n\nLambda\n\"\u30b3\u30f3\u30d4\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\" \u304b\u3089 \"Lambda\" \u3092\u9078\u629e\u3057\u307e\u3059\n\n\"Create a Lambda function\" \u3092\u9078\u629e\n\n\"node-exec\" \u3092\u9078\u629e\n\n\"Next\" \u3092\u9078\u629e\n\nName: \u4efb\u610f\u306e\u95a2\u6570\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"IrisCheck\" \u3068\u5165\u529b\uff09\nDescription: \u4efb\u610f\nRuntime : \"Node.js 4.3\" \u3092\u6307\u5b9a\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\n\u203b[\u4f7f\u7528\u3059\u308b\u30e2\u30c7\u30ebID][\u4f7f\u7528\u3059\u308b\u4e88\u6e2c\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8]\u306b\u306f\u3001\u5148\u307b\u3069\u63a7\u3048\u305f\u5185\u5bb9\u3092\u5165\u529b\n'use strict';\nconsole.log('Loading event');\n\nexports.handler = function(event, context) {\n\n    // \u5165\u529b\u30d1\u30e9\u30e1\u30fc\u30bf\u30ed\u30b0\u51fa\u529b\n    console.log(\"sl = \" + event.sl);\n    console.log(\"sw = \" + event.sw);  \n    console.log(\"pl = \" + event.pl);\n    console.log(\"pw = \" + event.pw);\n\n    // AWS\n    var aws = require('aws-sdk');\n    aws.config.region = 'us-east-1';\n\n    // MachineLearning\n    var ml = new aws.MachineLearning();\n\n    // \u30d1\u30e9\u30e1\u30fc\u30bf\u8a2d\u5b9a\n    var params = {\n        MLModelId: '[\u4f7f\u7528\u3059\u308b\u30e2\u30c7\u30ebID]', \n        PredictEndpoint: '[\u4f7f\u7528\u3059\u308b\u4e88\u6e2c\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8]', \n        Record: {\n            \"Sepal_length\" : event.sl,\n            \"Sepal_width\"  : event.sw,\n            \"Petal_length\" : event.pl,\n            \"Petal_width\"  : event.pw\n        }\n    };\n\n    // \u4e88\u6e2c\u5b9f\u884c\n    ml.predict(params, function(err, data) {\n        if (err) {\n            context.fail(err.stack);\n        } else {\n            context.succeed(data);\n        }\n    });\n\n};\n\nExisting role : \u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30ed\u30fc\u30eb\u3092\u6307\u5b9a\uff08\u3053\u3053\u3067\u306f\"MachineLearningIrisRole\"\u3092\u6307\u5b9a\uff09\nTimeout : 20\u79d2 \u3092\u6307\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u5024(3\u79d2)\u3060\u3068\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\uff09\n\"Next\" \u3092\u9078\u629e\n\n\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066 \"Create function\" \u3092\u9078\u629e\n\n\n\u4f5c\u6210\u3057\u305f Lambda function \u3092\u30c6\u30b9\u30c8\u3059\u308b\n\"Action\" \u304b\u3089 \"Configure test event\" \u3092\u9078\u629e \n\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057\u3001\"Save and test\" \u3092\u9078\u629e\n\n\u7d50\u679c\u3092\u78ba\u8a8d\u3057\u3001\u6b63\u3057\u304f\u5206\u985e\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\n\n\nAPI Gateway\n\"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\" \u304b\u3089 \"API Gateway\" \u3092\u9078\u629e\n\n\"API\u306e\u4f5c\u6210\"\u3092\u9078\u629e\n\n\"\u65b0\u3057\u3044API\"\u3092\u9078\u629e\u3057\u3001\u4ee5\u4e0b\u5185\u5bb9\u3092\u5165\u529b\u3057\u3066\"API\u306e\u4f5c\u6210\"\u3092\u9078\u629e\nAPI\u540d : \u4efb\u610f\u306eAPI\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"IrisAPI\"\u3092\u5165\u529b\uff09\n\u8aac\u660e : \u4efb\u610f\n\n\"/\" \u3092\u9078\u629e\u3057\u305f\u72b6\u614b\u3067\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u304b\u3089 \"\u30e1\u30bd\u30c3\u30c9\u306e\u4f5c\u6210\" \u3092\u9078\u629e\n\n\"POST\"\u3092\u9078\u629e\u5f8c\u3001\u30c1\u30a7\u30c3\u30af\u30de\u30fc\u30af\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n\u7d71\u5408\u30bf\u30a4\u30d7 : Lambda\u95a2\u6570\nLambda\u30ea\u30fc\u30b8\u30e7\u30f3 : \u4efb\u610f\nLambda\u95a2\u6570 : \u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u95a2\u6570\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"IrisCheck\"\u3092\u5165\u529b\uff09\n\"\u4fdd\u5b58\"\u3092\u9078\u629e\n\n\"OK\" \u3092\u9078\u629e\n\n\n\u4f5c\u6210\u3057\u305f API \u3092\u30c6\u30b9\u30c8\u3059\u308b\n\"\u30c6\u30b9\u30c8\" \u3092\u30af\u30ea\u30c3\u30af\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u672c\u6587\u306b\u3001\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057 \"\u30c6\u30b9\u30c8\" \u3092\u9078\u629e\u3001\n\u30ec\u30b9\u30dd\u30f3\u30b9\u672c\u6587\u306b\u5206\u6790\u7d50\u679c\u304c\u6b63\u3057\u304f\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\n\n\n\u4f5c\u6210\u3057\u305f API \u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\u30a2\u30af\u30b7\u30e7\u30f3\u304b\u3089\u3000\"API\u306e\u30c7\u30d7\u30ed\u30a4\" \u3092\u9078\u629e\n\n\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u30b9\u30c6\u30fc\u30b8 : \u65b0\u3057\u3044\u30b9\u30c6\u30fc\u30b8\n\u30b9\u30c6\u30fc\u30b8\u540d : \u4efb\u610f\u306e\u30b9\u30c6\u30fc\u30b8\u540d\uff08\u3053\u3053\u3067\u306f\"IrisStage\"\u3068\u5165\u529b\uff09\n\u30b9\u30c6\u30fc\u30b8\u306e\u8aac\u660e : \u4efb\u610f\n\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306e\u8aac\u660e : \u4efb\u610f\n\"\u30c7\u30d7\u30ed\u30a4\" \u3092\u9078\u629e\n\n\u5916\u90e8\u304b\u3089API\u306e\u5b9f\u884c\u30c6\u30b9\u30c8\u3092\u3059\u308b\u305f\u3081\u30b9\u30c6\u30fc\u30b8\u304b\u3089 \"POST\"\u3092\u9078\u629e\u3057\u305f\u969b\u306b\u8868\u793a\u3055\u308c\u308b URL\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n\u5916\u90e8\u304b\u3089\u4f5c\u6210\u3057\u305f API \u3092\u30c6\u30b9\u30c8\u3059\u308b\n\u4eca\u56de\u306f Chrome\u30d6\u30e9\u30a6\u30b6\u3067 \"DHC REST Client\" \u3068\u3044\u3046 Web\u30a2\u30d7\u30ea\u3092\u4f7f\u3063\u3066\u8a66\u9a13\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\u5148\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305fURL\u3092\u5165\u529b\u3057\u3001POST\u3092\u9078\u629e\u3001\u4e88\u6e2c\u3057\u305f\u3044\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057 \"Send\"\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u5206\u985e\u7d50\u679c\u304cJSON\u5f62\u5f0f\u3067\u53d6\u5f97\u51fa\u6765\u307e\u3057\u305f\u3002\n\n\n\u4ee5\u4e0a\u3001\u4eca\u56de\u306f\u5916\u90e8\u304b\u3089\u591a\u9805\u5206\u985e\u3092\u5b9f\u884c\u51fa\u6765\u308bAPI\u306e\u4f5c\u6210\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u76ee\u6a19\n\u524d\u56de\u306e[\u30a8\u30f3\u30c8\u30ea\u30fc](http://qiita.com/fujin/items/e7007deb321a8d1c9de2)\u3067\u4f5c\u6210\u3057\u305f\"\u3042\u3084\u3081\"\u306e\u5206\u985e\u30e2\u30c7\u30eb\u3092\u4f7f\u3044\u3001\n\u5916\u90e8\u304b\u3089\u591a\u9805\u5206\u985e\u53ef\u80fd\u306aAPI\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nPOST\u30c7\u30fc\u30bf\u3092HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u9001\u4fe1\u3057\u3001JSON\u5f62\u5f0f\u306e\u5206\u985e\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3092\u76ee\u6307\u3057\u307e\u3059\u3002\n\u203b\u9001\u4fe1\u3059\u308bPOST\u30c7\u30fc\u30bf\u306e\u5f62\u5f0f\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n```json\n{\n  \"sl\" : \"5.7\",\n  \"sw\" : \"4.4\",\n  \"pl\" : \"1.5\",\n  \"pw\" : \"0.4\"\n}\n```\n\n# \u69cb\u6210\n\u5916\u90e8\u304b\u3089 AWS Machine Learning \u6a5f\u80fd\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001API Gateway\u3001Lambda \u3092\u7d4c\u7531\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3001\n\u74b0\u5883\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u3068\u306a\u308a\u307e\u3059\u3002\n\n![MLAPI_img.png](https://qiita-image-store.s3.amazonaws.com/0/134550/73945742-7d7e-541f-cf0f-35c35425150c.png)\n\n<p>\n\u3053\u3053\u304b\u3089\u5404\u3005\u306e\u6a5f\u80fd\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n# Machine Learning\n- Machine Learning \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30ed\u30fc\u30eb\u3092\u4f5c\u6210\n\n\"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 & \u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3\" \u304b\u3089 \"Identity & Access Management\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_16_47_51.png](https://qiita-image-store.s3.amazonaws.com/0/134550/125a7c70-b6c5-8436-a9f7-dddd681cd596.png)\n\n\"\u65b0\u3057\u3044\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_16_48_23.png](https://qiita-image-store.s3.amazonaws.com/0/134550/797f7f11-43ba-6d61-62cf-af8ce1f06934.png)\n\n\u4efb\u610f\u306e\u30ed\u30fc\u30eb\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"MachineLearningIrisRole\"\u3092\u5165\u529b\uff09\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_16_52_58.png](https://qiita-image-store.s3.amazonaws.com/0/134550/f48d3cec-65e6-3003-55ad-b7c5a5aa6dfd.png)\n\n\"AWS Lambda\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_16_53_08.png](https://qiita-image-store.s3.amazonaws.com/0/134550/8139b431-6043-70da-f2d2-66f51fc827f2.png)\n\n\u63a2\u3057\u3084\u3059\u304f\u3059\u308b\u305f\u3081 \"MachineLearning\" \u3067\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u304b\u3051\u3001\n\"AmazonMachineLearningRealTimePredictionOnlyAccess\" \u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u6b21\u3078\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_16_57_44.png](https://qiita-image-store.s3.amazonaws.com/0/134550/6c3da881-eb7f-01ba-950a-046d2cdabfca.png)\n\n\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u3001\"\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_16_57_52.png](https://qiita-image-store.s3.amazonaws.com/0/134550/7f15d20b-25de-d99a-336f-1892103f3a27.png)\n\n- ML model \u3092\u8a2d\u5b9a\n\n\u524d\u56de\u306e\u30a8\u30f3\u30c8\u30ea\u3067\u4f5c\u6210\u3057\u305f \u30e2\u30c7\u30eb\u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_17_03_51.png](https://qiita-image-store.s3.amazonaws.com/0/134550/abbaa54a-b295-f72b-3f8e-b23a8da6a767.png)\n\n\nSummary \u304b\u3089 \"Create endpoint\" \u3092\u9078\u629e\n\u203b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u751f\u6210\u5f8c\u306b\u8868\u793a\u3055\u308c\u308b\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306eURL\u3068\u3053\u306e\u30e2\u30c7\u30ebID\u3092\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_17_04_20.png](https://qiita-image-store.s3.amazonaws.com/0/134550/c54073c7-8d21-0002-7150-15be1c4f236d.png)\n\n# Lambda\n\n\"\u30b3\u30f3\u30d4\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\" \u304b\u3089 \"Lambda\" \u3092\u9078\u629e\u3057\u307e\u3059\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_17_06_48.png](https://qiita-image-store.s3.amazonaws.com/0/134550/b9e25b72-0330-5139-625a-bb377e6e4c0c.png)\n\n\"Create a Lambda function\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_24_49.png](https://qiita-image-store.s3.amazonaws.com/0/134550/911bd41a-abe9-8f96-3c4d-72651161fcdc.png)\n\n\"node-exec\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_25_00.png](https://qiita-image-store.s3.amazonaws.com/0/134550/28803c86-2192-95b3-7a16-5b430626770f.png)\n\n\"Next\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_25_06.png](https://qiita-image-store.s3.amazonaws.com/0/134550/71b9b5c5-c8f7-3ab5-d6b9-70f525242c79.png)\n\nName: \u4efb\u610f\u306e\u95a2\u6570\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"IrisCheck\" \u3068\u5165\u529b\uff09\nDescription: \u4efb\u610f\nRuntime : \"Node.js 4.3\" \u3092\u6307\u5b9a\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_35_53.png](https://qiita-image-store.s3.amazonaws.com/0/134550/0574e1d5-ae00-2034-3487-0839f811b21a.png)\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u5165\u529b\n\u203b[\u4f7f\u7528\u3059\u308b\u30e2\u30c7\u30ebID][\u4f7f\u7528\u3059\u308b\u4e88\u6e2c\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8]\u306b\u306f\u3001\u5148\u307b\u3069\u63a7\u3048\u305f\u5185\u5bb9\u3092\u5165\u529b\n\n```js\n'use strict';\nconsole.log('Loading event');\n\nexports.handler = function(event, context) {\n    \n    // \u5165\u529b\u30d1\u30e9\u30e1\u30fc\u30bf\u30ed\u30b0\u51fa\u529b\n    console.log(\"sl = \" + event.sl);\n    console.log(\"sw = \" + event.sw);  \n    console.log(\"pl = \" + event.pl);\n    console.log(\"pw = \" + event.pw);\n    \n    // AWS\n    var aws = require('aws-sdk');\n    aws.config.region = 'us-east-1';\n \n    // MachineLearning\n    var ml = new aws.MachineLearning();\n \n    // \u30d1\u30e9\u30e1\u30fc\u30bf\u8a2d\u5b9a\n    var params = {\n        MLModelId: '[\u4f7f\u7528\u3059\u308b\u30e2\u30c7\u30ebID]', \n        PredictEndpoint: '[\u4f7f\u7528\u3059\u308b\u4e88\u6e2c\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8]', \n        Record: {\n            \"Sepal_length\" : event.sl,\n            \"Sepal_width\"  : event.sw,\n            \"Petal_length\" : event.pl,\n            \"Petal_width\"  : event.pw\n        }\n    };\n\n    // \u4e88\u6e2c\u5b9f\u884c\n    ml.predict(params, function(err, data) {\n        if (err) {\n            context.fail(err.stack);\n        } else {\n            context.succeed(data);\n        }\n    });\n    \n};\n```\n\nExisting role : \u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30ed\u30fc\u30eb\u3092\u6307\u5b9a\uff08\u3053\u3053\u3067\u306f\"MachineLearningIrisRole\"\u3092\u6307\u5b9a\uff09\nTimeout : 20\u79d2 \u3092\u6307\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u5024(3\u79d2)\u3060\u3068\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\uff09\n\n\"Next\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_35_56.png](https://qiita-image-store.s3.amazonaws.com/0/134550/4b87a975-5c37-512a-2ea4-1f2663b0c4e6.png)\n\n\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066 \"Create function\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_36_01.png](https://qiita-image-store.s3.amazonaws.com/0/134550/5b76d37a-c9c6-448e-0339-9e811e85f9db.png)\n\n## \u4f5c\u6210\u3057\u305f Lambda function \u3092\u30c6\u30b9\u30c8\u3059\u308b\n\n\"Action\" \u304b\u3089 \"Configure test event\" \u3092\u9078\u629e \n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_38_29.png](https://qiita-image-store.s3.amazonaws.com/0/134550/14a2a404-d7be-2e09-e465-0b7b604dd331.png)\n\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057\u3001\"Save and test\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_38_35.png](https://qiita-image-store.s3.amazonaws.com/0/134550/0bb5c1fe-5ef9-9b72-ed80-c20fc40ab46a.png)\n\n\u7d50\u679c\u3092\u78ba\u8a8d\u3057\u3001\u6b63\u3057\u304f\u5206\u985e\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_36_32.png](https://qiita-image-store.s3.amazonaws.com/0/134550/fca5e6f8-a5ce-cdc6-33a3-d5d1d3b1ea8d.png)\n\n# API Gateway\n\n\"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d3\u30b9\" \u304b\u3089 \"API Gateway\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-26_17_21_42.png](https://qiita-image-store.s3.amazonaws.com/0/134550/0eebb6b5-a35e-8d19-be08-967a4539f755.png)\n\n\"API\u306e\u4f5c\u6210\"\u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_40_59.png](https://qiita-image-store.s3.amazonaws.com/0/134550/84698767-d69f-3792-041d-e1dba9bc1359.png)\n\n\"\u65b0\u3057\u3044API\"\u3092\u9078\u629e\u3057\u3001\u4ee5\u4e0b\u5185\u5bb9\u3092\u5165\u529b\u3057\u3066\"API\u306e\u4f5c\u6210\"\u3092\u9078\u629e\nAPI\u540d : \u4efb\u610f\u306eAPI\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"IrisAPI\"\u3092\u5165\u529b\uff09\n\u8aac\u660e : \u4efb\u610f\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_41_27.png](https://qiita-image-store.s3.amazonaws.com/0/134550/96aab78a-b0ef-dda2-17ed-cd48fc121223.png)\n\n\"/\" \u3092\u9078\u629e\u3057\u305f\u72b6\u614b\u3067\u3001\u30a2\u30af\u30b7\u30e7\u30f3\u304b\u3089 \"\u30e1\u30bd\u30c3\u30c9\u306e\u4f5c\u6210\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_41_42.png](https://qiita-image-store.s3.amazonaws.com/0/134550/e005b35c-dbe1-e8ad-7a8f-8830f377e9e0.png)\n\n\"POST\"\u3092\u9078\u629e\u5f8c\u3001\u30c1\u30a7\u30c3\u30af\u30de\u30fc\u30af\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_41_54.png](https://qiita-image-store.s3.amazonaws.com/0/134550/b1e3045b-fb4a-e0b4-03ab-5d1de8a15a1f.png)\n\n\u7d71\u5408\u30bf\u30a4\u30d7 : Lambda\u95a2\u6570\nLambda\u30ea\u30fc\u30b8\u30e7\u30f3 : \u4efb\u610f\nLambda\u95a2\u6570 : \u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u95a2\u6570\u540d\u3092\u5165\u529b\uff08\u3053\u3053\u3067\u306f\"IrisCheck\"\u3092\u5165\u529b\uff09\n\n\"\u4fdd\u5b58\"\u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_42_13.png](https://qiita-image-store.s3.amazonaws.com/0/134550/a68b27df-33cd-6046-a10c-3eaf6d2e6cc1.png)\n\n\"OK\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_42_22.png](https://qiita-image-store.s3.amazonaws.com/0/134550/3311cccb-6cfc-18d6-e32d-71f19b8ee2a5.png)\n\n## \u4f5c\u6210\u3057\u305f API \u3092\u30c6\u30b9\u30c8\u3059\u308b\n\n\"\u30c6\u30b9\u30c8\" \u3092\u30af\u30ea\u30c3\u30af\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_42_29.png](https://qiita-image-store.s3.amazonaws.com/0/134550/8b2c7965-288c-6e8f-a257-b785d631c521.png)\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u672c\u6587\u306b\u3001\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057 \"\u30c6\u30b9\u30c8\" \u3092\u9078\u629e\u3001\n\u30ec\u30b9\u30dd\u30f3\u30b9\u672c\u6587\u306b\u5206\u6790\u7d50\u679c\u304c\u6b63\u3057\u304f\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_42_58.png](https://qiita-image-store.s3.amazonaws.com/0/134550/a17c36c3-a402-987b-ba1c-a0438d4bd8bf.png)\n\n## \u4f5c\u6210\u3057\u305f API \u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\n\u30a2\u30af\u30b7\u30e7\u30f3\u304b\u3089\u3000\"API\u306e\u30c7\u30d7\u30ed\u30a4\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_43_15.png](https://qiita-image-store.s3.amazonaws.com/0/134550/7d3bdf91-a1ae-3a3b-a2e8-4648967bba88.png)\n\n\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u308b\u30b9\u30c6\u30fc\u30b8 : \u65b0\u3057\u3044\u30b9\u30c6\u30fc\u30b8\n\u30b9\u30c6\u30fc\u30b8\u540d : \u4efb\u610f\u306e\u30b9\u30c6\u30fc\u30b8\u540d\uff08\u3053\u3053\u3067\u306f\"IrisStage\"\u3068\u5165\u529b\uff09\n\u30b9\u30c6\u30fc\u30b8\u306e\u8aac\u660e : \u4efb\u610f\n\u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u306e\u8aac\u660e : \u4efb\u610f\n\n\"\u30c7\u30d7\u30ed\u30a4\" \u3092\u9078\u629e\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_44_12.png](https://qiita-image-store.s3.amazonaws.com/0/134550/2c8016b2-2845-32cc-f17d-1005e52bf6de.png)\n\n\u5916\u90e8\u304b\u3089API\u306e\u5b9f\u884c\u30c6\u30b9\u30c8\u3092\u3059\u308b\u305f\u3081\u30b9\u30c6\u30fc\u30b8\u304b\u3089 \"POST\"\u3092\u9078\u629e\u3057\u305f\u969b\u306b\u8868\u793a\u3055\u308c\u308b URL\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_44_24.png](https://qiita-image-store.s3.amazonaws.com/0/134550/6a6e400c-947d-b802-8ba5-7bc28d7bdcc8.png)\n\n# \u5916\u90e8\u304b\u3089\u4f5c\u6210\u3057\u305f API \u3092\u30c6\u30b9\u30c8\u3059\u308b\n\n\u4eca\u56de\u306f Chrome\u30d6\u30e9\u30a6\u30b6\u3067 \"DHC REST Client\" \u3068\u3044\u3046 Web\u30a2\u30d7\u30ea\u3092\u4f7f\u3063\u3066\u8a66\u9a13\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n\u5148\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305fURL\u3092\u5165\u529b\u3057\u3001POST\u3092\u9078\u629e\u3001\u4e88\u6e2c\u3057\u305f\u3044\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3057 \"Send\"\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u5206\u985e\u7d50\u679c\u304cJSON\u5f62\u5f0f\u3067\u53d6\u5f97\u51fa\u6765\u307e\u3057\u305f\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8_2016-07-27_11_45_14.png](https://qiita-image-store.s3.amazonaws.com/0/134550/0d9fedee-dd35-ed29-6ff6-0fdd668cd91c.png)\n\n<p>\n\u4ee5\u4e0a\u3001\u4eca\u56de\u306f\u5916\u90e8\u304b\u3089\u591a\u9805\u5206\u985e\u3092\u5b9f\u884c\u51fa\u6765\u308bAPI\u306e\u4f5c\u6210\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n<p>\n", "tags": ["AWS", "MachineLearning", "APIGateway", "lambda"]}