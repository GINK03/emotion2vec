{"context": " More than 1 year has passed since last update.\u30e1\u30e2\n\u9077\u79fb\u4e88\u5b9a\u306e\u30da\u30fc\u30b8\u304c\u306a\u3044\u5834\u5408\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30da\u30fc\u30b8\u306b\u98db\u3070\u3059\u8a2d\u5b9a\u3060\u3051\u3069\u3082\u3063\u3068\u3044\u3044\u65b9\u6cd5\u306a\u3044\u306e\u304b\u306a\uff1f\n\nIndexAction\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.rmi.ServerException;\nimport java.sql.SQLException;\nimport java.util.ResourceBundle;\n\nimport org.apache.struts2.convention.annotation.Action;\nimport org.apache.struts2.convention.annotation.Actions;\nimport org.apache.struts2.convention.annotation.ExceptionMapping;\nimport org.apache.struts2.convention.annotation.ExceptionMappings;\nimport org.apache.struts2.convention.annotation.InterceptorRef;\nimport org.apache.struts2.convention.annotation.InterceptorRefs;\nimport org.apache.struts2.convention.annotation.Result;\n\n/**\n * \u30c7\u30d0\u30c3\u30b0\u7528.\n * @author asahina_dev\n *\n */\n@SuppressWarnings(\"serial\")\n@Actions({\n        @Action(value = \"user_*_index\",\n                results = {\n                        @Result(\n                                name = \"success\",\n                                location = \"%{pageId}/index.jsp\"),\n                        @Result(\n                                name = \"input\",\n                                location = \"%{pageId}/index.jsp\"),\n                        @Result(\n                                name = \"defaultAction\",\n                                type = \"chain\",\n                                location = \"index\"),\n                },\n                params = {\n                        \"pageId\", \"{1}\"\n                }),\n        @Action(value = \"index\",\n                results = {\n                        @Result(\n                                name = \"success\",\n                                location = \"index.jsp\"),\n                        @Result(\n                                name = \"input\",\n                                location = \"index.jsp\"),\n                }),\n})\n@InterceptorRefs({\n        @InterceptorRef(\"defaultStack\"),\n        @InterceptorRef(\"debugging\")\n})\n@ExceptionMappings({\n        @ExceptionMapping(\n                exception = \"java.lang.Exception\",\n                result = \"exception\"\n        ),\n})\npublic class IndexAction extends BaseAction<IndexModel> {\n\n    /**\n     * \u30c7\u30d0\u30c3\u30b0\u7528.\n     *\n     */\n    public IndexAction() {\n        super(new IndexModel());\n    }\n\n    @Override\n    public String execute() throws IOException, SQLException, ServerException {\n        System.out.println(\"index\");\n\n        ResourceBundle property = ResourceBundle.getBundle(\"struts\");\n\n        String resultPath = property.getString(\"struts.convention.result.path\");\n\n        String classes = getClass().getResource(\"/\").getFile();\n        File root = new File(classes, \"../../\" + resultPath);\n        File page = new File(root, \"debug/\" + model.pageId + \"/index.jsp\");\n        if (!page.exists()) {\n            return \"defaultAction\";\n        }\n\n        return super.execute();\n    }\n}\n\n\n\n\u30e1\u30e2\n\n\u9077\u79fb\u4e88\u5b9a\u306e\u30da\u30fc\u30b8\u304c\u306a\u3044\u5834\u5408\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30da\u30fc\u30b8\u306b\u98db\u3070\u3059\u8a2d\u5b9a\u3060\u3051\u3069\u3082\u3063\u3068\u3044\u3044\u65b9\u6cd5\u306a\u3044\u306e\u304b\u306a\uff1f\n\n```java:IndexAction\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.rmi.ServerException;\nimport java.sql.SQLException;\nimport java.util.ResourceBundle;\n\nimport org.apache.struts2.convention.annotation.Action;\nimport org.apache.struts2.convention.annotation.Actions;\nimport org.apache.struts2.convention.annotation.ExceptionMapping;\nimport org.apache.struts2.convention.annotation.ExceptionMappings;\nimport org.apache.struts2.convention.annotation.InterceptorRef;\nimport org.apache.struts2.convention.annotation.InterceptorRefs;\nimport org.apache.struts2.convention.annotation.Result;\n\n/**\n * \u30c7\u30d0\u30c3\u30b0\u7528.\n * @author asahina_dev\n *\n */\n@SuppressWarnings(\"serial\")\n@Actions({\n\t\t@Action(value = \"user_*_index\",\n\t\t\t\tresults = {\n\t\t\t\t\t\t@Result(\n\t\t\t\t\t\t\t\tname = \"success\",\n\t\t\t\t\t\t\t\tlocation = \"%{pageId}/index.jsp\"),\n\t\t\t\t\t\t@Result(\n\t\t\t\t\t\t\t\tname = \"input\",\n\t\t\t\t\t\t\t\tlocation = \"%{pageId}/index.jsp\"),\n\t\t\t\t\t\t@Result(\n\t\t\t\t\t\t\t\tname = \"defaultAction\",\n\t\t\t\t\t\t\t\ttype = \"chain\",\n\t\t\t\t\t\t\t\tlocation = \"index\"),\n\t\t\t\t},\n\t\t\t\tparams = {\n\t\t\t\t\t\t\"pageId\", \"{1}\"\n\t\t\t\t}),\n\t\t@Action(value = \"index\",\n\t\t\t\tresults = {\n\t\t\t\t\t\t@Result(\n\t\t\t\t\t\t\t\tname = \"success\",\n\t\t\t\t\t\t\t\tlocation = \"index.jsp\"),\n\t\t\t\t\t\t@Result(\n\t\t\t\t\t\t\t\tname = \"input\",\n\t\t\t\t\t\t\t\tlocation = \"index.jsp\"),\n\t\t\t\t}),\n})\n@InterceptorRefs({\n\t\t@InterceptorRef(\"defaultStack\"),\n\t\t@InterceptorRef(\"debugging\")\n})\n@ExceptionMappings({\n\t\t@ExceptionMapping(\n\t\t\t\texception = \"java.lang.Exception\",\n\t\t\t\tresult = \"exception\"\n\t\t),\n})\npublic class IndexAction extends BaseAction<IndexModel> {\n\n\t/**\n\t * \u30c7\u30d0\u30c3\u30b0\u7528.\n\t *\n\t */\n\tpublic IndexAction() {\n\t\tsuper(new IndexModel());\n\t}\n\n\t@Override\n\tpublic String execute() throws IOException, SQLException, ServerException {\n\t\tSystem.out.println(\"index\");\n\n\t\tResourceBundle property = ResourceBundle.getBundle(\"struts\");\n\n\t\tString resultPath = property.getString(\"struts.convention.result.path\");\n\n\t\tString classes = getClass().getResource(\"/\").getFile();\n\t\tFile root = new File(classes, \"../../\" + resultPath);\n\t\tFile page = new File(root, \"debug/\" + model.pageId + \"/index.jsp\");\n\t\tif (!page.exists()) {\n\t\t\treturn \"defaultAction\";\n\t\t}\n\n\t\treturn super.execute();\n\t}\n}\n```\n", "tags": ["struts2", "Java"]}