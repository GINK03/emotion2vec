{"context": "\n\n\u3053\u306e\u8a18\u4e8b\u306e\u76ee\u7684\n\u30d3\u30eb\u30c9\u30c4\u30fc\u30ebGradle\u3092\u4f7f\u3063\u3066\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7ba1\u7406\u3057\u3001\u6210\u679c\u7269\u3068\u3057\u3066\u5b9f\u884c\u53ef\u80fdJAR\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806\u306e\u5099\u5fd8\u9332\u3067\u3059\u3002\n\n\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7ba1\u7406\n\u5916\u90e8JAR\u306b\u4f9d\u5b58\u3059\u308b\u5b9f\u884c\u53ef\u80fdJAR\u306e\u4f5c\u6210\uff08\u4f9d\u5b58JAR\u3092\u3059\u3079\u3066\u5185\u5305\u3057\u305fJAR\u3001fat-JAR\u306b\u306f\u3057\u306a\u3044\uff09\n\n\u304c\u304a\u3082\u306a\u30c6\u30fc\u30de\u3067\u3059\u3002\n\n\u8a18\u4e8b\u4f5c\u6210\u306e\u80cc\u666f\nJavaFX1\u306b\u3088\u3063\u3066GUI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u6a5f\u4f1a\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u6700\u7d42\u7684\u306bjavapackager2\u3068\u3044\u3046\u30c4\u30fc\u30eb\u306b\u3088\u3063\u3066EXE\u5f62\u5f0f\u3067\u914d\u5e03\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u524d\u6bb5\u968e\u3068\u3057\u3066\u3001\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3067\u8d77\u52d5\u53ef\u80fd\u306aJAR\u3092\u751f\u6210\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u307e\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u5185\u90e8\u51e6\u7406\u304c\u307b\u3068\u3093\u3069\u5171\u901a\u3067\u3001\u7d30\u304b\u3044\u6319\u52d5\u306e\u7570\u306a\u308b\u8907\u6570\u306e\u7a2e\u985e\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u5171\u901a\u90e8\u5206\u306fcommon.jar\u3068\u3057\u3001\u5165\u308a\u53e3\u3068\u306a\u308bJAR\u3092app1.jar\u3001app2.jar\uff08\u305d\u308c\u305e\u308ccommon.jar\u306b\u4f9d\u5b58\uff09\u306a\u3069\u3068\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u793e\u5185\u306eJenkins\u3092\u8997\u3044\u3066\u4f3c\u305f\u69cb\u6210\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u63a2\u3057\u3066\u307f\u3066\u3082\u3001Gradle\u3060\u3051\u3067\u5b8c\u7d50\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u306a\u3044\u72b6\u614b\u3067\u3057\u305f\u3002\ncommon\u306ebuild.gradle\u3092\u547c\u3073\u3001\u6b21\u3044\u3067app1\u306ebuild.gradle\u3092\u547c\u3076\u3068\u3044\u3046\u3088\u3046\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u308b\u3060\u3051\u3060\u3063\u305f\u306e\u3067\u3059\u3002\n\u305d\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u771f\u4f3c\u3059\u308c\u3070\u76ee\u7684\u306f\u679c\u305f\u305b\u305f\u306e\u3067\u3059\u304c\u3001\u5b66\u7fd2\u306e\u305f\u3081\u3001Gradle\u3067\u5b8c\u7d50\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3068\u3057\u307e\u3057\u305f\u3002\n\n\u691c\u8a3c\u74b0\u5883\n\nmacOS 10.12.1 (Sierra)\nJava 1.8.0_102\nGradle 3.2.1\n\n\n\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u5b9f\u884c\u53ef\u80fdJAR\u3092\u4f5c\u6210\u3059\u308b\n\u5358\u7d14\u5316\u306e\u305f\u3081\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f1\u3064\u3060\u3051\u3067\u59cb\u3081\u3066\u307f\u307e\u3059\u3002\n\n\u6700\u5c0f\u9650\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\n\u307e\u305a\u306f\u6700\u5c0f\u9650\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081hello\u30bf\u30b9\u30af\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u76f4\u4e0b\u306bapp, common, master\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u308a\u3001master\u76f4\u4e0b\u306bbuild.gradle\u3068settings.gradle\u3092\u4f5c\u6210\u3057\u307e\u30593\uff1a\nmaster$ tree ../\n../\n\u251c\u2500\u2500 app\n\u251c\u2500\u2500 common\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n\nsettings.gradle\u306b\u306f\u3001\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u8a8d\u8b58\u3055\u305b\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u30eb\u30fc\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6307\u5b9a\u304c\u3042\u308a\u307e\u305b\u3093\u304c\u3001master\u3068\u3044\u3046\u540d\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u304c\u81ea\u52d5\u3067\u30eb\u30fc\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u308b\u306e\u3067\u3001\u6307\u5b9a\u3057\u3066\u3044\u307e\u305b\u30934\uff1a\n\nsettings.gradle\nincludeFlat 'app', 'common'\n\n\nbuild.gradle\u3067\u306f\u3001allprojects\u30d6\u30ed\u30c3\u30af\u5185\u3067hello\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3057\u307e\u30595\uff1a\n\nbuild.gradle\nallprojects {\n    task hello {\n        doLast {\n            println \"I`m ${project.name}.\"\n        }\n    }\n}\n\n\n\u3053\u3053\u307e\u3067\u3067\u304d\u305f\u3089\u3001master\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067hello\u30bf\u30b9\u30af\u3092\u547c\u3073\u307e\u30596\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\uff1a\nmaster$ gradle -q hello\nI`m master.\nI`m app.\nI`m common.\n\n\u3061\u306a\u307f\u306b\u3001common\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067hello\u30bf\u30b9\u30af\u3092\u547c\u3076\u3068\u3001common\u306e\u30bf\u30b9\u30af\u3060\u3051\u304c\u547c\u3070\u308c\u307e\u3059\u3002\n\u3053\u306e\u6027\u8cea\u3092\u4f7f\u3048\u3070\u3001\u7279\u5b9a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u307f\u306e\u30d3\u30eb\u30c9\u3082\u53ef\u80fd\u3067\u3059\uff1a\ncommon$ gradle -q hello\nI`m common.\n\n\napp\u3068common\u3092Eclipse\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3059\u308b\n\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bEclipse\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092allprojects\u30d6\u30ed\u30c3\u30af\u306e\u5f8c\u308d\u306b\u8ffd\u8a18\u3057\u307e\u3059\uff1a\n\nbuild.gradle\n\u2026\n\nsubprojects {\n    apply {\n        plugin 'eclipse'\n    }\n}\n\n\n\u3053\u308c\u3060\u3051\u3067\u3082\u3001eclipse\u30bf\u30b9\u30af\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3001Eclipse\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\uff1a\nmaster$ gradle eclipse\n:app:eclipseProject\n:app:eclipse\n:common:eclipseProject\n:common:eclipse\n\nBUILD SUCCESSFUL\n\nTotal time: 2.067 secs\n\n\u305f\u3060\u3001\u5b9f\u969b\u306b\u306fsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3082\u5fc5\u8981\u306a\u306e\u3067\u3001gradle\u30bf\u30b9\u30af\u3067\u751f\u6210\u3057\u3066\u307f\u307e\u30597\u3002\nJava\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u3001initSrcDirs\u30bf\u30b9\u30af\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nbuild.gradle\n\u2026\n\nsubprojects {\n    apply {\n        plugin 'eclipse'\n        plugin 'java'\n    }\n\n    task initSrcDirs {\n        doLast {\n            sourceSets.all {\n                java.srcDirs*.mkdirs()\n                resources.srcDirs*.mkdirs()\n            }\n        }\n    }\n}\n\n\ninitSrcDirs\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001src/main/java\u3084src/main/resources\u306a\u3069\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\u305d\u308c\u3089\u306e\u30d1\u30b9\u306b\u3059\u3067\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u3066\u3044\u3066\u3082\u3001\u7a7a\u306b\u306a\u308b\u3053\u3068\u306f\u306a\u3044\u306e\u3067\u3001\u5b89\u5168\u306b\u4f7f\u3048\u307e\u3059\uff1a\nmaster$ gradle initSrcDirs\n:app:initSrcDirs\n:common:initSrcDirs\n\nBUILD SUCCESSFUL\n\nTotal time: 0.909 secs\n\nmaster$ tree ../\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 main\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 resources\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 resources\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 main\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 resources\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 resources\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n\ninitSrcDirs\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\u969b\u306b\u73fe\u308c\u305f\u5909\u6570\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\nsourceSets\u306f\u3001Java\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5b9a\u7fa9\u3059\u308bsrc/main/java\u306a\u3069\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u4f53\u7cfb\u3067\u3059\u3002\n\nmkdirs()\u306f\u3001srcDirs\u304cjava.io.File\u306e\u30ea\u30b9\u30c8\u306a\u306e\u3067\u3001java.io.File\u306emkdirs\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u308c\u4ee5\u5916\u306e\u69cb\u6587\uff08\u305f\u3068\u3048\u3070\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e*.\uff09\u304c\u6c17\u306b\u306a\u308b\u65b9\u306fGroovy\u306e\u6587\u6cd5\u3092\u8abf\u3079\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u304c\u3067\u304d\u305f\u72b6\u614b\u3067\u518d\u5ea6eclipse\u30bf\u30b9\u30af\u3092\u547c\u3076\u3068\u3001\u304d\u3061\u3093\u3068\u30af\u30e9\u30b9\u30d1\u30b9\u3082\u901a\u308a\u307e\u3059\uff08\u5148\u307b\u3069\u306f\u306a\u304b\u3063\u305feclipseClaspath\u30bf\u30b9\u30af\u304c\u547c\u3070\u308c\u3066\u3044\u307e\u3059\uff09\uff1a\nmaster$ gradle eclipse\n:app:eclipseClasspath\n:app:eclipseJdt\n:app:eclipseProject\n:app:eclipse\n:common:eclipseClasspath\n:common:eclipseJdt\n:common:eclipseProject\n:common:eclipse\n\nBUILD SUCCESSFUL\n\nTotal time: 0.994 secs\n\n\napp\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092common\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u4f9d\u5b58\u3055\u305b\u308b\n\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7ba1\u7406\u3067\u5b9f\u73fe\u3057\u305f\u304b\u3063\u305f\u3053\u3068\u306e\u672c\u8cea\u306b\u53d6\u308a\u304b\u304b\u308a\u307e\u3059\u3002\napp\u3092common\u3078\u4f9d\u5b58\u3055\u305b\u307e\u3059\u3002\n\n\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\n\u307e\u305a\u306f\u3001\u5931\u6557\u30b1\u30fc\u30b9\u3092\u518d\u73fe\u3059\u308b\u305f\u3081\u3001build.gradle\u3092\u5909\u66f4\u305b\u305a\u306b\u4ee5\u4e0b\u306e2\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nConstant.java\u306fcommon\u914d\u4e0b\u3078\u3001Main.java\u306fapp\u914d\u4e0b\u3078\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u5f53\u7136\u306a\u304c\u3089\u3001Eclipse\u3067\u3082\u4e92\u3044\u306e\u4f9d\u5b58\u95a2\u4fc2\u306f\u8a8d\u8b58\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u88dc\u5b8c\u3067\u304d\u306a\u3044\u3046\u3048\u30a8\u30e9\u30fc\u3082\u51fa\u307e\u3059\uff1a\n\nConstant.java\npackage com.github.kazuma1989.dec10_2016.common;\n\npublic class Constant {\n    public static final String NAME = \"common\";\n}\n\n\n\nMain.java\npackage com.github.kazuma1989.dec10_2016.app;\n\nimport com.github.kazuma1989.dec10_2016.common.Constant;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(Constant.NAME);\n    }\n}\n\n\n\u3053\u306e\u72b6\u614b\u3067jar\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u671f\u5f85\u3069\u304a\u308a\u306b\u30d3\u30eb\u30c9\u5931\u6557\u3067\u3059\u3002\njar\u30bf\u30b9\u30af\u306e\u524d\u6bb5\u968e\u306ecompileJava\u30bf\u30b9\u30af\u3067\u5931\u6557\u3057\u3066\u3044\u307e\u3059\uff1a\nmaster$ gradle jar\n:app:compileJava\n/Users/kazuma/qiita/2016/dec10/app/src/main/java/com/github/kazuma1989/dec10_2016/app/Main.java:3: \u30a8\u30e9\u30fc: \u30d1\u30c3\u30b1\u30fc\u30b8com.github.kazuma1989.dec10_2016.common\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\nimport com.github.kazuma1989.dec10_2016.common.Constant;\n                                              ^\n/Users/kazuma/qiita/2016/dec10/app/src/main/java/com/github/kazuma1989/dec10_2016/app/Main.java:7: \u30a8\u30e9\u30fc: \u30b7\u30f3\u30dc\u30eb\u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093\n        System.out.println(Constant.NAME);\n                           ^\n  \u30b7\u30f3\u30dc\u30eb:   \u5909\u6570 Constant\n  \u5834\u6240: \u30af\u30e9\u30b9 Main\n\u30a8\u30e9\u30fc2\u500b\n:app:compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileJava'.\n> Compilation failed; see the compiler error output for details.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 0.966 secs\n\n\n\u6210\u529f\u3059\u308b\u30b1\u30fc\u30b9\n\u6b21\u306b\u3001\u30d3\u30eb\u30c9\u3092\u6210\u529f\u3055\u305b\u307e\u3059\u3002\nsubprojects\u30d6\u30ed\u30c3\u30af\u306e\u6700\u5f8c\u3078\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8ffd\u8a18\u3057\u3066\u3001common\u3078\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3057\u307e\u3059\uff1a\n\nbuild.gradle\n\u2026\n\nsubprojects {\n    \u2026\n\n    // common\u4ee5\u5916\u306e\u8a2d\u5b9a\n    if (project.name in ['common']) return\n\n    dependencies {\n        compile project(':common')\n    }\n}\n\n\n\u4eca\u5ea6\u306fjar\u30bf\u30b9\u30af\u304c\u6210\u529f\u3057\u3001\u4f5c\u6210\u3057\u305fJAR\u3082\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306e\u6607\u9806\u3067\u306f\u306a\u304f\u3001common\u306eJAR\u5316\u304c\u5148\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\uff1a\nmaster$ gradle jar\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 1.154 secs\n\nmaster$ java -cp ../app/build/libs/app.jar com.github.kazuma1989.dec10_2016.app.Main\ncommon\n\njar\u30bf\u30b9\u30af\u306f\u5fc5\u305a\u3057\u3082master\u304b\u3089\u547c\u3076\u5fc5\u8981\u306f\u306a\u304f\u3001app\u306e\u3082\u306e\u3060\u3051\u3092\u547c\u3093\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\n\u305d\u306e\u5834\u5408\u3082\u3001common\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304b\u3089app\u304cJAR\u5316\u3055\u308c\u308b\u306e\u3067\u3001\u304d\u3061\u3093\u3068\u6210\u529f\u3057\u307e\u3059\uff1a\nmaster$ gradle clean :app:jar\n:app:clean\n:common:clean\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.938 secs\n\nmaster$ cd ../app/\n\napp$ gradle clean jar\n:app:clean\n:common:compileJava UP-TO-DATE\n:common:processResources UP-TO-DATE\n:common:classes UP-TO-DATE\n:common:jar UP-TO-DATE\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.922 secs\n\n\u4f9d\u5b58\u95a2\u4fc2\u3092\u8a2d\u5b9a\u5f8c\u3001\u518d\u5ea6eclipse\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308c\u3070\u3001Eclipse\u3067\u306e\u30a8\u30e9\u30fc\u3082\u89e3\u6d88\u3057\u3001\u30b3\u30fc\u30c9\u88dc\u5b8c\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066app\u3092\u5b9f\u884c\u53ef\u80fdJAR\u306b\u3059\u308b\njar\u30bf\u30b9\u30af\u306b\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u3001\u5b9f\u884c\u53ef\u80fdJAR\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n\u3046\u307e\u304f\u3044\u304f\u3053\u3068\u3082\u3042\u308b\u304c\u3001\u57fa\u672c\u306f\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\nbuild.gradle\u306e\u6700\u5f8c\u306b\u6700\u4f4e\u9650\u306e\u8a18\u8ff0\u3060\u3051\u3092\u8ffd\u52a0\u3057\u3066\u3001\u3068\u306b\u304b\u304fjar\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\uff1a\n\nbuild.gradle\n\u2026\n\nproject(':app') {\n    jar {\n        manifest {\n            attributes 'Main-Class': 'com.github.kazuma1989.dec10_2016.app.Main'\n        }\n    }\n}\n\n\nmaster$ gradle jar\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 3.177 secs\n\n\u4f5c\u6210\u3057\u305fJAR\u3092java\u30b3\u30de\u30f3\u30c9\u3067\u547c\u3073\u51fa\u3059\u3068\u3001Main\u30af\u30e9\u30b9\u304c\u547c\u3070\u308c\u307e\u3059\uff1a\nmaster$ java -jar ../app/build/libs/app.jar \ncommon\n\n\u3057\u304b\u3057\u3001\u3053\u308c\u304c\u52d5\u4f5c\u3057\u305f\u306e\u306f\u305f\u307e\u305f\u307e\u3067\u3059\u3002\ncommon.jar\u3078\u306e\u4f9d\u5b58\u60c5\u5831\u3092\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306b\u8a18\u8f09\u3057\u306a\u3044\u3068\u3001Constant\u30af\u30e9\u30b9\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u304b\u3089\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001Main\u30af\u30e9\u30b9\u304cConstant\u6587\u5b57\u5217\u5b9a\u6570\u3057\u304b\u53c2\u7167\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u305d\u306e\u5024\u304cMain\u30af\u30e9\u30b9\u306b\u4fdd\u6301\u3055\u308c\u3066\u3057\u307e\u3063\u305f\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\ncommon.jar\u3078\u306e\u4f9d\u5b58\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3001\u5e38\u306b\u3046\u307e\u304f\u3044\u304f\u30b1\u30fc\u30b9\n\u901a\u5e38\u306fNoClassDefFoundError\u3068\u306a\u308a\u307e\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u306f\u6210\u529f\u3059\u308b\u304c\u3001\u5b9f\u884c\u6642\u306b\u5931\u6557\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u305f\u3068\u3048\u3070\u4ee5\u4e0b\u306f\u3001common\u306b\u57fa\u5e95\u30af\u30e9\u30b9AbstractApplication\u3092\u4f5c\u6210\u3057\u3001app\u3067\u7d99\u627f\u3057\u3066\u5229\u7528\u3057\u305f\u5834\u5408\u3067\u3059\uff1a\nmaster$ gradle jar\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 1.188 secs\n\nmaster$ java -jar ../app/build/libs/app.jar \nException in thread \"main\" java.lang.NoClassDefFoundError: com/github/kazuma1989/dec10_2016/common/AbstractApplication\n    at java.lang.ClassLoader.defineClass1(Native Method)\n    at java.lang.ClassLoader.defineClass(ClassLoader.java:763)\n    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n    at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\n    at java.net.URLClassLoader.access$100(URLClassLoader.java:73)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:368)\n    at java.net.URLClassLoader$1.run(URLClassLoader.java:362)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:361)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    at com.github.kazuma1989.dec10_2016.app.Main.main(Main.java:9)\nCaused by: java.lang.ClassNotFoundException: com.github.kazuma1989.dec10_2016.common.AbstractApplication\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n    ... 13 more\n\nmaster$ tree ../app/build/libs/\n../app/build/libs/\n\u2514\u2500\u2500 app.jar\n\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001jar\u30d6\u30ed\u30c3\u30af\u5185\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306b\u306fattributes 'Class-Path'\u304c\u3001\u30bf\u30b9\u30af\u306b\u306fcopy\u64cd\u4f5c\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\uff1a\n\nbuild.gradle\n\u2026\n\nproject(':app') {\n    jar {\n        manifest {\n            attributes 'Main-Class': 'com.github.kazuma1989.dec10_2016.app.Main'\n            attributes 'Class-Path': configurations.runtime.collect{it.name}.join(' ')\n        }\n\n        doLast {\n            copy {\n                from configurations.runtime\n                into destinationDir\n            }\n        }\n    }\n}\n\n\nconfigurations.runtime\u306f\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5b9f\u884c\u6642\u4f9d\u5b58\u306b\u3064\u3044\u3066\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u306b\u306f\u3001dependencies\u30d6\u30ed\u30c3\u30af\u5185\u3067compile\u3068\u3057\u3066\u6307\u5b9a\u3057\u305fcommon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u60c5\u5831\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u4f9d\u5b58\u306f\u5b9f\u884c\u6642\u4f9d\u5b58\u3067\u3082\u3042\u308b\u304b\u3089\u3067\u3059\u3002\nattributes 'Class-Path'\u306e\u3068\u3053\u308d\u3067\u306f\u3001configurations.runtime\u306e\u5185\u5bb9\u3092\u30b9\u30da\u30fc\u30b9\u533a\u5207\u308a\u3067\u6587\u5b57\u5217\u9023\u7d50\u3057\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u4e2d\u8eab\u306fClass-Path: common.jar\u3068\u306a\u308a\u307e\u3059\uff08common\u4ee5\u5916\u306b\u3082\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001Class-Path: common.jar another.jar extra.jar\u306e\u3088\u3046\u306b\u306a\u308b\uff09\u3002\n\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306bClass-Path: common.jar\u3068\u66f8\u3044\u3066\u3042\u308bJAR\u306f\u3001\u81ea\u5206\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306ecommon.jar\u3092\u63a2\u3057\u306b\u3044\u304f\u306e\u3067\u3001copy\u30d6\u30ed\u30c3\u30af\u3067app.jar\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306bcommon.jar\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3044\u307e\u3059\u3002\n\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u8ffd\u8a18\u3068\u4f9d\u5b58JAR\u306e\u30b3\u30d4\u30fc\u306b\u3088\u3063\u3066\u3001\u4eca\u5ea6\u306fJAR\u306e\u5b9f\u884c\u304c\u6210\u529f\u3057\u307e\u3059\u3002\nlibs\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u6301\u3061\u904b\u3079\u3070\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u5b8c\u7d50\u3059\u308b\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff1a\nmaster$ gradle clean jar\n:app:clean\n:common:clean\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.952 secs\n\nmaster$ java -jar ../app/build/libs/app.jar \ncommon\n\nmaster$ tree ../app/build/libs/\n../app/build/libs/\n\u251c\u2500\u2500 app.jar\n\u2514\u2500\u2500 common.jar\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306e\u8a2d\u5b9a\u5024\u3092\u30eb\u30fc\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u5206\u96e2\u3057\u3001\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\u3057\u3084\u3059\u304f\u3059\u308b\n\u3053\u3053\u307e\u3067\u3067\u3001\u3072\u3068\u307e\u305a\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\u306f\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u6b21\u306fapp2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\u3057\u3001\u73fe\u5b9f\u306e\u4f8b\u306b\u8fd1\u3065\u3051\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u6574\u7406\u3092\u3057\u307e\u3059\u3002\n\napp\u306e\u307f\u306e\u8a2d\u5b9a\u3092app/build.gradle\u306b\u5206\u96e2\u3059\u308b\n\u3072\u3068\u307e\u305a\u52d5\u304b\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092master\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306ebuild.gradle\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\u3067\u3059\u304c\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u3001\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5897\u3048\u308b\u305f\u3073\u306bmaster/build.gradle\u306b\u4f3c\u305f\u3088\u3046\u306a\u8a18\u8ff0\u304c\u5897\u3048\u3066\u3044\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5897\u3084\u3057\u3066\u3082\u3001\u5909\u66f4\u306fsettings.gradle\u306e\u307f\u306b\u7559\u3081\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u306fapp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306ebuild.gradle\u306b\u5206\u96e2\u3057\u307e\u3059\uff1a\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 build.gradle\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n\n\n\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\n\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3001\u4e00\u898b\u6210\u529f\u3057\u305d\u3046\u3067\u3059\u304c\u3001\u5931\u6557\u3057\u307e\u3059\u3002\napp/build.gradle\u306b\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b\u7570\u306a\u308b\u30e1\u30a4\u30f3\u30af\u30e9\u30b9\u306e\u307f\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nmaster/build.gradle\u3067\u306f\u3001project(':app')\u30d6\u30ed\u30c3\u30af\u306b\u66f8\u3044\u3066\u3044\u305f\u5185\u5bb9\u3092subprojects\u30d6\u30ed\u30c3\u30af\u306b\u79fb\u3057\u307e\u3059\uff1a\n\napp/build.gradle\njar {\n    manifest {\n        attributes 'Main-Class': 'com.github.kazuma1989.dec10_2016.app.Main'\n    }\n}\n\n\n\nmaster/build.gradle\n\u2026\n\nsubprojects {\n    \u2026\n\n    jar {\n        manifest {\n            attributes 'Class-Path': configurations.runtime.collect{it.name}.join(' ')\n        }\n\n        doLast {\n            copy {\n                from configurations.runtime\n                into libsDir\n            }\n        }\n    }\n}\n\n// project(':app') {\n// }\n\n\n33\u884c\u76ee\uff08attributes 'Class-Path'\u306e\u7b87\u6240\uff09\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3059\uff1a\nmaster$ gradle clean jar\n\nFAILURE: Build failed with an exception.\n\n* Where:\nBuild file '/Users/kazuma/qiita/2016/dec10/master/build.gradle' line: 33\n\n* What went wrong:\nA problem occurred evaluating root project 'master'.\n> Could not resolve all dependencies for configuration ':app:runtime'.\n   > Project :app declares a dependency from configuration 'compile' to configuration 'default' which is not declared in the descriptor for project :common.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 0.837 secs\n\napp\u3067\u5229\u7528\u3057\u3066\u3044\u308bconfigurations.runtime\u304c\u89e3\u6c7a\u3067\u304d\u306a\u3044\u305f\u3081\u30a8\u30e9\u30fc\u3068\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\u3053\u308c\u306f\u3001common\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067Java\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u547c\u3073\u51fa\u3059\u524d\u306b\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u304c\u5b9f\u884c\u3055\u308c\u305f\u305f\u3081\u3067\u3059\u3002\n\nmaster/build.gradle\uff08app/build.gradle\u5206\u96e2\u524d\uff09\nsubprojects {\n    // app -> common\u306e\u9806\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u304c\uff08\u4e0b\u306b\u7d9a\u304f\uff09\n    apply {\n        plugin 'java'\n        \u2026\n    }\n\n    \u2026\n}\n\nproject(':app') {\n    // \u3053\u306e\u30d6\u30ed\u30c3\u30af\u306fcommon\u3078\u306eJava\u30d7\u30e9\u30b0\u30a4\u30f3\u9069\u7528\u304c\u6e08\u3093\u3060\u5f8c\u306b\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u554f\u984c\u306a\u304b\u3063\u305f\u3002\n    jar {\n        \u2026\n    }\n}\n\n\n\nmaster/build.gradle\uff08app/build.gradle\u5206\u96e2\u5f8c\uff09\nsubprojects {\n    // app -> common\u306e\u9806\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u3002\n    apply {\n        plugin 'java'\n        \u2026\n    }\n\n    // project(':app')\u306b\u3042\u3063\u305f\u51e6\u7406\u3092subprojects\u30d6\u30ed\u30c3\u30af\u306b\u6301\u3063\u3066\u304d\u305f\u305f\u3081\u3001common\u3078\u306eJava\u30d7\u30e9\u30b0\u30a4\u30f3\u9069\u7528\u3088\u308a\u524d\u306b\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u3068\u306a\u308a\u3001\u30a8\u30e9\u30fc\u3002\n    jar {\n        \u2026\n    }\n}\n\n\n\n\u6210\u529f\u3059\u308b\u30b1\u30fc\u30b9\nsubprojects\u30d6\u30ed\u30c3\u30af\u3092\u3001\u300ccommon\u3068app\u3092\u542b\u3081\u305f\u3059\u3079\u3066\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300d\u3068\u300ccommon\u4ee5\u5916\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300d\u3067\u5206\u3051\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3046\u307e\u304f\u3044\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u30d6\u30ed\u30c3\u30af\u306e\u610f\u5473\u3082\u306f\u3063\u304d\u308a\u3059\u308b\u306e\u3067\u3001\u53ef\u8aad\u6027\u3068\u3057\u3066\u3082\u3053\u3061\u3089\u306e\u307b\u3046\u304c\u3088\u3044\u3067\u3057\u3087\u3046\uff1a\n\nmaster/build.gradle\n// common\u3068app\u3092\u542b\u3081\u305f\u3059\u3079\u3066\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\nsubprojects {\n    apply {\n        plugin 'java'\n        \u2026\n    }\n\n    \u2026\n}\n\n// common\u4ee5\u5916\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\nsubprojects {\n    if (project.name in ['common']) return\n\n    dependencies {\n        \u2026\n    }\n\n    jar {\n        \u2026\n    }\n}\n\n\nmaster$ gradle clean jar\n:app:clean\n:common:clean\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.94 secs\n\nmaster$ java -jar ../app/build/libs/app.jar \ncommon\n\n\napp/build.gradle\u3092gradle.properties\u306b\u7f6e\u304d\u63db\u3048\u308b\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306e\u8a2d\u5b9a\u304c\u5024\u3060\u3051\u306e\u9055\u3044\u3057\u304b\u306a\u3044\u306e\u3067\u3001app/build.gradle\u3092gradle.properties\u306b\u7f6e\u304d\u63db\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\ngradle.properties\u306f\u3001build.gradle\u540c\u69d8\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u76f4\u4e0b\u306b\u5b58\u5728\u3059\u308b\u3068\u81ea\u52d5\u3067\u8aad\u307f\u8fbc\u307e\u308c\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u30d5\u30a1\u30a4\u30eb\u3067\u3059\uff1a\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n\n\napp/gradle.properties\njar.manifest.attributes.Main-Class=com.github.kazuma1989.dec10_2016.app.Main\n\n\nbuild.gradle\u304b\u3089\u306f\u3001getProperty\u30e1\u30bd\u30c3\u30c9\u306b\u3088\u3063\u3066\u5024\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u6ce8\u610f\u70b9\u306f\u3001afterEvaluate\u30d6\u30ed\u30c3\u30af\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u3067\u3059\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3001master\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u9806\u3067\u8aad\u307f\u8fbc\u307e\u308c\u308b\u305f\u3081\u3001master/build.gradle\u306e\u6642\u70b9\u3067\u306fapp/gradle.properties\u304c\u307e\u3060\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u3067\u3059\u3002\nafterEvaluate\u30d6\u30ed\u30c3\u30af\u5185\u306f\u3001\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a55\u4fa1\u5f8c\uff08\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092\u5b8c\u4e86\u3057\u305f\u5f8c\uff09\u306b\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u3046\u307e\u304f\u3044\u304d\u307e\u3059\uff1a\n\nmaster/build.gradle\n\u2026\n\nsubprojects {\n    \u2026\n\n    afterEvaluate {\n        jar {\n            manifest {\n                attributes 'Main-Class': getProperty('jar.manifest.attributes.Main-Class')\n                attributes 'Class-Path': configurations.runtime.collect{it.name}.join(' ')\n            }\n\n            \u2026\n        }\n    }\n}\n\n\n\n\u307e\u3068\u3081\n\u6700\u7d42\u7684\u306b\u3001\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u69cb\u6210\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\uff1a\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties   // \u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u5024\u3092\u66f8\u304f\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src                 // \u5404\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3002common\u306b\u4f9d\u5b58\u3059\u308b\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src                 // \u5171\u901a\u90e8\u54c1\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle        // \u5168\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u5229\u7528\u3059\u308b\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\n    \u2514\u2500\u2500 settings.gradle     // \u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u542b\u3081\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u6307\u5b9a\u3059\u308b\n\nmaster\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067gradle jar\u3068\u3059\u308c\u3070\u3059\u3079\u3066\u306eJAR\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067gradle jar\u3068\u3059\u308b\u304b\u3001gradle :common:jar\u3068\u3059\u308b\u3053\u3068\u3067\u500b\u5225\u306eJAR\u3092\u751f\u6210\u3067\u304d\u307e\u3059\u3002\n\u751f\u6210\u3057\u305fJAR\u306f\u3001libs\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u4f9d\u5b58\u3059\u308bJAR\u3068\u307e\u3068\u307e\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3054\u3068\u6301\u3061\u904b\u3079\u3070\u305d\u306e\u307e\u307e\u4f7f\u3048\u307e\u3059\u3002\n\u4eca\u5f8c\u3001\u3055\u3089\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5897\u3084\u3057\u3066\u3044\u304f\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff1a\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 app2\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 app3\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 build.gradle        // \u7279\u5225\u306a\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u3089\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u914d\u7f6e\u3057\u3066\u3082\u3088\u3044\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 build.gradle        // common\u304c\u4f9d\u5b58\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u306a\u3069\u3092\u6307\u5b9a\u3059\u308b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n\n\n\n1 JavaFX\u306e\u6982\u8981(\u30ea\u30ea\u30fc\u30b98) (https://docs.oracle.com/javase/jp/8/javafx/get-started-tutorial/jfx-overview.htm)\u00a0\u21a9\n\n\n\u81ea\u5df1\u5b8c\u7d50\u578b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u5316 (https://docs.oracle.com/javase/jp/8/docs/technotes/guides/deploy/self-contained-packaging.html)\u00a0\u21a9\n\n\nMac\u3067tree\u30b3\u30de\u30f3\u30c9 - Qiita (http://qiita.com/kanuma1984/items/c158162adfeb6b217973)\u00a0\u21a9\n\n\nGradle\u3067\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 - Qiita (http://qiita.com/shiena/items/371fe817c8fb6be2bb1e)\u00a0\u21a9\n\n\nleftShift\u30e1\u30bd\u30c3\u30c9\u3068<<\u6f14\u7b97\u5b50\u306f\u975e\u63a8\u5968\u3068\u306a\u308a\u307e\u3057\u305f\u3002(https://docs.gradle.org/3.2/release-notes#the-left-shift-operator-on-the-task-interface)\u00a0\u21a9\n\n\nprintln\u306e\u7d50\u679c\u3092\u898b\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001-q\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\u00a0\u21a9\n\n\nGradle\u306b\u306finit\u30bf\u30b9\u30af\u304c\u3042\u3089\u304b\u3058\u3081\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4f59\u8a08\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3001\u81ea\u524d\u3067\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\u00a0\u21a9\n\n\n\n# \u3053\u306e\u8a18\u4e8b\u306e\u76ee\u7684\n\n\u30d3\u30eb\u30c9\u30c4\u30fc\u30ebGradle\u3092\u4f7f\u3063\u3066\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7ba1\u7406\u3057\u3001\u6210\u679c\u7269\u3068\u3057\u3066\u5b9f\u884c\u53ef\u80fdJAR\u3092\u4f5c\u6210\u3059\u308b\u624b\u9806\u306e\u5099\u5fd8\u9332\u3067\u3059\u3002\n\n- \u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u7ba1\u7406\n- \u5916\u90e8JAR\u306b\u4f9d\u5b58\u3059\u308b\u5b9f\u884c\u53ef\u80fdJAR\u306e\u4f5c\u6210\uff08\u4f9d\u5b58JAR\u3092\u3059\u3079\u3066\u5185\u5305\u3057\u305fJAR\u3001fat-JAR\u306b\u306f\u3057\u306a\u3044\uff09\n\n\u304c\u304a\u3082\u306a\u30c6\u30fc\u30de\u3067\u3059\u3002\n\n\n\n\n\n## \u8a18\u4e8b\u4f5c\u6210\u306e\u80cc\u666f\n\nJavaFX[^JavaFX]\u306b\u3088\u3063\u3066GUI\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u308b\u6a5f\u4f1a\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u6700\u7d42\u7684\u306bjavapackager[^javapackager]\u3068\u3044\u3046\u30c4\u30fc\u30eb\u306b\u3088\u3063\u3066EXE\u5f62\u5f0f\u3067\u914d\u5e03\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u305d\u306e\u524d\u6bb5\u968e\u3068\u3057\u3066\u3001\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3067\u8d77\u52d5\u53ef\u80fd\u306aJAR\u3092\u751f\u6210\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n[^JavaFX]: 1 JavaFX\u306e\u6982\u8981(\u30ea\u30ea\u30fc\u30b98) (https://docs.oracle.com/javase/jp/8/javafx/get-started-tutorial/jfx-overview.htm)\n[^javapackager]: \u81ea\u5df1\u5b8c\u7d50\u578b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u5316 (https://docs.oracle.com/javase/jp/8/docs/technotes/guides/deploy/self-contained-packaging.html)\n\n\u307e\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u5185\u90e8\u51e6\u7406\u304c\u307b\u3068\u3093\u3069\u5171\u901a\u3067\u3001\u7d30\u304b\u3044\u6319\u52d5\u306e\u7570\u306a\u308b\u8907\u6570\u306e\u7a2e\u985e\u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u5171\u901a\u90e8\u5206\u306fcommon.jar\u3068\u3057\u3001\u5165\u308a\u53e3\u3068\u306a\u308bJAR\u3092app1.jar\u3001app2.jar\uff08\u305d\u308c\u305e\u308ccommon.jar\u306b\u4f9d\u5b58\uff09\u306a\u3069\u3068\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u793e\u5185\u306eJenkins\u3092\u8997\u3044\u3066\u4f3c\u305f\u69cb\u6210\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u63a2\u3057\u3066\u307f\u3066\u3082\u3001Gradle\u3060\u3051\u3067\u5b8c\u7d50\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u306a\u3044\u72b6\u614b\u3067\u3057\u305f\u3002\ncommon\u306ebuild.gradle\u3092\u547c\u3073\u3001\u6b21\u3044\u3067app1\u306ebuild.gradle\u3092\u547c\u3076\u3068\u3044\u3046\u3088\u3046\u306a\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u308b\u3060\u3051\u3060\u3063\u305f\u306e\u3067\u3059\u3002\n\n\u305d\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u771f\u4f3c\u3059\u308c\u3070\u76ee\u7684\u306f\u679c\u305f\u305b\u305f\u306e\u3067\u3059\u304c\u3001\u5b66\u7fd2\u306e\u305f\u3081\u3001Gradle\u3067\u5b8c\u7d50\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u3068\u3057\u307e\u3057\u305f\u3002\n\n\n\n\n\n## \u691c\u8a3c\u74b0\u5883\n\n- macOS 10.12.1 (Sierra)\n- Java 1.8.0_102\n- Gradle 3.2.1\n\n\n\n\n\n\n# \u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u5b9f\u884c\u53ef\u80fdJAR\u3092\u4f5c\u6210\u3059\u308b\n\n\u5358\u7d14\u5316\u306e\u305f\u3081\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f1\u3064\u3060\u3051\u3067\u59cb\u3081\u3066\u307f\u307e\u3059\u3002\n\n\n\n\n\n## \u6700\u5c0f\u9650\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\n\n\u307e\u305a\u306f\u6700\u5c0f\u9650\u306e\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3001\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081`hello`\u30bf\u30b9\u30af\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\n\n\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u76f4\u4e0b\u306bapp, common, master\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u4f5c\u308a\u3001master\u76f4\u4e0b\u306bbuild.gradle\u3068settings.gradle\u3092\u4f5c\u6210\u3057\u307e\u3059[^Mac\u3067tree\u30b3\u30de\u30f3\u30c9]\uff1a\n\n[^Mac\u3067tree\u30b3\u30de\u30f3\u30c9]: Mac\u3067tree\u30b3\u30de\u30f3\u30c9 - Qiita (http://qiita.com/kanuma1984/items/c158162adfeb6b217973)\n\n```bash\nmaster$ tree ../\n../\n\u251c\u2500\u2500 app\n\u251c\u2500\u2500 common\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n```\n\nsettings.gradle\u306b\u306f\u3001\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u8a8d\u8b58\u3055\u305b\u305f\u3044\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u30eb\u30fc\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6307\u5b9a\u304c\u3042\u308a\u307e\u305b\u3093\u304c\u3001master\u3068\u3044\u3046\u540d\u524d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u304c\u81ea\u52d5\u3067\u30eb\u30fc\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u308b\u306e\u3067\u3001\u6307\u5b9a\u3057\u3066\u3044\u307e\u305b\u3093[^Gradle\u3067\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8]\uff1a\n\n[^Gradle\u3067\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8]: Gradle\u3067\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 - Qiita (http://qiita.com/shiena/items/371fe817c8fb6be2bb1e)\n\n```groovy:settings.gradle\nincludeFlat 'app', 'common'\n```\n\nbuild.gradle\u3067\u306f\u3001`allprojects`\u30d6\u30ed\u30c3\u30af\u5185\u3067`hello`\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3057\u307e\u3059[^doLast\u3092\u4f7f\u3046\u7406\u7531]\uff1a\n\n[^doLast\u3092\u4f7f\u3046\u7406\u7531]: `leftShift`\u30e1\u30bd\u30c3\u30c9\u3068`<<`\u6f14\u7b97\u5b50\u306f\u975e\u63a8\u5968\u3068\u306a\u308a\u307e\u3057\u305f\u3002(https://docs.gradle.org/3.2/release-notes#the-left-shift-operator-on-the-task-interface)\n\n```groovy:build.gradle\nallprojects {\n    task hello {\n        doLast {\n            println \"I`m ${project.name}.\"\n        }\n    }\n}\n```\n\n\u3053\u3053\u307e\u3067\u3067\u304d\u305f\u3089\u3001master\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067`hello`\u30bf\u30b9\u30af\u3092\u547c\u3073\u307e\u3059[^q\u306e\u610f\u5473]\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\uff1a\n\n[^q\u306e\u610f\u5473]: `println`\u306e\u7d50\u679c\u3092\u898b\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001`-q`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n```bash\nmaster$ gradle -q hello\nI`m master.\nI`m app.\nI`m common.\n```\n\n\u3061\u306a\u307f\u306b\u3001common\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067`hello`\u30bf\u30b9\u30af\u3092\u547c\u3076\u3068\u3001common\u306e\u30bf\u30b9\u30af\u3060\u3051\u304c\u547c\u3070\u308c\u307e\u3059\u3002\n\u3053\u306e\u6027\u8cea\u3092\u4f7f\u3048\u3070\u3001\u7279\u5b9a\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u307f\u306e\u30d3\u30eb\u30c9\u3082\u53ef\u80fd\u3067\u3059\uff1a\n\n```bash\ncommon$ gradle -q hello\nI`m common.\n```\n\n\n\n\n\n## app\u3068common\u3092Eclipse\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3059\u308b\n\n\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bEclipse\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u3092`allprojects`\u30d6\u30ed\u30c3\u30af\u306e\u5f8c\u308d\u306b\u8ffd\u8a18\u3057\u307e\u3059\uff1a\n\n```groovy:build.gradle\n\u2026\n\nsubprojects {\n    apply {\n        plugin 'eclipse'\n    }\n}\n```\n\n\u3053\u308c\u3060\u3051\u3067\u3082\u3001`eclipse`\u30bf\u30b9\u30af\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3001Eclipse\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\uff1a\n\n```bash\nmaster$ gradle eclipse\n:app:eclipseProject\n:app:eclipse\n:common:eclipseProject\n:common:eclipse\n\nBUILD SUCCESSFUL\n\nTotal time: 2.067 secs\n```\n\n\u305f\u3060\u3001\u5b9f\u969b\u306b\u306fsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3082\u5fc5\u8981\u306a\u306e\u3067\u3001gradle\u30bf\u30b9\u30af\u3067\u751f\u6210\u3057\u3066\u307f\u307e\u3059[^init\u30bf\u30b9\u30af\u3092\u4f7f\u308f\u306a\u3044\u7406\u7531]\u3002\nJava\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u3001`initSrcDirs`\u30bf\u30b9\u30af\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n[^init\u30bf\u30b9\u30af\u3092\u4f7f\u308f\u306a\u3044\u7406\u7531]: Gradle\u306b\u306f`init`\u30bf\u30b9\u30af\u304c\u3042\u3089\u304b\u3058\u3081\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u4f59\u8a08\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u304f\u306a\u3044\u306e\u3067\u3001\u81ea\u524d\u3067\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\n\n```groovy:build.gradle\n\u2026\n\nsubprojects {\n    apply {\n        plugin 'eclipse'\n        plugin 'java'\n    }\n\n    task initSrcDirs {\n        doLast {\n            sourceSets.all {\n                java.srcDirs*.mkdirs()\n                resources.srcDirs*.mkdirs()\n            }\n        }\n    }\n}\n```\n\n`initSrcDirs`\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001src/main/java\u3084src/main/resources\u306a\u3069\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\u305d\u308c\u3089\u306e\u30d1\u30b9\u306b\u3059\u3067\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3057\u3066\u3044\u3066\u3082\u3001\u7a7a\u306b\u306a\u308b\u3053\u3068\u306f\u306a\u3044\u306e\u3067\u3001\u5b89\u5168\u306b\u4f7f\u3048\u307e\u3059\uff1a\n\n```bash\nmaster$ gradle initSrcDirs\n:app:initSrcDirs\n:common:initSrcDirs\n\nBUILD SUCCESSFUL\n\nTotal time: 0.909 secs\n\nmaster$ tree ../\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 main\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 resources\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 resources\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 main\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 resources\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 test\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 java\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 resources\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n```\n\n`initSrcDirs`\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\u969b\u306b\u73fe\u308c\u305f\u5909\u6570\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n- `sourceSets`\u306f\u3001Java\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u5b9a\u7fa9\u3059\u308bsrc/main/java\u306a\u3069\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u4f53\u7cfb\u3067\u3059\u3002\n- `mkdirs()`\u306f\u3001`srcDirs`\u304cjava.io.File\u306e\u30ea\u30b9\u30c8\u306a\u306e\u3067\u3001java.io.File\u306emkdirs\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u308c\u4ee5\u5916\u306e\u69cb\u6587\uff08\u305f\u3068\u3048\u3070\u30a4\u30c6\u30ec\u30fc\u30b7\u30e7\u30f3\u306e`*.`\uff09\u304c\u6c17\u306b\u306a\u308b\u65b9\u306fGroovy\u306e\u6587\u6cd5\u3092\u8abf\u3079\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u304c\u3067\u304d\u305f\u72b6\u614b\u3067\u518d\u5ea6`eclipse`\u30bf\u30b9\u30af\u3092\u547c\u3076\u3068\u3001\u304d\u3061\u3093\u3068\u30af\u30e9\u30b9\u30d1\u30b9\u3082\u901a\u308a\u307e\u3059\uff08\u5148\u307b\u3069\u306f\u306a\u304b\u3063\u305f`eclipseClaspath`\u30bf\u30b9\u30af\u304c\u547c\u3070\u308c\u3066\u3044\u307e\u3059\uff09\uff1a\n\n```bash\nmaster$ gradle eclipse\n:app:eclipseClasspath\n:app:eclipseJdt\n:app:eclipseProject\n:app:eclipse\n:common:eclipseClasspath\n:common:eclipseJdt\n:common:eclipseProject\n:common:eclipse\n\nBUILD SUCCESSFUL\n\nTotal time: 0.994 secs\n```\n\n\n\n\n\n## app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092common\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078\u4f9d\u5b58\u3055\u305b\u308b\n\n\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u7ba1\u7406\u3067\u5b9f\u73fe\u3057\u305f\u304b\u3063\u305f\u3053\u3068\u306e\u672c\u8cea\u306b\u53d6\u308a\u304b\u304b\u308a\u307e\u3059\u3002\napp\u3092common\u3078\u4f9d\u5b58\u3055\u305b\u307e\u3059\u3002\n\n\n\n\n### \u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\n\n\u307e\u305a\u306f\u3001\u5931\u6557\u30b1\u30fc\u30b9\u3092\u518d\u73fe\u3059\u308b\u305f\u3081\u3001build.gradle\u3092\u5909\u66f4\u305b\u305a\u306b\u4ee5\u4e0b\u306e2\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nConstant.java\u306fcommon\u914d\u4e0b\u3078\u3001Main.java\u306fapp\u914d\u4e0b\u3078\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u5f53\u7136\u306a\u304c\u3089\u3001Eclipse\u3067\u3082\u4e92\u3044\u306e\u4f9d\u5b58\u95a2\u4fc2\u306f\u8a8d\u8b58\u3067\u304d\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u88dc\u5b8c\u3067\u304d\u306a\u3044\u3046\u3048\u30a8\u30e9\u30fc\u3082\u51fa\u307e\u3059\uff1a\n\n```java:Constant.java\npackage com.github.kazuma1989.dec10_2016.common;\n\npublic class Constant {\n    public static final String NAME = \"common\";\n}\n```\n\n```java:Main.java\npackage com.github.kazuma1989.dec10_2016.app;\n\nimport com.github.kazuma1989.dec10_2016.common.Constant;\n\npublic class Main {\n    public static void main(String[] args) {\n        System.out.println(Constant.NAME);\n    }\n}\n```\n\n\u3053\u306e\u72b6\u614b\u3067`jar`\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u671f\u5f85\u3069\u304a\u308a\u306b\u30d3\u30eb\u30c9\u5931\u6557\u3067\u3059\u3002\n`jar`\u30bf\u30b9\u30af\u306e\u524d\u6bb5\u968e\u306e`compileJava`\u30bf\u30b9\u30af\u3067\u5931\u6557\u3057\u3066\u3044\u307e\u3059\uff1a\n\n```bash\nmaster$ gradle jar\n:app:compileJava\n/Users/kazuma/qiita/2016/dec10/app/src/main/java/com/github/kazuma1989/dec10_2016/app/Main.java:3: \u30a8\u30e9\u30fc: \u30d1\u30c3\u30b1\u30fc\u30b8com.github.kazuma1989.dec10_2016.common\u306f\u5b58\u5728\u3057\u307e\u305b\u3093\nimport com.github.kazuma1989.dec10_2016.common.Constant;\n                                              ^\n/Users/kazuma/qiita/2016/dec10/app/src/main/java/com/github/kazuma1989/dec10_2016/app/Main.java:7: \u30a8\u30e9\u30fc: \u30b7\u30f3\u30dc\u30eb\u3092\u898b\u3064\u3051\u3089\u308c\u307e\u305b\u3093\n        System.out.println(Constant.NAME);\n                           ^\n  \u30b7\u30f3\u30dc\u30eb:   \u5909\u6570 Constant\n  \u5834\u6240: \u30af\u30e9\u30b9 Main\n\u30a8\u30e9\u30fc2\u500b\n:app:compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileJava'.\n> Compilation failed; see the compiler error output for details.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 0.966 secs\n```\n\n\n\n\n### \u6210\u529f\u3059\u308b\u30b1\u30fc\u30b9\n\n\u6b21\u306b\u3001\u30d3\u30eb\u30c9\u3092\u6210\u529f\u3055\u305b\u307e\u3059\u3002\n`subprojects`\u30d6\u30ed\u30c3\u30af\u306e\u6700\u5f8c\u3078\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8ffd\u8a18\u3057\u3066\u3001common\u3078\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3057\u307e\u3059\uff1a\n\n```groovy:build.gradle\n\u2026\n\nsubprojects {\n    \u2026\n\n    // common\u4ee5\u5916\u306e\u8a2d\u5b9a\n    if (project.name in ['common']) return\n\n    dependencies {\n        compile project(':common')\n    }\n}\n```\n\n\u4eca\u5ea6\u306f`jar`\u30bf\u30b9\u30af\u304c\u6210\u529f\u3057\u3001\u4f5c\u6210\u3057\u305fJAR\u3082\u554f\u984c\u306a\u304f\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306e\u6607\u9806\u3067\u306f\u306a\u304f\u3001common\u306eJAR\u5316\u304c\u5148\u306b\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\uff1a\n\n```bash\nmaster$ gradle jar\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 1.154 secs\n\nmaster$ java -cp ../app/build/libs/app.jar com.github.kazuma1989.dec10_2016.app.Main\ncommon\n```\n\n`jar`\u30bf\u30b9\u30af\u306f\u5fc5\u305a\u3057\u3082master\u304b\u3089\u547c\u3076\u5fc5\u8981\u306f\u306a\u304f\u3001app\u306e\u3082\u306e\u3060\u3051\u3092\u547c\u3093\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\n\u305d\u306e\u5834\u5408\u3082\u3001common\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304b\u3089app\u304cJAR\u5316\u3055\u308c\u308b\u306e\u3067\u3001\u304d\u3061\u3093\u3068\u6210\u529f\u3057\u307e\u3059\uff1a\n\n```bash\nmaster$ gradle clean :app:jar\n:app:clean\n:common:clean\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.938 secs\n\nmaster$ cd ../app/\n\napp$ gradle clean jar\n:app:clean\n:common:compileJava UP-TO-DATE\n:common:processResources UP-TO-DATE\n:common:classes UP-TO-DATE\n:common:jar UP-TO-DATE\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.922 secs\n```\n\n\u4f9d\u5b58\u95a2\u4fc2\u3092\u8a2d\u5b9a\u5f8c\u3001\u518d\u5ea6`eclipse`\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3059\u308c\u3070\u3001Eclipse\u3067\u306e\u30a8\u30e9\u30fc\u3082\u89e3\u6d88\u3057\u3001\u30b3\u30fc\u30c9\u88dc\u5b8c\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\n\n## \u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066app\u3092\u5b9f\u884c\u53ef\u80fdJAR\u306b\u3059\u308b\n\n`jar`\u30bf\u30b9\u30af\u306b\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u3001\u5b9f\u884c\u53ef\u80fdJAR\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n\n\n\n### \u3046\u307e\u304f\u3044\u304f\u3053\u3068\u3082\u3042\u308b\u304c\u3001\u57fa\u672c\u306f\u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\n\nbuild.gradle\u306e\u6700\u5f8c\u306b\u6700\u4f4e\u9650\u306e\u8a18\u8ff0\u3060\u3051\u3092\u8ffd\u52a0\u3057\u3066\u3001\u3068\u306b\u304b\u304f`jar`\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\uff1a\n\n```groovy:build.gradle\n\u2026\n\nproject(':app') {\n    jar {\n        manifest {\n            attributes 'Main-Class': 'com.github.kazuma1989.dec10_2016.app.Main'\n        }\n    }\n}\n```\n\n```bash\nmaster$ gradle jar\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 3.177 secs\n```\n\n\u4f5c\u6210\u3057\u305fJAR\u3092`java`\u30b3\u30de\u30f3\u30c9\u3067\u547c\u3073\u51fa\u3059\u3068\u3001Main\u30af\u30e9\u30b9\u304c\u547c\u3070\u308c\u307e\u3059\uff1a\n\n```bash\nmaster$ java -jar ../app/build/libs/app.jar \ncommon\n```\n\n\u3057\u304b\u3057\u3001\u3053\u308c\u304c\u52d5\u4f5c\u3057\u305f\u306e\u306f\u305f\u307e\u305f\u307e\u3067\u3059\u3002\ncommon.jar\u3078\u306e\u4f9d\u5b58\u60c5\u5831\u3092\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306b\u8a18\u8f09\u3057\u306a\u3044\u3068\u3001Constant\u30af\u30e9\u30b9\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u304b\u3089\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001Main\u30af\u30e9\u30b9\u304cConstant\u6587\u5b57\u5217\u5b9a\u6570\u3057\u304b\u53c2\u7167\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u305d\u306e\u5024\u304cMain\u30af\u30e9\u30b9\u306b\u4fdd\u6301\u3055\u308c\u3066\u3057\u307e\u3063\u305f\u3068\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n\n\n\n### common.jar\u3078\u306e\u4f9d\u5b58\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3001\u5e38\u306b\u3046\u307e\u304f\u3044\u304f\u30b1\u30fc\u30b9\n\n\u901a\u5e38\u306fNoClassDefFoundError\u3068\u306a\u308a\u307e\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u306f\u6210\u529f\u3059\u308b\u304c\u3001\u5b9f\u884c\u6642\u306b\u5931\u6557\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u305f\u3068\u3048\u3070\u4ee5\u4e0b\u306f\u3001common\u306b\u57fa\u5e95\u30af\u30e9\u30b9`AbstractApplication`\u3092\u4f5c\u6210\u3057\u3001app\u3067\u7d99\u627f\u3057\u3066\u5229\u7528\u3057\u305f\u5834\u5408\u3067\u3059\uff1a\n\n```bash\nmaster$ gradle jar\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 1.188 secs\n\nmaster$ java -jar ../app/build/libs/app.jar \nException in thread \"main\" java.lang.NoClassDefFoundError: com/github/kazuma1989/dec10_2016/common/AbstractApplication\n\tat java.lang.ClassLoader.defineClass1(Native Method)\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:763)\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:467)\n\tat java.net.URLClassLoader.access$100(URLClassLoader.java:73)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:368)\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:362)\n\tat java.security.AccessController.doPrivileged(Native Method)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:361)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n\tat com.github.kazuma1989.dec10_2016.app.Main.main(Main.java:9)\nCaused by: java.lang.ClassNotFoundException: com.github.kazuma1989.dec10_2016.common.AbstractApplication\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n\t... 13 more\n\nmaster$ tree ../app/build/libs/\n../app/build/libs/\n\u2514\u2500\u2500 app.jar\n```\n\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u3001`jar`\u30d6\u30ed\u30c3\u30af\u5185\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306b\u306f`attributes 'Class-Path'`\u304c\u3001\u30bf\u30b9\u30af\u306b\u306f`copy`\u64cd\u4f5c\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\uff1a\n\n```groovy:build.gradle\n\u2026\n\nproject(':app') {\n    jar {\n        manifest {\n            attributes 'Main-Class': 'com.github.kazuma1989.dec10_2016.app.Main'\n            attributes 'Class-Path': configurations.runtime.collect{it.name}.join(' ')\n        }\n\n        doLast {\n            copy {\n                from configurations.runtime\n                into destinationDir\n            }\n        }\n    }\n}\n```\n\n`configurations.runtime`\u306f\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u5b9f\u884c\u6642\u4f9d\u5b58\u306b\u3064\u3044\u3066\u306e\u60c5\u5831\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u306b\u306f\u3001`dependencies`\u30d6\u30ed\u30c3\u30af\u5185\u3067`compile`\u3068\u3057\u3066\u6307\u5b9a\u3057\u305fcommon\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u60c5\u5831\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u4f9d\u5b58\u306f\u5b9f\u884c\u6642\u4f9d\u5b58\u3067\u3082\u3042\u308b\u304b\u3089\u3067\u3059\u3002\n\n`attributes 'Class-Path'`\u306e\u3068\u3053\u308d\u3067\u306f\u3001`configurations.runtime`\u306e\u5185\u5bb9\u3092\u30b9\u30da\u30fc\u30b9\u533a\u5207\u308a\u3067\u6587\u5b57\u5217\u9023\u7d50\u3057\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u4e2d\u8eab\u306f`Class-Path: common.jar`\u3068\u306a\u308a\u307e\u3059\uff08common\u4ee5\u5916\u306b\u3082\u4f9d\u5b58\u95a2\u4fc2\u3092\u8ffd\u52a0\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u3001`Class-Path: common.jar another.jar extra.jar`\u306e\u3088\u3046\u306b\u306a\u308b\uff09\u3002\n\n\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306b`Class-Path: common.jar`\u3068\u66f8\u3044\u3066\u3042\u308bJAR\u306f\u3001\u81ea\u5206\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306ecommon.jar\u3092\u63a2\u3057\u306b\u3044\u304f\u306e\u3067\u3001`copy`\u30d6\u30ed\u30c3\u30af\u3067app.jar\u3068\u540c\u3058\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306bcommon.jar\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30de\u30cb\u30d5\u30a7\u30b9\u30c8\u306e\u8ffd\u8a18\u3068\u4f9d\u5b58JAR\u306e\u30b3\u30d4\u30fc\u306b\u3088\u3063\u3066\u3001\u4eca\u5ea6\u306fJAR\u306e\u5b9f\u884c\u304c\u6210\u529f\u3057\u307e\u3059\u3002\nlibs\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u6301\u3061\u904b\u3079\u3070\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u5b8c\u7d50\u3059\u308b\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u307e\u3059\uff1a\n\n```bash\nmaster$ gradle clean jar\n:app:clean\n:common:clean\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.952 secs\n\nmaster$ java -jar ../app/build/libs/app.jar \ncommon\n\nmaster$ tree ../app/build/libs/\n../app/build/libs/\n\u251c\u2500\u2500 app.jar\n\u2514\u2500\u2500 common.jar\n```\n\n\n\n\n\n\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306e\u8a2d\u5b9a\u5024\u3092\u30eb\u30fc\u30c8\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u5206\u96e2\u3057\u3001\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\u3057\u3084\u3059\u304f\u3059\u308b\n\n\u3053\u3053\u307e\u3067\u3067\u3001\u3072\u3068\u307e\u305a\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\u306f\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u6b21\u306fapp2\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8ffd\u52a0\u3057\u3001\u73fe\u5b9f\u306e\u4f8b\u306b\u8fd1\u3065\u3051\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u307e\u305a\u306f\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u6574\u7406\u3092\u3057\u307e\u3059\u3002\n\n\n\n\n\n## app\u306e\u307f\u306e\u8a2d\u5b9a\u3092app/build.gradle\u306b\u5206\u96e2\u3059\u308b\n\n\u3072\u3068\u307e\u305a\u52d5\u304b\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092master\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306ebuild.gradle\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\u3067\u3059\u304c\u3001\u3053\u306e\u307e\u307e\u3067\u306f\u3001\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5897\u3048\u308b\u305f\u3073\u306bmaster/build.gradle\u306b\u4f3c\u305f\u3088\u3046\u306a\u8a18\u8ff0\u304c\u5897\u3048\u3066\u3044\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5897\u3084\u3057\u3066\u3082\u3001\u5909\u66f4\u306fsettings.gradle\u306e\u307f\u306b\u7559\u3081\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u306fapp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306ebuild.gradle\u306b\u5206\u96e2\u3057\u307e\u3059\uff1a\n\n```bash\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 build.gradle\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n```\n\n\n\n\n### \u5931\u6557\u3059\u308b\u30b1\u30fc\u30b9\n\n\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3068\u3001\u4e00\u898b\u6210\u529f\u3057\u305d\u3046\u3067\u3059\u304c\u3001\u5931\u6557\u3057\u307e\u3059\u3002\n\napp/build.gradle\u306b\u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306b\u7570\u306a\u308b\u30e1\u30a4\u30f3\u30af\u30e9\u30b9\u306e\u307f\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nmaster/build.gradle\u3067\u306f\u3001`project(':app')`\u30d6\u30ed\u30c3\u30af\u306b\u66f8\u3044\u3066\u3044\u305f\u5185\u5bb9\u3092`subprojects`\u30d6\u30ed\u30c3\u30af\u306b\u79fb\u3057\u307e\u3059\uff1a\n\n```groovy:app/build.gradle\njar {\n    manifest {\n        attributes 'Main-Class': 'com.github.kazuma1989.dec10_2016.app.Main'\n    }\n}\n```\n\n```groovy:master/build.gradle\n\u2026\n\nsubprojects {\n    \u2026\n\n    jar {\n        manifest {\n            attributes 'Class-Path': configurations.runtime.collect{it.name}.join(' ')\n        }\n\n        doLast {\n            copy {\n                from configurations.runtime\n                into libsDir\n            }\n        }\n    }\n}\n\n// project(':app') {\n// }\n```\n\n33\u884c\u76ee\uff08`attributes 'Class-Path'`\u306e\u7b87\u6240\uff09\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3059\uff1a\n\n```bash\nmaster$ gradle clean jar\n\nFAILURE: Build failed with an exception.\n\n* Where:\nBuild file '/Users/kazuma/qiita/2016/dec10/master/build.gradle' line: 33\n\n* What went wrong:\nA problem occurred evaluating root project 'master'.\n> Could not resolve all dependencies for configuration ':app:runtime'.\n   > Project :app declares a dependency from configuration 'compile' to configuration 'default' which is not declared in the descriptor for project :common.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.\n\nBUILD FAILED\n\nTotal time: 0.837 secs\n```\n\napp\u3067\u5229\u7528\u3057\u3066\u3044\u308b`configurations.runtime`\u304c\u89e3\u6c7a\u3067\u304d\u306a\u3044\u305f\u3081\u30a8\u30e9\u30fc\u3068\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002\n\u3053\u308c\u306f\u3001common\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067Java\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u547c\u3073\u51fa\u3059\u524d\u306b\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u304c\u5b9f\u884c\u3055\u308c\u305f\u305f\u3081\u3067\u3059\u3002\n\n```groovy:master/build.gradle\uff08app/build.gradle\u5206\u96e2\u524d\uff09\nsubprojects {\n    // app -> common\u306e\u9806\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u304c\uff08\u4e0b\u306b\u7d9a\u304f\uff09\n    apply {\n        plugin 'java'\n        \u2026\n    }\n\n    \u2026\n}\n\nproject(':app') {\n    // \u3053\u306e\u30d6\u30ed\u30c3\u30af\u306fcommon\u3078\u306eJava\u30d7\u30e9\u30b0\u30a4\u30f3\u9069\u7528\u304c\u6e08\u3093\u3060\u5f8c\u306b\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u554f\u984c\u306a\u304b\u3063\u305f\u3002\n    jar {\n        \u2026\n    }\n}\n```\n\n```groovy:master/build.gradle\uff08app/build.gradle\u5206\u96e2\u5f8c\uff09\nsubprojects {\n    // app -> common\u306e\u9806\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u3002\n    apply {\n        plugin 'java'\n        \u2026\n    }\n\n    // project(':app')\u306b\u3042\u3063\u305f\u51e6\u7406\u3092subprojects\u30d6\u30ed\u30c3\u30af\u306b\u6301\u3063\u3066\u304d\u305f\u305f\u3081\u3001common\u3078\u306eJava\u30d7\u30e9\u30b0\u30a4\u30f3\u9069\u7528\u3088\u308a\u524d\u306b\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u3068\u306a\u308a\u3001\u30a8\u30e9\u30fc\u3002\n    jar {\n        \u2026\n    }\n}\n```\n\n\n\n\n### \u6210\u529f\u3059\u308b\u30b1\u30fc\u30b9\n\n`subprojects`\u30d6\u30ed\u30c3\u30af\u3092\u3001\u300ccommon\u3068app\u3092\u542b\u3081\u305f\u3059\u3079\u3066\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300d\u3068\u300ccommon\u4ee5\u5916\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u300d\u3067\u5206\u3051\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3046\u307e\u304f\u3044\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u30d6\u30ed\u30c3\u30af\u306e\u610f\u5473\u3082\u306f\u3063\u304d\u308a\u3059\u308b\u306e\u3067\u3001\u53ef\u8aad\u6027\u3068\u3057\u3066\u3082\u3053\u3061\u3089\u306e\u307b\u3046\u304c\u3088\u3044\u3067\u3057\u3087\u3046\uff1a\n\n```groovy:master/build.gradle\n// common\u3068app\u3092\u542b\u3081\u305f\u3059\u3079\u3066\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\nsubprojects {\n    apply {\n        plugin 'java'\n        \u2026\n    }\n\n    \u2026\n}\n\n// common\u4ee5\u5916\u306e\u30b5\u30d6\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\nsubprojects {\n    if (project.name in ['common']) return\n\n    dependencies {\n        \u2026\n    }\n\n    jar {\n        \u2026\n    }\n}\n```\n\n```bash\nmaster$ gradle clean jar\n:app:clean\n:common:clean\n:common:compileJava\n:common:processResources UP-TO-DATE\n:common:classes\n:common:jar\n:app:compileJava\n:app:processResources UP-TO-DATE\n:app:classes\n:app:jar\n\nBUILD SUCCESSFUL\n\nTotal time: 0.94 secs\n\nmaster$ java -jar ../app/build/libs/app.jar \ncommon\n```\n\n\n\n\n\n## app/build.gradle\u3092gradle.properties\u306b\u7f6e\u304d\u63db\u3048\u308b\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3054\u3068\u306e\u8a2d\u5b9a\u304c\u5024\u3060\u3051\u306e\u9055\u3044\u3057\u304b\u306a\u3044\u306e\u3067\u3001app/build.gradle\u3092gradle.properties\u306b\u7f6e\u304d\u63db\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\ngradle.properties\u306f\u3001build.gradle\u540c\u69d8\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u76f4\u4e0b\u306b\u5b58\u5728\u3059\u308b\u3068\u81ea\u52d5\u3067\u8aad\u307f\u8fbc\u307e\u308c\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u30d5\u30a1\u30a4\u30eb\u3067\u3059\uff1a\n\n```bash\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n```\n\n```properties:app/gradle.properties\njar.manifest.attributes.Main-Class=com.github.kazuma1989.dec10_2016.app.Main\n```\n\nbuild.gradle\u304b\u3089\u306f\u3001`getProperty`\u30e1\u30bd\u30c3\u30c9\u306b\u3088\u3063\u3066\u5024\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u6ce8\u610f\u70b9\u306f\u3001`afterEvaluate`\u30d6\u30ed\u30c3\u30af\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u3067\u3059\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306f\u3001master\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3001app\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u9806\u3067\u8aad\u307f\u8fbc\u307e\u308c\u308b\u305f\u3081\u3001master/build.gradle\u306e\u6642\u70b9\u3067\u306fapp/gradle.properties\u304c\u307e\u3060\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u306a\u3044\u304b\u3089\u3067\u3059\u3002\n`afterEvaluate`\u30d6\u30ed\u30c3\u30af\u5185\u306f\u3001\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a55\u4fa1\u5f8c\uff08\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u3092\u5b8c\u4e86\u3057\u305f\u5f8c\uff09\u306b\u5b9f\u884c\u3055\u308c\u308b\u305f\u3081\u3001\u3046\u307e\u304f\u3044\u304d\u307e\u3059\uff1a\n\n```groovy:master/build.gradle\n\u2026\n\nsubprojects {\n    \u2026\n\n    afterEvaluate {\n        jar {\n            manifest {\n                attributes 'Main-Class': getProperty('jar.manifest.attributes.Main-Class')\n                attributes 'Class-Path': configurations.runtime.collect{it.name}.join(' ')\n            }\n\n            \u2026\n        }\n    }\n}\n```\n\n\n\n\n\n\n# \u307e\u3068\u3081\n\n\u6700\u7d42\u7684\u306b\u3001\u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u69cb\u6210\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\uff1a\n\n```bash\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties   // \u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\u5024\u3092\u66f8\u304f\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src                 // \u5404\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3002common\u306b\u4f9d\u5b58\u3059\u308b\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src                 // \u5171\u901a\u90e8\u54c1\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle        // \u5168\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u5229\u7528\u3059\u308b\u30bf\u30b9\u30af\u3092\u5b9a\u7fa9\u3059\u308b\n    \u2514\u2500\u2500 settings.gradle     // \u30de\u30eb\u30c1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u542b\u3081\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3092\u6307\u5b9a\u3059\u308b\n```\n\nmaster\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067`gradle jar`\u3068\u3059\u308c\u3070\u3059\u3079\u3066\u306eJAR\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\u5404\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3067`gradle jar`\u3068\u3059\u308b\u304b\u3001`gradle :common:jar`\u3068\u3059\u308b\u3053\u3068\u3067\u500b\u5225\u306eJAR\u3092\u751f\u6210\u3067\u304d\u307e\u3059\u3002\n\u751f\u6210\u3057\u305fJAR\u306f\u3001libs\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u4f9d\u5b58\u3059\u308bJAR\u3068\u307e\u3068\u307e\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u3054\u3068\u6301\u3061\u904b\u3079\u3070\u305d\u306e\u307e\u307e\u4f7f\u3048\u307e\u3059\u3002\n\n\u4eca\u5f8c\u3001\u3055\u3089\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5897\u3084\u3057\u3066\u3044\u304f\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\uff1a\n\n```bash\nmaster$ tree ../ -L 2\n../\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 app2\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 app3\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 build.gradle        // \u7279\u5225\u306a\u8a2d\u5b9a\u304c\u5fc5\u8981\u306a\u3089\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u914d\u7f6e\u3057\u3066\u3082\u3088\u3044\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 gradle.properties\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u251c\u2500\u2500 common\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 build.gradle        // common\u304c\u4f9d\u5b58\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u306a\u3069\u3092\u6307\u5b9a\u3059\u308b\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 src\n\u2514\u2500\u2500 master\n    \u251c\u2500\u2500 build.gradle\n    \u2514\u2500\u2500 settings.gradle\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n", "tags": ["gradle", "Java"]}