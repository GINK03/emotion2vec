{"context": " More than 1 year has passed since last update.\n\n\u524d\u63d0\u6761\u4ef6\nAWS Lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092Gulp\u3067\u30c7\u30d7\u30ed\u30a4\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u3066\u3044\u308b\u524d\u63d0\n\nIAM\u306e\u8a2d\u5b9a\n\nLambda\u5b9f\u884c\u7528\u306e\u30ed\u30fc\u30eb\n\n\u30ed\u30fc\u30eb\u540d\uff08\u4f8b\uff09\n\n\nsampleLambdaExecureRole\n\n\n\u30a2\u30bf\u30c3\u30c1\u3059\u308b\u30dd\u30ea\u30b7\u30fc\n\n\n AWSLambdaExecute\n\n\n\n\u4f5c\u6210\u3057\u305f\u30ed\u30fc\u30ebARN\u3092\u30e1\u30e2\u3063\u3066\u304a\u304f\n\n\u30ed\u30fc\u30ebARN\uff08\u4f8b\uff09\n\n\narn:aws:iam::000000000000:role/sampleLambdaExecureRole\n\n\n\n\n\u30c7\u30d7\u30ed\u30a4\u7528\u306e\u30dd\u30ea\u30b7\u30fc\n\n\n\u30dd\u30ea\u30b7\u30fc\u540d\uff08\u4f8b\uff09\n\nsampleLambdaDeployPolicy\n\n\n\n\u30dd\u30ea\u30b7\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff08\u4f8b\uff09\n\niam:PassRole\u306eResource\u306fLambda\u5b9f\u884c\u7528\u306e\u30ed\u30fc\u30eb\u306eARN\u3092\u6307\u5b9a\u3059\u308b\n\n\n\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"lambda:CreateFunction\",\n                \"lambda:GetFunction\",\n                \"lambda:UpdateFunctionConfiguration\",\n                \"lambda:UpdateFunctionCode\",\n                \"lambda:UpdateEventSourceMapping\",\n                \"lambda:CreateEventSourceMapping\",\n                \"lambda:ListEventSourceMappings\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Sid\": \"\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"iam:PassRole\"\n            ],\n            \"Resource\": [\n                \"arn:aws:iam::000000000000:role/sampleLambdaExecureRole\"\n            ]\n        }\n    ]\n}\n\n\n\u30c7\u30d7\u30ed\u30a4\u7528\u306e\u30e6\u30fc\u30b6\u30fc\n\n\u30e6\u30fc\u30b6\u30fc\u540d\uff08\u4f8b\uff09\n\n\nsampleLambdaDeployUser\n\n\n\u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306b\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3092\u751f\u6210\n\n\n\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u308b\n\n\n\u8a8d\u8a3c\u60c5\u5831\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n\u30dd\u30ea\u30b7\u30fc\u306e\u30a2\u30bf\u30c3\u30c1\uff08\u5148\u307b\u3069\u3055\u304f\u305b\u3044\u3057\u305f\u30dd\u30ea\u30b7\u30fc\uff09\n\n\nsampleLambdaDeployPolicy\n\n\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nAWS Lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092Gulp\u3067\u30c7\u30d7\u30ed\u30a4\u3092\u53c2\u8003\u306b\u4e0b\u8a18\u306e\u70b9\u3092\u5909\u66f4\u3059\u308b\n\u5909\u66f4\u5f8c\u306e\u30bd\u30fc\u30b9\u306f\u3053\u3061\u3089\nhttps://github.com/tomiyan/lambda-gulp-sample\ncircle.yml\u3092\u8ffd\u52a0\n\ncircle.yml\ndeployment:\n  production:\n    branch: master\n    commands:\n      - gulp deploy\n\n\nlambda-config.js\u306erole\u3092env\u304b\u3089\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\n\nlambda-config.js\nmodule.exports = {\n  region: 'ap-northeast-1',\n  handler: 'index.handler',\n  role: process.env.ROLE,\n  functionName: 'api_v1_hoge',\n  timeout: 10,\n  memorySize: 128,\n  runtime: 'nodejs'\n  // eventSource: {\n  //  EventSourceArn: <event source such as kinesis ARN>,\n  //  BatchSize: 200,\n  //  StartingPosition: \"TRIM_HORIZON\"\n  //}\n}\n\n\ngithub\u306b\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\n\nCircleCI\n\u3059\u3067\u306bSign Up\u3057\u3066\u3044\u308b\u524d\u63d0\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8ffd\u52a0\n\nAdd Projects\n\n\nGitHub\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9078\u629e\n\u4eca\u56de\u4f5c\u6210\u3057\u305fProject\u3092\u9078\u629e\n\n\nProject Settings\n\n\nEnvironment variables\n\n\nName\n\n\nROLE\n\n\nValue\uff08\u4f8b\uff09\n\n\narn:aws:iam::000000000000:role/sampleLambdaExecureRole\n\n\n\n\nAWS keys\n\n\n\u30c7\u30d7\u30ed\u30a4\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u6210\u3057\u305f\u8a8d\u8a3c\u60c5\u5831Access Key ID/Secret Access Key\u3092\u767b\u9332\n\n\n\n\n\n\n\u53c2\u8003\u6587\u732e\n\nAWS Lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092Gulp\u3067\u30c7\u30d7\u30ed\u30a4\n\n\n# \u524d\u63d0\u6761\u4ef6\n[AWS Lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092Gulp\u3067\u30c7\u30d7\u30ed\u30a4](http://dev.classmethod.jp/cloud/aws/how-to-deploy-a-lambda-function-with-gulp/)\u3067\u30ed\u30fc\u30ab\u30eb\u3067\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u3066\u3044\u308b\u524d\u63d0\n\n\n# IAM\u306e\u8a2d\u5b9a\n\n## Lambda\u5b9f\u884c\u7528\u306e\u30ed\u30fc\u30eb\n* \u30ed\u30fc\u30eb\u540d\uff08\u4f8b\uff09\n * sampleLambdaExecureRole\n* \u30a2\u30bf\u30c3\u30c1\u3059\u308b\u30dd\u30ea\u30b7\u30fc\n *  AWSLambdaExecute\n\n\u4f5c\u6210\u3057\u305f\u30ed\u30fc\u30ebARN\u3092\u30e1\u30e2\u3063\u3066\u304a\u304f\n\n* \u30ed\u30fc\u30ebARN\uff08\u4f8b\uff09\n * arn:aws:iam::000000000000:role/sampleLambdaExecureRole\n\n## \u30c7\u30d7\u30ed\u30a4\u7528\u306e\u30dd\u30ea\u30b7\u30fc\n\n* \u30dd\u30ea\u30b7\u30fc\u540d\uff08\u4f8b\uff09\n * sampleLambdaDeployPolicy\n\n* \u30dd\u30ea\u30b7\u30fc\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff08\u4f8b\uff09\n * iam:PassRole\u306eResource\u306fLambda\u5b9f\u884c\u7528\u306e\u30ed\u30fc\u30eb\u306eARN\u3092\u6307\u5b9a\u3059\u308b\n\n```json\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"lambda:CreateFunction\",\n                \"lambda:GetFunction\",\n                \"lambda:UpdateFunctionConfiguration\",\n                \"lambda:UpdateFunctionCode\",\n                \"lambda:UpdateEventSourceMapping\",\n                \"lambda:CreateEventSourceMapping\",\n                \"lambda:ListEventSourceMappings\"\n            ],\n            \"Resource\": [\n                \"*\"\n            ]\n        },\n        {\n            \"Sid\": \"\",\n            \"Effect\": \"Allow\",\n            \"Action\": [\n                \"iam:PassRole\"\n            ],\n            \"Resource\": [\n                \"arn:aws:iam::000000000000:role/sampleLambdaExecureRole\"\n            ]\n        }\n    ]\n}\n```\n\n## \u30c7\u30d7\u30ed\u30a4\u7528\u306e\u30e6\u30fc\u30b6\u30fc\n* \u30e6\u30fc\u30b6\u30fc\u540d\uff08\u4f8b\uff09\n * sampleLambdaDeployUser\n* \u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306b\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3092\u751f\u6210\n\t* \u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u308b\n* \u8a8d\u8a3c\u60c5\u5831\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n* \u30dd\u30ea\u30b7\u30fc\u306e\u30a2\u30bf\u30c3\u30c1\uff08\u5148\u307b\u3069\u3055\u304f\u305b\u3044\u3057\u305f\u30dd\u30ea\u30b7\u30fc\uff09\n\t* sampleLambdaDeployPolicy\n\n# \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n[AWS Lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092Gulp\u3067\u30c7\u30d7\u30ed\u30a4](http://dev.classmethod.jp/cloud/aws/how-to-deploy-a-lambda-function-with-gulp/)\u3092\u53c2\u8003\u306b\u4e0b\u8a18\u306e\u70b9\u3092\u5909\u66f4\u3059\u308b\n\n\u5909\u66f4\u5f8c\u306e\u30bd\u30fc\u30b9\u306f\u3053\u3061\u3089\nhttps://github.com/tomiyan/lambda-gulp-sample\n\ncircle.yml\u3092\u8ffd\u52a0\n\n```yaml:circle.yml\ndeployment:\n  production:\n    branch: master\n    commands:\n      - gulp deploy\n```\n\nlambda-config.js\u306erole\u3092env\u304b\u3089\u53d6\u5f97\u3059\u308b\u3088\u3046\u306b\u4fee\u6b63\n\n```javascript:lambda-config.js\nmodule.exports = {\n  region: 'ap-northeast-1',\n  handler: 'index.handler',\n  role: process.env.ROLE,\n  functionName: 'api_v1_hoge',\n  timeout: 10,\n  memorySize: 128,\n  runtime: 'nodejs'\n  // eventSource: {\n  //  EventSourceArn: <event source such as kinesis ARN>,\n  //  BatchSize: 200,\n  //  StartingPosition: \"TRIM_HORIZON\"\n  //}\n}\n```\n\ngithub\u306b\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u3059\u308b\n\n# CircleCI\n\n\u3059\u3067\u306bSign Up\u3057\u3066\u3044\u308b\u524d\u63d0\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8ffd\u52a0\n* Add Projects\n * GitHub\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u9078\u629e\n * \u4eca\u56de\u4f5c\u6210\u3057\u305fProject\u3092\u9078\u629e\n* Project Settings\n\t* Environment variables\n\t\t* Name\n\t\t\t* ROLE\n\t\t* Value\uff08\u4f8b\uff09\n\t\t\t* arn:aws:iam::000000000000:role/sampleLambdaExecureRole\n\t* AWS keys\n\t\t* \u30c7\u30d7\u30ed\u30a4\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u4f5c\u6210\u3057\u305f\u8a8d\u8a3c\u60c5\u5831Access Key ID/Secret Access Key\u3092\u767b\u9332\n\n\n# \u53c2\u8003\u6587\u732e\n* [AWS Lambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092Gulp\u3067\u30c7\u30d7\u30ed\u30a4](http://dev.classmethod.jp/cloud/aws/how-to-deploy-a-lambda-function-with-gulp/)\n", "tags": ["gulp", "Node.js", "AWS", "CircleCI", "lambda"]}