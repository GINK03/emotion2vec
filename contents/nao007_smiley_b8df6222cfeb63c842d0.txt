{"context": "iPhone\u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u52c9\u5f37\u4e2d\u3001\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u3066\u6587\u5b57\u5217\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u4f8b\u984c\u304c\u3042\u3063\u305f\u306e\u3067\nAPI\u3092\u53e9\u3044\u3066JSON\u3067\u5024\u3092\u3082\u3089\u3063\u3066\u8868\u793a\u3067\u304d\u308b\u304b\u306a?\u3068\u601d\u3044\u30c8\u30e9\u30a4\u3057\u305f\u8a18\u9332\u3067\u3059\u3002\n\u8d85\u521d\u5fc3\u8005\u306e\u5199\u7d4c\u4e2d\u306e\u904a\u3073\u5fc3\u3068\u3044\u3046\u8131\u7dda\u306e\u8a18\u9332\u3068\u3082\u8a00\u3044\u307e\u3059\u3002\n\n\u52c9\u5f37\u306e\u5143\u30cd\u30bf\n\n\u7d76\u5bfe\u306b\u632b\u6298\u3057\u306a\u3044iPhone\u30a2\u30d7\u30ea\u958b\u767a\u300c\u8d85\u300d\u5165\u9580 \u5897\u88dc\u6539\u8a02\u7b2c5\u7248 Swift3&iOS 10.1\u79fb\u884c\u5b8c\u5168\u5bfe\u5fdc\n\n\nP.148\u3000UI\u90e8\u54c1\u306e\u914d\u7f6e\u306b\u3042\u308bHello\u3068\u3044\u3046\u30a2\u30d7\u30ea\n\n\n\n\n\u5143\u30cd\u30bf\u304b\u3089\u6539\u9020\u3057\u305f\u70b9\n\n\nBefore\n\n\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068Label\u306b\u4e88\u3081\u8a2d\u5b9a\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u307f\n\n\n\nAfter1\n\n\u30dc\u30bf\u30f3\u30922\u3064\u914d\u7f6e\u3057\u3001\u30bf\u30c3\u30d7\u3059\u308b\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u4e88\u3081\u8a2d\u5b9a\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u6539\u9020\n\n\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\u3068\u3057\u3066\u306f\n  * 1\u3064\u76ee\u306f\u3001\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u8868\u793a\u3055\u305b\u308b\n  * 2\u3064\u76ee\u306f\u3001\u8d77\u52d5\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u6587\u5b57\u5217\u3092\u8868\u793a\u3055\u305b\u308b\n\u3068\u3044\u3063\u305f\u611f\u3058\u3002\n\n\n\nAfter2 \u2190 \u4eca\u30b3\u30b3\n\n1\u3064\u76ee\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068\"inet-ip.info/json\"\u306bhttp\u63a5\u7d9a\u3057\u30b0\u30ed\u30fc\u30d0\u30ebIP\u3068ISP\u306eFQDN\u3092\u53d6\u5f97\u3001\u8868\u793a\u3059\u308b\u3002\n2\u3064\u76ee\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068\u3001\u8d77\u52d5\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u6587\u5b57\u5217\u3092\u8868\u793a\u3059\u308b\u3002\n\n\n\n\n\u6ce8\u610f\u70b9\n\n\nXCode\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u306fhttps\u901a\u4fe1\u3057\u304b\u8a31\u53ef\u3055\u308c\u306a\u3044\u3088\u3046\u3067\u3001\u4ee5\u4e0b\u306e\u5bfe\u51e6\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\nProject\u5185\u306einfo.plist\u306bApp Transport Security Settings\u3092\u8ffd\u52a0\nApp Transport Security Settings\u914d\u4e0b\u306b\u3001Allow Arbitrary Loads\u3092\u8ffd\u52a0\u3057\u5024\u3092\u201dYES\u201d\u306b\u5909\u66f4\n\n\n\n\u5f8c\u8ff0\u306e\u53c2\u8003URL\u306e\u8a18\u4e8b\u3092\u30d9\u30fc\u30b9\u306b\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u53d6\u5f97\u3057\u305f\u5024\u3092\u8868\u793a\u3059\u308b\u51e6\u7406\u3092\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u884c\u308f\u306a\u3044\u5834\u5408\u3001\u3069\u3046\u3082\u51e6\u7406\u843d\u3061\u3057\u3066\u3044\u308b\u3063\u307d\u3044\u3053\u3068\u304c\u5224\u660e\u3057\u307e\u3057\u305f\u3002\n\nDispatchQueue.main.async\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u3001\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u3067\u89e3\u6d88\u3002\u30ec\u30b9\u30dd\u30f3\u30b9\u3082UP\u3057(\uff9f\u0434\uff9f)\uff73\uff8f\uff70\u306a\u611f\u3058\u3002\u304c\u3057\u307e\u3057\u305f\u304c\u6c17\u306e\u305b\u3044\u3060\u3063\u305f\u304b\u3082\u3002\u3002\u3002\n\n\ninet-ip.info\u306f\u3001GET\u30e1\u30bd\u30c3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002(\u5f8c\u8ff0\u306e\u30b3\u30fc\u30c9\u53c2\u7167)\n\n\n\u6c5a\u3044\u30bd\u30fc\u30b9\u306e\u304a\u62ab\u9732\u76ee\n\u66f8\u7c4d\u3068\u53c2\u8003URL\u3092\u30d9\u30fc\u30b9\u306b\u5b9f\u88c5\u3057\u305f\u7d50\u679c\u304c\u30b3\u30c1\u30e9\n\nViewController.swift\n\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    @IBOutlet weak var label: UILabel!\n    @IBAction func getNwinfo() {\n        // \u53d6\u5f97\u3057\u305fJSON\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var getJson: NSDictionary!\n\n        // \u62bd\u51fa\u3057\u305f\"ip\"\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var jsonIp = \"\"\n\n        // \u62bd\u51fa\u3057\u305f\"hostname\"\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var jsonHostname = \"\"\n\n        // \u62bd\u51fa\u3057\u305f\"ip\"\u3068\"hostname\"\u3092\u7d50\u5408\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var jsonString = \"\"\n\n        // API\u63a5\u7d9a\u5148\n        let urlStr = \"http://inet-ip.info/json\"\n\n        if let url = URL(string: urlStr) {\n            let req = NSMutableURLRequest(url: url)\n            req.httpMethod = \"GET\"\n            // req.httpBody = \"userId=\\(self.userId)&code=\\(self.code)\".data(using: String.Encoding.utf8)\n            let task = URLSession.shared.dataTask(with: req as URLRequest, completionHandler: { (data, resp, err) in\n                print(resp!.url!)\n                print(NSString(data: data!, encoding: String.Encoding.utf8.rawValue) as Any)\n\n                // \u53d7\u3051\u53d6\u3063\u305fdata\u3092JSON\u30d1\u30fc\u30b9\u3001\u30a8\u30e9\u30fc\u306a\u3089catch\u3078\u30b8\u30e3\u30f3\u30d7\n                do {\n                    // data\u3092JSON\u30d1\u30fc\u30b9\u3057\u3001\u5909\u6570\"getJson\"\u306b\u683c\u7d0d\n                    getJson = try JSONSerialization.jsonObject(with: data!, options: JSONSerialization.ReadingOptions.mutableContainers) as! NSDictionary\n\n                    jsonIp = (getJson[\"IP\"] as? String)!\n                    jsonHostname = (getJson[\"Hostname\"] as? String)!\n                    jsonString = \"m9(\u30fb\u2200\u30fb)NW\u60c5\u5831\u30b2\u30c8\u3057\u307e\u3059\u305f\uff01\\n\\nGlobalIP : \" + jsonIp + \"\\nISP FQDN : \" + jsonHostname\n\n                    print (jsonIp)\n                    print (jsonHostname)\n\n                    DispatchQueue.main.async{\n                        self.label.text = jsonString\n                    }\n                } catch {\n                    print (\"json error\")\n                    return\n                }\n            })\n            task.resume()\n        }\n    }\n    @IBAction func goBack() {\n        label.text = \"(\u0e51\u2022\u0300\u3141\u2022\u0301\u0e51)\u2727\u30b7\u30e3\u30ad\u30fc\u30f3\"\n    }\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        // Do any additional setup after loading the view, typically from a nib.\n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n\n\n}\n\n\n\n\u53c2\u8003URL\n\n[swift3.0\u7cfb]POST\u3067API\uff08PHP\uff09\u304b\u3089JSON\u3092\u53d6\u5f97\u3057\u3001\u30d1\u30fc\u30b9\u3059\u308b\u65b9\u6cd5\ninet-ip.info\n\n\nSpecial Thanks\n@Ryuichirou\niPhone\u30a2\u30d7\u30ea\u4f5c\u6210\u306e\u52c9\u5f37\u4e2d\u3001\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u3066\u6587\u5b57\u5217\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3046\u4f8b\u984c\u304c\u3042\u3063\u305f\u306e\u3067\nAPI\u3092\u53e9\u3044\u3066JSON\u3067\u5024\u3092\u3082\u3089\u3063\u3066\u8868\u793a\u3067\u304d\u308b\u304b\u306a?\u3068\u601d\u3044\u30c8\u30e9\u30a4\u3057\u305f\u8a18\u9332\u3067\u3059\u3002\n\u8d85\u521d\u5fc3\u8005\u306e\u5199\u7d4c\u4e2d\u306e\u904a\u3073\u5fc3\u3068\u3044\u3046\u8131\u7dda\u306e\u8a18\u9332\u3068\u3082\u8a00\u3044\u307e\u3059\u3002\n\n\n## \u52c9\u5f37\u306e\u5143\u30cd\u30bf\n* \u7d76\u5bfe\u306b\u632b\u6298\u3057\u306a\u3044iPhone\u30a2\u30d7\u30ea\u958b\u767a\u300c\u8d85\u300d\u5165\u9580 \u5897\u88dc\u6539\u8a02\u7b2c5\u7248 Swift3&iOS 10.1\u79fb\u884c\u5b8c\u5168\u5bfe\u5fdc\n\t* P.148\u3000UI\u90e8\u54c1\u306e\u914d\u7f6e\u306b\u3042\u308bHello\u3068\u3044\u3046\u30a2\u30d7\u30ea\n\n\n## \u5143\u30cd\u30bf\u304b\u3089\u6539\u9020\u3057\u305f\u70b9\n* Before\n\t* \u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068Label\u306b\u4e88\u3081\u8a2d\u5b9a\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u307f\n\n* After1\n\t* \u30dc\u30bf\u30f3\u30922\u3064\u914d\u7f6e\u3057\u3001\u30bf\u30c3\u30d7\u3059\u308b\u30dc\u30bf\u30f3\u306b\u5fdc\u3058\u4e88\u3081\u8a2d\u5b9a\u3057\u305f\u30c6\u30ad\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u6539\u9020\n\n\t> \u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5185\u5bb9\u3068\u3057\u3066\u306f\n\t>\t* 1\u3064\u76ee\u306f\u3001\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u8868\u793a\u3055\u305b\u308b\n\t>\t* 2\u3064\u76ee\u306f\u3001\u8d77\u52d5\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u6587\u5b57\u5217\u3092\u8868\u793a\u3055\u305b\u308b\n\t> \u3068\u3044\u3063\u305f\u611f\u3058\u3002\n\n* After2 \u2190 \u4eca\u30b3\u30b3\n\t* 1\u3064\u76ee\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068\"inet-ip.info/json\"\u306bhttp\u63a5\u7d9a\u3057\u30b0\u30ed\u30fc\u30d0\u30ebIP\u3068ISP\u306eFQDN\u3092\u53d6\u5f97\u3001\u8868\u793a\u3059\u308b\u3002\n\t* 2\u3064\u76ee\u3092\u30bf\u30c3\u30d7\u3059\u308b\u3068\u3001\u8d77\u52d5\u6642\u306b\u8868\u793a\u3055\u308c\u308b\u6587\u5b57\u5217\u3092\u8868\u793a\u3059\u308b\u3002\n\n## \u6ce8\u610f\u70b9\n1. XCode\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067\u306fhttps\u901a\u4fe1\u3057\u304b\u8a31\u53ef\u3055\u308c\u306a\u3044\u3088\u3046\u3067\u3001\u4ee5\u4e0b\u306e\u5bfe\u51e6\u304c\u5fc5\u8981\u3067\u3057\u305f\u3002\n\t* Project\u5185\u306einfo.plist\u306bApp Transport Security Settings\u3092\u8ffd\u52a0\n\t* App Transport Security Settings\u914d\u4e0b\u306b\u3001Allow Arbitrary Loads\u3092\u8ffd\u52a0\u3057\u5024\u3092\u201dYES\u201d\u306b\u5909\u66f4\n\n2. \u5f8c\u8ff0\u306e\u53c2\u8003URL\u306e\u8a18\u4e8b\u3092\u30d9\u30fc\u30b9\u306b\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u53d6\u5f97\u3057\u305f\u5024\u3092\u8868\u793a\u3059\u308b\u51e6\u7406\u3092\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u884c\u308f\u306a\u3044\u5834\u5408\u3001\u3069\u3046\u3082\u51e6\u7406\u843d\u3061\u3057\u3066\u3044\u308b\u3063\u307d\u3044\u3053\u3068\u304c\u5224\u660e\u3057\u307e\u3057\u305f\u3002\n> DispatchQueue.main.async\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u3001\u30e1\u30a4\u30f3\u30b9\u30ec\u30c3\u30c9\u3067\u8868\u793a\u3055\u305b\u308b\u3053\u3068\u3067\u89e3\u6d88\u3002\u30ec\u30b9\u30dd\u30f3\u30b9\u3082UP\u3057(\uff9f\u0434\uff9f)\uff73\uff8f\uff70\u306a\u611f\u3058\u3002\u304c\u3057\u307e\u3057\u305f\u304c\u6c17\u306e\u305b\u3044\u3060\u3063\u305f\u304b\u3082\u3002\u3002\u3002\n\n3. inet-ip.info\u306f\u3001GET\u30e1\u30bd\u30c3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u3002(\u5f8c\u8ff0\u306e\u30b3\u30fc\u30c9\u53c2\u7167)\n\n## \u6c5a\u3044\u30bd\u30fc\u30b9\u306e\u304a\u62ab\u9732\u76ee\n\u66f8\u7c4d\u3068\u53c2\u8003URL\u3092\u30d9\u30fc\u30b9\u306b\u5b9f\u88c5\u3057\u305f\u7d50\u679c\u304c\u30b3\u30c1\u30e9\n\n```Swift:ViewController.swift\n\nimport UIKit\n\nclass ViewController: UIViewController {\n\n    @IBOutlet weak var label: UILabel!\n    @IBAction func getNwinfo() {\n        // \u53d6\u5f97\u3057\u305fJSON\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var getJson: NSDictionary!\n        \n        // \u62bd\u51fa\u3057\u305f\"ip\"\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var jsonIp = \"\"\n        \n        // \u62bd\u51fa\u3057\u305f\"hostname\"\u3092\u683c\u7d0d\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var jsonHostname = \"\"\n\n        // \u62bd\u51fa\u3057\u305f\"ip\"\u3068\"hostname\"\u3092\u7d50\u5408\u3059\u308b\u5909\u6570\u3092\u5b9a\u7fa9\n        var jsonString = \"\"\n        \n        // API\u63a5\u7d9a\u5148\n        let urlStr = \"http://inet-ip.info/json\"\n        \n        if let url = URL(string: urlStr) {\n            let req = NSMutableURLRequest(url: url)\n            req.httpMethod = \"GET\"\n            // req.httpBody = \"userId=\\(self.userId)&code=\\(self.code)\".data(using: String.Encoding.utf8)\n            let task = URLSession.shared.dataTask(with: req as URLRequest, completionHandler: { (data, resp, err) in\n                print(resp!.url!)\n                print(NSString(data: data!, encoding: String.Encoding.utf8.rawValue) as Any)\n                \n                // \u53d7\u3051\u53d6\u3063\u305fdata\u3092JSON\u30d1\u30fc\u30b9\u3001\u30a8\u30e9\u30fc\u306a\u3089catch\u3078\u30b8\u30e3\u30f3\u30d7\n                do {\n                    // data\u3092JSON\u30d1\u30fc\u30b9\u3057\u3001\u5909\u6570\"getJson\"\u306b\u683c\u7d0d\n                    getJson = try JSONSerialization.jsonObject(with: data!, options: JSONSerialization.ReadingOptions.mutableContainers) as! NSDictionary\n                    \n                    jsonIp = (getJson[\"IP\"] as? String)!\n                    jsonHostname = (getJson[\"Hostname\"] as? String)!\n                    jsonString = \"m9(\u30fb\u2200\u30fb)NW\u60c5\u5831\u30b2\u30c8\u3057\u307e\u3059\u305f\uff01\\n\\nGlobalIP : \" + jsonIp + \"\\nISP FQDN : \" + jsonHostname\n \n                    print (jsonIp)\n                    print (jsonHostname)\n\n                    DispatchQueue.main.async{\n                        self.label.text = jsonString\n                    }\n                } catch {\n                    print (\"json error\")\n                    return\n                }\n            })\n            task.resume()\n        }\n    }\n    @IBAction func goBack() {\n        label.text = \"(\u0e51\u2022\u0300\u3141\u2022\u0301\u0e51)\u2727\u30b7\u30e3\u30ad\u30fc\u30f3\"\n    }\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        // Do any additional setup after loading the view, typically from a nib.\n    }\n\n    override func didReceiveMemoryWarning() {\n        super.didReceiveMemoryWarning()\n        // Dispose of any resources that can be recreated.\n    }\n\n\n}\n```\n\n\n## \u53c2\u8003URL\n* [[swift3.0\u7cfb]POST\u3067API\uff08PHP\uff09\u304b\u3089JSON\u3092\u53d6\u5f97\u3057\u3001\u30d1\u30fc\u30b9\u3059\u308b\u65b9\u6cd5](http://swift-labo.net/2017/01/30/192/)\n* [inet-ip.info](https://inet-ip.info)\n\n\n## Special Thanks\n[@Ryuichirou](http://qiita.com/Ryuichirou)\n\n", "tags": ["swift3"]}