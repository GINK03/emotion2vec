{"context": "GCP\u306eAE\u3067Go\u306e\u74b0\u5883\u3092\u4f5c\u3063\u305f\u3068\u304d\u306e\u30e1\u30e2\u3002\n\u74b0\u5883\u306fmacOS\n\nAE\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\n\n\n\n\u540d\u524d\n\u5f79\u5272\n\n\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\u4e00\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u74b0\u5883\u5358\u4f4d\u3002\u672c\u756a\u3001\u958b\u767a\u3001\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306a\u3069\n\n\n\u30b5\u30fc\u30d3\u30b9(\u30e2\u30b8\u30e5\u30fc\u30eb)\n\u305d\u308c\u305e\u308c\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u69cb\u6210\u8981\u56e0\u3002API\u3084Web\u3001Bot\u3001\u30d0\u30c3\u30c1\u306a\u3069\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\u305d\u308c\u305e\u308c\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30d3\u30b8\u30e7\u30f3\u756a\u53f7\u3002A/B\u30c6\u30b9\u30c8\u3084\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u306a\u3069\u306b\n\n\n\n\ngcloud\u30b3\u30de\u30f3\u30c9\u306e\u30a4\u30f3\u30b9\u30b3\ngcloud\u306fGCP\u3078\u306e\u4e3b\u8981\u306a\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u30c4\u30fc\u30eb\n$ curl https://sdk.cloud.google.com/ | bash\n$ exec -l $SHELL # \u74b0\u5883\u5909\u6570\u306e\u305f\u3081shell\u3092\u518d\u8d77\u52d5\n\n\nGoogle\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\ngcloud init\u30b3\u30de\u30f3\u30c9\u306fglocud auth\u3060\u3051\u3067\u306f\u306a\u304f\u3001\nglocud config set project\u30b3\u30de\u30f3\u30c9\u306a\u3069\u3082\u3084\u3063\u3066\u304f\u308c\u308b\n$ gcloud auth login \n$ gcloud auth list # \u8a8d\u8a3c\u60c5\u5831\u306e\u78ba\u8a8d\n$ ls -al ~/.config/gcloud/ # \u8a8d\u8a3c\u60c5\u5831\u4fdd\u5b58\u5834\u6240\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306fGCP\u306eWeb\u30b5\u30a4\u30c8\u304b\u3089\u3064\u304f\u308c\u308b\n$ gcloud projects list\nPROJECT_ID    NAME   PROJECT_NUMBER\nonyx-day-154915  hello  242498700225\n$ gcloud config set project onyx-day-154915\n$ gcloud config list \n\n\nAE\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30b3\n\u305f\u3060\u3001GCloud\u306bAE\u306eGo\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u5b58\u5728\u305b\u305a\u3001\n\u304b\u3064\u3001\u305d\u308c\u306fSDK\u3068\u3057\u3066\u72ec\u7acb\u3057\u3066\u3044\u308b\u306e\u3067\u3001\nhttps://cloud.google.com/appengine/downloads\n\u306e\u65b9\u6cd5\u3067\u30a4\u30f3\u30b9\u30b3\u3059\u308b\n$ gcloud components install gae-go # \u3060\u3081\u3060\u3063\u305f\nYou have specified individual components to update.  If you are trying\n to install new components, use:\n  $ gcloud components install gae-go\n\nDo you want to run install instead (y/N)?  y\n\nWARNING: Component [gae-go] no longer exists.\nWARNING: The standalone App Engine SDKs are no longer distributed through the Cloud SDK\n(however, the appcfg and dev_appserver commands remain the official and\nsupported way of using App Engine from the command line).  If you want to\ncontinue using these tools, they are available for download from the official\nApp Engine download page here:\n    https://cloud.google.com/appengine/downloads\n\nAll components are up to date.\n\n$ open https://cloud.google.com/appengine/downloads #\u304b\u3089DL\n$ unzip go_appengine_sdk_darwin_amd64-1.9.48.zip\n$ ls -al go_appengine \n$ mv go_appengine ~\n$ /usr/bin/env python -V # go_appengine\u306fpython 2.7\u4ee5\u4e0a\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u78ba\u8a8d\n$ export PATH=$PATH:$HOME/go_appengine:$GOPATH/bin # bash_profile\u306b\u8ffd\u52a0\u3059\u308b\u3068\u6357\u308b\n\n\n\u30c6\u30b9\u30c8\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4f5c\u6210\n$ mkdir hello\n$ cd hello\n$ touch hello.go # \u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u66f8\u304f\n$ touch app.yaml # \u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u66f8\u304f\n\n\nhello.go\npackage hello\n\nimport (\n        \"fmt\"\n        \"net/http\"\n)\n\nfunc init() {\n        http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n            fmt.Fprint(w, \"Hello, world!\")\n        })\n}\n\n\n\napp.yaml\napplication: onyx-day-154915\nversion: 1\nruntime: go\napi_version: go1\n\nhandlers:\n- url: /.*\n  script: _go_app\n\n\napp.yaml\u306eapplication\u306e\u5024\u306f\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u306f\u4efb\u610f\u3060\u304c\u3001\n\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u306f\u3001\nGCE\u306eProject ID\u3068\u7d10\u4ed8\u3051\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\n\n\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306e\u8d77\u52d5\u30c6\u30b9\u30c8\ngoapp\u306fAE\u306eSDK\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u3082\u306e\n$ pwd\n/Users/os10/Desktop/Apps/hello\n$ goapp serve . # \u30ed\u30fc\u30ab\u30eb\u3067\u8d77\u52d5\u3057\u3066\u3044\u308b\n$ open http://localhost:8000/ # \u7ba1\u7406\u753b\u9762\n$ open http://localhost:8080/ # \u958b\u767a\u753b\u9762\n\n\n\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u306e\u8d77\u52d5\u30c6\u30b9\u30c8\n$ goapp deploy . # \u30ea\u30e2\u30fc\u30c8\u3067\u8d77\u52d5\u3057\u305f\u304c\u3046\u307e\u304f\u884c\u304b\u306a\u304b\u3063\u305f\nError 404: --- begin server output ---\nThis application does not exist (project_id=u'onyx-day-154915'). To create an App Engine application in this project, run \"gcloud beta app create\" in your console.\n--- end server output ---\n$ open https://appengine.google.com/start # \u5148\u306bWeb\u30b5\u30a4\u30c8\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bAE\u3092\u4f5c\u6210\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\n$ goapp deploy . # \u4eca\u5ea6\u306f\u6210\u529f\n...\n11:15 AM Completed update of app: onyx-day-154915, version: 1\n$ open http://onyx-day-154915.appspot.com # \u30c7\u30d7\u30ed\u30a4\u5b8c\u4e86\u3057\u305f\u306e\u3067\u30ea\u30e2\u30fc\u30c8\u78ba\u8a8d\n\n\nReferences\nhttps://cloud.google.com/appengine/docs/go/quickstart\nhttps://cloud.google.com/sdk/gcloud/\nhttp://www.task-notes.com/entry/20151019/1445223600\nhttps://cloud.google.com/sdk/gcloud/reference/\nhttps://cloud.google.com/appengine/docs/go/microservices-on-app-engine\nhttp://www.apps-gcp.com/gae-go-gettingstart-01/\nGCP\u306eAE\u3067Go\u306e\u74b0\u5883\u3092\u4f5c\u3063\u305f\u3068\u304d\u306e\u30e1\u30e2\u3002\n\u74b0\u5883\u306fmacOS\n\n# AE\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\n![](https://cloud.google.com/solutions/images/microservices-shared-services-stack.png)\n\n\n|\u540d\u524d|\u5f79\u5272|\n|---|---|\n|\u30d7\u30ed\u30b8\u30a7\u30af\u30c8|\u4e00\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u74b0\u5883\u5358\u4f4d\u3002\u672c\u756a\u3001\u958b\u767a\u3001\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u306a\u3069|\n|\u30b5\u30fc\u30d3\u30b9(\u30e2\u30b8\u30e5\u30fc\u30eb)|\u305d\u308c\u305e\u308c\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u69cb\u6210\u8981\u56e0\u3002API\u3084Web\u3001Bot\u3001\u30d0\u30c3\u30c1\u306a\u3069|\n|\u30d0\u30fc\u30b8\u30e7\u30f3|\u305d\u308c\u305e\u308c\u306e\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30d3\u30b8\u30e7\u30f3\u756a\u53f7\u3002A/B\u30c6\u30b9\u30c8\u3084\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u306a\u3069\u306b|\n\n# gcloud\u30b3\u30de\u30f3\u30c9\u306e\u30a4\u30f3\u30b9\u30b3\ngcloud\u306fGCP\u3078\u306e\u4e3b\u8981\u306a\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u3001\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u30c4\u30fc\u30eb\n\n```console\n$ curl https://sdk.cloud.google.com/ | bash\n$ exec -l $SHELL # \u74b0\u5883\u5909\u6570\u306e\u305f\u3081shell\u3092\u518d\u8d77\u52d5\n```\n\n# Google\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u8a2d\u5b9a\n\ngcloud init\u30b3\u30de\u30f3\u30c9\u306fglocud auth\u3060\u3051\u3067\u306f\u306a\u304f\u3001\nglocud config set project\u30b3\u30de\u30f3\u30c9\u306a\u3069\u3082\u3084\u3063\u3066\u304f\u308c\u308b\n\n```console\n$ gcloud auth login \n$ gcloud auth list # \u8a8d\u8a3c\u60c5\u5831\u306e\u78ba\u8a8d\n$ ls -al ~/.config/gcloud/ # \u8a8d\u8a3c\u60c5\u5831\u4fdd\u5b58\u5834\u6240\n```\n\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306fGCP\u306eWeb\u30b5\u30a4\u30c8\u304b\u3089\u3064\u304f\u308c\u308b\n\n```console\n$ gcloud projects list\nPROJECT_ID    NAME   PROJECT_NUMBER\nonyx-day-154915  hello  242498700225\n$ gcloud config set project onyx-day-154915\n$ gcloud config list \n```\n\n# AE\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30b3\n\u305f\u3060\u3001GCloud\u306bAE\u306eGo\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u5b58\u5728\u305b\u305a\u3001\n\u304b\u3064\u3001\u305d\u308c\u306fSDK\u3068\u3057\u3066\u72ec\u7acb\u3057\u3066\u3044\u308b\u306e\u3067\u3001\nhttps://cloud.google.com/appengine/downloads\n\u306e\u65b9\u6cd5\u3067\u30a4\u30f3\u30b9\u30b3\u3059\u308b\n\n```console\n$ gcloud components install gae-go # \u3060\u3081\u3060\u3063\u305f\nYou have specified individual components to update.  If you are trying\n to install new components, use:\n  $ gcloud components install gae-go\n\nDo you want to run install instead (y/N)?  y\n\nWARNING: Component [gae-go] no longer exists.\nWARNING: The standalone App Engine SDKs are no longer distributed through the Cloud SDK\n(however, the appcfg and dev_appserver commands remain the official and\nsupported way of using App Engine from the command line).  If you want to\ncontinue using these tools, they are available for download from the official\nApp Engine download page here:\n    https://cloud.google.com/appengine/downloads\n\nAll components are up to date.\n\n$ open https://cloud.google.com/appengine/downloads #\u304b\u3089DL\n$ unzip go_appengine_sdk_darwin_amd64-1.9.48.zip\n$ ls -al go_appengine \n$ mv go_appengine ~\n$ /usr/bin/env python -V # go_appengine\u306fpython 2.7\u4ee5\u4e0a\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u78ba\u8a8d\n$ export PATH=$PATH:$HOME/go_appengine:$GOPATH/bin # bash_profile\u306b\u8ffd\u52a0\u3059\u308b\u3068\u6357\u308b\n```\n\n# \u30c6\u30b9\u30c8\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4f5c\u6210\n```console\n$ mkdir hello\n$ cd hello\n$ touch hello.go # \u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u66f8\u304f\n$ touch app.yaml # \u4e0b\u8a18\u306e\u5185\u5bb9\u3092\u66f8\u304f\n```\n\n```go:hello.go\npackage hello\n\nimport (\n       \t\"fmt\"\n       \t\"net/http\"\n)\n\nfunc init() {\n       \thttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n       \t\tfmt.Fprint(w, \"Hello, world!\")\n       \t})\n}\n```\n\n```yaml:app.yaml\napplication: onyx-day-154915\nversion: 1\nruntime: go\napi_version: go1\n\nhandlers:\n- url: /.*\n  script: _go_app\n```\n\napp.yaml\u306eapplication\u306e\u5024\u306f\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u306f\u4efb\u610f\u3060\u304c\u3001\n\u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5834\u5408\u306f\u3001\nGCE\u306eProject ID\u3068\u7d10\u4ed8\u3051\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\n\n\n# \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306e\u8d77\u52d5\u30c6\u30b9\u30c8\ngoapp\u306fAE\u306eSDK\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u3082\u306e\n\n```console\n$ pwd\n/Users/os10/Desktop/Apps/hello\n$ goapp serve . # \u30ed\u30fc\u30ab\u30eb\u3067\u8d77\u52d5\u3057\u3066\u3044\u308b\n$ open http://localhost:8000/ # \u7ba1\u7406\u753b\u9762\n$ open http://localhost:8080/ # \u958b\u767a\u753b\u9762\n```\n\n# \u30ea\u30e2\u30fc\u30c8\u74b0\u5883\u306e\u8d77\u52d5\u30c6\u30b9\u30c8\n\n```console\n$ goapp deploy . # \u30ea\u30e2\u30fc\u30c8\u3067\u8d77\u52d5\u3057\u305f\u304c\u3046\u307e\u304f\u884c\u304b\u306a\u304b\u3063\u305f\nError 404: --- begin server output ---\nThis application does not exist (project_id=u'onyx-day-154915'). To create an App Engine application in this project, run \"gcloud beta app create\" in your console.\n--- end server output ---\n$ open https://appengine.google.com/start # \u5148\u306bWeb\u30b5\u30a4\u30c8\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bAE\u3092\u4f5c\u6210\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\n$ goapp deploy . # \u4eca\u5ea6\u306f\u6210\u529f\n...\n11:15 AM Completed update of app: onyx-day-154915, version: 1\n$ open http://onyx-day-154915.appspot.com # \u30c7\u30d7\u30ed\u30a4\u5b8c\u4e86\u3057\u305f\u306e\u3067\u30ea\u30e2\u30fc\u30c8\u78ba\u8a8d\n```\n\n# References\nhttps://cloud.google.com/appengine/docs/go/quickstart\nhttps://cloud.google.com/sdk/gcloud/\nhttp://www.task-notes.com/entry/20151019/1445223600\nhttps://cloud.google.com/sdk/gcloud/reference/\nhttps://cloud.google.com/appengine/docs/go/microservices-on-app-engine\nhttp://www.apps-gcp.com/gae-go-gettingstart-01/\n", "tags": ["GoogleCloudPlatform", "AppEngine", "Go"]}