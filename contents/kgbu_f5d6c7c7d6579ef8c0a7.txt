{"context": " More than 1 year has passed since last update.\u6642\u96e8\u5802\u3055\u3093\u304cMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u30b5\u30fc\u30d3\u30b9http://sango.shiguredo.jp \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u3066\u4ee5\u6765\u3001\u3061\u3087\u3063\u3068\u5143\u6c17\u304c\u3067\u305f\u306e\u3067\u3001\u7d20\u632f\u308a\u3068\u79f0\u3057\u3066\u3084\u3063\u3064\u3051\u3066\u307e\u3059w\nmotivated by\uff1ahttp://null.ly/post/56517703680/apache-apollo-node-js-mqtt\n\u3068\u308a\u3042\u3048\u305a\u306e\u7f6e\u304d\u5834\uff1agithub: https://github.com/kgbu/nodem9ttcli\n\nHistory\n\nDraft : 2014/9/18\ninitial post on Qiita : 2014/9/21\nWebsocket\u4f7f\u3046\u4f8b\u3092mows\u3067\u8ffd\u52a0\u3057\u307e\u3057\u305f\uff1a 2014/10/6\n\n\n\u6e96\u5099\n\ncase Mac:\nMac OSX (10.9)\u306e\u74b0\u5883\u3067\u3001\u307e\u305a\u306fnode.js\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u3053\u308c\u306fhttp://nodejs.org/ \u3067INSTALL\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3060\u3051\u3002\n\u305d\u306e\u5f8c\u3001MQTT\u3068\u5fc5\u8981\u306b\u306a\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092npm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\nnode : v0.10.32\nnpm : 1.4.28\n\n$ npm install mqtt fs process\n\n\nmqtt : 0.3.12\nfs(filesystem) : 1.0.1\nprocess : 0.8.0\n\n\ncase CentOS (64bit):\nx86, x86-64\u306eLinux\u306e\u5834\u5408\u30d0\u30a4\u30ca\u30ea\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308b\u306e\u3067\u3001http://nodejs.org/\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306e\u30ea\u30f3\u30af\u3092\u30b3\u30d4\u30fc\u3057\u3066wget\u3067\u304d\u308b\u3002\n\u8a73\u3057\u304f\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u89e3\u51cd\u3057\u3066\u3067\u304d\u308bREADME.md\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u89e3\u51cd\u3057\u3066\u3067\u304d\u305fbin/\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d1\u30b9\u304c\u5207\u3089\u308c\u3066\u3044\u308c\u3070\u4f7f\u3048\u307e\u3059\u3002\nroot\u6a29\u9650\u3067\u3084\u3063\u3066\u307f\u308b\u5834\u5408\u3002\n# cd /usr/local/src\n# wget http://nodejs.org/dist/v0.10.32/node-v0.10.32-linux-x64.tar.gz\n# cd /usr/local && tar --strip-components 1 -xzf \\\n>                          /usr/local/src/node-v0.10.32-linux-x64.tar.gz\n-v0.10.32-linux-x64.tar.gz\n\nnpm\u3067\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5404\u500b\u4eba\u3067\u3002\u3084\u308a\u65b9\u306fMac OSX\u3068\u540c\u3058\n$ npm install mqtt fs process\n\n\n\u30b5\u30f3\u30d7\u30eb\u3046\u3054\u304b\u3057\u3066\u307f\u307e\u3057\u305f\n\u5c0f\u5b66\u751f\u306e\u65e5\u8a18\u30ec\u30d9\u30eb\u3067\u3059\u3044\u307e\u305b\u3093\u3002\n\npub.js - publisher client\u30b5\u30f3\u30d7\u30eb\nMQTT.js\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u3044\u3058\u308a\u307e\u3057\u305f\u3002\n\u203btopic\u306e\u90e8\u5206\u306fsango.shiguredo.jp\u3092\u3061\u3087\u3063\u3068\u610f\u8b58\u3057\u3066\u307e\u3059\u3002MQTT\u306e\u4ed5\u69d8\u3068\u3057\u3066\u306f\u7279\u306b\u5236\u9650\u306f\u7121\u3044\u306e\u3067\u3001publish\u3057\u305ftopic\u3068\u540c\u3058\u3067\u3042\u308c\u3070\u4efb\u610f\u306e\u6587\u5b57\u5217\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\nnode.js\nvar mqtt = require('mqtt');\nvar fs = require('fs');\nvar process = require('process');\n\nvar cfg = JSON.parse(fs.readFileSync(process.env.HOME+'/.mqttcli.cfg', 'utf8'));\n\nvar host = cfg.host || 'localhost';\nvar port = cfg.port || 1883;\n\nvar client = mqtt.createClient(cfg.port, cfg.host, { username: cfg.username, password : cfg.password });\n\nvar topic= cfg.username+'/pubtest';\n\nsetInterval(function() {\n  client.publish(topic, 'aaaa');\n  client.publish(topic, Date.now().toString());\n}, 1000);\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u3002github\u306b\u3082sample.mqttcli.cfg\u3068\u3057\u3066\u4e0a\u3052\u3066\u304a\u304d\u307e\u3057\u305f\u3002\n{\n  \"host\": \"localhost\",\n  \"port\": \"1883\",\n  \"username\": \"kgbu\",\n  \"password\": \"passwordstring\"\n}\n\n\u3068\u308a\u3042\u3048\u305amqttcli\u306esubscriber\u3067\u898b\u3066\u307f\u308b\u3068\u3001\u3001\u3001\n$ mqttcli/mqttcli sub -t \"\u30c8\u30d4\u30c3\u30af/#\" \naaaa\n1410979794228\naaaa\n1410979795230\naaaa\n1410979796231\naaaa\n1410979797234\n:\n(\u4ee5\u5f8c\uff11\u79d2\u6bce\u306b\u7e70\u308a\u8fd4\u3059\uff09\n\n\nsub.js - subscriber client\u30b5\u30f3\u30d7\u30eb\nvar mqtt = require('mqtt');\nvar fs = require('fs');\nvar process = require('process');\n\nvar cfg = JSON.parse(fs.readFileSync(process.env.HOME+'/.mqttcli.cfg', 'utf8'));\n\nvar host = cfg.host || 'localhost';\nvar port = cfg.port || 1883;\n\nvar client = mqtt.createClient(cfg.port, cfg.host, { username: cfg.username, password : cfg.password });\n\nvar topic= cfg.username+'/#';\n\nclient.subscribe(topic);\n\nconsole.log('topic:message');\n\nclient.on('message', function(topic,message) {\n  console.log(topic+':'+message);\n});\n\n\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002sub.js\u3092\u8d77\u52d5\u3057\u3066\u304b\u3089\u3001\u5148\u306e\u4f8b\u3068\u540c\u3058pub.js\u3092\u52d5\u304b\u3059\u3068\u3001mosquitto\u306eclient\u3068\u540c\u69d8\u306b\u52d5\u304d\u307e\u3059\u3002\uff08\u3061\u3087\u3063\u3068\u8868\u793a\u304c\u3044\u3058\u3063\u3066\u3042\u308a\u307e\u3059\uff09\n$ node sub.js \ntopic:message\nkgbu/pubtest:aaaa\nkgbu/pubtest:1411268401976\nkgbu/pubtest:aaaa\nkgbu/pubtest:1411268402984\nkgbu/pubtest:aaaa\nkgbu/pubtest:1411268403987\n :\n\n\u3053\u306e\u51fa\u529b\u3092\u3001\u305f\u3068\u3048\u3070 public_html/mqtt_text.html\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308c\u3070\u3001\u3001\u3001\n$ node sub.js > ~/public_html/mqtt_text.html\n\nhttp://hoge.hoge/~username/mqtt_text.html \u306e\u5185\u5bb9\u304c\u3069\u3093\u3069\u3093\u5909\u5316\u3057\u3066\u3044\u304f\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\nTODO\u3060\u3063\u305f\u3053\u3068\u306a\u3069\u3001\u3001\u3001\n\nwebsocket\u7d4c\u7531\u3067\u306f\u3069\u3046\u304b\uff1f\u7d50\u5c40MOWS\u306e\u30b5\u30f3\u30d7\u30eb\u52d5\u304b\u3057\u307e\u3057\u305f\nsango\u306fWebsocket\u3067\u3082\u7e4b\u304c\u308b\u306e\u3067\u3001\u8a66\u3057\u305f\u304f\u306a\u308b\u306e\u306f\u4eba\u60c5\u3067\u3059\u3002\n\u3044\u308d\u3044\u308d\u81ea\u5206\u3067\u3084\u3063\u3066\u307f\u3088\u3046\u3068\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u7d50\u5c40\u306f[mows]\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u3069\u3046\u305e\u3001\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u5143\u306e\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3053\u53c2\u7167\uff1a\u3000https://github.com/mcollina/mows#on-node\n(\u81ea\u5206\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306fURL\u3068port\u756a\u53f7\u304c\u30ab\u30d6\u3063\u3066\u3044\u308b\u306e\u304c\u6c17\u306b\u5165\u3089\u306a\u3044\u306e\u3067\u3059\u304c...)\nvar ops = {username: \u8a8d\u8a3c\u7528\u30e6\u30fc\u30b6\u30fc\u540d,\n      password: \u8a8d\u8a3c\u7528\u30d1\u30b9\u30ef\u30fc\u30c9};\nvar mows   = require('mows')\n  , client = mows.createClient(\u30dd\u30fc\u30c8\u756a\u53f7,'ws://MQTT\u30b5\u30fc\u30d0\u30fc:\u30dd\u30fc\u30c8\u756a\u53f7/mqtt',ops);\n\nclient.subscribe ('\u30c8\u30d4\u30c3\u30af\u306e\u30d9\u30fc\u30b9/#');\nclient.publish('\u30c8\u30d4\u30c3\u30af\u306e\u30d9\u30fc\u30b9/mowstest', 'Hello mqtt');\n\nclient.on('message', function (topic, message) {\n  console.log(topic, message);\n\n  client.end();\n});\n\n\u5b9f\u884c\u7d50\u679c\n$ node mowspub.js\nkgbu@github/mowstest Hello mqtt\n\n\nMQTT.js\u3068mows\u306e\u95a2\u4fc2\u3092\u7406\u89e3\u3057\u305f\u3044\n\u305d\u3082\u305d\u3082mows\u306fMQTT.js\u3092websocket\u3067\u7e6b\u3050\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u81ea\u5206\u3082\u540c\u3058\u3053\u3068\u3092\u3057\u3088\u3046\u3068\u3057\u3066\u3001MQTT.js\u304cstream\u4f7f\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3078WS\u306ewebsocket\u51fa\u529b\u3092\u3069\u3046\u7e6b\u3054\u3046\u304b\u3068\u8003\u3048\u3066\u3044\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306bwebsocket\u3078\u306eupgrade\u307e\u3067\u306f\u3067\u304d\u307e\u3057\u305f\u304c\u3001binary\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066MQTT\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u69cb\u7bc9\u3059\u308b\u90e8\u5206\u306f\u662f\u975eMQTT.js\u306e\u30b3\u30fc\u30c9\u3092\u5229\u7528\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u30b3\u30fc\u30c9\u8aad\u3093\u3067\u3044\u307e\u3057\u305f\u304c\u3001\u75b2\u308c\u305f\u306e\u3067(w\u3001MOWS\u306b\u304a\u3059\u304c\u308a\u3057\u307e\u3057\u305fw\nmows\u3067\u306f\u305d\u3053\u3092websocket-stream\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u305d\u306e\u5b9f\u4f53\u306f\u3000https://github.com/maxogden/websocket-stream/blob/master/index.js \u306b\u3042\u308a\u3001\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u53c2\u8003\u6587\u732e\u3000\u80a9\u306b\u4e57\u305b\u3066\u3082\u3089\u3063\u305f\u5de8\u4eba\u9054\nhttp://wiki.eclipse.org/Paho/Paho_Websockets - Paho\u306eMQTT Websocket client\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nhttp://tools.ietf.org/html/rfc6455 - websocket RFC\nhttp://yosuke-furukawa.hatenablog.com/entry/2014/05/30/093103 - Socket.IO 1.0\u306e\u7d39\u4ecb (\u7ffb\u8a33)\nhttp://blog.wnotes.net/blog/article/nodejs-socketio-summary (socket.io\u306e\u4f7f\u3044\u65b9)\nhttp://d.hatena.ne.jp/yudetamago_orz/20120109/1326037157 (net.connect\u306e\u4f7f\u3044\u65b9\uff09\n\n\u6642\u96e8\u5802\u3055\u3093\u304cMQTT\u30d6\u30ed\u30fc\u30ab\u30fc\u30b5\u30fc\u30d3\u30b9http://sango.shiguredo.jp \u3092\u30ea\u30ea\u30fc\u30b9\u3057\u3066\u4ee5\u6765\u3001\u3061\u3087\u3063\u3068\u5143\u6c17\u304c\u3067\u305f\u306e\u3067\u3001\u7d20\u632f\u308a\u3068\u79f0\u3057\u3066\u3084\u3063\u3064\u3051\u3066\u307e\u3059w\n\nmotivated by\uff1ahttp://null.ly/post/56517703680/apache-apollo-node-js-mqtt\n\n\u3068\u308a\u3042\u3048\u305a\u306e\u7f6e\u304d\u5834\uff1agithub: https://github.com/kgbu/nodem9ttcli\n\n## History\n1. Draft : 2014/9/18\n1. initial post on Qiita : 2014/9/21\n1. Websocket\u4f7f\u3046\u4f8b\u3092mows\u3067\u8ffd\u52a0\u3057\u307e\u3057\u305f\uff1a 2014/10/6\n\n## \u6e96\u5099\n\n### case Mac:\n\nMac OSX (10.9)\u306e\u74b0\u5883\u3067\u3001\u307e\u305a\u306fnode.js\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\u3053\u308c\u306fhttp://nodejs.org/ \u3067INSTALL\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3060\u3051\u3002\n\u305d\u306e\u5f8c\u3001MQTT\u3068\u5fc5\u8981\u306b\u306a\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092npm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n+ node : v0.10.32\n+ npm : 1.4.28\n\n```{sh}\n$ npm install mqtt fs process\n```\n\n+ mqtt : 0.3.12\n+ fs(filesystem) : 1.0.1\n+ process : 0.8.0\n\n### case CentOS (64bit):\n\nx86, x86-64\u306eLinux\u306e\u5834\u5408\u30d0\u30a4\u30ca\u30ea\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308b\u306e\u3067\u3001http://nodejs.org/\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u306e\u30ea\u30f3\u30af\u3092\u30b3\u30d4\u30fc\u3057\u3066wget\u3067\u304d\u308b\u3002\n\n\u8a73\u3057\u304f\u306f\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u89e3\u51cd\u3057\u3066\u3067\u304d\u308bREADME.md\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u89e3\u51cd\u3057\u3066\u3067\u304d\u305f```bin/```\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d1\u30b9\u304c\u5207\u3089\u308c\u3066\u3044\u308c\u3070\u4f7f\u3048\u307e\u3059\u3002\n\nroot\u6a29\u9650\u3067\u3084\u3063\u3066\u307f\u308b\u5834\u5408\u3002\n\n```\n# cd /usr/local/src\n# wget http://nodejs.org/dist/v0.10.32/node-v0.10.32-linux-x64.tar.gz\n# cd /usr/local && tar --strip-components 1 -xzf \\\n>                          /usr/local/src/node-v0.10.32-linux-x64.tar.gz\n-v0.10.32-linux-x64.tar.gz\n```\n\nnpm\u3067\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5404\u500b\u4eba\u3067\u3002\u3084\u308a\u65b9\u306fMac OSX\u3068\u540c\u3058\n\n```{sh}\n$ npm install mqtt fs process\n```\n\n# \u30b5\u30f3\u30d7\u30eb\u3046\u3054\u304b\u3057\u3066\u307f\u307e\u3057\u305f\n\u5c0f\u5b66\u751f\u306e\u65e5\u8a18\u30ec\u30d9\u30eb\u3067\u3059\u3044\u307e\u305b\u3093\u3002\n\n\n## pub.js - publisher client\u30b5\u30f3\u30d7\u30eb\n\nMQTT.js\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u3044\u3058\u308a\u307e\u3057\u305f\u3002\n\u203btopic\u306e\u90e8\u5206\u306fsango.shiguredo.jp\u3092\u3061\u3087\u3063\u3068\u610f\u8b58\u3057\u3066\u307e\u3059\u3002MQTT\u306e\u4ed5\u69d8\u3068\u3057\u3066\u306f\u7279\u306b\u5236\u9650\u306f\u7121\u3044\u306e\u3067\u3001publish\u3057\u305ftopic\u3068\u540c\u3058\u3067\u3042\u308c\u3070\u4efb\u610f\u306e\u6587\u5b57\u5217\u3067\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\n\n```{node.js}\nvar mqtt = require('mqtt');\nvar fs = require('fs');\nvar process = require('process');\n\nvar cfg = JSON.parse(fs.readFileSync(process.env.HOME+'/.mqttcli.cfg', 'utf8'));\n\nvar host = cfg.host || 'localhost';\nvar port = cfg.port || 1883;\n\nvar client = mqtt.createClient(cfg.port, cfg.host, { username: cfg.username, password : cfg.password });\n\nvar topic= cfg.username+'/pubtest';\n\nsetInterval(function() {\n  client.publish(topic, 'aaaa');\n  client.publish(topic, Date.now().toString());\n}, 1000);\n```\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f\u3053\u3093\u306a\u611f\u3058\u3002github\u306b\u3082<a href=\"https://github.com/kgbu/nodem9ttcli/blob/master/sample.mqttcli.cfg\">sample.mqttcli.cfg</a>\u3068\u3057\u3066\u4e0a\u3052\u3066\u304a\u304d\u307e\u3057\u305f\u3002\n\n```{JSON}\n{\n  \"host\": \"localhost\",\n  \"port\": \"1883\",\n  \"username\": \"kgbu\",\n  \"password\": \"passwordstring\"\n}\n```\n\n\u3068\u308a\u3042\u3048\u305amqttcli\u306esubscriber\u3067\u898b\u3066\u307f\u308b\u3068\u3001\u3001\u3001\n\n```\n$ mqttcli/mqttcli sub -t \"\u30c8\u30d4\u30c3\u30af/#\" \naaaa\n1410979794228\naaaa\n1410979795230\naaaa\n1410979796231\naaaa\n1410979797234\n:\n(\u4ee5\u5f8c\uff11\u79d2\u6bce\u306b\u7e70\u308a\u8fd4\u3059\uff09\n````\n\n## sub.js - subscriber client\u30b5\u30f3\u30d7\u30eb\n\n```{javascript}\nvar mqtt = require('mqtt');\nvar fs = require('fs');\nvar process = require('process');\n\nvar cfg = JSON.parse(fs.readFileSync(process.env.HOME+'/.mqttcli.cfg', 'utf8'));\n\nvar host = cfg.host || 'localhost';\nvar port = cfg.port || 1883;\n\nvar client = mqtt.createClient(cfg.port, cfg.host, { username: cfg.username, password : cfg.password });\n\nvar topic= cfg.username+'/#';\n\nclient.subscribe(topic);\n\nconsole.log('topic:message');\n\nclient.on('message', function(topic,message) {\n  console.log(topic+':'+message);\n});\n```\n\n\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002sub.js\u3092\u8d77\u52d5\u3057\u3066\u304b\u3089\u3001\u5148\u306e\u4f8b\u3068\u540c\u3058pub.js\u3092\u52d5\u304b\u3059\u3068\u3001mosquitto\u306eclient\u3068\u540c\u69d8\u306b\u52d5\u304d\u307e\u3059\u3002\uff08\u3061\u3087\u3063\u3068\u8868\u793a\u304c\u3044\u3058\u3063\u3066\u3042\u308a\u307e\u3059\uff09\n\n```\n$ node sub.js \ntopic:message\nkgbu/pubtest:aaaa\nkgbu/pubtest:1411268401976\nkgbu/pubtest:aaaa\nkgbu/pubtest:1411268402984\nkgbu/pubtest:aaaa\nkgbu/pubtest:1411268403987\n :\n```\n\n\u3053\u306e\u51fa\u529b\u3092\u3001\u305f\u3068\u3048\u3070 public_html/mqtt_text.html\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308c\u3070\u3001\u3001\u3001\n\n```\n$ node sub.js > ~/public_html/mqtt_text.html\n```\n\nhttp://hoge.hoge/~username/mqtt_text.html \u306e\u5185\u5bb9\u304c\u3069\u3093\u3069\u3093\u5909\u5316\u3057\u3066\u3044\u304f\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n# TODO\u3060\u3063\u305f\u3053\u3068\u306a\u3069\u3001\u3001\u3001\n\n## websocket\u7d4c\u7531\u3067\u306f\u3069\u3046\u304b\uff1f\u7d50\u5c40MOWS\u306e\u30b5\u30f3\u30d7\u30eb\u52d5\u304b\u3057\u307e\u3057\u305f\n\nsango\u306fWebsocket\u3067\u3082\u7e4b\u304c\u308b\u306e\u3067\u3001\u8a66\u3057\u305f\u304f\u306a\u308b\u306e\u306f\u4eba\u60c5\u3067\u3059\u3002\n\u3044\u308d\u3044\u308d\u81ea\u5206\u3067\u3084\u3063\u3066\u307f\u3088\u3046\u3068\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u7d50\u5c40\u306f<a href=\"https://github.com/mcollina/mows\">[mows]</a>\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u3069\u3046\u305e\u3001\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u5143\u306e\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3053\u53c2\u7167\uff1a\u3000https://github.com/mcollina/mows#on-node\n(\u81ea\u5206\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u306fURL\u3068port\u756a\u53f7\u304c\u30ab\u30d6\u3063\u3066\u3044\u308b\u306e\u304c\u6c17\u306b\u5165\u3089\u306a\u3044\u306e\u3067\u3059\u304c...)\n\n```\nvar ops = {username: \u8a8d\u8a3c\u7528\u30e6\u30fc\u30b6\u30fc\u540d,\n      password: \u8a8d\u8a3c\u7528\u30d1\u30b9\u30ef\u30fc\u30c9};\nvar mows   = require('mows')\n  , client = mows.createClient(\u30dd\u30fc\u30c8\u756a\u53f7,'ws://MQTT\u30b5\u30fc\u30d0\u30fc:\u30dd\u30fc\u30c8\u756a\u53f7/mqtt',ops);\n\nclient.subscribe ('\u30c8\u30d4\u30c3\u30af\u306e\u30d9\u30fc\u30b9/#');\nclient.publish('\u30c8\u30d4\u30c3\u30af\u306e\u30d9\u30fc\u30b9/mowstest', 'Hello mqtt');\n\nclient.on('message', function (topic, message) {\n  console.log(topic, message);\n\n  client.end();\n});\n```\n\n\u5b9f\u884c\u7d50\u679c\n\n```\n$ node mowspub.js\nkgbu@github/mowstest Hello mqtt\n```\n\n## MQTT.js\u3068mows\u306e\u95a2\u4fc2\u3092\u7406\u89e3\u3057\u305f\u3044\n\u305d\u3082\u305d\u3082mows\u306fMQTT.js\u3092websocket\u3067\u7e6b\u3050\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u81ea\u5206\u3082\u540c\u3058\u3053\u3068\u3092\u3057\u3088\u3046\u3068\u3057\u3066\u3001MQTT.js\u304cstream\u4f7f\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3078<a href=\"https://github.com/einaros/ws\">WS</a>\u306ewebsocket\u51fa\u529b\u3092\u3069\u3046\u7e6b\u3054\u3046\u304b\u3068\u8003\u3048\u3066\u3044\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306bwebsocket\u3078\u306eupgrade\u307e\u3067\u306f\u3067\u304d\u307e\u3057\u305f\u304c\u3001binary\u306e\u30c7\u30fc\u30bf\u3068\u3057\u3066MQTT\u306e\u30d1\u30b1\u30c3\u30c8\u3092\u69cb\u7bc9\u3059\u308b\u90e8\u5206\u306f\u662f\u975eMQTT.js\u306e\u30b3\u30fc\u30c9\u3092\u5229\u7528\u3057\u305f\u3044\u3068\u601d\u3063\u3066\u30b3\u30fc\u30c9\u8aad\u3093\u3067\u3044\u307e\u3057\u305f\u304c\u3001\u75b2\u308c\u305f\u306e\u3067(w\u3001MOWS\u306b\u304a\u3059\u304c\u308a\u3057\u307e\u3057\u305fw\nmows\u3067\u306f\u305d\u3053\u3092<a href=\"http://github.com/maxogden/websocket-stream.git\">websocket-stream</a>\u3092\u4f7f\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u305d\u306e\u5b9f\u4f53\u306f\u3000https://github.com/maxogden/websocket-stream/blob/master/index.js \u306b\u3042\u308a\u3001\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n# \u53c2\u8003\u6587\u732e\u3000\u80a9\u306b\u4e57\u305b\u3066\u3082\u3089\u3063\u305f\u5de8\u4eba\u9054\nhttp://wiki.eclipse.org/Paho/Paho_Websockets - Paho\u306eMQTT Websocket client\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nhttp://tools.ietf.org/html/rfc6455 - websocket RFC\nhttp://yosuke-furukawa.hatenablog.com/entry/2014/05/30/093103 - Socket.IO 1.0\u306e\u7d39\u4ecb (\u7ffb\u8a33)\nhttp://blog.wnotes.net/blog/article/nodejs-socketio-summary (socket.io\u306e\u4f7f\u3044\u65b9)\nhttp://d.hatena.ne.jp/yudetamago_orz/20120109/1326037157 (net.connect\u306e\u4f7f\u3044\u65b9\uff09\n\n", "tags": ["Node.js", "mqtt"]}