{"context": " More than 1 year has passed since last update.\u30b0\u30ea\u30fc\u30f3\u3001\u30a4\u30a8\u30ed\u30fc\u3001\u30ec\u30c3\u30c9\u306e\u9806\u306b\u70b9\u6ec5\u3002\n#include \"ch.h\"\n#include \"hal.h\"\n\n#define CONSOLE_WA_SIZE         THD_WORKING_AREA_SIZE(4096)\n#define cputs(msg)              chMsgSend(cdtp, (msg_t) msg)\nstatic thread_t * cdtp;\nstatic THD_FUNCTION(console_thread, arg)\n{\n    (void) arg;\n    while (!chThdShouldTerminateX())\n    {\n        thread_t * tp = chMsgWait();\n        puts((char *) chMsgGet(tp));\n        fflush(stdout);\n        chMsgRelease(tp, MSG_OK);\n    }\n}\nint main(void)\n{\n    halInit();\n    chSysInit();\n    cdtp = chThdCreateFromHeap(NULL, CONSOLE_WA_SIZE, NORMALPRIO, console_thread, NULL);\n    while (!chThdShouldTerminateX())\n    {\n        cputs(\"green on\");\n        chThdSleepMilliseconds(500);\n        cputs(\"green off\");\n        cputs(\"yellow on\");\n        chThdSleepMilliseconds(500);\n        cputs(\"yellow off\");\n        cputs(\"red on\");\n        chThdSleepMilliseconds(500);\n        cputs(\"red off\");\n    }\n    return 0;\n}\n\n\u30b0\u30ea\u30fc\u30f3\u3001\u30a4\u30a8\u30ed\u30fc\u3001\u30ec\u30c3\u30c9\u306e\u9806\u306b\u70b9\u6ec5\u3002![chibios.PNG](https://qiita-image-store.s3.amazonaws.com/0/18104/57d49219-22b9-2f96-427e-017d303539de.png)\n\n```\n#include \"ch.h\"\n#include \"hal.h\"\n\n#define CONSOLE_WA_SIZE\t\t \tTHD_WORKING_AREA_SIZE(4096)\n#define cputs(msg) \t\t\t\tchMsgSend(cdtp, (msg_t) msg)\nstatic thread_t * cdtp;\nstatic THD_FUNCTION(console_thread, arg)\n{\n\t(void) arg;\n\twhile (!chThdShouldTerminateX())\n\t{\n\t\tthread_t * tp = chMsgWait();\n\t\tputs((char *) chMsgGet(tp));\n\t\tfflush(stdout);\n\t\tchMsgRelease(tp, MSG_OK);\n\t}\n}\nint main(void)\n{\n\thalInit();\n\tchSysInit();\n\tcdtp = chThdCreateFromHeap(NULL, CONSOLE_WA_SIZE, NORMALPRIO, console_thread, NULL);\n\twhile (!chThdShouldTerminateX())\n\t{\n\t\tcputs(\"green on\");\n\t\tchThdSleepMilliseconds(500);\n\t\tcputs(\"green off\");\n\t\tcputs(\"yellow on\");\n\t\tchThdSleepMilliseconds(500);\n\t\tcputs(\"yellow off\");\n\t\tcputs(\"red on\");\n\t\tchThdSleepMilliseconds(500);\n\t\tcputs(\"red off\");\n\t}\n\treturn 0;\n}\n```\n", "tags": ["chibios", "L\u30c1\u30ab"]}