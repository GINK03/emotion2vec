{"context": " More than 1 year has passed since last update.\u57fa\u672c\u7684\u306bRailscasts\u306e#335 Deploying to a VPS\u306e\u901a\u308a\u306b\u4f5c\u696d\u3057\u307e\u3057\u305f\u3002\nhttp://railscasts.com/episodes/335-deploying-to-a-vps?view=asciicast\nRailscasts pro\u306b\u5165\u3089\u306a\u3044\u3068\u898b\u3089\u308c\u306a\u3044\u3067\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u4e0a\u8a18\u306e\u30da\u30fc\u30b8\u306e\u88dc\u8db3\u3001Railscasts\u306e\u307e\u307e\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u70b9\u3092\u66f8\u304d\u307e\u3059\u3002\u306a\u306e\u3067\u3001Railscasts#335\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u66f8\u304d\u307e\u305b\u3093\u3002Railscasts pro\u306b\u5165\u3063\u3066\u3001\u307e\u305a\u306f http://railscasts.com/episodes/335-deploying-to-a-vps?view=asciicast \u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u672c\u756a\u74b0\u5883\u306e\u8a2d\u5b9a\n\u3055\u304f\u3089VPS\u306e\u89e3\u8aac\u306f\u3053\u3061\u3089\u3067\u3002\nhttp://dotinstall.com/lessons/basic_sakura_vps\n#1\u301c#10\u307e\u3067\u898b\u305f\u3089\u5927\u4e08\u592b\u3002#11\u4ee5\u964d\u306f\u898b\u306a\u304f\u3066\u3088\u3044\u3067\u3059\u3002\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308bApache\u3067\u306f\u306a\u304f\u3001Web\u30b5\u30fc\u30d0\u306bnginx\u3092\u4f7f\u3046\u306e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\nUbuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3055\u304f\u3089\u306eVPS\u516c\u5f0f\u30ac\u30a4\u30c9\u3092\u898b\u306a\u304c\u3089\u307e\u305a\u306fUbuntu 12.04\u3092\u30ab\u30b9\u30bf\u30e0\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nhttp://support.sakura.ad.jp/manual/vps/mainte/custom_ubuntu1204.html\n\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u3092Japanese\u306b\u3057\u305f\u3068\u3053\u308d\u3001\u554f\u984c\u304c\u767a\u751f\u3002\n\u306a\u305c\u304b\u65e5\u672c\u8a9e\u5165\u529b\u3067\u3001Alt + Ctrl\u3092\u62bc\u3057\u3066\u3082\u76f4\u63a5\u5165\u529b\u306b\u623b\u305b\u306a\u3044\u3002\n\u3057\u304b\u305f\u304c\u306a\u3044\u306e\u3067\u3001Configure the keyboard\u3067English(US)\u3092\u9078\u629e\u3057\u3066\u76f4\u3057\u305f\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u969b\u306b\u3001root\u3067\u306f\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u306ekatryo\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u4ee5\u5f8c\u3001\u57fa\u672c\u7684\u306b\u3053\u306e\u65b0\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u4f5c\u696d\u3057\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u306a\u306b\u306f\u3068\u3082\u3042\u308c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3002\n\nsshd\u306e\u8a2d\u5b9a\nhttp://blog.livedoor.jp/oceanweb/archives/18082178.html\n\u3053\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3001\u307e\u305a\u306fsshd\u3092\u8a2d\u5b9a\u3002\u63a5\u7d9a\u30dd\u30fc\u30c8\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n/etc/ssh/sshd_config\u3092\u63a2\u3057\u3066\u3001\n#Port 22\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\nPort 10022 #1024\u304b\u308965535\u307e\u3067\u306e\u4efb\u610f\u306e\u6574\u6570\n\n\u306b\u5909\u3048\u307e\u3059\u3002\u305d\u3057\u3066Root\u30ed\u30b0\u30a4\u30f3\u3092\u5236\u9650\u3059\u308b\u305f\u3081\nPermitRootLogin no\n\n\u306b\u3057\u307e\u3059\u3002\u521d\u671f\u8a2d\u5b9a\u3067\u3053\u3046\u306a\u3063\u3066\u308b\u304b\u3082\u3067\u3059\u3002\n\nRSA\u516c\u958b\u9375\u3092\u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u306b\u9001\u4fe1\n\u3055\u304f\u3089VPS\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u304b\u305b\u308b\u74b0\u5883\u3068\u3057\u3066\u30ea\u30e2\u30fc\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u4e0a\u90e8\u306b\u306f\u3001\u9577\u3044\u6587\u5b57\u5217\u3092\u5165\u529b\u3067\u304d\u308b\u30b3\u30d4\u30da\u30dc\u30bf\u30f3\u304c\u3042\u308a\u307e\u3059\u3002\n\u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u306b\u306f\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3092\u53d7\u3051\u6e21\u305b\u306a\u3044\u306e\u3067\u3001\u30b3\u30d4\u30da\u30dc\u30bf\u30f3\u306f\u975e\u5e38\u306b\u3042\u308a\u304c\u305f\u3044\u3002\n\u306f\u305a\u306a\u306e\u3067\u3059\u304c\u3001\u30b3\u30d4\u30da\u4ee5\u524d\u306b\u307e\u3068\u3082\u306b\u53cd\u5fdc\u3057\u307e\u305b\u3093\u3002\u306a\u306e\u3067\u3001\u958b\u767a\u74b0\u5883\u5074\u304b\u3089scp\u3067rsa.pub\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002\n# \u958b\u767a\u74b0\u5883\u304b\u3089\n$ scp ~/.ssh/id_rsa.pub katryo@1xx.xxx.xxx.xx:~/.ssh/authorized_keys\n\n\u672c\u756a\u74b0\u5883\u3067\u3001chmod\u3067authorized_keys\u3078\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092600\u306b\u5909\u3048\u307e\u3059\u3002\n$ chmod 600 authorized_keys\n\n\n\u65e5\u672c\u8a9elocale\u3092\u4f5c\u308b\n\u3053\u3053\u3092\u53c2\u8003\u306b\u3002\nhttp://www.compnet.jp/index.php/archives/2571\n$ sudo locale-gen ja_JP.UTF-8\n$ sudo update-locale LANG=ja_JP.UTF-8\n\n\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nCentOS\u3060\u3068/etc/sysconfig/iptables\u3092\u7de8\u96c6\u3059\u308b\u3093\u3067\u3059\u304c\u3001Ubuntu\u306b\u306fufw\u3068\u3044\u3046\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u304c\u6700\u521d\u304b\u3089\u5165\u3063\u3066\u3044\u307e\u3059\u3002\nhttp://d.hatena.ne.jp/babie/20110220/1298181572\nhttp://gihyo.jp/admin/serial/01/ubuntu-recipe/0076\nhttp://linuxsalad.blogspot.jp/2009/02/ufw.html\n\u3042\u305f\u308a\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\n$ sudo ufw default deny\n$ sudo ufw allow 3000 #Rails\u3067\u4f7f\u3046\n$ sudo ufw allow 5000 #Sinatra\u3067\u4f7f\u3046\n$ sudo ufw allow 100022 #port22\u304b\u3089ssh\u3067\u4f7f\u3046port\u3092\u5909\u66f4\u3057\u305f\n$ sudo ufw enable\n$ sudo ufw status\n\n\u306e\u3088\u3046\u306b\u3057\u3066\u30013000\u30685000\u306810022\u30dd\u30fc\u30c8\u3092\u958b\u3051\u307e\u3057\u305f\u3002\n\nadd-apt-repository\u304c\u306a\u3044\n\u521d\u671f\u72b6\u614b\u3067\u306fadd-apt-repository\u304c\u4f7f\u3048\u307e\u305b\u3093\u3002\nhttp://stackoverflow.com/questions/13018626/add-apt-repository-not-found\n\u306b\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u306b\u3001\n$ sudo apt-get install software-properties-common\n\n\u3067software-properties-common\u3092\u5165\u308c\u308c\u3070\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nbind() to 0.0.0.0:80 failed (98: Address already in use)\nnginx\u3092\u8d77\u52d5\u3059\u308b\u3068\u3001\nnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)\nnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)\nnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)\nnginx: [emerg] still could not bind()\n\n\n\u3068\u8a00\u308f\u308c\u307e\u3057\u305f\u3002\nStarkoverflow\u3088\u308a\nhttp://stackoverflow.com/questions/14969134/setting-up-linode-ubuntu-10-04-32bit-nginx-not-starting-98-address-already-i\n\u3053\u306e\u56de\u7b54\u3069\u304a\u308a\u3001/etc/nginx/sites-enabled/default \u3092\u4fee\u6b63\u3057\u3066\nlisten   80; ## listen for ipv4\nlisten   [::]:80 default ipv6only=on; ## listen for ipv6\n\n\u3068\u3057\u305f\u3089\u3001nginx\u304c\u52d5\u304d\u307e\u3057\u305f\u3002\n\npostgres\u304c\u3046\u307e\u304f\u52d5\u304b\u306a\u3044\u3002\nhttp://tammersaleh.com/posts/installing-postgresql-for-rails-3-1-on-lion\nruby 1.9.3-p327\u304c\u306a\u3044\u3068\u6012\u3089\u308c\u305f\u306e\u3067\u3001\u672c\u756a\u74b0\u5883\u3067\n$ rbenv install 1.9.3-p327\n$ rbenv rehash\n$ rbenv global 1.9.3-p327\n$ gem install bundler\n$ rbenv global 2.0.0-p0\n\n\u3068\u3057\u305f\u3002\n\nNokogiri\nlibxml2 is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html\u3068\u8a00\u308f\u308c\u3066gem Nokogiri \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u304b\u3063\u305f\u3002\nhttp://stackoverflow.com/questions/6277456/nokogiri-installation-fails-libxml2-is-missing\n\u3092\u53c2\u8003\u306b\u3001\nsudo apt-get install libxslt1-dev libxml2-dev\n\n\u3068\u3057\u305f\u3002\n\nPG\ngem pg\u306e\u305f\u3081\u306b\u3001\nsudo apt-get install libpq-dev\n\n\u3082\u3057\u305f\u3002\u3061\u306a\u307f\u306b\u3001\nhttps://wiki.postgresql.org/wiki/Apt\n\u3092\u898b\u3066\u306d\uff01\u3000\u3068\u8a00\u308f\u308c\u308b\u3051\u308c\u3069\u6c17\u306b\u3057\u306a\u3044\u3002\n\nRmagick\nrmagick\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3057\u305f\u3089ERROR: Failed to build gem native extension\u3068\u8a00\u308f\u308c\u305f\u3002\nhttp://stackoverflow.com/questions/3894225/imagemagick-rmagick-cant-install-rmagick-2-13-1-cant-find-magick-config\n\u3092\u53c2\u8003\u306b\u3057\u3066\u3001libmagickwand-dev\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n#rmagick\u306e\u305f\u3081\nsudo apt-get install libmagickwand-dev\n\n\nSQLite3\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\nPlease install the sqlite3 adapter: gem install activerecord-sqlite3-adapter` (sqlite3 is not part of the bundle. Add it to Gemfile.) (LoadError)\n\n\u3068\u8a00\u308f\u308c\u305f\u3002\nhttp://pgnote.net/?p=2425\n\u3088\u308a\u3001\ndatabase.yml\u306b\u66f8\u304d\u6b8b\u3057\u3066\u3044\u305fsqlite\u90e8\u5206\u3092\u524a\u9664\u3002\n\n\u30ec\u30dd\u30b8\u30c8\u30ea\u9593\u9055\u3048\u305f\n\u30c7\u30d7\u30ed\u30a4\u7528\u306estoryblog_production\u3067\u306f\u306a\u304f\u3001\u9593\u9055\u3048\u3066storyblog\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u305f\u3053\u3068\u306b\u6c17\u3065\u304f\u3002\n\nconfig/deploy.rb\nset :repository, \"git@github.com:katryo/#{application}.git\"\n\n\n\u3092\n\nconfig/deploy.rb\nset :repository, \"git@github.com:katryo/#{application}_production.git\"\n\n\n\u306b\u5909\u66f4\u3002deploy:cold\u3057\u305f\u3089\u3001\nfatal: Could not parse object\n\u3068\u8a00\u308f\u308c\u305f\u3002\nhttp://www.willpink.co.uk/post/1074709512/fatal-could-not-parse-object-github-capistrano\n\u306e\u3068\u304a\u308a\u3001\nset :deploy_via, :remote_cache\n\n\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\n#set :deploy_via, :remote_cache\n\n\u3068\u3057\u3066\u3082\u3088\u3044\u304c\u3001remote_cache\u3067\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u306a\u3044\u72b6\u6cc1\u306a\u306e\u3067\u3001\n$ mv /app/storyblog/shared/cache-copy cache-copy_backup\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u3001cache-copy\u306e\u540d\u524d\u3092\u5909\u3048\u3066\u3001\u3044\u3063\u305f\u3093\u30c7\u30d7\u30ed\u30a4\u3002\ncache-copy\u304c\u65b0\u305f\u306b\u751f\u6210\u3055\u308c\u308b\u3002\u554f\u984c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u305f\u3089cache-copy_backup\u3092\u6d88\u3059\u3002\n\ntherubyracer\nlibv8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3084\u305f\u3089\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u8abf\u3079\u305f\u3002\nhttp://d.hatena.ne.jp/suu-g/20121222/1356189597 \u3088\u308a\u3001\u3069\u3046\u3084\u3089\u539f\u56e0\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u65b9\u6cd5\u306e\u5909\u5316\u3089\u3057\u3044\u3002\ngem 'therubyracer', '0.11.1'\ngem 'libv8', '~> 3.11.8.13'\n\n\u3068\u3057\u305f\u3089\u901f\u3084\u304b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\nJquery-file-upload\nhttp://railscasts.com/episodes/381-jquery-file-upload/\n\u306e\u901a\u308a\u306b\u4f5c\u3063\u3066\u3044\u305fjQuery File Upload\u3067\u306e\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u304c\u52d5\u304b\u306a\u304f\u306a\u3063\u3066\u3044\u305f\u3002\njQuery1.9.1\u3067\u306f\u30d0\u30b0\u304c\u3042\u308b\u3089\u3057\u3044\u3002\nhttps://github.com/blueimp/JavaScript-Templates/issues/19\n\u306e\u3067\u3001jQuery-rails\u30922.4.1\u306b\u3059\u308b\u3002\nRails3.2.13\u3067\u306e\u5909\u66f4\u306b\u3088\u308b\u30d0\u30b0\u3002\nRailscasts\u306e\u30b3\u30e1\u30f3\u30c8\u304b\u3089\u8fbf\u3063\u3066\u3001\nhttp://railscasts.com/episodes/381-jquery-file-upload?view=comments\n\u305f\u3069\u308a\u3064\u3044\u305fStackoverflow\u3002\nhttp://stackoverflow.com/questions/12806230/multiple-file-upload-using-carrierwave-and-jquery-file-upload/15674967#15674967\n\u306e\u3088\u3046\u306b\u3001paramName\u3092\u6307\u5b9a\u3057\u305f\u3002\n\n\u74b0\u5883\u5909\u6570\nasset_sync\u3092\u4f7f\u3063\u3066\u3044\u305f\u306e\u3067\u3001Amazon S3\u306a\u3069\u306e\u5916\u90e8\u30a2\u30d7\u30ea\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u4ed6\u3092\u30b5\u30fc\u30d0\u306b\u4f1d\u3048\u306d\u3070\u306a\u3089\u306a\u3044\u3002\n\u958b\u767a\u74b0\u5883\u3067\u306f.powenv\u306b\u74b0\u5883\u5909\u6570\u3092\u66f8\u304d\u8fbc\u3093\u3067\u3044\u305f\u306e\u3060\u3051\u3069\u3001\u672c\u756a\u74b0\u5883\u306b\u9001\u308b\u306b\u306f\uff1f\n\n\u958b\u767a\u74b0\u5883\u3067\u306f\n\u307e\u305a\u306fRailscasts\u306e\u6559\u3048\u901a\u308a\u3001application.yml\u3092\u4f5c\u3063\u305f\u3002\nhttp://railscasts.com/episodes/85-yaml-configuration-revised?view=asciicast \n\u958b\u767a\u74b0\u5883\u3067/config/application.yml\u3092\u8aad\u307f\u8fbc\u3080\u306e\u306f\u3001/config/environment/development.rb\u306b\u62c5\u5f53\u3055\u305b\u308b\u3002\n\n/config/environment/development.rb\nENV.update YAML.load(File.read(File.expand_path('../application.yml', __FILE__))) if File.exist?(File.expand_path('../application.yml', __FILE__))\n\n\n\u306e\u884c\u3092\u8ffd\u52a0\u3002\n\n\u672c\u756a\u74b0\u5883\u3067\u306f\ncapistrano\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u6642\u306b\u3082application.yml\u306e\u74b0\u5883\u5909\u6570\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u30b5\u30fc\u30d0\u304c\u52d5\u304f\u3068\u304d\u306b\u3082\u74b0\u5883\u5909\u6570\u3092\u4f7f\u3063\u3066\u304f\u308c\u308b\u3088\u3046\u306bCapistrano\u3092\u8a2d\u5b9a\u3059\u308b\u3002\nhttp://qiita.com/items/7889e0835dfbcc946e57\n\u3092\u53c2\u8003\u306b\u3001\n\n/config/deploy.rb\nENV.update YAML.load(File.read(File.expand_path('../application.yml', __FILE__)))\n\nset :default_environment, {\n  \"AWS_ACCESS_KEY_ID\" => ENV[\"AWS_ACCESS_KEY_ID\"],\n  \"AWS_SECRET_ACCESS_KEY\" => ENV[\"AWS_SECRET_ACCESS_KEY\"],\n  \"GMAIL_USERNAME_DENKINOVEL\" => ENV[\"GMAIL_USERNAME_DENKINOVEL\"],\n    \"GMAIL_USERNAME_KATRYO\" => ENV[\"GMAIL_USERNAME_KATRYO\"],\n    \"GMAIL_PASSWORD_DENKINOVEL\" => ENV[\"GMAIL_USERNAME_DENKINOVEL\"],\n    \"GMAIL_APPLICATION_SPECIFIC_PASSWORD_DENKINOVEL\" => ENV[\"GMAIL_APPLICATION_SPECIFIC_PASSWORD_DENKINOVEL\"],\n    :FOG_DIRECTORY => ENV[\"FOG_DIRECTORY\"],\n    :FOG_PROVIDER => ENV[\"FOG_PROVIDER\"],\n    :FOG_REGION => ENV[\"FOG_REGION\"]\n}\n\n\n\u3092deploy.rb\u306e\u6700\u521d\u306b\u8ffd\u52a0\u3002\n\nCapistrano\u306e\u8a2d\u5b9a\u3067port\u5909\u66f4\nCapistrano\u306e\u8a2d\u5b9a\u3067SSH\u63a5\u7d9a\u3059\u308b\u30dd\u30fc\u30c8\u3092\u5909\u3048\u3089\u308c\u307e\u3059\u3002\nhttp://d.hatena.ne.jp/tsuyosix/20100514/1273853622\n\u3092\u53c2\u8003\u306b\u3001\n\ndeploy.rb\nset :port, 10022\n\n\n\u3068\u3057\u305f\u3089\u3001\u63a5\u7d9a\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n$ cap deploy:setup\n\n\u304c\u52d5\u304d\u307e\u3057\u305f\u3002\n\nDB\u79fb\u884c\n\u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u5074\u3067\u3082taps\u304c\u5fc5\u8981\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\u305f\u3060\u3057\u3001taps\u306b\u306fpg\u3068sqlite3\u304c\u5fc5\u8981\u3002\u305d\u3057\u3066sqlite3\u306b\u306flibsqlite3-dev\u304c\u5fc5\u8981\u3002\u9806\u756a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ sudo apt-get install libsqlite3-dev\n$ gem install pg\n$ gem install sqlite3\n$ gem install taps\n\n\u7a3c\u50cd\u4e2d\u306eHeroku\u30b5\u30fc\u30d0\u3092\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u306b\u3059\u308b\u3002\nheroku maintenance:on\n\nHeroku\u304b\u3089\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u53d6\u3063\u3066\u304f\u308b\u3002\n$ heroku db:pull sqlite://dump.sqlite3 --app storyblog\n\n10000\u30ec\u30b3\u30fc\u30c9\u30672\u6642\u9593\u8fd1\u304f\u304b\u304b\u3063\u305f\u3002\n\u958b\u767a\u5074\u306bdump.sqlite3\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u305f\u3089\u3001\u672c\u756a\u74b0\u5883\u3067taps\u306esinatra\u30b5\u30fc\u30d0\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3002\n# \u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u5074\n$ taps server postgres://storyblog:password@localhost/storyblog_production katryo secret\n\n\u305d\u306e\u30b5\u30fc\u30d0\u306b\u5411\u304b\u3063\u3066\u3001\u958b\u767a\u74b0\u5883\u5074\u3067taps push\u3059\u308b\u3002\n# \u958b\u767a\u5074\n$ taps push sqlite://dump.sqlite3 http://katryo:secret@1xx.xxx.xxx.xx:5000\n\n\nDNS\u8a2d\u5b9a\n\u304a\u540d\u524d.com\u3067\u53d6\u3063\u3066\u305f\u3002\n\u3053\u306e\u3078\u3093\u898b\u306a\u304c\u3089\u8a2d\u5b9a\u3059\u308b\u3002\nhttp://akabeko.me/blog/2012/04/revps-06-domain-dns/\nhttp://nomnel.net/blog/set-domain-name/\nhttp://support.sakura.ad.jp/manual/vps/domain/rdns_record.html\n5\u5206\u304f\u3089\u3044\u3067\u3001\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u304b\u3089\u7e4b\u304c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\nException_notification\n\u672c\u756a\u74b0\u5883\u3067\u30b5\u30fc\u30d0\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3082\u30e1\u30fc\u30eb\u3067\u901a\u77e5\u3055\u308c\u306a\u3044\u3002\u304a\u304b\u3057\u3044\u306a\u30fc\u3068\u601d\u3063\u3066\u3044\u305f\u304c\u3001\nhttp://sakura.cb-faq.com/faq/public/app/servlet/qadoc?QID=001401-3\n\u304a\u8a66\u3057\u671f\u9593\u4e2d\u306fport 25\u304c\u958b\u304b\u306a\u3044\u306e\u304c\u539f\u56e0\u307f\u305f\u3044\u3002\n\n\u57fa\u672c\u7684\u306bRailscasts\u306e#335 Deploying to a VPS\u306e\u901a\u308a\u306b\u4f5c\u696d\u3057\u307e\u3057\u305f\u3002\nhttp://railscasts.com/episodes/335-deploying-to-a-vps?view=asciicast\nRailscasts pro\u306b\u5165\u3089\u306a\u3044\u3068\u898b\u3089\u308c\u306a\u3044\u3067\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001\u4e0a\u8a18\u306e\u30da\u30fc\u30b8\u306e\u88dc\u8db3\u3001Railscasts\u306e\u307e\u307e\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u70b9\u3092\u66f8\u304d\u307e\u3059\u3002\u306a\u306e\u3067\u3001Railscasts#335\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u306f\u66f8\u304d\u307e\u305b\u3093\u3002Railscasts pro\u306b\u5165\u3063\u3066\u3001\u307e\u305a\u306f http://railscasts.com/episodes/335-deploying-to-a-vps?view=asciicast \u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u672c\u756a\u74b0\u5883\u306e\u8a2d\u5b9a\n\n\u3055\u304f\u3089VPS\u306e\u89e3\u8aac\u306f\u3053\u3061\u3089\u3067\u3002\nhttp://dotinstall.com/lessons/basic_sakura_vps\n\\#1\u301c#10\u307e\u3067\u898b\u305f\u3089\u5927\u4e08\u592b\u3002#11\u4ee5\u964d\u306f\u898b\u306a\u304f\u3066\u3088\u3044\u3067\u3059\u3002\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308bApache\u3067\u306f\u306a\u304f\u3001Web\u30b5\u30fc\u30d0\u306bnginx\u3092\u4f7f\u3046\u306e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n## Ubuntu\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u3055\u304f\u3089\u306eVPS\u516c\u5f0f\u30ac\u30a4\u30c9\u3092\u898b\u306a\u304c\u3089\u307e\u305a\u306fUbuntu 12.04\u3092\u30ab\u30b9\u30bf\u30e0\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nhttp://support.sakura.ad.jp/manual/vps/mainte/custom_ubuntu1204.html\n\n\u30ad\u30fc\u30dc\u30fc\u30c9\u30ec\u30a4\u30a2\u30a6\u30c8\u3092Japanese\u306b\u3057\u305f\u3068\u3053\u308d\u3001\u554f\u984c\u304c\u767a\u751f\u3002\n\n\u306a\u305c\u304b\u65e5\u672c\u8a9e\u5165\u529b\u3067\u3001Alt + Ctrl\u3092\u62bc\u3057\u3066\u3082\u76f4\u63a5\u5165\u529b\u306b\u623b\u305b\u306a\u3044\u3002\n\u3057\u304b\u305f\u304c\u306a\u3044\u306e\u3067\u3001Configure the keyboard\u3067English(US)\u3092\u9078\u629e\u3057\u3066\u76f4\u3057\u305f\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u969b\u306b\u3001root\u3067\u306f\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u306ekatryo\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u4ee5\u5f8c\u3001\u57fa\u672c\u7684\u306b\u3053\u306e\u65b0\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u4f5c\u696d\u3057\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u306a\u306b\u306f\u3068\u3082\u3042\u308c\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3002\n\n\n## sshd\u306e\u8a2d\u5b9a\nhttp://blog.livedoor.jp/oceanweb/archives/18082178.html\n\u3053\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3001\u307e\u305a\u306fsshd\u3092\u8a2d\u5b9a\u3002\u63a5\u7d9a\u30dd\u30fc\u30c8\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n/etc/ssh/sshd_config\u3092\u63a2\u3057\u3066\u3001\n\n```/etc/ssh/sshd_config \n#Port 22\n```\n\n\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\n\n```/etc/ssh/sshd_config \nPort 10022 #1024\u304b\u308965535\u307e\u3067\u306e\u4efb\u610f\u306e\u6574\u6570\n```\n\n\u306b\u5909\u3048\u307e\u3059\u3002\u305d\u3057\u3066Root\u30ed\u30b0\u30a4\u30f3\u3092\u5236\u9650\u3059\u308b\u305f\u3081\n\n```/etc/ssh/sshd_config \nPermitRootLogin no\n```\n\n\u306b\u3057\u307e\u3059\u3002\u521d\u671f\u8a2d\u5b9a\u3067\u3053\u3046\u306a\u3063\u3066\u308b\u304b\u3082\u3067\u3059\u3002\n\n## RSA\u516c\u958b\u9375\u3092\u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u306b\u9001\u4fe1\n\n\u3055\u304f\u3089VPS\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u304b\u305b\u308b\u74b0\u5883\u3068\u3057\u3066\u30ea\u30e2\u30fc\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u4e0a\u90e8\u306b\u306f\u3001\u9577\u3044\u6587\u5b57\u5217\u3092\u5165\u529b\u3067\u304d\u308b\u30b3\u30d4\u30da\u30dc\u30bf\u30f3\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u306b\u306f\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3092\u53d7\u3051\u6e21\u305b\u306a\u3044\u306e\u3067\u3001\u30b3\u30d4\u30da\u30dc\u30bf\u30f3\u306f\u975e\u5e38\u306b\u3042\u308a\u304c\u305f\u3044\u3002\n\n\u306f\u305a\u306a\u306e\u3067\u3059\u304c\u3001\u30b3\u30d4\u30da\u4ee5\u524d\u306b\u307e\u3068\u3082\u306b\u53cd\u5fdc\u3057\u307e\u305b\u3093\u3002\u306a\u306e\u3067\u3001\u958b\u767a\u74b0\u5883\u5074\u304b\u3089scp\u3067rsa.pub\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f\u3002\n\n```\n# \u958b\u767a\u74b0\u5883\u304b\u3089\n$ scp ~/.ssh/id_rsa.pub katryo@1xx.xxx.xxx.xx:~/.ssh/authorized_keys\n```\n\n\u672c\u756a\u74b0\u5883\u3067\u3001chmod\u3067authorized_keys\u3078\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092600\u306b\u5909\u3048\u307e\u3059\u3002\n\n```\n$ chmod 600 authorized_keys\n```\n\n##\u65e5\u672c\u8a9elocale\u3092\u4f5c\u308b\n\n\u3053\u3053\u3092\u53c2\u8003\u306b\u3002\nhttp://www.compnet.jp/index.php/archives/2571\n\n```\n$ sudo locale-gen ja_JP.UTF-8\n$ sudo update-locale LANG=ja_JP.UTF-8\n```\n\n\n## \u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\n\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nCentOS\u3060\u3068/etc/sysconfig/iptables\u3092\u7de8\u96c6\u3059\u308b\u3093\u3067\u3059\u304c\u3001Ubuntu\u306b\u306fufw\u3068\u3044\u3046\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u304c\u6700\u521d\u304b\u3089\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\nhttp://d.hatena.ne.jp/babie/20110220/1298181572\nhttp://gihyo.jp/admin/serial/01/ubuntu-recipe/0076\nhttp://linuxsalad.blogspot.jp/2009/02/ufw.html\n\u3042\u305f\u308a\u3092\u53c2\u8003\u306b\u3057\u3066\u3001\n\n```\n$ sudo ufw default deny\n$ sudo ufw allow 3000 #Rails\u3067\u4f7f\u3046\n$ sudo ufw allow 5000 #Sinatra\u3067\u4f7f\u3046\n$ sudo ufw allow 100022 #port22\u304b\u3089ssh\u3067\u4f7f\u3046port\u3092\u5909\u66f4\u3057\u305f\n$ sudo ufw enable\n$ sudo ufw status\n```\n\n\u306e\u3088\u3046\u306b\u3057\u3066\u30013000\u30685000\u306810022\u30dd\u30fc\u30c8\u3092\u958b\u3051\u307e\u3057\u305f\u3002\n\n\n## add-apt-repository\u304c\u306a\u3044\n\n\u521d\u671f\u72b6\u614b\u3067\u306fadd-apt-repository\u304c\u4f7f\u3048\u307e\u305b\u3093\u3002\nhttp://stackoverflow.com/questions/13018626/add-apt-repository-not-found\n\u306b\u66f8\u3044\u3066\u3042\u308b\u3088\u3046\u306b\u3001\n\n```\n$ sudo apt-get install software-properties-common\n```\n\n\u3067software-properties-common\u3092\u5165\u308c\u308c\u3070\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n## bind() to 0.0.0.0:80 failed (98: Address already in use)\n\nnginx\u3092\u8d77\u52d5\u3059\u308b\u3068\u3001\n\n```\nnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)\nnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)\nnginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)\nnginx: [emerg] still could not bind()\n\n```\n\n\u3068\u8a00\u308f\u308c\u307e\u3057\u305f\u3002\n\nStarkoverflow\u3088\u308a\nhttp://stackoverflow.com/questions/14969134/setting-up-linode-ubuntu-10-04-32bit-nginx-not-starting-98-address-already-i\n\u3053\u306e\u56de\u7b54\u3069\u304a\u308a\u3001/etc/nginx/sites-enabled/default \u3092\u4fee\u6b63\u3057\u3066\n\n```/etc/nginx/sites-enabled/default\nlisten   80; ## listen for ipv4\nlisten   [::]:80 default ipv6only=on; ## listen for ipv6\n```\n\n\u3068\u3057\u305f\u3089\u3001nginx\u304c\u52d5\u304d\u307e\u3057\u305f\u3002\n\n\n\n## postgres\u304c\u3046\u307e\u304f\u52d5\u304b\u306a\u3044\u3002\nhttp://tammersaleh.com/posts/installing-postgresql-for-rails-3-1-on-lion\n\nruby 1.9.3-p327\u304c\u306a\u3044\u3068\u6012\u3089\u308c\u305f\u306e\u3067\u3001\u672c\u756a\u74b0\u5883\u3067\n\n```\n$ rbenv install 1.9.3-p327\n$ rbenv rehash\n$ rbenv global 1.9.3-p327\n$ gem install bundler\n$ rbenv global 2.0.0-p0\n```\n\n\u3068\u3057\u305f\u3002\n\n\n## Nokogiri\n\nlibxml2 is missing.  please visit <http://nokogiri.org/tutorials/installing_nokogiri.html>\u3068\u8a00\u308f\u308c\u3066gem Nokogiri \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u304b\u3063\u305f\u3002\nhttp://stackoverflow.com/questions/6277456/nokogiri-installation-fails-libxml2-is-missing\n\u3092\u53c2\u8003\u306b\u3001\n\n```\nsudo apt-get install libxslt1-dev libxml2-dev\n```\n\n\u3068\u3057\u305f\u3002\n\n## PG\n\ngem pg\u306e\u305f\u3081\u306b\u3001\n\n```\nsudo apt-get install libpq-dev\n```\n\n\u3082\u3057\u305f\u3002\u3061\u306a\u307f\u306b\u3001\nhttps://wiki.postgresql.org/wiki/Apt\n\u3092\u898b\u3066\u306d\uff01\u3000\u3068\u8a00\u308f\u308c\u308b\u3051\u308c\u3069\u6c17\u306b\u3057\u306a\u3044\u3002\n\n\n## Rmagick\nrmagick\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3057\u305f\u3089ERROR: Failed to build gem native extension\u3068\u8a00\u308f\u308c\u305f\u3002\nhttp://stackoverflow.com/questions/3894225/imagemagick-rmagick-cant-install-rmagick-2-13-1-cant-find-magick-config\n\u3092\u53c2\u8003\u306b\u3057\u3066\u3001libmagickwand-dev\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\n#rmagick\u306e\u305f\u3081\nsudo apt-get install libmagickwand-dev\n```\n\n\n\n### SQLite3\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\n\n```\nPlease install the sqlite3 adapter: gem install activerecord-sqlite3-adapter` (sqlite3 is not part of the bundle. Add it to Gemfile.) (LoadError)\n```\n\n\u3068\u8a00\u308f\u308c\u305f\u3002\nhttp://pgnote.net/?p=2425\n\u3088\u308a\u3001\ndatabase.yml\u306b\u66f8\u304d\u6b8b\u3057\u3066\u3044\u305fsqlite\u90e8\u5206\u3092\u524a\u9664\u3002\n\n\n### \u30ec\u30dd\u30b8\u30c8\u30ea\u9593\u9055\u3048\u305f\n\u30c7\u30d7\u30ed\u30a4\u7528\u306estoryblog_production\u3067\u306f\u306a\u304f\u3001\u9593\u9055\u3048\u3066storyblog\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u305f\u3053\u3068\u306b\u6c17\u3065\u304f\u3002\n\n```config/deploy.rb\nset :repository, \"git@github.com:katryo/#{application}.git\"\n```\n\u3092\n\n```config/deploy.rb\nset :repository, \"git@github.com:katryo/#{application}_production.git\"\n```\n\n\u306b\u5909\u66f4\u3002deploy:cold\u3057\u305f\u3089\u3001\n\nfatal: Could not parse object\n\u3068\u8a00\u308f\u308c\u305f\u3002\n\nhttp://www.willpink.co.uk/post/1074709512/fatal-could-not-parse-object-github-capistrano\n\n\u306e\u3068\u304a\u308a\u3001\n\n```\nset :deploy_via, :remote_cache\n```\n\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\n\n```\n#set :deploy_via, :remote_cache\n```\n\n\u3068\u3057\u3066\u3082\u3088\u3044\u304c\u3001remote_cache\u3067\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u306a\u3044\u72b6\u6cc1\u306a\u306e\u3067\u3001\n\n```\n$ mv /app/storyblog/shared/cache-copy cache-copy_backup\n```\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u3001cache-copy\u306e\u540d\u524d\u3092\u5909\u3048\u3066\u3001\u3044\u3063\u305f\u3093\u30c7\u30d7\u30ed\u30a4\u3002\ncache-copy\u304c\u65b0\u305f\u306b\u751f\u6210\u3055\u308c\u308b\u3002\u554f\u984c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u305f\u3089cache-copy_backup\u3092\u6d88\u3059\u3002\n\n### therubyracer\nlibv8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3084\u305f\u3089\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u8abf\u3079\u305f\u3002\nhttp://d.hatena.ne.jp/suu-g/20121222/1356189597 \u3088\u308a\u3001\u3069\u3046\u3084\u3089\u539f\u56e0\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u65b9\u6cd5\u306e\u5909\u5316\u3089\u3057\u3044\u3002\n\n```Gemfile\ngem 'therubyracer', '0.11.1'\ngem 'libv8', '~> 3.11.8.13'\n```\n\n\u3068\u3057\u305f\u3089\u901f\u3084\u304b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n## Jquery-file-upload\n\nhttp://railscasts.com/episodes/381-jquery-file-upload/\n\u306e\u901a\u308a\u306b\u4f5c\u3063\u3066\u3044\u305fjQuery File Upload\u3067\u306e\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u304c\u52d5\u304b\u306a\u304f\u306a\u3063\u3066\u3044\u305f\u3002\n\njQuery1.9.1\u3067\u306f\u30d0\u30b0\u304c\u3042\u308b\u3089\u3057\u3044\u3002\nhttps://github.com/blueimp/JavaScript-Templates/issues/19\n\u306e\u3067\u3001jQuery-rails\u30922.4.1\u306b\u3059\u308b\u3002\n\n## \n\nRails3.2.13\u3067\u306e\u5909\u66f4\u306b\u3088\u308b\u30d0\u30b0\u3002\nRailscasts\u306e\u30b3\u30e1\u30f3\u30c8\u304b\u3089\u8fbf\u3063\u3066\u3001\nhttp://railscasts.com/episodes/381-jquery-file-upload?view=comments\n\u305f\u3069\u308a\u3064\u3044\u305fStackoverflow\u3002\n http://stackoverflow.com/questions/12806230/multiple-file-upload-using-carrierwave-and-jquery-file-upload/15674967#15674967\n\u306e\u3088\u3046\u306b\u3001paramName\u3092\u6307\u5b9a\u3057\u305f\u3002\n\n\n## \u74b0\u5883\u5909\u6570\nasset_sync\u3092\u4f7f\u3063\u3066\u3044\u305f\u306e\u3067\u3001Amazon S3\u306a\u3069\u306e\u5916\u90e8\u30a2\u30d7\u30ea\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u4ed6\u3092\u30b5\u30fc\u30d0\u306b\u4f1d\u3048\u306d\u3070\u306a\u3089\u306a\u3044\u3002\n\n\u958b\u767a\u74b0\u5883\u3067\u306f.powenv\u306b\u74b0\u5883\u5909\u6570\u3092\u66f8\u304d\u8fbc\u3093\u3067\u3044\u305f\u306e\u3060\u3051\u3069\u3001\u672c\u756a\u74b0\u5883\u306b\u9001\u308b\u306b\u306f\uff1f\n\n### \u958b\u767a\u74b0\u5883\u3067\u306f\n\u307e\u305a\u306fRailscasts\u306e\u6559\u3048\u901a\u308a\u3001application.yml\u3092\u4f5c\u3063\u305f\u3002\n\nhttp://railscasts.com/episodes/85-yaml-configuration-revised?view=asciicast \n\n\u958b\u767a\u74b0\u5883\u3067/config/application.yml\u3092\u8aad\u307f\u8fbc\u3080\u306e\u306f\u3001/config/environment/development.rb\u306b\u62c5\u5f53\u3055\u305b\u308b\u3002\n\n```/config/environment/development.rb\nENV.update YAML.load(File.read(File.expand_path('../application.yml', __FILE__))) if File.exist?(File.expand_path('../application.yml', __FILE__))\n```\n\n\u306e\u884c\u3092\u8ffd\u52a0\u3002\n\n### \u672c\u756a\u74b0\u5883\u3067\u306f\n\ncapistrano\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u6642\u306b\u3082application.yml\u306e\u74b0\u5883\u5909\u6570\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3001\u30b5\u30fc\u30d0\u304c\u52d5\u304f\u3068\u304d\u306b\u3082\u74b0\u5883\u5909\u6570\u3092\u4f7f\u3063\u3066\u304f\u308c\u308b\u3088\u3046\u306bCapistrano\u3092\u8a2d\u5b9a\u3059\u308b\u3002\nhttp://qiita.com/items/7889e0835dfbcc946e57\n\u3092\u53c2\u8003\u306b\u3001\n\n```/config/deploy.rb\nENV.update YAML.load(File.read(File.expand_path('../application.yml', __FILE__)))\n\nset :default_environment, {\n  \"AWS_ACCESS_KEY_ID\" => ENV[\"AWS_ACCESS_KEY_ID\"],\n  \"AWS_SECRET_ACCESS_KEY\" => ENV[\"AWS_SECRET_ACCESS_KEY\"],\n  \"GMAIL_USERNAME_DENKINOVEL\" => ENV[\"GMAIL_USERNAME_DENKINOVEL\"],\n    \"GMAIL_USERNAME_KATRYO\" => ENV[\"GMAIL_USERNAME_KATRYO\"],\n    \"GMAIL_PASSWORD_DENKINOVEL\" => ENV[\"GMAIL_USERNAME_DENKINOVEL\"],\n    \"GMAIL_APPLICATION_SPECIFIC_PASSWORD_DENKINOVEL\" => ENV[\"GMAIL_APPLICATION_SPECIFIC_PASSWORD_DENKINOVEL\"],\n    :FOG_DIRECTORY => ENV[\"FOG_DIRECTORY\"],\n    :FOG_PROVIDER => ENV[\"FOG_PROVIDER\"],\n    :FOG_REGION => ENV[\"FOG_REGION\"]\n}\n```\n\n\u3092deploy.rb\u306e\u6700\u521d\u306b\u8ffd\u52a0\u3002\n\n\n\n\n\n### Capistrano\u306e\u8a2d\u5b9a\u3067port\u5909\u66f4\nCapistrano\u306e\u8a2d\u5b9a\u3067SSH\u63a5\u7d9a\u3059\u308b\u30dd\u30fc\u30c8\u3092\u5909\u3048\u3089\u308c\u307e\u3059\u3002\nhttp://d.hatena.ne.jp/tsuyosix/20100514/1273853622\n\u3092\u53c2\u8003\u306b\u3001\n\n```rb:deploy.rb\nset :port, 10022\n```\n\n\u3068\u3057\u305f\u3089\u3001\u63a5\u7d9a\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n```\n$ cap deploy:setup\n```\n\n\u304c\u52d5\u304d\u307e\u3057\u305f\u3002\n\n## DB\u79fb\u884c\n\n\u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u5074\u3067\u3082taps\u304c\u5fc5\u8981\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\u305f\u3060\u3057\u3001taps\u306b\u306fpg\u3068sqlite3\u304c\u5fc5\u8981\u3002\u305d\u3057\u3066sqlite3\u306b\u306flibsqlite3-dev\u304c\u5fc5\u8981\u3002\u9806\u756a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```\n$ sudo apt-get install libsqlite3-dev\n$ gem install pg\n$ gem install sqlite3\n$ gem install taps\n```\n\n\u7a3c\u50cd\u4e2d\u306eHeroku\u30b5\u30fc\u30d0\u3092\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u306b\u3059\u308b\u3002\n\n```\nheroku maintenance:on\n```\n\nHeroku\u304b\u3089\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u53d6\u3063\u3066\u304f\u308b\u3002\n\n```\n$ heroku db:pull sqlite://dump.sqlite3 --app storyblog\n```\n\n10000\u30ec\u30b3\u30fc\u30c9\u30672\u6642\u9593\u8fd1\u304f\u304b\u304b\u3063\u305f\u3002\n\n\u958b\u767a\u5074\u306bdump.sqlite3\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u305f\u3089\u3001\u672c\u756a\u74b0\u5883\u3067taps\u306esinatra\u30b5\u30fc\u30d0\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3002\n\n```\n# \u672c\u756a\u74b0\u5883\u30b5\u30fc\u30d0\u5074\n$ taps server postgres://storyblog:password@localhost/storyblog_production katryo secret\n```\n\n\u305d\u306e\u30b5\u30fc\u30d0\u306b\u5411\u304b\u3063\u3066\u3001\u958b\u767a\u74b0\u5883\u5074\u3067taps push\u3059\u308b\u3002\n\n```\n# \u958b\u767a\u5074\n$ taps push sqlite://dump.sqlite3 http://katryo:secret@1xx.xxx.xxx.xx:5000\n```\n\n\n\n## DNS\u8a2d\u5b9a\n\n\u304a\u540d\u524d.com\u3067\u53d6\u3063\u3066\u305f\u3002\n\u3053\u306e\u3078\u3093\u898b\u306a\u304c\u3089\u8a2d\u5b9a\u3059\u308b\u3002\n\nhttp://akabeko.me/blog/2012/04/revps-06-domain-dns/\nhttp://nomnel.net/blog/set-domain-name/\nhttp://support.sakura.ad.jp/manual/vps/domain/rdns_record.html\n\n5\u5206\u304f\u3089\u3044\u3067\u3001\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u304b\u3089\u7e4b\u304c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n## Exception_notification\n\n\u672c\u756a\u74b0\u5883\u3067\u30b5\u30fc\u30d0\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3082\u30e1\u30fc\u30eb\u3067\u901a\u77e5\u3055\u308c\u306a\u3044\u3002\u304a\u304b\u3057\u3044\u306a\u30fc\u3068\u601d\u3063\u3066\u3044\u305f\u304c\u3001\nhttp://sakura.cb-faq.com/faq/public/app/servlet/qadoc?QID=001401-3\n\u304a\u8a66\u3057\u671f\u9593\u4e2d\u306fport 25\u304c\u958b\u304b\u306a\u3044\u306e\u304c\u539f\u56e0\u307f\u305f\u3044\u3002\n\n", "tags": ["vps", "Ubuntu", "Heroku", "Rails", "capistrano"]}