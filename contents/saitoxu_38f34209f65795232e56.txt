{"tags": ["Swift", "Xcode", "iOS", "GoogleDrive"], "context": " More than 1 year has passed since last update.\u6700\u8fd1\u3001iOS\u30a2\u30d7\u30ea\u3067Google Drive\u306e\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u305f\u304f\u3066\u8272\u3005\u3068\u8abf\u3079\u3066\u307e\u3057\u305f\u3002\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u3001Google\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u3066REST API\u3092\u53e9\u304f\u307e\u3067\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u305f\u306e\u3067\u3001\n\u4f3c\u305f\u3088\u3046\u306a\u3053\u3068\u3092\u3057\u305f\u3044\u65b9\u304c\u3044\u305f\u3089\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u74b0\u5883\n\nSwift 2.1.1\nXcode 7.2\nCocoaPods 0.39.0\n\n\n1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\u307e\u305a\u306fXcode\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u65b0\u898f\u306b\u4f5c\u6210\u3057\u3001CocoaPods\u3067\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nPodfile\nplatform :ios, '8.0'\n\nuse_frameworks!\n\npod 'Google/SignIn' # Google\u30a2\u30ab\u30a6\u30f3\u30c8\u8a8d\u8a3c\npod 'Alamofire'     # HTTP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\npod 'SwiftyJSON'    # JSON\u30d1\u30fc\u30b5\n\ntarget 'TestGoogle' do\n\nend\n\n\n\n2. Google Developers Console\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\u3053\u306e\u30da\u30fc\u30b8\u306eGET A CONFIGURATION FILE\u3068\u3044\u3046\u30ea\u30f3\u30af\u304b\u3089Google\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u540d\u3001Bundle ID\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u30a2\u30d7\u30ea\u540d\u306f\u9069\u5f53\u3001Bundle ID\u306f\u5148\u307b\u3069\u4f5c\u3063\u305fXcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u305d\u308c\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nGoogle Sign-In\u3092\u6709\u52b9\u306b\u3057\u3066Generate configuration files\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nGoogleService-info.plist\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u5f8c\u3067\u4f7f\u3044\u307e\u3059\u3002\n\n\n3. Drive API\u3092\u6709\u52b9\u306b\u3059\u308b\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fGoogle\u30a2\u30d7\u30ea\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u3053\u3053\u304b\u3089\u9078\u629e\u3057\u3001Drive API\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\n\n\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u300cGoogle API\u3092\u5229\u7528\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nDrive API\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cAPI\u3092\u6709\u52b9\u306b\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\n\n4. iOS\u30a2\u30d7\u30ea\u306bGoogle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u60c5\u5831\u3092\u7d44\u307f\u8fbc\u3080\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u524d\u306e\u6700\u5f8c\u306e\u4e0b\u6e96\u5099\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fGoogleService-Info.plist\u3092Xcode\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c8\u30c3\u30d7\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\n\nInfo > URL Types\u306bGoogleService-Info.plist\u306b\u66f8\u304b\u308c\u3066\u3044\u308bREVERSED_CLIENT_ID\u3068iOS\u30a2\u30d7\u30ea\u306eBundle ID\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d>-Bridging-Header.h\u3068\u3044\u3046\u30d8\u30c3\u30c0\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c8\u30c3\u30d7\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\u30d8\u30c3\u30c0\u30fc\u30d5\u30a1\u30a4\u30eb\u306b\u306f#import <Google/SignIn.h>\u3068\u3060\u3051\u8a18\u8ff0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6700\u5f8c\u306bBuild Settings > Swift Compiler - Code Generation > Objective-C Bridging Header\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d>-Bridging-Header.h\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n5. \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n\u3044\u3088\u3044\u3088\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\uff08\uff0b\u30b9\u30c8\u30fc\u30ea\u30fc\u30dc\u30fc\u30c9\u306e\u7de8\u96c6\uff09\u3092\u884c\u3044\u307e\u3059\u3002\u6700\u7d42\u7684\u306b\u3001\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u81ea\u8eab\u304c\u30aa\u30fc\u30ca\u30fc\u306e\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n\n5.1. AppDelegate.swift\n\nAppDelegate.swift\nimport UIKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, GIDSignInDelegate {\n\n    var window: UIWindow?\n\n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        var configureError: NSError?\n        GGLContext.sharedInstance().configureWithError(&configureError)\n        assert(configureError == nil, \"Error configuring Google services: \\(configureError)\")\n\n        GIDSignIn.sharedInstance().delegate = self\n        return true\n    }\n\n    func application(application: UIApplication,\n        openURL url: NSURL, sourceApplication: String?, annotation: AnyObject) -> Bool {\n            return GIDSignIn.sharedInstance().handleURL(url,\n                sourceApplication: sourceApplication,\n                annotation: annotation)\n    }\n\n    @available(iOS 9.0, *)\n    func application(app: UIApplication, openURL url: NSURL, options: [String : AnyObject]) -> Bool {\n        return GIDSignIn.sharedInstance().handleURL(url,\n            sourceApplication: options[UIApplicationOpenURLOptionsSourceApplicationKey] as! String?,\n            annotation: options[UIApplicationOpenURLOptionsAnnotationKey])\n    }\n\n    func signIn(signIn: GIDSignIn!, didSignInForUser user: GIDGoogleUser!,\n        withError error: NSError!) {\n            if (error == nil) {\n                let name = user.profile.name\n                NSNotificationCenter.defaultCenter().postNotificationName(\n                    \"ToggleAuthUINotification\",\n                    object: nil,\n                    userInfo: [\"statusText\": \"Signed in user: \\(name)\"])\n            } else {\n                print(\"\\(error.localizedDescription)\")\n                NSNotificationCenter.defaultCenter().postNotificationName(\n                    \"ToggleAuthUINotification\", object: nil, userInfo: nil)\n            }\n    }\n\n    func signIn(signIn: GIDSignIn!, didDisconnectWithUser user:GIDGoogleUser!,\n        withError error: NSError!) {\n            NSNotificationCenter.defaultCenter().postNotificationName(\n                \"ToggleAuthUINotification\",\n                object: nil,\n                userInfo: [\"statusText\": \"User has disconnected.\"])\n    }\n}\n\n\n\n5.2. Main.storyboard\n\u30ed\u30b0\u30a4\u30f3\u72b6\u6cc1\u3092\u8868\u3059\u30e9\u30d9\u30eb\u3001\u30ed\u30b0\u30a4\u30f3\u30dc\u30bf\u30f3\u3001\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n\n5.3. ViewController.swift\n\nViewController.swift\nimport UIKit\nimport Alamofire\nimport SwiftyJSON\n\nclass ViewController: UIViewController, GIDSignInUIDelegate {\n\n    // \u95a2\u9023\u4ed8\u3051\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\n    @IBOutlet weak var statusText: UILabel!\n    @IBOutlet weak var signInButton: GIDSignInButton!\n    @IBOutlet weak var fileListButton: UIButton!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        GIDSignIn.sharedInstance().uiDelegate = self\n        // Drive API\u3092\u53e9\u304f\u306e\u3067\u3053\u308c\u3092scope\u306b\u8db3\u3059\u3053\u3068\n        GIDSignIn.sharedInstance().scopes.append(\"https://www.googleapis.com/auth/drive.readonly\")\n\n        // \u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\n        GIDSignIn.sharedInstance().signInSilently()\n\n        NSNotificationCenter.defaultCenter().addObserver(self,\n            selector: \"receiveToggleAuthUINotification:\",\n            name: \"ToggleAuthUINotification\",\n            object: nil)\n\n        statusText.text = \"Initialized Swift app...\"\n        toggleAuthUI()\n    }\n\n    deinit {\n        NSNotificationCenter.defaultCenter().removeObserver(self,\n            name: \"ToggleAuthUINotification\",\n            object: nil)\n    }\n\n    func toggleAuthUI() {\n        if (GIDSignIn.sharedInstance().hasAuthInKeychain()){\n            signInButton.hidden = true\n        } else {\n            signInButton.hidden = false\n            statusText.text = \"Google Sign in\\niOS Demo\"\n        }\n    }\n\n    func receiveToggleAuthUINotification(notification: NSNotification) {\n        if (notification.name == \"ToggleAuthUINotification\") {\n            self.toggleAuthUI()\n            if notification.userInfo != nil {\n                let userInfo:Dictionary<String,String!> =\n                notification.userInfo as! Dictionary<String,String!>\n                self.statusText.text = userInfo[\"statusText\"]\n            }\n        }\n    }\n\n    // \u95a2\u9023\u4ed8\u3051\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\n    @IBAction func getFileList(sender: AnyObject) {\n        let me = GIDSignIn.sharedInstance().currentUser\n        let email = me.profile.email\n        let token = me.authentication.accessToken\n\n        let url = \"https://www.googleapis.com/drive/v2/files\"\n        let method = Alamofire.Method.GET\n        // MIME Type\u304c\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067\u3001\u30aa\u30fc\u30ca\u30fc\u306b\u81ea\u8eab\u3092\u542b\u3080\u3082\u306e\u3092\u691c\u7d22\n        let query = \"mimeType = 'application/vnd.google-apps.spreadsheet' and '\" + email + \"' in owners\"\n\n        Alamofire.request(method, url, parameters: [ \"access_token\": token, \"q\":  query ])\n            .responseJSON { response in\n                let json = JSON(response.result.value!)\n                for (_, sub): (String, JSON) in json[\"items\"] {\n                    print(sub[\"title\"].string! + \", \" + sub[\"id\"].string!)\n                }\n        }\n    }\n}\n\n\n\u4ee5\u4e0a\u3067\u5b8c\u6210\u3067\u3059\uff01\n\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u53e4\u304b\u3063\u305f\u308a\u3057\u3066\u5c11\u3057\u82e6\u52b4\u3057\u307e\u3057\u305f\u304c\u3001\n\u3053\u308c\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u304b\u3089REST API\u3092\u53e9\u304f\u307e\u3067\u4e00\u901a\u308a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u6700\u8fd1\u3001iOS\u30a2\u30d7\u30ea\u3067Google Drive\u306e\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u305f\u304f\u3066\u8272\u3005\u3068\u8abf\u3079\u3066\u307e\u3057\u305f\u3002\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u3001Google\u30a2\u30ab\u30a6\u30f3\u30c8\u306b\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u3066REST API\u3092\u53e9\u304f\u307e\u3067\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u305f\u306e\u3067\u3001\n\u4f3c\u305f\u3088\u3046\u306a\u3053\u3068\u3092\u3057\u305f\u3044\u65b9\u304c\u3044\u305f\u3089\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u74b0\u5883\n\n- Swift 2.1.1\n- Xcode 7.2\n- CocoaPods 0.39.0\n\n# 1. \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\u307e\u305a\u306fXcode\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u65b0\u898f\u306b\u4f5c\u6210\u3057\u3001CocoaPods\u3067\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```ruby:Podfile\nplatform :ios, '8.0'\n\nuse_frameworks!\n\npod 'Google/SignIn' # Google\u30a2\u30ab\u30a6\u30f3\u30c8\u8a8d\u8a3c\npod 'Alamofire'     # HTTP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\npod 'SwiftyJSON'    # JSON\u30d1\u30fc\u30b5\n\ntarget 'TestGoogle' do\n\nend\n```\n\n# 2. Google Developers Console\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n[\u3053\u306e\u30da\u30fc\u30b8](https://developers.google.com/identity/sign-in/ios/start)\u306e`GET A CONFIGURATION FILE`\u3068\u3044\u3046\u30ea\u30f3\u30af\u304b\u3089Google\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n1. \u30a2\u30d7\u30ea\u540d\u3001Bundle ID\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u30a2\u30d7\u30ea\u540d\u306f\u9069\u5f53\u3001Bundle ID\u306f\u5148\u307b\u3069\u4f5c\u3063\u305fXcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u305d\u308c\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n2. Google Sign-In\u3092\u6709\u52b9\u306b\u3057\u3066`Generate configuration files`\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n3. GoogleService-info.plist\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u5f8c\u3067\u4f7f\u3044\u307e\u3059\u3002\n\n# 3. Drive API\u3092\u6709\u52b9\u306b\u3059\u308b\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fGoogle\u30a2\u30d7\u30ea\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092[\u3053\u3053](https://console.developers.google.com/project)\u304b\u3089\u9078\u629e\u3057\u3001Drive API\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\n\n1. \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u300cGoogle API\u3092\u5229\u7528\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![api.png](https://qiita-image-store.s3.amazonaws.com/0/17731/2d681d45-6985-f635-7fef-00c2ede5fa44.png)\n\n2. Drive API\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cAPI\u3092\u6709\u52b9\u306b\u3059\u308b\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![api2.png](https://qiita-image-store.s3.amazonaws.com/0/17731/dbca8d8d-1470-5db9-f08b-2f029dbd99ef.png)\n\n# 4. iOS\u30a2\u30d7\u30ea\u306bGoogle\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u60c5\u5831\u3092\u7d44\u307f\u8fbc\u3080\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u524d\u306e\u6700\u5f8c\u306e\u4e0b\u6e96\u5099\u306b\u306a\u308a\u307e\u3059\u3002\n\n1. \u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fGoogleService-Info.plist\u3092Xcode\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c8\u30c3\u30d7\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\n![plist.png](https://qiita-image-store.s3.amazonaws.com/0/17731/aa8da42e-7a1d-6396-a15e-614423ae62d9.png)\n\n2. Info > URL Types\u306bGoogleService-Info.plist\u306b\u66f8\u304b\u308c\u3066\u3044\u308b`REVERSED_CLIENT_ID`\u3068iOS\u30a2\u30d7\u30ea\u306eBundle ID\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n![info.png](https://qiita-image-store.s3.amazonaws.com/0/17731/866f1b77-9a4e-2e7f-70a0-b1ee9ef8a996.png)\n\n3. `<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d>-Bridging-Header.h`\u3068\u3044\u3046\u30d8\u30c3\u30c0\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c8\u30c3\u30d7\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\u30d8\u30c3\u30c0\u30fc\u30d5\u30a1\u30a4\u30eb\u306b\u306f`#import <Google/SignIn.h>`\u3068\u3060\u3051\u8a18\u8ff0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n4. \u6700\u5f8c\u306bBuild Settings > Swift Compiler - Code Generation > Objective-C Bridging Header\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f`<\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d>-Bridging-Header.h`\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# 5. \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n\u3044\u3088\u3044\u3088\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\uff08\uff0b\u30b9\u30c8\u30fc\u30ea\u30fc\u30dc\u30fc\u30c9\u306e\u7de8\u96c6\uff09\u3092\u884c\u3044\u307e\u3059\u3002\u6700\u7d42\u7684\u306b\u3001\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u81ea\u8eab\u304c\u30aa\u30fc\u30ca\u30fc\u306e\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306a\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n![sample.gif](https://qiita-image-store.s3.amazonaws.com/0/17731/a6cf2938-80c4-706a-ce4a-6dadc3a90a86.gif)\n\n## 5.1. AppDelegate.swift\n\n```swift:AppDelegate.swift\nimport UIKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, GIDSignInDelegate {\n\n    var window: UIWindow?\n\n    func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -> Bool {\n        var configureError: NSError?\n        GGLContext.sharedInstance().configureWithError(&configureError)\n        assert(configureError == nil, \"Error configuring Google services: \\(configureError)\")\n\n        GIDSignIn.sharedInstance().delegate = self\n        return true\n    }\n\n    func application(application: UIApplication,\n        openURL url: NSURL, sourceApplication: String?, annotation: AnyObject) -> Bool {\n            return GIDSignIn.sharedInstance().handleURL(url,\n                sourceApplication: sourceApplication,\n                annotation: annotation)\n    }\n\n    @available(iOS 9.0, *)\n    func application(app: UIApplication, openURL url: NSURL, options: [String : AnyObject]) -> Bool {\n        return GIDSignIn.sharedInstance().handleURL(url,\n            sourceApplication: options[UIApplicationOpenURLOptionsSourceApplicationKey] as! String?,\n            annotation: options[UIApplicationOpenURLOptionsAnnotationKey])\n    }\n\n    func signIn(signIn: GIDSignIn!, didSignInForUser user: GIDGoogleUser!,\n        withError error: NSError!) {\n            if (error == nil) {\n                let name = user.profile.name\n                NSNotificationCenter.defaultCenter().postNotificationName(\n                    \"ToggleAuthUINotification\",\n                    object: nil,\n                    userInfo: [\"statusText\": \"Signed in user: \\(name)\"])\n            } else {\n                print(\"\\(error.localizedDescription)\")\n                NSNotificationCenter.defaultCenter().postNotificationName(\n                    \"ToggleAuthUINotification\", object: nil, userInfo: nil)\n            }\n    }\n\n    func signIn(signIn: GIDSignIn!, didDisconnectWithUser user:GIDGoogleUser!,\n        withError error: NSError!) {\n            NSNotificationCenter.defaultCenter().postNotificationName(\n                \"ToggleAuthUINotification\",\n                object: nil,\n                userInfo: [\"statusText\": \"User has disconnected.\"])\n    }\n}\n```\n\n## 5.2. Main.storyboard\n\u30ed\u30b0\u30a4\u30f3\u72b6\u6cc1\u3092\u8868\u3059\u30e9\u30d9\u30eb\u3001\u30ed\u30b0\u30a4\u30f3\u30dc\u30bf\u30f3\u3001\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u30dc\u30bf\u30f3\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n![main.png](https://qiita-image-store.s3.amazonaws.com/0/17731/13cb881e-3b79-01e4-bc85-5599b730d388.png)\n\n## 5.3. ViewController.swift\n\n```swift:ViewController.swift\nimport UIKit\nimport Alamofire\nimport SwiftyJSON\n\nclass ViewController: UIViewController, GIDSignInUIDelegate {\n\n    // \u95a2\u9023\u4ed8\u3051\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\n    @IBOutlet weak var statusText: UILabel!\n    @IBOutlet weak var signInButton: GIDSignInButton!\n    @IBOutlet weak var fileListButton: UIButton!\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        GIDSignIn.sharedInstance().uiDelegate = self\n        // Drive API\u3092\u53e9\u304f\u306e\u3067\u3053\u308c\u3092scope\u306b\u8db3\u3059\u3053\u3068\n        GIDSignIn.sharedInstance().scopes.append(\"https://www.googleapis.com/auth/drive.readonly\")\n\n        // \u81ea\u52d5\u30ed\u30b0\u30a4\u30f3\n        GIDSignIn.sharedInstance().signInSilently()\n\n        NSNotificationCenter.defaultCenter().addObserver(self,\n            selector: \"receiveToggleAuthUINotification:\",\n            name: \"ToggleAuthUINotification\",\n            object: nil)\n\n        statusText.text = \"Initialized Swift app...\"\n        toggleAuthUI()\n    }\n\n    deinit {\n        NSNotificationCenter.defaultCenter().removeObserver(self,\n            name: \"ToggleAuthUINotification\",\n            object: nil)\n    }\n\n    func toggleAuthUI() {\n        if (GIDSignIn.sharedInstance().hasAuthInKeychain()){\n            signInButton.hidden = true\n        } else {\n            signInButton.hidden = false\n            statusText.text = \"Google Sign in\\niOS Demo\"\n        }\n    }\n\n    func receiveToggleAuthUINotification(notification: NSNotification) {\n        if (notification.name == \"ToggleAuthUINotification\") {\n            self.toggleAuthUI()\n            if notification.userInfo != nil {\n                let userInfo:Dictionary<String,String!> =\n                notification.userInfo as! Dictionary<String,String!>\n                self.statusText.text = userInfo[\"statusText\"]\n            }\n        }\n    }\n\n    // \u95a2\u9023\u4ed8\u3051\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\n    @IBAction func getFileList(sender: AnyObject) {\n        let me = GIDSignIn.sharedInstance().currentUser\n        let email = me.profile.email\n        let token = me.authentication.accessToken\n\n        let url = \"https://www.googleapis.com/drive/v2/files\"\n        let method = Alamofire.Method.GET\n        // MIME Type\u304c\u30b9\u30d7\u30ec\u30c3\u30c9\u30b7\u30fc\u30c8\u3067\u3001\u30aa\u30fc\u30ca\u30fc\u306b\u81ea\u8eab\u3092\u542b\u3080\u3082\u306e\u3092\u691c\u7d22\n        let query = \"mimeType = 'application/vnd.google-apps.spreadsheet' and '\" + email + \"' in owners\"\n\n        Alamofire.request(method, url, parameters: [ \"access_token\": token, \"q\":  query ])\n            .responseJSON { response in\n                let json = JSON(response.result.value!)\n                for (_, sub): (String, JSON) in json[\"items\"] {\n                    print(sub[\"title\"].string! + \", \" + sub[\"id\"].string!)\n                }\n        }\n    }\n}\n```\n\n\u4ee5\u4e0a\u3067\u5b8c\u6210\u3067\u3059\uff01\n\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u53e4\u304b\u3063\u305f\u308a\u3057\u3066\u5c11\u3057\u82e6\u52b4\u3057\u307e\u3057\u305f\u304c\u3001\n\u3053\u308c\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u304b\u3089REST API\u3092\u53e9\u304f\u307e\u3067\u4e00\u901a\u308a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n"}