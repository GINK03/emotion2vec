{"context": " More than 1 year has passed since last update.\u3061\u3087\u3063\u3068\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\nomniauth-identity\u306e\u5834\u5408\n\nsessions_controller.rb\nclass SessionsController < ApplicationController\n  def create\n    user = User.find(env[\"omniauth.auth\"][\"uid\"])\n    session[:user_id] = user.id\n    redirect_to expenses_url, notice: \"Signed in!\"\n  end\nend\n\n\n\nspec_helper.rb\nOmniAuth.config.test_mode = true\n\n\n\nlogin_helper.rb\ndef login(user, password)\n  OmniAuth.config.mock_auth[:identity] = { 'provider' => 'identity', 'uid' => user.id }\n  post '/auth/identity/callback', screen_name: user.screen_name, password: password\nend\n\n\n\u3042\u3068\u306f\u5404spec\u304b\u3089before { login(user, password) }\u3068\u304b\u3059\u308b\u3060\u3051\u3002\ntwitter\u3068\u304b\u306e\u8a8d\u8a3c\u3082\u540c\u3058\u611f\u3058\u3067\u3067\u304d\u308b\u306f\u305a\u3002\n\n\u53c2\u8003\nhttps://github.com/intridea/omniauth/wiki/Integration-Testing\n\n\u3061\u3087\u3063\u3068\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n## omniauth-identity\u306e\u5834\u5408\n\n``` ruby:sessions_controller.rb\nclass SessionsController < ApplicationController\n  def create\n    user = User.find(env[\"omniauth.auth\"][\"uid\"])\n    session[:user_id] = user.id\n    redirect_to expenses_url, notice: \"Signed in!\"\n  end\nend\n```\n\n``` ruby:spec_helper.rb\nOmniAuth.config.test_mode = true\n```\n\n``` ruby:login_helper.rb\ndef login(user, password)\n  OmniAuth.config.mock_auth[:identity] = { 'provider' => 'identity', 'uid' => user.id }\n  post '/auth/identity/callback', screen_name: user.screen_name, password: password\nend\n```\n\n\u3042\u3068\u306f\u5404spec\u304b\u3089`before { login(user, password) }`\u3068\u304b\u3059\u308b\u3060\u3051\u3002\n\ntwitter\u3068\u304b\u306e\u8a8d\u8a3c\u3082\u540c\u3058\u611f\u3058\u3067\u3067\u304d\u308b\u306f\u305a\u3002\n\n\n## \u53c2\u8003\nhttps://github.com/intridea/omniauth/wiki/Integration-Testing\n", "tags": ["OmniAuth", "Rails", "RSpec"]}