{"context": " More than 1 year has passed since last update.\n\nWhat's this?\nKVM \u7ba1\u7406\u3092\u300c\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e virsh\u300d\u3084\u300cLinux X Application \u306e VirtManager\u300d\u3067\u306f\u306a\u304f\u3001\u666e\u901a\u306b\u30d6\u30e9\u30a6\u30b6\u3067\u7ba1\u7406\u3057\u305f\u3044\u3002\nRHEV(RedHat Enterprise Virtuaalizaiton) \u306e Upstream \u306e Ovirt \u3067\u3001KVM Host \u3092 Ovirt \u7ba1\u7406\u5316\u306b\u8a2d\u5b9a\u3059\u308b\u307e\u3067\u306e\u30e1\u30e2\n\nInstall/Setup oVirt Engine (Ovirt Server)\nInstall/Setup Vdsm-Node (KVM node)\nConnect Vdsm-Node (KVM node) to oVirt Engine (Ovirt Server)\n\n\nInstall/Setup oVirt Engine (Ovirt Server)\noVirt Engine is the control center of the oVirt environment.\n\nAdd repository\n# yum install http://resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm\n\n\nInstall pkg\n# yum install ovirt-engine\n\n=======================================================================\n Package                Arch      Version    Repository           Size\n=======================================================================\nInstalling:\n ovirt-release35        noarch    005-1      /ovirt-release35    7.3 k\n\nTransaction Summary\n=======================================================================\nInstall  1 Package\n\n\nConfiguration\n# export LANG=en_US.UTF-8\n\n# engine-setup\n[ INFO  ] Stage: Initializing\n[ INFO  ] Stage: Environment setup\n          Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf', '/etc/ovirt-engine-setup.conf.d/10-packaging.conf']\n          Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20150723174824-g0sl3w.log\n          Version: otopi-1.3.2 (otopi-1.3.2-1.el7.centos)\n[ INFO  ] Stage: Environment packages setup\n[ INFO  ] Stage: Programs detection\n[ INFO  ] Stage: Environment setup\n[ INFO  ] Stage: Environment customization\n\n          --== PRODUCT OPTIONS ==--\n\n          Configure Engine on this host (Yes, No) [Yes]:\n          Configure WebSocket Proxy on this host (Yes, No) [Yes]: No\n\n          --== PACKAGES ==--\n\n[ INFO  ] Checking for product updates...\n[ INFO  ] No product updates found\n\n          --== ALL IN ONE CONFIGURATION ==--\n\n\n          --== NETWORK CONFIGURATION ==--\n\n          Setup can automatically configure the firewall on this system.\n          Note: automatic configuration of the firewall may overwrite current settings.\n          Do you want Setup to configure the firewall? (Yes, No) [Yes]:\n[ INFO  ] firewalld will be configured as firewall manager.\n          Host fully qualified DNS name of this server [<HOSTNAME>]:\n[WARNING] Host name <HOSTNAME> has no domain suffix\n[WARNING] Failed to resolve <HOSTNAME> using DNS, it can be resolved only locally\n\n          --== DATABASE CONFIGURATION ==--\n\n          Where is the Engine database located? (Local, Remote) [Local]:\n          Setup can configure the local postgresql server automatically for the engine to run. This may conflict with existing applications.\n          Would you like Setup to automatically configure postgresql and create Engine database, or prefer to perform that manually? (Automatic, Manual) [Automatic]:\n\n          --== OVIRT ENGINE CONFIGURATION ==--\n\n          Engine admin password:\n          Confirm engine admin password:\n[WARNING] Passwords do not match\n          Engine admin password:\n          Confirm engine admin password:\n[WARNING] Password is weak: it is based on a dictionary word\n          Use weak password? (Yes, No) [No]: Yes\n          Application mode (Virt, Gluster, Both) [Both]:\n\n          --== PKI CONFIGURATION ==--\n\n          Organization name for certificate [Test]: <ORGANIZATION>\n\n          --== APACHE CONFIGURATION ==--\n\n          Setup can configure the default page of the web server to present the application home page. This may conflict with existing applications.\n          Do you wish to set the application as the default page of the web server? (Yes, No) [Yes]:\n          Setup can configure apache to use SSL using a certificate issued from the internal CA.\n          Do you wish Setup to configure that, or prefer to perform that manually? (Automatic, Manual) [Automatic]:\n\n          --== SYSTEM CONFIGURATION ==--\n\n          Configure an NFS share on this server to be used as an ISO Domain? (Yes, No) [Yes]:\n          Local ISO domain path [/var/lib/exports/iso]:\n          Local ISO domain ACL - note that the default will restrict access to <HOSTNAME> only, for security reasons [<HOSTNAME>(rw)]: x.x.x.x/24(rw)\n          Local ISO domain name [ISO_DOMAIN]:\n\n          --== MISC CONFIGURATION ==--\n\n\n          --== END OF CONFIGURATION ==--\n\n[ INFO  ] Stage: Setup validation\n[WARNING] Less than 16384MB of memory is available\n\n          --== CONFIGURATION PREVIEW ==--\n\n          Application mode                        : both\n          Firewall manager                        : firewalld\n          Update Firewall                         : True\n          Host FQDN                               : <HOSTNAME>\n          Engine database name                    : engine\n          Engine database secured connection      : False\n          Engine database host                    : localhost\n          Engine database user name               : engine\n          Engine database host name validation    : False\n          Engine database port                    : 5432\n          Engine installation                     : True\n          NFS setup                               : True\n          PKI organization                        : <ORGANIZATION>\n          NFS mount point                         : /var/lib/exports/iso\n          NFS export ACL                          : <HOSTNAME>(rw)\n          Configure local Engine database         : True\n          Set application as default page         : True\n          Configure Apache SSL                    : True\n          Configure WebSocket Proxy               : False\n          Engine Host FQDN                        : <HOSTNAME>\n\n          Please confirm installation settings (OK, Cancel) [OK]:\n[ INFO  ] Stage: Transaction setup\n[ INFO  ] Stopping engine service\n[ INFO  ] Stopping ovirt-fence-kdump-listener service\n[ INFO  ] Stopping websocket-proxy service\n[ INFO  ] Stage: Misc configuration\n[ INFO  ] Stage: Package installation\n[ INFO  ] Stage: Misc configuration\n[ INFO  ] Initializing PostgreSQL\n[ INFO  ] Creating PostgreSQL 'engine' database\n[ INFO  ] Configuring PostgreSQL\n[ INFO  ] Creating/refreshing Engine database schema\n[ INFO  ] Creating CA\n[ INFO  ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf'\n[ INFO  ] Stage: Transaction commit\n[ INFO  ] Stage: Closing up\n[ INFO  ] Restarting nfs services\n\n          --== SUMMARY ==--\n\n[WARNING] Less than 16384MB of memory is available\n          SSH fingerprint: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx\n          Internal CA xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx\n          Web access is enabled at:\n              http://<HOSTNAME>:80/ovirt-engine\n              https://<HOSTNAME>:443/ovirt-engine\n          Please use the user \"admin\" and password specified in order to login\n\n          --== END OF SUMMARY ==--\n\n[ INFO  ] Starting engine service\n[ INFO  ] Restarting httpd\n[ INFO  ] Stage: Clean up\n          Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20150723174824-g0sl3w.log\n[ INFO  ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20150723180146-setup.conf'\n[ INFO  ] Stage: Pre-termination\n[ INFO  ] Stage: Termination\n[ INFO  ] Execution of setup completed successfully\n\n\nCheck running services\n# systemctl list-units | grep ovirt\novirt-engine.service                   loaded active running   oVirt Engine\novirt-fence-kdump-listener.service     loaded active running   oVirt Engine fence_kdump listener\n\n# systemctl list-unit-files | grep ovirt\novirt-engine-notifier.service              disabled\novirt-engine.service                       enabled\novirt-fence-kdump-listener.service         enabled\novirt-websocket-proxy.service              disabled\n\n# ps -aef | grep java\novirt     1558  1500  1  2015 ?        3-01:33:59 java -server -XX:+TieredCompilation -Xms1024M -Xmx1024M -XX:PermSize=256m -XX:MaxPermSize=256m -Djava.awt.headless=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djsse.enableSNIExtension=false -Djava.security.krb5.conf=/etc/ovirt-engine/krb5.conf -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/ovirt-engine/dump -Djava.util.logging.manager=org.jboss.logmanager -Dlogging.configuration=file:///var/lib/ovirt-engine/jboss_runtime/config/ovirt-engine-logging.properties -Dorg.jboss.resolver.warning=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.modules.write-indexes=false -Djboss.server.default.config=ovirt-engine -Djboss.home.dir=/usr/share/ovirt-engine-jboss-as -Djboss.server.base.dir=/usr/share/ovirt-engine -Djboss.server.data.dir=/var/lib/ovirt-engine -Djboss.server.log.dir=/var/log/ovirt-engine -Djboss.server.config.dir=/var/lib/ovirt-engine/jboss_runtime/config -Djboss.server.temp.dir=/var/lib/ovirt-engine/jboss_runtime/tmp -Djboss.controller.temp.dir=/var/lib/ovirt-engine/jboss_runtime/tmp -jar /usr/share/ovirt-engine-jboss-as/jboss-modules.jar -mp /var/lib/ovirt-engine/jboss_runtime/modules/00-ovirt-engine-modules:/var/lib/ovirt-engine/jboss_runtime/modules/01-ovirt-engine-jboss-as-modules -jaxpmodule javax.xml.jaxp-provider org.jboss.as.standalone -c ovirt-engine.xml\n\n\nInstall/Setup Vdsm-Node (KVM node)\n\nAdd repository\n# yum install http://resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm\n\n\nInstall pkg\n# yum install vdsm\n\n\nCheck running services\n# systemctl list-unit-files | grep vdsm\nsupervdsmd.service                         static\nvdsm-network.service                       enabled\nvdsmd.service                              enabled\n\n\nNetwork configuration\n\u4e3b\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u307f\u8a18\u8f09\u3001\"ovirtmgmt\" \u3068\u3044\u3046\u540d\u524d\u306e Bridge \u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\n\nifcfg-*\n\n# cat /etc/sysconfig/network-scripts/ifcfg-enp3s0f0\nDEVICE=enp3s0f0\nBRIDGE=ovirtmgmt\nONBOOT=yes\nNM_CONTROLLED=no\n\n# cat /etc/sysconfig/network-scripts/ifcfg-ovirtmgmt\nDEVICE=ovirtmgmt\nTYPE=Bridge\nONBOOT=yes\nIPADDR=x.x.x.x\nNETMASK=x.x.x.x\nBOOTPROTO=static\nNM_CONTROLLED=no\n\n\nBridge\n\n# brctl show\nbridge name     bridge id               STP enabled     interfaces\n;vdsmdummy;             8000.000000000000       no\novirtmgmt               8000.441ea159d1d8       no              enp3s0f0\n\n\nConnect Vdsm-Node (KVM node) to oVirt Engine (Ovirt Server)\noVirt Engine (Ovirt Server) \u306b Vdsm-Node (KVM node) \u3092\u767b\u9332\u3057\u3001\u7ba1\u7406\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\nLog in to the Administration Portal\nhttp://x.x.x.x/ovirt-engine/\n\nid : admin\npw : \u4e0a\u8a18\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\nVdsm-Node (KVM node) \u65b0\u898f\u8ffd\u52a0\n[Host] -> \"New\"\n\nKVM Host name, Address, Password \u5165\u529b\n\n\u8ffd\u52a0\u3055\u308c\u308b\u304c\u3001\u3053\u306e\u6642\u70b9\u3067\u306f\u307e\u3060 Active \u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3002\n\n\n\u8ffd\u52a0\u3057\u305f Vdsm-Node (KVM node) \u306e Network Configuration \u3092\u4fee\u6b63\n[Network Interfaces] -> \"Setup Host Networks\"\n\nlogical network interface [ovirtmgmt] \u3092 physical interface [enp3s0f0] \u306b\u5bfe\u5fdc\u3055\u305b\u308b\u70ba\u3001\u77e2\u5370\u306e\u3088\u3046\u306b\u30c9\u30e9\u30c3\u30b0\u3059\u308b\u3002\n\nlogical network interface [ovirtmgmt] \u3092 physical interface [enp3s0f0] \u304c\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u305f\u3002\n\n\nVdsm-Node (KVM node) \u3092 Activate\nVdsm-Node (KVM node) \u304c oVirt Engine (Ovirt Server) \u306b\u767b\u9332\u3055\u308c\u3001\u64cd\u4f5c\u53ef\u80fd\u3068\u306a\u308b\u3002\n\n\nEnvironment\n\novirt-engine\n# rpm -q ovirt-engine\novirt-engine-3.5.3.1-1.el7.centos.noarch\n\n\nvdsm\n# rpm -q vdsm\nvdsm-4.16.20-0.el7.centos.x86_64\n\n\nlibvirt\n# libvirtd --version\nlibvirtd (libvirt) 1.2.8\n\n\nReference\n\nHow to install\nhttp://www.ovirt.org/Quick_Start_Guide#Install_oVirt\novirt-shell\nhttp://www.ovirt.org/CLI\n\n## What's this?\n\nKVM \u7ba1\u7406\u3092\u300c\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306e virsh\u300d\u3084\u300cLinux X Application \u306e VirtManager\u300d\u3067\u306f\u306a\u304f\u3001\u666e\u901a\u306b\u30d6\u30e9\u30a6\u30b6\u3067\u7ba1\u7406\u3057\u305f\u3044\u3002\nRHEV(RedHat Enterprise Virtuaalizaiton) \u306e Upstream \u306e Ovirt \u3067\u3001KVM Host \u3092 Ovirt \u7ba1\u7406\u5316\u306b\u8a2d\u5b9a\u3059\u308b\u307e\u3067\u306e\u30e1\u30e2\n\n* Install/Setup oVirt Engine (Ovirt Server)\n* Install/Setup Vdsm-Node (KVM node)\n* Connect Vdsm-Node (KVM node) to oVirt Engine (Ovirt Server)\n\n## Install/Setup oVirt Engine (Ovirt Server)\n\noVirt Engine is the control center of the oVirt environment.\n\n#### Add repository\n\n    # yum install http://resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm\n\n#### Install pkg\n\n    # yum install ovirt-engine\n\n    =======================================================================\n     Package                Arch      Version    Repository           Size\n    =======================================================================\n    Installing:\n     ovirt-release35        noarch    005-1      /ovirt-release35    7.3 k\n\n    Transaction Summary\n    =======================================================================\n    Install  1 Package\n\n\n#### Configuration\n\n    # export LANG=en_US.UTF-8\n\n    # engine-setup\n    [ INFO  ] Stage: Initializing\n    [ INFO  ] Stage: Environment setup\n              Configuration files: ['/etc/ovirt-engine-setup.conf.d/10-packaging-jboss.conf', '/etc/ovirt-engine-setup.conf.d/10-packaging.conf']\n              Log file: /var/log/ovirt-engine/setup/ovirt-engine-setup-20150723174824-g0sl3w.log\n              Version: otopi-1.3.2 (otopi-1.3.2-1.el7.centos)\n    [ INFO  ] Stage: Environment packages setup\n    [ INFO  ] Stage: Programs detection\n    [ INFO  ] Stage: Environment setup\n    [ INFO  ] Stage: Environment customization\n\n              --== PRODUCT OPTIONS ==--\n\n              Configure Engine on this host (Yes, No) [Yes]:\n              Configure WebSocket Proxy on this host (Yes, No) [Yes]: No\n\n              --== PACKAGES ==--\n\n    [ INFO  ] Checking for product updates...\n    [ INFO  ] No product updates found\n\n              --== ALL IN ONE CONFIGURATION ==--\n\n\n              --== NETWORK CONFIGURATION ==--\n\n              Setup can automatically configure the firewall on this system.\n              Note: automatic configuration of the firewall may overwrite current settings.\n              Do you want Setup to configure the firewall? (Yes, No) [Yes]:\n    [ INFO  ] firewalld will be configured as firewall manager.\n              Host fully qualified DNS name of this server [<HOSTNAME>]:\n    [WARNING] Host name <HOSTNAME> has no domain suffix\n    [WARNING] Failed to resolve <HOSTNAME> using DNS, it can be resolved only locally\n\n              --== DATABASE CONFIGURATION ==--\n\n              Where is the Engine database located? (Local, Remote) [Local]:\n              Setup can configure the local postgresql server automatically for the engine to run. This may conflict with existing applications.\n              Would you like Setup to automatically configure postgresql and create Engine database, or prefer to perform that manually? (Automatic, Manual) [Automatic]:\n\n              --== OVIRT ENGINE CONFIGURATION ==--\n\n              Engine admin password:\n              Confirm engine admin password:\n    [WARNING] Passwords do not match\n              Engine admin password:\n              Confirm engine admin password:\n    [WARNING] Password is weak: it is based on a dictionary word\n              Use weak password? (Yes, No) [No]: Yes\n              Application mode (Virt, Gluster, Both) [Both]:\n\n              --== PKI CONFIGURATION ==--\n\n              Organization name for certificate [Test]: <ORGANIZATION>\n\n              --== APACHE CONFIGURATION ==--\n\n              Setup can configure the default page of the web server to present the application home page. This may conflict with existing applications.\n              Do you wish to set the application as the default page of the web server? (Yes, No) [Yes]:\n              Setup can configure apache to use SSL using a certificate issued from the internal CA.\n              Do you wish Setup to configure that, or prefer to perform that manually? (Automatic, Manual) [Automatic]:\n\n              --== SYSTEM CONFIGURATION ==--\n\n              Configure an NFS share on this server to be used as an ISO Domain? (Yes, No) [Yes]:\n              Local ISO domain path [/var/lib/exports/iso]:\n              Local ISO domain ACL - note that the default will restrict access to <HOSTNAME> only, for security reasons [<HOSTNAME>(rw)]: x.x.x.x/24(rw)\n              Local ISO domain name [ISO_DOMAIN]:\n\n              --== MISC CONFIGURATION ==--\n\n\n              --== END OF CONFIGURATION ==--\n\n    [ INFO  ] Stage: Setup validation\n    [WARNING] Less than 16384MB of memory is available\n\n              --== CONFIGURATION PREVIEW ==--\n\n              Application mode                        : both\n              Firewall manager                        : firewalld\n              Update Firewall                         : True\n              Host FQDN                               : <HOSTNAME>\n              Engine database name                    : engine\n              Engine database secured connection      : False\n              Engine database host                    : localhost\n              Engine database user name               : engine\n              Engine database host name validation    : False\n              Engine database port                    : 5432\n              Engine installation                     : True\n              NFS setup                               : True\n              PKI organization                        : <ORGANIZATION>\n              NFS mount point                         : /var/lib/exports/iso\n              NFS export ACL                          : <HOSTNAME>(rw)\n              Configure local Engine database         : True\n              Set application as default page         : True\n              Configure Apache SSL                    : True\n              Configure WebSocket Proxy               : False\n              Engine Host FQDN                        : <HOSTNAME>\n\n              Please confirm installation settings (OK, Cancel) [OK]:\n    [ INFO  ] Stage: Transaction setup\n    [ INFO  ] Stopping engine service\n    [ INFO  ] Stopping ovirt-fence-kdump-listener service\n    [ INFO  ] Stopping websocket-proxy service\n    [ INFO  ] Stage: Misc configuration\n    [ INFO  ] Stage: Package installation\n    [ INFO  ] Stage: Misc configuration\n    [ INFO  ] Initializing PostgreSQL\n    [ INFO  ] Creating PostgreSQL 'engine' database\n    [ INFO  ] Configuring PostgreSQL\n    [ INFO  ] Creating/refreshing Engine database schema\n    [ INFO  ] Creating CA\n    [ INFO  ] Generating post install configuration file '/etc/ovirt-engine-setup.conf.d/20-setup-ovirt-post.conf'\n    [ INFO  ] Stage: Transaction commit\n    [ INFO  ] Stage: Closing up\n    [ INFO  ] Restarting nfs services\n\n              --== SUMMARY ==--\n\n    [WARNING] Less than 16384MB of memory is available\n              SSH fingerprint: xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx\n              Internal CA xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx\n              Web access is enabled at:\n                  http://<HOSTNAME>:80/ovirt-engine\n                  https://<HOSTNAME>:443/ovirt-engine\n              Please use the user \"admin\" and password specified in order to login\n\n              --== END OF SUMMARY ==--\n\n    [ INFO  ] Starting engine service\n    [ INFO  ] Restarting httpd\n    [ INFO  ] Stage: Clean up\n              Log file is located at /var/log/ovirt-engine/setup/ovirt-engine-setup-20150723174824-g0sl3w.log\n    [ INFO  ] Generating answer file '/var/lib/ovirt-engine/setup/answers/20150723180146-setup.conf'\n    [ INFO  ] Stage: Pre-termination\n    [ INFO  ] Stage: Termination\n    [ INFO  ] Execution of setup completed successfully\n\n\n\n#### Check running services\n\n    # systemctl list-units | grep ovirt\n    ovirt-engine.service                   loaded active running   oVirt Engine\n    ovirt-fence-kdump-listener.service     loaded active running   oVirt Engine fence_kdump listener\n\n    # systemctl list-unit-files | grep ovirt\n    ovirt-engine-notifier.service              disabled\n    ovirt-engine.service                       enabled\n    ovirt-fence-kdump-listener.service         enabled\n    ovirt-websocket-proxy.service              disabled\n\n    # ps -aef | grep java\n    ovirt     1558  1500  1  2015 ?        3-01:33:59 java -server -XX:+TieredCompilation -Xms1024M -Xmx1024M -XX:PermSize=256m -XX:MaxPermSize=256m -Djava.awt.headless=true -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000 -Djsse.enableSNIExtension=false -Djava.security.krb5.conf=/etc/ovirt-engine/krb5.conf -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/ovirt-engine/dump -Djava.util.logging.manager=org.jboss.logmanager -Dlogging.configuration=file:///var/lib/ovirt-engine/jboss_runtime/config/ovirt-engine-logging.properties -Dorg.jboss.resolver.warning=true -Djboss.modules.system.pkgs=org.jboss.byteman -Djboss.modules.write-indexes=false -Djboss.server.default.config=ovirt-engine -Djboss.home.dir=/usr/share/ovirt-engine-jboss-as -Djboss.server.base.dir=/usr/share/ovirt-engine -Djboss.server.data.dir=/var/lib/ovirt-engine -Djboss.server.log.dir=/var/log/ovirt-engine -Djboss.server.config.dir=/var/lib/ovirt-engine/jboss_runtime/config -Djboss.server.temp.dir=/var/lib/ovirt-engine/jboss_runtime/tmp -Djboss.controller.temp.dir=/var/lib/ovirt-engine/jboss_runtime/tmp -jar /usr/share/ovirt-engine-jboss-as/jboss-modules.jar -mp /var/lib/ovirt-engine/jboss_runtime/modules/00-ovirt-engine-modules:/var/lib/ovirt-engine/jboss_runtime/modules/01-ovirt-engine-jboss-as-modules -jaxpmodule javax.xml.jaxp-provider org.jboss.as.standalone -c ovirt-engine.xml\n\n\n\n## Install/Setup Vdsm-Node (KVM node)\n\n#### Add repository\n\n    # yum install http://resources.ovirt.org/pub/yum-repo/ovirt-release35.rpm\n\n#### Install pkg\n\n    # yum install vdsm\n\n#### Check running services\n\n    # systemctl list-unit-files | grep vdsm\n    supervdsmd.service                         static\n    vdsm-network.service                       enabled\n    vdsmd.service                              enabled\n\n\n#### Network configuration\n\n\u4e3b\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u307f\u8a18\u8f09\u3001\"ovirtmgmt\" \u3068\u3044\u3046\u540d\u524d\u306e Bridge \u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\n\n* ifcfg-*\n\n```\n# cat /etc/sysconfig/network-scripts/ifcfg-enp3s0f0\nDEVICE=enp3s0f0\nBRIDGE=ovirtmgmt\nONBOOT=yes\nNM_CONTROLLED=no\n\n# cat /etc/sysconfig/network-scripts/ifcfg-ovirtmgmt\nDEVICE=ovirtmgmt\nTYPE=Bridge\nONBOOT=yes\nIPADDR=x.x.x.x\nNETMASK=x.x.x.x\nBOOTPROTO=static\nNM_CONTROLLED=no\n```\n\n* Bridge\n\n```\n# brctl show\nbridge name     bridge id               STP enabled     interfaces\n;vdsmdummy;             8000.000000000000       no\novirtmgmt               8000.441ea159d1d8       no              enp3s0f0\n```\n\n\n\n## Connect Vdsm-Node (KVM node) to oVirt Engine (Ovirt Server)\n\noVirt Engine (Ovirt Server) \u306b Vdsm-Node (KVM node) \u3092\u767b\u9332\u3057\u3001\u7ba1\u7406\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n#### Log in to the Administration Portal\n\nhttp://x.x.x.x/ovirt-engine/\n\n* id : admin\n* pw : \u4e0a\u8a18\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\n#### Vdsm-Node (KVM node) \u65b0\u898f\u8ffd\u52a0\n\n[Host] -> \"New\"\n\n![ovirt01.png](https://qiita-image-store.s3.amazonaws.com/0/39751/d0bea1e0-f5d4-5d79-c6e6-965e69445466.png)\n\nKVM Host name, Address, Password \u5165\u529b\n\n![ovirt02.png](https://qiita-image-store.s3.amazonaws.com/0/39751/d4324747-eae3-fefa-9edb-74973d77a470.png)\n\n\u8ffd\u52a0\u3055\u308c\u308b\u304c\u3001\u3053\u306e\u6642\u70b9\u3067\u306f\u307e\u3060 Active \u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3002\n\n![ovirt03.png](https://qiita-image-store.s3.amazonaws.com/0/39751/e93f3a4f-f458-db93-3b86-95cdabeb891f.png)\n\n#### \u8ffd\u52a0\u3057\u305f Vdsm-Node (KVM node) \u306e Network Configuration \u3092\u4fee\u6b63\n\n[Network Interfaces] -> \"Setup Host Networks\"\n\n![ovirt04.png](https://qiita-image-store.s3.amazonaws.com/0/39751/45c8d18e-00a0-47fe-76be-ed598b8a5fb2.png)\n\nlogical network interface [ovirtmgmt] \u3092 physical interface [enp3s0f0] \u306b\u5bfe\u5fdc\u3055\u305b\u308b\u70ba\u3001\u77e2\u5370\u306e\u3088\u3046\u306b\u30c9\u30e9\u30c3\u30b0\u3059\u308b\u3002\n\n![ovirt05.png](https://qiita-image-store.s3.amazonaws.com/0/39751/089c04e5-32b0-a65a-25e5-e3d326d1657e.png)\n\nlogical network interface [ovirtmgmt] \u3092 physical interface [enp3s0f0] \u304c\u30de\u30c3\u30d4\u30f3\u30b0\u3055\u308c\u305f\u3002\n\n![ovirt06.png](https://qiita-image-store.s3.amazonaws.com/0/39751/83721ac7-0f4a-aa5f-d548-ddfdd238eb5d.png)\n\n#### Vdsm-Node (KVM node) \u3092 Activate\n\nVdsm-Node (KVM node) \u304c oVirt Engine (Ovirt Server) \u306b\u767b\u9332\u3055\u308c\u3001\u64cd\u4f5c\u53ef\u80fd\u3068\u306a\u308b\u3002\n\n![ovirt07.png](https://qiita-image-store.s3.amazonaws.com/0/39751/1ede5d14-e7e9-7402-07d0-f1c809b72781.png)\n\n## Environment\n\n###### ovirt-engine\n\n    # rpm -q ovirt-engine\n    ovirt-engine-3.5.3.1-1.el7.centos.noarch\n\n###### vdsm\n\n    # rpm -q vdsm\n    vdsm-4.16.20-0.el7.centos.x86_64\n\n###### libvirt\n\n    # libvirtd --version\n    libvirtd (libvirt) 1.2.8\n\n## Reference\n\n* How to install\n[http://www.ovirt.org/Quick_Start_Guide#Install_oVirt][link-01]\n\n* ovirt-shell\n[http://www.ovirt.org/CLI][link-02]\n\n\n[link-01]:http://www.ovirt.org/Quick_Start_Guide#Install_oVirt\n[link-02]:http://www.ovirt.org/CLI\n\n\n", "tags": ["Linux", "KVM", "oVirt"]}