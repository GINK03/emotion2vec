{"context": "\n\n\u306f\u3058\u3081\u306b\n2015/6\u306bAmazon EMR\u3067Spark\u304c\u6a19\u6e96\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u3057\u305f\u3002\u3053\u308c\u306b\u3088\u308a\u3001EMR\u3067Spark Cluster\u3092\u8d77\u52d5\u3059\u308c\u3070\u3001\u3082\u306e\u306e10\u5206\u3050\u3089\u3044\u3067Spark + IPython\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u304c\u3001AWS Console\u306eEMR\u306e\u8a2d\u5b9aUI\u304c\u5927\u304d\u304f\u5909\u308f\u3063\u305f\u308a\u3001IPython\u304cJupyter\u306b\u306a\u308a\u4e00\u90e8\u8a2d\u5b9a\u65b9\u6cd5\u304c\u5909\u308f\u3063\u305f\u308a\u3001\u305d\u308c\u3089\u306e\u5909\u5316\u306b\u5404\u7a2eDocument\u304c\u8ffd\u5f93\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3068\u3001\u8272\u3005\u30cf\u30de\u30c3\u305f\u306e\u3067\u3001\u8a2d\u5b9a\u65b9\u6cd5\u3068\u3001IPython\u4e0a\u3067Pyspark\u3092\u52d5\u304b\u3059\u65b9\u6cd5\u3092\u30c1\u30e9\u30b7\u306e\u88cf\u3057\u3066\u304a\u304d\u307e\u3059(2015/11\u6642\u70b9\u3067\u306e\u60c5\u5831\u3067\u3059)\u3002\n\u4ee5\u4e0b\u306e3\u672c\u7acb\u3066\u3067\u30c1\u30e9\u88cf\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\n\n(\u7b2c1\u56de)Amazon EMR\u4e0a\u3067\u306eSpark Cluster\u306e\u8d77\u52d5/\u8a2d\u5b9a\u65b9\u6cd5 (\u2605\u4eca\u56de\u306f\u30b3\u30b3)\n\n\nSpark, IPython\u306e\u8a2d\u5b9a\u65b9\u6cd5\nSpot instance\u306b\u3064\u3044\u3066\n\n\n\n(\u7b2c2\u56de)Spark\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306aAccess Log\u89e3\u6790\n\nAccess Log\u3092S3\u304b\u3089\u8aad\u307f\u8fbc\u3093\u3067\u3001ETL\u3059\u308b\nAccess Log\u3092\u4f7f\u3063\u3066\u5b9a\u756a\u306eMAU, DAU, UU\u3092Spark\u3067\u8a08\u7b97\u3057\u3066\u307f\u308b\n\u5404\u7a2eMonitoring tool\u306e\u898b\u65b9\n\n\n\n(\u7b2c3\u56de)Spark\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306a\u6a5f\u68b0\u5b66\u7fd2\n\nmatplotlib/seaborn\u3092\u4f7f\u3063\u3066Graph\u3092\u66f8\u3044\u3066\u307f\u308b\nMLLib\u3092\u4f7f\u3063\u3066Access Log\u3092\u6a5f\u68b0\u5b66\u7fd2(K-means, PCA)\u306b\u304b\u3051\u3066\u307f\u308b\n\n\n\n\n\u305d\u3082\u305d\u3082Hadoop\u3068\u304bMap Reduce\u3068\u304bSpark\u3063\u3066\u4f55\u3088?\n\n\u305d\u3082\u305d\u3082Hadoop\u3068\u306f\n\nHadoop\u306e\u6982\u5ff5\u56f3\u306f\u3053\u306e\u8cc7\u6599\u306e\u4ee5\u4e0b\u306e2\u3064\u306e\u56f3\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n \n\n\u65e7\u4e16\u4ee3\u3067\u3042\u308bHadoop version1.0\u306e\u7279\u5fb4\n\n\nHDFS(\u5206\u6563File System)\u3068MapReduce(Cluster Resource\u7ba1\u7406 + \u5206\u6563\u51e6\u7406Framework)\u3068\u3044\u30462\u5c64\u69cb\u6210\n\n\n\u73fe\u4e16\u4ee3\u3067\u3042\u308bHadoop version2.0\u306e\u7279\u5fb4\n\n\n\u5206\u6563File System, Cluster Resource\u7ba1\u7406, \u5206\u6563\u51e6\u7406Framework\u304c3\u5c64\u3067\u5206\u96e2\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u72ec\u7acb\u3057\u305fModule\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\nResource\u7ba1\u7406\u306f\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u304f\u306a\u3063\u305f\u306e\u3067\u3001\u69d8\u3005\u306a\u5206\u6563\u51e6\u7406Framework\u304c\u958b\u767a\u3055\u308c\u305f\nCluster Resource\u7ba1\u7406\u3068\u3057\u3066\u6709\u540d\u306a\u306e\u304cYARN\u3084Mesos\n\u5206\u6563\u51e6\u7406Framework\u3068\u3057\u3066\u6709\u540d\u306a\u306e\u304cSpark\u3084Storm\nResource\u7ba1\u7406\u3068\u5206\u6563\u51e6\u7406Framework\u306e\u5206\u96e2\u304c\u51fa\u6765\u305f\u306e\u3067\u30011\u3064\u306eCluster\u4e0a\u3067YARN\u4e0a\u306bSpark/Storm/Map Reduce\u3092\u5171\u5b58\u3055\u305b\u308b\u3001\u3068\u8a00\u3063\u305f\u4e8b\u3082\u53ef\u80fd\n\n\n\n\nSpark\u3068Map Reduce\u306e\u9055\u3044\n\u5206\u6563\u51e6\u7406Framework\u3067\u3042\u308bSpark\u3068Map Reduce\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u9055\u3044\u3092\u6301\u3061\u307e\u3059\u3002\n\nSpark\n\n\n\u51e6\u7406\u4e2d\u306e\u3088\u304f\u4f7f\u3046Data\u3092RAM\u4e0a\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u4e8b\u3067Map Reduce\u306e\u6570\u767e\u500d\u306e\u51e6\u7406\u901f\u5ea6\u304c\u51fa\u305b\u308b(\u4e8b\u304c\u3042\u308b)\n\u540c\u3058Data\u3092\u7e70\u308a\u8fd4\u3057\u4f7f\u3046\u6a5f\u68b0\u5b66\u7fd2\u3067\u306f\u51e6\u7406\u901f\u5ea6\u5411\u4e0a\u306e\u6069\u6075\u3092\u53d7\u3051\u3084\u3059\u3044\n\n\nMap Reduce\n\n\n\u51e6\u7406\u4e2d\u306eData\u3092\u6bce\u56deFile\u306b\u66f8\u304d\u51fa\u3059\u306e\u3067\u3001RAM\u306b\u4e57\u308a\u5207\u3089\u306a\u3044\u69d8\u306a\u5de8\u5927\u306aData\u3092\u6271\u3046\u5834\u5408\u3084\u3001\u5b9a\u578b\u7684\u306aBatch\u51e6\u7406\u306b\u5411\u3044\u3066\u3044\u308b\n\n\n\u305d\u306e\u4ed6\n\n\nMap Reduce\u304c\u4e16\u306b\u51fa\u3066\u304d\u305f\u306e\u304c2004-2006\u5e74\u3050\u3089\u3044\u3001Spark\u304c2010-2013\u5e74\u3050\u3089\u3044\u3001\u601d\u60f3\u306e\u9055\u3044\u306f\u5f53\u6642\u306eComputing resource\u306e\u9055\u3044\u306b\u3082\u8d77\u56e0\u3059\u308b\nSpark\u306fScala\u3001Map Reduce\u306fJava\u304c\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u8a00\u8a9e\u3060\u304c\u3001Python\u3084SQL\u3084R\u306a\u3069\u306e\u8a00\u8a9e\u3067\u4f7f\u3046\u70ba\u306eWrapper\u304c\u5b58\u5728\u3059\u308b\n\u4e0a\u8a18\u306e\u80cc\u666f\u304b\u3089\u3001Spark\u306fMap Reduce\u3092\u300e\u7f6e\u304d\u63db\u3048\u308b\u300f\u3068\u3082\u8a00\u308f\u308c\u308b\u3057\u3001\u300e\u68f2\u307f\u5206\u3051\u3059\u308b\u300f\u3068\u3082\u8a00\u308f\u308c\u308b\n\n\n\n\nSpark\u4e0a\u306e\u4fbf\u5229Library\u7fa4\nSpark\u306f\u5358\u4f53\u3067\u3082\u4f7f\u3048\u307e\u3059\u304c\u3001Spark\u306e\u5206\u6563\u51e6\u7406Framework\u3092\u4f7f\u3044\u3001\u69d8\u3005\u306a\u6a5f\u80fd\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059(\u4ee5\u4e0b\u6709\u540d\u306a\u4f8b)\n\nMLlib(Spark\u4e0a\u3067\u6a5f\u68b0\u5b66\u7fd2\u3092\u884c\u3046)\nSpark Stream(\u79d2\u5358\u4f4d\u306eLatency\u3067Realtime\u5206\u6563\u51e6\u7406\u3092\u884c\u3046)\nSpark SQL(SQL\u306eCode\u3067Spark\u306edata\u3092\u51e6\u7406\u3067\u304d\u308b)\n\n\nAmazon EMR\u3068\u306f\n\nAWS\u4e0a\u3067Hadoop\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\u3089\u308c\u308bManaged\u306aService\u3001\u30af\u30ea\u30c3\u30af1\u3064\u3067100 node\u306eCluster\u69cb\u7bc9\u3001\u3068\u304b\u3082\u5bb9\u6613\u306b\u53ef\u80fd\nSpark/Pig/Hive\u3068\u8a00\u3063\u305f\u6709\u540d\u3069\u3053\u308d\u306eFramework\u3084Library\u3092\u6a19\u6e96\u3067\u30b5\u30dd\u30fc\u30c8\nSpot Instance(\u5f8c\u8ff0)\u3067\u306e\u5229\u7528\u304c\u7c21\u5358\u306b\u884c\u3048\u3001\u901a\u5e38\u306eEC2\u3088\u308a\u3082\u683c\u5b89\u3067(1/10\u304b\u30891/3)\u3067\u904b\u7528\u304c\u53ef\u80fd(\u3046\u307e\u304f\u4f7f\u3048\u3070Redshift\u3088\u308a\u3082\u5b89\u304f\u904b\u7528\u3067\u304d\u308b)\nAmazon S3\u3068\u306e\u9023\u643a\u304c\u697d\u306a\u306e\u3067\u3001S3\u306bData\u3092\u7f6e\u3044\u3066\u304a\u304d\u3001Data size\u306b\u5408\u308f\u305b\u305f\u898f\u6a21\u306eCluster\u8d77\u52d5\u2192S3\u304b\u3089Data\u8aad\u307f\u8fbc\u307f\u2192\u63a2\u7d22\u7684Data\u89e3\u6790\u3092\u884c\u3046\u3001\u3068\u8a00\u3046\u51e6\u7406\u3092\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5b89\u4fa1\u306b\u5b9f\u73fe\u3067\u304d\u308b\n\n\n\u53c2\u8003\u30da\u30fc\u30b8\n\n40\u5206\u3067\u308f\u304b\u308bHadoop\u5fb9\u5e95\u5165\u9580\nAmazon EMR\u306e\u6982\u7565\nMap Reduce\u3068Spark\u306e\u9055\u3044\nSpark\u306e\u57fa\u672c\n\n\nEMR\u4e0a\u3067Spark Cluster\u3092\u8d77\u52d5\u3055\u305b\u308b\n\u307e\u305a\u306fSpark, IPython\u306e\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\u3001IPython\u306eWeb UI\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u8fc4\u306e\u6d41\u308c\u3067\u3059\u3002 \nAWS Console\u304b\u3089\u3001EMR\u2192Create cluster\u2192Go to advanced options\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\n\n\n\u3053\u306eScript\u3092DownLoad\u3057\u3066\u3001S3 bucket\u306bCopy\u3057\u3066\u304a\u304f\n\n\n\u4e2d\u8eab\u306f\u4e0b\u306e\u65b9\u3067\u7c21\u5358\u306b\u7d39\u4ecb\u3057\u307e\u3059\u304c\u3001Jupyter\u306eInstall/Setup/\u8d77\u52d5\u3092\u884c\u3046\u7269\u3067\u3059\nScript\u306fBrowser\u306eDownLoad\u3067\u4fdd\u5b58\u3059\u308b\u4e8b\u3092\u63a8\u5968\u3057\u307e\u3059\u3001Text editor\u306b\u4e00\u65e6\u30b3\u30d4\u30da\u3057\u3066\u4fdd\u5b58\u3059\u308b\u5834\u5408\u306f\u3001\u6539\u884c\u304cLF\u306b\u306a\u308b\u3088\u3046\u306b\u4fdd\u5b58\u3057\u3066\u4e0b\u3055\u3044\n\n\n\u6700\u4f4e\u9650Inbound\u306722(ssh), 80(http), 8080, 8088,9000, 50070, 18080\u304c\u958b\u3044\u3066\u3044\u308bSecurity Group\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\n\n\n\u6700\u521d\u306fInbound\u3082Outbound\u3082\u5168Port\u304c\u958b\u3044\u305fSecurity Group\u3092\u4f5c\u3063\u3066\u304a\u3044\u305f\u65b9\u304c\u60a9\u307e\u305a\u306b\u3059\u307f\u307e\u3059\n\n\n\n\nStep1\u306e\u8a2d\u5b9a\n\n\nInstall\u3059\u308bMiddleware\u3001Option\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u6700\u7d42\u7684\u306b\u4e0a\u306e\u3088\u3046\u306a\u753b\u9762\u306b\u306a\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nSoftware Configuration\n\n\n\nAmazon emr-4.4.0\u3092\u9078\u629e(or \u65b0\u3057\u3044\u7269)\n\u8ffd\u52a0\u3059\u308bSW\u306bHadoop,Ganglia,Spark\u3092\u9078\u629e(\u4ed6\u306fCheck\u5916\u3059)\n\n\nEdit software configuration\n\n\n\u4ee5\u4e0b\u306e\u30aa\u30de\u30b8\u30ca\u30a4\u3092\u8ffd\u52a0\u3001\u30aa\u30de\u30b8\u30ca\u30a4\u306e\u8a73\u7d30\u306fAmazon\u306ePage\u3092\u53c2\u7167\n\n[{\"Classification\": \"spark\", \"Properties\": {\"maximizeResourceAllocation\": \"true\"}}]\n\u3053\u306e\u8a2d\u5b9a\u306f\u3001\u5404node\u306e(CPU\u3068Memory)Resource\u3092\u53ef\u80fd\u306a\u9650\u308a1\u3064\u306eSpark application\u306b\u5272\u308a\u5f53\u3066\u308b\u3001\u3068\u8a00\u3046Spark\u306e\u8a2d\u5b9a\u3067\u3001Cluster\u3092Spark\u3067\u306e\u307f1\u4eba\u3067\u4f7f\u3046\u5834\u5408\u306b\u9069\u3057\u305f\u8a2d\u5b9a\u3067\u3059\n\n\nAdd steps\n\n\nCluster\u521d\u671f\u5316\u5f8c\u306b\u3001\u4e8b\u524d\u6e96\u5099\u3067S3\u306bCopy\u3057\u305fShell script\u3092\u5b9f\u884c\u3057\u3001Jupyter\u7b49\u306eInstall\u3092\u884c\u3046\u70ba\u306e\u8a2d\u5b9a\u3067\u3059\n\u8a73\u7d30\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\n\n\n\n\nAdd steps\u306e\u8a2d\u5b9a\u65b9\u6cd5\n\n\n\nAdd steps\u306eStep type\u3067Custom JAR\u3092\u9078\u629e\u3057\u305f\u72b6\u614b\u3067Configure\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306aDialog\u304c\u51fa\u307e\u3059\n\n\n\n\nJAR location\u306b\u306f\u3001s3://elasticmapreduce/libs/script-runner/script-runner.jar\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 \n\u3053\u306eJAR\u306f\u3001Shell script\u3092\u89e3\u91c8\u3059\u308bAmazon\u8b39\u88fd\u306ejar app\u3067\u3059\n\n\nArguments\u306b\u306f\u3001\u4e8b\u524d\u6e96\u5099\u3067\u4fdd\u5b58\u3057\u305fShell script\u306epath\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070s3://your-S3-bucket/init-jupyter.sh \u306a\u3069\n\n\nStep2\u306e\u8a2d\u5b9a\n\n\nCluster\u306enode(=EC2)\u306e\u7a2e\u985e\u3084\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002Spot instance\u3082\u3053\u3053\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002\n\nSubnet\u306e\u8a2d\u5b9a\n\n\n\u3069\u308c\u3092\u6307\u5b9a\u3057\u3066\u3082\u554f\u984c\u7121\u3044\u3067\u3059\u304c\u30011c\u306e\u65b9\u304c1a\u3088\u308a\u3082Spot instance\u304c\u5b89\u3044\u5834\u5408\u304c\u591a\u3044\u6c17\u304c\u3057\u307e\u3059\n\n\nMaster, core node\u306e\u8a2d\u5b9a\n\n\n\u304a\u8a66\u3057\u306a\u306e\u3067\u3001Master node\u3092m2.xlarge, Core node(=Slave node)\u3092m2.xlarge * 3\u3064\u306b\u8a2d\u5b9a\nSpot instance\u306bCheck\u3092\u4ed8\u3051\u3066\u3001i\u306eicon\u306b\u30de\u30a6\u30b9\u3092\u6301\u3063\u3066\u884c\u304f\u3068\u3001\u305d\u306e\u6642\u306eSpot instance\u306e\u6700\u4f4e\u4fa1\u683c\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u6700\u4f4e\u4fa1\u683c\u3092\u4e0a\u56de\u308b\u4fa1\u683c\u3092Bit price\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\n\n\nSpot instance\u306fBit price\u306e\u5165\u529b\u5024\u304c\u8ab2\u91d1\u3055\u308c\u308b\u300e\u306e\u3067\u306f\u306a\u304f\u300f\u3001\u3042\u304f\u307e\u3067\u6700\u4f4e\u4fa1\u683c\u304c\u8ab2\u91d1\u3055\u308c\u307e\u3059\n\u3053\u306e\u56f3\u306e\u5834\u5408\u3001Bit price\u306f0.025\u30c9\u30eb/h\u3067\u3059\u304c\u3001\u8ab2\u91d1\u306f(\u5909\u52d5\u3057\u306a\u3051\u308c\u3070)ec2 1 instance\u8fba\u308a 0.022\u30c9\u30eb/h\u3067\u3059\u3002\u5168\u4f53\u3067\u306f4 instance\u306a\u306e\u3067\u30010.022 * 4 = 0.088\u30c9\u30eb/h(\u225210.5\u5186/h)\u304c\u8ab2\u91d1\u3055\u308c\u307e\u3059\n\n\n\n\n\n\nStep3\u306e\u8a2d\u5b9a\n\n\nCluster\u540d\u3001Bootstrap action\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\nCluster name\n\n\n\u9069\u5f53\u306b\u540d\u524d\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\n\n\nTermination protection\n\n\n\u30c6\u30b9\u30c8\u306a\u306e\u3067Checkbox\u3092\u5916\u3057\u307e\u3059\n\n\nBootstrap Actions\n\n\nBootstrap actio\u306f\u7279\u306b\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u3067\u3059\u3002\nBootstrap action\u306f\u3001Cluster\u306e\u5404node\u3067\u3001Spark\u7b49\u3092\u7acb\u3061\u4e0a\u3052\u308b\u524d\u306b\u5404\u7a2e\u8a2d\u5b9a\u5909\u66f4\u3084\u8ffd\u52a0Install\u3092\u884c\u3046\u70ba\u306e\u6a5f\u80fd\u3067\u3001\u3088\u304f\u3042\u308b\u4f8b\u306f\u3001Middleware\u306e\u8ffd\u52a0\u3001Network\u7b49\u306e\u8a2d\u5b9a\u5909\u66f4\u3001\u89e3\u6790Data\u3092local\u306bCopy\u3059\u308b\u306a\u3069\u3067\u3059\nBootstrap action\u306f2\u7a2e\u985e\u3042\u308a\u307e\u3059\n\n\n\nCustom action\uff1a\u5168\u3066\u306enode\u3067\u5b9f\u884c\u3055\u308c\u308b\n\nRun if\uff1a\u7279\u5b9a\u6761\u4ef6(\u4f8b\u3048\u3070Master node\u3067\u306e\u307f\u3001\u7b49)\u3067\u5b9f\u884c\u3055\u308c\u308b\n\n\n\n\n\n\nStep4\u306e\u8a2d\u5b9a\n\n\nSecurity\u95a2\u9023\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\n\nEC2 key pair\u3067(\u3053\u3053\u3067\u306f\u4f7f\u3044\u307e\u305b\u3093\u304c)Master node\u306bssh\u3067\u5165\u308b\u5834\u5408\u306eKey pair\u3092\u8a2d\u5b9a\n\nEC2 Security Group\u3067Spark Master node\u306b\u5bfe\u3057\u3066\u306eSecurity Group\u306e\u8a2d\u5b9a\n\n\n\nEC2 Security Group\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Master\u306b\u5bfe\u3057\u3066\u3001Additional security groups\u3092\u8ffd\u52a0\u3059\u308b\u70ba\u306b\u3001\u30da\u30f3\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\n\u4ee5\u4e0b\u306eDialog\u304c\u51fa\u308b\u306e\u3067\u3001\u4e8b\u524d\u6e96\u5099\u3067\u4f5c\u6210\u3057\u305f(\u5404\u7a2ePort\u306e\u958b\u3044\u305f)Security Group\u3092\u9078\u629e\u3057\u3001Assign security groups\u3092\u9078\u629e(\u3053\u306e\u8a2d\u5b9a\u3067\u3001Master node\u306b\u5bfe\u3057\u3001ssh\u3084http\u3067\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u3068\u306a\u308b)\n\n\n\n\n\u5f8c\u306fdefatul\u3067OK\u3067\u3059\u3002Create cluster\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u3001Cluster\u8d77\u52d5\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n\nCluster\u306e\u8d77\u52d5\u306e\u78ba\u8a8d\n\n\nCreate cluster\u3092\u30af\u30ea\u30c3\u30af\u5f8c\u306b\u4e0a\u8a18\u753b\u9762\u306b\u5207\u308a\u66ff\u308f\u308a\u307e\u3059\u3001Master node/Core node\u306eStatus\u304cProvisioning\u2192Bootstrapping\u2192Running\u2192Waiting\u3068\u5909\u308f\u308b\u307e\u3067\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u30015-6\u5206\u304b\u304b\u308a\u307e\u3059\u3002\u307e\u305f\u3001Master node\u306epublic DNS(ec2-52-xxx-xx-xx.ap-northeast-1.compute.amazonaws.com\u307f\u305f\u3044\u306aURL)\u3092\u30e1\u30e2\u3063\u3066\u304a\u304d\u307e\u3059\n\n\u88dc\u8db3\uff1aJupyter\u306e\u8a2d\u5b9aScript\u306b\u3064\u3044\u3066\n\nStep1\u306eAdd steps\u3067\u3001Cluster\u521d\u671f\u5316\u5f8c\u306b\u3001\u6307\u5b9a\u3057\u305fShell script\u3092\u5b9f\u884c\u3057Jupyter\u7b49\u306eInstall\u3092\u884c\u3046\u69d8\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u304c\u3001Script\u306e\u4e2d\u8eab\u3068\u7c21\u5358\u306a\u8aac\u660e\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u306a\u304a\u3001Cluster\u8d77\u52d5\u5f8c\u3001Master node\u306bssh\u3067\u5165\u308a\u3001hadoop user\u3067\u4ee5\u4e0b\u306eScript\u3092\u5b9f\u884c\u3055\u305b\u3066\u3082\u540c\u69d8\u306e\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\nScript\u306e\u4e2d\u8eab\n#Environments\nSPARK_PACKAGES=com.databricks:spark-avro_2.10:2.0.1,com.databricks:spark-csv_2.11:1.4.0\nANACONDA_VERSION=2-2.5.0\nJUPYTER_LOG=/dev/null\n#JUPYTER_LOG=/home/hadoop/.jupyter/jupyter.log\n\nPYENV=~/.pyenv\nPYENV_BIN=$PYENV/bin\n\n\n##Install git and Anaconda\nsudo yum -y install git\ngit clone https://github.com/yyuu/pyenv.git $PYENV\n\necho -e \"\\nexport PYENV_ROOT=$PYENV\" | sudo tee -a ~/.bash_profile  >> /dev/null\necho -e \"\\nexport PATH=$PYENV_BIN:$PATH\" | sudo tee -a ~/.bash_profile  >> /dev/null\necho -e \"\\neval '$($PYENV_BIN/pyenv init -)'\" | sudo tee -a ~/.bash_profile  >> /dev/null\nsource ~/.bash_profile\n\npyenv install -l | grep ana\npyenv install anaconda$ANACONDA_VERSION\npyenv rehash\npyenv global anaconda$ANACONDA_VERSION\n\necho -e \"\\nexport PATH='$PYENV/versions/anaconda$ANACONDA_VERSION/bin/:$PATH'\" | sudo tee -a ~/.bash_profile  >> /dev/null\nsource ~/.bash_profile\nconda update --yes conda\n\n##Install addtional python libraries\nconda install --yes seaborn\n\n\n##Configure Jupyter\nsudo su -l hadoop -c \"jupyter notebook --generate-config\"\n\nJUPYTER_NOTEBOOK_CONFIG=/home/hadoop/.jupyter/jupyter_notebook_config.py\nsudo sed -i -e \"3a c.NotebookApp.ip = '*'\" $JUPYTER_NOTEBOOK_CONFIG\nsudo sed -i -e \"3a c.NotebookApp.open_browser =False\" $JUPYTER_NOTEBOOK_CONFIG\nsudo sed -i -e \"3a c.NotebookApp.port = 8080\" $JUPYTER_NOTEBOOK_CONFIG\nsudo sed -i -e \"3a c = get_config()\" $JUPYTER_NOTEBOOK_CONFIG\n\nIPYTHON_KERNEL_CONFIG=/home/hadoop/.ipython/profile_default/ipython_kernel_config.py\nsudo su -l hadoop -c \"ipython profile create\"\nsudo sed -i -e \"3a c.InteractiveShellApp.matplotlib = 'inline'\" $IPYTHON_KERNEL_CONFIG\n\n\n##Launch Jupyter by executing \"pyspark\"\nJUPYTER_PYSPARK_BIN=/home/hadoop/.jupyter/start-jupyter-pyspark.sh\n\ncat << EOF > $JUPYTER_PYSPARK_BIN\nexport SPARK_HOME=/usr/lib/spark/\nexport PYSPARK_PYTHON=/usr/bin/python\nexport PYSPARK_DRIVER_PYTHON=ipython\nexport PYSPARK_DRIVER_PYTHON_OPTS='notebook'\nexport SPARK_PACKAGES=$SPARK_PACKAGES\nnohup pyspark --packages $SPARK_PACKAGES > $JUPYTER_LOG 2>&1 &\nEOF\n\nchmod +x $JUPYTER_PYSPARK_BIN\n$JUPYTER_PYSPARK_BIN\n\n\n\nScript\u306e\u5185\u5bb9\u88dc\u8db3\n\n\u5168\u4f53\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\n\n\nPython\u306e\u5b9f\u884c\u74b0\u5883\u3068\u3057\u3066Anaconda\u306esetup\nJupyter\u306e\u8a2d\u5b9a\nJupyter\u3092Background\u3067\u5b9f\u884c \n\n\n\nSPARK_PACKAGES\u3067\u3001Spark package\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002Spark package\u306fSpark\u306b\u5404\u7a2e\u4fbf\u5229library\u3092\u8ffd\u52a0\u3067\u304d\u308b\u6a5f\u80fd\u3067\u3059\u3002\u8ffd\u52a0\u304c\u5fc5\u8981\u7121\u3051\u308c\u3070\u3053\u306e\u307e\u307e\u3067\u826f\u3044\u3067\u3059\n\nANACONDA_VERSION\u3067Anaconda\u306eversion\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306fPython2.7 base\u306eAnaconda\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001Python3\u7cfb\u304c\u826f\u3051\u308c\u3070\u3001anaconda3-2.5.0\u306a\u3069\u306b\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\n\nJUPYTER_NOTEBOOK_CONFIG\u306bJupyter Notebook\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306fPort 8080\u3067Jupyter\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u69d8\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n\u6700\u5f8c\u306b\u3001JUPYTER_PYSPARK_BIN\u304b\u3089\u3001nohup pyspark\u3067Jupyter\u3092Backgroud\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\n\nJUPYTER_LOG\u3067\u3001Jupyter\u306eLog\u306e\u51fa\u529b\u5148\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3001Log\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u306f\u3001/dev/null\u4ee5\u5916\u306b\u8a2d\u5b9a\u3057\u3066\u4e0b\u3055\u3044\n\n\nJupyter Web UI\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\n\nChrome/Firefox\u7b49\u306eBrowser\u3067\u3001Master node\u306ePort 8080\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u3060\u3055\u3044 (ec2-52-xxx-xx-xx.ap-northeast-1.compute.amazonaws.com:8080)\u3002\u4ee5\u4e0b\u306e\u69d8\u306aJupyter(IPython Notebook)\u306eWeb UI\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u4eca\u307e\u3067\u306e\u624b\u9806\u304c\u6210\u529f\u3067\u3059(Jupyter\u304c\u52d5\u304d\u59cb\u3081\u308b\u307e\u3067\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3001\u6c17\u9577\u306b\u304a\u5f85\u3061\u4e0b\u3055\u3044)\u3002\n\nJupyter\u306e\u64cd\u4f5c\u65b9\u6cd5\u306f\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u3054\u89a7\u4e0b\u3055\u3044\u3002\n\nEMR\u4e0a\u3067\u306e\u8a2d\u5b9a\u9805\u76ee\u306e\u307e\u3068\u3081\n\nEMR\u4e0a\u3067\u8a2d\u5b9a\u3059\u308b\u3079\u304d\u9805\u76ee\u3092\u632f\u308a\u8fd4\u3063\u3066\u307f\u307e\u3059\u3002EMR\u3067\u306e\u8a2d\u5b9a\u9805\u76ee\u306f\u4ee5\u4e0b\u306e5\u3064\u306b\u5927\u5225\u3055\u308c\u307e\u3059\u3002\n\nCluster\u306e\u7269\u7406\u7684\u306a\u69cb\u6210 (\u5404Node\u306eEC2 Instance\u306e\u7a2e\u985e\u3001Node\u306e\u6570)\nInstall\u3059\u308b\u3079\u304dApplication\u306e\u9078\u629e\u3068\u3001\u500b\u5225\u306eApp\u306e\u521d\u671f\u8a2d\u5b9a(Software settings\u306e\u7b87\u6240) \nBootstrap Action(\u4eca\u56de\u306f\u8a2d\u5b9a\u306f\u7121\u3057)\nSecurity\u95a2\u9023\u306e\u8a2d\u5b9a\nApplication\u8d77\u52d5\u5f8c\u306eJob\u306e\u8a2d\u5b9a\n\n\n\u6700\u5f8c\u306b\n\u7b2c2\u56de\u306e\u8a18\u4e8b\u3067\u306f\u3001\u7acb\u3061\u4e0a\u3052\u305fSpark Cluster\u3092\u4f7f\u3063\u3066\u3001\u4ee5\u4e0b\u306e\u7d39\u4ecb\u3092\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\n\nPyspark\u306e\u7d39\u4ecb\nMLLib\u3092\u4f7f\u3063\u3066Access Log\u3092\u6a5f\u68b0\u5b66\u7fd2\u306b\u304b\u3051\u3066\u307f\u308b\n\u5404\u7a2eMonitoring tool\u306e\u898b\u65b9\n\n\n(\u304a\u307e\u30511) Spot instance\u306b\u3064\u3044\u3066\nSpot instance\u306e\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u304c\u3068\u3066\u3082\u3088\u304f\u7e8f\u307e\u3063\u3066\u3044\u307e\u3059\u3001\u307e\u305a\u306f\u3054\u4e00\u8aad\u3055\u308c\u308b\u3068\u6982\u8981\u304c\u63b4\u3081\u307e\u3059\u3002\n\nAWS\u30b9\u30dd\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u771f\u9ac4\n\u30b9\u30dd\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5b89\u5b9a\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u53d6\u308a\u7d44\u307f\n\n\u4ee5\u4e0b\u3001Spot Instance\u3092\u4f7f\u3063\u3066Spark Cluster\u3092\u904b\u7528\u3059\u308b\u70ba\u306eTips\u3067\u3059\n\nSpot instance\u306e\u5024\u52d5\u304d\u306b\u3064\u3044\u3066\n\n\u3053\u3053\u306b\u3042\u308b\u3088\u3046\u306b\u3001AWS Console\u4e0a\u3067(EC2\u2192Spot Requests\u2192Pricing History)\u3067\u6700\u5927\u904e\u53bb3\u30f6\u6708\u307e\u3067\u306e\u5024\u52d5\u304d\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u5e7e\u3064\u304b\u306eInstance\u306e\u76f4\u8fd1\u306e\u5024\u52d5\u304d\u3092\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u6e67\u304f\u3068\u601d\u3044\u307e\u3059\u3002\u78ba\u8a8d\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u5024\u6bb5\u3001(\u901a\u5e38\u4fa1\u683c\u306b\u5bfe\u3057\u3066\u306e)\u5272\u5f15\u7387\u3068\u3068\u3082\u306b\u3001\u7a81\u767a\u7684\u306a\u5024\u6bb5\u306e\u6025\u9a30\u304c\u983b\u767a\u3057\u3066\u3044\u306a\u3044\u304b\u3001\u3067\u3059\u3002\n\nSpot\u4fa1\u683c\u3092\u5b89\u304f\u3059\u308b\u306b\u306f\n\n\n\u65e7\u4e16\u4ee3\u306eInstance (m2\u3084c1)\u306e\u65b9\u304c\u3001\u73fe\u884c\u4e16\u4ee3(m4\u3084c3)\u3088\u308a\u3082\u5272\u5f15\u7387\u304c\u9ad8\u3044\n\nAZ-a\u3088\u308a\u3082AZ-c\u306e\u65b9\u304c\u5b89\u3044\u5834\u5408\u304c\u591a\u3044\n\n\n\u8ab2\u91d1\u306b\u3064\u3044\u3066\n\n\n\n\u8ab2\u91d1\u984d\u306fBit price\u3067\u306f\u306a\u304f\u3001\u9700\u8981\u4f9b\u7d66\u306b\u3088\u308a\u6c7a\u307e\u308b\"\u5e02\u5834\u4fa1\u683c\"\u3067\u3059\u3001You are charged the Spot market price (not your bid price)...\u3067\u3059\n\nBit price\u306f\u3042\u304f\u307e\u3067\u300e\"\u5e02\u5834\u4fa1\u683c\"\u304c\u305d\u306e\u4fa1\u683c\u4ee5\u5185\u306a\u3089\u652f\u6255\u3046\u300f\u3068\u3044\u3046\u610f\u601d\u8868\u793a\u306b\u904e\u304e\u306a\u3044\n\n\n\u7a81\u767a\u7684\u306a\u5024\u6bb5\u306e\u6025\u9a30\u306b\u3064\u3044\u3066\n\n\n\u6025\u9a30\u306e\u983b\u5ea6\u306f\u3001xlarge\u4ee5\u4e0b\u306f\u6982\u306d\u5c11\u306a\u304f\u30012xlarge\u4ee5\u4e0a\u306f\u3061\u3087\u3044\u3061\u3087\u3044\u304a\u304d\u307e\u3059\n\u7a81\u767a\u7684\u306a\u5024\u6bb5\u306e\u6025\u9a30\u306b\u3088\u308a\u3001\u5e02\u5834\u4fa1\u683c\u304cBit price\u3092\u4e0a\u56de\u308b\u3068\u3001Cluster\u306fTerminate\u3055\u308c\u307e\u3059\n\n\n\u6025\u306bCluster\u306e\u53cd\u5fdc\u304c\u7121\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u306f\u5024\u6bb5\u306e\u6025\u9a30\u3092\u7591\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002Console\u306eCluster list\u4e0a\u306fTerminated with errors Instance failure\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002Cluster\u306e\u8a73\u7d30\u753b\u9762\u3067\u3001Master node was terminated due to an increase in the market price.\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u5024\u6bb5\u306e\u6025\u9a30\u304c\u539f\u56e0\u3067\u3059\nCluster\u3092Spot Instance\u3067\u904b\u7528\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u5fc5\u8981\u306aData\u306fS3\u306b\u5e38\u306b\u5f85\u907f\u3057\u3066\u304a\u304f\u4e8b\u3092\u63a8\u5968\u3057\u307e\u3059\n\u6700\u521d\u306e\u3046\u3061\u306f\u3001Bit price\u306b\u4f59\u88d5\u3092\u6301\u305f\u305b\u3066\u7f6e\u304f\u3068\u5409\u3067\u3059\n\n\n\n\n\u305d\u306e\u4ed6\n\n\nSpark\u306fArch\u7684\u306b\u3001\u9ad8Spec\u306aNode\u304c\u5c11\u6570 > \u4f4eSpec\u306aNode\u304c\u591a\u6570\u306e\u65b9\u304cPerfomance\u304c\u51fa\u308b\u305d\u3046\u3067\u3059\nEC2\u306e\u5404Instance\u306eSpec/\u4fa1\u683c\u306e\u6bd4\u8f03\u306f\u3053\u306e\u30da\u30fc\u30b8\u304c\u7e8f\u307e\u3063\u3066\u3044\u307e\u3059(\u4e00\u756a\u4e0a\u3067Region\u3092\u5909\u66f4\u3059\u308b\u306e\u3092\u304a\u5fd8\u308c\u7121\u304f)\n\n\n\n(\u304a\u307e\u30512) \u983b\u7e41\u306bCluster\u3092\u7acb\u3061\u4e0a\u3052\u308b\u5834\u5408\n\u983b\u7e41\u306bCluster\u3092\u4f5c\u308b\u5834\u5408\u3001Clone\u3092\u4f7f\u3046\u304b\u3001Cluster\u4f5c\u6210\u8a2d\u5b9a\u3092Amazon CLI\u5316\u3059\u308b\u65b9\u6cd5\u304c\u304a\u3059\u3059\u3081\u3067\u3059\u3002Cluster\u306e\u8a73\u7d30\u753b\u9762\u3067\u3001\n\n\nClone\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u5143\u306eCluster\u306e\u4f5c\u6210\u8a2d\u5b9a\u304cDefault\u3067\u5165\u529b\u3055\u308c\u305f\u72b6\u614b\u3067\u3001EMR\u306e\u4f5c\u6210UI\u306b\u306a\u308a\u307e\u3059\n\nAWS CLI export\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u305d\u306eCluster\u8a2d\u5b9a\u3092Amazon CLI\u3068\u3057\u3066Script\u306b\u5410\u304d\u51fa\u3057\u3066\u304f\u308c\u307e\u3059\n\n\n\n(\u304a\u307e\u30513) \u6a19\u6e96\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308bApplication\u306b\u3064\u3044\u3066\nStep1\u3067\u3001Install\u3059\u308bApplication\u306e\u9078\u629e\u3092\u3057\u307e\u3057\u305f\u3002\u4eca\u56de\u306fHadoop,Ganglia,Spark\u306e\u307f\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u304c\u3001\u305d\u308c\u305e\u308c\u306eApp\u306e\u6a5f\u80fd\u306e\u8d85\u6982\u7565\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059(Spark/Ganglia/Zeppelin\u4ee5\u5916\u4f7f\u3063\u305f\u4e8b\u7121\u3044\u3067\u3059)\n\n\n\nHadoop \u307f\u3093\u306a\u5927\u597d\u304dHadoop\u3001\u3053\u308c\u5916\u3059\u3068\u3069\u3046\u306a\u308b\u3093\u3060\u308d?\n\nHive HiveQL\u3068\u3044\u3046SQL\u98a8\u306e\u8a00\u8a9e\u3067Hadoop\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u64cd\u4f5c\u3067\u304d\u308b\n\nMahout Hadoop\u4e0a\u3067\u6a5f\u68b0\u5b66\u7fd2\u3092\u52d5\u304b\u3059Library\u3002\u300e\u30de\u30cf\u30a6\u30c8\u300f\u3068\u8aad\u3080\u3089\u3057\u3044\n\nZeppelin Web base\u306eInteractive\u306aNotebook\u3002\u300e\u30c4\u30a7\u30c3\u30da\u30ea\u30f3\u300f\u3068\u8aad\u3080\u3002IPython\u306e\u7af6\u5408(\u6a5f\u80fd\u6bd4\u8f03\u306f\u3053\u306e\u8a18\u4e8b\u3092\u53c2\u7167)\n\nHue Hadoop\u3092Web UI\u304b\u3089\u52d5\u304b\u3059\u70ba\u306e\u30b5\u30fc\u30d3\u30b9\u3001Job\u3068\u304b\u3082Web UI\u304b\u3089\u8ffd\u52a0\u3067\u304d\u308b\u307f\u305f\u3044\n\n\nGanglia Cluster\u306e(CPU\u3084RAM\u306e)Resource monitoring tool\u3001\u300e\u30ac\u30f3\u30b0\u30ea\u30a2\u300f\u3068\u8aad\u3080\u3002\n\nPresto Hive\u3068\u540c\u3058\u304f\u3001SQL\u98a8\u306e\u8a00\u8a9e\u3067Hadoop\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u64cd\u4f5c\u3067\u304d\u308b\u3002Hive\u3068\u306e\u68f2\u307f\u5206\u3051\u306f\u3053\u3053\u3089\u8fba\u53c2\u7167\n\n\nOozie Hadoop/Spark\u7528\u306eWorkflow design/Scheduling\u306e\u70ba\u306eApp\n\nPig SQL\u306bInspire\u3055\u308c\u305f\u3001Hadoop/Map Reduce\u306eDomain Specific\u8a00\u8a9e/App\u3001\u8907\u96d1\u306a\u51e6\u7406\u3082\u67d4\u8edf\u306b\u304b\u3051\u308b\u3089\u3057\u3044\n\n## \u306f\u3058\u3081\u306b\n\n2015/6\u306bAmazon EMR\u3067[Spark\u304c\u6a19\u6e96\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u307e\u3057\u305f](http://aws.typepad.com/aws_japan/2015/06/apache-spark-on-amazon-emr.html)\u3002\u3053\u308c\u306b\u3088\u308a\u3001EMR\u3067Spark Cluster\u3092\u8d77\u52d5\u3059\u308c\u3070\u3001\u3082\u306e\u306e10\u5206\u3050\u3089\u3044\u3067Spark + IPython\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u304c\u3001AWS Console\u306eEMR\u306e\u8a2d\u5b9aUI\u304c\u5927\u304d\u304f\u5909\u308f\u3063\u305f\u308a\u3001IPython\u304cJupyter\u306b\u306a\u308a\u4e00\u90e8\u8a2d\u5b9a\u65b9\u6cd5\u304c\u5909\u308f\u3063\u305f\u308a\u3001\u305d\u308c\u3089\u306e\u5909\u5316\u306b\u5404\u7a2eDocument\u304c\u8ffd\u5f93\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u308a\u3068\u3001\u8272\u3005\u30cf\u30de\u30c3\u305f\u306e\u3067\u3001\u8a2d\u5b9a\u65b9\u6cd5\u3068\u3001IPython\u4e0a\u3067Pyspark\u3092\u52d5\u304b\u3059\u65b9\u6cd5\u3092\u30c1\u30e9\u30b7\u306e\u88cf\u3057\u3066\u304a\u304d\u307e\u3059(2015/11\u6642\u70b9\u3067\u306e\u60c5\u5831\u3067\u3059)\u3002\n\n\u4ee5\u4e0b\u306e3\u672c\u7acb\u3066\u3067\u30c1\u30e9\u88cf\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\n\n* (\u7b2c1\u56de)Amazon EMR\u4e0a\u3067\u306eSpark Cluster\u306e\u8d77\u52d5/\u8a2d\u5b9a\u65b9\u6cd5 (\u2605\u4eca\u56de\u306f\u30b3\u30b3)\n  * Spark, IPython\u306e\u8a2d\u5b9a\u65b9\u6cd5\n  * Spot instance\u306b\u3064\u3044\u3066\n* [(\u7b2c2\u56de)Spark\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306aAccess Log\u89e3\u6790](http://qiita.com/taka4sato/items/c12bc15336fdfd6868b8)\n  * Access Log\u3092S3\u304b\u3089\u8aad\u307f\u8fbc\u3093\u3067\u3001ETL\u3059\u308b\n  * Access Log\u3092\u4f7f\u3063\u3066\u5b9a\u756a\u306eMAU, DAU, UU\u3092Spark\u3067\u8a08\u7b97\u3057\u3066\u307f\u308b\n  * \u5404\u7a2eMonitoring tool\u306e\u898b\u65b9\n* [(\u7b2c3\u56de)Spark\u3092\u4f7f\u3063\u3066\u7c21\u5358\u306a\u6a5f\u68b0\u5b66\u7fd2](http://qiita.com/taka4sato/items/5c96ae10d02c7d18fd01)\n  * matplotlib/seaborn\u3092\u4f7f\u3063\u3066Graph\u3092\u66f8\u3044\u3066\u307f\u308b\n  * MLLib\u3092\u4f7f\u3063\u3066Access Log\u3092\u6a5f\u68b0\u5b66\u7fd2(K-means, PCA)\u306b\u304b\u3051\u3066\u307f\u308b\n\n\n## \u305d\u3082\u305d\u3082Hadoop\u3068\u304bMap Reduce\u3068\u304bSpark\u3063\u3066\u4f55\u3088?\n\n### \u305d\u3082\u305d\u3082Hadoop\u3068\u306f\n* Hadoop\u306e\u6982\u5ff5\u56f3\u306f[\u3053\u306e\u8cc7\u6599\u306e\u4ee5\u4e0b\u306e2\u3064\u306e\u56f3](http://www.slideshare.net/BenjaminBengfort/fast-data-analytics-with-spark-and-python)\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002   \n<img width=\"300\" alt=\"hadoop1.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/67592/51a4eb6d-be0b-55fc-5c13-44c4c42ad27f.png\"> <img width=\"300\" alt=\"hadoop2.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/67592/8b3eaa70-18aa-13e9-345b-e9ab99b711e2.png\">\n* \u65e7\u4e16\u4ee3\u3067\u3042\u308bHadoop version1.0\u306e\u7279\u5fb4\n  * HDFS(\u5206\u6563File System)\u3068MapReduce(Cluster Resource\u7ba1\u7406 + \u5206\u6563\u51e6\u7406Framework)\u3068\u3044\u30462\u5c64\u69cb\u6210\n* \u73fe\u4e16\u4ee3\u3067\u3042\u308bHadoop version2.0\u306e\u7279\u5fb4\n  * \u5206\u6563File System, Cluster Resource\u7ba1\u7406, \u5206\u6563\u51e6\u7406Framework\u304c3\u5c64\u3067\u5206\u96e2\u3057\u3066\u3001\u305d\u308c\u305e\u308c\u72ec\u7acb\u3057\u305fModule\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\n  * Resource\u7ba1\u7406\u306f\u6c17\u306b\u3057\u306a\u304f\u3066\u826f\u304f\u306a\u3063\u305f\u306e\u3067\u3001\u69d8\u3005\u306a\u5206\u6563\u51e6\u7406Framework\u304c\u958b\u767a\u3055\u308c\u305f\n  * Cluster Resource\u7ba1\u7406\u3068\u3057\u3066\u6709\u540d\u306a\u306e\u304cYARN\u3084Mesos\n  * \u5206\u6563\u51e6\u7406Framework\u3068\u3057\u3066\u6709\u540d\u306a\u306e\u304cSpark\u3084Storm\n  * Resource\u7ba1\u7406\u3068\u5206\u6563\u51e6\u7406Framework\u306e\u5206\u96e2\u304c\u51fa\u6765\u305f\u306e\u3067\u30011\u3064\u306eCluster\u4e0a\u3067YARN\u4e0a\u306bSpark/Storm/Map Reduce\u3092\u5171\u5b58\u3055\u305b\u308b\u3001\u3068\u8a00\u3063\u305f\u4e8b\u3082\u53ef\u80fd\n\n### Spark\u3068Map Reduce\u306e\u9055\u3044\n\u5206\u6563\u51e6\u7406Framework\u3067\u3042\u308bSpark\u3068Map Reduce\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u9055\u3044\u3092\u6301\u3061\u307e\u3059\u3002\n\n* Spark\n  * \u51e6\u7406\u4e2d\u306e\u3088\u304f\u4f7f\u3046Data\u3092RAM\u4e0a\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304f\u4e8b\u3067Map Reduce\u306e\u6570\u767e\u500d\u306e\u51e6\u7406\u901f\u5ea6\u304c\u51fa\u305b\u308b(\u4e8b\u304c\u3042\u308b)\n  * \u540c\u3058Data\u3092\u7e70\u308a\u8fd4\u3057\u4f7f\u3046\u6a5f\u68b0\u5b66\u7fd2\u3067\u306f\u51e6\u7406\u901f\u5ea6\u5411\u4e0a\u306e\u6069\u6075\u3092\u53d7\u3051\u3084\u3059\u3044\n* Map Reduce\n  * \u51e6\u7406\u4e2d\u306eData\u3092\u6bce\u56deFile\u306b\u66f8\u304d\u51fa\u3059\u306e\u3067\u3001RAM\u306b\u4e57\u308a\u5207\u3089\u306a\u3044\u69d8\u306a\u5de8\u5927\u306aData\u3092\u6271\u3046\u5834\u5408\u3084\u3001\u5b9a\u578b\u7684\u306aBatch\u51e6\u7406\u306b\u5411\u3044\u3066\u3044\u308b\n* \u305d\u306e\u4ed6\n  * Map Reduce\u304c\u4e16\u306b\u51fa\u3066\u304d\u305f\u306e\u304c2004-2006\u5e74\u3050\u3089\u3044\u3001Spark\u304c2010-2013\u5e74\u3050\u3089\u3044\u3001\u601d\u60f3\u306e\u9055\u3044\u306f\u5f53\u6642\u306eComputing resource\u306e\u9055\u3044\u306b\u3082\u8d77\u56e0\u3059\u308b\n  * Spark\u306fScala\u3001Map Reduce\u306fJava\u304c\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u8a00\u8a9e\u3060\u304c\u3001Python\u3084SQL\u3084R\u306a\u3069\u306e\u8a00\u8a9e\u3067\u4f7f\u3046\u70ba\u306eWrapper\u304c\u5b58\u5728\u3059\u308b\n  * \u4e0a\u8a18\u306e\u80cc\u666f\u304b\u3089\u3001Spark\u306fMap Reduce\u3092\u300e\u7f6e\u304d\u63db\u3048\u308b\u300f\u3068\u3082\u8a00\u308f\u308c\u308b\u3057\u3001\u300e\u68f2\u307f\u5206\u3051\u3059\u308b\u300f\u3068\u3082\u8a00\u308f\u308c\u308b\n\n### Spark\u4e0a\u306e\u4fbf\u5229Library\u7fa4\nSpark\u306f\u5358\u4f53\u3067\u3082\u4f7f\u3048\u307e\u3059\u304c\u3001Spark\u306e\u5206\u6563\u51e6\u7406Framework\u3092\u4f7f\u3044\u3001\u69d8\u3005\u306a\u6a5f\u80fd\u304c\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059(\u4ee5\u4e0b\u6709\u540d\u306a\u4f8b)\n\n* MLlib(Spark\u4e0a\u3067\u6a5f\u68b0\u5b66\u7fd2\u3092\u884c\u3046)\n* Spark Stream(\u79d2\u5358\u4f4d\u306eLatency\u3067Realtime\u5206\u6563\u51e6\u7406\u3092\u884c\u3046)\n* Spark SQL(SQL\u306eCode\u3067Spark\u306edata\u3092\u51e6\u7406\u3067\u304d\u308b)\n\n### Amazon EMR\u3068\u306f\n\n* AWS\u4e0a\u3067Hadoop\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\u3089\u308c\u308bManaged\u306aService\u3001\u30af\u30ea\u30c3\u30af1\u3064\u3067100 node\u306eCluster\u69cb\u7bc9\u3001\u3068\u304b\u3082\u5bb9\u6613\u306b\u53ef\u80fd\n* Spark/Pig/Hive\u3068\u8a00\u3063\u305f\u6709\u540d\u3069\u3053\u308d\u306eFramework\u3084Library\u3092\u6a19\u6e96\u3067\u30b5\u30dd\u30fc\u30c8\n* Spot Instance(\u5f8c\u8ff0)\u3067\u306e\u5229\u7528\u304c\u7c21\u5358\u306b\u884c\u3048\u3001\u901a\u5e38\u306eEC2\u3088\u308a\u3082\u683c\u5b89\u3067(1/10\u304b\u30891/3)\u3067\u904b\u7528\u304c\u53ef\u80fd(\u3046\u307e\u304f\u4f7f\u3048\u3070Redshift\u3088\u308a\u3082\u5b89\u304f\u904b\u7528\u3067\u304d\u308b)\n* Amazon S3\u3068\u306e\u9023\u643a\u304c\u697d\u306a\u306e\u3067\u3001S3\u306bData\u3092\u7f6e\u3044\u3066\u304a\u304d\u3001Data size\u306b\u5408\u308f\u305b\u305f\u898f\u6a21\u306eCluster\u8d77\u52d5\u2192S3\u304b\u3089Data\u8aad\u307f\u8fbc\u307f\u2192\u63a2\u7d22\u7684Data\u89e3\u6790\u3092\u884c\u3046\u3001\u3068\u8a00\u3046\u51e6\u7406\u3092\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5b89\u4fa1\u306b\u5b9f\u73fe\u3067\u304d\u308b\n\n\n### \u53c2\u8003\u30da\u30fc\u30b8\n* [40\u5206\u3067\u308f\u304b\u308bHadoop\u5fb9\u5e95\u5165\u9580](http://www.slideshare.net/hamaken/hadoop-cloudera-world-tokyo-2014)\n* [Amazon EMR\u306e\u6982\u7565](http://mgi.hatenablog.com/entry/2014/05/04/085148)\n* [Map Reduce\u3068Spark\u306e\u9055\u3044](http://www.casleyconsulting.co.jp/blog-engineer/%E5%88%86%E6%95%A3%E5%87%A6%E7%90%86/%E5%88%86%E6%95%A3%E5%87%A6%E7%90%86%E3%81%AB%E5%85%A5%E9%96%80%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F%EF%BC%88hadoop-spark%EF%BC%89/)\n* [Spark\u306e\u57fa\u672c](http://www.slideshare.net/hadoopxnttdata/apache-spark-spark)\n\n\n## EMR\u4e0a\u3067Spark Cluster\u3092\u8d77\u52d5\u3055\u305b\u308b\n\n\u307e\u305a\u306fSpark, IPython\u306e\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\u3001IPython\u306eWeb UI\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u8fc4\u306e\u6d41\u308c\u3067\u3059\u3002 \nAWS Console\u304b\u3089\u3001`EMR`\u2192`Create cluster`\u2192`Go to advanced options`\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n### **\u4e8b\u524d\u6e96\u5099**\n* [\u3053\u306eScript\u3092DownLoad\u3057\u3066](https://raw.githubusercontent.com/taka4sato/qiita_articles/master/init-jupyter.sh)\u3001S3 bucket\u306bCopy\u3057\u3066\u304a\u304f\n  * \u4e2d\u8eab\u306f\u4e0b\u306e\u65b9\u3067\u7c21\u5358\u306b\u7d39\u4ecb\u3057\u307e\u3059\u304c\u3001Jupyter\u306eInstall/Setup/\u8d77\u52d5\u3092\u884c\u3046\u7269\u3067\u3059\n  * Script\u306fBrowser\u306eDownLoad\u3067\u4fdd\u5b58\u3059\u308b\u4e8b\u3092\u63a8\u5968\u3057\u307e\u3059\u3001Text editor\u306b\u4e00\u65e6\u30b3\u30d4\u30da\u3057\u3066\u4fdd\u5b58\u3059\u308b\u5834\u5408\u306f\u3001\u6539\u884c\u304cLF\u306b\u306a\u308b\u3088\u3046\u306b\u4fdd\u5b58\u3057\u3066\u4e0b\u3055\u3044\n* \u6700\u4f4e\u9650Inbound\u3067`22(ssh)`, `80(http)`, `8080`, `8088`,`9000`, `50070`, `18080`\u304c\u958b\u3044\u3066\u3044\u308bSecurity Group\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\n  * \u6700\u521d\u306fInbound\u3082Outbound\u3082\u5168Port\u304c\u958b\u3044\u305fSecurity Group\u3092\u4f5c\u3063\u3066\u304a\u3044\u305f\u65b9\u304c\u60a9\u307e\u305a\u306b\u3059\u307f\u307e\u3059\n\n### **Step1\u306e\u8a2d\u5b9a**\n![step1.png](https://qiita-image-store.s3.amazonaws.com/0/67592/db410451-f116-ff34-ea2a-c55a4cd786a4.png)\n\nInstall\u3059\u308bMiddleware\u3001Option\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u6700\u7d42\u7684\u306b\u4e0a\u306e\u3088\u3046\u306a\u753b\u9762\u306b\u306a\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n* Software Configuration\n  * `Amazon emr-4.4.0`\u3092\u9078\u629e(or \u65b0\u3057\u3044\u7269)\n  * \u8ffd\u52a0\u3059\u308bSW\u306b`Hadoop`,`Ganglia`,`Spark`\u3092\u9078\u629e(\u4ed6\u306fCheck\u5916\u3059)\n* Edit software configuration\n  * \u4ee5\u4e0b\u306e\u30aa\u30de\u30b8\u30ca\u30a4\u3092\u8ffd\u52a0\u3001[\u30aa\u30de\u30b8\u30ca\u30a4\u306e\u8a73\u7d30\u306fAmazon\u306ePage\u3092\u53c2\u7167](http://docs.aws.amazon.com/ElasticMapReduce/latest/ReleaseGuide/emr-spark-configure.html)\n  * `[{\"Classification\": \"spark\", \"Properties\": {\"maximizeResourceAllocation\": \"true\"}}]`\n  * \u3053\u306e\u8a2d\u5b9a\u306f\u3001\u5404node\u306e(CPU\u3068Memory)Resource\u3092\u53ef\u80fd\u306a\u9650\u308a1\u3064\u306eSpark application\u306b\u5272\u308a\u5f53\u3066\u308b\u3001\u3068\u8a00\u3046Spark\u306e\u8a2d\u5b9a\u3067\u3001Cluster\u3092Spark\u3067\u306e\u307f1\u4eba\u3067\u4f7f\u3046\u5834\u5408\u306b\u9069\u3057\u305f\u8a2d\u5b9a\u3067\u3059\n* Add steps\n  * Cluster\u521d\u671f\u5316\u5f8c\u306b\u3001**\u4e8b\u524d\u6e96\u5099**\u3067S3\u306bCopy\u3057\u305fShell script\u3092\u5b9f\u884c\u3057\u3001Jupyter\u7b49\u306eInstall\u3092\u884c\u3046\u70ba\u306e\u8a2d\u5b9a\u3067\u3059\n  * \u8a73\u7d30\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\n\n##### **Add steps\u306e\u8a2d\u5b9a\u65b9\u6cd5**\n* `Add steps`\u306e`Step type`\u3067`Custom JAR`\u3092\u9078\u629e\u3057\u305f\u72b6\u614b\u3067`Configure`\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306aDialog\u304c\u51fa\u307e\u3059\n\n![customjar.png](https://qiita-image-store.s3.amazonaws.com/0/67592/b9cef1a4-29d0-8a1f-a470-f33d88b2d2b7.png)\n\n* `JAR location`\u306b\u306f\u3001`s3://elasticmapreduce/libs/script-runner/script-runner.jar`\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002 \n  \u3053\u306eJAR\u306f\u3001[Shell script\u3092\u89e3\u91c8\u3059\u308bAmazon\u8b39\u88fd\u306ejar app\u3067\u3059](http://docs.aws.amazon.com/ElasticMapReduce/latest/ReleaseGuide/emr-hadoop-script.html)\n* `Arguments`\u306b\u306f\u3001\u4e8b\u524d\u6e96\u5099\u3067\u4fdd\u5b58\u3057\u305fShell script\u306epath\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4f8b\u3048\u3070`s3://your-S3-bucket/init-jupyter.sh` \u306a\u3069\n\n### **Step2\u306e\u8a2d\u5b9a**\n\n<img width=\"1066\" alt=\"Step2.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/67592/173002d5-f46e-7583-13d5-9f15b7c2eaa2.png\">\n\nCluster\u306enode(=EC2)\u306e\u7a2e\u985e\u3084\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002Spot instance\u3082\u3053\u3053\u3067\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002\n\n* Subnet\u306e\u8a2d\u5b9a\n  * \u3069\u308c\u3092\u6307\u5b9a\u3057\u3066\u3082\u554f\u984c\u7121\u3044\u3067\u3059\u304c\u3001`1c`\u306e\u65b9\u304c`1a`\u3088\u308a\u3082Spot instance\u304c\u5b89\u3044\u5834\u5408\u304c\u591a\u3044\u6c17\u304c\u3057\u307e\u3059\n* Master, core node\u306e\u8a2d\u5b9a\n  * \u304a\u8a66\u3057\u306a\u306e\u3067\u3001Master node\u3092m2.xlarge, Core node(=Slave node)\u3092m2.xlarge * 3\u3064\u306b\u8a2d\u5b9a\n  * Spot instance\u306bCheck\u3092\u4ed8\u3051\u3066\u3001`i`\u306eicon\u306b\u30de\u30a6\u30b9\u3092\u6301\u3063\u3066\u884c\u304f\u3068\u3001\u305d\u306e\u6642\u306eSpot instance\u306e\u6700\u4f4e\u4fa1\u683c\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u6700\u4f4e\u4fa1\u683c\u3092\u4e0a\u56de\u308b\u4fa1\u683c\u3092`Bit price`\u306b\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\n      * Spot instance\u306f`Bit price`\u306e\u5165\u529b\u5024\u304c\u8ab2\u91d1\u3055\u308c\u308b\u300e**\u306e\u3067\u306f\u306a\u304f**\u300f\u3001\u3042\u304f\u307e\u3067\u6700\u4f4e\u4fa1\u683c\u304c\u8ab2\u91d1\u3055\u308c\u307e\u3059\n      * \u3053\u306e\u56f3\u306e\u5834\u5408\u3001`Bit price`\u306f0.025\u30c9\u30eb/h\u3067\u3059\u304c\u3001\u8ab2\u91d1\u306f(\u5909\u52d5\u3057\u306a\u3051\u308c\u3070)ec2 1 instance\u8fba\u308a 0.022\u30c9\u30eb/h\u3067\u3059\u3002\u5168\u4f53\u3067\u306f4 instance\u306a\u306e\u3067\u30010.022 * 4 = 0.088\u30c9\u30eb/h(\u225210.5\u5186/h)\u304c\u8ab2\u91d1\u3055\u308c\u307e\u3059\n\n### **Step3\u306e\u8a2d\u5b9a**\n\n![step2.png](https://qiita-image-store.s3.amazonaws.com/0/67592/568fc623-c7c3-e2d4-b384-357ab0dd4967.png)\n\nCluster\u540d\u3001Bootstrap action\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n* Cluster name\n  * \u9069\u5f53\u306b\u540d\u524d\u3092\u4ed8\u3051\u3066\u304f\u3060\u3055\u3044\n* Termination protection\n  * \u30c6\u30b9\u30c8\u306a\u306e\u3067Checkbox\u3092\u5916\u3057\u307e\u3059\n* Bootstrap Actions\n  * Bootstrap actio\u306f\u7279\u306b\u8a2d\u5b9a\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u3067\u3059\u3002\n  * Bootstrap action\u306f\u3001Cluster\u306e\u5404node\u3067\u3001Spark\u7b49\u3092\u7acb\u3061\u4e0a\u3052\u308b\u524d\u306b\u5404\u7a2e\u8a2d\u5b9a\u5909\u66f4\u3084\u8ffd\u52a0Install\u3092\u884c\u3046\u70ba\u306e\u6a5f\u80fd\u3067\u3001\u3088\u304f\u3042\u308b\u4f8b\u306f\u3001Middleware\u306e\u8ffd\u52a0\u3001Network\u7b49\u306e\u8a2d\u5b9a\u5909\u66f4\u3001\u89e3\u6790Data\u3092local\u306bCopy\u3059\u308b\u306a\u3069\u3067\u3059\n  * Bootstrap action\u306f2\u7a2e\u985e\u3042\u308a\u307e\u3059\n     * `Custom action`\uff1a\u5168\u3066\u306enode\u3067\u5b9f\u884c\u3055\u308c\u308b\n     * `Run if`\uff1a\u7279\u5b9a\u6761\u4ef6(\u4f8b\u3048\u3070Master node\u3067\u306e\u307f\u3001\u7b49)\u3067\u5b9f\u884c\u3055\u308c\u308b\n\n### **Step4\u306e\u8a2d\u5b9a**\n\n![step4.png](https://qiita-image-store.s3.amazonaws.com/0/67592/f30db32a-1b1c-0572-5c02-d07b3206dd8c.png)\n\nSecurity\u95a2\u9023\u306e\u8a2d\u5b9a\u3067\u3059\u3002\n\n* `EC2 key pair`\u3067(\u3053\u3053\u3067\u306f\u4f7f\u3044\u307e\u305b\u3093\u304c)Master node\u306bssh\u3067\u5165\u308b\u5834\u5408\u306eKey pair\u3092\u8a2d\u5b9a\n* `EC2 Security Group`\u3067Spark Master node\u306b\u5bfe\u3057\u3066\u306eSecurity Group\u306e\u8a2d\u5b9a\n  * `EC2 Security Group`\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001`Master`\u306b\u5bfe\u3057\u3066\u3001`Additional security groups`\u3092\u8ffd\u52a0\u3059\u308b\u70ba\u306b\u3001\u30da\u30f3\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\n  * \u4ee5\u4e0b\u306eDialog\u304c\u51fa\u308b\u306e\u3067\u3001\u4e8b\u524d\u6e96\u5099\u3067\u4f5c\u6210\u3057\u305f(\u5404\u7a2ePort\u306e\u958b\u3044\u305f)Security Group\u3092\u9078\u629e\u3057\u3001`Assign security groups`\u3092\u9078\u629e(\u3053\u306e\u8a2d\u5b9a\u3067\u3001Master node\u306b\u5bfe\u3057\u3001ssh\u3084http\u3067\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u3068\u306a\u308b)\n\n![step4-2.png](https://qiita-image-store.s3.amazonaws.com/0/67592/4719e0f2-6728-0e21-6945-0223c1a030e5.png)\n\n\n\u5f8c\u306fdefatul\u3067OK\u3067\u3059\u3002`Create cluster`\u3092\u30af\u30ea\u30c3\u30af\u3059\u308c\u3070\u3001Cluster\u8d77\u52d5\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n\n### **Cluster\u306e\u8d77\u52d5\u306e\u78ba\u8a8d**\n\n<img width=\"1378\" alt=\"step5.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/67592/d7df8e62-e1bf-aec1-d380-0f4607dcf0aa.png\">\n\n`Create cluster`\u3092\u30af\u30ea\u30c3\u30af\u5f8c\u306b\u4e0a\u8a18\u753b\u9762\u306b\u5207\u308a\u66ff\u308f\u308a\u307e\u3059\u3001Master node/Core node\u306eStatus\u304c`Provisioning`\u2192`Bootstrapping`\u2192`Running`\u2192`Waiting`\u3068\u5909\u308f\u308b\u307e\u3067\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u30015-6\u5206\u304b\u304b\u308a\u307e\u3059\u3002\u307e\u305f\u3001Master node\u306epublic DNS(`ec2-52-xxx-xx-xx.ap-northeast-1.compute.amazonaws.com`\u307f\u305f\u3044\u306aURL)\u3092\u30e1\u30e2\u3063\u3066\u304a\u304d\u307e\u3059\n\n### **\u88dc\u8db3\uff1aJupyter\u306e\u8a2d\u5b9aScript\u306b\u3064\u3044\u3066**\n\nStep1\u306eAdd steps\u3067\u3001Cluster\u521d\u671f\u5316\u5f8c\u306b\u3001\u6307\u5b9a\u3057\u305fShell script\u3092\u5b9f\u884c\u3057Jupyter\u7b49\u306eInstall\u3092\u884c\u3046\u69d8\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u304c\u3001Script\u306e\u4e2d\u8eab\u3068\u7c21\u5358\u306a\u8aac\u660e\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u306a\u304a\u3001Cluster\u8d77\u52d5\u5f8c\u3001Master node\u306bssh\u3067\u5165\u308a\u3001`hadoop` user\u3067\u4ee5\u4e0b\u306eScript\u3092\u5b9f\u884c\u3055\u305b\u3066\u3082\u540c\u69d8\u306e\u4e8b\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n##### Script\u306e\u4e2d\u8eab\n```bash\n#Environments\nSPARK_PACKAGES=com.databricks:spark-avro_2.10:2.0.1,com.databricks:spark-csv_2.11:1.4.0\nANACONDA_VERSION=2-2.5.0\nJUPYTER_LOG=/dev/null\n#JUPYTER_LOG=/home/hadoop/.jupyter/jupyter.log\n\nPYENV=~/.pyenv\nPYENV_BIN=$PYENV/bin\n\n\n##Install git and Anaconda\nsudo yum -y install git\ngit clone https://github.com/yyuu/pyenv.git $PYENV\n\necho -e \"\\nexport PYENV_ROOT=$PYENV\" | sudo tee -a ~/.bash_profile  >> /dev/null\necho -e \"\\nexport PATH=$PYENV_BIN:$PATH\" | sudo tee -a ~/.bash_profile  >> /dev/null\necho -e \"\\neval '$($PYENV_BIN/pyenv init -)'\" | sudo tee -a ~/.bash_profile  >> /dev/null\nsource ~/.bash_profile\n\npyenv install -l | grep ana\npyenv install anaconda$ANACONDA_VERSION\npyenv rehash\npyenv global anaconda$ANACONDA_VERSION\n\necho -e \"\\nexport PATH='$PYENV/versions/anaconda$ANACONDA_VERSION/bin/:$PATH'\" | sudo tee -a ~/.bash_profile  >> /dev/null\nsource ~/.bash_profile\nconda update --yes conda\n\n##Install addtional python libraries\nconda install --yes seaborn\n\n\n##Configure Jupyter\nsudo su -l hadoop -c \"jupyter notebook --generate-config\"\n\nJUPYTER_NOTEBOOK_CONFIG=/home/hadoop/.jupyter/jupyter_notebook_config.py\nsudo sed -i -e \"3a c.NotebookApp.ip = '*'\" $JUPYTER_NOTEBOOK_CONFIG\nsudo sed -i -e \"3a c.NotebookApp.open_browser =False\" $JUPYTER_NOTEBOOK_CONFIG\nsudo sed -i -e \"3a c.NotebookApp.port = 8080\" $JUPYTER_NOTEBOOK_CONFIG\nsudo sed -i -e \"3a c = get_config()\" $JUPYTER_NOTEBOOK_CONFIG\n\nIPYTHON_KERNEL_CONFIG=/home/hadoop/.ipython/profile_default/ipython_kernel_config.py\nsudo su -l hadoop -c \"ipython profile create\"\nsudo sed -i -e \"3a c.InteractiveShellApp.matplotlib = 'inline'\" $IPYTHON_KERNEL_CONFIG\n\n\n##Launch Jupyter by executing \"pyspark\"\nJUPYTER_PYSPARK_BIN=/home/hadoop/.jupyter/start-jupyter-pyspark.sh\n\ncat << EOF > $JUPYTER_PYSPARK_BIN\nexport SPARK_HOME=/usr/lib/spark/\nexport PYSPARK_PYTHON=/usr/bin/python\nexport PYSPARK_DRIVER_PYTHON=ipython\nexport PYSPARK_DRIVER_PYTHON_OPTS='notebook'\nexport SPARK_PACKAGES=$SPARK_PACKAGES\nnohup pyspark --packages $SPARK_PACKAGES > $JUPYTER_LOG 2>&1 &\nEOF\n\nchmod +x $JUPYTER_PYSPARK_BIN\n$JUPYTER_PYSPARK_BIN\n\n```\n\n##### Script\u306e\u5185\u5bb9\u88dc\u8db3\n* \u5168\u4f53\u3068\u3057\u3066\u4ee5\u4e0b\u306e\u6d41\u308c\u306b\u306a\u308a\u307e\u3059\n  * [Python\u306e\u5b9f\u884c\u74b0\u5883\u3068\u3057\u3066Anaconda\u306esetup](http://qiita.com/y__sama/items/5b62d31cb7e6ed50f02c)\n  * Jupyter\u306e\u8a2d\u5b9a\n  * Jupyter\u3092Background\u3067\u5b9f\u884c \n* `SPARK_PACKAGES`\u3067\u3001[Spark package](http://spark-packages.org/)\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002Spark package\u306fSpark\u306b\u5404\u7a2e\u4fbf\u5229library\u3092\u8ffd\u52a0\u3067\u304d\u308b\u6a5f\u80fd\u3067\u3059\u3002\u8ffd\u52a0\u304c\u5fc5\u8981\u7121\u3051\u308c\u3070\u3053\u306e\u307e\u307e\u3067\u826f\u3044\u3067\u3059\n* `ANACONDA_VERSION`\u3067Anaconda\u306eversion\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306fPython2.7 base\u306eAnaconda\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u304c\u3001Python3\u7cfb\u304c\u826f\u3051\u308c\u3070\u3001`anaconda3-2.5.0`\u306a\u3069\u306b\u5909\u66f4\u3057\u3066\u4e0b\u3055\u3044\n* `JUPYTER_NOTEBOOK_CONFIG`\u306bJupyter Notebook\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u306fPort 8080\u3067Jupyter\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u69d8\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n* \u6700\u5f8c\u306b\u3001`JUPYTER_PYSPARK_BIN`\u304b\u3089\u3001`nohup pyspark`\u3067Jupyter\u3092Backgroud\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\n* `JUPYTER_LOG`\u3067\u3001Jupyter\u306eLog\u306e\u51fa\u529b\u5148\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3001Log\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u306f\u3001`/dev/null`\u4ee5\u5916\u306b\u8a2d\u5b9a\u3057\u3066\u4e0b\u3055\u3044\n\n### **Jupyter Web UI\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b**\nChrome/Firefox\u7b49\u306eBrowser\u3067\u3001Master node\u306ePort 8080\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u3060\u3055\u3044 (`ec2-52-xxx-xx-xx.ap-northeast-1.compute.amazonaws.com:8080`)\u3002\u4ee5\u4e0b\u306e\u69d8\u306aJupyter(IPython Notebook)\u306eWeb UI\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u4eca\u307e\u3067\u306e\u624b\u9806\u304c\u6210\u529f\u3067\u3059(Jupyter\u304c\u52d5\u304d\u59cb\u3081\u308b\u307e\u3067\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u3001\u6c17\u9577\u306b\u304a\u5f85\u3061\u4e0b\u3055\u3044)\u3002\n\n<img width=\"881\" alt=\"jupyter.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/67592/2aee2a3c-d6ab-942c-da2d-fe29d6fcd30e.png\">\n\nJupyter\u306e\u64cd\u4f5c\u65b9\u6cd5\u306f\u3001[\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u3054\u89a7\u4e0b\u3055\u3044](http://qiita.com/taka4sato/items/2c3397ff34c440044978)\u3002\n\n\n### **EMR\u4e0a\u3067\u306e\u8a2d\u5b9a\u9805\u76ee\u306e\u307e\u3068\u3081**\nEMR\u4e0a\u3067\u8a2d\u5b9a\u3059\u308b\u3079\u304d\u9805\u76ee\u3092\u632f\u308a\u8fd4\u3063\u3066\u307f\u307e\u3059\u3002EMR\u3067\u306e\u8a2d\u5b9a\u9805\u76ee\u306f\u4ee5\u4e0b\u306e5\u3064\u306b\u5927\u5225\u3055\u308c\u307e\u3059\u3002\n\n1. Cluster\u306e\u7269\u7406\u7684\u306a\u69cb\u6210 (\u5404Node\u306eEC2 Instance\u306e\u7a2e\u985e\u3001Node\u306e\u6570)\n1. Install\u3059\u308b\u3079\u304dApplication\u306e\u9078\u629e\u3068\u3001\u500b\u5225\u306eApp\u306e\u521d\u671f\u8a2d\u5b9a(Software settings\u306e\u7b87\u6240) \n1. Bootstrap Action(\u4eca\u56de\u306f\u8a2d\u5b9a\u306f\u7121\u3057)\n1. Security\u95a2\u9023\u306e\u8a2d\u5b9a\n1. Application\u8d77\u52d5\u5f8c\u306eJob\u306e\u8a2d\u5b9a\n\n\n## \u6700\u5f8c\u306b\n[\u7b2c2\u56de\u306e\u8a18\u4e8b](http://qiita.com/taka4sato/items/c12bc15336fdfd6868b8)\u3067\u306f\u3001\u7acb\u3061\u4e0a\u3052\u305fSpark Cluster\u3092\u4f7f\u3063\u3066\u3001\u4ee5\u4e0b\u306e\u7d39\u4ecb\u3092\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\n\n* Pyspark\u306e\u7d39\u4ecb\n* MLLib\u3092\u4f7f\u3063\u3066Access Log\u3092\u6a5f\u68b0\u5b66\u7fd2\u306b\u304b\u3051\u3066\u307f\u308b\n* \u5404\u7a2eMonitoring tool\u306e\u898b\u65b9\n\n\n\n## (\u304a\u307e\u30511) Spot instance\u306b\u3064\u3044\u3066\n\nSpot instance\u306e\u8a73\u7d30\u306f\u4ee5\u4e0b\u306e\u8a18\u4e8b\u304c\u3068\u3066\u3082\u3088\u304f\u7e8f\u307e\u3063\u3066\u3044\u307e\u3059\u3001\u307e\u305a\u306f\u3054\u4e00\u8aad\u3055\u308c\u308b\u3068\u6982\u8981\u304c\u63b4\u3081\u307e\u3059\u3002\n\n* [AWS\u30b9\u30dd\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u771f\u9ac4](http://www.slideshare.net/GedowFather/gedow-style-aws-spot-instance)\n* [\u30b9\u30dd\u30c3\u30c8\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5b89\u5b9a\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u53d6\u308a\u7d44\u307f](http://qiita.com/megadreams14/items/766ce04ca6cb418e95ca)\n\n\u4ee5\u4e0b\u3001Spot Instance\u3092\u4f7f\u3063\u3066Spark Cluster\u3092\u904b\u7528\u3059\u308b\u70ba\u306eTips\u3067\u3059\n\n##### **Spot instance\u306e\u5024\u52d5\u304d\u306b\u3064\u3044\u3066**\n[\u3053\u3053\u306b\u3042\u308b\u3088\u3046\u306b](http://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/using-spot-instances-history.html)\u3001AWS Console\u4e0a\u3067(`EC2`\u2192`Spot Requests`\u2192`Pricing History`)\u3067\u6700\u5927\u904e\u53bb3\u30f6\u6708\u307e\u3067\u306e\u5024\u52d5\u304d\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u5e7e\u3064\u304b\u306eInstance\u306e\u76f4\u8fd1\u306e\u5024\u52d5\u304d\u3092\u307f\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u306e\u30a4\u30e1\u30fc\u30b8\u304c\u6e67\u304f\u3068\u601d\u3044\u307e\u3059\u3002\u78ba\u8a8d\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u5024\u6bb5\u3001(\u901a\u5e38\u4fa1\u683c\u306b\u5bfe\u3057\u3066\u306e)\u5272\u5f15\u7387\u3068\u3068\u3082\u306b\u3001\u7a81\u767a\u7684\u306a\u5024\u6bb5\u306e\u6025\u9a30\u304c\u983b\u767a\u3057\u3066\u3044\u306a\u3044\u304b\u3001\u3067\u3059\u3002\n\n##### **Spot\u4fa1\u683c\u3092\u5b89\u304f\u3059\u308b\u306b\u306f**\n* \u65e7\u4e16\u4ee3\u306eInstance (m2\u3084c1)\u306e\u65b9\u304c\u3001\u73fe\u884c\u4e16\u4ee3(m4\u3084c3)\u3088\u308a\u3082\u5272\u5f15\u7387\u304c\u9ad8\u3044  \n* AZ-a\u3088\u308a\u3082AZ-c\u306e\u65b9\u304c\u5b89\u3044\u5834\u5408\u304c\u591a\u3044\n\n##### **\u8ab2\u91d1\u306b\u3064\u3044\u3066**\n* [\u8ab2\u91d1\u984d\u306fBit price\u3067\u306f\u306a\u304f\u3001\u9700\u8981\u4f9b\u7d66\u306b\u3088\u308a\u6c7a\u307e\u308b\"\u5e02\u5834\u4fa1\u683c\"\u3067\u3059](https://aws.amazon.com/ec2/spot/pricing/)\u3001`You are charged the Spot market price (not your bid price)...`\u3067\u3059\n* `Bit price`\u306f\u3042\u304f\u307e\u3067\u300e\"\u5e02\u5834\u4fa1\u683c\"\u304c\u305d\u306e\u4fa1\u683c\u4ee5\u5185\u306a\u3089\u652f\u6255\u3046\u300f\u3068\u3044\u3046\u610f\u601d\u8868\u793a\u306b\u904e\u304e\u306a\u3044\n\n##### **\u7a81\u767a\u7684\u306a\u5024\u6bb5\u306e\u6025\u9a30\u306b\u3064\u3044\u3066**\n* \u6025\u9a30\u306e\u983b\u5ea6\u306f\u3001xlarge\u4ee5\u4e0b\u306f\u6982\u306d\u5c11\u306a\u304f\u30012xlarge\u4ee5\u4e0a\u306f\u3061\u3087\u3044\u3061\u3087\u3044\u304a\u304d\u307e\u3059\n* \u7a81\u767a\u7684\u306a\u5024\u6bb5\u306e\u6025\u9a30\u306b\u3088\u308a\u3001\u5e02\u5834\u4fa1\u683c\u304cBit price\u3092\u4e0a\u56de\u308b\u3068\u3001Cluster\u306fTerminate\u3055\u308c\u307e\u3059\n  * \u6025\u306bCluster\u306e\u53cd\u5fdc\u304c\u7121\u304f\u306a\u3063\u305f\u5834\u5408\u306b\u306f\u5024\u6bb5\u306e\u6025\u9a30\u3092\u7591\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002Console\u306eCluster list\u4e0a\u306f`Terminated with errors Instance failure`\u3068\u8868\u793a\u3055\u308c\u307e\u3059\u3002Cluster\u306e\u8a73\u7d30\u753b\u9762\u3067\u3001`Master node was terminated due to an increase in the market price.`\u3068\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3089\u3001\u5024\u6bb5\u306e\u6025\u9a30\u304c\u539f\u56e0\u3067\u3059\n  * Cluster\u3092Spot Instance\u3067\u904b\u7528\u3059\u308b\u306e\u3067\u3042\u308c\u3070\u3001\u5fc5\u8981\u306aData\u306fS3\u306b\u5e38\u306b\u5f85\u907f\u3057\u3066\u304a\u304f\u4e8b\u3092\u63a8\u5968\u3057\u307e\u3059\n  * \u6700\u521d\u306e\u3046\u3061\u306f\u3001Bit price\u306b\u4f59\u88d5\u3092\u6301\u305f\u305b\u3066\u7f6e\u304f\u3068\u5409\u3067\u3059\n\n##### **\u305d\u306e\u4ed6**\n* Spark\u306fArch\u7684\u306b\u3001`\u9ad8Spec\u306aNode\u304c\u5c11\u6570 > \u4f4eSpec\u306aNode\u304c\u591a\u6570`\u306e\u65b9\u304cPerfomance\u304c\u51fa\u308b\u305d\u3046\u3067\u3059\n* EC2\u306e\u5404Instance\u306eSpec/\u4fa1\u683c\u306e\u6bd4\u8f03\u306f[\u3053\u306e\u30da\u30fc\u30b8\u304c\u7e8f\u307e\u3063\u3066\u3044\u307e\u3059(\u4e00\u756a\u4e0a\u3067Region\u3092\u5909\u66f4\u3059\u308b\u306e\u3092\u304a\u5fd8\u308c\u7121\u304f)](http://www.ec2instances.info/)\n\n## (\u304a\u307e\u30512) \u983b\u7e41\u306bCluster\u3092\u7acb\u3061\u4e0a\u3052\u308b\u5834\u5408\n\u983b\u7e41\u306bCluster\u3092\u4f5c\u308b\u5834\u5408\u3001Clone\u3092\u4f7f\u3046\u304b\u3001Cluster\u4f5c\u6210\u8a2d\u5b9a\u3092Amazon CLI\u5316\u3059\u308b\u65b9\u6cd5\u304c\u304a\u3059\u3059\u3081\u3067\u3059\u3002Cluster\u306e\u8a73\u7d30\u753b\u9762\u3067\u3001\n\n* `Clone`\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u5143\u306eCluster\u306e\u4f5c\u6210\u8a2d\u5b9a\u304cDefault\u3067\u5165\u529b\u3055\u308c\u305f\u72b6\u614b\u3067\u3001EMR\u306e\u4f5c\u6210UI\u306b\u306a\u308a\u307e\u3059\n* `AWS CLI export`\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u305d\u306eCluster\u8a2d\u5b9a\u3092Amazon CLI\u3068\u3057\u3066Script\u306b\u5410\u304d\u51fa\u3057\u3066\u304f\u308c\u307e\u3059\n\n![clone_cli.png](https://qiita-image-store.s3.amazonaws.com/0/67592/d1efc5c0-0bb6-c0fe-4ae6-1b491ca4403b.png)\n\n\n## (\u304a\u307e\u30513) \u6a19\u6e96\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u308bApplication\u306b\u3064\u3044\u3066\n\nStep1\u3067\u3001Install\u3059\u308bApplication\u306e\u9078\u629e\u3092\u3057\u307e\u3057\u305f\u3002\u4eca\u56de\u306f`Hadoop`,`Ganglia`,`Spark`\u306e\u307f\u3092\u9078\u629e\u3057\u307e\u3057\u305f\u304c\u3001\u305d\u308c\u305e\u308c\u306eApp\u306e\u6a5f\u80fd\u306e\u8d85\u6982\u7565\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059(Spark/Ganglia/Zeppelin\u4ee5\u5916\u4f7f\u3063\u305f\u4e8b\u7121\u3044\u3067\u3059)\n\n<img width=\"934\" alt=\"Step1.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/67592/0caef4a5-de28-5f90-565f-b6e9ca3d7751.png\">\n\n* **Hadoop** \u307f\u3093\u306a\u5927\u597d\u304dHadoop\u3001\u3053\u308c\u5916\u3059\u3068\u3069\u3046\u306a\u308b\u3093\u3060\u308d?\n* **Hive** HiveQL\u3068\u3044\u3046SQL\u98a8\u306e\u8a00\u8a9e\u3067Hadoop\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u64cd\u4f5c\u3067\u304d\u308b\n* **Mahout** Hadoop\u4e0a\u3067\u6a5f\u68b0\u5b66\u7fd2\u3092\u52d5\u304b\u3059Library\u3002\u300e\u30de\u30cf\u30a6\u30c8\u300f\u3068\u8aad\u3080\u3089\u3057\u3044\n* **Zeppelin** Web base\u306eInteractive\u306aNotebook\u3002\u300e\u30c4\u30a7\u30c3\u30da\u30ea\u30f3\u300f\u3068\u8aad\u3080\u3002IPython\u306e\u7af6\u5408([\u6a5f\u80fd\u6bd4\u8f03\u306f\u3053\u306e\u8a18\u4e8b\u3092\u53c2\u7167](http://x1.inkenkun.com/archives/1015))\n* **Hue** Hadoop\u3092Web UI\u304b\u3089\u52d5\u304b\u3059\u70ba\u306e\u30b5\u30fc\u30d3\u30b9\u3001[Job\u3068\u304b\u3082Web UI\u304b\u3089\u8ffd\u52a0\u3067\u304d\u308b\u307f\u305f\u3044](http://tkdmah.hatenablog.com/entry/2013/06/15/005008)\n* **Ganglia** Cluster\u306e(CPU\u3084RAM\u306e)Resource monitoring tool\u3001\u300e\u30ac\u30f3\u30b0\u30ea\u30a2\u300f\u3068\u8aad\u3080\u3002\n* **Presto** Hive\u3068\u540c\u3058\u304f\u3001SQL\u98a8\u306e\u8a00\u8a9e\u3067Hadoop\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u64cd\u4f5c\u3067\u304d\u308b\u3002[Hive\u3068\u306e\u68f2\u307f\u5206\u3051\u306f\u3053\u3053\u3089\u8fba\u53c2\u7167](http://blog-jp.treasuredata.com/entry/2014/07/10/150250)\n* **Oozie** Hadoop/Spark\u7528\u306eWorkflow design/Scheduling\u306e\u70ba\u306eApp\n* **Pig** SQL\u306bInspire\u3055\u308c\u305f\u3001Hadoop/Map Reduce\u306eDomain Specific\u8a00\u8a9e/App\u3001\u8907\u96d1\u306a\u51e6\u7406\u3082\u67d4\u8edf\u306b\u304b\u3051\u308b\u3089\u3057\u3044\n", "tags": ["Spark", "EMR", "ipython_notebook", "Jupyter"]}