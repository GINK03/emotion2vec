{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u3042\u308b\u753b\u50cf\u3092\u8907\u6570\u306e\u753b\u50cf\u3068\u30b0\u30ec\u30fc\u30b9\u30b1\u30fc\u30eb\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3067\u6bd4\u8f03\u3059\u308b\u6a5f\u80fd\u3092Python\u3067\u4f5c\u3063\u3066\u307f\u305f\u6642\u306e\u30e1\u30e2\n\n\u74b0\u5883\n\nPython 2.7.9\nPyenv anaconda-2.1.0\nopencv 2.4.8 ( conda\u306b\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb )\n\n\n\u5b9f\u88c5\n\nimage_compare.py\n\nimport cv2\n\ndef matching(self):\n\n    im = cv2.imread('/to/image/path/image.jpg', cv2.IMREAD_GRAYSCALE) # \u6bd4\u8f03\u3059\u308bImageFile\n    image_hist = cv2.calcHist([im], [0], None, [256], [0, 256])\n\n    target = self.compare_target_hist(image_hist)\n\n    result = []\n\n    while True:\n        try:\n            result.append(target.next())\n\n        except StopIteration:\n            break\n\n    result.sort(reverse=True)\n\n    return result[0][1]\n\n# \u6bd4\u8f03\u3055\u308c\u308bImageFile\ndef gen_target(self):\n    yield \"to/image/path/4.jpg\"\n    yield \"to/image/path/3.jpg\"\n    yield \"to/image/path/5.jpg\"\n    yield \"to/image/path/2.jpg\"\n    yield \"to/image/path/1.jpg\"\n\ndef compare_target_hist(self, image_hist):\n\n    target_files = self.gen_target()\n\n    while True:\n        try:\n            target_file = target_files.next()\n            im = cv2.imread(target_file, cv2.IMREAD_GRAYSCALE)\n            target_hist = cv2.calcHist([im], [0], None, [256], [0, 256])\n            yield (self.compare_hist(image_hist, target_hist), target_file)\n\n        except StopIteration:\n            break\n\n# \u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3092\u6bd4\u8f03\u306e\u8a08\u7b97\u3092\u3057\u3066\u3044\u308b\ndef compare_hist(self, hist1, hist2):\n    total = 0\n    for i in range(len(hist1)):\n        total += min(hist1[i], hist2[i])\n    return float(total) / sum(hist1)\n\n\nif __name__ == '__main__':\n    matching()\n\n\n\n## \u6982\u8981\n\u3042\u308b\u753b\u50cf\u3092\u8907\u6570\u306e\u753b\u50cf\u3068\u30b0\u30ec\u30fc\u30b9\u30b1\u30fc\u30eb\u306e\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3067\u6bd4\u8f03\u3059\u308b\u6a5f\u80fd\u3092Python\u3067\u4f5c\u3063\u3066\u307f\u305f\u6642\u306e\u30e1\u30e2\n\n## \u74b0\u5883\n- Python 2.7.9\n\n- Pyenv anaconda-2.1.0\n\n- opencv 2.4.8 ( conda\u306b\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb )\n\n\n## \u5b9f\u88c5\n\n```python:image_compare.py\n\nimport cv2\n\ndef matching(self):\n\n    im = cv2.imread('/to/image/path/image.jpg', cv2.IMREAD_GRAYSCALE) # \u6bd4\u8f03\u3059\u308bImageFile\n    image_hist = cv2.calcHist([im], [0], None, [256], [0, 256])\n\n    target = self.compare_target_hist(image_hist)\n\n    result = []\n\n    while True:\n        try:\n            result.append(target.next())\n\n        except StopIteration:\n            break\n\n    result.sort(reverse=True)\n\n    return result[0][1]\n\n# \u6bd4\u8f03\u3055\u308c\u308bImageFile\ndef gen_target(self):\n    yield \"to/image/path/4.jpg\"\n    yield \"to/image/path/3.jpg\"\n    yield \"to/image/path/5.jpg\"\n    yield \"to/image/path/2.jpg\"\n    yield \"to/image/path/1.jpg\"\n\ndef compare_target_hist(self, image_hist):\n\n    target_files = self.gen_target()\n\n    while True:\n        try:\n            target_file = target_files.next()\n            im = cv2.imread(target_file, cv2.IMREAD_GRAYSCALE)\n            target_hist = cv2.calcHist([im], [0], None, [256], [0, 256])\n            yield (self.compare_hist(image_hist, target_hist), target_file)\n\n        except StopIteration:\n            break\n\n# \u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3092\u6bd4\u8f03\u306e\u8a08\u7b97\u3092\u3057\u3066\u3044\u308b\ndef compare_hist(self, hist1, hist2):\n    total = 0\n    for i in range(len(hist1)):\n        total += min(hist1[i], hist2[i])\n    return float(total) / sum(hist1)\n\n\nif __name__ == '__main__':\n    matching()\n```\n\n", "tags": ["\u753b\u50cf\u89e3\u6790", "OpenCV", "Python"]}