{"context": "\n\n\u306f\u3058\u3081\u306b\nAzure Functions\u3092\u4f7f\u3063\u3066\u30aa\u30a6\u30e0\u8fd4\u3057\u3059\u308bLINE\u306ebot\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f50\u884c\u7a0b\u5ea6\u3067\u3057\u305f(Node.js\uff09\u3002\n\n\nAzure Functions\u3092\u4f7f\u3046\u7406\u7531\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u306b\u3042\u308b\u3088\u3046\u306b\u3001BOT\u5b9f\u88c5\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u3057\u3066\u306f\u975e\u540c\u671f\u51e6\u7406\u304c\u7406\u60f3\u7684\u3067\u3059\u3002\n\u5b9f\u904b\u7528\u306b\u5411\u3051\u305fLINE BOT\u30b5\u30fc\u30d0\u306e\u5b9f\u88c5\u4f8b\n\u5927\u91cf\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6765\u3066\u3082\u5b89\u5fc3\u306aLINE BOT\u30b5\u30fc\u30d0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u73fe\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306a\u3069\u3092\u4e00\u5ea6Queue\u306b\u683c\u7d0d\u3057\u3066\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u306f\u5225\u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u3067\u51e6\u7406\u3092\u3055\u305b\u308b\u5b9f\u88c5\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\nAzure Functions\u3067\u306fQueue\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308bAzureStorage\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u3066\u3001\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u3060\u3051\u3067\u52dd\u624b\u306b\u975e\u540c\u671f\u51e6\u7406\u304c\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\nAzure Functions\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3067\u3068\u3066\u3082\u8a73\u3057\u304f\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3055\u30fc\u3070\u30fc\u308c\u3059 \u3042\u30fc\u304d\u3066\u304f\u3061\u3083\u2026\uff1f\u3000-Azure Functions\u3067\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u4f55\u304b\u3092\u7406\u89e3\u3059\u308b\u8a18\u4e8b\n\n\u5fc5\u8981\u306a\u3082\u306e\n\nLINE API\u306e\u5229\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\nGitHub\u30a2\u30ab\u30a6\u30f3\u30c8\nAzure\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\n\n\u4e0a\u8a18\u306e\uff13\u3064\u304c\u63c3\u3063\u3066\u3044\u305f\u3089\u3001\uff15\u5206\u7a0b\u5ea6\u3067BOT\u304cDeploy\u3067\u304d\u307e\u3059\u3002\n\n\u4e0d\u8981\u306a\u3082\u306e\n\n\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n\u30a8\u30c7\u30a3\u30bf\n\nGitHub\u304b\u3089Azure\u3078\u76f4\u63a5deploy\u3059\u308b\u306e\u3067\u4e0a\u8a18\u306f\u4e0d\u8981\u3067\u3059\u3002\n\n\u624b\u9806\n\nLINE API\u306e\u5229\u7528\u767b\u9332\nLINE\u3067Bot\u3092\u4f5c\u308b\u305f\u3081\u306b\u306fAPI\u5229\u7528\u306e\u767b\u9332\u304c\u5fc5\u8981\u3067\u3059\u3002\nMessaging API\u306e\u3054\u7d39\u4ecb | LINE Business Center\n\u300cChannel Access Token\u300d\u306e\u6587\u5b57\u5217\u304c\u5fc5\u8981\u306a\u306e\u3067\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\nMicrosoft Azure\u306e\u30c8\u30e9\u30a4\u30a2\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\nAzure\u3092\u8a66\u7528\u3059\u308b\u306b\u306f\u5e7e\u3064\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u79c1\u304c\u5229\u7528\u3057\u305f\u306e\u306fVisual Studio Dev Essentials\u3068\u3044\u3046\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u4e00\u5e74\u9593\u3001\u6bce\u6708\u4e00\u5b9a\u984d\u307e\u3067\u7121\u6599\u67a0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nVisual Studio Dev Essentials | Microsoft Azure\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\u3053\u3061\u3089\u3067\u516c\u958b\u3057\u3066\u307e\u3059\u3002\nhttps://github.com/yorifuji/azure-functions-line-echo-bot\n\nHttpTriggerNodeJS1/index.js\nmodule.exports = function(context, req) {\n    context.log('Node.js HTTP trigger function processed a request. RequestUri=%s', req.originalUrl);\n\n    context.bindings.outputQueueItem = req.body;\n\n    context.res = { body : \"\" };\n    context.done();\n};\n\n\n\nQueueTriggerNodeJS1/index.js\nmodule.exports = function (context, myQueueItem) {\n    context.log('Node.js queue trigger function processed work item', myQueueItem);\n\n    context.bindings.outputQueueItem = myQueueItem;\n\n    context.done();\n};\n\n\n\nQueueTriggerNodeJS2/index.js\nvar https = require(\"https\");\nvar url   = require(\"url\");\n\nfunction post_line(event)\n{\n    var post_data = JSON.stringify({\n        \"replyToken\" : event.replyToken,\n        \"messages\"   : [ event.message ]\n    });\n    var parse_url = url.parse(\"https://api.line.me/v2/bot/message/reply\");\n    var post_options = {\n        host: parse_url.host,\n        path: parse_url.path,\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer {' + process.env.LINE_CHANNEL_ACCESS_TOKEN + '}',\n            'Content-Length': Buffer.byteLength(post_data)\n        }\n    };\n    var post_req = https.request(post_options);\n    post_req.write(post_data);\n    post_req.end();\n}\n\nmodule.exports = function (context, myQueueItem) {\n    context.log('Node.js queue trigger function processed work item', myQueueItem);\n    myQueueItem.events.forEach(event => post_line(event));\n    context.done();\n};\n\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u306fGitHub\u304b\u3089Azure\u306bDeploy\u3059\u308b\u5834\u5408\u306e\u624b\u9806\u3067\u3059\u3002\u4e88\u3081\u624b\u5143\u306eGitHub\u30a2\u30ab\u30a6\u30f3\u30c8\u306a\u3069\u306bfork\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nFunction App\u306e\u4f5c\u6210\nAzure\u306e\u30dd\u30fc\u30bf\u30eb\u753b\u9762\u304b\u3089Function App\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u300cApp Service \u30d7\u30e9\u30f3\u300d\u306f\u300c\u52d5\u7684\u300d\u3092\u9078\u629e\u3057\u305f\u65b9\u304c\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\u300c\u5834\u6240\u300d\u306f\u3069\u3053\u3067\u3082\u826f\u3044\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u6771\u65e5\u672c\u304c\u9078\u629e\u53ef\u80fd\u3067\u3059\u3002\n\u300c\u30e1\u30e2\u30ea\u5272\u308a\u5f53\u3066 (MB)\u300d\u306f\u5f8c\u304b\u3089\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u914d\u7f6e\n\u3057\u3070\u3089\u304f\u5f85\u3064\u3068\u69cb\u7bc9\u304c\u7d42\u308f\u308a\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fFunction App\u304c\u30ea\u30bd\u30fc\u30b9\u306e\u4e00\u89a7\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u540d\u524d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068Function App\u306e\u7ba1\u7406\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u5de6\u4e0b\u306e[Function App \u306e\u8a2d\u5b9a]\u3092\u958b\u304d[\u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u69cb\u6210]\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n[\u30c7\u30d7\u30ed\u30a4]\u306e\u8a2d\u5b9a\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067[\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066[\u30bd\u30fc\u30b9\u306e\u9078\u629e]\u304b\u3089GitHub\u3092\u9078\u3073\u307e\u3059\u3002\nGitHub\u3068\u306e\u9023\u643a\u306b\u5fc5\u8981\u306a\u4f5c\u696d\u304c\u59cb\u307e\u308b\u306e\u3067\u5fc5\u8981\u306a\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fFunction App\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\n\u8868\u793a\u304c\u66f4\u65b0\u3055\u308c\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u305d\u306e\u5834\u5408\u306f\u4e00\u5ea6\u30c8\u30c3\u30d7\u753b\u9762\u307e\u3067\u623b\u308b\u3068\u826f\u3044\u3067\u3059\u3002\nGitHub\u3068\u306e\u9023\u643a\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u304c\u8a73\u3057\u3044\u3067\u3059\u3002\nAzure Web App\u3092Git\u3067\u7d99\u7d9a\u7684\u30c7\u30d7\u30ed\u30a4\u3059\u308b - Qiita\n\u306a\u304a\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u914d\u7f6e\u304c\u7d42\u308f\u3063\u305f\u3089\u9023\u643a\u3092\u30aa\u30d5\u306b\u3057\u3066\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\n\u74b0\u5883\u5909\u6570\u306b\u767b\u9332\n\u5de6\u4e0b\u306e[Function App \u306e\u8a2d\u5b9a]\u306e\u753b\u9762\u306b\u623b\u308a\u3001[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a]\u3092\u958b\u304d\u307e\u3059\u3002\n[\u30a2\u30d7\u30ea\u8a2d\u5b9a]\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u8ffd\u52a0\u306e\u60c5\u5831\u3068\u3057\u3066\u30ad\u30fc\u3068\u5024\u306b\u6b21\u306e\u5185\u5bb9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u30ad\u30fc\uff1a\nLINE_CHANNEL_ACCESS_TOKEN\n\u5024\uff1a\nLINE developers\u306eChannel Access Token\u306e\u5024\n\u4e0a\u8a18\u306e\u5024\u306fAPI\u3092\u4f7f\u3063\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u306breply\u3059\u308b\u969b\u306b\u4f7f\u3044\u307e\u3059\u3002\nAPI Reference\n\u5165\u529b\u5f8c\u3001\u5225\u306e\u9805\u76ee\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u78ba\u5b9a\u3057\u307e\u3059\u3002\u753b\u9762\u4e0a\u90e8\u306b[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u304c\u3042\u308b\u306e\u3067\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u30af\u30ea\u30c3\u30af\u3057\u3066\u9069\u7528\u3057\u307e\u3059\u3002\n\nWebHook URL\u306e\u8a2d\u5b9a\nFunction App\u306e\u7ba1\u7406\u753b\u9762\u306b\u623b\u308a\u3001\u5de6\u5074\u306eHttpTriggerNodeJS1\u3092\u958b\u304d\u307e\u3059\u3002\n[\u95a2\u6570\u306e URL:]\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u305d\u306e\u4e0b\u306eURL\u3092\u30e1\u30e2\u3057\u307e\u3059\u3002\nLINE Developers\u3067\u7ba1\u7406\u753b\u9762\u3092\u958b\u304d\u3001[Webhook URL]\u306b\u5148\u307b\u3069\u30e1\u30e2\u3057\u305fURL\u3092\u30bb\u30c3\u30c8\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\u4ee5\u4e0a\u3067\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u52d5\u4f5c\nBot\u3092\u53cb\u9054\u306b\u8ffd\u52a0\u3057\u3066\u4f1a\u8a71\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u5165\u529b\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u623b\u3063\u3066\u304d\u307e\u3059\u3002\n\u306a\u304a\u3001Azure Functions\u306e\u5236\u9650\u4e8b\u9805\uff1f\u3067\u3001\u4e00\u5b9a\u6642\u9593\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u306a\u304f\u306a\u308b\u3068\u3001\u5fdc\u7b54\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\uff08\u30ea\u30d7\u30e9\u30a4\u304c\u5e30\u3089\u306a\u3044\u3053\u3068\u3082\u3042\u308a\u307e\u3059\uff09\u3002\n\n\u6ce8\u610f\u4e8b\u9805\n\u7d39\u4ecb\u3057\u305f\u30b3\u30fc\u30c9\u306f\u6700\u5c0f\u9650\u306e\u30ed\u30b8\u30c3\u30af\u306e\u307f\u5b9f\u88c5\u3057\u3066\u3044\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3084\u30a8\u30e9\u30fc\u51e6\u7406\u306a\u3069\u306f\u8003\u616e\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u4f8b\u3048\u3070\u3001LINE\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u3042\u308b\u3053\u3068\u306e\u691c\u8a3c\u306a\u3069\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\n(2016/10/14) \u7f72\u540d\u691c\u8a3c\u306e\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3057\u305f\u3002\nLINE Messaging API\u3067X-Line-Signature\u306e\u7f72\u540d\u691c\u8a3c\u3092\u884c\u3046(AzureFunctions/Node.js\uff09\n\n\u307e\u3068\u3081\nAzure Functions\u3092\u5229\u7528\u3057\u3066LINE\u306ebot\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002Azure\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u975e\u540c\u671f\u51e6\u7406\u3092\u308f\u305a\u304b\u306a\u30b3\u30fc\u30c9\u3067\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u6c4e\u7528\u7684\u306a\u975e\u540c\u671f\u30e1\u30c3\u30bb\u30fc\u30b8\u51e6\u7406\u306b\u3057\u305f\u3064\u3082\u308a\u306a\u306e\u3067\u4ed6\u306ebot\u306e\u5b9f\u88c5\u306b\u3082\u6d41\u7528\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4e88\u5b9a\n\n\u624b\u9806\u306b\u30ad\u30e3\u30d7\u30c1\u30e3\u753b\u50cf\u306e\u8ffd\u52a0\n\u30ad\u30fc\u30ef\u30fc\u30c9\u306b\u53cd\u5fdc\u3057\u3066\u8fd4\u4fe1\u3059\u308b\nslack\u7248\u306e\u958b\u767a\n\n# \u306f\u3058\u3081\u306b\n\nAzure Functions\u3092\u4f7f\u3063\u3066\u30aa\u30a6\u30e0\u8fd4\u3057\u3059\u308bLINE\u306ebot\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f50\u884c\u7a0b\u5ea6\u3067\u3057\u305f(Node.js\uff09\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-13 1.16.32.png](https://qiita-image-store.s3.amazonaws.com/0/104863/941ba3ca-f6a3-6bb4-78a0-52a0c34369e9.png)\n\n# Azure Functions\u3092\u4f7f\u3046\u7406\u7531\n\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u306b\u3042\u308b\u3088\u3046\u306b\u3001BOT\u5b9f\u88c5\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3068\u3057\u3066\u306f\u975e\u540c\u671f\u51e6\u7406\u304c\u7406\u60f3\u7684\u3067\u3059\u3002\n[\u5b9f\u904b\u7528\u306b\u5411\u3051\u305fLINE BOT\u30b5\u30fc\u30d0\u306e\u5b9f\u88c5\u4f8b](http://qiita.com/Matanabe/items/92a613411cd051f64cb9)\n[\u5927\u91cf\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6765\u3066\u3082\u5b89\u5fc3\u306aLINE BOT\u30b5\u30fc\u30d0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3](http://qiita.com/yoichiro6642/items/6d4c7309210af20a5c8f)\n\n\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u73fe\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u53d7\u3051\u53d6\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u306a\u3069\u3092\u4e00\u5ea6Queue\u306b\u683c\u7d0d\u3057\u3066\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u306f\u5225\u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u3067\u51e6\u7406\u3092\u3055\u305b\u308b\u5b9f\u88c5\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\nAzure Functions\u3067\u306fQueue\u3068\u3057\u3066\u5229\u7528\u3067\u304d\u308bAzureStorage\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u3066\u3001\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u3060\u3051\u3067\u52dd\u624b\u306b\u975e\u540c\u671f\u51e6\u7406\u304c\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n\nAzure Functions\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3067\u3068\u3066\u3082\u8a73\u3057\u304f\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n[\u3055\u30fc\u3070\u30fc\u308c\u3059 \u3042\u30fc\u304d\u3066\u304f\u3061\u3083\u2026\uff1f\u3000-Azure Functions\u3067\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u4f55\u304b\u3092\u7406\u89e3\u3059\u308b\u8a18\u4e8b]( http://qiita.com/hat22/items/f7b2aec5211951dd7622)\n\n# \u5fc5\u8981\u306a\u3082\u306e\n\n1. LINE API\u306e\u5229\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\n2. GitHub\u30a2\u30ab\u30a6\u30f3\u30c8\n3. Azure\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\n\n\u4e0a\u8a18\u306e\uff13\u3064\u304c\u63c3\u3063\u3066\u3044\u305f\u3089\u3001\uff15\u5206\u7a0b\u5ea6\u3067BOT\u304cDeploy\u3067\u304d\u307e\u3059\u3002\n\n# \u4e0d\u8981\u306a\u3082\u306e\n\n1. \u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n2. \u30a8\u30c7\u30a3\u30bf\n\nGitHub\u304b\u3089Azure\u3078\u76f4\u63a5deploy\u3059\u308b\u306e\u3067\u4e0a\u8a18\u306f\u4e0d\u8981\u3067\u3059\u3002\n\n# \u624b\u9806\n\n## LINE API\u306e\u5229\u7528\u767b\u9332\n\nLINE\u3067Bot\u3092\u4f5c\u308b\u305f\u3081\u306b\u306fAPI\u5229\u7528\u306e\u767b\u9332\u304c\u5fc5\u8981\u3067\u3059\u3002\n[Messaging API\u306e\u3054\u7d39\u4ecb | LINE Business Center](https://business.line.me/ja/services/bot)\n\n\u300cChannel Access Token\u300d\u306e\u6587\u5b57\u5217\u304c\u5fc5\u8981\u306a\u306e\u3067\u63a7\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\n## Microsoft Azure\u306e\u30c8\u30e9\u30a4\u30a2\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\n\nAzure\u3092\u8a66\u7528\u3059\u308b\u306b\u306f\u5e7e\u3064\u304b\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u79c1\u304c\u5229\u7528\u3057\u305f\u306e\u306fVisual Studio Dev Essentials\u3068\u3044\u3046\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u4e00\u5e74\u9593\u3001\u6bce\u6708\u4e00\u5b9a\u984d\u307e\u3067\u7121\u6599\u67a0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n[Visual Studio Dev Essentials | Microsoft Azure](https://azure.microsoft.com/ja-jp/pricing/member-offers/vs-dev-essentials/)\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n\u3053\u3061\u3089\u3067\u516c\u958b\u3057\u3066\u307e\u3059\u3002\nhttps://github.com/yorifuji/azure-functions-line-echo-bot\n\n```js:HttpTriggerNodeJS1/index.js\nmodule.exports = function(context, req) {\n    context.log('Node.js HTTP trigger function processed a request. RequestUri=%s', req.originalUrl);\n\n    context.bindings.outputQueueItem = req.body;\n    \n    context.res = { body : \"\" };\n    context.done();\n};\n```\n```js:QueueTriggerNodeJS1/index.js\nmodule.exports = function (context, myQueueItem) {\n    context.log('Node.js queue trigger function processed work item', myQueueItem);\n\n    context.bindings.outputQueueItem = myQueueItem;\n\n    context.done();\n};\n```\n```js:QueueTriggerNodeJS2/index.js\nvar https = require(\"https\");\nvar url   = require(\"url\");\n\nfunction post_line(event)\n{\n    var post_data = JSON.stringify({\n        \"replyToken\" : event.replyToken,\n        \"messages\"   : [ event.message ]\n    });\n    var parse_url = url.parse(\"https://api.line.me/v2/bot/message/reply\");\n    var post_options = {\n        host: parse_url.host,\n        path: parse_url.path,\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer {' + process.env.LINE_CHANNEL_ACCESS_TOKEN + '}',\n            'Content-Length': Buffer.byteLength(post_data)\n        }\n    };\n    var post_req = https.request(post_options);\n    post_req.write(post_data);\n    post_req.end();\n}\n\nmodule.exports = function (context, myQueueItem) {\n    context.log('Node.js queue trigger function processed work item', myQueueItem);\n    myQueueItem.events.forEach(event => post_line(event));\n    context.done();\n};\n```\n\n\u4ee5\u4e0b\u306e\u624b\u9806\u306fGitHub\u304b\u3089Azure\u306bDeploy\u3059\u308b\u5834\u5408\u306e\u624b\u9806\u3067\u3059\u3002\u4e88\u3081\u624b\u5143\u306eGitHub\u30a2\u30ab\u30a6\u30f3\u30c8\u306a\u3069\u306bfork\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n## Function App\u306e\u4f5c\u6210\n\nAzure\u306e\u30dd\u30fc\u30bf\u30eb\u753b\u9762\u304b\u3089Function App\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u300cApp Service \u30d7\u30e9\u30f3\u300d\u306f\u300c\u52d5\u7684\u300d\u3092\u9078\u629e\u3057\u305f\u65b9\u304c\u826f\u3044\u3088\u3046\u3067\u3059\u3002\n\u300c\u5834\u6240\u300d\u306f\u3069\u3053\u3067\u3082\u826f\u3044\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u6771\u65e5\u672c\u304c\u9078\u629e\u53ef\u80fd\u3067\u3059\u3002\n\u300c\u30e1\u30e2\u30ea\u5272\u308a\u5f53\u3066 (MB)\u300d\u306f\u5f8c\u304b\u3089\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u914d\u7f6e\n\n\u3057\u3070\u3089\u304f\u5f85\u3064\u3068\u69cb\u7bc9\u304c\u7d42\u308f\u308a\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fFunction App\u304c\u30ea\u30bd\u30fc\u30b9\u306e\u4e00\u89a7\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u540d\u524d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068Function App\u306e\u7ba1\u7406\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u5de6\u4e0b\u306e[Function App \u306e\u8a2d\u5b9a]\u3092\u958b\u304d[\u7d99\u7d9a\u7684\u30a4\u30f3\u30c6\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u69cb\u6210]\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n[\u30c7\u30d7\u30ed\u30a4]\u306e\u8a2d\u5b9a\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067[\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7]\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066[\u30bd\u30fc\u30b9\u306e\u9078\u629e]\u304b\u3089GitHub\u3092\u9078\u3073\u307e\u3059\u3002\nGitHub\u3068\u306e\u9023\u643a\u306b\u5fc5\u8981\u306a\u4f5c\u696d\u304c\u59cb\u307e\u308b\u306e\u3067\u5fc5\u8981\u306a\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fFunction App\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\n\u8868\u793a\u304c\u66f4\u65b0\u3055\u308c\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u306e\u3067\u305d\u306e\u5834\u5408\u306f\u4e00\u5ea6\u30c8\u30c3\u30d7\u753b\u9762\u307e\u3067\u623b\u308b\u3068\u826f\u3044\u3067\u3059\u3002\n\nGitHub\u3068\u306e\u9023\u643a\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u304c\u8a73\u3057\u3044\u3067\u3059\u3002\n[Azure Web App\u3092Git\u3067\u7d99\u7d9a\u7684\u30c7\u30d7\u30ed\u30a4\u3059\u308b - Qiita](http://qiita.com/gen2-gk/items/659c95a47afb46b81e52)\n\n\u306a\u304a\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u914d\u7f6e\u304c\u7d42\u308f\u3063\u305f\u3089\u9023\u643a\u3092\u30aa\u30d5\u306b\u3057\u3066\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\n## \u74b0\u5883\u5909\u6570\u306b\u767b\u9332\n\n\u5de6\u4e0b\u306e[Function App \u306e\u8a2d\u5b9a]\u306e\u753b\u9762\u306b\u623b\u308a\u3001[\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a]\u3092\u958b\u304d\u307e\u3059\u3002\n[\u30a2\u30d7\u30ea\u8a2d\u5b9a]\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u8ffd\u52a0\u306e\u60c5\u5831\u3068\u3057\u3066\u30ad\u30fc\u3068\u5024\u306b\u6b21\u306e\u5185\u5bb9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u30ad\u30fc\uff1a\nLINE_CHANNEL_ACCESS_TOKEN\n\u5024\uff1a\nLINE developers\u306eChannel Access Token\u306e\u5024\n\n\u4e0a\u8a18\u306e\u5024\u306fAPI\u3092\u4f7f\u3063\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u306breply\u3059\u308b\u969b\u306b\u4f7f\u3044\u307e\u3059\u3002\n[API Reference](https://devdocs.line.me/ja/#reply-message)\n\n\u5165\u529b\u5f8c\u3001\u5225\u306e\u9805\u76ee\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u78ba\u5b9a\u3057\u307e\u3059\u3002\u753b\u9762\u4e0a\u90e8\u306b[\u4fdd\u5b58]\u30dc\u30bf\u30f3\u304c\u3042\u308b\u306e\u3067\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u30af\u30ea\u30c3\u30af\u3057\u3066\u9069\u7528\u3057\u307e\u3059\u3002\n\n## WebHook URL\u306e\u8a2d\u5b9a\n\nFunction App\u306e\u7ba1\u7406\u753b\u9762\u306b\u623b\u308a\u3001\u5de6\u5074\u306eHttpTriggerNodeJS1\u3092\u958b\u304d\u307e\u3059\u3002\n[\u95a2\u6570\u306e URL:]\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u305d\u306e\u4e0b\u306eURL\u3092\u30e1\u30e2\u3057\u307e\u3059\u3002\n\nLINE Developers\u3067\u7ba1\u7406\u753b\u9762\u3092\u958b\u304d\u3001[Webhook URL]\u306b\u5148\u307b\u3069\u30e1\u30e2\u3057\u305fURL\u3092\u30bb\u30c3\u30c8\u3057\u3066\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u3067\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n# \u52d5\u4f5c\n\nBot\u3092\u53cb\u9054\u306b\u8ffd\u52a0\u3057\u3066\u4f1a\u8a71\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\u5165\u529b\u3057\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u623b\u3063\u3066\u304d\u307e\u3059\u3002\n\n\u306a\u304a\u3001Azure Functions\u306e\u5236\u9650\u4e8b\u9805\uff1f\u3067\u3001\u4e00\u5b9a\u6642\u9593\u30b5\u30fc\u30d3\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u304c\u306a\u304f\u306a\u308b\u3068\u3001\u5fdc\u7b54\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\uff08\u30ea\u30d7\u30e9\u30a4\u304c\u5e30\u3089\u306a\u3044\u3053\u3068\u3082\u3042\u308a\u307e\u3059\uff09\u3002\n\n# \u6ce8\u610f\u4e8b\u9805\n\n\u7d39\u4ecb\u3057\u305f\u30b3\u30fc\u30c9\u306f\u6700\u5c0f\u9650\u306e\u30ed\u30b8\u30c3\u30af\u306e\u307f\u5b9f\u88c5\u3057\u3066\u3044\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3084\u30a8\u30e9\u30fc\u51e6\u7406\u306a\u3069\u306f\u8003\u616e\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u4f8b\u3048\u3070\u3001LINE\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u3042\u308b\u3053\u3068\u306e\u691c\u8a3c\u306a\u3069\u304c\u4e0d\u8db3\u3057\u3066\u3044\u307e\u3059\u3002\n\n(2016/10/14) \u7f72\u540d\u691c\u8a3c\u306e\u5b9f\u88c5\u3092\u884c\u3044\u307e\u3057\u305f\u3002\n[LINE Messaging API\u3067X-Line-Signature\u306e\u7f72\u540d\u691c\u8a3c\u3092\u884c\u3046(AzureFunctions/Node.js\uff09](http://qiita.com/yorifuji/items/71e31baf896adb69f567)\n\n# \u307e\u3068\u3081\n\nAzure Functions\u3092\u5229\u7528\u3057\u3066LINE\u306ebot\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002Azure\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u975e\u540c\u671f\u51e6\u7406\u3092\u308f\u305a\u304b\u306a\u30b3\u30fc\u30c9\u3067\u5b9f\u73fe\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\u6c4e\u7528\u7684\u306a\u975e\u540c\u671f\u30e1\u30c3\u30bb\u30fc\u30b8\u51e6\u7406\u306b\u3057\u305f\u3064\u3082\u308a\u306a\u306e\u3067\u4ed6\u306ebot\u306e\u5b9f\u88c5\u306b\u3082\u6d41\u7528\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u4e88\u5b9a\n\n- \u624b\u9806\u306b\u30ad\u30e3\u30d7\u30c1\u30e3\u753b\u50cf\u306e\u8ffd\u52a0\n- \u30ad\u30fc\u30ef\u30fc\u30c9\u306b\u53cd\u5fdc\u3057\u3066\u8fd4\u4fe1\u3059\u308b\n- slack\u7248\u306e\u958b\u767a\n", "tags": ["Azure", "AzureFunctions", "Line", "bot", "linebot"]}