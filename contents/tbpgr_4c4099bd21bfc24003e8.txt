{"tags": ["docker", "packer"], "context": " More than 1 year has passed since last update.Packer build\u3067Docker Hub\u306bDocker Image\u3092\u4fdd\u5b58\u3059\u308b\u3084\u3044\u306a\u3084pull\u3057\u3066cowsay\u3057\u307e\u3059\n\n \u30b5\u30f3\u30d7\u30eb\n\n \u4ed5\u69d8\nBase Image: ubuntu:trusty - Docker Hub\n\n Base Image\u3092pull\u3059\u308b\n$ docker pull ubuntu:trusty\n\n\n template.json\n{\n    \"builders\":[{\n        \"type\": \"docker\",\n        \"image\": \"ubuntu:trusty\",\n        \"commit\": true\n    }],\n\n    \"provisioners\":[\n    {\n        \"type\": \"shell\",\n        \"inline\": [\n            \"apt-get -y update\",\n            \"apt-get install -y cowsay\"\n        ]\n    }\n    ],\n\n    \"post-processors\": [\n        [\n            {\n                \"type\": \"docker-tag\",\n                \"repository\": \"tbpgr/cowsay\",\n                \"tag\": \"0.0.1\"\n            },\n            \"docker-push\"\n        ]\n    ]\n}\n\n\n Packer build\u3067Docker Hub\u306bImage\u3092push\n$ packer build template.json\n\n\n push\u3055\u308c\u305fImage\u3092Docker Hub\u4e0a\u3067\u78ba\u8a8d\n\n\n Docker Hub\u306b\u4fdd\u5b58\u3057\u305fImage\u3092\u691c\u7d22\u3057\u307e\u3059\n$ docker search tbpgr/cowsay\nNAME            DESCRIPTION   STARS     OFFICIAL   AUTOMATED\ntbpgr/cowsay                 0   \n\n\n \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306eDocker Image\u3092\u4e00\u5ea6\u524a\u9664\u3057\u307e\u3059\npull\u306e\u691c\u8a3c\u3092\u3059\u308b\u305f\u3081\u3001Docker Image\u30921\u56de\u524a\u9664\u3057\u307e\u3059\n$ docker rmi tbpgr/cowsay:0.0.1\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\n\n\n Docker Hub\u306b\u4fdd\u5b58\u3057\u305fImage\u3092pull\u3057\u307e\u3059\n$ docker pull tbpgr/cowsay:0.0.1\n0.0.1: Pulling from tbpgr/cowsay\n# \u4e2d\u7565\nStatus: Downloaded newer image for tbpgr/cowsay:0.0.1\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ntbpgr/cowsay       0.0.1               8cb354c0a903        12 minutes ago      210.5 MB\n\n\n Docker Hub\u304b\u3089\u53d6\u5f97\u3057\u305f\u81ea\u4f5cDocker Image\u3092\u5b9f\u884c\u3057\u307e\u3059\n$ docker run -i -t tbpgr/cowsay:0.0.1 /usr/games/cowsay hoge ______\n< hoge >\n ------\n        \\   ^__^\n         \\  (oo)\\_______\n            (__)\\       )\\/\\\n                ||----w |\n                ||     ||\n\nPacker build\u3067Docker Hub\u306bDocker Image\u3092\u4fdd\u5b58\u3059\u308b\u3084\u3044\u306a\u3084pull\u3057\u3066cowsay\u3057\u307e\u3059\n## <i class=\"fa fa-flask\" style=\"font-size:1em;\"></i> \u30b5\u30f3\u30d7\u30eb\n### <i class=\"fa fa-file-text\" style=\"font-size:1em;\"></i> \u4ed5\u69d8\nBase Image: [ubuntu:trusty - Docker Hub](https://hub.docker.com/_/ubuntu/)\n\n### <i class=\"fa fa-download\" style=\"font-size:1em;\"></i> Base Image\u3092pull\u3059\u308b\n\n```bash\n$ docker pull ubuntu:trusty\n```\n### <i class=\"fa fa-file-text\" style=\"font-size:1em;\"></i> template.json\n```bash\n{\n    \"builders\":[{\n        \"type\": \"docker\",\n        \"image\": \"ubuntu:trusty\",\n        \"commit\": true\n    }],\n\n    \"provisioners\":[\n    {\n        \"type\": \"shell\",\n        \"inline\": [\n            \"apt-get -y update\",\n            \"apt-get install -y cowsay\"\n        ]\n    }\n    ],\n\n    \"post-processors\": [\n        [\n            {\n                \"type\": \"docker-tag\",\n                \"repository\": \"tbpgr/cowsay\",\n                \"tag\": \"0.0.1\"\n            },\n            \"docker-push\"\n        ]\n    ]\n}\n```\n\n### <i class=\"fa fa-cloud-upload\" style=\"font-size:1em;\"></i> Packer build\u3067Docker Hub\u306bImage\u3092push\n```bash\n$ packer build template.json\n```\n\n### <i class=\"fa fa-desktop\" style=\"font-size:1em;\"></i> push\u3055\u308c\u305fImage\u3092Docker Hub\u4e0a\u3067\u78ba\u8a8d\n![packer_docker1.png](https://qiita-image-store.s3.amazonaws.com/0/43480/723eb0f8-6391-0567-3116-c7b85074be29.png)\n\n### <i class=\"fa fa-search-plus\" style=\"font-size:1em;\"></i> Docker Hub\u306b\u4fdd\u5b58\u3057\u305fImage\u3092\u691c\u7d22\u3057\u307e\u3059\n```bash\n$ docker search tbpgr/cowsay\nNAME            DESCRIPTION   STARS     OFFICIAL   AUTOMATED\ntbpgr/cowsay                 0   \n```\n\n### <i class=\"fa fa-trash\" style=\"font-size:1em;\"></i> \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306eDocker Image\u3092\u4e00\u5ea6\u524a\u9664\u3057\u307e\u3059\npull\u306e\u691c\u8a3c\u3092\u3059\u308b\u305f\u3081\u3001Docker Image\u30921\u56de\u524a\u9664\u3057\u307e\u3059\n\n```bash\n$ docker rmi tbpgr/cowsay:0.0.1\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\n```\n\n### <i class=\"fa fa-cloud-download\" style=\"font-size:1em;\"></i> Docker Hub\u306b\u4fdd\u5b58\u3057\u305fImage\u3092pull\u3057\u307e\u3059\n```bash\n$ docker pull tbpgr/cowsay:0.0.1\n0.0.1: Pulling from tbpgr/cowsay\n# \u4e2d\u7565\nStatus: Downloaded newer image for tbpgr/cowsay:0.0.1\n$ docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE\ntbpgr/cowsay       0.0.1               8cb354c0a903        12 minutes ago      210.5 MB\n```\n\n### <i class=\"fa fa-child\" style=\"font-size:1em;\"></i> Docker Hub\u304b\u3089\u53d6\u5f97\u3057\u305f\u81ea\u4f5cDocker Image\u3092\u5b9f\u884c\u3057\u307e\u3059\n```bash\n$ docker run -i -t tbpgr/cowsay:0.0.1 /usr/games/cowsay hoge ______\n< hoge >\n ------\n        \\   ^__^\n         \\  (oo)\\_______\n            (__)\\       )\\/\\\n                ||----w |\n                ||     ||\n```\n"}