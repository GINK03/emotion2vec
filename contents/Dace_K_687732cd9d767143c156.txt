{"context": " More than 1 year has passed since last update.\u4eca\u56de\u306f\u3001\u30db\u30c3\u30c8\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u624b\u9806\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\u3084\u308a\u65b9\u3068\u3057\u3066\u306f\u3001\n\u3000\u2460\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u53d6\u5f97\n\u3000\u2461vmdk\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\uff09\n\u3000\u2462\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u524a\u9664\n\u901a\u5e38\u3001OS\u8d77\u52d5\u72b6\u614b\u3060\u3068vmdk\u30d5\u30a1\u30a4\u30eb\u304c\u63e1\u3089\u308c\u305f\u307e\u307e\u306b\u306a\u308b\u306e\u3067\u3001\u9759\u6b62\u70b9\u3067\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n\u3053\u306e\u305f\u3081\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u53d6\u5f97\u3057\u3066\u4e00\u6642\u7684\u306bvmdk\u30d5\u30a1\u30a4\u30eb\u3092\u306f\u305a\u3057\u305f\u72b6\u614b\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u3068\u308b\u4f5c\u6226\u3002\n\u3053\u306e\u8fba\u306f\u3001vmdk\u30d5\u30a1\u30a4\u30eb\u304c\u3069\u3046\u306e\u3053\u3046\u306e\u306f\u4ed5\u69d8\u306b\u3088\u308b\u3082\u306e\u3002\n\u8a73\u3057\u304f\u306f\u4e0b\u8a18\u3002\nhttp://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2080293\n\n1. VMware ESXi\u74b0\u5883\u306e\u69cb\u7bc9\n\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u74b0\u5883\u69cb\u7bc9\u3002\nhttp://vm.study234.com/archives/336\n\u3061\u306a\u307f\u306b\u4eca\u56de\u306f\u3001CentOS\u3067\u306f\u306a\u304fWindowsServer2012\u3092\u30b2\u30b9\u30c8\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n2. vmdk\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u5f97\n\u203b\u4eca\u56de\u306e\u4f5c\u696d\u306f\u3001OS\u3092\u8d77\u52d5\u3057\u305f\u72b6\u614b\u3067\u884c\u3046\u3002\n\n2.1. \u5bfe\u8c61\u30b2\u30b9\u30c8\u30de\u30b7\u30f3\u306e\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\n~# ls -lh [datastore]/[hostname] \n\n~ # date;ls -lh /vmfs/volumes/datastore1/WindowsServer2012/\nSun Dec 13 00:45:37 UTC 2015\ntotal 46254096\n-rw-------    1 root     root        4.0G Dec 13 00:44 WindowsServer2012-0cccb183.vswp\n-rw-------    1 root     root       40.0G Dec 13 00:45 WindowsServer2012-flat.vmdk\n-rw-------    1 root     root        8.5K Dec 13 00:44 WindowsServer2012.nvram\n-rw-------    1 root     root         478 Dec 13 00:44 WindowsServer2012.vmdk\n-rw-r--r--    1 root     root           0 Dec 12 11:19 WindowsServer2012.vmsd\n-rwxr-xr-x    1 root     root        2.8K Dec 13 00:44 WindowsServer2012.vmx\n-rw-------    1 root     root           0 Dec 13 00:44 WindowsServer2012.vmx.lck\n-rw-r--r--    1 root     root         272 Dec 12 11:19 WindowsServer2012.vmxf\n-rwxr-xr-x    1 root     root        2.8K Dec 13 00:44 WindowsServer2012.vmx~\n-rw-r--r--    1 root     root      294.8K Dec 12 16:44 vmware-1.log\n-rw-r--r--    1 root     root      299.5K Dec 13 00:30 vmware-2.log\n-rw-r--r--    1 root     root      195.7K Dec 13 00:32 vmware-3.log\n-rw-r--r--    1 root     root      169.6K Dec 13 00:44 vmware.log\n-rw-------    1 root     root      109.0M Dec 13 00:44 vmx-WindowsServer2012-214741379-1.vswp\n~ # \n\n\n2.2. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u53d6\u5f97\u3059\u308b\n~# #VMID\u3092\u78ba\u8a8d\u3059\u308b\n~# vim-cmd vmsvc/getallvms\n~# vim-cmd vmsvc/snapshot.create [VMID] [Snapshotname] \n\n~ # date;vim-cmd vmsvc/getallvms\nSun Dec 13 00:46:12 UTC 2015\nVmid         Name                                  File                                 Guest OS          Version   Annotation\n2      WindowsServer2012   [datastore1] WindowsServer2012/WindowsServer2012.vmx   windows8Server64Guest   vmx-08              \n~ # \n~ # date;vim-cmd vmsvc/snapshot.create 2 test\nSun Dec 13 00:47:42 UTC 2015\nCreate Snapshot:\n~ # \n\n\u2605Snapshot\u3092\u53d6\u5f97\u3059\u308b\u3068\u3001\u69cb\u6210\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u304c\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\n/vmfs/volumes/566b9be2-c949e6ff-4129-000c2968e986/WindowsServer2012 # ls -l\ntotal 46256144\n-rw-------    1 root     root         86016 Dec 13 00:47 WindowsServer2012-000001-delta.vmdk    \u2605\u5dee\u5206\u30d5\u30a1\u30a4\u30eb\n-rw-------    1 root     root           337 Dec 13 00:47 WindowsServer2012-000001.vmdk  \u3000\u3000\u3000\u3000 \u2605\u5dee\u5206\u30d5\u30a1\u30a4\u30eb\n-rw-------    1 root     root     4294967296 Dec 13 00:44 WindowsServer2012-0cccb183.vswp\n-rw-------    1 root     root         28412 Dec 13 00:47 WindowsServer2012-Snapshot1.vmsn\n-rw-------    1 root     root     42949672960 Dec 13 00:47 WindowsServer2012-flat.vmdk\n-rw-------    1 root     root          8684 Dec 13 00:48 WindowsServer2012.nvram\n-rw-------    1 root     root           478 Dec 13 00:44 WindowsServer2012.vmdk\n-rw-r--r--    1 root     root           386 Dec 13 00:47 WindowsServer2012.vmsd\n-rwxr-xr-x    1 root     root          2888 Dec 13 00:47 WindowsServer2012.vmx\n-rw-------    1 root     root             0 Dec 13 00:44 WindowsServer2012.vmx.lck\n-rw-r--r--    1 root     root           272 Dec 12 11:19 WindowsServer2012.vmxf\n-rwxr-xr-x    1 root     root          2881 Dec 13 00:47 WindowsServer2012.vmx~\n-rw-r--r--    1 root     root        301871 Dec 12 16:44 vmware-1.log\n-rw-r--r--    1 root     root        306646 Dec 13 00:30 vmware-2.log\n-rw-r--r--    1 root     root        200381 Dec 13 00:32 vmware-3.log\n-rw-r--r--    1 root     root        180054 Dec 13 00:49 vmware.log\n-rw-------    1 root     root     114294784 Dec 13 00:44 vmx-WindowsServer2012-214741379-1.vswp\n/vmfs/volumes/566b9be2-c949e6ff-4129-000c2968e986/WindowsServer2012 # \n\n\n2.3. vmdk\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\uff09\n\u203bvmdk\u30d5\u30a1\u30a4\u30eb\u4ee5\u5916\u306f\u9069\u5b9cSCP\u30b3\u30de\u30f3\u30c9\u3084CP\u30b3\u30de\u30f3\u30c9\u306b\u3066\u9000\u907f\u3059\u308b\n~# vmkfstools -i [datastore]/[hostname]/[hostname].vmdk -d monosparse [datastore]/tmp[hostname]_bkupYYYYMMDD.vmdk\n\n/vmfs/volumes/566b9be2-c949e6ff-4129-000c2968e986/WindowsServer2012 # date;vmkfstools -i /vmfs/volumes/datastore1/WindowsServer2012/WindowsServer2012.vmdk -d monosparse /vmfs/volumes/datastore1/tm\np/WindowsServer2012_bkup20151213.vmdk;date\nSun Dec 13 00:58:57 UTC 2015\nDestination disk format: monolithic sparse disk\nCloning disk '/vmfs/volumes/datastore1/WindowsServer2012/WindowsServer2012.vmdk'...\nClone: 100% done.\nDaceks-MBA:~ dacek$ \n\n\u2605\u9000\u907f\u3055\u308c\u305f\u30d5\u30a3\u30a2\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u3053\u3093\u306a\u611f\u3058\n~ # ls -l /vmfs/volumes/datastore1/tmp/\ntotal 8166400\n-rw-------    1 root     root     8361934848 Dec 13 01:09 WindowsServer2012_bkup20151213-s001.vmdk\n-rw-------    1 root     root           532 Dec 13 01:09 WindowsServer2012_bkup20151213.vmdk\n~ # \n\n\n2.4. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u524a\u9664\n~# # VMDI\u306e\u78ba\u8a8d \n~# vim-cmd vmsvc/getallvms\n~# # SnapshotID\u306e\u78ba\u8a8d\n~# vim-cmd vmsvc/snapshot.get [VMID]\n~# # Snapshot\u306e\u524a\u9664\n~# vim-cmd vmsvc/snapshot.remove [VMID] [SnapshotID]\n\n~ # vim-cmd vmsvc/getallvms\nVmid         Name                                  File                                 Guest OS          Version   Annotation\n2      WindowsServer2012   [datastore1] WindowsServer2012/WindowsServer2012.vmx   windows8Server64Guest   vmx-08              \n~ # \n\n~ # vim-cmd vmsvc/snapshot.get 2\nGet Snapshot:\n|-ROOT\n--Snapshot Name        : test\n--Snapshot Id        : 1\n--Snapshot Desciption  : \n--Snapshot Created On  : 12/13/2015 0:47:44\n--Snapshot State       : powered off\n~ # \n\n~ # vim-cmd vmsvc/snapshot.remove 2 1\nRemove Snapshot:\n~ # \n\n\u2605Snapshot\u3092\u524a\u9664\u3059\u308b\u3068\u3001\u69cb\u6210\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u304c\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\n~ # ls -l /vmfs/volumes/datastore1/WindowsServer2012/\ntotal 46254096\n-rw-------    1 root     root     4294967296 Dec 13 00:44 WindowsServer2012-0cccb183.vswp\n-rw-------    1 root     root     42949672960 Dec 13 02:31 WindowsServer2012-flat.vmdk\n-rw-------    1 root     root          8684 Dec 13 02:31 WindowsServer2012.nvram\n-rw-------    1 root     root           478 Dec 13 02:31 WindowsServer2012.vmdk\n-rw-r--r--    1 root     root            43 Dec 13 02:31 WindowsServer2012.vmsd\n-rwxr-xr-x    1 root     root          2881 Dec 13 02:31 WindowsServer2012.vmx\n-rw-------    1 root     root             0 Dec 13 00:44 WindowsServer2012.vmx.lck\n-rw-r--r--    1 root     root           272 Dec 12 11:19 WindowsServer2012.vmxf\n-rwxr-xr-x    1 root     root          2888 Dec 13 02:31 WindowsServer2012.vmx~\n-rw-r--r--    1 root     root        301871 Dec 12 16:44 vmware-1.log\n-rw-r--r--    1 root     root        306646 Dec 13 00:30 vmware-2.log\n-rw-r--r--    1 root     root        200381 Dec 13 00:32 vmware-3.log\n-rw-r--r--    1 root     root        202120 Dec 13 01:02 vmware.log\n-rw-------    1 root     root     114294784 Dec 13 00:44 vmx-WindowsServer2012-214741379-1.vswp\n~ # \n\n\u4eca\u56de\u306f\u3001\u30db\u30c3\u30c8\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u306e\u624b\u9806\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\u3084\u308a\u65b9\u3068\u3057\u3066\u306f\u3001\n\u3000\u2460\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u53d6\u5f97\n\u3000\u2461vmdk\u30d5\u30a1\u30a4\u30eb\u306e\u30b3\u30d4\u30fc\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\uff09\n\u3000\u2462\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u306e\u524a\u9664\n\n\u901a\u5e38\u3001OS\u8d77\u52d5\u72b6\u614b\u3060\u3068vmdk\u30d5\u30a1\u30a4\u30eb\u304c\u63e1\u3089\u308c\u305f\u307e\u307e\u306b\u306a\u308b\u306e\u3067\u3001\u9759\u6b62\u70b9\u3067\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u53d6\u5f97\u3067\u304d\u306a\u3044\u3002\n\u3053\u306e\u305f\u3081\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u53d6\u5f97\u3057\u3066\u4e00\u6642\u7684\u306bvmdk\u30d5\u30a1\u30a4\u30eb\u3092\u306f\u305a\u3057\u305f\u72b6\u614b\u3067\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u3068\u308b\u4f5c\u6226\u3002\n\u3053\u306e\u8fba\u306f\u3001vmdk\u30d5\u30a1\u30a4\u30eb\u304c\u3069\u3046\u306e\u3053\u3046\u306e\u306f\u4ed5\u69d8\u306b\u3088\u308b\u3082\u306e\u3002\n\u8a73\u3057\u304f\u306f\u4e0b\u8a18\u3002\nhttp://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=2080293\n\n\n## 1. VMware ESXi\u74b0\u5883\u306e\u69cb\u7bc9\n\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u74b0\u5883\u69cb\u7bc9\u3002\nhttp://vm.study234.com/archives/336\n\n\u3061\u306a\u307f\u306b\u4eca\u56de\u306f\u3001CentOS\u3067\u306f\u306a\u304fWindowsServer2012\u3092\u30b2\u30b9\u30c8\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n## 2. vmdk\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u5f97\n\u203b\u4eca\u56de\u306e\u4f5c\u696d\u306f\u3001OS\u3092\u8d77\u52d5\u3057\u305f\u72b6\u614b\u3067\u884c\u3046\u3002\n\n### 2.1. \u5bfe\u8c61\u30b2\u30b9\u30c8\u30de\u30b7\u30f3\u306e\u69cb\u6210\u30d5\u30a1\u30a4\u30eb\u3092\u78ba\u8a8d\n````\u30b3\u30de\u30f3\u30c9\n~# ls -lh [datastore]/[hostname] \n````\n\n\n````\u30ed\u30b0\n~ # date;ls -lh /vmfs/volumes/datastore1/WindowsServer2012/\nSun Dec 13 00:45:37 UTC 2015\ntotal 46254096\n-rw-------    1 root     root        4.0G Dec 13 00:44 WindowsServer2012-0cccb183.vswp\n-rw-------    1 root     root       40.0G Dec 13 00:45 WindowsServer2012-flat.vmdk\n-rw-------    1 root     root        8.5K Dec 13 00:44 WindowsServer2012.nvram\n-rw-------    1 root     root         478 Dec 13 00:44 WindowsServer2012.vmdk\n-rw-r--r--    1 root     root           0 Dec 12 11:19 WindowsServer2012.vmsd\n-rwxr-xr-x    1 root     root        2.8K Dec 13 00:44 WindowsServer2012.vmx\n-rw-------    1 root     root           0 Dec 13 00:44 WindowsServer2012.vmx.lck\n-rw-r--r--    1 root     root         272 Dec 12 11:19 WindowsServer2012.vmxf\n-rwxr-xr-x    1 root     root        2.8K Dec 13 00:44 WindowsServer2012.vmx~\n-rw-r--r--    1 root     root      294.8K Dec 12 16:44 vmware-1.log\n-rw-r--r--    1 root     root      299.5K Dec 13 00:30 vmware-2.log\n-rw-r--r--    1 root     root      195.7K Dec 13 00:32 vmware-3.log\n-rw-r--r--    1 root     root      169.6K Dec 13 00:44 vmware.log\n-rw-------    1 root     root      109.0M Dec 13 00:44 vmx-WindowsServer2012-214741379-1.vswp\n~ # \n````\n\n### 2.2. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u53d6\u5f97\u3059\u308b\n\n````\u30b3\u30de\u30f3\u30c9\n~# #VMID\u3092\u78ba\u8a8d\u3059\u308b\n~# vim-cmd vmsvc/getallvms\n~# vim-cmd vmsvc/snapshot.create [VMID] [Snapshotname] \n````\n\n````\u30ed\u30b0\n~ # date;vim-cmd vmsvc/getallvms\nSun Dec 13 00:46:12 UTC 2015\nVmid         Name                                  File                                 Guest OS          Version   Annotation\n2      WindowsServer2012   [datastore1] WindowsServer2012/WindowsServer2012.vmx   windows8Server64Guest   vmx-08              \n~ # \n~ # date;vim-cmd vmsvc/snapshot.create 2 test\nSun Dec 13 00:47:42 UTC 2015\nCreate Snapshot:\n~ # \n````\n\n\u2605Snapshot\u3092\u53d6\u5f97\u3059\u308b\u3068\u3001\u69cb\u6210\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u304c\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\n\n````\u30ed\u30b0\n/vmfs/volumes/566b9be2-c949e6ff-4129-000c2968e986/WindowsServer2012 # ls -l\ntotal 46256144\n-rw-------    1 root     root         86016 Dec 13 00:47 WindowsServer2012-000001-delta.vmdk\t\u2605\u5dee\u5206\u30d5\u30a1\u30a4\u30eb\n-rw-------    1 root     root           337 Dec 13 00:47 WindowsServer2012-000001.vmdk\t\u3000\u3000\u3000\u3000 \u2605\u5dee\u5206\u30d5\u30a1\u30a4\u30eb\n-rw-------    1 root     root     4294967296 Dec 13 00:44 WindowsServer2012-0cccb183.vswp\n-rw-------    1 root     root         28412 Dec 13 00:47 WindowsServer2012-Snapshot1.vmsn\n-rw-------    1 root     root     42949672960 Dec 13 00:47 WindowsServer2012-flat.vmdk\n-rw-------    1 root     root          8684 Dec 13 00:48 WindowsServer2012.nvram\n-rw-------    1 root     root           478 Dec 13 00:44 WindowsServer2012.vmdk\n-rw-r--r--    1 root     root           386 Dec 13 00:47 WindowsServer2012.vmsd\n-rwxr-xr-x    1 root     root          2888 Dec 13 00:47 WindowsServer2012.vmx\n-rw-------    1 root     root             0 Dec 13 00:44 WindowsServer2012.vmx.lck\n-rw-r--r--    1 root     root           272 Dec 12 11:19 WindowsServer2012.vmxf\n-rwxr-xr-x    1 root     root          2881 Dec 13 00:47 WindowsServer2012.vmx~\n-rw-r--r--    1 root     root        301871 Dec 12 16:44 vmware-1.log\n-rw-r--r--    1 root     root        306646 Dec 13 00:30 vmware-2.log\n-rw-r--r--    1 root     root        200381 Dec 13 00:32 vmware-3.log\n-rw-r--r--    1 root     root        180054 Dec 13 00:49 vmware.log\n-rw-------    1 root     root     114294784 Dec 13 00:44 vmx-WindowsServer2012-214741379-1.vswp\n/vmfs/volumes/566b9be2-c949e6ff-4129-000c2968e986/WindowsServer2012 # \n````\n\n### 2.3. vmdk\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\uff08\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\uff09\n\u203bvmdk\u30d5\u30a1\u30a4\u30eb\u4ee5\u5916\u306f\u9069\u5b9cSCP\u30b3\u30de\u30f3\u30c9\u3084CP\u30b3\u30de\u30f3\u30c9\u306b\u3066\u9000\u907f\u3059\u308b\n\n````\u30b3\u30de\u30f3\u30c9\n~# vmkfstools -i [datastore]/[hostname]/[hostname].vmdk -d monosparse [datastore]/tmp[hostname]_bkupYYYYMMDD.vmdk\n````\n\n````\u30ed\u30b0\n/vmfs/volumes/566b9be2-c949e6ff-4129-000c2968e986/WindowsServer2012 # date;vmkfstools -i /vmfs/volumes/datastore1/WindowsServer2012/WindowsServer2012.vmdk -d monosparse /vmfs/volumes/datastore1/tm\np/WindowsServer2012_bkup20151213.vmdk;date\nSun Dec 13 00:58:57 UTC 2015\nDestination disk format: monolithic sparse disk\nCloning disk '/vmfs/volumes/datastore1/WindowsServer2012/WindowsServer2012.vmdk'...\nClone: 100% done.\nDaceks-MBA:~ dacek$ \n````\n\n\u2605\u9000\u907f\u3055\u308c\u305f\u30d5\u30a3\u30a2\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u3053\u3093\u306a\u611f\u3058\n\n````\u30ed\u30b0\n~ # ls -l /vmfs/volumes/datastore1/tmp/\ntotal 8166400\n-rw-------    1 root     root     8361934848 Dec 13 01:09 WindowsServer2012_bkup20151213-s001.vmdk\n-rw-------    1 root     root           532 Dec 13 01:09 WindowsServer2012_bkup20151213.vmdk\n~ # \n````\n\n\n### 2.4. \u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u524a\u9664\n\n````\u30b3\u30de\u30f3\u30c9\n~# # VMDI\u306e\u78ba\u8a8d \n~# vim-cmd vmsvc/getallvms\n~# # SnapshotID\u306e\u78ba\u8a8d\n~# vim-cmd vmsvc/snapshot.get [VMID]\n~# # Snapshot\u306e\u524a\u9664\n~# vim-cmd vmsvc/snapshot.remove [VMID] [SnapshotID]\n````\n\n````\u30ed\u30b0\n~ # vim-cmd vmsvc/getallvms\nVmid         Name                                  File                                 Guest OS          Version   Annotation\n2      WindowsServer2012   [datastore1] WindowsServer2012/WindowsServer2012.vmx   windows8Server64Guest   vmx-08              \n~ # \n\n~ # vim-cmd vmsvc/snapshot.get 2\nGet Snapshot:\n|-ROOT\n--Snapshot Name        : test\n--Snapshot Id        : 1\n--Snapshot Desciption  : \n--Snapshot Created On  : 12/13/2015 0:47:44\n--Snapshot State       : powered off\n~ # \n\n~ # vim-cmd vmsvc/snapshot.remove 2 1\nRemove Snapshot:\n~ # \n````\n\n\u2605Snapshot\u3092\u524a\u9664\u3059\u308b\u3068\u3001\u69cb\u6210\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u304c\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308b\n\n````\u30ed\u30b0\n~ # ls -l /vmfs/volumes/datastore1/WindowsServer2012/\ntotal 46254096\n-rw-------    1 root     root     4294967296 Dec 13 00:44 WindowsServer2012-0cccb183.vswp\n-rw-------    1 root     root     42949672960 Dec 13 02:31 WindowsServer2012-flat.vmdk\n-rw-------    1 root     root          8684 Dec 13 02:31 WindowsServer2012.nvram\n-rw-------    1 root     root           478 Dec 13 02:31 WindowsServer2012.vmdk\n-rw-r--r--    1 root     root            43 Dec 13 02:31 WindowsServer2012.vmsd\n-rwxr-xr-x    1 root     root          2881 Dec 13 02:31 WindowsServer2012.vmx\n-rw-------    1 root     root             0 Dec 13 00:44 WindowsServer2012.vmx.lck\n-rw-r--r--    1 root     root           272 Dec 12 11:19 WindowsServer2012.vmxf\n-rwxr-xr-x    1 root     root          2888 Dec 13 02:31 WindowsServer2012.vmx~\n-rw-r--r--    1 root     root        301871 Dec 12 16:44 vmware-1.log\n-rw-r--r--    1 root     root        306646 Dec 13 00:30 vmware-2.log\n-rw-r--r--    1 root     root        200381 Dec 13 00:32 vmware-3.log\n-rw-r--r--    1 root     root        202120 Dec 13 01:02 vmware.log\n-rw-------    1 root     root     114294784 Dec 13 00:44 vmx-WindowsServer2012-214741379-1.vswp\n~ # \n````\n\n\n", "tags": ["vmware", "Windows", "WindowsServer2012"]}