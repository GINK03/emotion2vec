{"tags": ["Eclipse", "Eclipse\u30d7\u30e9\u30b0\u30a4\u30f3", "Eclipse\u30d7\u30e9\u30b0\u30a4\u30f3\u958b\u767a", "Java"], "context": " More than 1 year has passed since last update.\n\n\u76ee\u7684\n\nEclipse \u306e\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb( IFile )\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3092\u30e1\u30e2\n\u899a\u3048\u66f8\u304d\u7684 tips\n\n\n\u7d50\u8ad6\n\n\nIAdaptable \u3067\u53d6\u5f97\u3067\u304d\u308b\n\n\n\u65b9\u6cd5\n\u4f8b\u3048\u3070\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u3044\u3066\u3044\u308b IFile \u3092\u53d6\u5f97\u3057\u305f\u3044\u3068\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n// null\u30c1\u30a7\u30c3\u30af\u306f\u7701\u7565\nIWorkbench workbench = PlatformUI.getWorkbench();\nIWorkbenchWindow window = workbench.getActiveWorkbenchWindow();\nIEditorPart editor = window.getActivePage().getActiveEditor();\nIEditorInput editorInput = editor.getEditorInput();\nif (editorInput instanceof IFileEditorInput) {\n    IFileEditorInput fileEditorInput = (IFileEditorInput) editorInput; // \u2605\n    IFile file = fileEditorInput.getFile();\n    // file \u53d6\u5f97\n}\n\n\u3053\u306e\u5834\u5408 IFileEditorInput \u3092\u6c7a\u3081\u3046\u3061\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u554f\u984c\u306b\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u3001 IFileEditorInput \u3092\u4f7f\u3046\u306b\u306f\u4f9d\u5b58\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066 org.eclipse.ui.ide \u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u306f\u5c11\u3057\u3060\u3051\u7c21\u5358\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n// null\u30c1\u30a7\u30c3\u30af\u306f\u7701\u7565\nIWorkbench workbench = PlatformUI.getWorkbench();\nIWorkbenchWindow window = workbench.getActiveWorkbenchWindow();\nIEditorPart editor = window.getActivePage().getActiveEditor();\nIEditorInput editorInput = editor.getEditorInput();\nIFile file = editorInput.getAdapter(IFile.class); // \u2605\n// file \u53d6\u5f97(null\u306e\u53ef\u80fd\u6027\u3042\u308a)\n\n\u3053\u3046\u3059\u308c\u3070  IFileEditorInput \u306e\u6c7a\u3081\u3046\u3061\u3082\u4e0d\u8981\u3067\u3059\u3057\u3001\u4f9d\u5b58\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066 org.eclipse.ui.ide \u3082\u4e0d\u8981\u306b\u306a\u308a\u307e\u3059\u3002\nOptional \u3092\u4f7f\u3048\u3070\u3053\u3093\u306a\u611f\u3058(Workbench\u304c null \u306e\u3053\u3068\u306f\u7121\u3044\u306f\u305a\u3060\u3051\u3069)\u3002\nIEditorPart editor = Optional.ofNullable(PlatformUI.getWorkbench())\n        .map(IWorkbench::getActiveWorkbenchWindow)\n        .map(IWorkbenchWindow::getActivePage)\n        .map(IWorkbenchPage::getActiveEditor)\n        .map(IEditorPart::getEditorInput)\n        .map(a -> a.getAdapter(IFile.class)) // \u2605\n        .orElse(null);\n\n\n\u78ba\u8a8d\n\u6c7a\u3081\u3046\u3061\u3057\u3066\u3044\u305f IFileEditorInput \u3067\u3059\u304c\u3001\u5b9f\u88c5\u30af\u30e9\u30b9\u306f org.eclipse.ui.part.FileEditorInput \u304b\u305d\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\nFileEditorInput \u306f PlatformObject \u3092\u62e1\u5f35\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f IAdaptable \u306a\u6c4e\u7528\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u307f\u305f\u3044\u306a\u3082\u306e\u3067\u3059\u306d\u3002\n\u3053\u306e\u3042\u305f\u308a\u306e\u8a73\u7d30\u306f\u3001\u300cEclipse/\u30d7\u30e9\u30b0\u30a4\u30f3\u958b\u767a\u306eTIPS\u96c6/org.eclipse.core.runtime.IAdaptable\u300d\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\u5b9f\u969b\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u306f org.eclipse.ui.internal.ide.model.FileInputAdapterFactory \u304c\u751f\u6210\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u3092\u898b\u308b\u3068 IFile \u3068 IResource \u3092\u6307\u5b9a\u3055\u308c\u308b\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u8fd4\u3059\u3088\u3046\u3067\u3059\u306d\u3002\n\u307e\u305f\u3001\u3053\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u30d5\u30a1\u30af\u30c8\u30ea\u30fc\u306f org.eclipse.ui.ide \u306e plugin.xml \u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n<!-- \u7701\u7565 -->\n      <extension\n         id=\"org.eclipse.ui.ide.resourceMappingAdapters\"\n         point=\"org.eclipse.core.runtime.adapters\">\n<!-- \u7701\u7565 -->\n       <factory\n             adaptableType=\"org.eclipse.ui.IFileEditorInput\"\n             class=\"org.eclipse.ui.internal.ide.model.FileInputAdapterFactory\">\n          <adapter\n                type=\"org.eclipse.core.resources.IFile\">\n          </adapter>\n          <adapter\n                type=\"org.eclipse.core.resources.IResource\">\n          </adapter>\n       </factory>\n<!-- \u7701\u7565 -->\n\n\n# \u76ee\u7684\n\n- Eclipse \u306e\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u3044\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb( `IFile` )\u3092\u53d6\u5f97\u3059\u308b\u65b9\u6cd5\u3092\u30e1\u30e2\n- \u899a\u3048\u66f8\u304d\u7684 tips\n\n# \u7d50\u8ad6\n\n- `IAdaptable` \u3067\u53d6\u5f97\u3067\u304d\u308b\n\n# \u65b9\u6cd5\n\n\u4f8b\u3048\u3070\u3001\u30a2\u30af\u30c6\u30a3\u30d6\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u3044\u3066\u3044\u308b `IFile` \u3092\u53d6\u5f97\u3057\u305f\u3044\u3068\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n```java\n// null\u30c1\u30a7\u30c3\u30af\u306f\u7701\u7565\nIWorkbench workbench = PlatformUI.getWorkbench();\nIWorkbenchWindow window = workbench.getActiveWorkbenchWindow();\nIEditorPart editor = window.getActivePage().getActiveEditor();\nIEditorInput editorInput = editor.getEditorInput();\nif (editorInput instanceof IFileEditorInput) {\n    IFileEditorInput fileEditorInput = (IFileEditorInput) editorInput; // \u2605\n    IFile file = fileEditorInput.getFile();\n    // file \u53d6\u5f97\n}\n```\n\n\u3053\u306e\u5834\u5408 `IFileEditorInput` \u3092\u6c7a\u3081\u3046\u3061\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u554f\u984c\u306b\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u3001 `IFileEditorInput` \u3092\u4f7f\u3046\u306b\u306f\u4f9d\u5b58\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066 `org.eclipse.ui.ide` \u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u308c\u306f\u5c11\u3057\u3060\u3051\u7c21\u5358\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```java\n// null\u30c1\u30a7\u30c3\u30af\u306f\u7701\u7565\nIWorkbench workbench = PlatformUI.getWorkbench();\nIWorkbenchWindow window = workbench.getActiveWorkbenchWindow();\nIEditorPart editor = window.getActivePage().getActiveEditor();\nIEditorInput editorInput = editor.getEditorInput();\nIFile file = editorInput.getAdapter(IFile.class); // \u2605\n// file \u53d6\u5f97(null\u306e\u53ef\u80fd\u6027\u3042\u308a)\n```\n\n\u3053\u3046\u3059\u308c\u3070  `IFileEditorInput` \u306e\u6c7a\u3081\u3046\u3061\u3082\u4e0d\u8981\u3067\u3059\u3057\u3001\u4f9d\u5b58\u30d7\u30e9\u30b0\u30a4\u30f3\u3068\u3057\u3066 `org.eclipse.ui.ide` \u3082\u4e0d\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n`Optional` \u3092\u4f7f\u3048\u3070\u3053\u3093\u306a\u611f\u3058(Workbench\u304c `null` \u306e\u3053\u3068\u306f\u7121\u3044\u306f\u305a\u3060\u3051\u3069)\u3002\n\n```java\nIEditorPart editor = Optional.ofNullable(PlatformUI.getWorkbench())\n\t\t.map(IWorkbench::getActiveWorkbenchWindow)\n\t\t.map(IWorkbenchWindow::getActivePage)\n\t\t.map(IWorkbenchPage::getActiveEditor)\n\t\t.map(IEditorPart::getEditorInput)\n\t\t.map(a -> a.getAdapter(IFile.class)) // \u2605\n\t\t.orElse(null);\n```\n\n# \u78ba\u8a8d\n\n\u6c7a\u3081\u3046\u3061\u3057\u3066\u3044\u305f `IFileEditorInput` \u3067\u3059\u304c\u3001\u5b9f\u88c5\u30af\u30e9\u30b9\u306f `org.eclipse.ui.part.FileEditorInput` \u304b\u305d\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n`FileEditorInput` \u306f `PlatformObject` \u3092\u62e1\u5f35\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f `IAdaptable` \u306a\u6c4e\u7528\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u307f\u305f\u3044\u306a\u3082\u306e\u3067\u3059\u306d\u3002\n\n\u3053\u306e\u3042\u305f\u308a\u306e\u8a73\u7d30\u306f\u3001\u300c[Eclipse/\u30d7\u30e9\u30b0\u30a4\u30f3\u958b\u767a\u306eTIPS\u96c6/org.eclipse.core.runtime.IAdaptable](http://www.masatom.in/pukiwiki/Eclipse/%A5%D7%A5%E9%A5%B0%A5%A4%A5%F3%B3%AB%C8%AF%A4%CETIPS%BD%B8/org.eclipse.core.runtime.IAdaptable/)\u300d\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5b9f\u969b\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u306f `org.eclipse.ui.internal.ide.model.FileInputAdapterFactory` \u304c\u751f\u6210\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u30bd\u30fc\u30b9\u3092\u898b\u308b\u3068 `IFile` \u3068 `IResource` \u3092\u6307\u5b9a\u3055\u308c\u308b\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u8fd4\u3059\u3088\u3046\u3067\u3059\u306d\u3002\n\n\u307e\u305f\u3001\u3053\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u30d5\u30a1\u30af\u30c8\u30ea\u30fc\u306f `org.eclipse.ui.ide` \u306e `plugin.xml` \u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n```xml\n<!-- \u7701\u7565 -->\n      <extension\n         id=\"org.eclipse.ui.ide.resourceMappingAdapters\"\n         point=\"org.eclipse.core.runtime.adapters\">\n<!-- \u7701\u7565 -->\n       <factory\n             adaptableType=\"org.eclipse.ui.IFileEditorInput\"\n             class=\"org.eclipse.ui.internal.ide.model.FileInputAdapterFactory\">\n          <adapter\n                type=\"org.eclipse.core.resources.IFile\">\n          </adapter>\n          <adapter\n                type=\"org.eclipse.core.resources.IResource\">\n          </adapter>\n       </factory>\n<!-- \u7701\u7565 -->\n```\n"}