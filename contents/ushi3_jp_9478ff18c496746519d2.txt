{"tags": ["Android", "android\u958b\u767a", "AndroidStudio", "DataBinding"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u57fa\u672c\u7684\u306a\u3053\u3068\u306f\u7701\u7565\u3057\u3066\u307e\u3059\u3002\n\n\u8a2d\u5b9a\n\nbuild.gradle\nandroid {\n    \u2026\n    dataBinding {\n        enabled = true\n    }\n}\n\n\nAndroid Studio\u304a\u3088\u3073gradle plugin\u306e2.2.0\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u4eba\u306f\u3001\u60b2\u3057\u3044\u30d0\u30b0\u3092\u8e0f\u3080\u306e\u30672.2.1\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u5236\u9650\n\u73fe\u72b6\u3067\u306f\u3001Jack\u30b3\u30f3\u30d1\u30a4\u30e9\u3067DataBinding\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\n\u305d\u306e\u305f\u3081\u3001Java8\u306e\u6a5f\u80fd\u304c\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u88dc\u5b8c\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n\n\u6a5f\u80fd\n\u30e9\u30a4\u30d6\u30e9\u30ea\n\n\n\n\nLambda\nRetrolambda\n\n\nStream API\nLightweight-Stream-API\n\n\n\n\n\u5236\u7d04\n\nJava\u306e\u4e88\u7d04\u8a9e\u306b\u6e96\u62e0\n\ncontext\u306f\u5909\u6570\u540d\u3068\u3057\u3066\u4f7f\u3048\u307e\u305b\u3093\n\n\nContext\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u53c2\u7167\u3067\u304d\u307e\u3059\n\n\n\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u306f\u4f7f\u3048\u307e\u305b\u3093\n\n\n\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u306e\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3068\u30d3\u30eb\u30c9\u306b\u5931\u6557\u3057\u307e\u3059\n\n\n\n\nDataBinding\u306e\u7279\u5fb4\n\u3068\u308a\u3042\u3048\u305a\u3053\u306e\u3078\u3093\u306b\u89e6\u308c\u307e\u3059\u3002\n\nNull\u5b89\u5168\n\u30e1\u30bd\u30c3\u30c9\u30a2\u30af\u30bb\u30b9\u306e\u52b9\u7387\u5316\nmerge\u30bf\u30b0\u4e0d\u8981\nDataBinding\u306e\u9023\u4fc2\n\u30ab\u30b9\u30bf\u30e0\u5c5e\u6027\n\n\nNull\u5b89\u5168\nDataBinding\u3067\u306f\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u306b\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u306fNullPointerException\u306b\u306a\u3089\u306a\u3044\u3068\u3044\u3046\u7279\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\u7279\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u306b\u306f\u914d\u5217\u3084List\u306eArrayIndexOutOfBoundsException\u306a\u3069\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\nactivity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"person\"\n            type=\"foo.bar.Person\"/>\n    </data>\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"@{person.name}\"/>\n\n</layout>\n\n\n\u3053\u306e\u5834\u5408\u3001\u30b3\u30fc\u30c9\u5074\u3067\n\nMainActivity.java\nActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\nbinding.setPerson(null);\n\n\n\u3068\u3001null\u3092\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u3066\u3082\u3001\u306c\u308b\u307d\u306b\u306f\u306a\u308a\u307e\u305b\u3093\u3002\nandroid:text=\"@{person.name.firstName}\"\n\n\u3053\u306e\u5834\u5408\u306e\u3001name\u304cnull\u306e\u5834\u5408\u3082\u540c\u69d8\u3067\u3059\u3002\n\u914d\u5217\u5916\u30a2\u30af\u30bb\u30b9\u306e\u5834\u5408\u3082\u540c\u69d8\u306b\u5b89\u5168\u306b\u51e6\u7406\u3057\u3066\u304f\u308c\u307e\u3059\u3002\uff08\u5b9f\u88c5\u4e0a\u306fnull\u3067\u3042\u308b\u3068\u5224\u5b9a\u3055\u308c\u308b\uff09\nDataBinding\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30b7\u30e5\u30ac\u30fc\u3068\u3057\u3066\u3001A ?? B\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u308c\u306f\u5de6\u8fbaA\u304cnull\u306e\u5834\u5408\u306b\u53f3\u8fbaB\u3092\u4f7f\u3046\u3068\u3044\u3046\u8868\u73fe\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u5de6\u8fba\u304c\u914d\u5217\u5916\u30a2\u30af\u30bb\u30b9\u3067\u3042\u3063\u3066\u3082\u540c\u69d8\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\n\u30e1\u30bd\u30c3\u30c9\u30a2\u30af\u30bb\u30b9\u306e\u52b9\u7387\u5316\nDataBinding\u3067\u306f1\u56de\u306e\u753b\u9762\u66f4\u65b0\u3067\u3001\u540c\u3058\u51e6\u7406\u306f1\u5ea6\u3057\u304b\u884c\u308f\u306a\u3044\u3088\u3046\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u306f\u3069\u3046\u3044\u3046\u3053\u3068\u304b\u3068\u3044\u3046\u3068\u3001\n\nactivity_main.xml\n\u2026\n<TextView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"@{person.getName()}\"/>\n\n<TextView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"@{person.getName() + ` (` + person.getAge() + `)`}\"/>\n\n\n\n\u3053\u306e\u3088\u3046\u306b\u30012\u3064\u306eTextView\u3067\u540c\u3058\u30e1\u30bd\u30c3\u30c9getName()\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f7f\u308f\u308c\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\uff08\u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u3068\u306f\u7570\u306a\u308a\u307e\u3059\uff09\n\nActivityMainBinding.java\nString name = person.getName();\nint age = person.getAge();\n\ntextView1.setText(name);\ntextView2.setText(name + \" (\" + age + \")\");\n\n\n\u3053\u306e\u7279\u6027\u306fnull\u30c1\u30a7\u30c3\u30af\u306b\u3082\u9069\u7528\u3055\u308c\u3001\u81ea\u5206\u3067\u66f8\u304f\u3068\u3081\u3093\u3069\u304f\u3055\u3044\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u51fa\u3057\u3092\u81ea\u52d5\u3067\u884c\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\ngetter\u306e\u7279\u6027\n\u3061\u306a\u307f\u306b\u3001\u4e0a\u3067\u306fperson.getName()\u3068\u66f8\u304d\u307e\u3057\u305f\u304c\u3001DataBinding\u306fpublic\u306agetter\u3092\u5909\u6570\u30a2\u30af\u30bb\u30b9\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\nperson.getName()\u306e\u5834\u5408person.name\u3068\u3057\u3066\u3082\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u3080\u3057\u308d\u5f8c\u8005\u3057\u304b\u88dc\u5b8c\u3055\u308c\u307e\u305b\u3093\uff09\n\u3067\u306f\u3001person.getName()\u3068person.name\u304c\u6df7\u5728\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u306e\u304b\u3002\n\u3053\u308c\u306f\u3001\u5225\u306e\u51e6\u7406\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u308b\u3088\u3046\u3067\u30012\u3064\u306e\u5909\u6570\u306b\u5206\u5272\u3055\u308c\u307e\u3059\u3002\u3061\u306a\u307f\u306bname\u304cpublic\u306a\u5909\u6570\u3060\u3063\u305f\u3068\u3057\u3066\u3082\u3001person.name\u306fgetter\u3092\u512a\u5148\u3057\u3066\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\nmerge\u30bf\u30b0\u4e0d\u8981\n\u30ec\u30a4\u30a2\u30a6\u30c8XML\u3067\u306f\u3001merge\u30bf\u30b0\u3068\u3044\u3046\u3082\u306e\u304c\u5b58\u5728\u3057\u307e\u3059\u3002\n\u3053\u308c\u306finclude\u30bf\u30b0\u3084ViewGroup\u306b\u5bfe\u3057\u3066attachToRoot=true\u3067\u30ec\u30a4\u30a2\u30a6\u30c8\u3092inflate\u3057\u305f\u3068\u304d\u306b\u3001\u3069\u306e\u3088\u3046\u306a\u968e\u5c64\u306b\u306a\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u3082\u306e\u3067\u3059\u3002\uff08\u8a73\u7d30\u306f\u7701\u304d\u307e\u3059\uff09\nDataBinding\u306f\u30c8\u30c3\u30d7\u968e\u5c64\u3092layout\u30bf\u30b0\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306b\u5bfe\u3057\u3066merge\u30bf\u30b0\u306f\u30c8\u30c3\u30d7\u968e\u5c64\u306b\u3057\u304b\u5b9a\u7fa9\u3067\u304d\u307e\u305b\u3093\u3002\n\u3067\u306f\u3069\u3046\u3059\u308b\u306e\u304b\uff1f\n\u7b54\u3048\u306f\u3001merge\u30bf\u30b0\u306f\u5229\u7528\u3067\u304d\u306a\u3044\u3067\u3059\u3002\n\u516c\u5f0f\u3092\u898b\u3066\u3082\u3001Data binding does not support include as a direct child of a merge element.\u3068\u3057\u304b\u66f8\u3044\u3066\u3042\u308a\u307e\u305b\u3093\u3002\n\u3053\u306e\u8aac\u660e\u3001\u975e\u5e38\u306b\u4e0d\u89aa\u5207\u306a\u3093\u3067\u3059\u304c\u3001\u5b9f\u969b\u306fmerge\u30bf\u30b0\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u306a\u3044\u306e\u307b\u3046\u304c\u6b63\u3057\u3044\u3067\u3059\u3002\nlayout\u30bf\u30b0\u304c\u975e\u5e38\u306b\u67d4\u8edf\u306b\u3067\u304d\u3066\u3044\u3066\u3001include\u30bf\u30b0\u3067\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u633f\u5165\u3057\u305f\u5834\u5408\u3001merge\u306e\u5f79\u5272\u3092\u679c\u305f\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u9006\u306b\u30b3\u30fc\u30c9\u3067inflate\u3057\u305f\u5834\u5408\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066FrameLayout\u3067\u56f2\u3063\u3066\u304f\u308c\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u30a8\u30f3\u30b8\u30cb\u30a2\u306f\u3053\u306e\u52d5\u4f5c\u306b\u3064\u3044\u3066\u6c17\u306b\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\nDataBinding\u306e\u9023\u4fc2\ninclude\u30bf\u30b0\u95a2\u9023\u3067\u3082\u30462\u3064\u4fbf\u5229\u306a\u52d5\u4f5c\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nDataBinding\u304b\u3089DataBinding\u3092\u53d6\u5f97\u3059\u308b\n\nactivity_main.xml\n<layout>\n    \u2026\n    <LinearLayout>\n        \u2026\n        <include\n            android:id=\"@+id/foo_binding\"\n            layout=\"@layout/layout_foo\"/>\n\n    </LinearLayout>\n</layout>\n\n\n\nlayout_foo.xml\n<layout>\n    <data>\n        <variable\n            name=\"age\"\n            type=\"int\"/>  \n    </data>\n\n    \u2026\n</layout>\n\n\nactivity_main.xml\u3067\u3001include\u30bf\u30b0\u306bid\u3092\u632f\u3063\u3066\u307f\u307e\u3059\u3002\n\u3059\u308b\u3068\u30b3\u30fc\u30c9\u5074\u3067\u306f\u3001\n\nMainActivity.java\nActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n\nPerson person = new Person(\"\u5c71\u7530\u592a\u90ce\", 25);\nbinding.setPerson(person);\n\n// Binding\u304b\u3089Binding\u304c\u751f\u3048\u308b\nLayoutFooBinding fooBinding = binding.fooBinding;\nfooBinding.setAge(person.getAge());\n\n\n\u3053\u306e\u3088\u3046\u306b\u3001ActivityMainBinding\u304b\u3089LayoutFooBinding\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nView\u3001DataBinding\u306b\u9650\u3089\u305a\u3001\u3068\u308a\u3042\u3048\u305a\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3051\u308c\u3070id\u3092\u632f\u308c\u3070\u751f\u3048\u3066\u304f\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u9006\u306bid\u3092\u632f\u3089\u306a\u3051\u308c\u3070\u96a0\u853d\u3067\u304d\u307e\u3059\u3002\n\nDataBinding\u304b\u3089DataBinding\u3078\u306e\u30c7\u30fc\u30bf\u6e21\u3057\n\u4e0a\u306e\u4f8b\u3067\u306f\u3001\u30b3\u30fc\u30c9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u6e21\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3058\u3064\u306f\u3053\u306e\u30b3\u30fc\u30c9\u306f\u30ec\u30a4\u30a2\u30a6\u30c8xml\u3067\u5b8c\u7d50\u3055\u305b\u308b\u3053\u3068\u3067\u304d\u307e\u3059\u3002\nlayout_foo.xml\u306b\u306f\u3001int\u578b\u306e\u5909\u6570age\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u5834\u5408\u3001include\u3057\u3066\u3044\u308b\u5074\u306eactivity_main.xml\u306f\u3001include\u30bf\u30b0\u306e\u5c5e\u6027\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a18\u8ff0\u304c\u3067\u304d\u307e\u3059\u3002\n\nactivity_main.xml\n<layout>\n    \u2026\n    <LinearLayout>\n        \u2026\n        <include\n            layout=\"@layout/layout_foo\"\n            app:age=\"@{person.age}\"/>\n\n    </LinearLayout>\n</layout>\n\n\nlayout_foo.xml\u3067\u5b9a\u7fa9\u3057\u305fvariable\u306e\u540d\u524d\u3092\u305d\u306e\u307e\u307e\u3001app:<variableName>\u3068\u3057\u3066\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n\u30ab\u30b9\u30bf\u30e0\u5c5e\u6027\ndata\u30bf\u30b0\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5909\u6570\u4ee5\u5916\u306b\u3001DataBinding\u3067\u306f\u4efb\u610f\u306e\u5c5e\u6027\u3092\u5916\u304b\u3089\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n\n\u5b9a\u7fa9\n\u5c5e\u6027\u540d\n\u5229\u7528\u53ef\u80fd\u7b87\u6240\n\n\n\n\n\nvariable\u30bf\u30b0\napp:<variableName>\n\ninclude\u30bf\u30b0\n\n\n\nView\u306epublic setter\n\n\nandroid:onClickListener\u306a\u3069\n\u5bfe\u8c61\u306eView\n\n\n\n\n@BindingMethod\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\u4efb\u610f\u306e\u540d\u524d\n\u5b9a\u7fa9\u5bfe\u8c61\u306eView\n\n\n\n\n@BindingAdapter\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\u4efb\u610f\u306e\u540d\u524d\n\u5f15\u6570\u306eView\n\n\n\n\n\u3053\u308c\u3089\u306e\u3046\u3061\u3001\u4e0b3\u3064\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\npublic setter\u306e\u5c5e\u6027\u5316\nDataBinding\u3067\u306fView\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5168\u3066\u306epublic setter\u306b\u5c5e\u6027\u3068\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\uff08hide\u306a\u3082\u306e\u306f\u308f\u304b\u308a\u307e\u305b\u3093\uff09\n\u4f8b\u3048\u3070CustomView\u3092\u4f5c\u308b\u3068\u304d\u3001\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092setter\u304b\u3089\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u3057\u305f\u3068\u3057\u307e\u3059\u3002\n\nCustomView.java\npublic CustomView extends View {\n    \u2026\n\n    public void setPerson(Person person) {\n        \u2026\n        invalidate();\n    }\n}\n\n\n\u901a\u5e38\u306f\u3001\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057\u3066\u30b3\u30fc\u30c9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u6e21\u3059\u51e6\u7406\u3092\u66f8\u304f\u3068\u601d\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001DataBinding\u3067\u306f\u3001public\u306asetter\u306f\u5c5e\u6027\u5316\u3055\u308c\u308b\u3068\u3044\u3046\u7279\u6027\u3092\u6301\u3064\u305f\u3081\u3001\u30ec\u30a4\u30a2\u30a6\u30c8xml\u3067\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\nactivity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"person\"\n            type=\"foo.bar.Person\"/>\n    </data>\n\n    <foo.bar.CustomView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:person=\"@{person}\"/>\n\n</layout>\n\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u30011\u3064\u306e\u30c7\u30fc\u30bf\u3092\u8907\u6570\u306eView\u306b\u305d\u308c\u305e\u308c\u30bb\u30c3\u30c8\u305b\u305a\u306b\u3001DataBinding\u306b\u6e21\u305b\u3070OK\u3068\u3044\u3046\u4e00\u8cab\u3057\u305f\u51e6\u7406\u306b\u3067\u304d\u307e\u3059\u3002\n\u305f\u3060\u3057\u3053\u306e\u5834\u5408\u3001\u5024\u304cnull\u306e\u5834\u5408\u306e\u51e6\u7406\u306fCustomView\u306b\u59d4\u306d\u3089\u308c\u308b\u3068\u3044\u3046\u70b9\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\uff08\u5b9f\u88c5\u6b21\u7b2c\u3067\u306c\u308b\u307d\u304c\u8d77\u3053\u308a\u5f97\u308b\uff09\n\nBindingMethod\n@BindingMethods\u53ca\u3073@BindingMethod\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u4efb\u610f\u306e\u5c5e\u6027\u3092\u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u30ea\u30f3\u30af\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066\u3001View\u306b\u306fandroid:onClick\u3068\u3044\u3046\u5c5e\u6027\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u5c5e\u6027\u540donClick\u306b\u5bfe\u5fdc\u3059\u308b\u30e1\u30bd\u30c3\u30c9setOnClick()\u306fView\u306b\u306f\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u306b\u3082\u95a2\u308f\u3089\u305a\u3001android:onClick=\"@{onClickListener}\"\u306f\u6709\u52b9\u3067\u3059\u3002\n\u3053\u308c\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308bViewBindingAdapter\u306b\u3001\u5c5e\u6027\u540d\u3068\u30e1\u30bd\u30c3\u30c9\u306e\u5bfe\u5fdc\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\n\nViewBindingAdapter.java\n\n@BindingMethods({\n    \u2026\n    @BindingMethod(type = View.class, attribute = \"android:onClick\", method = \"setOnClickListener\")\n})\npublic class ViewBindingAdapter {\n    \u2026\n}\n\n\n\u3053\u306e\u3088\u3046\u306b\u3001DataBinding\u3067\u306f\u3001\u5c5e\u6027\u540d\u3068\u30e1\u30bd\u30c3\u30c9\u540d\u304c\u4e00\u81f4\u3057\u306a\u3044\u3044\u304f\u3064\u304b\u306e\u5c5e\u6027\u306b\u3064\u3044\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ea\u30f3\u30af\u5b9a\u7fa9\u304c\u3055\u308c\u3066\u3044\u307e\u3059\u3002(\u53c2\u7167)\n\nBindingAdapter\n@BindingMethod\u306f\u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9\u3078\u306e\u30ea\u30f3\u30af\u3067\u3057\u305f\u304c\u3001@BindingAdapter\u306f\u5b9f\u88c5\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\n\u4ee5\u4e0b\u306eTextView\u3092\u66f8\u3044\u305f\u3068\u3057\u307e\u3059\u3002\n\nactivity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"person\"\n            type=\"foo.bar.Person\"/>\n    </data>\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"@{person}\"/>\n</layout>\n\n\nTextView\u306eandroid:text\u306b\u3001Person\u578b\u306e\u5909\u6570\u3092\u4ee3\u5165\u3057\u3066\u3044\u307e\u3059\u3002\n\u901a\u5e38\u3001TextView\u306b\u306fPerson\u578b\u3092\u53d7\u3051\u53d6\u308bsetText()\u30e1\u30bd\u30c3\u30c9\u306f\u5b58\u5728\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u3053\u308c\u306f\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u3053\u3053\u3067@BindingAdapter\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u5c5e\u6027\u5b9a\u7fa9\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n@BindingAdapter\u306f\u4efb\u610f\u306e\u30af\u30e9\u30b9\u306b\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\uff08\u7af6\u5408\u3059\u308b\u5834\u5408\u306f\u3001\u5148\u306b\u898b\u3064\u304b\u3063\u305f\u307b\u3046\u304c\u512a\u5148\u3055\u308c\u308b\u3063\u307d\u3044\u3067\u3059\uff09\n\nCustomTextViewBindingAdapter.java\npublic class CustomTextViewBindingAdapter {\n\n    @BindingAdapter(\"android:text\")\n    public static void setText(TextView textView, Person person) {\n        String name = person != null ? person.getName() : null;\n        textView.setText(name)\n    }\n}\n\n\n@BindingAdapter\u306e\u5b9a\u7fa9\u30eb\u30fc\u30eb\u306f\u3001\n\n\npublic static \u306a\u30e1\u30bd\u30c3\u30c9\u3067\u3042\u308b\u3053\u3068\n\u7b2c\u4e00\u5f15\u6570\u3092\u9069\u7528\u5bfe\u8c61\u306eView\u3068\u3059\u308b\u3053\u3068\n\n\n\u30b5\u30d6\u30af\u30e9\u30b9\u306b\u3082\u9069\u7528\u3055\u308c\u308b\n\n\n\u7b2c\u4e8c\u5f15\u6570\u4ee5\u964d\u3068\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306evalue\u306e\u5c5e\u6027\u306e\u9806\u756a\u3092\u5408\u308f\u305b\u308b\u3053\u3068\n\n\u3067\u3059\u3002\n\u4e0a\u306e\u5b9a\u7fa9\u3067\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u304cTextView\u306a\u306e\u3067\u3001TextView\u3068\u305d\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\u7b2c\u4e8c\u5f15\u6570\u306fPerson\u578b\u306a\u306e\u3067\u3001android:text\u306bPerson\u578b\u306e\u5834\u5408\u306b\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\u307e\u305f\u3001value\u306b\u306f\u8907\u6570\u306e\u5c5e\u6027\u3092\u66f8\u3051\u308b\u306e\u3067\u3001\n\nCustomTextViewBindingAdapter.java\n@BindingAdapter({\n    \"firstName\",\n    \"lastName\"\n}, requireAll = false)\npublic static void setText(TextView textView, String firstName, String lastName) {\n    String name = String.format(%s%s, \n            lastName != null ? lastName : \"\",\n            firstName != null ? firstName : \"\");\n\n    textView.setText(name);\n}\n\n\n\u3053\u3093\u306a\u66f8\u304d\u65b9\u3082\u3067\u304d\u307e\u3059\u3002\nrequireAll\u304ctrue\u306e\u5834\u5408\u306f\u3001\u6307\u5b9a\u3057\u305f\u5c5e\u6027\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3060\u3051\u547c\u3070\u308c\u307e\u3059\uff08\u30c7\u30d5\u30a9\u30eb\u30c8true\uff09\nandroid:\u4ee5\u5916\u3092\u66f8\u304f\u304b\u3001\u307e\u305f\u306f\u4f55\u3082\u66f8\u304b\u306a\u3044\u5834\u5408\u306fapp:namespace\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306eTextViewBindingAdapter\u3067\u306f\u3001addTextChangedListener(TextWatcher)\u306e\u5404\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5206\u5272\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u306e\u3067\u3001android:onTextChanged\u306a\u3093\u3066\u5c5e\u6027\u304c\u4f7f\u3048\u305f\u308a\u3057\u307e\u3059\u3002\n\nTips\n\n\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n\u516c\u5f0f\u306e\u30b5\u30f3\u30d7\u30eb\u3060\u3068\u3001\u30e1\u30bd\u30c3\u30c9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u4f7f\u3048\u308b\u30a2\u30d4\u30fc\u30eb\u3059\u308b\u305f\u3081\u304bHanlder\u306b\u5b9a\u7fa9\u3059\u308b\u307f\u305f\u3044\u306a\u3081\u3093\u3069\u304f\u3055\u3044\u3053\u3068\u3057\u3066\u307e\u3059\u304c\u3001\u666e\u901a\u306b\u3084\u308b\u3093\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\nactivity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"onTextChanged\"\n            type=\"android.databinding.adapters.TextViewBindingAdapter.OnTextChanged\"/>\n\n        <variable\n            name=\"onOkClick\"\n            type=\"android.view.View.OnClickListener\"/>\n    </data>\n\n    <LinearLayout>\n\n        <EditText\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:onTextChanged=\"@{onTextChanged}\"/>\n\n        <Button\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@android:string/ok\"\n            android:onClick=\"@{onOkClick}\"/>\n\n    </LinearLayout>\n\n</layout>\n\n\n\nMainActivity.java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState)\n        ActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n\n        binding.setOnTextChanged((s, start, before, count) -> {\n            // TextWatcher.onTextChanged()\n        });\n\n        binding.setOnOkClick((v) -> {\n            // click ok button\n        });\n    }\n}\n\n\nView\u306bid\u632f\u3063\u3066\u81ea\u5206\u3067setOnClickListener()\u3059\u308b\u3093\u3067\u3082\u554f\u984c\u306a\u3044\u3067\u3059\u3002\n\nRecyclerView\u306b\u30bb\u30d1\u30ec\u30fc\u30bf\u5165\u308c\u308b\u3084\u3064\n\u524d\u306b\u66f8\u3044\u305f\u3084\u3064\n\n\u53c2\u8003\nData Binding Library | Android Developers\nbindingAdapters | Android\n# \u306f\u3058\u3081\u306b\n\n\u57fa\u672c\u7684\u306a\u3053\u3068\u306f\u7701\u7565\u3057\u3066\u307e\u3059\u3002\n\n## \u8a2d\u5b9a\n\n```build.gradle\nandroid {\n    \u2026\n    dataBinding {\n        enabled = true\n    }\n}\n```\n\n`Android Studio`\u304a\u3088\u3073`gradle plugin`\u306e`2.2.0`\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u4eba\u306f\u3001[\u60b2\u3057\u3044\u30d0\u30b0\u3092\u8e0f\u3080](https://code.google.com/p/android/issues/detail?id=223321)\u306e\u3067`2.2.1`\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n## \u5236\u9650\n\n\u73fe\u72b6\u3067\u306f\u3001**Jack\u30b3\u30f3\u30d1\u30a4\u30e9\u3067DataBinding\u306f\u4f7f\u3048\u307e\u305b\u3093**\u3002\n\u305d\u306e\u305f\u3081\u3001Java8\u306e\u6a5f\u80fd\u304c\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u88dc\u5b8c\u3057\u307e\u3057\u3087\u3046\u3002\n\n| \u6a5f\u80fd | \u30e9\u30a4\u30d6\u30e9\u30ea |\n|:----|:----|\n| Lambda | [Retrolambda](https://github.com/orfjackal/retrolambda) |\n| Stream API | [Lightweight-Stream-API](https://github.com/aNNiMON/Lightweight-Stream-API) |\n\n## \u5236\u7d04\n\n- Java\u306e\u4e88\u7d04\u8a9e\u306b\u6e96\u62e0\n- `context`\u306f\u5909\u6570\u540d\u3068\u3057\u3066\u4f7f\u3048\u307e\u305b\u3093\n - **Context\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u53c2\u7167\u3067\u304d\u307e\u3059**\n- \u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u306f\u4f7f\u3048\u307e\u305b\u3093\n - \u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u306e\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3068\u30d3\u30eb\u30c9\u306b\u5931\u6557\u3057\u307e\u3059\n\n## DataBinding\u306e\u7279\u5fb4\n\n\u3068\u308a\u3042\u3048\u305a\u3053\u306e\u3078\u3093\u306b\u89e6\u308c\u307e\u3059\u3002\n\n- Null\u5b89\u5168\n- \u30e1\u30bd\u30c3\u30c9\u30a2\u30af\u30bb\u30b9\u306e\u52b9\u7387\u5316\n- merge\u30bf\u30b0\u4e0d\u8981\n- DataBinding\u306e\u9023\u4fc2\n- \u30ab\u30b9\u30bf\u30e0\u5c5e\u6027\n\n\n# Null\u5b89\u5168\n\n`DataBinding`\u3067\u306f\u3001`\u30ec\u30a4\u30a2\u30a6\u30c8`\u306b\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f`NullPointerException`\u306b\u306a\u3089\u306a\u3044\u3068\u3044\u3046\u7279\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\u7279\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u3053\u308c\u306b\u306f\u914d\u5217\u3084List\u306e`ArrayIndexOutOfBoundsException`\u306a\u3069\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\n```activity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"person\"\n            type=\"foo.bar.Person\"/>\n    </data>\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"@{person.name}\"/>\n\n</layout>\n```\n\n\u3053\u306e\u5834\u5408\u3001\u30b3\u30fc\u30c9\u5074\u3067\n\n```MainActivity.java\nActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\nbinding.setPerson(null);\n```\n\n\u3068\u3001`null`\u3092\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u3066\u3082\u3001\u306c\u308b\u307d\u306b\u306f\u306a\u308a\u307e\u305b\u3093\u3002\n\n```\nandroid:text=\"@{person.name.firstName}\"\n```\n\u3053\u306e\u5834\u5408\u306e\u3001`name`\u304c`null`\u306e\u5834\u5408\u3082\u540c\u69d8\u3067\u3059\u3002\n\u914d\u5217\u5916\u30a2\u30af\u30bb\u30b9\u306e\u5834\u5408\u3082\u540c\u69d8\u306b\u5b89\u5168\u306b\u51e6\u7406\u3057\u3066\u304f\u308c\u307e\u3059\u3002\uff08\u5b9f\u88c5\u4e0a\u306f`null`\u3067\u3042\u308b\u3068\u5224\u5b9a\u3055\u308c\u308b\uff09\n\n`DataBinding`\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u30b7\u30e5\u30ac\u30fc\u3068\u3057\u3066\u3001**`A ?? B`**\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u308c\u306f\u5de6\u8fbaA\u304c`null`\u306e\u5834\u5408\u306b\u53f3\u8fbaB\u3092\u4f7f\u3046\u3068\u3044\u3046\u8868\u73fe\u3067\u3059\u304c\u3001\u3053\u308c\u306f\u5de6\u8fba\u304c\u914d\u5217\u5916\u30a2\u30af\u30bb\u30b9\u3067\u3042\u3063\u3066\u3082\u540c\u69d8\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\n# \u30e1\u30bd\u30c3\u30c9\u30a2\u30af\u30bb\u30b9\u306e\u52b9\u7387\u5316\n\n`DataBinding`\u3067\u306f**1\u56de\u306e\u753b\u9762\u66f4\u65b0**\u3067\u3001**\u540c\u3058\u51e6\u7406\u306f1\u5ea6\u3057\u304b\u884c\u308f\u306a\u3044**\u3088\u3046\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u306f\u3069\u3046\u3044\u3046\u3053\u3068\u304b\u3068\u3044\u3046\u3068\u3001\n\n```activity_main.xml\n\u2026\n<TextView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"@{person.getName()}\"/>\n\n<TextView\n    android:layout_width=\"wrap_content\"\n    android:layout_height=\"wrap_content\"\n    android:text=\"@{person.getName() + ` (` + person.getAge() + `)`}\"/>\n\n```\n\n\u3053\u306e\u3088\u3046\u306b\u30012\u3064\u306e`TextView`\u3067\u540c\u3058\u30e1\u30bd\u30c3\u30c9`getName()`\u3078\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u751f\u6210\u3055\u308c\u308b\u30b3\u30fc\u30c9\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f7f\u308f\u308c\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\uff08\u5b9f\u969b\u306e\u30b3\u30fc\u30c9\u3068\u306f\u7570\u306a\u308a\u307e\u3059\uff09\n\n```ActivityMainBinding.java\nString name = person.getName();\nint age = person.getAge();\n\ntextView1.setText(name);\ntextView2.setText(name + \" (\" + age + \")\");\n```\n\n\u3053\u306e\u7279\u6027\u306f`null\u30c1\u30a7\u30c3\u30af`\u306b\u3082\u9069\u7528\u3055\u308c\u3001\u81ea\u5206\u3067\u66f8\u304f\u3068\u3081\u3093\u3069\u304f\u3055\u3044\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u51fa\u3057\u3092\u81ea\u52d5\u3067\u884c\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\n## getter\u306e\u7279\u6027\n\n\u3061\u306a\u307f\u306b\u3001\u4e0a\u3067\u306f`person.getName()`\u3068\u66f8\u304d\u307e\u3057\u305f\u304c\u3001`DataBinding`\u306f**public\u306agetter**\u3092\u5909\u6570\u30a2\u30af\u30bb\u30b9\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n`person.getName()`\u306e\u5834\u5408`person.name`\u3068\u3057\u3066\u3082\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\uff08\u3080\u3057\u308d\u5f8c\u8005\u3057\u304b\u88dc\u5b8c\u3055\u308c\u307e\u305b\u3093\uff09\n\n\u3067\u306f\u3001`person.getName()`\u3068`person.name`\u304c\u6df7\u5728\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u306e\u304b\u3002\n\u3053\u308c\u306f\u3001\u5225\u306e\u51e6\u7406\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u308b\u3088\u3046\u3067\u30012\u3064\u306e\u5909\u6570\u306b\u5206\u5272\u3055\u308c\u307e\u3059\u3002\u3061\u306a\u307f\u306b`name`\u304c**public\u306a\u5909\u6570**\u3060\u3063\u305f\u3068\u3057\u3066\u3082\u3001`person.name`\u306f**getter\u3092\u512a\u5148\u3057\u3066\u547c\u3073\u51fa\u3055\u308c\u307e\u3059**\u3002\n\n\n# merge\u30bf\u30b0\u4e0d\u8981\n\n\u30ec\u30a4\u30a2\u30a6\u30c8XML\u3067\u306f\u3001`merge`\u30bf\u30b0\u3068\u3044\u3046\u3082\u306e\u304c\u5b58\u5728\u3057\u307e\u3059\u3002\n\u3053\u308c\u306f`include`\u30bf\u30b0\u3084`ViewGroup`\u306b\u5bfe\u3057\u3066`attachToRoot=true`\u3067\u30ec\u30a4\u30a2\u30a6\u30c8\u3092`inflate`\u3057\u305f\u3068\u304d\u306b\u3001\u3069\u306e\u3088\u3046\u306a\u968e\u5c64\u306b\u306a\u308b\u304b\u3092\u6307\u5b9a\u3059\u308b\u3082\u306e\u3067\u3059\u3002\uff08\u8a73\u7d30\u306f\u7701\u304d\u307e\u3059\uff09\n\n`DataBinding`\u306f\u30c8\u30c3\u30d7\u968e\u5c64\u3092`layout`\u30bf\u30b0\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u308c\u306b\u5bfe\u3057\u3066`merge`\u30bf\u30b0\u306f\u30c8\u30c3\u30d7\u968e\u5c64\u306b\u3057\u304b\u5b9a\u7fa9\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u3067\u306f\u3069\u3046\u3059\u308b\u306e\u304b\uff1f\n\n\n\u7b54\u3048\u306f\u3001**`merge`\u30bf\u30b0\u306f\u5229\u7528\u3067\u304d\u306a\u3044**\u3067\u3059\u3002\n\u516c\u5f0f\u3092\u898b\u3066\u3082\u3001[Data binding does not support include as a direct child of a merge element.](https://developer.android.com/topic/libraries/data-binding/index.html#includes)\u3068\u3057\u304b\u66f8\u3044\u3066\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u3053\u306e\u8aac\u660e\u3001\u975e\u5e38\u306b\u4e0d\u89aa\u5207\u306a\u3093\u3067\u3059\u304c\u3001\u5b9f\u969b\u306f**`merge`\u30bf\u30b0\u3092\u4f7f\u3046\u5fc5\u8981\u304c\u306a\u3044**\u306e\u307b\u3046\u304c\u6b63\u3057\u3044\u3067\u3059\u3002\n\n`layout`\u30bf\u30b0\u304c\u975e\u5e38\u306b\u67d4\u8edf\u306b\u3067\u304d\u3066\u3044\u3066\u3001`include`\u30bf\u30b0\u3067\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u633f\u5165\u3057\u305f\u5834\u5408\u3001`merge`\u306e\u5f79\u5272\u3092\u679c\u305f\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u9006\u306b\u30b3\u30fc\u30c9\u3067`inflate`\u3057\u305f\u5834\u5408\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066`FrameLayout`\u3067\u56f2\u3063\u3066\u304f\u308c\u307e\u3059\u3002\u3064\u307e\u308a\u3001\u30a8\u30f3\u30b8\u30cb\u30a2\u306f\u3053\u306e\u52d5\u4f5c\u306b\u3064\u3044\u3066\u6c17\u306b\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\n# DataBinding\u306e\u9023\u4fc2\n\n`include`\u30bf\u30b0\u95a2\u9023\u3067\u3082\u30462\u3064\u4fbf\u5229\u306a\u52d5\u4f5c\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n## DataBinding\u304b\u3089DataBinding\u3092\u53d6\u5f97\u3059\u308b\n\n```activity_main.xml\n<layout>\n    \u2026\n    <LinearLayout>\n        \u2026\n        <include\n            android:id=\"@+id/foo_binding\"\n            layout=\"@layout/layout_foo\"/>\n\n    </LinearLayout>\n</layout>\n```\n\n```layout_foo.xml\n<layout>\n    <data>\n        <variable\n            name=\"age\"\n            type=\"int\"/>  \n    </data>\n\n    \u2026\n</layout>\n```\n\n`activity_main.xml`\u3067\u3001`include`\u30bf\u30b0\u306b`id`\u3092\u632f\u3063\u3066\u307f\u307e\u3059\u3002\n\u3059\u308b\u3068\u30b3\u30fc\u30c9\u5074\u3067\u306f\u3001\n\n```MainActivity.java\nActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n\nPerson person = new Person(\"\u5c71\u7530\u592a\u90ce\", 25);\nbinding.setPerson(person);\n\n// Binding\u304b\u3089Binding\u304c\u751f\u3048\u308b\nLayoutFooBinding fooBinding = binding.fooBinding;\nfooBinding.setAge(person.getAge());\n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001`ActivityMainBinding`\u304b\u3089`LayoutFooBinding`\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n`View`\u3001`DataBinding`\u306b\u9650\u3089\u305a\u3001\u3068\u308a\u3042\u3048\u305a\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3051\u308c\u3070**`id`\u3092\u632f\u308c\u3070\u751f\u3048\u3066\u304f\u308b**\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u9006\u306b`id`\u3092\u632f\u3089\u306a\u3051\u308c\u3070\u96a0\u853d\u3067\u304d\u307e\u3059\u3002\n\n## DataBinding\u304b\u3089DataBinding\u3078\u306e\u30c7\u30fc\u30bf\u6e21\u3057\n\n\u4e0a\u306e\u4f8b\u3067\u306f\u3001\u30b3\u30fc\u30c9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u6e21\u3057\u3066\u3044\u307e\u3057\u305f\u304c\u3001\u3058\u3064\u306f\u3053\u306e\u30b3\u30fc\u30c9\u306f\u30ec\u30a4\u30a2\u30a6\u30c8xml\u3067\u5b8c\u7d50\u3055\u305b\u308b\u3053\u3068\u3067\u304d\u307e\u3059\u3002\n\n`layout_foo.xml`\u306b\u306f\u3001`int\u578b`\u306e\u5909\u6570`age`\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u5834\u5408\u3001`include`\u3057\u3066\u3044\u308b\u5074\u306e`activity_main.xml`\u306f\u3001`include`\u30bf\u30b0\u306e\u5c5e\u6027\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8a18\u8ff0\u304c\u3067\u304d\u307e\u3059\u3002\n\n```activity_main.xml\n<layout>\n    \u2026\n    <LinearLayout>\n        \u2026\n        <include\n            layout=\"@layout/layout_foo\"\n            app:age=\"@{person.age}\"/>\n\n    </LinearLayout>\n</layout>\n```\n\n`layout_foo.xml`\u3067\u5b9a\u7fa9\u3057\u305f`variable`\u306e\u540d\u524d\u3092\u305d\u306e\u307e\u307e\u3001`app:<variableName>`\u3068\u3057\u3066\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n# \u30ab\u30b9\u30bf\u30e0\u5c5e\u6027\n\n`data`\u30bf\u30b0\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5909\u6570\u4ee5\u5916\u306b\u3001`DataBinding`\u3067\u306f\u4efb\u610f\u306e\u5c5e\u6027\u3092\u5916\u304b\u3089\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n| \u5b9a\u7fa9 | \u5c5e\u6027\u540d | \u5229\u7528\u53ef\u80fd\u7b87\u6240 |\n|:-----|:------|:------------|\n| `variable`\u30bf\u30b0 | `app:<variableName>` | `include`\u30bf\u30b0 |\n| `View`\u306e`public setter` | `android:onClickListener`\u306a\u3069 | \u5bfe\u8c61\u306e`View` |\n| `@BindingMethod`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 | \u4efb\u610f\u306e\u540d\u524d | \u5b9a\u7fa9\u5bfe\u8c61\u306e`View` |\n| `@BindingAdapter`\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3 | \u4efb\u610f\u306e\u540d\u524d | \u5f15\u6570\u306e`View` |\n\n\u3053\u308c\u3089\u306e\u3046\u3061\u3001\u4e0b3\u3064\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n## public setter\u306e\u5c5e\u6027\u5316\n\n`DataBinding`\u3067\u306f`View`\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5168\u3066\u306e**public setter**\u306b\u5c5e\u6027\u3068\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\uff08hide\u306a\u3082\u306e\u306f\u308f\u304b\u308a\u307e\u305b\u3093\uff09\n\n\u4f8b\u3048\u3070`CustomView`\u3092\u4f5c\u308b\u3068\u304d\u3001\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u3092`setter`\u304b\u3089\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u3057\u305f\u3068\u3057\u307e\u3059\u3002\n\n```CustomView.java\npublic CustomView extends View {\n    \u2026\n\n    public void setPerson(Person person) {\n        \u2026\n        invalidate();\n    }\n}\n```\n\n\u901a\u5e38\u306f\u3001\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057\u3066\u30b3\u30fc\u30c9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u6e21\u3059\u51e6\u7406\u3092\u66f8\u304f\u3068\u601d\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001`DataBinding`\u3067\u306f\u3001**public\u306asetter\u306f\u5c5e\u6027\u5316\u3055\u308c\u308b**\u3068\u3044\u3046\u7279\u6027\u3092\u6301\u3064\u305f\u3081\u3001\u30ec\u30a4\u30a2\u30a6\u30c8xml\u3067\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```activity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"person\"\n            type=\"foo.bar.Person\"/>\n    </data>\n\n    <foo.bar.CustomView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        app:person=\"@{person}\"/>\n\n</layout>\n```\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u30011\u3064\u306e\u30c7\u30fc\u30bf\u3092\u8907\u6570\u306e`View`\u306b\u305d\u308c\u305e\u308c\u30bb\u30c3\u30c8\u305b\u305a\u306b\u3001`DataBinding`\u306b\u6e21\u305b\u3070OK\u3068\u3044\u3046\u4e00\u8cab\u3057\u305f\u51e6\u7406\u306b\u3067\u304d\u307e\u3059\u3002\n\n\u305f\u3060\u3057\u3053\u306e\u5834\u5408\u3001**\u5024\u304c`null`\u306e\u5834\u5408\u306e\u51e6\u7406\u306fCustomView\u306b\u59d4\u306d\u3089\u308c\u308b**\u3068\u3044\u3046\u70b9\u306b\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\uff08\u5b9f\u88c5\u6b21\u7b2c\u3067\u306c\u308b\u307d\u304c\u8d77\u3053\u308a\u5f97\u308b\uff09\n\n## BindingMethod\n\n`@BindingMethods`\u53ca\u3073`@BindingMethod`\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001**\u4efb\u610f\u306e\u5c5e\u6027\u3092\u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u30ea\u30f3\u30af\u3055\u305b\u308b**\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3068\u3057\u3066\u3001`View`\u306b\u306f`android:onClick`\u3068\u3044\u3046\u5c5e\u6027\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e\u5c5e\u6027\u540d`onClick`\u306b\u5bfe\u5fdc\u3059\u308b\u30e1\u30bd\u30c3\u30c9`setOnClick()`\u306f`View`\u306b\u306f\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u306b\u3082\u95a2\u308f\u3089\u305a\u3001`android:onClick=\"@{onClickListener}\"`\u306f\u6709\u52b9\u3067\u3059\u3002\n\n\u3053\u308c\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b`ViewBindingAdapter`\u306b\u3001\u5c5e\u6027\u540d\u3068\u30e1\u30bd\u30c3\u30c9\u306e\u5bfe\u5fdc\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3067\u3059\u3002\n\n```ViewBindingAdapter.java\n\n@BindingMethods({\n    \u2026\n    @BindingMethod(type = View.class, attribute = \"android:onClick\", method = \"setOnClickListener\")\n})\npublic class ViewBindingAdapter {\n    \u2026\n}\n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001`DataBinding`\u3067\u306f\u3001\u5c5e\u6027\u540d\u3068\u30e1\u30bd\u30c3\u30c9\u540d\u304c\u4e00\u81f4\u3057\u306a\u3044\u3044\u304f\u3064\u304b\u306e\u5c5e\u6027\u306b\u3064\u3044\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ea\u30f3\u30af\u5b9a\u7fa9\u304c\u3055\u308c\u3066\u3044\u307e\u3059\u3002([\u53c2\u7167](https://android.googlesource.com/platform/frameworks/data-binding/+/android-7.0.0_r29/extensions/baseAdapters/src/main/java/android/databinding/adapters))\n\n## BindingAdapter\n\n`@BindingMethod`\u306f\u65e2\u5b58\u306e\u30e1\u30bd\u30c3\u30c9\u3078\u306e\u30ea\u30f3\u30af\u3067\u3057\u305f\u304c\u3001`@BindingAdapter`\u306f\u5b9f\u88c5\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e`TextView`\u3092\u66f8\u3044\u305f\u3068\u3057\u307e\u3059\u3002\n\n```activity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"person\"\n            type=\"foo.bar.Person\"/>\n    </data>\n\n    <TextView\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"@{person}\"/>\n</layout>\n```\n\n`TextView`\u306e`android:text`\u306b\u3001`Person\u578b`\u306e\u5909\u6570\u3092\u4ee3\u5165\u3057\u3066\u3044\u307e\u3059\u3002\n\u901a\u5e38\u3001`TextView`\u306b\u306f`Person\u578b`\u3092\u53d7\u3051\u53d6\u308b`setText()`\u30e1\u30bd\u30c3\u30c9\u306f\u5b58\u5728\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u3053\u308c\u306f\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u3057\u304b\u3057\u3001\u3053\u3053\u3067`@BindingAdapter`\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u5c5e\u6027\u5b9a\u7fa9\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n`@BindingAdapter`\u306f\u4efb\u610f\u306e\u30af\u30e9\u30b9\u306b\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\uff08\u7af6\u5408\u3059\u308b\u5834\u5408\u306f\u3001\u5148\u306b\u898b\u3064\u304b\u3063\u305f\u307b\u3046\u304c\u512a\u5148\u3055\u308c\u308b\u3063\u307d\u3044\u3067\u3059\uff09\n\n```CustomTextViewBindingAdapter.java\npublic class CustomTextViewBindingAdapter {\n\n    @BindingAdapter(\"android:text\")\n    public static void setText(TextView textView, Person person) {\n        String name = person != null ? person.getName() : null;\n        textView.setText(name)\n    }\n}\n```\n\n`@BindingAdapter`\u306e\u5b9a\u7fa9\u30eb\u30fc\u30eb\u306f\u3001\n\n- **public static** \u306a\u30e1\u30bd\u30c3\u30c9\u3067\u3042\u308b\u3053\u3068\n- \u7b2c\u4e00\u5f15\u6570\u3092\u9069\u7528\u5bfe\u8c61\u306eView\u3068\u3059\u308b\u3053\u3068\n - **\u30b5\u30d6\u30af\u30e9\u30b9\u306b\u3082\u9069\u7528\u3055\u308c\u308b**\n- \u7b2c\u4e8c\u5f15\u6570\u4ee5\u964d\u3068\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e`value`\u306e\u5c5e\u6027\u306e\u9806\u756a\u3092\u5408\u308f\u305b\u308b\u3053\u3068\n\n\u3067\u3059\u3002\n\u4e0a\u306e\u5b9a\u7fa9\u3067\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u304c`TextView`\u306a\u306e\u3067\u3001`TextView`\u3068\u305d\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\u7b2c\u4e8c\u5f15\u6570\u306f`Person\u578b`\u306a\u306e\u3067\u3001`android:text`\u306b`Person\u578b`\u306e\u5834\u5408\u306b\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\n\u307e\u305f\u3001`value`\u306b\u306f\u8907\u6570\u306e\u5c5e\u6027\u3092\u66f8\u3051\u308b\u306e\u3067\u3001\n\n```CustomTextViewBindingAdapter.java\n@BindingAdapter({\n    \"firstName\",\n    \"lastName\"\n}, requireAll = false)\npublic static void setText(TextView textView, String firstName, String lastName) {\n    String name = String.format(%s%s, \n            lastName != null ? lastName : \"\",\n            firstName != null ? firstName : \"\");\n\n    textView.setText(name);\n}\n```\n\n\u3053\u3093\u306a\u66f8\u304d\u65b9\u3082\u3067\u304d\u307e\u3059\u3002\n`requireAll`\u304c`true`\u306e\u5834\u5408\u306f\u3001\u6307\u5b9a\u3057\u305f\u5c5e\u6027\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3060\u3051\u547c\u3070\u308c\u307e\u3059\uff08\u30c7\u30d5\u30a9\u30eb\u30c8`true`\uff09\n\n`android:`\u4ee5\u5916\u3092\u66f8\u304f\u304b\u3001\u307e\u305f\u306f\u4f55\u3082\u66f8\u304b\u306a\u3044\u5834\u5408\u306f`app:`namespace\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u307e\u3059\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e`TextViewBindingAdapter`\u3067\u306f\u3001[`addTextChangedListener(TextWatcher)`\u306e\u5404\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5206\u5272\u3057\u3066\u304f\u308c\u3066\u3044\u308b](https://android.googlesource.com/platform/frameworks/data-binding/+/android-6.0.0_r7/extensions/baseAdapters/src/main/java/android/databinding/adapters/TextViewBindingAdapter.java#322)\u306e\u3067\u3001`android:onTextChanged`\u306a\u3093\u3066\u5c5e\u6027\u304c\u4f7f\u3048\u305f\u308a\u3057\u307e\u3059\u3002\n\n# Tips\n\n## \u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\n\n\u516c\u5f0f\u306e\u30b5\u30f3\u30d7\u30eb\u3060\u3068\u3001\u30e1\u30bd\u30c3\u30c9\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u4f7f\u3048\u308b\u30a2\u30d4\u30fc\u30eb\u3059\u308b\u305f\u3081\u304b[`Hanlder`\u306b\u5b9a\u7fa9\u3059\u308b](https://developer.android.com/topic/libraries/data-binding/index.html#event_handling)\u307f\u305f\u3044\u306a\u3081\u3093\u3069\u304f\u3055\u3044\u3053\u3068\u3057\u3066\u307e\u3059\u304c\u3001\u666e\u901a\u306b\u3084\u308b\u3093\u3067\u3082\u5927\u4e08\u592b\u3067\u3059\u3002\n\n```activity_main.xml\n<layout>\n    <data>\n        <variable\n            name=\"onTextChanged\"\n            type=\"android.databinding.adapters.TextViewBindingAdapter.OnTextChanged\"/>\n\n        <variable\n            name=\"onOkClick\"\n            type=\"android.view.View.OnClickListener\"/>\n    </data>\n\n    <LinearLayout>\n\n        <EditText\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:onTextChanged=\"@{onTextChanged}\"/>\n\n        <Button\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:text=\"@android:string/ok\"\n            android:onClick=\"@{onOkClick}\"/>\n\n    </LinearLayout>\n\n</layout>\n```\n\n```MainActivity.java\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState)\n        ActivityMainBinding binding = DataBindingUtil.setContentView(this, R.layout.activity_main);\n\n        binding.setOnTextChanged((s, start, before, count) -> {\n            // TextWatcher.onTextChanged()\n        });\n\n        binding.setOnOkClick((v) -> {\n            // click ok button\n        });\n    }\n}\n```\n\n`View`\u306b`id`\u632f\u3063\u3066\u81ea\u5206\u3067`setOnClickListener()`\u3059\u308b\u3093\u3067\u3082\u554f\u984c\u306a\u3044\u3067\u3059\u3002\n\n## RecyclerView\u306b\u30bb\u30d1\u30ec\u30fc\u30bf\u5165\u308c\u308b\u3084\u3064\n\n[\u524d\u306b\u66f8\u3044\u305f\u3084\u3064](http://qiita.com/ushi3_jp/items/8ccc7bc417c01754caed)\n\n# \u53c2\u8003\n\n[Data Binding Library | Android Developers](https://developer.android.com/topic/libraries/data-binding/index.html)\n\n[bindingAdapters | Android]\n(https://android.googlesource.com/platform/frameworks/data-binding/+/android-7.0.0_r29/extensions/baseAdapters/src/main/java/android/databinding/adapters)\n\n\n"}