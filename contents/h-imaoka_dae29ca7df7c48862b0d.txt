{"tags": ["dovecot", "imap", "pop3"], "context": " More than 1 year has passed since last update.\n\nCentos6 (2.x)\n\n/etc/dovecot/dovecot.conf\n\ndovecot.conf\n#use minimal protocols\n#protocols = imap pop3 lmtp\nprotocols = imap pop3\n\n#only ipv4 :: mean all ipv6 ip's\n#listen = *, ::\nlisten = *\n\n\n\n\n/etc/dovecot/conf.d .. 10-auth.conf\n\n10-auth.conf\n# dovecot 1.x default is \"no\"\ndisable_plaintext_auth = no\n\n# use username h-imaoka@example.jp  = <h-imaoka>\nauth_username_format = %n\n\n#keep it\nauth_mechanisms = plain\n\n\n\nauth-system.conf.ext\n\nauth-system.conf.ext\npassdb {\n  driver = pam\n  # [session=yes] [setcred=yes] [failure_show_msg=yes] [max_requests=<n>]\n  # [cache_key=<key>] [<service name>]\n  #args = dovecot\n  args = login\n}\n\n\n\nargs = login means /etc/pam.d/login\n\n10-mail.conf\n\n10-mail.conf\n# There are a few special variables you can use, eg.:\n#\n#   %u - username\n#   %n - user part in user@domain, same as %u if there's no domain\n#   %d - domain part in user@domain, empty if there's no domain\n#   %h - home directory\n#\n# See doc/wiki/Variables.txt for full list. Some examples:\n#\n#   mail_location = maildir:~/Maildir\n#   mail_location = mbox:~/mail:INBOX=/var/mail/%u\n#   mail_location = mbox:/var/mail/%d/%1n/%n:INDEX=/var/indexes/%d/%1n/%n\n\nmail_location = mbox:~/mail:INBOX=/var/mail/%u\n\nmail_access_groups = mail\n\n\n\n\n10-ssl.conf (optional)\n\n10-ssl.conf\n# SSL/TLS support: yes, no, required. <doc/wiki/SSL.txt>\nssl = no\n\n\n\ntrouble shooting\n\ncan not start daemon (protocol error)\nset listen port = * (ipv4 only)\n\npam auth failure (locked account)\nuse login pam auth.  \nclear failure count\npam_tally2 --user=<user name> --reset\ncorrent failure count\npam_tally2 --user=<user name>\n\nlogin succeeded but disconnected from server\nconfirm mail_location setting\n# Centos6 (2.x)\n## /etc/dovecot/dovecot.conf\n```bash:dovecot.conf\n#use minimal protocols\n#protocols = imap pop3 lmtp\nprotocols = imap pop3\n\n#only ipv4 :: mean all ipv6 ip's\n#listen = *, ::\nlisten = *\n\n```\n\n## /etc/dovecot/conf.d .. 10-auth.conf\n```bash:10-auth.conf\n# dovecot 1.x default is \"no\"\ndisable_plaintext_auth = no\n\n# use username h-imaoka@example.jp  = <h-imaoka>\nauth_username_format = %n\n\n#keep it\nauth_mechanisms = plain\n```\n\n## auth-system.conf.ext\n```bash:auth-system.conf.ext\npassdb {\n  driver = pam\n  # [session=yes] [setcred=yes] [failure_show_msg=yes] [max_requests=<n>]\n  # [cache_key=<key>] [<service name>]\n  #args = dovecot\n  args = login\n}\n\n```\n`args = login` means `/etc/pam.d/login`\n\n## 10-mail.conf\n```bash:10-mail.conf\n# There are a few special variables you can use, eg.:\n#\n#   %u - username\n#   %n - user part in user@domain, same as %u if there's no domain\n#   %d - domain part in user@domain, empty if there's no domain\n#   %h - home directory\n#\n# See doc/wiki/Variables.txt for full list. Some examples:\n#\n#   mail_location = maildir:~/Maildir\n#   mail_location = mbox:~/mail:INBOX=/var/mail/%u\n#   mail_location = mbox:/var/mail/%d/%1n/%n:INDEX=/var/indexes/%d/%1n/%n\n\nmail_location = mbox:~/mail:INBOX=/var/mail/%u\n\nmail_access_groups = mail\n\n```\n\n## 10-ssl.conf (optional)\n```bash:10-ssl.conf\n# SSL/TLS support: yes, no, required. <doc/wiki/SSL.txt>\nssl = no\n```\n\n# trouble shooting\n\n## can not start daemon (protocol error)\nset listen port = * (ipv4 only)\n\n## pam auth failure (locked account)\nuse `login` pam auth.  \n\nclear failure count\n`pam_tally2 --user=<user name> --reset`\ncorrent failure count\n`pam_tally2 --user=<user name>`\n\n\n## login succeeded but disconnected from server\nconfirm `mail_location` setting\n\n"}