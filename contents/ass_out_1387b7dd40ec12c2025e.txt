{"context": "DEPRECATED\nmsys2\u3067\u306fpeco\u3092\u8ae6\u3081fzy\u3092\u4f7f\u3046\u3068\u5e78\u305b\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nhttp://qiita.com/ubnt_intrepid/items/ea6df730e69a0f402cca#_reference-bde7680190061d3dc07b\n\ntldr\n\u3059\u3054\u304f\u7121\u7406\u3084\u308a\u3060\u304c\u4ee5\u4e0b\u306e\u65b9\u6cd5\u306b\u3088\u308amsys2\u3067peco\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\nfunction peco_ls() \uff5b\n    ls > /tmp/ls.txt\n    script -qc \"winpty peco /tmp/ls.txt\" /tmp/typescript\n    local target=\"$(col -bx < /tmp/typescript | tail -2 | head -1 | sed s/0K$// | sed s/^0m// )\"\n    echo \"$target\"\n}\n\n\u52d5\u4f5c\u30a4\u30e1\u30fc\u30b8\n\n\u6982\u8981\n\npeco\u306binput\u3092\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4e0e\u3048\u308b\npeco\u3067\u9078\u629e\u3057\u305f\u3082\u306e\u3092\u6a19\u6e96\u51fa\u529b\u3059\u308b(\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6319\u52d5)\nscript\u30b3\u30de\u30f3\u30c9\u3067\u6a19\u6e96\u51fa\u529b\u306e\u5185\u5bb9\u3092\u4fdd\u5b58\u3057\u3066\u53d6\u5f97\u3059\u308b\n\n\nwhat\n\npeco\u306finput\u3092\u3001\u6a19\u6e96\u5165\u529b\u304b\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\nmsys2\u3067\u5bfe\u8a71\u7684\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408winpty\u3092\u631f\u3080\u5fc5\u8981\u304c\u3042\u308b\n\u3057\u304b\u3057winpty\u306f\u5165\u51fa\u529b\u306b\u30d1\u30a4\u30d7\u3092\u4f7f\u3048\u306a\u3044\u3063\u307d\u3044(input is not a tty\u306a\u3069\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b)\npeco\u306binput\u3092\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4e0e\u3048\u308b\n\n\n\u5fdc\u7528\uff08\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u4f5c\u3063\u3066\u4f7f\u3044\u3084\u3059\u304f\u3059\u308b\uff09\n  function _pecowrap_exec() {\n    eval \"$@\" > /tmp/cmd.log\n    script -e -qc \"winpty peco /tmp/cmd.log\" /tmp/script.log\n  }\n\n  function _pecowrap_result() {\n    local result=\"$(col -bx < /tmp/script.log | tr -d '\\n' | sed 's/.*0m\\(.*\\)0K.*$/\\1/g' | sed 's/0K//g')\" # TODO \u5f37\u5f15\u3002\u7279\u306b\"0K\"\u304c\u542b\u307e\u308c\u308b\u3068\u524a\u9664\u3057\u3061\u3083\u3046\n    echo \"${result}\"\n  }\n\n  function c() {\n    _pecowrap_exec \"find $1 -maxdepth 1 -type d | sort\" || return\n    cd $(_pecowrap_result)\n  }\n\n  function v() {\n    _pecowrap_exec \"find $1 -maxdepth 1 -type f | sort\" || return\n    vi $(_pecowrap_result)\n  }\n\n\n\u8a66\u884c\u932f\u8aa4\u30e1\u30e2\n\u4ee5\u4e0b\u3092\u8a66\u3057\u305f\u304c\u5168\u3066\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\n\npeco\u4ee5\u5916\u306e\u30c4\u30fc\u30eb\u3092\u8a66\u3059\n\n\nfzf\netc.\n\n\nmintty\u4ee5\u5916\u306eterminal\u3092\u8a66\u3059\n\n\n\u96d1\u611f\n\nWindows Subsystem for Linux\u304c\u6765\u305f\u3089\u3001msys2\u4e0d\u8981\u306b\u3067\u304d\u308b\u304b\u3082\u306a\u306e\u3067\u3001\u4eca\u306fworkaround\u3067\u4e57\u308a\u5207\u308d\u3046\n\n\n**DEPRECATED**\nmsys2\u3067\u306fpeco\u3092\u8ae6\u3081fzy\u3092\u4f7f\u3046\u3068\u5e78\u305b\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nhttp://qiita.com/ubnt_intrepid/items/ea6df730e69a0f402cca#_reference-bde7680190061d3dc07b\n\n\n\n## tldr\n\n\u3059\u3054\u304f\u7121\u7406\u3084\u308a\u3060\u304c\u4ee5\u4e0b\u306e\u65b9\u6cd5\u306b\u3088\u308amsys2\u3067peco\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\n\n```bash\nfunction peco_ls() \uff5b\n    ls > /tmp/ls.txt\n    script -qc \"winpty peco /tmp/ls.txt\" /tmp/typescript\n    local target=\"$(col -bx < /tmp/typescript | tail -2 | head -1 | sed s/0K$// | sed s/^0m// )\"\n    echo \"$target\"\n}\n```\n\n\u52d5\u4f5c\u30a4\u30e1\u30fc\u30b8\n![Animation.gif](https://qiita-image-store.s3.amazonaws.com/0/33349/db705457-1855-02e2-a61c-c0bab888412c.gif)\n\n\u6982\u8981\n\n- peco\u306binput\u3092\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4e0e\u3048\u308b\n- peco\u3067\u9078\u629e\u3057\u305f\u3082\u306e\u3092\u6a19\u6e96\u51fa\u529b\u3059\u308b(\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6319\u52d5)\n- script\u30b3\u30de\u30f3\u30c9\u3067\u6a19\u6e96\u51fa\u529b\u306e\u5185\u5bb9\u3092\u4fdd\u5b58\u3057\u3066\u53d6\u5f97\u3059\u308b\n\n## what\n\n- peco\u306finput\u3092\u3001\u6a19\u6e96\u5165\u529b\u304b\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\n- msys2\u3067\u5bfe\u8a71\u7684\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408winpty\u3092\u631f\u3080\u5fc5\u8981\u304c\u3042\u308b\n- \u3057\u304b\u3057winpty\u306f\u5165\u51fa\u529b\u306b\u30d1\u30a4\u30d7\u3092\u4f7f\u3048\u306a\u3044\u3063\u307d\u3044(input is not a tty\u306a\u3069\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b)\n- peco\u306binput\u3092\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u4e0e\u3048\u308b\n\n## \u5fdc\u7528\uff08\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u4f5c\u3063\u3066\u4f7f\u3044\u3084\u3059\u304f\u3059\u308b\uff09\n\n```bash\n  function _pecowrap_exec() {\n    eval \"$@\" > /tmp/cmd.log\n    script -e -qc \"winpty peco /tmp/cmd.log\" /tmp/script.log\n  }\n\n  function _pecowrap_result() {\n    local result=\"$(col -bx < /tmp/script.log | tr -d '\\n' | sed 's/.*0m\\(.*\\)0K.*$/\\1/g' | sed 's/0K//g')\" # TODO \u5f37\u5f15\u3002\u7279\u306b\"0K\"\u304c\u542b\u307e\u308c\u308b\u3068\u524a\u9664\u3057\u3061\u3083\u3046\n    echo \"${result}\"\n  }\n\n  function c() {\n    _pecowrap_exec \"find $1 -maxdepth 1 -type d | sort\" || return\n    cd $(_pecowrap_result)\n  }\n\n  function v() {\n    _pecowrap_exec \"find $1 -maxdepth 1 -type f | sort\" || return\n    vi $(_pecowrap_result)\n  }\n```\n\n## \u8a66\u884c\u932f\u8aa4\u30e1\u30e2\n\n\u4ee5\u4e0b\u3092\u8a66\u3057\u305f\u304c\u5168\u3066\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\n\n- peco\u4ee5\u5916\u306e\u30c4\u30fc\u30eb\u3092\u8a66\u3059\n    - fzf\n    - etc.\n- mintty\u4ee5\u5916\u306eterminal\u3092\u8a66\u3059\n\n## \u96d1\u611f\n\n- Windows Subsystem for Linux\u304c\u6765\u305f\u3089\u3001msys2\u4e0d\u8981\u306b\u3067\u304d\u308b\u304b\u3082\u306a\u306e\u3067\u3001\u4eca\u306fworkaround\u3067\u4e57\u308a\u5207\u308d\u3046\n", "tags": ["Peco", "msys2", "Bash", "mintty"]}