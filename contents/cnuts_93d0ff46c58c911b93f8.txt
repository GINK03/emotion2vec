{"context": "ASP.NET \u3067\u91cd\u305f\u3044\u30af\u30a8\u30ea\u3092SQL Server\u306b\u6295\u3052\u305f\u3068\u3053\u308d\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u305d\u306e\u5bfe\u51e6\u306b\u3064\u3044\u3066\u306e\u8a18\u9332\u3067\u3059\u3002\n\u30ed\u30b0\u306b\u306f\u300cTimeout \u306b\u9054\u3057\u307e\u3057\u305f\u3002\u64cd\u4f5c\u304c\u5b8c\u4e86\u3059\u308b\u524d\u306b\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u671f\u9593\u304c\u904e\u304e\u305f\u304b\u3001\u307e\u305f\u306f\u30b5\u30fc\u30d0\u30fc\u304c\u5fdc\u7b54\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u300d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3002\n\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n   \u5834\u6240 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryReadByteArray(Byte[] buff, Int32 offset, Int32 len, Int32& totalRead)\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryReadByteArray(Byte[] buff, Int32 offset, Int32 len)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.TrySkipValue(SqlMetaDataPriv md, Int32 columnOrdinal, TdsParserStateObject stateObj)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.TrySkipRow(_SqlMetaDataSet columns, Int32 startCol, TdsParserStateObject stateObj)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()\n\n\u6642\u9593\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u306f3\u304b\u6240\u3002\n(1)web.config\u306econnectionString\u5c5e\u6027\u306bConnection Timeout=180;\u3092\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\n <connectionStrings>   \n    <add name=\"DefaultConnection\" connectionString=\"Data Source=XXXXX;Initial Catalog=XXXXX;Persist Security Info=False;Integrated Security=False;User Id=XXXXX;Password=XXXXX;Connection Timeout=180;\" providerName=\"System.Data.SqlClient\" />\n  </connectionStrings>\n\n(2)web.config\u306ehttpRuntime\u306bexecutionTimeout\u5c5e\u6027\u3092\u8ffd\u52a0\u3057180\u79d2\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\n<system.web>\n    <httpRuntime executionTimeout=\"180\" />\n</system.web>\n\n(3)\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4e2d\u3067\u30b3\u30de\u30f3\u30c9\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593\u3092180\u79d2\u306b\u8a2d\u5b9a\n  SqlCommand cmd = new SqlCommand(\"ExportCSV\", cn);\n\u30fb\u30fb\u30fb\u30fb\u4e2d\u7565\n  cmd.CommandTimeout = 180;\n  cmd.ExecuteNonQuery();\n\n\u79c1\u306f(3)\u306e\u30b3\u30de\u30f3\u30c9\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593\u306b\u3064\u3044\u3066\u6f0f\u308c\u3066\u3044\u3066\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\nASP.NET \u3067\u91cd\u305f\u3044\u30af\u30a8\u30ea\u3092SQL Server\u306b\u6295\u3052\u305f\u3068\u3053\u308d\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u305d\u306e\u5bfe\u51e6\u306b\u3064\u3044\u3066\u306e\u8a18\u9332\u3067\u3059\u3002\n\u30ed\u30b0\u306b\u306f\u300cTimeout \u306b\u9054\u3057\u307e\u3057\u305f\u3002\u64cd\u4f5c\u304c\u5b8c\u4e86\u3059\u308b\u524d\u306b\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u671f\u9593\u304c\u904e\u304e\u305f\u304b\u3001\u307e\u305f\u306f\u30b5\u30fc\u30d0\u30fc\u304c\u5fdc\u7b54\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u300d\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3002\n\n\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n```\n   \u5834\u6240 System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.ReadSniError(TdsParserStateObject stateObj, UInt32 error)\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.ReadSniSyncOverAsync()\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryReadNetworkPacket()\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryPrepareBuffer()\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryReadByteArray(Byte[] buff, Int32 offset, Int32 len, Int32& totalRead)\n   \u5834\u6240 System.Data.SqlClient.TdsParserStateObject.TryReadByteArray(Byte[] buff, Int32 offset, Int32 len)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.TrySkipValue(SqlMetaDataPriv md, Int32 columnOrdinal, TdsParserStateObject stateObj)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.TrySkipRow(_SqlMetaDataSet columns, Int32 startCol, TdsParserStateObject stateObj)\n   \u5834\u6240 System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite, SqlDataReader ds)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)\n   \u5834\u6240 System.Data.SqlClient.SqlCommand.ExecuteNonQuery()\n``` \n\n\u6642\u9593\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u306f3\u304b\u6240\u3002\n(1)web.config\u306econnectionString\u5c5e\u6027\u306bConnection Timeout=180;\u3092\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\n\n```\n <connectionStrings>   \n    <add name=\"DefaultConnection\" connectionString=\"Data Source=XXXXX;Initial Catalog=XXXXX;Persist Security Info=False;Integrated Security=False;User Id=XXXXX;Password=XXXXX;Connection Timeout=180;\" providerName=\"System.Data.SqlClient\" />\n  </connectionStrings>\n```\n\n(2)web.config\u306ehttpRuntime\u306bexecutionTimeout\u5c5e\u6027\u3092\u8ffd\u52a0\u3057180\u79d2\u306b\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\n\n```\n<system.web>\n    <httpRuntime executionTimeout=\"180\" />\n</system.web>\n```\n\n\n(3)\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4e2d\u3067\u30b3\u30de\u30f3\u30c9\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593\u3092180\u79d2\u306b\u8a2d\u5b9a\n\n```\n  SqlCommand cmd = new SqlCommand(\"ExportCSV\", cn);\n\u30fb\u30fb\u30fb\u30fb\u4e2d\u7565\n  cmd.CommandTimeout = 180;\n  cmd.ExecuteNonQuery();\n```\n\n\u79c1\u306f(3)\u306e\u30b3\u30de\u30f3\u30c9\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593\u306b\u3064\u3044\u3066\u6f0f\u308c\u3066\u3044\u3066\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\n", "tags": ["SQLServer", "ASP.NET", "C#"]}