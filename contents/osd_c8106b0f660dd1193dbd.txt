{"context": "\u8ee2\u8077\u30c9\u30e9\u30d5\u30c8\uff5cIT\u30a8\u30f3\u30b8\u30cb\u30a2\u3092\u5e74\u53ce\u30fb\u4ed5\u4e8b\u5185\u5bb9\u3064\u304d\u3067\u7af6\u4e89\u5165\u672d \u306e\u56de\u7b54\u671f\u9650\u304c\u7d42\u4e86\u3057\u305f\u306e\u3067\u3001\u56de\u7b54\u7387\u3092\u96c6\u8a08\u3057\u3066\u307f\u305f\u3002\n\u5143\u3005\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3068R\u306e\u7df4\u7fd2\u3067\u59cb\u3081\u305f\u306e\u3060\u304c\u3001\u524d\u56de \u306f\u30c7\u30fc\u30bf\u306e\u8868\u793a\u3060\u3051\u3067\u7d42\u308f\u3089\u305b\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u4eca\u56de\u306f R \u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u66f8\u3044\u3066\u3044\u304f\u3002\n\n\u6271\u3046\u30c7\u30fc\u30bf\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u4f7f\u3063\u3066\u3001[\u793e\u540d,\u30e6\u30fc\u30b6\u30fcID,\u6307\u540d\u984d,\u56de\u7b54] \u306e\u30c7\u30fc\u30bf\u3092\u62bd\u51fa\u3057\u3001tmp.csv \u306b\u7f6e\u304f\u3002\n$ head -n 3 tmp.csv\nname,user_id,income,reply\nSpeee,1,\u30b4\u30c3\u30c9,\u627f\u8afe\nRetty,2,\u30a6\u30a3\u30b6\u30fc\u30c9,\u627f\u8afe\n\n\n\u5168\u4f53\u306e\u56de\u7b54\u7387\n> x = read.csv(\"tmp.csv\")\n> table(x$reply)\n\n  \u8f9e\u9000   \u627f\u8afe \u672a\u8fd4\u7b54\n   123    197     57\n>\n> round(prop.table(y) * 100)\n\n  \u8f9e\u9000   \u627f\u8afe \u672a\u8fd4\u7b54\n    33     52     15\n\nread.csv \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 header=T \u306a\u306e\u3067\u30011\u884c\u76ee\u306f\u30c7\u30fc\u30bf\u9818\u57df\u3067\u306f\u306a\u304f\u3001\u30d8\u30c3\u30c0\u30fc\u3068\u3057\u3066\u6271\u308f\u308c\u308b\u3002\nx$reply \u3068\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u5217\u30c7\u30fc\u30bf\u304c\u53d6\u308a\u51fa\u305b\u308b\u3002\ntable \u3092\u4f7f\u3063\u3066\u96c6\u8a08\u304c\u3067\u304d\u308b\u3002\nprop.table \u3067\u5272\u5408\u306b\u5909\u63db\u3067\u304d\u308b\u3002\n\u6307\u540d\u5168\u4f53\u306e\u300133%\u304c\u8f9e\u9000\u300152\uff05\u304c\u627f\u8afe\u300115%\u304c\u672a\u8fd4\u7b54\u3067\u3042\u308b\u3002\n\n\u4f1a\u793e\u3054\u3068\u306e\u56de\u7b54\u7387\n> table(x$name, x$reply)\n\n                                     \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54\n  BASE                                  4    6      2\n  freee                                 8   21      2\n  Retty                                21   28     14\n  Sansan                               19   20      8\n  Speee                                14   10      4\n  VASILY                                3    4      1\n  \u30a4\u30b0\u30cb\u30b9                                1    2      0\n  \u30af\u30eb\u30fc\u30ba                                2    4      1\n  \u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09              8    9      2\n  \u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                          6   15      2\n  \u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                      2    2      1\n  \u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                            11   13      2\n  \u30da\u30ed\u30ea                                  4    4      5\n  \u30df\u30af\u30b7\u30a3                                 4    4      1\n  \u30e4\u30d5\u30fc                                  8   10      3\n  \u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                      5   30      9\n  \u30ea\u30d6\u30bb\u30f3\u30b9                                3   15      0\n\ntable\u306b\u4e8c\u3064\u306e\u8981\u7d20\u3092\u6e21\u3059\u3053\u3068\u3067\u3001\u96c6\u8a08\u304c\u3067\u304d\u308b\u3002\n\u5c0f\u8a08\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u5e7e\u3064\u304b\u3084\u308a\u65b9\u304c\u3042\u308b\u3088\u3046\u3060\u3002\n\u30d4\u30dc\u30c3\u30c8\u30c6\u30fc\u30d6\u30eb\u3092\u6271\u3046\u306b\u306f\u3001reshape2\u304c\u6709\u540d\u3089\u3057\u3044\u306e\u3060\u304c\u3001tidyr1\u3082\u826f\u3044\u3088\u3001\u3068\u3044\u3046\u8a71\u3067\u3001\u8ff7\u3063\u305f\u306e\u3067\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u308f\u305a\u30d9\u30bf\u306a\u65b9\u6cd5\u3067\u3044\u304f\u3002\n> y = table(x$name, x$reply)\n> y = cbind(y, \"\u5408\u8a08\" = rowSums(y))\n> y\n                                   \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54 \u5408\u8a08\nBASE                                  4    6      2   12\nfreee                                 8   21      2   31\nRetty                                21   28     14   63\nSansan                               19   20      8   47\nSpeee                                14   10      4   28\nVASILY                                3    4      1    8\n\u30a4\u30b0\u30cb\u30b9                               1    2      0    3\n\u30af\u30eb\u30fc\u30ba                               2    4      1    7\n\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09             8    9      2   19\n\u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                         6   15      2   23\n\u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                     2    2      1    5\n\u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                           11   13      2   26\n\u30da\u30ed\u30ea                                 4    4      5   13\n\u30df\u30af\u30b7\u30a3                                4    4      1    9\n\u30e4\u30d5\u30fc                                 8   10      3   21\n\u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                    5   30      9   44\n\u30ea\u30d6\u30bb\u30f3\u30b9                              3   15      0   18\n>\n\n> z = cbind(y, \"\u8f9e\u9000\u7387\" = floor(y[,1] * 100 / y[,4]), \"\u627f\u8afe\u7387\" = floor(y[,2] * 100 / y[,4]), \"\u672a\u8fd4\u7b54\u7387\" = floor(y[,3] * 100 / y[,4]))\n> z\n                                   \u8f9e\u9000  \u627f\u8afe   \u672a\u8fd4\u7b54 \u5408\u8a08   \u8f9e\u9000\u7387   \u627f\u8afe\u7387   \u672a\u8fd4\u7b54\u7387\nBASE                                  4    6      2   12     33     50       16\nfreee                                 8   21      2   31     25     67        6\nRetty                                21   28     14   63     33     44       22\nSansan                               19   20      8   47     40     42       17\nSpeee                                14   10      4   28     50     35       14\nVASILY                                3    4      1    8     37     50       12\n\u30a4\u30b0\u30cb\u30b9                                1    2      0    3     33     66        0\n\u30af\u30eb\u30fc\u30ba                                2    4      1    7     28     57       14\n\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09              8    9      2   19     42     47       10\n\u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                          6   15      2   23     26     65        8\n\u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                      2    2      1    5     40     40       20\n\u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                            11   13      2   26     42     50        7\n\u30da\u30ed\u30ea                                  4    4      5   13     30     30       38\n\u30df\u30af\u30b7\u30a3                                 4    4      1    9     44     44       11\n\u30e4\u30d5\u30fc                                  8   10      3   21     38     47       14\n\u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                     5   30      9   44     11     68       20\n\u30ea\u30d6\u30bb\u30f3\u30b9                               3   15      0   18     16     83        0\n>\n\ncbind \u3067\u5217\u3092\u7d50\u5408\u3067\u304d\u308b\u3002\u5408\u8a08\u3092\u7d50\u5408\u3057\u305f\u3002\n\u5408\u8a08\u5217\u3068\u3001\u5404\u3005\u306e\u5217\u306b\u5bfe\u3057\u3066\u3001100\u3092\u639b\u3051\u3066floor \u3059\u308b\u3053\u3068\u3067\u3001\u30d1\u30fc\u30bb\u30f3\u30c8\u5316\u3002\n\u591a\u5c11\u306e\u30ba\u30ec\u306f\u6c17\u306b\u3057\u306a\u3044\u3002\n> z[rev(order(z[,6])),5:7]\n                                   \u8f9e\u9000\u7387 \u627f\u8afe\u7387 \u672a\u8fd4\u7b54\u7387\n\u30ea\u30d6\u30bb\u30f3\u30b9                             16     83        0\n\u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                   11     68       20\nfreee                               25     67        6\n\u30a4\u30b0\u30cb\u30b9                              33     66        0\n\u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                        26     65        8\n\u30af\u30eb\u30fc\u30ba                              28     57       14\n\u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                           42     50        7\nVASILY                              37     50       12\nBASE                                33     50       16\n\u30e4\u30d5\u30fc                                38     47       14\n\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09            42     47       10\n\u30df\u30af\u30b7\u30a3                               44     44       11\nRetty                               33     44       22\nSansan                              40     42       17\n\u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                    40     40       20\nSpeee                               50     35       14\n\u30da\u30ed\u30ea                                30     30       38\n>\n\n\u627f\u8afe\u7387\u3067\u6607\u9806\u30bd\u30fc\u30c8\u3057\u3066\u307f\u305f\u3002\nz[,6]\u304c\u627f\u8afe\u7387\u306e\u5217\u3002\norder \u3092\u4f7f\u3046\u3068\u3001\u9806\u5e8f\u306eindex \u304c\u8fd4\u308b\u3002\n\norder(z[,6])\n [1] 13  5 11  4  3 14  9 15  1  6 12  8 10  7  2 16 17\n\n\u306e\u3067\u3001rev \u3067\u9006\u9806\u3002\n[,5:7]\u3067\u30015\u5217\u76ee\u304b\u30897\u5217\u76ee\u307e\u3067\u3092\u62bd\u51fa\u3002\n\u5168\u90e8\u5408\u308f\u305b\u308b\u3068z[rev(order(z[,6])),5:7]\u3068\u306a\u308b\u3002\n\u306a\u3093\u3060\u3053\u306e\u30ea\u30d6\u30bb\u30f3\u30b9\u306e\u627f\u8afe\u7387\uff01\uff1f\n\n\u6307\u540d\u984d\u3054\u3068\u306e\u56de\u7b54\u7387\n> y = table(x$income, x$reply)\n> y\n\n             \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54\n  \u30a6\u30a3\u30b6\u30fc\u30c9    15   20     13\n  \u30b4\u30c3\u30c9        2    3      1\n  \u30b9\u30bf\u30fc      32   56     18\n  \u30ce\u30fc\u30d3\u30b9      0    3      0\n  \u30ce\u30fc\u30de\u30eb     33   44     11\n  \u30d7\u30c1\u30ea\u30c3\u30c1    41   71     14\n>\n> my_order = c(2, 1, 3, 6, 5, 4)\n> y = y[my_order,]\n> y\n\n             \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54\n  \u30b4\u30c3\u30c9        2    3      1\n  \u30a6\u30a3\u30b6\u30fc\u30c9    15   20     13\n  \u30b9\u30bf\u30fc      32   56     18\n  \u30d7\u30c1\u30ea\u30c3\u30c1    41   71     14\n  \u30ce\u30fc\u30de\u30eb     33   44     11\n  \u30ce\u30fc\u30d3\u30b9      0    3      0\n>\n\ntable(x$income, x$reply) \u3067\u96c6\u8a08\u3002\n\u9806\u5e8f\u3092\u5909\u66f4\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u624b\u52d5\u3067\u9806\u5e8f\u30d9\u30af\u30c8\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001\u4e26\u3073\u66ff\u3048\u3002\n\u5f8c\u306f\u4e0a\u3068\u540c\u3058\u30b3\u30fc\u30c9\u3092\u4f7f\u3046\u3002\n> y = cbind(y, \"\u5408\u8a08\" = rowSums(y))\n> z = cbind(y, \"\u8f9e\u9000\u7387\" = floor(y[,1] * 100 / y[,4]), \"\u627f\u8afe\u7387\" = floor(y[,2] * 100 / y[,4]), \"\u672a\u8fd4\u7b54\u7387\" = floor(y[,3] * 100 / y[,4]))\n> z[,5:7]\n           \u8f9e\u9000\u7387 \u627f\u8afe\u7387 \u672a\u8fd4\u7b54\u7387\n\u30b4\u30c3\u30c9         33     50       16\n\u30a6\u30a3\u30b6\u30fc\u30c9      31     41       27\n\u30b9\u30bf\u30fc        30     52       16\n\u30d7\u30c1\u30ea\u30c3\u30c1      32     56       11\n\u30ce\u30fc\u30de\u30eb       37     50       12\n\u30ce\u30fc\u30d3\u30b9        0    100        0\n\n\u6307\u540d\u984d\u304c\u9ad8\u3044\u307b\u3046\u304c\u627f\u8afe\u7387\u304c\u9ad8\u3044\u306e\u304b\u3068\u601d\u3063\u305f\u304c\u3001\u305d\u3093\u306a\u3053\u3068\u306f\u306a\u304b\u3063\u305f\u3002\n\n\u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306e\u56de\u7b54\u7387\n\u30e6\u30fc\u30b6\u30fc\u306f\u591a\u3044\u306e\u3067\u3001\u3055\u3089\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3002\n\u627f\u8afe\u7387\u3092[0, 1\u301c10, 11\u301c20, ..., 90\u301c99, 100]\u306e\u968e\u5c64\u3067\u5206\u5272\u3059\u308b\u3002\ny = table(x$user_id, x$reply)\n......\n\n> as.matrix(table(cut(z[,6], c(-1, 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 99, 100))))\n         [,1]\n(-1,0]     43\n(0,10]      0\n(10,20]     3\n(20,30]     4\n(30,40]     0\n(40,50]    16\n(50,60]     3\n(60,70]     8\n(70,80]     4\n(80,90]     0\n(90,99]     0\n(99,100]   54\n\nz[,6] \u306f\u627f\u8afe\u7387\u3002\ncut \u3092\u4f7f\u3063\u3066\u3001\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u7bc4\u56f2\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n(-1,0] \u306f\u3001-1\u3092\u542b\u307e\u305a\u30010\u3092\u542b\u3080\u7bc4\u56f2\u3002\n(0,10] \u306f\u30010\u3092\u542b\u307e\u305a\u300110\u3092\u542b\u3080\u7bc4\u56f2\u3002\n\u3044\u308f\u3086\u308b\u958b\u7a7a\u9593\u3068\u9589\u7a7a\u9593\u3002\ntable \u3067\u96c6\u8a08\u3057\u3066\u3001as.matrix \u3067\u7e26\u306b\u5909\u63db\u3057\u305f(\u7e26\u6a2a\u5909\u63db\u306e\u3084\u308a\u65b9\u304c\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u884c\u5217\u306b\u76f4\u3059\u3053\u3068\u3067\u7e26\u5f62\u5f0f\u306b\u6574\u5f62\u3057\u305f)\u3002\n\u627f\u8afe\u7387\u304c 0 \u3068\u3044\u3046\u3053\u3068\u306f\u3001[\u8f9e\u9000,\u672a\u8fd4\u7b54] \u3060\u3051\u306e\u4eba\u304c43\u4eba\u5c45\u308b\u3053\u3068\u3092\u8868\u3057\u3066\u3044\u308b\u3002\n\u6307\u540d\u304c\u3042\u3063\u305f\u4eba\u306f135\u4eba\u306a\u306e\u3067\u3001\u5b9f\u306f32%\u306e\u4eba\u304c\u4e00\u4ef6\u3082\u627f\u8afe\u3057\u3066\u3044\u306a\u3044\u3002\n\u3057\u304b\u3057\u9006\u306b\u8a00\u3048\u307068\uff05\u306e\u4eba\u304c\u627f\u8afe\u3057\u3066\u3044\u308b\u3002\n\u30de\u30c3\u30c1\u30f3\u30b0\u738768%\u306f\u3001\u826f\u3055\u305d\u3046\u306a\u6c17\u304c\u3059\u308b\u304c\u3001\u5b9f\u969b\u306e\u3068\u3053\u308d\u3069\u3046\u306a\u3093\u3060\u308d\u3046\uff1f\n\u3061\u306a\u307f\u306b\u3001\u672a\u8fd4\u7b54\u7387100%\u306e\u4eba\u306f20\u4eba\u5c45\u305f\u3002\n\nlength(z[,7][z[,7] == 100])\n[1] 20\n\n\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3067\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\u3002\n\n\n\u307e\u3068\u3081\n\nR\u3092\u4f7f\u3063\u3066\u3001\u96c6\u8a08\u3057\u3066\u307f\u305f\u3002\ntable \u304c\u4fbf\u5229\ncut \u304c\u4fbf\u5229\norder \u3067\u4efb\u610f\u306b\u9806\u5e8f\u304c\u5165\u308c\u66ff\u3048\u3089\u308c\u3066\u4fbf\u5229\n\u4eca\u56de\u306e\u8ee2\u8077\u30c9\u30e9\u30d5\u30c8\u30017\u5272\u304f\u3089\u3044\u304c\u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u7e4b\u304c\u3063\u3066\u3044\u305f\u3002\n\u6307\u540d\u984d\u304c\u9ad8\u3044\u304b\u3089\u627f\u8afe\u3059\u308b\u3068\u3044\u3046\u50be\u5411\u306f\u306a\u304b\u3063\u305f\u3002\n\n\u3068\u306b\u304b\u304f\u3001R\u304c\u4fbf\u5229\u3002\n\n\u53c2\u8003\nreshape2\u306b\u3088\u308b\u30af\u30ed\u30b9\u96c6\u8a08\uff08Excel\u30d4\u30dc\u30c3\u30c8\u30c6\u30fc\u30d6\u30eb\u3068\u540c\u3058\u64cd\u4f5c\u3092\u884c\u3046\uff09\nreshape2: \u67d4\u8edf\u306a\u30c7\u30fc\u30bf\u5909\u5f62\u30c4\u30fc\u30eb - Watal M. Iwasaki\n\u79e9\u5e8f\u3068\u60c5\u5831\u3068\u30d6\u30ed\u30c3\u30b3\u30ea\u30fc: R\u8a00\u8a9e\u306ecut\u95a2\u6570\u306e\u4f7f\u3044\u65b9\nr - Add column sum to table - Stack Overflow\n\n\n\n\nhttps://heavywatal.github.io/rstats/tidyr.html\u00a0\u21a9\n\n\n\n[\u8ee2\u8077\u30c9\u30e9\u30d5\u30c8\uff5cIT\u30a8\u30f3\u30b8\u30cb\u30a2\u3092\u5e74\u53ce\u30fb\u4ed5\u4e8b\u5185\u5bb9\u3064\u304d\u3067\u7af6\u4e89\u5165\u672d](https://job-draft.jp/) \u306e\u56de\u7b54\u671f\u9650\u304c\u7d42\u4e86\u3057\u305f\u306e\u3067\u3001\u56de\u7b54\u7387\u3092\u96c6\u8a08\u3057\u3066\u307f\u305f\u3002\n\n\u5143\u3005\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3068R\u306e\u7df4\u7fd2\u3067\u59cb\u3081\u305f\u306e\u3060\u304c\u3001[\u524d\u56de](http://qiita.com/osd/items/318c1d65c29c4f50ace9) \u306f\u30c7\u30fc\u30bf\u306e\u8868\u793a\u3060\u3051\u3067\u7d42\u308f\u3089\u305b\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u4eca\u56de\u306f R \u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3082\u66f8\u3044\u3066\u3044\u304f\u3002\n\n# \u6271\u3046\u30c7\u30fc\u30bf\n\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u4f7f\u3063\u3066\u3001[\u793e\u540d,\u30e6\u30fc\u30b6\u30fcID,\u6307\u540d\u984d,\u56de\u7b54] \u306e\u30c7\u30fc\u30bf\u3092\u62bd\u51fa\u3057\u3001tmp.csv \u306b\u7f6e\u304f\u3002\n\n```\n$ head -n 3 tmp.csv\nname,user_id,income,reply\nSpeee,1,\u30b4\u30c3\u30c9,\u627f\u8afe\nRetty,2,\u30a6\u30a3\u30b6\u30fc\u30c9,\u627f\u8afe\n```\n\n# \u5168\u4f53\u306e\u56de\u7b54\u7387\n\n```\n> x = read.csv(\"tmp.csv\")\n> table(x$reply)\n\n  \u8f9e\u9000   \u627f\u8afe \u672a\u8fd4\u7b54\n   123    197     57\n>\n> round(prop.table(y) * 100)\n\n  \u8f9e\u9000   \u627f\u8afe \u672a\u8fd4\u7b54\n    33     52     15\n```\n\nread.csv \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 header=T \u306a\u306e\u3067\u30011\u884c\u76ee\u306f\u30c7\u30fc\u30bf\u9818\u57df\u3067\u306f\u306a\u304f\u3001\u30d8\u30c3\u30c0\u30fc\u3068\u3057\u3066\u6271\u308f\u308c\u308b\u3002\n`x$reply` \u3068\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u5217\u30c7\u30fc\u30bf\u304c\u53d6\u308a\u51fa\u305b\u308b\u3002\n\n`table` \u3092\u4f7f\u3063\u3066\u96c6\u8a08\u304c\u3067\u304d\u308b\u3002\n\n`prop.table` \u3067\u5272\u5408\u306b\u5909\u63db\u3067\u304d\u308b\u3002\n\n\u6307\u540d\u5168\u4f53\u306e\u300133%\u304c\u8f9e\u9000\u300152\uff05\u304c\u627f\u8afe\u300115%\u304c\u672a\u8fd4\u7b54\u3067\u3042\u308b\u3002\n\n# \u4f1a\u793e\u3054\u3068\u306e\u56de\u7b54\u7387\n\n```\n> table(x$name, x$reply)\n\n                                     \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54\n  BASE                                  4    6      2\n  freee                                 8   21      2\n  Retty                                21   28     14\n  Sansan                               19   20      8\n  Speee                                14   10      4\n  VASILY                                3    4      1\n  \u30a4\u30b0\u30cb\u30b9                                1    2      0\n  \u30af\u30eb\u30fc\u30ba                                2    4      1\n  \u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09              8    9      2\n  \u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                          6   15      2\n  \u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                      2    2      1\n  \u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                            11   13      2\n  \u30da\u30ed\u30ea                                  4    4      5\n  \u30df\u30af\u30b7\u30a3                                 4    4      1\n  \u30e4\u30d5\u30fc                                  8   10      3\n  \u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                      5   30      9\n  \u30ea\u30d6\u30bb\u30f3\u30b9                                3   15      0\n```\n\n`table`\u306b\u4e8c\u3064\u306e\u8981\u7d20\u3092\u6e21\u3059\u3053\u3068\u3067\u3001\u96c6\u8a08\u304c\u3067\u304d\u308b\u3002\n\n\u5c0f\u8a08\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\u5e7e\u3064\u304b\u3084\u308a\u65b9\u304c\u3042\u308b\u3088\u3046\u3060\u3002\n\u30d4\u30dc\u30c3\u30c8\u30c6\u30fc\u30d6\u30eb\u3092\u6271\u3046\u306b\u306f\u3001`reshape2`\u304c\u6709\u540d\u3089\u3057\u3044\u306e\u3060\u304c\u3001tidyr[^1]\u3082\u826f\u3044\u3088\u3001\u3068\u3044\u3046\u8a71\u3067\u3001\u8ff7\u3063\u305f\u306e\u3067\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u308f\u305a\u30d9\u30bf\u306a\u65b9\u6cd5\u3067\u3044\u304f\u3002\n\n```\n> y = table(x$name, x$reply)\n> y = cbind(y, \"\u5408\u8a08\" = rowSums(y))\n> y\n                                   \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54 \u5408\u8a08\nBASE                                  4    6      2   12\nfreee                                 8   21      2   31\nRetty                                21   28     14   63\nSansan                               19   20      8   47\nSpeee                                14   10      4   28\nVASILY                                3    4      1    8\n\u30a4\u30b0\u30cb\u30b9                               1    2      0    3\n\u30af\u30eb\u30fc\u30ba                               2    4      1    7\n\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09             8    9      2   19\n\u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                         6   15      2   23\n\u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                     2    2      1    5\n\u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                           11   13      2   26\n\u30da\u30ed\u30ea                                 4    4      5   13\n\u30df\u30af\u30b7\u30a3                                4    4      1    9\n\u30e4\u30d5\u30fc                                 8   10      3   21\n\u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                    5   30      9   44\n\u30ea\u30d6\u30bb\u30f3\u30b9                              3   15      0   18\n>\n\n> z = cbind(y, \"\u8f9e\u9000\u7387\" = floor(y[,1] * 100 / y[,4]), \"\u627f\u8afe\u7387\" = floor(y[,2] * 100 / y[,4]), \"\u672a\u8fd4\u7b54\u7387\" = floor(y[,3] * 100 / y[,4]))\n> z\n                                   \u8f9e\u9000  \u627f\u8afe   \u672a\u8fd4\u7b54 \u5408\u8a08   \u8f9e\u9000\u7387   \u627f\u8afe\u7387   \u672a\u8fd4\u7b54\u7387\nBASE                                  4    6      2   12     33     50       16\nfreee                                 8   21      2   31     25     67        6\nRetty                                21   28     14   63     33     44       22\nSansan                               19   20      8   47     40     42       17\nSpeee                                14   10      4   28     50     35       14\nVASILY                                3    4      1    8     37     50       12\n\u30a4\u30b0\u30cb\u30b9                                1    2      0    3     33     66        0\n\u30af\u30eb\u30fc\u30ba                                2    4      1    7     28     57       14\n\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09              8    9      2   19     42     47       10\n\u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                          6   15      2   23     26     65        8\n\u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                      2    2      1    5     40     40       20\n\u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                            11   13      2   26     42     50        7\n\u30da\u30ed\u30ea                                  4    4      5   13     30     30       38\n\u30df\u30af\u30b7\u30a3                                 4    4      1    9     44     44       11\n\u30e4\u30d5\u30fc                                  8   10      3   21     38     47       14\n\u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                     5   30      9   44     11     68       20\n\u30ea\u30d6\u30bb\u30f3\u30b9                               3   15      0   18     16     83        0\n>\n```\n\ncbind \u3067\u5217\u3092\u7d50\u5408\u3067\u304d\u308b\u3002\u5408\u8a08\u3092\u7d50\u5408\u3057\u305f\u3002\n\u5408\u8a08\u5217\u3068\u3001\u5404\u3005\u306e\u5217\u306b\u5bfe\u3057\u3066\u3001100\u3092\u639b\u3051\u3066floor \u3059\u308b\u3053\u3068\u3067\u3001\u30d1\u30fc\u30bb\u30f3\u30c8\u5316\u3002\n\u591a\u5c11\u306e\u30ba\u30ec\u306f\u6c17\u306b\u3057\u306a\u3044\u3002\n\n```\n> z[rev(order(z[,6])),5:7]\n                                   \u8f9e\u9000\u7387 \u627f\u8afe\u7387 \u672a\u8fd4\u7b54\u7387\n\u30ea\u30d6\u30bb\u30f3\u30b9                             16     83        0\n\u30ea\u30af\u30eb\u30fc\u30c8\u30e9\u30a4\u30d5\u30b9\u30bf\u30a4\u30eb                   11     68       20\nfreee                               25     67        6\n\u30a4\u30b0\u30cb\u30b9                              33     66        0\n\u30c7\u30a3\u30fc\u30fb\u30a8\u30cc\u30fb\u30a8\u30fc                        26     65        8\n\u30af\u30eb\u30fc\u30ba                              28     57       14\n\u30d5\u30ea\u30fc\u30af\u30a2\u30a6\u30c8                           42     50        7\nVASILY                              37     50       12\nBASE                                33     50       16\n\u30e4\u30d5\u30fc                                38     47       14\n\u30b5\u30a4\u30d0\u30fc\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff08\u30b2\u30fc\u30e0\u4e8b\u696d\uff09            42     47       10\n\u30df\u30af\u30b7\u30a3                               44     44       11\nRetty                               33     44       22\nSansan                              40     42       17\n\u30ca\u30a4\u30eb(\u65e7:\u30f4\u30a9\u30e9\u30fc\u30ec)                    40     40       20\nSpeee                               50     35       14\n\u30da\u30ed\u30ea                                30     30       38\n>\n```\n\n\u627f\u8afe\u7387\u3067\u6607\u9806\u30bd\u30fc\u30c8\u3057\u3066\u307f\u305f\u3002\n\nz[,6]\u304c\u627f\u8afe\u7387\u306e\u5217\u3002\norder \u3092\u4f7f\u3046\u3068\u3001\u9806\u5e8f\u306eindex \u304c\u8fd4\u308b\u3002\n\n> order(z[,6])\n [1] 13  5 11  4  3 14  9 15  1  6 12  8 10  7  2 16 17\n\n\u306e\u3067\u3001rev \u3067\u9006\u9806\u3002\n[,5:7]\u3067\u30015\u5217\u76ee\u304b\u30897\u5217\u76ee\u307e\u3067\u3092\u62bd\u51fa\u3002\n\u5168\u90e8\u5408\u308f\u305b\u308b\u3068`z[rev(order(z[,6])),5:7]`\u3068\u306a\u308b\u3002\n\u306a\u3093\u3060\u3053\u306e\u30ea\u30d6\u30bb\u30f3\u30b9\u306e\u627f\u8afe\u7387\uff01\uff1f\n\n# \u6307\u540d\u984d\u3054\u3068\u306e\u56de\u7b54\u7387\n\n```\n> y = table(x$income, x$reply)\n> y\n\n             \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54\n  \u30a6\u30a3\u30b6\u30fc\u30c9    15   20     13\n  \u30b4\u30c3\u30c9        2    3      1\n  \u30b9\u30bf\u30fc      32   56     18\n  \u30ce\u30fc\u30d3\u30b9      0    3      0\n  \u30ce\u30fc\u30de\u30eb     33   44     11\n  \u30d7\u30c1\u30ea\u30c3\u30c1    41   71     14\n>\n> my_order = c(2, 1, 3, 6, 5, 4)\n> y = y[my_order,]\n> y\n\n             \u8f9e\u9000 \u627f\u8afe \u672a\u8fd4\u7b54\n  \u30b4\u30c3\u30c9        2    3      1\n  \u30a6\u30a3\u30b6\u30fc\u30c9    15   20     13\n  \u30b9\u30bf\u30fc      32   56     18\n  \u30d7\u30c1\u30ea\u30c3\u30c1    41   71     14\n  \u30ce\u30fc\u30de\u30eb     33   44     11\n  \u30ce\u30fc\u30d3\u30b9      0    3      0\n>\n```\n\n`table(x$income, x$reply)` \u3067\u96c6\u8a08\u3002\n\u9806\u5e8f\u3092\u5909\u66f4\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u624b\u52d5\u3067\u9806\u5e8f\u30d9\u30af\u30c8\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3001\u4e26\u3073\u66ff\u3048\u3002\n\n\u5f8c\u306f\u4e0a\u3068\u540c\u3058\u30b3\u30fc\u30c9\u3092\u4f7f\u3046\u3002\n\n```\n> y = cbind(y, \"\u5408\u8a08\" = rowSums(y))\n> z = cbind(y, \"\u8f9e\u9000\u7387\" = floor(y[,1] * 100 / y[,4]), \"\u627f\u8afe\u7387\" = floor(y[,2] * 100 / y[,4]), \"\u672a\u8fd4\u7b54\u7387\" = floor(y[,3] * 100 / y[,4]))\n> z[,5:7]\n           \u8f9e\u9000\u7387 \u627f\u8afe\u7387 \u672a\u8fd4\u7b54\u7387\n\u30b4\u30c3\u30c9         33     50       16\n\u30a6\u30a3\u30b6\u30fc\u30c9      31     41       27\n\u30b9\u30bf\u30fc        30     52       16\n\u30d7\u30c1\u30ea\u30c3\u30c1      32     56       11\n\u30ce\u30fc\u30de\u30eb       37     50       12\n\u30ce\u30fc\u30d3\u30b9        0    100        0\n```\n\n\u6307\u540d\u984d\u304c\u9ad8\u3044\u307b\u3046\u304c\u627f\u8afe\u7387\u304c\u9ad8\u3044\u306e\u304b\u3068\u601d\u3063\u305f\u304c\u3001\u305d\u3093\u306a\u3053\u3068\u306f\u306a\u304b\u3063\u305f\u3002\n\n# \u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306e\u56de\u7b54\u7387\n\n\u30e6\u30fc\u30b6\u30fc\u306f\u591a\u3044\u306e\u3067\u3001\u3055\u3089\u306b\u307e\u3068\u3081\u3066\u307f\u308b\u3002\n\u627f\u8afe\u7387\u3092[0, 1\u301c10, 11\u301c20, ..., 90\u301c99, 100]\u306e\u968e\u5c64\u3067\u5206\u5272\u3059\u308b\u3002\n\n```\ny = table(x$user_id, x$reply)\n......\n\n> as.matrix(table(cut(z[,6], c(-1, 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 99, 100))))\n         [,1]\n(-1,0]     43\n(0,10]      0\n(10,20]     3\n(20,30]     4\n(30,40]     0\n(40,50]    16\n(50,60]     3\n(60,70]     8\n(70,80]     4\n(80,90]     0\n(90,99]     0\n(99,100]   54\n```\n\nz[,6] \u306f\u627f\u8afe\u7387\u3002\ncut \u3092\u4f7f\u3063\u3066\u3001\u30c7\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u7bc4\u56f2\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n`(-1,0]` \u306f\u3001-1\u3092\u542b\u307e\u305a\u30010\u3092\u542b\u3080\u7bc4\u56f2\u3002\n`(0,10]` \u306f\u30010\u3092\u542b\u307e\u305a\u300110\u3092\u542b\u3080\u7bc4\u56f2\u3002\n\u3044\u308f\u3086\u308b\u958b\u7a7a\u9593\u3068\u9589\u7a7a\u9593\u3002\n\ntable \u3067\u96c6\u8a08\u3057\u3066\u3001as.matrix \u3067\u7e26\u306b\u5909\u63db\u3057\u305f(\u7e26\u6a2a\u5909\u63db\u306e\u3084\u308a\u65b9\u304c\u5206\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u884c\u5217\u306b\u76f4\u3059\u3053\u3068\u3067\u7e26\u5f62\u5f0f\u306b\u6574\u5f62\u3057\u305f)\u3002\n\n\u627f\u8afe\u7387\u304c 0 \u3068\u3044\u3046\u3053\u3068\u306f\u3001[\u8f9e\u9000,\u672a\u8fd4\u7b54] \u3060\u3051\u306e\u4eba\u304c43\u4eba\u5c45\u308b\u3053\u3068\u3092\u8868\u3057\u3066\u3044\u308b\u3002\n\u6307\u540d\u304c\u3042\u3063\u305f\u4eba\u306f135\u4eba\u306a\u306e\u3067\u3001\u5b9f\u306f32%\u306e\u4eba\u304c\u4e00\u4ef6\u3082\u627f\u8afe\u3057\u3066\u3044\u306a\u3044\u3002\n\u3057\u304b\u3057\u9006\u306b\u8a00\u3048\u307068\uff05\u306e\u4eba\u304c\u627f\u8afe\u3057\u3066\u3044\u308b\u3002\n\u30de\u30c3\u30c1\u30f3\u30b0\u738768%\u306f\u3001\u826f\u3055\u305d\u3046\u306a\u6c17\u304c\u3059\u308b\u304c\u3001\u5b9f\u969b\u306e\u3068\u3053\u308d\u3069\u3046\u306a\u3093\u3060\u308d\u3046\uff1f\n\n\u3061\u306a\u307f\u306b\u3001\u672a\u8fd4\u7b54\u7387100%\u306e\u4eba\u306f20\u4eba\u5c45\u305f\u3002\n\n> length(z[,7][z[,7] == 100])\n[1] 20\n\n\u30d2\u30b9\u30c8\u30b0\u30e9\u30e0\u3067\u66f8\u304f\u3068\u3053\u3093\u306a\u611f\u3058\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/30755/1ac41479-1111-9daf-6ab2-2117ac9b9b49.png)\n\n# \u307e\u3068\u3081\n\n- R\u3092\u4f7f\u3063\u3066\u3001\u96c6\u8a08\u3057\u3066\u307f\u305f\u3002\n- table \u304c\u4fbf\u5229\n- cut \u304c\u4fbf\u5229\n- order \u3067\u4efb\u610f\u306b\u9806\u5e8f\u304c\u5165\u308c\u66ff\u3048\u3089\u308c\u3066\u4fbf\u5229\n- \u4eca\u56de\u306e\u8ee2\u8077\u30c9\u30e9\u30d5\u30c8\u30017\u5272\u304f\u3089\u3044\u304c\u6b21\u306e\u30a2\u30af\u30b7\u30e7\u30f3\u306b\u7e4b\u304c\u3063\u3066\u3044\u305f\u3002\n- \u6307\u540d\u984d\u304c\u9ad8\u3044\u304b\u3089\u627f\u8afe\u3059\u308b\u3068\u3044\u3046\u50be\u5411\u306f\u306a\u304b\u3063\u305f\u3002\n\n\u3068\u306b\u304b\u304f\u3001R\u304c\u4fbf\u5229\u3002\n\n# \u53c2\u8003\n[reshape2\u306b\u3088\u308b\u30af\u30ed\u30b9\u96c6\u8a08\uff08Excel\u30d4\u30dc\u30c3\u30c8\u30c6\u30fc\u30d6\u30eb\u3068\u540c\u3058\u64cd\u4f5c\u3092\u884c\u3046\uff09](http://homepage2.nifty.com/nandemoarchive/sas_r_excel/r_kowaza_reshape2.htm)\n[reshape2: \u67d4\u8edf\u306a\u30c7\u30fc\u30bf\u5909\u5f62\u30c4\u30fc\u30eb - Watal M. Iwasaki](https://heavywatal.github.io/rstats/reshape2.html)\n[\u79e9\u5e8f\u3068\u60c5\u5831\u3068\u30d6\u30ed\u30c3\u30b3\u30ea\u30fc: R\u8a00\u8a9e\u306ecut\u95a2\u6570\u306e\u4f7f\u3044\u65b9](http://data-hacker.blogspot.jp/2013/05/rcut.html)\n[r - Add column sum to table - Stack Overflow](http://stackoverflow.com/questions/27969616/add-column-sum-to-table)\n\n[^1]: https://heavywatal.github.io/rstats/tidyr.html\n", "tags": ["\u8ee2\u8077", "R"]}