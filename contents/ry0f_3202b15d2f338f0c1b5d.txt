{"context": "\n\n\u554f\u984c\u8a2d\u5b9a\n\u4efb\u610f\u306ePolygon\u306b\u3064\u3044\u3066\u5916\u5468\u306e\u7dda\u5206\u96c6\u5408\u304c\u307b\u3057\u3044\u3053\u3068\u3001\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u5c11\u306a\u304f\u3068\u3082\u50d5\u306f\u3042\u308a\u307e\u3057\u305f\u3002\n\u3069\u3046\u3044\u3046\u3053\u3068\u304b\u3068\u3044\u3046\u3068\u3001\u4f8b\u3048\u3070\u6b21\u306e\u56f31\u306e\u3088\u3046\u306a(0.0, 0.0), (1.0, 0.0), (0.5, 1.0)\u304b\u3089\u306a\u308b\u6b63\u4e09\u89d2\u5f62\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u3001\u305d\u308c\u305e\u308c\u306e\u8fba\u306b\u5206\u89e3\u3057\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u56f31 \u6b63\u4e09\u89d2\u5f62\n\n\u4f7f\u3046\u95a2\u6570\n\u3053\u3046\u3044\u3046\u95a2\u6570\u304c\u3042\u308b\u3082\u306e\u601d\u3044\u8fbc\u3093\u3067\u3044\u307e\u3057\u305f\u304c\u3001\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u898b\u6e21\u3057\u3066\u3082\u3069\u3046\u3082\u898b\u5f53\u305f\u308a\u307e\u305b\u3093\u3002\n\u3067\u3001\u4e0b\u8a18\u95a2\u6570\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u306a\u3093\u3068\u304b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\nST_ExteriorRing\nST_PointN\nST_NPoints\nST_MakeLine\n\n\n\u30af\u30a8\u30ea\u4f8b\n\u6b63\u4e09\u89d2\u5f62\u3092\u7528\u610f\u3057\u307e\u3059\u3002\nCREATE TABLE triangle AS\nSELECT ST_GeomFromText('POLYGON((0.0 0.0,1.0 0.0,0.5 1.0,0.0 0.0))') AS geom;\n\n\u3067\u6b21\u306e\u3088\u3046\u306a\u30af\u30a8\u30ea\u30673\u3064\u306eLINESTRING\u306b\u5206\u89e3\u3067\u304d\u307e\u3059\u3002\nSELECT ST_MakeLine(sp, ep)\nFROM (\n    SELECT\n        ST_PointN(geom, generate_series(1, ST_NPoints(geom)-1)) AS sp,\n        ST_PointN(geom, generate_series(2, ST_NPoints(geom))) AS ep\n    FROM (\n        SELECT\n            ST_ExteriorRing(geom) AS geom\n        FROM\n            triangle\n    ) AS lines\n) AS spep;\n\n\n\u89e3\u8aac\n\u5185\u5074\u306e\u30af\u30a8\u30ea\u304b\u3089\u3002\nST_ExteriorRing(geom) AS geom\n\n\u307e\u3041\u5916\u74b0\u306eLINESTRING\u53d6\u3063\u3066\u304d\u3066\u308b\u3060\u3051\u3067\u3059\u306d\u3002\n\u3067\u3001\nST_PointN(geom, generate_series(1, ST_NPoints(geom)-1)) AS sp,\nST_PointN(geom, generate_series(2, ST_NPoints(geom))) AS ep\n\n\u3053\u3053\u304c\u30df\u30bd\u3002generate_series\u30671\u301c\u6700\u5f8c\u5c3e1\u500b\u624b\u524d\u306e\u30dd\u30a4\u30f3\u30c8\u30682\u301c\u6700\u5f8c\u5c3e\u306e\u30dd\u30a4\u30f3\u30c8\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n\u5404\u30ec\u30b3\u30fc\u30c9\u306f\n(1st Point, 2nd Point)\n(2nd Point, 3rd Point)\n(3rd Point, 4th Point)\n\n\u307f\u305f\u3044\u306a\u5f62\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u6700\u5f8c\u306b\nST_MakeLine(sp, ep)\n\n\u3067\u305d\u308c\u305e\u308c\u7dda\u5206\u306b\u3059\u308b\u3002\n\n\u51fa\u529b\n\u4e0a\u8a18\u30af\u30a8\u30ea\u306e\u51fa\u529b\u3092ST_AsText\u306b\u98df\u308f\u305b\u308b\u3068\u3053\u3046\u306a\u308a\u307e\u3059\n\"LINESTRING(0 0,1 0)\"\n\"LINESTRING(1 0,0.5 1)\"\n\"LINESTRING(0.5 1,0 0)\"\n\n\u3084\u3063\u305f\u30fc\uff01\n\n\u53c2\u8003\n\u307b\u307c\u3053\u3061\u3089\u306e\u30de\u30de\u3067\u3059\u3002\nhttps://www.mail-archive.com/postgis-users@postgis.refractions.net/msg02883.html\n## \u554f\u984c\u8a2d\u5b9a\n\u4efb\u610f\u306ePolygon\u306b\u3064\u3044\u3066\u5916\u5468\u306e\u7dda\u5206\u96c6\u5408\u304c\u307b\u3057\u3044\u3053\u3068\u3001\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u5c11\u306a\u304f\u3068\u3082\u50d5\u306f\u3042\u308a\u307e\u3057\u305f\u3002\n\u3069\u3046\u3044\u3046\u3053\u3068\u304b\u3068\u3044\u3046\u3068\u3001\u4f8b\u3048\u3070\u6b21\u306e\u56f31\u306e\u3088\u3046\u306a(0.0, 0.0), (1.0, 0.0), (0.5, 1.0)\u304b\u3089\u306a\u308b\u6b63\u4e09\u89d2\u5f62\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u3001\u305d\u308c\u305e\u308c\u306e\u8fba\u306b\u5206\u89e3\u3057\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n![\u56f31 \u6b63\u4e09\u89d2\u5f62](https://qiita-image-store.s3.amazonaws.com/0/24825/5891a2de-868b-f695-b664-ffa271f85caf.gif \"\u56f31 \u6b63\u4e09\u89d2\u5f62\")\n\u56f31 \u6b63\u4e09\u89d2\u5f62\n\n## \u4f7f\u3046\u95a2\u6570\n\u3053\u3046\u3044\u3046\u95a2\u6570\u304c\u3042\u308b\u3082\u306e\u601d\u3044\u8fbc\u3093\u3067\u3044\u307e\u3057\u305f\u304c\u3001\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u898b\u6e21\u3057\u3066\u3082\u3069\u3046\u3082\u898b\u5f53\u305f\u308a\u307e\u305b\u3093\u3002\n\u3067\u3001\u4e0b\u8a18\u95a2\u6570\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u306a\u3093\u3068\u304b\u306a\u308b\u3088\u3046\u3067\u3059\u3002\n\n+ ST_ExteriorRing\n+ ST_PointN\n+ ST_NPoints\n+ ST_MakeLine\n\n## \u30af\u30a8\u30ea\u4f8b\n\u6b63\u4e09\u89d2\u5f62\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```postgres\nCREATE TABLE triangle AS\nSELECT ST_GeomFromText('POLYGON((0.0 0.0,1.0 0.0,0.5 1.0,0.0 0.0))') AS geom;\n```\n\n\u3067\u6b21\u306e\u3088\u3046\u306a\u30af\u30a8\u30ea\u30673\u3064\u306eLINESTRING\u306b\u5206\u89e3\u3067\u304d\u307e\u3059\u3002\n\n```postgres\nSELECT ST_MakeLine(sp, ep)\nFROM (\n    SELECT\n        ST_PointN(geom, generate_series(1, ST_NPoints(geom)-1)) AS sp,\n        ST_PointN(geom, generate_series(2, ST_NPoints(geom))) AS ep\n    FROM (\n        SELECT\n            ST_ExteriorRing(geom) AS geom\n        FROM\n            triangle\n    ) AS lines\n) AS spep;\n```\n\n## \u89e3\u8aac\n\u5185\u5074\u306e\u30af\u30a8\u30ea\u304b\u3089\u3002\n\n```postgres\nST_ExteriorRing(geom) AS geom\n```\n\n\u307e\u3041\u5916\u74b0\u306eLINESTRING\u53d6\u3063\u3066\u304d\u3066\u308b\u3060\u3051\u3067\u3059\u306d\u3002\n\u3067\u3001\n\n```postgres\nST_PointN(geom, generate_series(1, ST_NPoints(geom)-1)) AS sp,\nST_PointN(geom, generate_series(2, ST_NPoints(geom))) AS ep\n```\n\n\u3053\u3053\u304c\u30df\u30bd\u3002generate_series\u3067`1\u301c\u6700\u5f8c\u5c3e1\u500b\u624b\u524d\u306e\u30dd\u30a4\u30f3\u30c8`\u3068`2\u301c\u6700\u5f8c\u5c3e\u306e\u30dd\u30a4\u30f3\u30c8`\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n\u5404\u30ec\u30b3\u30fc\u30c9\u306f\n\n```\n(1st Point, 2nd Point)\n(2nd Point, 3rd Point)\n(3rd Point, 4th Point)\n```\n\n\u307f\u305f\u3044\u306a\u5f62\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u6700\u5f8c\u306b\n\n```postgres\nST_MakeLine(sp, ep)\n```\n\n\u3067\u305d\u308c\u305e\u308c\u7dda\u5206\u306b\u3059\u308b\u3002\n\n## \u51fa\u529b\n\u4e0a\u8a18\u30af\u30a8\u30ea\u306e\u51fa\u529b\u3092`ST_AsText`\u306b\u98df\u308f\u305b\u308b\u3068\u3053\u3046\u306a\u308a\u307e\u3059\n\n```\n\"LINESTRING(0 0,1 0)\"\n\"LINESTRING(1 0,0.5 1)\"\n\"LINESTRING(0.5 1,0 0)\"\n```\n\n\u3084\u3063\u305f\u30fc\uff01\n\n## \u53c2\u8003\n\u307b\u307c\u3053\u3061\u3089\u306e\u30de\u30de\u3067\u3059\u3002\nhttps://www.mail-archive.com/postgis-users@postgis.refractions.net/msg02883.html\n", "tags": ["PostgreSQL", "PostGIS", "GIS"]}