{"context": " More than 1 year has passed since last update.--\n\u6ce8\u610f \u3053\u3053\u3067\u306f\u3001 expect \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306e\u304b\u308f\u308a\u306bshould\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u63a1\u7528\u3057\u307e\u3059\u3002\u8aad\u307f\u3084\u3059\u3044\u306e\u3068\u3001\u500b\u4eba\u7684\u306a\u597d\u307f\u306e\u305f\u3081\u3067\u3059\u3002\nexpect \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306e\u4f7f\u7528\u306f\u63a8\u5968\u3055\u308c\u308b\u65b9\u6cd5\u3067\u3059\u3002\u3059\u3079\u3066\u306eobject\u306bshould\u3092\u3064\u3051\u308b\u3068\u3001BasicObject\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u5316\u3055\u308c\u305f\u30d7\u30ed\u30ad\u30b7\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u4f7f\u308f\u308c\u308b\u3068\u304d\u306b\u3001\u5931\u6557\u3092\u5f15\u304d\u8d77\u3053\u3059\u304b\u3089\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u3053\u306e\u30da\u30fc\u30b8\u306e\u4f8b\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u69cb\u6587\u3067\u306f\u3001\u3044\u304b\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u3082 should \u3092\u4ed8\u3051\u52a0\u3048\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3057\u307e\u305b\u3093\u3002\u3053\u308c\u304c\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc should \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u63a1\u7528\u3057\u305f\u7406\u7531\u3067\u3059\u3002\n\u3082\u3057\u3053\u306e\u554f\u984c\u306b\u3064\u3044\u3066\u77e5\u3089\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001rspec-expectations\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n--\n\u3059\u3079\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u306b\u5bfe\u3057\u3066\u3001be_file\u306e\u4ee3\u308f\u308a\u306bbe_a_file\u306e\u3088\u3046\u306b\u3001\u3088\u308a\u53b3\u683c\u306a\u6587\u6cd5\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n--\n\ncgroup\nLinux cgroup \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\u3053\u306e\u3088\u3046\u306bcgroup\u306e\u5f15\u6570\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe cgroup('group1') do\n  its('cpuset.cpus') { should eq 1 }\nend\n\n--\n\ncommand\nCommand \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nreturn_stdout\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u306b\u6a19\u6e96\u51fa\u529b\u3092\u8fd4\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001return_stdout\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe command('whoami') do\n  it { should return_stdout 'root' }\nend\n\n\u6b63\u898f\u8868\u73fe\u3082\u4f7f\u3048\u307e\u3059\u3002\ndescribe command('cat /etc/resolv.conf') do\n  it { should return_stdout /8\\.8\\.8\\.8/ }\nend\n\n\nreturn_stderr\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u306b\u6a19\u6e96\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001return_stderr\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe command('ls /foo') do\n  it { should return_stderr 'ls: /foo: No such file or directory' }\nend\n\n\u6b63\u898f\u8868\u73fe\u3082\u4f7f\u3048\u307e\u3059\u3002\ndescribe command('ls /foo') do\n  it { should return_stderr /No such file or directory/ }\nend\n\n\nreturn_exit_status\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u306bexit\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u8fd4\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001return_exit_status\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe command('ls /tmp') do\n  it { should return_exit_status 0 }\nend\n\n\nits(:stdout), its(:stderr)\n\u6a19\u6e96\u51fa\u529b\u3068\u6a19\u6e96\u30a8\u30e9\u30fc\u304c\u53d6\u5f97\u3067\u304d\u3001rspec\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3069\u3061\u3089\u306e\u30de\u30c3\u30c1\u30e3\u30fc\u3082\u4f7f\u3048\u307e\u3059\u3002\ndescribe command('ls -al /') do\n  its(:stdout) { should match /bin/ }\nend\n\ndescribe command('ls /foo') do\n  its(:stderr) { should match /No such file or directory/ }\nend\n\n--\n\ncron\nCron \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nhave_entry\ncron\u306b\u6307\u5b9a\u3057\u305f\u30a8\u30f3\u30c8\u30ea\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_entry\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe cron do\n  it { should have_entry '* * * * * /usr/local/bin/foo' }\nend\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u306ecron\u306e\u30a8\u30f3\u30c8\u30ea\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescribe cron do\n  it { should have_entry('* * * * * /usr/local/bin/foo').with_user('mizzy') }\nend\n\n--\n\ndefault_gateway\nDefault gateway \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u304c\u6b63\u5e38\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u3053\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe default_gateway do\n  its(:ipaddress) { should eq '192.168.10.1' }\n  its(:interface) { should eq 'br0'          }\nend\n\n--\n\nfile\nFile and directory \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nbe_file\n\u5bfe\u8c61\u304c\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001use be_file\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/passwd') do\n  it { should be_file }\nend\n\n\nbe_directory\n\u5bfe\u8c61\u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306fbe_directory\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/var/log/httpd') do\n  it { should be_directory }\nend\n\n\nbe_socket\n\u5bfe\u8c61\u304c\u30bd\u30b1\u30c3\u30c8\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306fbe_scoket\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/var/run/unicorn.sock') do\n  it { should be_socket }\nend\n\n\ncontain\n\u6ce8\u610f: contain\u306e\u4ee3\u308f\u308a\u306b\u3001its(:content)\u3084\u3001\u4efb\u610f\u306e\u6a19\u6e96\u7684\u306arspec\u306e\u30de\u30c3\u30c1\u30e3\u30fc\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u3053\u306econtain\u30de\u30c3\u30c1\u30e3\u30fc\u306f\u5ec3\u6b62\u4e88\u5b9a\u3067\u3059\u3002\ndescribe file('/etc/httpd/conf/httpd.conf') do\n  its(:content) { should match /ServerName www.example.jp/ }\nend\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306b\u4e0e\u3048\u3089\u308c\u305f\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001contain\u30de\u30c3\u30c1\u30e3\u30fc\u304c\u4f7f\u3048\u307e\u3059\u3002\ndescribe file('/etc/httpd/conf/httpd.conf') do\n  it { should contain 'ServerName www.example.jp' }\nend\n\n\u7bc4\u56f2\u3092\u6307\u5b9a\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306b\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescribe file('Gemfile') do\n  # test 'rspec' exists between \"group :test do\" and \"end\n```\".\n  it { should contain('rspec').from(/^group :test do/).to(/^end\n```/) }\n\n  # test 'rspec' exists after \"group :test do\".\n  it { should contain('rspec').after(/^group :test do/) }\n\n  # test 'rspec' exists before \"end\n```\".\n  it { should contain('rspec').before(/^end\n```/) }\nend\n\n\nbe_mode\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_mode\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/sudoers') do\n  it { should be_mode 440 }\nend\n\n\nbe_owned_by\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306b\u6240\u6709\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_owned_by\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/sudoers') do\n  it { should be_owned_by 'root' }\nend\n\n\nbe_grouped_into\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_grouped_into\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/sudoers') do\n  it { should be_grouped_into 'wheel' }\nend\n\n\nbe_linked_to\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30ea\u30f3\u30af\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_linked_to\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/system-release') do\n  it { should be_linked_to '/etc/redhat-release' }\nend\n\n\nbe_readable\n\u5bfe\u8c61\u304c\u8aad\u307f\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_readable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/sudoers') do\n  it { should be_readable }\nend\n\n\u6240\u6709\u8005\u3001\u30b0\u30eb\u30fc\u30d7\u30e1\u30f3\u30d0\u30fc\u3001\u4ed6\u4eba\u3001\u3042\u308b\u3044\u306f\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u8aad\u307f\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescribe file('/etc/sudoers') do\n  it { should be_readable.by('owner') }\n  it { should be_readable.by('group') }\n  it { should be_readable.by('others') }\n  it { should be_readable.by_user('apache') }\nend\n\n\nbe_writable\n\u5bfe\u8c61\u304c\u66f8\u304d\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_writable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/sudoers') do\n  it { should be_writable }\nend\n\n\u6240\u6709\u8005\u3001\u30b0\u30eb\u30fc\u30d7\u30e1\u30f3\u30d0\u30fc\u3001\u4ed6\u4eba\u3001\u3042\u308b\u3044\u306f\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u66f8\u304d\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescribe file('/etc/sudoers') do\n  it { should be_writable.by('owner') }\n  it { should be_writable.by('group') }\n  it { should be_writable.by('others') }\n  it { should be_writable.by_user('apache') }\nend\n\n\nbe_executable\n\u5bfe\u8c61\u304c\u5b9f\u884c\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_executable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/init.d/httpd') do\n  it { should be_executable }\nend\n\n\u6240\u6709\u8005\u3001\u30b0\u30eb\u30fc\u30d7\u30e1\u30f3\u30d0\u30fc\u3001\u4ed6\u4eba\u3001\u3042\u308b\u3044\u306f\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u5b9f\u884c\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescribe file('/etc/init.d/httpd') do\n  it { should be_executable.by('owner') }\n  it { should be_executable.by('group') }\n  it { should be_executable.by('others') }\n  it { should be_executable.by_user('httpd') }\nend\n\n\nbe_mounted\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_mounted\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/') do\n  it { should be_mounted }\nend\n\n\u6b63\u3057\u3044\u5c5e\u6027\u3067\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u308b\u304b\u3082\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe file('/') do\n  it { should be_mounted.with( :type => 'ext4' ) }\nend\n\ndescribe file('/') do\n  it { should be_mounted.with( :options => { :rw => true } ) }\nend\n\ndescribe file('/') do\n  it do\n    should be_mounted.only_with(\n      :device  => '/dev/mapper/VolGroup-lv_root',\n      :type    => 'ext4',\n      :options => {\n        :rw   => true,\n        :mode => 620,\n      }\n    )\n  end\nend\n\nonly_with \u306f\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u3059\u3079\u3066\u306e\u5c5e\u6027\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002\n\nmatch_md5checksum\n\u30d5\u30a1\u30a4\u30eb\u306emd5\u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u304c\u4e0e\u3048\u3089\u308c\u305f\u5024\u3068\u4e00\u81f4\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001match_md5checksum\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe file('/etc/services') do\n  it { should match_md5checksum '35435ea447c19f0ea5ef971837ab9ced' }\nend\n\n--\n\ngroup\nGroup \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nexist\n\u30b0\u30eb\u30fc\u30d7\u304c\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe group('wheel') do\n  it { should exist }\nend\n\n\nhave_gid\n\u30b0\u30eb\u30fc\u30d7\u304c\u4e0e\u3048\u3089\u308c\u305fgid\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_gid\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe group('root') do\n  it { should have_gid 0 }\nend\n\n--\n\nhost\nHost \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nbe_resolvable\n\u30db\u30b9\u30c8\u304c\u76ee\u7684\u306e\u30db\u30b9\u30c8\u3067\u540d\u524d\u89e3\u6c7a\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_resolvable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe host('serverspec.org') do\n  it { should be_resolvable }\nend\n\ndescribe host('serverspec.org') do\n  it { should be_resolvable.by('hosts') }\nend\n\ndescribe host('serverspec.org') do\n  it { should be_resolvable.by('dns') }\nend\n\n\nbe_reachable\n\u4e0e\u3048\u3089\u308c\u305f\u30db\u30b9\u30c8\u304c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7684\u306b\u5230\u9054\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_reachable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe host('target.example.jp') do\n  # ping\n  it { should be_reachable }\n  # tcp port 22\n  it { should be_reachable.with( :port => 22 ) }\n  # set protocol explicitly\n  it { should be_reachable.with( :port => 22, :proto => 'tcp' ) }\n  # udp port 53\n  it { should be_reachable.with( :port => 53, :proto => 'udp' ) }\n  # timeout setting (default is 5 seconds)\n  it { should be_reachable.with( :port => 22, :proto => 'tcp', :timeout => 1 ) }\nend\n\n--\n\ninterface\nNetwork interface \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304c\u6b63\u5e38\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u3053\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe interface('eth0') do\n  its(:speed) { should eq 1000 }\nend\n\n\nhave_ipv4_address\n\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304cIP\u30a2\u30c9\u30ec\u30b9\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_ipv4_address\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe interface('eth0') do\n  it { should have_ipv4_address(\"192.168.10.10\") }\n  it { should have_ipv4_address(\"192.168.10.10/24\") }\nend\n\n--\n\nipfilter\nIpfilter \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nhave_rule\nipfilter\u304c\u4e0e\u3048\u3089\u308c\u305f\u30eb\u30fc\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_rule\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe ipfilter do\n  it { should have_rule 'pass in quick on lo0 all' }\nend\n\n--\n\nipnat\nIpnat \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nhave_rule\nipnat\u304c\u4e0e\u3048\u3089\u308c\u305f\u30eb\u30fc\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_rule\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe ipnat do\n  it { should have_rule 'map net1 192.168.0.0/24 -> 0.0.0.0/32' }\nend\n\n--\n\niptables\nIptables \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nhave_rule\niptables\u304c\u4e0e\u3048\u3089\u308c\u305f\u30eb\u30fc\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u3001have_rule\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe iptables do\n  it { should have_rule('-P INPUT ACCEPT') }\nend\n\n\u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30c1\u30a7\u30a4\u30f3\u540d\u3092\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\ndescribe iptables do\n  it { should have_rule('-P INPUT ACCEPT').with_table('mangle').with_chain('INPUT') }\nend\n\n--\n\nkernel_module\nKernel module \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nbe_loaded\n\u4e0e\u3048\u3089\u308c\u305f\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_loaded\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe kernel_module('virtio_balloon') do\n  it { should be_loaded }\nend\n\n--\n\nlinux_kernel_parameter\nLinux kernel parameter \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\u3053\u306e\u3088\u3046\u306bLinux\u30ab\u30fc\u30cd\u30eb\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe 'Linux kernel parameters' do\n  context linux_kernel_parameter('net.ipv4.tcp_syncookies') do \n    its(:value) { should eq 1 }\n  end\n\n  context linux_kernel_parameter('kernel.shmall') do\n    its(:value) { should be >= 4294967296 }\n  end\n\n  context linux_kernel_parameter('kernel.shmmax') do\n    its(:value) { should be <= 68719476736 }\n  end\n\n  context linux_kernel_parameter('kernel.osrelease') do\n    its(:value) { should eq '2.6.32-131.0.15.el6.x86_64' }\n  end\n\n  context linux_kernel_parameter('net.ipv4.tcp_wmem') do\n    its(:value) { should match /4096\\t16384\\t4194304/ }\n  end\nend\n\n--\n\nlxc\nLXC(Linux Container) \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\u3053\u306e\u3088\u3046\u306bLXC\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe lxc('ct01') do\n  it { should exist }\n  it { should be_running }\nend\n\n--\n\nmail_alias\nMail alias \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\u3053\u306e\u3088\u3046\u306b\u30e1\u30fc\u30eb\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe mail_alias('daemon') do\n  it { should be_aliased_to 'root' }\nend\n\n--\n\npackage\nPackage \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nbe_installed\n\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_installed\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe package('httpd') do\n  it { should be_installed }\nend\n\n\u4e0e\u3048\u3089\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u306egem\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u3082\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe package('jekyll') do\n  it { should be_installed.by('gem').with_version('0.12.1') }\nend\n\n--\n\nphp_config\nPHP config \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\u3053\u306e\u3088\u3046\u306bPHP\u306e\u8a2d\u5b9a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe 'PHP config parameters' do\n  context  php_config('default_mimetype') do\n    its(:value) { should eq 'text/html' }\n  end\n\n  context php_config('session.cache_expire') do\n    its(:value) { should eq 180 }\n  end\n\n  context php_config('mbstring.http_output_conv_mimetypes') do\n    its(:value) { should match /application/ }\n  end\nend\n\n--\n\nport\nPort \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nbe_listening\n\u4e0e\u3048\u3089\u308c\u305f\u30dd\u30fc\u30c8\u304c\u30ea\u30c3\u30b9\u30f3\u72b6\u614b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_listening\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe port(80) do\n  it { should be_listening }\nend\n\ntcp \u307e\u305f\u306f udp \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndescribe port(80) do\n  it { should be_listening.with('tcp') }\nend\n\ndescribe port(53) do\n  it { should be_listening.with('udp') }\nend\n\n--\n\nrouting_table\nRouting table \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nhave_entry\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u306b\u4e0e\u3048\u3089\u308c\u305f\u30a8\u30f3\u30c8\u30ea\u304c\u3042\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_entry\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe routing_table do\n  it do\n    should have_entry(\n      :destination => '192.168.100.0/24',\n      :interface   => 'eth1',\n      :gateway     => '192.168.10.1',\n    )\n  end\nend\n\n--\n\nselinux\nSELinux \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nbe_disabled/be_enforcing/be_permissive\nSELinux\u304c\u4e0e\u3048\u3089\u308c\u305f\u30e2\u30fc\u30c9\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_disabled\u3001be_enforcing\u3001be_permissinve\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n# SELinux should be disabled\ndescribe selinux do\n  it { should be_disabled }\nend\n\n# SELinux should be enforcing\ndescribe selinux do\n  it { should be_enforcing }\nend\n\n# SELinux should be permissive\ndescribe selinux do\n  it { should be_permissive }\nend\n\n--\n\nservice\nService \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nbe_enabled\n\u30b5\u30fc\u30d3\u30b9\u304cenabled(OS\u8d77\u52d5\u6642\u306b\u81ea\u52d5\u3067\u8d77\u52d5)\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_enabled\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe service('ntpd') do\n  it { should be_enabled }\nend\n\n\u30e9\u30f3\u30ec\u30d9\u30eb\u3067\u30c6\u30b9\u30c8\u53ef\u80fd\u3067\u3059\u3002(\u73fe\u5728\u306fRed Hat\u7cfb\u304bDebian\u7cfb\u3067\u306e\u307f\u6a5f\u80fd\u3057\u307e\u3059\u3002)\ndescribe service('ntpd') do\n  it { should be_enabled.with_level(3) }\nend\n\n\nbe_running\n\u4e0e\u3048\u3089\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u3084\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u4e2d\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_running\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe service('ntpd') do\n  it { should be_running }\nend\n\nsupervisor\u306e\u4e0b\u3067\u30b5\u30fc\u30d3\u30b9\u3084\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u4e2d\u304b\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\ndescribe service('ntpd') do\n  it { should be_running.under('supervisor') }\nend\n\n\nbe_monitored_by\n\u30b5\u30fc\u30d3\u30b9\u3084\u30d7\u30ed\u30bb\u30b9\u304c\u4e0e\u3048\u3089\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306b\u3088\u3063\u3066\u76e3\u8996\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_monitored_by\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe service('sshd') do\n  it { should be_monitored_by('monit') }\nend\n\ndescribe service('unicorn') do\n  it { should be_monitored_by('god') }\nend\n\n--\n\nuser\nUser \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nexist\n\u5bfe\u8c61\u304c\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe user('root') do\n  it { should exist }\nend\n\n\nbelong_to_group\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001belong_to_group\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe user('apache') do\n  it { should belong_to_group 'apache' }\nend\n\n\nhave_uid\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305fuid\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_uid\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe user('root') do\n  it { should have_uid 0 }\nend\n\n\nhave_home_directory\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305f\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_home_directory\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe user('root') do\n  it { should have_home_directory '/root' }\nend\n\n\nhave_login_shell\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305f\u30ed\u30b0\u30a4\u30f3\u30b7\u30a7\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_login_shell\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe user('root') do\n  it { should have_login_shell '/bin/bash' }\nend\n\n\nhave_authorized_key\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305fauthorized_key\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_authorized_key\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe user('root') do\n  it { should have_authorized_key 'ssh-rsa ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGH foo@bar.local' }\nend\n\n--\n\nyumrepo\nYumrepo \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nexist\n\u4e0e\u3048\u3089\u308c\u305fyum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe yumrepo('epel') do\n  it { should exist }\nend\n\n\nbe_enabled\n\u4e0e\u3048\u3089\u308c\u305fyum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u4f7f\u7528\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_enabled\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe yumrepo('epel') do\n  it { should be_enabled }\nend\n\n--\n\nzfs\nZFS \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\nexist\n\u4e0e\u3048\u3089\u308c\u305fZFS\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30fc\u30eb\u304c\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe zfs('rpool') do\n  it { should exist }\nend\n\n\nhave_property\nZFS\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30fc\u30eb\u304c\u4e0e\u3048\u3089\u308c\u305f\u5c5e\u6027\u3092\u6301\u3064\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_property\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\ndescribe zfs('rpool') do\n  it { should have_property 'mountpoint' => '/rpool', 'compression' => 'off' }\nend\n\n--\n**\u6ce8\u610f** \u3053\u3053\u3067\u306f\u3001 `expect` \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306e\u304b\u308f\u308a\u306b`should`\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u63a1\u7528\u3057\u307e\u3059\u3002\u8aad\u307f\u3084\u3059\u3044\u306e\u3068\u3001\u500b\u4eba\u7684\u306a\u597d\u307f\u306e\u305f\u3081\u3067\u3059\u3002\n\n`expect` \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u306e\u4f7f\u7528\u306f\u63a8\u5968\u3055\u308c\u308b\u65b9\u6cd5\u3067\u3059\u3002\u3059\u3079\u3066\u306eobject\u306b`should`\u3092\u3064\u3051\u308b\u3068\u3001BasicObject\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u5316\u3055\u308c\u305f\u30d7\u30ed\u30ad\u30b7\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u4f7f\u308f\u308c\u308b\u3068\u304d\u306b\u3001\u5931\u6557\u3092\u5f15\u304d\u8d77\u3053\u3059\u304b\u3089\u3067\u3059\u3002\n\n\u3057\u304b\u3057\u3001\u3053\u306e\u30da\u30fc\u30b8\u306e\u4f8b\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u69cb\u6587\u3067\u306f\u3001\u3044\u304b\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3057\u3066\u3082 `should` \u3092\u4ed8\u3051\u52a0\u3048\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3057\u307e\u305b\u3093\u3002\u3053\u308c\u304c\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc `should` \u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u63a1\u7528\u3057\u305f\u7406\u7531\u3067\u3059\u3002\n\n\u3082\u3057\u3053\u306e\u554f\u984c\u306b\u3064\u3044\u3066\u77e5\u3089\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001[rspec-expectations\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://github.com/rspec/rspec-expectations/blob/master/Should.md)\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n--\n\u3059\u3079\u3066\u306e\u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\u306b\u5bfe\u3057\u3066\u3001`be_file`\u306e\u4ee3\u308f\u308a\u306b`be_a_file`\u306e\u3088\u3046\u306b\u3001\u3088\u308a\u53b3\u683c\u306a\u6587\u6cd5\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n--\n\n## cgroup\n\nLinux cgroup \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n\u3053\u306e\u3088\u3046\u306bcgroup\u306e\u5f15\u6570\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe cgroup('group1') do\n  its('cpuset.cpus') { should eq 1 }\nend\n```\n\n--\n\n## command\n\nCommand \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### return_stdout\n\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u306b\u6a19\u6e96\u51fa\u529b\u3092\u8fd4\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001return_stdout\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe command('whoami') do\n  it { should return_stdout 'root' }\nend\n```\n\n\u6b63\u898f\u8868\u73fe\u3082\u4f7f\u3048\u307e\u3059\u3002\n\n```rb\ndescribe command('cat /etc/resolv.conf') do\n  it { should return_stdout /8\\.8\\.8\\.8/ }\nend\n```\n\n### return_stderr\n\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u306b\u6a19\u6e96\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001return_stderr\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe command('ls /foo') do\n  it { should return_stderr 'ls: /foo: No such file or directory' }\nend\n```\n\n\u6b63\u898f\u8868\u73fe\u3082\u4f7f\u3048\u307e\u3059\u3002\n\n```rb\ndescribe command('ls /foo') do\n  it { should return_stderr /No such file or directory/ }\nend\n```\n\n### return_exit_status\n\n\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u5e38\u306bexit\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u8fd4\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001return_exit_status\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe command('ls /tmp') do\n  it { should return_exit_status 0 }\nend\n```\n\n### its(:stdout), its(:stderr)\n\n\u6a19\u6e96\u51fa\u529b\u3068\u6a19\u6e96\u30a8\u30e9\u30fc\u304c\u53d6\u5f97\u3067\u304d\u3001rspec\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3069\u3061\u3089\u306e\u30de\u30c3\u30c1\u30e3\u30fc\u3082\u4f7f\u3048\u307e\u3059\u3002\n\n```rb\ndescribe command('ls -al /') do\n  its(:stdout) { should match /bin/ }\nend\n\ndescribe command('ls /foo') do\n  its(:stderr) { should match /No such file or directory/ }\nend\n```\n\n--\n\n## cron\n\nCron \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### have_entry\n\ncron\u306b\u6307\u5b9a\u3057\u305f\u30a8\u30f3\u30c8\u30ea\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_entry\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe cron do\n  it { should have_entry '* * * * * /usr/local/bin/foo' }\nend\n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u306ecron\u306e\u30a8\u30f3\u30c8\u30ea\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe cron do\n  it { should have_entry('* * * * * /usr/local/bin/foo').with_user('mizzy') }\nend\n```\n\n--\n\n## default_gateway\n\nDefault gateway \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u304c\u6b63\u5e38\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u3053\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe default_gateway do\n  its(:ipaddress) { should eq '192.168.10.1' }\n  its(:interface) { should eq 'br0'          }\nend\n```\n\n--\n\n## file\n\nFile and directory \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### be_file\n\n\u5bfe\u8c61\u304c\u30d5\u30a1\u30a4\u30eb\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001use be_file\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/passwd') do\n  it { should be_file }\nend\n```\n\n### be_directory\n\n\u5bfe\u8c61\u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306fbe_directory\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/var/log/httpd') do\n  it { should be_directory }\nend\n```\n### be_socket\n\n\u5bfe\u8c61\u304c\u30bd\u30b1\u30c3\u30c8\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306fbe_scoket\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/var/run/unicorn.sock') do\n  it { should be_socket }\nend\n```\n\n### contain\n\u6ce8\u610f: `contain`\u306e\u4ee3\u308f\u308a\u306b\u3001`its(:content)`\u3084\u3001\u4efb\u610f\u306e\u6a19\u6e96\u7684\u306arspec\u306e\u30de\u30c3\u30c1\u30e3\u30fc\u304c\u4f7f\u3048\u307e\u3059\u3002\n\u3053\u306e`contain`\u30de\u30c3\u30c1\u30e3\u30fc\u306f\u5ec3\u6b62\u4e88\u5b9a\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/httpd/conf/httpd.conf') do\n  its(:content) { should match /ServerName www.example.jp/ }\nend\n```\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306b\u4e0e\u3048\u3089\u308c\u305f\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001contain\u30de\u30c3\u30c1\u30e3\u30fc\u304c\u4f7f\u3048\u307e\u3059\u3002\n\n```rb\ndescribe file('/etc/httpd/conf/httpd.conf') do\n  it { should contain 'ServerName www.example.jp' }\nend\n```\n\n\u7bc4\u56f2\u3092\u6307\u5b9a\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u306b\u6587\u5b57\u5217\u304c\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe file('Gemfile') do\n  # test 'rspec' exists between \"group :test do\" and \"end\n```\".\n  it { should contain('rspec').from(/^group :test do/).to(/^end\n```/) }\n\n  # test 'rspec' exists after \"group :test do\".\n  it { should contain('rspec').after(/^group :test do/) }\n\n  # test 'rspec' exists before \"end\n```\".\n  it { should contain('rspec').before(/^end\n```/) }\nend\n```\n\n### be_mode\n\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30e2\u30fc\u30c9\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_mode\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/sudoers') do\n  it { should be_mode 440 }\nend\n```\n\n### be_owned_by\n\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30e6\u30fc\u30b6\u30fc\u306b\u6240\u6709\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_owned_by\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/sudoers') do\n  it { should be_owned_by 'root' }\nend\n```\n\n### be_grouped_into\n\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_grouped_into\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/sudoers') do\n  it { should be_grouped_into 'wheel' }\nend\n```\n\n### be_linked_to\n\n\u5bfe\u8c61\u304c\u4e0e\u3048\u3089\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30ea\u30f3\u30af\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_linked_to\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/system-release') do\n  it { should be_linked_to '/etc/redhat-release' }\nend\n```\n\n### be_readable\n\n\u5bfe\u8c61\u304c\u8aad\u307f\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_readable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/sudoers') do\n  it { should be_readable }\nend\n```\n\n\u6240\u6709\u8005\u3001\u30b0\u30eb\u30fc\u30d7\u30e1\u30f3\u30d0\u30fc\u3001\u4ed6\u4eba\u3001\u3042\u308b\u3044\u306f\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u8aad\u307f\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe file('/etc/sudoers') do\n  it { should be_readable.by('owner') }\n  it { should be_readable.by('group') }\n  it { should be_readable.by('others') }\n  it { should be_readable.by_user('apache') }\nend\n```\n\n### be_writable\n\u5bfe\u8c61\u304c\u66f8\u304d\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_writable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/sudoers') do\n  it { should be_writable }\nend\n```\n\n\u6240\u6709\u8005\u3001\u30b0\u30eb\u30fc\u30d7\u30e1\u30f3\u30d0\u30fc\u3001\u4ed6\u4eba\u3001\u3042\u308b\u3044\u306f\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u66f8\u304d\u8fbc\u307f\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe file('/etc/sudoers') do\n  it { should be_writable.by('owner') }\n  it { should be_writable.by('group') }\n  it { should be_writable.by('others') }\n  it { should be_writable.by_user('apache') }\nend\n```\n\n### be_executable\n\u5bfe\u8c61\u304c\u5b9f\u884c\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_executable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/init.d/httpd') do\n  it { should be_executable }\nend\n```\n\u6240\u6709\u8005\u3001\u30b0\u30eb\u30fc\u30d7\u30e1\u30f3\u30d0\u30fc\u3001\u4ed6\u4eba\u3001\u3042\u308b\u3044\u306f\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u30fc\u304c\u5b9f\u884c\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe file('/etc/init.d/httpd') do\n  it { should be_executable.by('owner') }\n  it { should be_executable.by('group') }\n  it { should be_executable.by('others') }\n  it { should be_executable.by_user('httpd') }\nend\n```\n\n### be_mounted\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_mounted\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/') do\n  it { should be_mounted }\nend\n```\n\n\u6b63\u3057\u3044\u5c5e\u6027\u3067\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u308b\u304b\u3082\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe file('/') do\n  it { should be_mounted.with( :type => 'ext4' ) }\nend\n\ndescribe file('/') do\n  it { should be_mounted.with( :options => { :rw => true } ) }\nend\n\ndescribe file('/') do\n  it do\n    should be_mounted.only_with(\n      :device  => '/dev/mapper/VolGroup-lv_root',\n      :type    => 'ext4',\n      :options => {\n        :rw   => true,\n        :mode => 620,\n      }\n    )\n  end\nend\n```\n\n`only_with` \u306f\u30de\u30a6\u30f3\u30c8\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u3059\u3079\u3066\u306e\u5c5e\u6027\u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002\n\n### match_md5checksum\n\n\u30d5\u30a1\u30a4\u30eb\u306emd5\u30c1\u30a7\u30c3\u30af\u30b5\u30e0\u304c\u4e0e\u3048\u3089\u308c\u305f\u5024\u3068\u4e00\u81f4\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001match_md5checksum\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe file('/etc/services') do\n  it { should match_md5checksum '35435ea447c19f0ea5ef971837ab9ced' }\nend\n```\n\n--\n\n## group\n\nGroup \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### exist\n\u30b0\u30eb\u30fc\u30d7\u304c\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe group('wheel') do\n  it { should exist }\nend\n```\n\n### have_gid\n\u30b0\u30eb\u30fc\u30d7\u304c\u4e0e\u3048\u3089\u308c\u305fgid\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_gid\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe group('root') do\n  it { should have_gid 0 }\nend\n```\n\n--\n\n## host\n\nHost \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### be_resolvable\n\n\u30db\u30b9\u30c8\u304c\u76ee\u7684\u306e\u30db\u30b9\u30c8\u3067\u540d\u524d\u89e3\u6c7a\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_resolvable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe host('serverspec.org') do\n  it { should be_resolvable }\nend\n\ndescribe host('serverspec.org') do\n  it { should be_resolvable.by('hosts') }\nend\n\ndescribe host('serverspec.org') do\n  it { should be_resolvable.by('dns') }\nend\n```\n\n### be_reachable\n\n\u4e0e\u3048\u3089\u308c\u305f\u30db\u30b9\u30c8\u304c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u7684\u306b\u5230\u9054\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_reachable\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe host('target.example.jp') do\n  # ping\n  it { should be_reachable }\n  # tcp port 22\n  it { should be_reachable.with( :port => 22 ) }\n  # set protocol explicitly\n  it { should be_reachable.with( :port => 22, :proto => 'tcp' ) }\n  # udp port 53\n  it { should be_reachable.with( :port => 53, :proto => 'udp' ) }\n  # timeout setting (default is 5 seconds)\n  it { should be_reachable.with( :port => 22, :proto => 'tcp', :timeout => 1 ) }\nend\n```\n\n--\n\n## interface\n\nNetwork interface \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304c\u6b63\u5e38\u306b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u3053\u306e\u30b7\u30f3\u30bf\u30c3\u30af\u30b9\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe interface('eth0') do\n  its(:speed) { should eq 1000 }\nend\n```\n\n### have_ipv4_address\n\n\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304cIP\u30a2\u30c9\u30ec\u30b9\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_ipv4_address\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe interface('eth0') do\n  it { should have_ipv4_address(\"192.168.10.10\") }\n  it { should have_ipv4_address(\"192.168.10.10/24\") }\nend\n```\n\n--\n\n## ipfilter\n\nIpfilter \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### have_rule\n\nipfilter\u304c\u4e0e\u3048\u3089\u308c\u305f\u30eb\u30fc\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_rule\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe ipfilter do\n  it { should have_rule 'pass in quick on lo0 all' }\nend\n```\n\n--\n\n## ipnat\n\nIpnat \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### have_rule\n\nipnat\u304c\u4e0e\u3048\u3089\u308c\u305f\u30eb\u30fc\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_rule\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe ipnat do\n  it { should have_rule 'map net1 192.168.0.0/24 -> 0.0.0.0/32' }\nend\n```\n\n--\n\n## iptables\n\nIptables \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### have_rule\n\niptables\u304c\u4e0e\u3048\u3089\u308c\u305f\u30eb\u30fc\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u3001have_rule\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe iptables do\n  it { should have_rule('-P INPUT ACCEPT') }\nend\n```\n\n\u30c6\u30fc\u30d6\u30eb\u540d\u3068\u30c1\u30a7\u30a4\u30f3\u540d\u3092\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe iptables do\n  it { should have_rule('-P INPUT ACCEPT').with_table('mangle').with_chain('INPUT') }\nend\n```\n\n--\n\n## kernel_module\n\nKernel module \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### be_loaded\n\n\u4e0e\u3048\u3089\u308c\u305f\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_loaded\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe kernel_module('virtio_balloon') do\n  it { should be_loaded }\nend\n```\n\n--\n\n## linux_kernel_parameter\n\nLinux kernel parameter \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n\u3053\u306e\u3088\u3046\u306bLinux\u30ab\u30fc\u30cd\u30eb\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe 'Linux kernel parameters' do\n  context linux_kernel_parameter('net.ipv4.tcp_syncookies') do \n    its(:value) { should eq 1 }\n  end\n\n  context linux_kernel_parameter('kernel.shmall') do\n    its(:value) { should be >= 4294967296 }\n  end\n\n  context linux_kernel_parameter('kernel.shmmax') do\n    its(:value) { should be <= 68719476736 }\n  end\n\n  context linux_kernel_parameter('kernel.osrelease') do\n    its(:value) { should eq '2.6.32-131.0.15.el6.x86_64' }\n  end\n\n  context linux_kernel_parameter('net.ipv4.tcp_wmem') do\n    its(:value) { should match /4096\\t16384\\t4194304/ }\n  end\nend\n```\n\n--\n\n## lxc\n\nLXC(Linux Container) \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n\u3053\u306e\u3088\u3046\u306bLXC\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe lxc('ct01') do\n  it { should exist }\n  it { should be_running }\nend\n```\n\n--\n\n## mail_alias\n\nMail alias \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n\u3053\u306e\u3088\u3046\u306b\u30e1\u30fc\u30eb\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe mail_alias('daemon') do\n  it { should be_aliased_to 'root' }\nend\n```\n\n--\n\n## package\n\nPackage \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### be_installed\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_installed\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe package('httpd') do\n  it { should be_installed }\nend\n```\n\n\u4e0e\u3048\u3089\u308c\u305f\u30d0\u30fc\u30b8\u30e7\u30f3\u306egem\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u3082\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe package('jekyll') do\n  it { should be_installed.by('gem').with_version('0.12.1') }\nend\n```\n\n--\n\n## php_config\n\nPHP config \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n\u3053\u306e\u3088\u3046\u306bPHP\u306e\u8a2d\u5b9a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe 'PHP config parameters' do\n  context  php_config('default_mimetype') do\n    its(:value) { should eq 'text/html' }\n  end\n\n  context php_config('session.cache_expire') do\n    its(:value) { should eq 180 }\n  end\n\n  context php_config('mbstring.http_output_conv_mimetypes') do\n    its(:value) { should match /application/ }\n  end\nend\n```\n\n--\n\n## port\n\nPort \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### be_listening\n\n\u4e0e\u3048\u3089\u308c\u305f\u30dd\u30fc\u30c8\u304c\u30ea\u30c3\u30b9\u30f3\u72b6\u614b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_listening\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe port(80) do\n  it { should be_listening }\nend\n```\n\n`tcp` \u307e\u305f\u306f `udp` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe port(80) do\n  it { should be_listening.with('tcp') }\nend\n\ndescribe port(53) do\n  it { should be_listening.with('udp') }\nend\n```\n\n--\n\n## routing_table\n\nRouting table \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### have_entry\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30c6\u30fc\u30d6\u30eb\u306b\u4e0e\u3048\u3089\u308c\u305f\u30a8\u30f3\u30c8\u30ea\u304c\u3042\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_entry\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe routing_table do\n  it do\n    should have_entry(\n      :destination => '192.168.100.0/24',\n      :interface   => 'eth1',\n      :gateway     => '192.168.10.1',\n    )\n  end\nend\n```\n\n--\n\n## selinux\nSELinux \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### be_disabled/be_enforcing/be_permissive\n\nSELinux\u304c\u4e0e\u3048\u3089\u308c\u305f\u30e2\u30fc\u30c9\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_disabled\u3001be_enforcing\u3001be_permissinve\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\n# SELinux should be disabled\ndescribe selinux do\n  it { should be_disabled }\nend\n\n# SELinux should be enforcing\ndescribe selinux do\n  it { should be_enforcing }\nend\n\n# SELinux should be permissive\ndescribe selinux do\n  it { should be_permissive }\nend\n```\n\n--\n\n## service\nService \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### be_enabled\n\n\u30b5\u30fc\u30d3\u30b9\u304cenabled(OS\u8d77\u52d5\u6642\u306b\u81ea\u52d5\u3067\u8d77\u52d5)\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_enabled\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe service('ntpd') do\n  it { should be_enabled }\nend\n```\n\n\u30e9\u30f3\u30ec\u30d9\u30eb\u3067\u30c6\u30b9\u30c8\u53ef\u80fd\u3067\u3059\u3002(\u73fe\u5728\u306fRed Hat\u7cfb\u304bDebian\u7cfb\u3067\u306e\u307f\u6a5f\u80fd\u3057\u307e\u3059\u3002)\n\n```rb\ndescribe service('ntpd') do\n  it { should be_enabled.with_level(3) }\nend\n```\n\n### be_running\n\n\u4e0e\u3048\u3089\u308c\u305f\u30b5\u30fc\u30d3\u30b9\u3084\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u4e2d\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_running\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe service('ntpd') do\n  it { should be_running }\nend\n```\n\nsupervisor\u306e\u4e0b\u3067\u30b5\u30fc\u30d3\u30b9\u3084\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u4e2d\u304b\u30c6\u30b9\u30c8\u3067\u304d\u307e\u3059\u3002\n\n```rb\ndescribe service('ntpd') do\n  it { should be_running.under('supervisor') }\nend\n```\n\n### be_monitored_by\n\n\u30b5\u30fc\u30d3\u30b9\u3084\u30d7\u30ed\u30bb\u30b9\u304c\u4e0e\u3048\u3089\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306b\u3088\u3063\u3066\u76e3\u8996\u3055\u308c\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_monitored_by\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe service('sshd') do\n  it { should be_monitored_by('monit') }\nend\n\ndescribe service('unicorn') do\n  it { should be_monitored_by('god') }\nend\n```\n\n--\n\n## user\n\nUser \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### exist\n\n\u5bfe\u8c61\u304c\u30e6\u30fc\u30b6\u30fc\u3068\u3057\u3066\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe user('root') do\n  it { should exist }\nend\n```\n\n### belong_to_group\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001belong_to_group\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe user('apache') do\n  it { should belong_to_group 'apache' }\nend\n```\n\n### have_uid\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305fuid\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_uid\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe user('root') do\n  it { should have_uid 0 }\nend\n```\n\n### have_home_directory\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305f\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_home_directory\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe user('root') do\n  it { should have_home_directory '/root' }\nend\n```\n\n### have_login_shell\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305f\u30ed\u30b0\u30a4\u30f3\u30b7\u30a7\u30eb\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_login_shell\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe user('root') do\n  it { should have_login_shell '/bin/bash' }\nend\n```\n\n### have_authorized_key\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u4e0e\u3048\u3089\u308c\u305fauthorized_key\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_authorized_key\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe user('root') do\n  it { should have_authorized_key 'ssh-rsa ABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGHIJKLMNOPQRSTUVWXYZABCDEFGH foo@bar.local' }\nend\n```\n\n--\n\n## yumrepo\n\nYumrepo \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### exist\n\n\u4e0e\u3048\u3089\u308c\u305fyum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe yumrepo('epel') do\n  it { should exist }\nend\n```\n\n### be_enabled\n\n\u4e0e\u3048\u3089\u308c\u305fyum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u4f7f\u7528\u53ef\u80fd\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001be_enabled\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe yumrepo('epel') do\n  it { should be_enabled }\nend\n```\n\n--\n\n## zfs\n\nZFS \u30ea\u30bd\u30fc\u30b9\u30bf\u30a4\u30d7\n\n### exist\n\u4e0e\u3048\u3089\u308c\u305fZFS\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30fc\u30eb\u304c\u5b58\u5728\u3059\u308b\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001exist\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe zfs('rpool') do\n  it { should exist }\nend\n```\n\n### have_property\n\nZFS\u30b9\u30c8\u30ec\u30fc\u30b8\u30d7\u30fc\u30eb\u304c\u4e0e\u3048\u3089\u308c\u305f\u5c5e\u6027\u3092\u6301\u3064\u304b\u30c6\u30b9\u30c8\u3059\u308b\u305f\u3081\u306b\u306f\u3001have_property\u30de\u30c3\u30c1\u30e3\u30fc\u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n```rb\ndescribe zfs('rpool') do\n  it { should have_property 'mountpoint' => '/rpool', 'compression' => 'off' }\nend\n```\n", "tags": ["Ruby", "serverspec", "bundler", "Gem", "RSpec"]}