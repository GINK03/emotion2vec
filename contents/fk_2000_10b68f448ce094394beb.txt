{"context": "EC2\u3092\u7acb\u3061\u4e0a\u3052\u5f8c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30e1\u30e2\u30ea\u5229\u7528\u7387\u306fCloudWatch\u306b\u76e3\u8996\u8ffd\u52a0\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u306e\u305f\u3081\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001CloudWatch\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a2d\u7f6e\u3057\u3066Cron\u3092\u4ed5\u639b\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nCron\u3092\u5b9f\u884c\u3059\u308b\u3068\u305f\u3060\u3061CloudWatch\u5074\u306b\u53cd\u6620\u3059\u308b\u306e\u3067\u6bd4\u8f03\u7684\u7c21\u5358\u3067\u3059\u3002\n\u203bAWS\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u306e\u53d6\u5f97\u306f\u5225\u9014\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum -y install perl-DateTime perl-Sys-Syslog perl-LWP-Protocol-https perl-Digest-SHA\n\n\nCloudWatch\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u683c\u7d0d\u5834\u6240\u3092\u4f5c\u6210\n$ sudo mkdir /usr/local/cloudwatch\n$ cd /usr/local/cloudwatch\n$ sudo wget http://aws-cloudwatch.s3.amazonaws.com/downloads/CloudWatchMonitoringScripts-1.2.1.zip\n$ sudo unzip CloudWatchMonitoringScripts-1.2.1.zip\n$ sudo rm CloudWatchMonitoringScripts-1.2.1.zip\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a2d\u5b9a\n$ cd aws-scripts-mon\n$ sudo cp awscreds.template awscreds.conf\n$ sudo vim awscreds.conf\n\n\n\u300cawscreds.conf\u300d\u306b\u3001\u4ee5\u4e0b\u3092\u8a18\u8f09\n\nAWSAccessKeyId=[\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID]\nAWSSecretKey=[\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc]\n\u203b\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u306e\u53d6\u5f97\u306f\u5225\u9014\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n\nCron\u767b\u9332\n$ crontab -e\n\n\n\u4ee5\u4e0b\u3092crontab\u306b\u767b\u9332\n*/5 * * * * /usr/local/cloudwatch/aws-scripts-mon/mon-put-instance-data.pl --mem-util --mem-used --mem-avail --from-cron\n\nAWS\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089CloudWatch\u3067\u78ba\u8a8d\u3059\u308b\nAWS\u30b3\u30f3\u30bd\u30fc\u30eb\u3067CloudWatch\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u4e2d\u306b\u300cLinux\u30b7\u30b9\u30c6\u30e0\u300d\u306e\u6b04\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n\u300cLinux\u30b7\u30b9\u30c6\u30e0\u300d\uff0d\u300cInstanceId\u300d\u3092\u30c9\u30ea\u30eb\u30c0\u30a6\u30f3\u3059\u308b\u3068\u3001\u300cMemoryUtilization\u300d\u3001\u300cMemoryUsed\u300d\u3001\u300cMemoryAvailable\u300d\u306e\u9805\u76ee\u304c\u53d6\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\u3053\u308c\u3089\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3057\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u8868\u793a\u3067\u304d\u308b\u3002\n\n\n\u307e\u3068\u3081\n\u30e1\u30e2\u30ea\u76e3\u8996\u3067\u30a2\u30e9\u30fc\u30e0\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3001\u307b\u304b\u306b\u3082Disk\u5bb9\u91cf\u76e3\u8996\u3082\u540c\u3058\u8981\u9818\u3067\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002\n\nDisk\u5bb9\u91cf\u76e3\u8996\u306f\u4ee5\u4e0b\u306ecron\u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\n*/5 * * * * /usr/local/cloudwatch/aws-scripts-mon/mon-put-instance-data.pl --disk-space-util --disk-path=/ --from-cron\n\n\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\nAWS EC2\u3067\u30e1\u30e2\u30ea\u5229\u7528\u7387\u3092Cloud Watch\u3067\u76e3\u8996\u3059\u308b\nAWS EC2\u3067\u30e1\u30e2\u30ea\u5229\u7528\u7387\u3068\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092CloudWatch\u3067\u76e3\u8996\u3059\u308b\n\u4e0a\u8a18\u306e\u30b5\u30a4\u30c8\u3060\u3068\u3001\u30d1\u30c3\u30b1\u30fc\u30b8perl-Digest-SHA\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u306e\u3067\u4e0b\u8a18\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u30a8\u30e9\u30fc\u3092\u53d6\u308a\u9664\u3044\u305f\u3002\nRedmine\u3068Git\u3092\u9023\u643a\u3055\u305b\u308b\uff08\u8a8d\u8a3c\u7d71\u5408\uff09\nEC2\u3092\u7acb\u3061\u4e0a\u3052\u5f8c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u30e1\u30e2\u30ea\u5229\u7528\u7387\u306fCloudWatch\u306b\u76e3\u8996\u8ffd\u52a0\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u306e\u305f\u3081\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001CloudWatch\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8a2d\u7f6e\u3057\u3066Cron\u3092\u4ed5\u639b\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nCron\u3092\u5b9f\u884c\u3059\u308b\u3068\u305f\u3060\u3061CloudWatch\u5074\u306b\u53cd\u6620\u3059\u308b\u306e\u3067\u6bd4\u8f03\u7684\u7c21\u5358\u3067\u3059\u3002\n\u203bAWS\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u306e\u53d6\u5f97\u306f\u5225\u9014\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo yum -y install perl-DateTime perl-Sys-Syslog perl-LWP-Protocol-https perl-Digest-SHA\n```\n\n## CloudWatch\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u683c\u7d0d\u5834\u6240\u3092\u4f5c\u6210\n\n```\n$ sudo mkdir /usr/local/cloudwatch\n$ cd /usr/local/cloudwatch\n$ sudo wget http://aws-cloudwatch.s3.amazonaws.com/downloads/CloudWatchMonitoringScripts-1.2.1.zip\n$ sudo unzip CloudWatchMonitoringScripts-1.2.1.zip\n$ sudo rm CloudWatchMonitoringScripts-1.2.1.zip\n```\n\n## \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8a2d\u5b9a\n\n```\n$ cd aws-scripts-mon\n$ sudo cp awscreds.template awscreds.conf\n$ sudo vim awscreds.conf\n```\n\n### \u300cawscreds.conf\u300d\u306b\u3001\u4ee5\u4e0b\u3092\u8a18\u8f09\n- AWSAccessKeyId=[\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID]\n- AWSSecretKey=[\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc]\n\u203b\u30a2\u30af\u30bb\u30b9\u30ad\u30fcID\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u306e\u53d6\u5f97\u306f\u5225\u9014\u884c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n## Cron\u767b\u9332\n\n```\n$ crontab -e\n```\n\n### \u4ee5\u4e0b\u3092crontab\u306b\u767b\u9332\n`*/5 * * * * /usr/local/cloudwatch/aws-scripts-mon/mon-put-instance-data.pl --mem-util --mem-used --mem-avail --from-cron`\n\n\n## AWS\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089CloudWatch\u3067\u78ba\u8a8d\u3059\u308b\nAWS\u30b3\u30f3\u30bd\u30fc\u30eb\u3067CloudWatch\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u4e2d\u306b\u300cLinux\u30b7\u30b9\u30c6\u30e0\u300d\u306e\u6b04\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n![20161207_aws_ec2_memory_metrix.png](https://qiita-image-store.s3.amazonaws.com/0/2567/c2fe63fc-2459-8fa4-0e87-3b98df6b3d8b.png)\n\n\n\u300cLinux\u30b7\u30b9\u30c6\u30e0\u300d\uff0d\u300cInstanceId\u300d\u3092\u30c9\u30ea\u30eb\u30c0\u30a6\u30f3\u3059\u308b\u3068\u3001\u300cMemoryUtilization\u300d\u3001\u300cMemoryUsed\u300d\u3001\u300cMemoryAvailable\u300d\u306e\u9805\u76ee\u304c\u53d6\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\u3053\u308c\u3089\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3057\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u8868\u793a\u3067\u304d\u308b\u3002\n![20161213_aws_ec2_memory_5stack.png](https://qiita-image-store.s3.amazonaws.com/0/2567/764cbe1a-393c-d06a-0a12-5fba4529a252.png)\n\n## \u307e\u3068\u3081\n\u30e1\u30e2\u30ea\u76e3\u8996\u3067\u30a2\u30e9\u30fc\u30e0\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3001\u307b\u304b\u306b\u3082Disk\u5bb9\u91cf\u76e3\u8996\u3082\u540c\u3058\u8981\u9818\u3067\u8ffd\u52a0\u3067\u304d\u307e\u3059\u3002\n\n### Disk\u5bb9\u91cf\u76e3\u8996\u306f\u4ee5\u4e0b\u306ecron\u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\n`*/5 * * * * /usr/local/cloudwatch/aws-scripts-mon/mon-put-instance-data.pl --disk-space-util --disk-path=/ --from-cron`\n\n## \u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\n[AWS EC2\u3067\u30e1\u30e2\u30ea\u5229\u7528\u7387\u3092Cloud Watch\u3067\u76e3\u8996\u3059\u308b](http://qiita.com/masarufuruya/items/212adbfb285476683c47)\n[AWS EC2\u3067\u30e1\u30e2\u30ea\u5229\u7528\u7387\u3068\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092CloudWatch\u3067\u76e3\u8996\u3059\u308b](http://wannabe-jellyfish.hatenablog.com/entry/2016/12/14/215432)\n\n\u4e0a\u8a18\u306e\u30b5\u30a4\u30c8\u3060\u3068\u3001\u30d1\u30c3\u30b1\u30fc\u30b8perl-Digest-SHA\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u306e\u3067\u4e0b\u8a18\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u30a8\u30e9\u30fc\u3092\u53d6\u308a\u9664\u3044\u305f\u3002\n[Redmine\u3068Git\u3092\u9023\u643a\u3055\u305b\u308b\uff08\u8a8d\u8a3c\u7d71\u5408\uff09](http://d.hatena.ne.jp/torutk/20130117/p1)\n", "tags": ["AWS", "EC2", "\u30e1\u30e2\u30ea"]}