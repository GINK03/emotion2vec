{"context": "Edge.js\u306fnode.js\u3068C#\u3084python\u306a\u3069\u3092\u6df7\u5728\u3057\u3066\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3057\u3061\u3083\u304a\u3046\u307f\u305f\u3044\u306a\u305d\u3093\u306a\u3084\u3064\u307f\u305f\u3044\u3067\u3059\u3002\n\u4eca\u56de\u306fC#\u304b\u3089node.js\u3092\u5b9f\u884c\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n.NET MVC\u3067API\u3092\u66f8\u3044\u3066\u3044\u308b\u60f3\u5b9a\u3067\u3059\u3002\nNuGet\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\n\nInstall-Package Edge.js\n\n\nC#\u306e\u30af\u30e9\u30b9\u304b\u3089javascript\u30d5\u30a1\u30a4\u30eb\u3092\u547c\u3073\u51fa\u3057\u3066\u307f\u308b\n\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u3093\u3067\u3059\u304c\u3001NMecab\u306b\u8f9e\u66f8\u6a5f\u80fd\u304c\u306a\u3044\u3063\u307d\u3044\u306e\u3067\u3001rakutenma.js\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\nControllers/HogeController.cs\n\nusing EdgeJs;\npublic class HogeController :ApiController\n{\n    public async Task<string> Get()\n    {\n        var arg = \"test\";\n        var result = await Edge.Func(this.JsSource(\"rakutenma_tokenize.js\"))(arg);\n        return result.ToString();\n    }\n    public string JsSource(string path)\n    {\n        var rootPath = System.Web.HttpContext.Current.Server.MapPath(\"/\");\n        return \"return function (data, callback) {\" + File.ReadAllText($\"{rootPath}/Scripts/{path}\") + \"}\";\n    }\n}\n\n\n\nScripts/rakutenma_tokenize.js\ncallback(null, 'Node.js ' + process.version + ' welcomes ' + data);\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u304c\u8fd4\u308b\n\nNode.js v5.9.1 welcomes test\n\n\nnpm \u304b\u3089\u53d6\u5f97\u3057\u305frakutenma.js\u3092\u4f7f\u3046\nrakutenma.js\npackages\u30d5\u30a9\u30eb\u30c0\u304c\u3042\u308b\u3068\u3053\u308d\u3067\nwwwroot\u76f4\u4e0b\u3067\nnpm install rakutenma --save\n\u3057\u307e\u3059\u3002\n(node_modules\u3092\u3069\u3053\u306b\u7f6e\u304f\u3079\u304d\u306a\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001deploy\u6642\u306b\u3082\u4e00\u7dd2\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u306b\u3057\u305f\u3089\u52d5\u304d\u307e\u3057\u305f)\nScripts/rakutenma_tokenize.js \u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\nScripts/rakutenma_tokenize.js\nvar RakutenMA = require('rakutenma');\n/* __dirname \u306f bin/edge \u3060\u3063\u305f */\nvar model = require('../../node_modules/rakutenma/model_ja.json');\nvar rma = new RakutenMA(model, 1024, 0.007812);\nrma.featset = RakutenMA.default_featset_ja;\nrma.hash_func = RakutenMA.create_hash_func(15);\n\nvar message = rma.tokenize('\u5f7c\u306f\u65b0\u3057\u3044\u4ed5\u4e8b\u3067\u304d\u3063\u3068\u6210\u529f\u3059\u308b\u3060\u308d\u3046\u3002');\n\n\ncallback(null, 'result = ' + JSON.stringify(message));\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u304c\u8fd4\u308b\n\nresult = [[\"\u5f7c\",\"D\"],[\"\u306f\",\"P-rj\"],[\"\u65b0\u3057\u3044\",\"A-c\"],[\"\u4ed5\u4e8b\",\"N-nc\"],[\"\u3067\",\"P-k\"],[\"\u304d\u3063\u3068\",\"F\"],[\"\u6210\u529f\",\"N-nc\"],[\"\u3059\u308b\",\"V-dp\"],[\"\u3060\u308d\u3046\",\"X\"],[\"\u3002\",\"M-p\"]]\n\n\u306a\u3093\u304b\u52d5\u3044\u3066\u308b\u3063\u307d\u3044\u611f\u3058\u3067\u3059!!\u3084\u3063\u305f\n\u8ffd\u8a18\n\u540c\u3058\u3053\u3068\u3084\u3063\u3066\u308b\u4eba\u3044\u305f!!\u7528\u9014\u307e\u3067\u304b\u3076\u3063\u3066\u3044\u308b\u3068\u306f\nhttp://tamafuyou.hatenablog.com/entry/2016/04/10/045238\n[Edge.js](https://github.com/tjanczuk/edge#how-to-call-nodejs-from-c)\u306fnode.js\u3068C#\u3084python\u306a\u3069\u3092\u6df7\u5728\u3057\u3066\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3057\u3061\u3083\u304a\u3046\u307f\u305f\u3044\u306a\u305d\u3093\u306a\u3084\u3064\u307f\u305f\u3044\u3067\u3059\u3002\n\n\u4eca\u56de\u306fC#\u304b\u3089node.js\u3092\u5b9f\u884c\u3057\u305f\u304b\u3063\u305f\u306e\u3067\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n.NET MVC\u3067API\u3092\u66f8\u3044\u3066\u3044\u308b\u60f3\u5b9a\u3067\u3059\u3002\n\nNuGet\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\n\n``` nuget\n\nInstall-Package Edge.js\n```\n\n## C#\u306e\u30af\u30e9\u30b9\u304b\u3089javascript\u30d5\u30a1\u30a4\u30eb\u3092\u547c\u3073\u51fa\u3057\u3066\u307f\u308b\n\n\u5f62\u614b\u7d20\u89e3\u6790\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u3093\u3067\u3059\u304c\u3001NMecab\u306b\u8f9e\u66f8\u6a5f\u80fd\u304c\u306a\u3044\u3063\u307d\u3044\u306e\u3067\u3001rakutenma.js\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n``` Controllers/HogeController.cs\n\nusing EdgeJs;\npublic class HogeController :ApiController\n{\n    public async Task<string> Get()\n    {\n        var arg = \"test\";\n        var result = await Edge.Func(this.JsSource(\"rakutenma_tokenize.js\"))(arg);\n        return result.ToString();\n    }\n    public string JsSource(string path)\n    {\n        var rootPath = System.Web.HttpContext.Current.Server.MapPath(\"/\");\n        return \"return function (data, callback) {\" + File.ReadAllText($\"{rootPath}/Scripts/{path}\") + \"}\";\n    }\n}\n```\n\n``` Scripts/rakutenma_tokenize.js\ncallback(null, 'Node.js ' + process.version + ' welcomes ' + data);\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u304c\u8fd4\u308b\n> Node.js v5.9.1 welcomes test\n\n## npm \u304b\u3089\u53d6\u5f97\u3057\u305frakutenma.js\u3092\u4f7f\u3046\n\n[rakutenma.js](https://github.com/rakuten-nlp/rakutenma)\n\n~~packages\u30d5\u30a9\u30eb\u30c0\u304c\u3042\u308b\u3068\u3053\u308d\u3067~~\nwwwroot\u76f4\u4e0b\u3067\n`npm install rakutenma --save`\n\u3057\u307e\u3059\u3002\n(node_modules\u3092\u3069\u3053\u306b\u7f6e\u304f\u3079\u304d\u306a\u306e\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001deploy\u6642\u306b\u3082\u4e00\u7dd2\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3057\u305f\u306e\u3067\u3001\u3053\u3053\u306b\u3057\u305f\u3089\u52d5\u304d\u307e\u3057\u305f)\n\nScripts/rakutenma_tokenize.js \u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n``` Scripts/rakutenma_tokenize.js\nvar RakutenMA = require('rakutenma');\n/* __dirname \u306f bin/edge \u3060\u3063\u305f */\nvar model = require('../../node_modules/rakutenma/model_ja.json');\nvar rma = new RakutenMA(model, 1024, 0.007812);\nrma.featset = RakutenMA.default_featset_ja;\nrma.hash_func = RakutenMA.create_hash_func(15);\n\nvar message = rma.tokenize('\u5f7c\u306f\u65b0\u3057\u3044\u4ed5\u4e8b\u3067\u304d\u3063\u3068\u6210\u529f\u3059\u308b\u3060\u308d\u3046\u3002');\n\n\ncallback(null, 'result = ' + JSON.stringify(message));\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u304c\u8fd4\u308b\n> result = [[\"\u5f7c\",\"D\"],[\"\u306f\",\"P-rj\"],[\"\u65b0\u3057\u3044\",\"A-c\"],[\"\u4ed5\u4e8b\",\"N-nc\"],[\"\u3067\",\"P-k\"],[\"\u304d\u3063\u3068\",\"F\"],[\"\u6210\u529f\",\"N-nc\"],[\"\u3059\u308b\",\"V-dp\"],[\"\u3060\u308d\u3046\",\"X\"],[\"\u3002\",\"M-p\"]]\n\n\u306a\u3093\u304b\u52d5\u3044\u3066\u308b\u3063\u307d\u3044\u611f\u3058\u3067\u3059!!\u3084\u3063\u305f\n\n\u8ffd\u8a18\n\n\u540c\u3058\u3053\u3068\u3084\u3063\u3066\u308b\u4eba\u3044\u305f!!\u7528\u9014\u307e\u3067\u304b\u3076\u3063\u3066\u3044\u308b\u3068\u306f\nhttp://tamafuyou.hatenablog.com/entry/2016/04/10/045238\n", "tags": ["MdNote", "ASP.NET_MVC", "JavaScript", "Node.js", "C#"]}