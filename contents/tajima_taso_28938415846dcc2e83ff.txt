{"context": "\n\n\u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\u30aa\u30fc\u30eb\u30a2\u30d0\u30a6\u30c8 Advent Calendar 2016\u306e23\u65e5\u76ee\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u3067\u3059\u3002\n\u79c1\u3001@tajima_taso\u304b\u3089\u306f\u3010\u539f\u7406\u539f\u5247\u3067\u7406\u89e3\u3059\u308bDocker\u3011\u3068\u984c\u3057\u3066\u66f8\u304b\u305b\u3066\u9802\u304d\u307e\u3059\u3002\nDocker\u3063\u3066\u305d\u3082\u305d\u3082\u4f55\uff1f\u3063\u3066\u3068\u3053\u308d\u304b\u3089\u3001\u5185\u90e8\u5b9f\u88c5\u90e8\u5206\u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3066\u3044\u307e\u3059\u3002\n\nDocker\u3068\u306f\u4f55\u304b?\n\u307e\u305a\u3001Docker\u3068\u306f\u4f55\u306a\u306e\u304b\uff1f\u306b\u3064\u3044\u3066\u8efd\u304f\u304a\u3055\u3089\u3044\u3057\u307e\u3057\u3087\u3046\u3002\n\u4eca\u66f4\u805e\u3051\u306a\u3044\u3068\u3044\u3046\u65b9\u3082\u3001\u306a\u3093\u3068\u306a\u304f\u30a4\u30e1\u30fc\u30b8\u304c\u63b4\u3081\u305f\u3089\u5b09\u3057\u3044\u3067\u3059\u3002\n\n\u4f55\u6545\u3001\u4ecaDocker\u306a\u306e\u304b?\nDocker\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3092\u884c\u3046\u74b0\u5883\u306b\u3044\u308b\u65b9\u3005\u306e\u4e2d\u3067\u3001\u3053\u306e\u8a00\u8449\u3092\u8033\u306b\u3059\u308b\u6a5f\u4f1a\u304c\u5897\u3048\u3066\u304d\u3066\u3044\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\u5b9f\u969b\u306e\u696d\u52d9\u306b\u304a\u3044\u3066\u5c0e\u5165\u307e\u3067\u306f\u3057\u3066\u3044\u306a\u3044\u3068\u3057\u3066\u3082\u3001\u4f55\u3068\u306a\u304f\u76db\u308a\u4e0a\u304c\u3063\u3066\u3044\u308b\u6280\u8853\u7528\u8a9e\u3067\u3042\u308b\u3053\u3068\u306f\u808c\u611f\u899a\u3068\u3057\u3066\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u5b9f\u306f\u3001Docker\u5b9f\u73fe\u306e\u30d9\u30fc\u30b9\u3068\u306a\u3063\u3066\u3044\u308bLinux\u30b3\u30f3\u30c6\u30ca\u3068\u3044\u3046\u6280\u8853\u81ea\u4f53\u306f\u305a\u3063\u3068\u524d\u304b\u3089\u5b58\u5728\u3057\u3066\u3044\u307e\u3057\u305f\u3002\nLinux\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u5b9f\u73fe\u306e\u6838\u3068\u306a\u308b\u6a5f\u80fd\u306f\u4e3b\u306b\u3001namespace\u3068cgroups\u3068\u3044\u3046\u3082\u306e\u306a\u306e\u3067\u3059\u304c\u3001\u4e2d\u3067\u3082\u30d7\u30ed\u30bb\u30b9\u7a7a\u9593\u306e\u5206\u96e2\u304c\u53ef\u80fd\u306b\u306a\u3063\u305fPID Namespace\u306e\u5b9f\u88c5\u306f2008\u5e74\u306eLinux\u30ab\u30fc\u30cd\u30eb2.6.24\u304b\u3089\u3067\u3059\u3002\nPID namespaces in the 2.6.24 kernel\n\u3059\u306a\u308f\u3061Docker\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3084\u308d\u3046\u3068\u601d\u3048\u3070\u30012008\u5e74\u304b\u3089\u3084\u308b\u30c1\u30e3\u30f3\u30b9\u306f\u3042\u3063\u305f\u308f\u3051\u3067\u3059\u3057\u3001\u5b9f\u969b\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u3092\u4f7f\u3063\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u958b\u767a\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\u4e0b\u8a18\u306fDocker\u4ee5\u524d\u304b\u3089\u3042\u308b\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u306e\u4e00\u4f8b\u3067\u3059\u3002\nSolaris Zone\nOracle Solaris\u30b3\u30f3\u30c6\u30ca\uff1aOracle Solaris 10 \u65b0\u6a5f\u80fd \u6a5f\u80fd\u7de8(1)\uff1aSolaris\u30be\u30fc\u30f3\nFreeBSD Jail\nhttps://ja.wikipedia.org/wiki/FreeBSD_jail\nRHEL OpenVZ\nOpenVZ\n\u305d\u308c\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u304c\u65b0\u3057\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3057\u304b\u3082\u305d\u308c\u304c\u2252Docker\u306e\u3088\u3046\u306b\u601d\u308f\u308c\u3066\u3057\u307e\u3046\u307b\u3069\u6ce8\u76ee\u3092\u96c6\u3081\u3066\u3044\u308b\u306e\u306f\u3001\u4f55\u6545\u306a\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\n\u79c1\u306f\u3001\u4ee5\u4e0b\u306e\u6d41\u308c\u304c\u8981\u56e0\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u958b\u767a\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3001\u305d\u3057\u3066\u305d\u306e\u958b\u767a\u74b0\u5883\u304c\u500b\u4eba\u3001\u4e2d\u5c0f\u3001\u5927\u4f01\u696d\u30ec\u30d9\u30eb\u3092\u554f\u308f\u305a\u5341\u5206\u306b\u8907\u96d1\u306a\u3082\u306e\u306b\u306a\u3063\u3066\u304d\u305f\u3002\n1\u306e\u554f\u984c\u3092\u7d71\u5408\u7684\u306b\u89e3\u6c7a\u3059\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001Docker\u304c\u6642\u4ee3\u306e\u30cb\u30fc\u30ba\u306b\u3042\u308f\u305b\u305f\u30ab\u30bf\u30c1\u3067\u30bf\u30a4\u30df\u30f3\u30b0\u3088\u304f\u767b\u5834\u3057\u305f\u3002\nGoogle\u3084Microsoft\u3092\u306f\u3058\u3081\u3068\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u95a2\u308f\u308b\u4e16\u754c\u4e2d\u306e\u4f1a\u793e\u3084\u56e3\u4f53\u3001\u500b\u4eba\u304c\u5e83\u304f\u305d\u306e\u6709\u7528\u6027\u3092\u8a8d\u3081\u59cb\u3081\u3001\u95a2\u9023\u3059\u308bOS\u3001\u30c4\u30fc\u30eb(CoreOS\u3001Kubernetes\u3001Rancher)\u304c\u591a\u304f\u4f5c\u3089\u308c\u59cb\u3081\u305f\u3002\n\n\u7d4c\u9a13\u5247\u306b\u3088\u308b\u500b\u4eba\u7684\u898b\u89e3\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u6982\u306d\u8a8d\u8b58\u306f\u9593\u9055\u3063\u3066\u3044\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u307e\u3067\u306e\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u304c\u3069\u3061\u3089\u304b\u3068\u3044\u3048\u3070\u8907\u96d1\u306a\u30b7\u30b9\u30c6\u30e0\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3067\u5229\u7528\u3055\u308c\u3066\u304d\u305f\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u306e\u666e\u53ca\u306f\u305d\u308c\u304c\u7279\u5225\u306a\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u591a\u304f\u306e\u4eba\u306b\u5fc5\u8981\u3068\u3055\u308c\u308b\u4e16\u306e\u4e2d\u306b\u306a\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u610f\u5473\u3057\u3066\u3044\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\u73fe\u4ee3\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3060\u3051\u3067\u5b8c\u7d50\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u306f\u306a\u304f\u3001\u305d\u308c\u306b\u4ed8\u968f\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3001OS\u30ec\u30d9\u30eb\u3067\u63d0\u4f9b\u3055\u308c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\u304c\u5bc6\u7d50\u5408\u3067\u8907\u96d1\u306b\u7d61\u307f\u3042\u3063\u3066\u3044\u307e\u3059\u3002\n\u52a0\u3048\u3066\u3001\u65e7\u6765\u306e\u3088\u3046\u306b\u30a6\u30a9\u30fc\u30bf\u30fc\u30d5\u30a9\u30fc\u30eb\u578b\u3067\u3057\u3063\u304b\u308a\u3068\u958b\u767a\u3057\u3066\u7d0d\u54c1\u3057\u305f\u3089\u305d\u3053\u3067\u7d42\u4e86\u3068\u3044\u3046\u6642\u4ee3\u3067\u306f\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u8005\u306b\u5fc5\u8981\u3068\u3055\u308c\u3066\u3044\u308b\u306e\u306f\u3001\u5fc5\u8981\u3068\u306a\u308b\u6a5f\u80fd\u3092\u7d99\u7d9a\u7684\u306b\u8ffd\u52a0\u3001\u5909\u66f4\u3001\u4fee\u6b63\u3057\u3001\u5546\u7528\u74b0\u5883\u3078\u78ba\u5b9f\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3060\u3051\u3067\u306a\u304f\u3001\u5171\u6709\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3082\u4e3b\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u9762\u304b\u3089\u5fc5\u8981\u3068\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306f\u5927\u4e2d\u5c0f\u306e\u898f\u6a21\u306b\u304b\u304b\u308f\u3089\u305a\u3001\u8907\u96d1\u5316\u3057\u3066\u304d\u3066\u304a\u308a\u3001\u4eca\u5f8c\u3082\u66f4\u306b\u8907\u96d1\u306b\u306a\u3063\u3066\u3044\u304f\u3053\u3068\u3067\u3057\u3087\u3046\u3002\n\nDocker\u306f\u4f55\u3092\u89e3\u6c7a\u3059\u308b\u306e\u304b?\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u306e\u306f\u3001\u307e\u3060\u307e\u3060\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u8005\u306e\u4ed5\u4e8b\u3067\u3059\u3002\n\u73fe\u72b6\u306b\u304a\u3044\u3066\u3082\u3001\u7d99\u7d9a\u7684\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u7ba1\u7406\u3059\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001Git\u306a\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30c4\u30fc\u30eb\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u958b\u767a\u8005\u306f\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u306b\u304a\u3044\u3066\u306f\u3001\u30c7\u30b0\u30ec\u306a\u3069\u306e\u30df\u30b9\u306f\u56de\u907f\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3051\u3067\u306f\u5148\u7a0b\u8ff0\u3079\u305f\u73fe\u72b6\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u308c\u3092\u89e3\u6c7a\u3059\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u671f\u5f85\u3055\u308c\u3066\u3044\u308b\u306e\u304cDocker\u306a\u306e\u3067\u3059\u3002\nDocker\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u305d\u306e\u5b9f\u884c\u74b0\u5883\u3092\u7d71\u5408\u7684\u306b\u7ba1\u7406\u3059\u308b\u70ba\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u958b\u767a\u74b0\u5883\u306b\u304a\u3051\u308bOS\u30ec\u30d9\u30eb\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3001\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3001\u74b0\u5883\u8a2d\u5b9a\u306f\u3001\u5e38\u306b\u672c\u756a\u74b0\u5883\u3068\u540c\u3058\u3082\u306e\u306b\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u8a00\u3063\u3066\u307f\u308c\u3070\u3001\u30c7\u30d7\u30ed\u30a4\u6642\u306f\u958b\u767a\u74b0\u6642\u306eOS\u30ec\u30d9\u30eb\u306e\u74b0\u5883\u3092\u307e\u308b\u3054\u3068\u3001\u672c\u756a\u74b0\u5883\u3078\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\n\u3053\u308c\u306f\u3001\n\u958b\u767a\u74b0\u5883\u3067\u52d5\u3044\u305f\u3051\u3069\u3001\u672c\u756a\u74b0\u5883\u3067\u52d5\u304b\u306a\u3044\n\u3059\u306a\u308f\u3061\u3001\u672c\u756a\u74b0\u5883\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u6642\u306e\u6700\u5927\u306e\u4e0d\u5b89\u8981\u7d20\u304c\u7121\u304f\u306a\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\n\u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u306e\u9055\u3044\n\u4f3c\u305f\u3088\u3046\u306a\u3082\u306e\u3068\u3057\u3066\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u3044\u3046\u3082\u306e\u3092\u9023\u60f3\u3059\u308b\u65b9\u3082\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3067\u306f\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3068Docker\u306f\u3069\u3046\u9055\u3044\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\n\u30b5\u30fc\u30d0\u306e\u4eee\u60f3\u5316\u306b\u306f\u30db\u30b9\u30c8OS\u578b\u3068\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u578b(\u8fd1\u5e74\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u9762\u306e\u7406\u7531\u304b\u3089\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u578b\u304c\u4e3b\u6d41)\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3044\u305a\u308c\u306b\u3057\u3066\u3082\u30b2\u30b9\u30c8OS\u3092\u7ba1\u7406\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306b\u3088\u3063\u3066\u3001\u7269\u7406\u30b5\u30fc\u30d0\u4e0a\u306b\u8907\u6570\u306eOS\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u65b9\u5f0f\u3067\u3059\u3002\n\u30b2\u30b9\u30c8OS\u304b\u3089\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8981\u6c42(CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af)\u306f\u3001\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u3088\u3063\u3066\u4e00\u65e6\u5236\u5fa1\u3055\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u5c11\u306a\u304b\u3089\u306c\u30aa\u30fc\u30d0\u30d8\u30c3\u30c9\u304c\u751f\u3058\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u6e96\u4eee\u60f3\u5316\u65b9\u5f0f\u306e\u5c0e\u5165\u306b\u3088\u3063\u3066\u30b2\u30b9\u30c8OS\u81ea\u4f53\u3092\u5909\u66f4\u3057\u3066\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6700\u9069\u5316\u3059\u308b\u6280\u8853\u306a\u3069\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u305d\u306e\u3076\u3093\u7ba1\u7406\u30b3\u30b9\u30c8\u306f\u9ad8\u304f\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d0\u306e\u4eee\u60f3\u5316\u65b9\u5f0f\u3067\u306f\u3001\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u52a0\u3048\u3001\u8907\u6570\u306eOS\u3092\u7d71\u5408\u7684\u306b\u7ba1\u7406\u3057\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u3078\u3093\u306e\u7ba1\u7406\u30b3\u30b9\u30c8\u306f\u9ad8\u304f\u3001\u3042\u308b\u7a0b\u5ea6\u904b\u7528\u3057\u305f\u74b0\u5883\u3067OS\u30ec\u30d9\u30eb\u306e\u8a2d\u5b9a\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u3088\u3046\u3082\u306e\u306a\u3089\u3001\u4e00\u5927\u30a4\u30d9\u30f3\u30c8\u3068\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3053\u308c\u306b\u5bfe\u3057\u3066Docker\u306f\u3042\u304f\u307e\u3067OS\u4e0a\u3067\u52d5\u304f\u3001\u30d7\u30ed\u30bb\u30b9\u306e\uff11\u3064\u306b\u904e\u304e\u307e\u305b\u3093\u3002Linux\u4e0a\u3067\u7a3c\u50cd\u3059\u308b\u95a2\u9023\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u3092\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3001\u305d\u308c\u305e\u308c\u306f\u72ec\u7acb\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u7a7a\u9593\u3067\u7a3c\u50cd\u3057\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u5206\u96e2\u3055\u308c\u305f\u5b9f\u884c\u74b0\u5883\u306e\u3053\u3068\u3092\u30b3\u30f3\u30c6\u30ca\u3068\u547c\u3073\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u5185\u90e8\u3067\u306f\u4ed6\u306e\u5b9f\u884c\u74b0\u5883\u3068\u7570\u306a\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30c4\u30ea\u30fc\u3001\u30d7\u30ed\u30bb\u30b9\u30c6\u30fc\u30d6\u30eb\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\nLinux\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u3067\u3001ps aux\u3068\u6253\u3063\u3066\u4e0b\u3055\u3044\u3002\n\u305f\u304f\u3055\u3093\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u4e00\u89a7\u3067\u8868\u793a\u3055\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001Docker\u306f\u3042\u304f\u307e\u3067\u305d\u306e\u4e2d\u306e\uff11\u3064\u306b\u904e\u304e\u306a\u3044\u306e\u3067\u3059\u3002\n\u4eee\u60f3\u5316\u30b5\u30fc\u30d0\u306e\u4f8b\u3067\u3044\u3046\u3068\u3001Docker\u306f\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u30c7\u30fc\u30e2\u30f3\u3068\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u3042\u304f\u307e\u3067\u30d7\u30ed\u30bb\u30b9\u306e\uff11\u3064\u3067\u3059\u3002\n\u8a00\u3063\u3066\u3057\u307e\u3048\u3070\u3001/usr/sbin/sshd\u3084/usr/sbin/httpd\u3068\u540c\u3058\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\nsshd\u3082httpd\u3082\u30d5\u30a9\u30fc\u30af\u3057\u3066\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u304c\u3001Docker\u3082\u30d5\u30a9\u30fc\u30af\u3057\u305f\u5b50\u30d7\u30ed\u30bb\u30b9\u306e\u4e2d\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u73fe\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u3002\n\u305f\u3068\u3048\u3070Apache(httpd)\u306e\u8a2d\u5b9a\u5909\u66f4\u3092\u601d\u3044\u6d6e\u304b\u3079\u3066\u4e0b\u3055\u3044\u3002\n$ sudo vi /etc/httpd/conf.d/*conf\n# \u4f55\u304b\u5909\u66f4\n$ systemctl restart httpd.service\n\n\u3068\u3044\u3046\u3088\u3046\u306bApache\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3092\u4fee\u6b63\u3057\u3066\u3001\u30d7\u30ed\u30bb\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308c\u3070\u65b0\u3057\u3044Apache\u306e\u8a2d\u5b9a\u304c\u3055\u308c\u305f\u72b6\u614b\u3067Apache\u304c\u7a3c\u50cd\u3057\u307e\u3059\u3002\n\u5b8c\u5168\u306b\u30a4\u30b3\u30fc\u30eb\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u306fDocker\u306b\u3088\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u74b0\u5883\u69cb\u7bc9\u3084\u672c\u756a\u74b0\u5883\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u306f\u3053\u308c\u3068\u540c\u3058\u3053\u3068\u3067\u3059\u3002\nDocker\u306fDockerfile\u3068\u3044\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u3001\u5168\u3066\u306e\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u30921\u304b\u3089(\u3042\u308b\u3044\u306f\u4e2d\u9593\u30a4\u30e1\u30fc\u30b8\u304b\u3089)\u30d3\u30eb\u30c9\u3059\u308b\u4ed5\u7d44\u307f\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3092\u5909\u66f4\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3088\u3046\u306a\u904b\u7528\u3092\u884c\u3048\u3070\u3001\u4f55\u5ea6\u3067\u3082\u3069\u3053\u306b\u3067\u3082\u540c\u3058\u5b9f\u884c\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u66f4\u306b\u3053\u308c\u3092Git\u306a\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u4f75\u7528\u3059\u308c\u3070\u3001\u74b0\u5883\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3082\u624b\u8efd\u306b\u884c\u3048\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u5909\u66f4\u3068\u306f\u9055\u3044\u3001\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306b\u304a\u3051\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u304b\u3089\u306e\u518d\u8d77\u52d5\u306e\u3088\u3046\u306a\u624b\u8efd\u3055\u3067\u5b9f\u884c\u74b0\u5883\u306e\u9069\u7528\u304c\u53ef\u80fd\u306b\u306a\u308b\u306e\u3067\u3059\u3002\n\nDocker\u3092\u4f7f\u3063\u3066\u307f\u308b\n\u5b9f\u969b\u306bdocker\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002Linux\u4e0a\u306bDocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u305a\u307f\u306e\u72b6\u614b\u3067\u3001Docker\u30c7\u30fc\u30e2\u30f3\u304c\u8d77\u52d5\u4e2d\u3068\u3057\u307e\u3059\u3002\u79c1\u306f\u4eca\u56deCentOS7.2\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n$ ps aux | grep docker\nroot       941  0.0  1.8 668340 37824 ?        Ssl  12\u670818   1:11 /usr/bin/docker-current daemon --exec-opt native.cgroupdriver=systemd --selinux-enabled --log-driver=journald\n# docker\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\n\n\u3053\u306e\u72b6\u614b\u3067\u3042\u308c\u3070\u3001docker\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001Docker\u30c7\u30fc\u30e2\u30f3\u304c\u63d0\u4f9b\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305a\u306f\u3001Docker Hub\u304b\u3089CentOS\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n$ sudo docker pull centos\n#\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u51e6\u7406\n$ sudo docker images \n#\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7\u8868\u793a\n\n\u30bf\u30b0\u540d\u3001centos6.7\u306e\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\n$ sudo docker run -it --name centos6 centos:centos6.7 /bin/bash\n\n\u3059\u308b\u3068\u3001\u5148\u7a0bdocker\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u305fLinux\u306eOS\u74b0\u5883\u3068\u306f\u307e\u3063\u305f\u304f\u9055\u3046Linux\u74b0\u5883\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u3088\u3046\u306a\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\n\u305d\u308c\u3067\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u305fOS\u74b0\u5883\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u306e\u5185\u90e8\u3067\u540c\u3058\u30b7\u30b9\u30c6\u30e0\u78ba\u8a8d\u7528\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u9055\u3044\u3092\u3056\u3063\u3068\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u306a\u304a\u3001\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u306e\u4e2d\u3067\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u305fOS\u74b0\u5883\u3092\u30db\u30b9\u30c8\u74b0\u5883\u3068\u547c\u3073\u30b3\u30f3\u30c6\u30ca\u3092\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3068\u547c\u3076\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n# \u30db\u30b9\u30c8\u74b0\u5883\n\n$ cat /etc/redhat-release\nCentOS Linux release 7.2.1511 (Core)\n\n$ ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000\n    link/ether 9c:a3:ba:30:d3:bd brd ff:ff:ff:ff:ff:ff\n    inet 133.242.236.36/24 brd 133.242.236.255 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::9ea3:baff:fe30:d3bd/64 scope link\n       valid_lft forever preferred_lft forever\n3: docker0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP\n    link/ether 02:42:e4:d2:82:68 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.1/16 scope global docker0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:e4ff:fed2:8268/64 scope link\n       valid_lft forever preferred_lft forever\n\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.1  43244  3636 ?        Ss   12\u670818   0:21 /usr/lib/systemd/systemd --switched-root --system --deserialize 21\nroot         1  0.0  0.1  43244  3636 ?        Ss   12\u670818   0:21 /usr/lib/systemd/systemd --switched-root --system --deserialize 21\nroot         2  0.0  0.0      0     0 ?        S    12\u670818   0:00 [kthreadd]\nroot         3  0.0  0.0      0     0 ?        S    12\u670818   0:00 [ksoftirqd/0]\nroot         7  0.0  0.0      0     0 ?        S    12\u670818   0:00 [migration/0]\nroot         8  0.0  0.0      0     0 ?        S    12\u670818   0:00 [rcu_bh]\nroot         9  0.0  0.0      0     0 ?        S    12\u670818   0:00 [rcuob/0]\nroot        10  0.0  0.0      0     0 ?        S    12\u670818   0:00 [rcuob/1]\n# \u7701\u7565 133\u884c\u307b\u3069\n\n# \u30b3\u30f3\u30c6\u30ca\u74b0\u5883\n\n$ cat /etc/redhat-release\nCentOS release 6.7 (Final)\n\n$ ifconfig\neth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:02\n          inet addr:172.17.0.2  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::42:acff:fe11:2/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:5 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:438 (438.0 b)  TX bytes:648 (648.0 b)\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)\n\n\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.0  11492  1780 ?        Ss   13:08   0:00 /bin/bash\nroot        21  0.0  0.0  13372  1044 ?        R+   13:17   0:00 ps aux\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30c4\u30ea\u30fc\u306e\u9055\u3044\u306f\u3071\u3063\u3068\u898b\u9055\u3044\u3092\u6bd4\u8f03\u3057\u306b\u304f\u3044\u306e\u3067\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3082\u3061\u308d\u3093\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3068\u30db\u30b9\u30c8\u74b0\u5883\u3067\u306f\u5168\u304f\u7570\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u30c4\u30ea\u30fc\u304c\u898b\u3048\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u540d\u304c\u540c\u3058\u3042\u3063\u3066\u3082\u3001IP\u30a2\u30c9\u30ec\u30b9\u3001MAC\u30a2\u30c9\u30ec\u30b9\u304c\u9055\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u30db\u30b9\u30c8\u74b0\u5883\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u306b\u6ce8\u76ee\u3057\u3066\u4e0b\u3055\u3044\u3002docker0\u3068\u3044\u3046\u4eee\u60f3\u30d6\u30ea\u30c3\u30b8\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306fDocker\u5c0e\u5165\u6642\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u4eee\u60f3\u30d6\u30ea\u30c3\u30b8\u3092\u901a\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d7\u30ed\u30bb\u30b9\u306f\u30b3\u30f3\u30c6\u30ca\u5916\u90e8\u306e\u30d7\u30ed\u30bb\u30b9\u3068\u901a\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u3068\u305d\u306e\u5916\u306e\u4e16\u754c\u3068\u306e\u901a\u4fe1\u306fDocker\u72ec\u81ea\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5b9f\u88c5\u306f\u3082\u3061\u308d\u3093\u3001Linux\u304c\u63d0\u4f9b\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u80fd\u3082\u4f75\u7528\u3057\u3066\u67d4\u8edf\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067\u7406\u89e3\u3057\u3066\u304a\u3051\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u306e\u306f\u3001OS\u3068\u3057\u3066\u306f\u3042\u304f\u307e\u3067\u30db\u30b9\u30c8\u74b0\u5883\u4e0a\u306eCentOS7.2\u306e\u30ab\u30fc\u30cd\u30eb\u3067\u69cb\u7bc9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3067\u8868\u793a\u3055\u308c\u305fCentOS6.7\u306e\u30ab\u30fc\u30cd\u30eb\u306f\u53b3\u5bc6\u306b\u306f\u3053\u306e\u74b0\u5883\u4e0a\u3001\u3069\u3053\u306b\u3082\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u306a\u306e\u3067\u3001\u3082\u3057CentOS6.7\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u74b0\u5883\u3067\u4f55\u3089\u304b\u306e\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408\u3001\u305d\u308c\u306fCentOS6.7\u4e0a\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092CentOS7.2\u4e0a\u3067\u52d5\u304b\u3059\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u3067\u3059\u304c\u3001\u57fa\u672c\u7684\u306bLinux\u306e\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306f\u8a2d\u8a08\u601d\u60f3\u4e0a\u3001\u5f8c\u65b9\u4e92\u63db\u6027\u3092\u4fdd\u3063\u3066\u4f5c\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3000\u52d5\u4f5c\u3057\u307e\u3059\u3002\u3053\u308c\u3082Linux\u304cDocker\u3092\u5b9f\u73fe\u3067\u304d\u305f\u5927\u304d\u306a\u7406\u7531\u306e\uff11\u3064\u3067\u3057\u3087\u3046\u3002\n\u30b3\u30f3\u30c6\u30ca\u306f\u624b\u8efd\u306b\u8907\u6570\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u5148\u7a0b\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3061\u4e0a\u3052\u305f\u30db\u30b9\u30c8\u74b0\u5883\u3067\u3082\u3046\uff11\u3064CentOS6.7\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u540d\u524d\u3092\u5909\u3048\u3066\u65b0\u305f\u306b\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ sudo docker run -it --name centos6_2 centos:centos6.7 /bin/bash\n\n\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u74b0\u5883\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n$ cat /etc/redhat-release\nCentOS release 6.7 (Final)\n\n$ ifconfig\neth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:03\n          inet addr:172.17.0.3  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::42:acff:fe11:3/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:5 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:438 (438.0 b)  TX bytes:648 (648.0 b)\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u540d\u306f\u540c\u3058\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308bIP\u30a2\u30c9\u30ec\u30b9\u304c\u5148\u7a0b\u306e\u30b3\u30f3\u30c6\u30ca\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30a2\u30c9\u30ec\u30b9\u306b\u95a2\u3057\u3066\u540c\u3058\u60c5\u5831\u3092\u8868\u793a\u3057\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u3001\u3084\u306f\u308a\u305d\u308c\u3089\u306f\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u7570\u306a\u308b\u3082\u306e\u3092\u6307\u3057\u3066\u3044\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u540c\u58eb\u306e\u5834\u5408\u3001\u521d\u671f\u72b6\u614b\u3067\u306f\u7a3c\u50cd\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306e\u9055\u3044\u304c\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u5f8c\u306b\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3067\u4e0b\u8a18\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d70\u3089\u305b\u3066\u307f\u307e\u3059\u3002\n\u306a\u304a\u3001\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001gcc\u306a\u3069\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u306a\u3051\u308c\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u5185\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n#include<stdlib.h>\n\nint main (void) {\n  while (1){\n    sleep(3);\n  }\n}\n\n$ ./a.out &\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.0  11492  1776 ?        Ss   00:36   0:00 /bin/bash\nroot        59  0.0  0.0   3972   316 ?        S    01:13   0:00 ./a.out\nroot        61  0.0  0.0  13368  1044 ?        R+   01:14   0:00 ps aux\n\n\u6700\u521d\u306b\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u5185\u3067\u3001ps\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u307f\u307e\u3059\u3002\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.0  11492  1780 ?        Ss   Dec20   0:00 /bin/bash\nroot        32  0.0  0.0  13372  1044 ?        R+   01:52   0:00 ps aux\n\n./a.out\u304c\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u3001\u3053\u306e\u74b0\u5883\u4e0a\u3067\u306f\u5225\u306e\u30d7\u30ed\u30bb\u30b9\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u66f4\u306b\u3053\u3053\u3067\u30db\u30b9\u30c8\u74b0\u5883\u4e0a\u3067ps\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ ps aflx\n# \u4e00\u90e8\u7701\u7565\u3057\u3066\u307e\u3059\u3002\n4     0   941     1  20   0 1170188 38544 wait  Ssl  ?          2:19 /usr/bin/docker-current daemon --exec-opt native.cgroupdriver=systemd --selinux-enabled --log-driver=journald\n4     0 12885   941  20   0  11492  1652 n_tty_ Ss+  pts/2      0:00  \\_ /bin/bash\n4     0 23531   941  20   0  11492  1796 n_tty_ Ss+  pts/3      0:00  \\_ /bin/bash\n0     0 25255 23531  20   0   3972   312 hrtime S    pts/3      0:00      \\_ ./a.out\n\ndocker\u30c7\u30fc\u30e2\u30f3(PID941)\u304b\u3089\u5b50\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066bash\u304c\uff12\u3064\u30d5\u30a9\u30fc\u30af\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u74b0\u5883\u4e0a\u3067\u306f\u3001\u305d\u308c\u305e\u308cPID12885\u3068PID23531\u306e\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u78ba\u8a8d\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u306ePID1\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3082\u306e\u3068\u540c\u3058\u3082\u306e\u3067\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u30b3\u30f3\u30c6\u30ca\u3067\u306f\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u9055\u3044\u3001\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066OS\u306e\u3088\u3046\u306a\u5b9f\u884c\u74b0\u5883\u304c\u5b9f\u73fe\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u30db\u30b9\u30c8\u74b0\u5883\u3067ps\u30b3\u30de\u30f3\u30c9\u3092\u8d70\u3089\u305b\u305f\u6642\u306b133\u500b\u3082\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u78ba\u8a8d\u3067\u304d\u305f\u306e\u306b\u5bfe\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u3067\u306f2\u3064\u3057\u304b\u8d70\u3063\u3066\u3044\u306a\u3044\u3053\u3068\u304b\u3089\u3082\u305d\u306e\u8efd\u3055\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u306f\u3042\u304f\u307e\u3067\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u5b9f\u73fe\u3055\u308c\u3066\u304a\u308a\u3001OS\u3068\u3057\u3066\u52d5\u304b\u3059\u70ba\u306b\u5fc5\u8981\u306a\u51e6\u7406\u304c\u8d70\u3089\u306a\u3044\u70ba\u3001\u9ad8\u901f\u306b\u52d5\u4f5c\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u305d\u3053\u306bhttpd\u3084mysqld\u306a\u3069\u306e\u30c7\u30fc\u30e2\u30f3\u3092\u3044\u308c\u3066\u5229\u7528\u3057\u3066\u3044\u304f\u3053\u3068\u306b\u306f\u306a\u308a\u307e\u3059\u304c\u3001\u305d\u308c\u3067\u3082\u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u6bd4\u3079\u308b\u3068\u5727\u5012\u7684\u306b\u5c11\u306a\u3044\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u30ec\u30d9\u30eb\u306e\u624b\u8efd\u3055\u3067\u3001OS\u306e\u3088\u3046\u306a\u5b9f\u884c\u74b0\u5883\u305d\u306e\u3082\u306e\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u3002\n\nDocker\u5b9f\u73fe\u306e\u4ed5\u7d44\u307f\n\u305d\u308c\u3067\u306f\u3001Docker(\u30b3\u30f3\u30c6\u30ca)\u3092\u5b9f\u73fe\u3059\u308b\u70ba\u306e\u65b9\u6cd5\u3068\u3057\u3066\u4e8c\u70b9\u307b\u3069\u305d\u306e\u6a5f\u80fd\u3092\u6df1\u6398\u308a\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\nnameapace\nnamespace\u306fLinux\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308bOS\u304c\u7ba1\u7406\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u30ea\u30bd\u30fc\u30b9\u3092\u5206\u96e2\u3059\u308b\u70ba\u306e\u6a5f\u80fd\u3067\u3059\u3002\n\u73fe\u72b6\u306f6\u7a2e\u985e\u306e\u30ea\u30bd\u30fc\u30b9\u3092namespace\u306b\u3088\u3063\u3066\u5206\u96e2\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306fDocker\u306e\u5b9f\u73fe\u306e\u4f8b\u3067\u307f\u305f\u3088\u3046\u306b\u3001\u30d5\u30a9\u30fc\u30af\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u306b\u5bfe\u3057\u3066\u72ec\u7acb\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30ea\u30bd\u30fc\u30b9\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nmount namespace\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u3054\u3068\u306b\u308f\u308a\u3042\u3066\u305f\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306b\u30eb\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u306f\u540c\u3058\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3067\u3082\u7570\u306a\u308b\u5b9f\u4f53\u306e\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\nUTS namespace\nuname\u3067\u53d6\u5f97\u3055\u308c\u308b\u3088\u3046\u306a\u30b7\u30b9\u30c6\u30e0\u60c5\u5831\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\nIPC namespace\nSysten V IPC\u3068POSIX\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u306b\u5229\u7528\u3055\u308c\u308b\u3001\u30bb\u30de\u30d5\u30a9\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\u3001\u5171\u6709\u30e1\u30e2\u30ea\u3068\u3044\u3063\u305f\u6a5f\u69cb\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\nPID namespace\nPID\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u306f\u7570\u306a\u308b\u30d7\u30ed\u30bb\u30b9\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u3001\u540c\u3058PID\u3067\u3082\u7570\u306a\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u6307\u3057\u307e\u3059\u3002\n\nnetwork namespace\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u306f\u7570\u306a\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u6301\u3064\u3053\u3068\u306b\u306a\u308b\u305f\u3081\u3001IP\u30a2\u30c9\u30ec\u30b9\u3092\u306f\u3058\u3081\u3068\u3059\u308b\u5404\u30a2\u30c9\u30ec\u30b9\u60c5\u5831\u3092\u5206\u96e2\u3067\u304d\u307e\u3059\u3002\n\nuser namespace\n\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u306f\u540c\u3058UID\u3001GID\u3067\u3082\u5225\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u3057\u307e\u3059\u3002\nroot\u3067\u3059\u3089\u3082\u30b3\u30f3\u30c6\u30ca\u304c\u7570\u306a\u308c\u3070\u305d\u308c\u305e\u308c\u9055\u3046\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u3001namespace\u306b\u95a2\u3059\u308b\u3042\u308b\u5b9f\u9a13\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\u305d\u306e\u5b9f\u9a13\u306e\u70ba\u306e\u30b3\u30fc\u30c9\u3092setns(2) - Linux manual page\u3088\u308a\u5f15\u7528\u3057\u307e\u3059\u3002\n\nnamespace.c\n #define _GNU_SOURCE\n       #include <fcntl.h>\n       #include <sched.h>\n       #include <unistd.h>\n       #include <stdlib.h>\n       #include <stdio.h>\n\n       #define errExit(msg)    do { perror(msg); exit(EXIT_FAILURE); \\\n                               } while (0)\n\n       int\n       main(int argc, char *argv[])\n       {\n           int fd;\n\n           if (argc < 3) {\n               fprintf(stderr, \"%s /proc/PID/ns/FILE cmd args...\\n\", argv[0]);\n               exit(EXIT_FAILURE);\n           }\n\n           fd = open(argv[1], O_RDONLY);  /* Get file descriptor for namespace */\n           if (fd == -1)\n               errExit(\"open\");\n\n           if (setns(fd, 0) == -1)        /* Join that namespace */\n               errExit(\"setns\");\n\n           execvp(argv[2], &argv[2]);     /* Execute a command in namespace */\n           errExit(\"execvp\");\n       }\n\n\n\u3053\u308c\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001namespace\u3068\u3044\u3046\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306b\u3057\u307e\u3059\u3002\nsetfs\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3067\u3001\u65e2\u5b58\u306enamespace\u3092\u53c2\u7167\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u547c\u3073\u51fa\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u3092\u305d\u306enamespace\u306b\u95a2\u9023\u4ed8\u3051\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u3068\u306f\u4f55\u304b\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u524dLinux\u306e\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u3092\u30cf\u30c3\u30af\u3059\u308b\u3067\u66f8\u304b\u305b\u3066\u9802\u3044\u305f\u306e\u3067\u3001\u3088\u3051\u308c\u3070\u3053\u3061\u3089\u3082\u3069\u3046\u305e\u3002\n\u3055\u3066\u3001\u65e2\u5b58\u306enamespace\u3092\u53c2\u7167\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u306f\u3069\u3046\u3084\u3063\u3066\u53d6\u5f97\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u3068\u3044\u3046\u3068\u3001/proc/PID/ns/\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u306e6\u7a2e\u985e\u306enamespace\u306b\u5bfe\u5fdc\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30aa\u30fc\u30d7\u30f3\u3057\u3066\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u305f\u3081\u3057\u306bDocker\u304b\u3089\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306enamespace\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u30022\u3064\u8d77\u52d5\u3057\u307e\u3057\u305f\u304c\u3001\u4e00\u65b9\u306ePID\u306f\u3055\u304d\u307b\u3069\u306eps\u30b3\u30de\u30f3\u30c9\u304b\u308912885\u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3053\u3061\u3089\u306e\u30d7\u30ed\u30bb\u30b9\u306b\u6ce8\u76ee\u3057\u3066\u307f\u307e\u3059\u3002\n$ ll /proc/12885/ns\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 ipc -> ipc:[4026532157]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 mnt -> mnt:[4026532155]\nlrwxrwxrwx 1 root root 0 12\u6708 20 22:08 net -> net:[4026532160]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 pid -> pid:[4026532158]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 user -> user:[4026531837]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 uts -> uts:[4026532156]\n\n\u3055\u304d\u307b\u3069\u7d39\u4ecb\u3057\u305f6\u7a2e\u985e\u306enamespace\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u524d\u306b\u30db\u30b9\u30c8\u74b0\u5883\u306e/etc/redhat-release\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ cat /etc/redhat-release\nCentOS Linux release 7.2.1511 (Core) \n\n\u6b21\u306b\u3001\u3055\u304d\u307b\u3069\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u751f\u6210\u3057\u305f\u5b9f\u884c\u30d5\u30a1\u30a4\u30ebnamespace\u3092\u4f7f\u3063\u3066\u3001\u65e2\u5b58\u306e\u30b3\u30f3\u30c6\u30ca\u306emount namespace\u306b\u65b0\u305f\u306b\u8d77\u52d5\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u3092\u95a2\u9023\u4ed8\u3051\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ ./namespace /proc/12885/ns/mnt /bin/bash\n\n\u3053\u306e\u72b6\u614b\u3067/etc/redhat-release\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n$ cat /etc/redhat-release\nCentOS release 6.7 (Final)\n\n\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3068\u540c\u3058\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\u30d7\u30ed\u30bb\u30b9\u3092namespace\u306b\u95a2\u9023\u3065\u3051\u308b\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001clone\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u5404namespace\u7528\u306e\u30d5\u30e9\u30b0(CLONE_NEWNS\u3084\u3001CLONE_NEWIPC\u306a\u3069)\u3092\u6307\u5b9a\u3057\u3066\u30d5\u30a9\u30fc\u30af\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u306b\u95a2\u9023\u3065\u3051\u308b\u65b9\u6cd5\u3084\u3001unshare\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u30d5\u30e9\u30b0\u3092\u6307\u5b9a\u3057\u3066\u3001\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u4f5c\u6210\u305b\u305a\u306b\u73fe\u5728\u306e\u30d7\u30ed\u30bb\u30b9\u306b\u65b0\u3057\u3044namespace\u3092\u95a2\u9023\u4ed8\u3051\u308b\u65b9\u6cd5\u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002\n\u203b\u4ee5\u524d\u66f8\u3044\u305f\u30a8\u30f3\u30c8\u30ea\nLinux\u306efork\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u30cf\u30c3\u30af\u3059\u308b\nclone(2) - Linux manual page\nunshare(2) - Linux manual page\n\ncgroups\ncgroups\u306fLinux\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308b\u3001\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u305f\u7279\u5b9a\u306e\u30d7\u30ed\u30bb\u30b9\u7fa4\u306b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3068\u305d\u308c\u306b\u95a2\u4fc2\u3059\u308b\u5074\u9762\u304b\u3089\u5236\u9650\u3092\u304b\u3051\u308b\u6a5f\u80fd\u3067\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u5404\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3059\u308bCPU\u6642\u9593\u306e\u5272\u308a\u5f53\u3066\u512a\u5148\u5ea6\u3084\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3001\u30c7\u30fc\u30bf\u8ee2\u9001\u306b\u4f34\u3046\u5e2f\u57df\u306a\u3069\u3092\u8abf\u6574\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u306e\u6587\u8108\u3067\u8aac\u660e\u3059\u308b\u3068\u3001\u5236\u5fa1\u3055\u308c\u308b\u30d7\u30ed\u30bb\u30b9\u7fa4\u306fnamespace\u3067\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3055\u308c\u305f\u30d7\u30ed\u30bb\u30b9\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u305f\u3081\u3057\u306b\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u307f\u308b\u3068\u3001\u3069\u3046\u3044\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u5236\u5fa1\u53ef\u80fd\u304b\u308f\u304b\u308a\u307e\u3059\u3002\n$ ll /sys/fs/cgroup/\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 blkio\nlrwxrwxrwx 1 root root 11 12\u6708 18 17:33 cpu -> cpu,cpuacct\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 cpu,cpuacct\nlrwxrwxrwx 1 root root 11 12\u6708 18 17:33 cpuacct -> cpu,cpuacct\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 cpuset\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 devices\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 freezer\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 hugetlb\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 memory\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 net_cls\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 perf_event\ndrwxr-xr-x 4 root root  0 12\u6708 18 17:33 systemd\n\n\u4eca\u56de\u306fdevices\u306b\u6ce8\u76ee\u3057\u3066\u307f\u307e\u3059\u3002\ndevices\u306f\u6240\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u7fa4\u306b\u5bfe\u3057\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5236\u5fa1\u3059\u308b\u6a5f\u80fd\u3067\u3059\u3002\n\u79c1\u306e\u74b0\u5883\u3067\u306fcgroups\u306fsystemd\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u73fe\u5728\u7a3c\u50cd\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u304a\u3051\u308bdevices\u306e\u7ba1\u7406\u72b6\u6cc1\u306f\u4e0b\u8a18\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n$ ll /sys/fs/cgroup/devices/system.slice/docker-f4458636b4067b2136686ba4c96af94d7ba66ad8c0ed702c82859a145a48672b.scope\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 cgroup.clone_children\n--w--w--w- 1 root root 0 12\u6708 21 09:36 cgroup.event_control\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 cgroup.procs\n--w------- 1 root root 0 12\u6708 21 09:36 devices.allow\n--w------- 1 root root 0 12\u6708 21 09:36 devices.deny\n-r--r--r-- 1 root root 0 12\u6708 21 09:36 devices.list\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 notify_on_release\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 tasks\n\n\u3068\u3044\u3046\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u79c1\u304c\u73fe\u5728\u7a3c\u50cd\u3055\u305b\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u30d7\u30ed\u30bb\u30b9ID\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\nroot       941  0.0  1.2 1170188 26560 ?       Ssl  12\u670818   3:02 /usr/bin/docker-current daemon --exec-opt native.cgroupdriver=systemd --selinux-enabled --log-driver\nroot     23531  0.0  0.0  11492  1132 pts/3    Ss   12\u670821   0:00  \\_ /bin/bash\nroot     25255  0.0  0.0   3972   312 pts/3    S    12\u670821   0:01      \\_ ./a.out\nroot     24371  0.0  0.0   3972   312 pts/3    S+   02:09   0:00      \\_ ./a.out\n\n23531\u300125255\u300124371\u306ePID\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u30d7\u30ed\u30bb\u30b9\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u3053\u3053\u3067cgroup.procs\u306e\u4e2d\u8eab\u3092\u898b\u3066\u307f\u308b\u3068\u3001\n$ cat cgroup.procs\n23531\n24371\n25255\n\n\u3055\u304d\u307b\u3069ps\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u30663\u3064\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u8868\u793a\u3055\u308c\u305f\u306e\u3067\u3001\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u9054\u306b\u5bfe\u3057\u3066\u4f55\u3089\u304b\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u3069\u3046\u3084\u3063\u3066\u5236\u9650\u3092\u304b\u3051\u3066\u3044\u308b\u304b\u306f\u3001\u540d\u524d\u304b\u3089\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u304c\ndevices.allow\u3001devices.deny\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u305d\u308c\u305e\u308c\u8a31\u53ef\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u3001\u7981\u6b62\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u3053\u306e2\u3064\u306f\u66f8\u304d\u8fbc\u307f\u5c02\u7528\u306a\u306e\u3067\u3001\u8aad\u307f\u8fbc\u307f\u5c02\u7528\u306edevices.list\u3092\u4f7f\u3063\u3066\u73fe\u5728\u8a31\u53ef\u3055\u308c\u3066\u3044\u308b\u30c7\u30d0\u30a4\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ cat devices.list\nc *:* m\nb *:* m\nc 5:1 rwm\nc 4:0 rwm\nc 4:1 rwm\nc 136:* rwm\nc 5:2 rwm\nc 10:200 rwm\nc 1:3 rwm\nc 1:5 rwm\nc 1:7 rwm\nc 5:0 rwm\nc 1:9 rwm\nc 1:8 rwm\n\n\u5404\u884c\u306e\u6700\u521d\u306e\u4e00\u6587\u5b57\u76ee\u306f\u30c7\u30d0\u30a4\u30b9\u306e\u7a2e\u985e\u3092\u8868\u3057\u3066\u3044\u307e\u3059(c\u306f\u30ad\u30e3\u30e9\u30af\u30bf\u30c7\u30d0\u30a4\u30b9\u3001b\u306f\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306a\u3069)\u3002\n5:1\u306a\u3069\u306f/dev\u914d\u4e0b\u306b\u304a\u3051\u308b\u30e1\u30b8\u30e3\u30fc\u756a\u53f7\u3068\u30de\u30a4\u30ca\u30fc\u756a\u53f7\u3092\u8868\u3057\u3066\u304a\u308a\u6700\u5f8c\u306erw\u306f\u8aad\u307f\u8fbc\u307f\u66f8\u304d\u8fbc\u307f\u3001m\u306f\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u65b0\u898f\u4f5c\u6210\u304c\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u3066\u3044\u304a\u308a\u3001*\u306f\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002\n\u306a\u3093\u3068\u306a\u304f\u5bdf\u3057\u304c\u3064\u304f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001Docker\u306b\u304a\u3044\u3066\u306f\u6700\u521d\u306b\u5168\u3066\u306e\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u4e0d\u53ef\u306b\u3057\u3066\u304b\u3089\u3001\u6bb5\u968e\u7684\u306b\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u3068\u3044\u3046\u30db\u30ef\u30a4\u30c8\u30ea\u30b9\u30c8\u65b9\u5f0f\u3092\u3068\u3063\u3066\u3044\u307e\u3059\u3002\nWeb\u30b5\u30fc\u30d0\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3001Apache\u306e\u30a2\u30af\u30bb\u30b9\u8a2d\u5b9a\u3092\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u65b9\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(.htaccss\u306a\u3069)\u306e\u8a2d\u5b9a\u65b9\u6cd5\u3068\u4f3c\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\nLinux\u306ecgroups\u3092\u5229\u7528\u3059\u308b\u6642\u306bdevices.list\u304c\u3044\u3064\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3053\u3046\u8a2d\u5b9a\u3057\u3066\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u3042\u304f\u307e\u3067Docker\u304c\u3053\u306e\u3088\u3046\u306a\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u884c\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\n\u3067\u306f\u3001\u4eca\u56de\u306e\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u5b9f\u9a13\u306f\u3053\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066\u66f4\u306b\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u53b3\u3057\u304f\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\ndevices.list\u5185\u3067\u8a31\u53ef\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u305fc 1:8\u306f/dev/random\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u5074\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u3001\u554f\u984c\u306a\u304f\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n$ cat /dev/random\n# \u30e9\u30f3\u30c0\u30e0\u306a\u6587\u5b57\u304c\u8868\u793a\u3055\u308c\u7d9a\u3051\u308b\u3002\n\n\u7d9a\u3044\u3066\u30db\u30b9\u30c8\u74b0\u5883\u5074\u3067\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002devices.deny\u306b\u8ffd\u8a18\u3067\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3063\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n$ /sys/fs/cgroup/devices/system.slice/docker-f4458636b4067b2136686ba4c96af94d7ba66ad8c0ed702c82859a145a48672b.scope\n$ echo 'c 1:8 rwm' >> devices.deny\n\ndevices.list\u3092\u78ba\u8a8d\u3059\u308b\u3068c 1:8 rwm\u304c\u6d88\u3048\u3066\u3044\u307e\u3059\u3002\n$ cat devices.list\nc *:* m\nb *:* m\nc 5:1 rwm\nc 4:0 rwm\nc 4:1 rwm\nc 136:* rwm\nc 5:2 rwm\nc 10:200 rwm\nc 1:3 rwm\nc 1:5 rwm\nc 1:7 rwm\nc 5:0 rwm\nc 1:9 rwm\n\n\u305d\u3057\u3066\u518d\u3073\u3001\u30b3\u30f3\u30c6\u30ca\u5074\u3067\u540c\u3058\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ cat /dev/random\ncat: /dev/random: Operation not permitted\n\n\u3053\u306e\u3088\u3046\u306b/dev/random\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u539f\u7406\u7684\u306b\u30b3\u30f3\u30c6\u30ca\u65b9\u5f0f\u306b\u3088\u308b\u5b9f\u884c\u74b0\u5883\u306e\u5236\u5fa1\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7684\u306a\u89b3\u70b9\u304b\u3089\u306f\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3088\u308a\u8106\u5f31\u6027\u3092\u79d8\u3081\u3066\u3044\u307e\u3059\u3002\n\u4eee\u60f3\u30b5\u30fc\u30d0\u306fOS\u3084\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u4f55\u3089\u304b\u306e\u8106\u5f31\u6027\u304c\u306a\u3051\u308c\u3070\u3001\u4ed6\u306e\u4eee\u60f3\u74b0\u5883\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u3053\u3068\u306f\u307e\u305a\u306a\u3044\u3067\u3059\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u9593\u306e\u95a2\u4fc2\u306f\u3042\u304f\u307e\u3067\u305f\u3060\u306e\u30d7\u30ed\u30bb\u30b9\u306a\u306e\u3067\u3001\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca(\u30d7\u30ed\u30bb\u30b9)\u3078\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u53ef\u80fd\u6027\u306f\u4eee\u60f3\u74b0\u5883\u3088\u308a\u306f\u9593\u9055\u3044\u306a\u304f\u9ad8\u3044\u3067\u3059\u3002\n\u305d\u3046\u3044\u3063\u305f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u30ea\u30b9\u30af\u3078\u306e\u5bfe\u7b56\u306fDocker\u81ea\u8eab\u3084Docker\u306e\u70ba\u306e\u57fa\u76e4\u30b7\u30b9\u30c6\u30e0\u306a\u3069\u3067\u30ab\u30d0\u30fc\u3057\u3088\u3046\u3068\u3044\u3046\u8a66\u307f\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u3082\u305d\u306e\u5bfe\u7b56\u306e\uff11\u3064\u3068\u8a00\u3048\u307e\u3059\u3002\n\n\u4eca\u5f8c\u306e\u5c55\u671b\n\u306a\u304a\u3001Docker\u306fnamespace\u3084cgroups\u542b\u3081\u3001Linux\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u5b9f\u73fe\u95a2\u9023\u306eAPI\u3092\u62bd\u8c61\u5316\u3059\u308b\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3068\u3057\u3066libcontainer\u3092Docker0.9\u3088\u308a\u5185\u90e8\u3067\u5b9f\u88c5\u3057\u3066\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u3063\u3066\u3001Docker\u306f\u7279\u5b9a\u306e\u74b0\u5883\u306b\u4f9d\u5b58\u3057\u306b\u304f\u3044\u5b89\u5b9a\u7684\u306a\u30b7\u30b9\u30c6\u30e0\u306b\u8fd1\u3065\u3044\u305f\u306e\u3067\u3001\u5c0e\u5165\u3059\u308b\u5074\u3068\u3057\u3066\u306f\u6c7a\u65ad\u304c\u3057\u3084\u3059\u304f\u306a\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001Docker\u5c02\u7528\u306eOS(RancherOS\u3001CoreOS)\u306e\u767b\u5834\u3084\u3001\u6a2a\u65ad\u7684\u306aDocker\u7ba1\u7406\u3092\u53ef\u80fd\u3068\u3059\u308bKubernetes\u306a\u3069\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u306e\u6a5f\u80fd\u3082\u5145\u5b9f\u3057\u3066\u304d\u305f\u306e\u3067\u3001Immutable Infrastructure(\u4e0d\u5909\u306e\u30a4\u30f3\u30d5\u30e9\uff09\u3068\u3057\u3066\u3001\u5e45\u5e83\u3044\u5206\u91ce\u306b\u5229\u7528\u3055\u308c\u3066\u3044\u304f\u3053\u3068\u304c\u671f\u5f85\u3055\u308c\u307e\u3059\u3002\n\u65b0\u3057\u3044\u60c5\u5831\u304c\u3042\u308c\u3070\u968f\u6642\u3001\u30b7\u30a7\u30a2\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\ud83d\udc4d\n\n\u691c\u8a3c\u74b0\u5883\nOS: CentOS Linux release 7.2.1511 (Core)\nLinux\u30ab\u30fc\u30cd\u30eb: 3.10.0-327.36.3.el7.x86_64\n\n\u53c2\u8003\u6587\u732e\nDocker\u5b9f\u8df5\u5165\u9580 \u2015\u2015Linux\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u306e\u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067\n\u300c\u4eee\u60f3\u5316\u300d\u5b9f\u88c5\u306e\u57fa\u790e\u77e5\u8b58\nDocker 0.9: Introducing Execution Drivers And Libcontainer\nContainer Specification - v1\nLinux\u30ab\u30fc\u30cd\u30eb\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9: 3.10\nLinux Kernel Updates Vol.2014.08\n## \u306f\u3058\u3081\u306b\n\n\u3053\u306e\u8a18\u4e8b\u306f\u3001\u30aa\u30fc\u30eb\u30a2\u30d0\u30a6\u30c8 [Advent Calendar 2016](http://qiita.com/advent-calendar/2016/allabout)\u306e23\u65e5\u76ee\u306e\u30a8\u30f3\u30c8\u30ea\u30fc\u3067\u3059\u3002\n\n\u79c1\u3001@tajima_taso\u304b\u3089\u306f\u3010\u539f\u7406\u539f\u5247\u3067\u7406\u89e3\u3059\u308bDocker\u3011\u3068\u984c\u3057\u3066\u66f8\u304b\u305b\u3066\u9802\u304d\u307e\u3059\u3002\nDocker\u3063\u3066\u305d\u3082\u305d\u3082\u4f55\uff1f\u3063\u3066\u3068\u3053\u308d\u304b\u3089\u3001\u5185\u90e8\u5b9f\u88c5\u90e8\u5206\u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3066\u3044\u307e\u3059\u3002\n\n## Docker\u3068\u306f\u4f55\u304b?\n\n\u307e\u305a\u3001Docker\u3068\u306f\u4f55\u306a\u306e\u304b\uff1f\u306b\u3064\u3044\u3066\u8efd\u304f\u304a\u3055\u3089\u3044\u3057\u307e\u3057\u3087\u3046\u3002\n\u4eca\u66f4\u805e\u3051\u306a\u3044\u3068\u3044\u3046\u65b9\u3082\u3001\u306a\u3093\u3068\u306a\u304f\u30a4\u30e1\u30fc\u30b8\u304c\u63b4\u3081\u305f\u3089\u5b09\u3057\u3044\u3067\u3059\u3002\n\n### \u4f55\u6545\u3001\u4ecaDocker\u306a\u306e\u304b?\n\nDocker\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3092\u884c\u3046\u74b0\u5883\u306b\u3044\u308b\u65b9\u3005\u306e\u4e2d\u3067\u3001\u3053\u306e\u8a00\u8449\u3092\u8033\u306b\u3059\u308b\u6a5f\u4f1a\u304c\u5897\u3048\u3066\u304d\u3066\u3044\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u5b9f\u969b\u306e\u696d\u52d9\u306b\u304a\u3044\u3066\u5c0e\u5165\u307e\u3067\u306f\u3057\u3066\u3044\u306a\u3044\u3068\u3057\u3066\u3082\u3001\u4f55\u3068\u306a\u304f\u76db\u308a\u4e0a\u304c\u3063\u3066\u3044\u308b\u6280\u8853\u7528\u8a9e\u3067\u3042\u308b\u3053\u3068\u306f\u808c\u611f\u899a\u3068\u3057\u3066\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5b9f\u306f\u3001Docker\u5b9f\u73fe\u306e\u30d9\u30fc\u30b9\u3068\u306a\u3063\u3066\u3044\u308bLinux\u30b3\u30f3\u30c6\u30ca\u3068\u3044\u3046\u6280\u8853\u81ea\u4f53\u306f\u305a\u3063\u3068\u524d\u304b\u3089\u5b58\u5728\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\nLinux\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u5b9f\u73fe\u306e\u6838\u3068\u306a\u308b\u6a5f\u80fd\u306f\u4e3b\u306b\u3001namespace\u3068cgroups\u3068\u3044\u3046\u3082\u306e\u306a\u306e\u3067\u3059\u304c\u3001\u4e2d\u3067\u3082\u30d7\u30ed\u30bb\u30b9\u7a7a\u9593\u306e\u5206\u96e2\u304c\u53ef\u80fd\u306b\u306a\u3063\u305fPID Namespace\u306e\u5b9f\u88c5\u306f2008\u5e74\u306eLinux\u30ab\u30fc\u30cd\u30eb2.6.24\u304b\u3089\u3067\u3059\u3002\n\n[PID namespaces in the 2.6.24 kernel](https://lwn.net/Articles/259217/)\n\n\u3059\u306a\u308f\u3061Docker\u306e\u3088\u3046\u306a\u3053\u3068\u3092\u3084\u308d\u3046\u3068\u601d\u3048\u3070\u30012008\u5e74\u304b\u3089\u3084\u308b\u30c1\u30e3\u30f3\u30b9\u306f\u3042\u3063\u305f\u308f\u3051\u3067\u3059\u3057\u3001\u5b9f\u969b\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u3092\u4f7f\u3063\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u958b\u767a\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n\u4e0b\u8a18\u306fDocker\u4ee5\u524d\u304b\u3089\u3042\u308b\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u306e\u4e00\u4f8b\u3067\u3059\u3002\n\n__Solaris Zone__\n[Oracle Solaris\u30b3\u30f3\u30c6\u30ca\uff1aOracle Solaris 10 \u65b0\u6a5f\u80fd \u6a5f\u80fd\u7de8(1)\uff1aSolaris\u30be\u30fc\u30f3](http://www.fujitsu.com/jp/products/computing/servers/unix/sparc/software/option/os-10/new-function/container/01/)\n\n__FreeBSD Jail__\n[https://ja.wikipedia.org/wiki/FreeBSD_jail](https://ja.wikipedia.org/wiki/FreeBSD_jail)\n\n__RHEL OpenVZ__\n[OpenVZ](https://ja.wikipedia.org/wiki/OpenVZ)\n\n\u305d\u308c\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u304c\u65b0\u3057\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3057\u304b\u3082\u305d\u308c\u304c\u2252Docker\u306e\u3088\u3046\u306b\u601d\u308f\u308c\u3066\u3057\u307e\u3046\u307b\u3069\u6ce8\u76ee\u3092\u96c6\u3081\u3066\u3044\u308b\u306e\u306f\u3001\u4f55\u6545\u306a\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u79c1\u306f\u3001\u4ee5\u4e0b\u306e\u6d41\u308c\u304c\u8981\u56e0\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n1. \u958b\u767a\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3001\u305d\u3057\u3066\u305d\u306e\u958b\u767a\u74b0\u5883\u304c\u500b\u4eba\u3001\u4e2d\u5c0f\u3001\u5927\u4f01\u696d\u30ec\u30d9\u30eb\u3092\u554f\u308f\u305a\u5341\u5206\u306b\u8907\u96d1\u306a\u3082\u306e\u306b\u306a\u3063\u3066\u304d\u305f\u3002\n2. 1\u306e\u554f\u984c\u3092\u7d71\u5408\u7684\u306b\u89e3\u6c7a\u3059\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001Docker\u304c\u6642\u4ee3\u306e\u30cb\u30fc\u30ba\u306b\u3042\u308f\u305b\u305f\u30ab\u30bf\u30c1\u3067\u30bf\u30a4\u30df\u30f3\u30b0\u3088\u304f\u767b\u5834\u3057\u305f\u3002\n3. Google\u3084Microsoft\u3092\u306f\u3058\u3081\u3068\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306b\u95a2\u308f\u308b\u4e16\u754c\u4e2d\u306e\u4f1a\u793e\u3084\u56e3\u4f53\u3001\u500b\u4eba\u304c\u5e83\u304f\u305d\u306e\u6709\u7528\u6027\u3092\u8a8d\u3081\u59cb\u3081\u3001\u95a2\u9023\u3059\u308bOS\u3001\u30c4\u30fc\u30eb([CoreOS](https://thinkit.co.jp/story/2015/03/06/5672)\u3001[Kubernetes](http://kubernetes.io/)\u3001[Rancher](http://rancher.com/))\u304c\u591a\u304f\u4f5c\u3089\u308c\u59cb\u3081\u305f\u3002\n\n\u7d4c\u9a13\u5247\u306b\u3088\u308b\u500b\u4eba\u7684\u898b\u89e3\u3082\u542b\u307e\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u6982\u306d\u8a8d\u8b58\u306f\u9593\u9055\u3063\u3066\u3044\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4eca\u307e\u3067\u306e\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u304c\u3069\u3061\u3089\u304b\u3068\u3044\u3048\u3070\u8907\u96d1\u306a\u30b7\u30b9\u30c6\u30e0\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3067\u5229\u7528\u3055\u308c\u3066\u304d\u305f\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u306e\u666e\u53ca\u306f\u305d\u308c\u304c\u7279\u5225\u306a\u3082\u306e\u3067\u306f\u306a\u304f\u3001\u591a\u304f\u306e\u4eba\u306b\u5fc5\u8981\u3068\u3055\u308c\u308b\u4e16\u306e\u4e2d\u306b\u306a\u3063\u3066\u304d\u305f\u3053\u3068\u3092\u610f\u5473\u3057\u3066\u3044\u308b\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u73fe\u4ee3\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3060\u3051\u3067\u5b8c\u7d50\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u306f\u306a\u304f\u3001\u305d\u308c\u306b\u4ed8\u968f\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u3001OS\u30ec\u30d9\u30eb\u3067\u63d0\u4f9b\u3055\u308c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3069\u304c\u5bc6\u7d50\u5408\u3067\u8907\u96d1\u306b\u7d61\u307f\u3042\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u52a0\u3048\u3066\u3001\u65e7\u6765\u306e\u3088\u3046\u306b\u30a6\u30a9\u30fc\u30bf\u30fc\u30d5\u30a9\u30fc\u30eb\u578b\u3067\u3057\u3063\u304b\u308a\u3068\u958b\u767a\u3057\u3066\u7d0d\u54c1\u3057\u305f\u3089\u305d\u3053\u3067\u7d42\u4e86\u3068\u3044\u3046\u6642\u4ee3\u3067\u306f\u306a\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u8005\u306b\u5fc5\u8981\u3068\u3055\u308c\u3066\u3044\u308b\u306e\u306f\u3001\u5fc5\u8981\u3068\u306a\u308b\u6a5f\u80fd\u3092\u7d99\u7d9a\u7684\u306b\u8ffd\u52a0\u3001\u5909\u66f4\u3001\u4fee\u6b63\u3057\u3001\u5546\u7528\u74b0\u5883\u3078\u78ba\u5b9f\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002\u5834\u5408\u306b\u3088\u3063\u3066\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3060\u3051\u3067\u306a\u304f\u3001\u5171\u6709\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3082\u4e3b\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u9762\u304b\u3089\u5fc5\u8981\u3068\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u306f\u5927\u4e2d\u5c0f\u306e\u898f\u6a21\u306b\u304b\u304b\u308f\u3089\u305a\u3001\u8907\u96d1\u5316\u3057\u3066\u304d\u3066\u304a\u308a\u3001\u4eca\u5f8c\u3082\u66f4\u306b\u8907\u96d1\u306b\u306a\u3063\u3066\u3044\u304f\u3053\u3068\u3067\u3057\u3087\u3046\u3002\n\n### Docker\u306f\u4f55\u3092\u89e3\u6c7a\u3059\u308b\u306e\u304b?\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u306e\u306f\u3001\u307e\u3060\u307e\u3060\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u8005\u306e\u4ed5\u4e8b\u3067\u3059\u3002\n\u73fe\u72b6\u306b\u304a\u3044\u3066\u3082\u3001\u7d99\u7d9a\u7684\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u7ba1\u7406\u3059\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001Git\u306a\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30c4\u30fc\u30eb\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u958b\u767a\u8005\u306f\u591a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b3\u30fc\u30c9\u306b\u304a\u3044\u3066\u306f\u3001\u30c7\u30b0\u30ec\u306a\u3069\u306e\u30df\u30b9\u306f\u56de\u907f\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3051\u3067\u306f\u5148\u7a0b\u8ff0\u3079\u305f\u73fe\u72b6\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\u305d\u308c\u3092\u89e3\u6c7a\u3059\u308b\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3068\u3057\u3066\u671f\u5f85\u3055\u308c\u3066\u3044\u308b\u306e\u304cDocker\u306a\u306e\u3067\u3059\u3002\n\nDocker\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u305d\u306e\u5b9f\u884c\u74b0\u5883\u3092\u7d71\u5408\u7684\u306b\u7ba1\u7406\u3059\u308b\u70ba\u306e\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u958b\u767a\u74b0\u5883\u306b\u304a\u3051\u308bOS\u30ec\u30d9\u30eb\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3001\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3001\u74b0\u5883\u8a2d\u5b9a\u306f\u3001\u5e38\u306b\u672c\u756a\u74b0\u5883\u3068\u540c\u3058\u3082\u306e\u306b\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u8a00\u3063\u3066\u307f\u308c\u3070\u3001\u30c7\u30d7\u30ed\u30a4\u6642\u306f\u958b\u767a\u74b0\u6642\u306eOS\u30ec\u30d9\u30eb\u306e\u74b0\u5883\u3092\u307e\u308b\u3054\u3068\u3001\u672c\u756a\u74b0\u5883\u3078\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\n\n\u3053\u308c\u306f\u3001\n\n__\u958b\u767a\u74b0\u5883\u3067\u52d5\u3044\u305f\u3051\u3069\u3001\u672c\u756a\u74b0\u5883\u3067\u52d5\u304b\u306a\u3044__\n\n\u3059\u306a\u308f\u3061\u3001\u672c\u756a\u74b0\u5883\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u6642\u306e\u6700\u5927\u306e\u4e0d\u5b89\u8981\u7d20\u304c\u7121\u304f\u306a\u308b\u3068\u3044\u3046\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\n### \u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u306e\u9055\u3044\n\n\u4f3c\u305f\u3088\u3046\u306a\u3082\u306e\u3068\u3057\u3066\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u3044\u3046\u3082\u306e\u3092\u9023\u60f3\u3059\u308b\u65b9\u3082\u3044\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u3067\u306f\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3068Docker\u306f\u3069\u3046\u9055\u3044\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u30b5\u30fc\u30d0\u306e\u4eee\u60f3\u5316\u306b\u306f\u30db\u30b9\u30c8OS\u578b\u3068\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u578b(\u8fd1\u5e74\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u9762\u306e\u7406\u7531\u304b\u3089\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u578b\u304c\u4e3b\u6d41)\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3044\u305a\u308c\u306b\u3057\u3066\u3082\u30b2\u30b9\u30c8OS\u3092\u7ba1\u7406\u3059\u308b\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306b\u3088\u3063\u3066\u3001\u7269\u7406\u30b5\u30fc\u30d0\u4e0a\u306b\u8907\u6570\u306eOS\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u65b9\u5f0f\u3067\u3059\u3002\n\n\u30b2\u30b9\u30c8OS\u304b\u3089\u306e\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u30ea\u30bd\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8981\u6c42(CPU\u3001\u30e1\u30e2\u30ea\u3001\u30c7\u30a3\u30b9\u30af\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af)\u306f\u3001\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u3088\u3063\u3066\u4e00\u65e6\u5236\u5fa1\u3055\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u5c11\u306a\u304b\u3089\u306c\u30aa\u30fc\u30d0\u30d8\u30c3\u30c9\u304c\u751f\u3058\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u6e96\u4eee\u60f3\u5316\u65b9\u5f0f\u306e\u5c0e\u5165\u306b\u3088\u3063\u3066\u30b2\u30b9\u30c8OS\u81ea\u4f53\u3092\u5909\u66f4\u3057\u3066\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u6700\u9069\u5316\u3059\u308b\u6280\u8853\u306a\u3069\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u305d\u306e\u3076\u3093\u7ba1\u7406\u30b3\u30b9\u30c8\u306f\u9ad8\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d0\u306e\u4eee\u60f3\u5316\u65b9\u5f0f\u3067\u306f\u3001\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u52a0\u3048\u3001\u8907\u6570\u306eOS\u3092\u7d71\u5408\u7684\u306b\u7ba1\u7406\u3057\u3066\u3044\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u3078\u3093\u306e\u7ba1\u7406\u30b3\u30b9\u30c8\u306f\u9ad8\u304f\u3001\u3042\u308b\u7a0b\u5ea6\u904b\u7528\u3057\u305f\u74b0\u5883\u3067OS\u30ec\u30d9\u30eb\u306e\u8a2d\u5b9a\u3092\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u3057\u3088\u3046\u3082\u306e\u306a\u3089\u3001\u4e00\u5927\u30a4\u30d9\u30f3\u30c8\u3068\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u306b\u5bfe\u3057\u3066Docker\u306f\u3042\u304f\u307e\u3067OS\u4e0a\u3067\u52d5\u304f\u3001\u30d7\u30ed\u30bb\u30b9\u306e\uff11\u3064\u306b\u904e\u304e\u307e\u305b\u3093\u3002Linux\u4e0a\u3067\u7a3c\u50cd\u3059\u308b\u95a2\u9023\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u3092\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3001\u305d\u308c\u305e\u308c\u306f\u72ec\u7acb\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u7a7a\u9593\u3067\u7a3c\u50cd\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u5206\u96e2\u3055\u308c\u305f\u5b9f\u884c\u74b0\u5883\u306e\u3053\u3068\u3092__\u30b3\u30f3\u30c6\u30ca__\u3068\u547c\u3073\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u5185\u90e8\u3067\u306f\u4ed6\u306e\u5b9f\u884c\u74b0\u5883\u3068\u7570\u306a\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30c4\u30ea\u30fc\u3001\u30d7\u30ed\u30bb\u30b9\u30c6\u30fc\u30d6\u30eb\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u307e\u3059\u3002\n\nLinux\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u4e0a\u3067\u3001`ps aux`\u3068\u6253\u3063\u3066\u4e0b\u3055\u3044\u3002\n\u305f\u304f\u3055\u3093\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u4e00\u89a7\u3067\u8868\u793a\u3055\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001Docker\u306f\u3042\u304f\u307e\u3067\u305d\u306e\u4e2d\u306e\uff11\u3064\u306b\u904e\u304e\u306a\u3044\u306e\u3067\u3059\u3002\n\n\u4eee\u60f3\u5316\u30b5\u30fc\u30d0\u306e\u4f8b\u3067\u3044\u3046\u3068\u3001Docker\u306f\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u30b5\u30fc\u30d3\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u30c7\u30fc\u30e2\u30f3\u3068\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u3042\u304f\u307e\u3067\u30d7\u30ed\u30bb\u30b9\u306e\uff11\u3064\u3067\u3059\u3002\n\u8a00\u3063\u3066\u3057\u307e\u3048\u3070\u3001/usr/sbin/sshd\u3084/usr/sbin/httpd\u3068\u540c\u3058\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\n\nsshd\u3082httpd\u3082\u30d5\u30a9\u30fc\u30af\u3057\u3066\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u304c\u3001Docker\u3082\u30d5\u30a9\u30fc\u30af\u3057\u305f\u5b50\u30d7\u30ed\u30bb\u30b9\u306e\u4e2d\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u5b9f\u73fe\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u3002\n\n\u305f\u3068\u3048\u3070Apache(httpd)\u306e\u8a2d\u5b9a\u5909\u66f4\u3092\u601d\u3044\u6d6e\u304b\u3079\u3066\u4e0b\u3055\u3044\u3002\n\n```bash:\n$ sudo vi /etc/httpd/conf.d/*conf\n# \u4f55\u304b\u5909\u66f4\n$ systemctl restart httpd.service\n```\n\n\u3068\u3044\u3046\u3088\u3046\u306bApache\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u3092\u4fee\u6b63\u3057\u3066\u3001\u30d7\u30ed\u30bb\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308c\u3070\u65b0\u3057\u3044Apache\u306e\u8a2d\u5b9a\u304c\u3055\u308c\u305f\u72b6\u614b\u3067Apache\u304c\u7a3c\u50cd\u3057\u307e\u3059\u3002\n\u5b8c\u5168\u306b\u30a4\u30b3\u30fc\u30eb\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u30a4\u30e1\u30fc\u30b8\u3068\u3057\u3066\u306fDocker\u306b\u3088\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u74b0\u5883\u69cb\u7bc9\u3084\u672c\u756a\u74b0\u5883\u3078\u306e\u30c7\u30d7\u30ed\u30a4\u306f\u3053\u308c\u3068\u540c\u3058\u3053\u3068\u3067\u3059\u3002\n\nDocker\u306fDockerfile\u3068\u3044\u3046\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u3001\u5168\u3066\u306e\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u305f\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u30921\u304b\u3089(\u3042\u308b\u3044\u306f\u4e2d\u9593\u30a4\u30e1\u30fc\u30b8\u304b\u3089)\u30d3\u30eb\u30c9\u3059\u308b\u4ed5\u7d44\u307f\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u307f\u3092\u5909\u66f4\u3057\u3066\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3088\u3046\u306a\u904b\u7528\u3092\u884c\u3048\u3070\u3001\u4f55\u5ea6\u3067\u3082\u3069\u3053\u306b\u3067\u3082\u540c\u3058\u5b9f\u884c\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u66f4\u306b\u3053\u308c\u3092Git\u306a\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u30b7\u30b9\u30c6\u30e0\u3068\u4f75\u7528\u3059\u308c\u3070\u3001\u74b0\u5883\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3082\u624b\u8efd\u306b\u884c\u3048\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u5909\u66f4\u3068\u306f\u9055\u3044\u3001\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u306b\u304a\u3051\u308b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5909\u66f4\u304b\u3089\u306e\u518d\u8d77\u52d5\u306e\u3088\u3046\u306a\u624b\u8efd\u3055\u3067\u5b9f\u884c\u74b0\u5883\u306e\u9069\u7528\u304c\u53ef\u80fd\u306b\u306a\u308b\u306e\u3067\u3059\u3002\n\n## Docker\u3092\u4f7f\u3063\u3066\u307f\u308b\n\n\u5b9f\u969b\u306bdocker\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002Linux\u4e0a\u306bDocker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u305a\u307f\u306e\u72b6\u614b\u3067\u3001Docker\u30c7\u30fc\u30e2\u30f3\u304c\u8d77\u52d5\u4e2d\u3068\u3057\u307e\u3059\u3002\u79c1\u306f\u4eca\u56deCentOS7.2\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n```bash:\n$ ps aux | grep docker\nroot       941  0.0  1.8 668340 37824 ?        Ssl  12\u670818   1:11 /usr/bin/docker-current daemon --exec-opt native.cgroupdriver=systemd --selinux-enabled --log-driver=journald\n# docker\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\n```\n\n\u3053\u306e\u72b6\u614b\u3067\u3042\u308c\u3070\u3001docker\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001Docker\u30c7\u30fc\u30e2\u30f3\u304c\u63d0\u4f9b\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u3001Docker Hub\u304b\u3089CentOS\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```bash:\n$ sudo docker pull centos\n#\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u51e6\u7406\n$ sudo docker images \n#\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u4e00\u89a7\u8868\u793a\n```\n\n\u30bf\u30b0\u540d\u3001centos6.7\u306e\u30a4\u30e1\u30fc\u30b8\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash:\n$ sudo docker run -it --name centos6 centos:centos6.7 /bin/bash\n```\n\n\u3059\u308b\u3068\u3001\u5148\u7a0bdocker\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u305fLinux\u306eOS\u74b0\u5883\u3068\u306f\u307e\u3063\u305f\u304f\u9055\u3046Linux\u74b0\u5883\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u3088\u3046\u306a\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u305d\u308c\u3067\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u305fOS\u74b0\u5883\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u306e\u5185\u90e8\u3067\u540c\u3058\u30b7\u30b9\u30c6\u30e0\u78ba\u8a8d\u7528\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u9055\u3044\u3092\u3056\u3063\u3068\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u306a\u304a\u3001\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u306e\u4e2d\u3067\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\u3057\u305fOS\u74b0\u5883\u3092\u30db\u30b9\u30c8\u74b0\u5883\u3068\u547c\u3073\u30b3\u30f3\u30c6\u30ca\u3092\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3068\u547c\u3076\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\n```bash:\n# \u30db\u30b9\u30c8\u74b0\u5883\n\n$ cat /etc/redhat-release\nCentOS Linux release 7.2.1511 (Core)\n\n$ ip a\n1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN\n    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n    inet6 ::1/128 scope host\n       valid_lft forever preferred_lft forever\n2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP qlen 1000\n    link/ether 9c:a3:ba:30:d3:bd brd ff:ff:ff:ff:ff:ff\n    inet 133.242.236.36/24 brd 133.242.236.255 scope global eth0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::9ea3:baff:fe30:d3bd/64 scope link\n       valid_lft forever preferred_lft forever\n3: docker0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP\n    link/ether 02:42:e4:d2:82:68 brd ff:ff:ff:ff:ff:ff\n    inet 172.17.0.1/16 scope global docker0\n       valid_lft forever preferred_lft forever\n    inet6 fe80::42:e4ff:fed2:8268/64 scope link\n       valid_lft forever preferred_lft forever\n\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.1  43244  3636 ?        Ss   12\u670818   0:21 /usr/lib/systemd/systemd --switched-root --system --deserialize 21\nroot         1  0.0  0.1  43244  3636 ?        Ss   12\u670818   0:21 /usr/lib/systemd/systemd --switched-root --system --deserialize 21\nroot         2  0.0  0.0      0     0 ?        S    12\u670818   0:00 [kthreadd]\nroot         3  0.0  0.0      0     0 ?        S    12\u670818   0:00 [ksoftirqd/0]\nroot         7  0.0  0.0      0     0 ?        S    12\u670818   0:00 [migration/0]\nroot         8  0.0  0.0      0     0 ?        S    12\u670818   0:00 [rcu_bh]\nroot         9  0.0  0.0      0     0 ?        S    12\u670818   0:00 [rcuob/0]\nroot        10  0.0  0.0      0     0 ?        S    12\u670818   0:00 [rcuob/1]\n# \u7701\u7565 133\u884c\u307b\u3069\n\n# \u30b3\u30f3\u30c6\u30ca\u74b0\u5883\n\n$ cat /etc/redhat-release\nCentOS release 6.7 (Final)\n\n$ ifconfig\neth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:02\n          inet addr:172.17.0.2  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::42:acff:fe11:2/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:5 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:438 (438.0 b)  TX bytes:648 (648.0 b)\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)\n\n\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.0  11492  1780 ?        Ss   13:08   0:00 /bin/bash\nroot        21  0.0  0.0  13372  1044 ?        R+   13:17   0:00 ps aux\n\n```\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30c4\u30ea\u30fc\u306e\u9055\u3044\u306f\u3071\u3063\u3068\u898b\u9055\u3044\u3092\u6bd4\u8f03\u3057\u306b\u304f\u3044\u306e\u3067\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3082\u3061\u308d\u3093\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3068\u30db\u30b9\u30c8\u74b0\u5883\u3067\u306f\u5168\u304f\u7570\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u30c4\u30ea\u30fc\u304c\u898b\u3048\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u540d\u304c\u540c\u3058\u3042\u3063\u3066\u3082\u3001IP\u30a2\u30c9\u30ec\u30b9\u3001MAC\u30a2\u30c9\u30ec\u30b9\u304c\u9055\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30db\u30b9\u30c8\u74b0\u5883\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u306b\u6ce8\u76ee\u3057\u3066\u4e0b\u3055\u3044\u3002docker0\u3068\u3044\u3046\u4eee\u60f3\u30d6\u30ea\u30c3\u30b8\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306fDocker\u5c0e\u5165\u6642\u306b\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u4eee\u60f3\u30d6\u30ea\u30c3\u30b8\u3092\u901a\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u5185\u306e\u30d7\u30ed\u30bb\u30b9\u306f\u30b3\u30f3\u30c6\u30ca\u5916\u90e8\u306e\u30d7\u30ed\u30bb\u30b9\u3068\u901a\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30b3\u30f3\u30c6\u30ca\u3068\u305d\u306e\u5916\u306e\u4e16\u754c\u3068\u306e\u901a\u4fe1\u306fDocker\u72ec\u81ea\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5b9f\u88c5\u306f\u3082\u3061\u308d\u3093\u3001Linux\u304c\u63d0\u4f9b\u3059\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u80fd\u3082\u4f75\u7528\u3057\u3066\u67d4\u8edf\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u7406\u89e3\u3057\u3066\u304a\u3051\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u306e\u306f\u3001OS\u3068\u3057\u3066\u306f\u3042\u304f\u307e\u3067\u30db\u30b9\u30c8\u74b0\u5883\u4e0a\u306eCentOS7.2\u306e\u30ab\u30fc\u30cd\u30eb\u3067\u69cb\u7bc9\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u3067\u8868\u793a\u3055\u308c\u305fCentOS6.7\u306e\u30ab\u30fc\u30cd\u30eb\u306f\u53b3\u5bc6\u306b\u306f\u3053\u306e\u74b0\u5883\u4e0a\u3001\u3069\u3053\u306b\u3082\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u306a\u306e\u3067\u3001\u3082\u3057CentOS6.7\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u74b0\u5883\u3067\u4f55\u3089\u304b\u306e\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3059\u308b\u5834\u5408\u3001\u305d\u308c\u306fCentOS6.7\u4e0a\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3055\u308c\u305f\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u3092CentOS7.2\u4e0a\u3067\u52d5\u304b\u3059\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3067\u3059\u304c\u3001\u57fa\u672c\u7684\u306bLinux\u306e\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u306f\u8a2d\u8a08\u601d\u60f3\u4e0a\u3001\u5f8c\u65b9\u4e92\u63db\u6027\u3092\u4fdd\u3063\u3066\u4f5c\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3000\u52d5\u4f5c\u3057\u307e\u3059\u3002\u3053\u308c\u3082Linux\u304cDocker\u3092\u5b9f\u73fe\u3067\u304d\u305f\u5927\u304d\u306a\u7406\u7531\u306e\uff11\u3064\u3067\u3057\u3087\u3046\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u306f\u624b\u8efd\u306b\u8907\u6570\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u5148\u7a0b\u30b3\u30f3\u30c6\u30ca\u3092\u7acb\u3061\u4e0a\u3052\u305f\u30db\u30b9\u30c8\u74b0\u5883\u3067\u3082\u3046\uff11\u3064CentOS6.7\u306e\u30b3\u30f3\u30c6\u30ca\u3092\u540d\u524d\u3092\u5909\u3048\u3066\u65b0\u305f\u306b\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash:\n$ sudo docker run -it --name centos6_2 centos:centos6.7 /bin/bash\n```\n\n\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u74b0\u5883\u60c5\u5831\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash:\n\n$ cat /etc/redhat-release\nCentOS release 6.7 (Final)\n\n$ ifconfig\neth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:03\n          inet addr:172.17.0.3  Bcast:0.0.0.0  Mask:255.255.0.0\n          inet6 addr: fe80::42:acff:fe11:3/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:5 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:8 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:438 (438.0 b)  TX bytes:648 (648.0 b)\n\nlo        Link encap:Local Loopback\n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0\n          RX bytes:0 (0.0 b)  TX bytes:0 (0.0 b)\n```\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u540d\u306f\u540c\u3058\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308bIP\u30a2\u30c9\u30ec\u30b9\u304c\u5148\u7a0b\u306e\u30b3\u30f3\u30c6\u30ca\u3068\u306f\u7570\u306a\u308a\u307e\u3059\u3002\u307e\u305f\u30eb\u30fc\u30d7\u30d0\u30c3\u30af\u30a2\u30c9\u30ec\u30b9\u306b\u95a2\u3057\u3066\u540c\u3058\u60c5\u5831\u3092\u8868\u793a\u3057\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u3001\u3084\u306f\u308a\u305d\u308c\u3089\u306f\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u7570\u306a\u308b\u3082\u306e\u3092\u6307\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u540c\u58eb\u306e\u5834\u5408\u3001\u521d\u671f\u72b6\u614b\u3067\u306f\u7a3c\u50cd\u4e2d\u306e\u30d7\u30ed\u30bb\u30b9\u306e\u9055\u3044\u304c\u308f\u304b\u308a\u306b\u304f\u3044\u306e\u3067\u3001\u5f8c\u306b\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3067\u4e0b\u8a18\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d70\u3089\u305b\u3066\u307f\u307e\u3059\u3002\n\u306a\u304a\u3001\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u306f\u3001gcc\u306a\u3069\u306e\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u306a\u3051\u308c\u3070\u3001\u30b7\u30b9\u30c6\u30e0\u5185\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```c:\n#include<stdlib.h>\n\nint main (void) {\n  while (1){\n    sleep(3);\n  }\n}\n```\n\n```bash:\n$ ./a.out &\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.0  11492  1776 ?        Ss   00:36   0:00 /bin/bash\nroot        59  0.0  0.0   3972   316 ?        S    01:13   0:00 ./a.out\nroot        61  0.0  0.0  13368  1044 ?        R+   01:14   0:00 ps aux\n```\n\n\u6700\u521d\u306b\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u5185\u3067\u3001ps\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3063\u3066\u307f\u307e\u3059\u3002\n\n```bash:\n$ ps aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nroot         1  0.0  0.0  11492  1780 ?        Ss   Dec20   0:00 /bin/bash\nroot        32  0.0  0.0  13372  1044 ?        R+   01:52   0:00 ps aux\n```\n\n./a.out\u304c\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u3001\u3053\u306e\u74b0\u5883\u4e0a\u3067\u306f\u5225\u306e\u30d7\u30ed\u30bb\u30b9\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u66f4\u306b\u3053\u3053\u3067\u30db\u30b9\u30c8\u74b0\u5883\u4e0a\u3067ps\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash:\n$ ps aflx\n# \u4e00\u90e8\u7701\u7565\u3057\u3066\u307e\u3059\u3002\n4     0   941     1  20   0 1170188 38544 wait  Ssl  ?          2:19 /usr/bin/docker-current daemon --exec-opt native.cgroupdriver=systemd --selinux-enabled --log-driver=journald\n4     0 12885   941  20   0  11492  1652 n_tty_ Ss+  pts/2      0:00  \\_ /bin/bash\n4     0 23531   941  20   0  11492  1796 n_tty_ Ss+  pts/3      0:00  \\_ /bin/bash\n0     0 25255 23531  20   0   3972   312 hrtime S    pts/3      0:00      \\_ ./a.out\n```\n\ndocker\u30c7\u30fc\u30e2\u30f3(PID941)\u304b\u3089\u5b50\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066bash\u304c\uff12\u3064\u30d5\u30a9\u30fc\u30af\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u74b0\u5883\u4e0a\u3067\u306f\u3001\u305d\u308c\u305e\u308cPID12885\u3068PID23531\u306e\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u78ba\u8a8d\u3067\u304d\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u306f\u3001\u305d\u308c\u305e\u308c\u306e\u30b3\u30f3\u30c6\u30ca\u74b0\u5883\u306ePID1\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3082\u306e\u3068\u540c\u3058\u3082\u306e\u3067\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u30b3\u30f3\u30c6\u30ca\u3067\u306f\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u9055\u3044\u3001\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066OS\u306e\u3088\u3046\u306a\u5b9f\u884c\u74b0\u5883\u304c\u5b9f\u73fe\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\n\u30db\u30b9\u30c8\u74b0\u5883\u3067ps\u30b3\u30de\u30f3\u30c9\u3092\u8d70\u3089\u305b\u305f\u6642\u306b133\u500b\u3082\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u78ba\u8a8d\u3067\u304d\u305f\u306e\u306b\u5bfe\u3057\u3066\u3001\u30b3\u30f3\u30c6\u30ca\u3067\u306f2\u3064\u3057\u304b\u8d70\u3063\u3066\u3044\u306a\u3044\u3053\u3068\u304b\u3089\u3082\u305d\u306e\u8efd\u3055\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30b3\u30f3\u30c6\u30ca\u306f\u3042\u304f\u307e\u3067\u30d7\u30ed\u30bb\u30b9\u3068\u3057\u3066\u5b9f\u73fe\u3055\u308c\u3066\u304a\u308a\u3001OS\u3068\u3057\u3066\u52d5\u304b\u3059\u70ba\u306b\u5fc5\u8981\u306a\u51e6\u7406\u304c\u8d70\u3089\u306a\u3044\u70ba\u3001\u9ad8\u901f\u306b\u52d5\u4f5c\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3082\u3061\u308d\u3093\u305d\u3053\u306bhttpd\u3084mysqld\u306a\u3069\u306e\u30c7\u30fc\u30e2\u30f3\u3092\u3044\u308c\u3066\u5229\u7528\u3057\u3066\u3044\u304f\u3053\u3068\u306b\u306f\u306a\u308a\u307e\u3059\u304c\u3001\u305d\u308c\u3067\u3082\u4eee\u60f3\u30b5\u30fc\u30d0\u3068\u6bd4\u3079\u308b\u3068\u5727\u5012\u7684\u306b\u5c11\u306a\u3044\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u30ec\u30d9\u30eb\u306e\u624b\u8efd\u3055\u3067\u3001OS\u306e\u3088\u3046\u306a\u5b9f\u884c\u74b0\u5883\u305d\u306e\u3082\u306e\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u3002\n\n## Docker\u5b9f\u73fe\u306e\u4ed5\u7d44\u307f\n\n\u305d\u308c\u3067\u306f\u3001Docker(\u30b3\u30f3\u30c6\u30ca)\u3092\u5b9f\u73fe\u3059\u308b\u70ba\u306e\u65b9\u6cd5\u3068\u3057\u3066\u4e8c\u70b9\u307b\u3069\u305d\u306e\u6a5f\u80fd\u3092\u6df1\u6398\u308a\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n### nameapace\n\nnamespace\u306fLinux\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308bOS\u304c\u7ba1\u7406\u3059\u308b\u30b7\u30b9\u30c6\u30e0\u30ea\u30bd\u30fc\u30b9\u3092\u5206\u96e2\u3059\u308b\u70ba\u306e\u6a5f\u80fd\u3067\u3059\u3002\n\u73fe\u72b6\u306f6\u7a2e\u985e\u306e\u30ea\u30bd\u30fc\u30b9\u3092namespace\u306b\u3088\u3063\u3066\u5206\u96e2\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306fDocker\u306e\u5b9f\u73fe\u306e\u4f8b\u3067\u307f\u305f\u3088\u3046\u306b\u3001\u30d5\u30a9\u30fc\u30af\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u306b\u5bfe\u3057\u3066\u72ec\u7acb\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30ea\u30bd\u30fc\u30b9\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n#### mount namespace\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u3054\u3068\u306b\u308f\u308a\u3042\u3066\u305f\u8ad6\u7406\u30c7\u30d0\u30a4\u30b9\u306b\u30eb\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u5272\u308a\u5f53\u3066\u308b\u3053\u3068\u3067\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u306f\u540c\u3058\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3067\u3082\u7570\u306a\u308b\u5b9f\u4f53\u306e\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\n#### UTS namespace\nuname\u3067\u53d6\u5f97\u3055\u308c\u308b\u3088\u3046\u306a\u30b7\u30b9\u30c6\u30e0\u60c5\u5831\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\n#### IPC namespace\nSysten V IPC\u3068POSIX\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u30d7\u30ed\u30bb\u30b9\u9593\u901a\u4fe1\u306b\u5229\u7528\u3055\u308c\u308b\u3001\u30bb\u30de\u30d5\u30a9\u3001\u30e1\u30c3\u30bb\u30fc\u30b8\u30ad\u30e5\u30fc\u3001\u5171\u6709\u30e1\u30e2\u30ea\u3068\u3044\u3063\u305f\u6a5f\u69cb\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\n#### PID namespace\nPID\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u306f\u7570\u306a\u308b\u30d7\u30ed\u30bb\u30b9\u30c6\u30fc\u30d6\u30eb\u3092\u53c2\u7167\u3059\u308b\u305f\u3081\u3001\u540c\u3058PID\u3067\u3082\u7570\u306a\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u6307\u3057\u307e\u3059\u3002\n\n#### network namespace\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u5185\u3067\u306f\u7570\u306a\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u6301\u3064\u3053\u3068\u306b\u306a\u308b\u305f\u3081\u3001IP\u30a2\u30c9\u30ec\u30b9\u3092\u306f\u3058\u3081\u3068\u3059\u308b\u5404\u30a2\u30c9\u30ec\u30b9\u60c5\u5831\u3092\u5206\u96e2\u3067\u304d\u307e\u3059\u3002\n\n#### user namespace\n\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u5206\u96e2\u3057\u307e\u3059\u3002\n\u5404\u30b3\u30f3\u30c6\u30ca\u9593\u3067\u306f\u540c\u3058UID\u3001GID\u3067\u3082\u5225\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u3057\u307e\u3059\u3002\nroot\u3067\u3059\u3089\u3082\u30b3\u30f3\u30c6\u30ca\u304c\u7570\u306a\u308c\u3070\u305d\u308c\u305e\u308c\u9055\u3046\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u3001namespace\u306b\u95a2\u3059\u308b\u3042\u308b\u5b9f\u9a13\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\u305d\u306e\u5b9f\u9a13\u306e\u70ba\u306e\u30b3\u30fc\u30c9\u3092[setns(2) - Linux manual page](http://man7.org/linux/man-pages/man2/setns.2.html)\u3088\u308a\u5f15\u7528\u3057\u307e\u3059\u3002\n\n```namespace.c:\n #define _GNU_SOURCE\n       #include <fcntl.h>\n       #include <sched.h>\n       #include <unistd.h>\n       #include <stdlib.h>\n       #include <stdio.h>\n\n       #define errExit(msg)    do { perror(msg); exit(EXIT_FAILURE); \\\n                               } while (0)\n\n       int\n       main(int argc, char *argv[])\n       {\n           int fd;\n\n           if (argc < 3) {\n               fprintf(stderr, \"%s /proc/PID/ns/FILE cmd args...\\n\", argv[0]);\n               exit(EXIT_FAILURE);\n           }\n\n           fd = open(argv[1], O_RDONLY);  /* Get file descriptor for namespace */\n           if (fd == -1)\n               errExit(\"open\");\n\n           if (setns(fd, 0) == -1)        /* Join that namespace */\n               errExit(\"setns\");\n\n           execvp(argv[2], &argv[2]);     /* Execute a command in namespace */\n           errExit(\"execvp\");\n       }\n```\n\n\u3053\u308c\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001namespace\u3068\u3044\u3046\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306b\u3057\u307e\u3059\u3002\n\nsetfs\u306f\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3067\u3001\u65e2\u5b58\u306enamespace\u3092\u53c2\u7167\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u547c\u3073\u51fa\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u3092\u305d\u306enamespace\u306b\u95a2\u9023\u4ed8\u3051\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u3068\u306f\u4f55\u304b\u306b\u3064\u3044\u3066\u306f\u3001\u4ee5\u524d[Linux\u306e\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u3092\u30cf\u30c3\u30af\u3059\u308b](http://qiita.com/tajima_taso/items/7e696944cb521958e63d)\u3067\u66f8\u304b\u305b\u3066\u9802\u3044\u305f\u306e\u3067\u3001\u3088\u3051\u308c\u3070\u3053\u3061\u3089\u3082\u3069\u3046\u305e\u3002\n\n\u3055\u3066\u3001\u65e2\u5b58\u306enamespace\u3092\u53c2\u7167\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30bf\u306f\u3069\u3046\u3084\u3063\u3066\u53d6\u5f97\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u3068\u3044\u3046\u3068\u3001/proc/PID/ns/\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u306e6\u7a2e\u985e\u306enamespace\u306b\u5bfe\u5fdc\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u30aa\u30fc\u30d7\u30f3\u3057\u3066\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n\u305f\u3081\u3057\u306bDocker\u304b\u3089\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u306enamespace\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u30022\u3064\u8d77\u52d5\u3057\u307e\u3057\u305f\u304c\u3001\u4e00\u65b9\u306ePID\u306f\u3055\u304d\u307b\u3069\u306eps\u30b3\u30de\u30f3\u30c9\u304b\u308912885\u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u3053\u3061\u3089\u306e\u30d7\u30ed\u30bb\u30b9\u306b\u6ce8\u76ee\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ ll /proc/12885/ns\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 ipc -> ipc:[4026532157]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 mnt -> mnt:[4026532155]\nlrwxrwxrwx 1 root root 0 12\u6708 20 22:08 net -> net:[4026532160]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 pid -> pid:[4026532158]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 user -> user:[4026531837]\nlrwxrwxrwx 1 root root 0 12\u6708 22 23:54 uts -> uts:[4026532156]\n```\n\u3055\u304d\u307b\u3069\u7d39\u4ecb\u3057\u305f6\u7a2e\u985e\u306enamespace\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u524d\u306b\u30db\u30b9\u30c8\u74b0\u5883\u306e/etc/redhat-release\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ cat /etc/redhat-release\nCentOS Linux release 7.2.1511 (Core) \n```\n\n\u6b21\u306b\u3001\u3055\u304d\u307b\u3069\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u751f\u6210\u3057\u305f\u5b9f\u884c\u30d5\u30a1\u30a4\u30ebnamespace\u3092\u4f7f\u3063\u3066\u3001\u65e2\u5b58\u306e\u30b3\u30f3\u30c6\u30ca\u306emount namespace\u306b\u65b0\u305f\u306b\u8d77\u52d5\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u3092\u95a2\u9023\u4ed8\u3051\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```bash\n$ ./namespace /proc/12885/ns/mnt /bin/bash\n```\n\n\u3053\u306e\u72b6\u614b\u3067/etc/redhat-release\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\n$ cat /etc/redhat-release\nCentOS release 6.7 (Final)\n```\n\n\u8d77\u52d5\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3068\u540c\u3058\u30d5\u30a1\u30a4\u30eb\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n\u30d7\u30ed\u30bb\u30b9\u3092namespace\u306b\u95a2\u9023\u3065\u3051\u308b\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001clone\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u5404namespace\u7528\u306e\u30d5\u30e9\u30b0(CLONE_NEWNS\u3084\u3001CLONE_NEWIPC\u306a\u3069)\u3092\u6307\u5b9a\u3057\u3066\u30d5\u30a9\u30fc\u30af\u3057\u305f\u30d7\u30ed\u30bb\u30b9\u306b\u95a2\u9023\u3065\u3051\u308b\u65b9\u6cd5\u3084\u3001unshare\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u306b\u30d5\u30e9\u30b0\u3092\u6307\u5b9a\u3057\u3066\u3001\u5b50\u30d7\u30ed\u30bb\u30b9\u3092\u4f5c\u6210\u305b\u305a\u306b\u73fe\u5728\u306e\u30d7\u30ed\u30bb\u30b9\u306b\u65b0\u3057\u3044namespace\u3092\u95a2\u9023\u4ed8\u3051\u308b\u65b9\u6cd5\u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u203b\u4ee5\u524d\u66f8\u3044\u305f\u30a8\u30f3\u30c8\u30ea\n[Linux\u306efork\u30b7\u30b9\u30c6\u30e0\u30b3\u30fc\u30eb\u3092\u30cf\u30c3\u30af\u3059\u308b](http://qiita.com/tajima_taso/items/d3c8d516fe8995613c67)\n\n[clone(2) - Linux manual page](http://man7.org/linux/man-pages/man2/clone.2.html)\n[unshare(2) - Linux manual page](http://man7.org/linux/man-pages/man2/unshare.2.html)\n\n### cgroups\n\ncgroups\u306fLinux\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308b\u3001\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u305f\u7279\u5b9a\u306e\u30d7\u30ed\u30bb\u30b9\u7fa4\u306b\u30cf\u30fc\u30c9\u30a6\u30a7\u30a2\u3068\u305d\u308c\u306b\u95a2\u4fc2\u3059\u308b\u5074\u9762\u304b\u3089\u5236\u9650\u3092\u304b\u3051\u308b\u6a5f\u80fd\u3067\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u5404\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3059\u308bCPU\u6642\u9593\u306e\u5272\u308a\u5f53\u3066\u512a\u5148\u5ea6\u3084\u3001\u30e1\u30e2\u30ea\u4f7f\u7528\u91cf\u3001\u30c7\u30fc\u30bf\u8ee2\u9001\u306b\u4f34\u3046\u5e2f\u57df\u306a\u3069\u3092\u8abf\u6574\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30ca\u306e\u6587\u8108\u3067\u8aac\u660e\u3059\u308b\u3068\u3001\u5236\u5fa1\u3055\u308c\u308b\u30d7\u30ed\u30bb\u30b9\u7fa4\u306fnamespace\u3067\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3055\u308c\u305f\u30d7\u30ed\u30bb\u30b9\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u305f\u3081\u3057\u306b\u4ee5\u4e0b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4e2d\u8eab\u3092\u307f\u308b\u3068\u3001\u3069\u3046\u3044\u3063\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u5236\u5fa1\u53ef\u80fd\u304b\u308f\u304b\u308a\u307e\u3059\u3002\n\n```bash:\n$ ll /sys/fs/cgroup/\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 blkio\nlrwxrwxrwx 1 root root 11 12\u6708 18 17:33 cpu -> cpu,cpuacct\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 cpu,cpuacct\nlrwxrwxrwx 1 root root 11 12\u6708 18 17:33 cpuacct -> cpu,cpuacct\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 cpuset\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 devices\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 freezer\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 hugetlb\ndrwxr-xr-x 4 root root  0 12\u6708 20 21:57 memory\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 net_cls\ndrwxr-xr-x 3 root root  0 12\u6708 18 17:33 perf_event\ndrwxr-xr-x 4 root root  0 12\u6708 18 17:33 systemd\n```\n\n\u4eca\u56de\u306fdevices\u306b\u6ce8\u76ee\u3057\u3066\u307f\u307e\u3059\u3002\ndevices\u306f\u6240\u5c5e\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u7fa4\u306b\u5bfe\u3057\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u5236\u5fa1\u3059\u308b\u6a5f\u80fd\u3067\u3059\u3002\n\n\u79c1\u306e\u74b0\u5883\u3067\u306fcgroups\u306fsystemd\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u73fe\u5728\u7a3c\u50cd\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u304a\u3051\u308bdevices\u306e\u7ba1\u7406\u72b6\u6cc1\u306f\u4e0b\u8a18\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ ll /sys/fs/cgroup/devices/system.slice/docker-f4458636b4067b2136686ba4c96af94d7ba66ad8c0ed702c82859a145a48672b.scope\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 cgroup.clone_children\n--w--w--w- 1 root root 0 12\u6708 21 09:36 cgroup.event_control\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 cgroup.procs\n--w------- 1 root root 0 12\u6708 21 09:36 devices.allow\n--w------- 1 root root 0 12\u6708 21 09:36 devices.deny\n-r--r--r-- 1 root root 0 12\u6708 21 09:36 devices.list\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 notify_on_release\n-rw-r--r-- 1 root root 0 12\u6708 21 09:36 tasks\n```\n\n\u3068\u3044\u3046\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u79c1\u304c\u73fe\u5728\u7a3c\u50cd\u3055\u305b\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u30d7\u30ed\u30bb\u30b9ID\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash:\nroot       941  0.0  1.2 1170188 26560 ?       Ssl  12\u670818   3:02 /usr/bin/docker-current daemon --exec-opt native.cgroupdriver=systemd --selinux-enabled --log-driver\nroot     23531  0.0  0.0  11492  1132 pts/3    Ss   12\u670821   0:00  \\_ /bin/bash\nroot     25255  0.0  0.0   3972   312 pts/3    S    12\u670821   0:01      \\_ ./a.out\nroot     24371  0.0  0.0   3972   312 pts/3    S+   02:09   0:00      \\_ ./a.out\n```\n23531\u300125255\u300124371\u306ePID\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u30d7\u30ed\u30bb\u30b9\u30b0\u30eb\u30fc\u30d7\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u3053\u3053\u3067cgroup.procs\u306e\u4e2d\u8eab\u3092\u898b\u3066\u307f\u308b\u3068\u3001\n\n```bash:\n$ cat cgroup.procs\n23531\n24371\n25255\n```\n\n\u3055\u304d\u307b\u3069ps\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u30663\u3064\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u8868\u793a\u3055\u308c\u305f\u306e\u3067\u3001\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u9054\u306b\u5bfe\u3057\u3066\u4f55\u3089\u304b\u306e\u30c7\u30d0\u30a4\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u3069\u3046\u3084\u3063\u3066\u5236\u9650\u3092\u304b\u3051\u3066\u3044\u308b\u304b\u306f\u3001\u540d\u524d\u304b\u3089\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u304c\ndevices.allow\u3001devices.deny\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u305d\u308c\u305e\u308c\u8a31\u53ef\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u3001\u7981\u6b62\u3059\u308b\u30c7\u30d0\u30a4\u30b9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u3053\u306e2\u3064\u306f\u66f8\u304d\u8fbc\u307f\u5c02\u7528\u306a\u306e\u3067\u3001\u8aad\u307f\u8fbc\u307f\u5c02\u7528\u306edevices.list\u3092\u4f7f\u3063\u3066\u73fe\u5728\u8a31\u53ef\u3055\u308c\u3066\u3044\u308b\u30c7\u30d0\u30a4\u30b9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash:\n$ cat devices.list\nc *:* m\nb *:* m\nc 5:1 rwm\nc 4:0 rwm\nc 4:1 rwm\nc 136:* rwm\nc 5:2 rwm\nc 10:200 rwm\nc 1:3 rwm\nc 1:5 rwm\nc 1:7 rwm\nc 5:0 rwm\nc 1:9 rwm\nc 1:8 rwm\n```\n\n\u5404\u884c\u306e\u6700\u521d\u306e\u4e00\u6587\u5b57\u76ee\u306f\u30c7\u30d0\u30a4\u30b9\u306e\u7a2e\u985e\u3092\u8868\u3057\u3066\u3044\u307e\u3059(c\u306f\u30ad\u30e3\u30e9\u30af\u30bf\u30c7\u30d0\u30a4\u30b9\u3001b\u306f\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u306a\u3069)\u3002\n5:1\u306a\u3069\u306f/dev\u914d\u4e0b\u306b\u304a\u3051\u308b\u30e1\u30b8\u30e3\u30fc\u756a\u53f7\u3068\u30de\u30a4\u30ca\u30fc\u756a\u53f7\u3092\u8868\u3057\u3066\u304a\u308a\u6700\u5f8c\u306erw\u306f\u8aad\u307f\u8fbc\u307f\u66f8\u304d\u8fbc\u307f\u3001m\u306f\u30c7\u30d0\u30a4\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u65b0\u898f\u4f5c\u6210\u304c\u53ef\u80fd\u3067\u3042\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u3066\u3044\u304a\u308a\u3001*\u306f\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u306a\u3093\u3068\u306a\u304f\u5bdf\u3057\u304c\u3064\u304f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001Docker\u306b\u304a\u3044\u3066\u306f\u6700\u521d\u306b\u5168\u3066\u306e\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u4e0d\u53ef\u306b\u3057\u3066\u304b\u3089\u3001\u6bb5\u968e\u7684\u306b\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u3068\u3044\u3046\u30db\u30ef\u30a4\u30c8\u30ea\u30b9\u30c8\u65b9\u5f0f\u3092\u3068\u3063\u3066\u3044\u307e\u3059\u3002\n\nWeb\u30b5\u30fc\u30d0\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3001Apache\u306e\u30a2\u30af\u30bb\u30b9\u8a2d\u5b9a\u3092\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u65b9\u306f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb(.htaccss\u306a\u3069)\u306e\u8a2d\u5b9a\u65b9\u6cd5\u3068\u4f3c\u3066\u3044\u308b\u3068\u611f\u3058\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nLinux\u306ecgroups\u3092\u5229\u7528\u3059\u308b\u6642\u306bdevices.list\u304c\u3044\u3064\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3053\u3046\u8a2d\u5b9a\u3057\u3066\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u3042\u304f\u307e\u3067Docker\u304c\u3053\u306e\u3088\u3046\u306a\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u884c\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\n\n\u3067\u306f\u3001\u4eca\u56de\u306e\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u5b9f\u9a13\u306f\u3053\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u5bfe\u3057\u3066\u66f4\u306b\u30c7\u30d0\u30a4\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u53b3\u3057\u304f\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\ndevices.list\u5185\u3067\u8a31\u53ef\u5bfe\u8c61\u306b\u306a\u3063\u3066\u3044\u305fc 1:8\u306f/dev/random\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\n\u306a\u306e\u3067\u3001\u30b3\u30f3\u30c6\u30ca\u5074\u3067\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u3001\u554f\u984c\u306a\u304f\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n```bash:\n$ cat /dev/random\n# \u30e9\u30f3\u30c0\u30e0\u306a\u6587\u5b57\u304c\u8868\u793a\u3055\u308c\u7d9a\u3051\u308b\u3002\n```\n\n\u7d9a\u3044\u3066\u30db\u30b9\u30c8\u74b0\u5883\u5074\u3067\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002devices.deny\u306b\u8ffd\u8a18\u3067\u66f8\u304d\u8fbc\u307f\u3092\u884c\u3063\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\n```bash:\n$ /sys/fs/cgroup/devices/system.slice/docker-f4458636b4067b2136686ba4c96af94d7ba66ad8c0ed702c82859a145a48672b.scope\n$ echo 'c 1:8 rwm' >> devices.deny\n```\n\ndevices.list\u3092\u78ba\u8a8d\u3059\u308b\u3068c 1:8 rwm\u304c\u6d88\u3048\u3066\u3044\u307e\u3059\u3002\n\n```bash:\n$ cat devices.list\nc *:* m\nb *:* m\nc 5:1 rwm\nc 4:0 rwm\nc 4:1 rwm\nc 136:* rwm\nc 5:2 rwm\nc 10:200 rwm\nc 1:3 rwm\nc 1:5 rwm\nc 1:7 rwm\nc 5:0 rwm\nc 1:9 rwm\n```\n\n\u305d\u3057\u3066\u518d\u3073\u3001\u30b3\u30f3\u30c6\u30ca\u5074\u3067\u540c\u3058\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash:\n$ cat /dev/random\ncat: /dev/random: Operation not permitted\n```\n\n\u3053\u306e\u3088\u3046\u306b/dev/random\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u539f\u7406\u7684\u306b\u30b3\u30f3\u30c6\u30ca\u65b9\u5f0f\u306b\u3088\u308b\u5b9f\u884c\u74b0\u5883\u306e\u5236\u5fa1\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u7684\u306a\u89b3\u70b9\u304b\u3089\u306f\u3001\u4eee\u60f3\u30b5\u30fc\u30d0\u3088\u308a\u8106\u5f31\u6027\u3092\u79d8\u3081\u3066\u3044\u307e\u3059\u3002\n\n\u4eee\u60f3\u30b5\u30fc\u30d0\u306fOS\u3084\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u4f55\u3089\u304b\u306e\u8106\u5f31\u6027\u304c\u306a\u3051\u308c\u3070\u3001\u4ed6\u306e\u4eee\u60f3\u74b0\u5883\u306b\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u3053\u3068\u306f\u307e\u305a\u306a\u3044\u3067\u3059\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u9593\u306e\u95a2\u4fc2\u306f\u3042\u304f\u307e\u3067\u305f\u3060\u306e\u30d7\u30ed\u30bb\u30b9\u306a\u306e\u3067\u3001\u4ed6\u306e\u30b3\u30f3\u30c6\u30ca(\u30d7\u30ed\u30bb\u30b9)\u3078\u5f71\u97ff\u3092\u4e0e\u3048\u308b\u53ef\u80fd\u6027\u306f\u4eee\u60f3\u74b0\u5883\u3088\u308a\u306f\u9593\u9055\u3044\u306a\u304f\u9ad8\u3044\u3067\u3059\u3002\n\n\u305d\u3046\u3044\u3063\u305f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u30ea\u30b9\u30af\u3078\u306e\u5bfe\u7b56\u306fDocker\u81ea\u8eab\u3084Docker\u306e\u70ba\u306e\u57fa\u76e4\u30b7\u30b9\u30c6\u30e0\u306a\u3069\u3067\u30ab\u30d0\u30fc\u3057\u3088\u3046\u3068\u3044\u3046\u8a66\u307f\u304c\u884c\u308f\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u3082\u305d\u306e\u5bfe\u7b56\u306e\uff11\u3064\u3068\u8a00\u3048\u307e\u3059\u3002\n\n## \u4eca\u5f8c\u306e\u5c55\u671b\n\n\u306a\u304a\u3001Docker\u306fnamespace\u3084cgroups\u542b\u3081\u3001Linux\u30ab\u30fc\u30cd\u30eb\u304c\u63d0\u4f9b\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u5b9f\u73fe\u95a2\u9023\u306eAPI\u3092\u62bd\u8c61\u5316\u3059\u308b\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3068\u3057\u3066[libcontainer](https://github.com/docker/libcontainer/blob/4940cee052ece5a8b2ea477699e7bb232de1e1f8/SPEC.md)\u3092Docker0.9\u3088\u308a\u5185\u90e8\u3067\u5b9f\u88c5\u3057\u3066\u307e\u3059\u3002\n\u3053\u308c\u306b\u3088\u3063\u3066\u3001Docker\u306f\u7279\u5b9a\u306e\u74b0\u5883\u306b\u4f9d\u5b58\u3057\u306b\u304f\u3044\u5b89\u5b9a\u7684\u306a\u30b7\u30b9\u30c6\u30e0\u306b\u8fd1\u3065\u3044\u305f\u306e\u3067\u3001\u5c0e\u5165\u3059\u308b\u5074\u3068\u3057\u3066\u306f\u6c7a\u65ad\u304c\u3057\u3084\u3059\u304f\u306a\u3063\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001Docker\u5c02\u7528\u306eOS(RancherOS\u3001CoreOS)\u306e\u767b\u5834\u3084\u3001\u6a2a\u65ad\u7684\u306aDocker\u7ba1\u7406\u3092\u53ef\u80fd\u3068\u3059\u308bKubernetes\u306a\u3069\u306e\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u306e\u6a5f\u80fd\u3082\u5145\u5b9f\u3057\u3066\u304d\u305f\u306e\u3067\u3001Immutable Infrastructure(\u4e0d\u5909\u306e\u30a4\u30f3\u30d5\u30e9\uff09\u3068\u3057\u3066\u3001\u5e45\u5e83\u3044\u5206\u91ce\u306b\u5229\u7528\u3055\u308c\u3066\u3044\u304f\u3053\u3068\u304c\u671f\u5f85\u3055\u308c\u307e\u3059\u3002\n\n\u65b0\u3057\u3044\u60c5\u5831\u304c\u3042\u308c\u3070\u968f\u6642\u3001\u30b7\u30a7\u30a2\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\ud83d\udc4d\n\n## \u691c\u8a3c\u74b0\u5883\n\nOS: CentOS Linux release 7.2.1511 (Core)\nLinux\u30ab\u30fc\u30cd\u30eb: 3.10.0-327.36.3.el7.x86_64\n\n## \u53c2\u8003\u6587\u732e\n[Docker\u5b9f\u8df5\u5165\u9580 \u2015\u2015Linux\u30b3\u30f3\u30c6\u30ca\u6280\u8853\u306e\u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067](https://www.amazon.co.jp/o/ASIN/4774176540/gihyojp-22)\n[\u300c\u4eee\u60f3\u5316\u300d\u5b9f\u88c5\u306e\u57fa\u790e\u77e5\u8b58](https://www.amazon.co.jp/%E3%80%8C%E4%BB%AE%E6%83%B3%E5%8C%96%E3%80%8D%E5%AE%9F%E8%A3%85%E3%81%AE%E5%9F%BA%E7%A4%8E%E7%9F%A5%E8%AD%98-%E6%B3%95%E6%A9%8B-%E5%92%8C%E6%98%8C/dp/4897979870)\n[Docker 0.9: Introducing Execution Drivers And Libcontainer](https://blog.docker.com/2014/03/docker-0-9-introducing-execution-drivers-and-libcontainer/)\n[Container Specification - v1](https://github.com/docker/libcontainer/blob/4940cee052ece5a8b2ea477699e7bb232de1e1f8/SPEC.md)\nLinux\u30ab\u30fc\u30cd\u30eb\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9: 3.10\nLinux Kernel Updates Vol.2014.08\n\n\n", "tags": ["docker", "Linux", "CentOS", "C\u8a00\u8a9e", "\u30b5\u30fc\u30d0\u30fc"]}