{"tags": ["Terraform"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nTerraform \u3092\u4f7f\u3044\u3001Route 53 \u306e DNS \u306e\u8a2d\u5b9a\u5909\u66f4\u3092\u8a66\u307f\u308b\u3002AWS Management Console \u3092\u4f7f\u7528\u305b\u305a\u3001\u30be\u30fc\u30f3\u60c5\u5831\u306e\u767b\u9332\u3084\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\uff0f\u524a\u9664\u3092\u884c\u3046\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\u3002\u306a\u304a\u3001\u4f5c\u696d\u306f\u5168\u3066 Terraform \u304b\u3089\u5b9f\u65bd\u3059\u308b\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\nTerraform \u306e\u52d5\u4f5c\u74b0\u5883\n\n\n\u30be\u30fc\u30f3\u60c5\u5831\u306e\u8ffd\u52a0\n\u540c\u4e00\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u8a8d\u8a3c\u60c5\u5831\u3092\u5b9a\u7fa9\u3057\u305f aws_region.tf \u3068\u3001\u30be\u30fc\u30f3\u60c5\u5831\u3092\u5b9a\u7fa9\u3059\u308b aws_route53.tf \u3092\u4f5c\u6210\u3059\u308b\u3002\u307e\u305f\u3001\u3053\u3053\u3067\u4f7f\u7528\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u540d\u306f over.moe \u3068\u3059\u308b\u304c\u3001\u4efb\u610f\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3002\n\naws_region.tf\nprovider \"aws\" {\n    access_key = \"\u81ea\u5206\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\"\n    secret_key = \"\u81ea\u5206\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\"\n    region = \"us-east-1\"\n}\n\n\n\naws_route53.tf\nresource \"aws_route53_zone\" \"over_moe\" {\n   name = \"over.moe\"\n}\n\n\n\u3053\u308c\u306f\u3001aws_route53_zone\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u540d\u306b\u5bfe\u3057\u3001over_moe\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u540d\u79f0\u3092\u5272\u308a\u5f53\u3066\u3066\u3044\u308b\u3002name \u3067\u6307\u5b9a\u3059\u308b\u306e\u306f\u3001\u5b9f\u969b\u306b\u4f7f\u7528\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u540d over.moe \u3092\u6307\u5b9a\u3059\u308b\uff08\u4f8b\uff1aexample.jp\u7b49\u3092\u3053\u3053\u3078\u66f8\u304f\u3053\u3068\uff09\u3002\n\u8a2d\u5b9a\u3092\u9069\u7528\u3059\u308b\u524d\u306b\u3001\u8a08\u753b terrafrom plan \u3092\u5b9f\u884c\u3057\u3001\u5909\u66f4\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n$ ./terraform plan\nRefreshing Terraform state prior to plan...\n\n\nThe Terraform execution plan has been generated and is shown below.\nResources are shown in alphabetical order for quick scanning. Green resources\nwill be created (or destroyed and then created if an existing resource\nexists), yellow resources are being changed in-place, and red resources\nwill be destroyed.\n\nNote: You didn't specify an \"-out\" parameter to save this plan, so when\n\"apply\" is called, Terraform can't guarantee this is what will execute.\n\n+ aws_route53_zone.over_moe\n    name:    \"\" => \"over.moe\"\n    zone_id: \"\" => \"<computed>\"\n\n\u3053\u306e\u8868\u793a\u5185\u5bb9\u306f\u3001\u30ea\u30bd\u30fc\u30b9aws_route53_zone.over_moe \u3092 +(\u8ffd\u52a0)\u3059\u308b\u4e8b\u3092\u610f\u5473\u3057\u3066\u304a\u308a\u3001\u5b9f\u969b\u306b\u8ffd\u52a0\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u540d\u306f over.moe \u3067\u3042\u308b\u3002\n\u8a2d\u5b9a\u3092\u53cd\u6620(apply)\u3059\u308b\u305f\u3081\u306b\u306f\u3001terraform apply \u3092\u5b9f\u884c\u3059\u308b\u3002\n$ ./terraform apply\naws_route53_zone.over_moe: Creating...\n  name: \"\" => \"over.moe\"\naws_route53_zone.over_moe: Creation complete\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n\nThe state of your infrastructure has been saved to the path\nbelow. This state is required to modify and destroy your\ninfrastructure, so keep it safe. To inspect the complete state\nuse the `terraform show` command.\n\nState path: terraform.tfstate\n\n\u5b9f\u884c\u3059\u308b\u3068\u5341\u6570\u79d2\u7a0b\u5ea6\u306e\u5f85\u6a5f\u306e\u5f8c\u3001\u753b\u9762\u306b\u51e6\u7406\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u308b\u3002\u7d50\u679c\u306b 1 added \u3068\u8868\u793a\u3055\u308c\u3066\u304a\u308a\u3001\u6b63\u5e38\u306b\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3002\n\u51e6\u7406\u7d50\u679c\u306e\u8a73\u7d30\u306f\u3001terraform show \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n$ ./terraform show ./terraform.tfstate\naws_route53_zone.over_moe:\n  id = ZNUSNIH3530EG\n  name = over.moe\n  zone_id = ZNUSNIH3530EG\n\n\u3053\u308c\u3067\u3001AWS Management Console \u3092\u4f7f\u308f\u305a\u306b\u30be\u30fc\u30f3\u60c5\u5831\u306e\u767b\u9332\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3002\u753b\u9762\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30c9\u30e1\u30a4\u30f3\u60c5\u5831\u304c\u78ba\u8a8d\u3067\u304d\u308b\u307b\u304b\u3001\u5bfe\u8c61\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u306e Comment \u306b\u306f Managed by Terraform \u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u3002\n\n\u3042\u3068\u306f\u3001NS \u30ec\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3001\u5404\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u66f4\u65b0\u3057\u3001\u30c9\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a\u3092\u53cd\u6620\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\n\u30be\u30fc\u30f3\u60c5\u5831\u306b\u5f15\u304d\u7d9a\u304d\u3001\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\u3084\u5909\u66f4\u3082\u53ef\u80fd\u3067\u3042\u308b\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\u3002\u30ec\u30b3\u30fc\u30c9\u7528\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u3001\u5148\u306e aws_route53.tf \u306b\u8ffd\u52a0\u3059\u308b\u3002www.over.moe \u3092\u5b9a\u7fa9\u3059\u308b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\nresource \"aws_route53_zone\" \"over_moe\" {\n   name = \"over.moe\"\n}\n\nresource \"aws_route53_record\" \"www\" {\n   zone_id = \"ZNUSNIH3530EG\"\n   name = \"www.over.moe\"\n   type = \"A\"\n   ttl = \"300\"\n   records = [\"210.239.46.254\"]\n}\n\n\u3053\u3053\u3067\u306f\u3001\u30ea\u30bd\u30fc\u30b9 aws_route53_record \u306b\u3001www \u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u5272\u308a\u5f53\u3066\u3066\u3044\u308b\u3002\u307e\u305f\u3001zone_id \u306f\u5148\u307b\u3069\u78ba\u8a8d\u3057\u305f\u30be\u30fc\u30f3 ID \u3067\u3042\u308b\u3002name \u306f\u3001www.over.moe\u3092\u3001type \u306f A (Address) \u30ec\u30b3\u30fc\u30c9\u3001TTL \u306f TTL \u79d2\u3001\u305d\u3057\u3066\u3001records \u306b IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\u8a2d\u5b9a\u3092\u9069\u7528\u3059\u308b\u524d\u306b\u3001terraform plan \u3067\u5909\u66f4\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n$ ./terraform plan\nRefreshing Terraform state prior to plan...\n\naws_route53_zone.over_moe: Refreshing state... (ID: ZNUSNIH3530EG)\n\nThe Terraform execution plan has been generated and is shown below.\nResources are shown in alphabetical order for quick scanning. Green resources\nwill be created (or destroyed and then created if an existing resource\nexists), yellow resources are being changed in-place, and red resources\nwill be destroyed.\n\nNote: You didn't specify an \"-out\" parameter to save this plan, so when\n\"apply\" is called, Terraform can't guarantee this is what will execute.\n\n+ aws_route53_record.www\n    name:      \"\" => \"www.over.moe\"\n    records.#: \"\" => \"1\"\n    records.0: \"\" => \"210.239.46.254\"\n    ttl:       \"\" => \"300\"\n    type:      \"\" => \"A\"\n    zone_id:   \"\" => \"ZNUSNIH3530EG\"\n\n\u3053\u306e\u3088\u3046\u306b www.over.moe \u3068\u3044\u3046 A \u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u4e8b\u304c\u5206\u304b\u308b\u3002\u5185\u5bb9\u306b\u554f\u984c\u304c\u7121\u3051\u308c\u3070\u3001\u9069\u7528apply\u3092\u884c\u3046\u3002\n$ ./terraform apply\naws_route53_zone.over_moe: Refreshing state... (ID: ZNUSNIH3530EG)\naws_route53_record.www: Creating...\n  name:      \"\" => \"www.over.moe\"\n  records.#: \"\" => \"1\"\n  records.0: \"\" => \"210.239.46.254\"\n  ttl:       \"\" => \"300\"\n  type:      \"\" => \"A\"\n  zone_id:   \"\" => \"ZNUSNIH3530EG\"\naws_route53_record.www: Creation complete\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n\nThe state of your infrastructure has been saved to the path\nbelow. This state is required to modify and destroy your\ninfrastructure, so keep it safe. To inspect the complete state\nuse the `terraform show` command.\n\nState path: terraform.tfstate\n\n\u3053\u306e\u6bb5\u968e\u3067\u51e6\u7406\u306f\u6210\u529f\u3057\u3001AWS Management Console \u306b\u3082\u8a2d\u5b9a\u304c\u53cd\u6620\u3057\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u51fa\u6765\u308b\u3002\n\n\u53cd\u6620\u60c5\u5831\u306e\u78ba\u8a8d\u306f\u3001terraform show \u304b\u3089\u3082\u78ba\u8a8d\u3059\u308b\u4e8b\u304c\u3067\u304d\u308b\u3002\n$ ./terraform show ./terraform.tfstate\naws_route53_record.www:\n  id = ZNUSNIH3530EG_www.over.moe_A\n  name = www.over.moe\n  records.# = 1\n  records.0 = 210.239.46.254\n  ttl = 300\n  type = A\n  zone_id = ZNUSNIH3530EG\naws_route53_zone.over_moe:\n  id = ZNUSNIH3530EG\n  name = over.moe\n  zone_id = ZNUSNIH3530EG\n\n\u306a\u304a\u3001\u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3057\u305f\u3044\u5834\u5408\u3001\u3053\u306e www.over.moe \u306e\u8a2d\u5b9a\u3092\u524a\u9664\u3057\u3066 plan \u2192 apply \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u66f4\u306b\u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u306f\u3001.tf \u30d5\u30a1\u30a4\u30eb\u306b\u30ea\u30bd\u30fc\u30b9\u306e\u8ffd\u52a0\u3092\u8a18\u8ff0\u3059\u308b\u3002\u4f8b\u3048\u3070\u3001game.over.moe \u3068\u3044\u3046\u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\naws_route53.tf\nresource \"aws_route53_zone\" \"over_moe\" {\n   name = \"over.moe\"\n}\n\nresource \"aws_route53_record\" \"www\" {\n   zone_id = \"ZNUSNIH3530EG\"\n   name = \"www.over.moe\"\n   type = \"A\"\n   ttl = \"300\"\n   records = [\"210.239.46.254\"]\n}\n\nresource \"aws_route53_record\" \"game\" {\n   zone_id = \"${aws_route53_zone.over_moe.zone_id}\"\n   name = \"game.over.moe\"\n   type = \"A\"\n   ttl = \"300\"\n   records = [\"210.239.46.254\"]\n}\n\n\n\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u306b\u306f\u3001terraform plan \u306e\u5f8c\u3001\u30a8\u30e9\u30fc\u304c\u7121\u3051\u308c\u3070 terraform apply \u3092\u5b9f\u884c\u3059\u308b\u3002\u5b9f\u884c\u3057\u3066\u66ab\u304f\u3059\u308b\u3068\u3001dig\u7b49\u3067\u540d\u524d\u7d75\u89e3\u6c7a\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n$ dig game.over.moe a +norec\n\n; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.23.rc1.el6_5.1 <<>> game.over.moe a +norec\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 24365\n;; flags: qr ra; QUERY: 1, ANSWER: 1, AUTHORITY: 4, ADDITIONAL: 4\n\n;; QUESTION SECTION:\n;game.over.moe.                 IN      A\n\n;; ANSWER SECTION:\ngame.over.moe.          297     IN      A       210.239.46.254\n\n\u306a\u304a\u3001\u30ec\u30b3\u30fc\u30c9\u306e\u524a\u9664\u30fb\u8ffd\u52a0\u3092\u4e00\u5ea6\u306b\u884c\u304a\u3046\u3068\u3059\u308b\u3068\u3001\u30a8\u30e9\u30fc Error: Request failed, got status code: 400. \u304c\u51fa\u3066\u3057\u307e\u3046\u5834\u5408\u304c\u3042\u308b\u3002 \u3053\u308c\u306f\u3001\u76f4\u524d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u7d42\u4e86\u3057\u306a\u3044\u3046\u3061\u306b\u6b21\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u304a\u3053\u306a\u3063\u305f\u305f\u3081\u3067\u3042\u308b\u3002\u73fe\u884c\u306e Terraform \u3067\u306f\u3001\u524a\u9664\u306f\u524a\u9664\u306e\u30bf\u30b9\u30af\u3001\u8ffd\u52a0\u306f\u8ffd\u52a0\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u5206\u3051\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u308f\u308c\u308b\u3002\n\n\u53c2\u8003\n\n\nAWS: aws_route53_record - Terraform\n\nhttp://www.terraform.io/docs/providers/aws/r/route53_record.html\n\n\n\nAWS: aws_route53_zone - Terraform\n\nhttp://www.terraform.io/docs/providers/aws/r/route53_zone.html\n\n\n\n## \u6982\u8981\nTerraform \u3092\u4f7f\u3044\u3001Route 53 \u306e DNS \u306e\u8a2d\u5b9a\u5909\u66f4\u3092\u8a66\u307f\u308b\u3002AWS Management Console \u3092\u4f7f\u7528\u305b\u305a\u3001\u30be\u30fc\u30f3\u60c5\u5831\u306e\u767b\u9332\u3084\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\uff0f\u524a\u9664\u3092\u884c\u3046\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\u3002\u306a\u304a\u3001\u4f5c\u696d\u306f\u5168\u3066 Terraform \u304b\u3089\u5b9f\u65bd\u3059\u308b\u3002\n\n## \u4e8b\u524d\u6e96\u5099\n\n* Terraform \u306e\u52d5\u4f5c\u74b0\u5883\n\n## \u30be\u30fc\u30f3\u60c5\u5831\u306e\u8ffd\u52a0\n\n\u540c\u4e00\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u8a8d\u8a3c\u60c5\u5831\u3092\u5b9a\u7fa9\u3057\u305f `aws_region.tf` \u3068\u3001\u30be\u30fc\u30f3\u60c5\u5831\u3092\u5b9a\u7fa9\u3059\u308b `aws_route53.tf` \u3092\u4f5c\u6210\u3059\u308b\u3002\u307e\u305f\u3001\u3053\u3053\u3067\u4f7f\u7528\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u540d\u306f `over.moe` \u3068\u3059\u308b\u304c\u3001\u4efb\u610f\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u3002\n\n```file:aws_region.tf\nprovider \"aws\" {\n    access_key = \"\u81ea\u5206\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\"\n    secret_key = \"\u81ea\u5206\u306e\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\"\n    region = \"us-east-1\"\n}\n```\n\n```file:aws_route53.tf\nresource \"aws_route53_zone\" \"over_moe\" {\n   name = \"over.moe\"\n}\n```\n\n\u3053\u308c\u306f\u3001`aws_route53_zone`\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u540d\u306b\u5bfe\u3057\u3001`over_moe`\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u540d\u79f0\u3092\u5272\u308a\u5f53\u3066\u3066\u3044\u308b\u3002`name` \u3067\u6307\u5b9a\u3059\u308b\u306e\u306f\u3001\u5b9f\u969b\u306b\u4f7f\u7528\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u540d `over.moe` \u3092\u6307\u5b9a\u3059\u308b\uff08\u4f8b\uff1a`example.jp`\u7b49\u3092\u3053\u3053\u3078\u66f8\u304f\u3053\u3068\uff09\u3002\n\n\u8a2d\u5b9a\u3092\u9069\u7528\u3059\u308b\u524d\u306b\u3001\u8a08\u753b `terrafrom plan` \u3092\u5b9f\u884c\u3057\u3001\u5909\u66f4\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```\n$ ./terraform plan\nRefreshing Terraform state prior to plan...\n\n\nThe Terraform execution plan has been generated and is shown below.\nResources are shown in alphabetical order for quick scanning. Green resources\nwill be created (or destroyed and then created if an existing resource\nexists), yellow resources are being changed in-place, and red resources\nwill be destroyed.\n\nNote: You didn't specify an \"-out\" parameter to save this plan, so when\n\"apply\" is called, Terraform can't guarantee this is what will execute.\n\n+ aws_route53_zone.over_moe\n    name:    \"\" => \"over.moe\"\n    zone_id: \"\" => \"<computed>\"\n```\n\n\u3053\u306e\u8868\u793a\u5185\u5bb9\u306f\u3001\u30ea\u30bd\u30fc\u30b9`aws_route53_zone.over_moe` \u3092 `+`(\u8ffd\u52a0)\u3059\u308b\u4e8b\u3092\u610f\u5473\u3057\u3066\u304a\u308a\u3001\u5b9f\u969b\u306b\u8ffd\u52a0\u3059\u308b\u30c9\u30e1\u30a4\u30f3\u540d\u306f `over.moe` \u3067\u3042\u308b\u3002\n\n\u8a2d\u5b9a\u3092\u53cd\u6620(apply)\u3059\u308b\u305f\u3081\u306b\u306f\u3001`terraform apply` \u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```\n$ ./terraform apply\naws_route53_zone.over_moe: Creating...\n  name: \"\" => \"over.moe\"\naws_route53_zone.over_moe: Creation complete\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n\nThe state of your infrastructure has been saved to the path\nbelow. This state is required to modify and destroy your\ninfrastructure, so keep it safe. To inspect the complete state\nuse the `terraform show` command.\n\nState path: terraform.tfstate\n```\n\n\u5b9f\u884c\u3059\u308b\u3068\u5341\u6570\u79d2\u7a0b\u5ea6\u306e\u5f85\u6a5f\u306e\u5f8c\u3001\u753b\u9762\u306b\u51e6\u7406\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u308b\u3002\u7d50\u679c\u306b `1 added` \u3068\u8868\u793a\u3055\u308c\u3066\u304a\u308a\u3001\u6b63\u5e38\u306b\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3002\n\n\u51e6\u7406\u7d50\u679c\u306e\u8a73\u7d30\u306f\u3001`terraform show` \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n```\n$ ./terraform show ./terraform.tfstate\naws_route53_zone.over_moe:\n  id = ZNUSNIH3530EG\n  name = over.moe\n  zone_id = ZNUSNIH3530EG\n```\n\n\u3053\u308c\u3067\u3001AWS Management Console \u3092\u4f7f\u308f\u305a\u306b\u30be\u30fc\u30f3\u60c5\u5831\u306e\u767b\u9332\u304c\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3002\u753b\u9762\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30c9\u30e1\u30a4\u30f3\u60c5\u5831\u304c\u78ba\u8a8d\u3067\u304d\u308b\u307b\u304b\u3001\u5bfe\u8c61\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u306e Comment \u306b\u306f `Managed by Terraform` \u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u3002\n\n![Route53\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u8ffd\u52a0\u3057\u305f\u76f4\u5f8c.png](https://qiita-image-store.s3.amazonaws.com/0/13002/1d7e4c7f-c5fd-e1ec-95cf-ea3ff82d7704.png)\n\n\u3042\u3068\u306f\u3001`NS` \u30ec\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3001\u5404\u30ec\u30b8\u30b9\u30c8\u30e9\u306e\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u66f4\u65b0\u3057\u3001\u30c9\u30e1\u30a4\u30f3\u306e\u8a2d\u5b9a\u3092\u53cd\u6620\u51fa\u6765\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n## \u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\n\n\u30be\u30fc\u30f3\u60c5\u5831\u306b\u5f15\u304d\u7d9a\u304d\u3001\u30ec\u30b3\u30fc\u30c9\u306e\u8ffd\u52a0\u3084\u5909\u66f4\u3082\u53ef\u80fd\u3067\u3042\u308b\u4e8b\u3092\u78ba\u8a8d\u3059\u308b\u3002\u30ec\u30b3\u30fc\u30c9\u7528\u306e\u30ea\u30bd\u30fc\u30b9\u3092\u3001\u5148\u306e `aws_route53.tf` \u306b\u8ffd\u52a0\u3059\u308b\u3002`www.over.moe` \u3092\u5b9a\u7fa9\u3059\u308b\u306b\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\n\n```\nresource \"aws_route53_zone\" \"over_moe\" {\n   name = \"over.moe\"\n}\n\nresource \"aws_route53_record\" \"www\" {\n   zone_id = \"ZNUSNIH3530EG\"\n   name = \"www.over.moe\"\n   type = \"A\"\n   ttl = \"300\"\n   records = [\"210.239.46.254\"]\n}\n```\n\n\u3053\u3053\u3067\u306f\u3001\u30ea\u30bd\u30fc\u30b9 `aws_route53_record` \u306b\u3001`www` \u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u540d\u3092\u5272\u308a\u5f53\u3066\u3066\u3044\u308b\u3002\u307e\u305f\u3001`zone_id` \u306f\u5148\u307b\u3069\u78ba\u8a8d\u3057\u305f\u30be\u30fc\u30f3 ID \u3067\u3042\u308b\u3002`name` \u306f\u3001`www.over.moe`\u3092\u3001`type` \u306f `A` (Address) \u30ec\u30b3\u30fc\u30c9\u3001`TTL` \u306f TTL \u79d2\u3001\u305d\u3057\u3066\u3001`records` \u306b IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n\u8a2d\u5b9a\u3092\u9069\u7528\u3059\u308b\u524d\u306b\u3001`terraform plan` \u3067\u5909\u66f4\u5185\u5bb9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```\n$ ./terraform plan\nRefreshing Terraform state prior to plan...\n\naws_route53_zone.over_moe: Refreshing state... (ID: ZNUSNIH3530EG)\n\nThe Terraform execution plan has been generated and is shown below.\nResources are shown in alphabetical order for quick scanning. Green resources\nwill be created (or destroyed and then created if an existing resource\nexists), yellow resources are being changed in-place, and red resources\nwill be destroyed.\n\nNote: You didn't specify an \"-out\" parameter to save this plan, so when\n\"apply\" is called, Terraform can't guarantee this is what will execute.\n\n+ aws_route53_record.www\n    name:      \"\" => \"www.over.moe\"\n    records.#: \"\" => \"1\"\n    records.0: \"\" => \"210.239.46.254\"\n    ttl:       \"\" => \"300\"\n    type:      \"\" => \"A\"\n    zone_id:   \"\" => \"ZNUSNIH3530EG\"\n```\n\n\u3053\u306e\u3088\u3046\u306b `www.over.moe` \u3068\u3044\u3046 A \u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u308b\u4e8b\u304c\u5206\u304b\u308b\u3002\u5185\u5bb9\u306b\u554f\u984c\u304c\u7121\u3051\u308c\u3070\u3001\u9069\u7528`apply`\u3092\u884c\u3046\u3002\n\n```\n$ ./terraform apply\naws_route53_zone.over_moe: Refreshing state... (ID: ZNUSNIH3530EG)\naws_route53_record.www: Creating...\n  name:      \"\" => \"www.over.moe\"\n  records.#: \"\" => \"1\"\n  records.0: \"\" => \"210.239.46.254\"\n  ttl:       \"\" => \"300\"\n  type:      \"\" => \"A\"\n  zone_id:   \"\" => \"ZNUSNIH3530EG\"\naws_route53_record.www: Creation complete\n\nApply complete! Resources: 1 added, 0 changed, 0 destroyed.\n\nThe state of your infrastructure has been saved to the path\nbelow. This state is required to modify and destroy your\ninfrastructure, so keep it safe. To inspect the complete state\nuse the `terraform show` command.\n\nState path: terraform.tfstate\n```\n\n\u3053\u306e\u6bb5\u968e\u3067\u51e6\u7406\u306f\u6210\u529f\u3057\u3001AWS Management Console \u306b\u3082\u8a2d\u5b9a\u304c\u53cd\u6620\u3057\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u51fa\u6765\u308b\u3002\n\n![www.moe\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b.png](https://qiita-image-store.s3.amazonaws.com/0/13002/792e5539-2608-5cd1-eb4a-38ad62591528.png)\n\n\u53cd\u6620\u60c5\u5831\u306e\u78ba\u8a8d\u306f\u3001`terraform show` \u304b\u3089\u3082\u78ba\u8a8d\u3059\u308b\u4e8b\u304c\u3067\u304d\u308b\u3002\n\n```\n$ ./terraform show ./terraform.tfstate\naws_route53_record.www:\n  id = ZNUSNIH3530EG_www.over.moe_A\n  name = www.over.moe\n  records.# = 1\n  records.0 = 210.239.46.254\n  ttl = 300\n  type = A\n  zone_id = ZNUSNIH3530EG\naws_route53_zone.over_moe:\n  id = ZNUSNIH3530EG\n  name = over.moe\n  zone_id = ZNUSNIH3530EG\n```\n\n\u306a\u304a\u3001\u30ec\u30b3\u30fc\u30c9\u3092\u524a\u9664\u3057\u305f\u3044\u5834\u5408\u3001\u3053\u306e `www.over.moe` \u306e\u8a2d\u5b9a\u3092\u524a\u9664\u3057\u3066 `plan` \u2192 `apply` \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\n\u66f4\u306b\u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u306f\u3001`.tf` \u30d5\u30a1\u30a4\u30eb\u306b\u30ea\u30bd\u30fc\u30b9\u306e\u8ffd\u52a0\u3092\u8a18\u8ff0\u3059\u308b\u3002\u4f8b\u3048\u3070\u3001`game.over.moe` \u3068\u3044\u3046\u30ec\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```file:aws_route53.tf\nresource \"aws_route53_zone\" \"over_moe\" {\n   name = \"over.moe\"\n}\n\nresource \"aws_route53_record\" \"www\" {\n   zone_id = \"ZNUSNIH3530EG\"\n   name = \"www.over.moe\"\n   type = \"A\"\n   ttl = \"300\"\n   records = [\"210.239.46.254\"]\n}\n\nresource \"aws_route53_record\" \"game\" {\n   zone_id = \"${aws_route53_zone.over_moe.zone_id}\"\n   name = \"game.over.moe\"\n   type = \"A\"\n   ttl = \"300\"\n   records = [\"210.239.46.254\"]\n}\n```\n\n\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u306b\u306f\u3001`terraform plan` \u306e\u5f8c\u3001\u30a8\u30e9\u30fc\u304c\u7121\u3051\u308c\u3070 `terraform apply` \u3092\u5b9f\u884c\u3059\u308b\u3002\u5b9f\u884c\u3057\u3066\u66ab\u304f\u3059\u308b\u3068\u3001`dig`\u7b49\u3067\u540d\u524d\u7d75\u89e3\u6c7a\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n```\n$ dig game.over.moe a +norec\n\n; <<>> DiG 9.8.2rc1-RedHat-9.8.2-0.23.rc1.el6_5.1 <<>> game.over.moe a +norec\n;; global options: +cmd\n;; Got answer:\n;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 24365\n;; flags: qr ra; QUERY: 1, ANSWER: 1, AUTHORITY: 4, ADDITIONAL: 4\n\n;; QUESTION SECTION:\n;game.over.moe.                 IN      A\n\n;; ANSWER SECTION:\ngame.over.moe.          297     IN      A       210.239.46.254\n```\n\n\u306a\u304a\u3001\u30ec\u30b3\u30fc\u30c9\u306e\u524a\u9664\u30fb\u8ffd\u52a0\u3092\u4e00\u5ea6\u306b\u884c\u304a\u3046\u3068\u3059\u308b\u3068\u3001\u30a8\u30e9\u30fc `Error: Request failed, got status code: 400.` \u304c\u51fa\u3066\u3057\u307e\u3046\u5834\u5408\u304c\u3042\u308b\u3002 \u3053\u308c\u306f\u3001\u76f4\u524d\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u7d42\u4e86\u3057\u306a\u3044\u3046\u3061\u306b\u6b21\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u304a\u3053\u306a\u3063\u305f\u305f\u3081\u3067\u3042\u308b\u3002\u73fe\u884c\u306e Terraform \u3067\u306f\u3001\u524a\u9664\u306f\u524a\u9664\u306e\u30bf\u30b9\u30af\u3001\u8ffd\u52a0\u306f\u8ffd\u52a0\u306e\u30bf\u30b9\u30af\u3068\u3057\u3066\u5206\u3051\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u308f\u308c\u308b\u3002\n\n## \u53c2\u8003\n\n* AWS: aws_route53_record - Terraform\n * http://www.terraform.io/docs/providers/aws/r/route53_record.html\n\n* AWS: aws_route53_zone - Terraform\n * http://www.terraform.io/docs/providers/aws/r/route53_zone.html\n"}