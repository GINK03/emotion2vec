{"tags": ["Android", "NDK", "Java"], "context": " More than 1 year has passed since last update.\n\nAndroid NDK\u3068\u306f\uff1f\n\nAndroid Native Development Kit\u306e\u7565\u79f0\u3067\u3042\u308b\u3002\nAndroid\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u90e8\u307e\u305f\u306f\u5168\u90e8\u3092C/C++\u8a00\u8a9e\u3067\u958b\u767a\u3059\u308b\u305f\u3081\u306e\u30ad\u30c3\u30c8\u3067\u3059\u3002 \n\n\n\u74b0\u5883\u69cb\u7bc9\n\n\u524d\u63d0\n\n\neclipse\u4e0a\u306b\u3001Android\u958b\u767a\u74b0\u5883\u69cb\u7bc9\u6e08\u307f(\u82f1\u8a9e\u7248)\n\n\n\u69cb\u7bc9\u624b\u9806\n\n\nAndroid NDK\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306f\u3001\u5b58\u5728\u3057\u3066\u3044\u306a\u3044\u3002\u4efb\u610f\u306e\u5834\u6240\u306b\u89e3\u51cd\u3059\u308b\u3060\u3051\neclipse\u3092\u8d77\u52d5\u3057\u3066\u3001menu Window \u2192 Preferences \u2192 Android \u2192 NDK \u2192 \u201cNDK Location\u201d \u306bNDK\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\n  \u30fb   \u4f8b\uff1a Path/to/android-ndk-r9d\n\u74b0\u5883\u5909\u6570\u306e PATH \u306b\u3082 NDK \u306e\u30d5\u30a9\u30eb\u30c0\u3092\u8ffd\u52a0\u3059\u308b\n\n\n\n\nhello world NDK\u3092\u4f5c\u6210\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\n\n\nNative Support\u8a2d\u5b9a\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30fb\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306e\u4e0a\u3067\u30de\u30a6\u30b9\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cAndroid Tools\u300d\u306e\u30b5\u30d6\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300cAdd Native Support\u300d\u3092\u9078\u629e\u3059\u308b\nLibrary Name\u306e\u30cd\u30fc\u30e0\u3092\u4fee\u6b63\u3059\u308b\u3068\u304b\u3001\u305d\u306e\u307e\u307e\u4fdd\u7559\u3059\u308b\u3068\u304b\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30fb\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u306e\u4e0b\u306b\u3001jni\u30d5\u30a9\u30eb\u30c0\u304c\u51fa\u3066\u3001helloWorldNDK.cpp\u3068Android.mk\u306e\u30d5\u30a1\u30a4\u30eb\u304c2\u3064\u3042\u308b\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u81ea\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u305fMainActivity.java\u3092\u4fee\u6b63\u3059\u308b\n\n\npublic class MainActivity extends Activity {\n\n    TextView text1;\n\n    static {\n        System.loadLibrary(\"helloWorldNDK\");\n    }\n\n    public native String msgFromNDK();\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        text1 = (TextView)findViewById(R.id.textView1);\n        text1.setText(msgFromNDK());\n\n        if (savedInstanceState == null) {\n            getFragmentManager().beginTransaction()\n                    .add(R.id.container, new PlaceholderFragment())\n                    .commit();\n        }\n    }\n\n...\u7701\u7565...\n\n\n\neclipse\u3067\u3001C/C++\u30d8\u30c3\u30c0\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\neclipse\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u306b\u3001\u300cExternal Tools\u300d\u2192 \u300cExternal Tools Configurations\u300d\u3092\u9078\u629e\u3059\u308b\n\u5de6\u4e0a\u306b\u3001\u65b0\u898f\u4f5c\u6210\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u300cNDK create\u300d\u3092\u4f5c\u6210\u3059\u308b\n\nMainActivity.java\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u3066\u30c6\u30ad\u30b9\u30c8\u30a8\u30c7\u30a3\u30bf\u30fc\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306e\u72b6\u614b\u3067\u3001\u300cNDK create\u300d\u3092\u5b9f\u884c\u3059\u308b\n\u300ccom_example_helloworldndk_MainActivity.h\u300d\u304c\u3001jni\u4e0b\u306b\u3001\u4f5c\u6210\u3055\u308c\u305f\n\n\nC++\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\n#include <jni.h>\n#include <assert.h>\n#include <com_example_helloworldndk_MainActivity.h>\n\nJNIEXPORT jstring JNICALL Java_com_example_helloworldndk_MainActivity_msgFromNDK\n(JNIEnv *env, jobject thiz) {\n    jstring jstr = env->NewStringUTF(\"hello world NDK!\");\n    assert(jstr);\n    return jstr;\n}\n\n\n\u5b9f\u884c\u7d50\u679c\n\n\n\u53c2\u7167\n\n\nhttp://note.chiebukuro.yahoo.co.jp/detail/n136598\n\n\u5927\u90e8\u5206\u306f\u3001\u3053\u306e\u6587\u66f8\u3092\u53c2\u7167\u3057\u305f\u3051\u3069\u3001\u3053\u306e\u6587\u66f8\u306e\u6700\u8fd1\u66f4\u65b0\u304c2013\u5e74\u306a\u306e\u3067\u3001\u53e4\u304f\u306a\u308b\n\n\nAndroid NDK\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n## Android NDK\u3068\u306f\uff1f\n* Android Native Development Kit\u306e\u7565\u79f0\u3067\u3042\u308b\u3002\n* Android\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4e00\u90e8\u307e\u305f\u306f\u5168\u90e8\u3092C/C++\u8a00\u8a9e\u3067\u958b\u767a\u3059\u308b\u305f\u3081\u306e\u30ad\u30c3\u30c8\u3067\u3059\u3002 \n\n## \u74b0\u5883\u69cb\u7bc9\n* \u524d\u63d0\n * eclipse\u4e0a\u306b\u3001Android\u958b\u767a\u74b0\u5883\u69cb\u7bc9\u6e08\u307f(\u82f1\u8a9e\u7248)\n* \u69cb\u7bc9\u624b\u9806\n * [Android NDK\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](http://developer.android.com/tools/sdk/ndk/index.html)\n * \u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u306f\u3001\u5b58\u5728\u3057\u3066\u3044\u306a\u3044\u3002\u4efb\u610f\u306e\u5834\u6240\u306b\u89e3\u51cd\u3059\u308b\u3060\u3051\n * eclipse\u3092\u8d77\u52d5\u3057\u3066\u3001menu Window \u2192 Preferences \u2192 Android \u2192 NDK \u2192 \u201cNDK Location\u201d \u306bNDK\u306e\u30d1\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\n *   \u30fb   \u4f8b\uff1a Path/to/android-ndk-r9d\n * \u74b0\u5883\u5909\u6570\u306e PATH \u306b\u3082 NDK \u306e\u30d5\u30a9\u30eb\u30c0\u3092\u8ffd\u52a0\u3059\u308b\n\n\n## hello world NDK\u3092\u4f5c\u6210\n#### \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n![hellondk_create_project.png](https://qiita-image-store.s3.amazonaws.com/0/13451/8440d3ab-6160-91cd-a498-5bde53b9d7ab.png)\n![hellondk_create_project_over.png](https://qiita-image-store.s3.amazonaws.com/0/13451/108be002-06e7-e82b-0a95-591906ab6bde.png)\n\n\n#### Native Support\u8a2d\u5b9a\n* \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30fb\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u306e\u4e0a\u3067\u30de\u30a6\u30b9\u3092\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cAndroid Tools\u300d\u306e\u30b5\u30d6\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300cAdd Native Support\u300d\u3092\u9078\u629e\u3059\u308b\n* Library Name\u306e\u30cd\u30fc\u30e0\u3092\u4fee\u6b63\u3059\u308b\u3068\u304b\u3001\u305d\u306e\u307e\u307e\u4fdd\u7559\u3059\u308b\u3068\u304b\n* \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30fb\u30a8\u30af\u30b9\u30d7\u30ed\u30fc\u30e9\u30fc\u306e\u4e0b\u306b\u3001jni\u30d5\u30a9\u30eb\u30c0\u304c\u51fa\u3066\u3001helloWorldNDK.cpp\u3068Android.mk\u306e\u30d5\u30a1\u30a4\u30eb\u304c2\u3064\u3042\u308b\n* \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u81ea\u52d5\u7684\u306b\u751f\u6210\u3055\u308c\u305fMainActivity.java\u3092\u4fee\u6b63\u3059\u308b\n\n```java\n\npublic class MainActivity extends Activity {\n\n\tTextView text1;\n\n\tstatic {\n        System.loadLibrary(\"helloWorldNDK\");\n    }\n\t \n\tpublic native String msgFromNDK();\n\t \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        text1 = (TextView)findViewById(R.id.textView1);\n        text1.setText(msgFromNDK());\n        \n        if (savedInstanceState == null) {\n            getFragmentManager().beginTransaction()\n                    .add(R.id.container, new PlaceholderFragment())\n                    .commit();\n        }\n    }\n\n...\u7701\u7565...\n\n```\n\n#### eclipse\u3067\u3001C/C++\u30d8\u30c3\u30c0\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n* eclipse\u306e\u30c4\u30fc\u30eb\u30d0\u30fc\u306b\u3001\u300cExternal Tools\u300d\u2192 \u300cExternal Tools Configurations\u300d\u3092\u9078\u629e\u3059\u308b\n* \u5de6\u4e0a\u306b\u3001\u65b0\u898f\u4f5c\u6210\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u300cNDK create\u300d\u3092\u4f5c\u6210\u3059\u308b\n* ![Externa_tools_new.png](https://qiita-image-store.s3.amazonaws.com/0/13451/77ca9ae7-a893-0c66-77c2-a7286614eec9.png)\n* MainActivity.java\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u3066\u30c6\u30ad\u30b9\u30c8\u30a8\u30c7\u30a3\u30bf\u30fc\u304c\u30a2\u30af\u30c6\u30a3\u30d6\u306e\u72b6\u614b\u3067\u3001\u300cNDK create\u300d\u3092\u5b9f\u884c\u3059\u308b\n* \u300ccom_example_helloworldndk_MainActivity.h\u300d\u304c\u3001jni\u4e0b\u306b\u3001\u4f5c\u6210\u3055\u308c\u305f\n\n#### C++\u306e\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\n```c++\n#include <jni.h>\n#include <assert.h>\n#include <com_example_helloworldndk_MainActivity.h>\n\nJNIEXPORT jstring JNICALL Java_com_example_helloworldndk_MainActivity_msgFromNDK\n(JNIEnv *env, jobject thiz) {\n    jstring jstr = env->NewStringUTF(\"hello world NDK!\");\n    assert(jstr);\n    return jstr;\n}\n```\n\n#### \u5b9f\u884c\u7d50\u679c\n![hellondk_result.png](https://qiita-image-store.s3.amazonaws.com/0/13451/e594d7f1-6312-c59c-0d9e-48b818be1ce3.png)\n\n\n## \u53c2\u7167\n* http://note.chiebukuro.yahoo.co.jp/detail/n136598\n * \u5927\u90e8\u5206\u306f\u3001\u3053\u306e\u6587\u66f8\u3092\u53c2\u7167\u3057\u305f\u3051\u3069\u3001\u3053\u306e\u6587\u66f8\u306e\u6700\u8fd1\u66f4\u65b0\u304c2013\u5e74\u306a\u306e\u3067\u3001\u53e4\u304f\u306a\u308b\n* [Android NDK\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](http://dench.flatlib.jp/opengl/androidsdk)\n"}