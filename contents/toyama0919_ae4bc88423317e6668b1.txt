{"tags": ["fluentd", "shadow-proxy", "Ruby"], "context": " More than 1 year has passed since last update.toyama0919/fluent-plugin-http_shadow\u3068\u3044\u3046Shadow Proxy\u3063\u307d\u3044\u3053\u3068\u3092\u7c21\u5358\u306b\u3084\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\nproduction\u74b0\u5883\u3067\u534a\u5e74\u304f\u3089\u3044\u52d5\u304b\u3057\u3066\u305f\u306e\u3067\u30e1\u30e2\u3057\u3068\u304d\u307e\u3059\u3002\n\n\u300cFluentd Meetup 2015 \u590f\u300d\u3067\u5b9f\u969b\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3092\u767a\u8868\u3057\u307e\u3057\u305f\u3002\n\nShadow Proxy\u30b5\u30fc\u30d0\u3068\u306f\nShadow Proxy\u30b5\u30fc\u30d0\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\n\u6c17\u8efd\u306aMySQL\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7 - \u307e\u3081\u7551\nGo\u8a00\u8a9e\u3092\u542b\u3080\u8907\u6570\u7a2e\u985e\u306e\u8a00\u8a9e\u306b\u3088\u308a\u5b9f\u88c5\u3055\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af - Qiita\n\n\u5b9f\u88c5\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\ncookpad/kage\nlestrrat/p5-Geest\nkentaro/delta\n\n\u672c\u756a\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u305d\u306e\u307e\u307e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306b\u3042\u308b\u30b5\u30fc\u30d0\u30fc\u306b\u8907\u88fd\u3057\u3066\u9001\u4fe1\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u898f\u6a21\u304c\u5927\u304d\u304f\u306a\u308c\u3070\u306a\u308b\u307b\u3069\u52b9\u679c\u3092\u767a\u63ee\u3057\u307e\u3059\u3002\n\u898f\u6a21\u304c\u5927\u304d\u304f\u306a\u308c\u3070\u306a\u308b\u307b\u3069\u30c6\u30b9\u30c8\u65b9\u6cd5\u3082\u8907\u96d1\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002\n\u73fe\u5728\u672c\u756a\u3067\u767a\u751f\u3057\u3066\u3044\u308brequest\u3092\u305d\u306e\u307e\u307e\u6301\u3063\u3066\u304f\u308b\u3053\u3068\u3067\u3001\u9650\u308a\u306a\u304f\u672c\u756a\u306b\u8fd1\u3044\u72b6\u614b\u3092\u518d\u73fe\u3067\u304d\u307e\u3059\u3002\nShadow Proxy\u4ee3\u8868\u7684\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u3057\u3066\u306f\u8ca0\u8377\u8a66\u9a13\u3084\u7d50\u5408\u8a66\u9a13\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3092\u3082\u3046\u5c11\u3057\u7c21\u5358\u304b\u3064\u5b89\u5168\u306b\u51fa\u6765\u306a\u3044\u304b\u3068\u8003\u3048\u3001fluentd\u3067\u5b9f\u73fe\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6982\u8981\nfluentd\u306b\u9001\u4fe1\u3055\u308c\u308b\u30ed\u30b0\u304b\u3089http request\u3092\u5fa9\u5143\u3057\u3066\u3044\u307e\u3059\u3002\n\nProxy\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u672c\u756a\u306eWEB\u30b5\u30fc\u30d0\u30fc\u306b\u306f\u5f71\u97ff\u306a\u304f\u5c0e\u5165\u51fa\u6765\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u4f8b(Apache\u7b49)\n<source>\n  type tail\n  format ltsv\n  time_key log_time\n  time_format %d/%b/%Y:%H:%M:%S %z\n  path /var/log/httpd/access_log\n  pos_file /var/log/td-agent/access.pos\n  tag http_shadow.example\n</source>\n\n\u30ed\u30b0\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u4f8b\n  {\n    \"host\": \"exsample.com\",\n    \"ip_address\": \"127.0.0.1\",\n    \"server\": \"10.0.0.11\",\n    \"remote\": \"-\",\n    \"time\": \"22/Dec/2014:03:20:26 +0900\",\n    \"method\": \"GET\",\n    \"path\": \"/hoge/?id=1\",\n    \"code\": \"200\",\n    \"size\": \"1578\",\n    \"referer\": \"http://exsample.com/other/\",\n    \"user_agent\": \"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\"\n  }\n\n\u8a2d\u5b9a\u306f\u3053\u3046\n<match http_shadow.example>\n  type http_shadow\n  host_hash { \n    \"www.example.com\": \"staging.example.com\", \n    \"api.example.com\": \"api-staging.example.com\", \n    \"blog.ipros.jp\": \"blog-staging.ipros.jp\"\n  }\n  host_key host\n  path_format ${path}\n  method_key method\n  header_hash { \"Referer\": \"${referer}\", \"User-Agent\": \"${user_agent}\" }\n  max_concurrency 10\n  flush_interval 10\n  timeout 10\n  rate 10\n</match>\n\n\n\nhost_hash\u3067Virtual Host\u306b\u5bfe\u5fdc\u3067\u304d\u307e\u3059\u3002\n\nHost\u540d\u306b\u5bfe\u5fdc\u3057\u305frequest\u5148\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\n\nrate\u304c10\u306e\u5834\u5408\u3001request\u304c10%\u306b\u5e0c\u91c8\u3055\u308c\u307e\u3059\u3002(\u6b8b\u308a\u306e90%\u306f\u7834\u68c4\u3055\u308c\u308b)\n\n\u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u74b0\u5883\u304c\u672c\u756a\u74b0\u5883\u3088\u308a\u3082\u4f4e\u3044\u30b9\u30da\u30c3\u30af\u306e\u5834\u5408\u306a\u3069\u306frate\u3092\u8abf\u7bc0\u3057\u307e\u3059\n\n\n\nheader_hash\u3067http header\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n${referer}\u306e\u3088\u3046\u306bplaceholder\u3067key\u3092\u6307\u5b9a\u3002\n\u56fa\u5b9a\u6587\u5b57\u5217\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\napache\u306e\u30ed\u30b0\u306e\u5834\u5408\u3001post\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u306a\u3044\u306e\u3067\u6b20\u640d\u3057\u307e\u3059\u3002\n\n\n\u8a2d\u5b9a\u4f8b2(\u30a2\u30d7\u30ea\u5185\u3067\u5c02\u7528\u306e\u30ed\u30b0\u3092\u4f5c\u308c\u308b\u5834\u5408\u3001Rails\u3068\u304b)\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ed\u30b0\u3092\u51fa\u3059\u5834\u5408\u3001\n  {\n    \"host\": \"example.com\",\n    \"ip_address\": \"127.0.0.1\",\n    \"log_time\":\"2015-05-18 16:38:14\",\n    \"method\": \"GET\",\n    \"path\": \"/hoge/\",\n    \"uuid\": \"e78407cf040f67d17361281906895ca1283929e33592f81cdbda54a4a24e8cf7\",\n    \"session_id\": \"42d0c906bfde8a30d323865d82a234abb4d13db80471d3b0bf4b7adc515d06da903f514289340ca17ba5cedde118868deebe53ef3986bfae8b591b9a614f7242\",\n    \"user_id\": 1\n    \"params\": {\"utf8\"=>\"\u2713\", \"client_id\"=>\"384809\"} ,\n    \"referer\": \"http://exsample.com/other/\",\n    \"user_agent\": \"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\"\n  }\n\n\u8a2d\u5b9a\u4f8b\n<match http_shadow.exsample>\n  type http_shadow\n  host_hash { \n    \"example.com\": \"staging.example.com\"\n  }\n  host_key host\n  path_format ${path}\n  method_key method\n  header_hash { \"Referer\": \"${referer}\", \"User-Agent\": \"${user_agent}\" }\n  cookie_hash {\"rails-app_session\": \"${session_id}\"}\n  params_key params\n  max_concurrency 10\n  flush_interval 10\n  timeout 10\n  rate 10\n</match>\n\n\n\ncookie_hash\u3067cookie\u3092\u9001\u4fe1\u3082\u9001\u4fe1\u53ef\u80fd\u3067\u3059\u3002\n\n\u8a2d\u5b9a\u65b9\u6cd5\u306fheader_hash\u3068\u540c\u3058\n\n\nget\u3084post\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306fparams_key\u306e\u4e2d\u306bhash\u3067\u683c\u7d0d\u3057\u3066\u304a\u3051\u3070\u30d1\u30e9\u30e1\u30fc\u30bf\u3092merge\u3057\u307e\u3059\u3002\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\n\n\u8a2d\u5b9a\u53ef\u80fd\u306a\u5024\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\n  config_param :host, :string, :default => nil\n  config_param :host_key, :string, :default => nil\n  config_param :host_hash, :hash, :default => nil\n  config_param :path_format, :string\n  config_param :method_key, :string, :default => nil\n  config_param :header_hash, :hash, :default => nil\n  config_param :cookie_hash, :hash, :default => nil\n  config_param :params_key, :string, :default => nil\n  config_param :max_concurrency, :integer, :default => 10\n  config_param :timeout, :integer, :default => 5\n  config_param :username, :string, :default => nil\n  config_param :password, :string, :default => nil\n  config_param :rate, :integer, :default => 100\n\n\n\u8a73\u7d30\n\n\n\n\u8a2d\u5b9a\u5024\n\u5185\u5bb9\n\n\n\n\nhost\nhttp\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308bhost\u540d\n\n\nhost_key\nVirtual Host\u306e\u969b\u306e\u63a5\u7d9aHost\u306e\u30ad\u30fc\n\n\nhost_hash\nVirtual Host\u306e\u969b\u306e\u63a5\u7d9aHost\u306e\u30da\u30a2\n\n\npath_format\nurl\u306epath\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3002${path}\u306a\u3069\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316\n\n\nmethod_key\nhttp method\u304c\u5b9a\u7fa9\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fGET\n\n\nheader_hash\nhttp header\u306e\u30da\u30a2\n\n\ncookie_hash\ncookie\u306e\u30da\u30a2\n\n\nparams_key\nparameter\u304c\u683c\u7d0d\u3055\u308c\u305fhash\u306ekey\n\n\nmax_concurrency\nhttp\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4e26\u5217\u6570\n\n\ntimeout\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593(\u79d2)\n\n\nusername\nBasic\u8a8d\u8a3c\u306e\u30e6\u30fc\u30b6\u30fc\u540d\n\n\npassword\nBasic\u8a8d\u8a3c\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\nrate\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5e0c\u91c8\u7387\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u304c100\u3067\u5168\u3066\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u305d\u306e\u307e\u307e\u9001\u4fe1\u3055\u308c\u308b\u300250\u306a\u3089\u3070\u534a\u5206\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u9001\u4fe1\u3055\u308c\u308b\u3002\n\n\n\n\n[toyama0919/fluent-plugin-http_shadow](https://github.com/toyama0919/fluent-plugin-http_shadow)\u3068\u3044\u3046Shadow Proxy\u3063\u307d\u3044\u3053\u3068\u3092\u7c21\u5358\u306b\u3084\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\nproduction\u74b0\u5883\u3067\u534a\u5e74\u304f\u3089\u3044\u52d5\u304b\u3057\u3066\u305f\u306e\u3067\u30e1\u30e2\u3057\u3068\u304d\u307e\u3059\u3002\n\n### \u300cFluentd Meetup 2015 \u590f\u300d\u3067[\u5b9f\u969b\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9](http://www.slideshare.net/toyama0919/fluentd-49628783)\u3092\u767a\u8868\u3057\u307e\u3057\u305f\u3002\n\n## Shadow Proxy\u30b5\u30fc\u30d0\u3068\u306f\n\nShadow Proxy\u30b5\u30fc\u30d0\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u304c\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\n* [\u6c17\u8efd\u306aMySQL\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7 - \u307e\u3081\u7551](http://d.conma.me/entry/2013/12/10/000046)\n* [Go\u8a00\u8a9e\u3092\u542b\u3080\u8907\u6570\u7a2e\u985e\u306e\u8a00\u8a9e\u306b\u3088\u308a\u5b9f\u88c5\u3055\u308c\u305f\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30d9\u30f3\u30c1\u30de\u30fc\u30af - Qiita](http://qiita.com/kentaro/items/17e2c334a902677af995)\n\n\u5b9f\u88c5\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u516c\u958b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n* [cookpad/kage](https://github.com/cookpad/kage)\n* [lestrrat/p5-Geest](https://github.com/lestrrat/p5-Geest)\n* [kentaro/delta](https://github.com/kentaro/delta)\n\n\u672c\u756a\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u305d\u306e\u307e\u307e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306b\u3042\u308b\u30b5\u30fc\u30d0\u30fc\u306b\u8907\u88fd\u3057\u3066\u9001\u4fe1\u3059\u308b\u306e\u3067\u3059\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u898f\u6a21\u304c\u5927\u304d\u304f\u306a\u308c\u3070\u306a\u308b\u307b\u3069\u52b9\u679c\u3092\u767a\u63ee\u3057\u307e\u3059\u3002\n\u898f\u6a21\u304c\u5927\u304d\u304f\u306a\u308c\u3070\u306a\u308b\u307b\u3069\u30c6\u30b9\u30c8\u65b9\u6cd5\u3082\u8907\u96d1\u306b\u306a\u3063\u3066\u304d\u307e\u3059\u3002\n\n**\u73fe\u5728\u672c\u756a\u3067\u767a\u751f\u3057\u3066\u3044\u308brequest\u3092\u305d\u306e\u307e\u307e\u6301\u3063\u3066\u304f\u308b\u3053\u3068\u3067\u3001\u9650\u308a\u306a\u304f\u672c\u756a\u306b\u8fd1\u3044\u72b6\u614b\u3092\u518d\u73fe\u3067\u304d\u307e\u3059\u3002**\nShadow Proxy\u4ee3\u8868\u7684\u306a\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u3068\u3057\u3066\u306f\u8ca0\u8377\u8a66\u9a13\u3084\u7d50\u5408\u8a66\u9a13\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u308c\u3092\u3082\u3046\u5c11\u3057\u7c21\u5358\u304b\u3064\u5b89\u5168\u306b\u51fa\u6765\u306a\u3044\u304b\u3068\u8003\u3048\u3001fluentd\u3067\u5b9f\u73fe\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u6982\u8981\n\nfluentd\u306b\u9001\u4fe1\u3055\u308c\u308b\u30ed\u30b0\u304b\u3089http request\u3092\u5fa9\u5143\u3057\u3066\u3044\u307e\u3059\u3002\n\n![fluent-plugin-http_shadow](http://i.gyazo.com/59d5fe9c4430325f6ad59c638971cc25.png \"fluent-plugin-http_shadow\")\n\nProxy\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u3001\u672c\u756a\u306eWEB\u30b5\u30fc\u30d0\u30fc\u306b\u306f\u5f71\u97ff\u306a\u304f\u5c0e\u5165\u51fa\u6765\u307e\u3059\u3002\n\n## \u8a2d\u5b9a\u4f8b(Apache\u7b49)\n\n```apache\n<source>\n  type tail\n  format ltsv\n  time_key log_time\n  time_format %d/%b/%Y:%H:%M:%S %z\n  path /var/log/httpd/access_log\n  pos_file /var/log/td-agent/access.pos\n  tag http_shadow.example\n</source>\n```\n\n\u30ed\u30b0\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u4f8b\n\n```\n  {\n    \"host\": \"exsample.com\",\n    \"ip_address\": \"127.0.0.1\",\n    \"server\": \"10.0.0.11\",\n    \"remote\": \"-\",\n    \"time\": \"22/Dec/2014:03:20:26 +0900\",\n    \"method\": \"GET\",\n    \"path\": \"/hoge/?id=1\",\n    \"code\": \"200\",\n    \"size\": \"1578\",\n    \"referer\": \"http://exsample.com/other/\",\n    \"user_agent\": \"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\"\n  }\n```\n\n\u8a2d\u5b9a\u306f\u3053\u3046\n\n```apache\n<match http_shadow.example>\n  type http_shadow\n  host_hash { \n    \"www.example.com\": \"staging.example.com\", \n    \"api.example.com\": \"api-staging.example.com\", \n    \"blog.ipros.jp\": \"blog-staging.ipros.jp\"\n  }\n  host_key host\n  path_format ${path}\n  method_key method\n  header_hash { \"Referer\": \"${referer}\", \"User-Agent\": \"${user_agent}\" }\n  max_concurrency 10\n  flush_interval 10\n  timeout 10\n  rate 10\n</match>\n```\n\n\n* host_hash\u3067Virtual Host\u306b\u5bfe\u5fdc\u3067\u304d\u307e\u3059\u3002\n  * Host\u540d\u306b\u5bfe\u5fdc\u3057\u305frequest\u5148\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n* rate\u304c10\u306e\u5834\u5408\u3001request\u304c10%\u306b\u5e0c\u91c8\u3055\u308c\u307e\u3059\u3002(\u6b8b\u308a\u306e90%\u306f\u7834\u68c4\u3055\u308c\u308b)\n  * \u30b9\u30c6\u30fc\u30b8\u30f3\u30b0\u74b0\u5883\u304c\u672c\u756a\u74b0\u5883\u3088\u308a\u3082\u4f4e\u3044\u30b9\u30da\u30c3\u30af\u306e\u5834\u5408\u306a\u3069\u306frate\u3092\u8abf\u7bc0\u3057\u307e\u3059\n\n* header_hash\u3067http header\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n  * ${referer}\u306e\u3088\u3046\u306bplaceholder\u3067key\u3092\u6307\u5b9a\u3002\n  * \u56fa\u5b9a\u6587\u5b57\u5217\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n* apache\u306e\u30ed\u30b0\u306e\u5834\u5408\u3001post\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u306a\u3044\u306e\u3067\u6b20\u640d\u3057\u307e\u3059\u3002\n\n## \u8a2d\u5b9a\u4f8b2(\u30a2\u30d7\u30ea\u5185\u3067\u5c02\u7528\u306e\u30ed\u30b0\u3092\u4f5c\u308c\u308b\u5834\u5408\u3001Rails\u3068\u304b)\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30ed\u30b0\u3092\u51fa\u3059\u5834\u5408\u3001\n\n```json\n  {\n    \"host\": \"example.com\",\n    \"ip_address\": \"127.0.0.1\",\n    \"log_time\":\"2015-05-18 16:38:14\",\n    \"method\": \"GET\",\n    \"path\": \"/hoge/\",\n    \"uuid\": \"e78407cf040f67d17361281906895ca1283929e33592f81cdbda54a4a24e8cf7\",\n    \"session_id\": \"42d0c906bfde8a30d323865d82a234abb4d13db80471d3b0bf4b7adc515d06da903f514289340ca17ba5cedde118868deebe53ef3986bfae8b591b9a614f7242\",\n    \"user_id\": 1\n    \"params\": {\"utf8\"=>\"\u2713\", \"client_id\"=>\"384809\"} ,\n    \"referer\": \"http://exsample.com/other/\",\n    \"user_agent\": \"Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko\"\n  }\n```\n\n\u8a2d\u5b9a\u4f8b\n\n```apache\n<match http_shadow.exsample>\n  type http_shadow\n  host_hash { \n    \"example.com\": \"staging.example.com\"\n  }\n  host_key host\n  path_format ${path}\n  method_key method\n  header_hash { \"Referer\": \"${referer}\", \"User-Agent\": \"${user_agent}\" }\n  cookie_hash {\"rails-app_session\": \"${session_id}\"}\n  params_key params\n  max_concurrency 10\n  flush_interval 10\n  timeout 10\n  rate 10\n</match>\n```\n\n* cookie_hash\u3067cookie\u3092\u9001\u4fe1\u3082\u9001\u4fe1\u53ef\u80fd\u3067\u3059\u3002\n  * \u8a2d\u5b9a\u65b9\u6cd5\u306fheader_hash\u3068\u540c\u3058\n\n* get\u3084post\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306fparams_key\u306e\u4e2d\u306bhash\u3067\u683c\u7d0d\u3057\u3066\u304a\u3051\u3070\u30d1\u30e9\u30e1\u30fc\u30bf\u3092merge\u3057\u307e\u3059\u3002\n\n\n## \u30d1\u30e9\u30e1\u30fc\u30bf\n\n### \u8a2d\u5b9a\u53ef\u80fd\u306a\u5024\u3068\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\n\n```ruby\n  config_param :host, :string, :default => nil\n  config_param :host_key, :string, :default => nil\n  config_param :host_hash, :hash, :default => nil\n  config_param :path_format, :string\n  config_param :method_key, :string, :default => nil\n  config_param :header_hash, :hash, :default => nil\n  config_param :cookie_hash, :hash, :default => nil\n  config_param :params_key, :string, :default => nil\n  config_param :max_concurrency, :integer, :default => 10\n  config_param :timeout, :integer, :default => 5\n  config_param :username, :string, :default => nil\n  config_param :password, :string, :default => nil\n  config_param :rate, :integer, :default => 100\n```\n\n\n### \u8a73\u7d30\n\n|\u8a2d\u5b9a\u5024|\u5185\u5bb9|\n|:--|:--|\n|           host|                                                                                       http\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308bhost\u540d|\n|       host_key|                                                                                     Virtual Host\u306e\u969b\u306e\u63a5\u7d9aHost\u306e\u30ad\u30fc|\n|      host_hash|                                                                                     Virtual Host\u306e\u969b\u306e\u63a5\u7d9aHost\u306e\u30da\u30a2|\n|    path_format|                                                                 url\u306epath\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3002${path}\u306a\u3069\u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u5316|\n|     method_key|                                                                         http method\u304c\u5b9a\u7fa9\u3055\u308c\u305f\u30ad\u30fc\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306fGET|\n|    header_hash|                                                                                                    http header\u306e\u30da\u30a2|\n|    cookie_hash|                                                                                                         cookie\u306e\u30da\u30a2|\n|     params_key|                                                                               parameter\u304c\u683c\u7d0d\u3055\u308c\u305fhash\u306ekey|\n|max_concurrency|                                                                                               http\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4e26\u5217\u6570|\n|        timeout|                                                                                                     \u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u6642\u9593(\u79d2)|\n|       username|                                                                                                Basic\u8a8d\u8a3c\u306e\u30e6\u30fc\u30b6\u30fc\u540d|\n|       password|                                                                                                Basic\u8a8d\u8a3c\u306e\u30d1\u30b9\u30ef\u30fc\u30c9|\n|           rate|HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5e0c\u91c8\u7387\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u304c100\u3067\u5168\u3066\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u305d\u306e\u307e\u307e\u9001\u4fe1\u3055\u308c\u308b\u300250\u306a\u3089\u3070\u534a\u5206\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u9001\u4fe1\u3055\u308c\u308b\u3002|\n"}