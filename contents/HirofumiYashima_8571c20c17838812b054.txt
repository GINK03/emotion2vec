{"tags": ["R", "\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790", "\u30c7\u30fc\u30bf\u53ef\u8996\u5316", "\u6a5f\u68b0\u5b66\u7fd2", "MachineLearning"], "context": " More than 1 year has passed since last update.\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u7d50\u679c \uff08Gephi \u51fa\u529b\u30b0\u30e9\u30d5\uff09\n\n\u3010\u30ce\u30fc\u30c9\u306e\u5927\u304d\u3055\u3011 \u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306elift\u5024\u306e\u5927\u304d\u3044\u307b\u3069\uff08\u30ce\u30fc\u30c9\u3082\uff09\u5927\u304d\u3044\n\n\u3010\u30ce\u30fc\u30c9\u306e\u8272\u3011\uff08\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306e\uff09support\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u3001\u7dd1\u8272\u306e\u6210\u5206\u304c\u6fc3\u3044               \uff08\u203bRGB\u5024\u306e\u3046\u3061\u3001\u8d64\u3068\u9752\u306e\u8981\u7d20\u306f\u5168\u30ce\u30fc\u30c9\u540c\u3058\u5024\u3092\u8a2d\u5b9a\uff09\n\n\n\n\n\uff11. \u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u3092\u5b9f\u884c\n\n\u95a2\u6570\uff1a arules \n\u95a2\u6570\uff1a arulesViz\n\n\n\n\u30c7\u30fc\u30bf\uff1a\u7d44\u307f\u8fbc\u307f\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8 Income \u3092\u7528\u3044\u308b\n\nIncome\u3000\uff1a\u7c73\u56fd\u30b5\u30f3\u30d5\u30e9\u30f3\u30b7\u30b9\u30b3\u30fbBay\u30a8\u30ea\u30a2 9,409\u4eba\u306e\u500b\u4eba\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08\u5c5e\u6027\uff09\u30fb\u53ce\u5165\u30a2\u30f3\u30b1\u30fc\u30c8\u8abf\u67fb\u7d50\u679c\ninstall.packages(\"arules\")\ninstall.packages(\"arulesViz\")\n\nlibrary(arules)\nlibrary(arulesViz)\n\ndata(Income)\nprint(Income)\n\ntransactions in sparse format with\n 6876 transactions (rows) and\n 50 items (columns)\n\npar(mar=c(4.5, 2, 1, 2), cex=0.65, cex.axis=0.7)\nitemFrequencyPlot(Income, cex=0.8, col=\"lightblue\")\n\n\n\n\u4e0a\u8a18\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u3092\u5b9f\u884c\nIncome.ap <- apriori(Income)\n\n\n8664\u4ef6\u306e\u76f8\u95a2\u30eb\u30fc\u30eb\u304c\u5f97\u3089\u308c\u305f\nparameter specification:\n confidence minval smax arem  aval originalSupport support minlen maxlen target   ext\n        0.8    0.1    1 none FALSE            TRUE     0.1      1     10  rules FALSE\n\nalgorithmic control:\n filter tree heap memopt load sort verbose\n    0.1 TRUE TRUE  FALSE TRUE    2    TRUE\n\napriori - find association rules with the apriori algorithm\nversion 4.21 (2004.05.09)        (c) 1996-2004   Christian Borgelt\nset item appearances ...[0 item(s)] done [0.00s].\nset transactions ...[50 item(s), 6876 transaction(s)] done [0.00s].\nsorting and recoding items ... [30 item(s)] done [0.00s].\ncreating transaction tree ... done [0.00s].\nchecking subsets of size 1 2 3 4 5 6 7 8 done [0.04s].\nwriting ... [8664 rule(s)] done [0.00s].\ncreating S4 object  ... done [0.00s].\n\n\n{\u7d50\u679c\u90e8} \u304c\u3001\u5e74\u53ce4\u4e07\u30c9\u30eb\u4ee5\u4e0a\u306e\u6761\u4ef6\u306b\u5408\u81f4\u3059\u308b\u4e16\u5e2f\u306e {\u6761\u4ef6\u90e8} \u3092\u30ea\u30b9\u30c8\u8868\u793a\n\n\u203b lift\u5024 \uff1a\uff12\u4ee5\u4e0a\u306e\u6761\u4ef6\u3082\u4ed8\u52a0  \u203b\u4e0a\u4f4d10\u4ef6\u629c\u7c8b\nIncome.rules <- subset(Income.ap, subset=rhs %in% \"income=$40,000+\" & lift>2)\nprint(inspect(SORT(Income.rules)[1:10]))\n\n   lhs                                     rhs                 support confidence     lift\n1  {occupation=professional/managerial,                                                   \n    householder status=own}             => {income=$40,000+} 0.1384526  0.8074640 2.138722\n2  {occupation=professional/managerial,                                                   \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1336533  0.8075571 2.138969\n3  {dual incomes=yes,                                                                     \n    householder status=own}             => {income=$40,000+} 0.1260908  0.8156162 2.160315\n4  {marital status=married,                                                               \n    occupation=professional/managerial,                                                   \n    language in home=english}           => {income=$40,000+} 0.1233275  0.8030303 2.126979\n5  {marital status=married,                                                               \n    dual incomes=yes,                                                                     \n    householder status=own}             => {income=$40,000+} 0.1227458  0.8194175 2.170383\n6  {education=college graduate,                                                           \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1212914  0.8011527 2.122005\n7  {dual incomes=yes,                                                                     \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1207097  0.8258706 2.187476\n8  {occupation=professional/managerial,                                                   \n    householder status=own,                                                               \n    type of home=house}                 => {income=$40,000+} 0.1192554  0.8175474 2.165430\n9  {marital status=married,                                                               \n    dual incomes=yes,                                                                     \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1175102  0.8304214 2.199529\n10 {occupation=professional/managerial,                                                   \n    householder status=own,                                                               \n    type of home=house,                                                                   \n    language in home=english}           => {income=$40,000+} 0.1148924  0.8178054 2.166113\nNULL\nWarning message:\nIn .local(x, ...) : arules: SORT is deprecated use sort instead.\n\n\nsupport\u5024\u3092\u5897\u3084\u3057\u3001\u691c\u51fa\u3055\u308c\u308b\u76f8\u95a2\u30eb\u30fc\u30eb\u306e\u6570\u3092\u7d5e\u308b\n\n714\u4ef6\u306e\u30eb\u30fc\u30eb\u3092\u5f97\u305f\n\nIncome.ap <- apriori(Income, parameter=list(support=0.2))\n\n\n\nparameter specification:\n confidence minval smax arem  aval originalSupport support minlen maxlen target   ext\n        0.8    0.1    1 none FALSE            TRUE     0.2      1     10  rules FALSE\n\nalgorithmic control:\n filter tree heap memopt load sort verbose\n    0.1 TRUE TRUE  FALSE TRUE    2    TRUE\n\napriori - find association rules with the apriori algorithm\nversion 4.21 (2004.05.09)        (c) 1996-2004   Christian Borgelt\nset item appearances ...[0 item(s)] done [0.00s].\nset transactions ...[50 item(s), 6876 transaction(s)] done [0.00s].\nsorting and recoding items ... [26 item(s)] done [0.00s].\ncreating transaction tree ... done [0.00s].\nchecking subsets of size 1 2 3 4 5 6 done [0.01s].\nwriting ... [714 rule(s)] done [0.00s].\ncreating S4 object  ... done [0.00s].\n\n\n\u30eb\u30fc\u30eb\u306e\u6761\u4ef6\u90e8 {lhs} \u21d2 \u7d50\u679c\u90e8 {rhs} \u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\u306b\u51fa\u529b\n\n\u307e\u305a\u306f\u3001R\u3000\u3067\uff01\n\n\u95a2\u6570 plot.rules() \u3092\u4f7f\u7528\n\ncontrol\u5f15\u6570\u306b{igraph}\u5074\u306e\u5f15\u6570\u3092\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u5165\u308c\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u308b\n\ncontrol\u5f15\u6570 >>> layout\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5024\u306f\u3001default\u3067\"layout.fruchterman.reingold\")\nplot(Income.ap,\u3000method=\"graph\",\u3000control=list(type=\"items\",cex=0.6),margin=-0.1)\n\n\n\nsupport\u5024\u3092\u5897\u3084\u3057\u3001\u691c\u51fa\u3055\u308c\u308b\u76f8\u95a2\u30eb\u30fc\u30eb\u306e\u6570\u3092\u7d5e\u308b\n\n134\u4ef6\u306e\u30eb\u30fc\u30eb\u3092\u5f97\u305f\nIncome.ap <- apriori(Income, parameter=list(support=0.3))\n\n\nparameter specification:\n confidence minval smax arem  aval originalSupport support minlen maxlen target   ext\n        0.8    0.1    1 none FALSE            TRUE     0.3      1     10  rules FALSE\n\nalgorithmic control:\n filter tree heap memopt load sort verbose\n    0.1 TRUE TRUE  FALSE TRUE    2    TRUE\n\napriori - find association rules with the apriori algorithm\nversion 4.21 (2004.05.09)        (c) 1996-2004   Christian Borgelt\nset item appearances ...[0 item(s)] done [0.00s].\nset transactions ...[50 item(s), 6876 transaction(s)] done [0.00s].\nsorting and recoding items ... [22 item(s)] done [0.00s].\ncreating transaction tree ... done [0.00s].\nchecking subsets of size 1 2 3 4 done [0.00s].\nwriting ... [134 rule(s)] done [0.00s].\ncreating S4 object  ... done [0.00s].\nWarning messages:\n1:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n2:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n3:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n4:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n\nplot(Income.ap,\u3000method=\"graph\",\u3000control=list(type=\"items\",cex=1.2),margin=-0.1)\n\n\n\n\u3044\u3088\u3044\u3088\u3001Gephi \u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\u3092\u51fa\u529b\u3059\u308b\u6e96\u5099\u958b\u59cb\n\narules \u578b\u30c7\u30fc\u30bf\u3092 Gephi \u304c\u8aad\u307f\u8fbc\u307f\u53ef\u80fd\u306aGEXF\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\nclass(Income.ap) #arules\u578b\n\n[1] \"rules\"\nattr(,\"package\")\n[1] \"arules\"\nWarning messages:\n1:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n2:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n3:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n4:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n\n\narules \u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e00\u65e6\u3001data.frame\u578b\u306b\u5909\u63db\u3059\u308b\ndata.ap.dataframe <- as(Income.ap, \"data.frame\")\nclass(data.ap.dataframe) # data.frame\u578b\n\n[1] \"data.frame\"\n\n\ndata.frame\u578b\u306b\u5909\u63db\u3057\u305f\u7d50\u679c\u3092\u78ba\u8a8d\nprint(head(data.ap.dataframe), 5)\n\n                                                               rules   support confidence      lift\n1                                   {} => {language in home=english} 0.9128854  0.9128854 1.0000000\n2 {occupation=professional/managerial} => {language in home=english} 0.3234439  0.9532790 1.0442483\n3              {years in bay area=1-9} => {language in home=english} 0.3115183  0.8814815 0.9655993\n4                   {householder status=own} => {type of home=house} 0.3161722  0.8413313 1.4102862\n5             {householder status=own} => {language in home=english} 0.3547120  0.9438854 1.0339583\n6                    {income=$40,000+} => {language in home=english} 0.3550029  0.9402928 1.0300228\n\n\nrule\u306e\u5185\u5bb9\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\u306enode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\nrules <- data.ap.dataframe$rules\nclass(rules) \n\n[1] \"factor\"\n\n\n\u30c7\u30fc\u30bf\u578b\u3092character\u578b\u306b\u578b\u5909\u63db\nrules <- as.character(rules)\nclass(rules) \n\n[1] \"character\"\n\n\n\u6761\u4ef6\u90e8 {lhs} \u3068 \u7d50\u679c\u90e8 {rhs} \u3092\u5207\u308a\u51fa\u3057\u3066\u3001\u5225\u3005\u306e\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3059\u308b\n\n\u203b \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\uff08\u6709\u5411\u30b0\u30e9\u30d5\uff09\u306e\u77e2\u5370\u3067\u7d50\u3070\u308c\u308b\u4e21\u7aef\u306e\u30ce\u30fc\u30c9\u306b\u3059\u308b\n\n\u3010\u65b9\u6cd5\u3011\u300c=>\u300d\u306e\u5de6\u9805\uff08\u5de6\u30aa\u30da\u30e9\u30f3\u30c9\uff09\u3068\u53f3\u9805\uff08\u53f3\u30aa\u30da\u30e9\u30f3\u30c9\uff09\u3067\u30c7\u30fc\u30bf\u5217\u5206\u5272\nrules.list <- strsplit(rules, \"=>\")\nclass(rules.list)\n\n[1] \"list\"\n\nprint(head(rules.list, 10))\n\n[[1]]\n[1] \"{} \"                         \" {language in home=english}\"\n\n[[2]]\n[1] \"{occupation=professional/managerial} \" \" {language in home=english}\"          \n\n[[3]]\n[1] \"{years in bay area=1-9} \"    \" {language in home=english}\"\n\n[[4]]\n[1] \"{householder status=own} \" \" {type of home=house}\"    \n\n[[5]]\n[1] \"{householder status=own} \"   \" {language in home=english}\"\n\n[[6]]\n[1] \"{income=$40,000+} \"          \" {language in home=english}\"\n\n[[7]]\n[1] \"{number of children=1+} \"         \" {education=no college graduate}\"\n\n[[8]]\n[1] \"{number of children=1+} \"    \" {language in home=english}\"\n\n[[9]]\n[1] \"{marital status=married} \"   \" {language in home=english}\"\n\n[[10]]\n[1] \"{marital status=single} \" \" {age=14-34}\"            \n\n# for\u6587\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u306e\u4e2d\u3067\u3001\u6761\u4ef6\u90e8 {lhs} \u3068 \u7d50\u679c\u90e8\u3000{rhs} \u3092\u5206\u3051\u3066\u683c\u7d0d\u3059\u308b\u7bb1\u3092\u4f5c\u6210\n### \u3000\u203b\u521d\u671f\u5024\u3068\u3057\u3066\u5024\u306f0\uff08\u30bc\u30ed\uff09\u3092\u8a2d\u5b9a\nnode.labels <- as.data.frame(matrix(0, nrow=length(rules.list),ncol=2))\n\nfor(i in 1:length(rules.list)){\n     node.labels[i,1] <-  rules.list[[i]][1]\n     node.labels[i,2] <-  rules.list[[i]][2]\n}\n\nprint(node.labels[1:10,]); print(paste(\"\u30eb\u30fc\u30eb\u306e\u4ef6\u6570\uff1a  \", nrow(node.labels), \"\u4ef6\", sep=\"\"))\n\n\n                                      V1                               V2\n1                                    {}        {language in home=english}\n2  {occupation=professional/managerial}        {language in home=english}\n3               {years in bay area=1-9}        {language in home=english}\n4              {householder status=own}              {type of home=house}\n5              {householder status=own}        {language in home=english}\n6                     {income=$40,000+}        {language in home=english}\n7               {number of children=1+}   {education=no college graduate}\n8               {number of children=1+}        {language in home=english}\n9              {marital status=married}        {language in home=english}\n10              {marital status=single}                       {age=14-34}\n\n[1] \"\u30eb\u30fc\u30eb\u306e\u4ef6\u6570\uff1a  134\u4ef6\"\n\n\nnode\u306eID\u756a\u53f7\u3092\u63a1\u756a\u3059\u308b\n\n\uff08\u203b GEXF \u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u306e\u969b\u306b\u5fc5\u8981\u3068\u306a\u308b\uff09\n#ID \u683c\u7d0d\u5148\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5ba3\u8a00\uff08\u521d\u671f\u5024: 0\uff09\nnodes.lhs <- rep(0, as.numeric(nrow(node.labels)))\nnodes.rhs <- rep(0, as.numeric(nrow(node.labels)))\n\nfor(i in 1:nrow(node.labels)){\n     nodes.lhs[i]  <- node.labels[i,1]\n     nodes.rhs[i]  <- node.labels[i,2]\n}\n\n#\u5168\u3066\u306e\u3000\u6761\u4ef6\u90e8 {lhs} / \u7d50\u679c\u90e8 {rhs} \u3092\u96c6\u3081\u3066\u3001\u91cd\u8907\u5024\u3092\u6392\u9664\uff08\u4e00\u610f\u96c6\u5408\u3092\u3064\u304f\u308b\uff09\n\nnodes.unique <- unique(c(nodes.lhs, nodes.rhs))\n\nprint(nodes.unique)\n\n [1] \"{} \"                                                                               \n  [2] \"{occupation=professional/managerial} \"                                             \n  [3] \"{years in bay area=1-9} \"                                                          \n  [4] \"{householder status=own} \"                                                         \n  [5] \"{income=$40,000+} \"                                                                \n  [6] \"{number of children=1+} \"                                                          \n  [7] \"{marital status=married} \"                                                         \n  [8] \"{marital status=single} \"                                                          \n  [9] \"{age=35+} \"                                                                        \n [10] \"{householder status=rent} \"                                                        \n [11] \"{sex=male} \"                                                                       \n [12] \"{sex=female} \"                                                                     \n [13] \"{age=14-34} \"                                                                      \n [14] \"{type of home=house} \"                                                             \n [15] \"{dual incomes=not married} \"                                                       \n [16] \"{number of children=0} \"                                                           \n [17] \"{income=$0-$40,000} \"                                                              \n [18] \"{years in bay area=10+} \"                                                          \n [19] \"{ethnic classification=white} \"                                                    \n [20] \"{number in household=1} \"                                                          \n [21] \"{education=no college graduate} \"                                                  \n [22] \"{marital status=single,age=14-34} \"                                                \n [23] \"{marital status=single,dual incomes=not married} \"        \n\n          \uff08\u4e2d\u7565\uff09\n\n  [97] \"{education=no college graduate,number in household=1,number of children=0} \"       \n [98] \"{education=no college graduate,number of children=0,language in home=english} \"    \n [99] \"{years in bay area=10+,number in household=1,ethnic classification=white} \"        \n[100] \"{education=no college graduate,number in household=1,ethnic classification=white} \"\n[101] \" {language in home=english}\"                                                       \n[102] \" {type of home=house}\"                                                             \n[103] \" {education=no college graduate}\"                                                  \n[104] \" {age=14-34}\"                                                                      \n[105] \" {dual incomes=not married}\"                                                       \n[106] \" {income=$0-$40,000}\"                                                              \n[107] \" {number in household=1}\"                                                          \n[108] \" {marital status=single}\"                                                          \n[109] \" {ethnic classification=white}\"                                                    \n[110] \" {number of children=0}\"   \n\n\nnodes.ID.list <- data.frame(ID.NO=as.numeric(1:length(nodes.unique)), label=nodes.unique) \nprint(nodes.ID.list[1:10, ])\n\n   ID.NO                                 label\n1      1                                   {} \n2      2 {occupation=professional/managerial} \n3      3              {years in bay area=1-9} \n4      4             {householder status=own} \n5      5                    {income=$40,000+} \n6      6              {number of children=1+} \n7      7             {marital status=married} \n8      8              {marital status=single} \n9      9                            {age=35+} \n10    10            {householder status=rent} \n\n\n\u30ce\u30fc\u30c9\u9593\u306e \u6761\u4ef6\u90e8 {lhs} \u21d2 \u7d50\u679c\u90e8 {rhs} \u30da\u30a2\u3092\u3001\u30ce\u30fc\u30c9ID\u756a\u53f7\u306e\u6570\u5b57\u30da\u30a2\u306e\u884c\u5217\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u3059\u308b\nnodes.lhs <- data.frame(dummy=rep(\"X\",length(nodes.lhs)), label=as.vector(nodes.lhs))\nnodes.rhs <- data.frame(dummy=rep(\"Y\",length(nodes.rhs)), label=as.vector(nodes.rhs))\n\nlhs.nodes <- merge(nodes.lhs, nodes.ID.list, by=\"label\")\nrhs.nodes <- merge(nodes.rhs, nodes.ID.list, by=\"label\")\n\nprint(lhs.nodes[1:10, ])\n\n                                                                 label dummy ID.NO\n1                                                                  {}      X     1\n2       {age=14-34,dual incomes=not married,language in home=english}      X    79\n3       {age=14-34,dual incomes=not married,language in home=english}      X    79\n4       {age=14-34,dual incomes=not married,language in home=english}      X    79\n5                                {age=14-34,dual incomes=not married}      X    24\n6                                {age=14-34,dual incomes=not married}      X    24\n7                                {age=14-34,dual incomes=not married}      X    24\n8                                {age=14-34,dual incomes=not married}      X    24\n9  {age=14-34,education=no college graduate,dual incomes=not married}      X    81\n10                          {age=14-34,education=no college graduate}      X    45\n\nprint(rhs.nodes[1:10, ])\n\n                         label dummy ID.NO\n1                  {age=14-34}     Y   104\n2                  {age=14-34}     Y   104\n3                  {age=14-34}     Y   104\n4                  {age=14-34}     Y   104\n5                  {age=14-34}     Y   104\n6                  {age=14-34}     Y   104\n7   {dual incomes=not married}     Y   105\n8   {dual incomes=not married}     Y   105\n9   {dual incomes=not married}     Y   105\n10  {dual incomes=not married}     Y   105\n\n\ndummy\u5217\u3092\u5207\u308a\u843d\u3068\u3057\u3066\u3001\u30ce\u30fc\u30c9\u3092\u3064\u306a\u3050\u30a8\u30c3\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n\n\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d \uff1a relations \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\nlhs.nodes <- lhs.nodes[,-2]\nrhs.nodes <- rhs.nodes[,-2]\n\nrelations <- cbind(lhs.nodes, rhs.nodes)\n\nprint(relations[1:10, ])\n\n                                                                 label ID.NO                       label ID.NO\n1                                                                  {}      1                 {age=14-34}   104\n2       {age=14-34,dual incomes=not married,language in home=english}     79                 {age=14-34}   104\n3       {age=14-34,dual incomes=not married,language in home=english}     79                 {age=14-34}   104\n4       {age=14-34,dual incomes=not married,language in home=english}     79                 {age=14-34}   104\n5                                {age=14-34,dual incomes=not married}     24                 {age=14-34}   104\n6                                {age=14-34,dual incomes=not married}     24                 {age=14-34}   104\n7                                {age=14-34,dual incomes=not married}     24  {dual incomes=not married}   105\n8                                {age=14-34,dual incomes=not married}     24  {dual incomes=not married}   105\n9  {age=14-34,education=no college graduate,dual incomes=not married}     81  {dual incomes=not married}   105\n10                          {age=14-34,education=no college graduate}     45  {dual incomes=not married}   105\n\n\n\u6761\u4ef6\u90e8 {lhs} \u3068 \u7d50\u679c\u90e8 {rhs}  \u306eID.NO\u306e\u307f\u53d6\u308a\u51fa\u3059\nrelations <- relations[ , c(-1,-3)]\nprint(relations[1:10, ]) \n\n   ID.NO ID.NO.1\n1      1     104\n2     79     104\n3     79     104\n4     79     104\n5     24     104\n6     24     104\n7     24     105\n8     24     105\n9     81     105\n10    45     105\n\n\nedge\u306e\u91cd\u307f\u884c\u5217\u306e\u751f\u6210\n\n\u91cd\u307f\uff08weight\uff09\uff1a\u3000arules()\u95a2\u6570 \u8fd4\u308a\u5024\u306e confidence \u5024 \u3068\u5b9a\u7fa9\n\nsupport \u5024\u306f\u5c0f\u6570\u70b92\u6841\u306b\u4e38\u3081\u308b\nconfidence <- data.ap.dataframe$confidence\nweight <- round(confidence, 2)\nprint(weight[1:10])\n\n [1] 0.91 0.32 0.31 0.32 0.35 0.36 0.31 0.33 0.36 0.37\n\n\nGephi \u30b0\u30e9\u30d5\u306e\u30ce\u30fc\u30c9\u306e\u914d\u8272\u3092 support\u5024\u3000/ \u30b5\u30a4\u30ba\u3092 lift\u5024 \u306b\u3059\u308b\n\nsupport\u5024 \u53ca\u3073 lift\u5024\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u683c\u7d0d\n\nsupport <- data.ap.dataframe$support\nsupport <- round(support*10000,1)\n\n# \u914d\u8272\u306fRGB256\u8272\u306e1\uff5e256\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n# lift\u5024\u306e\u5927\u304d\u3055\u9806\u756a\u3092\u6574\u6570\u306b\u5909\u63db\u3057\u3066\u3001\u305d\u306e\u6574\u6570\u3092\u914d\u8272\u756a\u53f7\u306b\u5229\u7528\u3059\u308b\n\n# \u4ee5\u4e0b\u3001?write.gexf \u306e\u30de\u30cb\u30e5\u30a2\u30eb\u8a18\u8f09\u5185\u5bb9\n# \"the color should be specified through a data-frame with columns r (red), g (green), b (blue) with integers between 0 and 256 and a last column with alpha values as a float between 0.0 and 1.0.\"\"\n\nlift <- as.integer(order(data.ap.dataframe$lift)*1.5)\n\n#\u5de6\u30ab\u30e9\u30e0\u304b\u3089\u9806\u306b\u3001RGB\u30ab\u30e9\u30fc\u756a\u53f7\u306eR, G, B\u6fc3\u5ea6\u5024 \u203b\u5024\u306f0\uff5e256\u307e\u3067\u306e\u6574\u6570\u5024\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\ncolour <- data.frame(as.integer(100), as.integer(lift), as.integer(200),as.integer(1.0)) \ncolnames(colour) <-c(\"r\",\"g\",\"b\",\"a\")\n\nprint(colour)\n\n\n      r   g   b a\n1   100  12 200 1\n2   100 172 200 1\n3   100   4 200 1\n4   100 169 200 1\n5   100  52 200 1\n6   100 159 200 1\n7   100  96 200 1\n8   100 142 200 1\n9   100  90 200 1\n10  100  19 200 1\n11  100  60 200 1\n12  100 181 200 1\n13  100 165 200 1\n14  100  85 200 1\n15  100 117 200 1\n16  100  37 200 1\n17  100  28 200 1\n18  100  25 200 1\n19  100 102 200 1\n20  100  43 200 1\n21  100 111 200 1\n22  100  31 200 1\n23  100  73 200 1\n24  100   1 200 1\n25  100  30 200 1\n\n    \uff08\u4e2d\u7565\uff09\n\n120 100 162 200 1\n121 100  15 200 1\n122 100  46 200 1\n123 100  51 200 1\n124 100 156 200 1\n125 100  16 200 1\n126 100  45 200 1\n127 100  57 200 1\n128 100  58 200 1\n129 100  61 200 1\n130 100 154 200 1\n131 100 160 200 1\n132 100 163 200 1\n133 100  48 200 1\n134 100 157 200 1\n\n\n{rgexf}  \u30d1\u30c3\u30b1\u30fc\u30b8 \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 \u53ca\u3073 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ninstall.packages(\"rgexf\")\nlibrary(rgexf)\n\n\nGEXF \u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b\n\nwrite.gexf() \u95a2\u6570\n\n\u3010\u5f15\u6570\u3011\n\n\nnodes \uff1a \u30ce\u30fc\u30c9ID\u756a\u53f7\u30c7\u30fc\u30bf\n\nedges \uff1a \u30a8\u30c3\u30b8\u30c7\u30fc\u30bf\uff08 \u6761\u4ef6\u90e8 \u21d2 \u7d50\u679c\u90e8 \u306e\u95a2\u4fc2 \uff09\n\nedgesWeights \uff1a \u30a8\u30c3\u30b8\u306e\u91cd\u307f\uff08  support_  \u5024 \uff09\n\nnodesVizAtt\u3000: \u30ce\u30fc\u30c9\u306e\u30b0\u30e9\u30d5\u8868\u793a\u8a2d\u5b9a\uff08\u203b\u30b5\u30a4\u30ba\u3001\u8272\u3001\u4f4d\u7f6eetc.\u3092 list \u3067\u6e21\u3059\uff09\n\nsize : \u30ce\u30fc\u30c9\u306e\u30b5\u30a4\u30ba\n\ncolor : \u30ce\u30fc\u30c9\u306e\u914d\u8272\n\ngexf.file <- write.gexf(\nnodes=nodes.ID.list, edges=relations, edgesWeight=confidence, \nnodesVizAtt = list(size=support, color=colour)\n)\n\n\ngexf.file <- write.gexf(nodes=nodes.ID.list, edges=relations, edgesWeight=support)\n\nprint(gexf.file)\n\n## <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n## <gexf xmlns=\"http://www.gexf.net/1.2draft\" xmlns:viz=\"http://www.gexf.net/1.1draft/viz\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd\" version=\"1.2\">\n##   <meta lastmodifieddate=\"2014-06-12\">\n##     <creator>NodosChile</creator>\n##     <description>A graph file writing in R using \"rgexf\"</description>\n##     <keywords>gexf graph, NodosChile, R, rgexf</keywords>\n##   </meta>\n##   <graph mode=\"static\" defaultedgetype=\"undirected\">\n##     <nodes>\n##       <node id=\"1\" label=\"{} \">\n##         <viz:color r=\"100\" g=\"12\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"9129\"/>\n##       </node>\n##       <node id=\"2\" label=\"{occupation=professional/managerial} \">\n##         <viz:color r=\"100\" g=\"172\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3234\"/>\n##       </node>\n##       <node id=\"3\" label=\"{years in bay area=1-9} \">\n##         <viz:color r=\"100\" g=\"4\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3115\"/>\n##       </node>\n##       <node id=\"4\" label=\"{householder status=own} \">\n##         <viz:color r=\"100\" g=\"169\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3162\"/>\n##       </node>\n##       <node id=\"5\" label=\"{income=$40,000+} \">\n##         <viz:color r=\"100\" g=\"52\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3547\"/>\n##       </node>\n##       <node id=\"6\" label=\"{number of children=1+} \">\n##         <viz:color r=\"100\" g=\"159\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3550\"/>\n##       </node>\n##       <node id=\"7\" label=\"{marital status=married} \">\n##         <viz:color r=\"100\" g=\"96\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3064\"/>\n##       </node>\n##       <node id=\"8\" label=\"{marital status=single} \">\n##         <viz:color r=\"100\" g=\"142\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3328\"/>\n##       </node>\n##       <node id=\"9\" label=\"{age=35+} \">\n##         <viz:color r=\"100\" g=\"90\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3552\"/>\n##       </node>\n##       <node id=\"10\" label=\"{householder status=rent} \">\n##         <viz:color r=\"100\" g=\"19\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"11\" label=\"{sex=male} \">\n##         <viz:color r=\"100\" g=\"60\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4091\"/>\n##       </node>\n##       <node id=\"12\" label=\"{sex=female} \">\n##         <viz:color r=\"100\" g=\"181\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3303\"/>\n##       </node>\n##       <node id=\"13\" label=\"{age=14-34} \">\n##         <viz:color r=\"100\" g=\"165\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"14\" label=\"{type of home=house} \">\n##         <viz:color r=\"100\" g=\"85\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3880\"/>\n##       </node>\n##       <node id=\"15\" label=\"{dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"117\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3413\"/>\n##       </node>\n##       <node id=\"16\" label=\"{number of children=0} \">\n##         <viz:color r=\"100\" g=\"37\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3838\"/>\n##       </node>\n##       <node id=\"17\" label=\"{income=$0-$40,000} \">\n##         <viz:color r=\"100\" g=\"28\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4007\"/>\n##       </node>\n##       <node id=\"18\" label=\"{years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"25\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5122\"/>\n##       </node>\n##       <node id=\"19\" label=\"{ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"102\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5249\"/>\n##       </node>\n##       <node id=\"20\" label=\"{number in household=1} \">\n##         <viz:color r=\"100\" g=\"43\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5446\"/>\n##       </node>\n##       <node id=\"21\" label=\"{education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"111\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5426\"/>\n##       </node>\n##       <node id=\"22\" label=\"{marital status=single,age=14-34} \">\n##         <viz:color r=\"100\" g=\"31\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5532\"/>\n##       </node>\n##       <node id=\"23\" label=\"{marital status=single,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"73\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5801\"/>\n##       </node>\n##       <node id=\"24\" label=\"{age=14-34,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"1\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5019\"/>\n##       </node>\n##       <node id=\"25\" label=\"{income=$0-$40,000,marital status=single} \">\n##         <viz:color r=\"100\" g=\"30\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5579\"/>\n##       </node>\n##       <node id=\"26\" label=\"{marital status=single,language in home=english} \">\n##         <viz:color r=\"100\" g=\"79\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6014\"/>\n##       </node>\n##       <node id=\"27\" label=\"{marital status=single,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"24\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6595\"/>\n##       </node>\n##       <node id=\"28\" label=\"{age=35+,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"91\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6495\"/>\n##       </node>\n##       <node id=\"29\" label=\"{age=35+,language in home=english} \">\n##         <viz:color r=\"100\" g=\"87\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6344\"/>\n##       </node>\n##       <node id=\"30\" label=\"{age=35+,number in household=1} \">\n##         <viz:color r=\"100\" g=\"147\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"31\" label=\"{number in household=1,householder status=rent} \">\n##         <viz:color r=\"100\" g=\"13\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"32\" label=\"{householder status=rent,language in home=english} \">\n##         <viz:color r=\"100\" g=\"112\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"33\" label=\"{sex=female,type of home=house} \">\n##         <viz:color r=\"100\" g=\"138\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"34\" label=\"{sex=female,number of children=0} \">\n##         <viz:color r=\"100\" g=\"120\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"35\" label=\"{income=$0-$40,000,sex=female} \">\n##         <viz:color r=\"100\" g=\"70\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"36\" label=\"{sex=female,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"135\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"37\" label=\"{sex=female,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"27\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3303\"/>\n##       </node>\n##       <node id=\"38\" label=\"{sex=female,number in household=1} \">\n##         <viz:color r=\"100\" g=\"97\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3303\"/>\n##       </node>\n##       <node id=\"39\" label=\"{sex=female,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"106\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3207\"/>\n##       </node>\n##       <node id=\"40\" label=\"{income=$0-$40,000,age=14-34} \">\n##         <viz:color r=\"100\" g=\"141\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"41\" label=\"{age=14-34,number of children=0} \">\n##         <viz:color r=\"100\" g=\"94\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"42\" label=\"{age=14-34,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"39\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3121\"/>\n##       </node>\n##       <node id=\"43\" label=\"{age=14-34,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"151\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3121\"/>\n##       </node>\n##       <node id=\"44\" label=\"{age=14-34,number in household=1} \">\n##         <viz:color r=\"100\" g=\"180\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3024\"/>\n##       </node>\n##       <node id=\"45\" label=\"{age=14-34,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"34\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3191\"/>\n##       </node>\n##       <node id=\"46\" label=\"{years in bay area=10+,type of home=house} \">\n##         <viz:color r=\"100\" g=\"115\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3191\"/>\n##       </node>\n##       <node id=\"47\" label=\"{type of home=house,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"75\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3122\"/>\n##       </node>\n##       <node id=\"48\" label=\"{number in household=1,type of home=house} \">\n##         <viz:color r=\"100\" g=\"184\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3019\"/>\n##       </node>\n##       <node id=\"49\" label=\"{education=no college graduate,type of home=house} \">\n##         <viz:color r=\"100\" g=\"196\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3200\"/>\n##       </node>\n##       <node id=\"50\" label=\"{dual incomes=not married,number of children=0} \">\n##         <viz:color r=\"100\" g=\"67\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3460\"/>\n##       </node>\n##       <node id=\"51\" label=\"{dual incomes=not married,number in household=1} \">\n##         <viz:color r=\"100\" g=\"21\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3742\"/>\n##       </node>\n##       <node id=\"52\" label=\"{income=$0-$40,000,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"42\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3534\"/>\n##       </node>\n##       <node id=\"53\" label=\"{education=no college graduate,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"175\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3703\"/>\n##       </node>\n##       <node id=\"54\" label=\"{years in bay area=10+,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"72\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3579\"/>\n##       </node>\n##       <node id=\"55\" label=\"{dual incomes=not married,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"9\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3579\"/>\n##       </node>\n##       <node id=\"56\" label=\"{income=$0-$40,000,number of children=0} \">\n##         <viz:color r=\"100\" g=\"130\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3576\"/>\n##       </node>\n##       <node id=\"57\" label=\"{years in bay area=10+,number of children=0} \">\n##         <viz:color r=\"100\" g=\"123\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3932\"/>\n##       </node>\n##       <node id=\"58\" label=\"{number of children=0,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"7\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3088\"/>\n##       </node>\n##       <node id=\"59\" label=\"{number in household=1,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"78\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"60\" label=\"{education=no college graduate,number of children=0} \">\n##         <viz:color r=\"100\" g=\"145\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3877\"/>\n##       </node>\n##       <node id=\"61\" label=\"{number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"100\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3050\"/>\n##       </node>\n##       <node id=\"62\" label=\"{number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"189\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3474\"/>\n##       </node>\n##       <node id=\"63\" label=\"{number in household=1,language in home=english} \">\n##         <viz:color r=\"100\" g=\"66\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3472\"/>\n##       </node>\n##       <node id=\"64\" label=\"{income=$0-$40,000,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"3\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4074\"/>\n##       </node>\n##       <node id=\"65\" label=\"{income=$0-$40,000,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"93\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4042\"/>\n##       </node>\n##       <node id=\"66\" label=\"{income=$0-$40,000,number in household=1} \">\n##         <viz:color r=\"100\" g=\"114\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4011\"/>\n##       </node>\n##       <node id=\"67\" label=\"{income=$0-$40,000,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"150\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3285\"/>\n##       </node>\n##       <node id=\"68\" label=\"{years in bay area=10+,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"139\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3834\"/>\n##       </node>\n##       <node id=\"69\" label=\"{years in bay area=10+,number in household=1} \">\n##         <viz:color r=\"100\" g=\"40\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3466\"/>\n##       </node>\n##       <node id=\"70\" label=\"{education=no college graduate,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"144\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3466\"/>\n##       </node>\n##       <node id=\"71\" label=\"{education=no college graduate,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"127\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3682\"/>\n##       </node>\n##       <node id=\"72\" label=\"{education=no college graduate,number in household=1} \">\n##         <viz:color r=\"100\" g=\"76\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3726\"/>\n##       </node>\n##       <node id=\"73\" label=\"{marital status=single,age=14-34,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"99\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3726\"/>\n##       </node>\n##       <node id=\"74\" label=\"{income=$0-$40,000,marital status=single,age=14-34} \">\n##         <viz:color r=\"100\" g=\"201\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4177\"/>\n##       </node>\n##       <node id=\"75\" label=\"{income=$0-$40,000,marital status=single,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"148\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3450\"/>\n##       </node>\n##       <node id=\"76\" label=\"{income=$0-$40,000,age=14-34,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"192\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3749\"/>\n##       </node>\n##       <node id=\"77\" label=\"{marital status=single,age=14-34,language in home=english} \">\n##         <viz:color r=\"100\" g=\"199\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3931\"/>\n##       </node>\n##       <node id=\"78\" label=\"{marital status=single,dual incomes=not married,language in home=english} \">\n##         <viz:color r=\"100\" g=\"63\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4059\"/>\n##       </node>\n##       <node id=\"79\" label=\"{age=14-34,dual incomes=not married,language in home=english} \">\n##         <viz:color r=\"100\" g=\"108\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3403\"/>\n##       </node>\n##       <node id=\"80\" label=\"{income=$0-$40,000,age=14-34,language in home=english} \">\n##         <viz:color r=\"100\" g=\"171\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3550\"/>\n##       </node>\n##       <node id=\"81\" label=\"{age=14-34,education=no college graduate,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"36\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3447\"/>\n##       </node>\n##       <node id=\"82\" label=\"{income=$0-$40,000,age=14-34,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"10\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3650\"/>\n##       </node>\n##       <node id=\"83\" label=\"{dual incomes=not married,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"84\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4149\"/>\n##       </node>\n##       <node id=\"84\" label=\"{dual incomes=not married,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"174\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4149\"/>\n##       </node>\n##       <node id=\"85\" label=\"{dual incomes=not married,number in household=1,language in home=english} \">\n##         <viz:color r=\"100\" g=\"22\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4475\"/>\n##       </node>\n##       <node id=\"86\" label=\"{income=$0-$40,000,dual incomes=not married,number in household=1} \">\n##         <viz:color r=\"100\" g=\"88\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3431\"/>\n##       </node>\n##       <node id=\"87\" label=\"{income=$0-$40,000,education=no college graduate,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"136\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5214\"/>\n##       </node>\n##       <node id=\"88\" label=\"{education=no college graduate,dual incomes=not married,language in home=english} \">\n##         <viz:color r=\"100\" g=\"64\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5214\"/>\n##       </node>\n##       <node id=\"89\" label=\"{income=$0-$40,000,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"69\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5214\"/>\n##       </node>\n##       <node id=\"90\" label=\"{income=$0-$40,000,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"129\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3685\"/>\n##       </node>\n##       <node id=\"91\" label=\"{income=$0-$40,000,number in household=1,language in home=english} \">\n##         <viz:color r=\"100\" g=\"198\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3253\"/>\n##       </node>\n##       <node id=\"92\" label=\"{years in bay area=10+,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"103\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3559\"/>\n##       </node>\n##       <node id=\"93\" label=\"{years in bay area=10+,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"177\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3806\"/>\n##       </node>\n##       <node id=\"94\" label=\"{number in household=1,number of children=0,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"118\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3972\"/>\n##       </node>\n##       <node id=\"95\" label=\"{number of children=0,ethnic classification=white,language in home=english} \">\n##         <viz:color r=\"100\" g=\"33\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4455\"/>\n##       </node>\n##       <node id=\"96\" label=\"{number in household=1,ethnic classification=white,language in home=english} \">\n##         <viz:color r=\"100\" g=\"121\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4238\"/>\n##       </node>\n##       <node id=\"97\" label=\"{education=no college graduate,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"187\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4170\"/>\n##       </node>\n##       <node id=\"98\" label=\"{education=no college graduate,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"133\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4359\"/>\n##       </node>\n##       <node id=\"99\" label=\"{years in bay area=10+,number in household=1,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"186\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4942\"/>\n##       </node>\n##       <node id=\"100\" label=\"{education=no college graduate,number in household=1,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"190\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4385\"/>\n##       </node>\n##       <node id=\"101\" label=\" {language in home=english}\">\n##         <viz:color r=\"100\" g=\"18\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4203\"/>\n##       </node>\n##       <node id=\"102\" label=\" {type of home=house}\">\n##         <viz:color r=\"100\" g=\"55\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"103\" label=\" {education=no college graduate}\">\n##         <viz:color r=\"100\" g=\"132\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"104\" label=\" {age=14-34}\">\n##         <viz:color r=\"100\" g=\"166\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"105\" label=\" {dual incomes=not married}\">\n##         <viz:color r=\"100\" g=\"81\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"106\" label=\" {income=$0-$40,000}\">\n##         <viz:color r=\"100\" g=\"183\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"107\" label=\" {number in household=1}\">\n##         <viz:color r=\"100\" g=\"49\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"108\" label=\" {marital status=single}\">\n##         <viz:color r=\"100\" g=\"153\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"109\" label=\" {ethnic classification=white}\">\n##         <viz:color r=\"100\" g=\"109\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"110\" label=\" {number of children=0}\">\n##         <viz:color r=\"100\" g=\"124\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3201\"/>\n##       </node>\n##     </nodes>\n##     <edges>\n##       <edge id=\"0\" source=\"1\" target=\"104\" weight=\"0.9129\"/>\n##       <edge id=\"1\" source=\"79\" target=\"104\" weight=\"0.9533\"/>\n##       <edge id=\"2\" source=\"79\" target=\"104\" weight=\"0.8815\"/>\n##       <edge id=\"3\" source=\"79\" target=\"104\" weight=\"0.8413\"/>\n##       <edge id=\"4\" source=\"24\" target=\"104\" weight=\"0.9439\"/>\n##       <edge id=\"5\" source=\"24\" target=\"104\" weight=\"0.9403\"/>\n##       <edge id=\"6\" source=\"24\" target=\"105\" weight=\"0.8104\"/>\n##       <edge id=\"7\" source=\"24\" target=\"105\" weight=\"0.88\"/>\n##       <edge id=\"8\" source=\"81\" target=\"105\" weight=\"0.9208\"/>\n##       <edge id=\"9\" source=\"45\" target=\"105\" weight=\"0.8934\"/>\n##       <edge id=\"10\" source=\"43\" target=\"105\" weight=\"1\"/>\n##       <edge id=\"11\" source=\"44\" target=\"105\" weight=\"0.8073\"/>\n##       <edge id=\"12\" source=\"41\" target=\"105\" weight=\"0.8916\"/>\n##       <edge id=\"13\" source=\"42\" target=\"105\" weight=\"0.9358\"/>\n##       <edge id=\"14\" source=\"13\" target=\"105\" weight=\"0.8144\"/>\n##       <edge id=\"15\" source=\"28\" target=\"103\" weight=\"0.9157\"/>\n##       <edge id=\"16\" source=\"29\" target=\"103\" weight=\"0.8983\"/>\n##       <edge id=\"17\" source=\"30\" target=\"103\" weight=\"0.9247\"/>\n##       <edge id=\"18\" source=\"9\" target=\"103\" weight=\"0.8966\"/>\n##       <edge id=\"19\" source=\"55\" target=\"103\" weight=\"0.913\"/>\n##       <edge id=\"20\" source=\"85\" target=\"103\" weight=\"0.9069\"/>\n##       <edge id=\"21\" source=\"83\" target=\"103\" weight=\"0.8896\"/>\n##       <edge id=\"22\" source=\"51\" target=\"103\" weight=\"0.9329\"/>\n##       <edge id=\"23\" source=\"51\" target=\"109\" weight=\"0.8063\"/>\n##       <edge id=\"24\" source=\"84\" target=\"106\" weight=\"0.8963\"/>\n##       <edge id=\"25\" source=\"50\" target=\"106\" weight=\"0.93\"/>\n##       <edge id=\"26\" source=\"50\" target=\"106\" weight=\"0.9848\"/>\n##       <edge id=\"27\" source=\"15\" target=\"106\" weight=\"0.9388\"/>\n##       <edge id=\"28\" source=\"88\" target=\"106\" weight=\"0.8996\"/>\n##       <edge id=\"29\" source=\"53\" target=\"106\" weight=\"1\"/>\n##       <edge id=\"30\" source=\"53\" target=\"106\" weight=\"0.8934\"/>\n##       <edge id=\"31\" source=\"71\" target=\"106\" weight=\"0.8313\"/>\n##       <edge id=\"32\" source=\"100\" target=\"101\" weight=\"0.8209\"/>\n##       <edge id=\"33\" source=\"97\" target=\"101\" weight=\"0.9084\"/>\n##       <edge id=\"34\" source=\"72\" target=\"101\" weight=\"0.8866\"/>\n##       <edge id=\"35\" source=\"98\" target=\"101\" weight=\"0.8884\"/>\n##       <edge id=\"36\" source=\"60\" target=\"101\" weight=\"0.8073\"/>\n##       <edge id=\"37\" source=\"60\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"38\" source=\"49\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"39\" source=\"70\" target=\"101\" weight=\"0.8916\"/>\n##       <edge id=\"40\" source=\"21\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"41\" source=\"19\" target=\"101\" weight=\"0.9889\"/>\n##       <edge id=\"42\" source=\"4\" target=\"101\" weight=\"0.8043\"/>\n##       <edge id=\"43\" source=\"4\" target=\"101\" weight=\"0.9519\"/>\n##       <edge id=\"44\" source=\"32\" target=\"101\" weight=\"0.9348\"/>\n##       <edge id=\"45\" source=\"10\" target=\"101\" weight=\"0.8314\"/>\n##       <edge id=\"46\" source=\"10\" target=\"101\" weight=\"0.9238\"/>\n##       <edge id=\"47\" source=\"76\" target=\"101\" weight=\"0.9398\"/>\n##       <edge id=\"48\" source=\"76\" target=\"101\" weight=\"0.9106\"/>\n##       <edge id=\"49\" source=\"82\" target=\"101\" weight=\"0.9344\"/>\n##       <edge id=\"50\" source=\"80\" target=\"101\" weight=\"0.987\"/>\n##       <edge id=\"51\" source=\"80\" target=\"101\" weight=\"0.9463\"/>\n##       <edge id=\"52\" source=\"40\" target=\"101\" weight=\"0.9139\"/>\n##       <edge id=\"53\" source=\"40\" target=\"101\" weight=\"0.8141\"/>\n##       <edge id=\"54\" source=\"40\" target=\"101\" weight=\"0.8198\"/>\n##       <edge id=\"55\" source=\"86\" target=\"101\" weight=\"0.8134\"/>\n##       <edge id=\"56\" source=\"52\" target=\"101\" weight=\"0.8945\"/>\n##       <edge id=\"57\" source=\"52\" target=\"101\" weight=\"0.9183\"/>\n##       <edge id=\"58\" source=\"87\" target=\"101\" weight=\"0.8354\"/>\n##       <edge id=\"59\" source=\"67\" target=\"101\" weight=\"0.8881\"/>\n##       <edge id=\"60\" source=\"65\" target=\"101\" weight=\"0.9181\"/>\n##       <edge id=\"61\" source=\"74\" target=\"101\" weight=\"0.9811\"/>\n##       <edge id=\"62\" source=\"75\" target=\"101\" weight=\"0.9277\"/>\n##       <edge id=\"63\" source=\"25\" target=\"101\" weight=\"0.8875\"/>\n##       <edge id=\"64\" source=\"25\" target=\"101\" weight=\"0.9263\"/>\n##       <edge id=\"65\" source=\"91\" target=\"101\" weight=\"0.9875\"/>\n##       <edge id=\"66\" source=\"89\" target=\"101\" weight=\"0.9488\"/>\n##       <edge id=\"67\" source=\"66\" target=\"101\" weight=\"0.8987\"/>\n##       <edge id=\"68\" source=\"90\" target=\"101\" weight=\"0.8729\"/>\n##       <edge id=\"69\" source=\"56\" target=\"101\" weight=\"0.8237\"/>\n##       <edge id=\"70\" source=\"56\" target=\"101\" weight=\"0.9275\"/>\n##       <edge id=\"71\" source=\"35\" target=\"101\" weight=\"0.8062\"/>\n##       <edge id=\"72\" source=\"64\" target=\"101\" weight=\"0.8217\"/>\n##       <edge id=\"73\" source=\"64\" target=\"101\" weight=\"0.9037\"/>\n##       <edge id=\"74\" source=\"17\" target=\"101\" weight=\"0.9212\"/>\n##       <edge id=\"75\" source=\"17\" target=\"101\" weight=\"0.9813\"/>\n##       <edge id=\"76\" source=\"5\" target=\"101\" weight=\"0.9343\"/>\n##       <edge id=\"77\" source=\"7\" target=\"101\" weight=\"0.8951\"/>\n##       <edge id=\"78\" source=\"73\" target=\"101\" weight=\"0.8844\"/>\n##       <edge id=\"79\" source=\"73\" target=\"101\" weight=\"0.9225\"/>\n##       <edge id=\"80\" source=\"77\" target=\"101\" weight=\"0.8903\"/>\n##       <edge id=\"81\" source=\"22\" target=\"101\" weight=\"0.9429\"/>\n##       <edge id=\"82\" source=\"22\" target=\"101\" weight=\"0.915\"/>\n##       <edge id=\"83\" source=\"22\" target=\"101\" weight=\"0.8296\"/>\n##       <edge id=\"84\" source=\"78\" target=\"101\" weight=\"0.9869\"/>\n##       <edge id=\"85\" source=\"23\" target=\"101\" weight=\"0.8603\"/>\n##       <edge id=\"86\" source=\"23\" target=\"101\" weight=\"0.9424\"/>\n##       <edge id=\"87\" source=\"23\" target=\"101\" weight=\"0.8987\"/>\n##       <edge id=\"88\" source=\"27\" target=\"101\" weight=\"0.8027\"/>\n##       <edge id=\"89\" source=\"26\" target=\"101\" weight=\"0.9241\"/>\n##       <edge id=\"90\" source=\"26\" target=\"101\" weight=\"0.8422\"/>\n##       <edge id=\"91\" source=\"8\" target=\"101\" weight=\"0.9213\"/>\n##       <edge id=\"92\" source=\"8\" target=\"101\" weight=\"0.9842\"/>\n##       <edge id=\"93\" source=\"8\" target=\"101\" weight=\"0.9276\"/>\n##       <edge id=\"94\" source=\"8\" target=\"101\" weight=\"0.8876\"/>\n##       <edge id=\"95\" source=\"96\" target=\"101\" weight=\"0.9861\"/>\n##       <edge id=\"96\" source=\"59\" target=\"101\" weight=\"0.9487\"/>\n##       <edge id=\"97\" source=\"59\" target=\"101\" weight=\"0.9193\"/>\n##       <edge id=\"98\" source=\"31\" target=\"101\" weight=\"0.9881\"/>\n##       <edge id=\"99\" source=\"63\" target=\"101\" weight=\"0.9827\"/>\n##       <edge id=\"100\" source=\"94\" target=\"101\" weight=\"0.9305\"/>\n##       <edge id=\"101\" source=\"61\" target=\"101\" weight=\"0.8209\"/>\n##       <edge id=\"102\" source=\"48\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"103\" source=\"20\" target=\"101\" weight=\"0.9084\"/>\n##       <edge id=\"104\" source=\"95\" target=\"101\" weight=\"0.8383\"/>\n##       <edge id=\"105\" source=\"58\" target=\"101\" weight=\"0.8866\"/>\n##       <edge id=\"106\" source=\"58\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"107\" source=\"62\" target=\"101\" weight=\"0.8884\"/>\n##       <edge id=\"108\" source=\"16\" target=\"101\" weight=\"0.824\"/>\n##       <edge id=\"109\" source=\"16\" target=\"101\" weight=\"0.8944\"/>\n##       <edge id=\"110\" source=\"6\" target=\"108\" weight=\"0.814\"/>\n##       <edge id=\"111\" source=\"6\" target=\"108\" weight=\"0.8256\"/>\n##       <edge id=\"112\" source=\"2\" target=\"108\" weight=\"0.8865\"/>\n##       <edge id=\"113\" source=\"39\" target=\"107\" weight=\"0.8062\"/>\n##       <edge id=\"114\" source=\"37\" target=\"107\" weight=\"0.8808\"/>\n##       <edge id=\"115\" source=\"38\" target=\"107\" weight=\"0.8286\"/>\n##       <edge id=\"116\" source=\"34\" target=\"107\" weight=\"0.9396\"/>\n##       <edge id=\"117\" source=\"33\" target=\"107\" weight=\"0.8843\"/>\n##       <edge id=\"118\" source=\"36\" target=\"107\" weight=\"0.8283\"/>\n##       <edge id=\"119\" source=\"12\" target=\"107\" weight=\"0.9321\"/>\n##       <edge id=\"120\" source=\"11\" target=\"107\" weight=\"0.8938\"/>\n##       <edge id=\"121\" source=\"47\" target=\"107\" weight=\"0.8205\"/>\n##       <edge id=\"122\" source=\"14\" target=\"107\" weight=\"0.9346\"/>\n##       <edge id=\"123\" source=\"3\" target=\"107\" weight=\"0.8959\"/>\n##       <edge id=\"124\" source=\"54\" target=\"107\" weight=\"0.8008\"/>\n##       <edge id=\"125\" source=\"68\" target=\"107\" weight=\"0.9502\"/>\n##       <edge id=\"126\" source=\"99\" target=\"107\" weight=\"0.8972\"/>\n##       <edge id=\"127\" source=\"92\" target=\"110\" weight=\"0.9881\"/>\n##       <edge id=\"128\" source=\"69\" target=\"110\" weight=\"0.9162\"/>\n##       <edge id=\"129\" source=\"93\" target=\"110\" weight=\"0.8296\"/>\n##       <edge id=\"130\" source=\"57\" target=\"110\" weight=\"0.9347\"/>\n##       <edge id=\"131\" source=\"57\" target=\"110\" weight=\"0.8702\"/>\n##       <edge id=\"132\" source=\"46\" target=\"110\" weight=\"0.9889\"/>\n##       <edge id=\"133\" source=\"18\" target=\"102\" weight=\"0.9875\"/>\n##     </edges>\n##   </graph>\n## </gexf>\n\n\n\u203bsink()\u95a2\u6570\u3067\u73fe\u5728\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\nsink(file=\"SanFrancisco.AssociationRules.gexf\")\nprint(gexf.file)\nsink()\n\ndir()\n\n[1] \"SanFrancisco.AssociationRules_with.size.color.gexf\"\n\n\nGephi \u3092\u7acb\u3061\u4e0a\u3052\u308b\n\n\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\n\n\n\u300cFile\u300d\u21d2 \u300cOpen\u300d\n\n\n\u3055\u304d\u307b\u3069\u51fa\u529b\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\n\n\n\u300cOpen\u300d\u3092\u62bc\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u3067\u308b\uff08GEXF\u30d5\u30a1\u30a4\u30eb\u53d6\u308a\u8fbc\u307f\u6210\u529f\uff09\n\n\n\u300cOK\u300d\u3092\u62bc\u3059\u3068\u3001\u753b\u9762\u306b\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u308b\n\n\n\u63cf\u753b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u3001 Fluchterman Reingold  \u306b\u8a2d\u5b9a\u3059\u308b\n\n\n\u9078\u629e\u3057\u305f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u30b0\u30e9\u30d5\u304c\u518d\u63cf\u753b\u3055\u308c\u305f\n\n\n\u3010\u30ce\u30fc\u30c9\u306e\u5927\u304d\u3055\u3011 \u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306elift\u5024\u306e\u5927\u304d\u3044\u307b\u3069\uff08\u30ce\u30fc\u30c9\u3082\uff09\u5927\u304d\u3044\n\n\u3010\u30ce\u30fc\u30c9\u306e\u8272\u3011\uff08\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306e\uff09support\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u3001\u7dd1\u8272\u306e\u6210\u5206\u304c\u6fc3\u3044               \uff08\u203bRGB\u5024\u306e\u3046\u3061\u3001\u8d64\u3068\u9752\u306e\u8981\u7d20\u306f\u5168\u30ce\u30fc\u30c9\u540c\u3058\u5024\u3092\u8a2d\u5b9a\uff09\n\n\n\u753b\u9762\u4e0b\u90e8\u306e\u300c\uff34\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u3001\u30b0\u30e9\u30d5\u306b\u30ce\u30fc\u30c9\u306e\u30e9\u30d9\u30eb\u3092\u8868\u793a\n\n\n\u30ce\u30fc\u30c9\u306b\u30ce\u30fc\u30c9\u540d\uff08\u30e9\u30d9\u30eb\uff09\u304c\u8868\u793a\u3055\u308c\u305f\n\n\n\u30de\u30a6\u30b9\u30db\u30a4\u30fc\u30eb\u3092\u4e0a\u306b\u56de\u3057\u3066\u3001\u62e1\u5927\n\n\n\u3007\u306e\u30ce\u30fc\u30c9\u306e\u3044\u305a\u308c\u304b\u306b\u30de\u30a6\u30b9\u30dd\u30a4\u30f3\u30bf\u3092\u3042\u3066\u308b\n\n# \uff08\u305d\u306e\u30ce\u30fc\u30c9\u3068\u30a8\u30c3\u30b8\u3067\u3064\u306a\u304c\u3063\u3066\u3044\u308b\u76f8\u624b\u5148\u306e\u30ce\u30fc\u30c9\u304c\u6d6e\u304b\u3073\u4e0a\u304c\u3063\u3066\u30cf\u30a4\u30e9\u30a4\u30c8\u8868\u793a\u3055\u308c\u308b\uff09\n\n\n\nGephi \u3067\u63cf\u753b\u3067\u304d\u305f\uff01 \n\n\n\uff08\u5b8c\u4e86\uff09\n\n\u3010 \u53c2\u8003\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8 \u3011\n\n\uff08\uff11\uff09Fun with R   \"Network visualization \u2013 part 2: Gephi\" \u3078\u306e\u30ea\u30f3\u30af\n\n\n\uff08 Python \u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u4f8b \uff09\n\n\uff08\uff12\uff09 Ars longa, vita brevis \uff082013\u5e741\u670818\u65e5\u63b2\u8f09\u8a18\u4e8b\uff09\u300cNetworkX \u3092\u4f7f\u3063\u3066 GEXF \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u300d  \u3078\u306e\u30ea\u30f3\u30af\n\n\n### \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u7d50\u679c \uff08_**Gephi**_ \u51fa\u529b\u30b0\u30e9\u30d5\uff09\n- \u3010\u30ce\u30fc\u30c9\u306e\u5927\u304d\u3055\u3011 \u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306elift\u5024\u306e\u5927\u304d\u3044\u307b\u3069\uff08\u30ce\u30fc\u30c9\u3082\uff09\u5927\u304d\u3044  \n- \u3010\u30ce\u30fc\u30c9\u306e\u8272\u3011\uff08\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306e\uff09support\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u3001\u7dd1\u8272\u306e\u6210\u5206\u304c\u6fc3\u3044               \uff08\u203bRGB\u5024\u306e\u3046\u3061\u3001\u8d64\u3068\u9752\u306e\u8981\u7d20\u306f\u5168\u30ce\u30fc\u30c9\u540c\u3058\u5024\u3092\u8a2d\u5b9a\uff09\n\n![10.png](https://qiita-image-store.s3.amazonaws.com/0/43487/c9c9455c-0349-30c7-0e24-e430a553c5ea.png)\n\n![11.png](https://qiita-image-store.s3.amazonaws.com/0/43487/7acf294e-ddea-c79e-42f2-9310833a55ec.png)\n\n\n##\uff11. \u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u3092\u5b9f\u884c\n- \u95a2\u6570\uff1a ***_arules_*** \n- \u95a2\u6570\uff1a ***_arulesViz_***\n\n##### \u30c7\u30fc\u30bf\uff1a\u7d44\u307f\u8fbc\u307f\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8 ***_Income_*** \u3092\u7528\u3044\u308b\n###### ***_Income_***\u3000\uff1a\u7c73\u56fd\u30b5\u30f3\u30d5\u30e9\u30f3\u30b7\u30b9\u30b3\u30fbBay\u30a8\u30ea\u30a2 9,409\u4eba\u306e\u500b\u4eba\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\uff08\u5c5e\u6027\uff09\u30fb\u53ce\u5165\u30a2\u30f3\u30b1\u30fc\u30c8\u8abf\u67fb\u7d50\u679c\n\n```{r}\ninstall.packages(\"arules\")\ninstall.packages(\"arulesViz\")\n\nlibrary(arules)\nlibrary(arulesViz)\n```\n\n\n```{r}\ndata(Income)\nprint(Income)\n```\n\n```\ntransactions in sparse format with\n 6876 transactions (rows) and\n 50 items (columns)\n```\n\n\n```{r}\npar(mar=c(4.5, 2, 1, 2), cex=0.65, cex.axis=0.7)\nitemFrequencyPlot(Income, cex=0.8, col=\"lightblue\")\n```\n\n![1.png](https://qiita-image-store.s3.amazonaws.com/0/43487/9c530a35-5df0-56a4-a2c7-6e351235c597.png)\n\n\n#### \u4e0a\u8a18\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u3092\u5b9f\u884c\n```{r}\nIncome.ap <- apriori(Income)\n```\n\n#### 8664\u4ef6\u306e\u76f8\u95a2\u30eb\u30fc\u30eb\u304c\u5f97\u3089\u308c\u305f\n```\nparameter specification:\n confidence minval smax arem  aval originalSupport support minlen maxlen target   ext\n        0.8    0.1    1 none FALSE            TRUE     0.1      1     10  rules FALSE\n\nalgorithmic control:\n filter tree heap memopt load sort verbose\n    0.1 TRUE TRUE  FALSE TRUE    2    TRUE\n\napriori - find association rules with the apriori algorithm\nversion 4.21 (2004.05.09)        (c) 1996-2004   Christian Borgelt\nset item appearances ...[0 item(s)] done [0.00s].\nset transactions ...[50 item(s), 6876 transaction(s)] done [0.00s].\nsorting and recoding items ... [30 item(s)] done [0.00s].\ncreating transaction tree ... done [0.00s].\nchecking subsets of size 1 2 3 4 5 6 7 8 done [0.04s].\nwriting ... [8664 rule(s)] done [0.00s].\ncreating S4 object  ... done [0.00s].\n```\n\n#### _{\u7d50\u679c\u90e8}_ \u304c\u3001\u5e74\u53ce4\u4e07\u30c9\u30eb\u4ee5\u4e0a\u306e\u6761\u4ef6\u306b\u5408\u81f4\u3059\u308b\u4e16\u5e2f\u306e _{\u6761\u4ef6\u90e8}_ \u3092\u30ea\u30b9\u30c8\u8868\u793a\n###### \u203b _lift_\u5024 \uff1a\uff12\u4ee5\u4e0a\u306e\u6761\u4ef6\u3082\u4ed8\u52a0  \u203b\u4e0a\u4f4d10\u4ef6\u629c\u7c8b\n\n```{r}\nIncome.rules <- subset(Income.ap, subset=rhs %in% \"income=$40,000+\" & lift>2)\nprint(inspect(SORT(Income.rules)[1:10]))\n```\n\n```\n   lhs                                     rhs                 support confidence     lift\n1  {occupation=professional/managerial,                                                   \n    householder status=own}             => {income=$40,000+} 0.1384526  0.8074640 2.138722\n2  {occupation=professional/managerial,                                                   \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1336533  0.8075571 2.138969\n3  {dual incomes=yes,                                                                     \n    householder status=own}             => {income=$40,000+} 0.1260908  0.8156162 2.160315\n4  {marital status=married,                                                               \n    occupation=professional/managerial,                                                   \n    language in home=english}           => {income=$40,000+} 0.1233275  0.8030303 2.126979\n5  {marital status=married,                                                               \n    dual incomes=yes,                                                                     \n    householder status=own}             => {income=$40,000+} 0.1227458  0.8194175 2.170383\n6  {education=college graduate,                                                           \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1212914  0.8011527 2.122005\n7  {dual incomes=yes,                                                                     \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1207097  0.8258706 2.187476\n8  {occupation=professional/managerial,                                                   \n    householder status=own,                                                               \n    type of home=house}                 => {income=$40,000+} 0.1192554  0.8175474 2.165430\n9  {marital status=married,                                                               \n    dual incomes=yes,                                                                     \n    householder status=own,                                                               \n    language in home=english}           => {income=$40,000+} 0.1175102  0.8304214 2.199529\n10 {occupation=professional/managerial,                                                   \n    householder status=own,                                                               \n    type of home=house,                                                                   \n    language in home=english}           => {income=$40,000+} 0.1148924  0.8178054 2.166113\nNULL\nWarning message:\nIn .local(x, ...) : arules: SORT is deprecated use sort instead.\n```\n\n#### support\u5024\u3092\u5897\u3084\u3057\u3001\u691c\u51fa\u3055\u308c\u308b\u76f8\u95a2\u30eb\u30fc\u30eb\u306e\u6570\u3092\u7d5e\u308b\n###### 714\u4ef6\u306e\u30eb\u30fc\u30eb\u3092\u5f97\u305f\n```{r}\n\nIncome.ap <- apriori(Income, parameter=list(support=0.2))\n\n```\n\n```\n\nparameter specification:\n confidence minval smax arem  aval originalSupport support minlen maxlen target   ext\n        0.8    0.1    1 none FALSE            TRUE     0.2      1     10  rules FALSE\n\nalgorithmic control:\n filter tree heap memopt load sort verbose\n    0.1 TRUE TRUE  FALSE TRUE    2    TRUE\n\napriori - find association rules with the apriori algorithm\nversion 4.21 (2004.05.09)        (c) 1996-2004   Christian Borgelt\nset item appearances ...[0 item(s)] done [0.00s].\nset transactions ...[50 item(s), 6876 transaction(s)] done [0.00s].\nsorting and recoding items ... [26 item(s)] done [0.00s].\ncreating transaction tree ... done [0.00s].\nchecking subsets of size 1 2 3 4 5 6 done [0.01s].\nwriting ... [714 rule(s)] done [0.00s].\ncreating S4 object  ... done [0.00s].\n```\n\n#### \u30eb\u30fc\u30eb\u306e\u6761\u4ef6\u90e8 _{lhs}_ \u21d2 \u7d50\u679c\u90e8 _{rhs}_ \u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\u306b\u51fa\u529b\n#### \u307e\u305a\u306f\u3001R\u3000\u3067\uff01\n\n#### \u95a2\u6570 _plot.rules()_ \u3092\u4f7f\u7528\n\n##### control\u5f15\u6570\u306b{igraph}\u5074\u306e\u5f15\u6570\u3092\u30ea\u30b9\u30c8\u5f62\u5f0f\u3067\u5165\u308c\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u308b\n##### control\u5f15\u6570 >>> layout\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5024\u306f\u3001default\u3067\"layout.fruchterman.reingold\")\n\n```{r}\nplot(Income.ap,\u3000method=\"graph\",\u3000control=list(type=\"items\",cex=0.6),margin=-0.1)\n```\n\n![g2.png](https://qiita-image-store.s3.amazonaws.com/0/43487/c8052039-3127-4c02-fdd9-64f6a95813e6.png)\n\n#### support\u5024\u3092\u5897\u3084\u3057\u3001\u691c\u51fa\u3055\u308c\u308b\u76f8\u95a2\u30eb\u30fc\u30eb\u306e\u6570\u3092\u7d5e\u308b\n#### 134\u4ef6\u306e\u30eb\u30fc\u30eb\u3092\u5f97\u305f\n```{r}\nIncome.ap <- apriori(Income, parameter=list(support=0.3))\n```\n\n```\n\nparameter specification:\n confidence minval smax arem  aval originalSupport support minlen maxlen target   ext\n        0.8    0.1    1 none FALSE            TRUE     0.3      1     10  rules FALSE\n\nalgorithmic control:\n filter tree heap memopt load sort verbose\n    0.1 TRUE TRUE  FALSE TRUE    2    TRUE\n\napriori - find association rules with the apriori algorithm\nversion 4.21 (2004.05.09)        (c) 1996-2004   Christian Borgelt\nset item appearances ...[0 item(s)] done [0.00s].\nset transactions ...[50 item(s), 6876 transaction(s)] done [0.00s].\nsorting and recoding items ... [22 item(s)] done [0.00s].\ncreating transaction tree ... done [0.00s].\nchecking subsets of size 1 2 3 4 done [0.00s].\nwriting ... [134 rule(s)] done [0.00s].\ncreating S4 object  ... done [0.00s].\nWarning messages:\n1:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n2:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n3:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n4:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n```\n\n```{r}\nplot(Income.ap,\u3000method=\"graph\",\u3000control=list(type=\"items\",cex=1.2),margin=-0.1)\n```\n\n![g3.png](https://qiita-image-store.s3.amazonaws.com/0/43487/0b3a6cd4-6041-d471-c98c-e44e94839207.png)\n\n\n### \u3044\u3088\u3044\u3088\u3001Gephi \u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\u3092\u51fa\u529b\u3059\u308b\u6e96\u5099\u958b\u59cb\n\n#### _arules_ \u578b\u30c7\u30fc\u30bf\u3092 Gephi \u304c\u8aad\u307f\u8fbc\u307f\u53ef\u80fd\u306aGEXF\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\n\n```{r}\nclass(Income.ap) #arules\u578b\n```\n\n```\n[1] \"rules\"\nattr(,\"package\")\n[1] \"arules\"\nWarning messages:\n1:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n2:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n3:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n4:  Windows \u306e\u30d5\u30a9\u30f3\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30d5\u30a9\u30f3\u30c8\u30d5\u30a1\u30df\u30ea\u304c\u898b\u4ed8\u304b\u308a\u307e\u305b\u3093  \n```\n\n#### _arules_ \u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e00\u65e6\u3001data.frame\u578b\u306b\u5909\u63db\u3059\u308b\n```{r}\ndata.ap.dataframe <- as(Income.ap, \"data.frame\")\nclass(data.ap.dataframe) # data.frame\u578b\n```\n\n```\n[1] \"data.frame\"\n```\n\n#### data.frame\u578b\u306b\u5909\u63db\u3057\u305f\u7d50\u679c\u3092\u78ba\u8a8d\n```{r}\nprint(head(data.ap.dataframe), 5)\n```\n\n```\n                                                               rules   support confidence      lift\n1                                   {} => {language in home=english} 0.9128854  0.9128854 1.0000000\n2 {occupation=professional/managerial} => {language in home=english} 0.3234439  0.9532790 1.0442483\n3              {years in bay area=1-9} => {language in home=english} 0.3115183  0.8814815 0.9655993\n4                   {householder status=own} => {type of home=house} 0.3161722  0.8413313 1.4102862\n5             {householder status=own} => {language in home=english} 0.3547120  0.9438854 1.0339583\n6                    {income=$40,000+} => {language in home=english} 0.3550029  0.9402928 1.0300228\n```\n\n#### rule\u306e\u5185\u5bb9\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\u306enode\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\n```{r}\nrules <- data.ap.dataframe$rules\nclass(rules) \n```\n\n\n```\n[1] \"factor\"\n```\n\n#### \u30c7\u30fc\u30bf\u578b\u3092character\u578b\u306b\u578b\u5909\u63db\n```{r}\nrules <- as.character(rules)\nclass(rules) \n```\n\n\n```\n[1] \"character\"\n```\n\n#### \u6761\u4ef6\u90e8 _{lhs}_ \u3068 \u7d50\u679c\u90e8 _{rhs}_ \u3092\u5207\u308a\u51fa\u3057\u3066\u3001\u5225\u3005\u306e\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u3059\u308b\n###### \u203b \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b0\u30e9\u30d5\uff08\u6709\u5411\u30b0\u30e9\u30d5\uff09\u306e\u77e2\u5370\u3067\u7d50\u3070\u308c\u308b\u4e21\u7aef\u306e\u30ce\u30fc\u30c9\u306b\u3059\u308b\n\n\n#### \u3010\u65b9\u6cd5\u3011\u300c=>\u300d\u306e\u5de6\u9805\uff08\u5de6\u30aa\u30da\u30e9\u30f3\u30c9\uff09\u3068\u53f3\u9805\uff08\u53f3\u30aa\u30da\u30e9\u30f3\u30c9\uff09\u3067\u30c7\u30fc\u30bf\u5217\u5206\u5272\n```{r}\nrules.list <- strsplit(rules, \"=>\")\nclass(rules.list)\n```\n\n```\n[1] \"list\"\n```\n\n```{r}\nprint(head(rules.list, 10))\n```\n\n```\n[[1]]\n[1] \"{} \"                         \" {language in home=english}\"\n\n[[2]]\n[1] \"{occupation=professional/managerial} \" \" {language in home=english}\"          \n\n[[3]]\n[1] \"{years in bay area=1-9} \"    \" {language in home=english}\"\n\n[[4]]\n[1] \"{householder status=own} \" \" {type of home=house}\"    \n\n[[5]]\n[1] \"{householder status=own} \"   \" {language in home=english}\"\n\n[[6]]\n[1] \"{income=$40,000+} \"          \" {language in home=english}\"\n\n[[7]]\n[1] \"{number of children=1+} \"         \" {education=no college graduate}\"\n\n[[8]]\n[1] \"{number of children=1+} \"    \" {language in home=english}\"\n\n[[9]]\n[1] \"{marital status=married} \"   \" {language in home=english}\"\n\n[[10]]\n[1] \"{marital status=single} \" \" {age=14-34}\"            \n```\n\n```{r}\n# for\u6587\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u306e\u4e2d\u3067\u3001\u6761\u4ef6\u90e8 {lhs} \u3068 \u7d50\u679c\u90e8\u3000{rhs} \u3092\u5206\u3051\u3066\u683c\u7d0d\u3059\u308b\u7bb1\u3092\u4f5c\u6210\n### \u3000\u203b\u521d\u671f\u5024\u3068\u3057\u3066\u5024\u306f0\uff08\u30bc\u30ed\uff09\u3092\u8a2d\u5b9a\nnode.labels <- as.data.frame(matrix(0, nrow=length(rules.list),ncol=2))\n\nfor(i in 1:length(rules.list)){\n     node.labels[i,1] <-  rules.list[[i]][1]\n     node.labels[i,2] <-  rules.list[[i]][2]\n}\n\nprint(node.labels[1:10,]); print(paste(\"\u30eb\u30fc\u30eb\u306e\u4ef6\u6570\uff1a  \", nrow(node.labels), \"\u4ef6\", sep=\"\"))\n\n```\n\n```\n                                      V1                               V2\n1                                    {}        {language in home=english}\n2  {occupation=professional/managerial}        {language in home=english}\n3               {years in bay area=1-9}        {language in home=english}\n4              {householder status=own}              {type of home=house}\n5              {householder status=own}        {language in home=english}\n6                     {income=$40,000+}        {language in home=english}\n7               {number of children=1+}   {education=no college graduate}\n8               {number of children=1+}        {language in home=english}\n9              {marital status=married}        {language in home=english}\n10              {marital status=single}                       {age=14-34}\n```\n\n```\n[1] \"\u30eb\u30fc\u30eb\u306e\u4ef6\u6570\uff1a  134\u4ef6\"\n```\n\n\n#### node\u306eID\u756a\u53f7\u3092\u63a1\u756a\u3059\u308b \n######\uff08\u203b ***_GEXF_*** \u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u306e\u969b\u306b\u5fc5\u8981\u3068\u306a\u308b\uff09\n\n```{r}\n#ID \u683c\u7d0d\u5148\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5ba3\u8a00\uff08\u521d\u671f\u5024: 0\uff09\nnodes.lhs <- rep(0, as.numeric(nrow(node.labels)))\nnodes.rhs <- rep(0, as.numeric(nrow(node.labels)))\n\nfor(i in 1:nrow(node.labels)){\n     nodes.lhs[i]  <- node.labels[i,1]\n     nodes.rhs[i]  <- node.labels[i,2]\n}\n\n#\u5168\u3066\u306e\u3000\u6761\u4ef6\u90e8 {lhs} / \u7d50\u679c\u90e8 {rhs} \u3092\u96c6\u3081\u3066\u3001\u91cd\u8907\u5024\u3092\u6392\u9664\uff08\u4e00\u610f\u96c6\u5408\u3092\u3064\u304f\u308b\uff09\n\nnodes.unique <- unique(c(nodes.lhs, nodes.rhs))\n\nprint(nodes.unique)\n```\n\n```\n [1] \"{} \"                                                                               \n  [2] \"{occupation=professional/managerial} \"                                             \n  [3] \"{years in bay area=1-9} \"                                                          \n  [4] \"{householder status=own} \"                                                         \n  [5] \"{income=$40,000+} \"                                                                \n  [6] \"{number of children=1+} \"                                                          \n  [7] \"{marital status=married} \"                                                         \n  [8] \"{marital status=single} \"                                                          \n  [9] \"{age=35+} \"                                                                        \n [10] \"{householder status=rent} \"                                                        \n [11] \"{sex=male} \"                                                                       \n [12] \"{sex=female} \"                                                                     \n [13] \"{age=14-34} \"                                                                      \n [14] \"{type of home=house} \"                                                             \n [15] \"{dual incomes=not married} \"                                                       \n [16] \"{number of children=0} \"                                                           \n [17] \"{income=$0-$40,000} \"                                                              \n [18] \"{years in bay area=10+} \"                                                          \n [19] \"{ethnic classification=white} \"                                                    \n [20] \"{number in household=1} \"                                                          \n [21] \"{education=no college graduate} \"                                                  \n [22] \"{marital status=single,age=14-34} \"                                                \n [23] \"{marital status=single,dual incomes=not married} \"        \n\n          \uff08\u4e2d\u7565\uff09\n\n  [97] \"{education=no college graduate,number in household=1,number of children=0} \"       \n [98] \"{education=no college graduate,number of children=0,language in home=english} \"    \n [99] \"{years in bay area=10+,number in household=1,ethnic classification=white} \"        \n[100] \"{education=no college graduate,number in household=1,ethnic classification=white} \"\n[101] \" {language in home=english}\"                                                       \n[102] \" {type of home=house}\"                                                             \n[103] \" {education=no college graduate}\"                                                  \n[104] \" {age=14-34}\"                                                                      \n[105] \" {dual incomes=not married}\"                                                       \n[106] \" {income=$0-$40,000}\"                                                              \n[107] \" {number in household=1}\"                                                          \n[108] \" {marital status=single}\"                                                          \n[109] \" {ethnic classification=white}\"                                                    \n[110] \" {number of children=0}\"   \n\n```\n\n```{r}\nnodes.ID.list <- data.frame(ID.NO=as.numeric(1:length(nodes.unique)), label=nodes.unique) \nprint(nodes.ID.list[1:10, ])\n```\n\n```\n   ID.NO                                 label\n1      1                                   {} \n2      2 {occupation=professional/managerial} \n3      3              {years in bay area=1-9} \n4      4             {householder status=own} \n5      5                    {income=$40,000+} \n6      6              {number of children=1+} \n7      7             {marital status=married} \n8      8              {marital status=single} \n9      9                            {age=35+} \n10    10            {householder status=rent} \n```\n\n#### \u30ce\u30fc\u30c9\u9593\u306e \u6761\u4ef6\u90e8 _{lhs}_ \u21d2 \u7d50\u679c\u90e8 _{rhs}_ \u30da\u30a2\u3092\u3001\u30ce\u30fc\u30c9ID\u756a\u53f7\u306e\u6570\u5b57\u30da\u30a2\u306e\u884c\u5217\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u306b\u3059\u308b\n```{r}\nnodes.lhs <- data.frame(dummy=rep(\"X\",length(nodes.lhs)), label=as.vector(nodes.lhs))\nnodes.rhs <- data.frame(dummy=rep(\"Y\",length(nodes.rhs)), label=as.vector(nodes.rhs))\n\nlhs.nodes <- merge(nodes.lhs, nodes.ID.list, by=\"label\")\nrhs.nodes <- merge(nodes.rhs, nodes.ID.list, by=\"label\")\n\nprint(lhs.nodes[1:10, ])\n```\n\n```\n                                                                 label dummy ID.NO\n1                                                                  {}      X     1\n2       {age=14-34,dual incomes=not married,language in home=english}      X    79\n3       {age=14-34,dual incomes=not married,language in home=english}      X    79\n4       {age=14-34,dual incomes=not married,language in home=english}      X    79\n5                                {age=14-34,dual incomes=not married}      X    24\n6                                {age=14-34,dual incomes=not married}      X    24\n7                                {age=14-34,dual incomes=not married}      X    24\n8                                {age=14-34,dual incomes=not married}      X    24\n9  {age=14-34,education=no college graduate,dual incomes=not married}      X    81\n10                          {age=14-34,education=no college graduate}      X    45\n```\n\n```{r}\nprint(rhs.nodes[1:10, ])\n```\n\n```\n                         label dummy ID.NO\n1                  {age=14-34}     Y   104\n2                  {age=14-34}     Y   104\n3                  {age=14-34}     Y   104\n4                  {age=14-34}     Y   104\n5                  {age=14-34}     Y   104\n6                  {age=14-34}     Y   104\n7   {dual incomes=not married}     Y   105\n8   {dual incomes=not married}     Y   105\n9   {dual incomes=not married}     Y   105\n10  {dual incomes=not married}     Y   105\n```\n\n#### dummy\u5217\u3092\u5207\u308a\u843d\u3068\u3057\u3066\u3001\u30ce\u30fc\u30c9\u3092\u3064\u306a\u3050\u30a8\u30c3\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\n#### **\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d** \uff1a _**relations**_ \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n```{r}\nlhs.nodes <- lhs.nodes[,-2]\nrhs.nodes <- rhs.nodes[,-2]\n\nrelations <- cbind(lhs.nodes, rhs.nodes)\n\nprint(relations[1:10, ])\n```\n\n```\n                                                                 label ID.NO                       label ID.NO\n1                                                                  {}      1                 {age=14-34}   104\n2       {age=14-34,dual incomes=not married,language in home=english}     79                 {age=14-34}   104\n3       {age=14-34,dual incomes=not married,language in home=english}     79                 {age=14-34}   104\n4       {age=14-34,dual incomes=not married,language in home=english}     79                 {age=14-34}   104\n5                                {age=14-34,dual incomes=not married}     24                 {age=14-34}   104\n6                                {age=14-34,dual incomes=not married}     24                 {age=14-34}   104\n7                                {age=14-34,dual incomes=not married}     24  {dual incomes=not married}   105\n8                                {age=14-34,dual incomes=not married}     24  {dual incomes=not married}   105\n9  {age=14-34,education=no college graduate,dual incomes=not married}     81  {dual incomes=not married}   105\n10                          {age=14-34,education=no college graduate}     45  {dual incomes=not married}   105\n```\n\n#### \u6761\u4ef6\u90e8 _{lhs}_ \u3068 \u7d50\u679c\u90e8 _{rhs}_  \u306eID.NO\u306e\u307f\u53d6\u308a\u51fa\u3059\n```{r}\nrelations <- relations[ , c(-1,-3)]\nprint(relations[1:10, ]) \n```\n\n```\n   ID.NO ID.NO.1\n1      1     104\n2     79     104\n3     79     104\n4     79     104\n5     24     104\n6     24     104\n7     24     105\n8     24     105\n9     81     105\n10    45     105\n```\n\n#### edge\u306e\u91cd\u307f\u884c\u5217\u306e\u751f\u6210\n##### \u91cd\u307f\uff08weight\uff09\uff1a\u3000arules()\u95a2\u6570 \u8fd4\u308a\u5024\u306e _**confidence**_ \u5024 \u3068\u5b9a\u7fa9\n##### _**support**_ \u5024\u306f\u5c0f\u6570\u70b92\u6841\u306b\u4e38\u3081\u308b\n\n```{r}\nconfidence <- data.ap.dataframe$confidence\nweight <- round(confidence, 2)\nprint(weight[1:10])\n```\n\n\n```\n [1] 0.91 0.32 0.31 0.32 0.35 0.36 0.31 0.33 0.36 0.37\n```\n\n#### _Gephi_ \u30b0\u30e9\u30d5\u306e\u30ce\u30fc\u30c9\u306e\u914d\u8272\u3092 _support\u5024_\u3000/ \u30b5\u30a4\u30ba\u3092 _lift\u5024_ \u306b\u3059\u308b\n#### support\u5024 \u53ca\u3073 lift\u5024\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u683c\u7d0d\n\n```{r}\n\nsupport <- data.ap.dataframe$support\nsupport <- round(support*10000,1)\n\n# \u914d\u8272\u306fRGB256\u8272\u306e1\uff5e256\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n# lift\u5024\u306e\u5927\u304d\u3055\u9806\u756a\u3092\u6574\u6570\u306b\u5909\u63db\u3057\u3066\u3001\u305d\u306e\u6574\u6570\u3092\u914d\u8272\u756a\u53f7\u306b\u5229\u7528\u3059\u308b\n\n# \u4ee5\u4e0b\u3001?write.gexf \u306e\u30de\u30cb\u30e5\u30a2\u30eb\u8a18\u8f09\u5185\u5bb9\n# \"the color should be specified through a data-frame with columns r (red), g (green), b (blue) with integers between 0 and 256 and a last column with alpha values as a float between 0.0 and 1.0.\"\"\n\nlift <- as.integer(order(data.ap.dataframe$lift)*1.5)\n\n#\u5de6\u30ab\u30e9\u30e0\u304b\u3089\u9806\u306b\u3001RGB\u30ab\u30e9\u30fc\u756a\u53f7\u306eR, G, B\u6fc3\u5ea6\u5024 \u203b\u5024\u306f0\uff5e256\u307e\u3067\u306e\u6574\u6570\u5024\u306b\u306a\u308b\u3088\u3046\u306b\u3059\u308b\ncolour <- data.frame(as.integer(100), as.integer(lift), as.integer(200),as.integer(1.0)) \ncolnames(colour) <-c(\"r\",\"g\",\"b\",\"a\")\n\nprint(colour)\n\n```\n\n```\n      r   g   b a\n1   100  12 200 1\n2   100 172 200 1\n3   100   4 200 1\n4   100 169 200 1\n5   100  52 200 1\n6   100 159 200 1\n7   100  96 200 1\n8   100 142 200 1\n9   100  90 200 1\n10  100  19 200 1\n11  100  60 200 1\n12  100 181 200 1\n13  100 165 200 1\n14  100  85 200 1\n15  100 117 200 1\n16  100  37 200 1\n17  100  28 200 1\n18  100  25 200 1\n19  100 102 200 1\n20  100  43 200 1\n21  100 111 200 1\n22  100  31 200 1\n23  100  73 200 1\n24  100   1 200 1\n25  100  30 200 1\n\n    \uff08\u4e2d\u7565\uff09\n\n120 100 162 200 1\n121 100  15 200 1\n122 100  46 200 1\n123 100  51 200 1\n124 100 156 200 1\n125 100  16 200 1\n126 100  45 200 1\n127 100  57 200 1\n128 100  58 200 1\n129 100  61 200 1\n130 100 154 200 1\n131 100 160 200 1\n132 100 163 200 1\n133 100  48 200 1\n134 100 157 200 1\n```\n\n\n\n#### _**{rgexf}**_  \u30d1\u30c3\u30b1\u30fc\u30b8 \u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9 \u53ca\u3073 \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```{r}\ninstall.packages(\"rgexf\")\nlibrary(rgexf)\n```\n\n\n#### _**GEXF**_ \u30d5\u30a1\u30a4\u30eb\u306e\u51fa\u529b \n##### _**write.gexf()**_ \u95a2\u6570\n##### \u3010\u5f15\u6570\u3011\n- _nodes_ \uff1a \u30ce\u30fc\u30c9ID\u756a\u53f7\u30c7\u30fc\u30bf\n- _edges_ \uff1a \u30a8\u30c3\u30b8\u30c7\u30fc\u30bf\uff08 \u6761\u4ef6\u90e8 \u21d2 \u7d50\u679c\u90e8 \u306e\u95a2\u4fc2 \uff09\n- _edgesWeights_ \uff1a \u30a8\u30c3\u30b8\u306e\u91cd\u307f\uff08  support_  \u5024 \uff09\n- _nodesVizAtt_\u3000: \u30ce\u30fc\u30c9\u306e\u30b0\u30e9\u30d5\u8868\u793a\u8a2d\u5b9a\uff08\u203b\u30b5\u30a4\u30ba\u3001\u8272\u3001\u4f4d\u7f6eetc.\u3092 _list_ \u3067\u6e21\u3059\uff09\n- _size_ : \u30ce\u30fc\u30c9\u306e\u30b5\u30a4\u30ba\n- _color_ : \u30ce\u30fc\u30c9\u306e\u914d\u8272\n\n```{r}\ngexf.file <- write.gexf(\nnodes=nodes.ID.list, edges=relations, edgesWeight=confidence, \nnodesVizAtt = list(size=support, color=colour)\n)\n\n\ngexf.file <- write.gexf(nodes=nodes.ID.list, edges=relations, edgesWeight=support)\n\nprint(gexf.file)\n```\n\n```\n## <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n## <gexf xmlns=\"http://www.gexf.net/1.2draft\" xmlns:viz=\"http://www.gexf.net/1.1draft/viz\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://www.gexf.net/1.2draft http://www.gexf.net/1.2draft/gexf.xsd\" version=\"1.2\">\n##   <meta lastmodifieddate=\"2014-06-12\">\n##     <creator>NodosChile</creator>\n##     <description>A graph file writing in R using \"rgexf\"</description>\n##     <keywords>gexf graph, NodosChile, R, rgexf</keywords>\n##   </meta>\n##   <graph mode=\"static\" defaultedgetype=\"undirected\">\n##     <nodes>\n##       <node id=\"1\" label=\"{} \">\n##         <viz:color r=\"100\" g=\"12\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"9129\"/>\n##       </node>\n##       <node id=\"2\" label=\"{occupation=professional/managerial} \">\n##         <viz:color r=\"100\" g=\"172\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3234\"/>\n##       </node>\n##       <node id=\"3\" label=\"{years in bay area=1-9} \">\n##         <viz:color r=\"100\" g=\"4\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3115\"/>\n##       </node>\n##       <node id=\"4\" label=\"{householder status=own} \">\n##         <viz:color r=\"100\" g=\"169\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3162\"/>\n##       </node>\n##       <node id=\"5\" label=\"{income=$40,000+} \">\n##         <viz:color r=\"100\" g=\"52\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3547\"/>\n##       </node>\n##       <node id=\"6\" label=\"{number of children=1+} \">\n##         <viz:color r=\"100\" g=\"159\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3550\"/>\n##       </node>\n##       <node id=\"7\" label=\"{marital status=married} \">\n##         <viz:color r=\"100\" g=\"96\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3064\"/>\n##       </node>\n##       <node id=\"8\" label=\"{marital status=single} \">\n##         <viz:color r=\"100\" g=\"142\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3328\"/>\n##       </node>\n##       <node id=\"9\" label=\"{age=35+} \">\n##         <viz:color r=\"100\" g=\"90\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3552\"/>\n##       </node>\n##       <node id=\"10\" label=\"{householder status=rent} \">\n##         <viz:color r=\"100\" g=\"19\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"11\" label=\"{sex=male} \">\n##         <viz:color r=\"100\" g=\"60\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4091\"/>\n##       </node>\n##       <node id=\"12\" label=\"{sex=female} \">\n##         <viz:color r=\"100\" g=\"181\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3303\"/>\n##       </node>\n##       <node id=\"13\" label=\"{age=14-34} \">\n##         <viz:color r=\"100\" g=\"165\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"14\" label=\"{type of home=house} \">\n##         <viz:color r=\"100\" g=\"85\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3880\"/>\n##       </node>\n##       <node id=\"15\" label=\"{dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"117\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3413\"/>\n##       </node>\n##       <node id=\"16\" label=\"{number of children=0} \">\n##         <viz:color r=\"100\" g=\"37\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3838\"/>\n##       </node>\n##       <node id=\"17\" label=\"{income=$0-$40,000} \">\n##         <viz:color r=\"100\" g=\"28\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4007\"/>\n##       </node>\n##       <node id=\"18\" label=\"{years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"25\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5122\"/>\n##       </node>\n##       <node id=\"19\" label=\"{ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"102\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5249\"/>\n##       </node>\n##       <node id=\"20\" label=\"{number in household=1} \">\n##         <viz:color r=\"100\" g=\"43\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5446\"/>\n##       </node>\n##       <node id=\"21\" label=\"{education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"111\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5426\"/>\n##       </node>\n##       <node id=\"22\" label=\"{marital status=single,age=14-34} \">\n##         <viz:color r=\"100\" g=\"31\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5532\"/>\n##       </node>\n##       <node id=\"23\" label=\"{marital status=single,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"73\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5801\"/>\n##       </node>\n##       <node id=\"24\" label=\"{age=14-34,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"1\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5019\"/>\n##       </node>\n##       <node id=\"25\" label=\"{income=$0-$40,000,marital status=single} \">\n##         <viz:color r=\"100\" g=\"30\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5579\"/>\n##       </node>\n##       <node id=\"26\" label=\"{marital status=single,language in home=english} \">\n##         <viz:color r=\"100\" g=\"79\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6014\"/>\n##       </node>\n##       <node id=\"27\" label=\"{marital status=single,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"24\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6595\"/>\n##       </node>\n##       <node id=\"28\" label=\"{age=35+,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"91\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6495\"/>\n##       </node>\n##       <node id=\"29\" label=\"{age=35+,language in home=english} \">\n##         <viz:color r=\"100\" g=\"87\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"6344\"/>\n##       </node>\n##       <node id=\"30\" label=\"{age=35+,number in household=1} \">\n##         <viz:color r=\"100\" g=\"147\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"31\" label=\"{number in household=1,householder status=rent} \">\n##         <viz:color r=\"100\" g=\"13\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"32\" label=\"{householder status=rent,language in home=english} \">\n##         <viz:color r=\"100\" g=\"112\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3655\"/>\n##       </node>\n##       <node id=\"33\" label=\"{sex=female,type of home=house} \">\n##         <viz:color r=\"100\" g=\"138\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"34\" label=\"{sex=female,number of children=0} \">\n##         <viz:color r=\"100\" g=\"120\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"35\" label=\"{income=$0-$40,000,sex=female} \">\n##         <viz:color r=\"100\" g=\"70\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"36\" label=\"{sex=female,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"135\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"37\" label=\"{sex=female,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"27\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3303\"/>\n##       </node>\n##       <node id=\"38\" label=\"{sex=female,number in household=1} \">\n##         <viz:color r=\"100\" g=\"97\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3303\"/>\n##       </node>\n##       <node id=\"39\" label=\"{sex=female,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"106\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3207\"/>\n##       </node>\n##       <node id=\"40\" label=\"{income=$0-$40,000,age=14-34} \">\n##         <viz:color r=\"100\" g=\"141\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"41\" label=\"{age=14-34,number of children=0} \">\n##         <viz:color r=\"100\" g=\"94\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"42\" label=\"{age=14-34,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"39\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3121\"/>\n##       </node>\n##       <node id=\"43\" label=\"{age=14-34,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"151\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3121\"/>\n##       </node>\n##       <node id=\"44\" label=\"{age=14-34,number in household=1} \">\n##         <viz:color r=\"100\" g=\"180\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3024\"/>\n##       </node>\n##       <node id=\"45\" label=\"{age=14-34,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"34\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3191\"/>\n##       </node>\n##       <node id=\"46\" label=\"{years in bay area=10+,type of home=house} \">\n##         <viz:color r=\"100\" g=\"115\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3191\"/>\n##       </node>\n##       <node id=\"47\" label=\"{type of home=house,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"75\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3122\"/>\n##       </node>\n##       <node id=\"48\" label=\"{number in household=1,type of home=house} \">\n##         <viz:color r=\"100\" g=\"184\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3019\"/>\n##       </node>\n##       <node id=\"49\" label=\"{education=no college graduate,type of home=house} \">\n##         <viz:color r=\"100\" g=\"196\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3200\"/>\n##       </node>\n##       <node id=\"50\" label=\"{dual incomes=not married,number of children=0} \">\n##         <viz:color r=\"100\" g=\"67\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3460\"/>\n##       </node>\n##       <node id=\"51\" label=\"{dual incomes=not married,number in household=1} \">\n##         <viz:color r=\"100\" g=\"21\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3742\"/>\n##       </node>\n##       <node id=\"52\" label=\"{income=$0-$40,000,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"42\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3534\"/>\n##       </node>\n##       <node id=\"53\" label=\"{education=no college graduate,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"175\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3703\"/>\n##       </node>\n##       <node id=\"54\" label=\"{years in bay area=10+,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"72\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3579\"/>\n##       </node>\n##       <node id=\"55\" label=\"{dual incomes=not married,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"9\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3579\"/>\n##       </node>\n##       <node id=\"56\" label=\"{income=$0-$40,000,number of children=0} \">\n##         <viz:color r=\"100\" g=\"130\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3576\"/>\n##       </node>\n##       <node id=\"57\" label=\"{years in bay area=10+,number of children=0} \">\n##         <viz:color r=\"100\" g=\"123\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3932\"/>\n##       </node>\n##       <node id=\"58\" label=\"{number of children=0,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"7\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3088\"/>\n##       </node>\n##       <node id=\"59\" label=\"{number in household=1,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"78\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3648\"/>\n##       </node>\n##       <node id=\"60\" label=\"{education=no college graduate,number of children=0} \">\n##         <viz:color r=\"100\" g=\"145\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3877\"/>\n##       </node>\n##       <node id=\"61\" label=\"{number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"100\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3050\"/>\n##       </node>\n##       <node id=\"62\" label=\"{number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"189\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3474\"/>\n##       </node>\n##       <node id=\"63\" label=\"{number in household=1,language in home=english} \">\n##         <viz:color r=\"100\" g=\"66\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3472\"/>\n##       </node>\n##       <node id=\"64\" label=\"{income=$0-$40,000,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"3\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4074\"/>\n##       </node>\n##       <node id=\"65\" label=\"{income=$0-$40,000,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"93\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4042\"/>\n##       </node>\n##       <node id=\"66\" label=\"{income=$0-$40,000,number in household=1} \">\n##         <viz:color r=\"100\" g=\"114\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4011\"/>\n##       </node>\n##       <node id=\"67\" label=\"{income=$0-$40,000,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"150\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3285\"/>\n##       </node>\n##       <node id=\"68\" label=\"{years in bay area=10+,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"139\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3834\"/>\n##       </node>\n##       <node id=\"69\" label=\"{years in bay area=10+,number in household=1} \">\n##         <viz:color r=\"100\" g=\"40\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3466\"/>\n##       </node>\n##       <node id=\"70\" label=\"{education=no college graduate,years in bay area=10+} \">\n##         <viz:color r=\"100\" g=\"144\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3466\"/>\n##       </node>\n##       <node id=\"71\" label=\"{education=no college graduate,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"127\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3682\"/>\n##       </node>\n##       <node id=\"72\" label=\"{education=no college graduate,number in household=1} \">\n##         <viz:color r=\"100\" g=\"76\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3726\"/>\n##       </node>\n##       <node id=\"73\" label=\"{marital status=single,age=14-34,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"99\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3726\"/>\n##       </node>\n##       <node id=\"74\" label=\"{income=$0-$40,000,marital status=single,age=14-34} \">\n##         <viz:color r=\"100\" g=\"201\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4177\"/>\n##       </node>\n##       <node id=\"75\" label=\"{income=$0-$40,000,marital status=single,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"148\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3450\"/>\n##       </node>\n##       <node id=\"76\" label=\"{income=$0-$40,000,age=14-34,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"192\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3749\"/>\n##       </node>\n##       <node id=\"77\" label=\"{marital status=single,age=14-34,language in home=english} \">\n##         <viz:color r=\"100\" g=\"199\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3931\"/>\n##       </node>\n##       <node id=\"78\" label=\"{marital status=single,dual incomes=not married,language in home=english} \">\n##         <viz:color r=\"100\" g=\"63\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4059\"/>\n##       </node>\n##       <node id=\"79\" label=\"{age=14-34,dual incomes=not married,language in home=english} \">\n##         <viz:color r=\"100\" g=\"108\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3403\"/>\n##       </node>\n##       <node id=\"80\" label=\"{income=$0-$40,000,age=14-34,language in home=english} \">\n##         <viz:color r=\"100\" g=\"171\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3550\"/>\n##       </node>\n##       <node id=\"81\" label=\"{age=14-34,education=no college graduate,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"36\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3447\"/>\n##       </node>\n##       <node id=\"82\" label=\"{income=$0-$40,000,age=14-34,education=no college graduate} \">\n##         <viz:color r=\"100\" g=\"10\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3650\"/>\n##       </node>\n##       <node id=\"83\" label=\"{dual incomes=not married,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"84\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4149\"/>\n##       </node>\n##       <node id=\"84\" label=\"{dual incomes=not married,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"174\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4149\"/>\n##       </node>\n##       <node id=\"85\" label=\"{dual incomes=not married,number in household=1,language in home=english} \">\n##         <viz:color r=\"100\" g=\"22\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4475\"/>\n##       </node>\n##       <node id=\"86\" label=\"{income=$0-$40,000,dual incomes=not married,number in household=1} \">\n##         <viz:color r=\"100\" g=\"88\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3431\"/>\n##       </node>\n##       <node id=\"87\" label=\"{income=$0-$40,000,education=no college graduate,dual incomes=not married} \">\n##         <viz:color r=\"100\" g=\"136\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5214\"/>\n##       </node>\n##       <node id=\"88\" label=\"{education=no college graduate,dual incomes=not married,language in home=english} \">\n##         <viz:color r=\"100\" g=\"64\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5214\"/>\n##       </node>\n##       <node id=\"89\" label=\"{income=$0-$40,000,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"69\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"5214\"/>\n##       </node>\n##       <node id=\"90\" label=\"{income=$0-$40,000,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"129\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3685\"/>\n##       </node>\n##       <node id=\"91\" label=\"{income=$0-$40,000,number in household=1,language in home=english} \">\n##         <viz:color r=\"100\" g=\"198\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3253\"/>\n##       </node>\n##       <node id=\"92\" label=\"{years in bay area=10+,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"103\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3559\"/>\n##       </node>\n##       <node id=\"93\" label=\"{years in bay area=10+,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"177\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3806\"/>\n##       </node>\n##       <node id=\"94\" label=\"{number in household=1,number of children=0,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"118\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3972\"/>\n##       </node>\n##       <node id=\"95\" label=\"{number of children=0,ethnic classification=white,language in home=english} \">\n##         <viz:color r=\"100\" g=\"33\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4455\"/>\n##       </node>\n##       <node id=\"96\" label=\"{number in household=1,ethnic classification=white,language in home=english} \">\n##         <viz:color r=\"100\" g=\"121\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4238\"/>\n##       </node>\n##       <node id=\"97\" label=\"{education=no college graduate,number in household=1,number of children=0} \">\n##         <viz:color r=\"100\" g=\"187\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4170\"/>\n##       </node>\n##       <node id=\"98\" label=\"{education=no college graduate,number of children=0,language in home=english} \">\n##         <viz:color r=\"100\" g=\"133\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4359\"/>\n##       </node>\n##       <node id=\"99\" label=\"{years in bay area=10+,number in household=1,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"186\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4942\"/>\n##       </node>\n##       <node id=\"100\" label=\"{education=no college graduate,number in household=1,ethnic classification=white} \">\n##         <viz:color r=\"100\" g=\"190\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4385\"/>\n##       </node>\n##       <node id=\"101\" label=\" {language in home=english}\">\n##         <viz:color r=\"100\" g=\"18\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"4203\"/>\n##       </node>\n##       <node id=\"102\" label=\" {type of home=house}\">\n##         <viz:color r=\"100\" g=\"55\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"103\" label=\" {education=no college graduate}\">\n##         <viz:color r=\"100\" g=\"132\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"104\" label=\" {age=14-34}\">\n##         <viz:color r=\"100\" g=\"166\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"105\" label=\" {dual incomes=not married}\">\n##         <viz:color r=\"100\" g=\"81\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3000\"/>\n##       </node>\n##       <node id=\"106\" label=\" {income=$0-$40,000}\">\n##         <viz:color r=\"100\" g=\"183\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"107\" label=\" {number in household=1}\">\n##         <viz:color r=\"100\" g=\"49\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"108\" label=\" {marital status=single}\">\n##         <viz:color r=\"100\" g=\"153\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"109\" label=\" {ethnic classification=white}\">\n##         <viz:color r=\"100\" g=\"109\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3240\"/>\n##       </node>\n##       <node id=\"110\" label=\" {number of children=0}\">\n##         <viz:color r=\"100\" g=\"124\" b=\"200\" a=\"1\"/>\n##         <viz:size value=\"3201\"/>\n##       </node>\n##     </nodes>\n##     <edges>\n##       <edge id=\"0\" source=\"1\" target=\"104\" weight=\"0.9129\"/>\n##       <edge id=\"1\" source=\"79\" target=\"104\" weight=\"0.9533\"/>\n##       <edge id=\"2\" source=\"79\" target=\"104\" weight=\"0.8815\"/>\n##       <edge id=\"3\" source=\"79\" target=\"104\" weight=\"0.8413\"/>\n##       <edge id=\"4\" source=\"24\" target=\"104\" weight=\"0.9439\"/>\n##       <edge id=\"5\" source=\"24\" target=\"104\" weight=\"0.9403\"/>\n##       <edge id=\"6\" source=\"24\" target=\"105\" weight=\"0.8104\"/>\n##       <edge id=\"7\" source=\"24\" target=\"105\" weight=\"0.88\"/>\n##       <edge id=\"8\" source=\"81\" target=\"105\" weight=\"0.9208\"/>\n##       <edge id=\"9\" source=\"45\" target=\"105\" weight=\"0.8934\"/>\n##       <edge id=\"10\" source=\"43\" target=\"105\" weight=\"1\"/>\n##       <edge id=\"11\" source=\"44\" target=\"105\" weight=\"0.8073\"/>\n##       <edge id=\"12\" source=\"41\" target=\"105\" weight=\"0.8916\"/>\n##       <edge id=\"13\" source=\"42\" target=\"105\" weight=\"0.9358\"/>\n##       <edge id=\"14\" source=\"13\" target=\"105\" weight=\"0.8144\"/>\n##       <edge id=\"15\" source=\"28\" target=\"103\" weight=\"0.9157\"/>\n##       <edge id=\"16\" source=\"29\" target=\"103\" weight=\"0.8983\"/>\n##       <edge id=\"17\" source=\"30\" target=\"103\" weight=\"0.9247\"/>\n##       <edge id=\"18\" source=\"9\" target=\"103\" weight=\"0.8966\"/>\n##       <edge id=\"19\" source=\"55\" target=\"103\" weight=\"0.913\"/>\n##       <edge id=\"20\" source=\"85\" target=\"103\" weight=\"0.9069\"/>\n##       <edge id=\"21\" source=\"83\" target=\"103\" weight=\"0.8896\"/>\n##       <edge id=\"22\" source=\"51\" target=\"103\" weight=\"0.9329\"/>\n##       <edge id=\"23\" source=\"51\" target=\"109\" weight=\"0.8063\"/>\n##       <edge id=\"24\" source=\"84\" target=\"106\" weight=\"0.8963\"/>\n##       <edge id=\"25\" source=\"50\" target=\"106\" weight=\"0.93\"/>\n##       <edge id=\"26\" source=\"50\" target=\"106\" weight=\"0.9848\"/>\n##       <edge id=\"27\" source=\"15\" target=\"106\" weight=\"0.9388\"/>\n##       <edge id=\"28\" source=\"88\" target=\"106\" weight=\"0.8996\"/>\n##       <edge id=\"29\" source=\"53\" target=\"106\" weight=\"1\"/>\n##       <edge id=\"30\" source=\"53\" target=\"106\" weight=\"0.8934\"/>\n##       <edge id=\"31\" source=\"71\" target=\"106\" weight=\"0.8313\"/>\n##       <edge id=\"32\" source=\"100\" target=\"101\" weight=\"0.8209\"/>\n##       <edge id=\"33\" source=\"97\" target=\"101\" weight=\"0.9084\"/>\n##       <edge id=\"34\" source=\"72\" target=\"101\" weight=\"0.8866\"/>\n##       <edge id=\"35\" source=\"98\" target=\"101\" weight=\"0.8884\"/>\n##       <edge id=\"36\" source=\"60\" target=\"101\" weight=\"0.8073\"/>\n##       <edge id=\"37\" source=\"60\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"38\" source=\"49\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"39\" source=\"70\" target=\"101\" weight=\"0.8916\"/>\n##       <edge id=\"40\" source=\"21\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"41\" source=\"19\" target=\"101\" weight=\"0.9889\"/>\n##       <edge id=\"42\" source=\"4\" target=\"101\" weight=\"0.8043\"/>\n##       <edge id=\"43\" source=\"4\" target=\"101\" weight=\"0.9519\"/>\n##       <edge id=\"44\" source=\"32\" target=\"101\" weight=\"0.9348\"/>\n##       <edge id=\"45\" source=\"10\" target=\"101\" weight=\"0.8314\"/>\n##       <edge id=\"46\" source=\"10\" target=\"101\" weight=\"0.9238\"/>\n##       <edge id=\"47\" source=\"76\" target=\"101\" weight=\"0.9398\"/>\n##       <edge id=\"48\" source=\"76\" target=\"101\" weight=\"0.9106\"/>\n##       <edge id=\"49\" source=\"82\" target=\"101\" weight=\"0.9344\"/>\n##       <edge id=\"50\" source=\"80\" target=\"101\" weight=\"0.987\"/>\n##       <edge id=\"51\" source=\"80\" target=\"101\" weight=\"0.9463\"/>\n##       <edge id=\"52\" source=\"40\" target=\"101\" weight=\"0.9139\"/>\n##       <edge id=\"53\" source=\"40\" target=\"101\" weight=\"0.8141\"/>\n##       <edge id=\"54\" source=\"40\" target=\"101\" weight=\"0.8198\"/>\n##       <edge id=\"55\" source=\"86\" target=\"101\" weight=\"0.8134\"/>\n##       <edge id=\"56\" source=\"52\" target=\"101\" weight=\"0.8945\"/>\n##       <edge id=\"57\" source=\"52\" target=\"101\" weight=\"0.9183\"/>\n##       <edge id=\"58\" source=\"87\" target=\"101\" weight=\"0.8354\"/>\n##       <edge id=\"59\" source=\"67\" target=\"101\" weight=\"0.8881\"/>\n##       <edge id=\"60\" source=\"65\" target=\"101\" weight=\"0.9181\"/>\n##       <edge id=\"61\" source=\"74\" target=\"101\" weight=\"0.9811\"/>\n##       <edge id=\"62\" source=\"75\" target=\"101\" weight=\"0.9277\"/>\n##       <edge id=\"63\" source=\"25\" target=\"101\" weight=\"0.8875\"/>\n##       <edge id=\"64\" source=\"25\" target=\"101\" weight=\"0.9263\"/>\n##       <edge id=\"65\" source=\"91\" target=\"101\" weight=\"0.9875\"/>\n##       <edge id=\"66\" source=\"89\" target=\"101\" weight=\"0.9488\"/>\n##       <edge id=\"67\" source=\"66\" target=\"101\" weight=\"0.8987\"/>\n##       <edge id=\"68\" source=\"90\" target=\"101\" weight=\"0.8729\"/>\n##       <edge id=\"69\" source=\"56\" target=\"101\" weight=\"0.8237\"/>\n##       <edge id=\"70\" source=\"56\" target=\"101\" weight=\"0.9275\"/>\n##       <edge id=\"71\" source=\"35\" target=\"101\" weight=\"0.8062\"/>\n##       <edge id=\"72\" source=\"64\" target=\"101\" weight=\"0.8217\"/>\n##       <edge id=\"73\" source=\"64\" target=\"101\" weight=\"0.9037\"/>\n##       <edge id=\"74\" source=\"17\" target=\"101\" weight=\"0.9212\"/>\n##       <edge id=\"75\" source=\"17\" target=\"101\" weight=\"0.9813\"/>\n##       <edge id=\"76\" source=\"5\" target=\"101\" weight=\"0.9343\"/>\n##       <edge id=\"77\" source=\"7\" target=\"101\" weight=\"0.8951\"/>\n##       <edge id=\"78\" source=\"73\" target=\"101\" weight=\"0.8844\"/>\n##       <edge id=\"79\" source=\"73\" target=\"101\" weight=\"0.9225\"/>\n##       <edge id=\"80\" source=\"77\" target=\"101\" weight=\"0.8903\"/>\n##       <edge id=\"81\" source=\"22\" target=\"101\" weight=\"0.9429\"/>\n##       <edge id=\"82\" source=\"22\" target=\"101\" weight=\"0.915\"/>\n##       <edge id=\"83\" source=\"22\" target=\"101\" weight=\"0.8296\"/>\n##       <edge id=\"84\" source=\"78\" target=\"101\" weight=\"0.9869\"/>\n##       <edge id=\"85\" source=\"23\" target=\"101\" weight=\"0.8603\"/>\n##       <edge id=\"86\" source=\"23\" target=\"101\" weight=\"0.9424\"/>\n##       <edge id=\"87\" source=\"23\" target=\"101\" weight=\"0.8987\"/>\n##       <edge id=\"88\" source=\"27\" target=\"101\" weight=\"0.8027\"/>\n##       <edge id=\"89\" source=\"26\" target=\"101\" weight=\"0.9241\"/>\n##       <edge id=\"90\" source=\"26\" target=\"101\" weight=\"0.8422\"/>\n##       <edge id=\"91\" source=\"8\" target=\"101\" weight=\"0.9213\"/>\n##       <edge id=\"92\" source=\"8\" target=\"101\" weight=\"0.9842\"/>\n##       <edge id=\"93\" source=\"8\" target=\"101\" weight=\"0.9276\"/>\n##       <edge id=\"94\" source=\"8\" target=\"101\" weight=\"0.8876\"/>\n##       <edge id=\"95\" source=\"96\" target=\"101\" weight=\"0.9861\"/>\n##       <edge id=\"96\" source=\"59\" target=\"101\" weight=\"0.9487\"/>\n##       <edge id=\"97\" source=\"59\" target=\"101\" weight=\"0.9193\"/>\n##       <edge id=\"98\" source=\"31\" target=\"101\" weight=\"0.9881\"/>\n##       <edge id=\"99\" source=\"63\" target=\"101\" weight=\"0.9827\"/>\n##       <edge id=\"100\" source=\"94\" target=\"101\" weight=\"0.9305\"/>\n##       <edge id=\"101\" source=\"61\" target=\"101\" weight=\"0.8209\"/>\n##       <edge id=\"102\" source=\"48\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"103\" source=\"20\" target=\"101\" weight=\"0.9084\"/>\n##       <edge id=\"104\" source=\"95\" target=\"101\" weight=\"0.8383\"/>\n##       <edge id=\"105\" source=\"58\" target=\"101\" weight=\"0.8866\"/>\n##       <edge id=\"106\" source=\"58\" target=\"101\" weight=\"1\"/>\n##       <edge id=\"107\" source=\"62\" target=\"101\" weight=\"0.8884\"/>\n##       <edge id=\"108\" source=\"16\" target=\"101\" weight=\"0.824\"/>\n##       <edge id=\"109\" source=\"16\" target=\"101\" weight=\"0.8944\"/>\n##       <edge id=\"110\" source=\"6\" target=\"108\" weight=\"0.814\"/>\n##       <edge id=\"111\" source=\"6\" target=\"108\" weight=\"0.8256\"/>\n##       <edge id=\"112\" source=\"2\" target=\"108\" weight=\"0.8865\"/>\n##       <edge id=\"113\" source=\"39\" target=\"107\" weight=\"0.8062\"/>\n##       <edge id=\"114\" source=\"37\" target=\"107\" weight=\"0.8808\"/>\n##       <edge id=\"115\" source=\"38\" target=\"107\" weight=\"0.8286\"/>\n##       <edge id=\"116\" source=\"34\" target=\"107\" weight=\"0.9396\"/>\n##       <edge id=\"117\" source=\"33\" target=\"107\" weight=\"0.8843\"/>\n##       <edge id=\"118\" source=\"36\" target=\"107\" weight=\"0.8283\"/>\n##       <edge id=\"119\" source=\"12\" target=\"107\" weight=\"0.9321\"/>\n##       <edge id=\"120\" source=\"11\" target=\"107\" weight=\"0.8938\"/>\n##       <edge id=\"121\" source=\"47\" target=\"107\" weight=\"0.8205\"/>\n##       <edge id=\"122\" source=\"14\" target=\"107\" weight=\"0.9346\"/>\n##       <edge id=\"123\" source=\"3\" target=\"107\" weight=\"0.8959\"/>\n##       <edge id=\"124\" source=\"54\" target=\"107\" weight=\"0.8008\"/>\n##       <edge id=\"125\" source=\"68\" target=\"107\" weight=\"0.9502\"/>\n##       <edge id=\"126\" source=\"99\" target=\"107\" weight=\"0.8972\"/>\n##       <edge id=\"127\" source=\"92\" target=\"110\" weight=\"0.9881\"/>\n##       <edge id=\"128\" source=\"69\" target=\"110\" weight=\"0.9162\"/>\n##       <edge id=\"129\" source=\"93\" target=\"110\" weight=\"0.8296\"/>\n##       <edge id=\"130\" source=\"57\" target=\"110\" weight=\"0.9347\"/>\n##       <edge id=\"131\" source=\"57\" target=\"110\" weight=\"0.8702\"/>\n##       <edge id=\"132\" source=\"46\" target=\"110\" weight=\"0.9889\"/>\n##       <edge id=\"133\" source=\"18\" target=\"102\" weight=\"0.9875\"/>\n##     </edges>\n##   </graph>\n## </gexf>\n```\n\n### \u203bsink()\u95a2\u6570\u3067\u73fe\u5728\u306e\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d5\u30a1\u30a4\u30eb\u51fa\u529b\n```{r}\nsink(file=\"SanFrancisco.AssociationRules.gexf\")\nprint(gexf.file)\nsink()\n```\n\n```{r}\ndir()\n```\n\n```\n[1] \"SanFrancisco.AssociationRules_with.size.color.gexf\"\n```\n\n\n### _**Gephi**_ \u3092\u7acb\u3061\u4e0a\u3052\u308b\n#### \u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\n![1.png](https://qiita-image-store.s3.amazonaws.com/0/43487/c012b827-1458-405f-8602-2290ed4dd26e.png)\n\n\n#### \u300cFile\u300d\u21d2 \u300cOpen\u300d\n![3.png](https://qiita-image-store.s3.amazonaws.com/0/43487/96d25747-3725-12a3-5e4a-ea10d1146f63.png)\n\n#### \u3055\u304d\u307b\u3069\u51fa\u529b\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5148\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u3001\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\n![4.png](https://qiita-image-store.s3.amazonaws.com/0/43487/481b4285-a89a-f6eb-7fc5-756d4c7428d3.png)\n\n\n#### \u300cOpen\u300d\u3092\u62bc\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u753b\u9762\u304c\u3067\u308b\uff08GEXF\u30d5\u30a1\u30a4\u30eb\u53d6\u308a\u8fbc\u307f\u6210\u529f\uff09\n![5.png](https://qiita-image-store.s3.amazonaws.com/0/43487/5e6ba44f-4361-6224-45e3-3f7048a7dd73.png)\n\n#### \u300cOK\u300d\u3092\u62bc\u3059\u3068\u3001\u753b\u9762\u306b\u30b0\u30e9\u30d5\u304c\u8868\u793a\u3055\u308c\u308b\n![6.png](https://qiita-image-store.s3.amazonaws.com/0/43487/40e5f59d-e7ac-1628-d3c6-330c1987d86b.png)\n\n#### \u63cf\u753b\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u3001 _**Fluchterman Reingold**_  \u306b\u8a2d\u5b9a\u3059\u308b\n![change.png](https://qiita-image-store.s3.amazonaws.com/0/43487/ace0a44b-7f76-379c-2bda-6fad78c8cc53.png)\n\n#### \u9078\u629e\u3057\u305f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u30b0\u30e9\u30d5\u304c\u518d\u63cf\u753b\u3055\u308c\u305f\n![8.png](https://qiita-image-store.s3.amazonaws.com/0/43487/ac8c71da-0224-96ae-523b-ac94b18f29f4.png)\n\n- \u3010\u30ce\u30fc\u30c9\u306e\u5927\u304d\u3055\u3011 \u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306elift\u5024\u306e\u5927\u304d\u3044\u307b\u3069\uff08\u30ce\u30fc\u30c9\u3082\uff09\u5927\u304d\u3044  \n- \u3010\u30ce\u30fc\u30c9\u306e\u8272\u3011\uff08\u30a2\u30bd\u30b7\u30a8\u30fc\u30b7\u30e7\u30f3\u5206\u6790\u7d50\u679c\u306e\uff09support\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u3001\u7dd1\u8272\u306e\u6210\u5206\u304c\u6fc3\u3044               \uff08\u203bRGB\u5024\u306e\u3046\u3061\u3001\u8d64\u3068\u9752\u306e\u8981\u7d20\u306f\u5168\u30ce\u30fc\u30c9\u540c\u3058\u5024\u3092\u8a2d\u5b9a\uff09\n\n\n#### \u753b\u9762\u4e0b\u90e8\u306e\u300c\uff34\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u3001\u30b0\u30e9\u30d5\u306b\u30ce\u30fc\u30c9\u306e\u30e9\u30d9\u30eb\u3092\u8868\u793a\n![9.png](https://qiita-image-store.s3.amazonaws.com/0/43487/7e6cba0c-0b05-5b5f-63b3-83a5ebf1cf6f.png)\n\n#### \u30ce\u30fc\u30c9\u306b\u30ce\u30fc\u30c9\u540d\uff08\u30e9\u30d9\u30eb\uff09\u304c\u8868\u793a\u3055\u308c\u305f\n\n![10.png](https://qiita-image-store.s3.amazonaws.com/0/43487/d63fd984-8bd1-8be5-cb2f-705a29cf731f.png)\n\n\n#### \u30de\u30a6\u30b9\u30db\u30a4\u30fc\u30eb\u3092\u4e0a\u306b\u56de\u3057\u3066\u3001\u62e1\u5927\n\n![11.png](https://qiita-image-store.s3.amazonaws.com/0/43487/c247d2dd-f018-ba21-069c-a4089e1acac4.png)\n\n#### \u3007\u306e\u30ce\u30fc\u30c9\u306e\u3044\u305a\u308c\u304b\u306b\u30de\u30a6\u30b9\u30dd\u30a4\u30f3\u30bf\u3092\u3042\u3066\u308b\n####### \uff08\u305d\u306e\u30ce\u30fc\u30c9\u3068\u30a8\u30c3\u30b8\u3067\u3064\u306a\u304c\u3063\u3066\u3044\u308b\u76f8\u624b\u5148\u306e\u30ce\u30fc\u30c9\u304c\u6d6e\u304b\u3073\u4e0a\u304c\u3063\u3066\u30cf\u30a4\u30e9\u30a4\u30c8\u8868\u793a\u3055\u308c\u308b\uff09\n![12.png](https://qiita-image-store.s3.amazonaws.com/0/43487/a4b2faca-e826-338b-9b91-7f4460a4971b.png)\n\n![13.png](https://qiita-image-store.s3.amazonaws.com/0/43487/ba08d305-2377-c290-8492-226287d89436.png)\n\n## _**Gephi**_ \u3067\u63cf\u753b\u3067\u304d\u305f\uff01 :laughing: \n\n### \uff08\u5b8c\u4e86\uff09\n\n# \u3010 \u53c2\u8003\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8 \u3011\n##### \uff08\uff11\uff09[Fun with R   _\"Network visualization \u2013 part 2: Gephi\"_ \u3078\u306e\u30ea\u30f3\u30af](http://www.vesnam.com/Rblog/viznets2/)\n\n##### \uff08 _Python_ \u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u4f8b \uff09\n##### \uff08\uff12\uff09 [Ars longa, vita brevis _\uff082013\u5e741\u670818\u65e5\u63b2\u8f09\u8a18\u4e8b\uff09\u300cNetworkX \u3092\u4f7f\u3063\u3066 GEXF \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b\u300d_  \u3078\u306e\u30ea\u30f3\u30af](http://kshigeru.blogspot.jp/2013/01/use-networkx.html)\n"}