{"context": "\n\n\u30d5\u30ed\u30fc\n\nKINTONE\u3067\u5165\u308c\u7269\u3092\u4f5c\u308b\nPython\u3067\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3059\u308b\n\n\nfileKey\u3092\u53d6\u5f97\u3059\u308b\n\u30ec\u30b3\u30fc\u30c9\u306b\u7d50\u5408\u3059\u308b\n\n\n\u3046\u308c\u3057\u3044\n\n\nKITONE\u306e\u5165\u308c\u7269\n\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\u304c\"Attch\"\u306e\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u306e\u5165\u308c\u7269\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nPython\u3067\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3059\u308b\nKINTONE\u3067\u30ec\u30b3\u30fc\u30c9\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u6dfb\u4ed8\u3059\u308b\u306b\u306f\u3001\n\n\u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\u30ec\u30b3\u30fc\u30c9\u3068\u7d50\u5408\n\n\u3068\u3044\u3046\u624b\u9806\u3092\u8e0f\u307f\u307e\u3059\u3002\n\u305d\u308c\u3092Python\u3067\u66f8\u304f\u3068\u2193\n#!/usr/bin/python\n# coding:utf-8\n\nimport requests\nimport json\n\nURL = \"https://xxxxx.cybozu.com:443\" # kintone\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3(xxx.cybozu.com)\nAPP_ID = \"ID\" # kintone\u306e\u30a2\u30d7\u30eaID\nAPI_TOKEN = \"APP TOKEN\" # kintone\u306eAPI\u30c8\u30fc\u30af\u30f3\nKNT_PASS = \"xxxxxx\" # \u30ed\u30b0\u30a4\u30f3\u30cd\u30fc\u30e0:\u30d1\u30b9\u30ef\u30fc\u30c9 \u3092base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\n\n#KINTONE\u30a2\u30d7\u30ea\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\n#\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb   Attch\n\n\nclass KINTONE:\n    def UploadToKintone(self, url, knt_pass,path,filename):\n        img = open(path + filename, 'rb')\n        files={'file':(filename,img,'image/jpeg')}\n\n        headers = {\"X-Cybozu-Authorization\": knt_pass , 'X-Requested-With': 'XMLHttpRequest'} \n        resp=requests.post(url+\"/k/v1/file.json\",files=files,headers=headers)\n\n        return resp \n\n    def PostToKintone(self,url,appId,apiToken,filekey):\n        record = {\n            \"Attch\":{'type':\"FILE\",\"value\" :[{'fileKey':filekey}]}\n            #\u4ed6\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u30c7\u30fc\u30bf\u3092\u633f\u5165\u3059\u308b\u5834\u5408\u306f','\u3067\u533a\u5207\u308b\n        }\n        data = {'app':appId,'record':record}\n        headers = {\"X-Cybozu-API-Token\": apiToken, \"Content-Type\" : \"application/json\"}\n        resp=requests.post(url+'/k/v1/record.json',json=data,headers=headers)\n\n        return resp\n\nif __name__ == '__main__':\n    Path='/tmp/' #\u30d5\u30a1\u30a4\u30eb\u4fdd\u5b58\u30d1\u30b9\n    FileName='image.jpg' #\u30d5\u30a1\u30a4\u30eb\u540d\n\n    knt=KINTONE()\n    resp=knt.UploadToKintone(URL, KNT_PASS,Path,FileName)\n\n    txt=json.loads(resp.text)\n    FileKey=txt['fileKey']\n    resp=knt.PostToKintone(URL, APP_ID, API_TOKEN,FileKey)\n    print resp.text\n\n\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u306f\n{\"id\":\"1\",\"revision\":\"1\"}\n\n\u3068\u306a\u308a\u5e78\u305b\u306a\u6c17\u5206\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n#\u30d5\u30ed\u30fc\n1. KINTONE\u3067\u5165\u308c\u7269\u3092\u4f5c\u308b\n2. Python\u3067\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3059\u308b\n   - fileKey\u3092\u53d6\u5f97\u3059\u308b\n   - \u30ec\u30b3\u30fc\u30c9\u306b\u7d50\u5408\u3059\u308b\n3. \u3046\u308c\u3057\u3044\n\n#KITONE\u306e\u5165\u308c\u7269\n\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\u304c\"Attch\"\u306e\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u306e\u5165\u308c\u7269\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n#Python\u3067\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u3092\u9001\u4fe1\u3059\u308b\nKINTONE\u3067\u30ec\u30b3\u30fc\u30c9\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u6dfb\u4ed8\u3059\u308b\u306b\u306f\u3001\n\n- \u30d5\u30a1\u30a4\u30eb\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n- \u30ec\u30b3\u30fc\u30c9\u3068\u7d50\u5408\n\n\u3068\u3044\u3046\u624b\u9806\u3092\u8e0f\u307f\u307e\u3059\u3002\n\n\u305d\u308c\u3092Python\u3067\u66f8\u304f\u3068\u2193\n\n```python\n#!/usr/bin/python\n# coding:utf-8\n\nimport requests\nimport json\n\nURL = \"https://xxxxx.cybozu.com:443\" # kintone\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3(xxx.cybozu.com)\nAPP_ID = \"ID\" # kintone\u306e\u30a2\u30d7\u30eaID\nAPI_TOKEN = \"APP TOKEN\" # kintone\u306eAPI\u30c8\u30fc\u30af\u30f3\nKNT_PASS = \"xxxxxx\" # \u30ed\u30b0\u30a4\u30f3\u30cd\u30fc\u30e0:\u30d1\u30b9\u30ef\u30fc\u30c9 \u3092base64\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\n\n#KINTONE\u30a2\u30d7\u30ea\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u30b3\u30fc\u30c9\n#\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb   Attch\n\n\nclass KINTONE:\n    def UploadToKintone(self, url, knt_pass,path,filename):\n        img = open(path + filename, 'rb')\n        files={'file':(filename,img,'image/jpeg')}\n\n        headers = {\"X-Cybozu-Authorization\": knt_pass , 'X-Requested-With': 'XMLHttpRequest'} \n        resp=requests.post(url+\"/k/v1/file.json\",files=files,headers=headers)\n\n        return resp \n    \n    def PostToKintone(self,url,appId,apiToken,filekey):\n        record = {\n            \"Attch\":{'type':\"FILE\",\"value\" :[{'fileKey':filekey}]}\n            #\u4ed6\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u30c7\u30fc\u30bf\u3092\u633f\u5165\u3059\u308b\u5834\u5408\u306f','\u3067\u533a\u5207\u308b\n        }\n        data = {'app':appId,'record':record}\n        headers = {\"X-Cybozu-API-Token\": apiToken, \"Content-Type\" : \"application/json\"}\n        resp=requests.post(url+'/k/v1/record.json',json=data,headers=headers)\n        \n        return resp\n\nif __name__ == '__main__':\n    Path='/tmp/' #\u30d5\u30a1\u30a4\u30eb\u4fdd\u5b58\u30d1\u30b9\n    FileName='image.jpg' #\u30d5\u30a1\u30a4\u30eb\u540d\n    \n    knt=KINTONE()\n    resp=knt.UploadToKintone(URL, KNT_PASS,Path,FileName)\n\n    txt=json.loads(resp.text)\n    FileKey=txt['fileKey']\n    resp=knt.PostToKintone(URL, APP_ID, API_TOKEN,FileKey)\n    print resp.text\n```\n\n\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u306f\n\n```script\n{\"id\":\"1\",\"revision\":\"1\"}\n```\n\n\u3068\u306a\u308a\u5e78\u305b\u306a\u6c17\u5206\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n\n\n\n", "tags": ["Python", "kintone", "Requests"]}