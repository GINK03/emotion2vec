{"context": "Springboot\u3067HierarchicalContextRunner\u3092\u4f7f\u7528\u3057\u3066\u3001\u30c6\u30b9\u30c8\u306e\u968e\u5c64\u5316\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\n\u4f9d\u5b58\u95a2\u4fc2\n\npom.xml\n<dependency>\n  <groupId>de.bechte.junit</groupId>\n  <artifactId>junit-hierarchicalcontextrunner</artifactId>\n  <version>4.12.1</version>\n  <scope>test</scope>\n</dependency>\n\n\n\n\u5b9f\u88c5\n\nController\u30af\u30e9\u30b9\u306e\u30c6\u30b9\u30c8\u3092\u60f3\u5b9a\u3057\u3066\u307e\u3059\u3002\n\n\nHogeControllerTest.java\n@RunWith(HierarchicalContextRunner.class) --(1)\npublic class HogeControllerTest {\n    /**\n     * \u30d9\u30fc\u30b9\u30af\u30e9\u30b9\n     */\n    @RunWith(SpringRunner.class)\n    @SpringBootTest\n    @AutoConfigureMockMvc\n    @WebAppConfiguration\n    public static class HogeControllerTestBase { --(2)\n        @ClassRule\n        public static final SpringClassRule SPRING_CLASS_RULE = new SpringClassRule(); --(3)\n\n        @Rule\n        public final SpringMethodRule springMethodRule = new SpringMethodRule(); --(3)\n\n        @Autowired\n        protected MockMvc mockMvc;\n\n        @MockBean\n        protected HogeService service;\n    }\n\n    /**\n     * \u4e00\u89a7\u753b\u9762\u306e\u30c6\u30b9\u30c8\n     */\n    public class HogeControllerTest_\u307b\u3052\u4e00\u89a7\u753b\u9762 extends HogeControllerTestBase { --(4)\n        @Test\n        @WithMockUser(username=\"test\")\n        public void indexTest_\u6b63\u5e38\u7cfb() throws Exception {\n            // \u4f55\u304b\u3057\u3089\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n        }\n    }\n\n    /**\n     * \u7de8\u96c6\u753b\u9762\u306e\u30c6\u30b9\u30c8\n     */\n    public class HogeControllerTest_\u307b\u3052\u7de8\u96c6\u753b\u9762 extends HogeControllerTestBase { --(4)\n        @Test\n        @WithMockUser(username=\"test\")\n        public void updateTest_\u6b63\u5e38\u7cfb() throws Exception {\n            // \u4f55\u304b\u3057\u3089\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n        }\n    }\n}\n\n\n\n(1) \u30e9\u30f3\u30ca\u30fc\u6307\u5b9a\n\n\u968e\u5c64\u5316\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306bHierarchicalContextRunner\u3092\u30e9\u30f3\u30ca\u30fc\u3068\u3057\u3066\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u968e\u5c64\u5316\u3059\u308b\u624b\u6cd5\u3068\u3057\u3066\u306fenclosed.class\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3061\u3089\u306e\u307b\u3046\u304c\u67d4\u8edf\u306b\u968e\u5c64\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n(2) \u57fa\u5e95\u30af\u30e9\u30b9\n\n\u975e\u30c6\u30b9\u30c8\u5bfe\u8c61\u3068\u3057\u3066\u5ba3\u8a00\u3059\u308b\u305f\u3081\u3001static\u306a\u30a4\u30f3\u30ca\u30fc\u30af\u30e9\u30b9\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u4ed8\u4e0e\u3059\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u304a\u6c7a\u307e\u308a\u306e\u3084\u3064\u3067\u3059\u3002\u3053\u3053\u3089\u3078\u3093\u306f\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5316\u3057\u3066\u3082\u3044\u3044\u304b\u3082\u3002\n\n\n(3) SpringClassRule\u3001SpringMethodRule\n\nJUnit\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308bTheories\u3084Parameterized\u30e9\u30f3\u30ca\u30fc\u3092\u4f7f\u7528\u3057\u305f\u3044\u3068\u304d\u3084\u3001Mockito\u306a\u3069\u306e\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30e9\u30f3\u30ca\u30fc\u3092\u4f7f\u7528\u3057\u305f\u3044\u6642\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\nSpring JUnit 4 Rules\n\n\n\n(4) \u30c6\u30b9\u30c8\u5b9f\u88c5\u30af\u30e9\u30b9\n\n\u57fa\u5e95\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u3001public\u3067\u975estatic\u306a\u30af\u30e9\u30b9\u3068\u3057\u307e\u3059\u3002\n\n\n\u53c2\u8003\n\nJUnit 4.12 \u306e\u968e\u5c64\u69cb\u9020\u3068 JMockit \u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u3046\n\nSpringboot\u3067HierarchicalContextRunner\u3092\u4f7f\u7528\u3057\u3066\u3001\u30c6\u30b9\u30c8\u306e\u968e\u5c64\u5316\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\n## \u4f9d\u5b58\u95a2\u4fc2\n```XML:pom.xml\n<dependency>\n  <groupId>de.bechte.junit</groupId>\n  <artifactId>junit-hierarchicalcontextrunner</artifactId>\n  <version>4.12.1</version>\n  <scope>test</scope>\n</dependency>\n```\n## \u5b9f\u88c5\n* Controller\u30af\u30e9\u30b9\u306e\u30c6\u30b9\u30c8\u3092\u60f3\u5b9a\u3057\u3066\u307e\u3059\u3002\n\n```java:HogeControllerTest.java\n@RunWith(HierarchicalContextRunner.class) --(1)\npublic class HogeControllerTest {\n    /**\n     * \u30d9\u30fc\u30b9\u30af\u30e9\u30b9\n     */\n    @RunWith(SpringRunner.class)\n    @SpringBootTest\n    @AutoConfigureMockMvc\n    @WebAppConfiguration\n    public static class HogeControllerTestBase { --(2)\n        @ClassRule\n        public static final SpringClassRule SPRING_CLASS_RULE = new SpringClassRule(); --(3)\n \n        @Rule\n        public final SpringMethodRule springMethodRule = new SpringMethodRule(); --(3)\n \n        @Autowired\n        protected MockMvc mockMvc;\n \n        @MockBean\n        protected HogeService service;\n    }\n \n    /**\n     * \u4e00\u89a7\u753b\u9762\u306e\u30c6\u30b9\u30c8\n     */\n    public class HogeControllerTest_\u307b\u3052\u4e00\u89a7\u753b\u9762 extends HogeControllerTestBase { --(4)\n        @Test\n        @WithMockUser(username=\"test\")\n        public void indexTest_\u6b63\u5e38\u7cfb() throws Exception {\n            // \u4f55\u304b\u3057\u3089\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n        }\n    }\n \n    /**\n     * \u7de8\u96c6\u753b\u9762\u306e\u30c6\u30b9\u30c8\n     */\n    public class HogeControllerTest_\u307b\u3052\u7de8\u96c6\u753b\u9762 extends HogeControllerTestBase { --(4)\n        @Test\n        @WithMockUser(username=\"test\")\n        public void updateTest_\u6b63\u5e38\u7cfb() throws Exception {\n            // \u4f55\u304b\u3057\u3089\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n        }\n    }\n}\n```\n#### (1) \u30e9\u30f3\u30ca\u30fc\u6307\u5b9a\n* \u968e\u5c64\u5316\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306bHierarchicalContextRunner\u3092\u30e9\u30f3\u30ca\u30fc\u3068\u3057\u3066\u6307\u5b9a\u3057\u307e\u3059\u3002\n* \u968e\u5c64\u5316\u3059\u308b\u624b\u6cd5\u3068\u3057\u3066\u306fenclosed.class\u3082\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3061\u3089\u306e\u307b\u3046\u304c\u67d4\u8edf\u306b\u968e\u5c64\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n#### (2) \u57fa\u5e95\u30af\u30e9\u30b9\n* \u975e\u30c6\u30b9\u30c8\u5bfe\u8c61\u3068\u3057\u3066\u5ba3\u8a00\u3059\u308b\u305f\u3081\u3001static\u306a\u30a4\u30f3\u30ca\u30fc\u30af\u30e9\u30b9\u3068\u3057\u3066\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n* \u4ed8\u4e0e\u3059\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u304a\u6c7a\u307e\u308a\u306e\u3084\u3064\u3067\u3059\u3002\u3053\u3053\u3089\u3078\u3093\u306f\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5316\u3057\u3066\u3082\u3044\u3044\u304b\u3082\u3002\n\n#### (3) SpringClassRule\u3001SpringMethodRule\n* JUnit\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308bTheories\u3084Parameterized\u30e9\u30f3\u30ca\u30fc\u3092\u4f7f\u7528\u3057\u305f\u3044\u3068\u304d\u3084\u3001Mockito\u306a\u3069\u306e\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308b\u30e9\u30f3\u30ca\u30fc\u3092\u4f7f\u7528\u3057\u305f\u3044\u6642\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002   \n[Spring JUnit 4 Rules](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#testcontext-junit4-rules)\n\n#### (4) \u30c6\u30b9\u30c8\u5b9f\u88c5\u30af\u30e9\u30b9\n* \u57fa\u5e95\u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u3066\u3001public\u3067\u975estatic\u306a\u30af\u30e9\u30b9\u3068\u3057\u307e\u3059\u3002\n\n## \u53c2\u8003\n* [JUnit 4.12 \u306e\u968e\u5c64\u69cb\u9020\u3068 JMockit \u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u4f7f\u3046](http://qiita.com/opengl-8080/items/780511744253fc91a7ec)\n", "tags": ["junit4", "spring-boot"]}