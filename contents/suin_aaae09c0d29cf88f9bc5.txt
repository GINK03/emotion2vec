{"tags": ["JavaScript", "babel", "es2015", "Facebook", "Twitter"], "context": " More than 1 year has passed since last update.Facebook\u30fbTwitter\u30fb\u306f\u3066\u3076\u306e\u30b7\u30a7\u30a2\u6570\u306f\u3001JSONP\u3067\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eJS\u3067\u5404SNS\u306e\u30b7\u30a7\u30a2\u6570\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u3067\u304d\u3066\u3057\u307e\u3046\u3002Google+\u306f\u3001JSONP\u306eAPI\u304c\u7121\u3044\u305f\u3081\u76f4\u63a5\u53d6\u5f97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3063\u307d\u3044\u3002\n\u4ee5\u4e0b\u304c\u5404SNS\u304b\u3089\u30b7\u30a7\u30a2\u6570\u3092\u53d6\u5f97\u3059\u308b\u95a2\u6570\u3002Babel\u3092\u4f7f\u3063\u3066\u3001ES2015/ES7\u3067\u66f8\u3044\u3066\u3042\u308b\u3002\n\u307e\u305f\u3001HTTPS\u306e\u30b5\u30a4\u30c8\u3067\u3082JSONP\u3067\u304d\u308b\u3088\u3046\u306b\u5404\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306fhttps\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\nsns-shares.js\nexport function getFacebookShares(url) {\n  const endpoint = \"https://graph.facebook.com/?id=\" + encodeURIComponent(url);\n  return new Promise((resolve, reject) => {\n    $.ajax({\n      url: endpoint,\n      dataType: \"jsonp\",\n      success: (json) => json.error ? reject(json.error) : resolve(json.shares ? json.shares : 0),\n      error: (err) => reject(err)\n    });\n  });\n}\n\nexport function getTweets(url) {\n  const endpoint = \"https://urls.api.twitter.com/1/urls/count.json?url=\" + encodeURIComponent(url);\n  return new Promise((resolve, reject) => {\n    $.ajax({\n      url: endpoint,\n      dataType: \"jsonp\",\n      success: (json) => resolve(json.count ? json.count : 0),\n      error: (err) => reject(err)\n    });\n  });\n}\n\nexport function getHatenaBookmarks(url) {\n  const endpoint = \"https://b.hatena.ne.jp/entry.count?url=\" + encodeURIComponent(url);\n  return new Promise((resolve, reject) => {\n    $.ajax({\n      url: endpoint,\n      dataType: \"jsonp\",\n      success: (json) => resolve(json),\n      error: (err) => reject(err)\n    });\n  });\n}\n\n\n\u4f7f\u3044\u65b9\u306f\u3001\u30b7\u30a7\u30a2\u6570\u3092\u8abf\u3079\u305f\u3044URL\u3092\u6e21\u3057\u3066Promise\u3092\u53d7\u3051\u53d6\u308b\u3060\u3051\n\nmain.js\nimport {getFacebookShares, getTweets, getHatenaBookmarks} from \"sns-shares.js\";\n\nconst url = \"http://qiita.com/suin/items/f570f057a0ff927b47dc\";\n\ngetFacebookShares(url)\n  .then((shares) => console.log(`facebook shares: ${shares}`));\n\ngetTweets(url)\n  .then((tweets) => console.log(`twitter tweets: ${tweets}`));\n\ngetHatenaBookmarks(url)\n  .then((bookmarks) => console.log(`hatena bookmarks: ${bookmarks}`));\n\n\n\u5b9f\u884c\u7d50\u679c\nmain.js:14 hatena bookmarks: 2538\nmain.js:11 twitter tweets: 165\nmain.js:8 facebook shares: 226\n\nFacebook\u30fbTwitter\u30fb\u306f\u3066\u3076\u306e\u30b7\u30a7\u30a2\u6570\u306f\u3001JSONP\u3067\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eJS\u3067\u5404SNS\u306e\u30b7\u30a7\u30a2\u6570\u3092\u8868\u793a\u3059\u308b\u3068\u3044\u3063\u305f\u3053\u3068\u304c\u3067\u304d\u3066\u3057\u307e\u3046\u3002Google+\u306f\u3001JSONP\u306eAPI\u304c\u7121\u3044\u305f\u3081\u76f4\u63a5\u53d6\u5f97\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3063\u307d\u3044\u3002\n\n\u4ee5\u4e0b\u304c\u5404SNS\u304b\u3089\u30b7\u30a7\u30a2\u6570\u3092\u53d6\u5f97\u3059\u308b\u95a2\u6570\u3002Babel\u3092\u4f7f\u3063\u3066\u3001ES2015/ES7\u3067\u66f8\u3044\u3066\u3042\u308b\u3002\n\n\u307e\u305f\u3001HTTPS\u306e\u30b5\u30a4\u30c8\u3067\u3082JSONP\u3067\u304d\u308b\u3088\u3046\u306b\u5404\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306fhttps\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\n```js:sns-shares.js\nexport function getFacebookShares(url) {\n  const endpoint = \"https://graph.facebook.com/?id=\" + encodeURIComponent(url);\n  return new Promise((resolve, reject) => {\n    $.ajax({\n      url: endpoint,\n      dataType: \"jsonp\",\n      success: (json) => json.error ? reject(json.error) : resolve(json.shares ? json.shares : 0),\n      error: (err) => reject(err)\n    });\n  });\n}\n\nexport function getTweets(url) {\n  const endpoint = \"https://urls.api.twitter.com/1/urls/count.json?url=\" + encodeURIComponent(url);\n  return new Promise((resolve, reject) => {\n    $.ajax({\n      url: endpoint,\n      dataType: \"jsonp\",\n      success: (json) => resolve(json.count ? json.count : 0),\n      error: (err) => reject(err)\n    });\n  });\n}\n\nexport function getHatenaBookmarks(url) {\n  const endpoint = \"https://b.hatena.ne.jp/entry.count?url=\" + encodeURIComponent(url);\n  return new Promise((resolve, reject) => {\n    $.ajax({\n      url: endpoint,\n      dataType: \"jsonp\",\n      success: (json) => resolve(json),\n      error: (err) => reject(err)\n    });\n  });\n}\n```\n\n\u4f7f\u3044\u65b9\u306f\u3001\u30b7\u30a7\u30a2\u6570\u3092\u8abf\u3079\u305f\u3044URL\u3092\u6e21\u3057\u3066`Promise`\u3092\u53d7\u3051\u53d6\u308b\u3060\u3051\n\n```js:main.js\nimport {getFacebookShares, getTweets, getHatenaBookmarks} from \"sns-shares.js\";\n\nconst url = \"http://qiita.com/suin/items/f570f057a0ff927b47dc\";\n\ngetFacebookShares(url)\n  .then((shares) => console.log(`facebook shares: ${shares}`));\n\ngetTweets(url)\n  .then((tweets) => console.log(`twitter tweets: ${tweets}`));\n\ngetHatenaBookmarks(url)\n  .then((bookmarks) => console.log(`hatena bookmarks: ${bookmarks}`));\n```\n\n\u5b9f\u884c\u7d50\u679c\n\n```\nmain.js:14 hatena bookmarks: 2538\nmain.js:11 twitter tweets: 165\nmain.js:8 facebook shares: 226\n```\n"}