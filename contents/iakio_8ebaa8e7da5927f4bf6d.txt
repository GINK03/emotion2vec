{"context": " More than 1 year has passed since last update.PHPUnit\u306eDBUnit\u62e1\u5f35\u3092\u4f7f\u3046\u3068\u3001\u65e2\u5b58\u306eDB\u4e0a\u306e\u30c7\u30fc\u30bf\u3092DataSet\u3068\u3057\u3066\u5229\u7528\u53ef\u80fd\u306a\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001XML\u304b\u3089YAML\u3078\u306e\u5909\u63db\u7b49\u3082\u3067\u304d\u307e\u3059\u3002\n\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u53ef\u80fd\u306a\u5f62\u5f0f\u306f\u3001FlatXmlDataSet\u3001MysqlXmlDataSet\u3001XmlDataSet\u3001YamlDataSet\u3067\u3059\u3002\nPHPUnit\u81ea\u4f53\u306f\u4e0d\u8981\u306a\u306e\u3067\u3001composer\u3092\u4f7f\u3046\u5834\u5408\u306fcomposer.phar require --dev phpunit/dbunit:1.2.*\u3067\u826f\u3044\u3067\u3057\u3087\u3046\u3002phar\u7248PHPUnit\u306f\u3053\u306e\u3088\u3046\u306a\u7528\u9014\uff08PHPUnit\u5185\u306e\u4e00\u90e8\u306e\u6a5f\u80fd\u3060\u3051\u4f7f\u3044\u305f\u3044\uff09\u3067\u306f\u5411\u3044\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n<?php\nrequire_once 'vendor/autoload.php';\n// PEAR\u306e\u5834\u5408\u306f require_once \"PHPUnit/Extensions/Database/Autoload.php\";\n\n$pdo = new PDO(DSN, DB_USER, DB_PASS);\n$con = new \\PHPUnit_Extensions_Database_DB_DefaultDatabaseConnection($pdo);\n\n// \u6307\u5b9a\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\n$dataSet = $con->createDataSet(array(\"table1\", \"table2\"));\n// $dataSet = $con->createDataSet(); \u3060\u3068\u3059\u3079\u3066\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u307e\u3059\n\n// DB\u304b\u3089YAML\u3078\u5909\u63db\n\\PHPUnit_Extensions_Database_DataSet_YamlDataSet::write($dataSet, \"dataset.yml\");\n\n// YAML\u304b\u3089XML\u3078\u5909\u63db\n$yaml = new \\PHPUnit_Extensions_Database_DataSet_YamlDataSet(\"dataset.yml\");\n\\PHPUnit_Extensions_Database_DataSet_FlatXmlDataSet::write($yaml, \"dataset.xml\");\n\n// \u30af\u30a8\u30ea\u306e\u7d50\u679c\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\n$queryTable = $con->createQueryTable('users', 'SELECT * FROM users ORDER BY name LIMIT 1');\n$dataSet = new PHPUnit_Extensions_Database_DataSet_DefaultDataSet(array($queryTable));\n\n\\PHPUnit_Extensions_Database_DataSet_YamlDataSet::write($dataSet, \"query.yml\");\n\n\nPHPUnit\u306eDBUnit\u62e1\u5f35\u3092\u4f7f\u3046\u3068\u3001\u65e2\u5b58\u306eDB\u4e0a\u306e\u30c7\u30fc\u30bf\u3092DataSet\u3068\u3057\u3066\u5229\u7528\u53ef\u80fd\u306a\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3067\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001XML\u304b\u3089YAML\u3078\u306e\u5909\u63db\u7b49\u3082\u3067\u304d\u307e\u3059\u3002\n\n\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u53ef\u80fd\u306a\u5f62\u5f0f\u306f\u3001FlatXmlDataSet\u3001MysqlXmlDataSet\u3001XmlDataSet\u3001YamlDataSet\u3067\u3059\u3002\n\nPHPUnit\u81ea\u4f53\u306f\u4e0d\u8981\u306a\u306e\u3067\u3001composer\u3092\u4f7f\u3046\u5834\u5408\u306f`composer.phar require --dev phpunit/dbunit:1.2.*`\u3067\u826f\u3044\u3067\u3057\u3087\u3046\u3002phar\u7248PHPUnit\u306f\u3053\u306e\u3088\u3046\u306a\u7528\u9014\uff08PHPUnit\u5185\u306e\u4e00\u90e8\u306e\u6a5f\u80fd\u3060\u3051\u4f7f\u3044\u305f\u3044\uff09\u3067\u306f\u5411\u3044\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n```php\n<?php\nrequire_once 'vendor/autoload.php';\n// PEAR\u306e\u5834\u5408\u306f require_once \"PHPUnit/Extensions/Database/Autoload.php\";\n\n$pdo = new PDO(DSN, DB_USER, DB_PASS);\n$con = new \\PHPUnit_Extensions_Database_DB_DefaultDatabaseConnection($pdo);\n\n// \u6307\u5b9a\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\n$dataSet = $con->createDataSet(array(\"table1\", \"table2\"));\n// $dataSet = $con->createDataSet(); \u3060\u3068\u3059\u3079\u3066\u306e\u30c6\u30fc\u30d6\u30eb\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3057\u307e\u3059\n\n// DB\u304b\u3089YAML\u3078\u5909\u63db\n\\PHPUnit_Extensions_Database_DataSet_YamlDataSet::write($dataSet, \"dataset.yml\");\n\n// YAML\u304b\u3089XML\u3078\u5909\u63db\n$yaml = new \\PHPUnit_Extensions_Database_DataSet_YamlDataSet(\"dataset.yml\");\n\\PHPUnit_Extensions_Database_DataSet_FlatXmlDataSet::write($yaml, \"dataset.xml\");\n\n// \u30af\u30a8\u30ea\u306e\u7d50\u679c\u3092\u30a8\u30af\u30b9\u30dd\u30fc\u30c8\u3059\u308b\n$queryTable = $con->createQueryTable('users', 'SELECT * FROM users ORDER BY name LIMIT 1');\n$dataSet = new PHPUnit_Extensions_Database_DataSet_DefaultDataSet(array($queryTable));\n\n\\PHPUnit_Extensions_Database_DataSet_YamlDataSet::write($dataSet, \"query.yml\");\n\n```", "tags": ["PHP", "PHPUnit"]}