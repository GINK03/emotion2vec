{"context": "403\u30a8\u30e9\u30fc\u306b\u60a9\u307e\u3055\u308c\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u7d50\u8ad6\n\u3053\u308c\u3068\u540c\u3058\u30a8\u30e9\u30fc\u3067\u60a9\u307e\u3055\u308c\u305f\u304c\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3067fluent-plugin-aws-elasticsearch-service\u306f\u6b63\u5e38\u306b\u52d5\u3044\u305f\u3002\n\nfluentd\u5074\n\nfluent-plugin-aws-elasticsearch-service\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo td-agent-gem install fluent-plugin-aws-elasticsearch-service\n\n\nconfig\u30b5\u30f3\u30d7\u30eb\ntype_name\u304c\u7121\u3044\u3068403\u30a8\u30e9\u30fc\u306b\u306a\u308b\n<match **.**>\n  type copy\n\n  <store>\n    type aws-elasticsearch-service\n    type_name access_log\n    logstash_format true\n    include_tag_key true\n    tag_key @log_name\n    flush_interval 10s\n\n    <endpoint>\n       url https://search-***.ap-northeast-1.es.amazonaws.com\n       region ap-northeast-1\n       access_key_id ***\n       secret_access_key ***\n    </endpoint>\n  </store>\n</match>\n\n\nAWS ES\u5074\n\npolicy\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"AWS\": [\n          \"arn:aws:iam::***:user/***\"\n        ]\n      },\n      \"Action\": \"es:*\",\n      \"Resource\": \"arn:aws:es:ap-northeast-1:***:domain/***/*\"\n    }\n  ]\n}\n\n403\u30a8\u30e9\u30fc\u306b\u60a9\u307e\u3055\u308c\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n### \u7d50\u8ad6\n[\u3053\u308c](https://github.com/atomita/fluent-plugin-aws-elasticsearch-service/issues/2)\u3068\u540c\u3058\u30a8\u30e9\u30fc\u3067\u60a9\u307e\u3055\u308c\u305f\u304c\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3067[fluent-plugin-aws-elasticsearch-service](https://github.com/atomita/fluent-plugin-aws-elasticsearch-service)\u306f\u6b63\u5e38\u306b\u52d5\u3044\u305f\u3002\n\n\n### fluentd\u5074\n#### fluent-plugin-aws-elasticsearch-service\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nsudo td-agent-gem install fluent-plugin-aws-elasticsearch-service\n```\n\n#### config\u30b5\u30f3\u30d7\u30eb\n`type_name`\u304c\u7121\u3044\u3068403\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n```\n<match **.**>\n  type copy\n\n  <store>\n    type aws-elasticsearch-service\n    type_name access_log\n    logstash_format true\n    include_tag_key true\n    tag_key @log_name\n    flush_interval 10s\n\n    <endpoint>\n       url https://search-***.ap-northeast-1.es.amazonaws.com\n       region ap-northeast-1\n       access_key_id ***\n       secret_access_key ***\n    </endpoint>\n  </store>\n</match>\n```\n\n### AWS ES\u5074\n#### policy\n\n```\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"AWS\": [\n          \"arn:aws:iam::***:user/***\"\n        ]\n      },\n      \"Action\": \"es:*\",\n      \"Resource\": \"arn:aws:es:ap-northeast-1:***:domain/***/*\"\n    }\n  ]\n}\n```\n", "tags": ["fluentd", "Elasticsearch"]}