{"context": " More than 1 year has passed since last update.C99 \u306f\u3001\u914d\u5217\u306e\u30b5\u30a4\u30ba\u306b\u5909\u6570\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u3053\u3093\u306a\u611f\u3058\u3002\n\ntest1.c\nvoid test1( int n )\n{\n  int fixed_array[10];\n  int varlen_array[n];\n   printf( \"sizeof(fixed_array)==%ld\\n\", sizeof(fixed_array) );\n   printf( \"sizeof(varlen_array)==%ld\\n\", sizeof(varlen_array) ); \n}\n\n\ntest1(10); \u3068\u3001\u5f15\u6570 10 \u3067\u547c\u3076\u3068\u3001\nsizeof(fixed_array)==40\nsizeof(varlen_array)==40\n\n\u3068\u306a\u308b\u3002\n\u3057\u304b\u3057\u3001\u666e\u901a\u306e\u914d\u5217\u3068\u306f\u9055\u3063\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u306f sizeof \u306e\u5024\u304c\u78ba\u5b9a\u3057\u306a\u3044\u306e\u3067\n\ntest2.c\nvoid test2( int n )\n{\n  int fixed_array[10];\n  int varlen_array[n];\n\n  // sizeof(fixed_array) \u306f enum \u306e\u5024\u306b\u4f7f\u3048\u308b\n  enum{ FIXED_ARRAY_SIZE=sizeof(fixed_array) };\n\n  // sizeof(varlen_array) \u306f enum \u306e\u5024\u306b\u4f7f\u3048\u306a\u3044\u306e\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\n  enum{ VARLEN_ARRAY_SIZE=sizeof(varlen_array) };\n}\n\n\nenum \u306e\u5024\u3084 case \u30e9\u30d9\u30eb\u306b\u306f\u4f7f\u3048\u306a\u3044\u3002\n\u305d\u308c\u3068\u3002\n\ntest3.c\n#define COUNT_OF(x) (sizeof(x)/sizeof(*(x)))\nvoid test3( int n )\n{\n  int varlen_array[some_func(n)];\n  for( size_t ix=0 ; ix<COUNT_OF(varlen_array) ; ++ix ){\n    do_something( varlen_array, ix );\n  }\n}\n\n\n\u306e\u3088\u3046\u306a\u30b1\u30fc\u30b9\u3067\u3001\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u6c17\u3065\u3044\u3066\u304f\u308c\u306a\u3044\u3068\u3001COUNT_OF \u30de\u30af\u30ed\u5185\u306e\u9664\u7b97\u3092\u30eb\u30fc\u30d7\u306e\u6570\u3060\u3051\u5b9f\u884c\u3057\u3066\u3057\u307e\u3063\u3066\u3082\u3063\u305f\u3044\u306a\u3044\u3002\nC99 \u306f\u3001\u914d\u5217\u306e\u30b5\u30a4\u30ba\u306b\u5909\u6570\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3002\n\n```c:test1.c\nvoid test1( int n )\n{\n  int fixed_array[10];\n  int varlen_array[n];\n   printf( \"sizeof(fixed_array)==%ld\\n\", sizeof(fixed_array) );\n   printf( \"sizeof(varlen_array)==%ld\\n\", sizeof(varlen_array) ); \n}\n```\n\n`test1(10);` \u3068\u3001\u5f15\u6570 10 \u3067\u547c\u3076\u3068\u3001\n\n```text:\nsizeof(fixed_array)==40\nsizeof(varlen_array)==40\n```\n\n\u3068\u306a\u308b\u3002\n\u3057\u304b\u3057\u3001\u666e\u901a\u306e\u914d\u5217\u3068\u306f\u9055\u3063\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u306f `sizeof` \u306e\u5024\u304c\u78ba\u5b9a\u3057\u306a\u3044\u306e\u3067\n\n```c:test2.c\nvoid test2( int n )\n{\n  int fixed_array[10];\n  int varlen_array[n];\n\n  // sizeof(fixed_array) \u306f enum \u306e\u5024\u306b\u4f7f\u3048\u308b\n  enum{ FIXED_ARRAY_SIZE=sizeof(fixed_array) };\n\n  // sizeof(varlen_array) \u306f enum \u306e\u5024\u306b\u4f7f\u3048\u306a\u3044\u306e\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\n  enum{ VARLEN_ARRAY_SIZE=sizeof(varlen_array) };\n}\n```\n\n`enum` \u306e\u5024\u3084 case \u30e9\u30d9\u30eb\u306b\u306f\u4f7f\u3048\u306a\u3044\u3002\n\u305d\u308c\u3068\u3002\n\n```c:test3.c\n#define COUNT_OF(x) (sizeof(x)/sizeof(*(x)))\nvoid test3( int n )\n{\n  int varlen_array[some_func(n)];\n  for( size_t ix=0 ; ix<COUNT_OF(varlen_array) ; ++ix ){\n    do_something( varlen_array, ix );\n  }\n}\n```\n\n\u306e\u3088\u3046\u306a\u30b1\u30fc\u30b9\u3067\u3001\u30b3\u30f3\u30d1\u30a4\u30e9\u304c\u6c17\u3065\u3044\u3066\u304f\u308c\u306a\u3044\u3068\u3001COUNT_OF \u30de\u30af\u30ed\u5185\u306e\u9664\u7b97\u3092\u30eb\u30fc\u30d7\u306e\u6570\u3060\u3051\u5b9f\u884c\u3057\u3066\u3057\u307e\u3063\u3066\u3082\u3063\u305f\u3044\u306a\u3044\u3002", "tags": ["C99", "C\u8a00\u8a9e", "C"]}