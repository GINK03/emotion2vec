{"context": " More than 1 year has passed since last update.GitLab(Docker\u7248)\u69cb\u7bc9\u3057\u305f\u969b\u3001\u8a2d\u5b9a\u3067\u8aa4\u3063\u3066Signin enabled\u306e\u30c1\u30a7\u30c3\u30af\u5916\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u72b6\u614b\u306b\u9665\u3063\u3066\u3057\u307e\u3063\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u6642\u306b\u884c\u3063\u305f\u5fa9\u65e7\u624b\u9806\u3092\u8a18\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3063\u3066\u304b\u3001\u306a\u3093\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u3055\u305b\u306a\u3044\u8a2d\u5b9a\u3042\u308b\u3093\u3060\u308d\u3046\u30fb\u30fb\u30fb\n\u3010\u8a2d\u5b9a\u753b\u9762\u3011\n\n\u3010\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3011\n\n\n\u524d\u63d0\n\u672c\u624b\u9806\u306f\u3001Docker\u306eGitLab(sameersbn/docker-gitlab)\u3067\u69cb\u7bc9\u3057\u3066\u3044\u308b\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u304c\u3001Docker\u30b3\u30de\u30f3\u30c9\u3092\u9664\u3051\u3070Docker\u3092\u4f7f\u308f\u305a\u306b\u69cb\u7bc9\u3057\u305f\u969b\u306b\u3082\u4f7f\u3048\u308b\u624b\u9806\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u3093\u306a\u30ab\u30f3\u30b8\u3067\u7a3c\u50cd\u3057\u3066\u3044\u308b\u3068\u3057\u307e\u3059\u3002\n\n\n\u5fa9\u65e7\u624b\u9806\n\n1.GitLab\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u63a5\u7d9a\n\ndocker exec -it <GitLab\u30b3\u30f3\u30c6\u30ca\u540d or GitLab\u30b3\u30f3\u30c6\u30caID> bash\n\uff08\u203bdocker attach\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u306a\u3044\u306e\u3067\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3002\u8a73\u7d30\u3092\u77e5\u308a\u305f\u3044\u65b9\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\u3002\uff09\n\n2.GitLab\u306erails\u30b3\u30f3\u30bd\u30fc\u30eb\u8d77\u52d5(GitLab\u30b3\u30f3\u30c6\u30ca\u5185)\n\ncd /home/git/gitlab\nsudo -u git -H bundle exec rails console production\n\uff08\u203b\u4ed6\u306e\u30b5\u30a4\u30c8\u3067\u306f\u3088\u304f\u300csudo gitlab-rails console\u300d\u3092\u4f7f\u3048\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u304c\u3001Docker\u306eGitLab\u3067\u306fgitlab-rails\u304c\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3002\uff09\n\u3010\u5b9f\u884c\u7d50\u679c\u3011\n\n\n3.rails\u30b3\u30f3\u30bd\u30fc\u30eb\u5185\u3067Signin enabled\u3092\u8a2d\u5b9a&\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u629c\u3051\u308b(GitLab\u30b3\u30f3\u30c6\u30ca\u5185)\n\nApplicationSetting.last.update_attributes(signin_enabled: true)\nexit\n\u3010\u5b9f\u884c\u7d50\u679c\u3011\n\n\n4.GitLab\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u629c\u3051\u308b(GitLab\u30b3\u30f3\u30c6\u30ca\u5185)\n\nexit\n\n5.GitLab\u30b3\u30f3\u30c6\u30ca\u518d\u8d77\u52d5\n\ndocker restart <GitLab\u30b3\u30f3\u30c6\u30ca\u540d or GitLab\u30b3\u30f3\u30c6\u30caID>\n\u4e0a\u8a18\u624b\u9806\u5f8c\u306bGitLab\u306e\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3002\n\u3010\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3011\n\n\u4ee5\u4e0a\u3002\nGitLab(Docker\u7248)\u69cb\u7bc9\u3057\u305f\u969b\u3001\u8a2d\u5b9a\u3067\u8aa4\u3063\u3066Signin enabled\u306e\u30c1\u30a7\u30c3\u30af\u5916\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u72b6\u614b\u306b\u9665\u3063\u3066\u3057\u307e\u3063\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u3002\u305d\u306e\u6642\u306b\u884c\u3063\u305f\u5fa9\u65e7\u624b\u9806\u3092\u8a18\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3063\u3066\u304b\u3001\u306a\u3093\u3067\u30b5\u30a4\u30f3\u30a4\u30f3\u3055\u305b\u306a\u3044\u8a2d\u5b9a\u3042\u308b\u3093\u3060\u308d\u3046\u30fb\u30fb\u30fb\n\n\u3010\u8a2d\u5b9a\u753b\u9762\u3011\n![Docker\u8a2d\u5b9a.png](https://qiita-image-store.s3.amazonaws.com/0/61752/6672d836-05cf-4a21-db6c-6c5f110be502.png)\n\n\u3010\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3011\n![gitlab_login01.png](https://qiita-image-store.s3.amazonaws.com/0/61752/2d69fbb3-bd1e-fd1b-0f8b-c1fc6a3f0e07.png)\n\n#\u524d\u63d0\n\u672c\u624b\u9806\u306f\u3001Docker\u306eGitLab([sameersbn/docker-gitlab](https://github.com/sameersbn/docker-gitlab))\u3067\u69cb\u7bc9\u3057\u3066\u3044\u308b\u524d\u63d0\u3068\u3057\u3066\u3044\u307e\u3059\u304c\u3001Docker\u30b3\u30de\u30f3\u30c9\u3092\u9664\u3051\u3070Docker\u3092\u4f7f\u308f\u305a\u306b\u69cb\u7bc9\u3057\u305f\u969b\u306b\u3082\u4f7f\u3048\u308b\u624b\u9806\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u30ab\u30f3\u30b8\u3067\u7a3c\u50cd\u3057\u3066\u3044\u308b\u3068\u3057\u307e\u3059\u3002\n![GitLabProcess.png](https://qiita-image-store.s3.amazonaws.com/0/61752/95d9036a-85f1-4473-65c1-093631321a03.png)\n\n#\u5fa9\u65e7\u624b\u9806\n####**1.GitLab\u30b3\u30f3\u30c6\u30ca\u5185\u306b\u63a5\u7d9a**\n`docker exec -it <GitLab\u30b3\u30f3\u30c6\u30ca\u540d or GitLab\u30b3\u30f3\u30c6\u30caID> bash`\n\uff08\u203bdocker attach\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u3048\u306a\u3044\u306e\u3067\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3002\u8a73\u7d30\u3092\u77e5\u308a\u305f\u3044\u65b9\u306f[\u3053\u3061\u3089\u3092\u53c2\u7167](https://unicorn.limited/jp/item/347)\u3002\uff09\n\n####**2.GitLab\u306erails\u30b3\u30f3\u30bd\u30fc\u30eb\u8d77\u52d5(GitLab\u30b3\u30f3\u30c6\u30ca\u5185)**\n`cd /home/git/gitlab`\n`sudo -u git -H bundle exec rails console production`\n\uff08\u203b\u4ed6\u306e\u30b5\u30a4\u30c8\u3067\u306f\u3088\u304f\u300csudo gitlab-rails console\u300d\u3092\u4f7f\u3048\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u304c\u3001Docker\u306eGitLab\u3067\u306fgitlab-rails\u304c\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u3002\uff09\n\u3010\u5b9f\u884c\u7d50\u679c\u3011\n![gitlab_rails_console.png](https://qiita-image-store.s3.amazonaws.com/0/61752/a28d6d2e-86b8-6267-3993-9115a2664e6c.png)\n\n####**3.rails\u30b3\u30f3\u30bd\u30fc\u30eb\u5185\u3067Signin enabled\u3092\u8a2d\u5b9a&\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u629c\u3051\u308b(GitLab\u30b3\u30f3\u30c6\u30ca\u5185)**\n`ApplicationSetting.last.update_attributes(signin_enabled: true)`\n`exit`\n\u3010\u5b9f\u884c\u7d50\u679c\u3011\n![rails_console_result.png](https://qiita-image-store.s3.amazonaws.com/0/61752/810b4243-8559-038d-a318-02122f291dcb.png)\n\n####**4.GitLab\u30b3\u30f3\u30c6\u30ca\u304b\u3089\u629c\u3051\u308b(GitLab\u30b3\u30f3\u30c6\u30ca\u5185)**\n`exit`\n\n####**5.GitLab\u30b3\u30f3\u30c6\u30ca\u518d\u8d77\u52d5**\n`docker restart <GitLab\u30b3\u30f3\u30c6\u30ca\u540d or GitLab\u30b3\u30f3\u30c6\u30caID>`\n\n\u4e0a\u8a18\u624b\u9806\u5f8c\u306bGitLab\u306e\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3002\n\u3010\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3011\n![gitlab_login02.png](https://qiita-image-store.s3.amazonaws.com/0/61752/b001d4ab-2a83-c758-8af4-1768144959f2.png)\n\n\u4ee5\u4e0a\u3002\n", "tags": ["docker", "GitLab"]}