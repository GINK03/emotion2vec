{"context": "\u672c\u8a18\u4e8b\u306fRedux\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u3042\u308a\u3001React\u306b\u3064\u3044\u3066\u306e\u8a73\u3057\u3044\u8aac\u660e\u306f\u3053\u3053\u3067\u306f\u6271\u308f\u306a\u3044\u3002\n\u57fa\u672c\u7684\u306b\u306f\u3053\u3061\u3089\u306e\u30d3\u30c7\u30aa\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u30d9\u30fc\u30b9\u306b\u66f8\u3044\u3066\u3044\u308b\u3002\u82f1\u8a9e\u306b\u554f\u984c\u304c\u306a\u304f\u3001\u30d3\u30c7\u30aa\u304c\u5acc\u3044\u3067\u306a\u3051\u308c\u3070\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u305f\u65b9\u304c\u6b63\u76f4\u308f\u304b\u308a\u3084\u3059\u3044\u304b\u3068\u601d\u3046\u3002\n\n\u4e0b\u6e96\u5099\ngit\u3068Node\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3042\u308b\u3068\u3059\u308b\u3002\u307e\u305a\u306f\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u30b9\u30bf\u30fc\u30bf\u30fc\u30ad\u30c3\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\u3053\u306e\u30b9\u30bf\u30fc\u30bf\u30fc\u30ad\u30c3\u30c8\u306b\u306fReact\u3001Webpack\u3001babel\u304c\u542b\u307e\u308c\u3066\u3044\u308b\uff08Redux\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\uff09\u3002\n$ git clone https://github.com/alicoding/react-webpack-babel react-counter\n$ cd react-counter\n$ npm install\n$ npm run start\n\nhttp://localhost:8888/\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u6b63\u3057\u304f\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3002\u30bf\u30fc\u30df\u30ca\u30eb\u3067Ctrl + C\u3092\u62bc\u3057\u3066\u4e00\u5ea6\u30ad\u30e3\u30f3\u30bb\u30eb\u3059\u308b\u3002\n\nRedux\u3068\u306f\nRedux\u306f\u3001\u30a2\u30d7\u30ea\u306e\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308b\u3002\u3053\u3053\u3067\u3001\u3044\u304f\u3064\u304b\u7528\u8a9e\u304c\u51fa\u3066\u304f\u308b\u3002\u307e\u305aRedux\u3067\u306f\u3001\u30a2\u30d7\u30ea\u306e\u72b6\u614b\uff08 state \uff09\u3068\u3001\u72b6\u614b\u3092\u5909\u66f4\u3059\u308b\u305f\u3081\u306e\u30a2\u30af\u30b7\u30e7\u30f3\uff08 action \uff09\u3092\u305d\u308c\u305e\u308c\u5b9a\u7fa9\u3059\u308b\u3002\n\u3053\u308c\u3089\u306f\u3001\u4f8b\u3048\u3070\u3053\u308c\u304b\u3089\u4f5c\u308b\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\nstate: \u30a2\u30d7\u30ea\u306f\u73fe\u5728\u30ab\u30a6\u30f3\u30bf\u30fc\u306e\u6570\u5024\u304c\u3044\u304f\u3064\u306a\u306e\u304b\u3001\u3068\u3044\u3046\u72b6\u614b\u3002\naction: \u300c+1\u3092\u3059\u308b\u300d\u300c-1\u3092\u3059\u308b\u300d\u304c\u3001\u305d\u308c\u305e\u308c\u30a2\u30af\u30b7\u30e7\u30f3\n\u3064\u307e\u308aRedux\u3067\u306f\u3001state\u306b\u5bfe\u3057\u3066action\u3092\u5b9f\u884c\u3057\u3066\u65b0\u3057\u3044state\u306b\u3057\u3066\u3044\u304f\u3002\u3053\u308c\u3092\u884c\u3046\u95a2\u6570\u3092 reducer \u3068\u547c\u3076\u3002\u307e\u305f\u3001\u30a2\u30d7\u30ea\u306f\u72b6\u614b(state)\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570\u3092\uff11\u3064\u3060\u3051\u6301\u3061\u3001\u305d\u306e\u5909\u6570\u3092 store \u3068\u547c\u3076\u3002\n\u3059\u306a\u308f\u3061\u30a2\u30d7\u30ea\u306e\u72b6\u614b\uff08 state \uff09\u306f\u5168\u3066 store \u306b\u3088\u3063\u3066\u4fdd\u6301\u3055\u308c\u3001 reducer \u306e\u95a2\u6570\u3092\u901a\u3057\u3066 action \u304c\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u306e\u307f\u5909\u66f4\u3055\u308c\u308b\u3002\u305d\u3057\u3066\u72b6\u614b\u304c\u5909\u66f4\u3055\u308c\u305f\u969b\u306b\u518d\u63cf\u753b\u3092\u3059\u308b\u3053\u3068\u3067\u5e38\u306b\u6700\u65b0\u306e\u72b6\u614b\u304c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u56f3\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nstate, action, store, reducer\u306f\u4ee5\u5f8c\u3088\u304f\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u7406\u89e3\u3057\u3066\u304a\u304d\u305f\u3044\u3002\n\n\u306a\u305cRedux\u3092\u4f7f\u3046\u306e\u304b\uff1f\nReact\u3067\u8003\u3048\u308b\u3068\u308f\u304b\u308a\u3084\u3059\u304f\u3001\u6b21\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b\u3002\n\nReact\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u968e\u5c64\u304c\u6df1\u304f\u306a\u3063\u305f\u6642\u306e\u30d0\u30b1\u30c4\u30ea\u30ec\u30fc\u3092\u56de\u907f\n\u30c7\u30d0\u30c3\u30b0\u3084\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5316\u304c\u7c21\u5358\u306b\u306a\u308b\n\n\u3061\u306a\u307f\u306bRedux\u306fReact\u306b\u9650\u3089\u305a\u4ed6\u306eJavascript\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3082\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nRedux\u306f\u5fc5\u305a\u4f7f\u308f\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3082\u306e\u3067\u306f\u306a\u3044\n\nRedux\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnpm\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ npm install --save redux\n\n\n\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\n\u307e\u305a\u306fReact\u3092\u4f7f\u308f\u305a\u3001Redux\u306e\u307f\u3067\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002src/index.jsx\u3092\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\nsrc/index.jsx\nimport {createStore} from 'redux';\n\nconst counter = (state = 0, action) => {\n  switch (action.type) {\n    case 'INCREMENT': \n      return state + 1;\n    case 'DECREMENT': \n      return state - 1;\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(counter);\n\nconst render = () => {\n  document.body.innerText = store.getState();\n}\n\nstore.subscribe(render);\nrender();\n\ndocument.addEventListener('click', () => {\n  store.dispatch({ type: 'INCREMENT' });\n});\n\n\nnpm run start\u3092\u5b9f\u884c\u3057\u3066http://localhost:8888/\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\u30da\u30fc\u30b8\u5185\u306e\u3069\u3053\u304b\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u6642\u306b\u6570\u5024\u304c\u5897\u3048\u3066\u3044\u3051\u3070\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3002\n\u3053\u306e\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u6b63\u3057\u304f\u7406\u89e3\u3057\u3088\u3046\u3002\u307e\u305a\u6700\u521d\u306e\u884c\u306fRedux\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089createStore\u3068\u3044\u3046\u95a2\u6570\u3092\u4f7f\u3048\u308b\u3088\u3046\u3001\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\n\u6b21\u306bcounter\u3068\u3044\u3046\u95a2\u6570\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\u3053\u306e\u95a2\u6570\u304c\u3001\u524d\u8ff0\u3057\u305freducer\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u5f15\u6570\u3068\u3057\u3066state\u3068action\u3092\u53d7\u3051\u53d6\u308a\u3001\u305d\u308c\u3089\u306b\u5fdc\u3058\u3066\u65b0\u3057\u3044state\u3092\u8fd4\u308a\u5024\u3068\u3057\u3066\u8fd4\u5374\u3059\u308b\u3002\u3053\u3053\u3067\u306f\u3001action.type\u304c'INCREMENT'\u306e\u3068\u304d\u306fstate\u3092+1\u3057\u3001'DECREMENT'\u306e\u3068\u304d\u306fstate\u3092-1\u3057\u3066\u3044\u308b\u3002\n\u3053\u306ereducer\u3092\u5143\u306b\u3001Redux\u306b\u3088\u3063\u3066store\u3068\u3044\u3046\u5909\u6570\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\u540d\u524d\u306e\u901a\u308astore\u3068\u306a\u308b\u3002\n\u305d\u3057\u3066\u3001state\u304c\u66f4\u65b0\u3055\u308c\u305f\u969b\u306e\u51e6\u7406\u3068\u3057\u3066render\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3001subscribe\u3057\u3066\u3044\u308b\u3002render\u95a2\u6570\u3067\u306f\u5358\u306b\u30da\u30fc\u30b8\u306b\u6700\u65b0\u306estate\uff08\u73fe\u5728\u306e\u30ab\u30a6\u30f3\u30c8\uff09\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u3002\n\u6700\u5f8c\u306b\u3001\u30da\u30fc\u30b8\u5185\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u969b\u3001store\u306b\u5bfe\u3057\u3066action\u3092\u767a\u884c\uff08dispatch\uff09\u3057\u3066\u3044\u308b\u3002\u30b3\u30fc\u30c9\u306e\u901a\u308a\u3001action\u306ftype\u8981\u7d20\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308b\u3002\n\ncreateStore\u306e\u5b9f\u88c5\u306f\u3069\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304b\uff1f\nRedux\u306ecreateStore\u306e\u4e2d\u3067\u306f\u4f55\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\u3002\u9762\u767d\u3044\u3053\u3068\u306b\u3001\u5b9f\u88c5\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u3067\u3042\u308b\uff08\u5b9f\u969b\u306b\u306f\u4f8b\u5916\u51e6\u7406\u306a\u3069\u3001\u3082\u3046\u5c11\u3057\u3060\u3051\u9577\u3044\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u308b\uff09\u3002\nconst createStore = (reducer) => {\n  let state;\n  let listeners = [];\n\n  const getState = () => state;\n\n  const dispatch = (action) => {\n    state = reducer(state, action);\n    listeners.forEach(listener => listener());\n  };\n\n  const subscribe = (listener) => {\n    listeners.push(listener);\n    return () => {\n      listeners = listeners.filter(l => l !== listener)\n    }\n  };\n\n  dispatch({});\n\n  return { getState, dispatch, subscribe };\n}\n\n\u30b3\u30fc\u30c9\u306e\u901a\u308a\u3001store\u306fstate\u3068\u3001listeners\uff08\u72b6\u614b\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u9054\uff09\u3092\u6301\u3064\u3002\u307e\u305f\u3001\u73fe\u5728\u306estate\u3092\u53d6\u5f97\u3059\u308bgetState\u3001\u305d\u3057\u3066action\u3092\u767a\u884c\u3059\u308bdispatch\u3001\u72b6\u614b\u306e\u5909\u66f4\u3092\u76e3\u8996\u3059\u308b\u305f\u3081\u306esubscribe\u3068\u3044\u30463\u3064\u306e\u95a2\u6570\u3092\u6301\u3064\u3002state\u3084listeners\u306f\u5916\u90e8\u304b\u3089\u76f4\u63a5\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nReact\u3092\u4f7f\u3063\u3066\u63cf\u753b\u3059\u308b\n\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u3092React\u3067\u63cf\u753b\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3002\u30b3\u30fc\u30c9\u306f\u307b\u3068\u3093\u3069\u5909\u308f\u3089\u306a\u3044\u3002\u307e\u305asrc/app.jsx\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u3001\u6570\u5b57\u3092\u8868\u793a\u3059\u308b\u898b\u51fa\u3057\u3068\u3001\u300c+1\u300d\u3068\u300c-1\u300d\u306e\uff12\u3064\u306e\u30dc\u30bf\u30f3\u3092\u7f6e\u304f\u3002\n\nsrc/app.jsx\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div>\n        <h1>{this.props.value}</h1>\n        <button className='btn btn-primary' onClick={this.props.onIncrement}>+</button>\n        <button className='btn btn-danger' onClick={this.props.onDecrement}>-</button>\n      </div>\n    )\n  }\n}\n\n\nsrc/index.jsx\u306e\u65b9\u3067\u306fReactDOM\u306b\u3088\u3063\u3066\u3053\u308c\u3092\u63cf\u753b\u3059\u308b\u3002\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nsrc/index.jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport {createStore} from 'redux';\nimport App from './app.jsx';\n\nconst counter = (state = 0, action) => {\n  switch (action.type) {\n    case 'INCREMENT':\n      return state + 1;\n    case 'DECREMENT':\n      return state - 1;\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(counter);\n\nconst render = () => {\n  ReactDOM.render(\n    <App\n      value={store.getState()}\n      onIncrement={ () =>\n        store.dispatch({\n          type: 'INCREMENT'\n        })\n      }\n      onDecrement={ () =>\n        store.dispatch({\n          type: 'DECREMENT'\n        })\n      }\n    />,\n    document.getElementById('app')\n  )\n}\n\nstore.subscribe(render);\nrender();\n\n\n\u30d7\u30e9\u30b9\u30dc\u30bf\u30f3\u3068\u30de\u30a4\u30ca\u30b9\u30dc\u30bf\u30f3\u306e\u3042\u308b\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u304c\u5b8c\u6210\u3057\u305f\uff01\n\n\u672c\u8a18\u4e8b\u306fRedux\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u3042\u308a\u3001React\u306b\u3064\u3044\u3066\u306e\u8a73\u3057\u3044\u8aac\u660e\u306f\u3053\u3053\u3067\u306f\u6271\u308f\u306a\u3044\u3002\n\n\u57fa\u672c\u7684\u306b\u306f[\u3053\u3061\u3089](https://egghead.io/lessons/javascript-redux-the-single-immutable-state-tree)\u306e\u30d3\u30c7\u30aa\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u30d9\u30fc\u30b9\u306b\u66f8\u3044\u3066\u3044\u308b\u3002\u82f1\u8a9e\u306b\u554f\u984c\u304c\u306a\u304f\u3001\u30d3\u30c7\u30aa\u304c\u5acc\u3044\u3067\u306a\u3051\u308c\u3070\u3053\u3061\u3089\u3092\u53c2\u7167\u3057\u305f\u65b9\u304c\u6b63\u76f4\u308f\u304b\u308a\u3084\u3059\u3044\u304b\u3068\u601d\u3046\u3002\n\n## \u4e0b\u6e96\u5099\n\ngit\u3068[Node](https://nodejs.org/ja/)\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u3067\u3042\u308b\u3068\u3059\u308b\u3002\u307e\u305a\u306f\u30bf\u30fc\u30df\u30ca\u30eb\u3067[\u30b9\u30bf\u30fc\u30bf\u30fc\u30ad\u30c3\u30c8](https://github.com/alicoding/react-webpack-babel)\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\u3053\u306e\u30b9\u30bf\u30fc\u30bf\u30fc\u30ad\u30c3\u30c8\u306b\u306fReact\u3001Webpack\u3001babel\u304c\u542b\u307e\u308c\u3066\u3044\u308b\uff08Redux\u306f\u542b\u307e\u308c\u3066\u3044\u306a\u3044\uff09\u3002\n\n```bash\n$ git clone https://github.com/alicoding/react-webpack-babel react-counter\n$ cd react-counter\n$ npm install\n$ npm run start\n```\n\n[http://localhost:8888/](http://localhost:8888/)\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u6b63\u3057\u304f\u8868\u793a\u3055\u308c\u308c\u3070\u6210\u529f\u3002\u30bf\u30fc\u30df\u30ca\u30eb\u3067``Ctrl + C``\u3092\u62bc\u3057\u3066\u4e00\u5ea6\u30ad\u30e3\u30f3\u30bb\u30eb\u3059\u308b\u3002\n\n## Redux\u3068\u306f\n\nRedux\u306f\u3001\u30a2\u30d7\u30ea\u306e\u72b6\u614b\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306e\u30b7\u30f3\u30d7\u30eb\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3042\u308b\u3002\u3053\u3053\u3067\u3001\u3044\u304f\u3064\u304b\u7528\u8a9e\u304c\u51fa\u3066\u304f\u308b\u3002\u307e\u305aRedux\u3067\u306f\u3001\u30a2\u30d7\u30ea\u306e\u72b6\u614b\uff08 **state** \uff09\u3068\u3001\u72b6\u614b\u3092\u5909\u66f4\u3059\u308b\u305f\u3081\u306e\u30a2\u30af\u30b7\u30e7\u30f3\uff08 **action** \uff09\u3092\u305d\u308c\u305e\u308c\u5b9a\u7fa9\u3059\u308b\u3002\n\n\u3053\u308c\u3089\u306f\u3001\u4f8b\u3048\u3070\u3053\u308c\u304b\u3089\u4f5c\u308b\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n**state**: \u30a2\u30d7\u30ea\u306f\u73fe\u5728\u30ab\u30a6\u30f3\u30bf\u30fc\u306e\u6570\u5024\u304c\u3044\u304f\u3064\u306a\u306e\u304b\u3001\u3068\u3044\u3046\u72b6\u614b\u3002\n**action**: \u300c+1\u3092\u3059\u308b\u300d\u300c-1\u3092\u3059\u308b\u300d\u304c\u3001\u305d\u308c\u305e\u308c\u30a2\u30af\u30b7\u30e7\u30f3\n\n\u3064\u307e\u308aRedux\u3067\u306f\u3001state\u306b\u5bfe\u3057\u3066action\u3092\u5b9f\u884c\u3057\u3066\u65b0\u3057\u3044state\u306b\u3057\u3066\u3044\u304f\u3002\u3053\u308c\u3092\u884c\u3046\u95a2\u6570\u3092 **reducer** \u3068\u547c\u3076\u3002\u307e\u305f\u3001\u30a2\u30d7\u30ea\u306f\u72b6\u614b(state)\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570\u3092\uff11\u3064\u3060\u3051\u6301\u3061\u3001\u305d\u306e\u5909\u6570\u3092 **store** \u3068\u547c\u3076\u3002\n\n\u3059\u306a\u308f\u3061\u30a2\u30d7\u30ea\u306e\u72b6\u614b\uff08 **state** \uff09\u306f\u5168\u3066 **store** \u306b\u3088\u3063\u3066\u4fdd\u6301\u3055\u308c\u3001 **reducer** \u306e\u95a2\u6570\u3092\u901a\u3057\u3066 **action** \u304c\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u306e\u307f\u5909\u66f4\u3055\u308c\u308b\u3002\u305d\u3057\u3066\u72b6\u614b\u304c\u5909\u66f4\u3055\u308c\u305f\u969b\u306b\u518d\u63cf\u753b\u3092\u3059\u308b\u3053\u3068\u3067\u5e38\u306b\u6700\u65b0\u306e\u72b6\u614b\u304c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u56f3\u306b\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n![redux-image.png](https://antelos.qiita.com/files/31aab980-46f9-77fc-6997-08fff8b27057.png \"redux-image.png\")\n\nstate, action, store, reducer\u306f\u4ee5\u5f8c\u3088\u304f\u51fa\u3066\u304f\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u7406\u89e3\u3057\u3066\u304a\u304d\u305f\u3044\u3002\n\n## \u306a\u305cRedux\u3092\u4f7f\u3046\u306e\u304b\uff1f\n\nReact\u3067\u8003\u3048\u308b\u3068\u308f\u304b\u308a\u3084\u3059\u304f\u3001\u6b21\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b\u3002\n\n* React\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u968e\u5c64\u304c\u6df1\u304f\u306a\u3063\u305f\u6642\u306e\u30d0\u30b1\u30c4\u30ea\u30ec\u30fc\u3092\u56de\u907f\n* \u30c7\u30d0\u30c3\u30b0\u3084\u30c6\u30b9\u30c8\u306e\u81ea\u52d5\u5316\u304c\u7c21\u5358\u306b\u306a\u308b\n\n\u3061\u306a\u307f\u306bRedux\u306fReact\u306b\u9650\u3089\u305a\u4ed6\u306eJavascript\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3082\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n[Redux\u306f\u5fc5\u305a\u4f7f\u308f\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u3082\u306e\u3067\u306f\u306a\u3044](http://mae.chab.in/archives/2937)\n\n## Redux\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n``npm``\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\n$ npm install --save redux\n```\n\n## \u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\n\n\u307e\u305a\u306fReact\u3092\u4f7f\u308f\u305a\u3001Redux\u306e\u307f\u3067\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002``src/index.jsx``\u3092\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```src/index.jsx\nimport {createStore} from 'redux';\n\nconst counter = (state = 0, action) => {\n  switch (action.type) {\n    case 'INCREMENT': \n      return state + 1;\n    case 'DECREMENT': \n      return state - 1;\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(counter);\n\nconst render = () => {\n  document.body.innerText = store.getState();\n}\n\nstore.subscribe(render);\nrender();\n\ndocument.addEventListener('click', () => {\n  store.dispatch({ type: 'INCREMENT' });\n});\n```\n\n``npm run start``\u3092\u5b9f\u884c\u3057\u3066[http://localhost:8888/](http://localhost:8888/)\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\u30da\u30fc\u30b8\u5185\u306e\u3069\u3053\u304b\u3092\u30af\u30ea\u30c3\u30af\u3057\u305f\u6642\u306b\u6570\u5024\u304c\u5897\u3048\u3066\u3044\u3051\u3070\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u3066\u3044\u308b\u3002\n\n\u3053\u306e\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u6b63\u3057\u304f\u7406\u89e3\u3057\u3088\u3046\u3002\u307e\u305a\u6700\u521d\u306e\u884c\u306fRedux\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304b\u3089``createStore``\u3068\u3044\u3046\u95a2\u6570\u3092\u4f7f\u3048\u308b\u3088\u3046\u3001\u30a4\u30f3\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\n\n\u6b21\u306b``counter``\u3068\u3044\u3046\u95a2\u6570\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\u3053\u306e\u95a2\u6570\u304c\u3001\u524d\u8ff0\u3057\u305freducer\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u5f15\u6570\u3068\u3057\u3066``state``\u3068``action``\u3092\u53d7\u3051\u53d6\u308a\u3001\u305d\u308c\u3089\u306b\u5fdc\u3058\u3066\u65b0\u3057\u3044``state``\u3092\u8fd4\u308a\u5024\u3068\u3057\u3066\u8fd4\u5374\u3059\u308b\u3002\u3053\u3053\u3067\u306f\u3001``action.type``\u304c'INCREMENT'\u306e\u3068\u304d\u306fstate\u3092+1\u3057\u3001'DECREMENT'\u306e\u3068\u304d\u306fstate\u3092-1\u3057\u3066\u3044\u308b\u3002\n\n\u3053\u306ereducer\u3092\u5143\u306b\u3001Redux\u306b\u3088\u3063\u3066``store``\u3068\u3044\u3046\u5909\u6570\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\u540d\u524d\u306e\u901a\u308astore\u3068\u306a\u308b\u3002\n\n\u305d\u3057\u3066\u3001state\u304c\u66f4\u65b0\u3055\u308c\u305f\u969b\u306e\u51e6\u7406\u3068\u3057\u3066``render``\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3001``subscribe``\u3057\u3066\u3044\u308b\u3002``render``\u95a2\u6570\u3067\u306f\u5358\u306b\u30da\u30fc\u30b8\u306b\u6700\u65b0\u306estate\uff08\u73fe\u5728\u306e\u30ab\u30a6\u30f3\u30c8\uff09\u3092\u8868\u793a\u3057\u3066\u3044\u308b\u3002\n\n\u6700\u5f8c\u306b\u3001\u30da\u30fc\u30b8\u5185\u304c\u30af\u30ea\u30c3\u30af\u3055\u308c\u305f\u969b\u3001store\u306b\u5bfe\u3057\u3066action\u3092\u767a\u884c\uff08``dispatch``\uff09\u3057\u3066\u3044\u308b\u3002\u30b3\u30fc\u30c9\u306e\u901a\u308a\u3001action\u306f``type``\u8981\u7d20\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308b\u3002\n\n## createStore\u306e\u5b9f\u88c5\u306f\u3069\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304b\uff1f\n\nRedux\u306e``createStore``\u306e\u4e2d\u3067\u306f\u4f55\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u306e\u3060\u308d\u3046\u304b\u3002\u9762\u767d\u3044\u3053\u3068\u306b\u3001\u5b9f\u88c5\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u975e\u5e38\u306b\u30b7\u30f3\u30d7\u30eb\u3067\u3042\u308b\uff08\u5b9f\u969b\u306b\u306f\u4f8b\u5916\u51e6\u7406\u306a\u3069\u3001\u3082\u3046\u5c11\u3057\u3060\u3051\u9577\u3044\u30b3\u30fc\u30c9\u306b\u306a\u3063\u3066\u3044\u308b\uff09\u3002\n\n```js\nconst createStore = (reducer) => {\n  let state;\n  let listeners = [];\n  \n  const getState = () => state;\n  \n  const dispatch = (action) => {\n    state = reducer(state, action);\n    listeners.forEach(listener => listener());\n  };\n  \n  const subscribe = (listener) => {\n    listeners.push(listener);\n    return () => {\n      listeners = listeners.filter(l => l !== listener)\n    }\n  };\n  \n  dispatch({});\n  \n  return { getState, dispatch, subscribe };\n}\n```\n\n\u30b3\u30fc\u30c9\u306e\u901a\u308a\u3001store\u306f``state``\u3068\u3001``listeners``\uff08\u72b6\u614b\u306e\u5909\u66f4\u3092\u76e3\u8996\u3057\u3066\u3044\u308b\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u9054\uff09\u3092\u6301\u3064\u3002\u307e\u305f\u3001\u73fe\u5728\u306estate\u3092\u53d6\u5f97\u3059\u308b``getState``\u3001\u305d\u3057\u3066action\u3092\u767a\u884c\u3059\u308b``dispatch``\u3001\u72b6\u614b\u306e\u5909\u66f4\u3092\u76e3\u8996\u3059\u308b\u305f\u3081\u306e``subscribe``\u3068\u3044\u30463\u3064\u306e\u95a2\u6570\u3092\u6301\u3064\u3002``state``\u3084``listeners``\u306f\u5916\u90e8\u304b\u3089\u76f4\u63a5\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n## React\u3092\u4f7f\u3063\u3066\u63cf\u753b\u3059\u308b\n\n\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u3092React\u3067\u63cf\u753b\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\u3002\u30b3\u30fc\u30c9\u306f\u307b\u3068\u3093\u3069\u5909\u308f\u3089\u306a\u3044\u3002\u307e\u305a``src/app.jsx``\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u3001\u6570\u5b57\u3092\u8868\u793a\u3059\u308b\u898b\u51fa\u3057\u3068\u3001\u300c+1\u300d\u3068\u300c-1\u300d\u306e\uff12\u3064\u306e\u30dc\u30bf\u30f3\u3092\u7f6e\u304f\u3002\n\n```src/app.jsx\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport React from 'react';\n\nexport default class App extends React.Component {\n  render() {\n    return (\n      <div>\n        <h1>{this.props.value}</h1>\n        <button className='btn btn-primary' onClick={this.props.onIncrement}>+</button>\n        <button className='btn btn-danger' onClick={this.props.onDecrement}>-</button>\n      </div>\n    )\n  }\n}\n```\n\n``src/index.jsx``\u306e\u65b9\u3067\u306fReactDOM\u306b\u3088\u3063\u3066\u3053\u308c\u3092\u63cf\u753b\u3059\u308b\u3002\u5168\u4f53\u306e\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n```src/index.jsx\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport {createStore} from 'redux';\nimport App from './app.jsx';\n\nconst counter = (state = 0, action) => {\n  switch (action.type) {\n    case 'INCREMENT':\n      return state + 1;\n    case 'DECREMENT':\n      return state - 1;\n    default:\n      return state;\n  }\n}\n\nconst store = createStore(counter);\n\nconst render = () => {\n  ReactDOM.render(\n    <App\n      value={store.getState()}\n      onIncrement={ () =>\n        store.dispatch({\n          type: 'INCREMENT'\n        })\n      }\n      onDecrement={ () =>\n        store.dispatch({\n          type: 'DECREMENT'\n        })\n      }\n    />,\n    document.getElementById('app')\n  )\n}\n\nstore.subscribe(render);\nrender();\n```\n\n\u30d7\u30e9\u30b9\u30dc\u30bf\u30f3\u3068\u30de\u30a4\u30ca\u30b9\u30dc\u30bf\u30f3\u306e\u3042\u308b\u30ab\u30a6\u30f3\u30c8\u30a2\u30d7\u30ea\u304c\u5b8c\u6210\u3057\u305f\uff01\n\n", "tags": ["redux", "React"]}