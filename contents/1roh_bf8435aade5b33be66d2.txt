{"context": " More than 1 year has passed since last update.RESTEasy\u3068JPA\u3068AngularJS\u3092\u4f7f\u3063\u3066Web\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u308b\uff14\uff08JPA\u3067\u30c7\u30fc\u30bf\u53d6\u5f97\uff09\u3067\u4f5c\u6210\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u516c\u958b\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nweb.xml \u306e\u7de8\u96c6\nRESTEasy\u304c\u4ed5\u4e8b\u3092\u3059\u308b\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\nweb.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app version=\"3.1\"\n    xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\">\n\n    <display-name>homework</display-name>\n\n    <context-param>\n        <param-name>resteasy.scan</param-name>\n        <param-value>true</param-value>\n    </context-param>\n    <context-param>\n        <param-name>resteasy.scan.provider</param-name>\n        <param-value>true</param-value>\n    </context-param>\n\n    <listener>\n        <listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>\n    </listener>\n\n    <servlet>\n        <servlet-name>JAX-RS Servlet</servlet-name>\n        <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>\n    </servlet>\n\n    <servlet-mapping>\n        <servlet-name>JAX-RS Servlet</servlet-name>\n        <url-pattern>/api/*</url-pattern>\n    </servlet-mapping>\n\n</web-app>\n\n\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u6307\u5b9a\n\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nweb.xml \u306e\u8a2d\u5b9a\u3067 /api/ \u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3082\u306e\u304c\u5bfe\u8c61\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3001/api \u304b\u3089\u59cb\u307e\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nUserService.java\n@Path(\"/api/user\")\npublic class UserService extends BaseService {\n    ..........\n    @Path(\"/login\")\n    @POST\n    @Consumes(MediaType.APPLICATION_JSON)\n    @Produces(MediaType.APPLICATION_JSON)\n    @ServiceLogging\n    public Responce login(User auth) {\n        Responce responce = new Responce();\n        User user = authenticate(auth.getAccountId(), auth.getPassword());\n        responce.setUser(user);\n        if (user != null) {\n            responce.setAnswers(getLatestWrongAnswers(user));\n        }\n        return responce;\n    }\n    ..........\n}\n\n\n\n\u30e6\u30fc\u30b6\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u306a\u306e\u3067 /api/user \u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3082\u306e\u3092\u5bfe\u8c61\u3068\u3059\u308b\u3088\u3046\u306b\u3001\u30af\u30e9\u30b9\u306b @Path \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u306f /api/user/login \u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3068\u304d\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b @Path \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067 /login \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nPOST \u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b @POST \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u8981\u6c42\u306f accountId \u3068 password \u8981\u7d20\u3092\u6301\u3063\u305f JSON \u3067\u884c\u3046\u306e\u3067 @Consumes \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067 JSON \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u5fdc\u7b54\u306f User \u3068 List \u3092\u6301\u3063\u305f\u30d3\u30fc\u30f3\u3092 JSON \u3067\u8fd4\u3059\u306e\u3067 @Produces \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067 JSON \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n@ServiceLogging \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u5165\u51fa\u529b\u3092\u30ed\u30b0\u306b\u51fa\u3057\u305f\u3044\u306e\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u6b21\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u5165\u51fa\u529b\u3092\u30ed\u30b0\u3067\u51fa\u529b\n\u30d5\u30a3\u30eb\u30bf\u30fc\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u30ed\u30b0\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nServiceLogging.java\npackage homework.extend;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport javax.ws.rs.NameBinding;\n\n@NameBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE,\n         ElementType.METHOD})\npublic @interface ServiceLogging {\n}\n\n\n\u30d5\u30a3\u30eb\u30bf\u30fc\u30af\u30e9\u30b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\u30ed\u30b0\u30ec\u30d9\u30eb\u304c\u30c7\u30d0\u30c3\u30b0\u4ee5\u4e0a\u306e\u5834\u5408\u306b\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\nServiceLoggingFilter.java\npackage homework.extend;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Map.Entry;\n\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.container.ContainerResponseContext;\nimport javax.ws.rs.container.ContainerResponseFilter;\nimport javax.ws.rs.core.UriInfo;\nimport javax.ws.rs.ext.Provider;\n\nimport org.apache.commons.io.IOUtils;\nimport org.jboss.logging.Logger;\n\n/**\n * \u30ed\u30ae\u30f3\u30b0\u30d5\u30a3\u30eb\u30bf\u30fc\u30af\u30e9\u30b9\u3002\n * @author satake\n */\n@ServiceLogging\n@Provider\npublic class ServiceLoggingFilter implements ContainerRequestFilter, ContainerResponseFilter {\n\n    private Logger logger = Logger.getLogger(ServiceLoggingFilter.class);\n\n    /**\n     * \u30ea\u30af\u30a8\u30b9\u30c8\u30d5\u30a3\u30eb\u30bf\u30fc\u3002\n     */\n    @Override\n    public void filter(ContainerRequestContext request) throws IOException {\n        if (logger.isDebugEnabled()) {\n            UriInfo uriInfo = request.getUriInfo();\n            logger.debug(\"******************** Request ********************\");\n            logger.debug(\"  Method: \" + request.getMethod());\n            logger.debug(\"  Path:   \" + uriInfo.getPath());\n            logger.debug(\"  Header:\");\n            for (Entry<String, List<String>> entry : request.getHeaders().entrySet()) {\n                logger.debug(\"    \" + entry.getKey() + \": \" + entry.getValue());\n            }\n            if (request.getEntityStream() != null) {\n                logger.debug(\"  Entity Stream:\");\n                ByteArrayOutputStream output = new ByteArrayOutputStream();\n                IOUtils.copy(request.getEntityStream(), output);\n                byte[] requestData = output.toByteArray();\n                logger.debug(\"    \" + new String(requestData, \"UTF-8\"));\n                request.setEntityStream(new ByteArrayInputStream(requestData));\n            }\n            logger.debug(\"*************************************************\");\n        }\n    }\n\n    /**\n     * \u30ec\u30b9\u30dd\u30f3\u30b9\u30d5\u30a3\u30eb\u30bf\u30fc\u3002\n     */\n    @Override\n    public void filter(ContainerRequestContext request, ContainerResponseContext response) throws IOException {\n        if (logger.isDebugEnabled()) {\n            logger.debug(\"******************** Response ********************\");\n            logger.debug(\"  Status: \" + response.getStatus());\n            logger.debug(\"  Entity: \" + response.getEntity());\n            logger.debug(\"**************************************************\");\n        }\n    }\n}\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u4f5c\u6210\n\u3068\u308a\u3042\u3048\u305a\u3001eclipse \u304b\u3089\u30ed\u30fc\u30ab\u30eb\u306e wildfly \u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u304c\u30d1\u30fc\u30b9\u30da\u30af\u30c6\u30a3\u30d6\u306b\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u3001eclipse \u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30a6\u30a4\u30f3\u30c9\u30a6\u300d\uff0d\u300c\u30d3\u30e5\u30fc\u306e\u8868\u793a\u300d\uff0d\u300c\u305d\u306e\u4ed6\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u30b5\u30fc\u30d0\u30fc\u300d\uff0d\u300c\u30b5\u30fc\u30d0\u30fc\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u3067\u300c\u4f7f\u7528\u53ef\u80fd\u306a\u30b5\u30fc\u30d0\u30fc\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u65b0\u898f\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u300d\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cJBoss \u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30fc\u300d\uff0d\u300cWildFly  9.x \u300d\u3092\u9078\u629e\u3057\u3001\u300c\u6b21\u3078\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u65b0\u898f JBoss \u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u300d\u753b\u9762\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306e\u307e\u307e\u3001\u300c\u6b21\u3078\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u8ffd\u52a0\u304a\u3088\u3073\u9664\u53bb\u300d\u753b\u9762\u3067\u3001\u5de6\u5074\u306b\u3042\u308b homework \u3092\u9078\u629e\u3057\u3066\u300c\u8ffd\u52a0\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u5b8c\u4e86\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u8a2d\u5b9a\nlog4jdbc \u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\u3001\u30ed\u30b0\u30c7\u30ea\u30b2\u30fc\u30bf\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u300cWildfly 9.x\u300d\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u6982\u8981\u300d\u753b\u9762\u306e\u4e00\u822c\u60c5\u5831\u306b\u3042\u308b\u300c\u8d77\u52d5\u69cb\u6210\u3092\u958b\u304f\u300d\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u8d77\u52d5\u69cb\u6210\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u7de8\u96c6\u300d\u753b\u9762\u306e\u300c\u5f15\u6570\u300d\u30bf\u30d6\u306e\u300cVM\u5f15\u6570\u300d\u306e\u6700\u5f8c\u306b\u300c-Dlog4jdbc.spylogdelegator.name=net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator\u300d\u3092\u8ffd\u8a18\u3057\u3066\u3001\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\n\u30ed\u30b0\u306e\u8a2d\u5b9a\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u306e\u51fa\u529b\u3068\u3001\u5358\u4f53\u30c6\u30b9\u30c8\u3068\u540c\u69d8\u306elog4jdbc\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\nwildfly\uff08E:\\develop\\pleiades\\wildfly\\wildfly-9.0.2.Final\uff09\u914d\u4e0b\u306e standalone\\configuration \u306b\u3042\u308b standalone.xml \u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\nstandalone.xml\n    ..........\n    <profile>\n        <subsystem xmlns=\"urn:jboss:domain:logging:3.0\">\n            <console-handler name=\"CONSOLE\">\n                <!-- \u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u51fa\u529b\u30ec\u30d9\u30eb\u3092\u300cINFO\u300d\u21d2\u300cDEBUG\u300d\u306b\u5909\u66f4 -->\n                <level name=\"DEBUG\"/>\n                <formatter>\n                    <named-formatter name=\"COLOR-PATTERN\"/>\n                </formatter>\n            </console-handler>\n            .........\n            <!-- \u30ed\u30ac\u30fc\u306e\u6307\u5b9a\u3092\u8ffd\u52a0\u3059\u308b -->\n            <logger category=\"homework\">\n                <level name=\"DEBUG\"/>\n            </logger>\n            <logger category=\"jdbc\">\n                <level name=\"ERROR\"/>\n            </logger>\n            <logger category=\"jdbc.sqltiming\">\n                <level name=\"INFO\"/>\n            </logger>\n            <logger category=\"jdbc.resultsettable\">\n                <level name=\"INFO\"/>\n            </logger>\n            <root-logger>\n                <level name=\"INFO\"/>\n                <handlers>\n                    <handler name=\"CONSOLE\"/>\n                    <handler name=\"FILE\"/>\n                </handlers>\n            </root-logger>\n            .........\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u78ba\u8a8d\n\n\u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u300cWildfly 9.x\u300d\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u958b\u59cb\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30a8\u30e9\u30fc\u304c\u306a\u304f\uff08\u30b9\u30bf\u30c3\u30af\u304c\u30ed\u30b0\u306b\u8868\u793a\u3055\u308c\u306a\u3044\uff09\u300cWildFly Full 9.0.2.Final (WildFly Core 1.0.2.Final) started in 5294ms\u300d\u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u8a2d\u5b9a\u306b\u554f\u984c\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u3002\n\nRESTEasy\u3068JPA\u3068AngularJS\u3092\u4f7f\u3063\u3066Web\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u308b\uff18\uff08\u753b\u9762\uff09\u3078\n[RESTEasy\u3068JPA\u3068AngularJS\u3092\u4f7f\u3063\u3066Web\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u308b\uff14\uff08JPA\u3067\u30c7\u30fc\u30bf\u53d6\u5f97\uff09](http://qiita.com/1roh/items/0c71441371f3ba76b3c9)\u3067\u4f5c\u6210\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u516c\u958b\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n# web.xml \u306e\u7de8\u96c6\nRESTEasy\u304c\u4ed5\u4e8b\u3092\u3059\u308b\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```xml:web.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app version=\"3.1\"\n\txmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n\txsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\">\n\n\t<display-name>homework</display-name>\n\n\t<context-param>\n\t\t<param-name>resteasy.scan</param-name>\n\t\t<param-value>true</param-value>\n\t</context-param>\n\t<context-param>\n\t\t<param-name>resteasy.scan.provider</param-name>\n\t\t<param-value>true</param-value>\n\t</context-param>\n\n\t<listener>\n\t\t<listener-class>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap</listener-class>\n\t</listener>\n\n\t<servlet>\n\t\t<servlet-name>JAX-RS Servlet</servlet-name>\n\t\t<servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>\n\t</servlet>\n\n\t<servlet-mapping>\n\t\t<servlet-name>JAX-RS Servlet</servlet-name>\n\t\t<url-pattern>/api/*</url-pattern>\n\t</servlet-mapping>\n\n</web-app>\n```\n\n# \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u6307\u5b9a\n\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nweb.xml \u306e\u8a2d\u5b9a\u3067 /api/ \u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3082\u306e\u304c\u5bfe\u8c61\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3001/api \u304b\u3089\u59cb\u307e\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```java:UserService.java\n@Path(\"/api/user\")\npublic class UserService extends BaseService {\n\t..........\n\t@Path(\"/login\")\n\t@POST\n\t@Consumes(MediaType.APPLICATION_JSON)\n\t@Produces(MediaType.APPLICATION_JSON)\n\t@ServiceLogging\n\tpublic Responce login(User auth) {\n\t\tResponce responce = new Responce();\n\t\tUser user = authenticate(auth.getAccountId(), auth.getPassword());\n\t\tresponce.setUser(user);\n\t\tif (user != null) {\n\t\t\tresponce.setAnswers(getLatestWrongAnswers(user));\n\t\t}\n\t\treturn responce;\n\t}\n\t..........\n}\n```\n\n- \u30e6\u30fc\u30b6\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u306a\u306e\u3067 /api/user \u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3082\u306e\u3092\u5bfe\u8c61\u3068\u3059\u308b\u3088\u3046\u306b\u3001\u30af\u30e9\u30b9\u306b @Path \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n- \u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u306f /api/user/login \u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3068\u304d\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b @Path \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067 /login \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n- POST \u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b @POST \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n- \u8981\u6c42\u306f accountId \u3068 password \u8981\u7d20\u3092\u6301\u3063\u305f JSON \u3067\u884c\u3046\u306e\u3067 @Consumes \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067 JSON \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n- \u5fdc\u7b54\u306f User \u3068 List<Answer> \u3092\u6301\u3063\u305f\u30d3\u30fc\u30f3\u3092 JSON \u3067\u8fd4\u3059\u306e\u3067 @Produces \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067 JSON \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n- @ServiceLogging \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306f\u5165\u51fa\u529b\u3092\u30ed\u30b0\u306b\u51fa\u3057\u305f\u3044\u306e\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3064\u3044\u3066\u306f\u6b21\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n# \u30b5\u30fc\u30d3\u30b9\u306e\u5165\u51fa\u529b\u3092\u30ed\u30b0\u3067\u51fa\u529b\n\u30d5\u30a3\u30eb\u30bf\u30fc\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u30ed\u30b0\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n```java:ServiceLogging.java\npackage homework.extend;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\nimport javax.ws.rs.NameBinding;\n\n@NameBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE,\n         ElementType.METHOD})\npublic @interface ServiceLogging {\n}\n```\n\n\u30d5\u30a3\u30eb\u30bf\u30fc\u30af\u30e9\u30b9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\u30ed\u30b0\u30ec\u30d9\u30eb\u304c\u30c7\u30d0\u30c3\u30b0\u4ee5\u4e0a\u306e\u5834\u5408\u306b\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n```java:ServiceLoggingFilter.java\npackage homework.extend;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Map.Entry;\n\nimport javax.ws.rs.container.ContainerRequestContext;\nimport javax.ws.rs.container.ContainerRequestFilter;\nimport javax.ws.rs.container.ContainerResponseContext;\nimport javax.ws.rs.container.ContainerResponseFilter;\nimport javax.ws.rs.core.UriInfo;\nimport javax.ws.rs.ext.Provider;\n\nimport org.apache.commons.io.IOUtils;\nimport org.jboss.logging.Logger;\n\n/**\n * \u30ed\u30ae\u30f3\u30b0\u30d5\u30a3\u30eb\u30bf\u30fc\u30af\u30e9\u30b9\u3002\n * @author satake\n */\n@ServiceLogging\n@Provider\npublic class ServiceLoggingFilter implements ContainerRequestFilter, ContainerResponseFilter {\n\n\tprivate Logger logger = Logger.getLogger(ServiceLoggingFilter.class);\n\n\t/**\n\t * \u30ea\u30af\u30a8\u30b9\u30c8\u30d5\u30a3\u30eb\u30bf\u30fc\u3002\n\t */\n\t@Override\n\tpublic void filter(ContainerRequestContext request) throws IOException {\n\t\tif (logger.isDebugEnabled()) {\n\t\t\tUriInfo uriInfo = request.getUriInfo();\n\t\t\tlogger.debug(\"******************** Request ********************\");\n\t\t\tlogger.debug(\"  Method: \" + request.getMethod());\n\t\t\tlogger.debug(\"  Path:   \" + uriInfo.getPath());\n\t\t\tlogger.debug(\"  Header:\");\n\t\t\tfor (Entry<String, List<String>> entry : request.getHeaders().entrySet()) {\n\t\t\t\tlogger.debug(\"    \" + entry.getKey() + \": \" + entry.getValue());\n\t\t\t}\n\t\t\tif (request.getEntityStream() != null) {\n\t\t\t\tlogger.debug(\"  Entity Stream:\");\n\t\t\t\tByteArrayOutputStream output = new ByteArrayOutputStream();\n\t\t\t\tIOUtils.copy(request.getEntityStream(), output);\n\t\t\t\tbyte[] requestData = output.toByteArray();\n\t\t\t\tlogger.debug(\"    \" + new String(requestData, \"UTF-8\"));\n\t\t\t\trequest.setEntityStream(new ByteArrayInputStream(requestData));\n\t\t\t}\n\t\t\tlogger.debug(\"*************************************************\");\n\t\t}\n\t}\n\n\t/**\n\t * \u30ec\u30b9\u30dd\u30f3\u30b9\u30d5\u30a3\u30eb\u30bf\u30fc\u3002\n\t */\n\t@Override\n\tpublic void filter(ContainerRequestContext request, ContainerResponseContext response) throws IOException {\n\t\tif (logger.isDebugEnabled()) {\n\t\t\tlogger.debug(\"******************** Response ********************\");\n\t\t\tlogger.debug(\"  Status: \" + response.getStatus());\n\t\t\tlogger.debug(\"  Entity: \" + response.getEntity());\n\t\t\tlogger.debug(\"**************************************************\");\n\t\t}\n\t}\n}\n```\n\n# \u30b5\u30fc\u30d0\u30fc\u306e\u4f5c\u6210\n\u3068\u308a\u3042\u3048\u305a\u3001eclipse \u304b\u3089\u30ed\u30fc\u30ab\u30eb\u306e wildfly \u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n- \u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u304c\u30d1\u30fc\u30b9\u30da\u30af\u30c6\u30a3\u30d6\u306b\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u3001eclipse \u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30a6\u30a4\u30f3\u30c9\u30a6\u300d\uff0d\u300c\u30d3\u30e5\u30fc\u306e\u8868\u793a\u300d\uff0d\u300c\u305d\u306e\u4ed6\u300d\u3092\u9078\u629e\u3057\u3001\u300c\u30b5\u30fc\u30d0\u30fc\u300d\uff0d\u300c\u30b5\u30fc\u30d0\u30fc\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n- \u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u3067\u300c\u4f7f\u7528\u53ef\u80fd\u306a\u30b5\u30fc\u30d0\u30fc\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u65b0\u898f\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u300d\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300cJBoss \u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u30fc\u300d\uff0d\u300cWildFly  9.x \u300d\u3092\u9078\u629e\u3057\u3001\u300c\u6b21\u3078\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n- \u300c\u65b0\u898f JBoss \u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u300d\u753b\u9762\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306e\u307e\u307e\u3001\u300c\u6b21\u3078\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n- \u300c\u8ffd\u52a0\u304a\u3088\u3073\u9664\u53bb\u300d\u753b\u9762\u3067\u3001\u5de6\u5074\u306b\u3042\u308b homework \u3092\u9078\u629e\u3057\u3066\u300c\u8ffd\u52a0\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u5b8c\u4e86\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n# \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u8a2d\u5b9a\nlog4jdbc \u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\u3001\u30ed\u30b0\u30c7\u30ea\u30b2\u30fc\u30bf\u30fc\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n- \u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u300cWildfly 9.x\u300d\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n- \u300c\u6982\u8981\u300d\u753b\u9762\u306e\u4e00\u822c\u60c5\u5831\u306b\u3042\u308b\u300c\u8d77\u52d5\u69cb\u6210\u3092\u958b\u304f\u300d\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n- \u300c\u8d77\u52d5\u69cb\u6210\u30d7\u30ed\u30d1\u30c6\u30a3\u30fc\u306e\u7de8\u96c6\u300d\u753b\u9762\u306e\u300c\u5f15\u6570\u300d\u30bf\u30d6\u306e\u300cVM\u5f15\u6570\u300d\u306e\u6700\u5f8c\u306b\u300c-Dlog4jdbc.spylogdelegator.name=net.sf.log4jdbc.log.slf4j.Slf4jSpyLogDelegator\u300d\u3092\u8ffd\u8a18\u3057\u3066\u3001\u300cOK\u300d\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n# \u30ed\u30b0\u306e\u8a2d\u5b9a\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c7\u30d0\u30c3\u30b0\u30ed\u30b0\u306e\u51fa\u529b\u3068\u3001\u5358\u4f53\u30c6\u30b9\u30c8\u3068\u540c\u69d8\u306elog4jdbc\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\nwildfly\uff08E:\\develop\\pleiades\\wildfly\\wildfly-9.0.2.Final\uff09\u914d\u4e0b\u306e standalone\\configuration \u306b\u3042\u308b standalone.xml \u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```xml:standalone.xml\n    ..........\n    <profile>\n        <subsystem xmlns=\"urn:jboss:domain:logging:3.0\">\n            <console-handler name=\"CONSOLE\">\n                <!-- \u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u51fa\u529b\u30ec\u30d9\u30eb\u3092\u300cINFO\u300d\u21d2\u300cDEBUG\u300d\u306b\u5909\u66f4 -->\n                <level name=\"DEBUG\"/>\n                <formatter>\n                    <named-formatter name=\"COLOR-PATTERN\"/>\n                </formatter>\n            </console-handler>\n            .........\n            <!-- \u30ed\u30ac\u30fc\u306e\u6307\u5b9a\u3092\u8ffd\u52a0\u3059\u308b -->\n            <logger category=\"homework\">\n                <level name=\"DEBUG\"/>\n            </logger>\n            <logger category=\"jdbc\">\n                <level name=\"ERROR\"/>\n            </logger>\n            <logger category=\"jdbc.sqltiming\">\n                <level name=\"INFO\"/>\n            </logger>\n            <logger category=\"jdbc.resultsettable\">\n                <level name=\"INFO\"/>\n            </logger>\n            <root-logger>\n                <level name=\"INFO\"/>\n                <handlers>\n                    <handler name=\"CONSOLE\"/>\n                    <handler name=\"FILE\"/>\n                </handlers>\n            </root-logger>\n            .........\n```\n\n# \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u78ba\u8a8d\n- \u30b5\u30fc\u30d0\u30fc\u30d3\u30e5\u30fc\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u300cWildfly 9.x\u300d\u3067\u53f3\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u958b\u59cb\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n- \u30a8\u30e9\u30fc\u304c\u306a\u304f\uff08\u30b9\u30bf\u30c3\u30af\u304c\u30ed\u30b0\u306b\u8868\u793a\u3055\u308c\u306a\u3044\uff09\u300cWildFly Full 9.0.2.Final (WildFly Core 1.0.2.Final) started in 5294ms\u300d\u3068\u3044\u3046\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u8a2d\u5b9a\u306b\u554f\u984c\u306f\u306a\u3055\u305d\u3046\u3067\u3059\u3002\n\n\n[RESTEasy\u3068JPA\u3068AngularJS\u3092\u4f7f\u3063\u3066Web\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u307f\u308b\uff18\uff08\u753b\u9762\uff09](http://qiita.com/1roh/items/397ba092a44473cbd224)\u3078\n", "tags": ["Wildfly", "resteasy", "log4jdbc-log4j2"]}