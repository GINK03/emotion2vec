{"context": "\n\n\u306f\u3058\u3081\u306b\n\n2016/8/3 Serverspec\u3067\u306e\u30c6\u30b9\u30c8\u3092\u8ffd\u8a18\nansible\u30822.1\u306b\u306a\u3063\u3066Windows Server\u306e\u30b5\u30dd\u30fc\u30c8\u3082\u5f37\u5316\u3055\u308c\u3001\u305d\u308d\u305d\u308d\u624b\u3092\u51fa\u3057\u3066\u3082\u826f\u3055\u305d\u3046\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001ansible\u3092\u5229\u7528\u3059\u308b\u524d\u306eWindowsServer\u5074\u306e\u8a2d\u5b9a\u3068IIS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001Windows\u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u69cb\u7bc9\u3057\u3001serverspec\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u8a18\u4e8b\u4e2d\u3067\u4f7f\u3063\u305fplaybook\u306e\u30b5\u30f3\u30d7\u30eb\u306fGithub uzresk/ansible-serverspec-windows-samples\u304b\u3089\u3069\u3046\u305e\u3002\n\n\n\n\u524d\u63d0\u3068\u306a\u308b\u74b0\u5883\n\n\u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u5c1a\u3001\u672c\u6587\u4e2d\u3067\u306fansible\u81ea\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\nansible\u5b9f\u884c\u30db\u30b9\u30c8\n\nCentOS6.7\nansible2.1.0\nserverspec 2.36.0\nIP:192.168.1.99\n\n\nansible\u9069\u7528\u30db\u30b9\u30c8\n\nWindowsServer2012R2\nopentable\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066vagrant\u3067\u8d77\u52d5\u3057\u307e\u3057\u305f\u3002\nIP:192.168.1.25\n\n\n\nansible\u3067\u74b0\u5883\u69cb\u7bc9\n\nansible\u3067\u74b0\u5883\u69cb\u7bc9\u3059\u308b\u524d\u6e96\u5099\n\nwinrm\u3092\u6709\u52b9\u5316\u3059\u308b\n\nAnsible \u3067 Windows \u306e\u69cb\u6210\u7ba1\u7406\u3092\u884c\u3046\u5834\u5408\u306b\u306f Windows Remote Management\uff08 WinRM\uff09\u3092\u6709\u52b9\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n\nwinrm\u3092\u6709\u52b9\u5316\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u53d6\u5f97\n\npower shell\u3092\u7ba1\u7406\u8005\u6a29\u9650\u3067\u8d77\u52d5\u3057\u305f\u5f8c\u306b\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066ansible\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308bwinrm\u3092\u6709\u52b9\u5316\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\nInvoke-WebRequest -Uri https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1 -OutFile ConfigureRemotingForAnsible.ps1\n\n\nNetworkCategory\u306e\u5909\u66f4\n\n\nWindows System Prep\u306b\u3088\u308b\u3068NetworkCategory\u3092private\u306b\u5909\u66f4\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u6a21\u69d8\n\nSet-NetConnectionProfile -InterfaceAlias (Get-NetConnectionProfile -IPv4Connectivity Internet).InterfaceAlias -NetworkCategory Private\n\n\n\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3053\u306e\u30b3\u30de\u30f3\u30c9(NetworkCategory\u304cprivate\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff09\n\nGet-NetConnectionProfile -IPv4Connectivity Internet\n\n\nwinrm\u3092\u6709\u52b9\u5316\nPS C:\\Users\\vagrant> powershell -ExecutionPolicy RemoteSigned .\\ConfigureRemotingForAnsible.ps1\n\n\nwxf                 : http://schemas.xmlsoap.org/ws/2004/09/transfer\na                   : http://schemas.xmlsoap.org/ws/2004/08/addressing\nw                   : http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd\nlang                : en-US\nAddress             : http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous\nReferenceParameters : ReferenceParameters\n\nOk.\n\n\nwindows server\u3067winrm\u306e\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3059\u308b\n\nPowershell\u3092\u8d77\u52d5\u3057\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n5986\u30685985\u30dd\u30fc\u30c8\u304c\u7a7a\u3044\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u306d\u3002\u3061\u306a\u307f\u306b5986\u306fhttps\u30015985\u306fhttp\u3067\u3059\u3002\n\nGet-Item WSMan:\\localhost\\Listener\\*\\Port\n\n\n   WSManConfig: Microsoft.WSMan.Management\\WSMan::localhost\\Listener\\Listener_1305953032\n\nType            Name                           SourceOfValue   Value\n----            ----                           -------------   -----\nSystem.String   Port                                           5986\n\n\n   WSManConfig: Microsoft.WSMan.Management\\WSMan::localhost\\Listener\\Listener_1084132640\n\nType            Name                           SourceOfValue   Value\n----            ----                           -------------   -----\nSystem.String   Port                                           5985\n\n\n\npip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nget-pip.py\u3092\u53d6\u5f97\ncurl -x http://PROXY_HOST:PROXY_PORT -O https://bootstrap.pypa.io/get-pip.py\n\n\npip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\n\nexport http_proxy=http://PROXY_HOST:PROXY_PORT\nexport https_proxy=http://PROXY_HOST:PROXY_PORT\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\npython get-pip.py\n\n\nwinrm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npip install pywinrm\n\n\nwinrm\u7d4c\u7531\u3067ansible\u304c\u5b9f\u884c\u3067\u304d\u308b\u304b\u3092\u78ba\u8a8d\u3059\u308b\n\n\u30d7\u30ed\u30ad\u30b7\u306e\u9664\u5916\u8a2d\u5b9a\n\nwinrm\u306fhttp/https\u901a\u4fe1\u3067\u3042\u308b\u305f\u3081\u3001\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001ansible\u5bfe\u8c61\u30db\u30b9\u30c8\u3092\u9664\u5916\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nexport no_proxy=\"192.168.1.25\"\n\n\ninventry\u30d5\u30a1\u30a4\u30eb(hosts)\u306e\u8a2d\u5b9a\n\n\u4f59\u8ac7\u3067\u3059\u304c\u3001ansible2.0\u304b\u3089\u306fansible_ssh_user\u306a\u3069\u306fdeprecated\u306b\u306a\u3063\u3066\u3001ssh\u3092\u53d6\u3063\u305f\u5909\u6570\u540d\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002\nansible windows inventory\n\n[windows]\n192.168.1.25\n\n[windows:vars]\nansible_user=vagrant\nansible_password=vagrant\nansible_port=5985\nansible_connection=winrm\n\n\nhttps(5986)\u3067\u63a5\u7d9a\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u3092\u3057\u306a\u3044\u3088\u3046\u306binventory\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u6210\u3059\u308c\u3070\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002(python\u306e2.7.9\u304b\u3089\u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u304c\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305d\u3046\u3067\u3059\uff09\n\n[windows]\n192.168.1.25\n\n[windows:vars]\nansible_user=vagrant\nansible_password=vagrant\nansible_port=5986\nansible_connection=winrm\nansible_winrm_server_cert_validation=ignore\n\n\nwin_ping\u3092\u4f7f\u3063\u3066\u758e\u901a\u78ba\u8a8d\n[root@52ae470c2708 scripts]# ansible -i hosts windows -m win_ping\n192.168.1.25 | SUCCESS => {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n\n\n\nWindowsServer\u306e\u8a2d\u5b9a\u3092ansible\u3067\uff01\n\nansible\u3067windows server\u3092\u69cb\u6210\u3059\u308b\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u7fa4\u306f\u4ee5\u4e0b\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002\nWindows Modules\n\n\nIIS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b\n\n\nwin_feature\u306b\u8a18\u8f09\u304c\u3042\u308bplaybook\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\u79c1\u306e\u74b0\u5883\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u305a\u3001include_sub_features: no\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3068\u3053\u308d\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n\u53c2\u8003\uff1awin_feature for iis with sub features: yes fails on 2012 R2 #3640\n\n\n[root@52ae470c2708 ansible-scripts]# cat roles/iis/tasks/main.yml\n- name: Install IIS\n  win_feature:\n    name: \"Web-Server\"\n    state: present\n    restart: yes\n    include_sub_features: no\n    include_management_tools: yes\n\n[root@52ae470c2708 ansible-scripts]# ansible-playbook -i hosts site.yml\n\nPLAY [windows] *****************************************************************\n\nTASK [iis : Install IIS] *******************************************************\nchanged: [192.168.1.25]\n\nPLAY RECAP *********************************************************************\n192.168.1.25               : ok=1    changed=1    unreachable=0    failed=0\n\n\n\nhttp://192.168.1.25/\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u7121\u4e8bIIS\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n\n\u30b0\u30eb\u30fc\u30d7\u3068\u30e6\u30fc\u30b6\u3092\u3064\u304f\u3063\u3066\u307f\u3088\u3046\n\n\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\n\n\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\u306b\u306fwin_group\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n[root@52ae470c2708 ansible-scripts]# cat roles/group/tasks/main.yml\n---\n- name: create test-group\n  win_group:\n    name: test-group\n    descriptsion: test group\n    state: present\n\n\n\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\n\n\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\u306b\u306fwin_user\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n[root@52ae470c2708 ansible-scripts]# cat roles/user/tasks/main.yml\n---\n- name: Add User\n  win_user:\n    name: test\n    password: \"@Password1\"\n    groups: [\"test-group\"]\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30dd\u30ea\u30b7\u30fc\u306b\u9055\u53cd\u3057\u305f\u5834\u5408\u306fplaybook\u5b9f\u884c\u6642\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u3067\u307e\u3059\n\nTASK [user : Add User] *********************************************************\nfatal: [192.168.1.25]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Exception calling \\\"SetInfo\\\" with \\\"0\\\" argument(s): \\\"The password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.\\r\\n\\\"\"}\n\n\n\u5b9f\u884c\u5f8c\u3001\u30b5\u30fc\u30d0\u30de\u30cd\u30fc\u30b8\u30e3 - \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306e\u7ba1\u7406 - \u30ed\u30fc\u30ab\u30eb\u30e6\u30fc\u30b6\u3068\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u30e6\u30fc\u30b6\u3068\u30b0\u30eb\u30fc\u30d7\u304c\u8ffd\u52a0\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\nServerspec\n\nServerspec\u3092\u4f7f\u3063\u3066windows\u3092\u30c6\u30b9\u30c8\u3059\u308b\u70ba\u306e\u524d\u6e96\u5099\n\nServerspec\u3082ansible\u540c\u69d8winrm\u3092\u4f7f\u3063\u3066\u63a5\u7d9a\u3057\u307e\u3059\u3002Linux\u3092\u30c6\u30b9\u30c8\u3059\u308b\u6642\u3068\u6bd4\u3079\u3066\u5fc5\u8981\u306b\u306a\u308b\u306e\u306fwinrm\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u307f\u3067\u3059\u3002\n\n\nwinrm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\ngem install winrm\n\n\n\u63a5\u7d9a\u306e\u4ed5\u65b9\u3082winrm\u7d4c\u7531\u306b\u5909\u66f4\n\n\u3053\u3053\u3067\u306f\u3001TARGET_HOST\u3001USER\u3001PASSWORD\u3092\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3057winrm\u306e\u63a5\u7d9a\u3067\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n[root@52ae470c2708 serverspec]# cat spec/spec_helper.rb\nrequire 'serverspec'\nrequire 'net/ssh'\nrequire 'winrm'\n\nset :backend, :winrm\n\nRSpec.configure do |c|\n  host = ENV['TARGET_HOST']\n  user = ENV['USER'].dup\n  pass = ENV['PASSWORD'].dup\n  puts user\n  puts pass\n  endpoint = \"http://\" + host + \":5985/wsman\"\n\n  c.winrm = ::WinRM::WinRMWebService.new(endpoint, :ssl, :user => user, :pass => pass)\n  c.winrm.set_timeout 300 # 5 minutes max timeout for any operation\nend\n\n\n\u30c6\u30b9\u30c8\u3057\u3066\u307f\u3088\u3046\n\nIIS\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u30c6\u30b9\u30c8\u3059\u308b\n\n\u3053\u3053\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u5426\u304b\u3068\u30dd\u30fc\u30c8\u304cListen\u3057\u3066\u3044\u308b\u304b\u5426\u304b\u3092\u30c6\u30b9\u30c8\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u5426\u304b\u306fServerspec\u306eResourceType\u306bwindows_feature\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\u30dd\u30fc\u30c8\u304cListend\u3057\u3066\u3044\u308b\u304b\u5426\u304b\u306b\u3064\u3044\u3066\u306fLinux\u540c\u69d8port\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\niis_spec.rb\nrequire 'spec_helper'\n\ndescribe windows_feature('Web-Server') do\n  it { should be_installed.by(\"powershell\") }\nend\n\ndescribe port(80) do\n  it { should be_listening.with('tcp') }\nend\n\n\n\n\u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u306e\u30c6\u30b9\u30c8\n\n\u30b0\u30eb\u30fc\u30d7\u304c\u5b58\u5728\u3059\u308b\u304b\u5426\u304b\u3001\u30e6\u30fc\u30b6\u304c\u5b58\u5728\u3059\u308b\u304b\u5426\u304b\u3001\u30e6\u30fc\u30b6\u304c\u30b0\u30eb\u30fc\u30d7\u306b\u5b58\u5728\u3059\u308b\u304b\u5426\u304b\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n\u3053\u3061\u3089\u306fLinux\u540c\u69d8group\u3068user\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\ngroup_spec.rb\nrequire 'spec_helper'\n\ndescribe group('test-group') do\n  it { should exist }\nend\n\n\n\nuser_spec.rb\nrequire 'spec_helper'\n\ndescribe user('test') do\n  it { should exist }\n  it { should belong_to_group 'test-group' }\nend\n\n\n\n\u5b9f\u884c\n\n\u5168\u90e8\u7121\u4e8b\u30c6\u30b9\u30c8\u304c\u901a\u308a\u307e\u3057\u305f\u306d\u3002\n\n[root@52ae470c2708 windows]# rake spec\n(in /scripts/ansible-serverspec-windows-samples/first-step/serverspec)\nenv TARGET_HOST=192.168.1.25 /root/.rbenv/versions/2.3.1/bin/ruby -I/root/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rspec-support-3.4.1/lib:/root/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib /root/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/exe/rspec --pattern spec/\\{windows\\}/\\*_spec.rb\nvagrant\nvagrant\n\nGroup \"test-group\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should exist\n\nWindows feature \"Web-Server\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should be installed by \"powershell\"\n\nPort \"80\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should be listening with tcp\n\nUser \"test\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should exist\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should belong to group \"test-group\"\n\nFinished in 2.35 seconds (files took 0.48295 seconds to load)\n5 examples, 0 failures\n\n\n\n\u304a\u308f\u308a\u306b\n\n\u306f\u3058\u3081\u308b\u524d\u306fWinRM\u3068\u304b\u9762\u5012\u3060\u306a\u30fc\u3068\u304b\u8272\u3005\u601d\u3044\u307e\u3057\u305f\u304c\u62cd\u5b50\u629c\u3051\u3059\u308b\u307b\u3069\u7c21\u5358\u306b\u3067\u304d\u307e\u3057\u305f\u306e\u3067\u4e8c\u306e\u8db3\u3092\u8e0f\u3093\u3067\u3044\u308b\u4eba\u306f\u307e\u305a\u306f\u3084\u3063\u3066\u307f\u308b\u3068\u3088\u3055\u305d\u3046\u3067\u3059\u3002\nansible\u306f1.7\u3067\u30b5\u30dd\u30fc\u30c8\u958b\u59cb\u3055\u308c\u305f\u3053\u308d\u3088\u308a\u3082windows\u7cfb\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5897\u3048\u305f\u3053\u3068\u3067\u3053\u308c\u304b\u3089\u307e\u3059\u307e\u3059\u6d3b\u8e8d\u306e\u5834\u304c\u5897\u3048\u3066\u3044\u304d\u305d\u3046\u3067\u3059\u306d\u3002\nansible\u306fwindows\u3068linux\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5225\u308c\u3066\u3044\u307e\u3059\u304c\u3001serverspec\u306f\u4e00\u3064\u306eResourceType\u3067\u8907\u6570\u306eOS\u3092\u30ab\u30d0\u30fc\u3067\u304d\u308b\u3088\u3046\u306a\u306e\u3067\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u5c11\u306a\u304f\u826f\u3044\u611f\u3058\u3067\u3059\u306d\u3002\n\n# \u306f\u3058\u3081\u306b\n\n* **2016/8/3 Serverspec\u3067\u306e\u30c6\u30b9\u30c8\u3092\u8ffd\u8a18**\n\n* ansible\u30822.1\u306b\u306a\u3063\u3066Windows Server\u306e\u30b5\u30dd\u30fc\u30c8\u3082\u5f37\u5316\u3055\u308c\u3001\u305d\u308d\u305d\u308d\u624b\u3092\u51fa\u3057\u3066\u3082\u826f\u3055\u305d\u3046\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n* \u3068\u3044\u3046\u3053\u3068\u3067\u3001ansible\u3092\u5229\u7528\u3059\u308b\u524d\u306eWindowsServer\u5074\u306e\u8a2d\u5b9a\u3068IIS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001Windows\u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u306e\u8a2d\u5b9a\u3092\u81ea\u52d5\u69cb\u7bc9\u3057\u3001serverspec\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3068\u3053\u308d\u307e\u3067\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n* \u8a18\u4e8b\u4e2d\u3067\u4f7f\u3063\u305fplaybook\u306e\u30b5\u30f3\u30d7\u30eb\u306f[Github uzresk/ansible-serverspec-windows-samples](https://github.com/uzresk/ansible-serverspec-windows-samples.git)\u304b\u3089\u3069\u3046\u305e\u3002\n\n---\n\n# \u524d\u63d0\u3068\u306a\u308b\u74b0\u5883\n\n* \u4ee5\u4e0b\u306e\u74b0\u5883\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n* \u5c1a\u3001\u672c\u6587\u4e2d\u3067\u306fansible\u81ea\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u5272\u611b\u3057\u3066\u3044\u307e\u3059\u3002\n\n## ansible\u5b9f\u884c\u30db\u30b9\u30c8\n\n* CentOS6.7\n* ansible2.1.0\n* serverspec 2.36.0\n* IP:192.168.1.99\n\n## ansible\u9069\u7528\u30db\u30b9\u30c8\n\n* WindowsServer2012R2\n* opentable\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066vagrant\u3067\u8d77\u52d5\u3057\u307e\u3057\u305f\u3002\n* IP:192.168.1.25\n\n---\n\n# ansible\u3067\u74b0\u5883\u69cb\u7bc9\n\n## ansible\u3067\u74b0\u5883\u69cb\u7bc9\u3059\u308b\u524d\u6e96\u5099\n\n### winrm\u3092\u6709\u52b9\u5316\u3059\u308b\n\n* Ansible \u3067 Windows \u306e\u69cb\u6210\u7ba1\u7406\u3092\u884c\u3046\u5834\u5408\u306b\u306f Windows Remote Management\uff08 WinRM\uff09\u3092\u6709\u52b9\u5316\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n### winrm\u3092\u6709\u52b9\u5316\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u53d6\u5f97\n\n* power shell\u3092\u7ba1\u7406\u8005\u6a29\u9650\u3067\u8d77\u52d5\u3057\u305f\u5f8c\u306b\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3063\u3066ansible\u304c\u63d0\u4f9b\u3057\u3066\u3044\u308bwinrm\u3092\u6709\u52b9\u5316\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```\nInvoke-WebRequest -Uri https://raw.githubusercontent.com/ansible/ansible/devel/examples/scripts/ConfigureRemotingForAnsible.ps1 -OutFile ConfigureRemotingForAnsible.ps1\n```\n\n#### NetworkCategory\u306e\u5909\u66f4\n\n* [Windows System Prep](http://docs.ansible.com/ansible/intro_windows.html#windows-system-prep)\u306b\u3088\u308b\u3068NetworkCategory\u3092private\u306b\u5909\u66f4\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u6a21\u69d8\n\n```\nSet-NetConnectionProfile -InterfaceAlias (Get-NetConnectionProfile -IPv4Connectivity Internet).InterfaceAlias -NetworkCategory Private\n```\n\n* \u78ba\u8a8d\u3059\u308b\u306b\u306f\u3053\u306e\u30b3\u30de\u30f3\u30c9(NetworkCategory\u304cprivate\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff09\n\n```\nGet-NetConnectionProfile -IPv4Connectivity Internet\n```\n\n#### winrm\u3092\u6709\u52b9\u5316\n\n```\nPS C:\\Users\\vagrant> powershell -ExecutionPolicy RemoteSigned .\\ConfigureRemotingForAnsible.ps1\n\n\nwxf                 : http://schemas.xmlsoap.org/ws/2004/09/transfer\na                   : http://schemas.xmlsoap.org/ws/2004/08/addressing\nw                   : http://schemas.dmtf.org/wbem/wsman/1/wsman.xsd\nlang                : en-US\nAddress             : http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous\nReferenceParameters : ReferenceParameters\n\nOk.\n```\n\n#### windows server\u3067winrm\u306e\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3059\u308b\n\n* Powershell\u3092\u8d77\u52d5\u3057\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n* 5986\u30685985\u30dd\u30fc\u30c8\u304c\u7a7a\u3044\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u306d\u3002\u3061\u306a\u307f\u306b5986\u306fhttps\u30015985\u306fhttp\u3067\u3059\u3002\n\n```\nGet-Item WSMan:\\localhost\\Listener\\*\\Port\n\n\n   WSManConfig: Microsoft.WSMan.Management\\WSMan::localhost\\Listener\\Listener_1305953032\n\nType            Name                           SourceOfValue   Value\n----            ----                           -------------   -----\nSystem.String   Port                                           5986\n\n\n   WSManConfig: Microsoft.WSMan.Management\\WSMan::localhost\\Listener\\Listener_1084132640\n\nType            Name                           SourceOfValue   Value\n----            ----                           -------------   -----\nSystem.String   Port                                           5985\n\n```\n\n### pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n#### get-pip.py\u3092\u53d6\u5f97\n\n```\ncurl -x http://PROXY_HOST:PROXY_PORT -O https://bootstrap.pypa.io/get-pip.py\n```\n\n#### pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* \u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\n\n```\nexport http_proxy=http://PROXY_HOST:PROXY_PORT\nexport https_proxy=http://PROXY_HOST:PROXY_PORT\n```\n\n* \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\npython get-pip.py\n```\n\n### winrm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\npip install pywinrm\n```\n\n### winrm\u7d4c\u7531\u3067ansible\u304c\u5b9f\u884c\u3067\u304d\u308b\u304b\u3092\u78ba\u8a8d\u3059\u308b\n\n#### \u30d7\u30ed\u30ad\u30b7\u306e\u9664\u5916\u8a2d\u5b9a\n\n* winrm\u306fhttp/https\u901a\u4fe1\u3067\u3042\u308b\u305f\u3081\u3001\u30d7\u30ed\u30ad\u30b7\u306e\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001ansible\u5bfe\u8c61\u30db\u30b9\u30c8\u3092\u9664\u5916\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```\nexport no_proxy=\"192.168.1.25\"\n```\n\n#### inventry\u30d5\u30a1\u30a4\u30eb(hosts)\u306e\u8a2d\u5b9a\n\n* \u4f59\u8ac7\u3067\u3059\u304c\u3001ansible2.0\u304b\u3089\u306fansible_ssh_user\u306a\u3069\u306fdeprecated\u306b\u306a\u3063\u3066\u3001ssh\u3092\u53d6\u3063\u305f\u5909\u6570\u540d\u304c\u63a8\u5968\u3055\u308c\u307e\u3059\u3002\n* [ansible windows inventory](http://docs.ansible.com/ansible/intro_windows.html#inventory)\n\n```\n[windows]\n192.168.1.25\n\n[windows:vars]\nansible_user=vagrant\nansible_password=vagrant\nansible_port=5985\nansible_connection=winrm\n```\n\n* https(5986)\u3067\u63a5\u7d9a\u3059\u308b\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u3092\u3057\u306a\u3044\u3088\u3046\u306binventory\u30d5\u30a1\u30a4\u30eb\u3092\u69cb\u6210\u3059\u308c\u3070\u63a5\u7d9a\u3067\u304d\u307e\u3059\u3002(python\u306e2.7.9\u304b\u3089\u8a3c\u660e\u66f8\u306e\u691c\u8a3c\u304c\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u305d\u3046\u3067\u3059\uff09\n\n```\n[windows]\n192.168.1.25\n\n[windows:vars]\nansible_user=vagrant\nansible_password=vagrant\nansible_port=5986\nansible_connection=winrm\nansible_winrm_server_cert_validation=ignore\n```\n\n#### win_ping\u3092\u4f7f\u3063\u3066\u758e\u901a\u78ba\u8a8d\n\n```\n[root@52ae470c2708 scripts]# ansible -i hosts windows -m win_ping\n192.168.1.25 | SUCCESS => {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n```\n\n---\n\n## WindowsServer\u306e\u8a2d\u5b9a\u3092ansible\u3067\uff01\n\n* ansible\u3067windows server\u3092\u69cb\u6210\u3059\u308b\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u7fa4\u306f\u4ee5\u4e0b\u306b\u8a18\u8f09\u304c\u3042\u308a\u307e\u3059\u3002\n* [Windows Modules](http://docs.ansible.com/ansible/list_of_windows_modules.html)\n\n### IIS\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b\n\n* [win_feature](http://docs.ansible.com/ansible/win_feature_module.html)\u306b\u8a18\u8f09\u304c\u3042\u308bplaybook\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n* \u79c1\u306e\u74b0\u5883\u3067\u306f\u3046\u307e\u304f\u3044\u304b\u305a\u3001include_sub_features: no\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3068\u3053\u308d\u3046\u307e\u304f\u52d5\u304d\u307e\u3057\u305f\u3002\n* \u53c2\u8003\uff1a[win_feature for iis with sub features: yes fails on 2012 R2 #3640](https://github.com/ansible/ansible-modules-core/issues/3640)\n\n```\n[root@52ae470c2708 ansible-scripts]# cat roles/iis/tasks/main.yml\n- name: Install IIS\n  win_feature:\n    name: \"Web-Server\"\n    state: present\n    restart: yes\n    include_sub_features: no\n    include_management_tools: yes\n```\n\n```\n[root@52ae470c2708 ansible-scripts]# ansible-playbook -i hosts site.yml\n\nPLAY [windows] *****************************************************************\n\nTASK [iis : Install IIS] *******************************************************\nchanged: [192.168.1.25]\n\nPLAY RECAP *********************************************************************\n192.168.1.25               : ok=1    changed=1    unreachable=0    failed=0\n```\n\n* [http://192.168.1.25/](http://192.168.1.25/)\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u7121\u4e8bIIS\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n### \u30b0\u30eb\u30fc\u30d7\u3068\u30e6\u30fc\u30b6\u3092\u3064\u304f\u3063\u3066\u307f\u3088\u3046\n\n#### \u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\n\n* \u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f[win_group\u30e2\u30b8\u30e5\u30fc\u30eb](http://docs.ansible.com/ansible/win_group_module.html)\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```\n[root@52ae470c2708 ansible-scripts]# cat roles/group/tasks/main.yml\n---\n- name: create test-group\n  win_group:\n    name: test-group\n    descriptsion: test group\n    state: present\n```\n\n#### \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\n\n* \u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f[win_user\u30e2\u30b8\u30e5\u30fc\u30eb](http://docs.ansible.com/ansible/win_user_module.html)\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```\n[root@52ae470c2708 ansible-scripts]# cat roles/user/tasks/main.yml\n---\n- name: Add User\n  win_user:\n    name: test\n    password: \"@Password1\"\n    groups: [\"test-group\"]\n```\n\n* \u30d1\u30b9\u30ef\u30fc\u30c9\u30dd\u30ea\u30b7\u30fc\u306b\u9055\u53cd\u3057\u305f\u5834\u5408\u306fplaybook\u5b9f\u884c\u6642\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u3067\u307e\u3059\n\n```\nTASK [user : Add User] *********************************************************\nfatal: [192.168.1.25]: FAILED! => {\"changed\": false, \"failed\": true, \"msg\": \"Exception calling \\\"SetInfo\\\" with \\\"0\\\" argument(s): \\\"The password does not meet the password policy requirements. Check the minimum password length, password complexity and password history requirements.\\r\\n\\\"\"}\n```\n\n* \u5b9f\u884c\u5f8c\u3001\u30b5\u30fc\u30d0\u30de\u30cd\u30fc\u30b8\u30e3 - \u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306e\u7ba1\u7406 - \u30ed\u30fc\u30ab\u30eb\u30e6\u30fc\u30b6\u3068\u30b0\u30eb\u30fc\u30d7\u304b\u3089\u30e6\u30fc\u30b6\u3068\u30b0\u30eb\u30fc\u30d7\u304c\u8ffd\u52a0\u3067\u304d\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n---\n\n# Serverspec\n\n## Serverspec\u3092\u4f7f\u3063\u3066windows\u3092\u30c6\u30b9\u30c8\u3059\u308b\u70ba\u306e\u524d\u6e96\u5099\n\n* Serverspec\u3082ansible\u540c\u69d8winrm\u3092\u4f7f\u3063\u3066\u63a5\u7d9a\u3057\u307e\u3059\u3002Linux\u3092\u30c6\u30b9\u30c8\u3059\u308b\u6642\u3068\u6bd4\u3079\u3066\u5fc5\u8981\u306b\u306a\u308b\u306e\u306fwinrm\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u307f\u3067\u3059\u3002\n\n### winrm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\ngem install winrm\n```\n\n### \u63a5\u7d9a\u306e\u4ed5\u65b9\u3082winrm\u7d4c\u7531\u306b\u5909\u66f4\n\n* \u3053\u3053\u3067\u306f\u3001TARGET_HOST\u3001USER\u3001PASSWORD\u3092\u74b0\u5883\u5909\u6570\u304b\u3089\u53d6\u5f97\u3057winrm\u306e\u63a5\u7d9a\u3067\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n```\n[root@52ae470c2708 serverspec]# cat spec/spec_helper.rb\nrequire 'serverspec'\nrequire 'net/ssh'\nrequire 'winrm'\n\nset :backend, :winrm\n\nRSpec.configure do |c|\n  host = ENV['TARGET_HOST']\n  user = ENV['USER'].dup\n  pass = ENV['PASSWORD'].dup\n  puts user\n  puts pass\n  endpoint = \"http://\" + host + \":5985/wsman\"\n\n  c.winrm = ::WinRM::WinRMWebService.new(endpoint, :ssl, :user => user, :pass => pass)\n  c.winrm.set_timeout 300 # 5 minutes max timeout for any operation\nend\n```\n\n## \u30c6\u30b9\u30c8\u3057\u3066\u307f\u3088\u3046\n\n### IIS\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u30c6\u30b9\u30c8\u3059\u308b\n\n* \u3053\u3053\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u5426\u304b\u3068\u30dd\u30fc\u30c8\u304cListen\u3057\u3066\u3044\u308b\u304b\u5426\u304b\u3092\u30c6\u30b9\u30c8\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n* \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u304b\u5426\u304b\u306fServerspec\u306eResourceType\u306b[windows_feature](http://serverspec.org/resource_types.html#windows_feature)\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u5229\u7528\u3057\u307e\u3059\u3002\u30dd\u30fc\u30c8\u304cListend\u3057\u3066\u3044\u308b\u304b\u5426\u304b\u306b\u3064\u3044\u3066\u306fLinux\u540c\u69d8[port](http://serverspec.org/resource_types.html#port)\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```iis_spec.rb\nrequire 'spec_helper'\n\ndescribe windows_feature('Web-Server') do\n  it { should be_installed.by(\"powershell\") }\nend\n\ndescribe port(80) do\n  it { should be_listening.with('tcp') }\nend\n```\n\n### \u30b0\u30eb\u30fc\u30d7\u3001\u30e6\u30fc\u30b6\u306e\u30c6\u30b9\u30c8\n\n* \u30b0\u30eb\u30fc\u30d7\u304c\u5b58\u5728\u3059\u308b\u304b\u5426\u304b\u3001\u30e6\u30fc\u30b6\u304c\u5b58\u5728\u3059\u308b\u304b\u5426\u304b\u3001\u30e6\u30fc\u30b6\u304c\u30b0\u30eb\u30fc\u30d7\u306b\u5b58\u5728\u3059\u308b\u304b\u5426\u304b\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\u3002\n* \u3053\u3061\u3089\u306fLinux\u540c\u69d8[group](http://serverspec.org/resource_types.html#group)\u3068[user](http://serverspec.org/resource_types.html#user)\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```group_spec.rb\nrequire 'spec_helper'\n\ndescribe group('test-group') do\n  it { should exist }\nend\n```\n\n```user_spec.rb\nrequire 'spec_helper'\n\ndescribe user('test') do\n  it { should exist }\n  it { should belong_to_group 'test-group' }\nend\n```\n\n### \u5b9f\u884c\n\n* \u5168\u90e8\u7121\u4e8b\u30c6\u30b9\u30c8\u304c\u901a\u308a\u307e\u3057\u305f\u306d\u3002\n\n```\n[root@52ae470c2708 windows]# rake spec\n(in /scripts/ansible-serverspec-windows-samples/first-step/serverspec)\nenv TARGET_HOST=192.168.1.25 /root/.rbenv/versions/2.3.1/bin/ruby -I/root/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rspec-support-3.4.1/lib:/root/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/lib /root/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/rspec-core-3.4.4/exe/rspec --pattern spec/\\{windows\\}/\\*_spec.rb\nvagrant\nvagrant\n\nGroup \"test-group\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should exist\n\nWindows feature \"Web-Server\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should be installed by \"powershell\"\n\nPort \"80\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should be listening with tcp\n\nUser \"test\"\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should exist\n WARN  WinRM::WinRMWebService : WinRM::WinRMWebService#run_powershell_script is deprecated. Use WinRM::CommandExecutor#run_powershell_script instead\n  should belong to group \"test-group\"\n\nFinished in 2.35 seconds (files took 0.48295 seconds to load)\n5 examples, 0 failures\n```\n\n---\n\n# \u304a\u308f\u308a\u306b\n\n* \u306f\u3058\u3081\u308b\u524d\u306fWinRM\u3068\u304b\u9762\u5012\u3060\u306a\u30fc\u3068\u304b\u8272\u3005\u601d\u3044\u307e\u3057\u305f\u304c\u62cd\u5b50\u629c\u3051\u3059\u308b\u307b\u3069\u7c21\u5358\u306b\u3067\u304d\u307e\u3057\u305f\u306e\u3067\u4e8c\u306e\u8db3\u3092\u8e0f\u3093\u3067\u3044\u308b\u4eba\u306f\u307e\u305a\u306f\u3084\u3063\u3066\u307f\u308b\u3068\u3088\u3055\u305d\u3046\u3067\u3059\u3002\n* ansible\u306f1.7\u3067\u30b5\u30dd\u30fc\u30c8\u958b\u59cb\u3055\u308c\u305f\u3053\u308d\u3088\u308a\u3082windows\u7cfb\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5897\u3048\u305f\u3053\u3068\u3067\u3053\u308c\u304b\u3089\u307e\u3059\u307e\u3059\u6d3b\u8e8d\u306e\u5834\u304c\u5897\u3048\u3066\u3044\u304d\u305d\u3046\u3067\u3059\u306d\u3002\n* ansible\u306fwindows\u3068linux\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5225\u308c\u3066\u3044\u307e\u3059\u304c\u3001serverspec\u306f\u4e00\u3064\u306eResourceType\u3067\u8907\u6570\u306eOS\u3092\u30ab\u30d0\u30fc\u3067\u304d\u308b\u3088\u3046\u306a\u306e\u3067\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u5c11\u306a\u304f\u826f\u3044\u611f\u3058\u3067\u3059\u306d\u3002\n\n\n", "tags": ["Ansible", "WindowsServer", "CentOS", "devops", "serverspec"]}