{"context": " More than 1 year has passed since last update.Python\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089Supervisor\u4e0a\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u64cd\u4f5c\u3057\u305f\u304b\u3063\u305f\u306e\u3067XMLRPC\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u8a66\u3057\u3066\u307f\u305f\u3002\n\n\u4e0b\u6e96\u5099\n\nsupervisord.conf\ninet_http_server\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n[inet_http_server]         ; inet (TCP) server disabled by default\nport=127.0.0.1:9001        ; (ip_address:port specifier, *:port for all iface)\n;username=user              ; (default is no username (open server))\n;password=123               ; (default is no password (open server))\n\n[include]\nfiles = conf.d/*.ini\n\n\nconf.d/simplehttp.ini\n\u3053\u308c\u306f\u91cd\u8981\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u5ff5\u306e\u305f\u3081\u3002\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5074\u306e\u8a2d\u5b9a\u3002virtualenv\u3067\u52d5\u304b\u3057\u3066\u308b\u306e\u3067environment\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3002\n\u30d7\u30ed\u30b0\u30e9\u30e0\u81ea\u4f53\u306f\u6a19\u6e96\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30b7\u30f3\u30d7\u30ebHTTP\u30b5\u30fc\u30d0\u30fc\u3092\u547c\u3076\u3060\u3051\u3002\n[program:simplehttp]\ncommand=python -m SimpleHTTPServer ; the program (relative uses PATH, can take args)\nprocess_name=%(program_name)s ; process_name expr (default %(program_name)s)\nnumprocs=1                    ; number of processes copies to start (def 1)\ndirectory=/tmp                ; directory to cwd to before exec (def no cwd)\nautostart=true                ; start at supervisord start (default: true)\nautorestart=unexpected        ; whether/when to restart (default: unexpected)\nstdout_logfile=/tmp/simplehttp.stdout ; stdout log path, NONE for none; default AUTO\nstderr_logfile=/tmp/simplehttp.stderr ; stderr log path, NONE for none; default AUTO\nenvironment=PATH=/Users/shrkw/.virtualenv/cpython-275/bin ; process environment additions (def no adds)\n\n\n\u64cd\u4f5c\u3059\u308b\n\u5c0e\u5165\u306f http://supervisord.org/api.html \u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u305d\u3053\u3092\u898b\u308b\u3068\u3088\u3044\u3067\u3059\u3002\n\u4ee5\u4e0b\u306fIPython\u304b\u3089\u64cd\u4f5c\u3057\u3066\u307e\u3059\u3002\n\nXMLRPC\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306b\u63a5\u7d9a\n\nIn [1]: import xmlrpclib\nIn [2]: server = xmlrpclib.ServerProxy('http://localhost:9001')\n\n\n\u30e1\u30bd\u30c3\u30c9\u3092\u78ba\u8a8d\n\nIn [6]: server.system.listMethods()\nOut[6]:\n['supervisor.addProcessGroup',\n 'supervisor.clearAllProcessLogs',\n 'supervisor.clearLog',\n 'supervisor.clearProcessLog',\n 'supervisor.clearProcessLogs',\n 'supervisor.getAPIVersion',\n 'supervisor.getAllConfigInfo',\n 'supervisor.getAllProcessInfo',\n 'supervisor.getIdentification',\n 'supervisor.getPID',\n 'supervisor.getProcessInfo',\n 'supervisor.getState',\n 'supervisor.getSupervisorVersion',\n 'supervisor.getVersion',\n 'supervisor.readLog',\n 'supervisor.readMainLog',\n 'supervisor.readProcessLog',\n 'supervisor.readProcessStderrLog',\n 'supervisor.readProcessStdoutLog',\n 'supervisor.reloadConfig',\n 'supervisor.removeProcessGroup',\n 'supervisor.restart',\n 'supervisor.sendProcessStdin',\n 'supervisor.sendRemoteCommEvent',\n 'supervisor.shutdown',\n 'supervisor.startAllProcesses',\n 'supervisor.startProcess',\n 'supervisor.startProcessGroup',\n 'supervisor.stopAllProcesses',\n 'supervisor.stopProcess',\n 'supervisor.stopProcessGroup',\n 'supervisor.tailProcessLog',\n 'supervisor.tailProcessStderrLog',\n 'supervisor.tailProcessStdoutLog',\n 'system.listMethods',\n 'system.methodHelp',\n 'system.methodSignature',\n 'system.multicall']\n\n\n\u52d5\u3044\u3066\u308b\u5168\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u6cc1\u3092\u78ba\u8a8d\n\nIn [7]: server.supervisor.getAllProcessInfo()\nOut[7]:\n[{'description': 'pid 6624, uptime 0:09:45',\n  'exitstatus': 0,\n  'group': 'simplehttp',\n  'logfile': '/tmp/simplehttp.stdout',\n  'name': 'simplehttp',\n  'now': 1412565184,\n  'pid': 6624,\n  'spawnerr': '',\n  'start': 1412564599,\n  'state': 20,\n  'statename': 'RUNNING',\n  'stderr_logfile': '/tmp/simplehttp.stderr',\n  'stdout_logfile': '/tmp/simplehttp.stdout',\n  'stop': 0}]\n\n\n\u30d7\u30ed\u30bb\u30b9\u540d\u3092\u7279\u5b9a\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u6cc1\u3092\u78ba\u8a8d\n\nIn [10]: server.supervisor.getProcessInfo('simplehttp')\nOut[10]:\n{'description': 'pid 6624, uptime 0:10:51',\n 'exitstatus': 0,\n 'group': 'simplehttp',\n 'logfile': '/tmp/simplehttp.stdout',\n 'name': 'simplehttp',\n 'now': 1412565250,\n 'pid': 6624,\n 'spawnerr': '',\n 'start': 1412564599,\n 'state': 20,\n 'statename': 'RUNNING',\n 'stderr_logfile': '/tmp/simplehttp.stderr',\n 'stdout_logfile': '/tmp/simplehttp.stdout',\n 'stop': 0}\n\n\n\u30d7\u30ed\u30bb\u30b9\u3092\u6b62\u3081\u308b\n\nIn [11]: server.supervisor.stopProcess('simplehttp')\nOut[11]: True\n\n\u3061\u3083\u3093\u3068\u6b62\u307e\u3063\u3066\u308b\u304b\u3001\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\nIn [12]: server.supervisor.getProcessInfo('simplehttp')\nOut[12]:\n{'description': 'Oct 05 11:15 PM',\n 'exitstatus': -1,\n 'group': 'simplehttp',\n 'logfile': '/tmp/simplehttp.stdout',\n 'name': 'simplehttp',\n 'now': 1412565327,\n 'pid': 0,\n 'spawnerr': '',\n 'start': 1412564599,\n 'state': 0,\n 'statename': 'STOPPED',\n 'stderr_logfile': '/tmp/simplehttp.stderr',\n 'stdout_logfile': '/tmp/simplehttp.stdout',\n 'stop': 1412565323}\n\nSTOPPED\u3068\u3044\u3046\u3053\u3068\u3067\u6b62\u307e\u3063\u3066\u308b\u3002\n\n\u30d7\u30ed\u30bb\u30b9\u3092\u52d5\u304b\u3059\n\nIn [13]: server.supervisor.startProcess('simplehttp')\nOut[13]: True\n\n\u518d\u958b\u3067\u304d\u307e\u3057\u305f\u3002\n\nPython\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089Supervisor\u4e0a\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u64cd\u4f5c\u3057\u305f\u304b\u3063\u305f\u306e\u3067XMLRPC\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u8a66\u3057\u3066\u307f\u305f\u3002\n\n\u4e0b\u6e96\u5099\n=============\n\nsupervisord.conf\n---------------------\n\n`inet_http_server`\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\n```ini\n[inet_http_server]         ; inet (TCP) server disabled by default\nport=127.0.0.1:9001        ; (ip_address:port specifier, *:port for all iface)\n;username=user              ; (default is no username (open server))\n;password=123               ; (default is no password (open server))\n\n[include]\nfiles = conf.d/*.ini\n```\n\n\nconf.d/simplehttp.ini\n---------------------\n\n\u3053\u308c\u306f\u91cd\u8981\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u5ff5\u306e\u305f\u3081\u3002\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5074\u306e\u8a2d\u5b9a\u3002virtualenv\u3067\u52d5\u304b\u3057\u3066\u308b\u306e\u3067`environment`\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3002\n\u30d7\u30ed\u30b0\u30e9\u30e0\u81ea\u4f53\u306f\u6a19\u6e96\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30b7\u30f3\u30d7\u30ebHTTP\u30b5\u30fc\u30d0\u30fc\u3092\u547c\u3076\u3060\u3051\u3002\n\n```ini\n[program:simplehttp]\ncommand=python -m SimpleHTTPServer ; the program (relative uses PATH, can take args)\nprocess_name=%(program_name)s ; process_name expr (default %(program_name)s)\nnumprocs=1                    ; number of processes copies to start (def 1)\ndirectory=/tmp                ; directory to cwd to before exec (def no cwd)\nautostart=true                ; start at supervisord start (default: true)\nautorestart=unexpected        ; whether/when to restart (default: unexpected)\nstdout_logfile=/tmp/simplehttp.stdout ; stdout log path, NONE for none; default AUTO\nstderr_logfile=/tmp/simplehttp.stderr ; stderr log path, NONE for none; default AUTO\nenvironment=PATH=/Users/shrkw/.virtualenv/cpython-275/bin ; process environment additions (def no adds)\n```\n\n\u64cd\u4f5c\u3059\u308b\n=================\n\n\u5c0e\u5165\u306f http://supervisord.org/api.html \u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u3067\u305d\u3053\u3092\u898b\u308b\u3068\u3088\u3044\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306fIPython\u304b\u3089\u64cd\u4f5c\u3057\u3066\u307e\u3059\u3002\n\nXMLRPC\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306b\u63a5\u7d9a\n-------------------------------\n\n>\nIn [1]: import xmlrpclib\nIn [2]: server = xmlrpclib.ServerProxy('http://localhost:9001')\n\n\u30e1\u30bd\u30c3\u30c9\u3092\u78ba\u8a8d\n-----------------\n\n>\nIn [6]: server.system.listMethods()\nOut[6]:\n['supervisor.addProcessGroup',\n 'supervisor.clearAllProcessLogs',\n 'supervisor.clearLog',\n 'supervisor.clearProcessLog',\n 'supervisor.clearProcessLogs',\n 'supervisor.getAPIVersion',\n 'supervisor.getAllConfigInfo',\n 'supervisor.getAllProcessInfo',\n 'supervisor.getIdentification',\n 'supervisor.getPID',\n 'supervisor.getProcessInfo',\n 'supervisor.getState',\n 'supervisor.getSupervisorVersion',\n 'supervisor.getVersion',\n 'supervisor.readLog',\n 'supervisor.readMainLog',\n 'supervisor.readProcessLog',\n 'supervisor.readProcessStderrLog',\n 'supervisor.readProcessStdoutLog',\n 'supervisor.reloadConfig',\n 'supervisor.removeProcessGroup',\n 'supervisor.restart',\n 'supervisor.sendProcessStdin',\n 'supervisor.sendRemoteCommEvent',\n 'supervisor.shutdown',\n 'supervisor.startAllProcesses',\n 'supervisor.startProcess',\n 'supervisor.startProcessGroup',\n 'supervisor.stopAllProcesses',\n 'supervisor.stopProcess',\n 'supervisor.stopProcessGroup',\n 'supervisor.tailProcessLog',\n 'supervisor.tailProcessStderrLog',\n 'supervisor.tailProcessStdoutLog',\n 'system.listMethods',\n 'system.methodHelp',\n 'system.methodSignature',\n 'system.multicall']\n\n\n\u52d5\u3044\u3066\u308b\u5168\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u6cc1\u3092\u78ba\u8a8d\n-----------------------\n\n>\nIn [7]: server.supervisor.getAllProcessInfo()\nOut[7]:\n[{'description': 'pid 6624, uptime 0:09:45',\n  'exitstatus': 0,\n  'group': 'simplehttp',\n  'logfile': '/tmp/simplehttp.stdout',\n  'name': 'simplehttp',\n  'now': 1412565184,\n  'pid': 6624,\n  'spawnerr': '',\n  'start': 1412564599,\n  'state': 20,\n  'statename': 'RUNNING',\n  'stderr_logfile': '/tmp/simplehttp.stderr',\n  'stdout_logfile': '/tmp/simplehttp.stdout',\n  'stop': 0}]\n\n\u30d7\u30ed\u30bb\u30b9\u540d\u3092\u7279\u5b9a\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u6cc1\u3092\u78ba\u8a8d\n-----------------------------------\n\n>\nIn [10]: server.supervisor.getProcessInfo('simplehttp')\nOut[10]:\n{'description': 'pid 6624, uptime 0:10:51',\n 'exitstatus': 0,\n 'group': 'simplehttp',\n 'logfile': '/tmp/simplehttp.stdout',\n 'name': 'simplehttp',\n 'now': 1412565250,\n 'pid': 6624,\n 'spawnerr': '',\n 'start': 1412564599,\n 'state': 20,\n 'statename': 'RUNNING',\n 'stderr_logfile': '/tmp/simplehttp.stderr',\n 'stdout_logfile': '/tmp/simplehttp.stdout',\n 'stop': 0}\n\n\u30d7\u30ed\u30bb\u30b9\u3092\u6b62\u3081\u308b\n----------------------------------\n\n>\nIn [11]: server.supervisor.stopProcess('simplehttp')\nOut[11]: True\n\n\u3061\u3083\u3093\u3068\u6b62\u307e\u3063\u3066\u308b\u304b\u3001\u30d7\u30ed\u30bb\u30b9\u306e\u72b6\u6cc1\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3002\n\n>\nIn [12]: server.supervisor.getProcessInfo('simplehttp')\nOut[12]:\n{'description': 'Oct 05 11:15 PM',\n 'exitstatus': -1,\n 'group': 'simplehttp',\n 'logfile': '/tmp/simplehttp.stdout',\n 'name': 'simplehttp',\n 'now': 1412565327,\n 'pid': 0,\n 'spawnerr': '',\n 'start': 1412564599,\n 'state': 0,\n 'statename': 'STOPPED',\n 'stderr_logfile': '/tmp/simplehttp.stderr',\n 'stdout_logfile': '/tmp/simplehttp.stdout',\n 'stop': 1412565323}\n\n`STOPPED`\u3068\u3044\u3046\u3053\u3068\u3067\u6b62\u307e\u3063\u3066\u308b\u3002\n\n\u30d7\u30ed\u30bb\u30b9\u3092\u52d5\u304b\u3059\n----------------------------------\n\n>\nIn [13]: server.supervisor.startProcess('simplehttp')\nOut[13]: True\n\n\u518d\u958b\u3067\u304d\u307e\u3057\u305f\u3002\n", "tags": ["supervisor", "xmlrpc", "Python"]}