{"context": "\u8a00\u8a9e\u51e6\u7406100\u672c\u30ce\u30c3\u30af 2015\u306e\u6311\u6226\u8a18\u9332\u3067\u3059\u3002\u74b0\u5883\u306fUbuntu 16.04 LTS \uff0b Python 3.5.2 :: Anaconda 4.1.1 (64-bit)\u3067\u3059\u3002\u904e\u53bb\u306e\u30ce\u30c3\u30af\u306e\u4e00\u89a7\u306f\u3053\u3061\u3089\u304b\u3089\u3069\u3046\u305e\u3002\n\n\u7b2c3\u7ae0: \u6b63\u898f\u8868\u73fe\n\nWikipedia\u306e\u8a18\u4e8b\u3092\u4ee5\u4e0b\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u66f8\u304d\u51fa\u3057\u305f\u30d5\u30a1\u30a4\u30ebjawiki-country.json.gz\u304c\u3042\u308b\uff0e\n\u30fb1\u884c\u306b1\u8a18\u4e8b\u306e\u60c5\u5831\u304cJSON\u5f62\u5f0f\u3067\u683c\u7d0d\u3055\u308c\u308b\n\u30fb\u5404\u884c\u306b\u306f\u8a18\u4e8b\u540d\u304c\"title\"\u30ad\u30fc\u306b\uff0c\u8a18\u4e8b\u672c\u6587\u304c\"text\"\u30ad\u30fc\u306e\u8f9e\u66f8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u683c\u7d0d\u3055\u308c\uff0c\u305d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304cJSON\u5f62\u5f0f\u3067\u66f8\u304d\u51fa\u3055\u308c\u308b\n\u30fb\u30d5\u30a1\u30a4\u30eb\u5168\u4f53\u306fgzip\u3067\u5727\u7e2e\u3055\u308c\u308b\n\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3046\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u305b\u3088\uff0e\n\n\n29. \u56fd\u65d7\u753b\u50cf\u306eURL\u3092\u53d6\u5f97\u3059\u308b\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u5185\u5bb9\u3092\u5229\u7528\u3057\uff0c\u56fd\u65d7\u753b\u50cf\u306eURL\u3092\u53d6\u5f97\u305b\u3088\uff0e\uff08\u30d2\u30f3\u30c8: MediaWiki API\u306eimageinfo\u3092\u547c\u3073\u51fa\u3057\u3066\uff0c\u30d5\u30a1\u30a4\u30eb\u53c2\u7167\u3092URL\u306b\u5909\u63db\u3059\u308c\u3070\u3088\u3044\uff09\n\n\n\u51fa\u6765\u4e0a\u304c\u3063\u305f\u30b3\u30fc\u30c9\uff1a\n\nmain.py\n# coding: utf-8\nimport gzip\nimport json\nimport re\nimport urllib.parse, urllib.request\nfname = 'jawiki-country.json.gz'\n\n\ndef extract_UK():\n    '''\u30a4\u30ae\u30ea\u30b9\u306b\u95a2\u3059\u308b\u8a18\u4e8b\u672c\u6587\u3092\u53d6\u5f97\n\n    \u623b\u308a\u5024\uff1a\n    \u30a4\u30ae\u30ea\u30b9\u306e\u8a18\u4e8b\u672c\u6587\n    '''\n\n    with gzip.open(fname, 'rt') as data_file:\n        for line in data_file:\n            data_json = json.loads(line)\n            if data_json['title'] == '\u30a4\u30ae\u30ea\u30b9':\n                return data_json['text']\n\n    raise ValueError('\u30a4\u30ae\u30ea\u30b9\u306e\u8a18\u4e8b\u304c\u898b\u3064\u304b\u3089\u306a\u3044')\n\n\ndef remove_markup(target):\n    '''\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u9664\u53bb\n    MediaWiki\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u53ef\u80fd\u306a\u9650\u308a\u9664\u53bb\u3059\u308b\n\n    \u5f15\u6570\uff1a\n    target -- \u5bfe\u8c61\u306e\u6587\u5b57\u5217\n    \u623b\u308a\u5024\uff1a\n    \u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u9664\u53bb\u3057\u305f\u6587\u5b57\u5217\n    '''\n\n    # \u5f37\u8abf\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u9664\u53bb\n    pattern = re.compile(r'''\n        (\\'{2,5})   # 2\u301c5\u500b\u306e'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n        (.*?)       # \u4efb\u610f\u306e1\u6587\u5b57\u4ee5\u4e0a\uff08\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n        (\\1)        # 1\u756a\u76ee\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u3068\u540c\u3058\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n        ''', re.MULTILINE + re.VERBOSE)\n    target = pattern.sub(r'\\2', target)\n\n    # \u5185\u90e8\u30ea\u30f3\u30af\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u9664\u53bb\n    pattern = re.compile(r'''\n        \\[\\[        # '[['\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n        (?:         # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n            [^|]*?  # '|'\u4ee5\u5916\u306e\u6587\u5b57\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n            \\|      # '|'\n        )*?         # \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u304c0\u4ee5\u4e0a\u51fa\u73fe\u3001\u975e\u8caa\u6b32\n        ([^|]*?)    # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001'|'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\uff08\u8868\u793a\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n        \\]\\]        # ']]'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n        ''', re.MULTILINE + re.VERBOSE)\n    target = pattern.sub(r'\\1', target)\n\n    # Template:Lang\u306e\u9664\u53bb        {{lang|\u8a00\u8a9e\u30bf\u30b0|\u6587\u5b57\u5217}}\n    pattern = re.compile(r'''\n        \\{\\{lang    # '{{lang'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n        (?:         # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n            [^|]*?  # '|'\u4ee5\u5916\u306e\u6587\u5b57\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n            \\|      # '|'\n        )*?         # \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u304c0\u4ee5\u4e0a\u51fa\u73fe\u3001\u975e\u8caa\u6b32\n        ([^|]*?)    # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001'|'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\uff08\u8868\u793a\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n        \\}\\}        # '}}'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n        ''', re.MULTILINE + re.VERBOSE)\n    target = pattern.sub(r'\\1', target)\n\n    # \u5916\u90e8\u30ea\u30f3\u30af\u306e\u9664\u53bb  [http://xxxx] \u3001[http://xxx xxx]\n    pattern = re.compile(r'''\n        \\[http:\\/\\/ # '[http://'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n        (?:         # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n            [^\\s]*? # \u7a7a\u767d\u4ee5\u5916\u306e\u6587\u5b57\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n            \\s      # \u7a7a\u767d\n        )?          # \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u304c0\u304b1\u51fa\u73fe\n        ([^]]*?)    # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001']'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\uff08\u8868\u793a\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n        \\]          # ']'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n        ''', re.MULTILINE + re.VERBOSE)\n    target = pattern.sub(r'\\1', target)\n\n    # <br>\u3001<ref>\u306e\u9664\u53bb\n    pattern = re.compile(r'''\n        <           # '<'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n        \\/?         # '/'\u304c0\u304b1\u51fa\u73fe\uff08\u7d42\u4e86\u30bf\u30b0\u306e\u5834\u5408\u306f/\u304c\u3042\u308b\uff09\n        [br|ref]    # 'br'\u304b'ref'\n        [^>]*?      # '>'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n        >           # '>'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n        ''', re.MULTILINE + re.VERBOSE)\n    target = pattern.sub('', target)\n\n    return target\n\n\n# \u57fa\u790e\u60c5\u5831\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u62bd\u51fa\u6761\u4ef6\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\npattern = re.compile(r'''\n    ^\\{\\{\u57fa\u790e\u60c5\u5831.*?$   # '{{\u57fa\u790e\u60c5\u5831'\u3067\u59cb\u307e\u308b\u884c\n    (.*?)       # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001\u4efb\u610f\u306e0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n    ^\\}\\}$      # '}}'\u306e\u884c\n    ''', re.MULTILINE + re.VERBOSE + re.DOTALL)\n\n# \u57fa\u790e\u60c5\u5831\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u62bd\u51fa\ncontents = pattern.findall(extract_UK())\n\n# \u62bd\u51fa\u7d50\u679c\u304b\u3089\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3068\u5024\u306e\u62bd\u51fa\u6761\u4ef6\u30b3\u30f3\u30d1\u30a4\u30eb\npattern = re.compile(r'''\n    ^\\|         # '|'\u3067\u59cb\u307e\u308b\u884c\n    (.+?)       # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\uff09\u3001\u4efb\u610f\u306e1\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n    \\s*         # \u7a7a\u767d\u6587\u5b570\u6587\u5b57\u4ee5\u4e0a\n    =\n    \\s*         # \u7a7a\u767d\u6587\u5b570\u6587\u5b57\u4ee5\u4e0a\n    (.+?)       # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\uff08\u5024\uff09\u3001\u4efb\u610f\u306e1\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n    (?:         # \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n        (?=\\n\\|)    # \u6539\u884c+'|'\u306e\u624b\u524d\uff08\u80af\u5b9a\u306e\u5148\u8aad\u307f\uff09\n        | (?=\\n$)   # \u307e\u305f\u306f\u3001\u6539\u884c+\u7d42\u7aef\u306e\u624b\u524d\uff08\u80af\u5b9a\u306e\u5148\u8aad\u307f\uff09\n    )           # \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\n    ''', re.MULTILINE + re.VERBOSE + re.DOTALL)\n\n# \u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3068\u5024\u306e\u62bd\u51fa\nfields = pattern.findall(contents[0])\n\n# \u8f9e\u66f8\u306b\u30bb\u30c3\u30c8\nresult = {}\nfor field in fields:\n    result[field[0]] = remove_markup(field[1])\n\n# \u56fd\u65d7\u753b\u50cf\u306e\u5024\u3092\u53d6\u5f97\nfname_flag = result['\u56fd\u65d7\u753b\u50cf']\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u751f\u6210\nurl = 'https://www.mediawiki.org/w/api.php?' \\\n    + 'action=query' \\\n    + '&titles=File:' + urllib.parse.quote(fname_flag) \\\n    + '&format=json' \\\n    + '&prop=imageinfo' \\\n    + '&iiprop=url'\n\n# MediaWiki\u306e\u30b5\u30fc\u30d3\u30b9\u3078\u30ea\u30af\u30a8\u30b9\u30c8\u9001\u4fe1\nrequest = urllib.request.Request(url,\n    headers={'User-Agent': 'NLP100_Python(@segavvy)'})\nconnection = urllib.request.urlopen(request)\n\n# json\u3068\u3057\u3066\u53d7\u4fe1\ndata = json.loads(connection.read().decode())\n\n# URL\u53d6\u308a\u51fa\u3057\nurl = data['query']['pages'].popitem()[1]['imageinfo'][0]['url']\nprint(url)\n\n\n\n\u5b9f\u884c\u7d50\u679c\uff1a\n\n\u7aef\u672b\nhttps://upload.wikimedia.org/wikipedia/commons/a/ae/Flag_of_the_United_Kingdom.svg\n\n\nWeb\u30d6\u30e9\u30a6\u30b6\u3067\u5f97\u3089\u308c\u305fURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6b63\u3057\u3044URL\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\nWeb\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\nWeb\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3046\u306b\u306fHTTP\u3092\u3057\u3083\u3079\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u304a\u624b\u8efd\u305d\u3046\u306aurllib.request\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\u305f\u3060\u3001\u3053\u306e\u89e3\u8aac\u306b\u3001\n\n\u53c2\u8003:\u3088\u308a\u9ad8\u6c34\u6e96\u306e HTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3068\u3057\u3066\u306fRequests package \u304c\u304a\u5968\u3081\u3067\u3059\u3002\n\n\u3068\u3042\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u3063\u305f\u65b9\u304c\u826f\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\nMediaWiki API\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u524d\u534a\u306f\u524d\u554f\u306e\u307e\u307e\u3067\u3059\u3002\u524d\u554f\u3067\u4f5c\u3063\u305f\u8f9e\u66f8\u304b\u3089\u56fd\u65d7\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001MediaWiki API\u3092\u4f7f\u3063\u3066URL\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002MediaWiki API\u306e\u4f7f\u3044\u65b9\u306fAPI:\u30e1\u30a4\u30f3 \u30da\u30fc\u30b8\u3067\u8abf\u3079\u3089\u308c\u307e\u3059\u3002\u5358\u7d14\u306a\u4f8b\u3092\u53c2\u8003\u306b\u3001HTTP GET\u3067\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308bURL\uff08\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\u3068\u308a\u3042\u3048\u305aMediaWiki API\u306eURLhttps://www.mediawiki.org/w/api.php\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\nUser-Agent\u306e\u6307\u5b9a\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8b58\u5225\u3059\u308b\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001User-Agent\u3092\u7701\u7565\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u6b63\u78ba\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308c\u3070\u826f\u3044\u3088\u3046\u306a\u306e\u3067\u3001NLP100_Python(@segavvy)\u3068\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\n\u4eca\u56de\u306f\u6b21\u306e\u3082\u306e\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\n\u6307\u5b9a\u5024\n\u8a73\u7d30\n\n\n\n\naction\nquery\n\n\u5358\u7d14\u306a\u4f8b\u3092\u305d\u306e\u307e\u307e\u771f\u4f3c\u3057\u307e\u3057\u305f\u3002\n\n\ntitles\nFile:(\u56fd\u65d7\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d)\n\nAPI:Imageinfo\u3067\u53d6\u5f97\u3057\u305f\u3044\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u7279\u6b8a\u6587\u5b57\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001urllib.parse.quote()\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n\nformat\njson\n\n\u5358\u7d14\u306a\u4f8b\u3092\u305d\u306e\u307e\u307e\u771f\u4f3c\u3057\u3066\u3001json\u5f62\u5f0f\u306b\u3057\u307e\u3057\u305f\u3002\n\n\nprop\nimageinfo\n\nAPI:Imageinfo\u3092\u4f7f\u3046\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\niiprop\nurl\n\nAPI:Imageinfo\u3067\u53d6\u5f97\u3057\u305f\u3044\u9805\u76ee\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306fURL\u304c\u6b32\u3057\u3044\u306e\u3067url\u3092\u6307\u5b9a\u3057\u307e\u3057\u305f\u3002\n\n\n\n\nAPI\u306e\u623b\u308a\u5024\njson\u5f62\u5f0f\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4ee5\u524d\u306e\u554f\u984c\u3067\u4f7f\u7528\u3057\u305fjson.loads()\u3067\u5909\u63db\u3055\u305b\u308c\u3070\u3001\u7c21\u5358\u306b\u6271\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u304a\u3001\u53d7\u4fe1\u7d50\u679c\u306f\u30d0\u30a4\u30c8\u5217\u306e\u305f\u3081\u3001json.loads()\u3059\u308b\u524d\u306bbytes.decode()\u3067\u6587\u5b57\u5217\u3078\u306e\u5909\u63db\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u4ee5\u4e0b\u3001json.loads()\u3057\u305fdata\u3092\u3001print(json.dumps(data, indent=4))\u3057\u305f\u7d50\u679c\u3067\u3059\u3002\n\n\u7aef\u672b\n{\n    \"continue\": {\n        \"continue\": \"||\",\n        \"iistart\": \"2007-09-03T09:51:34Z\"\n    },\n    \"query\": {\n        \"pages\": {\n            \"-1\": {\n                \"imagerepository\": \"shared\",\n                \"imageinfo\": [\n                    {\n                        \"url\": \"https://upload.wikimedia.org/wikipedia/commons/a/ae/Flag_of_the_United_Kingdom.svg\",\n                        \"descriptionshorturl\": \"https://commons.wikimedia.org/w/index.php?curid=347935\",\n                        \"descriptionurl\": \"https://commons.wikimedia.org/wiki/File:Flag_of_the_United_Kingdom.svg\"\n                    }\n                ],\n                \"missing\": \"\",\n                \"title\": \"File:Flag of the United Kingdom.svg\",\n                \"ns\": 6\n            }\n        }\n    }\n}\n\n\n\u76ee\u7684\u306eurl\u304c\u7d50\u69cb\u6df1\u3044\u3068\u3053\u308d\u306b\u3042\u308b\u306e\u3067\u3001\u53d6\u308a\u51fa\u3057\u306f\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u3057\u305f\u3002\n\u3000\n30\u672c\u76ee\u306e\u30ce\u30c3\u30af\u306f\u4ee5\u4e0a\u3067\u3059\u3002\u8aa4\u308a\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3001\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u307e\u3059\u3068\u5e78\u3044\u3067\u3059\u3002\n\n\u5b9f\u884c\u7d50\u679c\u306b\u306f\u3001100\u672c\u30ce\u30c3\u30af\u3067\u7528\u3044\u308b\u30b3\u30fc\u30d1\u30b9\u30fb\u30c7\u30fc\u30bf\u3067\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306e\u4e00\u90e8\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u3053\u306e\u7b2c3\u7ae0\u3067\u7528\u3044\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306e\u30e9\u30a4\u30bb\u30f3\u30b9\u306f\u30af\u30ea\u30a8\u30a4\u30c6\u30a3\u30d6\u30fb\u30b3\u30e2\u30f3\u30ba \u8868\u793a-\u7d99\u627f 3.0 \u975e\u79fb\u690d\uff08\u65e5\u672c\u8a9e\u8a33\uff09\u3067\u3059\u3002\n\n[\u8a00\u8a9e\u51e6\u7406100\u672c\u30ce\u30c3\u30af 2015](http://www.cl.ecei.tohoku.ac.jp/nlp100/)\u306e\u6311\u6226\u8a18\u9332\u3067\u3059\u3002\u74b0\u5883\u306fUbuntu 16.04 LTS \uff0b Python 3.5.2 \\:\\: Anaconda 4.1.1 (64-bit)\u3067\u3059\u3002\u904e\u53bb\u306e\u30ce\u30c3\u30af\u306e\u4e00\u89a7\u306f[\u3053\u3061\u3089](http://qiita.com/segavvy/items)\u304b\u3089\u3069\u3046\u305e\u3002\n\n## \u7b2c3\u7ae0: \u6b63\u898f\u8868\u73fe\n>Wikipedia\u306e\u8a18\u4e8b\u3092\u4ee5\u4e0b\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u66f8\u304d\u51fa\u3057\u305f\u30d5\u30a1\u30a4\u30ebjawiki-country.json.gz\u304c\u3042\u308b\uff0e\n>\u30fb1\u884c\u306b1\u8a18\u4e8b\u306e\u60c5\u5831\u304cJSON\u5f62\u5f0f\u3067\u683c\u7d0d\u3055\u308c\u308b\n>\u30fb\u5404\u884c\u306b\u306f\u8a18\u4e8b\u540d\u304c\"title\"\u30ad\u30fc\u306b\uff0c\u8a18\u4e8b\u672c\u6587\u304c\"text\"\u30ad\u30fc\u306e\u8f9e\u66f8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u683c\u7d0d\u3055\u308c\uff0c\u305d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304cJSON\u5f62\u5f0f\u3067\u66f8\u304d\u51fa\u3055\u308c\u308b\n>\u30fb\u30d5\u30a1\u30a4\u30eb\u5168\u4f53\u306fgzip\u3067\u5727\u7e2e\u3055\u308c\u308b\n>\u4ee5\u4e0b\u306e\u51e6\u7406\u3092\u884c\u3046\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u6210\u305b\u3088\uff0e\n\n###29. \u56fd\u65d7\u753b\u50cf\u306eURL\u3092\u53d6\u5f97\u3059\u308b\n>\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u5185\u5bb9\u3092\u5229\u7528\u3057\uff0c\u56fd\u65d7\u753b\u50cf\u306eURL\u3092\u53d6\u5f97\u305b\u3088\uff0e\uff08\u30d2\u30f3\u30c8: [MediaWiki API](https://www.mediawiki.org/wiki/API:Main_page/ja)\u306e[imageinfo](https://www.mediawiki.org/wiki/API:Properties/ja#imageinfo_.2F_ii)\u3092\u547c\u3073\u51fa\u3057\u3066\uff0c\u30d5\u30a1\u30a4\u30eb\u53c2\u7167\u3092URL\u306b\u5909\u63db\u3059\u308c\u3070\u3088\u3044\uff09\n\n####\u51fa\u6765\u4e0a\u304c\u3063\u305f\u30b3\u30fc\u30c9\uff1a\n\n```python:main.py\n# coding: utf-8\nimport gzip\nimport json\nimport re\nimport urllib.parse, urllib.request\nfname = 'jawiki-country.json.gz'\n\n\ndef extract_UK():\n\t'''\u30a4\u30ae\u30ea\u30b9\u306b\u95a2\u3059\u308b\u8a18\u4e8b\u672c\u6587\u3092\u53d6\u5f97\n\n\t\u623b\u308a\u5024\uff1a\n\t\u30a4\u30ae\u30ea\u30b9\u306e\u8a18\u4e8b\u672c\u6587\n\t'''\n\n\twith gzip.open(fname, 'rt') as data_file:\n\t\tfor line in data_file:\n\t\t\tdata_json = json.loads(line)\n\t\t\tif data_json['title'] == '\u30a4\u30ae\u30ea\u30b9':\n\t\t\t\treturn data_json['text']\n\n\traise ValueError('\u30a4\u30ae\u30ea\u30b9\u306e\u8a18\u4e8b\u304c\u898b\u3064\u304b\u3089\u306a\u3044')\n\n\ndef remove_markup(target):\n\t'''\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u9664\u53bb\n\tMediaWiki\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u53ef\u80fd\u306a\u9650\u308a\u9664\u53bb\u3059\u308b\n\n\t\u5f15\u6570\uff1a\n\ttarget -- \u5bfe\u8c61\u306e\u6587\u5b57\u5217\n\t\u623b\u308a\u5024\uff1a\n\t\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u3092\u9664\u53bb\u3057\u305f\u6587\u5b57\u5217\n\t'''\n\n\t# \u5f37\u8abf\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u9664\u53bb\n\tpattern = re.compile(r'''\n\t\t(\\'{2,5})\t# 2\u301c5\u500b\u306e'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n\t\t(.*?)\t\t# \u4efb\u610f\u306e1\u6587\u5b57\u4ee5\u4e0a\uff08\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n\t\t(\\1)\t\t# 1\u756a\u76ee\u306e\u30ad\u30e3\u30d7\u30c1\u30e3\u3068\u540c\u3058\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n\t\t''', re.MULTILINE + re.VERBOSE)\n\ttarget = pattern.sub(r'\\2', target)\n\n\t# \u5185\u90e8\u30ea\u30f3\u30af\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u9664\u53bb\n\tpattern = re.compile(r'''\n\t\t\\[\\[\t\t# '[['\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n\t\t(?:\t\t\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n\t\t\t[^|]*?\t# '|'\u4ee5\u5916\u306e\u6587\u5b57\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n\t\t\t\\|\t\t# '|'\n\t\t)*?\t\t\t# \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u304c0\u4ee5\u4e0a\u51fa\u73fe\u3001\u975e\u8caa\u6b32\n\t\t([^|]*?)\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001'|'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\uff08\u8868\u793a\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n\t\t\\]\\]\t\t# ']]'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n\t\t''', re.MULTILINE + re.VERBOSE)\n\ttarget = pattern.sub(r'\\1', target)\n\n\t# Template:Lang\u306e\u9664\u53bb\t\t{{lang|\u8a00\u8a9e\u30bf\u30b0|\u6587\u5b57\u5217}}\n\tpattern = re.compile(r'''\n\t\t\\{\\{lang\t# '{{lang'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n\t\t(?:\t\t\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n\t\t\t[^|]*?\t# '|'\u4ee5\u5916\u306e\u6587\u5b57\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n\t\t\t\\|\t\t# '|'\n\t\t)*?\t\t\t# \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u304c0\u4ee5\u4e0a\u51fa\u73fe\u3001\u975e\u8caa\u6b32\n\t\t([^|]*?)\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001'|'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\uff08\u8868\u793a\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n\t\t\\}\\}\t\t# '}}'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n\t\t''', re.MULTILINE + re.VERBOSE)\n\ttarget = pattern.sub(r'\\1', target)\n\n\t# \u5916\u90e8\u30ea\u30f3\u30af\u306e\u9664\u53bb\t[http://xxxx] \u3001[http://xxx xxx]\n\tpattern = re.compile(r'''\n\t\t\\[http:\\/\\/\t# '[http://'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n\t\t(?:\t\t\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n\t\t\t[^\\s]*?\t# \u7a7a\u767d\u4ee5\u5916\u306e\u6587\u5b57\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n\t\t\t\\s\t\t# \u7a7a\u767d\n\t\t)?\t\t\t# \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\u3001\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u304c0\u304b1\u51fa\u73fe\n\t\t([^]]*?)\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001']'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\uff08\u8868\u793a\u5bfe\u8c61\u306e\u6587\u5b57\u5217\uff09\n\t\t\\]\t\t\t# ']'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n\t\t''', re.MULTILINE + re.VERBOSE)\n\ttarget = pattern.sub(r'\\1', target)\n\n\t# <br>\u3001<ref>\u306e\u9664\u53bb\n\tpattern = re.compile(r'''\n\t\t<\t\t\t# '<'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u958b\u59cb\uff09\n\t\t\\/?\t\t\t# '/'\u304c0\u304b1\u51fa\u73fe\uff08\u7d42\u4e86\u30bf\u30b0\u306e\u5834\u5408\u306f/\u304c\u3042\u308b\uff09\n\t\t[br|ref]\t# 'br'\u304b'ref'\n\t\t[^>]*?\t\t# '>'\u4ee5\u5916\u304c0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n\t\t>\t\t\t# '>'\uff08\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306e\u7d42\u4e86\uff09\n\t\t''', re.MULTILINE + re.VERBOSE)\n\ttarget = pattern.sub('', target)\n\n\treturn target\n\n\n# \u57fa\u790e\u60c5\u5831\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u62bd\u51fa\u6761\u4ef6\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\npattern = re.compile(r'''\n\t^\\{\\{\u57fa\u790e\u60c5\u5831.*?$\t# '{{\u57fa\u790e\u60c5\u5831'\u3067\u59cb\u307e\u308b\u884c\n\t(.*?)\t\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u3001\u4efb\u610f\u306e0\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n\t^\\}\\}$\t\t# '}}'\u306e\u884c\n\t''', re.MULTILINE + re.VERBOSE + re.DOTALL)\n\n# \u57fa\u790e\u60c5\u5831\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u62bd\u51fa\ncontents = pattern.findall(extract_UK())\n\n# \u62bd\u51fa\u7d50\u679c\u304b\u3089\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3068\u5024\u306e\u62bd\u51fa\u6761\u4ef6\u30b3\u30f3\u30d1\u30a4\u30eb\npattern = re.compile(r'''\n\t^\\|\t\t\t# '|'\u3067\u59cb\u307e\u308b\u884c\n\t(.+?)\t\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\uff09\u3001\u4efb\u610f\u306e1\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n\t\\s*\t\t\t# \u7a7a\u767d\u6587\u5b570\u6587\u5b57\u4ee5\u4e0a\n\t=\n\t\\s*\t\t\t# \u7a7a\u767d\u6587\u5b570\u6587\u5b57\u4ee5\u4e0a\n\t(.+?)\t\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\uff08\u5024\uff09\u3001\u4efb\u610f\u306e1\u6587\u5b57\u4ee5\u4e0a\u3001\u975e\u8caa\u6b32\n\t(?:\t\t\t# \u30ad\u30e3\u30d7\u30c1\u30e3\u5bfe\u8c61\u5916\u306e\u30b0\u30eb\u30fc\u30d7\u958b\u59cb\n\t\t(?=\\n\\|) \t# \u6539\u884c+'|'\u306e\u624b\u524d\uff08\u80af\u5b9a\u306e\u5148\u8aad\u307f\uff09\n\t\t| (?=\\n$)\t# \u307e\u305f\u306f\u3001\u6539\u884c+\u7d42\u7aef\u306e\u624b\u524d\uff08\u80af\u5b9a\u306e\u5148\u8aad\u307f\uff09\n\t)\t\t\t# \u30b0\u30eb\u30fc\u30d7\u7d42\u4e86\n\t''', re.MULTILINE + re.VERBOSE + re.DOTALL)\n\n# \u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u3068\u5024\u306e\u62bd\u51fa\nfields = pattern.findall(contents[0])\n\n# \u8f9e\u66f8\u306b\u30bb\u30c3\u30c8\nresult = {}\nfor field in fields:\n\tresult[field[0]] = remove_markup(field[1])\n\n# \u56fd\u65d7\u753b\u50cf\u306e\u5024\u3092\u53d6\u5f97\nfname_flag = result['\u56fd\u65d7\u753b\u50cf']\n\n# \u30ea\u30af\u30a8\u30b9\u30c8\u751f\u6210\nurl = 'https://www.mediawiki.org/w/api.php?' \\\n\t+ 'action=query' \\\n\t+ '&titles=File:' + urllib.parse.quote(fname_flag) \\\n\t+ '&format=json' \\\n\t+ '&prop=imageinfo' \\\n\t+ '&iiprop=url'\n\n# MediaWiki\u306e\u30b5\u30fc\u30d3\u30b9\u3078\u30ea\u30af\u30a8\u30b9\u30c8\u9001\u4fe1\nrequest = urllib.request.Request(url,\n\theaders={'User-Agent': 'NLP100_Python(@segavvy)'})\nconnection = urllib.request.urlopen(request)\n\n# json\u3068\u3057\u3066\u53d7\u4fe1\ndata = json.loads(connection.read().decode())\n\n# URL\u53d6\u308a\u51fa\u3057\nurl = data['query']['pages'].popitem()[1]['imageinfo'][0]['url']\nprint(url)\n```\n\n####\u5b9f\u884c\u7d50\u679c\uff1a\n\n```console:\u7aef\u672b\nhttps://upload.wikimedia.org/wikipedia/commons/a/ae/Flag_of_the_United_Kingdom.svg\n```\n\nWeb\u30d6\u30e9\u30a6\u30b6\u3067\u5f97\u3089\u308c\u305fURL\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n![Kobito.pRxKkJ.png](https://qiita-image-store.s3.amazonaws.com/0/139624/cfd5fedf-49e2-49f0-adaf-282183a02e29.png \"Kobito.pRxKkJ.png\")\n\n\u6b63\u3057\u3044URL\u304c\u53d6\u5f97\u3067\u304d\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n###Web\u30b5\u30fc\u30d3\u30b9\u306e\u5229\u7528\nWeb\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3046\u306b\u306fHTTP\u3092\u3057\u3083\u3079\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u304a\u624b\u8efd\u305d\u3046\u306a[`urllib.request`](http://docs.python.jp/3/library/urllib.request.html#module-urllib.request)\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\u305f\u3060\u3001\u3053\u306e\u89e3\u8aac\u306b\u3001\n\n>\u53c2\u8003:\u3088\u308a\u9ad8\u6c34\u6e96\u306e HTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3068\u3057\u3066\u306f[Requests package](https://requests.readthedocs.io/en/master/) \u304c\u304a\u5968\u3081\u3067\u3059\u3002\n\n\u3068\u3042\u308b\u306e\u3067\u3001\u305d\u3061\u3089\u3092\u4f7f\u3063\u305f\u65b9\u304c\u826f\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n###MediaWiki API\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u524d\u534a\u306f[\u524d\u554f](http://qiita.com/segavvy/items/8c4567ec1124320d3354)\u306e\u307e\u307e\u3067\u3059\u3002\u524d\u554f\u3067\u4f5c\u3063\u305f\u8f9e\u66f8\u304b\u3089\u56fd\u65d7\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u308a\u51fa\u3057\u3066\u3001MediaWiki API\u3092\u4f7f\u3063\u3066URL\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002MediaWiki API\u306e\u4f7f\u3044\u65b9\u306f[API:\u30e1\u30a4\u30f3 \u30da\u30fc\u30b8](https://www.mediawiki.org/wiki/API:Main_page/ja)\u3067\u8abf\u3079\u3089\u308c\u307e\u3059\u3002[\u5358\u7d14\u306a\u4f8b](https://www.mediawiki.org/wiki/API:Main_page/ja#.E5.8D.98.E7.B4.94.E3.81.AA.E4.BE.8B)\u3092\u53c2\u8003\u306b\u3001HTTP GET\u3067\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n####\u30a2\u30af\u30bb\u30b9\u3059\u308bURL\uff08\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\uff09\n[\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8](https://www.mediawiki.org/wiki/API:Main_page/ja#.E3.82.A8.E3.83.B3.E3.83.89.E3.83.9D.E3.82.A4.E3.83.B3.E3.83.88)\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\u3068\u308a\u3042\u3048\u305aMediaWiki API\u306eURL`https://www.mediawiki.org/w/api.php `\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n####`User-Agent`\u306e\u6307\u5b9a\n[\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8b58\u5225\u3059\u308b](https://www.mediawiki.org/wiki/API:Main_page/ja#.E3.82.AF.E3.83.A9.E3.82.A4.E3.82.A2.E3.83.B3.E3.83.88.E3.82.92.E8.AD.98.E5.88.A5.E3.81.99.E3.82.8B)\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001`User-Agent`\u3092\u7701\u7565\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\u6b63\u78ba\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308c\u3070\u826f\u3044\u3088\u3046\u306a\u306e\u3067\u3001`NLP100_Python(@segavvy)`\u3068\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n####\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\n\u4eca\u56de\u306f\u6b21\u306e\u3082\u306e\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n| \u30d1\u30e9\u30e1\u30fc\u30bf\u30fc | \u6307\u5b9a\u5024 | \u8a73\u7d30 |\n|--------|--------|---|\n|action |query        |[\u5358\u7d14\u306a\u4f8b](https://www.mediawiki.org/wiki/API:Main_page/ja#.E5.8D.98.E7.B4.94.E3.81.AA.E4.BE.8B)\u3092\u305d\u306e\u307e\u307e\u771f\u4f3c\u3057\u307e\u3057\u305f\u3002 |\n|titles |File:(\u56fd\u65d7\u753b\u50cf\u306e\u30d5\u30a1\u30a4\u30eb\u540d)|[API:Imageinfo](https://www.mediawiki.org/wiki/API:Imageinfo)\u3067\u53d6\u5f97\u3057\u305f\u3044\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u7279\u6b8a\u6587\u5b57\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001[`urllib.parse.quote()`](http://docs.python.jp/3/library/urllib.parse.html#urllib.parse.quote)\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002 |\n|format |json        |[\u5358\u7d14\u306a\u4f8b](https://www.mediawiki.org/wiki/API:Main_page/ja#.E5.8D.98.E7.B4.94.E3.81.AA.E4.BE.8B)\u3092\u305d\u306e\u307e\u307e\u771f\u4f3c\u3057\u3066\u3001json\u5f62\u5f0f\u306b\u3057\u307e\u3057\u305f\u3002|\n|prop |imageinfo |[API:Imageinfo](https://www.mediawiki.org/wiki/API:Imageinfo)\u3092\u4f7f\u3046\u3053\u3068\u3092\u793a\u3057\u3066\u3044\u307e\u3059\u3002|\n|iiprop |url       |[API:Imageinfo](https://www.mediawiki.org/wiki/API:Imageinfo)\u3067\u53d6\u5f97\u3057\u305f\u3044\u9805\u76ee\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306fURL\u304c\u6b32\u3057\u3044\u306e\u3067`url`\u3092\u6307\u5b9a\u3057\u307e\u3057\u305f\u3002 |\n\n####API\u306e\u623b\u308a\u5024\njson\u5f62\u5f0f\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u4ee5\u524d\u306e\u554f\u984c\u3067\u4f7f\u7528\u3057\u305f`json.loads()`\u3067\u5909\u63db\u3055\u305b\u308c\u3070\u3001\u7c21\u5358\u306b\u6271\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u306a\u304a\u3001\u53d7\u4fe1\u7d50\u679c\u306f\u30d0\u30a4\u30c8\u5217\u306e\u305f\u3081\u3001`json.loads()`\u3059\u308b\u524d\u306b[`bytes.decode()`](http://docs.python.jp/3/library/stdtypes.html#bytes.decode)\u3067\u6587\u5b57\u5217\u3078\u306e\u5909\u63db\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u3001`json.loads()`\u3057\u305f`data`\u3092\u3001`print(json.dumps(data, indent=4))`\u3057\u305f\u7d50\u679c\u3067\u3059\u3002\n\n```console:\u7aef\u672b\n{\n    \"continue\": {\n        \"continue\": \"||\",\n        \"iistart\": \"2007-09-03T09:51:34Z\"\n    },\n    \"query\": {\n        \"pages\": {\n            \"-1\": {\n                \"imagerepository\": \"shared\",\n                \"imageinfo\": [\n                    {\n                        \"url\": \"https://upload.wikimedia.org/wikipedia/commons/a/ae/Flag_of_the_United_Kingdom.svg\",\n                        \"descriptionshorturl\": \"https://commons.wikimedia.org/w/index.php?curid=347935\",\n                        \"descriptionurl\": \"https://commons.wikimedia.org/wiki/File:Flag_of_the_United_Kingdom.svg\"\n                    }\n                ],\n                \"missing\": \"\",\n                \"title\": \"File:Flag of the United Kingdom.svg\",\n                \"ns\": 6\n            }\n        }\n    }\n}\n```\n\n\u76ee\u7684\u306e`url`\u304c\u7d50\u69cb\u6df1\u3044\u3068\u3053\u308d\u306b\u3042\u308b\u306e\u3067\u3001\u53d6\u308a\u51fa\u3057\u306f\u3061\u3087\u3063\u3068\u9762\u5012\u3067\u3057\u305f\u3002\n\n\u3000\n30\u672c\u76ee\u306e\u30ce\u30c3\u30af\u306f\u4ee5\u4e0a\u3067\u3059\u3002\u8aa4\u308a\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3001\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u307e\u3059\u3068\u5e78\u3044\u3067\u3059\u3002\n<hr>\n\n*\u5b9f\u884c\u7d50\u679c\u306b\u306f\u3001[100\u672c\u30ce\u30c3\u30af\u3067\u7528\u3044\u308b\u30b3\u30fc\u30d1\u30b9\u30fb\u30c7\u30fc\u30bf](http://www.cl.ecei.tohoku.ac.jp/nlp100/#data)\u3067\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306e\u4e00\u90e8\u304c\u542b\u307e\u308c\u307e\u3059\u3002\u3053\u306e\u7b2c3\u7ae0\u3067\u7528\u3044\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306e\u30e9\u30a4\u30bb\u30f3\u30b9\u306f[\u30af\u30ea\u30a8\u30a4\u30c6\u30a3\u30d6\u30fb\u30b3\u30e2\u30f3\u30ba \u8868\u793a-\u7d99\u627f 3.0 \u975e\u79fb\u690d](https://creativecommons.org/licenses/by-sa/3.0/legalcode)\uff08[\u65e5\u672c\u8a9e\u8a33](https://creativecommons.org/licenses/by-sa/3.0/deed.ja)\uff09\u3067\u3059\u3002*\n", "tags": ["\u6b63\u898f\u8868\u73fe", "\u8a00\u8a9e\u51e6\u7406100\u672c\u30ce\u30c3\u30af", "Python"]}