{"tags": ["Java", "glassfish4.1", "JavaEE7", "CDI1.1"], "context": " More than 1 year has passed since last update.\u74b0\u5883\u69cb\u7bc9\n\u30b3\u30fc\u30c9\n\nCDI \u3068\u306f\nContexts and Dependency Injection \u306e\u7565\u3002\nJava EE 7 \u306b\u306f ver 1.1 \u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3002\nJSR \u306f 346\u3002\nDI \uff08\u4f9d\u5b58\u6027\u306e\u6ce8\u5165\uff09\u306b\u52a0\u3048\u3066\u3001\u7ba1\u7406\u3057\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b9\u30b3\u30fc\u30d7\u306e\u7ba1\u7406\u307e\u3067\u884c\u3063\u3066\u304f\u308c\u308b\u3002\n\nCDI \u8a95\u751f\u306e\u7d4c\u7def\u3068 JBoss Seam \u306e\u5909\u9077\nCDI \u306f\u3001 JBoss \u304c\u63d0\u4f9b\u3057\u3066\u3044\u305f\u72ec\u81ea\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308b Seam \u304c\u524d\u8eab\u3068\u306a\u3063\u3066\u3044\u308b\u3002\nSeam \u306f\u65e5\u672c\u8a9e\u3067\u300c\u7d99\u304e\u76ee\u300d\u3068\u3044\u3046\u610f\u5473\u3002\nJava EE 5 \u306e\u9803\u306e JSF \u3068 EJB \u3092\u30b7\u30fc\u30e0\u30ec\u30b9\u306b\u9023\u643a\u3055\u305b\u308b\u3053\u3068\u3092\u76ee\u7684\u306b\u4f5c\u3089\u308c\u305f\u306e\u304c\u3001\u3053\u306e Seam \u3068\u3044\u3046\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\u3053\u306e Seam \u306e\u4e2d\u3067\u3001 DI \u3084\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u7ba1\u7406\u3092\u62c5\u3063\u3066\u3044\u305f\u30b3\u30a2\u306e\u90e8\u5206\u304c\u62bd\u51fa\u3055\u308c\u3001 JSR \u3068\u3057\u3066\u6a19\u6e96\u5316\u3055\u308c\u305f\u3082\u306e\u304c CDI 1.0 \uff08JSR299\uff09\u306b\u306a\u308b\u3002\n\u53c2\u7167\u5b9f\u88c5\u306f Weld \u3067\u3001 Red Hat \u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u3066\u3044\u308b\u3002\nJSR299 \u306f Java EE 6 \u306b\u53d6\u308a\u8fbc\u307e\u308c\u3001\u6a19\u6e96\u4ed5\u69d8\u3068\u306a\u3063\u305f\u3002\n\u30b3\u30a2\u90e8\u5206\u304c\u6a19\u6e96\u4ed5\u69d8\u3068\u3057\u3066 EE \u306b\u53d6\u308a\u8fbc\u307e\u308c\u305f\u3042\u3068\u3001 Seam \u306f CDI \u306e\u62e1\u5f35\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u3057\u3066\u958b\u767a\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u305f\uff08Seam 3\uff09\u3002\n\u3057\u304b\u3057\u3001\u540c\u3058\u3088\u3046\u306b CDI \u3092\u62e1\u5f35\u3059\u308b\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3001\u4ed6\u306b\u3082\u5b58\u5728\u3057\u3066\u3044\u305f\uff08Apache MyFaces CODI\u3001CDISource\uff09\u3002\n\u305b\u3063\u304b\u304f CDI \u3068\u3044\u3046\u5f62\u3067\u4ed5\u69d8\u3092\u4e00\u672c\u5316\u3057\u305f\u306e\u306b\u3001\u3053\u306e\u307e\u307e\u3060\u3068\u7d50\u5c40\u307e\u305f\u5206\u5c90\u304c\u9032\u3093\u3067\u3044\u304f\u3053\u3068\u306b\u306a\u308b\u3002\n\u3053\u306e\u3053\u3068\u3092\u5371\u60e7\u3057\u305f\u5404\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306f\u3001\u3053\u308c\u3089\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\uff11\u3064\u306b\u307e\u3068\u3081\u3001\u65b0\u3057\u304f Apache DeltaSpike \u3068\u3044\u3046 Apache \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\u73fe\u5728\u306f\u3001\u3053\u306e Apache DeltaSpike \u3068\u3044\u3046\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067 CDI \u306e\u62e1\u5f35\u6a5f\u80fd\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\uff08\u4f8b\u3048\u3070\u3001 EE 6 \u74b0\u5883\u3067\u3082 EE 7 \u76f8\u5f53\u306e\u6a5f\u80fd @Transactional \u3068\u304b\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u62e1\u5f35\u6a5f\u80fd\u3068\u304b\uff09\u3002\n\n\u4eca\u5f8c\u306e CDI\n\u306f\u3058\u3081\u306f JSF \u3068 EJB \u3092\u7e4b\u3050\u76ee\u7684\u3067\u5c0e\u5165\u3055\u308c\u305f CDI \u3060\u304c\u3001 EE 7 \u3067\u306f\u305d\u308c\u4ee5\u5916\u306b\u3082\u69d8\u3005\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u9023\u643a\u3055\u305b\u308b\u5f79\u5272\u3092\u62c5\u3046\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\uff08JAX-RS\u3001Bean Validation \u306a\u3069\u306a\u3069\uff09\u3002\n\u4eca\u5f8c\u3082\u3001 CDI \u3092\u5229\u7528\u3057\u305f\u9023\u643a\u306e\u5f37\u5316\u306f\u9032\u3081\u3089\u308c\u3066\u3044\u304f\u3089\u3057\u3044\uff08Java Day Tokyo 2015 \u3088\u308a\uff09\u3002\n\nJSR 365\n\u6b21\u671f CDI \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.0 \u3067\u3001 Java EE 8 \u306b\u53d6\u308a\u5165\u308c\u3089\u308c\u308b\u4e88\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u3002\nJSR \u306f 365\u3002\n2.0 \u3067\u306f\u3001\u5927\u304d\u304f\u6b21\u306e\u6a5f\u80fd\u5f37\u5316\u304c\u63b2\u3052\u3089\u308c\u3066\u3044\u308b\u3002\n\nJava SE \u74b0\u5883\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u3002\nJava EE \u306e\u4ed6\u306e\u4ed5\u69d8\u3068\u306e\u3001\u3055\u3089\u306a\u308b\u9023\u643a\u5f37\u5316\u3002\n\n2016 \u5e74\u306e 1Q \u3067\u30d5\u30a1\u30a4\u30ca\u30eb\u30ea\u30ea\u30fc\u30b9\u3092\u51fa\u3059\u8a08\u753b\u3067\u958b\u767a\u304c\u9032\u3093\u3067\u3044\u308b\u3089\u3057\u3044\u3002\n\n2.12 Please describe the anticipated schedule for the development of this specification.\n\nAugust 2014 Expert Group formed\nQ1 2015 Early Draft\nQ3 2015 Public Review\nQ1 2016 Final Release \n\n\n\nHello World\n\u5b9f\u88c5\n\nMyInterface.java\npackage sample.cdi.bean;\n\npublic interface MyInterface {\n    void method();\n}\n\n\n\nHelloBean.java\npackage sample.cdi.bean;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class HelloBean implements MyInterface {\n\n    @Override\n    public void method() {\n        System.out.println(\"Hello CDI!!\");\n    }\n}\n\n\n\nCdiEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.HelloBean;\n\n@Stateless\npublic class CdiEjb {\n\n    @Inject\n    private HelloBean helloBean;\n\n    public void hello() {\n        this.helloBean.method();\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Hello CDI!!\n\n\n\u8aac\u660e\n\nJava EE 7 \u306e\u5834\u5408\u3001CDI \u3092\u4f7f\u3044\u306f\u3058\u3081\u308b\u305f\u3081\u306b\u7279\u5225\u306a\u8a2d\u5b9a\u306a\u3069\u3092\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002\n\u30b9\u30b3\u30fc\u30d7\u3092\u5b9a\u7fa9\u3059\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\uff08@Dependent \u306a\u3069\uff09\u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30af\u30e9\u30b9\u306f CDI \u30b3\u30f3\u30c6\u30ca\u306e\u7ba1\u7406\u5bfe\u8c61\u306b\u306a\u308b\u3002\n\u30b3\u30f3\u30c6\u30ca\u306b\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30b9\u4e0a\u3067\u3001 @Inject \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\n\nEJB \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u30b3\u30f3\u30c6\u30ca\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\n\n\n\n\u57fa\u672c\n\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\nCDI \u30b3\u30f3\u30c6\u30ca\u306b\u7ba1\u7406\u3055\u308c\u305f\u30af\u30e9\u30b9\u306e\u3053\u3068\u3092\u3001CDI \u7ba1\u7406\u30d3\u30fc\u30f3 \uff08CDI Managed Bean\uff09\u3068\u547c\u3076\u3002\n\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u6761\u4ef6\n\u30af\u30e9\u30b9\u3092\u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u6b21\u306e\u6761\u4ef6\u3092\u5168\u3066\u6e80\u305f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nstatic \u3067\u306f\u306a\u3044\u30a4\u30f3\u30ca\u30fc\u30af\u30e9\u30b9 \u3067\u306f\u306a\u3044 \u3053\u3068\u3002\n\u5177\u8c61\u30af\u30e9\u30b9\u3001\u307e\u305f\u306f @Decorator \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\nEJB \u3067\u306a\u3044\u3053\u3068\u3002\n\njavax.enterprise.inject.spi.Extension \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u3066\u3044\u306a\u3044\u3002\n\u30af\u30e9\u30b9\u307e\u305f\u306f\u3001\u305d\u306e\u30af\u30e9\u30b9\u304c\u5c5e\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u304c @Vetoed \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u3064\u3053\u3068\u3002\n\n\n\u5f15\u6570\u306a\u3057\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\n\n@Inject \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\n\n\n\n\u307e\u3041\u3001\u8981\u306f\u666e\u901a\u306b\u5b9a\u7fa9\u3059\u308b\u30af\u30e9\u30b9\u306a\u3089\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u3060\u3051\u6ce8\u610f\u3059\u308c\u3070\u3060\u3044\u305f\u3044 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30e9\u30b9\u3092 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u3067\u304d\u308b\u3002\n\n\n@NormalScope \u3092\u7d99\u627f\u3057\u305f\u30b9\u30b3\u30fc\u30d7\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3002\n\n\n@ApplicationScoped\n@SessionScoped\n@ConversationScoped\n@RequestScoped\n\u305d\u306e\u4ed6\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\n\n@Dependent\n@Interceptor\n@Decorator\n\n@Stereotype \u3092\u4f7f\u3063\u305f\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\n\n\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u65b9\u6cd5\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u306b\u306f\u3001 @Inject \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u307e\u305f\u3001\u5177\u4f53\u7684\u306a\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5834\u6240\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u65b9\u6cd5\u304c\u5b58\u5728\u3059\u308b\u3002\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u76f4\u63a5\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n\u521d\u671f\u5316\u30e1\u30bd\u30c3\u30c9\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n\n\u5b9f\u88c5\n\nHoge.java\npackage sample.cdi.bean.injectpoint;\n\nimport javax.enterprise.context.Dependent;\nimport javax.inject.Inject;\n\n@Dependent\npublic class Hoge {\n    @Inject\n    private Fuga fieldInjection;\n    private Fuga initializerMethodInjection;\n    private Fuga constructorInjection;\n\n    @Inject\n    public Hoge(Fuga fuga) {\n        System.out.println(\"constructor injection!!\");\n        this.constructorInjection = fuga;\n    }\n\n    @Inject\n    public void setFuga(Fuga fuga) {\n        System.out.println(\"initializer method injection!!\");\n        this.initializerMethodInjection = fuga;\n    }\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + \"fieldInjection=\" + fieldInjection + \", initializerMethodInjection=\" + initializerMethodInjection + \", constructorInjection=\" + constructorInjection + '}';\n    }\n}\n\n\n\nFuga.java\npackage sample.cdi.bean.injectpoint;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class Fuga {\n\n    @Override\n    public String toString() {\n        return \"Fuga{\" + this.hashCode() + \"}\";\n    }\n}\n\n\n\nInjectionPointEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.injectpoint.Hoge;\n\n@Stateless\npublic class InjectionPointEjb {\n\n    @Inject\n    private Hoge hoge;\n\n    public void execute() {\n        System.out.println(hoge);\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   initializer method injection!!\n\u60c5\u5831:   constructor injection!!\n\u60c5\u5831:   Hoge{fieldInjection=Fuga{311564470}, initializerMethodInjection=Fuga{1165724746}, constructorInjection=Fuga{1765497502}}\n\n\n\u8aac\u660e\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u76f4\u63a5\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n\nHoge.java\n@Dependent\npublic class Hoge {\n    @Inject\n    private Fuga fieldInjection;\n\n\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u3092 @Inject \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\u53ef\u8996\u6027\u306f private \u3067\u3082\u554f\u984c\u306a\u3044\u3002\n\u30bb\u30c3\u30bf\u30fc\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u5206\u5b9f\u88c5\u304c\u30b9\u30c3\u30ad\u30ea\u3059\u308b\u304c\u3001\u5358\u4f53\u30c6\u30b9\u30c8\u306f\u3057\u3065\u3089\u304f\u306a\u308b\u3002\n\n\n\u521d\u671f\u5316\u30e1\u30bd\u30c3\u30c9\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n\nHoge.java\n    @Inject\n    public void setFuga(Fuga fuga) {\n        System.out.println(\"initializer method injection!!\");\n        this.initializerMethodInjection = fuga;\n    }\n\n\n\n\u30e1\u30bd\u30c3\u30c9\u3092 @Inject \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30e1\u30bd\u30c3\u30c9\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u306b\u306f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n\nHoge.java\n    @Inject\n    public Hoge(Fuga fuga) {\n        System.out.println(\"constructor injection!!\");\n        this.constructorInjection = fuga;\n    }\n\n\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092 @Inject \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\n@Inject \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3067\u304d\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u3001\uff11\u3064\u307e\u3067\u3002\n\n@Inject \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001 CDI \u306e\u30b3\u30f3\u30c6\u30ca\u306f\u305d\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3002\n\n@Inject \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\u30a4\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u30d3\u30fc\u30f3\u3092\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3068\u826f\u3044\uff08\u5bfa\u7530\u3055\u3093\u63a8\u5968\uff09\u3002\n\n\n\u30b9\u30b3\u30fc\u30d7\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u306f\u751f\u5b58\u671f\u9593\u304c\u5b58\u5728\u3059\u308b\u3002\u3053\u308c\u3092 \u30b9\u30b3\u30fc\u30d7 \u3068\u547c\u3076\u3002\n\u6a19\u6e96\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u30b9\u30b3\u30fc\u30d7\u304c\u5b58\u5728\u3059\u308b\u3002\n\n\n\n\u30b9\u30b3\u30fc\u30d7\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\u751f\u5b58\u671f\u9593\n\n\n\n\nRequest\n@RequestScoped\n\uff11\u56de \u306e HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u9593\u306e\u307f\u3002\n\n\nSession\n@SessionScoped\n\uff11\u3064\u306e HttpSession \u306e\u9593\u306e\u307f\u3002\n\n\nApplication\n@Application\nWeb \u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u9593\u305a\u3063\u3068\u3002\n\n\nDependent\n@Dependent\n\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e\u30b9\u30b3\u30fc\u30d7\u3092\u7d99\u627f\u3059\u308b\u3002\n\n\nConversation\n@ConversationScoped\n\u30b9\u30b3\u30fc\u30d7\u306e\u958b\u59cb\u3068\u7d42\u4e86\u3092\u30d7\u30ed\u30b0\u30e9\u30de\u304c\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n\uff11\u56de\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4e2d\u3067\u5171\u6709\u7ba1\u7406\u3057\u305f\u3044\u30c7\u30fc\u30bf\u306a\u3069\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u3053\u308c\u307e\u3067\u306f ThreadLocal \u306a\u3069\u3092\u4f7f\u3063\u3066\u30c9\u30ad\u30c9\u30ad\u3057\u306a\u304c\u3089\u7ba1\u7406\u3057\u3066\u3044\u305f\u304c\u3001 @RequestScoped \u3092\u4f7f\u3048\u3070\u305d\u306e\u3078\u3093\u306e\u7ba1\u7406\u3092\u5168\u3066 CDI \u30b3\u30f3\u30c6\u30ca\u306b\u4efb\u305b\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u307e\u305f\u3001 @SessionScoped \u3092\u4f7f\u3048\u3070\u3001 HttpSession \u306a\u3069\u306e\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8 API \u306b\u4f9d\u5b58\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u7d10\u3065\u304f\u60c5\u5831\u3092\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u57fa\u672c\u52d5\u4f5c\u306e\u691c\u8a3c\n\u5b9f\u88c5\n\nApplicationScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\n\n@ApplicationScoped\npublic class ApplicationScopedBean {\n    @Inject\n    private SessionScopedBean sessionBean;\n    @Inject\n    private DependentBean dependentBean;\n\n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \", sessionBean=\" + sessionBean + \", dependentBean=\" + dependentBean + \"}\";\n    }\n}\n\n\n\nSessionScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.enterprise.context.SessionScoped;\nimport javax.inject.Inject;\n\n@SessionScoped\npublic class SessionScopedBean implements Serializable {\n    @Inject\n    private RequestScopedBean requestBean;\n    @Inject\n    private DependentBean dependentBean;\n\n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \", requestBean=\" + requestBean + \", dependentBean=\" + dependentBean + \"}\";\n    }\n}\n\n\n\nRequestScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.inject.Inject;\n\n@RequestScoped\npublic class RequestScopedBean {\n\n    @Inject\n    private DependentBean dependentBean;\n\n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \", dependentBean=\" + dependentBean + \"}\";\n    }\n}\n\n\n\nDependentBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class DependentBean implements Serializable {\n\n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \"}\";\n    }\n}\n\n\n\nScopeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.scope.ApplicationScopedBean;\nimport sample.cdi.bean.scope.RequestScopedBean;\nimport sample.cdi.bean.scope.SessionScopedBean;\n\n@Stateless\npublic class ScopeEjb {\n    @Inject private ApplicationScopedBean asb;\n    @Inject private SessionScopedBean ssb;\n    @Inject private RequestScopedBean rsb;\n\n    public void execute() {\n        String msg =\n            \"application scoped : \" + asb + \"\\n\"\n          + \"session scoped : \" + ssb + \"\\n\"\n          + \"request scoped : \" + rsb + \"\\n\"\n        ;\n\n        System.out.println(msg);\n    }\n}\n\n\n\n\u305d\u308c\u305e\u308c\u306e\u30b9\u30b3\u30fc\u30d7\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u3066\u3044\u308b\u3002\n\u4e0a\u4f4d\u306e\u30b9\u30b3\u30fc\u30d7\u306e\u30af\u30e9\u30b9\u306b\u306f\u3001\u4e0b\u4f4d\u306e\u30b9\u30b3\u30fc\u30d7\u306e\u30af\u30e9\u30b9\u3092 @Inject \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u3002\n\u3055\u3089\u306b\u3001\u305d\u308c\u305e\u308c\u306b @Dependent \u30b9\u30b3\u30fc\u30d7\u306e\u30af\u30e9\u30b9\u3082\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u3002\n\ntoString() \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u81ea\u8eab\u3068\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\uff12\u56de\u30a2\u30af\u30bb\u30b9\u3002\n\u4e00\u65e6 JSESSIONID \u3092\u7834\u68c4\u3057\u3001\u518d\u5ea6\uff12\u56de\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1913631888, requestBean={this=614601466, dependentBean={this=547193526}}, dependentBean={this=1081491714}}, dependentBean={this=1339217576}}\nsession scoped : {this=1913631888, requestBean={this=614601466, dependentBean={this=547193526}}, dependentBean={this=1081491714}}\nrequest scoped : {this=614601466, dependentBean={this=547193526}}\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1913631888, requestBean={this=353608602, dependentBean={this=1738509931}}, dependentBean={this=1081491714}}, dependentBean={this=1339217576}}\nsession scoped : {this=1913631888, requestBean={this=353608602, dependentBean={this=1738509931}}, dependentBean={this=1081491714}}\nrequest scoped : {this=353608602, dependentBean={this=1738509931}}\n\n\u203b\u3053\u3053\u3067\u3001\u30d6\u30e9\u30a6\u30b6\u5074\u306e JSESSIONID \u3092\u7834\u68c4\n\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1412439363, requestBean={this=418688321, dependentBean={this=95479694}}, dependentBean={this=1792900043}}, dependentBean={this=1339217576}}\nsession scoped : {this=1412439363, requestBean={this=418688321, dependentBean={this=95479694}}, dependentBean={this=1792900043}}\nrequest scoped : {this=418688321, dependentBean={this=95479694}}\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1412439363, requestBean={this=1809844357, dependentBean={this=1876918561}}, dependentBean={this=1792900043}}, dependentBean={this=1339217576}}\nsession scoped : {this=1412439363, requestBean={this=1809844357, dependentBean={this=1876918561}}, dependentBean={this=1792900043}}\nrequest scoped : {this=1809844357, dependentBean={this=1876918561}}\n\n\n\u3061\u3087\u3063\u3068\u898b\u3065\u3089\u3044\u306e\u3067\u3001\u8868\u306b\u307e\u3068\u3081\u308b\u3002\nApplicationScopedBean\n\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u6570\nthis\nsession\ndependent\n\n\n\n\n1\n1638042708\n1913631888\n1339217576\n\n\n2\n1638042708\n1913631888\n1339217576\n\n\n3\n1638042708\n1412439363\n1339217576\n\n\n4\n1638042708\n1412439363\n1339217576\n\n\n\nSessionScopedBean\n\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u6570\nthis\nrequest\ndependent\n\n\n\n\n1\n1913631888\n614601466\n1081491714\n\n\n2\n1913631888\n353608602\n1081491714\n\n\n3\n1412439363\n418688321\n1792900043\n\n\n4\n1412439363\n1809844357\n1792900043\n\n\n\nRequestScopedBean\n\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u6570\nthis\ndependent\n\n\n\n\n1\n614601466\n547193526\n\n\n2\n353608602\n1738509931\n\n\n3\n418688321\n95479694\n\n\n4\n1809844357\n1876918561\n\n\n\n\u8aac\u660e\n\n\n@ApplicationScoped \u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u9593\u304c\u751f\u5b58\u671f\u9593\u306a\u306e\u3067\u3001\u5e38\u306b\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5229\u7528\u3055\u308c\u308b\u3002\n\n\n\u3064\u307e\u308a\u3001\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n\n\n\n@SessionScoped \u306f\u3001\uff11\u3064\u306e HTTP \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u6709\u52b9\u306a\u9593\u3060\u3051\u3001\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5229\u7528\u3055\u308c\u308b\u3002\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u3054\u3068\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5207\u308a\u63db\u308f\u308b\u3002\n\n@SessionScoped \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u306f\u3001 Serializable \u3092\u5b9f\u88c5\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\n\n@RequestScoped \u306f\u3001\uff11\u3064\u306e HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306b\u65b0\u3057\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u3001\u5229\u7528\u3055\u308c\u308b\u3002\n\n@Dependent \u306f\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u5148\u3068\u540c\u3058\u30b9\u30b3\u30fc\u30d7\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\n\n\nSessionScopedBean \u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u5834\u5408 DependentBean \u3082\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u306b\u306a\u308b\u306e\u3067\u3001 Serializable \u3092\u5b9f\u88c5\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\n\n\n\u30d7\u30ed\u30ad\u30b7\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\n\u3088\u304f\u3088\u304f\u4e0a\u8a18\u306e\u8868\u3092\u898b\u308b\u3068\u3001 this \u306e\u30cf\u30c3\u30b7\u30e5\u5024\u306f\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u306e\u306b\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3060\u3051\u304c\u5207\u308a\u66ff\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u3065\u304f\u3002\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5ea6\u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5dee\u3057\u66ff\u308f\u3063\u3066\u3044\u308b\u306e\u304b\u3068\u3044\u3046\u3068\u3001\u305d\u3046\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u3002\n\u5b9f\u969b\u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u672c\u7269\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u3001\u305d\u308c\u3092\u30e9\u30c3\u30d7\u3057\u305f\u30d7\u30ed\u30ad\u30b7\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u308b\u3002\n\nScopeEjb.java\n@Stateless\npublic class ScopeEjb {\n    @Inject private ApplicationScopedBean asb;\n    @Inject private SessionScopedBean ssb;\n    @Inject private RequestScopedBean rsb;\n\n    ...\n\n    public void proxy() {\n        System.out.println(\"application scoped : \" + this.asb.getClass());\n        System.out.println(\"session scoped : \" + this.ssb.getClass());\n        System.out.println(\"request scoped : \" + this.rsb.getClass());\n    }\n}\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   application scoped : class sample.cdi.bean.scope.ApplicationScopedBean$Proxy$_$$_WeldClientProxy\n\u60c5\u5831:   session scoped : class sample.cdi.bean.scope.SessionScopedBean$Proxy$_$$_WeldClientProxy\n\u60c5\u5831:   request scoped : class sample.cdi.bean.scope.RequestScopedBean$Proxy$_$$_WeldClientProxy\n\n\n\n\n@Inject \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u672c\u4f53\u3067\u306f\u306a\u304f\u30d7\u30ed\u30ad\u30b7\u306b\u306a\u308b\u3002\n\u30d7\u30ed\u30ad\u30b7\u306f\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u305f\u6642\u70b9\u3067\u5b9f\u969b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3001\u672c\u4f53\u306e\u51e6\u7406\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3002\n\u3053\u306e\u4ed5\u7d44\u306e\u304a\u304b\u3052\u3067\u3001\u5e83\u3044\u30b9\u30b3\u30fc\u30d7\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3001\u72ed\u3044\u30b9\u30b3\u30fc\u30d7\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\nConversation Scope\n@ConversationScoped \u306f\u3001\u30b9\u30b3\u30fc\u30d7\u306e\u958b\u59cb\u3068\u7d42\u4e86\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u6307\u5b9a\u3059\u308b\u3002\n@RequestScoped \u3088\u308a\u9577\u304f\u3066\u3001 @SessionScoped \u3088\u308a\u306f\u77ed\u3044\u30b9\u30b3\u30fc\u30d7\u304c\u307b\u3057\u3044\u5834\u5408\u306b\u5229\u7528\u3059\u308b\u3002\n\u4e3b\u306b\u3001 JSF \u3067\u8907\u6570\u753b\u9762\u306b\u8de8\u3063\u305f\u60c5\u5831\u306e\u7ba1\u7406\u3092\u3057\u305f\u3044\u5834\u5408\u306b\u5229\u7528\u3055\u308c\u308b\u3002\n\u5b9f\u88c5\n\nConversationScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.enterprise.context.ConversationScoped;\n\n@ConversationScoped\npublic class ConversationScopedBean implements Serializable {\n\n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \"}\";\n    }\n}\n\n\n\nScopeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.context.Conversation;\nimport javax.inject.Inject;\nimport sample.cdi.bean.scope.ConversationScopedBean;\n...\n\n@Stateless\npublic class ScopeEjb {\n    ...\n\n    @Inject\n    private ConversationScopedBean csb;\n    @Inject\n    private Conversation conv;\n\n    public void beginConversation() {\n        this.conv.begin();\n        System.out.println(\"begin conversation scope. cid = \" + this.conv.getId());\n        System.out.println(\"csb=\" + this.csb);\n    }\n\n    public void conversation() {\n        System.out.println(\"cid = \" + this.conv.getId());\n        System.out.println(\"csb=\" + this.csb);\n    }\n\n    public void endConversation() {\n        System.out.println(\"end conversation scope. cid = \" + this.conv.getId());\n        System.out.println(\"csb=\" + this.csb);\n        this.conv.end();\n    }\n}\n\n\nScopeEjb \u306e\u5404\u30e1\u30bd\u30c3\u30c9\u306b\u306f\u3001 http://localhost:8080/cdi/scope/<\u30e1\u30bd\u30c3\u30c9\u540d> \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\n\u52d5\u4f5c\u78ba\u8a8d\nWeb \u30d6\u30e9\u30a6\u30b6\u3092\u958b\u304d\u3001\u307e\u305a\u306f http://localhost:8080/cdi/scope/beginConversation \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   begin conversation scope. cid = 1\n\u60c5\u5831:   csb={this=246187740}\n\n\n\u6b21\u306b\u3001\u540c\u3058 Web \u30d6\u30e9\u30a6\u30b6\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304b\u3089 http://localhost:8080/cdi/scope/conversation?cid=1 \u306b\u4f55\u56de\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3088\u3046\u306b\u3059\u308b\uff09\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   cid = 1\n\u60c5\u5831:   csb={this=246187740}\n\n\u60c5\u5831:   cid = 1\n\u60c5\u5831:   csb={this=246187740}\n\n\u60c5\u5831:   cid = 1\n\u60c5\u5831:   csb={this=246187740}\n\n\nhttp://localhost:8080/cdi/scope/endConversation?cid=1 \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   end conversation scope. cid = 1\n\u60c5\u5831:   csb={this=246187740}\n\n\n\u6700\u5f8c\u306b http://localhost:8080/cdi/scope/conversation?cid=1 \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u8b66\u544a:   javax.ejb.EJBException\n      ...\nCaused by: org.jboss.weld.context.NonexistentConversationException: WELD-000321: No conversation found to restore for id 1\n      ...\n\n\n\u8aac\u660e\n\n\n@ConversationScoped \u306e\u958b\u59cb\u3068\u7d42\u4e86\u306f\u3001 Conversation \u306e begin() \u3068 end() \u30e1\u30bd\u30c3\u30c9\u3067\u5236\u5fa1\u3059\u308b\u3002\n\n\n\nConversation \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u81ea\u4f53\u306f CDI \u306e\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u308b\u306e\u3067 @Inject \u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3059\u308b\u3002\n\n\nConversation \u30b9\u30b3\u30fc\u30d7\u306b\u306f\u3001\u30b9\u30b3\u30fc\u30d7\u306e\u72b6\u614b\u304c\uff12\u7a2e\u985e\u5b58\u5728\u3059\u308b\u3002\n\n\n\uff11\u3064\u304c\u300c\u4e00\u6642\u7684\uff08transient\uff09\u306a\u30b9\u30b3\u30fc\u30d7\u300d\u3067\u3001\u3082\u3046\uff11\u3064\u304c\u300c\u9577\u671f\u9593\uff08long-running\uff09\u6709\u52b9\u306a\u30b9\u30b3\u30fc\u30d7\u300d\u3002\n\ntransient \u306a\u30b9\u30b3\u30fc\u30d7\u306f\u3001 @RequestScoped \u3068\u540c\u3058\u3067 HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u304c\u7d42\u4e86\u3059\u308b\u3068\u7834\u68c4\u3055\u308c\u308b\u3002\n\u4e00\u65b9\u3001 long-running \u306a\u30b9\u30b3\u30fc\u30d7\u306f\u8907\u6570\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u9593\u3067\u7dad\u6301\u3055\u308c\u308b\u3002\n\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306f transient \u306a\u30b9\u30b3\u30fc\u30d7\u304c\u63a1\u7528\u3055\u308c\u308b\u3002\n\nlong-running \u306b\u3059\u308b\u305f\u3081\u306b\u306f\u3001 Conversation#begin() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\nbegin() \u30e1\u30bd\u30c3\u30c9\u3067 long-running \u306a\u30b9\u30b3\u30fc\u30d7\u3092\u958b\u59cb\u3059\u308b\u3068\u3001\u4e00\u610f\u306a ID \u304c\u767a\u884c\u3055\u308c\u308b\u3002\n\u6b21\u56de\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u3068\u304d\u306b\u3001\u305d\u306e ID \u3092 cid \u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u5171\u306b\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u308b\u3068\u3001\u524d\u56de\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u3068\u304d\u306e\u30b9\u30b3\u30fc\u30d7\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3002\n\n\nConversation \u30b9\u30b3\u30fc\u30d7\u306f HTTP \u30bb\u30c3\u30b7\u30e7\u30f3\u3054\u3068\u306b\u7ba1\u7406\u3055\u308c\u308b\u3002\u3088\u3063\u3066\u3001\u5225\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u767a\u884c\u3055\u308c\u305f cid \u3092\u7570\u306a\u308b\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3057\u3066\u3082\u3001\u30b9\u30b3\u30fc\u30d7\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3002\n\ncid \u3092\u6307\u5b9a\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e transient \u6271\u3044\u306b\u306a\u308a\u3001\u65b0\u305f\u306a\u30b9\u30b3\u30fc\u30d7\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\u4ed5\u69d8\u4e0a\u3001 cid \u3067\u6307\u5b9a\u3055\u308c\u306a\u304f\u306a\u3063\u305f\u904e\u53bb\u306e long-running \u72b6\u614b\u306e\u30b9\u30b3\u30fc\u30d7\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u4efb\u610f\u306b\u7834\u68c4\u3057\u3066\u3082\u69cb\u308f\u306a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n\n\n6.7.4. Conversation context lifecycle\nThe container is permitted to arbitrarily destroy any long-running conversation that is associated\nwith no current Servlet request, in order to conserve resources.\n\n\n\nlong-running \u306a\u30b9\u30b3\u30fc\u30d7\u306e\u7d42\u4e86\u306f\u3001 Conversation#end() \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u4e00\u5ea6\u7d42\u4e86\u3057\u305f cid \u306f\u3001\u5f53\u7136\u518d\u5229\u7528\u3067\u304d\u306a\u3044\u3002\n\n\nJSF \u3067\u5229\u7528\u3057\u305f\u5834\u5408\nJSF \u3067 @ConversationScoped \u3092\u5229\u7528\u3057\u305f\u5834\u5408\u3001\u3053\u306e cid \u306e\u3084\u308a\u53d6\u308a\u304c\u81ea\u52d5\u3067\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u306a\u306e\u3067\u3001\u5b9f\u88c5\u8005\u306f\u7279\u306b cid \u306e\u5b58\u5728\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3068\u304d\u3068\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u51e6\u7406\u3092\u631f\u3080\n\u4f8b\u3048\u3070\u3001\u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3092\u4fdd\u6301\u3059\u308b\u30d3\u30fc\u30f3\u304c\u5b58\u5728\u3057\u305f\u3068\u3059\u308b\u3002\n\u3053\u306e\u4ed5\u7d44\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u305d\u306e\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3068\u304d\u306b\u30ea\u30bd\u30fc\u30b9\u3068\u306e\u63a5\u7d9a\u3092\u78ba\u7acb\u3055\u305b\u3001\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u63a5\u7d9a\u3092\u89e3\u653e\u3059\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3067\u304d\u308b\u3002\n\u5b9f\u88c5\n\nSessionScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\nimport javax.enterprise.context.SessionScoped;\n\n@SessionScoped\npublic class SessionScopedBean implements Serializable {\n\n    @PostConstruct\n    public void postConstruct() {\n        System.out.println(\"[Session Scope] post construct : \" + hashCode());\n    }\n\n    @PreDestroy\n    public void preDestroy() {\n        System.out.println(\"[Session Scope] pre destroy : \" + hashCode());\n    }\n}\n\n\n\nRequestScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\nimport javax.enterprise.context.RequestScoped;\n\n@RequestScoped\npublic class RequestScopedBean {\n\n    @PostConstruct\n    public void postConstruct() {\n        System.out.println(\"[Request Scope] post construct : \" + hashCode());\n    }\n\n    @PreDestroy\n    public void preDestroy() {\n        System.out.println(\"[Request Scope] pre destroy : \" + hashCode());\n    }\n}\n\n\n\nLifeCycleCallbackMethodEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport javax.servlet.http.HttpSession;\nimport sample.cdi.bean.scope.RequestScopedBean;\nimport sample.cdi.bean.scope.SessionScopedBean;\n\n@Stateless\npublic class LifeCycleCallbackMethodEjb {\n    @Inject private HttpSession session;\n    @Inject private SessionScopedBean ssb;\n    @Inject private RequestScopedBean rsb;\n\n    public void execute() {\n        ssb.toString();\n        rsb.toString();\n        System.out.println(\"LifeCycleCallbackMethodEjb#execute()\");\n    }\n\n    public void endSession() {\n        System.out.println(\"LifeCycleCallbackMethodEjb#endSession()\");\n        this.session.invalidate();\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 LifeCycleCallbackMethodEjb#execute() \u304c\u5b9f\u884c\u3055\u308c\u308b URL \u306b\u4f55\u56de\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   [Session Scope] post construct : 216269762\n\u60c5\u5831:   [Request Scope] post construct : 1146100374\n\u60c5\u5831:   LifeCycleCallbackMethodEjb#execute()\n\u60c5\u5831:   [Request Scope] pre destroy : 1146100374\n\n\u60c5\u5831:   [Request Scope] post construct : 1929012709\n\u60c5\u5831:   LifeCycleCallbackMethodEjb#execute()\n\u60c5\u5831:   [Request Scope] pre destroy : 1929012709\n\n\nLifeCycleCallbackMethodEjb#endSession() \u304c\u5b9f\u884c\u3055\u308c\u308b URL \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   LifeCycleCallbackMethodEjb#endSession()\n\u60c5\u5831:   [Session Scope] pre destroy : 216269762\n\n\n\u8aac\u660e\n\n\n@PostConstruct \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u305f\u3068\u304d\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n@PreDestroy \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u521d\u671f\u5316\u51e6\u7406\u306f\u3001 @PostConstruct \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u3067\u884c\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\n\u30b3\u30f3\u30c6\u30ca\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4f7f\u3063\u3066 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3002\n\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u308f\u3056\u308f\u3056 @PostConstruct \u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u521d\u671f\u5316\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u601d\u3048\u308b\u3002\n\u3057\u304b\u3057\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u521d\u671f\u5316\u51e6\u7406\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u66f8\u3044\u3066\u306f\u3044\u3051\u306a\u3044\u3002\n\u306a\u305c\u306a\u3089\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b9f\u884c\u3055\u308c\u305f\u6bb5\u968e\u3067\u306f\u3001\u307e\u3060\u4f9d\u5b58\u6027\u306e\u6ce8\u5165\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308b\u304b\u3089\u3060\u3002\n\u3082\u3057\u3001 @Inject \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u4e88\u5b9a\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5185\u3067\u4f7f\u7528\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u6700\u60aa NullPointerException \u304c\u767a\u751f\u3059\u308b\u3002\n\u4e00\u65b9\u3001 @PostConstruct \u306f\u3001\u5168\u3066\u306e\u4f9d\u5b58\u95a2\u4fc2\u306e\u6ce8\u5165\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3067\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3046\u3044\u3063\u305f\u554f\u984c\u304c\u8d77\u304d\u306a\u3044\u3002\n\u3088\u3063\u3066\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u521d\u671f\u5316\u51e6\u7406\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u306f\u306a\u304f @PostConstruct \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u3067\u884c\u3046\u306e\u304c\u826f\u3044\u3002\n\nProducer \u30e1\u30bd\u30c3\u30c9\n\n\u30b9\u30b3\u30fc\u30d7\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30af\u30e9\u30b9\u3092\u76f4\u63a5\u30a2\u30ce\u30c6\u30fc\u30c8\u3067\u304d\u305a\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u81ea\u52d5\u767b\u9332\u3067\u304d\u306a\u3044\u3002\n\u540c\u3058\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8907\u6570\u751f\u6210\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u767b\u9332\u3057\u305f\u3044\u3002\n\n\u3053\u3093\u306a\u5834\u5408\u306f\u3001 Producer \u30e1\u30bd\u30c3\u30c9\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\u203b\u5f8c\u8005\u306e\u5834\u5408\u306f\u3001\u9650\u5b9a\u5b50\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\u57fa\u672c\n\u5b9f\u88c5\n\nHoge.java\npackage sample.cdi.bean.producer;\n\npublic class Hoge {\n\n    private String name;\n\n    public Hoge(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + \"name=\" + name + \", hash=\" + hashCode() + \"}\";\n    }\n}\n\n\n\nHogeFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Produces;\n\n@Stateless\npublic class HogeFactory {\n\n    @Produces\n    public Hoge getHoge() {\n        System.out.println(\"getHoge()\");\n        return new Hoge(\"hoge factory\");\n    }\n}\n\n\n\nProducerEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.producer.Hoge;\n\n@Stateless\npublic class ProducerEjb {\n    @Inject\n    private Hoge hoge;\n\n    public void execute() {\n        System.out.println(hoge);\n        System.out.println(hoge.getClass());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nProducerEjb#execute() \u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u4f55\u56de\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=309349054}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge\n\n\u60c5\u5831:   Hoge{name=hoge factory, hash=309349054}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge\n\n\u60c5\u5831:   Hoge{name=hoge factory, hash=309349054}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge\n\n\n\u8aac\u660e\n\nHogeFactory.java\n    @Produces\n    public Hoge getHoge() {\n        System.out.println(\"getHoge()\");\n        return new Hoge(\"hoge factory\");\n    }\n\n\n\n\n@Produces \u3067\u30e1\u30bd\u30c3\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u8fd4\u5374\u3057\u305f\u5024\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u305b\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092 Producer \u30e1\u30bd\u30c3\u30c9\u3068\u547c\u3076\u3002\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u30d3\u30fc\u30f3\u3060\u3051\u3067\u306a\u304f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3067\u3082 Producer \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\u5358\u7d14\u306b @Produces \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u3060\u3051\u306e Producer \u30e1\u30bd\u30c3\u30c9\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u30d3\u30fc\u30f3\u306f\u3001\u30d7\u30ed\u30ad\u30b7\u3067\u30e9\u30c3\u30d7\u3055\u308c\u306a\u3044\u3002\n\n\n\u30b9\u30b3\u30fc\u30d7\u3092\u6307\u5b9a\u3059\u308b\nProducer \u30e1\u30bd\u30c3\u30c9\u3067\u5b9a\u7fa9\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3001\u30b9\u30b3\u30fc\u30d7\u3092\u6301\u305f\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u5b9f\u88c5\n\nHogeFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Produces;\n+ import javax.enterprise.context.RequestScoped;\n\n@Stateless\npublic class HogeFactory {\n\n-   @Produces\n+   @Produces @RequestScoped\n    public Hoge getHoge() {\n        System.out.println(\"getHoge()\");\n        return new Hoge(\"hoge factory\");\n    }\n}\n\n\n\nHoge.java\npackage sample.cdi.bean.producer;\n\npublic class Hoge {\n\n    private String name;\n\n+   public Hoge() {}\n\n    public Hoge(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + \"name=\" + name + \", hash=\" + hashCode() + \"}\";\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=32172459}\n\u60c5\u5831:   class sample.cdi.bean.roducer.Hoge$Proxy$_$$_WeldClientProxy\n\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=1343265552}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge$Proxy$_$$_WeldClientProxy\n\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=773997409}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge$Proxy$_$$_WeldClientProxy\n\n\n\u8aac\u660e\n\n\n@Produces \u306b\u52a0\u3048\u3066\u3001\u30b9\u30b3\u30fc\u30d7\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30e1\u30bd\u30c3\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30d3\u30fc\u30f3\u306e\u30b9\u30b3\u30fc\u30d7\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\u3053\u306e\u5834\u5408\u3001 @Inject \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u30d7\u30ed\u30ad\u30b7\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u308b\u3002\n\n\n\u30b3\u30f3\u30c6\u30ca\u304c\u30d7\u30ed\u30ad\u30b7\u3092\u751f\u6210\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3002\n\n\n\n\nProducer \u30d5\u30a3\u30fc\u30eb\u30c9\n\u521d\u671f\u5316\u51e6\u7406\u304c\u5b58\u5728\u305b\u305a\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 new \u3059\u308b\u3060\u3051\u3067\u826f\u3044\u306a\u3089\u3001 Producer \u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u3042\u308b\u3002\n\u5b9f\u88c5\n\nFuga.java\npackage sample.cdi.bean.producer;\n\npublic class Fuga {\n\n    private String name;\n\n    public Fuga(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Fuga{\" + \"name=\" + name + \", hash=\" + hashCode() + \"}\";\n    }\n}\n\n\n\nFugaFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Produces;\n\n@Dependent\npublic class FugaFactory {\n    @Produces\n    private Fuga fuga = new Fuga(\"fuga factory\");\n}\n\n\n\nProducerEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.producer.Fuga;\n\n@Stateless\npublic class ProducerEjb {\n    ...\n\n    @Inject\n    private Fuga fuga;\n\n    public void field() {\n        System.out.println(fuga);\n        System.out.println(fuga.getClass());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Fuga{name=fuga factory, hash=415012830}\n\u60c5\u5831:   class sample.cdi.bean.producer.Fuga\n\n\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u3092 @Produces \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u5024\u3092\u4ed6\u306e\u30d3\u30fc\u30f3\u306a\u3069\u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u3060\u3044\u305f\u3044 Producer \u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u540c\u3058\u632f\u308b\u821e\u3044\u3092\u3059\u308b\u3002\n\n\nDisposer \u30e1\u30bd\u30c3\u30c9\nProducer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u30d3\u30fc\u30f3\u306f\u3001 @PreDestroy \u306a\u3069\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u30e1\u30bd\u30c3\u30c9\u304c\u5229\u7528\u3067\u304d\u306a\u3044\u3002\n\u4ee3\u308f\u308a\u306b\u3001 Disposer \u30e1\u30bd\u30c3\u30c9\u3068\u3044\u3046\u306e\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\u5b9f\u88c5\n\nPiyo.java\npackage sample.cdi.bean.producer;\n\nimport javax.annotation.PreDestroy;\n\npublic class Piyo {\n\n    @PreDestroy\n    public void preDestroy() {\n        System.out.println(\"Piyo#preDestroy()\");\n    }\n\n    @Override\n    public String toString() {\n        return \"Piyo{\" + hashCode() + \"}\";\n    }\n}\n\n\n\nPiyoFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.context.RequestScoped;\nimport javax.enterprise.inject.Disposes;\nimport javax.enterprise.inject.Produces;\n\n@Stateless\npublic class PiyoFactory {\n\n    @Produces @RequestScoped\n    public Piyo getPiyo() {\n        return new Piyo();\n    }\n\n    public void disposerMethod(@Disposes Piyo piyo) {\n        System.out.println(\"PiyoFactory#disposerMethod()\");\n        System.out.println(\"piyo = \" + piyo);\n        System.out.println(\"piyo.class = \" + piyo.getClass());\n    }\n}\n\n\n\nProducerEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.producer.Piyo;\n\n@Stateless\npublic class ProducerEjb {\n    ...\n\n    @Inject\n    private Piyo piyo;\n\n    public void disposer() {\n        System.out.println(\"ProducerEjb#disposer()\");\n        System.out.println(\"piyo = \" + piyo);\n        System.out.println(\"piyo.class = \" + piyo.getClass());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   ProducerEjb#disposer()\n\u60c5\u5831:   piyo = Piyo{1985500044}\n\u60c5\u5831:   piyo.class = class sample.cdi.bean.producer.Piyo$Proxy$_$$_WeldClientProxy\n\n\u60c5\u5831:   PiyoFactory#disposerMethod()\n\u60c5\u5831:   piyo = Piyo{1985500044}\n\u60c5\u5831:   piyo.class = class sample.cdi.bean.producer.Piyo\n\n\n\u8aac\u660e\n\nProducer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u3067\u751f\u6210\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001 @PreDestroy \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u3066\u3044\u3066\u3082\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u306a\u3044\u3002\nProducer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u3092\u5b9a\u7fa9\u3057\u305f\u306e\u3068\u540c\u3058\u30af\u30e9\u30b9\u5185\u306b\u3001 Disposer \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\nDisposer \u30e1\u30bd\u30c3\u30c9\u306f\u3001\u4ee5\u4e0b\u306e\u6761\u4ef6\u3092\u5168\u3066\u6e80\u305f\u3059\u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u3063\u3066\u81ea\u52d5\u3067\u691c\u51fa\u3055\u308c\u308b\u3002\n\n\nProducer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u30af\u30e9\u30b9\u3068\u540c\u3058\u578b\u3092\u5f15\u6570\u306b\u53d7\u3051\u53d6\u308b\u3002\n\u305d\u306e\u5f15\u6570\u304c\u3001 @Disposes \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\n\n\nDisposer \u30e1\u30bd\u30c3\u30c9\u306f\u3001 Producer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u3067\u751f\u6210\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\nDisposer \u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u30d7\u30ed\u30ad\u30b7\u3067\u30e9\u30c3\u30d7\u3055\u308c\u3066\u3044\u306a\u3044\u3002\u7d20\u306e\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n\u30e1\u30bf\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\n\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e\u30e1\u30bf\u60c5\u5831\u3092\u3001 Producer \u30e1\u30bd\u30c3\u30c9\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u3088\u304f\u5229\u7528\u3055\u308c\u308b\u65b9\u6cd5\u3068\u3057\u3066\u3001\u30ed\u30ac\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 Producer \u30e1\u30bd\u30c3\u30c9\u3067\u751f\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e Class \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3057\u3066\u30ed\u30ac\u30fc\u306b\u6e21\u3059\u3001\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308b\u3002\n\u5b9f\u88c5\n\nHoge.java\npackage sample.cdi.bean.metadata;\n\npublic class Hoge {\n}\n\n\n\nHogeFactory.java\npackage sample.cdi.bean.metadata;\n\nimport java.lang.reflect.Member;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Produces;\nimport javax.enterprise.inject.spi.InjectionPoint;\n\n@Dependent\npublic class HogeFactory {\n\n    @Produces\n    public Hoge getHoge(InjectionPoint ip) {\n        System.out.println(\"getHoge()\");\n\n        Member member = ip.getMember();\n        System.out.println(\"member = \" + member);\n        System.out.println(\"member.class = \" + member.getClass());\n\n        return new Hoge();\n    }\n}\n\n\n\nMetadataEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.metadata.Hoge;\n\n@Stateless\npublic class MetadataEjb {\n    @Inject\n    private Hoge hoge;\n\n    public void execute() {\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   member = private sample.cdi.bean.metadata.Hoge sample.cdi.ejb.MetadataEjb.hoge\n\u60c5\u5831:   member.class = class java.lang.reflect.Field\n\n\n\u8aac\u660e\n\n\nInjectionPoint \u3092\u5f15\u6570\u3067\u53d7\u3051\u53d6\u308b\u3088\u3046\u306b\u3057\u3066 Producer \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\nInjectionPoint \u304b\u3089\u306f\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e\u60c5\u5831\u3084\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u30d3\u30fc\u30f3\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\n\u9650\u5b9a\u5b50\n\u540c\u3058\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u305f CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u304c\u8907\u6570\u5b58\u5728\u3057\u305f\u3068\u3059\u308b\u3002\n\u305d\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u578b\u3067 @Inject \u3092\u4f7f\u3044\u4f9d\u5b58\u6027\u306e\u6ce8\u5165\u3092\u3057\u305f\u5834\u5408\u3001\u30b3\u30f3\u30c6\u30ca\u306f\u8907\u6570\u5b58\u5728\u3059\u308b\u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u5185\u3001\u3069\u306e\u30d3\u30fc\u30f3\u3092\u63a1\u7528\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u5224\u65ad\u3067\u304d\u306a\u3044\uff08\u30a8\u30e9\u30fc\u306b\u306a\u308b\uff09\u3002\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306f\u3001\u9650\u5b9a\u5b50\uff08Qualifier\uff09\u3068\u547c\u3070\u308c\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3002\n\n\u57fa\u672c\n\u5b9f\u88c5\n\u30d3\u30fc\u30f3\u95a2\u9023\n\nMyInterface.java\npackage sample.cdi.bean.qualifier;\n\npublic interface MyInterface {\n}\n\n\n\nHoge.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @HogeHoge\npublic class Hoge implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + hashCode() + '}';\n    }\n}\n\n\n\nFuga.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @FugaFuga\npublic class Fuga implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"Fuga{\" + hashCode() + '}';\n    }\n}\n\n\n\u9650\u5b9a\u5b50\n\nHogeHoge.java\npackage sample.cdi.bean.qualifier;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.inject.Qualifier;\n\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface HogeHoge {\n}\n\n\n\nFugaFuga.java\npackage sample.cdi.bean.qualifier;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.inject.Qualifier;\n\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface FugaFuga {\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\u7528EJB\n\nQualifierEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.FugaFuga;\nimport sample.cdi.bean.qualifier.HogeHoge;\nimport sample.cdi.bean.qualifier.MyInterface;\n\n@Stateless\npublic class QualifierEjb {\n    @Inject @HogeHoge\n    private MyInterface hoge;\n\n    private MyInterface fuga;\n\n    @Inject\n    public void setFuga(@FugaFuga MyInterface fuga) {\n        this.fuga = fuga;\n    }\n\n    public void execute() {\n        System.out.println(\"hoge=\" + hoge);\n        System.out.println(\"fuga=\" + fuga);\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   hoge=Hoge{1614742928}\n\u60c5\u5831:   fuga=Fuga{354651225}\n\n\n\u8aac\u660e\n\nHogeHoge.java\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface HogeHoge {\n}\n\n\n\n\u9650\u5b9a\u5b50\u306f\u3001\u666e\u901a\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3057\u305f\u3046\u3048\u3067\u3001\u4ee5\u4e0b\u306e\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u4f5c\u6210\u3067\u304d\u308b\u3002\n\n\n@Qualifier\n\n@Retention\n\n\nvalue \u306b\u306f\u3001 RetentionPolicy.RUNTIME \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\n\n@Target\n\n\nTYPE, FILED, METHOD, PARAMETER \u306f\u3001\u9650\u5b9a\u5b50\u3092\u4f7f\u3046\u53ef\u80fd\u6027\u304c\u3042\u308b\u5834\u6240\u3002\n\n\n\n\n\n\nHoge.java\n@Dependent @HogeHoge\npublic class Hoge implements MyInterface {\n\n\n\n\u307e\u305a\u306f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u65b9\u3092\u4f5c\u6210\u3057\u305f\u9650\u5b9a\u5b50\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\u3053\u308c\u3067\u3001 MyInterface \u578b\u3067\u304b\u3064 @HogeHoge \u9650\u5b9a\u5b50\u3092\u6307\u5b9a\u3055\u308c\u305f\u5834\u5408\u306f Hoge \u578b\u3067\u89e3\u6c7a\u3059\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u6559\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nQualifierEjb.java\n    @Inject @HogeHoge\n    private MyInterface hoge;\n\n    private MyInterface fuga;\n\n    @Inject\n    public void setFuga(@FugaFuga MyInterface fuga) {\n        this.fuga = fuga;\n    }\n\n\n\n\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306f\u3001 @Inject \u3068\u4f5c\u6210\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5bfe\u8c61\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\u30e1\u30bd\u30c3\u30c9\uff08\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\uff09\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u3068\u304d\u306f\u3001\u5f15\u6570\u3092\u9650\u5b9a\u5b50\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n\n\u5c5e\u6027\u3092\u542b\u3081\u3066\u9069\u7528\u3092\u5224\u5b9a\u3055\u305b\u308b\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5c5e\u6027\u3092\u6301\u3064\u5834\u5408\u3001\u305d\u306e\u5c5e\u6027\u5024\u3082\u542b\u3081\u3066\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5bfe\u8c61\u306e\u30d3\u30fc\u30f3\u5019\u88dc\u304c\u9078\u629e\u3055\u308c\u308b\u3002\n\u3053\u308c\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5bfe\u8c61\u3092\u67d4\u8edf\u306b\u3001\u304b\u3064\u578b\u5b89\u5168\u306a\u65b9\u6cd5\u3067\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u5b9f\u88c5\n\nMyBeanType.java\npackage sample.cdi.bean.qualifier.attribute;\n\npublic enum MyBeanType {\n    HOGE,\n    FUGA,\n}\n\n\n\nMyQualifier.java\npackage sample.cdi.bean.qualifier.attribute;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.inject.Qualifier;\n\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface MyQualifier {\n    MyBeanType value() default MyBeanType.HOGE;\n}\n\n\n\nHoge.java\npackage sample.cdi.bean.qualifier.attribute;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier\npublic class Hoge implements MyInterface {\n}\n\n\n\nFuga.java\npackage sample.cdi.bean.qualifier.attribute;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier(MyBeanType.FUGA)\npublic class Fuga implements MyInterface {\n}\n\n\n\nQualifierAttributeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.attribute.MyBeanType;\nimport sample.cdi.bean.qualifier.attribute.MyInterface;\nimport sample.cdi.bean.qualifier.attribute.MyQualifier;\n\n@Stateless\npublic class QualifierAttributeEjb {\n    @Inject @MyQualifier\n    private MyInterface obj1;\n    @Inject @MyQualifier(MyBeanType.FUGA)\n    private MyInterface obj2;\n\n    public void execute() {\n        System.out.println(\"obj1.class = \" + obj1.getClass().getSimpleName());\n        System.out.println(\"obj2.class = \" + obj2.getClass().getSimpleName());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj1.class = Hoge\n\u60c5\u5831:   obj2.class = Fuga\n\n\n\u8aac\u660e\n\nMyQualifier.java\npublic @interface MyQualifier {\n    MyBeanType value() default MyBeanType.HOGE;\n}\n\n\n\n\u9650\u5b9a\u5b50\u3092\u4f5c\u6210\u3057\u3001 value \u306b\u30d3\u30fc\u30f3\u306e\u7a2e\u985e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u5217\u6319\u578b\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 HOGE \u304c\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n\nHoge.java,Fuga.java\n// Hoge.java\n@Dependent @MyQualifier\npublic class Hoge implements MyInterface {\n\n// Fuga.java\n@Dependent @MyQualifier(MyBeanType.FUGA)\npublic class Fuga implements MyInterface {\n\n\n\n\nHoge \u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3044\u308b @MyQualifier \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306a\u306e\u3067 MyBeanType.HOGE \u304c\u3001\nFuga \u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3044\u308b @MyQualifier \u306b\u306f MyBeanType.FUGA \u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u308c\u306b\u3088\u3063\u3066\u3001 @MyQualifier(MyBeanType.HOGE) \u3068\u3059\u308c\u3070 Hoge \u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3001\n@MyQualifier(MyBeanType.FUGA) \u3068\u3059\u308c\u3070 Fuga \u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u5217\u6319\u578b\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u9078\u629e\u80a2\u304c\u3069\u308c\u3060\u3051\u5b58\u5728\u3059\u308b\u304b\u304c\u660e\u78ba\u306b\u306a\u308a\u3001\u9593\u9055\u3063\u305f\u5024\u3092\u6e21\u3059\u3053\u3068\u3082\u306a\u304f\u306a\u308b\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b\uff08String \u3068\u304b\u3092\u4f7f\u3063\u3061\u3083\u3046\u3068\u3001\u4f55\u3067\u3082\u6e21\u305b\u3066\u3057\u307e\u3046\u306e\u3067\u5371\u967a\uff09\u3002\n\n\n\u30d3\u30eb\u30c8\u30a4\u30f3\u306e\u9650\u5b9a\u5b50\nCDI \u306b\u306f\u3001\u6b21\u306e\u9650\u5b9a\u5b50\u304c\u6a19\u6e96\u3067\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u3002\n\n@Default\n@Any\n@Named\n@New\n\nCDI \u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u3001\u4f9d\u5b58\u89e3\u6c7a\u306b\u5931\u6557\u3057\u305f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u304a\u76ee\u306b\u304b\u304b\u308b\u3053\u3068\u306e\u591a\u3044\u3053\u308c\u3089\u306e\u9650\u5b9a\u5b50\u306b\u3064\u3044\u3066\u3001\u305d\u306e\u7528\u6cd5\u3092\u307e\u3068\u3081\u308b\u3002\n\n@Named\n\n@Named \u306f\u3001\u6587\u5b57\u5217\u306b\u3088\u308b\u540d\u524d\u6307\u5b9a\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u30d3\u30fc\u30f3\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306e\u9650\u5b9a\u5b50\u3002\n@Named \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u540d\u524d\u3092\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u5b9f\u88c5\n\u30d3\u30fc\u30f3\u95a2\u9023\n\nMyInterface.java\npackage sample.cdi.bean.qualifier.builtin.named;\n\npublic interface MyInterface {\n}\n\n\n\nHoge.java\npackage sample.cdi.bean.qualifier.builtin.named;\n\nimport javax.enterprise.context.Dependent;\nimport javax.inject.Named;\n\n@Dependent @Named(\"HOGE\")\npublic class Hoge implements MyInterface {\n}\n\n\n\nFuga.java\npackage sample.cdi.bean.qualifier.builtin.named;\n\nimport javax.enterprise.context.Dependent;\nimport javax.inject.Named;\n\n@Dependent @Named\npublic class Fuga implements MyInterface{\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\u7528EJB\n\nNamedEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport sample.cdi.bean.qualifier.builtin.named.MyInterface;\n\n@Stateless\npublic class NamedEjb {\n    @Inject @Named(\"HOGE\")\n    private MyInterface hoge;\n    @Inject @Named(\"fuga\")\n    private MyInterface fuga;\n\n    public void execute() {\n        System.out.println(\" hoge.class = \" + hoge.getClass());\n        System.out.println(\" fuga.class = \" + fuga.getClass());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   hoge.class = class sample.cdi.bean.qualifier.builtin.named.Hoge\n\u60c5\u5831:   fuga.class = class sample.cdi.bean.qualifier.builtin.named.Fuga\n\n\n\u8aac\u660e\n\n\n@Named \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 value \u306b\u30d3\u30fc\u30f3\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nvalue \u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u30af\u30e9\u30b9\u540d\u306e\u5148\u982d\u3092\u5c0f\u6587\u5b57\u306b\u3057\u305f\u3082\u306e\u304c\u540d\u524d\u306b\u306a\u308b\uff08Fuga \u2192 fuga\uff09\u3002\n\n@Inject \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u3068\u304d\u306b\u3001\u540c\u3058\u304f @Named \u3067\u5bfe\u8c61\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 value \u3067\u30d3\u30fc\u30f3\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n@Named \u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u3067\u4f7f\u7528\u3059\u308b\u306e\u306f\u63a8\u5968\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n\n\n\u901a\u5e38\u306f\u3001 JSF \u306a\u3069\u3067 EL \u5f0f\u3092\u66f8\u304f\u3068\u304d\u306b\u306e\u307f\u3001\u53c2\u7167\u540d\u3068\u3057\u3066 @Named \u3067\u8a2d\u5b9a\u3057\u305f\u540d\u524d\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\n\n\n@Any \u3068 @Default\n\nCDI \u56de\u308a\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u4e00\u5ea6\u306f\u304a\u76ee\u306b\u304b\u304b\u308b\u9650\u5b9a\u5b50\u3002\n\u3042\u307e\u308a\u306b\u3082\u3088\u304f\u898b\u308b\u3046\u3048\u306b\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u3092\u898b\u305f\u3060\u3051\u3067\u5acc\u306a\u6c17\u5206\u306b\u306a\u308b\uff08\u81ea\u5206\u3060\u3051\uff1f\uff09\u3002\n\u3053\u308c\u3089\u306e\u9650\u5b9a\u5b50\u306e\u95a2\u4fc2\u306f\u3001\u3084\u3084\u3053\u3057\u3044\u3088\u3046\u3067\u7406\u89e3\u3057\u3066\u3057\u307e\u3048\u3070\u305d\u3093\u306a\u306b\u8907\u96d1\u3067\u306f\u306a\u3044\u3002\n\u307e\u305a\u3001\u305d\u308c\u305e\u308c\u306e\u5b9a\u7fa9\u304b\u3089\u3002\n\n@Any\n\n\n\u9650\u5b9a\u5b50\u306e\u6709\u7121\u306b\u95a2\u308f\u3089\u305a\u3001\u5168\u3066\u306e CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u81ea\u52d5\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u9650\u5b9a\u5b50\u3002\n\n\n@Default\n\n\n\u9650\u5b9a\u5b50\u3092\u4ed8\u3051\u3066\u3044\u306a\u3044\u5834\u5408\u306b\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u81ea\u52d5\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u9650\u5b9a\u5b50\u3002\n\u305f\u3060\u3057\u3001 @Named \u3060\u3051\u306f\u4f8b\u5916\u3067\u3001\u3053\u308c\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u3066\u3082 @Default \u304c\u4e00\u7dd2\u306b\u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n\u660e\u793a\u7684\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3002\n\n\n\u4f8b\n|| \u306e\u4e0a\u4e0b\u306f\u3001\u610f\u5473\u7684\u306b\u540c\u3058\u306b\u306a\u308b\u3002\n@Dependent\npublic class Hoge {\n\n     ||\n\n@Depndent @Any @Default\npublic class Hoge {\n\n@Dependent @Named\npublic class Fuga {\n\n     ||\n\n@Dependent @Named @Any @Default\npublic class Fuga {\n\n@Dependent @MyQualifier\npublic class Piyo {\n\n     ||\n\n@Dependent @MyQualifier @Any\npublic class Piyo {\n\n\u203bMyQualifier \u306f\u81ea\u4f5c\u306e\u9650\u5b9a\u5b50\u3002\n\u56f3\u306b\u8868\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002\n\n\u203b\u3053\u306e\u72b6\u614b\u306b\u306a\u308b\u3068\u3001 Hoge \u30af\u30e9\u30b9\u306f\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u306a\u304f\u306a\u308b\uff08@Default \u3060\u3051\u3067\u306f Fuga \u3082\u5019\u88dc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u3001\u30d3\u30fc\u30f3\u3092\u7279\u5b9a\u3067\u304d\u306a\u3044\u305f\u3081\uff09\u3002\n\n\u5b9f\u9a13\n\nMyInterface.java\npackage sample.cdi.bean.qualifier.defaultany;\n\npublic interface MyInterface {\n}\n\n\n\nDefaultBean.java\npackage sample.cdi.bean.qualifier.defaultany;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class DefaultBean implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"DefaultBean{\" + hashCode() + '}';\n    }\n}\n\n\n\nQualifiedBean.java\npackage sample.cdi.bean.qualifier.defaultany;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier\npublic class QualifiedBean implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"QualifiedBean{\" + hashCode() + '}';\n    }\n}\n\n\n\u5404\u30d3\u30fc\u30f3\u306e\u95a2\u4fc2\u306f\u3001\n\n\u3053\u3093\u306a\u611f\u3058\u3002\n\nDefaultAnyEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Any;\nimport javax.enterprise.inject.Default;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.defaultany.MyInterface;\nimport sample.cdi.bean.qualifier.defaultany.MyQualifier;\n\n@Stateless\npublic class DefaultAnyEjb {\n\n    @Inject\n    private MyInterface onlyInject;\n    @Inject @Default\n    private MyInterface withDefault;\n    @Inject @Default @Any\n    private MyInterface withDefaultAndAny;\n    @Inject @MyQualifier\n    private MyInterface withQualifier;\n\n    public void execute() {\n        System.out.println(\"onlyInject.class = \" + onlyInject.getClass().getSimpleName());\n        System.out.println(\"withDefault.class = \" + withDefault.getClass().getSimpleName());\n        System.out.println(\"withDefaultAndAny.class = \" + withDefaultAndAny.getClass().getSimpleName());\n        System.out.println(\"withQualifier.class = \" + withQualifier.getClass().getSimpleName());\n    }\n}\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   onlyInject.class = DefaultBean\n\u60c5\u5831:   withDefault.class = DefaultBean\n\u60c5\u5831:   withDefaultAndAny.class = DefaultBean\n\u60c5\u5831:   withQualifier.class = QualifiedBean\n\n\n\n@New\n\n\u3053\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u30dd\u30a4\u30f3\u30c8\u3067\u5229\u7528\u3059\u308b\u3068\u3001\u30b9\u30b3\u30fc\u30d7\u304c\u5f37\u5236\u7684\u306b Dependent \u306b\u306a\u308b\u3002\n\u5b9f\u88c5\n\nApplicationScopedBean.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.ApplicationScoped;\n\n@ApplicationScoped\npublic class ApplicationScopedBean {\n\n    @Override\n    public String toString() {\n        return \"ApplicationScopedBean{\" + hashCode() + '}';\n    }\n}\n\n\n\nRequestScopedBean.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.enterprise.inject.New;\nimport javax.inject.Inject;\n\n@RequestScoped\npublic class RequestScopedBean {\n    @Inject\n    private ApplicationScopedBean normalBean;\n    @Inject @New\n    private ApplicationScopedBean newBean;\n\n    @Override\n    public String toString() {\n        return \"RequestScopedBean{\" + hashCode() + \", normalBean=\" + normalBean + \", newBean=\" + newBean + '}';\n    }\n}\n\n\n\nNewQualifierEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.RequestScopedBean;\n\n@Stateless\npublic class NewQualifierEjb {\n    @Inject\n    private RequestScopedBean bean;\n\n    public void execute() {\n        System.out.println(bean);\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   RequestScopedBean{1322601645, normalBean=ApplicationScopedBean{1740782693}, newBean=ApplicationScopedBean{927056158}}\n\n\u60c5\u5831:   RequestScopedBean{325806349, normalBean=ApplicationScopedBean{1740782693}, newBean=ApplicationScopedBean{246048323}}\n\n\u60c5\u5831:   RequestScopedBean{1410382906, normalBean=ApplicationScopedBean{1740782693}, newBean=ApplicationScopedBean{453643025}}\n\n\n\u8aac\u660e\n\n\n@New \u3092\u4ed8\u3051\u3066\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u65b9\u306f\u3001 RequestScoped \u306b\u306a\u3063\u3066\u3044\u308b\uff08\u306a\u306b\u3053\u308c\u3053\u308f\u3044\uff09\u3002\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3059\u308b\nInstance \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4ecb\u3059\u308b\u3053\u3068\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u52d5\u7684\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u57fa\u672c\n\u5b9f\u88c5\n\nHoge.java\npackage sample.cdi.bean.instance;\n\nimport javax.enterprise.context.RequestScoped;\n\n@RequestScoped\npublic class Hoge implements MyInterface {\n}\n\n\n\nInstanceEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Instance;\nimport javax.inject.Inject;\nimport sample.cdi.bean.instance.MyInterface;\n\n@Stateless\npublic class InstanceEjb {\n\n    @Inject\n    private Instance<MyInterface> instance;\n\n    public void execute() {\n        MyInterface obj = this.instance.get();\n        System.out.println(obj.getClass());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   class sample.cdi.bean.instance.Hoge$Proxy$_$$_WeldClientProxy\n\n\n\u8aac\u660e\n\n\nInstance \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4f7f\u3063\u3066\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3067\u304d\u308b\u3002\n\nInstance \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u81ea\u4f53\u306f\u3001 @Inject \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u3002\n\n\n\u9650\u5b9a\u5b50\u3067\u53d6\u5f97\u3059\u308b\u30d3\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b\n\u5b9f\u88c5\n\nFuga.java\npackage sample.cdi.bean.instance;\n\nimport javax.enterprise.context.RequestScoped;\n\n@RequestScoped @MyQualifier\npublic class Fuga implements MyInterface {\n}\n\n\n\nInstanceEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Instance;\nimport javax.inject.Inject;\nimport sample.cdi.bean.instance.MyInterface;\n+ import javax.enterprise.inject.Any;\n+ import javax.enterprise.inject.Default;\n+ import javax.enterprise.util.AnnotationLiteral;\n+ import sample.cdi.bean.instance.MyQualifier;\n\n@Stateless\npublic class InstanceEjb {\n\n+   @Any\n    @Inject\n    private Instance<MyInterface> instance;\n\n    public void execute() {\n-       MyInterface obj = this.instance.get();\n-       System.out.println(obj.getClass());\n\n+       System.out.println(\"ambiguous = \" + instance.isAmbiguous());\n+       \n+       Instance<MyInterface> defaults = instance.select(new AnnotationLiteral<Default>() {});\n+       System.out.println(\"defaults.class = \" + defaults.get().getClass());\n+       \n+       Instance<MyInterface> qualified = instance.select(new AnnotationLiteral<MyQualifier>() {});\n+       System.out.println(\"qualified.class = \" + qualified.get().getClass());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   ambiguous = true\n\u60c5\u5831:   defaults.class = class sample.cdi.bean.instance.Hoge$Proxy$_$$_WeldClientProxy\n\u60c5\u5831:   qualified.class = class sample.cdi.bean.instance.Fuga$Proxy$_$$_WeldClientProxy\n\n\n\u8aac\u660e\n\n\nInstance#select(Annotation...) \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u9650\u5b9a\u5b50\u3067\u30d3\u30fc\u30f3\u306e\u5019\u88dc\u3092\u7d5e\u308a\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u5f15\u6570\u306e Annotation \u306b\u306f\u3001 AnnotationLiteral \u30af\u30e9\u30b9\u3092\u5229\u7528\u3059\u308b\u3002\n\n\n\u9650\u5b9a\u5b50\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001 Instance \u306e\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u30dd\u30a4\u30f3\u30c8\u3067 @Any \u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\n\n@Any \u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001 @Default \u304c\u6697\u9ed9\u7684\u306b\u6307\u5b9a\u3055\u308c\u305f\u3053\u3068\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u3001 \u3053\u306e\u56f3 \u304b\u3089\u3082\u5206\u304b\u308b\u3088\u3046\u306b\u9650\u5b9a\u5b50\u3067\u6307\u5b9a\u3057\u305f\u7bc4\u56f2\u304c\u53d6\u5f97\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\n\n\n\n@Alternative \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u30d3\u30fc\u30f3\u3092\u5207\u308a\u66ff\u3048\u308b\n\u901a\u5e38\u306f A \u3068\u3044\u3046\u30d3\u30fc\u30f3\u3092\u4f7f\u3046\u3051\u3069\u3001\u30c6\u30b9\u30c8\u306e\u3068\u304d\u306f B \u3068\u3044\u3046\u5225\u306e\u30d3\u30fc\u30f3\u3092\u4f7f\u3044\u305f\u3044\u3002\n\u307f\u305f\u3044\u306a\u3068\u304d\u306f\u3001 @Alternative \u3092\u5229\u7528\u3059\u308b\u3002\n\u3053\u306e\u4ed5\u7d44\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u30af\u30e9\u30b9\u30d1\u30b9\u306b jar \u3092\u8ffd\u52a0\u3057\u305f\u3089\u81ea\u52d5\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u304c\u7f6e\u304d\u63db\u308f\u308b\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\nbeans.xml \u3092\u4f7f\u7528\u3057\u3066\u5207\u308a\u66ff\u3048\u308b\n\u5b9f\u88c5\n\nProductionBean.java\npackage sample.cdi.bean.alternative.beansxml;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class ProductionBean implements  MyInterface {\n}\n\n\n\nTestBean.java\npackage sample.cdi.bean.alternative.beansxml;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative\npublic class TestBean implements MyInterface {\n}\n\n\n\nAlternativeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.beansxml.MyInterface;\n\n@Stateless\npublic class AlternativeEjb {\n    @Inject\n    private MyInterface obj;\n\n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = ProductionBean\n\n\n\u6b21\u306b\u3001 WEB-INF \u306e\u76f4\u4e0b\u306b beans.xml \u3092\u4f5c\u6210\u3059\u308b\u3002\n\nbeans.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd\"\n       bean-discovery-mode=\"annotated\">\n\n  <alternatives>\n    <class>sample.cdi.bean.alternative.beansxml.TestBean</class>\n  </alternatives>\n</beans>\n\n\n\u518d\u5ea6 AlternativeEjb#execute() \u3092\u5b9f\u884c\u3055\u305b\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = TestBean\n\n\n\u8aac\u660e\n\n\nMyInterface \u3092\u5b9f\u88c5\u3057\u305f CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\uff12\u3064\u4f5c\u6210\u3057\u3066\u3044\u308b\uff08ProductionBean \u3068 TestBean\uff09\u3002\n\nTestBean \u306e\u65b9\u306f\u3001 @Alternative \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u306e\u72b6\u614b\u3067\u4f55\u3082\u6307\u5b9a\u3092\u3057\u306a\u3044\u5834\u5408\u3001 @Alternative \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u65b9\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\uff08ProductionBean\uff09\u3002\n\u3053\u3053\u3067 beans.xml \u3092\u4f5c\u6210\u3057\u3001 <alternatives> \u306e <class> \u30bf\u30b0\u3067 @Alternative \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30d3\u30fc\u30f3\u306e FQCN \u3092\u6307\u5b9a\u3059\u308b\u3002\n\u3059\u308b\u3068\u3001\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u30d3\u30fc\u30f3\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n@Priority \u3067\u5207\u308a\u66ff\u3048\u308b\nbeans.xml \u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3001 @Priority \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u30b3\u30fc\u30c9\u4e0a\u3067\u9806\u5e8f\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\u5b9f\u88c5\n\nDefaultBean.java\npackage sample.cdi.bean.alternative.priority;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative @Priority(10)\npublic class DefaultBean implements MyInterface{\n}\n\n\n\nPluginBean.java\npackage sample.cdi.bean.alternative.priority;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative @Priority(100)\npublic class PluginBean implements MyInterface {\n}\n\n\n\nPriorityEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.priority.MyInterface;\n\n@Stateless\npublic class PriorityEjb {\n    @Inject\n    private MyInterface obj;\n\n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = PluginBean\n\n\n\u8aac\u660e\n\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u305d\u308c\u305e\u308c @Alternative \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001\u3055\u3089\u306b @Priority \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n@Priority \u306e value \u306b\u6e21\u3057\u305f\u6574\u6570\u5024\u304c \u5927\u304d\u3044\u65b9 \u304c\u3001\u5b9f\u884c\u6642\u306b\u63a1\u7528\u3055\u308c\u308b\u3002\njar \u306e\u4e2d\u306b\u542b\u307e\u308c\u3066\u3044\u3066\u3082\u6709\u52b9\u306a\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d3\u30fc\u30f3\u306e\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u3092\u4f4e\u3081\u306b\u3057\u3066\u304a\u304d\u3001 jar \u306b\u542b\u307e\u308c\u308b\u30d3\u30fc\u30f3\u3092\u305d\u308c\u3088\u308a\u9ad8\u304f\u8a2d\u5b9a\u3057\u3066\u304a\u3051\u3070\u3001 jar \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u5b9f\u88c5\u306e\u5207\u308a\u66ff\u3048\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n@Specializes \u3067\u9650\u5b9a\u5b50\u4ed8\u304d\u306e\u30d3\u30fc\u30f3\u3082\u307e\u3068\u3081\u3066\u5dee\u3057\u66ff\u3048\u308b\n\n\u9650\u5b9a\u5b50\u304c\u4f7f\u7528\u3055\u308c\u305f\u5834\u5408\u306e\u554f\u984c\u70b9\n@Alternative \u3060\u3051\u3092\u4f7f\u3063\u305f\u5dee\u3057\u66ff\u3048\u306f\u3001\u9650\u5b9a\u5b50\u3054\u3068\u306b\u5b9a\u7fa9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\u4f8b\u3048\u3070\u3002\u3002\u3002\n\nDefaultBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class DefaultBean implements MyInterface {\n}\n\n\n\nAlternativeBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative @Priority(10)\npublic class AlternativeBean implements MyInterface {\n}\n\n\n\nSpecializeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.priority.specialize.MyInterface;\n\n@Stateless\npublic class SpecializeEjb {\n    @Inject\n    private MyInterface obj;\n\n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n    }\n}\n\n\nMyInterface \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5b9f\u88c5\u3067\u3042\u308b DefaultBean \u3068\u3001\u5dee\u3057\u66ff\u3048\u7528\u306e\u5b9f\u88c5\u3067\u3042\u308b AlternativeBean \u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u308c\u3092\u52d5\u304b\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = AlternativeBean\n\n\nAlternativeBean \u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u3053\u3067\u3001\u9650\u5b9a\u5b50 @MyQualifier \u3092\u4f7f\u7528\u3057\u305f\u65b0\u3057\u3044\u30d3\u30fc\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3068\u3059\u308b\u3002\n\nQualifiedBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier\npublic class QualifiedBean implements MyInterface {\n}\n\n\n\nSpecializeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.priority.specialize.MyInterface;\n+ import sample.cdi.bean.alternative.priority.specialize.MyQualifier;\n\n@Stateless\npublic class SpecializeEjb {\n    @Inject\n    private MyInterface obj;\n+   @Inject @MyQualifier\n+   private MyInterface qualified;\n\n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n+       System.out.println(\"qualified.class = \" + qualified.getClass().getSimpleName());\n    }\n}\n\n\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = AlternativeBean\n\u60c5\u5831:   qualified.class = QualifiedBean\n\n\n@MyQualifier \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u65b9\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5b9f\u88c5\uff08QualifiedBean\uff09\u304c\u9069\u7528\u3055\u308c\u3001 AlternativeBean \u306b\u306f\u5dee\u3057\u66ff\u308f\u3063\u3066\u3044\u306a\u3044\u3002\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u5358\u7d14\u306a\u624b\u6bb5\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5dee\u3057\u66ff\u3048\u7528\u306e\u30d3\u30fc\u30f3\u3092\u65b0\u898f\u306b\u4f5c\u6210\u3059\u308b\u3068\u3044\u3046\u65b9\u6cd5\u304c\u3042\u308b\u3002\n\nQualifiedAlternativeBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @MyQualifier @Alternative @Priority(10)\npublic class QualifiedAlternativeBean implements MyInterface {\n}\n\n\n\u3053\u308c\u3067\u3001\u5b9f\u884c\u7d50\u679c\u306f\u6b21\u306e\u3088\u3046\u306b\u5909\u5316\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = AlternativeBean\n\u60c5\u5831:   qualified.class = QualifiedAlternativeBean\n\n\n\u4e00\u5fdc\u5dee\u3057\u66ff\u3048\u308b\u3053\u3068\u306f\u3067\u304d\u305f\u3002\n\u3057\u304b\u3057\u3001\u3053\u306e\u65b9\u6cd5\u3060\u3068\u9650\u5b9a\u5b50\u304c\u5897\u3048\u308b\u305f\u3073\u306b\u5dee\u3057\u66ff\u3048\u7528\u306e\u30d3\u30fc\u30f3\u3092\u8ffd\u52a0\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u304b\u306a\u308a\u30a4\u30b1\u3066\u306a\u3044\u3002\n\u305d\u3053\u3067\u3001\u9650\u5b9a\u5b50\u4ed8\u304d\u306e\u30d3\u30fc\u30f3\u3082\u4e00\u62ec\u3067\u5dee\u3057\u66ff\u3048\u308b\u65b9\u6cd5\u3068\u3057\u3066\u3001 @Specializes \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n@Specializes \u3067\u5dee\u3057\u66ff\u3048\u308b\n\u5b9f\u88c5\nAlternativeBean \u3068 QualifiedAlternariveBean \u306f\u524a\u9664\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30d3\u30fc\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\nimport javax.enterprise.inject.Specializes;\n\n@Dependent @Alternative @Priority(10) @Specializes @MyQualifier\npublic class SpecializedQualifiedBean extends DefaultBean {\n}\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = SpecializedQualifiedBean\n\u60c5\u5831:   qualified.class = SpecializedQualifiedBean\n\n\n\u9650\u5b9a\u5b50\u3042\u308a\u306a\u3057\u3001\u4e21\u65b9\u304c\u5dee\u3057\u66ff\u308f\u3063\u3066\u3044\u308b\u3002\n\u8aac\u660e\n\n\n@Specializes \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u30af\u30e9\u30b9\u306f\u3001\u5dee\u3057\u66ff\u3048\u5143\u3068\u306a\u308b\u30af\u30e9\u30b9\u3092 extends \u3059\u308b\u3088\u3046\u306b\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002\n\u9650\u5b9a\u5b50\u4ed8\u304d\u306e\u30d3\u30fc\u30f3\u3092\u5dee\u3057\u66ff\u3048\u305f\u3044\u5834\u5408\u306f\u3001\u305d\u306e\u9650\u5b9a\u5b50\u3092 @Specializes \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u306b\u3082\u8a2d\u5b9a\u3059\u308b\u3002\n\n\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001\u30ed\u30ae\u30f3\u30b0\u306a\u3069\u306e\u6a2a\u65ad\u7684\u95a2\u5fc3\u4e8b\u3092\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u304b\u3089\u5206\u96e2\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u57fa\u672c\uff08beans.xml \u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\uff09\n\u5b9f\u88c5\n\nMyIntercept.java\npackage sample.cdi.bean.interceptor;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.interceptor.InterceptorBinding;\n\n@InterceptorBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface MyIntercept {\n}\n\n\n\nMyInterceptor.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.interceptor.AroundInvoke;\nimport javax.interceptor.Interceptor;\nimport javax.interceptor.InvocationContext;\n\n@Interceptor\n@MyIntercept\npublic class MyInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n\n        System.out.println(\"before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed\");\n\n        return result;\n    }\n}\n\n\n\nHoge.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class Hoge {\n\n    @MyIntercept\n    public void method() {\n        System.out.println(\"Hoge#method()\");\n    }\n}\n\n\n\nInterceptorEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.interceptor.Hoge;\n\n@Stateless\npublic class InterceptorEjb {\n    @Inject\n    private Hoge hoge;\n\n    public void execute() {\n        this.hoge.method();\n    }\n}\n\n\n\nbeans.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd\"\n       bean-discovery-mode=\"annotated\">\n\n  <interceptors>\n    <class>sample.cdi.bean.interceptor.MyInterceptor</class>\n  </interceptors>\n</beans>\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   before proceed\n\u60c5\u5831:   Hoge#method()\n\u60c5\u5831:   after proceed\n\n\n\u8aac\u660e\n\nMyIntercept.java\n@InterceptorBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface MyIntercept {\n\n\n\n\u307e\u305a\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n@InterceptorBinding \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u306a\u308b\u3002\n\n\nMyInterceptor.java\n@Interceptor\n@MyIntercept\npublic class MyInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n\n        System.out.println(\"before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed\");\n\n        return result;\n    }\n}\n\n\n\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u672c\u4f53\u306f\u3001 @Interceptor \u3068\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\u51e6\u7406\u672c\u4f53\u306f\u3001 @AroundeInvoke \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u306b\u8a18\u8ff0\u3059\u308b\u3002\n\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u6b21\u306e\u3088\u3046\u306a\u30b7\u30b0\u30cd\u30c1\u30e3\u306b\u306a\u308b\u3088\u3046\u306b\u4f5c\u6210\u3059\u308b\u3002\n\n\n\u5f15\u6570\u306b InvocationContext \u3092\u53d7\u3051\u53d6\u308b\u3002\n\u623b\u308a\u5024\u306e\u578b\u3092 Object \u306b\u3059\u308b\u3002\n\nException \u3092 throws \u53e5\u306b\u5ba3\u8a00\u3059\u308b\u3002\n\n\n\n\nHoge.java\npublic class Hoge {\n\n    @MyIntercept\n    public void method() {\n        System.out.println(\"Hoge#method()\");\n    }\n\n\n\n\u5b9f\u969b\u306b\u4f7f\u3046\u3068\u304d\u306f\u3001\u30e1\u30bd\u30c3\u30c9\u307e\u305f\u306f\u30af\u30e9\u30b9\u306b\u5bfe\u3057\u3066\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u30af\u30e9\u30b9\u306b\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u5bfe\u8c61\u306b\u306a\u308b\u3002\n\n\nbeans.xml\n  <interceptors>\n    <class>sample.cdi.bean.interceptor.MyInterceptor</class>\n  </interceptors>\n\n\n\n\u6700\u5f8c\u306b\u3001 beans.xml \u306b <interceptors> \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u30af\u30e9\u30b9\u3092\u767b\u9332\u3059\u308b\u3002\n\n<class> \u30bf\u30b0\u306f\u8907\u6570\u6307\u5b9a\u53ef\u80fd\u3002\n\u8907\u6570\u306e\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u304c\uff11\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057\u3066\u9069\u7528\u3055\u308c\u308b\u5834\u5408\u3001 <class> \u30bf\u30b0\u3067\u5217\u6319\u3057\u305f\u9806\u756a\u3067\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\n\n@Priority \u3092\u4f7f\u3063\u3066\u9069\u7528\u9806\u5e8f\u3092\u6307\u5b9a\u3059\u308b\n@Priority \u3092\u4f7f\u7528\u3059\u308c\u3070\u3001 beans.xml \u306e\u8a18\u8ff0\u304c\u4e0d\u8981\u306b\u306a\u308b\u3002\n\u5b9f\u88c5\n\nMyInterceptor.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.annotation.Priority;\nimport javax.interceptor.AroundInvoke;\nimport javax.interceptor.Interceptor;\nimport javax.interceptor.InvocationContext;\n\n@Interceptor\n@MyIntercept\n+ @Priority(10)\npublic class MyInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n\n        System.out.println(\"before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed\");\n\n        return result;\n    }\n}\n\n\n\nMyInterceptor2.java\n@Interceptor\n@MyIntercept\n@Priority(11)\npublic class MyInterceptor2 {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n\n        System.out.println(\"before proceed 2\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed 2\");\n\n        return result;\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   before proceed\n\u60c5\u5831:   before proceed 2\n\u60c5\u5831:   Hoge#method()\n\u60c5\u5831:   after proceed 2\n\u60c5\u5831:   after proceed\n\n\n\u8aac\u660e\n\n\n@Priority \u3067\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 value \u306b\u512a\u5148\u9806\u4f4d\u3092\u8868\u3059\u6574\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\u6570\u5024\u304c\u5c0f\u3055\u3044\u65b9\u304c\u5148\u306b\u9069\u7528\u3055\u308c\u308b\u3002\n\u30de\u30a4\u30ca\u30b9\u5024\u3082\u53ef\u3002\n\n@Priority \u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u3001 beans.xml \u306e\u8a18\u8ff0\u306f\u4e0d\u8981\u306b\u306a\u308b\u3002\n\n\n\u7279\u5b9a\u306e\u30e1\u30bd\u30c3\u30c9\u3060\u3051\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u306b\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5c5e\u6027\u3092\u4fdd\u3064\u5834\u5408\u3001\u305d\u306e\u5c5e\u6027\u3092\u542b\u3081\u3066\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u9069\u7528\u304c\u6c7a\u5b9a\u3055\u308c\u308b\u3002\n\u3053\u308c\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u7279\u5b9a\u306e\u30e1\u30bd\u30c3\u30c9\u3060\u3051\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3067\u304d\u308b\u3002\n\n\u5b9f\u88c5\n\n\nOptionalIntercept.java\npackage sample.cdi.bean.interceptor;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.interceptor.InterceptorBinding;\n\n@InterceptorBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface OptionalIntercept {\n    boolean value() default true;\n}\n\n\n\nOptionalInterceptor.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.annotation.Priority;\nimport javax.interceptor.AroundInvoke;\nimport javax.interceptor.Interceptor;\nimport javax.interceptor.InvocationContext;\n\n@Interceptor\n@OptionalIntercept(true)\n@Priority(100)\npublic class OptionalInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n\n        System.out.println(\"[OptionalInterceptor] before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"[OptionalInterceptor] after proceed\");\n\n        return result;\n    }\n}\n\n\n\nFuga.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\n@OptionalIntercept\npublic class Fuga {\n\n    public void method1() {\n        System.out.println(\"method1\");\n    }\n\n    @OptionalIntercept(false)\n    public void method2() {\n        System.out.println(\"method2\");\n    }\n}\n\n\n\nInterceptorEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.interceptor.Fuga;\n\n@Stateless\npublic class InterceptorEjb {\n    @Inject\n    private Fuga fuga;\n\n    public void optional() {\n        this.fuga.method1();\n        this.fuga.method2();\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   method1\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n\n\u60c5\u5831:   method2\n\n\n\u8aac\u660e\n\nOptionalIntercept.java\npublic @interface OptionalIntercept {\n    boolean value() default true;\n}\n\n\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306b boolean \u578b\u306e value \u3092\u8ffd\u52a0\u3057\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u3057\u3066 true \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n\nOptionalInterceptor.java\n@Interceptor\n@OptionalIntercept(true)\n@Priority(100)\npublic class OptionalInterceptor {\n\n\n\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u65b9\u306b\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3068\u304d\u306b\u3001\u5024\u306b true \u3092\u6307\u5b9a\u3059\u308b\uff08\u7701\u7565\u53ef\uff09\u3002\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001 value \u306b true \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306b\u9650\u308a\u3001\u3053\u306e\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\nFuga.java\n@Dependent\n@OptionalIntercept\npublic class Fuga {\n\n    public void method1() {\n        System.out.println(\"method1\");\n    }\n\n    @OptionalIntercept(false)\n    public void method2() {\n        System.out.println(\"method2\");\n    }\n\n\n\n\nFuga \u30af\u30e9\u30b9\u306f\u3001\u30af\u30e9\u30b9\u81ea\u4f53\u304c @OptionalIntercept \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\u3088\u3063\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\u3057\u304b\u3057\u3001 method2() \u306f @OptionalIntercept(false) \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u9069\u7528\u5bfe\u8c61\u5916\u306b\u306a\u308b\u3002\n\n\u7279\u5b9a\u306e\u5c5e\u6027\u306f\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u308b\u304b\u3069\u3046\u304b\u306e\u5224\u5b9a\u306b\u4f7f\u7528\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u3001\u5c5e\u6027\u3092 @Nonbinding \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\nOptionalIntercept.java\npublic @interface OptionalIntercept {\n-   boolean value() default true;\n+   @Nonbinding boolean value() default true;\n}\n\n\n\n@Stereotype \u3067\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u307e\u3068\u3081\u308b\n\u300c\u8907\u6570\u306e\u30af\u30e9\u30b9\u306b\u540c\u3058\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u3044\u304f\u3064\u3082\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u300d\n\u306a\u3093\u3066\u3053\u3068\u306b\u306a\u308b\u3068\u3001\u6bce\u56de\u8a2d\u5b9a\u3059\u308b\u306e\u3082\u9762\u5012\u3060\u3057\u3001\u7d44\u307f\u5408\u308f\u305b\u304c\u5909\u66f4\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u4fee\u6b63\u3082\u5927\u5909\u306b\u306a\u308b\u3002\n\u305d\u3046\u3044\u3046\u5834\u5408\u306f\u3001 @Stereotype \u3067\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u307e\u3068\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u5b9f\u88c5\n\nMyStereotype.java\npackage sample.cdi.bean.stereotype;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.enterprise.context.RequestScoped;\nimport javax.enterprise.inject.Stereotype;\nimport sample.cdi.bean.interceptor.OptionalIntercept;\n\n@Stereotype\n@RequestScoped\n@OptionalIntercept\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyStereotype {\n}\n\n\n\u203bOptionalIntercept \u306f\u3001 \u4ee5\u524d \u4f5c\u3063\u305f\u81ea\u4f5c\u306e\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3002\n\nHoge.java\npackage sample.cdi.bean.stereotype;\n\n@MyStereotype\npublic class Hoge {\n\n    public void method() {\n        System.out.println(\"Hoge.hash = \" + hashCode());\n    }\n}\n\n\n\nStereotypeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.stereotype.Hoge;\n\n@Stateless\npublic class StereotypeEjb {\n    @Inject\n    private Hoge hoge;\n\n    public void execute() {\n        this.hoge.method();\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   Hoge.hash = 2111292230\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   Hoge.hash = 1615190599\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   Hoge.hash = 1861411388\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n\n\n\u8aac\u660e\n\nMyStereotype.java\n@Stereotype\n@RequestScoped\n@OptionalIntercept\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyStereotype {\n\n\n\n\u3072\u3068\u307e\u3068\u3081\u306b\u3057\u305f\u3044\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068 @Stereotype \u3092\u3001\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\uff08@MyStereotype\uff09\u3002\n\u3059\u308b\u3068\u3001\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3060\u3051\u3067\u3001\u3072\u3068\u307e\u3068\u3081\u306b\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n\u4f8b\u3067\u306f\u3001 @RequestScoped \u3068 @OptionalIntercept \u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3002\n\n\n\n\n\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\n\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u3068\u306f\u3001\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u306e\u3053\u3068\u3002\nCDI \u306b\u306f\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u3092\u7c21\u5358\u306b\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u306b\u3064\u3044\u3066\u306f\u3001\n\nDecorator \u30d1\u30bf\u30fc\u30f3 - Wikipedia\n12. Decorator \u30d1\u30bf\u30fc\u30f3 | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)\n\n\u3053\u306e\u8fba\u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\u3053\u308c\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u65e2\u5b58\u306e CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u5bfe\u3057\u3066\u3001\u67d4\u8edf\u306a\u6a5f\u80fd\u62e1\u5f35\u3092\u65bd\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u5b9f\u88c5\n\nHoge.java\npackage sample.cdi.bean.decorator;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class Hoge implements MyInterface {\n\n    @Override\n    public void method() {\n        System.out.println(\"Hoge#method1()\");\n    }\n}\n\n\n\nMyDecorator1.java\npackage sample.cdi.bean.decorator;\n\nimport javax.annotation.Priority;\nimport javax.decorator.Decorator;\nimport javax.decorator.Delegate;\nimport javax.inject.Inject;\n\n@Decorator @Priority(100)\npublic class MyDecorator1 implements MyInterface {\n    @Inject @Delegate\n    private MyInterface delegate;\n\n    @Override\n    public void method() {\n        System.out.println(\"my decorator 1\");\n        this.delegate.method();\n    }\n}\n\n\n\nMyDecorator2.java\npackage sample.cdi.bean.decorator;\n\nimport javax.annotation.Priority;\nimport javax.decorator.Decorator;\nimport javax.decorator.Delegate;\nimport javax.inject.Inject;\n\n@Decorator @Priority(101)\npublic class MyDecorator2 implements MyInterface {\n    @Inject @Delegate\n    private MyInterface delegate;\n\n    @Override\n    public void method() {\n        System.out.println(\"my decorator 2\");\n        this.delegate.method();\n    }\n}\n\n\n\nDecoratorEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.decorator.MyInterface;\n\n@Stateless\npublic class DecoratorEjb {\n    @Inject\n    private MyInterface obj;\n\n    public void execute() {\n        this.obj.method();\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   my decorator 1\n\u60c5\u5831:   my decorator 2\n\u60c5\u5831:   Hoge#method1()\n\n\n\u8aac\u660e\n\nMyDecorator1.java\n@Decorator @Priority(100)\npublic class MyDecorator1 implements MyInterface {\n\n\n\n\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u3092\u9069\u7528\u3059\u308b\u5bfe\u8c61\u3068\u306a\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3059\u308b\u5f62\u3067\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u306e\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u3053\u306e\u30af\u30e9\u30b9\u3092 @Decorator \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n@Priority \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u3092\u6709\u52b9\u306b\u3067\u304d\u308b\u3002\n\u540c\u3058\u30d3\u30fc\u30f3\u306b\u8907\u6570\u306e\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u305f\u5834\u5408\u3001 value \u306e\u5024\u304c\u5c0f\u3055\u3044\u307b\u3046\u304c\u5148\u306b\u9069\u7528\u3055\u308c\u308b\u3002\n\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u5834\u5408\u3068\u540c\u3058\u3067\u3001 beans.xml \u3092\u4f7f\u3063\u3066\u9806\u5e8f\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\nbeans.xml \u3067\u5b9a\u7fa9\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n\nbeans.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd\"\n       bean-discovery-mode=\"annotated\">\n\n  <decorators>\n    <class>sample.cdi.bean.decorator.MyDecorator1</class>\n    <class>sample.cdi.bean.decorator.MyDecorator2</class>\n  </decorators>\n</beans>\n\n\n\n\u4e0a\u304b\u3089\u9806\u756a\u306b\u9069\u7528\u3055\u308c\u308b\u3002\n\n\nMyDecorator1.java\npublic class MyDecorator1 implements MyInterface {\n    @Inject @Delegate\n    private MyInterface delegate;\n\n\n\n\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u306b\u306f\u3001 Delegate Injection Potint \u3092\u5b9a\u7fa9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\nDelegate Injection Point \u3068\u306f\u3001\u30c7\u30b3\u30ec\u30fc\u30c8\u5bfe\u8c61\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u5834\u6240\u306e\u3053\u3068\u3067\u3001 @Inject \u3068 @Delegate \u3092\u4f7f\u3063\u3066\u5ba3\u8a00\u3059\u308b\u3002\n\u4f8b\u3067\u306f\u30d5\u30a3\u30fc\u30eb\u30c9\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u304c\u3001\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u30e1\u30bd\u30c3\u30c9\u3084\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u306e\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3082\u53ef\u80fd\u3002\n\n\nMyDecorator1.java\n    @Override\n    public void method() {\n        System.out.println(\"my decorator 1\");\n        this.delegate.method();\n    }\n\n\n\n\u6700\u5f8c\u306b\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u3067 Delegate Injection Point \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u30c7\u30b3\u30ec\u30fc\u30c8\u5bfe\u8c61\u306e\u5b9f\u88c5\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u30a4\u30d9\u30f3\u30c8\n\u30a4\u30d9\u30f3\u30c8\u3068\u306f\u3001 CDI \u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3001\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u306e\u3053\u3068\u3002\n\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u30d1\u30bf\u30fc\u30f3\u306b\u3064\u3044\u3066\u306f\u3001\n\nObserver \u30d1\u30bf\u30fc\u30f3 - Wikipedia\n\u5909\u614b\u3067\u5b66\u3076Observer\u30d1\u30bf\u30fc\u30f3 - \u88cf\u7d19\n\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306e\u3053\u3068\u3002\n\n\u57fa\u672c\n\u5b9f\u88c5\n\nMyEvent.java\npackage sample.cdi.bean.event;\n\npublic class MyEvent {\n    private String name;\n\n    public MyEvent(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"MyEvent{\" + \"name=\" + name + '}';\n    }\n}\n\n\n\nMyObserver.java\npackage sample.cdi.bean.event;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.event.Observes;\n\n@Dependent\npublic class MyObserver {\n\n    public void notifyMyEvent(@Observes MyEvent event) {\n        System.out.println(\"event = \" + event);\n    }\n}\n\n\n\nEventEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.event.Event;\nimport javax.inject.Inject;\nimport sample.cdi.bean.event.MyEvent;\n\n@Stateless\npublic class EventEjb {\n    @Inject\n    private Event<MyEvent> event;\n\n    public void execute() {\n        this.event.fire(new MyEvent(\"Hello CDI Event!!\"));\n    }\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   event = MyEvent{name=Hello CDI Event!!}\n\n\n\u8aac\u660e\n\n\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3068\u304d\u306f\u3001\u5927\u304d\u304f\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u8981\u7d20\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\n\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08MyEvent\uff09\u3002\n\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\uff08MyObserver\uff09\u3002\n\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u7528\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08Event\uff09\u3002\n\n\n\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u4efb\u610f\u306e Java \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5229\u7528\u3067\u304d\u308b\u3002\n\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u6b21\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u4f5c\u6210\u3067\u304d\u308b\u3002\n\n\n\u5f15\u6570\u306b\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d7\u3051\u53d6\u308b\u3002\n\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c @Observes \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\n\n\n\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u7528\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001 @Inject \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u53d6\u5f97\u3059\u308b\u3002\n\n\n\u578b\u5f15\u6570\u306b\u306f\u3001\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u578b\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nEvent#fire() \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3055\u308c\u308b\u3068\u3001\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n\n\n\n\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n\nMyObserver.java\npackage sample.cdi.bean.event;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.event.Observes;\nimport javax.enterprise.inject.spi.EventMetadata;\n\n@Dependent\npublic class MyObserver {\n\n-   public void notifyMyEvent(@Observes MyEvent event) {\n+   public void notifyMyEvent(@Observes MyEvent event, EventMetadata metadata) {\n        System.out.println(\"event = \" + event);\n+       System.out.println(metadata.getInjectionPoint().getMember());\n    }\n}\n\n\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   event = MyEvent{name=Hello CDI Event!!}\n\u60c5\u5831:   private javax.enterprise.event.Event sample.cdi.ejb.EventEjb.event\n\n\n\n\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u5f15\u6570\u306b EventMetadata \u3092\u8ffd\u52a0\u3059\u308b\u3068\u3001\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3057\u305f\u5834\u6240\u306e\u60c5\u5831\u306a\u3069\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n\n\u305d\u306e\u4ed6\u306e\u4f7f\u3044\u65b9\n\u3053\u3061\u3089\u3092\u53c2\u7167\u3002\n\n\u53c2\u8003\n\nJSR-000346 Contexts and Dependency Injection for Java EE 1.1 Final Release for Evaluation\nJava Platform, Enterprise Edition: The Java EE Tutorial Release 7 - Contents\nApache DeltaSpike 1.0 | \u306a\u308b\u307b\u3069\uff01\u30b6\u30fbWeld\nSeam\u306e\u4eca\u5f8c\u306b\u3064\u3044\u3066\u306e\u767a\u8868 \u2013 DeltaSpike\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a95\u751f\u306e\u7406\u7531 | \u306a\u308b\u307b\u3069\uff01\u30b6\u30fbWeld\nJBoss Seam\u3068Apache DeltaSpike\u306e\u4eca\u5f8c\nseam - Is Seam3 and Weld CDI the same thing? - Stack Overflow\nIntroduction to JBoss Seam\nJava Day Tokyo 2015 \u306e\u632f\u308a\u8fd4\u308a - Programming Studio\nEJB and CDI Alignment and Strategy - 2-4.pdf\nCDI Essential Recipes at Java Day Tokyo 2015\nTOTD #161: Java EE 6 CDI Qualifiers explained - @Default, @Any, @New, @Named (Arun Gupta, Miles to go ...)\nJava EE 6: Understanding Contexts and Dependency Injection (CDI), Part 2 (Nishigaya's Weblog)\nChapter 4. Dependency injection and programmatic lookup\n\u901f\u5831\uff1aCDI 2.0 \u306e JSR Review \u304c\u958b\u59cb\u3055\u308c\u307e\u3057\u305f - GlassFish Japan\nCDI\u306b\u3088\u308b\u30c7\u30b3\u30ec\u30fc\u30bf - Challenge Java EE !\n\n[\u74b0\u5883\u69cb\u7bc9](http://qiita.com/opengl-8080/items/aeda0d8bad42af3113bd)\n\n[\u30b3\u30fc\u30c9](https://github.com/opengl8080-javaee-samples/cdi)\n\n#CDI \u3068\u306f\nContexts and Dependency Injection \u306e\u7565\u3002\nJava EE 7 \u306b\u306f ver 1.1 \u304c\u542b\u307e\u308c\u3066\u3044\u308b\u3002\nJSR \u306f [346][1]\u3002\n\nDI \uff08\u4f9d\u5b58\u6027\u306e\u6ce8\u5165\uff09\u306b\u52a0\u3048\u3066\u3001\u7ba1\u7406\u3057\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b9\u30b3\u30fc\u30d7\u306e\u7ba1\u7406\u307e\u3067\u884c\u3063\u3066\u304f\u308c\u308b\u3002\n\n##CDI \u8a95\u751f\u306e\u7d4c\u7def\u3068 JBoss Seam \u306e\u5909\u9077\nCDI \u306f\u3001 JBoss \u304c\u63d0\u4f9b\u3057\u3066\u3044\u305f\u72ec\u81ea\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3042\u308b Seam \u304c\u524d\u8eab\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\nSeam \u306f\u65e5\u672c\u8a9e\u3067\u300c\u7d99\u304e\u76ee\u300d\u3068\u3044\u3046\u610f\u5473\u3002\nJava EE 5 \u306e\u9803\u306e JSF \u3068 EJB \u3092\u30b7\u30fc\u30e0\u30ec\u30b9\u306b\u9023\u643a\u3055\u305b\u308b\u3053\u3068\u3092\u76ee\u7684\u306b\u4f5c\u3089\u308c\u305f\u306e\u304c\u3001\u3053\u306e Seam \u3068\u3044\u3046\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\n\u3053\u306e Seam \u306e\u4e2d\u3067\u3001 DI \u3084\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u306e\u7ba1\u7406\u3092\u62c5\u3063\u3066\u3044\u305f\u30b3\u30a2\u306e\u90e8\u5206\u304c\u62bd\u51fa\u3055\u308c\u3001 JSR \u3068\u3057\u3066\u6a19\u6e96\u5316\u3055\u308c\u305f\u3082\u306e\u304c CDI 1.0 \uff08[JSR299][2]\uff09\u306b\u306a\u308b\u3002\n\u53c2\u7167\u5b9f\u88c5\u306f [Weld][3] \u3067\u3001 Red Hat \u306b\u3088\u3063\u3066\u958b\u767a\u3055\u308c\u3066\u3044\u308b\u3002\n\nJSR299 \u306f Java EE 6 \u306b\u53d6\u308a\u8fbc\u307e\u308c\u3001\u6a19\u6e96\u4ed5\u69d8\u3068\u306a\u3063\u305f\u3002\n\n\u30b3\u30a2\u90e8\u5206\u304c\u6a19\u6e96\u4ed5\u69d8\u3068\u3057\u3066 EE \u306b\u53d6\u308a\u8fbc\u307e\u308c\u305f\u3042\u3068\u3001 Seam \u306f CDI \u306e\u62e1\u5f35\u6a5f\u80fd\u3092\u63d0\u4f9b\u3059\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u3057\u3066\u958b\u767a\u3055\u308c\u308b\u3053\u3068\u306b\u306a\u3063\u305f\uff08Seam 3\uff09\u3002\n\u3057\u304b\u3057\u3001\u540c\u3058\u3088\u3046\u306b CDI \u3092\u62e1\u5f35\u3059\u308b\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u3001\u4ed6\u306b\u3082\u5b58\u5728\u3057\u3066\u3044\u305f\uff08[Apache MyFaces CODI][5]\u3001[CDISource][6]\uff09\u3002\n\n\u305b\u3063\u304b\u304f CDI \u3068\u3044\u3046\u5f62\u3067\u4ed5\u69d8\u3092\u4e00\u672c\u5316\u3057\u305f\u306e\u306b\u3001\u3053\u306e\u307e\u307e\u3060\u3068\u7d50\u5c40\u307e\u305f\u5206\u5c90\u304c\u9032\u3093\u3067\u3044\u304f\u3053\u3068\u306b\u306a\u308b\u3002\n\u3053\u306e\u3053\u3068\u3092\u5371\u60e7\u3057\u305f\u5404\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306f\u3001\u3053\u308c\u3089\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\uff11\u3064\u306b\u307e\u3068\u3081\u3001\u65b0\u3057\u304f [Apache DeltaSpike][4] \u3068\u3044\u3046 Apache \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\n\u73fe\u5728\u306f\u3001\u3053\u306e Apache DeltaSpike \u3068\u3044\u3046\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067 CDI \u306e\u62e1\u5f35\u6a5f\u80fd\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\uff08\u4f8b\u3048\u3070\u3001 EE 6 \u74b0\u5883\u3067\u3082 EE 7 \u76f8\u5f53\u306e\u6a5f\u80fd `@Transactional` \u3068\u304b\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u62e1\u5f35\u6a5f\u80fd\u3068\u304b\uff09\u3002\n\n##\u4eca\u5f8c\u306e CDI\n\u306f\u3058\u3081\u306f JSF \u3068 EJB \u3092\u7e4b\u3050\u76ee\u7684\u3067\u5c0e\u5165\u3055\u308c\u305f CDI \u3060\u304c\u3001 EE 7 \u3067\u306f\u305d\u308c\u4ee5\u5916\u306b\u3082\u69d8\u3005\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u9023\u643a\u3055\u305b\u308b\u5f79\u5272\u3092\u62c5\u3046\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\uff08JAX-RS\u3001Bean Validation \u306a\u3069\u306a\u3069\uff09\u3002\n\n\u4eca\u5f8c\u3082\u3001 CDI \u3092\u5229\u7528\u3057\u305f\u9023\u643a\u306e\u5f37\u5316\u306f\u9032\u3081\u3089\u308c\u3066\u3044\u304f\u3089\u3057\u3044\uff08Java Day Tokyo 2015 \u3088\u308a\uff09\u3002\n\n###JSR 365\n\u6b21\u671f CDI \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.0 \u3067\u3001 Java EE 8 \u306b\u53d6\u308a\u5165\u308c\u3089\u308c\u308b\u4e88\u5b9a\u306b\u306a\u3063\u3066\u3044\u308b\u3002\nJSR \u306f [365][7]\u3002\n\n2.0 \u3067\u306f\u3001\u5927\u304d\u304f\u6b21\u306e\u6a5f\u80fd\u5f37\u5316\u304c\u63b2\u3052\u3089\u308c\u3066\u3044\u308b\u3002\n\n1. Java SE \u74b0\u5883\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n1. Java EE \u306e\u4ed6\u306e\u4ed5\u69d8\u3068\u306e\u3001\u3055\u3089\u306a\u308b\u9023\u643a\u5f37\u5316\u3002\n\n2016 \u5e74\u306e 1Q \u3067\u30d5\u30a1\u30a4\u30ca\u30eb\u30ea\u30ea\u30fc\u30b9\u3092\u51fa\u3059\u8a08\u753b\u3067\u958b\u767a\u304c\u9032\u3093\u3067\u3044\u308b\u3089\u3057\u3044\u3002\n\n> 2.12 Please describe the anticipated schedule for the development of this specification.\n> \n> * August 2014 Expert Group formed\n> * Q1 2015 Early Draft\n> * Q3 2015 Public Review\n> * Q1 2016 Final Release \n\n#Hello World\n**\u5b9f\u88c5**\n\n```java:MyInterface.java\npackage sample.cdi.bean;\n\npublic interface MyInterface {\n    void method();\n}\n```\n\n```java:HelloBean.java\npackage sample.cdi.bean;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class HelloBean implements MyInterface {\n\n    @Override\n    public void method() {\n        System.out.println(\"Hello CDI!!\");\n    }\n}\n```\n\n```java:CdiEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.HelloBean;\n\n@Stateless\npublic class CdiEjb {\n    \n    @Inject\n    private HelloBean helloBean;\n    \n    public void hello() {\n        this.helloBean.method();\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Hello CDI!!\n```\n\n**\u8aac\u660e**\n\n- Java EE 7 \u306e\u5834\u5408\u3001CDI \u3092\u4f7f\u3044\u306f\u3058\u3081\u308b\u305f\u3081\u306b\u7279\u5225\u306a\u8a2d\u5b9a\u306a\u3069\u3092\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002\n- \u30b9\u30b3\u30fc\u30d7\u3092\u5b9a\u7fa9\u3059\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\uff08`@Dependent` \u306a\u3069\uff09\u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3068\u3001\u305d\u306e\u30af\u30e9\u30b9\u306f CDI \u30b3\u30f3\u30c6\u30ca\u306e\u7ba1\u7406\u5bfe\u8c61\u306b\u306a\u308b\u3002\n- \u30b3\u30f3\u30c6\u30ca\u306b\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u30af\u30e9\u30b9\u4e0a\u3067\u3001 `@Inject` \u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n    - EJB \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u30b3\u30f3\u30c6\u30ca\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n\n#\u57fa\u672c\n##CDI \u7ba1\u7406\u30d3\u30fc\u30f3\nCDI \u30b3\u30f3\u30c6\u30ca\u306b\u7ba1\u7406\u3055\u308c\u305f\u30af\u30e9\u30b9\u306e\u3053\u3068\u3092\u3001**CDI \u7ba1\u7406\u30d3\u30fc\u30f3** \uff08`CDI Managed Bean`\uff09\u3068\u547c\u3076\u3002\n\n###CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u6761\u4ef6\n\u30af\u30e9\u30b9\u3092\u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u6b21\u306e\u6761\u4ef6\u3092\u5168\u3066\u6e80\u305f\u3057\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n- static \u3067\u306f\u306a\u3044\u30a4\u30f3\u30ca\u30fc\u30af\u30e9\u30b9 **\u3067\u306f\u306a\u3044** \u3053\u3068\u3002\n- \u5177\u8c61\u30af\u30e9\u30b9\u3001\u307e\u305f\u306f `@Decorator` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3002\n- EJB \u3067\u306a\u3044\u3053\u3068\u3002\n- `javax.enterprise.inject.spi.Extension` \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u3066\u3044\u306a\u3044\u3002\n- \u30af\u30e9\u30b9\u307e\u305f\u306f\u3001\u305d\u306e\u30af\u30e9\u30b9\u304c\u5c5e\u3059\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u304c `@Vetoed` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u3002\n- \u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u3064\u3053\u3068\u3002\n    - \u5f15\u6570\u306a\u3057\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\n    - `@Inject` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\n\n\u307e\u3041\u3001\u8981\u306f\u666e\u901a\u306b\u5b9a\u7fa9\u3059\u308b\u30af\u30e9\u30b9\u306a\u3089\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u3060\u3051\u6ce8\u610f\u3059\u308c\u3070\u3060\u3044\u305f\u3044 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n###CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30af\u30e9\u30b9\u3092 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u3067\u304d\u308b\u3002\n\n- `@NormalScope` \u3092\u7d99\u627f\u3057\u305f\u30b9\u30b3\u30fc\u30d7\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3002\n    - `@ApplicationScoped`\n    - `@SessionScoped`\n    - `@ConversationScoped`\n    - `@RequestScoped`\n    - \u305d\u306e\u4ed6\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n- `@Dependent`\n- `@Interceptor`\n- `@Decorator`\n- `@Stereotype` \u3092\u4f7f\u3063\u305f\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\n\n##\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u65b9\u6cd5\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u306b\u306f\u3001 `@Inject` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\u307e\u305f\u3001\u5177\u4f53\u7684\u306a\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5834\u6240\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u65b9\u6cd5\u304c\u5b58\u5728\u3059\u308b\u3002\n\n- \u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u76f4\u63a5\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n- \u521d\u671f\u5316\u30e1\u30bd\u30c3\u30c9\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n- \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n\n**\u5b9f\u88c5**\n\n```java:Hoge.java\npackage sample.cdi.bean.injectpoint;\n\nimport javax.enterprise.context.Dependent;\nimport javax.inject.Inject;\n\n@Dependent\npublic class Hoge {\n    @Inject\n    private Fuga fieldInjection;\n    private Fuga initializerMethodInjection;\n    private Fuga constructorInjection;\n    \n    @Inject\n    public Hoge(Fuga fuga) {\n        System.out.println(\"constructor injection!!\");\n        this.constructorInjection = fuga;\n    }\n    \n    @Inject\n    public void setFuga(Fuga fuga) {\n        System.out.println(\"initializer method injection!!\");\n        this.initializerMethodInjection = fuga;\n    }\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + \"fieldInjection=\" + fieldInjection + \", initializerMethodInjection=\" + initializerMethodInjection + \", constructorInjection=\" + constructorInjection + '}';\n    }\n}\n```\n\n```java:Fuga.java\npackage sample.cdi.bean.injectpoint;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class Fuga {\n\n    @Override\n    public String toString() {\n        return \"Fuga{\" + this.hashCode() + \"}\";\n    }\n}\n```\n\n```java:InjectionPointEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.injectpoint.Hoge;\n\n@Stateless\npublic class InjectionPointEjb {\n    \n    @Inject\n    private Hoge hoge;\n    \n    public void execute() {\n        System.out.println(hoge);\n    }\n}\n```\n\n###\u5b9f\u884c\u7d50\u679c\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   initializer method injection!!\n\u60c5\u5831:   constructor injection!!\n\u60c5\u5831:   Hoge{fieldInjection=Fuga{311564470}, initializerMethodInjection=Fuga{1165724746}, constructorInjection=Fuga{1765497502}}\n```\n\n**\u8aac\u660e**\n\n####\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u76f4\u63a5\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n```java:Hoge.java\n@Dependent\npublic class Hoge {\n    @Inject\n    private Fuga fieldInjection;\n```\n\n- \u30d5\u30a3\u30fc\u30eb\u30c9\u3092 `@Inject` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n- \u53ef\u8996\u6027\u306f `private` \u3067\u3082\u554f\u984c\u306a\u3044\u3002\n- \u30bb\u30c3\u30bf\u30fc\u30e1\u30bd\u30c3\u30c9\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u5206\u5b9f\u88c5\u304c\u30b9\u30c3\u30ad\u30ea\u3059\u308b\u304c\u3001\u5358\u4f53\u30c6\u30b9\u30c8\u306f\u3057\u3065\u3089\u304f\u306a\u308b\u3002\n\n####\u521d\u671f\u5316\u30e1\u30bd\u30c3\u30c9\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n```java:Hoge.java\n    @Inject\n    public void setFuga(Fuga fuga) {\n        System.out.println(\"initializer method injection!!\");\n        this.initializerMethodInjection = fuga;\n    }\n```\n\n- \u30e1\u30bd\u30c3\u30c9\u3092 `@Inject` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30e1\u30bd\u30c3\u30c9\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n- \u30e1\u30bd\u30c3\u30c9\u306e\u5f15\u6570\u306b\u306f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n####\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\n```java:Hoge.java\n    @Inject\n    public Hoge(Fuga fuga) {\n        System.out.println(\"constructor injection!!\");\n        this.constructorInjection = fuga;\n    }\n```\n\n- \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092 `@Inject` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3002\n- `@Inject` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3067\u304d\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u3001\uff11\u3064\u307e\u3067\u3002\n- `@Inject` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001 CDI \u306e\u30b3\u30f3\u30c6\u30ca\u306f\u305d\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3002\n- `@Inject` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n- \u30a4\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u30d3\u30fc\u30f3\u3092\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3068\u826f\u3044\uff08\u5bfa\u7530\u3055\u3093\u63a8\u5968\uff09\u3002\n\n#\u30b9\u30b3\u30fc\u30d7\nCDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u306f\u751f\u5b58\u671f\u9593\u304c\u5b58\u5728\u3059\u308b\u3002\u3053\u308c\u3092 **\u30b9\u30b3\u30fc\u30d7** \u3068\u547c\u3076\u3002\n\n\u6a19\u6e96\u3067\u306f\u3001\u4ee5\u4e0b\u306e\u30b9\u30b3\u30fc\u30d7\u304c\u5b58\u5728\u3059\u308b\u3002\n\n|   \u30b9\u30b3\u30fc\u30d7   |    \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3     |                   \u751f\u5b58\u671f\u9593                   |\n|--------------|-----------------------|----------------------------------------------|\n| Request      | `@RequestScoped`      | \uff11\u56de \u306e HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u9593\u306e\u307f\u3002            |\n| Session      | `@SessionScoped`      | \uff11\u3064\u306e `HttpSession` \u306e\u9593\u306e\u307f\u3002              |\n| Application  | `@Application`        | Web \u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u9593\u305a\u3063\u3068\u3002           |\n| Dependent    | `@Dependent`          | \u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e\u30b9\u30b3\u30fc\u30d7\u3092\u7d99\u627f\u3059\u308b\u3002     |\n| Conversation | `@ConversationScoped` | \u30b9\u30b3\u30fc\u30d7\u306e\u958b\u59cb\u3068\u7d42\u4e86\u3092\u30d7\u30ed\u30b0\u30e9\u30de\u304c\u6307\u5b9a\u3059\u308b\u3002 |\n\n\uff11\u56de\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u4e2d\u3067\u5171\u6709\u7ba1\u7406\u3057\u305f\u3044\u30c7\u30fc\u30bf\u306a\u3069\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u3053\u308c\u307e\u3067\u306f `ThreadLocal` \u306a\u3069\u3092\u4f7f\u3063\u3066\u30c9\u30ad\u30c9\u30ad\u3057\u306a\u304c\u3089\u7ba1\u7406\u3057\u3066\u3044\u305f\u304c\u3001 `@RequestScoped` \u3092\u4f7f\u3048\u3070\u305d\u306e\u3078\u3093\u306e\u7ba1\u7406\u3092\u5168\u3066 CDI \u30b3\u30f3\u30c6\u30ca\u306b\u4efb\u305b\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u307e\u305f\u3001 `@SessionScoped` \u3092\u4f7f\u3048\u3070\u3001 `HttpSession` \u306a\u3069\u306e\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8 API \u306b\u4f9d\u5b58\u3059\u308b\u3053\u3068\u306a\u304f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u7d10\u3065\u304f\u60c5\u5831\u3092\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n##\u57fa\u672c\u52d5\u4f5c\u306e\u691c\u8a3c\n**\u5b9f\u88c5**\n\n```java:ApplicationScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\n\n@ApplicationScoped\npublic class ApplicationScopedBean {\n    @Inject\n    private SessionScopedBean sessionBean;\n    @Inject\n    private DependentBean dependentBean;\n    \n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \", sessionBean=\" + sessionBean + \", dependentBean=\" + dependentBean + \"}\";\n    }\n}\n```\n\n```java:SessionScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.enterprise.context.SessionScoped;\nimport javax.inject.Inject;\n\n@SessionScoped\npublic class SessionScopedBean implements Serializable {\n    @Inject\n    private RequestScopedBean requestBean;\n    @Inject\n    private DependentBean dependentBean;\n    \n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \", requestBean=\" + requestBean + \", dependentBean=\" + dependentBean + \"}\";\n    }\n}\n```\n\n```java:RequestScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.inject.Inject;\n\n@RequestScoped\npublic class RequestScopedBean {\n\n    @Inject\n    private DependentBean dependentBean;\n    \n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \", dependentBean=\" + dependentBean + \"}\";\n    }\n}\n```\n\n```java:DependentBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class DependentBean implements Serializable {\n\n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \"}\";\n    }\n}\n```\n\n```java:ScopeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.scope.ApplicationScopedBean;\nimport sample.cdi.bean.scope.RequestScopedBean;\nimport sample.cdi.bean.scope.SessionScopedBean;\n\n@Stateless\npublic class ScopeEjb {\n    @Inject private ApplicationScopedBean asb;\n    @Inject private SessionScopedBean ssb;\n    @Inject private RequestScopedBean rsb;\n    \n    public void execute() {\n        String msg =\n            \"application scoped : \" + asb + \"\\n\"\n          + \"session scoped : \" + ssb + \"\\n\"\n          + \"request scoped : \" + rsb + \"\\n\"\n        ;\n        \n        System.out.println(msg);\n    }\n}\n```\n\n- \u305d\u308c\u305e\u308c\u306e\u30b9\u30b3\u30fc\u30d7\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u3092\u7528\u610f\u3057\u3066\u3044\u308b\u3002\n- \u4e0a\u4f4d\u306e\u30b9\u30b3\u30fc\u30d7\u306e\u30af\u30e9\u30b9\u306b\u306f\u3001\u4e0b\u4f4d\u306e\u30b9\u30b3\u30fc\u30d7\u306e\u30af\u30e9\u30b9\u3092 `@Inject` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u3002\n- \u3055\u3089\u306b\u3001\u305d\u308c\u305e\u308c\u306b `@Dependent` \u30b9\u30b3\u30fc\u30d7\u306e\u30af\u30e9\u30b9\u3082\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u3002\n- `toString()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u81ea\u8eab\u3068\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\uff12\u56de\u30a2\u30af\u30bb\u30b9\u3002\n\u4e00\u65e6 JSESSIONID \u3092\u7834\u68c4\u3057\u3001\u518d\u5ea6\uff12\u56de\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1913631888, requestBean={this=614601466, dependentBean={this=547193526}}, dependentBean={this=1081491714}}, dependentBean={this=1339217576}}\nsession scoped : {this=1913631888, requestBean={this=614601466, dependentBean={this=547193526}}, dependentBean={this=1081491714}}\nrequest scoped : {this=614601466, dependentBean={this=547193526}}\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1913631888, requestBean={this=353608602, dependentBean={this=1738509931}}, dependentBean={this=1081491714}}, dependentBean={this=1339217576}}\nsession scoped : {this=1913631888, requestBean={this=353608602, dependentBean={this=1738509931}}, dependentBean={this=1081491714}}\nrequest scoped : {this=353608602, dependentBean={this=1738509931}}\n\n\u203b\u3053\u3053\u3067\u3001\u30d6\u30e9\u30a6\u30b6\u5074\u306e JSESSIONID \u3092\u7834\u68c4\n\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1412439363, requestBean={this=418688321, dependentBean={this=95479694}}, dependentBean={this=1792900043}}, dependentBean={this=1339217576}}\nsession scoped : {this=1412439363, requestBean={this=418688321, dependentBean={this=95479694}}, dependentBean={this=1792900043}}\nrequest scoped : {this=418688321, dependentBean={this=95479694}}\n\u60c5\u5831:   application scoped : {this=1638042708, sessionBean={this=1412439363, requestBean={this=1809844357, dependentBean={this=1876918561}}, dependentBean={this=1792900043}}, dependentBean={this=1339217576}}\nsession scoped : {this=1412439363, requestBean={this=1809844357, dependentBean={this=1876918561}}, dependentBean={this=1792900043}}\nrequest scoped : {this=1809844357, dependentBean={this=1876918561}}\n```\n\n\u3061\u3087\u3063\u3068\u898b\u3065\u3089\u3044\u306e\u3067\u3001\u8868\u306b\u307e\u3068\u3081\u308b\u3002\n\n**ApplicationScopedBean**\n\n\n| \u30ea\u30af\u30a8\u30b9\u30c8\u6570 |   `this`   | `session`  | `dependent` |\n|--------------|------------|------------|-------------|\n|            1 | 1638042708 | 1913631888 |  1339217576 |\n|            2 | 1638042708 | 1913631888 |  1339217576 |\n|            3 | 1638042708 | 1412439363 |  1339217576 |\n|            4 | 1638042708 | 1412439363 |  1339217576 |\n\n**SessionScopedBean**\n\n\n| \u30ea\u30af\u30a8\u30b9\u30c8\u6570 |   `this`   | `request`  | `dependent` |\n|--------------|------------|------------|-------------|\n|            1 | 1913631888 |  614601466 |  1081491714 |\n|            2 | 1913631888 |  353608602 |  1081491714 |\n|            3 | 1412439363 |  418688321 |  1792900043 |\n|            4 | 1412439363 | 1809844357 |  1792900043 |\n\n**RequestScopedBean**\n\n\n| \u30ea\u30af\u30a8\u30b9\u30c8\u6570 |   `this`   | `dependent` |\n|--------------|------------|-------------|\n|            1 |  614601466 |   547193526 |\n|            2 |  353608602 |  1738509931 |\n|            3 |  418688321 |    95479694 |\n|            4 | 1809844357 |  1876918561 |\n\n**\u8aac\u660e**\n\n- `@ApplicationScoped` \u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u9593\u304c\u751f\u5b58\u671f\u9593\u306a\u306e\u3067\u3001\u5e38\u306b\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5229\u7528\u3055\u308c\u308b\u3002\n    - \u3064\u307e\u308a\u3001\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308b\u3002\n- `@SessionScoped` \u306f\u3001\uff11\u3064\u306e HTTP \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u6709\u52b9\u306a\u9593\u3060\u3051\u3001\u540c\u3058\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5229\u7528\u3055\u308c\u308b\u3002\n    - \u30bb\u30c3\u30b7\u30e7\u30f3\u3054\u3068\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5207\u308a\u63db\u308f\u308b\u3002\n    - `@SessionScoped` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u306f\u3001 `Serializable` \u3092\u5b9f\u88c5\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n- `@RequestScoped` \u306f\u3001\uff11\u3064\u306e HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306b\u65b0\u3057\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u3001\u5229\u7528\u3055\u308c\u308b\u3002\n- `@Dependent` \u306f\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u5148\u3068\u540c\u3058\u30b9\u30b3\u30fc\u30d7\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n    - `SessionScopedBean` \u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u5834\u5408 `DependentBean` \u3082\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\u306b\u306a\u308b\u306e\u3067\u3001 `Serializable` \u3092\u5b9f\u88c5\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n###\u30d7\u30ed\u30ad\u30b7\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\n\u3088\u304f\u3088\u304f\u4e0a\u8a18\u306e\u8868\u3092\u898b\u308b\u3068\u3001 `this` \u306e\u30cf\u30c3\u30b7\u30e5\u5024\u306f\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u306e\u306b\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3060\u3051\u304c\u5207\u308a\u66ff\u308f\u3063\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u3065\u304f\u3002\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5ea6\u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u5dee\u3057\u66ff\u308f\u3063\u3066\u3044\u308b\u306e\u304b\u3068\u3044\u3046\u3068\u3001\u305d\u3046\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u3002\n\u5b9f\u969b\u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u672c\u7269\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u3001\u305d\u308c\u3092\u30e9\u30c3\u30d7\u3057\u305f\u30d7\u30ed\u30ad\u30b7\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u308b\u3002\n\n```java:ScopeEjb.java\n@Stateless\npublic class ScopeEjb {\n    @Inject private ApplicationScopedBean asb;\n    @Inject private SessionScopedBean ssb;\n    @Inject private RequestScopedBean rsb;\n\n    ...\n    \n    public void proxy() {\n        System.out.println(\"application scoped : \" + this.asb.getClass());\n        System.out.println(\"session scoped : \" + this.ssb.getClass());\n        System.out.println(\"request scoped : \" + this.rsb.getClass());\n    }\n}\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   application scoped : class sample.cdi.bean.scope.ApplicationScopedBean$Proxy$_$$_WeldClientProxy\n\u60c5\u5831:   session scoped : class sample.cdi.bean.scope.SessionScopedBean$Proxy$_$$_WeldClientProxy\n\u60c5\u5831:   request scoped : class sample.cdi.bean.scope.RequestScopedBean$Proxy$_$$_WeldClientProxy\n```\n\n- `@Inject` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u672c\u4f53\u3067\u306f\u306a\u304f\u30d7\u30ed\u30ad\u30b7\u306b\u306a\u308b\u3002\n- \u30d7\u30ed\u30ad\u30b7\u306f\u30e1\u30bd\u30c3\u30c9\u304c\u547c\u3070\u308c\u305f\u6642\u70b9\u3067\u5b9f\u969b\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3057\u3001\u672c\u4f53\u306e\u51e6\u7406\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u308b\u3002\n- \u3053\u306e\u4ed5\u7d44\u306e\u304a\u304b\u3052\u3067\u3001\u5e83\u3044\u30b9\u30b3\u30fc\u30d7\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3001\u72ed\u3044\u30b9\u30b3\u30fc\u30d7\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n##Conversation Scope\n`@ConversationScoped` \u306f\u3001\u30b9\u30b3\u30fc\u30d7\u306e\u958b\u59cb\u3068\u7d42\u4e86\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u6307\u5b9a\u3059\u308b\u3002\n`@RequestScoped` \u3088\u308a\u9577\u304f\u3066\u3001 `@SessionScoped` \u3088\u308a\u306f\u77ed\u3044\u30b9\u30b3\u30fc\u30d7\u304c\u307b\u3057\u3044\u5834\u5408\u306b\u5229\u7528\u3059\u308b\u3002\n\n\u4e3b\u306b\u3001 JSF \u3067\u8907\u6570\u753b\u9762\u306b\u8de8\u3063\u305f\u60c5\u5831\u306e\u7ba1\u7406\u3092\u3057\u305f\u3044\u5834\u5408\u306b\u5229\u7528\u3055\u308c\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:ConversationScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.enterprise.context.ConversationScoped;\n\n@ConversationScoped\npublic class ConversationScopedBean implements Serializable {\n\n    @Override\n    public String toString() {\n        return \"{this=\" + hashCode() + \"}\";\n    }\n}\n```\n\n```java:ScopeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.context.Conversation;\nimport javax.inject.Inject;\nimport sample.cdi.bean.scope.ConversationScopedBean;\n...\n\n@Stateless\npublic class ScopeEjb {\n    ...\n    \n    @Inject\n    private ConversationScopedBean csb;\n    @Inject\n    private Conversation conv;\n    \n    public void beginConversation() {\n        this.conv.begin();\n        System.out.println(\"begin conversation scope. cid = \" + this.conv.getId());\n        System.out.println(\"csb=\" + this.csb);\n    }\n    \n    public void conversation() {\n        System.out.println(\"cid = \" + this.conv.getId());\n        System.out.println(\"csb=\" + this.csb);\n    }\n    \n    public void endConversation() {\n        System.out.println(\"end conversation scope. cid = \" + this.conv.getId());\n        System.out.println(\"csb=\" + this.csb);\n        this.conv.end();\n    }\n}\n```\n\n`ScopeEjb` \u306e\u5404\u30e1\u30bd\u30c3\u30c9\u306b\u306f\u3001 `http://localhost:8080/cdi/scope/<\u30e1\u30bd\u30c3\u30c9\u540d>` \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3092\u958b\u304d\u3001\u307e\u305a\u306f `http://localhost:8080/cdi/scope/beginConversation` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   begin conversation scope. cid = 1\n\u60c5\u5831:   csb={this=246187740}\n```\n\n\u6b21\u306b\u3001\u540c\u3058 Web \u30d6\u30e9\u30a6\u30b6\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304b\u3089 `http://localhost:8080/cdi/scope/conversation?cid=1` \u306b\u4f55\u56de\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3088\u3046\u306b\u3059\u308b\uff09\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   cid = 1\n\u60c5\u5831:   csb={this=246187740}\n\n\u60c5\u5831:   cid = 1\n\u60c5\u5831:   csb={this=246187740}\n\n\u60c5\u5831:   cid = 1\n\u60c5\u5831:   csb={this=246187740}\n```\n\n`http://localhost:8080/cdi/scope/endConversation?cid=1` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   end conversation scope. cid = 1\n\u60c5\u5831:   csb={this=246187740}\n```\n\n\u6700\u5f8c\u306b `http://localhost:8080/cdi/scope/conversation?cid=1` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u8b66\u544a:   javax.ejb.EJBException\n      ...\nCaused by: org.jboss.weld.context.NonexistentConversationException: WELD-000321: No conversation found to restore for id 1\n      ...\n```\n\n**\u8aac\u660e**\n\n- `@ConversationScoped` \u306e\u958b\u59cb\u3068\u7d42\u4e86\u306f\u3001 `Conversation` \u306e `begin()` \u3068 `end()` \u30e1\u30bd\u30c3\u30c9\u3067\u5236\u5fa1\u3059\u308b\u3002\n    - `Conversation` \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u81ea\u4f53\u306f CDI \u306e\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u308b\u306e\u3067 `@Inject` \u3092\u4f7f\u3063\u3066\u53d6\u5f97\u3059\u308b\u3002\n- Conversation \u30b9\u30b3\u30fc\u30d7\u306b\u306f\u3001\u30b9\u30b3\u30fc\u30d7\u306e\u72b6\u614b\u304c\uff12\u7a2e\u985e\u5b58\u5728\u3059\u308b\u3002\n    - \uff11\u3064\u304c\u300c**\u4e00\u6642\u7684\uff08`transient`\uff09\u306a\u30b9\u30b3\u30fc\u30d7**\u300d\u3067\u3001\u3082\u3046\uff11\u3064\u304c\u300c**\u9577\u671f\u9593\uff08`long-running`\uff09\u6709\u52b9\u306a\u30b9\u30b3\u30fc\u30d7**\u300d\u3002\n    - `transient` \u306a\u30b9\u30b3\u30fc\u30d7\u306f\u3001 `@RequestScoped` \u3068\u540c\u3058\u3067 HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u304c\u7d42\u4e86\u3059\u308b\u3068\u7834\u68c4\u3055\u308c\u308b\u3002\n    - \u4e00\u65b9\u3001 `long-running` \u306a\u30b9\u30b3\u30fc\u30d7\u306f\u8907\u6570\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u9593\u3067\u7dad\u6301\u3055\u308c\u308b\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306f `transient` \u306a\u30b9\u30b3\u30fc\u30d7\u304c\u63a1\u7528\u3055\u308c\u308b\u3002\n- `long-running` \u306b\u3059\u308b\u305f\u3081\u306b\u306f\u3001 `Conversation#begin()` \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n- `begin()` \u30e1\u30bd\u30c3\u30c9\u3067 `long-running` \u306a\u30b9\u30b3\u30fc\u30d7\u3092\u958b\u59cb\u3059\u308b\u3068\u3001\u4e00\u610f\u306a ID \u304c\u767a\u884c\u3055\u308c\u308b\u3002\n- \u6b21\u56de\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u3068\u304d\u306b\u3001\u305d\u306e ID \u3092 `cid` \u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u5171\u306b\u30b5\u30fc\u30d0\u30fc\u306b\u9001\u308b\u3068\u3001\u524d\u56de\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u3068\u304d\u306e\u30b9\u30b3\u30fc\u30d7\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3002\n    - Conversation \u30b9\u30b3\u30fc\u30d7\u306f HTTP \u30bb\u30c3\u30b7\u30e7\u30f3\u3054\u3068\u306b\u7ba1\u7406\u3055\u308c\u308b\u3002\u3088\u3063\u3066\u3001\u5225\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u767a\u884c\u3055\u308c\u305f `cid` \u3092\u7570\u306a\u308b\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3057\u3066\u3082\u3001\u30b9\u30b3\u30fc\u30d7\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3053\u3068\u306f\u306a\u3044\u3002\n    - `cid` \u3092\u6307\u5b9a\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e `transient` \u6271\u3044\u306b\u306a\u308a\u3001\u65b0\u305f\u306a\u30b9\u30b3\u30fc\u30d7\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n    - \u4ed5\u69d8\u4e0a\u3001 `cid` \u3067\u6307\u5b9a\u3055\u308c\u306a\u304f\u306a\u3063\u305f\u904e\u53bb\u306e `long-running` \u72b6\u614b\u306e\u30b9\u30b3\u30fc\u30d7\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u4efb\u610f\u306b\u7834\u68c4\u3057\u3066\u3082\u69cb\u308f\u306a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n> 6.7.4. Conversation context lifecycle\n> \n> The container is **permitted to arbitrarily destroy any long-running conversation** that is associated\nwith no current Servlet request, in order to conserve resources.\n\n- `long-running` \u306a\u30b9\u30b3\u30fc\u30d7\u306e\u7d42\u4e86\u306f\u3001 `Conversation#end()` \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n- \u4e00\u5ea6\u7d42\u4e86\u3057\u305f `cid` \u306f\u3001\u5f53\u7136\u518d\u5229\u7528\u3067\u304d\u306a\u3044\u3002\n\n####JSF \u3067\u5229\u7528\u3057\u305f\u5834\u5408\nJSF \u3067 `@ConversationScoped` \u3092\u5229\u7528\u3057\u305f\u5834\u5408\u3001\u3053\u306e `cid` \u306e\u3084\u308a\u53d6\u308a\u304c\u81ea\u52d5\u3067\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u306a\u306e\u3067\u3001\u5b9f\u88c5\u8005\u306f\u7279\u306b `cid` \u306e\u5b58\u5728\u3092\u610f\u8b58\u3059\u308b\u5fc5\u8981\u306f\u306a\u3044\u3002\n\n#\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3068\u304d\u3068\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u51e6\u7406\u3092\u631f\u3080\n\u4f8b\u3048\u3070\u3001\u5916\u90e8\u30ea\u30bd\u30fc\u30b9\u3092\u4fdd\u6301\u3059\u308b\u30d3\u30fc\u30f3\u304c\u5b58\u5728\u3057\u305f\u3068\u3059\u308b\u3002\n\u3053\u306e\u4ed5\u7d44\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u305d\u306e\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3068\u304d\u306b\u30ea\u30bd\u30fc\u30b9\u3068\u306e\u63a5\u7d9a\u3092\u78ba\u7acb\u3055\u305b\u3001\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u63a5\u7d9a\u3092\u89e3\u653e\u3059\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3067\u304d\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:SessionScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport java.io.Serializable;\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\nimport javax.enterprise.context.SessionScoped;\n\n@SessionScoped\npublic class SessionScopedBean implements Serializable {\n    \n    @PostConstruct\n    public void postConstruct() {\n        System.out.println(\"[Session Scope] post construct : \" + hashCode());\n    }\n    \n    @PreDestroy\n    public void preDestroy() {\n        System.out.println(\"[Session Scope] pre destroy : \" + hashCode());\n    }\n}\n```\n\n```java:RequestScopedBean.java\npackage sample.cdi.bean.scope;\n\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\nimport javax.enterprise.context.RequestScoped;\n\n@RequestScoped\npublic class RequestScopedBean {\n    \n    @PostConstruct\n    public void postConstruct() {\n        System.out.println(\"[Request Scope] post construct : \" + hashCode());\n    }\n    \n    @PreDestroy\n    public void preDestroy() {\n        System.out.println(\"[Request Scope] pre destroy : \" + hashCode());\n    }\n}\n```\n\n```java:LifeCycleCallbackMethodEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport javax.servlet.http.HttpSession;\nimport sample.cdi.bean.scope.RequestScopedBean;\nimport sample.cdi.bean.scope.SessionScopedBean;\n\n@Stateless\npublic class LifeCycleCallbackMethodEjb {\n    @Inject private HttpSession session;\n    @Inject private SessionScopedBean ssb;\n    @Inject private RequestScopedBean rsb;\n    \n    public void execute() {\n        ssb.toString();\n        rsb.toString();\n        System.out.println(\"LifeCycleCallbackMethodEjb#execute()\");\n    }\n    \n    public void endSession() {\n        System.out.println(\"LifeCycleCallbackMethodEjb#endSession()\");\n        this.session.invalidate();\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `LifeCycleCallbackMethodEjb#execute()` \u304c\u5b9f\u884c\u3055\u308c\u308b URL \u306b\u4f55\u56de\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   [Session Scope] post construct : 216269762\n\u60c5\u5831:   [Request Scope] post construct : 1146100374\n\u60c5\u5831:   LifeCycleCallbackMethodEjb#execute()\n\u60c5\u5831:   [Request Scope] pre destroy : 1146100374\n\n\u60c5\u5831:   [Request Scope] post construct : 1929012709\n\u60c5\u5831:   LifeCycleCallbackMethodEjb#execute()\n\u60c5\u5831:   [Request Scope] pre destroy : 1929012709\n```\n\n`LifeCycleCallbackMethodEjb#endSession()` \u304c\u5b9f\u884c\u3055\u308c\u308b URL \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   LifeCycleCallbackMethodEjb#endSession()\n\u60c5\u5831:   [Session Scope] pre destroy : 216269762\n```\n\n**\u8aac\u660e**\n\n- `@PostConstruct` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u305f\u3068\u304d\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n- `@PreDestroy` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n##CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u521d\u671f\u5316\u51e6\u7406\u306f\u3001 `@PostConstruct` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u3067\u884c\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\n\u30b3\u30f3\u30c6\u30ca\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4f7f\u3063\u3066 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3059\u308b\u3002\n\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u308f\u3056\u308f\u3056 `@PostConstruct` \u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u521d\u671f\u5316\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u3082\u3067\u304d\u308b\u3088\u3046\u306b\u601d\u3048\u308b\u3002\n\n\u3057\u304b\u3057\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u521d\u671f\u5316\u51e6\u7406\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u66f8\u3044\u3066\u306f\u3044\u3051\u306a\u3044\u3002\n\u306a\u305c\u306a\u3089\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b9f\u884c\u3055\u308c\u305f\u6bb5\u968e\u3067\u306f\u3001\u307e\u3060\u4f9d\u5b58\u6027\u306e\u6ce8\u5165\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u53ef\u80fd\u6027\u304c\u3042\u308b\u304b\u3089\u3060\u3002\n\u3082\u3057\u3001 `@Inject` \u3067\u30d5\u30a3\u30fc\u30eb\u30c9\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u4e88\u5b9a\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5185\u3067\u4f7f\u7528\u3057\u3066\u3057\u307e\u3046\u3068\u3001\u6700\u60aa `NullPointerException` \u304c\u767a\u751f\u3059\u308b\u3002\n\n\u4e00\u65b9\u3001 `@PostConstruct` \u306f\u3001\u5168\u3066\u306e\u4f9d\u5b58\u95a2\u4fc2\u306e\u6ce8\u5165\u304c\u5b8c\u4e86\u3057\u305f\u5f8c\u3067\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u3046\u3044\u3063\u305f\u554f\u984c\u304c\u8d77\u304d\u306a\u3044\u3002\n\n\u3088\u3063\u3066\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u521d\u671f\u5316\u51e6\u7406\u306f\u3001\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u306f\u306a\u304f `@PostConstruct` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u3067\u884c\u3046\u306e\u304c\u826f\u3044\u3002\n\n#Producer \u30e1\u30bd\u30c3\u30c9\n- \u30b9\u30b3\u30fc\u30d7\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30af\u30e9\u30b9\u3092\u76f4\u63a5\u30a2\u30ce\u30c6\u30fc\u30c8\u3067\u304d\u305a\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u81ea\u52d5\u767b\u9332\u3067\u304d\u306a\u3044\u3002\n- \u540c\u3058\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8907\u6570\u751f\u6210\u3057\u3001\u30b3\u30f3\u30c6\u30ca\u306b\u767b\u9332\u3057\u305f\u3044\u3002\n\n\u3053\u3093\u306a\u5834\u5408\u306f\u3001 Producer \u30e1\u30bd\u30c3\u30c9\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n\u203b\u5f8c\u8005\u306e\u5834\u5408\u306f\u3001\u9650\u5b9a\u5b50\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n##\u57fa\u672c\n**\u5b9f\u88c5**\n\n```java:Hoge.java\npackage sample.cdi.bean.producer;\n\npublic class Hoge {\n    \n    private String name;\n    \n    public Hoge(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + \"name=\" + name + \", hash=\" + hashCode() + \"}\";\n    }\n}\n```\n\n```java:HogeFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Produces;\n\n@Stateless\npublic class HogeFactory {\n    \n    @Produces\n    public Hoge getHoge() {\n        System.out.println(\"getHoge()\");\n        return new Hoge(\"hoge factory\");\n    }\n}\n```\n\n```java:ProducerEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.producer.Hoge;\n\n@Stateless\npublic class ProducerEjb {\n    @Inject\n    private Hoge hoge;\n    \n    public void execute() {\n        System.out.println(hoge);\n        System.out.println(hoge.getClass());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n`ProducerEjb#execute()` \u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u4f55\u56de\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=309349054}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge\n\n\u60c5\u5831:   Hoge{name=hoge factory, hash=309349054}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge\n\n\u60c5\u5831:   Hoge{name=hoge factory, hash=309349054}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge\n```\n\n**\u8aac\u660e**\n\n```java:HogeFactory.java\n    @Produces\n    public Hoge getHoge() {\n        System.out.println(\"getHoge()\");\n        return new Hoge(\"hoge factory\");\n    }\n```\n\n- `@Produces` \u3067\u30e1\u30bd\u30c3\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u8fd4\u5374\u3057\u305f\u5024\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u305b\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n    - \u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092 Producer \u30e1\u30bd\u30c3\u30c9\u3068\u547c\u3076\u3002\n- \u30bb\u30c3\u30b7\u30e7\u30f3\u30d3\u30fc\u30f3\u3060\u3051\u3067\u306a\u304f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3067\u3082 Producer \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- \u5358\u7d14\u306b `@Produces` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u3060\u3051\u306e Producer \u30e1\u30bd\u30c3\u30c9\u304b\u3089\u751f\u6210\u3055\u308c\u305f\u30d3\u30fc\u30f3\u306f\u3001\u30d7\u30ed\u30ad\u30b7\u3067\u30e9\u30c3\u30d7\u3055\u308c\u306a\u3044\u3002\n\n##\u30b9\u30b3\u30fc\u30d7\u3092\u6307\u5b9a\u3059\u308b\nProducer \u30e1\u30bd\u30c3\u30c9\u3067\u5b9a\u7fa9\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3001\u30b9\u30b3\u30fc\u30d7\u3092\u6301\u305f\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```diff:HogeFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Produces;\n+ import javax.enterprise.context.RequestScoped;\n\n@Stateless\npublic class HogeFactory {\n    \n-   @Produces\n+   @Produces @RequestScoped\n    public Hoge getHoge() {\n        System.out.println(\"getHoge()\");\n        return new Hoge(\"hoge factory\");\n    }\n}\n```\n\n```diff:Hoge.java\npackage sample.cdi.bean.producer;\n\npublic class Hoge {\n    \n    private String name;\n    \n+   public Hoge() {}\n    \n    public Hoge(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + \"name=\" + name + \", hash=\" + hashCode() + \"}\";\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=32172459}\n\u60c5\u5831:   class sample.cdi.bean.roducer.Hoge$Proxy$_$$_WeldClientProxy\n\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=1343265552}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge$Proxy$_$$_WeldClientProxy\n\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   Hoge{name=hoge factory, hash=773997409}\n\u60c5\u5831:   class sample.cdi.bean.producer.Hoge$Proxy$_$$_WeldClientProxy\n```\n\n**\u8aac\u660e**\n\n- `@Produces` \u306b\u52a0\u3048\u3066\u3001\u30b9\u30b3\u30fc\u30d7\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30e1\u30bd\u30c3\u30c9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30d3\u30fc\u30f3\u306e\u30b9\u30b3\u30fc\u30d7\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n- \u3053\u306e\u5834\u5408\u3001 `@Inject` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u30d7\u30ed\u30ad\u30b7\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u308b\u3002\n    - \u30b3\u30f3\u30c6\u30ca\u304c\u30d7\u30ed\u30ad\u30b7\u3092\u751f\u6210\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u8ffd\u52a0\u3057\u3066\u3044\u308b\u3002\n\n##Producer \u30d5\u30a3\u30fc\u30eb\u30c9\n\u521d\u671f\u5316\u51e6\u7406\u304c\u5b58\u5728\u305b\u305a\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 `new` \u3059\u308b\u3060\u3051\u3067\u826f\u3044\u306a\u3089\u3001 Producer \u30d5\u30a3\u30fc\u30eb\u30c9\u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u3042\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:Fuga.java\npackage sample.cdi.bean.producer;\n\npublic class Fuga {\n    \n    private String name;\n    \n    public Fuga(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Fuga{\" + \"name=\" + name + \", hash=\" + hashCode() + \"}\";\n    }\n}\n```\n\n```java:FugaFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Produces;\n\n@Dependent\npublic class FugaFactory {\n    @Produces\n    private Fuga fuga = new Fuga(\"fuga factory\");\n}\n```\n\n```java:ProducerEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.producer.Fuga;\n\n@Stateless\npublic class ProducerEjb {\n    ...\n    \n    @Inject\n    private Fuga fuga;\n    \n    public void field() {\n        System.out.println(fuga);\n        System.out.println(fuga.getClass());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   Fuga{name=fuga factory, hash=415012830}\n\u60c5\u5831:   class sample.cdi.bean.producer.Fuga\n```\n\n- \u30d5\u30a3\u30fc\u30eb\u30c9\u3092 `@Produces` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u306e\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u5024\u3092\u4ed6\u306e\u30d3\u30fc\u30f3\u306a\u3069\u306b\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n- \u3060\u3044\u305f\u3044 Producer \u30d5\u30a3\u30fc\u30eb\u30c9\u3068\u540c\u3058\u632f\u308b\u821e\u3044\u3092\u3059\u308b\u3002\n\n##Disposer \u30e1\u30bd\u30c3\u30c9\nProducer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u30d3\u30fc\u30f3\u306f\u3001 `@PreDestroy` \u306a\u3069\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u30e1\u30bd\u30c3\u30c9\u304c\u5229\u7528\u3067\u304d\u306a\u3044\u3002\n\u4ee3\u308f\u308a\u306b\u3001 Disposer \u30e1\u30bd\u30c3\u30c9\u3068\u3044\u3046\u306e\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:Piyo.java\npackage sample.cdi.bean.producer;\n\nimport javax.annotation.PreDestroy;\n\npublic class Piyo {\n    \n    @PreDestroy\n    public void preDestroy() {\n        System.out.println(\"Piyo#preDestroy()\");\n    }\n\n    @Override\n    public String toString() {\n        return \"Piyo{\" + hashCode() + \"}\";\n    }\n}\n```\n\n```java:PiyoFactory.java\npackage sample.cdi.bean.producer;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.context.RequestScoped;\nimport javax.enterprise.inject.Disposes;\nimport javax.enterprise.inject.Produces;\n\n@Stateless\npublic class PiyoFactory {\n    \n    @Produces @RequestScoped\n    public Piyo getPiyo() {\n        return new Piyo();\n    }\n    \n    public void disposerMethod(@Disposes Piyo piyo) {\n        System.out.println(\"PiyoFactory#disposerMethod()\");\n        System.out.println(\"piyo = \" + piyo);\n        System.out.println(\"piyo.class = \" + piyo.getClass());\n    }\n}\n```\n\n```java:ProducerEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.producer.Piyo;\n\n@Stateless\npublic class ProducerEjb {\n    ...\n    \n    @Inject\n    private Piyo piyo;\n    \n    public void disposer() {\n        System.out.println(\"ProducerEjb#disposer()\");\n        System.out.println(\"piyo = \" + piyo);\n        System.out.println(\"piyo.class = \" + piyo.getClass());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   ProducerEjb#disposer()\n\u60c5\u5831:   piyo = Piyo{1985500044}\n\u60c5\u5831:   piyo.class = class sample.cdi.bean.producer.Piyo$Proxy$_$$_WeldClientProxy\n\n\u60c5\u5831:   PiyoFactory#disposerMethod()\n\u60c5\u5831:   piyo = Piyo{1985500044}\n\u60c5\u5831:   piyo.class = class sample.cdi.bean.producer.Piyo\n```\n\n**\u8aac\u660e**\n\n- Producer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u3067\u751f\u6210\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001 `@PreDestroy` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u30e1\u30bd\u30c3\u30c9\u3092\u6301\u3063\u3066\u3044\u3066\u3082\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u306a\u3044\u3002\n- Producer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u3092\u5b9a\u7fa9\u3057\u305f\u306e\u3068\u540c\u3058\u30af\u30e9\u30b9\u5185\u306b\u3001 Disposer \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- Disposer \u30e1\u30bd\u30c3\u30c9\u306f\u3001\u4ee5\u4e0b\u306e\u6761\u4ef6\u3092\u5168\u3066\u6e80\u305f\u3059\u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30f3\u30c6\u30ca\u306b\u3088\u3063\u3066\u81ea\u52d5\u3067\u691c\u51fa\u3055\u308c\u308b\u3002\n    - Producer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u306b\u3088\u3063\u3066\u751f\u6210\u3055\u308c\u305f\u30af\u30e9\u30b9\u3068\u540c\u3058\u578b\u3092\u5f15\u6570\u306b\u53d7\u3051\u53d6\u308b\u3002\n    - \u305d\u306e\u5f15\u6570\u304c\u3001 `@Disposes` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\n- Disposer \u30e1\u30bd\u30c3\u30c9\u306f\u3001 Producer \u30e1\u30bd\u30c3\u30c9\uff08\u30d5\u30a3\u30fc\u30eb\u30c9\uff09\u3067\u751f\u6210\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7834\u68c4\u3055\u308c\u308b\u3068\u304d\u306b\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n- Disposer \u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u30d7\u30ed\u30ad\u30b7\u3067\u30e9\u30c3\u30d7\u3055\u308c\u3066\u3044\u306a\u3044\u3002\u7d20\u306e\u72b6\u614b\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n##\u30e1\u30bf\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\n\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e\u30e1\u30bf\u60c5\u5831\u3092\u3001 Producer \u30e1\u30bd\u30c3\u30c9\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u3088\u304f\u5229\u7528\u3055\u308c\u308b\u65b9\u6cd5\u3068\u3057\u3066\u3001\u30ed\u30ac\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092 Producer \u30e1\u30bd\u30c3\u30c9\u3067\u751f\u6210\u3059\u308b\u3068\u304d\u306b\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e `Class` \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3057\u3066\u30ed\u30ac\u30fc\u306b\u6e21\u3059\u3001\u3068\u3044\u3046\u3082\u306e\u304c\u3042\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:Hoge.java\npackage sample.cdi.bean.metadata;\n\npublic class Hoge {\n}\n```\n\n```java:HogeFactory.java\npackage sample.cdi.bean.metadata;\n\nimport java.lang.reflect.Member;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Produces;\nimport javax.enterprise.inject.spi.InjectionPoint;\n\n@Dependent\npublic class HogeFactory {\n    \n    @Produces\n    public Hoge getHoge(InjectionPoint ip) {\n        System.out.println(\"getHoge()\");\n        \n        Member member = ip.getMember();\n        System.out.println(\"member = \" + member);\n        System.out.println(\"member.class = \" + member.getClass());\n        \n        return new Hoge();\n    }\n}\n```\n\n```java:MetadataEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.metadata.Hoge;\n\n@Stateless\npublic class MetadataEjb {\n    @Inject\n    private Hoge hoge;\n    \n    public void execute() {\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   getHoge()\n\u60c5\u5831:   member = private sample.cdi.bean.metadata.Hoge sample.cdi.ejb.MetadataEjb.hoge\n\u60c5\u5831:   member.class = class java.lang.reflect.Field\n```\n\n**\u8aac\u660e**\n\n- `InjectionPoint` \u3092\u5f15\u6570\u3067\u53d7\u3051\u53d6\u308b\u3088\u3046\u306b\u3057\u3066 Producer \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n- `InjectionPoint` \u304b\u3089\u306f\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306e\u60c5\u5831\u3084\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u30d3\u30fc\u30f3\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n#\u9650\u5b9a\u5b50\n\u540c\u3058\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3057\u305f CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u304c\u8907\u6570\u5b58\u5728\u3057\u305f\u3068\u3059\u308b\u3002\n\u305d\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u578b\u3067 `@Inject` \u3092\u4f7f\u3044\u4f9d\u5b58\u6027\u306e\u6ce8\u5165\u3092\u3057\u305f\u5834\u5408\u3001\u30b3\u30f3\u30c6\u30ca\u306f\u8907\u6570\u5b58\u5728\u3059\u308b\u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u5185\u3001\u3069\u306e\u30d3\u30fc\u30f3\u3092\u63a1\u7528\u3059\u308c\u3070\u3044\u3044\u306e\u304b\u5224\u65ad\u3067\u304d\u306a\u3044\uff08\u30a8\u30e9\u30fc\u306b\u306a\u308b\uff09\u3002\n\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u306b\u306f\u3001\u9650\u5b9a\u5b50\uff08`Qualifier`\uff09\u3068\u547c\u3070\u308c\u308b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3059\u308b\u3002\n\n##\u57fa\u672c\n**\u5b9f\u88c5**\n\n\u30d3\u30fc\u30f3\u95a2\u9023\n\n```java:MyInterface.java\npackage sample.cdi.bean.qualifier;\n\npublic interface MyInterface {\n}\n```\n\n```java:Hoge.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @HogeHoge\npublic class Hoge implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"Hoge{\" + hashCode() + '}';\n    }\n}\n```\n\n```java:Fuga.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @FugaFuga\npublic class Fuga implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"Fuga{\" + hashCode() + '}';\n    }\n}\n```\n\n\u9650\u5b9a\u5b50\n\n```java:HogeHoge.java\npackage sample.cdi.bean.qualifier;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.inject.Qualifier;\n\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface HogeHoge {\n}\n```\n\n```java:FugaFuga.java\npackage sample.cdi.bean.qualifier;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.inject.Qualifier;\n\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface FugaFuga {\n}\n```\n\n\u52d5\u4f5c\u78ba\u8a8d\u7528EJB\n\n```java:QualifierEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.FugaFuga;\nimport sample.cdi.bean.qualifier.HogeHoge;\nimport sample.cdi.bean.qualifier.MyInterface;\n\n@Stateless\npublic class QualifierEjb {\n    @Inject @HogeHoge\n    private MyInterface hoge;\n    \n    private MyInterface fuga;\n    \n    @Inject\n    public void setFuga(@FugaFuga MyInterface fuga) {\n        this.fuga = fuga;\n    }\n    \n    public void execute() {\n        System.out.println(\"hoge=\" + hoge);\n        System.out.println(\"fuga=\" + fuga);\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   hoge=Hoge{1614742928}\n\u60c5\u5831:   fuga=Fuga{354651225}\n```\n\n**\u8aac\u660e**\n\n```java:HogeHoge.java\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface HogeHoge {\n}\n```\n\n- \u9650\u5b9a\u5b50\u306f\u3001\u666e\u901a\u306b\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3057\u305f\u3046\u3048\u3067\u3001\u4ee5\u4e0b\u306e\u30e1\u30bf\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u4f5c\u6210\u3067\u304d\u308b\u3002\n    - `@Qualifier`\n    - `@Retention`\n        - `value` \u306b\u306f\u3001 `RetentionPolicy.RUNTIME` \u3092\u8a2d\u5b9a\u3059\u308b\u3002\n    - `@Target`\n        - `TYPE`, `FILED`, `METHOD`, `PARAMETER` \u306f\u3001\u9650\u5b9a\u5b50\u3092\u4f7f\u3046\u53ef\u80fd\u6027\u304c\u3042\u308b\u5834\u6240\u3002\n\n```java:Hoge.java\n@Dependent @HogeHoge\npublic class Hoge implements MyInterface {\n```\n\n- \u307e\u305a\u306f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u65b9\u3092\u4f5c\u6210\u3057\u305f\u9650\u5b9a\u5b50\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- \u3053\u308c\u3067\u3001 `MyInterface` \u578b\u3067\u304b\u3064 `@HogeHoge` \u9650\u5b9a\u5b50\u3092\u6307\u5b9a\u3055\u308c\u305f\u5834\u5408\u306f `Hoge` \u578b\u3067\u89e3\u6c7a\u3059\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u6559\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n```java:QualifierEjb.java\n    @Inject @HogeHoge\n    private MyInterface hoge;\n\n    private MyInterface fuga;\n    \n    @Inject\n    public void setFuga(@FugaFuga MyInterface fuga) {\n        this.fuga = fuga;\n    }\n```\n\n- \u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u306f\u3001 `@Inject` \u3068\u4f5c\u6210\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u5bfe\u8c61\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- \u30e1\u30bd\u30c3\u30c9\uff08\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\uff09\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u3068\u304d\u306f\u3001\u5f15\u6570\u3092\u9650\u5b9a\u5b50\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n##\u5c5e\u6027\u3092\u542b\u3081\u3066\u9069\u7528\u3092\u5224\u5b9a\u3055\u305b\u308b\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5c5e\u6027\u3092\u6301\u3064\u5834\u5408\u3001\u305d\u306e\u5c5e\u6027\u5024\u3082\u542b\u3081\u3066\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5bfe\u8c61\u306e\u30d3\u30fc\u30f3\u5019\u88dc\u304c\u9078\u629e\u3055\u308c\u308b\u3002\n\u3053\u308c\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5bfe\u8c61\u3092\u67d4\u8edf\u306b\u3001\u304b\u3064\u578b\u5b89\u5168\u306a\u65b9\u6cd5\u3067\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:MyBeanType.java\npackage sample.cdi.bean.qualifier.attribute;\n\npublic enum MyBeanType {\n    HOGE,\n    FUGA,\n}\n```\n\n```java:MyQualifier.java\npackage sample.cdi.bean.qualifier.attribute;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.inject.Qualifier;\n\n@Qualifier\n@Retention(RetentionPolicy.RUNTIME)\n@Target({\n    ElementType.TYPE,\n    ElementType.FIELD,\n    ElementType.METHOD,\n    ElementType.PARAMETER\n})\npublic @interface MyQualifier {\n    MyBeanType value() default MyBeanType.HOGE;\n}\n```\n\n```java:Hoge.java\npackage sample.cdi.bean.qualifier.attribute;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier\npublic class Hoge implements MyInterface {\n}\n```\n\n```java:Fuga.java\npackage sample.cdi.bean.qualifier.attribute;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier(MyBeanType.FUGA)\npublic class Fuga implements MyInterface {\n}\n```\n\n```java:QualifierAttributeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.attribute.MyBeanType;\nimport sample.cdi.bean.qualifier.attribute.MyInterface;\nimport sample.cdi.bean.qualifier.attribute.MyQualifier;\n\n@Stateless\npublic class QualifierAttributeEjb {\n    @Inject @MyQualifier\n    private MyInterface obj1;\n    @Inject @MyQualifier(MyBeanType.FUGA)\n    private MyInterface obj2;\n    \n    public void execute() {\n        System.out.println(\"obj1.class = \" + obj1.getClass().getSimpleName());\n        System.out.println(\"obj2.class = \" + obj2.getClass().getSimpleName());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj1.class = Hoge\n\u60c5\u5831:   obj2.class = Fuga\n```\n\n**\u8aac\u660e**\n\n```java:MyQualifier.java\npublic @interface MyQualifier {\n    MyBeanType value() default MyBeanType.HOGE;\n}\n```\n\n- \u9650\u5b9a\u5b50\u3092\u4f5c\u6210\u3057\u3001 `value` \u306b\u30d3\u30fc\u30f3\u306e\u7a2e\u985e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u5217\u6319\u578b\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u3067 `HOGE` \u304c\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n```java:Hoge.java,Fuga.java\n// Hoge.java\n@Dependent @MyQualifier\npublic class Hoge implements MyInterface {\n\n// Fuga.java\n@Dependent @MyQualifier(MyBeanType.FUGA)\npublic class Fuga implements MyInterface {\n```\n\n- `Hoge` \u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3044\u308b `@MyQualifier` \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306a\u306e\u3067 `MyBeanType.HOGE` \u304c\u3001  \n`Fuga` \u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3044\u308b `@MyQualifier` \u306b\u306f `MyBeanType.FUGA` \u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3002\n- \u3053\u308c\u306b\u3088\u3063\u3066\u3001 `@MyQualifier(MyBeanType.HOGE)` \u3068\u3059\u308c\u3070 `Hoge` \u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u3001  \n`@MyQualifier(MyBeanType.FUGA)` \u3068\u3059\u308c\u3070 `Fuga` \u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n- \u5217\u6319\u578b\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u9078\u629e\u80a2\u304c\u3069\u308c\u3060\u3051\u5b58\u5728\u3059\u308b\u304b\u304c\u660e\u78ba\u306b\u306a\u308a\u3001\u9593\u9055\u3063\u305f\u5024\u3092\u6e21\u3059\u3053\u3068\u3082\u306a\u304f\u306a\u308b\u30e1\u30ea\u30c3\u30c8\u304c\u3042\u308b\uff08`String` \u3068\u304b\u3092\u4f7f\u3063\u3061\u3083\u3046\u3068\u3001\u4f55\u3067\u3082\u6e21\u305b\u3066\u3057\u307e\u3046\u306e\u3067\u5371\u967a\uff09\u3002\n\n##\u30d3\u30eb\u30c8\u30a4\u30f3\u306e\u9650\u5b9a\u5b50\nCDI \u306b\u306f\u3001\u6b21\u306e\u9650\u5b9a\u5b50\u304c\u6a19\u6e96\u3067\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u3002\n\n- `@Default`\n- `@Any`\n- `@Named`\n- `@New`\n\nCDI \u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u3001\u4f9d\u5b58\u89e3\u6c7a\u306b\u5931\u6557\u3057\u305f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u304a\u76ee\u306b\u304b\u304b\u308b\u3053\u3068\u306e\u591a\u3044\u3053\u308c\u3089\u306e\u9650\u5b9a\u5b50\u306b\u3064\u3044\u3066\u3001\u305d\u306e\u7528\u6cd5\u3092\u307e\u3068\u3081\u308b\u3002\n\n###`@Named`\n`@Named` \u306f\u3001\u6587\u5b57\u5217\u306b\u3088\u308b\u540d\u524d\u6307\u5b9a\u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u30d3\u30fc\u30f3\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306e\u9650\u5b9a\u5b50\u3002\n`@Named` \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u540d\u524d\u3092\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n**\u5b9f\u88c5**\n\n\u30d3\u30fc\u30f3\u95a2\u9023\n\n```java:MyInterface.java\npackage sample.cdi.bean.qualifier.builtin.named;\n\npublic interface MyInterface {\n}\n```\n\n```java:Hoge.java\npackage sample.cdi.bean.qualifier.builtin.named;\n\nimport javax.enterprise.context.Dependent;\nimport javax.inject.Named;\n\n@Dependent @Named(\"HOGE\")\npublic class Hoge implements MyInterface {\n}\n```\n\n```java:Fuga.java\npackage sample.cdi.bean.qualifier.builtin.named;\n\nimport javax.enterprise.context.Dependent;\nimport javax.inject.Named;\n\n@Dependent @Named\npublic class Fuga implements MyInterface{\n}\n```\n\n\u52d5\u4f5c\u78ba\u8a8d\u7528EJB\n\n```java:NamedEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport javax.inject.Named;\nimport sample.cdi.bean.qualifier.builtin.named.MyInterface;\n\n@Stateless\npublic class NamedEjb {\n    @Inject @Named(\"HOGE\")\n    private MyInterface hoge;\n    @Inject @Named(\"fuga\")\n    private MyInterface fuga;\n    \n    public void execute() {\n        System.out.println(\" hoge.class = \" + hoge.getClass());\n        System.out.println(\" fuga.class = \" + fuga.getClass());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   hoge.class = class sample.cdi.bean.qualifier.builtin.named.Hoge\n\u60c5\u5831:   fuga.class = class sample.cdi.bean.qualifier.builtin.named.Fuga\n```\n\n**\u8aac\u660e**\n\n- `@Named` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 `value` \u306b\u30d3\u30fc\u30f3\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `value` \u3092\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u30af\u30e9\u30b9\u540d\u306e\u5148\u982d\u3092\u5c0f\u6587\u5b57\u306b\u3057\u305f\u3082\u306e\u304c\u540d\u524d\u306b\u306a\u308b\uff08`Fuga` \u2192 `fuga`\uff09\u3002\n- `@Inject` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u3068\u304d\u306b\u3001\u540c\u3058\u304f `@Named` \u3067\u5bfe\u8c61\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001 `value` \u3067\u30d3\u30fc\u30f3\u3092\u7279\u5b9a\u3059\u308b\u305f\u3081\u306e\u540d\u524d\u3092\u6307\u5b9a\u3059\u308b\u3002\n- `@Named` \u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u5148\u3067\u4f7f\u7528\u3059\u308b\u306e\u306f<ins>\u63a8\u5968\u3055\u308c\u3066\u3044\u306a\u3044</ins>\u3002\n    - \u901a\u5e38\u306f\u3001 JSF \u306a\u3069\u3067 EL \u5f0f\u3092\u66f8\u304f\u3068\u304d\u306b\u306e\u307f\u3001\u53c2\u7167\u540d\u3068\u3057\u3066 `@Named` \u3067\u8a2d\u5b9a\u3057\u305f\u540d\u524d\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n###`@Any` \u3068 `@Default`\nCDI \u56de\u308a\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3067\u4e00\u5ea6\u306f\u304a\u76ee\u306b\u304b\u304b\u308b\u9650\u5b9a\u5b50\u3002\n\u3042\u307e\u308a\u306b\u3082\u3088\u304f\u898b\u308b\u3046\u3048\u306b\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u3092\u898b\u305f\u3060\u3051\u3067\u5acc\u306a\u6c17\u5206\u306b\u306a\u308b\uff08\u81ea\u5206\u3060\u3051\uff1f\uff09\u3002\n\n\u3053\u308c\u3089\u306e\u9650\u5b9a\u5b50\u306e\u95a2\u4fc2\u306f\u3001\u3084\u3084\u3053\u3057\u3044\u3088\u3046\u3067\u7406\u89e3\u3057\u3066\u3057\u307e\u3048\u3070\u305d\u3093\u306a\u306b\u8907\u96d1\u3067\u306f\u306a\u3044\u3002\n\n\u307e\u305a\u3001\u305d\u308c\u305e\u308c\u306e\u5b9a\u7fa9\u304b\u3089\u3002\n\n####`@Any`\n- \u9650\u5b9a\u5b50\u306e\u6709\u7121\u306b\u95a2\u308f\u3089\u305a\u3001\u5168\u3066\u306e CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u81ea\u52d5\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u9650\u5b9a\u5b50\u3002\n\n####`@Default`\n- \u9650\u5b9a\u5b50\u3092\u4ed8\u3051\u3066\u3044\u306a\u3044\u5834\u5408\u306b\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u81ea\u52d5\u3067\u8a2d\u5b9a\u3055\u308c\u308b\u9650\u5b9a\u5b50\u3002\n- \u305f\u3060\u3057\u3001 `@Named` \u3060\u3051\u306f\u4f8b\u5916\u3067\u3001\u3053\u308c\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u3066\u3082 `@Default` \u304c\u4e00\u7dd2\u306b\u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n- \u660e\u793a\u7684\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3002\n\n####\u4f8b\n`||` \u306e\u4e0a\u4e0b\u306f\u3001\u610f\u5473\u7684\u306b\u540c\u3058\u306b\u306a\u308b\u3002\n\n```java:\n@Dependent\npublic class Hoge {\n\n     ||\n\n@Depndent @Any @Default\npublic class Hoge {\n```\n\n```java:\n@Dependent @Named\npublic class Fuga {\n\n     ||\n\n@Dependent @Named @Any @Default\npublic class Fuga {\n```\n\n```java:\n@Dependent @MyQualifier\npublic class Piyo {\n\n     ||\n\n@Dependent @MyQualifier @Any\npublic class Piyo {\n```\n\n\u203b`MyQualifier` \u306f\u81ea\u4f5c\u306e\u9650\u5b9a\u5b50\u3002\n\n\u56f3\u306b\u8868\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3002\n\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/28302/36d091bd-3191-5767-6cbe-133d3a42c5d8.jpeg\" id=\"built-in-qualifier-image\" />\n\n\u203b\u3053\u306e\u72b6\u614b\u306b\u306a\u308b\u3068\u3001 `Hoge` \u30af\u30e9\u30b9\u306f\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3067\u304d\u306a\u304f\u306a\u308b\uff08`@Default` \u3060\u3051\u3067\u306f `Fuga` \u3082\u5019\u88dc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u3001\u30d3\u30fc\u30f3\u3092\u7279\u5b9a\u3067\u304d\u306a\u3044\u305f\u3081\uff09\u3002\n\n####\u5b9f\u9a13\n```java:MyInterface.java\npackage sample.cdi.bean.qualifier.defaultany;\n\npublic interface MyInterface {\n}\n```\n\n```java:DefaultBean.java\npackage sample.cdi.bean.qualifier.defaultany;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class DefaultBean implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"DefaultBean{\" + hashCode() + '}';\n    }\n}\n```\n\n```java:QualifiedBean.java\npackage sample.cdi.bean.qualifier.defaultany;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier\npublic class QualifiedBean implements MyInterface {\n\n    @Override\n    public String toString() {\n        return \"QualifiedBean{\" + hashCode() + '}';\n    }\n}\n```\n\n\u5404\u30d3\u30fc\u30f3\u306e\u95a2\u4fc2\u306f\u3001\n\n![cdi.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/51f173b2-71c4-0d3a-09e6-ccf18ed1cd43.jpeg)\n\n\u3053\u3093\u306a\u611f\u3058\u3002\n\n```java:DefaultAnyEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Any;\nimport javax.enterprise.inject.Default;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.defaultany.MyInterface;\nimport sample.cdi.bean.qualifier.defaultany.MyQualifier;\n\n@Stateless\npublic class DefaultAnyEjb {\n    \n    @Inject\n    private MyInterface onlyInject;\n    @Inject @Default\n    private MyInterface withDefault;\n    @Inject @Default @Any\n    private MyInterface withDefaultAndAny;\n    @Inject @MyQualifier\n    private MyInterface withQualifier;\n    \n    public void execute() {\n        System.out.println(\"onlyInject.class = \" + onlyInject.getClass().getSimpleName());\n        System.out.println(\"withDefault.class = \" + withDefault.getClass().getSimpleName());\n        System.out.println(\"withDefaultAndAny.class = \" + withDefaultAndAny.getClass().getSimpleName());\n        System.out.println(\"withQualifier.class = \" + withQualifier.getClass().getSimpleName());\n    }\n}\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   onlyInject.class = DefaultBean\n\u60c5\u5831:   withDefault.class = DefaultBean\n\u60c5\u5831:   withDefaultAndAny.class = DefaultBean\n\u60c5\u5831:   withQualifier.class = QualifiedBean\n```\n\n###`@New`\n\u3053\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u30dd\u30a4\u30f3\u30c8\u3067\u5229\u7528\u3059\u308b\u3068\u3001\u30b9\u30b3\u30fc\u30d7\u304c\u5f37\u5236\u7684\u306b Dependent \u306b\u306a\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:ApplicationScopedBean.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.ApplicationScoped;\n\n@ApplicationScoped\npublic class ApplicationScopedBean {\n\n    @Override\n    public String toString() {\n        return \"ApplicationScopedBean{\" + hashCode() + '}';\n    }\n}\n```\n\n```java:RequestScopedBean.java\npackage sample.cdi.bean.qualifier;\n\nimport javax.enterprise.context.RequestScoped;\nimport javax.enterprise.inject.New;\nimport javax.inject.Inject;\n\n@RequestScoped\npublic class RequestScopedBean {\n    @Inject\n    private ApplicationScopedBean normalBean;\n    @Inject @New\n    private ApplicationScopedBean newBean;\n    \n    @Override\n    public String toString() {\n        return \"RequestScopedBean{\" + hashCode() + \", normalBean=\" + normalBean + \", newBean=\" + newBean + '}';\n    }\n}\n```\n\n```java:NewQualifierEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.qualifier.RequestScopedBean;\n\n@Stateless\npublic class NewQualifierEjb {\n    @Inject\n    private RequestScopedBean bean;\n    \n    public void execute() {\n        System.out.println(bean);\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   RequestScopedBean{1322601645, normalBean=ApplicationScopedBean{1740782693}, newBean=ApplicationScopedBean{927056158}}\n\n\u60c5\u5831:   RequestScopedBean{325806349, normalBean=ApplicationScopedBean{1740782693}, newBean=ApplicationScopedBean{246048323}}\n\n\u60c5\u5831:   RequestScopedBean{1410382906, normalBean=ApplicationScopedBean{1740782693}, newBean=ApplicationScopedBean{453643025}}\n```\n\n**\u8aac\u660e**\n\n- `@New` \u3092\u4ed8\u3051\u3066\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u65b9\u306f\u3001 RequestScoped \u306b\u306a\u3063\u3066\u3044\u308b\uff08\u306a\u306b\u3053\u308c\u3053\u308f\u3044\uff09\u3002\n\n\n#\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3059\u308b\n`Instance` \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4ecb\u3059\u308b\u3053\u3068\u3067\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u52d5\u7684\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##\u57fa\u672c\n**\u5b9f\u88c5**\n\n```java:Hoge.java\npackage sample.cdi.bean.instance;\n\nimport javax.enterprise.context.RequestScoped;\n\n@RequestScoped\npublic class Hoge implements MyInterface {\n}\n```\n\n```java:InstanceEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Instance;\nimport javax.inject.Inject;\nimport sample.cdi.bean.instance.MyInterface;\n\n@Stateless\npublic class InstanceEjb {\n    \n    @Inject\n    private Instance<MyInterface> instance;\n    \n    public void execute() {\n        MyInterface obj = this.instance.get();\n        System.out.println(obj.getClass());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   class sample.cdi.bean.instance.Hoge$Proxy$_$$_WeldClientProxy\n```\n\n**\u8aac\u660e**\n\n- `Instance` \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u4f7f\u3063\u3066\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3067\u304d\u308b\u3002\n- `Instance` \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u81ea\u4f53\u306f\u3001 `@Inject` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u3002\n\n##\u9650\u5b9a\u5b50\u3067\u53d6\u5f97\u3059\u308b\u30d3\u30fc\u30f3\u3092\u6307\u5b9a\u3059\u308b\n**\u5b9f\u88c5**\n\n```java:Fuga.java\npackage sample.cdi.bean.instance;\n\nimport javax.enterprise.context.RequestScoped;\n\n@RequestScoped @MyQualifier\npublic class Fuga implements MyInterface {\n}\n```\n\n```diff:InstanceEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.inject.Instance;\nimport javax.inject.Inject;\nimport sample.cdi.bean.instance.MyInterface;\n+ import javax.enterprise.inject.Any;\n+ import javax.enterprise.inject.Default;\n+ import javax.enterprise.util.AnnotationLiteral;\n+ import sample.cdi.bean.instance.MyQualifier;\n\n@Stateless\npublic class InstanceEjb {\n    \n+   @Any\n    @Inject\n    private Instance<MyInterface> instance;\n    \n    public void execute() {\n-       MyInterface obj = this.instance.get();\n-       System.out.println(obj.getClass());\n\n+       System.out.println(\"ambiguous = \" + instance.isAmbiguous());\n+       \n+       Instance<MyInterface> defaults = instance.select(new AnnotationLiteral<Default>() {});\n+       System.out.println(\"defaults.class = \" + defaults.get().getClass());\n+       \n+       Instance<MyInterface> qualified = instance.select(new AnnotationLiteral<MyQualifier>() {});\n+       System.out.println(\"qualified.class = \" + qualified.get().getClass());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   ambiguous = true\n\u60c5\u5831:   defaults.class = class sample.cdi.bean.instance.Hoge$Proxy$_$$_WeldClientProxy\n\u60c5\u5831:   qualified.class = class sample.cdi.bean.instance.Fuga$Proxy$_$$_WeldClientProxy\n```\n\n**\u8aac\u660e**\n\n- `Instance#select(Annotation...)` \u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u9650\u5b9a\u5b50\u3067\u30d3\u30fc\u30f3\u306e\u5019\u88dc\u3092\u7d5e\u308a\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n    - \u5f15\u6570\u306e `Annotation` \u306b\u306f\u3001 `AnnotationLiteral` \u30af\u30e9\u30b9\u3092\u5229\u7528\u3059\u308b\u3002\n- \u9650\u5b9a\u5b50\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `Instance` \u306e\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u30dd\u30a4\u30f3\u30c8\u3067 `@Any` \u3092\u4f7f\u308f\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n    - `@Any` \u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u3001 `@Default` \u304c\u6697\u9ed9\u7684\u306b\u6307\u5b9a\u3055\u308c\u305f\u3053\u3068\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u3001 [\u3053\u306e\u56f3](#built-in-qualifier-image) \u304b\u3089\u3082\u5206\u304b\u308b\u3088\u3046\u306b\u9650\u5b9a\u5b50\u3067\u6307\u5b9a\u3057\u305f\u7bc4\u56f2\u304c\u53d6\u5f97\u3067\u304d\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\n#`@Alternative` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u30d3\u30fc\u30f3\u3092\u5207\u308a\u66ff\u3048\u308b\n\u901a\u5e38\u306f A \u3068\u3044\u3046\u30d3\u30fc\u30f3\u3092\u4f7f\u3046\u3051\u3069\u3001\u30c6\u30b9\u30c8\u306e\u3068\u304d\u306f B \u3068\u3044\u3046\u5225\u306e\u30d3\u30fc\u30f3\u3092\u4f7f\u3044\u305f\u3044\u3002\n\u307f\u305f\u3044\u306a\u3068\u304d\u306f\u3001 `@Alternative` \u3092\u5229\u7528\u3059\u308b\u3002\n\n\u3053\u306e\u4ed5\u7d44\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u30af\u30e9\u30b9\u30d1\u30b9\u306b jar \u3092\u8ffd\u52a0\u3057\u305f\u3089\u81ea\u52d5\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u304c\u7f6e\u304d\u63db\u308f\u308b\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n##beans.xml \u3092\u4f7f\u7528\u3057\u3066\u5207\u308a\u66ff\u3048\u308b\n**\u5b9f\u88c5**\n\n```java:ProductionBean.java\npackage sample.cdi.bean.alternative.beansxml;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class ProductionBean implements  MyInterface {\n}\n```\n\n```java:TestBean.java\npackage sample.cdi.bean.alternative.beansxml;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative\npublic class TestBean implements MyInterface {\n}\n```\n\n```java:AlternativeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.beansxml.MyInterface;\n\n@Stateless\npublic class AlternativeEjb {\n    @Inject\n    private MyInterface obj;\n    \n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = ProductionBean\n```\n\n\u6b21\u306b\u3001 `WEB-INF` \u306e\u76f4\u4e0b\u306b `beans.xml` \u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```xml:beans.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd\"\n       bean-discovery-mode=\"annotated\">\n  \n  <alternatives>\n    <class>sample.cdi.bean.alternative.beansxml.TestBean</class>\n  </alternatives>\n</beans>\n```\n\n\u518d\u5ea6 `AlternativeEjb#execute()` \u3092\u5b9f\u884c\u3055\u305b\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = TestBean\n```\n\n**\u8aac\u660e**\n\n- `MyInterface` \u3092\u5b9f\u88c5\u3057\u305f CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\uff12\u3064\u4f5c\u6210\u3057\u3066\u3044\u308b\uff08`ProductionBean` \u3068 `TestBean`\uff09\u3002\n- `TestBean` \u306e\u65b9\u306f\u3001 `@Alternative` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\n- \u3053\u306e\u72b6\u614b\u3067\u4f55\u3082\u6307\u5b9a\u3092\u3057\u306a\u3044\u5834\u5408\u3001 `@Alternative` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8**\u3055\u308c\u3066\u3044\u306a\u3044**\u65b9\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\uff08`ProductionBean`\uff09\u3002\n- \u3053\u3053\u3067 `beans.xml` \u3092\u4f5c\u6210\u3057\u3001 `<alternatives>` \u306e `<class>` \u30bf\u30b0\u3067 `@Alternative` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30d3\u30fc\u30f3\u306e FQCN \u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u3059\u308b\u3068\u3001\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u30d3\u30fc\u30f3\u304c\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n##`@Priority` \u3067\u5207\u308a\u66ff\u3048\u308b\n`beans.xml` \u3092\u4f7f\u308f\u306a\u304f\u3066\u3082\u3001 `@Priority` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u30b3\u30fc\u30c9\u4e0a\u3067\u9806\u5e8f\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:DefaultBean.java\npackage sample.cdi.bean.alternative.priority;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative @Priority(10)\npublic class DefaultBean implements MyInterface{\n}\n```\n\n```java:PluginBean.java\npackage sample.cdi.bean.alternative.priority;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative @Priority(100)\npublic class PluginBean implements MyInterface {\n}\n```\n\n```java:PriorityEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.priority.MyInterface;\n\n@Stateless\npublic class PriorityEjb {\n    @Inject\n    private MyInterface obj;\n    \n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = PluginBean\n```\n\n**\u8aac\u660e**\n\n- CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u3092\u305d\u308c\u305e\u308c `@Alternative` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3001\u3055\u3089\u306b `@Priority` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- `@Priority` \u306e `value` \u306b\u6e21\u3057\u305f\u6574\u6570\u5024\u304c **\u5927\u304d\u3044\u65b9** \u304c\u3001\u5b9f\u884c\u6642\u306b\u63a1\u7528\u3055\u308c\u308b\u3002\n- jar \u306e\u4e2d\u306b\u542b\u307e\u308c\u3066\u3044\u3066\u3082\u6709\u52b9\u306a\u306e\u3067\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d3\u30fc\u30f3\u306e\u30d7\u30e9\u30a4\u30aa\u30ea\u30c6\u30a3\u3092\u4f4e\u3081\u306b\u3057\u3066\u304a\u304d\u3001 jar \u306b\u542b\u307e\u308c\u308b\u30d3\u30fc\u30f3\u3092\u305d\u308c\u3088\u308a\u9ad8\u304f\u8a2d\u5b9a\u3057\u3066\u304a\u3051\u3070\u3001 jar \u3092\u8ffd\u52a0\u3059\u308b\u3060\u3051\u3067\u5b9f\u88c5\u306e\u5207\u308a\u66ff\u3048\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n##`@Specializes` \u3067\u9650\u5b9a\u5b50\u4ed8\u304d\u306e\u30d3\u30fc\u30f3\u3082\u307e\u3068\u3081\u3066\u5dee\u3057\u66ff\u3048\u308b\n###\u9650\u5b9a\u5b50\u304c\u4f7f\u7528\u3055\u308c\u305f\u5834\u5408\u306e\u554f\u984c\u70b9\n`@Alternative` \u3060\u3051\u3092\u4f7f\u3063\u305f\u5dee\u3057\u66ff\u3048\u306f\u3001\u9650\u5b9a\u5b50\u3054\u3068\u306b\u5b9a\u7fa9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\u4f8b\u3048\u3070\u3002\u3002\u3002\n\n```java:DefaultBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class DefaultBean implements MyInterface {\n}\n```\n\n```java:AlternativeBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @Alternative @Priority(10)\npublic class AlternativeBean implements MyInterface {\n}\n```\n\n```java:SpecializeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.priority.specialize.MyInterface;\n\n@Stateless\npublic class SpecializeEjb {\n    @Inject\n    private MyInterface obj;\n    \n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n    }\n}\n```\n\n`MyInterface` \u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306b\u5bfe\u3057\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5b9f\u88c5\u3067\u3042\u308b `DefaultBean` \u3068\u3001\u5dee\u3057\u66ff\u3048\u7528\u306e\u5b9f\u88c5\u3067\u3042\u308b `AlternativeBean` \u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u3053\u308c\u3092\u52d5\u304b\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = AlternativeBean\n```\n\n`AlternativeBean` \u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u3053\u3053\u3067\u3001\u9650\u5b9a\u5b50 `@MyQualifier` \u3092\u4f7f\u7528\u3057\u305f\u65b0\u3057\u3044\u30d3\u30fc\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u305f\u3068\u3059\u308b\u3002\n\n```java:QualifiedBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent @MyQualifier\npublic class QualifiedBean implements MyInterface {\n}\n```\n\n```diff:SpecializeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.alternative.priority.specialize.MyInterface;\n+ import sample.cdi.bean.alternative.priority.specialize.MyQualifier;\n\n@Stateless\npublic class SpecializeEjb {\n    @Inject\n    private MyInterface obj;\n+   @Inject @MyQualifier\n+   private MyInterface qualified;\n    \n    public void execute() {\n        System.out.println(\"obj.class = \" + obj.getClass().getSimpleName());\n+       System.out.println(\"qualified.class = \" + qualified.getClass().getSimpleName());\n    }\n}\n```\n\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = AlternativeBean\n\u60c5\u5831:   qualified.class = QualifiedBean\n```\n\n`@MyQualifier` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u305f\u65b9\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5b9f\u88c5\uff08`QualifiedBean`\uff09\u304c\u9069\u7528\u3055\u308c\u3001 `AlternativeBean` \u306b\u306f\u5dee\u3057\u66ff\u308f\u3063\u3066\u3044\u306a\u3044\u3002\n\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u5358\u7d14\u306a\u624b\u6bb5\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5dee\u3057\u66ff\u3048\u7528\u306e\u30d3\u30fc\u30f3\u3092\u65b0\u898f\u306b\u4f5c\u6210\u3059\u308b\u3068\u3044\u3046\u65b9\u6cd5\u304c\u3042\u308b\u3002\n\n```java:QualifiedAlternativeBean.java\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\n\n@Dependent @MyQualifier @Alternative @Priority(10)\npublic class QualifiedAlternativeBean implements MyInterface {\n}\n```\n\n\u3053\u308c\u3067\u3001\u5b9f\u884c\u7d50\u679c\u306f\u6b21\u306e\u3088\u3046\u306b\u5909\u5316\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = AlternativeBean\n\u60c5\u5831:   qualified.class = QualifiedAlternativeBean\n```\n\n\u4e00\u5fdc\u5dee\u3057\u66ff\u3048\u308b\u3053\u3068\u306f\u3067\u304d\u305f\u3002\n\u3057\u304b\u3057\u3001\u3053\u306e\u65b9\u6cd5\u3060\u3068\u9650\u5b9a\u5b50\u304c\u5897\u3048\u308b\u305f\u3073\u306b\u5dee\u3057\u66ff\u3048\u7528\u306e\u30d3\u30fc\u30f3\u3092\u8ffd\u52a0\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u305a\u3001\u304b\u306a\u308a\u30a4\u30b1\u3066\u306a\u3044\u3002\n\n\u305d\u3053\u3067\u3001\u9650\u5b9a\u5b50\u4ed8\u304d\u306e\u30d3\u30fc\u30f3\u3082\u4e00\u62ec\u3067\u5dee\u3057\u66ff\u3048\u308b\u65b9\u6cd5\u3068\u3057\u3066\u3001 `@Specializes` \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n###`@Specializes` \u3067\u5dee\u3057\u66ff\u3048\u308b\n**\u5b9f\u88c5**\n\n`AlternativeBean` \u3068 `QualifiedAlternariveBean` \u306f\u524a\u9664\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30d3\u30fc\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```java:\npackage sample.cdi.bean.alternative.priority.specialize;\n\nimport javax.annotation.Priority;\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.inject.Alternative;\nimport javax.enterprise.inject.Specializes;\n\n@Dependent @Alternative @Priority(10) @Specializes @MyQualifier\npublic class SpecializedQualifiedBean extends DefaultBean {\n}\n```\n\n\u5b9f\u884c\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   obj.class = SpecializedQualifiedBean\n\u60c5\u5831:   qualified.class = SpecializedQualifiedBean\n```\n\n\u9650\u5b9a\u5b50\u3042\u308a\u306a\u3057\u3001\u4e21\u65b9\u304c\u5dee\u3057\u66ff\u308f\u3063\u3066\u3044\u308b\u3002\n\n**\u8aac\u660e**\n\n- `@Specializes` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u30af\u30e9\u30b9\u306f\u3001\u5dee\u3057\u66ff\u3048\u5143\u3068\u306a\u308b\u30af\u30e9\u30b9\u3092 `extends` \u3059\u308b\u3088\u3046\u306b\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002\n- \u9650\u5b9a\u5b50\u4ed8\u304d\u306e\u30d3\u30fc\u30f3\u3092\u5dee\u3057\u66ff\u3048\u305f\u3044\u5834\u5408\u306f\u3001\u305d\u306e\u9650\u5b9a\u5b50\u3092 `@Specializes` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30af\u30e9\u30b9\u306b\u3082\u8a2d\u5b9a\u3059\u308b\u3002\n\n#\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u3001\u30ed\u30ae\u30f3\u30b0\u306a\u3069\u306e\u6a2a\u65ad\u7684\u95a2\u5fc3\u4e8b\u3092\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u304b\u3089\u5206\u96e2\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n##\u57fa\u672c\uff08`beans.xml` \u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\uff09\n**\u5b9f\u88c5**\n\n```java:MyIntercept.java\npackage sample.cdi.bean.interceptor;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.interceptor.InterceptorBinding;\n\n@InterceptorBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface MyIntercept {\n}\n```\n\n```java:MyInterceptor.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.interceptor.AroundInvoke;\nimport javax.interceptor.Interceptor;\nimport javax.interceptor.InvocationContext;\n\n@Interceptor\n@MyIntercept\npublic class MyInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n        \n        System.out.println(\"before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed\");\n        \n        return result;\n    }\n}\n```\n\n```java:Hoge.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class Hoge {\n    \n    @MyIntercept\n    public void method() {\n        System.out.println(\"Hoge#method()\");\n    }\n}\n```\n\n```java:InterceptorEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.interceptor.Hoge;\n\n@Stateless\npublic class InterceptorEjb {\n    @Inject\n    private Hoge hoge;\n    \n    public void execute() {\n        this.hoge.method();\n    }\n}\n```\n\n```xml:beans.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd\"\n       bean-discovery-mode=\"annotated\">\n  \n  <interceptors>\n    <class>sample.cdi.bean.interceptor.MyInterceptor</class>\n  </interceptors>\n</beans>\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   before proceed\n\u60c5\u5831:   Hoge#method()\n\u60c5\u5831:   after proceed\n```\n\n**\u8aac\u660e**\n\n```java:MyIntercept.java\n@InterceptorBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface MyIntercept {\n```\n\n- \u307e\u305a\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n- `@InterceptorBinding` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3053\u3068\u3067\u3001\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u306e\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068\u306a\u308b\u3002\n\n```java:MyInterceptor.java\n@Interceptor\n@MyIntercept\npublic class MyInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n        \n        System.out.println(\"before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed\");\n        \n        return result;\n    }\n}\n```\n\n- \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u672c\u4f53\u306f\u3001 `@Interceptor` \u3068\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- \u51e6\u7406\u672c\u4f53\u306f\u3001 `@AroundeInvoke` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u306b\u8a18\u8ff0\u3059\u308b\u3002\n- \u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u6b21\u306e\u3088\u3046\u306a\u30b7\u30b0\u30cd\u30c1\u30e3\u306b\u306a\u308b\u3088\u3046\u306b\u4f5c\u6210\u3059\u308b\u3002\n    - \u5f15\u6570\u306b `InvocationContext` \u3092\u53d7\u3051\u53d6\u308b\u3002\n    - \u623b\u308a\u5024\u306e\u578b\u3092 `Object` \u306b\u3059\u308b\u3002\n    - `Exception` \u3092 `throws` \u53e5\u306b\u5ba3\u8a00\u3059\u308b\u3002\n\n```java:Hoge.java\npublic class Hoge {\n    \n    @MyIntercept\n    public void method() {\n        System.out.println(\"Hoge#method()\");\n    }\n```\n\n- \u5b9f\u969b\u306b\u4f7f\u3046\u3068\u304d\u306f\u3001\u30e1\u30bd\u30c3\u30c9\u307e\u305f\u306f\u30af\u30e9\u30b9\u306b\u5bfe\u3057\u3066\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n- \u30af\u30e9\u30b9\u306b\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u5bfe\u8c61\u306b\u306a\u308b\u3002\n\n```xml:beans.xml\n  <interceptors>\n    <class>sample.cdi.bean.interceptor.MyInterceptor</class>\n  </interceptors>\n```\n\n- \u6700\u5f8c\u306b\u3001 `beans.xml` \u306b `<interceptors>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u30af\u30e9\u30b9\u3092\u767b\u9332\u3059\u308b\u3002\n- `<class>` \u30bf\u30b0\u306f\u8907\u6570\u6307\u5b9a\u53ef\u80fd\u3002\n- \u8907\u6570\u306e\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u304c\uff11\u3064\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u5bfe\u3057\u3066\u9069\u7528\u3055\u308c\u308b\u5834\u5408\u3001 `<class>` \u30bf\u30b0\u3067\u5217\u6319\u3057\u305f\u9806\u756a\u3067\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\n##`@Priority` \u3092\u4f7f\u3063\u3066\u9069\u7528\u9806\u5e8f\u3092\u6307\u5b9a\u3059\u308b\n`@Priority` \u3092\u4f7f\u7528\u3059\u308c\u3070\u3001 `beans.xml` \u306e\u8a18\u8ff0\u304c\u4e0d\u8981\u306b\u306a\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```diff:MyInterceptor.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.annotation.Priority;\nimport javax.interceptor.AroundInvoke;\nimport javax.interceptor.Interceptor;\nimport javax.interceptor.InvocationContext;\n\n@Interceptor\n@MyIntercept\n+ @Priority(10)\npublic class MyInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n        \n        System.out.println(\"before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed\");\n        \n        return result;\n    }\n}\n```\n\n```java:MyInterceptor2.java\n@Interceptor\n@MyIntercept\n@Priority(11)\npublic class MyInterceptor2 {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n        \n        System.out.println(\"before proceed 2\");\n        Object result = ic.proceed();\n        System.out.println(\"after proceed 2\");\n        \n        return result;\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   before proceed\n\u60c5\u5831:   before proceed 2\n\u60c5\u5831:   Hoge#method()\n\u60c5\u5831:   after proceed 2\n\u60c5\u5831:   after proceed\n```\n\n**\u8aac\u660e**\n\n- `@Priority` \u3067\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u30af\u30e9\u30b9\u3092\u30a2\u30ce\u30c6\u30fc\u30c8\u3057\u3066\u3001 `value` \u306b\u512a\u5148\u9806\u4f4d\u3092\u8868\u3059\u6574\u6570\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n- \u6570\u5024\u304c**\u5c0f\u3055\u3044\u65b9\u304c\u5148\u306b\u9069\u7528\u3055\u308c\u308b**\u3002\n- \u30de\u30a4\u30ca\u30b9\u5024\u3082\u53ef\u3002\n- `@Priority` \u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u3001 `beans.xml` \u306e\u8a18\u8ff0\u306f\u4e0d\u8981\u306b\u306a\u308b\u3002\n\n##\u7279\u5b9a\u306e\u30e1\u30bd\u30c3\u30c9\u3060\u3051\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u306b\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u5c5e\u6027\u3092\u4fdd\u3064\u5834\u5408\u3001\u305d\u306e\u5c5e\u6027\u3092\u542b\u3081\u3066\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u9069\u7528\u304c\u6c7a\u5b9a\u3055\u308c\u308b\u3002\n\u3053\u308c\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u7279\u5b9a\u306e\u30e1\u30bd\u30c3\u30c9\u3060\u3051\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3067\u304d\u308b\u3002\n\n###<span href=\"optional-intercept\">\u5b9f\u88c5</span>\n\n```java:OptionalIntercept.java\npackage sample.cdi.bean.interceptor;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.interceptor.InterceptorBinding;\n\n@InterceptorBinding\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.TYPE, ElementType.METHOD})\npublic @interface OptionalIntercept {\n    boolean value() default true;\n}\n```\n\n```java:OptionalInterceptor.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.annotation.Priority;\nimport javax.interceptor.AroundInvoke;\nimport javax.interceptor.Interceptor;\nimport javax.interceptor.InvocationContext;\n\n@Interceptor\n@OptionalIntercept(true)\n@Priority(100)\npublic class OptionalInterceptor {\n\n    @AroundInvoke\n    public Object intercept(InvocationContext ic) throws Exception {\n        \n        System.out.println(\"[OptionalInterceptor] before proceed\");\n        Object result = ic.proceed();\n        System.out.println(\"[OptionalInterceptor] after proceed\");\n        \n        return result;\n    }\n}\n```\n\n```java:Fuga.java\npackage sample.cdi.bean.interceptor;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\n@OptionalIntercept\npublic class Fuga {\n\n    public void method1() {\n        System.out.println(\"method1\");\n    }\n    \n    @OptionalIntercept(false)\n    public void method2() {\n        System.out.println(\"method2\");\n    }\n}\n```\n\n```java:InterceptorEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.interceptor.Fuga;\n\n@Stateless\npublic class InterceptorEjb {\n    @Inject\n    private Fuga fuga;\n    \n    public void optional() {\n        this.fuga.method1();\n        this.fuga.method2();\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   method1\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n\n\u60c5\u5831:   method2\n```\n\n**\u8aac\u660e**\n\n```java:OptionalIntercept.java\npublic @interface OptionalIntercept {\n    boolean value() default true;\n}\n```\n\n- \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306b boolean \u578b\u306e `value` \u3092\u8ffd\u52a0\u3057\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3068\u3057\u3066 `true` \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n```java:OptionalInterceptor.java\n@Interceptor\n@OptionalIntercept(true)\n@Priority(100)\npublic class OptionalInterceptor {\n```\n\n- \u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u65b9\u306b\u81ea\u4f5c\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3068\u304d\u306b\u3001\u5024\u306b `true` \u3092\u6307\u5b9a\u3059\u308b\uff08\u7701\u7565\u53ef\uff09\u3002\n- \u3053\u3046\u3059\u308b\u3053\u3068\u3067\u3001 `value` \u306b `true` \u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3068\u304d\u306b\u9650\u308a\u3001\u3053\u306e\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n```java:Fuga.java\n@Dependent\n@OptionalIntercept\npublic class Fuga {\n\n    public void method1() {\n        System.out.println(\"method1\");\n    }\n    \n    @OptionalIntercept(false)\n    public void method2() {\n        System.out.println(\"method2\");\n    }\n```\n\n- `Fuga` \u30af\u30e9\u30b9\u306f\u3001\u30af\u30e9\u30b9\u81ea\u4f53\u304c `@OptionalIntercept` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\u3088\u3063\u3066\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u306b\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n- \u3057\u304b\u3057\u3001 `method2()` \u306f `@OptionalIntercept(false)` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u9069\u7528\u5bfe\u8c61\u5916\u306b\u306a\u308b\u3002\n\n\u7279\u5b9a\u306e\u5c5e\u6027\u306f\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u308b\u304b\u3069\u3046\u304b\u306e\u5224\u5b9a\u306b\u4f7f\u7528\u3057\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u3001\u5c5e\u6027\u3092 `@Nonbinding` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n\n```diff:OptionalIntercept.java\npublic @interface OptionalIntercept {\n-   boolean value() default true;\n+   @Nonbinding boolean value() default true;\n}\n```\n\n#`@Stereotype` \u3067\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u307e\u3068\u3081\u308b\n\u300c\u8907\u6570\u306e\u30af\u30e9\u30b9\u306b\u540c\u3058\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306e\u7d44\u307f\u5408\u308f\u305b\u3092\u3044\u304f\u3064\u3082\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u300d\n\u306a\u3093\u3066\u3053\u3068\u306b\u306a\u308b\u3068\u3001\u6bce\u56de\u8a2d\u5b9a\u3059\u308b\u306e\u3082\u9762\u5012\u3060\u3057\u3001\u7d44\u307f\u5408\u308f\u305b\u304c\u5909\u66f4\u306b\u306a\u3063\u305f\u3068\u304d\u306b\u4fee\u6b63\u3082\u5927\u5909\u306b\u306a\u308b\u3002\n\n\u305d\u3046\u3044\u3046\u5834\u5408\u306f\u3001 `@Stereotype` \u3067\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u307e\u3068\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:MyStereotype.java\npackage sample.cdi.bean.stereotype;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\nimport javax.enterprise.context.RequestScoped;\nimport javax.enterprise.inject.Stereotype;\nimport sample.cdi.bean.interceptor.OptionalIntercept;\n\n@Stereotype\n@RequestScoped\n@OptionalIntercept\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyStereotype {\n}\n```\n\n\u203b`OptionalIntercept` \u306f\u3001 [\u4ee5\u524d](#\u7279\u5b9a\u306e\u30e1\u30bd\u30c3\u30c9\u3060\u3051\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u3092\u9069\u7528\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b) \u4f5c\u3063\u305f\u81ea\u4f5c\u306e\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u7528\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3002\n\n```java:Hoge.java\npackage sample.cdi.bean.stereotype;\n\n@MyStereotype\npublic class Hoge {\n    \n    public void method() {\n        System.out.println(\"Hoge.hash = \" + hashCode());\n    }\n}\n```\n\n```java:StereotypeEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.stereotype.Hoge;\n\n@Stateless\npublic class StereotypeEjb {\n    @Inject\n    private Hoge hoge;\n    \n    public void execute() {\n        this.hoge.method();\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   Hoge.hash = 2111292230\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   Hoge.hash = 1615190599\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n\n\u60c5\u5831:   [OptionalInterceptor] before proceed\n\u60c5\u5831:   Hoge.hash = 1861411388\n\u60c5\u5831:   [OptionalInterceptor] after proceed\n```\n\n**\u8aac\u660e**\n\n```java:MyStereotype.java\n@Stereotype\n@RequestScoped\n@OptionalIntercept\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyStereotype {\n```\n\n- \u3072\u3068\u307e\u3068\u3081\u306b\u3057\u305f\u3044\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3068 `@Stereotype` \u3092\u3001\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u306b\u8a2d\u5b9a\u3059\u308b\uff08`@MyStereotype`\uff09\u3002\n- \u3059\u308b\u3068\u3001\u81ea\u4f5c\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3060\u3051\u3067\u3001\u3072\u3068\u307e\u3068\u3081\u306b\u3057\u305f\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u9069\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n    - \u4f8b\u3067\u306f\u3001 `@RequestScoped` \u3068 `@OptionalIntercept` \u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3002\n\n#\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\n\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u3068\u306f\u3001\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u306e\u3053\u3068\u3002\nCDI \u306b\u306f\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u3092\u7c21\u5358\u306b\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u306b\u3064\u3044\u3066\u306f\u3001\n\n- [Decorator \u30d1\u30bf\u30fc\u30f3 - Wikipedia](http://ja.wikipedia.org/wiki/Decorator_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3)\n- [12. Decorator \u30d1\u30bf\u30fc\u30f3 | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)](http://www.techscore.com/tech/DesignPattern/Decorator.html/)\n\n\u3053\u306e\u8fba\u3092\u53c2\u7167\u306e\u3053\u3068\u3002\n\n\u3053\u308c\u3092\u5229\u7528\u3059\u308c\u3070\u3001\u65e2\u5b58\u306e CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u5bfe\u3057\u3066\u3001\u67d4\u8edf\u306a\u6a5f\u80fd\u62e1\u5f35\u3092\u65bd\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n**\u5b9f\u88c5**\n\n```java:Hoge.java\npackage sample.cdi.bean.decorator;\n\nimport javax.enterprise.context.Dependent;\n\n@Dependent\npublic class Hoge implements MyInterface {\n    \n    @Override\n    public void method() {\n        System.out.println(\"Hoge#method1()\");\n    }\n}\n```\n\n```java:MyDecorator1.java\npackage sample.cdi.bean.decorator;\n\nimport javax.annotation.Priority;\nimport javax.decorator.Decorator;\nimport javax.decorator.Delegate;\nimport javax.inject.Inject;\n\n@Decorator @Priority(100)\npublic class MyDecorator1 implements MyInterface {\n    @Inject @Delegate\n    private MyInterface delegate;\n\n    @Override\n    public void method() {\n        System.out.println(\"my decorator 1\");\n        this.delegate.method();\n    }\n}\n```\n\n```java:MyDecorator2.java\npackage sample.cdi.bean.decorator;\n\nimport javax.annotation.Priority;\nimport javax.decorator.Decorator;\nimport javax.decorator.Delegate;\nimport javax.inject.Inject;\n\n@Decorator @Priority(101)\npublic class MyDecorator2 implements MyInterface {\n    @Inject @Delegate\n    private MyInterface delegate;\n\n    @Override\n    public void method() {\n        System.out.println(\"my decorator 2\");\n        this.delegate.method();\n    }\n}\n```\n\n```java:DecoratorEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.inject.Inject;\nimport sample.cdi.bean.decorator.MyInterface;\n\n@Stateless\npublic class DecoratorEjb {\n    @Inject\n    private MyInterface obj;\n    \n    public void execute() {\n        this.obj.method();\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   my decorator 1\n\u60c5\u5831:   my decorator 2\n\u60c5\u5831:   Hoge#method1()\n```\n\n**\u8aac\u660e**\n\n```java:MyDecorator1.java\n@Decorator @Priority(100)\npublic class MyDecorator1 implements MyInterface {\n```\n\n- \u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u30d1\u30bf\u30fc\u30f3\u3092\u9069\u7528\u3059\u308b\u5bfe\u8c61\u3068\u306a\u308b\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u3092\u5b9f\u88c5\u3059\u308b\u5f62\u3067\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u306e\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3002\n- \u3053\u306e\u30af\u30e9\u30b9\u3092 `@Decorator` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3059\u308b\u3002\n- `@Priority` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u3092\u6709\u52b9\u306b\u3067\u304d\u308b\u3002  \n\u540c\u3058\u30d3\u30fc\u30f3\u306b\u8907\u6570\u306e\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u304c\u9069\u7528\u3055\u308c\u305f\u5834\u5408\u3001 `value` \u306e\u5024\u304c\u5c0f\u3055\u3044\u307b\u3046\u304c\u5148\u306b\u9069\u7528\u3055\u308c\u308b\u3002\n- [\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u5834\u5408](#\u57fa\u672cbeansxml-\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408)\u3068\u540c\u3058\u3067\u3001 `beans.xml` \u3092\u4f7f\u3063\u3066\u9806\u5e8f\u306a\u3069\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n- `beans.xml` \u3067\u5b9a\u7fa9\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n```xml:beans.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/beans_1_1.xsd\"\n       bean-discovery-mode=\"annotated\">\n  \n  <decorators>\n    <class>sample.cdi.bean.decorator.MyDecorator1</class>\n    <class>sample.cdi.bean.decorator.MyDecorator2</class>\n  </decorators>\n</beans>\n```\n\n- \u4e0a\u304b\u3089\u9806\u756a\u306b\u9069\u7528\u3055\u308c\u308b\u3002\n\n```java:MyDecorator1.java\npublic class MyDecorator1 implements MyInterface {\n    @Inject @Delegate\n    private MyInterface delegate;\n```\n\n- \u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u306b\u306f\u3001 Delegate Injection Potint \u3092\u5b9a\u7fa9\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n- Delegate Injection Point \u3068\u306f\u3001\u30c7\u30b3\u30ec\u30fc\u30c8\u5bfe\u8c61\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3059\u308b\u5834\u6240\u306e\u3053\u3068\u3067\u3001 `@Inject` \u3068 `@Delegate` \u3092\u4f7f\u3063\u3066\u5ba3\u8a00\u3059\u308b\u3002\n- \u4f8b\u3067\u306f\u30d5\u30a3\u30fc\u30eb\u30c9\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u304c\u3001\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u30e1\u30bd\u30c3\u30c9\u3084\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u306e\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3082\u53ef\u80fd\u3002\n\n```java:MyDecorator1.java\n    @Override\n    public void method() {\n        System.out.println(\"my decorator 1\");\n        this.delegate.method();\n    }\n```\n\n- \u6700\u5f8c\u306b\u30c7\u30b3\u30ec\u30fc\u30bf\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3059\u308b\u3002\n- \u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u3067 Delegate Injection Point \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u30c7\u30b3\u30ec\u30fc\u30c8\u5bfe\u8c61\u306e\u5b9f\u88c5\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n#\u30a4\u30d9\u30f3\u30c8\n\u30a4\u30d9\u30f3\u30c8\u3068\u306f\u3001 CDI \u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3001\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\u306e\u3053\u3068\u3002\n\n\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u30d1\u30bf\u30fc\u30f3\u306b\u3064\u3044\u3066\u306f\u3001\n\n- [Observer \u30d1\u30bf\u30fc\u30f3 - Wikipedia](http://ja.wikipedia.org/wiki/Observer_%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3)\n- [\u5909\u614b\u3067\u5b66\u3076Observer\u30d1\u30bf\u30fc\u30f3 - \u88cf\u7d19](http://d.hatena.ne.jp/backpaper0/20111111/1321012118)\n\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306e\u3053\u3068\u3002\n\n##\u57fa\u672c\n**\u5b9f\u88c5**\n\n```java:MyEvent.java\npackage sample.cdi.bean.event;\n\npublic class MyEvent {\n    private String name;\n\n    public MyEvent(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"MyEvent{\" + \"name=\" + name + '}';\n    }\n}\n```\n\n```java:MyObserver.java\npackage sample.cdi.bean.event;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.event.Observes;\n\n@Dependent\npublic class MyObserver {\n    \n    public void notifyMyEvent(@Observes MyEvent event) {\n        System.out.println(\"event = \" + event);\n    }\n}\n```\n\n```java:EventEjb.java\npackage sample.cdi.ejb;\n\nimport javax.ejb.Stateless;\nimport javax.enterprise.event.Event;\nimport javax.inject.Inject;\nimport sample.cdi.bean.event.MyEvent;\n\n@Stateless\npublic class EventEjb {\n    @Inject\n    private Event<MyEvent> event;\n    \n    public void execute() {\n        this.event.fire(new MyEvent(\"Hello CDI Event!!\"));\n    }\n}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   event = MyEvent{name=Hello CDI Event!!}\n```\n\n**\u8aac\u660e**\n\n- \u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3068\u304d\u306f\u3001\u5927\u304d\u304f\u4ee5\u4e0b\u306e\uff13\u3064\u306e\u8981\u7d20\u3092\u4f7f\u7528\u3059\u308b\u3002\n    - \u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08`MyEvent`\uff09\u3002\n    - \u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\uff08`MyObserver`\uff09\u3002\n    - \u30a4\u30d9\u30f3\u30c8\u767a\u706b\u7528\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08`Event`\uff09\u3002\n- \u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u4efb\u610f\u306e Java \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5229\u7528\u3067\u304d\u308b\u3002\n- \u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306f\u3001 CDI \u7ba1\u7406\u30d3\u30fc\u30f3\u306b\u6b21\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3067\u4f5c\u6210\u3067\u304d\u308b\u3002\n    - \u5f15\u6570\u306b\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d7\u3051\u53d6\u308b\u3002\n    - \u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c `@Observes` \u3067\u30a2\u30ce\u30c6\u30fc\u30c8\u3055\u308c\u3066\u3044\u308b\u3002\n- \u30a4\u30d9\u30f3\u30c8\u767a\u706b\u7528\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001 `@Inject` \u3067\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u53d6\u5f97\u3059\u308b\u3002\n    - \u578b\u5f15\u6570\u306b\u306f\u3001\u30a4\u30d9\u30f3\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u578b\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `Event#fire()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n    - \u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3055\u308c\u308b\u3068\u3001\u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n##\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n```diff:MyObserver.java\npackage sample.cdi.bean.event;\n\nimport javax.enterprise.context.Dependent;\nimport javax.enterprise.event.Observes;\nimport javax.enterprise.inject.spi.EventMetadata;\n\n@Dependent\npublic class MyObserver {\n    \n-   public void notifyMyEvent(@Observes MyEvent event) {\n+   public void notifyMyEvent(@Observes MyEvent event, EventMetadata metadata) {\n        System.out.println(\"event = \" + event);\n+       System.out.println(metadata.getInjectionPoint().getMember());\n    }\n}\n```\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   event = MyEvent{name=Hello CDI Event!!}\n\u60c5\u5831:   private javax.enterprise.event.Event sample.cdi.ejb.EventEjb.event\n```\n\n- \u30aa\u30d6\u30b6\u30fc\u30d0\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u5f15\u6570\u306b `EventMetadata` \u3092\u8ffd\u52a0\u3059\u308b\u3068\u3001\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3057\u305f\u5834\u6240\u306e\u60c5\u5831\u306a\u3069\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n##\u305d\u306e\u4ed6\u306e\u4f7f\u3044\u65b9\n[\u3053\u3061\u3089\u3092\u53c2\u7167](http://qiita.com/opengl-8080/items/73bddc7c744624c6ef9c)\u3002\n\n#\u53c2\u8003\n- [JSR-000346 Contexts and Dependency Injection for Java EE 1.1 Final Release for Evaluation][1]\n- [Java Platform, Enterprise Edition: The Java EE Tutorial Release 7 - Contents](http://docs.oracle.com/javaee/7/tutorial/)\n- [Apache DeltaSpike 1.0 | \u306a\u308b\u307b\u3069\uff01\u30b6\u30fbWeld](https://tanoseam.wordpress.com/2014/08/03/apache-deltaspike-1-0/)\n- [Seam\u306e\u4eca\u5f8c\u306b\u3064\u3044\u3066\u306e\u767a\u8868 \u2013 DeltaSpike\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u8a95\u751f\u306e\u7406\u7531 | \u306a\u308b\u307b\u3069\uff01\u30b6\u30fbWeld](https://tanoseam.wordpress.com/2012/01/16/seam_next/)\n- [JBoss Seam\u3068Apache DeltaSpike\u306e\u4eca\u5f8c](http://www.infoq.com/jp/news/2012/04/seam-deltaspike)\n- [seam - Is Seam3 and Weld CDI the same thing? - Stack Overflow](http://stackoverflow.com/questions/16421142/is-seam3-and-weld-cdi-the-same-thing)\n- [Introduction to JBoss Seam](http://docs.jboss.org/seam/2.3.1.Final/reference/html/Book-Preface.html)\n- [Java Day Tokyo 2015 \u306e\u632f\u308a\u8fd4\u308a - Programming Studio](http://www.coppermine.jp/docs/programming/2015/04/javadaytokyo2015.html)\n- [EJB and CDI Alignment and Strategy - 2-4.pdf](http://www.oracle.co.jp/jdt2015/pdf/2-4.pdf)\n- [CDI Essential Recipes at Java Day Tokyo 2015](http://www.slideshare.net/OracleMiddleJP/cdi-essential-receipe-at-java-day-tokyo-2015)\n- [TOTD #161: Java EE 6 CDI Qualifiers explained - @Default, @Any, @New, @Named (Arun Gupta, Miles to go ...)](https://blogs.oracle.com/arungupta/entry/totd_161_java_ee_6)\n- [Java EE 6: Understanding Contexts and Dependency Injection (CDI), Part 2 (Nishigaya's Weblog)](https://blogs.oracle.com/nishigaya/entry/javaee6_understanding_cdi_part_2)\n- [Chapter 4. Dependency injection and programmatic lookup](https://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#_obtaining_a_contextual_instance_by_programmatic_lookup)\n- [\u901f\u5831\uff1aCDI 2.0 \u306e JSR Review \u304c\u958b\u59cb\u3055\u308c\u307e\u3057\u305f - GlassFish Japan](http://www.coppermine.jp/docs/glassfish/2014/07/cdi2-jsr-review.html)\n- [CDI\u306b\u3088\u308b\u30c7\u30b3\u30ec\u30fc\u30bf - Challenge Java EE !](http://kikutaro777.hatenablog.com/entry/2014/06/18/232219)\n\n[1]: http://download.oracle.com/otndocs/jcp/cdi-1_1-fr-eval-spec/\n[2]: https://jcp.org/en/jsr/detail?id=299\n[3]: http://weld.cdi-spec.org/\n[4]: https://deltaspike.apache.org/\n[5]: http://myfaces.apache.org/extensions/cdi/\n[6]: https://sites.google.com/site/cdipojo/get-started\n[7]: https://www.jcp.org/en/jsr/detail?id=365\n"}