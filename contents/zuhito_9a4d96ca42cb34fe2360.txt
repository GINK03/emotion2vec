{"context": "\u3000Node-RED\u306f\u3001\u6a5f\u80fd\u6bce\u306b\u7528\u610f\u3055\u308c\u305f\u51e6\u7406\u30ce\u30fc\u30c9\u3092\u30de\u30a6\u30b9\u3067\u7e4b\u3050\u64cd\u4f5c\u3067\u3001\u7c21\u5358\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u958b\u767a\u74b0\u5883\u3067\u3059\u3002\u5f53\u521d\u306fIoT\u5411\u3051\u306b\u958b\u767a\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u7b49\u3001\u5e45\u5e83\u3044\u7528\u9014\u3067\u5229\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3000\u4eca\u56de\u306f\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u306e\u7c21\u5358\u306a\u4f8b\u3068\u3057\u3066\u300c\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u30892\u5ea6\u4ee5\u4e0a\u8a00\u308f\u308c\u305f\u5358\u8a9e\u300d\u3092\u53d6\u308a\u51fa\u3059\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u5b9f\u88c5\u3059\u308b\u51e6\u7406\n\u3000\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u3092\u3088\u304f\u77e5\u3063\u3066\u3044\u308b\u65b9\u306f\u3001tf-idf\u306e\u8003\u3048\u65b9\u3068\u8a00\u3046\u3068\u30a4\u30e1\u30fc\u30b8\u3057\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002tf-idf\u306f\u3001\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u304c\u9069\u5207\u306a\u6587\u66f8\u304c\u691c\u7d22\u7d50\u679c\u306e\u4e0a\u4f4d\u306b\u6765\u308b\u3088\u3046\u30bd\u30fc\u30c8\u3059\u308b\u6642\u306b\u4f7f\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u3001\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u4e2d\u306e\u7279\u5fb4\u7684\u306a\u5358\u8a9e\u3092\u7528\u3044\u3066\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u3059\u308b\u624b\u6cd5\u3067\u3059\u3002\n\u3000\u672c\u5b9f\u88c5\u3067\u306f\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3068\u3057\u3001\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3092\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3067\u5272\u3063\u305f\u5024\u3092\u30b9\u30b3\u30a2\u3068\u3057\u3066\u7528\u3044\u3066\u3001\u30c6\u30ad\u30b9\u30c8\u306e\u4e2d\u3067\u826f\u304f\u4f7f\u308f\u308c\u308b\u91cd\u8981\u306a\u5358\u8a9e\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\u3002\u6b63\u78ba\u306b\u306f\u300c\u5927\u4e8b\u306a\u5358\u8a9e\u3067\u3001\u304b\u3064\u4f55\u5ea6\u3082\u8a00\u308f\u308c\u305f\u5358\u8a9e\u3092\u53d6\u308a\u51fa\u3059\u300d\u51e6\u7406\u3067\u3059\u3002\n\n\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3092\u6c42\u3081\u308b\n\u3000\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u306f\u3001\u524d\u56de\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8\u3068\u540c\u3058\u51e6\u7406\u3092\u7528\u3044\u307e\u3059\u3002\u4e0b\u8a18\u306e\u69d8\u306b\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u542b\u3080input.txt\u30ce\u30fc\u30c9\u304b\u3089\u9806\u306b\u51e6\u7406\u3092\u884c\u3044\u3001\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3068\u300c\u5358\u8a9e\u300d\u306e\u30da\u30a2\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\n\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3092\u6c42\u3081\u308b\n\u3000\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3092\u6c42\u3081\u308b\u306b\u306f\u3001Microsoft Research\u304c\u7814\u7a76\u5411\u3051\u306b\u63d0\u4f9b\u3057\u3066\u3044\u308bN-gram\u691c\u7d22API\u3067\u3042\u308bMicrosoft Web N-gram Services\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u672c\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u30a6\u30a7\u30d6\u3067\u30af\u30ed\u30fc\u30eb\u3057\u305f\u30c7\u30fc\u30bf\u304b\u3089\u4f5c\u6210\u3057\u305f\u5927\u91cf(PB\u30af\u30e9\u30b9)\u306e\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u304b\u3089\u751f\u6210\u3057\u305fN-gram\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u672cAPI\u306e\u8a73\u7d30\u306f\u3001REST API\u9023\u643a\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3059\u3002\u51fa\u529b\u5024\u306f\u5bfe\u6570\u5024\u3067\u76f4\u89b3\u7684\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u5927\u304d\u3044\u5024\u307b\u3069\u3088\u304f\u4f7f\u308f\u308c\u308b\u5358\u8a9e\u3001\u5c0f\u3055\u3044\u5024\u307b\u3069\u3042\u307e\u308a\u4f7f\u308f\u308c\u306a\u3044\u5358\u8a9e\u3068\u306a\u308a\u307e\u3059\u3002\n\u203b\u6ce8: 2016\u5e7410\u6708\u73fe\u5728\u3001\u672cAPI\u306fAzure\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308bCognitive Services\u306eWeb Language Model API\u3068\u306a\u308a\u3001\u5546\u7528\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u4ed5\u69d8\u304c\u5909\u66f4\u3055\u308c\u305f\u305f\u3081\u3001\u672c\u8a18\u4e8b\u306e\u65b9\u6cd5\u306f\u305d\u306e\u307e\u307e\u7528\u3044\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\u65b0\u3057\u3044\u4ed5\u69d8\u3067\u306e\u4f7f\u7528\u65b9\u6cd5\u306f\u5225\u8a18\u4e8b\u300c2\u5206\u3067\u5b9f\u88c5\uff01Node-RED\u3067\u8a8d\u8a3c\u4ed8\u304dREST API\u547c\u3073\u51fa\u3057\u300d\u3067\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\n\n\u300c\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u30892\u5ea6\u4ee5\u4e0a\u8a00\u308f\u308c\u305f\u5358\u8a9e\u300d\u3092\u53d6\u308a\u51fa\u3059\n\u3000\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a2\u3064\u306e\u5024\u304c\u63c3\u3044\u307e\u3057\u305f\u306e\u3067\u3001\u300c\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u30892\u5ea6\u4ee5\u4e0a\u8a00\u308f\u308c\u305f\u5358\u8a9e\u300d\u3092\u62bd\u51fa\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3092\u6c42\u3081\u308b\u51e6\u7406\u306f\u3001\u305d\u306e\u307e\u307e\u7528\u3044\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3092\u6c42\u3081\u308b\u51e6\u7406\u306f\u5404\u5358\u8a9e\u6bce\u306b\u554f\u5408\u305b\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u7e70\u308a\u8fd4\u3057\u51e6\u7406\u304c\u5fc5\u8981\u3068\u306a\u308b\u30b1\u30fc\u30b9\u3067\u306f\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3067\u7d39\u4ecb\u3057\u305fwhile\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u307e\u3059\u3002while\u30d1\u30bf\u30fc\u30f3\u306f\u300c8\u306e\u5b57\u578b\u306e\u63a5\u7d9a\u300d\u3068\u305d\u306e\u524d\u306e\u300c\u30eb\u30fc\u30d7\u306e\u6761\u4ef6\u30ce\u30fc\u30c9\u300d\u304c\u76ee\u5370\u3067\u3059\u3002\n\u3000\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3068\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u306e\u51e6\u7406\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u5358\u8a9e\u3092\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u305f\u30ce\u30fc\u30c9\u306f\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n\u3000\u6b21\u306b\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002\u30c6\u30ad\u30b9\u30c8\u3092\u683c\u7d0d\u3059\u308binput.txt\u306b\u306f\u3001\u30b9\u30c6\u30a3\u30fc\u30d6\u30b8\u30e7\u30d6\u30ba\u306e\u5352\u696d\u30b9\u30d4\u30fc\u30c1\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u4e0e\u3048\u307e\u3057\u305f\u3002\u5b9f\u884c\u3059\u308b\u3068\u4e0b\u306e\u3088\u3046\u306b\u5de6\u5074\u306b\u30b9\u30b3\u30a2\u3001\u53f3\u5074\u306b\u5358\u8a9e\u304c\u5165\u3063\u305f\u914d\u5217\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\u3000\u672c\u30b9\u30d4\u30fc\u30c1\u3092\u805e\u3044\u305f\u3053\u3068\u304c\u3042\u308b\u65b9\u3067\u3042\u308c\u3070\u3001\u8a71\u306e\u5185\u5bb9\u304c\u8607\u308b\u5358\u8a9e\u304c\u591a\u304f\u5b58\u5728\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u304a\u5206\u304b\u308a\u3044\u305f\u3060\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001calligraphy(\u7f8e\u3057\u3044\u30d5\u30a9\u30f3\u30c8\u306e\u6280\u8853)\u3084typography(\u6d3b\u5b57\u306e\u4ed5\u4e0a\u304c\u308a)\u306f\u3001\u300c\u30de\u30c3\u30ad\u30f3\u30c8\u30c3\u30b7\u30e5\u304c\u7f8e\u3057\u3044\u30d5\u30a9\u30f3\u30c8\u3092\u6301\u3063\u305f\u300d\u8a71\u304b\u3089\u6765\u305f\u5358\u8a9e\u3067\u3059\u3002\u307e\u305f\u3001dots(\u70b9)\u306f\u300c\u70b9\u304c\u7dda\u3067\u7e4b\u304c\u3063\u305f\u300d\u8a71\u3068\u4e00\u81f4\u3057\u307e\u3059\u3002\u81ea\u5206\u306e\u4e3b\u5f35\u30dd\u30a4\u30f3\u30c8\u3092\u660e\u3089\u304b\u306b\u3059\u308b\u305f\u3081\u3001\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u3089\u4f55\u5ea6\u3082\u8a00\u3044\u3001\u8996\u8074\u8005\u306e\u8a18\u61b6\u306b\u5358\u8a9e\u304c\u6b8b\u308b\u30b9\u30d4\u30fc\u30c1\u306e\u4ed5\u65b9\u306f\u3001\u771f\u4f3c\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u3000\u3061\u306a\u307f\u306b\u30b9\u30b3\u30a2\u3092\u6607\u9806\u3067\u4e26\u3073\u5909\u3048\u305f\u5834\u5408\u306e\u7d50\u679c\u306f\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4e00\u822c\u7684\u306b\u6587\u66f8\u5185\u306b\u5b58\u5728\u3059\u308b\u5358\u8a9e\u304c\u3001\u3042\u307e\u308a\u6587\u7ae0\u3067\u4f7f\u308f\u308c\u3044\u306a\u3044\u5358\u8a9e\u307b\u3069\u4e0a\u4f4d\u306b\u73fe\u308c\u3066\u304d\u307e\u3059\u3002\n\n\n\u6700\u5f8c\u306b\n\u3000\u4eca\u56de\u306f\u3001Node-RED\u3092\u7528\u3044\u3066\u5c11\u3057\u8ce2\u3044\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u6b21\u56de\u3082\u5c11\u3057\u8e0f\u307f\u8fbc\u3093\u3060\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\u3000\u300cN-gram\u554f\u5408\u305b\u300d\u306e\u30ce\u30fc\u30c9\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u30ad\u30fc\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308binput.txt\u30ce\u30fc\u30c9\u306e\u5185\u5bb9\u3092\u5909\u66f4\u3057\u3066\u904a\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n[{\"id\":\"25dfda7e.da2026\",\"type\":\"inject\",\"z\":\"765ca782.89a358\",\"name\":\"\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":125.37122344970703,\"y\":378.00006008148193,\"wires\":[[\"9e72b5fa.618d48\"]]},{\"id\":\"4087f8e3.bf7808\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u7a7a\u767d\u3067\u533a\u5207\u308a\u914d\u5217\u5316\",\"func\":\"msg.payload = msg.payload.split(/\\\\s+/);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":139.37120819091797,\"y\":465.00006008148193,\"wires\":[[\"58645681.a79ba8\"]]},{\"id\":\"9354a4fb.6cab58\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u3092\u8f9e\u66f8\u9806\u3067\u30bd\u30fc\u30c8\",\"func\":\"msg.payload = msg.payload.sort();\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":145.37120819091797,\"y\":560.000075340271,\"wires\":[[\"7a82ffc9.857d\"]]},{\"id\":\"7a82ffc9.857d\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u6570\u3092\u30ab\u30a6\u30f3\u30c8\",\"func\":\"var input = msg.payload;\\nvar output = [];\\nvar str_current = null;\\nvar count = 0;\\nvar i = 0;\\n\\ndo\\n{\\n    var str_temp = input[i];\\n    if (str_current === null)\\n    {\\n        str_current = str_temp;\\n        count++;\\n    } else if (str_temp === str_current) {\\n        count++;\\n    } else {\\n        output.push(count + \\\" \\\" + str_current);\\n        str_current = str_temp;\\n        count = 1;\\n    }\\n    i++;\\n}\\nwhile (i < input.length);\\noutput.push(count + \\\" \\\" + str_current);\\n\\nmsg.payload = output;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":335.37117767333984,\"y\":560.0000905990601,\"wires\":[[\"74ac9b33.8b5364\"]]},{\"id\":\"58645681.a79ba8\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5927\u6587\u5b57\u3092\u5c0f\u6587\u5b57\u306b\u5909\u63db\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    output.push(temp.toLowerCase());\\n}\\n\\nmsg.payload = output;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":342.37120819091797,\"y\":465.00006008148193,\"wires\":[[\"d3bd232a.2c42e\"]]},{\"id\":\"74ac9b33.8b5364\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u6570\u964d\u9806\u3067\u5358\u8a9e\u3092\u30bd\u30fc\u30c8\",\"func\":\"msg.payload = msg.payload.sort(function(a, b) {\\n    return b.split(/ /)[0] - a.split(/ /)[0];\\n});\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":538.3711776733398,\"y\":560.0000600814819,\"wires\":[[\"e806e41e.17f918\"]]},{\"id\":\"eac429f9.153bd8\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2190cat input.txt\u76f8\u5f53\",\"info\":\"\",\"x\":432.37121200561523,\"y\":378.1667528152466,\"wires\":[]},{\"id\":\"b0ed9ca9.4f126\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2193tr A-Z a-z\u76f8\u5f53\",\"info\":\"\",\"x\":346.37120819091797,\"y\":429.00006008148193,\"wires\":[]},{\"id\":\"146c68fe.eb9397\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2191sed s/ /\\\\n/g\u76f8\u5f53\",\"info\":\"\",\"x\":143.37120819091797,\"y\":502.00006008148193,\"wires\":[]},{\"id\":\"7f15488d.80eab8\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2191sort\u76f8\u5f53\",\"info\":\"\",\"x\":152.37120819091797,\"y\":596.0000600814819,\"wires\":[]},{\"id\":\"a56e3414.5a91c8\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2193sort -k 1 -n -r\u76f8\u5f53\",\"info\":\"\",\"x\":542.371208190918,\"y\":524.0000600814819,\"wires\":[]},{\"id\":\"7e42236e.81bddc\",\"type\":\"switch\",\"z\":\"765ca782.89a358\",\"name\":\"i!=-1\",\"property\":\"i\",\"rules\":[{\"t\":\"neq\",\"v\":\"-1\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":105.64900588989258,\"y\":863.7965666055679,\"wires\":[[\"2fc07388.d03f8c\"],[\"b877ed1b.47881\"]]},{\"id\":\"56fad613.a90528\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"i--\",\"func\":\"msg.i--;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":481.14893341064453,\"y\":744.185440659523,\"wires\":[[\"7e42236e.81bddc\"]]},{\"id\":\"ed94f505.126b08\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"awk '2<=$1'\u76f8\u5f53\",\"info\":\"\",\"x\":168.7045440673828,\"y\":718.3333864212036,\"wires\":[]},{\"id\":\"16d0b363.e92f4d\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"i=payload.length-1\u7b49\",\"func\":\"msg.tmp = msg.payload;\\nmsg.i = msg.payload.length-1;\\nmsg.data = new Array(msg.payload.length);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":156.51154327392578,\"y\":780.6858068704605,\"wires\":[[\"7e42236e.81bddc\"]]},{\"id\":\"2fc07388.d03f8c\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"payload=tmp[i]\u7b49\",\"func\":\"msg.freq = msg.tmp[msg.i].split(/ /)[0];\\nmsg.word = msg.tmp[msg.i].split(/ /)[1];\\nmsg.payload = msg.tmp[msg.i].split(/ /)[1];\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":255.8512725830078,\"y\":857.6781822443008,\"wires\":[[\"5a969781.a56968\",\"50632d27.af9cd4\"]]},{\"id\":\"47916a19.b86e94\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"tfidf\u7b97\u51fa\u7b49\",\"func\":\"var df = new Number(msg.payload);\\nvar tfidf = msg.freq / Math.pow(2, df);\\nmsg.data[msg.i] = tfidf + \\\" \\\" + msg.word;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":732.6489601135254,\"y\":855.3054332733154,\"wires\":[[\"56fad613.a90528\"]]},{\"id\":\"efac834.f10538\",\"type\":\"debug\",\"z\":\"765ca782.89a358\",\"name\":\"\u30b9\u30b3\u30a2\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":727.0656509399414,\"y\":895.0276705026627,\"wires\":[]},{\"id\":\"5a969781.a56968\",\"type\":\"http request\",\"z\":\"765ca782.89a358\",\"name\":\"N-gram\u554f\u5408\u305b\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"http://weblm.research.microsoft.com/rest.svc/bing-body/2013-12/4/jp?u=<\u30c8\u30fc\u30af\u30f3>&p={{payload}}&format=json\",\"x\":429.7878952026367,\"y\":856.555560708046,\"wires\":[[\"62aecb88.9d5134\"]]},{\"id\":\"62aecb88.9d5134\",\"type\":\"change\",\"z\":\"765ca782.89a358\",\"name\":\"headers\u524a\u9664\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":582.5656433105469,\"y\":856.3887726068497,\"wires\":[[\"47916a19.b86e94\",\"efac834.f10538\"]]},{\"id\":\"b14837e.f4eb7c8\",\"type\":\"debug\",\"z\":\"765ca782.89a358\",\"name\":\"ifidf\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u7d50\u679c\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":507.2045593261719,\"y\":943.4999805688858,\"wires\":[]},{\"id\":\"50632d27.af9cd4\",\"type\":\"debug\",\"z\":\"765ca782.89a358\",\"name\":\"\u554f\u5408\u305b\u308b\u5358\u8a9e\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":442.4545135498047,\"y\":896.6666485071182,\"wires\":[]},{\"id\":\"57f032fe.a80fcc\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u983b\u5ea69\u4ee5\u4e0b\u306e\u5358\u8a9e\u3092\u9078\u629e\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    var count = temp.split(/ /)[0];\\n    if (count <= 9)\\n    {\\n        output.push(temp);\\n    }\\n}\\n\\nmsg.payload = output;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":409.2878723144531,\"y\":682.000075340271,\"wires\":[[\"16d0b363.e92f4d\"]]},{\"id\":\"d3bd232a.2c42e\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u82f1\u5b57\u304b\u3089\u6210\u308b\u5358\u8a9e\u306e\u307f\u9078\u629e\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    if (temp.match(/^[a-z]+$/))\\n    {\\n        output.push(temp);\\n    }\\n}\\n\\nmsg.payload = output;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":567.121208190918,\"y\":464.50006008148193,\"wires\":[[\"9354a4fb.6cab58\"]]},{\"id\":\"c67eee89.39811\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2193grep -E \\\"^[a-z]+$\\\"\u76f8\u5f53\",\"info\":\"\",\"x\":568.121208190918,\"y\":427.50006008148193,\"wires\":[]},{\"id\":\"181f9d0d.e7e063\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2191uniq -c\u76f8\u5f53\",\"info\":\"\",\"x\":335.12120819091797,\"y\":595.5000600814819,\"wires\":[]},{\"id\":\"e806e41e.17f918\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u65702\u4ee5\u4e0a\u306e\u5358\u8a9e\u3092\u9078\u629e\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    var count = temp.split(/ /)[0];\\n    if (2 <= count)\\n    {\\n        output.push(temp);\\n    }\\n}\\n\\nmsg.payload = output;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":164.62120056152344,\"y\":681.0000638961792,\"wires\":[[\"57f032fe.a80fcc\"]]},{\"id\":\"9e72b5fa.618d48\",\"type\":\"template\",\"z\":\"765ca782.89a358\",\"name\":\"input.txt\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"This is a pen.\\nGive me a pen.\\nThis pen is small.\",\"x\":259.850341796875,\"y\":377.50000381469727,\"wires\":[[\"4087f8e3.bf7808\"]]},{\"id\":\"85108454.7aef78\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"awk '9<=$1'\u76f8\u5f53\",\"info\":\"\",\"x\":410.36769104003906,\"y\":643.9815788269043,\"wires\":[]},{\"id\":\"b877ed1b.47881\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u30b9\u30b3\u30a2\u964d\u9806\u3067\u5358\u8a9e\u3092\u30bd\u30fc\u30c8\u7b49\",\"func\":\"msg.payload = msg.data;\\n\\nmsg.payload = msg.payload.sort(function(a, b) {\\n    return b.split(/ /)[0] - a.split(/ /)[0];\\n});\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":281.1818313598633,\"y\":943.8181705474854,\"wires\":[[\"b14837e.f4eb7c8\"]]}]\n\n\u3000[Node-RED](http://nodered.org/)\u306f\u3001\u6a5f\u80fd\u6bce\u306b\u7528\u610f\u3055\u308c\u305f\u51e6\u7406\u30ce\u30fc\u30c9\u3092\u30de\u30a6\u30b9\u3067\u7e4b\u3050\u64cd\u4f5c\u3067\u3001\u7c21\u5358\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u958b\u767a\u74b0\u5883\u3067\u3059\u3002\u5f53\u521d\u306fIoT\u5411\u3051\u306b\u958b\u767a\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u7b49\u3001\u5e45\u5e83\u3044\u7528\u9014\u3067\u5229\u7528\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3000\u4eca\u56de\u306f\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u306e\u7c21\u5358\u306a\u4f8b\u3068\u3057\u3066\u300c\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u30892\u5ea6\u4ee5\u4e0a\u8a00\u308f\u308c\u305f\u5358\u8a9e\u300d\u3092\u53d6\u308a\u51fa\u3059\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n# \u5b9f\u88c5\u3059\u308b\u51e6\u7406\n\u3000\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u3092\u3088\u304f\u77e5\u3063\u3066\u3044\u308b\u65b9\u306f\u3001tf-idf\u306e\u8003\u3048\u65b9\u3068\u8a00\u3046\u3068\u30a4\u30e1\u30fc\u30b8\u3057\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002tf-idf\u306f\u3001\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u304c\u9069\u5207\u306a\u6587\u66f8\u304c\u691c\u7d22\u7d50\u679c\u306e\u4e0a\u4f4d\u306b\u6765\u308b\u3088\u3046\u30bd\u30fc\u30c8\u3059\u308b\u6642\u306b\u4f7f\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u3001\u691c\u7d22\u30ad\u30fc\u30ef\u30fc\u30c9\u4e2d\u306e\u7279\u5fb4\u7684\u306a\u5358\u8a9e\u3092\u7528\u3044\u3066\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u3059\u308b\u624b\u6cd5\u3067\u3059\u3002\n\u3000\u672c\u5b9f\u88c5\u3067\u306f\u30c6\u30ad\u30b9\u30c8\u3092\u5165\u529b\u3068\u3057\u3001\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3092\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3067\u5272\u3063\u305f\u5024\u3092\u30b9\u30b3\u30a2\u3068\u3057\u3066\u7528\u3044\u3066\u3001\u30c6\u30ad\u30b9\u30c8\u306e\u4e2d\u3067\u826f\u304f\u4f7f\u308f\u308c\u308b\u91cd\u8981\u306a\u5358\u8a9e\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\u3002\u6b63\u78ba\u306b\u306f\u300c\u5927\u4e8b\u306a\u5358\u8a9e\u3067\u3001\u304b\u3064\u4f55\u5ea6\u3082\u8a00\u308f\u308c\u305f\u5358\u8a9e\u3092\u53d6\u308a\u51fa\u3059\u300d\u51e6\u7406\u3067\u3059\u3002\n\n# \u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3092\u6c42\u3081\u308b\n\u3000\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u306f\u3001[\u524d\u56de\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u30ef\u30fc\u30c9\u30ab\u30a6\u30f3\u30c8](http://qiita.com/zuhito/items/8ba7782940059da07d4d)\u3068\u540c\u3058\u51e6\u7406\u3092\u7528\u3044\u307e\u3059\u3002\u4e0b\u8a18\u306e\u69d8\u306b\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u542b\u3080input.txt\u30ce\u30fc\u30c9\u304b\u3089\u9806\u306b\u51e6\u7406\u3092\u884c\u3044\u3001\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3068\u300c\u5358\u8a9e\u300d\u306e\u30da\u30a2\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n![wordcount_nodered.png](https://qiita-image-store.s3.amazonaws.com/0/98354/606634ba-6ca6-ca22-54f5-b62018e416b0.png)\n\n# \u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3092\u6c42\u3081\u308b\n\u3000\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3092\u6c42\u3081\u308b\u306b\u306f\u3001Microsoft Research\u304c\u7814\u7a76\u5411\u3051\u306b\u63d0\u4f9b\u3057\u3066\u3044\u308bN-gram\u691c\u7d22API\u3067\u3042\u308b[Microsoft Web N-gram Services](http://weblm.research.microsoft.com/info/)\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u672c\u30b5\u30fc\u30d3\u30b9\u306f\u3001\u30a6\u30a7\u30d6\u3067\u30af\u30ed\u30fc\u30eb\u3057\u305f\u30c7\u30fc\u30bf\u304b\u3089\u4f5c\u6210\u3057\u305f\u5927\u91cf(PB\u30af\u30e9\u30b9)\u306e\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u304b\u3089\u751f\u6210\u3057\u305fN-gram\u306e\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u672cAPI\u306e\u8a73\u7d30\u306f\u3001[REST API\u9023\u643a\u306e\u8a18\u4e8b](http://qiita.com/zuhito/items/ed5f505edaac2baeadd9)\u3067\u7d39\u4ecb\u3057\u3066\u3044\u307e\u3059\u3002\u51fa\u529b\u5024\u306f\u5bfe\u6570\u5024\u3067\u76f4\u89b3\u7684\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u5927\u304d\u3044\u5024\u307b\u3069\u3088\u304f\u4f7f\u308f\u308c\u308b\u5358\u8a9e\u3001\u5c0f\u3055\u3044\u5024\u307b\u3069\u3042\u307e\u308a\u4f7f\u308f\u308c\u306a\u3044\u5358\u8a9e\u3068\u306a\u308a\u307e\u3059\u3002\n\u203b\u6ce8: 2016\u5e7410\u6708\u73fe\u5728\u3001\u672cAPI\u306fAzure\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308bCognitive Services\u306eWeb Language Model API\u3068\u306a\u308a\u3001\u5546\u7528\u3067\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u4ed5\u69d8\u304c\u5909\u66f4\u3055\u308c\u305f\u305f\u3081\u3001\u672c\u8a18\u4e8b\u306e\u65b9\u6cd5\u306f\u305d\u306e\u307e\u307e\u7528\u3044\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u306e\u3067\u3001\u3054\u6ce8\u610f\u304f\u3060\u3055\u3044\u3002\u65b0\u3057\u3044\u4ed5\u69d8\u3067\u306e\u4f7f\u7528\u65b9\u6cd5\u306f\u5225\u8a18\u4e8b[\u300c2\u5206\u3067\u5b9f\u88c5\uff01Node-RED\u3067\u8a8d\u8a3c\u4ed8\u304dREST API\u547c\u3073\u51fa\u3057\u300d](http://qiita.com/zuhito/items/68143b767cebab4f88bc)\u3067\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\n\n# \u300c\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u30892\u5ea6\u4ee5\u4e0a\u8a00\u308f\u308c\u305f\u5358\u8a9e\u300d\u3092\u53d6\u308a\u51fa\u3059\n\u3000\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u306e\u306b\u5fc5\u8981\u306a2\u3064\u306e\u5024\u304c\u63c3\u3044\u307e\u3057\u305f\u306e\u3067\u3001\u300c\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u30892\u5ea6\u4ee5\u4e0a\u8a00\u308f\u308c\u305f\u5358\u8a9e\u300d\u3092\u62bd\u51fa\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3092\u6c42\u3081\u308b\u51e6\u7406\u306f\u3001\u305d\u306e\u307e\u307e\u7528\u3044\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u3092\u6c42\u3081\u308b\u51e6\u7406\u306f\u5404\u5358\u8a9e\u6bce\u306b\u554f\u5408\u305b\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u7e70\u308a\u8fd4\u3057\u51e6\u7406\u304c\u5fc5\u8981\u3068\u306a\u308b\u30b1\u30fc\u30b9\u3067\u306f[\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3067\u7d39\u4ecb\u3057\u305fwhile\u30d1\u30bf\u30fc\u30f3](http://qiita.com/zuhito/items/e9abfd6f1ba188f908ed#4-while%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3)\u3092\u7528\u3044\u307e\u3059\u3002while\u30d1\u30bf\u30fc\u30f3\u306f\u300c8\u306e\u5b57\u578b\u306e\u63a5\u7d9a\u300d\u3068\u305d\u306e\u524d\u306e\u300c\u30eb\u30fc\u30d7\u306e\u6761\u4ef6\u30ce\u30fc\u30c9\u300d\u304c\u76ee\u5370\u3067\u3059\u3002\n\u3000\u300c\u6587\u66f8\u4e2d\u306e\u5358\u8a9e\u306e\u4f7f\u7528\u56de\u6570\u300d\u3068\u300c\u5358\u8a9e\u306e\u73cd\u3057\u3055\u300d\u306e\u51e6\u7406\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u5358\u8a9e\u3092\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u305f\u30ce\u30fc\u30c9\u306f\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n![tfidf.png](https://qiita-image-store.s3.amazonaws.com/0/98354/521e7837-ebea-d6c8-3905-756b36cd8198.png)\n\n\u3000\u6b21\u306b\u5b9f\u969b\u306b\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002\u30c6\u30ad\u30b9\u30c8\u3092\u683c\u7d0d\u3059\u308binput.txt\u306b\u306f\u3001[\u30b9\u30c6\u30a3\u30fc\u30d6\u30b8\u30e7\u30d6\u30ba\u306e\u5352\u696d\u30b9\u30d4\u30fc\u30c1](http://news.stanford.edu/news/2005/june15/jobs-061505.html)\u306e\u30c6\u30ad\u30b9\u30c8\u3092\u4e0e\u3048\u307e\u3057\u305f\u3002\u5b9f\u884c\u3059\u308b\u3068\u4e0b\u306e\u3088\u3046\u306b\u5de6\u5074\u306b\u30b9\u30b3\u30a2\u3001\u53f3\u5074\u306b\u5358\u8a9e\u304c\u5165\u3063\u305f\u914d\u5217\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n![tfidfresult.png](https://qiita-image-store.s3.amazonaws.com/0/98354/aa5b6afe-45a3-07e2-9480-72e6cc700110.png)\n\n\u3000\u672c\u30b9\u30d4\u30fc\u30c1\u3092\u805e\u3044\u305f\u3053\u3068\u304c\u3042\u308b\u65b9\u3067\u3042\u308c\u3070\u3001\u8a71\u306e\u5185\u5bb9\u304c\u8607\u308b\u5358\u8a9e\u304c\u591a\u304f\u5b58\u5728\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u304a\u5206\u304b\u308a\u3044\u305f\u3060\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001calligraphy(\u7f8e\u3057\u3044\u30d5\u30a9\u30f3\u30c8\u306e\u6280\u8853)\u3084typography(\u6d3b\u5b57\u306e\u4ed5\u4e0a\u304c\u308a)\u306f\u3001\u300c\u30de\u30c3\u30ad\u30f3\u30c8\u30c3\u30b7\u30e5\u304c\u7f8e\u3057\u3044\u30d5\u30a9\u30f3\u30c8\u3092\u6301\u3063\u305f\u300d\u8a71\u304b\u3089\u6765\u305f\u5358\u8a9e\u3067\u3059\u3002\u307e\u305f\u3001dots(\u70b9)\u306f\u300c\u70b9\u304c\u7dda\u3067\u7e4b\u304c\u3063\u305f\u300d\u8a71\u3068\u4e00\u81f4\u3057\u307e\u3059\u3002\u81ea\u5206\u306e\u4e3b\u5f35\u30dd\u30a4\u30f3\u30c8\u3092\u660e\u3089\u304b\u306b\u3059\u308b\u305f\u3081\u3001\u5927\u4e8b\u306a\u4e8b\u3060\u304b\u3089\u4f55\u5ea6\u3082\u8a00\u3044\u3001\u8996\u8074\u8005\u306e\u8a18\u61b6\u306b\u5358\u8a9e\u304c\u6b8b\u308b\u30b9\u30d4\u30fc\u30c1\u306e\u4ed5\u65b9\u306f\u3001\u771f\u4f3c\u3057\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u3000\u3061\u306a\u307f\u306b\u30b9\u30b3\u30a2\u3092\u6607\u9806\u3067\u4e26\u3073\u5909\u3048\u305f\u5834\u5408\u306e\u7d50\u679c\u306f\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u4e00\u822c\u7684\u306b\u6587\u66f8\u5185\u306b\u5b58\u5728\u3059\u308b\u5358\u8a9e\u304c\u3001\u3042\u307e\u308a\u6587\u7ae0\u3067\u4f7f\u308f\u308c\u3044\u306a\u3044\u5358\u8a9e\u307b\u3069\u4e0a\u4f4d\u306b\u73fe\u308c\u3066\u304d\u307e\u3059\u3002\n\n![tfidfresult2.png](https://qiita-image-store.s3.amazonaws.com/0/98354/1f8b71f1-6c47-d7b1-3056-8a0be88ac447.png)\n\n# \u6700\u5f8c\u306b\n\u3000\u4eca\u56de\u306f\u3001Node-RED\u3092\u7528\u3044\u3066\u5c11\u3057\u8ce2\u3044\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u6b21\u56de\u3082\u5c11\u3057\u8e0f\u307f\u8fbc\u3093\u3060\u81ea\u7136\u8a00\u8a9e\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\u3000\u300cN-gram\u554f\u5408\u305b\u300d\u306e\u30ce\u30fc\u30c9\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u30ad\u30fc\u3092\u8ffd\u52a0\u3057\u3001\u30c6\u30ad\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308binput.txt\u30ce\u30fc\u30c9\u306e\u5185\u5bb9\u3092\u5909\u66f4\u3057\u3066\u904a\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n[{\"id\":\"25dfda7e.da2026\",\"type\":\"inject\",\"z\":\"765ca782.89a358\",\"name\":\"\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":125.37122344970703,\"y\":378.00006008148193,\"wires\":[[\"9e72b5fa.618d48\"]]},{\"id\":\"4087f8e3.bf7808\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u7a7a\u767d\u3067\u533a\u5207\u308a\u914d\u5217\u5316\",\"func\":\"msg.payload = msg.payload.split(/\\\\s+/);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":139.37120819091797,\"y\":465.00006008148193,\"wires\":[[\"58645681.a79ba8\"]]},{\"id\":\"9354a4fb.6cab58\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u3092\u8f9e\u66f8\u9806\u3067\u30bd\u30fc\u30c8\",\"func\":\"msg.payload = msg.payload.sort();\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":145.37120819091797,\"y\":560.000075340271,\"wires\":[[\"7a82ffc9.857d\"]]},{\"id\":\"7a82ffc9.857d\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u6570\u3092\u30ab\u30a6\u30f3\u30c8\",\"func\":\"var input = msg.payload;\\nvar output = [];\\nvar str_current = null;\\nvar count = 0;\\nvar i = 0;\\n\\ndo\\n{\\n    var str_temp = input[i];\\n    if (str_current === null)\\n    {\\n        str_current = str_temp;\\n        count++;\\n    } else if (str_temp === str_current) {\\n        count++;\\n    } else {\\n        output.push(count + \\\" \\\" + str_current);\\n        str_current = str_temp;\\n        count = 1;\\n    }\\n    i++;\\n}\\nwhile (i < input.length);\\noutput.push(count + \\\" \\\" + str_current);\\n\\nmsg.payload = output;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":335.37117767333984,\"y\":560.0000905990601,\"wires\":[[\"74ac9b33.8b5364\"]]},{\"id\":\"58645681.a79ba8\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5927\u6587\u5b57\u3092\u5c0f\u6587\u5b57\u306b\u5909\u63db\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    output.push(temp.toLowerCase());\\n}\\n\\nmsg.payload = output;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":342.37120819091797,\"y\":465.00006008148193,\"wires\":[[\"d3bd232a.2c42e\"]]},{\"id\":\"74ac9b33.8b5364\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u6570\u964d\u9806\u3067\u5358\u8a9e\u3092\u30bd\u30fc\u30c8\",\"func\":\"msg.payload = msg.payload.sort(function(a, b) {\\n    return b.split(/ /)[0] - a.split(/ /)[0];\\n});\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":538.3711776733398,\"y\":560.0000600814819,\"wires\":[[\"e806e41e.17f918\"]]},{\"id\":\"eac429f9.153bd8\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2190cat input.txt\u76f8\u5f53\",\"info\":\"\",\"x\":432.37121200561523,\"y\":378.1667528152466,\"wires\":[]},{\"id\":\"b0ed9ca9.4f126\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2193tr A-Z a-z\u76f8\u5f53\",\"info\":\"\",\"x\":346.37120819091797,\"y\":429.00006008148193,\"wires\":[]},{\"id\":\"146c68fe.eb9397\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2191sed s/ /\\\\n/g\u76f8\u5f53\",\"info\":\"\",\"x\":143.37120819091797,\"y\":502.00006008148193,\"wires\":[]},{\"id\":\"7f15488d.80eab8\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2191sort\u76f8\u5f53\",\"info\":\"\",\"x\":152.37120819091797,\"y\":596.0000600814819,\"wires\":[]},{\"id\":\"a56e3414.5a91c8\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2193sort -k 1 -n -r\u76f8\u5f53\",\"info\":\"\",\"x\":542.371208190918,\"y\":524.0000600814819,\"wires\":[]},{\"id\":\"7e42236e.81bddc\",\"type\":\"switch\",\"z\":\"765ca782.89a358\",\"name\":\"i!=-1\",\"property\":\"i\",\"rules\":[{\"t\":\"neq\",\"v\":\"-1\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":105.64900588989258,\"y\":863.7965666055679,\"wires\":[[\"2fc07388.d03f8c\"],[\"b877ed1b.47881\"]]},{\"id\":\"56fad613.a90528\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"i--\",\"func\":\"msg.i--;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":481.14893341064453,\"y\":744.185440659523,\"wires\":[[\"7e42236e.81bddc\"]]},{\"id\":\"ed94f505.126b08\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"awk '2<=$1'\u76f8\u5f53\",\"info\":\"\",\"x\":168.7045440673828,\"y\":718.3333864212036,\"wires\":[]},{\"id\":\"16d0b363.e92f4d\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"i=payload.length-1\u7b49\",\"func\":\"msg.tmp = msg.payload;\\nmsg.i = msg.payload.length-1;\\nmsg.data = new Array(msg.payload.length);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":156.51154327392578,\"y\":780.6858068704605,\"wires\":[[\"7e42236e.81bddc\"]]},{\"id\":\"2fc07388.d03f8c\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"payload=tmp[i]\u7b49\",\"func\":\"msg.freq = msg.tmp[msg.i].split(/ /)[0];\\nmsg.word = msg.tmp[msg.i].split(/ /)[1];\\nmsg.payload = msg.tmp[msg.i].split(/ /)[1];\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":255.8512725830078,\"y\":857.6781822443008,\"wires\":[[\"5a969781.a56968\",\"50632d27.af9cd4\"]]},{\"id\":\"47916a19.b86e94\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"tfidf\u7b97\u51fa\u7b49\",\"func\":\"var df = new Number(msg.payload);\\nvar tfidf = msg.freq / Math.pow(2, df);\\nmsg.data[msg.i] = tfidf + \\\" \\\" + msg.word;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":732.6489601135254,\"y\":855.3054332733154,\"wires\":[[\"56fad613.a90528\"]]},{\"id\":\"efac834.f10538\",\"type\":\"debug\",\"z\":\"765ca782.89a358\",\"name\":\"\u30b9\u30b3\u30a2\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":727.0656509399414,\"y\":895.0276705026627,\"wires\":[]},{\"id\":\"5a969781.a56968\",\"type\":\"http request\",\"z\":\"765ca782.89a358\",\"name\":\"N-gram\u554f\u5408\u305b\",\"method\":\"GET\",\"ret\":\"txt\",\"url\":\"http://weblm.research.microsoft.com/rest.svc/bing-body/2013-12/4/jp?u=<\u30c8\u30fc\u30af\u30f3>&p={{payload}}&format=json\",\"x\":429.7878952026367,\"y\":856.555560708046,\"wires\":[[\"62aecb88.9d5134\"]]},{\"id\":\"62aecb88.9d5134\",\"type\":\"change\",\"z\":\"765ca782.89a358\",\"name\":\"headers\u524a\u9664\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":582.5656433105469,\"y\":856.3887726068497,\"wires\":[[\"47916a19.b86e94\",\"efac834.f10538\"]]},{\"id\":\"b14837e.f4eb7c8\",\"type\":\"debug\",\"z\":\"765ca782.89a358\",\"name\":\"ifidf\u30b9\u30b3\u30a2\u30ea\u30f3\u30b0\u7d50\u679c\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":507.2045593261719,\"y\":943.4999805688858,\"wires\":[]},{\"id\":\"50632d27.af9cd4\",\"type\":\"debug\",\"z\":\"765ca782.89a358\",\"name\":\"\u554f\u5408\u305b\u308b\u5358\u8a9e\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":442.4545135498047,\"y\":896.6666485071182,\"wires\":[]},{\"id\":\"57f032fe.a80fcc\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u983b\u5ea69\u4ee5\u4e0b\u306e\u5358\u8a9e\u3092\u9078\u629e\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    var count = temp.split(/ /)[0];\\n    if (count <= 9)\\n    {\\n        output.push(temp);\\n    }\\n}\\n\\nmsg.payload = output;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":409.2878723144531,\"y\":682.000075340271,\"wires\":[[\"16d0b363.e92f4d\"]]},{\"id\":\"d3bd232a.2c42e\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u82f1\u5b57\u304b\u3089\u6210\u308b\u5358\u8a9e\u306e\u307f\u9078\u629e\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    if (temp.match(/^[a-z]+$/))\\n    {\\n        output.push(temp);\\n    }\\n}\\n\\nmsg.payload = output;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":567.121208190918,\"y\":464.50006008148193,\"wires\":[[\"9354a4fb.6cab58\"]]},{\"id\":\"c67eee89.39811\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2193grep -E \\\"^[a-z]+$\\\"\u76f8\u5f53\",\"info\":\"\",\"x\":568.121208190918,\"y\":427.50006008148193,\"wires\":[]},{\"id\":\"181f9d0d.e7e063\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"\u2191uniq -c\u76f8\u5f53\",\"info\":\"\",\"x\":335.12120819091797,\"y\":595.5000600814819,\"wires\":[]},{\"id\":\"e806e41e.17f918\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u5358\u8a9e\u65702\u4ee5\u4e0a\u306e\u5358\u8a9e\u3092\u9078\u629e\",\"func\":\"var input = msg.payload;\\nvar output = [];\\n\\nfor (var i = 0; i < input.length; i++)\\n{\\n    var temp = input[i];\\n    var count = temp.split(/ /)[0];\\n    if (2 <= count)\\n    {\\n        output.push(temp);\\n    }\\n}\\n\\nmsg.payload = output;\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":164.62120056152344,\"y\":681.0000638961792,\"wires\":[[\"57f032fe.a80fcc\"]]},{\"id\":\"9e72b5fa.618d48\",\"type\":\"template\",\"z\":\"765ca782.89a358\",\"name\":\"input.txt\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"This is a pen.\\nGive me a pen.\\nThis pen is small.\",\"x\":259.850341796875,\"y\":377.50000381469727,\"wires\":[[\"4087f8e3.bf7808\"]]},{\"id\":\"85108454.7aef78\",\"type\":\"comment\",\"z\":\"765ca782.89a358\",\"name\":\"awk '9<=$1'\u76f8\u5f53\",\"info\":\"\",\"x\":410.36769104003906,\"y\":643.9815788269043,\"wires\":[]},{\"id\":\"b877ed1b.47881\",\"type\":\"function\",\"z\":\"765ca782.89a358\",\"name\":\"\u30b9\u30b3\u30a2\u964d\u9806\u3067\u5358\u8a9e\u3092\u30bd\u30fc\u30c8\u7b49\",\"func\":\"msg.payload = msg.data;\\n\\nmsg.payload = msg.payload.sort(function(a, b) {\\n    return b.split(/ /)[0] - a.split(/ /)[0];\\n});\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":281.1818313598633,\"y\":943.8181705474854,\"wires\":[[\"b14837e.f4eb7c8\"]]}]\n```\n", "tags": ["node-red", "Node.js", "JavaScript", "CognitiveServices", "Azure"]}