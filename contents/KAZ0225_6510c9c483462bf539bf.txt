{"context": "Zabbix\u306eicmpping\u3067\u3059\u304c\u3001\u5b9f\u969b\u306ffping\u3092\u5b9f\u884c\u3057\u3066\u5024\u3092\u53d6\u5f97\u3057\u3066\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001icmpping\u76e3\u8996\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306bps\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u5408\u3048\u3070fping\u306e\u30d7\u30ed\u30bb\u30b9\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n]# ps -ef|grep fping\nzabbix   20186  1494  0 16:52 ?        00:00:00 sh -c /usr/sbin/fping -C3 2>&1 </tmp/zabbix_server_1494.pinger;/usr/sbin/fping6 -C3 2>&1 </tmp/zabbix_server_1494.pinger;\nzabbix   20187 20186  0 16:52 ?        00:00:00 /usr/sbin/fping -C3\nroot     20189 20149  0 16:52 pts/0    00:00:00 grep fping\n\n\u56e0\u307f\u306bfping\u5b9f\u884c\u306e\u969b\u3001\u8907\u6570\u30db\u30b9\u30c8\u306bping\u3092\u884c\u3046\u6a5f\u80fd\u304c\u3042\u308a\u3001Zabbix\u3082\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u306e\u30ea\u30b9\u30c8\u306f\u300c/tmp/zabbix_server_PID.pinger\u300d\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u76e3\u8996\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n]# cat /tmp/zabbix_server_1494.pinger\n192.168.xxx.101\n192.168.xxx.102\n127.0.0.1\n\n\u4e0a\u8a18\u306ficmpping\u306e\u7b2c\uff11\u5f15\u6570\u306e<target>\u4ee5\u5916\u306e\u5f15\u6570\u304c\u540c\u3058icmpping\u30923\u3064\u767b\u9332\u3057\u305f\u5834\u5408\u306b\u306a\u308a\u307e\u3059\u3002\n\u3067\u3001\u5b9f\u969b\u306bfping\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u60c5\u5831\u304c\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002\n]# /usr/sbin/fping -C3 2>&1 </tmp/test.tmp \n127.0.0.1\u2002\u2002\u2002\u2002\u2002\u2002 : [0], 96 bytes, 0.03 ms (0.03 avg, 0% loss)\n192.168.xxx.101 : [0], 96 bytes, 0.02 ms (0.02 avg, 0% loss)\n127.0.0.1\u2002\u2002\u2002\u2002\u2002\u2002 : [1], 96 bytes, 0.06 ms (0.04 avg, 0% loss)\n192.168.xxx.101 : [1], 96 bytes, 0.02 ms (0.02 avg, 0% loss)\nICMP Host Unreachable from 192.168.xxx.xxx for ICMP Echo sent to 192.168.xxx.102\nICMP Host Unreachable from 192.168.xxx.xxx for ICMP Echo sent to 192.168.xxx.102\n127.0.0.1\u2002\u2002\u2002 \u2002\u2002\u2002: [2], 96 bytes, 0.02 ms (0.03 avg, 0% loss)\n192.168.xxx.101 : [2], 96 bytes, 0.02 ms (0.02 avg, 0% loss)\n\n192.168.xxx.102 : - - -\n127.0.0.1\u2002\u2002\u2002\u2002\u2002\u2002 : 0.03 0.06 0.02\n192.168.xxx.101 : 0.02 0.02 0.02\n\n\u203b\uff1a192.168.xxx.102\u306f\u5b58\u5728\u3057\u306a\u3044IP\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\n\u4e0a\u8a18\u7d50\u679c\u3067\u4e0b\u8a18\u306e\u30d5\u30a9\u30fc\u30de\u3068\u306b\u4e00\u81f4\u3057\u3001\u56de\u6570\u304c0\u304b\u3089-C \u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6307\u5b9a\u3057\u305f\u56de\u6570\u307e\u3067\u304c\u4e00\u3064\u3067\u3082\u5b58\u5728\u3059\u308b\u5834\u5408\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u3042\u3063\u305f\u3068\u5224\u65ad\u3057\u307e\u3059\u3002\n               \u56de\u6570\nIP\u30a2\u30c9\u30ec\u30b9  :  [n] \u2026\n\n\u307e\u305f\u3001\u4e0a\u8a18\u306e\u30c1\u30a7\u30c3\u30af\u3092\u30af\u30ea\u30a2\u5f8c\u3001\u4e0b\u8a18\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u4e00\u81f4\u3059\u308b\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n               Mix  Max  Avg\nIP\u30a2\u30c9\u30ec\u30b9  :  x.xx x.xx x.xx \n\n\nicmpping\u76e3\u8996\u306b\u306f\u4e0b\u8a18\u306e\uff13\u3064\u304c\u3042\u308a\u307e\u3059\u3002\nicmpping[<target>,<packets>,<interval>,<size>,<timeout>]\nicmppingloss[<target>,<packets>,<interval>,<size>,<timeout>]\nicmppingsec[<target>,<packets>,<interval>,<size>,<timeout>,<mode>]\n\nicmppingsec\u76e3\u8996\u306e\u307f\u7b2c\uff16\u5f15\u6570\u304c\u3042\u308a\u3001min\u3001max\u3001avg\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\u306e\u3044\u305a\u308c\u304b1\u3064\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u7b2c\uff12\u5f15\u6570\uff5e\u7b2c\uff15\u5f15\u6570\u306efping\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5bfe\u5fdc\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u7b2c\uff12\u5f15\u6570\u4ee5\u5916\u306fZabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3068fping\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u540c\u4e00\u306b\u306a\u308a\u307e\u3059\u3002\nicmpping[<target>,<packets>,<interval>,<size>,<timeout>]\n\n\u7b2c\uff12\u5f15\u6570 <packets>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:3\u56de\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -C\n\u7b2c\uff13\u5f15\u6570 <interval>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:1000\u30df\u30ea\u79d2\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -p\n\u7b2c\uff14\u5f15\u6570 <size>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:68\u30d0\u30a4\u30c8\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -b\n\u7b2c\uff15\u5f15\u6570 <timeout>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:500\u30df\u30ea\u79d2\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -t\nicmpping\u76e3\u8996\u306f\u300cIP\u30a2\u30c9\u30ec\u30b9 : [n]\u300d\u304c\n\u30001\u56de\u3067\u3082\u3042\u308c\u30701\n\u30001\u56de\u3082\u7121\u3051\u308c\u30700\n\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\nicmppingloss\u76e3\u8996\u306f\u300cIP\u30a2\u30c9\u30ec\u30b9 : [n]\u300d\u306e\u56de\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3001\n\u3000(-C\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u5024 - \u56de\u6570) / -C\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u5024 * 100\n\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\nicmppingsec\u76e3\u8996\u306f\u300cIP\u30a2\u30c9\u30ec\u30b9  :  x.xx x.xx x.xx \u300d\u306e\n\u3000<mode>\u306b\u6307\u5b9a\u3057\u305fmin max avg\u306b\u5bfe\u5fdc\u3059\u308b\u5024\u3092\n\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\u203b\uff1a\u4f46\u3057\u3001\u6307\u5b9a\u3057\u305fmin max avg\u306b\u5bfe\u5fdc\u3059\u308b\u5024\u304c\u6570\u5024\u3058\u3083\u306a\u3044\u5834\u5408\u306f0\u304c\u8fd4\u5374\u3055\u308c\u307e\u3059\u3002\nZabbix\u306eicmpping\u3067\u3059\u304c\u3001\u5b9f\u969b\u306ffping\u3092\u5b9f\u884c\u3057\u3066\u5024\u3092\u53d6\u5f97\u3057\u3066\u307e\u3059\u3002\n\n\u306a\u306e\u3067\u3001icmpping\u76e3\u8996\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306bps\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u5408\u3048\u3070fping\u306e\u30d7\u30ed\u30bb\u30b9\u60c5\u5831\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\n```\n]# ps -ef|grep fping\nzabbix   20186  1494  0 16:52 ?        00:00:00 sh -c /usr/sbin/fping -C3 2>&1 </tmp/zabbix_server_1494.pinger;/usr/sbin/fping6 -C3 2>&1 </tmp/zabbix_server_1494.pinger;\nzabbix   20187 20186  0 16:52 ?        00:00:00 /usr/sbin/fping -C3\nroot     20189 20149  0 16:52 pts/0    00:00:00 grep fping\n```\n\n\u56e0\u307f\u306bfping\u5b9f\u884c\u306e\u969b\u3001\u8907\u6570\u30db\u30b9\u30c8\u306bping\u3092\u884c\u3046\u6a5f\u80fd\u304c\u3042\u308a\u3001Zabbix\u3082\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u306e\u30ea\u30b9\u30c8\u306f\u300c/tmp/zabbix_server_PID.pinger\u300d\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u304c\u76e3\u8996\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```\n]# cat /tmp/zabbix_server_1494.pinger\n192.168.xxx.101\n192.168.xxx.102\n127.0.0.1\n```\n\n\u4e0a\u8a18\u306ficmpping\u306e\u7b2c\uff11\u5f15\u6570\u306e\\<target>\u4ee5\u5916\u306e\u5f15\u6570\u304c\u540c\u3058icmpping\u30923\u3064\u767b\u9332\u3057\u305f\u5834\u5408\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3067\u3001\u5b9f\u969b\u306bfping\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u69d8\u306a\u60c5\u5831\u304c\u53d6\u5f97\u3055\u308c\u307e\u3059\u3002\n\n```\n]# /usr/sbin/fping -C3 2>&1 </tmp/test.tmp \n127.0.0.1\u2002\u2002\u2002\u2002\u2002\u2002 : [0], 96 bytes, 0.03 ms (0.03 avg, 0% loss)\n192.168.xxx.101 : [0], 96 bytes, 0.02 ms (0.02 avg, 0% loss)\n127.0.0.1\u2002\u2002\u2002\u2002\u2002\u2002 : [1], 96 bytes, 0.06 ms (0.04 avg, 0% loss)\n192.168.xxx.101 : [1], 96 bytes, 0.02 ms (0.02 avg, 0% loss)\nICMP Host Unreachable from 192.168.xxx.xxx for ICMP Echo sent to 192.168.xxx.102\nICMP Host Unreachable from 192.168.xxx.xxx for ICMP Echo sent to 192.168.xxx.102\n127.0.0.1\u2002\u2002\u2002 \u2002\u2002\u2002: [2], 96 bytes, 0.02 ms (0.03 avg, 0% loss)\n192.168.xxx.101 : [2], 96 bytes, 0.02 ms (0.02 avg, 0% loss)\n\n192.168.xxx.102 : - - -\n127.0.0.1\u2002\u2002\u2002\u2002\u2002\u2002 : 0.03 0.06 0.02\n192.168.xxx.101 : 0.02 0.02 0.02\n```\n\n\u203b\uff1a192.168.xxx.102\u306f\u5b58\u5728\u3057\u306a\u3044IP\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\n\n\u4e0a\u8a18\u7d50\u679c\u3067\u4e0b\u8a18\u306e\u30d5\u30a9\u30fc\u30de\u3068\u306b\u4e00\u81f4\u3057\u3001\u56de\u6570\u304c0\u304b\u3089-C \u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u6307\u5b9a\u3057\u305f\u56de\u6570\u307e\u3067\u304c\u4e00\u3064\u3067\u3082\u5b58\u5728\u3059\u308b\u5834\u5408\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u3042\u3063\u305f\u3068\u5224\u65ad\u3057\u307e\u3059\u3002\n\n\n```\n               \u56de\u6570\nIP\u30a2\u30c9\u30ec\u30b9  :  [n] \u2026\n```\n\n\u307e\u305f\u3001\u4e0a\u8a18\u306e\u30c1\u30a7\u30c3\u30af\u3092\u30af\u30ea\u30a2\u5f8c\u3001\u4e0b\u8a18\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u4e00\u81f4\u3059\u308b\u60c5\u5831\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```\n               Mix  Max  Avg\nIP\u30a2\u30c9\u30ec\u30b9  :  x.xx x.xx x.xx \n\t       \n```\n\nicmpping\u76e3\u8996\u306b\u306f\u4e0b\u8a18\u306e\uff13\u3064\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\nicmpping[<target>,<packets>,<interval>,<size>,<timeout>]\nicmppingloss[<target>,<packets>,<interval>,<size>,<timeout>]\nicmppingsec[<target>,<packets>,<interval>,<size>,<timeout>,<mode>]\n```\n\nicmppingsec\u76e3\u8996\u306e\u307f\u7b2c\uff16\u5f15\u6570\u304c\u3042\u308a\u3001min\u3001max\u3001avg\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\uff09\u306e\u3044\u305a\u308c\u304b1\u3064\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u7b2c\uff12\u5f15\u6570\uff5e\u7b2c\uff15\u5f15\u6570\u306efping\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u5bfe\u5fdc\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u7b2c\uff12\u5f15\u6570\u4ee5\u5916\u306fZabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3068fping\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u540c\u4e00\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nicmpping[<target>,<packets>,<interval>,<size>,<timeout>]\n```\n\n\u7b2c\uff12\u5f15\u6570 \\<packets>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:3\u56de\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -C\n\n\u7b2c\uff13\u5f15\u6570 \\<interval>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:1000\u30df\u30ea\u79d2\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -p\n\n\u7b2c\uff14\u5f15\u6570 \\<size>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:68\u30d0\u30a4\u30c8\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -b\n\n\u7b2c\uff15\u5f15\u6570 \\<timeout>\n\u3000Zabbix\u306e\u30c7\u30d5\u30a9\u30eb\u30c8:500\u30df\u30ea\u79d2\n\u3000fping\u306e\u30dd\u30d7\u30b7\u30e7\u30f3 -t\n\n\nicmpping\u76e3\u8996\u306f\u300cIP\u30a2\u30c9\u30ec\u30b9 : [n]\u300d\u304c\n\u30001\u56de\u3067\u3082\u3042\u308c\u30701\n\u30001\u56de\u3082\u7121\u3051\u308c\u30700\n\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\nicmppingloss\u76e3\u8996\u306f\u300cIP\u30a2\u30c9\u30ec\u30b9 : [n]\u300d\u306e\u56de\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3001\n\u3000(-C\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u5024 - \u56de\u6570) / -C\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u5024 * 100\n\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\nicmppingsec\u76e3\u8996\u306f\u300cIP\u30a2\u30c9\u30ec\u30b9  :  x.xx x.xx x.xx \u300d\u306e\n\u3000\\<mode>\u306b\u6307\u5b9a\u3057\u305fmin max avg\u306b\u5bfe\u5fdc\u3059\u308b\u5024\u3092\n\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\n\u203b\uff1a\u4f46\u3057\u3001\u6307\u5b9a\u3057\u305fmin max avg\u306b\u5bfe\u5fdc\u3059\u308b\u5024\u304c\u6570\u5024\u3058\u3083\u306a\u3044\u5834\u5408\u306f0\u304c\u8fd4\u5374\u3055\u308c\u307e\u3059\u3002\n", "tags": ["zabbix"]}