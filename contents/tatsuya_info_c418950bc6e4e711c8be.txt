{"tags": ["asterisk"], "context": "Grandstream HT-503\u3092\u5229\u7528\u3057\u3001\u30a2\u30ca\u30ed\u30b0\u56de\u7dda\u3092Asterisk\u306b\u53ce\u5bb9\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u524d\u63d0\u74b0\u5883\n\nGrandstream HT-503 1.0.15.5\nAsterisk 11.25.1\n\n\nHT-503\u306e\u8a2d\u5b9a\n\u666e\u901a\u306b\u4f7f\u3046\u3068\u3053\u308d\u306f\u5272\u611b\u3057\u3066\u3001\u305f\u3076\u3093\u809d\u3068\u306a\u308b\u8a2d\u5b9a\u306f\u6b21\u306e\u90e8\u5206\n\nBasic Settings / Unconditional Call Forward to VOIP\nFXO\u5074\u304b\u3089\u7740\u4fe1\u304c\u3042\u3063\u305f\u969b\u306b\u3001SIP\u30b5\u30fc\u30d0\u306e\u3069\u306e\u30e6\u30fc\u30b6\u306bINVITE\u3092\u6295\u3052\u308b\u304b(Port\u304c5061\u306a\u306e\u306fTLS\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059)\n\n\nAdvanced Settings / Call Progress Tone\n\n\nAdvanced Settings / FXO Port / Caller ID\n\u30ca\u30f3\u30d0\u30fc\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u8a2d\u5b9a\u5fc5\u8981\n\n\nAdvanced Settings / FXO Port / Caller ID Transport Type\nCaller ID\u3092From\u30d8\u30c3\u30c0\u30fc\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3068\u3001\u540c\u3058IP\u30a2\u30c9\u30ec\u30b9\u304b\u3089Regist\u3057\u3066\u308b\n\u5225\u306eSIP\u7aef\u672b\u3068\u9593\u9055\u3063\u3066\u8a8d\u8b58\u3059\u308b\u3063\u307d\u3044(\uff1f)\u304b\u3089PPI\u3067\u6e21\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002(\u3069\u3063\u304b\u5225\u306e\u8a2d\u5b9a\u304c\u304a\u304b\u3057\u3044\u6c17\u3082\u3059\u308b\u3051\u3069\u3002)\n\n\nAdvanced Settings / FXO Termination / Channel Dialing\n\u3044\u308d\u3044\u308d\u89e6\u3063\u3066\u3069\u308c\u304c\u539f\u56e0\u304b\u5fae\u5999\u3060\u3051\u3069\u3001FXO\u304b\u3089\u629c\u3051\u308b\u306e\u306b\u82e6\u52b4\u3057\u3066\u3001\nWait for Dial-Tone\u3068Stage Method (1/2): \u304c\u602a\u3057\u3044\u6c17\u304c\u3059\u308b\u3002\n\n\nAsterisk\u5074\nAsterisk\u5074\u306f\u5225\u306b\u666e\u901a\u3067\u3001\u3053\u3093\u306a\u611f\u3058\n\nsip.conf\n[ht503_fxo]\ncontext=ht503demo\nfromdomain=voip.example.com\ndisallow=all\nallow=ulaw\nallow=gsm\ntype=peer\ninsecure=invite,port\nhost=dynamic\ntransport=tls\nencryption=yes\ndirectmedia=no\nnat=force_rport,comedia\nqualify=5000\nsecret=foobar\n\n\nextensions.conf\n; \u306f\u3058\u3081\u306e4\u884c\u306fCallerID\u3092PPI\u3067\u6e21\u3057\u3066\u308b\u304b\u3089\u5fc5\u8981\nexten => 054xxxxxxx,1,Set(CID=${SIP_HEADER(P-Preferred-Identity):5})\nexten => 054xxxxxxx,n,Set(CID=${CUT(CID,@,1)})\nexten => 054xxxxxxx,n,Set(CALLERID(name)=${CID})\nexten => 054xxxxxxx,n,Set(CALLERID(num)=${CID})\nexten => 054xxxxxxx,n,Dial(SIP/client11)\nexten => _0.,1,Dial(SIP/${EXTEN}@ht503_fxo)\n\nGrandstream HT-503\u3092\u5229\u7528\u3057\u3001\u30a2\u30ca\u30ed\u30b0\u56de\u7dda\u3092Asterisk\u306b\u53ce\u5bb9\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n# \u524d\u63d0\u74b0\u5883\n\n* Grandstream HT-503 1.0.15.5\n* Asterisk 11.25.1\n\n# HT-503\u306e\u8a2d\u5b9a\n\n\u666e\u901a\u306b\u4f7f\u3046\u3068\u3053\u308d\u306f\u5272\u611b\u3057\u3066\u3001\u305f\u3076\u3093\u809d\u3068\u306a\u308b\u8a2d\u5b9a\u306f\u6b21\u306e\u90e8\u5206\n\n### Basic Settings / Unconditional Call Forward to VOIP\n\nFXO\u5074\u304b\u3089\u7740\u4fe1\u304c\u3042\u3063\u305f\u969b\u306b\u3001SIP\u30b5\u30fc\u30d0\u306e\u3069\u306e\u30e6\u30fc\u30b6\u306bINVITE\u3092\u6295\u3052\u308b\u304b(Port\u304c5061\u306a\u306e\u306fTLS\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u304b\u3089\u3067\u3059)\n![CallFwdVoip.png](https://qiita-image-store.s3.amazonaws.com/0/25028/7c999cc8-058e-ad38-9953-3fd0feac2edd.png)\n\n### Advanced Settings / Call Progress Tone\n\n![Tone.png](https://qiita-image-store.s3.amazonaws.com/0/25028/570bb4ec-796a-5c0d-1711-ce0ef675d09d.png)\n\n### Advanced Settings / FXO Port / Caller ID\n\n\u30ca\u30f3\u30d0\u30fc\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u8a2d\u5b9a\u5fc5\u8981\n![CID.png](https://qiita-image-store.s3.amazonaws.com/0/25028/cab83c6b-06e6-47a1-a4d7-183e192068e1.png)\n\n### Advanced Settings / FXO Port / Caller ID Transport Type\n\nCaller ID\u3092From\u30d8\u30c3\u30c0\u30fc\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3068\u3001\u540c\u3058IP\u30a2\u30c9\u30ec\u30b9\u304b\u3089Regist\u3057\u3066\u308b\n\u5225\u306eSIP\u7aef\u672b\u3068\u9593\u9055\u3063\u3066\u8a8d\u8b58\u3059\u308b\u3063\u307d\u3044(\uff1f)\u304b\u3089PPI\u3067\u6e21\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002(\u3069\u3063\u304b\u5225\u306e\u8a2d\u5b9a\u304c\u304a\u304b\u3057\u3044\u6c17\u3082\u3059\u308b\u3051\u3069\u3002)\n\n![CidTransport.png](https://qiita-image-store.s3.amazonaws.com/0/25028/667307ef-e666-c537-ed17-248410d6c96a.png)\n\n### Advanced Settings / FXO Termination / Channel Dialing\n\n\u3044\u308d\u3044\u308d\u89e6\u3063\u3066\u3069\u308c\u304c\u539f\u56e0\u304b\u5fae\u5999\u3060\u3051\u3069\u3001FXO\u304b\u3089\u629c\u3051\u308b\u306e\u306b\u82e6\u52b4\u3057\u3066\u3001\nWait for Dial-Tone\u3068Stage Method (1/2): \u304c\u602a\u3057\u3044\u6c17\u304c\u3059\u308b\u3002\n\n![FXO.png](https://qiita-image-store.s3.amazonaws.com/0/25028/1c405518-0b62-44a9-7a11-3e9fb8582bd3.png)\n\n# Asterisk\u5074\n\nAsterisk\u5074\u306f\u5225\u306b\u666e\u901a\u3067\u3001\u3053\u3093\u306a\u611f\u3058\n\n### sip.conf\n\n```\n[ht503_fxo]\ncontext=ht503demo\nfromdomain=voip.example.com\ndisallow=all\nallow=ulaw\nallow=gsm\ntype=peer\ninsecure=invite,port\nhost=dynamic\ntransport=tls\nencryption=yes\ndirectmedia=no\nnat=force_rport,comedia\nqualify=5000\nsecret=foobar\n```\n\n###extensions.conf\n\n```\n; \u306f\u3058\u3081\u306e4\u884c\u306fCallerID\u3092PPI\u3067\u6e21\u3057\u3066\u308b\u304b\u3089\u5fc5\u8981\nexten => 054xxxxxxx,1,Set(CID=${SIP_HEADER(P-Preferred-Identity):5})\nexten => 054xxxxxxx,n,Set(CID=${CUT(CID,@,1)})\nexten => 054xxxxxxx,n,Set(CALLERID(name)=${CID})\nexten => 054xxxxxxx,n,Set(CALLERID(num)=${CID})\nexten => 054xxxxxxx,n,Dial(SIP/client11)\nexten => _0.,1,Dial(SIP/${EXTEN}@ht503_fxo)\n```\n"}