{"tags": ["mysql5.7", "MySQL"], "context": "\n\n\u6982\u8981\n\u30ec\u30b3\u30fc\u30c9\u6570\u304c\u5c11\u306a\u3044\u9593\u306f\u554f\u984c\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u3051\u3069\u3001\u30ec\u30b3\u30fc\u30c9\u6570\u304c\u591a\u304f\u306a\u308b\u3068\nselect insert\u3067\u30b3\u30d4\u30fc\u3059\u308b\u306e\u306f\u53b3\u3057\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3001\nEXCHANGE PARTITION\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u5225\u30c6\u30fc\u30d6\u30eb\u306b\u79fb\u52d5\u3055\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\uff08\u53e4\u304f\u306a\u3063\u305f\u30c7\u30fc\u30bf\u3092\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b\u3068\u304d\u306b\u4fbf\u5229\uff09\n\n\u6e96\u5099\n\n\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3068\u30a2\u30fc\u30ab\u30a4\u30d6\u7528\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u306f\u5143\u30c6\u30fc\u30d6\u30eb\u3068\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4ee5\u5916\u306f\u540c\u3058\u5b9a\u7fa9\u306b\u3057\u306a\u3044\u3068\u30c0\u30e1\u3067\u3001\n\u30a2\u30fc\u30ab\u30a4\u30d6\u7528\u30c6\u30fc\u30d6\u30eb\u306f\u79fb\u52d5\u5143\u30c6\u30fc\u30d6\u30eb\u3068\u540c\u3058\u5b9a\u7fa9\u306b\u3057\u307e\u3059\u3002\nshow create table \u3067\u78ba\u8a8d\u3057\u3066\u79fb\u52d5\u5143\u3068\u540c\u3058\u5b9a\u7fa9\u3067\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u3063\u305f\u3051\u3069\u3001\u30a8\u30e9\u30fc\u304c\u3001\u3001\nNon matching attribute 'ROW_FORMAT' between partition and table\n\nshow table status like\u3067ROW_FORMAT\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u7570\u306a\u3063\u3066\u307e\u3057\u305f\u3002\ncreate table or alter table\u3067\u79fb\u52d5\u5143\u3068\u540c\u3058ROW_FORMAT\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u51e6\u7406\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u3092partitioned_data\u304b\u3089partitioned_data_archive\u306b\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3092\u7a7a\u306b\u3059\u308b\nTRUNCATE TABLE no_partitioned_data_tmp;\n\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u3092partitioned_data\u304b\u3089\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u306b\u79fb\u52d5\nALTER TABLE partitioned_data \nEXCHANGE PARTITION p \nWITH TABLE no_partitioned_data_tmp \nWITHOUT VALIDATION;\n\n\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092partitioned_data_archive\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u306b\u79fb\u52d5\nALTER TABLE partitioned_data_archive \nEXCHANGE PARTITION p \nWITH TABLE no_partitioned_data_tmp \nWITHOUT VALIDATION;\n\n\npartitioned_data\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u3092\u524a\u9664\nALTER TABLE partitioned_data DROP PARTITION p;\n\n\n\u7d50\u679c\n30\u5206\u7a0b\u5ea6\u639b\u304b\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u9000\u907f\u51e6\u7406\u304c5\u79d2\u7a0b\u5ea6\u306b\u6539\u5584\u3055\u308c\u307e\u3057\u305f\u3002\nMySQL5.7\u304b\u3089 EXCHANGE PARTITION \u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u79fb\u52d5\u5143\u30c6\u30fc\u30d6\u30eb\u306e\n\u30c7\u30fc\u30bf\u691c\u8a3c\u3092\u884c\u308f\u306a\u3044 WITHOUT VALIDATION \u304c\u8ffd\u52a0\u3055\u308c\u3066\u307e\u3059\u306e\u3067\n\u7bc4\u56f2\u5916\u306e\u30c7\u30fc\u30bf\u304c\u306a\u3044\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3092\u6307\u5b9a\u3059\u308b\u3068\u4f4e\u30b3\u30b9\u30c8\u3067\u79fb\u52d5\u3067\u304d\u307e\u3059\u3002\n\n\u53c2\u8003\n\n\u8a73\u89e3MySQL 5.7 \u6b62\u307e\u3089\u306c\u9032\u5316\u306b\u4e57\u308a\u9045\u308c\u306a\u3044\u305f\u3081\u306e\u30c6\u30af\u30cb\u30ab\u30eb\u30ac\u30a4\u30c9\n\u6f22(\u30aa\u30c8\u30b3)\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u9053: MySQL 5.6\u767b\u5834\uff01\uff01\u65b0\u6a5f\u80fd\u901f\u653b\u30ec\u30d3\u30e5\u30fc\nMySQL 5.7\u306e\u65b0\u6a5f\u80fd\u5b8c\u5168\u30ea\u30b9\u30c8\n\n# \u6982\u8981\n\u30ec\u30b3\u30fc\u30c9\u6570\u304c\u5c11\u306a\u3044\u9593\u306f\u554f\u984c\u306b\u306a\u3089\u306a\u304b\u3063\u305f\u3051\u3069\u3001\u30ec\u30b3\u30fc\u30c9\u6570\u304c\u591a\u304f\u306a\u308b\u3068\nselect insert\u3067\u30b3\u30d4\u30fc\u3059\u308b\u306e\u306f\u53b3\u3057\u304f\u306a\u3063\u3066\u304d\u305f\u306e\u3067\u3001\nEXCHANGE PARTITION\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u5225\u30c6\u30fc\u30d6\u30eb\u306b\u79fb\u52d5\u3055\u305b\u3066\u307f\u307e\u3057\u305f\u3002\n\uff08\u53e4\u304f\u306a\u3063\u305f\u30c7\u30fc\u30bf\u3092\u30a2\u30fc\u30ab\u30a4\u30d6\u3059\u308b\u3068\u304d\u306b\u4fbf\u5229\uff09\n\n# \u6e96\u5099\n## \u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3068\u30a2\u30fc\u30ab\u30a4\u30d6\u7528\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u306f\u5143\u30c6\u30fc\u30d6\u30eb\u3068\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4ee5\u5916\u306f\u540c\u3058\u5b9a\u7fa9\u306b\u3057\u306a\u3044\u3068\u30c0\u30e1\u3067\u3001\n\u30a2\u30fc\u30ab\u30a4\u30d6\u7528\u30c6\u30fc\u30d6\u30eb\u306f\u79fb\u52d5\u5143\u30c6\u30fc\u30d6\u30eb\u3068\u540c\u3058\u5b9a\u7fa9\u306b\u3057\u307e\u3059\u3002\n\nshow create table \u3067\u78ba\u8a8d\u3057\u3066\u79fb\u52d5\u5143\u3068\u540c\u3058\u5b9a\u7fa9\u3067\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u3063\u305f\u3051\u3069\u3001\u30a8\u30e9\u30fc\u304c\u3001\u3001\n\n```\nNon matching attribute 'ROW_FORMAT' between partition and table\n```\nshow table status like\u3067ROW_FORMAT\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3068\u7570\u306a\u3063\u3066\u307e\u3057\u305f\u3002\ncreate table or alter table\u3067\u79fb\u52d5\u5143\u3068\u540c\u3058ROW_FORMAT\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n# \u51e6\u7406\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u3092partitioned_data\u304b\u3089partitioned_data_archive\u306b\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n### \u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3092\u7a7a\u306b\u3059\u308b\n\n```sql\nTRUNCATE TABLE no_partitioned_data_tmp;\n```\n\n### \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u3092partitioned_data\u304b\u3089\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u306b\u79fb\u52d5\n```sql\nALTER TABLE partitioned_data \nEXCHANGE PARTITION p \nWITH TABLE no_partitioned_data_tmp \nWITHOUT VALIDATION;\n```\n\n### \u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092partitioned_data_archive\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u306b\u79fb\u52d5\n```sql\nALTER TABLE partitioned_data_archive \nEXCHANGE PARTITION p \nWITH TABLE no_partitioned_data_tmp \nWITHOUT VALIDATION;\n```\n\n### partitioned_data\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3p\u3092\u524a\u9664\n```sql\nALTER TABLE partitioned_data DROP PARTITION p;\n```\n\n# \u7d50\u679c\n30\u5206\u7a0b\u5ea6\u639b\u304b\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u306e\u9000\u907f\u51e6\u7406\u304c5\u79d2\u7a0b\u5ea6\u306b\u6539\u5584\u3055\u308c\u307e\u3057\u305f\u3002\nMySQL5.7\u304b\u3089 EXCHANGE PARTITION \u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u79fb\u52d5\u5143\u30c6\u30fc\u30d6\u30eb\u306e\n\u30c7\u30fc\u30bf\u691c\u8a3c\u3092\u884c\u308f\u306a\u3044 WITHOUT VALIDATION \u304c\u8ffd\u52a0\u3055\u308c\u3066\u307e\u3059\u306e\u3067\n\u7bc4\u56f2\u5916\u306e\u30c7\u30fc\u30bf\u304c\u306a\u3044\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u3092\u6307\u5b9a\u3059\u308b\u3068\u4f4e\u30b3\u30b9\u30c8\u3067\u79fb\u52d5\u3067\u304d\u307e\u3059\u3002\n\n# \u53c2\u8003\n- [\u8a73\u89e3MySQL 5.7 \u6b62\u307e\u3089\u306c\u9032\u5316\u306b\u4e57\u308a\u9045\u308c\u306a\u3044\u305f\u3081\u306e\u30c6\u30af\u30cb\u30ab\u30eb\u30ac\u30a4\u30c9](https://books.google.co.jp/books?id=nY3iDAAAQBAJ&pg=PA257&lpg=PA257&dq=PARTITION+mysql+%E7%A7%BB%E5%8B%95&source=bl&ots=aYamLuBU6y&sig=KjmnXwQtZ3aEIaHzXPdhBcY_fMM&hl=ja&sa=X&ved=0ahUKEwiS1cfyyerOAhUEmpQKHZiCDV8Q6AEIUjAI#v=onepage&q=PARTITION%20mysql%20%E7%A7%BB%E5%8B%95&f=false)\n- [\u6f22(\u30aa\u30c8\u30b3)\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u9053: MySQL 5.6\u767b\u5834\uff01\uff01\u65b0\u6a5f\u80fd\u901f\u653b\u30ec\u30d3\u30e5\u30fc](http://nippondanji.blogspot.jp/2011/04/mysql-56.html)\n- [MySQL 5.7\u306e\u65b0\u6a5f\u80fd\u5b8c\u5168\u30ea\u30b9\u30c8](https://yakst.com/ja/posts/3037)\n"}