{"context": "\u67d0QA\u30b5\u30a4\u30c8\u3067\u4e00\u90e8\u306e\u65b9\u306b\u5927\u4eba\u6c17\u306a\u8cea\u554f\u8005\u304cw\n\u306a\u3093\u304b\u3001\u3088\u304f\u308f\u304b\u3089\u3093\u7406\u7531\u3067 xml\u5f62\u5f0f\u3067\u306e\u53d6\u5f97\u306b\u3053\u3060\u308f\u3063\u3066\u3044\u308b\u3089\u3057\u3044\u306e\u3067\u3001XML\u7248\u6295\u4e0b\u3002\n\u5358\u7d14\u306b json_encode \u3092 simplexml_load_file \u306b\u5909\u3048\u308b\u3060\u3051\u3067\u306f\u52d5\u304b\u306a\u3044\u8b0e\u4ed5\u69d8w\n\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\n\u3068\u3044\u3046\u306e\u3082\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u69cb\u9020\u304c json \u3068 xml \u3067\u9055\u3063\u3066\u3044\u308b\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304b\uff01\n\u56f3\u3089\u305a\u3082\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u306e\u30d0\u30b0\u3092\u767a\u898bw\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u901a\u308a\u306a\u306e\u306f\u3001xml \u306e\u65b9\u3067\u3001 json \u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u9593\u9055\u3044\u3067\u3059\u306d\u3002\n2016/08/08\n\u7121\u99c4\u306b\u6a5f\u80fd\u5145\u5b9fw\n\u591a\u5c11DRY\u306b\u3002\n2016/09/15\n\u306a\u3093\u304b\u3001\u5225\u4eba\u306a\u3093\u3060\u308d\u3046\u3051\u3069\u3001\u305b\u3063\u304b\u304f\u3060\u304b\u3089\u3001\u8db3\u3057\u3066\u307f\u305f\u3002\n\u3069\u3093\u306a\u30da\u30fc\u30b8\u3092\u4f5c\u308a\u305f\u3044\u306e\u304b\u3044\u307e\u3044\u3061\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u672c\u4eba\u304c\u3084\u308a\u305f\u3044\u3053\u3068\u306a\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\u2026\ngoogle map api\u306e\u30de\u30c3\u30b7\u30e5\u30a2\u30c3\u30d7\n\nindex.php\n<?php\n/**\n * index.php\n *\n * @since 2016/08/06\n */\nrequire_once './Hpepper.class.php';\n\n/**\n * \u30a8\u30b9\u30b1\u30fc\u30d7\n * @param string $string\n * @return string\n */\nfunction h($string)\n{\n    return htmlspecialchars($string, ENT_QUOTES, 'utf-8');\n}\n\n// \u6599\u7406\u30ab\u30c6\u30b4\u30ea\n$food_category = Hpepper::getFoodCategory();\n\n// \u4e88\u7b97\n$budget = Hpepper::getBudget();\n\n// \u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\n$credit_card = Hpepper::getCreditCard();\n\n// \u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\n$large_service_area = Hpepper::getLargeServiceArea();\n\n// \u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\n$service_area = Hpepper::getServiceArea();\n\n// \u30ec\u30b9\u30c8\u30e9\u30f3\u691c\u7d22\n$restaurants = Hpepper::getRestaurants();\n?>\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u30c6\u30b9\u30c8\uff08\u30a2\u30db\u3067\u3082\u8a2d\u7f6e\u3059\u308b\u3060\u3051\u3067\u52d5\u304f\uff09</title>\n        <link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" />\n        <style type=\"text/css\">\n            #map{\n                height: 400px;\n            }\n        </style>\n    </head>\n    <body>\n        <div class=\"container\">\n            <h1>\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u30b5\u30f3\u30d7\u30eb</h1>\n\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <form method=\"get\">\n                        <div class=\"form-group\">\n                            <label for=\"food_category\">\u6599\u7406\u30ab\u30c6\u30b4\u30ea</label>\n                            <select class=\"form-control\" name=\"food\" id=\"food_category\">\n                                <option value=\"\">\u6599\u7406\u30ab\u30c6\u30b4\u30ea</option>\n                                <?php foreach ($food_category->food_category as $food_category) : ?>\n                                    <?php if ($food_category->code == filter_input(INPUT_GET, 'food')): ?>\n                                        <option value=\"<?= h($food_category->code); ?>\" selected=\"selected\">\n                                            <?= h($food_category->name); ?>\n                                        </option>\n                                    <?php else: ?>\n                                        <option value=\"<?= h($food_category->code); ?>\">\n                                            <?= h($food_category->name); ?>\n                                        </option>\n                                    <?php endif; ?>\n                                <?php endforeach; ?>\n                            </select>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label for=\"budget\">\u4e88\u7b97</label>\n                            <select class=\"form-control\" name=\"budget\" id=\"service_area\">\n                                <option value=\"\">\u4e88\u7b97</option>\n                                <?php foreach ($budget->budget as $budget) : ?>\n                                    <?php if ($budget->code == filter_input(INPUT_GET, 'budget')): ?>\n                                        <option value=\"<?= h($budget->code); ?>\" selected=\"selected\">\n                                            <?= h($budget->name); ?>\n                                        </option>\n                                    <?php else: ?>\n                                        <option value=\"<?= h($budget->code); ?>\">\n                                            <?= h($budget->name); ?>\n                                        </option>\n                                    <?php endif; ?>\n                                <?php endforeach; ?>\n                            </select>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label for=\"credit_card\">\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9</label>\n                            <select class=\"form-control\" name=\"credit_card\" id=\"credit_card\">\n                                <option value=\"\">\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9</option>\n                                <?php foreach ($credit_card->credit_card as $credit_card) : ?>\n                                    <?php if ($credit_card->code == filter_input(INPUT_GET, 'credit_card')): ?>\n                                        <option value=\"<?= h($credit_card->code); ?>\" selected=\"selected\">\n                                            <?= h($credit_card->name); ?>\n                                        </option>\n                                    <?php else: ?>\n                                        <option value=\"<?= h($credit_card->code); ?>\">\n                                            <?= h($credit_card->name); ?>\n                                        </option>\n                                    <?php endif; ?>\n                                <?php endforeach; ?>\n                            </select>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label for=\"large_service_area\">\u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</label>\n                            <select class=\"form-control\" name=\"large_service_area\" id=\"large_service_area\">\n                                <option value=\"\">\u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</option>\n                                <?php foreach ($large_service_area->large_service_area as $large_service_area) : ?>\n                                    <?php if ($large_service_area->code == filter_input(INPUT_GET, 'large_service_area')): ?>\n                                        <option value=\"<?= h($large_service_area->code); ?>\" selected=\"selected\">\n                                            <?= h($large_service_area->name); ?>\n                                        </option>\n                                    <?php else: ?>\n                                        <option value=\"<?= h($large_service_area->code); ?>\">\n                                            <?= h($large_service_area->name); ?>\n                                        </option>\n                                    <?php endif; ?>\n                                <?php endforeach; ?>\n                            </select>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label for=\"service_area\">\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</label>\n                            <select class=\"form-control\" name=\"service_area\" id=\"service_area\">\n                                <option value=\"\">\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</option>\n                                <?php foreach ($service_area->service_area as $pref) : ?>\n                                    <?php if ($pref->code == filter_input(INPUT_GET, 'service_area')): ?>\n                                        <option value=\"<?= h($pref->code); ?>\" selected=\"selected\">\n                                            <?= h($pref->name); ?>\n                                        </option>\n                                    <?php else: ?>\n                                        <option value=\"<?= h($pref->code); ?>\">\n                                            <?= h($pref->name); ?>\n                                        </option>\n                                    <?php endif; ?>\n                                <?php endforeach; ?>\n                            </select>\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label for=\"name_kana\">\u5e97\u540d or \u3075\u308a\u304c\u306a</label>\n                            <input class=\"form-control\" type=\"text\" name=\"name_kana\" id=\"name_kana\" value=\"<?= h(filter_input(INPUT_GET, 'name_kana')); ?>\" />\n                        </div>\n\n                        <div class=\"form-group\">\n                            <label for=\"keyword\">\u30d5\u30ea\u30fc\u30ef\u30fc\u30c9</label>\n                            <input class=\"form-control\" type=\"text\" name=\"keyword\" id=\"keyword\" value=\"<?= h(filter_input(INPUT_GET, 'keyword')); ?>\" />\n                        </div>\n\n                        <div class=\"form-group\">\n                            <button type=\"submit\" class=\"btn btn-primary\">\u691c\u7d22</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n            <?php if (is_object($restaurants)): ?>\n\n                <p>\u691c\u7d22\u7d50\u679c <?= h(number_format((int) $restaurants->results_available)); ?> \u4ef6</p>\n\n                <?php if (isset($restaurants->error)): ?>\n                    <div>\n                        <?php foreach ($restaurants->error as $err) : ?>\n                            <h2><?= $err->code; ?></h2>\n                            <p><?= $err->message; ?></p>\n                        <?php endforeach; ?>\n                    </div>\n                <?php else: ?>\n                    <table class=\"table table-condensed\">\n                        <thead>\n                            <tr>\n                                <th>id</th>\n                                <th>name</th>\n                                <th>category</th>\n                                <th>address</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            <?php foreach ($restaurants->shop as $rest) : ?>\n                                <tr class=\"shop\" data-lat=\"<?= h($rest->lat); ?>\" data-lng=\"<?= h($rest->lng); ?>\">\n                                    <td><?= h($rest->id); ?></td>\n                                    <td>\n                                        <a href=\"detail.php?id=<?= h($rest->id); ?>\"><?= h($rest->name); ?></a>\n                                    </td>\n                                    <td><?= h($rest->genre->name); ?></td>\n                                    <td><?= h($rest->address); ?></td>\n                                </tr>\n                            <?php endforeach; ?>\n                        </tbody>\n                    </table>\n\n                    <ul class=\"pagination pagination-sm no-margin\">\n                        <?= Hpepper::pagination($restaurants->results_available); ?>\n                    </ul>\n                <?php endif; ?>\n            <?php endif; ?>\n            <div class=\"row\">\n                <div class=\"col-md-12\">\n                    <div id=\"map\">\n\n                    </div>\n                </div>\n            </div>\n        </div>\n        <script src=\"http://maps.google.com/maps/api/js?sensor=false\"></script>\n        <script type=\"text/javascript\">\n            function initMap() {\n                var dom = document.getElementById('map');\n                var map = new google.maps.Map(dom, {\n                    center: {\n                        lat: 35.685175\n                        , lng: 139.7527995\n                    },\n                    scrollwheel: false,\n                    zoom: 8\n                });\n\n                var shops = document.getElementsByClassName('shop');\n                if (shops.length === 0) {\n                    return;\n                }\n\n                var bounds = new google.maps.LatLngBounds();\n\n                for (var i = 0; i < shops.length; i++) {\n                    var marker = new google.maps.Marker({\n                        position: {\n                            lat: parseFloat(shops[i].getAttribute('data-lat'))\n                            , lng: parseFloat(shops[i].getAttribute('data-lng'))\n                        },\n                        map: map\n                    });\n                    bounds.extend(marker.position);\n                }\n                map.fitBounds(bounds);\n            }\n            initMap();\n        </script>\n    </body>\n</html>\n\n\n\ndetail.php\n<?php\n/**\n * detail.php\n *\n * @since 2016/09/15\n */\nrequire_once './Hpepper.class.php';\n\n/**\n * \u30a8\u30b9\u30b1\u30fc\u30d7\n * @param string $string\n * @return string\n */\nfunction h($string)\n{\n    return htmlspecialchars($string, ENT_QUOTES, 'utf-8');\n}\n\n// \u30ec\u30b9\u30c8\u30e9\u30f3\u691c\u7d22\n$restaurants = Hpepper::getRestaurants();\n?>\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <title></title>\n        <link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" />\n        <style type=\"text/css\">\n            #map {\n                height: 300px;\n            }\n        </style>\n    </head>\n    <body>\n        <div class=\"container\">\n            <div class=\"row\">\n                <div class=\"col-md-6 col-md-offset-3\">\n                    <p><?= h($restaurants->shop->genre->name); ?></p>\n                    <p><?= h($restaurants->shop->name); ?></p>\n                    <p><?= h($restaurants->shop->address); ?></p>\n                    <p>\n                        <img src=\"<?= h($restaurants->shop->logo_image); ?>\" alt=\"\" />\n                    </p>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-6 col-md-offset-3\">\n                    <div id=\"map\" data-lat=\"<?= h($restaurants->shop->lat); ?>\" data-lng=\"<?= h($restaurants->shop->lng); ?>\">\n\n                    </div>\n                </div>\n            </div>\n            <div class=\"row\">\n                <div class=\"col-md-6 col-md-offset-3\">\n                    <?php var_dump($restaurants); ?>\n                </div>\n            </div>\n        </div>\n        <script src=\"http://maps.google.com/maps/api/js?sensor=false\"></script>\n        <script type=\"text/javascript\">\n            function initMap() {\n                var dom = document.getElementById('map');\n                var position = {\n                    lat: parseFloat(dom.getAttribute('data-lat'))\n                    , lng: parseFloat(dom.getAttribute('data-lng'))\n                };\n                var map = new google.maps.Map(dom, {\n                    center: position,\n                    scrollwheel: false,\n                    zoom: 14\n                });\n                var marker = new google.maps.Marker({\n                    position: position,\n                    map: map\n                });\n            }\n            initMap();\n        </script>\n    </body>\n</html>\n\n\n\nHpepper.class.php\n<?php\n\n/**\n * Hpepper.class.php\n *\n * @since 2016/08/06\n */\nclass Hpepper\n{\n\n    /**\n     * \u30a2\u30af\u30bb\u30b9\u30ad\u30fc\n     * @var string\n     */\n    private static $token = 'APIKEY';\n\n    /**\n     * 1\u30da\u30fc\u30b8\u306b\u8868\u793a\u3059\u308b\u4ef6\u6570\n     * @var int\n     */\n    private static $rowCount = 10;\n\n    /**\n     * API\u554f\u3044\u5408\u308f\u305b\n     * @param string $uri\n     * @param array $query\n     * @return object\n     */\n    private static function request($uri, $query = array())\n    {\n        $query += array(\n            'format' => 'xml'\n            , 'key' => self::$token\n        );\n        $url = sprintf(\"%s?%s\", $uri, http_build_query($query));\n        $obj = simplexml_load_file($url);\n        return $obj;\n    }\n\n    /**\n     * \u4e88\u7b97\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\n     * @return object\n     */\n    public static function getBudget()\n    {\n        $uri = \"http://webservice.recruit.co.jp/hotpepper/budget/v1/\";\n        return self::request($uri);\n    }\n\n    /**\n     * \u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\n     * @return object\n     */\n    public static function getLargeServiceArea()\n    {\n        $uri = \"http://webservice.recruit.co.jp/hotpepper/large_service_area/v1/\";\n        return self::request($uri);\n    }\n\n    /**\n     * \u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\u30de\u30b9\u30bfAPI\n     * @return object\n     */\n    public static function getServiceArea()\n    {\n        $uri = \"https://webservice.recruit.co.jp/hotpepper/service_area/v1/\";\n        return self::request($uri);\n    }\n\n    /**\n     * \u6599\u7406\u30ab\u30c6\u30b4\u30ea\n     * @return object\n     */\n    public static function getFoodCategory()\n    {\n        $uri = \"http://webservice.recruit.co.jp/hotpepper/food_category/v1/\";\n        return self::request($uri);\n    }\n\n    /**\n     * \u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u30de\u30b9\u30bfAPI\n     * @return object\n     */\n    public static function getCreditCard()\n    {\n        $uri = \"http://webservice.recruit.co.jp/hotpepper/credit_card/v1/\";\n        return self::request($uri);\n    }\n\n    /**\n     * \u30ec\u30b9\u30c8\u30e9\u30f3\u691c\u7d22\n     * @return object\n     */\n    public static function getRestaurants()\n    {\n        $uri = \"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/\";\n        $query = array(\n            'count' => self::$rowCount\n        );\n        if (!is_null(filter_input_array(INPUT_GET))) {\n            $query += filter_input_array(INPUT_GET);\n        }\n        return self::request($uri, $query);\n    }\n\n    /**\n     * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\n     * @param int $total\n     * @return string\n     */\n    public static function pagination($total = 0)\n    {\n        if ($total == 0) {\n            return;\n        }\n        $start = filter_input(INPUT_GET, 'start', FILTER_VALIDATE_INT);\n        if ($start == 0) {\n            $start = 1;\n        }\n\n        $html = '<li%s><a href=\"?%s\">%s</a></li>';\n\n        //\u73fe\u5728\u306e\u9801\n        $curPage = ceil($start / self::$rowCount);\n        $iStart = (0 < $curPage - 3) ? $curPage - 3 : 1;\n\n        $pages = ceil($total / self::$rowCount);\n        $iMax = ($iStart + 6 > $pages) ? $pages : $iStart + 6;\n\n        $arr = array();\n        $params = filter_input_array(INPUT_GET);\n\n        // \u5148\u982d\u30da\u30fc\u30b8\n        if ($start != 1) {\n            $params['start'] = 1;\n            $query = http_build_query($params, '', '&amp;');\n            $arr[] = sprintf($html, '', $query, '\u6700\u521d');\n            $params['start'] = $start - self::$rowCount;\n            $query = http_build_query($params, '', '&amp;');\n            $arr[] = sprintf($html, '', $query, '\u524d\u3078');\n        }\n\n        for ($i = $iStart; $i <= $iMax; $i++) {\n            $params['start'] = ($i - 1) * self::$rowCount + 1;\n            $class = ($params['start'] == $start) ? ' class=\"active\"' : '';\n            $query = http_build_query($params, '', '&amp;');\n            $arr[] = sprintf($html, $class, $query, $i);\n        }\n\n        // \u6700\u7d42\u30da\u30fc\u30b8\n        $maxCount = ($pages - 1) * self::$rowCount + 1;\n        if ($start < $maxCount) {\n            $params['start'] = $start + self::$rowCount;\n            $query = http_build_query($params, '', '&amp;');\n            $arr[] = sprintf($html, '', $query, '\u6b21\u3078');\n            $params['start'] = $maxCount;\n            $query = http_build_query($params, '', '&amp;');\n            $arr[] = sprintf($html, '', $query, '\u6700\u7d42');\n        }\n\n        return implode(PHP_EOL, $arr);\n    }\n\n}\n\n\n\n\n\u67d0QA\u30b5\u30a4\u30c8\u3067\u4e00\u90e8\u306e\u65b9\u306b\u5927\u4eba\u6c17\u306a\u8cea\u554f\u8005\u304cw\n\u306a\u3093\u304b\u3001\u3088\u304f\u308f\u304b\u3089\u3093\u7406\u7531\u3067 xml\u5f62\u5f0f\u3067\u306e\u53d6\u5f97\u306b\u3053\u3060\u308f\u3063\u3066\u3044\u308b\u3089\u3057\u3044\u306e\u3067\u3001XML\u7248\u6295\u4e0b\u3002\n\n\u5358\u7d14\u306b json_encode \u3092 simplexml_load_file \u306b\u5909\u3048\u308b\u3060\u3051\u3067\u306f\u52d5\u304b\u306a\u3044\u8b0e\u4ed5\u69d8w\n\n[\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI](https://webservice.recruit.co.jp/hotpepper/reference.html)\n\n\u3068\u3044\u3046\u306e\u3082\u3001\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u69cb\u9020\u304c json \u3068 xml \u3067\u9055\u3063\u3066\u3044\u308b\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304b\uff01\n\u56f3\u3089\u305a\u3082\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u306e\u30d0\u30b0\u3092\u767a\u898bw\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u901a\u308a\u306a\u306e\u306f\u3001xml \u306e\u65b9\u3067\u3001 json \u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u9593\u9055\u3044\u3067\u3059\u306d\u3002\n\n2016/08/08\n\u7121\u99c4\u306b\u6a5f\u80fd\u5145\u5b9fw\n\u591a\u5c11DRY\u306b\u3002\n\n2016/09/15\n\u306a\u3093\u304b\u3001\u5225\u4eba\u306a\u3093\u3060\u308d\u3046\u3051\u3069\u3001\u305b\u3063\u304b\u304f\u3060\u304b\u3089\u3001\u8db3\u3057\u3066\u307f\u305f\u3002\n\u3069\u3093\u306a\u30da\u30fc\u30b8\u3092\u4f5c\u308a\u305f\u3044\u306e\u304b\u3044\u307e\u3044\u3061\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u672c\u4eba\u304c\u3084\u308a\u305f\u3044\u3053\u3068\u306a\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u3051\u3069\u2026\n[google map api\u306e\u30de\u30c3\u30b7\u30e5\u30a2\u30c3\u30d7](https://teratail.com/questions/47984)\n\n\n```html+php:index.php\n<?php\n/**\n * index.php\n *\n * @since 2016/08/06\n */\nrequire_once './Hpepper.class.php';\n\n/**\n * \u30a8\u30b9\u30b1\u30fc\u30d7\n * @param string $string\n * @return string\n */\nfunction h($string)\n{\n\treturn htmlspecialchars($string, ENT_QUOTES, 'utf-8');\n}\n\n// \u6599\u7406\u30ab\u30c6\u30b4\u30ea\n$food_category = Hpepper::getFoodCategory();\n\n// \u4e88\u7b97\n$budget = Hpepper::getBudget();\n\n// \u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\n$credit_card = Hpepper::getCreditCard();\n\n// \u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\n$large_service_area = Hpepper::getLargeServiceArea();\n\n// \u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\n$service_area = Hpepper::getServiceArea();\n\n// \u30ec\u30b9\u30c8\u30e9\u30f3\u691c\u7d22\n$restaurants = Hpepper::getRestaurants();\n?>\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n\t<head>\n\t\t<meta charset=\"UTF-8\">\n\t\t<title>\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u30c6\u30b9\u30c8\uff08\u30a2\u30db\u3067\u3082\u8a2d\u7f6e\u3059\u308b\u3060\u3051\u3067\u52d5\u304f\uff09</title>\n\t\t<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" />\n\t\t<style type=\"text/css\">\n\t\t\t#map{\n\t\t\t\theight: 400px;\n\t\t\t}\n\t\t</style>\n\t</head>\n\t<body>\n\t\t<div class=\"container\">\n\t\t\t<h1>\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI\u30b5\u30f3\u30d7\u30eb</h1>\n\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-6\">\n\t\t\t\t\t<form method=\"get\">\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"food_category\">\u6599\u7406\u30ab\u30c6\u30b4\u30ea</label>\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"food\" id=\"food_category\">\n\t\t\t\t\t\t\t\t<option value=\"\">\u6599\u7406\u30ab\u30c6\u30b4\u30ea</option>\n\t\t\t\t\t\t\t\t<?php foreach ($food_category->food_category as $food_category) : ?>\n\t\t\t\t\t\t\t\t\t<?php if ($food_category->code == filter_input(INPUT_GET, 'food')): ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($food_category->code); ?>\" selected=\"selected\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($food_category->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($food_category->code); ?>\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($food_category->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"budget\">\u4e88\u7b97</label>\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"budget\" id=\"service_area\">\n\t\t\t\t\t\t\t\t<option value=\"\">\u4e88\u7b97</option>\n\t\t\t\t\t\t\t\t<?php foreach ($budget->budget as $budget) : ?>\n\t\t\t\t\t\t\t\t\t<?php if ($budget->code == filter_input(INPUT_GET, 'budget')): ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($budget->code); ?>\" selected=\"selected\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($budget->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($budget->code); ?>\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($budget->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"credit_card\">\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9</label>\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"credit_card\" id=\"credit_card\">\n\t\t\t\t\t\t\t\t<option value=\"\">\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9</option>\n\t\t\t\t\t\t\t\t<?php foreach ($credit_card->credit_card as $credit_card) : ?>\n\t\t\t\t\t\t\t\t\t<?php if ($credit_card->code == filter_input(INPUT_GET, 'credit_card')): ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($credit_card->code); ?>\" selected=\"selected\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($credit_card->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($credit_card->code); ?>\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($credit_card->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"large_service_area\">\u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</label>\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"large_service_area\" id=\"large_service_area\">\n\t\t\t\t\t\t\t\t<option value=\"\">\u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</option>\n\t\t\t\t\t\t\t\t<?php foreach ($large_service_area->large_service_area as $large_service_area) : ?>\n\t\t\t\t\t\t\t\t\t<?php if ($large_service_area->code == filter_input(INPUT_GET, 'large_service_area')): ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($large_service_area->code); ?>\" selected=\"selected\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($large_service_area->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($large_service_area->code); ?>\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($large_service_area->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"service_area\">\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</label>\n\t\t\t\t\t\t\t<select class=\"form-control\" name=\"service_area\" id=\"service_area\">\n\t\t\t\t\t\t\t\t<option value=\"\">\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2</option>\n\t\t\t\t\t\t\t\t<?php foreach ($service_area->service_area as $pref) : ?>\n\t\t\t\t\t\t\t\t\t<?php if ($pref->code == filter_input(INPUT_GET, 'service_area')): ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($pref->code); ?>\" selected=\"selected\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($pref->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php else: ?>\n\t\t\t\t\t\t\t\t\t\t<option value=\"<?= h($pref->code); ?>\">\n\t\t\t\t\t\t\t\t\t\t\t<?= h($pref->name); ?>\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t<?php endif; ?>\n\t\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"name_kana\">\u5e97\u540d or \u3075\u308a\u304c\u306a</label>\n\t\t\t\t\t\t\t<input class=\"form-control\" type=\"text\" name=\"name_kana\" id=\"name_kana\" value=\"<?= h(filter_input(INPUT_GET, 'name_kana')); ?>\" />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<label for=\"keyword\">\u30d5\u30ea\u30fc\u30ef\u30fc\u30c9</label>\n\t\t\t\t\t\t\t<input class=\"form-control\" type=\"text\" name=\"keyword\" id=\"keyword\" value=\"<?= h(filter_input(INPUT_GET, 'keyword')); ?>\" />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-primary\">\u691c\u7d22</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<?php if (is_object($restaurants)): ?>\n\n\t\t\t\t<p>\u691c\u7d22\u7d50\u679c <?= h(number_format((int) $restaurants->results_available)); ?> \u4ef6</p>\n\n\t\t\t\t<?php if (isset($restaurants->error)): ?>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<?php foreach ($restaurants->error as $err) : ?>\n\t\t\t\t\t\t\t<h2><?= $err->code; ?></h2>\n\t\t\t\t\t\t\t<p><?= $err->message; ?></p>\n\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t</div>\n\t\t\t\t<?php else: ?>\n\t\t\t\t\t<table class=\"table table-condensed\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th>id</th>\n\t\t\t\t\t\t\t\t<th>name</th>\n\t\t\t\t\t\t\t\t<th>category</th>\n\t\t\t\t\t\t\t\t<th>address</th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t<?php foreach ($restaurants->shop as $rest) : ?>\n\t\t\t\t\t\t\t\t<tr class=\"shop\" data-lat=\"<?= h($rest->lat); ?>\" data-lng=\"<?= h($rest->lng); ?>\">\n\t\t\t\t\t\t\t\t\t<td><?= h($rest->id); ?></td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<a href=\"detail.php?id=<?= h($rest->id); ?>\"><?= h($rest->name); ?></a>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t<td><?= h($rest->genre->name); ?></td>\n\t\t\t\t\t\t\t\t\t<td><?= h($rest->address); ?></td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<?php endforeach; ?>\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\n\t\t\t\t\t<ul class=\"pagination pagination-sm no-margin\">\n\t\t\t\t\t\t<?= Hpepper::pagination($restaurants->results_available); ?>\n\t\t\t\t\t</ul>\n\t\t\t\t<?php endif; ?>\n\t\t\t<?php endif; ?>\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-12\">\n\t\t\t\t\t<div id=\"map\">\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<script src=\"http://maps.google.com/maps/api/js?sensor=false\"></script>\n\t\t<script type=\"text/javascript\">\n\t\t\tfunction initMap() {\n\t\t\t\tvar dom = document.getElementById('map');\n\t\t\t\tvar map = new google.maps.Map(dom, {\n\t\t\t\t\tcenter: {\n\t\t\t\t\t\tlat: 35.685175\n\t\t\t\t\t\t, lng: 139.7527995\n\t\t\t\t\t},\n\t\t\t\t\tscrollwheel: false,\n\t\t\t\t\tzoom: 8\n\t\t\t\t});\n\n\t\t\t\tvar shops = document.getElementsByClassName('shop');\n\t\t\t\tif (shops.length === 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar bounds = new google.maps.LatLngBounds();\n\n\t\t\t\tfor (var i = 0; i < shops.length; i++) {\n\t\t\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\tlat: parseFloat(shops[i].getAttribute('data-lat'))\n\t\t\t\t\t\t\t, lng: parseFloat(shops[i].getAttribute('data-lng'))\n\t\t\t\t\t\t},\n\t\t\t\t\t\tmap: map\n\t\t\t\t\t});\n\t\t\t\t\tbounds.extend(marker.position);\n\t\t\t\t}\n\t\t\t\tmap.fitBounds(bounds);\n\t\t\t}\n\t\t\tinitMap();\n\t\t</script>\n\t</body>\n</html>\n```\n\n```html+php:detail.php\n<?php\n/**\n * detail.php\n *\n * @since 2016/09/15\n */\nrequire_once './Hpepper.class.php';\n\n/**\n * \u30a8\u30b9\u30b1\u30fc\u30d7\n * @param string $string\n * @return string\n */\nfunction h($string)\n{\n\treturn htmlspecialchars($string, ENT_QUOTES, 'utf-8');\n}\n\n// \u30ec\u30b9\u30c8\u30e9\u30f3\u691c\u7d22\n$restaurants = Hpepper::getRestaurants();\n?>\n<!DOCTYPE HTML>\n<html lang=\"ja\">\n\t<head>\n\t\t<meta charset=\"UTF-8\">\n\t\t<title></title>\n\t\t<link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" />\n\t\t<style type=\"text/css\">\n\t\t\t#map {\n\t\t\t\theight: 300px;\n\t\t\t}\n\t\t</style>\n\t</head>\n\t<body>\n\t\t<div class=\"container\">\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-6 col-md-offset-3\">\n\t\t\t\t\t<p><?= h($restaurants->shop->genre->name); ?></p>\n\t\t\t\t\t<p><?= h($restaurants->shop->name); ?></p>\n\t\t\t\t\t<p><?= h($restaurants->shop->address); ?></p>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<img src=\"<?= h($restaurants->shop->logo_image); ?>\" alt=\"\" />\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-6 col-md-offset-3\">\n\t\t\t\t\t<div id=\"map\" data-lat=\"<?= h($restaurants->shop->lat); ?>\" data-lng=\"<?= h($restaurants->shop->lng); ?>\">\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"row\">\n\t\t\t\t<div class=\"col-md-6 col-md-offset-3\">\n\t\t\t\t\t<?php var_dump($restaurants); ?>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<script src=\"http://maps.google.com/maps/api/js?sensor=false\"></script>\n\t\t<script type=\"text/javascript\">\n\t\t\tfunction initMap() {\n\t\t\t\tvar dom = document.getElementById('map');\n\t\t\t\tvar position = {\n\t\t\t\t\tlat: parseFloat(dom.getAttribute('data-lat'))\n\t\t\t\t\t, lng: parseFloat(dom.getAttribute('data-lng'))\n\t\t\t\t};\n\t\t\t\tvar map = new google.maps.Map(dom, {\n\t\t\t\t\tcenter: position,\n\t\t\t\t\tscrollwheel: false,\n\t\t\t\t\tzoom: 14\n\t\t\t\t});\n\t\t\t\tvar marker = new google.maps.Marker({\n\t\t\t\t\tposition: position,\n\t\t\t\t\tmap: map\n\t\t\t\t});\n\t\t\t}\n\t\t\tinitMap();\n\t\t</script>\n\t</body>\n</html>\n```\n\n```php:Hpepper.class.php\n<?php\n\n/**\n * Hpepper.class.php\n *\n * @since 2016/08/06\n */\nclass Hpepper\n{\n\n\t/**\n\t * \u30a2\u30af\u30bb\u30b9\u30ad\u30fc\n\t * @var string\n\t */\n\tprivate static $token = 'APIKEY';\n\n\t/**\n\t * 1\u30da\u30fc\u30b8\u306b\u8868\u793a\u3059\u308b\u4ef6\u6570\n\t * @var int\n\t */\n\tprivate static $rowCount = 10;\n\n\t/**\n\t * API\u554f\u3044\u5408\u308f\u305b\n\t * @param string $uri\n\t * @param array $query\n\t * @return object\n\t */\n\tprivate static function request($uri, $query = array())\n\t{\n\t\t$query += array(\n\t\t\t'format' => 'xml'\n\t\t\t, 'key' => self::$token\n\t\t);\n\t\t$url = sprintf(\"%s?%s\", $uri, http_build_query($query));\n\t\t$obj = simplexml_load_file($url);\n\t\treturn $obj;\n\t}\n\n\t/**\n\t * \u4e88\u7b97\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\n\t * @return object\n\t */\n\tpublic static function getBudget()\n\t{\n\t\t$uri = \"http://webservice.recruit.co.jp/hotpepper/budget/v1/\";\n\t\treturn self::request($uri);\n\t}\n\n\t/**\n\t * \u5927\u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\n\t * @return object\n\t */\n\tpublic static function getLargeServiceArea()\n\t{\n\t\t$uri = \"http://webservice.recruit.co.jp/hotpepper/large_service_area/v1/\";\n\t\treturn self::request($uri);\n\t}\n\n\t/**\n\t * \u30b5\u30fc\u30d3\u30b9\u30a8\u30ea\u30a2\u30de\u30b9\u30bfAPI\n\t * @return object\n\t */\n\tpublic static function getServiceArea()\n\t{\n\t\t$uri = \"https://webservice.recruit.co.jp/hotpepper/service_area/v1/\";\n\t\treturn self::request($uri);\n\t}\n\n\t/**\n\t * \u6599\u7406\u30ab\u30c6\u30b4\u30ea\n\t * @return object\n\t */\n\tpublic static function getFoodCategory()\n\t{\n\t\t$uri = \"http://webservice.recruit.co.jp/hotpepper/food_category/v1/\";\n\t\treturn self::request($uri);\n\t}\n\n\t/**\n\t * \u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u30de\u30b9\u30bfAPI\n\t * @return object\n\t */\n\tpublic static function getCreditCard()\n\t{\n\t\t$uri = \"http://webservice.recruit.co.jp/hotpepper/credit_card/v1/\";\n\t\treturn self::request($uri);\n\t}\n\n\t/**\n\t * \u30ec\u30b9\u30c8\u30e9\u30f3\u691c\u7d22\n\t * @return object\n\t */\n\tpublic static function getRestaurants()\n\t{\n\t\t$uri = \"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/\";\n\t\t$query = array(\n\t\t\t'count' => self::$rowCount\n\t\t);\n\t\tif (!is_null(filter_input_array(INPUT_GET))) {\n\t\t\t$query += filter_input_array(INPUT_GET);\n\t\t}\n\t\treturn self::request($uri, $query);\n\t}\n\n\t/**\n\t * \u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\n\t * @param int $total\n\t * @return string\n\t */\n\tpublic static function pagination($total = 0)\n\t{\n\t\tif ($total == 0) {\n\t\t\treturn;\n\t\t}\n\t\t$start = filter_input(INPUT_GET, 'start', FILTER_VALIDATE_INT);\n\t\tif ($start == 0) {\n\t\t\t$start = 1;\n\t\t}\n\n\t\t$html = '<li%s><a href=\"?%s\">%s</a></li>';\n\n\t\t//\u73fe\u5728\u306e\u9801\n\t\t$curPage = ceil($start / self::$rowCount);\n\t\t$iStart = (0 < $curPage - 3) ? $curPage - 3 : 1;\n\n\t\t$pages = ceil($total / self::$rowCount);\n\t\t$iMax = ($iStart + 6 > $pages) ? $pages : $iStart + 6;\n\n\t\t$arr = array();\n\t\t$params = filter_input_array(INPUT_GET);\n\n\t\t// \u5148\u982d\u30da\u30fc\u30b8\n\t\tif ($start != 1) {\n\t\t\t$params['start'] = 1;\n\t\t\t$query = http_build_query($params, '', '&amp;');\n\t\t\t$arr[] = sprintf($html, '', $query, '\u6700\u521d');\n\t\t\t$params['start'] = $start - self::$rowCount;\n\t\t\t$query = http_build_query($params, '', '&amp;');\n\t\t\t$arr[] = sprintf($html, '', $query, '\u524d\u3078');\n\t\t}\n\n\t\tfor ($i = $iStart; $i <= $iMax; $i++) {\n\t\t\t$params['start'] = ($i - 1) * self::$rowCount + 1;\n\t\t\t$class = ($params['start'] == $start) ? ' class=\"active\"' : '';\n\t\t\t$query = http_build_query($params, '', '&amp;');\n\t\t\t$arr[] = sprintf($html, $class, $query, $i);\n\t\t}\n\n\t\t// \u6700\u7d42\u30da\u30fc\u30b8\n\t\t$maxCount = ($pages - 1) * self::$rowCount + 1;\n\t\tif ($start < $maxCount) {\n\t\t\t$params['start'] = $start + self::$rowCount;\n\t\t\t$query = http_build_query($params, '', '&amp;');\n\t\t\t$arr[] = sprintf($html, '', $query, '\u6b21\u3078');\n\t\t\t$params['start'] = $maxCount;\n\t\t\t$query = http_build_query($params, '', '&amp;');\n\t\t\t$arr[] = sprintf($html, '', $query, '\u6700\u7d42');\n\t\t}\n\n\t\treturn implode(PHP_EOL, $arr);\n\t}\n\n}\n```\n\n![localhost_2016-09-15_05-15-15.png](https://qiita-image-store.s3.amazonaws.com/0/46841/423abb58-7553-ee20-5eb8-1bc1275ab75f.png \"localhost_2016-09-15_05-15-15.png\")\n\n", "tags": ["PHP", "\u30db\u30c3\u30c8\u30da\u30c3\u30d1\u30fcAPI", "XML"]}