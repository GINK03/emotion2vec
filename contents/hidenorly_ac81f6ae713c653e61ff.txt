{"context": " More than 1 year has passed since last update.\u524d\u56de\u3001brillo emulator\u3092\u5f37\u5236\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u305f\u306e\u3067\u3001\u4e2d\u3092\u8997\u3044\u3066\u3044\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u524d\u56de\u6c17\u306b\u306a\u3063\u305f\u306e\u306f\u3001selinux\u306epolicy violation\u306e\u6570\u3005\ncapability: warning: `wpa_supplicant' uses 32-bit capabilities (legacy support in use)\ntype=1400 audit(1448466976.510:11): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466977.090:12): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466977.210:13): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466978.490:14): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466980.620:15): avc: denied { write } for pid=1060 comm=\"logd.writer\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466980.940:16): avc: denied { write } for pid=1060 comm=\"logd.writer\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466981.500:17): avc: denied { search } for pid=1094 comm=\"bluetoothtbd\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:bluetoothtbd:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\ntype=1400 audit(1448466982.270:18): avc: denied { search } for pid=1052 comm=\"keystore\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:keystore:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\ntype=1400 audit(1448466982.280:19): avc: denied { search } for pid=1055 comm=\"Binder_2\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:sensorservice:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\ntype=1400 audit(1448466982.320:20): avc: denied { sys_nice } for pid=1055 comm=\"Binder_2\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466982.320:21): avc: denied { sys_nice } for pid=1098 comm=\"sensorservice\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466982.320:22): avc: denied { sys_nice } for pid=1098 comm=\"Binder_1\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466982.330:23): avc: denied { sys_nice } for pid=1098 comm=\"Binder_1\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466990.980:24): avc: denied { search } for pid=1119 comm=\"mediaserver\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:mediaserver:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u89e3\u6790\u4f5c\u696d\u306e\u90aa\u9b54\u306a\u306e\u3067\u3001selinux\u3092\u7121\u52b9\u5316\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u307e\u305a\u3001selinux\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u3053\u3068\u306e\u78ba\u8a8d\n$ ls\ntype=1400 audit(1448467661.040:25): avc: denied { getattr } for pid=1141 comm=\"ls\" path=\"/init\" dev=\"sda\" ino=22 scontext=u:r:shell:s0 tcontext=u:object_r:init_exec:s0 tclass=file permissive=0\nls: ./init: Permission denied\nacct         dev               init.rc     property_contexts sepolicy         \ncache        etc               init.usb.rc root              service_contexts \nconfig       file_contexts.bin lost+found  sbin              storage          \nd            fstab.device      mnt         sdcard            sys              \ndata         init.environ.rc   oem         seapp_contexts    system           \ndefault.prop init.qemu.rc      proc        selinux_version   ueventd.rc       \n\n\u306f\u3044\u3002\u3053\u306e\u3088\u3046\u306benforce\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001audit\u306elog\u304c\u3067\u307e\u3059\u3002\n\nselinux\u306e\u7121\u52b9\u5316\n$ su \n# setenforce 0\ntype=1404 audit(1448467710.180:26): enforcing=0 old_enforcing=1 auid=4294967295 ses=4294967295\n# getenforce\nPermissive\n\n\u3068\u3059\u308b\u3068\u3001\n# ls /\nacct         etc               init.usb.rc       sbin             sys        \ncache        file_contexts.bin lost+found        sdcard           system     \nconfig       fstab.device      mnt               seapp_contexts   ueventd.rc \nd            init              oem               selinux_version  \ndata         init.environ.rc   proc              sepolicy         \ndefault.prop init.qemu.rc      property_contexts service_contexts \ndev          init.rc           root              storage          \n\n\u3053\u306e\u3088\u3046\u306b\u3001selinux\u306b\u90aa\u9b54\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u3064\u3065\u304f\u3002\n[\u524d\u56de](http://qiita.com/hidenorly/items/f425e123658b831f5d58)\u3001brillo emulator\u3092\u5f37\u5236\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u305f\u306e\u3067\u3001\u4e2d\u3092\u8997\u3044\u3066\u3044\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u524d\u56de\u6c17\u306b\u306a\u3063\u305f\u306e\u306f\u3001selinux\u306epolicy violation\u306e\u6570\u3005\n\n```\ncapability: warning: `wpa_supplicant' uses 32-bit capabilities (legacy support in use)\ntype=1400 audit(1448466976.510:11): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466977.090:12): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466977.210:13): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466978.490:14): avc: denied { write } for pid=1039 comm=\"logd\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466980.620:15): avc: denied { write } for pid=1060 comm=\"logd.writer\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466980.940:16): avc: denied { write } for pid=1060 comm=\"logd.writer\" name=\"property_service\" dev=\"tmpfs\" ino=528 scontext=u:r:logd:s0 tcontext=u:object_r:property_socket:s0 tclass=sock_file permissive=0\ntype=1400 audit(1448466981.500:17): avc: denied { search } for pid=1094 comm=\"bluetoothtbd\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:bluetoothtbd:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\ntype=1400 audit(1448466982.270:18): avc: denied { search } for pid=1052 comm=\"keystore\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:keystore:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\ntype=1400 audit(1448466982.280:19): avc: denied { search } for pid=1055 comm=\"Binder_2\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:sensorservice:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\ntype=1400 audit(1448466982.320:20): avc: denied { sys_nice } for pid=1055 comm=\"Binder_2\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466982.320:21): avc: denied { sys_nice } for pid=1098 comm=\"sensorservice\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466982.320:22): avc: denied { sys_nice } for pid=1098 comm=\"Binder_1\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466982.330:23): avc: denied { sys_nice } for pid=1098 comm=\"Binder_1\" capability=23 scontext=u:r:sensorservice:s0 tcontext=u:r:sensorservice:s0 tclass=capability permissive=0\ntype=1400 audit(1448466990.980:24): avc: denied { search } for pid=1119 comm=\"mediaserver\" name=\"cpuctl\" dev=\"tmpfs\" ino=748 scontext=u:r:mediaserver:s0 tcontext=u:object_r:cpuctl_device:s0 tclass=dir permissive=0\n```\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001\u89e3\u6790\u4f5c\u696d\u306e\u90aa\u9b54\u306a\u306e\u3067\u3001selinux\u3092\u7121\u52b9\u5316\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n# \u307e\u305a\u3001selinux\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u3053\u3068\u306e\u78ba\u8a8d\n\n```\n$ ls\ntype=1400 audit(1448467661.040:25): avc: denied { getattr } for pid=1141 comm=\"ls\" path=\"/init\" dev=\"sda\" ino=22 scontext=u:r:shell:s0 tcontext=u:object_r:init_exec:s0 tclass=file permissive=0\nls: ./init: Permission denied\nacct         dev               init.rc     property_contexts sepolicy         \ncache        etc               init.usb.rc root              service_contexts \nconfig       file_contexts.bin lost+found  sbin              storage          \nd            fstab.device      mnt         sdcard            sys              \ndata         init.environ.rc   oem         seapp_contexts    system           \ndefault.prop init.qemu.rc      proc        selinux_version   ueventd.rc       \n```\n\n\u306f\u3044\u3002\u3053\u306e\u3088\u3046\u306benforce\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001audit\u306elog\u304c\u3067\u307e\u3059\u3002\n\n# selinux\u306e\u7121\u52b9\u5316\n\n```\n$ su \n# setenforce 0\ntype=1404 audit(1448467710.180:26): enforcing=0 old_enforcing=1 auid=4294967295 ses=4294967295\n# getenforce\nPermissive\n```\n\n\u3068\u3059\u308b\u3068\u3001\n\n```\n# ls /\nacct         etc               init.usb.rc       sbin             sys        \ncache        file_contexts.bin lost+found        sdcard           system     \nconfig       fstab.device      mnt               seapp_contexts   ueventd.rc \nd            init              oem               selinux_version  \ndata         init.environ.rc   proc              sepolicy         \ndefault.prop init.qemu.rc      property_contexts service_contexts \ndev          init.rc           root              storage          \n```\n\n\u3053\u306e\u3088\u3046\u306b\u3001selinux\u306b\u90aa\u9b54\u3055\u308c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u3064\u3065\u304f\u3002\n", "tags": ["brillo", "emulator", "SELinux", "permissive", "enforcing"]}