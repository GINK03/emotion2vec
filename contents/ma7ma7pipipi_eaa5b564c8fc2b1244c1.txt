{"context": "\u3053\u3093\u306b\u3061\u308f\u3002\ncakephp3 \u3067 afterinput \u5bfe\u5fdc\u3057\u305f\u3044\u3051\u3069\u3001\u3069\u3046\u3059\u308a\u3083\u3044\u3044\u3093\uff1f\n\u3068\u304a\u60a9\u307f\u306e\u5965\u69d8\u5fc5\u898b\u3067\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u306e\u3067\u3059\u306d\u3002\n/config/app_form.php \u3092\u4f5c\u308b\n\napp_form.php\n<?php\n$config = [\n    'button' => '<button{{attrs}} class=\"btn btn-default\">{{text}}</button>',\n    'checkbox' => '<input type=\"checkbox\" name=\"{{name}}\" value=\"{{value}}\"{{attrs}}>',\n    'before_addoninput' => '<div class=\"input-group\"><span class=\"input-group-addon\">{{before_addon}}</span><input type=\"{{type}}\" name=\"{{name}}\"{{attrs}}></div>',\n    'after_addoninput' => '<div class=\"input-group\"><input type=\"{{type}}\" name=\"{{name}}\"{{attrs}}><span class=\"input-group-addon\">{{after_addon}}</span></div>',\n    'dateWidget' => '<ul class=\"list-inline\"><li class=\"year\">{{year}}<label>\u5e74</label></li><li class=\"month\"> {{month}} <label>\u6708</label> </li><li class=\"day\"> {{day}} <label>\u65e5</label> </li></ul>',\n    'error' => '<div class=\"error-message\">{{content}}</div>',\n    'errorList' => '<ul>{{content}}</ul>',\n    'errorItem' => '<li>{{text}}</li>',\n\n    'file' => '<label for=\"{{name}}\">+ \u9078\u629e\u3057\u3066\u4e0b\u3055\u3044<input type=\"file\" name=\"{{name}}\"{{attrs}}></label>',\n\n    'fieldset' => '<fieldset>{{content}}</fieldset>',\n    'formstart' => '<form{{attrs}}>',\n    'formend' => '</form>',\n    'formGroup' => '{{label}}{{input}}',\n    'hiddenblock' => '<div style=\"display:none;\">{{content}}</div>',\n    'input' => '<input class=\"form-control\" type=\"{{type}}\" name=\"{{name}}\"{{attrs}}>',\n    'inputSubmit' => '<input type=\"{{type}}\"{{attrs}}>',\n    'inputContainer' => '<div class=\"form-group {{type}}{{required}}\">{{content}}</div>',\n    'inputContainerError' => '<div class=\"form-group {{type}}{{required}} has-error\">{{content}}{{error}}</div>',\n    'label' => '{{text}}',\n    'legend' => '<legend>{{text}}</legend>',\n    'option' => '<option value=\"{{value}}\"{{attrs}}>{{text}}</option>',\n    'optgroup' => '<optgroup label=\"{{label}}\"{{attrs}}>{{content}}</optgroup>',\n    'select' => '<select class=\"form-control\" name=\"{{name}}\"{{attrs}}>{{content}}</select>',\n    'selectMultiple' => '<select class=\"form-control\" name=\"{{name}}[]\" multiple=\"multiple\"{{attrs}}>{{content}}</select>',\n    'radio' => '<input type=\"radio\" name=\"{{name}}\" value=\"{{value}}\"{{attrs}}>',\n    'radioWrapper' => '<div class=\"radio\"><label>{{input}} {{label}}</label></div>',\n    'textarea' => '<textarea class=\"form-control\" name=\"{{name}}\"{{attrs}}>{{value}}</textarea>',\n    'submitContainer' => '<div class=\"submit\">{{content}}</div>',\n];\n\n?>\n\n\nForm\u30d8\u30eb\u30d1\u30fc\u306e\u8aad\u307f\u8fbc\u307f\u3092\u5909\u66f4\n\nAppController.php\n    public function initialize()\n    {\n        parent::initialize();\n\n        $this->viewBuilder()->helpers([\n            'Form' => ['templates' => 'app_form']\n        ]);\n    }\n\n\nBasicWidget.php \u3092\u5909\u66f4\ncakephp/src/View/Widget \u3092 app/src/View/Widget \u306b\u30b3\u30d4\u30fc\u3057\u3066\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u9055\u3046\u307f\u305f\u3044\u306a\u306e\u3067\u3002\u6ce8\u610f\u3002\u3002\u3002\n\nBasicWidget.php\n    public function render(array $data, ContextInterface $context) {\n        $data += [\n            'name' => '',\n            'val' => null,\n            'type' => null,\n            'escape' => true,\n            'templateVars' => []\n        ];\n\n        $data['value'] = $data['val'];\n        $before_addon = '';\n        $after_addon = '';\n\n        $template = 'input';\n\n        if(isset($data['before_addon'])) {\n            $before_addon = $data['before_addon'];\n            $template = 'before_addoninput';\n        }\n\n        if(isset($data['after_addon'])) {\n            $after_addon = $data['after_addon'];\n            $template = 'after_addoninput';\n        }\n\n        unset($data['val'], $data['before_addon']);\n\n        return $this->_templates->format($template, [\n            'name' => $data['name'],\n            'before_addon' => $before_addon,\n            'after_addon' => $after_addon,\n\n            'type' => $data['type'],\n            'templateVars' => $data['templateVars'],\n            'attrs' => $this->_templates->formatAttributes(\n                $data,\n                ['name', 'type']\n            ),\n        ]);\n    }\n\n\n\u3067\u3042\u3068\u306f\u547c\u3073\u51fa\u3059\u3060\u3051\u3067\u30fb\u30fb\u30fb\n\n    <?php\n    echo $this->Form->input('title', ['before_addon'=>'@', \"class\"=>\"form-control\"]);\n    ?>\n\n    <?php\n    echo $this->Form->input('hoge', ['after_addon'=>'cm', \"class\"=>\"form-control\"]);\n    ?>\n\n\u306a\u3093\u3068\u3071\u3063\u304f\u308a\uff01\n\u3046\u307e\u304f\u8868\u793a\u3067\u304d\u305f\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304b\u3002\n\n\u3053\u3093\u306b\u3061\u308f\u3002\ncakephp3 \u3067 afterinput \u5bfe\u5fdc\u3057\u305f\u3044\u3051\u3069\u3001\u3069\u3046\u3059\u308a\u3083\u3044\u3044\u3093\uff1f\n\u3068\u304a\u60a9\u307f\u306e\u5965\u69d8\u5fc5\u898b\u3067\u3059\u3002\n\n![alt](http://www.sanisoft.com/blog/wp-content/uploads/2014/08/posts-title.png)\n\n\u3053\u3093\u306a\u611f\u3058\u306e\u3067\u3059\u306d\u3002\n\n/config/app_form.php \u3092\u4f5c\u308b\n\n```app_form.php\n<?php\n$config = [\n    'button' => '<button{{attrs}} class=\"btn btn-default\">{{text}}</button>',\n    'checkbox' => '<input type=\"checkbox\" name=\"{{name}}\" value=\"{{value}}\"{{attrs}}>',\n    'before_addoninput' => '<div class=\"input-group\"><span class=\"input-group-addon\">{{before_addon}}</span><input type=\"{{type}}\" name=\"{{name}}\"{{attrs}}></div>',\n    'after_addoninput' => '<div class=\"input-group\"><input type=\"{{type}}\" name=\"{{name}}\"{{attrs}}><span class=\"input-group-addon\">{{after_addon}}</span></div>',\n    'dateWidget' => '<ul class=\"list-inline\"><li class=\"year\">{{year}}<label>\u5e74</label></li><li class=\"month\"> {{month}} <label>\u6708</label> </li><li class=\"day\"> {{day}} <label>\u65e5</label> </li></ul>',\n    'error' => '<div class=\"error-message\">{{content}}</div>',\n    'errorList' => '<ul>{{content}}</ul>',\n    'errorItem' => '<li>{{text}}</li>',\n\n    'file' => '<label for=\"{{name}}\">+ \u9078\u629e\u3057\u3066\u4e0b\u3055\u3044<input type=\"file\" name=\"{{name}}\"{{attrs}}></label>',\n\n    'fieldset' => '<fieldset>{{content}}</fieldset>',\n    'formstart' => '<form{{attrs}}>',\n    'formend' => '</form>',\n    'formGroup' => '{{label}}{{input}}',\n    'hiddenblock' => '<div style=\"display:none;\">{{content}}</div>',\n    'input' => '<input class=\"form-control\" type=\"{{type}}\" name=\"{{name}}\"{{attrs}}>',\n    'inputSubmit' => '<input type=\"{{type}}\"{{attrs}}>',\n    'inputContainer' => '<div class=\"form-group {{type}}{{required}}\">{{content}}</div>',\n    'inputContainerError' => '<div class=\"form-group {{type}}{{required}} has-error\">{{content}}{{error}}</div>',\n    'label' => '{{text}}',\n    'legend' => '<legend>{{text}}</legend>',\n    'option' => '<option value=\"{{value}}\"{{attrs}}>{{text}}</option>',\n    'optgroup' => '<optgroup label=\"{{label}}\"{{attrs}}>{{content}}</optgroup>',\n    'select' => '<select class=\"form-control\" name=\"{{name}}\"{{attrs}}>{{content}}</select>',\n    'selectMultiple' => '<select class=\"form-control\" name=\"{{name}}[]\" multiple=\"multiple\"{{attrs}}>{{content}}</select>',\n    'radio' => '<input type=\"radio\" name=\"{{name}}\" value=\"{{value}}\"{{attrs}}>',\n    'radioWrapper' => '<div class=\"radio\"><label>{{input}} {{label}}</label></div>',\n    'textarea' => '<textarea class=\"form-control\" name=\"{{name}}\"{{attrs}}>{{value}}</textarea>',\n    'submitContainer' => '<div class=\"submit\">{{content}}</div>',\n];\n\n?>\n```\n\nForm\u30d8\u30eb\u30d1\u30fc\u306e\u8aad\u307f\u8fbc\u307f\u3092\u5909\u66f4\n\n```AppController.php\n    public function initialize()\n    {\n        parent::initialize();\n\n        $this->viewBuilder()->helpers([\n            'Form' => ['templates' => 'app_form']\n        ]);\n    }\n```\n\nBasicWidget.php \u3092\u5909\u66f4\ncakephp/src/View/Widget \u3092 app/src/View/Widget \u306b\u30b3\u30d4\u30fc\u3057\u3066\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\u9055\u3046\u307f\u305f\u3044\u306a\u306e\u3067\u3002\u6ce8\u610f\u3002\u3002\u3002\n\n```BasicWidget.php\n    public function render(array $data, ContextInterface $context) {\n        $data += [\n            'name' => '',\n            'val' => null,\n            'type' => null,\n            'escape' => true,\n            'templateVars' => []\n        ];\n\n        $data['value'] = $data['val'];\n        $before_addon = '';\n        $after_addon = '';\n\n        $template = 'input';\n\n        if(isset($data['before_addon'])) {\n            $before_addon = $data['before_addon'];\n            $template = 'before_addoninput';\n        }\n\n        if(isset($data['after_addon'])) {\n            $after_addon = $data['after_addon'];\n            $template = 'after_addoninput';\n        }\n\n        unset($data['val'], $data['before_addon']);\n\n        return $this->_templates->format($template, [\n            'name' => $data['name'],\n            'before_addon' => $before_addon,\n            'after_addon' => $after_addon,\n\n            'type' => $data['type'],\n            'templateVars' => $data['templateVars'],\n            'attrs' => $this->_templates->formatAttributes(\n                $data,\n                ['name', 'type']\n            ),\n        ]);\n    }\n```\n\n\u3067\u3042\u3068\u306f\u547c\u3073\u51fa\u3059\u3060\u3051\u3067\u30fb\u30fb\u30fb\n\n```php\n\n    <?php\n    echo $this->Form->input('title', ['before_addon'=>'@', \"class\"=>\"form-control\"]);\n    ?>\n\n    <?php\n    echo $this->Form->input('hoge', ['after_addon'=>'cm', \"class\"=>\"form-control\"]);\n    ?>\n```\n\n\u306a\u3093\u3068\u3071\u3063\u304f\u308a\uff01\n\u3046\u307e\u304f\u8868\u793a\u3067\u304d\u305f\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304b\u3002\n\n\n:relaxed:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n", "tags": ["cakephp3", "Bootstrap3"]}