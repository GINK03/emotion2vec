{"context": "\n\n\u6982\u8981\nSketchUp\u3067STL\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u898b\u305f\u3002\n\n\u5199\u771f\n\n\n\u74b0\u5883\nSketchUp\nv7.1.6860\nv8.0.16846\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\nstl_ld.rb\nrequire \"sketchup.rb\"\n\ndef stl_ld\n  entities = Sketchup.active_model.entities\n  groups = {}\n  vertices = []\n  state = 0\n  f = UI.openpanel \"Select .stl file\", \"\", \"*.stl\"\n  return unless f\n  lines = IO.readlines(f)\n  lines.each do | line |\n    next if line[0] == ?#\n    line.strip!\n    values = line.split\n    next if values.length == 0\n    cmd = values.shift\n    case cmd\n    when \"facet\"\n      state = 0\n      vertices = []\n    when \"vertex\"\n      state = state + 1\n      v = []\n      v << Float(values[0])\n      v << Float(values[2])\n      v << Float(values[1])\n      vertices << v\n      if (state == 3)\n        begin\n          entities.add_face vertices\n        rescue\n          UI.messagebox \"err\"\n          p vertices\n        end\n      end\n    end\n  end \nend\n\nif (not file_loaded?(\"stl_ld.rb\"))\n  UI.menu(\"Plugin\").add_item(\"stl_loader\") {stl_ld}\nend\n\nfile_loaded(\"stl_ld.rb\")\n\n\n#\u6982\u8981\nSketchUp\u3067STL\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u898b\u305f\u3002\n\n\n#\u5199\u771f\n![stl.jpg](https://qiita-image-store.s3.amazonaws.com/0/18104/4ab53f5c-5650-6bac-86e7-6e132320bd6e.jpeg)\n\n\n#\u74b0\u5883\nSketchUp\nv7.1.6860\nv8.0.16846\n\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\nstl_ld.rb\n\n```\nrequire \"sketchup.rb\"\n\ndef stl_ld\n  entities = Sketchup.active_model.entities\n  groups = {}\n  vertices = []\n  state = 0\n  f = UI.openpanel \"Select .stl file\", \"\", \"*.stl\"\n  return unless f\n  lines = IO.readlines(f)\n  lines.each do | line |\n    next if line[0] == ?#\n    line.strip!\n    values = line.split\n    next if values.length == 0\n    cmd = values.shift\n    case cmd\n    when \"facet\"\n      state = 0\n      vertices = []\n    when \"vertex\"\n      state = state + 1\n      v = []\n      v << Float(values[0])\n      v << Float(values[2])\n      v << Float(values[1])\n      vertices << v\n      if (state == 3)\n        begin\n          entities.add_face vertices\n        rescue\n          UI.messagebox \"err\"\n          p vertices\n        end\n      end\n    end\n  end \nend\n\nif (not file_loaded?(\"stl_ld.rb\"))\n  UI.menu(\"Plugin\").add_item(\"stl_loader\") {stl_ld}\nend\n\nfile_loaded(\"stl_ld.rb\")\n\n```\n", "tags": ["SketchUp", "Ruby", "STL"]}