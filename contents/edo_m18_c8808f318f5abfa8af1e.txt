{"context": "\u901a\u5e38\u306e Plane \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u306e\u4ea4\u5dee\u5224\u5b9a\u306a\u3089\u30ec\u30a4\u30ad\u30e3\u30b9\u30c8\u3092\u4f7f\u3063\u3066\u8868\u73fe\u3059\u308b\u306e\u304c\u624b\u3063\u53d6\u308a\u65e9\u3044\u3067\u3059\u304c\u3001\u4f8b\u3048\u3070\u64ec\u4f3c\u7684\u306b\u3001\u7121\u9650\u9060\u306b\u5b58\u5728\u3059\u308b\u5e73\u9762\u306b\u5bfe\u3057\u3066\u3069\u3053\u3092\u6307\u3057\u793a\u3057\u3066\u3044\u308b\u304b\u3001\u3068\u3044\u3046\u306e\u304c\u5206\u304b\u308b\u3068\u4fbf\u5229\u305d\u3046\u3067\u3059\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u305d\u306e\u5b9f\u88c5\u3067\u3059\u3002\n\uff08\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\uff09\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3046\u3068\u3001\u5f0f\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n// \u5e73\u9762 \\\\\n(n, x) = h\n//\u5e73\u9762(n,x)=h{// \u5e73\u9762 \\\\\n(n, x) = h\n}\n// \u76f4\u7dda \\\\\nx_0 + tm\n//\u76f4\u7ddax0+tm{// \u76f4\u7dda \\\\\nx_0 + tm\n}\n// \u4ea4\u70b9 \\\\\nx_0 + \\frac{h - (n \\cdot x_0)}{n \\cdot m}m\n//\u4ea4\u70b9x0+h\u2212(n\u22c5x0)n\u22c5mm{// \u4ea4\u70b9 \\\\\nx_0 + \\frac{h - (n \\cdot x_0)}{n \\cdot m}m\n}\n\u3053\u3053\u3067 nn \u306f\u5e73\u9762\u306e\u6cd5\u7dda\u3001 xx \u306f\u300c\u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u300d\u3001 x0x_0 \u306f\u8d77\u70b9\u3068\u306a\u308b\u70b9\u3001tt \u306f\u3044\u308f\u3086\u308b\u300c\u5a92\u4ecb\u5909\u6570\u300d\u3002mm \u306f\u8d77\u70b9\u304b\u3089\u5e73\u9762\u306b\u5411\u304b\u3046\u30d9\u30af\u30c8\u30eb\u3001\u305d\u3057\u3066 hh \u306f\u7b26\u53f7\u4ed8\u304d\u8ddd\u96e2\u3068\u306a\u308a\u307e\u3059\u3002\nUnity\u30d9\u30fc\u30b9\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u8a00\u3048\u3070\u305d\u308c\u305e\u308c\u306f\u4ee5\u4e0b\u306e\u610f\u5473\u3068\u306a\u308a\u307e\u3059\u3002\n\nnn ... \u6cd5\u7dda\u3002GameObject \u3092\u5229\u7528\u3059\u308b\u306a\u3089 transform.forward \u306a\u3069\u3092\u5229\u7528\u3059\u308b\u3002\uff08\u3082\u3061\u308d\u3093\u3001 new Vector3 \u3057\u3066\u3082\u3044\u3044\uff09\nxx ... plane.transform.position\u3002\u4ea4\u70b9\u3092\u6c42\u3081\u305f\u3044\u5e73\u9762\u4e0a\u306b\u3042\u308b\u300c\u4efb\u610f\u306e\u70b9\u300d\u3002 transform.position \u3082\u5f53\u7136\u5e73\u9762\u306b\u542b\u307e\u308c\u308b\u305f\u3081\u3001\u3053\u308c\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3059\u308b\u3002\nhh ... \u4e0a\u8a18\u3075\u305f\u3064\u306e\u30d9\u30af\u30c8\u30eb\u306e\u5185\u7a4d\u3002\u5177\u4f53\u7684\u306b\u306f\u6cd5\u7dda\u306e\u5c04\u5f71\u3057\u305f\u4f4d\u7f6e\u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\u3002\nx0x_0 ... transform.position \u59cb\u70b9\u3068\u3057\u305f\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4f4d\u7f6e\u3002\uff08\u3082\u3061\u308d\u3093 new Vector3 \u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u4e0a\u3067\u751f\u6210\u3057\u305f\u70b9\u3067\u3082OK\uff09\nmm ... transform.forward \u59cb\u70b9\u304b\u3089\u5e73\u9762\u3078\u5411\u304b\u3046\u30d9\u30af\u30c8\u30eb\u3002\u3082\u3061\uff52\uff08\u4ee5\u4e0b\u7565\uff09\u3002\n\n\u3069\u3046\u3057\u3066\u305d\u3046\u306a\u308b\u306e\u304b\u3001\u3068\u3044\u3046\u8a3c\u660e\u306b\u95a2\u3057\u3066\u306f\u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\u3092\u898b\u3066\u3082\u3089\u3046\u306e\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9\u3068\u3057\u3066\u5927\u4e8b\u306a\u30dd\u30a4\u30f3\u30c8\u306f\u3001\n\n\u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u306f\u3001\u59cb\u70b9\u304b\u3089\u5e73\u9762\u306b\u5411\u304b\u3046\u30d9\u30af\u30c8\u30eb\u306b\u6cbf\u3063\u3066\u9032\u3081\u3066\u3044\u304f\u4e2d\u306b\u3042\u308b\n\u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u306f\u3001\u5e73\u9762\u306e\u6cd5\u7dda\u3068\u306e\u5185\u7a4d\u3092\u53d6\u308b\u3068\u5fc5\u305a\u540c\u3058\u5024\u306b\u306a\u308b\uff08\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u7167\uff09\n\n\u3068\u3044\u3046\u70b9\u3067\u3059\u3002\n\u305d\u3057\u3066 n\u22c5(x0+tm)=hn \\cdot (x_0 + tm) = h \u3082\u307e\u305f\u6210\u308a\u7acb\u3064\u3053\u3068\u3092\u5229\u7528\u3057\u3066\u3001\u5a92\u4ecb\u5909\u6570\u3067\u3042\u308b t \u306e\u5024\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nt \u306e\u5024\u304c\u6c42\u307e\u308c\u3070\u3001\u3042\u3068\u306f\u59cb\u70b9\u3068\u65b9\u5411\u30d9\u30af\u30c8\u30eb\u306b t \u3092\u639b\u3051\u3066\u3084\u308b\u3053\u3068\u3067\u4ea4\u70b9\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067 hh \u304c\u672a\u77e5\u306a\u611f\u3058\u304c\u3057\u307e\u3059\u304c\u3001\u5b9f\u306f n\u22c5xn \\cdot x \u306e xx \u306f\u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u306a\u306e\u3067\u5e73\u9762\u306e\u4f4d\u7f6e\u30d9\u30af\u30c8\u30eb\u3092\u4f7f\u3063\u3066\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u64ec\u4f3c\u7684\u306b\u7121\u9650\u306b\u5e83\u304c\u308b\u5e73\u9762\u306b\u5bfe\u3057\u3066\u306e\u4f4d\u7f6e\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u898b\u3066\u3082\u3089\u3046\u3068\u5206\u304b\u308b\u3088\u3046\u306b\u3001\u898b\u305f\u76ee\u306e\u5e73\u9762\u4e0a\u3060\u3051\u3067\u306a\u304f\u3001\u305d\u3053\u304b\u3089\u5916\u308c\u3066\u3082\u5e73\u9762\u306b\u76f8\u5f53\u3059\u308b\u5834\u6240\u306b\u7403\u4f53\u304c\u79fb\u52d5\u3057\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u3001\u3053\u3053\u3067\u5229\u7528\u3057\u305f\u30b3\u30fc\u30c9\u3092\u5168\u6587\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\nusing UnityEngine;\nusing System.Collections;\n\npublic class PlaneSample2 : MonoBehaviour\n{\n    public GameObject StartPoint;\n    public GameObject Plane;\n    public GameObject Pointer;\n\n    // Update is called once per frame\n    void Update ()\n    {\n        var n = Plane.transform.up;\n        var x = Plane.transform.position;\n        var x0 = StartPoint.transform.position;\n        var m = StartPoint.transform.forward;\n        var h = Vector3.Dot(n, x);\n\n        var intersectPoint = x0 + ((h - Vector3.Dot(n, x0)) / (Vector3.Dot(n, m))) * m;\n\n        Pointer.transform.position = intersectPoint;\n    }\n}\n\n\u3061\u306a\u307f\u306b StartPoint \u306b\u30ab\u30d7\u30bb\u30eb\u3092\u3001Plane \u306b\u306f\u30d7\u30ec\u30fc\u30f3\u3092\u3001Pointer \u306b\u306f\u30b9\u30d5\u30a3\u30a2\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u901a\u5e38\u306e `Plane` \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u306e\u4ea4\u5dee\u5224\u5b9a\u306a\u3089\u30ec\u30a4\u30ad\u30e3\u30b9\u30c8\u3092\u4f7f\u3063\u3066\u8868\u73fe\u3059\u308b\u306e\u304c\u624b\u3063\u53d6\u308a\u65e9\u3044\u3067\u3059\u304c\u3001\u4f8b\u3048\u3070\u64ec\u4f3c\u7684\u306b\u3001\u7121\u9650\u9060\u306b\u5b58\u5728\u3059\u308b\u5e73\u9762\u306b\u5bfe\u3057\u3066\u3069\u3053\u3092\u6307\u3057\u793a\u3057\u3066\u3044\u308b\u304b\u3001\u3068\u3044\u3046\u306e\u304c\u5206\u304b\u308b\u3068\u4fbf\u5229\u305d\u3046\u3067\u3059\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u305d\u306e\u5b9f\u88c5\u3067\u3059\u3002\n\uff08[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://physmath.main.jp/src/line-plane-intersection-point.html)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\uff09\n\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u304b\u3089\u5f15\u7528\u3055\u305b\u3066\u3082\u3089\u3046\u3068\u3001\u5f0f\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n```math\n// \u5e73\u9762 \\\\\n(n, x) = h\n```\n\n```math\n// \u76f4\u7dda \\\\\nx_0 + tm\n```\n\n```math\n// \u4ea4\u70b9 \\\\\nx_0 + \\frac{h - (n \\cdot x_0)}{n \\cdot m}m\n```\n\n\u3053\u3053\u3067 $n$ \u306f\u5e73\u9762\u306e\u6cd5\u7dda\u3001 $x$ \u306f\u300c\u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u300d\u3001 $x_0$ \u306f\u8d77\u70b9\u3068\u306a\u308b\u70b9\u3001$t$ \u306f\u3044\u308f\u3086\u308b\u300c\u5a92\u4ecb\u5909\u6570\u300d\u3002$m$ \u306f\u8d77\u70b9\u304b\u3089\u5e73\u9762\u306b\u5411\u304b\u3046\u30d9\u30af\u30c8\u30eb\u3001\u305d\u3057\u3066 $h$ \u306f\u7b26\u53f7\u4ed8\u304d\u8ddd\u96e2\u3068\u306a\u308a\u307e\u3059\u3002\n\nUnity\u30d9\u30fc\u30b9\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u8a00\u3048\u3070\u305d\u308c\u305e\u308c\u306f\u4ee5\u4e0b\u306e\u610f\u5473\u3068\u306a\u308a\u307e\u3059\u3002\n\n- $n$ ... \u6cd5\u7dda\u3002`GameObject` \u3092\u5229\u7528\u3059\u308b\u306a\u3089 `transform.forward` \u306a\u3069\u3092\u5229\u7528\u3059\u308b\u3002\uff08\u3082\u3061\u308d\u3093\u3001 `new Vector3` \u3057\u3066\u3082\u3044\u3044\uff09\n- $x$ ... plane.transform.position\u3002\u4ea4\u70b9\u3092\u6c42\u3081\u305f\u3044\u5e73\u9762\u4e0a\u306b\u3042\u308b\u300c\u4efb\u610f\u306e\u70b9\u300d\u3002 `transform.position` \u3082\u5f53\u7136\u5e73\u9762\u306b\u542b\u307e\u308c\u308b\u305f\u3081\u3001\u3053\u308c\u3092\u305d\u306e\u307e\u307e\u5229\u7528\u3059\u308b\u3002\n- $h$ ... \u4e0a\u8a18\u3075\u305f\u3064\u306e\u30d9\u30af\u30c8\u30eb\u306e\u5185\u7a4d\u3002\u5177\u4f53\u7684\u306b\u306f\u6cd5\u7dda\u306e\u5c04\u5f71\u3057\u305f\u4f4d\u7f6e\u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\u3002\n- $x_0$ ... transform.position \u59cb\u70b9\u3068\u3057\u305f\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u4f4d\u7f6e\u3002\uff08\u3082\u3061\u308d\u3093 `new Vector3` \u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u4e0a\u3067\u751f\u6210\u3057\u305f\u70b9\u3067\u3082OK\uff09\n- $m$ ... transform.forward \u59cb\u70b9\u304b\u3089\u5e73\u9762\u3078\u5411\u304b\u3046\u30d9\u30af\u30c8\u30eb\u3002\u3082\u3061\uff52\uff08\u4ee5\u4e0b\u7565\uff09\u3002\n\n\u3069\u3046\u3057\u3066\u305d\u3046\u306a\u308b\u306e\u304b\u3001\u3068\u3044\u3046\u8a3c\u660e\u306b\u95a2\u3057\u3066\u306f\u53c2\u8003\u306b\u3057\u305f\u8a18\u4e8b\u3092\u898b\u3066\u3082\u3089\u3046\u306e\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u57fa\u672c\u7684\u306a\u8003\u3048\u65b9\u3068\u3057\u3066\u5927\u4e8b\u306a\u30dd\u30a4\u30f3\u30c8\u306f\u3001\n\n1. \u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u306f\u3001\u59cb\u70b9\u304b\u3089\u5e73\u9762\u306b\u5411\u304b\u3046\u30d9\u30af\u30c8\u30eb\u306b\u6cbf\u3063\u3066\u9032\u3081\u3066\u3044\u304f\u4e2d\u306b\u3042\u308b\n2. \u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u306f\u3001\u5e73\u9762\u306e\u6cd5\u7dda\u3068\u306e\u5185\u7a4d\u3092\u53d6\u308b\u3068\u5fc5\u305a\u540c\u3058\u5024\u306b\u306a\u308b\uff08[\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u7167](http://physmath.main.jp/src/plane-signed-distance.html)\uff09\n\n\u3068\u3044\u3046\u70b9\u3067\u3059\u3002\n\u305d\u3057\u3066 $n \\cdot (x_0 + tm) = h$ \u3082\u307e\u305f\u6210\u308a\u7acb\u3064\u3053\u3068\u3092\u5229\u7528\u3057\u3066\u3001\u5a92\u4ecb\u5909\u6570\u3067\u3042\u308b `t` \u306e\u5024\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n`t` \u306e\u5024\u304c\u6c42\u307e\u308c\u3070\u3001\u3042\u3068\u306f\u59cb\u70b9\u3068\u65b9\u5411\u30d9\u30af\u30c8\u30eb\u306b `t` \u3092\u639b\u3051\u3066\u3084\u308b\u3053\u3068\u3067\u4ea4\u70b9\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3001\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3053\u3053\u3067 $h$ \u304c\u672a\u77e5\u306a\u611f\u3058\u304c\u3057\u307e\u3059\u304c\u3001\u5b9f\u306f $n \\cdot x$ \u306e $x$ \u306f\u5e73\u9762\u4e0a\u306e\u4efb\u610f\u306e\u70b9\u306a\u306e\u3067\u5e73\u9762\u306e\u4f4d\u7f6e\u30d9\u30af\u30c8\u30eb\u3092\u4f7f\u3063\u3066\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u64ec\u4f3c\u7684\u306b\u7121\u9650\u306b\u5e83\u304c\u308b\u5e73\u9762\u306b\u5bfe\u3057\u3066\u306e\u4f4d\u7f6e\u3092\u6c42\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![Sample GIF](https://i.gyazo.com/34f67dc4a90ec0fbcc61cd92fba17b1b.gif)\n\n\u898b\u3066\u3082\u3089\u3046\u3068\u5206\u304b\u308b\u3088\u3046\u306b\u3001\u898b\u305f\u76ee\u306e\u5e73\u9762\u4e0a\u3060\u3051\u3067\u306a\u304f\u3001\u305d\u3053\u304b\u3089\u5916\u308c\u3066\u3082\u5e73\u9762\u306b\u76f8\u5f53\u3059\u308b\u5834\u6240\u306b\u7403\u4f53\u304c\u79fb\u52d5\u3057\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\u3001\u3053\u3053\u3067\u5229\u7528\u3057\u305f\u30b3\u30fc\u30c9\u3092\u5168\u6587\u8f09\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n```csharp\nusing UnityEngine;\nusing System.Collections;\n\npublic class PlaneSample2 : MonoBehaviour\n{\n    public GameObject StartPoint;\n    public GameObject Plane;\n    public GameObject Pointer;\n\t\n\t// Update is called once per frame\n\tvoid Update ()\n    {\n        var n = Plane.transform.up;\n        var x = Plane.transform.position;\n        var x0 = StartPoint.transform.position;\n        var m = StartPoint.transform.forward;\n        var h = Vector3.Dot(n, x);\n\n        var intersectPoint = x0 + ((h - Vector3.Dot(n, x0)) / (Vector3.Dot(n, m))) * m;\n\n        Pointer.transform.position = intersectPoint;\n\t}\n}\n```\n\n\u3061\u306a\u307f\u306b `StartPoint` \u306b\u30ab\u30d7\u30bb\u30eb\u3092\u3001`Plane` \u306b\u306f\u30d7\u30ec\u30fc\u30f3\u3092\u3001`Pointer` \u306b\u306f\u30b9\u30d5\u30a3\u30a2\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n", "tags": ["Unity", "3D", "\u6570\u5b66"]}