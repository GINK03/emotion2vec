{"tags": ["oracle", "Oracle11g"], "context": "PL/SQL\u57fa\u790e\u4e2d\u306e\u57fa\u790e\u3092\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u307e\u3059\u3002\n\n\uff1c\uff1c\u884c\u30c8\u30ea\u30ac\u30fc\u306e\u4f5c\u6210\uff1e\uff1e\nSQL> CREATE OR REPLACE TRIGGER \u6ce8\u6587_\u5728\u5eab_TRIG\n  2  AFTER INSERT ON \u6ce8\u6587\u3000FOR EACH ROW\n  3  BEGIN\n  4     UPDATE \u5728\u5eab\n  5     SET    \u5728\u5eab\u6570 = \u5728\u5eab\u6570 - :NEW.\u6ce8\u6587\u6570\n  6     WHERE  \u88fd\u54c1\u540d = :NEW.\u88fd\u54c1\u540d;\n  7  END;\n  8 /\n\n\u884c\u30c8\u30ea\u30ac\u30fc\u4f8b\u3002\n\u30fb2\u884c\u76ee\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u306f\u300cBEFORE\u300d\u3082\u3057\u304f\u306f\u300cAFTER\u300d\u3092\u6307\u5b9a\u3002\n\u3000BEFORE\u3067\u3042\u308c\u3070DML\u51e6\u7406\u306e\u524d\u306b\u8d77\u52d5\u3057\u3001AFTER\u3067\u3042\u308c\u3070DML\u51e6\u7406\u306e\u5f8c\u306b\u8d77\u52d5\u3002\n\u30fb3\u884c\u76ee\u306e\u30a4\u30d9\u30f3\u30c8\u306b\u306f\u3001\u30c8\u30ea\u30ac\u30fc\u306e\u8d77\u52d5\u3059\u308bDML\u6587\u306e\u7a2e\u985e\u3001\u3000\u3059\u306a\u308f\u3061\u300cINSERT\u300d\u300cUPDATE\u300d\u300cDELETE\u300d\n\u30fb4\u884c\u76ee\u306b\u306f\u3001\u3053\u306e\u30c8\u30ea\u30ac\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u8868\u306e\u540d\u524d\u3092\u6307\u5b9a\n\u30fb\u300cON \u8868\u540d\u300d\u306e\u5f8c\u308d\u306b\u300cFOR EACH ROW\u300d\u3068\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u3042\u308c\u3070\u884c\u30c8\u30ea\u30ac\u30fc\u3067\u3042\u308a\u3001\u306a\u3051\u308c\u3070\u3001\u6587\u30c8\u30ea\u30ac\u30fc\u3002\n\u30fbOLD\u3068NEW\n:OLD.\u5217\u540d \u2190DML\u64cd\u4f5c\u524d\u306e\u5217\u5024\n:NEW.\u5217\u540d \u2190DML\u64cd\u4f5c\u5f8c\u306e\u5217\u5024\n\n\u53c2\u8003\u30b5\u30a4\u30c8\nhttp://www.istudy.ne.jp/training/serial/plsql/038.html\n\n\nPL/SQL\u57fa\u790e\u4e2d\u306e\u57fa\u790e\u3092\u30e1\u30e2\u3068\u3057\u3066\u6b8b\u3057\u307e\u3059\u3002\n\n>\uff1c\uff1c\u884c\u30c8\u30ea\u30ac\u30fc\u306e\u4f5c\u6210\uff1e\uff1e\nSQL> CREATE OR REPLACE TRIGGER \u6ce8\u6587_\u5728\u5eab_TRIG\n  2  AFTER INSERT ON \u6ce8\u6587\u3000FOR EACH ROW\n  3  BEGIN\n  4     UPDATE \u5728\u5eab\n  5     SET    \u5728\u5eab\u6570 = \u5728\u5eab\u6570 - :NEW.\u6ce8\u6587\u6570\n  6     WHERE  \u88fd\u54c1\u540d = :NEW.\u88fd\u54c1\u540d;\n  7  END;\n  8 /\n\n\n\u884c\u30c8\u30ea\u30ac\u30fc\u4f8b\u3002\n\u30fb2\u884c\u76ee\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u306f\u300cBEFORE\u300d\u3082\u3057\u304f\u306f\u300cAFTER\u300d\u3092\u6307\u5b9a\u3002\n\u3000BEFORE\u3067\u3042\u308c\u3070DML\u51e6\u7406\u306e\u524d\u306b\u8d77\u52d5\u3057\u3001AFTER\u3067\u3042\u308c\u3070DML\u51e6\u7406\u306e\u5f8c\u306b\u8d77\u52d5\u3002\n\u30fb3\u884c\u76ee\u306e\u30a4\u30d9\u30f3\u30c8\u306b\u306f\u3001\u30c8\u30ea\u30ac\u30fc\u306e\u8d77\u52d5\u3059\u308bDML\u6587\u306e\u7a2e\u985e\u3001\u3000\u3059\u306a\u308f\u3061\u300cINSERT\u300d\u300cUPDATE\u300d\u300cDELETE\u300d\n\u30fb4\u884c\u76ee\u306b\u306f\u3001\u3053\u306e\u30c8\u30ea\u30ac\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u8868\u306e\u540d\u524d\u3092\u6307\u5b9a\n\u30fb\u300cON \u8868\u540d\u300d\u306e\u5f8c\u308d\u306b\u300cFOR EACH ROW\u300d\u3068\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u3042\u308c\u3070\u884c\u30c8\u30ea\u30ac\u30fc\u3067\u3042\u308a\u3001\u306a\u3051\u308c\u3070\u3001\u6587\u30c8\u30ea\u30ac\u30fc\u3002\n\n\u30fbOLD\u3068NEW\n\n:OLD.\u5217\u540d \u2190DML\u64cd\u4f5c\u524d\u306e\u5217\u5024\n:NEW.\u5217\u540d \u2190DML\u64cd\u4f5c\u5f8c\u306e\u5217\u5024\n\n\n- \u53c2\u8003\u30b5\u30a4\u30c8\nhttp://www.istudy.ne.jp/training/serial/plsql/038.html\n"}