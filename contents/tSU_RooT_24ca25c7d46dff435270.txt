{"context": " More than 1 year has passed since last update.ruby-jsonnet\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u521d\u6b69\u7684\u3060\u3051\u3069\u307e\u3068\u3081\u3066\u307f\u305f(\u30e9\u30a4\u30d6\u30e9\u30ea\u306eUsage\u304c\u307e\u3060\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u306e\u3067)\n\u305d\u3082\u305d\u3082Jsonnet\u3068\u306f\u306a\u3093\u305e\u3084\u3068\u3044\u3046\u4eba\u306f\u3053\u3061\u3089\u3092\u3069\u3046\u305e(Jsonnet\u306e\u85a6\u3081)\n\u30b5\u30f3\u30d7\u30eb\u306eJsonnet\u3082\u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u305f\u3002  \n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nruby-jsonnet\n\u3092\u53c2\u8003\u306b\u3001C++\u5b9f\u88c5\u306e\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u30e9\u30c3\u30d1\u30fc\u3067\u3042\u308bruby-jsonnet\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002  \n\n\u4f7f\u3044\u65b9\n\u6587\u5b57\u5217\u304b\u3089\u8aad\u307f\u8fbc\u307f  \n\njsonnet-sample1.rb\nrequire 'jsonnet'\nvm = Jsonnet::VM.new\nprint vm.evaluate(<<\"EOS\"\nlocal base_id = 1;\n[\n  {\n    id: base_id,\n    name: \"Alice\",\n  },\n  {\n    id: base_id+1,\n    name: \"Bob\",\n  },\n]\nEOS\n)\n\n\n\u6b21\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u306eJSON\u304c\u51fa\u529b\u3055\u308c\u308b  \n[\n   {\n      \"id\": 1,\n      \"name\": \"Alice\"\n   },\n   {\n      \"id\": 2,\n      \"name\": \"Bob\"\n   }\n]\n\n\u540c\u69d8\u306bJsonnet\u306e\u4e2d\u3067\u95a2\u6570\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u3082  \n\njsonnet-sample2.rb\nrequire 'jsonnet'\nvm = Jsonnet::VM.new\nprint vm.evaluate(<<\"EOS\"\nlocal fibonacci(n) = if n <= 1 then 1\n                     else fibonacci(n - 1) + fibonacci(n - 2);\nlocal nodes = [\"Node A\", \"Node B\", \"Node C\"];\n[\n    {\n        id: i,\n        node: nodes[i],\n        backoff: fibonacci(i+1)\n    } for i in std.range(0, std.length(nodes)-1)\n]\nEOS\n)\n\n\n\u6b21\u306e\u3088\u3046\u306aJSON\u304c\u51fa\u529b\u3055\u308c\u308b  \n[\n   {\n      \"backoff\": 1,\n      \"id\": 0,\n      \"node\": \"Node A\"\n   },\n   {\n      \"backoff\": 2,\n      \"id\": 1,\n      \"node\": \"Node B\"\n   },\n   {\n      \"backoff\": 3,\n      \"id\": 2,\n      \"node\": \"Node C\"\n   }\n]\n\nstd.extVar\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u3001\u3042\u3089\u304b\u3058\u3081Jsonnet::VM\u306b\u5024\u3092\u6e21\u3059\n\njsonnet-sample3.rb\nrequire 'jsonnet'\nvm = Jsonnet::VM.new\nvm.ext_var(\"foo\", \"bar\")\nprint vm.evaluate('[std.extVar(\"foo\")]')\n\n\n\u51fa\u529b\n[\n   \"bar\"\n]\n\n\u4ed6\u306f\u5f8c\u3067\u52a0\u7b46\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nruby-jsonnet\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u521d\u6b69\u7684\u3060\u3051\u3069\u307e\u3068\u3081\u3066\u307f\u305f(\u30e9\u30a4\u30d6\u30e9\u30ea\u306eUsage\u304c\u307e\u3060\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u306e\u3067)  \n\u305d\u3082\u305d\u3082Jsonnet\u3068\u306f\u306a\u3093\u305e\u3084\u3068\u3044\u3046\u4eba\u306f\u3053\u3061\u3089\u3092\u3069\u3046\u305e([Jsonnet\u306e\u85a6\u3081] (http://qiita.com/yugui/items/f4a5e0e9dbd8ddffa48e))  \n\u30b5\u30f3\u30d7\u30eb\u306eJsonnet\u3082\u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u305f\u3002  \n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n[ruby-jsonnet](https://github.com/yugui/ruby-jsonnet)\n\u3092\u53c2\u8003\u306b\u3001C++\u5b9f\u88c5\u306e\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u30e9\u30c3\u30d1\u30fc\u3067\u3042\u308bruby-jsonnet\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002  \n\n# \u4f7f\u3044\u65b9\n\u6587\u5b57\u5217\u304b\u3089\u8aad\u307f\u8fbc\u307f  \n\n```ruby:jsonnet-sample1.rb\nrequire 'jsonnet'\nvm = Jsonnet::VM.new\nprint vm.evaluate(<<\"EOS\"\nlocal base_id = 1;\n[\n  {\n    id: base_id,\n    name: \"Alice\",\n  },\n  {\n    id: base_id+1,\n    name: \"Bob\",\n  },\n]\nEOS\n)\n```\n\n\u6b21\u306e\u3088\u3046\u306a\u6587\u5b57\u5217\u306eJSON\u304c\u51fa\u529b\u3055\u308c\u308b  \n\n```JSON\n[\n   {\n      \"id\": 1,\n      \"name\": \"Alice\"\n   },\n   {\n      \"id\": 2,\n      \"name\": \"Bob\"\n   }\n]\n```\n\n\u540c\u69d8\u306bJsonnet\u306e\u4e2d\u3067\u95a2\u6570\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u3082  \n\n```ruby:jsonnet-sample2.rb\nrequire 'jsonnet'\nvm = Jsonnet::VM.new\nprint vm.evaluate(<<\"EOS\"\nlocal fibonacci(n) = if n <= 1 then 1\n                     else fibonacci(n - 1) + fibonacci(n - 2);\nlocal nodes = [\"Node A\", \"Node B\", \"Node C\"];\n[\n    {\n        id: i,\n        node: nodes[i],\n        backoff: fibonacci(i+1)\n    } for i in std.range(0, std.length(nodes)-1)\n]\nEOS\n)\n```\n\n\u6b21\u306e\u3088\u3046\u306aJSON\u304c\u51fa\u529b\u3055\u308c\u308b  \n\n```JSON\n[\n   {\n      \"backoff\": 1,\n      \"id\": 0,\n      \"node\": \"Node A\"\n   },\n   {\n      \"backoff\": 2,\n      \"id\": 1,\n      \"node\": \"Node B\"\n   },\n   {\n      \"backoff\": 3,\n      \"id\": 2,\n      \"node\": \"Node C\"\n   }\n]\n```\n\nstd.extVar\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u3001\u3042\u3089\u304b\u3058\u3081Jsonnet::VM\u306b\u5024\u3092\u6e21\u3059\n\n```ruby:jsonnet-sample3.rb\nrequire 'jsonnet'\nvm = Jsonnet::VM.new\nvm.ext_var(\"foo\", \"bar\")\nprint vm.evaluate('[std.extVar(\"foo\")]')\n```\n\n\u51fa\u529b\n\n```\n[\n   \"bar\"\n]\n```\n\n\u4ed6\u306f\u5f8c\u3067\u52a0\u7b46\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Jsonnet", "JSON", "Config", "Ruby"]}