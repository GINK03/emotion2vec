{"context": "Google Coloud Platform \u306b\u306f\u3001\u8ca0\u8377\u306b\u5fdc\u3058\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u3092\u81ea\u52d5\u7684\u306b\u5897\u3084\u3057\u3066\u304f\u308c\u308b\u6a5f\u69cb\uff08Autoscaling\uff09\u304c\u3042\u308a\u307e\u3059\u3002\nAutoscaling\uff08\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\uff09\u6a5f\u80fd\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nManaged instance groups\uff08\u7ba1\u7406\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3067\u3042\u308b\u3053\u3068\nAutoscaling\u30dd\u30ea\u30b7\u30fc\u3068 target utilization\uff08\u5bfe\u8c61\u4f7f\u7528\u7387\uff09\u304c\u5b9a\u307e\u3063\u3066\u3044\u308b\u3053\u3068\n\n\nManaged instance groups\uff08\u7ba1\u7406\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3067\u3042\u308b\u3053\u3068\nGoogle Compute Engine\uff08\u4ee5\u4e0b GCE\uff09\u3067\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u96c6\u5408\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u3068\u547c\u3070\u308c\u3001\u4f8b\u3048\u3070\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u306b\u7e4b\u3050\u3068\u304d\u306b\u3053\u306e\u5358\u4f4d\u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u306b\u306f 2\u7a2e\u985e\u3042\u3063\u3066\u30011\u3064\u306f Managed instance groups\uff08\u7ba1\u7406\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3001\u3082\u3046 1\u3064\u306f Unmanaged instance groups\uff08\u7ba1\u7406\u3055\u308c\u3066\u3044\u306a\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3067\u3059\u3002\nManaged instance group \u3092\u4f7f\u3046\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u5229\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\n\nManaged instance group \u306e\u5229\u70b9\n\n\nWhen your applications require additional compute resources, managed instance groups can automatically scale the number of instances in the group.\n\n\n\n\u62d9\u8a33\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u30ea\u30bd\u30fc\u30b9\u3092\u5fc5\u8981\u3068\u3059\u308b\u6642\u3001managed instance group \u306f\u81ea\u52d5\u7684\u306b\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6570\u3092\u30b9\u30b1\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n\n\n\n\nManaged instance groups can work with load balancing services to distribute network traffic to all of the instances in the group.\n\n\n\n\u62d9\u8a33\nManaged instance group \u306f\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b7\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u3068\u5354\u50cd\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u5206\u6563\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002\n\n\n\n\nIf an instance in the group stops, crashes, or is deleted by an action other than the instance groups commands, the managed instance group automatically recreates the instance so it can resume its processing tasks. The recreated instance uses the same name and the same instance template as the previous instance, even if the group references a different instance template.\n\n\n\n\u62d9\u8a33\n\u3082\u3057\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30b3\u30de\u30f3\u30c9\u4ee5\u5916\u306b\u3088\u3063\u3066\u505c\u6b62\u3001\u30af\u30e9\u30c3\u30b7\u30e5\u307e\u305f\u306f\u524a\u9664\u3055\u308c\u305f\u3089\u3001managed instance group \u306f\u81ea\u52d5\u7684\u306b\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u518d\u751f\u6210\u3057\u3001\u51e6\u7406\u4e2d\u306e\u30bf\u30b9\u30af\u3092\u518d\u958b\u3057\u307e\u3059\u3002\u518d\u751f\u6210\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u305f\u3068\u3048\u30b0\u30eb\u30fc\u30d7\u304c\u4ed6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u53c2\u7167\u3057\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u3001\u4ee5\u524d\u306e\u3082\u306e\u3068\u540c\u3058\u540d\u524d\u3001\u540c\u3058\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\n\n\nManaged instance groups use an instance template to define the properties for every instance in the group. You can easily update all of the instances in the group by specifying a new template in a rolling update.\n\n\n\n\u62d9\u8a33\nManaged instance group \u306f\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3064\u3044\u3066\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306b\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3044\u307e\u3059\u3002\u30ed\u30fc\u30ea\u30f3\u30b0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\uff08\u7121\u505c\u6b62\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\uff09\u3067\u65b0\u3057\u3044\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u7c21\u5358\u306b\u9069\u7528\u3067\u304d\u307e\u3059\u3002\n\n\n\n\u307e\u3068\u3081\u308b\u3068\u3001\u4e88\u3081\u30dd\u30ea\u30b7\u30fc\uff08\u4f8b\u3048\u3070 CPU\u4f7f\u7528\u7387\uff09\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3051\u3070\u3001\u305d\u308c\u306b\u5fdc\u3058\u3066\u52dd\u624b\u306b\u30b9\u30b1\u30fc\u30eb\u3057\u3066\u304f\u308c\u3066\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u306e\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u4eee\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6b7b\u3093\u3060\u3068\u3057\u305f\u3089\u52dd\u624b\u306b\u540c\u3058\u72b6\u614b\u3067\u751f\u304d\u8fd4\u3089\u305b\u3066\u304f\u308c\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u9006\u306b\u8a00\u3048\u3070\u3001Unmanaged \u3060\u3068\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u6a5f\u80fd\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4ee5\u5f8c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u306f managed instance group \u306e\u307f\u3092\u5bfe\u8c61\u3068\u3057\u307e\u3059\u3002\n\nManaged instance group \u306e\u4f5c\u308a\u65b9\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u65b0\u898f\u4f5c\u6210\uff09\n\u307e\u3060 GCP\u4e0a\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u69cb\u7bc9\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u5148\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30bd\u30fc\u30eb\uff08Web GUI\uff09\u304b\u3089\u4f5c\u308b\u3068\u30de\u30a6\u30b9\u3067\u30dd\u30c1\u30dd\u30c1\u9078\u3093\u3067\u3044\u304f\u3060\u3051\u3067\u4f5c\u308c\u307e\u3059\u3002\n\u30de\u30b7\u30f3\u30bf\u30a4\u30d7\u306f\u3042\u308b\u7a0b\u5ea6\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u304c\u3001\u7d44\u307f\u5408\u308f\u305b\u306b\u3088\u3063\u3066\u306f\u4f5c\u6210\u3067\u304d\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3088\u3046\u3067\u3059\u3002\ngcloud \u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\n\u30ab\u30b9\u30bf\u30e0\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u9069\u5b9c\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nconsole\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u4f7f\u3046\uff09\n$ gcloud compute instance-templates create \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\n\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u30ab\u30b9\u30bf\u30e0\u3059\u308b\uff09\n$ gcloud compute instance-templates create \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d \\\n  --machine-type n1-standard-4 \\\n  --image centos-6 \\\n  --boot-disk-size 20GB\n\n\n\u78ba\u8a8d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nconsole\n$ gcloud compute instance-template describe \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\n\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u65e2\u5b58\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089\u4f5c\u6210\uff09\n\u65e2\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u306e\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u5bfe\u8c61\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u8d77\u52d5\u72b6\u614b\u3060\u3068\u4f5c\u6210\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u305d\u306e\u5f8c\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u6b21\u306b\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u7de8\u96c6\u753b\u9762\u3067\u3001\u300c\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u3068\u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30b9\u30af\u300d\u306e\u3068\u3053\u308d\u306b\u3042\u308b\u300c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\u3059\u308b\u969b\u306b\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u3092\u524a\u9664\u3059\u308b\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057\u307e\u3059\uff08\u6587\u8a00\u306f\u5909\u308f\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\uff09\n\u305d\u306e\u5f8c\u3001\u30af\u30ed\u30fc\u30f3\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u304c\u524a\u9664\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\n\u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30c7\u30a3\u30b9\u30af\u300d\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u65b0\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u5148\u307b\u3069\u306e\u30c7\u30a3\u30b9\u30af\u3092\u9078\u3073\u3001\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\n\u4f5c\u6210\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u524d\u7bc0\u306e\u624b\u9806\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\n\n\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3046\u3053\u3068\u3067\u6bce\u56de\u74b0\u5883\u69cb\u7bc9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u306a\u3044\u3067\u6e08\u307f\u307e\u3059\u3002\n\u305d\u306e\u4ed6\u306e\u6ce8\u610f\u70b9\u3084\u904b\u7528\u306b\u3064\u3044\u3066\u306f \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306e Instance Templates \u306b\u60c5\u5831\u304c\u3042\u308a\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u30a4\u30e1\u30fc\u30b8\u304b\u3089 gcloud \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3067\u3067\u304d\u307e\u3059\u3002\n\nconsole\ngcloud compute instance-templates create instance-template-prd-crp-web-sm \\\n--image image-prd-crp-web \\\n--machine-type n1-highcpu-2 \\\n--metadata startup-script='#! /bin/bash\nsudo service unicorn start'\n\n\n\nManaged instance group \u306e\u4f5c\u6210\n\u3053\u308c\u4ee5\u964d\u306f gcloud\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u65b9\u6cd5\u3057\u304b\u793a\u3057\u307e\u305b\u3093\u304c\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\uff08Web GUI\uff09\u304b\u3089\u3067\u3082\u540c\u69d8\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\u524d\u7bc0\u306e\u624b\u9806\u3067\u4f5c\u6210\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u53d6\u5f97\u3057\u307e\u3059\u3002\n\nconsole\n$ gcloud compute instance-templates list\nNAME        MACHINE_TYPE PREEMPTIBLE CREATION_TIMESTAMP\ntmp-example n1-highcpu-8             2015-12-24T22:00:00.000-08:00\n\n\n\u305d\u306e\u5f8c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7528\u3044\u3066 managed instance group \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nconsole\n$ gcloud compute instance-groups managed create \u30b0\u30eb\u30fc\u30d7\u540d \\\n  --base \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eprefix \\\n  --template \u4f7f\u7528\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 \\\n  --size 2\n\n\nbase \u306f\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e prefix\u3001template \u306f\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u3001size \u306f\u521d\u671f\u72b6\u614b\u3067\u69cb\u7bc9\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6570\u3067\u3059\u3002\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u3001managed group \u304c\u4f5c\u6210\u3055\u308c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u624b\u9806\u3067\u4f5c\u6210\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\u3067\u306e\u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u304c\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070 Rails \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3042\u308c\u3070\u3001nginx\u3001unicorn \u306a\u3069\u304c\u81ea\u52d5\u7684\u306b\u8d77\u52d5\u3059\u308b\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\nAutoscaling\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\n\u6700\u5f8c\u306b\u3001\u30b9\u30b1\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b9\u30b1\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u306f\u500b\u5225\u306e\u9805\u76ee\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001managed instance group \u306e\u8a2d\u5b9a\u9805\u76ee\u306e 1\u3064\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001CPU \u306e\u8ca0\u8377\u3092\u57fa\u6e96\u3068\u3057\u3066\u30b9\u30b1\u30fc\u30eb\u3055\u305b\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002\n\nconsole\n$ gcloud compute instance-groups managed set-autoscaling example-group \\\n  --max-num-replicas 10 \\\n  --target-cpu-utilization 0.75 \\\n  --cool-down-period 60\n\n\ncool-down-period \u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u516c\u5f0f\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nOptionally, you can use the --cool-down-period flag, which tells the autoscaler how many seconds to wait after a new instance has started before it starts to collect usage. After the cool-down period passes, the autoscaler begins to collect usage information from the new instance and determines if the group requires additional instances. This accounts for the amount of time it might take for the instance to initialize, during which the collected usage is not reliable for autoscaling. The default cool-down period is 60 seconds.\n\n\u3064\u307e\u308a\u3001cool-down-period \u3067\u6307\u5b9a\u3055\u308c\u305f\u79d2\u6570\u306f\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306e\u5bfe\u8c61\u306b\u3057\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f 60\u79d2\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u304b\u3089\u308f\u304b\u308b\u3053\u3068\u306f\u3001\u3053\u308c\u3092\u77ed\u304f\u3057\u904e\u304e\u308b\u3068\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u6642\u306e CPU\u8ca0\u8377\u3067\u4e0a\u9650\u307e\u3067\u4e00\u6c17\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u9006\u306b\u9577\u304f\u3057\u904e\u304e\u308b\u3068\u3001\u30c6\u30ec\u30d3\u653e\u9001\u306e\u3088\u3046\u306a\u6025\u6fc0\u306a\u30b9\u30d1\u30a4\u30af\u306b\u5bfe\u5fdc\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u7d42\u308f\u3063\u305f\u3089\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u306b\u4f5c\u6210\u3057\u305f managed instance group \u3092\u6307\u5b9a\u3057\u3066\u5b8c\u4e86\u3067\u3059\u3002\nEnjoy scaling!\n\n\u7d9a\u5831\nGCP \u3067 Autoscaling Groups \u3092\u4f7f\u3046\uff08docker\u5bfe\u5fdc\u7248\uff09 \u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\nReferrenses\n\n\nAutoscaling Groups of Instances\uff08Google\u516c\u5f0f\uff09\n\nCreating Groups of Instances\nMachine Types\nInstance Templates\nScaling Based on CPU or Load Balancing Serving Capacity\nScaling Based on Cloud Monitoring Metrics\n\nGoogle Coloud Platform \u306b\u306f\u3001\u8ca0\u8377\u306b\u5fdc\u3058\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u6570\u3092\u81ea\u52d5\u7684\u306b\u5897\u3084\u3057\u3066\u304f\u308c\u308b\u6a5f\u69cb\uff08Autoscaling\uff09\u304c\u3042\u308a\u307e\u3059\u3002\nAutoscaling\uff08\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\uff09\u6a5f\u80fd\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n- Managed instance groups\uff08\u7ba1\u7406\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3067\u3042\u308b\u3053\u3068\n- Autoscaling\u30dd\u30ea\u30b7\u30fc\u3068 target utilization\uff08\u5bfe\u8c61\u4f7f\u7528\u7387\uff09\u304c\u5b9a\u307e\u3063\u3066\u3044\u308b\u3053\u3068\n\n\nManaged instance groups\uff08\u7ba1\u7406\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3067\u3042\u308b\u3053\u3068\n-----------------------------------------------------------\n\nGoogle Compute Engine\uff08\u4ee5\u4e0b GCE\uff09\u3067\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u96c6\u5408\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u306f\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u3068\u547c\u3070\u308c\u3001\u4f8b\u3048\u3070\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u306b\u7e4b\u3050\u3068\u304d\u306b\u3053\u306e\u5358\u4f4d\u3067\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u306b\u306f 2\u7a2e\u985e\u3042\u3063\u3066\u30011\u3064\u306f Managed instance groups\uff08\u7ba1\u7406\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3001\u3082\u3046 1\u3064\u306f Unmanaged instance groups\uff08\u7ba1\u7406\u3055\u308c\u3066\u3044\u306a\u3044\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\uff09\u3067\u3059\u3002\nManaged instance group \u3092\u4f7f\u3046\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u5229\u70b9\u304c\u3042\u308a\u307e\u3059\u3002\n\n#### Managed instance group \u306e\u5229\u70b9\n\n> - When your applications require additional compute resources, managed instance groups can automatically scale the number of instances in the group.\n\n```markdown:\u62d9\u8a33\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u30ea\u30bd\u30fc\u30b9\u3092\u5fc5\u8981\u3068\u3059\u308b\u6642\u3001managed instance group \u306f\u81ea\u52d5\u7684\u306b\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6570\u3092\u30b9\u30b1\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n```\n\n> - Managed instance groups can work with load balancing services to distribute network traffic to all of the instances in the group.\n\n```markdown:\u62d9\u8a33\nManaged instance group \u306f\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b7\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u3068\u5354\u50cd\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u3001\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u5206\u6563\u3059\u308b\u306e\u306b\u5f79\u7acb\u3061\u307e\u3059\u3002\n```\n\n> - If an instance in the group stops, crashes, or is deleted by an action other than the instance groups commands, the managed instance group automatically recreates the instance so it can resume its processing tasks. The recreated instance uses the same name and the same instance template as the previous instance, even if the group references a different instance template.\n\n```markdown:\u62d9\u8a33\n\u3082\u3057\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30b3\u30de\u30f3\u30c9\u4ee5\u5916\u306b\u3088\u3063\u3066\u505c\u6b62\u3001\u30af\u30e9\u30c3\u30b7\u30e5\u307e\u305f\u306f\u524a\u9664\u3055\u308c\u305f\u3089\u3001managed instance group \u306f\u81ea\u52d5\u7684\u306b\u305d\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u518d\u751f\u6210\u3057\u3001\u51e6\u7406\u4e2d\u306e\u30bf\u30b9\u30af\u3092\u518d\u958b\u3057\u307e\u3059\u3002\u518d\u751f\u6210\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u305f\u3068\u3048\u30b0\u30eb\u30fc\u30d7\u304c\u4ed6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u53c2\u7167\u3057\u3066\u3044\u305f\u3068\u3057\u3066\u3082\u3001\u4ee5\u524d\u306e\u3082\u306e\u3068\u540c\u3058\u540d\u524d\u3001\u540c\u3058\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n```\n\n> - Managed instance groups use an instance template to define the properties for every instance in the group. You can easily update all of the instances in the group by specifying a new template in a rolling update.\n\n```markdown:\u62d9\u8a33\nManaged instance group \u306f\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u3064\u3044\u3066\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u5b9a\u7fa9\u3059\u308b\u305f\u3081\u306b\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3044\u307e\u3059\u3002\u30ed\u30fc\u30ea\u30f3\u30b0\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\uff08\u7121\u505c\u6b62\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\uff09\u3067\u65b0\u3057\u3044\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b0\u30eb\u30fc\u30d7\u4e2d\u306e\u5168\u3066\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u7c21\u5358\u306b\u9069\u7528\u3067\u304d\u307e\u3059\u3002\n```\n\n---\n\n\u307e\u3068\u3081\u308b\u3068\u3001\u4e88\u3081\u30dd\u30ea\u30b7\u30fc\uff08\u4f8b\u3048\u3070 CPU\u4f7f\u7528\u7387\uff09\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u3051\u3070\u3001\u305d\u308c\u306b\u5fdc\u3058\u3066\u52dd\u624b\u306b\u30b9\u30b1\u30fc\u30eb\u3057\u3066\u304f\u308c\u3066\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u306e\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u4eee\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6b7b\u3093\u3060\u3068\u3057\u305f\u3089\u52dd\u624b\u306b\u540c\u3058\u72b6\u614b\u3067\u751f\u304d\u8fd4\u3089\u305b\u3066\u304f\u308c\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u9006\u306b\u8a00\u3048\u3070\u3001Unmanaged \u3060\u3068\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u6a5f\u80fd\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4ee5\u5f8c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u306f managed instance group \u306e\u307f\u3092\u5bfe\u8c61\u3068\u3057\u307e\u3059\u3002\n\n### Managed instance group \u306e\u4f5c\u308a\u65b9\n\n#### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u65b0\u898f\u4f5c\u6210\uff09\n\n\u307e\u3060 GCP\u4e0a\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u69cb\u7bc9\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u5148\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3053\u3068\u3092\u30aa\u30b9\u30b9\u30e1\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30bd\u30fc\u30eb\uff08Web GUI\uff09\u304b\u3089\u4f5c\u308b\u3068\u30de\u30a6\u30b9\u3067\u30dd\u30c1\u30dd\u30c1\u9078\u3093\u3067\u3044\u304f\u3060\u3051\u3067\u4f5c\u308c\u307e\u3059\u3002\n\u30de\u30b7\u30f3\u30bf\u30a4\u30d7\u306f\u3042\u308b\u7a0b\u5ea6\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u304c\u3001\u7d44\u307f\u5408\u308f\u305b\u306b\u3088\u3063\u3066\u306f\u4f5c\u6210\u3067\u304d\u306a\u3044\u3053\u3068\u3082\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\ngcloud \u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\n\u30ab\u30b9\u30bf\u30e0\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u9069\u5b9c\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash:console\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3092\u4f7f\u3046\uff09\n$ gcloud compute instance-templates create \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\n\n# \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u30ab\u30b9\u30bf\u30e0\u3059\u308b\uff09\n$ gcloud compute instance-templates create \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d \\\n  --machine-type n1-standard-4 \\\n  --image centos-6 \\\n  --boot-disk-size 20GB\n```\n\n\u78ba\u8a8d\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```bash:console\n$ gcloud compute instance-template describe \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\n```\n\n#### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\uff08\u65e2\u5b58\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089\u4f5c\u6210\uff09\n\n\u65e2\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u904b\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u305f\u3044\u3068\u3044\u3046\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3001\u305d\u306e\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n1. \u307e\u305a\u3001\u5bfe\u8c61\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u8d77\u52d5\u72b6\u614b\u3060\u3068\u4f5c\u6210\u3067\u304d\u306a\u3044\u305f\u3081\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n2. \u305d\u306e\u5f8c\u3001\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n3. \u6b21\u306b\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u7de8\u96c6\u753b\u9762\u3067\u3001\u300c\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u3068\u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30b9\u30af\u300d\u306e\u3068\u3053\u308d\u306b\u3042\u308b\u300c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\u3059\u308b\u969b\u306b\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u3092\u524a\u9664\u3059\u308b\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057\u307e\u3059\uff08\u6587\u8a00\u306f\u5909\u308f\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3001\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\uff09\n4. \u305d\u306e\u5f8c\u3001\u30af\u30ed\u30fc\u30f3\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u524a\u9664\u3057\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30d6\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u304c\u524a\u9664\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\n5. \u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30c7\u30a3\u30b9\u30af\u300d\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u300c\u65b0\u3057\u3044\u30a4\u30e1\u30fc\u30b8\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u5148\u307b\u3069\u306e\u30c7\u30a3\u30b9\u30af\u3092\u9078\u3073\u3001\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u307e\u3059\n6. \u4f5c\u6210\u3057\u305f\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u524d\u7bc0\u306e\u624b\u9806\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\n\n\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3046\u3053\u3068\u3067\u6bce\u56de\u74b0\u5883\u69cb\u7bc9\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3057\u306a\u3044\u3067\u6e08\u307f\u307e\u3059\u3002\n\n\u305d\u306e\u4ed6\u306e\u6ce8\u610f\u70b9\u3084\u904b\u7528\u306b\u3064\u3044\u3066\u306f <a href='#instance-templates'>\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9</a>\u306e Instance Templates \u306b\u60c5\u5831\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u30a4\u30e1\u30fc\u30b8\u304b\u3089 gcloud \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u3067\u3067\u304d\u307e\u3059\u3002\n\n```bash:console\ngcloud compute instance-templates create instance-template-prd-crp-web-sm \\\n--image image-prd-crp-web \\\n--machine-type n1-highcpu-2 \\\n--metadata startup-script='#! /bin/bash\nsudo service unicorn start'\n```\n\n### Managed instance group \u306e\u4f5c\u6210\n\n\u3053\u308c\u4ee5\u964d\u306f gcloud\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u65b9\u6cd5\u3057\u304b\u793a\u3057\u307e\u305b\u3093\u304c\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\uff08Web GUI\uff09\u304b\u3089\u3067\u3082\u540c\u69d8\u306b\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n\u524d\u7bc0\u306e\u624b\u9806\u3067\u4f5c\u6210\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash:console\n$ gcloud compute instance-templates list\nNAME        MACHINE_TYPE PREEMPTIBLE CREATION_TIMESTAMP\ntmp-example n1-highcpu-8             2015-12-24T22:00:00.000-08:00\n```\n\n\u305d\u306e\u5f8c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7528\u3044\u3066 managed instance group \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash:console\n$ gcloud compute instance-groups managed create \u30b0\u30eb\u30fc\u30d7\u540d \\\n  --base \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eprefix \\\n  --template \u4f7f\u7528\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 \\\n  --size 2\n```\n\nbase \u306f\u81ea\u52d5\u7684\u306b\u4f5c\u6210\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e prefix\u3001template \u306f\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u540d\u524d\u3001size \u306f\u521d\u671f\u72b6\u614b\u3067\u69cb\u7bc9\u3059\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u6570\u3067\u3059\u3002\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u3001managed group \u304c\u4f5c\u6210\u3055\u308c\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u306e\u624b\u9806\u3067\u4f5c\u6210\u3055\u308c\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30ec\u30d9\u30eb\u3067\u306e\u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u304c\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070 Rails \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u3042\u308c\u3070\u3001nginx\u3001unicorn \u306a\u3069\u304c\u81ea\u52d5\u7684\u306b\u8d77\u52d5\u3059\u308b\u8a2d\u5b9a\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\nAutoscaling\u30dd\u30ea\u30b7\u30fc\u306e\u8a2d\u5b9a\n-----------------------\n\n\u6700\u5f8c\u306b\u3001\u30b9\u30b1\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b9\u30b1\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u306f\u500b\u5225\u306e\u9805\u76ee\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001managed instance group \u306e\u8a2d\u5b9a\u9805\u76ee\u306e 1\u3064\u3068\u3057\u3066\u63d0\u4f9b\u3055\u308c\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001CPU \u306e\u8ca0\u8377\u3092\u57fa\u6e96\u3068\u3057\u3066\u30b9\u30b1\u30fc\u30eb\u3055\u305b\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002\n\n```bash:console\n$ gcloud compute instance-groups managed set-autoscaling example-group \\\n  --max-num-replicas 10 \\\n  --target-cpu-utilization 0.75 \\\n  --cool-down-period 60\n```\n\n`cool-down-period` \u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u516c\u5f0f\u306b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n> Optionally, you can use the --cool-down-period flag, which tells the autoscaler how many seconds to wait after a new instance has started before it starts to collect usage. After the cool-down period passes, the autoscaler begins to collect usage information from the new instance and determines if the group requires additional instances. This accounts for the amount of time it might take for the instance to initialize, during which the collected usage is not reliable for autoscaling. The default cool-down period is 60 seconds.\n\n\u3064\u307e\u308a\u3001`cool-down-period` \u3067\u6307\u5b9a\u3055\u308c\u305f\u79d2\u6570\u306f\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u306e\u5bfe\u8c61\u306b\u3057\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f 60\u79d2\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u304b\u3089\u308f\u304b\u308b\u3053\u3068\u306f\u3001\u3053\u308c\u3092\u77ed\u304f\u3057\u904e\u304e\u308b\u3068\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u8d77\u52d5\u6642\u306e CPU\u8ca0\u8377\u3067\u4e0a\u9650\u307e\u3067\u4e00\u6c17\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u9006\u306b\u9577\u304f\u3057\u904e\u304e\u308b\u3068\u3001\u30c6\u30ec\u30d3\u653e\u9001\u306e\u3088\u3046\u306a\u6025\u6fc0\u306a\u30b9\u30d1\u30a4\u30af\u306b\u5bfe\u5fdc\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u3053\u307e\u3067\u7d42\u308f\u3063\u305f\u3089\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u306b\u4f5c\u6210\u3057\u305f managed instance group \u3092\u6307\u5b9a\u3057\u3066\u5b8c\u4e86\u3067\u3059\u3002\n\n\nEnjoy scaling!\n\n## \u7d9a\u5831\n\n[GCP \u3067 Autoscaling Groups \u3092\u4f7f\u3046\uff08docker\u5bfe\u5fdc\u7248\uff09](http://qiita.com/chase0213/items/7c8fbee2814fa51f7296) \u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\nReferrenses\n------------\n\n<ol>\n<li id=\"autoscaling-groups-of-instances\"><a href='https://cloud.google.com/compute/docs/autoscaler/'>Autoscaling Groups of Instances\uff08Google\u516c\u5f0f\uff09<a/></li>\n<li id=\"creating-groups-of-instanses\"><a href=\"https://cloud.google.com/compute/docs/instance-groups/\">Creating Groups of Instances</a></li>\n<li id='machine-types'><a href=\"https://cloud.google.com/compute/docs/machine-types?hl=ja&_ga=1.86435800.1148060235.1450440566\">Machine Types</a></li>\n<li id=\"instance-templates\"><a href='https://cloud.google.com/compute/docs/instance-templates'>Instance Templates</a></li>\n<li id='scaling-based-on-cpu-or-load-balancing-serving'><a href='https://cloud.google.com/compute/docs/autoscaler/scaling-cpu-load-balancing'>Scaling Based on CPU or Load Balancing Serving Capacity</a></li>\n<li id='scaling-based-on-cloud-monitoring-metrics'><a href='https://cloud.google.com/compute/docs/autoscaler/scaling-cloud-monitoring-metrics'>Scaling Based on Cloud Monitoring Metrics</a></li>\n</ol>\n", "tags": ["gcp", "AutoScaling", "\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30eb", "\u8ca0\u8377\u5206\u6563"]}