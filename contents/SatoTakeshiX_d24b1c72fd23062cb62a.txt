{"context": " More than 1 year has passed since last update.Twilio\u3067\u96fb\u8a71\u3092\u3057\u305f\u3089\u305d\u306e\u96fb\u8a71\u3078SMS\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306fHeroku\u3067\u4f5c\u308d\u3046\u3002\u8a00\u8a9e\u306fruby\u3067\u3059\u3002\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306fsinatra\u3067\u3002(Ruby on Rails\u304c\u307e\u3060\u899a\u3048\u3089\u308c\u3066\u306a\u3044\u3002\u3002\uff09\n\n\u5b9f\u884c\u74b0\u5883\n\nruby 2.1.3p242 \nOSX Yosemite 10.10.5\nsinatra 1.4.6\n\n\n\u76ee\u6b21\n\nHeroku\u3067\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\nTwilio\u3067\u96fb\u8a71\u756a\u53f7\u3092\u8cfc\u5165&\u8a2d\u5b9a\n2\u306e\u96fb\u8a71\u756a\u53f7\u306b\u96fb\u8a71\u3057\u3066SMS\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u304f\u308b\u306e\u3092\u78ba\u8a8d\n\n\nHeroku\u3067\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\n\n\u521d\u671f\u8a2d\u5b9a\n\u3069\u3053\u3067\u3082\u3044\u3044\u306e\u3067\u3001\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066git,Gemfile\u3092\u4f5c\u308a\u307e\u3059\n# \u30d5\u30a9\u30eb\u30c0\u4f5c\u6210\uff06\u79fb\u52d5\nmkdir sample-app && cd sample-app\n\n# Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3059\u308b\ngit init\n\n# Gemfile \u306e\u751f\u6210\nbundle init\n\n\n\nGem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nvim Gemfile\n\nGemfile\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n# A sample Gemfile\nsource \"https://rubygems.org\"\n\n# gem \"rails\"\ngem 'sinatra'\ngem 'sinatra-contrib', '~> 1.4.2'\n\n# twilio\ngem 'twilio-ruby', '~> 3.12'\n\n# Unicorn\ngem 'unicorn'\ngem 'faraday'\n\ngroup :development, :test do\n  # Foreman\n  gem 'foreman'\n\nend\n\ngroup :production do\n\nend\n\n\nGemfile\u304c\u7d42\u308f\u3063\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nbundle install --path vendor/bundle --without production\n\n\n\n\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\n\u4eca\u56de\u306fsinatra\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u672c\u4f53\u3068\u306a\u308bmain.rb\u3092\u4f5c\u308a\u307e\u3059\u3002\nvim main.rb\n\n\nmain.rb\u3067\u3068\u308a\u3042\u3048\u305a\u3001\u52d5\u304fHeroku\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nmain.rb\nrequire 'sinatra'\nrequire 'sinatra/base'\n\nclass MainApp < Sinatra::Base\n  get '/' do\n    'Hello, World!'\n  end\nend\n\n\n\nMainApp\u3068\u3044\u3046\u30af\u30e9\u30b9\u306bget\u3067Hello,world\u3092\u51fa\u3059\u3060\u3051\u3067\u3059\u3002\n\u6b21\u306bHeroku\u306e\u5b9f\u884c\u74b0\u5883\u306b\u5fc5\u8981\u306aconfig.ru \u3068 unicorn.rb \u3068 Procfile\u3092\u4f5c\u308a\u307e\u3059\u3002\nconfig.ru\u3092\u4f5c\u308a\u307e\u3059\u3002\nvim config.ru\n\n\nconfig.ru\nrequire './main.rb'\nrun MainApp.new\n\n\nunicorn.rb\u3092\u4f5c\u308a\u307e\u3059\u3002\nmkdir config && vim config/unicorn.rb\n\n\nconfig/unicorn.rb\nworker_processes Integer(ENV[\"WEB_CONCURRENCY\"] || 3)\ntimeout 15\npreload_app true\n\nbefore_fork do |server, worker|\n  Signal.trap 'TERM' do\n    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'\n    Process.kill 'QUIT', Process.pid\n  end\n\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.connection.disconnect!\nend\n\nafter_fork do |server, worker|\n  Signal.trap 'TERM' do\n    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'\n  end\n\n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.establish_connection\nend\n\n\n\nProcfile\u3092\u4f5c\u308a\u307e\u3059\u3002\nvim Procfile\n\nweb: bundle exec unicorn -p $PORT -c ./config/unicorn.rb\n\n\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002Gemfile\u306bForeman\u3092\u5165\u308c\u3066\u3044\u308b\u306e\u3067\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\nforeman start\n\nhttp://0.0.0.0:5000\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066Hello, World!\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3089\u3068\u308a\u3042\u3048\u305a\u6210\u529f\u3067\u3059\u3002\n\nHeroku\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\nHeroku\u306e\u30a2\u30d7\u30ea\u3082\u4f5c\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\nheroku create TWILIO_APP_NAME\ngit add .\ngit commit -m 'first commit.'\ngit push heroku master\n\n\n\u3046\u307e\u304f\u6210\u529f\u3059\u308c\u3070\u3001http://TWILIO_APP_NAME.herokuapp.com\u3067\u3082Hello, World!\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\nTwilio\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\n\u3053\u3053\u307e\u3067\u306f\u3001\u6e96\u5099\u6bb5\u968e\u3002\u3044\u3088\u3044\u3088\u3001\u96fb\u8a71\u3092\u3057\u305f\u3089SMS\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u3089\u308c\u308bTwilio\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\nmain.rb\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\nmain.rb\nrequire 'sinatra'\nrequire 'sinatra/base'\nrequire 'twilio-ruby'\nrequire 'rubygems'\nrequire 'net/http'\nrequire 'uri'\nrequire 'faraday'\n\nclass MainApp < Sinatra::Base\n\n    before do\n        @rootPath = 'https://TWILIO_APP_NAME.herokuapp.com'\n\n    end\n\nend\n\n\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u3092require\u3067\u6307\u5b9a\u3057\u3066\u3001 before\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570@rootPath\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002Heroku\u306e\u30d1\u30b9\u3092\u4ed6\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u96fb\u8a71\u7740\u4fe1\u306e\u51e6\u7406\n\nmain.rb\n    post '/call' do\n        content_type \"text/xml\"\n\n        #\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\n        fromNumber = params[:From]\n        Twilio::TwiML::Response.new do |r|\n            r.Say \"Twilio\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u3053\u306e\u5f8c\u5f37\u5236\u7684\u306b\u3042\u306a\u305f\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308a\u307e\u3059\u3002\u3054\u3081\u3093\u306d\", language: 'ja-JP', voice: 'alice', loop: '3'\n            r.Pause\n            r.Redirect \"#{@rootPath}/postsms/#{fromNumber}\" , method: 'post'\n        end.text\n   end\n\n\n\n\u8ab0\u304b\u304b\u3089Twilio\u306e\u96fb\u8a71\u756a\u53f7\u3078\u96fb\u8a71\u304c\u304b\u304b\u3063\u3066\u304d\u305f\u6642\u306eTwilio\u306e\u5fdc\u7b54\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\npost '/call' do\u3067https://TWILIO_APP_NAME.herokuapp.com/call\u306bpost\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u6765\u305f\u6642\u306b\u5fdc\u7b54\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3053\u308c\u306f\u3042\u3068\u3067\u3001Twilio\u306e\u96fb\u8a71\u756a\u53f7\u306b\u3082\u6307\u5b9a\u3059\u308b\u306e\u3067\u899a\u3048\u3066\u304a\u304d\u307e\u3059\u3002\ncontent_type \"text/xml\"\n\u30c7\u30d0\u30c3\u30af\u304c\u3057\u3084\u3059\u3044\u3088\u3046\u306bcontent_type\u3092xml\u306b\u3057\u307e\u3059\u3002\n        #\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\n        fromNumber = params[:From]\n\n\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067From\u306e\u4e2d\u306b\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u4ed6\u306b\u53d6\u5f97\u3067\u304d\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nTwiMLTM\u30e1\u30c3\u30bb\u30fc\u30b8 : Twilio\u306e\u30ea\u30af\u30a8\u30b9\u30c8\n\u3055\u3066\u3001Twilio\u306e\u81ea\u52d5\u97f3\u58f0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n        Twilio::TwiML::Response.new do |r|\n            r.Say \"Twilio\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u3053\u306e\u5f8c\u5f37\u5236\u7684\u306b\u3042\u306a\u305f\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308a\u307e\u3059\u3002\u3054\u3081\u3093\u306d\", language: 'ja-JP', voice: 'alice', loop: '3'\n            r.Pause\n            r.Redirect \"#{@rootPath}/postsms/#{fromNumber}\" , method: 'post'\n        end.text\n\n\nr.Say\u3067Twilio\u306e\u81ea\u52d5\u97f3\u58f0\u3055\u305b\u308b\u6587\u7ae0\u3084\u3001\u8a00\u8a9e\u3001\u58f0\u306e\u7a2e\u985e\u3001\u30eb\u30fc\u30d7\u56de\u6570\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nr.Pause\u3067\u3061\u3087\u3063\u3068\u5f85\u6a5f\u3055\u305b\u3066\u3001r.Redirect\u3067SMS\u3092\u51e6\u7406\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u308b\u51e6\u7406\u3078\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n(/call\u306e\u3053\u306e\u90e8\u5206\u3067\u3001SMS\u3092\u30dd\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u305f\u3093\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3068\u96fb\u8a71\u4e2d\u306bSMS\u304c\u9001\u3089\u308c\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3001r.Redirect\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u305b\u3066\u3001\u307b\u304b\u306eURL\u3067SMS\u306e\u30dd\u30b9\u30c8\u3092\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002)\n\n\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u308b\n\nmain.rb\n   post '/postsms/:fromNumber' do\n        content_type \"text/xml\"\n        #\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\n        fromNumber = params[:fromNumber]\n\n        Twilio::TwiML::Response.new do |r|\n                conn = Faraday.new(:url =>  @rootPath) do |faraday|\n                    faraday.request  :url_encoded             # form-encode POST params\n                    faraday.response :logger                  # log requests to STDOUT\n                    faraday.adapter  Faraday.default_adapter  # make requests with Net::HTTP\n                end\n                conn.post \"/sendsms/#{fromNumber}\"\n\n            #hangup\u3067\u7d42\u4e86\u3055\u305b\u306a\u3044\u3068\u3060\u3081\n            r.Hangup\n        end.text\n\n   end\n\n\n\nSMS\u306e\u51e6\u7406\u3067\u3059\u3002\u3053\u306e\u51e6\u7406\u306b\u6765\u305f\u6642\u70b9\u3067\u306f\u307e\u3060Twilio\u3068\u306e\u96fb\u8a71\u306f\u7d99\u7d9a\u3057\u3066\u3044\u307e\u3059\u3002SMS\u3078\u306epost\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u3063\u3066\u304b\u3089\u3001\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u307e\u3059\u3002\nTwilio\u306e\u51e6\u7406\u3068\u3057\u3066\u306f\u3001r.Hangup\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n        Twilio::TwiML::Response.new do |r|\n            #hangup\u3067\u7d42\u4e86\u3055\u305b\u306a\u3044\u3068\u3060\u3081\n            r.Hangup\n        end.text\n\n\n\n\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u308b\u524d\u306b\u3001ruby\u306eHTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea Faraday \u3067post\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u307e\u3059\u3002\nFaraday\u306e\u8a73\u3057\u3044\u8aac\u660e\u306f\u3053\u3061\u3089\n\nmain.rb\n                conn = Faraday.new(:url =>  @rootPath) do |faraday|\n                    faraday.request  :url_encoded             # form-encode POST params\n                    faraday.response :logger                  # log requests to STDOUT\n                    faraday.adapter  Faraday.default_adapter  # make requests with Net::HTTP\n                end\n                conn.post \"/sendsms/#{fromNumber}\"\n\n\n\n\nSMS\u9001\u4fe1\nSMS\u3092\u9001\u4fe1\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\n\nmain.rb\n\n    post '/sendsms/:postPhoneNumber' do\n        content_type \"text/xml\"\n\n        postPhoneNumber = params[:postPhoneNumber]\n\n        if postPhoneNumber != nil\n            #\u5148\u982d\u306e0\u3092\u56fd\u969b\u756a\u53f7+81\u306b\u5165\u308c\u66ff\u3048\u308b\n            postPhoneNumber = postPhoneNumber.gsub(/\\A0/, \"+81\")\n\n            #\u30a2\u30ab\u30a6\u30f3\u30c8\n            account_sid = \"ACxxxxxxxxxxxxxxxxxxxxxx\"\n            auth_token = \"yyyyyyyyyyyyyyyyyyyyyy\"\n\n            client = Twilio::REST::Client.new account_sid, auth_token\n\n            # Your Twilio number\n            from = \"+1xxxxxxxxxx\" \n\n            client.account.messages.create(\n            :from => from,\n            :to => postPhoneNumber,\n            :body => \"sms\u30e1\u30c3\u30bb\u30fc\u30b8\u3092twilio\u3067\u9001\u308a\u307e\u3057\u305f\u30fb\u03c9\u30fb\"\n            )\n\n        end\n\n   end\n\n\n\nSMS\u9001\u4fe1\u3059\u308b\u51e6\u7406\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\nmain.rb\n            #\u30a2\u30ab\u30a6\u30f3\u30c8\n            account_sid = \"ACxxxxxxxxxxxxxxxxxxxxxx\"\n            auth_token = \"yyyyyyyyyyyyyyyyyyyyyy\"\n\n            client = Twilio::REST::Client.new account_sid, auth_token\n\n            # Your Twilio number\n            from = \"+1xxxxxxxxxx\" \n\n            client.account.messages.create(\n            :from => from,\n            :to => postPhoneNumber,\n            :body => \"sms\u30e1\u30c3\u30bb\u30fc\u30b8\u3092twilio\u3067\u9001\u308a\u307e\u3057\u305f\u30fb\u03c9\u30fb\"\n            )\n\n\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306eaccount_sid\u3068auth_token\u306f\u81ea\u5206\u306eTwilio\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u3053\u306bTwilio\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\n\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30ebVOICE > \u306f\u3058\u3081\u3088\u3046 >  API\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u8868\u793a\u3059\u308b\n\u3067\u78ba\u8a8d\u304c\u3067\u304d\u307e\u3059\u3002\n\n\nmain.rb\n# Your Twilio number\nfrom = \"+1xxxxxxxxxx\" \n\n\n\u3053\u3053\u306f\u3042\u3068\u3067\u96fb\u8a71\u756a\u53f7\u3092\u8cb7\u3046\u306e\u3067\u305d\u306e\u756a\u53f7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\u3053\u3053\u307e\u3067\u4f5c\u3063\u305f\u3089Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3057\u3087\u3046\ngit add .\ngit commit -m 'twilio sms app commit.'\ngit push heroku master\n\n\n\nTwilio\u3067\u96fb\u8a71\u756a\u53f7\u3092\u8cfc\u5165&\u8a2d\u5b9a\nTwilio\u3067\u96fb\u8a71\u3092\u8cb7\u3044\u307e\u3059\u3002\nSMS\u9001\u4fe1\u3067\u304d\u308b\u96fb\u8a71\u756a\u53f7\u306f\u30a2\u30e1\u30ea\u30ab\u306e\u756a\u53f7\u3067\u3059\u3002\n\u306a\u306e\u3067\u30a2\u30e1\u30ea\u30ab\u306e\u756a\u53f7\u3092\u8cb7\u3044\u307e\u3057\u3087\u3046\nTwilio\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30ebVOICE\u3000> \u96fb\u8a71\u756a\u53f7 \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\nhttps://jp.twilio.com/user/account/voice/phone-numbers\nBuy a Number\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002\n\u56fd\u3092\u30a2\u30e1\u30ea\u30ab\u306b\u6307\u5b9a\u3057\u3066\u691c\u7d22\n\n\u597d\u304d\u306a\u96fb\u8a71\u756a\u53f7\u3092\u9078\u3093\u3067\u8cfc\u5165\u3057\u307e\u3059\u3002\n\n\u8cfc\u5165\u304c\u7d42\u308f\u3063\u305f\u3089\n\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30ebVOICE\u3000> \u96fb\u8a71\u756a\u53f7 \u306b\u623b\u308a\u3001\u96fb\u8a71\u756a\u53f7\u306b\u7d10\u3065\u304fURL\u3092\u767b\u9332\u3057\u307e\u3059\u3002Heroku\u30a2\u30d7\u30ea\u306eURL\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u30a2\u30af\u30bb\u30b9\u304c/call\u306b\u30a2\u30d7\u30ea\u3067\u4f5c\u3063\u3066\u3044\u308b\u306e\u3067\nhttp://TWILIO_APP_NAME.herokuapp.com/call\u306eURL\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nmain.rb\u306e\u96fb\u8a71\u756a\u53f7\u3092\u8cb7\u3063\u305f\u96fb\u8a71\u756a\u53f7\u306b\u66f4\u65b0\u3057\u307e\u3057\u3087\u3046\n\nmain.rb\n# Your Twilio number\nfrom = \"+1xxxxxxxxxx\" \n\n\n\u305d\u3057\u3066Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\ngit add .\ngit commit -m 'add phone number.'\ngit push heroku master\n\n\n\n2\u306e\u96fb\u8a71\u756a\u53f7\u306b\u96fb\u8a71\u3057\u3066SMS\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u304f\u308b\u306e\u3092\u78ba\u8a8d\n\u3053\u3053\u307e\u3067\u304f\u308c\u3070\u8cfc\u5165\u3057\u305f\u96fb\u8a71\u756a\u53f7\u306b\u96fb\u8a71\u3092\u3059\u308c\u3070SMS\u304c\u6765\u308b\u306f\u305a\u3067\u3059\u3002\n\u304c\u3001\u56fd\u969b\u96fb\u8a71\u306b\u306a\u308b\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u6238\u60d1\u3044\u307e\u3057\u305f\u3002\u3002\n\u79c1\u306e\u30ad\u30e3\u30ea\u30a2\u304cSoftbank\u306eiPhone\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u56fd\u969b\u96fb\u8a71\u306b\u306f\n010 > \u56fd\u756a\u53f7 > \u76f8\u624b\u5148\u96fb\u8a71\u756a\u53f7\n\u307e\u305f\u306f\n+ > \u56fd\u756a\u53f7 > \u76f8\u624b\u5148\u96fb\u8a71\u756a\u53f7\n\u3092\u3057\u306a\u3044\u3068\u96fb\u8a71\u304c\u304b\u3051\u3089\u308c\u306a\u3044\u307f\u305f\u3044\u3067\u3059\u3002\nhttp://www.softbank.jp/mobile/service/global/outgoing/call/support/setting-method/iphone/\n\u30a2\u30e1\u30ea\u30ab\u306e\u56fd\u756a\u53f7\u306f1\u3067\u3059\u3002\n\u306a\u306e\u3067\u4eee\u306bTwilio\u3067+1 123-456-7890\u3068\u3044\u3046\u96fb\u8a71\u756a\u53f7\u3092\u8cfc\u5165\u3057\u305f\u306e\u306a\u3089\n\u30ad\u30fc\u30d1\u30c3\u30c9\u3067010 1 1234567890\u3068\u5165\u529b\u3059\u308c\u3070\u96fb\u8a71\u304c\u304b\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u4e0a\u624b\u304f\u884c\u3051\u3070\u96fb\u8a71\u304c\u7d42\u308f\u3063\u305f\u3042\u3068\u306bSMS\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6765\u308b\u306f\u305a\u3067\u3059\uff01\n\n\n\u6700\u5f8c\u306b\nTwilio\u3067Heroku\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u96fb\u8a71\u8cfc\u5165\u307e\u3067\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\u56fd\u969b\u96fb\u8a71\u306e\u304b\u3051\u304b\u305f\u3068\u304b\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u306f\u306a\u3044\u3068\u3053\u308d\u3067\u3064\u307e\u3065\u3044\u305f\u306e\u3067\u3001\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\n\u53c2\u8003\n\nhttp://dev.classmethod.jp/server-side/ruby-on-rails/sinatra-postgresql-unicorn-on-heroku/\nhttps://gist.github.com/mitukiii/2775321\nhttp://qiita.com/srockstyle/items/111d25f44ef2cc51d9ac\nhttp://dev.classmethod.jp/server-side/twilio/twilio-sms/\nhttps://jp.twilio.com/docs/quickstart/ruby/sms/sending-via-rest\n\n\n\nTwilio\u3067\u96fb\u8a71\u3092\u3057\u305f\u3089\u305d\u306e\u96fb\u8a71\u3078SMS\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306fHeroku\u3067\u4f5c\u308d\u3046\u3002\u8a00\u8a9e\u306fruby\u3067\u3059\u3002\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306fsinatra\u3067\u3002(Ruby on Rails\u304c\u307e\u3060\u899a\u3048\u3089\u308c\u3066\u306a\u3044\u3002\u3002\uff09\n\n# \u5b9f\u884c\u74b0\u5883\n* ruby 2.1.3p242 \n* OSX Yosemite 10.10.5\n* sinatra 1.4.6\n\n\n# \u76ee\u6b21\n1. Heroku\u3067\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\n2. Twilio\u3067\u96fb\u8a71\u756a\u53f7\u3092\u8cfc\u5165&\u8a2d\u5b9a\n3. 2\u306e\u96fb\u8a71\u756a\u53f7\u306b\u96fb\u8a71\u3057\u3066SMS\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u304f\u308b\u306e\u3092\u78ba\u8a8d\n\n## Heroku\u3067\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\n### \u521d\u671f\u8a2d\u5b9a\n\u3069\u3053\u3067\u3082\u3044\u3044\u306e\u3067\u3001\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u3063\u3066git,Gemfile\u3092\u4f5c\u308a\u307e\u3059\n\n```bash\n# \u30d5\u30a9\u30eb\u30c0\u4f5c\u6210\uff06\u79fb\u52d5\nmkdir sample-app && cd sample-app\n \n# Git\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3059\u308b\ngit init\n\n# Gemfile \u306e\u751f\u6210\nbundle init\n\n```\n\n### Gem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nvim Gemfile\n```\n\nGemfile\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n```vim\n# A sample Gemfile\nsource \"https://rubygems.org\"\n\n# gem \"rails\"\ngem 'sinatra'\ngem 'sinatra-contrib', '~> 1.4.2'\n\n# twilio\ngem 'twilio-ruby', '~> 3.12'\n\n# Unicorn\ngem 'unicorn'\ngem 'faraday'\n\ngroup :development, :test do\n  # Foreman\n  gem 'foreman'\n\nend\n\ngroup :production do\n\nend\n\n```\n\nGemfile\u304c\u7d42\u308f\u3063\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\nbundle install --path vendor/bundle --without production\n\n```\n\n###\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\n\u4eca\u56de\u306fsinatra\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u672c\u4f53\u3068\u306a\u308b```main.rb```\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```bash\nvim main.rb\n\n```\n\n**main.rb**\u3067\u3068\u308a\u3042\u3048\u305a\u3001\u52d5\u304fHeroku\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```ruby:main.rb\nrequire 'sinatra'\nrequire 'sinatra/base'\n \nclass MainApp < Sinatra::Base\n  get '/' do\n    'Hello, World!'\n  end\nend\n\n```\n\n`MainApp`\u3068\u3044\u3046\u30af\u30e9\u30b9\u306bget\u3067Hello,world\u3092\u51fa\u3059\u3060\u3051\u3067\u3059\u3002\n\u6b21\u306bHeroku\u306e\u5b9f\u884c\u74b0\u5883\u306b\u5fc5\u8981\u306aconfig.ru \u3068 unicorn.rb \u3068 Procfile\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nconfig.ru\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```bash\nvim config.ru\n```\n\n```ru:config.ru\nrequire './main.rb'\nrun MainApp.new\n```\n\nunicorn.rb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```bash\nmkdir config && vim config/unicorn.rb\n```\n\n```ruby:config/unicorn.rb\nworker_processes Integer(ENV[\"WEB_CONCURRENCY\"] || 3)\ntimeout 15\npreload_app true\n \nbefore_fork do |server, worker|\n  Signal.trap 'TERM' do\n    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'\n    Process.kill 'QUIT', Process.pid\n  end\n \n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.connection.disconnect!\nend\n \nafter_fork do |server, worker|\n  Signal.trap 'TERM' do\n    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'\n  end\n \n  defined?(ActiveRecord::Base) and\n    ActiveRecord::Base.establish_connection\nend\n\n```\n\nProcfile\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```bash\nvim Procfile\n```\n\n```Procfile\nweb: bundle exec unicorn -p $PORT -c ./config/unicorn.rb\n```\n\n\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002Gemfile\u306bForeman\u3092\u5165\u308c\u3066\u3044\u308b\u306e\u3067\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\n\n```bash\nforeman start\n```\n\n`http://0.0.0.0:5000`\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066`Hello, World!`\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u305f\u3089\u3068\u308a\u3042\u3048\u305a\u6210\u529f\u3067\u3059\u3002\n\n### Heroku\u30a2\u30d7\u30ea\u306e\u4f5c\u6210\nHeroku\u306e\u30a2\u30d7\u30ea\u3082\u4f5c\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u3087\u3046\n\n```bash\nheroku create TWILIO_APP_NAME\ngit add .\ngit commit -m 'first commit.'\ngit push heroku master\n\n```\n\n\u3046\u307e\u304f\u6210\u529f\u3059\u308c\u3070\u3001`http://TWILIO_APP_NAME.herokuapp.com`\u3067\u3082`Hello, World!`\u304c\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n### Twilio\u30a2\u30d7\u30ea\u3092\u4f5c\u308b\n\u3053\u3053\u307e\u3067\u306f\u3001\u6e96\u5099\u6bb5\u968e\u3002\u3044\u3088\u3044\u3088\u3001\u96fb\u8a71\u3092\u3057\u305f\u3089SMS\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u9001\u3089\u308c\u308bTwilio\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n`main.rb`\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n\n```ruby:main.rb\nrequire 'sinatra'\nrequire 'sinatra/base'\nrequire 'twilio-ruby'\nrequire 'rubygems'\nrequire 'net/http'\nrequire 'uri'\nrequire 'faraday'\n\nclass MainApp < Sinatra::Base\n\n    before do\n\t\t@rootPath = 'https://TWILIO_APP_NAME.herokuapp.com'\n\n    end\n    \nend\n```\n\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u30fc\u3092require\u3067\u6307\u5b9a\u3057\u3066\u3001 before\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570`@rootPath`\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002Heroku\u306e\u30d1\u30b9\u3092\u4ed6\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n###\u96fb\u8a71\u7740\u4fe1\u306e\u51e6\u7406\n```ruby:main.rb\n\tpost '/call' do\n\t\tcontent_type \"text/xml\"\n\n\t\t#\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\n        fromNumber = params[:From]\n\t\tTwilio::TwiML::Response.new do |r|\n\t\t\tr.Say \"Twilio\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u3053\u306e\u5f8c\u5f37\u5236\u7684\u306b\u3042\u306a\u305f\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308a\u307e\u3059\u3002\u3054\u3081\u3093\u306d\", language: 'ja-JP', voice: 'alice', loop: '3'\n\t\t\tr.Pause\n\t\t\tr.Redirect \"#{@rootPath}/postsms/#{fromNumber}\" , method: 'post'\n\t\tend.text\n   end\n\n```\n\n\u8ab0\u304b\u304b\u3089Twilio\u306e\u96fb\u8a71\u756a\u53f7\u3078\u96fb\u8a71\u304c\u304b\u304b\u3063\u3066\u304d\u305f\u6642\u306eTwilio\u306e\u5fdc\u7b54\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n`post '/call' do`\u3067https://TWILIO_APP_NAME.herokuapp.com/call\u306bpost\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u6765\u305f\u6642\u306b\u5fdc\u7b54\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3053\u308c\u306f\u3042\u3068\u3067\u3001Twilio\u306e\u96fb\u8a71\u756a\u53f7\u306b\u3082\u6307\u5b9a\u3059\u308b\u306e\u3067\u899a\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\n`content_type \"text/xml\"`\n\u30c7\u30d0\u30c3\u30af\u304c\u3057\u3084\u3059\u3044\u3088\u3046\u306bcontent_type\u3092xml\u306b\u3057\u307e\u3059\u3002\n\n```ruby\n\t\t#\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\n        fromNumber = params[:From]\n```\n\n\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\u306f\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3067`From`\u306e\u4e2d\u306b\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u4ed6\u306b\u53d6\u5f97\u3067\u304d\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306f\u4ee5\u4e0b\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n[TwiMLTM\u30e1\u30c3\u30bb\u30fc\u30b8 : Twilio\u306e\u30ea\u30af\u30a8\u30b9\u30c8](https://jp.twilio.com/docs/api/twiml/sms/twilio_request)\n\n\u3055\u3066\u3001Twilio\u306e\u81ea\u52d5\u97f3\u58f0\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```ruby\n\t\tTwilio::TwiML::Response.new do |r|\n\t\t\tr.Say \"Twilio\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u3053\u306e\u5f8c\u5f37\u5236\u7684\u306b\u3042\u306a\u305f\u306e\u30a8\u30b9\u30a8\u30e0\u30a8\u30b9\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308a\u307e\u3059\u3002\u3054\u3081\u3093\u306d\", language: 'ja-JP', voice: 'alice', loop: '3'\n\t\t\tr.Pause\n\t\t\tr.Redirect \"#{@rootPath}/postsms/#{fromNumber}\" , method: 'post'\n\t\tend.text\n\n```\n\n`r.Say`\u3067Twilio\u306e\u81ea\u52d5\u97f3\u58f0\u3055\u305b\u308b\u6587\u7ae0\u3084\u3001\u8a00\u8a9e\u3001\u58f0\u306e\u7a2e\u985e\u3001\u30eb\u30fc\u30d7\u56de\u6570\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n`r.Pause`\u3067\u3061\u3087\u3063\u3068\u5f85\u6a5f\u3055\u305b\u3066\u3001`r.Redirect`\u3067SMS\u3092\u51e6\u7406\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u308b\u51e6\u7406\u3078\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n\n(/call\u306e\u3053\u306e\u90e8\u5206\u3067\u3001SMS\u3092\u30dd\u30b9\u30c8\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u305f\u3093\u3067\u3059\u304c\u3001\u305d\u308c\u3060\u3068\u96fb\u8a71\u4e2d\u306bSMS\u304c\u9001\u3089\u308c\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u306a\u306e\u3067\u3001r.Redirect\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u305b\u3066\u3001\u307b\u304b\u306eURL\u3067SMS\u306e\u30dd\u30b9\u30c8\u3092\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002)\n\n\n###\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u308b\n\n```ruby:main.rb\n   post '/postsms/:fromNumber' do\n\t\tcontent_type \"text/xml\"\n\t\t#\u304b\u304b\u3063\u3066\u304d\u305f\u96fb\u8a71\u756a\u53f7\n        fromNumber = params[:fromNumber]\n\n\t\tTwilio::TwiML::Response.new do |r|\n\t\t\t\tconn = Faraday.new(:url =>  @rootPath) do |faraday|\n\t\t\t\t\tfaraday.request  :url_encoded             # form-encode POST params\n\t\t\t\t\tfaraday.response :logger                  # log requests to STDOUT\n\t\t\t\t\tfaraday.adapter  Faraday.default_adapter  # make requests with Net::HTTP\n\t\t\t\tend\n\t\t\t\tconn.post \"/sendsms/#{fromNumber}\"\n\n\t\t\t#hangup\u3067\u7d42\u4e86\u3055\u305b\u306a\u3044\u3068\u3060\u3081\n\t\t\tr.Hangup\n\t\tend.text\n\n   end\n\n```\nSMS\u306e\u51e6\u7406\u3067\u3059\u3002\u3053\u306e\u51e6\u7406\u306b\u6765\u305f\u6642\u70b9\u3067\u306f\u307e\u3060Twilio\u3068\u306e\u96fb\u8a71\u306f\u7d99\u7d9a\u3057\u3066\u3044\u307e\u3059\u3002SMS\u3078\u306epost\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u3063\u3066\u304b\u3089\u3001\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u307e\u3059\u3002\nTwilio\u306e\u51e6\u7406\u3068\u3057\u3066\u306f\u3001`r.Hangup`\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\n\n```\n\t\tTwilio::TwiML::Response.new do |r|\n\t\t\t#hangup\u3067\u7d42\u4e86\u3055\u305b\u306a\u3044\u3068\u3060\u3081\n\t\t\tr.Hangup\n\t\tend.text\n\t\t\n\t\t\n```\n\n\u96fb\u8a71\u3092\u7d42\u4e86\u3055\u305b\u308b\u524d\u306b\u3001ruby\u306eHTTP \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea Faraday \u3067post\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6295\u3052\u307e\u3059\u3002\n\nFaraday\u306e\u8a73\u3057\u3044\u8aac\u660e\u306f[\u3053\u3061\u3089](https://gist.github.com/mitukiii/2775321)\n\n```ruby:main.rb\n\t\t\t\tconn = Faraday.new(:url =>  @rootPath) do |faraday|\n\t\t\t\t\tfaraday.request  :url_encoded             # form-encode POST params\n\t\t\t\t\tfaraday.response :logger                  # log requests to STDOUT\n\t\t\t\t\tfaraday.adapter  Faraday.default_adapter  # make requests with Net::HTTP\n\t\t\t\tend\n\t\t\t\tconn.post \"/sendsms/#{fromNumber}\"\n\t\t\t\t\n```\n\n###SMS\u9001\u4fe1\nSMS\u3092\u9001\u4fe1\u3059\u308b\u51e6\u7406\u3067\u3059\u3002\n\n```ruby:main.rb\n\n\tpost '/sendsms/:postPhoneNumber' do\n\t\tcontent_type \"text/xml\"\n\t\t\n\t\tpostPhoneNumber = params[:postPhoneNumber]\n\n\t\tif postPhoneNumber != nil\n\t\t\t#\u5148\u982d\u306e0\u3092\u56fd\u969b\u756a\u53f7+81\u306b\u5165\u308c\u66ff\u3048\u308b\n\t\t\tpostPhoneNumber = postPhoneNumber.gsub(/\\A0/, \"+81\")\n\n\t\t\t#\u30a2\u30ab\u30a6\u30f3\u30c8\n\t\t\taccount_sid = \"ACxxxxxxxxxxxxxxxxxxxxxx\"\n\t\t\tauth_token = \"yyyyyyyyyyyyyyyyyyyyyy\"\n\n\t\t\tclient = Twilio::REST::Client.new account_sid, auth_token\n\n\t\t\t# Your Twilio number\n\t\t\tfrom = \"+1xxxxxxxxxx\" \n\t\t\t\t\t \n\t\t\tclient.account.messages.create(\n\t\t\t:from => from,\n\t\t\t:to => postPhoneNumber,\n\t\t\t:body => \"sms\u30e1\u30c3\u30bb\u30fc\u30b8\u3092twilio\u3067\u9001\u308a\u307e\u3057\u305f\u30fb\u03c9\u30fb\"\n\t\t\t)\n\n\t\tend\n\t\t\n   end\n\n```\n\nSMS\u9001\u4fe1\u3059\u308b\u51e6\u7406\u306f\u4ee5\u4e0b\u3067\u3059\u3002\n\n```ruby:main.rb\n\t\t\t#\u30a2\u30ab\u30a6\u30f3\u30c8\n\t\t\taccount_sid = \"ACxxxxxxxxxxxxxxxxxxxxxx\"\n\t\t\tauth_token = \"yyyyyyyyyyyyyyyyyyyyyy\"\n\n\t\t\tclient = Twilio::REST::Client.new account_sid, auth_token\n\n\t\t\t# Your Twilio number\n\t\t\tfrom = \"+1xxxxxxxxxx\" \n\t\t\t\t\t \n\t\t\tclient.account.messages.create(\n\t\t\t:from => from,\n\t\t\t:to => postPhoneNumber,\n\t\t\t:body => \"sms\u30e1\u30c3\u30bb\u30fc\u30b8\u3092twilio\u3067\u9001\u308a\u307e\u3057\u305f\u30fb\u03c9\u30fb\"\n\t\t\t)\n\n```\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e`account_sid `\u3068`auth_token `\u306f\u81ea\u5206\u306eTwilio\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u3053\u3053\u306bTwilio\u306b[\u30ed\u30b0\u30a4\u30f3\u3057\u3066](https://jp.twilio.com/user/account/voice/getting-started)\n\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30ebVOICE > \u306f\u3058\u3081\u3088\u3046 >  API\u30af\u30ec\u30c7\u30f3\u30b7\u30e3\u30eb\u3092\u8868\u793a\u3059\u308b\n\u3067\u78ba\u8a8d\u304c\u3067\u304d\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.40.53.png](https://qiita-image-store.s3.amazonaws.com/0/31587/ea8a3c6a-e590-4b55-4e97-095d19fa0d81.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.40.53.png\")\n\n\n```ruby:main.rb\n# Your Twilio number\nfrom = \"+1xxxxxxxxxx\" \n```\n\n\n\u3053\u3053\u306f\u3042\u3068\u3067\u96fb\u8a71\u756a\u53f7\u3092\u8cb7\u3046\u306e\u3067\u305d\u306e\u756a\u53f7\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\n### Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\n\u3053\u3053\u307e\u3067\u4f5c\u3063\u305f\u3089Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3057\u3087\u3046\n\n```bash\ngit add .\ngit commit -m 'twilio sms app commit.'\ngit push heroku master\n\n```\n\n## Twilio\u3067\u96fb\u8a71\u756a\u53f7\u3092\u8cfc\u5165&\u8a2d\u5b9a\nTwilio\u3067\u96fb\u8a71\u3092\u8cb7\u3044\u307e\u3059\u3002\nSMS\u9001\u4fe1\u3067\u304d\u308b\u96fb\u8a71\u756a\u53f7\u306f\u30a2\u30e1\u30ea\u30ab\u306e\u756a\u53f7\u3067\u3059\u3002\n\u306a\u306e\u3067\u30a2\u30e1\u30ea\u30ab\u306e\u756a\u53f7\u3092\u8cb7\u3044\u307e\u3057\u3087\u3046\n\nTwilio\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30ebVOICE\u3000> \u96fb\u8a71\u756a\u53f7 \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\nhttps://jp.twilio.com/user/account/voice/phone-numbers\n\n**Buy a Number**\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002\n\n\u56fd\u3092\u30a2\u30e1\u30ea\u30ab\u306b\u6307\u5b9a\u3057\u3066\u691c\u7d22\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.46.36.png](https://qiita-image-store.s3.amazonaws.com/0/31587/1512bc83-7a2c-8333-da4c-363238c89446.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.46.36.png\")\n\n\u597d\u304d\u306a\u96fb\u8a71\u756a\u53f7\u3092\u9078\u3093\u3067\u8cfc\u5165\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.46.57.png](https://qiita-image-store.s3.amazonaws.com/0/31587/00eea854-6cea-0d14-40a0-6b766a2b99ba.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.46.57.png\")\n\n\n\u8cfc\u5165\u304c\u7d42\u308f\u3063\u305f\u3089\n\u30d7\u30ed\u30b0\u30e9\u30de\u30d6\u30ebVOICE\u3000> \u96fb\u8a71\u756a\u53f7 \u306b\u623b\u308a\u3001\u96fb\u8a71\u756a\u53f7\u306b\u7d10\u3065\u304fURL\u3092\u767b\u9332\u3057\u307e\u3059\u3002Heroku\u30a2\u30d7\u30ea\u306eURL\u306b\u306a\u308a\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.54.03.png](https://qiita-image-store.s3.amazonaws.com/0/31587/fa154311-105c-f382-9159-1a8b6f26346d.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-12-20 12.54.03.png\")\n\n\u4eca\u56de\u306f\u30a2\u30af\u30bb\u30b9\u304c/call\u306b\u30a2\u30d7\u30ea\u3067\u4f5c\u3063\u3066\u3044\u308b\u306e\u3067\nhttp://TWILIO_APP_NAME.herokuapp.com/call\u306eURL\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nmain.rb\u306e\u96fb\u8a71\u756a\u53f7\u3092\u8cb7\u3063\u305f\u96fb\u8a71\u756a\u53f7\u306b\u66f4\u65b0\u3057\u307e\u3057\u3087\u3046\n\n\n```ruby:main.rb\n# Your Twilio number\nfrom = \"+1xxxxxxxxxx\" \n```\n\n\n\u305d\u3057\u3066Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\n\n```bash\ngit add .\ngit commit -m 'add phone number.'\ngit push heroku master\n\n```\n\n\n## 2\u306e\u96fb\u8a71\u756a\u53f7\u306b\u96fb\u8a71\u3057\u3066SMS\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u304f\u308b\u306e\u3092\u78ba\u8a8d\n\u3053\u3053\u307e\u3067\u304f\u308c\u3070\u8cfc\u5165\u3057\u305f\u96fb\u8a71\u756a\u53f7\u306b\u96fb\u8a71\u3092\u3059\u308c\u3070SMS\u304c\u6765\u308b\u306f\u305a\u3067\u3059\u3002\n\u304c\u3001\u56fd\u969b\u96fb\u8a71\u306b\u306a\u308b\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u6238\u60d1\u3044\u307e\u3057\u305f\u3002\u3002\n\n\u79c1\u306e\u30ad\u30e3\u30ea\u30a2\u304cSoftbank\u306eiPhone\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u56fd\u969b\u96fb\u8a71\u306b\u306f\n010 > \u56fd\u756a\u53f7 > \u76f8\u624b\u5148\u96fb\u8a71\u756a\u53f7\n\u307e\u305f\u306f\n+ > \u56fd\u756a\u53f7 > \u76f8\u624b\u5148\u96fb\u8a71\u756a\u53f7\n\u3092\u3057\u306a\u3044\u3068\u96fb\u8a71\u304c\u304b\u3051\u3089\u308c\u306a\u3044\u307f\u305f\u3044\u3067\u3059\u3002\nhttp://www.softbank.jp/mobile/service/global/outgoing/call/support/setting-method/iphone/\n\n\n\u30a2\u30e1\u30ea\u30ab\u306e\u56fd\u756a\u53f7\u306f1\u3067\u3059\u3002\n\n\u306a\u306e\u3067\u4eee\u306bTwilio\u3067+1 123-456-7890\u3068\u3044\u3046\u96fb\u8a71\u756a\u53f7\u3092\u8cfc\u5165\u3057\u305f\u306e\u306a\u3089\n\n\u30ad\u30fc\u30d1\u30c3\u30c9\u3067010 1 1234567890\u3068\u5165\u529b\u3059\u308c\u3070\u96fb\u8a71\u304c\u304b\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4e0a\u624b\u304f\u884c\u3051\u3070\u96fb\u8a71\u304c\u7d42\u308f\u3063\u305f\u3042\u3068\u306bSMS\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6765\u308b\u306f\u305a\u3067\u3059\uff01\n\n![IMG_3710.PNG](https://qiita-image-store.s3.amazonaws.com/0/31587/37d0236b-0c57-357c-7f0b-fa18ceb602f2.png \"IMG_3710.PNG\")\n\n\n\n#\u6700\u5f8c\u306b\nTwilio\u3067Heroku\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u3063\u3066\u96fb\u8a71\u8cfc\u5165\u307e\u3067\u3092\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\u56fd\u969b\u96fb\u8a71\u306e\u304b\u3051\u304b\u305f\u3068\u304b\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u306f\u306a\u3044\u3068\u3053\u308d\u3067\u3064\u307e\u3065\u3044\u305f\u306e\u3067\u3001\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\n## \u53c2\u8003\n* http://dev.classmethod.jp/server-side/ruby-on-rails/sinatra-postgresql-unicorn-on-heroku/\n* https://gist.github.com/mitukiii/2775321\n* http://qiita.com/srockstyle/items/111d25f44ef2cc51d9ac\n* http://dev.classmethod.jp/server-side/twilio/twilio-sms/\n* https://jp.twilio.com/docs/quickstart/ruby/sms/sending-via-rest\n", "tags": ["twilio", "Heroku"]}