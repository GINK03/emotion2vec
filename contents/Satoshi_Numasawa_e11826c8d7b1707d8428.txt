{"context": "// \u5f53\u8a18\u4e8b\u306f, \u4ee5\u4e0b\u89aa\u8a18\u4e8b\u306e Setup Flow\u306e\u4e00\u90e8\u3067\u3059.\n// AWS IoT Device SDK for Ruby \u3092\u4f7f\u3063\u3066\u307f\u305f\n\u4ee5\u4e0b, \u53c2\u8003\u3068\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f. \u6709\u96e3\u3046\u3054\u3056\u3044\u307e\u3059.\nhttp://qiita.com/akito1986/items/9c1c14a36654646db456\n\n\u74b0\u5883\n\nubuntu on AWS ec2\nInfluxDB and Chronograph\n\n\nInfluxdb\n\nInstall\nhttps://docs.influxdata.com/influxdb/v1.0/introduction/installation/\n\nconsole\nsudo apt-get update\nsudo apt-get upgrade\n\n\n\nconsole\ncurl -sL https://repos.influxdata.com/influxdb.key | sudo apt-key add -\nsource /etc/lsb-release\necho \"deb https://repos.influxdata.com/${DISTRIB_ID,,} ${DISTRIB_CODENAME} stable\" | sudo tee /etc/apt/sources.list.d/influxdb.list\n\n\n\nconsole\nsudo apt-get update && sudo apt-get install influxdb\nsudo service influxdb start\n\n\n\nCreate database\nhttps://docs.influxdata.com/influxdb/v1.0/introduction/getting_started/\n\nconsole\n// DB name\u306f\u4efb\u610f\n\n$ influx\nCREATE DATABASE sensorMeasure_sendai_test\nCREATE DATABASE my_db\n\n\n\nCreate user\n// user name, password\u306f\u4efb\u610f\n\n$ influx\nCREATE USER admin WITH PASSWORD 'admin' WITH ALL PRIVILEGES\n\n\nEdit config\n\nconsole\nsudo vim /etc/influxdb/influxdb.conf\n\n\n\n/etc/influxdb/influxdb.conf\n[http]\n-  auth-enabled = false\n+  auth-enabled = true\n\n\n\nconsole\nsudo /etc/init.d/influxdb restart\n\n// login comannd sample (\u4ee5\u964d\u306f, user\u8a8d\u8a3c\u304c\u5fc5\u8981\u3068\u306a\u308b)\ninflux -username admin -password admin\n\n\n\nTest write and show Data\nhttps://docs.influxdata.com/influxdb/v1.0/guides/writing_data/\nhttps://docs.influxdata.com/influxdb/v1.0/tools/api/\n\n\npost data\n\nconsole\n$ curl -i -X POST http://52.197.142.78:8086/write?db=my_db -u admin:admin --data-binary  'cpu_load_short,host=server01,region=us-west value=0.75'\nus-west value=0.75'\n\nHTTP/1.1 204 No Content\nContent-Type: application/json\nRequest-Id: 7015c2a7-900a-11e6-8009-000000000000\nX-Influxdb-Version: 1.0.2\nDate: Tue, 11 Oct 2016 23:28:38 GMT\n\n\n\n\nshow data\n\nconsole\n$ curl -X GET 'http://52.197.142.78:8086/query?q=select+*+from+cpu_load_short%3B&db=my_db' -u admin:admin\n\n{\"results\":[{\"series\":[{\"name\":\"cpu_load_short\",\"columns\":[\"time\",\"host\",\"region\",\"value\"],\"values\":[[\"2016-10-11T23:22:16.50324883Z\",\"server01\"]}]}]}\n\n\n\n\n\nData\u53d6\u5f97\u72b6\u6cc1\u3092\u78ba\u8a8d\n\u65e2\u306b, Raspberry pi | AWS IoT | AWS Lambda | Influx \u3068\u6d41\u308c, DB\u3078\u5024\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059.\n\n\u8a8d\u8a3c\n\n\nhttp://[Host or IP]:8083 \u3092\u958b\u304f\n\nDB user name, pass \u3092\u5165\u529b\n\n[Save] \u3092\u9078\u629e\n\n\n\n\n\u6e29\u5ea6/\u6e7f\u5ea6 \u53d6\u5f97\n\n\u53f3\u4e0a\u306e pull down \u304b\u3089, \u4f7f\u7528\u3059\u308b DB\u540d\u3092\u9078\u629e (\u3053\u3053\u3067\u306f, sensorMeasure_sendai_test)\n\n\n[select * from DHT11Measure;] \u3092\u5165\u529b.\n\u6e29\u5ea6/\u6e7f\u5ea6\u5024\u304c\u8868\u793a\u3055\u308c\u307e\u3059.\n\n\n\n\u4ee5\u4e0a.\n\u6b21\u306b\u6700\u7d42\u5de5\u7a0b\u306e,  #6 - Chronograph \u306b\u3066\u53ef\u8996\u5316 \u3078.\n// \u5f53\u8a18\u4e8b\u306f, \u4ee5\u4e0b\u89aa\u8a18\u4e8b\u306e Setup Flow\u306e\u4e00\u90e8\u3067\u3059.\n// [AWS IoT Device SDK for Ruby \u3092\u4f7f\u3063\u3066\u307f\u305f](http://qiita.com/Satoshi_Numasawa/items/2b89799a92e5a4edefcd)\n\n\u4ee5\u4e0b, \u53c2\u8003\u3068\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f. \u6709\u96e3\u3046\u3054\u3056\u3044\u307e\u3059.\nhttp://qiita.com/akito1986/items/9c1c14a36654646db456\n\n\n# \u74b0\u5883\n- ubuntu on AWS ec2\n- InfluxDB and Chronograph\n\n\n# Influxdb\n## Install\nhttps://docs.influxdata.com/influxdb/v1.0/introduction/installation/\n\n```bash:console\nsudo apt-get update\nsudo apt-get upgrade\n```\n\n```bash:console\ncurl -sL https://repos.influxdata.com/influxdb.key | sudo apt-key add -\nsource /etc/lsb-release\necho \"deb https://repos.influxdata.com/${DISTRIB_ID,,} ${DISTRIB_CODENAME} stable\" | sudo tee /etc/apt/sources.list.d/influxdb.list\n```\n\n```bash:console\nsudo apt-get update && sudo apt-get install influxdb\nsudo service influxdb start\n```\n\n\n\n\n## Create database\nhttps://docs.influxdata.com/influxdb/v1.0/introduction/getting_started/\n\n\n```bash:console\n// DB name\u306f\u4efb\u610f\n\n$ influx\nCREATE DATABASE sensorMeasure_sendai_test\nCREATE DATABASE my_db\n```\n\n\n\n\n## Create user\n```\n// user name, password\u306f\u4efb\u610f\n\n$ influx\nCREATE USER admin WITH PASSWORD 'admin' WITH ALL PRIVILEGES\n```\n\n\n\n\n## Edit config\n```bash:console\nsudo vim /etc/influxdb/influxdb.conf\n```\n\n```bash:/etc/influxdb/influxdb.conf\n[http]\n-  auth-enabled = false\n+  auth-enabled = true\n```\n\n```bash:console\nsudo /etc/init.d/influxdb restart\n\n// login comannd sample (\u4ee5\u964d\u306f, user\u8a8d\u8a3c\u304c\u5fc5\u8981\u3068\u306a\u308b)\ninflux -username admin -password admin\n```\n\n\n\n\n## Test write and show Data\nhttps://docs.influxdata.com/influxdb/v1.0/guides/writing_data/\nhttps://docs.influxdata.com/influxdb/v1.0/tools/api/\n\n- post data\n\n    ```bash:console\n    $ curl -i -X POST http://52.197.142.78:8086/write?db=my_db -u admin:admin --data-binary  'cpu_load_short,host=server01,region=us-west value=0.75'\nus-west value=0.75'\n\n    HTTP/1.1 204 No Content\n    Content-Type: application/json\n    Request-Id: 7015c2a7-900a-11e6-8009-000000000000\n    X-Influxdb-Version: 1.0.2\n    Date: Tue, 11 Oct 2016 23:28:38 GMT\n    ```\n\n- show data\n\n    ```bash:console\n    $ curl -X GET 'http://52.197.142.78:8086/query?q=select+*+from+cpu_load_short%3B&db=my_db' -u admin:admin\n\n    {\"results\":[{\"series\":[{\"name\":\"cpu_load_short\",\"columns\":[\"time\",\"host\",\"region\",\"value\"],\"values\":[[\"2016-10-11T23:22:16.50324883Z\",\"server01\"]}]}]}\n```\n\n\n# Data\u53d6\u5f97\u72b6\u6cc1\u3092\u78ba\u8a8d\n\u65e2\u306b, Raspberry pi | AWS IoT | AWS Lambda | Influx \u3068\u6d41\u308c, DB\u3078\u5024\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059.\n\n\n## \u8a8d\u8a3c\n- [x] http://[Host or IP]:8083 \u3092\u958b\u304f\n- [x] DB user name, pass \u3092\u5165\u529b\n- [x] [Save] \u3092\u9078\u629e\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-12 9.50.51.png](https://qiita-image-store.s3.amazonaws.com/0/118627/2eaf8fd4-2a5d-b166-a219-637731b7dcf8.png)\n\n\n\n\n\n## \u6e29\u5ea6/\u6e7f\u5ea6 \u53d6\u5f97\n- [x] \u53f3\u4e0a\u306e pull down \u304b\u3089, \u4f7f\u7528\u3059\u308b DB\u540d\u3092\u9078\u629e (\u3053\u3053\u3067\u306f, sensorMeasure_sendai_test)\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-12 9.52.58.png](https://qiita-image-store.s3.amazonaws.com/0/118627/44221acc-9f10-4ee1-686b-e7c6e3f40215.png)\n<br><br>\n\n- [x] [select * from DHT11Measure;] \u3092\u5165\u529b.\n- [x] \u6e29\u5ea6/\u6e7f\u5ea6\u5024\u304c\u8868\u793a\u3055\u308c\u307e\u3059.\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-12 9.59.13.png](https://qiita-image-store.s3.amazonaws.com/0/118627/8ed1ac2f-410b-d9f6-47f4-9d427718ebeb.png)\n<br><br>\n\n\n\u4ee5\u4e0a.\n\u6b21\u306b\u6700\u7d42\u5de5\u7a0b\u306e,  [#6 - Chronograph \u306b\u3066\u53ef\u8996\u5316](http://qiita.com/Satoshi_Numasawa/items/a4452cce3010af9570f3) \u3078.\n\n\n\n\n", "tags": ["IoT", "RaspberryPi", "AWS", "aws-sdk-for-ruby", "influxdb"]}