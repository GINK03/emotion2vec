{"tags": ["PhantomJS", "Python", "Flask", "Selenium", "BeautifulSoup"], "context": "\n\n\u81ea\u5df1\u7d39\u4ecb\n\u3084\u307e\u3054\u3093\u3068\u3044\u3046\u540d\u524d\u3067\u6d3b\u52d5\u3057\u3066\u3044\u308b\u5927\u962a\u60c5\u5831\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u5c02\u9580\u5b66\u6821\u306e3\u5e74\u751f\u3067\u3059\u3002(2016/10/18\u73fe\u5728)\n\u95a2\u897f\u306e\u52c9\u5f37\u4f1a\u306a\u3069\u306b\u9854\u3092\u3060\u3059\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u51fa\u4f1a\u3063\u305f\u969b\u306f\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\u73fe\u5728\u79c1\u306f\u3001IT\u30af\u30ea\u30a8\u30a4\u30c8\u90e8\u3068\u3044\u3046\u30af\u30e9\u30d6\u306b\u6240\u5c5e\u3057\u3066\u304a\u308a\u3001\u305d\u3053\u3067\u306f\u6bce\u5e740\u6cca3\u65e5\u306e\u590f\u5408\u5bbf\u30cf\u30c3\u30ab\u30bd\u30f3\u306a\u3069\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u306e\u969b\u884c\u3063\u305f\u30cf\u30c3\u30ab\u30bd\u30f3\u306b\u3066\u3001\u521d\u3081\u3066Python\u306eFlask\u3068Heroku\u3092\u4f7f\u3063\u3066\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u305f\u60c5\u5831\u3092json\u3067\u8fd4\u3059API\u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u969b\u306b\u304a\u3053\u306a\u3063\u305f\u65b9\u6cd5\u3092\u307e\u3068\u3081\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nheroku\u3067HelloWorld\u307e\u3067\u306b\u4f7f\u7528\u3059\u308b\u3082\u306e\u3084Python\u306e\u74b0\u5883\u69cb\u7bc9\u306a\u3069\u306f\u524d\u7de8\u306b\u3042\u305f\u308b\nRe:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301c\u74b0\u5883\u69cb\u7bc9\u3068\u3053\u3093\u306b\u3061\u306f\u4e16\u754c\u301c\n\u306b\u3066\u3001\n\u4eca\u56de\u4f5c\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u307e\u3067\u306f\u5f8c\u7de8\u306b\u3042\u305f\u308b\nRe:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301cPhantomJS\u3092Heroku\u3078\u301c\n\u306b\u3066\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u5408\u308f\u305b\u3066\u3054\u89a7\u304f\u3060\u3055\u3044\n\n\u4eca\u56de\u3084\u308b\u3053\u3068\n\n\u52c9\u5f37\u306b\u306a\u308c\u3070\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3067\u3082\u3044\u3044\u3058\u3083\u306a\u3044\n\u4eca\u56de\u306fSlideShare\u3092\u984c\u6750\u3068\u3057\u3066\u3001Selenium\u3092\u3068PhantomJS\u3092\u4f7f\u3063\u305f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u3084\u308a\u65b9\u3092\u66f8\u304d\u307e\u3059\u3002\n1\u3064\u306e\u8a18\u4e8b\u306b\u307e\u3068\u3081\u305f\u969b\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u70ba\u3001Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u6d41\u308c\u306f\u5f8c\u7de8\u306b\u5206\u3051\u3066\u3044\u307e\u3059\u3002\n\n\u5177\u4f53\u7684\u306a\u52d5\u304d\n[HerokuURL]/api/[\u691c\u7d22\u30ef\u30fc\u30c9]/[\u30da\u30fc\u30b8\u6570]\n\u4f8b : ~herokuapp.com/api/python/2\n\u3068\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\n\nHeroku \u3067 PhantomJS \u304c\u52d5\u304d Slideshare\u306e\u691c\u7d22\u30da\u30fc\u30b8\u3092\u958b\u304f\nURL\u306e[\u691c\u7d22\u30ef\u30fc\u30c9]\u3092\u691c\u7d22\u30da\u30fc\u30b8\u306e\u691c\u7d22\u6b04\u306b\u5165\u529b\u3057\u691c\u7d22\n\u691c\u7d22\u7d50\u679c\u306e\u8a00\u8a9e\u8a2d\u5b9a\u3092\u65e5\u672c\u8a9e\u306b\u5909\u66f4\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067web\u30da\u30fc\u30b8\u5185\u306e\u30b9\u30e9\u30a4\u30c9\u306e\u60c5\u5831\u3092\u62bd\u51fa\n\nURL\u306e[\u30da\u30fc\u30b8\u6570]\u306e\u6570\u3060\u3051\u4e0b\u306e\u30da\u30fc\u30b8\u30e3\u30fc\u306eNext\u3092\u30af\u30ea\u30c3\u30af\u3057\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u7e70\u308a\u8fd4\u3059\u3002\n\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u7d42\u308f\u3063\u305f\u3089json\u5f62\u5f0f\u306b\u3057\u3066\u6295\u3052\u308b\uff01\n\n\u3068\u3044\u3046\u4e8b\u3092\u3059\u308bAPI\u3092\u4f5c\u308a\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4eca\u56de\u4f7f\u7528\u3057\u305f\u3082\u306e\n\nMac OSX El Capitan 10.11.6\nPython3.5.1\nFlask\nselenium\n\n\n\u691c\u7d22\u6b04\u306b\u5165\u529b\u3057\u305f\u308a\u6b21\u3078\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3067\u304d\u308b\n\n\nbeautifulsoup4\n\n\nWeb\u30c7\u30fc\u30bf\u3092\u62bd\u51fa\u3057\u305f\u308a\u3059\u308b\n\n\nlxml\n\n\nbeautifulsoup\u3068\u30bb\u30c3\u30c8\u3067\u4f7f\u3046\n\n\nCORS\n\n\n\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u56de\u907f\n\n\nHeroku\n\n\nHeroku\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u305f\u30c7\u30fc\u30bf\u3092Json\u5f62\u5f0f\u306b\u3057\u3066\u8fd4\u3059\u3088\u3046\u306b\u3059\u308b\n\n\nPhantomJS\n\n\nHeroku\u3067selenium\u3092\u4f7f\u3046\u305f\u3081\u306b\u4f7f\u3046\n\u3044\u308f\u3086\u308bGUI\u304c\u306a\u3044\u88cf\u3067\u52d5\u304f\u30d6\u30e9\u30a6\u30b6\n\n\n\n\n\u6e96\u5099\n\n\u4eca\u56de\u3059\u308b\u524d\u306b\u3084\u3063\u3066\u304a\u304f\u74b0\u5883\u69cb\u7bc9\nRe:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301c\u74b0\u5883\u69cb\u7bc9\u3068\u3053\u3093\u306b\u3061\u306f\u4e16\u754c\u301c\n\u3067HelloWorld\u3092\u3059\u308b\u307e\u3067\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\nFlask\u3068 Gunicorn\u306f\u5165\u308c\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\n\u74b0\u5883\u306a\u3069\u306fpyenv-virtualenv\u306a\u3069\u306e\u304a\u597d\u304d\u306a\u3082\u306e\u3092\u7528\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4eca\u56de\u3059\u308b\u305f\u3081\u306b\u8ffd\u52a0\u3067\u3059\u308b\u74b0\u5883\u69cb\u7bc9\n\nPhantomJS\nHeroku\u3067\u52d5\u304b\u3059\u524d\u306b\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3059\u308b\u305f\u3081\u306b\u30ed\u30fc\u30ab\u30eb\u306b\u3082PhantomJS\u3092\u5165\u308c\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u304b\u3089\u64cd\u4f5c\u3067\u304d\u308bGUI\u304c\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u3068\u3044\u3046\u8a8d\u8b58\u3067\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u53c2\u8003 :PhantomJS\u3092\u4f7f\u3063\u3066\u8272\u3005\u8a66\u3057\u3066\u307f\u308b\n$  brew install phantomjs\n\n\nSelenium\n\u30af\u30ed\u30b9\u30d6\u30e9\u30a6\u30b6\u3001\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306eUI\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u3001\u3089\u3057\u3044\u3067\u3059\u3002\n\u666e\u901a\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3060\u3068\u6307\u5b9a\u3057\u305fURL\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5206\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u304c\u3001selenium\u3092\u4f7f\u3046\u3053\u3068\u3067\u6b21\u306e\u30da\u30fc\u30b8\u306b\u884c\u304f\u30dc\u30bf\u30f3\u3092\u62bc\u3055\u305b\u305f\u308a\u3001\u6587\u5b57\u3092\u5165\u529b\u3057\u3066\u691c\u7d22\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3059\u3054\u3044\nRuby\u3067\u3059\u304c\u3069\u3046\u3044\u3046\u3082\u306e\u304b\u53c2\u8003\u306b\u306a\u308b\u8a18\u4e8b : \nWeb\u306eUI\u30c6\u30b9\u30c8\u81ea\u52d5\u5316 - Selenium\u3092\u4f7f\u3063\u3066\u307f\u308b\n$ pip install selenium\n\n\nbeautifulsoup\n\u53d6\u5f97\u3057\u305fWeb\u30da\u30fc\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u52a0\u5de5\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002\n\u53c2\u8003 : Python\u3068Beautiful Soup\u3067\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\n$ pip install beautifulsoup4\n\n\nlxml\nbeautifulsoup\u3068\u5408\u308f\u305b\u3066\u4f7f\u3044\u307e\u3059\u3002\n$ pip install lxml\n\n\ncors\u3067\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u3092\u3088\u3051\u308b\u3084\u3064\n\u666e\u901a\u306bJson\u3092\u8fd4\u3059API\u3092\u4f5c\u3063\u3066\u3082\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u4e91\u3005\u3067\u3001\u5bfe\u7b56\u3092\u884c\u3063\u3066\u3044\u306a\u3044API\u3092Chrome\u3067\u4f7f\u3046\u969b\u306b\u4f7f\u304a\u3046\u3068\u3059\u308b\u3068\u9762\u5012\u306a\u306e\u3067\u3069\u3046\u305b\u306a\u306e\u3067\u5bfe\u7b56\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u8aac\u660e\u306b\u3066\u30ea\u30f3\u30af\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n$ pip install -U flask-cors\n\n\n\u3067\u304d\u305f\u3082\u306e\nhttps://github.com/ymgn/SlideShare-API\n\napi.py\n# -*- coding: utf-8 -*-\n\nimport json\n# \u3053\u3053\u304b\u3089\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5fc5\u8981\u5206\nfrom bs4 import BeautifulSoup\n# \u3053\u3053\u304b\u3089selenium\u3067\u30d6\u30e9\u30a6\u30b6\u64cd\u4f5c\u5fc5\u8981\u5206\nfrom selenium import webdriver \nfrom selenium.webdriver.common.keys import Keys # \u6587\u5b57\u3092\u5165\u529b\u3059\u308b\u6642\u306b\u4f7f\u3046\n\n#\u3053\u3053\u304b\u3089flask\u306e\u5fc5\u8981\u5206\nimport os\nfrom flask import Flask\n\n#\u3053\u3053\u304b\u3089flask\u3067cors\u306e\u8a2d\u5b9a ajax\u3092\u4f7f\u3046\u6642\u306e\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u7528\nfrom flask_cors import CORS, cross_origin\napp = Flask(__name__)\nCORS(app)\n\n@app.route('/')\ndef index():\n    return \"\u4f7f\u3044\u65b9 : /api/\u691c\u7d22\u3059\u308b\u5358\u8a9e/\u53d6\u5f97\u30da\u30fc\u30b8\u6570\"\n\n@app.route('/api/<string:word>/<int:page>') # \u691c\u7d22\u30ef\u30fc\u30c9/\u30da\u30fc\u30b8\u6570\u3092\u30d1\u30b9\u304b\u3089\u5909\u6570\u306b\u53d7\u3051\u53d6\u308b\ndef slide(word,page):\n\n    driver = webdriver.PhantomJS() # PhantomJS\u3092\u4f7f\u3046 \n    driver.set_window_size(1124, 850) # PhantomJS\u306e\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\u3059\u308b\n    driver.implicitly_wait(20) # \u6307\u5b9a\u3057\u305f\u8981\u7d20\u306a\u3069\u304c\u306a\u304b\u3063\u305f\u5834\u5408\u51fa\u3066\u304f\u308b\u307e\u3067driver\u304c\u6700\u592720\u79d2\u307e\u3067\u81ea\u52d5\u5f85\u6a5f\u3057\u3066\u304f\u308c\u308b\n\n    URL = \"http://www.slideshare.net/search/\"\n    driver.get(URL) # slideshare\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\n    data_list = [] # \u5168\u30da\u30fc\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u96c6\u3081\u308b\u914d\u5217\n\n    search = driver.find_element_by_id(\"nav-search-query\") # \u691c\u7d22\u6b04\u8981\u7d20\u3092\u53d6\u5f97\n    search.send_keys(word) # \u691c\u7d22\u30ef\u30fc\u30c9\u3092\u5165\u529b\n    search.submit() # \u691c\u7d22\u3092submit\u3059\u308b\n\n    lang = driver.find_element_by_xpath(\"//select[@id='slideshows_lang']/option[@value='ja']\") # \u8a00\u8a9e\u9078\u629e\u30ea\u30b9\u30c8\u306e\u65e5\u672c\u8a9e\u306e\u90e8\u5206\u3092\u62bd\u51fa\n    lang.click() # \u8a00\u8a9e\u9078\u629e\u306e\u65e5\u672c\u8a9e\u3092\u9078\u629e\n\n    for i in range(0,page): \n        print(str(i+1) + u\"\u30da\u30fc\u30b8\u76ee\")\n        data = driver.page_source.encode('utf-8') # \u30da\u30fc\u30b8\u5185\u306e\u60c5\u5831\u3092utf-8\u3067\u7528\u610f\u3059\u308b\n        soup = BeautifulSoup(data,\"lxml\") # \u52a0\u5de5\u3057\u3084\u3059\u3044\u3088\u3046\u306blxml\u5f62\u5f0f\u306b\u3059\u308b\n        slide_list = soup.find_all(\"div\",class_=\"thumbnail-content\") # \u30b9\u30e9\u30a4\u30c9\u5358\u4f4d\u3067\u62bd\u51fa\n        for slide in slide_list:\n            slide_in = {} # \u30b9\u30e9\u30a4\u30c9\u306e\u60c5\u5831\u3092\u8f9e\u66f8\u5f62\u5f0f\u3067\u307e\u3068\u3081\u308b\n\n            # \u30b9\u30e9\u30a4\u30c9\u306e\u6295\u7a3f\u8005\u306e\u540d\u524d\u3092\u5165\u624b\n            name = slide.find(\"div\",class_=\"author\").text\n            slide_in[\"name\"] = name.strip() # strip()\u306f\u4e21\u7aef\u306e\u7a7a\u767d\u3068\u6539\u884c\u3092\u306a\u304f\u3057\u3066\u304f\u308c\u308b\n\n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u624b\n            title = slide.find(\"a\",class_=\"title title-link antialiased j-slideshow-title\").get(\"title\") # \u6307\u5b9a\u3057\u305f\u30bf\u30b0&\u30af\u30e9\u30b9\u5185\u306etitle\u3092\u51fa\u3059\n            slide_in[\"title\"] = title\n\n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30ea\u30f3\u30af\u3092\u5165\u624b\n            link = slide.find(\"a\",class_=\"title title-link antialiased j-slideshow-title\").get(\"href\") # \u6307\u5b9a\u3057\u305f\u30bf\u30b0&\u30af\u30e9\u30b9\u5185\u306ehref\u3092\u51fa\u3059\n            slide_in[\"link\"] = \"http://www.slideshare.net\" + link\n\n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30b5\u30e0\u30cd\u306e\u30ea\u30f3\u30af\u3092\u5165\u624b\n            imagetag = slide.find(\"a\",class_=\"link-bg-img\").get(\"style\") # \u6307\u5b9a\u3057\u305f\u30bf\u30b0&\u30af\u30e9\u30b9\u5185\u306estyle\u3092\u51fa\u3059\n            image = imagetag[imagetag.find(\"url(\")+4:imagetag.find(\");\")] # \u3044\u3089\u306a\u3044\u90e8\u5206\u3092\u53d6\u308a\u9664\u304f\n            slide_in[\"image\"] = image\n\n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30da\u30fc\u30b8\u6570\u3067\u3042\u308bslides\u3068likes\u3092\u5165\u624b\n            info = slide.find(\"div\",class_=\"small-info\").string # slides\u3068likes\u306e\u6587\u5b57\u5217\u3092\u5165\u624b\n            slides = info[7:info.find(\"slides\")] # slides\u90e8\u5206\u3092\u62bd\u51fa\n            slide_in[\"slides\"] = slides.strip() # strip()\u306f\u4e21\u7aef\u306e\u7a7a\u767d\u3068\u6539\u884c\u3092\u306a\u304f\u3057\u3066\u304f\u308c\u308b\n            if \"likes\" in info:\n                likes = info[info.find(\", \")+2:info.find(\"likes\")] # likes\u90e8\u5206\u3092\u62bd\u51fa\n            else:\n                likes = \"0\"\n            slide_in[\"likes\"] = likes.strip() # strip()\u306f\u4e21\u7aef\u306e\u7a7a\u767d\u3068\u6539\u884c\u3092\u306a\u304f\u3057\u3066\u304f\u308c\u308b\n\n            data_list.append(slide_in) # data_list\u306b1\u30da\u30fc\u30b8\u5206\u306e\u5185\u5bb9\u3092\u307e\u3068\u3081\u308b\n\n        driver.execute_script('window.scrollTo(0, 3000)') # \u30da\u30fc\u30b8\u30e3\u30fc\u306e\u3042\u308b\u4e0b\u306b\u79fb\u52d5\n        next = driver.find_element_by_xpath(\"//li[@class='arrow']/a[@rel='next']\") # \u30da\u30fc\u30b8\u30e3\u30fc\u306eNEXT\u8981\u7d20\u3092\u62bd\u51fa\n        next.click() # Next\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n    driver.close() # \u30d6\u30e9\u30a6\u30b6\u64cd\u4f5c\u3092\u7d42\u308f\u3089\u305b\u308b\n    jsonstring = json.dumps(data_list,ensure_ascii=False,indent=2) # \u4f5c\u3063\u305f\u914d\u5217\u3092json\u5f62\u5f0f\u306b\u3057\u3066\u51fa\u529b\u3059\u308b\n    return jsonstring\n\n# bash\u3067\u53e9\u3044\u305f\u304bimport\u3067\u5165\u308c\u305f\u304b\u3092\u5224\u5b9a\u3059\u308b\nif __name__ == '__main__':\n    app.run()\n\n\n\n\u30b3\u30fc\u30c9\u89e3\u8aac\n\u30b3\u30fc\u30c9\u5185\u306b\u3082\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u304c\u3001\u4e0a\u304b\u3089\u5927\u4e8b\u305d\u3046\u306a\u7b87\u6240\u3092\u8aac\u660e\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u30a4\u30f3\u30dd\u30fc\u30c8\u306f\u66f8\u3044\u3066\u3044\u308b\u305d\u306e\u307e\u307e\u306a\u306e\u3067\u7701\u7565\n\nCORS\nChrome\u306a\u3069\u3067API\u3092\u4f7f\u7528\u3057\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u52d5\u304b\u306a\u3044\uff01\u3068\u3044\u3046\u7d4c\u9a13\u306f\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305b\u3063\u304b\u304fAPI\u3092\u4f5c\u6210\u3059\u308b\u306e\u3067\u3059\u304b\u3089\u3001\u5bfe\u7b56\u3092\u3057\u3066\u304a\u3044\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\nfrom flask_cors import CORS, cross_origin\n\napp = Flask(__name__)\nCORS(app)\n\n\u3068\u66f8\u304f\u3068\u306a\u3093\u3084\u304b\u3093\u3084\u3067\u5bfe\u7b56\u3057\u3066\u304f\u308c\u308b\u305d\u3046\u3067\u3059\u3002\u3079\u3093\u308a\n\u53c2\u8003 : https://flask-cors.readthedocs.io/en/latest/\n\nFlask\u306e\u30d1\u30b9\u304b\u3089\u5f15\u6570\u3092\u53d6\u308b\nFlask\u306eroute\u306e\u3068\u3053\u308d\u306b<\u578b\u540d:\u5909\u6570\u540d>\u3068\u66f8\u3044\u3066\u3001def\u306e\uff08\uff09\u5185\u306b\u305d\u306e\u5909\u6570\u540d\u3092\u66f8\u304f\u3068\u30d1\u30b9\u306e\u4e2d\u8eab\u3092\u5f15\u6570\u3068\u3057\u3066\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n@app.route('/api/<string:word>/<int:page>') # \u691c\u7d22\u30ef\u30fc\u30c9/\u30da\u30fc\u30b8\u6570\u3092\u30d1\u30b9\u304b\u3089\u5909\u6570\u306b\u53d7\u3051\u53d6\u308b  \ndef slide(word,page):\n\n\u53c2\u8003 : Flask \u3092\u4f7f\u3044\u3053\u306a\u305d\u3046\n\nPhantomJS\u306e\u30d6\u30e9\u30a6\u30b6\u30b5\u30a4\u30ba\u3092\u6c7a\u3081\u308b\ndriver.set_window_size(1124, 850)\n\n\u30d6\u30e9\u30a6\u30b6\u30b5\u30a4\u30ba\u3092\u6c7a\u3081\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u3046\u307e\u304f\u8981\u7d20\u3092\u3068\u3063\u305f\u308a\u3001\u30b9\u30af\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\u30b5\u30a4\u30ba\u306e\u6570\u5024\u306e\u5024\u306f\u8abf\u3079\u305f\u6642\u306b\u66f8\u3044\u3066\u3042\u3063\u305f\u307e\u307e\u306a\u306e\u3067\u7406\u7531\u306f\u4e0d\u660e\u3002\n\n\u8981\u7d20\u306e\u8aad\u307f\u8fbc\u307f\u5f85\u3061\u51e6\u7406\ndriver.implicitly_wait(20)\n\n\u3053\u3046\u66f8\u304f\u3053\u3068\u3067\u3001\u4ee5\u964d\u306edriver.find~~\u306eID\u3084class\u3092\u6307\u5b9a\u3057\u3066\u8981\u7d20\u3092\u53d6\u5f97&\u64cd\u4f5c\u3059\u308b\u969b\u306b\u6700\u592710\u79d2\u9593\u5f85\u3063\u3066\u304f\u308c\u3001\u8aad\u307f\u8fbc\u307f\u304c\u5b8c\u4e86\u3057\u3066\u304f\u308c\u305f\u3089\u5373\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u4fbf\u5229\u306a\u72b6\u614b\u306b\u306a\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\u3044\u3061\u3044\u3061\u660e\u793a\u7684\u306btime.sleep(3)\u306a\u3069\u3068\u4e88\u60f3\u5f85\u6a5f\u6642\u9593\u3092\u304b\u304b\u306a\u304f\u3066\u826f\u3044\u306e\u3067selenium\u3067\u64cd\u4f5c\u3059\u308b\u969b\u3059\u3054\u304f\u4fbf\u5229\u3067\u3059\u3002\n\u53c2\u8003 : \u3053\u306e\u30b5\u30a4\u30c8\u306eImplicit Waits\u306e\u7b87\u6240\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\n\n\u30c6\u30ad\u30b9\u30c8\u3092\u30d5\u30a9\u30fc\u30e0\u306e\u30dc\u30c3\u30af\u30b9\u306b\u5165\u529b\u3057submit\nsearch = driver.find_element_by_id(\"nav-search-query\") # \u691c\u7d22\u6b04\u8981\u7d20\u3092\u53d6\u5f97\nsearch.send_keys(word) # \u691c\u7d22\u30ef\u30fc\u30c9\u3092\u5165\u529b\nsearch.submit() # \u691c\u7d22\u3092submit\u3059\u308b\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089id\u3067input\u8981\u7d20\u306a\u3069\u3092\u53d6\u5f97\u3057\u305f\u5f8c\u306f\u3001send_keys(\"hoge\")\u306a\u3069\u3067\u5024\u3092\u5165\u308c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305d\u306e\u8981\u7d20\u304cform\u306e\u4e2d\u3067\u3042\u308c\u3070\u3001.submit()\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u3092\u9078\u629e\u3059\u308b\nlang = driver.find_element_by_xpath(\"//select[@id='slideshows_lang']/option[@value='ja']\") # \u8a00\u8a9e\u9078\u629e\u30ea\u30b9\u30c8\u306e\u65e5\u672c\u8a9e\u306e\u90e8\u5206\u3092\u62bd\u51fa\nlang.click() # \u8a00\u8a9e\u9078\u629e\u306e\u65e5\u672c\u8a9e\u3092\u9078\u629e\n\n\u4eca\u56de\u306f\u8981\u7d20\u306e\u6307\u5b9a\u65b9\u6cd5\u3092id\u3084class\u3067\u306f\u306a\u304fXPATH\u3067\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u7406\u7531\u3068\u3057\u3066\u306f\u3001id\u304c\u8907\u6570\u3001\u307e\u305f\u306f\u89aa\u306b\u3057\u304bid\u304c\u3064\u3044\u3066\u3044\u306a\u3044\u5b50\u8981\u7d20\u3092\u9078\u629e\u3059\u308b\u6642\u306bid\u3084class\u4ee5\u5916\u306e\u90e8\u5206\u3067\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u3053\u306e\u3088\u3046\u306b\u65e5\u672c\u8a9e\u306b\u5207\u308a\u66ff\u3048\u306a\u3051\u308c\u3070\u30ed\u30fc\u30ab\u30eb\u3067\u306f\u65e5\u672c\u8a9e\u306e\u3082\u306e\u3092\u3068\u3063\u3066\u304d\u3066\u304f\u308c\u3066\u3044\u3066\u3082\u3001Heroku\u5074\u306e\u65b9\u3067\u306f\u5168\u8a00\u8a9e\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u3068\u3063\u3066\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nid\u304c\u8907\u6570\u3042\u3063\u305f\u5834\u5408\nlang = driver.find_elements_by_id(\"slideshows_lang\")\nlang[1].find_elements_by_tag_name(\"option\")\n# \u8907\u6570\u62bd\u51fa\u3059\u308b\u5834\u5408\u306felement\u304b\u3089elements\u306b\u306a\u308a\u307e\u3059\n\n\u89aa\u306b\u3057\u304bid\u304c\u306a\u3044\u5834\u5408\nlang = driver.find_element_by_id(\"slideshows_lang\")\nlang.find_element_by_tag_name(\"option\")\n\nXPATH\u306e\u66f8\u304d\u65b9\u3084\u4ed6\u306e\u62bd\u51fa\u65b9\u6cd5\u306f\u53c2\u8003\u3092\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u53c2\u8003 : Locating Elements\n\n\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u304d\u308b\u72b6\u614b\u306b\u3059\u308b\ndata = driver.page_source.encode('utf-8') # \u30da\u30fc\u30b8\u5185\u306e\u60c5\u5831\u3092utf-8\u3067\u7528\u610f\u3059\u308b\nsoup = BeautifulSoup(data,\"lxml\") # \u52a0\u5de5\u3057\u3084\u3059\u3044\u3088\u3046\u306blxml\u5f62\u5f0f\u306b\u3059\u308b\n\nwebdriver\u3067\u5165\u624b\u3057\u305fWeb\u30b5\u30a4\u30c8\u306e\u30da\u30fc\u30b8\u30c7\u30fc\u30bf\u3092utf-8\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u5f8c\u3001BeautifulSoup\u3068\u76f8\u6027\u306e\u3044\u3044lxml\u3092\u4f7f\u3063\u3066\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u3057\u6613\u3044\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\nfor\u306e\u4e2d\u306b\u5165\u308c\u3066\u3044\u308b\u306e\u306f\u30da\u30fc\u30b8\u304c\u5909\u308f\u3063\u305f\u6642\u306f\u6bce\u56de\u8aad\u307f\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3067\u3059\u3002\n\n\u30b9\u30af\u30ed\u30fc\u30eb\ndriver.execute_script('window.scrollTo(0, 3000)') # \u30da\u30fc\u30b8\u30e3\u30fc\u306e\u3042\u308b\u4e0b\u306b\u79fb\u52d5\n\n\u3053\u308c\u3067PhantomJS\u3092JavaScript\u3067\u4e0b\u306b3000pixel\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nPhantomJS\u3063\u3066GUI\u306a\u3044\u306a\u3089\u30b9\u30af\u30ed\u30fc\u30eb\u610f\u5473\u306a\u304f\u306d\uff1f\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u305b\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\n3000\u306b\u3057\u3066\u3044\u308b\u7406\u7531\u306f\u4e00\u756a\u4e0b\u306b\u3044\u3063\u3066\u307b\u3057\u304b\u3063\u305f\u306e\u3067\u3068\u308a\u3042\u3048\u305a3000\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u8907\u6570\u5b58\u5728\u3059\u308b\u30af\u30e9\u30b9\u540d\u306e\u4e0b\u306b\u3042\u308bid\u3082class\u3082\u306a\u3044a\u30bf\u30b0\u5bfe\u7b56\nnext = driver.find_element_by_xpath(\"//li[@class='arrow']/a[@rel='next']\") # \u30da\u30fc\u30b8\u30e3\u30fc\u306eNEXT\u8981\u7d20\u3092\u62bd\u51fa\nnext.click() # Next\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\nSlideshare\u306e\u30da\u30fc\u30b8\u30e3\u30fc\u90e8\u5206\u306eNext\u3092\u62bc\u305d\u3046\u3068\u3057\u305f\u6642\u3001 Previous\u3068Next\u3069\u3061\u3089\u306b\u3082class=\"arrow\"\u304c\u3064\u3044\u3066\u3044\u3066\u3001\u305d\u306e\u4e2d\u306ea\u30bf\u30b0\u306b\u306fid\u3082class\u3082\u3064\u3044\u3066\u3044\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5b50\u8981\u7d20\u306ea\u30bf\u30b0\u306b\u306frel=\"next\"\u3068\u66f8\u3044\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u90e8\u5206\u3092\u89aa\u3068rel\u307e\u3067\u542b\u3081\u3066\u6307\u5b9a\u3067\u304d\u308bXPATH\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4f5c\u3063\u305f\u914d\u5217\u3092json\u5f62\u5f0f\u306b\u3059\u308b\njsonstring = json.dumps(data_list,ensure_ascii=False,indent=2) # \u4f5c\u3063\u305f\u8f9e\u66f8\u3092json\u5f62\u5f0f\u306b\u3057\u3066\u51fa\u529b\u3059\u308b\nreturn jsonstring\n\njson.dumps(\u914d\u5217,\u8f9e\u66f8\u30c7\u30fc\u30bf,\u65e5\u672c\u8a9e\u304c\u542b\u307e\u308c\u308b\u5834\u5408False,\u30a4\u30f3\u30c7\u30f3\u30c8\u3067\u6574\u7406)\n\n\u914d\u5217\u3001\u307e\u305f\u306f\u8f9e\u66f8\u3092\u6e21\u3059\u3068json\u5f62\u5f0f\u306b\u3057\u3066\u304f\u308c\u308b\u3002indent\u306f\u7701\u7565\u53ef\u80fd\u3067 indent=2\u3068\u3059\u308b\u3068\u534a\u89d2\u30b9\u30da\u30fc\u30b92\u6587\u5b57\u3067\u30a4\u30f3\u30c7\u30f3\u30c8\u3057\u6574\u7406\u3057\u3066\u898b\u3084\u3059\u3044\u3088\u3046\u306b\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u53c2\u8003 : [Python] JSON\u3092\u6271\u3046\n\n\u52d5\u304d\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u307e\u3067\u306e\u6d41\u308c\n\n\u30ed\u30fc\u30ab\u30eb\u3067Flask\u3092\u7acb\u3061\u4e0a\u3052\u78ba\u8a8d\u3059\u308b\n\u5fc5\u8981\u306a\u3082\u306e\u304c\u5168\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3068\u3057\u307e\u3059\u3002\n\n\u30d5\u30a9\u30eb\u30c0\u3068Flask\u306e\u6e96\u5099\n$ mkdir slide\n$ cd slide\n\n$ touch api.py Procfile\n# flask\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u8a2d\u5b9a\u3092\u66f8\u304f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\n\nFlask\u3092\u7acb\u3061\u4e0a\u3052\u308b\u6642\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\nProcfile\nweb: gunicorn hello:app --log-file=-\n\n\napi.py\n\u4e0a\u8a18\u3092\u53c2\u7167\n\n\n\n\u307e\u305a\u306fFlask\u3067\u52d5\u304d\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\n$ python api.py\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n\nhttp://127.0.0.1:5000/api/python/2\n\u3053\u306e\u30d1\u30b9\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001slideshare\u3067python\u3067\u691c\u7d22\u3057\u305f\u30da\u30fc\u30b8\u30922\u679a\u5206\u3068\u3063\u3066\u304d\u3066\u3082\u3089\u3044\u307e\u3057\u3087\u3046\u3002\n\u7d50\u679c\n\nSafari\u3067\u306fjson\u306f\u7f85\u5217\u3057\u3066\u898b\u3048\u3066\u3044\u307e\u3059\u304c\u3001Chrome\u3067JSONView\u306a\u3069\u3092\u5165\u308c\u3066\u898b\u308b\u3068\u304d\u308c\u3044\u306b\u898b\u308c\u307e\u3059\u3002\n\n\u53c2\u8003\nPython\u3067\u30af\u30ed\u30fc\u30ea\u30f3\u30b0\u30fb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306b\u4f7f\u3048\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3044\u308d\u3044\u308d\n\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u6d41\u308c\u306f\u3001\u5f8c\u7de8\u3067\u3042\u308b\nRe:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301cPhantomJS\u3092Heroku\u3078\u301c\n\u306b\u3066\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3088\u308d\u3057\u304f\u304a\u306d\u304c\u3044\u3057\u307e\u3059\u3002\n\n\u3042\u3068\u304c\u304d\n\u3068\u308a\u3042\u3048\u305a\u57fa\u672c\u7684\u306aSelenium\u3067\u306e\u30d6\u30e9\u30a6\u30b6\u306e\u64cd\u4f5c(\u6587\u5b57\u5165\u529b\u3001submit\u3001\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u30ea\u30b9\u30c8\u306e\u9078\u629e\u3001\u8981\u7d20\u306e\u30af\u30ea\u30c3\u30af\u3001XPATH\u6307\u5b9a)\u3068\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0(\u30c6\u30ad\u30b9\u30c8\u3001\u753b\u50cf\u3001URL\u3001\u6587\u5b57\u5217\u306e\u52a0\u5de5\u3068json\u5316)\n\u306e\u3084\u308a\u65b9\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u305f\u3068\u601d\u3046\u306e\u3067\u3001\u8ab0\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5b09\u3057\u304f\u601d\u3044\u307e\u3059\u3002\n\u6539\u5584\u70b9\u3067\u3057\u305f\u308a\u3001\u9593\u9055\u3044\u7b49\u3054\u3056\u3044\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u6b04\u306a\u3069\u3067\u3054\u6307\u6458\u3057\u3066\u3044\u305f\u3060\u3051\u305f\u3089\u5e78\u3044\u3067\u3059\u3002\nTwitter:@ymgn_ll\n# \u81ea\u5df1\u7d39\u4ecb\n\u3084\u307e\u3054\u3093\u3068\u3044\u3046\u540d\u524d\u3067\u6d3b\u52d5\u3057\u3066\u3044\u308b\u5927\u962a\u60c5\u5831\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u5c02\u9580\u5b66\u6821\u306e3\u5e74\u751f\u3067\u3059\u3002(2016/10/18\u73fe\u5728)\n\n\u95a2\u897f\u306e\u52c9\u5f37\u4f1a\u306a\u3069\u306b\u9854\u3092\u3060\u3059\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u51fa\u4f1a\u3063\u305f\u969b\u306f\u3088\u308d\u3057\u304f\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\u73fe\u5728\u79c1\u306f\u3001IT\u30af\u30ea\u30a8\u30a4\u30c8\u90e8\u3068\u3044\u3046\u30af\u30e9\u30d6\u306b\u6240\u5c5e\u3057\u3066\u304a\u308a\u3001\u305d\u3053\u3067\u306f\u6bce\u5e740\u6cca3\u65e5\u306e\u590f\u5408\u5bbf\u30cf\u30c3\u30ab\u30bd\u30f3\u306a\u3069\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\n\u305d\u306e\u969b\u884c\u3063\u305f\u30cf\u30c3\u30ab\u30bd\u30f3\u306b\u3066\u3001\u521d\u3081\u3066Python\u306eFlask\u3068Heroku\u3092\u4f7f\u3063\u3066\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u305f\u60c5\u5831\u3092json\u3067\u8fd4\u3059API\u3092\u4f5c\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u969b\u306b\u304a\u3053\u306a\u3063\u305f\u65b9\u6cd5\u3092\u307e\u3068\u3081\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nheroku\u3067HelloWorld\u307e\u3067\u306b\u4f7f\u7528\u3059\u308b\u3082\u306e\u3084Python\u306e\u74b0\u5883\u69cb\u7bc9\u306a\u3069\u306f\u524d\u7de8\u306b\u3042\u305f\u308b\n[Re:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301c\u74b0\u5883\u69cb\u7bc9\u3068\u3053\u3093\u306b\u3061\u306f\u4e16\u754c\u301c](http://qiita.com/ymgn_ll/items/96cac1dcf388bc7a8e4e)\n\u306b\u3066\u3001\n\u4eca\u56de\u4f5c\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u307e\u3067\u306f\u5f8c\u7de8\u306b\u3042\u305f\u308b\n[Re:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301cPhantomJS\u3092Heroku\u3078\u301c](http://qiita.com/ymgn_ll/items/585e94a3d2d23ca1fec3)\n\u306b\u3066\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u5408\u308f\u305b\u3066\u3054\u89a7\u304f\u3060\u3055\u3044\n\n# \u4eca\u56de\u3084\u308b\u3053\u3068\n#### \u52c9\u5f37\u306b\u306a\u308c\u3070\u8eca\u8f2a\u306e\u518d\u767a\u660e\u3067\u3082\u3044\u3044\u3058\u3083\u306a\u3044\n\u4eca\u56de\u306fSlideShare\u3092\u984c\u6750\u3068\u3057\u3066\u3001Selenium\u3092\u3068PhantomJS\u3092\u4f7f\u3063\u305f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u3084\u308a\u65b9\u3092\u66f8\u304d\u307e\u3059\u3002\n\n***1\u3064\u306e\u8a18\u4e8b\u306b\u307e\u3068\u3081\u305f\u969b\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u70ba\u3001Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u6d41\u308c\u306f\u5f8c\u7de8\u306b\u5206\u3051\u3066\u3044\u307e\u3059\u3002***\n\n### \u5177\u4f53\u7684\u306a\u52d5\u304d\n[HerokuURL]/api/[\u691c\u7d22\u30ef\u30fc\u30c9]/[\u30da\u30fc\u30b8\u6570]\n\u4f8b : ~herokuapp.com/api/python/2\n\u3068\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\n\n1. Heroku \u3067 PhantomJS \u304c\u52d5\u304d Slideshare\u306e\u691c\u7d22\u30da\u30fc\u30b8\u3092\u958b\u304f\n2. URL\u306e[\u691c\u7d22\u30ef\u30fc\u30c9]\u3092\u691c\u7d22\u30da\u30fc\u30b8\u306e\u691c\u7d22\u6b04\u306b\u5165\u529b\u3057\u691c\u7d22\n3. \u691c\u7d22\u7d50\u679c\u306e\u8a00\u8a9e\u8a2d\u5b9a\u3092\u65e5\u672c\u8a9e\u306b\u5909\u66f4\n4. \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067web\u30da\u30fc\u30b8\u5185\u306e\u30b9\u30e9\u30a4\u30c9\u306e\u60c5\u5831\u3092\u62bd\u51fa\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-17 22.10.28.png](https://qiita-image-store.s3.amazonaws.com/0/93180/28fe5379-2e5f-3309-ac93-652996e26f71.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-17 22.10.28.png\")\n\n\n5. URL\u306e[\u30da\u30fc\u30b8\u6570]\u306e\u6570\u3060\u3051\u4e0b\u306e\u30da\u30fc\u30b8\u30e3\u30fc\u306eNext\u3092\u30af\u30ea\u30c3\u30af\u3057\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u7e70\u308a\u8fd4\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-17 22.22.28.png](https://qiita-image-store.s3.amazonaws.com/0/93180/4166c923-3259-ce08-b1fb-44ed0aee079a.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-17 22.22.28.png\")\n\n6. \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u7d42\u308f\u3063\u305f\u3089json\u5f62\u5f0f\u306b\u3057\u3066\u6295\u3052\u308b\uff01\n\n\u3068\u3044\u3046\u4e8b\u3092\u3059\u308bAPI\u3092\u4f5c\u308a\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u4eca\u56de\u4f7f\u7528\u3057\u305f\u3082\u306e\n+ Mac OSX El Capitan 10.11.6\n+ Python3.5.1\n+ Flask\n+ selenium\n\t+ \u691c\u7d22\u6b04\u306b\u5165\u529b\u3057\u305f\u308a\u6b21\u3078\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3067\u304d\u308b\n+ beautifulsoup4\n\t+ Web\u30c7\u30fc\u30bf\u3092\u62bd\u51fa\u3057\u305f\u308a\u3059\u308b\n+ lxml\n\t+ beautifulsoup\u3068\u30bb\u30c3\u30c8\u3067\u4f7f\u3046\n+ CORS\n\t+ \u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u56de\u907f\n+ Heroku\n\t+ Heroku\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u305f\u30c7\u30fc\u30bf\u3092Json\u5f62\u5f0f\u306b\u3057\u3066\u8fd4\u3059\u3088\u3046\u306b\u3059\u308b\n+ PhantomJS\n\t+ Heroku\u3067selenium\u3092\u4f7f\u3046\u305f\u3081\u306b\u4f7f\u3046\n\t+ \u3044\u308f\u3086\u308bGUI\u304c\u306a\u3044\u88cf\u3067\u52d5\u304f\u30d6\u30e9\u30a6\u30b6\n\n#\u6e96\u5099\n\n## \u4eca\u56de\u3059\u308b\u524d\u306b\u3084\u3063\u3066\u304a\u304f\u74b0\u5883\u69cb\u7bc9\n[Re:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301c\u74b0\u5883\u69cb\u7bc9\u3068\u3053\u3093\u306b\u3061\u306f\u4e16\u754c\u301c](http://qiita.com/ymgn_ll/items/96cac1dcf388bc7a8e4e)\n\u3067HelloWorld\u3092\u3059\u308b\u307e\u3067\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\n ***Flask***\u3068 ***Gunicorn***\u306f\u5165\u308c\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\n\u74b0\u5883\u306a\u3069\u306fpyenv-virtualenv\u306a\u3069\u306e\u304a\u597d\u304d\u306a\u3082\u306e\u3092\u7528\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u4eca\u56de\u3059\u308b\u305f\u3081\u306b\u8ffd\u52a0\u3067\u3059\u308b\u74b0\u5883\u69cb\u7bc9\n### PhantomJS\nHeroku\u3067\u52d5\u304b\u3059\u524d\u306b\u30ed\u30fc\u30ab\u30eb\u3067\u52d5\u4f5c\u78ba\u8a8d\u3092\u3059\u308b\u305f\u3081\u306b\u30ed\u30fc\u30ab\u30eb\u306b\u3082PhantomJS\u3092\u5165\u308c\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u304b\u3089\u64cd\u4f5c\u3067\u304d\u308bGUI\u304c\u306a\u3044\u30d6\u30e9\u30a6\u30b6\u3068\u3044\u3046\u8a8d\u8b58\u3067\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u53c2\u8003 :[PhantomJS\u3092\u4f7f\u3063\u3066\u8272\u3005\u8a66\u3057\u3066\u307f\u308b]( \nhttp://qiita.com/weedslayer/items/5e55f3e5af1f5cebf41f)\n\n```\n$  brew install phantomjs\n```\n###Selenium\n\u30af\u30ed\u30b9\u30d6\u30e9\u30a6\u30b6\u3001\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306eUI\u30c6\u30b9\u30c8\u30c4\u30fc\u30eb\u3001\u3089\u3057\u3044\u3067\u3059\u3002\n\u666e\u901a\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3060\u3068\u6307\u5b9a\u3057\u305fURL\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u5206\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u304c\u3001selenium\u3092\u4f7f\u3046\u3053\u3068\u3067\u6b21\u306e\u30da\u30fc\u30b8\u306b\u884c\u304f\u30dc\u30bf\u30f3\u3092\u62bc\u3055\u305b\u305f\u308a\u3001\u6587\u5b57\u3092\u5165\u529b\u3057\u3066\u691c\u7d22\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3059\u3054\u3044\n\nRuby\u3067\u3059\u304c\u3069\u3046\u3044\u3046\u3082\u306e\u304b\u53c2\u8003\u306b\u306a\u308b\u8a18\u4e8b : \n [Web\u306eUI\u30c6\u30b9\u30c8\u81ea\u52d5\u5316 - Selenium\u3092\u4f7f\u3063\u3066\u307f\u308b](http://qiita.com/edo_m18/items/ba7d8a95818e9c0552d9)\n\n```\n$ pip install selenium\n```\n### beautifulsoup\n\u53d6\u5f97\u3057\u305fWeb\u30da\u30fc\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u52a0\u5de5\u3059\u308b\u6642\u306b\u4f7f\u3044\u307e\u3059\u3002\n\u53c2\u8003 : [Python\u3068Beautiful Soup\u3067\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0](http://qiita.com/itkr/items/513318a9b5b92bd56185)\n\n```\n$ pip install beautifulsoup4\n```\n### lxml\nbeautifulsoup\u3068\u5408\u308f\u305b\u3066\u4f7f\u3044\u307e\u3059\u3002\n\n```\n$ pip install lxml\n```\n### cors\u3067\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u3092\u3088\u3051\u308b\u3084\u3064\n\u666e\u901a\u306bJson\u3092\u8fd4\u3059API\u3092\u4f5c\u3063\u3066\u3082\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u4e91\u3005\u3067\u3001\u5bfe\u7b56\u3092\u884c\u3063\u3066\u3044\u306a\u3044API\u3092Chrome\u3067\u4f7f\u3046\u969b\u306b\u4f7f\u304a\u3046\u3068\u3059\u308b\u3068\u9762\u5012\u306a\u306e\u3067\u3069\u3046\u305b\u306a\u306e\u3067\u5bfe\u7b56\u3092\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u8aac\u660e\u306b\u3066\u30ea\u30f3\u30af\u7f6e\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ pip install -U flask-cors\n```\n\n# \u3067\u304d\u305f\u3082\u306e\nhttps://github.com/ymgn/SlideShare-API\n\n```api.py\n# -*- coding: utf-8 -*-\n\nimport json\n# \u3053\u3053\u304b\u3089\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5fc5\u8981\u5206\nfrom bs4 import BeautifulSoup\n# \u3053\u3053\u304b\u3089selenium\u3067\u30d6\u30e9\u30a6\u30b6\u64cd\u4f5c\u5fc5\u8981\u5206\nfrom selenium import webdriver \nfrom selenium.webdriver.common.keys import Keys # \u6587\u5b57\u3092\u5165\u529b\u3059\u308b\u6642\u306b\u4f7f\u3046\n\n#\u3053\u3053\u304b\u3089flask\u306e\u5fc5\u8981\u5206\nimport os\nfrom flask import Flask\n\n#\u3053\u3053\u304b\u3089flask\u3067cors\u306e\u8a2d\u5b9a ajax\u3092\u4f7f\u3046\u6642\u306e\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u7528\nfrom flask_cors import CORS, cross_origin\napp = Flask(__name__)\nCORS(app)\n\n@app.route('/')\ndef index():\n    return \"\u4f7f\u3044\u65b9 : /api/\u691c\u7d22\u3059\u308b\u5358\u8a9e/\u53d6\u5f97\u30da\u30fc\u30b8\u6570\"\n\n@app.route('/api/<string:word>/<int:page>') # \u691c\u7d22\u30ef\u30fc\u30c9/\u30da\u30fc\u30b8\u6570\u3092\u30d1\u30b9\u304b\u3089\u5909\u6570\u306b\u53d7\u3051\u53d6\u308b\ndef slide(word,page):\n \n    driver = webdriver.PhantomJS() # PhantomJS\u3092\u4f7f\u3046 \n    driver.set_window_size(1124, 850) # PhantomJS\u306e\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\u3059\u308b\n    driver.implicitly_wait(20) # \u6307\u5b9a\u3057\u305f\u8981\u7d20\u306a\u3069\u304c\u306a\u304b\u3063\u305f\u5834\u5408\u51fa\u3066\u304f\u308b\u307e\u3067driver\u304c\u6700\u592720\u79d2\u307e\u3067\u81ea\u52d5\u5f85\u6a5f\u3057\u3066\u304f\u308c\u308b\n\n    URL = \"http://www.slideshare.net/search/\"\n    driver.get(URL) # slideshare\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\n    data_list = [] # \u5168\u30da\u30fc\u30b8\u306e\u30c7\u30fc\u30bf\u3092\u96c6\u3081\u308b\u914d\u5217\n\n    search = driver.find_element_by_id(\"nav-search-query\") # \u691c\u7d22\u6b04\u8981\u7d20\u3092\u53d6\u5f97\n    search.send_keys(word) # \u691c\u7d22\u30ef\u30fc\u30c9\u3092\u5165\u529b\n    search.submit() # \u691c\u7d22\u3092submit\u3059\u308b\n\n    lang = driver.find_element_by_xpath(\"//select[@id='slideshows_lang']/option[@value='ja']\") # \u8a00\u8a9e\u9078\u629e\u30ea\u30b9\u30c8\u306e\u65e5\u672c\u8a9e\u306e\u90e8\u5206\u3092\u62bd\u51fa\n    lang.click() # \u8a00\u8a9e\u9078\u629e\u306e\u65e5\u672c\u8a9e\u3092\u9078\u629e\n\n    for i in range(0,page): \n        print(str(i+1) + u\"\u30da\u30fc\u30b8\u76ee\")\n        data = driver.page_source.encode('utf-8') # \u30da\u30fc\u30b8\u5185\u306e\u60c5\u5831\u3092utf-8\u3067\u7528\u610f\u3059\u308b\n        soup = BeautifulSoup(data,\"lxml\") # \u52a0\u5de5\u3057\u3084\u3059\u3044\u3088\u3046\u306blxml\u5f62\u5f0f\u306b\u3059\u308b\n        slide_list = soup.find_all(\"div\",class_=\"thumbnail-content\") # \u30b9\u30e9\u30a4\u30c9\u5358\u4f4d\u3067\u62bd\u51fa\n        for slide in slide_list:\n            slide_in = {} # \u30b9\u30e9\u30a4\u30c9\u306e\u60c5\u5831\u3092\u8f9e\u66f8\u5f62\u5f0f\u3067\u307e\u3068\u3081\u308b\n            \n            # \u30b9\u30e9\u30a4\u30c9\u306e\u6295\u7a3f\u8005\u306e\u540d\u524d\u3092\u5165\u624b\n            name = slide.find(\"div\",class_=\"author\").text\n            slide_in[\"name\"] = name.strip() # strip()\u306f\u4e21\u7aef\u306e\u7a7a\u767d\u3068\u6539\u884c\u3092\u306a\u304f\u3057\u3066\u304f\u308c\u308b\n            \n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u624b\n            title = slide.find(\"a\",class_=\"title title-link antialiased j-slideshow-title\").get(\"title\") # \u6307\u5b9a\u3057\u305f\u30bf\u30b0&\u30af\u30e9\u30b9\u5185\u306etitle\u3092\u51fa\u3059\n            slide_in[\"title\"] = title\n\n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30ea\u30f3\u30af\u3092\u5165\u624b\n            link = slide.find(\"a\",class_=\"title title-link antialiased j-slideshow-title\").get(\"href\") # \u6307\u5b9a\u3057\u305f\u30bf\u30b0&\u30af\u30e9\u30b9\u5185\u306ehref\u3092\u51fa\u3059\n            slide_in[\"link\"] = \"http://www.slideshare.net\" + link\n            \n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30b5\u30e0\u30cd\u306e\u30ea\u30f3\u30af\u3092\u5165\u624b\n            imagetag = slide.find(\"a\",class_=\"link-bg-img\").get(\"style\") # \u6307\u5b9a\u3057\u305f\u30bf\u30b0&\u30af\u30e9\u30b9\u5185\u306estyle\u3092\u51fa\u3059\n            image = imagetag[imagetag.find(\"url(\")+4:imagetag.find(\");\")] # \u3044\u3089\u306a\u3044\u90e8\u5206\u3092\u53d6\u308a\u9664\u304f\n            slide_in[\"image\"] = image\n            \n            # \u30b9\u30e9\u30a4\u30c9\u306e\u30da\u30fc\u30b8\u6570\u3067\u3042\u308bslides\u3068likes\u3092\u5165\u624b\n            info = slide.find(\"div\",class_=\"small-info\").string # slides\u3068likes\u306e\u6587\u5b57\u5217\u3092\u5165\u624b\n            slides = info[7:info.find(\"slides\")] # slides\u90e8\u5206\u3092\u62bd\u51fa\n            slide_in[\"slides\"] = slides.strip() # strip()\u306f\u4e21\u7aef\u306e\u7a7a\u767d\u3068\u6539\u884c\u3092\u306a\u304f\u3057\u3066\u304f\u308c\u308b\n            if \"likes\" in info:\n                likes = info[info.find(\", \")+2:info.find(\"likes\")] # likes\u90e8\u5206\u3092\u62bd\u51fa\n            else:\n                likes = \"0\"\n            slide_in[\"likes\"] = likes.strip() # strip()\u306f\u4e21\u7aef\u306e\u7a7a\u767d\u3068\u6539\u884c\u3092\u306a\u304f\u3057\u3066\u304f\u308c\u308b\n\n            data_list.append(slide_in) # data_list\u306b1\u30da\u30fc\u30b8\u5206\u306e\u5185\u5bb9\u3092\u307e\u3068\u3081\u308b\n\n        driver.execute_script('window.scrollTo(0, 3000)') # \u30da\u30fc\u30b8\u30e3\u30fc\u306e\u3042\u308b\u4e0b\u306b\u79fb\u52d5\n        next = driver.find_element_by_xpath(\"//li[@class='arrow']/a[@rel='next']\") # \u30da\u30fc\u30b8\u30e3\u30fc\u306eNEXT\u8981\u7d20\u3092\u62bd\u51fa\n        next.click() # Next\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n\n    driver.close() # \u30d6\u30e9\u30a6\u30b6\u64cd\u4f5c\u3092\u7d42\u308f\u3089\u305b\u308b\n    jsonstring = json.dumps(data_list,ensure_ascii=False,indent=2) # \u4f5c\u3063\u305f\u914d\u5217\u3092json\u5f62\u5f0f\u306b\u3057\u3066\u51fa\u529b\u3059\u308b\n    return jsonstring\n \n# bash\u3067\u53e9\u3044\u305f\u304bimport\u3067\u5165\u308c\u305f\u304b\u3092\u5224\u5b9a\u3059\u308b\nif __name__ == '__main__':\n    app.run()\n```\n\n## \u30b3\u30fc\u30c9\u89e3\u8aac\n\u30b3\u30fc\u30c9\u5185\u306b\u3082\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u304c\u3001\u4e0a\u304b\u3089\u5927\u4e8b\u305d\u3046\u306a\u7b87\u6240\u3092\u8aac\u660e\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u30a4\u30f3\u30dd\u30fc\u30c8\u306f\u66f8\u3044\u3066\u3044\u308b\u305d\u306e\u307e\u307e\u306a\u306e\u3067\u7701\u7565\n### CORS\nChrome\u306a\u3069\u3067API\u3092\u4f7f\u7528\u3057\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u52d5\u304b\u306a\u3044\uff01\u3068\u3044\u3046\u7d4c\u9a13\u306f\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305b\u3063\u304b\u304fAPI\u3092\u4f5c\u6210\u3059\u308b\u306e\u3067\u3059\u304b\u3089\u3001\u5bfe\u7b56\u3092\u3057\u3066\u304a\u3044\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\n\n```\nfrom flask_cors import CORS, cross_origin\n\napp = Flask(__name__)\nCORS(app)\n```\n\u3068\u66f8\u304f\u3068\u306a\u3093\u3084\u304b\u3093\u3084\u3067\u5bfe\u7b56\u3057\u3066\u304f\u308c\u308b\u305d\u3046\u3067\u3059\u3002\u3079\u3093\u308a\n\u53c2\u8003 : https://flask-cors.readthedocs.io/en/latest/\n\n### Flask\u306e\u30d1\u30b9\u304b\u3089\u5f15\u6570\u3092\u53d6\u308b\nFlask\u306eroute\u306e\u3068\u3053\u308d\u306b<\u578b\u540d:\u5909\u6570\u540d>\u3068\u66f8\u3044\u3066\u3001def\u306e\uff08\uff09\u5185\u306b\u305d\u306e\u5909\u6570\u540d\u3092\u66f8\u304f\u3068\u30d1\u30b9\u306e\u4e2d\u8eab\u3092\u5f15\u6570\u3068\u3057\u3066\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n@app.route('/api/<string:word>/<int:page>') # \u691c\u7d22\u30ef\u30fc\u30c9/\u30da\u30fc\u30b8\u6570\u3092\u30d1\u30b9\u304b\u3089\u5909\u6570\u306b\u53d7\u3051\u53d6\u308b  \ndef slide(word,page):\n```\n\u53c2\u8003 : [Flask \u3092\u4f7f\u3044\u3053\u306a\u305d\u3046](http://methane.github.io/flask-handson/advanced.html)\n### PhantomJS\u306e\u30d6\u30e9\u30a6\u30b6\u30b5\u30a4\u30ba\u3092\u6c7a\u3081\u308b\n```\ndriver.set_window_size(1124, 850)\n```\n\u30d6\u30e9\u30a6\u30b6\u30b5\u30a4\u30ba\u3092\u6c7a\u3081\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u3046\u307e\u304f\u8981\u7d20\u3092\u3068\u3063\u305f\u308a\u3001\u30b9\u30af\u30ed\u30fc\u30eb\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\u30b5\u30a4\u30ba\u306e\u6570\u5024\u306e\u5024\u306f\u8abf\u3079\u305f\u6642\u306b\u66f8\u3044\u3066\u3042\u3063\u305f\u307e\u307e\u306a\u306e\u3067\u7406\u7531\u306f\u4e0d\u660e\u3002\n\n### \u8981\u7d20\u306e\u8aad\u307f\u8fbc\u307f\u5f85\u3061\u51e6\u7406\n```\ndriver.implicitly_wait(20)\n```\n\u3053\u3046\u66f8\u304f\u3053\u3068\u3067\u3001\u4ee5\u964d\u306e```driver.find~~```\u306eID\u3084class\u3092\u6307\u5b9a\u3057\u3066\u8981\u7d20\u3092\u53d6\u5f97&\u64cd\u4f5c\u3059\u308b\u969b\u306b\u6700\u592710\u79d2\u9593\u5f85\u3063\u3066\u304f\u308c\u3001\u8aad\u307f\u8fbc\u307f\u304c\u5b8c\u4e86\u3057\u3066\u304f\u308c\u305f\u3089\u5373\u5b9f\u884c\u3057\u3066\u304f\u308c\u308b\u4fbf\u5229\u306a\u72b6\u614b\u306b\u306a\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\u3044\u3061\u3044\u3061\u660e\u793a\u7684\u306b```time.sleep(3)```\u306a\u3069\u3068\u4e88\u60f3\u5f85\u6a5f\u6642\u9593\u3092\u304b\u304b\u306a\u304f\u3066\u826f\u3044\u306e\u3067selenium\u3067\u64cd\u4f5c\u3059\u308b\u969b\u3059\u3054\u304f\u4fbf\u5229\u3067\u3059\u3002\n\u53c2\u8003 : [\u3053\u306e\u30b5\u30a4\u30c8\u306eImplicit Waits\u306e\u7b87\u6240\u306b\u66f8\u304b\u308c\u3066\u3044\u307e\u3059](http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp)\n\n### \u30c6\u30ad\u30b9\u30c8\u3092\u30d5\u30a9\u30fc\u30e0\u306e\u30dc\u30c3\u30af\u30b9\u306b\u5165\u529b\u3057submit\n```\nsearch = driver.find_element_by_id(\"nav-search-query\") # \u691c\u7d22\u6b04\u8981\u7d20\u3092\u53d6\u5f97\nsearch.send_keys(word) # \u691c\u7d22\u30ef\u30fc\u30c9\u3092\u5165\u529b\nsearch.submit() # \u691c\u7d22\u3092submit\u3059\u308b\n```\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089id\u3067input\u8981\u7d20\u306a\u3069\u3092\u53d6\u5f97\u3057\u305f\u5f8c\u306f\u3001```send_keys(\"hoge\")```\u306a\u3069\u3067\u5024\u3092\u5165\u308c\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305d\u306e\u8981\u7d20\u304cform\u306e\u4e2d\u3067\u3042\u308c\u3070\u3001```.submit()```\u3092\u3064\u3051\u308b\u3053\u3068\u3067\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n### \u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u3092\u9078\u629e\u3059\u308b\n```\nlang = driver.find_element_by_xpath(\"//select[@id='slideshows_lang']/option[@value='ja']\") # \u8a00\u8a9e\u9078\u629e\u30ea\u30b9\u30c8\u306e\u65e5\u672c\u8a9e\u306e\u90e8\u5206\u3092\u62bd\u51fa\nlang.click() # \u8a00\u8a9e\u9078\u629e\u306e\u65e5\u672c\u8a9e\u3092\u9078\u629e\n```\n\u4eca\u56de\u306f\u8981\u7d20\u306e\u6307\u5b9a\u65b9\u6cd5\u3092id\u3084class\u3067\u306f\u306a\u304fXPATH\u3067\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u7406\u7531\u3068\u3057\u3066\u306f\u3001id\u304c\u8907\u6570\u3001\u307e\u305f\u306f\u89aa\u306b\u3057\u304bid\u304c\u3064\u3044\u3066\u3044\u306a\u3044\u5b50\u8981\u7d20\u3092\u9078\u629e\u3059\u308b\u6642\u306bid\u3084class\u4ee5\u5916\u306e\u90e8\u5206\u3067\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u304b\u3089\u3067\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u3053\u306e\u3088\u3046\u306b\u65e5\u672c\u8a9e\u306b\u5207\u308a\u66ff\u3048\u306a\u3051\u308c\u3070\u30ed\u30fc\u30ab\u30eb\u3067\u306f\u65e5\u672c\u8a9e\u306e\u3082\u306e\u3092\u3068\u3063\u3066\u304d\u3066\u304f\u308c\u3066\u3044\u3066\u3082\u3001Heroku\u5074\u306e\u65b9\u3067\u306f\u5168\u8a00\u8a9e\u306e\u30b9\u30e9\u30a4\u30c9\u3092\u3068\u3063\u3066\u304d\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\nid\u304c\u8907\u6570\u3042\u3063\u305f\u5834\u5408\n\n```\nlang = driver.find_elements_by_id(\"slideshows_lang\")\nlang[1].find_elements_by_tag_name(\"option\")\n# \u8907\u6570\u62bd\u51fa\u3059\u308b\u5834\u5408\u306felement\u304b\u3089elements\u306b\u306a\u308a\u307e\u3059\n```\n\u89aa\u306b\u3057\u304bid\u304c\u306a\u3044\u5834\u5408\n\n```\nlang = driver.find_element_by_id(\"slideshows_lang\")\nlang.find_element_by_tag_name(\"option\")\n```\nXPATH\u306e\u66f8\u304d\u65b9\u3084\u4ed6\u306e\u62bd\u51fa\u65b9\u6cd5\u306f\u53c2\u8003\u3092\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\u53c2\u8003 : [Locating Elements](http://selenium-python.readthedocs.io/locating-elements.html)\n### \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u304d\u308b\u72b6\u614b\u306b\u3059\u308b\n```\ndata = driver.page_source.encode('utf-8') # \u30da\u30fc\u30b8\u5185\u306e\u60c5\u5831\u3092utf-8\u3067\u7528\u610f\u3059\u308b\nsoup = BeautifulSoup(data,\"lxml\") # \u52a0\u5de5\u3057\u3084\u3059\u3044\u3088\u3046\u306blxml\u5f62\u5f0f\u306b\u3059\u308b\n```\nwebdriver\u3067\u5165\u624b\u3057\u305fWeb\u30b5\u30a4\u30c8\u306e\u30da\u30fc\u30b8\u30c7\u30fc\u30bf\u3092utf-8\u3067\u30a8\u30f3\u30b3\u30fc\u30c9\u3057\u305f\u5f8c\u3001BeautifulSoup\u3068\u76f8\u6027\u306e\u3044\u3044lxml\u3092\u4f7f\u3063\u3066\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u3057\u6613\u3044\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\nfor\u306e\u4e2d\u306b\u5165\u308c\u3066\u3044\u308b\u306e\u306f\u30da\u30fc\u30b8\u304c\u5909\u308f\u3063\u305f\u6642\u306f\u6bce\u56de\u8aad\u307f\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081\u3067\u3059\u3002\n### \u30b9\u30af\u30ed\u30fc\u30eb\n```\ndriver.execute_script('window.scrollTo(0, 3000)') # \u30da\u30fc\u30b8\u30e3\u30fc\u306e\u3042\u308b\u4e0b\u306b\u79fb\u52d5\n```\n\u3053\u308c\u3067PhantomJS\u3092JavaScript\u3067\u4e0b\u306b3000pixel\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nPhantomJS\u3063\u3066GUI\u306a\u3044\u306a\u3089\u30b9\u30af\u30ed\u30fc\u30eb\u610f\u5473\u306a\u304f\u306d\uff1f\u3068\u601d\u3046\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u30b9\u30af\u30ed\u30fc\u30eb\u3055\u305b\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\n3000\u306b\u3057\u3066\u3044\u308b\u7406\u7531\u306f\u4e00\u756a\u4e0b\u306b\u3044\u3063\u3066\u307b\u3057\u304b\u3063\u305f\u306e\u3067\u3068\u308a\u3042\u3048\u305a3000\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n### \u8907\u6570\u5b58\u5728\u3059\u308b\u30af\u30e9\u30b9\u540d\u306e\u4e0b\u306b\u3042\u308bid\u3082class\u3082\u306a\u3044a\u30bf\u30b0\u5bfe\u7b56\n```\nnext = driver.find_element_by_xpath(\"//li[@class='arrow']/a[@rel='next']\") # \u30da\u30fc\u30b8\u30e3\u30fc\u306eNEXT\u8981\u7d20\u3092\u62bd\u51fa\nnext.click() # Next\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\n```\nSlideshare\u306e\u30da\u30fc\u30b8\u30e3\u30fc\u90e8\u5206\u306eNext\u3092\u62bc\u305d\u3046\u3068\u3057\u305f\u6642\u3001 Previous\u3068Next\u3069\u3061\u3089\u306b\u3082```class=\"arrow\"```\u304c\u3064\u3044\u3066\u3044\u3066\u3001\u305d\u306e\u4e2d\u306ea\u30bf\u30b0\u306b\u306fid\u3082class\u3082\u3064\u3044\u3066\u3044\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5b50\u8981\u7d20\u306ea\u30bf\u30b0\u306b\u306f```rel=\"next\"```\u3068\u66f8\u3044\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u306e\u90e8\u5206\u3092\u89aa\u3068rel\u307e\u3067\u542b\u3081\u3066\u6307\u5b9a\u3067\u304d\u308bXPATH\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n### \u4f5c\u3063\u305f\u914d\u5217\u3092json\u5f62\u5f0f\u306b\u3059\u308b\n```\njsonstring = json.dumps(data_list,ensure_ascii=False,indent=2) # \u4f5c\u3063\u305f\u8f9e\u66f8\u3092json\u5f62\u5f0f\u306b\u3057\u3066\u51fa\u529b\u3059\u308b\nreturn jsonstring\n```\n```\njson.dumps(\u914d\u5217,\u8f9e\u66f8\u30c7\u30fc\u30bf,\u65e5\u672c\u8a9e\u304c\u542b\u307e\u308c\u308b\u5834\u5408False,\u30a4\u30f3\u30c7\u30f3\u30c8\u3067\u6574\u7406)\n```\n\u914d\u5217\u3001\u307e\u305f\u306f\u8f9e\u66f8\u3092\u6e21\u3059\u3068json\u5f62\u5f0f\u306b\u3057\u3066\u304f\u308c\u308b\u3002indent\u306f\u7701\u7565\u53ef\u80fd\u3067 ```indent=2```\u3068\u3059\u308b\u3068\u534a\u89d2\u30b9\u30da\u30fc\u30b92\u6587\u5b57\u3067\u30a4\u30f3\u30c7\u30f3\u30c8\u3057\u6574\u7406\u3057\u3066\u898b\u3084\u3059\u3044\u3088\u3046\u306b\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u53c2\u8003 : [[Python] JSON\u3092\u6271\u3046](http://www.yoheim.net/blog.php?q=20150901)\n# \u52d5\u304d\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u307e\u3067\u306e\u6d41\u308c\n## \u30ed\u30fc\u30ab\u30eb\u3067Flask\u3092\u7acb\u3061\u4e0a\u3052\u78ba\u8a8d\u3059\u308b\n\u5fc5\u8981\u306a\u3082\u306e\u304c\u5168\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3068\u3057\u307e\u3059\u3002\n\n### \u30d5\u30a9\u30eb\u30c0\u3068Flask\u306e\u6e96\u5099\n```\n$ mkdir slide\n$ cd slide\n\n$ touch api.py Procfile\n# flask\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u8a2d\u5b9a\u3092\u66f8\u304f\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n```\n\n### Flask\u3092\u7acb\u3061\u4e0a\u3052\u308b\u6642\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\nProcfile\n\n```\nweb: gunicorn hello:app --log-file=-\n```\n```api.py\n\u4e0a\u8a18\u3092\u53c2\u7167\n```\n#### \u307e\u305a\u306fFlask\u3067\u52d5\u304d\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\n```\n$ python api.py\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n``` \nhttp://127.0.0.1:5000/api/python/2\n\u3053\u306e\u30d1\u30b9\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001slideshare\u3067python\u3067\u691c\u7d22\u3057\u305f\u30da\u30fc\u30b8\u30922\u679a\u5206\u3068\u3063\u3066\u304d\u3066\u3082\u3089\u3044\u307e\u3057\u3087\u3046\u3002\n\u7d50\u679c\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-16 17.52.34.png](https://qiita-image-store.s3.amazonaws.com/0/93180/d3d5a974-38ba-d667-0557-0d22a257a73a.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-10-16 17.52.34.png\")\nSafari\u3067\u306fjson\u306f\u7f85\u5217\u3057\u3066\u898b\u3048\u3066\u3044\u307e\u3059\u304c\u3001Chrome\u3067JSONView\u306a\u3069\u3092\u5165\u308c\u3066\u898b\u308b\u3068\u304d\u308c\u3044\u306b\u898b\u308c\u307e\u3059\u3002\n\n## \u53c2\u8003\n[Python\u3067\u30af\u30ed\u30fc\u30ea\u30f3\u30b0\u30fb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306b\u4f7f\u3048\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3044\u308d\u3044\u308d](http://orangain.hatenablog.com/entry/scraping-in-python)\n\n#Heroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\nHeroku\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u6d41\u308c\u306f\u3001\u5f8c\u7de8\u3067\u3042\u308b\n[Re:\u30bc\u30ed\u304b\u3089Flask\u3067\u59cb\u3081\u308bHeroku\u751f\u6d3b \u301cPhantomJS\u3092Heroku\u3078\u301c](http://qiita.com/ymgn_ll/items/585e94a3d2d23ca1fec3)\n\u306b\u3066\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3088\u308d\u3057\u304f\u304a\u306d\u304c\u3044\u3057\u307e\u3059\u3002\n\n## \u3042\u3068\u304c\u304d\n\u3068\u308a\u3042\u3048\u305a\u57fa\u672c\u7684\u306aSelenium\u3067\u306e\u30d6\u30e9\u30a6\u30b6\u306e\u64cd\u4f5c(\u6587\u5b57\u5165\u529b\u3001submit\u3001\u30c9\u30ed\u30c3\u30d7\u30c0\u30a6\u30f3\u30ea\u30b9\u30c8\u306e\u9078\u629e\u3001\u8981\u7d20\u306e\u30af\u30ea\u30c3\u30af\u3001XPATH\u6307\u5b9a)\u3068\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0(\u30c6\u30ad\u30b9\u30c8\u3001\u753b\u50cf\u3001URL\u3001\u6587\u5b57\u5217\u306e\u52a0\u5de5\u3068json\u5316)\n\u306e\u3084\u308a\u65b9\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u305f\u3068\u601d\u3046\u306e\u3067\u3001\u8ab0\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5b09\u3057\u304f\u601d\u3044\u307e\u3059\u3002\n\n\u6539\u5584\u70b9\u3067\u3057\u305f\u308a\u3001\u9593\u9055\u3044\u7b49\u3054\u3056\u3044\u307e\u3057\u305f\u3089\u30b3\u30e1\u30f3\u30c8\u6b04\u306a\u3069\u3067\u3054\u6307\u6458\u3057\u3066\u3044\u305f\u3060\u3051\u305f\u3089\u5e78\u3044\u3067\u3059\u3002\nTwitter:@ymgn_ll\n"}