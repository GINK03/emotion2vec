{"context": " More than 1 year has passed since last update.Django\u306e\u8a00\u8a9e\u30d5\u30a1\u30a4\u30eb\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3057\u3084\u3059\u3044\u30bf\u30d6\u533a\u5207\u308a\u30c6\u30ad\u30b9\u30c8\u3068\u76f8\u4e92\u5909\u63db\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3002\u53c2\u7167\u5143\u306fStackoverflow\u306e\u30b9\u30ec\u30c3\u30c9\u3002\nIs there any program to edit multiple po files?\n\u53c2\u7167\u5143\u306e\u30b3\u30fc\u30c9\u306eCSV\u3092TSV\u306b\u5909\u66f4\u3057\u3001TSV\u304b\u3089PO\u3092\u66f4\u65b0\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8ffd\u52a0\u3002\nTSV\u304b\u3089PO\u306e\u5909\u63db\u306f\u3001PO\u30d5\u30a1\u30a4\u30eb\u306b\u5b58\u5728\u3059\u308bmsgid\u306e\u307f\u4e0a\u66f8\u304d\u3059\u308b\u306e\u3067\u3001PO\u3068TSV\u3067\u8981\u7d20\u304c\u63c3\u3063\u3066\u3044\u306a\u3044\u3068\u66f4\u65b0\u3055\u308c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u306e\u3067\u6ce8\u610f\u3002\n\nPython\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nbash\n\npip install polib unicodecsv\n\n\n\n\nPO\u304b\u3089TSV\u306b\u5909\u63db\n\ni18n_po2tsv.py\n\nimport sys\nimport unicodecsv as csv\nfrom collections import OrderedDict\nimport polib\n\n#\n# Set default encoding\n#\nreload(sys)\nsys.setdefaultencoding('utf8')\n\n#\n# Params\n#\ntsv_path = 'locale/localization.tsv'\npo_paths = 'locale/{}/LC_MESSAGES/django.po'\nlangs = ['en', 'ja',]\n\n#\n# Convert po file to tsv\n#\nrows = OrderedDict()\n\nprint('')\n\nfor lang_code in langs:\n    po_path = po_paths.format(lang_code)\n\n    print('Reading po file... ' + po_path)\n\n    po = polib.pofile(\n        po_path,\n        encoding='utf-8',\n    )\n\n    for entry in po:\n        msgid = entry.msgid.encode('utf-8')\n        msgstr = entry.msgstr.encode('utf-8')\n\n        if msgid in rows.keys():\n            rows[msgid].append(msgstr)\n        else:\n            rows[msgid] = [msgid, msgstr]\n\nprint('Saving tsv file... ' + tsv_path)\nprint('')\n\nwith open(tsv_path, 'wb') as f:\n    writer = csv.writer(f, csv.excel_tab)\n    writer.writerows(rows.values())\n\nprint('All done!')\nprint('')\n\n\n\n\nTSV\u304b\u3089PO\u306b\u5909\u63db\n\ni18n_tsv2po.py\n\nimport sys\nimport unicodecsv as csv\nimport codecs\nimport polib\n\n#\n# Set system encoding\n#\nreload(sys)\nsys.setdefaultencoding('utf8')\n\n#\n# Params\n#\ntsv_path = 'locale/localization.tsv'\npo_paths = 'locale/{}/LC_MESSAGES/django.po'\n\n#\n# Read tsv file\n#\nlangs = {\n    'en': {},\n    'ja': {},\n}\n\nprint('')\nprint('Reading tsv file... ' + tsv_path)\n\nwith open(tsv_path, 'rb') as tsv_in:\n    tsv_in = csv.reader(tsv_in, delimiter='\\t')\n    # next(tsv_in, None)\n    for row in tsv_in:\n        if row[1]:\n            langs['en'][row[0]] = row[1].encode('utf-8')\n        if row[2]:\n            langs['ja'][row[0]] = row[2].encode('utf-8')\n\n#\n# Read and save po file\n#\nprint('')\n\nfor key, value in langs.iteritems():\n    lang_code = key\n    po_path = po_paths.format(lang_code)\n    po = polib.pofile(\n        po_path,\n        encoding='utf-8',\n    )\n\n    print('Reading po file... ' + po_path)\n\n    lang = langs[lang_code]\n    for entry in po:\n        msgid = entry.msgid.encode('utf-8')\n        if lang.has_key(msgid):\n            msgstr = lang.get(msgid, '').encode('utf-8')\n            entry.msgstr = msgstr\n\n    print('Saving po file... ' + po_path)\n\n    po.save()\n\n    print('Done!')\n    print('')\n\nprint('All done!')\nprint('')\n\n\n\n\nDjango\u306e\u8a00\u8a9e\u30d5\u30a1\u30a4\u30eb\u3092\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3057\u3084\u3059\u3044\u30bf\u30d6\u533a\u5207\u308a\u30c6\u30ad\u30b9\u30c8\u3068\u76f8\u4e92\u5909\u63db\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3002\u53c2\u7167\u5143\u306fStackoverflow\u306e\u30b9\u30ec\u30c3\u30c9\u3002\n[Is there any program to edit multiple po files?](http://stackoverflow.com/questions/28774771/is-there-any-program-to-edit-multiple-po-files)\n\u53c2\u7167\u5143\u306e\u30b3\u30fc\u30c9\u306eCSV\u3092TSV\u306b\u5909\u66f4\u3057\u3001TSV\u304b\u3089PO\u3092\u66f4\u65b0\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8ffd\u52a0\u3002\nTSV\u304b\u3089PO\u306e\u5909\u63db\u306f\u3001PO\u30d5\u30a1\u30a4\u30eb\u306b\u5b58\u5728\u3059\u308bmsgid\u306e\u307f\u4e0a\u66f8\u304d\u3059\u308b\u306e\u3067\u3001PO\u3068TSV\u3067\u8981\u7d20\u304c\u63c3\u3063\u3066\u3044\u306a\u3044\u3068\u66f4\u65b0\u3055\u308c\u306a\u3044\u30b1\u30fc\u30b9\u304c\u3042\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n### Python\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:bash\n\npip install polib unicodecsv\n\n```\n\n### PO\u304b\u3089TSV\u306b\u5909\u63db\n\n```py:i18n_po2tsv.py\n\nimport sys\nimport unicodecsv as csv\nfrom collections import OrderedDict\nimport polib\n\n#\n# Set default encoding\n#\nreload(sys)\nsys.setdefaultencoding('utf8')\n\n#\n# Params\n#\ntsv_path = 'locale/localization.tsv'\npo_paths = 'locale/{}/LC_MESSAGES/django.po'\nlangs = ['en', 'ja',]\n\n#\n# Convert po file to tsv\n#\nrows = OrderedDict()\n\nprint('')\n\nfor lang_code in langs:\n    po_path = po_paths.format(lang_code)\n\n    print('Reading po file... ' + po_path)\n\n    po = polib.pofile(\n        po_path,\n        encoding='utf-8',\n    )\n\n    for entry in po:\n        msgid = entry.msgid.encode('utf-8')\n        msgstr = entry.msgstr.encode('utf-8')\n\n        if msgid in rows.keys():\n            rows[msgid].append(msgstr)\n        else:\n            rows[msgid] = [msgid, msgstr]\n\nprint('Saving tsv file... ' + tsv_path)\nprint('')\n\nwith open(tsv_path, 'wb') as f:\n    writer = csv.writer(f, csv.excel_tab)\n    writer.writerows(rows.values())\n\nprint('All done!')\nprint('')\n\n```\n\n\n\n\n\n\n### TSV\u304b\u3089PO\u306b\u5909\u63db\n\n```py:i18n_tsv2po.py\n\nimport sys\nimport unicodecsv as csv\nimport codecs\nimport polib\n\n#\n# Set system encoding\n#\nreload(sys)\nsys.setdefaultencoding('utf8')\n\n#\n# Params\n#\ntsv_path = 'locale/localization.tsv'\npo_paths = 'locale/{}/LC_MESSAGES/django.po'\n\n#\n# Read tsv file\n#\nlangs = {\n    'en': {},\n    'ja': {},\n}\n\nprint('')\nprint('Reading tsv file... ' + tsv_path)\n\nwith open(tsv_path, 'rb') as tsv_in:\n    tsv_in = csv.reader(tsv_in, delimiter='\\t')\n    # next(tsv_in, None)\n    for row in tsv_in:\n        if row[1]:\n            langs['en'][row[0]] = row[1].encode('utf-8')\n        if row[2]:\n            langs['ja'][row[0]] = row[2].encode('utf-8')\n\n#\n# Read and save po file\n#\nprint('')\n\nfor key, value in langs.iteritems():\n    lang_code = key\n    po_path = po_paths.format(lang_code)\n    po = polib.pofile(\n        po_path,\n        encoding='utf-8',\n    )\n\n    print('Reading po file... ' + po_path)\n\n    lang = langs[lang_code]\n    for entry in po:\n        msgid = entry.msgid.encode('utf-8')\n        if lang.has_key(msgid):\n            msgstr = lang.get(msgid, '').encode('utf-8')\n            entry.msgstr = msgstr\n            \n    print('Saving po file... ' + po_path)\n\n    po.save()\n\n    print('Done!')\n    print('')\n\nprint('All done!')\nprint('')\n\n```\n", "tags": ["Django", "Python"]}