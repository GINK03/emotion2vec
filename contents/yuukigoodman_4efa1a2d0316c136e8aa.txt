{"context": " More than 1 year has passed since last update.\u307f\u3093\u306a\u3067\u3084\u308bRiak Advent Calendar 3\u65e5\u76ee\u3002\u4eca\u306e\u3068\u3053\u308d\u306f\u50d5\u3072\u3068\u308a\u3002\n\u3067\u3082Riak\u306f\u4e00\u4eba\u307c\u3063\u3061\u3058\u3083\u306a\u3044\u3002\u8907\u6570\u53f0\u3067\u9023\u643a\u3057\u3066\u521d\u3081\u3066\u771f\u4fa1\u3092\u767a\u63ee\u3059\u308b\u3002\n\u305d\u3093\u306a\u8a71\u3002\n\n\u8907\u6570\u306eRiak\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u958b\u767a\u74b0\u5883\u3067\u306f\u3001\u4e00\u53f0\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306bRiak\u30ce\u30fc\u30c9\u3092\u8907\u6570\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u9023\u643a\u3092\u8a66\u3059\u3053\u3068\u304c\u53ef\u80fd\u3060\u3002\nmake\u3060\u3068rel\u4ee5\u4e0b\u306b\u30d0\u30a4\u30ca\u30ea\u304c\u751f\u6210\u3055\u308c\u308b\u304c\u3001make devrel\u3060\u3068dev\u4ee5\u4e0b\u306b5\u53f0\u5206\u306e\u30d0\u30a4\u30ca\u30ea\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n[vagrant@localhost riak]$ pwd\n/home/vagrant/riak\n\n[vagrant@localhost riak]$ make devrel\n\uff08\u7701\u7565\uff09\n\n[vagrant@localhost riak]$ ls dev/\ndev1  dev2  dev3  dev4  dev5\n\n\u3053\u308c\u3089\u306e\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3057\u3001\u30af\u30e9\u30b9\u30bf\u306b\u6240\u5c5e\u3055\u305b\u308b\u3002\n[vagrant@localhost riak]$ find dev/dev*/bin/riak -exec {} start \\;\n\n[vagrant@localhost riak]$ find dev/dev*/bin/riak -exec {} ping \\;\npong\npong\npong\npong\npong\n\n[vagrant@localhost riak]$ find dev/dev[2-5]/bin/riak-admin -exec {} cluster join dev1@127.0.0.1 \\;\nSuccess: staged join request for 'dev2@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev3@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev4@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev5@127.0.0.1' to 'dev1@127.0.0.1'\n\n\u30af\u30e9\u30b9\u30bf\u306bjoin\u3055\u305b\u305f\u5f8c\u3001plan\u3068commit\u3092\u884c\u3046\u3053\u3068\u3067\u7a3c\u50cd\u304c\u59cb\u307e\u308b\u3002\n[vagrant@localhost riak]$ find dev/dev[2-5]/bin/riak-admin -exec {} cluster join dev1@127.0.0.1 \\;\nSuccess: staged join request for 'dev2@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev3@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev4@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev5@127.0.0.1' to 'dev1@127.0.0.1'\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin cluster plan\n=============================== Staged Changes ================================\nAction         Details(s)\n-------------------------------------------------------------------------------\njoin           'dev2@127.0.0.1'\njoin           'dev3@127.0.0.1'\njoin           'dev4@127.0.0.1'\njoin           'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\n\n\nNOTE: Applying these changes will result in 1 cluster transition\n\n###############################################################################\n                         After cluster transition 1/1\n###############################################################################\n\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid     100.0%     20.3%    'dev1@127.0.0.1'\nvalid       0.0%     20.3%    'dev2@127.0.0.1'\nvalid       0.0%     20.3%    'dev3@127.0.0.1'\nvalid       0.0%     20.3%    'dev4@127.0.0.1'\nvalid       0.0%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\nTransfers resulting from cluster changes: 51\n  12 transfers from 'dev1@127.0.0.1' to 'dev5@127.0.0.1'\n  13 transfers from 'dev1@127.0.0.1' to 'dev4@127.0.0.1'\n  13 transfers from 'dev1@127.0.0.1' to 'dev3@127.0.0.1'\n  13 transfers from 'dev1@127.0.0.1' to 'dev2@127.0.0.1'\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\njoining     0.0%      --      'dev2@127.0.0.1'\njoining     0.0%      --      'dev3@127.0.0.1'\njoining     0.0%      --      'dev4@127.0.0.1'\njoining     0.0%      --      'dev5@127.0.0.1'\nvalid     100.0%      --      'dev1@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:1 / Leaving:0 / Exiting:0 / Joining:4 / Down:0\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin cluster commit\nCluster changes committed\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      87.5%     20.3%    'dev1@127.0.0.1'\nvalid       3.1%     20.3%    'dev2@127.0.0.1'\nvalid       3.1%     20.3%    'dev3@127.0.0.1'\nvalid       3.1%     20.3%    'dev4@127.0.0.1'\nvalid       3.1%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\n\u3053\u3053\u304b\u3089\u5206\u6563\u304c\u59cb\u307e\u308a\u3001Ring\u306e\u5024\u304c\u6642\u9593\u3068\u3068\u3082\u306b\u4ed6\u30ce\u30fc\u30c9\u306b\u79fb\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      75.0%     20.3%    'dev1@127.0.0.1'\nvalid       6.3%     20.3%    'dev2@127.0.0.1'\nvalid       6.3%     20.3%    'dev3@127.0.0.1'\nvalid       6.3%     20.3%    'dev4@127.0.0.1'\nvalid       6.3%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      50.0%     20.3%    'dev1@127.0.0.1'\nvalid      12.5%     20.3%    'dev2@127.0.0.1'\nvalid      12.5%     20.3%    'dev3@127.0.0.1'\nvalid      12.5%     20.3%    'dev4@127.0.0.1'\nvalid      12.5%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      20.3%      --      'dev1@127.0.0.1'\nvalid      20.3%      --      'dev2@127.0.0.1'\nvalid      20.3%      --      'dev3@127.0.0.1'\nvalid      20.3%      --      'dev4@127.0.0.1'\nvalid      18.8%      --      'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\n\u3053\u308c\u3067\u5b8c\u4e86\u3060\u3002\ndev5\u3060\u305118.8%\u3068\u4ed6\u30ce\u30fc\u30c9\u3068\u7570\u306a\u308b\u5024\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u3053\u308c\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306ev-node\u6570\u304c\u5b9f\u969b\u306e\u30ce\u30fc\u30c9\u6570\u3067\u5272\u308a\u5207\u308c\u306a\u3044\u304b\u3089\u3060\u3002\u591a\u5206\u3002\n\n\u672c\u5f53\u306b\u5206\u6563\u3057\u3066\u3044\u308b\u306e\u304b\n[vagrant@localhost riak]$ curl -XPUT -d '{\"myname\":\"saisa\"}'  http://localhost:10018/buckets/mybucket/keys/name -v\n* About to connect() to localhost port 10018 (#0)\n*   Trying ::1... \u63a5\u7d9a\u3092\u62d2\u5426\u3055\u308c\u307e\u3057\u305f\n*   Trying 127.0.0.1... connected\n* Connected to localhost (127.0.0.1) port 10018 (#0)\n> PUT /buckets/mybucket/keys/name HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: localhost:10018\n> Accept: */*\n> Content-Length: 18\n> Content-Type: application/x-www-form-urlencoded\n>\n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)\n< Date: Tue, 03 Dec 2013 14:55:49 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n<\n* Connection #0 to host localhost left intact\n* Closing connection #0\n\n[vagrant@localhost riak]$ curl http://localhost:10018/buckets/mybucket/keys/name\n{\"myname\":\"saisa\"}\n[vagrant@localhost riak]$ curl http://localhost:10028/buckets/mybucket/keys/name\n{\"myname\":\"saisa\"}\n\n\u3068\u3001\u3053\u3093\u306a\u304b\u3093\u3058\u3067\u3001dev1\u306b\u66f8\u304d\u8fbc\u3093\u3060\u5024\u30922\u304b\u3089\u3082\u8aad\u307f\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u969c\u5bb3\u6642\u306e\u6319\u52d5\nAngular.JS\u306e\u30a4\u30d9\u30f3\u30c8\u306b\u884c\u3063\u3066\u305f\u3089\u6642\u9593\u304c\u7121\u304f\u306a\u3063\u305f\u306e\u3067\u307e\u305f\u4eca\u5ea6\u306a\uff01\uff01\n\u65e5\u4ed8\u5909\u66f4\u307e\u3067\u3042\u30682\u5206\uff01\n\u307f\u3093\u306a\u3067\u3084\u308bRiak Advent Calendar 3\u65e5\u76ee\u3002\u4eca\u306e\u3068\u3053\u308d\u306f\u50d5\u3072\u3068\u308a\u3002\n\u3067\u3082Riak\u306f\u4e00\u4eba\u307c\u3063\u3061\u3058\u3083\u306a\u3044\u3002\u8907\u6570\u53f0\u3067\u9023\u643a\u3057\u3066\u521d\u3081\u3066\u771f\u4fa1\u3092\u767a\u63ee\u3059\u308b\u3002\n\u305d\u3093\u306a\u8a71\u3002\n\n## \u8907\u6570\u306eRiak\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u958b\u767a\u74b0\u5883\u3067\u306f\u3001\u4e00\u53f0\u306e\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306bRiak\u30ce\u30fc\u30c9\u3092\u8907\u6570\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3001\u9023\u643a\u3092\u8a66\u3059\u3053\u3068\u304c\u53ef\u80fd\u3060\u3002\nmake\u3060\u3068rel\u4ee5\u4e0b\u306b\u30d0\u30a4\u30ca\u30ea\u304c\u751f\u6210\u3055\u308c\u308b\u304c\u3001make devrel\u3060\u3068dev\u4ee5\u4e0b\u306b5\u53f0\u5206\u306e\u30d0\u30a4\u30ca\u30ea\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n```shell\n[vagrant@localhost riak]$ pwd\n/home/vagrant/riak\n\n[vagrant@localhost riak]$ make devrel\n\uff08\u7701\u7565\uff09\n\n[vagrant@localhost riak]$ ls dev/\ndev1  dev2  dev3  dev4  dev5\n```\n\u3053\u308c\u3089\u306e\u30ce\u30fc\u30c9\u3092\u8d77\u52d5\u3057\u3001\u30af\u30e9\u30b9\u30bf\u306b\u6240\u5c5e\u3055\u305b\u308b\u3002\n\n```shell\n[vagrant@localhost riak]$ find dev/dev*/bin/riak -exec {} start \\;\n\n[vagrant@localhost riak]$ find dev/dev*/bin/riak -exec {} ping \\;\npong\npong\npong\npong\npong\n\n[vagrant@localhost riak]$ find dev/dev[2-5]/bin/riak-admin -exec {} cluster join dev1@127.0.0.1 \\;\nSuccess: staged join request for 'dev2@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev3@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev4@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev5@127.0.0.1' to 'dev1@127.0.0.1'\n```\n\u30af\u30e9\u30b9\u30bf\u306bjoin\u3055\u305b\u305f\u5f8c\u3001plan\u3068commit\u3092\u884c\u3046\u3053\u3068\u3067\u7a3c\u50cd\u304c\u59cb\u307e\u308b\u3002\n\n```shell\n[vagrant@localhost riak]$ find dev/dev[2-5]/bin/riak-admin -exec {} cluster join dev1@127.0.0.1 \\;\nSuccess: staged join request for 'dev2@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev3@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev4@127.0.0.1' to 'dev1@127.0.0.1'\nSuccess: staged join request for 'dev5@127.0.0.1' to 'dev1@127.0.0.1'\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin cluster plan\n=============================== Staged Changes ================================\nAction         Details(s)\n-------------------------------------------------------------------------------\njoin           'dev2@127.0.0.1'\njoin           'dev3@127.0.0.1'\njoin           'dev4@127.0.0.1'\njoin           'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\n\n\nNOTE: Applying these changes will result in 1 cluster transition\n\n###############################################################################\n                         After cluster transition 1/1\n###############################################################################\n\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid     100.0%     20.3%    'dev1@127.0.0.1'\nvalid       0.0%     20.3%    'dev2@127.0.0.1'\nvalid       0.0%     20.3%    'dev3@127.0.0.1'\nvalid       0.0%     20.3%    'dev4@127.0.0.1'\nvalid       0.0%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\nTransfers resulting from cluster changes: 51\n  12 transfers from 'dev1@127.0.0.1' to 'dev5@127.0.0.1'\n  13 transfers from 'dev1@127.0.0.1' to 'dev4@127.0.0.1'\n  13 transfers from 'dev1@127.0.0.1' to 'dev3@127.0.0.1'\n  13 transfers from 'dev1@127.0.0.1' to 'dev2@127.0.0.1'\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\njoining     0.0%      --      'dev2@127.0.0.1'\njoining     0.0%      --      'dev3@127.0.0.1'\njoining     0.0%      --      'dev4@127.0.0.1'\njoining     0.0%      --      'dev5@127.0.0.1'\nvalid     100.0%      --      'dev1@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:1 / Leaving:0 / Exiting:0 / Joining:4 / Down:0\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin cluster commit\nCluster changes committed\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      87.5%     20.3%    'dev1@127.0.0.1'\nvalid       3.1%     20.3%    'dev2@127.0.0.1'\nvalid       3.1%     20.3%    'dev3@127.0.0.1'\nvalid       3.1%     20.3%    'dev4@127.0.0.1'\nvalid       3.1%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n```\n\u3053\u3053\u304b\u3089\u5206\u6563\u304c\u59cb\u307e\u308a\u3001Ring\u306e\u5024\u304c\u6642\u9593\u3068\u3068\u3082\u306b\u4ed6\u30ce\u30fc\u30c9\u306b\u79fb\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n```shell\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      75.0%     20.3%    'dev1@127.0.0.1'\nvalid       6.3%     20.3%    'dev2@127.0.0.1'\nvalid       6.3%     20.3%    'dev3@127.0.0.1'\nvalid       6.3%     20.3%    'dev4@127.0.0.1'\nvalid       6.3%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      50.0%     20.3%    'dev1@127.0.0.1'\nvalid      12.5%     20.3%    'dev2@127.0.0.1'\nvalid      12.5%     20.3%    'dev3@127.0.0.1'\nvalid      12.5%     20.3%    'dev4@127.0.0.1'\nvalid      12.5%     18.8%    'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n\n[vagrant@localhost riak]$ dev/dev1/bin/riak-admin member-status\n================================= Membership ==================================\nStatus     Ring    Pending    Node\n-------------------------------------------------------------------------------\nvalid      20.3%      --      'dev1@127.0.0.1'\nvalid      20.3%      --      'dev2@127.0.0.1'\nvalid      20.3%      --      'dev3@127.0.0.1'\nvalid      20.3%      --      'dev4@127.0.0.1'\nvalid      18.8%      --      'dev5@127.0.0.1'\n-------------------------------------------------------------------------------\nValid:5 / Leaving:0 / Exiting:0 / Joining:0 / Down:0\n```\n\u3053\u308c\u3067\u5b8c\u4e86\u3060\u3002\ndev5\u3060\u305118.8%\u3068\u4ed6\u30ce\u30fc\u30c9\u3068\u7570\u306a\u308b\u5024\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u3053\u308c\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306ev-node\u6570\u304c\u5b9f\u969b\u306e\u30ce\u30fc\u30c9\u6570\u3067\u5272\u308a\u5207\u308c\u306a\u3044\u304b\u3089\u3060\u3002\u591a\u5206\u3002\n\n## \u672c\u5f53\u306b\u5206\u6563\u3057\u3066\u3044\u308b\u306e\u304b\n```shell\n[vagrant@localhost riak]$ curl -XPUT -d '{\"myname\":\"saisa\"}'  http://localhost:10018/buckets/mybucket/keys/name -v\n* About to connect() to localhost port 10018 (#0)\n*   Trying ::1... \u63a5\u7d9a\u3092\u62d2\u5426\u3055\u308c\u307e\u3057\u305f\n*   Trying 127.0.0.1... connected\n* Connected to localhost (127.0.0.1) port 10018 (#0)\n> PUT /buckets/mybucket/keys/name HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: localhost:10018\n> Accept: */*\n> Content-Length: 18\n> Content-Type: application/x-www-form-urlencoded\n>\n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.10.5 (jokes are better explained)\n< Date: Tue, 03 Dec 2013 14:55:49 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n<\n* Connection #0 to host localhost left intact\n* Closing connection #0\n\n[vagrant@localhost riak]$ curl http://localhost:10018/buckets/mybucket/keys/name\n{\"myname\":\"saisa\"}\n[vagrant@localhost riak]$ curl http://localhost:10028/buckets/mybucket/keys/name\n{\"myname\":\"saisa\"}\n```\n\u3068\u3001\u3053\u3093\u306a\u304b\u3093\u3058\u3067\u3001dev1\u306b\u66f8\u304d\u8fbc\u3093\u3060\u5024\u30922\u304b\u3089\u3082\u8aad\u307f\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n## \u969c\u5bb3\u6642\u306e\u6319\u52d5\nAngular.JS\u306e\u30a4\u30d9\u30f3\u30c8\u306b\u884c\u3063\u3066\u305f\u3089\u6642\u9593\u304c\u7121\u304f\u306a\u3063\u305f\u306e\u3067\u307e\u305f\u4eca\u5ea6\u306a\uff01\uff01\n\u65e5\u4ed8\u5909\u66f4\u307e\u3067\u3042\u30682\u5206\uff01", "tags": ["riak2.0.0pre7", "AdventCalendar"]}