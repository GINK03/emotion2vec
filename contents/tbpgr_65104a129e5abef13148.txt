{"tags": ["Ruby", "Graphviz", "Hubot", "kandan", "GitLab"], "context": " More than 1 year has passed since last update.\n\nRuby | Gviz \u3067 GitLab / GitLab CI / Kandan / Hubot \u306e\u69cb\u6210\u56f3\u3092\u4f5c\u6210\u3059\u308b\n\n\u6982\u8981\nGviz \u3067 GitLab / GitLab CI/ Kandan / Hubot \u306e\u69cb\u6210\u56f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\nrequire \"gviz\"\n\nGraph do\n  nodes fontname:'MS UI GOTHIC', fontsize:20\n  user_nodes = {shape: :none, fontsize:10, label: ''}\n  server_nodes = {width: 3, height: 2, shape: :none, fontsize:10, label: ''}\n  edges fontsize: 20\n\n  node :User1, {image: \"./actor.jpg\"}.merge(user_nodes)\n  node :User2, {image: \"./actor.jpg\"}.merge(user_nodes)\n  node :Kandan, {image: \"./kandan.png\"}.merge(server_nodes)\n  node :Hubot, {image: \"./hubot.jpg\"}.merge(server_nodes)\n  node :GitLab, {image: \"./gitlab.png\"}.merge(server_nodes)\n  node :GitLabCI, server_nodes.merge({image: \"./gitlab_ci.png\", width: 3, height: 1})\n  node :GitLabCIRunner, server_nodes.merge({label: 'GitLab CI Runner', width: 3, height: 1, shape: :box3d, fontsize: 30 })\n\n  edge :\"User1_Kandan\", {label: <<-EOS\nSend chat message to User1\nEx: User1 @User2 hello\n  EOS\n  }\n\n  edge :\"User2_Kandan\", {label: <<-EOS\nSend chat message to Hubot\nEx: @hubot PING\n  EOS\n  }\n\n  edge :\"Kandan_Hubot\", {label: 'Send message to Hubot'}\n  edge :\"Kandan_User1\", {label: <<-EOS\nSend chat message\nEx: GitLab push!\nEx: GitLab CI build success!\n  EOS\n  }\n\n  edge :\"Kandan_User2\", {label: <<-EOS\nSend chat message\nEx: User1 @User2 hello\nEx: PONG\nEx: GitLab push!\nEx: GitLab CI build success!\n  EOS\n  }\n\n  edge :\"Hubot_Kandan\", {len: 3, label: <<-EOS\n* Send chat message from Hubot.\n  Ex: PONG\n* Send chat message from GitLab.\n  Ex: GitLab push!\n* Send chat message from GitLab CI.\n  Ex: GitLab CI build success!\n  EOS\n  }\n\n  edge :\"User1_GitLab\", {label: 'GilLab push' }\n  edge :\"GitLab_Hubot\", {label: <<-EOS\nSend pull-event-json \nto Hubot by WebHooks\n  EOS\n  }\n  edge :\"GitLab_GitLabCI\", {label: 'Call GitLab CI Server'}\n  edge :\"GitLabCI_GitLab\", {label: 'Send CI result'}\n  edge :\"GitLabCI_Hubot\", {label: <<-EOS\nSend ci-result-json \nto Hubot by WebHooks2\n  EOS\n  }\n  edge :\"GitLabCI_GitLabCIRunner\", {label: 'Call GitLab CI Runner'}\n  edge :\"GitLabCIRunner_GitLabCI\", {label: 'Send CI Run result'}\n  edge :\"User1_User2\", {label: 'I love you'}\n  edge :\"User2_User1\", {label: 'I hate you'}\n\n  rank :min, [:User1, :User2]\n  rank :same, [:GitLab, :Kandan]\n  rank :max, [:Hubot, :GitLabCI]\n\n  save :\"gitlab_hubot_kandan\", :png\nend\n\n\n\u51fa\u529b\n\n# Ruby | Gviz \u3067 GitLab / GitLab CI / Kandan / Hubot \u306e\u69cb\u6210\u56f3\u3092\u4f5c\u6210\u3059\u308b\n## \u6982\u8981\nGviz \u3067 GitLab / GitLab CI/ Kandan / Hubot \u306e\u69cb\u6210\u56f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n## \u30b3\u30fc\u30c9\n\n~~~\nrequire \"gviz\"\n\nGraph do\n  nodes fontname:'MS UI GOTHIC', fontsize:20\n  user_nodes = {shape: :none, fontsize:10, label: ''}\n  server_nodes = {width: 3, height: 2, shape: :none, fontsize:10, label: ''}\n  edges fontsize: 20\n\n  node :User1, {image: \"./actor.jpg\"}.merge(user_nodes)\n  node :User2, {image: \"./actor.jpg\"}.merge(user_nodes)\n  node :Kandan, {image: \"./kandan.png\"}.merge(server_nodes)\n  node :Hubot, {image: \"./hubot.jpg\"}.merge(server_nodes)\n  node :GitLab, {image: \"./gitlab.png\"}.merge(server_nodes)\n  node :GitLabCI, server_nodes.merge({image: \"./gitlab_ci.png\", width: 3, height: 1})\n  node :GitLabCIRunner, server_nodes.merge({label: 'GitLab CI Runner', width: 3, height: 1, shape: :box3d, fontsize: 30 })\n\n  edge :\"User1_Kandan\", {label: <<-EOS\nSend chat message to User1\nEx: User1 @User2 hello\n  EOS\n  }\n\n  edge :\"User2_Kandan\", {label: <<-EOS\nSend chat message to Hubot\nEx: @hubot PING\n  EOS\n  }\n\n  edge :\"Kandan_Hubot\", {label: 'Send message to Hubot'}\n  edge :\"Kandan_User1\", {label: <<-EOS\nSend chat message\nEx: GitLab push!\nEx: GitLab CI build success!\n  EOS\n  }\n\n  edge :\"Kandan_User2\", {label: <<-EOS\nSend chat message\nEx: User1 @User2 hello\nEx: PONG\nEx: GitLab push!\nEx: GitLab CI build success!\n  EOS\n  }\n\n  edge :\"Hubot_Kandan\", {len: 3, label: <<-EOS\n* Send chat message from Hubot.\n  Ex: PONG\n* Send chat message from GitLab.\n  Ex: GitLab push!\n* Send chat message from GitLab CI.\n  Ex: GitLab CI build success!\n  EOS\n  }\n\n  edge :\"User1_GitLab\", {label: 'GilLab push' }\n  edge :\"GitLab_Hubot\", {label: <<-EOS\nSend pull-event-json \nto Hubot by WebHooks\n  EOS\n  }\n  edge :\"GitLab_GitLabCI\", {label: 'Call GitLab CI Server'}\n  edge :\"GitLabCI_GitLab\", {label: 'Send CI result'}\n  edge :\"GitLabCI_Hubot\", {label: <<-EOS\nSend ci-result-json \nto Hubot by WebHooks2\n  EOS\n  }\n  edge :\"GitLabCI_GitLabCIRunner\", {label: 'Call GitLab CI Runner'}\n  edge :\"GitLabCIRunner_GitLabCI\", {label: 'Send CI Run result'}\n  edge :\"User1_User2\", {label: 'I love you'}\n  edge :\"User2_User1\", {label: 'I hate you'}\n\n  rank :min, [:User1, :User2]\n  rank :same, [:GitLab, :Kandan]\n  rank :max, [:Hubot, :GitLabCI]\n\n  save :\"gitlab_hubot_kandan\", :png\nend\n~~~\n\n## \u51fa\u529b\n\n![gitlab_hubot_kandan.png](https://qiita-image-store.s3.amazonaws.com/0/43480/97158b15-d0a1-7877-878e-23657e966dde.png)\n"}