{"tags": ["PDO", "MySQL5.1.71", "PHP5.3.3"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nMySQL\u306e\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u4f7f\u3063\u3066\u3001\u3042\u308b\uff11\u3064\u306e\u623b\u308a\u5024\u3092PHP\u3067\u53d7\u3051\u53d6\u308b\u305f\u3081\u306b\u596e\u95d8\u3057\u305f\u7d50\u679c\u3092\u30e1\u30e2\u4ee3\u308f\u308a\u306b\u6b8b\u3057\u307e\u3059\u3002\n\n\u7d50\u8ad6\nPHP[PDO]\u306ebindValue, bindParam\u3092\u4f7f\u3063\u3066\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u306f\u3001\u4ed5\u69d8\u4e0a\u3067\u304d\u307e\u305b\u3093\u3002\n\u5f7c\u306e\u3088\u3046\u306b\u982d\u3092\u58c1\u3067\u53e9\u304d\u307e\u304f\u3063\u305f\u7d50\u679c\u30b3\u30ec\u306b\u305f\u3069\u308a\u7740\u304d\u307e\u3057\u305f\u304c\u60b6\u7d76\u30e2\u30ce\u3067\u3059\u3002\u975e\u5e38\u306b\u6c17\u306b\u5165\u3089\u306a\u3044\u3002\nPHP.net - flannell \u00b6\n\n\u30b3\u30fc\u30c9\nMySQL\u306e\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\nuse test;\ndelimiter //\n    create procedure storedprocedure_test(in in_data varchar(255), out out_data varchar(255))\n    begin\n        select concat(in_data, ' is anpontan') into out_data;\n    end;\n//\n\nPHP[PDO]\u304b\u3089bind*\u3067\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u53e9\u304f\u5074\n\ntest.php\n<?php\n    $dbh = new PDO('mysql:host=localhost;', 'USER_NAME', 'PASSWORD');\n\n    $in = 'wakisuke';\n    $out = '***';\n\n    /* \u5024\u306e\u914d\u5217\u3092\u6e21\u3057\u3066\u30d7\u30ea\u30da\u30a2\u30c9\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u3092\u5b9f\u884c\u3059\u308b */\n    $sth = $dbh -> prepare('call test.storedprocedure_test(:in_data, :out_data);');\n    $sth -> bindValue(':in_data', $in, PDO::PARAM_STR);\n    $sth -> bindParam(':out_data', $out, PDO::PARAM_STR | PDO::PARAM_INPUT_OUTPUT, 255);\n    $sth -> execute();\n    $sth -> fetchAll();\n\n    echo $out . \"\\n\";\n?>\n\n\n\n\u7d50\u679c\n\u672c\u5f53\u306a\u3089\u300cwakisuke is anpontan\u300d\u3068\u306a\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u307e\u3059\u304c\u3001\u6b8b\u5ff5\u306a\u304c\u3089\u7121\u7406\u3067\u3059\u3002\n> php ./test.php\n> ***\n\nPHP\u306b\u6295\u7a3f\u3057\u3066\u304f\u3060\u3055\u3063\u305fflannell\u3055\u3093\u306e\u3088\u3046\u306b\u3001\u540c\u3058\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u53e9\u3044\u3066\u3001\u6307\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u5909\u6570\u3092select\u3057\u3066\u5f97\u307e\u3057\u3087\u3046\u30fb\u30fb\u30fb\u3002\n#\u6982\u8981\nMySQL\u306e\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u4f7f\u3063\u3066\u3001\u3042\u308b\uff11\u3064\u306e\u623b\u308a\u5024\u3092PHP\u3067\u53d7\u3051\u53d6\u308b\u305f\u3081\u306b\u596e\u95d8\u3057\u305f\u7d50\u679c\u3092\u30e1\u30e2\u4ee3\u308f\u308a\u306b\u6b8b\u3057\u307e\u3059\u3002\n\n##\u7d50\u8ad6\nPHP[PDO]\u306ebindValue, bindParam\u3092\u4f7f\u3063\u3066\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u306e\u5f15\u6570\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u306f\u3001\u4ed5\u69d8\u4e0a\u3067\u304d\u307e\u305b\u3093\u3002\n\u5f7c\u306e\u3088\u3046\u306b\u982d\u3092\u58c1\u3067\u53e9\u304d\u307e\u304f\u3063\u305f\u7d50\u679c\u30b3\u30ec\u306b\u305f\u3069\u308a\u7740\u304d\u307e\u3057\u305f\u304c\u60b6\u7d76\u30e2\u30ce\u3067\u3059\u3002\u975e\u5e38\u306b\u6c17\u306b\u5165\u3089\u306a\u3044\u3002\n[PHP.net - flannell \u00b6](http://us3.php.net/manual/ja/pdostatement.bindparam.php#109791)\n\n#\u30b3\u30fc\u30c9\nMySQL\u306e\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\n\n```sql\nuse test;\ndelimiter //\n\tcreate procedure storedprocedure_test(in in_data varchar(255), out out_data varchar(255))\n\tbegin\n\t\tselect concat(in_data, ' is anpontan') into out_data;\n\tend;\n//\n```\n\nPHP[PDO]\u304b\u3089bind*\u3067\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u53e9\u304f\u5074\n\n```php:test.php\n<?php\n\t$dbh = new PDO('mysql:host=localhost;', 'USER_NAME', 'PASSWORD');\n\n\t$in = 'wakisuke';\n\t$out = '***';\n\n\t/* \u5024\u306e\u914d\u5217\u3092\u6e21\u3057\u3066\u30d7\u30ea\u30da\u30a2\u30c9\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u3092\u5b9f\u884c\u3059\u308b */\n\t$sth = $dbh -> prepare('call test.storedprocedure_test(:in_data, :out_data);');\n\t$sth -> bindValue(':in_data', $in, PDO::PARAM_STR);\n\t$sth -> bindParam(':out_data', $out, PDO::PARAM_STR | PDO::PARAM_INPUT_OUTPUT, 255);\n\t$sth -> execute();\n\t$sth -> fetchAll();\n\n\techo $out . \"\\n\";\n?>\n```\n\n##\u7d50\u679c\n\u672c\u5f53\u306a\u3089\u300cwakisuke is anpontan\u300d\u3068\u306a\u308b\u3053\u3068\u3092\u671f\u5f85\u3057\u307e\u3059\u304c\u3001\u6b8b\u5ff5\u306a\u304c\u3089\u7121\u7406\u3067\u3059\u3002\n\n```bash\n> php ./test.php\n> ***\n```\n\nPHP\u306b\u6295\u7a3f\u3057\u3066\u304f\u3060\u3055\u3063\u305fflannell\u3055\u3093\u306e\u3088\u3046\u306b\u3001\u540c\u3058\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u30b9\u30c8\u30a2\u30c9\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u3092\u53e9\u3044\u3066\u3001\u6307\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u5909\u6570\u3092select\u3057\u3066\u5f97\u307e\u3057\u3087\u3046\u30fb\u30fb\u30fb\u3002"}