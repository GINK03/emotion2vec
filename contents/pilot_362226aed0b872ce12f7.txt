{"context": "\n\n\u3084\u308a\u305f\u3044\u3053\u3068\nhttp://qiita.com/pilot/items/e763a67675e264ed0347 \u3067\u4f5c\u6210\u3057\u305fDigdag\u30b5\u30fc\u30d0\u306b\nhttp://qiita.com/pilot/items/ff49174adbbfd0a3c9e4#digdag%E3%81%AEtd%E3%82%B5%E3%83%BC%E3%83%90%E3%83%A2%E3%83%BC%E3%83%89 \u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092push\u3057\u305f\u304cAPI\u30ad\u30fc\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a2d\u5b9a\u304c\u3067\u304d\u305a\u5b9f\u884c\u3067\u304d\u306a\u304b\u3063\u305f\n\u5f53\u8a72\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bTreasureData\u63a5\u7d9a\u60c5\u5831(API\u30ad\u30fc\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8)\u3092\u8a2d\u5b9a\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\n\n\u7d50\u8ad6\ndigdag secrets\u3067\u8a2d\u5b9a\u3059\u308b\n\nAPI\u30ad\u30fc\u8a2d\u5b9a\ndigdag secrets\u30b3\u30de\u30f3\u30c9\u3067\u30b5\u30fc\u30d0\u306b\u8a2d\u5b9a\u3059\u308b\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u65b9\u6cd5\u3067\n\n\u65b9\u6cd51 - API\u30ad\u30fc\u6587\u5b57\u5217\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u3079\u305f\u66f8\u304d\n$ digdag secrets --project proj1 --set td.apikey=XXX\n2016-10-26 12:43:59 +0900: Digdag v0.8.17\nSecret 'td.apikey' set\n\n\u30d2\u30b9\u30c8\u30ea\u306bAPI\u30ad\u30fc\u6587\u5b57\u5217\u304c\u6b8b\u308b\n\n\u65b9\u6cd52 - API\u30ad\u30fc\u6587\u5b57\u5217\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304f\n$ vi tmpfile # API\u30ad\u30fc\u6587\u5b57\u5217\u3092\u66f8\u304f\n$ digdag secrets --project proj1 --set td.apikey=@tmpfile\n2016-10-26 12:44:29 +0900: Digdag v0.8.17\nSecret 'td.apikey' set\n$ rm tmpfile\n\n\n\u65b9\u6cd53 - td.conf\u304b\u3089\u629c\u304d\u51fa\u3057\n$ digdag secrets --project proj1 --set td.apikey=`grep apikey ~/.td/td.conf | sed 's/.*= *\\(.*\\)/\\1/'`\n2016-10-26 12:45:45 +0900: Digdag v0.8.17\nSecret 'td.apikey' set\n\ndigdag secrets\u306b\u300ctd.conf\u304b\u3089API\u30ad\u30fc\u3092\u53d6\u5f97\u300d\u6a5f\u80fd\u304c\u3042\u308b\u3068\u5b09\u3057\u3044\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u5b9a\n\u524d\u8ff0\u306eAPI\u30ad\u30fc\u8a2d\u5b9a\u65b9\u6cd5\u306e\u3044\u305a\u308c\u304b\u3067\napikey\u3067\u306a\u304fendpoint\nhttps://\u306f\u3064\u3051\u306a\u3044\ntd.conf\u3067\u306f\u4ed8\u3044\u3066\u308b\u306e\u3067\u3069\u3061\u3089\u304b\u306b\u7d71\u4e00\u3057\u3066\u3042\u308b\u3068\u5b09\u3057\u3044\n\u65b9\u6cd53\u3060\u3068\u4ee5\u4e0b\n$ digdag secrets --project proj1 --set td.endpoint=`grep endpoint ~/.td/td.conf | sed 's#.*= *https://\\(.*\\)#\\1#'`\n2016-11-02 18:51:41 +0900: Digdag v0.8.18\nSecret 'td.endpoint' set\n\n\n\u5b9f\u884c\n$ digdag start proj1 xxx --session now\n2016-10-26 12:46:05 +0900: Digdag v0.8.17\nStarted a session attempt:\n  session id: 94\n  attempt id: 93\n  uuid: 09141eca-f97c-4424-957e-cc76a732c58a\n  project: proj1\n  workflow: xxx\n  session time: 2016-10-26 03:46:07 +0000\n  retry attempt name:\n  params: {}\n  created at: 2016-10-26 12:46:08 +0900\n\n* Use `digdag session 94` to show session status.\n* Use `digdag task 93` and `digdag log 93` to show task status and logs.\n\n\uff5e \u4f55\u5ea6\u304bdigdag session 94\u3092\u5b9f\u884c\u3057\u3066\u7d42\u308f\u308b\u306e\u3092\u5f85\u3064 \uff5e\n\n$ digdag log 93\n2016-10-26 12:47:11 +0900: Digdag v0.8.17\n2016-10-26 12:46:08.989 +0900 [INFO] (0288@+xxx+task1) io.digdag.core.agent.OperatorManager: td>: xxx.sql\n2016-10-26 12:46:09.969 +0900 [INFO] (0288@+xxx+task1) io.digdag.core.agent.OperatorManager: td>: xxx.sql\n2016-10-26 12:46:11.280 +0900 [INFO] (0288@+xxx+task1) io.digdag.standards.operator.td.TdOperatorFactory$TdOperator: Started presto job id=8044900:\nSELECT COUNT(*) AS count FROM xxx\n\n2016-10-26 12:46:13.391 +0900 [INFO] (0288@+xxx+task1) io.digdag.core.agent.OperatorManager: td>: xxx.sql\n2016-10-26 12:46:15.227 +0900 [INFO] (0288@+xxx+task2) io.digdag.core.agent.OperatorManager: echo>: 42\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n===========\n\nhttp://qiita.com/pilot/items/e763a67675e264ed0347 \u3067\u4f5c\u6210\u3057\u305fDigdag\u30b5\u30fc\u30d0\u306b\nhttp://qiita.com/pilot/items/ff49174adbbfd0a3c9e4#digdag%E3%81%AEtd%E3%82%B5%E3%83%BC%E3%83%90%E3%83%A2%E3%83%BC%E3%83%89 \u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092push\u3057\u305f\u304cAPI\u30ad\u30fc\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a2d\u5b9a\u304c\u3067\u304d\u305a\u5b9f\u884c\u3067\u304d\u306a\u304b\u3063\u305f\n\n\u5f53\u8a72\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306bTreasureData\u63a5\u7d9a\u60c5\u5831(API\u30ad\u30fc\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8)\u3092\u8a2d\u5b9a\u3057\u3066\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\n\n\u7d50\u8ad6\n====\n\ndigdag secrets\u3067\u8a2d\u5b9a\u3059\u308b\n\nAPI\u30ad\u30fc\u8a2d\u5b9a\n==========\n\ndigdag secrets\u30b3\u30de\u30f3\u30c9\u3067\u30b5\u30fc\u30d0\u306b\u8a2d\u5b9a\u3059\u308b\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u65b9\u6cd5\u3067\n\n\u65b9\u6cd51 - API\u30ad\u30fc\u6587\u5b57\u5217\u3092\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u3079\u305f\u66f8\u304d\n----------------------------------------------------------\n\n```\n$ digdag secrets --project proj1 --set td.apikey=XXX\n2016-10-26 12:43:59 +0900: Digdag v0.8.17\nSecret 'td.apikey' set\n```\n\n\u30d2\u30b9\u30c8\u30ea\u306bAPI\u30ad\u30fc\u6587\u5b57\u5217\u304c\u6b8b\u308b\n\n\u65b9\u6cd52 - API\u30ad\u30fc\u6587\u5b57\u5217\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304f\n----------------------------------\n\n```\n$ vi tmpfile # API\u30ad\u30fc\u6587\u5b57\u5217\u3092\u66f8\u304f\n$ digdag secrets --project proj1 --set td.apikey=@tmpfile\n2016-10-26 12:44:29 +0900: Digdag v0.8.17\nSecret 'td.apikey' set\n$ rm tmpfile\n```\n\n\u65b9\u6cd53 - td.conf\u304b\u3089\u629c\u304d\u51fa\u3057\n--------------------------\n\n```\n$ digdag secrets --project proj1 --set td.apikey=`grep apikey ~/.td/td.conf | sed 's/.*= *\\(.*\\)/\\1/'`\n2016-10-26 12:45:45 +0900: Digdag v0.8.17\nSecret 'td.apikey' set\n```\n\ndigdag secrets\u306b\u300ctd.conf\u304b\u3089API\u30ad\u30fc\u3092\u53d6\u5f97\u300d\u6a5f\u80fd\u304c\u3042\u308b\u3068\u5b09\u3057\u3044\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u8a2d\u5b9a\n=================\n\n\u524d\u8ff0\u306eAPI\u30ad\u30fc\u8a2d\u5b9a\u65b9\u6cd5\u306e\u3044\u305a\u308c\u304b\u3067\napikey\u3067\u306a\u304fendpoint\n\n`https://`\u306f\u3064\u3051\u306a\u3044\ntd.conf\u3067\u306f\u4ed8\u3044\u3066\u308b\u306e\u3067\u3069\u3061\u3089\u304b\u306b\u7d71\u4e00\u3057\u3066\u3042\u308b\u3068\u5b09\u3057\u3044\n\n\u65b9\u6cd53\u3060\u3068\u4ee5\u4e0b\n\n```\n$ digdag secrets --project proj1 --set td.endpoint=`grep endpoint ~/.td/td.conf | sed 's#.*= *https://\\(.*\\)#\\1#'`\n2016-11-02 18:51:41 +0900: Digdag v0.8.18\nSecret 'td.endpoint' set\n```\n\n\u5b9f\u884c\n====\n\n```\n$ digdag start proj1 xxx --session now\n2016-10-26 12:46:05 +0900: Digdag v0.8.17\nStarted a session attempt:\n  session id: 94\n  attempt id: 93\n  uuid: 09141eca-f97c-4424-957e-cc76a732c58a\n  project: proj1\n  workflow: xxx\n  session time: 2016-10-26 03:46:07 +0000\n  retry attempt name:\n  params: {}\n  created at: 2016-10-26 12:46:08 +0900\n\n* Use `digdag session 94` to show session status.\n* Use `digdag task 93` and `digdag log 93` to show task status and logs.\n\n\uff5e \u4f55\u5ea6\u304bdigdag session 94\u3092\u5b9f\u884c\u3057\u3066\u7d42\u308f\u308b\u306e\u3092\u5f85\u3064 \uff5e\n\n$ digdag log 93\n2016-10-26 12:47:11 +0900: Digdag v0.8.17\n2016-10-26 12:46:08.989 +0900 [INFO] (0288@+xxx+task1) io.digdag.core.agent.OperatorManager: td>: xxx.sql\n2016-10-26 12:46:09.969 +0900 [INFO] (0288@+xxx+task1) io.digdag.core.agent.OperatorManager: td>: xxx.sql\n2016-10-26 12:46:11.280 +0900 [INFO] (0288@+xxx+task1) io.digdag.standards.operator.td.TdOperatorFactory$TdOperator: Started presto job id=8044900:\nSELECT COUNT(*) AS count FROM xxx\n\n2016-10-26 12:46:13.391 +0900 [INFO] (0288@+xxx+task1) io.digdag.core.agent.OperatorManager: td>: xxx.sql\n2016-10-26 12:46:15.227 +0900 [INFO] (0288@+xxx+task2) io.digdag.core.agent.OperatorManager: echo>: 42\n```\n", "tags": ["digdag", "TreasureData"]}