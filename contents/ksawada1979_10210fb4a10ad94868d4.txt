{"context": "\n\nDRBD9\u3068\u306f\uff1f\nDRBD\u306f\u3053\u308c\u307e\u3067\u57fa\u672c\u7684\u306b\u306f\u30b5\u30fc\u30d01\u5bfe1\u3067\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u8907\u88fd)\u3059\u308b\u305f\u3081\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3057\u305f\u3002\n\u3057\u304b\u3057DRBD9\u3067\u306f\u591a\u30ce\u30fc\u30c9\u9593\u3067\u30c7\u30fc\u30bf\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u305d\u3093\u306a\u591a\u30ce\u30fc\u30c9\u3067\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u8907\u88fd)\u4f55\u306b\u4f7f\u3046\u306e\uff1f\u3068\u601d\u308f\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001OpenStack\u306a\u3069\u306b\u7d44\u307f\u8fbc\u3093\u3067SDS\u7684\u306a\u4f7f\u7528\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nCeph\u3092\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u3068\u308f\u304b\u308a\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3044\u304d\u306a\u308aOpenStack\u3068\u9023\u643a\u3059\u308b\u306e\u306f\u30cf\u30fc\u30c9\u30eb\u304c\u9ad8\u3044\u306e\u3067\u4eca\u56de\u306fDRBD9\u306e\u591a\u30ce\u30fc\u30c9\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\nDRBD Manage\n\u591a\u30ce\u30fc\u30c9\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u8a2d\u5b9a\u5024\u304c\u8907\u96d1\u306b\u306a\u308b\u305f\u3081\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3092\u3057\u3066\u304f\u308c\u308bDRBD Manage\u3068\u3044\u3046\u30c4\u30fc\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306fDRBD Manage\u3092\u4f7f\u3063\u3066\u74b0\u5883\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u69cb\u7bc9\u74b0\u5883\n3\u53f0\u306e\u30b5\u30fc\u30d0\u306e\u30c7\u30fc\u30bf\u3092\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u8907\u88fd)\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u540d\u3068IP\u30a2\u30c9\u30ec\u30b9\u306f\u8aad\u307f\u66ff\u3048\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u307e\u305f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5168\u3066\u306e\u30b5\u30fc\u30d0\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u74b0\u5883\n\n\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\n\nOS\nUbuntu 16.04\n\n\nDRBD\n9.0.4\n\n\nDRBD Manage\n0.97.5\n\n\n\n\n\u4e8b\u524d\u6e96\u5099\n\u5404\u30b5\u30fc\u30d0\u306bDRBD\u7528\u306e\u30c7\u30a3\u30b9\u30af\u9818\u57df\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4eee\u306b/dev/sdb\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u4f5c\u6210\u3057\u305f\u4e0a\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067lvm\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ sudo fdisk /dev/sdb\n$ pvcreate /dev/sdb1\n$ vgcreate drbdpool /dev/sdb1\n\n\u6b21\u306b\u4e8b\u524d\u306b\u5404\u30b5\u30fc\u30d0\u9593\u3067\u9375\u4ea4\u63db\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n# sudo ssh-keygen -t rsa\n# sudo ssh-copy-id -i .ssh/id_rsa.pub root@<\u5404\u30b5\u30fc\u30d0IP\u30a2\u30c9\u30ec\u30b9>\n\n\nDRBD9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nDRBD9\u306fUbuntu\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u975e\u5e38\u306b\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002DRBD9\u3092\u8a66\u3059\u306b\u306f\u6700\u9069\u3067\u3059\u3002\n\u307e\u305a\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n$ sudo add-apt-repository ppa:linbit/linbit-drbd9-stack\n$ sudo apt update\n\n\u6b21\u306bDRBD9\u3068DRBD Manage\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo apt-get install drbd-utils python-drbdmanage drbd-dkms\n\n\u4ee5\u4e0a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3067\u3059\u3002\nDRBD manage\u3092\u4f7f\u3063\u305f\u8a2d\u5b9a\u624b\u9806\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3057\u307e\u3057\u305f\u3002\nhttp://tech-sketch.jp/2015/11/drbd9.html\nhttp://ksawada.hatenablog.com/entry/2016/06/13/154411\n## DRBD9\u3068\u306f\uff1f\nDRBD\u306f\u3053\u308c\u307e\u3067\u57fa\u672c\u7684\u306b\u306f\u30b5\u30fc\u30d01\u5bfe1\u3067\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u8907\u88fd)\u3059\u308b\u305f\u3081\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3067\u3057\u305f\u3002\n\u3057\u304b\u3057DRBD9\u3067\u306f\u591a\u30ce\u30fc\u30c9\u9593\u3067\u30c7\u30fc\u30bf\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u305d\u3093\u306a\u591a\u30ce\u30fc\u30c9\u3067\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u8907\u88fd)\u4f55\u306b\u4f7f\u3046\u306e\uff1f\u3068\u601d\u308f\u308c\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001OpenStack\u306a\u3069\u306b\u7d44\u307f\u8fbc\u3093\u3067SDS\u7684\u306a\u4f7f\u7528\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nCeph\u3092\u30a4\u30e1\u30fc\u30b8\u3059\u308b\u3068\u308f\u304b\u308a\u3084\u3059\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3044\u304d\u306a\u308aOpenStack\u3068\u9023\u643a\u3059\u308b\u306e\u306f\u30cf\u30fc\u30c9\u30eb\u304c\u9ad8\u3044\u306e\u3067\u4eca\u56de\u306fDRBD9\u306e\u591a\u30ce\u30fc\u30c9\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6a5f\u80fd\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n## DRBD Manage\n\u591a\u30ce\u30fc\u30c9\u5bfe\u5fdc\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u8a2d\u5b9a\u5024\u304c\u8907\u96d1\u306b\u306a\u308b\u305f\u3081\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3092\u3057\u3066\u304f\u308c\u308bDRBD Manage\u3068\u3044\u3046\u30c4\u30fc\u30eb\u304c\u3042\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306fDRBD Manage\u3092\u4f7f\u3063\u3066\u74b0\u5883\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u69cb\u7bc9\u74b0\u5883\n3\u53f0\u306e\u30b5\u30fc\u30d0\u306e\u30c7\u30fc\u30bf\u3092\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3(\u8907\u88fd)\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u540d\u3068IP\u30a2\u30c9\u30ec\u30b9\u306f\u8aad\u307f\u66ff\u3048\u3066\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n![DRBD9.png](https://qiita-image-store.s3.amazonaws.com/0/101744/db821094-31e5-bb9d-79e7-f40d0390c676.png)\n\n\u307e\u305f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5168\u3066\u306e\u30b5\u30fc\u30d0\u3067\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u74b0\u5883\n||\u30d0\u30fc\u30b8\u30e7\u30f3|\n|:--|:--|\n|OS|Ubuntu 16.04|\n|DRBD|9.0.4|\n|DRBD Manage|0.97.5|\n\n## \u4e8b\u524d\u6e96\u5099\n\u5404\u30b5\u30fc\u30d0\u306bDRBD\u7528\u306e\u30c7\u30a3\u30b9\u30af\u9818\u57df\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u4eee\u306b/dev/sdb\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u4f5c\u6210\u3057\u305f\u4e0a\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067lvm\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```shell-session\n$ sudo fdisk /dev/sdb\n$ pvcreate /dev/sdb1\n$ vgcreate drbdpool /dev/sdb1\n```\n\n\u6b21\u306b\u4e8b\u524d\u306b\u5404\u30b5\u30fc\u30d0\u9593\u3067\u9375\u4ea4\u63db\u3092\u5b9f\u65bd\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```shell-session\n# sudo ssh-keygen -t rsa\n# sudo ssh-copy-id -i .ssh/id_rsa.pub root@<\u5404\u30b5\u30fc\u30d0IP\u30a2\u30c9\u30ec\u30b9>\n```\n\n## DRBD9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nDRBD9\u306fUbuntu\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u975e\u5e38\u306b\u7c21\u5358\u306b\u3067\u304d\u307e\u3059\u3002DRBD9\u3092\u8a66\u3059\u306b\u306f\u6700\u9069\u3067\u3059\u3002\n\n\u307e\u305a\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```shell-session\n$ sudo add-apt-repository ppa:linbit/linbit-drbd9-stack\n$ sudo apt update\n```\n\n\u6b21\u306bDRBD9\u3068DRBD Manage\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```shell-session\n$ sudo apt-get install drbd-utils python-drbdmanage drbd-dkms\n```\n\n\u4ee5\u4e0a\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nDRBD manage\u3092\u4f7f\u3063\u305f\u8a2d\u5b9a\u624b\u9806\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3057\u307e\u3057\u305f\u3002\nhttp://tech-sketch.jp/2015/11/drbd9.html\nhttp://ksawada.hatenablog.com/entry/2016/06/13/154411\n", "tags": ["drbd", "drbd9"]}