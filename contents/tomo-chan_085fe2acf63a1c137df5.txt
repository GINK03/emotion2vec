{"context": "Fujitsu Advent Calendar \u306e15\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\u306f\u3058\u3081\u306b\n\u30b9\u30de\u30db\u3068Web\u30b5\u30fc\u30d3\u30b9\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30e2\u30d0\u30a4\u30eb\u30b5\u30fc\u30d3\u30b9\u306e\u4f5c\u6210\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\u3068\u3063\u304b\u304b\u308a\u3068\u3057\u3066\u5b9f\u88c5\uff5e\u30c6\u30b9\u30c8\u307e\u3067\u30921\u672c\u901a\u308b\u3082\u306e\u3092\u4f5c\u6210\u3057\u3066\u3001\u3042\u3068\u306f\u62e1\u5f35\u3067\u304d\u308b\u3088\u3046\u306a\u5f62\u306b\u306a\u308b\u3088\u3046\u306b\u3057\u305f\u3064\u3082\u308a\u3067\u3059\u3002\n\u3082\u3063\u3068\u826f\u3044\u65b9\u6cd5\u3084\u3063\u3066\u308b\uff01\u3068\u8a00\u3046\u65b9\u304c\u3044\u308c\u3070\u6559\u3048\u3066\u3082\u3089\u3048\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059\u3002\n\u4ee5\u4e0b\u306e\u4eba\u3092\u5bfe\u8c61\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\nJavaScript\u4f7f\u3048\u308b\uff01\u3068\u3044\u3046\u4eba\n\u3053\u308c\u304b\u3089\u30b9\u30de\u30fc\u30c8\u30c7\u30d0\u30a4\u30b9\u5411\u3051\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u305f\u3044\u306a\u30fc\u3068\u601d\u3063\u3066\u3044\u308b\u4eba\n\u3044\u308d\u3044\u308d\u60c5\u5831\u306f\u3042\u308b\u3051\u3069\u4f55\u304b\u3089\u59cb\u3081\u305f\u3089\u3044\u3044\u3093\u3060\uff1f\u3068\u601d\u3063\u3066\u3044\u308b\u4eba\n\n\u3061\u307e\u305f\u306b\u306fBabel\u3084ES2016\u3084Gulp\u3084Webpack\u3084Bower\u3084React\u306a\u3069\u306e\u4fbf\u5229\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u6df7\u305c\u308b\u3068\u8a33\u304c\u308f\u304b\u3089\u306a\u304f\u306a\u308b\u306e\u3067\u672c\u8a18\u4e8b\u3067\u306f\u30d4\u30e5\u30a2\u306aJavaScript\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3068\u3066\u3082\u3081\u3093\u3069\u304f\u3055\u3044\u30ec\u30ac\u30b7\u30fc\u306a\u4f5c\u308a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u3060\u3051\u306f\u5c11\u3057\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nWeb\u30b5\u30fc\u30d3\u30b9\u306f\u6700\u8fd1\u6d41\u884c\u308a\u306e\u30b5\u30fc\u30d0\u30ec\u30b9\u3067\u306f\u306a\u304fnodejs+express\u3067\u3059\u3002\n\u826f\u3055\u3052\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306fSPA\u3092\u3064\u304f\u308b\u305f\u3081\u306b\u4f7f\u3063\u305f\u3082\u306e\u305f\u3061\u306a\u3069\u4ed6\u306e\u65b9\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4f5c\u308b\u3082\u306e\n\n\u30b9\u30de\u30db\u304b\u3089\u5199\u771f\u3092\u64ae\u3063\u3066\u30b5\u30fc\u30d0\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u95b2\u89a7\u3059\u308b\u30b5\u30fc\u30d3\u30b9\n\n\u30e2\u30d0\u30a4\u30eb\u30b5\u30fc\u30d3\u30b9\u3068\u8a00\u3063\u3066\u3082\u53e4\u304f\u306f\u30af\u30e9\u30b5\u30d0\u306e\u5ef6\u9577\u306a\u306e\u3067\u30b7\u30f3\u30d7\u30eb\u306a\u30b1\u30fc\u30b9\u3092\u5bfe\u8c61\u3068\u3057\u307e\u3057\u305f\u3002\n\u7d30\u304b\u304f\u8a00\u3046\u3068\u4ee5\u4e0b\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\n\n\u5199\u771f\u3092\u53d6\u308b\n\u5199\u771f\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n\n\n\u30b5\u30fc\u30d0\n\n\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u5199\u771f\u3092\u4fdd\u5b58\u3059\u308b\n\u4fdd\u5b58\u3055\u308c\u305f\u5199\u771f\u306e\u4e00\u89a7\u3092\u8fd4\u5374\u3059\u308b\n\n\n\n\u4f5c\u6210\u6e08\u307f\u306e\u30bd\u30fc\u30b9\u306f\u305d\u308c\u305e\u308csample-app\u3068sample-server\u306b\u3042\u308a\u307e\u3059\u3002\n\n\u6e96\u5099\n\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u30c4\u30fc\u30eb\n\n\nnodejs\ngit\nAndroid-SDK\uff08\u4eca\u56de\u306fAndroid\u3092\u5bfe\u8c61\u306b\u3059\u308b\u306e\u3067\uff09\n\n\n\n\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u30b0\u30b0\u3063\u3066\u304f\u3060\u3055\u3044\uff08\u30b5\u30dc\u308a\uff09\u3002\nnodejs\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30c6\u30b9\u30c8\u3084\u30c7\u30d0\u30c3\u30b0\u3067\u4f7f\u7528\u3057\u307e\u3059\u3002\nnpm install -g cordova node-inspector mocha-pahtomjs istanbul\n\n\n\u69cb\u6210\n\u5b8c\u6210\u56f3\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\u30a2\u30d7\u30ea\uff08JavaScript\uff09 <--> Web\u30b5\u30fc\u30d3\u30b9\uff08JavaScript\uff09\n\u30a2\u30d7\u30ea\u306f\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3001Web\u30b5\u30fc\u30d3\u30b9\u306fnodejs\u306a\u306e\u3067JavaScript\u3060\u3051\u3067\u958b\u767a\u4fdd\u5b88\u3067\u304d\u307e\u3059\u3002\u5b66\u7fd2\u30b3\u30b9\u30c8\u3082\u4f4e\u304f\u306a\u308a\u307e\u3059\u306d\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\u252c sample-app       \u30fb\u30fb\u30fb\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff09\n\u2514 sample-server    \u30fb\u30fb\u30fbWeb\u30b5\u30fc\u30d3\u30b9\uff08\u30b5\u30fc\u30d0\uff09\n\n\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3068\u3044\u3046\u306e\u306fHTML+JavaScript+CSS\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30a2\u30d7\u30ea\u306e\u3053\u3068\u3067\u3059\u3002\n\uff08\u3044\u308d\u3044\u308d\u8a00\u3044\u65b9\u306f\u3042\u308a\u307e\u3059\u304c\u3053\u3053\u3067\u306f\uff09\u3059\u3079\u3066OS\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30a2\u30d7\u30ea\u3092Native\u30a2\u30d7\u30ea\u3068\u8a00\u3044\u307e\u3059\u3002\n\n\u30e1\u30ea\u30c3\u30c8\n\n\nAndroid\u3084iOS\u3067\u3082Windows\u3067\u3082\uff08\u307b\u307c\uff09\u540c\u3058\u30b3\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u306e\u3067\u4fdd\u5b88\u6027\u304c\u9ad8\u3044\nJavaScript\u306a\u306e\u3067\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u4f4e\u3044\n\n\n\u30c7\u30e1\u30ea\u30c3\u30c8\n\n\nNative\u30a2\u30d7\u30ea\u306b\u6bd4\u3079\u3066WebView\u304c\u9593\u306b\u631f\u307e\u3063\u3066\u3044\u308b\u5206\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u4f4e\u3044\n\n\n\n\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u8981\u6c42\u3055\u308c\u308b\u30a2\u30d7\u30ea\u306fNative\u306e\u65b9\u304c\u826f\u3044\u3067\u3059\u306d\u3002\n\u305f\u3060\u6700\u8fd1\u306eWebView\u306e\u6027\u80fd\u304c\u826f\u304f\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3068Cordova Plugin\u3067\u91cd\u305f\u3044\u4e00\u90e8\u5206\u3060\u3051Native\u3067\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3082\u6368\u3066\u305f\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u6e96\u5099\n\u307e\u305a\u306f\u30a2\u30d7\u30ea\u958b\u767a\u306e\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\ncordova\u3092\u4f7f\u7528\u3057\u3066\u30a2\u30d7\u30ea\u306e\u3072\u306a\u578b\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\ncordova create sample-app com.tomochan.sample \"Sample App\"\ncd sample-app\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306b\u306a\u308a\u307e\u3059\u3002\nsample-app\n    \u251c hooks\n    \u251c platforms\n    \u251c plugins\n    \u251c www\n    |    \u251c css\n    |    \u251c img\n    |    \u251c js\n    |    \u2514 index.html\n    \u2514  config.xml\n\n\u3072\u306a\u5f62\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3068\u3044\u304f\u3064\u304b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u304c\u3001\u57fa\u672c\u7684\u306bwww\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3060\u3051\u3092\u89e6\u308a\u307e\u3059\u3002\n\u4f5c\u6210\u3059\u308b\u30a2\u30d7\u30ea\u306eOS\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306fWindows\u3067\u3082Mac\u3067\u3082\u5b9f\u884c\u53ef\u80fd\u306aAndroid\u306b\u3057\u307e\u3059\u3002\ncordova platform add android\n\n\u307e\u305a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u72b6\u614b\u3067\u30a2\u30d7\u30ea\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\u5b9f\u6a5f\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306fUSB\u3067PC\u3068\u7e4b\u3044\u3067\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\ncordova build\ncordova run\n\n\u30b9\u30de\u30db\u306e\u753b\u9762\u306bCordova\u306e\u30a2\u30a4\u30b3\u30f3\u304c\u8868\u793a\u3055\u308c\u3066DEVICE IS READY\u306e\u6587\u5b57\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\nCordova\u3092\u4f7f\u7528\u3057\u305f\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3067\u306fPlugin\u306a\u3069\u306e\u521d\u671f\u5316\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089deviceready\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3057\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u306e\u30ed\u30b8\u30c3\u30af\u306f\u306e\u3053deviceready\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u5f8c\u306b\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u5199\u771f\u3092\u64ae\u3063\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u6a5f\u80fd\u306e\u5b9f\u88c5\nCordova\u3067\u306fNative\u30a2\u30d7\u30ea\u3067\u5229\u7528\u53ef\u80fd\u306a\u6a5f\u80fd\uff08\u30ab\u30e1\u30e9\u3084\u30bb\u30f3\u30b5\u30fc\u60c5\u5831\u53d6\u5f97\u306a\u3069\uff09\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306bPlugin\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u305d\u306ePlugin\u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u5199\u771f\u3092\u64ae\u3063\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306fCamera plugin\u3068File Transfer plugin\u3092\u5229\u7528\u3057\u3066\u5199\u771f\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\ncordova plugin add cordova-plugin-camera cordova-plugin-file-transfer\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068Plugin\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\nPlugin\u306f\u516c\u5f0f\u30843rd party\u306ePlugin\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u81ea\u5206\u3067\u4f5c\u6210\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u696d\u52d9\u3067\u4f7f\u3046\u5834\u5408\u306f\u81ea\u524d\u3067\u4f5c\u6210\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3053\u3068\u3082\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u5225\u8a18\u4e8b\u3067\u7d39\u4ecb\u3067\u304d\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\nPlugin\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089HTML\u3068JavaScript\u5074\u306e\u30bd\u30fc\u30b9\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4f5c\u6210\n\u307e\u305a\u306f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4f5c\u6210\u3067\u3059\u3002\n\u9014\u4e2d\u306enpm init\u3067\u3044\u308d\u3044\u308d\u805e\u304b\u308c\u307e\u3059\u304c\u306f\u5f8c\u3067\u7de8\u96c6\u3067\u304d\u308b\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067OK\u3067\u3059\u3002\n\u307e\u305f\u3001\u4eca\u56de\u306fGUI\u304c\u7d61\u3080\u306e\u3067mocha-phantomjs\u3092\u5229\u7528\u3057\u307e\u3059\u3002\nnpm init\nnpm install --save-dev mocha chai sinon\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u30c6\u30b9\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\ntests\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08\u5927\u3057\u305f\u5b9f\u88c5\u3092\u3057\u306a\u3044\u306e\u3067\u30c6\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\uff09\nmkdir tests\n\n\ntests/test.html\n\nHTML\u306fmocha-phantomjs\u516c\u5f0f\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u3002\n<!--testcode:start --><!-- testcode:end -->\u3067\u62ec\u3089\u308c\u3066\u3044\u308b\u90e8\u5206\u304c\u30c6\u30b9\u30c8\u3067\u4f7f\u7528\u3059\u308b\u90e8\u5206\u3067\u3059\u3002\nphantomjs\u304b\u3089\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092node_modules\u304b\u3089\u76f4\u63a5\u53c2\u7167\u3057\u3066\u3044\u307e\u3059\u3002\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <title>Test</title>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link href=\"../node_modules/mocha/mocha.css\" rel=\"stylesheet\">\n  </head>\n  <body>\n    <div id=\"mocha\"></div>\n    <!-- testcode:start -->\n    <img id=\"capture-image\" />\n    <ul id=\"image-list\"></ul>\n    <!-- testcode:end -->\n    <script src=\"../node_modules/mocha/mocha.js\"></script>\n    <script src=\"../node_modules/chai/chai.js\"></script>\n    <script src=\"../node_modules/sinon/pkg/sinon.js\"></script>\n    <script>\n      mocha.ui('bdd')\n      expect = chai.expect\n    </script>\n    <script src=\"../www/js/actions.js\"></script>\n    <script src=\"../www/js/logics.js\"></script>\n    <script src=\"config.js\"></script>\n    <script src=\"spec.js\"></script>\n    <script>\n      mocha.run()\n    </script>\n  </body>\n</html>\n\n\ntests/spec.js\n\nbefore\u3067Cordova Plugin\u306eMock\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306f\u6570\u304c\u591a\u304f\u306a\u308b\u3068\u7ba1\u7406\u304c\u96e3\u3057\u304f\u306a\u308b\u306e\u3067\u9803\u5408\u3044\u3092\u898b\u3066\u5206\u5272\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\u6700\u521d\u304b\u3089\u304d\u308c\u3044\u306b\u5206\u5272\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u9006\u306b\u6c5a\u304f\u306a\u308b\u306e\u3067\u6700\u521d\u306f\u307e\u3068\u3081\u3066\u3057\u307e\u3063\u3066\u3082\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nvar assert = chai.assert;\n\ndescribe('actions.js', function() {\n\n  beforeEach(function() {\n    alert = sinon.spy();\n  });\n  afterEach(function() {\n    var image = document.getElementById('capture-image');\n    delete image.src;\n  });\n\n  describe('showImage', function() {\n    it('should show an image', function() {\n      var uri = 'tests/files/test.jpg';\n      showImage(uri);\n      var img = document.getElementById('capture-image');\n      expect(img.src).to.contains(uri);\n    });\n  });\n  describe('getImageUrl', function() {\n      var uri = 'tests/files/test.jpg';\n      var img = document.getElementById('capture-image');\n      img.src = uri;\n      var imageUrl = getImageUrl();\n      expect(imageUrl).to.contains(uri);\n  });\n  describe('showImageList', function() {\n      var images = ['tests/files/test.jpg', 'tests/files/test.jpg'];\n      showImageList(images);\n      var list = document.getElementById('image-list');\n      expect(list.childNodes.length).to.equal(images.length);\n  });\n\n});\n\ndescribe('logics.js', function() {\n  before(function(){\n    if(navigator && !navigator.camera) {\n      navigator.camera = {};\n      navigator.camera.getPicture = function(scb, fcb, opt) {};\n    }\n    if(!window.FileTransfer) {\n      window.FileTransfer = function() {};\n      window.FileTransfer.prototype.upload = function(src, url, scb, fcb) {};\n    }\n  });\n  beforeEach(function() {\n    alert = sinon.spy();\n  });\n\n  describe('cameraBtnTouchendEventHandler', function() {\n    it('should get image url', function() {\n      uploadBtnTouchendEventHandler();\n    });\n  });\n  describe('cameraSuccessCallback', function() {\n    it('should get image url', function() {\n      var uri = 'tests/files/test.jpg';\n      cameraSuccessCallback(uri);\n      var img = document.getElementById('capture-image');\n      expect(img.src).to.contains(uri);\n    });\n  });\n  describe('cameraFailureCallback', function() {\n    it('should get alert', function() {\n      cameraFailureCallback('error');\n      expect(alert.args[0][0]).to.equal('Error: error');\n    });\n  });\n\n  describe('uploadBtnTouchendEventHandler', function() {\n    it('should upload image', function() {\n      uploadBtnTouchendEventHandler();\n    });\n  });\n  describe('uploadSuccessCallback', function() {\n    it('should success', function() {\n      uploadSuccessCallback({\"responseCode\": 200, \"response\": \"\", \"bytesSent\": 100});\n      expect(alert.args[0][0]).to.equal('success');\n    });\n  });\n  describe('uploadFailureCallback', function() {\n    it('should get alert', function() {\n      uploadFailureCallback({\"code\": -1, \"source\": \"src\", \"target\": \"target\"});\n      expect(alert.args[0][0]).to.equal(\"Error: -1\");\n    });\n  });\n\n  describe('showImagesBtnTouchendEventHandler', function() {\n    it('should upload image', function() {\n      showImagesBtnTouchendEventHandler();\n    });\n  });\n});\n\n\nJavaScript (tests/config.js)\n\n\u30c6\u30b9\u30c8\u6642\u306e\u30b5\u30fc\u30d0\u63a5\u7d9a\u5148\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u63a5\u7d9a\u5148\u3092\u5206\u96e2\u3057\u3066\u3044\u308b\u7406\u7531\u306f\u30c6\u30b9\u30c8\u74b0\u5883\u3084\u672c\u756a\u74b0\u5883\u3067\u63a5\u7d9a\u5148\u304c\u7570\u306a\u308b\u5834\u5408\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u3067\u3059\u3002\nENV = {\n    \"serverurl\": \"http://localhost:3000/\"\n  };\n\n\n\u5b9f\u88c5\n\u6b21\u306b\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u65e2\u5b58\u306e\u30bd\u30fc\u30b9\u306e\u3044\u3089\u306a\u3044\u3068\u3053\u308d\u306f\u6d88\u3057\u3066actions.js\u3068logics.js\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n\u95a2\u6570\u304c\u30b0\u30ed\u30fc\u30d0\u30eb\u3060\u3063\u305f\u308a\u30d5\u30a1\u30a4\u30eb\u5916\u306e\u5909\u6570\u3092\u53c2\u7167\u3057\u3066\u3044\u305f\u308a\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u3046\u3056\u3044\u306a\u3069\u826f\u304f\u306a\u3044\u66f8\u304d\u65b9\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u6d41\u884c\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u7528\u3059\u308c\u3070\u304b\u306a\u308a\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\nwww/index.html\n\n\u7c21\u5358\u306aUI\u8981\u7d20\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u307e\u305fXMLHttpRequest\u3067http\u306e\u30b5\u30fc\u30d0\u3068\u901a\u4fe1\u3059\u308b\u306e\u3067Content-Security-Policy\u306bconnect-src http:;\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\uff5e\n<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:; connect-src http:;\">\n\uff5e\n<body>\n    <input id=\"camera-btn\" type=\"button\" value=\"\u30ab\u30e1\u30e9\u8d77\u52d5\" />\n    <input id=\"upload-btn\" type=\"button\" value=\"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\" />\n    <input id=\"showimages-btn\" type=\"button\" value=\"\u5199\u771f\u306e\u4e00\u89a7\u3092\u8868\u793a\" />\n    <div>\n        <ul id=\"image-list\"></ul>\n        <img id=\"capture-image\" />\n    </div>\n    <script type=\"text/javascript\" src=\"cordova.js\"></script>\n    <script type=\"text/javascript\" src=\"js/actions.js\"></script>\n    <script type=\"text/javascript\" src=\"js/logics.js\"></script>\n    <script type=\"text/javascript\" src=\"config.js\"></script>\n</body>\n\n\nwww/js/actions.js\n\nactions.js\u3067\u306f\u4e3b\u306bUI\u5468\u308a\u306e\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\nUI\u3068\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3057\u3066\u3044\u308b\u7406\u7531\u306f\u3001\u30ed\u30b8\u30c3\u30af\u306bDOM\u64cd\u4f5c\u3092\u542b\u3080\u3068\u4f9d\u5b58\u95a2\u4fc2\u304c\u8907\u96d1\u306b\u306a\u308a\u30c6\u30b9\u30c8\u304c\u96e3\u3057\u304f\u306a\u308b\u305f\u3081\u3067\u3059\u3002\nfunction onDeviceReady(evt) {\n    var cameraBtn = document.getElementById('camera-btn');\n    cameraBtn.addEventListener('click', cameraBtnTouchendEventHandler);\n\n    var uploadBtn = document.getElementById('upload-btn');\n    uploadBtn.addEventListener('click', uploadBtnTouchendEventHandler);\n\n    var showImagesBtn = document.getElementById('showimages-btn');\n    showImagesBtn.addEventListener('click', showImagesBtnTouchendEventHandler);\n}\n\nfunction showImage(imageUrl) {\n    var image = document.getElementById('capture-image');\n    image.src = imageUrl;\n}\n\nfunction getImageUrl() {\n    var image = document.getElementById('capture-image');\n    return image.src;\n}\n\nfunction showImageList(images) {\n    var ul = document.getElementById('image-list');\n    var li = document.createElement('li');\n    images.forEach(function(image) {\n        var l = li.cloneNode();\n        l.textContent = image;\n        ul.appendChild(l);\n    });\n}\n\nfunction showResult(err, msg) {\n    if(err) {\n        alert('Error: ' + err);\n    } else {\n        alert(msg);\n    }\n}\n\ndocument.addEventListener('deviceready', onDeviceReady);\n\n\nwww/js/logics.js\n\nlogics\u3067\u306fUI\u5468\u308a\u306e\u51e6\u7406\u306f\u5b9f\u884c\u3057\u307e\u305b\u3093\u3002\nfunction cameraBtnTouchendEventHandler(evt) {\n    navigator.camera.getPicture(cameraSuccessCallback, cameraFailureCallback);\n}\n\nfunction cameraSuccessCallback(imageUrl) {\n    console.log('success');\n    showImage(imageUrl);\n}\n\nfunction cameraFailureCallback(msg) {\n    showResult(msg);\n}\n\nfunction uploadBtnTouchendEventHandler(evt) {\n    var imageUrl = getImageUrl();\n    var ft = new FileTransfer();\n    ft.upload(imageUrl, encodeURI(ENV.serverurl + \"api/v1/images\"), \n      uploadSuccessCallback, uploadFailureCallback);\n}\n\nfunction uploadSuccessCallback(result) {\n    showResult(null, 'success');\n}\n\nfunction uploadFailureCallback(error) {\n    showResult(error.code);\n}\n\nfunction showImagesBtnTouchendEventHandler(evt) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', ENV.serverurl + 'api/v1/images');\n    xhr.onload = function() {\n        if(xhr.readyState === 4) {\n            if(xhr.status === 200) {\n                var images = JSON.parse(xhr.response);\n                showImageList(images.files);\n            } else {\n                showResult(xhr.status);\n            }\n        }\n    };\n    xhr.send();\n}\n\n\u30a2\u30d7\u30ea\u3092\u5b9f\u884c\u3057\u3066\u5199\u771f\u3092\u64ae\u5f71\u3059\u308b\u3068\u753b\u9762\u4e0a\u306b\u5199\u771f\u304c\u8868\u793a\u3055\u308c\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\u6b21\u306b\u3053\u308c\u3092Web\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308bWeb\u30b5\u30fc\u30d3\u30b9\u306f\u6b21\u7ae0\u3067\u4f5c\u6210\u3059\u308b\u3068\u3057\u3066\u3053\u3053\u3067\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3060\u3051\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306fENV.serverurl + api/v1/images\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\n\u5b9f\u88c5\u304c\u5b8c\u4e86\u3057\u305f\u3089\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\npackage.json\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\npackage.json (\u4e00\u90e8\u629c\u7c8b)\n\n  \"scripts\": {\n    \"test\": \"mocha-phantomjs -R dot tests/test.html\"\n  },\n\nnpm run test\u3068\u5b9f\u884c\u3059\u308b\u3068\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\nAndroid5.0\u4ee5\u964d\u3067\u3042\u308c\u3070Chrome\u3067\u30c7\u30d0\u30c3\u30b0\u3067\u304d\u308b\u306e\u3067\u3053\u3053\u3067\u306fdebug\u306f\u66f8\u3044\u3066\u3044\u306a\u3044\u3067\u3059\u3002\n\u5b9f\u6a5f\u3067\u30c7\u30d0\u30c3\u30b0\u3059\u308b\u5834\u5408\u306fcordova run\u306e\u3042\u3068\u306bChrome\u30d6\u30e9\u30a6\u30b6\u3092\u958b\u3044\u3066\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u304b\u3089chrome://inspect/\u3092\u958b\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nAndroid4\u4ee5\u524d\u306fCrosswalk\u3092\u4f7f\u7528\u3057\u3066\u5c11\u3057\u3044\u3058\u308b\u3068\u3067\u304d\u307e\u3059\u3002\n\nWeb\u30b5\u30fc\u30d3\u30b9\n\u6b21\u306bWeb\u30b5\u30fc\u30d3\u30b9\u5074\u306e\u8aac\u660e\u3092\u3057\u307e\u3059\u3002\nyeoman\u306a\u3069\u306eboilertemplate\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3042\u308c\u306f\u308f\u304b\u3063\u3066\u3044\u308b\u4eba\u7528\u3067\u308f\u304b\u3089\u306a\u3044\u4eba\u304c\u89e6\u308b\u3068\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3068\u601d\u3046\u306e\u3067\u3053\u3053\u3067\u306f\u4f7f\u3044\u307e\u305b\u3093\u3002\n\n\u3072\u306a\u5f62\u3092\u4f5c\u6210\nWeb\u30b5\u30fc\u30d3\u30b9\u306fnodejs+Express\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30a2\u30d7\u30ea\u3068\u540c\u3058\u8a00\u8a9e\u3067\u5b9f\u88c5\u3067\u304d\u308b\u306e\u3067\u5c0e\u5165\u30b3\u30b9\u30c8\u304c\u4f4e\u3044\u3067\u3059\u306d\u3002\nsample-server\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u9014\u4e2d\u306enpm init\u3067\u3044\u308d\u3044\u308d\u805e\u304b\u308c\u307e\u3059\u304c\u306f\u5f8c\u3067\u7de8\u96c6\u3067\u304d\u308b\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067OK\u3067\u3059\u3002\nsample-app\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3044\u308b\u5834\u5408\u306f\u4e00\u65e6\u629c\u3051\u3066\u304f\u3060\u3055\u3044\u3002\nmkdir sample-server\nnpm init\nnpm install --save express multer fs path\nnpm install --save-dev \n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u3059\u3002\nserver.js\u3068app.js\u3092\u5206\u3051\u3066\u3044\u308b\u7406\u7531\u306fAWS\u306a\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u9023\u643a\u3059\u308b\u5834\u5408\u306e\u30c6\u30b9\u30c8\u3067Mock\u3092\u4f7f\u3044\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3067\u3059\uff08\u3042\u307e\u308a\u610f\u5473\u306f\u306a\u3044\u304b\u3082\uff09\u3002\nsample-server\n    \u251c controllers\n    |    \u2514 uploads.js\n    \u251c tests\n    |    \u2514 spec.js\n    \u251c app.js\n    \u251c server.js\n    \u2514 package.json\n\n\nWeb\u30b5\u30fc\u30d3\u30b9\u6a5f\u80fd\u306e\u5b9f\u88c5\n\u5b9f\u88c5\u3059\u308b\u6a5f\u80fd\u306f\u4ee5\u4e0b\u306e2\u3064\u3067\u3059\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3059\u308b\u6a5f\u80fd\n\u4fdd\u5b58\u3055\u308c\u305f\u753b\u50cf\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u6a5f\u80fd\n\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\u6a5f\u80fd\u305d\u308c\u305e\u308c\u306b\u95a2\u3059\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f\u30c6\u30b9\u30c8\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nnpm init\nnpm install --save-dev mocha chai supertest\n\ntests\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08\u5927\u3057\u305f\u5b9f\u88c5\u3092\u3057\u306a\u3044\u306e\u3067\u30c6\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\uff09\nmkdir tests\n\n\ntests/spec.js\n\n\u30c6\u30b9\u30c8\u3067\u306fapi/v1/images\u306eGET\u3068POST\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\nvar request = require('supertest');\nvar chai    = require('chai');\nvar assert  = chai.assert;\n\nvar app     = require('../app');\n\ndescribe(\"API: \", function() {\n  describe('/images', function(done) {\n    it('GET', function() {\n      request(app)\n        .get('/api/v1/images')\n        .expect('Content-Type', /json/)\n        .expect(200, {\"files\": []}, done);\n    });\n    it('POST', function(done) {\n      request(app)\n        .post('/api/v1/images')\n        .attach('file', 'tests/files/test.jpg')\n        .expect(200)\n        .end(function(err, res) {\n          if (err) return done(err);\n          done();\n        });\n    });\n  });\n});\n\n\n\u5b9f\u88c5\n\u6b21\u306b\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\nExpress\u306e\u57fa\u672c\u7684\u306a\u90e8\u5206\u3057\u304b\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\napp.js\n\n\u30b5\u30fc\u30d0\u306e\u57fa\u672c\u90e8\u5206\u3067\u3059\u3002\nmiddleware\u306e\u8a2d\u5b9a\u306a\u3069\u3082\u3053\u3053\u3067\u5b9f\u65bd\u3057\u307e\u3059\u304c\u4eca\u56de\u306f\u7279\u306b\u3057\u3066\u3044\u307e\u305b\u3093\u3002\nvar express = require('express');\n\nvar images  = require('./controllers/images');\n\nvar app     = express();\nvar router  = express.Router();\n\napp.use('/',              router);\napp.use('/api/v1/images', images);\n\nmodule.exports = app;\n\n\ncontrollers/images.js\n\n\u753b\u50cf\u306e\u53d6\u5f97\u3068\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306eAPI\u306e\u5b9f\u88c5\u90e8\u5206\u3067\u3059\u3002\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u306b\u306fmulter\u3092\u4f7f\u7528\u3057\u3066\u30b5\u30fc\u30d0\u306euploads/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\nvar express = require('express');\nvar router  = express.Router();\n\nvar fs       = require('fs');\nvar multer   = require('multer');\nvar imageDir = 'uploads/';\nvar upload   = multer({\"dest\": imageDir});\n\nrouter.get('/', function(req, res) {\n    fs.readdir(imageDir, function(err, files) {\n      if(err) {\n        res.status(500).send();\n      } else {\n        res.json({\"files\": files});\n      }\n    });\n});\n\nrouter.post('/', upload.single('file'), function(req, res) {\n    var image = req.file;\n    if(!image) {\n      res.status(400).send();\n    } else {\n      res.send();\n    }\n});\n\nmodule.exports = router;\n\n\n\u30c6\u30b9\u30c8\n\u5b9f\u88c5\u3057\u305f\u30bd\u30fc\u30b9\u304c\u554f\u984c\u306a\u3044\u304b\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\npackage.json\u306b\u30c6\u30b9\u30c8\u5b9f\u884c\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002\n\npackage.json (\u4e00\u90e8\u629c\u7c8b)\n\n  \"scripts\": {\n    \"test\": \"istanbul cover node_modules/mocha/bin/_mocha --print none --report html -- tests/*.js -R tap\",\n    \"testdebug\": \"mocha --debug --debug-brk ./tests/*.js\",\n    \"start\": \"node server.js\",\n    \"debug\": \"node-debug server.js\"\n  },\n\n\u30c6\u30b9\u30c8\u5b9f\u884c\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3089npm run test\u3068\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u304c\u5b8c\u4e86\u3059\u308b\u3068coverage\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3067\u304d\u3066\u3044\u3066\u30c6\u30b9\u30c8\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u7387\u3084\u30c6\u30b9\u30c8\u304c\u901a\u3063\u305f\u30eb\u30fc\u30c8\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u672c\u8a18\u4e8b\u306e\u30c6\u30b9\u30c8\u306f\u30a8\u30e9\u30fc\u7cfb\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u30ab\u30d0\u30ec\u30c3\u30b8\u7387\u306f\u6b8b\u5ff5\u306a\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u30fb\u30fb\u30fb\ndebug\u307e\u305f\u306ftestdebug\u3092\u5b9f\u884c\u3059\u308b\u30685858\u7248\u30dd\u30fc\u30c8\u3067\u5f85\u3061\u53d7\u3051\u3059\u308b\u306e\u3067\u30a8\u30c7\u30a3\u30bf\u306a\u3069\u3067\u30c7\u30d0\u30c3\u30b0\u3067\u304d\u307e\u3059\u3002\n\u79c1\u306fVS Code\u306e\u30c7\u30d0\u30c3\u30ac\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5b9f\u884c\n\u30c6\u30b9\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3042\u3068\u306f\u5b9f\u969b\u306b\u7e4b\u3052\u3066\u307f\u307e\u3059\u3002\nsample-app/www/config.js\u306eserverurl\u3092\u81ea\u5206\u306ePC\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u3057\u307e\u3059\u3002\n3000\u756a\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306f\u4e00\u6642\u7684\u306b\u5207\u3063\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\u78ba\u8a8d\u3067\u304d\u305f\u3089\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nvar ENV = {\n    \"serverurl\": \"http://192.168.*.*:3000/\"\n};\n\n\u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u3066\u5b9f\u6a5f\u3067\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\ncordova build\ncordova run\n\nsample-server\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\nnpm run start\n\n\u30b9\u30de\u30db\u3067\u5199\u771f\u3092\u64ae\u3063\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nsample-server/uploads\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3001\u307e\u305f\u306f\u5199\u771f\u306e\u4e00\u89a7\u3092\u8868\u793a\u30dc\u30bf\u30f3\u3067\u5199\u771f\u306e\u30d1\u30b9\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\u3053\u306e\u3042\u3068\u30c7\u30d7\u30ed\u30a4\u301c\u904b\u7528\u3068\u7d9a\u304d\u307e\u3059\u304c\u307e\u305f\u306e\u6a5f\u4f1a\u306b\u3067\u304d\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n[Fujitsu Advent Calendar](http://qiita.com/advent-calendar/2016/fujitsu_ext) \u306e15\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n## \u306f\u3058\u3081\u306b\n\n\u30b9\u30de\u30db\u3068Web\u30b5\u30fc\u30d3\u30b9\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30e2\u30d0\u30a4\u30eb\u30b5\u30fc\u30d3\u30b9\u306e\u4f5c\u6210\u624b\u9806\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\u3068\u3063\u304b\u304b\u308a\u3068\u3057\u3066\u5b9f\u88c5\uff5e\u30c6\u30b9\u30c8\u307e\u3067\u30921\u672c\u901a\u308b\u3082\u306e\u3092\u4f5c\u6210\u3057\u3066\u3001\u3042\u3068\u306f\u62e1\u5f35\u3067\u304d\u308b\u3088\u3046\u306a\u5f62\u306b\u306a\u308b\u3088\u3046\u306b\u3057\u305f\u3064\u3082\u308a\u3067\u3059\u3002\n\n\u3082\u3063\u3068\u826f\u3044\u65b9\u6cd5\u3084\u3063\u3066\u308b\uff01\u3068\u8a00\u3046\u65b9\u304c\u3044\u308c\u3070\u6559\u3048\u3066\u3082\u3089\u3048\u308b\u3068\u3046\u308c\u3057\u3044\u3067\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u4eba\u3092\u5bfe\u8c61\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n* JavaScript\u4f7f\u3048\u308b\uff01\u3068\u3044\u3046\u4eba\n* \u3053\u308c\u304b\u3089\u30b9\u30de\u30fc\u30c8\u30c7\u30d0\u30a4\u30b9\u5411\u3051\u306e\u30a2\u30d7\u30ea\u3092\u4f5c\u308a\u305f\u3044\u306a\u30fc\u3068\u601d\u3063\u3066\u3044\u308b\u4eba\n* \u3044\u308d\u3044\u308d\u60c5\u5831\u306f\u3042\u308b\u3051\u3069\u4f55\u304b\u3089\u59cb\u3081\u305f\u3089\u3044\u3044\u3093\u3060\uff1f\u3068\u601d\u3063\u3066\u3044\u308b\u4eba\n\n\u3061\u307e\u305f\u306b\u306fBabel\u3084ES2016\u3084Gulp\u3084Webpack\u3084Bower\u3084React\u306a\u3069\u306e\u4fbf\u5229\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u6df7\u305c\u308b\u3068\u8a33\u304c\u308f\u304b\u3089\u306a\u304f\u306a\u308b\u306e\u3067\u672c\u8a18\u4e8b\u3067\u306f\u30d4\u30e5\u30a2\u306aJavaScript\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\u306a\u306e\u3067\u3068\u3066\u3082\u3081\u3093\u3069\u304f\u3055\u3044\u30ec\u30ac\u30b7\u30fc\u306a\u4f5c\u308a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u3060\u3051\u306f\u5c11\u3057\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nWeb\u30b5\u30fc\u30d3\u30b9\u306f\u6700\u8fd1\u6d41\u884c\u308a\u306e\u30b5\u30fc\u30d0\u30ec\u30b9\u3067\u306f\u306a\u304fnodejs+express\u3067\u3059\u3002\n\n\u826f\u3055\u3052\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f[SPA\u3092\u3064\u304f\u308b\u305f\u3081\u306b\u4f7f\u3063\u305f\u3082\u306e\u305f\u3061](http://qiita.com/itagakishintaro/items/bfc7d1d332935b380c46)\u306a\u3069\u4ed6\u306e\u65b9\u304c\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n## \u4f5c\u308b\u3082\u306e\n\n* \u30b9\u30de\u30db\u304b\u3089\u5199\u771f\u3092\u64ae\u3063\u3066\u30b5\u30fc\u30d0\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u95b2\u89a7\u3059\u308b\u30b5\u30fc\u30d3\u30b9\n\n\u30e2\u30d0\u30a4\u30eb\u30b5\u30fc\u30d3\u30b9\u3068\u8a00\u3063\u3066\u3082\u53e4\u304f\u306f\u30af\u30e9\u30b5\u30d0\u306e\u5ef6\u9577\u306a\u306e\u3067\u30b7\u30f3\u30d7\u30eb\u306a\u30b1\u30fc\u30b9\u3092\u5bfe\u8c61\u3068\u3057\u307e\u3057\u305f\u3002\n\n\u7d30\u304b\u304f\u8a00\u3046\u3068\u4ee5\u4e0b\u306e\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n* \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n    * \u5199\u771f\u3092\u53d6\u308b\n    * \u5199\u771f\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\n* \u30b5\u30fc\u30d0\n    * \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u5199\u771f\u3092\u4fdd\u5b58\u3059\u308b\n    * \u4fdd\u5b58\u3055\u308c\u305f\u5199\u771f\u306e\u4e00\u89a7\u3092\u8fd4\u5374\u3059\u308b\n\n\u4f5c\u6210\u6e08\u307f\u306e\u30bd\u30fc\u30b9\u306f\u305d\u308c\u305e\u308c[sample-app](https://github.com/tomo-chan/sample-app)\u3068[sample-server](https://github.com/tomo-chan/sample-server)\u306b\u3042\u308a\u307e\u3059\u3002\n\n## \u6e96\u5099\n\n\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n* \u30c4\u30fc\u30eb\n    * nodejs\n    * git\n    * Android-SDK\uff08\u4eca\u56de\u306fAndroid\u3092\u5bfe\u8c61\u306b\u3059\u308b\u306e\u3067\uff09\n\n\u305d\u308c\u305e\u308c\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u30b0\u30b0\u3063\u3066\u304f\u3060\u3055\u3044\uff08\u30b5\u30dc\u308a\uff09\u3002\n\nnodejs\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30c6\u30b9\u30c8\u3084\u30c7\u30d0\u30c3\u30b0\u3067\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```shell-session\nnpm install -g cordova node-inspector mocha-pahtomjs istanbul\n```\n\n## \u69cb\u6210\n\n\u5b8c\u6210\u56f3\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n\u30a2\u30d7\u30ea\uff08JavaScript\uff09 <--> Web\u30b5\u30fc\u30d3\u30b9\uff08JavaScript\uff09\n\n\u30a2\u30d7\u30ea\u306f\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3001Web\u30b5\u30fc\u30d3\u30b9\u306fnodejs\u306a\u306e\u3067JavaScript\u3060\u3051\u3067\u958b\u767a\u4fdd\u5b88\u3067\u304d\u307e\u3059\u3002\u5b66\u7fd2\u30b3\u30b9\u30c8\u3082\u4f4e\u304f\u306a\u308a\u307e\u3059\u306d\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n```\n\u252c sample-app       \u30fb\u30fb\u30fb\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff09\n\u2514 sample-server    \u30fb\u30fb\u30fbWeb\u30b5\u30fc\u30d3\u30b9\uff08\u30b5\u30fc\u30d0\uff09\n```\n\n## \u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\n\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3068\u3044\u3046\u306e\u306fHTML+JavaScript+CSS\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30a2\u30d7\u30ea\u306e\u3053\u3068\u3067\u3059\u3002\n\uff08\u3044\u308d\u3044\u308d\u8a00\u3044\u65b9\u306f\u3042\u308a\u307e\u3059\u304c\u3053\u3053\u3067\u306f\uff09\u3059\u3079\u3066OS\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u8a00\u8a9e\u3067\u5b9f\u88c5\u3055\u308c\u305f\u30a2\u30d7\u30ea\u3092Native\u30a2\u30d7\u30ea\u3068\u8a00\u3044\u307e\u3059\u3002\n\n* \u30e1\u30ea\u30c3\u30c8\n    * Android\u3084iOS\u3067\u3082Windows\u3067\u3082\uff08\u307b\u307c\uff09\u540c\u3058\u30b3\u30fc\u30c9\u3067\u52d5\u4f5c\u3059\u308b\u306e\u3067\u4fdd\u5b88\u6027\u304c\u9ad8\u3044\n    * JavaScript\u306a\u306e\u3067\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u4f4e\u3044\n* \u30c7\u30e1\u30ea\u30c3\u30c8\n    * Native\u30a2\u30d7\u30ea\u306b\u6bd4\u3079\u3066WebView\u304c\u9593\u306b\u631f\u307e\u3063\u3066\u3044\u308b\u5206\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u4f4e\u3044\n\n\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u8981\u6c42\u3055\u308c\u308b\u30a2\u30d7\u30ea\u306fNative\u306e\u65b9\u304c\u826f\u3044\u3067\u3059\u306d\u3002\n\u305f\u3060\u6700\u8fd1\u306eWebView\u306e\u6027\u80fd\u304c\u826f\u304f\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3068Cordova Plugin\u3067\u91cd\u305f\u3044\u4e00\u90e8\u5206\u3060\u3051Native\u3067\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3082\u6368\u3066\u305f\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n### \u6e96\u5099\n\n\u307e\u305a\u306f\u30a2\u30d7\u30ea\u958b\u767a\u306e\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\n`cordova`\u3092\u4f7f\u7528\u3057\u3066\u30a2\u30d7\u30ea\u306e\u3072\u306a\u578b\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```shell-session\ncordova create sample-app com.tomochan.sample \"Sample App\"\ncd sample-app\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nsample-app\n    \u251c hooks\n    \u251c platforms\n    \u251c plugins\n    \u251c www\n    |    \u251c css\n    |    \u251c img\n    |    \u251c js\n    |    \u2514 index.html\n    \u2514  config.xml\n```\n\n\n\u3072\u306a\u5f62\u306e\u4e2d\u8eab\u3092\u898b\u308b\u3068\u3044\u304f\u3064\u304b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u304c\u3001\u57fa\u672c\u7684\u306b`www`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3060\u3051\u3092\u89e6\u308a\u307e\u3059\u3002\n\n\u4f5c\u6210\u3059\u308b\u30a2\u30d7\u30ea\u306eOS\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306fWindows\u3067\u3082Mac\u3067\u3082\u5b9f\u884c\u53ef\u80fd\u306aAndroid\u306b\u3057\u307e\u3059\u3002\n\n```shell-session\ncordova platform add android\n```\n\n\u307e\u305a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u72b6\u614b\u3067\u30a2\u30d7\u30ea\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\u5b9f\u6a5f\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\u306fUSB\u3067PC\u3068\u7e4b\u3044\u3067\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n```shell-session\ncordova build\ncordova run\n```\n\n\u30b9\u30de\u30db\u306e\u753b\u9762\u306bCordova\u306e\u30a2\u30a4\u30b3\u30f3\u304c\u8868\u793a\u3055\u308c\u3066DEVICE IS READY\u306e\u6587\u5b57\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\nCordova\u3092\u4f7f\u7528\u3057\u305f\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u30a2\u30d7\u30ea\u3067\u306fPlugin\u306a\u3069\u306e\u521d\u671f\u5316\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089deviceready\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3057\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u306e\u30ed\u30b8\u30c3\u30af\u306f\u306e\u3053deviceready\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u5f8c\u306b\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n### \u5199\u771f\u3092\u64ae\u3063\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u6a5f\u80fd\u306e\u5b9f\u88c5\n\nCordova\u3067\u306fNative\u30a2\u30d7\u30ea\u3067\u5229\u7528\u53ef\u80fd\u306a\u6a5f\u80fd\uff08\u30ab\u30e1\u30e9\u3084\u30bb\u30f3\u30b5\u30fc\u60c5\u5831\u53d6\u5f97\u306a\u3069\uff09\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306bPlugin\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u305d\u306ePlugin\u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u5199\u771f\u3092\u64ae\u3063\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f[Camera plugin](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-camera/)\u3068[File Transfer plugin](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file-transfer/index.html)\u3092\u5229\u7528\u3057\u3066\u5199\u771f\u3092\u53d6\u5f97\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```shell-session\ncordova plugin add cordova-plugin-camera cordova-plugin-file-transfer\n```\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068Plugin\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\nPlugin\u306f\u516c\u5f0f\u30843rd party\u306ePlugin\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u81ea\u5206\u3067\u4f5c\u6210\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u696d\u52d9\u3067\u4f7f\u3046\u5834\u5408\u306f\u81ea\u524d\u3067\u4f5c\u6210\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3053\u3068\u3082\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u5225\u8a18\u4e8b\u3067\u7d39\u4ecb\u3067\u304d\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\nPlugin\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089HTML\u3068JavaScript\u5074\u306e\u30bd\u30fc\u30b9\u3092\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n#### \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4f5c\u6210\n\n\u307e\u305a\u306f\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4f5c\u6210\u3067\u3059\u3002\n\u9014\u4e2d\u306e`npm init`\u3067\u3044\u308d\u3044\u308d\u805e\u304b\u308c\u307e\u3059\u304c\u306f\u5f8c\u3067\u7de8\u96c6\u3067\u304d\u308b\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067OK\u3067\u3059\u3002\n\u307e\u305f\u3001\u4eca\u56de\u306fGUI\u304c\u7d61\u3080\u306e\u3067mocha-phantomjs\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n```shell-session\nnpm init\nnpm install --save-dev mocha chai sinon\n```\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u30c6\u30b9\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\ntests\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08\u5927\u3057\u305f\u5b9f\u88c5\u3092\u3057\u306a\u3044\u306e\u3067\u30c6\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\uff09\n\n```shell-session\nmkdir tests\n```\n\n\n* tests/test.html\n\nHTML\u306f[mocha-phantomjs\u516c\u5f0f](https://github.com/nathanboktae/mocha-phantomjs)\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u3002\n<!--testcode:start --><!-- testcode:end -->\u3067\u62ec\u3089\u308c\u3066\u3044\u308b\u90e8\u5206\u304c\u30c6\u30b9\u30c8\u3067\u4f7f\u7528\u3059\u308b\u90e8\u5206\u3067\u3059\u3002\nphantomjs\u304b\u3089\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092node_modules\u304b\u3089\u76f4\u63a5\u53c2\u7167\u3057\u3066\u3044\u307e\u3059\u3002\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <title>Test</title>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link href=\"../node_modules/mocha/mocha.css\" rel=\"stylesheet\">\n  </head>\n  <body>\n    <div id=\"mocha\"></div>\n    <!-- testcode:start -->\n    <img id=\"capture-image\" />\n    <ul id=\"image-list\"></ul>\n    <!-- testcode:end -->\n    <script src=\"../node_modules/mocha/mocha.js\"></script>\n    <script src=\"../node_modules/chai/chai.js\"></script>\n    <script src=\"../node_modules/sinon/pkg/sinon.js\"></script>\n    <script>\n      mocha.ui('bdd')\n      expect = chai.expect\n    </script>\n    <script src=\"../www/js/actions.js\"></script>\n    <script src=\"../www/js/logics.js\"></script>\n    <script src=\"config.js\"></script>\n    <script src=\"spec.js\"></script>\n    <script>\n      mocha.run()\n    </script>\n  </body>\n</html>\n```\n\n\n* tests/spec.js\n\nbefore\u3067Cordova Plugin\u306eMock\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u30b1\u30fc\u30b9\u306f\u6570\u304c\u591a\u304f\u306a\u308b\u3068\u7ba1\u7406\u304c\u96e3\u3057\u304f\u306a\u308b\u306e\u3067\u9803\u5408\u3044\u3092\u898b\u3066\u5206\u5272\u3057\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\u6700\u521d\u304b\u3089\u304d\u308c\u3044\u306b\u5206\u5272\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u9006\u306b\u6c5a\u304f\u306a\u308b\u306e\u3067\u6700\u521d\u306f\u307e\u3068\u3081\u3066\u3057\u307e\u3063\u3066\u3082\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n```javascript\nvar assert = chai.assert;\n\ndescribe('actions.js', function() {\n\n  beforeEach(function() {\n    alert = sinon.spy();\n  });\n  afterEach(function() {\n    var image = document.getElementById('capture-image');\n    delete image.src;\n  });\n\n  describe('showImage', function() {\n    it('should show an image', function() {\n      var uri = 'tests/files/test.jpg';\n      showImage(uri);\n      var img = document.getElementById('capture-image');\n      expect(img.src).to.contains(uri);\n    });\n  });\n  describe('getImageUrl', function() {\n      var uri = 'tests/files/test.jpg';\n      var img = document.getElementById('capture-image');\n      img.src = uri;\n      var imageUrl = getImageUrl();\n      expect(imageUrl).to.contains(uri);\n  });\n  describe('showImageList', function() {\n      var images = ['tests/files/test.jpg', 'tests/files/test.jpg'];\n      showImageList(images);\n      var list = document.getElementById('image-list');\n      expect(list.childNodes.length).to.equal(images.length);\n  });\n\n});\n\ndescribe('logics.js', function() {\n  before(function(){\n    if(navigator && !navigator.camera) {\n      navigator.camera = {};\n      navigator.camera.getPicture = function(scb, fcb, opt) {};\n    }\n    if(!window.FileTransfer) {\n      window.FileTransfer = function() {};\n      window.FileTransfer.prototype.upload = function(src, url, scb, fcb) {};\n    }\n  });\n  beforeEach(function() {\n    alert = sinon.spy();\n  });\n\n  describe('cameraBtnTouchendEventHandler', function() {\n    it('should get image url', function() {\n      uploadBtnTouchendEventHandler();\n    });\n  });\n  describe('cameraSuccessCallback', function() {\n    it('should get image url', function() {\n      var uri = 'tests/files/test.jpg';\n      cameraSuccessCallback(uri);\n      var img = document.getElementById('capture-image');\n      expect(img.src).to.contains(uri);\n    });\n  });\n  describe('cameraFailureCallback', function() {\n    it('should get alert', function() {\n      cameraFailureCallback('error');\n      expect(alert.args[0][0]).to.equal('Error: error');\n    });\n  });\n\n  describe('uploadBtnTouchendEventHandler', function() {\n    it('should upload image', function() {\n      uploadBtnTouchendEventHandler();\n    });\n  });\n  describe('uploadSuccessCallback', function() {\n    it('should success', function() {\n      uploadSuccessCallback({\"responseCode\": 200, \"response\": \"\", \"bytesSent\": 100});\n      expect(alert.args[0][0]).to.equal('success');\n    });\n  });\n  describe('uploadFailureCallback', function() {\n    it('should get alert', function() {\n      uploadFailureCallback({\"code\": -1, \"source\": \"src\", \"target\": \"target\"});\n      expect(alert.args[0][0]).to.equal(\"Error: -1\");\n    });\n  });\n  \n  describe('showImagesBtnTouchendEventHandler', function() {\n    it('should upload image', function() {\n      showImagesBtnTouchendEventHandler();\n    });\n  });\n});\n```\n\n\n* JavaScript (tests/config.js)\n\n\u30c6\u30b9\u30c8\u6642\u306e\u30b5\u30fc\u30d0\u63a5\u7d9a\u5148\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u63a5\u7d9a\u5148\u3092\u5206\u96e2\u3057\u3066\u3044\u308b\u7406\u7531\u306f\u30c6\u30b9\u30c8\u74b0\u5883\u3084\u672c\u756a\u74b0\u5883\u3067\u63a5\u7d9a\u5148\u304c\u7570\u306a\u308b\u5834\u5408\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\n```javascript\nENV = {\n    \"serverurl\": \"http://localhost:3000/\"\n  };\n```\n\n\n#### \u5b9f\u88c5\n\n\u6b21\u306b\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u65e2\u5b58\u306e\u30bd\u30fc\u30b9\u306e\u3044\u3089\u306a\u3044\u3068\u3053\u308d\u306f\u6d88\u3057\u3066actions.js\u3068logics.js\u3092\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n\u95a2\u6570\u304c\u30b0\u30ed\u30fc\u30d0\u30eb\u3060\u3063\u305f\u308a\u30d5\u30a1\u30a4\u30eb\u5916\u306e\u5909\u6570\u3092\u53c2\u7167\u3057\u3066\u3044\u305f\u308a\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u304c\u3046\u3056\u3044\u306a\u3069\u826f\u304f\u306a\u3044\u66f8\u304d\u65b9\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u6d41\u884c\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u7528\u3059\u308c\u3070\u304b\u306a\u308a\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\n* www/index.html\n\n\u7c21\u5358\u306aUI\u8981\u7d20\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u307e\u305fXMLHttpRequest\u3067http\u306e\u30b5\u30fc\u30d0\u3068\u901a\u4fe1\u3059\u308b\u306e\u3067Content-Security-Policy\u306bconnect-src http:;\u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```html\n\uff5e\n<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:; connect-src http:;\">\n\uff5e\n<body>\n    <input id=\"camera-btn\" type=\"button\" value=\"\u30ab\u30e1\u30e9\u8d77\u52d5\" />\n    <input id=\"upload-btn\" type=\"button\" value=\"\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\" />\n    <input id=\"showimages-btn\" type=\"button\" value=\"\u5199\u771f\u306e\u4e00\u89a7\u3092\u8868\u793a\" />\n    <div>\n        <ul id=\"image-list\"></ul>\n        <img id=\"capture-image\" />\n    </div>\n    <script type=\"text/javascript\" src=\"cordova.js\"></script>\n    <script type=\"text/javascript\" src=\"js/actions.js\"></script>\n    <script type=\"text/javascript\" src=\"js/logics.js\"></script>\n    <script type=\"text/javascript\" src=\"config.js\"></script>\n</body>\n```\n\n* www/js/actions.js\n\nactions.js\u3067\u306f\u4e3b\u306bUI\u5468\u308a\u306e\u51e6\u7406\u3092\u8a18\u8ff0\u3057\u3066\u3044\u307e\u3059\u3002\nUI\u3068\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3057\u3066\u3044\u308b\u7406\u7531\u306f\u3001\u30ed\u30b8\u30c3\u30af\u306bDOM\u64cd\u4f5c\u3092\u542b\u3080\u3068\u4f9d\u5b58\u95a2\u4fc2\u304c\u8907\u96d1\u306b\u306a\u308a\u30c6\u30b9\u30c8\u304c\u96e3\u3057\u304f\u306a\u308b\u305f\u3081\u3067\u3059\u3002\n\n```javascript\nfunction onDeviceReady(evt) {\n    var cameraBtn = document.getElementById('camera-btn');\n    cameraBtn.addEventListener('click', cameraBtnTouchendEventHandler);\n\n    var uploadBtn = document.getElementById('upload-btn');\n    uploadBtn.addEventListener('click', uploadBtnTouchendEventHandler);\n\n    var showImagesBtn = document.getElementById('showimages-btn');\n    showImagesBtn.addEventListener('click', showImagesBtnTouchendEventHandler);\n}\n\nfunction showImage(imageUrl) {\n    var image = document.getElementById('capture-image');\n    image.src = imageUrl;\n}\n\nfunction getImageUrl() {\n    var image = document.getElementById('capture-image');\n    return image.src;\n}\n\nfunction showImageList(images) {\n    var ul = document.getElementById('image-list');\n    var li = document.createElement('li');\n    images.forEach(function(image) {\n        var l = li.cloneNode();\n        l.textContent = image;\n        ul.appendChild(l);\n    });\n}\n\nfunction showResult(err, msg) {\n    if(err) {\n        alert('Error: ' + err);\n    } else {\n        alert(msg);\n    }\n}\n\ndocument.addEventListener('deviceready', onDeviceReady);\n```\n\n* www/js/logics.js\n\nlogics\u3067\u306fUI\u5468\u308a\u306e\u51e6\u7406\u306f\u5b9f\u884c\u3057\u307e\u305b\u3093\u3002\n\n```javascript\nfunction cameraBtnTouchendEventHandler(evt) {\n    navigator.camera.getPicture(cameraSuccessCallback, cameraFailureCallback);\n}\n\nfunction cameraSuccessCallback(imageUrl) {\n    console.log('success');\n    showImage(imageUrl);\n}\n\nfunction cameraFailureCallback(msg) {\n    showResult(msg);\n}\n\nfunction uploadBtnTouchendEventHandler(evt) {\n    var imageUrl = getImageUrl();\n    var ft = new FileTransfer();\n    ft.upload(imageUrl, encodeURI(ENV.serverurl + \"api/v1/images\"), \n      uploadSuccessCallback, uploadFailureCallback);\n}\n\nfunction uploadSuccessCallback(result) {\n    showResult(null, 'success');\n}\n\nfunction uploadFailureCallback(error) {\n    showResult(error.code);\n}\n\nfunction showImagesBtnTouchendEventHandler(evt) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', ENV.serverurl + 'api/v1/images');\n    xhr.onload = function() {\n        if(xhr.readyState === 4) {\n            if(xhr.status === 200) {\n                var images = JSON.parse(xhr.response);\n                showImageList(images.files);\n            } else {\n                showResult(xhr.status);\n            }\n        }\n    };\n    xhr.send();\n}\n```\n\n\n\u30a2\u30d7\u30ea\u3092\u5b9f\u884c\u3057\u3066\u5199\u771f\u3092\u64ae\u5f71\u3059\u308b\u3068\u753b\u9762\u4e0a\u306b\u5199\u771f\u304c\u8868\u793a\u3055\u308c\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\u6b21\u306b\u3053\u308c\u3092Web\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308bWeb\u30b5\u30fc\u30d3\u30b9\u306f\u6b21\u7ae0\u3067\u4f5c\u6210\u3059\u308b\u3068\u3057\u3066\u3053\u3053\u3067\u306f\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u51e6\u7406\u3060\u3051\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f`ENV.serverurl + api/v1/images`\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n#### \u30c6\u30b9\u30c8\n\n\u5b9f\u88c5\u304c\u5b8c\u4e86\u3057\u305f\u3089\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\n\npackage.json\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n* package.json (\u4e00\u90e8\u629c\u7c8b)\n\n```json\n  \"scripts\": {\n    \"test\": \"mocha-phantomjs -R dot tests/test.html\"\n  },\n```\n\n`npm run test`\u3068\u5b9f\u884c\u3059\u308b\u3068\u30c6\u30b9\u30c8\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\nAndroid5.0\u4ee5\u964d\u3067\u3042\u308c\u3070Chrome\u3067\u30c7\u30d0\u30c3\u30b0\u3067\u304d\u308b\u306e\u3067\u3053\u3053\u3067\u306fdebug\u306f\u66f8\u3044\u3066\u3044\u306a\u3044\u3067\u3059\u3002\n\u5b9f\u6a5f\u3067\u30c7\u30d0\u30c3\u30b0\u3059\u308b\u5834\u5408\u306f`cordova run`\u306e\u3042\u3068\u306bChrome\u30d6\u30e9\u30a6\u30b6\u3092\u958b\u3044\u3066\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u304b\u3089`chrome://inspect/`\u3092\u958b\u3044\u3066\u304f\u3060\u3055\u3044\u3002\nAndroid4\u4ee5\u524d\u306fCrosswalk\u3092\u4f7f\u7528\u3057\u3066\u5c11\u3057\u3044\u3058\u308b\u3068\u3067\u304d\u307e\u3059\u3002\n\n## Web\u30b5\u30fc\u30d3\u30b9\n\n\u6b21\u306bWeb\u30b5\u30fc\u30d3\u30b9\u5074\u306e\u8aac\u660e\u3092\u3057\u307e\u3059\u3002\nyeoman\u306a\u3069\u306eboilertemplate\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3042\u308c\u306f\u308f\u304b\u3063\u3066\u3044\u308b\u4eba\u7528\u3067\u308f\u304b\u3089\u306a\u3044\u4eba\u304c\u89e6\u308b\u3068\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u3068\u601d\u3046\u306e\u3067\u3053\u3053\u3067\u306f\u4f7f\u3044\u307e\u305b\u3093\u3002\n\n### \u3072\u306a\u5f62\u3092\u4f5c\u6210\n\nWeb\u30b5\u30fc\u30d3\u30b9\u306fnodejs+Express\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\u30a2\u30d7\u30ea\u3068\u540c\u3058\u8a00\u8a9e\u3067\u5b9f\u88c5\u3067\u304d\u308b\u306e\u3067\u5c0e\u5165\u30b3\u30b9\u30c8\u304c\u4f4e\u3044\u3067\u3059\u306d\u3002\n\nsample-server\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u3001\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u9014\u4e2d\u306e`npm init`\u3067\u3044\u308d\u3044\u308d\u805e\u304b\u308c\u307e\u3059\u304c\u306f\u5f8c\u3067\u7de8\u96c6\u3067\u304d\u308b\u306e\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3067OK\u3067\u3059\u3002\nsample-app\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3044\u308b\u5834\u5408\u306f\u4e00\u65e6\u629c\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n```shell-session\nmkdir sample-server\nnpm init\nnpm install --save express multer fs path\nnpm install --save-dev \n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u3059\u3002\nserver.js\u3068app.js\u3092\u5206\u3051\u3066\u3044\u308b\u7406\u7531\u306fAWS\u306a\u3069\u306e\u30b5\u30fc\u30d3\u30b9\u3068\u9023\u643a\u3059\u308b\u5834\u5408\u306e\u30c6\u30b9\u30c8\u3067Mock\u3092\u4f7f\u3044\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3067\u3059\uff08\u3042\u307e\u308a\u610f\u5473\u306f\u306a\u3044\u304b\u3082\uff09\u3002\n\n```\nsample-server\n    \u251c controllers\n    |    \u2514 uploads.js\n    \u251c tests\n    |    \u2514 spec.js\n    \u251c app.js\n    \u251c server.js\n    \u2514 package.json\n```\n\n### Web\u30b5\u30fc\u30d3\u30b9\u6a5f\u80fd\u306e\u5b9f\u88c5\n\n\u5b9f\u88c5\u3059\u308b\u6a5f\u80fd\u306f\u4ee5\u4e0b\u306e2\u3064\u3067\u3059\u3002\n\n* \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3059\u308b\u6a5f\u80fd\n* \u4fdd\u5b58\u3055\u308c\u305f\u753b\u50cf\u3092\u4e00\u89a7\u8868\u793a\u3059\u308b\u6a5f\u80fd\n\n#### \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\n\u6a5f\u80fd\u305d\u308c\u305e\u308c\u306b\u95a2\u3059\u308b\u30c6\u30b9\u30c8\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f\u30c6\u30b9\u30c8\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```shell-session\nnpm init\nnpm install --save-dev mocha chai supertest\n```\n\ntests\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3066\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08\u5927\u3057\u305f\u5b9f\u88c5\u3092\u3057\u306a\u3044\u306e\u3067\u30c6\u30b9\u30c8\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\uff09\n\n```shell-session\nmkdir tests\n```\n\n* tests/spec.js\n\n\u30c6\u30b9\u30c8\u3067\u306fapi/v1/images\u306eGET\u3068POST\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u308c\u305e\u308c\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n\n```javascript\nvar request = require('supertest');\nvar chai    = require('chai');\nvar assert  = chai.assert;\n\nvar app     = require('../app');\n\ndescribe(\"API: \", function() {\n  describe('/images', function(done) {\n    it('GET', function() {\n      request(app)\n        .get('/api/v1/images')\n        .expect('Content-Type', /json/)\n        .expect(200, {\"files\": []}, done);\n    });\n    it('POST', function(done) {\n      request(app)\n        .post('/api/v1/images')\n        .attach('file', 'tests/files/test.jpg')\n        .expect(200)\n        .end(function(err, res) {\n          if (err) return done(err);\n          done();\n        });\n    });\n  });\n});\n```\n\n#### \u5b9f\u88c5\n\n\u6b21\u306b\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\nExpress\u306e\u57fa\u672c\u7684\u306a\u90e8\u5206\u3057\u304b\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u7c21\u5358\u306b\u8aac\u660e\u3057\u307e\u3059\u3002\n\n* app.js\n\n\u30b5\u30fc\u30d0\u306e\u57fa\u672c\u90e8\u5206\u3067\u3059\u3002\nmiddleware\u306e\u8a2d\u5b9a\u306a\u3069\u3082\u3053\u3053\u3067\u5b9f\u65bd\u3057\u307e\u3059\u304c\u4eca\u56de\u306f\u7279\u306b\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n```javascript\nvar express = require('express');\n\nvar images  = require('./controllers/images');\n\nvar app     = express();\nvar router  = express.Router();\n\napp.use('/',              router);\napp.use('/api/v1/images', images);\n\nmodule.exports = app;\n```\n\n* controllers/images.js\n\n\u753b\u50cf\u306e\u53d6\u5f97\u3068\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306eAPI\u306e\u5b9f\u88c5\u90e8\u5206\u3067\u3059\u3002\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u306b\u306fmulter\u3092\u4f7f\u7528\u3057\u3066\u30b5\u30fc\u30d0\u306euploads/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\n\n```javascript\nvar express = require('express');\nvar router  = express.Router();\n\nvar fs       = require('fs');\nvar multer   = require('multer');\nvar imageDir = 'uploads/';\nvar upload   = multer({\"dest\": imageDir});\n\nrouter.get('/', function(req, res) {\n    fs.readdir(imageDir, function(err, files) {\n      if(err) {\n        res.status(500).send();\n      } else {\n        res.json({\"files\": files});\n      }\n    });\n});\n\nrouter.post('/', upload.single('file'), function(req, res) {\n    var image = req.file;\n    if(!image) {\n      res.status(400).send();\n    } else {\n      res.send();\n    }\n});\n\nmodule.exports = router;\n```\n\n#### \u30c6\u30b9\u30c8\n\n\u5b9f\u88c5\u3057\u305f\u30bd\u30fc\u30b9\u304c\u554f\u984c\u306a\u3044\u304b\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\npackage.json\u306b\u30c6\u30b9\u30c8\u5b9f\u884c\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002\n\n* package.json (\u4e00\u90e8\u629c\u7c8b)\n\n```json\n  \"scripts\": {\n    \"test\": \"istanbul cover node_modules/mocha/bin/_mocha --print none --report html -- tests/*.js -R tap\",\n    \"testdebug\": \"mocha --debug --debug-brk ./tests/*.js\",\n    \"start\": \"node server.js\",\n    \"debug\": \"node-debug server.js\"\n  },\n```\n\n\u30c6\u30b9\u30c8\u5b9f\u884c\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u3089`npm run test`\u3068\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u304c\u5b8c\u4e86\u3059\u308b\u3068coverage\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u3067\u304d\u3066\u3044\u3066\u30c6\u30b9\u30c8\u306e\u30ab\u30d0\u30ec\u30c3\u30b8\u7387\u3084\u30c6\u30b9\u30c8\u304c\u901a\u3063\u305f\u30eb\u30fc\u30c8\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u672c\u8a18\u4e8b\u306e\u30c6\u30b9\u30c8\u306f\u30a8\u30e9\u30fc\u7cfb\u306e\u30c6\u30b9\u30c8\u3092\u5b9f\u65bd\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u30ab\u30d0\u30ec\u30c3\u30b8\u7387\u306f\u6b8b\u5ff5\u306a\u3053\u3068\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u30fb\u30fb\u30fb\n\ndebug\u307e\u305f\u306ftestdebug\u3092\u5b9f\u884c\u3059\u308b\u30685858\u7248\u30dd\u30fc\u30c8\u3067\u5f85\u3061\u53d7\u3051\u3059\u308b\u306e\u3067\u30a8\u30c7\u30a3\u30bf\u306a\u3069\u3067\u30c7\u30d0\u30c3\u30b0\u3067\u304d\u307e\u3059\u3002\n\u79c1\u306fVS Code\u306e\u30c7\u30d0\u30c3\u30ac\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u5b9f\u884c\n\n\u30c6\u30b9\u30c8\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3042\u3068\u306f\u5b9f\u969b\u306b\u7e4b\u3052\u3066\u307f\u307e\u3059\u3002\nsample-app/www/config.js\u306eserverurl\u3092\u81ea\u5206\u306ePC\u306eIP\u30a2\u30c9\u30ec\u30b9\u306b\u3057\u307e\u3059\u3002\n3000\u756a\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306f\u4e00\u6642\u7684\u306b\u5207\u3063\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\u78ba\u8a8d\u3067\u304d\u305f\u3089\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```javascript\nvar ENV = {\n    \"serverurl\": \"http://192.168.*.*:3000/\"\n};\n```\n\n\u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3057\u3066\u5b9f\u6a5f\u3067\u5b9f\u884c\u3055\u305b\u307e\u3059\u3002\n\n```\ncordova build\ncordova run\n```\n\nsample-server\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```shell\nnpm run start\n```\n\n\u30b9\u30de\u30db\u3067\u5199\u771f\u3092\u64ae\u3063\u3066\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nsample-server/uploads\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u308b\u3001\u307e\u305f\u306f\u5199\u771f\u306e\u4e00\u89a7\u3092\u8868\u793a\u30dc\u30bf\u30f3\u3067\u5199\u771f\u306e\u30d1\u30b9\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3067\u304d\u305f\u3089\u6210\u529f\u3067\u3059\u3002\n\n\u3053\u306e\u3042\u3068\u30c7\u30d7\u30ed\u30a4\u301c\u904b\u7528\u3068\u7d9a\u304d\u307e\u3059\u304c\u307e\u305f\u306e\u6a5f\u4f1a\u306b\u3067\u304d\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["JavaScript", "nodejs", "Express", "test", "Cordova"]}