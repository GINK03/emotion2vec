{"context": " More than 1 year has passed since last update.\u7b2c\u4e09\u56de \u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u306e\u53c2\u8003\u554f\u984c\u3092Dart\u3067\u89e3\u3044\u3066\u307f\u307e\u3057\u305f\u3002\nhttp://qiita.com/items/ebd8a56b41711ba459f9\nmain() {\n  print(play(\"ssffpffssp\"));\n}\n\nfinal BALL = 4;\nfinal STRIKE = 3;\nfinal OUT = 3;\n\nclass State {\n  int ball, strike, out;\n  State(this.ball, this.strike, this.out);\n}\n\nString play(String input) {\n  var state = new State(0, 0, 0);\n\n  String update({int strike: 0, int ball: 0, int out: 0}) {\n    state.ball += ball;\n    if(BALL <= state.ball) {\n      state.ball = state.strike = 0;\n    }\n\n    state.strike += strike;\n    if(STRIKE <= state.strike) {\n      out = 1;\n      state.ball = state.strike = 0;\n    }\n\n    state.out += out;\n    if(out != 0) {\n      state.strike = state.ball = 0;\n      if(OUT <= state.out) state.out = 0;\n    }\n\n    return \"${state.out}${state.strike}${state.ball}\";\n  }\n\n  return input.split(\"\").map((s) {\n    switch(s) {\n      case \"s\": return update(strike: 1);\n      case \"b\": return update(ball: 1);\n      case \"h\": return update(ball: BALL);\n      case \"f\": return update(strike: (state.strike < 2 ? 1 : 0));\n      case \"p\": return update(out: 1);\n    }\n  }).join(\",\");\n}\n\n\u7b2c\u4e09\u56de \u30aa\u30d5\u30e9\u30a4\u30f3\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3069\u3046\u66f8\u304f\u306e\u53c2\u8003\u554f\u984c\u3092Dart\u3067\u89e3\u3044\u3066\u307f\u307e\u3057\u305f\u3002\nhttp://qiita.com/items/ebd8a56b41711ba459f9\n\n```dart\nmain() {\n  print(play(\"ssffpffssp\"));\n}\n\nfinal BALL = 4;\nfinal STRIKE = 3;\nfinal OUT = 3;\n\nclass State {\n  int ball, strike, out;\n  State(this.ball, this.strike, this.out);\n}\n\nString play(String input) {\n  var state = new State(0, 0, 0);\n\n  String update({int strike: 0, int ball: 0, int out: 0}) {\n    state.ball += ball;\n    if(BALL <= state.ball) {\n      state.ball = state.strike = 0;\n    }\n\n    state.strike += strike;\n    if(STRIKE <= state.strike) {\n      out = 1;\n      state.ball = state.strike = 0;\n    }\n\n    state.out += out;\n    if(out != 0) {\n      state.strike = state.ball = 0;\n      if(OUT <= state.out) state.out = 0;\n    }\n\n    return \"${state.out}${state.strike}${state.ball}\";\n  }\n\n  return input.split(\"\").map((s) {\n    switch(s) {\n      case \"s\": return update(strike: 1);\n      case \"b\": return update(ball: 1);\n      case \"h\": return update(ball: BALL);\n      case \"f\": return update(strike: (state.strike < 2 ? 1 : 0));\n      case \"p\": return update(out: 1);\n    }\n  }).join(\",\");\n}\n```", "tags": ["Dart", "\u3069\u3046\u66f8\u304f"]}