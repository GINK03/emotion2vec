{"context": "Kotlin\u3067\u66f8\u3044\u3066\u3044\u308b\u30a2\u30d7\u30ea\u3067\u3001Retrofit2 + OkHttp3\u3067RSS\u3092\u53d6\u5f97\u3057\u305f\u3068\u304d\u306e\u3081\u3082\u3002\u6700\u521d\u3001\u3046\u307e\u304f\u30d1\u30fc\u30b9\u3055\u308c\u306a\u304f\u3066Kotlin\u306e\u554f\u984c\u306a\u306e\u304bRetrofit\u306e\u66f8\u304d\u65b9\u306e\u554f\u984c\u306a\u306e\u304b\u30b3\u30f3\u30d0\u30fc\u30bf\u306eSimple\u306e\u66f8\u304d\u65b9\u306e\u554f\u984c\u306a\u306e\u304b\u308f\u304b\u3089\u306a\u304f\u3066\u3061\u3087\u3063\u3068\u30cf\u30de\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u53d6\u5f97\u3059\u308b\u5bfe\u8c61\u306f\u3001\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306eRSS\u3067\u3059\u3002\nhttp://b.hatena.ne.jp/Rei19/favorite.rss\n\n\u6e96\u5099\n\napp/build.gradle\ndependencies {\n\n    ...\n\n    compile 'com.squareup.okhttp3:okhttp:3.2.0'\n    compile 'com.squareup.retrofit2:retrofit:2.0.2'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.0.2'\n    compile ('com.squareup.retrofit2:converter-simplexml:2.0.2'){\n        exclude module: 'stax'\n        exclude module: 'stax-api'\n        exclude module: 'xpp3'\n    }\n}\n\n\n\n\u5b9f\u88c5\n\nHttpClient\n// \u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3067Client\u3092\u4f5c\u3063\u3066\u304a\u304f    \nobject HttpClient {\n    val instance = OkHttpClient()\n}\n\n\n\nHatenaRssXml.kt\n// \u30d1\u30fc\u30b9\u7528\u306e\u30af\u30e9\u30b9 1\n// strict = false\u306b\u3057\u306a\u3044\u3068XML\u5185\u306e\u5168\u3066\u306e\u8981\u7d20\u3092class\u5185\u306b\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n@Root(name = \"rdf:RDF\", strict = false)\nclass HatenaRssXml {\n    // @ElementList(inline = true) \u3053\u308c\u3060\u3068\u30c0\u30e1\u3060\u3063\u305f\u3002\u3002\u3002\n    // @Jvmfield\u3092\u3064\u3051\u3066\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u8b0e\n    @set:ElementList(inline = true)\n    @get:ElementList(inline = true)\n    var list: List<HatenaRssItemXml>? = null\n}\n\n\n\nHatenaRssXml.kt\n// \u30d1\u30fc\u30b9\u7528\u306e\u30af\u30e9\u30b9 2\n@Root(name = \"item\", strict = false)\nclass HatenaRssItemXml {\n    @set:Element\n    @get:Element\n    var title: String = \"\"\n\n    @set:Element\n    @get:Element\n    var link: String = \"\"\n\n    @set:Element(required = false)\n    @get:Element(required = false)\n    var description: String = \"\"\n\n    // dc:creator\u307f\u305f\u3044\u306a : \u3067\u533a\u5207\u3089\u308c\u3066\u308b\u8981\u7d20\u306fPATH\u3092\u6307\u5b9a\u3059\u308b\n    @Path(\"dc/creator\")\n    @set:Element\n    @get:Element\n    var creator: String = \"\"\n}\n\n\n\nHatenaRssService.kt\ninterface HatenaRssService {\n    @GET(\"{userId}/favorite.rss\")\n    fun favorite(@Path(\"userId\") userId: String, @Query(\"of\") startIndex: Int): Observable<HatenaRssXml>\n    } \n\n\n\u4f7f\u3046\u3068\u304d\u306f\u3053\u3093\u306a\u611f\u3058\n    val adapter = Retrofit.Builder()\n            .baseUrl(\"http://b.hatena.ne.jp\")\n            .client(HttpClient.instance)    \n            .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n            .addConverterFactory(SimpleXmlConverterFactory.create())  // XML\u306e\u30b3\u30f3\u30d0\u30fc\u30bf\u3092\u6307\u5b9a\n            .build()\n\n    adapter.create(HatenaRssService::class.java)\n            .favorite(userId, startIndex)\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(\n                // \u3053\u306e\u3078\u3093\u3066\u304d\u3068\u3046 \n            )\n\nKotlin\u3067\u66f8\u3044\u3066\u3044\u308b\u30a2\u30d7\u30ea\u3067\u3001Retrofit2 + OkHttp3\u3067RSS\u3092\u53d6\u5f97\u3057\u305f\u3068\u304d\u306e\u3081\u3082\u3002\u6700\u521d\u3001\u3046\u307e\u304f\u30d1\u30fc\u30b9\u3055\u308c\u306a\u304f\u3066Kotlin\u306e\u554f\u984c\u306a\u306e\u304bRetrofit\u306e\u66f8\u304d\u65b9\u306e\u554f\u984c\u306a\u306e\u304b\u30b3\u30f3\u30d0\u30fc\u30bf\u306eSimple\u306e\u66f8\u304d\u65b9\u306e\u554f\u984c\u306a\u306e\u304b\u308f\u304b\u3089\u306a\u304f\u3066\u3061\u3087\u3063\u3068\u30cf\u30de\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\u53d6\u5f97\u3059\u308b\u5bfe\u8c61\u306f\u3001\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306eRSS\u3067\u3059\u3002\nhttp://b.hatena.ne.jp/Rei19/favorite.rss\n\n### \u6e96\u5099\n\n```groovy:app/build.gradle\ndependencies {\n\n    ...\n\n    compile 'com.squareup.okhttp3:okhttp:3.2.0'\n    compile 'com.squareup.retrofit2:retrofit:2.0.2'\n    compile 'com.squareup.retrofit2:adapter-rxjava:2.0.2'\n    compile ('com.squareup.retrofit2:converter-simplexml:2.0.2'){\n        exclude module: 'stax'\n        exclude module: 'stax-api'\n        exclude module: 'xpp3'\n    }\n}\n```\n\n### \u5b9f\u88c5\n\n```kotlin:HttpClient\n// \u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3067Client\u3092\u4f5c\u3063\u3066\u304a\u304f\t\nobject HttpClient {\n    val instance = OkHttpClient()\n}\n```\n\n```kotlin:HatenaRssXml.kt\n// \u30d1\u30fc\u30b9\u7528\u306e\u30af\u30e9\u30b9 1\n// strict = false\u306b\u3057\u306a\u3044\u3068XML\u5185\u306e\u5168\u3066\u306e\u8981\u7d20\u3092class\u5185\u306b\u5b9a\u7fa9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n@Root(name = \"rdf:RDF\", strict = false)\nclass HatenaRssXml {\n    // @ElementList(inline = true) \u3053\u308c\u3060\u3068\u30c0\u30e1\u3060\u3063\u305f\u3002\u3002\u3002\n    // @Jvmfield\u3092\u3064\u3051\u3066\u3082\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u8b0e\n    @set:ElementList(inline = true)\n    @get:ElementList(inline = true)\n    var list: List<HatenaRssItemXml>? = null\n}\n```\n\n```kotlin:HatenaRssXml.kt\n// \u30d1\u30fc\u30b9\u7528\u306e\u30af\u30e9\u30b9 2\n@Root(name = \"item\", strict = false)\nclass HatenaRssItemXml {\n    @set:Element\n    @get:Element\n    var title: String = \"\"\n\n    @set:Element\n    @get:Element\n    var link: String = \"\"\n\n    @set:Element(required = false)\n    @get:Element(required = false)\n    var description: String = \"\"\n\n    // dc:creator\u307f\u305f\u3044\u306a : \u3067\u533a\u5207\u3089\u308c\u3066\u308b\u8981\u7d20\u306fPATH\u3092\u6307\u5b9a\u3059\u308b\n    @Path(\"dc/creator\")\n    @set:Element\n    @get:Element\n    var creator: String = \"\"\n}\n```\n\n```kotlin:HatenaRssService.kt\ninterface HatenaRssService {\n    @GET(\"{userId}/favorite.rss\")\n    fun favorite(@Path(\"userId\") userId: String, @Query(\"of\") startIndex: Int): Observable<HatenaRssXml>\n    } \n```\n\n\u4f7f\u3046\u3068\u304d\u306f\u3053\u3093\u306a\u611f\u3058\n\n```kotlin\n    val adapter = Retrofit.Builder()\n            .baseUrl(\"http://b.hatena.ne.jp\")\n            .client(HttpClient.instance)    \n            .addCallAdapterFactory(RxJavaCallAdapterFactory.create())\n            .addConverterFactory(SimpleXmlConverterFactory.create())  // XML\u306e\u30b3\u30f3\u30d0\u30fc\u30bf\u3092\u6307\u5b9a\n            .build()\n\n    adapter.create(HatenaRssService::class.java)\n            .favorite(userId, startIndex)\n            .subscribeOn(Schedulers.newThread())\n            .observeOn(AndroidSchedulers.mainThread())\n            .subscribe(\n                // \u3053\u306e\u3078\u3093\u3066\u304d\u3068\u3046 \n            )\n```\n", "tags": ["Kotlin", "Android"]}