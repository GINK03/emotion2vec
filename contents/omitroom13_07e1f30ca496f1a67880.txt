{"context": "\nopenssl verify \u306b\u306f\u8a3c\u660e\u66f8\u3092\u691c\u8a3c\u3059\u308b\u305f\u3081\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3044\u308d\u3044\u308d\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u307f\u3048\u308b\u304c\u3001man \u3068 help \u3067\u4e56\u96e2\u304c\u3042\u308b\nman \u306b\u306f\u3042\u308b attime \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u6307\u5b9a\u3057\u305f\u6642\u523b\u3067\u8a3c\u660e\u66f8\u304c\u6709\u52b9\u304b\u3092\u78ba\u8a8d\u3067\u304d\u3066\u4fbf\u5229\u305d\u3046\u3060\u3063\u305f\u304c\u3001\u7d50\u5c40\u73fe\u6642\u70b9\u3067\u306f\u5b58\u5728\u3057\u306a\u3044\u3088\u3046\u3060\nman \u306b\u306f\u3042\u308b crlfile \u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u5b58\u5728\u3057\u306a\u3044\u304c\u3001\u3053\u308c\u306f CAfile \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4ee3\u66ff\u3067\u304d\u3001 crl_check/crl_check_all \u81ea\u4f53\u306f\u6a5f\u80fd\u3059\u308b\n\n$ openssl version\nOpenSSL 1.0.2g  1 Mar 2016\n\nman \u3067\u306f\u4fbf\u5229\u305d\u3046\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3044\u308d\u3044\u308d\u3042\u308b\u3088\u3046\u306b\u898b\u3048\u308b\u3002\u3053\u3053\u3067\u306f attime \u3068 crl_check_all \u3092\u4f7f\u304a\u3046\u3068\u3057\u305f\u3002\n$ man verify\nSYNOPSIS\n       openssl verify [-CApath directory] [-CAfile file] [-purpose purpose] [-policy arg]\n       [-ignore_critical] [-attime timestamp] [-check_ss_sig] [-crlfile file] [-crl_download]\n       [-crl_check] [-crl_check_all] [-policy_check] [-explicit_policy] [-inhibit_any]\n       [-inhibit_map] [-x509_strict] [-extended_crl] [-use_deltas] [-policy_print]\n       [-no_alt_chains] [-untrusted file] [-help] [-issuer_checks] [-trusted file] [-verbose] [-]\n       [certificates]\n\nDESCRIPTION\n       The verify command verifies certificate chains.\n\nCOMMAND OPTIONS\n...\n       -crlfile file\n           File containing one or more CRL's (in PEM format) to load.\n...\n       -attime timestamp\n           Perform validation checks using time specified by timestamp and not current system\n           time. timestamp is the number of seconds since 01.01.1970 (UNIX time).\n...\n       -crl_check_all\n           Checks the validity of all certificates in the chain by attempting to look up valid\n           CRLs.\n\n...\n\n\u30b3\u30de\u30f3\u30c9\u306e\u30d8\u30eb\u30d7\u3002\u4f7f\u3048\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c man \u3088\u308a\u5c11\u306a\u3044\uff1f\nopenssl verify -help\n\nusage: verify [-verbose] [-CApath path] [-CAfile file] [-purpose purpose] [-crl_check] [-no_alt_chains] [-attime timestamp] [-engine e] cert1 cert2 ...\nrecognized usages:\n    sslclient   SSL client\n    sslserver   SSL server\n    nssslserver Netscape SSL server\n    smimesign   S/MIME signing\n    smimeencrypt    S/MIME encryption\n    crlsign     CRL signing\n    any         Any Purpose\n    ocsphelper  OCSP helper\n    timestampsign   Time Stamp signing\n\nattime \u306f\u3044\u304b\u3093\u3068\u3082\u3057\u304c\u305f\u304b\u3063\u305f\u304c\u3001crl_check_all \u306f CAfile \u306b CA\u8a3c\u660e\u66f8\u3068\u4e00\u7dd2\u306b\u5165\u308c\u308b\u3053\u3068\u3067\u691c\u8a3c\u3067\u304d\u305f\u3002\n$ #cross root:OldWithNew\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/cacert.pem  > /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-2/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/certs/selfsign-ca-1/cert.pem  >> /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-1/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/server-ca-1/cacert.pem   >> /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/server-ca-1/crl.pem      >> /tmp/$$.pem\n$ openssl verify -CAfile /tmp/$$.pem -crl_check_all -purpose sslserver -issuer_checks -verbose ./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem \n./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem: OK\n$ rm -f /tmp/$$.pem\n\nCRL \u3092 CAfile \u306b\u5165\u308c\u306a\u3044\u3068\u691c\u8a3c\u306f\u5931\u6557\u3059\u308b\u306e\u3067\u3001\u9593\u9055\u3048\u3066\u306f\u3044\u306a\u3044\u306f\u305a\u3002\n$ #cross root:OldWithNew\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/cacert.pem  > /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-2/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/certs/selfsign-ca-1/cert.pem  >> /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-1/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/server-ca-1/cacert.pem   >> /tmp/$$.pem\n$ #openssl crl  -outform PEM -in $(pwd)/ca/server-ca-1/crl.pem      >> /tmp/$$.pem\n$ openssl verify -CAfile /tmp/$$.pem -crl_check_all -purpose sslserver -issuer_checks -verbose ./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem \n./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem: CN = www.example.com\nerror 3 at 0 depth lookup:unable to get certificate CRL\n$ rm -f /tmp/$$.pem\n\nattime \u306f\u8ffd\u52a0\u3055\u308c\u305f\u3042\u3068\u3059\u3050\u524a\u9664\u3055\u308c\u3066\u3001change log \u3084 man \u306b\u6b8b\u3063\u3066\u3044\u308b\u3060\u3051\u3001\u3068\u3044\u3046\u30d1\u30bf\u30fc\u30f3\u307f\u305f\u3044\u3002\u7d4c\u7def\u306f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u304c\u3001\u5fa9\u6d3b\u3057\u306a\u3044\u306e\u3060\u308d\u3046\u304b\u3002\n- Commits on Dec 13, 2011 Make it possible to set a time for verification.\n- Commits on Dec 14, 2011 Back out redundant verification time change.\n- openssl verify \u306b\u306f\u8a3c\u660e\u66f8\u3092\u691c\u8a3c\u3059\u308b\u305f\u3081\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3044\u308d\u3044\u308d\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u307f\u3048\u308b\u304c\u3001man \u3068 help \u3067\u4e56\u96e2\u304c\u3042\u308b\n- man \u306b\u306f\u3042\u308b attime \u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u6307\u5b9a\u3057\u305f\u6642\u523b\u3067\u8a3c\u660e\u66f8\u304c\u6709\u52b9\u304b\u3092\u78ba\u8a8d\u3067\u304d\u3066\u4fbf\u5229\u305d\u3046\u3060\u3063\u305f\u304c\u3001\u7d50\u5c40\u73fe\u6642\u70b9\u3067\u306f\u5b58\u5728\u3057\u306a\u3044\u3088\u3046\u3060\n- man \u306b\u306f\u3042\u308b crlfile \u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u5b58\u5728\u3057\u306a\u3044\u304c\u3001\u3053\u308c\u306f CAfile \u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4ee3\u66ff\u3067\u304d\u3001 crl_check/crl_check_all \u81ea\u4f53\u306f\u6a5f\u80fd\u3059\u308b\n\n```bash\n$ openssl version\nOpenSSL 1.0.2g  1 Mar 2016\n```\n\nman \u3067\u306f\u4fbf\u5229\u305d\u3046\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3044\u308d\u3044\u308d\u3042\u308b\u3088\u3046\u306b\u898b\u3048\u308b\u3002\u3053\u3053\u3067\u306f attime \u3068 crl_check_all \u3092\u4f7f\u304a\u3046\u3068\u3057\u305f\u3002\n\n```bash\n$ man verify\nSYNOPSIS\n       openssl verify [-CApath directory] [-CAfile file] [-purpose purpose] [-policy arg]\n       [-ignore_critical] [-attime timestamp] [-check_ss_sig] [-crlfile file] [-crl_download]\n       [-crl_check] [-crl_check_all] [-policy_check] [-explicit_policy] [-inhibit_any]\n       [-inhibit_map] [-x509_strict] [-extended_crl] [-use_deltas] [-policy_print]\n       [-no_alt_chains] [-untrusted file] [-help] [-issuer_checks] [-trusted file] [-verbose] [-]\n       [certificates]\n\nDESCRIPTION\n       The verify command verifies certificate chains.\n\nCOMMAND OPTIONS\n...\n       -crlfile file\n           File containing one or more CRL's (in PEM format) to load.\n...\n       -attime timestamp\n           Perform validation checks using time specified by timestamp and not current system\n           time. timestamp is the number of seconds since 01.01.1970 (UNIX time).\n...\n       -crl_check_all\n           Checks the validity of all certificates in the chain by attempting to look up valid\n           CRLs.\n\n...\n```\n\n\u30b3\u30de\u30f3\u30c9\u306e\u30d8\u30eb\u30d7\u3002\u4f7f\u3048\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c man \u3088\u308a\u5c11\u306a\u3044\uff1f\n\n```bash\nopenssl verify -help\n\nusage: verify [-verbose] [-CApath path] [-CAfile file] [-purpose purpose] [-crl_check] [-no_alt_chains] [-attime timestamp] [-engine e] cert1 cert2 ...\nrecognized usages:\n\tsslclient \tSSL client\n\tsslserver \tSSL server\n\tnssslserver\tNetscape SSL server\n\tsmimesign \tS/MIME signing\n\tsmimeencrypt\tS/MIME encryption\n\tcrlsign   \tCRL signing\n\tany       \tAny Purpose\n\tocsphelper\tOCSP helper\n\ttimestampsign\tTime Stamp signing\n```\n\nattime \u306f\u3044\u304b\u3093\u3068\u3082\u3057\u304c\u305f\u304b\u3063\u305f\u304c\u3001crl_check_all \u306f CAfile \u306b CA\u8a3c\u660e\u66f8\u3068\u4e00\u7dd2\u306b\u5165\u308c\u308b\u3053\u3068\u3067\u691c\u8a3c\u3067\u304d\u305f\u3002\n\n```\n$ #cross root:OldWithNew\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/cacert.pem  > /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-2/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/certs/selfsign-ca-1/cert.pem  >> /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-1/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/server-ca-1/cacert.pem   >> /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/server-ca-1/crl.pem      >> /tmp/$$.pem\n$ openssl verify -CAfile /tmp/$$.pem -crl_check_all -purpose sslserver -issuer_checks -verbose ./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem \n./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem: OK\n$ rm -f /tmp/$$.pem\n```\n\nCRL \u3092 CAfile \u306b\u5165\u308c\u306a\u3044\u3068\u691c\u8a3c\u306f\u5931\u6557\u3059\u308b\u306e\u3067\u3001\u9593\u9055\u3048\u3066\u306f\u3044\u306a\u3044\u306f\u305a\u3002\n\n```\n$ #cross root:OldWithNew\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/cacert.pem  > /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-2/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/selfsign-ca-2/certs/selfsign-ca-1/cert.pem  >> /tmp/$$.pem\n$ openssl crl  -outform PEM -in $(pwd)/ca/selfsign-ca-1/crl.pem    >> /tmp/$$.pem\n$ openssl x509 -outform PEM -in $(pwd)/ca/server-ca-1/cacert.pem   >> /tmp/$$.pem\n$ #openssl crl  -outform PEM -in $(pwd)/ca/server-ca-1/crl.pem      >> /tmp/$$.pem\n$ openssl verify -CAfile /tmp/$$.pem -crl_check_all -purpose sslserver -issuer_checks -verbose ./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem \n./ca/server-ca-1/certs/581BD4AC-www.example.com/cert.pem: CN = www.example.com\nerror 3 at 0 depth lookup:unable to get certificate CRL\n$ rm -f /tmp/$$.pem\n```\n\nattime \u306f\u8ffd\u52a0\u3055\u308c\u305f\u3042\u3068\u3059\u3050\u524a\u9664\u3055\u308c\u3066\u3001change log \u3084 man \u306b\u6b8b\u3063\u3066\u3044\u308b\u3060\u3051\u3001\u3068\u3044\u3046\u30d1\u30bf\u30fc\u30f3\u307f\u305f\u3044\u3002\u7d4c\u7def\u306f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u304c\u3001\u5fa9\u6d3b\u3057\u306a\u3044\u306e\u3060\u308d\u3046\u304b\u3002\n- [Commits on Dec 13, 2011 Make it possible to set a time for verification.](https://github.com/openssl/openssl/commit/7fd5df6b12321054bde3c9de73be71d7917e19da)\n- [Commits on Dec 14, 2011 Back out redundant verification time change.](https://github.com/openssl/openssl/commit/9a436c0f89841251e880d3729494f035d10f8837)\n", "tags": ["openssl"]}