{"context": "\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fcSORACOM Advent Calendar 2016 12/21\u5206\u3067\u3059\u3002\n\u30bd\u30e9\u30b3\u30e0\u30a4\u30f3\u30bf\u30fc\u30f3\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u5ca9\u702c\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001SORACOM Air \u304a\u3088\u3073 SORACOM Beam\u3092\u4f7f\u3063\u3066\u30ea\u30e2\u30fc\u30c8\u64cd\u4f5c\u53ef\u80fd\u306a\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n\n\n\u6e96\u5099\u3059\u308b\u3082\u306e\n\nSORACOM Air\nUSB \u30c9\u30f3\u30b0\u30eb\nRaspberry Pi\nPC(Mac\u3001Windows\u306a\u3069)\nSD\u30ab\u30fc\u30c9\u30ea\u30fc\u30c0\u30fc/\u30e9\u30a4\u30bf\u30fc (PC\u672c\u4f53\u306bSD\u30b9\u30ed\u30c3\u30c8\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u4e0d\u8981)\nMicro SD \u30ab\u30fc\u30c9 (8GB\u4ee5\u4e0a\u304c\u671b\u307e\u3057\u3044)\n\u203b\u3082\u3057\u521d\u4ee3Raspberry Pi\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306b\u306f\u3001\u901a\u5e38\u30b5\u30a4\u30ba\u306eSD\u30ab\u30fc\u30c9\u3092\u7528\u610f\u3057\u3066\u4e0b\u3055\u3044\n\u8d64\u5916\u7dda\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb(\u79cb\u6708\u96fb\u5b50\u901a\u5546\u3067\u8ca9\u58f2 OSRB38C9AA)\n\u8d64\u5916\u7ddaLED(\u79cb\u6708\u96fb\u5b50\u901a\u5546\u3067\u8ca9\u58f2 OSI5FU5111)\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9(\u79cb\u6708\u96fb\u5b50\u901a\u5546\u306a\u3069\u3067\u8ca9\u58f2)\n\u62b5\u6297(100\u03a9\u7a0b\u5ea6)\nGithub\u30a2\u30ab\u30a6\u30f3\u30c8\nRuby\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30db\u30b9\u30c8PC\n\nSORACOM Air\u306e\u63a5\u7d9a\u65b9\u6cd5\u306b\u95a2\u3057\u3066\u306f\u3001\n\n\u7c21\u5358\u306bRaspberry Pi\u3067SORACOM Air\u3092\u4f7f\u3046(FS01BU USB\u30e2\u30c7\u30e0\u3092\u7528\u3044\u3066\u81ea\u52d5\u63a5\u7d9a)\nRaspberry Pi\u3067SORACOM SIM\u3092\u4f7f\u3046(ZTE MF120, MF112)\n\n\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u306e\u4fe1\u53f7\u3092\u89e3\u6790\u3059\u308b\n\nLIRC\u3068\u306f\uff1f\nLinux Infrared Remote Control\u306e\u7565\u3067\u3001Linux\u4e0a\u3067\u306e\u8d64\u5916\u7dda\u4fe1\u53f7\u306e\u9001\u53d7\u4fe1\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3092\u7c21\u5358\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\u4eca\u56de\u306f\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u9001\u4fe1\u3057\u305f\u3044\u8d64\u5916\u7dda\u4fe1\u53f7\u306e\u89e3\u6790\u304a\u3088\u3073\u9001\u4fe1\u3092\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\nLIRC\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nLIRC\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\npi@raspberrypi:~ $ sudo apt-get install lirc\nLIRC\u3092\u6709\u52b9\u306b\u3059\u308b\npi@raspberrypi:~ $ sudo vim /etc/lirc/hardware.conf\nhardware.conf\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u7528\u3044\u3066\u4fee\u6b63\u3059\u308b\n\npi@raspberrypi:~ $ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/edit_hardware_conf.sh // \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\npi@raspberrypi:~ $ cp /etc/lirc/hardware.conf ~/hardware.conf // \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b\npi@raspberrypi:~ $ chmod +x edit_hardware_conf.sh // \u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\npi@raspberrypi:~ $ sudo ./edit_hardware_conf.sh // hardware.conf\u3092\u7de8\u96c6\n\n\n\u8d77\u52d5\u6642\u306bLIRC\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\npi@raspberrypi:~ $ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/edit_hardware_conf.sh // \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\npi@raspberrypi:~ $ chmod +x edit_boot_conf.sh // \u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\npi@raspberrypi:~ $ sudo ./edit_boot_conf.sh // boot/config.txt \u306e\u672b\u5c3e\u306bdtoverlay=lirc-rpi,gpio_in_pin=22,gpio_out_pin=23\u3092\u8ffd\u52a0\n\n\nRaspberry Pi\u3092\u518d\u8d77\u52d5\u3059\u308b\npi@raspberrypi:~ $ sudo reboot\n\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066lirc_rpi\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\npi@raspberrypi:~ $ lsmod | grep lirc\n  lirc_rpi                6638  0\n  lirc_dev                8169  1 lirc_rpi\n  rc_core                16956  1 lirc_dev\n\n\nLIRC\u3092\u505c\u6b62\u3059\u308b\npi@raspberrypi:~ $ sudo /etc/init.d/lirc stop\n\n\n\n\u914d\u7dda\n\n\u4e0b\u8a18\u306e\u914d\u7dda\u56f3\u306e\u3088\u3046\u306b\u914d\u7dda\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u914d\u7dda\u5f8c\u3001\u4e0b\u8a18\u306e\u5199\u771f\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044(Raspberry Pi 2 B+\u3092\u4f7f\u7528)\n\n\n\n\n\n\u30bb\u30f3\u30b5\u30fc\u306e\u52d5\u4f5c\u78ba\u8a8d\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u3001\u30bb\u30f3\u30b5\u30fc\u306b\u5411\u304b\u3063\u3066\u30ea\u30e2\u30b3\u30f3\u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3002\n\u3053\u306e\u3068\u304d\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u6570\u5b57\u5217\u304c\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\npi@raspberrypi:~ $ mode2 -md /dev/lirc0\n490      571      583      595      505      576\n556      595      538      592      511      621\n511      593     1615      647     1625      576\n1654      525     1710      634     1648      589\n1645      553     1682      621     1640      592\n1645      589      520      612      484      649\n510      554     1681      619      501      565\n553      617      487      643      484      533\n1729      614     1647      593     1617      576\n583      585     1649      664     1546      644\n1641      590\n\n\n\u8d64\u5916\u7dda\u4fe1\u53f7\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n\n\u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u3002\n\u5f85\u6a5f\u72b6\u614b\u306b\u306a\u308b\u306e\u3067\u3001\u8d64\u5916\u7dda\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u30ea\u30e2\u30b3\u30f3\u3092\u5411\u3051\u3066\u3001\u4e00\u5ea6\u3060\u3051\u96fb\u6e90\u30aa\u30f3\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u89e3\u6790\u3057\u305f\u30c7\u30fc\u30bf\u304cpower_on.dat\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\npi@raspberrypi:~ $ mode2 -md /dev/lirc0 | tee power_on.dat\n\u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u767b\u9332\u540d\u3092\u8868\u793a\u3057\u3066\u304f\u3060\u3055\u3044\u3068\u3067\u3066\u304d\u305f\u3089power_on\u3068\u5165\u529b\u3002\n\npi@raspberrypi:~ $ sudo ruby ir_tools/irrecord.rb power_on.dat\n\u767b\u9332\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 (Ex: switch_on)\npower_on\n\n\n\u8d64\u5916\u7ddaLED\u304b\u3089\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u3001\u6b63\u3057\u304f\u6a5f\u5668\u304c\u64cd\u4f5c\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n\u8d64\u5916\u7ddaLED\u306f\u6307\u5411\u6027\u304c\u5f37\u3044\u306e\u3067\u3001\u3046\u307e\u304f\u53cd\u5fdc\u3057\u306a\u3044\u5834\u5408\u306f\u8fd1\u3065\u3051\u305f\u308a\u65b9\u5411\u3092\u5909\u3048\u305f\u308a\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\npi@raspberrypi:~ $ irsend SEND_ONCE controller power_on\n\n\nSango(MQTT\u30d6\u30ed\u30fc\u30ab)\u306b\u767b\u9332\u3059\u308b\n\nSango\u3068\u306f\n\u30d1\u30d6\u30ea\u30c3\u30b7\u30e5/\u30b5\u30d6\u30b9\u30af\u30e9\u30a4\u30d6\u578b\u306e\u8efd\u91cf\u306a\u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u3042\u308bMQTT\u3092\u7c21\u5358\u306b\u5229\u7528\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u4eca\u56de\u306fSango\u3092\u7528\u3044\u3066\u3001SORACOM Air\u3092\u901a\u3057\u305f\u901a\u4fe1\u3092\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\nSango\u306b\u767b\u9332\u3059\u308b\n\nSango\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8(https://sango.shiguredo.jp/) \u304b\u3089\u65b0\u898f\u767b\u9332(Github\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002)\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001MQTT\u306e\u63a5\u7d9a\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\n\n\u9375\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\nSORACOM Beam\u306e\u8a2d\u5b9a\n\nSORACOM Beam\u3068\u306f\nSORACOM Beam \u3068\u306f\u3001IoT\u30c7\u30d0\u30a4\u30b9\u306b\u304b\u304b\u308b\u6697\u53f7\u5316\u7b49\u306e\u9ad8\u8ca0\u8377\u51e6\u7406\u3084\u63a5\u7d9a\u5148\u306e\u8a2d\u5b9a\u3092\u3001\u30af\u30e9\u30a6\u30c9\u306b\u30aa\u30d5\u30ed\u30fc\u30c9\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002Beam \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u6697\u53f7\u5316\u51e6\u7406\u304c\u96e3\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u306b\u4ee3\u308f\u3063\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u30b5\u30fc\u30d0\u30fc\u9593\u306e\u901a\u4fe1\u3092\u6697\u53f7\u5316\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u30d7\u30ed\u30c8\u30b3\u30eb\u5909\u63db\u3092\u884c\u3046\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306f\u30b7\u30f3\u30d7\u30eb\u306aTCP\u3001UDP\u3067\u9001\u4fe1\u3057\u3001Beam\u3067HTTP/HTTPS\u306b\u5909\u63db\u3057\u3066\u30af\u30e9\u30a6\u30c9\u3084\u4efb\u610f\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u73fe\u5728\u3001\u4ee5\u4e0b\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u5909\u63db\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u4e0a\u8a18\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u5909\u63db\u306b\u52a0\u3048\u3001Web\u30b5\u30a4\u30c8\u5168\u4f53\u3092 Beam \u3067\u8ee2\u9001\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002(Web\u30b5\u30a4\u30c8\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8) \u5168\u3066\u306e\u30d1\u30b9\u306b\u5bfe\u3057\u3066 HTTP \u3067\u53d7\u3051\u305f\u901a\u4fe1\u3092\u3001HTTP \u307e\u305f\u306f HTTPS \u3067\u8ee2\u9001\u3092\u884c\u3046\u8a2d\u5b9a\u3067\u3059\u3002\n\nSORACOM Beam\u306e\u8a2d\u5b9a\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306eBeam\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nMQTT\u306b\u304a\u3051\u308b\u30e6\u30fc\u30b6\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u3092SORACOM Beam\u306b\u30aa\u30d5\u30ed\u30fc\u30c9(MQTT\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8)\n\n\u3053\u3053\u3067\u306f\u3001Sango\u3078\u306e\u30c7\u30fc\u30bf\u8ee2\u9001\u8a2d\u5b9a (MQTT\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8)\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nBeam\u306fAir SIM\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u5bfe\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u306e\u3067\u3001\u307e\u305a\u3001\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n\n\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089[\u30b0\u30eb\u30fc\u30d7]\u304b\u3089\u3001[\u8ffd\u52a0]\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\n\u30b0\u30eb\u30fc\u30d7\u540d\u3092\u5165\u529b\u3057\u3066\u3001[\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210]\u3092\u30af\u30ea\u30c3\u30af\n\n\n\nSIM\u306e\u30b0\u30eb\u30fc\u30d7\u5272\u308a\u5f53\u3066\n\nSIM\u3092\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u7d10\u4ed8\u3051\u3059\u308b\nSIM\u7ba1\u7406\u753b\u9762\u304b\u3089\u3001SIM\u3092\u9078\u629e\u3057\u3066\u3001\u64cd\u4f5c\u2192\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\u5909\u66f4\u3092\u62bc\u3057\u307e\u3059\u3002\n\n\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u3092\u9078\u629e\u3057\u3001[SORACOM Beam \u8a2d\u5b9a] \u306e\u30bf\u30d6\u3092\u9078\u629e\n\n[SORACOM Beam \u8a2d\u5b9a] \u304b\u3089[MQTT\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8]\u3092\u30af\u30ea\u30c3\u30af\n\n\n\u8868\u793a\u3055\u308c\u305f\u753b\u9762\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\n- \u8a2d\u5b9a\u540d\uff1a SangoMQTT(\u5225\u306e\u540d\u524d\u3067\u3082\u69cb\u3044\u307e\u305b\u3093)\n- \u8ee2\u9001\u5148\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\uff1a MQTT\n- \u30db\u30b9\u30c8\u540d\uff1a lite.mqtt.shiguredo.jp\n- \u30e6\u30fc\u30b6\u540d: <Github\u306e\u30e6\u30fc\u30b6\u540d>@github\n- \u30d1\u30b9\u30ef\u30fc\u30c9: <Sango\u3067\u53d6\u5f97\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9>\n\n\n\u4ee5\u4e0a\u3067SORACOM Beam\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u3000SORACOM Beam\u7d4c\u7531\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b\n\nRaspberry Pi\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\nMQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npi@raspberrypi:~ $ sudo gem install mqtt\n\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\npi@raspberrypi:~ $ export MQTT_USERNAME=<Sango\u3067\u53d6\u5f97\u3057\u305f\u30e6\u30fc\u30b6\u540d>\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066MQTT\u3092\u53d7\u4fe1\u3059\u308b\n\npi@raspberrypi:~ $ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/ir_tools/subscriber.rb\npi@raspberrypi:~ $ ruby subscriber.rb\n\n\u4e0a\u8a18\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u5225\u306e\u30bf\u30d6\u3067\u30db\u30b9\u30c8PC\u306b\u30ed\u30b0\u30a4\u30f3\n\n\u30db\u30b9\u30c8PC\u3067MQTT\u3092subscribe\n\nMQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ gem install mqtt\n\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\n\n$ export MQTT_PASSWORD=<Sango\u3067\u53d6\u5f97\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b>\n$ export MQTT_USERNAME=<Sango\u3067\u53d6\u5f97\u3057\u305f\u30e6\u30fc\u30b6\u540d>\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u5b9f\u884c\u3057\u3066MQTT\u3092\u9001\u4fe1\u3057\u3001\u8d64\u5916\u7dda\u4fe1\u53f7\u304c\u9001\u4fe1\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n$ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/ir_tools/publisher.rb\n$ ruby publisher.rb power_on\n\npower_on\u3092\u4ed6\u306e\u547d\u4ee4\u306b\u5909\u3048\u308b\u3053\u3068\u3067\u4ed6\u306e\u4fe1\u53f7\u3082\u9001\u4fe1\u3067\u304d\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306f\u4e0b\u8a18\u306e\u300c\u5fdc\u7528\u7de8\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n\u5fdc\u7528\u7de8\n\n\u8ffd\u52a0\u3067\u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u3002\n\u5f85\u6a5f\u72b6\u614b\u306b\u306a\u308b\u306e\u3067\u3001\u8d64\u5916\u7dda\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u30ea\u30e2\u30b3\u30f3\u3092\u5411\u3051\u3066\u3001\u767b\u9332\u3057\u305f\u3044\u30dc\u30bf\u30f3\u3092\u4e00\u5ea6\u3060\u3051\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002\npi@raspberrypi:~ $ mode2 -md /dev/lirc0 | tee <\u30dc\u30bf\u30f3\u306e\u540d\u79f0(\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3082\u53ef)>.dat\n\u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u767b\u9332\u540d\u3092\u8868\u793a\u3057\u3066\u304f\u3060\u3055\u3044\u3068\u3067\u3066\u304d\u305f\u3089\u300c\u30dc\u30bf\u30f3\u306e\u540d\u79f0\u300d\u3092\u5165\u529b\u3002\n\npi@raspberrypi:~ $ sudo ruby ir_tools/irrecord.rb power_on.dat\n\u30dc\u30bf\u30f3\u306e\u540d\u79f0\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 (Ex: switch_on)\n<power_off\u7b49\u306e\u4efb\u610f\u306e\u30dc\u30bf\u30f3\u306e\u540d\u79f0\u3092\u5165\u529b>\n\n\u3053\u308c\u3067\u8ffd\u52a0\u306e\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u30c7\u30fc\u30bf\u304c\u767b\u9332\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u767b\u9332\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306e\u4e00\u89a7\u3092\u78ba\u8a8d\u3059\u308b\npi@raspberrypi:~ $ irsend LIST controller \"\" \n\u767b\u9332\u3057\u305f\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b\n\u300cSORACOM Beam\u7d4c\u7531\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b\u300d\u3067\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4e0a\u8a18\u3067\u767b\u9332\u3057\u305f\u3082\u306e\u306b\u5909\u66f4\u3059\u308b\u3068\u3001\u65b0\u3057\u304f\u767b\u9332\u3057\u305f\u8d64\u5916\u7dda\u4fe1\u53f7\u304c\u9001\u4fe1\u3067\u304d\u307e\u3059\u3002\n\n\n\u307e\u3068\u3081\nFacebook CEO\u3067\u3042\u308bMark Zuckerberg\u6c0f\u304c\u5bb6\u5ead\u5185\u306bJarvis\u3068\u547c\u3070\u308c\u308b\u5bb6\u5ead\u5185\u30a2\u30b7\u30b9\u30bf\u30f3\u30c8\u3092\u69cb\u7bc9\u3057\u305f\u3068\u3044\u3046\u30cb\u30e5\u30fc\u30b9\u304c\u8a71\u984c\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30ea\u30e2\u30fc\u30c8\u64cd\u4f5c\u53ef\u80fd\u306a\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u3082\u3001\u305d\u3046\u3044\u3063\u305f\u4e16\u754c\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4e00\u6b69\u3068\u3057\u3066\u307f\u306a\u3055\u307e\u306e\u304a\u5f79\u306b\u7acb\u3066\u308c\u3070\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u6bd4\u8f03\u7684\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u308b\u306e\u3001\u304a\u6642\u9593\u306e\u3042\u308b\u65b9\u306f\u662f\u975e\u30c8\u30e9\u30a4\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01\uff01  \n\u8cea\u554f\u30b3\u30e1\u30f3\u30c8\u304a\u5f85\u3061\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u30fc[SORACOM Advent Calendar 2016](http://qiita.com/advent-calendar/2016/soracom) 12/21\u5206\u3067\u3059\u3002\n\n\u30bd\u30e9\u30b3\u30e0\u30a4\u30f3\u30bf\u30fc\u30f3\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u5ca9\u702c\u3067\u3059\u3002\n\u4eca\u56de\u306f\u3001SORACOM Air \u304a\u3088\u3073 SORACOM Beam\u3092\u4f7f\u3063\u3066\u30ea\u30e2\u30fc\u30c8\u64cd\u4f5c\u53ef\u80fd\u306a\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\n![demo_pic.001.jpeg](https://qiita-image-store.s3.amazonaws.com/0/47744/a9b40b72-5b85-fdbb-b69c-b7ddb7f694f8.jpeg)\n\n## \u6e96\u5099\u3059\u308b\u3082\u306e\n- SORACOM Air\n- USB \u30c9\u30f3\u30b0\u30eb\n- Raspberry Pi\n- PC(Mac\u3001Windows\u306a\u3069)\n- SD\u30ab\u30fc\u30c9\u30ea\u30fc\u30c0\u30fc/\u30e9\u30a4\u30bf\u30fc (PC\u672c\u4f53\u306bSD\u30b9\u30ed\u30c3\u30c8\u304c\u3042\u308b\u5834\u5408\u306b\u306f\u4e0d\u8981)\n- Micro SD \u30ab\u30fc\u30c9 (8GB\u4ee5\u4e0a\u304c\u671b\u307e\u3057\u3044)  \n \u203b\u3082\u3057\u521d\u4ee3Raspberry Pi\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306b\u306f\u3001\u901a\u5e38\u30b5\u30a4\u30ba\u306eSD\u30ab\u30fc\u30c9\u3092\u7528\u610f\u3057\u3066\u4e0b\u3055\u3044\n- \u8d64\u5916\u7dda\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb(\u79cb\u6708\u96fb\u5b50\u901a\u5546\u3067\u8ca9\u58f2 OSRB38C9AA)\n- \u8d64\u5916\u7ddaLED(\u79cb\u6708\u96fb\u5b50\u901a\u5546\u3067\u8ca9\u58f2 OSI5FU5111)\n- \u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9(\u79cb\u6708\u96fb\u5b50\u901a\u5546\u306a\u3069\u3067\u8ca9\u58f2)\n- \u62b5\u6297(100\u03a9\u7a0b\u5ea6)\n- Github\u30a2\u30ab\u30a6\u30f3\u30c8\n- Ruby\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u30db\u30b9\u30c8PC\n\n\nSORACOM Air\u306e\u63a5\u7d9a\u65b9\u6cd5\u306b\u95a2\u3057\u3066\u306f\u3001\n\n* [\u7c21\u5358\u306bRaspberry Pi\u3067SORACOM Air\u3092\u4f7f\u3046(FS01BU USB\u30e2\u30c7\u30e0\u3092\u7528\u3044\u3066\u81ea\u52d5\u63a5\u7d9a)](http://qiita.com/dietposter/items/068019ee53252206a6bf)\n* [Raspberry Pi\u3067SORACOM SIM\u3092\u4f7f\u3046(ZTE MF120, MF112)](http://qiita.com/dietposter/items/068019ee53252206a6bf)\n\n\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u306e\u4fe1\u53f7\u3092\u89e3\u6790\u3059\u308b\n\n###  LIRC\u3068\u306f\uff1f  \nLinux Infrared Remote Control\u306e\u7565\u3067\u3001Linux\u4e0a\u3067\u306e\u8d64\u5916\u7dda\u4fe1\u53f7\u306e\u9001\u53d7\u4fe1\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3092\u7c21\u5358\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\u4eca\u56de\u306f\u3053\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u9001\u4fe1\u3057\u305f\u3044\u8d64\u5916\u7dda\u4fe1\u53f7\u306e\u89e3\u6790\u304a\u3088\u3073\u9001\u4fe1\u3092\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n### LIRC\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n- LIRC\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b  \n`pi@raspberrypi:~ $ sudo apt-get install lirc`\n\n- LIRC\u3092\u6709\u52b9\u306b\u3059\u308b  \n`pi@raspberrypi:~ $ sudo vim /etc/lirc/hardware.conf`\n\n- hardware.conf\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u7528\u3044\u3066\u4fee\u6b63\u3059\u308b\n\n```\npi@raspberrypi:~ $ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/edit_hardware_conf.sh // \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\npi@raspberrypi:~ $ cp /etc/lirc/hardware.conf ~/hardware.conf // \u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b\npi@raspberrypi:~ $ chmod +x edit_hardware_conf.sh // \u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\npi@raspberrypi:~ $ sudo ./edit_hardware_conf.sh // hardware.conf\u3092\u7de8\u96c6\n```\n\n\n- \u8d77\u52d5\u6642\u306bLIRC\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\n```\npi@raspberrypi:~ $ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/edit_hardware_conf.sh // \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\npi@raspberrypi:~ $ chmod +x edit_boot_conf.sh // \u5b9f\u884c\u6a29\u9650\u3092\u4ed8\u4e0e\npi@raspberrypi:~ $ sudo ./edit_boot_conf.sh // boot/config.txt \u306e\u672b\u5c3e\u306bdtoverlay=lirc-rpi,gpio_in_pin=22,gpio_out_pin=23\u3092\u8ffd\u52a0\n```\n\n- Raspberry Pi\u3092\u518d\u8d77\u52d5\u3059\u308b  \n`pi@raspberrypi:~ $ sudo reboot`\n\n- \u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d  \n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066`lirc_rpi`\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```\npi@raspberrypi:~ $ lsmod | grep lirc\n  lirc_rpi                6638  0\n  lirc_dev                8169  1 lirc_rpi\n  rc_core                16956  1 lirc_dev\n```\n\n- LIRC\u3092\u505c\u6b62\u3059\u308b  \n`pi@raspberrypi:~ $ sudo /etc/init.d/lirc stop`\n\n### \u914d\u7dda\n- \u4e0b\u8a18\u306e\u914d\u7dda\u56f3\u306e\u3088\u3046\u306b\u914d\u7dda\u3092\u884c\u3044\u307e\u3059\u3002\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/5-4.png)\n\n- \u914d\u7dda\u5f8c\u3001\u4e0b\u8a18\u306e\u5199\u771f\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044(Raspberry Pi 2 B+\u3092\u4f7f\u7528)\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/5-1.JPG)\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/5-2.JPG)\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/5-3.JPG)\n\n### \u30bb\u30f3\u30b5\u30fc\u306e\u52d5\u4f5c\u78ba\u8a8d\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5f8c\u3001\u30bb\u30f3\u30b5\u30fc\u306b\u5411\u304b\u3063\u3066\u30ea\u30e2\u30b3\u30f3\u306e\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3002\n\u3053\u306e\u3068\u304d\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306a\u6570\u5b57\u5217\u304c\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```\npi@raspberrypi:~ $ mode2 -md /dev/lirc0\n490      571      583      595      505      576\n556      595      538      592      511      621\n511      593     1615      647     1625      576\n1654      525     1710      634     1648      589\n1645      553     1682      621     1640      592\n1645      589      520      612      484      649\n510      554     1681      619      501      565\n553      617      487      643      484      533\n1729      614     1647      593     1617      576\n583      585     1649      664     1546      644\n1641      590\n```\n\n### \u8d64\u5916\u7dda\u4fe1\u53f7\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3059\u308b\n- \u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u3002  \n\u5f85\u6a5f\u72b6\u614b\u306b\u306a\u308b\u306e\u3067\u3001\u8d64\u5916\u7dda\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u30ea\u30e2\u30b3\u30f3\u3092\u5411\u3051\u3066\u3001\u4e00\u5ea6\u3060\u3051\u96fb\u6e90\u30aa\u30f3\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002  \n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u89e3\u6790\u3057\u305f\u30c7\u30fc\u30bf\u304cpower_on.dat\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002  \n`pi@raspberrypi:~ $ mode2 -md /dev/lirc0 | tee power_on.dat`\n\n- \u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080   \n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u767b\u9332\u540d\u3092\u8868\u793a\u3057\u3066\u304f\u3060\u3055\u3044\u3068\u3067\u3066\u304d\u305f\u3089power_on\u3068\u5165\u529b\u3002\n\n```\npi@raspberrypi:~ $ sudo ruby ir_tools/irrecord.rb power_on.dat\n\u767b\u9332\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 (Ex: switch_on)\npower_on\n```\n\n## \u8d64\u5916\u7ddaLED\u304b\u3089\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b\n\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u3001\u6b63\u3057\u304f\u6a5f\u5668\u304c\u64cd\u4f5c\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002  \n\u8d64\u5916\u7ddaLED\u306f\u6307\u5411\u6027\u304c\u5f37\u3044\u306e\u3067\u3001\u3046\u307e\u304f\u53cd\u5fdc\u3057\u306a\u3044\u5834\u5408\u306f\u8fd1\u3065\u3051\u305f\u308a\u65b9\u5411\u3092\u5909\u3048\u305f\u308a\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\npi@raspberrypi:~ $ irsend SEND_ONCE controller power_on\n```\n\n## Sango(MQTT\u30d6\u30ed\u30fc\u30ab)\u306b\u767b\u9332\u3059\u308b\n\n### Sango\u3068\u306f\n\u30d1\u30d6\u30ea\u30c3\u30b7\u30e5/\u30b5\u30d6\u30b9\u30af\u30e9\u30a4\u30d6\u578b\u306e\u8efd\u91cf\u306a\u30d7\u30ed\u30c8\u30b3\u30eb\u3067\u3042\u308bMQTT\u3092\u7c21\u5358\u306b\u5229\u7528\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002\u4eca\u56de\u306fSango\u3092\u7528\u3044\u3066\u3001SORACOM Air\u3092\u901a\u3057\u305f\u901a\u4fe1\u3092\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n### Sango\u306b\u767b\u9332\u3059\u308b\n- Sango\u306e\u30db\u30fc\u30e0\u30da\u30fc\u30b8(https://sango.shiguredo.jp/) \u304b\u3089\u65b0\u898f\u767b\u9332(Github\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002)\n- \u30ed\u30b0\u30a4\u30f3\u5f8c\u3001MQTT\u306e\u63a5\u7d9a\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b\n![MQTT\u63a5\u7d9a\u60c5\u5831](https://github.com/sh8/maker_faire_2016/wiki/images/7-1.png)\n\u9375\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n## SORACOM Beam\u306e\u8a2d\u5b9a\n\n### SORACOM Beam\u3068\u306f\nSORACOM Beam \u3068\u306f\u3001IoT\u30c7\u30d0\u30a4\u30b9\u306b\u304b\u304b\u308b\u6697\u53f7\u5316\u7b49\u306e\u9ad8\u8ca0\u8377\u51e6\u7406\u3084\u63a5\u7d9a\u5148\u306e\u8a2d\u5b9a\u3092\u3001\u30af\u30e9\u30a6\u30c9\u306b\u30aa\u30d5\u30ed\u30fc\u30c9\u3067\u304d\u308b\u30b5\u30fc\u30d3\u30b9\u3067\u3059\u3002Beam \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u3001\u6697\u53f7\u5316\u51e6\u7406\u304c\u96e3\u3057\u3044\u30c7\u30d0\u30a4\u30b9\u306b\u4ee3\u308f\u3063\u3066\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u30b5\u30fc\u30d0\u30fc\u9593\u306e\u901a\u4fe1\u3092\u6697\u53f7\u5316\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u30d7\u30ed\u30c8\u30b3\u30eb\u5909\u63db\u3092\u884c\u3046\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u30c7\u30d0\u30a4\u30b9\u304b\u3089\u306f\u30b7\u30f3\u30d7\u30eb\u306aTCP\u3001UDP\u3067\u9001\u4fe1\u3057\u3001Beam\u3067HTTP/HTTPS\u306b\u5909\u63db\u3057\u3066\u30af\u30e9\u30a6\u30c9\u3084\u4efb\u610f\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u8ee2\u9001\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u73fe\u5728\u3001\u4ee5\u4e0b\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u5909\u63db\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002  \n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-2.png)\n\n\n\u307e\u305f\u3001\u4e0a\u8a18\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u5909\u63db\u306b\u52a0\u3048\u3001Web\u30b5\u30a4\u30c8\u5168\u4f53\u3092 Beam \u3067\u8ee2\u9001\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002(Web\u30b5\u30a4\u30c8\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8) \u5168\u3066\u306e\u30d1\u30b9\u306b\u5bfe\u3057\u3066 HTTP \u3067\u53d7\u3051\u305f\u901a\u4fe1\u3092\u3001HTTP \u307e\u305f\u306f HTTPS \u3067\u8ee2\u9001\u3092\u884c\u3046\u8a2d\u5b9a\u3067\u3059\u3002\n\n### SORACOM Beam\u306e\u8a2d\u5b9a\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306eBeam\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n- MQTT\u306b\u304a\u3051\u308b\u30e6\u30fc\u30b6\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u3092SORACOM Beam\u306b\u30aa\u30d5\u30ed\u30fc\u30c9(MQTT\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8)\n\n\u3053\u3053\u3067\u306f\u3001Sango\u3078\u306e\u30c7\u30fc\u30bf\u8ee2\u9001\u8a2d\u5b9a (MQTT\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8)\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nBeam\u306fAir SIM\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u5bfe\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u306e\u3067\u3001\u307e\u305a\u3001\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n### \u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n- \u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089[\u30b0\u30eb\u30fc\u30d7]\u304b\u3089\u3001[\u8ffd\u52a0]\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-3.png)\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-4.png)\n\n- \u30b0\u30eb\u30fc\u30d7\u540d\u3092\u5165\u529b\u3057\u3066\u3001[\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210]\u3092\u30af\u30ea\u30c3\u30af\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-5.png)\n\n### SIM\u306e\u30b0\u30eb\u30fc\u30d7\u5272\u308a\u5f53\u3066\n- SIM\u3092\u3053\u306e\u30b0\u30eb\u30fc\u30d7\u306b\u7d10\u4ed8\u3051\u3059\u308b\nSIM\u7ba1\u7406\u753b\u9762\u304b\u3089\u3001SIM\u3092\u9078\u629e\u3057\u3066\u3001\u64cd\u4f5c\u2192\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\u5909\u66f4\u3092\u62bc\u3057\u307e\u3059\u3002\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-6.png)\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-7.png)\n\n- \u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u3092\u9078\u629e\u3057\u3001[SORACOM Beam \u8a2d\u5b9a] \u306e\u30bf\u30d6\u3092\u9078\u629e\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-8.png)\n\n- [SORACOM Beam \u8a2d\u5b9a] \u304b\u3089[MQTT\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8]\u3092\u30af\u30ea\u30c3\u30af\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-9.png)\n\n\u8868\u793a\u3055\u308c\u305f\u753b\u9762\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\n\n```\n- \u8a2d\u5b9a\u540d\uff1a SangoMQTT(\u5225\u306e\u540d\u524d\u3067\u3082\u69cb\u3044\u307e\u305b\u3093)\n- \u8ee2\u9001\u5148\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\uff1a MQTT\n- \u30db\u30b9\u30c8\u540d\uff1a lite.mqtt.shiguredo.jp\n- \u30e6\u30fc\u30b6\u540d: <Github\u306e\u30e6\u30fc\u30b6\u540d>@github\n- \u30d1\u30b9\u30ef\u30fc\u30c9: <Sango\u3067\u53d6\u5f97\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9>\n```\n\n![](https://raw.githubusercontent.com/soracom/handson/master/irsensor/docs/images/8-10.png)\n\n\u4ee5\u4e0a\u3067SORACOM Beam\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n##\u3000SORACOM Beam\u7d4c\u7531\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b\n\n### Raspberry Pi\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n- MQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb  \n`pi@raspberrypi:~ $ sudo gem install mqtt`\n\n- \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b  \n`pi@raspberrypi:~ $ export MQTT_USERNAME=<Sango\u3067\u53d6\u5f97\u3057\u305f\u30e6\u30fc\u30b6\u540d>`\n\n- \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066MQTT\u3092\u53d7\u4fe1\u3059\u308b\n\n```\npi@raspberrypi:~ $ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/ir_tools/subscriber.rb\npi@raspberrypi:~ $ ruby subscriber.rb\n```\n\n\u4e0a\u8a18\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u5225\u306e\u30bf\u30d6\u3067\u30db\u30b9\u30c8PC\u306b\u30ed\u30b0\u30a4\u30f3\n### \u30db\u30b9\u30c8PC\u3067MQTT\u3092subscribe\n- MQTT\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb  \n`$ gem install mqtt`\n\n- \u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3059\u308b\n\n```\n$ export MQTT_PASSWORD=<Sango\u3067\u53d6\u5f97\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b>\n$ export MQTT_USERNAME=<Sango\u3067\u53d6\u5f97\u3057\u305f\u30e6\u30fc\u30b6\u540d>\n```\n- \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u5b9f\u884c\u3057\u3066MQTT\u3092\u9001\u4fe1\u3057\u3001\u8d64\u5916\u7dda\u4fe1\u53f7\u304c\u9001\u4fe1\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\n```\n$ wget https://s3-ap-northeast-1.amazonaws.com/soracom-demo/ir_tools/publisher.rb\n$ ruby publisher.rb power_on\n```\npower_on\u3092\u4ed6\u306e\u547d\u4ee4\u306b\u5909\u3048\u308b\u3053\u3068\u3067\u4ed6\u306e\u4fe1\u53f7\u3082\u9001\u4fe1\u3067\u304d\u307e\u3059\u3002  \n\u8a73\u3057\u304f\u306f\u4e0b\u8a18\u306e\u300c\u5fdc\u7528\u7de8\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002  \n\n### \u5fdc\u7528\u7de8\n- \u8ffd\u52a0\u3067\u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u3002  \n\u5f85\u6a5f\u72b6\u614b\u306b\u306a\u308b\u306e\u3067\u3001\u8d64\u5916\u7dda\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u30ea\u30e2\u30b3\u30f3\u3092\u5411\u3051\u3066\u3001\u767b\u9332\u3057\u305f\u3044\u30dc\u30bf\u30f3\u3092\u4e00\u5ea6\u3060\u3051\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002    \n`pi@raspberrypi:~ $ mode2 -md /dev/lirc0 | tee <\u30dc\u30bf\u30f3\u306e\u540d\u79f0(\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3082\u53ef)>.dat`\n\n- \u4fe1\u53f7\u306e\u89e3\u6790\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u8fbc\u3080   \n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u767b\u9332\u540d\u3092\u8868\u793a\u3057\u3066\u304f\u3060\u3055\u3044\u3068\u3067\u3066\u304d\u305f\u3089\u300c\u30dc\u30bf\u30f3\u306e\u540d\u79f0\u300d\u3092\u5165\u529b\u3002\n\n```\npi@raspberrypi:~ $ sudo ruby ir_tools/irrecord.rb power_on.dat\n\u30dc\u30bf\u30f3\u306e\u540d\u79f0\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044 (Ex: switch_on)\n<power_off\u7b49\u306e\u4efb\u610f\u306e\u30dc\u30bf\u30f3\u306e\u540d\u79f0\u3092\u5165\u529b>\n```\n\n\u3053\u308c\u3067\u8ffd\u52a0\u306e\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u30c7\u30fc\u30bf\u304c\u767b\u9332\u3055\u308c\u307e\u3057\u305f\u3002\n\n- \u767b\u9332\u3055\u308c\u305f\u30dc\u30bf\u30f3\u306e\u4e00\u89a7\u3092\u78ba\u8a8d\u3059\u308b  \n`pi@raspberrypi:~ $ irsend LIST controller \"\"`  \n\n- \u767b\u9332\u3057\u305f\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b  \n\u300cSORACOM Beam\u7d4c\u7531\u3067\u8d64\u5916\u7dda\u4fe1\u53f7\u3092\u9001\u4fe1\u3059\u308b\u300d\u3067\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4e0a\u8a18\u3067\u767b\u9332\u3057\u305f\u3082\u306e\u306b\u5909\u66f4\u3059\u308b\u3068\u3001\u65b0\u3057\u304f\u767b\u9332\u3057\u305f\u8d64\u5916\u7dda\u4fe1\u53f7\u304c\u9001\u4fe1\u3067\u304d\u307e\u3059\u3002\n\n## \u307e\u3068\u3081\n[Facebook CEO\u3067\u3042\u308bMark Zuckerberg\u6c0f\u304c\u5bb6\u5ead\u5185\u306bJarvis\u3068\u547c\u3070\u308c\u308b\u5bb6\u5ead\u5185\u30a2\u30b7\u30b9\u30bf\u30f3\u30c8\u3092\u69cb\u7bc9\u3057\u305f](http://japan.cnet.com/news/service/35094061/)\u3068\u3044\u3046\u30cb\u30e5\u30fc\u30b9\u304c\u8a71\u984c\u306b\u306a\u308a\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30ea\u30e2\u30fc\u30c8\u64cd\u4f5c\u53ef\u80fd\u306a\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u3082\u3001\u305d\u3046\u3044\u3063\u305f\u4e16\u754c\u3092\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306e\u4e00\u6b69\u3068\u3057\u3066\u307f\u306a\u3055\u307e\u306e\u304a\u5f79\u306b\u7acb\u3066\u308c\u3070\u306a\u3068\u601d\u3063\u3066\u3044\u307e\u3059\u3002\u6bd4\u8f03\u7684\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u308b\u306e\u3001\u304a\u6642\u9593\u306e\u3042\u308b\u65b9\u306f\u662f\u975e\u30c8\u30e9\u30a4\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff01\uff01  \n\n\u8cea\u554f\u30b3\u30e1\u30f3\u30c8\u304a\u5f85\u3061\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n", "tags": ["SORACOM", "RaspberryPi"]}