{"context": "\n\n\u554f\u984c\nSinon.JS v1.17.3 \u3067\u767a\u751f\u3059\u308b\u3002\n// before\nconst apiKey = 'xxx'; // \u30c0\u30df\u30fc\u306e\u5024\nconst sandbox = sinon.sandbox.create();\nsandbox.stub(process.env, 'API_KEY', apiKey); // \u5b58\u5728\u3057\u306a\u3044\u74b0\u5883\u5909\u6570 API_KEY (`process.env.API_KEY`) \u3092 apiKey \u3067 stub \u3057\u305f\u3044\n//=> TypeError: Cannot stub non-existent own property API_KEY\n\n// after\nsandbox.restore(); // \u5143\u306b\u623b\u3059\n\n\n\u89e3\u6c7a\u7b56\n\u3072\u3068\u307e\u305a\u5f37\u5f15\u306b null \u3092\u4ee3\u5165\u3057\u3066\u56de\u907f\u3057\u305f\u3002\u3053\u306e\u65b9\u6cd5\u3060\u3068 null \u304c\u623b\u3055\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u53b3\u5bc6\u306b\u306f\u8aa4\u308a\u304c\u3042\u308b\u3002delete \u3059\u308b\u307b\u3046\u304c\u826f\u3044\u304c\u3001\u5b9f\u5bb3\u306f\u306a\u3044\u306e\u3067\u3001\u3053\u306e\u65b9\u6cd5\u3067\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n// before\nconst apiKey = 'xxx'; // \u30c0\u30df\u30fc\u306e\u5024\nconst sandbox = sinon.sandbox.create();\nif (!process.env.hasOwnProperty('API_KEY')) process.env.API_KEY = null; // \u3053\u306e\u884c\u3092\u8ffd\u52a0\u3057\u3001\u5f37\u5f15\u306b\u5bfe\u5fdc\u3002\nsandbox.stub(process.env, 'API_KEY', apiKey);\n\n// after\nsandbox.restore(); // \u5143\u306b\u623b\u3059\n\nSinon.JS \u3067\u306e\u5b9f\u88c5\u306b\u3064\u3044\u3066\u306f source code \u3092\u53c2\u7167\u3002\nhttps://github.com/sinonjs/sinon/blob/v1.17.3/lib/sinon/collection.js#L92-L94\n\n\u88dc\u8db3\n\u500b\u4eba\u7684\u306b\u306f\u52dd\u624b\u306b\u8ffd\u52a0\u3057\u3066 delete \u3057\u3066\u304f\u308c\u308b\u3068\u5b09\u3057\u3044\u306e\u3067\u3001Pull Request \u3057\u3066\u307f\u305f\u3044\u3002\n# \u554f\u984c\n\n[Sinon.JS v1.17.3](https://github.com/sinonjs/sinon/tree/v1.17.3) \u3067\u767a\u751f\u3059\u308b\u3002\n\n```js\n// before\nconst apiKey = 'xxx'; // \u30c0\u30df\u30fc\u306e\u5024\nconst sandbox = sinon.sandbox.create();\nsandbox.stub(process.env, 'API_KEY', apiKey); // \u5b58\u5728\u3057\u306a\u3044\u74b0\u5883\u5909\u6570 API_KEY (`process.env.API_KEY`) \u3092 apiKey \u3067 stub \u3057\u305f\u3044\n//=> TypeError: Cannot stub non-existent own property API_KEY\n\n// after\nsandbox.restore(); // \u5143\u306b\u623b\u3059\n```\n\n# \u89e3\u6c7a\u7b56\n\n\u3072\u3068\u307e\u305a\u5f37\u5f15\u306b `null` \u3092\u4ee3\u5165\u3057\u3066\u56de\u907f\u3057\u305f\u3002\u3053\u306e\u65b9\u6cd5\u3060\u3068 `null` \u304c\u623b\u3055\u308c\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u53b3\u5bc6\u306b\u306f\u8aa4\u308a\u304c\u3042\u308b\u3002`delete` \u3059\u308b\u307b\u3046\u304c\u826f\u3044\u304c\u3001\u5b9f\u5bb3\u306f\u306a\u3044\u306e\u3067\u3001\u3053\u306e\u65b9\u6cd5\u3067\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n\n```js\n// before\nconst apiKey = 'xxx'; // \u30c0\u30df\u30fc\u306e\u5024\nconst sandbox = sinon.sandbox.create();\nif (!process.env.hasOwnProperty('API_KEY')) process.env.API_KEY = null; // \u3053\u306e\u884c\u3092\u8ffd\u52a0\u3057\u3001\u5f37\u5f15\u306b\u5bfe\u5fdc\u3002\nsandbox.stub(process.env, 'API_KEY', apiKey);\n\n// after\nsandbox.restore(); // \u5143\u306b\u623b\u3059\n```\n\nSinon.JS \u3067\u306e\u5b9f\u88c5\u306b\u3064\u3044\u3066\u306f source code \u3092\u53c2\u7167\u3002\n\nhttps://github.com/sinonjs/sinon/blob/v1.17.3/lib/sinon/collection.js#L92-L94\n\n# \u88dc\u8db3\n\n\u500b\u4eba\u7684\u306b\u306f\u52dd\u624b\u306b\u8ffd\u52a0\u3057\u3066 `delete` \u3057\u3066\u304f\u308c\u308b\u3068\u5b09\u3057\u3044\u306e\u3067\u3001Pull Request \u3057\u3066\u307f\u305f\u3044\u3002\n", "tags": ["Sinon.JS"]}