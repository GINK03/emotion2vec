{"tags": ["Redmine", "Redmine3.3"], "context": "\n\n[\u6982\u8981]\nCentOS7\u306bNginx + Unicorn\u3067Redmine3.3\u3092\u69cb\u7bc9\u3059\u308b\u3002\n\n[\u4e8b\u524d\u6e96\u5099]\n\u4e0b\u8a18\u304c\u69cb\u7bc9\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\nCentOS7\u306e\u521d\u671f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806\n\n[\u4f5c\u696d\u5185\u5bb9]\n\n\u5fc5\u8981\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install openssl-devel\n$ sudo yum install readline-devel\n$ sudo yum install curl-devel\n$ sudo yum install libyaml-devel\n$ sudo yum install ImageMagick\n$ sudo yum install ImageMagick-devel\n$ sudo yum install wget\n$ sudo yum install git\n$ sudo yum install bzip2\n$ sudo yum install gcc\n\n\nMySQL\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nMySQL\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n$ sudo rpm -ivh http://dev.mysql.com/get/mysql57-community-release-el7-7.noarch.rpm\n\n\n\u6700\u65b0\u7248\u306eMySQL\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum install mysql mysql-server mysql-devel\n\n\nmy.cnf\u306e\u7de8\u96c6\nsudo vi /etc/my.cnf\n\n\u5143\u304b\u3089\u3042\u308b my.cnf \u3092\u5168\u3066\u6d88\u3057\u3066\u4e0b\u8a18\u3092\u8a2d\u5b9a\u3059\u308b\n\n/etc/my.cnf\n[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\n\nsymbolic-links=0\n\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\ncharacter-set-server = utf8\n\n[mysql]\ndefault-character-set = utf8\n\n\n\nMySQL\u8d77\u52d5\n$ sudo systemctl start mysqld.service\n\n\nMySQL\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo systemctl enable mysqld.service\n\n\nMySQL\u306e\u8d77\u52d5\u78ba\u8a8d\nrunning \u306b\u306a\u3063\u3066\u308b\u306e\u3092\u78ba\u8a8d\n$ sudo systemctl status mysqld.service\n\u25cf mysqld.service - MySQL Server\n   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n   Active: active (running) since \u65e5 2016-08-14 22:22:38 JST; 43s ago\n Main PID: 45334 (mysqld)\n   CGroup: /system.slice/mysqld.service\n           \u2514\u250045334 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid\n\n 8\u6708 14 22:22:31 redmine.ghfdjk.me systemd[1]: Starting MySQL Server...\n 8\u6708 14 22:22:38 redmine.ghfdjk.me systemd[1]: Started MySQL Server.\n\n\nMySQL\u306e\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d\n\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u3001\u8a2d\u5b9a\u3055\u308c\u3044\u308b\u306e\u3067\u305d\u308c\u3092\u78ba\u8a8d\n$ sudo cat /var/log/mysqld.log | grep password\n2016-08-14T13:22:34.726150Z 1 [Note] A temporary password is generated for root@localhost: <..9k>ocRD8r\n\n\nMySQL\u306e\u521d\u671f\u8a2d\u5b9a\n$ sudo mysql_secure_installation\n\nSecuring the MySQL server deployment.\n\n### /var/log/mysqld.log \u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u305f\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\nEnter password for user root: ### <..9k>ocRD8r \u3092\u5165\u529b\n\nThe existing password for the user account root has expired. Please set a new password.\n\nNew password: ### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\n\nRe-enter new password:\u3000### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3082\u3046\u4e00\u5ea6\u5165\u529b\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u5f37\u5316\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nThe 'validate_password' plugin is installed on the server.\nThe subsequent steps will run with the existing configuration\nof the plugin.\nUsing existing password for root.\n\n### \u5f37\u5316\u3055\u308c\u305f\u30dd\u30ea\u30b7\u30fc\u306b\u5247\u308a\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u8a2d\u5b9a\nEstimated strength of the password: 100\nChange the password for root ? ((Press y|Y for Yes, any other key for No) : y\n\nNew password: ### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\n\nRe-enter new password: ### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3082\u3046\u4e00\u5ea6\u5165\u529b\n\n### anonymous \u30e6\u30fc\u30b6\u3092\u524a\u9664\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : y\nSuccess.\n\nNormally, root should only be allowed to connect from\n'localhost'. This ensures that someone cannot guess at\nthe root password from the network.\n\n### \u30ea\u30e2\u30fc\u30c8\u304b\u3089\u306e root \u30ed\u30b0\u30a4\u30f3\u3092\u7981\u6b62\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : y\nSuccess.\n\nBy default, MySQL comes with a database named 'test' that\nanyone can access. This is also intended only for testing,\nand should be removed before moving into a production\nenvironment.\n\n### test \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3059\u308b\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : y\n - Dropping test database...\nSuccess.\n\n - Removing privileges on test database...\nSuccess.\n\nReloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\n\n### \u6a29\u9650\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3080\nReload privilege tables now? (Press y|Y for Yes, any other key for No) : y\nSuccess.\n\nAll done!\n\n\n/root/.my.cnf\u4f5c\u6210\n$ sudo vi /root/.my.cnf\n\n\u4e0b\u8a18\u3092\u53c2\u8003\u306b\u4f5c\u6210\u3059\u308b\n\u203b {password} \u306f\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u304f\u3060\u3044\u3002\n[client]\nuser = root\npassword = {password}\n\n\nRedmine\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\u3068\u30e6\u30fc\u30b6\u4f5c\u6210\n\nredmine\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n$ sudo mysql -u root -p\nmysql> CREATE DATABASE redmine charset=\"utf8\";\n\n\nredmine\u30e6\u30fc\u30b6\u4f5c\u6210\n\u203b {password} \u306f\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\nmysql> GRANT ALL PRIVILEGES ON redmine.* TO redmine@localhost IDENTIFIED BY '{pasword}';\nmysql> exit\n\n\nrbenv + ruby-build\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n$ cd /opt\n$ sudo git clone https://github.com/sstephenson/rbenv.git\n$ sudo mkdir /opt/rbenv/plugins\n$ cd /opt/rbenv/plugins\n$ sudo git clone https://github.com/sstephenson/ruby-build.git\n\n\nprofile.d\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n$ sudo vi /etc/profile.d/rbenv.sh\n\n\u4e0b\u8a18\u3092\u8a18\u8ff0\u3059\u308b\n\n/etc/profile.d/rbenv.sh\nexport RBENV_ROOT=\"/opt/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init --no-rehash -)\"\n\n\n\n/opt/rbenv \u306e\u6a29\u9650\u3092\u5909\u66f4\n$ sudo chgrp -R staff /opt/rbenv\n$ sudo chmod -R 775 /opt/rbenv\n\n\nruby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n### \u74b0\u5883\u5909\u6570\u3092\u8aad\u307f\u8fbc\u307f\n$ source /etc/profile.d/rbenv.sh\n\n### ruby 2.3.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ rbenv install 2.3.1\n\n### ruby 2.3.1 \u3092\u5168\u4f53\u306b\u53cd\u6620\n$ rbenv global 2.3.1\n\n\nRedmine\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd /opt\n$ sudo wget http://www.redmine.org/releases/redmine-3.3.0.tar.gz\n\n\nRedmine\u3092\u89e3\u51cd\n$ sudo tar zxf redmine-3.3.0.tar.gz\n\n\nRedmine\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210\n$ sudo ln -s redmine-3.3.0 redmine\n\n\nRedmine\u306eDB\u8a2d\u5b9a\n\u307e\u305a\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n$ sudo cp redmine/config/database.yml.example redmine/config/database.yml\n\n$ sudo vi redmine/config/database.yml\n\npassword \u3092mysql\u7528DB\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\n\n/opt/redmine/config/database.yml\nproduction:\n  adapter: mysql2\n  database: redmine\n  host: localhost\n  username: redmine\n  password: {password}\n  encoding: utf8\n\n\n\n\u8a2d\u5b9a\u5024\u306b\u3064\u3044\u3066\n\n\n\ndatabase.yml\u306b\u306fproduction\u4ee5\u5916\u306bdevelopment\u3001test\u306e\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u57fa\u672c\u306fproduction\u306e\u307f\u4f7f\u7528\u3059\u308b\u306e\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u306fproduction\u3060\u3051\u306b\u8a2d\u5b9a\u3059\u308c\u3070\u826f\u3044\u3067\u3059\u3002\n\nadapter\u306fMySQL\u306e\u5834\u5408\u306fmysql2\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\ndatabase\u306fRedmine\u3067\u4f7f\u7528\u3059\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nusername\u306fMySQL\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3059\u308bMySQL\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\npassword\u306fusername\u3067\u6307\u5b9a\u3057\u305fMySQL\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nencoding\u306fMySQL\u3067\u4f7f\u7528\u3059\u308b\u6587\u5b57\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u901a\u5e38utf8\u3068\u306a\u308b\u3002\n\n\n\n\nRedmine\u30e1\u30fc\u30eb\u8a2d\u5b9a\n\u307e\u305a\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n$ sudo cp /opt/redmine/config/configuration.yml.example /opt/redmine/config/configuration.yml\n\n\n\u30e1\u30fc\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\n$ sudo vi /opt/redmine/config/configuration.yml\n\nproduction:\u306e\u7b87\u6240\u306b\u8a2d\u5b9a\u3059\u308b\n\n/opt/redmine/config/configuration.yml\n# specific configuration options for production environment\n# that overrides the default ones\nproduction:\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      address: \"localhost\"\n      port: 25\n\n\n\n\u6a29\u9650\u5909\u66f4\n$ sudo chgrp -R staff /opt/redmine*\n\n\n\u30b7\u30b9\u30c6\u30e0\u5171\u901a\u306eRuby\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd /opt/redmine\n$ gem install bundler --no-rdoc --no-ri\n\n\nRedmine\u3067\u5fc5\u8981\u306aRuby\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd /opt/redmine\n$ bundle install --path vendor/bundler --without development test\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u6697\u53f7\u5316\n\u6539\u3056\u3093\u9632\u6b62\u306e\u305f\u3081\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u30af\u30c3\u30ad\u30fc\u3092\u6697\u53f7\u5316\u3059\u308b\u9375\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u751f\u6210\n$ bundle exec rake generate_secret_token\n/opt/redmine-3.3.0/vendor/bundler/ruby/2.3.0/gems/htmlentities-4.3.1/lib/htmlentities/mappings/expanded.rb:465: warning: key \"inodot\" is duplicated and overwritten on line 466\n### \u4e0a\u8a18\u306e\u3088\u3046\u306b\u3067\u308c\u3070OK\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30b9\u30ad\u30fc\u30de\u69cb\u7bc9\n$ bundle exec rake db:migrate RAILS_ENV=production\n\n\nRails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0(Unicorn)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo vi /opt/redmine/Gemfile.local\n\n\u4e0b\u8a18\u3092\u8a18\u8ff0\n/opt/redmine/Gemfile.local\ngem \"unicorn\"\n\n\nUnicorn\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd /opt/redmine\n$ bundle update\n\n\nSystemd\u7528\u306eUnicorn\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\nRedmine\uff08Unicorn\uff09\u306f\u3001\u8d77\u52d5\u6642\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\u3068\u30a8\u30e9\u30fc\u7d42\u4e86\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001[Unit]\u30bb\u30af\u30b7\u30e7\u30f3\u306bAfter\u3067\u3001mysqld.service\u304c\u5b9f\u884c\u3055\u308c\u3066\u304b\u3089redmine-unicorn.service\u304c\u8d77\u52d5\u3055\u308c\u308b\u3088\u3046\u9806\u5e8f\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n$ sudo vi /usr/lib/systemd/system/redmine-unicorn.service\n\n\n/usr/lib/systemd/system/redmine-unicorn.service\n[Unit]\nDescription=Redmine Unicorn Server\nAfter=mysqld.service\n\n[Service]\nWorkingDirectory=/opt/redmine\nEnvironment=RAILS_ENV=production\nSyslogIdentifier=redmine-unicorn\nPIDFile=/opt/redmine/tmp/pids/unicorn.pid\n\nExecStart=/opt/rbenv/shims/bundle exec \"unicorn_rails -c config/unicorn.rb -E production\"\nExecStop=/usr/bin/kill -QUIT $MAINPID\nExecReload=/bin/kill -USR2 $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n\n\n\nUnicorn\u8a2d\u5b9a\n$ sudo vim /opt/redmine/config/unicorn.rb\n\n\n/opt/redmine/config/unicorn.rb\nworker_processes 2\n\napp_path = \"/opt/redmine\"\n\nlisten  File.expand_path('tmp/unicorn_redmine.sock', app_path)\npid File.expand_path('tmp/unicorn.pid', app_path)\nstderr_path File.expand_path('log/unicorn.stderr.log', app_path)\nstdout_path File.expand_path('log/unicorn.stdout.log', app_path)\n\npreload_app true\n\ntimeout 30\n\nif GC.respond_to?(:copy_on_write_friendly=)\n  GC.copy_on_write_friendly = true\nend\n\nbefore_fork do |server, worker|\n  defined?(ActiveRecord::Base) and ActiveRecord::Base.connection.disconnect!\n\n  old_pid = \"#{server.config[:pid]}.oldbin\"\n  if old_pid != server.pid\n    begin\n      sig = (worker.nr + 1) >= server.worker_processes ? :QUIT : :TTOU\n      Process.kill(sig, File.read(old_pid).to_i)\n    rescue Errno::ENOENT, Errno::ESRCH\n    end\n  end\nend\n\nafter_fork do |server, worker|\n  defined?(ActiveRecord::Base) and ActiveRecord::Base.establish_connection\nend\n\n\n\nredmine-unicorn\u8d77\u52d5\n$ sudo systemctl start redmine-unicorn.service\n\n\nredmine-unicorn\u306e\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n### active \u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\n$ sudo systemctl status redmine-unicorn.service\n\u25cf redmine-unicorn.service - Redmine Unicorn Server\n   Loaded: loaded (/usr/lib/systemd/system/redmine-unicorn.service; disabled; vendor preset: disabled)\n   Active: active (running) since \u6728 2016-09-22 22:31:34 JST; 19s ago\n Main PID: 35806 (ruby)\n   CGroup: /system.slice/redmine-unicorn.service\n           \u251c\u250035806 unicorn_rails master -c config/unicorn.rb -E production\n           \u251c\u250035836 unicorn_rails worker[0] -c config/unicorn.rb -E production\n           \u2514\u250035838 unicorn_rails worker[1] -c config/unicorn.rb -E production\n\n 9\u6708 22 22:31:34 redmine.ghfdjk.me systemd[1]: Started Redmine Unicorn Server.\n 9\u6708 22 22:31:34 redmine.ghfdjk.me systemd[1]: Starting Redmine Unicorn Server...\n\n\nredmine-unicorn\u306e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo systemctl enable redmine-unicorn.service\n\n\nNginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nNginx\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n$ sudo vi /etc/yum.repos.d/nginx.repo\n\n\n/etc/yum.repos.d/nginx.repo\n[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=0\nenabled=1\n\n\n\nNginx\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u8ffd\u52a0\n$ sudo yum install nginx\n\n\nNginx\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$ sudo systemctl enable nginx.service\n\n\nRedmine\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n$ cd /etc/nginx/conf.d\n\n\n\u5143\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n$ sudo mv default.conf default.conf.orig\n\n$ sudo vi /etc/nginx/conf.d/redmine.conf\n\nupstream unicorn-redmine {\n    server unix:/opt/redmine/tmp/unicorn_redmine.sock;\n}\n\nserver {\n    listen 80;\n    server_name {\u30c9\u30e1\u30a4\u30f3\u540d};\n\n    root /opt/redmine/public;\n    client_max_body_size 1G;\n\n    location / {\n        try_files $uri/index.html $uri.html $uri @app;\n    }\n\n    location @app {\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_connect_timeout 60;\n        proxy_read_timeout 60;\n        proxy_send_timeout 600;\n        proxy_pass http://unicorn-redmine;\n    }\n\n    error_page 500 502 503 504 /500.html;\n}\n\n\n\u8a2d\u5b9a\u30d5\u30a3\u30a2\u30eb\u306esyntax\u78ba\u8a8d\n$ sudo nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n\n\nNginx\u8d77\u52d5\n$ sudo systemctl start nginx\n\n\n[\u4e8b\u5f8c\u78ba\u8a8d\u30fb\u4f5c\u696d]\n# [\u6982\u8981]\nCentOS7\u306bNginx + Unicorn\u3067Redmine3.3\u3092\u69cb\u7bc9\u3059\u308b\u3002\n\n\n# [\u4e8b\u524d\u6e96\u5099]\n\u4e0b\u8a18\u304c\u69cb\u7bc9\u6e08\u307f\u3067\u3042\u308b\u3053\u3068\u304c\u524d\u63d0\u3067\u3059\u3002\n[CentOS7\u306e\u521d\u671f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806](http://qiita.com/sabakan7/items/779fa69bf9e15b9e6fee)\n\n# [\u4f5c\u696d\u5185\u5bb9]\n## \u5fc5\u8981\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ sudo yum install openssl-devel\n$ sudo yum install readline-devel\n$ sudo yum install curl-devel\n$ sudo yum install libyaml-devel\n$ sudo yum install ImageMagick\n$ sudo yum install ImageMagick-devel\n$ sudo yum install wget\n$ sudo yum install git\n$ sudo yum install bzip2\n$ sudo yum install gcc\n```\n\n## MySQL\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n### MySQL\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n```bash\n$ sudo rpm -ivh http://dev.mysql.com/get/mysql57-community-release-el7-7.noarch.rpm\n```\n\n### \u6700\u65b0\u7248\u306eMySQL\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ sudo yum install mysql mysql-server mysql-devel\n```\n\n### my.cnf\u306e\u7de8\u96c6\n```bash\nsudo vi /etc/my.cnf\n```\n\n\u5143\u304b\u3089\u3042\u308b my.cnf \u3092\u5168\u3066\u6d88\u3057\u3066\u4e0b\u8a18\u3092\u8a2d\u5b9a\u3059\u308b\n\n```/etc/my.cnf\n[mysqld]\ndatadir=/var/lib/mysql\nsocket=/var/lib/mysql/mysql.sock\n\nsymbolic-links=0\n\nlog-error=/var/log/mysqld.log\npid-file=/var/run/mysqld/mysqld.pid\n\ncharacter-set-server = utf8\n\n[mysql]\ndefault-character-set = utf8\n```\n\n### MySQL\u8d77\u52d5\n```bash\n$ sudo systemctl start mysqld.service\n```\n\n### MySQL\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n```bash\n$ sudo systemctl enable mysqld.service\n```\n\n### MySQL\u306e\u8d77\u52d5\u78ba\u8a8d\n`running` \u306b\u306a\u3063\u3066\u308b\u306e\u3092\u78ba\u8a8d\n\n```bash\n$ sudo systemctl status mysqld.service\n\u25cf mysqld.service - MySQL Server\n   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)\n   Active: active (running) since \u65e5 2016-08-14 22:22:38 JST; 43s ago\n Main PID: 45334 (mysqld)\n   CGroup: /system.slice/mysqld.service\n           \u2514\u250045334 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid\n\n 8\u6708 14 22:22:31 redmine.ghfdjk.me systemd[1]: Starting MySQL Server...\n 8\u6708 14 22:22:38 redmine.ghfdjk.me systemd[1]: Started MySQL Server.\n```\n\n### MySQL\u306e\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d\n\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u3001\u8a2d\u5b9a\u3055\u308c\u3044\u308b\u306e\u3067\u305d\u308c\u3092\u78ba\u8a8d\n\n```bash\n$ sudo cat /var/log/mysqld.log | grep password\n2016-08-14T13:22:34.726150Z 1 [Note] A temporary password is generated for root@localhost: <..9k>ocRD8r\n```\n\n### MySQL\u306e\u521d\u671f\u8a2d\u5b9a\n```bash\n$ sudo mysql_secure_installation\n\nSecuring the MySQL server deployment.\n\n### /var/log/mysqld.log \u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u305f\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\nEnter password for user root: ### <..9k>ocRD8r \u3092\u5165\u529b\n\nThe existing password for the user account root has expired. Please set a new password.\n\nNew password: ### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\n\nRe-enter new password:\u3000### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3082\u3046\u4e00\u5ea6\u5165\u529b\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u5f37\u5316\u3059\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nThe 'validate_password' plugin is installed on the server.\nThe subsequent steps will run with the existing configuration\nof the plugin.\nUsing existing password for root.\n\n### \u5f37\u5316\u3055\u308c\u305f\u30dd\u30ea\u30b7\u30fc\u306b\u5247\u308a\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u8a2d\u5b9a\nEstimated strength of the password: 100\nChange the password for root ? ((Press y|Y for Yes, any other key for No) : y\n\nNew password: ### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\n\nRe-enter new password: ### \u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3082\u3046\u4e00\u5ea6\u5165\u529b\n\n### anonymous \u30e6\u30fc\u30b6\u3092\u524a\u9664\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : y\nSuccess.\n\nNormally, root should only be allowed to connect from\n'localhost'. This ensures that someone cannot guess at\nthe root password from the network.\n\n### \u30ea\u30e2\u30fc\u30c8\u304b\u3089\u306e root \u30ed\u30b0\u30a4\u30f3\u3092\u7981\u6b62\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : y\nSuccess.\n\nBy default, MySQL comes with a database named 'test' that\nanyone can access. This is also intended only for testing,\nand should be removed before moving into a production\nenvironment.\n\n### test \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3059\u308b\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : y\n - Dropping test database...\nSuccess.\n\n - Removing privileges on test database...\nSuccess.\n\nReloading the privilege tables will ensure that all changes\nmade so far will take effect immediately.\n\n### \u6a29\u9650\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3080\nReload privilege tables now? (Press y|Y for Yes, any other key for No) : y\nSuccess.\n\nAll done!\n```\n\n### /root/.my.cnf\u4f5c\u6210\n```bash\n$ sudo vi /root/.my.cnf\n```\n\n\u4e0b\u8a18\u3092\u53c2\u8003\u306b\u4f5c\u6210\u3059\u308b\n\u203b `{password}` \u306f\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u304f\u3060\u3044\u3002\n\n```bash\n[client]\nuser = root\npassword = {password}\n```\n\n## Redmine\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\u3068\u30e6\u30fc\u30b6\u4f5c\u6210\n### redmine\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n```bash\n$ sudo mysql -u root -p\nmysql> CREATE DATABASE redmine charset=\"utf8\";\n```\n\n### redmine\u30e6\u30fc\u30b6\u4f5c\u6210\n\u203b `{password}` \u306f\u9069\u5b9c\u5909\u66f4\u3057\u3066\u304f\u3060\u3055\u3044\n\n```bash\nmysql> GRANT ALL PRIVILEGES ON redmine.* TO redmine@localhost IDENTIFIED BY '{pasword}';\nmysql> exit\n```\n\n## rbenv + ruby-build\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n```bash\n$ cd /opt\n$ sudo git clone https://github.com/sstephenson/rbenv.git\n$ sudo mkdir /opt/rbenv/plugins\n$ cd /opt/rbenv/plugins\n$ sudo git clone https://github.com/sstephenson/ruby-build.git\n```\n\n### profile.d\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n```bash\n$ sudo vi /etc/profile.d/rbenv.sh\n```\n\n\u4e0b\u8a18\u3092\u8a18\u8ff0\u3059\u308b\n\n```/etc/profile.d/rbenv.sh\nexport RBENV_ROOT=\"/opt/rbenv\"\nexport PATH=\"${RBENV_ROOT}/bin:${PATH}\"\neval \"$(rbenv init --no-rehash -)\"\n```\n\n### /opt/rbenv \u306e\u6a29\u9650\u3092\u5909\u66f4\n```bash\n$ sudo chgrp -R staff /opt/rbenv\n$ sudo chmod -R 775 /opt/rbenv\n```\n\n### ruby\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n### \u74b0\u5883\u5909\u6570\u3092\u8aad\u307f\u8fbc\u307f\n$ source /etc/profile.d/rbenv.sh\n\n### ruby 2.3.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ rbenv install 2.3.1\n\n### ruby 2.3.1 \u3092\u5168\u4f53\u306b\u53cd\u6620\n$ rbenv global 2.3.1\n```\n\n## Redmine\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ cd /opt\n$ sudo wget http://www.redmine.org/releases/redmine-3.3.0.tar.gz\n```\n\n### Redmine\u3092\u89e3\u51cd\n```bash\n$ sudo tar zxf redmine-3.3.0.tar.gz\n```\n\n### Redmine\u306e\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4f5c\u6210\n```bash\n$ sudo ln -s redmine-3.3.0 redmine\n```\n\n### Redmine\u306eDB\u8a2d\u5b9a\n\u307e\u305a\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\n```bash\n$ sudo cp redmine/config/database.yml.example redmine/config/database.yml\n```\n\n```bash\n$ sudo vi redmine/config/database.yml\n```\n\n`password` \u3092mysql\u7528DB\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\n\n```/opt/redmine/config/database.yml\nproduction:\n  adapter: mysql2\n  database: redmine\n  host: localhost\n  username: redmine\n  password: {password}\n  encoding: utf8\n```\n\n* \u8a2d\u5b9a\u5024\u306b\u3064\u3044\u3066\n - `database.yml`\u306b\u306f`production`\u4ee5\u5916\u306b`development`\u3001`test`\u306e\u8a2d\u5b9a\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u57fa\u672c\u306f`production`\u306e\u307f\u4f7f\u7528\u3059\u308b\u306e\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\u306f`production`\u3060\u3051\u306b\u8a2d\u5b9a\u3059\u308c\u3070\u826f\u3044\u3067\u3059\u3002\n - `adapter`\u306fMySQL\u306e\u5834\u5408\u306fmysql2\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n - `database`\u306fRedmine\u3067\u4f7f\u7528\u3059\u308b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u6307\u5b9a\u3057\u307e\u3059\u3002\n - `username`\u306fMySQL\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3059\u308bMySQL\u306e\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n - `password`\u306f`username`\u3067\u6307\u5b9a\u3057\u305fMySQL\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n - `encoding`\u306fMySQL\u3067\u4f7f\u7528\u3059\u308b\u6587\u5b57\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u901a\u5e38utf8\u3068\u306a\u308b\u3002\n\n### Redmine\u30e1\u30fc\u30eb\u8a2d\u5b9a\n\u307e\u305a\u306f\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\n```bash\n$ sudo cp /opt/redmine/config/configuration.yml.example /opt/redmine/config/configuration.yml\n```\n\n### \u30e1\u30fc\u30eb\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7de8\u96c6\n```bash\n$ sudo vi /opt/redmine/config/configuration.yml\n```\n\n`production:`\u306e\u7b87\u6240\u306b\u8a2d\u5b9a\u3059\u308b\n\n```/opt/redmine/config/configuration.yml\n# specific configuration options for production environment\n# that overrides the default ones\nproduction:\n  email_delivery:\n    delivery_method: :smtp\n    smtp_settings:\n      address: \"localhost\"\n      port: 25\n```\n\n### \u6a29\u9650\u5909\u66f4\n```bash\n$ sudo chgrp -R staff /opt/redmine*\n```\n\n### \u30b7\u30b9\u30c6\u30e0\u5171\u901a\u306eRuby\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ cd /opt/redmine\n$ gem install bundler --no-rdoc --no-ri\n```\n\n### Redmine\u3067\u5fc5\u8981\u306aRuby\u30e2\u30b8\u30e5\u30fc\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ cd /opt/redmine\n$ bundle install --path vendor/bundler --without development test\n```\n\n### \u30bb\u30c3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u6697\u53f7\u5316\n\u6539\u3056\u3093\u9632\u6b62\u306e\u305f\u3081\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u30af\u30c3\u30ad\u30fc\u3092\u6697\u53f7\u5316\u3059\u308b\u9375\u3092\u30e9\u30f3\u30c0\u30e0\u306b\u751f\u6210\n\n```bash\n$ bundle exec rake generate_secret_token\n/opt/redmine-3.3.0/vendor/bundler/ruby/2.3.0/gems/htmlentities-4.3.1/lib/htmlentities/mappings/expanded.rb:465: warning: key \"inodot\" is duplicated and overwritten on line 466\n### \u4e0a\u8a18\u306e\u3088\u3046\u306b\u3067\u308c\u3070OK\n```\n\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30b9\u30ad\u30fc\u30de\u69cb\u7bc9\n```bash\n$ bundle exec rake db:migrate RAILS_ENV=production\n```\n\n### Rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0(Unicorn)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ sudo vi /opt/redmine/Gemfile.local\n```\n\n\u4e0b\u8a18\u3092\u8a18\u8ff0\n```/opt/redmine/Gemfile.local\ngem \"unicorn\"\n```\n\n### Unicorn\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ cd /opt/redmine\n$ bundle update\n```\n\n### Systemd\u7528\u306eUnicorn\u30b5\u30fc\u30d3\u30b9\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\nRedmine\uff08Unicorn\uff09\u306f\u3001\u8d77\u52d5\u6642\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3067\u304d\u306a\u3044\u3068\u30a8\u30e9\u30fc\u7d42\u4e86\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001`[Unit]`\u30bb\u30af\u30b7\u30e7\u30f3\u306b`After`\u3067\u3001`mysqld.service`\u304c\u5b9f\u884c\u3055\u308c\u3066\u304b\u3089`redmine-unicorn.service`\u304c\u8d77\u52d5\u3055\u308c\u308b\u3088\u3046\u9806\u5e8f\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```\n$ sudo vi /usr/lib/systemd/system/redmine-unicorn.service\n```\n\n```/usr/lib/systemd/system/redmine-unicorn.service\n[Unit]\nDescription=Redmine Unicorn Server\nAfter=mysqld.service\n\n[Service]\nWorkingDirectory=/opt/redmine\nEnvironment=RAILS_ENV=production\nSyslogIdentifier=redmine-unicorn\nPIDFile=/opt/redmine/tmp/pids/unicorn.pid\n\nExecStart=/opt/rbenv/shims/bundle exec \"unicorn_rails -c config/unicorn.rb -E production\"\nExecStop=/usr/bin/kill -QUIT $MAINPID\nExecReload=/bin/kill -USR2 $MAINPID\n\n[Install]\nWantedBy=multi-user.target\n```\n\n## Unicorn\u8a2d\u5b9a\n```bash\n$ sudo vim /opt/redmine/config/unicorn.rb\n```\n\n```/opt/redmine/config/unicorn.rb\nworker_processes 2\n\napp_path = \"/opt/redmine\"\n\nlisten  File.expand_path('tmp/unicorn_redmine.sock', app_path)\npid File.expand_path('tmp/unicorn.pid', app_path)\nstderr_path File.expand_path('log/unicorn.stderr.log', app_path)\nstdout_path File.expand_path('log/unicorn.stdout.log', app_path)\n\npreload_app true\n\ntimeout 30\n\nif GC.respond_to?(:copy_on_write_friendly=)\n  GC.copy_on_write_friendly = true\nend\n\nbefore_fork do |server, worker|\n  defined?(ActiveRecord::Base) and ActiveRecord::Base.connection.disconnect!\n\n  old_pid = \"#{server.config[:pid]}.oldbin\"\n  if old_pid != server.pid\n    begin\n      sig = (worker.nr + 1) >= server.worker_processes ? :QUIT : :TTOU\n      Process.kill(sig, File.read(old_pid).to_i)\n    rescue Errno::ENOENT, Errno::ESRCH\n    end\n  end\nend\n\nafter_fork do |server, worker|\n  defined?(ActiveRecord::Base) and ActiveRecord::Base.establish_connection\nend\n```\n\n### redmine-unicorn\u8d77\u52d5\n```bash\n$ sudo systemctl start redmine-unicorn.service\n```\n\n### redmine-unicorn\u306e\u30d7\u30ed\u30bb\u30b9\u78ba\u8a8d\n```bash\n### active \u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3092\u78ba\u8a8d\n$ sudo systemctl status redmine-unicorn.service\n\u25cf redmine-unicorn.service - Redmine Unicorn Server\n   Loaded: loaded (/usr/lib/systemd/system/redmine-unicorn.service; disabled; vendor preset: disabled)\n   Active: active (running) since \u6728 2016-09-22 22:31:34 JST; 19s ago\n Main PID: 35806 (ruby)\n   CGroup: /system.slice/redmine-unicorn.service\n           \u251c\u250035806 unicorn_rails master -c config/unicorn.rb -E production\n           \u251c\u250035836 unicorn_rails worker[0] -c config/unicorn.rb -E production\n           \u2514\u250035838 unicorn_rails worker[1] -c config/unicorn.rb -E production\n\n 9\u6708 22 22:31:34 redmine.ghfdjk.me systemd[1]: Started Redmine Unicorn Server.\n 9\u6708 22 22:31:34 redmine.ghfdjk.me systemd[1]: Starting Redmine Unicorn Server...\n```\n\n### redmine-unicorn\u306e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n```bash\n$ sudo systemctl enable redmine-unicorn.service\n```\n\n## Nginx\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n### Nginx\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n```bash\n$ sudo vi /etc/yum.repos.d/nginx.repo\n```\n\n```/etc/yum.repos.d/nginx.repo\n[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=0\nenabled=1\n```\n\n### Nginx\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u8ffd\u52a0\n```bash\n$ sudo yum install nginx\n```\n\n### Nginx\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n```bash\n$ sudo systemctl enable nginx.service\n```\n\n### Redmine\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n```\n$ cd /etc/nginx/conf.d\n```\n\n### \u5143\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n```bash\n$ sudo mv default.conf default.conf.orig\n```\n\n```bash\n$ sudo vi /etc/nginx/conf.d/redmine.conf\n```\n\n```bash\nupstream unicorn-redmine {\n    server unix:/opt/redmine/tmp/unicorn_redmine.sock;\n}\n\nserver {\n    listen 80;\n    server_name {\u30c9\u30e1\u30a4\u30f3\u540d};\n\n    root /opt/redmine/public;\n    client_max_body_size 1G;\n\n    location / {\n        try_files $uri/index.html $uri.html $uri @app;\n    }\n\n    location @app {\n        proxy_redirect off;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Host $http_host;\n        proxy_connect_timeout 60;\n        proxy_read_timeout 60;\n        proxy_send_timeout 600;\n        proxy_pass http://unicorn-redmine;\n    }\n\n    error_page 500 502 503 504 /500.html;\n}\n```\n\n### \u8a2d\u5b9a\u30d5\u30a3\u30a2\u30eb\u306esyntax\u78ba\u8a8d\n```bash\n$ sudo nginx -t\nnginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful\n```\n\n### Nginx\u8d77\u52d5\n```bash\n$ sudo systemctl start nginx\n```\n\n## [\u4e8b\u5f8c\u78ba\u8a8d\u30fb\u4f5c\u696d]\n"}