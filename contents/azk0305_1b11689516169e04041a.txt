{"context": "\u30b5\u30fc\u30d0\uff1a\u3055\u304f\u3089\u306eVPS 1G HDD\u30d7\u30e9\u30f3\nOS\uff1a\u6a19\u6e96OS\uff08CentOS 6 x86_64\uff09\nOS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3068\u521d\u671f\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u3066\u3002\u3042\u3068\u300180\u756a\u30dd\u30fc\u30c8\u3092iptables\u3067\u958b\u3051\u3066\u304a\u304f\u3002\n\nnginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ncommand\n# rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm\n# yum -y install nginx\n\n\n\nnginx\u3092\u8d77\u52d5\u3059\u308b\n\ncommand\n# /etc/init.d/nginx start\n\n\n\u300chttp://<\u914d\u5e03\u3055\u308c\u305f\u30b0\u30ed\u30fc\u30d0\u30ebIP>\u300d \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u4e2d\u592e\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3002\n\n\nNode.js\u3068npm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ncommand\n# curl -L https://www.npmjs.com/install.sh | sh\n# npm update -g npm\n# npm cache clean\n# npm install -g n\n# n stable\n# node -v\n# npm -v\n\n\n\nexpress\u3068pm2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ncommand\n# npm install -g express\n# npm install -g express-generator\n# npm install -g pm2\n\n\n\n\u9069\u5f53\u306a\u5834\u6240\u306bexpress\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\ncommand\n# express sample_app\n\n\n\npm2\u3092\u5229\u7528\u3057\u3066express\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8d77\u52d5\u3059\u308b\n\ncommand\n# cd sample_app\n# pm2 start bin/www\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\ncommand\n# curl http://localhost:3000\n\n\n\u308f\u3056\u308f\u3056\u30dd\u30fc\u30c8\u3092\u958b\u3051\u3066\u3001\u3042\u308c\u3053\u308c\u3059\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u305f\u3081\u3001curl\u3067\u5185\u90e8\u304b\u3089\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u306e\u307f\u3067\u3002HTML\u306e\u30bf\u30b0\u304c\u8868\u793a\u3055\u308c\u3001\u3055\u3089\u306b\u300cExpress\u300d\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u90e8\u5206\u304c\u3042\u308c\u3070OK\u3002\n\nnginx\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3059\u308b\n\ncommand\n# cd /etc/nginx/conf.d\n# vi default.conf\n\n\n\n/etc/nginx/conf.d/default.conf\nupstream node-backend {\n    server localhost:3000;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/log/host.access.log  main;\n    charset utf-8;\n    access_log /var/log/nginx/default.access.log main;\n    error_log /var/log/nginx/default.error.log;\n\n    proxy_redirect                      off;\n    proxy_set_header Host               $host;\n    proxy_set_header X-Real-IP          $remote_addr;\n    proxy_set_header X-Forwarded-Host   $host;\n    proxy_set_header X-Forwarded-Server $host;\n    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n\n    location / {\n        #root   /usr/share/nginx/html;\n        #index  index.html index.htm;\n        proxy_pass http://node-backend;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    #\uff08\u4ee5\u4e0b\u7565\uff09\n}\n\n\nnginx\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\ncommand\n# /etc/init.d/nginx restart\n\n\n\u5148\u307b\u3069\u306e\u30da\u30fc\u30b8\u306b\u518d\u5ea6\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u5de6\u5074\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8868\u793a\u304c\u3055\u308c\u308c\u3070\u3001\u5168\u3066\u7d42\u4e86\u3002\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002\n\n\u30b5\u30fc\u30d0\uff1a\u3055\u304f\u3089\u306eVPS 1G HDD\u30d7\u30e9\u30f3\nOS\uff1a\u6a19\u6e96OS\uff08CentOS 6 x86_64\uff09\n\nOS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u3068[\u521d\u671f\u8a2d\u5b9a](https://help.sakura.ad.jp/app/answers/detail/a_id/2429/)\u306f\u5b8c\u4e86\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u3066\u3002\u3042\u3068\u300180\u756a\u30dd\u30fc\u30c8\u3092iptables\u3067\u958b\u3051\u3066\u304a\u304f\u3002\n\n## nginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```text:command\n# rpm -ivh http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm\n# yum -y install nginx\n```\n\n## nginx\u3092\u8d77\u52d5\u3059\u308b\n```text:command\n# /etc/init.d/nginx start\n```\n\n\u300chttp://<\u914d\u5e03\u3055\u308c\u305f\u30b0\u30ed\u30fc\u30d0\u30ebIP>\u300d \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u4e2d\u592e\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3002\n\n![WS000005.jpg](https://qiita-image-store.s3.amazonaws.com/0/21867/53f9c16a-89d9-f764-449a-e262a3bfff14.jpeg)\n\n\n## Node.js\u3068npm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```text:command\n# curl -L https://www.npmjs.com/install.sh | sh\n# npm update -g npm\n# npm cache clean\n# npm install -g n\n# n stable\n# node -v\n# npm -v\n```\n\n## express\u3068pm2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```text:command\n# npm install -g express\n# npm install -g express-generator\n# npm install -g pm2\n```\n\n## \u9069\u5f53\u306a\u5834\u6240\u306bexpress\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n```text:command\n# express sample_app\n```\n\n## pm2\u3092\u5229\u7528\u3057\u3066express\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u8d77\u52d5\u3059\u308b\n```text:command\n# cd sample_app\n# pm2 start bin/www\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n```text:command\n# curl http://localhost:3000\n```\n\n\u308f\u3056\u308f\u3056\u30dd\u30fc\u30c8\u3092\u958b\u3051\u3066\u3001\u3042\u308c\u3053\u308c\u3059\u308b\u306e\u304c\u9762\u5012\u3060\u3063\u305f\u305f\u3081\u3001curl\u3067\u5185\u90e8\u304b\u3089\u52d5\u4f5c\u78ba\u8a8d\u3059\u308b\u306e\u307f\u3067\u3002HTML\u306e\u30bf\u30b0\u304c\u8868\u793a\u3055\u308c\u3001\u3055\u3089\u306b\u300cExpress\u300d\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u90e8\u5206\u304c\u3042\u308c\u3070OK\u3002\n\n## nginx\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3059\u308b\n```text:command\n# cd /etc/nginx/conf.d\n# vi default.conf\n```\n\n```text:/etc/nginx/conf.d/default.conf\nupstream node-backend {\n    server localhost:3000;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/log/host.access.log  main;\n    charset utf-8;\n    access_log /var/log/nginx/default.access.log main;\n    error_log /var/log/nginx/default.error.log;\n\n    proxy_redirect                      off;\n    proxy_set_header Host               $host;\n    proxy_set_header X-Real-IP          $remote_addr;\n    proxy_set_header X-Forwarded-Host   $host;\n    proxy_set_header X-Forwarded-Server $host;\n    proxy_set_header X-Forwarded-For    $proxy_add_x_forwarded_for;\n\n    location / {\n        #root   /usr/share/nginx/html;\n        #index  index.html index.htm;\n        proxy_pass http://node-backend;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    #\uff08\u4ee5\u4e0b\u7565\uff09\n}\n```\n\nnginx\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n```text:command\n# /etc/init.d/nginx restart\n```\n\n\u5148\u307b\u3069\u306e\u30da\u30fc\u30b8\u306b\u518d\u5ea6\u30a2\u30af\u30bb\u30b9\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u306e\u5de6\u5074\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u8868\u793a\u304c\u3055\u308c\u308c\u3070\u3001\u5168\u3066\u7d42\u4e86\u3002\u304a\u75b2\u308c\u3055\u307e\u3067\u3057\u305f\u3002\n\n![WS000006.jpg](https://qiita-image-store.s3.amazonaws.com/0/21867/2acae2ed-8d35-2e46-5493-177b4a240965.jpeg)\n", "tags": ["nginx", "Node.js", "\u3055\u304f\u3089\u306eVPS", "pm2"]}