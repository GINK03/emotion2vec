{"tags": ["raspbian", "headless", "server", "RaspberryPi"], "context": " More than 1 year has passed since last update.raspberry pi\u306eOS\u306eheadless(\u30ad\u30fc\u30dc\u30fc\u30c9\u3001\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u7121\u3057)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u4eca\u3055\u3089\u307e\u3068\u3081\u308b\u3002\u306a\u305c\u306a\u3089\u6628\u65e5\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30cf\u30e1\u306b\u306a\u3063\u305f\u304b\u3089\u3060\u3002\n\n\u901a\u5e38\u30b3\u30fc\u30b9(\u6709\u7ddaLAN\u304b\u3064dhcp\u6709\u52b9\u306a\u74b0\u5883)\n\nraspi\u4f7f\u3044\u306e\u5e38\u8b58\nraspbian\u306f\u521d\u671f\u72b6\u614b\u3067\u3001\u6709\u7ddaLAN\u306edhcp\u3068sshd\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n\u306a\u306e\u3067\u30d8\u30c3\u30c9\u30ec\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a\u624b\u9806\u306f\n1. SD\u30ab\u30fc\u30c9\u306braspbian\u3092\u66f8\u304d\u8fbc\u307f1\u3001\u30d6\u30fc\u30c8\u3057\u3066\u3001\n2. \u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30a2\u30c9\u30ec\u30b9\u3092\u63a2\u3057\u3066(arp -a\u3084dhcp\u306e\u30ed\u30b0)\n3. ssh\u3059\u308b\u3002pi@192.168.1.xxx (\u30d1\u30b9\u30ef\u30fc\u30c9\u306f raspberry )\n4. \u521d\u671f\u8a2d\u5b9a\u30c4\u30fc\u30eb\u8d77\u52d5 sudo raspi-config\n\u4ee5\u4e0a\u3002\n\u5b9f\u306b\u7c21\u5358\u3060\u3002\u901a\u5e38\u306f\u3002\n\u79c1\u306f\u4e0a\u8a18\u5e38\u8b58\u3092\u77e5\u3089\u306a\u304b\u3063\u305f(\u5fd8\u308c\u3066\u3044\u305f)\u306e\u3067\u3001\u308f\u3056\u308f\u3056\u4f59\u8a08\u306a\u624b\u9593\u3092\u304b\u3051\u305f\u3002\n\n\u30a4\u30ec\u30ae\u30e5\u30e9\u30fc\u30b3\u30fc\u30b9(wifi, \u3042\u308b\u3044\u306f\u306a\u305c\u304bdhcp\u304c\u306a\u3044\u74b0\u5883)\n\u30bf\u30a4\u30c8\u30eb\u901a\u308a\u3001wifi\u3092\u6709\u52b9\u306b\u3057\u305f\u308a\u3001dhcp\u304c\u306a\u304b\u3063\u305f\u308a\u3001\u5e38\u8b58\u304c\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u306a\u3089\u3053\u3061\u3089\u306e\u30b3\u30fc\u30b9\u3002\nraspbian\u306e\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30a6\u30f3\u30c8\u3057\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u3001ssh\u3067\u304d\u308b\u3068\u3053\u308d\u307e\u3067\u3082\u3063\u3066\u3044\u304f\u3002\n sudo kpartx -av raspbian.img\n\n\u3068\u3059\u308b\u3068/dev\u306b\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u304c\u4f5c\u6210\u3055\u308c\u308b\u306e\u3067\u305d\u308c\u3092\n\n mount /dev/loopX  /mnt/raspbian # loopX\u306fkpartx\u306e\u51fa\u529b\u306b\u3088\u308b  \n\n \u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\n vim /mnt/raspbian/etc/network/interfaces\n\n\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\u5f8c\u306f\u4e0a\u8a18\u901a\u5e38\u30b3\u30fc\u30b9\u306e3\u304b\u3089\u3002\nraspi-config\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u8a2d\u5b9a\u306f\u3001ansible\u3068\u304bchef\u3068\u304b\u3067\u3057\u305f\u65b9\u304c\u3044\u3044\u3002\n\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u65b9\u6cd5\u304c\u8a18\u61b6\u306e\u5f7c\u65b9\u306b\u6d88\u3048\u53bb\u3063\u305f\u9803\u306b\u3001\u307e\u305f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u65e5\u304c\u304f\u308b\n\n\n\n\n\u66f8\u304d\u8fbc\u307f\u306b\u306fwin32diskimager\u304c\u4f7f\u3048\u308b\u3002\u00a0\u21a9\n\n\n\n\nraspberry pi\u306eOS\u306eheadless(\u30ad\u30fc\u30dc\u30fc\u30c9\u3001\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u7121\u3057)\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u4eca\u3055\u3089\u307e\u3068\u3081\u308b\u3002\u306a\u305c\u306a\u3089\u6628\u65e5\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30cf\u30e1\u306b\u306a\u3063\u305f\u304b\u3089\u3060\u3002\n\n## \u901a\u5e38\u30b3\u30fc\u30b9(\u6709\u7ddaLAN\u304b\u3064dhcp\u6709\u52b9\u306a\u74b0\u5883)\n\n<dl>\n<dt>raspi\u4f7f\u3044\u306e\u5e38\u8b58</dt>\n<dd>raspbian\u306f\u521d\u671f\u72b6\u614b\u3067\u3001\u6709\u7ddaLAN\u306edhcp\u3068sshd\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3002<dd>\n</dl>\n\n\u306a\u306e\u3067\u30d8\u30c3\u30c9\u30ec\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a\u624b\u9806\u306f\n1. SD\u30ab\u30fc\u30c9\u306braspbian\u3092\u66f8\u304d\u8fbc\u307f[^1]\u3001\u30d6\u30fc\u30c8\u3057\u3066\u3001\n2. \u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u30a2\u30c9\u30ec\u30b9\u3092\u63a2\u3057\u3066(```arp -a```\u3084dhcp\u306e\u30ed\u30b0)\n3. ssh\u3059\u308b\u3002``` pi@192.168.1.xxx ``` (\u30d1\u30b9\u30ef\u30fc\u30c9\u306f raspberry )\n4. \u521d\u671f\u8a2d\u5b9a\u30c4\u30fc\u30eb\u8d77\u52d5 ``` sudo raspi-config ```\n\n\u4ee5\u4e0a\u3002\n\u5b9f\u306b\u7c21\u5358\u3060\u3002___\u901a\u5e38\u306f\u3002___\n\u79c1\u306f\u4e0a\u8a18\u5e38\u8b58\u3092\u77e5\u3089\u306a\u304b\u3063\u305f(\u5fd8\u308c\u3066\u3044\u305f)\u306e\u3067\u3001\u308f\u3056\u308f\u3056\u4f59\u8a08\u306a\u624b\u9593\u3092\u304b\u3051\u305f\u3002\n\n[^1]: \u66f8\u304d\u8fbc\u307f\u306b\u306f[win32diskimager](https://osdn.jp/projects/sfnet_win32diskimager/)\u304c\u4f7f\u3048\u308b\u3002\n\n## \u30a4\u30ec\u30ae\u30e5\u30e9\u30fc\u30b3\u30fc\u30b9(wifi, \u3042\u308b\u3044\u306f\u306a\u305c\u304bdhcp\u304c\u306a\u3044\u74b0\u5883)\n\n\u30bf\u30a4\u30c8\u30eb\u901a\u308a\u3001wifi\u3092\u6709\u52b9\u306b\u3057\u305f\u308a\u3001dhcp\u304c\u306a\u304b\u3063\u305f\u308a\u3001\u5e38\u8b58\u304c\u306a\u304b\u3063\u305f\u308a\u3059\u308b\u306a\u3089\u3053\u3061\u3089\u306e\u30b3\u30fc\u30b9\u3002\n\nraspbian\u306e\u30a4\u30e1\u30fc\u30b8\u30d5\u30a1\u30a4\u30eb\u3092\u30de\u30a6\u30f3\u30c8\u3057\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u3001ssh\u3067\u304d\u308b\u3068\u3053\u308d\u307e\u3067\u3082\u3063\u3066\u3044\u304f\u3002\n\n```shell-session\n sudo kpartx -av raspbian.img\n ```\n \u3068\u3059\u308b\u3068/dev\u306b\u30d6\u30ed\u30c3\u30af\u30c7\u30d0\u30a4\u30b9\u304c\u4f5c\u6210\u3055\u308c\u308b\u306e\u3067\u305d\u308c\u3092\n ```\n mount /dev/loopX  /mnt/raspbian # loopX\u306fkpartx\u306e\u51fa\u529b\u306b\u3088\u308b  \n ```\n \u3067\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\n \n ```shell-session\n vim /mnt/raspbian/etc/network/interfaces\n ```\n \u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n \n \u5f8c\u306f\u4e0a\u8a18\u901a\u5e38\u30b3\u30fc\u30b9\u306e3\u304b\u3089\u3002\n\nraspi-config\u304c\u7d42\u308f\u3063\u305f\u3089\u3001\u5fc5\u8981\u306a\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u8a2d\u5b9a\u306f\u3001ansible\u3068\u304bchef\u3068\u304b\u3067\u3057\u305f\u65b9\u304c\u3044\u3044\u3002\n**\u307b\u3068\u3093\u3069\u306e\u5834\u5408\u3001\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u65b9\u6cd5\u304c\u8a18\u61b6\u306e\u5f7c\u65b9\u306b\u6d88\u3048\u53bb\u3063\u305f\u9803\u306b\u3001\u307e\u305f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u65e5\u304c\u304f\u308b**\n"}