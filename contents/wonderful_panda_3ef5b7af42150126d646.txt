{"context": " More than 1 year has passed since last update.\n\ndiv\u30bf\u30b0\u306e\u5229\u7528\nTrac\u3067Wiki\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u304d\u306b\u3001\u4f8b\u3048\u3070\u3053\u3093\u306a\u6ce8\u610f\u66f8\u304d\u3092\u5165\u308c\u305f\u3044\u5834\u5408\u3068\u304b\u3042\u308a\u307e\u3059\u3088\u306d\u3002\n\n\u3053\u3046\u3044\u3046\u306e\u3092\u3069\u3046\u66f8\u304f\u304b\u3068\u3044\u3046\u3068\u3001\u3042\u3089\u304b\u3058\u3081\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3092\u7528\u610f\u3057\u3066\u304a\u3044\u3066\u3001\n\nstyle.css\ndiv[class|=\"msg\"] {\n    background-repeat: no-repeat;\n    background-position: 5px 10px;\n    border-top: solid 1px; \n    border-left: solid 10px; \n    padding: 3px 45px;\n}\ndiv.msg-devil {\n    background-image: url(\"face-devilish.png\");\n    border-color: red;\n}\n\n\ndiv\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f7f\u3046\u8a33\u3067\u3059\u3002\n{{{\n#!div class=\"msg-devil\"\n'''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01'''\n}}}\n\n\u30fb\u30fb\u30fb\u3081\u3093\u3069\u304f\u3055\u3044\n\u3053\u3093\u306a\u304b\u3055\u3070\u308b\u306e\u3058\u3083\u306a\u304f\u3066\u3001\u3053\u3093\u306a\u611f\u3058 [[div(devil, '''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01''')]] \u3067\uff11\u884c\u3067\u66f8\u304d\u305f\u3044\u3093\u3067\u3059\u3088\u3002\n\u306a\u306e\u3067\u3001\u7c21\u5358\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\nDivHelperPlugin\n\nweb_ui.py\n# -*- coding:utf8 -*-\nfrom trac.core import *\nfrom trac.config import ConfigSection\nfrom trac.wiki import IWikiMacroProvider\nfrom trac.wiki.formatter import system_message\nfrom trac.wiki.formatter import WikiProcessor\nfrom trac.wiki.parser import parse_processor_args\n\nclass DivHelperPlugin(Component):\n    \"undocumented\"\n    implements (IWikiMacroProvider)\n\n    _section = ConfigSection('divhelper', 'undocumented')\n    _prefixes = {\"div\": \"div-alias.\", \"span\": \"span-alias.\"}\n\n    def get_macros(self):\n        yield \"cdiv\"\n        yield \"cspan\"\n        for name, value in self._section.options():\n            for pname, prefix in self._prefixes.items():\n                if name.startswith(prefix):\n                    yield pname + '_' + name[len(prefix):]\n\n    def get_macro_description(self, name):\n        return 'undocumented : %s' % name\n\n    def expand_macro(self, formatter, name, content, args = None):\n        if name in (\"cdiv\", \"cspan\"):\n            try:\n                clsname, content = content.split(\",\", 1)\n                pname = name[1:]\n                pargs = {\"class\": clsname}\n                content = content.strip()\n            except:\n                return system_message(\"%s: invalid args (%s)\" % (name, content))\n        else:\n            pname, alias = name.split(\"_\", 1)\n            key = self._prefixes[pname] + alias\n            pargs = parse_processor_args(self._section.get(key))\n\n        p = WikiProcessor(formatter, pname, pargs)\n        return p.processor(content)\n\n\nget_macro_description\u3042\u305f\u308a\u3068\u304b\u624b\u629c\u304d\u3063\u3077\u308a\u304c\u30d2\u30c9\u3044\u3067\u3059\u304c\u30fb\u30fb\u30fb\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30bd\u30fc\u30b9\u306f\u3053\u3053\u306b\u3042\u308b\u306e\u3067\u3001 hg clone \u3057\u3066 python setup.py bdist_egg \u3059\u308b\u306a\u308a python setup.py install \u3059\u308b\u306a\u308a\u3002\nhttps://bitbucket.org/iwata0303/tracdivhelper\n\u3042\u3068\u306f\u4e00\u822c\u7684\u306aTrac\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002\nTrac 1.0\u3067\u3057\u304b\u52d5\u304b\u3057\u3066\u307e\u305b\u3093\u30020.12\u7cfb\u306a\u3089\u52d5\u304f\u3068\u601d\u3046\u3051\u3069\u3001\u3069\u3046\u3060\u308d\u3046\u3002\n\n\u4f7f\u3044\u65b9\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001 cdev \u3068\u3044\u3046\u30de\u30af\u30ed\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u4e0a\u306e\u304c\u3053\u3046\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n[[cdev(msg-devil, '''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01''')]]\n\n\u307e\u305f\u3001\u3042\u3089\u304b\u3058\u3081trac.ini\u3067\u3053\u3046\u3044\u3046\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u304a\u3051\u3070\u3001\n\ntrac.ini\n[divhelper]\ndiv-alias.devil = class=\"msg-devil\"\n\n\n\u3082\u3063\u3068\u77ed\u304f\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n[[div_devil('''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01''')]]\n\n\u203bdiv\u30bf\u30b0\u306e\u4ee3\u308f\u308a\u306bspan\u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308bcspan\u3068\u3044\u3046\u30de\u30af\u30ed\u3082\u3042\u308a\u307e\u3059\u3002ini\u30d5\u30a1\u30a4\u30eb\u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u66f8\u304f\u3068\u304d\u306f span-alias.xxx \u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5fdc\u7528\n\u4f8b\u3048\u3070\u3001\u6587\u5b57\u8272\u3092\u8d64\u8272\u306b\u3057\u305f\u3044\u3068\u3044\u3046\u5834\u5408\u3001\u666e\u901a\u306fColorMacro\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u304b\u3001span\u30de\u30af\u30ed\u3092\u4f7f\u3046\u304b\u3057\u3066\u3001\n[[Color(none, red, \u8d64\u8272\u306e\u6587\u5b57\u3060\u3088)]]\n[[span(\u8d64\u8272\u306e\u6587\u5b57\u3060\u3088, style=color:red)]]\n\n\u3068\u304b\u3059\u308b\u3093\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u306e\u3082\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3001\n\ntrac.ini\n[divhelper]\nspan-alias.red = style=\"color:red\"\n\n\n\u3082\u3063\u3068\u30b7\u30f3\u30d7\u30eb\u306b\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n[[span_red(\u8d64\u8272\u306e\u6587\u5b57\u3060\u3088)]]\n\n\u5b9f\u8cea30\u884c\u7a0b\u5ea6\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u307b\u3068\u3093\u3069\u624b\u9593\u304b\u304b\u3063\u3066\u306a\u3044\u5272\u306b\u3001\u3053\u308c\u306f\u306a\u304b\u306a\u304b\u4fbf\u5229\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b :) (\u81ea\u753b\u81ea\u8cdb)\n##div\u30bf\u30b0\u306e\u5229\u7528\nTrac\u3067Wiki\u3092\u66f8\u3044\u3066\u3044\u308b\u3068\u304d\u306b\u3001\u4f8b\u3048\u3070\u3053\u3093\u306a\u6ce8\u610f\u66f8\u304d\u3092\u5165\u308c\u305f\u3044\u5834\u5408\u3068\u304b\u3042\u308a\u307e\u3059\u3088\u306d\u3002\n![div-msg](http://gyazo.com/3e646683eb521887f1f6521f3a324c1f.png)\n\n\u3053\u3046\u3044\u3046\u306e\u3092\u3069\u3046\u66f8\u304f\u304b\u3068\u3044\u3046\u3068\u3001\u3042\u3089\u304b\u3058\u3081\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3092\u7528\u610f\u3057\u3066\u304a\u3044\u3066\u3001\n\n```css:style.css\ndiv[class|=\"msg\"] {\n    background-repeat: no-repeat;\n    background-position: 5px 10px;\n    border-top: solid 1px; \n    border-left: solid 10px; \n    padding: 3px 45px;\n}\ndiv.msg-devil {\n    background-image: url(\"face-devilish.png\");\n    border-color: red;\n}\n```\n\ndiv\u30d7\u30ed\u30bb\u30c3\u30b5\u3092\u4f7f\u3046\u8a33\u3067\u3059\u3002\n\n```trac-wiki\n{{{\n#!div class=\"msg-devil\"\n'''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01'''\n}}}\n```\n\n**\u30fb\u30fb\u30fb\u3081\u3093\u3069\u304f\u3055\u3044**\n\n\u3053\u3093\u306a\u304b\u3055\u3070\u308b\u306e\u3058\u3083\u306a\u304f\u3066\u3001\u3053\u3093\u306a\u611f\u3058 `[[div(devil, '''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01''')]]` \u3067\uff11\u884c\u3067\u66f8\u304d\u305f\u3044\u3093\u3067\u3059\u3088\u3002\n\u306a\u306e\u3067\u3001\u7c21\u5358\u306a\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\n##DivHelperPlugin\n\n```python:web_ui.py\n# -*- coding:utf8 -*-\nfrom trac.core import *\nfrom trac.config import ConfigSection\nfrom trac.wiki import IWikiMacroProvider\nfrom trac.wiki.formatter import system_message\nfrom trac.wiki.formatter import WikiProcessor\nfrom trac.wiki.parser import parse_processor_args\n\nclass DivHelperPlugin(Component):\n    \"undocumented\"\n    implements (IWikiMacroProvider)\n\n    _section = ConfigSection('divhelper', 'undocumented')\n    _prefixes = {\"div\": \"div-alias.\", \"span\": \"span-alias.\"}\n    \n    def get_macros(self):\n        yield \"cdiv\"\n        yield \"cspan\"\n        for name, value in self._section.options():\n            for pname, prefix in self._prefixes.items():\n                if name.startswith(prefix):\n                    yield pname + '_' + name[len(prefix):]\n\n    def get_macro_description(self, name):\n        return 'undocumented : %s' % name\n\n    def expand_macro(self, formatter, name, content, args = None):\n        if name in (\"cdiv\", \"cspan\"):\n            try:\n                clsname, content = content.split(\",\", 1)\n                pname = name[1:]\n                pargs = {\"class\": clsname}\n                content = content.strip()\n            except:\n                return system_message(\"%s: invalid args (%s)\" % (name, content))\n        else:\n            pname, alias = name.split(\"_\", 1)\n            key = self._prefixes[pname] + alias\n            pargs = parse_processor_args(self._section.get(key))\n\n        p = WikiProcessor(formatter, pname, pargs)\n        return p.processor(content)\n```\n\nget_macro_description\u3042\u305f\u308a\u3068\u304b\u624b\u629c\u304d\u3063\u3077\u308a\u304c\u30d2\u30c9\u3044\u3067\u3059\u304c\u30fb\u30fb\u30fb\n\n###\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30bd\u30fc\u30b9\u306f\u3053\u3053\u306b\u3042\u308b\u306e\u3067\u3001 `hg clone` \u3057\u3066 `python setup.py bdist_egg` \u3059\u308b\u306a\u308a `python setup.py install` \u3059\u308b\u306a\u308a\u3002\nhttps://bitbucket.org/iwata0303/tracdivhelper\n\n\u3042\u3068\u306f\u4e00\u822c\u7684\u306aTrac\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306b\u5f93\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\nTrac 1.0\u3067\u3057\u304b\u52d5\u304b\u3057\u3066\u307e\u305b\u3093\u30020.12\u7cfb\u306a\u3089\u52d5\u304f\u3068\u601d\u3046\u3051\u3069\u3001\u3069\u3046\u3060\u308d\u3046\u3002\n\n###\u4f7f\u3044\u65b9\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u3001 `cdev` \u3068\u3044\u3046\u30de\u30af\u30ed\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u4f7f\u3046\u3068\u3001\u4e0a\u306e\u304c\u3053\u3046\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```trac-wiki\n[[cdev(msg-devil, '''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01''')]]\n```\n\n\u307e\u305f\u3001\u3042\u3089\u304b\u3058\u3081trac.ini\u3067\u3053\u3046\u3044\u3046\u3088\u3046\u306a\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u304a\u3051\u3070\u3001\n\n```ini:trac.ini\n[divhelper]\ndiv-alias.devil = class=\"msg-devil\"\n```\n\n\u3082\u3063\u3068\u77ed\u304f\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```trac-wiki\n[[div_devil('''\u8a66\u9a13\u306b\u51fa\u308b\u3088\uff01\uff01\uff01''')]]\n```\n\n\u203bdiv\u30bf\u30b0\u306e\u4ee3\u308f\u308a\u306bspan\u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308bcspan\u3068\u3044\u3046\u30de\u30af\u30ed\u3082\u3042\u308a\u307e\u3059\u3002ini\u30d5\u30a1\u30a4\u30eb\u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u66f8\u304f\u3068\u304d\u306f `span-alias.xxx` \u306b\u306a\u308a\u307e\u3059\u3002\n\n####\u5fdc\u7528\n\u4f8b\u3048\u3070\u3001\u6587\u5b57\u8272\u3092\u8d64\u8272\u306b\u3057\u305f\u3044\u3068\u3044\u3046\u5834\u5408\u3001\u666e\u901a\u306fColorMacro\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u304b\u3001span\u30de\u30af\u30ed\u3092\u4f7f\u3046\u304b\u3057\u3066\u3001\n\n```\n[[Color(none, red, \u8d64\u8272\u306e\u6587\u5b57\u3060\u3088)]]\n[[span(\u8d64\u8272\u306e\u6587\u5b57\u3060\u3088, style=color:red)]]\n```\n\n\u3068\u304b\u3059\u308b\u3093\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u306e\u3082\u3053\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u3001\n\n```ini:trac.ini\n[divhelper]\nspan-alias.red = style=\"color:red\"\n```\n\n\u3082\u3063\u3068\u30b7\u30f3\u30d7\u30eb\u306b\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```trac-wiki\n[[span_red(\u8d64\u8272\u306e\u6587\u5b57\u3060\u3088)]]\n```\n\n\u5b9f\u8cea30\u884c\u7a0b\u5ea6\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067\u307b\u3068\u3093\u3069\u624b\u9593\u304b\u304b\u3063\u3066\u306a\u3044\u5272\u306b\u3001\u3053\u308c\u306f\u306a\u304b\u306a\u304b\u4fbf\u5229\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b :) (\u81ea\u753b\u81ea\u8cdb)\n", "tags": ["Trac", "Python"]}