{"context": "CentOS 7 \u74b0\u5883\u306b PostgreSQL 9.5 + PostGIS 2.2.2 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u3002\nPostGIS \u2014 Spatial and Geographic Objects for PostgreSQL \nhttp://postgis.net/\nCentOS \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u3002\n# cat /etc/redhat-release\nCentOS Linux release 7.1.1503 (Core)\n# uname -a\nLinux postgis 3.10.0-229.el7.x86_64 #1 SMP Fri Mar 6 11:36:42 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5165\u308b PostgreSQL \u306f 9.2.15\u3002\n\u3061\u3087\u3063\u3068\u53e4\u3044\u306e\u3067 PostgreSQL \u516c\u5f0f\u306e yum \u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5165\u308c\u308b\u3002\nPostgreSQL RPM Repository (with Yum) \nhttp://yum.postgresql.org/repopackages.php#pg95\n\u4e0a\u8a18\u304b\u3089 PostgreSQL 9.5 \u306e CentOS 7 \u7528\u306e RPM \u3092\u53d6\u5f97\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n# yum install -y https://download.postgresql.org/pub/repos/yum/9.5/redhat/rhel-7-x86_64/pgdg-centos95-9.5-2.noarch.rpm\n# yum install -y postgresql95 postgresql95-server postgresql95-libs postgresql95-contrib postgresql95-devel\n\nPostGIS \u306f EPEL \u304b\u3089\u5165\u308c\u308b\u306e\u3067 EPEL \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n# rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-7\n# yum install -y http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-6.noarch.rpm\n# yum install -y postgis2_95\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u3002\n# psql --version\npsql (PostgreSQL) 9.5.3\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u521d\u671f\u5316\u3002\n# /usr/pgsql-9.5/bin/postgresql95-setup initdb\nInitializing database ... OK\n\n\u8a8d\u8a3c\u30e2\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\u305f\u3081\u306b pg-hba.conf \u3092\u7de8\u96c6\u3002\n# vi /var/lib/pgsql/9.5/data/pg_hba.conf\n\n\u81ea\u5b85\u306e\u958b\u767a\u74b0\u5883\u306a\u306e\u3067\u53d6\u308a\u6562\u3048\u305a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3002\n\n/var/lib/pgsql/9.5/data/pg_hba.conf\n# IPv4 local connections:\nhost    all             all             0.0.0.0/0            trust\n\n\npostgresql.conf  \u3092\u7de8\u96c6\u3002\n# vi /var/lib/pgsql/9.5/data/postgresql.conf\n\nlisten_addresses \u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3001localhost \u3092\u300c*\u300d\u306b\u5909\u66f4\u3002\n\n/var/lib/pgsql/9.5/data/postgresql.conf\nlisten_addresses = '*'\n\n\n\u30b5\u30fc\u30d0\u8d77\u52d5\u3002\n# systemctl start postgresql-9.5\n\n\u30ed\u30b0\u78ba\u8a8d\u3002\n\n/var/log/messages\n# tail -F /var/log/messages\nJun  3 14:53:48 localhost systemd: Starting PostgreSQL 9.5 database server...\nJun  3 14:53:48 localhost pg_ctl: < 2016-06-03 14:53:48.306 JST >LOG:  \u30ed\u30b0\u51fa\u529b\u3092\u30ed\u30b0\u53ce\u96c6\u30d7\u30ed\u30bb\u30b9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3044\u307e\u3059\nJun  3 14:53:48 localhost pg_ctl: < 2016-06-03 14:53:48.306 JST >\u30d2\u30f3\u30c8:  \u3053\u3053\u304b\u3089\u306e\u30ed\u30b0\u51fa\u529b\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\"pg_log\"\u306b\u73fe\u308c\u307e\u3059\u3002\nJun  3 14:53:49 localhost systemd: Started PostgreSQL 9.5 database server.\n\n\n\n/var/lib/pgsql/9.5/data/pg_log/postgresql-Fri.log\n# tail -F /var/lib/pgsql/9.5/data/pg_log/postgresql-Fri.log\n< 2016-06-03 14:53:48.307 JST >LOG:  \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b7\u30b9\u30c6\u30e0\u306f 2016-06-03 14:43:27 JST \u306b\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u307e\u3057\u305f\n< 2016-06-03 14:53:48.309 JST >LOG:  MultiXact member wraparound protections are now enabled\n< 2016-06-03 14:53:48.311 JST >LOG:  \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b7\u30b9\u30c6\u30e0\u306e\u63a5\u7d9a\u53d7\u4ed8\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n< 2016-06-03 14:53:48.311 JST >LOG:  \u81ea\u52d5\u30d0\u30ad\u30e5\u30fc\u30e0\u30e9\u30f3\u30c1\u30e3\u30d7\u30ed\u30bb\u30b9\n\n\n\u30a8\u30e9\u30fc\u7b49\u51fa\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3042\u308c\u3070\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n# systemctl enable postgresql-9.5\n# systemctl is-enabled postgresql-9.5\nenabled\n\n\u4ed6\u306e\u30de\u30b7\u30f3\u304b\u3089\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3002\n% psql -h 192.168.33.99 -U postgres\npsql (9.3.13, server 9.5.3)\nWARNING: psql major version 9.3, server major version 9.5.\n         Some psql features might not work.\nType \"help\" for help.\n\npostgres=# \\l\n                                  List of databases\n   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   \n-----------+----------+----------+-------------+-------------+-----------------------\n postgres  | postgres | UTF8     | ja_JP.UTF-8 | ja_JP.UTF-8 | \n template0 | postgres | UTF8     | ja_JP.UTF-8 | ja_JP.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n template1 | postgres | UTF8     | ja_JP.UTF-8 | ja_JP.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n(3 rows)\n\npostgres=# \\q\n\n\u63a5\u7d9a\u3067\u304d\u305f\u3002\n\nDB \u3092\u4f5c\u6210\nPostgreSQL \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30de\u30b7\u30f3\u3067 postgres \u30e6\u30fc\u30b6\u306b\u306a\u308a DB \u3092\u4f5c\u6210\u3002\n# sudo su - postgres\n$ createdb example\n\nDB \u306b\u63a5\u7d9a\u3002\n$ psql -d example\n\ncreate extension postgis; \u3092\u5b9f\u884c\u3057\u3066 PostGIS \u3092\u6709\u52b9\u5316\u3002\nexample=# create extension postgis;\nCREATE EXTENSION\n\nPostGIS \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3002\nexample=# SELECT postgis_full_version() ;\n                                                                       postgis_full_version\n\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------\n POSTGIS=\"2.2.2 r14797\" GEOS=\"3.5.0-CAPI-1.9.0 r4084\" PROJ=\"Rel. 4.8.0, 6 March 2012\" GDAL=\"GDAL 1.11.4, released 2016/01/25\" LIBXML=\"2.9.1\" LIBJSON=\"0.11\" RASTER\n(1 \u884c)\n\n\u53d6\u308a\u6562\u3048\u305a\u51fa\u6765\u3066\u308b\u3063\u307d\u3044\u3002\n\u52d5\u4f5c\u78ba\u8a8d\u306b\u3061\u3087\u3046\u3069\u3044\u3044\u6570\u884c\u3067\u8a66\u305b\u308b\u3088\u3046\u306a\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304c\u898b\u5f53\u305f\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u53d6\u308a\u6562\u3048\u305a\u3053\u3053\u307e\u3067\n\n\u53c2\u8003\u30b5\u30a4\u30c8\nCentOS\u306bPostgreSQL/PostGIS\u306e\u74b0\u5883\u69cb\u7bc9 | JURI\u2605GIS \nhttp://www.jurigis.me/2015/01/09/postgis-install-2/\nCentOS\u306bPostgreSQL9.5\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304a\u3088\u3073\u30c6\u30b9\u30c8 - Qiita \nhttp://qiita.com/SOJO/items/a1d97887d24c3e44596f\n\nCentOS 7 \u74b0\u5883\u306b PostgreSQL 9.5 + PostGIS 2.2.2 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u3002\n\nPostGIS \u2014 Spatial and Geographic Objects for PostgreSQL \nhttp://postgis.net/\n\nCentOS \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u3002\n\n```shell-session\n# cat /etc/redhat-release\nCentOS Linux release 7.1.1503 (Core)\n# uname -a\nLinux postgis 3.10.0-229.el7.x86_64 #1 SMP Fri Mar 6 11:36:42 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\n```\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5165\u308b PostgreSQL \u306f 9.2.15\u3002\n\u3061\u3087\u3063\u3068\u53e4\u3044\u306e\u3067 PostgreSQL \u516c\u5f0f\u306e yum \u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u5165\u308c\u308b\u3002\n\nPostgreSQL RPM Repository (with Yum) \nhttp://yum.postgresql.org/repopackages.php#pg95\n\n\u4e0a\u8a18\u304b\u3089 PostgreSQL 9.5 \u306e CentOS 7 \u7528\u306e RPM \u3092\u53d6\u5f97\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```shell-session\n# yum install -y https://download.postgresql.org/pub/repos/yum/9.5/redhat/rhel-7-x86_64/pgdg-centos95-9.5-2.noarch.rpm\n# yum install -y postgresql95 postgresql95-server postgresql95-libs postgresql95-contrib postgresql95-devel\n```\n\nPostGIS \u306f EPEL \u304b\u3089\u5165\u308c\u308b\u306e\u3067 EPEL \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u3066\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```shell-session\n# rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-7\n# yum install -y http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-6.noarch.rpm\n# yum install -y postgis2_95\n```\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\u3002\n\n```shell-session\n# psql --version\npsql (PostgreSQL) 9.5.3\n```\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u521d\u671f\u5316\u3002\n\n```shell-session\n# /usr/pgsql-9.5/bin/postgresql95-setup initdb\nInitializing database ... OK\n```\n\n\u8a8d\u8a3c\u30e2\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\u305f\u3081\u306b pg-hba.conf \u3092\u7de8\u96c6\u3002\n\n```shell-session\n# vi /var/lib/pgsql/9.5/data/pg_hba.conf\n```\n\n\u81ea\u5b85\u306e\u958b\u767a\u74b0\u5883\u306a\u306e\u3067\u53d6\u308a\u6562\u3048\u305a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3002\n\n```:/var/lib/pgsql/9.5/data/pg_hba.conf\n# IPv4 local connections:\nhost    all             all             0.0.0.0/0            trust\n```\n\npostgresql.conf  \u3092\u7de8\u96c6\u3002\n\n```shell-session\n# vi /var/lib/pgsql/9.5/data/postgresql.conf\n```\n\n`listen_addresses` \u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u89e3\u9664\u3057\u3001`localhost` \u3092\u300c`*`\u300d\u306b\u5909\u66f4\u3002\n\n```:/var/lib/pgsql/9.5/data/postgresql.conf\nlisten_addresses = '*'\n```\n\n\u30b5\u30fc\u30d0\u8d77\u52d5\u3002\n\n```shell-session\n# systemctl start postgresql-9.5\n```\n\n\u30ed\u30b0\u78ba\u8a8d\u3002\n\n```shell-session:/var/log/messages\n# tail -F /var/log/messages\nJun  3 14:53:48 localhost systemd: Starting PostgreSQL 9.5 database server...\nJun  3 14:53:48 localhost pg_ctl: < 2016-06-03 14:53:48.306 JST >LOG:  \u30ed\u30b0\u51fa\u529b\u3092\u30ed\u30b0\u53ce\u96c6\u30d7\u30ed\u30bb\u30b9\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u3044\u307e\u3059\nJun  3 14:53:48 localhost pg_ctl: < 2016-06-03 14:53:48.306 JST >\u30d2\u30f3\u30c8:  \u3053\u3053\u304b\u3089\u306e\u30ed\u30b0\u51fa\u529b\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\"pg_log\"\u306b\u73fe\u308c\u307e\u3059\u3002\nJun  3 14:53:49 localhost systemd: Started PostgreSQL 9.5 database server.\n```\n\n```shell-session:/var/lib/pgsql/9.5/data/pg_log/postgresql-Fri.log\n# tail -F /var/lib/pgsql/9.5/data/pg_log/postgresql-Fri.log\n< 2016-06-03 14:53:48.307 JST >LOG:  \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b7\u30b9\u30c6\u30e0\u306f 2016-06-03 14:43:27 JST \u306b\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u307e\u3057\u305f\n< 2016-06-03 14:53:48.309 JST >LOG:  MultiXact member wraparound protections are now enabled\n< 2016-06-03 14:53:48.311 JST >LOG:  \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30b7\u30b9\u30c6\u30e0\u306e\u63a5\u7d9a\u53d7\u4ed8\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n< 2016-06-03 14:53:48.311 JST >LOG:  \u81ea\u52d5\u30d0\u30ad\u30e5\u30fc\u30e0\u30e9\u30f3\u30c1\u30e3\u30d7\u30ed\u30bb\u30b9\n```\n\n\u30a8\u30e9\u30fc\u7b49\u51fa\u3066\u3044\u306a\u3044\u3088\u3046\u3067\u3042\u308c\u3070\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\n```shell-session\n# systemctl enable postgresql-9.5\n# systemctl is-enabled postgresql-9.5\nenabled\n```\n\n\u4ed6\u306e\u30de\u30b7\u30f3\u304b\u3089\u63a5\u7d9a\u3057\u3066\u307f\u308b\u3002\n\n```shell-session\n% psql -h 192.168.33.99 -U postgres\npsql (9.3.13, server 9.5.3)\nWARNING: psql major version 9.3, server major version 9.5.\n         Some psql features might not work.\nType \"help\" for help.\n\npostgres=# \\l\n                                  List of databases\n   Name    |  Owner   | Encoding |   Collate   |    Ctype    |   Access privileges   \n-----------+----------+----------+-------------+-------------+-----------------------\n postgres  | postgres | UTF8     | ja_JP.UTF-8 | ja_JP.UTF-8 | \n template0 | postgres | UTF8     | ja_JP.UTF-8 | ja_JP.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n template1 | postgres | UTF8     | ja_JP.UTF-8 | ja_JP.UTF-8 | =c/postgres          +\n           |          |          |             |             | postgres=CTc/postgres\n(3 rows)\n\npostgres=# \\q\n```\n\n\u63a5\u7d9a\u3067\u304d\u305f\u3002\n\n## DB \u3092\u4f5c\u6210\n\nPostgreSQL \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30de\u30b7\u30f3\u3067 `postgres` \u30e6\u30fc\u30b6\u306b\u306a\u308a DB \u3092\u4f5c\u6210\u3002\n\n```\n# sudo su - postgres\n$ createdb example\n```\n\nDB \u306b\u63a5\u7d9a\u3002\n\n```\n$ psql -d example\n```\n\n`create extension postgis;` \u3092\u5b9f\u884c\u3057\u3066 PostGIS \u3092\u6709\u52b9\u5316\u3002\n\n```\nexample=# create extension postgis;\nCREATE EXTENSION\n```\n\nPostGIS \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3002\n\n```\nexample=# SELECT postgis_full_version() ;\n                                                                       postgis_full_version\n\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------\n POSTGIS=\"2.2.2 r14797\" GEOS=\"3.5.0-CAPI-1.9.0 r4084\" PROJ=\"Rel. 4.8.0, 6 March 2012\" GDAL=\"GDAL 1.11.4, released 2016/01/25\" LIBXML=\"2.9.1\" LIBJSON=\"0.11\" RASTER\n(1 \u884c)\n```\n\n\u53d6\u308a\u6562\u3048\u305a\u51fa\u6765\u3066\u308b\u3063\u307d\u3044\u3002\n\n\u52d5\u4f5c\u78ba\u8a8d\u306b\u3061\u3087\u3046\u3069\u3044\u3044\u6570\u884c\u3067\u8a66\u305b\u308b\u3088\u3046\u306a\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf\u304c\u898b\u5f53\u305f\u3089\u306a\u304b\u3063\u305f\u306e\u3067\u53d6\u308a\u6562\u3048\u305a\u3053\u3053\u307e\u3067\n\n## \u53c2\u8003\u30b5\u30a4\u30c8\n\nCentOS\u306bPostgreSQL/PostGIS\u306e\u74b0\u5883\u69cb\u7bc9 | JURI\u2605GIS \nhttp://www.jurigis.me/2015/01/09/postgis-install-2/\n\nCentOS\u306bPostgreSQL9.5\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304a\u3088\u3073\u30c6\u30b9\u30c8 - Qiita \nhttp://qiita.com/SOJO/items/a1d97887d24c3e44596f\n", "tags": ["PostgreSQL", "PostGIS"]}