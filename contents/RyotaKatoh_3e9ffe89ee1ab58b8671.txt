{"context": " More than 1 year has passed since last update.\u6628\u5e7412\u6708\u306bcaffe\u3092\u8a66\u305d\u3046\u3068\u3057\u305f\u3051\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u8ae6\u3081\u3066\u304b\u308c\u3053\u308c\u534a\u5e74\u3001\u3082\u30461\u5ea6caffe\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u3066\u304d\u307e\u3057\u305f\u3002\n\u3044\u308d\u3093\u306a\u4eba\u304c\u8a00\u3063\u3066\u308b\u3051\u3069\u3001caffe\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u5e38\u306b\u9032\u5316\u3057\u3066\u308b\u306e\u3067\u3053\u306e\u8a18\u4e8b\u306f\u3059\u3050\u5f79\u306b\u7acb\u305f\u306a\u304f\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u30a8\u30e9\u30fc\u51fa\u305f\u3089\u90fd\u5ea6\u8abf\u3079\u3066\u307f\u308b\u3068\u3044\u3046\u4f5c\u696d\u304c\u5fc5\u8981\u3067\u3059\u304b\u306d\u3002\u3002\n\u5168\u7136\u30c0\u30e1\u3067\u3082\u5bdd\u3066\u8d77\u304d\u305f\u3089\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3063\u3066\u306e\u304c\u4e16\u306e\u5e38\u3067\u3059\u3002\n\nlibstdc++\u554f\u984c\u89e3\u6c7a\u3057\u305f\u3063\u307d\u3044\u3067\u3059\nCUDA 7.0 \u304cMac OS X 10.9\u306810.10\u3067\u6a19\u6e96\u306ec++\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u306a\u3063\u3066\u308blibc++\u306b\u5bfe\u5fdc\u3057\u3066\u306a\u3044\u304b\u3089caffe\u3067\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u5168\u3066libstdc++\u306b\u3057\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u554f\u984c\u304c\u3042\u3063\u305f\u3088\u3046\u3067\u3059\u304c\u3001\u89e3\u6c7a\u3057\u3066\u308b\u3088\u3046\u3067\u3059\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001\u4f9d\u5b58\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306ec++\u30e9\u30a4\u30d6\u30e9\u30ea\u3092libstdc++\u306b\u3059\u308b\u3068\u3044\u3046\u306e\u3092\u3084\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nFormula\u3092\u3044\u3061\u3044\u3061\u4fee\u6b63\u3059\u308b\u3068\u304b\u3044\u3046\u3060\u308b\u3044\u3053\u3068\u3057\u306a\u304f\u3066\u826f\u304f\u306a\u3063\u305f\u306d\uff01\uff01\uff01\n\u53c2\u8003\uff1ahttps://github.com/BVLC/caffe/issues/2018\n\u50d5\u304c\u6210\u529f\u3057\u305f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u306f\u3001\u4e0a\u304b\u3089\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n(CUDA7\u306f\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u306d\u3002)\npython\u306fanaconda2.1.0\u3092\u4f7f\u7528\npyenv local anaconda-2.1.0\n\nBLAS\u306fopenBLAS\u3092\u4f7f\u7528\nbrew tap homebrew/science\nbrew install homebrew/science/openblas\n\nhdf5\u306f1.8.13\u3092\u4f7f\u7528\uff08\u6700\u65b0\u7248\u3060\u3068runtest\u3067\u5931\u6557\u3059\u308b\uff09\nbrew edit hdf5\n\nclass Hdf5 < Formula\n  homepage \"http://www.hdfgroup.org/HDF5\"\n --> url \"http://www.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8.13/src/hdf5-1.8.13.tar.bz2\"\n --> sha1 \"712955025f03db808f000d8f4976b8df0c0d37b5\"\n\nboost\u306f1.55\u3092\u4f7f\u7528\u3059\u308b\ncd /usr/local\ngit checkout a252214 /usr/local/Library/Formula/boost.rb\n\nbrew edit boost-python\n\nclass BoostPython < Formula\nhomepage \"http://www.boost.org\"\n--> url 'https://downloads.sourceforge.net/project/boost/boost/1.55.0/boost_1_55_0.tar.bz2'\n--> sha1 'cef9a0cc7084b1d639e06cd3bc34e4251524c840'\n\ncaffe\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ngit clone git@github.com:BVLC/caffe.git\ncd caffe\ncp Makefile.config.example Makefile.config\n\nMakefile.config\u306e\u4fee\u6b63\n\nMakefile.config\nCUSROM_CXX := clang++\n\nCUDA_DIR := /Developer/NVIDIA/CUDA-7.0\n\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n          -gencode arch=compute_20,code=sm_21 \\\n          -gencode arch=compute_30,code=sm_30 \\\n          -gencode arch=compute_35,code=sm_35 \\\n          #-gencode arch=compute_50,code=sm_50 \\\n          #-gencode arch=compute_50,code=compute_50\n\nBLAS := open\n\nBLAS_INCLUDE := /usr/local/Cellar/openblas/0.2.14/include\nBLAS_LIB := /usr/local/Cellar/openblas/0.2.14/lib\n\nANACONDA_HOME := /Users/RyotaKatoh/.pyenv/versions/anaconda-2.1.0\nPYTHON_INCLUDE := $(ANACONDA_HOME)/include \\\n          $(ANACONDA_HOME)/include/python2.7 \\\n          $(ANACONDA_HOME)/lib/python2.7/site-packages/numpy/core/include \\\n\nPYTHON_LIB := $(ANACONDA_HOME)/lib\n\n\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nfor x in snappy leveldb gflags glog szip lmdb homebrew/science/opencv; do brew uninstall $x; brew install --build-from-source --fresh -vd $x; done\nbrew uninstall protobuf; brew install --build-from-source --with-python --fresh -vd protobuf\nbrew install --build-from-source --fresh -vd boost boost-python\n\ncaffe\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (8\u3063\u3066\u6570\u5b57\u306f\u4e26\u5217\u6570)\nmake all -j8\n\n\u30c6\u30b9\u30c8\u306e\u5b9f\u884c\nmake test\nmake runtest\n\n\u3053\u308c\u30672015/06/07\u6642\u70b9\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u306f\u305a\u2026\u3002\n\n\u6226\u3044\u306f\u7d42\u308f\u308a\u3058\u3083\u306a\u304b\u3063\u305f\npython\u3067caffe\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3068\u304d\u306b\u3064\u307e\u3065\u3044\u305f\u3002\u3002\n>>> import caffe\nFatal Python error: PyThreadState_Get: no current thread\n\nFatal Python error\u3068\u304b\u51fa\u3061\u3083\u3046\u3002\n\u3061\u3087\u3063\u3068\u8abf\u3079\u308b\u3068boost-python\u3092\u5165\u308c\u306a\u304a\u3059\u3068\u3044\u3044\u307f\u305f\u3044\u3002\nbrew uninstall boost-python\nbrew install --build-from-source --fresh -vd boost-python\n\n\u3059\u308b\u3068\n>>> import caffe\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/RyotaKatoh/python/caffeWorkspace/caffe/python/caffe/__init__.py\", line 1, in <module>\n    from .pycaffe import Net, SGDSolver\n  File \"/Users/RyotaKatoh/python/caffeWorkspace/caffe/python/caffe/pycaffe.py\", line 13, in <module>\n    from ._caffe import Net, SGDSolver\nImportError: dlopen(/Users/RyotaKatoh/python/caffeWorkspace/caffe2/caffe/python/caffe/_caffe.so, 2): Library not loaded: libpython2.7.dylib\n  Referenced from: /usr/local/lib/libboost_python.dylib\n  Reason: image not found\n\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u306b\u5909\u308f\u3063\u305f\u306e\u3067\u9069\u5f53\u306b\nexport DYLD_FALLBACK_LIBRARY_PATH=/Users/RyotaKatoh/.pyenv/versions/anaconda-2.1.0/lib:$DYLD_FALLBACK_LIBRARY_PATH\n\n\u3063\u3066\u3084\u3063\u305f\u3089\u7121\u4e8b\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3057\u305f\u3002\n\u306a\u304b\u306a\u304b\u8f9b\u304b\u3063\u305f\u3002\n\n\u6628\u5e7412\u6708\u306bcaffe\u3092\u8a66\u305d\u3046\u3068\u3057\u305f\u3051\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3057\u8ae6\u3081\u3066\u304b\u308c\u3053\u308c\u534a\u5e74\u3001\u3082\u30461\u5ea6caffe\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\u3057\u3066\u304d\u307e\u3057\u305f\u3002\n\u3044\u308d\u3093\u306a\u4eba\u304c\u8a00\u3063\u3066\u308b\u3051\u3069\u3001caffe\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u65b9\u6cd5\u306f\u5e38\u306b\u9032\u5316\u3057\u3066\u308b\u306e\u3067\u3053\u306e\u8a18\u4e8b\u306f\u3059\u3050\u5f79\u306b\u7acb\u305f\u306a\u304f\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u30a8\u30e9\u30fc\u51fa\u305f\u3089\u90fd\u5ea6\u8abf\u3079\u3066\u307f\u308b\u3068\u3044\u3046\u4f5c\u696d\u304c\u5fc5\u8981\u3067\u3059\u304b\u306d\u3002\u3002\n\u5168\u7136\u30c0\u30e1\u3067\u3082\u5bdd\u3066\u8d77\u304d\u305f\u3089\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3063\u3066\u306e\u304c\u4e16\u306e\u5e38\u3067\u3059\u3002\n\n\n## libstdc++\u554f\u984c\u89e3\u6c7a\u3057\u305f\u3063\u307d\u3044\u3067\u3059\n\nCUDA 7.0 \u304cMac OS X 10.9\u306810.10\u3067\u6a19\u6e96\u306ec++\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u306a\u3063\u3066\u308blibc++\u306b\u5bfe\u5fdc\u3057\u3066\u306a\u3044\u304b\u3089caffe\u3067\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u5168\u3066libstdc++\u306b\u3057\u306a\u304d\u3083\u3044\u3051\u306a\u3044\u554f\u984c\u304c\u3042\u3063\u305f\u3088\u3046\u3067\u3059\u304c\u3001\u89e3\u6c7a\u3057\u3066\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u4f9d\u5b58\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306ec++\u30e9\u30a4\u30d6\u30e9\u30ea\u3092libstdc++\u306b\u3059\u308b\u3068\u3044\u3046\u306e\u3092\u3084\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nFormula\u3092\u3044\u3061\u3044\u3061\u4fee\u6b63\u3059\u308b\u3068\u304b\u3044\u3046\u3060\u308b\u3044\u3053\u3068\u3057\u306a\u304f\u3066\u826f\u304f\u306a\u3063\u305f\u306d\uff01\uff01\uff01\n\u53c2\u8003\uff1ahttps://github.com/BVLC/caffe/issues/2018\n\n\u50d5\u304c\u6210\u529f\u3057\u305f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u306f\u3001\u4e0a\u304b\u3089\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n(CUDA7\u306f\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u306d\u3002)\n\npython\u306fanaconda2.1.0\u3092\u4f7f\u7528\n\n```\npyenv local anaconda-2.1.0\n```\n\nBLAS\u306fopenBLAS\u3092\u4f7f\u7528\n\n```\nbrew tap homebrew/science\nbrew install homebrew/science/openblas\n```\n\nhdf5\u306f1.8.13\u3092\u4f7f\u7528\uff08\u6700\u65b0\u7248\u3060\u3068runtest\u3067\u5931\u6557\u3059\u308b\uff09\n\n```\nbrew edit hdf5\n```\n\n\n```\nclass Hdf5 < Formula\n  homepage \"http://www.hdfgroup.org/HDF5\"\n --> url \"http://www.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8.13/src/hdf5-1.8.13.tar.bz2\"\n --> sha1 \"712955025f03db808f000d8f4976b8df0c0d37b5\"\n```\n\nboost\u306f1.55\u3092\u4f7f\u7528\u3059\u308b\n\n```\ncd /usr/local\ngit checkout a252214 /usr/local/Library/Formula/boost.rb\n```\n\n```\nbrew edit boost-python\n```\n\n```\nclass BoostPython < Formula\nhomepage \"http://www.boost.org\"\n--> url 'https://downloads.sourceforge.net/project/boost/boost/1.55.0/boost_1_55_0.tar.bz2'\n--> sha1 'cef9a0cc7084b1d639e06cd3bc34e4251524c840'\n```\n\ncaffe\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\ngit clone git@github.com:BVLC/caffe.git\ncd caffe\ncp Makefile.config.example Makefile.config\n```\n\nMakefile.config\u306e\u4fee\u6b63\n\n```Makefile.config\nCUSROM_CXX := clang++\n\nCUDA_DIR := /Developer/NVIDIA/CUDA-7.0\n\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n          -gencode arch=compute_20,code=sm_21 \\\n          -gencode arch=compute_30,code=sm_30 \\\n          -gencode arch=compute_35,code=sm_35 \\\n          #-gencode arch=compute_50,code=sm_50 \\\n          #-gencode arch=compute_50,code=compute_50\n\nBLAS := open\n\nBLAS_INCLUDE := /usr/local/Cellar/openblas/0.2.14/include\nBLAS_LIB := /usr/local/Cellar/openblas/0.2.14/lib\n\nANACONDA_HOME := /Users/RyotaKatoh/.pyenv/versions/anaconda-2.1.0\nPYTHON_INCLUDE := $(ANACONDA_HOME)/include \\\n          $(ANACONDA_HOME)/include/python2.7 \\\n          $(ANACONDA_HOME)/lib/python2.7/site-packages/numpy/core/include \\\n          \nPYTHON_LIB := $(ANACONDA_HOME)/lib\n```\n\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nfor x in snappy leveldb gflags glog szip lmdb homebrew/science/opencv; do brew uninstall $x; brew install --build-from-source --fresh -vd $x; done\nbrew uninstall protobuf; brew install --build-from-source --with-python --fresh -vd protobuf\nbrew install --build-from-source --fresh -vd boost boost-python\n```\n\ncaffe\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb (8\u3063\u3066\u6570\u5b57\u306f\u4e26\u5217\u6570)\n\n```\nmake all -j8\n```\n\n\u30c6\u30b9\u30c8\u306e\u5b9f\u884c\n\n```\nmake test\nmake runtest\n```\n\n\n\u3053\u308c\u30672015/06/07\u6642\u70b9\u3067\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u306f\u305a\u2026\u3002\n\n## \u6226\u3044\u306f\u7d42\u308f\u308a\u3058\u3083\u306a\u304b\u3063\u305f\n\npython\u3067caffe\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3068\u304d\u306b\u3064\u307e\u3065\u3044\u305f\u3002\u3002\n\n```\n>>> import caffe\nFatal Python error: PyThreadState_Get: no current thread\n```\n\nFatal Python error\u3068\u304b\u51fa\u3061\u3083\u3046\u3002\n\u3061\u3087\u3063\u3068\u8abf\u3079\u308b\u3068boost-python\u3092\u5165\u308c\u306a\u304a\u3059\u3068\u3044\u3044\u307f\u305f\u3044\u3002\n\n```\nbrew uninstall boost-python\nbrew install --build-from-source --fresh -vd boost-python\n```\n\n\u3059\u308b\u3068\n\n```\n>>> import caffe\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/RyotaKatoh/python/caffeWorkspace/caffe/python/caffe/__init__.py\", line 1, in <module>\n    from .pycaffe import Net, SGDSolver\n  File \"/Users/RyotaKatoh/python/caffeWorkspace/caffe/python/caffe/pycaffe.py\", line 13, in <module>\n    from ._caffe import Net, SGDSolver\nImportError: dlopen(/Users/RyotaKatoh/python/caffeWorkspace/caffe2/caffe/python/caffe/_caffe.so, 2): Library not loaded: libpython2.7.dylib\n  Referenced from: /usr/local/lib/libboost_python.dylib\n  Reason: image not found\n```\n\n\u3053\u3093\u306a\u30a8\u30e9\u30fc\u306b\u5909\u308f\u3063\u305f\u306e\u3067\u9069\u5f53\u306b\n\n```\nexport DYLD_FALLBACK_LIBRARY_PATH=/Users/RyotaKatoh/.pyenv/versions/anaconda-2.1.0/lib:$DYLD_FALLBACK_LIBRARY_PATH\n```\n\n\u3063\u3066\u3084\u3063\u305f\u3089\u7121\u4e8b\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u307e\u3057\u305f\u3002\n\n\u306a\u304b\u306a\u304b\u8f9b\u304b\u3063\u305f\u3002\n", "tags": ["Caffe", "DeepLearning"]}