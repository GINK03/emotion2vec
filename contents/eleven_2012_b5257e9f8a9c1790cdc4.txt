{"context": "click\u3060\u3068300ms\u9045\u5ef6\u304c\u767a\u751f\u3059\u308b\u306e\u3067\u3001\u8a66\u884c\u932f\u8aa4\u3057\u305f\u306e\u3067\u30e1\u30e2\u3057\u3068\u304d\u307e\u3059\u3002\nclick\n\u2193\ntouchstart\nhttp://gupuru.hatenablog.jp/entry/2013/12/02/190413\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066\u66f8\u3044\u305f\u306e\u3067\u3059\u304c\u3001click\u3092touch\u306b\u5909\u3048\u305f\u3060\u3051\u3060\u3068\u3001\u306a\u3093\u304b\u30af\u30ea\u30c3\u30af\u4f4d\u7f6e\u304c\u5168\u7136\u305a\u308c\u3066\u3057\u307e\u3063\u3066\u307e\u3057\u305f\u3002\nev.clientX \n\u2193\nev.touches[0].clientX \n\u3053\u308c\u3067\u3044\u3051\u307e\u3057\u305f\n\nlet mouse = { x: 0, y: 0 }   \ninterface HTMLElementEvent<T extends HTMLElement> extends Event {\n  target: T,clientX: any,clientY: any,touches: any \n}\n\nlet touchObj  = null;\nwindow.addEventListener( \"touchstart\", (ev: HTMLElementEvent<HTMLInputElement>) => {\n  if (ev.target == renderer.domElement) { \n    let rect = ev.target.getBoundingClientRect()    \n    console.log(ev)\n    mouse.x =  ev.touches[0].clientX - rect.left\n    mouse.y =  ev.touches[0].clientY - rect.top\n    mouse.x =  (mouse.x / window.innerWidth) * 2 - 1    \n    mouse.y = -(mouse.y / window.innerHeight) * 2 + 1 \n    let vector = new THREE.Vector3( mouse.x, mouse.y ,1) \n    vector.unproject(camera)\n    let ray = new THREE.Raycaster( camera.position, vector.sub(camera.position).normalize() )\n    let click_obj = ray.intersectObjects(targetList,true)\n    if ( click_obj.length > 0 && this.toggle_cut == true ){    \n      for(let key in this.dataList){\n        if(click_obj[0].object.name === this.dataList[key].name){\n          touchObj = this.dataList[key]\n        }\n      }\n    } \n  }\n})\n\n\n\u7121\u8b00\u306b\u3082threejs \u3068\u3000ionic2\u3067\u4f5c\u3063\u3066\u307e\u3059\u304c\u306a\u3093\u3068\u304b\u52d5\u3044\u3066\u3044\u307e\u3059\u3002\nclick\u3060\u3068300ms\u9045\u5ef6\u304c\u767a\u751f\u3059\u308b\u306e\u3067\u3001\u8a66\u884c\u932f\u8aa4\u3057\u305f\u306e\u3067\u30e1\u30e2\u3057\u3068\u304d\u307e\u3059\u3002\n\nclick\n\u2193\ntouchstart\n\n\nhttp://gupuru.hatenablog.jp/entry/2013/12/02/190413\n\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066\u66f8\u3044\u305f\u306e\u3067\u3059\u304c\u3001click\u3092touch\u306b\u5909\u3048\u305f\u3060\u3051\u3060\u3068\u3001\u306a\u3093\u304b\u30af\u30ea\u30c3\u30af\u4f4d\u7f6e\u304c\u5168\u7136\u305a\u308c\u3066\u3057\u307e\u3063\u3066\u307e\u3057\u305f\u3002\n\nev.clientX \n\u2193\nev.touches[0].clientX \n\n\u3053\u308c\u3067\u3044\u3051\u307e\u3057\u305f\n#### \n```\n\nlet mouse = { x: 0, y: 0 }   \ninterface HTMLElementEvent<T extends HTMLElement> extends Event {\n  target: T,clientX: any,clientY: any,touches: any \n}\n\nlet touchObj  = null;\nwindow.addEventListener( \"touchstart\", (ev: HTMLElementEvent<HTMLInputElement>) => {\n  if (ev.target == renderer.domElement) { \n    let rect = ev.target.getBoundingClientRect()    \n    console.log(ev)\n    mouse.x =  ev.touches[0].clientX - rect.left\n    mouse.y =  ev.touches[0].clientY - rect.top\n    mouse.x =  (mouse.x / window.innerWidth) * 2 - 1    \n    mouse.y = -(mouse.y / window.innerHeight) * 2 + 1 \n    let vector = new THREE.Vector3( mouse.x, mouse.y ,1) \n    vector.unproject(camera)\n    let ray = new THREE.Raycaster( camera.position, vector.sub(camera.position).normalize() )\n    let click_obj = ray.intersectObjects(targetList,true)\n    if ( click_obj.length > 0 && this.toggle_cut == true ){    \n      for(let key in this.dataList){\n        if(click_obj[0].object.name === this.dataList[key].name){\n          touchObj = this.dataList[key]\n        }\n      }\n    } \n  }\n})\n\n```\n\n\u7121\u8b00\u306b\u3082threejs \u3068\u3000ionic2\u3067\u4f5c\u3063\u3066\u307e\u3059\u304c\u306a\u3093\u3068\u304b\u52d5\u3044\u3066\u3044\u307e\u3059\u3002\n", "tags": ["ionic2", "TypeScript", "three.js"]}