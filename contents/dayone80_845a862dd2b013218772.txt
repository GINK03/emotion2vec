{"context": " More than 1 year has passed since last update.\u30e2\u30c7\u30eb\u306frails g devise users \u3067\u4f5c\u6210\u3057\u305f\u3082\u306e\u3092\u524d\u63d0\u3068\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\napp/controllers/users/sessions_controller.rb\n\u3068\u3067\u3082\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u6b21\u306broutes.rb\u3092\u7de8\u96c6\u3057\u3066\u3001\u4eca\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092devise\u304b\u3089\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nroutes.rb\n  devise_for :users, :controllers => {\n    :sessions => 'users/sessions'\n  }\n\n\n\u6b21\u306bdevise\u304c\u672c\u6765\u4f7f\u7528\u3057\u3066\u3044\u308b\u30ed\u30b0\u30a4\u30f3\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u7d99\u627f\u3057\u3066\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nhttps://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb\n\u4e0a\u306eclass\u3092\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fsessions_controller.rb\u306b\u307e\u308b\u307e\u308b\u30b3\u30d4\u30da\u3057\u3066\u3001class\u5b9a\u7fa9\u306e\u90e8\u5206\u3060\u3051\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nsessions_controller.rb\nclass Users::SessionsController < Devise::SessionsController\n\n\n\u3053\u308c\u3067\u7d99\u627f\u3067\u304d\u307e\u3057\u305f\u3002\n\u30ed\u30b0\u30a4\u30f3\u6642\u306e\u8a8d\u8a3c\u3092\u62c5\u5f53\u3057\u3066\u3044\u308b\u306e\u306fcreate\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u306e\u3067\u3001\u6b21\u306f\u305d\u3061\u3089\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\nsessions_controller.rb\n  # POST /resource/sign_in\n  def create\n    #\u5143\u306e\u8a8d\u8a3c\u30ed\u30b8\u30c3\u30af\n    #self.resource = warden.authenticate!(auth_options)\n\n    #email\u3060\u3051\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u5909\u66f4\n    self.resource = User.where(:username => params[:user]['email']).first\n\n    set_flash_message(:notice, :signed_in) if is_flashing_format?\n    sign_in(resource_name, resource)\n    yield resource if block_given?\n    respond_with resource, :location => after_sign_in_path_for(resource)\n  end\n\n\n\u5143\u306e\u8a8d\u8a3c\u30ed\u30b8\u30c3\u30af\u3067\u8fd4\u3055\u308c\u308bself.resource\u306e\u4e2d\u8eab\u3092\u30ed\u30b0\u306b\u51fa\u3057\u3066\u307f\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306fUser\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u5f93\u3063\u3066\u3001User\u30e2\u30c7\u30eb\u3092\u305d\u306e\u307e\u307e\u6271\u3048\u3070\u81ea\u524d\u306e\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3092\u5fdc\u7528\u3057\u3066\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u306a\u3044\u30b2\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc\u3092\u8a8d\u8a3c\u3055\u305b\u305f\u3044\u3088\u3046\u306a\u5834\u5408\u306b\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30e2\u30c7\u30eb\u306frails g devise users \u3067\u4f5c\u6210\u3057\u305f\u3082\u306e\u3092\u524d\u63d0\u3068\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\napp/controllers/users/sessions_controller.rb\n\u3068\u3067\u3082\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u6b21\u306broutes.rb\u3092\u7de8\u96c6\u3057\u3066\u3001\u4eca\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092devise\u304b\u3089\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```ruby:routes.rb\n  devise_for :users, :controllers => {\n    :sessions => 'users/sessions'\n  }\n```\n\n\u6b21\u306bdevise\u304c\u672c\u6765\u4f7f\u7528\u3057\u3066\u3044\u308b\u30ed\u30b0\u30a4\u30f3\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u7d99\u627f\u3057\u3066\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u3044\u304d\u307e\u3059\u3002\nhttps://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb\n\u4e0a\u306eclass\u3092\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fsessions_controller.rb\u306b\u307e\u308b\u307e\u308b\u30b3\u30d4\u30da\u3057\u3066\u3001class\u5b9a\u7fa9\u306e\u90e8\u5206\u3060\u3051\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```ruby:sessions_controller.rb\nclass Users::SessionsController < Devise::SessionsController\n```\n\n\u3053\u308c\u3067\u7d99\u627f\u3067\u304d\u307e\u3057\u305f\u3002\n\u30ed\u30b0\u30a4\u30f3\u6642\u306e\u8a8d\u8a3c\u3092\u62c5\u5f53\u3057\u3066\u3044\u308b\u306e\u306fcreate\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u306e\u3067\u3001\u6b21\u306f\u305d\u3061\u3089\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\n\n```ruby:sessions_controller.rb\n  # POST /resource/sign_in\n  def create\n    #\u5143\u306e\u8a8d\u8a3c\u30ed\u30b8\u30c3\u30af\n    #self.resource = warden.authenticate!(auth_options)\n    \n    #email\u3060\u3051\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u5909\u66f4\n    self.resource = User.where(:username => params[:user]['email']).first\n\n    set_flash_message(:notice, :signed_in) if is_flashing_format?\n    sign_in(resource_name, resource)\n    yield resource if block_given?\n    respond_with resource, :location => after_sign_in_path_for(resource)\n  end\n```\n\n\u5143\u306e\u8a8d\u8a3c\u30ed\u30b8\u30c3\u30af\u3067\u8fd4\u3055\u308c\u308bself.resource\u306e\u4e2d\u8eab\u3092\u30ed\u30b0\u306b\u51fa\u3057\u3066\u307f\u308b\u3068\u308f\u304b\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306fUser\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u5f93\u3063\u3066\u3001User\u30e2\u30c7\u30eb\u3092\u305d\u306e\u307e\u307e\u6271\u3048\u3070\u81ea\u524d\u306e\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3092\u5fdc\u7528\u3057\u3066\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u306a\u3044\u30b2\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc\u3092\u8a8d\u8a3c\u3055\u305b\u305f\u3044\u3088\u3046\u306a\u5834\u5408\u306b\u4f7f\u3048\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n", "tags": ["Rails", "devise"]}