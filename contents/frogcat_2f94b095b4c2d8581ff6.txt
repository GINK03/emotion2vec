{"context": "\n\n\u306f\u3058\u3081\u306b\nCanvas \u3067\u3042\u308b\u7a0b\u5ea6\u6c4e\u7528\u7684\u306b\u3044\u308d\u3044\u308d\u306a\u77e2\u5370\u3092\u63cf\u304f\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30c7\u30e2&\u30e9\u30a4\u30d6\u30e9\u30ea\n\u6700\u7d42\u7684\u306b\u3053\u3093\u306a\u304b\u3093\u3058\u3067\u3044\u308d\u3044\u308d\u306a\u5f62\u72b6\u306e\u77e2\u5370\u3092\u63cf\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\n\u30c7\u30e2 https://frogcat.github.io/canvas-arrow/\n\nGitHub https://github.com/frogcat/canvas-arrow\n\n\n\n\u4f7f\u3044\u65b9\n\nexample.html\n<script src=\"https://frogcat.github.io/canvas-arrow/canvas-arrow.js\"></script>\n\n...\n<script>\nvar context = canvas.getContext(\"2d\");\ncontext.beginPath();\ncontext.arrow(0, 0, 200, 100, [0, 5, -20, 5, -20, 15]);\ncontext.fill();\n</script>\n\n\n\nhttps://frogcat.github.io/canvas-arrow/canvas-arrow.js \u306f CanvasRenderingContext2D \u306e prototype \u306b arrow \u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\narrow \u30e1\u30bd\u30c3\u30c9\u306e API\u306f\u3053\u3093\u306a\u304b\u3093\u3058\u3067\u3059\u3002\ncontext.arrow(startX,startY,endX,endY,controlPoints);\n\n\n\nstartX : \u59cb\u70b9\u306e X \u5ea7\u6a19\n\nstartY : \u59cb\u70b9\u306e Y \u5ea7\u6a19\n\nendX : \u7d42\u70b9\u306e X \u5ea7\u6a19\n\nendY : \u7d42\u70b9\u306e Y \u5ea7\u6a19\n\ncontrolPoints : \u77e2\u5370\u5f62\u72b6\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u5236\u5fa1\u70b9\u306e\u914d\u5217\n\ncontrolPoints \u306b\u306f [x1,y1,x2,y2,x3,y3...] \u3068\u3044\u3063\u305f\u3088\u3046\u306b\u5236\u5fa1\u70b9\u306e X,Y \u5ea7\u6a19\u5024\u304c\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u5ea7\u6a19\u5024\u306e\u610f\u5473\u306f\u4e0b\u56f3\u306e\u3068\u304a\u308a\u3002\n\n\nx \u5ea7\u6a19\u304c\u6b63\u306e\u5834\u5408\u306b\u306f start \u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u3001\u8ca0\u306e\u5834\u5408\u306b\u306f end \u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u3068\u898b\u306a\u3059\n\u7d42\u70b9\u306e\u771f\u4e0a\u30fb\u771f\u4e0b\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306b\u306f -Number.MIN_VALUE \u306a\u3069\u306e\u3068\u3066\u3082\u5c0f\u3055\u306a\u8ca0\u306e\u5024\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n\n\u89e3\u8aac\n\u7d50\u69cb\u77ed\u3044\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\ncanvas-arrow.js\n(function(target) {\n  if (!target || !target.prototype)\n    return;\n  target.prototype.arrow = function(startX, startY, endX, endY, controlPoints) {\n    var dx = endX - startX;\n    var dy = endY - startY;\n    var len = Math.sqrt(dx * dx + dy * dy);\n    var sin = dy / len;\n    var cos = dx / len;\n    var a = [];\n    a.push(0, 0);\n    for (var i = 0; i < controlPoints.length; i += 2) {\n      var x = controlPoints[i];\n      var y = controlPoints[i + 1];\n      a.push(x < 0 ? len + x : x, y);\n    }\n    a.push(len, 0);\n    for (var i = controlPoints.length; i > 0; i -= 2) {\n      var x = controlPoints[i - 2];\n      var y = controlPoints[i - 1];\n      a.push(x < 0 ? len + x : x, -y);\n    }\n    a.push(0, 0);\n    for (var i = 0; i < a.length; i += 2) {\n      var x = a[i] * cos - a[i + 1] * sin + startX;\n      var y = a[i] * sin + a[i + 1] * cos + startY;\n      if (i === 0) this.moveTo(x, y);\n      else this.lineTo(x, y);\n    }\n  };\n})(CanvasRenderingContext2D);\n\n\n\n\u4e00\u65e6\u5236\u5fa1\u70b9\u5ea7\u6a19\u7cfb\u3067\u77e2\u5370\u306e\u30dd\u30ea\u30b4\u30f3\u3092\u4f5c\u308b\n\u305d\u306e\u30dd\u30ea\u30b4\u30f3\u3092\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3057\u3066\u59cb\u70b9\u30fb\u7d42\u70b9\u5ea7\u6a19\u7cfb\u306b\u6295\u5f71\u3059\u308b\n\u7d50\u679c\u3092 moveTo/lineTo \u3067\u63cf\u753b\n\n\n\u307e\u3068\u3081\nCanvas arrow \u3067\u691c\u7d22\u3059\u308b\u3068 http://stackoverflow.com/questions/808826/draw-arrow-on-canvas-tag \u3053\u3093\u306a\u304b\u3093\u3058\u3067\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u77e2\u5370\u306e\u5f62\u3092\u5909\u3048\u308b\u305f\u3073\u306b\u5ea7\u6a19\u5909\u63db\u3084\u3089\u4e09\u89d2\u95a2\u6570\u3084\u3089\u3092\u8003\u3048\u308b\u306e\u306f\u7cbe\u795e\u885b\u751f\u4e0a\u3088\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u5927\u304d\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u4f9d\u5b58\u3059\u308b\u306e\u3082\u3061\u3087\u3063\u3068\u3001\u3068\u3044\u3046\u5834\u5408\u306b\u5f79\u306b\u7acb\u3064\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n# \u306f\u3058\u3081\u306b\n\nCanvas \u3067\u3042\u308b\u7a0b\u5ea6\u6c4e\u7528\u7684\u306b\u3044\u308d\u3044\u308d\u306a\u77e2\u5370\u3092\u63cf\u304f\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f5c\u3063\u305f\u306e\u3067\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n# \u30c7\u30e2&\u30e9\u30a4\u30d6\u30e9\u30ea\n\n\u6700\u7d42\u7684\u306b\u3053\u3093\u306a\u304b\u3093\u3058\u3067\u3044\u308d\u3044\u308d\u306a\u5f62\u72b6\u306e\u77e2\u5370\u3092\u63cf\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/82494/d96a8f80-54e3-3c3a-4d84-8324f1076884.png)\n\n* \u30c7\u30e2 https://frogcat.github.io/canvas-arrow/\n* GitHub https://github.com/frogcat/canvas-arrow\n\n# \u4f7f\u3044\u65b9\n\n```example.html\n<script src=\"https://frogcat.github.io/canvas-arrow/canvas-arrow.js\"></script>\n\n...\n<script>\nvar context = canvas.getContext(\"2d\");\ncontext.beginPath();\ncontext.arrow(0, 0, 200, 100, [0, 5, -20, 5, -20, 15]);\ncontext.fill();\n</script>\n\n```\n\n`https://frogcat.github.io/canvas-arrow/canvas-arrow.js` \u306f CanvasRenderingContext2D \u306e prototype \u306b arrow \u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\narrow \u30e1\u30bd\u30c3\u30c9\u306e API\u306f\u3053\u3093\u306a\u304b\u3093\u3058\u3067\u3059\u3002\n\n```\ncontext.arrow(startX,startY,endX,endY,controlPoints);\n```\n\n* **startX** : \u59cb\u70b9\u306e X \u5ea7\u6a19\n* **startY** : \u59cb\u70b9\u306e Y \u5ea7\u6a19\n* **endX** : \u7d42\u70b9\u306e X \u5ea7\u6a19\n* **endY** : \u7d42\u70b9\u306e Y \u5ea7\u6a19\n* **controlPoints** : \u77e2\u5370\u5f62\u72b6\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u5236\u5fa1\u70b9\u306e\u914d\u5217\n\ncontrolPoints \u306b\u306f [x1,y1,x2,y2,x3,y3...] \u3068\u3044\u3063\u305f\u3088\u3046\u306b\u5236\u5fa1\u70b9\u306e X,Y \u5ea7\u6a19\u5024\u304c\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u5ea7\u6a19\u5024\u306e\u610f\u5473\u306f\u4e0b\u56f3\u306e\u3068\u304a\u308a\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/82494/58b8a03c-493f-6f8e-c81b-766cbee35b21.png)\n\n* x \u5ea7\u6a19\u304c\u6b63\u306e\u5834\u5408\u306b\u306f start \u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u3001\u8ca0\u306e\u5834\u5408\u306b\u306f end \u304b\u3089\u306e\u76f8\u5bfe\u5ea7\u6a19\u3068\u898b\u306a\u3059\n* \u7d42\u70b9\u306e\u771f\u4e0a\u30fb\u771f\u4e0b\u3092\u6307\u5b9a\u3057\u305f\u3044\u5834\u5408\u306b\u306f `-Number.MIN_VALUE` \u306a\u3069\u306e\u3068\u3066\u3082\u5c0f\u3055\u306a\u8ca0\u306e\u5024\u3092\u6307\u5b9a\u3057\u307e\u3059\n\n# \u89e3\u8aac\n\n\u7d50\u69cb\u77ed\u3044\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n```canvas-arrow.js\n(function(target) {\n  if (!target || !target.prototype)\n    return;\n  target.prototype.arrow = function(startX, startY, endX, endY, controlPoints) {\n    var dx = endX - startX;\n    var dy = endY - startY;\n    var len = Math.sqrt(dx * dx + dy * dy);\n    var sin = dy / len;\n    var cos = dx / len;\n    var a = [];\n    a.push(0, 0);\n    for (var i = 0; i < controlPoints.length; i += 2) {\n      var x = controlPoints[i];\n      var y = controlPoints[i + 1];\n      a.push(x < 0 ? len + x : x, y);\n    }\n    a.push(len, 0);\n    for (var i = controlPoints.length; i > 0; i -= 2) {\n      var x = controlPoints[i - 2];\n      var y = controlPoints[i - 1];\n      a.push(x < 0 ? len + x : x, -y);\n    }\n    a.push(0, 0);\n    for (var i = 0; i < a.length; i += 2) {\n      var x = a[i] * cos - a[i + 1] * sin + startX;\n      var y = a[i] * sin + a[i + 1] * cos + startY;\n      if (i === 0) this.moveTo(x, y);\n      else this.lineTo(x, y);\n    }\n  };\n})(CanvasRenderingContext2D);\n```\n\n\n1. \u4e00\u65e6\u5236\u5fa1\u70b9\u5ea7\u6a19\u7cfb\u3067\u77e2\u5370\u306e\u30dd\u30ea\u30b4\u30f3\u3092\u4f5c\u308b\n2. \u305d\u306e\u30dd\u30ea\u30b4\u30f3\u3092\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3057\u3066\u59cb\u70b9\u30fb\u7d42\u70b9\u5ea7\u6a19\u7cfb\u306b\u6295\u5f71\u3059\u308b\n3. \u7d50\u679c\u3092 moveTo/lineTo \u3067\u63cf\u753b\n\n# \u307e\u3068\u3081\n\n**Canvas arrow** \u3067\u691c\u7d22\u3059\u308b\u3068 <http://stackoverflow.com/questions/808826/draw-arrow-on-canvas-tag> \u3053\u3093\u306a\u304b\u3093\u3058\u3067\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u306f\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u77e2\u5370\u306e\u5f62\u3092\u5909\u3048\u308b\u305f\u3073\u306b\u5ea7\u6a19\u5909\u63db\u3084\u3089\u4e09\u89d2\u95a2\u6570\u3084\u3089\u3092\u8003\u3048\u308b\u306e\u306f\u7cbe\u795e\u885b\u751f\u4e0a\u3088\u304f\u3042\u308a\u307e\u305b\u3093\u3002\u5927\u304d\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u4f9d\u5b58\u3059\u308b\u306e\u3082\u3061\u3087\u3063\u3068\u3001\u3068\u3044\u3046\u5834\u5408\u306b\u5f79\u306b\u7acb\u3064\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n", "tags": ["canvas", "JavaScript"]}