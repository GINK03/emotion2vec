{"context": " More than 1 year has passed since last update.\u307e\u3042\u3001\u89e3\u304b\u305b\u3066\u3044\u305f\u3060\u3044\u3066\u3044\u308b\u8eab\u3067\u3059\u3057\u3001\u63a1\u70b9\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304d\u76f4\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\nhttps://github.com/cielavenir/procon/blob/master/tyama_hena_validator.rb\n\u4eca\u5f8c\u30c6\u30ad\u30b9\u30c8\u7248\u306f\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u5c24\u3082table\u30bf\u30b0\u306e\u4e2d\u8eab\u304c\u5909\u308f\u3063\u305f\u6642\u306b\u5bfe\u5fdc\u3067\u304d\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u306f\u3042\u308a\u307e\u3059\u3051\u3069\u306d\u2026\u3002\n\u89e3\u7b54\u81ea\u4f53\u306f\u751f\u7269\u60c5\u5831\u3067\u3088\u304f\u3042\u308b\u30cd\u30bf\u306e\u30ed\u30fc\u30ab\u30eb\u30a2\u30e9\u30a4\u30f3\u30e1\u30f3\u30c8\u3068\u3044\u3046\u3082\u306e\u30b0\u30ed\u30fc\u30d0\u30eb\u30a2\u30e9\u30a4\u30f3\u30e1\u30f3\u30c8\u3092\u6539\u5909\u3057\u3066\u30ae\u30e3\u30c3\u30d7\u30da\u30ca\u30eb\u30c6\u30a3\u30920\u306b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u5c11\u3057\u5909\u66f4\u3059\u308c\u3070\u6700\u9577\u56de\u6587(\u306e\u4e00\u3064)\u3092\u51fa\u305b\u308b\u3088\u3046\u306b\u3067\u304d\u307e\u3059\u3002\n\nhena15pre.rb\n#!/usr/bin/env ruby\n#http://qiita.com/Nabetani/items/0b56395d4c9e7c64b230\n#http://nabetani.sakura.ne.jp/hena/ord15subpalin/\ndef local_alignment(x, y)\n    #initialize\n    a = Array.new(x.size+1){Array.new(y.size+1, 0)}\n    back = Array.new(x.size+1){Array.new(y.size+1, 0)}\n    tx = \"\"; ty = \"\"; t=\"\"\n\n    #DP\n    1.step(a.size-1){|i| a[i][0] = a[i-1][0] - 0;back[i][0]=[i-1,0,  \"a\"]}\n    1.step(a[0].size-1){|j| a[0][j] = a[0][j-1] - 0;back[0][j]=[0,  j-1,\"b\"]}\n    1.step(a.size-1){|i|\n        1.step(a[0].size-1){|j|\n            z = [a[i-1][j-1] + (x[i-1,1]==y[j-1,1] ? 1 : 0), a[i-1][j], a[i][j-1]].each_with_index.to_a.max\n            a[i][j]=z[0];\n            if a[i][j]>0\n                case z[1]\n                    when 0 then back[i][j]=[i-1,j-1,\"c\"]\n                    when 1 then back[i][j]=[i-1,j,  \"a\"]\n                    when 2 then back[i][j]=[i,  j-1,\"b\"]\n                end\n            else\n                a[i][j]=0\n            end\n        }\n    }\n\n    #trace-back\n    n=0;m=0;max=0\n    (x.size+1).times{|i|\n        (y.size+1).times{|j|\n            if a[i][j]>max\n                max=a[i][j]\n                n=i\n                m=j\n            end\n        }\n    }\n    return max\n=begin\n    _n=n\n    _m=m\n\n    while a[n][m]>0 do\n        t+=back[n][m][2]\n        n,m = back[n][m][0],back[n][m][1]\n    end\n    t.reverse!\n\n    #output\n    i=n;j=m\n    t.chars{|c|\n        case c\n            when \"c\" then tx+=x[i].chr; i+=1; ty+=y[j].chr; j+=1;\n            when \"a\" then tx+=x[i].chr; i+=1; ty+=\"\";\n            when \"b\" then tx+=\"\";            ty+=y[j].chr; j+=1;\n        end\n    }\n\n    p a[_n][_m]\n    puts tx\n    puts ty\n=end\nend\n\nSTDOUT.sync=true\nwhile gets\n    l=$_.chomp\n    p [\n        (l.size-1).times.map{|i|local_alignment(l[0,i].reverse,l[i+1..-1])*2+1}.max||1,\n        (l.size).times.map{|i|local_alignment(l[0,i].reverse,l[i..-1])*2}.max,\n    ].max\nend\n\n\n\u307e\u3042\u3001\u89e3\u304b\u305b\u3066\u3044\u305f\u3060\u3044\u3066\u3044\u308b\u8eab\u3067\u3059\u3057\u3001\u63a1\u70b9\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304d\u76f4\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\nhttps://github.com/cielavenir/procon/blob/master/tyama_hena_validator.rb\n\u4eca\u5f8c\u30c6\u30ad\u30b9\u30c8\u7248\u306f\u4e0d\u8981\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u5c24\u3082table\u30bf\u30b0\u306e\u4e2d\u8eab\u304c\u5909\u308f\u3063\u305f\u6642\u306b\u5bfe\u5fdc\u3067\u304d\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u306f\u3042\u308a\u307e\u3059\u3051\u3069\u306d\u2026\u3002\n\n\u89e3\u7b54\u81ea\u4f53\u306f\u751f\u7269\u60c5\u5831\u3067\u3088\u304f\u3042\u308b\u30cd\u30bf\u306e<del>\u30ed\u30fc\u30ab\u30eb\u30a2\u30e9\u30a4\u30f3\u30e1\u30f3\u30c8\u3068\u3044\u3046\u3082\u306e</del>\u30b0\u30ed\u30fc\u30d0\u30eb\u30a2\u30e9\u30a4\u30f3\u30e1\u30f3\u30c8\u3092\u6539\u5909\u3057\u3066\u30ae\u30e3\u30c3\u30d7\u30da\u30ca\u30eb\u30c6\u30a3\u30920\u306b\u3057\u305f\u3082\u306e\u3067\u3059\u3002\u5c11\u3057\u5909\u66f4\u3059\u308c\u3070\u6700\u9577\u56de\u6587(\u306e\u4e00\u3064)\u3092\u51fa\u305b\u308b\u3088\u3046\u306b\u3067\u304d\u307e\u3059\u3002\n\n```rb:hena15pre.rb\n#!/usr/bin/env ruby\n#http://qiita.com/Nabetani/items/0b56395d4c9e7c64b230\n#http://nabetani.sakura.ne.jp/hena/ord15subpalin/\ndef local_alignment(x, y)\n\t#initialize\n\ta = Array.new(x.size+1){Array.new(y.size+1, 0)}\n\tback = Array.new(x.size+1){Array.new(y.size+1, 0)}\n\ttx = \"\"; ty = \"\"; t=\"\"\n\n\t#DP\n\t1.step(a.size-1){|i| a[i][0] = a[i-1][0] - 0;back[i][0]=[i-1,0,  \"a\"]}\n\t1.step(a[0].size-1){|j| a[0][j] = a[0][j-1] - 0;back[0][j]=[0,  j-1,\"b\"]}\n\t1.step(a.size-1){|i|\n\t\t1.step(a[0].size-1){|j|\n\t\t\tz = [a[i-1][j-1] + (x[i-1,1]==y[j-1,1] ? 1 : 0), a[i-1][j], a[i][j-1]].each_with_index.to_a.max\n\t\t\ta[i][j]=z[0];\n\t\t\tif a[i][j]>0\n\t\t\t\tcase z[1]\n\t\t\t\t\twhen 0 then back[i][j]=[i-1,j-1,\"c\"]\n\t\t\t\t\twhen 1 then back[i][j]=[i-1,j,  \"a\"]\n\t\t\t\t\twhen 2 then back[i][j]=[i,  j-1,\"b\"]\n\t\t\t\tend\n\t\t\telse\n\t\t\t\ta[i][j]=0\n\t\t\tend\n\t\t}\n\t}\n\n\t#trace-back\n\tn=0;m=0;max=0\n\t(x.size+1).times{|i|\n\t\t(y.size+1).times{|j|\n\t\t\tif a[i][j]>max\n\t\t\t\tmax=a[i][j]\n\t\t\t\tn=i\n\t\t\t\tm=j\n\t\t\tend\n\t\t}\n\t}\n\treturn max\n=begin\n\t_n=n\n\t_m=m\n\n\twhile a[n][m]>0 do\n\t\tt+=back[n][m][2]\n\t\tn,m = back[n][m][0],back[n][m][1]\n\tend\n\tt.reverse!\n\n\t#output\n\ti=n;j=m\n\tt.chars{|c|\n\t\tcase c\n\t\t\twhen \"c\" then tx+=x[i].chr; i+=1; ty+=y[j].chr; j+=1;\n\t\t\twhen \"a\" then tx+=x[i].chr; i+=1; ty+=\"\";\n\t\t\twhen \"b\" then tx+=\"\";            ty+=y[j].chr; j+=1;\n\t\tend\n\t}\n\n\tp a[_n][_m]\n\tputs tx\n\tputs ty\n=end\nend\n\nSTDOUT.sync=true\nwhile gets\n\tl=$_.chomp\n\tp [\n\t\t(l.size-1).times.map{|i|local_alignment(l[0,i].reverse,l[i+1..-1])*2+1}.max||1,\n\t\t(l.size).times.map{|i|local_alignment(l[0,i].reverse,l[i..-1])*2}.max,\n\t].max\nend\n```\n", "tags": ["Ruby", "\u3069\u3046\u66f8\u304f", "yhpg"]}