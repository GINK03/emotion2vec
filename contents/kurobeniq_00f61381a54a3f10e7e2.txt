{"tags": ["PHPUnit", "PHP"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u5df7\u3067\u8a71\u984c\u306b\u306a\u3063\u3066\u308b\u4f5c\u696d\u3057\u3066\u3044\u308b\u30d5\u30ea\u306e\u2026\u306exUnit(\u4eca\u56de\u306fPHPUnit)\u7248\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u30b8\u30e7\u30fc\u30af\u30a2\u30d7\u30ea\u3067\u3059\u3002\u4f11\u61a9\u7528\u3067\u3059\u3002\n\u6307\u5b9a\u3057\u305f\u6642\u9593\u3001\u30c6\u30b9\u30c8\u3092\u6d41\u3057\u3066\u3044\u308b\u30d5\u30ea\u3092\u3057\u307e\u3059\u3002\n\nDemo\n\n\n\u4f7f\u3044\u65b9\n./jokeUnit.php -m [\u4f11\u61a9\u6642\u9593(\u5206)]\u3000-s [\u4f11\u61a9\u6642\u9593(\u6570)]\n\u3059\u3054\u304f\u30c6\u30ad\u30c8\u30fc\u3067\u3059\u3002\n\n\u30bd\u30fc\u30b9\n\njokeUnit.php\n#!/usr/bin/php\n<?php\n// \u30aa\u30d7\u30b7\u30e7\u30f3 -m [\u5206] -s [\u79d2]\n\n// \u30aa\u30d7\u30b7\u30e7\u30f3\u53d6\u5f97\n// (\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u4f55\u3082\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c810\u79d2\n$options = getopt('m:s:');\n$minutes = (is_null($options['m'])) ? 0  : $options['m'];\n$sec     = (is_null($options['s'])) ? 10 : $options['s'];\n\n// \u51e6\u7406\u79d2\u6570\n$processing_sec = $sec + ($minutes * 60);\n// \u7d42\u4e86\u6642\u9593(unixtime)\n$end_unix_time = time() + $processing_sec;\n// \u6700\u5927\u30c9\u30c3\u30c8\u6570\n$max_dot = $processing_sec * 2;\n\n// \u753b\u9762\u30af\u30ea\u30a2\nprint(\"\\033[2J\");\nprint(\"\\033[0;0H\");\n\nprint(\"PHPUnit 4.1.0 by Sebastian Bergmann.\\n\\n\");\n\n// \u8868\u793a\u3057\u305f\u30c9\u30c3\u30c8\u6570\n$dot = 0;\n$wait_time = $processing_sec / $max_dot * 1000000;\nwhile(time() < $end_unix_time){\n    print('.');\n    $dot++;\n    if ($dot % 61 == 0){\n        print('  '.str_pad($dot, strlen($max_dot), ' ', STR_PAD_LEFT).' / '.$max_dot.' ( '.str_pad(floor($dot/$max_dot* 100), 2, ' ', STR_PAD_LEFT).'%)'.\"\\n\");\n    }\n    usleep($wait_time);\n}\nprint(\"\\n\\n\");\nprint('Time: '.$processing_sec.' seconds, Memory: 8.00Mb'.\"\\n\");\nprint(\"\\n\");\nprint('OK ('.$max_dot.' tests, '.($max_dot + rand(1, $max_dot * 3)).' assertions)'.\"\\n\");\n\n\n\n## \u306f\u3058\u3081\u306b\n[\u5df7\u3067\u8a71\u984c\u306b\u306a\u3063\u3066\u308b\u4f5c\u696d\u3057\u3066\u3044\u308b\u30d5\u30ea\u306e\u2026](http://icon.jp/archives/7832)\u306exUnit(\u4eca\u56de\u306fPHPUnit)\u7248\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u30b8\u30e7\u30fc\u30af\u30a2\u30d7\u30ea\u3067\u3059\u3002\u4f11\u61a9\u7528\u3067\u3059\u3002\n\u6307\u5b9a\u3057\u305f\u6642\u9593\u3001\u30c6\u30b9\u30c8\u3092\u6d41\u3057\u3066\u3044\u308b\u30d5\u30ea\u3092\u3057\u307e\u3059\u3002\n\n## Demo\n![ju.gif](https://qiita-image-store.s3.amazonaws.com/0/39026/94dfbe2a-0b3e-9866-3b42-c13d3915660f.gif \"ju.gif\")\n\n## \u4f7f\u3044\u65b9\n`./jokeUnit.php -m [\u4f11\u61a9\u6642\u9593(\u5206)]\u3000-s [\u4f11\u61a9\u6642\u9593(\u6570)]`\n\u3059\u3054\u304f\u30c6\u30ad\u30c8\u30fc\u3067\u3059\u3002\n\n## \u30bd\u30fc\u30b9\n```php:jokeUnit.php\n#!/usr/bin/php\n<?php\n// \u30aa\u30d7\u30b7\u30e7\u30f3 -m [\u5206] -s [\u79d2]\n\n// \u30aa\u30d7\u30b7\u30e7\u30f3\u53d6\u5f97\n// (\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u4f55\u3082\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3051\u308c\u3070\u30c7\u30d5\u30a9\u30eb\u30c810\u79d2\n$options = getopt('m:s:');\n$minutes = (is_null($options['m'])) ? 0  : $options['m'];\n$sec     = (is_null($options['s'])) ? 10 : $options['s'];\n\n// \u51e6\u7406\u79d2\u6570\n$processing_sec = $sec + ($minutes * 60);\n// \u7d42\u4e86\u6642\u9593(unixtime)\n$end_unix_time = time() + $processing_sec;\n// \u6700\u5927\u30c9\u30c3\u30c8\u6570\n$max_dot = $processing_sec * 2;\n\n// \u753b\u9762\u30af\u30ea\u30a2\nprint(\"\\033[2J\");\nprint(\"\\033[0;0H\");\n\nprint(\"PHPUnit 4.1.0 by Sebastian Bergmann.\\n\\n\");\n\n// \u8868\u793a\u3057\u305f\u30c9\u30c3\u30c8\u6570\n$dot = 0;\n$wait_time = $processing_sec / $max_dot * 1000000;\nwhile(time() < $end_unix_time){\n    print('.');\n    $dot++;\n    if ($dot % 61 == 0){\n        print('  '.str_pad($dot, strlen($max_dot), ' ', STR_PAD_LEFT).' / '.$max_dot.' ( '.str_pad(floor($dot/$max_dot* 100), 2, ' ', STR_PAD_LEFT).'%)'.\"\\n\");\n    }\n    usleep($wait_time);\n}\nprint(\"\\n\\n\");\nprint('Time: '.$processing_sec.' seconds, Memory: 8.00Mb'.\"\\n\");\nprint(\"\\n\");\nprint('OK ('.$max_dot.' tests, '.($max_dot + rand(1, $max_dot * 3)).' assertions)'.\"\\n\");\n```\n\n\n"}