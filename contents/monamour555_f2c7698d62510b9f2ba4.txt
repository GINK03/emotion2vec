{"context": " More than 1 year has passed since last update.Azure \u56fa\u6709\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u3068 systemd \u3068\u4ed8\u304d\u5408\u308f\u306a\u304f\u3066\u6e08\u3080\u306e\u3067\uff0c\u30e1\u30e2\uff0e\nAzure \u306e CoreOS \u30a4\u30e1\u30fc\u30b8\u306b\u306f\uff0cwaagent \u306a\u308b\u4ed5\u7d44\u307f\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u3066\uff0c /mnt/resource/swapfile \u3092\u8d77\u52d5\u6642\u306b\u4f5c\u3063\u3066\u304f\u308c\u307e\u3059\uff0e\n\nwaagent.conf \u306e\u7de8\u96c6\n# vi /usr/share/oem/waagent.conf\n\n# Create and use swapfile on resource disk.\nResourceDisk.EnableSwap=n\n\n# Size of the swapfile.\nResourceDisk.SwapSizeMB=0\n\n\u3092\n# Create and use swapfile on resource disk.\nResourceDisk.EnableSwap=y\n\n# Size of the swapfile.\nResourceDisk.SwapSizeMB=8192\n\n\u3068\u3057\u307e\u3059\uff0eswapfile \u306e\u5927\u304d\u3055\u306f\u304a\u597d\u307f\u3067\uff0e\n\n\u518d\u8d77\u52d5\nwaagent \u8d77\u52d5\u6642\u306b\u50cd\u304d\u307e\u3059\u306e\u3067\uff0c\u3053\u306e\u6642\u70b9\u3067\u306f swapfile \u3092\u4f5c\u3063\u3066\u3044\u307e\u305b\u3093\uff0e\n\u901f\u3084\u304b\u306b reboot \u3057\u307e\u3059\uff0e\n# reboot\n\n\n\u78ba\u8a8d\n\u9803\u5408\u3044\u3092\u898b\u8a08\u3089\u3063\u3066\uff0c\u518d\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\uff0e\n\u8d77\u52d5\u76f4\u5f8c\u306f swap \u306f\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\u305d\u306e\u3068\u304d\u306f\uff0c\u6570\u5341\u79d2\u5f85\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\nLast login: Sun Dec 20 04:55:43 2015 from xxx.xxx.xxx.xxx\nCoreOS stable (835.9.0)\n$ free\n             total       used       free     shared    buffers     cached\nMem:        688792     195892     492900        592       5492      78716\n-/+ buffers/cache:     111684     577108\nSwap:            0          0          0\n(\u3057\u3070\u3089\u304f\u5f85\u3064)\n$ free\n             total       used       free     shared    buffers     cached\nMem:        688792     210884     477908        600       6756      83188\n-/+ buffers/cache:     120940     567852\nSwap:      8388604          0    8388604\n\n\n\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\nswapfile \u306f 0644 \u3067\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\uff0e 0600 \u306b\u3057\u305f\u3051\u308c\u3070\uff0coneshot \u306a service \u3092\u4ed5\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\uff0e\u3067\u3082\uff0c\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u3067\u306a\u3051\u308c\u3070\u305d\u3053\u307e\u3067\u6c17\u306b\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\nAzure \u56fa\u6709\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u3068 systemd \u3068\u4ed8\u304d\u5408\u308f\u306a\u304f\u3066\u6e08\u3080\u306e\u3067\uff0c\u30e1\u30e2\uff0e\n\nAzure \u306e CoreOS \u30a4\u30e1\u30fc\u30b8\u306b\u306f\uff0cwaagent \u306a\u308b\u4ed5\u7d44\u307f\u304c\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u3066\uff0c /mnt/resource/swapfile \u3092\u8d77\u52d5\u6642\u306b\u4f5c\u3063\u3066\u304f\u308c\u307e\u3059\uff0e\n\nwaagent.conf \u306e\u7de8\u96c6\n==================\n\n```\n# vi /usr/share/oem/waagent.conf\n```\n\n```\n# Create and use swapfile on resource disk.\nResourceDisk.EnableSwap=n\n\n# Size of the swapfile.\nResourceDisk.SwapSizeMB=0\n```\n\n\u3092\n\n```\n# Create and use swapfile on resource disk.\nResourceDisk.EnableSwap=y\n\n# Size of the swapfile.\nResourceDisk.SwapSizeMB=8192\n```\n\n\u3068\u3057\u307e\u3059\uff0eswapfile \u306e\u5927\u304d\u3055\u306f\u304a\u597d\u307f\u3067\uff0e\n\n\u518d\u8d77\u52d5\n======\n\nwaagent \u8d77\u52d5\u6642\u306b\u50cd\u304d\u307e\u3059\u306e\u3067\uff0c\u3053\u306e\u6642\u70b9\u3067\u306f swapfile \u3092\u4f5c\u3063\u3066\u3044\u307e\u305b\u3093\uff0e\n\u901f\u3084\u304b\u306b reboot \u3057\u307e\u3059\uff0e\n\n```\n# reboot\n```\n\n\u78ba\u8a8d\n====\n\n\u9803\u5408\u3044\u3092\u898b\u8a08\u3089\u3063\u3066\uff0c\u518d\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\uff0e\n\u8d77\u52d5\u76f4\u5f8c\u306f swap \u306f\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\u305d\u306e\u3068\u304d\u306f\uff0c\u6570\u5341\u79d2\u5f85\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff0e\n\n```shell-session\nLast login: Sun Dec 20 04:55:43 2015 from xxx.xxx.xxx.xxx\nCoreOS stable (835.9.0)\n$ free\n             total       used       free     shared    buffers     cached\nMem:        688792     195892     492900        592       5492      78716\n-/+ buffers/cache:     111684     577108\nSwap:            0          0          0\n(\u3057\u3070\u3089\u304f\u5f85\u3064)\n$ free\n             total       used       free     shared    buffers     cached\nMem:        688792     210884     477908        600       6756      83188\n-/+ buffers/cache:     120940     567852\nSwap:      8388604          0    8388604\n```\n\n\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\n============\n\nswapfile \u306f 0644 \u3067\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\uff0e 0600 \u306b\u3057\u305f\u3051\u308c\u3070\uff0coneshot \u306a service \u3092\u4ed5\u8fbc\u3080\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\uff0e\u3067\u3082\uff0c\u30de\u30eb\u30c1\u30e6\u30fc\u30b6\u3067\u306a\u3051\u308c\u3070\u305d\u3053\u307e\u3067\u6c17\u306b\u3057\u306a\u304f\u3066\u3082\u826f\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\uff0e\n", "tags": ["CoreOS", "Azure"]}