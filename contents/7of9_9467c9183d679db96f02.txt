{"context": "\n\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n\n\n\u30e1\u30fc\u30eb\u9001\u4fe1\u6a5f\u80fd\u306b\u304a\u3044\u3066\u8907\u6570\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u3001\u305d\u306e\u30a2\u30c9\u30ec\u30b9\u3092<7of9@xxx.com>,<7of9@yyy.com>,<7of9@zzz.com>\u306e\u3088\u3046\u306b\u9023\u7d50\u3059\u308b\u3053\u3068\u3067\u8907\u6570\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3067\u304d\u308b\u3053\u3068\u306f\u78ba\u8a8d\u3057\u305f\u3002\n\u30e6\u30fc\u30b6\u304c\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3059\u308bTEdit\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u3001\u89d2\u62ec\u5f27\u3092\u3064\u3051\u3066\u3082\u3089\u3046\u306e\u306f\u4e0d\u89aa\u5207\u306aUI\u306a\u306e\u3067\u3001\u81ea\u52d5\u3067\u3064\u3051\u308b\u51e6\u7406\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u305f\u3002\n\u89d2\u62ec\u5f27\u3092\u3064\u3051\u3066\u5165\u529b\u3055\u308c\u305f\u5834\u5408\u3082\u304d\u3061\u3093\u3068\u51e6\u7406\u3055\u308c\u308b\u3088\u3046\u3001\u89d2\u62ec\u5f27\u3092\u5148\u306b\u524a\u9664\u3057\u3066\u304b\u3089\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u8abf\u6574\u3057\u3066\u3044\u308b\u3002\n\nUnit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include <memory>\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n    String allAdr = Edit1->Text + L\",\" + Edit2->Text + L\",\" + Edit3->Text;\n    allAdr = FormatMailAddresses(allAdr);\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::FormatMailAddresses(String srcStr)\n{\n    std::unique_ptr<TStringList> mlist(new TStringList);\n\n    mlist->CommaText = srcStr;\n\n    String itmstr;\n    String resstr = L\"\";\n    for(int idx = 0; idx < mlist->Count; idx++) {\n        itmstr = mlist->Strings[idx];\n        // remove angle brackets\n        itmstr = StringReplace(itmstr, L\"<\", L\"\", TReplaceFlags()<<rfReplaceAll);\n        itmstr = StringReplace(itmstr, L\">\", L\"\", TReplaceFlags()<<rfReplaceAll);\n\n        if (resstr.Length() > 0) {\n            resstr = resstr + L\",\";\n        }\n        resstr = resstr + L\"<\" + itmstr + L\">\";\n    }\n\n    return resstr;\n}\n\n\n```txt:\u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n```\n\n\u30e1\u30fc\u30eb\u9001\u4fe1\u6a5f\u80fd\u306b\u304a\u3044\u3066\u8907\u6570\u306e\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u3001\u305d\u306e\u30a2\u30c9\u30ec\u30b9\u3092`<7of9@xxx.com>,<7of9@yyy.com>,<7of9@zzz.com>`\u306e\u3088\u3046\u306b\u9023\u7d50\u3059\u308b\u3053\u3068\u3067\u8907\u6570\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3067\u304d\u308b\u3053\u3068\u306f\u78ba\u8a8d\u3057\u305f\u3002\n\n\u30e6\u30fc\u30b6\u304c\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3059\u308bTEdit\u304c\u8907\u6570\u3042\u308b\u5834\u5408\u3001\u89d2\u62ec\u5f27\u3092\u3064\u3051\u3066\u3082\u3089\u3046\u306e\u306f\u4e0d\u89aa\u5207\u306aUI\u306a\u306e\u3067\u3001\u81ea\u52d5\u3067\u3064\u3051\u308b\u51e6\u7406\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3057\u305f\u3002\n\n\u89d2\u62ec\u5f27\u3092\u3064\u3051\u3066\u5165\u529b\u3055\u308c\u305f\u5834\u5408\u3082\u304d\u3061\u3093\u3068\u51e6\u7406\u3055\u308c\u308b\u3088\u3046\u3001\u89d2\u62ec\u5f27\u3092\u5148\u306b\u524a\u9664\u3057\u3066\u304b\u3089\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u8abf\u6574\u3057\u3066\u3044\u308b\u3002\n\n```Unit1.cpp\n//---------------------------------------------------------------------------\n\n#include <vcl.h>\n#pragma hdrstop\n\n#include <memory>\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n\t: TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n\tString allAdr = Edit1->Text + L\",\" + Edit2->Text + L\",\" + Edit3->Text;\n\tallAdr = FormatMailAddresses(allAdr);\n}\n//---------------------------------------------------------------------------\n\nString __fastcall TForm1::FormatMailAddresses(String srcStr)\n{\n\tstd::unique_ptr<TStringList> mlist(new TStringList);\n\n\tmlist->CommaText = srcStr;\n\n\tString itmstr;\n\tString resstr = L\"\";\n\tfor(int idx = 0; idx < mlist->Count; idx++) {\n\t\titmstr = mlist->Strings[idx];\n\t\t// remove angle brackets\n\t\titmstr = StringReplace(itmstr, L\"<\", L\"\", TReplaceFlags()<<rfReplaceAll);\n\t\titmstr = StringReplace(itmstr, L\">\", L\"\", TReplaceFlags()<<rfReplaceAll);\n\n\t\tif (resstr.Length() > 0) {\n\t\t\tresstr = resstr + L\",\";\n\t\t}\n\t\tresstr = resstr + L\"<\" + itmstr + L\">\";\n\t}\n\n\treturn resstr;\n}\n```\n\n", "tags": ["cppBuilder", "stringOperation"]}