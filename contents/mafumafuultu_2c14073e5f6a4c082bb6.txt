{"context": "\u30b3\u30f3\u30dc\u30dc\u30c3\u30af\u30b9\u306e\u5b9f\u88c5\u306fdatalsit\u3067\u7c21\u5358\u306b\u3067\u304d\u308b\u3002\n\u4e00\u89a7\u51fa\u3059\u3060\u3051\u3067\u306f\u82b8\u304c\u7121\u3044\u306e\u3067\n\n\u30da\u30fc\u30b8\u3092\u958b\u3044\u305f\u3068\u304d\u6700\u5f8c\u306b\u4f7f\u7528\u3057\u305f\u30ad\u30fc\u3067\u5fa9\u5143\n\n\u4e0d\u8981\u306a\u30ad\u30fc\u3092\u524a\u9664\n\u5165\u529b\u3057\u305f\u30ad\u30fc\u3067\u4fdd\u5b58\n\n<input type=\"text\" id=\"storageKey\" list=\"storageKeys\">\n<datalist id=\"storageKeys\"></datalist>\n\n\nconst DEFAULT_KEY = 'default', LAST_KEY = '__lastkey__';\n\n$(function(){\n    updateStorageKeys();\n    loadContent(LAST_KEY);\n});\n\n/* datalist\u306e\u66f4\u65b0 */\nfunction updateStorageKeys() {\n    var list = '', keys = Object.keys(localStorage);\n    for (var i = 0, l = keys.length; i < l ; i++) {\n        list += `<option value=\"${keys[i]}\">${keys[i]}</option>`;\n    }\n    $('#storageKeys').html(list);\n}\n\n/* [-_a-zA-Z0-9] \u306f\u8a31\u53ef */\nfunction getStorageKey() {\n    var key = $('#storageKey').val().replace(/[^-\\w]/g, '');\n    if (key === '') key = DEFAULT_KEY;\n    if (key === LAST_KEY) key = DEFAULT_KEY;\n    return key;\n}\n\nfunction saveContent( value ) {\n    var key = getStorageKey()\n    localStorage.setItem(key, JSON.Stringify(value));\n    localStorage.setItem(LAST_KEY, key);\n    updateStorageKeys()\n}\n\nfunction loadContent( key ) {\n    return JSON.parse(localStorage.getItem(key));\n}\n\nfunction removeStorageKey(){\n    var key = $('#storageKey').val(), keys = Object.keys(localStorage);\n    if (key === LAST_KEY)  return;\n    if (keys.indexOf(key) !== -1)  {\n        localStorage.removeItem(key);\n        updateStorageKeys();\n        $('#storageKey').val('');\n    }\n}\n\n\n\u30b3\u30f3\u30dc\u30dc\u30c3\u30af\u30b9\u306e\u5b9f\u88c5\u306f`datalsit`\u3067\u7c21\u5358\u306b\u3067\u304d\u308b\u3002\n\n\u4e00\u89a7\u51fa\u3059\u3060\u3051\u3067\u306f\u82b8\u304c\u7121\u3044\u306e\u3067\n\n* \u30da\u30fc\u30b8\u3092\u958b\u3044\u305f\u3068\u304d\u6700\u5f8c\u306b\u4f7f\u7528\u3057\u305f\u30ad\u30fc\u3067\u5fa9\u5143  \n* \u4e0d\u8981\u306a\u30ad\u30fc\u3092\u524a\u9664\n* \u5165\u529b\u3057\u305f\u30ad\u30fc\u3067\u4fdd\u5b58\n\n```html\n<input type=\"text\" id=\"storageKey\" list=\"storageKeys\">\n<datalist id=\"storageKeys\"></datalist>\n\n```\n\n```js\nconst DEFAULT_KEY = 'default', LAST_KEY = '__lastkey__';\n\n$(function(){\n    updateStorageKeys();\n    loadContent(LAST_KEY);\n});\n\n/* datalist\u306e\u66f4\u65b0 */\nfunction updateStorageKeys() {\n    var list = '', keys = Object.keys(localStorage);\n    for (var i = 0, l = keys.length; i < l ; i++) {\n        list += `<option value=\"${keys[i]}\">${keys[i]}</option>`;\n    }\n    $('#storageKeys').html(list);\n}\n\n/* [-_a-zA-Z0-9] \u306f\u8a31\u53ef */\nfunction getStorageKey() {\n    var key = $('#storageKey').val().replace(/[^-\\w]/g, '');\n    if (key === '') key = DEFAULT_KEY;\n    if (key === LAST_KEY) key = DEFAULT_KEY;\n    return key;\n}\n\nfunction saveContent( value ) {\n    var key = getStorageKey()\n    localStorage.setItem(key, JSON.Stringify(value));\n    localStorage.setItem(LAST_KEY, key);\n    updateStorageKeys()\n}\n\nfunction loadContent( key ) {\n    return JSON.parse(localStorage.getItem(key));\n}\n\nfunction removeStorageKey(){\n    var key = $('#storageKey').val(), keys = Object.keys(localStorage);\n    if (key === LAST_KEY)  return;\n    if (keys.indexOf(key) !== -1)  {\n        localStorage.removeItem(key);\n        updateStorageKeys();\n        $('#storageKey').val('');\n    }\n}\n```\n", "tags": ["localStorage"]}