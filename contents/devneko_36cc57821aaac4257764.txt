{"tags": ["docker", "solr", "PHP"], "context": "\n\n\u5fc5\u8981\u74b0\u5883\n\nLinux\nDocker\n\n\nSolr\u306e\u8d77\u52d5\nDockerHub\u306e\u516c\u5f0f\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3044\u307e\u3059\u3002\nhttps://hub.docker.com/_/solr/\n\u8a2d\u5b9a\u306a\u3069\u306f\u30b3\u30f3\u30c6\u30ca\u5916\u3067\u7ba1\u7406\u3057\u305f\u3044\u306e\u3067\u3001-v\u3067\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u7528\u610f\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nmkdir ~/solr-cores\ndocker run --name solr -d -p 8983:8983 -v ~/solr-cores:/var/solr/cores -t solr\ndocker exec -t -u root solr chown solr:solr /var/solr/cores\n\n\n\u30b3\u30a2\u306e\u4f5c\u6210\nDocker\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u3063\u3066\u30b3\u30a2\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nbash\u3092\u8d77\u52d5\u3059\u308b\u3068solr\u30e6\u30fc\u30b6\u30fc\u3067/opt/server\u304c\u30ef\u30fc\u30ad\u30f3\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u306a\u3063\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\n\u8a2d\u5b9a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8(server/solr/configsets/data_driven_schema_configs)\u3092\u30b3\u30d4\u30fc\u3057\u3066\u8a2d\u5b9a\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u306b\u30b3\u30a2\u3092\u4f5c\u6210\u3059\u308bAPI\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\ndocker exec -ti solr /bin/bash\ncp -R server/solr/configsets/data_driven_schema_configs /var/solr/cores/main\ncurl \"http://localhost:8983/solr/admin/cores?action=CREATE&name=main&instanceDir=/var/solr/cores/main\"\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u767b\u9332\n./bin/post\u30b3\u30de\u30f3\u30c9\u3067\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u767b\u9332\u3067\u304d\u307e\u3059\u3002\n\u8a66\u3057\u306b Solr \u306e README.txt \u3092\u767b\u9332\u3057\u3066\u307f\u307e\u3059\u3002\n./bin/post -c main README.txt\n\n\ncurl\u3067\u691c\u7d22\ncurl \"http://localhost:8983/solr/main/select?indent=on&q=Software&wt=json\"\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":0,\n    \"params\":{\n      \"q\":\"Software\",\n      \"indent\":\"on\",\n      \"wt\":\"json\"}},\n  \"response\":{\"numFound\":1,\"start\":0,\"docs\":[\n      {\n        \"id\":\"/opt/solr/README.txt\",\n        \"stream_size\":[7242],\n        \"x_parsed_by\":[\"org.apache.tika.parser.DefaultParser\",\n          \"org.apache.tika.parser.txt.TXTParser\"],\n        \"stream_content_type\":[\"text/plain\"],\n        \"content_encoding\":[\"ISO-8859-1\"],\n        \"resourcename\":[\"/opt/solr/README.txt\"],\n        \"content_type\":[\"text/plain; charset=ISO-8859-1\"],\n        \"_version_\":1534201179174600704}]\n  }}\n\n\nPHP\u3067\u691c\u7d22\nPHP\u304b\u3089Solr\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001pecl\u306esolr\u62e1\u5f35\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nsolr_test.php\n<?php\n\n$client = new \\SolrClient([\n  'hostname' => 'localhost',\n  'path' => 'solr/main',\n  'port' => 8983\n]);\n\n$query = new \\SolrQuery('*:*');\n$response = $client->query($query);\n$result = $response->getResponse();\nvar_dump($result);\n\n\n#\u5fc5\u8981\u74b0\u5883\n - Linux\n - Docker\n\n#Solr\u306e\u8d77\u52d5\nDockerHub\u306e\u516c\u5f0f\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3044\u307e\u3059\u3002\nhttps://hub.docker.com/_/solr/\n\n\u8a2d\u5b9a\u306a\u3069\u306f\u30b3\u30f3\u30c6\u30ca\u5916\u3067\u7ba1\u7406\u3057\u305f\u3044\u306e\u3067\u3001-v\u3067\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u7528\u610f\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\nmkdir ~/solr-cores\ndocker run --name solr -d -p 8983:8983 -v ~/solr-cores:/var/solr/cores -t solr\ndocker exec -t -u root solr chown solr:solr /var/solr/cores\n```\n\n#\u30b3\u30a2\u306e\u4f5c\u6210\nDocker\u30b3\u30f3\u30c6\u30ca\u306b\u5165\u3063\u3066\u30b3\u30a2\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nbash\u3092\u8d77\u52d5\u3059\u308b\u3068solr\u30e6\u30fc\u30b6\u30fc\u3067/opt/server\u304c\u30ef\u30fc\u30ad\u30f3\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u306a\u3063\u305f\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\u3002\n\u8a2d\u5b9a\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8(server/solr/configsets/data_driven_schema_configs)\u3092\u30b3\u30d4\u30fc\u3057\u3066\u8a2d\u5b9a\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u306b\u30b3\u30a2\u3092\u4f5c\u6210\u3059\u308bAPI\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\ndocker exec -ti solr /bin/bash\ncp -R server/solr/configsets/data_driven_schema_configs /var/solr/cores/main\ncurl \"http://localhost:8983/solr/admin/cores?action=CREATE&name=main&instanceDir=/var/solr/cores/main\"\n```\n\n#\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u767b\u9332\n./bin/post\u30b3\u30de\u30f3\u30c9\u3067\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u767b\u9332\u3067\u304d\u307e\u3059\u3002\n\u8a66\u3057\u306b Solr \u306e README.txt \u3092\u767b\u9332\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n./bin/post -c main README.txt\n```\n\n#curl\u3067\u691c\u7d22\n\n```bash\ncurl \"http://localhost:8983/solr/main/select?indent=on&q=Software&wt=json\"\n\n{\n  \"responseHeader\":{\n    \"status\":0,\n    \"QTime\":0,\n    \"params\":{\n      \"q\":\"Software\",\n      \"indent\":\"on\",\n      \"wt\":\"json\"}},\n  \"response\":{\"numFound\":1,\"start\":0,\"docs\":[\n      {\n        \"id\":\"/opt/solr/README.txt\",\n        \"stream_size\":[7242],\n        \"x_parsed_by\":[\"org.apache.tika.parser.DefaultParser\",\n          \"org.apache.tika.parser.txt.TXTParser\"],\n        \"stream_content_type\":[\"text/plain\"],\n        \"content_encoding\":[\"ISO-8859-1\"],\n        \"resourcename\":[\"/opt/solr/README.txt\"],\n        \"content_type\":[\"text/plain; charset=ISO-8859-1\"],\n        \"_version_\":1534201179174600704}]\n  }}\n```\n\n#PHP\u3067\u691c\u7d22\nPHP\u304b\u3089Solr\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001pecl\u306esolr\u62e1\u5f35\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```php:solr_test.php\n<?php\n\n$client = new \\SolrClient([\n  'hostname' => 'localhost',\n  'path' => 'solr/main',\n  'port' => 8983\n]);\n\n$query = new \\SolrQuery('*:*');\n$response = $client->query($query);\n$result = $response->getResponse();\nvar_dump($result);\n```\n"}