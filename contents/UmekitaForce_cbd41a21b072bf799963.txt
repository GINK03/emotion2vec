{"context": " More than 1 year has passed since last update.\n\n\u30c7\u30fc\u30bf\u3092\u767b\u9332\u3057\u3066\u307f\u3088\u3046\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u5165\u529b\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3044\u3001\u554f\u984c\u306a\u3051\u308c\u3070Apex\u3092\u30b3\u30fc\u30eb\u3057Lead\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n\u753b\u9762\u30a4\u30e1\u30fc\u30b8\n\n\n\u30bd\u30fc\u30b9\n\nApex\n\u30e2\u30b8\u30e5\u30fc\u30eb6\u306eApex\u30af\u30e9\u30b9(LeadController.cls)\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nLeadController.cls\n    @AuraEnabled\n    public static Lead create(Lead ld) {\n        insert ld;\n        return ld;\n    }\n\n\n\nComponent\n\nm07_Validation.cmp\n<aura:component controller=\"LeadController\" implements=\"force:appHostable\">\n\n    <h3>\u30ea\u30fc\u30c9\u767b\u9332</h3>\n\n    <aura:attribute name=\"lead\" type=\"Lead\" default=\"{ 'sobjectType': 'Lead', 'LastName': '', 'Company': '' }\"/>\n\n    <form>\n        <ui:inputText aura:id=\"company\" label=\"\u4f1a\u793e\u540d\" value=\"{!v.lead.Company}\" required=\"true\"/>\n        <ui:inputText aura:id=\"lastname\" label=\"\u59d3\" value=\"{!v.lead.LastName}\" required=\"true\"/>\n        <ui:button label=\"\u767b\u9332\" press=\"{!c.createLead}\"/>\n    </form>\n\n</aura:component>\n\n\n\nm07_ValidationController.js\n({\n    createLead: function(component, event, helper) {\n\n        var isValid = true;\n        var company = component.find(\"company\");\n        var lastName = component.find(\"lastname\");\n\n        // \u30a8\u30e9\u30fc\u30af\u30ea\u30a2\n        company.setValid(\"v.value\", true);\n        lastName.setValid(\"v.value\", true);\n\n        if ($A.util.isEmpty(company.get(\"v.value\"))) {\n            // \u30a8\u30e9\u30fc\u30bb\u30c3\u30c8\n            company.setValid(\"v.value\", false);\n            company.addErrors(\"v.value\", [{message:\"\u4f1a\u793e\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\"}]);\n            isValid = false;\n        }\n        if ($A.util.isEmpty(lastName.get(\"v.value\"))) {\n            // \u30a8\u30e9\u30fc\u30bb\u30c3\u30c8\n            lastName.setValid(\"v.value\", false);\n            lastName.addErrors(\"v.value\", [{message:\"\u59d3\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\"}]);\n            isValid = false;\n        }\n\n        if (isValid) {\n            var lead = component.get(\"v.lead\");\n            var action = component.get(\"c.create\");\n            action.setParams({\n                \"ld\": lead\n            });\n\n            action.setCallback(this, function(a){\n                // Salesforce1\u30a4\u30d9\u30f3\u30c8\u767a\u706b\uff08\u30c8\u30fc\u30b9\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u8868\u793a\uff09\n                var toastEvent = $A.get(\"e.force:showToast\");\n                if (action.getState() === 'SUCCESS') {\n                    toastEvent.setParams({\n                        \"title\": \"Success\",\n                        \"message\": \"\u6b63\u5e38\u306b\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\"\n                    });\n                    company.set(\"v.value\", \"\");\n                    lastName.set(\"v.value\", \"\");\n                } else {\n                    toastEvent.setParams({\n                        \"title\": \"Error\",\n                        \"message\": \"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\"\n                    });\n                }\n                toastEvent.fire();\n            });\n\n            $A.enqueueAction(action);\n        }\n    },\n})\n\n\n\n\u30dd\u30a4\u30f3\u30c8\n\n\u5165\u529b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u3055\u307e\u3056\u307e\u306a\u5165\u529b\u30a4\u30d9\u30f3\u30c8\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3001\u30e6\u30fc\u30b6\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u30a4\u30d9\u30f3\u30c8\u306e\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u304c\u7c21\u7565\u5316\u3055\u308c\u307e\u3059\u3002\n\n\u9805\u76ee\u306e\u691c\u8a3c\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30e9\u30fc\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\uff08ui:inputDefaultError\uff09\u3092\u4f7f\u7528\u3057\u3066\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nsetValid(true)\u3067\u30a8\u30e9\u30fc\u30af\u30ea\u30a2\u3057\u307e\u3059\u3002\n\nSalesforce1\u30a4\u30d9\u30f3\u30c8\ne.force:showToast\n\n\u30c8\u30fc\u30b9\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308bSalesforce1\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u3092\u884c\u3044\u307e\u3059\u3002\n\nAura\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n$A.util.isEmpty\n\n\n\u88dc\u8db3\n\nP86 \u5165\u529b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u6982\u8981\nP167 \u9805\u76ee\u306e\u691c\u8a3c\nP135 Salesforce1\u30a4\u30d9\u30f3\u30c8\nP156 JavaScript\u3067\u306e\u5c5e\u6027\u5024\u306e\u64cd\u4f5c\u3001$A.util.isEmpty\n\n\n \u30e2\u30b8\u30e5\u30fc\u30eb6\u3078 | \u30e2\u30b8\u30e5\u30fc\u30eb8\u3078 \n\n# \u30c7\u30fc\u30bf\u3092\u767b\u9332\u3057\u3066\u307f\u3088\u3046\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u5165\u529b\u30c1\u30a7\u30c3\u30af\u3092\u884c\u3044\u3001\u554f\u984c\u306a\u3051\u308c\u3070Apex\u3092\u30b3\u30fc\u30eb\u3057Lead\u3092\u767b\u9332\u3057\u307e\u3059\u3002\n\n## \u753b\u9762\u30a4\u30e1\u30fc\u30b8\n\n<img src=\"https://qiita-image-store.s3.amazonaws.com/0/86505/f562f019-a578-fcba-31ce-f22dd448905e.png\" width=\"50%\"/>\n\n## \u30bd\u30fc\u30b9\n\n### Apex\n\u30e2\u30b8\u30e5\u30fc\u30eb6\u306eApex\u30af\u30e9\u30b9(LeadController.cls)\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```java:LeadController.cls\n    @AuraEnabled\n    public static Lead create(Lead ld) {\n        insert ld;\n        return ld;\n    }\n```\n\n### Component\n```xml:m07_Validation.cmp\n<aura:component controller=\"LeadController\" implements=\"force:appHostable\">\n\n    <h3>\u30ea\u30fc\u30c9\u767b\u9332</h3>\n\n    <aura:attribute name=\"lead\" type=\"Lead\" default=\"{ 'sobjectType': 'Lead', 'LastName': '', 'Company': '' }\"/>\n\n    <form>\n        <ui:inputText aura:id=\"company\" label=\"\u4f1a\u793e\u540d\" value=\"{!v.lead.Company}\" required=\"true\"/>\n        <ui:inputText aura:id=\"lastname\" label=\"\u59d3\" value=\"{!v.lead.LastName}\" required=\"true\"/>\n        <ui:button label=\"\u767b\u9332\" press=\"{!c.createLead}\"/>\n    </form>\n\n</aura:component>\n```\n\n```javascript:m07_ValidationController.js\n({\n    createLead: function(component, event, helper) {\n\n        var isValid = true;\n        var company = component.find(\"company\");\n        var lastName = component.find(\"lastname\");\n\n        // \u30a8\u30e9\u30fc\u30af\u30ea\u30a2\n        company.setValid(\"v.value\", true);\n        lastName.setValid(\"v.value\", true);\n\n        if ($A.util.isEmpty(company.get(\"v.value\"))) {\n            // \u30a8\u30e9\u30fc\u30bb\u30c3\u30c8\n            company.setValid(\"v.value\", false);\n            company.addErrors(\"v.value\", [{message:\"\u4f1a\u793e\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\"}]);\n            isValid = false;\n        }\n        if ($A.util.isEmpty(lastName.get(\"v.value\"))) {\n            // \u30a8\u30e9\u30fc\u30bb\u30c3\u30c8\n            lastName.setValid(\"v.value\", false);\n            lastName.addErrors(\"v.value\", [{message:\"\u59d3\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\"}]);\n            isValid = false;\n        }\n\n        if (isValid) {\n            var lead = component.get(\"v.lead\");\n            var action = component.get(\"c.create\");\n            action.setParams({\n                \"ld\": lead\n            });\n\n            action.setCallback(this, function(a){\n                // Salesforce1\u30a4\u30d9\u30f3\u30c8\u767a\u706b\uff08\u30c8\u30fc\u30b9\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u8868\u793a\uff09\n                var toastEvent = $A.get(\"e.force:showToast\");\n                if (action.getState() === 'SUCCESS') {\n                    toastEvent.setParams({\n                        \"title\": \"Success\",\n                        \"message\": \"\u6b63\u5e38\u306b\u767b\u9332\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\"\n                    });\n                    company.set(\"v.value\", \"\");\n                    lastName.set(\"v.value\", \"\");\n                } else {\n                    toastEvent.setParams({\n                        \"title\": \"Error\",\n                        \"message\": \"\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\"\n                    });\n                }\n                toastEvent.fire();\n            });\n\n            $A.enqueueAction(action);\n        }\n    },\n})\n```\n\n## \u30dd\u30a4\u30f3\u30c8\n\n### \u5165\u529b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\u3055\u307e\u3056\u307e\u306a\u5165\u529b\u30a4\u30d9\u30f3\u30c8\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3001\u30e6\u30fc\u30b6\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u30a4\u30d9\u30f3\u30c8\u306e\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u304c\u7c21\u7565\u5316\u3055\u308c\u307e\u3059\u3002\n\n### \u9805\u76ee\u306e\u691c\u8a3c\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30e9\u30fc\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\uff08ui:inputDefaultError\uff09\u3092\u4f7f\u7528\u3057\u3066\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\nsetValid(true)\u3067\u30a8\u30e9\u30fc\u30af\u30ea\u30a2\u3057\u307e\u3059\u3002\n\n### Salesforce1\u30a4\u30d9\u30f3\u30c8\n\n```\ne.force:showToast\n```\n\n\u30c8\u30fc\u30b9\u30c8\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8868\u793a\u3059\u308bSalesforce1\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u3092\u884c\u3044\u307e\u3059\u3002\n\n### Aura\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\n```\n$A.util.isEmpty\n```\n\n## \u88dc\u8db3\n\n* P86 \u5165\u529b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u6982\u8981\n* P167 \u9805\u76ee\u306e\u691c\u8a3c\n* P135 Salesforce1\u30a4\u30d9\u30f3\u30c8\n* P156 JavaScript\u3067\u306e\u5c5e\u6027\u5024\u306e\u64cd\u4f5c\u3001$A.util.isEmpty\n\n---\n\n:arrow_backward: [\u30e2\u30b8\u30e5\u30fc\u30eb6\u3078](http://qiita.com/UmekitaForce/private/81734b74809ab876754c \"\u30e2\u30b8\u30e5\u30fc\u30eb6\") | [\u30e2\u30b8\u30e5\u30fc\u30eb8\u3078](http://qiita.com/UmekitaForce/private/049b9fbd0ad82617ad32 \"\u30e2\u30b8\u30e5\u30fc\u30eb8\") :arrow_forward:\n", "tags": ["Salesforce", "Aura"]}