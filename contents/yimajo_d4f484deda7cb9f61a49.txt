{"tags": ["Ruby2.1", "Rails4", "grape0.6.1"], "context": " More than 1 year has passed since last update.Ruby on Rails\u3067API\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u5b9f\u88c5\u304c\u697d\u306b\u306a\u308bgrape\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\ngrape\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f0.6.1\u3002\n\nRails\u306bgrape\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ngem\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nGemfile\u306b\ngem 'grape'\n\n\u3068\u8ffd\u8a18\u3057\u3066\n$ bundle install\n\n\nAPI\u30af\u30e9\u30b9\u306e\u8aad\u307f\u8fbc\u307f\n\u3042\u3068\u3067\u4f5c\u6210\u3059\u308bAPI\u30af\u30e9\u30b9\u306e\u305f\u3081\u306b\u8aad\u307f\u8fbc\u307f\u3092\u8a2d\u5b9a\u3059\u308b\u3002config/application.rb\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\nconfig.paths.add File.join('app', 'api'), glob: File.join('**', '*.rb')\nconfig.autoload_paths += Dir[Rails.root.join('app', 'api', '*')]\n\n\u4f8b\nmodule Sample\n  class Application < Rails::Application\n\n    config.paths.add File.join('app', 'api'), glob: File.join('**', '*.rb')\n    config.autoload_paths += Dir[Rails.root.join('app', 'api', '*')]\n\n  end\nend\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\nconfig/routes.rb\u3067\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\nmount API => '/'\n\n\u4f8b\nSample::Application.routes.draw do\n  mount API => '/'\nend\n\n\nAPI\u30af\u30e9\u30b9\u306e\u8a2d\u7f6e\napp/api\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u305d\u306e\u4e0b\u306bapi.rb\u3092\u8a2d\u7f6e\u3002\nclass API < Grape::API\n  prefix 'api'\n  version 'v1', using: :path\n  format :json\n\n  helpers do\n    def dummy_name\n      \"dummy\"\n    end\n    def err401\n      error!('401 Unauthorized', 401) \n    end\n  end\n\n  resource :room do\n\n    get :status do\n      \"room is good\"\n    end\n\n    get :secret do\n      err401\n    end\n  end\nend\n\n\nAPI\u30a2\u30af\u30bb\u30b9\u3059\u308bURL\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\nhttp://localhost/:3000/api/v1/room/status\nhttp://localhost/:3000/<#\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9#>/<#\u30d0\u30fc\u30b8\u30e7\u30f3#>/<#\u30ea\u30bd\u30fc\u30b9#>/<#\u30e1\u30bd\u30c3\u30c9#>?<#\u30d1\u30e9\u30e1\u30fc\u30bf#>\n\n\u305d\u306e\u4ed6\nrake route\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3088\u304f\u3042\u308bController\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3068\u306f\u9055\u3046\u3053\u3068\u306b\u6ce8\u610f\u3002\u3053\u308c\u3067\u554f\u984c\u306a\u3044\u3002\n$ rake routes\nPrefix Verb URI Pattern Controller#Action\napi  / API\n\n\n\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\nhelpers\u3067\u884c\u3046\u3002\u4f8b\n  helpers do\n    def dummy_name\n      \"dummy\"\n    end\n    def err401\n      error!('401 Unauthorized', 401) \n    end\n  end\n\n\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\ndesc \"\u30c1\u30a7\u30c3\u30af\u30a4\u30f3\u7528\u306eAPI\"\nparams do\n  requires :twitter_name, type: String, desc: \"TwitterName\"\nend\npost 'checkin/' do\nend\n\n\n\u5fc5\u9808\nrequires <#\u30b7\u30f3\u30dc\u30eb#>\n\n\n\u30bf\u30a4\u30d7\u6307\u5b9a\nrequires <#\u30b7\u30f3\u30dc\u30eb#>, type: <#\u30af\u30e9\u30b9#>\n\n\nRuby on Rails\u3067API\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u5b9f\u88c5\u304c\u697d\u306b\u306a\u308bgrape\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\ngrape\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f0.6.1\u3002\n\n# Rails\u306bgrape\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n## gem\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nGemfile\u306b\n\n```\ngem 'grape'\n```\n\u3068\u8ffd\u8a18\u3057\u3066\n\n```\n$ bundle install\n```\n\n## API\u30af\u30e9\u30b9\u306e\u8aad\u307f\u8fbc\u307f\n\n\u3042\u3068\u3067\u4f5c\u6210\u3059\u308bAPI\u30af\u30e9\u30b9\u306e\u305f\u3081\u306b\u8aad\u307f\u8fbc\u307f\u3092\u8a2d\u5b9a\u3059\u308b\u3002config/application.rb\u306b\u4e0b\u8a18\u3092\u8ffd\u52a0\n\n```\nconfig.paths.add File.join('app', 'api'), glob: File.join('**', '*.rb')\nconfig.autoload_paths += Dir[Rails.root.join('app', 'api', '*')]\n```\n\n\u4f8b\n\n```ruby\nmodule Sample\n  class Application < Rails::Application\n\n    config.paths.add File.join('app', 'api'), glob: File.join('**', '*.rb')\n    config.autoload_paths += Dir[Rails.root.join('app', 'api', '*')]\n\n  end\nend\n```\n\n## \u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\n\nconfig/routes.rb\u3067\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\n\n```\nmount API => '/'\n```\n\n\u4f8b\n\n```\nSample::Application.routes.draw do\n  mount API => '/'\nend\n```\n\n## API\u30af\u30e9\u30b9\u306e\u8a2d\u7f6e\n\napp/api\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u305d\u306e\u4e0b\u306bapi.rb\u3092\u8a2d\u7f6e\u3002\n\n```ruby\nclass API < Grape::API\n  prefix 'api'\n  version 'v1', using: :path\n  format :json\n\n  helpers do\n    def dummy_name\n      \"dummy\"\n    end\n    def err401\n      error!('401 Unauthorized', 401) \n    end\n  end\n\n  resource :room do\n\n    get :status do\n      \"room is good\"\n    end\n\n    get :secret do\n      err401\n    end\n  end\nend\n\n```\n\nAPI\u30a2\u30af\u30bb\u30b9\u3059\u308bURL\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\nhttp://localhost/:3000/api/v1/room/status\n\nhttp://localhost/:3000/<#\u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9#>/<#\u30d0\u30fc\u30b8\u30e7\u30f3#>/<#\u30ea\u30bd\u30fc\u30b9#>/<#\u30e1\u30bd\u30c3\u30c9#>?<#\u30d1\u30e9\u30e1\u30fc\u30bf#>\n\n\n## \u305d\u306e\u4ed6\n\nrake route\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3088\u304f\u3042\u308bController\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3068\u306f\u9055\u3046\u3053\u3068\u306b\u6ce8\u610f\u3002\u3053\u308c\u3067\u554f\u984c\u306a\u3044\u3002\n\n```\n$ rake routes\nPrefix Verb URI Pattern Controller#Action\napi  / API\n```\n\n# \u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30e1\u30bd\u30c3\u30c9\n\nhelpers\u3067\u884c\u3046\u3002\u4f8b\n\n```ruby\n  helpers do\n    def dummy_name\n      \"dummy\"\n    end\n    def err401\n      error!('401 Unauthorized', 401) \n    end\n  end\n```\n\n\n# \u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\n\n```\ndesc \"\u30c1\u30a7\u30c3\u30af\u30a4\u30f3\u7528\u306eAPI\"\nparams do\n  requires :twitter_name, type: String, desc: \"TwitterName\"\nend\npost 'checkin/' do\nend\n```\n\n## \u5fc5\u9808\n\n```ruby\nrequires <#\u30b7\u30f3\u30dc\u30eb#>\n```\n\n## \u30bf\u30a4\u30d7\u6307\u5b9a\n\n```ruby\nrequires <#\u30b7\u30f3\u30dc\u30eb#>, type: <#\u30af\u30e9\u30b9#>\n```\n\n\n"}