{"context": "\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/wgWKzv\nconst stage = new createjs.Stage(\"myCanvas\");\nconst WIDTH = window.innerWidth;\nconst HEIGHT = window.innerHeight;\nstage.canvas.width = WIDTH;\nstage.canvas.height = HEIGHT;\n\n// \u521d\u671f\u8a2d\u5b9a\nstage.mouseX = stage.canvas.width / 2;\nstage.mouseY = stage.canvas.height / 3;\n\nlet particles = [];\nlet count = 0;\n\nconst SIZE = 10;\nconst AMOUNT = 5; // 1FPS\u3067\u751f\u6210\u3059\u308b\u91cf\nconst DECIMATION = 1; // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u9593\u5f15\u304f\u91cf\nconst MAX_LIFE = 50; // \u5bff\u547d\nconst SCALE_LIFE_FLAG = true; // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u30b5\u30a4\u30ba\u3092\u5bff\u547d\u306b\u4f9d\u5b58\u3055\u305b\u308b\u304b\nconst COLOR_CHANGE_SPEED = 1.0; // \u8272\u304c\u5909\u308f\u308b\u30b9\u30d4\u30fc\u30c9\nconst COMPOSITE_OPERATION = \"lighter\"; // http://jsdoc.hotcom-web.com/wordpress/archives/209\nconst FRICTION = 0.96; // \u6469\u64e6\nconst BIAS_X = 0.5; // 0:\u53f3\u306b\u91cd\u307f\u4ed8\u3051 1:\u5de6\u306b\u91cd\u307f\u4ed8\u3051\nconst BIAS_Y = 0.5; // 0:\u4e0b\u306b\u91cd\u307f\u4ed8\u3051 1:\u4e0a\u306b\u91cd\u307f\u4ed8\u3051\nconst RANGE_X = 10 || WIDTH; // x\u8ef8\u4e0a\u306e\u98db\u8ddd\u96e2\nconst RANGE_Y = 10 || HEIGHT; // y\u8ef8\u4e0a\u306e\u98db\u8ddd\u96e2\nconst GRAVITY = 0; // +:\u91cd\u529b\u4e0b -:\u91cd\u529b\u4e0a\nconst REBOUND_FLAG = true; // \u7aef\u3067\u8df3\u306d\u8fd4\u308a\u3059\u308b\u304b\u3069\u3046\u304b\n\n// \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u5168\u4f53\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\uff08\u8ecc\u9053\u4e0a\uff09\nconst ANIMATION_FLAG = true;\nconst RADIUS = WIDTH/2;\nconst SPEED_X = 0.5;\nconst SPEED_Y = 0.5;\nconst T_FUNC_X = \"cos\";\nconst T_FUNC_Y = \"sin\";\n\n/* ======================================\n * \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u767a\u751f\n * ====================================== */\nfunction emitParticles() {\n  for (let i = 0; i < AMOUNT; i++) {\n    count += 1;\n    const particle = new createjs.Shape();\n    particle.graphics\n            .beginFill(createjs.Graphics.getHSL(count * COLOR_CHANGE_SPEED, 50, 50))\n            .drawCircle(0, 0, SIZE * Math.random() );\n    if (count % DECIMATION !== 0) particle.alpha = 0;\n    stage.addChild(particle);\n    particle.compositeOperation = COMPOSITE_OPERATION;\n\n    // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u767a\u751f\u5834\u6240\n    particle.x = stage.mouseX;\n    particle.y = stage.mouseY;\n\n    // \u901f\u5ea6\n    particle.vx = RANGE_X * (Math.random() - BIAS_X);\n    particle.vy = RANGE_Y * (Math.random() - BIAS_Y);\n\n    particle.life = MAX_LIFE;\n\n    particles.push(particle);\n  }\n}\n\n/* ======================================\n * \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u66f4\u65b0\n * ====================================== */\nfunction updateParticles() {\n  for (let i = 0; i < particles.length; i++) {\n    const particle = particles[i];\n\n    // \u91cd\u529b\n    particle.vy += GRAVITY;\n\n    // \u6469\u64e6\n    particle.vx *= FRICTION;\n    particle.vy *= FRICTION;\n\n    // \u901f\u5ea6\u3092\u4f4d\u7f6e\u306b\u9069\u7528\n    particle.x += particle.vx;\n    particle.y += particle.vy;\n\n    // \u8df3\u306d\u8fd4\u308a\u51e6\u7406\n    if (REBOUND_FLAG) {\n      // \u4e0b\n      if (particle.y > stage.canvas.height) {\n        particle.y = stage.canvas.height; // \u884c\u304d\u904e\u304e\u88dc\u6b63\n        particle.vy *= -1; // Y\u8ef8\u306e\u901f\u5ea6\u3092\u53cd\u8ee2\n      }\n      // \u4e0a\n      if (particle.y < 0) {\n        particle.y = 0;\n        particle.vy *= -1;\n      }\n      // \u5de6\n      if(particle.x < 0){\n        particle.x = 0;\n        particle.vx *= -1;\n      }\n      // \u53f3\n      if (particle.x > WIDTH) {\n        particle.x = WIDTH;\n        particle.vx *= -1;\n      }\n    }\n\n    // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u30b5\u30a4\u30ba\u3092\u5bff\u547d\u306b\u4f9d\u5b58\n    const scale = (SCALE_LIFE_FLAG) ? particle.life / MAX_LIFE : 1.0;\n    particle.scaleX = particle.scaleY = scale;\n\n    particle.life -= 1;\n\n    // \u6b7b\n    if (particle.life <= 0) {\n      stage.removeChild(particle);\n      particles.splice(i, 1);\n    }\n  }\n}\n\n/* ======================================\n * \u6642\u9593\u51e6\u7406\n * ====================================== */\ncreatejs.Ticker.addEventListener(\"tick\", handleTick);\nfunction handleTick() {\n  emitParticles();\n  updateParticles();\n  stage.update();\n\n  if (ANIMATION_FLAG) {\n    animateParticle({\n      radius: RADIUS,\n      speedX: SPEED_X, speedY: SPEED_Y,\n      tFuncX: T_FUNC_X, tFuncY: T_FUNC_Y,\n    });\n  };\n}\ncreatejs.Ticker.timingMode = createjs.Ticker.RAF;\n\n\n/* ======================================\n * \u8ecc\u9053\u4e0a\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\n * ====================================== */\nfunction animateParticle({radius = 100, speedX = 0.1, speedY = 0.1, tFuncX, tFuncY}) {\n  let radX, radY;\n  radX = (count * Math.PI / 180) * speedX;\n  radY = (count * Math.PI / 180) * speedY;\n\n  let triFuncX, triFuncY;\n  switch (tFuncX) {\n    case \"sin\": triFuncX = Math.sin(radX); break;\n    case \"cos\": triFuncX = Math.cos(radX); break;\n    case \"tan\": triFuncX = Math.tan(radX); break;\n  }\n  switch (tFuncY) {\n    case \"sin\": triFuncY = Math.sin(radY); break;\n    case \"cos\": triFuncY = Math.cos(radY); break;\n    case \"tan\": triFuncY = Math.tan(radY); break;\n  }\n\n  stage.mouseX = triFuncX * radius + WIDTH/2;\n  stage.mouseY = triFuncY * radius + HEIGHT/2;\n}\n\n\n\u53c2\u8003\nhttps://ics.media/tutorial-createjs/particle.html\n\n\n\u30c7\u30e2\uff1ahttp://codepen.io/mo4_9/pen/wgWKzv\n\n```javascript\nconst stage = new createjs.Stage(\"myCanvas\");\nconst WIDTH = window.innerWidth;\nconst HEIGHT = window.innerHeight;\nstage.canvas.width = WIDTH;\nstage.canvas.height = HEIGHT;\n\n// \u521d\u671f\u8a2d\u5b9a\nstage.mouseX = stage.canvas.width / 2;\nstage.mouseY = stage.canvas.height / 3;\n\nlet particles = [];\nlet count = 0;\n\nconst SIZE = 10;\nconst AMOUNT = 5; // 1FPS\u3067\u751f\u6210\u3059\u308b\u91cf\nconst DECIMATION = 1; // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u9593\u5f15\u304f\u91cf\nconst MAX_LIFE = 50; // \u5bff\u547d\nconst SCALE_LIFE_FLAG = true; // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u30b5\u30a4\u30ba\u3092\u5bff\u547d\u306b\u4f9d\u5b58\u3055\u305b\u308b\u304b\nconst COLOR_CHANGE_SPEED = 1.0; // \u8272\u304c\u5909\u308f\u308b\u30b9\u30d4\u30fc\u30c9\nconst COMPOSITE_OPERATION = \"lighter\"; // http://jsdoc.hotcom-web.com/wordpress/archives/209\nconst FRICTION = 0.96; // \u6469\u64e6\nconst BIAS_X = 0.5; // 0:\u53f3\u306b\u91cd\u307f\u4ed8\u3051 1:\u5de6\u306b\u91cd\u307f\u4ed8\u3051\nconst BIAS_Y = 0.5; // 0:\u4e0b\u306b\u91cd\u307f\u4ed8\u3051 1:\u4e0a\u306b\u91cd\u307f\u4ed8\u3051\nconst RANGE_X = 10 || WIDTH; // x\u8ef8\u4e0a\u306e\u98db\u8ddd\u96e2\nconst RANGE_Y = 10 || HEIGHT; // y\u8ef8\u4e0a\u306e\u98db\u8ddd\u96e2\nconst GRAVITY = 0; // +:\u91cd\u529b\u4e0b -:\u91cd\u529b\u4e0a\nconst REBOUND_FLAG = true; // \u7aef\u3067\u8df3\u306d\u8fd4\u308a\u3059\u308b\u304b\u3069\u3046\u304b\n\n// \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u5168\u4f53\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\uff08\u8ecc\u9053\u4e0a\uff09\nconst ANIMATION_FLAG = true;\nconst RADIUS = WIDTH/2;\nconst SPEED_X = 0.5;\nconst SPEED_Y = 0.5;\nconst T_FUNC_X = \"cos\";\nconst T_FUNC_Y = \"sin\";\n\n/* ======================================\n * \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u767a\u751f\n * ====================================== */\nfunction emitParticles() {\n  for (let i = 0; i < AMOUNT; i++) {\n    count += 1;\n    const particle = new createjs.Shape();\n    particle.graphics\n            .beginFill(createjs.Graphics.getHSL(count * COLOR_CHANGE_SPEED, 50, 50))\n            .drawCircle(0, 0, SIZE * Math.random() );\n    if (count % DECIMATION !== 0) particle.alpha = 0;\n    stage.addChild(particle);\n    particle.compositeOperation = COMPOSITE_OPERATION;\n\n    // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u767a\u751f\u5834\u6240\n    particle.x = stage.mouseX;\n    particle.y = stage.mouseY;\n\n    // \u901f\u5ea6\n    particle.vx = RANGE_X * (Math.random() - BIAS_X);\n    particle.vy = RANGE_Y * (Math.random() - BIAS_Y);\n\n    particle.life = MAX_LIFE;\n\n    particles.push(particle);\n  }\n}\n\n/* ======================================\n * \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u66f4\u65b0\n * ====================================== */\nfunction updateParticles() {\n  for (let i = 0; i < particles.length; i++) {\n    const particle = particles[i];\n\n    // \u91cd\u529b\n    particle.vy += GRAVITY;\n\n    // \u6469\u64e6\n    particle.vx *= FRICTION;\n    particle.vy *= FRICTION;\n\n    // \u901f\u5ea6\u3092\u4f4d\u7f6e\u306b\u9069\u7528\n    particle.x += particle.vx;\n    particle.y += particle.vy;\n\n    // \u8df3\u306d\u8fd4\u308a\u51e6\u7406\n    if (REBOUND_FLAG) {\n      // \u4e0b\n      if (particle.y > stage.canvas.height) {\n        particle.y = stage.canvas.height; // \u884c\u304d\u904e\u304e\u88dc\u6b63\n        particle.vy *= -1; // Y\u8ef8\u306e\u901f\u5ea6\u3092\u53cd\u8ee2\n      }\n      // \u4e0a\n      if (particle.y < 0) {\n        particle.y = 0;\n        particle.vy *= -1;\n      }\n      // \u5de6\n      if(particle.x < 0){\n        particle.x = 0;\n        particle.vx *= -1;\n      }\n      // \u53f3\n      if (particle.x > WIDTH) {\n        particle.x = WIDTH;\n        particle.vx *= -1;\n      }\n    }\n\n    // \u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u30b5\u30a4\u30ba\u3092\u5bff\u547d\u306b\u4f9d\u5b58\n    const scale = (SCALE_LIFE_FLAG) ? particle.life / MAX_LIFE : 1.0;\n    particle.scaleX = particle.scaleY = scale;\n\n    particle.life -= 1;\n\n    // \u6b7b\n    if (particle.life <= 0) {\n      stage.removeChild(particle);\n      particles.splice(i, 1);\n    }\n  }\n}\n\n/* ======================================\n * \u6642\u9593\u51e6\u7406\n * ====================================== */\ncreatejs.Ticker.addEventListener(\"tick\", handleTick);\nfunction handleTick() {\n  emitParticles();\n  updateParticles();\n  stage.update();\n\n  if (ANIMATION_FLAG) {\n    animateParticle({\n      radius: RADIUS,\n      speedX: SPEED_X, speedY: SPEED_Y,\n      tFuncX: T_FUNC_X, tFuncY: T_FUNC_Y,\n    });\n  };\n}\ncreatejs.Ticker.timingMode = createjs.Ticker.RAF;\n\n\n/* ======================================\n * \u8ecc\u9053\u4e0a\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\n * ====================================== */\nfunction animateParticle({radius = 100, speedX = 0.1, speedY = 0.1, tFuncX, tFuncY}) {\n  let radX, radY;\n  radX = (count * Math.PI / 180) * speedX;\n  radY = (count * Math.PI / 180) * speedY;\n\n  let triFuncX, triFuncY;\n  switch (tFuncX) {\n    case \"sin\": triFuncX = Math.sin(radX); break;\n    case \"cos\": triFuncX = Math.cos(radX); break;\n    case \"tan\": triFuncX = Math.tan(radX); break;\n  }\n  switch (tFuncY) {\n    case \"sin\": triFuncY = Math.sin(radY); break;\n    case \"cos\": triFuncY = Math.cos(radY); break;\n    case \"tan\": triFuncY = Math.tan(radY); break;\n  }\n\n  stage.mouseX = triFuncX * radius + WIDTH/2;\n  stage.mouseY = triFuncY * radius + HEIGHT/2;\n}\n```\n\n> \u53c2\u8003\nhttps://ics.media/tutorial-createjs/particle.html\n", "tags": ["JavaScript", "CreateJS"]}