{"tags": ["Lua", "C", "C++", "\u30af\u30ed\u30fc\u30b8\u30e3"], "context": "\n\nC/C++ \u8a00\u8a9e\u30d7\u30ed\u30b0\u30e9\u30de\u306e\u305f\u3081\u306e Lua \u5165\u9580\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\n\u3053\u308c\u306f\u3001C/C++ \u8a00\u8a9e\u306e\u30d7\u30ed\u30b0\u30e9\u30de\u304c\u3053\u308c\u3060\u3051\u8aad\u3081\u3070 Lua \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u554f\u984c\u306a\u304f\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\u3092\u76ee\u7684\u306b\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002\nLua \u304b\u3089 C \u8a00\u8a9e\u306e\u547c\u3073\u51fa\u3057\u3001 C \u8a00\u8a9e\u304b\u3089 Lua \u306e\u547c\u3073\u51fa\u3057\u306b\u3064\u3044\u3066\u306f\u6b21\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nhttp://qiita.com/dwarfJP/items/ae116b404be0b09255ff \nLua 5.2, 5.3 \u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u964d\u306e\u8a18\u8f09\u306b\u3064\u3044\u3066\n\n \u7279\u306b\u660e\u8a18\u3057\u306a\u3044\u9650\u308a\u3001C \u8a00\u8a9e\u3068\u8a18\u8f09\u3057\u305f\u5834\u5408\u306f C/C++ \u8a00\u8a9e\u306e\u4e21\u65b9\u3092\u610f\u5473\u3057\u307e\u3059\u3002\n\n \u7279\u306b Lua \u3084 C \u7b49\u306e\u8a00\u8a9e\u3092\u660e\u8a18\u3057\u306a\u3044\u9650\u308a\u3001Lua \u306e\u4ed5\u69d8\u306e\u8aac\u660e\u3067\u3059\u3002\n\n\n\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u6b21\u306e\u60c5\u5831\u3092\u5143\u306b\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002Lua \u3067\u5229\u7528\u3067\u304d\u308b\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a73\u7d30\u306f\u3001\u6b21\u306e\u516c\u5f0f URL \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n http://www.lua.org/manual/5.3/manual.html\n\n http://milkpot.sakura.ne.jp/lua/lua53_manual_ja.html\n\n\nLua \u306b\u3088\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u7d99\u627f\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n http://www.geocities.jp/m_hiroi/light/lua06.html\n\n\n\u307e\u305a C \u8a00\u8a9e\u3068\u306e\u5dee\u5206\u6982\u8981\u3092\u307e\u3068\u3081\u308b\u3068\u6b21\u306e\u3082\u306e\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u5b9f\u969b\u306b\u306f\u3082\u3063\u3068\u591a\u304f\u306e\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\n  Native \u3067\u306f\u306a\u304f Lua VM \u4e0a\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002 (JIT \u304c\u52d5\u4f5c\u3059\u308b\u5b9f\u88c5\u3082\u3042\u308a\u307e\u3059)\n  \u30b3\u30f3\u30d1\u30a4\u30eb\u4e0d\u8981\u3067\u3059\u3002(\u4e8b\u524d\u306b\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u5316\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059)\n  \u6570\u5024\u306f\u5b9f\u6570\u304c\u57fa\u672c\u3067\u3059\u3002(\u6574\u6570\u306e\u30d3\u30c3\u30c8\u6f14\u7b97\u3082\u53ef\u80fd\u3067\u3059)\n  \u6587\u306e\u533a\u5207\u308a\u8a18\u53f7\u306f ; \u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 ( ; \u3082\u4f7f\u3048\u307e\u3059 )\n  main \u95a2\u6570\u306f\u4e0d\u8981\u3067\u3059\u3002\n  \u30dd\u30a4\u30f3\u30bf\u578b\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n  \u30d0\u30a4\u30c8\u914d\u5217\u306f\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u3044\u307e\u3059\u3002\n  \u914d\u5217\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f 1 \u304b\u3089\u3067\u3059\u3002\n  \u9023\u60f3\u914d\u5217\u3092\u6301\u3061\u307e\u3059\u3002\n  \u69cb\u9020\u4f53\u3001\u5171\u7528\u4f53\u306f\u3042\u308a\u307e\u305b\u3093\u3002(\u30c6\u30fc\u30d6\u30eb\u3092\u69cb\u9020\u4f53\u3068\u4f3c\u305f\u3088\u3046\u306a\u4f7f\u3044\u65b9\u304c\u3067\u304d\u307e\u3059)\n  \u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3(GC)\u3092\u642d\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n  \u623b\u308a\u5024\u306b\u8907\u6570\u306e\u5024\u3092\u8fd4\u305b\u307e\u3059\u3002\n  \u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n  typedef \u306f\u3042\u308a\u307e\u305b\u3093\u3002\n  #define \u7b49\u306e\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n  \u8a00\u8a9e\u4ed5\u69d8\u5185\u306b\u30c7\u30d0\u30c3\u30b0\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u6301\u3061\u307e\u3059\u3002\n\n\nLua \u306e\u5b9f\u884c\nLua \u306f\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4e00\u65e6 Lua VM \u7528\u306e\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u306b\u5909\u63db\u3057\u3066\u304b\u3089 Lua VM \u4e0a\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u3078\u306e\u5909\u63db\u51e6\u7406\u306f Lua \u306e\u5185\u90e8\u7684\u306b\u884c\u306a\u308f\u308c\u308b\u305f\u3081\u3001\u30e6\u30fc\u30b6\u304c\u610f\u8b58\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\nC \u306e\u69d8\u306a\u30b3\u30f3\u30d1\u30a4\u30eb/\u30ea\u30f3\u30af\u4f5c\u696d\u306f\u4e0d\u8981\u3067\u3059\u3002\n\u306a\u304a\u3001VM \u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u305f\u3081 Native \u3088\u308a\u3082\u5b9f\u884c\u901f\u5ea6\u306f\u9045\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\nLua \u306f\u3001\u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u53c2\u7167\u3055\u308c\u306a\u304f\u306a\u3063\u305f\u5024\u306f\u3001\u81ea\u52d5\u7684\u306b\u89e3\u653e\u3055\u308c\u307e\u3059\u3002\nC \u306e\u69d8\u306b\u3001\u30e1\u30e2\u30ea\u306e\u89e3\u653e\u3092\u610f\u8b58\u3057\u3066\u884c\u306a\u3046\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u305f\u3060\u3057\u3001\u4e0d\u8981\u306b\u306a\u3063\u305f\u5024\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u3068\u89e3\u653e\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u4e0d\u8981\u306b\u306a\u3063\u305f\u5024\u306f\u53c2\u7167\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u4e0d\u8981\u306b\u306a\u3063\u305f\u5024\u306f\u3001\u305d\u306e\u5024\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570\u306b nil \u3092\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u53c2\u7167\u3092\u7121\u304f\u305b\u307e\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3067\u3042\u308c\u3070\u3001\u660e\u793a\u7684\u306b nil \u3092\u4ee3\u5165\u3057\u306a\u304f\u3068\u3082\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304c\u89e3\u653e\u3055\u308c\u308b\u3053\u3068\u3067\u3082\u540c\u3058\u3067\u3059\u3002\n\u306a\u304a\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u89e3\u653e\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001\u305d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u53c2\u7167\u3055\u308c\u306a\u304f\u306a\u3063\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\nmain \u95a2\u6570\nLua \u306b\u306f\u3001\u591a\u304f\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3068\u540c\u69d8\u306b main \u95a2\u6570\u3068\u3044\u3046\u3082\u306e\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5b9f\u884c\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u304b\u3089\u9806\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n\u30b3\u30e1\u30f3\u30c8\n-- \u4ee5\u964d\u306f\u30b3\u30e1\u30f3\u30c8\u306b\u306a\u308a\u307e\u3059\u3002 C \u306e // \u3068\u540c\u3058\u6271\u3044\u3067\u3059\u3002\u8907\u6570\u884c\u3092\u30b3\u30e1\u30f3\u30c8\u306b\u3059\u308b\u5834\u5408\u306f\u3001 --[[]] \u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002C \u306e /* */ \u3068\u4f3c\u305f\u6271\u3044\u3067\u3059\u3002\n-- \u3053\u3053\u4ee5\u964d\u306f\u30b3\u30e1\u30f3\u30c8\n-- [[\u3053\u3053\u306f\n\u30b3\u30e1\u30f3\u30c8]]\n\n[[]] \u306f\u3001\u5f8c\u8ff0\u3059\u308b\u6587\u5b57\u5217\u3068\u540c\u3058\u3067 [=[ ]=] \u306e\u30d1\u30bf\u30fc\u30f3\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u6587\u5b57\u5217\u4e2d\u306e\u30b3\u30e1\u30f3\u30c8\u958b\u59cb\u3001\u7d42\u4e86\u6587\u5b57\u306f\u3001\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\n\n\u30bb\u30df\u30b3\u30ed\u30f3(;)\n\u30bb\u30df\u30b3\u30ed\u30f3(;) \u306e\u610f\u5473\u304c Lua \u3068 C \u3067\u7570\u306a\u308a\u307e\u3059\u3002C \u3067\u306f\u6587\u306e\u533a\u5207\u308a\u3068\u3057\u3066\u30bb\u30df\u30b3\u30ed\u30f3(;)\u3092\u4f7f\u7528\u3057\u307e\u3059\u304c\u3001Lua \u306f\u30bb\u30df\u30b3\u30ed\u30f3(;)\u305d\u306e\u3082\u306e\u304c\u300c\u4f55\u3082\u3057\u306a\u3044\u300d\u6587\u3092\u793a\u3059\u3010\u7a7a\u6587\u3011\u3068\u306a\u308a\u307e\u3059\u3002\nC \u3068\u540c\u3058\u611f\u899a\u3067\u30bb\u30df\u30b3\u30ed\u30f3(;)\u3092\u4f7f\u7528\u3057\u3066\u3082\u7279\u306b\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u7121\u95c7\u306b\u5229\u7528\u3059\u308b\u306e\u306f\u63a7\u3048\u307e\u3057\u3087\u3046\u3002\n\n\u5024\nLua \u3067\u306f\u3001\u6b21\u306e\u5024\u3092\u6271\u3048\u307e\u3059\u3002\n\n  nil\n  \u30d6\u30fc\u30ea\u30a2\u30f3\n  \u6570\u5024\n  \u6587\u5b57\u5217\n  \u95a2\u6570\n  \u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\n  \u30b9\u30ec\u30c3\u30c9\n  \u30c6\u30fc\u30d6\u30eb\n\n\nnil\nnil \u306f\u4ed6\u306e\u3069\u306e\u5024\u3068\u3082\u7570\u306a\u308b\u7279\u6b8a\u306a\u5024\u3067\u3059\u3002\nC \u3067\u4f8b\u3048\u308b\u306a\u3089 NULL \u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002C \u306e NULL \u3068\u7570\u306a\u308b\u306e\u306f\u3001NULL \u306f\u578b\u304c\u30dd\u30a4\u30f3\u30bf\u3067\u3042\u308a\u3001\u5024\u304c NULL \u3067\u3042\u308b\u306e\u306b\u5bfe\u3057\u3001nil \u306f\u578b\u304c nil \u3067\u3042\u308a\u3001\u5024\u3082 nil \u3067\u3042\u308b\u3053\u3068\u3067\u3059\u3002\n\n\u30d6\u30fc\u30ea\u30a2\u30f3\ntrue, false \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001\u8ad6\u7406\u6f14\u7b97\u306e\u7d50\u679c\u304c true \u304b false \u3060\u3051\u3092\u8fd4\u3059\u8a33\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u8a73\u3057\u304f\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002\n\n\u6570\u5024\n\u6570\u5024\u306f\u5168\u3066\u7b26\u53f7\u4ed8\u304d\u5b9f\u6570\u3067\u3059(Lua \u306e\u74b0\u5883\u306b\u3088\u3063\u3066\u6574\u6570\u306e\u5834\u5408\u3082\u3042\u308b)\u3002C \u3067\u306f char, short, int, long \u306a\u3069\u306e\u30d0\u30a4\u30c8\u9577\u306e\u9055\u3044\u3084\u3001signed, unsigned \u306e\u7b26\u53f7\u306e\u6709\u7121\u306e\u9055\u3044\u304c\u3042\u308a\u307e\u3059\u304c\u3001Lua \u3067\u306f\u7b26\u53f7\u4ed8\u304d\u5b9f\u6570\u306e\u307f\u3067\u3059\u3002\n\u5b9f\u6570\u3067\u3059\u304c\u3001\u6574\u6570\u30d3\u30c3\u30c8\u6f14\u7b97\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\u30ea\u30c6\u30e9\u30eb\u306f\u3001\u6b21\u306e\u3088\u3046\u306b 10 \u9032\u6570\u3068 16 \u9032\u6570\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n  3\n  345\n  0xff\n  0xBEBADA\n\n\u307e\u305f\u3001\u5b9f\u6570\u306f\u6b21\u306e\u3088\u3046\u306a\u6307\u5b9a\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n  3.0\n  3.1416\n  314.16e-2\n  0.31416E1\n  34e1\n  0x0.1E\n  0xA23p-4\n  0X1.921FB54442D18P+1\n\n\n\u6587\u5b57\u5217\nLua \u306e\u6587\u5b57\u5217\u306f\u3001C \u3068\u306f\u7570\u306a\u308a '\\0' \u3067\u7d42\u7aef\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u306a\u305c\u306a\u3089\u3070\u3001Lua \u306e\u6587\u5b57\u5217\u306f\u5168\u3066\u306e\u30d0\u30a4\u30ca\u30ea\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3067\u304d\u308b\u305f\u3081\u3067\u3059\u3002\n\u7d42\u7aef\u6587\u5b57\u304c\u3042\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u7d42\u7aef\u6587\u5b57\u3092\u8907\u6570\u6301\u3066\u306a\u3044\u3053\u3068\u3068\u540c\u7fa9\u3002\n'\\0' \u3067\u7d42\u7aef\u3055\u308c\u3066\u3044\u306a\u3044\u4ee3\u308f\u308a\u306b\u3001\u6587\u5b57\u5217\u30c7\u30fc\u30bf\u305d\u306e\u3082\u306e\u304c\u30b5\u30a4\u30ba\u60c5\u5831\u3092\u4fdd\u6301\u3057\u3066\u3044\u307e\u3059\u3002\u30b5\u30a4\u30ba\u60c5\u5831\u306b\u306f # \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070 #\"123\" \u306f 3 \u306b\u306a\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001Lua \u306e\u6587\u5b57\u5217\u306b\u306f\u6587\u5b57\u30b3\u30fc\u30c9\u306e\u6982\u5ff5\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5358\u306a\u308b\u30d0\u30a4\u30c8\u5217\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002Lua \u306e\u6587\u5b57\u5217\u306f\u3001\u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30c8(1\u6587\u5b571\u30d0\u30a4\u30c8)\u6587\u5b57\u30b3\u30fc\u30c9\u3068\u3057\u3066\u52d5\u4f5c\u3057\u307e\u3059\u3002\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306b\u306f\u660e\u8a18\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001Lua \u306e\u6587\u5b57\u5217\u64cd\u4f5c\u95a2\u6570\u306f C \u8a00\u8a9e\u306e is???? \u95a2\u6570\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30ed\u30b1\u30fc\u30eb\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002\n\u6587\u5b57\u5217\u306f ' \u304b \" \u3067\u56f2\u307f\u307e\u3059\u3002' \u3067\u56f2\u3080\u5834\u5408 \" \u3092\u6587\u5b57\u5217\u4e2d\u306b\u542b\u3081\u3089\u308c\u307e\u3059\u3002\" \u3067\u56f2\u3080\u5834\u5408 ' \u3092\u6587\u5b57\u5217\u4e2d\u306b\u542b\u3081\u3089\u308c\u307e\u3059\u3002\n\u6587\u5b57\u5217\u4e2d\u306b\u306f \\xXX(X\u306f 16\u9032\u6570) \u3084 \\ddd(X\u306f 10\u9032\u6570)\u3067\u30010\u301c255\u307e\u3067\u306e\u4efb\u610f\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u3055\u3089\u306b \\u{XXX}(X \u306f1\u6841\u4ee5\u4e0a\u306e16\u9032\u6570) \u3067\u3001\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u6587\u5b57\u5217\u4e2d\u306b\u6539\u884c\u3092\u542b\u307e\u305b\u308b\u306b\u306f\u3001\u6b21\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n  \\n \u3092\u5229\u7528\u3059\u308b\n  \\ \u306e\u76f4\u5f8c\u306b\u6539\u884c\u3059\u308b\n [[]] \u3092\u5229\u7528\u3059\u308b\n\n[[]] \u306f [=[]=] [==[]==] [===[]===] \u306e\u3088\u3046\u306b = \u3092\u5165\u308c\u3089\u308c\u307e\u3059\u3002\n[[]] \u3067\u56f2\u307e\u308c\u305f\u6587\u5b57\u5217\u306f \\n \u7b49\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u306f\u305d\u306e\u307e\u307e\u306e\u6587\u5b57\u5217\u3068\u306a\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001 [[]] \u306e [[ \u76f4\u5f8c\u306b\u3042\u308b\u6539\u884c\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\nstr = '\"abc\"' -- \"abc\"\nstr = \"'abc'\" -- 'abc'\nstr = [[\n\"'abc'\"\n]] -- \"'abc'\"\\n\nstr = [=[[[abc]]]=] -- [[abc]]\n\n\u6587\u5b57\u5217 str \u306e N \u756a\u76ee\u306e\u6587\u5b57\u3092\u53d6\u5f97\u3059\u308b\u5834\u5408\u306f\u3001string.byte( str, N ) \u3067\u3059\u3002\n.. \u3067\u6587\u5b57\u5217\u3092\u9023\u7d50\u3067\u304d\u307e\u3059\u3002\n\"abc\" .. \"def\" \u306f \"abcdef\" \u3067\u3059\u3002\n\n\u95a2\u6570\nLua \u306f\u95a2\u6570\u81ea\u4f53\u3092\u5024\u3068\u3057\u3066\u6271\u3048\u307e\u3059\u3002\u305f\u3060\u3057\u3001C \u306e\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u306e\u3088\u3046\u306b\u4ed6\u306e\u578b\u3078\u306e\u578b\u5909\u63db\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u95a2\u6570\u306f\u3042\u304f\u307e\u3067\u95a2\u6570\u3067\u3059\u3002\n\n\u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\nLua \u306f\u3001\u4e3b\u306b C \u8a00\u8a9e\u3092\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u3057\u3066\u7d44\u8fbc\u3080\u3053\u3068\u3092\u60f3\u5b9a\u3057\u305f\u8a00\u8a9e\u3067\u3059\u3002\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u9023\u643a\u3057\u3066\u52d5\u4f5c\u3059\u308b\u5834\u5408\u3001\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30c7\u30fc\u30bf\u3092 Lua \u306e\u5024\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u306a\u3044\u3001\u3042\u308b\u3044\u306f\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u305f\u3081\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u5927\u304d\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u3088\u3046\u306a\u5834\u5408\u306b\u3001\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30c7\u30fc\u30bf\u3092 \u30e6\u30fc\u30b6\u30c7\u30fc\u30bf \u3068\u3057\u3066\u305d\u306e\u307e\u307e Lua \u306b\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u305f\u3060\u3057 Lua \u304b\u3089\u306f\u3001\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u306f\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u3068\u3057\u3066\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\n\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u306b\u4f55\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u76f4\u63a5 Lua \u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u30b9\u30ec\u30c3\u30c9\n\u3053\u3053\u3067\u30b9\u30ec\u30c3\u30c9\u3068\u306f pthread \u7b49\u3067\u6271\u3046 OS \u306e thread \u3067\u306f\u306a\u304f\u3001Lua \u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u6307\u3057\u307e\u3059\u3002\n\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u3001\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u3067\u51e6\u7406\u3092\u5207\u308a\u66ff\u3048\u308b\u6982\u5ff5\u3067\u3059\u3002\n\u306a\u304a Lua \u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u8907\u6570\u4f5c\u3063\u3066\u3082\u3001OS \u306e 1 \u3064\u306e thread \u4e0a\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\n\u30c6\u30fc\u30d6\u30eb\u306f\u3001\u914d\u5217\u3068 STL \u306e map \u304c\u4e00\u7dd2\u306b\u306a\u3063\u305f\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3067\u3059\u3002\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001nil \u4ee5\u5916\u306e\u5168\u3066\u306e\u578b\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\n\u30c6\u30fc\u30d6\u30eb\u306f\u3001\u6b21\u306e\u3088\u3046\u306b {} \u3067\u56f2\u307f\u307e\u3059\u3002\ntblA = { \"1\", \"2\", \"3\", 4, [5] = 5 }\n-- tblA[1] == \"1\"; tblA[2] == \"2\"; tblA[3] == \"3\"; tblA[4] == 4; tblA[5] == 5;\n\n\u4e0a\u8a18\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5834\u5408\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f 1 \u304b\u3089\u306b\u306a\u308a\u307e\u3059\u3002C \u8a00\u8a9e\u3067\u306f 0 \u304b\u3089\u306a\u306e\u3067\u3001\u6c17\u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u307e\u305f\u3001\u6b21\u306e\u3088\u3046\u306b\u6570\u5024\u4ee5\u5916\u306e\u30ad\u30fc\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ntblB = { foo = 1, bar = 2, [ \".hoge\" ] = 3 }\n-- tblB.foo == \"1\"; tblB.bar == \"2\"; tblB[\".hoge\"] == \"3\";\n\n\u30ad\u30fc\u306b\u306f nil(\u3068 NaN) \u4ee5\u5916\u306e\u5168\u3066\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\u6570\u5024\u4ee5\u5916\u306e\u30ad\u30fc\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001tblB.foo \u306e\u3088\u3046\u306b\u30ad\u30fc\u3092\u30b7\u30f3\u30dc\u30eb\u3068\u3057\u3066\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002tblB[ \"foo\" ] \u3068\u3057\u3066\u3082\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u3067\u3059\u3002\n\u30ad\u30fc\u304c . \u3084 = \u7b49\u306e\u6587\u5b57\u3092\u542b\u3093\u3067\u3044\u308b\u5834\u5408\u306f\u3001[ \".\" ] \u3084 [ \"=\" ]  \u306e\u3088\u3046\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\u306a\u304a\u3001\u30c6\u30fc\u30d6\u30eb\u3067\u4fdd\u6301\u3059\u308b\u30c7\u30fc\u30bf\u306e\u5168\u3066\u306e\u30ad\u30fc\u304c 1 \u304b\u3089\u9806\u306b 1 \u305a\u3064\u5897\u3048\u3066\u3044\u308b\u5834\u5408(\u81ea\u7136\u6570)\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u3092 \u30b7\u30fc\u30b1\u30f3\u30b9 \u3068\u547c\u3073\u307e\u3059\u3002\u6570\u5024\u4ee5\u5916\u306e\u30ad\u30fc\u3084\u3001\u6570\u5024\u3067\u3042\u3063\u3066\u3082 1 \u305a\u3064\u5897\u3048\u3066\u306a\u3044\u5834\u5408\u306f\u3001*\u30b7\u30fc\u30b1\u30f3\u30b9* \u3068\u306f\u8a00\u3044\u307e\u305b\u3093\u3002\n#table \u3067\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u8981\u7d20\u6570\u3092\u8fd4\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u8981\u7d20\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002\u30b7\u30fc\u30b1\u30f3\u30b9\u3067\u306a\u3044\u30c6\u30fc\u30d6\u30eb\u306e # \u306f\u8981\u7d20\u6570\u3092\u793a\u3057\u307e\u305b\u3093\u3002\n\u4efb\u610f\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u30b7\u30fc\u30b1\u30f3\u30b9\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\u3059\u308b\u65b9\u6cd5\u306f\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u4e0a\u8a18\u306e\u4f8b\u3067\u8a00\u3046\u3068\u3001#tblA \u306f 5 \u3092\u8fd4\u3057\u307e\u3059\u304c\u3001#tblB \u306f 3 \u306b\u306a\u308a\u307e\u305b\u3093\u3002\n\u5b58\u5728\u3057\u3066\u3044\u306a\u3044\u30ad\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001nil \u3092\u8fd4\u3057\u307e\u3059\u3002\n\u4e0a\u8a18\u306e\u4f8b\u3067\u306f\u3001 tblB.xyz \u306f nil \u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\u4e0a\u8a18\u306e\u69d8\u306b {} \u3092\u4f7f\u7528\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306e\u751f\u6210\u3092\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u8a00\u3044\u307e\u3059\u3002\n\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30bf\u30af\u30bf\u306b\u306f\u3001\u4e0a\u8a18\u3067\u8aac\u660e\u3057\u305f\u4ee5\u5916\u306b\u4e00\u3064\u5927\u304d\u306a\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\n\u305d\u306e\u7279\u5fb4\u3068\u306f\u3001\u6700\u7d42\u8981\u7d20\u304c\u30ad\u30fc\u3092\u6307\u5b9a\u3057\u306a\u3044\u5f0f\u3067\u3001\u305d\u306e\u5f0f\u306e\u7d50\u679c\u304c\u95a2\u6570\u547c\u3073\u51fa\u3057\u304b\u53ef\u5909\u9577\u5f15\u6570\u3067\u3042\u308b\u5834\u5408\u3001\u305d\u306e\u5f0f\u304c\u8fd4\u3059\u5168\u3066\u306e\u5024\u3092\u30c6\u30fc\u30d6\u30eb\u306b\u8ffd\u52a0\u3059\u308b\u3001\u3053\u3068\u3067\u3059\u3002\n\u306a\u304a\u3001\u3053\u308c\u306f\u6700\u7d42\u8981\u7d20\u306e\u5834\u5408\u306e\u307f\u6709\u52b9\u3067\u3059\u3002\n\u3053\u306e\u7279\u5fb4\u306f\u3001\u53ef\u5909\u9577\u5f15\u6570\u3092\u6301\u3064\u95a2\u6570\u3084\u3001\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\nlocal function func()\n  return 1, 2, 3\nend\n{ a, b, c, func() } -- { a, b, c, 1, 2, 3 }\n{ a, b, c, func(), d } -- { a, b, c, 1, d }\n{ a, b, c, func(), nil } -- { a, b, c, 1 }\n\n\n\u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\nC \u3067\u306f\u3042\u307e\u308a\u99b4\u67d3\u307f\u304c\u306a\u3044\u3067\u3059\u304c\u3001GC \u3092\u6301\u3064\u8a00\u8a9e\u3067\u306f\u5fc5\u9808\u3068\u3044\u3048\u308b\u6982\u5ff5\u3067\u3001\u901a\u5e38\u306e\u30c6\u30fc\u30d6\u30eb\u3068\u306e\u9055\u3044\u306f C++11 \u306e shared_ptr \u3068 weak_ptr \u306e\u9055\u3044\u3068\u540c\u3058\u3068\u601d\u3063\u3066\u826f\u3044\u3067\u3059\u3002\nLua \u306e\u901a\u5e38\u306e\u30c6\u30fc\u30d6\u30eb\u306f shared_ptr \u3068\u540c\u7b49\u3067\u3042\u308a\u3001\u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\u306f weak_ptr \u3068\u540c\u7b49\u3067\u3059\u3002\n\u4e0a\u8ff0\u3057\u305f\u901a\u308a Lua \u3067\u306f\u3044\u305a\u308c\u304b\u306e\u5909\u6570\u304b\u3089\u53c2\u7167\u3055\u308c\u3066\u3044\u308b\u5024\u306f\u3001\u305d\u306e\u53c2\u7167\u304c\u306a\u304f\u306a\u3089\u306a\u3044\u9650\u308a\u958b\u653e\u3055\u308c\u307e\u305b\u3093\u3002\u4e00\u65b9\u3001\u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u306e\u53c2\u7167\u306f\u3001\u305d\u306e\u5024\u306b\u5bfe\u3059\u308b\u53c2\u7167\u6570\u306b\u306f\u542b\u307e\u306a\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u6b21\u306e\u30bf\u30a4\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\n\n  \u30ad\u30fc\u304c\u5f31\u53c2\u7167\u306b\u306a\u308b\n  \u5024\u304c\u5f31\u53c2\u7167\u306b\u306a\u308b\n  \u30ad\u30fc\u3068\u5024\u304c\u5f31\u53c2\u7167\u306b\u306a\u308b\n\n\u3053\u308c\u3089\u306f\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u306e __mode \u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u3088\u3063\u3066\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n__mode \u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u5024\u306f\u6587\u5b57\u5217\u3067\u6307\u5b9a\u3057\u3001\u305d\u306e\u6587\u5b57\u5217\u306b 'k' \u304c\u542b\u307e\u308c\u3066\u3044\u308c\u3070\u30ad\u30fc\u304c\u5f31\u53c2\u7167\u306b\u306a\u308a\u3001'v' \u304c\u542b\u307e\u308c\u3066\u3044\u308c\u3070\u5024\u304c\u5f31\u53c2\u7167\u306b\u306a\u308a\u307e\u3059\u3002\n\u306a\u304a\u3001\u3042\u308b\u5024\u304c\u5f31\u53c2\u7167\u306e\u307f\u306b\u306a\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u5f31\u53c2\u7167\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u524a\u9664\u3055\u308c\u307e\u3059\u3002\n\n\u578b\u60c5\u5831\ntype( value ) \u3067\u3001\u5024 value \u306e\u578b\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n  \"nil\"\n  \"number\"\n  \"string\"\n  \"boolean\"\n  \"table\"\n  \"function\"\n  \"thread\"\n  \"userdata\"\n\n\n\u5909\u6570\nLua \u306e\u5909\u6570\u306f\u578b\u3092\u9650\u5b9a\u3057\u307e\u305b\u3093\u3002\u3069\u306e\u3088\u3046\u306a\u5024\u3067\u3082\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001C89 \u306e\u3088\u3046\u306b\u30d6\u30ed\u30c3\u30af\u306e\u5148\u982d\u306b\u66f8\u304f\u5fc5\u8981\u3082\u3042\u308a\u307e\u305b\u3093\u3002\n\u306a\u304a\u3001\u5024\u3092\u4ee3\u5165\u3059\u308b\u524d\u306e\u5909\u6570\u306e\u5024\u306f nil \u3068\u306a\u308a\u307e\u3059\u3002\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3068\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\n\u5909\u6570\u306b\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3068\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304c\u3042\u308a\u307e\u3059\u3002\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u5ba3\u8a00\u306f local \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002local \u3092\u4f7f\u7528\u3057\u306a\u3044\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u306a\u308a\u307e\u3059\u3002\nglobalA = 10       -- global \nlocal localA = 10  -- local\n\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u5ba3\u8a00\u306e\u6b21\u306e\u6587\u304b\u3089\u6709\u52b9\u3067\u3001\u30d6\u30ed\u30c3\u30af\u306e\u7d42\u7aef\u3067\u7d42\u308f\u308a\u307e\u3059\u3002\nvalue = 10               -- global value = 10\ndo\n  local value = value    -- local value = global valule(10)\n  value = value + 1      -- local value = 10 + 1 = 11\n  print( value )         -- local value: 11\nend\nprint( value )           -- global valule: 10\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306f\u3001 _ENV \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\nvalue = 10\nif value == _ENV.value then -- true\n  print( \"equals\" )\nend\n\nC \u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306e\u5229\u7528\u3092\u63a7\u3048\u308b\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001Lua \u3067\u3082\u7279\u306b\u7406\u7531\u304c\u306a\u3044\u9650\u308a\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u4f7f\u7528\u3059\u308b\u3079\u304d\u3067\u3059\u3002\n\n\u4ee3\u5165\u6587\nLua \u306e\u4ee3\u5165\u306f\u30011\u3064\u306e\u6587\u3067\u8907\u6570\u306e\u5024\u3092\u4ee3\u5165\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u6b21\u306e\u6587\u306f\u30013 \u3064\u306e\u5024\u3092\u4ee3\u5165\u3059\u308b\u540c\u3058\u51e6\u7406\u3067\u3059\u3002\nvalue1 = 1\nvalue2 = 2\nvalue3 = 3\n\nvalue1, value2, value3 = 1, 2, 3\n\n\u306a\u304a\u3001\u4ee3\u5165\u5148\u306e\u5909\u6570\u306b\u5bfe\u3057\u3066\u4ee3\u5165\u5143\u306e\u5024\u306e\u500b\u6570\u304c\u8db3\u308a\u306a\u3044\u5834\u5408\u3001\u8db3\u308a\u306a\u3044\u5206\u306f nil \u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002\u4ee3\u5165\u5143\u306e\u5024\u304c\u591a\u3044\u5834\u5408\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\n\u4ee3\u5165\u6587\u3067\u3082\u3001\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u3088\u3046\u306b\u6700\u7d42\u5f0f\u304c\u95a2\u6570\u547c\u3073\u51fa\u3057\u304b\u3001\u53ef\u5909\u9577\u5f0f\u306e\u5834\u5408\u306f\u3001\u305d\u306e\u5024\u5168\u3066\u304c\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\nlocal function func()\n  return 10, 20\nend\nvalue1, value2, value3 = 0, func() -- value1 = 0, value2 = 10, value2 = 20\n\n\u4ee3\u5165\u306f\u3001\u53f3\u8fba\u306e\u5168\u3066\u306e\u5024\u304c\u8a55\u4fa1\u3055\u308c\u3001\u305d\u306e\u5f8c\u305d\u308c\u305e\u308c\u306e\u5024\u304c\u5de6\u8fba\u306b\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001X, Y \u306e\u5024\u3092 swap \u3059\u308b\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nX,Y = Y,X\n\n\u306a\u304a\u3001Lua \u306e\u4ee3\u5165\u6587\u306f\u3001\u5024\u3092\u6301\u3061\u307e\u305b\u3093\u3002\u3088\u3063\u3066\u3001C \u306e\u69d8\u306a\u4ee3\u5165\u306f\u3067\u304d\u307e\u305b\u3093\u3002\nint value1 = value2 = 0;\n\n\n\u5236\u5fa1\u6587\nLua \u306b\u306f\u3001\u6b21\u306e\u5236\u5fa1\u6587\u304c\u3042\u308a\u307e\u3059\u3002\n\n  if\n  white\n  repeat\n  for\n\n\u305d\u308c\u305e\u308c\u306e\u6761\u4ef6\u5f0f\u306f\u3001false \u3068 nil \u304c\u507d\u3068\u6271\u308f\u308c\u3001\u305d\u308c\u4ee5\u5916\u304c\u771f\u3068\u306a\u308a\u307e\u3059\u3002\n\nif \u6587\nif exp then block {elseif exp then block} [ else block] end\nLua \u306e if \u306f\u4e0a\u8a18\u69cb\u6587\u3067\u3059\u3002\u3053\u3053\u3067 {} \u306f 0 \u4ee5\u4e0a\u6307\u5b9a\u53ef\u80fd\u306a\u30d6\u30ed\u30c3\u30af\u3092\u793a\u3057\u307e\u3059\u3002[] \u306f\u3001\u7701\u7565\u53ef\u80fd\u306a\u30d6\u30ed\u30c3\u30af\u3092\u793a\u3057\u307e\u3059\u3002\n\u6b21\u304c C \u3068\u306e\u5dee\u5206\u3067\u3059\u3002\n\n  \u6761\u4ef6\u5f0f\u306b () \u304c\u4e0d\u8981\n  \u5fc5\u305a end \u304c\u5fc5\u8981\n  else if \u3067\u306f\u306a\u304f elseif \u304c\u3042\u308b\n\n\nwhile \u6587\nwhile exp do block end\nLua \u306e while \u306f\u4e0a\u8a18\u69cb\u6587\u3067\u3059\u3002\n\u6b21\u304c C \u3068\u306e\u5dee\u5206\u3067\u3059\u3002\n\n  \u6761\u4ef6\u5f0f\u306b () \u304c\u4e0d\u8981\n  \u5fc5\u305a end \u304c\u5fc5\u8981\n\n\nrepeat \u6587\nrepeat block until exp\nLua \u306e repeat \u306f\u4e0a\u8a18\u69cb\u6587\u3067\u3059\u3002\nuntil \u306e exp \u304c\u771f\u306b\u306a\u308b\u307e\u3067\u3001block \u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001exp \u3067\u306f block \u3067\u5ba3\u8a00\u3057\u305f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\nfor \u6587\nfor \u6587\u306f 2 \u7a2e\u985e\u3042\u308a\u307e\u3059\u3002\n\nfor v = e1, e2 [, e3] do block end\n\n\u3053\u308c\u306f\u3001C \u306e for \u6587\u3068\u4f3c\u3066\u3044\u307e\u3059\u3002\nint v;\nfor ( v = e1; v <= e2; v += e3 ) {\n}\n\n\u3057\u304b\u3057\u3001\u6b21\u306e\u70b9\u3067\u5927\u304d\u304f\u7570\u306a\u308b\u305f\u3081 \u6ce8\u610f \u304c\u5fc5\u8981\u3067\u3059\u3002\n\n  e1, e2, e3 \u306f\u3001\u30eb\u30fc\u30d7\u958b\u59cb\u524d\u306e\u4e00\u5ea6\u3060\u3051\u8a55\u4fa1\u3055\u308c\u308b\n  e3 \u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f 1 \u304c\u4f7f\u7528\u3055\u308c\u308b\n  v \u306e\u30b9\u30b3\u30fc\u30d7\u306f for \u6587\u5185\u306e\u307f\n\n\nfor v in exp do block end\n\n\u3053\u308c\u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u305f\u30eb\u30fc\u30d7\u5236\u5fa1\u3067\u3059\u3002\nfor key, value in pairs( tbl ) do\n  print( key, value )\nend\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb tbl \u306e\u8981\u7d20\u3092\u5217\u6319\u3059\u308b\u3088\u3046\u306a\u5834\u5408\u306b\u5229\u7528\u3057\u307e\u3059\u3002\nexp \u306f\u3001\u6b21\u306e\u5024\u3092\u8fd4\u3059\u5f0f\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nlocal func, param, prev = exp\n\u3053\u3053\u3067 func \u306f\u3001\u6b21\u306e\u5024\u3092\u8fd4\u3059\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570\u3067\u3059\u3002\nlocal next1, next2, \u2026, nextn = func( param, prev )\n\u3053\u3053\u3067 next1 \u301c nextn \u306f\u3001\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570\u3067\u5217\u6319\u3059\u308b\u5024\u306e 1 \u96c6\u5408\u3067\u3059\u3002\u4e0a\u306e pairs \u306e\u4f8b\u3067\u306f\u3001 key, value \u304c\u305d\u308c\u306b\u3042\u305f\u308a\u307e\u3059\u3002n \u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570\u5074\u306b\u3088\u3063\u3066\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570 func \u306f\u3001prev \u304c nil \u306e\u5834\u5408\u306b\u5217\u6319\u3059\u308b\u5148\u982d\u306e\u5024\u306e\u96c6\u5408\u3092\u8fd4\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002for \u6587\u306f\u3001\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570 func \u304c\u8fd4\u3059 next1 \u304c nil \u306e\u5834\u5408\u3001\u30eb\u30fc\u30d7\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002\n\u4f8b\u3048\u3070 1, \"1\" : 2, \"2\" : \u301c : N, \"N\" \u3092\u5217\u6319\u3059\u308b\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\nlocal function ite( param, prev )\n   if prev == param then\n      return nil\n   end\n   if prev == nil then\n      prev = 0\n   end\n   local next = prev + 1\n   return next, string.format( \"%d\", next )\nend\n\nfor value1, value2  in ite, 10, nil do\n   print( string.format( '%d \"%s\"',  value1, value2 ) ) -- 1, \"1\" : 2, \"2\" : \u301c : 10, \"10\"\nend\n\n\npairs(), ipairs() \u95a2\u6570\npairs(), ipairs() \u95a2\u6570\u306f\u3001 for \u6587\u3067\u30c6\u30fc\u30d6\u30eb\u306e\u8981\u7d20\u3092\u5217\u6319\u3059\u308b\u305f\u3081\u306b\u5229\u7528\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\npairs() \u3068 ipairs() \u306e\u5dee\u5206\u3092\u6ce8\u610f\u3057\u3066\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n pairs() \u306f\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u5168\u8981\u7d20\u3092\u5217\u6319\u3059\u308b\u3002\n\n ipairs() \u306f\u3001\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u8981\u7d20\u306e\u307f\u3092\u5bfe\u8c61\u306b\u5217\u6319\u3059\u308b\u3002\n\n\n\nbreak \u6587\nLua \u306e break \u6587\u306f\u3001\u57fa\u672c\u7684\u306b C \u8a00\u8a9e\u3068\u4ee3\u308f\u308a\u307e\u305b\u3093\u3002\nbreak \u6587\u306f\u3001white, repeat, for \u6587\u306e\u30eb\u30fc\u30d7\u3092\u629c\u3051\u307e\u3059\u3002\n\u30eb\u30fc\u30d7\u304c\u5165\u308c\u5b50\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u6700\u3082\u5185\u5074\u306e\u30eb\u30fc\u30d7\u3092\u629c\u3051\u307e\u3059\u3002\n\ncontinue \u6587\nLua \u306b\u306f continue \u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\ngoto\nLua \u3067\u306f\u3001 goto \u3067\u6240\u5b9a\u306e\u30e9\u30d9\u30eb\u306b\u5206\u5c90\u3067\u304d\u307e\u3059\u3002\u3057\u304b\u3057\u3001 Lua \u306f goto \u3092\u4f7f\u7528\u305b\u305a\u3068\u3082\u7c21\u5358\u306b\u7570\u5e38\u7cfb\u3092\u8a18\u8f09\u3067\u304d\u308b\u306e\u3067goto \u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u6027\u306f\u304b\u306a\u308a\u4f4e\u3044\u3067\u3059\u3002\n\u4f8b\u3048\u3070 C \u8a00\u8a9e\u3067\u306f\u3001\u7570\u5e38\u7cfb\u3092\u6b21\u306e\u3088\u3046\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n{\n   int handle1 = openHandle( \"a\" );\n   int handle2 = openHandle( \"b\" );\n   if ( !func1( handle1, handle2 ) ) {\n      goto end\n   }\n   if ( !func2( handle1, handle2 ) ) {\n      goto end\n   }\n   if ( !func3( handle1, handle2 ) ) {\n      goto end\n   }\n   func4()\nend:\n   closeHandle( handle1 );\n   closeHandle( handle2 );\n}\n\n\u3053\u306e\u3088\u3046\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u3067\u3001\u6761\u4ef6\u6587\u6bce\u306b closeHandle() \u3068 return \u3092\u8a18\u8f09\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3001\u305d\u3082\u305d\u3082 if \u6587\u3092\u30cd\u30b9\u30c8\u3059\u308b\u3088\u3046\u306b\u66f8\u3051\u3070\u3001\u305d\u3093\u306a\u3053\u3068\u3092\u3059\u308b\u5fc5\u8981\u3082\u306a\u3044\u3068\u8a00\u3048\u307e\u3059\u304c\u3001\u305d\u306e\u5834\u5408\u30cd\u30b9\u30c8\u304c\u304b\u306a\u308a\u6df1\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u6df1\u3044\u30cd\u30b9\u30c8\u3068\u3001goto \u6587\u3069\u3061\u3089\u304c\u826f\u3044\u304b\u306f\u8b70\u8ad6\u306e\u5225\u308c\u308b\u3068\u3053\u308d\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u306f\u5225\u306e\u6a5f\u4f1a\u306b\u8b72\u308a\u307e\u3059\u3002\nLua \u3067\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306a\u5834\u5408\u3001goto \u3092\u4f7f\u3046\u3053\u3068\u306a\u304f\u6b21\u306e\u3088\u3046\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\ndo\n   local handle1 = openHandle( \"a\" )\n   local handle2 = openHandle( \"b\" )\n\n   pcall( function()\n             if not func1( handle1, handle2 ) then\n                return\n             end\n             if not func2( handle1, handle2 ) then\n                return\n             end\n             if not func3( handle1, handle2 ) then\n                return\n             end\n          end )\n   func4()\n\n   closeHandle( handle1 )\n   closeHandle( handle2 )\nend\n\nLua \u3067 goto \u6587\u3092\u4f7f\u3046\u7406\u7531\u304c\u3042\u308b\u3068\u3059\u308c\u3070\u3001C \u8a00\u8a9e\u3067 goto \u6587\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3055\u308c\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6a5f\u68b0\u7684\u306b Lua \u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u306e\u5b9f\u73fe\u3092\u3088\u308a\u7c21\u5358\u306b\u3059\u308b\u305f\u3081\u3001\u304f\u3089\u3044\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30d6\u30ed\u30c3\u30af\nC \u306e\u5236\u5fa1\u6587\u306f\u3001\u30d6\u30ed\u30c3\u30af\u6587\u3068\u3057\u3066\u5ba3\u8a00\u3057\u306a\u3044\u3068 1 \u6587\u3057\u304b\u51e6\u7406\u5bfe\u8c61\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001Lua \u306e\u5236\u5fa1\u6587\u306f\u5fc5\u305a\u30d6\u30ed\u30c3\u30af\u3092\u51e6\u7406\u5bfe\u8c61\u3068\u3057\u3001\u7d42\u7aef\u306b end \u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002\n\u3088\u3063\u3066\u3001C \u306e\u69d8\u306b\u660e\u793a\u7684\u306b\u30d6\u30ed\u30c3\u30af\u6587\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u6ec5\u591a\u306b\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u5236\u5fa1\u6587\u4ee5\u5916\u306e\u5834\u6240\u3067\u30d6\u30ed\u30c3\u30af\u6587\u3092\u660e\u793a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\ndo block end \n\u4e0a\u8a18\u306e\u3088\u3046\u306b do end \u3067\u56f2\u3093\u3060\u500b\u6240\u304c\u30d6\u30ed\u30c3\u30af\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u8ad6\u7406\u6f14\u7b97\n\u8ad6\u7406\u6f14\u7b97\u306f\u6b21\u306e 3 \u3064\u3067\u3059\u3002\n\n  not\n  or\n  and\n\n\u771f\u3001\u507d\u306e\u6271\u3044\u306f\u6761\u4ef6\u5f0f\u3068\u540c\u3058\u3067\u3001false \u3068 nil \u304c\u507d\u3067\u3001\u305d\u308c\u4ee5\u5916\u304c\u771f\u3067\u3059\u3002\n\nnot\nnot \u306f\u771f\u30fb\u507d\u3092\u53cd\u8ee2\u3057\u307e\u3059\u3002\nnot false -- true\nnot nil -- true\nnot true -- false\nnot 1 -- false\n\n\u7d50\u679c\u306f\u3001\u5fc5\u305a true \u304b false \u306b\u306a\u308a\u307e\u3059\u3002\n\nor\nor \u306f\u771f\u306b\u306a\u308b\u307e\u3067\u5024\u3092\u8a55\u4fa1\u3057\u307e\u3059\u3002or \u306e\u7d50\u679c\u306f\u3001\u771f\u306b\u306a\u308b\u307e\u3067\u6700\u7d42\u7684\u306b\u8a55\u4fa1\u3057\u305f\u5024\u3067\u3059\u3002\nnil or false or 1 -- 1\nnil or 2 or 3 -- 2\n4 or 5 -- 4\nnil or false -- false\n\n\nand\nand \u306f\u3001\u507d\u306b\u306a\u308b\u307e\u3067\u5024\u3092\u8a55\u4fa1\u3057\u307e\u3059\u3002and \u306e\u7d50\u679c\u306f\u3001\u507d\u306b\u306a\u308b\u307e\u3067\u6700\u7d42\u7684\u306b\u8a55\u4fa1\u3057\u305f\u5024\u3067\u3059\u3002\n1 and 2 and 3 and nil -- nil\n1 and 2 and 3 -- 3\n1 and false and 2 -- false\n\n\n\u95a2\u4fc2\u6f14\u7b97\n\u95a2\u4fc2\u6f14\u7b97\u306f\u6b21\u306e\u3082\u306e\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002~= \u4ee5\u5916\u306f C \u3068\u540c\u3058\u3067\u3059\u3002\n\n  ==\n\n\n  \u7b49\u3057\u3044\n\n\n  ~=\n\n\n  \u7b49\u3057\u304f\u306a\u3044\n\n\n\n<\n\n  \u3088\u308a\u5c0f\u3055\u3044\n\n\n\n>\n\n  \u3088\u308a\u5927\u304d\u3044\n\n\n\n<=\n\n  \u5c0f\u3055\u3044\u307e\u305f\u306f\u7b49\u3057\u3044\n\n\n\n>=\n\n  \u5927\u304d\u3044\u307e\u305f\u306f\u7b49\u3057\u3044\n\n\n\n\n\u7b97\u8853\u6f14\u7b97\n\u7b97\u8853\u6f14\u7b97\u306f\u6b21\u306e\u3082\u306e\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u9664\u7b97\u3068\u7d2f\u4e57\u4ee5\u5916\u306f C \u3068\u540c\u3058\u3067\u3059\u3002\n\n +\n\n  \u52a0\u7b97\n\n\n -\n\n  \u6e1b\u7b97\n\n\n *\n\n  \u4e57\u7b97\n\n\n /\n\n  \u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u9664\u7b97\n\n\n //\n\n  \u5207\u308a\u6368\u3066\u9664\u7b97 5.2 \u306f\u975e\u30b5\u30dd\u30fc\u30c8\n\n\n\n %\n\n  \u5270\u4f59\n\n\n ^\n\n  \u7d2f\u4e57\n\n\n -\n\n  \u5358\u9805\u30de\u30a4\u30ca\u30b9\n\n\n\n\n\u30d3\u30c3\u30c8\u6f14\u7b97\n\u30d3\u30c3\u30c8\u6f14\u7b97\u3092\u884c\u306a\u3046\u5834\u5408\u3001\u5024\u306f 32bit \u306e\u6574\u6570\u306b\u4e38\u3081\u3089\u308c\u3066\u304b\u3089\u6f14\u7b97\u304c\u884c\u306a\u308f\u308c\u307e\u3059\u3002\n\u307e\u305f\u3001Lua \u306e\u30d0\u30fc\u30b8\u30e7\u30f3 5.2 \u3068 5.3 \u3068\u3067\u3001\u30d3\u30c3\u30c8\u6f14\u7b97\u306e\u4ed5\u69d8\u304c\u5927\u304d\u304f\u4ee3\u308f\u308a\u307e\u3059\u3002\n\n  \u5229\u7528\u65b9\u6cd5\n\n\n  5.2 \u3067\u306f bit \u6f14\u7b97\u7528\u30d1\u30c3\u30b1\u30fc\u30b8 bit32 \u306e\u95a2\u6570\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n  5.3 \u3067\u306f C \u3068\u540c\u69d8\u306b bit \u6f14\u7b97\u7528\u306e\u6f14\u7b97\u5b50\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\n  \u53f3\u30b7\u30d5\u30c8\n\n\n  5.2 \u3067\u306f\u7b97\u8853\u30b7\u30d5\u30c8\u3067\u3059\u3002(\u6700\u4e0a\u4f4d\u30d3\u30c3\u30c8\u304c\u30b3\u30d4\u30fc\u3055\u308c\u308b)\n  5.3 \u3067\u306f\u8ad6\u7406\u30b7\u30d5\u30c8\u3067\u3059\u3002(\u6700\u4e0a\u4f4d\u30d3\u30c3\u30c8\u306b\u306f 0 \u304c\u5165\u308b)\n\n\n\n\n\u95a2\u6570\nC \u306e\u95a2\u6570\u306f\u3001\u5fc5\u305a\u540d\u524d(\u30b7\u30f3\u30dc\u30eb)\u304c\u7d10\u4ed8\u3044\u3066\u3044\u307e\u3059\u304c\u3001 \nLua \u306e\u95a2\u6570\u306f\u540d\u524d\u306b\u7d10\u4ed8\u3044\u3066\u3044\u308b\u3068\u306f\u9650\u308a\u307e\u305b\u3093\u3002\nC \u306e\u95a2\u6570\u306f\u3001\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u3092\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u578b\u306e\u5909\u6570\u306b\u4ee3\u5165\u3057\u3066\u3001\u305d\u306e\u5909\u6570\u304b\u3089\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001Lua \u306e\u5834\u5408\u306f\u3001\u57fa\u672c\u7684\u306b\u305d\u306e\u3088\u3046\u306a\u4f7f\u3044\u65b9\u306b\u306a\u308a\u307e\u3059\u3002\nLua \u306e\u95a2\u6570\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570\u306f\u3001\u5358\u306a\u308b\u5909\u6570\u306a\u306e\u3067\u5f8c\u304b\u3089\u5225\u306e\u5024(\u95a2\u6570)\u3092\u4ee3\u5165\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u3082\u3061\u308d\u3093\u95a2\u6570\u3067\u306a\u3044\u5024\u3092\u4ee3\u5165\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\u307e\u305f\u3001\u5909\u6570\u306a\u306e\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u3068 local \u304c\u3042\u308a\u307e\u3059\u3002\n\n\u5b9a\u7fa9\n\u6b21\u306e\u5b9a\u7fa9\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n  name = function( args ) block end\n\n local name; name = function( args ) block end\n\n\n1 \u756a\u76ee\u304c\u30b0\u30ed\u30fc\u30d0\u30eb\u95a2\u6570\u3067\u3001 2 \u756a\u76ee\u304c\u30ed\u30fc\u30ab\u30eb\u95a2\u6570\u3067\u3059\u3002name \u304c\u95a2\u6570\u540d\u3001args \u306f\u5f15\u6570\u3001block \u306f\u95a2\u6570\u306e\u51e6\u7406\u3067\u3059\u3002args \u306f 0 \u500b\u4ee5\u4e0a\u306e\u5909\u6570\u3067\u3059\u3002\u307e\u305f\u3001args \u306f\u95a2\u6570\u5185\u304c\u30b9\u30b3\u30fc\u30d7\u306b\u306a\u308b\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3068\u306a\u308a\u307e\u3059\u3002\nfunction() end \u304c\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u5f0f\u3067\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002local \u306e\u5834\u5408\u3001\u5909\u6570\u306b\u4ee3\u5165\u3059\u308b\u524d\u306b local \u5909\u6570\u306e\u5ba3\u8a00\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u518d\u5e30\u547c\u3073\u51fa\u3057\u3092\u884c\u306a\u3046\u969b\u306b\u3001\u305d\u306e\u95a2\u6570\u81ea\u8eab\u3092\u547c\u3076\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\u306a\u304a\u3001\u95a2\u6570\u5b9a\u7fa9\u306f\u6b21\u306e\u3088\u3046\u306b\u3082\u66f8\u3051\u307e\u3059\u3002\n\n function name ( args ) block end\n\n  local function name ( args ) block end\n\n\n\u3053\u308c\u306f\u4e0a\u8a18\u3068\u5168\u304f\u540c\u3058\u610f\u5473\u3092\u6301\u3061\u307e\u3059\u3002\n\u7279\u306b\u7406\u7531\u304c\u306a\u3044\u9650\u308a\u3001\u95a2\u6570\u5b9a\u7fa9\u306f\u5f8c\u8005\u306e\u66f8\u5f0f\u3067\u66f8\u3044\u305f\u65b9\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u95a2\u6570\u547c\u3073\u51fa\u3057\n\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b () \u3092\u4ed8\u3051\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u95a2\u6570\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002() \u306b\u306f\u3001\u5f15\u6570\u3092\u4e0e\u3048\u307e\u3059\u3002\nlocal function func( value )\n  return value + 1\nend\nprint( \"value = \", func( 1 ) ) -- 2\nprint( \"value = \", (function(value) return value + 2 end)(1) ) -- 3\n\n\u4e0a\u8a18 5 \u884c\u76ee\u306e\u3088\u3046\u306b\u3001 function() body end \u3067\u53d6\u5f97\u3057\u305f\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u76f4\u63a5 () \u3092\u4ed8\u3051\u3066\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\u4e0e\u3048\u305f\u5f15\u6570\u3068\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u5b9a\u7fa9\u3057\u305f\u5f15\u6570\u306b\u9055\u3044\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u4ee3\u5165\u6587\u3067\u8aac\u660e\u3057\u305f\u901a\u308a\u8db3\u308a\u306a\u3044\u5834\u5408\u306f nil \u3092\u8a2d\u5b9a\u3001\u591a\u3044\u5834\u5408\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306a\u52d5\u4f5c\u306b\u306a\u308b\u305f\u3081\u3001C++ \u306e\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u306e\u6982\u5ff5\u306f Lua \u306b\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u53ef\u5909\u9577\u5f15\u6570\nC \u306e printf \u306e\u3088\u3046\u306b\u3001\u53ef\u5909\u9577\u306e\u5f15\u6570\u3092\u6301\u3064\u95a2\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nfunction( \u2026 )\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5f15\u6570\u306e\u5ba3\u8a00\u90e8\u306b \u2026 \u3092\u8a18\u8f09\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u3053\u306f\u53ef\u5909\u9577\u5f15\u6570\u306b\u306a\u308a\u307e\u3059\u3002\n\u53ef\u5909\u9577\u5f15\u6570\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u305d\u306e\u307e\u307e \u2026 \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u4e0e\u3048\u3089\u308c\u305f\u5f15\u6570\u3092\u8868\u73fe\u3067\u304d\u307e\u3059\u3002\nlocal function log( ... )\n  if enableLogFlag then\n    print( ... )\n  end\nend\nlog( \"test\", \"hoge\" )\n\nreturn \u2026 \u3067\u3001\u53ef\u5909\u9577\u5f15\u6570\u3092\u305d\u306e\u307e\u307e\u8fd4\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u2026 \u306b\u4f55\u304c\u4e0e\u3048\u3089\u308c\u3066\u3044\u308b\u306e\u304b\u3092\u8abf\u3079\u305f\u3044\u5834\u5408\u306f\u3001{\u2026} \u3067\u3001\u305d\u306e\u53ef\u5909\u9577\u5f15\u6570\u3092\u8981\u7d20\u306b\u6301\u3064\u30c6\u30fc\u30d6\u30eb\u3092\u751f\u6210\u3067\u304d\u308b\u306e\u3067\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u306f\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3059\u308b\u901a\u5e38\u306e\u64cd\u4f5c\u3092\u884c\u306a\u3048\u307e\u3059\u3002\n\u306a\u304a\u3001\u3053\u308c\u306f\u4e0a\u8a18\u306e\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u8aac\u660e\u3057\u305f\u901a\u308a\u6700\u7d42\u8981\u7d20\u306e\u307f\u306e\u7279\u5fb4\u3067\u3042\u308b\u305f\u3081\u3001\u6b21\u306e\u5834\u5408\u306f\u53ef\u5909\u9577\u5f15\u6570\u306e\u5148\u982d\u8981\u7d20\u3060\u3051\u3092\u6301\u3064\u30c6\u30fc\u30d6\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n{\u2026,nil}\nlocal function log( ... )\n  local val1 = {...}\n  print( val1[1], val1[2] ) -- \"test\" \"hoge\"\n  local val2 = {...,nil}\n  print( val2[1], val2[2] ) -- \"test\" nil\nend\nlog( \"test\", \"hoge\" )\n\n\nreturn\n\u95a2\u6570\u3092\u7d42\u4e86\u3057\u3001\u623b\u308a\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u95a2\u6570\u306e\u623b\u308a\u5024\u3082\u8907\u6570\u500b\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nlocal function func()\n  return 1, 2, 3\nend\nlocal val1, val2, val3 = func() -- val1 = 1, val2 = 2, val3 = 3\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\nLua \u3067\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u304c\u3067\u304d\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001C++ \u306e private, protected \u306e\u3088\u3046\u306a\u30a2\u30af\u30bb\u30b9\u5236\u5fa1 \u3084\u3001\u7d99\u627f \u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u5b9a\u7fa9\n\n\u30af\u30e9\u30b9\u5b9a\u7fa9\nlocal classA = { value = 0 }\nfunction classA:func()\n  return self.value\nend\nclassA:func() -- 0\n\n\u4e0a\u8a18\u306e\u5b9a\u7fa9\u3067 classA \u306e func \u306b return self.value \u3092\u884c\u306a\u3046\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067 self \u306f\u3001func() \u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\u305d\u306e\u3082\u306e\u3092\u793a\u3057\u307e\u3059\u3002C++ \u306e this \u3068\u540c\u3058\u3067\u3059\u3002\n\u30e1\u30bd\u30c3\u30c9\u3001\u30e1\u30f3\u30d0\u306f\u8907\u6570\u6301\u3066\u307e\u3059\u3002\nlocal classA = { total = 0, value = 1 }\nfunction classA:getTotal()\n  return self.total\nend\nfunction classA:add()\n  self.total = self.total + self.value\nend\nfunction classA:setValue( val )\n  self.value = val\nend\nprint( classA:getTotal() ) -- 0\nclassA:add()\nprint( classA:getTotal() ) -- 1\nclassA:setValue( 2 )\nclassA:add()\nprint( classA:getTotal() ) -- 3\n\n\u306a\u304a\u3001\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u3088\u3046\u306b\u3082\u8a18\u8f09\u3067\u304d\u307e\u3059\u3002\nlocal classA = { value = 0 }\nfunction classA.func( self )\n  return self.value\nend\nclassA.func( classA ) -- 0\n\n\u3061\u3087\u3063\u3068\u9055\u3044\u304c\u5206\u304b\u308a\u96e3\u3044\u3067\u3059\u304c\u3001\u6b21\u306e\u70b9\u304c\u7570\u306a\u308a\u307e\u3059\u3002\n\n  : \u3067\u306f\u306a\u304f . \u306b\u306a\u3063\u3066\u3044\u308b\n  \u95a2\u6570\u5b9a\u7fa9\u306e\u5f15\u6570\u306b self \u304c\u5165\u3063\u3066\u3044\u308b\n  \u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u306e\u5f15\u6570\u306b classA \u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\n\n: \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001Lua \u304c\u4e0a\u8a18\u306e\u51e6\u7406\u3092\u884c\u306a\u3063\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u306a\u304a\u3001: \u3092\u5229\u7528\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u306f self \u304c\u81ea\u52d5\u7684\u306b\u5229\u7528\u3055\u308c\u307e\u3059\u304c\u3001. \u3092\u5229\u7528\u3057\u305f\u95a2\u6570\u5b9a\u7fa9\u3067\u306f self \u306e\u90e8\u5206\u306b\u4f55\u3092\u4f7f\u3046\u304b\u306f\u30e6\u30fc\u30b6\u6b21\u7b2c\u3067\u3059\u3002\u3067\u3059\u304c\u3001self \u3092\u4f7f\u3046\u306e\u304c\u6df7\u4e71\u305b\u305a\u306b\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\u5225\u306e\u8a18\u8f09\u306e\u65b9\u6cd5\u3068\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306b\u3082\u3067\u304d\u307e\u3059\u3002\nlocal classA = {\n  value = 0,\n  get = function( self )\n     return self.value\n  end,\n  set = function( self, value )\n     self.value = value\n  end,\n}\nprint( classA:get() ) -- 0\nclassA.set( classA, 1 )\nprint( classA.get( classA ) ) -- 1\n\n\u3053\u308c\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u4e2d\u306b\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u3092\u542b\u3081\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\u306a\u304a\u3001\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u306f : \u3092\u5229\u7528\u3057\u305f\u5b9a\u7fa9\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u7d99\u627f\nLua \u3067\u30af\u30e9\u30b9\u306e\u7d99\u627f\u304c\u53ef\u80fd\u3067\u3059\u3002\u7d99\u627f\u306e\u5b9f\u73fe\u65b9\u6cd5\u306b\u306f\u8907\u6570\u306e\u5b9f\u88c5\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\u4eca\u56de\u7d39\u4ecb\u3059\u308b\u65b9\u6cd5\u306f\u3001\u3042\u304f\u307e\u3067 1 \u3064\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n--[[ 1]] function DefClass( SuperClass ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u7528\u95a2\u6570\n--[[ 2]]    local NewClass = {}\n--[[ 3]]    setmetatable( NewClass, { __index = SuperClass } )\n--[[ 4]]    function NewClass:super( ... )\n--[[ 5]]       local obj = {}\n--[[ 6]]       if SuperClass then\n--[[ 7]]         obj = SuperClass:new( ... )\n--[[ 8]]       end\n--[[ 9]]       setmetatable( obj, { __index = NewClass } )\n--[[10]]       return obj\n--[[11]]    end\n--[[12]]    function NewClass:new( ... )\n--[[13]]       return self:super( ... )\n--[[14]]    end\n--[[15]]    return NewClass\n--[[16]] end\n--[[17]] \n--[[18]] local SuperClass = DefClass( nil ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u3002 \u7d99\u627f\u7121\u3057\n--[[19]] function SuperClass:new( value )\n--[[20]]   local obj = self:super() -- \u89aa\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\n--[[21]]   obj.valueA = value\n--[[22]]   return obj\n--[[23]] end\n--[[24]] function SuperClass:funcA()\n--[[25]]   return self.valueA\n--[[26]] end\n--[[27]] \n--[[28]] local SubClass = DefClass( SuperClass ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u3002  SuperClass \u3092\u7d99\u627f\u3002 \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3002\n--[[29]] function SubClass:funcB()\n--[[30]]   return self.valueA + 10\n--[[31]] end\n--[[32]] \n--[[33]] local SubSubClass = DefClass( SubClass ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u3002 SubClass \u3092\u7d99\u627f\n--[[34]] function SubSubClass:new( value1, value2 )\n--[[35]]   local obj = self:super( value1 ) -- \u89aa\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\n--[[36]]   obj.valueC = value2\n--[[37]]   return obj\n--[[38]] end\n--[[39]] function SubSubClass:funcC()\n--[[40]]   return self.valueC\n--[[41]] end\n--[[42]] \n--[[43]] local obj = SuperClass:new( 1 )\n--[[44]] print( obj:funcA(), obj.funcB, obj.funcC ) -- 1, nil, nil\n--[[45]] obj = SubClass:new( 1 )\n--[[46]] print( obj:funcA(), obj:funcB(), obj.funcC) -- 1, 11, nil\n--[[47]] obj = SubSubClass:new( 1, 2 )\n--[[48]] print( obj:funcA(), obj:funcB(), obj:funcC() ) -- 1, 11, 2\n\n\n  \u30b5\u30f3\u30d7\u30eb\u6982\u8981\n\n\u3053\u308c\u306f SuperClass, SubClass, SubSubClass \u3092\u5b9a\u7fa9\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u540d\u524d\u306e\u901a\u308a\u3001 SubSubClass \u306f SubClass \u3092\u7d99\u627f\u3057\u3066\u3044\u307e\u3059\u3002SubClass \u306f SuperClass \u3092\u7d99\u627f\u3057\u3066\u3044\u307e\u3059\u3002SuperClass \u306f\u4f55\u3082\u7d99\u627f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n  \u30af\u30e9\u30b9\u5b9a\u7fa9\u7528\u95a2\u6570\n\n\u307e\u305a 1\u301c16 \u884c\u76ee\u306f\u3001\u30af\u30e9\u30b9\u5b9a\u7fa9\u7528\u306e\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002DefClass( SuperClass ) \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067 \u3001\nSuperClass \u30af\u30e9\u30b9\u3092\u89aa\u30af\u30e9\u30b9\u306b\u6301\u3064\u65b0\u3057\u3044\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u3001\u3053\u306e\u95a2\u6570\u3067\u5b9a\u7fa9\u3057\u305f\u30af\u30e9\u30b9\u306b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001new \u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u95a2\u6570\u3092\u30bb\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5185\u3067\u306f\u3001super \u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u89aa\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30bf\u3092\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30bf\u306f\u3001\u30af\u30e9\u30b9\u306e\u30e1\u30f3\u30d0\u30fc\u3092\u521d\u671f\u5316\u3057\u3001\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30fc\u30d6\u30eb\u3092\u8fd4\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3001super \u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\n\n  SuperClass \u306e\u5b9a\u7fa9\n\n18 \u884c\u76ee\u306f\u3001 \u89aa\u30af\u30e9\u30b9\u3092\u6301\u305f\u306a\u3044 SuperClass \u3092\u5b9a\u7fa9\u3057\u307e\u3059\u300219\u301c26 \u884c\u76ee\u3067\u3001 SuperClass \u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u3001\u30e1\u30bd\u30c3\u30c9 funcA \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n  SubClass \u306e\u5b9a\u7fa9\n\n29 \u884c\u76ee\u306f\u3001 SuperClass \u3092\u89aa\u30af\u30e9\u30b9\u306b\u6301\u3064 SubClass \u3092\u5b9a\u7fa9\u3057\u307e\u3059\u300229\u301c31 \u884c\u76ee\u3067\u3001 SubClass\u30e1\u30bd\u30c3\u30c9 funcB \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002SubClass \u306f\u72ec\u81ea\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u305f\u306a\u3044\u30af\u30e9\u30b9\u3067\u3059\u3002\n\n  SubSubClass \u306e\u5b9a\u7fa9\n\n33 \u884c\u76ee\u306f\u3001 SubClass \u3092\u89aa\u30af\u30e9\u30b9\u306b\u6301\u3064 SubSubClass \u3092\u5b9a\u7fa9\u3057\u307e\u3059\u300234\u301c41 \u884c\u76ee\u3067\u3001 SubClass \u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u3001\u30e1\u30bd\u30c3\u30c9 funcC \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n  \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\n\n43\u301c48 \u884c\u76ee\u3067 SuperClass, SubClass, SubSubClass \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\nrequire \u3068 loadfile\nC \u306e\u5834\u5408 include \u3067\u5916\u90e8\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u95a2\u6570\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u304c\u3001Lua \u3067\u306f require \u3068 load \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u591a\u304f\u306e\u5834\u5408\u3001require \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nrequire\nrequire \u306f\u3001\u5225\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b9a\u7fa9\u3057\u305f\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u969b\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\n------ main.lua\nlocal sub = require( 'foo.sub' )\nprint( sub:func(1) ) -- 1\nprint( sub:func(1) ) -- 2\nlocal sub2 = require( 'foo.sub' )\nprint( sub == sub2 ) -- true\n------ foo/sub.lua \nlocal tbl = { value = 0 }\nfunction tbl:func( val )\n  self.value = self.value + val\n  return self.value\nend\nreturn tbl\n\n\u6982\u5ff5\u304c\u4f3c\u3066\u3044\u308b\u3060\u3051\u3067\u3001include \u3068\u306f\u305d\u3082\u305d\u3082\u52d5\u4f5c\u304c\u7570\u306a\u308a\u307e\u3059\u3002\n\n  require \u306f\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u306f\u306a\u304f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\n  \u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u306f\u62e1\u5f35\u5b50\u3092\u542b\u307f\u307e\u305b\u3093\u3002\u307e\u305f\u30d1\u30b9\u533a\u5207\u308a\u306b\u306f / \u3067\u306f\u306a\u304f . \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n  . \u3084 .. \u306e\u76f8\u5bfe\u30d1\u30b9\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002 (\u533a\u5207\u308a\u6587\u5b57\u304c . \u306a\u306e\u3067\u610f\u5473\u4e0d\u660e\u306b\u306a\u308b)\n\n\n  require \u306f\u3001\u6307\u5b9a\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30ed\u30fc\u30c9\u3057\u3001\u5b9f\u884c\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n  require \u3057\u305f\u969b\u306b\u8fd4\u3055\u308c\u308b\u5024\u306f 1 \u3064\u3060\u3051\u3067\u3059\u3002\n  require \u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb modname \u306f\u3001package.loaded[ modname ] \u30c6\u30fc\u30d6\u30eb\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n  \u6b21\u306b require \u3057\u305f\u6642\u306f\u3001 package.loaded[ modname ] \u306b\u683c\u7d0d\u3057\u3066\u3044\u308b\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n  \u3082\u3057\u3082 modname \u3067\u6307\u5b9a\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4fdd\u6301\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u3001\u524d\u56de require \u3057\u305f\u3068\u304d\u3068\u7570\u306a\u308b\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u305f\u3068\u3057\u3066\u3082package.loaded[ modname ] \u306b\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u65b0\u898f\u306b\u30ed\u30fc\u30c9\u3057\u306a\u304a\u3057\u307e\u305b\u3093\u3002\n  \u5f37\u5236\u7684\u306b\u30ed\u30fc\u30c9\u3057\u76f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4e8b\u524d\u306b package.loaded[ modname ] = nil \u3068\u3057\u307e\u3059\u3002\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u691c\u7d22\u30d1\u30b9\u306f\u3001 package.path \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\nloadfile\nloadfile \u306f\u6307\u5b9a\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3001\u305d\u306e\u30ed\u30fc\u30c9\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002\u3088\u3063\u3066\u3001loadfile \u304c\u8fd4\u3057\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u307e\u3067\u3001\u6307\u5b9a\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\nrequire \u3068 loadfile \u3068\u3067\u306f\u6b21\u306e\u70b9\u3067\u7570\u306a\u308a\u307e\u3059\u3002\n\n  \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0\n\n\n  require \u306f\u3001 require() \u3092\u51e6\u7406\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3057\u307e\u3059\n  loadfile \u306f\u3001loadfile() \u304c\u8fd4\u3059\u95a2\u6570\u3092\u5b9f\u884c\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u306a\u308a\u307e\u3059\n\n\n  2\u56de\u76ee\u4ee5\u964d\u306e\u51e6\u7406\n\n\n  require \u306f\u30012 \u56de\u76ee\u4ee5\u964d\u5b9f\u884c\u3057\u305f\u5834\u5408\u306f\u524d\u56de\u3068\u540c\u3058\u30e2\u30ce\u3092\u8fd4\u3057\u307e\u3059\n  loadfile \u306f\u65b0\u3057\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3057\u307e\u3059\n\n\n\n------ main.lua\nlocal sub3func = loadfile( 'foo/sub.lua' )\nlocal sub31 = sub3func()\nlocal sub32 = sub3func()\nprint( sub31:func(1) ) -- 1\nprint( sub32:func(1) ) -- 1\nprint( sub31 == sub32 ) -- false\n------ foo/sub.lua \nlocal tbl = { value = 0 }\nfunction tbl:func( val )\n  self.value = self.value + val\n  return self.value\nend\nreturn tbl\n\nloadfile \u306f\u6b21\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u4ed6\u306b\u3001mode, env \u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\nloadfile( filename, mode, end )\n\n  mode \u306f\u3001\u6b21\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f \"bt\" \u3067\u3059\u3002\n\n\n  \"b\": \u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u9650\u5b9a\n  \"t\": \u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u6e08\u307f\u30d5\u30a1\u30a4\u30eb\u306b\u9650\u5b9a\n  \"bt\": \u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u9650\u5b9a\u3057\u306a\u3044\n\n\n  env \u306f\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306e\u683c\u7d0d\u30c6\u30fc\u30d6\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f _ENV \u3067\u3059\u3002\n\n\nrequire \u3068 loadfile \u306e\u4f7f\u3044\u5206\u3051\n\u6b21\u306e\u5834\u5408\u3092\u9664\u304d\u3001 require \u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n  loadfile \u306e mode, env \u5f15\u6570\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u3002\n  \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u518d\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u3002\n\n\n\u30b3\u30eb\u30fc\u30c1\u30f3\n\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u3001\u5024\u306e\u53d7\u6e21\u3057\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f RTOS \u7b49\u306e\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u306a\u30bf\u30b9\u30af\u5207\u308a\u66ff\u3048\u6a5f\u69cb\u3068\u8003\u3048\u308b\u3068\u5206\u304b\u308a\u6613\u3044\u3067\u3059\u3002\ncoroutine.resume() \u3068 coroutine.yield() \u304c\u3001\u30bf\u30b9\u30af\u306e\u518d\u958b\u3001\u4e00\u6642\u505c\u6b62\u306b\u3042\u305f\u308a\u307e\u3059\u3002\n\n  coroutine.resume( crn, arg ) \u306f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3 crn \u306e\u5b9f\u884c\u3092\u518d\u958b\u3057\u307e\u3059\u3002\n\n\n  \u3053\u306e\u3068\u304d\u3001\u30b3\u30eb\u30fc\u30c1\u30f3 crn \u306f arg \u3092\u53d7\u3051\u3068\u308a\u307e\u3059\u3002\n\n\n  coroutine.yield(arg) \u306f\u3001\u5b9f\u884c\u4e2d\u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u3092 suspend \u306b\u3057\u3001coroutine.resume() \u547c\u3073\u51fa\u3057\u305f\u5143\u306e\u51e6\u7406\u306b\u623b\u308a\u307e\u3059\u3002\n\n\n  \u3053\u306e\u3068\u304d\u3001coroutine.resume() \u306e\u623b\u308a\u5024\u3068\u3057\u3066 arg \u304c\u8fd4\u308a\u307e\u3059\u3002\n  \u305f\u3060\u3057\u3001coroutine.resume() \u306e\u623b\u308a\u5024\u306e\u7b2c\u4e00\u623b\u308a\u5024\u306f\u3001\u6307\u5b9a\u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u304c\u7d9a\u304d\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3092\u6700\u5f8c\u307e\u3067\u5b9f\u884c\u3057\u305f\u304b\u3069\u3046\u304b\u306e\u30d5\u30e9\u30b0\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\n  true \u306e\u5834\u5408\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u304c\u7d9a\u304d\u307e\u3059\u3002\n  false \u306e\u5834\u5408\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u306f\u5168\u3066\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\n\n  coroutine.resume() \u306e\u623b\u308a\u5024\u304c true \u306e\u5834\u5408\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u306f\u7d9a\u304d\u304c\u3042\u308a\u307e\u3059\u3002\n\n\n  \u3053\u306e\u72b6\u614b\u3067 \u518d\u5ea6 coroutine.resume( crn, arg ) \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u306e\u7d9a\u304d\u304b\u3089\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n  resume \u306e\u5f15\u6570 arg \u306f\u3001coroutine.yield() \u306e\u623b\u308a\u5024\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n  \u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u304c\u7d42\u4e86\u3059\u308b\u3068\u3001\u6700\u5f8c\u306e coroutine.resume() \u547c\u3073\u51fa\u3057\u4f4d\u7f6e\u306b\u623b\u308a\u307e\u3059\u3002\n\n\n  \u3053\u306e\u3068\u304d\u306e coroutine.resume() \u306e\u623b\u308a\u5024\u306f\u3001\u7b2c\u4e00\u623b\u308a\u5024\u304c false \u3067\u3001\u7b2c\u4e8c\u4ee5\u964d\u306e\u623b\u308a\u5024\u304c\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u623b\u308a\u5024\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u306a\u304a\u3001 \u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4f5c\u308b\u306b\u306f coroutine.create( func ) \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u751f\u6210\u3057\u305f\u3060\u3051\u3067\u306f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002coroutine.resume() \u3067\u521d\u3081\u3066\u30b3\u30eb\u30fc\u30c1\u30f3\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\u521d\u56de\u306e resume() \u3067\u4e0e\u3048\u3089\u308c\u305f\u5f15\u6570\u304c\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u5f15\u6570\u306b\u306a\u308a\u307e\u3059\u30022\u56de\u76ee\u4ee5\u964d\u306e resume() \u3067\u4e0e\u3048\u3089\u308c\u305f\u5f15\u6570\u306f\u3001 coroutine.yield() \u306e\u623b\u308a\u5024\u306b\u306a\u308a\u307e\u3059\u3002\nlocal crn = coroutine.create( function( value )\n      print( \"c1\", value )\n      print( \"c2\", coroutine.yield( value + 1 ) )\n      return value + 2 \nend)\nprint( \"m1\", coroutine.resume( crn, 2 ) )\nprint( \"m2\", coroutine.resume( crn, 3 ) )\nprint( \"m3\", coroutine.resume( crn, 4 ) )\n\n\u4e0a\u306e\u4f8b\u306e\u51fa\u529b\u7d50\u679c\u306f\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\nc1      2\nm1      true    3\nc2      3\nm2      true    4\nm3      false   cannot resume dead coroutine\n\ncoroutine.wrap() \u3092\u4f7f\u7528\u3057\u3066\u3082\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u751f\u6210\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u5834\u5408 coroutine.create() \u3068\u6b21\u306e\u70b9\u3067\u7570\u306a\u308a\u307e\u3059\u3002\n\n  coroutine.wrap() \u306f\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u8fd4\u3059\u306e\u3067\u306f\u306a\u304f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u3092 resume \u3059\u308b\u95a2\u6570 wfun() \u3092\u8fd4\u3057\u307e\u3059\u3002\n  wfun( arg ) \u306e\u5f15\u6570 arg \u306f\u3001 resume \u306e\u7b2c\u4e8c\u5f15\u6570\u4ee5\u964d\u306b\u4e0e\u3048\u308b\u5f15\u6570\u306b\u306a\u308a\u307e\u3059\u3002\n  wfun() \u306e\u623b\u308a\u5024\u306f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u7d9a\u304d\u306e\u6709\u7121\u3092\u793a\u3059\u30d5\u30e9\u30b0\u3092\u542b\u307f\u307e\u305b\u3093\u3002\n  wfun() \u306f\u3001\u30b3\u30eb\u30fc\u30eb\u30f3\u306e\u30a8\u30e9\u30fc\u3092\u30ad\u30e3\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\n\ncrn = coroutine.wrap( function( value )\n      print( \"c1\", value )\n      print( \"c2\", coroutine.yield( value + 1 ) )\n      return value + 2 \nend)\nprint( \"m1\", crn( 2 ) )\nprint( \"m2\", crn( 3 ) )\n--print( \"m3\", crn( 3 ) ) -- error\n\n\u4e0a\u306e\u4f8b\u306e\u51fa\u529b\u7d50\u679c\u306f\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\nc1      2\nm1      3\nc2      3\nm2      4\n\ncoroutine.wrap() \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001for \u6587\u306e\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u6319\u3052\u305f\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570 ite \u3092\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u307e\u3059\u3002\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30b9\u30c3\u30ad\u30ea\u66f8\u3051\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nlocal ite = coroutine.wrap( function ( param, prev )\n   for next = 1, param do\n     coroutine.yield( next, string.format( \"%d\", next ) )\n   end\n   return nil\nend\n-- \u4ee5\u4e0b\u3068\u540c\u3058\u7d50\u679c\u306b\u306a\u308b\n-- local function ite( param, prev )\n--    if prev == param then\n--       return nil\n--    end\n--    if prev == nil then\n--       prev = 0\n--    end\n--    local next = prev + 1\n--    return next, string.format( \"%d\", next )\n-- end\n\n\n\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\n\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3068\u306f\u3001C++ \u306e\u6f14\u7b97\u5b50\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\n\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u5024\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u5024\u306f\u3001\u578b\u304c\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u304b\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3060\u3051\u3067\u3059\u3002\u305f\u3060\u3057\u3001Lua \u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u8a2d\u5b9a\u3067\u304d\u308b\u306e\u306f\u30c6\u30fc\u30d6\u30eb\u578b\u306e\u30c7\u30fc\u30bf\u306e\u307f\u3067\u3059\u3002\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u578b\u306e\u30c7\u30fc\u30bf\u306f\u3001 C \u5074\u304b\u3089\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002\nsetmetatable(table, metatable) \u3067\u3001\u6307\u5b9a\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nLua \u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u306a\u51e6\u7406\u304c\u884c\u306a\u308f\u308c\u308b\u969b\u306b\u3001\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u306b\u5b9a\u7fa9\u3057\u305f\u30e1\u30bd\u30c3\u30c9(\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9)\u304c\u547c\u3070\u308c\u307e\u3059\u3002\n\u4f8b\u3070\u6b21\u306e\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb\u8981\u7d20\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nlocal meta = {\n  __index = function( tbl, key )\n    return key\n  end\n}\nlocal tbl = {}\nprint( tbl[ 1 ] ) -- nil\nsetmetatable( tbl, meta )\nprint( tbl[ 1 ] ) -- 1\n\n\n\u4e8c\u9805\u6f14\u7b97\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( value1, value2 )\n\u6b21\u306e\u4e8c\u9805\u6f14\u7b97\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u3002\n\n __add\n\n  +\n\n\n __sub\n\n  -\n\n\n __mul\n\n  *\n\n\n __div\n\n  /\n\n\n __mod\n\n  %\n\n\n __pow\n\n  ^\n\n\n __concat\n\n  ..\n\n\n __idiv\n\n  // (ver 5.3)\n\n\n\n\u4e8c\u9805\u6f14\u7b97\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u9806\u3067\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6f14\u7b97\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u30d3\u30c3\u30c8\u6f14\u7b97 (ver 5.3)\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( value1, value2 )\n\n __band\n\n  &\n\n\n __bor\n\n  |\n\n\n __bxor\n\n  ~\n\n\n __bnot\n\n  ^\n\n\n __shl\n\n  <<\n\n\n __shr\n\n  >>\n\n\n\n\u30d3\u30c3\u30c8\u6f14\u7b97\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u3069\u3061\u3089\u304b\u304c\u6574\u6570\u3067\u306a\u304f\u3001\u304b\u3064\u6574\u6570\u306b\u5909\u63db\u4e0d\u53ef\u80fd\u306a\u5024\u306e\u5834\u5408\u306b\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u9806\u3067\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6f14\u7b97\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u5358\u9805\u6f14\u7b97\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( value )\n\u6b21\u306e\u5358\u9805\u6f14\u7b97\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u3002\n\n __unm\n\n  -\n\n\n __len\n\n  #\n\n\n\n\u5358\u9805\u6f14\u7b97\u306f\u3001\u6307\u5b9a\u306e\u5024\u306e\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u304c\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6f14\u7b97\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n__eq ( == )\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( value1, value2 )\n__eq \u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3068\u7b2c\u4e8c\u5f15\u6570\u304c\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u540c\u3058\u30cf\u30f3\u30c9\u30e9\u3067\u3042\u308b\u5834\u5408\u306b\u9650\u308a\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6761\u4ef6\u304c\u6210\u308a\u7acb\u3064\u6642\u306b true, \u6210\u308a\u7acb\u305f\u306a\u3044\u6642\u306b false \u3092\u8fd4\u3057\u307e\u3059\u3002\n\n__lt ( < ), __le ( <= )\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( value1, value2 )\n__lt , __le \u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u9806\u3067\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6761\u4ef6\u304c\u6210\u308a\u7acb\u3064\u6642\u306b true, \u6210\u308a\u7acb\u305f\u306a\u3044\u6642\u306b false \u3092\u8fd4\u3057\u307e\u3059\u3002\n\u305f\u3060\u3057  __le \u306e\u5b9a\u7fa9\u304c\u306a\u3044\u5834\u5408\u3001a <= b \u306f not (b < a) \u3068\u3057\u3066 __lt \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n__index\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( table, key )\ntable[key] \u306e\u30c7\u30fc\u30bf\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306e\u52d5\u4f5c\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u307e\u3059\u3002\n_index \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u95a2\u6570\u3060\u3063\u305f\u5834\u5408\u3001\u4e0a\u8a18\u306e\u95a2\u6570\u3068\u3057\u3066\u5b9f\u884c\u3057\u623b\u308a\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\u95a2\u6570\u3067\u306f\u306a\u304f\u30c6\u30fc\u30d6\u30eb\u3060\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ad\u30fc key \u306e\u8981\u7d20\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u306a\u306e\u306f table \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u306a\u3044\u5834\u5408\u306e\u307f\u3067\u3059\u3002table \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\u307e\u305f\u3001 _index \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u3001\u95a2\u6570\u3067\u306f\u306a\u304f\u30c6\u30fc\u30d6\u30eb\u3060\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ad\u30fc key \u306e\u8981\u7d20\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3044\u308b\u306e\u304c\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u578b\u306e\u5834\u5408\u306f\u3001\u5e38\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f table \u306e key \u306b\u5bfe\u3059\u308b\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n__newindex\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( table, key, value )\ntable[key] \u306b\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u969b\u306e\u52d5\u4f5c\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u307e\u3059\u3002\n_newindex \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u95a2\u6570\u3060\u3063\u305f\u5834\u5408\u3001\u4e0a\u8a18\u306e\u95a2\u6570\u3068\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\u95a2\u6570\u3067\u306f\u306a\u304f\u30c6\u30fc\u30d6\u30eb\u3060\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ad\u30fc key \u306b\u5024 value \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u306a\u304a\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u306a\u306e\u306f table \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u306a\u3044\u5834\u5408\u306e\u307f\u3067\u3059\u3002\ntable \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u6307\u5b9a\u306e\u5024\u304c\u30bb\u30c3\u30c8\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3044\u308b\u306e\u304c\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u578b\u306e\u5834\u5408\u306f\u3001\u5e38\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n__call\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( func, \u2026 )\n\u95a2\u6570\u30b3\u30fc\u30eb\u306e\u52d5\u4f5c\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u307e\u3059\u3002\n\u6307\u5b9a\u306e\u5024\u306e\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u304c\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f func \u306e\u5b9f\u884c\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n__gc ( == )\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( self )\n__gc \u306f\u3001\u305d\u306e\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u3092\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024\u304c GC \u3067\u89e3\u653e\u3055\u308c\u308b\u524d\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\n__tostring ( == )\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\nfunction func( self )\n__tostring \u306f\u3001 string.format \u306e \"%s\" \u7b49\u3067\u5909\u63db\u3059\u308b\u969b\u306b\u547c\u51fa\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6587\u5b57\u5217\u3092\u8fd4\u3057\u307e\u3059\u3002 \n\n\u30af\u30ed\u30fc\u30b8\u30e3\nLua \u306f\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u30af\u30ed\u30fc\u30b8\u30e3\u306f\u3001Lisp \u7b49\u3067\u3082\u5229\u7528\u3067\u304d\u308b\u53e4\u304f\u304b\u3089\u3042\u308b\u6a5f\u80fd\u306e\u4e00\u3064\u3067\u3059\u304c\u3001C++ \u3067\u306f C++11 \u3067\u53d6\u5165\u308c\u3089\u308c\u305f\u6a5f\u80fd\u3067\u3059\u3002\n\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u95a2\u6570\u306e\u5f15\u6570\u3001\u30b0\u30eb\u30fc\u30d0\u30eb\u5909\u6570\u4ee5\u5916\u3067\u3001\u95a2\u6570\u306e\u632f\u821e\u3044\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001C \u306e qsort \u306b\u306f\u6b21\u306e\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u3092\u5f15\u6570\u306b\u4e0e\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nint (*compare)(const void * val1, const void * val2)\n\u3053\u306e\u95a2\u6570\u306f\u3001val1, val2 \u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u5024\u3092\u6bd4\u8f03\u3057\u3066\u7d50\u679c\u3092\u8fd4\u3059\u95a2\u6570\u3067\u3059\u3002\n\u3053\u3053\u3067\u3001\u3082\u3057\u8981\u7d20\u306e\u6bd4\u8f03\u3092\u884c\u306a\u3046\u305f\u3081\u306b\u6b21\u306e\u3088\u3046\u306b\u3082\u3046\u4e00\u3064\u306e\u5f15\u6570\u304c\u5fc5\u8981\u3060\u3063\u305f\u5834\u5408\u3001\u3069\u3046\u3059\u308c\u3070 qsort() \u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\nint sampleCompare(const void * val1, const void * val2, const int param );\n\n\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u6b21\u306e 2 \u3064\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n  param \u3092\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570 g_param \u306b\u8a2d\u5b9a\u3059\u308b\n\n\n  sampleCompareWrap( const void * val1, const void * val2 ) \u3092\u4f5c\u6210\u3002\n  sampleCompareWrap() \u304b\u3089 sampleCompare( val1, val2, g_param ) \u3092\u5b9f\u884c\u3059\u308b\u3002\n g_param \u306b\u5024\u3092\u8a2d\u5b9a\u3059\u308b\n  sampleCompareWrap() \u3092 qsort() \u306b\u6e21\u3059\n\n\n  param \u3092\u56fa\u5b9a\u5024\u306b\u3057\u3066 sampleCompare() \u5b9f\u884c\u3059\u308b\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u3092\u7528\u610f\u3059\u308b\n\n\n  sampleCompareWrapX( const void * val1, const void * val2 ) \u3092\u4f5c\u6210\u3002\n  sampleCompareWrapX() \u304b\u3089 sampleCompare( val1, val2, PARAM ) \u3092\u5b9f\u884c\u3059\u308b\u3002\n\n\n  \u3053\u3053\u3067 PARAM \u306f\u3001param \u304c\u53d6\u308a\u5f97\u308b\u5024\u306e 1 \u3064\u3067\u3059\n\n\n  param \u306e\u30d1\u30bf\u30fc\u30f3\u5206 sampleCompareWrapX() \u3092\u7528\u610f\u3059\u308b\u3002\n  \u4f7f\u7528\u3059\u308b param \u306e\u30d1\u30bf\u30fc\u30f3\u306b\u5408\u305b\u3066 qsort() \u306b\u4e0e\u3048\u308b sampleCompareWrapX() \u3092\u5909\u66f4\u3059\u308b\n\n\n\n\u3069\u3061\u3089\u3082\u3001\u3042\u307e\u308a\u826f\u3044\u65b9\u6cd5\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u3002\n\u3053\u306e\u3088\u3046\u306a\u6642\u306b\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f7f\u7528\u3059\u308b\u3068\u7c21\u5358\u306b\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\nLua \u306e\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f7f\u3046\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nlocal function generateCompare( param )\n  return function( val1, val2 ) -- \u2605\n    return sampleCompare( val1, val2, param )\n  end\nend\nqsort( array, 1, 1, generateCompare( param ) ) -- C \u306e qsort() \u3068\u540c\u3058\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3068\u3059\u308b\n\n\u4e0a\u8a18\u3067\u8aac\u660e\u3057\u3066\u3044\u308b\u901a\u308a\u3001\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u95a2\u6570\u306e\u5f15\u6570\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3092\u4f7f\u308f\u305a\u306b\u3001\u4e0a\u8a18\u306e \u2605 \u30de\u30fc\u30af\u306e\u95a2\u6570\u306e\u632f\u821e\u3044\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\u30af\u30ed\u30fc\u30b8\u30e3\u3067\u91cd\u8981\u306a\u3053\u3068\u306f\u3001\u95a2\u6570\u306e\u51e6\u7406\u5185\u3067\u3001\u95a2\u6570\u5b9a\u7fa9\u5916\u90e8\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306f\u3001\u5ba3\u8a00\u3055\u308c\u308b\u3068\u65b0\u3057\u304f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u305d\u3057\u3066 Lua \u306e\u5024\u306f\u3001\u53c2\u7167\u304c\u306a\u304f\u306a\u308b\u307e\u3067\u89e3\u653e\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u3067\u3042\u308b\u30d6\u30ed\u30c3\u30af\u306e\u51e6\u7406\u3092\u629c\u3051\u3066\u3082\u3001\u95a2\u6570\u5185\u3067\u53c2\u7167\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u89e3\u653e\u3055\u308c\u308b\u3053\u3068\u306a\u304f\u6b8b\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30c7\u30d0\u30c3\u30b0\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\nLua \u306f\u3001\u81ea\u5206\u81ea\u8eab\u3092\u30c7\u30d0\u30c3\u30b0\u3059\u308b\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u6301\u3061\u307e\u3059\u3002\u3053\u308c\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u4f8b\u3048\u3070\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u30ea\u30e2\u30fc\u30c9\u30c7\u30d0\u30c3\u30ac\u7b49\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n# C/C++ \u8a00\u8a9e\u30d7\u30ed\u30b0\u30e9\u30de\u306e\u305f\u3081\u306e Lua \u5165\u9580\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\n\n\u3053\u308c\u306f\u3001C/C++ \u8a00\u8a9e\u306e\u30d7\u30ed\u30b0\u30e9\u30de\u304c\u3053\u308c\u3060\u3051\u8aad\u3081\u3070 Lua \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u554f\u984c\u306a\u304f\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308b\u3053\u3068\u3092\u76ee\u7684\u306b\u3057\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u3059\u3002\n\nLua \u304b\u3089 C \u8a00\u8a9e\u306e\u547c\u3073\u51fa\u3057\u3001 C \u8a00\u8a9e\u304b\u3089 Lua \u306e\u547c\u3073\u51fa\u3057\u306b\u3064\u3044\u3066\u306f\u6b21\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n<http://qiita.com/dwarfJP/items/ae116b404be0b09255ff> \n\n\nLua 5.2, 5.3 \u3092\u30bf\u30fc\u30b2\u30c3\u30c8\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n**\u4ee5\u964d\u306e\u8a18\u8f09\u306b\u3064\u3044\u3066**\n\n-   **\u7279\u306b\u660e\u8a18\u3057\u306a\u3044\u9650\u308a\u3001C \u8a00\u8a9e\u3068\u8a18\u8f09\u3057\u305f\u5834\u5408\u306f C/C++ \u8a00\u8a9e\u306e\u4e21\u65b9\u3092\u610f\u5473\u3057\u307e\u3059\u3002**\n-   **\u7279\u306b Lua \u3084 C \u7b49\u306e\u8a00\u8a9e\u3092\u660e\u8a18\u3057\u306a\u3044\u9650\u308a\u3001Lua \u306e\u4ed5\u69d8\u306e\u8aac\u660e\u3067\u3059\u3002**\n\n\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u6b21\u306e\u60c5\u5831\u3092\u5143\u306b\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002Lua \u3067\u5229\u7528\u3067\u304d\u308b\u6a19\u6e96\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8a73\u7d30\u306f\u3001\u6b21\u306e\u516c\u5f0f URL \u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n-   <http://www.lua.org/manual/5.3/manual.html>\n-   <http://milkpot.sakura.ne.jp/lua/lua53_manual_ja.html>\n\nLua \u306b\u3088\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u7d99\u627f\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n-   <http://www.geocities.jp/m_hiroi/light/lua06.html>\n\n\u307e\u305a C \u8a00\u8a9e\u3068\u306e\u5dee\u5206\u6982\u8981\u3092\u307e\u3068\u3081\u308b\u3068\u6b21\u306e\u3082\u306e\u304c\u6319\u3052\u3089\u308c\u307e\u3059\u3002\u3082\u3061\u308d\u3093\u5b9f\u969b\u306b\u306f\u3082\u3063\u3068\u591a\u304f\u306e\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u3002\n\n-   Native \u3067\u306f\u306a\u304f Lua VM \u4e0a\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002 (JIT \u304c\u52d5\u4f5c\u3059\u308b\u5b9f\u88c5\u3082\u3042\u308a\u307e\u3059)\n-   \u30b3\u30f3\u30d1\u30a4\u30eb\u4e0d\u8981\u3067\u3059\u3002(\u4e8b\u524d\u306b\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u5316\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059)\n-   \u6570\u5024\u306f\u5b9f\u6570\u304c\u57fa\u672c\u3067\u3059\u3002(\u6574\u6570\u306e\u30d3\u30c3\u30c8\u6f14\u7b97\u3082\u53ef\u80fd\u3067\u3059)\n-   \u6587\u306e\u533a\u5207\u308a\u8a18\u53f7\u306f ; \u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002 ( ; \u3082\u4f7f\u3048\u307e\u3059 )\n-   main \u95a2\u6570\u306f\u4e0d\u8981\u3067\u3059\u3002\n-   \u30dd\u30a4\u30f3\u30bf\u578b\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n-   \u30d0\u30a4\u30c8\u914d\u5217\u306f\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u3044\u307e\u3059\u3002\n-   \u914d\u5217\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f 1 \u304b\u3089\u3067\u3059\u3002\n-   \u9023\u60f3\u914d\u5217\u3092\u6301\u3061\u307e\u3059\u3002\n-   \u69cb\u9020\u4f53\u3001\u5171\u7528\u4f53\u306f\u3042\u308a\u307e\u305b\u3093\u3002(\u30c6\u30fc\u30d6\u30eb\u3092\u69cb\u9020\u4f53\u3068\u4f3c\u305f\u3088\u3046\u306a\u4f7f\u3044\u65b9\u304c\u3067\u304d\u307e\u3059)\n-   \u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3(GC)\u3092\u642d\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n-   \u623b\u308a\u5024\u306b\u8907\u6570\u306e\u5024\u3092\u8fd4\u305b\u307e\u3059\u3002\n-   \u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n-   typedef \u306f\u3042\u308a\u307e\u305b\u3093\u3002\n-   \\#define \u7b49\u306e\u30d7\u30ea\u30d7\u30ed\u30bb\u30c3\u30b5\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n-   \u8a00\u8a9e\u4ed5\u69d8\u5185\u306b\u30c7\u30d0\u30c3\u30b0\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u6301\u3061\u307e\u3059\u3002\n\n## Lua \u306e\u5b9f\u884c\n\nLua \u306f\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4e00\u65e6 Lua VM \u7528\u306e\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u306b\u5909\u63db\u3057\u3066\u304b\u3089 Lua VM \u4e0a\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u3078\u306e\u5909\u63db\u51e6\u7406\u306f Lua \u306e\u5185\u90e8\u7684\u306b\u884c\u306a\u308f\u308c\u308b\u305f\u3081\u3001\u30e6\u30fc\u30b6\u304c\u610f\u8b58\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\nC \u306e\u69d8\u306a\u30b3\u30f3\u30d1\u30a4\u30eb/\u30ea\u30f3\u30af\u4f5c\u696d\u306f\u4e0d\u8981\u3067\u3059\u3002\n\n\u306a\u304a\u3001VM \u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u305f\u3081 Native \u3088\u308a\u3082\u5b9f\u884c\u901f\u5ea6\u306f\u9045\u304f\u306a\u308a\u307e\u3059\u3002\n\n## \u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\n\nLua \u306f\u3001\u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\u53c2\u7167\u3055\u308c\u306a\u304f\u306a\u3063\u305f\u5024\u306f\u3001\u81ea\u52d5\u7684\u306b\u89e3\u653e\u3055\u308c\u307e\u3059\u3002\n\nC \u306e\u69d8\u306b\u3001\u30e1\u30e2\u30ea\u306e\u89e3\u653e\u3092\u610f\u8b58\u3057\u3066\u884c\u306a\u3046\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u305f\u3060\u3057\u3001\u4e0d\u8981\u306b\u306a\u3063\u305f\u5024\u3092\u53c2\u7167\u3057\u3066\u3044\u308b\u3068\u89e3\u653e\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u4e0d\u8981\u306b\u306a\u3063\u305f\u5024\u306f\u53c2\u7167\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u4e0d\u8981\u306b\u306a\u3063\u305f\u5024\u306f\u3001\u305d\u306e\u5024\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570\u306b nil \u3092\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u53c2\u7167\u3092\u7121\u304f\u305b\u307e\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3067\u3042\u308c\u3070\u3001\u660e\u793a\u7684\u306b nil \u3092\u4ee3\u5165\u3057\u306a\u304f\u3068\u3082\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304c\u89e3\u653e\u3055\u308c\u308b\u3053\u3068\u3067\u3082\u540c\u3058\u3067\u3059\u3002\n\n\u306a\u304a\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u30ac\u30fc\u30d9\u30b8\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u89e3\u653e\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u306f\u3001\u305d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u53c2\u7167\u3055\u308c\u306a\u304f\u306a\u3063\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n## main \u95a2\u6570\n\nLua \u306b\u306f\u3001\u591a\u304f\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u8a00\u8a9e\u3068\u540c\u69d8\u306b main \u95a2\u6570\u3068\u3044\u3046\u3082\u306e\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5b9f\u884c\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u304b\u3089\u9806\u306b\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n## \u30b3\u30e1\u30f3\u30c8\n\n`--` \u4ee5\u964d\u306f\u30b3\u30e1\u30f3\u30c8\u306b\u306a\u308a\u307e\u3059\u3002 C \u306e // \u3068\u540c\u3058\u6271\u3044\u3067\u3059\u3002\u8907\u6570\u884c\u3092\u30b3\u30e1\u30f3\u30c8\u306b\u3059\u308b\u5834\u5408\u306f\u3001 `--[[]]` \u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002C \u306e `/* */` \u3068\u4f3c\u305f\u6271\u3044\u3067\u3059\u3002\n\n```lua\n-- \u3053\u3053\u4ee5\u964d\u306f\u30b3\u30e1\u30f3\u30c8\n-- [[\u3053\u3053\u306f\n\u30b3\u30e1\u30f3\u30c8]]\n```\n\n`[[]]` \u306f\u3001\u5f8c\u8ff0\u3059\u308b\u6587\u5b57\u5217\u3068\u540c\u3058\u3067 [=[ ]=] \u306e\u30d1\u30bf\u30fc\u30f3\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u6587\u5b57\u5217\u4e2d\u306e\u30b3\u30e1\u30f3\u30c8\u958b\u59cb\u3001\u7d42\u4e86\u6587\u5b57\u306f\u3001\u6587\u5b57\u5217\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002\n\n## \u30bb\u30df\u30b3\u30ed\u30f3(;)\n\n\u30bb\u30df\u30b3\u30ed\u30f3(;) \u306e\u610f\u5473\u304c Lua \u3068 C \u3067\u7570\u306a\u308a\u307e\u3059\u3002C \u3067\u306f\u6587\u306e\u533a\u5207\u308a\u3068\u3057\u3066\u30bb\u30df\u30b3\u30ed\u30f3(;)\u3092\u4f7f\u7528\u3057\u307e\u3059\u304c\u3001Lua \u306f\u30bb\u30df\u30b3\u30ed\u30f3(;)\u305d\u306e\u3082\u306e\u304c\u300c\u4f55\u3082\u3057\u306a\u3044\u300d\u6587\u3092\u793a\u3059\u3010\u7a7a\u6587\u3011\u3068\u306a\u308a\u307e\u3059\u3002\n\nC \u3068\u540c\u3058\u611f\u899a\u3067\u30bb\u30df\u30b3\u30ed\u30f3(;)\u3092\u4f7f\u7528\u3057\u3066\u3082\u7279\u306b\u554f\u984c\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u7121\u95c7\u306b\u5229\u7528\u3059\u308b\u306e\u306f\u63a7\u3048\u307e\u3057\u3087\u3046\u3002\n\n## \u5024\n\nLua \u3067\u306f\u3001\u6b21\u306e\u5024\u3092\u6271\u3048\u307e\u3059\u3002\n\n-   nil\n-   \u30d6\u30fc\u30ea\u30a2\u30f3\n-   \u6570\u5024\n-   \u6587\u5b57\u5217\n-   \u95a2\u6570\n-   \u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\n-   \u30b9\u30ec\u30c3\u30c9\n-   \u30c6\u30fc\u30d6\u30eb\n\n### nil\n\nnil \u306f\u4ed6\u306e\u3069\u306e\u5024\u3068\u3082\u7570\u306a\u308b\u7279\u6b8a\u306a\u5024\u3067\u3059\u3002\n\nC \u3067\u4f8b\u3048\u308b\u306a\u3089 NULL \u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002C \u306e NULL \u3068\u7570\u306a\u308b\u306e\u306f\u3001NULL \u306f\u578b\u304c\u30dd\u30a4\u30f3\u30bf\u3067\u3042\u308a\u3001\u5024\u304c NULL \u3067\u3042\u308b\u306e\u306b\u5bfe\u3057\u3001nil \u306f\u578b\u304c nil \u3067\u3042\u308a\u3001\u5024\u3082 nil \u3067\u3042\u308b\u3053\u3068\u3067\u3059\u3002\n\n### \u30d6\u30fc\u30ea\u30a2\u30f3\n\ntrue, false \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u305f\u3060\u3057\u3001\u8ad6\u7406\u6f14\u7b97\u306e\u7d50\u679c\u304c true \u304b false \u3060\u3051\u3092\u8fd4\u3059\u8a33\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u8a73\u3057\u304f\u306f\u5f8c\u8ff0\u3057\u307e\u3059\u3002\n\n### \u6570\u5024\n\n\u6570\u5024\u306f\u5168\u3066\u7b26\u53f7\u4ed8\u304d\u5b9f\u6570\u3067\u3059(Lua \u306e\u74b0\u5883\u306b\u3088\u3063\u3066\u6574\u6570\u306e\u5834\u5408\u3082\u3042\u308b)\u3002C \u3067\u306f char, short, int, long \u306a\u3069\u306e\u30d0\u30a4\u30c8\u9577\u306e\u9055\u3044\u3084\u3001signed, unsigned \u306e\u7b26\u53f7\u306e\u6709\u7121\u306e\u9055\u3044\u304c\u3042\u308a\u307e\u3059\u304c\u3001Lua \u3067\u306f\u7b26\u53f7\u4ed8\u304d\u5b9f\u6570\u306e\u307f\u3067\u3059\u3002\n\n\u5b9f\u6570\u3067\u3059\u304c\u3001\u6574\u6570\u30d3\u30c3\u30c8\u6f14\u7b97\u304c\u5229\u7528\u53ef\u80fd\u3067\u3059\u3002\n\n\u30ea\u30c6\u30e9\u30eb\u306f\u3001\u6b21\u306e\u3088\u3046\u306b 10 \u9032\u6570\u3068 16 \u9032\u6570\u3067\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n-   3\n-   345\n-   0xff\n-   0xBEBADA\n\n\u307e\u305f\u3001\u5b9f\u6570\u306f\u6b21\u306e\u3088\u3046\u306a\u6307\u5b9a\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n-   3.0\n-   3.1416\n-   314.16e-2\n-   0.31416E1\n-   34e1\n-   0x0.1E\n-   0xA23p-4\n-   0X1.921FB54442D18P+1\n\n### \u6587\u5b57\u5217\n\nLua \u306e\u6587\u5b57\u5217\u306f\u3001C \u3068\u306f\u7570\u306a\u308a '\\\\0' \u3067\u7d42\u7aef\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u306a\u305c\u306a\u3089\u3070\u3001Lua \u306e\u6587\u5b57\u5217\u306f\u5168\u3066\u306e\u30d0\u30a4\u30ca\u30ea\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3067\u304d\u308b\u305f\u3081\u3067\u3059\u3002\n\n*\u7d42\u7aef\u6587\u5b57\u304c\u3042\u308b\u3068\u3044\u3046\u3053\u3068\u306f\u3001\u7d42\u7aef\u6587\u5b57\u3092\u8907\u6570\u6301\u3066\u306a\u3044\u3053\u3068\u3068\u540c\u7fa9\u3002*\n\n'\\\\0' \u3067\u7d42\u7aef\u3055\u308c\u3066\u3044\u306a\u3044\u4ee3\u308f\u308a\u306b\u3001\u6587\u5b57\u5217\u30c7\u30fc\u30bf\u305d\u306e\u3082\u306e\u304c\u30b5\u30a4\u30ba\u60c5\u5831\u3092\u4fdd\u6301\u3057\u3066\u3044\u307e\u3059\u3002\u30b5\u30a4\u30ba\u60c5\u5831\u306b\u306f # \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070 #\"123\" \u306f 3 \u306b\u306a\u308a\u307e\u3059\u3002\n\n~~\u306a\u304a\u3001Lua \u306e\u6587\u5b57\u5217\u306b\u306f\u6587\u5b57\u30b3\u30fc\u30c9\u306e\u6982\u5ff5\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u5358\u306a\u308b\u30d0\u30a4\u30c8\u5217\u3068\u3057\u3066\u6271\u308f\u308c\u307e\u3059\u3002~~Lua \u306e\u6587\u5b57\u5217\u306f\u3001\u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30c8(1\u6587\u5b571\u30d0\u30a4\u30c8)\u6587\u5b57\u30b3\u30fc\u30c9\u3068\u3057\u3066\u52d5\u4f5c\u3057\u307e\u3059\u3002\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306b\u306f\u660e\u8a18\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001Lua \u306e\u6587\u5b57\u5217\u64cd\u4f5c\u95a2\u6570\u306f C \u8a00\u8a9e\u306e is???? \u95a2\u6570\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30ed\u30b1\u30fc\u30eb\u306b\u4f9d\u5b58\u3057\u307e\u3059\u3002\n\n\u6587\u5b57\u5217\u306f ' \u304b \" \u3067\u56f2\u307f\u307e\u3059\u3002' \u3067\u56f2\u3080\u5834\u5408 \" \u3092\u6587\u5b57\u5217\u4e2d\u306b\u542b\u3081\u3089\u308c\u307e\u3059\u3002\" \u3067\u56f2\u3080\u5834\u5408 ' \u3092\u6587\u5b57\u5217\u4e2d\u306b\u542b\u3081\u3089\u308c\u307e\u3059\u3002\n\n\u6587\u5b57\u5217\u4e2d\u306b\u306f \\xXX(X\u306f 16\u9032\u6570) \u3084 \\ddd(X\u306f 10\u9032\u6570)\u3067\u30010\u301c255\u307e\u3067\u306e\u4efb\u610f\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n\u3055\u3089\u306b \\u{XXX}(X \u306f1\u6841\u4ee5\u4e0a\u306e16\u9032\u6570) \u3067\u3001\u30de\u30eb\u30c1\u30d0\u30a4\u30c8\u6587\u5b57\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n\u6587\u5b57\u5217\u4e2d\u306b\u6539\u884c\u3092\u542b\u307e\u305b\u308b\u306b\u306f\u3001\u6b21\u306e\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n-   \\n \u3092\u5229\u7528\u3059\u308b\n-   \\\\ \u306e\u76f4\u5f8c\u306b\u6539\u884c\u3059\u308b\n-   `[[]]` \u3092\u5229\u7528\u3059\u308b\n\n`[[]]` \u306f [=[]=] [==[]==] [===[]===] \u306e\u3088\u3046\u306b = \u3092\u5165\u308c\u3089\u308c\u307e\u3059\u3002\n\n`[[]]` \u3067\u56f2\u307e\u308c\u305f\u6587\u5b57\u5217\u306f \\n \u7b49\u306e\u30a8\u30b9\u30b1\u30fc\u30d7\u306f\u305d\u306e\u307e\u307e\u306e\u6587\u5b57\u5217\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u306a\u304a\u3001 `[[]]` \u306e `[[` \u76f4\u5f8c\u306b\u3042\u308b\u6539\u884c\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\n\n```lua\nstr = '\"abc\"' -- \"abc\"\nstr = \"'abc'\" -- 'abc'\nstr = [[\n\"'abc'\"\n]] -- \"'abc'\"\\n\nstr = [=[[[abc]]]=] -- [[abc]]\n```\n\n\u6587\u5b57\u5217 str \u306e N \u756a\u76ee\u306e\u6587\u5b57\u3092\u53d6\u5f97\u3059\u308b\u5834\u5408\u306f\u3001string.byte( str, N ) \u3067\u3059\u3002\n\n.. \u3067\u6587\u5b57\u5217\u3092\u9023\u7d50\u3067\u304d\u307e\u3059\u3002\n\n\"abc\" .. \"def\" \u306f \"abcdef\" \u3067\u3059\u3002\n\n### \u95a2\u6570\n\nLua \u306f\u95a2\u6570\u81ea\u4f53\u3092\u5024\u3068\u3057\u3066\u6271\u3048\u307e\u3059\u3002\u305f\u3060\u3057\u3001C \u306e\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u306e\u3088\u3046\u306b\u4ed6\u306e\u578b\u3078\u306e\u578b\u5909\u63db\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u95a2\u6570\u306f\u3042\u304f\u307e\u3067\u95a2\u6570\u3067\u3059\u3002\n\n### \u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\n\nLua \u306f\u3001\u4e3b\u306b C \u8a00\u8a9e\u3092\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u3057\u3066\u7d44\u8fbc\u3080\u3053\u3068\u3092\u60f3\u5b9a\u3057\u305f\u8a00\u8a9e\u3067\u3059\u3002\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u9023\u643a\u3057\u3066\u52d5\u4f5c\u3059\u308b\u5834\u5408\u3001\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30c7\u30fc\u30bf\u3092 Lua \u306e\u5024\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3067\u304d\u306a\u3044\u3001\u3042\u308b\u3044\u306f\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u305f\u3081\u306e\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u304c\u5927\u304d\u304f\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u305d\u306e\u3088\u3046\u306a\u5834\u5408\u306b\u3001\u30db\u30b9\u30c8\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u30c7\u30fc\u30bf\u3092 **\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf** \u3068\u3057\u3066\u305d\u306e\u307e\u307e Lua \u306b\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u305f\u3060\u3057 Lua \u304b\u3089\u306f\u3001\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u306f\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u3068\u3057\u3066\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u306b\u4f55\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u304b\u3001\u76f4\u63a5 Lua \u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\n\n### \u30b9\u30ec\u30c3\u30c9\n\n\u3053\u3053\u3067\u30b9\u30ec\u30c3\u30c9\u3068\u306f pthread \u7b49\u3067\u6271\u3046 OS \u306e thread \u3067\u306f\u306a\u304f\u3001Lua \u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u6307\u3057\u307e\u3059\u3002\n\n\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u3001\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u3067\u51e6\u7406\u3092\u5207\u308a\u66ff\u3048\u308b\u6982\u5ff5\u3067\u3059\u3002\n\n\u306a\u304a Lua \u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u8907\u6570\u4f5c\u3063\u3066\u3082\u3001OS \u306e 1 \u3064\u306e thread \u4e0a\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\n### \u30c6\u30fc\u30d6\u30eb\n\n\u30c6\u30fc\u30d6\u30eb\u306f\u3001\u914d\u5217\u3068 STL \u306e map \u304c\u4e00\u7dd2\u306b\u306a\u3063\u305f\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3067\u3059\u3002\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u3001nil \u4ee5\u5916\u306e\u5168\u3066\u306e\u578b\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u306f\u3001\u6b21\u306e\u3088\u3046\u306b {} \u3067\u56f2\u307f\u307e\u3059\u3002\n\n```lua\ntblA = { \"1\", \"2\", \"3\", 4, [5] = 5 }\n-- tblA[1] == \"1\"; tblA[2] == \"2\"; tblA[3] == \"3\"; tblA[4] == 4; tblA[5] == 5;\n```\n\n\u4e0a\u8a18\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5834\u5408\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306f **1** \u304b\u3089\u306b\u306a\u308a\u307e\u3059\u3002C \u8a00\u8a9e\u3067\u306f 0 \u304b\u3089\u306a\u306e\u3067\u3001\u6c17\u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u6b21\u306e\u3088\u3046\u306b\u6570\u5024\u4ee5\u5916\u306e\u30ad\u30fc\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```lua\ntblB = { foo = 1, bar = 2, [ \".hoge\" ] = 3 }\n-- tblB.foo == \"1\"; tblB.bar == \"2\"; tblB[\".hoge\"] == \"3\";\n```\n\n\u30ad\u30fc\u306b\u306f nil(\u3068 NaN) \u4ee5\u5916\u306e\u5168\u3066\u306e\u5024\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n\u6570\u5024\u4ee5\u5916\u306e\u30ad\u30fc\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u3001tblB.foo \u306e\u3088\u3046\u306b\u30ad\u30fc\u3092\u30b7\u30f3\u30dc\u30eb\u3068\u3057\u3066\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002tblB[ \"foo\" ] \u3068\u3057\u3066\u3082\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u3067\u3059\u3002\n\n\u30ad\u30fc\u304c . \u3084 = \u7b49\u306e\u6587\u5b57\u3092\u542b\u3093\u3067\u3044\u308b\u5834\u5408\u306f\u3001[ \".\" ] \u3084 [ \"=\" ]  \u306e\u3088\u3046\u306b\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u30c6\u30fc\u30d6\u30eb\u3067\u4fdd\u6301\u3059\u308b\u30c7\u30fc\u30bf\u306e\u5168\u3066\u306e\u30ad\u30fc\u304c 1 \u304b\u3089\u9806\u306b 1 \u305a\u3064\u5897\u3048\u3066\u3044\u308b\u5834\u5408(\u81ea\u7136\u6570)\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u3092 **\u30b7\u30fc\u30b1\u30f3\u30b9** \u3068\u547c\u3073\u307e\u3059\u3002\u6570\u5024\u4ee5\u5916\u306e\u30ad\u30fc\u3084\u3001\u6570\u5024\u3067\u3042\u3063\u3066\u3082 1 \u305a\u3064\u5897\u3048\u3066\u306a\u3044\u5834\u5408\u306f\u3001\\*\u30b7\u30fc\u30b1\u30f3\u30b9\\* \u3068\u306f\u8a00\u3044\u307e\u305b\u3093\u3002\n\n\\#table \u3067\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u8981\u7d20\u6570\u3092\u8fd4\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u8981\u7d20\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002\u30b7\u30fc\u30b1\u30f3\u30b9\u3067\u306a\u3044\u30c6\u30fc\u30d6\u30eb\u306e # \u306f\u8981\u7d20\u6570\u3092\u793a\u3057\u307e\u305b\u3093\u3002\n\n\u4efb\u610f\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u30b7\u30fc\u30b1\u30f3\u30b9\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\u3059\u308b\u65b9\u6cd5\u306f\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u4e0a\u8a18\u306e\u4f8b\u3067\u8a00\u3046\u3068\u3001#tblA \u306f 5 \u3092\u8fd4\u3057\u307e\u3059\u304c\u3001#tblB \u306f 3 \u306b\u306a\u308a\u307e\u305b\u3093\u3002\n\n\u5b58\u5728\u3057\u3066\u3044\u306a\u3044\u30ad\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001nil \u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e\u4f8b\u3067\u306f\u3001 tblB.xyz \u306f nil \u306b\u306a\u308a\u307e\u3059\u3002\n\n#### \u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\n\u4e0a\u8a18\u306e\u69d8\u306b {} \u3092\u4f7f\u7528\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306e\u751f\u6210\u3092\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u8a00\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30bf\u30af\u30bf\u306b\u306f\u3001\u4e0a\u8a18\u3067\u8aac\u660e\u3057\u305f\u4ee5\u5916\u306b\u4e00\u3064\u5927\u304d\u306a\u7279\u5fb4\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u305d\u306e\u7279\u5fb4\u3068\u306f\u3001\u6700\u7d42\u8981\u7d20\u304c\u30ad\u30fc\u3092\u6307\u5b9a\u3057\u306a\u3044\u5f0f\u3067\u3001\u305d\u306e\u5f0f\u306e\u7d50\u679c\u304c\u95a2\u6570\u547c\u3073\u51fa\u3057\u304b\u53ef\u5909\u9577\u5f15\u6570\u3067\u3042\u308b\u5834\u5408\u3001\u305d\u306e\u5f0f\u304c\u8fd4\u3059\u5168\u3066\u306e\u5024\u3092\u30c6\u30fc\u30d6\u30eb\u306b\u8ffd\u52a0\u3059\u308b\u3001\u3053\u3068\u3067\u3059\u3002\n\n\u306a\u304a\u3001\u3053\u308c\u306f\u6700\u7d42\u8981\u7d20\u306e\u5834\u5408\u306e\u307f\u6709\u52b9\u3067\u3059\u3002\n\n\u3053\u306e\u7279\u5fb4\u306f\u3001\u53ef\u5909\u9577\u5f15\u6570\u3092\u6301\u3064\u95a2\u6570\u3084\u3001\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u3092\u4f5c\u6210\u3059\u308b\u969b\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n```lua\nlocal function func()\n  return 1, 2, 3\nend\n{ a, b, c, func() } -- { a, b, c, 1, 2, 3 }\n{ a, b, c, func(), d } -- { a, b, c, 1, d }\n{ a, b, c, func(), nil } -- { a, b, c, 1 }\n```\n\n#### \u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\n\nC \u3067\u306f\u3042\u307e\u308a\u99b4\u67d3\u307f\u304c\u306a\u3044\u3067\u3059\u304c\u3001GC \u3092\u6301\u3064\u8a00\u8a9e\u3067\u306f\u5fc5\u9808\u3068\u3044\u3048\u308b\u6982\u5ff5\u3067\u3001\u901a\u5e38\u306e\u30c6\u30fc\u30d6\u30eb\u3068\u306e\u9055\u3044\u306f C++11 \u306e `shared_ptr` \u3068 `weak_ptr` \u306e\u9055\u3044\u3068\u540c\u3058\u3068\u601d\u3063\u3066\u826f\u3044\u3067\u3059\u3002\n\nLua \u306e\u901a\u5e38\u306e\u30c6\u30fc\u30d6\u30eb\u306f `shared_ptr` \u3068\u540c\u7b49\u3067\u3042\u308a\u3001\u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\u306f `weak_ptr` \u3068\u540c\u7b49\u3067\u3059\u3002\n\n\u4e0a\u8ff0\u3057\u305f\u901a\u308a Lua \u3067\u306f\u3044\u305a\u308c\u304b\u306e\u5909\u6570\u304b\u3089\u53c2\u7167\u3055\u308c\u3066\u3044\u308b\u5024\u306f\u3001\u305d\u306e\u53c2\u7167\u304c\u306a\u304f\u306a\u3089\u306a\u3044\u9650\u308a\u958b\u653e\u3055\u308c\u307e\u305b\u3093\u3002\u4e00\u65b9\u3001\u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\u304b\u3089\u306e\u53c2\u7167\u306f\u3001\u305d\u306e\u5024\u306b\u5bfe\u3059\u308b\u53c2\u7167\u6570\u306b\u306f\u542b\u307e\u306a\u3044\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u5f31\u53c2\u7167\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u6b21\u306e\u30bf\u30a4\u30d7\u304c\u3042\u308a\u307e\u3059\u3002\n\n-   \u30ad\u30fc\u304c\u5f31\u53c2\u7167\u306b\u306a\u308b\n-   \u5024\u304c\u5f31\u53c2\u7167\u306b\u306a\u308b\n-   \u30ad\u30fc\u3068\u5024\u304c\u5f31\u53c2\u7167\u306b\u306a\u308b\n\n\u3053\u308c\u3089\u306f\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u306e `__mode` \u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u3088\u3063\u3066\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n`__mode` \u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u5024\u306f\u6587\u5b57\u5217\u3067\u6307\u5b9a\u3057\u3001\u305d\u306e\u6587\u5b57\u5217\u306b 'k' \u304c\u542b\u307e\u308c\u3066\u3044\u308c\u3070\u30ad\u30fc\u304c\u5f31\u53c2\u7167\u306b\u306a\u308a\u3001'v' \u304c\u542b\u307e\u308c\u3066\u3044\u308c\u3070\u5024\u304c\u5f31\u53c2\u7167\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u3042\u308b\u5024\u304c\u5f31\u53c2\u7167\u306e\u307f\u306b\u306a\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u5f31\u53c2\u7167\u306e\u30a8\u30f3\u30c8\u30ea\u306f\u524a\u9664\u3055\u308c\u307e\u3059\u3002\n\n## \u578b\u60c5\u5831\n\ntype( value ) \u3067\u3001\u5024 value \u306e\u578b\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n-   \"nil\"\n-   \"number\"\n-   \"string\"\n-   \"boolean\"\n-   \"table\"\n-   \"function\"\n-   \"thread\"\n-   \"userdata\"\n\n## \u5909\u6570\n\nLua \u306e\u5909\u6570\u306f\u578b\u3092\u9650\u5b9a\u3057\u307e\u305b\u3093\u3002\u3069\u306e\u3088\u3046\u306a\u5024\u3067\u3082\u683c\u7d0d\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001C89 \u306e\u3088\u3046\u306b\u30d6\u30ed\u30c3\u30af\u306e\u5148\u982d\u306b\u66f8\u304f\u5fc5\u8981\u3082\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u306a\u304a\u3001\u5024\u3092\u4ee3\u5165\u3059\u308b\u524d\u306e\u5909\u6570\u306e\u5024\u306f nil \u3068\u306a\u308a\u307e\u3059\u3002\n\n### \u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3068\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\n\n\u5909\u6570\u306b\u306f\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3068\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u5ba3\u8a00\u306f local \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002local \u3092\u4f7f\u7528\u3057\u306a\u3044\u3068\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u306a\u308a\u307e\u3059\u3002\n\n```lua\nglobalA = 10       -- global \nlocal localA = 10  -- local\n```\n\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u5ba3\u8a00\u306e\u6b21\u306e\u6587\u304b\u3089\u6709\u52b9\u3067\u3001\u30d6\u30ed\u30c3\u30af\u306e\u7d42\u7aef\u3067\u7d42\u308f\u308a\u307e\u3059\u3002\n\n```lua\nvalue = 10               -- global value = 10\ndo\n  local value = value    -- local value = global valule(10)\n  value = value + 1      -- local value = 10 + 1 = 11\n  print( value )         -- local value: 11\nend\nprint( value )           -- global valule: 10\n```\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306f\u3001 \\_ENV \u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\n```lua\nvalue = 10\nif value == _ENV.value then -- true\n  print( \"equals\" )\nend\n```\n\nC \u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306e\u5229\u7528\u3092\u63a7\u3048\u308b\u3053\u3068\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001Lua \u3067\u3082\u7279\u306b\u7406\u7531\u304c\u306a\u3044\u9650\u308a\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u4f7f\u7528\u3059\u308b\u3079\u304d\u3067\u3059\u3002\n\n### \u4ee3\u5165\u6587\n\nLua \u306e\u4ee3\u5165\u306f\u30011\u3064\u306e\u6587\u3067\u8907\u6570\u306e\u5024\u3092\u4ee3\u5165\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u6b21\u306e\u6587\u306f\u30013 \u3064\u306e\u5024\u3092\u4ee3\u5165\u3059\u308b\u540c\u3058\u51e6\u7406\u3067\u3059\u3002\n\n```lua\nvalue1 = 1\nvalue2 = 2\nvalue3 = 3\n\nvalue1, value2, value3 = 1, 2, 3\n```\n\n\u306a\u304a\u3001\u4ee3\u5165\u5148\u306e\u5909\u6570\u306b\u5bfe\u3057\u3066\u4ee3\u5165\u5143\u306e\u5024\u306e\u500b\u6570\u304c\u8db3\u308a\u306a\u3044\u5834\u5408\u3001\u8db3\u308a\u306a\u3044\u5206\u306f nil \u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002\u4ee3\u5165\u5143\u306e\u5024\u304c\u591a\u3044\u5834\u5408\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\n\n\u4ee3\u5165\u6587\u3067\u3082\u3001\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u3088\u3046\u306b\u6700\u7d42\u5f0f\u304c\u95a2\u6570\u547c\u3073\u51fa\u3057\u304b\u3001\u53ef\u5909\u9577\u5f0f\u306e\u5834\u5408\u306f\u3001\u305d\u306e\u5024\u5168\u3066\u304c\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\n\n```lua\nlocal function func()\n  return 10, 20\nend\nvalue1, value2, value3 = 0, func() -- value1 = 0, value2 = 10, value2 = 20\n```\n\n\u4ee3\u5165\u306f\u3001\u53f3\u8fba\u306e\u5168\u3066\u306e\u5024\u304c\u8a55\u4fa1\u3055\u308c\u3001\u305d\u306e\u5f8c\u305d\u308c\u305e\u308c\u306e\u5024\u304c\u5de6\u8fba\u306b\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001X, Y \u306e\u5024\u3092 swap \u3059\u308b\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```lua\nX,Y = Y,X\n```\n\n\u306a\u304a\u3001Lua \u306e\u4ee3\u5165\u6587\u306f\u3001\u5024\u3092\u6301\u3061\u307e\u305b\u3093\u3002\u3088\u3063\u3066\u3001C \u306e\u69d8\u306a\u4ee3\u5165\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n```lua\nint value1 = value2 = 0;\n```\n\n## \u5236\u5fa1\u6587\n\nLua \u306b\u306f\u3001\u6b21\u306e\u5236\u5fa1\u6587\u304c\u3042\u308a\u307e\u3059\u3002\n\n-   if\n-   white\n-   repeat\n-   for\n\n\u305d\u308c\u305e\u308c\u306e\u6761\u4ef6\u5f0f\u306f\u3001false \u3068 nil \u304c\u507d\u3068\u6271\u308f\u308c\u3001\u305d\u308c\u4ee5\u5916\u304c\u771f\u3068\u306a\u308a\u307e\u3059\u3002\n\n### if \u6587\n\n**if** exp **then** block {**elseif** exp **then** block} [ **else** block] **end**\n\nLua \u306e if \u306f\u4e0a\u8a18\u69cb\u6587\u3067\u3059\u3002\u3053\u3053\u3067 {} \u306f 0 \u4ee5\u4e0a\u6307\u5b9a\u53ef\u80fd\u306a\u30d6\u30ed\u30c3\u30af\u3092\u793a\u3057\u307e\u3059\u3002[] \u306f\u3001\u7701\u7565\u53ef\u80fd\u306a\u30d6\u30ed\u30c3\u30af\u3092\u793a\u3057\u307e\u3059\u3002\n\n\u6b21\u304c C \u3068\u306e\u5dee\u5206\u3067\u3059\u3002\n\n-   \u6761\u4ef6\u5f0f\u306b () \u304c\u4e0d\u8981\n-   \u5fc5\u305a end \u304c\u5fc5\u8981\n-   else if \u3067\u306f\u306a\u304f elseif \u304c\u3042\u308b\n\n### while \u6587\n\n**while** exp **do** block **end**\n\nLua \u306e while \u306f\u4e0a\u8a18\u69cb\u6587\u3067\u3059\u3002\n\n\u6b21\u304c C \u3068\u306e\u5dee\u5206\u3067\u3059\u3002\n\n-   \u6761\u4ef6\u5f0f\u306b () \u304c\u4e0d\u8981\n-   \u5fc5\u305a end \u304c\u5fc5\u8981\n\n### repeat \u6587\n\n**repeat** block **until** exp\n\nLua \u306e repeat \u306f\u4e0a\u8a18\u69cb\u6587\u3067\u3059\u3002\n\nuntil \u306e exp \u304c\u771f\u306b\u306a\u308b\u307e\u3067\u3001block \u3092\u7e70\u308a\u8fd4\u3057\u307e\u3059\u3002\n\n\u306a\u304a\u3001exp \u3067\u306f block \u3067\u5ba3\u8a00\u3057\u305f\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n### for \u6587\n\nfor \u6587\u306f 2 \u7a2e\u985e\u3042\u308a\u307e\u3059\u3002\n\n#### **for** v **=** e1, e2 [, e3] **do** block **end**\n\n\u3053\u308c\u306f\u3001C \u306e for \u6587\u3068\u4f3c\u3066\u3044\u307e\u3059\u3002\n\n```C\nint v;\nfor ( v = e1; v <= e2; v += e3 ) {\n}\n```\n\n\u3057\u304b\u3057\u3001\u6b21\u306e\u70b9\u3067\u5927\u304d\u304f\u7570\u306a\u308b\u305f\u3081 **\u6ce8\u610f** \u304c\u5fc5\u8981\u3067\u3059\u3002\n\n-   e1, e2, e3 \u306f\u3001\u30eb\u30fc\u30d7\u958b\u59cb\u524d\u306e\u4e00\u5ea6\u3060\u3051\u8a55\u4fa1\u3055\u308c\u308b\n-   e3 \u3092\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f 1 \u304c\u4f7f\u7528\u3055\u308c\u308b\n-   v \u306e\u30b9\u30b3\u30fc\u30d7\u306f for \u6587\u5185\u306e\u307f\n\n#### **for** v **in** exp **do** block **end**\n\n\u3053\u308c\u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u305f\u30eb\u30fc\u30d7\u5236\u5fa1\u3067\u3059\u3002\n\n```lua\nfor key, value in pairs( tbl ) do\n  print( key, value )\nend\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb tbl \u306e\u8981\u7d20\u3092\u5217\u6319\u3059\u308b\u3088\u3046\u306a\u5834\u5408\u306b\u5229\u7528\u3057\u307e\u3059\u3002\n\nexp \u306f\u3001\u6b21\u306e\u5024\u3092\u8fd4\u3059\u5f0f\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nlocal func, param, prev = exp\n\n\u3053\u3053\u3067 func \u306f\u3001\u6b21\u306e\u5024\u3092\u8fd4\u3059\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570\u3067\u3059\u3002\n\nlocal next<sub>1</sub>, next<sub>2</sub>, &#x2026;, next<sub>n</sub> = func( param, prev )\n\n\u3053\u3053\u3067 next<sub>1</sub> \u301c next<sub>n</sub> \u306f\u3001\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570\u3067\u5217\u6319\u3059\u308b\u5024\u306e 1 \u96c6\u5408\u3067\u3059\u3002\u4e0a\u306e pairs \u306e\u4f8b\u3067\u306f\u3001 key, value \u304c\u305d\u308c\u306b\u3042\u305f\u308a\u307e\u3059\u3002n \u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570\u5074\u306b\u3088\u3063\u3066\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570 func \u306f\u3001prev \u304c nil \u306e\u5834\u5408\u306b\u5217\u6319\u3059\u308b\u5148\u982d\u306e\u5024\u306e\u96c6\u5408\u3092\u8fd4\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002for \u6587\u306f\u3001\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570 func \u304c\u8fd4\u3059 next<sub>1</sub> \u304c nil \u306e\u5834\u5408\u3001\u30eb\u30fc\u30d7\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070 1, \"1\" : 2, \"2\" : \u301c : N, \"N\" \u3092\u5217\u6319\u3059\u308b\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```lua\nlocal function ite( param, prev )\n   if prev == param then\n      return nil\n   end\n   if prev == nil then\n      prev = 0\n   end\n   local next = prev + 1\n   return next, string.format( \"%d\", next )\nend\n\nfor value1, value2  in ite, 10, nil do\n   print( string.format( '%d \"%s\"',  value1, value2 ) ) -- 1, \"1\" : 2, \"2\" : \u301c : 10, \"10\"\nend\n```\n\n#### pairs(), ipairs() \u95a2\u6570\n\npairs(), ipairs() \u95a2\u6570\u306f\u3001 for \u6587\u3067\u30c6\u30fc\u30d6\u30eb\u306e\u8981\u7d20\u3092\u5217\u6319\u3059\u308b\u305f\u3081\u306b\u5229\u7528\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n\npairs() \u3068 ipairs() \u306e\u5dee\u5206\u3092\u6ce8\u610f\u3057\u3066\u4f7f\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n-   **pairs() \u306f\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u5168\u8981\u7d20\u3092\u5217\u6319\u3059\u308b\u3002**\n-   **ipairs() \u306f\u3001\u30b7\u30fc\u30b1\u30f3\u30b9\u306e\u8981\u7d20\u306e\u307f\u3092\u5bfe\u8c61\u306b\u5217\u6319\u3059\u308b\u3002**\n\n### break \u6587\n\nLua \u306e break \u6587\u306f\u3001\u57fa\u672c\u7684\u306b C \u8a00\u8a9e\u3068\u4ee3\u308f\u308a\u307e\u305b\u3093\u3002\n\nbreak \u6587\u306f\u3001white, repeat, for \u6587\u306e\u30eb\u30fc\u30d7\u3092\u629c\u3051\u307e\u3059\u3002\n\n\u30eb\u30fc\u30d7\u304c\u5165\u308c\u5b50\u306b\u306a\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u6700\u3082\u5185\u5074\u306e\u30eb\u30fc\u30d7\u3092\u629c\u3051\u307e\u3059\u3002\n\n### continue \u6587\n\nLua \u306b\u306f continue \u304c\u3042\u308a\u307e\u305b\u3093\u3002\n\n### goto\n\nLua \u3067\u306f\u3001 goto \u3067\u6240\u5b9a\u306e\u30e9\u30d9\u30eb\u306b\u5206\u5c90\u3067\u304d\u307e\u3059\u3002\u3057\u304b\u3057\u3001 Lua \u306f goto \u3092\u4f7f\u7528\u305b\u305a\u3068\u3082\u7c21\u5358\u306b\u7570\u5e38\u7cfb\u3092\u8a18\u8f09\u3067\u304d\u308b\u306e\u3067goto \u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u6027\u306f\u304b\u306a\u308a\u4f4e\u3044\u3067\u3059\u3002\n\n\u4f8b\u3048\u3070 C \u8a00\u8a9e\u3067\u306f\u3001\u7570\u5e38\u7cfb\u3092\u6b21\u306e\u3088\u3046\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\n```c\n{\n   int handle1 = openHandle( \"a\" );\n   int handle2 = openHandle( \"b\" );\n   if ( !func1( handle1, handle2 ) ) {\n      goto end\n   }\n   if ( !func2( handle1, handle2 ) ) {\n      goto end\n   }\n   if ( !func3( handle1, handle2 ) ) {\n      goto end\n   }\n   func4()\nend:\n   closeHandle( handle1 );\n   closeHandle( handle2 );\n}\n```\n\n\u3053\u306e\u3088\u3046\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u3067\u3001\u6761\u4ef6\u6587\u6bce\u306b closeHandle() \u3068 return \u3092\u8a18\u8f09\u3059\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u3082\u3061\u308d\u3093\u3001\u305d\u3082\u305d\u3082 if \u6587\u3092\u30cd\u30b9\u30c8\u3059\u308b\u3088\u3046\u306b\u66f8\u3051\u3070\u3001\u305d\u3093\u306a\u3053\u3068\u3092\u3059\u308b\u5fc5\u8981\u3082\u306a\u3044\u3068\u8a00\u3048\u307e\u3059\u304c\u3001\u305d\u306e\u5834\u5408\u30cd\u30b9\u30c8\u304c\u304b\u306a\u308a\u6df1\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u6df1\u3044\u30cd\u30b9\u30c8\u3068\u3001goto \u6587\u3069\u3061\u3089\u304c\u826f\u3044\u304b\u306f\u8b70\u8ad6\u306e\u5225\u308c\u308b\u3068\u3053\u308d\u3060\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u305d\u308c\u306f\u5225\u306e\u6a5f\u4f1a\u306b\u8b72\u308a\u307e\u3059\u3002\n\nLua \u3067\u306f\u4e0a\u8a18\u306e\u3088\u3046\u306a\u5834\u5408\u3001goto \u3092\u4f7f\u3046\u3053\u3068\u306a\u304f\u6b21\u306e\u3088\u3046\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```lua\ndo\n   local handle1 = openHandle( \"a\" )\n   local handle2 = openHandle( \"b\" )\n\n   pcall( function()\n             if not func1( handle1, handle2 ) then\n                return\n             end\n             if not func2( handle1, handle2 ) then\n                return\n             end\n             if not func3( handle1, handle2 ) then\n                return\n             end\n          end )\n   func4()\n\n   closeHandle( handle1 )\n   closeHandle( handle2 )\nend\n```\n\nLua \u3067 goto \u6587\u3092\u4f7f\u3046\u7406\u7531\u304c\u3042\u308b\u3068\u3059\u308c\u3070\u3001C \u8a00\u8a9e\u3067 goto \u6587\u3092\u4f7f\u3063\u3066\u4f5c\u6210\u3055\u308c\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6a5f\u68b0\u7684\u306b Lua \u30b9\u30af\u30ea\u30d7\u30c8\u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u306e\u5b9f\u73fe\u3092\u3088\u308a\u7c21\u5358\u306b\u3059\u308b\u305f\u3081\u3001\u304f\u3089\u3044\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u30d6\u30ed\u30c3\u30af\n\nC \u306e\u5236\u5fa1\u6587\u306f\u3001\u30d6\u30ed\u30c3\u30af\u6587\u3068\u3057\u3066\u5ba3\u8a00\u3057\u306a\u3044\u3068 1 \u6587\u3057\u304b\u51e6\u7406\u5bfe\u8c61\u306b\u306a\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u304c\u3001Lua \u306e\u5236\u5fa1\u6587\u306f\u5fc5\u305a\u30d6\u30ed\u30c3\u30af\u3092\u51e6\u7406\u5bfe\u8c61\u3068\u3057\u3001\u7d42\u7aef\u306b end \u3092\u5fc5\u8981\u3068\u3057\u307e\u3059\u3002\n\n\u3088\u3063\u3066\u3001C \u306e\u69d8\u306b\u660e\u793a\u7684\u306b\u30d6\u30ed\u30c3\u30af\u6587\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u6ec5\u591a\u306b\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u5236\u5fa1\u6587\u4ee5\u5916\u306e\u5834\u6240\u3067\u30d6\u30ed\u30c3\u30af\u6587\u3092\u660e\u793a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n**do** block **end** \n\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b do end \u3067\u56f2\u3093\u3060\u500b\u6240\u304c\u30d6\u30ed\u30c3\u30af\u3068\u306a\u308a\u307e\u3059\u3002\n\n## \u8ad6\u7406\u6f14\u7b97\n\n\u8ad6\u7406\u6f14\u7b97\u306f\u6b21\u306e 3 \u3064\u3067\u3059\u3002\n\n-   not\n-   or\n-   and\n\n\u771f\u3001\u507d\u306e\u6271\u3044\u306f\u6761\u4ef6\u5f0f\u3068\u540c\u3058\u3067\u3001false \u3068 nil \u304c\u507d\u3067\u3001\u305d\u308c\u4ee5\u5916\u304c\u771f\u3067\u3059\u3002\n\n### not\n\nnot \u306f\u771f\u30fb\u507d\u3092\u53cd\u8ee2\u3057\u307e\u3059\u3002\n\n```lua\nnot false -- true\nnot nil -- true\nnot true -- false\nnot 1 -- false\n```\n\n\u7d50\u679c\u306f\u3001\u5fc5\u305a true \u304b false \u306b\u306a\u308a\u307e\u3059\u3002\n\n### or\n\nor \u306f\u771f\u306b\u306a\u308b\u307e\u3067\u5024\u3092\u8a55\u4fa1\u3057\u307e\u3059\u3002or \u306e\u7d50\u679c\u306f\u3001\u771f\u306b\u306a\u308b\u307e\u3067\u6700\u7d42\u7684\u306b\u8a55\u4fa1\u3057\u305f\u5024\u3067\u3059\u3002\n\n```lua\nnil or false or 1 -- 1\nnil or 2 or 3 -- 2\n4 or 5 -- 4\nnil or false -- false\n```\n\n### and\n\nand \u306f\u3001\u507d\u306b\u306a\u308b\u307e\u3067\u5024\u3092\u8a55\u4fa1\u3057\u307e\u3059\u3002and \u306e\u7d50\u679c\u306f\u3001\u507d\u306b\u306a\u308b\u307e\u3067\u6700\u7d42\u7684\u306b\u8a55\u4fa1\u3057\u305f\u5024\u3067\u3059\u3002\n\n```lua\n1 and 2 and 3 and nil -- nil\n1 and 2 and 3 -- 3\n1 and false and 2 -- false\n```\n\n## \u95a2\u4fc2\u6f14\u7b97\n\n\u95a2\u4fc2\u6f14\u7b97\u306f\u6b21\u306e\u3082\u306e\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002~= \u4ee5\u5916\u306f C \u3068\u540c\u3058\u3067\u3059\u3002\n\n-   ==\n    -   \u7b49\u3057\u3044\n-   ~=\n    -   \u7b49\u3057\u304f\u306a\u3044\n-   <\n    \n    -   \u3088\u308a\u5c0f\u3055\u3044\n-   `>`\n    -   \u3088\u308a\u5927\u304d\u3044\n-   <=\n    -   \u5c0f\u3055\u3044\u307e\u305f\u306f\u7b49\u3057\u3044\n-   `>=`\n    -   \u5927\u304d\u3044\u307e\u305f\u306f\u7b49\u3057\u3044\n\n## \u7b97\u8853\u6f14\u7b97\n\n\u7b97\u8853\u6f14\u7b97\u306f\u6b21\u306e\u3082\u306e\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u9664\u7b97\u3068\u7d2f\u4e57\u4ee5\u5916\u306f C \u3068\u540c\u3058\u3067\u3059\u3002\n\n-   `+`\n    -   \u52a0\u7b97\n-   `-`\n    -   \u6e1b\u7b97\n-   `*`\n    -   \u4e57\u7b97\n-   `/`\n    -   \u6d6e\u52d5\u5c0f\u6570\u70b9\u6570\u9664\u7b97\n-   `//`\n    -   \u5207\u308a\u6368\u3066\u9664\u7b97 **5.2 \u306f\u975e\u30b5\u30dd\u30fc\u30c8**\n-   `%`\n    -   \u5270\u4f59\n-   `^`\n    -   \u7d2f\u4e57\n-   `-`\n    -   \u5358\u9805\u30de\u30a4\u30ca\u30b9\n\n## \u30d3\u30c3\u30c8\u6f14\u7b97\n\n\u30d3\u30c3\u30c8\u6f14\u7b97\u3092\u884c\u306a\u3046\u5834\u5408\u3001\u5024\u306f 32bit \u306e\u6574\u6570\u306b\u4e38\u3081\u3089\u308c\u3066\u304b\u3089\u6f14\u7b97\u304c\u884c\u306a\u308f\u308c\u307e\u3059\u3002\n\n\u307e\u305f\u3001Lua \u306e\u30d0\u30fc\u30b8\u30e7\u30f3 5.2 \u3068 5.3 \u3068\u3067\u3001\u30d3\u30c3\u30c8\u6f14\u7b97\u306e\u4ed5\u69d8\u304c\u5927\u304d\u304f\u4ee3\u308f\u308a\u307e\u3059\u3002\n\n-   \u5229\u7528\u65b9\u6cd5\n    -   5.2 \u3067\u306f bit \u6f14\u7b97\u7528\u30d1\u30c3\u30b1\u30fc\u30b8 bit32 \u306e\u95a2\u6570\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n    -   5.3 \u3067\u306f C \u3068\u540c\u69d8\u306b bit \u6f14\u7b97\u7528\u306e\u6f14\u7b97\u5b50\u3092\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n-   \u53f3\u30b7\u30d5\u30c8\n    -   5.2 \u3067\u306f\u7b97\u8853\u30b7\u30d5\u30c8\u3067\u3059\u3002(\u6700\u4e0a\u4f4d\u30d3\u30c3\u30c8\u304c\u30b3\u30d4\u30fc\u3055\u308c\u308b)\n    -   5.3 \u3067\u306f\u8ad6\u7406\u30b7\u30d5\u30c8\u3067\u3059\u3002(\u6700\u4e0a\u4f4d\u30d3\u30c3\u30c8\u306b\u306f 0 \u304c\u5165\u308b)\n\n## \u95a2\u6570\n\nC \u306e\u95a2\u6570\u306f\u3001\u5fc5\u305a\u540d\u524d(\u30b7\u30f3\u30dc\u30eb)\u304c\u7d10\u4ed8\u3044\u3066\u3044\u307e\u3059\u304c\u3001 \nLua \u306e\u95a2\u6570\u306f\u540d\u524d\u306b\u7d10\u4ed8\u3044\u3066\u3044\u308b\u3068\u306f\u9650\u308a\u307e\u305b\u3093\u3002\n\nC \u306e\u95a2\u6570\u306f\u3001\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u3092\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u578b\u306e\u5909\u6570\u306b\u4ee3\u5165\u3057\u3066\u3001\u305d\u306e\u5909\u6570\u304b\u3089\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u304c\u3001Lua \u306e\u5834\u5408\u306f\u3001\u57fa\u672c\u7684\u306b\u305d\u306e\u3088\u3046\u306a\u4f7f\u3044\u65b9\u306b\u306a\u308a\u307e\u3059\u3002\n\nLua \u306e\u95a2\u6570\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570\u306f\u3001\u5358\u306a\u308b\u5909\u6570\u306a\u306e\u3067\u5f8c\u304b\u3089\u5225\u306e\u5024(\u95a2\u6570)\u3092\u4ee3\u5165\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u3082\u3061\u308d\u3093\u95a2\u6570\u3067\u306a\u3044\u5024\u3092\u4ee3\u5165\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u307e\u305f\u3001\u5909\u6570\u306a\u306e\u3067\u30b0\u30ed\u30fc\u30d0\u30eb\u3068 local \u304c\u3042\u308a\u307e\u3059\u3002\n\n### \u5b9a\u7fa9\n\n\u6b21\u306e\u5b9a\u7fa9\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\n\n-   name = **function(** args **)** block **end**\n-   **local** name; name = **function(** args **)** block **end**\n\n1 \u756a\u76ee\u304c\u30b0\u30ed\u30fc\u30d0\u30eb\u95a2\u6570\u3067\u3001 2 \u756a\u76ee\u304c\u30ed\u30fc\u30ab\u30eb\u95a2\u6570\u3067\u3059\u3002name \u304c\u95a2\u6570\u540d\u3001args \u306f\u5f15\u6570\u3001block \u306f\u95a2\u6570\u306e\u51e6\u7406\u3067\u3059\u3002args \u306f 0 \u500b\u4ee5\u4e0a\u306e\u5909\u6570\u3067\u3059\u3002\u307e\u305f\u3001args \u306f\u95a2\u6570\u5185\u304c\u30b9\u30b3\u30fc\u30d7\u306b\u306a\u308b\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3068\u306a\u308a\u307e\u3059\u3002\n\nfunction() end \u304c\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u5f0f\u3067\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002local \u306e\u5834\u5408\u3001\u5909\u6570\u306b\u4ee3\u5165\u3059\u308b\u524d\u306b local \u5909\u6570\u306e\u5ba3\u8a00\u3092\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u518d\u5e30\u547c\u3073\u51fa\u3057\u3092\u884c\u306a\u3046\u969b\u306b\u3001\u305d\u306e\u95a2\u6570\u81ea\u8eab\u3092\u547c\u3076\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\n\u306a\u304a\u3001\u95a2\u6570\u5b9a\u7fa9\u306f\u6b21\u306e\u3088\u3046\u306b\u3082\u66f8\u3051\u307e\u3059\u3002\n\n-   **function** name **(** args **)** block **end**\n-   local **function** name **(** args **)** block **end**\n\n\u3053\u308c\u306f\u4e0a\u8a18\u3068\u5168\u304f\u540c\u3058\u610f\u5473\u3092\u6301\u3061\u307e\u3059\u3002\n\n\u7279\u306b\u7406\u7531\u304c\u306a\u3044\u9650\u308a\u3001\u95a2\u6570\u5b9a\u7fa9\u306f\u5f8c\u8005\u306e\u66f8\u5f0f\u3067\u66f8\u3044\u305f\u65b9\u304c\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n### \u95a2\u6570\u547c\u3073\u51fa\u3057\n\n\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b () \u3092\u4ed8\u3051\u308b\u3053\u3068\u306b\u3088\u3063\u3066\u95a2\u6570\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002() \u306b\u306f\u3001\u5f15\u6570\u3092\u4e0e\u3048\u307e\u3059\u3002\n\n```lua\nlocal function func( value )\n  return value + 1\nend\nprint( \"value = \", func( 1 ) ) -- 2\nprint( \"value = \", (function(value) return value + 2 end)(1) ) -- 3\n```\n\n\u4e0a\u8a18 5 \u884c\u76ee\u306e\u3088\u3046\u306b\u3001 **function()** body **end** \u3067\u53d6\u5f97\u3057\u305f\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u76f4\u63a5 () \u3092\u4ed8\u3051\u3066\u3082\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n\u4e0e\u3048\u305f\u5f15\u6570\u3068\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u5b9a\u7fa9\u3057\u305f\u5f15\u6570\u306b\u9055\u3044\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u4ee3\u5165\u6587\u3067\u8aac\u660e\u3057\u305f\u901a\u308a\u8db3\u308a\u306a\u3044\u5834\u5408\u306f nil \u3092\u8a2d\u5b9a\u3001\u591a\u3044\u5834\u5408\u306f\u7121\u8996\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u52d5\u4f5c\u306b\u306a\u308b\u305f\u3081\u3001C++ \u306e\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u306e\u6982\u5ff5\u306f Lua \u306b\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n### \u53ef\u5909\u9577\u5f15\u6570\n\nC \u306e printf \u306e\u3088\u3046\u306b\u3001\u53ef\u5909\u9577\u306e\u5f15\u6570\u3092\u6301\u3064\u95a2\u6570\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n**function(** &#x2026; **)**\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5f15\u6570\u306e\u5ba3\u8a00\u90e8\u306b &#x2026; \u3092\u8a18\u8f09\u3059\u308b\u3053\u3068\u3067\u3001\u305d\u3053\u306f\u53ef\u5909\u9577\u5f15\u6570\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u53ef\u5909\u9577\u5f15\u6570\u306f\u3001\u6b21\u306e\u3088\u3046\u306b\u305d\u306e\u307e\u307e &#x2026; \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u4e0e\u3048\u3089\u308c\u305f\u5f15\u6570\u3092\u8868\u73fe\u3067\u304d\u307e\u3059\u3002\n\n```lua\nlocal function log( ... )\n  if enableLogFlag then\n    print( ... )\n  end\nend\nlog( \"test\", \"hoge\" )\n```\n\nreturn &#x2026; \u3067\u3001\u53ef\u5909\u9577\u5f15\u6570\u3092\u305d\u306e\u307e\u307e\u8fd4\u3059\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n&#x2026; \u306b\u4f55\u304c\u4e0e\u3048\u3089\u308c\u3066\u3044\u308b\u306e\u304b\u3092\u8abf\u3079\u305f\u3044\u5834\u5408\u306f\u3001{&#x2026;} \u3067\u3001\u305d\u306e\u53ef\u5909\u9577\u5f15\u6570\u3092\u8981\u7d20\u306b\u6301\u3064\u30c6\u30fc\u30d6\u30eb\u3092\u751f\u6210\u3067\u304d\u308b\u306e\u3067\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u4f5c\u6210\u3057\u305f\u5f8c\u306f\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u5bfe\u3059\u308b\u901a\u5e38\u306e\u64cd\u4f5c\u3092\u884c\u306a\u3048\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u3053\u308c\u306f\u4e0a\u8a18\u306e\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u8aac\u660e\u3057\u305f\u901a\u308a\u6700\u7d42\u8981\u7d20\u306e\u307f\u306e\u7279\u5fb4\u3067\u3042\u308b\u305f\u3081\u3001\u6b21\u306e\u5834\u5408\u306f\u53ef\u5909\u9577\u5f15\u6570\u306e\u5148\u982d\u8981\u7d20\u3060\u3051\u3092\u6301\u3064\u30c6\u30fc\u30d6\u30eb\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n{&#x2026;,nil}\n\n```lua\nlocal function log( ... )\n  local val1 = {...}\n  print( val1[1], val1[2] ) -- \"test\" \"hoge\"\n  local val2 = {...,nil}\n  print( val2[1], val2[2] ) -- \"test\" nil\nend\nlog( \"test\", \"hoge\" )\n```\n\n### return\n\n\u95a2\u6570\u3092\u7d42\u4e86\u3057\u3001\u623b\u308a\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u95a2\u6570\u306e\u623b\u308a\u5024\u3082\u8907\u6570\u500b\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```lua\nlocal function func()\n  return 1, 2, 3\nend\nlocal val1, val2, val3 = func() -- val1 = 1, val2 = 2, val3 = 3\n```\n\n## \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\n\nLua \u3067\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u305f\u3060\u3057\u3001C++ \u306e private, protected \u306e\u3088\u3046\u306a\u30a2\u30af\u30bb\u30b9\u5236\u5fa1 ~~\u3084\u3001\u7d99\u627f~~ \u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n### \u5b9a\u7fa9\n\n#### \u30af\u30e9\u30b9\u5b9a\u7fa9\n\n```lua\nlocal classA = { value = 0 }\nfunction classA:func()\n  return self.value\nend\nclassA:func() -- 0\n```\n\n\u4e0a\u8a18\u306e\u5b9a\u7fa9\u3067 classA \u306e func \u306b return self.value \u3092\u884c\u306a\u3046\u95a2\u6570\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3053\u3067 self \u306f\u3001func() \u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u30c6\u30fc\u30d6\u30eb\u305d\u306e\u3082\u306e\u3092\u793a\u3057\u307e\u3059\u3002C++ \u306e this \u3068\u540c\u3058\u3067\u3059\u3002\n\n\u30e1\u30bd\u30c3\u30c9\u3001\u30e1\u30f3\u30d0\u306f\u8907\u6570\u6301\u3066\u307e\u3059\u3002\n\n```lua\nlocal classA = { total = 0, value = 1 }\nfunction classA:getTotal()\n  return self.total\nend\nfunction classA:add()\n  self.total = self.total + self.value\nend\nfunction classA:setValue( val )\n  self.value = val\nend\nprint( classA:getTotal() ) -- 0\nclassA:add()\nprint( classA:getTotal() ) -- 1\nclassA:setValue( 2 )\nclassA:add()\nprint( classA:getTotal() ) -- 3\n```\n\n\u306a\u304a\u3001\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u3088\u3046\u306b\u3082\u8a18\u8f09\u3067\u304d\u307e\u3059\u3002\n\n```lua\nlocal classA = { value = 0 }\nfunction classA.func( self )\n  return self.value\nend\nclassA.func( classA ) -- 0\n```\n\n\u3061\u3087\u3063\u3068\u9055\u3044\u304c\u5206\u304b\u308a\u96e3\u3044\u3067\u3059\u304c\u3001\u6b21\u306e\u70b9\u304c\u7570\u306a\u308a\u307e\u3059\u3002\n\n-   : \u3067\u306f\u306a\u304f . \u306b\u306a\u3063\u3066\u3044\u308b\n-   \u95a2\u6570\u5b9a\u7fa9\u306e\u5f15\u6570\u306b self \u304c\u5165\u3063\u3066\u3044\u308b\n-   \u30e1\u30bd\u30c3\u30c9\u547c\u3073\u51fa\u3057\u306e\u5f15\u6570\u306b classA \u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\n\n`: \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001Lua \u304c\u4e0a\u8a18\u306e\u51e6\u7406\u3092\u884c\u306a\u3063\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002`\n\n\u306a\u304a\u3001: \u3092\u5229\u7528\u3057\u305f\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u306f self \u304c\u81ea\u52d5\u7684\u306b\u5229\u7528\u3055\u308c\u307e\u3059\u304c\u3001. \u3092\u5229\u7528\u3057\u305f\u95a2\u6570\u5b9a\u7fa9\u3067\u306f self \u306e\u90e8\u5206\u306b\u4f55\u3092\u4f7f\u3046\u304b\u306f\u30e6\u30fc\u30b6\u6b21\u7b2c\u3067\u3059\u3002\u3067\u3059\u304c\u3001self \u3092\u4f7f\u3046\u306e\u304c\u6df7\u4e71\u305b\u305a\u306b\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n\u5225\u306e\u8a18\u8f09\u306e\u65b9\u6cd5\u3068\u3057\u3066\u3001\u6b21\u306e\u3088\u3046\u306b\u3082\u3067\u304d\u307e\u3059\u3002\n\n```lua\nlocal classA = {\n  value = 0,\n  get = function( self )\n     return self.value\n  end,\n  set = function( self, value )\n     self.value = value\n  end,\n}\nprint( classA:get() ) -- 0\nclassA.set( classA, 1 )\nprint( classA.get( classA ) ) -- 1\n```\n\n\u3053\u308c\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u4e2d\u306b\u30e1\u30bd\u30c3\u30c9\u5b9a\u7fa9\u3092\u542b\u3081\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u3002\u306a\u304a\u3001\u30c6\u30fc\u30d6\u30eb\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u306f : \u3092\u5229\u7528\u3057\u305f\u5b9a\u7fa9\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\n#### \u7d99\u627f\n\nLua \u3067\u30af\u30e9\u30b9\u306e\u7d99\u627f\u304c\u53ef\u80fd\u3067\u3059\u3002\u7d99\u627f\u306e\u5b9f\u73fe\u65b9\u6cd5\u306b\u306f\u8907\u6570\u306e\u5b9f\u88c5\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u3002\u4eca\u56de\u7d39\u4ecb\u3059\u308b\u65b9\u6cd5\u306f\u3001\u3042\u304f\u307e\u3067 1 \u3064\u306e\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\n\n```lua\n--[[ 1]] function DefClass( SuperClass ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u7528\u95a2\u6570\n--[[ 2]]    local NewClass = {}\n--[[ 3]]    setmetatable( NewClass, { __index = SuperClass } )\n--[[ 4]]    function NewClass:super( ... )\n--[[ 5]]       local obj = {}\n--[[ 6]]       if SuperClass then\n--[[ 7]]         obj = SuperClass:new( ... )\n--[[ 8]]       end\n--[[ 9]]       setmetatable( obj, { __index = NewClass } )\n--[[10]]       return obj\n--[[11]]    end\n--[[12]]    function NewClass:new( ... )\n--[[13]]       return self:super( ... )\n--[[14]]    end\n--[[15]]    return NewClass\n--[[16]] end\n--[[17]] \n--[[18]] local SuperClass = DefClass( nil ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u3002 \u7d99\u627f\u7121\u3057\n--[[19]] function SuperClass:new( value )\n--[[20]]   local obj = self:super() -- \u89aa\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\n--[[21]]   obj.valueA = value\n--[[22]]   return obj\n--[[23]] end\n--[[24]] function SuperClass:funcA()\n--[[25]]   return self.valueA\n--[[26]] end\n--[[27]] \n--[[28]] local SubClass = DefClass( SuperClass ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u3002  SuperClass \u3092\u7d99\u627f\u3002 \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3002\n--[[29]] function SubClass:funcB()\n--[[30]]   return self.valueA + 10\n--[[31]] end\n--[[32]] \n--[[33]] local SubSubClass = DefClass( SubClass ) -- \u30af\u30e9\u30b9\u5b9a\u7fa9\u3002 SubClass \u3092\u7d99\u627f\n--[[34]] function SubSubClass:new( value1, value2 )\n--[[35]]   local obj = self:super( value1 ) -- \u89aa\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\n--[[36]]   obj.valueC = value2\n--[[37]]   return obj\n--[[38]] end\n--[[39]] function SubSubClass:funcC()\n--[[40]]   return self.valueC\n--[[41]] end\n--[[42]] \n--[[43]] local obj = SuperClass:new( 1 )\n--[[44]] print( obj:funcA(), obj.funcB, obj.funcC ) -- 1, nil, nil\n--[[45]] obj = SubClass:new( 1 )\n--[[46]] print( obj:funcA(), obj:funcB(), obj.funcC) -- 1, 11, nil\n--[[47]] obj = SubSubClass:new( 1, 2 )\n--[[48]] print( obj:funcA(), obj:funcB(), obj:funcC() ) -- 1, 11, 2\n```\n\n-   \u30b5\u30f3\u30d7\u30eb\u6982\u8981\n\n\u3053\u308c\u306f SuperClass, SubClass, SubSubClass \u3092\u5b9a\u7fa9\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u3059\u3002\u540d\u524d\u306e\u901a\u308a\u3001 SubSubClass \u306f SubClass \u3092\u7d99\u627f\u3057\u3066\u3044\u307e\u3059\u3002SubClass \u306f SuperClass \u3092\u7d99\u627f\u3057\u3066\u3044\u307e\u3059\u3002SuperClass \u306f\u4f55\u3082\u7d99\u627f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n-   \u30af\u30e9\u30b9\u5b9a\u7fa9\u7528\u95a2\u6570\n\n\u307e\u305a 1\u301c16 \u884c\u76ee\u306f\u3001\u30af\u30e9\u30b9\u5b9a\u7fa9\u7528\u306e\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002DefClass( SuperClass ) \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067 \u3001\nSuperClass \u30af\u30e9\u30b9\u3092\u89aa\u30af\u30e9\u30b9\u306b\u6301\u3064\u65b0\u3057\u3044\u30af\u30e9\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u306a\u304a\u3001\u3053\u306e\u95a2\u6570\u3067\u5b9a\u7fa9\u3057\u305f\u30af\u30e9\u30b9\u306b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u4f5c\u6210\u3059\u308b\u5834\u5408\u3001new \u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u95a2\u6570\u3092\u30bb\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u5185\u3067\u306f\u3001super \u30d5\u30a3\u30fc\u30eb\u30c9\u3067\u89aa\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30bf\u3092\u547c\u3073\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u30b3\u30f3\u30b9\u30c8\u30e9\u30bf\u306f\u3001\u30af\u30e9\u30b9\u306e\u30e1\u30f3\u30d0\u30fc\u3092\u521d\u671f\u5316\u3057\u3001\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30c6\u30fc\u30d6\u30eb\u3092\u8fd4\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3001super \u3092\u547c\u3073\u51fa\u3059\u3060\u3051\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u304c\u5b9a\u7fa9\u3055\u308c\u307e\u3059\u3002\n\n-   SuperClass \u306e\u5b9a\u7fa9\n\n18 \u884c\u76ee\u306f\u3001 \u89aa\u30af\u30e9\u30b9\u3092\u6301\u305f\u306a\u3044 SuperClass \u3092\u5b9a\u7fa9\u3057\u307e\u3059\u300219\u301c26 \u884c\u76ee\u3067\u3001 SuperClass \u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u3001\u30e1\u30bd\u30c3\u30c9 funcA \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n-   SubClass \u306e\u5b9a\u7fa9\n\n29 \u884c\u76ee\u306f\u3001 SuperClass \u3092\u89aa\u30af\u30e9\u30b9\u306b\u6301\u3064 SubClass \u3092\u5b9a\u7fa9\u3057\u307e\u3059\u300229\u301c31 \u884c\u76ee\u3067\u3001 SubClass\u30e1\u30bd\u30c3\u30c9 funcB \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002SubClass \u306f\u72ec\u81ea\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u6301\u305f\u306a\u3044\u30af\u30e9\u30b9\u3067\u3059\u3002\n\n-   SubSubClass \u306e\u5b9a\u7fa9\n\n33 \u884c\u76ee\u306f\u3001 SubClass \u3092\u89aa\u30af\u30e9\u30b9\u306b\u6301\u3064 SubSubClass \u3092\u5b9a\u7fa9\u3057\u307e\u3059\u300234\u301c41 \u884c\u76ee\u3067\u3001 SubClass \u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3068\u3001\u30e1\u30bd\u30c3\u30c9 funcC \u3092\u5b9a\u7fa9\u3057\u3066\u3044\u307e\u3059\u3002\n\n-   \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\n\n43\u301c48 \u884c\u76ee\u3067 SuperClass, SubClass, SubSubClass \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3001\u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\n## require \u3068 loadfile\n\nC \u306e\u5834\u5408 include \u3067\u5916\u90e8\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u95a2\u6570\u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u304c\u3001Lua \u3067\u306f require \u3068 load \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u591a\u304f\u306e\u5834\u5408\u3001require \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n### require\n\nrequire \u306f\u3001\u5225\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b9a\u7fa9\u3057\u305f\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u969b\u306b\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```lua\n------ main.lua\nlocal sub = require( 'foo.sub' )\nprint( sub:func(1) ) -- 1\nprint( sub:func(1) ) -- 2\nlocal sub2 = require( 'foo.sub' )\nprint( sub == sub2 ) -- true\n------ foo/sub.lua \nlocal tbl = { value = 0 }\nfunction tbl:func( val )\n  self.value = self.value + val\n  return self.value\nend\nreturn tbl\n```\n\n\u6982\u5ff5\u304c\u4f3c\u3066\u3044\u308b\u3060\u3051\u3067\u3001include \u3068\u306f\u305d\u3082\u305d\u3082\u52d5\u4f5c\u304c\u7570\u306a\u308a\u307e\u3059\u3002\n\n-   require \u306f\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u306f\u306a\u304f\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n    -   \u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u306f\u62e1\u5f35\u5b50\u3092\u542b\u307f\u307e\u305b\u3093\u3002\u307e\u305f\u30d1\u30b9\u533a\u5207\u308a\u306b\u306f / \u3067\u306f\u306a\u304f . \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n    -   . \u3084 .. \u306e\u76f8\u5bfe\u30d1\u30b9\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002 (\u533a\u5207\u308a\u6587\u5b57\u304c . \u306a\u306e\u3067\u610f\u5473\u4e0d\u660e\u306b\u306a\u308b)\n-   require \u306f\u3001\u6307\u5b9a\u3055\u308c\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30ed\u30fc\u30c9\u3057\u3001\u5b9f\u884c\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n-   require \u3057\u305f\u969b\u306b\u8fd4\u3055\u308c\u308b\u5024\u306f 1 \u3064\u3060\u3051\u3067\u3059\u3002\n-   require \u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb modname \u306f\u3001package.loaded[ modname ] \u30c6\u30fc\u30d6\u30eb\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n-   \u6b21\u306b require \u3057\u305f\u6642\u306f\u3001 package.loaded[ modname ] \u306b\u683c\u7d0d\u3057\u3066\u3044\u308b\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n-   \u3082\u3057\u3082 modname \u3067\u6307\u5b9a\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4fdd\u6301\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u3001\u524d\u56de require \u3057\u305f\u3068\u304d\u3068\u7570\u306a\u308b\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u305f\u3068\u3057\u3066\u3082package.loaded[ modname ] \u306b\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u65b0\u898f\u306b\u30ed\u30fc\u30c9\u3057\u306a\u304a\u3057\u307e\u305b\u3093\u3002\n-   \u5f37\u5236\u7684\u306b\u30ed\u30fc\u30c9\u3057\u76f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4e8b\u524d\u306b package.loaded[ modname ] = nil \u3068\u3057\u307e\u3059\u3002\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u691c\u7d22\u30d1\u30b9\u306f\u3001 package.path \u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n### loadfile\n\nloadfile \u306f\u6307\u5b9a\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u30ed\u30fc\u30c9\u3057\u3066\u3001\u305d\u306e\u30ed\u30fc\u30c9\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u95a2\u6570\u3092\u8fd4\u3057\u307e\u3059\u3002\u3088\u3063\u3066\u3001loadfile \u304c\u8fd4\u3057\u305f\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u307e\u3067\u3001\u6307\u5b9a\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\n\nrequire \u3068 loadfile \u3068\u3067\u306f\u6b21\u306e\u70b9\u3067\u7570\u306a\u308a\u307e\u3059\u3002\n\n-   \u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u30bf\u30a4\u30df\u30f3\u30b0\n    -   require \u306f\u3001 require() \u3092\u51e6\u7406\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u5b9f\u884c\u3057\u307e\u3059\n    -   loadfile \u306f\u3001loadfile() \u304c\u8fd4\u3059\u95a2\u6570\u3092\u5b9f\u884c\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u306a\u308a\u307e\u3059\n-   2\u56de\u76ee\u4ee5\u964d\u306e\u51e6\u7406\n    -   require \u306f\u30012 \u56de\u76ee\u4ee5\u964d\u5b9f\u884c\u3057\u305f\u5834\u5408\u306f\u524d\u56de\u3068\u540c\u3058\u30e2\u30ce\u3092\u8fd4\u3057\u307e\u3059\n    -   loadfile \u306f\u65b0\u3057\u304f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u751f\u6210\u3057\u307e\u3059\n\n```lua\n------ main.lua\nlocal sub3func = loadfile( 'foo/sub.lua' )\nlocal sub31 = sub3func()\nlocal sub32 = sub3func()\nprint( sub31:func(1) ) -- 1\nprint( sub32:func(1) ) -- 1\nprint( sub31 == sub32 ) -- false\n------ foo/sub.lua \nlocal tbl = { value = 0 }\nfunction tbl:func( val )\n  self.value = self.value + val\n  return self.value\nend\nreturn tbl\n```\n\nloadfile \u306f\u6b21\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u4ed6\u306b\u3001mode, env \u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\n\nloadfile( filename, mode, end )\n\n-   mode \u306f\u3001\u6b21\u3092\u6307\u5b9a\u3067\u304d\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f \"bt\" \u3067\u3059\u3002\n    -   \"b\": \u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306b\u9650\u5b9a\n    -   \"t\": \u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u6e08\u307f\u30d5\u30a1\u30a4\u30eb\u306b\u9650\u5b9a\n    -   \"bt\": \u5bfe\u8c61\u30d5\u30a1\u30a4\u30eb\u3092\u9650\u5b9a\u3057\u306a\u3044\n-   env \u306f\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306e\u683c\u7d0d\u30c6\u30fc\u30d6\u30eb\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f \\_ENV \u3067\u3059\u3002\n\n### require \u3068 loadfile \u306e\u4f7f\u3044\u5206\u3051\n\n\u6b21\u306e\u5834\u5408\u3092\u9664\u304d\u3001 require \u3092\u4f7f\u3046\u3079\u304d\u3067\u3059\u3002\n\n-   loadfile \u306e mode, env \u5f15\u6570\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u3002\n-   \u30b9\u30af\u30ea\u30d7\u30c8\u3092\u518d\u5b9f\u884c\u3057\u305f\u3044\u5834\u5408\u3002\n\n## \u30b3\u30eb\u30fc\u30c1\u30f3\n\n\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u3001\u5024\u306e\u53d7\u6e21\u3057\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f RTOS \u7b49\u306e\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d6\u306a\u30bf\u30b9\u30af\u5207\u308a\u66ff\u3048\u6a5f\u69cb\u3068\u8003\u3048\u308b\u3068\u5206\u304b\u308a\u6613\u3044\u3067\u3059\u3002\n\ncoroutine.resume() \u3068 coroutine.yield() \u304c\u3001\u30bf\u30b9\u30af\u306e\u518d\u958b\u3001\u4e00\u6642\u505c\u6b62\u306b\u3042\u305f\u308a\u307e\u3059\u3002\n\n-   coroutine.resume( crn, arg ) \u306f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3 crn \u306e\u5b9f\u884c\u3092\u518d\u958b\u3057\u307e\u3059\u3002\n    -   \u3053\u306e\u3068\u304d\u3001\u30b3\u30eb\u30fc\u30c1\u30f3 crn \u306f arg \u3092\u53d7\u3051\u3068\u308a\u307e\u3059\u3002\n-   coroutine.yield(arg) \u306f\u3001\u5b9f\u884c\u4e2d\u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u3092 suspend \u306b\u3057\u3001coroutine.resume() \u547c\u3073\u51fa\u3057\u305f\u5143\u306e\u51e6\u7406\u306b\u623b\u308a\u307e\u3059\u3002\n    -   \u3053\u306e\u3068\u304d\u3001coroutine.resume() \u306e\u623b\u308a\u5024\u3068\u3057\u3066 arg \u304c\u8fd4\u308a\u307e\u3059\u3002\n    -   \u305f\u3060\u3057\u3001coroutine.resume() \u306e\u623b\u308a\u5024\u306e\u7b2c\u4e00\u623b\u308a\u5024\u306f\u3001\u6307\u5b9a\u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u304c\u7d9a\u304d\u304c\u3042\u308b\u304b\u3069\u3046\u304b\u3092\u6700\u5f8c\u307e\u3067\u5b9f\u884c\u3057\u305f\u304b\u3069\u3046\u304b\u306e\u30d5\u30e9\u30b0\u3092\u8fd4\u3057\u307e\u3059\u3002\n        -   true \u306e\u5834\u5408\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u304c\u7d9a\u304d\u307e\u3059\u3002\n        -   false \u306e\u5834\u5408\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u306f\u5168\u3066\u7d42\u4e86\u3057\u3066\u3044\u307e\u3059\u3002\n-   coroutine.resume() \u306e\u623b\u308a\u5024\u304c true \u306e\u5834\u5408\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u306f\u7d9a\u304d\u304c\u3042\u308a\u307e\u3059\u3002\n    -   \u3053\u306e\u72b6\u614b\u3067 \u518d\u5ea6 coroutine.resume( crn, arg ) \u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u306e\u7d9a\u304d\u304b\u3089\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n    -   resume \u306e\u5f15\u6570 arg \u306f\u3001coroutine.yield() \u306e\u623b\u308a\u5024\u3068\u306a\u308a\u307e\u3059\u3002\n-   \u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u51e6\u7406\u304c\u7d42\u4e86\u3059\u308b\u3068\u3001\u6700\u5f8c\u306e coroutine.resume() \u547c\u3073\u51fa\u3057\u4f4d\u7f6e\u306b\u623b\u308a\u307e\u3059\u3002\n    -   \u3053\u306e\u3068\u304d\u306e coroutine.resume() \u306e\u623b\u308a\u5024\u306f\u3001\u7b2c\u4e00\u623b\u308a\u5024\u304c false \u3067\u3001\u7b2c\u4e8c\u4ee5\u964d\u306e\u623b\u308a\u5024\u304c\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u623b\u308a\u5024\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u306a\u304a\u3001 \u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4f5c\u308b\u306b\u306f coroutine.create( func ) \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n**\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u751f\u6210\u3057\u305f\u3060\u3051\u3067\u306f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u52d5\u4f5c\u3057\u307e\u305b\u3093\u3002****coroutine.resume() \u3067\u521d\u3081\u3066\u30b3\u30eb\u30fc\u30c1\u30f3\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002****\u521d\u56de\u306e resume() \u3067\u4e0e\u3048\u3089\u308c\u305f\u5f15\u6570\u304c\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u5f15\u6570\u306b\u306a\u308a\u307e\u3059\u3002****2\u56de\u76ee\u4ee5\u964d\u306e resume() \u3067\u4e0e\u3048\u3089\u308c\u305f\u5f15\u6570\u306f\u3001 coroutine.yield() \u306e\u623b\u308a\u5024\u306b\u306a\u308a\u307e\u3059\u3002**\n\n```lua\nlocal crn = coroutine.create( function( value )\n      print( \"c1\", value )\n      print( \"c2\", coroutine.yield( value + 1 ) )\n      return value + 2 \nend)\nprint( \"m1\", coroutine.resume( crn, 2 ) )\nprint( \"m2\", coroutine.resume( crn, 3 ) )\nprint( \"m3\", coroutine.resume( crn, 4 ) )\n```\n\n\u4e0a\u306e\u4f8b\u306e\u51fa\u529b\u7d50\u679c\u306f\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\n\n```txt\nc1      2\nm1      true    3\nc2      3\nm2      true    4\nm3      false   cannot resume dead coroutine\n```\n\ncoroutine.wrap() \u3092\u4f7f\u7528\u3057\u3066\u3082\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u751f\u6210\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u5834\u5408 coroutine.create() \u3068\u6b21\u306e\u70b9\u3067\u7570\u306a\u308a\u307e\u3059\u3002\n\n-   coroutine.wrap() \u306f\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u8fd4\u3059\u306e\u3067\u306f\u306a\u304f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u3092 resume \u3059\u308b\u95a2\u6570 wfun() \u3092\u8fd4\u3057\u307e\u3059\u3002\n-   wfun( arg ) \u306e\u5f15\u6570 arg \u306f\u3001 resume \u306e\u7b2c\u4e8c\u5f15\u6570\u4ee5\u964d\u306b\u4e0e\u3048\u308b\u5f15\u6570\u306b\u306a\u308a\u307e\u3059\u3002\n-   wfun() \u306e\u623b\u308a\u5024\u306f\u3001\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u7d9a\u304d\u306e\u6709\u7121\u3092\u793a\u3059\u30d5\u30e9\u30b0\u3092\u542b\u307f\u307e\u305b\u3093\u3002\n-   wfun() \u306f\u3001\u30b3\u30eb\u30fc\u30eb\u30f3\u306e\u30a8\u30e9\u30fc\u3092\u30ad\u30e3\u30c3\u30c1\u3057\u307e\u305b\u3093\u3002\n\n```lua\ncrn = coroutine.wrap( function( value )\n      print( \"c1\", value )\n      print( \"c2\", coroutine.yield( value + 1 ) )\n      return value + 2 \nend)\nprint( \"m1\", crn( 2 ) )\nprint( \"m2\", crn( 3 ) )\n--print( \"m3\", crn( 3 ) ) -- error\n```\n\n\u4e0a\u306e\u4f8b\u306e\u51fa\u529b\u7d50\u679c\u306f\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\n\n```txt\nc1      2\nm1      3\nc2      3\nm2      4\n```\n\ncoroutine.wrap() \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001for \u6587\u306e\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u6319\u3052\u305f\u30a4\u30c6\u30ec\u30fc\u30bf\u95a2\u6570 ite \u3092\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u307e\u3059\u3002\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u30b9\u30c3\u30ad\u30ea\u66f8\u3051\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```lua\nlocal ite = coroutine.wrap( function ( param, prev )\n   for next = 1, param do\n     coroutine.yield( next, string.format( \"%d\", next ) )\n   end\n   return nil\nend\n-- \u4ee5\u4e0b\u3068\u540c\u3058\u7d50\u679c\u306b\u306a\u308b\n-- local function ite( param, prev )\n--    if prev == param then\n--       return nil\n--    end\n--    if prev == nil then\n--       prev = 0\n--    end\n--    local next = prev + 1\n--    return next, string.format( \"%d\", next )\n-- end\n```\n\n## \u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\n\n\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3068\u306f\u3001C++ \u306e\u6f14\u7b97\u5b50\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3059\u3002\n\n\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u5024\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u5024\u306f\u3001\u578b\u304c\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u304b\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3060\u3051\u3067\u3059\u3002\u305f\u3060\u3057\u3001Lua \u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u8a2d\u5b9a\u3067\u304d\u308b\u306e\u306f\u30c6\u30fc\u30d6\u30eb\u578b\u306e\u30c7\u30fc\u30bf\u306e\u307f\u3067\u3059\u3002\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u578b\u306e\u30c7\u30fc\u30bf\u306f\u3001 C \u5074\u304b\u3089\u8a2d\u5b9a\u53ef\u80fd\u3067\u3059\u3002\n\nsetmetatable(table, metatable) \u3067\u3001\u6307\u5b9a\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nLua \u3067\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u306a\u51e6\u7406\u304c\u884c\u306a\u308f\u308c\u308b\u969b\u306b\u3001\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u306b\u5b9a\u7fa9\u3057\u305f\u30e1\u30bd\u30c3\u30c9(\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9)\u304c\u547c\u3070\u308c\u307e\u3059\u3002\n\n\u4f8b\u3070\u6b21\u306e\u3088\u3046\u306b\u30c6\u30fc\u30d6\u30eb\u8981\u7d20\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```lua\nlocal meta = {\n  __index = function( tbl, key )\n    return key\n  end\n}\nlocal tbl = {}\nprint( tbl[ 1 ] ) -- nil\nsetmetatable( tbl, meta )\nprint( tbl[ 1 ] ) -- 1\n```\n\n### \u4e8c\u9805\u6f14\u7b97\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( value1, value2 )\n\n\u6b21\u306e\u4e8c\u9805\u6f14\u7b97\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u3002\n\n-   `__add`\n    -   +\n-   `__sub`\n    -   -\n-   `__mul`\n    -   \\*\n-   `__div`\n    -   /\n-   `__mod`\n    -   %\n-   `__pow`\n    -   ^\n-   `__concat`\n    -   ..\n-   `__idiv`\n    -   // (ver 5.3)\n\n\u4e8c\u9805\u6f14\u7b97\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u9806\u3067\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6f14\u7b97\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n### \u30d3\u30c3\u30c8\u6f14\u7b97 (ver 5.3)\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( value1, value2 )\n\n-   `__band`\n    -   &\n-   `__bor`\n    -   |\n-   `__bxor`\n    -   ~\n-   `__bnot`\n    -   ^\n-   `__shl`\n    -   <<\n-   `__shr`\n    -   >>\n\n\u30d3\u30c3\u30c8\u6f14\u7b97\u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u3069\u3061\u3089\u304b\u304c\u6574\u6570\u3067\u306a\u304f\u3001\u304b\u3064\u6574\u6570\u306b\u5909\u63db\u4e0d\u53ef\u80fd\u306a\u5024\u306e\u5834\u5408\u306b\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u9806\u3067\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6f14\u7b97\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n### \u5358\u9805\u6f14\u7b97\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( value )\n\n\u6b21\u306e\u5358\u9805\u6f14\u7b97\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3067\u304d\u307e\u3059\u3002\n\n-   `__unm`\n    -   -\n-   `__len`\n    -   \\#\n\n\u5358\u9805\u6f14\u7b97\u306f\u3001\u6307\u5b9a\u306e\u5024\u306e\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u304c\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6f14\u7b97\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n### `__eq` ( == )\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( value1, value2 )\n\n`__eq` \u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3068\u7b2c\u4e8c\u5f15\u6570\u304c\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u304c\u540c\u3058\u30cf\u30f3\u30c9\u30e9\u3067\u3042\u308b\u5834\u5408\u306b\u9650\u308a\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u305d\u3046\u3067\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6761\u4ef6\u304c\u6210\u308a\u7acb\u3064\u6642\u306b true, \u6210\u308a\u7acb\u305f\u306a\u3044\u6642\u306b false \u3092\u8fd4\u3057\u307e\u3059\u3002\n\n### `__lt` ( < ), `__le` ( <= )\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( value1, value2 )\n\n`__lt` , `__le` \u306f\u3001\u7b2c\u4e00\u5f15\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u306e\u9806\u3067\u3001\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6761\u4ef6\u304c\u6210\u308a\u7acb\u3064\u6642\u306b true, \u6210\u308a\u7acb\u305f\u306a\u3044\u6642\u306b false \u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u305f\u3060\u3057  `__le` \u306e\u5b9a\u7fa9\u304c\u306a\u3044\u5834\u5408\u3001a <= b \u306f not (b < a) \u3068\u3057\u3066 `__lt` \u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n### `__index`\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( table, key )\n\ntable[key] \u306e\u30c7\u30fc\u30bf\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u969b\u306e\u52d5\u4f5c\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u307e\u3059\u3002\n\n\\_<sub>index</sub> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u95a2\u6570\u3060\u3063\u305f\u5834\u5408\u3001\u4e0a\u8a18\u306e\u95a2\u6570\u3068\u3057\u3066\u5b9f\u884c\u3057\u623b\u308a\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\u95a2\u6570\u3067\u306f\u306a\u304f\u30c6\u30fc\u30d6\u30eb\u3060\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ad\u30fc key \u306e\u8981\u7d20\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u306a\u306e\u306f table \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u306a\u3044\u5834\u5408\u306e\u307f\u3067\u3059\u3002table \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\u307e\u305f\u3001 \\_<sub>index</sub> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u3001\u95a2\u6570\u3067\u306f\u306a\u304f\u30c6\u30fc\u30d6\u30eb\u3060\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ad\u30fc key \u306e\u8981\u7d20\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3044\u308b\u306e\u304c\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u578b\u306e\u5834\u5408\u306f\u3001\u5e38\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f table \u306e key \u306b\u5bfe\u3059\u308b\u5024\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n### `__newindex`\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( table, key, value )\n\ntable[key] \u306b\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u969b\u306e\u52d5\u4f5c\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u307e\u3059\u3002\n\n\\_<sub>newindex</sub> \u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u95a2\u6570\u3060\u3063\u305f\u5834\u5408\u3001\u4e0a\u8a18\u306e\u95a2\u6570\u3068\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\u95a2\u6570\u3067\u306f\u306a\u304f\u30c6\u30fc\u30d6\u30eb\u3060\u3063\u305f\u5834\u5408\u3001\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u306e\u30ad\u30fc key \u306b\u5024 value \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u306a\u304a\u3001\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u53ef\u80fd\u306a\u306e\u306f table \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u306a\u3044\u5834\u5408\u306e\u307f\u3067\u3059\u3002\n\ntable \u306b key \u306e\u30c7\u30fc\u30bf\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u6307\u5b9a\u306e\u5024\u304c\u30bb\u30c3\u30c8\u3055\u308c\u307e\u3059\u3002\n\n\u30e1\u30bf\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3044\u308b\u306e\u304c\u30e6\u30fc\u30b6\u30c7\u30fc\u30bf\u578b\u306e\u5834\u5408\u306f\u3001\u5e38\u306b\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n### `__call`\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( func, &#x2026; )\n\n\u95a2\u6570\u30b3\u30fc\u30eb\u306e\u52d5\u4f5c\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u307e\u3059\u3002\n\n\u6307\u5b9a\u306e\u5024\u306e\u30e1\u30bf\u30c6\u30fc\u30d6\u30eb\u304c\u8a72\u5f53\u306e\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30cf\u30f3\u30c9\u30e9\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305d\u306e\u30cf\u30f3\u30c9\u30e9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u3092\u884c\u306a\u3044\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f func \u306e\u5b9f\u884c\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002\n\n### `__gc` ( == )\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( self )\n\n`__gc` \u306f\u3001\u305d\u306e\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u3092\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024\u304c GC \u3067\u89e3\u653e\u3055\u308c\u308b\u524d\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\n\n### `__tostring` ( == )\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6b21\u306e\u5f15\u6570\u3092\u6301\u3061\u307e\u3059\u3002\n\nfunction func( self )\n\n`__tostring` \u306f\u3001 string.format \u306e \"%s\" \u7b49\u3067\u5909\u63db\u3059\u308b\u969b\u306b\u547c\u51fa\u3055\u308c\u307e\u3059\u3002\n\n\u30e1\u30bf\u30e1\u30bd\u30c3\u30c9\u306f\u6587\u5b57\u5217\u3092\u8fd4\u3057\u307e\u3059\u3002 \n\n## \u30af\u30ed\u30fc\u30b8\u30e3\n\nLua \u306f\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\u30af\u30ed\u30fc\u30b8\u30e3\u306f\u3001Lisp \u7b49\u3067\u3082\u5229\u7528\u3067\u304d\u308b\u53e4\u304f\u304b\u3089\u3042\u308b\u6a5f\u80fd\u306e\u4e00\u3064\u3067\u3059\u304c\u3001C++ \u3067\u306f C++11 \u3067\u53d6\u5165\u308c\u3089\u308c\u305f\u6a5f\u80fd\u3067\u3059\u3002\n\n\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u95a2\u6570\u306e\u5f15\u6570\u3001\u30b0\u30eb\u30fc\u30d0\u30eb\u5909\u6570\u4ee5\u5916\u3067\u3001\u95a2\u6570\u306e\u632f\u821e\u3044\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001C \u306e qsort \u306b\u306f\u6b21\u306e\u95a2\u6570\u30dd\u30a4\u30f3\u30bf\u3092\u5f15\u6570\u306b\u4e0e\u3048\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nint (\\*compare)(const void \\* val1, const void \\* val2)\n\n\u3053\u306e\u95a2\u6570\u306f\u3001val1, val2 \u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u5024\u3092\u6bd4\u8f03\u3057\u3066\u7d50\u679c\u3092\u8fd4\u3059\u95a2\u6570\u3067\u3059\u3002\n\n\u3053\u3053\u3067\u3001\u3082\u3057\u8981\u7d20\u306e\u6bd4\u8f03\u3092\u884c\u306a\u3046\u305f\u3081\u306b\u6b21\u306e\u3088\u3046\u306b\u3082\u3046\u4e00\u3064\u306e\u5f15\u6570\u304c\u5fc5\u8981\u3060\u3063\u305f\u5834\u5408\u3001\u3069\u3046\u3059\u308c\u3070 qsort() \u3092\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\n\n```c\nint sampleCompare(const void * val1, const void * val2, const int param );\n```\n\n\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u6b21\u306e 2 \u3064\u304c\u8003\u3048\u3089\u308c\u307e\u3059\u3002\n\n-   param \u3092\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570 `g_param` \u306b\u8a2d\u5b9a\u3059\u308b\n    -   sampleCompareWrap( const void \\* val1, const void \\* val2 ) \u3092\u4f5c\u6210\u3002\n    -   sampleCompareWrap() \u304b\u3089 sampleCompare( val1, val2, `g_param` ) \u3092\u5b9f\u884c\u3059\u308b\u3002\n    -   `g_param` \u306b\u5024\u3092\u8a2d\u5b9a\u3059\u308b\n    -   sampleCompareWrap() \u3092 qsort() \u306b\u6e21\u3059\n-   param \u3092\u56fa\u5b9a\u5024\u306b\u3057\u3066 sampleCompare() \u5b9f\u884c\u3059\u308b\u30e9\u30c3\u30d1\u30fc\u95a2\u6570\u3092\u7528\u610f\u3059\u308b\n    -   sampleCompareWrapX( const void \\* val1, const void \\* val2 ) \u3092\u4f5c\u6210\u3002\n    -   sampleCompareWrapX() \u304b\u3089 sampleCompare( val1, val2, PARAM ) \u3092\u5b9f\u884c\u3059\u308b\u3002\n        -   \u3053\u3053\u3067 PARAM \u306f\u3001param \u304c\u53d6\u308a\u5f97\u308b\u5024\u306e 1 \u3064\u3067\u3059\n    -   param \u306e\u30d1\u30bf\u30fc\u30f3\u5206 sampleCompareWrapX() \u3092\u7528\u610f\u3059\u308b\u3002\n    -   \u4f7f\u7528\u3059\u308b param \u306e\u30d1\u30bf\u30fc\u30f3\u306b\u5408\u305b\u3066 qsort() \u306b\u4e0e\u3048\u308b sampleCompareWrapX() \u3092\u5909\u66f4\u3059\u308b\n\n\u3069\u3061\u3089\u3082\u3001\u3042\u307e\u308a\u826f\u3044\u65b9\u6cd5\u3068\u306f\u8a00\u3048\u307e\u305b\u3093\u3002\n\n\u3053\u306e\u3088\u3046\u306a\u6642\u306b\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f7f\u7528\u3059\u308b\u3068\u7c21\u5358\u306b\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\n\nLua \u306e\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f7f\u3046\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```lua\nlocal function generateCompare( param )\n  return function( val1, val2 ) -- \u2605\n    return sampleCompare( val1, val2, param )\n  end\nend\nqsort( array, 1, 1, generateCompare( param ) ) -- C \u306e qsort() \u3068\u540c\u3058\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3068\u3059\u308b\n```\n\n\u4e0a\u8a18\u3067\u8aac\u660e\u3057\u3066\u3044\u308b\u901a\u308a\u3001\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u95a2\u6570\u306e\u5f15\u6570\u3001\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3092\u4f7f\u308f\u305a\u306b\u3001\u4e0a\u8a18\u306e \u2605 \u30de\u30fc\u30af\u306e\u95a2\u6570\u306e\u632f\u821e\u3044\u3092\u5909\u66f4\u3067\u304d\u307e\u3059\u3002\n\n\u30af\u30ed\u30fc\u30b8\u30e3\u3067\u91cd\u8981\u306a\u3053\u3068\u306f\u3001\u95a2\u6570\u306e\u51e6\u7406\u5185\u3067\u3001\u95a2\u6570\u5b9a\u7fa9\u5916\u90e8\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306f\u3001\u5ba3\u8a00\u3055\u308c\u308b\u3068\u65b0\u3057\u304f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u307e\u3059\u3002\u305d\u3057\u3066 Lua \u306e\u5024\u306f\u3001\u53c2\u7167\u304c\u306a\u304f\u306a\u308b\u307e\u3067\u89e3\u653e\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u3067\u3042\u308b\u30d6\u30ed\u30c3\u30af\u306e\u51e6\u7406\u3092\u629c\u3051\u3066\u3082\u3001\u95a2\u6570\u5185\u3067\u53c2\u7167\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u89e3\u653e\u3055\u308c\u308b\u3053\u3068\u306a\u304f\u6b8b\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n## \u30c7\u30d0\u30c3\u30b0\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\n\nLua \u306f\u3001\u81ea\u5206\u81ea\u8eab\u3092\u30c7\u30d0\u30c3\u30b0\u3059\u308b\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u6301\u3061\u307e\u3059\u3002\u3053\u308c\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u4f8b\u3048\u3070\u30b9\u30bf\u30c3\u30af\u30c8\u30ec\u30fc\u30b9\u3092\u52d5\u7684\u306b\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u3053\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u30ea\u30e2\u30fc\u30c9\u30c7\u30d0\u30c3\u30ac\u7b49\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n"}