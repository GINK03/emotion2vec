{"context": "\n\n\u4e88\u3081\n\nHeroku \u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u3042\u3063\u3066\u3001heroku toolbelt \u304c \u30ed\u30fc\u30ab\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\n\nnodejs \u304c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\nFacebook \u306e Page \u304c\u4f5c\u3089\u308c\u3066\u3044\u308b(https://www.facebook.com/pages/create/)\nFacebook \u30a2\u30d7\u30ea\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b(https://developers.facebook.com/quickstarts/?platform=web)\n\n\n\u958b\u767a\u74b0\u5883\u4f5c\u308a\n\nHubot \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ npm install -g yo generator-hubot\n\n\nHubot application \u306e Generate\nyeomen generator \u3092 \u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d9\u30fc\u30b9\u3092\u4f5c\u308a\u307e\u3059\nMessenger Bot \u7528\u306e Adapter \u306b\u306f messenger-bot \u3092\u4f7f\u3044\u307e\u3059\n\u304b\u308a\u306b \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3092 botapp \u3068\u3057\u307e\u3059\n$ mkdir botapp\n$ cd botapp\n$ yo hubot\n\ngit \u306b Commit \u3057\u3066\u304a\u304f\n$ git init\n$ git add .\n$ git commit -m 'Initial commit'\n\nadapter \u3092\u805e\u304b\u308c\u305f\u3089\u3001 messenger-bot \u3068\u5165\u529b\u3059\u308b\n\nFacebook access token \u3092\u4f5c\u308b\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u7ba1\u7406\u30da\u30fc\u30b8\u304b\u3089 Messenger \u3092\u9078\u629e\u3059\u308b\n\u767b\u9332\u3057\u305f Messenger Bot \u7528\u306e \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u9078\u629e\nToken \u304c\u8868\u793a\u3055\u308c\u308b\n\n\n\nHeroku \u306b Push\nHeroku \u306e git \u306b Push \u3059\u308b \n$ heroku apps:create botapp\n$ git push heroku master\n\nToken \u3068\u304b \u767b\u9332\u3059\u308b\n$ heroku config:set MESSENGER_ACCESS_TOKEN=(\u5148\u307b\u3069\u53d6\u5f97\u3057\u305f Token)\n$ heroku config:set MESSENGER_VERIFY_TOKEN=botapp (\u4f55\u304b\u9069\u5f53\u306a\u6587\u5b57\u5217 Webhooks\u3000\u767b\u9332\u6642\u306b\u4f7f\u7528\u3057\u307e\u3059\uff09\n$ heroku config:set HUBOT_HEROKU_KEEPALIVE_URL=$(heroku apps:info -s  | grep web-url | cut -d= -f2)\n\n\nWebfook \u3092\u767b\u9332\n\nToken\u3092\u53d6\u5f97\u3057\u305f Facebook \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30da\u30fc\u30b8\u3067 Webhooks \u306e\u6b04\u306e Edit Events \u30dc\u30bf\u30f3\u3092\u304f\u308a\u304f\n\u4e0b\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\u3078 (herokunourl)/webhook/\u3001\u30c8\u30fc\u30af\u30f3\u78ba\u8a8d\u3078 MESSENGER_VERIFY_TOKEN \u3078\u8a2d\u5b9a\u3057\u305f\u6587\u5b57\u5217\u3092\u5165\u529b\u3059\u308b \n\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u5168\u90e8\u30c1\u30a7\u30c3\u30af\u3057\u3066 \u78ba\u8a8d\u3057\u3066\u4fdd\u5b58 \u3059\u308b\n\n\n\u3053\u308c\u3067\u6e96\u5099\u5b8c\u4e86\u3067\u3059\n\n\u7c21\u5358\u306a Coll and Response\n\nHubot \u306e\u5fdc\u7b54Script\u3092\u66f8\u304f\n1.script \u30d5\u30a9\u30eb\u30c0\u5185\u306b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a  \n\nbotapp.coffee\n#commands:\n# hubot \u3053\u3093\u3061\u306f return the message \u3061\u306f\u3053\u3093\n#\nmodule.exports = (robot) ->\n  robot.hear /\u3053\u3093\u3061\u306f/i, (res) ->\n    res.send '\u3061\u306f\u3053\u3093'\n\n\n2.heroku \u306b Push\u3000\u3059\u308b\n3.facebook \u306e Page \u304b\u3089 \u30e1\u30c3\u30bb\u30f3\u30b8\u30e3\u30fc\u3092\u8d77\u52d5\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\u3059\u308b\n\n\u3053\u308c\u3067\u3001\u8fd4\u4e8b\u304c\u5e30\u3063\u3066\u304f\u308b\u306f\u305a\u3067\u3059\n## \u4e88\u3081\n1. Heroku \u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u3042\u3063\u3066\u3001[heroku toolbelt](https://toolbelt.heroku.com/) \u304c \u30ed\u30fc\u30ab\u30eb\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\n2. [nodejs](https://nodejs.org/en/) \u304c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\n3. Facebook \u306e Page \u304c\u4f5c\u3089\u308c\u3066\u3044\u308b(https://www.facebook.com/pages/create/)\n4. Facebook \u30a2\u30d7\u30ea\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b(https://developers.facebook.com/quickstarts/?platform=web)\n\n##  \u958b\u767a\u74b0\u5883\u4f5c\u308a\n### Hubot \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ npm install -g yo generator-hubot\n```\n\n### Hubot application \u306e Generate\n[yeomen](http://yeoman.io/) generator \u3092 \u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d9\u30fc\u30b9\u3092\u4f5c\u308a\u307e\u3059\nMessenger Bot \u7528\u306e Adapter \u306b\u306f [messenger-bot](https://github.com/ClaudeBot/hubot-messenger-bot) \u3092\u4f7f\u3044\u307e\u3059\n\n\u304b\u308a\u306b \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3092 botapp \u3068\u3057\u307e\u3059\n\n```\n$ mkdir botapp\n$ cd botapp\n$ yo hubot\n```\n\ngit \u306b Commit \u3057\u3066\u304a\u304f\n\n```\n$ git init\n$ git add .\n$ git commit -m 'Initial commit'\n```\n\nadapter \u3092\u805e\u304b\u308c\u305f\u3089\u3001 messenger-bot \u3068\u5165\u529b\u3059\u308b\n\n### Facebook access token \u3092\u4f5c\u308b\n\n1. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u7ba1\u7406\u30da\u30fc\u30b8\u304b\u3089 Messenger \u3092\u9078\u629e\u3059\u308b\n2. \u767b\u9332\u3057\u305f Messenger Bot \u7528\u306e \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u9078\u629e\n3. Token \u304c\u8868\u793a\u3055\u308c\u308b\n\n![FBAPP.jpg](https://qiita-image-store.s3.amazonaws.com/0/9906/034b851a-a9da-4437-b1ab-fc7bee3a352c.jpeg)\n\n### Heroku \u306b Push\n\nHeroku \u306e git \u306b Push \u3059\u308b \n\n```\n$ heroku apps:create botapp\n$ git push heroku master\n```\n\nToken \u3068\u304b \u767b\u9332\u3059\u308b\n\n```\n$ heroku config:set MESSENGER_ACCESS_TOKEN=(\u5148\u307b\u3069\u53d6\u5f97\u3057\u305f Token)\n$ heroku config:set MESSENGER_VERIFY_TOKEN=botapp (\u4f55\u304b\u9069\u5f53\u306a\u6587\u5b57\u5217 Webhooks\u3000\u767b\u9332\u6642\u306b\u4f7f\u7528\u3057\u307e\u3059\uff09\n$ heroku config:set HUBOT_HEROKU_KEEPALIVE_URL=$(heroku apps:info -s  | grep web-url | cut -d= -f2)\n```\n\n### Webfook \u3092\u767b\u9332\n\n1. Token\u3092\u53d6\u5f97\u3057\u305f Facebook \u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30da\u30fc\u30b8\u3067 Webhooks \u306e\u6b04\u306e Edit Events \u30dc\u30bf\u30f3\u3092\u304f\u308a\u304f\n2. \u4e0b\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\u3078 (herokunourl)/webhook/\u3001\u30c8\u30fc\u30af\u30f3\u78ba\u8a8d\u3078 MESSENGER_VERIFY_TOKEN \u3078\u8a2d\u5b9a\u3057\u305f\u6587\u5b57\u5217\u3092\u5165\u529b\u3059\u308b \n3. \u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u3092\u5168\u90e8\u30c1\u30a7\u30c3\u30af\u3057\u3066 \u78ba\u8a8d\u3057\u3066\u4fdd\u5b58 \u3059\u308b\n\n![webhook.jpg](https://qiita-image-store.s3.amazonaws.com/0/9906/59c14903-fdbc-2729-03a2-2f06ada3a3a7.jpeg)\n\n\n**\u3053\u308c\u3067\u6e96\u5099\u5b8c\u4e86\u3067\u3059**\n\n## \u7c21\u5358\u306a Coll and Response\n\n### Hubot \u306e\u5fdc\u7b54Script\u3092\u66f8\u304f\n\n1.script \u30d5\u30a9\u30eb\u30c0\u5185\u306b\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a  \n\n```coffeescript:botapp.coffee\n#commands:\n# hubot \u3053\u3093\u3061\u306f return the message \u3061\u306f\u3053\u3093\n#\nmodule.exports = (robot) ->\n  robot.hear /\u3053\u3093\u3061\u306f/i, (res) ->\n    res.send '\u3061\u306f\u3053\u3093'\n```\n\n2.heroku \u306b Push\u3000\u3059\u308b\n3.facebook \u306e Page \u304b\u3089 \u30e1\u30c3\u30bb\u30f3\u30b8\u30e3\u30fc\u3092\u8d77\u52d5\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b\u3059\u308b\n\n![kontiha.jpg](https://qiita-image-store.s3.amazonaws.com/0/9906/c11b838c-dd05-bb9d-ca01-9a2e18218ee1.jpeg)\n\n\u3053\u308c\u3067\u3001\u8fd4\u4e8b\u304c\u5e30\u3063\u3066\u304f\u308b\u306f\u305a\u3067\u3059\n", "tags": ["Node.js", "Heroku", "bot", "Hubot", "nodejs"]}