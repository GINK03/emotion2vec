{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\ndokku\u306b\u3064\u3044\u3066\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u3067heroku\u30e9\u30a4\u30af\u306a\u74b0\u5883\u304c\u4f5c\u308c\u308b\u3001bash\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u60c5\u5831\u3092\u77e5\u3063\u3066\u3044\u305f\u3060\u3051\u3067\u3001\u4e00\u5ea6\u3082\u8a66\u3057\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u9045\u307e\u304d\u306a\u304c\u3089\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\nVirtualBox\u3067dokku\u3092\u8a66\u3057\u305f - @znz blog\ndocker - Vagrant\u3067dokku\u3092\u52d5\u304b\u3059 - Qiita\n\nprogrium/dokku\u516c\u5f0f\u30ec\u30dd\u30b8\u30c8\u30ea\u5185\u306bVagrant\u30d5\u30a1\u30a4\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3048\u3070\u7c21\u5358\u3067\u3057\u305f\u3002\nREADME\u306b\"Note: There are known issues with docker and Ubuntu 13.10 (1, 2) - use of 12.04 is recommended until these issues are resolved.\"\u3068\u3042\u308b\u306e\u3067\u300112.04\u3067\u8a66\u3057\u307e\u3057\u305f\u3002Vagrantfile\u5185\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f13.04\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u74b0\u5883\u5909\u6570\u3092\u6307\u5b9a\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3057\u305f\u3002\n\ndokku\u74b0\u5883\u69cb\u7bc9\u306e\u64cd\u4f5c\u624b\u9806\ngit clone https://github.com/progrium/dokku\nBOX_NAME=precise BOX_URI=http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-amd64-vagrant-disk1.box vagrant up\n\nVirtualBox\u306ebox\u540d\u3092precise\u306b\u3057\u3066\u3001BOX_URI\u306fA list of base boxes for Vagrant - Vagrantbox.es\u306b\u3042\u308b\"Official Ubuntu 12.04 daily Cloud Image amd64 (VirtualBox 4.1.12)\"\u306eURI\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nIP\u30a2\u30c9\u30ec\u30b9\u306f\u74b0\u5883\u5909\u6570DOKKU_IP\u3067\u6307\u5b9a\u53ef\u80fd\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306fVagrantfile\u5185\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u3057\u3066\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b10.0.0.2\u3092\u305d\u306e\u307e\u307e\u4f7f\u3044\u307e\u3057\u305f\u3002\n\nVagrantfile\nDOKKU_IP = ENV[\"DOKKU_IP\"] || \"10.0.0.2\"\n\n\nvagrant up\u306fMacBook Air 2013\u3060\u3068\u7d0411\u5206\u3067\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\u9014\u4e2d\u306e\u30ed\u30b0\u3092\u898b\u308b\u3068lxc-docker-0.10.0\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5165\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n$ vagrant ssh\nWelcome to Ubuntu 12.04.4 LTS (GNU/Linux 3.2.0-60-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\n\n  System information as of Sat Apr 12 14:45:11 UTC 2014\n\n  System load:  0.0               Users logged in:        0\n  Usage of /:   5.4% of 39.37GB   IP address for eth0:    10.0.2.15\n  Memory usage: 24%               IP address for eth1:    10.0.0.2\n  Swap usage:   0%                IP address for docker0: 172.17.42.1\n  Processes:    69\n\n  Graph this data and manage this system at:\n    https://landscape.canonical.com/\n\n  Get cloud support with Ubuntu Advantage Cloud Guest:\n    http://www.ubuntu.com/business/services/cloud\n\nvagrant@dokku:~$\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067VHOST\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nvagrant@dokku:~$ echo deploy.10.0.0.2.xip.io | sudo tee /home/dokku/VHOST\ndeploy.10.0.0.2.xip.io\n\nvagrant\u306e\u516c\u958b\u9375\u3082\u65e2\u306b\u8a2d\u7f6e\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002\nvagrant@dokku:~$ cat .ssh/authorized_keys\n# CLOUD_IMG: This file was created/modified by the Cloud Image build process\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n\n\u3042\u3068\u306fsshcommand\u3092\u4f7f\u3063\u3066vagrant\u306e\u516c\u958b\u9375\u3092dokku\u7528\u306b\u52a0\u5de5\u3057\u3066~dokku/.ssh/authorized_keys\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nvagrant@dokku:~$ grep ^ssh-rsa ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\ndd:3b:b8:2e:85:04:06:e9:ab:ff:a8:0a:c0:04:6e:d6\n\n\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u307f\u308b\u30c6\u30b9\u30c8\n\nssh\u63a5\u7d9a\u8a2d\u5b9a\n\u30db\u30b9\u30c8(OSX)\u306e~/.ssh/config\u306b\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\n~/.ssh/config\nExitOnForwardFailure yes\nCiphers aes256-ctr,aes192-ctr,aes128-ctr\nHashKnownHosts no\nNoHostAuthenticationForLocalhost yes\nServerAliveInterval 30\nHost my-heroku\n  Ciphers arcfour256,arcfour128\n  HostName 10.0.0.2\n  User vagrant\n  Port 22\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile ~/.vagrant.d/insecure_private_key\n  IdentitiesOnly yes\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306e\u53d6\u5f97\u3068\u30c7\u30d7\u30ed\u30a4\n\u30db\u30b9\u30c8(OSX)\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002git-remote\u306e\u30db\u30b9\u30c8\u540d\u306e\u90e8\u5206(my-heroku)\u306f\u4e0a\u3067~/.ssh/config\u306b\u8ffd\u52a0\u3057\u305f\u8a2d\u5b9a\u306eHost\u306e\u5024\u306b\u5408\u308f\u305b\u307e\u3059\u3002@\u306e\u524d\u306e\u30e6\u30fc\u30b6\u540d\u306fdokku\u306b\u3057\u307e\u3059\u3002\u30b3\u30ed\u30f3\u306e\u5f8c\u306f\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u6642\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3067\u3059\u3002\n$ git clone https://github.com/heroku/node-js-sample\n$ cd node-js-sample\n$ git remote add deploy dokku@my-heroku:node-js-sample\n$ git push deploy master\n\n\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\nWarning: Permanently added '10.0.0.2' (RSA) to the list of known hosts.\nCounting objects: 319, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (274/274), done.\nWriting objects: 100% (319/319), 201.92 KiB | 0 bytes/s, done.\nTotal 319 (delta 17), reused 319 (delta 17)\n-----> Cleaning up ...\n-----> Building node-js-sample ...\nremote: warning: You appear to have cloned an empty repository.\nremote: HEAD is now at 2e52ce7... Update documentation links\n       Node.js app detected\n-----> Requested node range:  0.10.x\n-----> Resolved node version: 0.10.26\n-----> Downloading and installing node\n-----> Writing a custom .npmrc to circumvent npm bugs\n-----> Installing dependencies\n       npm http GET https://registry.npmjs.org/express\n       npm http 200 https://registry.npmjs.org/express\n(\u2026\u7565\u2026)\n-----> Deploying node-js-sample ...\n=====> Application deployed:\n       http://node-js-sample.deploy.10.0.0.2.xip.io\n\ngit remote\u306eURL\u3067\u6307\u5b9a\u3057\u305f\u30b3\u30ed\u30f3\u306e\u5f8c\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u304c\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u540d\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\ncurl\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\u3068\u3001\u7121\u4e8b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n$ curl http://node-js-sample.deploy.10.0.0.2.xip.io\nHello World!\n\n\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\n\u30b2\u30b9\u30c8VM\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\ndokku run \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d \u30b3\u30de\u30f3\u30c9 \u5f15\u6570\u3068\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\nprogrium/dokku\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\n\u4f8b\nvagrant@dokku:~$ dokku run node-js-sample ls -lah\ntotal 52K\ndrwxr-xr-x  6 root root 4.0K Apr 12 17:30 .\ndrwxr-xr-x 42 root root 4.0K Apr 12 17:43 ..\n-rw-r--r--  1 root root   13 Apr 12 17:30 .gitignore\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .heroku\n-rw-r--r--  1 root root    4 Apr 12 17:30 .npmrc\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .profile.d\n-rw-r--r--  1 root root   37 Apr 12 17:30 .release\n-rw-r--r--  1 root root   17 Apr 12 17:30 Procfile\n-rw-r--r--  1 root root 1.2K Apr 12 17:30 README.md\ndrwxr-xr-x  4 root root 4.0K Apr 12 17:30 node_modules\n-rw-r--r--  1 root root  561 Apr 12 17:30 package.json\ndrwxr-xr-x  3 root root 4.0K Apr 12 17:30 vendor\n-rw-r--r--  1 root root  275 Apr 12 17:30 web.js\n\n\n\u30db\u30b9\u30c8(OSX)\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\nssh -t dokku@my-heroku run \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d \u30b3\u30de\u30f3\u30c9 \u5f15\u6570\u3068\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\nprogrium/dokku\u306b\u8aac\u660e\u304c\u3042\u3063\u3066\u3001ssh\u306b-t\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3053\u3068\u3092\u5f37\u304f\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3068\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n\u4f8b\n$ ssh -t dokku@my-heroku run node-js-sample ls -lah\nWarning: Permanently added '10.0.0.2' (RSA) to the list of known hosts.\ntotal 52K\ndrwxr-xr-x  6 root root 4.0K Apr 12 17:30 .\ndrwxr-xr-x 42 root root 4.0K Apr 12 17:45 ..\n-rw-r--r--  1 root root   13 Apr 12 17:30 .gitignore\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .heroku\n-rw-r--r--  1 root root    4 Apr 12 17:30 .npmrc\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .profile.d\n-rw-r--r--  1 root root   37 Apr 12 17:30 .release\n-rw-r--r--  1 root root   17 Apr 12 17:30 Procfile\n-rw-r--r--  1 root root 1.2K Apr 12 17:30 README.md\ndrwxr-xr-x  4 root root 4.0K Apr 12 17:30 node_modules\n-rw-r--r--  1 root root  561 Apr 12 17:30 package.json\ndrwxr-xr-x  3 root root 4.0K Apr 12 17:30 vendor\n-rw-r--r--  1 root root  275 Apr 12 17:30 web.js\n\n\n\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3059\u308b\nprogrium/dokku\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b2\u30b9\u30c8VM\u4e0a\u3067dokku delete \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3068\u3059\u308c\u3070OK\u3067\u3059\u3002\n\u4f7f\u3044\u65b9\u306e\u8aac\u660e\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\n\u8a66\u884c\u932f\u8aa4\u306e\u30e1\u30e2\n\ndokku\u30e6\u30fc\u30b6\u306eauthorized_keys\u3092\u4f5c\u308b\u624b\u9806\u3067\u30cf\u30de\u3063\u305f\n\u53c2\u8003\u306b\u3057\u305f\u30d6\u30ed\u30b0\u8a18\u4e8b\u3067\u306f\u30b2\u30b9\u30c8VM\u3067\nvagrant@dokku:~$ cat ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\n\n\u3068\u5b9f\u884c\u3059\u308b\u3068\u304b\u3001\ndokku\u306eREADME\u306eConfiguring\u306b\u306f\u30db\u30b9\u30c8(OSX)\u5074\u3067\u4ee5\u4e0b\u306e\u69d8\u306a\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u304b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n$ cat ~/.ssh/id_rsa.pub | ssh progriumapp.com \"sudo sshcommand acl-add dokku progrium\"\n\ncat ~/.ssh/id_rsa.pub\u306e\u90e8\u5206\u306f\u3001\u3053\u3053\u3067\u306fvagrant\u306e\u516c\u958b\u9375\u3092\u51fa\u529b\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u79d8\u5bc6\u9375\u304b\u3089\u751f\u6210\u3059\u308b\u304b\n$ echo `ssh-keygen -yf ~/.vagrant.d/insecure_private_key` vagrant insecure public key\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n\nVagrant\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306ekeys\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304b\u3089\u4ee5\u4e0b\u306e\u3069\u3061\u3089\u304b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u516c\u958b\u9375\u3092\u53d6\u3063\u3066\u304d\u307e\u3059\u3002\n$ wget -q -O - https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub\n\n$ curl -3 https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub\n\ncurl\u306e\u307b\u3046\u306f-3\u30aa\u30d7\u30b7\u30e7\u30f3\u7121\u3057\u3067\u8a66\u3059\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3057\u305f\u3002\ncurl: (35) error:14077458:SSL routines:SSL23_GET_SERVER_HELLO:reason(1112)\n\n2011:10:07:error_14077458_ssl_routines_ssl23_get_server_hello_reason_1112 [carnivore news]\u3067-3\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308c\u3070\u5927\u4e08\u592b\u3068\u66f8\u3044\u3066\u3042\u3063\u3066\u3001\u8a66\u3059\u3068OK\u3067\u3057\u305f\u3002\n| ssh progriumapp.com \"sudo sshcommand acl-add dokku progrium\"\n\n\u306e\u90e8\u5206\u306f\u4eca\u56de\u306e\u69cb\u6210\u3067\u306f\u3001\n| ssh my-heroku \"sudo sshcommand acl-add dokku vagrant\"\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\u307e\u3068\u3081\u308b\u3068\u3001\u30db\u30b9\u30c8\u3067\u5b9f\u884c\u3059\u308b\u306a\u3089\n$ echo `ssh-keygen -yf ~/.vagrant.d/insecure_private_key` vagrant insecure public key | ssh my-heroku \"sudo sshcommand acl-add dokku vagrant\"\n\n\u3068\u3059\u308c\u3070OK\u3067\u3059\u3002\n\u3067\u3082\u3001\u30b2\u30b9\u30c8\u306e~vagrant/.ssh/authorized_keys\u306b\u516c\u958b\u9375\u304c\u3042\u308b\u306e\u3067\u3001\u305d\u3093\u306a\u9762\u5012\u306a\u3053\u3068\u3092\u3057\u306a\u304f\u3066\u3082\u30b2\u30b9\u30c8\u3067\nvagrant@dokku:~$ cat ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\n\n\u304c\u697d\u3060\u3068\u601d\u3063\u3066\u3001\u5f53\u521d\u306f\u3053\u308c\u3092\u8a66\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3067\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\u30b3\u30de\u30f3\u30c9\u81ea\u4f53\u306f\u554f\u984c\u306a\u304f\u7d42\u308f\u308b\u306e\u3067\u3059\u304c\u3001git push deploy master\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u6642\u306bnode-js-sample\u3068\u3044\u3046\u30ec\u30dd\u30b8\u30c8\u30ea\u306f\u7121\u3044\u3068\u3044\u3046\u4e3b\u65e8\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u30c7\u30d7\u30ed\u30a4\u51fa\u6765\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u305d\u3053\u3067\u30b2\u30b9\u30c8\u3067sshcommand\u306e\u5728\u308a\u51e6\u3092\u8abf\u3079\u3066vim\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nvagrant@dokku:~$ sudo which sshcommand\n/usr/local/bin/sshcommand\n\n\u4ee5\u4e0b\u306f/usr/local/bin/sshcommand\u306e\u629c\u7c8b\u3067\u3059\u3002\n  acl-add) # sshcommand acl-add <user> <identifier>\n    if [[ $# -ne 3 ]]; then\n      echo \"Usage : sshcommand acl-add user identifier\"\n      exit -1\n    fi\n    USER=\"$2\"; NAME=\"$3\"\n\n    getent passwd $USER > /dev/null || false\n    USERHOME=$(bash <<< \"echo ~$USER\")\n\n    KEY=$(cat)\n    FINGERPRINT=$(ssh-keygen -lf /dev/stdin <<< $(echo $KEY) | awk '{print $2}')\n    KEY_PREFIX=\"command=\\\"FINGERPRINT=$FINGERPRINT NAME=$NAME \\`cat $USERHOME/.sshcommand\\` \\$SSH_ORIGINAL_COMMAND\\\",no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding\"\n    echo \"$KEY_PREFIX $KEY\" >> \"$USERHOME/.ssh/authorized_keys\"\n    echo $FINGERPRINT\n    ;;\n\n\u30e1\u30a4\u30f3\u3068\u306a\u308b\u306e\u306f\necho \"$KEY_PREFIX $KEY\" >> \"$USERHOME/.ssh/authorized_keys\"\n\u306e\u90e8\u5206\u3067\u3059\u3002\n~vagrant/.ssh/authorized_keys\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304c\u4e0a\u306e\u884c\u306e$KEYS\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\nvagrant@dokku:~$ cat ~/.ssh/authorized_keys\n# CLOUD_IMG: This file was created/modified by the Cloud Image build process\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n\n\u3059\u308b\u3068\u751f\u6210\u3055\u308c\u308b~dokku/.ssh/authorized_keys\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n/home/dokku/.ssh/authorized_keys\ncommand=\"FINGERPRINT=is NAME=vagrant `cat /home/dokku/.sshcommand` $SSH_ORIGINAL_COMMAND\",no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding # CLOUD_IMG: This file was created/modified by the Cloud Image build process\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n\n\n~/.ssh/authorized_keys\u306e\u5148\u982d\u306b\u30b3\u30e1\u30f3\u30c8\u884c\u304c\u3042\u308b\u305b\u3044\u3067\u3001command=\u306e\u884c\u3068ssh-rsa\u306e\u884c\u306e2\u884c\u306b\u5206\u304b\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\u6b63\u3057\u3044\u7d50\u679c\u3092\u5f97\u308b\u306b\u306f\ngrep ^ssh-rsa ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\n\n\u306e\u3088\u3046\u306b\u3057\u3066ssh-rsa\u306e\u884c\u3060\u3051\u3092sshcommand\u306e\u6a19\u6e96\u5165\u529b\u306b\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3059\u308b\u3068~dokku/.ssh/authorized_keys\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\ncommand=\"FINGERPRINT=dd:3b:b8:2e:85:04:06:e9:ab:ff:a8:0a:c0:04:6e:d6 NAME=vagrant `cat /home/dokku/.sshcommand` $SSH_ORIGINAL_COMMAND\",no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n\nssh-rsa\u306e\u524d\u306bcommand\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u3053\u306e\u516c\u958b\u9375\u3067\u8a8d\u8a3c\u3055\u308c\u308b\u3068\u6307\u5b9a\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002sshd(8): OpenSSH SSH daemon - Linux man page\u306eAUTHORIZED_KEYS FILE FORMAT\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002$SSH_ORIGINAL_COMMAND\u306e\u90e8\u5206\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304cssh\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306e\u30b3\u30de\u30f3\u30c9\u3068\u5f15\u6570\u304c\u5c55\u958b\u3055\u308c\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n\u30b2\u30b9\u30c8\u3067/home/dokku/.sshcommand\u306e\u4e2d\u8eab\u3092\u78ba\u8a8d\u3059\u308b\u3068\nvagrant@dokku:~$ sudo cat /home/dokku/.sshcommand\n/usr/local/bin/dokku\n\n\u3068\u306a\u3063\u3066\u3044\u3066\u7d50\u5c40/usr/local/bin/dokku\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u30c7\u30d7\u30ed\u30a4\u6642\u306bdokku\u30b3\u30de\u30f3\u30c9\u304c\u3069\u306e\u3088\u3046\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u304b\u8abf\u3079\u3066\u307f\u305f\ngit push\u3092\u5b9f\u884c\u3057\u305f\u6642\u306bdokku\u30b3\u30de\u30f3\u30c9\u304c\u3069\u3046\u547c\u3070\u308c\u308b\u306e\u304b\u3001\u3088\u304f\u308f\u304b\u3063\u3066\u306a\u3044\u3053\u3068\u306b\u6c17\u3065\u3044\u305f\u306e\u3067\u3001\nvagrant@dokku:~$ sudo vim /usr/local/bin/dokku\n\n\u3092\u5b9f\u884c\u3057\u3066\n#!/usr/bin/env bash\necho `date +%Y-%m-%dT%H:%M:%S%z` \"$@\" >> /tmp/dokku.log # \u2190\u3053\u306e\u884c\u3092\u8ffd\u52a0\n\n\u306e\u3088\u3046\u306b\u30c7\u30d0\u30c3\u30b0\u51fa\u529b\u306e\u884c\u3092\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u30db\u30b9\u30c8\u5074\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u518d\u5ea6\u30c7\u30d7\u30ed\u30a4\u3092\u8a66\u3057\u307e\u3057\u305f\u3002\n$ echo '' > README.md\n$ git commit -a -m 'dummy modification to test deploy'\n[master a069873] dummy modification to test deploy\n 1 file changed, 1 insertion(+), 34 deletions(-)\n rewrite README.md (99%)\n$ git push deploy master\n\n\u305d\u306e\u5f8c\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nvagrant@dokku:~$ cat /tmp/dokku.log\n2014-04-12T18:54:22+0000 git-receive-pack 'node-js-sample'\n2014-04-12T18:54:22+0000 git-hook node-js-sample\n2014-04-12T18:54:22+0000 receive node-js-sample\n2014-04-12T18:54:22+0000 cleanup\n2014-04-12T18:54:22+0000 build node-js-sample\n2014-04-12T18:54:41+0000 release node-js-sample\n2014-04-12T18:54:41+0000 deploy node-js-sample\n2014-04-12T18:54:41+0000 url node-js-sample\n\n\u3053\u308c\u306fdokku\u3068\u3044\u3046\u3088\u308agit\u306e\u8a71\u3067\u3057\u305f\u3002\nProGit\u306eGit - \u30c8\u30e9\u30f3\u30b9\u30d5\u30a1\u30fc\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u300c\u30b9\u30de\u30fc\u30c8\u30d7\u30ed\u30c8\u30b3\u30eb\u300d\u306e\u300c\u30c7\u30fc\u30bf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u300d\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\u82f1\u8a9e\u7248\u3060\u3068Git - Transfer Protocols - The Smart Protocol\u3067\u3059\u3002\n\nxip.io\u3092\u4f7f\u308f\u306a\u3044\u3068\u3069\u3046\u306a\u308b\u304b\u8a66\u3057\u3066\u307f\u305f\nxip.io: wildcard DNS for everyone\u306fbar.10.0.0.2.xip.io\u3084foo.bar.10.0.0.2.xip.io\u306e\u3088\u3046\u306b\u3001xip.io\u306e\u524d\u306bIP\u30a2\u30c9\u30ec\u30b9\u3092\u3064\u3051\u3066\u305d\u306e\u524d\u306b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u3064\u3051\u305f\u30c9\u30e1\u30a4\u30f3\u3092\u6307\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\uff08\u3053\u306e\u4f8b\u3067\u306f10.0.0.2\uff09\u306b\u540d\u524d\u89e3\u6c7a\u3057\u3066\u304f\u308c\u308b\u30ab\u30b9\u30bf\u30e0DNS\u30b5\u30fc\u30d0\u30fc\u3067\u3059\u3002\n\u3053\u308c\u3092\u4f7f\u308f\u305a\u306bIP\u30a2\u30c9\u30ec\u30b9\u306e\u307f\u3092VHOST\u30d5\u30a1\u30a4\u30eb\u306b\u6307\u5b9a\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u306e\u304b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nvagrant@dokku:~$ echo 10.0.0.2 | sudo tee /home/dokku/VHOST\n\n\u3053\u306e\u72b6\u614b\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3001\u30ed\u30b0\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eURL\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\n=====> Application deployed:\n       http://node-js-sample.10.0.0.2\n\nnode-js-sample.10.0.0.2\u306e\u3088\u3046\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u304c\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3068\u3057\u3066\u3064\u3051\u3089\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002xip.io\u3092\u4f7f\u3048\u3070\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3067\u304d\u308b\u3093\u3067\u3059\u306d\u30fc\u3001\u3059\u3054\u3044\uff01\n\u3061\u306a\u307f\u306bVHOST\u306e\u8a2d\u5b9a\u3092\u5fd8\u308c\u3066\u3044\u305f\u6642\u306f\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eURL\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n=====> Application deployed:\n       http://dokku:49153\n\n\n\u611f\u60f3\n\u4ed5\u7d44\u307f\u306f\u8208\u5473\u6df1\u304f\u3066\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u304c\u3001\u79c1\u306f\u666e\u6bb5\u4f7f\u3044\u306b\u3059\u308b\u6c17\u306f\u306a\u3044\u3067\u3059\u3002\u3068\u3044\u3046\u306e\u3082\u958b\u767a\u4e2d\u306b\u3061\u3087\u3053\u3061\u3087\u3053\u8a66\u3059\u305f\u3081\u306b\u6bce\u56decommit\u3059\u308b\u306e\u306f\u9762\u5012\u3060\u304b\u3089\u3002\u4eca\u56de\u306e\u5b9f\u9a13\u4e2d\u3067\u3059\u3089\u9762\u5012\u3067\u3057\u305f\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u306b\u306fVagrant\u306eSynced Folders\u306e\u307b\u3046\u304c\u697d\u3067\u3044\u3044\u3067\u3059\u3002\n\u3042\u3068\u3001README\u306eThings this project won't do\u3092\u898b\u308b\u3068\u8907\u6570\u53f0\u5bfe\u5fdc\u306fdokku\u306e\u30b9\u30b3\u30fc\u30d7\u5916\u3067\u3001\u305d\u306e\u7528\u9014\u306b\u306fFlynn - The product that ops provides to developers\u3092\u3069\u3046\u305e\u3068\u306e\u3053\u3068\u3067\u3059\u3002\n# \u306f\u3058\u3081\u306b\n\ndokku\u306b\u3064\u3044\u3066\u306f\u3001\u30ed\u30fc\u30ab\u30eb\u3067heroku\u30e9\u30a4\u30af\u306a\u74b0\u5883\u304c\u4f5c\u308c\u308b\u3001bash\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u60c5\u5831\u3092\u77e5\u3063\u3066\u3044\u305f\u3060\u3051\u3067\u3001\u4e00\u5ea6\u3082\u8a66\u3057\u3066\u306a\u304b\u3063\u305f\u306e\u3067\u9045\u307e\u304d\u306a\u304c\u3089\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\n\n* [VirtualBox\u3067dokku\u3092\u8a66\u3057\u305f - @znz blog](http://blog.n-z.jp/blog/2013-11-15-dokku.html)\n* [docker - Vagrant\u3067dokku\u3092\u52d5\u304b\u3059 - Qiita](http://qiita.com/hokaccha/items/af109d4037fa1d788617)\n\n[progrium/dokku](https://github.com/progrium/dokku)\u516c\u5f0f\u30ec\u30dd\u30b8\u30c8\u30ea\u5185\u306bVagrant\u30d5\u30a1\u30a4\u30eb\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3048\u3070\u7c21\u5358\u3067\u3057\u305f\u3002\nREADME\u306b\"Note: There are known issues with docker and Ubuntu 13.10 (1, 2) - use of 12.04 is recommended until these issues are resolved.\"\u3068\u3042\u308b\u306e\u3067\u300112.04\u3067\u8a66\u3057\u307e\u3057\u305f\u3002Vagrantfile\u5185\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f13.04\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u74b0\u5883\u5909\u6570\u3092\u6307\u5b9a\u3057\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3057\u305f\u3002\n\n# dokku\u74b0\u5883\u69cb\u7bc9\u306e\u64cd\u4f5c\u624b\u9806\n\n```shell-session\ngit clone https://github.com/progrium/dokku\nBOX_NAME=precise BOX_URI=http://cloud-images.ubuntu.com/vagrant/precise/current/precise-server-cloudimg-amd64-vagrant-disk1.box vagrant up\n```\n\nVirtualBox\u306ebox\u540d\u3092precise\u306b\u3057\u3066\u3001BOX_URI\u306f[A list of base boxes for Vagrant - Vagrantbox.es](http://www.vagrantbox.es/)\u306b\u3042\u308b\"Official Ubuntu 12.04 daily Cloud Image amd64 (VirtualBox 4.1.12)\"\u306eURI\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nIP\u30a2\u30c9\u30ec\u30b9\u306f\u74b0\u5883\u5909\u6570DOKKU_IP\u3067\u6307\u5b9a\u53ef\u80fd\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306fVagrantfile\u5185\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u3068\u3057\u3066\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b10.0.0.2\u3092\u305d\u306e\u307e\u307e\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n```text:Vagrantfile\nDOKKU_IP = ENV[\"DOKKU_IP\"] || \"10.0.0.2\"\n```\n\nvagrant up\u306fMacBook Air 2013\u3060\u3068\u7d0411\u5206\u3067\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\u9014\u4e2d\u306e\u30ed\u30b0\u3092\u898b\u308b\u3068lxc-docker-0.10.0\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5165\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n```shell-session\n$ vagrant ssh\nWelcome to Ubuntu 12.04.4 LTS (GNU/Linux 3.2.0-60-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\n\n  System information as of Sat Apr 12 14:45:11 UTC 2014\n\n  System load:  0.0               Users logged in:        0\n  Usage of /:   5.4% of 39.37GB   IP address for eth0:    10.0.2.15\n  Memory usage: 24%               IP address for eth1:    10.0.0.2\n  Swap usage:   0%                IP address for docker0: 172.17.42.1\n  Processes:    69\n\n  Graph this data and manage this system at:\n    https://landscape.canonical.com/\n\n  Get cloud support with Ubuntu Advantage Cloud Guest:\n    http://www.ubuntu.com/business/services/cloud\n\nvagrant@dokku:~$\n```\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067VHOST\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```\nvagrant@dokku:~$ echo deploy.10.0.0.2.xip.io | sudo tee /home/dokku/VHOST\ndeploy.10.0.0.2.xip.io\n```\n\nvagrant\u306e\u516c\u958b\u9375\u3082\u65e2\u306b\u8a2d\u7f6e\u3057\u3066\u304f\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\nvagrant@dokku:~$ cat .ssh/authorized_keys\n# CLOUD_IMG: This file was created/modified by the Cloud Image build process\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n```\n\n\u3042\u3068\u306fsshcommand\u3092\u4f7f\u3063\u3066vagrant\u306e\u516c\u958b\u9375\u3092dokku\u7528\u306b\u52a0\u5de5\u3057\u3066~dokku/.ssh/authorized_keys\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```shell-session\nvagrant@dokku:~$ grep ^ssh-rsa ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\ndd:3b:b8:2e:85:04:06:e9:ab:ff:a8:0a:c0:04:6e:d6\n```\n\n# \u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u307f\u308b\u30c6\u30b9\u30c8\n\n## ssh\u63a5\u7d9a\u8a2d\u5b9a\n\n\u30db\u30b9\u30c8(OSX)\u306e~/.ssh/config\u306b\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\n```text:~/.ssh/config\nExitOnForwardFailure yes\nCiphers aes256-ctr,aes192-ctr,aes128-ctr\nHashKnownHosts no\nNoHostAuthenticationForLocalhost yes\nServerAliveInterval 30\nHost my-heroku\n  Ciphers arcfour256,arcfour128\n  HostName 10.0.0.2\n  User vagrant\n  Port 22\n  UserKnownHostsFile /dev/null\n  StrictHostKeyChecking no\n  PasswordAuthentication no\n  IdentityFile ~/.vagrant.d/insecure_private_key\n  IdentitiesOnly yes\n```\n\n## \u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306e\u53d6\u5f97\u3068\u30c7\u30d7\u30ed\u30a4\n\n\u30db\u30b9\u30c8(OSX)\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002git-remote\u306e\u30db\u30b9\u30c8\u540d\u306e\u90e8\u5206(my-heroku)\u306f\u4e0a\u3067~/.ssh/config\u306b\u8ffd\u52a0\u3057\u305f\u8a2d\u5b9a\u306eHost\u306e\u5024\u306b\u5408\u308f\u305b\u307e\u3059\u3002@\u306e\u524d\u306e\u30e6\u30fc\u30b6\u540d\u306fdokku\u306b\u3057\u307e\u3059\u3002\u30b3\u30ed\u30f3\u306e\u5f8c\u306f\u30c7\u30d7\u30ed\u30a4\u3057\u305f\u3044\u6642\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u3067\u3059\u3002\n\n```shell-session\n$ git clone https://github.com/heroku/node-js-sample\n$ cd node-js-sample\n$ git remote add deploy dokku@my-heroku:node-js-sample\n$ git push deploy master\n```\n\n\u5b9f\u884c\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\nWarning: Permanently added '10.0.0.2' (RSA) to the list of known hosts.\nCounting objects: 319, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (274/274), done.\nWriting objects: 100% (319/319), 201.92 KiB | 0 bytes/s, done.\nTotal 319 (delta 17), reused 319 (delta 17)\n-----> Cleaning up ...\n-----> Building node-js-sample ...\nremote: warning: You appear to have cloned an empty repository.\nremote: HEAD is now at 2e52ce7... Update documentation links\n       Node.js app detected\n-----> Requested node range:  0.10.x\n-----> Resolved node version: 0.10.26\n-----> Downloading and installing node\n-----> Writing a custom .npmrc to circumvent npm bugs\n-----> Installing dependencies\n       npm http GET https://registry.npmjs.org/express\n       npm http 200 https://registry.npmjs.org/express\n(\u2026\u7565\u2026)\n-----> Deploying node-js-sample ...\n=====> Application deployed:\n       http://node-js-sample.deploy.10.0.0.2.xip.io\n```\n\ngit remote\u306eURL\u3067\u6307\u5b9a\u3057\u305f\u30b3\u30ed\u30f3\u306e\u5f8c\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u304c\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u540d\u3068\u3057\u3066\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002\n\ncurl\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\u3068\u3001\u7121\u4e8b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\n```shell-session\n$ curl http://node-js-sample.deploy.10.0.0.2.xip.io\nHello World!\n```\n\n# \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\n## \u30b2\u30b9\u30c8VM\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\n\n```dokku run \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d \u30b3\u30de\u30f3\u30c9 \u5f15\u6570```\u3068\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n[progrium/dokku](https://github.com/progrium/dokku#run-a-command-in-the-app-environment)\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4f8b\n\n\n```shell-session\nvagrant@dokku:~$ dokku run node-js-sample ls -lah\ntotal 52K\ndrwxr-xr-x  6 root root 4.0K Apr 12 17:30 .\ndrwxr-xr-x 42 root root 4.0K Apr 12 17:43 ..\n-rw-r--r--  1 root root   13 Apr 12 17:30 .gitignore\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .heroku\n-rw-r--r--  1 root root    4 Apr 12 17:30 .npmrc\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .profile.d\n-rw-r--r--  1 root root   37 Apr 12 17:30 .release\n-rw-r--r--  1 root root   17 Apr 12 17:30 Procfile\n-rw-r--r--  1 root root 1.2K Apr 12 17:30 README.md\ndrwxr-xr-x  4 root root 4.0K Apr 12 17:30 node_modules\n-rw-r--r--  1 root root  561 Apr 12 17:30 package.json\ndrwxr-xr-x  3 root root 4.0K Apr 12 17:30 vendor\n-rw-r--r--  1 root root  275 Apr 12 17:30 web.js\n```\n\n## \u30db\u30b9\u30c8(OSX)\u4e0a\u3067\u5b9f\u884c\u3059\u308b\u5834\u5408\n\n```ssh -t dokku@my-heroku run \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d \u30b3\u30de\u30f3\u30c9 \u5f15\u6570```\u3068\u3057\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\n[progrium/dokku](https://github.com/progrium/dokku#remote-commands)\u306b\u8aac\u660e\u304c\u3042\u3063\u3066\u3001ssh\u306b-t\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3053\u3068\u3092\u5f37\u304f\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3068\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u4f8b\n\n```\n$ ssh -t dokku@my-heroku run node-js-sample ls -lah\nWarning: Permanently added '10.0.0.2' (RSA) to the list of known hosts.\ntotal 52K\ndrwxr-xr-x  6 root root 4.0K Apr 12 17:30 .\ndrwxr-xr-x 42 root root 4.0K Apr 12 17:45 ..\n-rw-r--r--  1 root root   13 Apr 12 17:30 .gitignore\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .heroku\n-rw-r--r--  1 root root    4 Apr 12 17:30 .npmrc\ndrwxr-xr-x  2 root root 4.0K Apr 12 17:30 .profile.d\n-rw-r--r--  1 root root   37 Apr 12 17:30 .release\n-rw-r--r--  1 root root   17 Apr 12 17:30 Procfile\n-rw-r--r--  1 root root 1.2K Apr 12 17:30 README.md\ndrwxr-xr-x  4 root root 4.0K Apr 12 17:30 node_modules\n-rw-r--r--  1 root root  561 Apr 12 17:30 package.json\ndrwxr-xr-x  3 root root 4.0K Apr 12 17:30 vendor\n-rw-r--r--  1 root root  275 Apr 12 17:30 web.js\n```\n\n## \u30c7\u30d7\u30ed\u30a4\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u524a\u9664\u3059\u308b\n\n[progrium/dokku](https://github.com/progrium/dokku#removing-a-deployed-app)\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b2\u30b9\u30c8VM\u4e0a\u3067```dokku delete \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d```\u3068\u3059\u308c\u3070OK\u3067\u3059\u3002\n\n\u4f7f\u3044\u65b9\u306e\u8aac\u660e\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\n\n# \u8a66\u884c\u932f\u8aa4\u306e\u30e1\u30e2\n\n## dokku\u30e6\u30fc\u30b6\u306eauthorized_keys\u3092\u4f5c\u308b\u624b\u9806\u3067\u30cf\u30de\u3063\u305f\n\n\u53c2\u8003\u306b\u3057\u305f\u30d6\u30ed\u30b0\u8a18\u4e8b\u3067\u306f\u30b2\u30b9\u30c8VM\u3067\n\n```shell-session\nvagrant@dokku:~$ cat ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\n```\n\n\u3068\u5b9f\u884c\u3059\u308b\u3068\u304b\u3001\n\n[dokku\u306eREADME\u306eConfiguring](https://github.com/progrium/dokku#configuring)\u306b\u306f\u30db\u30b9\u30c8(OSX)\u5074\u3067\u4ee5\u4e0b\u306e\u69d8\u306a\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u304b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002\n\n```\n$ cat ~/.ssh/id_rsa.pub | ssh progriumapp.com \"sudo sshcommand acl-add dokku progrium\"\n```\n\ncat ~/.ssh/id_rsa.pub\u306e\u90e8\u5206\u306f\u3001\u3053\u3053\u3067\u306fvagrant\u306e\u516c\u958b\u9375\u3092\u51fa\u529b\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u79d8\u5bc6\u9375\u304b\u3089\u751f\u6210\u3059\u308b\u304b\n\n```\n$ echo `ssh-keygen -yf ~/.vagrant.d/insecure_private_key` vagrant insecure public key\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n```\n\n[Vagrant\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306ekeys\u30c7\u30a3\u30ec\u30af\u30c8\u30ea](https://github.com/mitchellh/vagrant/tree/master/keys)\u304b\u3089\u4ee5\u4e0b\u306e\u3069\u3061\u3089\u304b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u516c\u958b\u9375\u3092\u53d6\u3063\u3066\u304d\u307e\u3059\u3002\n\n```\n$ wget -q -O - https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub\n```\n\n```\n$ curl -3 https://raw.githubusercontent.com/mitchellh/vagrant/master/keys/vagrant.pub\n```\n\ncurl\u306e\u307b\u3046\u306f-3\u30aa\u30d7\u30b7\u30e7\u30f3\u7121\u3057\u3067\u8a66\u3059\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3057\u305f\u3002\n\n```\ncurl: (35) error:14077458:SSL routines:SSL23_GET_SERVER_HELLO:reason(1112)\n```\n\n[2011:10:07:error_14077458_ssl_routines_ssl23_get_server_hello_reason_1112 \\[carnivore news\\]](http://carnivore.it/2011/10/07/error_14077458_ssl_routines_ssl23_get_server_hello_reason_1112)\u3067-3\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308c\u3070\u5927\u4e08\u592b\u3068\u66f8\u3044\u3066\u3042\u3063\u3066\u3001\u8a66\u3059\u3068OK\u3067\u3057\u305f\u3002\n\n```\n| ssh progriumapp.com \"sudo sshcommand acl-add dokku progrium\"\n```\n\n\u306e\u90e8\u5206\u306f\u4eca\u56de\u306e\u69cb\u6210\u3067\u306f\u3001\n\n```\n| ssh my-heroku \"sudo sshcommand acl-add dokku vagrant\"\n```\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\u307e\u3068\u3081\u308b\u3068\u3001\u30db\u30b9\u30c8\u3067\u5b9f\u884c\u3059\u308b\u306a\u3089\n\n```\n$ echo `ssh-keygen -yf ~/.vagrant.d/insecure_private_key` vagrant insecure public key | ssh my-heroku \"sudo sshcommand acl-add dokku vagrant\"\n```\n\n\u3068\u3059\u308c\u3070OK\u3067\u3059\u3002\n\n\u3067\u3082\u3001\u30b2\u30b9\u30c8\u306e~vagrant/.ssh/authorized_keys\u306b\u516c\u958b\u9375\u304c\u3042\u308b\u306e\u3067\u3001\u305d\u3093\u306a\u9762\u5012\u306a\u3053\u3068\u3092\u3057\u306a\u304f\u3066\u3082\u30b2\u30b9\u30c8\u3067\n\n```shell-session\nvagrant@dokku:~$ cat ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\n```\n\n\u304c\u697d\u3060\u3068\u601d\u3063\u3066\u3001\u5f53\u521d\u306f\u3053\u308c\u3092\u8a66\u3057\u305f\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3067\u30cf\u30de\u308a\u307e\u3057\u305f\u3002\u30b3\u30de\u30f3\u30c9\u81ea\u4f53\u306f\u554f\u984c\u306a\u304f\u7d42\u308f\u308b\u306e\u3067\u3059\u304c\u3001```git push deploy master```\u3067\u306e\u30c7\u30d7\u30ed\u30a4\u6642\u306bnode-js-sample\u3068\u3044\u3046\u30ec\u30dd\u30b8\u30c8\u30ea\u306f\u7121\u3044\u3068\u3044\u3046\u4e3b\u65e8\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u30c7\u30d7\u30ed\u30a4\u51fa\u6765\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u305d\u3053\u3067\u30b2\u30b9\u30c8\u3067sshcommand\u306e\u5728\u308a\u51e6\u3092\u8abf\u3079\u3066vim\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```\nvagrant@dokku:~$ sudo which sshcommand\n/usr/local/bin/sshcommand\n```\n\n\u4ee5\u4e0b\u306f/usr/local/bin/sshcommand\u306e\u629c\u7c8b\u3067\u3059\u3002\n\n```\n  acl-add) # sshcommand acl-add <user> <identifier>\n    if [[ $# -ne 3 ]]; then\n      echo \"Usage : sshcommand acl-add user identifier\"\n      exit -1\n    fi\n    USER=\"$2\"; NAME=\"$3\"\n\n    getent passwd $USER > /dev/null || false\n    USERHOME=$(bash <<< \"echo ~$USER\")\n\n    KEY=$(cat)\n    FINGERPRINT=$(ssh-keygen -lf /dev/stdin <<< $(echo $KEY) | awk '{print $2}')\n    KEY_PREFIX=\"command=\\\"FINGERPRINT=$FINGERPRINT NAME=$NAME \\`cat $USERHOME/.sshcommand\\` \\$SSH_ORIGINAL_COMMAND\\\",no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding\"\n    echo \"$KEY_PREFIX $KEY\" >> \"$USERHOME/.ssh/authorized_keys\"\n    echo $FINGERPRINT\n    ;;\n```\n\n\u30e1\u30a4\u30f3\u3068\u306a\u308b\u306e\u306f\n\n```echo \"$KEY_PREFIX $KEY\" >> \"$USERHOME/.ssh/authorized_keys\"```\n\n\u306e\u90e8\u5206\u3067\u3059\u3002\n\n~vagrant/.ssh/authorized_keys\u306e\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304c\u4e0a\u306e\u884c\u306e$KEYS\u306b\u5c55\u958b\u3055\u308c\u307e\u3059\u3002\n\n```\nvagrant@dokku:~$ cat ~/.ssh/authorized_keys\n# CLOUD_IMG: This file was created/modified by the Cloud Image build process\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n```\n\n\u3059\u308b\u3068\u751f\u6210\u3055\u308c\u308b~dokku/.ssh/authorized_keys\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```text:/home/dokku/.ssh/authorized_keys\ncommand=\"FINGERPRINT=is NAME=vagrant `cat /home/dokku/.sshcommand` $SSH_ORIGINAL_COMMAND\",no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding # CLOUD_IMG: This file was created/modified by the Cloud Image build process\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n```\n\n~/.ssh/authorized_keys\u306e\u5148\u982d\u306b\u30b3\u30e1\u30f3\u30c8\u884c\u304c\u3042\u308b\u305b\u3044\u3067\u3001command=\u306e\u884c\u3068ssh-rsa\u306e\u884c\u306e2\u884c\u306b\u5206\u304b\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\u6b63\u3057\u3044\u7d50\u679c\u3092\u5f97\u308b\u306b\u306f\n\n```\ngrep ^ssh-rsa ~/.ssh/authorized_keys | sudo sshcommand acl-add dokku vagrant\n```\n\n\u306e\u3088\u3046\u306b\u3057\u3066ssh-rsa\u306e\u884c\u3060\u3051\u3092sshcommand\u306e\u6a19\u6e96\u5165\u529b\u306b\u6e21\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u3059\u308b\u3068~dokku/.ssh/authorized_keys\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\ncommand=\"FINGERPRINT=dd:3b:b8:2e:85:04:06:e9:ab:ff:a8:0a:c0:04:6e:d6 NAME=vagrant `cat /home/dokku/.sshcommand` $SSH_ORIGINAL_COMMAND\",no-agent-forwarding,no-user-rc,no-X11-forwarding,no-port-forwarding ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEA6NF8iallvQVp22WDkTkyrtvp9eWW6A8YVr+kz4TjGYe7gHzIw+niNltGEFHzD8+v1I2YJ6oXevct1YeS0o9HZyN1Q9qgCgzUFtdOKLv6IedplqoPkcmF0aYet2PkEDo3MlTBckFXPITAMzF8dJSIFo9D8HfdOV0IAdx4O7PtixWKn5y2hMNG0zQPyUecp4pzC6kivAIhyfHilFR61RGL+GPXQ2MWZWFYbAGjyiYJnAmCP3NOTd0jMZEnDkbUvxhMmBYSdETk1rRgm+R4LOzFUGaHqHDLKLX+FIPKcF96hrucXzcWyLbIbEgE98OHlnVYCzRdK8jlqm8tehUc9c9WhQ== vagrant insecure public key\n```\n\nssh-rsa\u306e\u524d\u306bcommand\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001\u3053\u306e\u516c\u958b\u9375\u3067\u8a8d\u8a3c\u3055\u308c\u308b\u3068\u6307\u5b9a\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002[sshd(8): OpenSSH SSH daemon - Linux man page](http://linux.die.net/man/8/sshd)\u306eAUTHORIZED_KEYS FILE FORMAT\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002$SSH_ORIGINAL_COMMAND\u306e\u90e8\u5206\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304cssh\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u6642\u306e\u30b3\u30de\u30f3\u30c9\u3068\u5f15\u6570\u304c\u5c55\u958b\u3055\u308c\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n\n\u30b2\u30b9\u30c8\u3067/home/dokku/.sshcommand\u306e\u4e2d\u8eab\u3092\u78ba\u8a8d\u3059\u308b\u3068\n\n```shell-session\nvagrant@dokku:~$ sudo cat /home/dokku/.sshcommand\n/usr/local/bin/dokku\n```\n\n\u3068\u306a\u3063\u3066\u3044\u3066\u7d50\u5c40/usr/local/bin/dokku\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u5b9f\u884c\u3055\u308c\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n## \u30c7\u30d7\u30ed\u30a4\u6642\u306bdokku\u30b3\u30de\u30f3\u30c9\u304c\u3069\u306e\u3088\u3046\u306b\u547c\u3073\u51fa\u3055\u308c\u308b\u304b\u8abf\u3079\u3066\u307f\u305f\n\ngit push\u3092\u5b9f\u884c\u3057\u305f\u6642\u306bdokku\u30b3\u30de\u30f3\u30c9\u304c\u3069\u3046\u547c\u3070\u308c\u308b\u306e\u304b\u3001\u3088\u304f\u308f\u304b\u3063\u3066\u306a\u3044\u3053\u3068\u306b\u6c17\u3065\u3044\u305f\u306e\u3067\u3001\n\n\n```\nvagrant@dokku:~$ sudo vim /usr/local/bin/dokku\n```\n\n\u3092\u5b9f\u884c\u3057\u3066\n\n```\n#!/usr/bin/env bash\necho `date +%Y-%m-%dT%H:%M:%S%z` \"$@\" >> /tmp/dokku.log # \u2190\u3053\u306e\u884c\u3092\u8ffd\u52a0\n```\n\n\u306e\u3088\u3046\u306b\u30c7\u30d0\u30c3\u30b0\u51fa\u529b\u306e\u884c\u3092\u8ffd\u52a0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30db\u30b9\u30c8\u5074\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u518d\u5ea6\u30c7\u30d7\u30ed\u30a4\u3092\u8a66\u3057\u307e\u3057\u305f\u3002\n\n```shell-session\n$ echo '' > README.md\n$ git commit -a -m 'dummy modification to test deploy'\n[master a069873] dummy modification to test deploy\n 1 file changed, 1 insertion(+), 34 deletions(-)\n rewrite README.md (99%)\n$ git push deploy master\n```\n\n\u305d\u306e\u5f8c\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```shell-session\nvagrant@dokku:~$ cat /tmp/dokku.log\n2014-04-12T18:54:22+0000 git-receive-pack 'node-js-sample'\n2014-04-12T18:54:22+0000 git-hook node-js-sample\n2014-04-12T18:54:22+0000 receive node-js-sample\n2014-04-12T18:54:22+0000 cleanup\n2014-04-12T18:54:22+0000 build node-js-sample\n2014-04-12T18:54:41+0000 release node-js-sample\n2014-04-12T18:54:41+0000 deploy node-js-sample\n2014-04-12T18:54:41+0000 url node-js-sample\n```\n\n\u3053\u308c\u306fdokku\u3068\u3044\u3046\u3088\u308agit\u306e\u8a71\u3067\u3057\u305f\u3002\nProGit\u306e[Git - \u30c8\u30e9\u30f3\u30b9\u30d5\u30a1\u30fc\u30d7\u30ed\u30c8\u30b3\u30eb](http://git-scm.com/book/ja/Git%E3%81%AE%E5%86%85%E5%81%B4-%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B9%E3%83%95%E3%82%A1%E3%83%BC%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB)\u306e\u300c\u30b9\u30de\u30fc\u30c8\u30d7\u30ed\u30c8\u30b3\u30eb\u300d\u306e\u300c\u30c7\u30fc\u30bf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u300d\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u8aac\u660e\u304c\u3042\u308a\u307e\u3059\u3002\u82f1\u8a9e\u7248\u3060\u3068[Git - Transfer Protocols - The Smart Protocol](http://git-scm.com/book/en/Git-Internals-Transfer-Protocols#The-Smart-Protocol)\u3067\u3059\u3002\n\n## xip.io\u3092\u4f7f\u308f\u306a\u3044\u3068\u3069\u3046\u306a\u308b\u304b\u8a66\u3057\u3066\u307f\u305f\n\n[xip.io: wildcard DNS for everyone](http://xip.io/)\u306fbar.10.0.0.2.xip.io\u3084foo.bar.10.0.0.2.xip.io\u306e\u3088\u3046\u306b\u3001xip.io\u306e\u524d\u306bIP\u30a2\u30c9\u30ec\u30b9\u3092\u3064\u3051\u3066\u305d\u306e\u524d\u306b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u3064\u3051\u305f\u30c9\u30e1\u30a4\u30f3\u3092\u6307\u5b9a\u306eIP\u30a2\u30c9\u30ec\u30b9\uff08\u3053\u306e\u4f8b\u3067\u306f10.0.0.2\uff09\u306b\u540d\u524d\u89e3\u6c7a\u3057\u3066\u304f\u308c\u308b\u30ab\u30b9\u30bf\u30e0DNS\u30b5\u30fc\u30d0\u30fc\u3067\u3059\u3002\n\n\u3053\u308c\u3092\u4f7f\u308f\u305a\u306bIP\u30a2\u30c9\u30ec\u30b9\u306e\u307f\u3092VHOST\u30d5\u30a1\u30a4\u30eb\u306b\u6307\u5b9a\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u306e\u304b\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```\nvagrant@dokku:~$ echo 10.0.0.2 | sudo tee /home/dokku/VHOST\n```\n\n\u3053\u306e\u72b6\u614b\u3067\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3068\u3001\u30ed\u30b0\u306b\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eURL\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u307e\u3057\u305f\u3002\n\n```\n=====> Application deployed:\n       http://node-js-sample.10.0.0.2\n```\n\nnode-js-sample.10.0.0.2\u306e\u3088\u3046\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d\u304c\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3068\u3057\u3066\u3064\u3051\u3089\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3067\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u3059\u3002xip.io\u3092\u4f7f\u3048\u3070\u3053\u306e\u554f\u984c\u3092\u89e3\u6c7a\u3067\u304d\u308b\u3093\u3067\u3059\u306d\u30fc\u3001\u3059\u3054\u3044\uff01\n\n\u3061\u306a\u307f\u306bVHOST\u306e\u8a2d\u5b9a\u3092\u5fd8\u308c\u3066\u3044\u305f\u6642\u306f\u30c7\u30d7\u30ed\u30a4\u3055\u308c\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306eURL\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```\n=====> Application deployed:\n       http://dokku:49153\n```\n\n\n# \u611f\u60f3\n\n\u4ed5\u7d44\u307f\u306f\u8208\u5473\u6df1\u304f\u3066\u52c9\u5f37\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u304c\u3001\u79c1\u306f\u666e\u6bb5\u4f7f\u3044\u306b\u3059\u308b\u6c17\u306f\u306a\u3044\u3067\u3059\u3002\u3068\u3044\u3046\u306e\u3082\u958b\u767a\u4e2d\u306b\u3061\u3087\u3053\u3061\u3087\u3053\u8a66\u3059\u305f\u3081\u306b\u6bce\u56decommit\u3059\u308b\u306e\u306f\u9762\u5012\u3060\u304b\u3089\u3002\u4eca\u56de\u306e\u5b9f\u9a13\u4e2d\u3067\u3059\u3089\u9762\u5012\u3067\u3057\u305f\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u306b\u306f[Vagrant\u306eSynced Folders](http://docs.vagrantup.com/v2/synced-folders/index.html)\u306e\u307b\u3046\u304c\u697d\u3067\u3044\u3044\u3067\u3059\u3002\n\n\u3042\u3068\u3001[README\u306eThings this project won't do](https://github.com/progrium/dokku#things-this-project-wont-do)\u3092\u898b\u308b\u3068\u8907\u6570\u53f0\u5bfe\u5fdc\u306fdokku\u306e\u30b9\u30b3\u30fc\u30d7\u5916\u3067\u3001\u305d\u306e\u7528\u9014\u306b\u306f[Flynn - The product that ops provides to developers](https://flynn.io/)\u3092\u3069\u3046\u305e\u3068\u306e\u3053\u3068\u3067\u3059\u3002", "tags": ["dokku", "docker0.10.0", "vagrant1.5.1", "VirtualBox4.3.10", "OSX10.8.5"]}