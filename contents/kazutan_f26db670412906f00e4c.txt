{"context": "2016/04/12\u8ffd\u8a18: ggplot2 v2.1.0\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u3001\u4e00\u90e8\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u307e\u3057\u305f\n\n\u672c\u8a18\u4e8b\u306f ggplot2\u9006\u5f15\u304d \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4e00\u74b0\u3068\u3057\u3066\u3001Stack Oveflow \u306e\u4e0b\u8a18\u8a18\u4e8b\u3092\u7ffb\u8a33\u3057\u305f\u3082\u306e\u3067\u3059\u3002\nr - Showing data values on stacked bar chart in ggplot2 - Stack Overflow\n\n\nQ\nggplot2\u3067\u7a4d\u307f\u91cd\u306d\u68d2\u30b0\u30e9\u30d5\u306b\u5024\u3092\u91cd\u306d\u3066\u8868\u793a\u3057\u305f\u3044\u3067\u3059\u3002\u79c1\u304c\u8a66\u3057\u305f\u306e\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u3059:\n2016/04/12\u8ffd\u8a18: ggplot2 v2.1.0\u3067qplot()\u306e\u4ed5\u69d8\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3057\u305f\u306e\u3067\u3001ggplot()\u3067\u63cf\u304f\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f\nYear      <- c(rep(c(\"2006-07\", \"2007-08\", \"2008-09\", \"2009-10\"), each = 4))\nCategory  <- c(rep(c(\"A\", \"B\", \"C\", \"D\"), times = 4))\nFrequency <- c(168, 259, 226, 340, 216, 431, 319, 368, 423, 645, 234, 685, 166, 467, 274, 251)\nData      <- data.frame(Year, Category, Frequency)\nlibrary(ggplot2)\np <- ggplot(Data, aes(Year, Frequency, fill = Category)) +\n  geom_bar(stat = \"identity\") +\n  theme_bw()\np + geom_text(aes(label = Frequency), size = 3, hjust = 0.5, vjust = 3, position = \"stack\") \n\n\n\u3067\u3082\u3053\u306e\u30c7\u30fc\u30bf\u306e\u5024\u3092\u3001\u5404\u90e8\u4f4d\u306e\u4e2d\u592e\u306b\u914d\u7f6e\u3057\u305f\u3044\u306e\u3067\u3059\u3002\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\nA\n\u4e00\u3064\u306e\u3084\u308a\u65b9\u3068\u3057\u3066\u3001\u5404\u30d0\u30fc\u306e\u30df\u30c3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u7b97\u51fa\u3059\u308b\u3068\u3044\u3046\u306e\u304c\u3042\u308a\u307e\u3059:\n\nOK_example1.R\nlibrary(ggplot2)\n\n# calculate midpoints of bars (simplified using comment by @DWin)\nData <- ddply(Data, .(Year), transform, pos = cumsum(Frequency) - (0.5 * Frequency))\n\n# plot bars and add text\np <- ggplot(Data, aes(x = Year, y = Frequency)) +\n     geom_bar(aes(fill = Category), stat=\"identity\") +\n     geom_text(aes(label = Frequency, y = pos), size = 3)\n\n\n\n\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u3042\u3089\u304b\u3058\u3081\u5024\u3092\u914d\u7f6e\u3059\u308b\u9ad8\u3055(y\u5024)\u3092\u7b97\u51fa\u3057\u3066\u5909\u6570\u3068\u3057\u3066\u8ffd\u52a0\u3057\u3001geom_text(aes(label = Frequency, y = pos))\u3068\u305d\u306e\u5909\u6570\u3092\u6307\u5b9a\u3059\u308c\u3070\u3001\u305d\u306e\u30e9\u30d9\u30eb\u306f\u7b97\u51fa\u3057\u305f\u4f4d\u7f6e\u306b\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002\n\n\u88dc\u8db3\n\u4e0a\u8a18\u306eA\u306e\u65b9\u6cd5\u306f\u3001\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u65b0\u305f\u306b\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u308a\u307e\u3059\u3002\u305d\u308c\u3092\u907f\u3051\u3066(\u3060\u3044\u305f\u3044)\u771f\u3093\u4e2d\u306b\u304f\u308b\u3088\u3046\u306b\u306a\u308c\u3070\u3044\u3044\u3001\u3068\u3044\u3046\u306e\u3067\u3042\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3067\u3082\u53ef\u80fd\u3067\u3059:\n\nvjust1.R\np <- ggplot(Data, aes(x = Year, y = Frequency)) +\n  geom_bar(aes(fill = Category), stat=\"identity\") +\n  geom_text(aes(label = Frequency), size = 3, position = \"stack\", vjust = Frequency/75)\np\n\n\n\n\u3053\u308c\u306f\u3001geom-text\u306evjust\u306b\u5bfe\u3057\u3066\u8a2d\u5b9a\u3092\u52a0\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306by\u5024\u306e\u5909\u6570\u3092\u5b9a\u6570\u3067\u88dc\u6b63\u3057\u305f\u3082\u306e\u3092vjust =\u306b\u6295\u3052\u308b\u3068\u3001\u5272\u5408\u7684\u306b\u305a\u308c\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u305f\u3060\u3053\u306e\u65b9\u6cd5\u3067\u3059\u3068\u3001\u305d\u306e\u88dc\u6b63\u3059\u308b\u5b9a\u6570\u3092\u3069\u3046\u8a2d\u5b9a\u3057\u305f\u3089\u3069\u771f\u3093\u4e2d\u306b\u304f\u308b\u304b\u3001\u306f\u3063\u304d\u308a\u3068\u306f\u308f\u304b\u308a\u307e\u305b\u3093\u3002\u8a73\u3057\u304f\u306fRPubs - vjust\u306e\u30c6\u30b9\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u5143\u3068\u306a\u3063\u3066\u3044\u308bStackOverflow\u306e\u8a18\u4e8b\u306b\u306f\u3001Hadley Wickham\u6c0f\u306b\u3088\u308b\u4ee5\u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u304c\u3042\u3063\u305f\u3053\u3068\u3082\u4ed8\u8a18\u3057\u307e\u3059:\n\nPlease don't. It's not a good idea to try and improve a confusing visualisation by adding text labels. Either make a table or use a better display of the data. \u2013  hadley Jul 12 '11 at 1:10 \n\n\n\u53c2\u8003\n\nr - Showing data values on stacked bar chart in ggplot2 - Stack Overflow\nRPubs - vjust\u306e\u30c6\u30b9\u30c8\nggplot2\u9006\u5f15\u304d - ggplot2 \u3067 geom_text() \u3092\u4f7f\u3063\u3066\u96c6\u5408\u68d2\u30b0\u30e9\u30d5\u306b\u30e9\u30d9\u30eb\u3092\u4ed8\u3051\u305f\u3044 #rstatsj - Qiita\n\n**2016/04/12\u8ffd\u8a18: ggplot2 v2.1.0\u306b\u5bfe\u5fdc\u3059\u308b\u305f\u3081\u3001\u4e00\u90e8\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u307e\u3057\u305f**\n\n> \u672c\u8a18\u4e8b\u306f [ggplot2\u9006\u5f15\u304d](http://qiita.com/tags/ggplot2%E9%80%86%E5%BC%95%E3%81%8D/items) \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4e00\u74b0\u3068\u3057\u3066\u3001Stack Oveflow \u306e\u4e0b\u8a18\u8a18\u4e8b\u3092\u7ffb\u8a33\u3057\u305f\u3082\u306e\u3067\u3059\u3002  \n> [r - Showing data values on stacked bar chart in ggplot2 - Stack Overflow](http://stackoverflow.com/questions/6644997/showing-data-values-on-stacked-bar-chart-in-ggplot2)\n\n## Q\nggplot2\u3067\u7a4d\u307f\u91cd\u306d\u68d2\u30b0\u30e9\u30d5\u306b\u5024\u3092\u91cd\u306d\u3066\u8868\u793a\u3057\u305f\u3044\u3067\u3059\u3002\u79c1\u304c\u8a66\u3057\u305f\u306e\u306f\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u3059:\n\n**2016/04/12\u8ffd\u8a18: ggplot2 v2.1.0\u3067`qplot()`\u306e\u4ed5\u69d8\u304c\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3057\u305f\u306e\u3067\u3001`ggplot()`\u3067\u63cf\u304f\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3057\u305f**\n\n\n```r\nYear      <- c(rep(c(\"2006-07\", \"2007-08\", \"2008-09\", \"2009-10\"), each = 4))\nCategory  <- c(rep(c(\"A\", \"B\", \"C\", \"D\"), times = 4))\nFrequency <- c(168, 259, 226, 340, 216, 431, 319, 368, 423, 645, 234, 685, 166, 467, 274, 251)\nData      <- data.frame(Year, Category, Frequency)\nlibrary(ggplot2)\np <- ggplot(Data, aes(Year, Frequency, fill = Category)) +\n  geom_bar(stat = \"identity\") +\n  theme_bw()\np + geom_text(aes(label = Frequency), size = 3, hjust = 0.5, vjust = 3, position = \"stack\") \n```\n\n![NG.example.R-1.png](https://qiita-image-store.s3.amazonaws.com/0/35118/227f06f4-cc86-815d-772d-4be02a8f99ff.png)\n\n\u3067\u3082\u3053\u306e\u30c7\u30fc\u30bf\u306e\u5024\u3092\u3001\u5404\u90e8\u4f4d\u306e\u4e2d\u592e\u306b\u914d\u7f6e\u3057\u305f\u3044\u306e\u3067\u3059\u3002\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n## A\n\u4e00\u3064\u306e\u3084\u308a\u65b9\u3068\u3057\u3066\u3001\u5404\u30d0\u30fc\u306e\u30df\u30c3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u7b97\u51fa\u3059\u308b\u3068\u3044\u3046\u306e\u304c\u3042\u308a\u307e\u3059:\n\n```r:OK_example1.R\nlibrary(ggplot2)\n\n# calculate midpoints of bars (simplified using comment by @DWin)\nData <- ddply(Data, .(Year), transform, pos = cumsum(Frequency) - (0.5 * Frequency))\n\n# plot bars and add text\np <- ggplot(Data, aes(x = Year, y = Frequency)) +\n     geom_bar(aes(fill = Category), stat=\"identity\") +\n     geom_text(aes(label = Frequency, y = pos), size = 3)\n```\n\n![OK_example1a.R-1.png](https://qiita-image-store.s3.amazonaws.com/0/35118/e50588b9-2ef0-f3ab-51f3-bcfc3d47fb21.png)\n\n\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u3042\u3089\u304b\u3058\u3081\u5024\u3092\u914d\u7f6e\u3059\u308b\u9ad8\u3055(y\u5024)\u3092\u7b97\u51fa\u3057\u3066\u5909\u6570\u3068\u3057\u3066\u8ffd\u52a0\u3057\u3001`geom_text(aes(label = Frequency, y = pos))`\u3068\u305d\u306e\u5909\u6570\u3092\u6307\u5b9a\u3059\u308c\u3070\u3001\u305d\u306e\u30e9\u30d9\u30eb\u306f\u7b97\u51fa\u3057\u305f\u4f4d\u7f6e\u306b\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002\n\n\n## \u88dc\u8db3\n\u4e0a\u8a18\u306eA\u306e\u65b9\u6cd5\u306f\u3001\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u65b0\u305f\u306b\u5909\u6570\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3068\u306a\u308a\u307e\u3059\u3002\u305d\u308c\u3092\u907f\u3051\u3066(\u3060\u3044\u305f\u3044)\u771f\u3093\u4e2d\u306b\u304f\u308b\u3088\u3046\u306b\u306a\u308c\u3070\u3044\u3044\u3001\u3068\u3044\u3046\u306e\u3067\u3042\u308c\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3067\u3082\u53ef\u80fd\u3067\u3059:\n\n```r:vjust1.R\np <- ggplot(Data, aes(x = Year, y = Frequency)) +\n  geom_bar(aes(fill = Category), stat=\"identity\") +\n  geom_text(aes(label = Frequency), size = 3, position = \"stack\", vjust = Frequency/75)\np\n```\n\n![vjust1a.R-1.png](https://qiita-image-store.s3.amazonaws.com/0/35118/8531e988-bbec-d373-cdcb-dcb4f3624c5b.png)\n\n\u3053\u308c\u306f\u3001`geom-text`\u306e`vjust`\u306b\u5bfe\u3057\u3066\u8a2d\u5b9a\u3092\u52a0\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306by\u5024\u306e\u5909\u6570\u3092\u5b9a\u6570\u3067\u88dc\u6b63\u3057\u305f\u3082\u306e\u3092`vjust = `\u306b\u6295\u3052\u308b\u3068\u3001\u5272\u5408\u7684\u306b\u305a\u308c\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u305f\u3060\u3053\u306e\u65b9\u6cd5\u3067\u3059\u3068\u3001\u305d\u306e\u88dc\u6b63\u3059\u308b\u5b9a\u6570\u3092\u3069\u3046\u8a2d\u5b9a\u3057\u305f\u3089\u3069\u771f\u3093\u4e2d\u306b\u304f\u308b\u304b\u3001\u306f\u3063\u304d\u308a\u3068\u306f\u308f\u304b\u308a\u307e\u305b\u3093\u3002\u8a73\u3057\u304f\u306f[RPubs - vjust\u306e\u30c6\u30b9\u30c8](https://rpubs.com/kazutan/vjust_test)\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\u307e\u305f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u5143\u3068\u306a\u3063\u3066\u3044\u308bStackOverflow\u306e\u8a18\u4e8b\u306b\u306f\u3001Hadley Wickham\u6c0f\u306b\u3088\u308b\u4ee5\u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u304c\u3042\u3063\u305f\u3053\u3068\u3082\u4ed8\u8a18\u3057\u307e\u3059:\n\n>  Please don't. It's not a good idea to try and improve a confusing visualisation by adding text labels. Either make a table or use a better display of the data. \u2013  hadley Jul 12 '11 at 1:10 \n\n## \u53c2\u8003\n- [r - Showing data values on stacked bar chart in ggplot2 - Stack Overflow](http://stackoverflow.com/questions/6644997/showing-data-values-on-stacked-bar-chart-in-ggplot2)\n- [RPubs - vjust\u306e\u30c6\u30b9\u30c8](https://rpubs.com/kazutan/vjust_test)\n- [ggplot2\u9006\u5f15\u304d - ggplot2 \u3067 geom_text() \u3092\u4f7f\u3063\u3066\u96c6\u5408\u68d2\u30b0\u30e9\u30d5\u306b\u30e9\u30d9\u30eb\u3092\u4ed8\u3051\u305f\u3044 #rstatsj - Qiita](http://qiita.com/hoxo_m/items/267ce2ab0acc319599ff)\n", "tags": ["ggplot2\u9006\u5f15\u304d", "R"]}