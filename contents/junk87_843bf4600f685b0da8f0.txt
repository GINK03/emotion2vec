{"context": " More than 1 year has passed since last update.\n\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nhttp://docs.aws.amazon.com/cli/latest/reference/rds/index.html\n\n\u524d\u63d0\u6761\u4ef6\n\nAWS CLI\u30d0\u30fc\u30b8\u30e7\u30f3\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n* AWS CLI 1.7.29\n\n\u30b3\u30de\u30f3\u30c9\naws --version\n\n\n\n\u7d50\u679c\naws-cli/1.7.29\n\n\n\n\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb(\u65e5\u672c\u8a9e)\n\u5bfe\u8c61RDS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u300c\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306e\u8a73\u7d30\u300d\u306b\u901a\u77e5\u304c\u3042\u308b\u4e8b \n\n\naws rds\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a2d\u5b9a\n\n\u30b3\u30de\u30f3\u30c9\nRDS_ENDPOINT='dbinstance.xxxxxxxxxx.ap-northeast-1.rds.amazonaws.com' && echo ${RDS_ENDPOINT_TARGET}\n\n\n\n\u7d50\u679c\ndbinstance.xxxxxxxxxx.ap-northeast-1.rds.amazonaws.com\n\n\n\nDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u8a2d\u5b9a\n\n\u30b3\u30de\u30f3\u30c9\nRDS_DBINSTANCE='dbinstance' && echo ${RDS_DBINSTANCE}\n\n\n\n\u7d50\u679c\ndbinstance\n\n\n\nDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws rds describe-pending-maintenance-actions --filter Name=db-instance-id,Values=${RDS_DBINSTANCE}\n\n\n\n\u7d50\u679c\n{\n    \"PendingMaintenanceActions\": [\n        {\n            \"PendingMaintenanceActionDetails\": [\n                {\n                    \"Action\": \"os-upgrade\",\n                    \"Description\": \"Security and stability updates\"\n                }\n            ],\n            \"ResourceIdentifier\": \"arn:aws:rds:ap-northeast-1:012345678910:db:dbinstance\"\n        }\n    ]\n}\n\n\n\nAction\u306e\u8a2d\u5b9a\naws rds describe-pending-maintenance-actions\u306b\u3066\u78ba\u8a8d\u6e08\u307f\u306eAction\u3092\u8a2d\u5b9a\n\n\u30b3\u30de\u30f3\u30c9\nRDS_ACTION=`aws rds  describe-pending-maintenance-actions \\ \n--filter Name=db-instance-id,Values=${RDS_INSTANCEID_TARGET} \\ \n| jq -r '.PendingMaintenanceActions[].PendingMaintenanceActionDetails[].Action '` \\ \n&& echo ${RDS_ACTION}\n\n\n\n\u7d50\u679c\nos-upgrade\n\n\n\nResourceIdentifier\u306e\u8a2d\u5b9a\naws rds describe-pending-maintenance-actions\u306b\u3066\u78ba\u8a8d\u6e08\u307f\u306eResourceIdentifier\u3092\u8a2d\u5b9a\n\n\u30b3\u30de\u30f3\u30c9\nRDS_RESOURCEIDENTIFIER=`aws rds  describe-pending-maintenance-actions \\\n --filter Name=db-instance-id,Values=${RDS_DBINSTANCE} \\\n| jq -r '.PendingMaintenanceActions[].ResourceIdentifier'` \\\n&& echo ${RDS_RESOURCEIDENTIFIER}\n\n\n\n\u7d50\u679c\narn:aws:rds:ap-northeast-1:012345678910:db:dbinstance\n\n\n\nopt-in-type \u306e\u8a2d\u5b9a\n\u5373\u6642\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3092\u5b9f\u884c\u3059\u308b\u70ba\u3001immediate \u3092\u8a2d\u5b9a\n\n\u30b3\u30de\u30f3\u30c9\nRDS_OPTINTYPE='immediate' && echo ${RDS_OPTINTYPE}\n\n\n\n\u7d50\u679c\nimmediate\n\n\n\naws rds apply-pending-maintenance-action\u306e\u5b9f\u884c\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5bfe\u8c61\u306eDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3078\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u65bd\n\n\u30b3\u30de\u30f3\u30c9\naws rds apply-pending-maintenance-action --apply-action ${RDS_ACTION} \\\n--opt-in-type ${RDS_OPTINTYPE}  \\\n--resource-identifier ${RDS_RESOURCEIDENTIFIER}\n\n\n\n\u7d50\u679c\n{\n    \"ResourcePendingMaintenanceActions\": {\n        \"PendingMaintenanceActionDetails\": [\n            {\n                \"Action\": \"os-upgrade\",\n                \"Description\": \"Security and stability updates\",\n                \"OptInStatus\": \"immediate\"\n            }\n        ],\n        \"ResourceIdentifier\": \"arn:aws:rds:ap-northeast-1:012345678910:db:dbinstance\"\n    }\n}\n\n\n\u203b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u4e2d\u306fDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30aa\u30d5\u30e9\u30a4\u30f3\u3068\u306a\u308b\u306e\u3067\u6ce8\u610f\n\naws rds describe-pending-maintenance-actions\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws rds describe-pending-maintenance-actions --filter Name=db-instance-id,Values=${RDS_DBINSTANCE}\n\n\n\n\u7d50\u679c\n{\n    \"PendingMaintenanceActions\": []\n}\n\n\n\naws describe-events\u306e\u78ba\u8a8d\naws describe-events\u30b3\u30de\u30f3\u30c9\u306b\u3066\u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws --output text rds describe-events\n\n\n\n\u7d50\u679c\nEVENTS  YYYY-MM-DDThh:mm:ss.635Z        Applying off-line patches to DB instance        dbinstance    db-instance\nEVENTCATEGORIES maintenance\nEVENTS  YYYY-MM-DDThh:mm:ss.258Z        DB instance shutdown    dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.845Z        DB instance restarted   dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.148Z        DB instance shutdown    dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.835Z        DB instance restarted   dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.322Z        Finished applying off-line patches to DB instance       dbinstance    db-instance\nEVENTCATEGORIES maintenance\n\n\n\n# \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\nhttp://docs.aws.amazon.com/cli/latest/reference/rds/index.html\n\n# \u524d\u63d0\u6761\u4ef6\n\n## AWS CLI\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n* AWS CLI 1.7.29\n\n```ruby:\u30b3\u30de\u30f3\u30c9\naws --version\n```\n```ruby:\u7d50\u679c\naws-cli/1.7.29\n```\n\n\n## \u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb(\u65e5\u672c\u8a9e)\n\n\u5bfe\u8c61RDS\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u300c\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306e\u8a73\u7d30\u300d\u306b\u901a\u77e5\u304c\u3042\u308b\u4e8b \n\n![RDS\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306e\u8a73\u7d30.png](https://qiita-image-store.s3.amazonaws.com/0/74171/d74b65d3-c553-7d36-f041-6866d68a020a.png)\n\n# aws rds\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5b9f\u884c\n\n## \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306e\u8a2d\u5b9a\n\n```ruby:\u30b3\u30de\u30f3\u30c9\nRDS_ENDPOINT='dbinstance.xxxxxxxxxx.ap-northeast-1.rds.amazonaws.com' && echo ${RDS_ENDPOINT_TARGET}\n```\n```ruby:\u7d50\u679c\ndbinstance.xxxxxxxxxx.ap-northeast-1.rds.amazonaws.com\n```\n\n## DB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u8a2d\u5b9a\n\n```ruby:\u30b3\u30de\u30f3\u30c9\nRDS_DBINSTANCE='dbinstance' && echo ${RDS_DBINSTANCE}\n```\n```ruby:\u7d50\u679c\ndbinstance\n```\n\n## DB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u78ba\u8a8d\n\n```ruby:\u30b3\u30de\u30f3\u30c9\naws rds describe-pending-maintenance-actions --filter Name=db-instance-id,Values=${RDS_DBINSTANCE}\n```\n```ruby:\u7d50\u679c\n{\n    \"PendingMaintenanceActions\": [\n        {\n            \"PendingMaintenanceActionDetails\": [\n                {\n                    \"Action\": \"os-upgrade\",\n                    \"Description\": \"Security and stability updates\"\n                }\n            ],\n            \"ResourceIdentifier\": \"arn:aws:rds:ap-northeast-1:012345678910:db:dbinstance\"\n        }\n    ]\n}\n```\n\n\n## Action\u306e\u8a2d\u5b9a\n\naws rds describe-pending-maintenance-actions\u306b\u3066\u78ba\u8a8d\u6e08\u307f\u306eAction\u3092\u8a2d\u5b9a\n\n```ruby:\u30b3\u30de\u30f3\u30c9\nRDS_ACTION=`aws rds  describe-pending-maintenance-actions \\ \n--filter Name=db-instance-id,Values=${RDS_INSTANCEID_TARGET} \\ \n| jq -r '.PendingMaintenanceActions[].PendingMaintenanceActionDetails[].Action '` \\ \n&& echo ${RDS_ACTION}\n```\n```ruby:\u7d50\u679c\nos-upgrade\n```\n\n## ResourceIdentifier\u306e\u8a2d\u5b9a\n\naws rds describe-pending-maintenance-actions\u306b\u3066\u78ba\u8a8d\u6e08\u307f\u306eResourceIdentifier\u3092\u8a2d\u5b9a\n\n```ruby:\u30b3\u30de\u30f3\u30c9\nRDS_RESOURCEIDENTIFIER=`aws rds  describe-pending-maintenance-actions \\\n --filter Name=db-instance-id,Values=${RDS_DBINSTANCE} \\\n| jq -r '.PendingMaintenanceActions[].ResourceIdentifier'` \\\n&& echo ${RDS_RESOURCEIDENTIFIER}\n```\n```ruby:\u7d50\u679c\narn:aws:rds:ap-northeast-1:012345678910:db:dbinstance\n```\n\n## opt-in-type \u306e\u8a2d\u5b9a\n\n\u5373\u6642\u306b\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3092\u5b9f\u884c\u3059\u308b\u70ba\u3001immediate \u3092\u8a2d\u5b9a\n\n```ruby:\u30b3\u30de\u30f3\u30c9\nRDS_OPTINTYPE='immediate' && echo ${RDS_OPTINTYPE}\n```\n```ruby:\u7d50\u679c\nimmediate\n```\n\n## aws rds apply-pending-maintenance-action\u306e\u5b9f\u884c\n\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u5bfe\u8c61\u306eDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3078\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u65bd\n\n```ruby:\u30b3\u30de\u30f3\u30c9\naws rds apply-pending-maintenance-action --apply-action ${RDS_ACTION} \\\n--opt-in-type ${RDS_OPTINTYPE}  \\\n--resource-identifier ${RDS_RESOURCEIDENTIFIER}\n```\n```ruby:\u7d50\u679c\n{\n    \"ResourcePendingMaintenanceActions\": {\n        \"PendingMaintenanceActionDetails\": [\n            {\n                \"Action\": \"os-upgrade\",\n                \"Description\": \"Security and stability updates\",\n                \"OptInStatus\": \"immediate\"\n            }\n        ],\n        \"ResourceIdentifier\": \"arn:aws:rds:ap-northeast-1:012345678910:db:dbinstance\"\n    }\n}\n```\n*\u203b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u4e2d\u306fDB\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u30aa\u30d5\u30e9\u30a4\u30f3\u3068\u306a\u308b\u306e\u3067\u6ce8\u610f*\n\n\n## aws rds describe-pending-maintenance-actions\u306e\u78ba\u8a8d\n\n```ruby:\u30b3\u30de\u30f3\u30c9\naws rds describe-pending-maintenance-actions --filter Name=db-instance-id,Values=${RDS_DBINSTANCE}\n```\n```ruby:\u7d50\u679c\n{\n    \"PendingMaintenanceActions\": []\n}\n```\n\n## aws describe-events\u306e\u78ba\u8a8d\n\naws describe-events\u30b3\u30de\u30f3\u30c9\u306b\u3066\u30a4\u30d9\u30f3\u30c8\u78ba\u8a8d\n\n```ruby:\u30b3\u30de\u30f3\u30c9\naws --output text rds describe-events\n```\n```ruby:\u7d50\u679c\nEVENTS  YYYY-MM-DDThh:mm:ss.635Z        Applying off-line patches to DB instance        dbinstance    db-instance\nEVENTCATEGORIES maintenance\nEVENTS  YYYY-MM-DDThh:mm:ss.258Z        DB instance shutdown    dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.845Z        DB instance restarted   dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.148Z        DB instance shutdown    dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.835Z        DB instance restarted   dbinstance    db-instance\nEVENTCATEGORIES availability\nEVENTS  YYYY-MM-DDThh:mm:ss.322Z        Finished applying off-line patches to DB instance       dbinstance    db-instance\nEVENTCATEGORIES maintenance\n```\n\n\n\n\n\n", "tags": ["AWS", "aws-cli"]}