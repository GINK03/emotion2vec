{"tags": ["Rails", "Ruby", "Nokogiri"], "context": "\n\n\u3084\u308a\u305f\u3044\u3053\u3068\n\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc\u672c\u4f53 \u30b9\u30c8\u30a2\u4e00\u89a7\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u3057\u305f\u3044\u3002\n\n\u5b9f\u884c\u6e96\u5099\n\u521d\u671f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\u3092\u53c2\u7167\u3002\n\ntest.rake\nrequire 'open-uri'\nrequire 'nokogiri'\n\nnamespace :scrape do\n  desc\"\u5e97\u8217\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u30c6\u30b9\u30c8\"\n  task :scrape_shop_links => :environment do\n    url = \"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\"\n    charset = nil\n    html = open(url) do |f|\n      charset = f.charset\n      f.read\n    end\n\n    doc = Nokogiri::HTML.parse(html, nil, charset)\n    shops = doc.css(\".elMain\")\n    #shop_list = shops.css(\"li\")\n    count = 0\n    data = []\n    shops.each do |shop|\n      count += 1\n      url = shop.css(\"a\")[0][:href]\n      name = shop.css(\"span.elStoreName\")[0]\n      puts url, name\n    end\n  end\nend\n\n\n\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u304c\njavascript:void(0);\n\nhttp://store.shopping.yahoo.co.jp/aoupprcgigiwgd7i6y2ztfylwi/\n<span class=\"elStoreName\">A\u30b9\u30c6\u30fc\u30b8Yahoo!\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/apollon/\n<span class=\"elStoreName\">\u3042\u307d\u308d\u3093Yahoo!\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/lostboys-guitars/\n<span class=\"elStoreName\">Unlimited Guitars</span>\nhttp://store.shopping.yahoo.co.jp/unliminet/\n<span class=\"elStoreName\">UNLIMINET</span>\nhttp://store.shopping.yahoo.co.jp/e-yoshiyagakki/\n<span class=\"elStoreName\">e-\u3088\u3057\u3084\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/ikebe/\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/ikebe-revole/\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u30ea\u30dc\u30ec\u79cb\u8449\u539f\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/ishibashi/\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/ishibashi-shops/\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668 17\u30b7\u30e7\u30c3\u30d7\u30b9</span>\nhttp://store.shopping.yahoo.co.jp/illusion/\n<span class=\"elStoreName\">\u4e00\u671f\u4e00\u4f1a\u672c\u8217 \u30ae\u30bf\u30fc\u521d\u5fc3\u8005\u3082\u5b89\u5fc3</span>\nhttp://store.shopping.yahoo.co.jp/itogakki/\n<span class=\"elStoreName\">\u4f0a\u85e4\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/wizard-leather/\n<span class=\"elStoreName\">WIZARD LEATHER</span>\nhttp://store.shopping.yahoo.co.jp/wavehouse/\n<span class=\"elStoreName\">WaveHouse</span>\nhttp://store.shopping.yahoo.co.jp/alien-soundworks/\n<span class=\"elStoreName\">Alien Soundworks</span>\nhttp://store.shopping.yahoo.co.jp/sgtech/\n<span class=\"elStoreName\">\u30a8\u30b9\u30b8\u30fc\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ba</span>\nhttp://store.shopping.yahoo.co.jp/music-kingdom/\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc \u521d\u5fc3\u8005\u30bb\u30c3\u30c8\u97f3\u697d\u5802</span>\nhttp://store.shopping.yahoo.co.jp/ebisound/\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc\u3068\u30a6\u30af\u30ec\u30ec\u306eEbiSound</span>\nhttp://store.shopping.yahoo.co.jp/sound-station/\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc\u306eSOUND STATION</span>\nhttp://store.shopping.yahoo.co.jp/audio-mania/\n<span class=\"elStoreName\">Audio Mania</span>\nhttp://store.shopping.yahoo.co.jp/owariya-gakki/\n<span class=\"elStoreName\">\u304a\u304b\u3052\u69d8\u3067\u5275\u696d104\u5e74\u30aa\u30ef\u30ea\u30e4\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/funhoused/\n<span class=\"elStoreName\">\u97f3\u697d\u5c4b\u30d5\u30a1\u30f3\u30cf\u30a6\u30b9</span>\nhttp://store.shopping.yahoo.co.jp/sendaiguitar/\n<span class=\"elStoreName\">\u97f3\u8272\u7814\u7a76\u4f1a</span>\nhttp://store.shopping.yahoo.co.jp/on-you-music/\n<span class=\"elStoreName\">\u30aa\u30f3\u30e6\u30fc\u697d\u5668\u30fb\u30e4\u30d5\u30fc\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/gakki-de-genki/\n<span class=\"elStoreName\">\u697d\u5668de\u5143\u6c17</span>\nhttp://store.shopping.yahoo.co.jp/crossroad-oyama/\n<span class=\"elStoreName\">\u697d\u5668\u5e97 CROSSROAD</span>\nhttp://store.shopping.yahoo.co.jp/gakki/\n<span class=\"elStoreName\">\u697d\u5668\u5929\u56fd</span>\nhttp://store.shopping.yahoo.co.jp/manmandougakki/\n<span class=\"elStoreName\">\u697d\u5668\u5e97\u307e\u3093\u307e\u3093\u5802</span>\nhttp://store.shopping.yahoo.co.jp/rotomusic/\n<span class=\"elStoreName\">\u697d\u5668\u306e\u8cb7\u53d6\u8ca9\u58f2 \u30ed\u30c8\u30df\u30e5\u30fc\u30b8\u30c3\u30af</span>\nhttp://store.shopping.yahoo.co.jp/okumuragakki/\n<span class=\"elStoreName\">\u697d\u5668\u306e\u7dcf\u5408\u30c7\u30d1\u30fc\u30c8 \u30aa\u30af\u30e0\u30e9\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/gakki-mori/\n<span class=\"elStoreName\">\u697d\u5668\u306e\u68ee</span>\nhttp://store.shopping.yahoo.co.jp/g-monogatari/\n<span class=\"elStoreName\">\u697d\u5668\u30e2\u30ce\u30ac\u30bf\u30ea</span>\nhttp://store.shopping.yahoo.co.jp/g-sakai/\n<span class=\"elStoreName\">\u697d\u5668\u5c4b\u306eSAKAI</span>\nhttp://store.shopping.yahoo.co.jp/gakkiland-thanks/\n<span class=\"elStoreName\">\u697d\u5668\u30e9\u30f3\u30c9 \u30b5\u30f3\u30af\u30b9</span>\nhttp://store.shopping.yahoo.co.jp/musicgear/\n<span class=\"elStoreName\">KANAZAWA TK</span>\nhttp://store.shopping.yahoo.co.jp/suwano/\n<span class=\"elStoreName\">\u682a\u5f0f\u4f1a\u793e \u6728\u4e0b\u697d\u5668\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/jd52k3mnwfd5sap7qlk4eugtee/\n<span class=\"elStoreName\">Guitarshopabc</span>\nhttp://store.shopping.yahoo.co.jp/guitarplanet/\n<span class=\"elStoreName\">\u30ae\u30bf\u30fc\u30d7\u30e9\u30cd\u30c3\u30c8 Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\nhttp://store.shopping.yahoo.co.jp/gwnn/\n<span class=\"elStoreName\">Guitar Proshop GWNN \u30cd\u30c3\u30c8\u30b9\u30c8\u30a2</span>\nhttp://store.shopping.yahoo.co.jp/kurosawa-unplugged/\n<span class=\"elStoreName\">GUITAR MUSEUM</span>\nhttp://store.shopping.yahoo.co.jp/cfhnjs2sr46pd23uzihqf7vtkq/\n<span class=\"elStoreName\">Good Guitars</span>\nhttp://store.shopping.yahoo.co.jp/groovemusic/\n<span class=\"elStoreName\">\u30b0\u30eb\u30fc\u30f4\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2</span>\nhttp://store.shopping.yahoo.co.jp/grace-music-store/\n<span class=\"elStoreName\">Grace\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2 \u30e4\u30d5\u30fc\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/kurosawashibuya/\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668\u5e97G-CLUB\u6e0b\u8c37</span>\nhttp://store.shopping.yahoo.co.jp/honten/\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668 \u65e5\u672c\u7dcf\u672c\u5e97 WEBSHOP</span>\nhttp://store.shopping.yahoo.co.jp/ksound-yh/\n<span class=\"elStoreName\">Ksound Yahoo!\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 SHOP</span>\nhttp://store.shopping.yahoo.co.jp/genzovintageguitars/\n<span class=\"elStoreName\">GENZO VINTAGE GUITARS</span>\nhttp://store.shopping.yahoo.co.jp/koeido1/\n<span class=\"elStoreName\">\u5149\u6804\u5802\u697d\u5668Yahoo!\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/koyogakki/\n<span class=\"elStoreName\">\u5149\u6d0b\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/cocosoundweb/\n<span class=\"elStoreName\">COCOSOUND Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\nhttp://store.shopping.yahoo.co.jp/cosmogakki/\n<span class=\"elStoreName\">\u30b3\u30b9\u30e2\u697d\u5668</span>\n\njavascript:void(0);\u3092\u3069\u3046\u306b\u304b\u3059\u308b\u306e\u3068\u3001span\u30bf\u30b0\u304b\u3089\u30c6\u30ad\u30b9\u30c8\u3060\u3051\u3092\u6458\u51fa\u3057\u306a\u3051\u308c\u3070\u3002\u3002\u3002\n\n\u51fa\u529b\u30c7\u30fc\u30bf\u306e\u6574\u5f62\nWeb\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u7528\u3044\u305f\u30c7\u30fc\u30bf\u691c\u7d22\u30af\u30ed\u30fc\u30e9\u69cb\u7bc9\u5165\u9580\u3092\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\n\ntest.rake\nrequire 'open-uri'\nrequire 'nokogiri'\n\nnamespace :scrape do\n  desc\"\u5e97\u8217\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u30c6\u30b9\u30c8\"\n  task :scrape_shop_links => :environment do\n    url = \"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\"\n    charset = nil\n    html = open(url) do |f|\n      charset = f.charset\n      f.read\n    end\n\n    doc = Nokogiri::HTML.parse(html, nil, charset)\n    shops = doc.css(\".elMain\")\n    #shop_list = shops.css(\"li\")\n    count = 0\n    data = []\n    shops.each do |shop|\n      count += 1\n      url = shop.css(\"a\")[0][:href]\n      name = shop.css(\"span.elStoreName\").text\n      puts \"name: #{name}, url: #{url}\"\n    end\n  end\nend\n\n\n\n\nname = shop.css(\"span.elStoreName\")[0].text\n\u3068\u5165\u529b\u3059\u308b\u3068NoMethodError: undefined method 'text' for nil:NilClass\u3068\u8a00\u308f\u308c\u6012\u3089\u308c\u3066\u3057\u307e\u3046\u3002\u306a\u305c\u3060\u308d\u3046\u304b\u3002\u3002\n\u4e0a\u306b\u3082\u8a18\u8ff0\u3057\u305f\u304c\u3001name = shop.css(\"span.elStoreName\")[0]\u306fspan.elStoreName\u30bf\u30b0\u306e\u3064\u3044\u305f\u6700\u521d\u306e\u8981\u7d20\u3092\u53d6\u3063\u3066\u304f\u308b\u3002\n<span class=\"elStoreName\">\u611b\u66f2\u697d\u5668 \u685c\u5c71\u672c\u5e97</span>\n<span class=\"elStoreName\">A\u30b9\u30c6\u30fc\u30b8Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u3042\u307d\u308d\u3093Yahoo!\u5e97</span>\n<span class=\"elStoreName\">Unlimited Guitars</span>\n<span class=\"elStoreName\">UNLIMINET</span>\n<span class=\"elStoreName\">e-\u3088\u3057\u3084\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u30ea\u30dc\u30ec\u79cb\u8449\u539f\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668 17\u30b7\u30e7\u30c3\u30d7\u30b9</span>\n<span class=\"elStoreName\">\u4e00\u671f\u4e00\u4f1a\u672c\u8217 \u30ae\u30bf\u30fc\u521d\u5fc3\u8005\u3082\u5b89\u5fc3</span>\n<span class=\"elStoreName\">\u4f0a\u85e4\u697d\u5668</span>\n<span class=\"elStoreName\">WIZARD LEATHER</span>\n<span class=\"elStoreName\">WaveHouse</span>\n<span class=\"elStoreName\">Alien Soundworks</span>\n<span class=\"elStoreName\">\u30a8\u30b9\u30b8\u30fc\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ba</span>\n<span class=\"elStoreName\">MHJ Yahoo!\u5e97</span>\n<span class=\"elStoreName\">MGM\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc \u521d\u5fc3\u8005\u30bb\u30c3\u30c8\u97f3\u697d\u5802</span>\n<span class=\"elStoreName\">Audio Mania</span>\n<span class=\"elStoreName\">\u30aa\u30fc\u30c7\u30a3\u30aa\u6e21\u8fba \u30b7\u30e7\u30c3\u30d4\u30f3\u30b0</span>\n<span class=\"elStoreName\">\u304a\u304b\u3052\u69d8\u3067\u5275\u696d104\u5e74\u30aa\u30ef\u30ea\u30e4\u697d\u5668</span>\n<span class=\"elStoreName\">\u97f3\u697d\u5c4b\u30d5\u30a1\u30f3\u30cf\u30a6\u30b9</span>\n<span class=\"elStoreName\">\u97f3\u8272\u7814\u7a76\u4f1a</span>\n<span class=\"elStoreName\">\u30aa\u30f3\u30e6\u30fc\u697d\u5668\u30fb\u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u697d\u5668de\u5143\u6c17</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97 CROSSROAD</span>\n<span class=\"elStoreName\">\u697d\u5668\u5929\u56fd</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97\u307e\u3093\u307e\u3093\u5802</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u8cb7\u53d6\u8ca9\u58f2 \u30ed\u30c8\u30df\u30e5\u30fc\u30b8\u30c3\u30af</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u7dcf\u5408\u30c7\u30d1\u30fc\u30c8 \u30aa\u30af\u30e0\u30e9\u697d\u5668</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u68ee</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e2\u30ce\u30ac\u30bf\u30ea</span>\n<span class=\"elStoreName\">\u697d\u5668\u5c4b\u306eSAKAI</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e9\u30f3\u30c9 \u30b5\u30f3\u30af\u30b9</span>\n<span class=\"elStoreName\">KANAZAWA TK</span>\n<span class=\"elStoreName\">\u682a\u5f0f\u4f1a\u793e \u6728\u4e0b\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">Guitarshopabc</span>\n<span class=\"elStoreName\">\u30ae\u30bf\u30fc\u30d7\u30e9\u30cd\u30c3\u30c8 Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\n<span class=\"elStoreName\">Guitar Proshop GWNN \u30cd\u30c3\u30c8\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">GUITAR MUSEUM</span>\n<span class=\"elStoreName\">Good Guitars</span>\n<span class=\"elStoreName\">\u30b0\u30eb\u30fc\u30f4\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">Grace\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2 \u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668\u5e97G-CLUB\u6e0b\u8c37</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668 \u65e5\u672c\u7dcf\u672c\u5e97 WEBSHOP</span>\n<span class=\"elStoreName\">Ksound Yahoo!\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 SHOP</span>\n<span class=\"elStoreName\">GENZO VINTAGE GUITARS</span>\n<span class=\"elStoreName\">\u5149\u6804\u5802\u697d\u5668Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u5149\u6d0b\u697d\u5668</span>\n\n\u4e00\u65b9\u3067shop.css(\"span.elStoreName\")\u304c\u51fa\u3059\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3082\u307e\u308b\u3067\u5909\u308f\u308a\u304c\u306a\u3044\u3002\n<span class=\"elStoreName\">\u611b\u66f2\u697d\u5668 \u685c\u5c71\u672c\u5e97</span>\n<span class=\"elStoreName\">A\u30b9\u30c6\u30fc\u30b8Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u3042\u307d\u308d\u3093Yahoo!\u5e97</span>\n<span class=\"elStoreName\">Unlimited Guitars</span>\n<span class=\"elStoreName\">UNLIMINET</span>\n<span class=\"elStoreName\">e-\u3088\u3057\u3084\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u30ea\u30dc\u30ec\u79cb\u8449\u539f\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668 17\u30b7\u30e7\u30c3\u30d7\u30b9</span>\n<span class=\"elStoreName\">\u4e00\u671f\u4e00\u4f1a\u672c\u8217 \u30ae\u30bf\u30fc\u521d\u5fc3\u8005\u3082\u5b89\u5fc3</span>\n<span class=\"elStoreName\">\u4f0a\u85e4\u697d\u5668</span>\n<span class=\"elStoreName\">WIZARD LEATHER</span>\n<span class=\"elStoreName\">WaveHouse</span>\n<span class=\"elStoreName\">Alien Soundworks</span>\n<span class=\"elStoreName\">\u30a8\u30b9\u30b8\u30fc\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ba</span>\n<span class=\"elStoreName\">MHJ Yahoo!\u5e97</span>\n<span class=\"elStoreName\">MGM\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc \u521d\u5fc3\u8005\u30bb\u30c3\u30c8\u97f3\u697d\u5802</span>\n<span class=\"elStoreName\">Audio Mania</span>\n<span class=\"elStoreName\">\u30aa\u30fc\u30c7\u30a3\u30aa\u6e21\u8fba \u30b7\u30e7\u30c3\u30d4\u30f3\u30b0</span>\n<span class=\"elStoreName\">\u304a\u304b\u3052\u69d8\u3067\u5275\u696d104\u5e74\u30aa\u30ef\u30ea\u30e4\u697d\u5668</span>\n<span class=\"elStoreName\">\u97f3\u697d\u5c4b\u30d5\u30a1\u30f3\u30cf\u30a6\u30b9</span>\n<span class=\"elStoreName\">\u97f3\u8272\u7814\u7a76\u4f1a</span>\n<span class=\"elStoreName\">\u30aa\u30f3\u30e6\u30fc\u697d\u5668\u30fb\u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u697d\u5668de\u5143\u6c17</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97 CROSSROAD</span>\n<span class=\"elStoreName\">\u697d\u5668\u5929\u56fd</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97\u307e\u3093\u307e\u3093\u5802</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u8cb7\u53d6\u8ca9\u58f2 \u30ed\u30c8\u30df\u30e5\u30fc\u30b8\u30c3\u30af</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u7dcf\u5408\u30c7\u30d1\u30fc\u30c8 \u30aa\u30af\u30e0\u30e9\u697d\u5668</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u68ee</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e2\u30ce\u30ac\u30bf\u30ea</span>\n<span class=\"elStoreName\">\u697d\u5668\u5c4b\u306eSAKAI</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e9\u30f3\u30c9 \u30b5\u30f3\u30af\u30b9</span>\n<span class=\"elStoreName\">KANAZAWA TK</span>\n<span class=\"elStoreName\">\u682a\u5f0f\u4f1a\u793e \u6728\u4e0b\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">Guitarshopabc</span>\n<span class=\"elStoreName\">\u30ae\u30bf\u30fc\u30d7\u30e9\u30cd\u30c3\u30c8 Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\n<span class=\"elStoreName\">Guitar Proshop GWNN \u30cd\u30c3\u30c8\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">GUITAR MUSEUM</span>\n<span class=\"elStoreName\">Good Guitars</span>\n<span class=\"elStoreName\">\u30b0\u30eb\u30fc\u30f4\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">Grace\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2 \u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668\u5e97G-CLUB\u6e0b\u8c37</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668 \u65e5\u672c\u7dcf\u672c\u5e97 WEBSHOP</span>\n<span class=\"elStoreName\">Ksound Yahoo!\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 SHOP</span>\n<span class=\"elStoreName\">GENZO VINTAGE GUITARS</span>\n<span class=\"elStoreName\">\u5149\u6804\u5802\u697d\u5668Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u5149\u6d0b\u697d\u5668</span>\n\n\u3068\u3044\u3046\u3053\u3068\u306fname = shop.css(\"span.elStoreName\")[0].text\u306f\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u306b\u304a\u3044\u3066\u306f\u5f62\u5f0f\u4e0a\u3068\u3063\u3066\u3053\u308c\u306a\u3044\u306e\u3067\u306f\u3068\u63a8\u6e2c\u3059\u308b\u306e\u304c\u5b89\u5168\u305d\u3046\u3002\n\njavascript:void(0);\u3092\u53d6\u308a\u9664\u304f\nXPath \u306e\u95a2\u6570\u3092\u4f7f\u3063\u305f Web \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u65b9\u6cd5\u3082\u8a66\u3057\u305f\u306e\u3067\u3059\u304c\u3044\u307e\u3044\u3061\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u5c06\u6765\u7684\u306a\u5229\u4fbf\u6027\u306f\u4f4e\u3044\u3067\u3059\u304c\u3079\u305f\u66f8\u304d\u3067\u53d6\u308a\u9664\u3044\u3066\u3044\u304f\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\ntest.rake\nrequire 'open-uri'\nrequire 'nokogiri'\n\nnamespace :scrape do\n  desc\"\u5e97\u8217\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u30c6\u30b9\u30c8\"\n  task :scrape_shop_links => :environment do\n    url = \"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\"\n    charset = nil\n    html = open(url) do |f|\n      charset = f.charset\n      f.read\n    end\n\n    doc = Nokogiri::HTML.parse(html, nil, charset)\n    shops = doc.css(\".elMain\")\n    shops_main = shops.search('//a[starts-with(@href, \"http://\")]')\n    count = 0\n    data = []\n    shops.each do |shop|\n      url = shop.css(\"a\")[0][:href]\n      next if url == \"javascript:void(0);\"\n      count += 1\n      name = shop.css(\"span.elStoreName\").text\n      puts \"#{count}, name: #{name}, url: #{url}\"\n    end\n  end\nend\n\n\n\n\u8ffd\u8a18\nokkez@github\u69d8\u3088\u308a\u3082\u3063\u3068\u77ed\u304f\u4f5c\u308c\u308b\u3068\u306e\u30a2\u30c9\u30d0\u30a4\u30b9\u3092\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u91cf\u7684\u306b\u306f\u534a\u5206\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\u3054\u6559\u6388\u9802\u304d\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\ntest.rake\nrequire \"open-uri\"\nrequire \"nokogiri\"\n\ndesc \"scrapint test\u3060\u3088\u304a\u304a\u304a\u304a\u304a\"\ntask :test_scrape => :environment do  \n  html = open(\"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\")\n  doc = Nokogiri::HTML(html)\n  doc.search(\".mdStoreList div.elItem > ul > li\").each do |element|\n    p [element.at(\"a.elStore\")[\"href\"], element.at(\"span.elStoreName\").inner_text]\n  end\nend\n\n\n\n\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\n\n\u3010Rails\u521d\u5b66\u8005\u5411\u3051\u3011Nokogiri\u3092\u3064\u304b\u3063\u3066\u4ed6\u306eWeb\u30b5\u30a4\u30c8\u304b\u3089\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3088\u3046\nnokogiri\u3092\u4f7f\u3063\u305f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5165\u9580\nNokogiri\u3092\u4f7f\u3063\u305fRuby\u3067\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3000\u301c\u521d\u5fc3\u8005\u7de8\u301c\nRuby: \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u305f\u30c7\u30fc\u30bf\u3092Heroku\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u51fa\u6765\u306a\u3044\nRuby\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u305f\u3081\u306eNokogiri\u5229\u7528\u30e1\u30e2\n\n#\u3084\u308a\u305f\u3044\u3053\u3068\n<a href=\"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\" target=\"_blank\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc\u672c\u4f53 \u30b9\u30c8\u30a2\u4e00\u89a7</a>\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u3057\u305f\u3044\u3002\n\n##\u5b9f\u884c\u6e96\u5099\n\u521d\u671f\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306f\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\u3092\u53c2\u7167\u3002\n\n```test.rake\nrequire 'open-uri'\nrequire 'nokogiri'\n\nnamespace :scrape do\n  desc\"\u5e97\u8217\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u30c6\u30b9\u30c8\"\n  task :scrape_shop_links => :environment do\n    url = \"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\"\n    charset = nil\n    html = open(url) do |f|\n      charset = f.charset\n      f.read\n    end\n\n    doc = Nokogiri::HTML.parse(html, nil, charset)\n    shops = doc.css(\".elMain\")\n    #shop_list = shops.css(\"li\")\n    count = 0\n    data = []\n    shops.each do |shop|\n      count += 1\n      url = shop.css(\"a\")[0][:href]\n      name = shop.css(\"span.elStoreName\")[0]\n      puts url, name\n    end\n  end\nend\n```\n\n\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u304c\n\n```\njavascript:void(0);\n\nhttp://store.shopping.yahoo.co.jp/aoupprcgigiwgd7i6y2ztfylwi/\n<span class=\"elStoreName\">A\u30b9\u30c6\u30fc\u30b8Yahoo!\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/apollon/\n<span class=\"elStoreName\">\u3042\u307d\u308d\u3093Yahoo!\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/lostboys-guitars/\n<span class=\"elStoreName\">Unlimited Guitars</span>\nhttp://store.shopping.yahoo.co.jp/unliminet/\n<span class=\"elStoreName\">UNLIMINET</span>\nhttp://store.shopping.yahoo.co.jp/e-yoshiyagakki/\n<span class=\"elStoreName\">e-\u3088\u3057\u3084\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/ikebe/\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/ikebe-revole/\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u30ea\u30dc\u30ec\u79cb\u8449\u539f\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/ishibashi/\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/ishibashi-shops/\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668 17\u30b7\u30e7\u30c3\u30d7\u30b9</span>\nhttp://store.shopping.yahoo.co.jp/illusion/\n<span class=\"elStoreName\">\u4e00\u671f\u4e00\u4f1a\u672c\u8217 \u30ae\u30bf\u30fc\u521d\u5fc3\u8005\u3082\u5b89\u5fc3</span>\nhttp://store.shopping.yahoo.co.jp/itogakki/\n<span class=\"elStoreName\">\u4f0a\u85e4\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/wizard-leather/\n<span class=\"elStoreName\">WIZARD LEATHER</span>\nhttp://store.shopping.yahoo.co.jp/wavehouse/\n<span class=\"elStoreName\">WaveHouse</span>\nhttp://store.shopping.yahoo.co.jp/alien-soundworks/\n<span class=\"elStoreName\">Alien Soundworks</span>\nhttp://store.shopping.yahoo.co.jp/sgtech/\n<span class=\"elStoreName\">\u30a8\u30b9\u30b8\u30fc\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ba</span>\nhttp://store.shopping.yahoo.co.jp/music-kingdom/\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc \u521d\u5fc3\u8005\u30bb\u30c3\u30c8\u97f3\u697d\u5802</span>\nhttp://store.shopping.yahoo.co.jp/ebisound/\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc\u3068\u30a6\u30af\u30ec\u30ec\u306eEbiSound</span>\nhttp://store.shopping.yahoo.co.jp/sound-station/\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc\u306eSOUND STATION</span>\nhttp://store.shopping.yahoo.co.jp/audio-mania/\n<span class=\"elStoreName\">Audio Mania</span>\nhttp://store.shopping.yahoo.co.jp/owariya-gakki/\n<span class=\"elStoreName\">\u304a\u304b\u3052\u69d8\u3067\u5275\u696d104\u5e74\u30aa\u30ef\u30ea\u30e4\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/funhoused/\n<span class=\"elStoreName\">\u97f3\u697d\u5c4b\u30d5\u30a1\u30f3\u30cf\u30a6\u30b9</span>\nhttp://store.shopping.yahoo.co.jp/sendaiguitar/\n<span class=\"elStoreName\">\u97f3\u8272\u7814\u7a76\u4f1a</span>\nhttp://store.shopping.yahoo.co.jp/on-you-music/\n<span class=\"elStoreName\">\u30aa\u30f3\u30e6\u30fc\u697d\u5668\u30fb\u30e4\u30d5\u30fc\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/gakki-de-genki/\n<span class=\"elStoreName\">\u697d\u5668de\u5143\u6c17</span>\nhttp://store.shopping.yahoo.co.jp/crossroad-oyama/\n<span class=\"elStoreName\">\u697d\u5668\u5e97 CROSSROAD</span>\nhttp://store.shopping.yahoo.co.jp/gakki/\n<span class=\"elStoreName\">\u697d\u5668\u5929\u56fd</span>\nhttp://store.shopping.yahoo.co.jp/manmandougakki/\n<span class=\"elStoreName\">\u697d\u5668\u5e97\u307e\u3093\u307e\u3093\u5802</span>\nhttp://store.shopping.yahoo.co.jp/rotomusic/\n<span class=\"elStoreName\">\u697d\u5668\u306e\u8cb7\u53d6\u8ca9\u58f2 \u30ed\u30c8\u30df\u30e5\u30fc\u30b8\u30c3\u30af</span>\nhttp://store.shopping.yahoo.co.jp/okumuragakki/\n<span class=\"elStoreName\">\u697d\u5668\u306e\u7dcf\u5408\u30c7\u30d1\u30fc\u30c8 \u30aa\u30af\u30e0\u30e9\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/gakki-mori/\n<span class=\"elStoreName\">\u697d\u5668\u306e\u68ee</span>\nhttp://store.shopping.yahoo.co.jp/g-monogatari/\n<span class=\"elStoreName\">\u697d\u5668\u30e2\u30ce\u30ac\u30bf\u30ea</span>\nhttp://store.shopping.yahoo.co.jp/g-sakai/\n<span class=\"elStoreName\">\u697d\u5668\u5c4b\u306eSAKAI</span>\nhttp://store.shopping.yahoo.co.jp/gakkiland-thanks/\n<span class=\"elStoreName\">\u697d\u5668\u30e9\u30f3\u30c9 \u30b5\u30f3\u30af\u30b9</span>\nhttp://store.shopping.yahoo.co.jp/musicgear/\n<span class=\"elStoreName\">KANAZAWA TK</span>\nhttp://store.shopping.yahoo.co.jp/suwano/\n<span class=\"elStoreName\">\u682a\u5f0f\u4f1a\u793e \u6728\u4e0b\u697d\u5668\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/jd52k3mnwfd5sap7qlk4eugtee/\n<span class=\"elStoreName\">Guitarshopabc</span>\nhttp://store.shopping.yahoo.co.jp/guitarplanet/\n<span class=\"elStoreName\">\u30ae\u30bf\u30fc\u30d7\u30e9\u30cd\u30c3\u30c8 Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\nhttp://store.shopping.yahoo.co.jp/gwnn/\n<span class=\"elStoreName\">Guitar Proshop GWNN \u30cd\u30c3\u30c8\u30b9\u30c8\u30a2</span>\nhttp://store.shopping.yahoo.co.jp/kurosawa-unplugged/\n<span class=\"elStoreName\">GUITAR MUSEUM</span>\nhttp://store.shopping.yahoo.co.jp/cfhnjs2sr46pd23uzihqf7vtkq/\n<span class=\"elStoreName\">Good Guitars</span>\nhttp://store.shopping.yahoo.co.jp/groovemusic/\n<span class=\"elStoreName\">\u30b0\u30eb\u30fc\u30f4\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2</span>\nhttp://store.shopping.yahoo.co.jp/grace-music-store/\n<span class=\"elStoreName\">Grace\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2 \u30e4\u30d5\u30fc\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/kurosawashibuya/\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668\u5e97G-CLUB\u6e0b\u8c37</span>\nhttp://store.shopping.yahoo.co.jp/honten/\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668 \u65e5\u672c\u7dcf\u672c\u5e97 WEBSHOP</span>\nhttp://store.shopping.yahoo.co.jp/ksound-yh/\n<span class=\"elStoreName\">Ksound Yahoo!\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 SHOP</span>\nhttp://store.shopping.yahoo.co.jp/genzovintageguitars/\n<span class=\"elStoreName\">GENZO VINTAGE GUITARS</span>\nhttp://store.shopping.yahoo.co.jp/koeido1/\n<span class=\"elStoreName\">\u5149\u6804\u5802\u697d\u5668Yahoo!\u5e97</span>\nhttp://store.shopping.yahoo.co.jp/koyogakki/\n<span class=\"elStoreName\">\u5149\u6d0b\u697d\u5668</span>\nhttp://store.shopping.yahoo.co.jp/cocosoundweb/\n<span class=\"elStoreName\">COCOSOUND Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\nhttp://store.shopping.yahoo.co.jp/cosmogakki/\n<span class=\"elStoreName\">\u30b3\u30b9\u30e2\u697d\u5668</span>\n```\n\n`javascript:void(0);`\u3092\u3069\u3046\u306b\u304b\u3059\u308b\u306e\u3068\u3001span\u30bf\u30b0\u304b\u3089\u30c6\u30ad\u30b9\u30c8\u3060\u3051\u3092\u6458\u51fa\u3057\u306a\u3051\u308c\u3070\u3002\u3002\u3002\n\n###\u51fa\u529b\u30c7\u30fc\u30bf\u306e\u6574\u5f62\n\n<a href=\"https://github.com/ZIGExN/ruby-training/wiki/Web%E3%82%B9%E3%82%AF%E3%83%AC%E3%82%A4%E3%83%94%E3%83%B3%E3%82%B0%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E3%83%87%E3%83%BC%E3%82%BF%E6%A4%9C%E7%B4%A2%E3%82%AF%E3%83%AD%E3%83%BC%E3%83%A9%E6%A7%8B%E7%AF%89%E5%85%A5%E9%96%80#user-content-html\u306e\u89e3\u6790\" target=\"_blank\">Web\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3092\u7528\u3044\u305f\u30c7\u30fc\u30bf\u691c\u7d22\u30af\u30ed\u30fc\u30e9\u69cb\u7bc9\u5165\u9580</a>\u3092\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\n\n```test.rake\nrequire 'open-uri'\nrequire 'nokogiri'\n\nnamespace :scrape do\n  desc\"\u5e97\u8217\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u30c6\u30b9\u30c8\"\n  task :scrape_shop_links => :environment do\n    url = \"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\"\n    charset = nil\n    html = open(url) do |f|\n      charset = f.charset\n      f.read\n    end\n\n    doc = Nokogiri::HTML.parse(html, nil, charset)\n    shops = doc.css(\".elMain\")\n    #shop_list = shops.css(\"li\")\n    count = 0\n    data = []\n    shops.each do |shop|\n      count += 1\n      url = shop.css(\"a\")[0][:href]\n      name = shop.css(\"span.elStoreName\").text\n      puts \"name: #{name}, url: #{url}\"\n    end\n  end\nend\n```\n\n```\n\n```\n\n`name = shop.css(\"span.elStoreName\")[0].text`\n\u3068\u5165\u529b\u3059\u308b\u3068`NoMethodError: undefined method 'text' for nil:NilClass`\u3068\u8a00\u308f\u308c\u6012\u3089\u308c\u3066\u3057\u307e\u3046\u3002\u306a\u305c\u3060\u308d\u3046\u304b\u3002\u3002\n\n\u4e0a\u306b\u3082\u8a18\u8ff0\u3057\u305f\u304c\u3001`name = shop.css(\"span.elStoreName\")[0]`\u306f`span.elStoreName`\u30bf\u30b0\u306e\u3064\u3044\u305f\u6700\u521d\u306e\u8981\u7d20\u3092\u53d6\u3063\u3066\u304f\u308b\u3002\n\n```\n<span class=\"elStoreName\">\u611b\u66f2\u697d\u5668 \u685c\u5c71\u672c\u5e97</span>\n<span class=\"elStoreName\">A\u30b9\u30c6\u30fc\u30b8Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u3042\u307d\u308d\u3093Yahoo!\u5e97</span>\n<span class=\"elStoreName\">Unlimited Guitars</span>\n<span class=\"elStoreName\">UNLIMINET</span>\n<span class=\"elStoreName\">e-\u3088\u3057\u3084\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u30ea\u30dc\u30ec\u79cb\u8449\u539f\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668 17\u30b7\u30e7\u30c3\u30d7\u30b9</span>\n<span class=\"elStoreName\">\u4e00\u671f\u4e00\u4f1a\u672c\u8217 \u30ae\u30bf\u30fc\u521d\u5fc3\u8005\u3082\u5b89\u5fc3</span>\n<span class=\"elStoreName\">\u4f0a\u85e4\u697d\u5668</span>\n<span class=\"elStoreName\">WIZARD LEATHER</span>\n<span class=\"elStoreName\">WaveHouse</span>\n<span class=\"elStoreName\">Alien Soundworks</span>\n<span class=\"elStoreName\">\u30a8\u30b9\u30b8\u30fc\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ba</span>\n<span class=\"elStoreName\">MHJ Yahoo!\u5e97</span>\n<span class=\"elStoreName\">MGM\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc \u521d\u5fc3\u8005\u30bb\u30c3\u30c8\u97f3\u697d\u5802</span>\n<span class=\"elStoreName\">Audio Mania</span>\n<span class=\"elStoreName\">\u30aa\u30fc\u30c7\u30a3\u30aa\u6e21\u8fba \u30b7\u30e7\u30c3\u30d4\u30f3\u30b0</span>\n<span class=\"elStoreName\">\u304a\u304b\u3052\u69d8\u3067\u5275\u696d104\u5e74\u30aa\u30ef\u30ea\u30e4\u697d\u5668</span>\n<span class=\"elStoreName\">\u97f3\u697d\u5c4b\u30d5\u30a1\u30f3\u30cf\u30a6\u30b9</span>\n<span class=\"elStoreName\">\u97f3\u8272\u7814\u7a76\u4f1a</span>\n<span class=\"elStoreName\">\u30aa\u30f3\u30e6\u30fc\u697d\u5668\u30fb\u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u697d\u5668de\u5143\u6c17</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97 CROSSROAD</span>\n<span class=\"elStoreName\">\u697d\u5668\u5929\u56fd</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97\u307e\u3093\u307e\u3093\u5802</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u8cb7\u53d6\u8ca9\u58f2 \u30ed\u30c8\u30df\u30e5\u30fc\u30b8\u30c3\u30af</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u7dcf\u5408\u30c7\u30d1\u30fc\u30c8 \u30aa\u30af\u30e0\u30e9\u697d\u5668</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u68ee</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e2\u30ce\u30ac\u30bf\u30ea</span>\n<span class=\"elStoreName\">\u697d\u5668\u5c4b\u306eSAKAI</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e9\u30f3\u30c9 \u30b5\u30f3\u30af\u30b9</span>\n<span class=\"elStoreName\">KANAZAWA TK</span>\n<span class=\"elStoreName\">\u682a\u5f0f\u4f1a\u793e \u6728\u4e0b\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">Guitarshopabc</span>\n<span class=\"elStoreName\">\u30ae\u30bf\u30fc\u30d7\u30e9\u30cd\u30c3\u30c8 Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\n<span class=\"elStoreName\">Guitar Proshop GWNN \u30cd\u30c3\u30c8\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">GUITAR MUSEUM</span>\n<span class=\"elStoreName\">Good Guitars</span>\n<span class=\"elStoreName\">\u30b0\u30eb\u30fc\u30f4\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">Grace\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2 \u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668\u5e97G-CLUB\u6e0b\u8c37</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668 \u65e5\u672c\u7dcf\u672c\u5e97 WEBSHOP</span>\n<span class=\"elStoreName\">Ksound Yahoo!\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 SHOP</span>\n<span class=\"elStoreName\">GENZO VINTAGE GUITARS</span>\n<span class=\"elStoreName\">\u5149\u6804\u5802\u697d\u5668Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u5149\u6d0b\u697d\u5668</span>\n```\n\n\u4e00\u65b9\u3067`shop.css(\"span.elStoreName\")`\u304c\u51fa\u3059\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3082\u307e\u308b\u3067\u5909\u308f\u308a\u304c\u306a\u3044\u3002\n\n```\n<span class=\"elStoreName\">\u611b\u66f2\u697d\u5668 \u685c\u5c71\u672c\u5e97</span>\n<span class=\"elStoreName\">A\u30b9\u30c6\u30fc\u30b8Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u3042\u307d\u308d\u3093Yahoo!\u5e97</span>\n<span class=\"elStoreName\">Unlimited Guitars</span>\n<span class=\"elStoreName\">UNLIMINET</span>\n<span class=\"elStoreName\">e-\u3088\u3057\u3084\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b1\u30d9\u697d\u5668\u30ea\u30dc\u30ec\u79cb\u8449\u539f\u5e97</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668</span>\n<span class=\"elStoreName\">\u30a4\u30b7\u30d0\u30b7\u697d\u5668 17\u30b7\u30e7\u30c3\u30d7\u30b9</span>\n<span class=\"elStoreName\">\u4e00\u671f\u4e00\u4f1a\u672c\u8217 \u30ae\u30bf\u30fc\u521d\u5fc3\u8005\u3082\u5b89\u5fc3</span>\n<span class=\"elStoreName\">\u4f0a\u85e4\u697d\u5668</span>\n<span class=\"elStoreName\">WIZARD LEATHER</span>\n<span class=\"elStoreName\">WaveHouse</span>\n<span class=\"elStoreName\">Alien Soundworks</span>\n<span class=\"elStoreName\">\u30a8\u30b9\u30b8\u30fc\u30c6\u30af\u30ce\u30ed\u30b8\u30fc\u30ba</span>\n<span class=\"elStoreName\">MHJ Yahoo!\u5e97</span>\n<span class=\"elStoreName\">MGM\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">\u30a8\u30ec\u30ad\u30ae\u30bf\u30fc \u521d\u5fc3\u8005\u30bb\u30c3\u30c8\u97f3\u697d\u5802</span>\n<span class=\"elStoreName\">Audio Mania</span>\n<span class=\"elStoreName\">\u30aa\u30fc\u30c7\u30a3\u30aa\u6e21\u8fba \u30b7\u30e7\u30c3\u30d4\u30f3\u30b0</span>\n<span class=\"elStoreName\">\u304a\u304b\u3052\u69d8\u3067\u5275\u696d104\u5e74\u30aa\u30ef\u30ea\u30e4\u697d\u5668</span>\n<span class=\"elStoreName\">\u97f3\u697d\u5c4b\u30d5\u30a1\u30f3\u30cf\u30a6\u30b9</span>\n<span class=\"elStoreName\">\u97f3\u8272\u7814\u7a76\u4f1a</span>\n<span class=\"elStoreName\">\u30aa\u30f3\u30e6\u30fc\u697d\u5668\u30fb\u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u697d\u5668de\u5143\u6c17</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97 CROSSROAD</span>\n<span class=\"elStoreName\">\u697d\u5668\u5929\u56fd</span>\n<span class=\"elStoreName\">\u697d\u5668\u5e97\u307e\u3093\u307e\u3093\u5802</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u8cb7\u53d6\u8ca9\u58f2 \u30ed\u30c8\u30df\u30e5\u30fc\u30b8\u30c3\u30af</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u7dcf\u5408\u30c7\u30d1\u30fc\u30c8 \u30aa\u30af\u30e0\u30e9\u697d\u5668</span>\n<span class=\"elStoreName\">\u697d\u5668\u306e\u68ee</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e2\u30ce\u30ac\u30bf\u30ea</span>\n<span class=\"elStoreName\">\u697d\u5668\u5c4b\u306eSAKAI</span>\n<span class=\"elStoreName\">\u697d\u5668\u30e9\u30f3\u30c9 \u30b5\u30f3\u30af\u30b9</span>\n<span class=\"elStoreName\">KANAZAWA TK</span>\n<span class=\"elStoreName\">\u682a\u5f0f\u4f1a\u793e \u6728\u4e0b\u697d\u5668\u5e97</span>\n<span class=\"elStoreName\">Guitarshopabc</span>\n<span class=\"elStoreName\">\u30ae\u30bf\u30fc\u30d7\u30e9\u30cd\u30c3\u30c8 Yahoo!\u30b7\u30e7\u30c3\u30d7</span>\n<span class=\"elStoreName\">Guitar Proshop GWNN \u30cd\u30c3\u30c8\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">GUITAR MUSEUM</span>\n<span class=\"elStoreName\">Good Guitars</span>\n<span class=\"elStoreName\">\u30b0\u30eb\u30fc\u30f4\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2</span>\n<span class=\"elStoreName\">Grace\u30df\u30e5\u30fc\u30b8\u30c3\u30af\u30b9\u30c8\u30a2 \u30e4\u30d5\u30fc\u5e97</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668\u5e97G-CLUB\u6e0b\u8c37</span>\n<span class=\"elStoreName\">\u30af\u30ed\u30b5\u30ef\u697d\u5668 \u65e5\u672c\u7dcf\u672c\u5e97 WEBSHOP</span>\n<span class=\"elStoreName\">Ksound Yahoo!\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 SHOP</span>\n<span class=\"elStoreName\">GENZO VINTAGE GUITARS</span>\n<span class=\"elStoreName\">\u5149\u6804\u5802\u697d\u5668Yahoo!\u5e97</span>\n<span class=\"elStoreName\">\u5149\u6d0b\u697d\u5668</span>\n```\n\n\u3068\u3044\u3046\u3053\u3068\u306f`name = shop.css(\"span.elStoreName\")[0].text`\u306f\u4eca\u56de\u306e\u30b1\u30fc\u30b9\u306b\u304a\u3044\u3066\u306f\u5f62\u5f0f\u4e0a\u3068\u3063\u3066\u3053\u308c\u306a\u3044\u306e\u3067\u306f\u3068\u63a8\u6e2c\u3059\u308b\u306e\u304c\u5b89\u5168\u305d\u3046\u3002\n\n###`javascript:void(0);`\u3092\u53d6\u308a\u9664\u304f\n\n<a href=\"http://qiita.com/Trickey/items/28f2aaddfe32a0035628#web-\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u5f79\u7acb\u3064-xpath-\u306e\u95a2\u6570\" target=\"_blank\">XPath \u306e\u95a2\u6570\u3092\u4f7f\u3063\u305f Web \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0</a>\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u65b9\u6cd5\u3082\u8a66\u3057\u305f\u306e\u3067\u3059\u304c\u3044\u307e\u3044\u3061\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u5c06\u6765\u7684\u306a\u5229\u4fbf\u6027\u306f\u4f4e\u3044\u3067\u3059\u304c\u3079\u305f\u66f8\u304d\u3067\u53d6\u308a\u9664\u3044\u3066\u3044\u304f\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n```test.rake\nrequire 'open-uri'\nrequire 'nokogiri'\n\nnamespace :scrape do\n  desc\"\u5e97\u8217\u4e00\u89a7\u30da\u30fc\u30b8\u304b\u3089\u5e97\u8217\u30ea\u30f3\u30af\u3092\u53d6\u5f97\u30c6\u30b9\u30c8\"\n  task :scrape_shop_links => :environment do\n    url = \"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\"\n    charset = nil\n    html = open(url) do |f|\n      charset = f.charset\n      f.read\n    end\n\n    doc = Nokogiri::HTML.parse(html, nil, charset)\n    shops = doc.css(\".elMain\")\n    shops_main = shops.search('//a[starts-with(@href, \"http://\")]')\n    count = 0\n    data = []\n    shops.each do |shop|\n      url = shop.css(\"a\")[0][:href]\n      next if url == \"javascript:void(0);\"\n      count += 1\n      name = shop.css(\"span.elStoreName\").text\n      puts \"#{count}, name: #{name}, url: #{url}\"\n    end\n  end\nend\n```\n\n##\u8ffd\u8a18\n\nokkez@github\u69d8\u3088\u308a\u3082\u3063\u3068\u77ed\u304f\u4f5c\u308c\u308b\u3068\u306e\u30a2\u30c9\u30d0\u30a4\u30b9\u3092\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u91cf\u7684\u306b\u306f\u534a\u5206\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\u3054\u6559\u6388\u9802\u304d\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\n```test.rake\nrequire \"open-uri\"\nrequire \"nokogiri\"\n\ndesc \"scrapint test\u3060\u3088\u304a\u304a\u304a\u304a\u304a\"\ntask :test_scrape => :environment do  \n  html = open(\"http://shopping.yahoo.co.jp/category/2510/2327/45931/45933/stores/\")\n  doc = Nokogiri::HTML(html)\n  doc.search(\".mdStoreList div.elItem > ul > li\").each do |element|\n    p [element.at(\"a.elStore\")[\"href\"], element.at(\"span.elStoreName\").inner_text]\n  end\nend\n```\n\n#\u53c2\u8003\u306b\u3057\u305f\u30ea\u30f3\u30af\n- <a href=\"http://morizyun.github.io/blog/nokogiri-scraping-ruby-rails-begineer/\" target=\"_blank\">\u3010Rails\u521d\u5b66\u8005\u5411\u3051\u3011Nokogiri\u3092\u3064\u304b\u3063\u3066\u4ed6\u306eWeb\u30b5\u30a4\u30c8\u304b\u3089\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3088\u3046</a>\n- <a href=\"http://shgam.hatenadiary.jp/entry/2013/11/09/192509\" target=\"_blank\">nokogiri\u3092\u4f7f\u3063\u305f\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u5165\u9580</a>\n- <a href=\"http://hetaredream.hatenablog.com/entry/2014/12/20/163310\" target=\"_blank\">Nokogiri\u3092\u4f7f\u3063\u305fRuby\u3067\u306e\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3000\u301c\u521d\u5fc3\u8005\u7de8\u301c</a>\n- <a href=\"http://qiita.com/weedslayer/items/23600391a2645264732c\" target=\"_blank\">Ruby: \u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3057\u305f\u30c7\u30fc\u30bf\u3092Heroku\u3078\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u51fa\u6765\u306a\u3044</a>\n- <a href=\"http://d.hatena.ne.jp/otn/20090509/p1\" target=\"_blank\">Ruby\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u306e\u305f\u3081\u306eNokogiri\u5229\u7528\u30e1\u30e2</a>\n"}