{"context": " More than 1 year has passed since last update.Hapi.js\u306eREST API\u304c\u4e00\u901a\u308a\u52d5\u304f\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u6b21\u306fHapi.js\u306bSocket.IO\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002Using hapi.js with Socket.io\u306b\u3068\u3066\u3082\u826f\u3044Socket.IO\u306e\u89e3\u8aac\u304c\u3042\u308a\u307e\u3059\u3002\u8457\u8005\u306eMatt Harrison\u6c0f\u306fManning\u3067Hapi.js in Action\u3092MEAP\u3067\u57f7\u7b46\u4e2d\u3067\u3059\u3002\u30d6\u30ed\u30b0\u304c\u975e\u5e38\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u8457\u66f8\u3082\u671f\u5f85\u3067\u304d\u307e\u3059\u3002\n\n\u30ea\u30bd\u30fc\u30b9\nHapi.js\u3068Socket.IO\u306e\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u52c9\u5f37\u3057\u307e\u3059\u3002\n\nUsing hapi.js with Socket.io\nSOCKET.IO WITH HAPI.JS\nHapi.js with Socket.io \u2014 Where is socket.io.js?\nHapi + socket.io Example\nUnderstanding Socket.IO\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n$ cd ~/node_apps/docker-hapi-socketio\n$ tree -a -L 2\n.\n\u251c\u2500\u2500 .dockerignore\n\u251c\u2500\u2500 .env\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 app.js\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 node_modules -> /dist/node_modules\n\u251c\u2500\u2500 npm-debug.log\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 templates\n    \u2514\u2500\u2500 index.html\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n~/node_apps/docker-hapi-socketio/package.json\n{\n  \"name\": \"docker-hapi-socketio\",\n  \"description\": \"docker-hapi-socketio\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"dependencies\": {\n      \"hapi\": \"^8.6.1\",\n      \"socket.io\": \"^1.3.5\",\n      \"handlebars\": \"^3.0.3\",\n      \"dotenv\": \"^1.1.0\"\n  },\n  \"scripts\": {\"start\": \"node app.js\"}\n}\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n\nhapi server\u306elisnter\u306fhttp server\nhapi server(var server = new Hapi.Server();)\u306bconnection\u3092\u4f5c\u6210(server.connection({ port: 4000 });)\u3059\u308b\u3068\u3001\u5185\u90e8\u3067\u65b0\u3057\u3044Node.js\u306ehttp server(var listener = require('http').createServer(handler);)\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u306ehttp server\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306flistener\u30d7\u30ed\u30d1\u30c6\u30a3(var listener = server.listener;)\u306b\u306a\u308a\u307e\u3059\u3002\n\nSocket.IO\u306b\u6e21\u3059app\u3082http server\nSocket.IO\u3092require\u3059\u308b\u3068\u304d\u306b\u6e21\u3059var io = require('socket.io')(app);\u306eapp\u5909\u6570\u3082hapi server\u306elistener\u3068\u540c\u69d8\u306bhttp server(var app = require('http').createServer(handler);)\u3067\u3059\u3002\u305f\u3060\u3057\u4ee5\u4e0b\u306e\u3088\u3046\u306bhapi server\u306bconnection\u3092\u4f5c\u6210\u3057\u3066\u4f5c\u6210\u3057\u305f8080\u30dd\u30fc\u30c8\u306ehapi server.listener(node http server)\u3092Socket.IO\u306b\u6e21\u3059\u3068\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u51e6\u7406\u3067node http server\u306erequest\u30a4\u30d9\u30f3\u30c8\u306e\u30ea\u30b9\u30ca\u30fc\u304c\u3059\u3079\u3066\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nvar Hapi = require('hapi')\nvar server = new Hapi.Server();\nserver.connection({ port: 8080 });\n\nvar io = require('socket.io')(server.listener);\n\nio.on('connection', function (socket) {\n  console.log('connected');\n});\n\nserver.start();\n\n\nAPI\u7528\u306ehttp server\u3068Socket.IO\u7528\u306ehttp server\nhapi\u306fport\u3092\u6307\u5b9a\u3057\u3066\u5185\u90e8\u3067\u8907\u6570\u306enode http server\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4e0b\u306e\u4f8b\u3067\u306f1\u3064\u306ehapi server\u3067REST API\u30928080\u30dd\u30fc\u30c8\u3067LISTEN\u3059\u308bHTTP\u30b5\u30fc\u30d0\u30fc\u3068\u30018080\u30dd\u30fc\u30c8\u3067LISTEN\u3059\u308bSocket.IO\u30b5\u30fc\u30d0\u30fc\u306e2\u3064\u304c\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002HTTP\u30b5\u30fc\u30d0\u30fc\u306f\u3044\u307e\u306e\u3068\u3053\u308d/\u304b\u3089index.html\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b\u3060\u3051\u3067REST API\u306eRoute\u306f\u5b9f\u88c5\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n~/node_apps/docker-hapi-socketio/app.js\n'user strict';\n\nvar Hapi = require('hapi'),\n    server = new Hapi.Server(),\n    Path = require('path');\nrequire('dotenv').load();\n\nserver.connection({ port: process.env.API_PORT, labels: ['api'] });\nserver.connection({ port: process.env.SOCKETIO_PORT, labels: ['twitter'] });\n\nserver.views({\n    engines: {\n        html: require('handlebars')\n    },\n    path: Path.join(__dirname, 'templates')\n});\n\nserver.select('api').route({\n    method: 'GET',\n    path: '/',\n    handler: function (request, reply) {\n        reply.view('index',\n                   { socketio_host: (process.env.PUBLIC_IP+':'\n                                     +process.env.SOCKETIO_PORT)});\n    }\n});\n\nvar io = require('socket.io')(server.select('twitter').listener);\nio.on('connection', function (socket) {\n    console.log('connected!');\n    var tweet = {text: 'hello world!'};\n    var interval = setInterval(function () {\n        socket.emit('tweet', tweet);\n    }, 5000);\n\n    socket.on('disconnect', function () {\n        clearInterval(interval);\n    });\n});\n\nserver.start();\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306fSPA\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002HTTP\u30b5\u30fc\u30d0\u30fc(8000)\u304cserve\u3059\u308bindex.html\u304c\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306b\u306a\u308a\u307e\u3059\u3002index.html\u304b\u3089Socker.IO\u30b5\u30fc\u30d0\u30fc(8080)\u304cserve\u3059\u308bsocket.io.js\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30ed\u30fc\u30c9\u3057\u3066Socket.IO\u30b5\u30fc\u30d0\u30fc(8080)\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002socket\u5909\u6570\u306econnect\u3068tweet\u30a4\u30d9\u30f3\u30c8\u306blistener\u3092\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n\n~/node_apps/docker-hapi-socketio/templates/index.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n  <head>\n    <meta charset=\"utf-8\">\n    <title>tweet</title>\n    <script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js\"></script>\n    <script src=\"http://{{socketio_host}}/socket.io/socket.io.js\"></script>\n    <script>\n      $(function() {\n        var socket = io.connect(\"http://{{socketio_host}}\");\n        socket.on(\"connect\", function() {\n          console.log(\"Connected!\");\n        });\n        socket.on(\"tweet\", function(tweet){\n          console.log(tweet);\n          $(\"#tweet\").prepend(tweet.text + \"<br>\");\n        });\n      });\n    </script>\n  </head>\n  <body>\n    <div id=\"tweet\"></div>\n  </body>\n</html>\n\n\n\u3053\u306eindex.html\u306fHandlebars.js\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u3059\u3002{{socketio_host}}\u306f.env\u306b\u5b9a\u7fa9\u3057\u305f\u74b0\u5883\u5909\u6570\u3092dotenv\u3092\u4f7f\u3063\u3066\u30ed\u30fc\u30c9\u3057\u305f\u5024\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\nDocker Compose\u304b\u3089hapi\u30b5\u30fc\u30d3\u30b9\u3092up\u3057\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089.env\u30d5\u30a1\u30a4\u30eb\u306b\u5b9a\u7fa9\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306b\u63a5\u7d9a\u3059\u308b\u3068connected!\u306e\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n$ docker-compose up\nRecreating dockerhapisocketio_hapi_1...\nAttaching to dockerhapisocketio_hapi_1\nhapi_1 |\nhapi_1 | > docker-hapi-socketio@0.0.1 start /app\nhapi_1 | > node app.js\nhapi_1 |\nhapi_1 | connected!\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306f5\u79d2\u9593\u9694\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092emit\u3057\u3066\u3044\u307e\u3059\u3002\n\n~/node_apps/docker-hapi-socketio/app.js\n    var tweet = {text: 'hello world!'};\n    var interval = setInterval(function () {\n        socket.emit('tweet', tweet);\n    }, 5000);\n\n\n\u30d6\u30e9\u30a6\u30b6\u30b5\u30a4\u30c9\u306b\u30825\u79d2\u9593\u9694\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304cappend\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\nHapi.js\u306eREST API\u304c[\u4e00\u901a\u308a\u52d5\u304f](http://qiita.com/masato/items/4a8b763c001c108c2c89)\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u6b21\u306fHapi.js\u306bSocket.IO\u30b5\u30fc\u30d0\u30fc\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002[Using hapi.js with Socket.io](http://matt-harrison.com/using-hapi-js-with-socket-io/)\u306b\u3068\u3066\u3082\u826f\u3044Socket.IO\u306e\u89e3\u8aac\u304c\u3042\u308a\u307e\u3059\u3002\u8457\u8005\u306eMatt Harrison\u6c0f\u306fManning\u3067[Hapi.js in Action](http://www.manning.com/harrison/)\u3092MEAP\u3067\u57f7\u7b46\u4e2d\u3067\u3059\u3002\u30d6\u30ed\u30b0\u304c\u975e\u5e38\u306b\u308f\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u8457\u66f8\u3082\u671f\u5f85\u3067\u304d\u307e\u3059\u3002\n\n\n## \u30ea\u30bd\u30fc\u30b9\n\nHapi.js\u3068Socket.IO\u306e\u4f7f\u3044\u65b9\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3057\u3066\u52c9\u5f37\u3057\u307e\u3059\u3002\n\n* [Using hapi.js with Socket.io](http://matt-harrison.com/using-hapi-js-with-socket-io/)\n* [SOCKET.IO WITH HAPI.JS](http://www.appsaloon.be/blog/socket-io-with-hapi-js/)\n* [Hapi.js with Socket.io \u2014 Where is socket.io.js?](http://stackoverflow.com/questions/18343509/hapi-js-with-socket-io-where-is-socket-io-js)\n* [Hapi + socket.io Example](https://github.com/expr/hapi-socketio-example)\n* [Understanding Socket.IO](https://nodesource.com/blog/understanding-socketio)\n\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\n\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u30ea\u30dd\u30b8\u30c8\u30ea\u306f[\u3053\u3061\u3089](https://github.com/masato/docker-hapi-socketio)\u3067\u3059\u3002\n\n```bash\n$ cd ~/node_apps/docker-hapi-socketio\n$ tree -a -L 2\n.\n\u251c\u2500\u2500 .dockerignore\n\u251c\u2500\u2500 .env\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 app.js\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 node_modules -> /dist/node_modules\n\u251c\u2500\u2500 npm-debug.log\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 templates\n    \u2514\u2500\u2500 index.html\n```\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n```json:~/node_apps/docker-hapi-socketio/package.json\n{\n  \"name\": \"docker-hapi-socketio\",\n  \"description\": \"docker-hapi-socketio\",\n  \"version\": \"0.0.1\",\n  \"private\": true,\n  \"dependencies\": {\n      \"hapi\": \"^8.6.1\",\n      \"socket.io\": \"^1.3.5\",\n      \"handlebars\": \"^3.0.3\",\n      \"dotenv\": \"^1.1.0\"\n  },\n  \"scripts\": {\"start\": \"node app.js\"}\n}\n```\n\n\n## \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n\n### hapi server\u306elisnter\u306fhttp server\n\nhapi server(`var server = new Hapi.Server();`)\u306bconnection\u3092\u4f5c\u6210(`server.connection({ port: 4000 });`)\u3059\u308b\u3068\u3001\u5185\u90e8\u3067\u65b0\u3057\u3044Node.js\u306ehttp server(`var listener = require('http').createServer(handler);`)\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\u3053\u306ehttp server\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306flistener\u30d7\u30ed\u30d1\u30c6\u30a3(`var listener = server.listener;`)\u306b\u306a\u308a\u307e\u3059\u3002\n\n### Socket.IO\u306b\u6e21\u3059app\u3082http server\n\nSocket.IO\u3092require\u3059\u308b\u3068\u304d\u306b\u6e21\u3059`var io = require('socket.io')(app);`\u306eapp\u5909\u6570\u3082hapi server\u306elistener\u3068\u540c\u69d8\u306bhttp server(`var app = require('http').createServer(handler);`)\u3067\u3059\u3002\u305f\u3060\u3057\u4ee5\u4e0b\u306e\u3088\u3046\u306bhapi server\u306bconnection\u3092\u4f5c\u6210\u3057\u3066\u4f5c\u6210\u3057\u305f8080\u30dd\u30fc\u30c8\u306e`hapi server.listener`(`node http server`)\u3092Socket.IO\u306b\u6e21\u3059\u3068\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u51e6\u7406\u3067`node http server`\u306erequest\u30a4\u30d9\u30f3\u30c8\u306e\u30ea\u30b9\u30ca\u30fc\u304c\u3059\u3079\u3066\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```js\nvar Hapi = require('hapi')\nvar server = new Hapi.Server();\nserver.connection({ port: 8080 });\n\nvar io = require('socket.io')(server.listener);\n\nio.on('connection', function (socket) {\n  console.log('connected');\n});\n\nserver.start();\n```\n\n### API\u7528\u306ehttp server\u3068Socket.IO\u7528\u306ehttp server\n\nhapi\u306fport\u3092\u6307\u5b9a\u3057\u3066\u5185\u90e8\u3067\u8907\u6570\u306e`node http server`\u3092\u8d77\u52d5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4e0b\u306e\u4f8b\u3067\u306f1\u3064\u306ehapi server\u3067REST API\u30928080\u30dd\u30fc\u30c8\u3067LISTEN\u3059\u308bHTTP\u30b5\u30fc\u30d0\u30fc\u3068\u30018080\u30dd\u30fc\u30c8\u3067LISTEN\u3059\u308bSocket.IO\u30b5\u30fc\u30d0\u30fc\u306e2\u3064\u304c\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002HTTP\u30b5\u30fc\u30d0\u30fc\u306f\u3044\u307e\u306e\u3068\u3053\u308d`/`\u304b\u3089index.html\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3092\u63d0\u4f9b\u3059\u308b\u3060\u3051\u3067REST API\u306eRoute\u306f\u5b9f\u88c5\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n```js:~/node_apps/docker-hapi-socketio/app.js\n'user strict';\n\nvar Hapi = require('hapi'),\n    server = new Hapi.Server(),\n    Path = require('path');\nrequire('dotenv').load();\n\nserver.connection({ port: process.env.API_PORT, labels: ['api'] });\nserver.connection({ port: process.env.SOCKETIO_PORT, labels: ['twitter'] });\n\nserver.views({\n    engines: {\n        html: require('handlebars')\n    },\n    path: Path.join(__dirname, 'templates')\n});\n\nserver.select('api').route({\n    method: 'GET',\n    path: '/',\n    handler: function (request, reply) {\n        reply.view('index',\n                   { socketio_host: (process.env.PUBLIC_IP+':'\n                                     +process.env.SOCKETIO_PORT)});\n    }\n});\n\nvar io = require('socket.io')(server.select('twitter').listener);\nio.on('connection', function (socket) {\n    console.log('connected!');\n    var tweet = {text: 'hello world!'};\n    var interval = setInterval(function () {\n        socket.emit('tweet', tweet);\n    }, 5000);\n\n    socket.on('disconnect', function () {\n        clearInterval(interval);\n    });\n});\n\nserver.start();\n```\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306fSPA\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002HTTP\u30b5\u30fc\u30d0\u30fc(8000)\u304cserve\u3059\u308bindex.html\u304c\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u306b\u306a\u308a\u307e\u3059\u3002index.html\u304b\u3089Socker.IO\u30b5\u30fc\u30d0\u30fc(8080)\u304cserve\u3059\u308b`socket.io.js`\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30ed\u30fc\u30c9\u3057\u3066Socket.IO\u30b5\u30fc\u30d0\u30fc(8080)\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002socket\u5909\u6570\u306e`connect`\u3068`tweet`\u30a4\u30d9\u30f3\u30c8\u306blistener\u3092\u30a2\u30bf\u30c3\u30c1\u3057\u307e\u3059\u3002\n\n```html:~/node_apps/docker-hapi-socketio/templates/index.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n  <head>\n    <meta charset=\"utf-8\">\n    <title>tweet</title>\n    <script src=\"//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js\"></script>\n    <script src=\"http://{{socketio_host}}/socket.io/socket.io.js\"></script>\n    <script>\n      $(function() {\n        var socket = io.connect(\"http://{{socketio_host}}\");\n        socket.on(\"connect\", function() {\n          console.log(\"Connected!\");\n        });\n        socket.on(\"tweet\", function(tweet){\n          console.log(tweet);\n          $(\"#tweet\").prepend(tweet.text + \"<br>\");\n        });\n      });\n    </script>\n  </head>\n  <body>\n    <div id=\"tweet\"></div>\n  </body>\n</html>\n```\n\n\u3053\u306eindex.html\u306f[Handlebars.js](http://handlebarsjs.com/)\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u3059\u3002`{{socketio_host}}`\u306f`.env`\u306b\u5b9a\u7fa9\u3057\u305f\u74b0\u5883\u5909\u6570\u3092[dotenv](https://www.npmjs.com/package/dotenv)\u3092\u4f7f\u3063\u3066\u30ed\u30fc\u30c9\u3057\u305f\u5024\u304c\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\n## \u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\n\nDocker Compose\u304b\u3089hapi\u30b5\u30fc\u30d3\u30b9\u3092up\u3057\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089`.env`\u30d5\u30a1\u30a4\u30eb\u306b\u5b9a\u7fa9\u3057\u305fIP\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306b\u63a5\u7d9a\u3059\u308b\u3068`connected!`\u306e\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n```bash\n$ docker-compose up\nRecreating dockerhapisocketio_hapi_1...\nAttaching to dockerhapisocketio_hapi_1\nhapi_1 |\nhapi_1 | > docker-hapi-socketio@0.0.1 start /app\nhapi_1 | > node app.js\nhapi_1 |\nhapi_1 | connected!\n```\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306f5\u79d2\u9593\u9694\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092emit\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:~/node_apps/docker-hapi-socketio/app.js\n    var tweet = {text: 'hello world!'};\n    var interval = setInterval(function () {\n        socket.emit('tweet', tweet);\n    }, 5000);\n```\n\n\u30d6\u30e9\u30a6\u30b6\u30b5\u30a4\u30c9\u306b\u30825\u79d2\u9593\u9694\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u304cappend\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\n![hello-socketio.png](https://qiita-image-store.s3.amazonaws.com/0/43745/0dd12d62-47c2-ab2c-1db6-b868dabd671b.png)\n", "tags": ["Hapi.js8.6.1", "Socket.io1.3.5", "Node.js0.12.4"]}