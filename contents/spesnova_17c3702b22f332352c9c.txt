{"tags": ["vagrant", "VirtualBox", "CoreOS"], "context": " More than 1 year has passed since last update.\n\n\u5fc5\u8981\u306a\u3082\u306e\n\nVirtualBox 4.3.10 \u4ee5\u4e0a\nVagrant 1.6.3\n\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n$ git clone https://github.com/coreos/coreos-vagrant.git && cd coreos-vagrant\n$ vagrant up\n\n\u30ed\u30b0\u30a4\u30f3\n$ vagrant ssh core-01\n\n\n\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\n$ cp user-data.sample user-data\n\nhttps://discovery.etcd.io/new \u3092 curl \u3057\u3066 etcd \u306e discovery token \u3092\u53d6\u5f97\u3057\u3066 discovery \u306e\u5024\u306b\u30bb\u30c3\u30c8\n@@ -4,7 +4,7 @@ coreos:\n   etcd:\n     # generate a new token for each unique cluster from https://discovery.etcd.io/new\n     # WARNING: replace each time you 'vagrant destroy'\n-    #discovery: https://discovery.etcd.io/<token>\n+    discovery: https://discovery.etcd.io/xxxxxxxxxxxxxx\n     addr: $public_ipv4:4001\n     peer-addr: $public_ipv4:7001\n   fleet:\n\n$ cp config.rb.sample config.rb\n\n@@ -27,7 +27,7 @@\n # after the equals sign..\n\n # Size of the CoreOS cluster created by Vagrant\n-#$num_instances=1\n+$num_instances=3\n\n\u3053\u308c\u3067 vagrant up \u3059\u308b\u3068 3 \u53f0\u306e CoreOS \u30de\u30b7\u30f3\u304b\u3089\u306a\u308b\u30af\u30e9\u30b9\u30bf\u304c\u8d77\u52d5\u3059\u308b\u3002\n$ vagrant up\n# \u65e2\u306b\u8d77\u52d5\u3057\u3066\u3044\u308b\u5834\u5408\u306f `vagrant reload --provision` \n$ vagrant ssh core-01\n\n3 \u53f0\u306e\u30af\u30e9\u30b9\u30bf\u304c\u51fa\u6765\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u308b\ncore@core-01 ~ $ fleetctl list-machines\nMACHINE     IP      METADATA\n34db3563... 172.17.8.103    -\n4755ce5a... 172.17.8.102    -\na7d9e8b9... 172.17.8.101    -\n\n\nREF\n\nRunning CoreOS on Vagrant\n\n\n## \u5fc5\u8981\u306a\u3082\u306e\n\n* VirtualBox 4.3.10 \u4ee5\u4e0a\n* Vagrant 1.6.3\n\n## \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n```bash\n$ git clone https://github.com/coreos/coreos-vagrant.git && cd coreos-vagrant\n$ vagrant up\n```\n\n\u30ed\u30b0\u30a4\u30f3\n\n```bash\n$ vagrant ssh core-01\n```\n\n## \u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u6210\n\n```bash\n$ cp user-data.sample user-data\n```\n\nhttps://discovery.etcd.io/new \u3092 curl \u3057\u3066 etcd \u306e discovery token \u3092\u53d6\u5f97\u3057\u3066 `discovery` \u306e\u5024\u306b\u30bb\u30c3\u30c8\n\n```diff\n@@ -4,7 +4,7 @@ coreos:\n   etcd:\n     # generate a new token for each unique cluster from https://discovery.etcd.io/new\n     # WARNING: replace each time you 'vagrant destroy'\n-    #discovery: https://discovery.etcd.io/<token>\n+    discovery: https://discovery.etcd.io/xxxxxxxxxxxxxx\n     addr: $public_ipv4:4001\n     peer-addr: $public_ipv4:7001\n   fleet:\n```\n\n```bash\n$ cp config.rb.sample config.rb\n```\n\n```diff\n@@ -27,7 +27,7 @@\n # after the equals sign..\n\n # Size of the CoreOS cluster created by Vagrant\n-#$num_instances=1\n+$num_instances=3\n```\n\n\u3053\u308c\u3067 `vagrant up` \u3059\u308b\u3068 3 \u53f0\u306e CoreOS \u30de\u30b7\u30f3\u304b\u3089\u306a\u308b\u30af\u30e9\u30b9\u30bf\u304c\u8d77\u52d5\u3059\u308b\u3002\n\n```bash\n$ vagrant up\n# \u65e2\u306b\u8d77\u52d5\u3057\u3066\u3044\u308b\u5834\u5408\u306f `vagrant reload --provision` \n$ vagrant ssh core-01\n```\n\n3 \u53f0\u306e\u30af\u30e9\u30b9\u30bf\u304c\u51fa\u6765\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u308b\n\n```bash\ncore@core-01 ~ $ fleetctl list-machines\nMACHINE\t\tIP\t\tMETADATA\n34db3563...\t172.17.8.103\t-\n4755ce5a...\t172.17.8.102\t-\na7d9e8b9...\t172.17.8.101\t-\n```\n\n## REF\n\n* [Running CoreOS on Vagrant](https://coreos.com/docs/running-coreos/platforms/vagrant/)\n"}