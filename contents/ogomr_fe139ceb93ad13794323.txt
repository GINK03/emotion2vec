{"context": " More than 1 year has passed since last update.==================================\n\u524d\u56de\u306f\u307b\u307cScaffold\u306e\u307f\u3067Redmine Plugin(Redmine Animal)\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306fRails\u3067\u958b\u767a\u306e\u4e2d\u5fc3\u306b\u306a\u308bModel - View - Controller (MVC)\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\nScaffold\u3067\u51fa\u529b\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u3066\u30b7\u30f3\u30d7\u30eb\u306a\u30c7\u30fc\u30bf\u306e\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nModel\n\u307e\u305a\u306f\u30e2\u30c7\u30eb\u3067\u3059\u3002\u30c7\u30fc\u30bf\u306e\u64cd\u4f5c\u3068\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u64cd\u4f5c\u306fActiveRecord::Base\u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u306e\u3067O/R\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001\u30e2\u30c7\u30eb\u30ec\u30d9\u30eb\u3067\u30c7\u30fc\u30bf\u3092\u691c\u8a3c\u3059\u308b\u306b\u306fvalidates\u3092\u5229\u7528\u3057\u307e\u3059\u3002\nAnimalCat\u30af\u30e9\u30b9\u306fname\u3092\u5fc5\u9808\u5165\u529b\u306b\u307e\u3059\u3002\u3055\u3089\u306b\u5024\u306e\u4e00\u610f\u3092\u691c\u8a3c\u3057\u307e\u3059\u3002\nage\u306f\u5024\u304c0\u304b\u308999\u306e\u7bc4\u56f2\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u691c\u8a3c\u3057\u307e\u3059\u3002\n(Rails\u306fvalidates presence of name.\u306e\u3088\u3046\u306b\u30e1\u30bd\u30c3\u30c9\u3067\u82f1\u6587\u306b\u306a\u308a\u307e\u3059\u3002)\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\u306eis_kitten?\u306f1\u6b73\u672a\u6e80\u3092\u5b50\u732b\u3068\u5224\u65ad\u3057\u307e\u3059\u3002\n(Ruby\u306f\u30e1\u30bd\u30c3\u30c9\u3067\u6700\u5f8c\u306b\u8a55\u4fa1\u3057\u305f\u5f0f\u306e\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002)\n\nplugins/redmine_animal/app/models/animal_cat.rb\nclass AnimalCat < ActiveRecord::Base\n  unloadable\n\n  validates_presence_of :name\n  validates_uniqueness_of :name, case_sensitive: false\n  validates_inclusion_of :age, in: 0..99\n\n  def is_kitten?\n    age < 1\n  end\nend\n\n\nrails server\u30b3\u30de\u30f3\u30c9\u306fHTTP\u30b5\u30fc\u30d0\u3067Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3057\u307e\u3057\u305f\u304c\nrails console\u30b3\u30de\u30f3\u30c9\u306firb(Interactive Ruby)\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u30e2\u30c7\u30eb\u30af\u30e9\u30b9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u64cd\u4f5c\u3057\u305f\u308a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u5b9f\u884c\u306a\u3069\u3092\u3057\u307e\u3059\u3002  \n$ bundle exec rails console\nLoading development environment (Rails 3.2.13)\n\nirb(main):001:0> AnimalCat.all\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> [#<AnimalCat id: 1, name: \"\u3082\u3082\", age: 2>, #<AnimalCat id: 2, name: \"\u30af\u30ed\", age: 0>]\n\nirb(main):002:0> AnimalCat.all.first\n  AnimalCat Load (0.3ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> #<AnimalCat id: 1, name: \"\u3082\u3082\", age: 2>\n\nirb(main):003:0> AnimalCat.all.first.is_kitten?\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> false\n\nirb(main):004:0> AnimalCat.all.last\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> #<AnimalCat id: 2, name: \"\u30af\u30ed\", age: 0>\n\nirb(main):005:0> AnimalCat.all.last.is_kitten?\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> true\n\nAnimalCat.all\u3067SELECT \"animal_cats\".* FROM \"animal_cats\"\u306e\u30af\u30a8\u30ea\u30fc\u304c\u5b9f\u65bd\u3055\u308c\u307e\u3059\u3002\nAnimalCat.all.first\u306f\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u4ed5\u7d44\u307f\u3067\u5148\u982d\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n(\u3082\u3082\u306f2\u6b73\u306a\u306e\u3067\u5b50\u732b\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u30af\u30ed\u306f0\u6b73\u306a\u306e\u3067\u5b50\u732b\u3067\u3059\u3002)\n\nView\n\u6b21\u306f\u30d3\u30e5\u30fc\u3067\u3059\u3002\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306ferb\u306e\u4ed6\u306bhaml\u3084slim\u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002\n\nLayout\nHTML\u306f[resource]\u306e[action].html.erb\u306b<body>\u30bf\u30b0\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n<html>\u30bf\u30b0\u306flayouts\u306eapplication.html.erb\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n. \n\u2514\u2500app\n    \u2514\u2500views\n        \u251c\u2500[resource]\n        \u2502      [action].html.erb\n        \u2502      \n        \u2514\u2500layouts\n                application.html.erb\n\n\u30ec\u30a4\u30a2\u30a6\u30c8\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3084\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u3064\u307e\u308aRedmine\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u4f7f\u308f\u306a\u3044\u3067\u30c7\u30b6\u30a4\u30f3\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u3055\u3063\u305d\u304fAnimal Plugin\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u3092animal.html.erb\u30d5\u30a1\u30a4\u30eb\u306b\u4f5c\u308a\u307e\u3059\u3002\n\nplugins/redmine_animal/app/views/layouts/animal.html.erb\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Animal</title>\n</head>\n<body>\n\n<%= yield %>\n\n</body>\n</html>\n\n\n\u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u3082\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u5229\u7528\u3059\u308b\u30b1\u30fc\u30b9\u304c\u3042\u308b\u306e\u3067ApplicationController\u3092\n\u7d99\u627f\u3057\u305fAnimalBaseController\u3092animal_base_controller.rb\u30d5\u30a1\u30a4\u30eb\u306b\u4f5c\u308a\u307e\u3059\u3002\n\nplugins/redmine_animal/app/controllers/animal_base_controller.rb\nclass AnimalBaseController < ApplicationController\n  unloadable\n  layout 'animal'\nend\n\n\nAnimalCatsController\u306e\u7d99\u627f\u3092ApplicationController\u304b\u3089AnimalBaseController\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nplugins/redmine_animal/app/controllers/animal_cats_controller.rb\nclass AnimalCatsController < AnimalBaseController\n...\nend\n\n\n\u3053\u308c\u3067\u30b9\u30bf\u30a4\u30eb\u306e\u306a\u3044\u72b6\u614b\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u30b9\u30bf\u30a4\u30eb\u306f\u30b7\u30f3\u30d7\u30eb\u3067\u6a5f\u80fd\u7684\u306a\u30c7\u30b6\u30a4\u30f3\u304c\u3067\u304d\u308bBootstrap\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nBootstrap\u306fRedmine Twitter Bootstrap Plugin\u3067\u7c21\u5358\u306b\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n$ git clone git://github.com/ogom/redmine_twitter_bootstrap ./plugins/redmine_twitter_bootstrap\n\n\u5148\u307b\u3069\u306eanimal.html.erb\u30d5\u30a1\u30a4\u30eb\u306bBootstrap\u306e\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3068\u30b8\u30e3\u30d0\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nplugins/redmine_animal/app/views/layouts/animal.html.erb\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<title><%=h html_title %></title>\n<meta name=\"description\" content=\"<%= Redmine::Info.app_name %>\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<%= csrf_meta_tag %>\n<%= favicon %>\n\n<style>\n  body {padding-top: 60px;}\n</style>\n\n<%= stylesheet_link_tag \"bootstrap.min.css\", plugin: :redmine_twitter_bootstrap %>\n<%= stylesheet_link_tag \"bootstrap-responsive.min.css\", plugin: :redmine_twitter_bootstrap %>\n\n<%= javascript_heads %>\n<%= javascript_include_tag \"bootstrap.min.js\", plugin: :redmine_twitter_bootstrap %>\n</head>\n\n<body data-spy=\"scroll\">\n\n<div class=\"navbar navbar-inverse navbar-fixed-top\">\n  <div class=\"navbar-inner\">\n    <div class=\"container-fluid\">\n      <button type=\"button\" class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\">\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n      </button>\n      <a class=\"brand\" href=\"/\"><%= page_header_title %></a>\n      <div class=\"nav-collapse collapse\">\n        <p class=\"navbar-text pull-right\">\n          Logged in as <%= \"#{link_to_user(User.current, format: :username)}\".html_safe if User.current.logged? %>\n        </p>\n        <ul class=\"nav\">\n          <%= nav_list_tag(\"Cats\", {controller: \"animal_cats\", action: \"index\"}) %>\n          <li><a href=\"/animal/dogs\">Dogs</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"container\">\n  <div class=\"content-fluid\">  \n\n<%= yield %>\n\n  </div>\n</div>\n\n</body>\n</html>\n\n\nBootstrap\u306eHelper\u3092AnimalBaseHelper\u306b\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3057\u307e\u3059\u3002\n\nplugins/redmine_animal/app/helpers/animal_base_helper.rb\nmodule AnimalBaseHelper\n  include RedmineTwitterBootstrap::Helper\nend\n\n\n\u30ca\u30d3\u30d0\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u3082Bootstrap\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nIndex\nScaffold\u306e\u30d3\u30e5\u30fc\u306b\u30d1\u30f3\u304f\u305a\u30ea\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066\u3001\u3055\u3089\u306b\u30ea\u30f3\u30af\u3092\u30a2\u30a4\u30b3\u30f3\u4ed8\u304d\u306e\u30dc\u30bf\u30f3\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n(breadcrumb_tag\u3084icon_tag\u3084link_button_tag\u306fTwitterBootstrap::Helper\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002)\n\nplugins/redmine_animal/app/views/animal_cats/index.html.erb\n<%= breadcrumb_tag 'Cats' %>\n\n<div class=\"page-header\">\n  <h1>Listing cats</h1>\n</div>\n\n<table class=\"table table-hover\">\n  <caption>\n    <div class=\"pull-right\">\n      <%= link_button_tag('New', new_animal_cat_path, {action: 'primary', icon: 'plus', color: 'white'}) %>\n    </div>\n  </caption>\n  <thead>\n  <tr>\n    <th><%=l :field_name %></th>\n    <th><%=l :field_age %></th>\n    <th><%=l :field_kitten %></th>\n    <th></th>\n  </tr>\n  </thead>\n  <tbody>\n<% @cats.each do |cat| %>\n  <tr>\n    <td><%= link_to cat.name, cat %></td>\n    <td><%= cat.age %></td>\n    <td><%= icon_tag(icon: 'ok') if cat.is_kitten? %></td>\n    <td>\n      <%= link_button_tag('Edit', edit_animal_cat_path(cat), {action: 'success', icon: 'pencil', color: 'white'}) %>&nbsp;\n      <%= link_button_tag('Destroy', cat, {action: 'danger', icon: 'trash', color: 'white'},\n          {method: :delete, data: {confirm: 'Are you sure?'}}) %>\n    </td>\n  </tr>\n<% end %>\n  </tbody>\n</table>\n\n\nBootstrap\u306f\u30ec\u30b9\u30dd\u30f3\u30b7\u30d6Web\u30c7\u30b6\u30a4\u30f3\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n\nShow\nl\u30e1\u30bd\u30c3\u30c9\u3067\u56fd\u969b\u5316\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u3002\u65e5\u672c\u8a9e\u3060\u3068<%=l :field_age %>\u306f\u5e74\u9f62\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\nplugins/redmine_animal/app/views/animal_cats/show.html.erb\n<%= breadcrumb_tag 'Show', [{caption: 'Cats', path: animal_cats_path}] %>\n\n<div class=\"page-header\">\n  <h1>Cat</h1>\n</div>\n\n<% flash.each do |name, msg| %>\n  <div class=\"alert alert-<%= name == :notice ? \"success\" : \"error\" %>\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n    <%= msg %>\n  </div>\n<% end %>\n\n<div class=\"row-fluid\">\n  <div class=\"row-fluid\">\n    <div class=\"pull-right\">\n      <%= link_button_tag('Edit', edit_animal_cat_path(@cat), {action: 'success', icon: 'pencil', color: 'white'}) %>\n    </div>\n  </div>\n\n  <div class=\"row-fluid\">\n    <div class=\"span1 offset1\"><%=l :field_name %>&nbsp;:</div>\n    <div class=\"span1\"><%= @cat.name %></div>\n  </div>\n  <div class=\"row-fluid\">\n    <div class=\"span1 offset1\"><%=l :field_age %>&nbsp;:</div>\n    <div class=\"span1\"><%= @cat.age %></div>\n  </div>\n\n  &nbsp;\n\n  <div class=\"row-fluid\">\n    <div class=\"span2 offset2\">\n      <%= link_button_tag('Destroy', @cat, {action: 'danger', icon: 'trash', color: 'white'},\n          {method: :delete, data: {confirm: 'Are you sure?'}}) %>\n    </div>    \n  </div>\n</div>\n\n\nShow\u306bEdit\u30dc\u30bf\u30f3\u3068Destroy\u30dc\u30bf\u30f3\u304c\u3042\u308c\u3070\u30ea\u30b9\u30c8\u306e\u30dc\u30bf\u30f3\u306f\u5197\u9577\u3067\u3059\u306d\u3002\n\n\nNew\n\u8ffd\u52a0\u3068\u7de8\u96c6\u306eform\u30bf\u30b0\u306f\u90e8\u5206\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n<%= render 'form' %>\u3067_form.html.erb\u30d5\u30a1\u30a4\u30eb\u304c\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002\n\nplugins/redmine_animal/app/views/animal_cats/new.html.erb\n<%= breadcrumb_tag 'New', [{caption: 'Cats', path: animal_cats_path}] %>\n\n<div class=\"page-header\">\n  <h1>New cat</h1>\n</div>\n\n<%= render 'form' %>\n\n\ntext_field\u3067\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\nnumber_field\u3067\u6570\u5024\u5165\u529b\u30dc\u30c3\u30af\u30b9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n\nform\n\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30a8\u30e9\u30fc\u306falert-block\u3067\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\nplugins/redmine_animal/app/views/animal_cats/_form.html.erb\n<%= form_for(@cat, html: {class: \"form-horizontal\"}) do |f| %>\n  <% if @cat.errors.any? %>\n    <div class=\"alert alert-error alert-block\">\n      <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n      <ul>\n        <% @cat.errors.full_messages.each do |msg| %>\n          <li><%= msg %></li>\n        <% end %>\n      </ul>\n    </div>\n  <% end %>\n\n  <div class=\"control-group\">\n    <%= f.label :name, class: \"control-label\" %>\n    <div class=\"controls\">\n      <%= f.text_field :name %>\n    </div>\n  </div>\n\n  <div class=\"control-group\">\n    <%= f.label :age, class: \"control-label\" %>\n    <div class=\"controls\">\n      <%= f.number_field :age %>\n    </div>\n  </div>\n\n  <div class=\"control-group\">\n    <div class=\"controls\">\n      <%= f.submit class: \"btn btn-primary\" %>\n    </div>\n  </div>\n<% end %>\n\n\n\nsubmit\u30bf\u30b0\u306e\u56fd\u969b\u5316\u5bfe\u5fdc\u306f\u4e00\u62ec\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\nja:\n  helpers:\n    submit:\n      create: Save\n      update: Save\n\n\nEdit\nNew\u3068Edit\u306f\u307b\u3068\u3093\u3069\u540c\u3058\u30ec\u30a4\u30a2\u30a6\u30c8\u306b\u306a\u308a\u307e\u3059\u3002\n\nplugins/redmine_animal/app/views/animal_cats/edit.html.erb\n<%= breadcrumb_tag 'Edit', [{caption: 'Cats', path: animal_cats_path}] %>\n\n<div class=\"page-header\">\n  <h1>Editing cat</h1>\n</div>\n\n<div class=\"row-fluid\">\n  <div class=\"row-fluid\">\n    <div class=\"pull-right\">\n      <%= link_button_tag('Show', @cat, {action: 'info', icon: 'file', color: 'white'}) %>\n    </div>\n  </div>\n</div>\n\n<%= render 'form' %>\n\n\nShow\u30dc\u30bf\u30f3\u3068Edit\u30dc\u30bf\u30f3\u306e\u4f4d\u7f6e\u3092\u5408\u308f\u305b\u308b\u3068\u5207\u308a\u66ff\u3048\u304c\u30b9\u30e0\u30fc\u30ba\u3067\u3059\u306d\u3002\n\n\nController\n\u6700\u5f8c\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3067\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u51e6\u7406\u3092\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3059\u3002params\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u60c5\u5831\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nplugins/redmine_animal/app/controllers/animal_cats_controller.rb\nclass AnimalCatsController < AnimalBaseController\n  respond_to :html, :json\n\n  def index\n    respond_with(@cats = AnimalCat.all)\n  end\n\n  def show\n    respond_with(@cat = AnimalCat.find(params[:id]))\n  end\n\n  def new\n    respond_with(@cat = AnimalCat.new)\n  end\n\n  def edit\n    @cat = AnimalCat.find(params[:id])\n  end\n\n  def create\n    @cat = AnimalCat.new(params[:animal_cat])\n    flash[:notice] = 'AnimalCat was successfully created.' if @cat.save\n    respond_with(@cat, location: @cat)\n  end\n\n  def update\n    @cat = AnimalCat.find(params[:id])\n    flash[:notice] = 'AnimalCat was successfully updated.' if @cat.update_attributes(params[:animal_cat])\n    respond_with(@cat, location: @cat)\n  end\n\n  def destroy\n    @cat = AnimalCat.find(params[:id])\n    @cat.destroy\n    respond_with(@cat, location: animal_cats_url)\n  end\nend\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30e2\u30c7\u30eb\u3068\u5408\u308f\u305b\u3066\u308250\u884c\u7a0b\u5ea6\u3067\u3053\u306e\u6a5f\u80fd\u304c\u5b9f\u88c5\u3067\u304d\u308b\u306e\u306fDRY\u3067\u3059\u3002(\uff77\uff98\uff6f\n\nTips\nbefore_filter\u306brequire_admin\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u7ba1\u7406\u8005\u4ee5\u5916\u306e\u30a2\u30af\u30bb\u30b9\u3092\u7981\u6b62\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nplugins/redmine_animal/app/controllers/animal_base_controller.rb\nclass AnimalBaseController < ApplicationController\n  unloadable\n  layout 'animal'\n  before_filter :require_admin\nend\n\n\n==================================\n\n[\u524d\u56de](http://qiita.com/items/4f77f851e3936ef81a69)\u306f\u307b\u307cScaffold\u306e\u307f\u3067Redmine Plugin(Redmine Animal)\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306fRails\u3067\u958b\u767a\u306e\u4e2d\u5fc3\u306b\u306a\u308bModel - View - Controller (MVC)\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nScaffold\u3067\u51fa\u529b\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3057\u3066\u30b7\u30f3\u30d7\u30eb\u306a\u30c7\u30fc\u30bf\u306e\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6a5f\u80fd\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n# Model\n\n\u307e\u305a\u306f\u30e2\u30c7\u30eb\u3067\u3059\u3002\u30c7\u30fc\u30bf\u306e\u64cd\u4f5c\u3068\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u30c7\u30fc\u30bf\u64cd\u4f5c\u306f`ActiveRecord::Base`\u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u306e\u3067O/R\u30de\u30c3\u30d4\u30f3\u30b0\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001\u30e2\u30c7\u30eb\u30ec\u30d9\u30eb\u3067\u30c7\u30fc\u30bf\u3092\u691c\u8a3c\u3059\u308b\u306b\u306f[validates](http://railsdoc.com/validation)\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n`AnimalCat `\u30af\u30e9\u30b9\u306f`name`\u3092\u5fc5\u9808\u5165\u529b\u306b\u307e\u3059\u3002\u3055\u3089\u306b\u5024\u306e\u4e00\u610f\u3092\u691c\u8a3c\u3057\u307e\u3059\u3002\n`age`\u306f\u5024\u304c`0`\u304b\u3089`99`\u306e\u7bc4\u56f2\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u304b\u691c\u8a3c\u3057\u307e\u3059\u3002\n(Rails\u306f`validates presence of name.`\u306e\u3088\u3046\u306b\u30e1\u30bd\u30c3\u30c9\u3067\u82f1\u6587\u306b\u306a\u308a\u307e\u3059\u3002)\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\u306e`is_kitten?`\u306f1\u6b73\u672a\u6e80\u3092\u5b50\u732b\u3068\u5224\u65ad\u3057\u307e\u3059\u3002\n(Ruby\u306f\u30e1\u30bd\u30c3\u30c9\u3067\u6700\u5f8c\u306b\u8a55\u4fa1\u3057\u305f\u5f0f\u306e\u7d50\u679c\u3092\u8fd4\u3057\u307e\u3059\u3002)\n\n```ruby:plugins/redmine_animal/app/models/animal_cat.rb\nclass AnimalCat < ActiveRecord::Base\n  unloadable\n\n  validates_presence_of :name\n  validates_uniqueness_of :name, case_sensitive: false\n  validates_inclusion_of :age, in: 0..99\n\n  def is_kitten?\n    age < 1\n  end\nend\n```\n\n`rails server`\u30b3\u30de\u30f3\u30c9\u306fHTTP\u30b5\u30fc\u30d0\u3067Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3057\u307e\u3057\u305f\u304c\n`rails console`\u30b3\u30de\u30f3\u30c9\u306firb(Interactive Ruby)\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u30e2\u30c7\u30eb\u30af\u30e9\u30b9\u304b\u3089\u30c7\u30fc\u30bf\u3092\u64cd\u4f5c\u3057\u305f\u308a\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306e\u5b9f\u884c\u306a\u3069\u3092\u3057\u307e\u3059\u3002  \n\n```bash\n$ bundle exec rails console\nLoading development environment (Rails 3.2.13)\n\nirb(main):001:0> AnimalCat.all\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> [#<AnimalCat id: 1, name: \"\u3082\u3082\", age: 2>, #<AnimalCat id: 2, name: \"\u30af\u30ed\", age: 0>]\n\nirb(main):002:0> AnimalCat.all.first\n  AnimalCat Load (0.3ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> #<AnimalCat id: 1, name: \"\u3082\u3082\", age: 2>\n\nirb(main):003:0> AnimalCat.all.first.is_kitten?\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> false\n\nirb(main):004:0> AnimalCat.all.last\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> #<AnimalCat id: 2, name: \"\u30af\u30ed\", age: 0>\n\nirb(main):005:0> AnimalCat.all.last.is_kitten?\n  AnimalCat Load (0.2ms)  SELECT \"animal_cats\".* FROM \"animal_cats\" \n=> true\n```\n\n`AnimalCat.all`\u3067`SELECT \"animal_cats\".* FROM \"animal_cats\"`\u306e\u30af\u30a8\u30ea\u30fc\u304c\u5b9f\u65bd\u3055\u308c\u307e\u3059\u3002\n`AnimalCat.all.first`\u306f\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u306e\u4ed5\u7d44\u307f\u3067\u5148\u982d\u306e\u30ec\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n(`\u3082\u3082`\u306f2\u6b73\u306a\u306e\u3067\u5b50\u732b\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002`\u30af\u30ed`\u306f0\u6b73\u306a\u306e\u3067\u5b50\u732b\u3067\u3059\u3002)\n\n\n# View\n\n\u6b21\u306f\u30d3\u30e5\u30fc\u3067\u3059\u3002\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306f[erb](http://jp.rubyist.net/magazine/?0017-BundledLibraries)\u306e\u4ed6\u306b[haml](http://haml.info/)\u3084[slim](http://slim-lang.com/)\u306a\u3069\u304c\u3042\u308a\u307e\u3059\u3002\n\n## Layout\n\nHTML\u306f`[resource]`\u306e`[action].html.erb`\u306b`<body>`\u30bf\u30b0\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n`<html>`\u30bf\u30b0\u306f`layouts`\u306e`application.html.erb`\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```\n. \n\u2514\u2500app\n    \u2514\u2500views\n        \u251c\u2500[resource]\n        \u2502      [action].html.erb\n        \u2502      \n        \u2514\u2500layouts\n                application.html.erb\n```\n\n\u30ec\u30a4\u30a2\u30a6\u30c8\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3084\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3064\u307e\u308aRedmine\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u4f7f\u308f\u306a\u3044\u3067\u30c7\u30b6\u30a4\u30f3\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u3055\u3063\u305d\u304fAnimal Plugin\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u3092`animal.html.erb`\u30d5\u30a1\u30a4\u30eb\u306b\u4f5c\u308a\u307e\u3059\u3002\n\n```erb:plugins/redmine_animal/app/views/layouts/animal.html.erb\n<!DOCTYPE html>\n<html>\n<head>\n  <title>Animal</title>\n</head>\n<body>\n\n<%= yield %>\n\n</body>\n</html>\n```\n\n\u4ed6\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u3082\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u5229\u7528\u3059\u308b\u30b1\u30fc\u30b9\u304c\u3042\u308b\u306e\u3067`ApplicationController`\u3092\n\u7d99\u627f\u3057\u305f`AnimalBaseController`\u3092`animal_base_controller.rb`\u30d5\u30a1\u30a4\u30eb\u306b\u4f5c\u308a\u307e\u3059\u3002\n\n```ruby:plugins/redmine_animal/app/controllers/animal_base_controller.rb\nclass AnimalBaseController < ApplicationController\n  unloadable\n  layout 'animal'\nend\n```\n\n`AnimalCatsController`\u306e\u7d99\u627f\u3092`ApplicationController`\u304b\u3089`AnimalBaseController`\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```ruby:plugins/redmine_animal/app/controllers/animal_cats_controller.rb\nclass AnimalCatsController < AnimalBaseController\n...\nend\n```\n\n\u3053\u308c\u3067\u30b9\u30bf\u30a4\u30eb\u306e\u306a\u3044\u72b6\u614b\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u30b9\u30bf\u30a4\u30eb\u306f\u30b7\u30f3\u30d7\u30eb\u3067\u6a5f\u80fd\u7684\u306a\u30c7\u30b6\u30a4\u30f3\u304c\u3067\u304d\u308b[Bootstrap](http://twitter.github.io/bootstrap/)\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n![animal_cat_layout_simple](https://dl.dropboxusercontent.com/u/14690051/images/notes/its/redmine/example/animal_cat_layout_simple.png)\n\nBootstrap\u306f`Redmine Twitter Bootstrap Plugin`\u3067\u7c21\u5358\u306b\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\n$ git clone git://github.com/ogom/redmine_twitter_bootstrap ./plugins/redmine_twitter_bootstrap\n```\n\n\u5148\u307b\u3069\u306e`animal.html.erb`\u30d5\u30a1\u30a4\u30eb\u306bBootstrap\u306e\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3068\u30b8\u30e3\u30d0\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```erb:plugins/redmine_animal/app/views/layouts/animal.html.erb\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<meta charset=\"utf-8\" />\n<title><%=h html_title %></title>\n<meta name=\"description\" content=\"<%= Redmine::Info.app_name %>\" />\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n<%= csrf_meta_tag %>\n<%= favicon %>\n\n<style>\n  body {padding-top: 60px;}\n</style>\n    \n<%= stylesheet_link_tag \"bootstrap.min.css\", plugin: :redmine_twitter_bootstrap %>\n<%= stylesheet_link_tag \"bootstrap-responsive.min.css\", plugin: :redmine_twitter_bootstrap %>\n\n<%= javascript_heads %>\n<%= javascript_include_tag \"bootstrap.min.js\", plugin: :redmine_twitter_bootstrap %>\n</head>\n\n<body data-spy=\"scroll\">\n\n<div class=\"navbar navbar-inverse navbar-fixed-top\">\n  <div class=\"navbar-inner\">\n    <div class=\"container-fluid\">\n      <button type=\"button\" class=\"btn btn-navbar\" data-toggle=\"collapse\" data-target=\".nav-collapse\">\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n        <span class=\"icon-bar\"></span>\n      </button>\n      <a class=\"brand\" href=\"/\"><%= page_header_title %></a>\n      <div class=\"nav-collapse collapse\">\n        <p class=\"navbar-text pull-right\">\n          Logged in as <%= \"#{link_to_user(User.current, format: :username)}\".html_safe if User.current.logged? %>\n        </p>\n        <ul class=\"nav\">\n          <%= nav_list_tag(\"Cats\", {controller: \"animal_cats\", action: \"index\"}) %>\n          <li><a href=\"/animal/dogs\">Dogs</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"container\">\n  <div class=\"content-fluid\">  \n\n<%= yield %>\n\n  </div>\n</div>\n\n</body>\n</html>\n```\n\nBootstrap\u306eHelper\u3092`AnimalBaseHelper`\u306b\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```ruby:plugins/redmine_animal/app/helpers/animal_base_helper.rb\nmodule AnimalBaseHelper\n  include RedmineTwitterBootstrap::Helper\nend\n```\n\n\u30ca\u30d3\u30d0\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n![animal_cat_layout_tb](https://dl.dropboxusercontent.com/u/14690051/images/notes/its/redmine/example/animal_cat_layout_tb.png)\n\n\u4ed6\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u3082Bootstrap\u306e\u30b9\u30bf\u30a4\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n## Index\n\nScaffold\u306e\u30d3\u30e5\u30fc\u306b\u30d1\u30f3\u304f\u305a\u30ea\u30b9\u30c8\u3092\u8ffd\u52a0\u3057\u3066\u3001\u3055\u3089\u306b\u30ea\u30f3\u30af\u3092\u30a2\u30a4\u30b3\u30f3\u4ed8\u304d\u306e\u30dc\u30bf\u30f3\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n(`breadcrumb_tag`\u3084`icon_tag`\u3084`link_button_tag`\u306f`TwitterBootstrap::Helper`\u306e\u30e1\u30bd\u30c3\u30c9\u3067\u3059\u3002)\n\n```erb:plugins/redmine_animal/app/views/animal_cats/index.html.erb\n<%= breadcrumb_tag 'Cats' %>\n\n<div class=\"page-header\">\n  <h1>Listing cats</h1>\n</div>\n\n<table class=\"table table-hover\">\n  <caption>\n    <div class=\"pull-right\">\n      <%= link_button_tag('New', new_animal_cat_path, {action: 'primary', icon: 'plus', color: 'white'}) %>\n    </div>\n  </caption>\n  <thead>\n  <tr>\n    <th><%=l :field_name %></th>\n    <th><%=l :field_age %></th>\n    <th><%=l :field_kitten %></th>\n    <th></th>\n  </tr>\n  </thead>\n  <tbody>\n<% @cats.each do |cat| %>\n  <tr>\n    <td><%= link_to cat.name, cat %></td>\n    <td><%= cat.age %></td>\n    <td><%= icon_tag(icon: 'ok') if cat.is_kitten? %></td>\n    <td>\n      <%= link_button_tag('Edit', edit_animal_cat_path(cat), {action: 'success', icon: 'pencil', color: 'white'}) %>&nbsp;\n      <%= link_button_tag('Destroy', cat, {action: 'danger', icon: 'trash', color: 'white'},\n          {method: :delete, data: {confirm: 'Are you sure?'}}) %>\n    </td>\n  </tr>\n<% end %>\n  </tbody>\n</table>\n```\n\nBootstrap\u306f\u30ec\u30b9\u30dd\u30f3\u30b7\u30d6Web\u30c7\u30b6\u30a4\u30f3\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\n\n![animal_cat_index](https://dl.dropboxusercontent.com/u/14690051/images/notes/its/redmine/example/animal_cat_index.png)\n\n## Show\n\n`l`\u30e1\u30bd\u30c3\u30c9\u3067\u56fd\u969b\u5316\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u3002\u65e5\u672c\u8a9e\u3060\u3068`<%=l :field_age %>`\u306f`\u5e74\u9f62`\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n```erb:plugins/redmine_animal/app/views/animal_cats/show.html.erb\n<%= breadcrumb_tag 'Show', [{caption: 'Cats', path: animal_cats_path}] %>\n\n<div class=\"page-header\">\n  <h1>Cat</h1>\n</div>\n\n<% flash.each do |name, msg| %>\n  <div class=\"alert alert-<%= name == :notice ? \"success\" : \"error\" %>\">\n    <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n    <%= msg %>\n  </div>\n<% end %>\n\n<div class=\"row-fluid\">\n  <div class=\"row-fluid\">\n    <div class=\"pull-right\">\n      <%= link_button_tag('Edit', edit_animal_cat_path(@cat), {action: 'success', icon: 'pencil', color: 'white'}) %>\n    </div>\n  </div>\n\n  <div class=\"row-fluid\">\n    <div class=\"span1 offset1\"><%=l :field_name %>&nbsp;:</div>\n    <div class=\"span1\"><%= @cat.name %></div>\n  </div>\n  <div class=\"row-fluid\">\n    <div class=\"span1 offset1\"><%=l :field_age %>&nbsp;:</div>\n    <div class=\"span1\"><%= @cat.age %></div>\n  </div>\n\n  &nbsp;\n\n  <div class=\"row-fluid\">\n    <div class=\"span2 offset2\">\n      <%= link_button_tag('Destroy', @cat, {action: 'danger', icon: 'trash', color: 'white'},\n          {method: :delete, data: {confirm: 'Are you sure?'}}) %>\n    </div>    \n  </div>\n</div>\n```\n\nShow\u306b`Edit`\u30dc\u30bf\u30f3\u3068`Destroy`\u30dc\u30bf\u30f3\u304c\u3042\u308c\u3070\u30ea\u30b9\u30c8\u306e\u30dc\u30bf\u30f3\u306f\u5197\u9577\u3067\u3059\u306d\u3002\n\n![animal_cat_show](https://dl.dropboxusercontent.com/u/14690051/images/notes/its/redmine/example/animal_cat_show.png)\n\n\n## New\n\n\u8ffd\u52a0\u3068\u7de8\u96c6\u306e[form](http://railsdoc.com/form)\u30bf\u30b0\u306f\u90e8\u5206\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n`<%= render 'form' %>`\u3067`_form.html.erb`\u30d5\u30a1\u30a4\u30eb\u304c\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002\n\n```erb:plugins/redmine_animal/app/views/animal_cats/new.html.erb\n<%= breadcrumb_tag 'New', [{caption: 'Cats', path: animal_cats_path}] %>\n\n<div class=\"page-header\">\n  <h1>New cat</h1>\n</div>\n\n<%= render 'form' %>\n```\n\n[text_field](http://railsdoc.com/references/text_field)\u3067\u30c6\u30ad\u30b9\u30c8\u30dc\u30c3\u30af\u30b9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n[number_field](http://railsdoc.com/references/number_field)\u3067\u6570\u5024\u5165\u529b\u30dc\u30c3\u30af\u30b9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n![animal_cat_new](https://dl.dropboxusercontent.com/u/14690051/images/notes/its/redmine/example/animal_cat_new.png)\n\n\n### form\n\n\u30e2\u30c7\u30eb\u304b\u3089\u306e\u30a8\u30e9\u30fc\u306f`alert-block `\u3067\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n```erb:plugins/redmine_animal/app/views/animal_cats/_form.html.erb\n<%= form_for(@cat, html: {class: \"form-horizontal\"}) do |f| %>\n  <% if @cat.errors.any? %>\n    <div class=\"alert alert-error alert-block\">\n      <button type=\"button\" class=\"close\" data-dismiss=\"alert\">&times;</button>\n      <ul>\n        <% @cat.errors.full_messages.each do |msg| %>\n          <li><%= msg %></li>\n        <% end %>\n      </ul>\n    </div>\n  <% end %>\n\n  <div class=\"control-group\">\n    <%= f.label :name, class: \"control-label\" %>\n    <div class=\"controls\">\n      <%= f.text_field :name %>\n    </div>\n  </div>\n\n  <div class=\"control-group\">\n    <%= f.label :age, class: \"control-label\" %>\n    <div class=\"controls\">\n      <%= f.number_field :age %>\n    </div>\n  </div>\n\n  <div class=\"control-group\">\n    <div class=\"controls\">\n      <%= f.submit class: \"btn btn-primary\" %>\n    </div>\n  </div>\n<% end %>\n```\n\n![animal_cat_alert-block](https://dl.dropboxusercontent.com/u/14690051/images/notes/its/redmine/example/animal_cat_alert-block.png)\n\n\n[submit](http://railsdoc.com/references/submit)\u30bf\u30b0\u306e\u56fd\u969b\u5316\u5bfe\u5fdc\u306f\u4e00\u62ec\u3067\u8a2d\u5b9a\u3067\u304d\u307e\u3059\u3002\n\n```yml\nja:\n  helpers:\n    submit:\n      create: Save\n      update: Save\n```\n\n\n## Edit\n\nNew\u3068Edit\u306f\u307b\u3068\u3093\u3069\u540c\u3058\u30ec\u30a4\u30a2\u30a6\u30c8\u306b\u306a\u308a\u307e\u3059\u3002\n\n```erb:plugins/redmine_animal/app/views/animal_cats/edit.html.erb\n<%= breadcrumb_tag 'Edit', [{caption: 'Cats', path: animal_cats_path}] %>\n\n<div class=\"page-header\">\n  <h1>Editing cat</h1>\n</div>\n\n<div class=\"row-fluid\">\n  <div class=\"row-fluid\">\n    <div class=\"pull-right\">\n      <%= link_button_tag('Show', @cat, {action: 'info', icon: 'file', color: 'white'}) %>\n    </div>\n  </div>\n</div>\n\n<%= render 'form' %>\n```\n\n`Show`\u30dc\u30bf\u30f3\u3068`Edit`\u30dc\u30bf\u30f3\u306e\u4f4d\u7f6e\u3092\u5408\u308f\u305b\u308b\u3068\u5207\u308a\u66ff\u3048\u304c\u30b9\u30e0\u30fc\u30ba\u3067\u3059\u306d\u3002\n\n![animal_cat_edit](https://dl.dropboxusercontent.com/u/14690051/images/notes/its/redmine/example/animal_cat_edit.png)\n\n# Controller\n\n\n\u6700\u5f8c\u306f\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3067\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u3068\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u51e6\u7406\u3092\u3057\u307e\u3059\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u30a2\u30af\u30b7\u30e7\u30f3\u3067\u3059\u3002`params`\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u60c5\u5831\u304c\u30bb\u30c3\u30c8\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n```ruby:plugins/redmine_animal/app/controllers/animal_cats_controller.rb\nclass AnimalCatsController < AnimalBaseController\n  respond_to :html, :json\n\n  def index\n    respond_with(@cats = AnimalCat.all)\n  end\n\n  def show\n    respond_with(@cat = AnimalCat.find(params[:id]))\n  end\n\n  def new\n    respond_with(@cat = AnimalCat.new)\n  end\n\n  def edit\n    @cat = AnimalCat.find(params[:id])\n  end\n\n  def create\n    @cat = AnimalCat.new(params[:animal_cat])\n    flash[:notice] = 'AnimalCat was successfully created.' if @cat.save\n    respond_with(@cat, location: @cat)\n  end\n\n  def update\n    @cat = AnimalCat.find(params[:id])\n    flash[:notice] = 'AnimalCat was successfully updated.' if @cat.update_attributes(params[:animal_cat])\n    respond_with(@cat, location: @cat)\n  end\n\n  def destroy\n    @cat = AnimalCat.find(params[:id])\n    @cat.destroy\n    respond_with(@cat, location: animal_cats_url)\n  end\nend\n```\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3068\u30e2\u30c7\u30eb\u3068\u5408\u308f\u305b\u3066\u308250\u884c\u7a0b\u5ea6\u3067\u3053\u306e\u6a5f\u80fd\u304c\u5b9f\u88c5\u3067\u304d\u308b\u306e\u306f***DRY***\u3067\u3059\u3002(\uff77\uff98\uff6f\n\n\n# Tips\n\n[before_filter](http://railsdoc.com/references/filter)\u306b`require_admin`\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u7ba1\u7406\u8005\u4ee5\u5916\u306e\u30a2\u30af\u30bb\u30b9\u3092\u7981\u6b62\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```ruby:plugins/redmine_animal/app/controllers/animal_base_controller.rb\nclass AnimalBaseController < ApplicationController\n  unloadable\n  layout 'animal'\n  before_filter :require_admin\nend\n```\n\n\n\n", "tags": ["Ruby", "Redmine", "Rails"]}