{"tags": ["Django1.3", "Python2.7"], "context": " More than 1 year has passed since last update.django\u30b3\u30de\u30f3\u30c9\u3068\u306f'python manage.py \u301c'\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u3053\u3068\u3067\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067shell\u306a\u3069\u305f\u304f\u3055\u3093\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u8a73\u3057\u304f\u8aac\u660e\u3057\u307e\u305b\u3093\u304c\u30ab\u30b9\u30bf\u30e0\u30b3\u30de\u30f3\u30c9\u3092\u3064\u304f\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u305d\u3057\u3066\u3001\u305d\u306e\u30ab\u30b9\u30bf\u30e0\u30b3\u30de\u30f3\u30c9\u306a\u3069\u306fcrontab\u306a\u3069\u30d0\u30c3\u30c1\u3068\u3057\u3066\u52d5\u304b\u3059\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3059\u304c\u3001\u306a\u3093\u3089\u304b\u306e\u539f\u56e0\u3067\u4e8c\u91cd\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\ncustom_command.py\nimport sys\nimport commands\nfrom django.core.management.base import BaseCommand\n\ndef is_process_exist(process_name):\n    \"\"\"\n    \u3053\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u52d5\u3044\u3066\u3044\u305f\u3089True\u3092\u8fd4\u3059\n    \"\"\"\n    output = commands.getoutput(\"ps -ef | grep '%s' | grep -v grep | wc -l\" % (process_name))\n    is_exist = int(output) >= 2\n\n    return is_exist\n\n\nclass Command(BaseCommand):\n    def handle(self, *args, **options):\n        # \u4e8c\u91cd\u8d77\u52d5\u30c1\u30a7\u30c3\u30af\n        if is_process_exist(__name__.split('.')[-1]):\n            sys.exit('duplication!')\n\n        # \u4ee5\u4e0b\u51e6\u7406\u301c\n\n\n\ndjango\u30b3\u30de\u30f3\u30c9\u3068\u306f'python manage.py \u301c'\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u3053\u3068\u3067\u3059\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067shell\u306a\u3069\u305f\u304f\u3055\u3093\u4fbf\u5229\u306a\u30b3\u30de\u30f3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u8a73\u3057\u304f\u8aac\u660e\u3057\u307e\u305b\u3093\u304c\u30ab\u30b9\u30bf\u30e0\u30b3\u30de\u30f3\u30c9\u3092\u3064\u304f\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u305d\u3057\u3066\u3001\u305d\u306e\u30ab\u30b9\u30bf\u30e0\u30b3\u30de\u30f3\u30c9\u306a\u3069\u306fcrontab\u306a\u3069\u30d0\u30c3\u30c1\u3068\u3057\u3066\u52d5\u304b\u3059\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3059\u304c\u3001\u306a\u3093\u3089\u304b\u306e\u539f\u56e0\u3067\u4e8c\u91cd\u8d77\u52d5\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n```py:custom_command.py\nimport sys\nimport commands\nfrom django.core.management.base import BaseCommand\n\ndef is_process_exist(process_name):\n    \"\"\"\n    \u3053\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u52d5\u3044\u3066\u3044\u305f\u3089True\u3092\u8fd4\u3059\n    \"\"\"\n    output = commands.getoutput(\"ps -ef | grep '%s' | grep -v grep | wc -l\" % (process_name))\n    is_exist = int(output) >= 2\n\n    return is_exist\n\n\nclass Command(BaseCommand):\n    def handle(self, *args, **options):\n        # \u4e8c\u91cd\u8d77\u52d5\u30c1\u30a7\u30c3\u30af\n        if is_process_exist(__name__.split('.')[-1]):\n            sys.exit('duplication!')\n\n        # \u4ee5\u4e0b\u51e6\u7406\u301c\n\n```"}