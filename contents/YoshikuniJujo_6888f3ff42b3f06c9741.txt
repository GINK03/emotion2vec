{"context": "\n\nGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001Xmonad\u3067GUI\u74b0\u5883\u3092\u6574\u3048\u308b\n\n\u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u672a\u5b8c\u3067\u3059\u3002\u81ea\u5206\u7528\u306e\u30e1\u30e2\u3067\u3059\u3002\u50d5\u306e\u500b\u4eba\u7684\u306a\u74b0\u5883\u3067\u306e\u4f5c\u696d\u4f8b\u3067\u3059\u3002\u73fe\u5728\u306fKVM\u4e0a\u306e\u30b2\u30b9\u30c8OS\u306e\u74b0\u5883\u3092\u8abf\u6574\u4e2d\u3067\u3059\u3002\n\u3086\u304f\u3086\u304f\u306f\u3001\u3082\u3063\u3068\u7d30\u304b\u306b\u5185\u5bb9\u306b\u308f\u3051\u3066\u3001\u305d\u308c\u305e\u308c\u72ec\u7acb\u3057\u305f\u8a18\u4e8b\u306b\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\n\u4f55\u3092\u3059\u308b\u304b\n\u9577\u5e74\u3001Gentoo\u3092\u4f7f\u3063\u3066\u304d\u3066\u3001\u3069\u306e\u3088\u3046\u306a\u74b0\u5883\u306b\u3059\u308b\u306e\u304b\u304c\u3001\u307b\u307c\u3001\u304b\u305f\u307e\u3063\u3066\u304d\u305f\u3002\u305d\u306e\u300c\u81ea\u5206\u7528\u306e\u74b0\u5883\u300d\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u3001\u3084\u308a\u304b\u305f\u3092\u3053\u3053\u306b\u30e1\u30e2\u3059\u308b\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306e\u66f8\u304d\u304b\u305f\nGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u74b0\u5883\u3092\u6574\u3048\u308b\u3068\u3044\u3046\u4f5c\u696d\u3092\u4f55\u5ea6\u3082\u304f\u308a\u304b\u3048\u3057\u3066\u304d\u305f\u3002\u305d\u3053\u3067\u3001\u3060\u3044\u305f\u3044\u3001\u3069\u306e\u3088\u3046\u306b\u3059\u308b\u304b\u306f\u899a\u3048\u3066\u3044\u308b\u3002\u305f\u3060\u3057\u7d30\u90e8\u306f\u5fd8\u308c\u3066\u3044\u308b\u3002\u305d\u3053\u3067\u3001\u307e\u305a\u306f\u4f5c\u696d\u306e\u524d\u306b\u3001\u3060\u3044\u305f\u3044\u306e\u6d41\u308c\u3092\u66f8\u304f\u3002\u305d\u3057\u3066\u3001\u4f5c\u696d\u3057\u306a\u304c\u3089\u7d30\u304b\u3044\u70b9\u3092\u3046\u3081\u305f\u308a\u3001\u4fee\u6b63\u3057\u305f\u308a\u3057\u3066\u3044\u304f\u3002\n\u5b9f\u969b\u306e\u4f5c\u696d\u304c\u3069\u3053\u307e\u3067\u9032\u3093\u3067\u3044\u308b\u306e\u304b\u306f\u300c!!\u3053\u3053\u307e\u3067\u3084\u3063\u305f!!\u300d\u3068\u3044\u3046\u30e9\u30d9\u30eb\u3067\u8868\u793a\u3059\u308b\u3002\n\n\u3069\u306e\u3088\u3046\u306a\u74b0\u5883\u306b\u3059\u308b\u304b\n\u3064\u304e\u306e\u3088\u3046\u306a\u74b0\u5883\u306b\u3059\u308b\u3002\n\n\u30c7\u30a3\u30b9\u30af\u306fMBR\u3067\u306f\u306a\u304fGPT\u3067\u521d\u671f\u5316\u3059\u308b\nLVM\u3092\u4f7f\u3063\u3066\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u5bb9\u91cf\u3092\u30d5\u30ec\u30ad\u30b7\u30d6\u30eb\u306b\u3059\u308b\nSWAP\u9818\u57df\u306f\u30e1\u30e2\u30ea\u5bb9\u91cf\u306e2\u500d\nboot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u81ea\u52d5\u3067\u306f\u30de\u30a6\u30f3\u30c8\u3057\u306a\u3044\nx86_64\u7528\u306eGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n...\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u306e\u4f5c\u6210\nGentoo\u306e\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u304b\u3089ISO\u30a4\u30e1\u30fc\u30b8\u3092\u843d\u3068\u3057\u3066\u304f\u308b\u3002\u3064\u304e\u306e\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u3001\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u3092\u9078\u3076\u3002\nhttps://www.gentoo.org/downloads/mirrors/\n\u3064\u304e\u306e\u3088\u3046\u306b\u30ea\u30f3\u30af\u3092\u305f\u3069\u308b\u3002\n\nreleases/\namd64/\nautobuilds/\ncurrent-install-amd64-minimal/\n\ninstall-amd64-minimal-201XXXXX.iso\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\u305d\u308c\u3092CD\u306b\u713c\u304f\u3002\n% cdrecord install-amd64-minimal-201XXXXX.iso\n\n\n\u8d77\u52d5\nGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u3092\u3044\u308c\u3001\u8d77\u52d5\u3059\u308b\u3002\u3064\u304e\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u305f\u3089\u30a8\u30f3\u30bf\u30fc\u30ad\u30fc\u3092\u62bc\u3059\u3002\nboot:\n\n\u3053\u3053\u3067\u30a8\u30f3\u30bf\u30fc\u30ad\u30fc\u3092\u62bc\u3055\u306a\u3044\u3068\u3001\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u304b\u3089\u8d77\u52d5\u3057\u3066\u3057\u307e\u3046\u3002\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u78ba\u8a8d\n\u3053\u3053\u3067\u306fDHCP\u30b5\u30fc\u30d0\u304c\u52d5\u3044\u3066\u3044\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u306b\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3059\u308b\u3002\u305d\u306e\u5834\u5408ping\u304c\u901a\u308b\u306f\u305a\u3060\u3002\n% ping foo.bar.com -c 3\n\nfoo.bar.com\u306e\u3068\u3053\u308d\u306f\u9069\u5f53\u306a\u30a2\u30c9\u30ec\u30b9(PING\u3092\u53d7\u3051\u4ed8\u3051\u3066\u304f\u308c\u308b\u3068\u3053\u308d)\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u8a08\u753b\n\u307e\u305a\u306f\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u5207\u308a\u304b\u305f\u306e\u8a08\u753b\u3092\u7acb\u3066\u308b\u3002LVM\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304b\u3089\u3001\u3053\u306e\u4f5c\u696d\u306f\u305a\u3044\u3076\u3093\u3068\u697d\u306b\u306a\u3063\u305f\u3002LVM\u4e0a\u306b\u4f5c\u3063\u305f\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u3001\u3042\u3068\u304b\u3089\u5bb9\u91cf\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3089\u3060\u3002\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3068\u30e1\u30e2\u30ea\u306e\u5bb9\u91cf\u3092\u8abf\u3079\u308b\n\u3068\u308a\u3042\u3048\u305a\u3001\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3068\u30e1\u30e2\u30ea\u306e\u5927\u304d\u3055\u3092\u8abf\u3079\u3088\u3046\u3002\n# parted /dev/sda\n(parted) print\n...\nDisk /dev/sda: 2000GB\n...\n(parted) quit\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u306f2TB\u304f\u3089\u3044\u3060\u3002\n# free -m\n          total ...\nMem:      15951 ...\nSwap:         0 ...\n\n\u3053\u306e\u30de\u30b7\u30f3\u306f16GB\u306e\u30e1\u30e2\u30ea\u3092\u7a4d\u3093\u3067\u3044\u308b\u3002\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\n\ngrub: 2MiB\nboot: 1GiB - 3MiB\nroot: 5GiB\nswap: 32GiB\nlvm2: 1TiB - 32GiB\nspace: \u7d041TiB\n\n\u3060\u3044\u305f\u3044\u3001\u3053\u3093\u306a\u611f\u3058\u306b\u3059\u308b\u3002\u591a\u5c11\u306e\u305a\u308c\u306f\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u3053\u308c\u3092MiB\u5358\u4f4d\u3067\u306e\u958b\u59cb\u4f4d\u7f6e\u3068\u7d42\u4e86\u4f4d\u7f6e\u3068\u306b\u76f4\u3059\u3002\n\ngrub: 1 - 3\nboot: 3 - 1024\nroot: 1024 - 6144\nswap: 6144 - 38912\nlvm2: 38912 - 1048576\nspace: 1048576 - -1\n\n\nLVM\u4e0a\u306e\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\n\nusr:  10GiB\nhome: 10GiB\nopt:   5GiB\nvar:   5GiB\ntmp:   2GiB\n\n\nGPT\u30e9\u30d9\u30eb\u3092\u3064\u3051\u308b\n\u3064\u304e\u306e\u3088\u3046\u306b\u3057\u3066GPT\u30e9\u30d9\u30eb\u3092\u3064\u3051\u308b\u3002\u3053\u308c\u3067\u3001\u3082\u3068\u306e\u30c7\u30fc\u30bf\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u308b\u306e\u3067\u6ce8\u610f\u3059\u308b\u3053\u3068\u3002\n# parted /dev/sda\n(parted) mklabel gpt\n(parted) print\n\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3068\u304d\u306e\u5358\u4f4d\u3092MiB\u306b\u3059\u308b\u3002\n(parted) unit mib\n\nGRUB\u304c\u4f7f\u7528\u3059\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n(parted) mkpart grub 1 3\n(parted) set 1 bios_grub on\n(parted) print\n\nboot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n(parted) mkpart boot 3 1024\n(parted) set 2 boot on\n(parted) print\n\nroot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n(parted) mkpart root 1024 6144\n\nswap\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n(parted) mkpart swap 6144 38912\n\nlvm2\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n(parted) mkpart lvm2 38912 1048576\n\n\u4e88\u5099\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n(parted) mkpart space 1048576 -1\n(parted) print\n(parted) quit\n\n\n\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\ndm-mod\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8aad\u307f\u3053\u3080\n% modprobe dm-mod\n\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u6e96\u5099\n% pvcreate /dev/sda5\n\n\n\u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n% vgcreate vg /dev/sda5\n\n\n\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\n# lvcreate -L10G -nusr vg\n# lvcreate -L10G -nhome vg\n# lvcreate -L5G -nopt vg\n# lvcreate -L10G -nvar vg\n# lvcreate -L2G -ntmp vg\n\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n\nSwap\u9818\u57df\u306e\u4f5c\u6210\u3068\u6709\u52b9\u5316\n# mkswap /dev/sda4\n# swapon /dev/sda4\n# free -g\n\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u4f5c\u6210\n# mkfs.ext4 /dev/sda2\n# mkfs.ext4 /dev/sda3\n\n# mkfs.ext4 /dev/vg/usr\n# mkfs.ext4 /dev/vg/home\n# mkfs.ext4 /dev/vg/opt\n# mkfs.ext4 /dev/vg/var\n# mkfs.ext4 /dev/vg/tmp\n\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n\u307e\u305a\u306froot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092/mnt/gentoo/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3001\u305d\u306e\u3057\u305f\u306b\u3001\u307b\u304b\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u305f\u3081\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002\n# mount /dev/sda3 /mnt/gentoo/\n# mkdir /mnt/gentoo/boot\n# mkdir /mnt/gentoo/usr\n# mkdir /mnt/gentoo/home\n# mkdir /mnt/gentoo/opt\n# mkdir /mnt/gentoo/var\n# mkdir /mnt/gentoo/tmp\n\nroot\u4ee5\u4e0b\u306b\u3001\u305d\u308c\u305e\u308c\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\n# mount /dev/sda2 /mnt/gentoo/boot\n# mount /dev/vg/usr /mnt/gentoo/usr\n# mount /dev/vg/home /mnt/gentoo/home\n# mount /dev/vg/opt /mnt/gentoo/opt\n# mount /dev/vg/var /mnt/gentoo/var\n# mount /dev/vg/tmp /mnt/gentoo/tmp\n\n\n/tmp/\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u4fee\u6b63\u3059\u308b\n# chmod 1777 /mnt/gentoo/tmp\n\n\nstage3\n\n\u6642\u9593\u3092\u5408\u308f\u305b\u308b\n\u6642\u9593\u3092\u5408\u308f\u305b\u308b\u3002\n# data\n# rc-service ntp-client start\n# data\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u30af\u30ed\u30c3\u30af\u3082\u5408\u308f\u305b\u308b\u3002\n# hwclock\n# hwclock --systohc\n# hwclock\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3059\u308b\n# cd /mnt/gentoo/\n\n\nstage3\u306etar\u30dc\u30fc\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n# links https://www.gentoo.org/downloads/mirrors/\n\n\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u3092\u9078\u3073\u3002\u3064\u304e\u306e\u3088\u3046\u306b\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u305f\u3069\u308b\u3002\n\nreleases\namd64\nautobuilds\ncurrent-stage3-amd64\n\nstage3-amd64-201XXXXX.tar.bz2\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n\u89e3\u51cd\u3057\u5c55\u958b\u3059\u308b\n# tar xvjpf stage3-amd64-201XXXXX.tar.bz2 --xattrs\n\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\n\u30d5\u30a1\u30a4\u30ebmake.conf\u304b\u3089CFLAGS=\"...\"\u3068\u3044\u3046\u884c\u3092\u898b\u3064\u3051\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n# vi /mnt/gentoo/etc/portage/make.conf\n...\nCFLAGS=\"-march=native -O2 -pipe\"\n...\n\n\u304a\u306a\u3058\u30d5\u30a1\u30a4\u30eb\u306e\u672b\u5c3e\u306b\u3001MAKEOPTS\u304b\u3089\u306f\u3058\u307e\u308b\u3001\u3064\u304e\u306e\u3088\u3046\u306a\u884c\u3092\u8ffd\u52a0\u3059\u308b\u3002\n# vi /mnt/gentoo/etc/portage/make.conf\nMAKEOPTS=\"-j5\"\n\nMAKEOPTS\u306b-j5\u3068\u3057\u305f\u306e\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u30925\u500b\u4e26\u5217\u3067\u884c\u3046\u3068\u3044\u3046\u3053\u3068\u3002\u3053\u306e\u6570\u5b57\u306f\u3001\u3060\u3044\u305f\u3044\u30b3\u30a2\u6570(\u30b9\u30ec\u30c3\u30c9\u6570?) + 1\u304f\u3089\u3044\u304c\u76ee\u5b89\u3060\u3068\u8a00\u3046\u3002\u4eca\u56de\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30de\u30b7\u30f3\u306f4\u30b3\u30a2(4\u30b9\u30ec\u30c3\u30c9)\u306a\u306e\u30675\u3068\u3059\u308b\u3002\n\n/mnt/genoo/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u74b0\u5883\u306b\u306f\u3044\u308b\n\nDNS\u60c5\u5831\u306e\u30b3\u30d4\u30fc\n# cp -L /etc/resolv.conf /mnt/gentoo/etc/\n\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30de\u30a6\u30f3\u30c8\n# mount -t proc proc /mnt/gentoo/proc\n# mount --rbind /sys /mnt/gentoo/sys\n# mount --make-rslave /mnt/gentoo/sys\n# mount --rbind /dev /mnt/gentoo/dev\n# mount --make-rslave /mnt/gentoo/dev\n\n\n/mnt/gentoo/\u4e0b\u306e\u74b0\u5883\u306b\u306f\u3044\u308b\n# chroot /mnt/gentoo /bin/bash\n# source /etc/profile\n# export PS1=\"(chroot) $PS1\"\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u3092\u9032\u3081\u308b\u305f\u3081\u306e\u6e96\u5099\n\nPortage\u30c4\u30ea\u30fc\u306e\u53d6\u5f97\u3068\u66f4\u65b0\n# emerge-webrsync\n# emerge --sync\n\n\n\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306e\u9078\u629e\n\u3064\u304e\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3059\u308b\u3002\u4eca\u56de\u306fdefault/linux/amd64/13.0/desktop\u3092\u9078\u3093\u3060\u3002\u3053\u308c\u304c3\u756a\u76ee\u3060\u3063\u305f\u306e\u3067set 3\u3068\u3057\u305f\u3002\n# eselect profile list\n# eselect profile set 3\n\n\nTmux\u3068Vim\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u3001Tmux\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\u305d\u3046\u3059\u308b\u3068\u3001\u8907\u6570\u306e\u753b\u9762\u3092\u6301\u3066\u308b\u306e\u3067\u3001\u4f5c\u696d\u304c\u3057\u3084\u3059\u304f\u306a\u308b\u3002\n# emerge -av tmux\n# tmux\n\nCtrl-b \"\u3067\u753b\u9762\u3092\u5206\u5272\u3057\u3066\u304a\u3053\u3046\u3002\u5206\u5272\u3057\u305f\u305d\u308c\u305e\u308c\u306e\u9818\u57df\u9593\u306e\u79fb\u52d5\u306fCtrl-b o\u3060\u3002\u65b0\u3057\u3044\u753b\u9762\u3092\u4f5c\u308b\u306b\u306fCtrl-b n\u3068\u3059\u308b\u3002\u753b\u9762\u9593\u3092\u79fb\u52d5\u3059\u308b\u306b\u306fCtrl-b 0\u3084Ctrl-b 1\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\u3044\u308d\u3044\u308d\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u306e\u3067\u3001\u4f7f\u3044\u3084\u3059\u3044\u30a8\u30c7\u30a3\u30bf\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3002\n# USE=\"-X\" emerge -av vim\n\n\u307e\u3060X\u306f\u5165\u308c\u306a\u3044\u306e\u3067USE\u3092-X\u3068\u3057\u3066\u304a\u304f\u3002\n\ncpuid2cpuflags\n# emerge -av cpuid2cpuflags\n# cpuinfo2cpuflags-x86 >> /etc/portage/make.conf\n\n\nUSE\u5909\u6570\u306e\u8a2d\u5b9a\n# vi /etc/portage/make.conf\n...\nUSE=\"...\\\n        cjk m17n-lib nls unicode git postgres zsh-completion vim-syntax\"\n...\n\n# vi /etc/portage/make.conf\n...\nLINGUAS=\"ja\"\nL10N=\"ja\"\n...\n\n\n\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306e\u6c7a\u5b9a\n# ls /usr/share/zoneinfo\n# echo \"Japan\" > /etc/timezone\n# emerge --config sys-libs/timezone-data\n\n\n\u30ed\u30b1\u30fc\u30eb\u306e\u8a2d\u5b9a\n# vim /etc/locale.gen\nja_JP.UTF-8 UTF-8\n# locale-gen\n\n# eselect locale list\n# eselect locale set 3\n\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u4f5c\u6210\n\n\u30ab\u30fc\u30cd\u30eb\u3068pciutils\u3092\u53d6\u5f97\u3059\u308b\n# emerge -av gentoo-sources\n# emerge -av pciutils\n\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\n\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u8a2d\u5b9a\u30c4\u30fc\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001\u884c\u3046\u3002\n# cd /usr/src/linux\n# make menuconfig\n\n\n\u8d70\u3063\u3066\u3044\u308b\u30ab\u30fc\u30cd\u30eb\u304b\u3089\u306e\u8a2d\u5b9a\u306e\u5165\u624b\n\u8d70\u3063\u3066\u3044\u308b\u30ab\u30fc\u30cd\u30eb\u304b\u3089\u8a2d\u5b9a\u3092\u5165\u624b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\nGeneral setup --->\n    <*> Kernel .config support\n        [*] Enable access to .config through /proc/config.gz\n\n\u4e00\u5ea6\u3001\u8a2d\u5b9a\u30c4\u30fc\u30eb\u3092\u3001\u4fdd\u5b58\u7d42\u4e86\u3055\u305b\u308b\u3002\n\n\u6709\u7ddaLAN\u306e\u30c9\u30e9\u30a4\u30d0\n\u3064\u304e\u306b\u6709\u7ddaLAN\u306e\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u78ba\u8a8d\u3059\u308b\u3002\n# lspci -k | grep -A 2 -i ethernet\nKernel driver in use: alx\n# grep -i alx .config\n# CONFIG_ALX is not set\n\n\u7d50\u679c\u304cis not set\u3060\u3063\u305f\u306e\u3067\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3001\u8a2d\u5b9a\u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n# make menuconfig\nDevice Drivers --->\n    [*] Network driver support --->\n        [*] Atheros devices\n            .\n            .\n            <*> Qualcomm Atheros 816x/AR817x support\n\n\n\u30d7\u30ed\u30bb\u30c3\u30b5\u30d5\u30a1\u30df\u30ea\u30fc\n\u30d7\u30ed\u30bb\u30c3\u30b5\u30d5\u30a1\u30df\u30ea\u30fc\u3067Core 2 / newer Xeon\u3092\u9078\u629e\u3059\u308b\u3002\nProcessor type and features --->\n    Processor family (Core 2 / newer Xeon)\n\n\nLVM2\nDevice mapper support\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\nDevice Drivers --->\n    Multi-device support (RAID and LVM)\n        Multiple devices driver support (RAID and LVM)\n            <*> Device mapper support\n\n\n\u30d3\u30eb\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# make && make modules_install\n# make install\n\n\ninitramfs\u306e\u4f5c\u6210\n# emerge -av genkernel\n# genkernel --install initramfs\n# ls /bool/initramfs*\n\n\nLVM2\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# emerge -av lvm2\n\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30e9\u30d9\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\next4\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u3057\u3066\u306fe2label\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3002\n# e2label /dev/sda2 boot\n# e2label /dev/sda2\nboot\n# e2label /dev/sda3 root\n# e2label /dev/vg/usr usr\n# e2label /dev/vg/home home\n# e2label /dev/vg/opt opt\n# e2label /dev/vg/var var\n# e2label /dev/vg/tmp tmp\n\nswap\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u306fmkswap\u3092\u4f7f\u3046\u3002\n# swapoff /dev/sda4\n# mkswap -L swap /dev/sda4\n# swapon LABEL=swap\n\n\nfstab\u306e\u8a2d\u5b9a\n# vi /etc/fstab\nLABEL=root      /            ext4   noatime        0 1\nLABEL=boot      /boot        ext4   noauto,noatime 0 2\nLABEL=usr       /usr         ext4   noatime        0 2\nLABEL=home      /home        ext4   noatime        0 2\nLABEL=opt       /opt         ext4   noatime        0 2\nLABEL=var       /var         ext4   noatime        0 2\nLABEL=tmp       /tmp         ext4   noatime        0 2\nLABEL=swap      none         swap   sw             0 0\n/dev/cdrom      /mnt/cdrom   auto   noauto,ro      0 0\n\n\nhostname\u306e\u8a2d\u5b9a\n\u3068\u308a\u3042\u3048\u305a\u3001\u540d\u524d\u306fchassis\u306b\u3057\u3066\u304a\u304f\u3002\n# vim /etc/conf.d/hostname\nhostname=\"chassis\"\n\n\u30c9\u30e1\u30a4\u30f3\u540d\u3082\u9069\u5f53\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n# vim /etc/conf.d/net\ndns_domain_lo=\"local.hogehoge.jp\"\n\nlocal.hogehoge.jp\u306e\u3068\u3053\u308d\u306f\u3001\u9069\u5f53\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n/etc/hosts\u306b\u3082\u81ea\u5206\u306e\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n# vim /etc/hosts\n127.0.0.1 chassis chassis.local.hogehoge.jp localhost\n::1 chassis chassis.local.hogehoge.jp chassis\n\n\n\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\n\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n# passwd\n\n\n\u3044\u304f\u3064\u304b\u306e\u30b7\u30b9\u30c6\u30e0\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3059\u308b\nmetalog\u3092\u5c0e\u5165\u3059\u308b\u3002\n# emerge -av metalog\n# rc-update add metalog default\n\nfcron\u3092\u5c0e\u5165\u3059\u308b\u3002\n# emerge -av fcron\n# rc-update add fcron default\n# crontab /etc/crontab\n\nmlocate\u3092\u5c0e\u5165\u3059\u308b\u3002\n# emerge -av mlocate\n\nDHCP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5c0e\u5165\u3059\u308b\u3002\n# emerge -av dhcpcd\n\n\nLVM2\u30c7\u30fc\u30e2\u30f3\u3092\u767b\u9332\n# rc-update add lvm boot\n\n\n\u30d6\u30fc\u30c8\u30ed\u30fc\u30c0\u306e\u8a2d\u5b9a\n# emerge -av grub\n# grub-install /dev/sda\n# grub-mkconfig -o /boot/grub/grub.cfg\n\n\n\u518d\u8d77\u52d5\n\u3055\u3066\u3001\u3064\u3044\u306b\u3001\u3053\u306e\u3068\u304d\u304c\u304d\u305f\u3002\n\u3046\u307e\u304f\u3044\u304f\u3060\u308d\u3046\u304b\u3002\n# exit\n# exit\n# exit\n# reboot\n\n\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u304c\u7d42\u308f\u3063\u305f\u3068\u3053\u308d\u3067CD\u3092\u306c\u3044\u3066\u304a\u304f\u3053\u3068\u3002\n\n\u518d\u8d77\u52d5\u6210\u529f\nroot\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\u307e\u305a\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u78ba\u8a8d\u3002\n# ping hoge.co.jp -c 3\n\nhoge.co.jp\u306e\u3068\u3053\u308d\u306f\u9069\u5f53\u306a\u30a2\u30c9\u30ec\u30b9(ping\u3092\u53d7\u3051\u3064\u3051\u3066\u304f\u308c\u308b)\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\u3053\u308c\u304c\u3046\u307e\u304f\u3044\u3063\u305f\u3089\u3001\u3068\u308a\u3042\u3048\u305atmux\u306b\u5165\u3063\u3066\u304a\u3053\u3046\u3002\n# tmux\n\n\nOpenRC\u306e\u30ed\u30b0\u3092\u8a18\u9332\u3059\u308b\n# vim /etc/rc.conf\nrc_logger=\"YES\"\n\n\u3053\u3046\u3057\u3066\u304a\u304f\u3068\u3001\u6b21\u56de\u304b\u3089\u306f/var/log/rc.log\u306b\u30ed\u30b0\u304c\u8a18\u9332\u3055\u308c\u308b\u3002\n\n\u30cf\u30a4\u30d0\u30cd\u30fc\u30b7\u30e7\u30f3\n\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3059\u308b\u3002\n# zcat /proc/config.gz | grep -i suspend\n# zcat /proc/config.gz | grep -i hibernation\n\n\n\u30b5\u30b9\u30da\u30f3\u30c9\n\u4f5c\u696d\u5185\u5bb9\u3092\u30e1\u30e2\u30ea\u306b\u4fdd\u5b58\u3057\u3066\u3001\u7701\u96fb\u529b\u30e2\u30fc\u30c9\u306b\u5165\u308b\u3002\n# echo mem > /sys/power/state\n\n\u3053\u308c\u3067\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306e\u96fb\u6e90\u304c\u843d\u3061\u308b\u3002\u518d\u5ea6\u3001\u96fb\u6e90\u3092\u5165\u308c\u308b\u3068\u4e2d\u65ad\u3057\u305f\u3068\u3053\u308d\u304b\u3089\u3001\u306f\u3058\u3081\u3089\u308c\u308b\u3002\n\n\u30cf\u30a4\u30d0\u30cd\u30fc\u30c8\n\u4f5c\u696d\u5185\u5bb9\u3092\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u30b9\u30ef\u30c3\u30d7\u9818\u57df\u306b\u4fdd\u5b58\u3057\u3066\u96fb\u6e90\u3092\u5207\u308b\u3002\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3078\u306e\u4fdd\u5b58\u306a\u306e\u3067\u3001\u5b8c\u5168\u306b\u96fb\u6e90\u3092\u843d\u3068\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30ab\u30fc\u30cd\u30eb\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u30b9\u30ef\u30c3\u30d7\u9818\u57df\u3092\u6307\u5b9a\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n# vim /etc/default/grub\n...\nGRUB_CMDLINE_LINUX_DEFAULT=\"resume=/dev/sda4\"\n...\n# mount boot\n# grub-mkconfig -o /boot/grub/grub.cfg\n# echo disk > /sys/power/state\n\n\u3053\u308c\u3067\u3001\u96fb\u6e90\u304c\u843d\u3061\u308b\u3002\u96fb\u6e90\u30b9\u30a4\u30c3\u30c1\u3092\u62bc\u3057\u3066\u3001\u7acb\u3061\u4e0a\u3052\u308b\u3068\u3001\u4e2d\u65ad\u3057\u305f\u3068\u3053\u308d\u304b\u3089\u3001\u306f\u3058\u3081\u3089\u308c\u308b\u3002\n\n\u96fb\u6e90\u30dc\u30bf\u30f3\u3067\u30cf\u30a4\u30d0\u30cd\u30fc\u30c8\u3059\u308b\n# emerge -av acpid\n# rc-update add acpid default\n# rc-service acpid start\n# vim /etc/acpid/default.sh\n...\n        case \"$group\" in\n                button)\n                        case \"$action\" in\n                                power)\n                                        case \"$device\" in\n                                                PBTN)\n                                                        echo disk > /sys/power/state\n                                                        ;;\n                                        esac\n                                        ;;\n\n\u3044\u308d\u3044\u308d\u3068\u8a66\u3057\u3066\u304b\u3089\u8a2d\u5b9a\u3057\u305f\u3044\u3068\u304d\u306f\u3001\u3068\u308a\u3042\u3048\u305a\u3001button\u306b\u53cd\u5fdc\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u304b\u3089\u3001\u3069\u306e\u30dc\u30bf\u30f3\u3067\u3069\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\u3059\u308b\u306e\u304b\u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n# vim /etc/acpi/default.sh\n('power)'\u3068\u3044\u3046\u884c\u306e\u6b21\u306e\u884c\u306e\u5148\u982d\u306b'#'\u3092\u8ffd\u52a0\u3059\u308b)\n# acpi_listen\n(\u96fb\u6e90\u30dc\u30bf\u30f3\u3092\u62bc\u3059)\nbutton/power PBTN 00000080 00000000\nbutton/power LNXPWRBN:00 00000080 00000001\n(\u96fb\u6e90\u30dc\u30bf\u30f3\u3092\u3082\u30461\u56de\u3001\u62bc\u3059)\nbutton/power PBTN 00000080 00000000\nbutton/power LNXPWRBN:00 00000080 00000002\n(\u30ce\u30fc\u30c8PC\u306a\u3089\u3001\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3092\u958b\u9589\u3059\u308b)\nbutton/lid LID close\nbutton/lid LID open\n\n\u96fb\u6e90\u30dc\u30bf\u30f3\u306a\u3089\u3001\u305f\u3068\u3048\u3070\n\n$1: button/power\n$2: PBTN\n$3: 00000080\n$4: 00000000\n\n\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nVim\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30c7\u30a3\u30bf\u306b\u3059\u308b\n# eselect editor list\n...\n    [3] /usr/bin/vi\n# eselect editor set 3\n# . /etc/profile\n# echo $EDITOR\n/usr/bin/vi\n\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3068sudo\u306e\u5c0e\u5165\n\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n# useradd -m -G users,portage,wheel -s /bin/bash yoshio\n# passwd yoshio\n\nyoshio\u306e\u3068\u3053\u308d\u306f\u597d\u304d\u306a\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\u3053\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3057\u3066\u3001\u305d\u306e\u3046\u3048\u3067root\u30e6\u30fc\u30b6\u306b\u306a\u308b\u3002\n# exit\n# exit\nlogin: yoshio\npasswd: ******\n$ tmux\n$ su\npasswd: ******\n#\n\nsudo\u3092\u5c0e\u5165\u3059\u308b\u3002\n# emerge -av sudo\n# visudo\n%wheel ALL=(ALL) ALL\n# exit\n$ sudo echo hoge\n(\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b)\nhoge\n\n\nZsh\u306e\u5c0e\u5165\n\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30b7\u30a7\u30eb\u3092Zsh\u306b\u3059\u308b\u3002\n$ sudo emerge -av zsh\n$ sudo vipw\n(\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e/bin/bash\u3092/bin/zsh\u306b\u5909\u66f4\u3059\u308b)\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3057\u3066\u3001\u3044\u304f\u3064\u304b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n$ exit\n$ exit\nlogin: yoshio\npasswd: ******\n(zsh\u306e\u8a2d\u5b9a\u30c4\u30fc\u30eb\u304c\u8d77\u52d5\u3059\u308b)\n\u5c65\u6b74\u306e\u4fdd\u5b58\u30921,000,000\u500b\u306b\u5897\u3084\u3059\u3002\n\u88dc\u5b8c\u30b7\u30b9\u30c6\u30e0\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067on\u306b\u3059\u308b\u3002\n\u6307\u3065\u304b\u3044\u306bvi\u3092\u9078\u629e\u3002\n\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u306e\u62e1\u5f35\u3068\u80cc\u666f\u30b8\u30e7\u30d6\u306e\u7d42\u4e86\u306e\u5373\u6642\u5831\u544a\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\u4fdd\u5b58\u7d42\u4e86\n% vi .zshrc\n...\nsetopt share_history\n\n\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3002^[\u306fCtrl-V Esc\u3067\u5165\u529b\u3059\u308b\u3002\n% vi .zshrc\n...\nPROMPT=\"%{^[[;32;1m%}[%D{%H:%M}] %#%{^[[m%} \"\nPROMPT2=\"%_> \"\nRPROMPT=\"[%40<...<%~]\"\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3059\u3002\n% exit\nlogin: yoshio\npasswd: ******\n% tmux\n\n\nXorg\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n\u306a\u3093\u3068\u306a\u304f\u3001clang\u3092USE\u306b\u8ffd\u52a0\u3059\u308b\u3002\u307e\u305f\u3001INPUT_DEVICES\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n% sudoedit /etc/portage/make.conf\nUSE=\"...\\\n        ...\\\n        clang\"\nINPUT_DEVICES=\"evdev\"\n\n\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u3092\u8abf\u3079\u308b\u3002\n% /usr/sbin/lspci | grep -i graphics\n...: Intel ...\n\n\u305f\u3076\u3093intel\u3067\u826f\u3055\u305d\u3046\u306a\u306e\u3067\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n% sudoedit /etc/portage/make.conf\nVIDEO_CARDS=\"intel\"\n\nxorg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n% sudo emerge -av xorg-server\n\n77\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u5c0e\u5165\u3055\u308c\u308b\u3002\u3068\u304f\u306bllvm\u3042\u305f\u308a\u304c\u3059\u3054\u304f\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u3001\u304a\u51fa\u304b\u3051\u3059\u308b\u304b\u7720\u308b\u304b\u3001\u5bb6\u306b\u5e30\u308b\u304b\u3059\u308b\u307b\u3046\u304c\u3044\u3044\u3068\u601d\u308f\u308c\u308b\u3002\n\u3061\u3083\u3093\u3068\u52d5\u304f\u304b\u3069\u3046\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3002\n% sudo emerge -av twm xterm\n% startx\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n\u3053\u306e\u3042\u305f\u308a\u3067\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u6700\u65b0\u306e\u3082\u306e\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304a\u3053\u3046\u3002\n% sudo emerge -av --deep --newuse @system\n\n125\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u66f4\u65b0\u307e\u305f\u306f\u65b0\u898f\u5c0e\u5165\u3055\u308c\u308b\u3002\u3057\u3070\u3089\u304f\u3001\u304b\u304b\u308b\u3060\u308d\u3046\u3002\n% sudo emerge -av --deep --newuse @world\n% sudo emerge -av --depclean\n\n\u5ff5\u306e\u305f\u3081\u3001\u3082\u3046\u4e00\u5ea6sync\u3057\u3066\u304a\u304f\u3002\n% sudo emerge --sync\n% sudo emerge -av --deep --newuse @system\n% sudo emerge -av --deep --newuse @world\n\n\nXmonad\u306e\u5c0e\u5165\n% sudo emerge -av xmonad\n\n\u3057\u3070\u3089\u304f\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u3001\u3059\u3053\u3057\u4f11\u61a9\u3057\u3088\u3046\u3002\n% vim ~/.xinitrc\nexec xmonad\n% startx\n\n\u753b\u9762\u304c\u307e\u3063\u9ed2\u306b\u306a\u308b\u3051\u308c\u3069\u3001\u3042\u308f\u3066\u305a\u306b\u3001Alt + Shift + Enter\u3092\u62bc\u3059\u3002\u3059\u308b\u3068\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u304c\u51fa\u308b\u3002exit\u3057\u3066\u3001Alt + Shift + q\u3067X\u3092\u306c\u3051\u3088\u3046\u3002\n\nrxvt-unicode\u306e\u5c0e\u5165\n\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u306b\u306frxvt\u306e\u30e6\u30cb\u30b3\u30fc\u30c9\u7248\u3092\u4f7f\u3046\u3053\u3068\u306b\u3059\u308b\u3002\n% emerge -pv rxvt-unicode\n\n\u53ef\u80fd\u306aUSE\u30d5\u30e9\u30b0\u306e\u306a\u304b\u304b\u3089\u3001256-color\u3001wcwidth\u3001unicode3\u3001xft\u3042\u305f\u308a\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\u307e\u305f\u3001\u305d\u306e\u305f\u3081\u306b\u306f-vanilla\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n% sudoedit /etc/portage/package.use/rxvt-unicode\nx11-terms/rxvt-unicode -vanilla 256-color wcwidth unicode3 xft\n% sudo emerge -av rxvt-unicode\n\nXmonad\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3068\u3057\u3066\u767b\u9332\u3059\u308b\u3002\n% mkdir ~/.xmonad\n% vim ~/.xmonad/xmonad.hs\nimport XMonad\n\nmain :: IO ()\nmain = do\n        xmonad defaultConfig {\n                terminal = \"urxvt\"\n                }\n\n\u8a66\u3057\u3066\u307f\u3088\u3046\u3002\n% startx\n\n\u3053\u3053\u3067\u3001Ctrl + Shift + Enter\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001\u305d\u3053\u306b\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u6253\u3061\u8fbc\u3080\u3002\n% echo $TERM\nrxvt-unicode-256color\n% exit\n\n\u554f\u984c\u306a\u3051\u308c\u3070\u3001Ctrl + Shift + q\u3067X\u3092\u7d42\u4e86\u3055\u305b\u308b\u3002\n\u753b\u9762\u306e\u8272\u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n% vim ~/.Xdefaults\nurxvt*background: black\nurxvt*foreground: snow\nurxvt*color12: #7799FF\n\nurxvt*saveLines: 0\n\n\u3082\u3046\u4e00\u5ea6\u3001\u7acb\u3061\u4e0a\u3052\u3066\u3001\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n% startx\n\nCtrl + Shift + Enter\u3068\u3059\u308b\u3002\u74b0\u5883\u304c\u6574\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u306f\u3001\u3053\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067\u4f5c\u696d\u3092\u3059\u308b\u3002\n% tmux\n\n\n\u65e5\u672c\u8a9e\u5165\u529b\n\u65e5\u672c\u8a9e\u5165\u529b\u306b\u306f\u50d5\u306f\u3001TUT-code\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002uim\u3092\u4f7f\u3046\u3002\n% emerge -pv uim\n\n\u3068\u308a\u3042\u3048\u305aUSE\u306bxft\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304f\u3002\u3053\u306e\u30d5\u30e9\u30b0\u306f\u5168\u4f53\u306b\u6307\u5b9a\u3057\u3066\u3082\u3044\u3044\u6c17\u3082\u3059\u308b\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3001\u3042\u3068\u3067\u691c\u8a0e\u3057\u3088\u3046\u3002\n% sudoedit /etc/portage/package.use/uim\napp-i18n/uim xft\n\n\u5c0e\u5165\u3059\u308b\u3002\n% sudo emerge -av uim\n\n.xinitrc\u3092\u7de8\u96c6\u3059\u308b\u3002\n% vim .xinitrc\nexport XMODIFIERS=\"@im=uim\"\nuim-xim --engine=tutcode &\nexec xmonad\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u306c\u3051\u308b\u3002\n% exit\n% exit\n\nAlt + Shift + q\u30671\u5ea6X\u3092\u306c\u3051\u3066\u304b\u3089\u3001\u3082\u30461\u5ea6X\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3002\n% startx\n\nAlt + Shift + Enter\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3002Shift + Space\u3067\u65e5\u672c\u8a9e\u5165\u529b\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u3082\u30461\u5ea6Shift + Space\u3067\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u5165\u529b\u306b\u3082\u3069\u308b\u3002\n\u6df7\u305c\u66f8\u304d\u8f9e\u66f8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n% curl https://raw.githubusercontent.com/YoshikuniJujo/memos/master/mazegaki.dic > ~/.mazegaki.dic\n% exit\n\nX\u306b\u5165\u308a\u306a\u304a\u3057\u3066\u3001\u6df7\u305c\u66f8\u304d\u5909\u63db\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\nuim\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n% uim-pref-gtk\n\n\u300c\u30ab\u30fc\u30bd\u30eb\u306e\u305d\u3070\u306b\u5165\u529b\u30e2\u30fc\u30c9\u3092\u8868\u793a\u300d\u3068Tut-code\u306e\u300cvi\u5354\u8abf\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3059\u308b\u300d\u3068\u3092\u8a2d\u5b9a\u3002\n\nfirefox\u3092\u5c0e\u5165\n% emerge -pv firefox\n\npython\u30d1\u30c3\u30b1\u30fc\u30b8\u3067USE\u306bsqlite\u304c\u5fc5\u8981\u306a\u3088\u3046\u3060\u3002\n% sudoedit /etc/portage/package.use/python\ndev-lang/python sqlite\n% sudo emerge -av firefox\n\nVimperator\u3092\u5c0e\u5165\u3059\u308b\u3002\n% firefox\n\nvimperator\u3092\u691c\u7d22\u3057\u3066\u5c0e\u5165\u3059\u308b\u3002\u305d\u308c\u304b\u3089\u3001\u6307\u3065\u304b\u3044\u3092\u5909\u3048\u308b\u3002\u4ee5\u4e0b\u306e\u8a18\u4e8b\u306b\u3057\u305f\u304c\u3046\u3002\nhttp://qiita.com/YoshikuniJujo/items/67236b619fc4e21dc806\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u306e\u6587\u5b57\u5165\u529b\u3067\u3001vi\u6d41\u3067\u3001\u30b3\u30de\u30f3\u30c9\u30e2\u30fc\u30c9\u304b\u3089\u5165\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n% vim ~/.vimperatorrc\nset noinsertmode\n\n\nX\u306e\u74b0\u5883\u3092\u6574\u3048\u308b\ndmenu\u306e\u5c0e\u5165\u3002\n% sudo emerge -av dmenu\n\n\u3053\u308c\u3067\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u304b\u3089\u3067\u306a\u304f\u3066\u3082\u3001Alt + p\u3092\u3057\u3066\u304b\u3089firefox\u3068\u6253\u3061\u8fbc\u3080\u3053\u3068\u3067firefox\u304c\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\nxmobar\u306e\u5c0e\u5165\n% emerge -pv xmobar\n\n\u3053\u306e\u3042\u305f\u308a\u3067xft\u3092\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u8a2d\u5b9a\u3057\u3066\u3057\u307e\u304a\u3046\u3002\n% sudoedit /etc/portage/make.conf\nUSE=\"... \\\n        ... \\\n        clang xft\"\n% sudo emerge -av xmobar\n\n.xmobarrc\u3092\u4f5c\u6210\u3002\u3053\u3053\u3067\u306fgithub\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304f\u3002\n% curl https://raw.githubusercontent.com/YoshikuniJujo/memos/master/xmobarrc > ~/.xmobarrc\n\nxmonad-contrib\u3092\u5c0e\u5165\u3059\u308b\u3002\n% sudo emerge -av xmonad-contrib\n\nxmonad.hs\u306e\u7de8\u96c6\u3002\n% vim ~/.xmonad/xmonad.hs\nimport XMonad\nimport XMonad.Util.Run (spawnPipe, hPutStrLn)\nimport XMonad.Hooks.DynamicLog (dynamicLogWithPP, defaultPP, ppOutput)\n\nimport XMonad.Hooks.ManageDocks (avoidStruts)\n\nimport Control.Concurrent\n\nmyLayout = avoidStruts (tiled ||| Mirror tiled ||| Full) ||| Full\n        where tiled = Tall 1 (3 / 100) (1 / 2)\n\nmain :: IO ()\nmain = do\n        h <- spawnPipe \"xmobar\"\n        threadDelay 100000\n        xmonad defaultConfig {\n                terminal        = \"urxvt\",\n                layoutHook      = myLayout,\n                logHook         = dynamicLogWithPP $ defaultPP { ppOutput = hPutStrLn h }\n                }\n\n\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u3072\u3068\u3064\u306e\u3068\u304d\u306b\u306f\u67a0\u3092\u8868\u793a\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n% vim .xmonad/xmonad.hs\n(import XMonad.Layout.NoBorders (smartBorders)\u3092\u8ffd\u52a0)\n(layoutHook = myLayout,\u306emyLayout\u306e\u524d\u306bsmartBorders\u3092\u8ffd\u52a0)\n\n\nKVM\u306e\u8a2d\u5b9a\n\u3053\u306e\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fOS\u3092\u30db\u30b9\u30c8OS\u3068\u3057\u3066KVM\u3092\u4f7f\u3063\u3066\u30b2\u30b9\u30c8OS\u3092\u8d70\u3089\u305b\u308b\u3053\u3068\u306b\u3059\u308b\u3002\n\n\u30ab\u30fc\u30cd\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\n% zcat /proc/config.gz | grep -i kvm\n\n% cd /usr/src/linux\n% sudo make menuconfig\n[*] Virtualization --->\n<*> Kernel-based Virtual Machine (KVM) support\n<*> KVM for Intel processors support\n[*] Audit KVM MMU\n\nDevice Drivers --->\n[*] Network device support --->\n<*> Universal TUN/TAP device driver support\n\n[*] Networking support --->\nNetworking options --->\n<*> 802.1d Ethernet Bridging\n<*> 802.1Q VLAN Support\n\n% sudo make && sudo make modules_install\n% sudo mount /boot\n% sudo make install\n% exit\n% exit\n\nAlt + Shift + q\u3067X\u3092\u306c\u3051\u308b\u3002\n% sudo reboot\n\n% zcat /proc/config.gz | grep -i kvm\n\n\u3061\u3087\u3063\u3068\u3001\u5fd8\u308c\u3066\u305f\u304cls\u306ealias\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n% vim ~/.zshrc\nalias ls='ls --color=auto'\n\n\nbridge\u3092\u8a2d\u5b9a\u3059\u308b\nbridge-utils\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n% sudo emerge -av bridge-utils\n\nbr0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n% sudoedit /etc/conf.d/net\nbridge_br0=\"\"\nconfig_br0=\"192.168.100.254/24\"\n\nsysctl.conf\u3092\u7de8\u96c6\u3059\u308b\u3002\n% sudoedit /etc/sysctl.conf\n...\n#\n# Setup bridge interface for KVM\n#\nnet.bridge.bridge-nf-call-arptables = 0\nnet.bridge.bridge-nf-call-iptables = 0\nnet.bridge.bridge-nf-call-ip6tables = 0\n\nbridge_forward\u3092\u4f5c\u6210\u3059\u308b\u3002\n% sudoedit /etc/init.d/bridge_forward\n#!/sbin/openrc-run\n\ndepend() {\n        need net.br0\n}\n\nstart() {\n        ebegin \"Turning on forwarding for bridge interface\"\n        sysctl net.ipv4.conf.br0.forwarding=1 > /dev/null 2>&1\n        sysctl net.ipv4.ip_forward=1 > /dev/null 2>&1\n        eend $?\n}\n\nstop() {\n        ebegin \"Turning off forwarding for bridge interface\"\n        sysctl net.ipv4.conf.br0.forwarding=0 > /dev/null 2>&1\n        sysctl net.ipv4.ip_forward=0 > /dev/null 2>&1\n        eend $?\n}\n\n\u3044\u308d\u3044\u308d\u3068\u3084\u308b\u3002\n% sudo ln -s net.lo /etc/init.d/net.br0\n% sudo brctl addbr br0\n% sudo rc-service net.br0 start\n% sudo rc-update add net.br0 default\n% sudo chmod +x /etc/init.d/bridge_forward\n% sudo rc-service bridge_forward start\n% sudo rc-update add bridge_forward default\n% sudo iptables -t nat -A POSTROUTING -o enp2s0 -j MASQUERADE\n\n\nDHCP\u30b5\u30fc\u30d0\u3092\u8a2d\u5b9a\u3059\u308b\nDHCP\u30b5\u30fc\u30d0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n% sudo emerge -av dhcp\n\n\u8a2d\u5b9a\u3059\u308b\u3002\u30db\u30b9\u30c8\u306e\u74b0\u5883\u3067\u4f7f\u3063\u3066\u3044\u308bDNS\u30b5\u30fc\u30d0\u3092\u8abf\u3079\u308b\u3002\n% cat /etc/resolv.conf\nnameserver 123.456.789.123\nnameserver 987.654.321.987\n\n\u7d50\u679c\u306f\u305d\u308c\u305e\u308c\u7570\u306a\u308b\u3002\n% sudoedit /etc/dhcp/dhcp.conf\nsubnet 192.168.100.0 netmask 255.255.255.0 {\n        option routers 192.168.100.254;\n        range 192.168.100.100 192.168.100.199;\n}\n\noption domain-name-servers 123.456.789.123;\n\n123.456.789.123\u306f\u5b9f\u969b\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\nDHCP\u30b5\u30fc\u30d0\u3092\u8d70\u3089\u305b\u308b\u3002\n% sudo rc-service dhcpd start\n% sudo rc-update add dhcpd default\n\n\nKVM\u3092\u5c0e\u5165\u3059\u308b\n% emerge -pv qemu\n\n\u3044\u304f\u3064\u304b\u306e\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n% sudoedit /etc/portage/make.conf\nUSE=\"... \\\n        ... \\\n        clang xft virtfs\"\n...\nQEMU_USER_TARGETS=\"x86_64\"\n\nqemu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n% sudo emerge -av qemu\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306eup\u3068down\u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\n% vim qemu-ifup\n#!/bin/sh\nsudo ifconfig $1 up\nsudo brctl addif br0 $1\n% vim qemu-ifdown\nsudo brctl delif br0 $1\nsudo ifconfig $1 down\n% chmod +x qemu-ifup qemu-ifdown\n\nVNC\u30d3\u30e5\u30fc\u30ef\u30fc\u3092\u5c0e\u5165\u3059\u308b\u3002\n% sudo emerge -av ssvnc\n\nCD-R\u304b\u3089\u306e\u30d6\u30fc\u30c8\u3092\u8a66\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u3092CD\u30c9\u30e9\u30a4\u30d6\u306b\u633f\u5165\u3057\u3066\u304b\u3089\u3001\u3064\u304e\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n% sudo qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot d -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=qemu-ifup,downscript=qemu-ifdown -vnc :0 -monitor stdio -vga cirrus\n\n\u5225\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304b\u3089\n% ssvncviewer 127.0.0.1:5900\n\n\u6b21\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u305f\u3089Enter\u30ad\u30fc\u3092\u62bc\u3059\u3002\nboot:\n\n\u3057\u3070\u3089\u304f\u3057\u3066\u3001\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u3001ping\u3092\u8a66\u305d\u3046\u3002\n# ping some.address.com (ping\u3092\u8a31\u53ef\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9) -c 3\n\n\u3053\u308c\u3067ping\u304c\u901a\u308c\u3070\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u306f\u6210\u529f\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3060\u3002\n\n\u4e00\u5ea6\u3001halt\u3057\u3001\u518d\u8d77\u52d5\u3057\u3066\u3001\u554f\u984c\u306a\u304f\u52d5\u304f\u304b\u78ba\u8a8d\u3059\u308b\n% exit\n% exit\n\nfirefox\u306fZZ\u3067\u7d42\u4e86\u3002Alt + Shift + q\u3067X\u3092\u306c\u3051\u308b\u3002\n% sudo reboot\n\n\u518d\u5e30\u52d5\u3057\u305f\u3089\u3001\n% sudo ln -s net.lo /etc/init.d/net.enp2s0\n% sudo rc-service net.enp2s0 start\n% sudo rc-update add net.enp2s0 default\n% sudo iptables -t nat -A POSTROUTING -o enp2s0 -j MASQUERADE\n% sudo qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot d -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=qemu-ifup,downscript=qemu-ifdown -vnc :0 -monitor stdio -vga cirrus\n% ssvncviewer 127.0.0.1:5900\n\n\u3067\u3001\u7acb\u3061\u4e0a\u3052\u3066ping\u3092\u8a66\u3059\u3002\n\nqemu\u3092\u7acb\u3061\u4e0a\u3052\u308b\u305f\u3081\u306e\u6a29\u9650\u3092\u8a2d\u5b9a\n% sudo vigr\n(\u4f7f\u7528\u3057\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306bkvm, cdrom\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3059\u308b)\n\n\u4e00\u5ea6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3002\n% groups\n\n% sudo emerge -av usermode-utilities\n% sudo tunctl -u yoshio\n\n% qemu-system-x86_64 ..\n% ssvncviewer 127.0.0.1:5900\n\n\n\u8d77\u52d5\u6642\u306b\u3001\u3044\u304f\u3064\u304b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\n% sudoedit /etc/local.d/masquerade.start\niptables -t nat -A POSTROUTING -o enp2s0 -j MASQUERADE\n% sudo chmod +x /etc/local.d/masquerade.start\n% sudoedit /etc/local.d/tunctl.start\ntunctl -u yoshio\n% sudo chmod +x /etc/local.d/tunctl.start\n\n\u518d\u8d77\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u3092\u8a66\u3059\u3002\n% qemu-system-x86_64 ...\n% ssvncviewer 127.0.0.1:5900\n\n\n\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3001qemu\u306b\u308f\u305f\u3059\n% qemu-img create -f qcow2 gentoo.img 100G\n% qemu-system-x86_64 ... -hda gentoo.img\n\n\n\u30b2\u30b9\u30c8OS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u7528\u610f\n% parted /dev/sda\n(parted) mklabel gpt\n(parted) unit mib\n(parted) print\n(parted) mkpart grub 1 3\n(parted) set 1 bios_grub on\n(parted) mkpart boot 3 1000\n(parted) set 2 boot on\n(parted) mkpart swap 1000 7000\n(parted) mkpart rootfs 7000 -1\n(parted) print\n\n\nSwap\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\n# mkswap /dev/sda3\n# swapon /dev/sda3\n# free -h\n\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u4f5c\u6210\u3068\u30de\u30a6\u30f3\u30c8\n# mkfs.ext4 /dev/sda2\n# mkfs.ext4 /dev/sda4\n# mount /dev/sda4 /mnt/gentoo/\n# mkdir /mnt/gentoo/boot\n# mount /dev/sda2 /mnt/gentoo/boot\n# ls /mnt/gentoo\n# ls /mnt/gentoo/boot\n\n\n\u65e5\u4ed8\u3051\u3068\u6642\u523b\u306e\u78ba\u8a8d\n# date\n# rc-service ntp-client start\n# date\n\n# hwclock\n# hwclock --systohc\n# hwclock\n\n\nStage3\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3059\u308b\u3002\n# cd /mnt/gentoo/\n\n\u3064\u304e\u306e\u3088\u3046\u306bGentoo\u306e\u30df\u30e9\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n# links https://www.gentoo.org/downloads/mirrors/#JP\n\n\u3053\u3053\u304b\u3089\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u3092\u9078\u3073\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u305f\u3069\u308b\u3002\n\nreleases\namd64\nautobuilds\ncurrent-stage3-amd64\n\n\u3064\u304e\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\nstage3-amd64-201XXXXX.tar.bz2\n\n\u89e3\u51cd\u3057\u3066\u8a2d\u7f6e\u3059\u308b\u3002\n# tar xvjpf stage3-amd64-201XXXXX.tar.bz2 --xattrs\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n# vi /mnt/gentoo/etc/portage/make.conf\nCFLAGS=\"-march=native -O2 -pipe\"\n...\nMAKEOPTS=\"-j2\"\n\n\n\u65b0\u3057\u3044\u30b7\u30b9\u30c6\u30e0\u306b\u5165\u308b\n# cp -L /etc/resolv.conf /mnt/gentoo/etc/\n# mount -t proc proc /mnt/gentoo/proc\n# mount --rbind /sys /mnt/gentoo/sys\n# mount --make-rslave /mnt/gentoo/sys\n# mount --rbind /dev /mnt/gentoo/dev\n# mount --make-rslave /mnt/gentoo/dev\n# chroot /mnt/gentoo/ /bin/bash\n# source /etc/profile\n# export PS1=\"(chroot) $PS1\"\n\n\nPortage\u6728\u306e\u53d6\u5f97\n# emerge-webrsync\n# emerge --sync\n# eselect profile list\n# eselect profile set 3\n\n\nUSE\u30d5\u30e9\u30b0\u306e\u8a2d\u5b9a\u306a\u3069\nTmux\u3068Vim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n# emerge -av tmux\n# emerge -pv vim\n# USE=\"-X\" emerge -av vim\n\nCPU\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n# emerge -av cpuid2cpuflags\n# cpuinfo2cpuflags-x86\n# cpuinfo2cpuflags-x86 >> /etc/portage/make.conf\n\nUSE\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n# vim /etc/portage/make.conf\nUSE=\"bindist \\\n        nsplugin xft vim-syntax cjk m17n-lib nls unicode git postgres \\\n        zsh-complition\"\n\n\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3068\u30ed\u30b1\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n# date\n# echo \"Japan\" > /etc/timezone\n# emerge --config sys-libs/timezone-data\n# date\n\n# vim /etc/locale.gen\nja_JP.UTF-8 UTF-8\n# locale-gen\n# eselect locale list\n# eselect locale set 3\n\n\n\u30ab\u30fc\u30cd\u30eb\u3092\u4f5c\u6210\u3059\u308b\n# emerge -av gentoo-sources\n# emerge -av pciutils\n# cd /usr/src/linux\n# make menuconfig\n\n\u4e00\u5ea6\u3001\u4fdd\u5b58\u7d42\u4e86\u3059\u308b\u3002\n# lspci -k | grep -A 2 -i ethernet\n...\n        Kernel driver in use: e1000\n# grep -i e1000 .config\nCONFIG_E1000=y\n\nProcessor family\u306f\u3001\u3068\u308a\u3042\u3048\u305a\u30c7\u30d5\u30a9\u30eb\u30c8\u306eGeneric-x86-64\u3068\u3057\u3066\u304a\u304f\u3002\u3053\u3053\u306f\u3001\u305d\u306e\u3046\u3061\u306b\u3001\u3061\u3083\u3093\u3068\u8abf\u3079\u305f\u3044\u3002\n# make menuconfig\n[*] Networking support --->\n        <*> Plan 9 Resource Sharing Support (9P2000) --->\n# grep -i p9 . config\nCONFIG_NET_9P=y\n# make menuconfig\nFile system --->\n        [*] Network File Systems --->\n                <*> Plan 9 Resource Sharing Support (9P2000)\n                        [*] 9P POSIX Access Control Lists\nDevice Drivers --->\n        [*] Virtualization drivers\n                Virtio drivers --->\n                        <*> PCI driver for virtio devices\n                                [*] Support for legacy virtio draft 0.9.X and older devices\n[*] Networking support --->\n        <*> Plan 9 Resource Sharing Support (9P2000) --->\n                <*> 9P Virtio Transport\n# grep -i 9p .config\nCONFIG_NET_9P=y\nCONFIG_NET_9P_VIRTIO=y\nCONFIG_9P_FS=y\nCONFIG_9P_FS_POSIX_ACL=y\n\n\u30d3\u30eb\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n# make && make modules_install\n# make install\n\ninitramfs\u3092\u4f5c\u6210\u3059\u308b\u3002\n# emerge -av genkernel\n# ls /boot\n# genkernel --install initramfs\n# ls /boot\n\n\nfstab\u3092\u4f5c\u6210\u3059\u308b\n# e2label /dev/sda2 boot\n# e2label /dev/sda4 root\n# e2label /dev/sda2\nboot\n# e2label /dev/sda4\nroot\n# swapoff /dev/sda3\n# mkswap -L swap /dev/sda3\n# swapon LABEL=swap\n# free -h\n# vim /etc/fstab\nLABEL=boot        /boot       ext4    noauto,noatime  1 2\nLABEL=root        /           ext4      noatime         0 1\nLABEL=swap        none        swap      sw              0 0\n/dev/cdrom        /mnt/cdrom  auto      noauto,ro       0 0\n\n\n\u30db\u30b9\u30c8\u540d\u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b\n# vim /etc/conf.d/hostname\nhostname=\"gentoo_2017\"\n# vim /etc/conf.d/net\ndns_domain_lo=\"local.hogehoge.jp\"\n# vim /etc/hosts\n127.0.0.1    gentoo_2017 gentoo_2017.local.iocikun.jp localhost\n::1          gentoo_2017 gentoo_2017.local.iocikun.jp localhost\n\n\n\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\n# passwd\n\n\n\u30b7\u30b9\u30c6\u30e0\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\n# emerge -av metalog\n# rc-update add metalog default\n\n# emerge -av fcron\n# rc-update add fcron default\n# crontab /etc/crontab\n\n# emerge -av mlocate\n# emerge -av dhcpcd\n\n\n\u30d6\u30fc\u30c8\u30ed\u30fc\u30c0\u3092\u5c0e\u5165\n# emerge -av grub\n# grub-install /dev/sda\n# grub-mkconfig -o /boot/grub/grub.cfg\n\n\n\u518d\u8d77\u52d5\u3059\u308b\n# exit\n# exit\n# halt\n\n\u30b2\u30b9\u30c8\u5074\u3067\n\u30d1\u30b9\u30ef\u30fc\u30c9: ****\n# qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot c -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=qemu-ifup,downscript=qemu-ifdown -vnc :0 -monitor stdio -vga cirrus -fsdev local,id=hoge,path=/home/tatsuya/hoge,security_model=mappend -device virtio-9p-pci,fsdev=hoge,mount_tag=v_hoge -hda gentoo.img\n\n\n\u30ed\u30fc\u30ab\u30e9\u30a4\u30ba\u306e\u305f\u3081\u306e\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\n# vim /etc/portage/make.conf\nLINGUAS=\"ja\"\nL10N=\"ja\"\n\n...\n\nvirtfs\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5171\u6709\u304c\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u8a66\u3059\n# mkdir /mnt/free\n# chmod 0700 /mnt/free\n# mount -t 9p -o trans=virtio v_hoge /mnt/free\n# touch /mnt/free/hogera\n\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u6697\u53f7\u5316\u3068\u3001\u305d\u306e\u30de\u30a6\u30f3\u30c8\n\u3055\u304d\u306b\u3001\u307e\u3061\u304c\u3048\u3066\u6d88\u3055\u306a\u3044\u3088\u3046\u306bgentoo.img\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u304a\u3053\u3046\u3002\u540c\u3058\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u5185\u306a\u306e\u3067\u3001\u6545\u969c\u306a\u3069\u3078\u306e\u9632\u5fa1\u306b\u306f\u306a\u3089\u306a\u3044\u304c\u3001\u30b1\u30a2\u30ec\u30b9\u30df\u30b9\u3078\u306e\u9632\u5fa1\u306b\u306f\u306a\u308b\u3002\u5b9f\u306f\u3001\u30ea\u30b9\u30af\u3068\u3057\u3066\u306f\u3001\u3053\u308c\u304c\u4e00\u756a\u5927\u304d\u3044\u3002\n\u307e\u305a\u306fLVM\u4e0a\u306e\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u62e1\u5927\u3059\u308b\u3002\n% sudo lvextend -L +10G /dev/mapper/vg-home\n% sudo resize2fs /dev/mapper/vg-home\n\n\u30b3\u30d4\u30fc\u3057\u3066\u304a\u3053\u3046\u3002\n% mkdir backup\n% cp gentoo.img backup/\n% md5sum gentoo.img\nc7c1a7f36d027db6a8982ee453e27131 gentoo.img\n% md5sum backup/gentoo.img\nc7c1a7f36d027db6a8982ee453e27131 backup/gentoo.img\n\n\nntfs\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n% zcat /proc/config.gz | grep -i ntfs\n# CONFIG_NTFS_FS is not set\n% sudo make menuconfig\nFile systems --->\n        DOS/FAT/NT Filesystems --->\n                <*> NTFS file system support\n                        [*] NTFS write support\n% sudo mount /boot\n% sudo make && sudo make modules_install\n% sudo make install\n% exit\n% exit\n\nX\u3092\u843d\u3068\u3057\u3066\u3001\u518d\u8d77\u52d5\u3059\u308b\u3002\n% zcat /proc/config.gz | grep -i ntfs\nCONFIG_NTFS_FS=y\n# CONFIG_NTFS_DEBUG is not set\nCONFIG_NTFS_RW=y\n% sudo mount /dev/sdb1 /mnt/free\n\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092\u6697\u53f7\u5316\u3057\u305f\u30c7\u30a3\u30b9\u30af\u306b\u30b3\u30d4\u30fc\u3059\u308b\n\ncryptsetup\u3068parted\u3092\u5c0e\u5165\u3059\u308b\n% sudo emerge -av cryptsetup\n% sudo emerge -av parted\n\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u5207\u308b\n% sudo parted /dev/sdb\n(parted) mklabel gpt\n(parted) unit gb\n(parted) mkpart pass1 1 250\n(parted) mkpart pass2 250 -1\n(parted) print\n(parted) quit\n\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\n% zcat /proc/config.gz | grep -i dm_crypt\n# CONFIG_DM_CRYPT is not set\n% cd /usr/src/linux\n% sudo make menuconfig\nDevice Drivers --->\n        [*] Multiple device driver support (RAID and LVM) --->\n                <*> Crypt target support\nCryptgraphic API --->\n        <*> XTS support\n% sudo mount /boot\n% sudo make && sudo make modules_install\n% sudo make install\n% exit\n% exit\n\n\u518d\u8d77\u52d5\u3059\u308b\u3002\n% zcat /proc/config.gz | grep -i dm_crypt\nCONFIG_DM_CRYPT=y\n% sudo cryptsetup luksFormat /dev/sdb1\n% sudo cryptsetup luksOpen /dev/sdb1 pass1\n% sudo mkfs.ext4 /dev/mapper/pass1\n% sudo mount /dev/mapper/pass1 /mnt/free\n% ls /mnt/free\nlost+found\n% sudo e2label /dev/mapper/pass1 pass1\n% sudo e2label /dev/mapper/pass1\n% sudoedit /etc/fstab\nLABEL=pass1    /mnt/pass1    ext4     noauto,noatime 0 2\n% sudo umount /mnt/free\n% sudo mkdir /mnt/pass1\n% sudo chmod 0700 /mnt/pass1\n% sudo mount /mnt/pass1\n% sudo mkdir /mnt/pass1/tatsuya\n% sudo chown tatsuya:tatsuya /mnt/pass1/tatsuya\n% ln -s /mnt/pass1/tatsuya pass1\n% mkdir pass1/guests\n% cp gentoo.img pass1/guests\n\n\n\u30db\u30b9\u30c8OS\u5074\u3092\u3059\u3053\u3057\u6574\u3048\u308b\n% sudo cp qemu-ifup /etc\n% sudo cp qemu-ifdown /etc\n\n\u30b2\u30b9\u30c8OS\u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n% qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot c -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown -vnc :0 -monitor stdio -vga cirrus -fsdev local,id=hoge,path=/home/tatsuya/hoge,security_model=mapped -device virtio-9p-pci,fsdev=hoge,mount_tag=v_hoge -hda ~/pass1/guests/gentoo.img\n\n% qemu-system-x86_64 ...(\u4e0a\u306e\u30b3\u30de\u30f3\u30c9\u306ehoge\u3092pass1\u306b\u7f6e\u304d\u63db\u3048\u308b)\n% echo 'qemu-system-x86_64 ...' > ~/pass1/guests/run_gentoo.sh\n% chmod +x ~/pass1/guests/run_gentoo.sh\n% vim ~/pass1/guests/run_gentoo.sh\n(\u5148\u982d\u306b#!/bin/sh\u3092\u8ffd\u52a0)\n\n\n\u30b2\u30b9\u30c8OS\u306e\u74b0\u5883\u3092\u6574\u3048\u308b\n% ~/pass1/guets/run_gentoo.sh\n% ssvnc 127.0.0.1:5900 -scale 1.1\n(root\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30b2\u30b9\u30c8OS\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b)\n# tmux\n\n\n\u30cf\u30a4\u30d0\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n# blkid /dev/sda3\n# vim /etc/default/grub\nGRUB_CMDLINE_LINUX_DEFAULT=\"resume=/dev/sda3\"\n# mount /boot\n# grub-mkconfig -o /boot/grub/grub.cfg\n# echo disk > /sys/power/state\n\n\u3053\u308c\u3067\u30b2\u30b9\u30c8OS\u304c\u7d42\u4e86\u3059\u308b\u3002\u30db\u30b9\u30c8OS\u304b\u3089\n% ~/pass1/guests/run_gentoo.sh\n% ssvnc 127.0.0.1:5900 -scale 1.1\n\n\u4e2d\u65ad\u3057\u305f\u3068\u3053\u308d\u306b\u5fa9\u5e30\u3059\u308b\u3002\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3068sudo\u306e\u5c0e\u5165\n# useradd -m -G users,portage,wheel -s /bin/bash yoshio\n# passwd yoshio\n\n\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3002\n$ tmux\n$ su\n# emerge -av sudo\n# eselect editor list\n# eselect editor set 3\n# . /etc/profile\n# visudo\n%wheel ALL=(ALL) ALL\n# exit\n$ sudo echo hoge\nhoge\n\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u3067\u306e\u30cf\u30a4\u30d0\u30cd\u30fc\u30c8\n$ echo disk | sudo tee /sys/power/state\n$ . /etc/profile\n$ sudoedit /usr/local/bin/hibernate\n#!/bin/sh\necho disk | sudo tee /sys/power/state\n$ sudo chmod +x ls /usr/local/bin/hibernate\n$ hibernate\n\n\nZsh\u306e\u5c0e\u5165\n$ sudo emerge -av zsh\n$ sudo vipw\n(\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306ebash\u3092zsh\u306b)\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3068\u3001zsh\u306e\u8a2d\u5b9a\u30c4\u30fc\u30eb\u304c\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u5c65\u6b74\u306e\u4fdd\u5b58\u30921,000,000\u306b\u3057\u3066\u3001\u88dc\u5b8c\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3057\u3001vi\u6d41\u306e\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u306b\u3057\u3066\u3001\u62e1\u5f35\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3068\u80cc\u666f\u30b8\u30e7\u30d6\u306e\u7d42\u4e86\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u306e\u901a\u77e5\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n% vim .zshrc\nsetopt share_history\n\n\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n% vim .zshrc\nPROMPT=\"%{^[[;32;1m%}[%D{%H:%M}] %#%{^[[m%} \"\nPROMPT2=\"%_> \"\nRPROMPT=\"[%40<...<%~]\"\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3002\n\nTmux\u306e\u8a2d\u5b9a\n% vim ~/.tmux.conf\nset-window-option -g mode-keys vi\n\nbind-key j resize-pane -D\nbind-key k resize-pane -U\nbind-key J resize-pane -D 8\nbind-key K resize-pane -U 8\nbind-key O select-pane -U\n% tmux\n\n\nX\u3092\u5c0e\u5165\u3059\u308b\nXorg\u3092\u5c0e\u5165\u3059\u308b\u3002\n% sudoedit /etc/portage/make.conf\nUSE=\"... \\\n        ... \\\n        zsh-completion clang llvm\"\n...\nINPUT_DEVICES=\"evdev\"\nVIDEO_CARDS=\"cirrus\"\n% sudo emerge -av xorg-server twm xterm xclock\n% exit\n% exit\n% startx\n\n\n\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n% sudo emerge -avu --deep @system\n% sudo emerge -avu --deep --newuse @system\n% sudo emerge -avu --deep --newuse @world\n% sudo emerge -av --depclean\n% sudo emerge --sync\n% sudo emerge -avu --deep --newuse @system\n% sudo emerge -avu --deep --newuse @world\n\n\nXmonad\u306e\u5c0e\u5165\n\u3055\u304d\u306b\u30db\u30b9\u30c8\u5074\u306e\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u3092\u5909\u66f4\u3057\u3066\u304a\u304f\u3002\u307e\u305a\u306fxmodmap\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5c0e\u5165\u3059\u308b\u3002\n% sudo emerge -av xmodmap\n\n\u3044\u304f\u3064\u304b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210/\u7de8\u96c6\u3059\u308b\u3002\n% vim .Xmodmap\nkeycode 102 = Meta_L\nkeycode 100 = Meta_R\n\nremove mod1 = Meta_L\nremove mod1 = Alt_L\nremove mod1 = Alt_R\n\nadd mod3 = Meta_R\nadd mod3 = Meta_L\nremove mod3 = Alt_L\nremove mod3 = Alt_R\nadd mod1 = Alt_L\nadd mod1 = Alt_R\n% vim .xmonad/xmonad.hs\n...\nxmonad defaultConfig {\n        ...\n        modMask    = mod3Mask\n        }\n% vim .xinitrc\nexport XMODIFIERS=\"@im=uim\"\nuim-xim --engine=tutcode &\nxmodmap .Xmodmap\nexec xmonad\n\n\u30b2\u30b9\u30c8\u3092\u4e2d\u65ad\u3059\u308b\u3002\n% hibernate\n\nX\u3092\u843d\u3068\u3057\u3066\u3001\u307e\u305f\u5165\u308a\u306a\u304a\u3059\u3002Alt\u3067\u306f\u306a\u304fCmd\u3067Xmonad\u4e0a\u306e\u3044\u308d\u3044\u308d\u306a\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\u30b2\u30b9\u30c8\u5074\u306b\u3082\u3069\u308b\u3002\u30db\u30b9\u30c8\u5074\u3067\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n% ~/pass1/guests/run_gentoo.sh\n% ssvncviewer 127.0.0.1:5900 -scale 1.1\n\n\u30b2\u30b9\u30c8\u3067xmonad\u3092\u5c0e\u5165\u3059\u308b\u3002\n% sudo emerge -av xmonad\n% vim .xinitrc\nexec xmonad\n% exit\n% exit\n% startx\n\nAlt + Shift + Enter\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3002\n% exit\n\nAlt + Shift + q\u3067X\u3092\u843d\u3068\u3059\u3002\n% emerge -pv rxvt-unicode\n% sudoedit /etc/portage/package.use/rxvt-unicode\nx11-terms/rxvt-unicode -vanilla 256-color unicode3 wcwidth\n% sudo emerge -av rxvt-unicode\n% vim .Xdefaults\nurxvt*background: black\nurxvt*foreground: snow\nurxvt*color12: #7799FF\n\nurxvt*saveLines: 0\n% vim .zshrc\n...\nalias ls='ls --color=auto'\nalias grep='grep --color=auto'\n% vim .xmonad/xmonad.hs\nimport XMonad\n\nmain :: IO ()\nmain = do\n        xmonad defaultConfig {\n                terminal        = \"urxvt\"\n                }\n% startx\n\n\nfirefox\u306e\u5c0e\u5165\n% emerge -pv firefox\n% sudoedit /etc/portage/package.use/python\ndev-lang/python sqlite\n% sudo emerge -av firefox\n\n\n\u554f\u984c\u767a\u751f\u3001virtfs\u306f\u30b7\u30e0\u30ea\u30f3\u30af\u3092\u6307\u5b9a\u3059\u308b\u3068\u30c0\u30e1?\n\u30b2\u30b9\u30c8\u3067\u3064\u304e\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u305f\u3068\u3053\u308d\u3001\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u304b\u3048\u3063\u3066\u3053\u306a\u304f\u306a\u3063\u305f\u3002\n% sudo mount -t 9p -o trans=virtio v_pass1 /mnt/free\n\n\u3069\u3046\u3084\u3089\u3001virtfs\u3067\u306f\u30b7\u30e0\u30ea\u30f3\u30af\u3092\u6307\u5b9a\u3057\u3066\u306f\u30c0\u30e1\u306a\u3088\u3046\u3060\u3002run_gentoo.sh\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\u30db\u30b9\u30c8\u3067\u3001\n% vim ~/pass1/guests/run_gentoo.sh\nqemu-system-x86_64 ...\n(/home/tatsuya/pass1\u306e\u3068\u3053\u308d\u3092/mnt/pass1/tatsuya\u3068\u3059\u308b)\n\n\u30b2\u30b9\u30c8OS\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u3001\u518d\u5ea6\u7acb\u3061\u4e0a\u3052\u308b\u3002\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\n% sudo mount -t 9p -o trans=virtio v_pass /mnt/free\n% ls /mnt/free\n\n\n\u65e5\u672c\u8a9e\u5165\u529b\n% sudo emerge -av uim\n% vim .xinitrc\nexport XMODIFIERS=\"@im=uim\"\nuim-xim --engine=tutcode &\nexec xmonad\n% uim-pref-gtk\n\nTUT-code\u306evi\u5354\u8abf\u30e2\u30fc\u30c9\u3001\u5165\u529b\u30e2\u30fc\u30c9\u3092\u30ab\u30fc\u30bd\u30eb\u306e\u8fd1\u304f\u306b\u8868\u793a\u3059\u308b\u306a\u3069\u3002\n\u30db\u30b9\u30c8\u5074\u3067\n% mkdir pass1/tmp\n% cp .mazegaki.dic pass1/tmp/\n\n\u30b2\u30b9\u30c8\u5074\u3067\n% cp ~/pass1/tmp/.mazegaki.dic ~/\n\n\u4e00\u5ea6X\u3092\u306c\u3051\u3066\u518d\u5ea6\u5165\u308b\u3002\n% startx\n\nShift + Space\u3067\u65e5\u672c\u8a9e\u5165\u529b\u3001\u6f22\u5b57\u5165\u529b\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\nvimperator\u3092\u5c0e\u5165\n% firefox\n\nvimperator\u3067\u691c\u7d22\u3057\u30a2\u30c9\u30aa\u30f3\u3092\u5165\u308c\u308b\u3002\n% vim .vimperatorrc\n(\u3042\u3068\u3067\u66f8\u304f)\n\n\ndmenu\u3092\u5c0e\u5165\n% sudo emerge -av dmenu\n\n\nxmobar\u3092\u5c0e\u5165\u3059\u308b\n% sudo emerge -av xmobar\n\n\n\u554f\u984c\u767a\u751f\u3002virtfs?\nvirtfs\u3067\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30d5\u30ea\u30fc\u30ba\u3057\u305f\u3002\nsecurity=mapped\u3092none\u306b\u3057\u3066\u8a66\u3057\u3066\u307f\u3088\u3046\u304b?\n% vim ~/pass1/guests/run_gentoo.sh\n(mapped\u3092none\u306b\u3057\u305f)\n\n\nhibernate\u3092\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3057\u3067\n% sudo visudo\nyoshio ALL=(ALL) NOPASSWD: /usr/local/bin/hibernate\n\n\nxmobar\u3092\u5c0e\u5165(\u7d9a\u304d)\n\u30db\u30b9\u30c8\u3067\n% cp ~/.xmobarrc ~/pass1/tmp/\n\n\u30b2\u30b9\u30c8\u3067\n% sudo emerge -av xmonad-contrib\n% vim .xmonad/xmonad.hs\nimport XMonad\nimport XMonad.Util.Run (spawnPipe, hPutStrLn)\nimport XMonad.Hooks.DynamicLog (dynamicLogWithPP, defaultPP, ppOutput)\n\nimport XMonad.Hooks.ManageDocks (avoidStruts)\nimport XMonad.Layout.NoBorders (smartBorders)\n\nimport Control.Concurrent\n\nmyLayout = avoidStruts (tiled ||| Mirror tiled ||| Full) ||| Full\n        where tiled = Tall 1 (3 / 100) (1 / 2)\n\nmain :: IO ()\nmain = do\n        h <- spawnPipe \"xmobar\"\n        threadDelay 500000\n        xmonad defaultConfig {\n                terminal        = \"urxvt\"\n                layouthook      = smartBorders myLayout,\n                logHook         = dynamicLogWithPP { ppOutput = hPutStrLn h }\n                }\n\n\nMutt\u306e\u5c0e\u5165\u3068\u8a2d\u5b9a\n\u307e\u305a\u306f\u3001\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u5834\u6240\u3092\u6c7a\u3081\u308b\u3002\n% sudoedit /etc/fstab\nv_pass1    /home/yoshio/pass1    9p    trans=virtio    0 0\n% sudo umount /mnt/free\n% sudo mount /home/yoshio/pass1\n\n\u4e00\u5ea6\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u7acb\u3061\u4e0a\u3052\u306a\u304a\u3057\u3066\u3001\u81ea\u52d5\u3067\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n% sudoedit /etc/portage/package.use/mutt\nmail-client/mutt gpg imap mbox smtp\n% sudo emerge -av mutt\n% sudoedit /etc/portage/package.use/procmail\nmail-filter/procmail mbox\n% sudo emerge -av fetchmail msmtp procmail\n\n% vim ~/.fetchmailrc\n(\u3042\u3068\u3067\u66f8\u304f)\n% fetchmail -akv -m \"/usr/bin/procmail -d %T\"\n% vim .procmailrc\n(\u3042\u3068\u3067\u66f8\u304f)\n% fetchmail -akv -m \"/usr/bin/procmail -d %T\"\n% vim ~/.muttrc\n(\u3042\u3068\u3067\u66f8\u304f)\n% sudo emerge -av w3m\n% vim ~/.mailcap\n(\u3042\u3068\u3067\u66f8\u304f)\n\n\n\u53e4\u3044\u30e1\u30fc\u30eb\u306a\u3069\u3092\u53d6\u308a\u8fbc\u3080\nbackup\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002\u30db\u30b9\u30c8\u3067\n% mkdir backup\n% mkdir backup/git\n% vim pass1/guests/run_gentoo.sh\n(\u3042\u3068\u3067\u66f8\u304f)\n\n\u30b2\u30b9\u30c8\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n% sudoedit /etc/fstab\n(\u3042\u3068\u3067\u66f8\u304f)\n% sudoedit ~/.msmtprc\n(\u3042\u3068\u3067\u66f8\u304f)\n\n% sudo emerge -av urlview\n\n\nSSH\u306e\u8a2d\u5b9a\n% cp .../id_rsa ~/.ssh/\n% cp .../id_rsa.pub ~/.ssh/\n\n\nfirefox\u3067PDF\u3092\u8868\u793a\u3059\u308b\n\u3068\u304f\u306b\u4f55\u3082\u3059\u308b\u5fc5\u8981\u3082\u306a\u304b\u3063\u305f\u3002\n\nfirefox\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5909\u66f4\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\"\u304b\u3089\"download\"\u306b\u3059\u308b\u3002\n\nHaskell\u306eStack\u3092\u5c0e\u5165\u3059\u308b\n% sudoedit /etc/portage/package.use/ncurses\nsys-libs/ncurses tinfo\n% sudo emerge -av ncurses\n% curl -sSL https://get.haskellstack.org/ | sh\n% vim ~/.zshrc\n...\npath=($HOME/.local/bin(N-/) $path)\n% stack setup\n\n\nyesod\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n% cd\n% mkdir yesod\n% cd yesod\n% stack new testProject yesod-simple\n% cd testProject\n% stack install yesod-bin cabal-install --install-ghc\n% stack build\n% stack exec -- yesod devel\n\n\u30d6\u30e9\u30a6\u30b6\u3067http://localhost:3000 \u306b\u63a5\u7d9a\u3059\u308b\u3068Yesod\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30da\u30fc\u30b8\u304c\u898b\u3089\u308c\u308b\u3002\n\nketer\u306b\u307e\u3068\u3081\u308b\n% vi config/keter.yml\nuser-edited: true\n...\nhosts:\n  ...\n  - www.hogehoge.jp\n...\n# Static files.\n- type: static-files\n  hosts:\n    - www.hogehoge.jp\n\n% stack exec -- yesod keter\n\n!!\u3053\u3053\u307e\u3067\u3084\u3063\u305f!!\n\n\u3055\u304f\u3089\u306eVPS\u3067keter\u3067\u307e\u3068\u3081\u305fWeb\u30a2\u30d7\u30ea\u3092\u516c\u958b\u3057\u3066\u307f\u308b\nGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001Xmonad\u3067GUI\u74b0\u5883\u3092\u6574\u3048\u308b\n=============================================\n\n\u306f\u3058\u3081\u306b\n-------\n\n\u3053\u306e\u8a18\u4e8b\u306f\u672a\u5b8c\u3067\u3059\u3002\u81ea\u5206\u7528\u306e\u30e1\u30e2\u3067\u3059\u3002\u50d5\u306e\u500b\u4eba\u7684\u306a\u74b0\u5883\u3067\u306e\u4f5c\u696d\u4f8b\u3067\u3059\u3002\u73fe\u5728\u306fKVM\u4e0a\u306e\u30b2\u30b9\u30c8OS\u306e\u74b0\u5883\u3092\u8abf\u6574\u4e2d\u3067\u3059\u3002\n\n\u3086\u304f\u3086\u304f\u306f\u3001\u3082\u3063\u3068\u7d30\u304b\u306b\u5185\u5bb9\u306b\u308f\u3051\u3066\u3001\u305d\u308c\u305e\u308c\u72ec\u7acb\u3057\u305f\u8a18\u4e8b\u306b\u3059\u308b\u4e88\u5b9a\u3067\u3059\u3002\n\n\u4f55\u3092\u3059\u308b\u304b\n---------\n\n\u9577\u5e74\u3001Gentoo\u3092\u4f7f\u3063\u3066\u304d\u3066\u3001\u3069\u306e\u3088\u3046\u306a\u74b0\u5883\u306b\u3059\u308b\u306e\u304b\u304c\u3001\u307b\u307c\u3001\u304b\u305f\u307e\u3063\u3066\u304d\u305f\u3002\u305d\u306e\u300c\u81ea\u5206\u7528\u306e\u74b0\u5883\u300d\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u3001\u3084\u308a\u304b\u305f\u3092\u3053\u3053\u306b\u30e1\u30e2\u3059\u308b\u3002\n\n\u3053\u306e\u8a18\u4e8b\u306e\u66f8\u304d\u304b\u305f\n----------------\n\nGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u74b0\u5883\u3092\u6574\u3048\u308b\u3068\u3044\u3046\u4f5c\u696d\u3092\u4f55\u5ea6\u3082\u304f\u308a\u304b\u3048\u3057\u3066\u304d\u305f\u3002\u305d\u3053\u3067\u3001\u3060\u3044\u305f\u3044\u3001\u3069\u306e\u3088\u3046\u306b\u3059\u308b\u304b\u306f\u899a\u3048\u3066\u3044\u308b\u3002\u305f\u3060\u3057\u7d30\u90e8\u306f\u5fd8\u308c\u3066\u3044\u308b\u3002\u305d\u3053\u3067\u3001\u307e\u305a\u306f\u4f5c\u696d\u306e\u524d\u306b\u3001\u3060\u3044\u305f\u3044\u306e\u6d41\u308c\u3092\u66f8\u304f\u3002\u305d\u3057\u3066\u3001\u4f5c\u696d\u3057\u306a\u304c\u3089\u7d30\u304b\u3044\u70b9\u3092\u3046\u3081\u305f\u308a\u3001\u4fee\u6b63\u3057\u305f\u308a\u3057\u3066\u3044\u304f\u3002\n\n\u5b9f\u969b\u306e\u4f5c\u696d\u304c\u3069\u3053\u307e\u3067\u9032\u3093\u3067\u3044\u308b\u306e\u304b\u306f\u300c**!!\u3053\u3053\u307e\u3067\u3084\u3063\u305f!!**\u300d\u3068\u3044\u3046\u30e9\u30d9\u30eb\u3067\u8868\u793a\u3059\u308b\u3002\n\n\u3069\u306e\u3088\u3046\u306a\u74b0\u5883\u306b\u3059\u308b\u304b\n-------------------\n\n\u3064\u304e\u306e\u3088\u3046\u306a\u74b0\u5883\u306b\u3059\u308b\u3002\n\n* \u30c7\u30a3\u30b9\u30af\u306fMBR\u3067\u306f\u306a\u304fGPT\u3067\u521d\u671f\u5316\u3059\u308b\n* LVM\u3092\u4f7f\u3063\u3066\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u5bb9\u91cf\u3092\u30d5\u30ec\u30ad\u30b7\u30d6\u30eb\u306b\u3059\u308b\n* SWAP\u9818\u57df\u306f\u30e1\u30e2\u30ea\u5bb9\u91cf\u306e2\u500d\n* boot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u81ea\u52d5\u3067\u306f\u30de\u30a6\u30f3\u30c8\u3057\u306a\u3044\n* x86_64\u7528\u306eGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n* ...\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u306e\u4f5c\u6210\n------------------\n\nGentoo\u306e\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u304b\u3089ISO\u30a4\u30e1\u30fc\u30b8\u3092\u843d\u3068\u3057\u3066\u304f\u308b\u3002\u3064\u304e\u306e\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u3001\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u3092\u9078\u3076\u3002\n\nhttps://www.gentoo.org/downloads/mirrors/\n\n\u3064\u304e\u306e\u3088\u3046\u306b\u30ea\u30f3\u30af\u3092\u305f\u3069\u308b\u3002\n\n* releases/\n* amd64/\n* autobuilds/\n* current-install-amd64-minimal/\n\ninstall-amd64-minimal-201XXXXX.iso\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n\u305d\u308c\u3092CD\u306b\u713c\u304f\u3002\n\n    % cdrecord install-amd64-minimal-201XXXXX.iso\n\n\u8d77\u52d5\n----\n\nGentoo\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u3092\u3044\u308c\u3001\u8d77\u52d5\u3059\u308b\u3002\u3064\u304e\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u305f\u3089\u30a8\u30f3\u30bf\u30fc\u30ad\u30fc\u3092\u62bc\u3059\u3002\n\n    boot:\n\n\u3053\u3053\u3067\u30a8\u30f3\u30bf\u30fc\u30ad\u30fc\u3092\u62bc\u3055\u306a\u3044\u3068\u3001\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u304b\u3089\u8d77\u52d5\u3057\u3066\u3057\u307e\u3046\u3002\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u78ba\u8a8d\n----------------\n\n\u3053\u3053\u3067\u306fDHCP\u30b5\u30fc\u30d0\u304c\u52d5\u3044\u3066\u3044\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u306b\u3044\u308b\u3053\u3068\u3092\u524d\u63d0\u3068\u3059\u308b\u3002\u305d\u306e\u5834\u5408ping\u304c\u901a\u308b\u306f\u305a\u3060\u3002\n\n    % ping foo.bar.com -c 3\n\nfoo.bar.com\u306e\u3068\u3053\u308d\u306f\u9069\u5f53\u306a\u30a2\u30c9\u30ec\u30b9(PING\u3092\u53d7\u3051\u4ed8\u3051\u3066\u304f\u308c\u308b\u3068\u3053\u308d)\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\n------------------\n\n### \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u8a08\u753b\n\n\u307e\u305a\u306f\u3001\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u5207\u308a\u304b\u305f\u306e\u8a08\u753b\u3092\u7acb\u3066\u308b\u3002LVM\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u304b\u3089\u3001\u3053\u306e\u4f5c\u696d\u306f\u305a\u3044\u3076\u3093\u3068\u697d\u306b\u306a\u3063\u305f\u3002LVM\u4e0a\u306b\u4f5c\u3063\u305f\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306f\u3001\u3042\u3068\u304b\u3089\u5bb9\u91cf\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u304b\u3089\u3060\u3002\n\n#### \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3068\u30e1\u30e2\u30ea\u306e\u5bb9\u91cf\u3092\u8abf\u3079\u308b\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3068\u30e1\u30e2\u30ea\u306e\u5927\u304d\u3055\u3092\u8abf\u3079\u3088\u3046\u3002\n\n    # parted /dev/sda\n    (parted) print\n    ...\n    Disk /dev/sda: 2000GB\n    ...\n    (parted) quit\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u306f2TB\u304f\u3089\u3044\u3060\u3002\n\n    # free -m\n              total ...\n    Mem:      15951 ...\n    Swap:         0 ...\n\n\u3053\u306e\u30de\u30b7\u30f3\u306f16GB\u306e\u30e1\u30e2\u30ea\u3092\u7a4d\u3093\u3067\u3044\u308b\u3002\n\n#### \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\n\n* grub: 2MiB\n* boot: 1GiB - 3MiB\n* root: 5GiB\n* swap: 32GiB\n* lvm2: 1TiB - 32GiB\n* space: \u7d041TiB\n\n\u3060\u3044\u305f\u3044\u3001\u3053\u3093\u306a\u611f\u3058\u306b\u3059\u308b\u3002\u591a\u5c11\u306e\u305a\u308c\u306f\u3042\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\u3053\u308c\u3092MiB\u5358\u4f4d\u3067\u306e\u958b\u59cb\u4f4d\u7f6e\u3068\u7d42\u4e86\u4f4d\u7f6e\u3068\u306b\u76f4\u3059\u3002\n\n* grub: 1 - 3\n* boot: 3 - 1024\n* root: 1024 - 6144\n* swap: 6144 - 38912\n* lvm2: 38912 - 1048576\n* space: 1048576 - -1\n\n#### LVM\u4e0a\u306e\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u69cb\u6210\n\n* usr:  10GiB\n* home: 10GiB\n* opt:   5GiB\n* var:   5GiB\n* tmp:   2GiB\n\n### GPT\u30e9\u30d9\u30eb\u3092\u3064\u3051\u308b\n\n\u3064\u304e\u306e\u3088\u3046\u306b\u3057\u3066GPT\u30e9\u30d9\u30eb\u3092\u3064\u3051\u308b\u3002\u3053\u308c\u3067\u3001\u3082\u3068\u306e\u30c7\u30fc\u30bf\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u304f\u306a\u308b\u306e\u3067\u6ce8\u610f\u3059\u308b\u3053\u3068\u3002\n\n    # parted /dev/sda\n    (parted) mklabel gpt\n    (parted) print\n\n### \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3068\u304d\u306e\u5358\u4f4d\u3092MiB\u306b\u3059\u308b\u3002\n\n    (parted) unit mib\n\nGRUB\u304c\u4f7f\u7528\u3059\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    (parted) mkpart grub 1 3\n    (parted) set 1 bios_grub on\n    (parted) print\n\nboot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    (parted) mkpart boot 3 1024\n    (parted) set 2 boot on\n    (parted) print\n\nroot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    (parted) mkpart root 1024 6144\n\nswap\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    (parted) mkpart swap 6144 38912\n\nlvm2\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    (parted) mkpart lvm2 38912 1048576\n\n\u4e88\u5099\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    (parted) mkpart space 1048576 -1\n    (parted) print\n    (parted) quit\n\n### \u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\n#### dm-mod\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u8aad\u307f\u3053\u3080\n\n    % modprobe dm-mod\n\n#### \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u6e96\u5099\n\n    % pvcreate /dev/sda5\n\n#### \u30dc\u30ea\u30e5\u30fc\u30e0\u30b0\u30eb\u30fc\u30d7\u306e\u4f5c\u6210\n\n    % vgcreate vg /dev/sda5\n\n#### \u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\n\n    # lvcreate -L10G -nusr vg\n    # lvcreate -L10G -nhome vg\n    # lvcreate -L5G -nopt vg\n    # lvcreate -L10G -nvar vg\n    # lvcreate -L2G -ntmp vg\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u6210\u3059\u308b\n-----------------------\n\n### Swap\u9818\u57df\u306e\u4f5c\u6210\u3068\u6709\u52b9\u5316\n\n    # mkswap /dev/sda4\n    # swapon /dev/sda4\n    # free -g\n\n### \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u4f5c\u6210\n\n    # mkfs.ext4 /dev/sda2\n    # mkfs.ext4 /dev/sda3\n\n    # mkfs.ext4 /dev/vg/usr\n    # mkfs.ext4 /dev/vg/home\n    # mkfs.ext4 /dev/vg/opt\n    # mkfs.ext4 /dev/vg/var\n    # mkfs.ext4 /dev/vg/tmp\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\n-------------------------\n\n\u307e\u305a\u306froot\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092/mnt/gentoo/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3001\u305d\u306e\u3057\u305f\u306b\u3001\u307b\u304b\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u305f\u3081\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    # mount /dev/sda3 /mnt/gentoo/\n    # mkdir /mnt/gentoo/boot\n    # mkdir /mnt/gentoo/usr\n    # mkdir /mnt/gentoo/home\n    # mkdir /mnt/gentoo/opt\n    # mkdir /mnt/gentoo/var\n    # mkdir /mnt/gentoo/tmp\n\nroot\u4ee5\u4e0b\u306b\u3001\u305d\u308c\u305e\u308c\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\n\n    # mount /dev/sda2 /mnt/gentoo/boot\n    # mount /dev/vg/usr /mnt/gentoo/usr\n    # mount /dev/vg/home /mnt/gentoo/home\n    # mount /dev/vg/opt /mnt/gentoo/opt\n    # mount /dev/vg/var /mnt/gentoo/var\n    # mount /dev/vg/tmp /mnt/gentoo/tmp\n\n### /tmp/\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u4fee\u6b63\u3059\u308b\n\n    # chmod 1777 /mnt/gentoo/tmp\n\nstage3\n------\n\n### \u6642\u9593\u3092\u5408\u308f\u305b\u308b\n\n\u6642\u9593\u3092\u5408\u308f\u305b\u308b\u3002\n\n    # data\n    # rc-service ntp-client start\n    # data\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u30af\u30ed\u30c3\u30af\u3082\u5408\u308f\u305b\u308b\u3002\n\n    # hwclock\n    # hwclock --systohc\n    # hwclock\n\n### \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3059\u308b\n\n    # cd /mnt/gentoo/\n\n### stage3\u306etar\u30dc\u30fc\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n\n    # links https://www.gentoo.org/downloads/mirrors/\n\n\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u3092\u9078\u3073\u3002\u3064\u304e\u306e\u3088\u3046\u306b\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u305f\u3069\u308b\u3002\n\n* releases\n* amd64\n* autobuilds\n* current-stage3-amd64\n\nstage3-amd64-201XXXXX.tar.bz2\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n### \u89e3\u51cd\u3057\u5c55\u958b\u3059\u308b\n\n    # tar xvjpf stage3-amd64-201XXXXX.tar.bz2 --xattrs\n\n### \u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\n\n\u30d5\u30a1\u30a4\u30ebmake.conf\u304b\u3089CFLAGS=\"...\"\u3068\u3044\u3046\u884c\u3092\u898b\u3064\u3051\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n    # vi /mnt/gentoo/etc/portage/make.conf\n    ...\n    CFLAGS=\"-march=native -O2 -pipe\"\n    ...\n\n\u304a\u306a\u3058\u30d5\u30a1\u30a4\u30eb\u306e\u672b\u5c3e\u306b\u3001MAKEOPTS\u304b\u3089\u306f\u3058\u307e\u308b\u3001\u3064\u304e\u306e\u3088\u3046\u306a\u884c\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n    # vi /mnt/gentoo/etc/portage/make.conf\n    MAKEOPTS=\"-j5\"\n\nMAKEOPTS\u306b-j5\u3068\u3057\u305f\u306e\u306f\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u30925\u500b\u4e26\u5217\u3067\u884c\u3046\u3068\u3044\u3046\u3053\u3068\u3002\u3053\u306e\u6570\u5b57\u306f\u3001\u3060\u3044\u305f\u3044\u30b3\u30a2\u6570(\u30b9\u30ec\u30c3\u30c9\u6570?) + 1\u304f\u3089\u3044\u304c\u76ee\u5b89\u3060\u3068\u8a00\u3046\u3002\u4eca\u56de\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30de\u30b7\u30f3\u306f4\u30b3\u30a2(4\u30b9\u30ec\u30c3\u30c9)\u306a\u306e\u30675\u3068\u3059\u308b\u3002\n\n/mnt/genoo/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u74b0\u5883\u306b\u306f\u3044\u308b\n-------------------------------------\n\n### DNS\u60c5\u5831\u306e\u30b3\u30d4\u30fc\n\n    # cp -L /etc/resolv.conf /mnt/gentoo/etc/\n\n### \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30de\u30a6\u30f3\u30c8\n\n    # mount -t proc proc /mnt/gentoo/proc\n    # mount --rbind /sys /mnt/gentoo/sys\n    # mount --make-rslave /mnt/gentoo/sys\n    # mount --rbind /dev /mnt/gentoo/dev\n    # mount --make-rslave /mnt/gentoo/dev\n\n### /mnt/gentoo/\u4e0b\u306e\u74b0\u5883\u306b\u306f\u3044\u308b\n\n    # chroot /mnt/gentoo /bin/bash\n    # source /etc/profile\n    # export PS1=\"(chroot) $PS1\"\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u3092\u9032\u3081\u308b\u305f\u3081\u306e\u6e96\u5099\n------------------------------\n\n### Portage\u30c4\u30ea\u30fc\u306e\u53d6\u5f97\u3068\u66f4\u65b0\n\n    # emerge-webrsync\n    # emerge --sync\n\n### \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306e\u9078\u629e\n\n\u3064\u304e\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u9078\u629e\u3059\u308b\u3002\u4eca\u56de\u306fdefault/linux/amd64/13.0/desktop\u3092\u9078\u3093\u3060\u3002\u3053\u308c\u304c3\u756a\u76ee\u3060\u3063\u305f\u306e\u3067set 3\u3068\u3057\u305f\u3002\n\n    # eselect profile list\n    # eselect profile set 3\n\n### Tmux\u3068Vim\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u307e\u305a\u3001Tmux\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\u305d\u3046\u3059\u308b\u3068\u3001\u8907\u6570\u306e\u753b\u9762\u3092\u6301\u3066\u308b\u306e\u3067\u3001\u4f5c\u696d\u304c\u3057\u3084\u3059\u304f\u306a\u308b\u3002\n\n    # emerge -av tmux\n    # tmux\n\nCtrl-b \"\u3067\u753b\u9762\u3092\u5206\u5272\u3057\u3066\u304a\u3053\u3046\u3002\u5206\u5272\u3057\u305f\u305d\u308c\u305e\u308c\u306e\u9818\u57df\u9593\u306e\u79fb\u52d5\u306fCtrl-b o\u3060\u3002\u65b0\u3057\u3044\u753b\u9762\u3092\u4f5c\u308b\u306b\u306fCtrl-b n\u3068\u3059\u308b\u3002\u753b\u9762\u9593\u3092\u79fb\u52d5\u3059\u308b\u306b\u306fCtrl-b 0\u3084Ctrl-b 1\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u3044\u308d\u3044\u308d\u3068\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u306e\u3067\u3001\u4f7f\u3044\u3084\u3059\u3044\u30a8\u30c7\u30a3\u30bf\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3002\n\n    # USE=\"-X\" emerge -av vim\n\n\u307e\u3060X\u306f\u5165\u308c\u306a\u3044\u306e\u3067USE\u3092-X\u3068\u3057\u3066\u304a\u304f\u3002\n\n### cpuid2cpuflags\n\n    # emerge -av cpuid2cpuflags\n    # cpuinfo2cpuflags-x86 >> /etc/portage/make.conf\n\n### USE\u5909\u6570\u306e\u8a2d\u5b9a\n\n    # vi /etc/portage/make.conf\n    ...\n    USE=\"...\\\n            cjk m17n-lib nls unicode git postgres zsh-completion vim-syntax\"\n    ...\n\n    # vi /etc/portage/make.conf\n    ...\n    LINGUAS=\"ja\"\n    L10N=\"ja\"\n    ...\n\n### \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306e\u6c7a\u5b9a\n\n    # ls /usr/share/zoneinfo\n    # echo \"Japan\" > /etc/timezone\n    # emerge --config sys-libs/timezone-data\n\n### \u30ed\u30b1\u30fc\u30eb\u306e\u8a2d\u5b9a\n\n    # vim /etc/locale.gen\n    ja_JP.UTF-8 UTF-8\n    # locale-gen\n\n    # eselect locale list\n    # eselect locale set 3\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u4f5c\u6210\n-------------\n\n### \u30ab\u30fc\u30cd\u30eb\u3068pciutils\u3092\u53d6\u5f97\u3059\u308b\n\n    # emerge -av gentoo-sources\n    # emerge -av pciutils\n\n### \u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u3001\u8a2d\u5b9a\u30c4\u30fc\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001\u884c\u3046\u3002\n\n    # cd /usr/src/linux\n    # make menuconfig\n\n#### \u8d70\u3063\u3066\u3044\u308b\u30ab\u30fc\u30cd\u30eb\u304b\u3089\u306e\u8a2d\u5b9a\u306e\u5165\u624b\n\n\u8d70\u3063\u3066\u3044\u308b\u30ab\u30fc\u30cd\u30eb\u304b\u3089\u8a2d\u5b9a\u3092\u5165\u624b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n    General setup --->\n        <*> Kernel .config support\n            [*] Enable access to .config through /proc/config.gz\n\n\u4e00\u5ea6\u3001\u8a2d\u5b9a\u30c4\u30fc\u30eb\u3092\u3001\u4fdd\u5b58\u7d42\u4e86\u3055\u305b\u308b\u3002\n\n#### \u6709\u7ddaLAN\u306e\u30c9\u30e9\u30a4\u30d0\n\n\u3064\u304e\u306b\u6709\u7ddaLAN\u306e\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n    # lspci -k | grep -A 2 -i ethernet\n    Kernel driver in use: alx\n    # grep -i alx .config\n    # CONFIG_ALX is not set\n\n\u7d50\u679c\u304cis not set\u3060\u3063\u305f\u306e\u3067\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3001\u8a2d\u5b9a\u3092\u6709\u52b9\u5316\u3059\u308b\u3002\n\n    # make menuconfig\n    Device Drivers --->\n        [*] Network driver support --->\n            [*] Atheros devices\n                .\n                .\n                <*> Qualcomm Atheros 816x/AR817x support\n\n#### \u30d7\u30ed\u30bb\u30c3\u30b5\u30d5\u30a1\u30df\u30ea\u30fc\n\n\u30d7\u30ed\u30bb\u30c3\u30b5\u30d5\u30a1\u30df\u30ea\u30fc\u3067Core 2 / newer Xeon\u3092\u9078\u629e\u3059\u308b\u3002\n\n    Processor type and features --->\n        Processor family (Core 2 / newer Xeon)\n\n#### LVM2\n\nDevice mapper support\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n    Device Drivers --->\n        Multi-device support (RAID and LVM)\n            Multiple devices driver support (RAID and LVM)\n                <*> Device mapper support\n\n### \u30d3\u30eb\u30c9\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n    # make && make modules_install\n    # make install\n\n### initramfs\u306e\u4f5c\u6210\n\n    # emerge -av genkernel\n    # genkernel --install initramfs\n    # ls /bool/initramfs*\n\n### LVM2\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n    # emerge -av lvm2\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u30e9\u30d9\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\n----------------------------\n\next4\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306b\u5bfe\u3057\u3066\u306fe2label\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3002\n\n    # e2label /dev/sda2 boot\n    # e2label /dev/sda2\n    boot\n    # e2label /dev/sda3 root\n    # e2label /dev/vg/usr usr\n    # e2label /dev/vg/home home\n    # e2label /dev/vg/opt opt\n    # e2label /dev/vg/var var\n    # e2label /dev/vg/tmp tmp\n\nswap\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306b\u306fmkswap\u3092\u4f7f\u3046\u3002\n\n    # swapoff /dev/sda4\n    # mkswap -L swap /dev/sda4\n    # swapon LABEL=swap\n\nfstab\u306e\u8a2d\u5b9a\n----------\n\n    # vi /etc/fstab\n    LABEL=root      /            ext4   noatime        0 1\n    LABEL=boot      /boot        ext4   noauto,noatime 0 2\n    LABEL=usr       /usr         ext4   noatime        0 2\n    LABEL=home      /home        ext4   noatime        0 2\n    LABEL=opt       /opt         ext4   noatime        0 2\n    LABEL=var       /var         ext4   noatime        0 2\n    LABEL=tmp       /tmp         ext4   noatime        0 2\n    LABEL=swap      none         swap   sw             0 0\n    /dev/cdrom      /mnt/cdrom   auto   noauto,ro      0 0\n\nhostname\u306e\u8a2d\u5b9a\n-------------\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u540d\u524d\u306fchassis\u306b\u3057\u3066\u304a\u304f\u3002\n\n    # vim /etc/conf.d/hostname\n    hostname=\"chassis\"\n\n\u30c9\u30e1\u30a4\u30f3\u540d\u3082\u9069\u5f53\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n\n    # vim /etc/conf.d/net\n    dns_domain_lo=\"local.hogehoge.jp\"\n\nlocal.hogehoge.jp\u306e\u3068\u3053\u308d\u306f\u3001\u9069\u5f53\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n/etc/hosts\u306b\u3082\u81ea\u5206\u306e\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n\n    # vim /etc/hosts\n    127.0.0.1 chassis chassis.local.hogehoge.jp localhost\n    ::1 chassis chassis.local.hogehoge.jp chassis\n\n\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\n-------------------\n\n\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    # passwd\n\n\u3044\u304f\u3064\u304b\u306e\u30b7\u30b9\u30c6\u30e0\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\u3059\u308b\n------------------------------\n\nmetalog\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    # emerge -av metalog\n    # rc-update add metalog default\n\nfcron\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    # emerge -av fcron\n    # rc-update add fcron default\n    # crontab /etc/crontab\n\nmlocate\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    # emerge -av mlocate\n\nDHCP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    # emerge -av dhcpcd\n\nLVM2\u30c7\u30fc\u30e2\u30f3\u3092\u767b\u9332\n----------------\n\n    # rc-update add lvm boot\n\n\u30d6\u30fc\u30c8\u30ed\u30fc\u30c0\u306e\u8a2d\u5b9a\n----------------\n\n    # emerge -av grub\n    # grub-install /dev/sda\n    # grub-mkconfig -o /boot/grub/grub.cfg\n\n\u518d\u8d77\u52d5\n-----\n\n\u3055\u3066\u3001\u3064\u3044\u306b\u3001\u3053\u306e\u3068\u304d\u304c\u304d\u305f\u3002\n\u3046\u307e\u304f\u3044\u304f\u3060\u308d\u3046\u304b\u3002\n\n    # exit\n    # exit\n    # exit\n    # reboot\n\n\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u304c\u7d42\u308f\u3063\u305f\u3068\u3053\u308d\u3067CD\u3092\u306c\u3044\u3066\u304a\u304f\u3053\u3068\u3002\n\n\u518d\u8d77\u52d5\u6210\u529f\n---------\n\nroot\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\u307e\u305a\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u78ba\u8a8d\u3002\n\n    # ping hoge.co.jp -c 3\n\nhoge.co.jp\u306e\u3068\u3053\u308d\u306f\u9069\u5f53\u306a\u30a2\u30c9\u30ec\u30b9(ping\u3092\u53d7\u3051\u3064\u3051\u3066\u304f\u308c\u308b)\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n\u3053\u308c\u304c\u3046\u307e\u304f\u3044\u3063\u305f\u3089\u3001\u3068\u308a\u3042\u3048\u305atmux\u306b\u5165\u3063\u3066\u304a\u3053\u3046\u3002\n\n    # tmux\n\nOpenRC\u306e\u30ed\u30b0\u3092\u8a18\u9332\u3059\u308b\n--------------------\n\n    # vim /etc/rc.conf\n    rc_logger=\"YES\"\n\n\u3053\u3046\u3057\u3066\u304a\u304f\u3068\u3001\u6b21\u56de\u304b\u3089\u306f/var/log/rc.log\u306b\u30ed\u30b0\u304c\u8a18\u9332\u3055\u308c\u308b\u3002\n\n\u30cf\u30a4\u30d0\u30cd\u30fc\u30b7\u30e7\u30f3\n--------------\n\n\u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n    # zcat /proc/config.gz | grep -i suspend\n    # zcat /proc/config.gz | grep -i hibernation\n\n### \u30b5\u30b9\u30da\u30f3\u30c9\n\n\u4f5c\u696d\u5185\u5bb9\u3092\u30e1\u30e2\u30ea\u306b\u4fdd\u5b58\u3057\u3066\u3001\u7701\u96fb\u529b\u30e2\u30fc\u30c9\u306b\u5165\u308b\u3002\n\n    # echo mem > /sys/power/state\n\n\u3053\u308c\u3067\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u306e\u96fb\u6e90\u304c\u843d\u3061\u308b\u3002\u518d\u5ea6\u3001\u96fb\u6e90\u3092\u5165\u308c\u308b\u3068\u4e2d\u65ad\u3057\u305f\u3068\u3053\u308d\u304b\u3089\u3001\u306f\u3058\u3081\u3089\u308c\u308b\u3002\n\n### \u30cf\u30a4\u30d0\u30cd\u30fc\u30c8\n\n\u4f5c\u696d\u5185\u5bb9\u3092\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u30b9\u30ef\u30c3\u30d7\u9818\u57df\u306b\u4fdd\u5b58\u3057\u3066\u96fb\u6e90\u3092\u5207\u308b\u3002\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3078\u306e\u4fdd\u5b58\u306a\u306e\u3067\u3001\u5b8c\u5168\u306b\u96fb\u6e90\u3092\u843d\u3068\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u30ab\u30fc\u30cd\u30eb\u306b\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u30b9\u30ef\u30c3\u30d7\u9818\u57df\u3092\u6307\u5b9a\u3057\u3066\u3084\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n    # vim /etc/default/grub\n    ...\n    GRUB_CMDLINE_LINUX_DEFAULT=\"resume=/dev/sda4\"\n    ...\n    # mount boot\n    # grub-mkconfig -o /boot/grub/grub.cfg\n    # echo disk > /sys/power/state\n\n\u3053\u308c\u3067\u3001\u96fb\u6e90\u304c\u843d\u3061\u308b\u3002\u96fb\u6e90\u30b9\u30a4\u30c3\u30c1\u3092\u62bc\u3057\u3066\u3001\u7acb\u3061\u4e0a\u3052\u308b\u3068\u3001\u4e2d\u65ad\u3057\u305f\u3068\u3053\u308d\u304b\u3089\u3001\u306f\u3058\u3081\u3089\u308c\u308b\u3002\n\n### \u96fb\u6e90\u30dc\u30bf\u30f3\u3067\u30cf\u30a4\u30d0\u30cd\u30fc\u30c8\u3059\u308b\n\n    # emerge -av acpid\n    # rc-update add acpid default\n    # rc-service acpid start\n    # vim /etc/acpid/default.sh\n    ...\n            case \"$group\" in\n                    button)\n                            case \"$action\" in\n                                    power)\n                                            case \"$device\" in\n                                                    PBTN)\n                                                            echo disk > /sys/power/state\n                                                            ;;\n                                            esac\n                                            ;;\n\n\u3044\u308d\u3044\u308d\u3068\u8a66\u3057\u3066\u304b\u3089\u8a2d\u5b9a\u3057\u305f\u3044\u3068\u304d\u306f\u3001\u3068\u308a\u3042\u3048\u305a\u3001button\u306b\u53cd\u5fdc\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u304b\u3089\u3001\u3069\u306e\u30dc\u30bf\u30f3\u3067\u3069\u306e\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\u3059\u308b\u306e\u304b\u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n\n    # vim /etc/acpi/default.sh\n    ('power)'\u3068\u3044\u3046\u884c\u306e\u6b21\u306e\u884c\u306e\u5148\u982d\u306b'#'\u3092\u8ffd\u52a0\u3059\u308b)\n    # acpi_listen\n    (\u96fb\u6e90\u30dc\u30bf\u30f3\u3092\u62bc\u3059)\n    button/power PBTN 00000080 00000000\n    button/power LNXPWRBN:00 00000080 00000001\n    (\u96fb\u6e90\u30dc\u30bf\u30f3\u3092\u3082\u30461\u56de\u3001\u62bc\u3059)\n    button/power PBTN 00000080 00000000\n    button/power LNXPWRBN:00 00000080 00000002\n    (\u30ce\u30fc\u30c8PC\u306a\u3089\u3001\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u3092\u958b\u9589\u3059\u308b)\n    button/lid LID close\n    button/lid LID open\n\n\u96fb\u6e90\u30dc\u30bf\u30f3\u306a\u3089\u3001\u305f\u3068\u3048\u3070\n\n* $1: button/power\n* $2: PBTN\n* $3: 00000080\n* $4: 00000000\n\n\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nVim\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30c7\u30a3\u30bf\u306b\u3059\u308b\n---------------------------\n\n    # eselect editor list\n    ...\n        [3] /usr/bin/vi\n    # eselect editor set 3\n    # . /etc/profile\n    # echo $EDITOR\n    /usr/bin/vi\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3068sudo\u306e\u5c0e\u5165\n-------------------------\n\n\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    # useradd -m -G users,portage,wheel -s /bin/bash yoshio\n    # passwd yoshio\n\nyoshio\u306e\u3068\u3053\u308d\u306f\u597d\u304d\u306a\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\n\u3053\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3057\u3066\u3001\u305d\u306e\u3046\u3048\u3067root\u30e6\u30fc\u30b6\u306b\u306a\u308b\u3002\n\n    # exit\n    # exit\n    login: yoshio\n    passwd: ******\n    $ tmux\n    $ su\n    passwd: ******\n    #\n\nsudo\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    # emerge -av sudo\n    # visudo\n    %wheel ALL=(ALL) ALL\n    # exit\n    $ sudo echo hoge\n    (\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b)\n    hoge\n\nZsh\u306e\u5c0e\u5165\n--------\n\n\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30b7\u30a7\u30eb\u3092Zsh\u306b\u3059\u308b\u3002\n\n    $ sudo emerge -av zsh\n    $ sudo vipw\n    (\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e/bin/bash\u3092/bin/zsh\u306b\u5909\u66f4\u3059\u308b)\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3057\u3066\u3001\u3044\u304f\u3064\u304b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n    $ exit\n    $ exit\n    login: yoshio\n    passwd: ******\n    (zsh\u306e\u8a2d\u5b9a\u30c4\u30fc\u30eb\u304c\u8d77\u52d5\u3059\u308b)\n    \u5c65\u6b74\u306e\u4fdd\u5b58\u30921,000,000\u500b\u306b\u5897\u3084\u3059\u3002\n    \u88dc\u5b8c\u30b7\u30b9\u30c6\u30e0\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3067on\u306b\u3059\u308b\u3002\n    \u6307\u3065\u304b\u3044\u306bvi\u3092\u9078\u629e\u3002\n    \u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u306e\u62e1\u5f35\u3068\u80cc\u666f\u30b8\u30e7\u30d6\u306e\u7d42\u4e86\u306e\u5373\u6642\u5831\u544a\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n    \u4fdd\u5b58\u7d42\u4e86\n    % vi .zshrc\n    ...\n    setopt share_history\n\n\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3002^[\u306fCtrl-V Esc\u3067\u5165\u529b\u3059\u308b\u3002\n\n    % vi .zshrc\n    ...\n    PROMPT=\"%{^[[;32;1m%}[%D{%H:%M}] %#%{^[[m%} \"\n    PROMPT2=\"%_> \"\n    RPROMPT=\"[%40<...<%~]\"\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u76f4\u3059\u3002\n\n    % exit\n    login: yoshio\n    passwd: ******\n    % tmux\n\nXorg\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n----------------------\n\n\u306a\u3093\u3068\u306a\u304f\u3001clang\u3092USE\u306b\u8ffd\u52a0\u3059\u308b\u3002\u307e\u305f\u3001INPUT_DEVICES\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    % sudoedit /etc/portage/make.conf\n    USE=\"...\\\n            ...\\\n            clang\"\n    INPUT_DEVICES=\"evdev\"\n\n\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30ab\u30fc\u30c9\u306e\u7a2e\u985e\u3092\u8abf\u3079\u308b\u3002\n\n    % /usr/sbin/lspci | grep -i graphics\n    ...: Intel ...\n\n\u305f\u3076\u3093intel\u3067\u826f\u3055\u305d\u3046\u306a\u306e\u3067\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n    % sudoedit /etc/portage/make.conf\n    VIDEO_CARDS=\"intel\"\n\nxorg\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n    % sudo emerge -av xorg-server\n\n77\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u5c0e\u5165\u3055\u308c\u308b\u3002\u3068\u304f\u306bllvm\u3042\u305f\u308a\u304c\u3059\u3054\u304f\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u3001\u304a\u51fa\u304b\u3051\u3059\u308b\u304b\u7720\u308b\u304b\u3001\u5bb6\u306b\u5e30\u308b\u304b\u3059\u308b\u307b\u3046\u304c\u3044\u3044\u3068\u601d\u308f\u308c\u308b\u3002\n\n\u3061\u3083\u3093\u3068\u52d5\u304f\u304b\u3069\u3046\u304b\u30c6\u30b9\u30c8\u3059\u308b\u3002\n\n    % sudo emerge -av twm xterm\n    % startx\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n---------------------\n\n\u3053\u306e\u3042\u305f\u308a\u3067\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u6700\u65b0\u306e\u3082\u306e\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066\u304a\u3053\u3046\u3002\n\n    % sudo emerge -av --deep --newuse @system\n\n125\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u66f4\u65b0\u307e\u305f\u306f\u65b0\u898f\u5c0e\u5165\u3055\u308c\u308b\u3002\u3057\u3070\u3089\u304f\u3001\u304b\u304b\u308b\u3060\u308d\u3046\u3002\n\n    % sudo emerge -av --deep --newuse @world\n    % sudo emerge -av --depclean\n\n\n\u5ff5\u306e\u305f\u3081\u3001\u3082\u3046\u4e00\u5ea6sync\u3057\u3066\u304a\u304f\u3002\n\n    % sudo emerge --sync\n    % sudo emerge -av --deep --newuse @system\n    % sudo emerge -av --deep --newuse @world\n\nXmonad\u306e\u5c0e\u5165\n-----------\n\n    % sudo emerge -av xmonad\n\n\u3057\u3070\u3089\u304f\u6642\u9593\u304c\u304b\u304b\u308b\u306e\u3067\u3001\u3059\u3053\u3057\u4f11\u61a9\u3057\u3088\u3046\u3002\n\n    % vim ~/.xinitrc\n    exec xmonad\n    % startx\n\n\u753b\u9762\u304c\u307e\u3063\u9ed2\u306b\u306a\u308b\u3051\u308c\u3069\u3001\u3042\u308f\u3066\u305a\u306b\u3001Alt + Shift + Enter\u3092\u62bc\u3059\u3002\u3059\u308b\u3068\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u304c\u51fa\u308b\u3002exit\u3057\u3066\u3001Alt + Shift + q\u3067X\u3092\u306c\u3051\u3088\u3046\u3002\n\nrxvt-unicode\u306e\u5c0e\u5165\n-----------------\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u306b\u306frxvt\u306e\u30e6\u30cb\u30b3\u30fc\u30c9\u7248\u3092\u4f7f\u3046\u3053\u3068\u306b\u3059\u308b\u3002\n\n    % emerge -pv rxvt-unicode\n\n\u53ef\u80fd\u306aUSE\u30d5\u30e9\u30b0\u306e\u306a\u304b\u304b\u3089\u3001256-color\u3001wcwidth\u3001unicode3\u3001xft\u3042\u305f\u308a\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\u307e\u305f\u3001\u305d\u306e\u305f\u3081\u306b\u306f-vanilla\u3068\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n    % sudoedit /etc/portage/package.use/rxvt-unicode\n    x11-terms/rxvt-unicode -vanilla 256-color wcwidth unicode3 xft\n    % sudo emerge -av rxvt-unicode\n\nXmonad\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3068\u3057\u3066\u767b\u9332\u3059\u308b\u3002\n\n    % mkdir ~/.xmonad\n    % vim ~/.xmonad/xmonad.hs\n    import XMonad\n\n    main :: IO ()\n    main = do\n            xmonad defaultConfig {\n                    terminal = \"urxvt\"\n                    }\n\n\u8a66\u3057\u3066\u307f\u3088\u3046\u3002\n\n    % startx\n\n\u3053\u3053\u3067\u3001Ctrl + Shift + Enter\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u7acb\u3061\u4e0a\u3052\u3066\u3001\u305d\u3053\u306b\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u6253\u3061\u8fbc\u3080\u3002\n\n    % echo $TERM\n    rxvt-unicode-256color\n    % exit\n\n\u554f\u984c\u306a\u3051\u308c\u3070\u3001Ctrl + Shift + q\u3067X\u3092\u7d42\u4e86\u3055\u305b\u308b\u3002\n\n\u753b\u9762\u306e\u8272\u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    % vim ~/.Xdefaults\n    urxvt*background: black\n    urxvt*foreground: snow\n    urxvt*color12: #7799FF\n\n    urxvt*saveLines: 0\n\n\u3082\u3046\u4e00\u5ea6\u3001\u7acb\u3061\u4e0a\u3052\u3066\u3001\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n\n    % startx\n\nCtrl + Shift + Enter\u3068\u3059\u308b\u3002\u74b0\u5883\u304c\u6574\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u306f\u3001\u3053\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067\u4f5c\u696d\u3092\u3059\u308b\u3002\n\n    % tmux\n\n\u65e5\u672c\u8a9e\u5165\u529b\n---------\n\n\u65e5\u672c\u8a9e\u5165\u529b\u306b\u306f\u50d5\u306f\u3001TUT-code\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002uim\u3092\u4f7f\u3046\u3002\n\n    % emerge -pv uim\n\n\u3068\u308a\u3042\u3048\u305aUSE\u306bxft\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304f\u3002\u3053\u306e\u30d5\u30e9\u30b0\u306f\u5168\u4f53\u306b\u6307\u5b9a\u3057\u3066\u3082\u3044\u3044\u6c17\u3082\u3059\u308b\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3001\u3042\u3068\u3067\u691c\u8a0e\u3057\u3088\u3046\u3002\n\n    % sudoedit /etc/portage/package.use/uim\n    app-i18n/uim xft\n\n\u5c0e\u5165\u3059\u308b\u3002\n\n    % sudo emerge -av uim\n\n.xinitrc\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n    % vim .xinitrc\n    export XMODIFIERS=\"@im=uim\"\n    uim-xim --engine=tutcode &\n    exec xmonad\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u306c\u3051\u308b\u3002\n\n    % exit\n    % exit\n\nAlt + Shift + q\u30671\u5ea6X\u3092\u306c\u3051\u3066\u304b\u3089\u3001\u3082\u30461\u5ea6X\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3002\n\n    % startx\n\nAlt + Shift + Enter\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3002Shift + Space\u3067\u65e5\u672c\u8a9e\u5165\u529b\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\u3082\u30461\u5ea6Shift + Space\u3067\u30a2\u30eb\u30d5\u30a1\u30d9\u30c3\u30c8\u5165\u529b\u306b\u3082\u3069\u308b\u3002\n\n\u6df7\u305c\u66f8\u304d\u8f9e\u66f8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n    % curl https://raw.githubusercontent.com/YoshikuniJujo/memos/master/mazegaki.dic > ~/.mazegaki.dic\n    % exit\n\nX\u306b\u5165\u308a\u306a\u304a\u3057\u3066\u3001\u6df7\u305c\u66f8\u304d\u5909\u63db\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\nuim\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n    % uim-pref-gtk\n\n\u300c\u30ab\u30fc\u30bd\u30eb\u306e\u305d\u3070\u306b\u5165\u529b\u30e2\u30fc\u30c9\u3092\u8868\u793a\u300d\u3068Tut-code\u306e\u300cvi\u5354\u8abf\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3059\u308b\u300d\u3068\u3092\u8a2d\u5b9a\u3002\n\nfirefox\u3092\u5c0e\u5165\n------------\n\n    % emerge -pv firefox\n\npython\u30d1\u30c3\u30b1\u30fc\u30b8\u3067USE\u306bsqlite\u304c\u5fc5\u8981\u306a\u3088\u3046\u3060\u3002\n\n    % sudoedit /etc/portage/package.use/python\n    dev-lang/python sqlite\n    % sudo emerge -av firefox\n\nVimperator\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    % firefox\n\nvimperator\u3092\u691c\u7d22\u3057\u3066\u5c0e\u5165\u3059\u308b\u3002\u305d\u308c\u304b\u3089\u3001\u6307\u3065\u304b\u3044\u3092\u5909\u3048\u308b\u3002\u4ee5\u4e0b\u306e\u8a18\u4e8b\u306b\u3057\u305f\u304c\u3046\u3002\n\nhttp://qiita.com/YoshikuniJujo/items/67236b619fc4e21dc806\n\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u306e\u6587\u5b57\u5165\u529b\u3067\u3001vi\u6d41\u3067\u3001\u30b3\u30de\u30f3\u30c9\u30e2\u30fc\u30c9\u304b\u3089\u5165\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n    % vim ~/.vimperatorrc\n    set noinsertmode\n\nX\u306e\u74b0\u5883\u3092\u6574\u3048\u308b\n-------------\n\ndmenu\u306e\u5c0e\u5165\u3002\n\n    % sudo emerge -av dmenu\n\n\u3053\u308c\u3067\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u30a8\u30df\u30e5\u30ec\u30fc\u30bf\u304b\u3089\u3067\u306a\u304f\u3066\u3082\u3001Alt + p\u3092\u3057\u3066\u304b\u3089firefox\u3068\u6253\u3061\u8fbc\u3080\u3053\u3068\u3067firefox\u304c\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\nxmobar\u306e\u5c0e\u5165\n\n    % emerge -pv xmobar\n\n\u3053\u306e\u3042\u305f\u308a\u3067xft\u3092\u30b0\u30ed\u30fc\u30d0\u30eb\u306b\u8a2d\u5b9a\u3057\u3066\u3057\u307e\u304a\u3046\u3002\n\n    % sudoedit /etc/portage/make.conf\n    USE=\"... \\\n            ... \\\n            clang xft\"\n    % sudo emerge -av xmobar\n\n.xmobarrc\u3092\u4f5c\u6210\u3002\u3053\u3053\u3067\u306fgithub\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u304f\u3002\n\n    % curl https://raw.githubusercontent.com/YoshikuniJujo/memos/master/xmobarrc > ~/.xmobarrc\n\nxmonad-contrib\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    % sudo emerge -av xmonad-contrib\n\nxmonad.hs\u306e\u7de8\u96c6\u3002\n\n    % vim ~/.xmonad/xmonad.hs\n    import XMonad\n    import XMonad.Util.Run (spawnPipe, hPutStrLn)\n    import XMonad.Hooks.DynamicLog (dynamicLogWithPP, defaultPP, ppOutput)\n\n    import XMonad.Hooks.ManageDocks (avoidStruts)\n\n    import Control.Concurrent\n\n    myLayout = avoidStruts (tiled ||| Mirror tiled ||| Full) ||| Full\n            where tiled = Tall 1 (3 / 100) (1 / 2)\n\n    main :: IO ()\n    main = do\n            h <- spawnPipe \"xmobar\"\n            threadDelay 100000\n            xmonad defaultConfig {\n                    terminal        = \"urxvt\",\n                    layoutHook      = myLayout,\n                    logHook         = dynamicLogWithPP $ defaultPP { ppOutput = hPutStrLn h }\n                    }\n\n\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u3072\u3068\u3064\u306e\u3068\u304d\u306b\u306f\u67a0\u3092\u8868\u793a\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n\n    % vim .xmonad/xmonad.hs\n    (import XMonad.Layout.NoBorders (smartBorders)\u3092\u8ffd\u52a0)\n    (layoutHook = myLayout,\u306emyLayout\u306e\u524d\u306bsmartBorders\u3092\u8ffd\u52a0)\n\nKVM\u306e\u8a2d\u5b9a\n--------\n\n\u3053\u306e\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fOS\u3092\u30db\u30b9\u30c8OS\u3068\u3057\u3066KVM\u3092\u4f7f\u3063\u3066\u30b2\u30b9\u30c8OS\u3092\u8d70\u3089\u305b\u308b\u3053\u3068\u306b\u3059\u308b\u3002\n\n### \u30ab\u30fc\u30cd\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\n\n    % zcat /proc/config.gz | grep -i kvm\n\n    % cd /usr/src/linux\n    % sudo make menuconfig\n    [*] Virtualization --->\n    <*> Kernel-based Virtual Machine (KVM) support\n    <*> KVM for Intel processors support\n    [*] Audit KVM MMU\n\n    Device Drivers --->\n    [*] Network device support --->\n    <*> Universal TUN/TAP device driver support\n\n    [*] Networking support --->\n    Networking options --->\n    <*> 802.1d Ethernet Bridging\n    <*> 802.1Q VLAN Support\n\n    % sudo make && sudo make modules_install\n    % sudo mount /boot\n    % sudo make install\n    % exit\n    % exit\n\nAlt + Shift + q\u3067X\u3092\u306c\u3051\u308b\u3002\n\n    % sudo reboot\n\n    % zcat /proc/config.gz | grep -i kvm\n\n\u3061\u3087\u3063\u3068\u3001\u5fd8\u308c\u3066\u305f\u304cls\u306ealias\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    % vim ~/.zshrc\n    alias ls='ls --color=auto'\n\n### bridge\u3092\u8a2d\u5b9a\u3059\u308b\n\nbridge-utils\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n    % sudo emerge -av bridge-utils\n\nbr0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    % sudoedit /etc/conf.d/net\n    bridge_br0=\"\"\n    config_br0=\"192.168.100.254/24\"\n\nsysctl.conf\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n    % sudoedit /etc/sysctl.conf\n    ...\n    #\n    # Setup bridge interface for KVM\n    #\n    net.bridge.bridge-nf-call-arptables = 0\n    net.bridge.bridge-nf-call-iptables = 0\n    net.bridge.bridge-nf-call-ip6tables = 0\n\nbridge_forward\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    % sudoedit /etc/init.d/bridge_forward\n    #!/sbin/openrc-run\n\n    depend() {\n            need net.br0\n    }\n\n    start() {\n            ebegin \"Turning on forwarding for bridge interface\"\n            sysctl net.ipv4.conf.br0.forwarding=1 > /dev/null 2>&1\n            sysctl net.ipv4.ip_forward=1 > /dev/null 2>&1\n            eend $?\n    }\n\n    stop() {\n            ebegin \"Turning off forwarding for bridge interface\"\n            sysctl net.ipv4.conf.br0.forwarding=0 > /dev/null 2>&1\n            sysctl net.ipv4.ip_forward=0 > /dev/null 2>&1\n            eend $?\n    }\n\n\u3044\u308d\u3044\u308d\u3068\u3084\u308b\u3002\n\n    % sudo ln -s net.lo /etc/init.d/net.br0\n    % sudo brctl addbr br0\n    % sudo rc-service net.br0 start\n    % sudo rc-update add net.br0 default\n    % sudo chmod +x /etc/init.d/bridge_forward\n    % sudo rc-service bridge_forward start\n    % sudo rc-update add bridge_forward default\n    % sudo iptables -t nat -A POSTROUTING -o enp2s0 -j MASQUERADE\n\n### DHCP\u30b5\u30fc\u30d0\u3092\u8a2d\u5b9a\u3059\u308b\n\nDHCP\u30b5\u30fc\u30d0\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n    % sudo emerge -av dhcp\n\n\u8a2d\u5b9a\u3059\u308b\u3002\u30db\u30b9\u30c8\u306e\u74b0\u5883\u3067\u4f7f\u3063\u3066\u3044\u308bDNS\u30b5\u30fc\u30d0\u3092\u8abf\u3079\u308b\u3002\n\n    % cat /etc/resolv.conf\n    nameserver 123.456.789.123\n    nameserver 987.654.321.987\n\n\u7d50\u679c\u306f\u305d\u308c\u305e\u308c\u7570\u306a\u308b\u3002\n\n    % sudoedit /etc/dhcp/dhcp.conf\n    subnet 192.168.100.0 netmask 255.255.255.0 {\n            option routers 192.168.100.254;\n            range 192.168.100.100 192.168.100.199;\n    }\n\n    option domain-name-servers 123.456.789.123;\n\n123.456.789.123\u306f\u5b9f\u969b\u306e\u30a2\u30c9\u30ec\u30b9\u306b\u7f6e\u304d\u63db\u3048\u308b\u3053\u3068\u3002\n\nDHCP\u30b5\u30fc\u30d0\u3092\u8d70\u3089\u305b\u308b\u3002\n\n    % sudo rc-service dhcpd start\n    % sudo rc-update add dhcpd default\n\n### KVM\u3092\u5c0e\u5165\u3059\u308b\n\n    % emerge -pv qemu\n\n\u3044\u304f\u3064\u304b\u306e\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    % sudoedit /etc/portage/make.conf\n    USE=\"... \\\n            ... \\\n            clang xft virtfs\"\n    ...\n    QEMU_USER_TARGETS=\"x86_64\"\n\nqemu\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n    % sudo emerge -av qemu\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306eup\u3068down\u7528\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    % vim qemu-ifup\n    #!/bin/sh\n    sudo ifconfig $1 up\n    sudo brctl addif br0 $1\n    % vim qemu-ifdown\n    sudo brctl delif br0 $1\n    sudo ifconfig $1 down\n    % chmod +x qemu-ifup qemu-ifdown\n\nVNC\u30d3\u30e5\u30fc\u30ef\u30fc\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    % sudo emerge -av ssvnc\n\nCD-R\u304b\u3089\u306e\u30d6\u30fc\u30c8\u3092\u8a66\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30ebCD\u3092CD\u30c9\u30e9\u30a4\u30d6\u306b\u633f\u5165\u3057\u3066\u304b\u3089\u3001\u3064\u304e\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n    % sudo qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot d -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=qemu-ifup,downscript=qemu-ifdown -vnc :0 -monitor stdio -vga cirrus\n\n\u5225\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304b\u3089\n\n    % ssvncviewer 127.0.0.1:5900\n\n\u6b21\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u305f\u3089Enter\u30ad\u30fc\u3092\u62bc\u3059\u3002\n\n    boot:\n\n\u3057\u3070\u3089\u304f\u3057\u3066\u3001\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u3001ping\u3092\u8a66\u305d\u3046\u3002\n\n    # ping some.address.com (ping\u3092\u8a31\u53ef\u3057\u3066\u3044\u308b\u30a2\u30c9\u30ec\u30b9) -c 3\n\n\u3053\u308c\u3067ping\u304c\u901a\u308c\u3070\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u8a2d\u5b9a\u306f\u6210\u529f\u3057\u3066\u3044\u308b\u3068\u3044\u3046\u3053\u3068\u3060\u3002\n\n\u4e00\u5ea6\u3001halt\u3057\u3001\u518d\u8d77\u52d5\u3057\u3066\u3001\u554f\u984c\u306a\u304f\u52d5\u304f\u304b\u78ba\u8a8d\u3059\u308b\n------------------------------------------\n\n    % exit\n    % exit\n\nfirefox\u306fZZ\u3067\u7d42\u4e86\u3002Alt + Shift + q\u3067X\u3092\u306c\u3051\u308b\u3002\n\n    % sudo reboot\n\n\u518d\u5e30\u52d5\u3057\u305f\u3089\u3001\n\n    % sudo ln -s net.lo /etc/init.d/net.enp2s0\n    % sudo rc-service net.enp2s0 start\n    % sudo rc-update add net.enp2s0 default\n    % sudo iptables -t nat -A POSTROUTING -o enp2s0 -j MASQUERADE\n    % sudo qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot d -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=qemu-ifup,downscript=qemu-ifdown -vnc :0 -monitor stdio -vga cirrus\n    % ssvncviewer 127.0.0.1:5900\n\n\u3067\u3001\u7acb\u3061\u4e0a\u3052\u3066ping\u3092\u8a66\u3059\u3002\n\nqemu\u3092\u7acb\u3061\u4e0a\u3052\u308b\u305f\u3081\u306e\u6a29\u9650\u3092\u8a2d\u5b9a\n-----------------------------\n\n    % sudo vigr\n    (\u4f7f\u7528\u3057\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306bkvm, cdrom\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3059\u308b)\n\n\u4e00\u5ea6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3002\n\n    % groups\n\n    % sudo emerge -av usermode-utilities\n    % sudo tunctl -u yoshio\n\n    % qemu-system-x86_64 ..\n    % ssvncviewer 127.0.0.1:5900\n\n\u8d77\u52d5\u6642\u306b\u3001\u3044\u304f\u3064\u304b\u306e\u8a2d\u5b9a\u3092\u3059\u308b\n--------------------------\n\n    % sudoedit /etc/local.d/masquerade.start\n    iptables -t nat -A POSTROUTING -o enp2s0 -j MASQUERADE\n    % sudo chmod +x /etc/local.d/masquerade.start\n    % sudoedit /etc/local.d/tunctl.start\n    tunctl -u yoshio\n    % sudo chmod +x /etc/local.d/tunctl.start\n\n\u518d\u8d77\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u3092\u8a66\u3059\u3002\n\n    % qemu-system-x86_64 ...\n    % ssvncviewer 127.0.0.1:5900\n\n\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3001qemu\u306b\u308f\u305f\u3059\n----------------------------------\n\n    % qemu-img create -f qcow2 gentoo.img 100G\n    % qemu-system-x86_64 ... -hda gentoo.img\n\n\u30b2\u30b9\u30c8OS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n--------------------\n\n### \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u7528\u610f\n\n    % parted /dev/sda\n    (parted) mklabel gpt\n    (parted) unit mib\n    (parted) print\n    (parted) mkpart grub 1 3\n    (parted) set 1 bios_grub on\n    (parted) mkpart boot 3 1000\n    (parted) set 2 boot on\n    (parted) mkpart swap 1000 7000\n    (parted) mkpart rootfs 7000 -1\n    (parted) print\n\n### Swap\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\n\n    # mkswap /dev/sda3\n    # swapon /dev/sda3\n    # free -h\n\n### \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u4f5c\u6210\u3068\u30de\u30a6\u30f3\u30c8\n\n    # mkfs.ext4 /dev/sda2\n    # mkfs.ext4 /dev/sda4\n    # mount /dev/sda4 /mnt/gentoo/\n    # mkdir /mnt/gentoo/boot\n    # mount /dev/sda2 /mnt/gentoo/boot\n    # ls /mnt/gentoo\n    # ls /mnt/gentoo/boot\n\n### \u65e5\u4ed8\u3051\u3068\u6642\u523b\u306e\u78ba\u8a8d\n\n    # date\n    # rc-service ntp-client start\n    # date\n\n    # hwclock\n    # hwclock --systohc\n    # hwclock\n\n### Stage3\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3059\u308b\u3002\n\n    # cd /mnt/gentoo/\n\n\u3064\u304e\u306e\u3088\u3046\u306bGentoo\u306e\u30df\u30e9\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n    # links https://www.gentoo.org/downloads/mirrors/#JP\n\n\u3053\u3053\u304b\u3089\u30df\u30e9\u30fc\u30b5\u30a4\u30c8\u3092\u9078\u3073\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u305f\u3069\u308b\u3002\n\n* releases\n* amd64\n* autobuilds\n* current-stage3-amd64\n\n\u3064\u304e\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3002\n\n    stage3-amd64-201XXXXX.tar.bz2\n\n\u89e3\u51cd\u3057\u3066\u8a2d\u7f6e\u3059\u308b\u3002\n\n    # tar xvjpf stage3-amd64-201XXXXX.tar.bz2 --xattrs\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    # vi /mnt/gentoo/etc/portage/make.conf\n    CFLAGS=\"-march=native -O2 -pipe\"\n    ...\n    MAKEOPTS=\"-j2\"\n\n### \u65b0\u3057\u3044\u30b7\u30b9\u30c6\u30e0\u306b\u5165\u308b\n\n    # cp -L /etc/resolv.conf /mnt/gentoo/etc/\n    # mount -t proc proc /mnt/gentoo/proc\n    # mount --rbind /sys /mnt/gentoo/sys\n    # mount --make-rslave /mnt/gentoo/sys\n    # mount --rbind /dev /mnt/gentoo/dev\n    # mount --make-rslave /mnt/gentoo/dev\n    # chroot /mnt/gentoo/ /bin/bash\n    # source /etc/profile\n    # export PS1=\"(chroot) $PS1\"\n\n### Portage\u6728\u306e\u53d6\u5f97\n\n    # emerge-webrsync\n    # emerge --sync\n    # eselect profile list\n    # eselect profile set 3\n\n### USE\u30d5\u30e9\u30b0\u306e\u8a2d\u5b9a\u306a\u3069\n\nTmux\u3068Vim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n    # emerge -av tmux\n    # emerge -pv vim\n    # USE=\"-X\" emerge -av vim\n\nCPU\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    # emerge -av cpuid2cpuflags\n    # cpuinfo2cpuflags-x86\n    # cpuinfo2cpuflags-x86 >> /etc/portage/make.conf\n\nUSE\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    # vim /etc/portage/make.conf\n    USE=\"bindist \\\n            nsplugin xft vim-syntax cjk m17n-lib nls unicode git postgres \\\n            zsh-complition\"\n\n\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3068\u30ed\u30b1\u30fc\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    # date\n    # echo \"Japan\" > /etc/timezone\n    # emerge --config sys-libs/timezone-data\n    # date\n\n    # vim /etc/locale.gen\n    ja_JP.UTF-8 UTF-8\n    # locale-gen\n    # eselect locale list\n    # eselect locale set 3\n\n### \u30ab\u30fc\u30cd\u30eb\u3092\u4f5c\u6210\u3059\u308b\n\n    # emerge -av gentoo-sources\n    # emerge -av pciutils\n    # cd /usr/src/linux\n    # make menuconfig\n\n\u4e00\u5ea6\u3001\u4fdd\u5b58\u7d42\u4e86\u3059\u308b\u3002\n\n    # lspci -k | grep -A 2 -i ethernet\n    ...\n            Kernel driver in use: e1000\n    # grep -i e1000 .config\n    CONFIG_E1000=y\n\nProcessor family\u306f\u3001\u3068\u308a\u3042\u3048\u305a\u30c7\u30d5\u30a9\u30eb\u30c8\u306eGeneric-x86-64\u3068\u3057\u3066\u304a\u304f\u3002\u3053\u3053\u306f\u3001\u305d\u306e\u3046\u3061\u306b\u3001\u3061\u3083\u3093\u3068\u8abf\u3079\u305f\u3044\u3002\n\n    # make menuconfig\n    [*] Networking support --->\n            <*> Plan 9 Resource Sharing Support (9P2000) --->\n    # grep -i p9 . config\n    CONFIG_NET_9P=y\n    # make menuconfig\n    File system --->\n            [*] Network File Systems --->\n                    <*> Plan 9 Resource Sharing Support (9P2000)\n                            [*] 9P POSIX Access Control Lists\n    Device Drivers --->\n            [*] Virtualization drivers\n                    Virtio drivers --->\n                            <*> PCI driver for virtio devices\n                                    [*] Support for legacy virtio draft 0.9.X and older devices\n    [*] Networking support --->\n            <*> Plan 9 Resource Sharing Support (9P2000) --->\n                    <*> 9P Virtio Transport\n    # grep -i 9p .config\n    CONFIG_NET_9P=y\n    CONFIG_NET_9P_VIRTIO=y\n    CONFIG_9P_FS=y\n    CONFIG_9P_FS_POSIX_ACL=y\n\n\u30d3\u30eb\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n    # make && make modules_install\n    # make install\n\ninitramfs\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n    # emerge -av genkernel\n    # ls /boot\n    # genkernel --install initramfs\n    # ls /boot\n\n### fstab\u3092\u4f5c\u6210\u3059\u308b\n\n    # e2label /dev/sda2 boot\n    # e2label /dev/sda4 root\n    # e2label /dev/sda2\n    boot\n    # e2label /dev/sda4\n    root\n    # swapoff /dev/sda3\n    # mkswap -L swap /dev/sda3\n    # swapon LABEL=swap\n    # free -h\n    # vim /etc/fstab\n    LABEL=boot        /boot       ext4    noauto,noatime  1 2\n    LABEL=root        /           ext4      noatime         0 1\n    LABEL=swap        none        swap      sw              0 0\n    /dev/cdrom        /mnt/cdrom  auto      noauto,ro       0 0\n\n### \u30db\u30b9\u30c8\u540d\u306a\u3069\u3092\u8a2d\u5b9a\u3059\u308b\n\n    # vim /etc/conf.d/hostname\n    hostname=\"gentoo_2017\"\n    # vim /etc/conf.d/net\n    dns_domain_lo=\"local.hogehoge.jp\"\n    # vim /etc/hosts\n    127.0.0.1    gentoo_2017 gentoo_2017.local.iocikun.jp localhost\n    ::1          gentoo_2017 gentoo_2017.local.iocikun.jp localhost\n\n### \u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\n\n    # passwd\n\n### \u30b7\u30b9\u30c6\u30e0\u30c4\u30fc\u30eb\u3092\u5c0e\u5165\n\n    # emerge -av metalog\n    # rc-update add metalog default\n\n    # emerge -av fcron\n    # rc-update add fcron default\n    # crontab /etc/crontab\n\n    # emerge -av mlocate\n    # emerge -av dhcpcd\n\n### \u30d6\u30fc\u30c8\u30ed\u30fc\u30c0\u3092\u5c0e\u5165\n\n    # emerge -av grub\n    # grub-install /dev/sda\n    # grub-mkconfig -o /boot/grub/grub.cfg\n\n### \u518d\u8d77\u52d5\u3059\u308b\n\n    # exit\n    # exit\n    # halt\n\n\u30b2\u30b9\u30c8\u5074\u3067\n\n    \u30d1\u30b9\u30ef\u30fc\u30c9: ****\n    # qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot c -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=qemu-ifup,downscript=qemu-ifdown -vnc :0 -monitor stdio -vga cirrus -fsdev local,id=hoge,path=/home/tatsuya/hoge,security_model=mappend -device virtio-9p-pci,fsdev=hoge,mount_tag=v_hoge -hda gentoo.img\n\n### \u30ed\u30fc\u30ab\u30e9\u30a4\u30ba\u306e\u305f\u3081\u306e\u30d5\u30e9\u30b0\u3092\u8a2d\u5b9a\n\n    # vim /etc/portage/make.conf\n    LINGUAS=\"ja\"\n    L10N=\"ja\"\n\n...\n\nvirtfs\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5171\u6709\u304c\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u8a66\u3059\n-----------------------------------------\n\n    # mkdir /mnt/free\n    # chmod 0700 /mnt/free\n    # mount -t 9p -o trans=virtio v_hoge /mnt/free\n    # touch /mnt/free/hogera\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u6697\u53f7\u5316\u3068\u3001\u305d\u306e\u30de\u30a6\u30f3\u30c8\n---------------------------------\n\n\u3055\u304d\u306b\u3001\u307e\u3061\u304c\u3048\u3066\u6d88\u3055\u306a\u3044\u3088\u3046\u306bgentoo.img\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3057\u3066\u304a\u3053\u3046\u3002\u540c\u3058\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u5185\u306a\u306e\u3067\u3001\u6545\u969c\u306a\u3069\u3078\u306e\u9632\u5fa1\u306b\u306f\u306a\u3089\u306a\u3044\u304c\u3001\u30b1\u30a2\u30ec\u30b9\u30df\u30b9\u3078\u306e\u9632\u5fa1\u306b\u306f\u306a\u308b\u3002\u5b9f\u306f\u3001\u30ea\u30b9\u30af\u3068\u3057\u3066\u306f\u3001\u3053\u308c\u304c\u4e00\u756a\u5927\u304d\u3044\u3002\n\n\u307e\u305a\u306fLVM\u4e0a\u306e\u8ad6\u7406\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u62e1\u5927\u3059\u308b\u3002\n\n    % sudo lvextend -L +10G /dev/mapper/vg-home\n    % sudo resize2fs /dev/mapper/vg-home\n\n\u30b3\u30d4\u30fc\u3057\u3066\u304a\u3053\u3046\u3002\n\n    % mkdir backup\n    % cp gentoo.img backup/\n    % md5sum gentoo.img\n    c7c1a7f36d027db6a8982ee453e27131 gentoo.img\n    % md5sum backup/gentoo.img\n    c7c1a7f36d027db6a8982ee453e27131 backup/gentoo.img\n\nntfs\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u30de\u30a6\u30f3\u30c8\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n-----------------------------------------\n\n    % zcat /proc/config.gz | grep -i ntfs\n    # CONFIG_NTFS_FS is not set\n    % sudo make menuconfig\n    File systems --->\n            DOS/FAT/NT Filesystems --->\n                    <*> NTFS file system support\n                            [*] NTFS write support\n    % sudo mount /boot\n    % sudo make && sudo make modules_install\n    % sudo make install\n    % exit\n    % exit\n\nX\u3092\u843d\u3068\u3057\u3066\u3001\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n    % zcat /proc/config.gz | grep -i ntfs\n    CONFIG_NTFS_FS=y\n    # CONFIG_NTFS_DEBUG is not set\n    CONFIG_NTFS_RW=y\n    % sudo mount /dev/sdb1 /mnt/free\n\n\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u30a4\u30e1\u30fc\u30b8\u3092\u6697\u53f7\u5316\u3057\u305f\u30c7\u30a3\u30b9\u30af\u306b\u30b3\u30d4\u30fc\u3059\u308b\n------------------------------------------------\n\n### cryptsetup\u3068parted\u3092\u5c0e\u5165\u3059\u308b\n\n    % sudo emerge -av cryptsetup\n    % sudo emerge -av parted\n\n### \u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u5207\u308b\n\n    % sudo parted /dev/sdb\n    (parted) mklabel gpt\n    (parted) unit gb\n    (parted) mkpart pass1 1 250\n    (parted) mkpart pass2 250 -1\n    (parted) print\n    (parted) quit\n\n### \u30ab\u30fc\u30cd\u30eb\u306e\u8a2d\u5b9a\n\n    % zcat /proc/config.gz | grep -i dm_crypt\n    # CONFIG_DM_CRYPT is not set\n    % cd /usr/src/linux\n    % sudo make menuconfig\n    Device Drivers --->\n            [*] Multiple device driver support (RAID and LVM) --->\n                    <*> Crypt target support\n    Cryptgraphic API --->\n            <*> XTS support\n    % sudo mount /boot\n    % sudo make && sudo make modules_install\n    % sudo make install\n    % exit\n    % exit\n\n\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n    % zcat /proc/config.gz | grep -i dm_crypt\n    CONFIG_DM_CRYPT=y\n    % sudo cryptsetup luksFormat /dev/sdb1\n    % sudo cryptsetup luksOpen /dev/sdb1 pass1\n    % sudo mkfs.ext4 /dev/mapper/pass1\n    % sudo mount /dev/mapper/pass1 /mnt/free\n    % ls /mnt/free\n    lost+found\n    % sudo e2label /dev/mapper/pass1 pass1\n    % sudo e2label /dev/mapper/pass1\n    % sudoedit /etc/fstab\n    LABEL=pass1    /mnt/pass1    ext4     noauto,noatime 0 2\n    % sudo umount /mnt/free\n    % sudo mkdir /mnt/pass1\n    % sudo chmod 0700 /mnt/pass1\n    % sudo mount /mnt/pass1\n    % sudo mkdir /mnt/pass1/tatsuya\n    % sudo chown tatsuya:tatsuya /mnt/pass1/tatsuya\n    % ln -s /mnt/pass1/tatsuya pass1\n    % mkdir pass1/guests\n    % cp gentoo.img pass1/guests\n\n\u30db\u30b9\u30c8OS\u5074\u3092\u3059\u3053\u3057\u6574\u3048\u308b\n---------------------\n\n    % sudo cp qemu-ifup /etc\n    % sudo cp qemu-ifdown /etc\n\n\u30b2\u30b9\u30c8OS\u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n\n    % qemu-system-x86_64 -enable-kvm -cdrom /dev/cdrom -boot c -m 2047 -net nic,macaddr=00:00:00:00:00:01,model=e1000 -net tap,ifname=tap0,script=/etc/qemu-ifup,downscript=/etc/qemu-ifdown -vnc :0 -monitor stdio -vga cirrus -fsdev local,id=hoge,path=/home/tatsuya/hoge,security_model=mapped -device virtio-9p-pci,fsdev=hoge,mount_tag=v_hoge -hda ~/pass1/guests/gentoo.img\n\n    % qemu-system-x86_64 ...(\u4e0a\u306e\u30b3\u30de\u30f3\u30c9\u306ehoge\u3092pass1\u306b\u7f6e\u304d\u63db\u3048\u308b)\n    % echo 'qemu-system-x86_64 ...' > ~/pass1/guests/run_gentoo.sh\n    % chmod +x ~/pass1/guests/run_gentoo.sh\n    % vim ~/pass1/guests/run_gentoo.sh\n    (\u5148\u982d\u306b#!/bin/sh\u3092\u8ffd\u52a0)\n\n\u30b2\u30b9\u30c8OS\u306e\u74b0\u5883\u3092\u6574\u3048\u308b\n--------------------\n\n    % ~/pass1/guets/run_gentoo.sh\n    % ssvnc 127.0.0.1:5900 -scale 1.1\n    (root\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30b2\u30b9\u30c8OS\u306b\u30ed\u30b0\u30a4\u30f3\u3059\u308b)\n    # tmux\n\n### \u30cf\u30a4\u30d0\u30cd\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\n\n    # blkid /dev/sda3\n    # vim /etc/default/grub\n    GRUB_CMDLINE_LINUX_DEFAULT=\"resume=/dev/sda3\"\n    # mount /boot\n    # grub-mkconfig -o /boot/grub/grub.cfg\n    # echo disk > /sys/power/state\n\n\u3053\u308c\u3067\u30b2\u30b9\u30c8OS\u304c\u7d42\u4e86\u3059\u308b\u3002\u30db\u30b9\u30c8OS\u304b\u3089\n\n    % ~/pass1/guests/run_gentoo.sh\n    % ssvnc 127.0.0.1:5900 -scale 1.1\n\n\u4e2d\u65ad\u3057\u305f\u3068\u3053\u308d\u306b\u5fa9\u5e30\u3059\u308b\u3002\n\n### \u4e00\u822c\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3068sudo\u306e\u5c0e\u5165\n\n    # useradd -m -G users,portage,wheel -s /bin/bash yoshio\n    # passwd yoshio\n\n\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3002\n\n    $ tmux\n    $ su\n    # emerge -av sudo\n    # eselect editor list\n    # eselect editor set 3\n    # . /etc/profile\n    # visudo\n    %wheel ALL=(ALL) ALL\n    # exit\n    $ sudo echo hoge\n    hoge\n\n### \u4e00\u822c\u30e6\u30fc\u30b6\u3067\u306e\u30cf\u30a4\u30d0\u30cd\u30fc\u30c8\n\n    $ echo disk | sudo tee /sys/power/state\n    $ . /etc/profile\n    $ sudoedit /usr/local/bin/hibernate\n    #!/bin/sh\n    echo disk | sudo tee /sys/power/state\n    $ sudo chmod +x ls /usr/local/bin/hibernate\n    $ hibernate\n\n### Zsh\u306e\u5c0e\u5165\n\n    $ sudo emerge -av zsh\n    $ sudo vipw\n    (\u4f7f\u3063\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306ebash\u3092zsh\u306b)\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3068\u3001zsh\u306e\u8a2d\u5b9a\u30c4\u30fc\u30eb\u304c\u8d77\u52d5\u3059\u308b\u306e\u3067\u3001\u5c65\u6b74\u306e\u4fdd\u5b58\u30921,000,000\u306b\u3057\u3066\u3001\u88dc\u5b8c\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3057\u3001vi\u6d41\u306e\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u306b\u3057\u3066\u3001\u62e1\u5f35\u30d1\u30bf\u30fc\u30f3\u30de\u30c3\u30c1\u3068\u80cc\u666f\u30b8\u30e7\u30d6\u306e\u7d42\u4e86\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u306e\u901a\u77e5\u3092\u6709\u52b9\u306b\u3059\u308b\u3002\n\n    % vim .zshrc\n    setopt share_history\n\n\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n    % vim .zshrc\n    PROMPT=\"%{^[[;32;1m%}[%D{%H:%M}] %#%{^[[m%} \"\n    PROMPT2=\"%_> \"\n    RPROMPT=\"[%40<...<%~]\"\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u304a\u3059\u3002\n\n### Tmux\u306e\u8a2d\u5b9a\n\n    % vim ~/.tmux.conf\n    set-window-option -g mode-keys vi\n\n    bind-key j resize-pane -D\n    bind-key k resize-pane -U\n    bind-key J resize-pane -D 8\n    bind-key K resize-pane -U 8\n    bind-key O select-pane -U\n    % tmux\n\n### X\u3092\u5c0e\u5165\u3059\u308b\n\nXorg\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    % sudoedit /etc/portage/make.conf\n    USE=\"... \\\n            ... \\\n            zsh-completion clang llvm\"\n    ...\n    INPUT_DEVICES=\"evdev\"\n    VIDEO_CARDS=\"cirrus\"\n    % sudo emerge -av xorg-server twm xterm xclock\n    % exit\n    % exit\n    % startx\n\n### \u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\n\n    % sudo emerge -avu --deep @system\n    % sudo emerge -avu --deep --newuse @system\n    % sudo emerge -avu --deep --newuse @world\n    % sudo emerge -av --depclean\n    % sudo emerge --sync\n    % sudo emerge -avu --deep --newuse @system\n    % sudo emerge -avu --deep --newuse @world\n\n### Xmonad\u306e\u5c0e\u5165\n\n\u3055\u304d\u306b\u30db\u30b9\u30c8\u5074\u306e\u30ad\u30fc\u30d0\u30a4\u30f3\u30c9\u3092\u5909\u66f4\u3057\u3066\u304a\u304f\u3002\u307e\u305a\u306fxmodmap\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    % sudo emerge -av xmodmap\n\n\u3044\u304f\u3064\u304b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210/\u7de8\u96c6\u3059\u308b\u3002\n\n    % vim .Xmodmap\n    keycode 102 = Meta_L\n    keycode 100 = Meta_R\n\n    remove mod1 = Meta_L\n    remove mod1 = Alt_L\n    remove mod1 = Alt_R\n\n    add mod3 = Meta_R\n    add mod3 = Meta_L\n    remove mod3 = Alt_L\n    remove mod3 = Alt_R\n    add mod1 = Alt_L\n    add mod1 = Alt_R\n    % vim .xmonad/xmonad.hs\n    ...\n    xmonad defaultConfig {\n            ...\n            modMask    = mod3Mask\n            }\n    % vim .xinitrc\n    export XMODIFIERS=\"@im=uim\"\n    uim-xim --engine=tutcode &\n    xmodmap .Xmodmap\n    exec xmonad\n\n\u30b2\u30b9\u30c8\u3092\u4e2d\u65ad\u3059\u308b\u3002\n\n    % hibernate\n\nX\u3092\u843d\u3068\u3057\u3066\u3001\u307e\u305f\u5165\u308a\u306a\u304a\u3059\u3002Alt\u3067\u306f\u306a\u304fCmd\u3067Xmonad\u4e0a\u306e\u3044\u308d\u3044\u308d\u306a\u64cd\u4f5c\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n\u30b2\u30b9\u30c8\u5074\u306b\u3082\u3069\u308b\u3002\u30db\u30b9\u30c8\u5074\u3067\u3001\u3064\u304e\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n    % ~/pass1/guests/run_gentoo.sh\n    % ssvncviewer 127.0.0.1:5900 -scale 1.1\n\n\u30b2\u30b9\u30c8\u3067xmonad\u3092\u5c0e\u5165\u3059\u308b\u3002\n\n    % sudo emerge -av xmonad\n    % vim .xinitrc\n    exec xmonad\n    % exit\n    % exit\n    % startx\n\nAlt + Shift + Enter\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3002\n\n    % exit\n\nAlt + Shift + q\u3067X\u3092\u843d\u3068\u3059\u3002\n\n    % emerge -pv rxvt-unicode\n    % sudoedit /etc/portage/package.use/rxvt-unicode\n    x11-terms/rxvt-unicode -vanilla 256-color unicode3 wcwidth\n    % sudo emerge -av rxvt-unicode\n    % vim .Xdefaults\n    urxvt*background: black\n    urxvt*foreground: snow\n    urxvt*color12: #7799FF\n\n    urxvt*saveLines: 0\n    % vim .zshrc\n    ...\n    alias ls='ls --color=auto'\n    alias grep='grep --color=auto'\n    % vim .xmonad/xmonad.hs\n    import XMonad\n\n    main :: IO ()\n    main = do\n            xmonad defaultConfig {\n                    terminal        = \"urxvt\"\n                    }\n    % startx\n\n### firefox\u306e\u5c0e\u5165\n\n    % emerge -pv firefox\n    % sudoedit /etc/portage/package.use/python\n    dev-lang/python sqlite\n    % sudo emerge -av firefox\n\n### \u554f\u984c\u767a\u751f\u3001virtfs\u306f\u30b7\u30e0\u30ea\u30f3\u30af\u3092\u6307\u5b9a\u3059\u308b\u3068\u30c0\u30e1?\n\n\u30b2\u30b9\u30c8\u3067\u3064\u304e\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u305f\u3068\u3053\u308d\u3001\u30d7\u30ed\u30f3\u30d7\u30c8\u304c\u304b\u3048\u3063\u3066\u3053\u306a\u304f\u306a\u3063\u305f\u3002\n\n    % sudo mount -t 9p -o trans=virtio v_pass1 /mnt/free\n\n\u3069\u3046\u3084\u3089\u3001virtfs\u3067\u306f\u30b7\u30e0\u30ea\u30f3\u30af\u3092\u6307\u5b9a\u3057\u3066\u306f\u30c0\u30e1\u306a\u3088\u3046\u3060\u3002run_gentoo.sh\u3092\u66f8\u304d\u63db\u3048\u308b\u3002\u30db\u30b9\u30c8\u3067\u3001\n\n    % vim ~/pass1/guests/run_gentoo.sh\n    qemu-system-x86_64 ...\n    (/home/tatsuya/pass1\u306e\u3068\u3053\u308d\u3092/mnt/pass1/tatsuya\u3068\u3059\u308b)\n\n\u30b2\u30b9\u30c8OS\u3092\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u3001\u518d\u5ea6\u7acb\u3061\u4e0a\u3052\u308b\u3002\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\n\n    % sudo mount -t 9p -o trans=virtio v_pass /mnt/free\n    % ls /mnt/free\n\n### \u65e5\u672c\u8a9e\u5165\u529b\n\n    % sudo emerge -av uim\n    % vim .xinitrc\n    export XMODIFIERS=\"@im=uim\"\n    uim-xim --engine=tutcode &\n    exec xmonad\n    % uim-pref-gtk\n\nTUT-code\u306evi\u5354\u8abf\u30e2\u30fc\u30c9\u3001\u5165\u529b\u30e2\u30fc\u30c9\u3092\u30ab\u30fc\u30bd\u30eb\u306e\u8fd1\u304f\u306b\u8868\u793a\u3059\u308b\u306a\u3069\u3002\n\n\u30db\u30b9\u30c8\u5074\u3067\n\n    % mkdir pass1/tmp\n    % cp .mazegaki.dic pass1/tmp/\n\n\u30b2\u30b9\u30c8\u5074\u3067\n\n    % cp ~/pass1/tmp/.mazegaki.dic ~/\n\n\u4e00\u5ea6X\u3092\u306c\u3051\u3066\u518d\u5ea6\u5165\u308b\u3002\n\n    % startx\n\nShift + Space\u3067\u65e5\u672c\u8a9e\u5165\u529b\u3001\u6f22\u5b57\u5165\u529b\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n### vimperator\u3092\u5c0e\u5165\n\n    % firefox\n\nvimperator\u3067\u691c\u7d22\u3057\u30a2\u30c9\u30aa\u30f3\u3092\u5165\u308c\u308b\u3002\n\n    % vim .vimperatorrc\n    (\u3042\u3068\u3067\u66f8\u304f)\n\n### dmenu\u3092\u5c0e\u5165\n\n    % sudo emerge -av dmenu\n\n### xmobar\u3092\u5c0e\u5165\u3059\u308b\n\n    % sudo emerge -av xmobar\n\n### \u554f\u984c\u767a\u751f\u3002virtfs?\n\nvirtfs\u3067\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30d5\u30ea\u30fc\u30ba\u3057\u305f\u3002\n\nsecurity=mapped\u3092none\u306b\u3057\u3066\u8a66\u3057\u3066\u307f\u3088\u3046\u304b?\n\n    % vim ~/pass1/guests/run_gentoo.sh\n    (mapped\u3092none\u306b\u3057\u305f)\n\n### hibernate\u3092\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3057\u3067\n\n    % sudo visudo\n    yoshio ALL=(ALL) NOPASSWD: /usr/local/bin/hibernate\n\n### xmobar\u3092\u5c0e\u5165(\u7d9a\u304d)\n\n\u30db\u30b9\u30c8\u3067\n\n    % cp ~/.xmobarrc ~/pass1/tmp/\n\n\u30b2\u30b9\u30c8\u3067\n\n    % sudo emerge -av xmonad-contrib\n    % vim .xmonad/xmonad.hs\n    import XMonad\n    import XMonad.Util.Run (spawnPipe, hPutStrLn)\n    import XMonad.Hooks.DynamicLog (dynamicLogWithPP, defaultPP, ppOutput)\n\n    import XMonad.Hooks.ManageDocks (avoidStruts)\n    import XMonad.Layout.NoBorders (smartBorders)\n\n    import Control.Concurrent\n\n    myLayout = avoidStruts (tiled ||| Mirror tiled ||| Full) ||| Full\n            where tiled = Tall 1 (3 / 100) (1 / 2)\n\n    main :: IO ()\n    main = do\n            h <- spawnPipe \"xmobar\"\n            threadDelay 500000\n            xmonad defaultConfig {\n                    terminal        = \"urxvt\"\n                    layouthook      = smartBorders myLayout,\n                    logHook         = dynamicLogWithPP { ppOutput = hPutStrLn h }\n                    }\n\n### Mutt\u306e\u5c0e\u5165\u3068\u8a2d\u5b9a\n\n\u307e\u305a\u306f\u3001\u30cf\u30fc\u30c9\u30c7\u30a3\u30b9\u30af\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u5834\u6240\u3092\u6c7a\u3081\u308b\u3002\n\n    % sudoedit /etc/fstab\n    v_pass1    /home/yoshio/pass1    9p    trans=virtio    0 0\n    % sudo umount /mnt/free\n    % sudo mount /home/yoshio/pass1\n\n\u4e00\u5ea6\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3057\u3066\u7acb\u3061\u4e0a\u3052\u306a\u304a\u3057\u3066\u3001\u81ea\u52d5\u3067\u30de\u30a6\u30f3\u30c8\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n#### \u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n    % sudoedit /etc/portage/package.use/mutt\n    mail-client/mutt gpg imap mbox smtp\n    % sudo emerge -av mutt\n    % sudoedit /etc/portage/package.use/procmail\n    mail-filter/procmail mbox\n    % sudo emerge -av fetchmail msmtp procmail\n\n    % vim ~/.fetchmailrc\n    (\u3042\u3068\u3067\u66f8\u304f)\n    % fetchmail -akv -m \"/usr/bin/procmail -d %T\"\n    % vim .procmailrc\n    (\u3042\u3068\u3067\u66f8\u304f)\n    % fetchmail -akv -m \"/usr/bin/procmail -d %T\"\n    % vim ~/.muttrc\n    (\u3042\u3068\u3067\u66f8\u304f)\n    % sudo emerge -av w3m\n    % vim ~/.mailcap\n    (\u3042\u3068\u3067\u66f8\u304f)\n\n#### \u53e4\u3044\u30e1\u30fc\u30eb\u306a\u3069\u3092\u53d6\u308a\u8fbc\u3080\n\nbackup\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002\u30db\u30b9\u30c8\u3067\n\n    % mkdir backup\n    % mkdir backup/git\n    % vim pass1/guests/run_gentoo.sh\n    (\u3042\u3068\u3067\u66f8\u304f)\n\n\u30b2\u30b9\u30c8\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n    % sudoedit /etc/fstab\n    (\u3042\u3068\u3067\u66f8\u304f)\n    % sudoedit ~/.msmtprc\n    (\u3042\u3068\u3067\u66f8\u304f)\n\n    % sudo emerge -av urlview\n\n### SSH\u306e\u8a2d\u5b9a\n\n    % cp .../id_rsa ~/.ssh/\n    % cp .../id_rsa.pub ~/.ssh/\n\n### firefox\u3067PDF\u3092\u8868\u793a\u3059\u308b\n\n\u3068\u304f\u306b\u4f55\u3082\u3059\u308b\u5fc5\u8981\u3082\u306a\u304b\u3063\u305f\u3002\n\n### firefox\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5909\u66f4\n\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\"\u304b\u3089\"download\"\u306b\u3059\u308b\u3002\n\n### Haskell\u306eStack\u3092\u5c0e\u5165\u3059\u308b\n\n    % sudoedit /etc/portage/package.use/ncurses\n    sys-libs/ncurses tinfo\n    % sudo emerge -av ncurses\n    % curl -sSL https://get.haskellstack.org/ | sh\n    % vim ~/.zshrc\n    ...\n    path=($HOME/.local/bin(N-/) $path)\n    % stack setup\n\n### yesod\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\n    % cd\n    % mkdir yesod\n    % cd yesod\n    % stack new testProject yesod-simple\n    % cd testProject\n    % stack install yesod-bin cabal-install --install-ghc\n    % stack build\n    % stack exec -- yesod devel\n\n\u30d6\u30e9\u30a6\u30b6\u3067http://localhost:3000 \u306b\u63a5\u7d9a\u3059\u308b\u3068Yesod\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30da\u30fc\u30b8\u304c\u898b\u3089\u308c\u308b\u3002\n\n### keter\u306b\u307e\u3068\u3081\u308b\n\n    % vi config/keter.yml\n    user-edited: true\n    ...\n    hosts:\n      ...\n      - www.hogehoge.jp\n    ...\n    # Static files.\n    - type: static-files\n      hosts:\n        - www.hogehoge.jp\n\n    % stack exec -- yesod keter\n\n**!!\u3053\u3053\u307e\u3067\u3084\u3063\u305f!!**\n\n### \u3055\u304f\u3089\u306eVPS\u3067keter\u3067\u307e\u3068\u3081\u305fWeb\u30a2\u30d7\u30ea\u3092\u516c\u958b\u3057\u3066\u307f\u308b\n", "tags": ["Gentoo", "xmonad", "\u672a\u5b8c", "\u74b0\u5883\u69cb\u7bc9", "\u81ea\u5206\u7528\u30e1\u30e2"]}