{"context": "\u74b0\u5883\u69cb\u7bc9\u306f \u3053\u3061\u3089\u3002\n\u30b3\u30fc\u30c9\u306f GitHub \u306b\u4e0a\u3052\u3066\u307e\u3059\u3002\nhttps://github.com/opengl8080-javaee-samples/servlet-jsp\n\nServlet \u3068\u306f\nJava \u3067 Web \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3068\u304d\u306e\u57fa\u790e\u3068\u306a\u308b\u4ed5\u7d44\u307f\u30fb\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\nJava EE \u306f\u77e5\u3089\u306a\u3044\u3051\u3069\u3001 Servlet \u306a\u3089\u77e5\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u4eba\u306f\u591a\u3044\u304b\u3068\u3002\nJava \u3067 Web \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u5834\u5408\u3001 Servlet \u3092\u76f4\u63a5\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306f\u57fa\u672c\u7684\u306b\u7121\u3044\u3002\u666e\u901a\u306f\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u3046\uff08Struts, JSF, JAX-RS, Spark, etc...\uff09\u3002\n\u3057\u304b\u3057\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f Servlet \u306e\u4e0a\u3067\u52d5\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u3044\u3053\u306a\u3059\u305f\u3081\u306b\u306f Servlet \u306e\u77e5\u8b58\u304c\u5fc5\u8981\u306b\u306a\u308b\u3068\u304d\u304c\u3042\u308b\u3002\u307e\u305f\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304c\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u6a5f\u80fd\u3092\u88dc\u5b8c\u3059\u308b\u305f\u3081\u306b\u3001\u3000Servlet \u304c\u63d0\u4f9b\u3059\u308b API \u3092\u30d7\u30ed\u30b0\u30e9\u30de\u304c\u76f4\u63a5\u89e6\u308b\u6a5f\u4f1a\u306f\u7d50\u69cb\u591a\u3044\uff08HttpServletRequest \u3084 HttpServletResponse \u306a\u3069\uff09\u3002\n\nHello World\n\u3042\u3048\u3066 web.xml \u3092\u4f7f\u3063\u305f\u57fa\u672c\u7684\u306a\u65b9\u6cd5\u3067 Servlet \u3092\u5b9f\u88c5\u3059\u308b\u3002\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30eb\u30fc\u30c8\u3092 servlet \u306b\u3057\u3066 Web \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\nHelloServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class HelloServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        try (PrintWriter writer = response.getWriter()) {\n            writer.println(\"<h1>Hello Servlet!!</h1>\");\n        }\n    }\n}\n\n\n\nweb.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app version=\"3.1\"\n         xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\">\n\n  <servlet>\n    <servlet-name>HelloServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.HelloServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>HelloServlet</servlet-name>\n    <url-pattern>/hello</url-pattern>\n  </servlet-mapping>\n\n</web-app>\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3001 Web \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/hello \u3092\u958b\u304f\u3002\n\n\nServlet \u306f\u3001 HttpServlet \u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u3042\u3063\u305f URL \u3068\u5b9f\u884c\u3059\u308b Servlet \u306e\u30de\u30c3\u30d4\u30f3\u30b0\u306f\u3001 web.xml \u306b\u8a18\u8ff0\u3059\u308b\u3002\n\n\n\n<servlet> \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u3001 Servlet \u30af\u30e9\u30b9\u3092\u5ba3\u8a00\u3059\u308b\u3002\n\n<servlet-mapping> \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u3001 Servlet \u3068 URL \u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n\n\n\nHttpServlet \u30af\u30e9\u30b9\u304c\u6301\u3064 do***() \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u3068\u3001 Servlet \u306e URL \u306b\u9001\u3089\u308c\u3066\u304d\u305f HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\n*** \u306e\u90e8\u5206\u306f\u3001 HTTP \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\uff08GET, POST, PUT, DELETE \u306a\u3069\uff09\u304c\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u3044\u306a\u3044 HTTP \u30e1\u30bd\u30c3\u30c9\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u98db\u3093\u3067\u304f\u308b\u3068\u3001 HttpServlet \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5b9f\u88c5\u304c 405 - Method Not Allowed \u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n\n\nServlet \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\nServlet \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3044\u3064\u751f\u6210\u3055\u308c\u3066\u3001\u3044\u3064\u7834\u68c4\u3055\u308c\u308b\u306e\u304b\u306b\u3064\u3044\u3066\u3002\n\nLifeCycleServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class LifeCycleServlet extends HttpServlet {\n\n    @Override\n    public void init() throws ServletException {\n        System.out.println(\"init() : hash=\" + this.hashCode());\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) {\n        System.out.println(\"doGet() : hash=\" + this.hashCode());\n    }\n\n    @Override\n    public void destroy() {\n        System.out.println(\"destroy() : hash=\" + this.hashCode());\n    }\n}\n\n\n\nweb.xml\n  <servlet>\n    <servlet-name>LifeCycleServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.LifeCycleServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>LifeCycleServlet</servlet-name>\n    <url-pattern>/lifecycle</url-pattern>\n  </servlet-mapping>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/lifecycle \u3092\u958b\u304d\u3001\u4f55\u5ea6\u304b F5 \u3092\u5b9f\u884c\u3057\u305f\u3042\u3068 GlassFish \u3092\u505c\u6b62\u3055\u305b\u308b\u3002\n\nGlassFish\u306e\u30ed\u30b0\u51fa\u529b\n\u60c5\u5831:   init() : hash=1092915953, thread=http-listener-1(4)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(4)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(1)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(5)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(3)\n\u60c5\u5831:   Server shutdown initiated\n\u60c5\u5831:   Unregistered com.sun.enterprise.glassfish.bootstrap.osgi.EmbeddedOSGiGlassFishImpl@70e02081 from service registry.\n\u60c5\u5831:   FileMonitoring shutdown\n\u60c5\u5831:   JMXStartupService: Stopped JMXConnectorServer: null\n\u60c5\u5831:   JMXStartupService and JMXConnectors have been shut down.\n\u60c5\u5831:   destroy() : hash=1092915953, thread=RunLevelControllerThread-1419038746038\n\n\n\nServlet \u306f\u3001\u6700\u521d\u306b URL \u306b\u30a2\u30af\u30bb\u30b9\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n\n\u3053\u306e\u3068\u304d\u3001 init() \u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n\n\u4e00\u5ea6\u751f\u6210\u3055\u308c\u305f Servlet \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u7834\u68c4\u3055\u308c\u308b\u3053\u3068\u306a\u304f\u4f7f\u3044\u307e\u308f\u3055\u308c\u308b\u3002\n\n\n\u3053\u306e\u3068\u304d\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u7528\u3059\u308b\u30b9\u30ec\u30c3\u30c9\u306f\u6bce\u56de\u7570\u306a\u308b\u3002\n\u3088\u3063\u3066\u3001 Servlet \u3092\u5b9f\u88c5\u3059\u308b\u3068\u304d\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n\n\n\u4e00\u5b9a\u6642\u9593 Servlet \u306b\u30a2\u30af\u30bb\u30b9\u304c\u7121\u304b\u3063\u305f\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u304c\u505c\u6b62\u3059\u308b\u3068\u304d\u306b Servlet \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u7834\u68c4\u3055\u308c\u308b\u3002\n\n\n\u3053\u306e\u3068\u304d\u3001 destroy() \u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n\n\n\nHTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\n\nRequestParameterServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class RequestParameterServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        String queryParam = req.getParameter(\"queryParameter\");\n        System.out.println(\"queryParam=\" + queryParam);\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        try (BufferedReader br = req.getReader()) {\n            br.lines().forEach(System.out::println);\n        }\n    }\n}\n\n\n\nweb.xml\n  <servlet>\n    <servlet-name>RequestParameterServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.RequestParameterServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>RequestParameterServlet</servlet-name>\n    <url-pattern>/request-param-servlet</url-pattern>\n  </servlet-mapping>\n\n\n\nhtml/request.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Serlvet Request</title>\n  </head>\n  <body>\n    <form action=\"/servlet/request-param-servlet\" method=\"GET\">\n      <input type=\"text\" name=\"queryParameter\" />\n      <input type=\"submit\" value=\"GET\" />\n    </form>\n\n    <form action=\"/servlet/request-param-servlet\" method=\"POST\">\n      <input type=\"text\" name=\"textbox\" />\n      <textarea name=\"textarea\"></textarea>\n      <input type=\"submit\" value=\"POST\" />\n    </form>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067\u3001 http://localhost:8080/servlet/html/request.html \u3092\u958b\u304f\u3002\n\nGET \u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\ntext:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   queryParam=get parameter\n\nPOST \u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\ntext:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   textbox=textbox&textarea=textarea%0D%0Avalue\n\n\nHTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u60c5\u5831\u306f\u3001 HttpServletRequest \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\n\u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001 getParameter() \u30e1\u30bd\u30c3\u30c9\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002\n\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306f\u3001 getReader() \u30e1\u30bd\u30c3\u30c9\u3067\u53d6\u5f97\u3057\u305f BufferedReader \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306e\u53d6\u5f97\u306f\u3001 getInputStream() \u30e1\u30bd\u30c3\u30c9\u3067\u3082\u53d6\u5f97\u53ef\u80fd\u3002\n\u3069\u3061\u3089\u304b\u4e00\u65b9\u3092\u5148\u306b\u547c\u3073\u51fa\u3057\u305f\u5834\u5408\u3001\u4ed6\u65b9\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u4f7f\u3048\u306a\u304f\u306a\u308b\uff08IllegalStateException \u304c\u30b9\u30ed\u30fc\u3055\u308c\u308b\uff09\u3002\n\n\n\u3053\u308c\u3089\u4ee5\u5916\u306b\u3082\u3001 HTTP \u30d8\u30c3\u30c0\u30fc\u3084\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u60c5\u5831\uff08IP \u30a2\u30c9\u30ec\u30b9\u306a\u3069\uff09\u3082\u3001 HttpServletRequest \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\nServlet \u521d\u671f\u5316\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\n\nweb.xml\n  <servlet>\n    <servlet-name>InitParamServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.InitParamServlet</servlet-class>\n    <init-param>\n      <param-name>hoge</param-name>\n      <param-value>HOGE</param-value>\n    </init-param>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>InitParamServlet</servlet-name>\n    <url-pattern>/init-param</url-pattern>\n  </servlet-mapping>\n\n\n\nInitServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.ServletConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class InitParamServlet extends HttpServlet {\n\n    @Override\n    public void init(ServletConfig config) throws ServletException {\n        String hoge = config.getInitParameter(\"hoge\");\n        System.out.println(\"hoge=\" + hoge);\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response){\n    }\n}\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u304b\u3089 http://localhost:8080/servlet/init-param \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   hoge=HOGE\n\n\n\n\nweb.xml \u306e <servlet> \u30bf\u30b0\u5185\u3067\u3001 <init-param> \u30bf\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001 Servlet \u521d\u671f\u5316\u6642\u306b\u4efb\u610f\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\nServlet \u5074\u306f\u3001 ServletConfig \u3092\u53d7\u3051\u53d6\u308b init() \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u6642\u306b Servlet \u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n\nweb.xml\n  <servlet>\n    <servlet-name>FirstStartupServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.FirstStartupServlet</servlet-class>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n\n  <servlet>\n    <servlet-name>SecondStartupServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.SecondStartupServlet</servlet-class>\n    <load-on-startup>2</load-on-startup>\n  </servlet>\n\n  <servlet>\n    <servlet-name>ThirdStartupServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.ThirdStartupServlet</servlet-class>\n    <load-on-startup>3</load-on-startup>\n  </servlet>\n\n\n\nFirstStartupServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\n\npublic class FirstStartupServlet extends HttpServlet {\n\n    @Override\n    public void init() throws ServletException {\n        System.out.println(\"FirstStartupServlet.init()\");\n    }\n}\n\n\n\u203bSecondStartupServlet.java, ThirdStartupServlet.java \u306f\u51fa\u529b\u6587\u5b57\u5217\u304c\u9055\u3046\u3060\u3051\u3067\u3001\u540c\u3058\u5b9f\u88c5\u306a\u306e\u3067\u7701\u7565\u3002\n\u30b5\u30fc\u30d0\u30fc\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   FirstStartupServlet.init()\n\u60c5\u5831:   SecondStartupServlet.init()\n\u60c5\u5831:   ThirdStartupServlet.init()\n\n\n\n\nweb.xml \u306e <servlet> \u30bf\u30b0\u5185\u3067\u3001 <load-on-startup> \u30bf\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u6642\u306b Servlet \u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u5b9f\u884c\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u3053\u306e\u3068\u304d\u3001 <load-on-startup> \u30bf\u30b0\u3067\u6307\u5b9a\u3057\u305f\u9806\u5e8f\u3067 Servlet \u306e\u521d\u671f\u5316\u51e6\u7406\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n\nURL \u306e\u30de\u30c3\u30d4\u30f3\u30b0\n\nweb.xml\n  <servlet>\n    <servlet-name>UrlPatternWildCardServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.UrlPatternWildCardServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>UrlPatternWildCardServlet</servlet-name>\n    <url-pattern>/wildcard/*</url-pattern>\n  </servlet-mapping>\n\n  <servlet>\n    <servlet-name>UrlPatternExtensionServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.UrlPatternExtensionServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>UrlPatternExtensionServlet</servlet-name>\n    <url-pattern>*.sample</url-pattern>\n  </servlet-mapping>\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\n\n\nURL\n\u5b9f\u884c\u3055\u308c\u308b Servlet\n\n\n\n\n/servlet/wildcard\nUrlPatternWildCardServlet\n\n\n/servlet/wildcard/test\nUrlPatternWildCardServlet\n\n\n/servlet/test.sample\nUrlPatternExtensionServlet\n\n\n/servlet/test/test.sample\nUrlPatternExtensionServlet\n\n\n/servlet/wildcard/test.sample\nUrlPatternWildCardServlet\n\n\n\n\n\n<url-pattern> \u306b\u306f\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9 * \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u5225\u306e Servlet \u306b\u51e6\u7406\u3092\u59d4\u8b72\u3059\u308b\n\nweb.xml\n  <servlet>\n    <servlet-name>FromServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.FromServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>FromServlet</servlet-name>\n    <url-pattern>/forward/from</url-pattern>\n  </servlet-mapping>\n\n  <servlet>\n    <servlet-name>ToServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.ToServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>ToServlet</servlet-name>\n    <url-pattern>/forward/to</url-pattern>\n  </servlet-mapping>\n\n\n\nFromServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class FromServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        System.out.println(\"FromServlet.doGet()\");\n        req.getRequestDispatcher(\"/forward/to\").forward(req, resp);\n    }\n}\n\n\n\nToServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class ToServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        System.out.println(\"ToServlet.doGet()\");\n    }\n}\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/forward/from \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   FromServlet.doGet()\n\u60c5\u5831:   ToServlet.doGet()\n\n\n\n\nrequest.getRequestDispatcher(\"<\u51e6\u7406\u3092\u59d4\u8b72\u3059\u308b Servlet \u306e\u30d1\u30b9>\").forward(request, response) \u3067\u3001\u6307\u5b9a\u3057\u305f Servlet \u306b\u51e6\u7406\u3092\u59d4\u8b72\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u3053\u308c\u3092\u30d5\u30a9\u30ef\u30fc\u30c9\u3068\u547c\u3076\u3002\n\n\n\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\n\n\u57fa\u672c\n\nweb.xml\n  <servlet>\n    <servlet-name>AsyncServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.AsyncServlet</servlet-class>\n    <async-supported>true</async-supported>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>AsyncServlet</servlet-name>\n    <url-pattern>/async</url-pattern>\n  </servlet-mapping>\n\n\n\nAsyncServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.servlet.AsyncContext;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class AsyncServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        System.out.println(\"AsyncServlet start.\");\n\n        AsyncContext ctx = req.startAsync();\n\n        ctx.start(() -> {\n            try (PrintWriter pw = ctx.getResponse().getWriter()) {\n                Thread.sleep(5000);\n                System.out.println(\"async process.\");\n                pw.println(\"<h1>Async Process</h1>\");\n            } catch (IOException | InterruptedException ex) {\n                ex.printStackTrace();\n            } finally {\n                ctx.complete();\n            }\n        });\n\n        resp.getWriter().println(\"<h1>AsyncServlet</h1>\");\n\n        System.out.println(\"AsyncServlet end.\");\n    }\n}\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/async \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AsyncServlet start.\n\u60c5\u5831:   AsyncServlet end.\n\u60c5\u5831:   async process.\n\n\n5\u79d2\u307b\u3069\u7d4c\u904e\u3057\u3066\u304b\u3089\u3001\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\n\n\n\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u5834\u5408\u306f\u3001 Servlet \u306e\u5b9a\u7fa9\u306b <asyncasync-supported> \u3092\u8ffd\u52a0\u3057\u3066 true \u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\u3082\u3057 Servlet \u306e\u51e6\u7406\u306e\u524d\u306b Filter \u304c\u51e6\u7406\u3092\u631f\u3080\u5834\u5408\u306f\u3001\u305d\u306e Filter \u306b\u3082 async-supported \u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\n\nrequest.startAsync() \u3067 AsyncContext \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3002\n\nAsyncContext#start(Runnable) \u3067\u3001\u975e\u540c\u671f\u51e6\u7406\u3092\u958b\u59cb\u3059\u308b\u3002\n\u975e\u540c\u671f\u51e6\u7406\u4e2d\u306b HttpServletRequest \u3084 HttpServletResponse \u3092\u53d6\u5f97\u3057\u305f\u3044\u5834\u5408\u306f\u3001 AsyncContext \u304b\u3089\u53d6\u5f97\u3059\u308b\u3002\n\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001 AsyncContext#complete() \u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u77e5\u3089\u305b\u308b\uff08\u77e5\u3089\u305b\u306a\u3044\u3068\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u307e\u3067\u5f85\u3064\u3053\u3068\u306b\u306a\u308b\uff09\u3002\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3055\u308c\u308b\u307e\u3067\u30b3\u30df\u30c3\u30c8\u3055\u308c\u306a\u3044\n\u300c\u975e\u540c\u671f\u300d\u3068\u3042\u308b\u306e\u3067\u3001\u307e\u308b\u3067\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3059\u308b\u524d\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3055\u308c\u308b\u306e\u304b\u3068\u52d8\u9055\u3044\u3057\u305d\u3046\u306b\u306a\u308b\u3051\u3069\u3001\u305d\u3046\u3067\u306f\u306a\u3044\u3002\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3001 AsyncContext#complete() \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8fd4\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u3044\uff08\u30b3\u30df\u30c3\u30c8\u3055\u308c\u306a\u3044\uff09\u3002\nJava\u2122 Servlet Specification Version 3.1 - 2.3.3.3 Asynchronous processing (P.2-11)\n\nThe response isn't committed till complete (see below) is called on the AsyncContext.\n\n\u65e5\u672c\u8a9e\u8a33\u7248\u306f\u3053\u3061\u3089\u2192 \u30b5\u30fc\u30d6\u30ec\u30c3\u30c83.0\u4ed5\u69d8\u66f8\u90a6\u8a33\u7248\u3002\n\n\u305d\u306e\u5fdc\u7b54\u306fAsyncContext\u4e0a\u3067complete\u304c\u547c\u3070\u308c\u308b\u307e\u3067\uff08\u4e0b\u8a18\u53c2\u7167\uff09\u30b3\u30df\u30c3\u30c8\u3055\u308c\u306a\u3044\u3002\n\n\u3064\u307e\u308a\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f\u975e\u540c\u671f\u306e\u5206\u3082\u542b\u3081\u3066\u3001\u51e6\u7406\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u305f\u3055\u308c\u308b\u3002\n\u975e\u540c\u671f\u51e6\u7406\u306b\u3059\u308b\u30e1\u30ea\u30c3\u30c8\u306f\u3001\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u306e\u5b9f\u884c\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u30b9\u30ec\u30c3\u30c9\u3092\u30b3\u30f3\u30c6\u30ca\u304c\u3055\u3063\u3055\u3068\u56de\u53ce\u3057\u3066\u3001\u5225\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u51e6\u7406\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u7121\u99c4\u304c\u5c11\u306a\u304f\u306a\u308b\u3001\u3068\u3044\u3046\u70b9\u3002\n\u524d\u8ff0\u306e\u65e5\u672c\u8a9e\u8a33\u7248\u306e\u4ed5\u69d8\u66f8\u3088\u308a\u629c\u7c8b\n\n\uff08\u524d\u7565\uff09\n\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u5185\u3067\u306e\u5f85\u6a5f\u306f\u975e\u52b9\u7387\u306a\u4f7f\u3044\u65b9\u3067\u3042\u308b\u3002\n\uff08\u4e2d\u7565\uff09\n\u591a\u304f\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u30a2\u30af\u30bb\u30b9\u5f85\u3061\u306e\u72b6\u614b\u3067\u30d6\u30ed\u30c3\u30af\u3055\u305b\u3001\u30a6\u30a7\u30d6\u30fb\u30b3\u30f3\u30c6\u30ca\u5168\u4f53\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u67af\u6e07\u3068\u30b5\u30fc\u30d3\u30b9\u54c1\u8cea\u52a3\u5316\u3092\u3082\u305f\u3089\u3059\u3002\n\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u7b2c3\u7248\u3067\u306f\u8981\u6c42\u306e\u975e\u540c\u671f\u51e6\u7406\u3092\u5c0e\u5165\u3057\u3066\u304a\u308a\u3001\u305d\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u8fd4\u3057\u3066\u4ed6\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5f85\u305f\u305b\u305f\u304f\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u81ea\u5206\u3067\u30b9\u30ec\u30c3\u30c9\u3092\u4f5c\u3063\u3066\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001\u4f5c\u6210\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\uff08HttpServletRequest \u306a\u3069\uff09\u306b\u3059\u308b\u306e\u306f\u907f\u3051\u305f\u307b\u3046\u304c\u826f\u3044\u3002\n\u305d\u306e\u8fba\u306b\u3064\u3044\u3066\u306f Servlet\u304c\u30b9\u30ec\u30c3\u30c9\u3092\u751f\u6210\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u306e\u304b | code up \u3092\u53c2\u7167\u3002\n\u30ea\u30bd\u30fc\u30b9\u3092\u975e\u540c\u671f\u51e6\u7406\u4e2d\u3067\u4f7f\u3044\u305f\u3044\u306e\u3067\u3042\u308c\u3070\u3001 Java EE 7 \u3067\u8ffd\u52a0\u3055\u308c\u305f Concurrency Utilities for Java EE \u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u53c2\u8003\uff1aJavaEE - Concurrency Utilities for Java EE\u3092\u3064\u304b\u3063\u3066\u307f\u308b - Qiita\n\n\u975e\u540c\u671f\u51e6\u7406\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\n\nAsyncServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.servlet.AsyncContext;\nimport javax.servlet.AsyncEvent;\nimport javax.servlet.AsyncListener;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class AsyncServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        System.out.println(\"AsyncServlet start.\");\n\n        AsyncContext ctx = req.startAsync();\n\n        ctx.addListener(new AsyncListenerImpl());\n\n        ctx.start(() -> {\n            try (PrintWriter pw = ctx.getResponse().getWriter()) {\n                Thread.sleep(5000);\n                System.out.println(\"async process.\");\n                pw.println(\"<h1>Async Process</h1>\");\n            } catch (IOException | InterruptedException ex) {\n                ex.printStackTrace();\n            } finally {\n                ctx.complete();\n            }\n        });\n\n        resp.getWriter().println(\"<h1>AsyncServlet</h1>\");\n\n        System.out.println(\"AsyncServlet end.\");\n    }\n\n    private static class AsyncListenerImpl implements AsyncListener {\n\n        @Override\n        public void onStartAsync(AsyncEvent event) throws IOException {\n            System.out.println(\"onStartAsync\");\n        }\n\n        @Override\n        public void onComplete(AsyncEvent event) throws IOException {\n            System.out.println(\"onComplete\");\n        }\n\n        @Override\n        public void onTimeout(AsyncEvent event) throws IOException {\n            System.out.println(\"onTimeout\");\n        }\n\n        @Override\n        public void onError(AsyncEvent event) throws IOException {\n            System.out.println(\"onError\");\n        }\n    }\n}\n\n\n\n\nAsyncListener \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001 AsyncContext#addListener() \u3067\u767b\u9332\u3059\u308b\u3002\n\u975e\u540c\u671f\u51e6\u7406\u306e\u30a4\u30d9\u30f3\u30c8\u3054\u3068\u306b\u3001\u5404\u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\n\nweb.xml\n  <servlet>\n    <servlet-name>SessionServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.SessionServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>SessionServlet</servlet-name>\n    <url-pattern>/session/*</url-pattern>\n  </servlet-mapping>\n\n\n\nSessionServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\npublic class SessionServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        if (this.notExistsSession(req)) {\n            this.createSession(req);\n        }\n\n        if (\"/delete\".equals(req.getPathInfo())) {\n            this.deleteSession(req);\n        } else {\n            this.countUp(req);\n        }\n    }\n\n    private boolean notExistsSession(HttpServletRequest request) {\n        return request.getSession(false) == null;\n    }\n\n    private void createSession(HttpServletRequest request) {\n        HttpSession session = request.getSession();\n        session.setAttribute(\"count\", 0);\n\n        System.out.printf(\"session is created. id=%s%n\", session.getId());\n    }\n\n    private void deleteSession(HttpServletRequest request) {\n        HttpSession session = request.getSession(true);\n        session.invalidate();\n\n        System.out.printf(\"session is deleted. id=%s%n\", session.getId());\n    }\n\n    private void countUp(HttpServletRequest request) {\n        HttpSession session = request.getSession(false);\n        int count = (int)session.getAttribute(\"count\");\n        session.setAttribute(\"count\", ++count);\n\n        System.out.printf(\"count up. id=%s, count=%d%n\", session.getId(), count);\n    }\n}\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067\u3001 http://localhost:8080/servlet/session/ \u306b\u4f55\u5ea6\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   session is created. id=7d32d5e4a2958576fd139692be1a\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=1\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=2\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=3\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=4\n\n\n\u30d6\u30e9\u30a6\u30b6\u306e Cookie \u3092\u898b\u308b\u3068\u3001 JSESSIONID \u3068\u3044\u3046\u540d\u524d\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u306e ID \u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3002\n\nhttp://localhost:8080/servlet/session/delete \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   session is deleted. id=7d32d5e4a2958576fd139692be1a\n\n\n\u3082\u3046\u4e00\u5ea6 http://localhost:8080/servlet/session/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   session is created. id=7d6023ef3e12cc524fd29fa7f5ad\n\u60c5\u5831:   count up. id=7d6023ef3e12cc524fd29fa7f5ad, count=1\n\n\n\n\nrequest.getSession(boolean) \u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\u3059\u308b\u3002\n\n\ntrue \u3092\u6e21\u3057\u305f\u5834\u5408\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u65b0\u898f\u306b\u4f5c\u6210\u3055\u308c\u308b\u3002\nfalse \u3092\u6e21\u3057\u305f\u5834\u5408\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u3068 null \u304c\u8fd4\u3055\u308c\u308b\u3002\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u306e ID \u306f\u30d6\u30e9\u30a6\u30b6\u306b\u4fdd\u5b58\u3055\u308c\u308b\uff08\u666e\u901a\u306f Cookie\uff09\u3002\n\n\n\u30d6\u30e9\u30a6\u30b6\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u305f\u3073\u306b\u3053\u306e ID \u3092\u30b5\u30fc\u30d0\u30fc\u306b\u6e21\u3059\u3002\n\u30b5\u30fc\u30d0\u30fc\u306f\u3001\u53d7\u3051\u53d6\u3063\u305f ID \u3092\u3082\u3068\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8b58\u5225\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3059\u308b\u3002\n\n\n\nsession.invalidate() \u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7834\u68c4\u3067\u304d\u308b\u3002\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u6642\u9593\u3092\u8a2d\u5b9a\u3059\u308b\n\nweb.xml\n  <session-config>\n    <session-timeout>60</session-timeout>\n  </session-config>\n\n\n\n\n<session-config> \u30bf\u30b0\u3092 web.xml \u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u6642\u9593\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\u5024\u306f\u5206\u6570\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306f 60 \uff081\u6642\u9593\uff09\u3002\n-1 \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u7121\u3057\u306b\u306a\u308b\u3002\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u30fb\u7d42\u4e86\u6642\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n\n\u57fa\u672c\n\nweb.xml\n  <listener>\n    <listener-class>sample.javaee.servlet.listener.WebAppListener</listener-class>\n  </listener>\n\n\n\nWebAppListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\n\npublic class WebAppListener implements ServletContextListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        System.out.println(\"contextInitialized()\");\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        System.out.println(\"contextDestroyed()\");\n    }\n}\n\n\nGlassFish \u3092\u8d77\u52d5\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   contextInitialized()\n\n\nGlassFish \u3092\u505c\u6b62\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   contextDestroyed()\n\n\n\n\nServletContextListneer \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001 <listener> \u30bf\u30b0\u3092\u4f7f\u3063\u3066 web.xml \u306b\u767b\u9332\u3059\u308b\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u30fb\u7d42\u4e86\u6642\u306b\u3001 contextInitialized() \u3068 contextDestroyed() \u304c\u305d\u308c\u305e\u308c\u547c\u3070\u308c\u308b\u3002\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\n\nweb.xml\n  <context-param>\n    <param-name>hoge</param-name>\n    <param-value>HOGE</param-value>\n  </context-param>\n\n  <listener>\n    <listener-class>sample.javaee.servlet.listener.WebAppListener</listener-class>\n  </listener>\n\n\n\nWebAppListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\n\npublic class WebAppListener implements ServletContextListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        String value = (String)event.getServletContext().getInitParameter(\"hoge\");\n        System.out.println(\"contextInitialized() hoge=\" + value);\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        System.out.println(\"contextDestroyed()\");\n    }\n}\n\n\nGlassFish \u3092\u8d77\u52d5\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   contextInitialized() hoge=HOGE\n\n\n\n\n<contex-param> \u30bf\u30b0\u3092 web.xml \u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001 ServletContextEvent \u304b\u3089\u5024\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u30fb\u7d42\u4e86\u6642\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n\nweb.xml\n  <listener>\n    <listener-class>sample.javaee.servlet.listener.SessionListener</listener-class>\n  </listener>\n\n\n\nSessionListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.http.HttpSession;\nimport javax.servlet.http.HttpSessionEvent;\nimport javax.servlet.http.HttpSessionListener;\n\npublic class SessionListener implements HttpSessionListener {\n\n    @Override\n    public void sessionCreated(HttpSessionEvent event) {\n        System.out.printf(\"sessionCreated() id=%s%n\", event.getSession().getId());\n    }\n\n    @Override\n    public void sessionDestroyed(HttpSessionEvent event) {\n        System.out.printf(\"sessionDestroyed() id=%s%n\", event.getSession().getId());\n    }\n}\n\n\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f SessionServlet \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   sessionCreated() id=7f5d729e7319528e4a8316d16555\n\u60c5\u5831:   session is created. id=7f5d729e7319528e4a8316d16555\n\u60c5\u5831:   count up. id=7f5d729e7319528e4a8316d16555, count=1\n\u60c5\u5831:   sessionDestroyed() id=7f5d729e7319528e4a8316d16555\n\u60c5\u5831:   session is deleted. id=7f5d729e7319528e4a8316d16555\n\n\n\n\nHttpSessionListener \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001 <listener> \u30bf\u30b0\u3092\u4f7f\u3063\u3066 web.xml \u306b\u767b\u9332\u3059\u308b\u3002\n\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u3068\u524a\u9664\u306e\u3068\u304d\u306b\u3001 sessionCreated() \u3068 sessionDestroyed() \u304c\u305d\u308c\u305e\u308c\u547c\u3070\u308c\u308b\u3002\n\u5f15\u6570\u306e HttpSessionEvent \u304b\u3089\u3001\u5bfe\u8c61\u306e HttpSession \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u524d\u5f8c\u3067\u51e6\u7406\u3092\u631f\u3080\n\nweb.xml\n  <filter-mapping>\n    <filter-name>RequestFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n  </filter-mapping>\n\n\n\nRequestFilter.java\npackage sample.javaee.servlet.filter;\n\nimport java.io.IOException;\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\n\npublic class RequestFilter implements Filter {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        System.out.println(\"RequestFilter before\");\n        chain.doFilter(request, response);\n        System.out.println(\"RequestFilter after\");\n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n    }\n\n    @Override\n    public void destroy() {\n    }\n}\n\n\nhttp://localhost:8080/servlet/test.sample \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   RequestFilter before\n\u60c5\u5831:   UrlPatternExtensionServlet.doGet()\n\u60c5\u5831:   RequestFilter after\n\n\n\n\nFilter \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001 <filter> \u30bf\u30b0\u3067 web.xml \u306b\u767b\u9332\u3059\u308b\u3002\n\n<filter-mapping> \u30bf\u30b0\u3067\u3001\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u9069\u7528\u3059\u308b URL \u30d1\u30bf\u30fc\u30f3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\nURL \u30d1\u30bf\u30fc\u30f3\u306b\u30de\u30c3\u30c1\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3042\u308b\u3068\u3001 doFilter() \u30e1\u30bd\u30c3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n\n\nFilterChain#doFilter() \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u6b21\u306e\u51e6\u7406\u3078\u9032\u3080\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u547c\u3070\u306a\u304f\u3066\u3082\u826f\u3044\uff09\u3002\n\n\n\n\n\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n\nweb.xml\n  <welcome-file-list>\n    <welcome-file>welcome.html</welcome-file>\n  </welcome-file-list>\n\n\n\nwelcome.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Servlet JSP Sample</title>\n  </head>\n  <body>\n    <h1>Welcome Page</h1>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\n\n<welcome-file-file> \u30bf\u30b0\u3067\u3001\u30eb\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\u8868\u793a\u3059\u308b\u30d1\u30b9\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n<welcome-file> \u30bf\u30b0\u306f\u8907\u6570\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\n\n\u8907\u6570\u8a18\u8ff0\u3057\u305f\u5834\u5408\u306f\u3001\u5148\u982d\u304b\u3089\u9806\u756a\u306b\u5b58\u5728\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u6700\u521d\u306b\u5b58\u5728\u898b\u3064\u304b\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\n\n\u30d5\u30a1\u30a4\u30eb\u3060\u3051\u3067\u306a\u304f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b Servlet \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u30d1\u30b9\u3082\u6307\u5b9a\u53ef\u80fd\u3002\n\n\nweb.xml\n  <welcome-file-list>\n    <welcome-file>hello</welcome-file>\n  </welcome-file-list>\n\n\n\n\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u3068\u304d\u306e\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n\nHTTP \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3054\u3068\u306b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n\nweb.xml\n  <error-page>\n    <error-code>404</error-code>\n    <location>/error/404.html</location>\n  </error-page>\n\n\n\n404.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>404 Not Found</title>\n  </head>\n  <body>\n    <h1>404 Not Found</h1>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3092\u958b\u3044\u3066\u3001 http://localhost:8080/servlet/xxx \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\n\n\n\n<error-page> \u30bf\u30b0\u3067\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u3068\u304d\u306b\u8868\u793a\u3059\u308b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n<error-code> \u30bf\u30b0\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001 HTTP \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3054\u3068\u306b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n\n\u30b9\u30ed\u30fc\u3055\u308c\u305f\u4f8b\u5916\u3054\u3068\u306b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n\nweb.xml\n  <servlet>\n    <servlet-name>NullPointerServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.NullPointerServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>NullPointerServlet</servlet-name>\n    <url-pattern>/null</url-pattern>\n  </servlet-mapping>\n\n  <error-page>\n    <exception-type>java.lang.NullPointerException</exception-type>\n    <location>/error/null.html</location>\n  </error-page>\n\n\n\nNullPointerServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class NullPointerServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        throw new NullPointerException(\"NullPointerServlet\");\n    }\n}\n\n\n\nnull.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>NullPointerException</title>\n  </head>\n  <body>\n    <h1>NullPointerException!!</h1>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/null \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\n\n<exception-type> \u30bf\u30b0\u3067\u3001\u4f8b\u5916\u3054\u3068\u306b\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a2d\u5b9a\u3059\u308b\nServlet 3.0 \u304b\u3089\u306f\u3001 web.xml \u3067\u8a18\u8ff0\u3057\u3066\u3044\u305f\u8a2d\u5b9a\u3092\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\nServlet\n\nAnnotatedServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(\"/annotated\")\npublic class AnnotatedServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        System.out.println(\"AnnotatedServlet.doGet()\");\n    }\n}\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/annotated \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AnnotatedServlet.doGet()\n\n\n\u8a2d\u5b9a\u3067\u304d\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 \u3092\u53c2\u7167\u3002\n\nListener\n\nAnnotatedListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\nimport javax.servlet.annotation.WebListener;\n\n@WebListener\npublic class AnnotatedListener implements ServletContextListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent sce) {\n        System.out.println(\"AnnotatedListener.contextInitialized()\");\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent sce) {\n    }\n}\n\n\nGlassFish \u3092\u8d77\u52d5\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AnnotatedListener.contextInitialized()\n\n\n\nFilter\n\nAnnotatedFilter.java\npackage sample.javaee.servlet.filter;\n\nimport java.io.IOException;\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.annotation.WebFilter;\n\n@WebFilter(\"/*\")\npublic class AnnotatedFilter implements Filter {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        System.out.println(\"AnnotatedFilter before\");\n        chain.doFilter(request, response);\n        System.out.println(\"AnnotatedFilter after\");\n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {}\n    @Override\n    public void destroy() {}\n}\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AnnotatedFilter before\n\u60c5\u5831:   AnnotatedFilter after\n\n\n\u305f\u3060\u3057\u3001\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u306e\u5834\u5408\u306f Filter \u306e\u9806\u5e8f\u3092\u5b9a\u7fa9\u3067\u304d\u306a\u3044\u3002\n\u9806\u5e8f\u3092\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f\u3053\u3061\u3089 \u3092\u53c2\u7167\u3002\n\nJSP\n\nJSP \u3068\u306f\nJavaServer Pages \u306e\u7565\u3002\n\u30d3\u30e5\u30fc\uff08\u753b\u9762\uff09\u3092\u52d5\u7684\u306b\u4f5c\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\u3002 HTML \u30bf\u30b0\u3068 JSP \u304c\u6301\u3064\u30bf\u30b0\u306a\u3069\u3092\u4f7f\u3063\u3066\u753b\u9762\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\nServlet \u306f MVC \u306e C (Controller) \u3092\u62c5\u3044\u3001 JSP \u306f V (View) \u3092\u62c5\u3046\u3002\n\u3057\u304b\u3057\u3001\u66f8\u304d\u65b9\u306b\u3088\u3063\u3066\u306f\u30b4\u30ea\u30b4\u30ea Java \u306e\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u9b54\u7a9f\u306e\u3088\u3046\u306a JSP \u3082\u4e16\u306e\u4e2d\u306b\u306f\u5b58\u5728\u3059\u308b\u3002\n\u305f\u3060\u3057\u3001 Java EE 6 \u304b\u3089\u306f\u3001 Facelets \u3068\u3044\u3046\u5225\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u304c\u30e1\u30a4\u30f3\u3068\u306a\u3063\u3066\u3044\u308b\uff08JSP \u306f\u7121\u304f\u306a\u3063\u3066\u306f\u3044\u306a\u3044\uff09\u3002\n\nHello World\n\njsp/hello.jsp\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <h1>Hello JSP!!</h1>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067\u3001 http://localhost:8080/servlet/jsp/hello.jsp \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\n\u666e\u901a\u306b HTML \u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u62e1\u5f35\u5b50\u3092 .jsp \u306b\u3057\u3066\u4fdd\u5b58\u3057\u3001\u76f4\u63a5 URL \u3092\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070 JSP \u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n\nJSP \u306f Servlet \u306e\u5b9f\u88c5\u306b\u5909\u63db\u3055\u308c\u3066\u5b9f\u884c\u3055\u308c\u308b\nJSP \u306b\u30a2\u30af\u30bb\u30b9\u304c\u3042\u308b\u3068\u3001\u30b5\u30fc\u30d0\u30fc\u306f JSP \u3092 Servlet \u306e\u5b9f\u88c5\u306b\u5909\u63db\u3059\u308b\u3002\nGlassFish \u306e\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u898b\u308b\u3068\u751f\u6210\u3055\u308c\u305f Servlet \u306e\u5b9f\u88c5\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\n<GlassFish \u672c\u4f53\u304c\u5b58\u5728\u3059\u308b\u30d5\u30a9\u30eb\u30c0>\\domains\\<\u30c9\u30e1\u30a4\u30f3\u540d>\\generated\\jsp\\<\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d>\\\n\u4ee5\u4e0b\u304c\u3001\u5b9f\u969b\u306b\u51fa\u529b\u3055\u308c\u305f Servlet \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3002\n\nhello_jsp.java\npackage org.apache.jsp.jsp;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport javax.servlet.jsp.*;\n\npublic final class hello_jsp extends org.apache.jasper.runtime.HttpJspBase\n    implements org.apache.jasper.runtime.JspSourceDependent {\n\n  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();\n\n  private static java.util.List<String> _jspx_dependants;\n\n  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;\n\n  public java.util.List<String> getDependants() {\n    return _jspx_dependants;\n  }\n\n  public void _jspService(HttpServletRequest request, HttpServletResponse response)\n        throws java.io.IOException, ServletException {\n\n    PageContext pageContext = null;\n    HttpSession session = null;\n    ServletContext application = null;\n    ServletConfig config = null;\n    JspWriter out = null;\n    Object page = this;\n    JspWriter _jspx_out = null;\n    PageContext _jspx_page_context = null;\n\n    try {\n      response.setContentType(\"text/html\");\n      response.setHeader(\"X-Powered-By\", \"JSP/2.3\");\n      pageContext = _jspxFactory.getPageContext(this, request, response,\n               null, true, 8192, true);\n      _jspx_page_context = pageContext;\n      application = pageContext.getServletContext();\n      config = pageContext.getServletConfig();\n      session = pageContext.getSession();\n      out = pageContext.getOut();\n      _jspx_out = out;\n      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute(\"com.sun.appserv.jsp.resource.injector\");\n\n      out.write(\"<!DOCTYPE html>\\r\\n\");\n      out.write(\"<html>\\r\\n\");\n      out.write(\"  <head>\\r\\n\");\n      out.write(\"    <meta charset=\\\"UTF-8\\\">\\r\\n\");\n      out.write(\"    <title>Hello JSP</title>\\r\\n\");\n      out.write(\"  </head>\\r\\n\");\n      out.write(\"  <body>\\r\\n\");\n      out.write(\"    <h1>Hello JSP!!</h1>\\r\\n\");\n      out.write(\"  </body>\\r\\n\");\n      out.write(\"</html>\\r\\n\");\n    } catch (Throwable t) {\n      if (!(t instanceof SkipPageException)){\n        out = _jspx_out;\n        if (out != null && out.getBufferSize() != 0)\n          out.clearBuffer();\n        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);\n        else throw new ServletException(t);\n      }\n    } finally {\n      _jspxFactory.releasePageContext(_jspx_page_context);\n    }\n  }\n}\n\n\n\u5358\u7d14\u306b HTML \u3067\u8a18\u8ff0\u3057\u305f JSP \u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b Servlet \u306b\u3088\u308b\u5b9f\u88c5\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u3066\u304b\u3089\u5b9f\u884c\u3055\u308c\u3001\u51e6\u7406\u7d50\u679c\u304c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8fd4\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u30da\u30fc\u30b8\u306e\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u6307\u5b9a\u3059\u308b\n\nencoding.jsp\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>\u65e5\u672c\u8a9e</h1>\n  </body>\n</html>\n\n\nHTML \u306e <meta> \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u6587\u5b57\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u304c\u3001\u3053\u306e\u307e\u307e\u3067\u65e5\u672c\u8a9e\u3092\u8a18\u8ff0\u3059\u308b\u3068\u6587\u5b57\u5316\u3051\u304c\u767a\u751f\u3059\u308b\u3002\n\n\u3053\u308c\u306f\u3001 JSP \u304c HTML \u3092\u751f\u6210\u3059\u308b\u3068\u304d\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 ISO-8859-1 \u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u539f\u56e0\u3002\nHTML \u3092\u51fa\u529b\u3059\u308b\u3068\u304d\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3059\u308b\u3002\n\nencoding.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>\u65e5\u672c\u8a9e</h1>\n  </body>\n</html>\n\n\n\n\n\u4efb\u610f\u306e Java \u30b3\u30fc\u30c9\u3092\u57cb\u3081\u8fbc\u3080\n\nscriptlet.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <% String msg = \"Hello Scriptlet!!\"; %>\n    <h1><%=msg %></h1>\n  </body>\n</html>\n\n\n\n\n\n<% %> \u306f\u30b9\u30af\u30ea\u30d7\u30c8\u30ec\u30c3\u30c8\u3068\u547c\u3073\u3001\u4efb\u610f\u306e Java \u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\n<%= %> \u3067\u4efb\u610f\u306e Java \u30b3\u30fc\u30c9\u3092\u8a55\u4fa1\u3057\u305f\u7d50\u679c\u3092 HTML \u4e2d\u306b\u57cb\u3081\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nJSP \u5185\u3067\u6697\u9ed9\u7684\u306b\u4f7f\u7528\u3067\u304d\u308b\u5909\u6570\n\nimplicit.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <% out.println(\"<h1>Implicit Objects</h1>\"); %>\n  </body>\n</html>\n\n\n\n\nJSP \u5185\u3067\u306f\u3001\u5ba3\u8a00\u305b\u305a\u306b\u6697\u9ed9\u7684\u306b\u4f7f\u7528\u3067\u304d\u308b\u5909\u6570\u304c\u5b58\u5728\u3059\u308b\u3002\n\n\n\u4e0a\u8a18\u4f8b\u306e\u5834\u5408\u306f\u3001 out \u3068\u3044\u3046\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n\u3053\u308c\u306e\u5b9f\u4f53\u306f PrintWriter \u3067\u3001 HTML \u3078\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u51fa\u529b\u3067\u304d\u308b\u3002\n\n\n\nout \u4ee5\u5916\u306b\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5909\u6570\u3092\u4f7f\u7528\u3067\u304d\u308b\u3002\n\n\n\n\u5909\u6570\n\u578b\n\u8aac\u660e\n\n\n\n\nout\nPrintWriter\nHTML \u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u51fa\u529b\u3067\u304d\u308b\u3002\n\n\nrequest\nHttpServletRequest\n\u73fe\u5728\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\n\nresponse\nHttpServletResponse\n\u73fe\u5728\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\n\npageContext\nPageContext\n\u73fe\u5728\u306e JSP \u30da\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\n\nsession\nHttpSession\n\u73fe\u5728\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\n\napplication\nServletContext\n\u30a2\u30d7\u30ea\u306e ServletContext \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\n\npage\nHttpJspPage\nJSP \u304b\u3089\u751f\u6210\u3055\u308c\u305f Servlet \u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002\n\n\n\n\nJava \u306e\u30af\u30e9\u30b9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\n\njava_import.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@page import=\"java.util.List\" %>\n<%@page import=\"java.util.Arrays\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <ul>\n      <%\n      List<String> list = Arrays.asList(\"hoge\", \"fuga\", \"piyo\");\n\n      for (String value : list) {\n          out.println(\"<li>\" + value + \"</li>\");\n      }\n      %>\n    </ul>\n  </body>\n</html>\n\n\n\n\n\n<%@page import=\"...\" %> \u3067\u3001\u4efb\u610f\u306e Java \u30af\u30e9\u30b9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u308b\u3002\n\n\n\u30b3\u30e1\u30f3\u30c8\u3092\u8a18\u8ff0\u3059\u308b\n\ncomment.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <!--HTML comment-->\n    <%-- JSP comment --%>\n  </body>\n</html>\n\n\n\n\n\n<%-- --%> \u3067 JSP \u306e\u30b3\u30e1\u30f3\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\nJSP \u306e\u30b3\u30e1\u30f3\u30c8\u306f\u3001 HTML \u306b\u51fa\u529b\u3055\u308c\u306a\u3044\u3002\n\n\n\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u57cb\u3081\u8fbc\u3080\n\nembedded.jsp\n<%@include file=\"hello.jsp\" %>\n\n\n\n\n\n<%@include file=\"...\" %> \u3067\u3001\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u3092 JSP \u5185\u306b\u57cb\u3081\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nServlet \u304b\u3089 JSP \u306b\u51e6\u7406\u3092\u79fb\u3059\n\nJspServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(\"/jsp-servlet\")\npublic class JspServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        System.out.println(\"JspServlet.doGet()\");\n        req.getRequestDispatcher(\"jsp/hello.jsp\").forward(req, resp);\n    }\n}\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/jsp-servlet \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\nGlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   JspServlet.doGet()\n\n\n\n\nServlet \u3068\u540c\u3058\u8981\u9818\u3067\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\nEL \u5f0f\n\nEL \u5f0f\u3068\u306f\nExpression Language \u306e\u7565\u3002\n\u5f0f\u8a00\u8a9e\u3068\u3082\u547c\u3070\u308c\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u30ec\u30c3\u30c8\u3088\u308a\u3082\u7c21\u6f54\u306a\u8a18\u8ff0\u3067\u6f14\u7b97\u7d50\u679c\u306e\u51fa\u529b\u306a\u3069\u304c\u3067\u304d\u308b\u3002\n\u6700\u521d\u306f JSP \u306e\u4e00\u90e8\u3060\u3063\u305f\u304c\u3001 Java EE 7 \u304b\u3089\u306f\u72ec\u7acb\u3057\u305f\u4ed5\u69d8\u3068\u306a\u3063\u305f\u3002\nFacelets \u3067\u3082\u4f7f\u3048\u308b\u3002\n\n\u57fa\u672c\n\nel.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>${\"Hello Expression Language\"}</h1>\n  </body>\n</html>\n\n\n\n\n\n${<\u8a55\u4fa1\u3057\u305f\u3044\u5f0f>} \u3067\u8a18\u8ff0\u3059\u308b\u3002\n\u8a55\u4fa1\u7d50\u679c\u306f\u3001\u305d\u306e\u307e\u307e HTML \u4e0a\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\n\n\u6f14\u7b97\u3059\u308b\n\nel2.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>100 + 10 + 1 = ${100 + 10 + 1}</h1>\n  </body>\n</html>\n\n\n\n\n\n${} \u306e\u4e2d\u306b\u306f\u3001\u4efb\u610f\u306e\u6f14\u7b97\u5f0f\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\n\n\u6697\u9ed9\u7684\u306b\u53c2\u7167\u3067\u304d\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\nel3.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>${pageContext.request.serverName}</h1>\n  </body>\n</html>\n\n\n\n\nJavaBeans \u306e\u4ed5\u69d8\u306b\u5f93\u3063\u3066\u547d\u540d\u3055\u308c\u305f getter \u30e1\u30bd\u30c3\u30c9\u306f\u3001 get \u3092\u7701\u7565\u3057\u3066\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u3060\u3051\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u30b9\u30af\u30ea\u30d7\u30c8\u30ec\u30c3\u30c8\u3068\u540c\u3058\u3088\u3046\u306b\u3001 EL \u5f0f\u5185\u3067\u306f\u6697\u9ed9\u7684\u306b\u53c2\u7167\u3067\u304d\u308b\u5909\u6570\u304c\u5b58\u5728\u3059\u308b\u3002\n\n\n\n\n\u5909\u6570\u540d\n\u8aac\u660e\n\n\n\n\nsessionScope\n\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\n\n\nrequestScope\n\u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30b3\u30fc\u30d7\n\n\napplicationScope\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7\n\n\npageSope\n\u30da\u30fc\u30b8\u30b9\u30b3\u30fc\u30d7\n\n\npageContext\n\u73fe\u5728\u306e\u30da\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\n\n\nparam\n\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30de\u30c3\u30d7\n\n\nparamValues\n\u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\uff08\u914d\u5217\uff09\u306e\u30de\u30c3\u30d7\n\n\nheader\nHTTP \u306e\u30d8\u30c3\u30c0\n\n\nheaderValues\nHTTP \u306e\u30d8\u30c3\u30c0\uff08\u914d\u5217\uff09\n\n\ncookie\n\u30af\u30c3\u30ad\u30fc\uff08\u30de\u30c3\u30d7\uff09\n\n\n\n\n\u5404\u30b9\u30b3\u30fc\u30d7\u3078\u306e\u30a2\u30af\u30bb\u30b9\n\nELScopeServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(\"/el-scope-servlet\")\npublic class ELScopeServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        req.setAttribute(\"hoge\", \"HOGE\");\n        req.getSession().setAttribute(\"fuga\", \"FUGA\");\n        req.getServletContext().setAttribute(\"piyo\", \"PIYO\");\n\n        req.setAttribute(\"same\", \"RequestValue\");\n        req.getSession().setAttribute(\"same\", \"SessionValue\");\n        req.getServletContext().setAttribute(\"same\", \"ApplicationValue\");\n\n        req.getRequestDispatcher(\"jsp/el4.jsp\").forward(req, resp);\n    }\n}\n\n\n\nel4.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>${requestScope.hoge} - ${sessionScope.fuga} - ${applicationScope.piyo}</h1>\n    <h2>${hoge} - ${fuga} - ${piyo}</h2>\n\n    <ul>\n      <li>${same}\n      <li>${requestScope.same}\n      <li>${sessionScope.same}\n      <li>${applicationScope.same}\n    </ul>\n\n    <% pageContext.setAttribute(\"same\", \"PageScopeValue\"); %>\n\n    <h3>${same}</h3>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/el-scope-servlet \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\n\nrequestScope\u3001 sessionScope\u3001 applicationScope \u306f\u3001\u305d\u308c\u305e\u308c HttpServletRequest\u3001 HttpSession\u3001 ServletContext \u306e setAttribute() \u3067\u30bb\u30c3\u30c8\u3059\u308b\u3002\n\u5404\u30b9\u30b3\u30fc\u30d7\u306b\u4fdd\u5b58\u3055\u308c\u305f\u5024\u306f\u3001 EL \u5f0f\u4e0a\u3067\u306f\u3044\u304d\u306a\u308a\u30ad\u30fc\u306b\u6307\u5b9a\u3057\u305f\u540d\u524d\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u7570\u306a\u308b\u30b9\u30b3\u30fc\u30d7\u306b\u540c\u3058\u540d\u524d\u3067\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u5024\u3092 EL \u5f0f\u3067\u53c2\u7167\u3057\u305f\u5834\u5408\u3001\u3088\u308a\u72ed\u3044\u30b9\u30b3\u30fc\u30d7\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024\u304c\u53d6\u5f97\u3055\u308c\u308b\u3002\n\n\n\u914d\u5217\u30fb\u30ea\u30b9\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\n\nel5.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@page import=\"java.util.*\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <%\n    String[] array = {\"hoge\", \"fuga\", \"piyo\"};\n    List<String> list = Arrays.asList(\"HOGE\", \"FUGA\", \"PIYO\");\n\n    pageContext.setAttribute(\"array\", array);\n    pageContext.setAttribute(\"list\", list);\n    %>\n\n    <h2>${array[0]}, ${array[1]}, ${array[2]}</h2>\n    <h2>${list[0]}, ${list[1]}, ${list[2]}</h2>\n\n  </body>\n</html>\n\n\n\n\n\u914d\u5217\u3001 List \u306f\u3001 [] \u3092\u4f7f\u3063\u305f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6307\u5b9a\u3067\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n\n\u30de\u30c3\u30d7\u306e\u30a8\u30f3\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\n\nel6.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@page import=\"java.util.*\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <%\n    Map<String, String> map = new HashMap<String, String>();\n    map.put(\"hoge\", \"HOGE\");\n    map.put(\"fuga\", \"FUGA\");\n    map.put(\"piyo\", \"PIYO\");\n\n    pageContext.setAttribute(\"map\", map);\n    %>\n\n    <h2>${map.hoge} - ${map[\"fuga\"]} - ${map['piyo']}</h2>\n\n  </body>\n</html>\n\n\n\n\nMap \u306e\u5404\u30a8\u30f3\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u306f\u3001 map.\u30ad\u30fc\u540d \u304b map[\"\u30ad\u30fc\u540d\"] \u306e\u3044\u305a\u308c\u304b\u306e\u65b9\u6cd5\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n\n\u6a19\u6e96\u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea(JSTL)\u3092\u4f7f\u7528\u3059\u308b\n\njstl.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <c:set var=\"flag\" value=\"true\" />\n\n    <c:if test=\"${flag}\">\n      flag is true\n    </c:if>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/jsp/jstl.jsp \u3092\u8868\u793a\u3059\u308b\u3002\n\n\nJSP \u306b\u306f\u3001\u6a19\u6e96\u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\uff08JSP Standard Tag Library\uff09\u3068\u3044\u3046\u30ed\u30b8\u30c3\u30af\u306a\u3069\u3092\u6271\u3046\u305f\u3081\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n\u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001 <%@taglib prefix=\"...\" uri=\"...\" %> \u3067\u4f7f\u7528\u3059\u308b\u30bf\u30b0\u3092\u5ba3\u8a00\u3059\u308b\u3002\n\n\n\nprefix \u5c5e\u6027\u306b\u306f\u3001\u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3068\u304d\u306e\u540d\u524d\u7a7a\u9593\u3092\u6307\u5b9a\u3059\u308b\u3002\n\nuri \u5c5e\u6027\u306b\u306f\u3001\u4f7f\u7528\u3059\u308b\u30bf\u30b0\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e URI \u3092\u6307\u5b9a\u3059\u308b\u3002\nURI \u306b\u6307\u5b9a\u3059\u308b\u5024\u306f\u3001 jar \u30d5\u30a1\u30a4\u30eb\u306b\u5165\u3063\u3066\u3044\u308b *.tld \u30d5\u30a1\u30a4\u30eb\u3092\u898b\u308b\u3068\u66f8\u3044\u3066\u3044\u308b\u3002\n\n\n\nc.tld\n\n\nc.tld\n<taglib xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd\"\n    version=\"2.1\">\n\n  <description>JSTL 1.2 core library</description>\n  <display-name>JSTL core</display-name>\n  <tlib-version>1.2</tlib-version>\n  <short-name>c</short-name>\n  <uri>http://java.sun.com/jsp/jstl/core</uri>\n\n\uff08\u7565\uff09\n\n\n\n\u6a19\u6e96\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u306b\u306f\u3001\u4ee5\u4e0b\u306e\uff15\u7a2e\u985e\u304c\u5b58\u5728\u3059\u308b\u3002\n\n\n\n\n\u540d\u524d\n\u8aac\u660e\nURI\n\n\n\n\ncore\nif \u3084 for \u306a\u3069\u3001\u6700\u3082\u3088\u304f\u4f7f\u3046\u30ed\u30b8\u30c3\u30af\u51e6\u7406\u7528\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nhttp://java.sun.com/jsp/jstl/core\n\n\ni18n-capable formatting\ni18n \u5bfe\u5fdc\u3057\u305f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u51fa\u529b\u306a\u3069\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nhttp://java.sun.com/jsp/jstl/fmt\n\n\nfunctions\n\u6587\u5b57\u5217\u64cd\u4f5c\u3088\u3046\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nhttp://java.sun.com/jsp/jstl/functions\n\n\nsql\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u7528\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nhttp://java.sun.com/jsp/jstl/sql\n\n\nxml\nXML \u306e\u89e3\u6790\u3001\u51e6\u7406\u3059\u308b\u305f\u3081\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\nhttp://java.sun.com/jsp/jstl/xml\n\n\n\n\n\u5404\u30bf\u30b0\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f\u3001 \uff2a\uff33\uff34\uff2c\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 | \u5fd8\u308c\u3063\u307d\u3044\u30a8\u30f3\u30b8\u30cb\u30a2\u306eJakarta Struts\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 \u304c\u65e5\u672c\u8a9e\u3067\u307e\u3068\u3081\u3089\u308c\u3066\u3066\u91cd\u5b9d\u3057\u307e\u3059\u3002\n\n\n\u8907\u6570\u306eJSP\u3067\u5171\u901a\u3059\u308b\u5ba3\u8a00\u3092\u307e\u3068\u3081\u308b\n\nweb.xml\n  <jsp-config>\n    <jsp-property-group>\n      <url-pattern>*.jsp</url-pattern>\n      <page-encoding>UTF-8</page-encoding>\n      <include-prelude>/jsp/taglib.jsp</include-prelude>\n    </jsp-property-group>\n  </jsp-config>\n\n\n\ntaglib.jsp\n<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n\n\n\njsp-config.jsp\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <c:set var=\"flag\" value=\"true\" />\n    <c:set var=\"message\" value=\"\u65e5\u672c\u8a9e\" />\n\n    <c:if test=\"${flag}\">\n      ${message}\n    </c:if>\n  </body>\n</html>\n\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/jsp/jsp-config.jsp \u3092\u958b\u304f\u3002\n\n\n\nweb.xml \u3067 <jsp-config> \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u3067\u5171\u901a\u3059\u308b\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n<url-pattern> \u3067\u6307\u5b9a\u3057\u305f\u30d1\u30bf\u30fc\u30f3\u306b\u30de\u30c3\u30c1\u3059\u308b URL \u306b\u30a2\u30af\u30bb\u30b9\u304c\u3042\u3063\u305f\u5834\u5408\u306b\u9650\u308a\u3001\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u5171\u901a\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n\n<include-prelude> \u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u5168\u3066\u306e JSP \u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u306b\u57cb\u3081\u8fbc\u307e\u308c\u308b\u3002\u3053\u3053\u3067\u6a19\u6e96\u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u7528\u5ba3\u8a00\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u30da\u30fc\u30b8\u3067\u306e\u8aad\u307f\u8fbc\u307f\u5ba3\u8a00\u3092\u7701\u7565\u3067\u304d\u308b\u3002\n\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\nServlet \u3067\u306f\u3001\u7279\u5b9a\u306e URL \u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u5bfe\u3057\u3066\u8a8d\u8a3c\u306b\u3088\u308b\u5236\u9650\u3092\u8a2d\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\u3053\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u3001\u30ed\u30fc\u30eb\u5358\u4f4d\u306b\u884c\u3048\u308b\u3002\n\u3064\u307e\u308a\u3001\u300c/admin/* \u3068\u3044\u3046 URL \u306b\u5bfe\u3057\u3066\u306f admin \u3068\u3044\u3046\u30ed\u30fc\u30eb\u3092\u6301\u3063\u305f\u30e6\u30fc\u30b6\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u300d\u3068\u3044\u3063\u305f\u5236\u5fa1\u304c\u3067\u304d\u308b\u3002\nServlet \u304c\u5b9a\u3081\u3066\u3044\u308b\u306e\u306f\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306e\u3068\u3053\u308d\u3060\u3051\u3067\u3001\u30e6\u30fc\u30b6\u306e\u5b9a\u7fa9\u65b9\u6cd5\u3084\u30e6\u30fc\u30b6\u3068\u30ed\u30fc\u30eb\u306e\u7d10\u4ed8\u3051\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u30fc\u6bce\u306b\u65b9\u6cd5\u304c\u7570\u306a\u308b\u3002\n\n\u30e6\u30fc\u30b6\u3092\u5b9a\u7fa9\u3059\u308b\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3092\u958b\u3044\u3066 http://localhost:4848/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n[Configurations] \u2192 [server-config] \u2192 [Security] \u2192 [Realms] \u2192 [file] \u3092\u9078\u629e\u3059\u308b\u3002\n\n\n\n[Manage Users] \u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002\n[New...] \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n\n\n\nUser ID\nGroup List\nNew Password\n\n\n\n\nadmin\nadmin_group\nadmin\n\n\nuser\nuser_group\nuser\n\n\n\n\n\n\u30ec\u30eb\u30e0\n\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3092\u30ec\u30eb\u30e0\u3068\u547c\u3076\u3002\n\n\u30ec\u30eb\u30e0\u3068\u306f\u3001\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u3088\u3046\u306b\u3001 Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30e6\u30fc\u30b6\u3092\u4e00\u610f\u306b\u5b9a\u3081\u308b\u305f\u3081\u306e\"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\"\u3068\u3001 \u8a8d\u8a3c\u3055\u308c\u305f\u5404\u30e6\u30fc\u30b6\u306b\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u30ed\u30fc\u30eb\u306e\u4e00\u89a7\u3092\u5217\u6319\u3059\u308b\u3082\u306e\u306e\u4e21\u65b9\u3092\u5408\u308f\u305b\u305f\u3082\u306e\u3092\u6307\u3057\u307e\u3059\u3002\n\nTomcat5 \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8/JSP \u30b3\u30f3\u30c6\u30ca - \u30ec\u30eb\u30e0\u8a2d\u5b9a\u65b9\u6cd5\n\u3064\u307e\u308a\u3001\u8907\u6570\u306e\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u307e\u3068\u3081\u3066\u30ec\u30eb\u30e0\u3068\u3044\u3046\u5358\u4f4d\u3067\u7ba1\u7406\u3059\u308b\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306f\u3001\u4f7f\u7528\u3059\u308b\u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\u30ed\u30fc\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\n\nweb.xml\n  <security-role>\n    <role-name>admin_role</role-name>\n  </security-role>\n\n  <security-role>\n    <role-name>user_role</role-name>\n  </security-role>\n\n\n\n\u7ba1\u7406\u8005\u7528\u306e\u30ed\u30fc\u30eb\u3068\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u7528\u306e\u30ed\u30fc\u30eb\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\n\n\n\u30e6\u30fc\u30b6\uff08\u30b0\u30eb\u30fc\u30d7\uff09\u3068\u30ed\u30fc\u30eb\u3092\u7d10\u4ed8\u3051\u308b\u3002\n\nglassfish-web.xml\n  <security-role-mapping>\n    <role-name>admin_role</role-name>\n    <group-name>admin_group</group-name>\n  </security-role-mapping>\n\n  <security-role-mapping>\n    <role-name>user_role</role-name>\n    <principal-name>user</principal-name>\n    <group-name>admin_group</group-name>\n  </security-role-mapping>\n\n\n\n\u30e6\u30fc\u30b6\u304a\u3088\u3073\u30b0\u30eb\u30fc\u30d7\u3068\u30ed\u30fc\u30eb\u306e\u7d10\u4ed8\u3051\u306f\u3001 GlassFish \u306e\u5834\u5408\u306f glassfish-web.xml \u3067\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\nglassfish-web.xml \u306f WEB-INF \u306e\u76f4\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n\n\n\u30e6\u30fc\u30b6\u3068\u30ed\u30fc\u30eb\u3092\u7d10\u4ed8\u3051\u308b\u5834\u5408\u306f <principal-name> \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u30b0\u30eb\u30fc\u30d7\u3068\u30ed\u30fc\u30eb\u3092\u7d10\u4ed8\u3051\u308b\u5834\u5408\u306f\u3001 <group-name> \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u4e0a\u8a18\u8a2d\u5b9a\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u610f\u5473\u306b\u306a\u308b\u3002\n\n\n\u30b0\u30eb\u30fc\u30d7\u300cadmin_group\u300d\u306b\u6240\u5c5e\u3059\u308b\u30e6\u30fc\u30b6\u306f\u3001\u30ed\u30fc\u30eb\u300cadmin_role\u300d\u3092\u6301\u3064\u3002\n\nuser \u3068\u3044\u3046\u30e6\u30fc\u30b6\u3068\u30b0\u30eb\u30fc\u30d7\u300cadmin_group\u300d\u306b\u6240\u5c5e\u30e6\u30fc\u30b6\u306f\u3001\u30ed\u30fc\u30eb\u300cuser_role\u300d\u3092\u6301\u3064\u3002\n\n\n\n\n\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u5b9a\u7fa9\u3059\u308b\n\nweb.xml\n  <security-constraint>\n    <web-resource-collection>\n      <web-resource-name>User Resource</web-resource-name>\n      <url-pattern>/secure/user/*</url-pattern>\n      <http-method>GET</http-method>\n    </web-resource-collection>\n    <auth-constraint>\n      <role-name>user_role</role-name>\n    </auth-constraint>\n  </security-constraint>\n\n  <security-constraint>\n    <web-resource-collection>\n      <web-resource-name>Admin Resource</web-resource-name>\n      <url-pattern>/secure/admin/*</url-pattern>\n      <http-method>GET</http-method>\n    </web-resource-collection>\n    <auth-constraint>\n      <role-name>admin_user</role-name>\n    </auth-constraint>\n  </security-constraint>\n\n\n\n\n<security-constraint> \u30bf\u30b0\u3067\u3001\uff11\u3064\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n\n<web-resource-collection> \u30bf\u30b0\u3067\u3001\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306e\u5bfe\u8c61\u3068\u306a\u308b URL \u30d1\u30bf\u30fc\u30f3\u3084 HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n\n\n<http-method> \u306f\u7701\u7565\u53ef\u3002\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u5236\u9650\u306e\u5bfe\u8c61\u306b\u306a\u308b\u3002\n\n<web-resource-collection>\u3001 <url-pattern>\u3001 <http-method> \u306f\u8907\u6570\u6307\u5b9a\u53ef\u80fd\u3002\n\n\n\n<auth-constraint> \u30bf\u30b0\u3067\u3001\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u3044\u30ed\u30fc\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\n\n<role-name> \u30bf\u30b0\u306f\u8907\u6570\u6307\u5b9a\u53ef\u3002\n\n\n\u4e0a\u8a18\u8a2d\u5b9a\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u610f\u5473\u306b\u306a\u308b\u3002\n\n\n\n/secure/user/* \u3078\u306e GET \u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001 user_role \u30ed\u30fc\u30eb\u3092\u6301\u3064\u30e6\u30fc\u30b6\u3060\u3051\u304c\u8a31\u53ef\u3055\u308c\u308b\u3002\n\n/secure/admin/* \u3078\u306e GET \u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001 admin_role \u30ed\u30fc\u30eb\u3092\u6301\u3064\u30e6\u30fc\u30b6\u3060\u3051\u304c\u8a31\u53ef\u3055\u308c\u308b\u3002\n\n\n\n\n\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u3068\u4f7f\u7528\u3059\u308b\u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3059\u308b\n\nweb.xml\n  <login-config>\n    <auth-method>BASIC</auth-method>\n    <realm-name>file</realm-name>\n  </login-config>\n\n\n\n\n<auth-method> \u3067\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n\n\n\u3053\u3053\u3067\u306f\u3001 BASIC \u8a8d\u8a3c\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n\n\n<realm-name> \u3067\u3001\u4f7f\u7528\u3059\u308b\u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n\n\u3053\u3053\u3067\u306f\u3001\u5148\u307b\u3069\u30e6\u30fc\u30b6\u5b9a\u7fa9\u3092\u8ffd\u52a0\u3057\u305f file \u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n\n\n\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u4f7f\u3048\u308b\u3002\n\n\n\n\u8a2d\u5b9a\u5024\n\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\n\n\n\n\nBASIC\nBASIC \u8a8d\u8a3c\n\n\nDIGEST\nDIGEST \u8a8d\u8a3c\n\n\nFORM\nHTML \u306e form \u30bf\u30b0\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\n\n\nSSL\nSSL \u8a8d\u8a3c\n\n\n\n\n\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\nWeb \u30da\u30fc\u30b8\u306e\u4e0b\u306b\u3001 secure/user/user.html \u3068 secure/admin/admin.html \u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\u52d5\u4f5c\u78ba\u8a8d\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 http://localhost:8080/servlet/secure/admin/admin.html \u3092\u958b\u304f\u3002\nBASIC \u8a8d\u8a3c\u7528\u306e\u30ed\u30b0\u30a4\u30f3\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001 admin \u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n\n\u7d9a\u3044\u3066\u3001\u305d\u306e\u307e\u307e http://localhost:8080/servlet/secure/user/user.html \u3092\u958b\u304f\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u306a\u304f\u3001\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u6b21\u306b\u3001\u30d6\u30e9\u30a6\u30b6\u3092\u4e00\u65e6\u7d42\u4e86\u3055\u305b\u3066\u304b\u3089\u3001 http://localhost:8080/servlet/secure/user/user.html \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\u518d\u3073\u30ed\u30b0\u30a4\u30f3\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u4eca\u5ea6\u306f user \u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n\u7d9a\u3044\u3066 http://localhost:8080/servlet/secure/admin/admin.html \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n403 \u3067\u5f3e\u304b\u308c\u308b\u3002\n\n\u53c2\u8003\n\ninit\u30e1\u30bd\u30c3\u30c9\u3068destroy\u30e1\u30bd\u30c3\u30c9 - \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u306e\u57fa\u672c - \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u5165\u9580\n2. \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u306e\u57fa\u672c  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)\nweb.xml \u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u8a18\u8ff0\u5b50\u306e\u8981\u7d20\n5. include\u3068forward (3) | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)\n7. \u30ea\u30b9\u30ca\u30fc  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)\n8. \u30ea\u30b9\u30ca\u30fc2  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)\nTomcat 7\u306e\u65b0\u6a5f\u80fd\u3067\u4f55\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u304b\uff1f\uff082\uff09\uff1aTomcat 7\u3082\u5bfe\u5fdc\u3057\u305fServlet 3.0\u306e\u5909\u66f4\u70b9 \u5f8c\u7de8 (1/3) - \uff20IT\nJavaServer Pages - Wikipedia\n\uff2a\uff33\uff30\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08@page\uff1aimport\u3001session\uff09\n12. EL\u5f0f  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)\n\uff2a\uff33\uff34\uff2c\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08\uff2a\uff33\uff34\uff2c\u306e\u7a2e\u985e\uff09\nHome: Java Platform, Enterprise Edition (Java EE) 7 Release 7\n\uff20IT\uff1aJava TIPS -- \u500b\u5225\u306eJSP\u30da\u30fc\u30b8\u3067JSTL\u5ba3\u8a00\u3092\u7701\u7565\u3059\u308b\n\u30e6\u30fc\u30b6\u30fc\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u30ed\u30fc\u30eb\u3001\u304a\u3088\u3073\u30ec\u30eb\u30e0\u306b\u3064\u3044\u3066 (Sun GlassFish Enterprise Server 2.1 \u7ba1\u7406\u30ac\u30a4\u30c9)\n\n\n\u74b0\u5883\u69cb\u7bc9\u306f [\u3053\u3061\u3089](http://qiita.com/opengl-8080/items/aeda0d8bad42af3113bd)\u3002\n\n\u30b3\u30fc\u30c9\u306f GitHub \u306b\u4e0a\u3052\u3066\u307e\u3059\u3002\nhttps://github.com/opengl8080-javaee-samples/servlet-jsp\n\n#Servlet \u3068\u306f\nJava \u3067 Web \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u3068\u304d\u306e\u57fa\u790e\u3068\u306a\u308b\u4ed5\u7d44\u307f\u30fb\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\nJava EE \u306f\u77e5\u3089\u306a\u3044\u3051\u3069\u3001 Servlet \u306a\u3089\u77e5\u3063\u3066\u3044\u308b\u3068\u3044\u3046\u4eba\u306f\u591a\u3044\u304b\u3068\u3002\n\nJava \u3067 Web \u30a2\u30d7\u30ea\u3092\u4f5c\u308b\u5834\u5408\u3001 Servlet \u3092\u76f4\u63a5\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306f\u57fa\u672c\u7684\u306b\u7121\u3044\u3002\u666e\u901a\u306f\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u3046\uff08Struts, JSF, JAX-RS, Spark, etc...\uff09\u3002\n\u3057\u304b\u3057\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f Servlet \u306e\u4e0a\u3067\u52d5\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3092\u4f7f\u3044\u3053\u306a\u3059\u305f\u3081\u306b\u306f Servlet \u306e\u77e5\u8b58\u304c\u5fc5\u8981\u306b\u306a\u308b\u3068\u304d\u304c\u3042\u308b\u3002\u307e\u305f\u3001\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304c\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u6a5f\u80fd\u3092\u88dc\u5b8c\u3059\u308b\u305f\u3081\u306b\u3001\u3000Servlet \u304c\u63d0\u4f9b\u3059\u308b API \u3092\u30d7\u30ed\u30b0\u30e9\u30de\u304c\u76f4\u63a5\u89e6\u308b\u6a5f\u4f1a\u306f\u7d50\u69cb\u591a\u3044\uff08`HttpServletRequest` \u3084 `HttpServletResponse` \u306a\u3069\uff09\u3002\n\n#Hello World\n\u3042\u3048\u3066 `web.xml` \u3092\u4f7f\u3063\u305f\u57fa\u672c\u7684\u306a\u65b9\u6cd5\u3067 Servlet \u3092\u5b9f\u88c5\u3059\u308b\u3002\n\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30eb\u30fc\u30c8\u3092 `servlet` \u306b\u3057\u3066 [Web \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b](http://qiita.com/opengl-8080/items/aeda0d8bad42af3113bd#%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B)\u3002\n\n```java:HelloServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class HelloServlet extends HttpServlet {\n    \n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        try (PrintWriter writer = response.getWriter()) {\n            writer.println(\"<h1>Hello Servlet!!</h1>\");\n        }\n    }\n}\n```\n\n```xml:web.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app version=\"3.1\"\n         xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd\">\n  \n  <servlet>\n    <servlet-name>HelloServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.HelloServlet</servlet-class>\n  </servlet>\n  \n  <servlet-mapping>\n    <servlet-name>HelloServlet</servlet-name>\n    <url-pattern>/hello</url-pattern>\n  </servlet-mapping>\n  \n</web-app>\n```\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u5b9f\u884c\u3057\u3066\u3001 Web \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/hello` \u3092\u958b\u304f\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/27ffe062-191a-9139-d9f5-7bf880ebc257.jpeg)\n\n- Servlet \u306f\u3001 `HttpServlet` \u30af\u30e9\u30b9\u3092\u7d99\u627f\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3059\u308b\u3002\n- \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u3042\u3063\u305f URL \u3068\u5b9f\u884c\u3059\u308b Servlet \u306e\u30de\u30c3\u30d4\u30f3\u30b0\u306f\u3001 `web.xml` \u306b\u8a18\u8ff0\u3059\u308b\u3002\n    - `<servlet>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u3001 Servlet \u30af\u30e9\u30b9\u3092\u5ba3\u8a00\u3059\u308b\u3002\n    - `<servlet-mapping>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u3001 Servlet \u3068 URL \u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n- `HttpServlet` \u30af\u30e9\u30b9\u304c\u6301\u3064 `do***()` \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u3068\u3001 Servlet \u306e URL \u306b\u9001\u3089\u308c\u3066\u304d\u305f HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n    - `***` \u306e\u90e8\u5206\u306f\u3001 HTTP \u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30e1\u30bd\u30c3\u30c9\uff08GET, POST, PUT, DELETE \u306a\u3069\uff09\u304c\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u3002\n    - \u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3057\u3066\u3044\u306a\u3044 HTTP \u30e1\u30bd\u30c3\u30c9\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u98db\u3093\u3067\u304f\u308b\u3068\u3001 `HttpServlet` \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5b9f\u88c5\u304c `405 - Method Not Allowed` \u3092\u8fd4\u3059\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n#Servlet \u306e\u30e9\u30a4\u30d5\u30b5\u30a4\u30af\u30eb\nServlet \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3044\u3064\u751f\u6210\u3055\u308c\u3066\u3001\u3044\u3064\u7834\u68c4\u3055\u308c\u308b\u306e\u304b\u306b\u3064\u3044\u3066\u3002\n\n```java:LifeCycleServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class LifeCycleServlet extends HttpServlet {\n\n    @Override\n    public void init() throws ServletException {\n        System.out.println(\"init() : hash=\" + this.hashCode());\n    }\n    \n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) {\n        System.out.println(\"doGet() : hash=\" + this.hashCode());\n    }\n\n    @Override\n    public void destroy() {\n        System.out.println(\"destroy() : hash=\" + this.hashCode());\n    }\n}\n```\n\n```xml:web.xml\n  <servlet>\n    <servlet-name>LifeCycleServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.LifeCycleServlet</servlet-class>\n  </servlet>\n  \n  <servlet-mapping>\n    <servlet-name>LifeCycleServlet</servlet-name>\n    <url-pattern>/lifecycle</url-pattern>\n  </servlet-mapping>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/lifecycle` \u3092\u958b\u304d\u3001\u4f55\u5ea6\u304b F5 \u3092\u5b9f\u884c\u3057\u305f\u3042\u3068 GlassFish \u3092\u505c\u6b62\u3055\u305b\u308b\u3002\n\n```text:GlassFish\u306e\u30ed\u30b0\u51fa\u529b\n\u60c5\u5831:   init() : hash=1092915953, thread=http-listener-1(4)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(4)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(1)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(5)\n\u60c5\u5831:   doGet() : hash=1092915953, thread=http-listener-1(3)\n\u60c5\u5831:   Server shutdown initiated\n\u60c5\u5831:   Unregistered com.sun.enterprise.glassfish.bootstrap.osgi.EmbeddedOSGiGlassFishImpl@70e02081 from service registry.\n\u60c5\u5831:   FileMonitoring shutdown\n\u60c5\u5831:   JMXStartupService: Stopped JMXConnectorServer: null\n\u60c5\u5831:   JMXStartupService and JMXConnectors have been shut down.\n\u60c5\u5831:   destroy() : hash=1092915953, thread=RunLevelControllerThread-1419038746038\n```\n\n- Servlet \u306f\u3001\u6700\u521d\u306b URL \u306b\u30a2\u30af\u30bb\u30b9\u3055\u308c\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u751f\u6210\u3055\u308c\u308b\u3002\n    - \u3053\u306e\u3068\u304d\u3001 `init()` \u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n- \u4e00\u5ea6\u751f\u6210\u3055\u308c\u305f Servlet \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001\u7834\u68c4\u3055\u308c\u308b\u3053\u3068\u306a\u304f\u4f7f\u3044\u307e\u308f\u3055\u308c\u308b\u3002\n    - \u3053\u306e\u3068\u304d\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f7f\u7528\u3059\u308b\u30b9\u30ec\u30c3\u30c9\u306f\u6bce\u56de\u7570\u306a\u308b\u3002\n    - \u3088\u3063\u3066\u3001 Servlet \u3092\u5b9f\u88c5\u3059\u308b\u3068\u304d\u306f\u3001\u30b9\u30ec\u30c3\u30c9\u30bb\u30fc\u30d5\u306b\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\n- \u4e00\u5b9a\u6642\u9593 Servlet \u306b\u30a2\u30af\u30bb\u30b9\u304c\u7121\u304b\u3063\u305f\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u304c\u505c\u6b62\u3059\u308b\u3068\u304d\u306b Servlet \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u7834\u68c4\u3055\u308c\u308b\u3002\n    - \u3053\u306e\u3068\u304d\u3001 `destroy()` \u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n\n#HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\n```java:RequestParameterServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class RequestParameterServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        String queryParam = req.getParameter(\"queryParameter\");\n        System.out.println(\"queryParam=\" + queryParam);\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        try (BufferedReader br = req.getReader()) {\n            br.lines().forEach(System.out::println);\n        }\n    }\n}\n```\n\n```xml:web.xml\n  <servlet>\n    <servlet-name>RequestParameterServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.RequestParameterServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>RequestParameterServlet</servlet-name>\n    <url-pattern>/request-param-servlet</url-pattern>\n  </servlet-mapping>\n```\n\n```html:html/request.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Serlvet Request</title>\n  </head>\n  <body>\n    <form action=\"/servlet/request-param-servlet\" method=\"GET\">\n      <input type=\"text\" name=\"queryParameter\" />\n      <input type=\"submit\" value=\"GET\" />\n    </form>\n    \n    <form action=\"/servlet/request-param-servlet\" method=\"POST\">\n      <input type=\"text\" name=\"textbox\" />\n      <textarea name=\"textarea\"></textarea>\n      <input type=\"submit\" value=\"POST\" />\n    </form>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067\u3001 `http://localhost:8080/servlet/html/request.html` \u3092\u958b\u304f\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/24e97436-23d1-ccc4-1459-6609561944d2.jpeg)\n\n**GET \u30dc\u30bf\u30f3\u3092\u62bc\u4e0b**\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   queryParam=get parameter\n```\n\n**POST \u30dc\u30bf\u30f3\u3092\u62bc\u4e0b**\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   textbox=textbox&textarea=textarea%0D%0Avalue\n```\n\n- HTTP \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u60c5\u5831\u306f\u3001 `HttpServletRequest` \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\n- \u30af\u30a8\u30ea\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3001 `getParameter()` \u30e1\u30bd\u30c3\u30c9\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002\n- \u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306f\u3001 `getReader()` \u30e1\u30bd\u30c3\u30c9\u3067\u53d6\u5f97\u3057\u305f `BufferedReader` \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\n    - \u30ea\u30af\u30a8\u30b9\u30c8\u30dc\u30c7\u30a3\u306e\u53d6\u5f97\u306f\u3001 `getInputStream()` \u30e1\u30bd\u30c3\u30c9\u3067\u3082\u53d6\u5f97\u53ef\u80fd\u3002\n    - \u3069\u3061\u3089\u304b\u4e00\u65b9\u3092\u5148\u306b\u547c\u3073\u51fa\u3057\u305f\u5834\u5408\u3001\u4ed6\u65b9\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u4f7f\u3048\u306a\u304f\u306a\u308b\uff08`IllegalStateException` \u304c\u30b9\u30ed\u30fc\u3055\u308c\u308b\uff09\u3002\n- \u3053\u308c\u3089\u4ee5\u5916\u306b\u3082\u3001 HTTP \u30d8\u30c3\u30c0\u30fc\u3084\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u60c5\u5831\uff08IP \u30a2\u30c9\u30ec\u30b9\u306a\u3069\uff09\u3082\u3001 `HttpServletRequest` \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n#Servlet \u521d\u671f\u5316\u6642\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\n```xml:web.xml\n  <servlet>\n    <servlet-name>InitParamServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.InitParamServlet</servlet-class>\n    <init-param>\n      <param-name>hoge</param-name>\n      <param-value>HOGE</param-value>\n    </init-param>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>InitParamServlet</servlet-name>\n    <url-pattern>/init-param</url-pattern>\n  </servlet-mapping>\n```\n\n```java:InitServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.ServletConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class InitParamServlet extends HttpServlet {\n\n    @Override\n    public void init(ServletConfig config) throws ServletException {\n        String hoge = config.getInitParameter(\"hoge\");\n        System.out.println(\"hoge=\" + hoge);\n    }\n    \n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response){\n    }\n}\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u304b\u3089 `http://localhost:8080/servlet/init-param` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   hoge=HOGE\n```\n\n- `web.xml` \u306e `<servlet>` \u30bf\u30b0\u5185\u3067\u3001 `<init-param>` \u30bf\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001 Servlet \u521d\u671f\u5316\u6642\u306b\u4efb\u610f\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- Servlet \u5074\u306f\u3001 `ServletConfig` \u3092\u53d7\u3051\u53d6\u308b `init()` \u30e1\u30bd\u30c3\u30c9\u3092\u30aa\u30fc\u30d0\u30fc\u30e9\u30a4\u30c9\u3059\u308b\u3053\u3068\u3067\u3001\u3053\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u53d7\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n#\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u6642\u306b Servlet \u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n```web.xml\n  <servlet>\n    <servlet-name>FirstStartupServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.FirstStartupServlet</servlet-class>\n    <load-on-startup>1</load-on-startup>\n  </servlet>\n  \n  <servlet>\n    <servlet-name>SecondStartupServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.SecondStartupServlet</servlet-class>\n    <load-on-startup>2</load-on-startup>\n  </servlet>\n  \n  <servlet>\n    <servlet-name>ThirdStartupServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.ThirdStartupServlet</servlet-class>\n    <load-on-startup>3</load-on-startup>\n  </servlet>\n```\n\n```java:FirstStartupServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\n\npublic class FirstStartupServlet extends HttpServlet {\n\n    @Override\n    public void init() throws ServletException {\n        System.out.println(\"FirstStartupServlet.init()\");\n    }\n}\n```\n\n\u203b`SecondStartupServlet.java`, `ThirdStartupServlet.java` \u306f\u51fa\u529b\u6587\u5b57\u5217\u304c\u9055\u3046\u3060\u3051\u3067\u3001\u540c\u3058\u5b9f\u88c5\u306a\u306e\u3067\u7701\u7565\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   FirstStartupServlet.init()\n\u60c5\u5831:   SecondStartupServlet.init()\n\u60c5\u5831:   ThirdStartupServlet.init()\n```\n\n- `web.xml` \u306e `<servlet>` \u30bf\u30b0\u5185\u3067\u3001 `<load-on-startup>` \u30bf\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\u6642\u306b Servlet \u306e\u521d\u671f\u5316\u51e6\u7406\u3092\u5b9f\u884c\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u3053\u306e\u3068\u304d\u3001 `<load-on-startup>` \u30bf\u30b0\u3067\u6307\u5b9a\u3057\u305f\u9806\u5e8f\u3067 Servlet \u306e\u521d\u671f\u5316\u51e6\u7406\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n\n#URL \u306e\u30de\u30c3\u30d4\u30f3\u30b0\n```xml:web.xml\n  <servlet>\n    <servlet-name>UrlPatternWildCardServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.UrlPatternWildCardServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>UrlPatternWildCardServlet</servlet-name>\n    <url-pattern>/wildcard/*</url-pattern>\n  </servlet-mapping>\n  \n  <servlet>\n    <servlet-name>UrlPatternExtensionServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.UrlPatternExtensionServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>UrlPatternExtensionServlet</servlet-name>\n    <url-pattern>*.sample</url-pattern>\n  </servlet-mapping>\n```\n\n##\u52d5\u4f5c\u78ba\u8a8d\n| URL                           | \u5b9f\u884c\u3055\u308c\u308b Servlet                             |\n| :--                           | :--                                        |\n| /servlet/wildcard             | UrlPatternWildCardServlet  |\n| /servlet/wildcard/test        | UrlPatternWildCardServlet  |\n| /servlet/test.sample          | UrlPatternExtensionServlet |\n| /servlet/test/test.sample     | UrlPatternExtensionServlet |\n| /servlet/wildcard/test.sample | UrlPatternWildCardServlet  |\n\n- `<url-pattern>` \u306b\u306f\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9 `*` \u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n#\u5225\u306e Servlet \u306b\u51e6\u7406\u3092\u59d4\u8b72\u3059\u308b\n```xml:web.xml\n  <servlet>\n    <servlet-name>FromServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.FromServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>FromServlet</servlet-name>\n    <url-pattern>/forward/from</url-pattern>\n  </servlet-mapping>\n  \n  <servlet>\n    <servlet-name>ToServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.ToServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>ToServlet</servlet-name>\n    <url-pattern>/forward/to</url-pattern>\n  </servlet-mapping>\n```\n\n```java:FromServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class FromServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        System.out.println(\"FromServlet.doGet()\");\n        req.getRequestDispatcher(\"/forward/to\").forward(req, resp);\n    }\n}\n```\n\n```java:ToServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class ToServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        System.out.println(\"ToServlet.doGet()\");\n    }\n}\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/forward/from` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   FromServlet.doGet()\n\u60c5\u5831:   ToServlet.doGet()\n```\n\n- `request.getRequestDispatcher(\"<\u51e6\u7406\u3092\u59d4\u8b72\u3059\u308b Servlet \u306e\u30d1\u30b9>\").forward(request, response)` \u3067\u3001\u6307\u5b9a\u3057\u305f Servlet \u306b\u51e6\u7406\u3092\u59d4\u8b72\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u3053\u308c\u3092**\u30d5\u30a9\u30ef\u30fc\u30c9**\u3068\u547c\u3076\u3002\n\n#\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\n##\u57fa\u672c\n```xml:web.xml\n  <servlet>\n    <servlet-name>AsyncServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.AsyncServlet</servlet-class>\n    <async-supported>true</async-supported>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>AsyncServlet</servlet-name>\n    <url-pattern>/async</url-pattern>\n  </servlet-mapping>\n```\n\n```java:AsyncServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.servlet.AsyncContext;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class AsyncServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        System.out.println(\"AsyncServlet start.\");\n        \n        AsyncContext ctx = req.startAsync();\n        \n        ctx.start(() -> {\n            try (PrintWriter pw = ctx.getResponse().getWriter()) {\n                Thread.sleep(5000);\n                System.out.println(\"async process.\");\n                pw.println(\"<h1>Async Process</h1>\");\n            } catch (IOException | InterruptedException ex) {\n                ex.printStackTrace();\n            } finally {\n                ctx.complete();\n            }\n        });\n        \n        resp.getWriter().println(\"<h1>AsyncServlet</h1>\");\n        \n        System.out.println(\"AsyncServlet end.\");\n    }\n}\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/async` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AsyncServlet start.\n\u60c5\u5831:   AsyncServlet end.\n\u60c5\u5831:   async process.\n```\n\n<ins>5\u79d2\u307b\u3069\u7d4c\u904e\u3057\u3066\u304b\u3089</ins>\u3001\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/c4f4b16c-5e1a-e245-e1a2-08ee840c0e06.jpeg)\n\n- \u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u5834\u5408\u306f\u3001 Servlet \u306e\u5b9a\u7fa9\u306b `<asyncasync-supported>` \u3092\u8ffd\u52a0\u3057\u3066 true \u3092\u6307\u5b9a\u3059\u308b\u3002\n    - \u3082\u3057 Servlet \u306e\u51e6\u7406\u306e\u524d\u306b Filter \u304c\u51e6\u7406\u3092\u631f\u3080\u5834\u5408\u306f\u3001\u305d\u306e Filter \u306b\u3082 `async-supported` \u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n- `request.startAsync()` \u3067 `AsyncContext` \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u53d6\u5f97\u3059\u308b\u3002\n- `AsyncContext#start(Runnable)` \u3067\u3001\u975e\u540c\u671f\u51e6\u7406\u3092\u958b\u59cb\u3059\u308b\u3002\n- \u975e\u540c\u671f\u51e6\u7406\u4e2d\u306b `HttpServletRequest` \u3084 `HttpServletResponse` \u3092\u53d6\u5f97\u3057\u305f\u3044\u5834\u5408\u306f\u3001 `AsyncContext` \u304b\u3089\u53d6\u5f97\u3059\u308b\u3002\n- \u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001 `AsyncContext#complete()` \u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3053\u3068\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u77e5\u3089\u305b\u308b\uff08\u77e5\u3089\u305b\u306a\u3044\u3068\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u307e\u3067\u5f85\u3064\u3053\u3068\u306b\u306a\u308b\uff09\u3002\n\n###\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3055\u308c\u308b\u307e\u3067\u30b3\u30df\u30c3\u30c8\u3055\u308c\u306a\u3044\n\u300c\u975e\u540c\u671f\u300d\u3068\u3042\u308b\u306e\u3067\u3001\u307e\u308b\u3067\u975e\u540c\u671f\u51e6\u7406\u304c\u5b8c\u4e86\u3059\u308b\u524d\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3055\u308c\u308b\u306e\u304b\u3068\u52d8\u9055\u3044\u3057\u305d\u3046\u306b\u306a\u308b\u3051\u3069\u3001\u305d\u3046\u3067\u306f\u306a\u3044\u3002\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3001 `AsyncContext#complete()` \u304c\u5b9f\u884c\u3055\u308c\u308b\u307e\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8fd4\u3055\u308c\u308b\u3053\u3068\u306f\u306a\u3044\uff08\u30b3\u30df\u30c3\u30c8\u3055\u308c\u306a\u3044\uff09\u3002\n\n__Java\u2122 Servlet Specification Version 3.1 - 2.3.3.3 Asynchronous processing (P.2-11)__\n\n> The response isn't committed till complete (see below) is called on the AsyncContext.\n\n\u65e5\u672c\u8a9e\u8a33\u7248\u306f\u3053\u3061\u3089\u2192 [\u30b5\u30fc\u30d6\u30ec\u30c3\u30c83.0\u4ed5\u69d8\u66f8\u90a6\u8a33\u7248](http://www.cresc.co.jp/tech/java/Servlet_Specifications/servlet_3-0_about.htm)\u3002\n\n> \u305d\u306e\u5fdc\u7b54\u306fAsyncContext\u4e0a\u3067complete\u304c\u547c\u3070\u308c\u308b\u307e\u3067\uff08\u4e0b\u8a18\u53c2\u7167\uff09\u30b3\u30df\u30c3\u30c8\u3055\u308c\u306a\u3044\u3002\n\n\u3064\u307e\u308a\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306f\u975e\u540c\u671f\u306e\u5206\u3082\u542b\u3081\u3066\u3001\u51e6\u7406\u304c\u5b8c\u4e86\u3059\u308b\u307e\u3067\u5f85\u305f\u3055\u308c\u308b\u3002\n\n\u975e\u540c\u671f\u51e6\u7406\u306b\u3059\u308b\u30e1\u30ea\u30c3\u30c8\u306f\u3001\u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u306e\u5b9f\u884c\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u308b\u30b9\u30ec\u30c3\u30c9\u3092\u30b3\u30f3\u30c6\u30ca\u304c\u3055\u3063\u3055\u3068\u56de\u53ce\u3057\u3066\u3001\u5225\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u51e6\u7406\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u7121\u99c4\u304c\u5c11\u306a\u304f\u306a\u308b\u3001\u3068\u3044\u3046\u70b9\u3002\n\n**\u524d\u8ff0\u306e\u65e5\u672c\u8a9e\u8a33\u7248\u306e\u4ed5\u69d8\u66f8\u3088\u308a\u629c\u7c8b**\n\n> \uff08\u524d\u7565\uff09\n> \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u5185\u3067\u306e\u5f85\u6a5f\u306f\u975e\u52b9\u7387\u306a\u4f7f\u3044\u65b9\u3067\u3042\u308b\u3002\n> \uff08\u4e2d\u7565\uff09\n> \u591a\u304f\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u30a2\u30af\u30bb\u30b9\u5f85\u3061\u306e\u72b6\u614b\u3067\u30d6\u30ed\u30c3\u30af\u3055\u305b\u3001\u30a6\u30a7\u30d6\u30fb\u30b3\u30f3\u30c6\u30ca\u5168\u4f53\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u67af\u6e07\u3068\u30b5\u30fc\u30d3\u30b9\u54c1\u8cea\u52a3\u5316\u3092\u3082\u305f\u3089\u3059\u3002\n> \n> \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u7b2c3\u7248\u3067\u306f\u8981\u6c42\u306e\u975e\u540c\u671f\u51e6\u7406\u3092\u5c0e\u5165\u3057\u3066\u304a\u308a\u3001\u305d\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u8fd4\u3057\u3066\u4ed6\u306e\u30bf\u30b9\u30af\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5f85\u305f\u305b\u305f\u304f\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u81ea\u5206\u3067\u30b9\u30ec\u30c3\u30c9\u3092\u4f5c\u3063\u3066\u975e\u540c\u671f\u51e6\u7406\u3092\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u305d\u306e\u5834\u5408\u306f\u3001\u4f5c\u6210\u3057\u305f\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u30b3\u30f3\u30c6\u30ca\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u30ea\u30bd\u30fc\u30b9\uff08`HttpServletRequest` \u306a\u3069\uff09\u306b\u3059\u308b\u306e\u306f\u907f\u3051\u305f\u307b\u3046\u304c\u826f\u3044\u3002\n\u305d\u306e\u8fba\u306b\u3064\u3044\u3066\u306f [Servlet\u304c\u30b9\u30ec\u30c3\u30c9\u3092\u751f\u6210\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u306e\u304b | code up](http://frmmpgit.blog.fc2.com/blog-entry-93.html) \u3092\u53c2\u7167\u3002\n\n\u30ea\u30bd\u30fc\u30b9\u3092\u975e\u540c\u671f\u51e6\u7406\u4e2d\u3067\u4f7f\u3044\u305f\u3044\u306e\u3067\u3042\u308c\u3070\u3001 Java EE 7 \u3067\u8ffd\u52a0\u3055\u308c\u305f Concurrency Utilities for Java EE \u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u53c2\u8003\uff1a[JavaEE - Concurrency Utilities for Java EE\u3092\u3064\u304b\u3063\u3066\u307f\u308b - Qiita](http://qiita.com/TTakakiyo/items/fa93fdec0e52b80fbc41)\n\n##\u975e\u540c\u671f\u51e6\u7406\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\n```java:AsyncServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\nimport javax.servlet.AsyncContext;\nimport javax.servlet.AsyncEvent;\nimport javax.servlet.AsyncListener;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class AsyncServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {\n        System.out.println(\"AsyncServlet start.\");\n        \n        AsyncContext ctx = req.startAsync();\n        \n        ctx.addListener(new AsyncListenerImpl());\n        \n        ctx.start(() -> {\n            try (PrintWriter pw = ctx.getResponse().getWriter()) {\n                Thread.sleep(5000);\n                System.out.println(\"async process.\");\n                pw.println(\"<h1>Async Process</h1>\");\n            } catch (IOException | InterruptedException ex) {\n                ex.printStackTrace();\n            } finally {\n                ctx.complete();\n            }\n        });\n        \n        resp.getWriter().println(\"<h1>AsyncServlet</h1>\");\n        \n        System.out.println(\"AsyncServlet end.\");\n    }\n    \n    private static class AsyncListenerImpl implements AsyncListener {\n\n        @Override\n        public void onStartAsync(AsyncEvent event) throws IOException {\n            System.out.println(\"onStartAsync\");\n        }\n        \n        @Override\n        public void onComplete(AsyncEvent event) throws IOException {\n            System.out.println(\"onComplete\");\n        }\n\n        @Override\n        public void onTimeout(AsyncEvent event) throws IOException {\n            System.out.println(\"onTimeout\");\n        }\n\n        @Override\n        public void onError(AsyncEvent event) throws IOException {\n            System.out.println(\"onError\");\n        }\n    }\n}\n```\n\n- `AsyncListener` \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001 `AsyncContext#addListener()` \u3067\u767b\u9332\u3059\u308b\u3002\n- \u975e\u540c\u671f\u51e6\u7406\u306e\u30a4\u30d9\u30f3\u30c8\u3054\u3068\u306b\u3001\u5404\u30e1\u30bd\u30c3\u30c9\u304c\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3055\u308c\u308b\u3002\n\n\n#\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\n```xml:web.xml\n  <servlet>\n    <servlet-name>SessionServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.SessionServlet</servlet-class>\n  </servlet>\n\n  <servlet-mapping>\n    <servlet-name>SessionServlet</servlet-name>\n    <url-pattern>/session/*</url-pattern>\n  </servlet-mapping>\n```\n\n```java:SessionServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\npublic class SessionServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        if (this.notExistsSession(req)) {\n            this.createSession(req);\n        }\n        \n        if (\"/delete\".equals(req.getPathInfo())) {\n            this.deleteSession(req);\n        } else {\n            this.countUp(req);\n        }\n    }\n    \n    private boolean notExistsSession(HttpServletRequest request) {\n        return request.getSession(false) == null;\n    }\n    \n    private void createSession(HttpServletRequest request) {\n        HttpSession session = request.getSession();\n        session.setAttribute(\"count\", 0);\n        \n        System.out.printf(\"session is created. id=%s%n\", session.getId());\n    }\n\n    private void deleteSession(HttpServletRequest request) {\n        HttpSession session = request.getSession(true);\n        session.invalidate();\n        \n        System.out.printf(\"session is deleted. id=%s%n\", session.getId());\n    }\n\n    private void countUp(HttpServletRequest request) {\n        HttpSession session = request.getSession(false);\n        int count = (int)session.getAttribute(\"count\");\n        session.setAttribute(\"count\", ++count);\n        \n        System.out.printf(\"count up. id=%s, count=%d%n\", session.getId(), count);\n    }\n}\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067\u3001 `http://localhost:8080/servlet/session/` \u306b\u4f55\u5ea6\u304b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   session is created. id=7d32d5e4a2958576fd139692be1a\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=1\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=2\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=3\n\u60c5\u5831:   count up. id=7d32d5e4a2958576fd139692be1a, count=4\n```\n\n\u30d6\u30e9\u30a6\u30b6\u306e Cookie \u3092\u898b\u308b\u3068\u3001 `JSESSIONID` \u3068\u3044\u3046\u540d\u524d\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u306e ID \u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/c15c022e-8369-5998-2bb7-fcb9b03d25a8.jpeg)\n\n`http://localhost:8080/servlet/session/delete` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   session is deleted. id=7d32d5e4a2958576fd139692be1a\n```\n\n\u3082\u3046\u4e00\u5ea6 `http://localhost:8080/servlet/session/` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   session is created. id=7d6023ef3e12cc524fd29fa7f5ad\n\u60c5\u5831:   count up. id=7d6023ef3e12cc524fd29fa7f5ad, count=1\n```\n\n- `request.getSession(boolean)` \u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\u3059\u308b\u3002\n    - true \u3092\u6e21\u3057\u305f\u5834\u5408\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u3068\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u65b0\u898f\u306b\u4f5c\u6210\u3055\u308c\u308b\u3002\n    - false \u3092\u6e21\u3057\u305f\u5834\u5408\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3057\u306a\u3044\u3068 null \u304c\u8fd4\u3055\u308c\u308b\u3002\n- \u30bb\u30c3\u30b7\u30e7\u30f3\u306e ID \u306f\u30d6\u30e9\u30a6\u30b6\u306b\u4fdd\u5b58\u3055\u308c\u308b\uff08\u666e\u901a\u306f Cookie\uff09\u3002\n    - \u30d6\u30e9\u30a6\u30b6\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u305f\u3073\u306b\u3053\u306e ID \u3092\u30b5\u30fc\u30d0\u30fc\u306b\u6e21\u3059\u3002\n    - \u30b5\u30fc\u30d0\u30fc\u306f\u3001\u53d7\u3051\u53d6\u3063\u305f ID \u3092\u3082\u3068\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u8b58\u5225\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3059\u308b\u3002\n- `session.invalidate()` \u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7834\u68c4\u3067\u304d\u308b\u3002\n\n\n#\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u6642\u9593\u3092\u8a2d\u5b9a\u3059\u308b\n```xml:web.xml\n  <session-config>\n    <session-timeout>60</session-timeout>\n  </session-config>\n```\n\n- `<session-config>` \u30bf\u30b0\u3092 `web.xml` \u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306e\u6642\u9593\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n- \u5024\u306f\u5206\u6570\u3092\u6307\u5b9a\u3059\u308b\u3002\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306f 60 \uff081\u6642\u9593\uff09\u3002\n- -1 \u3092\u6307\u5b9a\u3057\u305f\u5834\u5408\u306f\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u7121\u3057\u306b\u306a\u308b\u3002\n\n\n#\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u30fb\u7d42\u4e86\u6642\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n##\u57fa\u672c\n```xml:web.xml\n  <listener>\n    <listener-class>sample.javaee.servlet.listener.WebAppListener</listener-class>\n  </listener>\n```\n\n```java:WebAppListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\n\npublic class WebAppListener implements ServletContextListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        System.out.println(\"contextInitialized()\");\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        System.out.println(\"contextDestroyed()\");\n    }\n}\n```\n\nGlassFish \u3092\u8d77\u52d5\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   contextInitialized()\n```\n\nGlassFish \u3092\u505c\u6b62\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   contextDestroyed()\n```\n\n- `ServletContextListneer` \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001 `<listener>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066 `web.xml` \u306b\u767b\u9332\u3059\u308b\u3002\n- \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u30fb\u7d42\u4e86\u6642\u306b\u3001 `contextInitialized()` \u3068 `contextDestroyed()` \u304c\u305d\u308c\u305e\u308c\u547c\u3070\u308c\u308b\u3002\n\n##\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6e21\u3059\n```xml:web.xml\n  <context-param>\n    <param-name>hoge</param-name>\n    <param-value>HOGE</param-value>\n  </context-param>\n  \n  <listener>\n    <listener-class>sample.javaee.servlet.listener.WebAppListener</listener-class>\n  </listener>\n```\n\n```java:WebAppListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\n\npublic class WebAppListener implements ServletContextListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n        String value = (String)event.getServletContext().getInitParameter(\"hoge\");\n        System.out.println(\"contextInitialized() hoge=\" + value);\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent event) {\n        System.out.println(\"contextDestroyed()\");\n    }\n}\n```\n\nGlassFish \u3092\u8d77\u52d5\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   contextInitialized() hoge=HOGE\n```\n\n- `<contex-param>` \u30bf\u30b0\u3092 `web.xml` \u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001 `ServletContextEvent` \u304b\u3089\u5024\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n#\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u30fb\u7d42\u4e86\u6642\u306b\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\n```xml:web.xml\n  <listener>\n    <listener-class>sample.javaee.servlet.listener.SessionListener</listener-class>\n  </listener>\n```\n\n```java:SessionListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.http.HttpSession;\nimport javax.servlet.http.HttpSessionEvent;\nimport javax.servlet.http.HttpSessionListener;\n\npublic class SessionListener implements HttpSessionListener {\n\n    @Override\n    public void sessionCreated(HttpSessionEvent event) {\n        System.out.printf(\"sessionCreated() id=%s%n\", event.getSession().getId());\n    }\n\n    @Override\n    public void sessionDestroyed(HttpSessionEvent event) {\n        System.out.printf(\"sessionDestroyed() id=%s%n\", event.getSession().getId());\n    }\n}\n```\n\n\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f `SessionServlet` \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   sessionCreated() id=7f5d729e7319528e4a8316d16555\n\u60c5\u5831:   session is created. id=7f5d729e7319528e4a8316d16555\n\u60c5\u5831:   count up. id=7f5d729e7319528e4a8316d16555, count=1\n\u60c5\u5831:   sessionDestroyed() id=7f5d729e7319528e4a8316d16555\n\u60c5\u5831:   session is deleted. id=7f5d729e7319528e4a8316d16555\n```\n\n- `HttpSessionListener` \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001 `<listener>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066 `web.xml` \u306b\u767b\u9332\u3059\u308b\u3002\n- \u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u3068\u524a\u9664\u306e\u3068\u304d\u306b\u3001 `sessionCreated()` \u3068 `sessionDestroyed()` \u304c\u305d\u308c\u305e\u308c\u547c\u3070\u308c\u308b\u3002\n- \u5f15\u6570\u306e `HttpSessionEvent` \u304b\u3089\u3001\u5bfe\u8c61\u306e `HttpSession` \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n#\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u524d\u5f8c\u3067\u51e6\u7406\u3092\u631f\u3080\n```xml:web.xml\n  <filter-mapping>\n    <filter-name>RequestFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n  </filter-mapping>\n```\n\n```java:RequestFilter.java\npackage sample.javaee.servlet.filter;\n\nimport java.io.IOException;\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\n\npublic class RequestFilter implements Filter {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        System.out.println(\"RequestFilter before\");\n        chain.doFilter(request, response);\n        System.out.println(\"RequestFilter after\");\n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n    }\n\n    @Override\n    public void destroy() {\n    }\n}\n```\n\n`http://localhost:8080/servlet/test.sample` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   RequestFilter before\n\u60c5\u5831:   UrlPatternExtensionServlet.doGet()\n\u60c5\u5831:   RequestFilter after\n```\n\n- `Filter` \u3092\u5b9f\u88c5\u3057\u305f\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001 `<filter>` \u30bf\u30b0\u3067 `web.xml` \u306b\u767b\u9332\u3059\u308b\u3002\n- `<filter-mapping>` \u30bf\u30b0\u3067\u3001\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u9069\u7528\u3059\u308b URL \u30d1\u30bf\u30fc\u30f3\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3059\u308b\u3002\n- URL \u30d1\u30bf\u30fc\u30f3\u306b\u30de\u30c3\u30c1\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u3042\u308b\u3068\u3001 `doFilter()` \u30e1\u30bd\u30c3\u30c9\u304c\u5b9f\u884c\u3055\u308c\u308b\u3002\n    - `FilterChain#doFilter()` \u30e1\u30bd\u30c3\u30c9\u3067\u3001\u6b21\u306e\u51e6\u7406\u3078\u9032\u3080\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u547c\u3070\u306a\u304f\u3066\u3082\u826f\u3044\uff09\u3002\n\n#\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n```xml:web.xml\n  <welcome-file-list>\n    <welcome-file>welcome.html</welcome-file>\n  </welcome-file-list>\n```\n\n```html:welcome.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Servlet JSP Sample</title>\n  </head>\n  <body>\n    <h1>Welcome Page</h1>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/2609da37-d20f-e453-c670-25e07cef6914.jpeg)\n\n- `<welcome-file-file>` \u30bf\u30b0\u3067\u3001\u30eb\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\u8868\u793a\u3059\u308b\u30d1\u30b9\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n- `<welcome-file>` \u30bf\u30b0\u306f\u8907\u6570\u8a18\u8ff0\u3067\u304d\u308b\u3002\n    - \u8907\u6570\u8a18\u8ff0\u3057\u305f\u5834\u5408\u306f\u3001\u5148\u982d\u304b\u3089\u9806\u756a\u306b\u5b58\u5728\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3001\u6700\u521d\u306b\u5b58\u5728\u898b\u3064\u304b\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n- \u30d5\u30a1\u30a4\u30eb\u3060\u3051\u3067\u306a\u304f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b Servlet \u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u30d1\u30b9\u3082\u6307\u5b9a\u53ef\u80fd\u3002\n\n```xml:web.xml\n  <welcome-file-list>\n    <welcome-file>hello</welcome-file>\n  </welcome-file-list>\n```\n\n#\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u3068\u304d\u306e\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n##HTTP \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3054\u3068\u306b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n```xml:web.xml\n  <error-page>\n    <error-code>404</error-code>\n    <location>/error/404.html</location>\n  </error-page>\n```\n\n```html:404.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>404 Not Found</title>\n  </head>\n  <body>\n    <h1>404 Not Found</h1>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3092\u958b\u3044\u3066\u3001 `http://localhost:8080/servlet/xxx` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/8a827a5d-8b40-ee8b-f752-3e4b3d79dbd3.jpeg)\n\n- `<error-page>` \u30bf\u30b0\u3067\u3001\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u305f\u3068\u304d\u306b\u8868\u793a\u3059\u308b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n- `<error-code>` \u30bf\u30b0\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001 HTTP \u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3054\u3068\u306b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n##\u30b9\u30ed\u30fc\u3055\u308c\u305f\u4f8b\u5916\u3054\u3068\u306b\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3059\u308b\n```xml:web.xml\n  <servlet>\n    <servlet-name>NullPointerServlet</servlet-name>\n    <servlet-class>sample.javaee.servlet.NullPointerServlet</servlet-class>\n  </servlet>\n  \n  <servlet-mapping>\n    <servlet-name>NullPointerServlet</servlet-name>\n    <url-pattern>/null</url-pattern>\n  </servlet-mapping>\n  \n  <error-page>\n    <exception-type>java.lang.NullPointerException</exception-type>\n    <location>/error/null.html</location>\n  </error-page>\n```\n\n```java:NullPointerServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class NullPointerServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        throw new NullPointerException(\"NullPointerServlet\");\n    }\n}\n```\n\n```html:null.html\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>NullPointerException</title>\n  </head>\n  <body>\n    <h1>NullPointerException!!</h1>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/null` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/939583d9-08e4-3980-976f-c8440ce5dad2.jpeg)\n\n- `<exception-type>` \u30bf\u30b0\u3067\u3001\u4f8b\u5916\u3054\u3068\u306b\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n#\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u8a2d\u5b9a\u3059\u308b\nServlet 3.0 \u304b\u3089\u306f\u3001 `web.xml` \u3067\u8a18\u8ff0\u3057\u3066\u3044\u305f\u8a2d\u5b9a\u3092\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##Servlet\n```java:AnnotatedServlet.java\npackage sample.javaee.servlet;\n\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(\"/annotated\")\npublic class AnnotatedServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {\n        System.out.println(\"AnnotatedServlet.doGet()\");\n    }\n}\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/annotated` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AnnotatedServlet.doGet()\n```\n\n\u8a2d\u5b9a\u3067\u304d\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f [API \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://docs.oracle.com/javaee/7/api/javax/servlet/annotation/WebServlet.html) \u3092\u53c2\u7167\u3002\n\n##Listener\n```java:AnnotatedListener.java\npackage sample.javaee.servlet.listener;\n\nimport javax.servlet.ServletContextEvent;\nimport javax.servlet.ServletContextListener;\nimport javax.servlet.annotation.WebListener;\n\n@WebListener\npublic class AnnotatedListener implements ServletContextListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent sce) {\n        System.out.println(\"AnnotatedListener.contextInitialized()\");\n    }\n\n    @Override\n    public void contextDestroyed(ServletContextEvent sce) {\n    }\n}\n```\n\nGlassFish \u3092\u8d77\u52d5\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AnnotatedListener.contextInitialized()\n```\n\n##Filter\n```java:AnnotatedFilter.java\npackage sample.javaee.servlet.filter;\n\nimport java.io.IOException;\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.annotation.WebFilter;\n\n@WebFilter(\"/*\")\npublic class AnnotatedFilter implements Filter {\n\n    @Override\n    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        System.out.println(\"AnnotatedFilter before\");\n        chain.doFilter(request, response);\n        System.out.println(\"AnnotatedFilter after\");\n    }\n    \n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {}\n    @Override\n    public void destroy() {}\n}\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   AnnotatedFilter before\n\u60c5\u5831:   AnnotatedFilter after\n```\n\n\u305f\u3060\u3057\u3001\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u306e\u5834\u5408\u306f Filter \u306e\u9806\u5e8f\u3092\u5b9a\u7fa9\u3067\u304d\u306a\u3044\u3002\n\u9806\u5e8f\u3092\u5b9a\u7fa9\u3057\u305f\u3044\u5834\u5408\u306f[\u3053\u3061\u3089](http://qiita.com/opengl-8080/items/db385b934690d6c3d13a) \u3092\u53c2\u7167\u3002\n\n#JSP\n##JSP \u3068\u306f\nJavaServer Pages \u306e\u7565\u3002\n\u30d3\u30e5\u30fc\uff08\u753b\u9762\uff09\u3092\u52d5\u7684\u306b\u4f5c\u308b\u305f\u3081\u306e\u4ed5\u7d44\u307f\uff08\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\uff09\u3002 HTML \u30bf\u30b0\u3068 JSP \u304c\u6301\u3064\u30bf\u30b0\u306a\u3069\u3092\u4f7f\u3063\u3066\u753b\u9762\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\nServlet \u306f MVC \u306e C (Controller) \u3092\u62c5\u3044\u3001 JSP \u306f V (View) \u3092\u62c5\u3046\u3002\n\u3057\u304b\u3057\u3001\u66f8\u304d\u65b9\u306b\u3088\u3063\u3066\u306f\u30b4\u30ea\u30b4\u30ea Java \u306e\u51e6\u7406\u3092\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u305f\u3081\u3001\u9b54\u7a9f\u306e\u3088\u3046\u306a JSP \u3082\u4e16\u306e\u4e2d\u306b\u306f\u5b58\u5728\u3059\u308b\u3002\n\n\u305f\u3060\u3057\u3001 Java EE 6 \u304b\u3089\u306f\u3001 Facelets \u3068\u3044\u3046\u5225\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u304c\u30e1\u30a4\u30f3\u3068\u306a\u3063\u3066\u3044\u308b\uff08JSP \u306f\u7121\u304f\u306a\u3063\u3066\u306f\u3044\u306a\u3044\uff09\u3002\n\n##Hello World\n```jsp:jsp/hello.jsp\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <h1>Hello JSP!!</h1>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067\u3001 `http://localhost:8080/servlet/jsp/hello.jsp` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/51d00a4d-0b93-f827-9318-1ddeb8266ad4.jpeg)\n\n- \u666e\u901a\u306b HTML \u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u62e1\u5f35\u5b50\u3092 `.jsp` \u306b\u3057\u3066\u4fdd\u5b58\u3057\u3001\u76f4\u63a5 URL \u3092\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070 JSP \u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u308b\u3002\n\n##JSP \u306f Servlet \u306e\u5b9f\u88c5\u306b\u5909\u63db\u3055\u308c\u3066\u5b9f\u884c\u3055\u308c\u308b\nJSP \u306b\u30a2\u30af\u30bb\u30b9\u304c\u3042\u308b\u3068\u3001\u30b5\u30fc\u30d0\u30fc\u306f JSP \u3092 Servlet \u306e\u5b9f\u88c5\u306b\u5909\u63db\u3059\u308b\u3002\nGlassFish \u306e\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u30d5\u30a9\u30eb\u30c0\u3092\u898b\u308b\u3068\u751f\u6210\u3055\u308c\u305f Servlet \u306e\u5b9f\u88c5\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n`<GlassFish \u672c\u4f53\u304c\u5b58\u5728\u3059\u308b\u30d5\u30a9\u30eb\u30c0>\\domains\\<\u30c9\u30e1\u30a4\u30f3\u540d>\\generated\\jsp\\<\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u540d>\\`\n\n\u4ee5\u4e0b\u304c\u3001\u5b9f\u969b\u306b\u51fa\u529b\u3055\u308c\u305f Servlet \u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3002\n\n```java:hello_jsp.java\npackage org.apache.jsp.jsp;\n\nimport javax.servlet.*;\nimport javax.servlet.http.*;\nimport javax.servlet.jsp.*;\n\npublic final class hello_jsp extends org.apache.jasper.runtime.HttpJspBase\n    implements org.apache.jasper.runtime.JspSourceDependent {\n\n  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();\n\n  private static java.util.List<String> _jspx_dependants;\n\n  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;\n\n  public java.util.List<String> getDependants() {\n    return _jspx_dependants;\n  }\n\n  public void _jspService(HttpServletRequest request, HttpServletResponse response)\n        throws java.io.IOException, ServletException {\n\n    PageContext pageContext = null;\n    HttpSession session = null;\n    ServletContext application = null;\n    ServletConfig config = null;\n    JspWriter out = null;\n    Object page = this;\n    JspWriter _jspx_out = null;\n    PageContext _jspx_page_context = null;\n\n    try {\n      response.setContentType(\"text/html\");\n      response.setHeader(\"X-Powered-By\", \"JSP/2.3\");\n      pageContext = _jspxFactory.getPageContext(this, request, response,\n               null, true, 8192, true);\n      _jspx_page_context = pageContext;\n      application = pageContext.getServletContext();\n      config = pageContext.getServletConfig();\n      session = pageContext.getSession();\n      out = pageContext.getOut();\n      _jspx_out = out;\n      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute(\"com.sun.appserv.jsp.resource.injector\");\n\n      out.write(\"<!DOCTYPE html>\\r\\n\");\n      out.write(\"<html>\\r\\n\");\n      out.write(\"  <head>\\r\\n\");\n      out.write(\"    <meta charset=\\\"UTF-8\\\">\\r\\n\");\n      out.write(\"    <title>Hello JSP</title>\\r\\n\");\n      out.write(\"  </head>\\r\\n\");\n      out.write(\"  <body>\\r\\n\");\n      out.write(\"    <h1>Hello JSP!!</h1>\\r\\n\");\n      out.write(\"  </body>\\r\\n\");\n      out.write(\"</html>\\r\\n\");\n    } catch (Throwable t) {\n      if (!(t instanceof SkipPageException)){\n        out = _jspx_out;\n        if (out != null && out.getBufferSize() != 0)\n          out.clearBuffer();\n        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);\n        else throw new ServletException(t);\n      }\n    } finally {\n      _jspxFactory.releasePageContext(_jspx_page_context);\n    }\n  }\n}\n```\n\n\u5358\u7d14\u306b HTML \u3067\u8a18\u8ff0\u3057\u305f JSP \u30d5\u30a1\u30a4\u30eb\u306f\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b Servlet \u306b\u3088\u308b\u5b9f\u88c5\u306b\u7f6e\u304d\u63db\u3048\u3089\u308c\u3066\u304b\u3089\u5b9f\u884c\u3055\u308c\u3001\u51e6\u7406\u7d50\u679c\u304c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u8fd4\u3055\u308c\u3066\u3044\u308b\u3002\n\n##\u30da\u30fc\u30b8\u306e\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3092\u6307\u5b9a\u3059\u308b\n```jsp:encoding.jsp\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>\u65e5\u672c\u8a9e</h1>\n  </body>\n</html>\n```\n\nHTML \u306e `<meta>` \u30bf\u30b0\u3092\u4f7f\u3063\u3066\u6587\u5b57\u30b3\u30fc\u30c9\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u304c\u3001\u3053\u306e\u307e\u307e\u3067\u65e5\u672c\u8a9e\u3092\u8a18\u8ff0\u3059\u308b\u3068\u6587\u5b57\u5316\u3051\u304c\u767a\u751f\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/3438d368-af8d-e7b6-b318-db3211dd5bf8.jpeg)\n\n\u3053\u308c\u306f\u3001 JSP \u304c HTML \u3092\u751f\u6210\u3059\u308b\u3068\u304d\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 ISO-8859-1 \u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u539f\u56e0\u3002\n\nHTML \u3092\u51fa\u529b\u3059\u308b\u3068\u304d\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3059\u308b\u3002\n\n```jsp:encoding.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>\u65e5\u672c\u8a9e</h1>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/4990eb81-14f0-dd49-8903-f7d58a56375d.jpeg)\n\n##\u4efb\u610f\u306e Java \u30b3\u30fc\u30c9\u3092\u57cb\u3081\u8fbc\u3080\n```jsp:scriptlet.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <% String msg = \"Hello Scriptlet!!\"; %>\n    <h1><%=msg %></h1>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/cff85759-36f1-d7e1-a0f5-5ca14b55e817.jpeg)\n\n- `<% %>` \u306f**\u30b9\u30af\u30ea\u30d7\u30c8\u30ec\u30c3\u30c8**\u3068\u547c\u3073\u3001\u4efb\u610f\u306e Java \u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n- `<%= %>` \u3067\u4efb\u610f\u306e Java \u30b3\u30fc\u30c9\u3092\u8a55\u4fa1\u3057\u305f\u7d50\u679c\u3092 HTML \u4e2d\u306b\u57cb\u3081\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##JSP \u5185\u3067\u6697\u9ed9\u7684\u306b\u4f7f\u7528\u3067\u304d\u308b\u5909\u6570\n```jsp:implicit.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <% out.println(\"<h1>Implicit Objects</h1>\"); %>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/28c62d1c-a32a-51bd-c149-2765b2934925.jpeg)\n\n- JSP \u5185\u3067\u306f\u3001\u5ba3\u8a00\u305b\u305a\u306b\u6697\u9ed9\u7684\u306b\u4f7f\u7528\u3067\u304d\u308b\u5909\u6570\u304c\u5b58\u5728\u3059\u308b\u3002\n    - \u4e0a\u8a18\u4f8b\u306e\u5834\u5408\u306f\u3001 `out` \u3068\u3044\u3046\u5909\u6570\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n    - \u3053\u308c\u306e\u5b9f\u4f53\u306f `PrintWriter` \u3067\u3001 HTML \u3078\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u51fa\u529b\u3067\u304d\u308b\u3002\n\n`out` \u4ee5\u5916\u306b\u3082\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5909\u6570\u3092\u4f7f\u7528\u3067\u304d\u308b\u3002\n\n| \u5909\u6570        | \u578b                  | \u8aac\u660e                                                |\n| :--         | :--                 | :--                                                 |\n| out         | PrintWriter         | HTML \u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u51fa\u529b\u3067\u304d\u308b\u3002                   |\n| request     | HttpServletRequest  | \u73fe\u5728\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002                      |\n| response    | HttpServletResponse | \u73fe\u5728\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002                      |\n| pageContext | PageContext         | \u73fe\u5728\u306e JSP \u30da\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002 |\n| session     | HttpSession         | \u73fe\u5728\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002                      |\n| application | ServletContext      | \u30a2\u30d7\u30ea\u306e ServletContext \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002              |\n| page        | HttpJspPage         | JSP \u304b\u3089\u751f\u6210\u3055\u308c\u305f Servlet \u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3002         |\n\n##Java \u306e\u30af\u30e9\u30b9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\n```jsp:java_import.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@page import=\"java.util.List\" %>\n<%@page import=\"java.util.Arrays\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <ul>\n      <%\n      List<String> list = Arrays.asList(\"hoge\", \"fuga\", \"piyo\");\n\n      for (String value : list) {\n          out.println(\"<li>\" + value + \"</li>\");\n      }\n      %>\n    </ul>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/6f86f655-0284-2061-2937-dc47754d2b29.jpeg)\n\n- `<%@page import=\"...\" %>` \u3067\u3001\u4efb\u610f\u306e Java \u30af\u30e9\u30b9\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3067\u304d\u308b\u3002\n\n##\u30b3\u30e1\u30f3\u30c8\u3092\u8a18\u8ff0\u3059\u308b\n```jsp:comment.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>Hello JSP</title>\n  </head>\n  <body>\n    <!--HTML comment-->\n    <%-- JSP comment --%>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/daeae7f5-8b00-e2ae-ad28-5cde454e7cd4.jpeg)\n\n- `<%-- --%>` \u3067 JSP \u306e\u30b3\u30e1\u30f3\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n- JSP \u306e\u30b3\u30e1\u30f3\u30c8\u306f\u3001 HTML \u306b\u51fa\u529b\u3055\u308c\u306a\u3044\u3002\n\n##\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u57cb\u3081\u8fbc\u3080\n```jsp:embedded.jsp\n<%@include file=\"hello.jsp\" %>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/9f26de65-1576-a85c-bbd5-df180d3828b8.jpeg)\n\n- `<%@include file=\"...\" %>` \u3067\u3001\u4efb\u610f\u306e\u30d5\u30a1\u30a4\u30eb\u3092 JSP \u5185\u306b\u57cb\u3081\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##Servlet \u304b\u3089 JSP \u306b\u51e6\u7406\u3092\u79fb\u3059\n```java:JspServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(\"/jsp-servlet\")\npublic class JspServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        System.out.println(\"JspServlet.doGet()\");\n        req.getRequestDispatcher(\"jsp/hello.jsp\").forward(req, resp);\n    }\n}\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/jsp-servlet` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```text:GlassFish\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\n\u60c5\u5831:   JspServlet.doGet()\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/16f18cd6-1598-d1dd-1a99-7112cdc47e04.jpeg)\n\n- Servlet \u3068\u540c\u3058\u8981\u9818\u3067\u30d5\u30a9\u30ef\u30fc\u30c9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n##EL \u5f0f\n###EL \u5f0f\u3068\u306f\nExpression Language \u306e\u7565\u3002\n\u5f0f\u8a00\u8a9e\u3068\u3082\u547c\u3070\u308c\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u30ec\u30c3\u30c8\u3088\u308a\u3082\u7c21\u6f54\u306a\u8a18\u8ff0\u3067\u6f14\u7b97\u7d50\u679c\u306e\u51fa\u529b\u306a\u3069\u304c\u3067\u304d\u308b\u3002\n\n\u6700\u521d\u306f JSP \u306e\u4e00\u90e8\u3060\u3063\u305f\u304c\u3001 Java EE 7 \u304b\u3089\u306f\u72ec\u7acb\u3057\u305f\u4ed5\u69d8\u3068\u306a\u3063\u305f\u3002\nFacelets \u3067\u3082\u4f7f\u3048\u308b\u3002\n\n###\u57fa\u672c\n```jsp:el.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>${\"Hello Expression Language\"}</h1>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d8c27e4a-82e3-39b6-078b-d3058c9d017d.jpeg)\n\n- `${<\u8a55\u4fa1\u3057\u305f\u3044\u5f0f>}` \u3067\u8a18\u8ff0\u3059\u308b\u3002\n- \u8a55\u4fa1\u7d50\u679c\u306f\u3001\u305d\u306e\u307e\u307e HTML \u4e0a\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\n###\u6f14\u7b97\u3059\u308b\n```jsp:el2.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>100 + 10 + 1 = ${100 + 10 + 1}</h1>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/483f3fc3-854e-95ba-9efc-ca4451481fb4.jpeg)\n\n- `${}` \u306e\u4e2d\u306b\u306f\u3001\u4efb\u610f\u306e\u6f14\u7b97\u5f0f\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3002\n\n###\u6697\u9ed9\u7684\u306b\u53c2\u7167\u3067\u304d\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n```jsp:el3.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>${pageContext.request.serverName}</h1>\n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d0c621bd-49f6-3d5a-2fb5-e98124338504.jpeg)\n\n- JavaBeans \u306e\u4ed5\u69d8\u306b\u5f93\u3063\u3066\u547d\u540d\u3055\u308c\u305f `getter` \u30e1\u30bd\u30c3\u30c9\u306f\u3001 `get` \u3092\u7701\u7565\u3057\u3066\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u3060\u3051\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u30b9\u30af\u30ea\u30d7\u30c8\u30ec\u30c3\u30c8\u3068\u540c\u3058\u3088\u3046\u306b\u3001 EL \u5f0f\u5185\u3067\u306f\u6697\u9ed9\u7684\u306b\u53c2\u7167\u3067\u304d\u308b\u5909\u6570\u304c\u5b58\u5728\u3059\u308b\u3002\n\n| \u5909\u6570\u540d           | \u8aac\u660e                                 |\n| :---             | :--                                  |\n| sessionScope     | \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7                   |\n| requestScope     | \u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30b3\u30fc\u30d7                   |\n| applicationScope | \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b9\u30b3\u30fc\u30d7             |\n| pageSope         | \u30da\u30fc\u30b8\u30b9\u30b3\u30fc\u30d7                       |\n| pageContext      | \u73fe\u5728\u306e\u30da\u30fc\u30b8\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8           |\n| param            | \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u30de\u30c3\u30d7         |\n| paramValues      | \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\uff08\u914d\u5217\uff09\u306e\u30de\u30c3\u30d7 |\n| header           | HTTP \u306e\u30d8\u30c3\u30c0                        |\n| headerValues     | HTTP \u306e\u30d8\u30c3\u30c0\uff08\u914d\u5217\uff09                |\n| cookie           | \u30af\u30c3\u30ad\u30fc\uff08\u30de\u30c3\u30d7\uff09                   |\n\n###\u5404\u30b9\u30b3\u30fc\u30d7\u3078\u306e\u30a2\u30af\u30bb\u30b9\n```java:ELScopeServlet.java\npackage sample.javaee.servlet;\n\nimport java.io.IOException;\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@WebServlet(\"/el-scope-servlet\")\npublic class ELScopeServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        req.setAttribute(\"hoge\", \"HOGE\");\n        req.getSession().setAttribute(\"fuga\", \"FUGA\");\n        req.getServletContext().setAttribute(\"piyo\", \"PIYO\");\n        \n        req.setAttribute(\"same\", \"RequestValue\");\n        req.getSession().setAttribute(\"same\", \"SessionValue\");\n        req.getServletContext().setAttribute(\"same\", \"ApplicationValue\");\n        \n        req.getRequestDispatcher(\"jsp/el4.jsp\").forward(req, resp);\n    }\n}\n```\n\n```jsp:el4.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <h1>${requestScope.hoge} - ${sessionScope.fuga} - ${applicationScope.piyo}</h1>\n    <h2>${hoge} - ${fuga} - ${piyo}</h2>\n    \n    <ul>\n      <li>${same}\n      <li>${requestScope.same}\n      <li>${sessionScope.same}\n      <li>${applicationScope.same}\n    </ul>\n    \n    <% pageContext.setAttribute(\"same\", \"PageScopeValue\"); %>\n    \n    <h3>${same}</h3>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/el-scope-servlet` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/ab24628f-a95b-a246-bc84-16f2ee840c3d.jpeg)\n\n- `requestScope`\u3001 `sessionScope`\u3001 `applicationScope` \u306f\u3001\u305d\u308c\u305e\u308c `HttpServletRequest`\u3001 `HttpSession`\u3001 `ServletContext` \u306e `setAttribute()` \u3067\u30bb\u30c3\u30c8\u3059\u308b\u3002\n- \u5404\u30b9\u30b3\u30fc\u30d7\u306b\u4fdd\u5b58\u3055\u308c\u305f\u5024\u306f\u3001 EL \u5f0f\u4e0a\u3067\u306f\u3044\u304d\u306a\u308a\u30ad\u30fc\u306b\u6307\u5b9a\u3057\u305f\u540d\u524d\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- \u7570\u306a\u308b\u30b9\u30b3\u30fc\u30d7\u306b\u540c\u3058\u540d\u524d\u3067\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u5024\u3092 EL \u5f0f\u3067\u53c2\u7167\u3057\u305f\u5834\u5408\u3001\u3088\u308a\u72ed\u3044\u30b9\u30b3\u30fc\u30d7\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5024\u304c\u53d6\u5f97\u3055\u308c\u308b\u3002\n\n###\u914d\u5217\u30fb\u30ea\u30b9\u30c8\u3078\u306e\u30a2\u30af\u30bb\u30b9\n```jsp:el5.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@page import=\"java.util.*\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <%\n    String[] array = {\"hoge\", \"fuga\", \"piyo\"};\n    List<String> list = Arrays.asList(\"HOGE\", \"FUGA\", \"PIYO\");\n    \n    pageContext.setAttribute(\"array\", array);\n    pageContext.setAttribute(\"list\", list);\n    %>\n    \n    <h2>${array[0]}, ${array[1]}, ${array[2]}</h2>\n    <h2>${list[0]}, ${list[1]}, ${list[2]}</h2>\n    \n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/c59063b5-d87a-f610-b6b5-7f6a875d1f1a.jpeg)\n\n- \u914d\u5217\u3001 List \u306f\u3001 `[]` \u3092\u4f7f\u3063\u305f\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u6307\u5b9a\u3067\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3002\n\n###\u30de\u30c3\u30d7\u306e\u30a8\u30f3\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\n```jsp:el6.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@page import=\"java.util.*\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <%\n    Map<String, String> map = new HashMap<String, String>();\n    map.put(\"hoge\", \"HOGE\");\n    map.put(\"fuga\", \"FUGA\");\n    map.put(\"piyo\", \"PIYO\");\n    \n    pageContext.setAttribute(\"map\", map);\n    %>\n    \n    <h2>${map.hoge} - ${map[\"fuga\"]} - ${map['piyo']}</h2>\n    \n  </body>\n</html>\n```\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/bee69916-470e-3058-2afe-87b48fe57fc9.jpeg)\n\n- Map \u306e\u5404\u30a8\u30f3\u30c8\u30ea\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u306f\u3001 `map.\u30ad\u30fc\u540d` \u304b `map[\"\u30ad\u30fc\u540d\"]` \u306e\u3044\u305a\u308c\u304b\u306e\u65b9\u6cd5\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n##\u6a19\u6e96\u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea(JSTL)\u3092\u4f7f\u7528\u3059\u308b\n```jsp:jstl.jsp\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\n<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <c:set var=\"flag\" value=\"true\" />\n    \n    <c:if test=\"${flag}\">\n      flag is true\n    </c:if>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/jsp/jstl.jsp` \u3092\u8868\u793a\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e45a7678-1a96-d4b8-433c-94fb9d012436.jpeg)\n\n- JSP \u306b\u306f\u3001\u6a19\u6e96\u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\uff08JSP Standard Tag Library\uff09\u3068\u3044\u3046\u30ed\u30b8\u30c3\u30af\u306a\u3069\u3092\u6271\u3046\u305f\u3081\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002\n- \u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001 `<%@taglib prefix=\"...\" uri=\"...\" %>` \u3067\u4f7f\u7528\u3059\u308b\u30bf\u30b0\u3092\u5ba3\u8a00\u3059\u308b\u3002\n    - `prefix` \u5c5e\u6027\u306b\u306f\u3001\u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3068\u304d\u306e\u540d\u524d\u7a7a\u9593\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `uri` \u5c5e\u6027\u306b\u306f\u3001\u4f7f\u7528\u3059\u308b\u30bf\u30b0\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e URI \u3092\u6307\u5b9a\u3059\u308b\u3002\n    - URI \u306b\u6307\u5b9a\u3059\u308b\u5024\u306f\u3001 jar \u30d5\u30a1\u30a4\u30eb\u306b\u5165\u3063\u3066\u3044\u308b `*.tld` \u30d5\u30a1\u30a4\u30eb\u3092\u898b\u308b\u3068\u66f8\u3044\u3066\u3044\u308b\u3002\n\n**c.tld**\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/53843c17-5d6e-7c34-7805-0e67dc8c6a77.jpeg)\n\n```xml:c.tld\n<taglib xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd\"\n    version=\"2.1\">\n    \n  <description>JSTL 1.2 core library</description>\n  <display-name>JSTL core</display-name>\n  <tlib-version>1.2</tlib-version>\n  <short-name>c</short-name>\n  <uri>http://java.sun.com/jsp/jstl/core</uri>\n\n\uff08\u7565\uff09\n```\n\n- \u6a19\u6e96\u30ab\u30b9\u30bf\u30e0\u30bf\u30b0\u306b\u306f\u3001\u4ee5\u4e0b\u306e\uff15\u7a2e\u985e\u304c\u5b58\u5728\u3059\u308b\u3002\n\n| \u540d\u524d                    | \u8aac\u660e                                                               | URI                                    |\n| :--                     | :--                                                                | :--                                    |\n| core                    | if \u3084 for \u306a\u3069\u3001\u6700\u3082\u3088\u304f\u4f7f\u3046\u30ed\u30b8\u30c3\u30af\u51e6\u7406\u7528\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002 | http://java.sun.com/jsp/jstl/core      |\n| i18n-capable formatting | i18n \u5bfe\u5fdc\u3057\u305f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u51fa\u529b\u306a\u3069\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002          | http://java.sun.com/jsp/jstl/fmt       |\n| functions               | \u6587\u5b57\u5217\u64cd\u4f5c\u3088\u3046\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002                             | http://java.sun.com/jsp/jstl/functions |\n| sql                     | \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u7528\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002                         | http://java.sun.com/jsp/jstl/sql       |\n| xml                     | XML \u306e\u89e3\u6790\u3001\u51e6\u7406\u3059\u308b\u305f\u3081\u306e\u30bf\u30b0\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3002                   | http://java.sun.com/jsp/jstl/xml       |\n\n- \u5404\u30bf\u30b0\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f\u3001 [\uff2a\uff33\uff34\uff2c\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 | \u5fd8\u308c\u3063\u307d\u3044\u30a8\u30f3\u30b8\u30cb\u30a2\u306eJakarta Struts\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9](http://struts.wasureppoi.com/jstl/00_jstl.html) \u304c\u65e5\u672c\u8a9e\u3067\u307e\u3068\u3081\u3089\u308c\u3066\u3066\u91cd\u5b9d\u3057\u307e\u3059\u3002\n\n##\u8907\u6570\u306eJSP\u3067\u5171\u901a\u3059\u308b\u5ba3\u8a00\u3092\u307e\u3068\u3081\u308b\n```xml:web.xml\n  <jsp-config>\n    <jsp-property-group>\n      <url-pattern>*.jsp</url-pattern>\n      <page-encoding>UTF-8</page-encoding>\n      <include-prelude>/jsp/taglib.jsp</include-prelude>\n    </jsp-property-group>\n  </jsp-config>\n```\n\n```jsp:taglib.jsp\n<%@taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\n```\n\n```jsp:jsp-config.jsp\n<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"UTF-8\">\n    <title>JSP Page</title>\n  </head>\n  <body>\n    <c:set var=\"flag\" value=\"true\" />\n    <c:set var=\"message\" value=\"\u65e5\u672c\u8a9e\" />\n    \n    <c:if test=\"${flag}\">\n      ${message}\n    </c:if>\n  </body>\n</html>\n```\n\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/jsp/jsp-config.jsp` \u3092\u958b\u304f\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/e14a7f47-0734-ace1-98c4-5f92f1e60317.jpeg)\n\n- `web.xml` \u3067 `<jsp-config>` \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u8907\u6570\u30d5\u30a1\u30a4\u30eb\u3067\u5171\u901a\u3059\u308b\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n- `<url-pattern>` \u3067\u6307\u5b9a\u3057\u305f\u30d1\u30bf\u30fc\u30f3\u306b\u30de\u30c3\u30c1\u3059\u308b URL \u306b\u30a2\u30af\u30bb\u30b9\u304c\u3042\u3063\u305f\u5834\u5408\u306b\u9650\u308a\u3001\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u5171\u901a\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u308b\u3002\n- `<include-prelude>` \u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306f\u3001\u5168\u3066\u306e JSP \u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u306b\u57cb\u3081\u8fbc\u307e\u308c\u308b\u3002\u3053\u3053\u3067\u6a19\u6e96\u30bf\u30b0\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u7528\u5ba3\u8a00\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u3001\u5404\u30da\u30fc\u30b8\u3067\u306e\u8aad\u307f\u8fbc\u307f\u5ba3\u8a00\u3092\u7701\u7565\u3067\u304d\u308b\u3002\n\n#\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\nServlet \u3067\u306f\u3001\u7279\u5b9a\u306e URL \u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b\u5bfe\u3057\u3066\u8a8d\u8a3c\u306b\u3088\u308b\u5236\u9650\u3092\u8a2d\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n\n\u3053\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306f\u3001\u30ed\u30fc\u30eb\u5358\u4f4d\u306b\u884c\u3048\u308b\u3002\n\u3064\u307e\u308a\u3001\u300c`/admin/*` \u3068\u3044\u3046 URL \u306b\u5bfe\u3057\u3066\u306f `admin` \u3068\u3044\u3046\u30ed\u30fc\u30eb\u3092\u6301\u3063\u305f\u30e6\u30fc\u30b6\u3057\u304b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u300d\u3068\u3044\u3063\u305f\u5236\u5fa1\u304c\u3067\u304d\u308b\u3002\n\nServlet \u304c\u5b9a\u3081\u3066\u3044\u308b\u306e\u306f\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306e\u3068\u3053\u308d\u3060\u3051\u3067\u3001\u30e6\u30fc\u30b6\u306e\u5b9a\u7fa9\u65b9\u6cd5\u3084\u30e6\u30fc\u30b6\u3068\u30ed\u30fc\u30eb\u306e\u7d10\u4ed8\u3051\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30b5\u30fc\u30d0\u30fc\u6bce\u306b\u65b9\u6cd5\u304c\u7570\u306a\u308b\u3002\n\n##\u30e6\u30fc\u30b6\u3092\u5b9a\u7fa9\u3059\u308b\n- Web \u30d6\u30e9\u30a6\u30b6\u3092\u958b\u3044\u3066 `http://localhost:4848/` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n- [Configurations] \u2192 [server-config] \u2192 [Security] \u2192 [Realms] \u2192 [file] \u3092\u9078\u629e\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/88b6072e-3a8e-3ef5-d425-df712b1d1ec1.jpeg)\n\n- [Manage Users] \u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3002\n- [New...] \u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n| User ID | Group List  | New Password |\n| :--     | :--         | :--          |\n| admin   | admin_group | admin        |\n| user    | user_group  | user         |\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/d40d8538-ae43-d671-4b20-7940d4e43ef5.jpeg)\n\n###\u30ec\u30eb\u30e0\n\u3053\u3053\u3067\u5b9a\u7fa9\u3057\u305f\u3082\u306e\u3092**\u30ec\u30eb\u30e0**\u3068\u547c\u3076\u3002\n\n> \u30ec\u30eb\u30e0\u3068\u306f\u3001\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u7d44\u307f\u5408\u308f\u305b\u306e\u3088\u3046\u306b\u3001 Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30e6\u30fc\u30b6\u3092\u4e00\u610f\u306b\u5b9a\u3081\u308b\u305f\u3081\u306e\"\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\"\u3068\u3001 \u8a8d\u8a3c\u3055\u308c\u305f\u5404\u30e6\u30fc\u30b6\u306b\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u308b\u30ed\u30fc\u30eb\u306e\u4e00\u89a7\u3092\u5217\u6319\u3059\u308b\u3082\u306e\u306e\u4e21\u65b9\u3092\u5408\u308f\u305b\u305f\u3082\u306e\u3092\u6307\u3057\u307e\u3059\u3002\n\n[Tomcat5 \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8/JSP \u30b3\u30f3\u30c6\u30ca - \u30ec\u30eb\u30e0\u8a2d\u5b9a\u65b9\u6cd5](http://www.jajakarta.org/tomcat/tomcat5.0/ja/docs/tomcat-docs/realm-howto.html#%E3%83%AC%E3%83%AB%E3%83%A0%E3%81%A8%E3%81%AF?)\n\n\u3064\u307e\u308a\u3001\u8907\u6570\u306e\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u307e\u3068\u3081\u3066\u30ec\u30eb\u30e0\u3068\u3044\u3046\u5358\u4f4d\u3067\u7ba1\u7406\u3059\u308b\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u306f\u3001\u4f7f\u7528\u3059\u308b\u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n##\u30ed\u30fc\u30eb\u3092\u5b9a\u7fa9\u3059\u308b\n```xml:web.xml\n  <security-role>\n    <role-name>admin_role</role-name>\n  </security-role>\n  \n  <security-role>\n    <role-name>user_role</role-name>\n  </security-role>\n```\n\n- \u7ba1\u7406\u8005\u7528\u306e\u30ed\u30fc\u30eb\u3068\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u7528\u306e\u30ed\u30fc\u30eb\u3092\u5b9a\u7fa9\u3057\u3066\u3044\u308b\u3002\n\n##\u30e6\u30fc\u30b6\uff08\u30b0\u30eb\u30fc\u30d7\uff09\u3068\u30ed\u30fc\u30eb\u3092\u7d10\u4ed8\u3051\u308b\u3002\n```xml:glassfish-web.xml\n  <security-role-mapping>\n    <role-name>admin_role</role-name>\n    <group-name>admin_group</group-name>\n  </security-role-mapping>\n\n  <security-role-mapping>\n    <role-name>user_role</role-name>\n    <principal-name>user</principal-name>\n    <group-name>admin_group</group-name>\n  </security-role-mapping>\n```\n\n- \u30e6\u30fc\u30b6\u304a\u3088\u3073\u30b0\u30eb\u30fc\u30d7\u3068\u30ed\u30fc\u30eb\u306e\u7d10\u4ed8\u3051\u306f\u3001 GlassFish \u306e\u5834\u5408\u306f `glassfish-web.xml` \u3067\u5b9a\u7fa9\u3059\u308b\u3002\n    - `glassfish-web.xml` \u306f `WEB-INF` \u306e\u76f4\u4e0b\u306b\u914d\u7f6e\u3059\u308b\u3002\n- \u30e6\u30fc\u30b6\u3068\u30ed\u30fc\u30eb\u3092\u7d10\u4ed8\u3051\u308b\u5834\u5408\u306f `<principal-name>` \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3002\n- \u30b0\u30eb\u30fc\u30d7\u3068\u30ed\u30fc\u30eb\u3092\u7d10\u4ed8\u3051\u308b\u5834\u5408\u306f\u3001 `<group-name>` \u30bf\u30b0\u3092\u4f7f\u7528\u3059\u308b\u3002\n- \u4e0a\u8a18\u8a2d\u5b9a\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u610f\u5473\u306b\u306a\u308b\u3002\n    - \u30b0\u30eb\u30fc\u30d7\u300c`admin_group`\u300d\u306b\u6240\u5c5e\u3059\u308b\u30e6\u30fc\u30b6\u306f\u3001\u30ed\u30fc\u30eb\u300c`admin_role`\u300d\u3092\u6301\u3064\u3002\n    - `user` \u3068\u3044\u3046\u30e6\u30fc\u30b6\u3068\u30b0\u30eb\u30fc\u30d7\u300c`admin_group`\u300d\u306b\u6240\u5c5e\u30e6\u30fc\u30b6\u306f\u3001\u30ed\u30fc\u30eb\u300c`user_role`\u300d\u3092\u6301\u3064\u3002\n\n##\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u5b9a\u7fa9\u3059\u308b\n```xml:web.xml\n  <security-constraint>\n    <web-resource-collection>\n      <web-resource-name>User Resource</web-resource-name>\n      <url-pattern>/secure/user/*</url-pattern>\n      <http-method>GET</http-method>\n    </web-resource-collection>\n    <auth-constraint>\n      <role-name>user_role</role-name>\n    </auth-constraint>\n  </security-constraint>\n  \n  <security-constraint>\n    <web-resource-collection>\n      <web-resource-name>Admin Resource</web-resource-name>\n      <url-pattern>/secure/admin/*</url-pattern>\n      <http-method>GET</http-method>\n    </web-resource-collection>\n    <auth-constraint>\n      <role-name>admin_user</role-name>\n    </auth-constraint>\n  </security-constraint>\n```\n\n- `<security-constraint>` \u30bf\u30b0\u3067\u3001\uff11\u3064\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u3092\u5b9a\u7fa9\u3067\u304d\u308b\u3002\n- `<web-resource-collection>` \u30bf\u30b0\u3067\u3001\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306e\u5bfe\u8c61\u3068\u306a\u308b URL \u30d1\u30bf\u30fc\u30f3\u3084 HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n    - `<http-method>` \u306f\u7701\u7565\u53ef\u3002\u7701\u7565\u3057\u305f\u5834\u5408\u306f\u3001\u5168\u3066\u306e\u30e1\u30bd\u30c3\u30c9\u304c\u5236\u9650\u306e\u5bfe\u8c61\u306b\u306a\u308b\u3002\n    - `<web-resource-collection>`\u3001 `<url-pattern>`\u3001 `<http-method>` \u306f\u8907\u6570\u6307\u5b9a\u53ef\u80fd\u3002\n- `<auth-constraint>` \u30bf\u30b0\u3067\u3001\u305d\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3044\u3044\u30ed\u30fc\u30eb\u3092\u6307\u5b9a\u3059\u308b\u3002\n    - `<role-name>` \u30bf\u30b0\u306f\u8907\u6570\u6307\u5b9a\u53ef\u3002\n- \u4e0a\u8a18\u8a2d\u5b9a\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u610f\u5473\u306b\u306a\u308b\u3002\n    - `/secure/user/*` \u3078\u306e GET \u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001 `user_role` \u30ed\u30fc\u30eb\u3092\u6301\u3064\u30e6\u30fc\u30b6\u3060\u3051\u304c\u8a31\u53ef\u3055\u308c\u308b\u3002\n    - `/secure/admin/*` \u3078\u306e GET \u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001 `admin_role` \u30ed\u30fc\u30eb\u3092\u6301\u3064\u30e6\u30fc\u30b6\u3060\u3051\u304c\u8a31\u53ef\u3055\u308c\u308b\u3002\n\n##\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u3068\u4f7f\u7528\u3059\u308b\u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3059\u308b\n```xml:web.xml\n  <login-config>\n    <auth-method>BASIC</auth-method>\n    <realm-name>file</realm-name>\n  </login-config>\n```\n\n- `<auth-method>` \u3067\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u3092\u5b9a\u7fa9\u3059\u308b\u3002\n    - \u3053\u3053\u3067\u306f\u3001 BASIC \u8a8d\u8a3c\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n- `<realm-name>` \u3067\u3001\u4f7f\u7528\u3059\u308b\u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n    - \u3053\u3053\u3067\u306f\u3001\u5148\u307b\u3069\u30e6\u30fc\u30b6\u5b9a\u7fa9\u3092\u8ffd\u52a0\u3057\u305f `file` \u30ec\u30eb\u30e0\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u4f7f\u3048\u308b\u3002\n\n| \u8a2d\u5b9a\u5024 | \u30ed\u30b0\u30a4\u30f3\u65b9\u6cd5                  |\n| :--    | :--                           |\n| BASIC  | BASIC \u8a8d\u8a3c                    |\n| DIGEST | DIGEST \u8a8d\u8a3c                   |\n| FORM   | HTML \u306e form \u30bf\u30b0\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c |\n| SSL    | SSL \u8a8d\u8a3c                      |\n\n##\u30da\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\nWeb \u30da\u30fc\u30b8\u306e\u4e0b\u306b\u3001 `secure/user/user.html` \u3068 `secure/admin/admin.html` \u3092\u4f5c\u6210\u3059\u308b\u3002\n\n##\u52d5\u4f5c\u78ba\u8a8d\nWeb \u30d6\u30e9\u30a6\u30b6\u3067 `http://localhost:8080/servlet/secure/admin/admin.html` \u3092\u958b\u304f\u3002\n\nBASIC \u8a8d\u8a3c\u7528\u306e\u30ed\u30b0\u30a4\u30f3\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001 `admin` \u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/0fcbf5fd-1b71-1061-5408-3bc7047abca3.jpeg)\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/cc68e418-3115-bf5a-846d-97065328bb5c.jpeg)\n\n\u7d9a\u3044\u3066\u3001\u305d\u306e\u307e\u307e `http://localhost:8080/servlet/secure/user/user.html` \u3092\u958b\u304f\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/dadc59cf-d15d-2073-82aa-464b02d1aa80.jpeg)\n\n\u30ed\u30b0\u30a4\u30f3\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u306a\u304f\u3001\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\n\u6b21\u306b\u3001\u30d6\u30e9\u30a6\u30b6\u3092\u4e00\u65e6\u7d42\u4e86\u3055\u305b\u3066\u304b\u3089\u3001 `http://localhost:8080/servlet/secure/user/user.html` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/4495df12-56e5-79f2-fddf-054f9fb899ce.jpeg)\n\n\u518d\u3073\u30ed\u30b0\u30a4\u30f3\u30c0\u30a4\u30a2\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u4eca\u5ea6\u306f `user` \u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/1e4cac2a-622f-0966-4016-39a1fd7e02d2.jpeg)\n\n\u7d9a\u3044\u3066 `http://localhost:8080/servlet/secure/admin/admin.html` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n![javaee-servlet.JPG](https://qiita-image-store.s3.amazonaws.com/0/28302/3613444c-522c-63c9-9003-c18e168581d7.jpeg)\n\n403 \u3067\u5f3e\u304b\u308c\u308b\u3002\n\n#\u53c2\u8003\n- [init\u30e1\u30bd\u30c3\u30c9\u3068destroy\u30e1\u30bd\u30c3\u30c9 - \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u306e\u57fa\u672c - \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u5165\u9580](http://www.javadrive.jp/servlet/ini/index6.html)\n- [2. \u30b5\u30fc\u30d6\u30ec\u30c3\u30c8\u306e\u57fa\u672c  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)](http://www.techscore.com/tech/Java/JavaEE/Servlet/2/)\n- [web.xml \u30c7\u30d7\u30ed\u30a4\u30e1\u30f3\u30c8\u8a18\u8ff0\u5b50\u306e\u8981\u7d20](http://otndnld.oracle.co.jp/document/products/wls/docs103/webapp/web_xml.html)\n- [5. include\u3068forward (3) | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)](http://www.techscore.com/tech/Java/JavaEE/Servlet/5-3/)\n- [7. \u30ea\u30b9\u30ca\u30fc  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)](http://www.techscore.com/tech/Java/JavaEE/Servlet/7/)\n- [8. \u30ea\u30b9\u30ca\u30fc2  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)](http://www.techscore.com/tech/Java/JavaEE/Servlet/8/)\n- [Tomcat 7\u306e\u65b0\u6a5f\u80fd\u3067\u4f55\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u304b\uff1f\uff082\uff09\uff1aTomcat 7\u3082\u5bfe\u5fdc\u3057\u305fServlet 3.0\u306e\u5909\u66f4\u70b9 \u5f8c\u7de8 (1/3) - \uff20IT](http://www.atmarkit.co.jp/ait/articles/1106/10/news116.html)\n- [JavaServer Pages - Wikipedia](http://ja.wikipedia.org/wiki/JavaServer_Pages)\n- [\uff2a\uff33\uff30\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08@page\uff1aimport\u3001session\uff09](http://struts.wasureppoi.com/jsp/05_import.html)\n- [12. EL\u5f0f  | TECHSCORE(\u30c6\u30c3\u30af\u30b9\u30b3\u30a2)](http://www.techscore.com/tech/Java/JavaEE/JSP/12/)\n- [\uff2a\uff33\uff34\uff2c\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08\uff2a\uff33\uff34\uff2c\u306e\u7a2e\u985e\uff09](http://struts.wasureppoi.com/jstl/01_kind.html)\n- [Home: Java Platform, Enterprise Edition (Java EE) 7 Release 7](http://docs.oracle.com/javaee/7/)\n- [\uff20IT\uff1aJava TIPS -- \u500b\u5225\u306eJSP\u30da\u30fc\u30b8\u3067JSTL\u5ba3\u8a00\u3092\u7701\u7565\u3059\u308b](http://www.atmarkit.co.jp/fjava/javatips/119jspservlet39.html)\n- [\u30e6\u30fc\u30b6\u30fc\u3001\u30b0\u30eb\u30fc\u30d7\u3001\u30ed\u30fc\u30eb\u3001\u304a\u3088\u3073\u30ec\u30eb\u30e0\u306b\u3064\u3044\u3066 (Sun GlassFish Enterprise Server 2.1 \u7ba1\u7406\u30ac\u30a4\u30c9)](https://docs.oracle.com/cd/E19879-01/820-7432/abloe/index.html)\n", "tags": ["JavaEE7", "Java", "servlet", "JSP", "glassfish4.1"]}