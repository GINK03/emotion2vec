{"context": "socket.io \u3067\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u7279\u5225\u306a\u4e8b\u306f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\nvar app  = require('express')();\nvar http = require('http').Server(app);\nvar io   = require('socket.io')(http);\n\nvar messages = {\n  0: '\u30ba\u30f3',\n  1: '\u30c9\u30b3',\n  2: '\u30ad\u30fb\u30e8\u30fb\u30b7\uff01',\n};\n\nvar current  = [];\nvar expected = [0, 0, 0, 0, 1];\n\nfunction zundoko(socket) {\n  var rand = Math.floor(Math.random() * 2); // 0 or 1\n  if (current.push(rand) > 5) {\n     current.shift();\n  }\n  emit(socket, rand); // zun or doko ..\n\n  // kiyoshi ?\n  if (current.toString() == expected.toString()) {\n    emit(socket, 2);\n  }\n}\n\nfunction emit(socket, index) {\n  socket.emit('message', messages[index]);\n}\n\nio.on('connection', function(socket) {\n  setInterval(zundoko.bind(this, socket), 1500);\n});\n\napp.get('/', function(req, res) {\n  res.sendFile(__dirname + '/index.html');\n});\n\nhttp.listen(3050, function() {\n  console.log('listening on *:3050');\n});\n\n\u30bd\u30fc\u30b9\u306f\u3001\nhttps://github.com/nilesflow/zundoko-socket.io\nsocket.io \u3067\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u7279\u5225\u306a\u4e8b\u306f\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n```\nvar app  = require('express')();\nvar http = require('http').Server(app);\nvar io   = require('socket.io')(http);\n\nvar messages = {\n  0: '\u30ba\u30f3',\n  1: '\u30c9\u30b3',\n  2: '\u30ad\u30fb\u30e8\u30fb\u30b7\uff01',\n};\n\nvar current  = [];\nvar expected = [0, 0, 0, 0, 1];\n\nfunction zundoko(socket) {\n  var rand = Math.floor(Math.random() * 2); // 0 or 1\n  if (current.push(rand) > 5) {\n     current.shift();\n  }\n  emit(socket, rand); // zun or doko ..\n\n  // kiyoshi ?\n  if (current.toString() == expected.toString()) {\n    emit(socket, 2);\n  }\n}\n\nfunction emit(socket, index) {\n  socket.emit('message', messages[index]);\n}\n\nio.on('connection', function(socket) {\n  setInterval(zundoko.bind(this, socket), 1500);\n});\n\napp.get('/', function(req, res) {\n  res.sendFile(__dirname + '/index.html');\n});\n\nhttp.listen(3050, function() {\n  console.log('listening on *:3050');\n});\n```\n\n\u30bd\u30fc\u30b9\u306f\u3001\nhttps://github.com/nilesflow/zundoko-socket.io\n", "tags": ["\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7", "Node.js", "Socket.io"]}