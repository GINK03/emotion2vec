{"context": "\n\n\u306f\u3058\u3081\u306b\n\u30d0\u30a4\u30c8\u5148\u306e\u30ec\u30ac\u30b7\u30fc\u306apukiwiki\u306b\u304b\u308f\u308b\u65b0\u3057\u3044wiki\u3092\u63a2\u3057\u3066\u3044\u308b\u4e2d\u3001crowi\u304c\u3044\u3044\u3068\u306e\u60c5\u5831\u3067\u52d5\u304b\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u3002\ncentos6\u7cfb\u3067\u52d5\u304b\u3059\u3068\u304d\u306b\u8272\u3005\u8a70\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u74b0\u5883\n\nCentOS 6.8\nMongoDB 3.2.10\nnode.js 4.4.7\n\n\nMongoDB\u3092\u5165\u308c\u308b\n\n\u5c0e\u5165\nMongoDB\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002\n\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u53c2\u7167\u3002  \n$ sudo yum upgrade\nyum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b /etc/yum.repos.d/mongodb-org-3.2.repo \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3002\n[mongodb-org-3.2]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc\n\nmonogoDB\u3092\u5165\u308c\u308b\n$ sudo yum install -y mongodb-org\nSE Linux\u3092\u6b62\u3081\u308b /etc/selinux/config\nSELINUX=disabled\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nmongo\u3092\u52d5\u304b\u3057\u3066\u307f\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\n$ mongo\n> use test\nswitched to db test\n> db.name.insert({\"name\":\"shuya\", \"age\":21})\nWriteResult({ \"nInserted\" : 1 })\n> db.dropDatabase()\n{ \"dropped\" : \"test\", \"ok\" : 1 }\n> show dbs\nlocal  0.000GB\n> exit\nbye\n\n\ncrowi\u7528\u306e\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n$ mongo\n> use crowidb\nswitched to db crowidb\n>  db.createUser({user: \"shuya\", pwd: \"shuya\", roles: [{role: \"userAdmin\", db: \"crowidb\"}]})\nSuccessfully added user: {\n    \"user\" : \"shuya\",\n    \"roles\" : [\n        {\n            \"role\" : \"userAdmin\",\n            \"db\" : \"crowidb\"\n        }\n    ]\n}\n> use admin\nswitched to db admin\n> db.system.users.find()\n{ \"_id\" : \"crowidb.shuya\", \"user\" : \"shuya\", \"db\" : \"crowidb\", \"credentials\" : { \"SCRAM-SHA-1\" : { \"iterationCount\" : 10000, \"salt\" : \"ul5wxld3o/7ozcPt0dVEVA==\", \"storedKey\" : \"+9WQzbVivQBLUNk3eyvGJbzFxvo=\", \"serverKey\" : \"4wt1dgwpke14/zPJDOy1tKZuqkM=\" } }, \"roles\" : [ { \"role\" : \"userAdmin\", \"db\" : \"crowidb\" } ] }\n\n\nnodejs\u3092\u5165\u308c\u308b\nepel\u304b\u3089\u306e\u8ffd\u52a0\u3060\u3068\u306a\u305c\u304b\u3046\u307e\u304f\u52d5\u304b\u305a\u3002\u3002\u3002\n$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.30.1/install.sh | bash\n$ source ~/.bash_profile\n$ nvm ls-remote\n$ nvm install v4.4.7\n$ node -v\n  v4.4.7\n\n\ncrowi\u3092\u30af\u30ed\u30fc\u30f3\ncrowi\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u304f\u308b\n$ git clone --depth 1 https://github.com/crowi/crowi.git\n$ cd crowi\n$ git checkout v1.5.0\n$ sudo npm install --unsafe-perm\n\n\u74b0\u5883\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u3044\u3066\u5b9f\u884c\n\ncrowi.sh\nexport PASSWORD_SEED=hoge\nexport MONGO_URI=mongodb://USERNAME:PASSWORD@localhost/DBNAME\nnode app.js\n\n\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\n3000\u756a\u3067listen\u3057\u3066\u3044\u308b\u304b\u3089\u30d6\u30e9\u30a6\u30b6\u306b\u30a2\u30af\u30bb\u30b9\nhttp://localhost:3000\n\u3082\u3057\u753b\u50cf\u3084CSS\u304c\u63cf\u753b\u3055\u308c\u306a\u304b\u3063\u305f\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u624b\u6253\u3061\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u6cbb\u308b\n(\u3053\u3053\u3067\u3081\u3061\u3083\u304f\u3061\u3083\u3064\u307e\u3063\u305f)\n$ npm run build\n\n\u305a\u3063\u3068\u52d5\u304b\u3059\nforever\u3092\u4f7f\u3063\u3066\u30c7\u30fc\u30e2\u30f3\u5316\u3059\u308b\n$ npm install forever -g\n$ forever start app.js\n\n\n\u6700\u5f8c\u306b\n\u3053\u308c\u3067\u3042\u306a\u305f\u3082\u30a4\u30b1\u3066\u308bmarkdawn wiki\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\uff01\n\n\u53c2\u8003\nMarkdown\u3067\u66f8\u3051\u308bWiki - Crowi\n# \u306f\u3058\u3081\u306b\n\u30d0\u30a4\u30c8\u5148\u306e\u30ec\u30ac\u30b7\u30fc\u306apukiwiki\u306b\u304b\u308f\u308b\u65b0\u3057\u3044wiki\u3092\u63a2\u3057\u3066\u3044\u308b\u4e2d\u3001crowi\u304c\u3044\u3044\u3068\u306e\u60c5\u5831\u3067\u52d5\u304b\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u3002\ncentos6\u7cfb\u3067\u52d5\u304b\u3059\u3068\u304d\u306b\u8272\u3005\u8a70\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n# \u74b0\u5883\n- CentOS 6.8\n- MongoDB 3.2.10\n- node.js 4.4.7\n\n# MongoDB\u3092\u5165\u308c\u308b\n## \u5c0e\u5165\nMongoDB\u3092\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3059\u308b\u3002  \n[\u516c\u5f0f\u30b5\u30a4\u30c8](https://docs.mongodb.com/manual/tutorial/install-mongodb-on-red-hat/)\u3092\u53c2\u7167\u3002  \n  \n```$ sudo yum upgrade```\n\nyum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b **/etc/yum.repos.d/mongodb-org-3.2.repo** \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\u3002\n\n```\n[mongodb-org-3.2]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.2/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.2.asc\n```\n\nmonogoDB\u3092\u5165\u308c\u308b\n```$ sudo yum install -y mongodb-org```\n\nSE Linux\u3092\u6b62\u3081\u308b **/etc/selinux/config**\n\n``` \nSELINUX=disabled\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\nmongo\u3092\u52d5\u304b\u3057\u3066\u307f\u3066\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\n\n```\n$ mongo\n> use test\nswitched to db test\n> db.name.insert({\"name\":\"shuya\", \"age\":21})\nWriteResult({ \"nInserted\" : 1 })\n> db.dropDatabase()\n{ \"dropped\" : \"test\", \"ok\" : 1 }\n> show dbs\nlocal  0.000GB\n> exit\nbye\n```\n\n## crowi\u7528\u306e\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n\n```\n$ mongo\n> use crowidb\nswitched to db crowidb\n>  db.createUser({user: \"shuya\", pwd: \"shuya\", roles: [{role: \"userAdmin\", db: \"crowidb\"}]})\nSuccessfully added user: {\n\t\"user\" : \"shuya\",\n\t\"roles\" : [\n\t\t{\n\t\t\t\"role\" : \"userAdmin\",\n\t\t\t\"db\" : \"crowidb\"\n\t\t}\n\t]\n}\n> use admin\nswitched to db admin\n> db.system.users.find()\n{ \"_id\" : \"crowidb.shuya\", \"user\" : \"shuya\", \"db\" : \"crowidb\", \"credentials\" : { \"SCRAM-SHA-1\" : { \"iterationCount\" : 10000, \"salt\" : \"ul5wxld3o/7ozcPt0dVEVA==\", \"storedKey\" : \"+9WQzbVivQBLUNk3eyvGJbzFxvo=\", \"serverKey\" : \"4wt1dgwpke14/zPJDOy1tKZuqkM=\" } }, \"roles\" : [ { \"role\" : \"userAdmin\", \"db\" : \"crowidb\" } ] }\n```\n\n# nodejs\u3092\u5165\u308c\u308b\nepel\u304b\u3089\u306e\u8ffd\u52a0\u3060\u3068\u306a\u305c\u304b\u3046\u307e\u304f\u52d5\u304b\u305a\u3002\u3002\u3002\n\n```\n$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.30.1/install.sh | bash\n$ source ~/.bash_profile\n$ nvm ls-remote\n$ nvm install v4.4.7\n$ node -v\n  v4.4.7\n```\n\n\n\n## crowi\u3092\u30af\u30ed\u30fc\u30f3\ncrowi\u3092\u30af\u30ed\u30fc\u30f3\u3057\u3066\u304f\u308b\n\n```\n$ git clone --depth 1 https://github.com/crowi/crowi.git\n$ cd crowi\n$ git checkout v1.5.0\n$ sudo npm install --unsafe-perm\n```\n\u74b0\u5883\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u3044\u3066\u5b9f\u884c\n\n```:crowi.sh\nexport PASSWORD_SEED=hoge\nexport MONGO_URI=mongodb://USERNAME:PASSWORD@localhost/DBNAME\nnode app.js\n```\n\n# \u30a2\u30af\u30bb\u30b9\u3059\u308b\n3000\u756a\u3067listen\u3057\u3066\u3044\u308b\u304b\u3089\u30d6\u30e9\u30a6\u30b6\u306b\u30a2\u30af\u30bb\u30b9\nhttp://localhost:3000\n\u3082\u3057\u753b\u50cf\u3084CSS\u304c\u63cf\u753b\u3055\u308c\u306a\u304b\u3063\u305f\u3089\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u624b\u6253\u3061\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u6cbb\u308b\n(\u3053\u3053\u3067\u3081\u3061\u3083\u304f\u3061\u3083\u3064\u307e\u3063\u305f)\n```$ npm run build```\n\n# \u305a\u3063\u3068\u52d5\u304b\u3059\nforever\u3092\u4f7f\u3063\u3066\u30c7\u30fc\u30e2\u30f3\u5316\u3059\u308b\n\n```\n$ npm install forever -g\n$ forever start app.js\n```\n\n# \u6700\u5f8c\u306b\n\u3053\u308c\u3067\u3042\u306a\u305f\u3082\u30a4\u30b1\u3066\u308bmarkdawn wiki\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\uff01\n\n# \u53c2\u8003\n[Markdown\u3067\u66f8\u3051\u308bWiki - Crowi](http://qiita.com/nullsnet/items/a6e69e44087339127b35)\n", "tags": ["CentOS6.x", "MongoDB", "Node.js", "Crowi", "forever"]}