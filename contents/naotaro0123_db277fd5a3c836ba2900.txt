{"context": "\u81ea\u5206\u304c\u4f5c\u3063\u305f\u3082\u306e\u304c2\u672c\u8155\u304c\u8868\u793a\u3055\u308c\u308b\u30d0\u30b0\u304c\u3042\u3063\u305f\u306e\u3067\u3001WebGL\u306eSampleApp1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3061\u306a\u307f\u306bWebGL\u90e8\u5206\u306e\u30bd\u30fc\u30b9\u89e3\u8aac\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u3082\u3046\u5c11\u3057\u60c5\u5831\u6574\u7406\u3067\u304d\u305f\u3089\u305d\u306e\u3046\u3061\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\nSampleApp1\u306e\u30af\u30e9\u30b9\u95a2\u9023\u56f3\n\u57fa\u672c\u306fUnity\u3068\u540c\u3058\u30af\u30e9\u30b9\u540d\u3067\u3059\u304c\u3001Framework\u306e\u30af\u30e9\u30b9\u304c1\u3064\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u307e\u3059\n\n\u89e3\u6790\u3057\u305f\u7d50\u679c\u3001pose.json\u3068\u3044\u3046\u30dd\u30fc\u30ba\u3092\u6c7a\u3081\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u3081\u3066\u306a\u304b\u3063\u305f...\u3002\n\u8aad\u307f\u8fbc\u307e\u305b\u3066\u7121\u4e8b\u306b\u89e3\u6c7a\u3057\u307e\u3057\u305f\u3002\n\n\u3064\u3044\u3067\u306bmodel.json\u3068\u30d5\u30a9\u30eb\u30c0\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3067Live2D\u30e2\u30c7\u30eb\u3092\u8868\u793a\u3057\u3001\u30e2\u30fc\u30b7\u30e7\u30f3\u30c1\u30a7\u30f3\u30b8\u3059\u308b\u3082\u306e\u3092\u4f5c\u308a\u307e\u3057\u305f\uff08SDK\u4ed8\u5c5e\u306eSimple\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u4f5c\u308a\u307e\u3057\u305f\uff09\n\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306f\u3053\u3093\u306a\u611f\u3058\u3067PlatformManager.js\u3068LAppLive2DManager.js\u306f\u3001SampleApp1\u304b\u3089\u6301\u3063\u3066\u304d\u307e\u3057\u305f\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\nLive2D SDK\n\u3000\u251c\u2500framework\n\u3000\u2502\u3000\u3000Live2DFramework.js\n\u3000\u251c\u2500lib\n\u3000\u2502\u3000\u3000live2d.min.js\n\u3000\u2514\u2500sample\n\u3000\u3000\u3000\u2514\u2500simple_custom\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000simple.html\n\u3000\u3000\u3000\u3000\u3000\u251c\u2500assets\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u2514\u2500haru\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.moc\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.model.json\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.physics.json\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.pose.json\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500expressions\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500haru_01.1024\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500haru_02.1024\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500motions\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2514\u2500sounds\n\u3000\u3000\u3000\u3000\u3000\u2514\u2500src\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000Simple.js\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000LAppLive2DManager.js\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000PlatformManager.js\n\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nHTML\u306f\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089motionChange()\u30a4\u30d9\u30f3\u30c8\u3092\u547c\u3073\u307e\u3059\u3002\n\nsimple.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"UTF-8\">\n            <title>Live2D Simple</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=4.0\">\n    </head>\n    <body onload=\"Simple()\">\n        <!-- \u9078\u629e\u30dc\u30bf\u30f3 -->\n        <span style=\"font-size:14px;\">\u30e2\u30fc\u30b7\u30e7\u30f3\u9078\u629e</span>\n        <select id=\"selectmenu\" onchange=\"motionChange()\"></select>\n        <br>\n        <canvas id=\"glcanvas\" style=\"border:dashed 1px #CCC\"></canvas>\n        <!-- Live2D Library -->\n        <script src=\"../../lib/live2d.min.js\"></script>\n        <!-- Live2D\u306e\u4fbf\u5229\u6a5f\u80fd\u304c\u5165\u3063\u305f\u30af\u30e9\u30b9\u7fa4 -->\n        <script src=\"../../framework/Live2DFramework.js\"></script>\n        <!-- Live2D\u30e2\u30c7\u30eb\u3084\u30c6\u30af\u30b9\u30c1\u30e3\u30ed\u30fc\u30c9\u7ba1\u7406\u30af\u30e9\u30b9 -->\n        <script src=\"src/PlatformManager.js\"></script>\n        <!-- Live2D\u30e2\u30c7\u30eb\u306e\u751f\u6210\u3084\u30c1\u30a7\u30f3\u30b8\u3092\u884c\u3046\u30af\u30e9\u30b9 -->\n        <script src=\"src/LAppLive2DManager.js\"></script>\n        <!-- \u30e1\u30a4\u30f3\u51e6\u7406\u30af\u30e9\u30b9 -->\n        <script src=\"src/Simple.js\"></script>\n    </body>\n</html>\n\n\nmodel.json\u306f\u901a\u5e38\u306ejson\u8aad\u8fbc\u3067\u3001pose.json\u3084physics.json\u3001moc\u3084mtn\u306f\u30d0\u30a4\u30ca\u30ea\u8aad\u8fbc\u3067\u3059\u3002\n\u5b9a\u6570\u90e8\u5206\u3092\u5909\u66f4\u3059\u308c\u3070\u4ed6\u306eLive2D\u30e2\u30c7\u30eb\u3067\u3082\u4f7f\u3044\u307e\u308f\u305b\u307e\u3059\u3002\nmodel.json\u304b\u3089\u5404\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u53d6\u5f97\u3057\u3001json\u3092\u8aad\u307f\u8fbc\u307fLive2D\u3092\u751f\u6210\u3057\u3001\u6700\u5f8c\u306bselect\u30dc\u30bf\u30f3\u306b\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u6570\u5206\u306e\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3066\u307e\u3059\u3002\n\nSimple.js\n/**\n*    \u5b9a\u6570\n*/\n// \u30e2\u30c7\u30eb\u30d1\u30b9\nvar MODEL_PATH = 'assets/haru/';\n// \u30e2\u30c7\u30eb\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\nvar MODEL_JSON = \"haru.model.json\";\n// canvas\u306e\u5e45\u3068\u9ad8\u3055\nvar CANVAS_WIDTH  = 512;\nvar CANVAS_HEIGHT = 512;\n// canvas\u306eID\nvar CANVAS_ID ='glcanvas';\nvar glCanvas = null;\n\n\n// \u30ed\u30fc\u30c9\u6642\nwindow.onload = function(){\n    // model.json\u304b\u3089Live2D\u30e2\u30c7\u30eb\u60c5\u5831\u53d6\u5f97\u3057\u751f\u6210\n    jsonloader(MODEL_PATH + MODEL_JSON);\n}\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \" line:\" + line + \" \" + msg;\n    console.log(errmsg);\n}\n\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nfunction jsonloader(filepath){\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", filepath, true);\n    request.onreadystatechange = function(){\n        if(request.readyState == 4 && request.status == 200){\n            // model.json\u304b\u3089\u53d6\u5f97\n            var jsondata = JSON.parse(request.responseText);\n            // \u5f15\u6570\u306fCanvasID, json, \u8868\u793a\u30b9\u30b1\u30fc\u30eb\uff08\u7701\u7565\u53ef\uff09\n            glCanvas = new Simple(CANVAS_ID, jsondata , 2.0);\n            // \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\n            make_optionbtn();\n        }\n    }\n    request.send(null);\n}\n\n\n/****************************************\n* Simple\u3092\u62e1\u5f35\u3057\u305f\u30af\u30e9\u30b9\n****************************************/\nvar Simple = function(canvasid, json, modelscale) {\n    // optional\n    if(modelscale == null) modelscale = 2.0;\n    // Live2D\u30e2\u30c7\u30eb\u7ba1\u7406\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    this.live2DMgr = new LAppLive2DManager();\n    // Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    this.live2DModel = null;\n    // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    this.requestID = null;\n    // \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.loadLive2DCompleted = false;\n    // \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.initLive2DCompleted = false;\n    // WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    this.loadedImages = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motions = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30de\u30cd\u30b8\u30e3\u30fc\n    this.motionMgr = null;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u756a\u53f7\n    this.motionnm = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30e9\u30b0\n    this.motionflg = false;\n    // \u30b5\u30a6\u30f3\u30c9\n    this.sounds = [];\n    // \u30b5\u30a6\u30f3\u30c9\u756a\u53f7\n    this.soundnm = 0;\n    // \u524d\u306b\u6d41\u3057\u305f\u30b5\u30a6\u30f3\u30c9\n    this.beforesound = 0;\n\n    // Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\n    this.modelDef = json;\n    // Live2D\u30e2\u30c7\u30eb\u306eOpenGL\u8868\u793a\u30b5\u30a4\u30ba\n    this.modelscale = modelscale;\n    // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\n    this.fadeines = [];\n    // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\n    this.fadeoutes = [];\n    // \u30dd\u30fc\u30ba\n    this.pose = null;\n    // \u7269\u7406\u6f14\u7b97\n    this.physics = null;\n\n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n    this.canvas = document.getElementById(canvasid);\n    this.canvas.width = CANVAS_WIDTH;\n    this.canvas.height = CANVAS_HEIGHT;\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextlost\", function(e) {\n        console.log(\"context lost\");\n        this.loadLive2DCompleted = false;\n        this.initLive2DCompleted = false;\n\n        var cancelAnimationFrame =\n            window.cancelAnimationFrame ||\n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(this.requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n\n        e.preventDefault();\n    }, false);\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextrestored\" , function(e){\n        console.log(\"webglcontext restored\");\n        this.initLoop(this.canvas);\n    }, false);\n\n    // Init and start Loop\n    this.initLoop(this.canvas);\n};\n\n\n/**\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.prototype.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------\n    // WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var para = {\n        premultipliedAlpha : true,\n//        alpha : false\n    };\n    var gl = this.getWebGLContext(canvas, para);\n    if (!gl) {\n        console.log(\"Failed to create WebGL context.\");\n        return;\n    }\n\n    // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n    gl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );\n\n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------\n    // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5bfe\u7b56\u7528\n    var that = this;\n    // moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    this.loadBytes(MODEL_PATH + that.modelDef.model, function(buf){\n        that.live2DModel = Live2DModelWebGL.loadModel(buf);\n    });\n\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n    for(var i = 0; i < that.modelDef.textures.length; i++){\n        (function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n            that.loadedImages[tno] = new Image();\n            that.loadedImages[tno].src = MODEL_PATH + that.modelDef.textures[tno];\n            that.loadedImages[tno].onload = function(){\n                if((++loadCount) == that.modelDef.textures.length) {\n                    that.loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                }\n            }\n            that.loadedImages[tno].onerror = function() {\n                console.log(\"Failed to load image : \" + that.modelDef.textures[tno]);\n            }\n        })( i );\n    }\n\n    var motion_keys = [];   // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u914d\u5217\n    var mtn_tag = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\n    var mtn_num = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ab\u30a6\u30f3\u30c8\n    // key\u3092\u53d6\u5f97\n    for(var key in that.modelDef.motions){\n        // moitons\u914d\u4e0b\u306e\u30ad\u30fc\u3092\u53d6\u5f97\n        motion_keys[mtn_tag] = key;\n        // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u6570\u3092\u53d6\u5f97\n        mtn_num += that.modelDef.motions[motion_keys[mtn_tag]].length;\n        mtn_tag++;\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\u5206\u30eb\u30fc\u30d7\n    for(var mtnkey in motion_keys){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u3068\u30b5\u30a6\u30f3\u30c9\u3092\u8aad\u307f\u8fbc\u3080(motions\u914d\u4e0b\u306e\u30bf\u30b0\u3092\u8aad\u307f\u8fbc\u3080)\n        for(var j = 0; j < that.modelDef.motions[motion_keys[mtnkey]].length; j++){\n            // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n            that.loadBytes(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].file, function(buf){\n                that.motions.push(Live2DMotion.loadMotion(buf));\n            });\n            // \u30b5\u30a6\u30f3\u30c9\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].sound == null){\n                that.sounds.push(\"\");\n            }else{\n                that.sounds.push(new Sound(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].sound));\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_in == null){\n                that.fadeines.push(\"\");\n            }else{\n                that.fadeines.push(that.modelDef.motions[motion_keys[mtnkey]][j].fade_in);\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_out == null){\n                that.fadeoutes.push(\"\");\n            }else{\n                that.fadeoutes.push(that.modelDef.motions[motion_keys[mtnkey]][j].fade_out);\n            }\n        }\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    that.motionMgr = new L2DMotionManager();\n\n    // \u30dd\u30fc\u30ba\u306e\u30ed\u30fc\u30c9(json\u5185\u306epose\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.pose !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.pose, function(buf){\n            // \u30dd\u30fc\u30b9\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.pose = L2DPose.load(buf);\n        });\n    }\n\n    // \u7269\u7406\u6f14\u7b97\u306e\u30ed\u30fc\u30c9(json\u5185\u306ephysics\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.physics !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.physics, function(buf){\n            // \u7269\u7406\u6f14\u7b97\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.physics = L2DPhysics.load(buf);\n        });\n    }\n\n    //------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n    (function tick() {\n        that.draw(gl, that); // 1\u56de\u5206\u63cf\u753b\n\n        var requestAnimationFrame =\n            window.requestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n        that.requestID = requestAnimationFrame( tick , that.canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n\n/**\n* Live2D\u306e\u63cf\u753b\u51e6\u7406\n*/\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted )\n        return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n        that.initLive2DCompleted = true;\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = that.modelscale / that.live2DModel.getCanvasWidth();\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -that.modelscale/2, that.modelscale/2, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306e\u5834\u5408\uff08\u30d5\u30e9\u30b0\u3068\u512a\u5148\u5ea6\u3067\u5224\u5b9a\u3059\u308b\uff09\n    if(that.motionflg == true && that.motionMgr.getCurrentPriority() == 0){\n        // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n        // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n        // \u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u3088\u308a\u3082\u512a\u5148\u5ea6\u3092\u9ad8\u304f\u518d\u751f\u3059\u308b\n        that.motionMgr.startMotion(that.motions[that.motionnm], 1);\n        that.motionflg = false;\n        // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n        if(that.sounds[that.motionnm]){\n            // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n            if(that.sounds[that.beforesound] != \"\"){\n                that.sounds[that.beforesound].stop();\n            }\n            // \u97f3\u58f0\u3092\u518d\u751f\n            that.sounds[that.motionnm].play();\n            // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n            that.beforesound = that.motionnm;\n        }\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u751f\n    if(that.motionMgr.isFinished() && that.motionnm != null){\n        // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n        // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n        // \u512a\u5148\u5ea6\u306f\u4f4e\u3081\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n        that.motionMgr.startMotion(that.motions[that.motionnm], 0);\n        // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n        if(that.sounds[that.motionnm]){\n            // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n            if(that.sounds[that.beforesound] != \"\"){\n                that.sounds[that.beforesound].stop();\n            }\n            // \u97f3\u58f0\u3092\u518d\u751f\n            that.sounds[that.motionnm].play();\n            // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n            that.beforesound = that.motionnm;\n        }\n    }\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n\n    // \u30dd\u30fc\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.pose != null)that.pose.updateParam(that.live2DModel);\n\n    // \u7269\u7406\u6f14\u7b97\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.physics != null)that.physics.updateParam(that.live2DModel);\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update();  // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();    // \u63cf\u753b\n};\n\n\n/**\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.prototype.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/,para)\n{\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n    for( var i = 0; i < NAMES.length; i++ ){\n        try{\n            var ctx = canvas.getContext( NAMES[i], para );\n            if( ctx ) return ctx;\n        }\n        catch(e){}\n    }\n    return null;\n};\n\n\n/**\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.prototype.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/)\n{\n    var texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n    if ( !texture ){\n        console.log(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n    // \u4e57\u7b97\u30a2\u30eb\u30d5\u30a1\u5bfe\u5fdc\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1); \n    // image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30e6\u30cb\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\n    gl.activeTexture( gl.TEXTURE0 );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306b\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u7d10\u4ed8\u3051\u308b\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b(\u5bfe\u8c61\u30d4\u30af\u30bb\u30eb\u306e\u4e2d\u5fc3\u306b\u6700\u3082\u8fd1\u3044\u70b9\u306e\u5024)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u751f\u6210\n    gl.generateMipmap(gl.TEXTURE_2D);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30d0\u30a4\u30f3\u30c9\u958b\u653e\n    gl.bindTexture( gl.TEXTURE_2D , null );\n\n    return texture;\n};\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.prototype.loadBytes = function(path , callback)\n{\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path , true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function(){\n        switch( request.status ){\n        case 200:\n            callback( request.response );\n            break;\n        default:\n            console.log( \"Failed to load (\" + request.status + \") : \" + path );\n            break;\n        }\n    }\n    request.send(null);\n};\n\n\n/****************************************\n* \u30b5\u30a6\u30f3\u30c9\u30af\u30e9\u30b9\n****************************************/\nvar Sound = function(path   /*\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9*/) {\n    this.snd = document.createElement(\"audio\");\n    this.snd.src = path;\n};\n\n/**\n* \u97f3\u58f0\u518d\u751f\n*/\nSound.prototype.play = function() {\n    this.snd.play();\n};\n\n/**\n* \u97f3\u58f0\u505c\u6b62\n*/\nSound.prototype.stop = function() {\n    this.snd.pause();\n    this.snd.currentTime = 0;\n};\n\n\n/****************************************\n* \u30dc\u30bf\u30f3\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\n****************************************/\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u53d6\u5f97\nvar mtnfilenames = [];\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u4f5c\u308b\u5834\u6240\nvar selectmenu = document.getElementById('selectmenu');\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\nfunction make_optionbtn(){\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\u3059\u308b\n    if(glCanvas != null && mtnfilenames.length == 0){\n        for(var key in glCanvas.modelDef.motions){\n            console.log(key);\n            for(j = 0; j < glCanvas.modelDef.motions[key].length; j++){\n                // \u4f59\u5206\u306a\u30d1\u30b9\u3092\u30ab\u30c3\u30c8\n                var strfilenm = glCanvas.modelDef.motions[key][j].file.split(\"/\");\n                // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\n                mtnfilenames.push(strfilenm[1]);\n                // \u30aa\u30d7\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\n                var option = document.createElement('option');\n                option.value = strfilenm[1];\n                option.appendChild(document.createTextNode(strfilenm[1]));\n                selectmenu.appendChild(option);\n            }\n        }\n    }\n}\n\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u308a\u66ff\u3048\nfunction motionChange(){\n    // \u9078\u629e\u30dc\u30bf\u30f3\u306e\u5024\u3092\u53d6\u5f97\n    var mtnfilenm = selectmenu.value;\n\n    var cnt = 0;\n    // \u30d5\u30a1\u30a4\u30eb\u540d\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u756a\u53f7\u3092\u53d6\u308a\u51fa\u3059\n    for(var k = 0; k < mtnfilenames.length; k++){\n        if(mtnfilenm == mtnfilenames[k]){\n            break;\n        }\n        cnt++;\n    }\n    // Live2D\u30e2\u30c7\u30eb\u306b\u6e21\u3059\n    glCanvas.motionnm = cnt;\n    glCanvas.motionflg = true;\n}\n\n\n\n\n\u305d\u306e\u4ed6\u30cf\u30de\u30c3\u305f\u3053\u3068\n\u30fbWebGL\u7248\u306e\u5834\u5408\u3001motion\u30d5\u30a1\u30a4\u30eb\u304c\u591a\u3044\u3068\u30ed\u30fc\u30c9\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3001\u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u66ff\u3067\u9055\u3046\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u518d\u751f\u3055\u308c\u308b\n\u30fbjson\u30d5\u30a1\u30a4\u30eb\u304cBOM\u4ed8\u304d\u3060\u3068\u30d0\u30a4\u30ca\u30ea\u8aad\u8fbc\u3067\u30a8\u30e9\u30fc\u3068\u306a\u308b\u306e\u3067\u3001BOM\u524a\u9664\u3057\u305f\n\u30fbIE\u3068mobilesafari\u3060\u3068\u900f\u660e\u90e8\u5206\u304c\u9ed2\u304f\u306a\u308b\u6642\u304c\u3042\u308b\u3002\u3057\u304b\u3082iPhone Simulator\u3068\u5b9f\u6a5f\u306esafari\u3067\u6319\u52d5\u304c\u9055\u3046\n\nStackoverflow\u3067\u900f\u904e\u90e8\u5206\u304c2px\u5fc5\u8981\uff1f\u306e\u8a18\u4e8b\u898b\u3066\u3001\u900f\u904e\u90e8\u5206\u3092\u5897\u3084\u3059\u3068mobilesafari\u306f\u89e3\u6c7a\u3057\u305f\u3051\u3069\u3001IE\u306f\u89e3\u6c7a\u3057\u306a\u304b\u3063\u305f...\u3002\n\u7d50\u5c40\u3001\u5c02\u7528\u306e\u30c4\u30fc\u30eb\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3082\u3089\u3063\u3066\u5bfe\u5fdc\u3057\u307e\u3057\u305f\uff08\u30c6\u30af\u30b9\u30c1\u30e3\u30b4\u30df\u53d6\u308a\u30c4\u30fc\u30eb\uff09\n\u53c2\u8003\uff35\uff32\uff2c\uff1aLive2D Document - WebGL\u7248\u3067\u5883\u754c\u7dda\u304c\u51fa\u308b\n\u81ea\u5206\u304c\u4f5c\u3063\u305f\u3082\u306e\u304c2\u672c\u8155\u304c\u8868\u793a\u3055\u308c\u308b\u30d0\u30b0\u304c\u3042\u3063\u305f\u306e\u3067\u3001WebGL\u306eSampleApp1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3082\u30b3\u30fc\u30c9\u30ea\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3061\u306a\u307f\u306bWebGL\u90e8\u5206\u306e\u30bd\u30fc\u30b9\u89e3\u8aac\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u3082\u3046\u5c11\u3057\u60c5\u5831\u6574\u7406\u3067\u304d\u305f\u3089\u305d\u306e\u3046\u3061\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n##SampleApp1\u306e\u30af\u30e9\u30b9\u95a2\u9023\u56f3\n\u57fa\u672c\u306fUnity\u3068\u540c\u3058\u30af\u30e9\u30b9\u540d\u3067\u3059\u304c\u3001Framework\u306e\u30af\u30e9\u30b9\u304c1\u3064\u306b\u307e\u3068\u3081\u3089\u308c\u3066\u307e\u3059\n\n![WebGL_SampleApp1.png](https://qiita-image-store.s3.amazonaws.com/0/15028/837d16e4-a3f4-e8ce-4c98-34c0d1f49026.png)\n\n\n\u89e3\u6790\u3057\u305f\u7d50\u679c\u3001pose.json\u3068\u3044\u3046\u30dd\u30fc\u30ba\u3092\u6c7a\u3081\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u3081\u3066\u306a\u304b\u3063\u305f...\u3002\n\u8aad\u307f\u8fbc\u307e\u305b\u3066\u7121\u4e8b\u306b\u89e3\u6c7a\u3057\u307e\u3057\u305f\u3002\n![haru_mod_1.png](https://qiita-image-store.s3.amazonaws.com/0/15028/d5c36817-866a-b44d-24d8-ab6467967b5b.png)\n\n\n\u3064\u3044\u3067\u306bmodel.json\u3068\u30d5\u30a9\u30eb\u30c0\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3060\u3051\u3067Live2D\u30e2\u30c7\u30eb\u3092\u8868\u793a\u3057\u3001\u30e2\u30fc\u30b7\u30e7\u30f3\u30c1\u30a7\u30f3\u30b8\u3059\u308b\u3082\u306e\u3092\u4f5c\u308a\u307e\u3057\u305f\uff08SDK\u4ed8\u5c5e\u306eSimple\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u4f5c\u308a\u307e\u3057\u305f\uff09\n![haru_res.png](https://qiita-image-store.s3.amazonaws.com/0/15028/710e9439-4470-a334-2c05-48c2d1d3c8b2.png)\n\n\n##\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306f\u3053\u3093\u306a\u611f\u3058\u3067PlatformManager.js\u3068LAppLive2DManager.js\u306f\u3001SampleApp1\u304b\u3089\u6301\u3063\u3066\u304d\u307e\u3057\u305f\n\n```ini:\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\nLive2D SDK\n\u3000\u251c\u2500framework\n\u3000\u2502\u3000\u3000Live2DFramework.js\n\u3000\u251c\u2500lib\n\u3000\u2502\u3000\u3000live2d.min.js\n\u3000\u2514\u2500sample\n\u3000\u3000\u3000\u2514\u2500simple_custom\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000simple.html\n\u3000\u3000\u3000\u3000\u3000\u251c\u2500assets\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u2514\u2500haru\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.moc\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.model.json\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.physics.json\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\u3000haru.pose.json\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2502\u3000\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500expressions\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500haru_01.1024\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500haru_02.1024\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u251c\u2500motions\n\u3000\u3000\u3000\u3000\u3000\u2502\u3000\u3000\u3000\u2514\u2500sounds\n\u3000\u3000\u3000\u3000\u3000\u2514\u2500src\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000Simple.js\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000LAppLive2DManager.js\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000PlatformManager.js\n```\n\n##\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nHTML\u306f\u9078\u629e\u30dc\u30bf\u30f3\u304b\u3089motionChange()\u30a4\u30d9\u30f3\u30c8\u3092\u547c\u3073\u307e\u3059\u3002\n\n```html:simple.html\n<!DOCTYPE html>\n<html>\n    <head>\n        <meta charset=\"UTF-8\">\n            <title>Live2D Simple</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=4.0\">\n    </head>\n    <body onload=\"Simple()\">\n        <!-- \u9078\u629e\u30dc\u30bf\u30f3 -->\n        <span style=\"font-size:14px;\">\u30e2\u30fc\u30b7\u30e7\u30f3\u9078\u629e</span>\n        <select id=\"selectmenu\" onchange=\"motionChange()\"></select>\n        <br>\n        <canvas id=\"glcanvas\" style=\"border:dashed 1px #CCC\"></canvas>\n        <!-- Live2D Library -->\n        <script src=\"../../lib/live2d.min.js\"></script>\n        <!-- Live2D\u306e\u4fbf\u5229\u6a5f\u80fd\u304c\u5165\u3063\u305f\u30af\u30e9\u30b9\u7fa4 -->\n        <script src=\"../../framework/Live2DFramework.js\"></script>\n        <!-- Live2D\u30e2\u30c7\u30eb\u3084\u30c6\u30af\u30b9\u30c1\u30e3\u30ed\u30fc\u30c9\u7ba1\u7406\u30af\u30e9\u30b9 -->\n        <script src=\"src/PlatformManager.js\"></script>\n        <!-- Live2D\u30e2\u30c7\u30eb\u306e\u751f\u6210\u3084\u30c1\u30a7\u30f3\u30b8\u3092\u884c\u3046\u30af\u30e9\u30b9 -->\n        <script src=\"src/LAppLive2DManager.js\"></script>\n        <!-- \u30e1\u30a4\u30f3\u51e6\u7406\u30af\u30e9\u30b9 -->\n        <script src=\"src/Simple.js\"></script>\n    </body>\n</html>\n```\nmodel.json\u306f\u901a\u5e38\u306ejson\u8aad\u8fbc\u3067\u3001pose.json\u3084physics.json\u3001moc\u3084mtn\u306f\u30d0\u30a4\u30ca\u30ea\u8aad\u8fbc\u3067\u3059\u3002\n\u5b9a\u6570\u90e8\u5206\u3092\u5909\u66f4\u3059\u308c\u3070\u4ed6\u306eLive2D\u30e2\u30c7\u30eb\u3067\u3082\u4f7f\u3044\u307e\u308f\u305b\u307e\u3059\u3002\nmodel.json\u304b\u3089\u5404\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u53d6\u5f97\u3057\u3001json\u3092\u8aad\u307f\u8fbc\u307fLive2D\u3092\u751f\u6210\u3057\u3001\u6700\u5f8c\u306bselect\u30dc\u30bf\u30f3\u306b\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u6570\u5206\u306e\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3066\u307e\u3059\u3002\n\n```js:Simple.js\n/**\n*    \u5b9a\u6570\n*/\n// \u30e2\u30c7\u30eb\u30d1\u30b9\nvar MODEL_PATH = 'assets/haru/';\n// \u30e2\u30c7\u30eb\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\nvar MODEL_JSON = \"haru.model.json\";\n// canvas\u306e\u5e45\u3068\u9ad8\u3055\nvar CANVAS_WIDTH  = 512;\nvar CANVAS_HEIGHT = 512;\n// canvas\u306eID\nvar CANVAS_ID ='glcanvas';\nvar glCanvas = null;\n\n\n// \u30ed\u30fc\u30c9\u6642\nwindow.onload = function(){\n    // model.json\u304b\u3089Live2D\u30e2\u30c7\u30eb\u60c5\u5831\u53d6\u5f97\u3057\u751f\u6210\n    jsonloader(MODEL_PATH + MODEL_JSON);\n}\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \" line:\" + line + \" \" + msg;\n    console.log(errmsg);\n}\n\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nfunction jsonloader(filepath){\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", filepath, true);\n    request.onreadystatechange = function(){\n        if(request.readyState == 4 && request.status == 200){\n            // model.json\u304b\u3089\u53d6\u5f97\n            var jsondata = JSON.parse(request.responseText);\n            // \u5f15\u6570\u306fCanvasID, json, \u8868\u793a\u30b9\u30b1\u30fc\u30eb\uff08\u7701\u7565\u53ef\uff09\n            glCanvas = new Simple(CANVAS_ID, jsondata , 2.0);\n            // \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\n            make_optionbtn();\n        }\n    }\n    request.send(null);\n}\n\n\n/****************************************\n* Simple\u3092\u62e1\u5f35\u3057\u305f\u30af\u30e9\u30b9\n****************************************/\nvar Simple = function(canvasid, json, modelscale) {\n    // optional\n    if(modelscale == null) modelscale = 2.0;\n    // Live2D\u30e2\u30c7\u30eb\u7ba1\u7406\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    this.live2DMgr = new LAppLive2DManager();\n    // Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    this.live2DModel = null;\n    // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    this.requestID = null;\n    // \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.loadLive2DCompleted = false;\n    // \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.initLive2DCompleted = false;\n    // WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    this.loadedImages = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motions = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30de\u30cd\u30b8\u30e3\u30fc\n    this.motionMgr = null;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u756a\u53f7\n    this.motionnm = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30e9\u30b0\n    this.motionflg = false;\n    // \u30b5\u30a6\u30f3\u30c9\n    this.sounds = [];\n    // \u30b5\u30a6\u30f3\u30c9\u756a\u53f7\n    this.soundnm = 0;\n    // \u524d\u306b\u6d41\u3057\u305f\u30b5\u30a6\u30f3\u30c9\n    this.beforesound = 0;\n\n    // Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\n    this.modelDef = json;\n    // Live2D\u30e2\u30c7\u30eb\u306eOpenGL\u8868\u793a\u30b5\u30a4\u30ba\n    this.modelscale = modelscale;\n    // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\n    this.fadeines = [];\n    // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\n    this.fadeoutes = [];\n    // \u30dd\u30fc\u30ba\n    this.pose = null;\n    // \u7269\u7406\u6f14\u7b97\n    this.physics = null;\n\n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n    this.canvas = document.getElementById(canvasid);\n    this.canvas.width = CANVAS_WIDTH;\n    this.canvas.height = CANVAS_HEIGHT;\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextlost\", function(e) {\n        console.log(\"context lost\");\n        this.loadLive2DCompleted = false;\n        this.initLive2DCompleted = false;\n\n        var cancelAnimationFrame =\n            window.cancelAnimationFrame ||\n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(this.requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n\n        e.preventDefault();\n    }, false);\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextrestored\" , function(e){\n        console.log(\"webglcontext restored\");\n        this.initLoop(this.canvas);\n    }, false);\n\n    // Init and start Loop\n    this.initLoop(this.canvas);\n};\n\n\n/**\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.prototype.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------\n    // WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var para = {\n        premultipliedAlpha : true,\n//        alpha : false\n    };\n    var gl = this.getWebGLContext(canvas, para);\n    if (!gl) {\n        console.log(\"Failed to create WebGL context.\");\n        return;\n    }\n\n    // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n    gl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );\n\n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------\n    // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5bfe\u7b56\u7528\n    var that = this;\n    // moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    this.loadBytes(MODEL_PATH + that.modelDef.model, function(buf){\n        that.live2DModel = Live2DModelWebGL.loadModel(buf);\n    });\n\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n    for(var i = 0; i < that.modelDef.textures.length; i++){\n        (function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n            that.loadedImages[tno] = new Image();\n            that.loadedImages[tno].src = MODEL_PATH + that.modelDef.textures[tno];\n            that.loadedImages[tno].onload = function(){\n                if((++loadCount) == that.modelDef.textures.length) {\n                    that.loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                }\n            }\n            that.loadedImages[tno].onerror = function() {\n                console.log(\"Failed to load image : \" + that.modelDef.textures[tno]);\n            }\n        })( i );\n    }\n\n    var motion_keys = [];   // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u914d\u5217\n    var mtn_tag = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\n    var mtn_num = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ab\u30a6\u30f3\u30c8\n    // key\u3092\u53d6\u5f97\n    for(var key in that.modelDef.motions){\n        // moitons\u914d\u4e0b\u306e\u30ad\u30fc\u3092\u53d6\u5f97\n        motion_keys[mtn_tag] = key;\n        // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u6570\u3092\u53d6\u5f97\n        mtn_num += that.modelDef.motions[motion_keys[mtn_tag]].length;\n        mtn_tag++;\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\u5206\u30eb\u30fc\u30d7\n    for(var mtnkey in motion_keys){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u3068\u30b5\u30a6\u30f3\u30c9\u3092\u8aad\u307f\u8fbc\u3080(motions\u914d\u4e0b\u306e\u30bf\u30b0\u3092\u8aad\u307f\u8fbc\u3080)\n        for(var j = 0; j < that.modelDef.motions[motion_keys[mtnkey]].length; j++){\n            // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n            that.loadBytes(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].file, function(buf){\n                that.motions.push(Live2DMotion.loadMotion(buf));\n            });\n            // \u30b5\u30a6\u30f3\u30c9\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].sound == null){\n                that.sounds.push(\"\");\n            }else{\n                that.sounds.push(new Sound(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].sound));\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_in == null){\n                that.fadeines.push(\"\");\n            }else{\n                that.fadeines.push(that.modelDef.motions[motion_keys[mtnkey]][j].fade_in);\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_out == null){\n                that.fadeoutes.push(\"\");\n            }else{\n                that.fadeoutes.push(that.modelDef.motions[motion_keys[mtnkey]][j].fade_out);\n            }\n        }\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    that.motionMgr = new L2DMotionManager();\n\n    // \u30dd\u30fc\u30ba\u306e\u30ed\u30fc\u30c9(json\u5185\u306epose\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.pose !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.pose, function(buf){\n            // \u30dd\u30fc\u30b9\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.pose = L2DPose.load(buf);\n        });\n    }\n\n    // \u7269\u7406\u6f14\u7b97\u306e\u30ed\u30fc\u30c9(json\u5185\u306ephysics\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.physics !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.physics, function(buf){\n            // \u7269\u7406\u6f14\u7b97\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.physics = L2DPhysics.load(buf);\n        });\n    }\n\n    //------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n    (function tick() {\n        that.draw(gl, that); // 1\u56de\u5206\u63cf\u753b\n\n        var requestAnimationFrame =\n            window.requestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n        that.requestID = requestAnimationFrame( tick , that.canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n\n/**\n* Live2D\u306e\u63cf\u753b\u51e6\u7406\n*/\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted )\n        return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n        that.initLive2DCompleted = true;\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = that.modelscale / that.live2DModel.getCanvasWidth();\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -that.modelscale/2, that.modelscale/2, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306e\u5834\u5408\uff08\u30d5\u30e9\u30b0\u3068\u512a\u5148\u5ea6\u3067\u5224\u5b9a\u3059\u308b\uff09\n    if(that.motionflg == true && that.motionMgr.getCurrentPriority() == 0){\n        // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n        // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n        // \u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u3088\u308a\u3082\u512a\u5148\u5ea6\u3092\u9ad8\u304f\u518d\u751f\u3059\u308b\n        that.motionMgr.startMotion(that.motions[that.motionnm], 1);\n        that.motionflg = false;\n        // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n        if(that.sounds[that.motionnm]){\n            // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n            if(that.sounds[that.beforesound] != \"\"){\n                that.sounds[that.beforesound].stop();\n            }\n            // \u97f3\u58f0\u3092\u518d\u751f\n            that.sounds[that.motionnm].play();\n            // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n            that.beforesound = that.motionnm;\n        }\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u751f\n    if(that.motionMgr.isFinished() && that.motionnm != null){\n        // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n        // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n        that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n        // \u512a\u5148\u5ea6\u306f\u4f4e\u3081\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n        that.motionMgr.startMotion(that.motions[that.motionnm], 0);\n        // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n        if(that.sounds[that.motionnm]){\n            // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n            if(that.sounds[that.beforesound] != \"\"){\n                that.sounds[that.beforesound].stop();\n            }\n            // \u97f3\u58f0\u3092\u518d\u751f\n            that.sounds[that.motionnm].play();\n            // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n            that.beforesound = that.motionnm;\n        }\n    }\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n\n    // \u30dd\u30fc\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.pose != null)that.pose.updateParam(that.live2DModel);\n\n    // \u7269\u7406\u6f14\u7b97\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.physics != null)that.physics.updateParam(that.live2DModel);\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update();  // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();    // \u63cf\u753b\n};\n\n\n/**\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.prototype.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/,para)\n{\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n    for( var i = 0; i < NAMES.length; i++ ){\n        try{\n            var ctx = canvas.getContext( NAMES[i], para );\n            if( ctx ) return ctx;\n        }\n        catch(e){}\n    }\n    return null;\n};\n\n\n/**\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.prototype.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/)\n{\n    var texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n    if ( !texture ){\n        console.log(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n    // \u4e57\u7b97\u30a2\u30eb\u30d5\u30a1\u5bfe\u5fdc\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1); \n    // image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30e6\u30cb\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\n    gl.activeTexture( gl.TEXTURE0 );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306b\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u7d10\u4ed8\u3051\u308b\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b(\u5bfe\u8c61\u30d4\u30af\u30bb\u30eb\u306e\u4e2d\u5fc3\u306b\u6700\u3082\u8fd1\u3044\u70b9\u306e\u5024)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u751f\u6210\n    gl.generateMipmap(gl.TEXTURE_2D);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30d0\u30a4\u30f3\u30c9\u958b\u653e\n    gl.bindTexture( gl.TEXTURE_2D , null );\n\n    return texture;\n};\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.prototype.loadBytes = function(path , callback)\n{\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path , true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function(){\n        switch( request.status ){\n        case 200:\n            callback( request.response );\n            break;\n        default:\n            console.log( \"Failed to load (\" + request.status + \") : \" + path );\n            break;\n        }\n    }\n    request.send(null);\n};\n\n\n/****************************************\n* \u30b5\u30a6\u30f3\u30c9\u30af\u30e9\u30b9\n****************************************/\nvar Sound = function(path   /*\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9*/) {\n    this.snd = document.createElement(\"audio\");\n    this.snd.src = path;\n};\n\n/**\n* \u97f3\u58f0\u518d\u751f\n*/\nSound.prototype.play = function() {\n    this.snd.play();\n};\n\n/**\n* \u97f3\u58f0\u505c\u6b62\n*/\nSound.prototype.stop = function() {\n    this.snd.pause();\n    this.snd.currentTime = 0;\n};\n\n\n/****************************************\n* \u30dc\u30bf\u30f3\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\n****************************************/\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u53d6\u5f97\nvar mtnfilenames = [];\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u4f5c\u308b\u5834\u6240\nvar selectmenu = document.getElementById('selectmenu');\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\nfunction make_optionbtn(){\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\u3059\u308b\n    if(glCanvas != null && mtnfilenames.length == 0){\n        for(var key in glCanvas.modelDef.motions){\n            console.log(key);\n            for(j = 0; j < glCanvas.modelDef.motions[key].length; j++){\n                // \u4f59\u5206\u306a\u30d1\u30b9\u3092\u30ab\u30c3\u30c8\n                var strfilenm = glCanvas.modelDef.motions[key][j].file.split(\"/\");\n                // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\n                mtnfilenames.push(strfilenm[1]);\n                // \u30aa\u30d7\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\n                var option = document.createElement('option');\n                option.value = strfilenm[1];\n                option.appendChild(document.createTextNode(strfilenm[1]));\n                selectmenu.appendChild(option);\n            }\n        }\n    }\n}\n\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u308a\u66ff\u3048\nfunction motionChange(){\n    // \u9078\u629e\u30dc\u30bf\u30f3\u306e\u5024\u3092\u53d6\u5f97\n    var mtnfilenm = selectmenu.value;\n\n    var cnt = 0;\n    // \u30d5\u30a1\u30a4\u30eb\u540d\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u756a\u53f7\u3092\u53d6\u308a\u51fa\u3059\n    for(var k = 0; k < mtnfilenames.length; k++){\n        if(mtnfilenm == mtnfilenames[k]){\n            break;\n        }\n        cnt++;\n    }\n    // Live2D\u30e2\u30c7\u30eb\u306b\u6e21\u3059\n    glCanvas.motionnm = cnt;\n    glCanvas.motionflg = true;\n}\n\n```\n\n##\u305d\u306e\u4ed6\u30cf\u30de\u30c3\u305f\u3053\u3068\n\u30fbWebGL\u7248\u306e\u5834\u5408\u3001motion\u30d5\u30a1\u30a4\u30eb\u304c\u591a\u3044\u3068\u30ed\u30fc\u30c9\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u3001\u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u66ff\u3067\u9055\u3046\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u518d\u751f\u3055\u308c\u308b\n\u30fbjson\u30d5\u30a1\u30a4\u30eb\u304cBOM\u4ed8\u304d\u3060\u3068\u30d0\u30a4\u30ca\u30ea\u8aad\u8fbc\u3067\u30a8\u30e9\u30fc\u3068\u306a\u308b\u306e\u3067\u3001BOM\u524a\u9664\u3057\u305f\n\u30fbIE\u3068mobilesafari\u3060\u3068\u900f\u660e\u90e8\u5206\u304c\u9ed2\u304f\u306a\u308b\u6642\u304c\u3042\u308b\u3002\u3057\u304b\u3082iPhone Simulator\u3068\u5b9f\u6a5f\u306esafari\u3067\u6319\u52d5\u304c\u9055\u3046\n![\u75c7\u4f8b.png](https://qiita-image-store.s3.amazonaws.com/0/15028/e0b810d9-c871-6973-a0c6-b21e602c5775.png)\n\n\nStackoverflow\u3067[\u900f\u904e\u90e8\u5206\u304c2px\u5fc5\u8981\uff1f](http://stackoverflow.com/questions/1374618/alpha-transparent-pngs-not-displaying-correctly-in-mobile-safari)\u306e\u8a18\u4e8b\u898b\u3066\u3001\u900f\u904e\u90e8\u5206\u3092\u5897\u3084\u3059\u3068mobilesafari\u306f\u89e3\u6c7a\u3057\u305f\u3051\u3069\u3001IE\u306f\u89e3\u6c7a\u3057\u306a\u304b\u3063\u305f...\u3002\n\u7d50\u5c40\u3001\u5c02\u7528\u306e\u30c4\u30fc\u30eb\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3057\u3066\u3082\u3089\u3063\u3066\u5bfe\u5fdc\u3057\u307e\u3057\u305f\uff08[\u30c6\u30af\u30b9\u30c1\u30e3\u30b4\u30df\u53d6\u308a\u30c4\u30fc\u30eb](https://sites.google.com/a/cybernoids.jp/cubism2/tools/texture)\uff09\n\n\u53c2\u8003\uff35\uff32\uff2c\uff1a[Live2D Document - WebGL\u7248\u3067\u5883\u754c\u7dda\u304c\u51fa\u308b](https://sites.google.com/a/cybernoids.jp/cubism2/sdk_tutorial/tips/texture)\n\n\n", "tags": ["Live2D", "WebGL", "JavaScript"]}