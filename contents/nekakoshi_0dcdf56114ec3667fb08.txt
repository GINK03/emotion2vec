{"context": " More than 1 year has passed since last update.\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ncapistrano\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\ncat Gemfile\nsource 'http://rubygems.org'\n\ngem 'capistrano'\n\n\nbundle install\npath\u306f\u597d\u307f\u3067\u3044\u308c\u3066\u304f\u3060\u3055\u3044\u3002\nbundle install --path vendor/bundle\n\n\ncap\u306e\u521d\u671f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbundle exec cap install\n\nmkdir -p config/deploy\ncreate config/deploy.rb\ncreate config/deploy/staging.rb\ncreate config/deploy/production.rb\nmkdir -p lib/capistrano/tasks\nCapified\n\n\u51fa\u6765\u305f\n\n\u30bf\u30b9\u30af\u5185\u5bb9\u3092\u898b\u308b\ncap -vT\n\n\n\n\n\u30b3\u30de\u30f3\u30c9\n\u8aac\u660e\n\n\n\n\ncap deploy\n# Deploy a new release\n\n\ncap deploy:check\n# Check required files and directories exist\n\n\ncap deploy:check:directories\n# Check shared and release directories exist\n\n\ncap deploy:check:linked_dirs\n# Check directories to be linked exist in shared\n\n\ncap deploy:check:linked_files\n# Check files to be linked exist in shared\n\n\ncap deploy:check:make_linked_dirs\n# Check directories of files to be linked exist in shared\n\n\ncap deploy:cleanup\n# Clean up old releases\n\n\ncap deploy:cleanup_rollback\n# Remove and archive rolled-back release\n\n\ncap deploy:finished\n# Finished\n\n\ncap deploy:finishing\n# Finish the deployment, clean up server(s)\n\n\ncap deploy:finishing_rollback\n# Finish the rollback, clean up server(s)\n\n\ncap deploy:log_revision\n# Log details of the deploy\n\n\ncap deploy:published\n# Published\n\n\ncap deploy:publishing\n# Publish the release\n\n\ncap deploy:revert_release\n# Revert to previous release timestamp\n\n\ncap deploy:reverted\n# Reverted\n\n\ncap deploy:reverting\n# Revert server(s) to previous release\n\n\ncap deploy:rollback\n# Rollback to previous release\n\n\ncap deploy:started\n# Started\n\n\ncap deploy:starting\n# Start a deployment, make sure server(s) ready\n\n\ncap deploy:symlink:linked_dirs\n# Symlink linked directories\n\n\ncap deploy:symlink:linked_files\n# Symlink linked files\n\n\ncap deploy:symlink:release\n# Symlink release to current\n\n\ncap deploy:symlink:shared\n# Symlink files and directories from shared to release\n\n\ncap deploy:updated\n# Updated\n\n\ncap deploy:updating\n# Update server(s) by setting up a new release\n\n\ncap install\n# Install Capistrano, cap install STAGES=staging,production\n\n\n\n\n\u30bf\u30b9\u30af\u306e\u8ffd\u52a0\n\u30bf\u30b9\u30af\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u3002\n\u4eca\u56de\u306fhostname\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af\u3092\u8ffd\u52a0\u3002\ncat lib/capistrano/tasks/hostname.cap\nnamespace :hostname do\n\n  desc \"Get Servername\"\n  task :get => :environment do\n    on roles(:app) do\n      execute :hostname, \"-s\"\n    end\n  end\n\nend\n\n\n\u30bf\u30b9\u30af\u767b\u9332\u306e\u78ba\u8a8d\nhostname\u306enamespace\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\ncap -vT|fgrep hostname\ncap hostname:get                   # Get Servername\n\n\n\u30b9\u30c6\u30fc\u30b8\u306e\u8ffd\u52a0\n\u4ee5\u4e0b\u304c\u5b9f\u884c\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\nproduction\nstaging\n\n\u4e0a\u8a18\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001development\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nbundle exec cap development deploy --dry-run\n\n** Invoke ensure_stage (first_time)\n** Execute (dry run) ensure_stage\ncap aborted!\nDon't know how to build task 'development'\n/home/user/hoge/cap/bundle/ruby/1.9.1/gems/capistrano-3.1.0/lib/capistrano/application.rb:15:in `run'\n/home/user/hoge/cap/bundle/ruby/1.9.1/gems/capistrano-3.1.0/bin/cap:3:in `<top (required)>'\n/home/user/hoge/cap/bundle/ruby/1.9.1/bin/cap:23:in `load'\n/home/user/hoge/cap/bundle/ruby/1.9.1/bin/cap:23:in `<main>'\n(See full trace by running task with --trace)\n\n\u74b0\u5883\u304c\u7121\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\ndevelopment\u74b0\u5883\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\ncp config/deploy/staging.rb config/deploy/development.rb\n\n\ndevelopment\u74b0\u5883\u3067\u5b9f\u884c\u3059\u308b\u3002\nbundle exec cap development deploy --dry-run\n** Invoke development (first_time)\n** Execute (dry run) development\n** Invoke deploy (first_time)\n** Execute (dry run) deploy\n\n### \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n#### capistrano\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\ncat Gemfile\nsource 'http://rubygems.org'\n\ngem 'capistrano'\n```\n\n#### bundle install\n\npath\u306f\u597d\u307f\u3067\u3044\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\nbundle install --path vendor/bundle\n```\n\n#### cap\u306e\u521d\u671f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nbundle exec cap install\n\nmkdir -p config/deploy\ncreate config/deploy.rb\ncreate config/deploy/staging.rb\ncreate config/deploy/production.rb\nmkdir -p lib/capistrano/tasks\nCapified\n```\n\u51fa\u6765\u305f\n\n\n#### \u30bf\u30b9\u30af\u5185\u5bb9\u3092\u898b\u308b\n\n```bash\ncap -vT\n```\n\n\n| \u30b3\u30de\u30f3\u30c9| \u8aac\u660e|\n|:-----------|:------------|\n|cap deploy                         |# Deploy a new release|\n|cap deploy:check                   |# Check required files and directories exist|\n|cap deploy:check:directories       |# Check shared and release directories exist|\n|cap deploy:check:linked_dirs       |# Check directories to be linked exist in shared|\n|cap deploy:check:linked_files      |# Check files to be linked exist in shared|\n|cap deploy:check:make_linked_dirs  |# Check directories of files to be linked exist in shared|\n|cap deploy:cleanup                 |# Clean up old releases|\n|cap deploy:cleanup_rollback        |# Remove and archive rolled-back release|\n|cap deploy:finished                |# Finished|\n|cap deploy:finishing               |# Finish the deployment, clean up server(s)|\n|cap deploy:finishing_rollback      |# Finish the rollback, clean up server(s)|\n|cap deploy:log_revision            |# Log details of the deploy|\n|cap deploy:published               |# Published|\n|cap deploy:publishing              |# Publish the release|\n|cap deploy:revert_release          |# Revert to previous release timestamp|\n|cap deploy:reverted                |# Reverted|\n|cap deploy:reverting               |# Revert server(s) to previous release|\n|cap deploy:rollback                |# Rollback to previous release|\n|cap deploy:started                 |# Started|\n|cap deploy:starting                |# Start a deployment, make sure server(s) ready|\n|cap deploy:symlink:linked_dirs     |# Symlink linked directories|\n|cap deploy:symlink:linked_files    |# Symlink linked files|\n|cap deploy:symlink:release         |# Symlink release to current|\n|cap deploy:symlink:shared          |# Symlink files and directories from shared to release|\n|cap deploy:updated                 |# Updated|\n|cap deploy:updating                |# Update server(s) by setting up a new release|\n|cap install                        |# Install Capistrano, cap install STAGES=staging,production|\n\n#### \u30bf\u30b9\u30af\u306e\u8ffd\u52a0\n\n\u30bf\u30b9\u30af\u3092\u8ffd\u52a0\u3057\u305f\u3044\u5834\u5408\u306e\u30aa\u30da\u30ec\u30fc\u30b7\u30e7\u30f3\u3002\n\u4eca\u56de\u306fhostname\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u30bf\u30b9\u30af\u3092\u8ffd\u52a0\u3002\n\n```bash\ncat lib/capistrano/tasks/hostname.cap\nnamespace :hostname do\n\n  desc \"Get Servername\"\n  task :get => :environment do\n    on roles(:app) do\n      execute :hostname, \"-s\"\n    end\n  end\n\nend\n```\n\n#### \u30bf\u30b9\u30af\u767b\u9332\u306e\u78ba\u8a8d\n\nhostname\u306enamespace\u304c\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\ncap -vT|fgrep hostname\ncap hostname:get                   # Get Servername\n```\n\n\n#### \u30b9\u30c6\u30fc\u30b8\u306e\u8ffd\u52a0\n\n\u4ee5\u4e0b\u304c\u5b9f\u884c\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n* production\n* staging\n\n\u4e0a\u8a18\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001development\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```bash\nbundle exec cap development deploy --dry-run\n\n** Invoke ensure_stage (first_time)\n** Execute (dry run) ensure_stage\ncap aborted!\nDon't know how to build task 'development'\n/home/user/hoge/cap/bundle/ruby/1.9.1/gems/capistrano-3.1.0/lib/capistrano/application.rb:15:in `run'\n/home/user/hoge/cap/bundle/ruby/1.9.1/gems/capistrano-3.1.0/bin/cap:3:in `<top (required)>'\n/home/user/hoge/cap/bundle/ruby/1.9.1/bin/cap:23:in `load'\n/home/user/hoge/cap/bundle/ruby/1.9.1/bin/cap:23:in `<main>'\n(See full trace by running task with --trace)\n```\n\n\u74b0\u5883\u304c\u7121\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3002\n\n#### development\u74b0\u5883\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\n\n```bash\ncp config/deploy/staging.rb config/deploy/development.rb\n```\n\n#### development\u74b0\u5883\u3067\u5b9f\u884c\u3059\u308b\u3002\n\n```bash\nbundle exec cap development deploy --dry-run\n** Invoke development (first_time)\n** Execute (dry run) development\n** Invoke deploy (first_time)\n** Execute (dry run) deploy\n```\n", "tags": ["capistrano3"]}