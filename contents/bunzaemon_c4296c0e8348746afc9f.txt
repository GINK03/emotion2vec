{"context": "perl \u306e\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u306b\u95a2\u3057\u3066\u306e\u3001\u9069\u5f53\u306a\u89e3\u8aac #1/#2/#3/#4\n\ndupc\n\u3042\u308c\uff1f OSX \u3067 md5 \u30c1\u30a7\u30c3\u30af\u3059\u308b\u306e\u3063\u3066\u3001openssl md5 SOMETHING \u304c\u5b9a\u756a\u3060\u3068\u601d\u3063\u3066\u305f\u3051\u3069\u3001\u3044\u3064\u306e\u307e\u306b\u304b /sbin/md5 \u304c\u3042\u308b\u3002\n\u76f8\u5909\u308f\u3089\u305a sha1 \u30c1\u30a7\u30c3\u30af\u306b\u306f openssl sha1 \u3059\u308b\u4e8b\u306b\u306a\u308b\u3093\u3060\u308d\u3046\u3051\u3069\u3001md5 \u306e\u65b9\u304c\u3001-r \u304c\u4f7f\u3048\u3066\u3061\u3087\u3063\u3068\u3060\u3051\u5229\u4fbf\u6027\u304c\u4e0a\u304c\u308b\uff1f\n\u3061\u3085\u30fc\u4e8b\u3067\u3001\u81ea\u5206\u7528\u91cd\u8907\u30d5\u30a1\u30a4\u30eb\u691c\u7d22\u30b3\u30de\u30f3\u30c9\u3092\u3001\u3061\u3087\u3063\u3068\u3060\u3051\u30ea\u30cb\u30e5\u30fc\u30a2\u30eb\u3002\n\n.bashrc\nfunction dupc(){\n    find . -type f -size '+0c' \"$@\" | perl -Mvars=%h -lne 'next if qx{md5 -r \"$_\"} !~ /^(\\S+)\\s(.*?)$/ ; push @{$h{$1}}, $2 ;}{ print join \"\\n\", $_, map{ \"\\t$_\" } @{$h{$_}} for grep { @{$h{$_}} > 1 }  keys %h'\n}\n\n\n\u30ea\u30cb\u30e5\u30fc\u30a2\u30eb\u3064\u3063\u3066\u3082 next if ... ; \u90e8\u5206\u306e\u3001\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3068\u6b63\u898f\u8868\u73fe\u304c\u3001\u5909\u66f4\u306b\u306a\u3063\u305f\u3060\u3051\u3060\u3051\u3069\u3002\n\u30d5\u30a1\u30a4\u30eb\u7e1b\u308a\u3068\u3001\u7a7a\u30d5\u30a1\u30a4\u30eb\u9664\u5916\u306e\u70ba\u306e -size '+0c' \u306e\u307f\u30c7\u30d5\u30a9\u3067\u3002\n\n\u4f7f\u3044\u65b9\n$ cd foo\n$ dupc -maxdepth 1\n8dad5f05f2ffd34e2bf0cbab16ed15e0\n    ./\u30e0\u30d5\u30d5\u306a.jpg\n    ./\u30b2\u30d8\u30d8\u306a.jpg\n\n\nperl \u306e\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u306b\u95a2\u3057\u3066\u306e\u3001\u9069\u5f53\u306a\u89e3\u8aac [#1](http://qiita.com/bunzaemon/items/fdb1115ac97fc0955236)/[#2](http://qiita.com/bunzaemon/items/e63947c7e59e0fe4ce3d)/[#3](http://qiita.com/bunzaemon/items/efcb3f20329bc68bb8bc)/#4\n\n\n## dupc\n\n\u3042\u308c\uff1f OSX \u3067 md5 \u30c1\u30a7\u30c3\u30af\u3059\u308b\u306e\u3063\u3066\u3001`openssl md5 SOMETHING` \u304c\u5b9a\u756a\u3060\u3068\u601d\u3063\u3066\u305f\u3051\u3069\u3001\u3044\u3064\u306e\u307e\u306b\u304b `/sbin/md5` \u304c\u3042\u308b\u3002\n\n\u76f8\u5909\u308f\u3089\u305a sha1 \u30c1\u30a7\u30c3\u30af\u306b\u306f `openssl sha1` \u3059\u308b\u4e8b\u306b\u306a\u308b\u3093\u3060\u308d\u3046\u3051\u3069\u3001`md5` \u306e\u65b9\u304c\u3001`-r` \u304c\u4f7f\u3048\u3066\u3061\u3087\u3063\u3068\u3060\u3051\u5229\u4fbf\u6027\u304c\u4e0a\u304c\u308b\uff1f\n\n\u3061\u3085\u30fc\u4e8b\u3067\u3001\u81ea\u5206\u7528\u91cd\u8907\u30d5\u30a1\u30a4\u30eb\u691c\u7d22\u30b3\u30de\u30f3\u30c9\u3092\u3001\u3061\u3087\u3063\u3068\u3060\u3051\u30ea\u30cb\u30e5\u30fc\u30a2\u30eb\u3002\n\n```shell-session:.bashrc\nfunction dupc(){\n\tfind . -type f -size '+0c' \"$@\" | perl -Mvars=%h -lne 'next if qx{md5 -r \"$_\"} !~ /^(\\S+)\\s(.*?)$/ ; push @{$h{$1}}, $2 ;}{ print join \"\\n\", $_, map{ \"\\t$_\" } @{$h{$_}} for grep { @{$h{$_}} > 1 }  keys %h'\n}\n```\n\n\u30ea\u30cb\u30e5\u30fc\u30a2\u30eb\u3064\u3063\u3066\u3082 `next if ... ;` \u90e8\u5206\u306e\u3001\u5b9f\u884c\u30b3\u30de\u30f3\u30c9\u3068\u6b63\u898f\u8868\u73fe\u304c\u3001\u5909\u66f4\u306b\u306a\u3063\u305f\u3060\u3051\u3060\u3051\u3069\u3002\n\u30d5\u30a1\u30a4\u30eb\u7e1b\u308a\u3068\u3001\u7a7a\u30d5\u30a1\u30a4\u30eb\u9664\u5916\u306e\u70ba\u306e `-size '+0c'` \u306e\u307f\u30c7\u30d5\u30a9\u3067\u3002\n\n### \u4f7f\u3044\u65b9\n\n```shell-session:\n$ cd foo\n$ dupc -maxdepth 1\n8dad5f05f2ffd34e2bf0cbab16ed15e0\n\t./\u30e0\u30d5\u30d5\u306a.jpg\n\t./\u30b2\u30d8\u30d8\u306a.jpg\n```\n\n", "tags": ["Mac", "Perl", "command"]}