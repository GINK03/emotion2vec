{"tags": ["PHP", "AmazonLinux", "Redis", "nginx"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002AmazonLinux\u306bnginx+PHP5.6+PHP-fpm+PHP-redis\u74b0\u5883\u3092\u4f5c\u3063\u305f\u306e\u3067\u305d\u306e\u6642\u306e\u30e1\u30e2\u3002\u306a\u304a\u3001php-fpm\u306fsocket\u63a5\u7d9a\u3067\u3001PHP-redis\u306fAmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u306a\u304b\u3063\u305f\u306e\u3067remi\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\n\n\u74b0\u5883\n\nAmazonLinux\nnginx(AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea)\nPHP5.6(AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea)\nPHP-fpm(AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea)\nPHP-redis(remi\u30ea\u30dd\u30b8\u30c8\u30ea)\n\n\n\u53c2\u8003\n\nCentOS\u306b\u3066nginx\u3067PHP\u3092\u52d5\u304b\u3059\nnginx + php-fpm socket\u3067\u63a5\u7d9a\u3059\u308b\n\n\nnginx\n\u3053\u3053\u306f\u3056\u3063\u304f\u308a\u8a18\u8f09\n# install\n$sudo yum install nginx -y\n# start service\n$sudo service nginx start\n# confirm web page can be downloaded\n$wget http://localhsot\n# set run level\n$sudo chkconfig nginx on\n$sudo chkconfig --list nginx\n\n\nPHP5.6\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ca\u3073PHP-fpm\u3067\u306e\u63a5\u7d9a\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30b5\u30a4\u30c8\u3068\u307b\u307c\u540c\u3058\u8a18\u8f09\u3067\u3059\u304c\u3001\u30d1\u30b9\u304c\u5fae\u5999\u306b\u9055\u3046\u306e\u3067\u8a18\u8f09\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306f/var/www/\u3068\u3059\u308b\u8a2d\u5b9a\u3067\u3059\nPHP5.6\u53ca\u3073php-fpm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$sudo yum install php56 php56-fpm -y\n\nPHP\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u306ephp\u3092\u4f5c\u6210\n\n/var/www/phpinfo.php\n<?php\n    phpinfo();\n?>\n\n\nphp-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\u3002user\u3068group\u3092apache\u304b\u3089nginx\u306b\u5909\u66f4\n\n/etc/php-fpm-5.6.d/www.conf\n- user = apache\n+ user = nginx\n\n- group = apache\n+ group = nginx\n\n\nnginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\n/etc/nginx/nginx.conf\n  http {\n-   index index.html index.htm;\n+   index index.php\n      server {\n-       root /usr/share/nginx/html; \n+       root /var/www;\n\n-       #location ~ \\.php$ {\n-       #    root           html;\n-       #    fastcgi_pass   127.0.0.1:9000;\n-       #    fastcgi_index  index.php;\n-       #    fastcgi_param  SCRIPT_FILENAME/scripts$fastcgi_script_name;\n-       #    include        fastcgi_params;\n-       #}\n+       location ~ \\.php$ {\n+       root           /var/www;\n+       fastcgi_pass   127.0.0.1:9000;\n+       fastcgi_index  index.php;\n+       fastcgi_param  SCRIPT_FILENAME /var/www$fastcgi_script_name;\n+       include        fastcgi_params;\n+     }\n\n\nphp-fpm\u306e\u518d\u8d77\u52d5\u3001\u53ca\u3073\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n$sudo service php-fpm start\n$sudo chkconfig php-fpm on\n$sudo chkconfig php-fpm --list php-fpm\n\nnginx\u306e\u518d\u8d77\u52d5\n$sudo service nginx restart\n\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\n$curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n<tr><td class=\"e\">PHP Version </td><td class=\"v\">5.6.8 </td></tr>\n\nPHP Version 5.6.8\u3068\u306a\u3063\u3066\u304a\u308a\u3001PHP5.6\u7cfb\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\nnginx\u3068php-fpm\u306e\u63a5\u7d9a\u3092socket\u306b\u3059\u308b\n\u3053\u3061\u3089\u3082\u53c2\u8003\u306b\u8a18\u8f09\u3057\u305f\u3082\u306e\u3068\u307b\u307c\u540c\u3058\u5185\u5bb9\u3067\u3059\u3002nginx\u3068php-fpm\u306e\u63a5\u7d9a\u3092socket\u3067\u5b9f\u65bd\u3057\u307e\u3059\nphp-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\n\n/etc/php-fpm-5.6.d/www.conf\n-   listen = 127.0.0.1:9000\n+   listen =  /var/run/php-fpm/php-fpm.sock\n\n-   ;listen.owner = nobody\n-   ;listen.group = nobody\n+   listen.owner = nginx  \n+   listen.group = nginx\n\n\nnginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\n/etc/nginx/nginx.conf\n-   fastcgi_pass   127.0.0.1:9000;\n+   fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;\n\n\n\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n\n$sudo service php-fpm restart\n$sudo service nginx restart \n\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\n$curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n\n\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u53d6\u5f97\u3067\u304d\u308c\u3070OK\u3067\u3059\n\nPHP-redis\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n2015/5/28\u73fe\u5728\u3001AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea\u306bPHP56-redis\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002(PHP55\u306f\u3042\u308a\u307e\u3059\u304c\u3002\u3002\u3002\uff09\n\u4e0a\u8a18\u3088\u308a\u3001AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea\u4ee5\u5916\u306e\u3082\u306e\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u672c\u4f8b\u3067\u306fremi\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u5fc5\u8981\u3068\u306a\u308bSCL-Util\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092rpm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$wget http://mirror.centos.org/centos/6/SCL/x86_64/scl-utils/scl-utils-20120927-11.el6.centos.alt.x86_64.rpm\n$sudo rpm -ivh scl-utils-20120927-11.el6.centos.alt.x86_64.rpm\n\n\u307e\u305f\u3001\u305d\u306e\u4ed6\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$sudo yum install php56-pecl-igbinary\n\n\u6b21\u306bremi\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n$wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm\n$sudo rpm -ivh remi-release-6.rpm\n\n\u3053\u308c\u3067remi\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067php-redis\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n$sudo yum --enablerepo=remi,remi-php56 install php56-php-pecl-redis.x86_64\n\n\u30a4\u30f3\u30b9\u30fc\u30eb\u3055\u308c\u308b\u3068\u4ee5\u4e0b\u306bso\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n$ls /opt/remi/php56/root/usr/lib64/php/modules/redis.so\n\nAmaozonLinux\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u7fa4\u306f/usr/lib64/php/5.6/modules/\u306b\u5b58\u5728\u3059\u308b\u306e\u3067\u3053\u3061\u3089\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308a\u307e\u3059\u3002\n$sudo ln -s /opt/remi/php56/root/usr/lib64/php/modules/redis.so /usr/lib64/php/5.6/modules/redis.so\n\n\u6700\u5f8c\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306aredis\u306eini\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n/etc/php-5.6.d/50-redis.ini\n; Enable redis extension module\nextension = redis.so\n\n; phpredis can be used to store PHP sessions.\n; To do this, uncomment and configure below\n\n; RPM note : save_handler and save_path are defined\n; for mod_php, in /etc/httpd/conf.d/php.conf\n; for php-fpm, in /opt/remi/php56/root/etc/php-fpm.d/*conf\n\n;session.save_handler = redis\n;session.save_path = \"tcp://host1:6379?weight=1, tcp://host2:6379?weight=2&timeout=2.5, tcp://host3:6379?weight=2\"\n\n\n\u6e96\u5099\u304c\u5b8c\u4e86\u3057\u305f\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$sudo service php-fpm restart\n$sudo service nginx restart\n\nphpinfo\u3092\u78ba\u8a8d\u3057\u3066redis\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$curl -s http://localhost/phpinfo.php |grep redis\n/etc/php-5.6.d/50-redis.ini,\n<h2><a name=\"module_redis\">redis</a></h2>\n<tr><td class=\"e\">Registered save handlers </td><td class=\"v\">files user redis  </td></tr>\nThis program is free software; you can redistribute it and/or modify it under the terms of the PHP License as published by the PHP Group and included in the distribution in the file:  LICENSE\n\nredis\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u547c\u3070\u308c\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\nphp-redis\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\n\u4eca\u56de\u306fremi\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3044\u3057\u307e\u3057\u305f\u304c\u3001\u30d3\u30eb\u30c9\u3059\u308b\u65b9\u6cd5\u3082\u8a18\u8f09\u3057\u307e\u3059\u3002\n\u30d3\u30eb\u30c9\u6642\u306b\u5fc5\u8981\u306a\u3082\u306e\u3092\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$sudo yum groupinstall \"Development Tools\"\n$sudo yum install php56-devel\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n$git clone https://github.com/phpredis/phpredis.git\n\nGithub\u30da\u30fc\u30b8\u306b\u8a18\u8f09\u3057\u3066\u3042\u308b\u3088\u3046\u306b\u30d3\u30eb\u30c9\u3057\u3066\u307f\u307e\u3059\n$phpize\n$./configure\n$make\n$sudo make install\nInstalling shared extensions:     /usr/lib64/php/5.6/modules/\n\n\u30d3\u30eb\u30c9\u304c\u7d42\u308f\u308b\u3068/usr/lib64/php/5.6/modules/\u306bso\u30d5\u30a1\u30a4\u30eb\u304c\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002\u3042\u3068\u306fredis\u7528\u306eini\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308c\u3070OK\u3067\u3059\u3002\nAmazonLinux\u306bnginx+PHP5.6+PHP-fpm+PHP-redis\u74b0\u5883\u3092\u4f5c\u3063\u305f\u306e\u3067\u305d\u306e\u6642\u306e\u30e1\u30e2\u3002\u306a\u304a\u3001php-fpm\u306fsocket\u63a5\u7d9a\u3067\u3001PHP-redis\u306fAmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u306a\u304b\u3063\u305f\u306e\u3067remi\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\n\n# \u74b0\u5883\n\n+ AmazonLinux\n+ nginx(AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea)\n+ PHP5.6(AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea)\n+ PHP-fpm(AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea)\n+ PHP-redis(remi\u30ea\u30dd\u30b8\u30c8\u30ea)\n\n# \u53c2\u8003\n\n+ [CentOS\u306b\u3066nginx\u3067PHP\u3092\u52d5\u304b\u3059](http://qiita.com/utano320/items/36b6eac2bbd5bb5657f6)\n+ [nginx + php-fpm socket\u3067\u63a5\u7d9a\u3059\u308b](http://qiita.com/monkick@github/items/610d1435d812beb853e2)\n\n# nginx\n\n\u3053\u3053\u306f\u3056\u3063\u304f\u308a\u8a18\u8f09\n\n```\n# install\n$sudo yum install nginx -y\n# start service\n$sudo service nginx start\n# confirm web page can be downloaded\n$wget http://localhsot\n# set run level\n$sudo chkconfig nginx on\n$sudo chkconfig --list nginx\n```\n\n# PHP5.6\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u53ca\u3073PHP-fpm\u3067\u306e\u63a5\u7d9a\n\n\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u3044\u305f\u30b5\u30a4\u30c8\u3068\u307b\u307c\u540c\u3058\u8a18\u8f09\u3067\u3059\u304c\u3001\u30d1\u30b9\u304c\u5fae\u5999\u306b\u9055\u3046\u306e\u3067\u8a18\u8f09\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306f`/var/www/`\u3068\u3059\u308b\u8a2d\u5b9a\u3067\u3059\n\nPHP5.6\u53ca\u3073php-fpm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$sudo yum install php56 php56-fpm -y\n```\n\nPHP\u306e\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u305f\u3081\u306b\u306ephp\u3092\u4f5c\u6210\n\n```/var/www/phpinfo.php\n<?php\n    phpinfo();\n?>\n```\n\nphp-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\u3002user\u3068group\u3092apache\u304b\u3089nginx\u306b\u5909\u66f4\n\n```/etc/php-fpm-5.6.d/www.conf\n- user = apache\n+ user = nginx\n\n- group = apache\n+ group = nginx\n```\n\nnginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\n```/etc/nginx/nginx.conf\n  http {\n-   index index.html index.htm;\n+   index index.php\n      server {\n-       root /usr/share/nginx/html; \n+       root /var/www;\n\n-       #location ~ \\.php$ {\n-       #    root           html;\n-       #    fastcgi_pass   127.0.0.1:9000;\n-       #    fastcgi_index  index.php;\n-       #    fastcgi_param  SCRIPT_FILENAME/scripts$fastcgi_script_name;\n-       #    include        fastcgi_params;\n-       #}\n+       location ~ \\.php$ {\n+       root           /var/www;\n+       fastcgi_pass   127.0.0.1:9000;\n+       fastcgi_index  index.php;\n+       fastcgi_param  SCRIPT_FILENAME /var/www$fastcgi_script_name;\n+       include        fastcgi_params;\n+     }\n```\n\nphp-fpm\u306e\u518d\u8d77\u52d5\u3001\u53ca\u3073\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n```\n$sudo service php-fpm start\n$sudo chkconfig php-fpm on\n$sudo chkconfig php-fpm --list php-fpm\n```\n\nnginx\u306e\u518d\u8d77\u52d5\n\n```\n$sudo service nginx restart\n```\n\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\n\n```\n$curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n<tr><td class=\"e\">PHP Version </td><td class=\"v\">5.6.8 </td></tr>\n```\n**PHP Version 5.6.8**\u3068\u306a\u3063\u3066\u304a\u308a\u3001PHP5.6\u7cfb\u304c\u5229\u7528\u3055\u308c\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n# nginx\u3068php-fpm\u306e\u63a5\u7d9a\u3092socket\u306b\u3059\u308b\n\n\u3053\u3061\u3089\u3082\u53c2\u8003\u306b\u8a18\u8f09\u3057\u305f\u3082\u306e\u3068\u307b\u307c\u540c\u3058\u5185\u5bb9\u3067\u3059\u3002nginx\u3068php-fpm\u306e\u63a5\u7d9a\u3092socket\u3067\u5b9f\u65bd\u3057\u307e\u3059\n\nphp-fpm\u306e\u8a2d\u5b9a\u5909\u66f4\n\n```/etc/php-fpm-5.6.d/www.conf\n-   listen = 127.0.0.1:9000\n+   listen =  /var/run/php-fpm/php-fpm.sock\n\n-   ;listen.owner = nobody\n-   ;listen.group = nobody\n+   listen.owner = nginx  \n+   listen.group = nginx\n```\n\nnginx\u306e\u8a2d\u5b9a\u5909\u66f4\n\n```/etc/nginx/nginx.conf\n-   fastcgi_pass   127.0.0.1:9000;\n+   fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;\n```\n\n\u30b5\u30fc\u30d3\u30b9\u518d\u8d77\u52d5\n```\n$sudo service php-fpm restart\n$sudo service nginx restart \n```\n\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\n\n```\n$curl -s http://localhost/phpinfo.php |grep \"PHP Version\"\n```\n\n\u5148\u307b\u3069\u3068\u540c\u3058\u3088\u3046\u306b\u53d6\u5f97\u3067\u304d\u308c\u3070OK\u3067\u3059\n\n# PHP-redis\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n2015/5/28\u73fe\u5728\u3001AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea\u306bPHP56-redis\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002(PHP55\u306f\u3042\u308a\u307e\u3059\u304c\u3002\u3002\u3002\uff09\n\n\u4e0a\u8a18\u3088\u308a\u3001AmazonLinux\u30ea\u30dd\u30b8\u30c8\u30ea\u4ee5\u5916\u306e\u3082\u306e\u3092\u5229\u7528\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u672c\u4f8b\u3067\u306f**remi\u30ea\u30dd\u30b8\u30c8\u30ea**\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u5fc5\u8981\u3068\u306a\u308b**SCL-Util**\u3068\u3044\u3046\u30d1\u30c3\u30b1\u30fc\u30b8\u3092rpm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$wget http://mirror.centos.org/centos/6/SCL/x86_64/scl-utils/scl-utils-20120927-11.el6.centos.alt.x86_64.rpm\n$sudo rpm -ivh scl-utils-20120927-11.el6.centos.alt.x86_64.rpm\n```\n\n\u307e\u305f\u3001\u305d\u306e\u4ed6\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$sudo yum install php56-pecl-igbinary\n```\n\n\u6b21\u306bremi\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n$wget http://rpms.famillecollet.com/enterprise/remi-release-6.rpm\n$sudo rpm -ivh remi-release-6.rpm\n```\n\n\u3053\u308c\u3067remi\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067php-redis\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n$sudo yum --enablerepo=remi,remi-php56 install php56-php-pecl-redis.x86_64\n```\n\n\u30a4\u30f3\u30b9\u30fc\u30eb\u3055\u308c\u308b\u3068\u4ee5\u4e0b\u306bso\u30d5\u30a1\u30a4\u30eb\u304c\u5b58\u5728\u3059\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\n$ls /opt/remi/php56/root/usr/lib64/php/modules/redis.so\n```\n\nAmaozonLinux\u7d4c\u7531\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u7fa4\u306f`/usr/lib64/php/5.6/modules/`\u306b\u5b58\u5728\u3059\u308b\u306e\u3067\u3053\u3061\u3089\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308a\u307e\u3059\u3002\n\n```\n$sudo ln -s /opt/remi/php56/root/usr/lib64/php/modules/redis.so /usr/lib64/php/5.6/modules/redis.so\n```\n\n\u6700\u5f8c\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306aredis\u306eini\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n```/etc/php-5.6.d/50-redis.ini\n; Enable redis extension module\nextension = redis.so\n\n; phpredis can be used to store PHP sessions.\n; To do this, uncomment and configure below\n\n; RPM note : save_handler and save_path are defined\n; for mod_php, in /etc/httpd/conf.d/php.conf\n; for php-fpm, in /opt/remi/php56/root/etc/php-fpm.d/*conf\n\n;session.save_handler = redis\n;session.save_path = \"tcp://host1:6379?weight=1, tcp://host2:6379?weight=2&timeout=2.5, tcp://host3:6379?weight=2\"\n```\n\n\u6e96\u5099\u304c\u5b8c\u4e86\u3057\u305f\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u3092\u518d\u8d77\u52d5\u3057\u3066\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$sudo service php-fpm restart\n$sudo service nginx restart\n```\n\nphpinfo\u3092\u78ba\u8a8d\u3057\u3066redis\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$curl -s http://localhost/phpinfo.php |grep redis\n/etc/php-5.6.d/50-redis.ini,\n<h2><a name=\"module_redis\">redis</a></h2>\n<tr><td class=\"e\">Registered save handlers </td><td class=\"v\">files user redis  </td></tr>\nThis program is free software; you can redistribute it and/or modify it under the terms of the PHP License as published by the PHP Group and included in the distribution in the file:  LICENSE\n```\n\nredis\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u547c\u3070\u308c\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n# php-redis\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\n\n\u4eca\u56de\u306fremi\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f7f\u3044\u3057\u307e\u3057\u305f\u304c\u3001\u30d3\u30eb\u30c9\u3059\u308b\u65b9\u6cd5\u3082\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n\u30d3\u30eb\u30c9\u6642\u306b\u5fc5\u8981\u306a\u3082\u306e\u3092\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$sudo yum groupinstall \"Development Tools\"\n$sudo yum install php56-devel\n```\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```\n$git clone https://github.com/phpredis/phpredis.git\n```\n\nGithub\u30da\u30fc\u30b8\u306b\u8a18\u8f09\u3057\u3066\u3042\u308b\u3088\u3046\u306b\u30d3\u30eb\u30c9\u3057\u3066\u307f\u307e\u3059\n\n```\n$phpize\n$./configure\n$make\n$sudo make install\nInstalling shared extensions:     /usr/lib64/php/5.6/modules/\n```\n\n\u30d3\u30eb\u30c9\u304c\u7d42\u308f\u308b\u3068`/usr/lib64/php/5.6/modules/`\u306bso\u30d5\u30a1\u30a4\u30eb\u304c\u914d\u7f6e\u3055\u308c\u307e\u3059\u3002\u3042\u3068\u306fredis\u7528\u306eini\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308c\u3070OK\u3067\u3059\u3002\n"}