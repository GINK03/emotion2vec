{"tags": ["Bluemix", "node-red", "Node.js", "JavaScript", "IoT"], "context": "\u79c1\u304cNode-RED\u3092\u4f7f\u3044\u59cb\u3081\u30664\u30ab\u6708\u304c\u7d4c\u3061\u307e\u3057\u305f\u3002\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3068\u3001Node-RED\u306b\u306f\u5358\u306b\u30ce\u30fc\u30c9\u3092\u6a2a\u306b\u7e4b\u3044\u3067\u3086\u304f\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u95a2\u4fc2\u3092\u6d3b\u7528\u3057\u305f\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u304c\u6ca2\u5c71\u3042\u308b\u3053\u3068\u306b\u6c17\u304c\u4ed8\u304d\u307e\u3057\u305f\u3002\n\u672c\u8a18\u4e8b\u3067\u306f\u3001Node-RED\u3092\u4eca\u307e\u3067\u4ee5\u4e0a\u306b\u6d3b\u7528\u3067\u304d\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f310\u500b\u3092\u3001\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\u6700\u5f8c\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3001Bluemix\u4e0a\u306eNode-RED\u306f\u3082\u3061\u308d\u3093\u3001\u30ed\u30fc\u30ab\u30ebPC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fNode-RED\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u306e\u3067\u3001\u8cbc\u308a\u4ed8\u3051\u3066\u904a\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nNode-RED\u3068\u306f\nNode-RED\u306f\u3001\u6a5f\u80fd\u6bce\u306b\u7528\u610f\u3055\u308c\u305f\u30ce\u30fc\u30c9\u3092\u30de\u30a6\u30b9\u3067\u7e4b\u3050\u64cd\u4f5c\u3067\u3001\u7c21\u5358\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u958b\u767a\u74b0\u5883\u3067\u3059\u3002\u5f53\u521d\u306fIoT\u5411\u3051\u306b\u958b\u767a\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u7b49\u3001\u5e45\u5e83\u3044\u7528\u9014\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3068\u306f\n\u4e00\u822c\u7684\u306b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3068\u306f\u3001Java\u7b49\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u8a00\u8a9e\u3092\u4f7f\u3044\u3053\u306a\u3057\u3066\u3086\u304f\u3068\u8fbf\u308a\u7740\u304f\u3001\u958b\u767a\u3084\u5909\u66f4\u306e\u52b9\u7387\u304c\u826f\u3044\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3\u3092\u6307\u3057\u307e\u3059\u3002\u5b66\u751f\u306e\u6642\u3001\u8208\u5473\u6df1\u3044\u30d1\u30bf\u30fc\u30f3\u304c\u4f55\u500b\u304b\u5b66\u3073\u3001\u7279\u306bMediator\u3084Singleton\u30d1\u30bf\u30fc\u30f3\u306f\u76ee\u304b\u3089\u9c57\u3067\u3057\u305f\u3002\n\nNode-RED\u306b\u304a\u3051\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\nNode-RED\u306f\u3001\u8907\u96d1\u306a\u51e6\u7406\u3092\u30ab\u30d7\u30bb\u30eb\u5316\u3057\u305f\u30ce\u30fc\u30c9\u304c\u6ca2\u5c71\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30ce\u30fc\u30c9\u3092\u7e6b\u3050\u3060\u3051\u3067\u7c21\u5358\u306b\u4e00\u9023\u306e\u51e6\u7406\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u30ce\u30fc\u30c9\u3092\u4e00\u65b9\u5411\u306b\u7e4b\u3050\u306e\u307f\u3067\u306f\u3001Node-RED\u306e\u5229\u70b9\u3092\u6d3b\u7528\u3057\u304d\u308c\u3066\u3044\u306a\u3044\u3068\u8003\u3048\u307e\u3059\u3002\n\u300c\u51e6\u7406\u306e\u30ed\u30b8\u30c3\u30af\u3092\u3001\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u95a2\u4fc2\u3067\u8a18\u8ff0\u3059\u308b\u300d\u3068\u8996\u70b9\u3092\u5909\u3048\u308b\u3068\u3001\u69d8\u3005\u306a\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u30a2\u30a4\u30c7\u30a2\u304c\u6cb8\u3044\u3066\u304d\u307e\u3057\u305f\u3002\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u308b\u3068\u3001\u4e00\u9023\u306e\u51e6\u7406\u3092\u7406\u89e3\u3057\u3084\u3059\u304f\u306a\u308a\u3001\u30ea\u30ea\u30fc\u30b9\u5f8c\u306e\u4fee\u6b63\u3082\u52b9\u7387\u7684\u306b\u884c\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n1. Store & Search\u30d1\u30bf\u30fc\u30f3\n\u30c7\u30fc\u30bf\u306e\u683c\u7d0d\u3068\u691c\u7d22\u3092\u884c\u3046\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nNode-RED\u306f\u3001IoT\u7aef\u672b\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30c7\u30fc\u30bf\u306e\u51e6\u7406\u5411\u3051\u306b\u958b\u767a\u3055\u308c\u305f\u305f\u3081\u3001Store & Search\u30d1\u30bf\u30fc\u30f3\u306f\u4e00\u756a\u30e1\u30b8\u30e3\u30fc\u306a\u30d1\u30bf\u30fc\u30f3\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nStore\u30d1\u30bf\u30fc\u30f3\u306f\u3001IoT\u7aef\u672b\u7b49\u304b\u3089\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u683c\u7d0d\u3057\u307e\u3059\u3002\u3053\u306e\u6642\u3001JavaScript\u3092\u8a18\u8ff0\u3059\u308b\u30ce\u30fc\u30c9\u3092\u4ecb\u3057\u3066\u3001\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u3092\u9078\u629e\u3057\u305f\u308a\u3001\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u5217\u540d\u3092\u6307\u5b9a\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\nSearch\u30d1\u30bf\u30fc\u30f3\u306f\u3001Store\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u683c\u7d0d\u3057\u305f\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n2. UI & API\u30d1\u30bf\u30fc\u30f3\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067API\u554f\u5408\u305b\u306b\u7528\u3044\u308b\u5165\u529b\u5024\u3092\u53d7\u3051\u4ed8\u3051\u3001API\u3092\u554f\u5408\u305b\u305f\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nUI\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u7528\u51e6\u7406\u3001API\u554f\u5408\u305b\u7d50\u679c\u8868\u793a\u7528\u51e6\u7406\u306e2\u3064\u306e\u51e6\u7406\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u306eHTML\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u30e6\u30fc\u30b6\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u5024\u3092GET\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u3001API\u554f\u5408\u305b\u7d50\u679c\u8868\u793a\u7528\u51e6\u7406\u306b\u5f15\u304d\u7d99\u304e\u307e\u3059\u3002API\u554f\u5408\u305b\u7d50\u679c\u8868\u793a\u7528\u51e6\u7406\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u3092\u7528\u3044\u3066\u30a6\u30a7\u30d6API\u3092\u554f\u5408\u305b\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\u7528HTML\u306b\u7d44\u307f\u8fbc\u3093\u3067\u51fa\u529b\u3057\u307e\u3059\u3002UI\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u30a6\u30a7\u30d6API\u3092\u554f\u5408\u305b\u308bUI\u3092\u4f5c\u6210\u3057\u305f\u3044\u6642\u306b\u899a\u3048\u3066\u304a\u304f\u3068\u4fbf\u5229\u3067\u3059\u3002\nAPI\u30d1\u30bf\u30fc\u30f3\u306f\u3001Node-RED\u4e0a\u3067\u6271\u3046\u30c7\u30fc\u30bf\u3092\u3001\u30a6\u30a7\u30d6API\u3068\u3057\u3066\u554f\u5408\u305b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\u51e6\u7406\u3092\u30a6\u30a7\u30d6API\u3068\u3057\u3066\u4f5c\u6210\u3057\u3066\u304a\u304f\u3068\u3001UI\u30d1\u30bf\u30fc\u30f3\u304b\u3089\u306e\u554f\u5408\u305b\u306f\u3082\u3061\u308d\u3093\u3001\u4ed6\u306e\u958b\u767a\u8a00\u8a9e\u3067\u958b\u767a\u3057\u305f\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089Node-RED\u4e0a\u306e\u51e6\u7406\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u5bb9\u6613\u3068\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001Java\u306eUI\u958b\u767a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30afVaadin\u3067UI\u3092\u958b\u767a\u3057\u3001\u5185\u90e8\u30ed\u30b8\u30c3\u30af\u306fNode-RED\u3067\u30a6\u30a7\u30d6API\u3068\u3057\u3066\u958b\u767a\u3059\u308b\u3068\u3044\u3046\u624b\u6cd5\u306f\u3001\u3068\u3066\u3082\u958b\u767a\u52b9\u7387\u304c\u826f\u304f\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\n3. Timeout\u30d1\u30bf\u30fc\u30f3\n\u30ce\u30fc\u30c9\u306e\u51e6\u7406\u306b\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u5834\u5408\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3055\u305b\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nNode-RED\u3067DB\u3084\u30a6\u30a7\u30d6API\u306b\u554f\u5408\u305b\u305f\u969b\u3001\u5fdc\u7b54\u304c\u8fd4\u3063\u3066\u6765\u305a\u3001\u51e6\u7406\u304c\u9032\u307e\u306a\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u73fe\u8c61\u306f\u3001\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u969b\u306b\u81f4\u547d\u7684\u3067\u3059\u3002\u3082\u3057\u51e6\u7406\u304c\u7d42\u7aef\u306eHTTP\u5fdc\u7b54\u30ce\u30fc\u30c9\u307e\u3067\u5230\u9054\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u30e6\u30fc\u30b6\u306e\u30d6\u30e9\u30a6\u30b6\u306f\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u72b6\u614b\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u3001\u30e6\u30fc\u30b6\u306f\u9577\u6642\u9593\u5f85\u305f\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u305d\u306e\u6642\u306f\u3001Timeout\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u3001\u6307\u5b9a\u79d2\u6570\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u3001\u300c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u300d\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3092\u8fd4\u3059\u65b9\u304c\u3001\u30e6\u30fc\u30b6\u306b\u89aa\u5207\u3067\u3059\u3002\n\n4. while\u30d1\u30bf\u30fc\u30f3\n\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u306e\u307f\u3067\u3001while\u6587\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nJava\u7b49\u3067while\u6587\u3092\u7528\u3044\u308b\u5834\u5408\u306f\u3001\u5909\u6570i=0\u3067\u521d\u671f\u5316\u3001\u6761\u4ef6\u6587\u3067\u30eb\u30fc\u30d7\u56de\u6570\u6307\u5b9a\u3001i++\u3067\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3068\u3044\u30463\u3064\u306e\u624b\u9806\u3092\u884c\u3044\u307e\u3059\u3002Node-RED\u306b\u304a\u3051\u308bwhile\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u540c\u69d8\u306e\u624b\u9806\u3092\u884c\u3046\u521d\u671f\u5316\u30ce\u30fc\u30c9\u3001\u6761\u4ef6\u6587\u30ce\u30fc\u30c9\u3001\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u30ce\u30fc\u30c9\u306e3\u30ce\u30fc\u30c9\u304b\u3089\u69cb\u6210\u3055\u308c\u307e\u3059\u3002while\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u308b\u3068\u3001\u30eb\u30fc\u30d7\u69cb\u9020\u306e\u628a\u63e1\u304c\u5bb9\u6613\u3068\u306a\u308a\u3001\u30ea\u30ea\u30fc\u30b9\u5f8c\u306b\u30eb\u30fc\u30d7\u56de\u6570\u3092\u5909\u66f4\u3059\u308b\u4fee\u6b63\u3082\u8fc5\u901f\u306b\u884c\u3048\u307e\u3059\u3002\u3061\u306a\u307f\u306bNode-RED\u306b\u3066\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u3092\u884c\u3046\u5834\u5408\u306f\u3001\u5927\u62b58\u306e\u5b57\u578b\u306e\u63a5\u7d9a\u3068\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u3059\u3050\u306b\u30eb\u30fc\u30d7\u51e6\u7406\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n5. Sequence\u30d1\u30bf\u30fc\u30f3\n\u8907\u6570\u306e\u30ce\u30fc\u30c9\u304b\u3089\u5f97\u305f\u51e6\u7406\u7d50\u679c\u3092\u3001\u96c6\u8a08\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n\u51e6\u7406\u30ce\u30fc\u30c9\u306fmsg.payload\u3092\u4ecb\u3057\u30661\u3064\u306e\u5024\u3092\u51fa\u529b\u3059\u308b\u3068\u3001\u8a2d\u8a08\u304c\u30b7\u30f3\u30d7\u30eb\u3068\u306a\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u8907\u6570\u306e\u30ce\u30fc\u30c9\u304b\u3089\u53d6\u5f97\u3057\u305f\u5024\u3092\u96c6\u8a08\u3057\u305f\u3044\u5834\u5408\u3001\u5358\u7d14\u306b\u30ce\u30fc\u30c9\u3092\u6a2a\u306b\u7e6b\u3044\u3067\u3057\u307e\u3046\u3068\u3068msg.payload\u306e\u5024\u306f\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002Sequence\u30d1\u30bf\u30fc\u30f3\u3067\u306f\u3001\u30ce\u30fc\u30c9\u304b\u3089msg.payload\u3092\u4ecb\u3057\u3066\u53d7\u3051\u53d6\u3063\u305f\u5024\u3092\u4e00\u65e6\u3001msg.tmp\u7b49\u306e\u5225\u5909\u6570\u306b\u9000\u907f\u3057\u3066\u304a\u304d\u3001\u5f8c\u7d9a\u306e\u30ce\u30fc\u30c9\u304cmsg.payload\u306b\u5024\u3092\u683c\u7d0d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u30ce\u30fc\u30c9\u304b\u3089\u5024\u3092\u53d7\u3051\u53d6\u308b\u51e6\u7406\u304c\u5168\u3066\u7d42\u4e86\u3057\u305f\u5f8c\u3001\u5225\u5909\u6570\u306b\u9000\u907f\u3057\u3066\u304a\u3044\u305f\u5024\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\u3001\u96c6\u8a08\u51e6\u7406\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\n6. Aggregator\u30d1\u30bf\u30fc\u30f3\nSequence\u30d1\u30bf\u30fc\u30f3\u3068\u540c\u3058\u304f\u3001\u8907\u6570\u306e\u30ce\u30fc\u30c9\u304b\u3089\u5f97\u305f\u51e6\u7406\u7d50\u679c\u3092\u3001\u96c6\u8a08\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nSequence\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u30ce\u30fc\u30c9\u3092\u6a2a\u306b\u7e4b\u3044\u3067\u3044\u304f\u306e\u307f\u3067\u3042\u308b\u305f\u3081\u3001\u51e6\u7406\u30ce\u30fc\u30c9\u304b\u3001\u5024\u3092\u5225\u5909\u6570\u306b\u9000\u907f\u3059\u308b\u30ce\u30fc\u30c9\u304b\u3092\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3092\u898b\u305f\u3060\u3051\u3067\u306f\u3001\u3059\u3050\u8b58\u5225\u3067\u304d\u307e\u305b\u3093\u3002Aggregator\u30d1\u30bf\u30fc\u30f3\u3067\u306f\u3001\u96c6\u8a08\u30ce\u30fc\u30c9\u30782\u3064\u306e\u30ce\u30fc\u30c9\u304c\u76f4\u63a5\u5024\u3092\u6e21\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3092\u898b\u308b\u3060\u3051\u3067\u76f4\u89b3\u7684\u306b\u51e6\u7406\u3092\u628a\u63e1\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u5225\u306e\u5229\u70b9\u3068\u3057\u3066\u3001\u8907\u6570\u306e\u30a6\u30a7\u30d6API\u306b\u554f\u5408\u305b\u305f\u7d50\u679c\u3092\u96c6\u8a08\u3059\u308b\u3088\u3046\u306a\u30b1\u30fc\u30b9\u306b\u3066\u3001\u4e26\u5217\u3057\u3066\u30a6\u30a7\u30d6API\u3078\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u304d\u308b\u305f\u3081\u3001\u51e6\u7406\u6642\u9593\u3092\u77ed\u7e2e\u3067\u304d\u308b\u7279\u5fb4\u3082\u3042\u308a\u307e\u3059\u3002\n\n7. Separator\u30d1\u30bf\u30fc\u30f3\n1\u3064\u306e\u30ce\u30fc\u30c9\u304b\u30892\u3064\u306e\u7570\u306a\u308b\u5024\u3092\u51fa\u529b\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nAggregator\u30d1\u30bf\u30fc\u30f3\u306f\u300c2\u5165\u529b\u300d\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3042\u308b\u306e\u306b\u5bfe\u3057\u3001Separator\u30d1\u30bf\u30fc\u30f3\u306f\u300c2\u51fa\u529b\u300d\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002JavaScript\u3092\u8a18\u8ff0\u3059\u308b\u30ce\u30fc\u30c9\u306b\u3066\u3001\u30b5\u30a4\u30ba2\u306e\u914d\u5217\u3092return\u3057\u3001\u51fa\u529b\u6570\u3092\u6307\u5b9a\u3059\u308b\u306e\u307f\u3067\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n\n8. MapReduce\u30d1\u30bf\u30fc\u30f3\nSeparator\u30d1\u30bf\u30fc\u30f3\u3068Aggregator\u30d1\u30bf\u30fc\u30f3\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3001MapReduce\u306e\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nMap\u51e6\u7406\u306f\u3001Separator\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002Map\u51e6\u7406\u3092\u884c\u3046\u30ce\u30fc\u30c9\u306f\u3001\u5165\u529b\u5024\u306b\u5bfe\u3057\u3066WordCount\u7b49\u306e\u51e6\u7406\u3092\u884c\u3044\u3001Key\u3092\u57fa\u306bKey-Value\u30da\u30a2\u306e\u51fa\u529b\u5148\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u4e00\u65b9\u3001Reduce\u51e6\u7406\u306f\u3001Aggregator\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002Reduce\u51e6\u7406\u3092\u884c\u3046\u30ce\u30fc\u30c9\u306f\u3001\u4e8b\u524d\u306b\u6307\u5b9a\u3057\u305fMap\u6570\u5206\u306e\u5165\u529b\u304c\u6765\u305f\u5f8c\u3001\u540c\u3058Key\u3092\u6301\u3064Value\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u96c6\u8a08\u7b49\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002Java\u7b49\u3067MapReduce\u51e6\u7406\u3092\u8a18\u8ff0\u3059\u308b\u3068\u3001\u591a\u91cd\u30eb\u30fc\u30d7\u7b49\u304c\u539f\u56e0\u3067\u8907\u96d1\u306b\u306a\u308a\u304c\u3061\u3067\u3059\u304c\u3001Node-RED\u3067\u306fMapReduce\u306e\u51e6\u7406\u30d5\u30ed\u30fc\u3092\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3068\u3057\u3066\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u8a18\u8ff0\u3067\u304d\u308b\u305f\u3081\u3001\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u3001\u7406\u89e3\u3082\u5bb9\u6613\u3067\u3059\u3002\n\n9. Matcher\u30d1\u30bf\u30fc\u30f3\n\u30ce\u30fc\u30c9\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3092\u63a2\u7d22\u3057\u3066\u3001\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u304b\u5224\u5b9a\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nJavaScript\u3092\u8a18\u8ff0\u3059\u308b\u30ce\u30fc\u30c9\u306f\u3001\u5024\u3092return\u3057\u306a\u3044\u3068\u5f8c\u7d9a\u30ce\u30fc\u30c9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3046\u52d5\u304d\u3092\u3057\u307e\u3059\u3002Matcher\u30d1\u30bf\u30fc\u30f3\u306e\u6761\u4ef6\u30ce\u30fc\u30c9\u306f\u3001\u3053\u306e\u7279\u5fb4\u3092\u751f\u304b\u3057\u3001\u5165\u529b\u5024\u304c\u30ce\u30fc\u30c9\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5834\u5408\u306e\u307f\u3001\u6b21\u306e\u30ce\u30fc\u30c9\u306b\u51e6\u7406\u3092\u5f15\u304d\u7d99\u304e\u307e\u3059\u3002Matcher\u30d1\u30bf\u30fc\u30f3\u3067\u306f\u3001\u51e6\u7406\u5168\u4f53\u3068\u3057\u3066\u6e80\u305f\u3057\u305f\u3044\u6761\u4ef6\u3092\u3001\u6761\u4ef6\u30ce\u30fc\u30c9\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3068\u3057\u3066\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u5224\u5b9a\u3057\u305f\u3044\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3059\u308b\u3068\u3001\u305d\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3092\u63a2\u7d22\u3057\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u304b\u3089\u5024\u304c\u51fa\u3066\u304d\u305f\u5834\u5408\u3001\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u56f3\u306e\u4f8b\u3067\u306f\u3001Matcher\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u3001\u5165\u529b\u3057\u305f\u82f1\u6587\u306e\u6587\u578b\u3092\u5224\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u5185\u90e8\u3067\u306f\u3001\u54c1\u8a5e\u3092\u5224\u5b9a\u3059\u308b\u6761\u4ef6\u30ce\u30fc\u30c9\u304b\u3089\u6210\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3092\u901a\u904e\u3055\u305b\u308b\u3053\u3068\u3067\u3001SV\u3001SVC\u3001SVO\u3001SVOO\u3001SVOC\u306e\u3069\u306e\u6587\u578b\u306b\u8a72\u5f53\u3059\u308b\u304b\u3092\u5224\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u51e6\u7406\u306f\u4e00\u5ea6\u3001\u54c1\u8a5e\u3092\u5224\u5b9a\u3059\u308b\u30ce\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u3066\u304a\u3051\u3070\u3001\u30ea\u30ea\u30fc\u30b9\u5f8c\u306b\u54c1\u8a5e\u306e\u4e26\u3073\u3092\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u3063\u3066\u3082\u3001\u30ce\u30fc\u30c9\u63a5\u7d9a\u3092\u5909\u3048\u308b\u64cd\u4f5c\u3060\u3051\u3067\u4fee\u6b63\u304c\u5b8c\u7d50\u3057\u307e\u3059\u3002Node-RED\u306f\u3001iPad\u3084Android\u30bf\u30d6\u30ec\u30c3\u30c8\u3067\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3092\u5909\u66f4\u3067\u304d\u308b\u305f\u3081\u3001\u4f8b\u3048\u3070\u901a\u52e4\u96fb\u8eca\u306e\u4e2d\u7b49\u3001\u3069\u3053\u3067\u3082\u4fee\u6b63\u4f5c\u696d\u304c\u884c\u3048\u307e\u3059\u3002\n\n10. State\u30d1\u30bf\u30fc\u30f3\n\u72b6\u614b\u9077\u79fb\u3092\u6271\u3046\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\nState\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u72b6\u614b\u3092\u8868\u3059\u72b6\u614b\u30ce\u30fc\u30c9\u3068\u3001\u9077\u79fb\u5148\u3092\u8868\u3059Switch\u30ce\u30fc\u30c9\u304b\u3089\u69cb\u6210\u3055\u308c\u307e\u3059\u3002\u72b6\u614b\u30ce\u30fc\u30c9\u306f\u3001\u305d\u306e\u72b6\u614b\u306b\u5fc5\u8981\u306a\u51e6\u7406\u3092\u884c\u3044\u3001Switch\u30ce\u30fc\u30c9\u306b\u5224\u5b9a\u3057\u305f\u3044\u5024\u3092\u5f15\u304d\u7d99\u304e\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001Switch\u30ce\u30fc\u30c9\u306f\u5f15\u304d\u7d99\u3044\u3060\u5024\u306e\u5185\u5bb9\u306b\u5f93\u3044\u5224\u5b9a\u3057\u3001\u6b21\u306e\u72b6\u614b\u30ce\u30fc\u30c9\u3078\u51e6\u7406\u3092\u79fb\u3057\u307e\u3059\u3002Java\u7b49\u3067\u72b6\u614b\u9077\u79fb\u3092\u8a18\u8ff0\u3059\u308b\u5834\u5408\u306f\u3001\u72b6\u614b\u9077\u79fb\u8868\u3092\u6d3b\u7528\u3059\u308b\u7b49\u306e\u65b9\u6cd5\u3092\u7528\u3044\u307e\u3059\u304c\u3001\u30b3\u30fc\u30c9\u304b\u3089\u9077\u79fb\u306e\u5168\u4f53\u50cf\u3092\u7406\u89e3\u3059\u308b\u306f\u56f0\u96e3\u3067\u3059\u3002Node-RED\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u3001\u72b6\u614b\u306e\u9077\u79fb\u304c\u4e00\u76ee\u77ad\u7136\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\n\u672c\u8a18\u4e8b\u3092\u901a\u3057\u3066\u3001\u65b0\u305f\u306a\u767a\u898b\u304c\u5f97\u3089\u308c\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\u9762\u767d\u3044\u4ed6\u306e\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3084\u3001\u3082\u3063\u3068\u826f\u3044\u30b3\u30fc\u30c9\u306b\u6c17\u3065\u3044\u305f\u65b9\u306f\u3001\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002\u7686\u3067\u8b70\u8ad6\u3057\u3001\u65b0\u305f\u306a\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u898b\u3064\u3051\u3066\u3086\u3051\u305f\u3089\u3001\u826f\u3044\u306a\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\u203b\u672c\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u5185\u5bb9\u306f\u3001RedConnect\u306e\u6280\u8853\u30b5\u30a4\u30c8\u3067\u3082\u7d39\u4ecb\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nNode-RED\u306f\u3001\u958b\u767a\u74b0\u5883\u306e\u53f3\u4e0a\u30e1\u30cb\u30e5\u30fc->Import->Clipboard\u304b\u3089\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8cbc\u308a\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nStore & Search\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"58f0c78.fa70f38\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Store pattern\",\"info\":\"\",\"x\":139.67855072021484,\"y\":136.9643678665161,\"wires\":[]},{\"id\":\"ac5df1bd.53a21\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u3092\u9078\u629e\",\"func\":\"msg.payload = {DATA: new Date(msg.payload).toString()};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":327.42858505249023,\"y\":182.9643850326538,\"wires\":[[\"bc71d473.438e28\"]]},{\"id\":\"bc71d473.438e28\",\"type\":\"dashDB out\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"table\":\"TMP\",\"name\":\"DB\u3078\u683c\u7d0d\",\"x\":505.4285888671875,\"y\":182.96438694000244,\"wires\":[]},{\"id\":\"4ad682a0.b5297c\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u691c\u7d22\u8981\u6c42\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":152.1785888671875,\"y\":325.2143850326538,\"wires\":[[\"663e23c1.99c1dc\"]]},{\"id\":\"afccc742.503338\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u5165\u529b\u30c7\u30fc\u30bf\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":154.42858505249023,\"y\":182.9643850326538,\"wires\":[[\"ac5df1bd.53a21\"]]},{\"id\":\"663e23c1.99c1dc\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"SELECT * FROM TMP;\",\"params\":\"\",\"name\":\"DB\u3092\u691c\u7d22\",\"x\":295.1785888671875,\"y\":325.2143850326538,\"wires\":[[\"1301aa90.ecfe55\"]]},{\"id\":\"1301aa90.ecfe55\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u691c\u7d22\u7d50\u679c\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":462.17859649658203,\"y\":325.2143850326538,\"wires\":[]},{\"id\":\"3b24f16a.c4db0e\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Search pattern\",\"info\":\"\",\"x\":144.67858123779297,\"y\":276.96437549591064,\"wires\":[]},{\"id\":\"9efbd918.610428\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191\u683c\u7d0d\u3057\u305f\u30c7\u30fc\u30bf\u3092\u691c\u7d22\",\"info\":\"\",\"x\":369.67859649658203,\"y\":366.5477056503296,\"wires\":[]},{\"id\":\"42d56d7b.bd2a94\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191IoT\u7aef\u672b\u7b49\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\",\"info\":\"\",\"x\":237.4285430908203,\"y\":225.46437644958496,\"wires\":[]},{\"id\":\"d987c196.26784\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u8868\u524a\u9664\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":146.2499885559082,\"y\":89.39282989501953,\"wires\":[[\"7ab2ca59.854d34\"]]},{\"id\":\"7ab2ca59.854d34\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"DROP TABLE TMP;\",\"params\":\"\",\"name\":\"DROP TABLE\",\"x\":294.2499885559082,\"y\":89.39282989501953,\"wires\":[[\"a0547bb4.5fab88\"]]},{\"id\":\"a0547bb4.5fab88\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"[]\u304c\u51fa\u529b\u3055\u308c\u308c\u3070\u6210\u529f\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":500.2499885559082,\"y\":89.39282989501953,\"wires\":[]},{\"id\":\"8bead6df.741528\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u8868\u4f5c\u6210\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":145,\"y\":42.14285659790039,\"wires\":[[\"3449d1ee.cbb62e\"]]},{\"id\":\"3449d1ee.cbb62e\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"CREATE TABLE TMP (DATA VARCHAR(255));\",\"params\":\"\",\"name\":\"CREATE TABLE\",\"x\":300,\"y\":42.14285659790039,\"wires\":[[\"93dc73d3.6c239\"]]},{\"id\":\"93dc73d3.6c239\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"[]\u304c\u51fa\u529b\u3055\u308c\u308c\u3070\u6210\u529f\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":499,\"y\":42.14285659790039,\"wires\":[]}]\n\nUI & API\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"3675bb25.c98a44\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"UI pattern\",\"info\":\"\",\"x\":129.4008445739746,\"y\":410.96428298950195,\"wires\":[]},{\"id\":\"9f7d159f.6082e8\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/output\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":135.67858123779297,\"y\":539.1587057113647,\"wires\":[[\"15ee7da3.ea1182\"]]},{\"id\":\"15ee7da3.ea1182\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\u7528URL\u4f5c\u6210\",\"func\":\"msg.url = msg.req.host + \\\"/api?q=\\\" + encodeURI(msg.payload.q);\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":313.24999237060547,\"y\":539.2538747787476,\"wires\":[[\"b6619f87.499e6\"]]},{\"id\":\"b6619f87.499e6\",\"type\":\"http request\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"\",\"x\":488.53580474853516,\"y\":538.5872087478638,\"wires\":[[\"c58cb91a.3a7348\"]]},{\"id\":\"6260006b.9da\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":590.7738914489746,\"y\":636.6824054718018,\"wires\":[]},{\"id\":\"c58cb91a.3a7348\",\"type\":\"change\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"headers\u524a\u9664\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":299.96350479125977,\"y\":636.7300310134888,\"wires\":[[\"1e70abb0.e18f54\"]]},{\"id\":\"1e70abb0.e18f54\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u51fa\u529bHTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY>\\n\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u6570\u306f{{payload.1}}\u3067\u3059\u3002\\n</BODY></HTML>\",\"x\":448.6785888671875,\"y\":636.8253183364868,\"wires\":[[\"6260006b.9da\"]]},{\"id\":\"fbe35ede.041ca\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":485.9169235229492,\"y\":456.96418952941895,\"wires\":[]},{\"id\":\"f2694ba7.0d96b8\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/input\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":132.58342742919922,\"y\":456.964204788208,\"wires\":[[\"302a43fd.cfd5bc\"]]},{\"id\":\"302a43fd.cfd5bc\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u5165\u529b\u30d5\u30a9\u30fc\u30e0HTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY><FORM method='GET' action='output'>\\n\u30c6\u30fc\u30d6\u30eb\u540d:<INPUT type='text' name='q' value='TMP'>\\n<INPUT type='submit'>\\n</FORM></BODY></HTML>\",\"x\":308.2501106262207,\"y\":456.6308391094208,\"wires\":[[\"fbe35ede.041ca\"]]},{\"id\":\"fc025f83.03fda\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/api\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":128.0395851135254,\"y\":779.4920873641968,\"wires\":[[\"c132f98c.3ecd08\"]]},{\"id\":\"e3c106e6.1c3ef8\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":557.9286231994629,\"y\":779.2063293457031,\"wires\":[]},{\"id\":\"43292e38.bcd6d\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API pattern\",\"info\":\"\",\"x\":135.40087890625,\"y\":732.3809695243835,\"wires\":[]},{\"id\":\"dda5c57a.225a38\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u4e0b\u306eAPI\u306b\u554f\u5408\u308f\u305b\u3001\u7d50\u679c\u53d6\u5f97\",\"info\":\"\",\"x\":533.6508865356445,\"y\":498.1310005187988,\"wires\":[]},{\"id\":\"2ed4fa3d.d12b06\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\u3067\u30d8\u30c3\u30c0\u304c\u66f8\u63db\u308f\u308b\u305f\u3081\u524a\u9664\u2191\",\"info\":\"\",\"x\":221.1508331298828,\"y\":679.3809394836426,\"wires\":[]},{\"id\":\"268a49c.fd975b6\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u5024(\u691c\u7d22\u30ef\u30fc\u30c9\u7b49)\u3092\u53d7\u4ed8\u3051\u3001\u4e0b\u306eGET\u5b9f\u884c\",\"info\":\"\",\"x\":462.40087890625,\"y\":414.7976396083832,\"wires\":[]},{\"id\":\"8b1381be.74ec8\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191API\u53d6\u5f97\u7d50\u679c\u3092\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u8868\u793a\",\"info\":\"\",\"x\":526.4842071533203,\"y\":678.880937576294,\"wires\":[]},{\"id\":\"b8e79c46.47186\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u304b\u3089API\u554f\u5408\u305b\u7528URL\u4f5c\u6210\u2193\",\"info\":\"\",\"x\":224.65087890625,\"y\":498.4643135070801,\"wires\":[]},{\"id\":\"e4473af4.1bb8c8\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191\u30e6\u30fc\u30b6\u304c\u5165\u529b\u3057\u305f\u5024\u3092\u7528\u3044\u3066\u691c\u7d22\",\"info\":\"\",\"x\":496.87316131591797,\"y\":821.4841232299805,\"wires\":[]},{\"id\":\"c132f98c.3ecd08\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"SQL\u6587\u4f5c\u6210\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"SELECT COUNT(*) FROM {{payload.q}};\",\"x\":267.71427154541016,\"y\":779.4285669326782,\"wires\":[[\"e8426a37.17bd98\"]]},{\"id\":\"e8426a37.17bd98\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"\",\"params\":\"\",\"name\":\"DB\u3092\u691c\u7d22\",\"x\":414.1508026123047,\"y\":778.8730506896973,\"wires\":[[\"e3c106e6.1c3ef8\"]]}]\n\nTimeout\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"efd2874f.102d78\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Timeout pattern\",\"info\":\"\",\"x\":121,\"y\":991,\"wires\":[]},{\"id\":\"55fe0f56.aa01f\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"5\u79d2\u4ee5\u5185\u306b\u691c\u7d22\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u691c\u7d22\u7d50\u679c\u3092\u8868\u793a\u2193\",\"info\":\"\",\"x\":251.50000762939453,\"y\":1040.999979019165,\"wires\":[]},{\"id\":\"9f162cbb.60e9d\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u691c\u7d22\u304c5\u79d2\u4ee5\u4e0a\u304b\u304b\u3063\u305f\u3089\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u300c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u300d\u3068\u8868\u793a\u2191\",\"info\":\"\",\"x\":286,\"y\":1269.8333740234375,\"wires\":[]},{\"id\":\"1cc5725.fe33a8e\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/output\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":114,\"y\":1088,\"wires\":[[\"ae6de02b.51922\",\"570e59a7.a8f1a8\"]]},{\"id\":\"ae6de02b.51922\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\u7528URL\u4f5c\u6210\",\"func\":\"msg.url = msg.req.host + \\\"/api?q=\\\" + encodeURI(msg.payload.q);\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":291.5714111328125,\"y\":1088.0951690673828,\"wires\":[[\"c15452cb.3eabb\"]]},{\"id\":\"c15452cb.3eabb\",\"type\":\"http request\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"\",\"x\":466.8572235107422,\"y\":1087.428503036499,\"wires\":[[\"a1c844c3.5e37b8\"]]},{\"id\":\"3a14a3b7.c5eb5c\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":603.0953102111816,\"y\":1185.523699760437,\"wires\":[]},{\"id\":\"a1c844c3.5e37b8\",\"type\":\"change\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"headers\u524a\u9664\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":312.2849235534668,\"y\":1185.571325302124,\"wires\":[[\"43ea4055.bc15c\"]]},{\"id\":\"43ea4055.bc15c\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u51fa\u529bHTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY>\\n\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u6570\u306f{{payload.1}}\u3067\u3059\u3002\\n</BODY></HTML>\",\"x\":461.00000762939453,\"y\":1185.666612625122,\"wires\":[[\"3a14a3b7.c5eb5c\"]]},{\"id\":\"570e59a7.a8f1a8\",\"type\":\"delay\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"5\u79d2\u9593\u5f85\u6a5f\",\"pauseType\":\"delay\",\"timeout\":\"5\",\"timeoutUnits\":\"seconds\",\"rate\":\"1\",\"rateUnits\":\"second\",\"randomFirst\":\"1\",\"randomLast\":\"5\",\"randomUnits\":\"seconds\",\"drop\":false,\"x\":248.32141876220703,\"y\":1228.8412942886353,\"wires\":[[\"4eb3d9c9.b14c28\"]]},{\"id\":\"4eb3d9c9.b14c28\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u8868\u793aHTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY>\\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u3002\\n</BODY></HTML>\",\"x\":428.32141876220703,\"y\":1228.8412942886353,\"wires\":[[\"3a14a3b7.c5eb5c\"]]}]\n\nwhile\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"7a1c913a.85e37\",\"type\":\"template\",\"z\":\"bb0998cf.44f668\",\"name\":\"i=0\",\"field\":\"i\",\"format\":\"handlebars\",\"template\":\"0\",\"x\":320,\"y\":3680,\"wires\":[[\"4047b441.bfb84c\"]]},{\"id\":\"4047b441.bfb84c\",\"type\":\"switch\",\"z\":\"bb0998cf.44f668\",\"name\":\"i<4\",\"property\":\"i\",\"rules\":[{\"t\":\"lt\",\"v\":\"4\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":458,\"y\":3680,\"wires\":[[\"43f621ff.bc09e\"],[\"dcb4322f.234bd\"]]},{\"id\":\"2a1ad095.d5e53\",\"type\":\"function\",\"z\":\"bb0998cf.44f668\",\"name\":\"i++\",\"func\":\"msg.i++;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":564,\"y\":3585,\"wires\":[[\"4047b441.bfb84c\"]]},{\"id\":\"44dbc2cb.bb243c\",\"type\":\"debug\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u7d42\u4e86\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":805,\"y\":3731,\"wires\":[]},{\"id\":\"83af8aec.7c5078\",\"type\":\"debug\",\"z\":\"bb0998cf.44f668\",\"name\":\"\\\"i\u56de\u76ee\\\"\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":821.3999633789062,\"y\":3681.066650390625,\"wires\":[]},{\"id\":\"822328ae.7ddcd8\",\"type\":\"inject\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u958b\u59cb\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":201.89581298828125,\"y\":3679.888916015625,\"wires\":[[\"7a1c913a.85e37\"]]},{\"id\":\"a144ddbc.5ebb2\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"while pattern\",\"info\":\"\",\"x\":193.16665649414062,\"y\":3584.5556116104126,\"wires\":[]},{\"id\":\"705c90e.f8fa37\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u21934\u56de\u51fa\u529b\u3055\u308c\u308b\",\"info\":\"\",\"x\":841.9999389648438,\"y\":3639.166615486145,\"wires\":[]},{\"id\":\"8e84d3d2.717b3\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"while\u306e\u6761\u4ef6\u6587\u2191\",\"info\":\"\",\"x\":410.66666412353516,\"y\":3720.6666402816772,\"wires\":[]},{\"id\":\"56a6728c.a9598c\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u305b\u308b\u5024i\u3092\u521d\u671f\u5316\u2193\",\"info\":\"\",\"x\":248.16665649414062,\"y\":3637.1667013168335,\"wires\":[]},{\"id\":\"c68932e9.3976d\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u2190\u5024i\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\",\"info\":\"\",\"x\":736.4999694824219,\"y\":3585.3333740234375,\"wires\":[]},{\"id\":\"dcb4322f.234bd\",\"type\":\"template\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u30eb\u30fc\u30d7\u5f8c\u306e\u51e6\u7406\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"\u30eb\u30fc\u30d7\u7d42\u4e86\",\"x\":613.2380752563477,\"y\":3730.869017601013,\"wires\":[[\"44dbc2cb.bb243c\"]]},{\"id\":\"43f621ff.bc09e\",\"type\":\"template\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u6587\u5b57\u5217\\\"i\u56de\u76ee\\\"\u3092\u751f\u6210\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"{{i}}\u56de\u76ee\",\"x\":624.9999694824219,\"y\":3681,\"wires\":[[\"83af8aec.7c5078\",\"2a1ad095.d5e53\"]]}]\n\nSequence\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"79318ef6.86ce7\",\"type\":\"comment\",\"name\":\"Sequence pattern\",\"info\":\"\",\"x\":157.92858123779297,\"y\":1925.464274406433,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"98e06bb0.671f98\",\"type\":\"function\",\"name\":\"payload=451\",\"func\":\"msg.payload = 451;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":397.5952453613281,\"y\":1969.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"a589e119.5a762\"]]},{\"id\":\"11977bd5.ee6884\",\"type\":\"function\",\"name\":\"tmp\u3068payload\u306e\u5408\u8a08\u7b97\u51fa\",\"func\":\"msg.payload = msg.tmp + msg.payload;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":592.5952453613281,\"y\":2052.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"2e654056.d19ac\"]]},{\"id\":\"2f1d71c.fd0e28e\",\"type\":\"function\",\"name\":\"payload=326\",\"func\":\"msg.payload = 326;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":397.5952453613281,\"y\":2052.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"11977bd5.ee6884\"]]},{\"id\":\"2e654056.d19ac\",\"type\":\"debug\",\"name\":\"777\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":777.5952453613281,\"y\":2052.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"8e353c9e.71cac\",\"type\":\"inject\",\"name\":\"2\u5024\u306e\u548c\u3092\u6c42\u3081\u308b\u8a08\u7b97\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":205.59524536132812,\"y\":1969.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"98e06bb0.671f98\"]]},{\"id\":\"a589e119.5a762\",\"type\":\"function\",\"name\":\"tmp=payload\",\"func\":\"msg.tmp = msg.payload;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":556.5952453613281,\"y\":1969.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"2f1d71c.fd0e28e\"]]},{\"id\":\"bdfd8572.420278\",\"type\":\"comment\",\"name\":\"\u2193\u5024\u3092\u5225\u306e\u5909\u6570tmp\u3078\u9000\u907f\",\"info\":\"\",\"x\":622.0951766967773,\"y\":1925.297646522522,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"f3c44263.0c3bc\",\"type\":\"comment\",\"name\":\"\u2193\uff11\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":394.09525299072266,\"y\":1926.1309614181519,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"9c2a1dca.63d5e\",\"type\":\"comment\",\"name\":\"\u21912\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":396.59523010253906,\"y\":2096.4642181396484,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"1cfe4562.e301bb\",\"type\":\"comment\",\"name\":\"\u2191\u9000\u907f\u3057\u305f\u5024tmp\u3068payload\u306e\u548c\u3092\u8a08\u7b97\",\"info\":\"\",\"x\":692.0952377319336,\"y\":2096.464339733124,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]}]\n\nAggregator\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"fe9c117e.0163f\",\"type\":\"comment\",\"name\":\"Aggregator pattern\",\"info\":\"\",\"x\":161.42858123779297,\"y\":2204.630959510803,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"9e0268f7.61fd98\",\"type\":\"function\",\"name\":\"payload=451\",\"func\":\"msg.payload = 451;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":432.26187896728516,\"y\":2288.131070137024,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"af493597.50b6c8\"]]},{\"id\":\"af493597.50b6c8\",\"type\":\"function\",\"name\":\"2\u3064\u306epayload\u306e\u5408\u8a08\u7b97\u51fa\",\"func\":\"// \u5165\u529b\u6570\u3092\u6e1b\u3089\u3059\\ncontext.global.n--;\\n\\n// msg.payload\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\\ncontext.global.data[context.global.n] = msg.payload;\\n\\n// \u5b9a\u7fa9\u3057\u305f\u5165\u529b\u6570\u304c\u6765\u305f\u3089\u3001\u96c6\u8a08\u51e6\u7406\u3092\u884c\u3044\u3001msg.payload\u3092\u8fd4\u3059\\nif (context.global.n === 0)\\n{   // msg.payload\u306e\u5408\u8a08\u5024\u3092\u7b97\u51fa\\n    var sum = 0;\\n    for (var i = 0; i < context.global.data.length; i++)\\n    {\\n        sum += context.global.data[i];\\n    }\\n    msg.payload = sum;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":640.2619247436523,\"y\":2311.131094932556,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"c2d9368.f3d26c8\"]]},{\"id\":\"72d62625.8d29d8\",\"type\":\"function\",\"name\":\"payload=326\",\"func\":\"msg.payload = 326;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":431.26190185546875,\"y\":2336.13108253479,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"af493597.50b6c8\"]]},{\"id\":\"c2d9368.f3d26c8\",\"type\":\"debug\",\"name\":\"777\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":822.2619018554688,\"y\":2312.13108253479,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"a8ee0b2c.5711f8\",\"type\":\"function\",\"name\":\"\u4e26\u5217\u6570=2\",\"func\":\"context.global.n = 2;\\ncontext.global.data = new Array(2);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":271.26190185546875,\"y\":2313.13108253479,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"9e0268f7.61fd98\",\"72d62625.8d29d8\"]]},{\"id\":\"39431b6c.c6bce4\",\"type\":\"comment\",\"name\":\"\u2193\uff11\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":431.0083923339844,\"y\":2249.7051458358765,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"1f653d.ffe09ac3\",\"type\":\"inject\",\"name\":\"2\u5024\u306e\u548c\u3092\u6c42\u3081\u308b\u8a08\u7b97\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":205.31793975830078,\"y\":2249.8241748809814,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"a8ee0b2c.5711f8\"]]},{\"id\":\"1c32a960.e3cd57\",\"type\":\"comment\",\"name\":\"\u21912\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":429.8417434692383,\"y\":2376.7050580978394,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"f30cf9d4.0cf308\",\"type\":\"comment\",\"name\":\"\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u4e26\u5217\u6570\u3092\u5b9a\u7fa9\u2191\",\"info\":\"\",\"x\":201.7702865600586,\"y\":2356.2525358200073,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"bee9177f.4116e8\",\"type\":\"comment\",\"name\":\"\u2191\u4e26\u5217\u6570\u5206\u306e\u5165\u529b\u304c\u6765\u305f\u5f8c\u3001\u548c\u3092\u8a08\u7b97\",\"info\":\"\",\"x\":743.3417587280273,\"y\":2353.5384435653687,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]}]\n\nSeparator\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"1419e877.ebe618\",\"type\":\"inject\",\"name\":\"\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":155.0952377319336,\"y\":2485.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"8f4d7d43.70b28\"]]},{\"id\":\"8f4d7d43.70b28\",\"type\":\"function\",\"name\":\"1\u3064\u76ee\u306b451\u30012\u3064\u76ee\u306b326\u3092\u51fa\u529b\",\"func\":\"msg.payload = 451;\\nvar msg2 = {};\\nmsg2.payload = 326;\\n\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":349.0952377319336,\"y\":2485.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"a69d939d.59627\"],[\"ace2220e.531de\"]]},{\"id\":\"a69d939d.59627\",\"type\":\"debug\",\"name\":\"451\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":562.0952377319336,\"y\":2458.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"ace2220e.531de\",\"type\":\"debug\",\"name\":\"326\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":560.0952377319336,\"y\":2511.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"b1c243df.4e3dc\",\"type\":\"comment\",\"name\":\"Separator pattern\",\"info\":\"\",\"x\":157.42858123779297,\"y\":2441.2976331710815,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"fba005.ff045ff8\",\"type\":\"comment\",\"name\":\"\u21911\u30ce\u30fc\u30c9\u304b\u3089\u7570\u306a\u308b2\u5024\u3092\u51fa\u529b\",\"info\":\"\",\"x\":349.0083770751953,\"y\":2530.223530769348,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]}]\n\nMapReduce\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"42f22b03.bd0dd4\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"WordCount\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":169.98413848876953,\"y\":2499.5753602981567,\"wires\":[[\"b48a3afc.4b75c8\"]]},{\"id\":\"1f8c6771.e07399\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u51e6\u7406\",\"func\":\"var input = msg.payload.toLowerCase()\\n                       .replace( /\\\\.$/, \\\"\\\")\\n                       .split(/ |, /);\\n// Map\\nvar key_value = [];\\nfor (var i=0; i<input.length; i++)\\n{\\n    var key = input[i];\\n    if (key in key_value)\\n    {\\n        key_value[key]++;\\n    } else {\\n        key_value[key] = 1;\\n    }\\n}\\n\\n// Shuffle\\nvar key1_value = [];\\nvar key2_value = [];\\nfor (var key in key_value)\\n{\\n    if ('a'<=key[0] && key[0]<='m')\\n    {\\n        key1_value.push([key, key_value[key]]);\\n    } else {\\n        key2_value.push([key, key_value[key]]);\\n    }\\n}\\n\\nmsg.payload = key1_value;\\nvar msg2 = {};\\nmsg2.payload = key2_value;\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":469.98413848876953,\"y\":2534.575316429138,\"wires\":[[\"9fe7f7de.601808\"],[\"8582eef5.7a7d1\"]]},{\"id\":\"9fe7f7de.601808\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Reduce\u51e6\u7406\",\"func\":\"// \u5165\u529b\u6570\u3092\u6e1b\u3089\u3059\\ncontext.global.n1--;\\n\\n// msg.payload\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\\ncontext.global.data1[context.global.n1] = msg.payload;\\n\\n// \u5b9a\u7fa9\u3057\u305f\u5165\u529b\u6570\u304c\u6765\u305f\u3089\u3001\u96c6\u8a08\u51e6\u7406\u3092\u884c\u3044\u3001msg.payload\u3092\u8fd4\u3059\\nif (context.global.n1 === 0)\\n{   // msg.payload\u306e\u5408\u8a08\u5024\u3092\u7b97\u51fa\\n    var tmp = [];\\n    for (var i=0; i<context.global.data1.length; i++)\\n    {\\n        var input = context.global.data1[i];\\n        for (var j=0; j<input.length; j++)\\n        {\\n            var key = input[j][0];\\n            var value = input[j][1];\\n            if (key in tmp)\\n            {\\n                tmp[key] += value;\\n            } else {\\n                tmp[key] = value;\\n            }\\n        }\\n    }\\n    \\n    var output = [];\\n    for (var key in tmp)\\n    {\\n        output.push([key, tmp[key]]);\\n    }\\n    msg.payload = output;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":677.9841384887695,\"y\":2549.575316429138,\"wires\":[[\"9c431c80.63bce\"]]},{\"id\":\"9c431c80.63bce\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u7d50\u679c\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":817.9841384887695,\"y\":2549.575316429138,\"wires\":[]},{\"id\":\"b48a3afc.4b75c8\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u6570=3\",\"func\":\"var map = 3; // Map\u6570\u3092\u5b9a\u7fa9\\n\\ncontext.global.n1 = map;\\ncontext.global.data1 = new Array(map);\\n\\ncontext.global.n2 = map;\\ncontext.global.data2 = new Array(map);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":156.98413848876953,\"y\":2580.575316429138,\"wires\":[[\"b309b836.4cf648\",\"3d3d88ef.c2c278\",\"fe5a1ff0.01a5e\"]]},{\"id\":\"b309b836.4cf648\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"This is a pen.\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"This is a pen.\",\"x\":325.98413848876953,\"y\":2534.575316429138,\"wires\":[[\"1f8c6771.e07399\"]]},{\"id\":\"8582eef5.7a7d1\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Reduce\u51e6\u7406\",\"func\":\"// \u5165\u529b\u6570\u3092\u6e1b\u3089\u3059\\ncontext.global.n2--;\\n\\n// msg.payload\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\\ncontext.global.data2[context.global.n2] = msg.payload;\\n\\n// \u5b9a\u7fa9\u3057\u305f\u5165\u529b\u6570\u304c\u6765\u305f\u3089\u3001\u96c6\u8a08\u51e6\u7406\u3092\u884c\u3044\u3001msg.payload\u3092\u8fd4\u3059\\nif (context.global.n2 === 0)\\n{   // msg.payload\u306e\u5408\u8a08\u5024\u3092\u7b97\u51fa\\n    var tmp = [];\\n    for (var i=0; i<context.global.data2.length; i++)\\n    {\\n        var input = context.global.data2[i];\\n        for (var j=0; j<input.length; j++)\\n        {\\n            var key = input[j][0];\\n            var value = input[j][1];\\n            if (key in tmp)\\n            {\\n                tmp[key] += value;\\n            } else {\\n                tmp[key] = value;\\n            }\\n        }\\n    }\\n    \\n    var output = [];\\n    for (var key in tmp)\\n    {\\n        output.push([key, tmp[key]]);\\n    }\\n    msg.payload = output;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":679.9841384887695,\"y\":2601.575316429138,\"wires\":[[\"1b1d3a66.e4e2c6\"]]},{\"id\":\"1b1d3a66.e4e2c6\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u7d50\u679c\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":818.9841384887695,\"y\":2601.575316429138,\"wires\":[]},{\"id\":\"b931daa2.46ce28\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u51e6\u7406\",\"func\":\"var input = msg.payload.toLowerCase()\\n                       .replace( /\\\\.$/, \\\"\\\")\\n                       .split(/ |, /);\\n// Map\\nvar key_value = [];\\nfor (var i=0; i<input.length; i++)\\n{\\n    var key = input[i];\\n    if (key in key_value)\\n    {\\n        key_value[key]++;\\n    } else {\\n        key_value[key] = 1;\\n    }\\n}\\n\\n// Shuffle\\nvar key1_value = [];\\nvar key2_value = [];\\nfor (var key in key_value)\\n{\\n    if ('a'<=key[0] && key[0]<='m')\\n    {\\n        key1_value.push([key, key_value[key]]);\\n    } else {\\n        key2_value.push([key, key_value[key]]);\\n    }\\n}\\n\\nmsg.payload = key1_value;\\nvar msg2 = {};\\nmsg2.payload = key2_value;\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":470.98413848876953,\"y\":2580.575316429138,\"wires\":[[\"9fe7f7de.601808\"],[\"8582eef5.7a7d1\"]]},{\"id\":\"83ed63.ff7c12a\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u51e6\u7406\",\"func\":\"var input = msg.payload.toLowerCase()\\n                       .replace( /\\\\.$/, \\\"\\\")\\n                       .split(/ |, /);\\n// Map\\nvar key_value = [];\\nfor (var i=0; i<input.length; i++)\\n{\\n    var key = input[i];\\n    if (key in key_value)\\n    {\\n        key_value[key]++;\\n    } else {\\n        key_value[key] = 1;\\n    }\\n}\\n\\n// Shuffle\\nvar key1_value = [];\\nvar key2_value = [];\\nfor (var key in key_value)\\n{\\n    if ('a'<=key[0] && key[0]<='m')\\n    {\\n        key1_value.push([key, key_value[key]]);\\n    } else {\\n        key2_value.push([key, key_value[key]]);\\n    }\\n}\\n\\nmsg.payload = key1_value;\\nvar msg2 = {};\\nmsg2.payload = key2_value;\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":471.98413848876953,\"y\":2626.575316429138,\"wires\":[[\"9fe7f7de.601808\"],[\"8582eef5.7a7d1\"]]},{\"id\":\"3d3d88ef.c2c278\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Give me a pen.\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"Give me a pen.\",\"x\":320.98413848876953,\"y\":2580.575316429138,\"wires\":[[\"b931daa2.46ce28\"]]},{\"id\":\"fe5a1ff0.01a5e\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"This pen is small.\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"This pen is small.\",\"x\":313.98413848876953,\"y\":2626.575316429138,\"wires\":[[\"83ed63.ff7c12a\"]]},{\"id\":\"f78466af.087b98\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"MapReduce pattern\",\"info\":\"\",\"x\":156.98413848876953,\"y\":2455.575316429138,\"wires\":[]},{\"id\":\"42607f4e.bd9f8\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u6570\u3092\u5b9a\u7fa9\u2191\",\"info\":\"\",\"x\":140.89732360839844,\"y\":2623.001223564148,\"wires\":[]},{\"id\":\"c5857142.3a7a9\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u51e6\u7406\u5bfe\u8c61\u306e\u5165\u529b\u30c7\u30fc\u30bf\",\"info\":\"\",\"x\":394.06397247314453,\"y\":2493.001136779785,\"wires\":[]},{\"id\":\"4f68dbe2.b09724\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191\u5358\u8a9e\u3092key\u3001\u51fa\u73fe\u56de\u6570\u3092value\u3068\u3057\u3001Reduce\u51e6\u7406\u306b\u6e21\u3059\",\"info\":\"\",\"x\":628.3972625732422,\"y\":2668.426999092102,\"wires\":[]},{\"id\":\"a8da3026.5725d\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u540c\u3058\u5358\u8a9e\u306e\u51fa\u73fe\u56de\u6570\u306e\u548c\u3092\u6c42\u3081\u308b\",\"info\":\"\",\"x\":766.5639495849609,\"y\":2507.093747138977,\"wires\":[]},{\"id\":\"9a92b61d.656d48\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u6570\u5206\u306e\u5165\u529b\u5f8c\u3001\",\"info\":\"\",\"x\":722.4841384887695,\"y\":2475.4919862747192,\"wires\":[]}]\n\nMatcher\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"7687ce5.f89783\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"Matcher pattern\",\"info\":\"\",\"x\":242.1428680419922,\"y\":1595,\"wires\":[]},{\"id\":\"b6a262bc.495da\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"The man walked.\",\"topic\":\"\",\"payload\":\"The man walked.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":268.9120903015137,\"y\":1671.5384359359741,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"c7a58590.385a78\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":696.1428375244141,\"y\":1651,\"wires\":[[\"1728a714.e8d759\"]]},{\"id\":\"1924ffc2.e6db\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u6587\u5b57\u5217\u3092\u914d\u5217\u5316\",\"func\":\"msg.payload = msg.payload.toLowerCase()\\n                         .replace( /\\\\.$/, \\\"\\\")\\n                         .split(/ |, /);\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":468.1428680419922,\"y\":1595,\"wires\":[[\"c7a58590.385a78\",\"c192fb64.3e6d08\"]]},{\"id\":\"dc6551e9.239ab\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"He looks tired.\",\"topic\":\"\",\"payload\":\"He looks tired.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":263.3736763000488,\"y\":1729.0768766403198,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"585038d7.a7afc8\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"I bought a book.\",\"topic\":\"\",\"payload\":\"I bought a book.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":270.9121513366699,\"y\":1789.5385160446167,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"f026e64.f0fd918\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":636.1428604125977,\"y\":1785.000012397766,\"wires\":[[\"379c9674.c8636a\"]]},{\"id\":\"1728a714.e8d759\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u52d5\u8a5e\",\"func\":\"var words = [\\\"walked\\\", \\\"believe\\\", \\\"send\\\", \\\"bought\\\", \\\"looks\\\", \\\"is\\\", \\\"give\\\", \\\"leaning\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":490.14286041259766,\"y\":1727.000012397766,\"wires\":[[\"e7510579.18aef8\",\"a88b7b5f.577488\",\"f026e64.f0fd918\",\"2808b0e2.d7f75\",\"379c9674.c8636a\",\"98b13a81.674ec8\"]]},{\"id\":\"e7510579.18aef8\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c1\u6587\u578bSV\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c1\u6587\u578bSV\",\"x\":969.1428985595703,\"y\":1669,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"912cace1.6ed35\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c2\u6587\u578bSVC\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c2\u6587\u578bSVC\",\"x\":972.1428985595703,\"y\":1725,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"a88b7b5f.577488\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5f62\u5bb9\u8a5e\",\"func\":\"var words = [\\\"tall\\\", \\\"innocent\\\", \\\"tired\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":824.1428604125977,\"y\":1725.000012397766,\"wires\":[[\"912cace1.6ed35\"]]},{\"id\":\"95aa6b7c.6a5598\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"I send her an e-mail.\",\"topic\":\"\",\"payload\":\"I send her an e-mail.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":284.47625255584717,\"y\":1848.8462619781494,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"f96a1b74.0695e8\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"I believe him innocent.\",\"topic\":\"\",\"payload\":\"I believe him innocent.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":291.6814155578613,\"y\":1904.4615726470947,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"50b8bf36.af474\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c3\u6587\u578bSVO\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c3\u6587\u578bSVO\",\"x\":971.1428985595703,\"y\":1786,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"43aedca2.bc5124\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c4\u6587\u578bSVOO\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c4\u6587\u578bSVOO\",\"x\":975.1428604125977,\"y\":1845.000012397766,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"bef90a4e.4106f8\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c5\u6587\u578bSVOC\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c5\u6587\u578bSVOC\",\"x\":975.1428604125977,\"y\":1902.000012397766,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"379c9674.c8636a\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":824.1428604125977,\"y\":1786.000012397766,\"wires\":[[\"50b8bf36.af474\"]]},{\"id\":\"c192fb64.3e6d08\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":490.1428680419922,\"y\":1651,\"wires\":[[\"c7a58590.385a78\"]]},{\"id\":\"2808b0e2.d7f75\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":485.1428680419922,\"y\":1832,\"wires\":[[\"98b13a81.674ec8\"]]},{\"id\":\"98b13a81.674ec8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":634.1428604125977,\"y\":1833.000012397766,\"wires\":[[\"d11f2b1.f2ee0d8\",\"6d503b99.92afc4\",\"dbf80aa8.2407f8\"]]},{\"id\":\"d11f2b1.f2ee0d8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":486.14286041259766,\"y\":1916.000012397766,\"wires\":[[\"6d503b99.92afc4\"]]},{\"id\":\"6d503b99.92afc4\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":632.1428604125977,\"y\":1916.000012397766,\"wires\":[[\"43aedca2.bc5124\"]]},{\"id\":\"dbf80aa8.2407f8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5f62\u5bb9\u8a5e\",\"func\":\"var words = [\\\"tall\\\", \\\"innocent\\\", \\\"tired\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":834.1428375244141,\"y\":1902,\"wires\":[[\"bef90a4e.4106f8\"]]},{\"id\":\"72a20087.8d5e\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u6587\u578b\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload2\",\"x\":1178.0387725830078,\"y\":1850.5556640625,\"wires\":[]},{\"id\":\"ca202d62.35dfd\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5168\u3066\u63a2\u7d22\u6e08\uff1f\",\"func\":\"var input = msg.payload;\\n\\nif (input.length === 0)\\n{\\n    return msg;    \\n}\\n\",\"outputs\":1,\"noerr\":0,\"x\":1169.884864807129,\"y\":1667.8633785247803,\"wires\":[[\"72a20087.8d5e\"]]},{\"id\":\"b949bd7e.46b64\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5168\u30ce\u30fc\u30c9\u3092\u63a2\u7d22\u3057\u3066\u3044\u308b\u5834\u5408\u306e\u307f\u3001\u6b21\u306e\u30ce\u30fc\u30c9\u306b\u6e21\u3059\u2193\",\"info\":\"\",\"x\":1008.3464660644531,\"y\":1626.128547668457,\"wires\":[]},{\"id\":\"caf9b247.35065\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u2191\u5148\u982d\u306e\u5358\u8a9e\u306e\u54c1\u8a5e\u304c\u4e00\u81f4\u3057\u305f\u5834\u5408\u3001\u5358\u8a9e\u3092\u524a\u9664\u3057\u6b21\u306e\u30ce\u30fc\u30c9\u306b\u6e21\u3059\",\"info\":\"\",\"x\":648.8148651123047,\"y\":1957.1712636947632,\"wires\":[]},{\"id\":\"7ff77a03.800884\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u2191\u6587\u578b\u3092\u5224\u5b9a\u3059\u308b\u6587\u5b57\u5217\",\"info\":\"\",\"x\":294.47298431396484,\"y\":1945.8632011413574,\"wires\":[]},{\"id\":\"bdf91fcc.4206e\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u2191\u5224\u5b9a\u3057\u305f\u6587\u578b\",\"info\":\"\",\"x\":1003.1908950805664,\"y\":1943.487506866455,\"wires\":[]}]\n\nState\u30d1\u30bf\u30fc\u30f3\n[{\"id\":\"3318e7e6.cce718\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":443.6581726074219,\"y\":1120.6715087890625,\"wires\":[[\"1ac45ea9.e53ba1\"],[\"3fd52c9e.c02ad4\"],[\"5a961aa8.a569e4\"]]},{\"id\":\"8ffd81f1.70028\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"0101\",\"topic\":\"\",\"payload\":\"0101\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":236.30752563476562,\"y\":1119.4175281524658,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"1ac45ea9.e53ba1\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614ba\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=a, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":400.71014404296875,\"y\":996.8587646484375,\"wires\":[[\"3318e7e6.cce718\",\"ff5f8c7.f00a07\"]]},{\"id\":\"3fd52c9e.c02ad4\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614bb\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=b, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":732.2685241699219,\"y\":997.4957275390625,\"wires\":[[\"a9be3bfd.5641c8\",\"87629f53.789d6\"]]},{\"id\":\"b2e36234.4d1ca\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614bc\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=c, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":488.1517028808594,\"y\":1217.9888916015625,\"wires\":[[\"fa4d1888.05b2e8\",\"7f91b75.f806e48\"]]},{\"id\":\"119a07f.fee65f8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614bd\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=d, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":1012.4892883300781,\"y\":1084.2862548828125,\"wires\":[[\"c054e9a8.3fab18\",\"e0f463be.1f0ba\"]]},{\"id\":\"7ff57b7c.800a84\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"-1\",\"topic\":\"\",\"payload\":\"-1\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":238.12570190429688,\"y\":1176.2861804962158,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"f993c065.066c4\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"12.2\",\"topic\":\"\",\"payload\":\"12.2\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":238.1257095336914,\"y\":1238.1046161651611,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"925dff15.6da2\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"4.5.1\",\"topic\":\"\",\"payload\":\"4.5.1\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":237.25555419921875,\"y\":1296.3514070510864,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"969fdc24.69602\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u691c\u67fb\u7d50\u679c\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":1146.7226257324219,\"y\":1337.4444580078125,\"wires\":[]},{\"id\":\"5a961aa8.a569e4\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u4e0d\u5408\u683c\u306e\u6587\u5b57\u5217\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"\u4e0d\u5408\u683c\u306e\u6587\u5b57\u5217\",\"x\":1155.2939147949219,\"y\":1286.7789306640625,\"wires\":[[\"969fdc24.69602\"]]},{\"id\":\"a9be3bfd.5641c8\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":888.6581115722656,\"y\":997.3380298614502,\"wires\":[]},{\"id\":\"ff5f8c7.f00a07\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":553.9915161132812,\"y\":997.3385009765625,\"wires\":[]},{\"id\":\"7f91b75.f806e48\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":637.6581726074219,\"y\":1218.3385009765625,\"wires\":[]},{\"id\":\"87629f53.789d6\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":754.6581726074219,\"y\":1120.6715259552002,\"wires\":[[\"5a961aa8.a569e4\"],[\"3fd52c9e.c02ad4\"],[\"b2e36234.4d1ca\"]]},{\"id\":\"fa4d1888.05b2e8\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":533.6581726074219,\"y\":1338.6715087890625,\"wires\":[[\"5a961aa8.a569e4\"],[\"119a07f.fee65f8\"],[\"5a961aa8.a569e4\"]]},{\"id\":\"c054e9a8.3fab18\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":1052.6581726074219,\"y\":1205.6715087890625,\"wires\":[[\"5a961aa8.a569e4\"],[\"119a07f.fee65f8\"],[\"5a961aa8.a569e4\"]]},{\"id\":\"e0f463be.1f0ba\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":1161.6581726074219,\"y\":1084.6715087890625,\"wires\":[]},{\"id\":\"95c14cbc.6a3eb\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"451+\",\"topic\":\"\",\"payload\":\"45+1\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":235.65817260742188,\"y\":1354.6715087890625,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"58eb4834.a714b8\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"State pattern\",\"info\":\"\",\"x\":217,\"y\":953,\"wires\":[]},{\"id\":\"b07b3995.4f84c8\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u6587\u5b57\u5217\u3092\u691c\u67fb\u3059\u308b\u305f\u3081\u306e\u72b6\u614b\u9077\u79fb\",\"info\":\"\",\"x\":433.5,\"y\":952.4287109375,\"wires\":[]},{\"id\":\"8f5096d8.70af68\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u691c\u67fb\u3059\u308b\u6587\u5b57\u5217\",\"info\":\"\",\"x\":227,\"y\":1074,\"wires\":[]}]\n\n\u79c1\u304cNode-RED\u3092\u4f7f\u3044\u59cb\u3081\u30664\u30ab\u6708\u304c\u7d4c\u3061\u307e\u3057\u305f\u3002\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3068\u3001Node-RED\u306b\u306f\u5358\u306b\u30ce\u30fc\u30c9\u3092\u6a2a\u306b\u7e4b\u3044\u3067\u3086\u304f\u3060\u3051\u3067\u306f\u306a\u304f\u3001\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u95a2\u4fc2\u3092\u6d3b\u7528\u3057\u305f\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u304c\u6ca2\u5c71\u3042\u308b\u3053\u3068\u306b\u6c17\u304c\u4ed8\u304d\u307e\u3057\u305f\u3002\n\n\u672c\u8a18\u4e8b\u3067\u306f\u3001Node-RED\u3092\u4eca\u307e\u3067\u4ee5\u4e0a\u306b\u6d3b\u7528\u3067\u304d\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f310\u500b\u3092\u3001\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\u6700\u5f8c\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u3001Bluemix\u4e0a\u306eNode-RED\u306f\u3082\u3061\u308d\u3093\u3001\u30ed\u30fc\u30ab\u30ebPC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fNode-RED\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u306e\u3067\u3001\u8cbc\u308a\u4ed8\u3051\u3066\u904a\u3093\u3067\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n#Node-RED\u3068\u306f\nNode-RED\u306f\u3001\u6a5f\u80fd\u6bce\u306b\u7528\u610f\u3055\u308c\u305f\u30ce\u30fc\u30c9\u3092\u30de\u30a6\u30b9\u3067\u7e4b\u3050\u64cd\u4f5c\u3067\u3001\u7c21\u5358\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3067\u304d\u308b\u958b\u767a\u74b0\u5883\u3067\u3059\u3002\u5f53\u521d\u306fIoT\u5411\u3051\u306b\u958b\u767a\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u958b\u767a\u7b49\u3001\u5e45\u5e83\u3044\u7528\u9014\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n#\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3068\u306f\n\u4e00\u822c\u7684\u306b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3068\u306f\u3001Java\u7b49\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u8a00\u8a9e\u3092\u4f7f\u3044\u3053\u306a\u3057\u3066\u3086\u304f\u3068\u8fbf\u308a\u7740\u304f\u3001\u958b\u767a\u3084\u5909\u66f4\u306e\u52b9\u7387\u304c\u826f\u3044\u8a2d\u8a08\u30d1\u30bf\u30fc\u30f3\u3092\u6307\u3057\u307e\u3059\u3002\u5b66\u751f\u306e\u6642\u3001\u8208\u5473\u6df1\u3044\u30d1\u30bf\u30fc\u30f3\u304c\u4f55\u500b\u304b\u5b66\u3073\u3001\u7279\u306bMediator\u3084Singleton\u30d1\u30bf\u30fc\u30f3\u306f\u76ee\u304b\u3089\u9c57\u3067\u3057\u305f\u3002\n\n#Node-RED\u306b\u304a\u3051\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\nNode-RED\u306f\u3001\u8907\u96d1\u306a\u51e6\u7406\u3092\u30ab\u30d7\u30bb\u30eb\u5316\u3057\u305f\u30ce\u30fc\u30c9\u304c\u6ca2\u5c71\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30ce\u30fc\u30c9\u3092\u7e6b\u3050\u3060\u3051\u3067\u7c21\u5358\u306b\u4e00\u9023\u306e\u51e6\u7406\u3092\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u30ce\u30fc\u30c9\u3092\u4e00\u65b9\u5411\u306b\u7e4b\u3050\u306e\u307f\u3067\u306f\u3001Node-RED\u306e\u5229\u70b9\u3092\u6d3b\u7528\u3057\u304d\u308c\u3066\u3044\u306a\u3044\u3068\u8003\u3048\u307e\u3059\u3002\n\u300c\u51e6\u7406\u306e\u30ed\u30b8\u30c3\u30af\u3092\u3001\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u95a2\u4fc2\u3067\u8a18\u8ff0\u3059\u308b\u300d\u3068\u8996\u70b9\u3092\u5909\u3048\u308b\u3068\u3001\u69d8\u3005\u306a\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u30a2\u30a4\u30c7\u30a2\u304c\u6cb8\u3044\u3066\u304d\u307e\u3057\u305f\u3002\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u308b\u3068\u3001\u4e00\u9023\u306e\u51e6\u7406\u3092\u7406\u89e3\u3057\u3084\u3059\u304f\u306a\u308a\u3001\u30ea\u30ea\u30fc\u30b9\u5f8c\u306e\u4fee\u6b63\u3082\u52b9\u7387\u7684\u306b\u884c\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n#1. Store & Search\u30d1\u30bf\u30fc\u30f3\n\u30c7\u30fc\u30bf\u306e\u683c\u7d0d\u3068\u691c\u7d22\u3092\u884c\u3046\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![store_search_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/8db9109e-2101-171a-0d4e-8d1877b0a58f.png)\n\nNode-RED\u306f\u3001IoT\u7aef\u672b\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u30c7\u30fc\u30bf\u306e\u51e6\u7406\u5411\u3051\u306b\u958b\u767a\u3055\u308c\u305f\u305f\u3081\u3001Store & Search\u30d1\u30bf\u30fc\u30f3\u306f\u4e00\u756a\u30e1\u30b8\u30e3\u30fc\u306a\u30d1\u30bf\u30fc\u30f3\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nStore\u30d1\u30bf\u30fc\u30f3\u306f\u3001IoT\u7aef\u672b\u7b49\u304b\u3089\u53d6\u5f97\u3057\u305f\u30c7\u30fc\u30bf\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u683c\u7d0d\u3057\u307e\u3059\u3002\u3053\u306e\u6642\u3001JavaScript\u3092\u8a18\u8ff0\u3059\u308b\u30ce\u30fc\u30c9\u3092\u4ecb\u3057\u3066\u3001\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u3092\u9078\u629e\u3057\u305f\u308a\u3001\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\u3059\u308b\u5217\u540d\u3092\u6307\u5b9a\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\nSearch\u30d1\u30bf\u30fc\u30f3\u306f\u3001Store\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u683c\u7d0d\u3057\u305f\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n#2. UI & API\u30d1\u30bf\u30fc\u30f3\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067API\u554f\u5408\u305b\u306b\u7528\u3044\u308b\u5165\u529b\u5024\u3092\u53d7\u3051\u4ed8\u3051\u3001API\u3092\u554f\u5408\u305b\u305f\u7d50\u679c\u3092\u8868\u793a\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![ui_api_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/757bf90e-ad84-76fd-dbfb-a0e8cc4be485.png)\n\nUI\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u8868\u793a\u7528\u51e6\u7406\u3001API\u554f\u5408\u305b\u7d50\u679c\u8868\u793a\u7528\u51e6\u7406\u306e2\u3064\u306e\u51e6\u7406\u3067\u69cb\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5165\u529b\u30d5\u30a9\u30fc\u30e0\u306eHTML\u306f\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u30e6\u30fc\u30b6\u304b\u3089\u53d7\u3051\u53d6\u3063\u305f\u5024\u3092GET\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3068\u3057\u3066\u3001API\u554f\u5408\u305b\u7d50\u679c\u8868\u793a\u7528\u51e6\u7406\u306b\u5f15\u304d\u7d99\u304e\u307e\u3059\u3002API\u554f\u5408\u305b\u7d50\u679c\u8868\u793a\u7528\u51e6\u7406\u306f\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u3092\u7528\u3044\u3066\u30a6\u30a7\u30d6API\u3092\u554f\u5408\u305b\u3001\u305d\u306e\u7d50\u679c\u3092\u8868\u793a\u7528HTML\u306b\u7d44\u307f\u8fbc\u3093\u3067\u51fa\u529b\u3057\u307e\u3059\u3002UI\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u30a6\u30a7\u30d6API\u3092\u554f\u5408\u305b\u308bUI\u3092\u4f5c\u6210\u3057\u305f\u3044\u6642\u306b\u899a\u3048\u3066\u304a\u304f\u3068\u4fbf\u5229\u3067\u3059\u3002\nAPI\u30d1\u30bf\u30fc\u30f3\u306f\u3001Node-RED\u4e0a\u3067\u6271\u3046\u30c7\u30fc\u30bf\u3092\u3001\u30a6\u30a7\u30d6API\u3068\u3057\u3066\u554f\u5408\u305b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\u51e6\u7406\u3092\u30a6\u30a7\u30d6API\u3068\u3057\u3066\u4f5c\u6210\u3057\u3066\u304a\u304f\u3068\u3001UI\u30d1\u30bf\u30fc\u30f3\u304b\u3089\u306e\u554f\u5408\u305b\u306f\u3082\u3061\u308d\u3093\u3001\u4ed6\u306e\u958b\u767a\u8a00\u8a9e\u3067\u958b\u767a\u3057\u305f\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089Node-RED\u4e0a\u306e\u51e6\u7406\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u304c\u5bb9\u6613\u3068\u306a\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001Java\u306eUI\u958b\u767a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30afVaadin\u3067UI\u3092\u958b\u767a\u3057\u3001\u5185\u90e8\u30ed\u30b8\u30c3\u30af\u306fNode-RED\u3067\u30a6\u30a7\u30d6API\u3068\u3057\u3066\u958b\u767a\u3059\u308b\u3068\u3044\u3046\u624b\u6cd5\u306f\u3001\u3068\u3066\u3082\u958b\u767a\u52b9\u7387\u304c\u826f\u304f\u30aa\u30b9\u30b9\u30e1\u3067\u3059\u3002\n\n#3. Timeout\u30d1\u30bf\u30fc\u30f3\n\u30ce\u30fc\u30c9\u306e\u51e6\u7406\u306b\u6642\u9593\u304c\u304b\u304b\u3063\u305f\u5834\u5408\u3001\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3055\u305b\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![timeout_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/e792f915-515b-8eca-6e4b-1f5ef1e028f2.png)\n\nNode-RED\u3067DB\u3084\u30a6\u30a7\u30d6API\u306b\u554f\u5408\u305b\u305f\u969b\u3001\u5fdc\u7b54\u304c\u8fd4\u3063\u3066\u6765\u305a\u3001\u51e6\u7406\u304c\u9032\u307e\u306a\u3044\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u73fe\u8c61\u306f\u3001\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u969b\u306b\u81f4\u547d\u7684\u3067\u3059\u3002\u3082\u3057\u51e6\u7406\u304c\u7d42\u7aef\u306eHTTP\u5fdc\u7b54\u30ce\u30fc\u30c9\u307e\u3067\u5230\u9054\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u3001\u30e6\u30fc\u30b6\u306e\u30d6\u30e9\u30a6\u30b6\u306f\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u72b6\u614b\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u3001\u30e6\u30fc\u30b6\u306f\u9577\u6642\u9593\u5f85\u305f\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u305d\u306e\u6642\u306f\u3001Timeout\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u3001\u6307\u5b9a\u79d2\u6570\u3067\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u3001\u300c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u300d\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3092\u8fd4\u3059\u65b9\u304c\u3001\u30e6\u30fc\u30b6\u306b\u89aa\u5207\u3067\u3059\u3002\n\n#4. while\u30d1\u30bf\u30fc\u30f3\n\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u306e\u307f\u3067\u3001while\u6587\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![while_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/163e3f24-2335-fe15-ee99-0599beeebc0d.png)\n\nJava\u7b49\u3067while\u6587\u3092\u7528\u3044\u308b\u5834\u5408\u306f\u3001\u5909\u6570i=0\u3067\u521d\u671f\u5316\u3001\u6761\u4ef6\u6587\u3067\u30eb\u30fc\u30d7\u56de\u6570\u6307\u5b9a\u3001i++\u3067\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3068\u3044\u30463\u3064\u306e\u624b\u9806\u3092\u884c\u3044\u307e\u3059\u3002Node-RED\u306b\u304a\u3051\u308bwhile\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u540c\u69d8\u306e\u624b\u9806\u3092\u884c\u3046\u521d\u671f\u5316\u30ce\u30fc\u30c9\u3001\u6761\u4ef6\u6587\u30ce\u30fc\u30c9\u3001\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u30ce\u30fc\u30c9\u306e3\u30ce\u30fc\u30c9\u304b\u3089\u69cb\u6210\u3055\u308c\u307e\u3059\u3002while\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u308b\u3068\u3001\u30eb\u30fc\u30d7\u69cb\u9020\u306e\u628a\u63e1\u304c\u5bb9\u6613\u3068\u306a\u308a\u3001\u30ea\u30ea\u30fc\u30b9\u5f8c\u306b\u30eb\u30fc\u30d7\u56de\u6570\u3092\u5909\u66f4\u3059\u308b\u4fee\u6b63\u3082\u8fc5\u901f\u306b\u884c\u3048\u307e\u3059\u3002\u3061\u306a\u307f\u306bNode-RED\u306b\u3066\u3001\u30eb\u30fc\u30d7\u51e6\u7406\u3092\u884c\u3046\u5834\u5408\u306f\u3001\u5927\u62b58\u306e\u5b57\u578b\u306e\u63a5\u7d9a\u3068\u306a\u308a\u307e\u3059\u306e\u3067\u3001\u3059\u3050\u306b\u30eb\u30fc\u30d7\u51e6\u7406\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n#5. Sequence\u30d1\u30bf\u30fc\u30f3\n\u8907\u6570\u306e\u30ce\u30fc\u30c9\u304b\u3089\u5f97\u305f\u51e6\u7406\u7d50\u679c\u3092\u3001\u96c6\u8a08\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![sequence_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/502aafb2-46a4-3439-e11e-7a8b8aa5398e.png)\n\n\u51e6\u7406\u30ce\u30fc\u30c9\u306fmsg.payload\u3092\u4ecb\u3057\u30661\u3064\u306e\u5024\u3092\u51fa\u529b\u3059\u308b\u3068\u3001\u8a2d\u8a08\u304c\u30b7\u30f3\u30d7\u30eb\u3068\u306a\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u8907\u6570\u306e\u30ce\u30fc\u30c9\u304b\u3089\u53d6\u5f97\u3057\u305f\u5024\u3092\u96c6\u8a08\u3057\u305f\u3044\u5834\u5408\u3001\u5358\u7d14\u306b\u30ce\u30fc\u30c9\u3092\u6a2a\u306b\u7e6b\u3044\u3067\u3057\u307e\u3046\u3068\u3068msg.payload\u306e\u5024\u306f\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002Sequence\u30d1\u30bf\u30fc\u30f3\u3067\u306f\u3001\u30ce\u30fc\u30c9\u304b\u3089msg.payload\u3092\u4ecb\u3057\u3066\u53d7\u3051\u53d6\u3063\u305f\u5024\u3092\u4e00\u65e6\u3001msg.tmp\u7b49\u306e\u5225\u5909\u6570\u306b\u9000\u907f\u3057\u3066\u304a\u304d\u3001\u5f8c\u7d9a\u306e\u30ce\u30fc\u30c9\u304cmsg.payload\u306b\u5024\u3092\u683c\u7d0d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u30ce\u30fc\u30c9\u304b\u3089\u5024\u3092\u53d7\u3051\u53d6\u308b\u51e6\u7406\u304c\u5168\u3066\u7d42\u4e86\u3057\u305f\u5f8c\u3001\u5225\u5909\u6570\u306b\u9000\u907f\u3057\u3066\u304a\u3044\u305f\u5024\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\u3001\u96c6\u8a08\u51e6\u7406\u3092\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\n#6. Aggregator\u30d1\u30bf\u30fc\u30f3\nSequence\u30d1\u30bf\u30fc\u30f3\u3068\u540c\u3058\u304f\u3001\u8907\u6570\u306e\u30ce\u30fc\u30c9\u304b\u3089\u5f97\u305f\u51e6\u7406\u7d50\u679c\u3092\u3001\u96c6\u8a08\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![aggregator_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/06d3e81f-ba01-5d73-075c-e94672485739.png)\n\nSequence\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u30ce\u30fc\u30c9\u3092\u6a2a\u306b\u7e4b\u3044\u3067\u3044\u304f\u306e\u307f\u3067\u3042\u308b\u305f\u3081\u3001\u51e6\u7406\u30ce\u30fc\u30c9\u304b\u3001\u5024\u3092\u5225\u5909\u6570\u306b\u9000\u907f\u3059\u308b\u30ce\u30fc\u30c9\u304b\u3092\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3092\u898b\u305f\u3060\u3051\u3067\u306f\u3001\u3059\u3050\u8b58\u5225\u3067\u304d\u307e\u305b\u3093\u3002Aggregator\u30d1\u30bf\u30fc\u30f3\u3067\u306f\u3001\u96c6\u8a08\u30ce\u30fc\u30c9\u30782\u3064\u306e\u30ce\u30fc\u30c9\u304c\u76f4\u63a5\u5024\u3092\u6e21\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3092\u898b\u308b\u3060\u3051\u3067\u76f4\u89b3\u7684\u306b\u51e6\u7406\u3092\u628a\u63e1\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001\u5225\u306e\u5229\u70b9\u3068\u3057\u3066\u3001\u8907\u6570\u306e\u30a6\u30a7\u30d6API\u306b\u554f\u5408\u305b\u305f\u7d50\u679c\u3092\u96c6\u8a08\u3059\u308b\u3088\u3046\u306a\u30b1\u30fc\u30b9\u306b\u3066\u3001\u4e26\u5217\u3057\u3066\u30a6\u30a7\u30d6API\u3078\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u304d\u308b\u305f\u3081\u3001\u51e6\u7406\u6642\u9593\u3092\u77ed\u7e2e\u3067\u304d\u308b\u7279\u5fb4\u3082\u3042\u308a\u307e\u3059\u3002\n\n#7. Separator\u30d1\u30bf\u30fc\u30f3\n1\u3064\u306e\u30ce\u30fc\u30c9\u304b\u30892\u3064\u306e\u7570\u306a\u308b\u5024\u3092\u51fa\u529b\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![separator_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/3a0b7608-d44e-6c5f-7d4e-cd6744738c25.png)\n\nAggregator\u30d1\u30bf\u30fc\u30f3\u306f\u300c2\u5165\u529b\u300d\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3042\u308b\u306e\u306b\u5bfe\u3057\u3001Separator\u30d1\u30bf\u30fc\u30f3\u306f\u300c2\u51fa\u529b\u300d\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002JavaScript\u3092\u8a18\u8ff0\u3059\u308b\u30ce\u30fc\u30c9\u306b\u3066\u3001\u30b5\u30a4\u30ba2\u306e\u914d\u5217\u3092return\u3057\u3001\u51fa\u529b\u6570\u3092\u6307\u5b9a\u3059\u308b\u306e\u307f\u3067\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\n\n#8. MapReduce\u30d1\u30bf\u30fc\u30f3\nSeparator\u30d1\u30bf\u30fc\u30f3\u3068Aggregator\u30d1\u30bf\u30fc\u30f3\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3001MapReduce\u306e\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![mapreduce_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/949d69e7-66b9-6f0a-cc2a-9c92e11b4ec8.png)\n\nMap\u51e6\u7406\u306f\u3001Separator\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002Map\u51e6\u7406\u3092\u884c\u3046\u30ce\u30fc\u30c9\u306f\u3001\u5165\u529b\u5024\u306b\u5bfe\u3057\u3066WordCount\u7b49\u306e\u51e6\u7406\u3092\u884c\u3044\u3001Key\u3092\u57fa\u306bKey-Value\u30da\u30a2\u306e\u51fa\u529b\u5148\u3092\u6c7a\u5b9a\u3057\u307e\u3059\u3002\u4e00\u65b9\u3001Reduce\u51e6\u7406\u306f\u3001Aggregator\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u8a18\u8ff0\u3057\u307e\u3059\u3002Reduce\u51e6\u7406\u3092\u884c\u3046\u30ce\u30fc\u30c9\u306f\u3001\u4e8b\u524d\u306b\u6307\u5b9a\u3057\u305fMap\u6570\u5206\u306e\u5165\u529b\u304c\u6765\u305f\u5f8c\u3001\u540c\u3058Key\u3092\u6301\u3064Value\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u96c6\u8a08\u7b49\u306e\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002Java\u7b49\u3067MapReduce\u51e6\u7406\u3092\u8a18\u8ff0\u3059\u308b\u3068\u3001\u591a\u91cd\u30eb\u30fc\u30d7\u7b49\u304c\u539f\u56e0\u3067\u8907\u96d1\u306b\u306a\u308a\u304c\u3061\u3067\u3059\u304c\u3001Node-RED\u3067\u306fMapReduce\u306e\u51e6\u7406\u30d5\u30ed\u30fc\u3092\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3068\u3057\u3066\u30b0\u30e9\u30d5\u30a3\u30ab\u30eb\u306b\u8a18\u8ff0\u3067\u304d\u308b\u305f\u3081\u3001\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u3001\u7406\u89e3\u3082\u5bb9\u6613\u3067\u3059\u3002\n\n#9. Matcher\u30d1\u30bf\u30fc\u30f3\n\u30ce\u30fc\u30c9\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3092\u63a2\u7d22\u3057\u3066\u3001\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u304b\u5224\u5b9a\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![matcher_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/861858f9-78f5-821c-4bbb-60fc0d9a75fc.png)\n\nJavaScript\u3092\u8a18\u8ff0\u3059\u308b\u30ce\u30fc\u30c9\u306f\u3001\u5024\u3092return\u3057\u306a\u3044\u3068\u5f8c\u7d9a\u30ce\u30fc\u30c9\u306e\u51e6\u7406\u3092\u5b9f\u884c\u3057\u306a\u3044\u3068\u3044\u3046\u52d5\u304d\u3092\u3057\u307e\u3059\u3002Matcher\u30d1\u30bf\u30fc\u30f3\u306e\u6761\u4ef6\u30ce\u30fc\u30c9\u306f\u3001\u3053\u306e\u7279\u5fb4\u3092\u751f\u304b\u3057\u3001\u5165\u529b\u5024\u304c\u30ce\u30fc\u30c9\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u5834\u5408\u306e\u307f\u3001\u6b21\u306e\u30ce\u30fc\u30c9\u306b\u51e6\u7406\u3092\u5f15\u304d\u7d99\u304e\u307e\u3059\u3002Matcher\u30d1\u30bf\u30fc\u30f3\u3067\u306f\u3001\u51e6\u7406\u5168\u4f53\u3068\u3057\u3066\u6e80\u305f\u3057\u305f\u3044\u6761\u4ef6\u3092\u3001\u6761\u4ef6\u30ce\u30fc\u30c9\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3068\u3057\u3066\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u5224\u5b9a\u3057\u305f\u3044\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3059\u308b\u3068\u3001\u305d\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3092\u63a2\u7d22\u3057\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u304b\u3089\u5024\u304c\u51fa\u3066\u304d\u305f\u5834\u5408\u3001\u6761\u4ef6\u306b\u4e00\u81f4\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u56f3\u306e\u4f8b\u3067\u306f\u3001Matcher\u30d1\u30bf\u30fc\u30f3\u3092\u7528\u3044\u3066\u3001\u5165\u529b\u3057\u305f\u82f1\u6587\u306e\u6587\u578b\u3092\u5224\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u5185\u90e8\u3067\u306f\u3001\u54c1\u8a5e\u3092\u5224\u5b9a\u3059\u308b\u6761\u4ef6\u30ce\u30fc\u30c9\u304b\u3089\u6210\u308b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u9020\u3092\u901a\u904e\u3055\u305b\u308b\u3053\u3068\u3067\u3001SV\u3001SVC\u3001SVO\u3001SVOO\u3001SVOC\u306e\u3069\u306e\u6587\u578b\u306b\u8a72\u5f53\u3059\u308b\u304b\u3092\u5224\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u51e6\u7406\u306f\u4e00\u5ea6\u3001\u54c1\u8a5e\u3092\u5224\u5b9a\u3059\u308b\u30ce\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u3066\u304a\u3051\u3070\u3001\u30ea\u30ea\u30fc\u30b9\u5f8c\u306b\u54c1\u8a5e\u306e\u4e26\u3073\u3092\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u3063\u3066\u3082\u3001\u30ce\u30fc\u30c9\u63a5\u7d9a\u3092\u5909\u3048\u308b\u64cd\u4f5c\u3060\u3051\u3067\u4fee\u6b63\u304c\u5b8c\u7d50\u3057\u307e\u3059\u3002Node-RED\u306f\u3001iPad\u3084Android\u30bf\u30d6\u30ec\u30c3\u30c8\u3067\u30ce\u30fc\u30c9\u306e\u63a5\u7d9a\u3092\u5909\u66f4\u3067\u304d\u308b\u305f\u3081\u3001\u4f8b\u3048\u3070\u901a\u52e4\u96fb\u8eca\u306e\u4e2d\u7b49\u3001\u3069\u3053\u3067\u3082\u4fee\u6b63\u4f5c\u696d\u304c\u884c\u3048\u307e\u3059\u3002\n\n#10. State\u30d1\u30bf\u30fc\u30f3\n\u72b6\u614b\u9077\u79fb\u3092\u6271\u3046\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\n\n![state_pattern.png](https://qiita-image-store.s3.amazonaws.com/0/98354/beb74d3a-100c-a8af-9da9-ac7ff2b3fd4c.png)\n\nState\u30d1\u30bf\u30fc\u30f3\u306f\u3001\u72b6\u614b\u3092\u8868\u3059\u72b6\u614b\u30ce\u30fc\u30c9\u3068\u3001\u9077\u79fb\u5148\u3092\u8868\u3059Switch\u30ce\u30fc\u30c9\u304b\u3089\u69cb\u6210\u3055\u308c\u307e\u3059\u3002\u72b6\u614b\u30ce\u30fc\u30c9\u306f\u3001\u305d\u306e\u72b6\u614b\u306b\u5fc5\u8981\u306a\u51e6\u7406\u3092\u884c\u3044\u3001Switch\u30ce\u30fc\u30c9\u306b\u5224\u5b9a\u3057\u305f\u3044\u5024\u3092\u5f15\u304d\u7d99\u304e\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001Switch\u30ce\u30fc\u30c9\u306f\u5f15\u304d\u7d99\u3044\u3060\u5024\u306e\u5185\u5bb9\u306b\u5f93\u3044\u5224\u5b9a\u3057\u3001\u6b21\u306e\u72b6\u614b\u30ce\u30fc\u30c9\u3078\u51e6\u7406\u3092\u79fb\u3057\u307e\u3059\u3002Java\u7b49\u3067\u72b6\u614b\u9077\u79fb\u3092\u8a18\u8ff0\u3059\u308b\u5834\u5408\u306f\u3001\u72b6\u614b\u9077\u79fb\u8868\u3092\u6d3b\u7528\u3059\u308b\u7b49\u306e\u65b9\u6cd5\u3092\u7528\u3044\u307e\u3059\u304c\u3001\u30b3\u30fc\u30c9\u304b\u3089\u9077\u79fb\u306e\u5168\u4f53\u50cf\u3092\u7406\u89e3\u3059\u308b\u306f\u56f0\u96e3\u3067\u3059\u3002Node-RED\u3092\u7528\u3044\u308b\u3053\u3068\u3067\u3001\u72b6\u614b\u306e\u9077\u79fb\u304c\u4e00\u76ee\u77ad\u7136\u3068\u306a\u308a\u307e\u3059\u3002\n\n#\u6700\u5f8c\u306b\n\u672c\u8a18\u4e8b\u3092\u901a\u3057\u3066\u3001\u65b0\u305f\u306a\u767a\u898b\u304c\u5f97\u3089\u308c\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\u9762\u767d\u3044\u4ed6\u306e\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3084\u3001\u3082\u3063\u3068\u826f\u3044\u30b3\u30fc\u30c9\u306b\u6c17\u3065\u3044\u305f\u65b9\u306f\u3001\u3054\u9023\u7d61\u304f\u3060\u3055\u3044\u3002\u7686\u3067\u8b70\u8ad6\u3057\u3001\u65b0\u305f\u306a\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u3092\u898b\u3064\u3051\u3066\u3086\u3051\u305f\u3089\u3001\u826f\u3044\u306a\u3068\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\n\u203b\u672c\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u306e\u5185\u5bb9\u306f\u3001[RedConnect\u306e\u6280\u8853\u30b5\u30a4\u30c8](http://www.redconnect.io/design-patterns)\u3067\u3082\u7d39\u4ecb\u3055\u308c\u307e\u3057\u305f\u3002\n\n#\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\nNode-RED\u306f\u3001\u958b\u767a\u74b0\u5883\u306e\u53f3\u4e0a\u30e1\u30cb\u30e5\u30fc->Import->Clipboard\u304b\u3089\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8cbc\u308a\u4ed8\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nStore & Search\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"58f0c78.fa70f38\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Store pattern\",\"info\":\"\",\"x\":139.67855072021484,\"y\":136.9643678665161,\"wires\":[]},{\"id\":\"ac5df1bd.53a21\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u683c\u7d0d\u3059\u308b\u30c7\u30fc\u30bf\u3092\u9078\u629e\",\"func\":\"msg.payload = {DATA: new Date(msg.payload).toString()};\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":327.42858505249023,\"y\":182.9643850326538,\"wires\":[[\"bc71d473.438e28\"]]},{\"id\":\"bc71d473.438e28\",\"type\":\"dashDB out\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"table\":\"TMP\",\"name\":\"DB\u3078\u683c\u7d0d\",\"x\":505.4285888671875,\"y\":182.96438694000244,\"wires\":[]},{\"id\":\"4ad682a0.b5297c\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u691c\u7d22\u8981\u6c42\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":152.1785888671875,\"y\":325.2143850326538,\"wires\":[[\"663e23c1.99c1dc\"]]},{\"id\":\"afccc742.503338\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u5165\u529b\u30c7\u30fc\u30bf\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":154.42858505249023,\"y\":182.9643850326538,\"wires\":[[\"ac5df1bd.53a21\"]]},{\"id\":\"663e23c1.99c1dc\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"SELECT * FROM TMP;\",\"params\":\"\",\"name\":\"DB\u3092\u691c\u7d22\",\"x\":295.1785888671875,\"y\":325.2143850326538,\"wires\":[[\"1301aa90.ecfe55\"]]},{\"id\":\"1301aa90.ecfe55\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u691c\u7d22\u7d50\u679c\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":462.17859649658203,\"y\":325.2143850326538,\"wires\":[]},{\"id\":\"3b24f16a.c4db0e\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Search pattern\",\"info\":\"\",\"x\":144.67858123779297,\"y\":276.96437549591064,\"wires\":[]},{\"id\":\"9efbd918.610428\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191\u683c\u7d0d\u3057\u305f\u30c7\u30fc\u30bf\u3092\u691c\u7d22\",\"info\":\"\",\"x\":369.67859649658203,\"y\":366.5477056503296,\"wires\":[]},{\"id\":\"42d56d7b.bd2a94\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191IoT\u7aef\u672b\u7b49\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\",\"info\":\"\",\"x\":237.4285430908203,\"y\":225.46437644958496,\"wires\":[]},{\"id\":\"d987c196.26784\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u8868\u524a\u9664\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":146.2499885559082,\"y\":89.39282989501953,\"wires\":[[\"7ab2ca59.854d34\"]]},{\"id\":\"7ab2ca59.854d34\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"DROP TABLE TMP;\",\"params\":\"\",\"name\":\"DROP TABLE\",\"x\":294.2499885559082,\"y\":89.39282989501953,\"wires\":[[\"a0547bb4.5fab88\"]]},{\"id\":\"a0547bb4.5fab88\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"[]\u304c\u51fa\u529b\u3055\u308c\u308c\u3070\u6210\u529f\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":500.2499885559082,\"y\":89.39282989501953,\"wires\":[]},{\"id\":\"8bead6df.741528\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u8868\u4f5c\u6210\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":145,\"y\":42.14285659790039,\"wires\":[[\"3449d1ee.cbb62e\"]]},{\"id\":\"3449d1ee.cbb62e\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"CREATE TABLE TMP (DATA VARCHAR(255));\",\"params\":\"\",\"name\":\"CREATE TABLE\",\"x\":300,\"y\":42.14285659790039,\"wires\":[[\"93dc73d3.6c239\"]]},{\"id\":\"93dc73d3.6c239\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"[]\u304c\u51fa\u529b\u3055\u308c\u308c\u3070\u6210\u529f\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":499,\"y\":42.14285659790039,\"wires\":[]}]\n```\n\nUI & API\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"3675bb25.c98a44\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"UI pattern\",\"info\":\"\",\"x\":129.4008445739746,\"y\":410.96428298950195,\"wires\":[]},{\"id\":\"9f7d159f.6082e8\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/output\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":135.67858123779297,\"y\":539.1587057113647,\"wires\":[[\"15ee7da3.ea1182\"]]},{\"id\":\"15ee7da3.ea1182\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\u7528URL\u4f5c\u6210\",\"func\":\"msg.url = msg.req.host + \\\"/api?q=\\\" + encodeURI(msg.payload.q);\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":313.24999237060547,\"y\":539.2538747787476,\"wires\":[[\"b6619f87.499e6\"]]},{\"id\":\"b6619f87.499e6\",\"type\":\"http request\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"\",\"x\":488.53580474853516,\"y\":538.5872087478638,\"wires\":[[\"c58cb91a.3a7348\"]]},{\"id\":\"6260006b.9da\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":590.7738914489746,\"y\":636.6824054718018,\"wires\":[]},{\"id\":\"c58cb91a.3a7348\",\"type\":\"change\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"headers\u524a\u9664\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":299.96350479125977,\"y\":636.7300310134888,\"wires\":[[\"1e70abb0.e18f54\"]]},{\"id\":\"1e70abb0.e18f54\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u51fa\u529bHTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY>\\n\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u6570\u306f{{payload.1}}\u3067\u3059\u3002\\n</BODY></HTML>\",\"x\":448.6785888671875,\"y\":636.8253183364868,\"wires\":[[\"6260006b.9da\"]]},{\"id\":\"fbe35ede.041ca\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":485.9169235229492,\"y\":456.96418952941895,\"wires\":[]},{\"id\":\"f2694ba7.0d96b8\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/input\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":132.58342742919922,\"y\":456.964204788208,\"wires\":[[\"302a43fd.cfd5bc\"]]},{\"id\":\"302a43fd.cfd5bc\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u5165\u529b\u30d5\u30a9\u30fc\u30e0HTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY><FORM method='GET' action='output'>\\n\u30c6\u30fc\u30d6\u30eb\u540d:<INPUT type='text' name='q' value='TMP'>\\n<INPUT type='submit'>\\n</FORM></BODY></HTML>\",\"x\":308.2501106262207,\"y\":456.6308391094208,\"wires\":[[\"fbe35ede.041ca\"]]},{\"id\":\"fc025f83.03fda\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/api\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":128.0395851135254,\"y\":779.4920873641968,\"wires\":[[\"c132f98c.3ecd08\"]]},{\"id\":\"e3c106e6.1c3ef8\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":557.9286231994629,\"y\":779.2063293457031,\"wires\":[]},{\"id\":\"43292e38.bcd6d\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API pattern\",\"info\":\"\",\"x\":135.40087890625,\"y\":732.3809695243835,\"wires\":[]},{\"id\":\"dda5c57a.225a38\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u4e0b\u306eAPI\u306b\u554f\u5408\u308f\u305b\u3001\u7d50\u679c\u53d6\u5f97\",\"info\":\"\",\"x\":533.6508865356445,\"y\":498.1310005187988,\"wires\":[]},{\"id\":\"2ed4fa3d.d12b06\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\u3067\u30d8\u30c3\u30c0\u304c\u66f8\u63db\u308f\u308b\u305f\u3081\u524a\u9664\u2191\",\"info\":\"\",\"x\":221.1508331298828,\"y\":679.3809394836426,\"wires\":[]},{\"id\":\"268a49c.fd975b6\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u5024(\u691c\u7d22\u30ef\u30fc\u30c9\u7b49)\u3092\u53d7\u4ed8\u3051\u3001\u4e0b\u306eGET\u5b9f\u884c\",\"info\":\"\",\"x\":462.40087890625,\"y\":414.7976396083832,\"wires\":[]},{\"id\":\"8b1381be.74ec8\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191API\u53d6\u5f97\u7d50\u679c\u3092\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u8868\u793a\",\"info\":\"\",\"x\":526.4842071533203,\"y\":678.880937576294,\"wires\":[]},{\"id\":\"b8e79c46.47186\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5024\u304b\u3089API\u554f\u5408\u305b\u7528URL\u4f5c\u6210\u2193\",\"info\":\"\",\"x\":224.65087890625,\"y\":498.4643135070801,\"wires\":[]},{\"id\":\"e4473af4.1bb8c8\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191\u30e6\u30fc\u30b6\u304c\u5165\u529b\u3057\u305f\u5024\u3092\u7528\u3044\u3066\u691c\u7d22\",\"info\":\"\",\"x\":496.87316131591797,\"y\":821.4841232299805,\"wires\":[]},{\"id\":\"c132f98c.3ecd08\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"SQL\u6587\u4f5c\u6210\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"SELECT COUNT(*) FROM {{payload.q}};\",\"x\":267.71427154541016,\"y\":779.4285669326782,\"wires\":[[\"e8426a37.17bd98\"]]},{\"id\":\"e8426a37.17bd98\",\"type\":\"dashDB in\",\"z\":\"d4f1d484.2b0e28\",\"service\":\"dashDB-qu\",\"query\":\"\",\"params\":\"\",\"name\":\"DB\u3092\u691c\u7d22\",\"x\":414.1508026123047,\"y\":778.8730506896973,\"wires\":[[\"e3c106e6.1c3ef8\"]]}]\n```\n\nTimeout\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"efd2874f.102d78\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Timeout pattern\",\"info\":\"\",\"x\":121,\"y\":991,\"wires\":[]},{\"id\":\"55fe0f56.aa01f\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"5\u79d2\u4ee5\u5185\u306b\u691c\u7d22\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u691c\u7d22\u7d50\u679c\u3092\u8868\u793a\u2193\",\"info\":\"\",\"x\":251.50000762939453,\"y\":1040.999979019165,\"wires\":[]},{\"id\":\"9f162cbb.60e9d\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u691c\u7d22\u304c5\u79d2\u4ee5\u4e0a\u304b\u304b\u3063\u305f\u3089\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u306b\u300c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u300d\u3068\u8868\u793a\u2191\",\"info\":\"\",\"x\":286,\"y\":1269.8333740234375,\"wires\":[]},{\"id\":\"1cc5725.fe33a8e\",\"type\":\"http in\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\",\"url\":\"/output\",\"method\":\"get\",\"swaggerDoc\":\"\",\"x\":114,\"y\":1088,\"wires\":[[\"ae6de02b.51922\",\"570e59a7.a8f1a8\"]]},{\"id\":\"ae6de02b.51922\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\u7528URL\u4f5c\u6210\",\"func\":\"msg.url = msg.req.host + \\\"/api?q=\\\" + encodeURI(msg.payload.q);\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":291.5714111328125,\"y\":1088.0951690673828,\"wires\":[[\"c15452cb.3eabb\"]]},{\"id\":\"c15452cb.3eabb\",\"type\":\"http request\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"API\u554f\u5408\u305b\",\"method\":\"GET\",\"ret\":\"obj\",\"url\":\"\",\"x\":466.8572235107422,\"y\":1087.428503036499,\"wires\":[[\"a1c844c3.5e37b8\"]]},{\"id\":\"3a14a3b7.c5eb5c\",\"type\":\"http response\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"HTTP\u5fdc\u7b54\",\"x\":603.0953102111816,\"y\":1185.523699760437,\"wires\":[]},{\"id\":\"a1c844c3.5e37b8\",\"type\":\"change\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"headers\u524a\u9664\",\"rules\":[{\"t\":\"delete\",\"p\":\"headers\"}],\"action\":\"\",\"property\":\"\",\"from\":\"\",\"to\":\"\",\"reg\":false,\"x\":312.2849235534668,\"y\":1185.571325302124,\"wires\":[[\"43ea4055.bc15c\"]]},{\"id\":\"43ea4055.bc15c\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u51fa\u529bHTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY>\\n\u30c6\u30fc\u30d6\u30eb\u306e\u884c\u6570\u306f{{payload.1}}\u3067\u3059\u3002\\n</BODY></HTML>\",\"x\":461.00000762939453,\"y\":1185.666612625122,\"wires\":[[\"3a14a3b7.c5eb5c\"]]},{\"id\":\"570e59a7.a8f1a8\",\"type\":\"delay\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"5\u79d2\u9593\u5f85\u6a5f\",\"pauseType\":\"delay\",\"timeout\":\"5\",\"timeoutUnits\":\"seconds\",\"rate\":\"1\",\"rateUnits\":\"second\",\"randomFirst\":\"1\",\"randomLast\":\"5\",\"randomUnits\":\"seconds\",\"drop\":false,\"x\":248.32141876220703,\"y\":1228.8412942886353,\"wires\":[[\"4eb3d9c9.b14c28\"]]},{\"id\":\"4eb3d9c9.b14c28\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u8868\u793aHTML\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"<HTML><BODY>\\n\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f\u3002\\n</BODY></HTML>\",\"x\":428.32141876220703,\"y\":1228.8412942886353,\"wires\":[[\"3a14a3b7.c5eb5c\"]]}]\n```\n\nwhile\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"7a1c913a.85e37\",\"type\":\"template\",\"z\":\"bb0998cf.44f668\",\"name\":\"i=0\",\"field\":\"i\",\"format\":\"handlebars\",\"template\":\"0\",\"x\":320,\"y\":3680,\"wires\":[[\"4047b441.bfb84c\"]]},{\"id\":\"4047b441.bfb84c\",\"type\":\"switch\",\"z\":\"bb0998cf.44f668\",\"name\":\"i<4\",\"property\":\"i\",\"rules\":[{\"t\":\"lt\",\"v\":\"4\"},{\"t\":\"else\"}],\"checkall\":\"true\",\"outputs\":2,\"x\":458,\"y\":3680,\"wires\":[[\"43f621ff.bc09e\"],[\"dcb4322f.234bd\"]]},{\"id\":\"2a1ad095.d5e53\",\"type\":\"function\",\"z\":\"bb0998cf.44f668\",\"name\":\"i++\",\"func\":\"msg.i++;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":564,\"y\":3585,\"wires\":[[\"4047b441.bfb84c\"]]},{\"id\":\"44dbc2cb.bb243c\",\"type\":\"debug\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u7d42\u4e86\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":805,\"y\":3731,\"wires\":[]},{\"id\":\"83af8aec.7c5078\",\"type\":\"debug\",\"z\":\"bb0998cf.44f668\",\"name\":\"\\\"i\u56de\u76ee\\\"\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":821.3999633789062,\"y\":3681.066650390625,\"wires\":[]},{\"id\":\"822328ae.7ddcd8\",\"type\":\"inject\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u958b\u59cb\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":201.89581298828125,\"y\":3679.888916015625,\"wires\":[[\"7a1c913a.85e37\"]]},{\"id\":\"a144ddbc.5ebb2\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"while pattern\",\"info\":\"\",\"x\":193.16665649414062,\"y\":3584.5556116104126,\"wires\":[]},{\"id\":\"705c90e.f8fa37\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u21934\u56de\u51fa\u529b\u3055\u308c\u308b\",\"info\":\"\",\"x\":841.9999389648438,\"y\":3639.166615486145,\"wires\":[]},{\"id\":\"8e84d3d2.717b3\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"while\u306e\u6761\u4ef6\u6587\u2191\",\"info\":\"\",\"x\":410.66666412353516,\"y\":3720.6666402816772,\"wires\":[]},{\"id\":\"56a6728c.a9598c\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3055\u305b\u308b\u5024i\u3092\u521d\u671f\u5316\u2193\",\"info\":\"\",\"x\":248.16665649414062,\"y\":3637.1667013168335,\"wires\":[]},{\"id\":\"c68932e9.3976d\",\"type\":\"comment\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u2190\u5024i\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\",\"info\":\"\",\"x\":736.4999694824219,\"y\":3585.3333740234375,\"wires\":[]},{\"id\":\"dcb4322f.234bd\",\"type\":\"template\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u30eb\u30fc\u30d7\u5f8c\u306e\u51e6\u7406\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"\u30eb\u30fc\u30d7\u7d42\u4e86\",\"x\":613.2380752563477,\"y\":3730.869017601013,\"wires\":[[\"44dbc2cb.bb243c\"]]},{\"id\":\"43f621ff.bc09e\",\"type\":\"template\",\"z\":\"bb0998cf.44f668\",\"name\":\"\u6587\u5b57\u5217\\\"i\u56de\u76ee\\\"\u3092\u751f\u6210\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"{{i}}\u56de\u76ee\",\"x\":624.9999694824219,\"y\":3681,\"wires\":[[\"83af8aec.7c5078\",\"2a1ad095.d5e53\"]]}]\n```\n\nSequence\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"79318ef6.86ce7\",\"type\":\"comment\",\"name\":\"Sequence pattern\",\"info\":\"\",\"x\":157.92858123779297,\"y\":1925.464274406433,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"98e06bb0.671f98\",\"type\":\"function\",\"name\":\"payload=451\",\"func\":\"msg.payload = 451;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":397.5952453613281,\"y\":1969.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"a589e119.5a762\"]]},{\"id\":\"11977bd5.ee6884\",\"type\":\"function\",\"name\":\"tmp\u3068payload\u306e\u5408\u8a08\u7b97\u51fa\",\"func\":\"msg.payload = msg.tmp + msg.payload;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":592.5952453613281,\"y\":2052.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"2e654056.d19ac\"]]},{\"id\":\"2f1d71c.fd0e28e\",\"type\":\"function\",\"name\":\"payload=326\",\"func\":\"msg.payload = 326;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":397.5952453613281,\"y\":2052.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"11977bd5.ee6884\"]]},{\"id\":\"2e654056.d19ac\",\"type\":\"debug\",\"name\":\"777\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":777.5952453613281,\"y\":2052.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"8e353c9e.71cac\",\"type\":\"inject\",\"name\":\"2\u5024\u306e\u548c\u3092\u6c42\u3081\u308b\u8a08\u7b97\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":205.59524536132812,\"y\":1969.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"98e06bb0.671f98\"]]},{\"id\":\"a589e119.5a762\",\"type\":\"function\",\"name\":\"tmp=payload\",\"func\":\"msg.tmp = msg.payload;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":556.5952453613281,\"y\":1969.7976484298706,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"2f1d71c.fd0e28e\"]]},{\"id\":\"bdfd8572.420278\",\"type\":\"comment\",\"name\":\"\u2193\u5024\u3092\u5225\u306e\u5909\u6570tmp\u3078\u9000\u907f\",\"info\":\"\",\"x\":622.0951766967773,\"y\":1925.297646522522,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"f3c44263.0c3bc\",\"type\":\"comment\",\"name\":\"\u2193\uff11\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":394.09525299072266,\"y\":1926.1309614181519,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"9c2a1dca.63d5e\",\"type\":\"comment\",\"name\":\"\u21912\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":396.59523010253906,\"y\":2096.4642181396484,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"1cfe4562.e301bb\",\"type\":\"comment\",\"name\":\"\u2191\u9000\u907f\u3057\u305f\u5024tmp\u3068payload\u306e\u548c\u3092\u8a08\u7b97\",\"info\":\"\",\"x\":692.0952377319336,\"y\":2096.464339733124,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]}]\n```\n\nAggregator\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"fe9c117e.0163f\",\"type\":\"comment\",\"name\":\"Aggregator pattern\",\"info\":\"\",\"x\":161.42858123779297,\"y\":2204.630959510803,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"9e0268f7.61fd98\",\"type\":\"function\",\"name\":\"payload=451\",\"func\":\"msg.payload = 451;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":432.26187896728516,\"y\":2288.131070137024,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"af493597.50b6c8\"]]},{\"id\":\"af493597.50b6c8\",\"type\":\"function\",\"name\":\"2\u3064\u306epayload\u306e\u5408\u8a08\u7b97\u51fa\",\"func\":\"// \u5165\u529b\u6570\u3092\u6e1b\u3089\u3059\\ncontext.global.n--;\\n\\n// msg.payload\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\\ncontext.global.data[context.global.n] = msg.payload;\\n\\n// \u5b9a\u7fa9\u3057\u305f\u5165\u529b\u6570\u304c\u6765\u305f\u3089\u3001\u96c6\u8a08\u51e6\u7406\u3092\u884c\u3044\u3001msg.payload\u3092\u8fd4\u3059\\nif (context.global.n === 0)\\n{   // msg.payload\u306e\u5408\u8a08\u5024\u3092\u7b97\u51fa\\n    var sum = 0;\\n    for (var i = 0; i < context.global.data.length; i++)\\n    {\\n        sum += context.global.data[i];\\n    }\\n    msg.payload = sum;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":640.2619247436523,\"y\":2311.131094932556,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"c2d9368.f3d26c8\"]]},{\"id\":\"72d62625.8d29d8\",\"type\":\"function\",\"name\":\"payload=326\",\"func\":\"msg.payload = 326;\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":431.26190185546875,\"y\":2336.13108253479,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"af493597.50b6c8\"]]},{\"id\":\"c2d9368.f3d26c8\",\"type\":\"debug\",\"name\":\"777\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":822.2619018554688,\"y\":2312.13108253479,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"a8ee0b2c.5711f8\",\"type\":\"function\",\"name\":\"\u4e26\u5217\u6570=2\",\"func\":\"context.global.n = 2;\\ncontext.global.data = new Array(2);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":271.26190185546875,\"y\":2313.13108253479,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"9e0268f7.61fd98\",\"72d62625.8d29d8\"]]},{\"id\":\"39431b6c.c6bce4\",\"type\":\"comment\",\"name\":\"\u2193\uff11\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":431.0083923339844,\"y\":2249.7051458358765,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"1f653d.ffe09ac3\",\"type\":\"inject\",\"name\":\"2\u5024\u306e\u548c\u3092\u6c42\u3081\u308b\u8a08\u7b97\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":205.31793975830078,\"y\":2249.8241748809814,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"a8ee0b2c.5711f8\"]]},{\"id\":\"1c32a960.e3cd57\",\"type\":\"comment\",\"name\":\"\u21912\u3064\u76ee\u306e\u5024\",\"info\":\"\",\"x\":429.8417434692383,\"y\":2376.7050580978394,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"f30cf9d4.0cf308\",\"type\":\"comment\",\"name\":\"\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u4e26\u5217\u6570\u3092\u5b9a\u7fa9\u2191\",\"info\":\"\",\"x\":201.7702865600586,\"y\":2356.2525358200073,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"bee9177f.4116e8\",\"type\":\"comment\",\"name\":\"\u2191\u4e26\u5217\u6570\u5206\u306e\u5165\u529b\u304c\u6765\u305f\u5f8c\u3001\u548c\u3092\u8a08\u7b97\",\"info\":\"\",\"x\":743.3417587280273,\"y\":2353.5384435653687,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]}]\n```\n\nSeparator\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"1419e877.ebe618\",\"type\":\"inject\",\"name\":\"\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":155.0952377319336,\"y\":2485.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"8f4d7d43.70b28\"]]},{\"id\":\"8f4d7d43.70b28\",\"type\":\"function\",\"name\":\"1\u3064\u76ee\u306b451\u30012\u3064\u76ee\u306b326\u3092\u51fa\u529b\",\"func\":\"msg.payload = 451;\\nvar msg2 = {};\\nmsg2.payload = 326;\\n\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":349.0952377319336,\"y\":2485.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[[\"a69d939d.59627\"],[\"ace2220e.531de\"]]},{\"id\":\"a69d939d.59627\",\"type\":\"debug\",\"name\":\"451\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":562.0952377319336,\"y\":2458.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"ace2220e.531de\",\"type\":\"debug\",\"name\":\"326\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":560.0952377319336,\"y\":2511.79771900177,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"b1c243df.4e3dc\",\"type\":\"comment\",\"name\":\"Separator pattern\",\"info\":\"\",\"x\":157.42858123779297,\"y\":2441.2976331710815,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]},{\"id\":\"fba005.ff045ff8\",\"type\":\"comment\",\"name\":\"\u21911\u30ce\u30fc\u30c9\u304b\u3089\u7570\u306a\u308b2\u5024\u3092\u51fa\u529b\",\"info\":\"\",\"x\":349.0083770751953,\"y\":2530.223530769348,\"z\":\"d4f1d484.2b0e28\",\"wires\":[]}]\n```\n\nMapReduce\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"42f22b03.bd0dd4\",\"type\":\"inject\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"WordCount\u5b9f\u884c\",\"topic\":\"\",\"payload\":\"\",\"payloadType\":\"date\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":169.98413848876953,\"y\":2499.5753602981567,\"wires\":[[\"b48a3afc.4b75c8\"]]},{\"id\":\"1f8c6771.e07399\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u51e6\u7406\",\"func\":\"var input = msg.payload.toLowerCase()\\n                       .replace( /\\\\.$/, \\\"\\\")\\n                       .split(/ |, /);\\n// Map\\nvar key_value = [];\\nfor (var i=0; i<input.length; i++)\\n{\\n    var key = input[i];\\n    if (key in key_value)\\n    {\\n        key_value[key]++;\\n    } else {\\n        key_value[key] = 1;\\n    }\\n}\\n\\n// Shuffle\\nvar key1_value = [];\\nvar key2_value = [];\\nfor (var key in key_value)\\n{\\n    if ('a'<=key[0] && key[0]<='m')\\n    {\\n        key1_value.push([key, key_value[key]]);\\n    } else {\\n        key2_value.push([key, key_value[key]]);\\n    }\\n}\\n\\nmsg.payload = key1_value;\\nvar msg2 = {};\\nmsg2.payload = key2_value;\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":469.98413848876953,\"y\":2534.575316429138,\"wires\":[[\"9fe7f7de.601808\"],[\"8582eef5.7a7d1\"]]},{\"id\":\"9fe7f7de.601808\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Reduce\u51e6\u7406\",\"func\":\"// \u5165\u529b\u6570\u3092\u6e1b\u3089\u3059\\ncontext.global.n1--;\\n\\n// msg.payload\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\\ncontext.global.data1[context.global.n1] = msg.payload;\\n\\n// \u5b9a\u7fa9\u3057\u305f\u5165\u529b\u6570\u304c\u6765\u305f\u3089\u3001\u96c6\u8a08\u51e6\u7406\u3092\u884c\u3044\u3001msg.payload\u3092\u8fd4\u3059\\nif (context.global.n1 === 0)\\n{   // msg.payload\u306e\u5408\u8a08\u5024\u3092\u7b97\u51fa\\n    var tmp = [];\\n    for (var i=0; i<context.global.data1.length; i++)\\n    {\\n        var input = context.global.data1[i];\\n        for (var j=0; j<input.length; j++)\\n        {\\n            var key = input[j][0];\\n            var value = input[j][1];\\n            if (key in tmp)\\n            {\\n                tmp[key] += value;\\n            } else {\\n                tmp[key] = value;\\n            }\\n        }\\n    }\\n    \\n    var output = [];\\n    for (var key in tmp)\\n    {\\n        output.push([key, tmp[key]]);\\n    }\\n    msg.payload = output;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":677.9841384887695,\"y\":2549.575316429138,\"wires\":[[\"9c431c80.63bce\"]]},{\"id\":\"9c431c80.63bce\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u7d50\u679c\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":817.9841384887695,\"y\":2549.575316429138,\"wires\":[]},{\"id\":\"b48a3afc.4b75c8\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u6570=3\",\"func\":\"var map = 3; // Map\u6570\u3092\u5b9a\u7fa9\\n\\ncontext.global.n1 = map;\\ncontext.global.data1 = new Array(map);\\n\\ncontext.global.n2 = map;\\ncontext.global.data2 = new Array(map);\\n\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":156.98413848876953,\"y\":2580.575316429138,\"wires\":[[\"b309b836.4cf648\",\"3d3d88ef.c2c278\",\"fe5a1ff0.01a5e\"]]},{\"id\":\"b309b836.4cf648\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"This is a pen.\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"This is a pen.\",\"x\":325.98413848876953,\"y\":2534.575316429138,\"wires\":[[\"1f8c6771.e07399\"]]},{\"id\":\"8582eef5.7a7d1\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Reduce\u51e6\u7406\",\"func\":\"// \u5165\u529b\u6570\u3092\u6e1b\u3089\u3059\\ncontext.global.n2--;\\n\\n// msg.payload\u306e\u30c7\u30fc\u30bf\u3092\u683c\u7d0d\\ncontext.global.data2[context.global.n2] = msg.payload;\\n\\n// \u5b9a\u7fa9\u3057\u305f\u5165\u529b\u6570\u304c\u6765\u305f\u3089\u3001\u96c6\u8a08\u51e6\u7406\u3092\u884c\u3044\u3001msg.payload\u3092\u8fd4\u3059\\nif (context.global.n2 === 0)\\n{   // msg.payload\u306e\u5408\u8a08\u5024\u3092\u7b97\u51fa\\n    var tmp = [];\\n    for (var i=0; i<context.global.data2.length; i++)\\n    {\\n        var input = context.global.data2[i];\\n        for (var j=0; j<input.length; j++)\\n        {\\n            var key = input[j][0];\\n            var value = input[j][1];\\n            if (key in tmp)\\n            {\\n                tmp[key] += value;\\n            } else {\\n                tmp[key] = value;\\n            }\\n        }\\n    }\\n    \\n    var output = [];\\n    for (var key in tmp)\\n    {\\n        output.push([key, tmp[key]]);\\n    }\\n    msg.payload = output;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":679.9841384887695,\"y\":2601.575316429138,\"wires\":[[\"1b1d3a66.e4e2c6\"]]},{\"id\":\"1b1d3a66.e4e2c6\",\"type\":\"debug\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u7d50\u679c\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":818.9841384887695,\"y\":2601.575316429138,\"wires\":[]},{\"id\":\"b931daa2.46ce28\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u51e6\u7406\",\"func\":\"var input = msg.payload.toLowerCase()\\n                       .replace( /\\\\.$/, \\\"\\\")\\n                       .split(/ |, /);\\n// Map\\nvar key_value = [];\\nfor (var i=0; i<input.length; i++)\\n{\\n    var key = input[i];\\n    if (key in key_value)\\n    {\\n        key_value[key]++;\\n    } else {\\n        key_value[key] = 1;\\n    }\\n}\\n\\n// Shuffle\\nvar key1_value = [];\\nvar key2_value = [];\\nfor (var key in key_value)\\n{\\n    if ('a'<=key[0] && key[0]<='m')\\n    {\\n        key1_value.push([key, key_value[key]]);\\n    } else {\\n        key2_value.push([key, key_value[key]]);\\n    }\\n}\\n\\nmsg.payload = key1_value;\\nvar msg2 = {};\\nmsg2.payload = key2_value;\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":470.98413848876953,\"y\":2580.575316429138,\"wires\":[[\"9fe7f7de.601808\"],[\"8582eef5.7a7d1\"]]},{\"id\":\"83ed63.ff7c12a\",\"type\":\"function\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u51e6\u7406\",\"func\":\"var input = msg.payload.toLowerCase()\\n                       .replace( /\\\\.$/, \\\"\\\")\\n                       .split(/ |, /);\\n// Map\\nvar key_value = [];\\nfor (var i=0; i<input.length; i++)\\n{\\n    var key = input[i];\\n    if (key in key_value)\\n    {\\n        key_value[key]++;\\n    } else {\\n        key_value[key] = 1;\\n    }\\n}\\n\\n// Shuffle\\nvar key1_value = [];\\nvar key2_value = [];\\nfor (var key in key_value)\\n{\\n    if ('a'<=key[0] && key[0]<='m')\\n    {\\n        key1_value.push([key, key_value[key]]);\\n    } else {\\n        key2_value.push([key, key_value[key]]);\\n    }\\n}\\n\\nmsg.payload = key1_value;\\nvar msg2 = {};\\nmsg2.payload = key2_value;\\nreturn [msg, msg2];\",\"outputs\":\"2\",\"noerr\":0,\"x\":471.98413848876953,\"y\":2626.575316429138,\"wires\":[[\"9fe7f7de.601808\"],[\"8582eef5.7a7d1\"]]},{\"id\":\"3d3d88ef.c2c278\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Give me a pen.\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"Give me a pen.\",\"x\":320.98413848876953,\"y\":2580.575316429138,\"wires\":[[\"b931daa2.46ce28\"]]},{\"id\":\"fe5a1ff0.01a5e\",\"type\":\"template\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"This pen is small.\",\"field\":\"payload\",\"format\":\"html\",\"template\":\"This pen is small.\",\"x\":313.98413848876953,\"y\":2626.575316429138,\"wires\":[[\"83ed63.ff7c12a\"]]},{\"id\":\"f78466af.087b98\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"MapReduce pattern\",\"info\":\"\",\"x\":156.98413848876953,\"y\":2455.575316429138,\"wires\":[]},{\"id\":\"42607f4e.bd9f8\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u6570\u3092\u5b9a\u7fa9\u2191\",\"info\":\"\",\"x\":140.89732360839844,\"y\":2623.001223564148,\"wires\":[]},{\"id\":\"c5857142.3a7a9\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u51e6\u7406\u5bfe\u8c61\u306e\u5165\u529b\u30c7\u30fc\u30bf\",\"info\":\"\",\"x\":394.06397247314453,\"y\":2493.001136779785,\"wires\":[]},{\"id\":\"4f68dbe2.b09724\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2191\u5358\u8a9e\u3092key\u3001\u51fa\u73fe\u56de\u6570\u3092value\u3068\u3057\u3001Reduce\u51e6\u7406\u306b\u6e21\u3059\",\"info\":\"\",\"x\":628.3972625732422,\"y\":2668.426999092102,\"wires\":[]},{\"id\":\"a8da3026.5725d\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"\u2193\u540c\u3058\u5358\u8a9e\u306e\u51fa\u73fe\u56de\u6570\u306e\u548c\u3092\u6c42\u3081\u308b\",\"info\":\"\",\"x\":766.5639495849609,\"y\":2507.093747138977,\"wires\":[]},{\"id\":\"9a92b61d.656d48\",\"type\":\"comment\",\"z\":\"d4f1d484.2b0e28\",\"name\":\"Map\u6570\u5206\u306e\u5165\u529b\u5f8c\u3001\",\"info\":\"\",\"x\":722.4841384887695,\"y\":2475.4919862747192,\"wires\":[]}]\n```\n\nMatcher\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"7687ce5.f89783\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"Matcher pattern\",\"info\":\"\",\"x\":242.1428680419922,\"y\":1595,\"wires\":[]},{\"id\":\"b6a262bc.495da\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"The man walked.\",\"topic\":\"\",\"payload\":\"The man walked.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":268.9120903015137,\"y\":1671.5384359359741,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"c7a58590.385a78\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":696.1428375244141,\"y\":1651,\"wires\":[[\"1728a714.e8d759\"]]},{\"id\":\"1924ffc2.e6db\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u6587\u5b57\u5217\u3092\u914d\u5217\u5316\",\"func\":\"msg.payload = msg.payload.toLowerCase()\\n                         .replace( /\\\\.$/, \\\"\\\")\\n                         .split(/ |, /);\\nreturn msg;\",\"outputs\":1,\"noerr\":0,\"x\":468.1428680419922,\"y\":1595,\"wires\":[[\"c7a58590.385a78\",\"c192fb64.3e6d08\"]]},{\"id\":\"dc6551e9.239ab\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"He looks tired.\",\"topic\":\"\",\"payload\":\"He looks tired.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":263.3736763000488,\"y\":1729.0768766403198,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"585038d7.a7afc8\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"I bought a book.\",\"topic\":\"\",\"payload\":\"I bought a book.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":270.9121513366699,\"y\":1789.5385160446167,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"f026e64.f0fd918\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":636.1428604125977,\"y\":1785.000012397766,\"wires\":[[\"379c9674.c8636a\"]]},{\"id\":\"1728a714.e8d759\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u52d5\u8a5e\",\"func\":\"var words = [\\\"walked\\\", \\\"believe\\\", \\\"send\\\", \\\"bought\\\", \\\"looks\\\", \\\"is\\\", \\\"give\\\", \\\"leaning\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":490.14286041259766,\"y\":1727.000012397766,\"wires\":[[\"e7510579.18aef8\",\"a88b7b5f.577488\",\"f026e64.f0fd918\",\"2808b0e2.d7f75\",\"379c9674.c8636a\",\"98b13a81.674ec8\"]]},{\"id\":\"e7510579.18aef8\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c1\u6587\u578bSV\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c1\u6587\u578bSV\",\"x\":969.1428985595703,\"y\":1669,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"912cace1.6ed35\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c2\u6587\u578bSVC\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c2\u6587\u578bSVC\",\"x\":972.1428985595703,\"y\":1725,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"a88b7b5f.577488\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5f62\u5bb9\u8a5e\",\"func\":\"var words = [\\\"tall\\\", \\\"innocent\\\", \\\"tired\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":824.1428604125977,\"y\":1725.000012397766,\"wires\":[[\"912cace1.6ed35\"]]},{\"id\":\"95aa6b7c.6a5598\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"I send her an e-mail.\",\"topic\":\"\",\"payload\":\"I send her an e-mail.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":284.47625255584717,\"y\":1848.8462619781494,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"f96a1b74.0695e8\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"I believe him innocent.\",\"topic\":\"\",\"payload\":\"I believe him innocent.\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":291.6814155578613,\"y\":1904.4615726470947,\"wires\":[[\"1924ffc2.e6db\"]]},{\"id\":\"50b8bf36.af474\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c3\u6587\u578bSVO\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c3\u6587\u578bSVO\",\"x\":971.1428985595703,\"y\":1786,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"43aedca2.bc5124\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c4\u6587\u578bSVOO\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c4\u6587\u578bSVOO\",\"x\":975.1428604125977,\"y\":1845.000012397766,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"bef90a4e.4106f8\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u7b2c5\u6587\u578bSVOC\",\"field\":\"payload2\",\"format\":\"handlebars\",\"template\":\"\u7b2c5\u6587\u578bSVOC\",\"x\":975.1428604125977,\"y\":1902.000012397766,\"wires\":[[\"ca202d62.35dfd\"]]},{\"id\":\"379c9674.c8636a\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":824.1428604125977,\"y\":1786.000012397766,\"wires\":[[\"50b8bf36.af474\"]]},{\"id\":\"c192fb64.3e6d08\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":490.1428680419922,\"y\":1651,\"wires\":[[\"c7a58590.385a78\"]]},{\"id\":\"2808b0e2.d7f75\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":485.1428680419922,\"y\":1832,\"wires\":[[\"98b13a81.674ec8\"]]},{\"id\":\"98b13a81.674ec8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":634.1428604125977,\"y\":1833.000012397766,\"wires\":[[\"d11f2b1.f2ee0d8\",\"6d503b99.92afc4\",\"dbf80aa8.2407f8\"]]},{\"id\":\"d11f2b1.f2ee0d8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u51a0\u8a5e\",\"func\":\"var words = [\\\"the\\\", \\\"a\\\", \\\"an\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":486.14286041259766,\"y\":1916.000012397766,\"wires\":[[\"6d503b99.92afc4\"]]},{\"id\":\"6d503b99.92afc4\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u540d\u8a5e\",\"func\":\"var words = [\\\"man\\\", \\\"her\\\", \\\"he\\\", \\\"him\\\", \\\"e-mail\\\", \\\"book\\\", \\\"i\\\", \\\"we\\\", \\\"she\\\",\\\"this\\\", \\\"pen\\\", \\\"chocolate\\\", \\\"me\\\", \\\"ladder\\\", \\\"wall\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":632.1428604125977,\"y\":1916.000012397766,\"wires\":[[\"43aedca2.bc5124\"]]},{\"id\":\"dbf80aa8.2407f8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5f62\u5bb9\u8a5e\",\"func\":\"var words = [\\\"tall\\\", \\\"innocent\\\", \\\"tired\\\"];\\nvar tmp = msg.payload;\\n\\nif (words.indexOf(tmp[0]) >= 0)\\n{\\n    tmp.shift(); // \u914d\u5217\u306e\u5148\u982d\u3092\u524a\u9664\\n    msg.payload = tmp;\\n\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":834.1428375244141,\"y\":1902,\"wires\":[[\"bef90a4e.4106f8\"]]},{\"id\":\"72a20087.8d5e\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u6587\u578b\u3092\u51fa\u529b\",\"active\":true,\"console\":\"false\",\"complete\":\"payload2\",\"x\":1178.0387725830078,\"y\":1850.5556640625,\"wires\":[]},{\"id\":\"ca202d62.35dfd\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5168\u3066\u63a2\u7d22\u6e08\uff1f\",\"func\":\"var input = msg.payload;\\n\\nif (input.length === 0)\\n{\\n    return msg;    \\n}\\n\",\"outputs\":1,\"noerr\":0,\"x\":1169.884864807129,\"y\":1667.8633785247803,\"wires\":[[\"72a20087.8d5e\"]]},{\"id\":\"b949bd7e.46b64\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u5168\u30ce\u30fc\u30c9\u3092\u63a2\u7d22\u3057\u3066\u3044\u308b\u5834\u5408\u306e\u307f\u3001\u6b21\u306e\u30ce\u30fc\u30c9\u306b\u6e21\u3059\u2193\",\"info\":\"\",\"x\":1008.3464660644531,\"y\":1626.128547668457,\"wires\":[]},{\"id\":\"caf9b247.35065\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u2191\u5148\u982d\u306e\u5358\u8a9e\u306e\u54c1\u8a5e\u304c\u4e00\u81f4\u3057\u305f\u5834\u5408\u3001\u5358\u8a9e\u3092\u524a\u9664\u3057\u6b21\u306e\u30ce\u30fc\u30c9\u306b\u6e21\u3059\",\"info\":\"\",\"x\":648.8148651123047,\"y\":1957.1712636947632,\"wires\":[]},{\"id\":\"7ff77a03.800884\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u2191\u6587\u578b\u3092\u5224\u5b9a\u3059\u308b\u6587\u5b57\u5217\",\"info\":\"\",\"x\":294.47298431396484,\"y\":1945.8632011413574,\"wires\":[]},{\"id\":\"bdf91fcc.4206e\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u2191\u5224\u5b9a\u3057\u305f\u6587\u578b\",\"info\":\"\",\"x\":1003.1908950805664,\"y\":1943.487506866455,\"wires\":[]}]\n```\n\nState\u30d1\u30bf\u30fc\u30f3\n\n```\n[{\"id\":\"3318e7e6.cce718\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":443.6581726074219,\"y\":1120.6715087890625,\"wires\":[[\"1ac45ea9.e53ba1\"],[\"3fd52c9e.c02ad4\"],[\"5a961aa8.a569e4\"]]},{\"id\":\"8ffd81f1.70028\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"0101\",\"topic\":\"\",\"payload\":\"0101\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":236.30752563476562,\"y\":1119.4175281524658,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"1ac45ea9.e53ba1\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614ba\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=a, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":400.71014404296875,\"y\":996.8587646484375,\"wires\":[[\"3318e7e6.cce718\",\"ff5f8c7.f00a07\"]]},{\"id\":\"3fd52c9e.c02ad4\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614bb\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=b, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":732.2685241699219,\"y\":997.4957275390625,\"wires\":[[\"a9be3bfd.5641c8\",\"87629f53.789d6\"]]},{\"id\":\"b2e36234.4d1ca\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614bc\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=c, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":488.1517028808594,\"y\":1217.9888916015625,\"wires\":[[\"fa4d1888.05b2e8\",\"7f91b75.f806e48\"]]},{\"id\":\"119a07f.fee65f8\",\"type\":\"function\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614bd\",\"func\":\"var input = msg.payload;\\nvar len = input.length;\\n\\nif (msg.i == null)\\n{\\n    msg.i = 0;\\n} else {\\n    msg.i++;\\n}\\n\\nmsg.c = input.charAt(msg.i);\\nmsg.state = msg.i + \\\"\u56de\u76ee: \u72b6\u614b=d, \u6587\u5b57=\\\" + msg.c;\\n\\nif (msg.i < len)\\n{\\n    return msg;\\n}\",\"outputs\":1,\"noerr\":0,\"x\":1012.4892883300781,\"y\":1084.2862548828125,\"wires\":[[\"c054e9a8.3fab18\",\"e0f463be.1f0ba\"]]},{\"id\":\"7ff57b7c.800a84\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"-1\",\"topic\":\"\",\"payload\":\"-1\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":238.12570190429688,\"y\":1176.2861804962158,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"f993c065.066c4\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"12.2\",\"topic\":\"\",\"payload\":\"12.2\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":238.1257095336914,\"y\":1238.1046161651611,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"925dff15.6da2\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"4.5.1\",\"topic\":\"\",\"payload\":\"4.5.1\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":237.25555419921875,\"y\":1296.3514070510864,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"969fdc24.69602\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u691c\u67fb\u7d50\u679c\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"payload\",\"x\":1146.7226257324219,\"y\":1337.4444580078125,\"wires\":[]},{\"id\":\"5a961aa8.a569e4\",\"type\":\"template\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u4e0d\u5408\u683c\u306e\u6587\u5b57\u5217\",\"field\":\"payload\",\"format\":\"handlebars\",\"template\":\"\u4e0d\u5408\u683c\u306e\u6587\u5b57\u5217\",\"x\":1155.2939147949219,\"y\":1286.7789306640625,\"wires\":[[\"969fdc24.69602\"]]},{\"id\":\"a9be3bfd.5641c8\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":888.6581115722656,\"y\":997.3380298614502,\"wires\":[]},{\"id\":\"ff5f8c7.f00a07\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":553.9915161132812,\"y\":997.3385009765625,\"wires\":[]},{\"id\":\"7f91b75.f806e48\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":637.6581726074219,\"y\":1218.3385009765625,\"wires\":[]},{\"id\":\"87629f53.789d6\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":754.6581726074219,\"y\":1120.6715259552002,\"wires\":[[\"5a961aa8.a569e4\"],[\"3fd52c9e.c02ad4\"],[\"b2e36234.4d1ca\"]]},{\"id\":\"fa4d1888.05b2e8\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":533.6581726074219,\"y\":1338.6715087890625,\"wires\":[[\"5a961aa8.a569e4\"],[\"119a07f.fee65f8\"],[\"5a961aa8.a569e4\"]]},{\"id\":\"c054e9a8.3fab18\",\"type\":\"switch\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"1\u6587\u5b57\u5224\u5b9a\",\"property\":\"c\",\"rules\":[{\"t\":\"regex\",\"v\":\"\\\\+|\\\\-\"},{\"t\":\"regex\",\"v\":\"\\\\d\"},{\"t\":\"eq\",\"v\":\".\"}],\"checkall\":\"true\",\"outputs\":3,\"x\":1052.6581726074219,\"y\":1205.6715087890625,\"wires\":[[\"5a961aa8.a569e4\"],[\"119a07f.fee65f8\"],[\"5a961aa8.a569e4\"]]},{\"id\":\"e0f463be.1f0ba\",\"type\":\"debug\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u72b6\u614b\u8868\u793a\",\"active\":true,\"console\":\"false\",\"complete\":\"state\",\"x\":1161.6581726074219,\"y\":1084.6715087890625,\"wires\":[]},{\"id\":\"95c14cbc.6a3eb\",\"type\":\"inject\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"451+\",\"topic\":\"\",\"payload\":\"45+1\",\"payloadType\":\"string\",\"repeat\":\"\",\"crontab\":\"\",\"once\":false,\"x\":235.65817260742188,\"y\":1354.6715087890625,\"wires\":[[\"1ac45ea9.e53ba1\"]]},{\"id\":\"58eb4834.a714b8\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"State pattern\",\"info\":\"\",\"x\":217,\"y\":953,\"wires\":[]},{\"id\":\"b07b3995.4f84c8\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u6587\u5b57\u5217\u3092\u691c\u67fb\u3059\u308b\u305f\u3081\u306e\u72b6\u614b\u9077\u79fb\",\"info\":\"\",\"x\":433.5,\"y\":952.4287109375,\"wires\":[]},{\"id\":\"8f5096d8.70af68\",\"type\":\"comment\",\"z\":\"5e4dc05d.a1b24\",\"name\":\"\u691c\u67fb\u3059\u308b\u6587\u5b57\u5217\",\"info\":\"\",\"x\":227,\"y\":1074,\"wires\":[]}]\n```\n"}