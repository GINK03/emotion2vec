{"tags": ["Salesforce", "Visualforce", "Apex", "JSforce"], "context": "JSforce\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3002\u03c6(\uffe3\u30fc\uffe3 )\uff92\uff93\uff92\uff93\n\n\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\u3092\u53d6\u5f97\u3057\u305f\u3044\nJSForce\u3067\u306f\u3001\u30d5\u30eb\u30cd\u30fc\u30e0\u3067\u306e\u53c2\u7167\u306b\u306a\u308a\u307e\u3059\u3002\n\u30e1\u30bf\u30c7\u30fc\u30bf\u306a\u306e\u3067\u5f53\u7136\u3067\u3059\u304c\u3001ID \u3067\u306e\u53c2\u7167\u306f\u3067\u304d\u307e\u305b\u3093\u3002\n\u307e\u305f\u3001\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e ID \u306e\u53d6\u5f97\u3082\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3069\u3046\u3057\u3066\u3082 ID \u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u672c\u8a18\u4e8b\u4e0b\u90e8\u3092\u53c2\u7167\u3002\n\n\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\n<apex:page controller=\"CustomController\">\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/jsforce/1.7.0/jsforce.min.js\"></script>\n    <button onclick=\"readListView();\"> \u30d3\u30e5\u30fc\u8868\u793a </button>\n    <script>   \n        function readListView(){\n            var conn = new jsforce.Connection({ accessToken: '{!$Api.Session_Id}' });\n            var fullNames = [ 'Contact.All' ]; // \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d.\u5bfe\u8c61\u30d3\u30e5\u30fc\u306eAPI\u540d\n            conn.metadata.read('ListView', fullNames, function(err, metadata) {\n                if (err) { \n                    console.error(err); \n                } else {\n                    console.log(metadata);\n                }\n            });\n        }\n    </script>\n</apex:page>\n\n\n\n\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u66f4\u65b0\u3057\u305f\u3044\n\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u4f5c\u6210\u30fb\u66f4\u65b0\u306f\u3001\u30e1\u30bf\u60c5\u5831\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u66f4\u65b0\u306e\u5834\u5408\u3001\u5fc5\u9808\u9805\u76ee\u4ee5\u5916\u306f\u8a2d\u5b9a\u3057\u306a\u3051\u308c\u3070\u524d\u306e\u60c5\u5831\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u66f4\u65b0\n<apex:page controller=\"CustomController\">\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/jsforce/1.7.0/jsforce.min.js\"></script>\n    <button onclick=\"createListView();\"> \u30d3\u30e5\u30fc\u66f4\u65b0 </button>\n    <script>   \n    function createListView(){\n        var conn = new jsforce.Connection({ accessToken: '{!$Api.Session_Id}' });\n        var metadata = [{\n            booleanFilter: '1 AND 2',\n            columns:       ['FULL_NAME', 'CONTACT.EMAIL', 'CONTACT.BIRTHDATE', 'CustomField__c'],\n            filterScope:   'Everything',\n            filters:       [{ field : 'FULL_NAME', operation: 'contains', value: 'WEA' },\n                            { field : 'CONTACT.EMAIL', operation: 'contains', value: '@gmail.com' }],\n            sharedTo :     {}, // \u81ea\u5206\u3060\u3051\u306b\u8868\u793a\n            fullName:      'Contact.CustomView', // \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d.\u5bfe\u8c61\u30d3\u30e5\u30fc\u306eAPI\u540d\n            label:         '\u30ab\u30b9\u30bf\u30e0\u30d3\u30e5\u30fc',\n            language:      'ja'\n        }];        \n        conn.metadata.update('ListView', metadata, function(err, metadata) {\n            if (err) { \n                console.error(err);\n            } else {\n                console.log(metadata);\n            }\n        });\n    }\n  </script>\n</apex:page>\n\n\nListView Meta\u60c5\u5831\u306e\u5b9a\u7fa9\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\nMetadata API Developer Guide - ListView\n\n\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306eID\u3092\u53d6\u5f97\u3057\u305f\u3044\n\u7d76\u5bfe\u6b32\u3057\u304f\u306a\u308b\u306e\u3067\u3001JS Remoting\u3067\u5b9f\u88c5\u3057\u307e\u3057\u305f(Visualforce\u4e0a\u3067\u5b9f\u88c5\u306b\u9650\u308b)\n\u5e78\u3044\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306eAPI\u540d\u304c\u308f\u304b\u308b\u306e\u3067\u3001ListView.obj\u306eDeveloperName\u306b\u5f53\u3066\u3066ID\u3092\u5f15\u3063\u5f35\u308a\u51fa\u3057\u307e\u3059\u3002\n\nID\u3092\u53d6\u5f97\u3059\u308bjs\nfunction getListViewId(listViewName){\n    Visualforce.remoting.timeout = 120000;\n    Visualforce.remoting.Manager.invokeAction(\n        '{!$RemoteAction.DemCustomViewController.getListView}',\n        listViewName, // \n        function(result, event){\n            if (event.status) {\n                console.log(result.Id);\n            } \n        },\n        {escape: true}\n    );\n}\n\n\n\n\u4e0a\u8a18js\u3067\u547c\u3073\u51fa\u3055\u308c\u308bApex\u30b3\u30fc\u30c9\n@RemoteAction\nglobal static ListView getListView(String listViewName) {\n    return [SELECT Id, DeveloperName FROM ListView WHERE SobjectType = 'Contact' and DeveloperName = :listViewName][0];\n}\n\n\n[JSforce](https://jsforce.github.io/)\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3002\u03c6(\uffe3\u30fc\uffe3 )\uff92\uff93\uff92\uff93\n\n\n## \u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\u3092\u53d6\u5f97\u3057\u305f\u3044\nJSForce\u3067\u306f\u3001\u30d5\u30eb\u30cd\u30fc\u30e0\u3067\u306e\u53c2\u7167\u306b\u306a\u308a\u307e\u3059\u3002\n\u30e1\u30bf\u30c7\u30fc\u30bf\u306a\u306e\u3067\u5f53\u7136\u3067\u3059\u304c\u3001**ID \u3067\u306e\u53c2\u7167\u306f\u3067\u304d\u307e\u305b\u3093**\u3002\n\u307e\u305f\u3001\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e **ID \u306e\u53d6\u5f97\u3082\u3067\u304d\u307e\u305b\u3093**\u3067\u3057\u305f\u3002\n\u3069\u3046\u3057\u3066\u3082 ID \u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u672c\u8a18\u4e8b\u4e0b\u90e8\u3092\u53c2\u7167\u3002\n\n```html:\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u53d6\u5f97\n<apex:page controller=\"CustomController\">\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/jsforce/1.7.0/jsforce.min.js\"></script>\n    <button onclick=\"readListView();\"> \u30d3\u30e5\u30fc\u8868\u793a </button>\n    <script>   \n        function readListView(){\n            var conn = new jsforce.Connection({ accessToken: '{!$Api.Session_Id}' });\n            var fullNames = [ 'Contact.All' ]; // \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d.\u5bfe\u8c61\u30d3\u30e5\u30fc\u306eAPI\u540d\n            conn.metadata.read('ListView', fullNames, function(err, metadata) {\n                if (err) { \n                    console.error(err); \n                } else {\n                    console.log(metadata);\n                }\n            });\n        }\n    </script>\n</apex:page>\n```\n\n\n## \u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u66f4\u65b0\u3057\u305f\u3044\n\n\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u4f5c\u6210\u30fb\u66f4\u65b0\u306f\u3001\u30e1\u30bf\u60c5\u5831\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u66f4\u65b0\u306e\u5834\u5408\u3001\u5fc5\u9808\u9805\u76ee\u4ee5\u5916\u306f\u8a2d\u5b9a\u3057\u306a\u3051\u308c\u3070\u524d\u306e\u60c5\u5831\u304c\u5f15\u304d\u7d99\u304c\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n\n```html:\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306e\u30e1\u30bf\u60c5\u5831\u3092\u66f4\u65b0\n<apex:page controller=\"CustomController\">\n    <script src=\"//cdnjs.cloudflare.com/ajax/libs/jsforce/1.7.0/jsforce.min.js\"></script>\n    <button onclick=\"createListView();\"> \u30d3\u30e5\u30fc\u66f4\u65b0 </button>\n    <script>   \n    function createListView(){\n        var conn = new jsforce.Connection({ accessToken: '{!$Api.Session_Id}' });\n        var metadata = [{\n            booleanFilter: '1 AND 2',\n            columns:       ['FULL_NAME', 'CONTACT.EMAIL', 'CONTACT.BIRTHDATE', 'CustomField__c'],\n            filterScope:   'Everything',\n            filters:       [{ field : 'FULL_NAME', operation: 'contains', value: 'WEA' },\n                            { field : 'CONTACT.EMAIL', operation: 'contains', value: '@gmail.com' }],\n            sharedTo :     {}, // \u81ea\u5206\u3060\u3051\u306b\u8868\u793a\n            fullName:      'Contact.CustomView', // \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u540d.\u5bfe\u8c61\u30d3\u30e5\u30fc\u306eAPI\u540d\n            label:         '\u30ab\u30b9\u30bf\u30e0\u30d3\u30e5\u30fc',\n            language:      'ja'\n        }];        \n        conn.metadata.update('ListView', metadata, function(err, metadata) {\n            if (err) { \n                console.error(err);\n            } else {\n                console.log(metadata);\n            }\n        });\n    }\n  </script>\n</apex:page>\n```\nListView Meta\u60c5\u5831\u306e\u5b9a\u7fa9\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\n[Metadata API Developer Guide - ListView](https://developer.salesforce.com/docs/atlas.en-us.api_meta.meta/api_meta/meta_listview.htm)\n\n\n## \u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306eID\u3092\u53d6\u5f97\u3057\u305f\u3044\n\u7d76\u5bfe\u6b32\u3057\u304f\u306a\u308b\u306e\u3067\u3001JS Remoting\u3067\u5b9f\u88c5\u3057\u307e\u3057\u305f(Visualforce\u4e0a\u3067\u5b9f\u88c5\u306b\u9650\u308b)\n\u5e78\u3044\u30ea\u30b9\u30c8\u30d3\u30e5\u30fc\u306eAPI\u540d\u304c\u308f\u304b\u308b\u306e\u3067\u3001`ListView.obj`\u306e`DeveloperName`\u306b\u5f53\u3066\u3066ID\u3092\u5f15\u3063\u5f35\u308a\u51fa\u3057\u307e\u3059\u3002\n\n```js:ID\u3092\u53d6\u5f97\u3059\u308bjs\nfunction getListViewId(listViewName){\n    Visualforce.remoting.timeout = 120000;\n    Visualforce.remoting.Manager.invokeAction(\n        '{!$RemoteAction.DemCustomViewController.getListView}',\n        listViewName, // \n        function(result, event){\n            if (event.status) {\n                console.log(result.Id);\n            } \n        },\n        {escape: true}\n    );\n}\n```\n\n```java:\u4e0a\u8a18js\u3067\u547c\u3073\u51fa\u3055\u308c\u308bApex\u30b3\u30fc\u30c9\n@RemoteAction\nglobal static ListView getListView(String listViewName) {\n    return [SELECT Id, DeveloperName FROM ListView WHERE SobjectType = 'Contact' and DeveloperName = :listViewName][0];\n}\n```\n"}