{"context": "Android\u30a2\u30d7\u30ea\u306f\u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u7c21\u5358\u306b\u8997\u3051\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30a2\u30d7\u30ea\u306e\u8106\u5f31\u6027\u3092\u7a81\u304f\u653b\u6483\u306e\u7cf8\u53e3\u306b\u3055\u308c\u305f\u308a\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u76d7\u7528\u3055\u308c\u308b\u306a\u3069\u304c\u8d77\u3053\u3063\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u5bfe\u7b56\u306e\u305f\u3081\u3001ProGuard\u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u96e3\u8aad\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u74b0\u5883\n\nOS X EL Capitan 10.11.1\nAndroid SDK\n\n\nAPI Level 19\n\n\n\n\n\u57fa\u672c\u8a2d\u5b9a\nproject.properties\u306e\u4ee5\u4e0b\u306e\u884c\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3057\u307e\u3059\u3002\nproguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt\n\n\nAPK\u306e\u4f5c\u6210\n\u30ea\u30ea\u30fc\u30b9\u30d3\u30eb\u30c9\u306e\u4f5c\u6210\u3067\u96e3\u8aad\u5316\u3055\u308c\u307e\u3059\u3002\u30c7\u30d0\u30c3\u30b0\u30d3\u30eb\u30c9\u3067\u306f\u96e3\u8aad\u5316\u3055\u308c\u307e\u305b\u3093\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af-> Android Tools -> Export Signed Application Package\n\n\u9664\u5916\u8a2d\u5b9a\u306e\u6d41\u308c\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fAPK\u5185\u306eJar\u30d5\u30a1\u30a4\u30eb\u3092\u5168\u3066\u96e3\u8aad\u5316\u3057\u3088\u3046\u3068\u3059\u308b\u305f\u3081\u3001\u305d\u306e\u307e\u307e\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059\u3002\n\u57fa\u672c\u7684\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30ed\u30fc\u3092\u7e70\u308a\u8fd4\u3057\u3066\u96e3\u8aad\u5316\u306b\u6311\u6226\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\nAPK\u4f5c\u6210\u6210\u529f\u307e\u3067\n\nAPK\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30ea\u30fc\u30b9\u30d3\u30eb\u30c9\n\u30a8\u30e9\u30fc\u767a\u751f\n\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u30a8\u30e9\u30fc\u5185\u5bb9\u3092\u78ba\u8a8d\n\nproguard-project.txt\u3092\u4fee\u6b63\n\n\u52d5\u4f5c\u78ba\u8a8d\u5b8c\u4e86\u307e\u3067\n\nAPK\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u57fa\u672c\u52d5\u4f5c\u3092\u78ba\u8a8d\n\u30a8\u30e9\u30fc\u767a\u751f(logcat\u306a\u3069\u3067\u78ba\u8a8d)\n\nproguard-project.txt\u3092\u4fee\u6b63\n\n\u53c2\u8003\u307e\u3067\u306b\u3001AWS-SDK for Android\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n-keep class org.apache.commons.logging.**               { *; }\n-keep class com.amazonaws.services.sqs.QueueUrlHandler  { *; }\n-keep class com.amazonaws.javax.xml.transform.sax.*     { public *; }\n-keep class com.amazonaws.javax.xml.stream.**           { *; }\n-keep class com.amazonaws.services.**.model.*Exception* { *; }\n-keep class org.codehaus.**                             { *; }\n-keepattributes Signature,*Annotation*\n\n-dontwarn javax.xml.stream.events.**\n-dontwarn org.codehaus.jackson.**\n-dontwarn org.apache.commons.logging.impl.**\n-dontwarn org.apache.http.conn.scheme.**\n\n\nUsing ProGuard with the AWS SDK for Android - AWS Developer Blog - Mobile\n\n\n\u78ba\u8a8d\nAPK\u3092\u89e3\u51cd\u30fb\u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u96e3\u8aad\u5316\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ndex2jar\nclasses.dex\u3092jar\u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u9069\u5b9c\u89e3\u51cd\u30fb\u30d1\u30b9\u3092\u901a\u3057\u307e\u3059\u3002\npxb1988/dex2jar\njad\n.class\u30d5\u30a1\u30a4\u30eb\u3092\u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\nbrew\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ brew install homebrew/binary/jad\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u78ba\u8a8d\n# \u96e3\u8aad\u5316\u3057\u305f\u30bd\u30fc\u30b9\u51fa\u529b\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n$ rm -rf output && mkdir output\n\n# APK\u3092\u5c55\u958b\n$ unzip xxx.apk -d output/unzipped_apk\n$ pushd output/unzipped_apk\n\n# classes.dex\u3092jar\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\n$ dex2jar.sh classes.dex\n$ popd\n\n# classes.dex\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092\u5c55\u958b\n$ unzip output/unzipped_apk/classes_dex2jar.jar -d output/unzipped_dex\n\n# \u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\n$ jad -8 -d output/decompiled_dex -s .java -r output/unzipped_dex/**/*.class\n\n# \u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\n$ ls -la output/decompiled_dex\n\n\n\u983b\u51fa\u306e\u30a8\u30e9\u30fc\nActivity\nActivity\u306f\u96e3\u8aad\u5316\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u306e\u3067\u9664\u5916\u3057\u307e\u3059\u3002\n-keepclassmembers class * extends android.app.Activity {\n   public void *(android.view.View);\n}\n\ncan't find referenced xxx\n\u30e9\u30a4\u30d6\u30e9\u30ea\u5185\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u304c\u5404\u30ed\u30b8\u30c3\u30af\u304b\u3089\u53c2\u7167\u3055\u308c\u3066\u3044\u306a\u3044\u30af\u30e9\u30b9\u306b\u5bfe\u3057\u3066\u306e\u8b66\u544a\u3067\u3059\u3002\u4e0d\u8981\u306a\u306e\u3067\u9664\u5916\u3057\u307e\u3059\u3002\n# -dontwarn <\u30af\u30e9\u30b9\u540d>\n# -dontwarn <\u30d1\u30c3\u30b1\u30fc\u30b8\u540d>.*\n# \u4f8b:\n-dontwarn lombok.Lombok\n\n\n\u53c2\u8003\u30ea\u30f3\u30af\n\u516c\u5f0f:\n\nProGuard\n\nAWS:\n\nUsing ProGuard with the AWS SDK for Android - AWS Developer Blog - Mobile\n\n\u30a8\u30e9\u30fc:\n\nAdd Proguard for Jackson JSON Processor \u00b7 Issue #19 \u00b7 krschultz/android-proguard-snippets\nAndroid Proguard - IllegalArgumentException in Jackson's TypeReference class - Stack Overflow\njava - Using ProGuard with Android - Stack Overflow\njava - ProGuard obfuscation leads to ClassNotFoundException - Stack Overflow\n\nAndroid\u30a2\u30d7\u30ea\u306f\u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u3068\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u7c21\u5358\u306b\u8997\u3051\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u30a2\u30d7\u30ea\u306e\u8106\u5f31\u6027\u3092\u7a81\u304f\u653b\u6483\u306e\u7cf8\u53e3\u306b\u3055\u308c\u305f\u308a\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u76d7\u7528\u3055\u308c\u308b\u306a\u3069\u304c\u8d77\u3053\u3063\u3066\u3057\u307e\u3046\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u5bfe\u7b56\u306e\u305f\u3081\u3001ProGuard\u3092\u4f7f\u3063\u3066\u30a2\u30d7\u30ea\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u96e3\u8aad\u5316\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n## \u74b0\u5883\n\n* OS X EL Capitan 10.11.1\n* Android SDK\n    * API Level 19\n\n## \u57fa\u672c\u8a2d\u5b9a\n\n`project.properties`\u306e\u4ee5\u4e0b\u306e\u884c\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3057\u307e\u3059\u3002\n\n```\nproguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt\n```\n\n### APK\u306e\u4f5c\u6210\n\n\u30ea\u30ea\u30fc\u30b9\u30d3\u30eb\u30c9\u306e\u4f5c\u6210\u3067\u96e3\u8aad\u5316\u3055\u308c\u307e\u3059\u3002\u30c7\u30d0\u30c3\u30b0\u30d3\u30eb\u30c9\u3067\u306f\u96e3\u8aad\u5316\u3055\u308c\u307e\u305b\u3093\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u53f3\u30af\u30ea\u30c3\u30af-> Android Tools -> Export Signed Application Package\n\n## \u9664\u5916\u8a2d\u5b9a\u306e\u6d41\u308c\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fAPK\u5185\u306eJar\u30d5\u30a1\u30a4\u30eb\u3092\u5168\u3066\u96e3\u8aad\u5316\u3057\u3088\u3046\u3068\u3059\u308b\u305f\u3081\u3001\u305d\u306e\u307e\u307e\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059\u3002\n\u57fa\u672c\u7684\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30ed\u30fc\u3092\u7e70\u308a\u8fd4\u3057\u3066\u96e3\u8aad\u5316\u306b\u6311\u6226\u3059\u308b\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n*APK\u4f5c\u6210\u6210\u529f\u307e\u3067*\n\n1. APK\u30d5\u30a1\u30a4\u30eb\u3092\u30ea\u30ea\u30fc\u30b9\u30d3\u30eb\u30c9\n2. \u30a8\u30e9\u30fc\u767a\u751f\n3. \u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u30a8\u30e9\u30fc\u5185\u5bb9\u3092\u78ba\u8a8d\n4. `proguard-project.txt`\u3092\u4fee\u6b63\n\n*\u52d5\u4f5c\u78ba\u8a8d\u5b8c\u4e86\u307e\u3067*\n\n1. APK\u30d5\u30a1\u30a4\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n2. \u57fa\u672c\u52d5\u4f5c\u3092\u78ba\u8a8d\n3. \u30a8\u30e9\u30fc\u767a\u751f(logcat\u306a\u3069\u3067\u78ba\u8a8d)\n4. `proguard-project.txt`\u3092\u4fee\u6b63\n\n\n\u53c2\u8003\u307e\u3067\u306b\u3001AWS-SDK for Android\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n-keep class org.apache.commons.logging.**               { *; }\n-keep class com.amazonaws.services.sqs.QueueUrlHandler  { *; }\n-keep class com.amazonaws.javax.xml.transform.sax.*     { public *; }\n-keep class com.amazonaws.javax.xml.stream.**           { *; }\n-keep class com.amazonaws.services.**.model.*Exception* { *; }\n-keep class org.codehaus.**                             { *; }\n-keepattributes Signature,*Annotation*\n \n-dontwarn javax.xml.stream.events.**\n-dontwarn org.codehaus.jackson.**\n-dontwarn org.apache.commons.logging.impl.**\n-dontwarn org.apache.http.conn.scheme.**\n```\n\n* [Using ProGuard with the AWS SDK for Android - AWS Developer Blog - Mobile](https://mobile.awsblog.com/post/Tx2OC71PFCTC63E/Using-ProGuard-with-the-AWS-SDK-for-Android)\n\n## \u78ba\u8a8d\n\nAPK\u3092\u89e3\u51cd\u30fb\u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u96e3\u8aad\u5316\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n### \u30c4\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n*dex2jar*\n\nclasses.dex\u3092jar\u306b\u5909\u63db\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u9069\u5b9c\u89e3\u51cd\u30fb\u30d1\u30b9\u3092\u901a\u3057\u307e\u3059\u3002\n\n[pxb1988/dex2jar](https://github.com/pxb1988/dex2jar)\n\n*jad*\n\n.class\u30d5\u30a1\u30a4\u30eb\u3092\u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\nbrew\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ brew install homebrew/binary/jad\n```\n\n### \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u78ba\u8a8d\n\n```bash\n# \u96e3\u8aad\u5316\u3057\u305f\u30bd\u30fc\u30b9\u51fa\u529b\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n$ rm -rf output && mkdir output\n\n# APK\u3092\u5c55\u958b\n$ unzip xxx.apk -d output/unzipped_apk\n$ pushd output/unzipped_apk\n\n# classes.dex\u3092jar\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u63db\n$ dex2jar.sh classes.dex\n$ popd\n\n# classes.dex\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092\u5c55\u958b\n$ unzip output/unzipped_apk/classes_dex2jar.jar -d output/unzipped_dex\n\n# \u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\n$ jad -8 -d output/decompiled_dex -s .java -r output/unzipped_dex/**/*.class\n\n# \u30c7\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\n$ ls -la output/decompiled_dex\n```\n\n## \u983b\u51fa\u306e\u30a8\u30e9\u30fc\n\n*Activity*\n\nActivity\u306f\u96e3\u8aad\u5316\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u306e\u3067\u9664\u5916\u3057\u307e\u3059\u3002\n\n```\n-keepclassmembers class * extends android.app.Activity {\n   public void *(android.view.View);\n}\n```\n\n*can't find referenced xxx*\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u5185\u3067\u5ba3\u8a00\u3055\u308c\u3066\u3044\u308b\u304c\u5404\u30ed\u30b8\u30c3\u30af\u304b\u3089\u53c2\u7167\u3055\u308c\u3066\u3044\u306a\u3044\u30af\u30e9\u30b9\u306b\u5bfe\u3057\u3066\u306e\u8b66\u544a\u3067\u3059\u3002\u4e0d\u8981\u306a\u306e\u3067\u9664\u5916\u3057\u307e\u3059\u3002\n\n```\n# -dontwarn <\u30af\u30e9\u30b9\u540d>\n# -dontwarn <\u30d1\u30c3\u30b1\u30fc\u30b8\u540d>.*\n# \u4f8b:\n-dontwarn lombok.Lombok\n```\n\n## \u53c2\u8003\u30ea\u30f3\u30af\n\n\u516c\u5f0f:\n\n* [ProGuard](http://proguard.sourceforge.net/)\n\nAWS:\n\n* [Using ProGuard with the AWS SDK for Android - AWS Developer Blog - Mobile](https://mobile.awsblog.com/post/Tx2OC71PFCTC63E/Using-ProGuard-with-the-AWS-SDK-for-Android)\n\n\u30a8\u30e9\u30fc:\n\n* [Add Proguard for Jackson JSON Processor \u00b7 Issue #19 \u00b7 krschultz/android-proguard-snippets](https://github.com/krschultz/android-proguard-snippets/issues/19)\n* [Android Proguard - IllegalArgumentException in Jackson's TypeReference class - Stack Overflow](http://stackoverflow.com/questions/9282721/android-proguard-illegalargumentexception-in-jacksons-typereference-class)\n* [java - Using ProGuard with Android - Stack Overflow](http://stackoverflow.com/questions/11246842/using-proguard-with-android/11249755#11249755)\n* [java - ProGuard obfuscation leads to ClassNotFoundException - Stack Overflow](http://stackoverflow.com/questions/26557090/proguard-obfuscation-leads-to-classnotfoundexception)\n", "tags": ["Android", "Proguard"]}