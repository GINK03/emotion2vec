{"context": "\u30e1\u30a4\u30f3\u30c6\u30fc\u30d6\u30eb \u3092 2\u3064\u3002\nUsers\nid name\nWriters\nid name\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\nUsersWriters\nid name type(\u3053\u308c\u3067\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u305f\u3044)\n\u305d\u308c\u305e\u308c\u95a2\u9023\u4ed8\u3051\nUsersTable.php\n\n$this->belongsToMany('Writers', [\n            'joinTable' => 'users_writers',\n            'foreignKey' => 'writer_id'\n        ]);\n\n\nWritersTable.php\n\n        $this->belongsToMany('Users', [\n            'joinTable' => 'users_writers',\n            'foreignKey' => 'writer_id'\n        ]);\n\n$this->hasMany('UsersWriters', [\n            'foreignKey' => 'writer_id'\n        ]);\n\n\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\nUsersWritersTable\n\n$this->table('users_writers');\n$this->belongsTo('Users');\n\n\n\u3067\u9069\u5f53\u306a\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3067\n\n$res = $this->Writers->find()\n            ->matching('UsersWriters', function ($q) {\n                return $q\n                    ->where(['type' => 0])\n//                    ->contain([\n//                        'Users' => function ($q) {\n//                        return $q->contain(['Sites']);//\u3055\u3089\u306b\u30b5\u30a4\u30c8\u60c5\u5831\u3092\u8aad\u307f\u51fa\u3059\u5834\u5408\n//                    }\n//                    ]);\n            })\n\n            ->first();\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3092\u6761\u4ef6\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u51fa\u305b\u308b\u3002\n\u30e1\u30a4\u30f3\u30c6\u30fc\u30d6\u30eb \u3092 2\u3064\u3002\n\nUsers\nid name\n\nWriters\nid name\n\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\nUsersWriters\n\nid name type(\u3053\u308c\u3067\u6761\u4ef6\u3092\u6307\u5b9a\u3057\u3066\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u305f\u3044)\n\n\n\n\u305d\u308c\u305e\u308c\u95a2\u9023\u4ed8\u3051\n\nUsersTable.php\n\n```\n\n$this->belongsToMany('Writers', [\n            'joinTable' => 'users_writers',\n            'foreignKey' => 'writer_id'\n        ]);\n\n```\n\n\nWritersTable.php\n\n```\n\n        $this->belongsToMany('Users', [\n            'joinTable' => 'users_writers',\n            'foreignKey' => 'writer_id'\n        ]);\n\n$this->hasMany('UsersWriters', [\n            'foreignKey' => 'writer_id'\n        ]);\n\n```\n\n\n\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\nUsersWritersTable\n\n```\n\n$this->table('users_writers');\n$this->belongsTo('Users');\n\n```\n\n\n\u3067\u9069\u5f53\u306a\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3067\n\n```\n\n$res = $this->Writers->find()\n            ->matching('UsersWriters', function ($q) {\n                return $q\n                    ->where(['type' => 0])\n//                    ->contain([\n//                        'Users' => function ($q) {\n//                        return $q->contain(['Sites']);//\u3055\u3089\u306b\u30b5\u30a4\u30c8\u60c5\u5831\u3092\u8aad\u307f\u51fa\u3059\u5834\u5408\n//                    }\n//                    ]);\n            })\n\n            ->first();\n\n```\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u4e2d\u9593\u30c6\u30fc\u30d6\u30eb\u3092\u6761\u4ef6\u306b\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u51fa\u305b\u308b\u3002\n", "tags": ["cakephp3"]}