{"context": "\n\n\u6982\u8981\n\ngo\u3067redis\u64cd\u4f5c\u3059\u308b\u5b9a\u756a\u306eredigo\u304credis cluster\u5bfe\u5fdc\u3055\u308c\u3066\u306a\u3044\u306e\u3067\u3001SET GET\u306a\u3069\u51fa\u6765\u306a\u3044\n\u4e00\u5fdcPR\u306f\u51fa\u3066\u308b\u3002https://github.com/garyburd/redigo/pull/170\n\n\nredis-go-cluster\u306f\u5bfe\u5fdc\u3057\u3066\u308b\u3063\u307d\u3044\n\n\n\u554f\u984c\u70b9\n\n\nredis-go-cluster\u3067\u3082\u3084\u3063\u3066\u308b\u3088\u3046\u306b\u3001\u8907\u6570Node\u306e\u9078\u629e\u304c\u51fa\u6765\u306a\u3044\nNode\u9078\u629e\u304c\u51fa\u6765\u306a\u3044\u306e\u3067\u3001MOVED 1525 127.0.0.1:6379\uff08\u5024\u304c\u5225\u306eNode\u306b\u683c\u7d0d\u3055\u308c\u3066\u308b\u3088\uff01\u3068\u3044\u3046\u30a8\u30e9\u30fc\uff09\u304c\u8fd4\u3063\u3066\u304f\u308b\n\n\n\u8abf\u67fb\n\n\nhttps://github.com/garyburd/redigo/pull/170 \u3092\u30d6\u30e9\u30f3\u30c1\u5207\u3063\u3066\u5b9f\u9a13\n\u30ce\u30fc\u30c9\u60c5\u5831\u306f\u4e0b\u8a18\u306e\u901a\u308a\n\n\n\n\nNode\nIP\u3068Port\n\n\n\n\nNode1\n127.0.0.1:6379\n\n\nNode2\n127.0.0.1:6380\n\n\nNode3\n127.0.0.1:6381\n\n\n\n\n\u901a\u5e38\u30e1\u30bd\u30c3\u30c9\u3067\u306eSET GET\npackage main\n\nimport (\n    \"fmt\"\n    \"os\"\n\n    // https://github.com/garyburd/redigo/pull/170\u3000\u5206\u3092branch\u5207\u3063\u3066\u308b\u72b6\u614b\n    \"github.com/garyburd/redigo/redis\"\n)\n\nfunc main() {\n    c, err := redis.Dial(\"tcp\", \"127.0.0.1:6380\") // \u308f\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u3053\u306e\u30dd\u30fc\u30c8\u3067\n\n    if err != nil {\n        fmt.Println(err)\n        os.Exit(1)\n    }\n\n    // Connection Close\n    defer c.Close()\n\n    // SET\n    t, err := c.Do(\"SET\", \"hoge\", \"fuga\")\n    if err != nil {\n        fmt.Println(\"SET_ERR\", err)\n    }\n    fmt.Printf(\"SET: %#v\\n\", t)\n\n    // GET\n    s, err := redis.String(c.Do(\"GET\", \"hoge\"))\n    if err != nil {\n        fmt.Println(\"GET_ERR\", err)\n    }\n    fmt.Printf(\"GET: %#v\\n\", s)\n}\n\n// SET_ERR MOVED 1525 127.0.0.1:6379\n// SET: \"MOVED 1525 127.0.0.1:6379\"\n// GET_ERR MOVED 1525 127.0.0.1:6379\n// GET: \"\"\n\n\nCluster\u7528\u30e1\u30bd\u30c3\u30c9\u3092\u7528\u3044\u305f\u306eSET GET\npackage main\n\nimport (\n    \"fmt\"\n    \"os\"\n\n    // https://github.com/garyburd/redigo/pull/170\u3000\u5206\u3092branch\u5207\u3063\u3066\u308b\u72b6\u614b\n    \"github.com/garyburd/redigo/redis\"\n)\n\nfunc main() {\n    c, err := redis.NewCluster(\"tcp\", []string{\"127.0.0.1:6379\", \"127.0.0.1:6380\", \"127.0.0.1:6381\"})\n\n    if err != nil {\n        fmt.Println(err)\n        os.Exit(1)\n    }\n\n    // Connection Close\n    defer c.Close()\n\n    // SET\n    t, err := c.Do(\"SET\", \"hoge\", \"fuga\")\n    if err != nil {\n        fmt.Println(\"SET_ERR\", err)\n    }\n    fmt.Printf(\"SET: %#v\\n\", t)\n\n    // GET\n    s, err := redis.String(c.Do(\"GET\", \"hoge\"))\n    if err != nil {\n        fmt.Println(\"GET_ERR\", err)\n    }\n    fmt.Printf(\"GET: %#v\\n\", s)\n}\n\n// SET: \"OK\"\n// GET: \"fuga\"\n\n\n\u6700\u5f8c\u306b\n\n\u65e9\u304fmerge\u3055\u308c\u3066\u6b32\u3057\u3044\n\nhttps://github.com/garyburd/redigo/pull/170\u3000\u304cmerge\u3055\u308c\u305f\u3089\u3053\u306e\u8a18\u4e8b\u306f\u6d88\u3057\u307e\u3059\n\n# \u6982\u8981\n* go\u3067redis\u64cd\u4f5c\u3059\u308b\u5b9a\u756a\u306e[redigo](https://github.com/garyburd/redigo)\u304credis cluster\u5bfe\u5fdc\u3055\u308c\u3066\u306a\u3044\u306e\u3067\u3001SET GET\u306a\u3069\u51fa\u6765\u306a\u3044\n* \u4e00\u5fdcPR\u306f\u51fa\u3066\u308b\u3002[https://github.com/garyburd/redigo/pull/170](https://github.com/garyburd/redigo/pull/170)\n* [redis-go-cluster](https://github.com/chasex/redis-go-cluster)\u306f\u5bfe\u5fdc\u3057\u3066\u308b\u3063\u307d\u3044\n\n# \u554f\u984c\u70b9\n* [redis-go-cluster](https://github.com/chasex/redis-go-cluster)\u3067\u3082\u3084\u3063\u3066\u308b\u3088\u3046\u306b\u3001\u8907\u6570Node\u306e\u9078\u629e\u304c\u51fa\u6765\u306a\u3044\n* Node\u9078\u629e\u304c\u51fa\u6765\u306a\u3044\u306e\u3067\u3001<br>`MOVED 1525 127.0.0.1:6379`\uff08\u5024\u304c\u5225\u306eNode\u306b\u683c\u7d0d\u3055\u308c\u3066\u308b\u3088\uff01\u3068\u3044\u3046\u30a8\u30e9\u30fc\uff09\u304c\u8fd4\u3063\u3066\u304f\u308b\n\n# \u8abf\u67fb\n* https://github.com/garyburd/redigo/pull/170 \u3092\u30d6\u30e9\u30f3\u30c1\u5207\u3063\u3066\u5b9f\u9a13\n* \u30ce\u30fc\u30c9\u60c5\u5831\u306f\u4e0b\u8a18\u306e\u901a\u308a\n\n|Node|IP\u3068Port|\n|:---|:---|\n|Node1|127.0.0.1:6379|\n|Node2|127.0.0.1:6380|\n|Node3|127.0.0.1:6381|\n\n## \u901a\u5e38\u30e1\u30bd\u30c3\u30c9\u3067\u306eSET GET\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\n\t// https://github.com/garyburd/redigo/pull/170\u3000\u5206\u3092branch\u5207\u3063\u3066\u308b\u72b6\u614b\n\t\"github.com/garyburd/redigo/redis\"\n)\n\nfunc main() {\n\tc, err := redis.Dial(\"tcp\", \"127.0.0.1:6380\") // \u308f\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u3053\u306e\u30dd\u30fc\u30c8\u3067\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\n\t// Connection Close\n\tdefer c.Close()\n\n\t// SET\n\tt, err := c.Do(\"SET\", \"hoge\", \"fuga\")\n\tif err != nil {\n\t\tfmt.Println(\"SET_ERR\", err)\n\t}\n\tfmt.Printf(\"SET: %#v\\n\", t)\n\n\t// GET\n\ts, err := redis.String(c.Do(\"GET\", \"hoge\"))\n\tif err != nil {\n\t\tfmt.Println(\"GET_ERR\", err)\n\t}\n\tfmt.Printf(\"GET: %#v\\n\", s)\n}\n\n// SET_ERR MOVED 1525 127.0.0.1:6379\n// SET: \"MOVED 1525 127.0.0.1:6379\"\n// GET_ERR MOVED 1525 127.0.0.1:6379\n// GET: \"\"\n```\n\n\n## Cluster\u7528\u30e1\u30bd\u30c3\u30c9\u3092\u7528\u3044\u305f\u306eSET GET\n\n```go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"os\"\n\n\t// https://github.com/garyburd/redigo/pull/170\u3000\u5206\u3092branch\u5207\u3063\u3066\u308b\u72b6\u614b\n\t\"github.com/garyburd/redigo/redis\"\n)\n\nfunc main() {\n\tc, err := redis.NewCluster(\"tcp\", []string{\"127.0.0.1:6379\", \"127.0.0.1:6380\", \"127.0.0.1:6381\"})\n\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\tos.Exit(1)\n\t}\n\n\t// Connection Close\n\tdefer c.Close()\n\n\t// SET\n\tt, err := c.Do(\"SET\", \"hoge\", \"fuga\")\n\tif err != nil {\n\t\tfmt.Println(\"SET_ERR\", err)\n\t}\n\tfmt.Printf(\"SET: %#v\\n\", t)\n\n\t// GET\n\ts, err := redis.String(c.Do(\"GET\", \"hoge\"))\n\tif err != nil {\n\t\tfmt.Println(\"GET_ERR\", err)\n\t}\n\tfmt.Printf(\"GET: %#v\\n\", s)\n}\n\n// SET: \"OK\"\n// GET: \"fuga\"\n```\n\n# \u6700\u5f8c\u306b\n* \u65e9\u304fmerge\u3055\u308c\u3066\u6b32\u3057\u3044\n* [https://github.com/garyburd/redigo/pull/170](https://github.com/garyburd/redigo/pull/170)\u3000\u304cmerge\u3055\u308c\u305f\u3089\u3053\u306e\u8a18\u4e8b\u306f\u6d88\u3057\u307e\u3059\n", "tags": ["Go", "Redis-cluster", "Redis"]}