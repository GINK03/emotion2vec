{"context": " More than 1 year has passed since last update.\u306a\u3093\u304b\u3060\u304b\u9762\u5012\u304f\u3055\u3044\u3051\u3069\u3001\u3053\u308c\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3044\u3093\u3060\u308d\u3046\u304b\u3002\nstatic NSDictionary *getExifFromData(NSData * const data)\n{\n    CFStringRef imageSourceOptionKeys[2];\n    CFTypeRef imageSourceOptionValues[2];\n    imageSourceOptionKeys[0] = kCGImageSourceShouldCache;\n    imageSourceOptionValues[0] = kCFBooleanTrue;\n    imageSourceOptionKeys[1] = kCGImageSourceShouldAllowFloat;\n    imageSourceOptionValues[1] = kCFBooleanTrue;\n\n    CFDictionaryRef imageSourceOptions = CFDictionaryCreate(\n            NULL,\n            (const void **)imageSourceOptionKeys,\n            (const void**)imageSourceOptionValues,\n            sizeof(imageSourceOptionKeys) / sizeof(imageSourceOptionKeys[0]),\n            &kCFTypeDictionaryKeyCallBacks,\n            &kCFTypeDictionaryValueCallBacks);\n\n\n    CGImageSourceRef imageSourceRef = CGImageSourceCreateWithData((__bridge CFDataRef) data,  imageSourceOptions);\n    CFRelease(imageSourceOptions);\n\n    CFDictionaryRef imagePropertiesDictionary = CGImageSourceCopyPropertiesAtIndex(imageSourceRef, 0, NULL);\n\n    NSDictionary *exif = (__bridge NSDictionary *)CFDictionaryGetValue(imagePropertiesDictionary, kCGImagePropertyExifDictionary);\n\n    CFRelease(imageSourceRef);\n\n    return exif;\n}\n\n\u3046\u307e\u304f\u3044\u304f\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30e1\u30bf\u30c7\u30fc\u30bf\u304c\u3068\u308c\u308b\u3002\n// NSLog(\"exif: %@, exif);\nexif: {\n    ColorSpace = 1;\n    ComponentsConfiguration =     (\n        1,\n        2,\n        3,\n        0\n    );\n    DateTimeDigitized = \"2012:10:15 20:57:48\";\n    DateTimeOriginal = \"2012:10:15 20:57:48\";\n    ExifVersion =     (\n        2,\n        2,\n        1\n    );\n    FlashPixVersion =     (\n        1,\n        0\n    );\n    PixelXDimension = 1536;\n    PixelYDimension = 1536;\n    SceneCaptureType = 0;\n}\n\n\u53c2\u8003\u6587\u732e:\n\nImage I/O Programming Guide: Creating and Using Image Sources\niphone - Get Exif data from UIImage - UIImagePickerController - Stack Overflow\n\n\n\u306a\u3093\u304b\u3060\u304b\u9762\u5012\u304f\u3055\u3044\u3051\u3069\u3001\u3053\u308c\u30e9\u30a4\u30d6\u30e9\u30ea\u306a\u3044\u3093\u3060\u308d\u3046\u304b\u3002\n\n```objc\nstatic NSDictionary *getExifFromData(NSData * const data)\n{\n    CFStringRef imageSourceOptionKeys[2];\n    CFTypeRef imageSourceOptionValues[2];\n    imageSourceOptionKeys[0] = kCGImageSourceShouldCache;\n    imageSourceOptionValues[0] = kCFBooleanTrue;\n    imageSourceOptionKeys[1] = kCGImageSourceShouldAllowFloat;\n    imageSourceOptionValues[1] = kCFBooleanTrue;\n\n    CFDictionaryRef imageSourceOptions = CFDictionaryCreate(\n            NULL,\n            (const void **)imageSourceOptionKeys,\n            (const void**)imageSourceOptionValues,\n            sizeof(imageSourceOptionKeys) / sizeof(imageSourceOptionKeys[0]),\n            &kCFTypeDictionaryKeyCallBacks,\n            &kCFTypeDictionaryValueCallBacks);\n\n\n    CGImageSourceRef imageSourceRef = CGImageSourceCreateWithData((__bridge CFDataRef) data,  imageSourceOptions);\n    CFRelease(imageSourceOptions);\n\n    CFDictionaryRef imagePropertiesDictionary = CGImageSourceCopyPropertiesAtIndex(imageSourceRef, 0, NULL);\n\n    NSDictionary *exif = (__bridge NSDictionary *)CFDictionaryGetValue(imagePropertiesDictionary, kCGImagePropertyExifDictionary);\n\n    CFRelease(imageSourceRef);\n\n    return exif;\n}\n```\n\n\u3046\u307e\u304f\u3044\u304f\u3068\u4ee5\u4e0b\u306e\u69d8\u306a\u30e1\u30bf\u30c7\u30fc\u30bf\u304c\u3068\u308c\u308b\u3002\n\n```\n// NSLog(\"exif: %@, exif);\nexif: {\n    ColorSpace = 1;\n    ComponentsConfiguration =     (\n        1,\n        2,\n        3,\n        0\n    );\n    DateTimeDigitized = \"2012:10:15 20:57:48\";\n    DateTimeOriginal = \"2012:10:15 20:57:48\";\n    ExifVersion =     (\n        2,\n        2,\n        1\n    );\n    FlashPixVersion =     (\n        1,\n        0\n    );\n    PixelXDimension = 1536;\n    PixelYDimension = 1536;\n    SceneCaptureType = 0;\n}\n```\n\n\u53c2\u8003\u6587\u732e:\n\n* [Image I/O Programming Guide: Creating and Using Image Sources](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/ImageIOGuide/imageio_source/ikpg_source.html)\n* [iphone - Get Exif data from UIImage - UIImagePickerController - Stack Overflow](http://stackoverflow.com/questions/9766394/get-exif-data-from-uiimage-uiimagepickercontroller)\n", "tags": ["iOS", "Cocoa"]}