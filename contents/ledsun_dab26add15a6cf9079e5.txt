{"context": " More than 1 year has passed since last update.Node Stream\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u304b\u3059 \u3067\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067Node Stream\u304c\u4f7f\u3048\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\u5178\u578b\u7684\u306aMVC\u5206\u5272\u306b\u4f7f\u3048\u308b\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002\n\n\u6982\u8981\n\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30ab\u30a6\u30f3\u30bf\u30fc\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n\n\u8a2d\u8a08\n\nControllerStream \u30dc\u30bf\u30f3\u306e\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u3092Stream\u306b\u5909\u63db\u3059\u308b\nModelStream \u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u306b\u5fdc\u3058\u3066\u5024\u3092\u66f4\u65b0\u3059\u308b\nViewStream \u5024\u3092DOM\u306b\u53cd\u6620\u3059\u308b\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\nindex.js\nimport {\n  Writable,\n  Readable,\n  Transform\n}\nfrom 'stream'\n\nconst option = {\n  objectMode: true\n}\n\nclass ControllerStream extends Readable {\n  constructor(id) {\n    super(option)\n    document.querySelector(`#${id}`).addEventListener('click', e => this.push(e))\n  }\n  _read() {}\n}\n\nclass ModelStream extends Transform {\n  constructor(initialValue) {\n    super(option)\n\n    this._value = initialValue\n    this.push(this._value)\n  }\n  _transform(chunk, encoding, done) {\n    this._value++;\n    this.push(this._value)\n\n    done()\n  }\n}\n\nclass ViewStream extends Writable {\n  constructor(id) {\n    super(option)\n    this._element = document.querySelector(`#${id}`)\n  }\n  _write(chunk, encoding, callback) {\n    this._element.innerHTML = chunk\n\n    callback()\n  }\n}\n\nnew ControllerStream('button')\n  .pipe(new ModelStream(0))\n  .pipe(new ViewStream('count'))\n\n\n\nindex.html\n<body>\n  <button id=\"button\">+</button>\n  <span id=\"count\"></span>\n  <script src=\"bundle.js\"></script>\n</body>\n\n\n\n\u6e96\u5099\nnpm install browserify babelify stream-browserify\n\n\n\u30d3\u30eb\u30c9\nnode_modules/browserify/bin/cmd.js index.js -t babelify > bundle.js\n\n\n[Node Stream\u3092\u30d6\u30e9\u30a6\u30b6\u3067\u52d5\u304b\u3059](http://qiita.com/ledsun/items/428b05162178b0fc6f28) \u3067\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067Node Stream\u304c\u4f7f\u3048\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3057\u305f\u3002\n\n\u5178\u578b\u7684\u306aMVC\u5206\u5272\u306b\u4f7f\u3048\u308b\u3053\u3068\u3092\u793a\u3057\u307e\u3059\u3002\n\n# \u6982\u8981\n\n\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u30ab\u30a6\u30f3\u30bf\u30fc\u3092\u30a4\u30f3\u30af\u30ea\u30e1\u30f3\u30c8\u3057\u307e\u3059\u3002\n![out.gif](https://qiita-image-store.s3.amazonaws.com/0/15964/80175213-6f77-142c-6e6b-816d4ebae69c.gif \"out.gif\")\n\n\n# \u8a2d\u8a08\n\n- ControllerStream \u30dc\u30bf\u30f3\u306e\u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u3092Stream\u306b\u5909\u63db\u3059\u308b\n- ModelStream \u30af\u30ea\u30c3\u30af\u30a4\u30d9\u30f3\u30c8\u306b\u5fdc\u3058\u3066\u5024\u3092\u66f4\u65b0\u3059\u308b\n- ViewStream \u5024\u3092DOM\u306b\u53cd\u6620\u3059\u308b\n\n# \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n```js:index.js\nimport {\n  Writable,\n  Readable,\n  Transform\n}\nfrom 'stream'\n\nconst option = {\n  objectMode: true\n}\n\nclass ControllerStream extends Readable {\n  constructor(id) {\n    super(option)\n    document.querySelector(`#${id}`).addEventListener('click', e => this.push(e))\n  }\n  _read() {}\n}\n\nclass ModelStream extends Transform {\n  constructor(initialValue) {\n    super(option)\n\n    this._value = initialValue\n    this.push(this._value)\n  }\n  _transform(chunk, encoding, done) {\n    this._value++;\n    this.push(this._value)\n\n    done()\n  }\n}\n\nclass ViewStream extends Writable {\n  constructor(id) {\n    super(option)\n    this._element = document.querySelector(`#${id}`)\n  }\n  _write(chunk, encoding, callback) {\n    this._element.innerHTML = chunk\n\n    callback()\n  }\n}\n\nnew ControllerStream('button')\n  .pipe(new ModelStream(0))\n  .pipe(new ViewStream('count'))\n```\n\n```html:index.html\n<body>\n  <button id=\"button\">+</button>\n  <span id=\"count\"></span>\n  <script src=\"bundle.js\"></script>\n</body>\n```\n\n# \u6e96\u5099\n\n```\nnpm install browserify babelify stream-browserify\n```\n\n# \u30d3\u30eb\u30c9\n\n```\nnode_modules/browserify/bin/cmd.js index.js -t babelify > bundle.js\n```\n", "tags": ["JavaScript", "es6"]}