{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u4ee5\u524d\u3001Bluemix\u306eWatson API\u3092\u99c6\u4f7f\u3057\u3066\u65e5\u672c\u8a9e\u8cea\u554f\u5fdc\u7b54\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308b\uff5e\u305d\u306e2\uff5e\u3067\u4f5c\u3063\u305f\u8cea\u554f\u5fdc\u7b54\u30a2\u30d7\u30ea\u3092\u3001Node-RED\u3067\u4f5c\u308a\u76f4\u3057\u3066\u307f\u305f\u304c\u3001Node-RED\u304b\u3089Watson API\u3092\u547c\u3076\u306b\u306f\u4e00\u5de5\u592b\u5fc5\u8981\u306a\u306e\u3067\u3001\u305d\u3053\u3092\u6574\u7406\u3057\u3066\u307f\u308b\u3002\nSpeech to Text\u306e\u7d44\u307f\u8fbc\u307f\u306f\u3069\u3046\u3057\u305f\u306e\uff1f\u3068\u3044\u3046\u610f\u898b\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3002\n\nNLC\u30ce\u30fc\u30c9\u306e\u4f7f\u3044\u65b9\nNLC\u3092\u547c\u3076\u5834\u5408\u306f\u3001IBM_Watson\u306eNLC\u30ce\u30fc\u30c9\u3092\u4f7f\u3046\u3002\n\u30d5\u30ed\u30fc\u30a8\u30c7\u30a3\u30bf\u30fc\u306e\u5de6\u5074\u306eIBM_Watson\u30b0\u30eb\u30fc\u30d7(\u4e0b\u306e\u65b9)\u306bNLC\u30ce\u30fc\u30c9\u304c\u3042\u308b\u3002\n\n\u3053\u308c\u3092\u30c9\u30e9\u30c3\u30b0&\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u3002\n\n\u30c9\u30ed\u30c3\u30d7\u3057\u305fNLC\u30ce\u30fc\u30c9\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u8a2d\u5b9a\u753b\u9762\u304c\u958b\u304f\u3002\n\nName\u306f\u30d5\u30ed\u30fc\u4e0a\u306e\u540d\u524d\u3001Username\u3068Password\u306fNLC\u306e\u30b5\u30fc\u30d3\u30b9\u547c\u3073\u51fa\u3057\u3092\u3059\u308b\u969b\u306e\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3001Classifier ID\u306f\u30af\u30e9\u30b9\u5206\u985e\u306b\u4f7f\u3046\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eID\u3092\u6307\u5b9a\u3059\u308b\u3002\nMode\u306fClassify\u3068Training\u304c\u9078\u629e\u3067\u304d\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u6e08\u307f\u306eNLC\u3092\u4f7f\u3046\u306e\u3067Classify\u3067\u3044\u3044\u3002\nNLC\u30ce\u30fc\u30c9\u306f\u3001msg.payload\u306e\u5024\u3092\u5165\u529b\u3068\u3057\u3001NLC\u306e\u7d50\u679c\u3092msg.payload\u306b\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002\n\nNLC\u30ce\u30fc\u30c9\u3078\u306e\u5165\u529b\nmsg.payload\u3078\u306e\u5024\u306e\u30bb\u30c3\u30c8\u306fchange\u30ce\u30fc\u30c9\u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u3060\u308d\u3046\u3002\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3068\u3057\u3066\u8cea\u554f\u6587\u3092\u6e21\u3059\u5834\u5408(\u4f8b\u3048\u3070 /ask?q=\u8cea\u554f\u6587 \u3068\u3044\u3046\u30b1\u30fc\u30b9)\u306fmsg.payload.q\u306b\u8cea\u554f\u6587\u304c\u4fdd\u7ba1\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089\u53d6\u308a\u51fa\u305b\u3070\u3088\u3044\u3002\nmsg.payload\u306f\u4f55\u5ea6\u304b\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3001msg.payload.q\u3092msg.question\u306a\u3069\u3001payload\u914d\u4e0b\u3067\u306f\u306a\u3044\u3068\u3053\u308d\u306b\u6700\u521d\u306b\u9000\u907f\u3055\u305b\u3066\u304a\u304f\u3068\u5f8c\u3005\u4fbf\u5229\u3060\u3002\n\u8a71\u304c\u6a2a\u9053\u306b\u305d\u308c\u305f\u306e\u3067\u623b\u3059\u3068\u3059\u308b\u3002\n\u8cea\u554f\u6587\u304cmsg.question\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306a\u3089\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308c\u3070\u3088\u3044\u3002\n\n\u3053\u308c\u3067NLC\u30ce\u30fc\u30c9\u306e\u5165\u529b\u6e96\u5099\u306f\u5b8c\u4e86\u3060\u3002\n\nNLC\u30ce\u30fc\u30c9\u306e\u51fa\u529b\nNLC\u30ce\u30fc\u30c9\u306e\u51fa\u529b\u4f8b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3060\u3002\n\nmsg.payload\n{ \"classes\": [ { \"class_name\": \"Android\", \n                 \"confidence\": 0.9951245879757794 }, \n               { \"class_name\": \"iPhone\", \n                 \"confidence\": 0.0048754120242205535 } ], \n  \"top_class\": \"Android\" }\n\n\n\u5fdc\u7b54\u306f\u3001\u30af\u30e9\u30b9\u540d\u3068Confidence(\u78ba\u4fe1\u5ea6)\u306e\u30ea\u30b9\u30c8\u3092\u8fd4\u3059\"classes\"\u3068\u3001\u4e00\u756a\u78ba\u4fe1\u5ea6\u304c\u9ad8\u3044\u30af\u30e9\u30b9\u3092\u8fd4\u3059\"top_class\"\u304c\u3042\u308b\u3002\u898b\u3066\u308f\u304b\u308b\u3088\u3046\u306b\u3001top_class\u306f\u3042\u308b\u304ctop_confidence\u304c\u7121\u3044\u3002\u306a\u3093\u3067\u3060\u308d\u3046\u3002\u4f7f\u3044\u52dd\u624b\u3092\u3042\u3052\u308b\u306b\u306f\u3001top_confidence\u3092\u4f5c\u308b\u306e\u3082\u3044\u3044\u3002function\u30ce\u30fc\u30c9\u306e\u4e2d\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u547d\u4ee4\u3092\u66f8\u304f\u3068\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\nfunction\u30ce\u30fc\u30c9\nmsg.payload.top_confidence = msg.payload.classes[0].confidence;\nreturn msg;\n\n\nmsg.payload.classes\u304c\u30ea\u30b9\u30c8\u3067\u3042\u308a1\u756a\u76ee\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001msg.payload.classes[0]\u3068\u8a18\u8ff0\u3059\u308c\u3070\u3088\u3044\u3002\n\u3053\u3053\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u306a\u306e\u304c\u3001change\u30ce\u30fc\u30c9\u3084debug\u30ce\u30fc\u30c9\u3067\u306f\u914d\u5217\u304c\u4f7f\u3048\u306a\u3044\u3053\u3068\u3060\u3002\u306a\u305c\u304b\u4f7f\u3048\u306a\u3044\u3002\u914d\u5217\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3051\u308c\u3070function\u30ce\u30fc\u30c9\u3092\u9593\u306b\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u3081\u3093\u3069\u3044\u3002\n\u3053\u3046\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306btop_confidence\u304c\u8ffd\u52a0\u3055\u308c\u308b\u306e\u3067\u3001\u8272\u3005\u4fbf\u5229\u306b\u306a\u308b\u3002\n\nmsg.payload\n{ \"classes\": [ { \"class_name\": \"Android\", \n                 \"confidence\": 0.9951245879757794 }, \n               { \"class_name\": \"iPhone\", \n                 \"confidence\": 0.0048754120242205535 } ], \n  \"top_class\": \"Android\",\n  \"top_confidence\": 0.9951245879757794 }\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001Node-RED\u3067NLC\u3092\u547c\u3073\u51fa\u3057\u3066\u7d50\u679c\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u3001\u6b21\u306e\u3088\u3046\u306a\u30d5\u30ed\u30fc\u3092\u4f5c\u308c\u3070\u3088\u3044\u3053\u3068\u306b\u306a\u308b\u3002\n\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d5\u30ed\u30fc\u3092\u4f5c\u308c\u3070\u3088\u3044\u3002\n\n\u306a\u304a\u3001msg\u306e\u4e2d\u306bHTTP req,res\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001msg\u672c\u4f53\u3092\u5f15\u304d\u7d99\u304c\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306b\u3082\u6ce8\u610f\u3002\n\nR&R\u306e\u547c\u3073\u51fa\u3057\u65b9\nR&R\u306f\u307e\u3060Node-RED\u306e\u30ce\u30fc\u30c9\u304c\u7121\u3044(2016\u5e742\u670813\u65e5\u73fe\u5728)\u3002\u305d\u306e\u305f\u3081\u3001function\u30ce\u30fc\u30c9\u3067\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3001http\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u547c\u3073\u51fa\u3057\u3066\u3042\u3052\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\nR&R\u3078\u306e\u5165\u529b\nfunction\u30ce\u30fc\u30c9\u3092\u4f7f\u3044\u3001msg.url\u306bWeb\u30b5\u30fc\u30d3\u30b9\u306eURL\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3002\nmsg.question\u306b\u8cea\u554f\u6587\u304c\u5165\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bb\u30c3\u30c8\u3057\u3066\u3042\u3052\u308c\u3070\u3088\u3044\u3002\n\nfunction\u30ce\u30fc\u30c9\nvar param = \"ranker=<<\u30e9\u30f3\u30ab\u30fcID>>&wt=json&fl=id,title,body&q=\" + msg.question;\nmsg.url = encodeURI(\"https://gateway.watsonplatform.net/retrieve-and-rank/api/v1/solr_clusters/<<\u30af\u30e9\u30b9\u30bf\u30fcID>>/solr/<<\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u540d>>/fcselect\" + \"?\" + param);\nreturn msg;\n\n\n\u30e9\u30f3\u30ab\u30fcID\u3001\u30af\u30e9\u30b9\u30bf\u30fcID\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u540d\u306f\u5404\u81ea\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u6b32\u3057\u3044\u3002\n\u8cea\u554f\u6587\u304c\u65e5\u672c\u8a9e(\u5168\u89d2)\u306e\u5834\u5408\u3001URI\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u884c\u308f\u306a\u3044\u3068\u6b63\u3057\u304f\u9001\u4fe1\u3067\u304d\u306a\u3044\u3002\u305d\u306e\u305f\u3081\u3001msg.url\u306fencodeURI\u95a2\u6570\u3092\u4f7f\u3063\u3066\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u884c\u3046\u3002\n\nR&R\u306e\u547c\u3073\u51fa\u3057\n\u547c\u3073\u51fa\u3057\u306fhttp\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u4f7f\u7528\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u3001\u30e6\u30fc\u30b6\u30fcID\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5165\u529b\u6b04\u3092\u51fa\u3057\u3001R&R\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b\u3002\n\u307e\u305f\u3001Return\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u300cUTF-8 String\u300d\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u51fa\u529b\u7d50\u679c\u3092\u51e6\u7406\u3059\u308b\u305f\u3081\u306bJSON\u30d1\u30fc\u30b9\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u6700\u521d\u304b\u3089JSON\u5f62\u5f0f\u3067\u8fd4\u3059\u3088\u3046\u306b\u3057\u3066\u304a\u3053\u3046\u3002\n\n\nR&R\u306e\u51fa\u529b\n\u51fa\u529b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306aJSON\u5f62\u5f0f\u3067\u8fd4\u3055\u308c\u308b\u3002\n\nR&R\u306e\u51fa\u529b\n{\"responseHeader\":{\"status\":0,\n                   \"QTime\":6},\n \"response\":{\"numFound\":11,\n             \"start\":0,\n             \"maxScore\":1.3636142,\n             \"docs\": [ { \"id\": \"40\", \n                         \"body\": [ \"Android 4.4.4\u4ee5\u964d\u3067VoLTE\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\" ] }, \n                       { \"id\": \"39\",\n                         \"body\": [ \"\u30e1\u30fc\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.1.1\u4ee5\u4e0a\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u5834\u5408\u306f\u3001\u30e1\u30fc\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u66f4\u65b0\u3092\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059\u3002\" ] }, \n                       { \"id\": \"28\", \n                         \"body\": [ \"\u6a5f\u7a2e\u5909\u66f4\u5f8c\u306e\u6a5f\u7a2e\u304c\u300c\u30a2\u30cb\u30e1\u653e\u984c\u300d\u5bfe\u5fdc\u6a5f\u7a2e\u3067\u3042\u308c\u3070\u3001\u5f15\u304d\u7d9a\u304d\u3054\u5229\u7528\u3044\u305f\u3060\u3051\u307e\u3059\u3002\u6a5f\u7a2e\u5909\u66f4\u5f8c\u306e\u6a5f\u7a2e\u3067\u3001\u518d\u5ea6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u5f15\u304d\u7d99\u304c\u308c\u307e\u305b\u3093\u3002\" ] }, \u30fb\u30fb\u30fb\u30fb\n\n\ndocs\u306e\u4e2d\u8eab\u304c\u30e9\u30f3\u30af\u306e\u9ad8\u3044\u9806\u306b\u4e26\u3093\u3067\u3044\u308b\u306e\u3067\u3001docs\u914d\u5217\u306e\u4e00\u756a\u6700\u521d\u306e\u8981\u7d20\u3092\u53d6\u308a\u51fa\u305b\u3070\u3044\u3044\u3002\u53d6\u308a\u51fa\u3057\u306b\u306ffunction\u30ce\u30fc\u30c9\u3092\u4f7f\u3046\u3002http\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u3057\u3066\u8fd4\u3057\u305f\u3044\u60c5\u5831\u306f\u3001msg.payload\u306b\u683c\u7d0d\u3059\u308b\u3002\n\nfunction\u30ce\u30fc\u30c9\nmsg.payload = msg.payload.response.docs[0].body[0];\nreturn msg;\n\n\n\u6700\u5f8c\u306b\u3053\u308c\u3092http\u30ec\u30b9\u30dd\u30f3\u30b9\u30ce\u30fc\u30c9\u306b\u5165\u308c\u3066\u3042\u3052\u308c\u3070\u3088\u3044\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\u306f\u3053\u3061\u3089\u3002http\u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9\u7248\u306f\u5272\u611b\u3002\n\u30cf\u30de\u308a\u3084\u3059\u3044\u3068\u3053\u308d\u306f\u3001R&R(http\u30ea\u30af\u30a8\u30b9\u30c8)\u306e\u8fd4\u308a\u306e\u578b\u306e\u6307\u5b9a\u3060\u308d\u3046\u3002String\u306b\u3057\u3066\u3057\u307e\u3046\u3068JSON\u30d1\u30fc\u30b9\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u30d1\u30fc\u30b9\u3057\u3066\u3042\u3052\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n\nTTS\u306e\u547c\u3073\u51fa\u3057\u65b9\nTTS\u306f\u3001Node-RED\u306e\u30ce\u30fc\u30c9\u306f\u3042\u308b\u3002\u304c\u3001\u65e5\u672c\u8a9e\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044(2016\u5e742\u670813\u65e5\u73fe\u5728)\u3002\u305d\u306e\u305f\u3081R&R\u3068\u540c\u69d8\u3001function\u30ce\u30fc\u30c9\u3067\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3001http\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u547c\u3073\u51fa\u3059\u3002\nTTS\u306e\u5fdc\u7b54\u306f\u97f3\u58f0\u30c7\u30fc\u30bf\u306b\u306a\u308b\u305f\u3081\u3001\u30d6\u30e9\u30a6\u30b6\u30fc\u7b49\u306e\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u518d\u751f\u3057\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nTTS\u3078\u306e\u5165\u529b\nmsg.payload.text\u306b\u3057\u3083\u3079\u3089\u305b\u305f\u3044\u6587\u7ae0\u304c\u5165\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bb\u30c3\u30c8\u3059\u308b\u3002\nvoice\u306e\u6307\u5b9a\u3092\u5909\u3048\u308c\u3070\u3001\u3044\u308d\u3044\u308d\u306a\u97f3\u58f0\u3067\u3057\u3083\u3079\u3089\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u3002\u4f7f\u3048\u308b\u97f3\u58f0\u306b\u4f55\u304c\u3042\u308b\u304b\u306f\u3001\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u8abf\u3079\u3066\u307f\u3066\u6b32\u3057\u3044\u3002\n\nfunction\u30ce\u30fc\u30c9\nvar param = \"voice=ja-JP_EmiVoice&accept=audio/wav&text=\" + msg.payload.text;\nmsg.url = encodeURI(\"https://stream.watsonplatform.net/text-to-speech/api/v1/synthesize\" + \"?\" + param);\nreturn msg;\n\n\n\nTTS\u306e\u547c\u3073\u51fa\u3057\n\u547c\u3073\u51fa\u3057\u306fhttp\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u4f7f\u7528\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u3001\u30e6\u30fc\u30b6\u30fcID\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5165\u529b\u6b04\u3092\u51fa\u3057\u3001TTS\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b\u3002\n\u307e\u305f\u3001Return\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u300cUTF-8 String\u300d\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u97f3\u58f0\u30c7\u30fc\u30bf\u306a\u306e\u3067a binary buffer\u3092\u9078\u629e\u3057\u3066\u304a\u304f\u3002\n\n\nTTS\u306e\u51fa\u529b\n\u7d50\u679c\u306f\u3001\u305d\u306e\u307e\u307ehttp\u30ec\u30b9\u30dd\u30f3\u30b9\u30ce\u30fc\u30c9\u3067\u8fd4\u305b\u3070\u3088\u3044\u3002\n\u3080\u3057\u308d\u554f\u984c\u306f\u518d\u751f\u65b9\u6cd5\u3060\u3002\n\u97f3\u58f0\u306e\u518d\u751f\u306b\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u3002curl\u3067\u51fa\u529b\u3057\u305f\u5834\u5408\u306f\u7d50\u679c\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u843d\u3068\u3057\u3066\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u518d\u751f\u3067\u304d\u308b\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u30fc\u3067\u76f4\u63a5URL\u3092\u5165\u529b\u3057\u305f\u5834\u5408\u306f\u7d50\u679c\u3092\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u958b\u3044\u3066\u518d\u751f\u304c\u3067\u304d\u308b\u3002\u30c6\u30b9\u30c8\u3059\u308b\u3060\u3051\u306a\u3089\u305d\u308c\u3067\u3082\u3044\u3044\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u7d44\u307f\u8fbc\u3080\u306a\u3089\u3061\u3083\u3093\u3068\u518d\u751f\u3055\u305b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eHTML\u30d5\u30a1\u30a4\u30eb\u306bjavascript\u3067\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u304a\u304f\u3068\u518d\u751f\u53ef\u80fd\u3060\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\nvar audio = document.createElement(\"audio\");\naudio.src = \"./t2s?text=\" + \"\u3053\u3093\u306b\u3061\u306f\"; \naudio.play();\n\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001TTS\u306e\u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\u306f\u3053\u3061\u3089\u3002\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u305f\u65b9\u304c\u8272\u3005\u7c21\u5358\u306e\u306f\u305a\u3002\u65e9\u304f\u65e5\u672c\u8a9e\u5316\u304c\u5f85\u3061\u671b\u307e\u308c\u308b\u3002\n\n\n\u7d42\u308f\u308a\u306b\n\u3053\u308c\u3089\u3092\u5168\u3066\u7d44\u307f\u5408\u308f\u305b\u3066\u3001Bluemix\u306eWatson API\u3092\u99c6\u4f7f\u3057\u3066\u65e5\u672c\u8a9e\u8cea\u554f\u5fdc\u7b54\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308b\uff5e\u305d\u306e2\uff5e\u3067\u4f5c\u3063\u305f\u8cea\u554f\u5fdc\u7b54\u30a2\u30d7\u30ea\u3092\u3001Node-RED\u3067\u4f5c\u308a\u76f4\u3057\u3066\u307f\u305f\u3002\n\u304c\u3001\u4eca\u56de\u304b\u306a\u308a\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u6b21\u56de\u306b\u307e\u308f\u305d\u3046\u3068\u601d\u3046\u3002\n# \u306f\u3058\u3081\u306b\n\u4ee5\u524d\u3001[Bluemix\u306eWatson API\u3092\u99c6\u4f7f\u3057\u3066\u65e5\u672c\u8a9e\u8cea\u554f\u5fdc\u7b54\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308b\uff5e\u305d\u306e2\uff5e](http://qiita.com/VegaSato/items/1fa437667815a20a5624)\u3067\u4f5c\u3063\u305f\u8cea\u554f\u5fdc\u7b54\u30a2\u30d7\u30ea\u3092\u3001Node-RED\u3067\u4f5c\u308a\u76f4\u3057\u3066\u307f\u305f\u304c\u3001Node-RED\u304b\u3089Watson API\u3092\u547c\u3076\u306b\u306f\u4e00\u5de5\u592b\u5fc5\u8981\u306a\u306e\u3067\u3001\u305d\u3053\u3092\u6574\u7406\u3057\u3066\u307f\u308b\u3002\n~~Speech to Text\u306e\u7d44\u307f\u8fbc\u307f\u306f\u3069\u3046\u3057\u305f\u306e\uff1f\u3068\u3044\u3046\u610f\u898b\u306f\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3002~~\n\n# NLC\u30ce\u30fc\u30c9\u306e\u4f7f\u3044\u65b9\nNLC\u3092\u547c\u3076\u5834\u5408\u306f\u3001IBM_Watson\u306eNLC\u30ce\u30fc\u30c9\u3092\u4f7f\u3046\u3002\n\u30d5\u30ed\u30fc\u30a8\u30c7\u30a3\u30bf\u30fc\u306e\u5de6\u5074\u306eIBM_Watson\u30b0\u30eb\u30fc\u30d7(\u4e0b\u306e\u65b9)\u306bNLC\u30ce\u30fc\u30c9\u304c\u3042\u308b\u3002\n![NLCnode_00.png](https://qiita-image-store.s3.amazonaws.com/0/102519/b1f203e1-cb3d-9485-55ce-fb96933ddaf4.png)\n\n\n\u3053\u308c\u3092\u30c9\u30e9\u30c3\u30b0&\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u3002\n![NLCnode_01.png](https://qiita-image-store.s3.amazonaws.com/0/102519/9202df3b-cb99-f6f1-0a1f-3f933e49b274.png)\n\n\u30c9\u30ed\u30c3\u30d7\u3057\u305fNLC\u30ce\u30fc\u30c9\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u8a2d\u5b9a\u753b\u9762\u304c\u958b\u304f\u3002\n![NLCnode_02.png](https://qiita-image-store.s3.amazonaws.com/0/102519/6064f576-5d45-a387-69c4-0be174640edd.png)\nName\u306f\u30d5\u30ed\u30fc\u4e0a\u306e\u540d\u524d\u3001Username\u3068Password\u306fNLC\u306e\u30b5\u30fc\u30d3\u30b9\u547c\u3073\u51fa\u3057\u3092\u3059\u308b\u969b\u306e\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3001Classifier ID\u306f\u30af\u30e9\u30b9\u5206\u985e\u306b\u4f7f\u3046\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eID\u3092\u6307\u5b9a\u3059\u308b\u3002\nMode\u306fClassify\u3068Training\u304c\u9078\u629e\u3067\u304d\u308b\u304c\u3001\u3053\u3053\u3067\u306f\u30c8\u30ec\u30fc\u30cb\u30f3\u30b0\u6e08\u307f\u306eNLC\u3092\u4f7f\u3046\u306e\u3067Classify\u3067\u3044\u3044\u3002\n\nNLC\u30ce\u30fc\u30c9\u306f\u3001msg.payload\u306e\u5024\u3092\u5165\u529b\u3068\u3057\u3001NLC\u306e\u7d50\u679c\u3092msg.payload\u306b\u51fa\u529b\u3057\u3066\u304f\u308c\u308b\u3002\n\n## NLC\u30ce\u30fc\u30c9\u3078\u306e\u5165\u529b\nmsg.payload\u3078\u306e\u5024\u306e\u30bb\u30c3\u30c8\u306fchange\u30ce\u30fc\u30c9![2016-02-10 18_00_33-Node-RED _ satohdai-nodered.mybluemix.net.png](https://qiita-image-store.s3.amazonaws.com/0/102519/1fa8d2ac-d584-48ae-beac-ab74dc74a505.png)\u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u3060\u308d\u3046\u3002\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3068\u3057\u3066\u8cea\u554f\u6587\u3092\u6e21\u3059\u5834\u5408(\u4f8b\u3048\u3070 */ask?q=\u8cea\u554f\u6587* \u3068\u3044\u3046\u30b1\u30fc\u30b9)\u306fmsg.payload.q\u306b\u8cea\u554f\u6587\u304c\u4fdd\u7ba1\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u3053\u304b\u3089\u53d6\u308a\u51fa\u305b\u3070\u3088\u3044\u3002\nmsg.payload\u306f\u4f55\u5ea6\u304b\u4e0a\u66f8\u304d\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3001msg.payload.q\u3092msg.question\u306a\u3069\u3001payload\u914d\u4e0b\u3067\u306f\u306a\u3044\u3068\u3053\u308d\u306b\u6700\u521d\u306b\u9000\u907f\u3055\u305b\u3066\u304a\u304f\u3068\u5f8c\u3005\u4fbf\u5229\u3060\u3002\n\n\u8a71\u304c\u6a2a\u9053\u306b\u305d\u308c\u305f\u306e\u3067\u623b\u3059\u3068\u3059\u308b\u3002\n\u8cea\u554f\u6587\u304cmsg.question\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306a\u3089\u3070\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308c\u3070\u3088\u3044\u3002\n![2016-02-10 18_01_32-Node-RED _ satohdai-nodered.mybluemix.net.png](https://qiita-image-store.s3.amazonaws.com/0/102519/e0317ebe-a58a-3d14-4270-2f687cbd6aba.png)\n\n\u3053\u308c\u3067NLC\u30ce\u30fc\u30c9\u306e\u5165\u529b\u6e96\u5099\u306f\u5b8c\u4e86\u3060\u3002\n\n## NLC\u30ce\u30fc\u30c9\u306e\u51fa\u529b\n\nNLC\u30ce\u30fc\u30c9\u306e\u51fa\u529b\u4f8b\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3060\u3002\n\n```json:msg.payload\n{ \"classes\": [ { \"class_name\": \"Android\", \n                 \"confidence\": 0.9951245879757794 }, \n               { \"class_name\": \"iPhone\", \n                 \"confidence\": 0.0048754120242205535 } ], \n  \"top_class\": \"Android\" }\n```\n\u5fdc\u7b54\u306f\u3001\u30af\u30e9\u30b9\u540d\u3068Confidence(\u78ba\u4fe1\u5ea6)\u306e\u30ea\u30b9\u30c8\u3092\u8fd4\u3059\"classes\"\u3068\u3001\u4e00\u756a\u78ba\u4fe1\u5ea6\u304c\u9ad8\u3044\u30af\u30e9\u30b9\u3092\u8fd4\u3059\"top_class\"\u304c\u3042\u308b\u3002\u898b\u3066\u308f\u304b\u308b\u3088\u3046\u306b\u3001top_class\u306f\u3042\u308b\u304ctop_confidence\u304c\u7121\u3044\u3002\u306a\u3093\u3067\u3060\u308d\u3046\u3002\u4f7f\u3044\u52dd\u624b\u3092\u3042\u3052\u308b\u306b\u306f\u3001top_confidence\u3092\u4f5c\u308b\u306e\u3082\u3044\u3044\u3002function\u30ce\u30fc\u30c9\u306e\u4e2d\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u547d\u4ee4\u3092\u66f8\u304f\u3068\u5b9f\u73fe\u3067\u304d\u308b\u3002\n\n```js:function\u30ce\u30fc\u30c9\nmsg.payload.top_confidence = msg.payload.classes[0].confidence;\nreturn msg;\n```\nmsg.payload.classes\u304c\u30ea\u30b9\u30c8\u3067\u3042\u308a1\u756a\u76ee\u306e\u8981\u7d20\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306b\u306f\u3001msg.payload.classes[0]\u3068\u8a18\u8ff0\u3059\u308c\u3070\u3088\u3044\u3002\n\u3053\u3053\u3067\u6ce8\u610f\u304c\u5fc5\u8981\u306a\u306e\u304c\u3001**change\u30ce\u30fc\u30c9\u3084debug\u30ce\u30fc\u30c9\u3067\u306f\u914d\u5217\u304c\u4f7f\u3048\u306a\u3044**\u3053\u3068\u3060\u3002\u306a\u305c\u304b\u4f7f\u3048\u306a\u3044\u3002\u914d\u5217\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3051\u308c\u3070function\u30ce\u30fc\u30c9\u3092\u9593\u306b\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u3081\u3093\u3069\u3044\u3002\n\n\u3053\u3046\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306btop_confidence\u304c\u8ffd\u52a0\u3055\u308c\u308b\u306e\u3067\u3001\u8272\u3005\u4fbf\u5229\u306b\u306a\u308b\u3002\n\n```json:msg.payload\n{ \"classes\": [ { \"class_name\": \"Android\", \n                 \"confidence\": 0.9951245879757794 }, \n               { \"class_name\": \"iPhone\", \n                 \"confidence\": 0.0048754120242205535 } ], \n  \"top_class\": \"Android\",\n  \"top_confidence\": 0.9951245879757794 }\n```\n\n## \u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001Node-RED\u3067NLC\u3092\u547c\u3073\u51fa\u3057\u3066\u7d50\u679c\u3092\u53d6\u5f97\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u3001\u6b21\u306e\u3088\u3046\u306a\u30d5\u30ed\u30fc\u3092\u4f5c\u308c\u3070\u3088\u3044\u3053\u3068\u306b\u306a\u308b\u3002\n![NLCnode_03.png](https://qiita-image-store.s3.amazonaws.com/0/102519/19d60ca9-dfb6-1f84-3af2-c0cc33fa0740.png)\n\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d5\u30ed\u30fc\u3092\u4f5c\u308c\u3070\u3088\u3044\u3002\n![NLCnode_04.png](https://qiita-image-store.s3.amazonaws.com/0/102519/fb8040cb-6a00-d39c-0fd3-acdda92be689.png)\n\n\u306a\u304a\u3001msg\u306e\u4e2d\u306bHTTP req,res\u304c\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001msg\u672c\u4f53\u3092\u5f15\u304d\u7d99\u304c\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306b\u3082\u6ce8\u610f\u3002\n\n\n# R&R\u306e\u547c\u3073\u51fa\u3057\u65b9\n\nR&R\u306f\u307e\u3060Node-RED\u306e\u30ce\u30fc\u30c9\u304c\u7121\u3044(2016\u5e742\u670813\u65e5\u73fe\u5728)\u3002\u305d\u306e\u305f\u3081\u3001function\u30ce\u30fc\u30c9\u3067\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3001http\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u547c\u3073\u51fa\u3057\u3066\u3042\u3052\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\n## R&R\u3078\u306e\u5165\u529b\nfunction\u30ce\u30fc\u30c9\u3092\u4f7f\u3044\u3001msg.url\u306bWeb\u30b5\u30fc\u30d3\u30b9\u306eURL\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3002\nmsg.question\u306b\u8cea\u554f\u6587\u304c\u5165\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bb\u30c3\u30c8\u3057\u3066\u3042\u3052\u308c\u3070\u3088\u3044\u3002\n\n```javascript:function\u30ce\u30fc\u30c9\nvar param = \"ranker=<<\u30e9\u30f3\u30ab\u30fcID>>&wt=json&fl=id,title,body&q=\" + msg.question;\nmsg.url = encodeURI(\"https://gateway.watsonplatform.net/retrieve-and-rank/api/v1/solr_clusters/<<\u30af\u30e9\u30b9\u30bf\u30fcID>>/solr/<<\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u540d>>/fcselect\" + \"?\" + param);\nreturn msg;\n```\n\n\u30e9\u30f3\u30ab\u30fcID\u3001\u30af\u30e9\u30b9\u30bf\u30fcID\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u540d\u306f\u5404\u81ea\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u6b32\u3057\u3044\u3002\n\u8cea\u554f\u6587\u304c\u65e5\u672c\u8a9e(\u5168\u89d2)\u306e\u5834\u5408\u3001URI\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u884c\u308f\u306a\u3044\u3068\u6b63\u3057\u304f\u9001\u4fe1\u3067\u304d\u306a\u3044\u3002\u305d\u306e\u305f\u3081\u3001msg.url\u306f**encodeURI\u95a2\u6570**\u3092\u4f7f\u3063\u3066\u30a8\u30f3\u30b3\u30fc\u30c9\u3092\u884c\u3046\u3002\n\n## R&R\u306e\u547c\u3073\u51fa\u3057\n\u547c\u3073\u51fa\u3057\u306fhttp\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u4f7f\u7528\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u3001\u30e6\u30fc\u30b6\u30fcID\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5165\u529b\u6b04\u3092\u51fa\u3057\u3001R&R\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b\u3002\n\u307e\u305f\u3001Return\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u300cUTF-8 String\u300d\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u51fa\u529b\u7d50\u679c\u3092\u51e6\u7406\u3059\u308b\u305f\u3081\u306bJSON\u30d1\u30fc\u30b9\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u6700\u521d\u304b\u3089JSON\u5f62\u5f0f\u3067\u8fd4\u3059\u3088\u3046\u306b\u3057\u3066\u304a\u3053\u3046\u3002\n![node-red_httprequest_01.png](https://qiita-image-store.s3.amazonaws.com/0/102519/a3dee9f0-5334-5d53-2957-8aa88a9f6c9f.png)\n\n\n## R&R\u306e\u51fa\u529b\n\u51fa\u529b\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306aJSON\u5f62\u5f0f\u3067\u8fd4\u3055\u308c\u308b\u3002\n\n```json:R&R\u306e\u51fa\u529b\n{\"responseHeader\":{\"status\":0,\n                   \"QTime\":6},\n \"response\":{\"numFound\":11,\n             \"start\":0,\n             \"maxScore\":1.3636142,\n             \"docs\": [ { \"id\": \"40\", \n                         \"body\": [ \"Android 4.4.4\u4ee5\u964d\u3067VoLTE\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\" ] }, \n                       { \"id\": \"39\",\n                         \"body\": [ \"\u30e1\u30fc\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c4.1.1\u4ee5\u4e0a\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u53e4\u3044\u5834\u5408\u306f\u3001\u30e1\u30fc\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u66f4\u65b0\u3092\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059\u3002\" ] }, \n                       { \"id\": \"28\", \n                         \"body\": [ \"\u6a5f\u7a2e\u5909\u66f4\u5f8c\u306e\u6a5f\u7a2e\u304c\u300c\u30a2\u30cb\u30e1\u653e\u984c\u300d\u5bfe\u5fdc\u6a5f\u7a2e\u3067\u3042\u308c\u3070\u3001\u5f15\u304d\u7d9a\u304d\u3054\u5229\u7528\u3044\u305f\u3060\u3051\u307e\u3059\u3002\u6a5f\u7a2e\u5909\u66f4\u5f8c\u306e\u6a5f\u7a2e\u3067\u3001\u518d\u5ea6\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u5f15\u304d\u7d99\u304c\u308c\u307e\u305b\u3093\u3002\" ] }, \u30fb\u30fb\u30fb\u30fb\n```\n\ndocs\u306e\u4e2d\u8eab\u304c\u30e9\u30f3\u30af\u306e\u9ad8\u3044\u9806\u306b\u4e26\u3093\u3067\u3044\u308b\u306e\u3067\u3001docs\u914d\u5217\u306e\u4e00\u756a\u6700\u521d\u306e\u8981\u7d20\u3092\u53d6\u308a\u51fa\u305b\u3070\u3044\u3044\u3002\u53d6\u308a\u51fa\u3057\u306b\u306ffunction\u30ce\u30fc\u30c9\u3092\u4f7f\u3046\u3002http\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u3057\u3066\u8fd4\u3057\u305f\u3044\u60c5\u5831\u306f\u3001**msg.payload**\u306b\u683c\u7d0d\u3059\u308b\u3002\n\n```javascript:function\u30ce\u30fc\u30c9\nmsg.payload = msg.payload.response.docs[0].body[0];\nreturn msg;\n```\n\n\u6700\u5f8c\u306b\u3053\u308c\u3092http\u30ec\u30b9\u30dd\u30f3\u30b9\u30ce\u30fc\u30c9\u306b\u5165\u308c\u3066\u3042\u3052\u308c\u3070\u3088\u3044\u3002\n\n## \u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\u306f\u3053\u3061\u3089\u3002http\u30ea\u30af\u30a8\u30b9\u30c8/\u30ec\u30b9\u30dd\u30f3\u30b9\u7248\u306f\u5272\u611b\u3002\n\u30cf\u30de\u308a\u3084\u3059\u3044\u3068\u3053\u308d\u306f\u3001R&R(http\u30ea\u30af\u30a8\u30b9\u30c8)\u306e\u8fd4\u308a\u306e\u578b\u306e\u6307\u5b9a\u3060\u308d\u3046\u3002String\u306b\u3057\u3066\u3057\u307e\u3046\u3068JSON\u30d1\u30fc\u30b9\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u30d1\u30fc\u30b9\u3057\u3066\u3042\u3052\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\n![node-red_r&r_flow1.png](https://qiita-image-store.s3.amazonaws.com/0/102519/9dfb26a5-1740-cd50-0d38-b6f446a8132c.png)\n\n\n# TTS\u306e\u547c\u3073\u51fa\u3057\u65b9\n\nTTS\u306f\u3001Node-RED\u306e\u30ce\u30fc\u30c9\u306f\u3042\u308b\u3002\u304c\u3001\u65e5\u672c\u8a9e\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044(2016\u5e742\u670813\u65e5\u73fe\u5728)\u3002\u305d\u306e\u305f\u3081R&R\u3068\u540c\u69d8\u3001function\u30ce\u30fc\u30c9\u3067\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3001http\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u547c\u3073\u51fa\u3059\u3002\nTTS\u306e\u5fdc\u7b54\u306f\u97f3\u58f0\u30c7\u30fc\u30bf\u306b\u306a\u308b\u305f\u3081\u3001\u30d6\u30e9\u30a6\u30b6\u30fc\u7b49\u306e\u30b3\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u518d\u751f\u3057\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n## TTS\u3078\u306e\u5165\u529b\nmsg.payload.text\u306b\u3057\u3083\u3079\u3089\u305b\u305f\u3044\u6587\u7ae0\u304c\u5165\u3063\u3066\u3044\u308b\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bb\u30c3\u30c8\u3059\u308b\u3002\nvoice\u306e\u6307\u5b9a\u3092\u5909\u3048\u308c\u3070\u3001\u3044\u308d\u3044\u308d\u306a\u97f3\u58f0\u3067\u3057\u3083\u3079\u3089\u305b\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u3002\u4f7f\u3048\u308b\u97f3\u58f0\u306b\u4f55\u304c\u3042\u308b\u304b\u306f\u3001[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://qiita.com/VegaSato/items/0b7ab85dde97a9d1f4a9)\u3092\u53c2\u8003\u306b\u8abf\u3079\u3066\u307f\u3066\u6b32\u3057\u3044\u3002\n\n```javascript:function\u30ce\u30fc\u30c9\nvar param = \"voice=ja-JP_EmiVoice&accept=audio/wav&text=\" + msg.payload.text;\nmsg.url = encodeURI(\"https://stream.watsonplatform.net/text-to-speech/api/v1/synthesize\" + \"?\" + param);\nreturn msg;\n```\n\n## TTS\u306e\u547c\u3073\u51fa\u3057\n\u547c\u3073\u51fa\u3057\u306fhttp\u30ea\u30af\u30a8\u30b9\u30c8\u30ce\u30fc\u30c9\u3092\u4f7f\u7528\u3059\u308b\u3002\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306e\u4f7f\u7528\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u3001\u30e6\u30fc\u30b6\u30fcID\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5165\u529b\u6b04\u3092\u51fa\u3057\u3001TTS\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u4f7f\u7528\u3059\u308b\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3059\u308b\u3002\n\u307e\u305f\u3001Return\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u300cUTF-8 String\u300d\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u304c\u3001\u97f3\u58f0\u30c7\u30fc\u30bf\u306a\u306e\u3067**a binary buffer**\u3092\u9078\u629e\u3057\u3066\u304a\u304f\u3002\n![node-red_tts_request.png](https://qiita-image-store.s3.amazonaws.com/0/102519/53152e63-8869-5d0c-c25d-7e4de597966f.png)\n\n## TTS\u306e\u51fa\u529b\n\u7d50\u679c\u306f\u3001\u305d\u306e\u307e\u307ehttp\u30ec\u30b9\u30dd\u30f3\u30b9\u30ce\u30fc\u30c9\u3067\u8fd4\u305b\u3070\u3088\u3044\u3002\n\u3080\u3057\u308d\u554f\u984c\u306f\u518d\u751f\u65b9\u6cd5\u3060\u3002\n\u97f3\u58f0\u306e\u518d\u751f\u306b\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5fc5\u8981\u3002curl\u3067\u51fa\u529b\u3057\u305f\u5834\u5408\u306f\u7d50\u679c\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u843d\u3068\u3057\u3066\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u518d\u751f\u3067\u304d\u308b\u3057\u3001\u30d6\u30e9\u30a6\u30b6\u30fc\u3067\u76f4\u63a5URL\u3092\u5165\u529b\u3057\u305f\u5834\u5408\u306f\u7d50\u679c\u3092\u30d7\u30ec\u30a4\u30e4\u30fc\u3067\u958b\u3044\u3066\u518d\u751f\u304c\u3067\u304d\u308b\u3002\u30c6\u30b9\u30c8\u3059\u308b\u3060\u3051\u306a\u3089\u305d\u308c\u3067\u3082\u3044\u3044\u304c\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u7d44\u307f\u8fbc\u3080\u306a\u3089\u3061\u3083\u3093\u3068\u518d\u751f\u3055\u305b\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306eHTML\u30d5\u30a1\u30a4\u30eb\u306bjavascript\u3067\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u304a\u304f\u3068\u518d\u751f\u53ef\u80fd\u3060\u3002\n\n```javascript:\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\nvar audio = document.createElement(\"audio\");\naudio.src = \"./t2s?text=\" + \"\u3053\u3093\u306b\u3061\u306f\"; \naudio.play();\n\n```\n\n## \u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001TTS\u306e\u30b5\u30f3\u30d7\u30eb\u30fb\u30d5\u30ed\u30fc\u306f\u3053\u3061\u3089\u3002\u30ce\u30fc\u30c9\u3092\u4f7f\u3063\u305f\u65b9\u304c\u8272\u3005\u7c21\u5358\u306e\u306f\u305a\u3002\u65e9\u304f\u65e5\u672c\u8a9e\u5316\u304c\u5f85\u3061\u671b\u307e\u308c\u308b\u3002\n![node-red_tts_flow.png](https://qiita-image-store.s3.amazonaws.com/0/102519/1263aac5-e480-acb2-a2a7-9f5a39023dda.png)\n\n\n# \u7d42\u308f\u308a\u306b\n\u3053\u308c\u3089\u3092\u5168\u3066\u7d44\u307f\u5408\u308f\u305b\u3066\u3001[Bluemix\u306eWatson API\u3092\u99c6\u4f7f\u3057\u3066\u65e5\u672c\u8a9e\u8cea\u554f\u5fdc\u7b54\u30b7\u30b9\u30c6\u30e0\u3092\u4f5c\u308b\uff5e\u305d\u306e2\uff5e](http://qiita.com/VegaSato/items/1fa437667815a20a5624)\u3067\u4f5c\u3063\u305f\u8cea\u554f\u5fdc\u7b54\u30a2\u30d7\u30ea\u3092\u3001Node-RED\u3067\u4f5c\u308a\u76f4\u3057\u3066\u307f\u305f\u3002\n\u304c\u3001\u4eca\u56de\u304b\u306a\u308a\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u6b21\u56de\u306b\u307e\u308f\u305d\u3046\u3068\u601d\u3046\u3002\n", "tags": ["Bluemix", "Watson", "\u4eba\u5de5\u77e5\u80fd", "\u6a5f\u68b0\u5b66\u7fd2", "node-red"]}