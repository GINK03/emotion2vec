{"context": "\u30b7\u30f3\u30b0\u30eb\u30da\u30fc\u30b8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067 HTML5 History API \u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305f\u3093\u306b python3 -m http.server \u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3060\u3051\u3067\u306f\u554f\u984c\u304c\u3042\u3063\u305f\u306e\u3067\u7c21\u6613\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\nhttps://gist.github.com/jtangelder/e445e9a7f5e31c220be6 \u3092 Python3 \u3067\u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u4e00\u90e8\u4fee\u6b63\u3057\u305f\u7a0b\u5ea6\u3067\u3059\u3002\n\nserver4spa.py\n#!/usr/bin/env python\n\n# Inspired by https://gist.github.com/jtangelder/e445e9a7f5e31c220be6\n# Python3 http.server for Single Page Application\n\nimport urllib.parse\nimport http.server\nimport socketserver\nimport re\nfrom pathlib import Path\n\nHOST = ('0.0.0.0', 8000)\npattern = re.compile('.png|.jpg|.jpeg|.js|.css|.ico|.gif|.svg', re.IGNORECASE)\n\n\nclass Handler(http.server.SimpleHTTPRequestHandler):\n    def do_GET(self):\n        url_parts = urllib.parse.urlparse(self.path)\n        request_file_path = Path(url_parts.path.strip(\"/\"))\n\n        ext = request_file_path.suffix\n        if not request_file_path.is_file() and not pattern.match(ext):\n            self.path = 'index.html'\n\n        return http.server.SimpleHTTPRequestHandler.do_GET(self)\n\n\nhttpd = socketserver.TCPServer(HOST, Handler)\nhttpd.serve_forever()\n\n\n\u5b9f\u884c\u306f python3 server4spa.py \u3067\u3059\u3002\n\u610f\u5916\u306b\u6709\u7528\u306a\u306e\u3067 PyPI \u884c\u304d\u306b\u3057\u3088\u3046\u304b\u691c\u8a0e\u4e2d\u3002\n\n\u95a2\u9023\n\nreact-router\u3067URL\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u969b\u3001URL\u76f4\u6253\u3061\u3060\u3068404\u306b\u306a\u308a\u307e\u3059(26245)\uff5cteratail\n\n\u30b7\u30f3\u30b0\u30eb\u30da\u30fc\u30b8\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067 HTML5 History API \u3092\u5229\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u3001\u305f\u3093\u306b `python3 -m http.server` \u3067\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3061\u4e0a\u3052\u308b\u3060\u3051\u3067\u306f\u554f\u984c\u304c\u3042\u3063\u305f\u306e\u3067\u7c21\u6613\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\nhttps://gist.github.com/jtangelder/e445e9a7f5e31c220be6 \u3092 Python3 \u3067\u52d5\u304f\u3088\u3046\u306b\u3057\u3066\u4e00\u90e8\u4fee\u6b63\u3057\u305f\u7a0b\u5ea6\u3067\u3059\u3002\n\n```py:server4spa.py\n#!/usr/bin/env python\n\n# Inspired by https://gist.github.com/jtangelder/e445e9a7f5e31c220be6\n# Python3 http.server for Single Page Application\n\nimport urllib.parse\nimport http.server\nimport socketserver\nimport re\nfrom pathlib import Path\n\nHOST = ('0.0.0.0', 8000)\npattern = re.compile('.png|.jpg|.jpeg|.js|.css|.ico|.gif|.svg', re.IGNORECASE)\n\n\nclass Handler(http.server.SimpleHTTPRequestHandler):\n    def do_GET(self):\n        url_parts = urllib.parse.urlparse(self.path)\n        request_file_path = Path(url_parts.path.strip(\"/\"))\n\n        ext = request_file_path.suffix\n        if not request_file_path.is_file() and not pattern.match(ext):\n            self.path = 'index.html'\n\n        return http.server.SimpleHTTPRequestHandler.do_GET(self)\n\n\nhttpd = socketserver.TCPServer(HOST, Handler)\nhttpd.serve_forever()\n```\n\n\u5b9f\u884c\u306f `python3 server4spa.py` \u3067\u3059\u3002\n\n\u610f\u5916\u306b\u6709\u7528\u306a\u306e\u3067 PyPI \u884c\u304d\u306b\u3057\u3088\u3046\u304b\u691c\u8a0e\u4e2d\u3002\n\n## \u95a2\u9023\n\n- [react-router\u3067URL\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3057\u305f\u969b\u3001URL\u76f4\u6253\u3061\u3060\u3068404\u306b\u306a\u308a\u307e\u3059(26245)\uff5cteratail](https://teratail.com/questions/26245)\n", "tags": ["SinglePageApplication", "python3", "Python"]}