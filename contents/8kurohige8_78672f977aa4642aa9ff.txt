{"context": " More than 1 year has passed since last update.<?php\n\nnamespace ~~~~~~\\Controller;\n\nuse Symfony\\Bundle\\FrameworkBundle\\Controller\\Controller;\nuse Symfony\\Component\\HttpFoundation\\Request;\n\nuse Aws\\Common\\Aws;\nuse Aws\\S3\\Enum\\CannedAcl;\nuse Aws\\S3\\Exception\\S3Exception;\nuse Guzzle\\Http\\EntityBody;\nuse Symfony\\Component\\HttpFoundation\\Response;\n\nclass S3Controller extends Controller\n{\n\n    public function imageAction($fileName) {\n\n        $bucketName = $this->container->getParameter(\"bucketName\");\n        $aws = $this->container->get('aws');\n        $s3 = $aws->get('s3');\n        $fileName = '/'.$fileName;\n\n        $object = $s3->getObject(array(\n                'Bucket'    => $bucketName,\n                'Key'       => $fileName\n        ));\n\n        $imgStr = $object[\"Body\"]->__toString();\n\n        return new Response($imgStr,200,array('Content-Type' => $object[\"ContentType\"]));\n    }\n}\n\n```php\n<?php\n\nnamespace ~~~~~~\\Controller;\n\nuse Symfony\\Bundle\\FrameworkBundle\\Controller\\Controller;\nuse Symfony\\Component\\HttpFoundation\\Request;\n\nuse Aws\\Common\\Aws;\nuse Aws\\S3\\Enum\\CannedAcl;\nuse Aws\\S3\\Exception\\S3Exception;\nuse Guzzle\\Http\\EntityBody;\nuse Symfony\\Component\\HttpFoundation\\Response;\n\nclass S3Controller extends Controller\n{\n\n\tpublic function imageAction($fileName) {\n\n\t\t$bucketName = $this->container->getParameter(\"bucketName\");\n\t\t$aws = $this->container->get('aws');\n\t\t$s3 = $aws->get('s3');\n\t\t$fileName = '/'.$fileName;\n\n\t\t$object = $s3->getObject(array(\n\t\t\t\t'Bucket'\t=> $bucketName,\n\t\t\t\t'Key'\t\t=> $fileName\n\t\t));\n\t\t\n\t\t$imgStr = $object[\"Body\"]->__toString();\n\n\t\treturn new Response($imgStr,200,array('Content-Type' => $object[\"ContentType\"]));\n\t}\n}\n```\n", "tags": ["PHP", "Symfony2", "AWS"]}