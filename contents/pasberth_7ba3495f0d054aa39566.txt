{"tags": ["memo"], "context": " More than 1 year has passed since last update.\n\n\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u3064\u3044\u3066\n\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u3064\u3044\u3066\u306f\uff0c\n\nChapter 4  Labels and variants 4.2  Polymorphic variants\n\n\u3042\u305f\u308a\u3092\u8aad\u3080\u3068\u3088\u3044\u3067\u3057\u3087\u3046\uff0e(\u3053\u306e\u8a18\u4e8b\u3067\u306f\u89e3\u8aac\u3057\u307e\u305b\u3093)\uff0e\n\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f\uff0c\n\nChapter 7. SML#\u306e\u62e1\u5f35\u6a5f\u80fd\uff1a\u30ec\u30b3\u30fc\u30c9\u591a\u76f8\u6027 \n\n\u3092\u8aad\u3080\u3068\u3088\u3044\u3067\u3057\u3087\u3046\uff0e\n\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3088\u308b\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306e\u8868\u73fe\u306b\u3064\u3044\u3066\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3088\u308b\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306e\u8868\u73fe\u306b\u3064\u3044\u3066\u306f\uff0c\n\nChapter 7. SML#\u306e\u62e1\u5f35\u6a5f\u80fd\uff1a\u30ec\u30b3\u30fc\u30c9\u591a\u76f8\u6027 \u00a7 7.7. \u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306e\u8868\u73fe\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u3067\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3092\u8868\u73fe\u3059\u308b\n\n\u306a\u3069\u306b\uff0c\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u304a\u308a\u307e\u3059\uff0e\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u3067\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u304c\u3067\u304d\u308b\u306a\u3089\uff0c\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3067\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u3082\u3067\u304d\u308b\u306f\u305a\uff01\n\u3068\uff0c\u8003\u3048\u307e\u3057\u3066\uff0c OCaml \u306e\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3067\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u304c\u5b9f\u88c5\u3067\u304d\u306a\u3044\u304b\u8a66\u3057\u307e\u3057\u305f\uff0e\n\n\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3067\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\n\u7d50\u8ad6\u3068\u3057\u3066\u306f\u3053\u3046\u306a\u308a\u307e\u3059\uff0e\nlet id x = x\nlet pair x y = function `Fst f -> f x | `Snd f -> f y\nlet fst p = p (`Fst id)\nlet snd p = p (`Snd id)\n\nlet triple x y z = function `Fst f -> f x | `Snd f -> f y | `Third f -> f z\nlet third p = p (`Third id)\n\n(* fst \u306f pair/triple \u306e\u3069\u3061\u3089\u306b\u5bfe\u3057\u3066\u3082\u4f7f\u3048\u308b *)\nlet i = fst (pair 1 'a')\nlet j = fst (triple 2 'b' 3.14)\n\n\n\u6ce8\u610f(\u8ffd\u8a18)\nOCaml \u306b\u306f (Relaxed) Value Restriction \u304c\u3042\u308b\u306e\u3067\uff0c\u3061\u3083\u3093\u3068\u4f7f\u3046\u306b\u306f \u03b7 expansion\n\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff0e\nlet id x = x\nlet pair x y = function `Fst f -> f x | `Snd f -> f y\nlet fst p = p (`Fst id)\nlet snd p = p (`Snd id)\n\nlet triple x y z = function `Fst f -> f x | `Snd f -> f y | `Third f -> f z\nlet third p = p (`Third id)\n\nlet p = fun x -> pair 1 'a' x\nlet i = fst p\nlet j = snd p\n\n\n\u86c7\u8db3\u306a\u3053\u3068\n\u6700\u521d\uff0cADT\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u8a00\u8a9e\u306b\u304a\u3051\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u3060\u3068\u6349\u3048\u3066\uff0c\u6b21\u306e\u3088\u3046\u306a\u69cb\u9020\u3092\u8003\u3048\u307e\u3057\u305f\uff0e\nlet pair x y = function `Fst -> x | `Snd -> y\nlet fst p = p `Fst\nlet snd p = p `Snd\n\nlet triple x y z = function `Fst -> x | `Snd -> y | `Third -> z\nlet third p = p `Third\n\n(* fst \u306f pair/triple \u306e\u3069\u3061\u3089\u306b\u5bfe\u3057\u3066\u3082\u4f7f\u3048\u308b *)\nlet i = fst (pair 1 2)\nlet j = fst (triple 2 3 4)\n\n\u3057\u304b\u3057\uff0c\u3053\u308c\u3060\u3068\uff0c pair x y \u306e x \u3068 y \u304c\u540c\u3058\u578b\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\uff0e\nlet pair x y = function `Fst -> x | `Snd -> y\nlet fst p = p `Fst\nlet snd p = p `Snd\n\nlet triple x y z = function `Fst -> x | `Snd -> y | `Third -> z\nlet third p = p `Third\n\n(* \u3053\u3046\u3044\u3046\u30da\u30a2\u306f\u3064\u304f\u308c\u306a\u3044 *)\nlet p = pair 1 'b'\n\n\u305d\u3053\u3067\u95a2\u6570\u3092\u3072\u3068\u3064\u565b\u307e\u305b\u308b\u3068\u3044\u3046\u5de5\u592b\u3092\u3057\u307e\u3057\u305f\uff0e\n\u30da\u30a2\u306e\u5b9a\u7fa9\u306f\nlet pair x y = function `Fst f -> f x | `Snd f -> f y\nlet fst p = p (`Fst id)\nlet snd p = p (`Snd id)\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\uff0c\u30da\u30a2\u306e\u305d\u308c\u305e\u308c\u304c\u7570\u306a\u308b\u578b\u3067\u3082\u3046\u307e\u304f\u52d5\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3068\u3055\uff0e\n## \u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u3064\u3044\u3066\n\n\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306b\u3064\u3044\u3066\u306f\uff0c\n\n* [Chapter 4  Labels and variants 4.2  Polymorphic variants](http://caml.inria.fr/pub/docs/manual-ocaml/lablexamples.html#sec46)\n\n\u3042\u305f\u308a\u3092\u8aad\u3080\u3068\u3088\u3044\u3067\u3057\u3087\u3046\uff0e(\u3053\u306e\u8a18\u4e8b\u3067\u306f\u89e3\u8aac\u3057\u307e\u305b\u3093)\uff0e\n\n## \u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\n\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3064\u3044\u3066\u306f\uff0c\n\n* [Chapter 7. SML#\u306e\u62e1\u5f35\u6a5f\u80fd\uff1a\u30ec\u30b3\u30fc\u30c9\u591a\u76f8\u6027 ](http://www.pllab.riec.tohoku.ac.jp/smlsharp/docs/2.0/ja/Ch7.xhtml)\n\n\u3092\u8aad\u3080\u3068\u3088\u3044\u3067\u3057\u3087\u3046\uff0e\n\n## \u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3088\u308b\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306e\u8868\u73fe\u306b\u3064\u3044\u3066\n\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u306b\u3088\u308b\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306e\u8868\u73fe\u306b\u3064\u3044\u3066\u306f\uff0c\n\n* [Chapter 7. SML#\u306e\u62e1\u5f35\u6a5f\u80fd\uff1a\u30ec\u30b3\u30fc\u30c9\u591a\u76f8\u6027 \u00a7 7.7. \u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u306e\u8868\u73fe](http://www.pllab.riec.tohoku.ac.jp/smlsharp/docs/2.0/ja/Ch7.S7.xhtml)\n* [\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u3067\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3092\u8868\u73fe\u3059\u308b](http://qiita.com/dico_leque/items/db4f48f29ff863f0eb3c)\n\n\u306a\u3069\u306b\uff0c\u8a73\u3057\u304f\u66f8\u304b\u308c\u3066\u304a\u308a\u307e\u3059\uff0e\n\n\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u3067\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u304c\u3067\u304d\u308b\u306a\u3089\uff0c\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3067\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u3082\u3067\u304d\u308b\u306f\u305a\uff01\n\u3068\uff0c\u8003\u3048\u307e\u3057\u3066\uff0c OCaml \u306e\u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3067\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u304c\u5b9f\u88c5\u3067\u304d\u306a\u3044\u304b\u8a66\u3057\u307e\u3057\u305f\uff0e\n\n<!--\n## \u591a\u76f8\u30ec\u30b3\u30fc\u30c9\u304c\u306a\u305c\u5fc5\u8981\u304b\n\n\u305f\u3068\u3048\u3070\uff0c\u30bf\u30d7\u30eb\u3068\u547c\u3070\u308c\u308b\u3082\u306e\u306b\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3057\u3066\uff0c\u30da\u30a2\u3084\u30c8\u30ea\u30d7\u30eb\u304c\u3042\u308a\u307e\u3059\uff0e\n\u30da\u30a2\u3068\u3044\u3046\u306e\u306f\uff0c\u8981\u7d20\u6570\u304c2\u3064\u306e\u30bf\u30d7\u30eb\u3067\u3057\u3066\uff0c\u30c8\u30ea\u30d7\u30eb\u306f\uff0c\u8981\u7d20\u6570\u304c3\u3064\u306e\u30bf\u30d7\u30eb\u3067\u3059\uff0e\n\n```ocaml\nlet pair = (1, 'a')\nlet triple = (2, 'b', 3.14)\n```\n\n\u3068\u3053\u308d\u3067\uff0c fst/snd \u3068\u3044\u3046\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\uff0e\u3053\u308c\u306f\uff0c\u30da\u30a2\u304b\u3089\u8981\u7d20\u3092\u53d6\u308a\u51fa\u3059\u95a2\u6570\u3067\u3059\uff0e\n\n```ocaml\nlet pair = (1, 'a')\nlet elem1 = fst pair (* = 1 *)\nlet elem2 = snd pair (* = 2 *)\n```\n\nfst/snd \u306f\uff0c\u30c8\u30ea\u30d7\u30eb\u306b\u9069\u7528\u3057\u3066\u3082\u826f\u3055\u305d\u3046\u306b\u898b\u3048\u307e\u3059\uff0e\n\n```ocaml\n(* \u3053\u308c\u306fOCaml\u306e\u578b\u30b7\u30b9\u30c6\u30e0\u3067\u306fNG\u3060\u304c\uff0c\u76f4\u611f\u7684\u306b\u306fOK\u306b\u898b\u3048\u308b *)\nlet triple = (2, 'b', 3.14)\nlet elem1 = fst triple (* 2 \u3092\u53d6\u308a\u51fa\u3057\u305f\u3044 *)\nlet elem2 = snd triple (* b \u3092\u53d6\u308a\u51fa\u3057\u305f\u3044 *)\n```\n\n\u3059\u308b\u3068\uff0c\u30c8\u30ea\u30d7\u30eb\u7528\u306e fst/snd, \u3055\u3089\u306b4\u30bf\u30d7\u30eb\u30845\u30bf\u30d7\u30eb\u7528\u306e fst/snd \u3092\u3059\u3079\u3066\u7528\u610f\u3057\u306a\u3044\u3068\n\u3044\u3051\u306a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\uff0e\n\n```ocaml\nlet fst3 (x,_,_) = x\nlet snd3 (_,x,_) = x\nlet fst4 (x,_,_,_) = x\nlet snd4 (_,x,_,_) = x\nlet fst5 (x,_,_,_,_) = x\nlet snd5 (_,x,_,_,_) = x\n```\n\n\u3053\u308c\u3067\u306f\u60b2\u3057\u3044\u3067\u3059\uff0e\n\n\u30ec\u30b3\u30fc\u30c9\u591a\u76f8\u6027\u304c\u3042\u308c\u3070\uff0cn-\u30bf\u30d7\u30eb(\u305f\u3060\u3057n\u22672)\u306b\u9069\u7528\u3067\u304d\u308bfst/snd\u304c\u5b9a\u7fa9\u3067\u304d\u307e\u3059\uff0e\n-->\n\n## \u591a\u76f8\u30d0\u30ea\u30a2\u30f3\u30c8\u3067\u591a\u76f8\u30ec\u30b3\u30fc\u30c9\n\n\u7d50\u8ad6\u3068\u3057\u3066\u306f\u3053\u3046\u306a\u308a\u307e\u3059\uff0e\n\n```ocaml\nlet id x = x\nlet pair x y = function `Fst f -> f x | `Snd f -> f y\nlet fst p = p (`Fst id)\nlet snd p = p (`Snd id)\n\nlet triple x y z = function `Fst f -> f x | `Snd f -> f y | `Third f -> f z\nlet third p = p (`Third id)\n\n(* fst \u306f pair/triple \u306e\u3069\u3061\u3089\u306b\u5bfe\u3057\u3066\u3082\u4f7f\u3048\u308b *)\nlet i = fst (pair 1 'a')\nlet j = fst (triple 2 'b' 3.14)\n```\n\n## \u6ce8\u610f(\u8ffd\u8a18)\n\nOCaml \u306b\u306f (Relaxed) Value Restriction \u304c\u3042\u308b\u306e\u3067\uff0c\u3061\u3083\u3093\u3068\u4f7f\u3046\u306b\u306f \u03b7 expansion\n\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff0e\n\n```ocaml\nlet id x = x\nlet pair x y = function `Fst f -> f x | `Snd f -> f y\nlet fst p = p (`Fst id)\nlet snd p = p (`Snd id)\n\nlet triple x y z = function `Fst f -> f x | `Snd f -> f y | `Third f -> f z\nlet third p = p (`Third id)\n\nlet p = fun x -> pair 1 'a' x\nlet i = fst p\nlet j = snd p\n```\n\n## \u86c7\u8db3\u306a\u3053\u3068\n\n\u6700\u521d\uff0cADT\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u8a00\u8a9e\u306b\u304a\u3051\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u3060\u3068\u6349\u3048\u3066\uff0c\u6b21\u306e\u3088\u3046\u306a\u69cb\u9020\u3092\u8003\u3048\u307e\u3057\u305f\uff0e\n\n```ocaml\nlet pair x y = function `Fst -> x | `Snd -> y\nlet fst p = p `Fst\nlet snd p = p `Snd\n\nlet triple x y z = function `Fst -> x | `Snd -> y | `Third -> z\nlet third p = p `Third\n\n(* fst \u306f pair/triple \u306e\u3069\u3061\u3089\u306b\u5bfe\u3057\u3066\u3082\u4f7f\u3048\u308b *)\nlet i = fst (pair 1 2)\nlet j = fst (triple 2 3 4)\n```\n\n\u3057\u304b\u3057\uff0c\u3053\u308c\u3060\u3068\uff0c `pair x y` \u306e x \u3068 y \u304c\u540c\u3058\u578b\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3053\u3068\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\uff0e\n\n\n```ocaml\nlet pair x y = function `Fst -> x | `Snd -> y\nlet fst p = p `Fst\nlet snd p = p `Snd\n\nlet triple x y z = function `Fst -> x | `Snd -> y | `Third -> z\nlet third p = p `Third\n\n(* \u3053\u3046\u3044\u3046\u30da\u30a2\u306f\u3064\u304f\u308c\u306a\u3044 *)\nlet p = pair 1 'b'\n```\n\n\u305d\u3053\u3067\u95a2\u6570\u3092\u3072\u3068\u3064\u565b\u307e\u305b\u308b\u3068\u3044\u3046\u5de5\u592b\u3092\u3057\u307e\u3057\u305f\uff0e\n\u30da\u30a2\u306e\u5b9a\u7fa9\u306f\n\n```ocaml\nlet pair x y = function `Fst f -> f x | `Snd f -> f y\nlet fst p = p (`Fst id)\nlet snd p = p (`Snd id)\n```\n\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067\uff0c\u30da\u30a2\u306e\u305d\u308c\u305e\u308c\u304c\u7570\u306a\u308b\u578b\u3067\u3082\u3046\u307e\u304f\u52d5\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3068\u3055\uff0e\n"}