{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nMySQL\u3067\u9ad8\u901f\u306b\u5168\u6587\u691c\u7d22\u3059\u308b\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3Mroonga\u3067\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30ec\u30b3\u30fc\u30c9\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\u65b9\u6cd5\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\u3053\u308c\u3089\u306e\u65b9\u6cd5\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u9055\u3044\u3092\u7c21\u5358\u306b\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\nyear\u30ab\u30e9\u30e0\u306b2001\uff5e2010\u3092\u5408\u8a0810,000,000\u4ef6(1,000\u4e07\u4ef6)\u30bb\u30c3\u30c8\ntext\u30ab\u30e9\u30e0\u306f\u7a7a\u767d\nCREATE TABLE IF NOT EXISTS `test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `year` int(11) NOT NULL,\n  `text` text NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `year` (`year`),\n  FULLTEXT INDEX `text` (`text`)\n) ENGINE=mroonga  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;\nINSERT INTO test (year) VALUES (2001);\nINSERT INTO test (year) VALUES (2002);\nINSERT INTO test (year) VALUES (2003);\nINSERT INTO test (year) VALUES (2004);\nINSERT INTO test (year) VALUES (2005);\nINSERT INTO test (year) VALUES (2006);\nINSERT INTO test (year) VALUES (2007);\nINSERT INTO test (year) VALUES (2008);\nINSERT INTO test (year) VALUES (2009);\nINSERT INTO test (year) VALUES (2010);\nCREATE TABLE IF NOT EXISTS `test2` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `year` int(11) NOT NULL,\n  `text` text NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `year` (`year`),\n  FULLTEXT INDEX `text` (`text`)\n) ENGINE=mroonga  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;\nINSERT INTO test2(SELECT '',test.year,'' FROM test, test test2, test test3, test test4,test test5,test test6,test test7);\n\n\n\u65b9\u6cd51 - \u666e\u901a\u306bSQL\u3067\u30ab\u30a6\u30f3\u30c8\n\u666e\u901a\u306bSQL\u306eCOUNT(*)\u30672005\u4ee5\u964d\u306eyear\u306e\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\nmysql> SELECT COUNT(*) FROM test2 WHERE year > 2005;\n+----------+\n| COUNT(*) |\n+----------+\n|  5000000 |\n+----------+\n1 row in set (2.06 sec)\n\n\n\u65b9\u6cd52 - AGAINST\u53e5\u306bGroonga\u306e\u30af\u30a8\u30ea\u69cb\u6587\u3092\u4f7f\u3046\u65b9\u6cd5\u3067\u30ab\u30a6\u30f3\u30c8\nMroonga\u306b\u3088\u308aMySQL\u3067\u8907\u6570\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u6709\u52b9\u306b\u5168\u6587\u691c\u7d22\u3059\u308b\u65b9\u6cd5 \u306b\u8a18\u8f09\u306eAGAINST\u53e5\u306bGroonga\u306e\u30af\u30a8\u30ea\u69cb\u6587\u3092\u5229\u7528\u3057\u305f\u6700\u9069\u5316\u306e\u65b9\u6cd5\u3092\u4f7f\u3063\u30662005\u4ee5\u964d\u306eyear\u306e\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\nmysql> SELECT COUNT(*) FROM test2 WHERE MATCH(text) AGAINST('+year:>2005' IN BOOLEAN MO\nDE);\n+----------+\n| COUNT(*) |\n+----------+\n|  5000000 |\n+----------+\n1 row in set (2.76 sec)\n\n\n\u65b9\u6cd53 - mroonga_command\u3092\u4f7f\u3063\u3066\u30ab\u30a6\u30f3\u30c8\nmroonga_command\u306eUDF\u3092\u4f7f\u3063\u3066\u3001Groonga\u306eselect\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308a2005\u4ee5\u964d\u306eyear\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\nmysql> SELECT mroonga_command('select test2 --query +year:>2005 --limit 0 --output_columns _key') as cnt;\n+----------------------------------+\n| cnt                              |\n+----------------------------------+\n| [[[5000000],[[\"_key\",\"Int32\"]]]] |\n+----------------------------------+\n1 row in set (0.84 sec)\n\n\n\u307e\u3068\u3081\n\u8907\u6570\u7a2e\u985e\u306e\u30ab\u30a6\u30f3\u30c8\u65b9\u6cd5\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nMroonga\u3067\u306f\u3001SQL\u306e\u4ed6\u306b\u76f4\u63a5Groonga\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6271\u3046UDF\u3082\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nGroonga\u306e\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3001\u7d50\u679c\u304cJSON\u5f62\u5f0f\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u901f\u5ea6\u5dee\u3084\u6271\u3044\u3084\u3059\u3055\u7b49\u3092\u6bd4\u8f03\u3057\u3066\u307f\u3066\u3001\u3088\u308a\u99b4\u67d3\u3080\u65b9\u6cd5\u3092\u63a2\u3063\u3066\u307f\u308b\u3068\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n# \u306f\u3058\u3081\u306b\nMySQL\u3067\u9ad8\u901f\u306b\u5168\u6587\u691c\u7d22\u3059\u308b\u305f\u3081\u306e\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3Mroonga\u3067\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u30ec\u30b3\u30fc\u30c9\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3059\u308b\u65b9\u6cd5\u304c\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u308c\u3089\u306e\u65b9\u6cd5\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u9055\u3044\u3092\u7c21\u5358\u306b\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3059\u3002\n\n# \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\n\n`year`\u30ab\u30e9\u30e0\u306b`2001`\uff5e`2010`\u3092\u5408\u8a0810,000,000\u4ef6(1,000\u4e07\u4ef6)\u30bb\u30c3\u30c8\n`text`\u30ab\u30e9\u30e0\u306f\u7a7a\u767d\n\n```sql\nCREATE TABLE IF NOT EXISTS `test` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `year` int(11) NOT NULL,\n  `text` text NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `year` (`year`),\n  FULLTEXT INDEX `text` (`text`)\n) ENGINE=mroonga  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;\nINSERT INTO test (year) VALUES (2001);\nINSERT INTO test (year) VALUES (2002);\nINSERT INTO test (year) VALUES (2003);\nINSERT INTO test (year) VALUES (2004);\nINSERT INTO test (year) VALUES (2005);\nINSERT INTO test (year) VALUES (2006);\nINSERT INTO test (year) VALUES (2007);\nINSERT INTO test (year) VALUES (2008);\nINSERT INTO test (year) VALUES (2009);\nINSERT INTO test (year) VALUES (2010);\nCREATE TABLE IF NOT EXISTS `test2` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `year` int(11) NOT NULL,\n  `text` text NOT NULL,\n  PRIMARY KEY (`id`),\n  KEY `year` (`year`),\n  FULLTEXT INDEX `text` (`text`)\n) ENGINE=mroonga  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;\nINSERT INTO test2(SELECT '',test.year,'' FROM test, test test2, test test3, test test4,test test5,test test6,test test7);\n```\n\n\n# \u65b9\u6cd51 - \u666e\u901a\u306bSQL\u3067\u30ab\u30a6\u30f3\u30c8\n\u666e\u901a\u306bSQL\u306e<code>COUNT(*)</code>\u30672005\u4ee5\u964d\u306e<code>year</code>\u306e\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\n```sql\nmysql> SELECT COUNT(*) FROM test2 WHERE year > 2005;\n+----------+\n| COUNT(*) |\n+----------+\n|  5000000 |\n+----------+\n1 row in set (2.06 sec)\n```\n\n# \u65b9\u6cd52 - AGAINST\u53e5\u306bGroonga\u306e\u30af\u30a8\u30ea\u69cb\u6587\u3092\u4f7f\u3046\u65b9\u6cd5\u3067\u30ab\u30a6\u30f3\u30c8\n[Mroonga\u306b\u3088\u308aMySQL\u3067\u8907\u6570\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u6709\u52b9\u306b\u5168\u6587\u691c\u7d22\u3059\u308b\u65b9\u6cd5](http://createfield.com/Mroonga%E3%81%AB%E3%82%88%E3%82%8AMySQL%E3%81%A7%E8%A4%87%E6%95%B0%E3%82%A4%E3%83%B3%E3%83%87%E3%83%83%E3%82%AF%E3%82%B9%E3%82%92%E6%9C%89%E5%8A%B9%E3%81%AB%E5%85%A8%E6%96%87%E6%A4%9C%E7%B4%A2%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95) \u306b\u8a18\u8f09\u306eAGAINST\u53e5\u306bGroonga\u306e\u30af\u30a8\u30ea\u69cb\u6587\u3092\u5229\u7528\u3057\u305f\u6700\u9069\u5316\u306e\u65b9\u6cd5\u3092\u4f7f\u3063\u30662005\u4ee5\u964d\u306e<code>year</code>\u306e\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\n```sql\nmysql> SELECT COUNT(*) FROM test2 WHERE MATCH(text) AGAINST('+year:>2005' IN BOOLEAN MO\nDE);\n+----------+\n| COUNT(*) |\n+----------+\n|  5000000 |\n+----------+\n1 row in set (2.76 sec)\n```\n\n# \u65b9\u6cd53 - mroonga_command\u3092\u4f7f\u3063\u3066\u30ab\u30a6\u30f3\u30c8\n<code>mroonga_command</code>\u306eUDF\u3092\u4f7f\u3063\u3066\u3001Groonga\u306eselect\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308a2005\u4ee5\u964d\u306e<code>year</code>\u4ef6\u6570\u3092\u30ab\u30a6\u30f3\u30c8\u3057\u3066\u307f\u307e\u3059\u3002\n\n```sql\nmysql> SELECT mroonga_command('select test2 --query +year:>2005 --limit 0 --output_columns _key') as cnt;\n+----------------------------------+\n| cnt                              |\n+----------------------------------+\n| [[[5000000],[[\"_key\",\"Int32\"]]]] |\n+----------------------------------+\n1 row in set (0.84 sec)\n```\n\n# \u307e\u3068\u3081\n\u8907\u6570\u7a2e\u985e\u306e\u30ab\u30a6\u30f3\u30c8\u65b9\u6cd5\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u3092\u6bd4\u8f03\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nMroonga\u3067\u306f\u3001SQL\u306e\u4ed6\u306b\u76f4\u63a5Groonga\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6271\u3046UDF\u3082\u63d0\u4f9b\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nGroonga\u306e\u30b3\u30de\u30f3\u30c9\u3067\u306f\u3001\u7d50\u679c\u304cJSON\u5f62\u5f0f\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u901f\u5ea6\u5dee\u3084\u6271\u3044\u3084\u3059\u3055\u7b49\u3092\u6bd4\u8f03\u3057\u3066\u307f\u3066\u3001\u3088\u308a\u99b4\u67d3\u3080\u65b9\u6cd5\u3092\u63a2\u3063\u3066\u307f\u308b\u3068\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n", "tags": ["mroonga3.10"]}