{"context": "\u81ea\u5206\u306eMacBookPro(MacOS Sierra 10.12.1)\u3067openMP\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u307e\u3059\u3002\u521d\u3081\u306f\u516c\u5f0f\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u3092\u53c2\u7167\u3057\u306a\u304c\u3089\u8a66\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u30d3\u30eb\u30c9\u304c\u3067\u304d\u305a\u5931\u6557\u3057\u307e\u3057\u305f\u3002 \u305d\u3053\u3067Homebrew\u3067\u69cb\u7bc9\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002 \u8ffd\u8a18\uff1aLLVM 8.1\u304b\u3089\u516c\u5f0f\u306eclang\u304cOpenMP\u306b\u5bfe\u5fdc\u3057\u305f\u305f\u3081\u3001\u4ee5\u4e0b\u3067\u7d39\u4ecb\u3059\u308bclang-omp\u3092\u5c0e\u5165\u3059\u308b\u3088\u308a\u6700\u65b0\u306eLLVM\u3092\u5c0e\u5165\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\uff08\u8ffd\u8a18\u53c2\u7167\uff09\n\nGetting the source code, Building\nHomebrew\u3092\u3064\u304b\u3063\u3066clang-omp\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ brew tap homebrew/boneyard\n$ brew install clang-omp\n\n\nUsing\nPATH\u3092\u901a\u3059\u305f\u3081\u306b.zshrc\u7b49\u306b\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002!date!\u306e\u90e8\u5206\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u6700\u65b0\u306e\u30d5\u30a9\u30eb\u30c0\u540d\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\nexport C_INCLUDE_PATH=/usr/local/Cellar/libiomp/!date!/include/libiomp:$C_INCLUDE_PATH\nexport CPLUS_INCLUDE_PATH=/usr/local/Cellar/libiomp/!date!/include/libiomp:$CPLUS_INCLUDE_PATH\nexport LIBRARY_PATH=/usr/local/Cellar/libiomp/!date!/lib:$LIBRARY_PATH\n\n\u8a66\u3057\u306b\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u307e\u3059\u3002\n\ntest_omp.cpp\n#include <iostream>\n#include <omp.h>\n\nint main() {\n  #pragma omp parallel\n  {\n    // \u3053\u3053\u304c\u30b3\u30a2\u6570\u5206\u3060\u3051\u4e26\u5217\u306b\u5b9f\u884c\u3055\u308c\u308b\u3002\uff11\u30b3\u30a2\u3060\u3068\uff11\u3064\u3067\u3059\u3002\n    printf(\"Hello, World ! %d of %d\\n\", omp_get_thread_num(), omp_get_num_threads());\n  }\n  return 0;\n}\n\n\n$ clang-omp++ -fopenmp test_omp.cpp -o test_omp \n$ ./test_omp\nHello, World ! 3 of 4\nHello, World ! 0 of 4\nHello, World ! 2 of 4\nHello, World ! 1 of 4\n\n\u6210\u529f\u3067\u3059\u3002\u3061\u306a\u307f\u306b\u50d5\u306eMacBookPro\u306e\u30b3\u30a2\u6570\u306f\n$  system_profiler SPHardwareDataType | grep Cores\n      Total Number of Cores: 2\n\n\uff12\u3064\u3067\u3059\u304c\u3001\uff14\u4e26\u5217\u3055\u308c\u3066\u3044\u308b\u306e\u306fHyper-threading\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3089\u3089\u3057\u3044\u3067\u3059\u3002\u7121\u52b9\u306b\u3057\u305f\u3044\u65b9\u306f\u3001\n$ sudo nvram SMT=0\n\n\u3067\u7121\u52b9\u306b\u3067\u304d\u307e\u3059\u3002\n\n\u8ffd\u8a18\uff1a2016/11/09\nEqualL2\u3055\u3093\u304b\u3089\u3088\u308a\u826f\u3044\u65b9\u6cd5\u3092\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\nLLVM 8.1\u304b\u3089\u516c\u5f0f\u306eclang\u304cOpenMP\u306b\u5bfe\u5fdc\u3057\u305f\u305f\u3081\u3001clang-omp\u306f\u3053\u308c\u4ee5\u4e0a\u66f4\u65b0\u3055\u308c\u306a\u3044\u305d\u3046\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u6700\u65b0\u306eLLVM\u3092\u5c0e\u5165\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\u50d5\u306eMac\u4e0a\u3067\u3082\u52d5\u4f5c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n1.llvm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew install llvm\n\n\n2.(.bashrc\u306a\u3069\u306b)\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8a2d\u5b9a\nalias clang-omp='/usr/local/opt/llvm/bin/clang -fopenmp -L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib'\nalias clang-omp++='/usr/local/opt/llvm/bin/clang++ -fopenmp -L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib'\n\n\n\u53c2\u8003\n\nOpenMP\u00ae/Clang\nMac\u3067clang+OpenMP 2016\nclang-omp\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nclang-omp\u3092brew\u3092\u3064\u304b\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\nMac OS X Lion (Server) \u3067 Hyper-Threading \u3092 ON/OFF\u3059\u308b\u65b9\u6cd5\n\n\n\u81ea\u5206\u306eMacBookPro(MacOS Sierra 10.12.1)\u3067openMP\u3092\u4f7f\u3046\u3053\u3068\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u624b\u9806\u3092\u307e\u3068\u3081\u307e\u3059\u3002\u521d\u3081\u306f[\u516c\u5f0f\u30db\u30fc\u30e0\u30da\u30fc\u30b8](https://clang-omp.github.io/)\u3092\u53c2\u7167\u3057\u306a\u304c\u3089\u8a66\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u30d3\u30eb\u30c9\u304c\u3067\u304d\u305a\u5931\u6557\u3057\u307e\u3057\u305f\u3002 ~~\u305d\u3053\u3067Homebrew\u3067\u69cb\u7bc9\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002~~ **\u8ffd\u8a18\uff1aLLVM 8.1\u304b\u3089\u516c\u5f0f\u306eclang\u304cOpenMP\u306b\u5bfe\u5fdc\u3057\u305f\u305f\u3081\u3001\u4ee5\u4e0b\u3067\u7d39\u4ecb\u3059\u308b`clang-omp`\u3092\u5c0e\u5165\u3059\u308b\u3088\u308a\u6700\u65b0\u306eLLVM\u3092\u5c0e\u5165\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\uff08\u8ffd\u8a18\u53c2\u7167\uff09**\n\n## Getting the source code, Building\nHomebrew\u3092\u3064\u304b\u3063\u3066clang-omp\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ brew tap homebrew/boneyard\n$ brew install clang-omp\n```\n\n## Using\n\nPATH\u3092\u901a\u3059\u305f\u3081\u306b.zshrc\u7b49\u306b\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002!date!\u306e\u90e8\u5206\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u6700\u65b0\u306e\u30d5\u30a9\u30eb\u30c0\u540d\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\n```.zshrc\nexport C_INCLUDE_PATH=/usr/local/Cellar/libiomp/!date!/include/libiomp:$C_INCLUDE_PATH\nexport CPLUS_INCLUDE_PATH=/usr/local/Cellar/libiomp/!date!/include/libiomp:$CPLUS_INCLUDE_PATH\nexport LIBRARY_PATH=/usr/local/Cellar/libiomp/!date!/lib:$LIBRARY_PATH\n```\n\u8a66\u3057\u306b\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u307e\u3059\u3002\n\n\n```test_omp.cpp\n#include <iostream>\n#include <omp.h>\n\nint main() {\n  #pragma omp parallel\n  {\n    // \u3053\u3053\u304c\u30b3\u30a2\u6570\u5206\u3060\u3051\u4e26\u5217\u306b\u5b9f\u884c\u3055\u308c\u308b\u3002\uff11\u30b3\u30a2\u3060\u3068\uff11\u3064\u3067\u3059\u3002\n    printf(\"Hello, World ! %d of %d\\n\", omp_get_thread_num(), omp_get_num_threads());\n  }\n  return 0;\n}\n```\n\n\n```\n$ clang-omp++ -fopenmp test_omp.cpp -o test_omp \n$ ./test_omp\nHello, World ! 3 of 4\nHello, World ! 0 of 4\nHello, World ! 2 of 4\nHello, World ! 1 of 4\n```\n\u6210\u529f\u3067\u3059\u3002\u3061\u306a\u307f\u306b\u50d5\u306eMacBookPro\u306e\u30b3\u30a2\u6570\u306f\n\n```\n$  system_profiler SPHardwareDataType | grep Cores\n      Total Number of Cores: 2\n```\n\uff12\u3064\u3067\u3059\u304c\u3001\uff14\u4e26\u5217\u3055\u308c\u3066\u3044\u308b\u306e\u306f[Hyper-threading](http://e-words.jp/w/%E3%83%8F%E3%82%A4%E3%83%91%E3%83%BC%E3%82%B9%E3%83%AC%E3%83%83%E3%83%87%E3%82%A3%E3%83%B3%E3%82%B0.html)\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3089\u3089\u3057\u3044\u3067\u3059\u3002\u7121\u52b9\u306b\u3057\u305f\u3044\u65b9\u306f\u3001\n\n```\n$ sudo nvram SMT=0\n```\n\u3067\u7121\u52b9\u306b\u3067\u304d\u307e\u3059\u3002\n\n## \u8ffd\u8a18\uff1a2016/11/09\n[EqualL2](http://qiita.com/EqualL2)\u3055\u3093\u304b\u3089\u3088\u308a\u826f\u3044\u65b9\u6cd5\u3092\u6559\u3048\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\nLLVM 8.1\u304b\u3089\u516c\u5f0f\u306eclang\u304cOpenMP\u306b\u5bfe\u5fdc\u3057\u305f\u305f\u3081\u3001`clang-omp`\u306f\u3053\u308c\u4ee5\u4e0a\u66f4\u65b0\u3055\u308c\u306a\u3044\u305d\u3046\u3067\u3059\u3002\u305d\u306e\u305f\u3081\u6700\u65b0\u306eLLVM\u3092\u5c0e\u5165\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3059\u3002\u50d5\u306eMac\u4e0a\u3067\u3082\u52d5\u4f5c\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n#### 1.`llvm`\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ brew install llvm\n```\n#### 2.(.bashrc\u306a\u3069\u306b)\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8a2d\u5b9a\n\n```\nalias clang-omp='/usr/local/opt/llvm/bin/clang -fopenmp -L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib'\nalias clang-omp++='/usr/local/opt/llvm/bin/clang++ -fopenmp -L/usr/local/opt/llvm/lib -Wl,-rpath,/usr/local/opt/llvm/lib'\n```\n\n## \u53c2\u8003\n- [OpenMP\u00ae/Clang](https://clang-omp.github.io/)\n- [Mac\u3067clang+OpenMP 2016](http://qiita.com/r9y9/items/2e382887ee7e9fa0fb9f)\n- [clang-omp\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7](http://qiita.com/ymmtmdk/items/652660ce41a30961670c)\n- [clang-omp\u3092brew\u3092\u3064\u304b\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f](http://ameblo.jp/migakazuba/entry-12025979501.html)\n- [Mac OS X Lion (Server) \u3067 Hyper-Threading \u3092 ON/OFF\u3059\u308b\u65b9\u6cd5](http://discus-hamburg.cocolog-nifty.com/mac_de_oracle/2012/06/os-x-lion-serve.html)\n", "tags": ["C++", "OpenMP", "clang"]}