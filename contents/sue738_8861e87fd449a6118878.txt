{"context": " More than 1 year has passed since last update.\u6bce\u65e5\u591c\u4e2d\u306b\u30d0\u30c3\u30c1\u51e6\u7406\u56de\u3057\u305f\u3044\u6642\u3063\u3066\u3042\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\u3057\u304b\u3082\u4f55\u3082\u8003\u3048\u305a\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u6c17\u3065\u3044\u305f\u3089\u591c\u306e4:00\u3068\u304b\u306b\u30bf\u30b9\u30af\u304c\u96c6\u4e2d\u3057\u3066\u30b5\u30fc\u30d0\u306e\u8ca0\u8377\u304c\u9ad8\u304f\u306a\u308b\u4e8b\u3082\u3057\u3070\u3057\u3070\u3002\nRails\u3067\u30d0\u30c3\u30c1\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u306a\u3089whenever\u304c\u4fbf\u5229\u3067\u3059\u304c\u3001whenever\u3092\u4f7f\u3046\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f8b\u3048\u30704\u6642\u9803\u306b\u5b9f\u884c\u3057\u305f\u3044\u30bf\u30b9\u30af\u309210\u5206\u305a\u3064\u305a\u3089\u3057\u3066\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n# \u3060\u3044\u305f\u30444\u6642\u9803\u5b9f\u884c\u3059\u308c\u3070\u3044\u3044\u30bf\u30b9\u30af\ntasks = %w(task1 task2 task3 task4)\ntasks.each_with_index do |task, i|\n  exec_time = ( Time.parse(\"4:00\") + i*10.minutes ).strftime(\"%H:%M\")\n  every 1.day, at: exec_time do\n    rake task\n  end\nend\n\n\u51fa\u529b\u7d50\u679c\u306f\u4e0b\u8a18\u3002\n0 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task1 --silent >> log/cron.log 2>> log/whenever.log'\n\n10 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task2 --silent >> log/cron.log 2>> log/whenever.log'\n\n20 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task3 --silent >> log/cron.log 2>> log/whenever.log'\n\n30 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task4 --silent >> log/cron.log 2>> log/whenever.log'\n\n\u304d\u308c\u3044\u306b10\u5206\u305a\u3064\u305a\u308c\u3066\u5b9f\u884c\u3055\u308c\u3066\u307e\u3059\u3002\nruby\u3063\u3066\u4fbf\u5229\u3067\u3059\u306d\uff01\n\n\u6bce\u65e5\u591c\u4e2d\u306b\u30d0\u30c3\u30c1\u51e6\u7406\u56de\u3057\u305f\u3044\u6642\u3063\u3066\u3042\u308b\u3058\u3083\u306a\u3044\u3067\u3059\u304b\u3002\u3057\u304b\u3082\u4f55\u3082\u8003\u3048\u305a\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u6c17\u3065\u3044\u305f\u3089\u591c\u306e4:00\u3068\u304b\u306b\u30bf\u30b9\u30af\u304c\u96c6\u4e2d\u3057\u3066\u30b5\u30fc\u30d0\u306e\u8ca0\u8377\u304c\u9ad8\u304f\u306a\u308b\u4e8b\u3082\u3057\u3070\u3057\u3070\u3002\n\nRails\u3067\u30d0\u30c3\u30c1\u51e6\u7406\u3092\u5b9f\u73fe\u3059\u308b\u306a\u3089[whenever](https://github.com/javan/whenever)\u304c\u4fbf\u5229\u3067\u3059\u304c\u3001whenever\u3092\u4f7f\u3046\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f8b\u3048\u30704\u6642\u9803\u306b\u5b9f\u884c\u3057\u305f\u3044\u30bf\u30b9\u30af\u309210\u5206\u305a\u3064\u305a\u3089\u3057\u3066\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n\n```\n# \u3060\u3044\u305f\u30444\u6642\u9803\u5b9f\u884c\u3059\u308c\u3070\u3044\u3044\u30bf\u30b9\u30af\ntasks = %w(task1 task2 task3 task4)\ntasks.each_with_index do |task, i|\n  exec_time = ( Time.parse(\"4:00\") + i*10.minutes ).strftime(\"%H:%M\")\n  every 1.day, at: exec_time do\n    rake task\n  end\nend\n```\n\n\u51fa\u529b\u7d50\u679c\u306f\u4e0b\u8a18\u3002\n\n```\n0 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task1 --silent >> log/cron.log 2>> log/whenever.log'\n\n10 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task2 --silent >> log/cron.log 2>> log/whenever.log'\n\n20 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task3 --silent >> log/cron.log 2>> log/whenever.log'\n\n30 4 * * * /bin/bash -l -c 'cd /path/to/app && RAILS_ENV=production bundle exec rake task4 --silent >> log/cron.log 2>> log/whenever.log'\n```\n\n\u304d\u308c\u3044\u306b10\u5206\u305a\u3064\u305a\u308c\u3066\u5b9f\u884c\u3055\u308c\u3066\u307e\u3059\u3002\nruby\u3063\u3066\u4fbf\u5229\u3067\u3059\u306d\uff01\n", "tags": ["Ruby", "cron", "Rails"]}