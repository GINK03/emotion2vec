{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nRails\u30a2\u30d7\u30ea\u306f\u4f5c\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u3051\u3069\u3001Redmine plugin\u958b\u767a\u306b\u521d\u3081\u3066\u53d6\u308a\u7d44\u3080\u969b\u3001\n\u3044\u308d\u3044\u308d\u306a\u7591\u554f\u304c\u308f\u304d\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306b\u958b\u767a\u3057\u3066\u3044\u304f\u4e2d\u3067\u7591\u554f\u304c\u89e3\u6d88\u3055\u308c\u3066\u3044\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u524d\u63d0\n\n\u8af8\u4e8b\u60c5\u306b\u3088\u308a\u4eca\u56de\u306fWindows\u7248\u306eRedmine\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u307e\u3059\u3002\n\u5fc5\u8981\u306a\u74b0\u5883\u3092\u307e\u3068\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u308c\u308bBitNami Redmine Stack\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u5c11\u3057\u53e4\u30442.3.2-1\u3067\u3059\u3002\nC\u30c9\u30e9\u30a4\u30d6\u76f4\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u307e\u3059\u3002\n\n\n\u7591\u554f1 Windows\u3067\u3069\u3046\u3084\u3063\u3066Redmine\u3092\u52d5\u304b\u3059\u306e\uff1f\nRuby\u304b\u3089Web\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u5fc5\u8981\u306a\u3082\u306e\u3092\u5168\u90e8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u308c\u308bBitNami Redmine Stack\u3092\u4f7f\u3044\u307e\u3059\u3002\nhttps://bitnami.com/stack/redmine\n\u6700\u65b0\u7248\u306f3.0.0\u3067\u3059\u304c\u30012.3.2-1\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3082\u306e\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\uff08\u6c17\u306b\u306a\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u307f\uff09\n\nRuby 1.9.3\nRails 3.2.13\nThin 1.3.1\ngit 1.8.3\nApache 2.4.6\nMySQL 5.5\nmingw32\n\nmingw\u4e0a\u3067\u52d5\u304f\u308f\u3051\u3067\u3059\u306d\uff01\nApache - Thin - Redmine \u3068\u3044\u3046\u69cb\u6210\u3067\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\uff08production\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\uff09\n\u5c02\u7528\u30a2\u30d7\u30ea\u3067\u95a2\u9023\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u3001\u505c\u6b62\u3001\u518d\u8d77\u52d5\u3092\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002\nC:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5manager-windows.exe\n\n\n\n\u7591\u554f2 \u3069\u3046\u3084\u3063\u3066development\u30e2\u30fc\u30c9\u3084test\u30e2\u30fc\u30c9\u3067\u52d5\u304b\u3059\u306e\uff1f\n\n1.\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u8d77\u52d5\n\u307e\u305a\u3001\u3044\u308d\u3044\u308d\u306aPATH\u3092\u901a\u3057\u305f\u5c02\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\nC:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5use_redmine.bat\n\n\u3053\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u4f7f\u3048\u3070Linux\u30b3\u30de\u30f3\u30c9(mingw32\uff09\u3084rails\u30b3\u30de\u30f3\u30c9\u7b49\u304c\u4f7f\u3048\u307e\u3059\u3002\n\n\n2.Redmine\u3092development\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3059\u308b\n\n2.1.\u8d77\u52d5\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\nproduction\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\n\n2.2.\u76f8\u5bfe\u30d1\u30b9\u306e\u7121\u52b9\u5316\n\u307e\u305a\u3001\u30a2\u30d7\u30ea\u306e\u76f8\u5bfe\u30d1\u30b9\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002\nC:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5additional_environment.rb\u306e\u4e2d\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\uff08production\u3067\u52d5\u304b\u3059\u6642\u306f\u623b\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff09\n\nadditional_environment.rb\n#config.action_controller.relative_url_root='/redmine'\n\n\n\n2.3.development\u7528\u3001test\u7528bundle\u8a2d\u5b9a\u6709\u52b9\u5316\ndevelopment\u7528\u3001test\u7528bundle\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\nC:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5.bundle\u00a5config\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\nconfig(\u5909\u66f4\u524d)\n---\nBUNDLE_BIN:bin\nBUNDLE_WITHOUT: development:test:posgresql:sqlite3\n\n\n\nconfig(\u5909\u66f4\u5f8c)\n---\nBUNDLE_BIN:bin\nBUNDLE_WITHOUT: posgresql:sqlite3\n\n\n\n2.4.bundle\u5b9f\u884c\nC:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\uff08\u3053\u3053\u304cRedmine\u306eRails.root\u306b\u306a\u308a\u307e\u3059\uff09\nbundle\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n>bundle\n\n\n2.5.DB\u8a2d\u5b9a\u3092\u78ba\u8a8d\nC:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5database.yml\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nBitNami\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3082\u3088\u308a\u307e\u3059\u304c\u3001production\u3068development\u3068test\u304c\u540c\u3058DB\u3092\u6307\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5909\u66f4\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001DB\u306eroot\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306fBitNami\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306eRedmine\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u540c\u3058\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n2.6.db:migrate\u5b9f\u884c\nDB\u3092production\u3068\u5206\u3051\u308b\u5834\u5408\u306fDB\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n>bundle exec rake db:drop db:create db:migrate redmine:plugins:migrate redmine:load_default_data RAILS_ENV=development\n\n\n2.7.Redmine\u3092\u8d77\u52d5\nrails\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n>bundle exec rails s\n\n\n\n2.8.Redmine\u3092\u7d42\u4e86\nCtrl + C\u3067\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n\n\u7591\u554f3 plugin\u306f\u3069\u3093\u306a\u69cb\u6210\u3067\u3069\u3046\u914d\u7f6e\u3059\u308b\u306e\uff1f\nRedmine\u306e\u30b5\u30a4\u30c8\u306b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u898b\u308b\u306e\u304c\u4e00\u756a\u308f\u304b\u308a\u3084\u3059\u3067\u3059\u3002\n\u4e00\u8a00\u3067\u8a00\u3046\u3068\u3001Redmine\u30a2\u30d7\u30ea\u306e\u4e2d\u306b\u8907\u6570\u306eRails\u30a2\u30d7\u30ea(plugin)\u304c\u5171\u5b58\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\n\n\nruby script/rails generate redmine_plugin <plugin_name>\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3059\u308b\n\nC:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5plugins\u4ee5\u4e0b\u306b<plugin_name>\uff08Redmine\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308bRails\u30a2\u30d7\u30ea\uff09\u304c\u914d\u7f6e\u3055\u308c\u308b\nplugin\u72ec\u81ea\u306e\u8a2d\u5b9a\uff08Redmine\u5185\u306e\u6a29\u9650\u3084\u30e1\u30cb\u30e5\u30fc\u8a2d\u5b9a\u306a\u3069\uff09\u306fplugin\u306e\u5404\u30a2\u30d7\u30ea\u76f4\u4e0b\u306einit.rb\u306b\u8a18\u8ff0\u3059\u308b\n\n\n\u7591\u554f4 plugin\u306eController\u3084Model\u306e\u4f5c\u6210\u65b9\u6cd5\u306f\uff1f\nplugin\u7528\u306egenerate\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\nModel:\nruby script/rails generate redmine_plugin_model <plugin_name> <model_name> [field[:type][:index] field[:type][:index] ...]\nController:\nruby script/rails generate redmine_plugin_controller <plugin_name> <controller_name> [<actions>]\n\n\u7591\u554f5 plugin\u306edb:migrate\u306f\u3069\u3053\u3067\u5b9f\u884c\u3059\u308b\u306e\uff1f\nRedmine\u30eb\u30fc\u30c8(C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs)\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\nplugin\u7528\u306emigrate\u306fbundle exec rake redmine:plugins:migrate\u3067\u3059\u3002\n\n\u7591\u554f6 plugin\u306egem\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\nplugins/<plugin_name>/Gemfile\u306b\u66f8\u304d\u307e\u3059\u3002\nbundle\u30b3\u30de\u30f3\u30c9\u306fRedmine\u30eb\u30fc\u30c8(C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs)\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\uff08\u5168plugin\u306eGemfile\u304c\u30de\u30fc\u30b8\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001plugin\u306e\u65b9\u3067\u5b9f\u884c\u3057\u3066\u3082\u610f\u56f3\u3057\u305fgem\u304c\u30ed\u30fc\u30c9\u3055\u308c\u307e\u305b\u3093\uff09\n\n\u7591\u554f7 plugin\u306eroutes\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\nplugins/<plugin_name>/config/routes.rb\u306b\u66f8\u304d\u307e\u3059\u3002\nRedmine\u30eb\u30fc\u30c8/\u304b\u3089\u306e\u30d1\u30b9\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\uff08\u666e\u901a\u306eRails\u30a2\u30d7\u30ea\u3068\u540c\u3058\uff09\n\n\u7591\u554f8 plugin\u306ejavascript\u3068css\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\nMVC of Redmine Plugin in Bootstrap\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\uff01\nView\u306b\u6b21\u306e\u611f\u3058\u3067\u7d44\u307f\u8fbc\u3081\u307e\u3059\u3002\n\uff08<plugin_name>\u90e8\u306f\u81ea\u5206\u306eplugin\u3067\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\uff09\nCSS:\n<%= stylesheet_link_tag 'sample.css', :plugin => '<plugin_name>', :media => 'all' %>\nJavaScript:\n<%= javascript_include_tag 'sample.js', :plugin => '<plugin_name>' %>\nJavaScript\u3067$('#xx').on(\"click\", ...)\u306e\u3088\u3046\u306aDOM\u60c5\u5831\u3092\u4f7f\u3046\u3082\u306e\u542b\u307e\u308c\u308b\u5834\u5408\u306f\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u3088\u308a\u5f8c\u306b\u8a18\u8ff0\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u30b3\u30f3\u30c6\u30f3\u30c4\u3088\u308a\u5148\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u3068\u3001\u5bfe\u8c61\u3068\u306a\u308b\u30bf\u30b0\u304c\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u30a4\u30d9\u30f3\u30c8\u304c\u8ffd\u52a0\u3055\u308c\u305a\u306f\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\uff08\u666e\u6bb5\u306eRails\u30a2\u30d7\u30ea\u3067\u306f\u76f4\u63a5javascript_include_tag\u3092\u66f8\u304f\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u6c17\u3065\u304f\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3057\u305f\uff09\n\u7f6e\u304d\u5834\u6240\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\nCSS:\nplugins/<plugin_name>/assets/stylesheets/sample.css\nJavaScript:\nplugins/<plugin_name>/assets/javascripts/sample.js\n\n\u7591\u554f9 Bootstrap\u306f\u4f7f\u3048\u308b\u306e\uff1f\n\u7591\u554f8\u306e\u3088\u3046\u306bstylesheet_link_tag\u3092\u4f7f\u3048\u3070\u53ef\u80fd\u3067\u3059\u3002\nMVC of Redmine Plugin in Bootstrap\u304c\u3068\u3066\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\u305f\u3060\u3001bootstrap-sass\u306e\u3088\u3046\u306bprecompile\u304c\u5fc5\u8981\u306a\u3082\u306e\u306f\u3046\u307e\u304f\u52d5\u304b\u305b\u3066\u3044\u307e\u305b\u3093\u3002\n\uff08asstes:precompile\u3092\u5b9f\u884c\u3057\u3066\u3082css\u304c\u751f\u6210\u3055\u308c\u306a\u3044\u611f\u3058\uff09\n\u3053\u306e\u3042\u305f\u308a\u306e\u3084\u308a\u65b9\u3092\u77e5\u3063\u3066\u3044\u308b\u4eba\u304c\u3044\u305f\u3089\u305c\u3072\u6559\u3048\u3066\u307b\u3057\u3044\u3067\u3059\uff01\n\n\u7591\u554f10 CoffeeScript\u306f\u4f7f\u3048\u308b\u306e\uff1f\n\u308f\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001precompile\u304c\u5fc5\u8981\u306a\u3082\u306e\u304c\u3046\u307e\u304f\u52d5\u304b\u305b\u3066\u3044\u307e\u305b\u3093\u3002\n\u3053\u3061\u3089\u3082\u3084\u308a\u65b9\u3092\u77e5\u3063\u3066\u3044\u308b\u4eba\u304c\u3044\u305f\u3089\u305c\u3072\u6559\u3048\u3066\u307b\u3057\u3044\u3067\u3059\uff01\n\u8ffd\u8a18\uff1a\nCoffeeScript\u3084Sass\u306a\u3069\u3001asset pipeline\u7cfb\u306f\u4f7f\u3048\u306a\u3055\u305d\u3046\u3067\u3059\u3002\npublic\u4ee5\u4e0b\u306b\u306fjavascripts\u3084stylesheets\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u304c\u3001app\u4ee5\u4e0b\u306b\u306fassets\u304c\u5b58\u5728\u3057\u307e\u305b\u3093\u3002\nconfig\u00a5application.rb\u306b\u306f\nconfig.assets.enabled = false\n\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001\u305d\u3082\u305d\u3082asset pipline\u3092\u4f7f\u308f\u306a\u3044\u60f3\u5b9a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3069\u3046\u3057\u3066\u3082\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u3001\u624b\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001\u751f\u6210\u3055\u308c\u305fjs\u3084css\u3092plugin\u306eassets\u00a5javascripts\u3084assets\u00a5stylesheets\u306b\u7f6e\u304f\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\uff08\u8d77\u52d5\u6642\u306bpublic\u00a5plugin_assets\u00a5\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u7f6e\u3044\u3066js\u3084css\u306f\u666e\u901a\u306b\u4f7f\u3048\u307e\u3059\uff09\n\n\u7591\u554f11 plugin\u306elocale\u306f\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\nplugins/<plugin_name>/config/locales/\u5185\u306eyml\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u307e\u3059\u3002\n\n\u7591\u554f12 \u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u306f\u3069\u3046\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\uff1f\nRedmine.jp\u3067\u306f\u6b21\u306e\u3088\u3046\u306a\u65b9\u6cd5\u3067\u53d6\u5f97\u3059\u308b\u3068\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nissue = Issue.last\ncf_name = \"\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\"\ncv = issue.custom_field_values.detect {|c| c.custom_field.name == cf_name}\ncv.value if cv\n\n\u78ba\u304b\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u6570\u304c\u5897\u3048\u3066\u304f\u308b\u3068\u9045\u3044\u3067\u3059\u3002\n\n\nIssue - CustomValue - IssueCustomField\u306e\u95a2\u4fc2\u3068\u306a\u3063\u3066\u3044\u308b\nIssueCustomField\u306fCustomField\u306e\u5358\u4e00\u30c6\u30fc\u30d6\u30eb\u7d99\u627f\uff08Single Table Inheritance\uff09\u3068\u306a\u3063\u3066\u3044\u308b\n\n\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u5feb\u9069\u306b\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304b\u3089\u4e00\u5ea6\u306b\u5024\u3092\u53d6\u5f97\nissue = Issue.last\ncf_name = \"\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\"\ncv = CustomValue.where(customized_type: 'Issue').where(customized_id: issue.id).joins(:custom_field).where(custom_fields: {name: cf_name}).first\ncv.try(:value)\n\n\n\u52d5\u4f5c\u304c\u9045\u304f\u611f\u3058\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u306e\u65b9\u304c\u65e9\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304b\u3089\u30d5\u30a3\u30fc\u30eb\u30c9id\u3092\u53d6\u5f97\u3057\u3001\u5024\u3092\u53d6\u5f97\nissue = Issue.last\ncf_name = \"\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\"\nfield_id = IssueCustomField.find_by_name(cf_name).try(:id)\ncv = CustomValue.where(customized_type: 'Issue').where(customized_id: self.id).where(custom_field_id: field_id).first\ncv.try(:value)\n\n\n\u203b\u8a72\u5f53\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u306a\u3044\u5834\u5408\u306ffield_id\u304cnil\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\nProject\u306a\u3069\u4ed6\u306e\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u3082\u540c\u3058\u611f\u3058\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\u7d44\u307f\u8fbc\u307f\u305f\u3044\u30af\u30e9\u30b9\u306b\u30e1\u30bd\u30c3\u30c9\u5316\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nIssue\u30af\u30e9\u30b9\u306b\u7d44\u307f\u8fbc\u3080\u5834\u5408\ndef cf_value_by_name(cf_name)\n  cv = CustomValue.where(customized_type: 'Issue').where(customized_id: self.id).joins(:custom_field).where(custom_fields: {name: cf_name}).first\n  cv.try(:value)\nend\n\n\nwhere\u53e5\u3067\u53d6\u308b\u65b9\u6cd5\u304c\u308f\u304b\u308c\u3070\u3001\u691c\u7d22\u306b\u3082\u4f7f\u3048\u3066\u4fbf\u5229\u3067\u3059\u3002\n\n\u7591\u554f13 Project\u7b49\u306eRedmine\u306e\u30af\u30e9\u30b9\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\uff1f\n\u30aa\u30fc\u30d7\u30f3\u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066plugins/<plugin_name>/lib/customized_project.rb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\ncustomized_project.rb\nmodule CustomizedProject\n  attr_accessor :xxx, :yyy, :zzz\n\n  def self.included base\n    base.extend ClassMethods\n  end\n\n  # \u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\n  module ClassMethods\n    def xxxxx\n    end\n  end\n\n  # \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\n  def yyyyy\n  end\nend\n\nclass Project\n  include CustomizedProject\nend\n\n\n\n\u7591\u554f14 plugin\u306eTest\uff08RSpec\u4f7f\u7528\uff09\u306e\u5b9f\u884c\u65b9\u6cd5\u306f\uff1f\nRedmine\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092RSpec\u3067\u30c6\u30b9\u30c8\u3059\u308b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\n\u6e96\u5099\nplugins/<plugin_name>/Gemfile\u306bgem\u3092\u8ffd\u52a0\n\nGemfile\u4f8b\n:\ngroup :test do\n  gem 'rspec-rails', '~> 3.1.0'\n  gem 'factory_girl_rails', '~> 4.4.1'\n  gem 'timecop', '~> 0.7.1'\n  gem 'capybara', '~> 2.3.0'\n  gem 'poltergeist', '~> 1.5.0'\nend\n:\n\n\nplugins/<plugin_name>/spec/spec_helper.rb\u3092\u8ffd\u52a0\n\nspec_helper.rb\u4f8b\nrequire File.expand_path(File.dirname(__FILE__) + '/../../../test/test_helper')\nrequire File.expand_path(\"../../../../config/environment\", __FILE__)\nrequire 'rspec/rails'\nrequire 'capybara'\nrequire 'capybara/rspec'\nrequire 'capybara/poltergeist'\n\nrequire File.expand_path(File.dirname(__FILE__) + '/support/shared_connection')\nrequire File.expand_path(File.dirname(__FILE__) + '/support/wait_for_ajax')\nCapybara.javascript_driver = :poltergeist\nCapybara.current_driver = Capybara.javascript_driver\n\nRSpec.configure do |config|\n  config.use_transactional_fixtures = true\n  config.infer_spec_type_from_file_location!\n  config.include FactoryGirl::Syntax::Methods\n  FactoryGirl.definition_file_paths = [File.expand_path(\"../factories\", __FILE__)]\n  FactoryGirl.find_definitions\n  config.before(:all) do\n    FactoryGirl.reload\n  end\nend\n\n\nplugins/<plugin_name>/support/shared_connection.rb\u3092\u8ffd\u52a0\n\u53c2\u8003:Three tips to improve the performance of your test suite\n\nshared_connection.rb\u4f8b\nclass ActiveRecord::Base\n  mattr_accessor :shared_connection\n  @@shared_connection = nil\n\n  def self.connection\n    @@shared_connection || retrieve_connection\n  end\nend\n\n# Forces all threads to share the same connection. This works on\n# Capybara because it starts the web server in a thread.\nActiveRecord::Base.shared_connection = ActiveRecord::Base.connection\n\n\nplugins/<plugin_name>/support/wait_for_ajax.rb\u3092\u8ffd\u52a0\n\u53c2\u8003:Automatically wait for AJAX with Capybara\n\nwait_for_ajax.rb\u4f8b\nmodule WaitForAjax\n  def wait_for_ajax(timeout = Capybara.default_wait_time)\n    Timeout.timeout(timeout) do\n      loop until finished_all_ajax_requests?\n    end\n  end\n\n  def finished_all_ajax_requests?\n    page.evaluate_script('jQuery.active').zero?\n  end\nend\n\nRSpec.configure do |config|\n  config.include WaitForAjax, type: :feature\nend\n\n\n\u3042\u3068\u306ffactories\u3084models\u7b49\u3092\u8ffd\u52a0\u3057\u3066spec\u3092\u66f8\u304d\u307e\u3059\u3002\n\n\u5b9f\u884c\nRedmine\u30eb\u30fc\u30c8(C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs)\u306b\u3066\u3001\nbundle exec rpec plugins\u00a5<plugin_name>\u00a5spec\n\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u7591\u554f15 Windows\u7528\u306eGit\u30c4\u30fc\u30eb\u306f\u4f55\u3092\u4f7f\u3046\uff1f\n\u3044\u304f\u3064\u304b\u8a66\u3057\u307e\u3057\u305f\u304c\u3001GitHub Windows\u306eGit Shell\u304c\u4e00\u756a\u3057\u3063\u304f\u308a\u304d\u307e\u3057\u305f\u3002\ndefault\u3067\u306fPowerShell\u3067\u52d5\u304d\u307e\u3059\u3002\n\n\n\u7591\u554f16 \u30a8\u30c7\u30a3\u30bf\u306f\u3069\u3046\u3057\u3088\u3046\uff1f\nMac\u3067\u306fVim\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067Windows\u7528Vim\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u304c\u3001\nuse_redmine.bat\u3068\u306e\u9023\u643a\u304c\u306a\u304b\u306a\u304b\u601d\u3063\u305f\u3088\u3046\u306b\u3044\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u306a\u306e\u3067Windows\u3067\u306fAtom\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n\nTips1 \u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u51fa\u529b\u3055\u308c\u308b\u30ed\u30b0\u304c\u6587\u5b57\u5316\u3051\nuse_redmine.bat\u304cUTF-8\u3067\u306a\u3044\u306e\u3067\u65e5\u672c\u8a9e\u304c\u6587\u5b57\u5316\u3051\u3057\u307e\u3059\u3002\nlog/development.log\u306e\u65b9\u306fUTF-8\u306a\u306e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\nTips2 \u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u7a81\u7136\u843d\u3061\u308b\n\u3053\u308c\u306f\u539f\u56e0\u304c\u308f\u304b\u308b\u307e\u3067\u60a9\u307f\u307e\u3057\u305f\u3002\n\uff08\u843d\u3061\u308b\u3068\u304d\u3068\u843d\u3061\u306a\u3044\u6642\u304c\u3042\u3063\u305f\u306e\u3067\uff09\n\u539f\u56e0\uff1a\n\u3000SQL\u6587\u306elog\u3067\u65e5\u672c\u8a9e\u304c\u6587\u5b57\u5316\u3051\u3059\u308b\u3053\u3068\u3067\u3001\u6587\u5b57\u306b\u3088\u3063\u3066\u306f\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u843d\u3061\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3057\u305f\u3002\uff08\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u539f\u56e0\u3092\u7279\u5b9a\u3057\u3066\u304f\u308c\u307e\u3057\u305f\uff09\n\u5bfe\u5fdc\uff1a\n\u3000log\u306elevel\u3092\u5909\u66f4\u3057\u3066\u65e5\u672c\u8a9elog\u304c\u51fa\u529b\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3000C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5environments\u00a5development.rb\u306b1\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ndevelopment.rb\nRedmineApp::Application.configure do\n:\n  config.log_level = :info\nend\n\n\n\nTips3 development\u30e2\u30fc\u30c9\u3068test\u30e2\u30fc\u30c9\u304cproduction\u30e2\u30fc\u30c9\u306b\u6bd4\u3079\u5287\u7684\u306b\u91cd\u3044\u3093\u3067\u3059\u3051\u3069\u3001\u3001\ndevelopment\u3067\u52d5\u304b\u3059\u3068\u6b63\u76f4\u4f7f\u3048\u306a\u3044\u304f\u3089\u3044\u52d5\u4f5c\u304c\u91cd\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\uff08100\u4ef6\u3082\u306a\u3044test\u304c10\u5206\u4ee5\u4e0a\u304b\u304b\u308b\u306a\u3069\uff09\n\u539f\u56e0:\n\u3000SQL\u306elog\u304c\u591a\u904e\u304e\u308b\u3053\u3068\u3067\u91cd\u304f\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u3000\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u591a\u3044\u3068\u3001\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u306b\u3088\u3063\u3066\u306f\u5927\u91cf\u306eSQL\u30af\u30a8\u30ea\u30fc\u304c\u767a\u884c\u3055\u308c\u307e\u3059\u3002\n\u5bfe\u5fdc:\n\u3000\u3053\u3061\u3089\u3082log\u306elevel\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u901f\u5ea6\u304c\u5287\u7684\u306b\u6539\u5584\u3055\u308c\u307e\u3057\u305f\u3002\n\u3000C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5environments\u00a5development.rb\u306b1\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ndevelopment.rb\nRedmineApp::Application.configure do\n:\n  config.log_level = :info\nend\n\n\n\u3000C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5environments\u00a5test.rb\u306b1\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\ntest.rb\nRedmineApp::Application.configure do\n:\n  config.log_level = :info\nend\n\n\n\nTips4 Test\u6642\u306bPhantomJS\u304c\u8a8d\u8b58\u3055\u308c\u306a\u3044\npoltergeist\u3092\u4f7f\u3044\u305f\u304b\u3063\u305f\u306e\u3067PhantomJS\u304c\u5fc5\u8981\u3067\u3059\u3002\nPhantomJS\u306e\u30b5\u30a4\u30c8\u304b\u3089Windows\u7528\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4f7f\u3044\u307e\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u306f\u307e\u3063\u305f\u70b9\u304c\u3042\u308b\u306e\u3067\u7d39\u4ecb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u6700\u65b0\u306e2.0.0\u3067\u306fpoltergeist\u3068\u306e\u9023\u643a\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\n\n1.8.2\u3060\u3068\u3046\u307e\u304f\u9023\u643a\u3067\u304d\u305f\nBitNami\u3092C\u30c9\u30e9\u30a4\u30d6\u76f4\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3044\u3068Rails\u304b\u3089phantomjs\u304c\u8a8d\u8b58\u3067\u304d\u306a\u304b\u3063\u305f\uff08\u539f\u56e0\u306f\u4e0d\u660e\uff09\n\n\nTips5 Test\u6642\u306bCustomValue\u304c\u7a7a\u3063\u307d\u306b\u306a\u308b\n\u4f8b\u3048\u3070ProjectCustomField\u3092create\u3057\u3066\u3001Project\u3092create\u3059\u308b\u3068\u3001\u5bfe\u5fdc\u3059\u308bCustomValue\u304c\u81ea\u52d5\u7684\u306bcreate\u3055\u308c\u307e\u3059\u3002\nCustomValue\u3092\u81ea\u524d\u3067create\u3057\u305f\u3044\u5834\u5408\u306f\u3001Project\u306ecreate\u3088\u308a\u5148\u306bcreate\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u8a73\u3057\u304f\u306fRedmine plugin\u958b\u767a\u3067\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u4f5c\u6210\u6642\u306bCustomValue\u306b\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u6642\u306e\u6ce8\u610f\u70b9\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\nTips6 Project\u30e1\u30cb\u30e5\u30fc\u306e\u30e1\u30cb\u30e5\u30fc\u540d\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u540d\u304c\u7570\u306a\u308b\u3068\u3001\u30e1\u30cb\u30e5\u30fc\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3082\u9078\u629e\u72b6\u614b\u306b\u306a\u3089\u306a\u3044\ninit.rb\u306b\u8a18\u8ff0\u3059\u308b\u30e1\u30cb\u30e5\u30fc\u540d\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u540d\u306f\u540c\u3058\u540d\u524d\u306b\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\ninit.rb\uff08\u30e1\u30cb\u30e5\u30fc\u30af\u30ea\u30c3\u30af\u3067\u9078\u629e\u72b6\u614b\u306b\u306a\u3089\u306a\u3044\u5834\u5408\uff09\n:\nmenu :project_menu, :polls_dummy, { :controller => 'polls', :action => 'index' }, :caption => 'Polls', :after => :activity, :param => :project_id\n:\n\n\n\ninit.rb\uff08\u30e1\u30cb\u30e5\u30fc\u30af\u30ea\u30c3\u30af\u3067\u9078\u629e\u72b6\u614b\u306b\u306a\u308b\u5834\u5408\uff09\n:\nmenu :project_menu, :polls, { :controller => 'polls', :action => 'index' }, :caption => 'Polls', :after => :activity, :param => :project_id\n:\n\n\n\n##\u306f\u3058\u3081\u306b\nRails\u30a2\u30d7\u30ea\u306f\u4f5c\u3063\u305f\u3053\u3068\u304c\u3042\u308b\u3051\u3069\u3001Redmine plugin\u958b\u767a\u306b\u521d\u3081\u3066\u53d6\u308a\u7d44\u3080\u969b\u3001\n\u3044\u308d\u3044\u308d\u306a\u7591\u554f\u304c\u308f\u304d\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306b\u958b\u767a\u3057\u3066\u3044\u304f\u4e2d\u3067\u7591\u554f\u304c\u89e3\u6d88\u3055\u308c\u3066\u3044\u3063\u305f\u306e\u3067\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n##\u524d\u63d0\n- \u8af8\u4e8b\u60c5\u306b\u3088\u308a\u4eca\u56de\u306fWindows\u7248\u306eRedmine\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u307e\u3059\u3002\n- \u5fc5\u8981\u306a\u74b0\u5883\u3092\u307e\u3068\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u308c\u308bBitNami Redmine Stack\u3092\u4f7f\u3044\u307e\u3059\u3002\n- \u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u5c11\u3057\u53e4\u30442.3.2-1\u3067\u3059\u3002\n- C\u30c9\u30e9\u30a4\u30d6\u76f4\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3092\u60f3\u5b9a\u3057\u307e\u3059\u3002\n\n##\u7591\u554f1 Windows\u3067\u3069\u3046\u3084\u3063\u3066Redmine\u3092\u52d5\u304b\u3059\u306e\uff1f\nRuby\u304b\u3089Web\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u5fc5\u8981\u306a\u3082\u306e\u3092\u5168\u90e8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u308c\u308bBitNami Redmine Stack\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nhttps://bitnami.com/stack/redmine\n\n\u6700\u65b0\u7248\u306f3.0.0\u3067\u3059\u304c\u30012.3.2-1\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3082\u306e\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\uff08\u6c17\u306b\u306a\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u307f\uff09\n\n- Ruby 1.9.3\n- Rails 3.2.13\n- Thin 1.3.1\n- git 1.8.3\n- Apache 2.4.6\n- MySQL 5.5\n- mingw32\n\nmingw\u4e0a\u3067\u52d5\u304f\u308f\u3051\u3067\u3059\u306d\uff01\n\nApache - Thin - Redmine \u3068\u3044\u3046\u69cb\u6210\u3067\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b\u30b5\u30fc\u30d3\u30b9\u304c\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\uff08production\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u307e\u3059\uff09\n\u5c02\u7528\u30a2\u30d7\u30ea\u3067\u95a2\u9023\u30b5\u30fc\u30d3\u30b9\u306e\u8d77\u52d5\u3001\u505c\u6b62\u3001\u518d\u8d77\u52d5\u3092\u7ba1\u7406\u3067\u304d\u307e\u3059\u3002\n\n`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5manager-windows.exe`\n\n![2.png](https://qiita-image-store.s3.amazonaws.com/0/38173/f22a272d-d676-d302-ad96-944eb52d54a9.png \"2.png\")\n\n![5.png](https://qiita-image-store.s3.amazonaws.com/0/38173/13679a5e-a953-cfd3-7785-d71d7a123c4c.png \"5.png\")\n\n##\u7591\u554f2 \u3069\u3046\u3084\u3063\u3066development\u30e2\u30fc\u30c9\u3084test\u30e2\u30fc\u30c9\u3067\u52d5\u304b\u3059\u306e\uff1f\n\n###1.\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u8d77\u52d5\n\n\u307e\u305a\u3001\u3044\u308d\u3044\u308d\u306aPATH\u3092\u901a\u3057\u305f\u5c02\u7528\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5use_redmine.bat`\n\n![3.png](https://qiita-image-store.s3.amazonaws.com/0/38173/c530cff9-91da-0a1d-8c46-74dbf01d9ea9.png \"3.png\")\n\n\n\u3053\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u4f7f\u3048\u3070Linux\u30b3\u30de\u30f3\u30c9(mingw32\uff09\u3084rails\u30b3\u30de\u30f3\u30c9\u7b49\u304c\u4f7f\u3048\u307e\u3059\u3002\n\n![4.png](https://qiita-image-store.s3.amazonaws.com/0/38173/300480a1-8685-47e1-c21d-1658b781c4dc.png \"4.png\")\n\n###2.Redmine\u3092development\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3059\u308b\n\n####2.1.\u8d77\u52d5\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\nproduction\u30e2\u30fc\u30c9\u3067\u52d5\u4f5c\u4e2d\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\n![1.png](https://qiita-image-store.s3.amazonaws.com/0/38173/2d8d3bc1-b1ac-2e6e-3bd4-cb3900134b4a.png \"1.png\")\n\n\n####2.2.\u76f8\u5bfe\u30d1\u30b9\u306e\u7121\u52b9\u5316\n\u307e\u305a\u3001\u30a2\u30d7\u30ea\u306e\u76f8\u5bfe\u30d1\u30b9\u3092\u7121\u52b9\u306b\u3057\u307e\u3059\u3002\n\n`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5additional_environment.rb`\u306e\u4e2d\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\uff08production\u3067\u52d5\u304b\u3059\u6642\u306f\u623b\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff09\n\n```rb:additional_environment.rb\n#config.action_controller.relative_url_root='/redmine'\n```\n\n####2.3.development\u7528\u3001test\u7528bundle\u8a2d\u5b9a\u6709\u52b9\u5316\ndevelopment\u7528\u3001test\u7528bundle\u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u6709\u52b9\u5316\u3057\u307e\u3059\u3002\n\n`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5.bundle\u00a5config`\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```:config(\u5909\u66f4\u524d)\n---\nBUNDLE_BIN:bin\nBUNDLE_WITHOUT: development:test:posgresql:sqlite3\n```\n\n```:config(\u5909\u66f4\u5f8c)\n---\nBUNDLE_BIN:bin\nBUNDLE_WITHOUT: posgresql:sqlite3\n```\n\n####2.4.bundle\u5b9f\u884c\n\n`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs`\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\uff08\u3053\u3053\u304cRedmine\u306eRails.root\u306b\u306a\u308a\u307e\u3059\uff09\n\n`bundle`\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n>bundle\n```\n\n####2.5.DB\u8a2d\u5b9a\u3092\u78ba\u8a8d\n\n`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5database.yml`\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nBitNami\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3082\u3088\u308a\u307e\u3059\u304c\u3001production\u3068development\u3068test\u304c\u540c\u3058DB\u3092\u6307\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u5909\u66f4\u3057\u307e\u3059\u3002\n\n\u307e\u305f\u3001DB\u306eroot\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306fBitNami\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306eRedmine\u7ba1\u7406\u8005\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u540c\u3058\u3082\u306e\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n####2.6.db:migrate\u5b9f\u884c\n\nDB\u3092production\u3068\u5206\u3051\u308b\u5834\u5408\u306fDB\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n\n```\n>bundle exec rake db:drop db:create db:migrate redmine:plugins:migrate redmine:load_default_data RAILS_ENV=development\n```\n\n####2.7.Redmine\u3092\u8d77\u52d5\n\nrails\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n>bundle exec rails s\n```\n\n![8.png](https://qiita-image-store.s3.amazonaws.com/0/38173/fc08fd67-4a86-8451-df5e-1b01673023e8.png \"8.png\")\n\n####2.8.Redmine\u3092\u7d42\u4e86\n\n`Ctrl + C`\u3067\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n![9.png](https://qiita-image-store.s3.amazonaws.com/0/38173/908dfe19-59d6-8402-b2cb-a6af50097785.png \"9.png\")\n\n##\u7591\u554f3 plugin\u306f\u3069\u3093\u306a\u69cb\u6210\u3067\u3069\u3046\u914d\u7f6e\u3059\u308b\u306e\uff1f\n[Redmine\u306e\u30b5\u30a4\u30c8\u306b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](http://www.redmine.org/projects/redmine/wiki/Plugin_Tutorial)\u3092\u898b\u308b\u306e\u304c\u4e00\u756a\u308f\u304b\u308a\u3084\u3059\u3067\u3059\u3002\n\n\u4e00\u8a00\u3067\u8a00\u3046\u3068\u3001Redmine\u30a2\u30d7\u30ea\u306e\u4e2d\u306b\u8907\u6570\u306eRails\u30a2\u30d7\u30ea(plugin)\u304c\u5171\u5b58\u3059\u308b\u30a4\u30e1\u30fc\u30b8\u3067\u3059\u3002\n\n- `ruby script/rails generate redmine_plugin <plugin_name>`\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u3059\u308b\n- `C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5plugins`\u4ee5\u4e0b\u306b`<plugin_name>`\uff08Redmine\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308bRails\u30a2\u30d7\u30ea\uff09\u304c\u914d\u7f6e\u3055\u308c\u308b\n- plugin\u72ec\u81ea\u306e\u8a2d\u5b9a\uff08Redmine\u5185\u306e\u6a29\u9650\u3084\u30e1\u30cb\u30e5\u30fc\u8a2d\u5b9a\u306a\u3069\uff09\u306fplugin\u306e\u5404\u30a2\u30d7\u30ea\u76f4\u4e0b\u306e`init.rb`\u306b\u8a18\u8ff0\u3059\u308b\n\n##\u7591\u554f4 plugin\u306eController\u3084Model\u306e\u4f5c\u6210\u65b9\u6cd5\u306f\uff1f\n\nplugin\u7528\u306egenerate\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nModel:\n\n`ruby script/rails generate redmine_plugin_model <plugin_name> <model_name> [field[:type][:index] field[:type][:index] ...]`\n\nController:\n\n`ruby script/rails generate redmine_plugin_controller <plugin_name> <controller_name> [<actions>]`\n\n##\u7591\u554f5 plugin\u306edb:migrate\u306f\u3069\u3053\u3067\u5b9f\u884c\u3059\u308b\u306e\uff1f\n\nRedmine\u30eb\u30fc\u30c8(C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs)\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nplugin\u7528\u306emigrate\u306f`bundle exec rake redmine:plugins:migrate`\u3067\u3059\u3002\n\n##\u7591\u554f6 plugin\u306egem\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\n\n`plugins/<plugin_name>/Gemfile`\u306b\u66f8\u304d\u307e\u3059\u3002\n\nbundle\u30b3\u30de\u30f3\u30c9\u306fRedmine\u30eb\u30fc\u30c8(C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs)\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\uff08\u5168plugin\u306eGemfile\u304c\u30de\u30fc\u30b8\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001plugin\u306e\u65b9\u3067\u5b9f\u884c\u3057\u3066\u3082\u610f\u56f3\u3057\u305fgem\u304c\u30ed\u30fc\u30c9\u3055\u308c\u307e\u305b\u3093\uff09\n\n##\u7591\u554f7 plugin\u306eroutes\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\n\n`plugins/<plugin_name>/config/routes.rb`\u306b\u66f8\u304d\u307e\u3059\u3002\n\nRedmine\u30eb\u30fc\u30c8`/`\u304b\u3089\u306e\u30d1\u30b9\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\uff08\u666e\u901a\u306eRails\u30a2\u30d7\u30ea\u3068\u540c\u3058\uff09\n\n##\u7591\u554f8 plugin\u306ejavascript\u3068css\u3092\u8ffd\u52a0\u3059\u308b\u5834\u5408\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\n\n[MVC of Redmine Plugin in Bootstrap](http://qiita.com/ogomr/items/fe139ceb93ad13794323)\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\nView\u306b\u6b21\u306e\u611f\u3058\u3067\u7d44\u307f\u8fbc\u3081\u307e\u3059\u3002\n\uff08`<plugin_name>`\u90e8\u306f\u81ea\u5206\u306eplugin\u3067\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\uff09\n\nCSS:\n\n`<%= stylesheet_link_tag 'sample.css', :plugin => '<plugin_name>', :media => 'all' %>`\n\nJavaScript:\n\n`<%= javascript_include_tag 'sample.js', :plugin => '<plugin_name>' %>`\n\nJavaScript\u3067`$('#xx').on(\"click\", ...)`\u306e\u3088\u3046\u306aDOM\u60c5\u5831\u3092\u4f7f\u3046\u3082\u306e\u542b\u307e\u308c\u308b\u5834\u5408\u306f\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u3088\u308a\u5f8c\u306b\u8a18\u8ff0\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u30b3\u30f3\u30c6\u30f3\u30c4\u3088\u308a\u5148\u306b\u66f8\u3044\u3066\u3057\u307e\u3046\u3068\u3001\u5bfe\u8c61\u3068\u306a\u308b\u30bf\u30b0\u304c\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u30a4\u30d9\u30f3\u30c8\u304c\u8ffd\u52a0\u3055\u308c\u305a\u306f\u307e\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\uff08\u666e\u6bb5\u306eRails\u30a2\u30d7\u30ea\u3067\u306f\u76f4\u63a5javascript_include_tag\u3092\u66f8\u304f\u3053\u3068\u304c\u306a\u3044\u306e\u3067\u6c17\u3065\u304f\u306e\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3057\u305f\uff09\n\n\u7f6e\u304d\u5834\u6240\u306f\u6b21\u306e\u901a\u308a\u3067\u3059\u3002\n\nCSS:\n\n`plugins/<plugin_name>/assets/stylesheets/sample.css`\n\nJavaScript:\n\n`plugins/<plugin_name>/assets/javascripts/sample.js`\n\n\n##\u7591\u554f9 Bootstrap\u306f\u4f7f\u3048\u308b\u306e\uff1f\n\u7591\u554f8\u306e\u3088\u3046\u306bstylesheet_link_tag\u3092\u4f7f\u3048\u3070\u53ef\u80fd\u3067\u3059\u3002\n[MVC of Redmine Plugin in Bootstrap](http://qiita.com/ogomr/items/fe139ceb93ad13794323)\u304c\u3068\u3066\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u3002\n\n\u305f\u3060\u3001bootstrap-sass\u306e\u3088\u3046\u306bprecompile\u304c\u5fc5\u8981\u306a\u3082\u306e\u306f\u3046\u307e\u304f\u52d5\u304b\u305b\u3066\u3044\u307e\u305b\u3093\u3002\n\uff08asstes:precompile\u3092\u5b9f\u884c\u3057\u3066\u3082css\u304c\u751f\u6210\u3055\u308c\u306a\u3044\u611f\u3058\uff09\n\u3053\u306e\u3042\u305f\u308a\u306e\u3084\u308a\u65b9\u3092\u77e5\u3063\u3066\u3044\u308b\u4eba\u304c\u3044\u305f\u3089\u305c\u3072\u6559\u3048\u3066\u307b\u3057\u3044\u3067\u3059\uff01\n\n##\u7591\u554f10 CoffeeScript\u306f\u4f7f\u3048\u308b\u306e\uff1f\n\u308f\u304b\u3063\u3066\u3044\u307e\u305b\u3093\u3002\n\u3044\u308d\u3044\u308d\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001precompile\u304c\u5fc5\u8981\u306a\u3082\u306e\u304c\u3046\u307e\u304f\u52d5\u304b\u305b\u3066\u3044\u307e\u305b\u3093\u3002\n\u3053\u3061\u3089\u3082\u3084\u308a\u65b9\u3092\u77e5\u3063\u3066\u3044\u308b\u4eba\u304c\u3044\u305f\u3089\u305c\u3072\u6559\u3048\u3066\u307b\u3057\u3044\u3067\u3059\uff01\n\n\u8ffd\u8a18\uff1a\nCoffeeScript\u3084Sass\u306a\u3069\u3001asset pipeline\u7cfb\u306f\u4f7f\u3048\u306a\u3055\u305d\u3046\u3067\u3059\u3002\npublic\u4ee5\u4e0b\u306b\u306fjavascripts\u3084stylesheets\u304c\u5b58\u5728\u3057\u3066\u3044\u307e\u3059\u304c\u3001app\u4ee5\u4e0b\u306b\u306fassets\u304c\u5b58\u5728\u3057\u307e\u305b\u3093\u3002\n\nconfig\u00a5application.rb\u306b\u306f\n`config.assets.enabled = false\n`\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u304a\u308a\u3001\u305d\u3082\u305d\u3082asset pipline\u3092\u4f7f\u308f\u306a\u3044\u60f3\u5b9a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3069\u3046\u3057\u3066\u3082\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u3001\u624b\u52d5\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001\u751f\u6210\u3055\u308c\u305fjs\u3084css\u3092plugin\u306eassets\u00a5javascripts\u3084assets\u00a5stylesheets\u306b\u7f6e\u304f\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\uff08\u8d77\u52d5\u6642\u306bpublic\u00a5plugin_assets\u00a5\u306b\u30b3\u30d4\u30fc\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u7f6e\u3044\u3066js\u3084css\u306f\u666e\u901a\u306b\u4f7f\u3048\u307e\u3059\uff09\n\n##\u7591\u554f11 plugin\u306elocale\u306f\u3069\u3053\u306b\u66f8\u304f\u306e\uff1f\n\n`plugins/<plugin_name>/config/locales/`\u5185\u306eyml\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u307e\u3059\u3002\n\n##\u7591\u554f12 \u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u306f\u3069\u3046\u30a2\u30af\u30bb\u30b9\u3059\u308b\u306e\uff1f\n\n[Redmine.jp](http://redmine.jp/tech_note/plugins/developer/quickref/get-custom-value/)\u3067\u306f\u6b21\u306e\u3088\u3046\u306a\u65b9\u6cd5\u3067\u53d6\u5f97\u3059\u308b\u3068\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```rb\nissue = Issue.last\ncf_name = \"\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\"\ncv = issue.custom_field_values.detect {|c| c.custom_field.name == cf_name}\ncv.value if cv\n```\n\n\u78ba\u304b\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3053\u3068\u306f\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u6570\u304c\u5897\u3048\u3066\u304f\u308b\u3068\u9045\u3044\u3067\u3059\u3002\n\n- `Issue - CustomValue - IssueCustomField`\u306e\u95a2\u4fc2\u3068\u306a\u3063\u3066\u3044\u308b\n- IssueCustomField\u306fCustomField\u306e\u5358\u4e00\u30c6\u30fc\u30d6\u30eb\u7d99\u627f\uff08Single Table Inheritance\uff09\u3068\u306a\u3063\u3066\u3044\u308b\n\n\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308c\u3070\u5feb\u9069\u306b\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```rb:\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304b\u3089\u4e00\u5ea6\u306b\u5024\u3092\u53d6\u5f97\nissue = Issue.last\ncf_name = \"\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\"\ncv = CustomValue.where(customized_type: 'Issue').where(customized_id: issue.id).joins(:custom_field).where(custom_fields: {name: cf_name}).first\ncv.try(:value)\n```\n\n\u52d5\u4f5c\u304c\u9045\u304f\u611f\u3058\u308b\u5834\u5408\u306f\u3053\u3061\u3089\u306e\u65b9\u304c\u65e9\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\n```rb:\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304b\u3089\u30d5\u30a3\u30fc\u30eb\u30c9id\u3092\u53d6\u5f97\u3057\u3001\u5024\u3092\u53d6\u5f97\nissue = Issue.last\ncf_name = \"\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\"\nfield_id = IssueCustomField.find_by_name(cf_name).try(:id)\ncv = CustomValue.where(customized_type: 'Issue').where(customized_id: self.id).where(custom_field_id: field_id).first\ncv.try(:value)\n```\n\u203b\u8a72\u5f53\u3059\u308b\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u306a\u3044\u5834\u5408\u306ffield_id\u304cnil\u306b\u306a\u308b\u306e\u3067\u6ce8\u610f\u3002\n\nProject\u306a\u3069\u4ed6\u306e\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u3082\u540c\u3058\u611f\u3058\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n\u7d44\u307f\u8fbc\u307f\u305f\u3044\u30af\u30e9\u30b9\u306b\u30e1\u30bd\u30c3\u30c9\u5316\u3057\u3066\u304a\u304f\u3068\u826f\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```rb:Issue\u30af\u30e9\u30b9\u306b\u7d44\u307f\u8fbc\u3080\u5834\u5408\ndef cf_value_by_name(cf_name)\n  cv = CustomValue.where(customized_type: 'Issue').where(customized_id: self.id).joins(:custom_field).where(custom_fields: {name: cf_name}).first\n  cv.try(:value)\nend\n```\n\nwhere\u53e5\u3067\u53d6\u308b\u65b9\u6cd5\u304c\u308f\u304b\u308c\u3070\u3001\u691c\u7d22\u306b\u3082\u4f7f\u3048\u3066\u4fbf\u5229\u3067\u3059\u3002\n\n##\u7591\u554f13 Project\u7b49\u306eRedmine\u306e\u30af\u30e9\u30b9\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3059\u308b\u306b\u306f\uff1f\n\n\u30aa\u30fc\u30d7\u30f3\u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u4f8b\u3068\u3057\u3066`plugins/<plugin_name>/lib/customized_project.rb`\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```rb:customized_project.rb\nmodule CustomizedProject\n  attr_accessor :xxx, :yyy, :zzz\n\n  def self.included base\n    base.extend ClassMethods\n  end\n\n  # \u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\n  module ClassMethods\n    def xxxxx\n    end\n  end\n\n  # \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\n  def yyyyy\n  end\nend\n\nclass Project\n  include CustomizedProject\nend\n```\n\n##\u7591\u554f14 plugin\u306eTest\uff08RSpec\u4f7f\u7528\uff09\u306e\u5b9f\u884c\u65b9\u6cd5\u306f\uff1f\n\n[Redmine\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092RSpec\u3067\u30c6\u30b9\u30c8\u3059\u308b](http://blog.mkt-sys.jp/2013/09/redminerspec.html)\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\n###\u6e96\u5099\n\n`plugins/<plugin_name>/Gemfile`\u306bgem\u3092\u8ffd\u52a0\n\n```:Gemfile\u4f8b\n:\ngroup :test do\n  gem 'rspec-rails', '~> 3.1.0'\n  gem 'factory_girl_rails', '~> 4.4.1'\n  gem 'timecop', '~> 0.7.1'\n  gem 'capybara', '~> 2.3.0'\n  gem 'poltergeist', '~> 1.5.0'\nend\n:\n```\n\n`plugins/<plugin_name>/spec/spec_helper.rb`\u3092\u8ffd\u52a0\n\n```rb:spec_helper.rb\u4f8b\nrequire File.expand_path(File.dirname(__FILE__) + '/../../../test/test_helper')\nrequire File.expand_path(\"../../../../config/environment\", __FILE__)\nrequire 'rspec/rails'\nrequire 'capybara'\nrequire 'capybara/rspec'\nrequire 'capybara/poltergeist'\n\nrequire File.expand_path(File.dirname(__FILE__) + '/support/shared_connection')\nrequire File.expand_path(File.dirname(__FILE__) + '/support/wait_for_ajax')\nCapybara.javascript_driver = :poltergeist\nCapybara.current_driver = Capybara.javascript_driver\n\nRSpec.configure do |config|\n  config.use_transactional_fixtures = true\n  config.infer_spec_type_from_file_location!\n  config.include FactoryGirl::Syntax::Methods\n  FactoryGirl.definition_file_paths = [File.expand_path(\"../factories\", __FILE__)]\n  FactoryGirl.find_definitions\n  config.before(:all) do\n    FactoryGirl.reload\n  end\nend\n```\n\n`plugins/<plugin_name>/support/shared_connection.rb`\u3092\u8ffd\u52a0\n\n\u53c2\u8003:[Three tips to improve the performance of your test suite](http://blog.plataformatec.com.br/2011/12/three-tips-to-improve-the-performance-of-your-test-suite/)\n\n```rb:shared_connection.rb\u4f8b\nclass ActiveRecord::Base\n  mattr_accessor :shared_connection\n  @@shared_connection = nil\n\n  def self.connection\n    @@shared_connection || retrieve_connection\n  end\nend\n\n# Forces all threads to share the same connection. This works on\n# Capybara because it starts the web server in a thread.\nActiveRecord::Base.shared_connection = ActiveRecord::Base.connection\n```\n\n`plugins/<plugin_name>/support/wait_for_ajax.rb`\u3092\u8ffd\u52a0\n\n\u53c2\u8003:[Automatically wait for AJAX with Capybara](https://robots.thoughtbot.com/automatically-wait-for-ajax-with-capybara)\n\n```rb:wait_for_ajax.rb\u4f8b\nmodule WaitForAjax\n  def wait_for_ajax(timeout = Capybara.default_wait_time)\n    Timeout.timeout(timeout) do\n      loop until finished_all_ajax_requests?\n    end\n  end\n\n  def finished_all_ajax_requests?\n    page.evaluate_script('jQuery.active').zero?\n  end\nend\n\nRSpec.configure do |config|\n  config.include WaitForAjax, type: :feature\nend\n```\n\n\u3042\u3068\u306ffactories\u3084models\u7b49\u3092\u8ffd\u52a0\u3057\u3066spec\u3092\u66f8\u304d\u307e\u3059\u3002\n\n###\u5b9f\u884c\n\nRedmine\u30eb\u30fc\u30c8(C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs)\u306b\u3066\u3001\n\n`bundle exec rpec plugins\u00a5<plugin_name>\u00a5spec`\n\n\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n##\u7591\u554f15 Windows\u7528\u306eGit\u30c4\u30fc\u30eb\u306f\u4f55\u3092\u4f7f\u3046\uff1f\n\n\u3044\u304f\u3064\u304b\u8a66\u3057\u307e\u3057\u305f\u304c\u3001[GitHub Windows](https://windows.github.com/)\u306e`Git Shell`\u304c\u4e00\u756a\u3057\u3063\u304f\u308a\u304d\u307e\u3057\u305f\u3002\ndefault\u3067\u306fPowerShell\u3067\u52d5\u304d\u307e\u3059\u3002\n\n![6.png](https://qiita-image-store.s3.amazonaws.com/0/38173/44209725-3dae-2df6-b9f6-2ae5c63a0619.png \"6.png\")\n\n##\u7591\u554f16 \u30a8\u30c7\u30a3\u30bf\u306f\u3069\u3046\u3057\u3088\u3046\uff1f\nMac\u3067\u306fVim\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067Windows\u7528Vim\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u304c\u3001\n`use_redmine.bat`\u3068\u306e\u9023\u643a\u304c\u306a\u304b\u306a\u304b\u601d\u3063\u305f\u3088\u3046\u306b\u3044\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u306a\u306e\u3067Windows\u3067\u306f[Atom](https://atom.io/)\u3092\u4f7f\u3046\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n![7.png](https://qiita-image-store.s3.amazonaws.com/0/38173/ee022a84-4aab-3725-3284-481176d5c0e8.png \"7.png\")\n\n\n##Tips1 \u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u51fa\u529b\u3055\u308c\u308b\u30ed\u30b0\u304c\u6587\u5b57\u5316\u3051\n\n`use_redmine.bat`\u304cUTF-8\u3067\u306a\u3044\u306e\u3067\u65e5\u672c\u8a9e\u304c\u6587\u5b57\u5316\u3051\u3057\u307e\u3059\u3002\n`log/development.log`\u306e\u65b9\u306fUTF-8\u306a\u306e\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n##Tips2 \u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u7a81\u7136\u843d\u3061\u308b\n\n\u3053\u308c\u306f\u539f\u56e0\u304c\u308f\u304b\u308b\u307e\u3067\u60a9\u307f\u307e\u3057\u305f\u3002\n\uff08\u843d\u3061\u308b\u3068\u304d\u3068\u843d\u3061\u306a\u3044\u6642\u304c\u3042\u3063\u305f\u306e\u3067\uff09\n\n\u539f\u56e0\uff1a\n\n\u3000SQL\u6587\u306elog\u3067\u65e5\u672c\u8a9e\u304c\u6587\u5b57\u5316\u3051\u3059\u308b\u3053\u3068\u3067\u3001\u6587\u5b57\u306b\u3088\u3063\u3066\u306f\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u843d\u3061\u3066\u3057\u307e\u3063\u3066\u3044\u307e\u3057\u305f\u3002\uff08\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u304c\u539f\u56e0\u3092\u7279\u5b9a\u3057\u3066\u304f\u308c\u307e\u3057\u305f\uff09\n\n\u5bfe\u5fdc\uff1a\n\u3000log\u306elevel\u3092\u5909\u66f4\u3057\u3066\u65e5\u672c\u8a9elog\u304c\u51fa\u529b\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u3000`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5environments\u00a5development.rb`\u306b1\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```rb:development.rb\nRedmineApp::Application.configure do\n:\n  config.log_level = :info\nend\n```\n\n##Tips3 development\u30e2\u30fc\u30c9\u3068test\u30e2\u30fc\u30c9\u304cproduction\u30e2\u30fc\u30c9\u306b\u6bd4\u3079\u5287\u7684\u306b\u91cd\u3044\u3093\u3067\u3059\u3051\u3069\u3001\u3001\n\ndevelopment\u3067\u52d5\u304b\u3059\u3068\u6b63\u76f4\u4f7f\u3048\u306a\u3044\u304f\u3089\u3044\u52d5\u4f5c\u304c\u91cd\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\uff08100\u4ef6\u3082\u306a\u3044test\u304c10\u5206\u4ee5\u4e0a\u304b\u304b\u308b\u306a\u3069\uff09\n\n\u539f\u56e0:\n\n\u3000SQL\u306elog\u304c\u591a\u904e\u304e\u308b\u3053\u3068\u3067\u91cd\u304f\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\n\u3000\u30ab\u30b9\u30bf\u30e0\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u591a\u3044\u3068\u3001\u30a2\u30af\u30bb\u30b9\u65b9\u6cd5\u306b\u3088\u3063\u3066\u306f\u5927\u91cf\u306eSQL\u30af\u30a8\u30ea\u30fc\u304c\u767a\u884c\u3055\u308c\u307e\u3059\u3002\n\n\u5bfe\u5fdc:\n\n\u3000\u3053\u3061\u3089\u3082log\u306elevel\u3092\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u901f\u5ea6\u304c\u5287\u7684\u306b\u6539\u5584\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u3000`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5environments\u00a5development.rb`\u306b1\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```rb:development.rb\nRedmineApp::Application.configure do\n:\n  config.log_level = :info\nend\n```\n\n\u3000`C:\u00a5BitNami\u00a5redmine-2.3.2-1\u00a5apps\u00a5redmine\u00a5htdocs\u00a5config\u00a5environments\u00a5test.rb`\u306b1\u884c\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```rb:test.rb\nRedmineApp::Application.configure do\n:\n  config.log_level = :info\nend\n```\n\n##Tips4 Test\u6642\u306bPhantomJS\u304c\u8a8d\u8b58\u3055\u308c\u306a\u3044\n\npoltergeist\u3092\u4f7f\u3044\u305f\u304b\u3063\u305f\u306e\u3067PhantomJS\u304c\u5fc5\u8981\u3067\u3059\u3002\n[PhantomJS\u306e\u30b5\u30a4\u30c8](http://phantomjs.org/download.html)\u304b\u3089Windows\u7528\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4f7f\u3044\u307e\u3059\u304c\u3001\u3044\u304f\u3064\u304b\u306f\u307e\u3063\u305f\u70b9\u304c\u3042\u308b\u306e\u3067\u7d39\u4ecb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n- \u6700\u65b0\u306e2.0.0\u3067\u306fpoltergeist\u3068\u306e\u9023\u643a\u304c\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\n- [1.8.2](https://code.google.com/p/phantomjs/downloads/detail?name=phantomjs-1.8.2-windows.zip&can=4&q=)\u3060\u3068\u3046\u307e\u304f\u9023\u643a\u3067\u304d\u305f\n- BitNami\u3092C\u30c9\u30e9\u30a4\u30d6\u76f4\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3044\u3068Rails\u304b\u3089phantomjs\u304c\u8a8d\u8b58\u3067\u304d\u306a\u304b\u3063\u305f\uff08\u539f\u56e0\u306f\u4e0d\u660e\uff09\n\n##Tips5 Test\u6642\u306bCustomValue\u304c\u7a7a\u3063\u307d\u306b\u306a\u308b\n\n\u4f8b\u3048\u3070ProjectCustomField\u3092create\u3057\u3066\u3001Project\u3092create\u3059\u308b\u3068\u3001\u5bfe\u5fdc\u3059\u308bCustomValue\u304c\u81ea\u52d5\u7684\u306bcreate\u3055\u308c\u307e\u3059\u3002\nCustomValue\u3092\u81ea\u524d\u3067create\u3057\u305f\u3044\u5834\u5408\u306f\u3001Project\u306ecreate\u3088\u308a\u5148\u306bcreate\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u8a73\u3057\u304f\u306f[Redmine plugin\u958b\u767a\u3067\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u4f5c\u6210\u6642\u306bCustomValue\u306b\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\u3059\u308b\u6642\u306e\u6ce8\u610f\u70b9](http://qiita.com/t_oginogin/items/1b176f5f70c49053d623)\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n##Tips6 Project\u30e1\u30cb\u30e5\u30fc\u306e\u30e1\u30cb\u30e5\u30fc\u540d\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u540d\u304c\u7570\u306a\u308b\u3068\u3001\u30e1\u30cb\u30e5\u30fc\u30bf\u30d6\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3082\u9078\u629e\u72b6\u614b\u306b\u306a\u3089\u306a\u3044\n\n`init.rb`\u306b\u8a18\u8ff0\u3059\u308b\u30e1\u30cb\u30e5\u30fc\u540d\u3068\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u540d\u306f\u540c\u3058\u540d\u524d\u306b\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n```rb:init.rb\uff08\u30e1\u30cb\u30e5\u30fc\u30af\u30ea\u30c3\u30af\u3067\u9078\u629e\u72b6\u614b\u306b\u306a\u3089\u306a\u3044\u5834\u5408\uff09\n:\nmenu :project_menu, :polls_dummy, { :controller => 'polls', :action => 'index' }, :caption => 'Polls', :after => :activity, :param => :project_id\n:\n```\n\n```rb:init.rb\uff08\u30e1\u30cb\u30e5\u30fc\u30af\u30ea\u30c3\u30af\u3067\u9078\u629e\u72b6\u614b\u306b\u306a\u308b\u5834\u5408\uff09\n:\nmenu :project_menu, :polls, { :controller => 'polls', :action => 'index' }, :caption => 'Polls', :after => :activity, :param => :project_id\n:\n```\n", "tags": ["Ruby", "Rails", "Redmine"]}