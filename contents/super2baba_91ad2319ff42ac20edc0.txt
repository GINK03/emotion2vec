{"context": " More than 1 year has passed since last update.\u3042\u308a\u304c\u3061\u306a\u3084\u3064\u3067\u3059\u3002\n\u5099\u5fd8\u9332\u7684\u306a\u611f\u3058\u3067\u66f8\u3044\u3066\u307e\u3059\u3002\n\nindex.html\n<!DOCTYPE HTML>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>Welcome!</title>\n</head>\n<body>\n\n<h1>Search our Phone Directory</h1>\n<form id=\"searchform\" method=\"post\">\n<div>\n    <label for=\"search_term\">Search name/phone</label>\n    <input type=\"text\" name=\"search_term\" id=\"search_term\" />\n    <input type=\"submit\" value=\"search\" id=\"search_button\" />\n    </div>\n</form>\n<div id=\"search_results\"></div>\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js\"></script>\n<script type='text/javascript'>\n$(document).ready(function(){\n$(\"#search_results\").slideUp();\n    $(\"#search_button\").click(function(e){\n        e.preventDefault();\n        ajax_search();\n    });\n    $(\"#search_term\").keyup(function(e){\n            e.preventDefault();\n            ajax_search();\n        });\n\n});\nfunction ajax_search(){\n  $(\"#search_results\").show();\n  var search_val=$(\"#search_term\").val();\n  $.post(\"./find.php\", {search_term : search_val}, function(data){\n   if (data.length>0){\n     $(\"#search_results\").html(data);\n   }\n  })\n}\n</script>\n</body>\n</html>\n\n\n\nfind.php\n<?php\ndefine(HOST, \"xxx\");\ndefine(USER, \"xxx\");\ndefine(PW, \"xxxx\");\ndefine(DB, \"xxx\");\n\n$connect = mysqli_connect(HOST,USER,PW) or die('Could not connect to mysql server.' );\nmysqli_select_db($connect,DB) or die('Could not select database.');\nmysqli_set_charset($connect, \"utf8\");\n\n$term = strip_tags(substr($_POST['search_term'],0, 100));\n$term = mysqli_real_escape_string($connect,$term);\n\n$sql = \"SELECT member_name,member_phone FROM members where member_name like '%$term%' or member_phone like '%$term%' order by member_name asc\";\n$result = mysqli_query($connect,$sql);\n\n$string = '';\n\nif(mysqli_num_rows($result) > 0){\n  while($row = mysqli_fetch_assoc($result)){\n    $string .= $row['member_name'].\" - \";\n    $string .= $row['member_phone'];\n    $string .= \"<br/>\\n\";\n  }\n\n}else{\n  $string = \"No matches!\";\n} \n\necho $string;\n\n\n\u7c21\u5358\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3093\u306a\u3082\u3093\u3067\u52d8\u5f01\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\u3042\u308a\u304c\u3061\u306a\u3084\u3064\u3067\u3059\u3002\n\u5099\u5fd8\u9332\u7684\u306a\u611f\u3058\u3067\u66f8\u3044\u3066\u307e\u3059\u3002\n\n\n```html:index.html\n<!DOCTYPE HTML>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>Welcome!</title>\n</head>\n<body>\n\n<h1>Search our Phone Directory</h1>\n<form id=\"searchform\" method=\"post\">\n<div>\n\t<label for=\"search_term\">Search name/phone</label>\n  \t<input type=\"text\" name=\"search_term\" id=\"search_term\" />\n  \t<input type=\"submit\" value=\"search\" id=\"search_button\" />\n    </div>\n</form>\n<div id=\"search_results\"></div>\n\n<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js\"></script>\n<script type='text/javascript'>\n$(document).ready(function(){\n$(\"#search_results\").slideUp();\n    $(\"#search_button\").click(function(e){\n        e.preventDefault();\n        ajax_search();\n    });\n    $(\"#search_term\").keyup(function(e){\n            e.preventDefault();\n            ajax_search();\n        });\n\n});\nfunction ajax_search(){\n  $(\"#search_results\").show();\n  var search_val=$(\"#search_term\").val();\n  $.post(\"./find.php\", {search_term : search_val}, function(data){\n   if (data.length>0){\n     $(\"#search_results\").html(data);\n   }\n  })\n}\n</script>\n</body>\n</html>\n```\n\n```php:find.php\n<?php\ndefine(HOST, \"xxx\");\ndefine(USER, \"xxx\");\ndefine(PW, \"xxxx\");\ndefine(DB, \"xxx\");\n\n$connect = mysqli_connect(HOST,USER,PW) or die('Could not connect to mysql server.' );\nmysqli_select_db($connect,DB) or die('Could not select database.');\nmysqli_set_charset($connect, \"utf8\");\n\n$term = strip_tags(substr($_POST['search_term'],0, 100));\n$term = mysqli_real_escape_string($connect,$term);\n\n$sql = \"SELECT member_name,member_phone FROM members where member_name like '%$term%' or member_phone like '%$term%' order by member_name asc\";\n$result = mysqli_query($connect,$sql);\n\n$string = '';\n\nif(mysqli_num_rows($result) > 0){\n  while($row = mysqli_fetch_assoc($result)){\n    $string .= $row['member_name'].\" - \";\n    $string .= $row['member_phone'];\n    $string .= \"<br/>\\n\";\n  }\n\n}else{\n  $string = \"No matches!\";\n} \n\necho $string;\n```\n\n\u7c21\u5358\u3067\u306f\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3093\u306a\u3082\u3093\u3067\u52d8\u5f01\u3057\u3066\u4e0b\u3055\u3044\u3002\n", "tags": ["jQuery", "PHP", "Ajax", "HTML5"]}