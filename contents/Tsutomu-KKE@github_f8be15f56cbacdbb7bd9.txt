{"tags": ["Python", "\u7d44\u5408\u305b\u6700\u9069\u5316", "\u6700\u9069\u5316", "\u6570\u5b66"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\n \u554f\u984c\n\u533b\u8005\u304b\u30891\u9031\u9593\u306e\u98df\u4e8b\u306e\u30ab\u30ed\u30ea\u30fc\u5236\u9650\u3092\u3057\u306a\u3055\u3044\u3068\u8a00\u308f\u308c\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u5fc5\u8981\u306a\u6804\u990a\u7d20A\u3001\u6804\u990a\u7d20B\u306e\u6700\u4f4e\u53d6\u5f97\u91cf\u3082\u6307\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\u306a\u308b\u3079\u304f\u3001\u597d\u304d\u306a\u3082\u306e\u3092\u98df\u3079\u308b\u306b\u306f\u3069\u3046\u3057\u305f\u3089\u3044\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\n \u5b9a\u5f0f\u5316\n\u7d44\u5408\u305b\u6700\u9069\u5316\u554f\u984c\u306e\u4e2d\u306e\u5272\u5f53\u554f\u984c\u306b\u306a\u308a\u307e\u3059\u3002\n\u6599\u7406\u306e\u5019\u88dc\u306f\u4e0e\u3048\u3089\u308c\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u3001\u305d\u306e\u4e2d\u304b\u3089\u3069\u308c\u3092\u9078\u3076\u304b\u30920-1\u5909\u6570xxx\u3067\u8868\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n\u5909\u6570\nxi\u2208{0,1}xi\u2208{0,1}x_i \\in \\{0, 1\\}\niii\u756a\u76ee\u306e\u6599\u7406\u3092\u9078\u3076\u304b\u3069\u3046\u304b\n\n\n\u76ee\u7684\u95a2\u6570\n\u2211i\u597d\u307fixi\u2211i\u597d\u307fixi\\sum_i{\u597d\u307f_i x_i}\n\u2192\\rightarrow \u6700\u5927\n\n\n\u5236\u7d04\u6761\u4ef6\n\u2211ixi=7\\sum_i{x_i} = 7 \n7\u65e5\u5206\u3092\u9078\u3076\n\n\n\n\u2211i\u30ab\u30ed\u30ea\u30fcixi\u226490\\sum_i{\u30ab\u30ed\u30ea\u30fc_i x_i} \\le 90 \n\u30ab\u30ed\u30ea\u30fc\u5236\u9650\n\n\n\n\u2211i\u6804\u990a\u7d20Aixi\u226595\\sum_i{\u6804\u990a\u7d20A_i x_i} \\ge 95 \n\u6700\u4f4e\u53d6\u5f97\u91cf\n\n\n\n\u2211i\u6804\u990a\u7d20Bixi\u226595\\sum_i{\u6804\u990a\u7d20B_i x_i} \\ge 95 \n\u6700\u4f4e\u53d6\u5f97\u91cf\n\n\n\n python\u3067\u89e3\u3044\u3066\u307f\u308b\n\u6700\u9069\u5316\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001pulp\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u307e\u305a\u3001\u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\npython\nimport numpy as np, pandas as pd\nfrom pulp import *\nmenu = ['\u725b\u4e3c', '\u89aa\u5b50\u4e3c', '\u30ab\u30c4\u4e3c', '\u9244\u706b\u4e3c', '\u306d\u304e\u3068\u308d\u4e3c', '\u3061\u3089\u3057\u5bff\u53f8',\n        '\u9ebb\u5a46\u8304\u5b50', '\u30c9\u30ea\u30a2', '\u30aa\u30e0\u30e9\u30a4\u30b9', '\u30c1\u30e3\u30fc\u30cf\u30f3', '\u30ab\u30ec\u30fc\u30e9\u30a4\u30b9']\nn = len(menu)\nnp.random.seed(1)\na = pd.DataFrame({\n        '\u6599\u7406\u540d': menu,\n        '\u30ab\u30ed\u30ea\u30fc': np.random.randint(10,20,n),\n        '\u6804\u990a\u7d20A': np.random.randint(10,20,n),\n        '\u6804\u990a\u7d20B': np.random.randint(10,20,n),\n        '\u597d\u307f': np.random.randint(10,20,n),\n    })\nprint(a)\n\n\n\n\n\n\n\u6599\u7406\u540d\n\u597d\u307f\n\u30ab\u30ed\u30ea\u30fc\n\u6804\u990a\u7d20A\n\u6804\u990a\u7d20B\n\n\n\n\n0\n\u725b\u4e3c\n18\n15\n14\n10\n\n\n1\n\u89aa\u5b50\u4e3c\n13\n18\n15\n16\n\n\n2\n\u30ab\u30c4\u4e3c\n19\n19\n12\n19\n\n\n3\n\u9244\u706b\u4e3c\n18\n15\n14\n19\n\n\n4\n\u306d\u304e\u3068\u308d\u4e3c\n17\n10\n12\n17\n\n\n5\n\u3061\u3089\u3057\u5bff\u53f8\n13\n10\n14\n16\n\n\n6\n\u9ebb\u5a46\u8304\u5b50\n16\n11\n17\n19\n\n\n7\n\u30c9\u30ea\u30a2\n15\n17\n17\n11\n\n\n8\n\u30aa\u30e0\u30e9\u30a4\u30b9\n11\n16\n19\n10\n\n\n9\n\u30c1\u30e3\u30fc\u30cf\u30f3\n19\n19\n11\n11\n\n\n10\n\u30ab\u30ec\u30fc\u30e9\u30a4\u30b9\n13\n12\n17\n18\n\n\n\n\u89e3\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\npython\nm = LpProblem(sense=LpMaximize) # \u6700\u5927\u5316\u554f\u984c\na['x'] = [LpVariable('x%d'%i, cat=LpBinary) for i in range(n)] # \u9078\u629e\u3059\u308b/\u3057\u306a\u3044\nm += lpDot(a.\u597d\u307f, a.x) # \u597d\u307f\u3092\u6700\u5927\u5316\nm += lpSum(a.x) == 7 # 1\u9031\u9593\u5206\u306e\u732e\u7acb\nm += lpDot(a.\u30ab\u30ed\u30ea\u30fc, a.x) <= 90\nm += lpDot(a.\u6804\u990a\u7d20A, a.x) >= 95\nm += lpDot(a.\u6804\u990a\u7d20B, a.x) >= 95\nm.solve()\nif m.status == 1: # Optimal\n    a['val'] = a.x.apply(lambda v: value(v)) # \u7d50\u679c\n    print(a[a.val == 1].\u6599\u7406\u540d)\n>>>\n0         \u725b\u4e3c\n3        \u9244\u706b\u4e3c\n4      \u306d\u304e\u3068\u308d\u4e3c\n5      \u3061\u3089\u3057\u5bff\u53f8\n6       \u9ebb\u5a46\u8304\u5b50\n7        \u30c9\u30ea\u30a2\n10    \u30ab\u30ec\u30fc\u30e9\u30a4\u30b9\n\n\n\n Docker\nDocker\u3067\u3061\u3087\u3063\u3068\u8a66\u3057\u3066\u307f\u305f\u3044\u5834\u5408\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u3067\u30db\u30b9\u30c8\u3092\u958b\u304f\u3068\u3001Jupyter\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\u30e9\u30a4\u30d6\u30e9\u30ea\u3082\u3044\u308d\u3044\u308d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u307e\u3059\u3002\ndocker run -d -p 80:8888 tsutomu7/jupyter\n\n\u4ee5\u4e0a\n# <i class='fa fa-graduation-cap' /> \u554f\u984c\n\u533b\u8005\u304b\u30891\u9031\u9593\u306e\u98df\u4e8b\u306e\u30ab\u30ed\u30ea\u30fc\u5236\u9650\u3092\u3057\u306a\u3055\u3044\u3068\u8a00\u308f\u308c\u307e\u3057\u305f\u3002\n\u307e\u305f\u3001\u5fc5\u8981\u306a\u6804\u990a\u7d20A\u3001\u6804\u990a\u7d20B\u306e\u6700\u4f4e\u53d6\u5f97\u91cf\u3082\u6307\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\u306a\u308b\u3079\u304f\u3001\u597d\u304d\u306a\u3082\u306e\u3092\u98df\u3079\u308b\u306b\u306f\u3069\u3046\u3057\u305f\u3089\u3044\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n\n# <i class='fa fa-graduation-cap' /> \u5b9a\u5f0f\u5316\n[\u7d44\u5408\u305b\u6700\u9069\u5316\u554f\u984c](http://qiita.com/Tsutomu-KKE@github/items/bfbf4c185ed7004b5721)\u306e\u4e2d\u306e\u5272\u5f53\u554f\u984c\u306b\u306a\u308a\u307e\u3059\u3002\n\u6599\u7406\u306e\u5019\u88dc\u306f\u4e0e\u3048\u3089\u308c\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u3001\u305d\u306e\u4e2d\u304b\u3089\u3069\u308c\u3092\u9078\u3076\u304b\u30920-1\u5909\u6570$x$\u3067\u8868\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n<table>\n<tr><td>\u5909\u6570</td><td>$x_i \\in \\{0, 1\\}$</td><td>$i$\u756a\u76ee\u306e\u6599\u7406\u3092\u9078\u3076\u304b\u3069\u3046\u304b</td></tr>\n<tr><td>\u76ee\u7684\u95a2\u6570</td><td>$\\sum_i{\u597d\u307f_i x_i}$</td><td>$\\rightarrow$ \u6700\u5927</td></tr>\n<tr><td>\u5236\u7d04\u6761\u4ef6</td><td>$\\sum_i{x_i} = 7 $</td><td>7\u65e5\u5206\u3092\u9078\u3076</td></tr>\n<tr><td></td><td>$\\sum_i{\u30ab\u30ed\u30ea\u30fc_i x_i} \\le 90 $</td><td>\u30ab\u30ed\u30ea\u30fc\u5236\u9650</td></tr>\n<tr><td></td><td>$\\sum_i{\u6804\u990a\u7d20A_i x_i} \\ge 95 $</td><td>\u6700\u4f4e\u53d6\u5f97\u91cf</td></tr>\n<tr><td></td><td>$\\sum_i{\u6804\u990a\u7d20B_i x_i} \\ge 95 $</td><td>\u6700\u4f4e\u53d6\u5f97\u91cf</td></tr>\n</table>\n\n# <i class='fa fa-graduation-cap' /> python\u3067\u89e3\u3044\u3066\u307f\u308b\n\u6700\u9069\u5316\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001[pulp](http://qiita.com/Tsutomu-KKE@github/items/bfbf4c185ed7004b5721#%E3%82%BD%E3%83%95%E3%83%88%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB)\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u307e\u305a\u3001\u30c0\u30df\u30fc\u30c7\u30fc\u30bf\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```py3:python\nimport numpy as np, pandas as pd\nfrom pulp import *\nmenu = ['\u725b\u4e3c', '\u89aa\u5b50\u4e3c', '\u30ab\u30c4\u4e3c', '\u9244\u706b\u4e3c', '\u306d\u304e\u3068\u308d\u4e3c', '\u3061\u3089\u3057\u5bff\u53f8',\n        '\u9ebb\u5a46\u8304\u5b50', '\u30c9\u30ea\u30a2', '\u30aa\u30e0\u30e9\u30a4\u30b9', '\u30c1\u30e3\u30fc\u30cf\u30f3', '\u30ab\u30ec\u30fc\u30e9\u30a4\u30b9']\nn = len(menu)\nnp.random.seed(1)\na = pd.DataFrame({\n        '\u6599\u7406\u540d': menu,\n        '\u30ab\u30ed\u30ea\u30fc': np.random.randint(10,20,n),\n        '\u6804\u990a\u7d20A': np.random.randint(10,20,n),\n        '\u6804\u990a\u7d20B': np.random.randint(10,20,n),\n        '\u597d\u307f': np.random.randint(10,20,n),\n    })\nprint(a)\n```\n\n |\u6599\u7406\u540d|\u597d\u307f|\u30ab\u30ed\u30ea\u30fc|\u6804\u990a\u7d20A|\u6804\u990a\u7d20B\n:--|:--|--:|--:|--:|--:\n0|\u725b\u4e3c|18|15|14|10\n1|\u89aa\u5b50\u4e3c|13|18|15|16\n2|\u30ab\u30c4\u4e3c|19|19|12|19\n3|\u9244\u706b\u4e3c|18|15|14|19\n4|\u306d\u304e\u3068\u308d\u4e3c|17|10|12|17\n5|\u3061\u3089\u3057\u5bff\u53f8|13|10|14|16\n6|\u9ebb\u5a46\u8304\u5b50|16|11|17|19\n7|\u30c9\u30ea\u30a2|15|17|17|11\n8|\u30aa\u30e0\u30e9\u30a4\u30b9|11|16|19|10\n9|\u30c1\u30e3\u30fc\u30cf\u30f3|19|19|11|11\n10|\u30ab\u30ec\u30fc\u30e9\u30a4\u30b9|13|12|17|18\n\n\u89e3\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```py3:python\nm = LpProblem(sense=LpMaximize) # \u6700\u5927\u5316\u554f\u984c\na['x'] = [LpVariable('x%d'%i, cat=LpBinary) for i in range(n)] # \u9078\u629e\u3059\u308b/\u3057\u306a\u3044\nm += lpDot(a.\u597d\u307f, a.x) # \u597d\u307f\u3092\u6700\u5927\u5316\nm += lpSum(a.x) == 7 # 1\u9031\u9593\u5206\u306e\u732e\u7acb\nm += lpDot(a.\u30ab\u30ed\u30ea\u30fc, a.x) <= 90\nm += lpDot(a.\u6804\u990a\u7d20A, a.x) >= 95\nm += lpDot(a.\u6804\u990a\u7d20B, a.x) >= 95\nm.solve()\nif m.status == 1: # Optimal\n    a['val'] = a.x.apply(lambda v: value(v)) # \u7d50\u679c\n    print(a[a.val == 1].\u6599\u7406\u540d)\n>>>\n0         \u725b\u4e3c\n3        \u9244\u706b\u4e3c\n4      \u306d\u304e\u3068\u308d\u4e3c\n5      \u3061\u3089\u3057\u5bff\u53f8\n6       \u9ebb\u5a46\u8304\u5b50\n7        \u30c9\u30ea\u30a2\n10    \u30ab\u30ec\u30fc\u30e9\u30a4\u30b9\n```\n\n# <i class='fa fa-graduation-cap' /> Docker\nDocker\u3067\u3061\u3087\u3063\u3068\u8a66\u3057\u3066\u307f\u305f\u3044\u5834\u5408\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u3067\u30db\u30b9\u30c8\u3092\u958b\u304f\u3068\u3001Jupyter\u304c\u8d77\u52d5\u3057\u307e\u3059\u3002\u30e9\u30a4\u30d6\u30e9\u30ea\u3082[\u3044\u308d\u3044\u308d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](https://hub.docker.com/r/tsutomu7/jupyter/)\u3057\u3066\u3044\u307e\u3059\u3002\n\n    docker run -d -p 80:8888 tsutomu7/jupyter\n\n\u4ee5\u4e0a\n"}