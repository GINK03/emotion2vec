{"context": " More than 1 year has passed since last update.DB\u306b\u3042\u308b\u30c7\u30fc\u30bf\u3092\u4e00\u89a7\u3059\u308b\u5834\u5408\u3001\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nORM\u3068Pagination\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u51e6\u7406\u306e\u6d41\u308c\u306b\u306a\u308b\u3068\u601d\u3046\u3002\n\nORM\u30c7\u30fc\u30bf\u306e\u7dcf\u6570\u3092\u53d6\u5f97\u3059\u308b(Pagination\u306b\u6e21\u3059\u305f\u3081)\nPagination\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092forge\nORM\u3067\u73fe\u5728\u306e\u30da\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b(Pagination\u306e\u30e1\u30bd\u30c3\u30c9\u304b\u3089limit\u3068offset\u3092\u8a2d\u5b9a)\n\n\u3053\u306e\u3088\u3046\u306b\u3001\nORM -> Pagination -> ORM\n\u306e\u3088\u3046\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bORM\u306f\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u3084\u308b\u3068\u697d\u3002\n\nfuel/app/classes/controller/user.php\npublic function action_index()\n{\n    // \u30ab\u30c6\u30b4\u30ea1\u306e\u7dcf\u6570\u3092\u53d6\u5f97\u3059\u308b\u3002\n    $query =\n       Model_User::query()->where('category_id', 1);\n    $total_items = $query->count();\n\n    // Pagination\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    $pagination = Pagination::forge('users', [\n        'total_items' => $total_items,\n        'per_page'    => 20,\n        'uri_segment' => 'page',\n    ]);\n    $stash['pagination'] = $pagination;\n\n    // \u73fe\u5728\u306e\u30da\u30fc\u30b8\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\n    $stash['users'] =\n        $query\n        ->order_by('created_by', 'desc')\n        ->limit($pagination->per_page)\n        ->offset($pagination->offset)\n        ->get();\n\n    ...\n}\n\n\n\n\nDB\u306b\u3042\u308b\u30c7\u30fc\u30bf\u3092\u4e00\u89a7\u3059\u308b\u5834\u5408\u3001\u30da\u30fc\u30b8\u30cd\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nORM\u3068Pagination\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u51e6\u7406\u306e\u6d41\u308c\u306b\u306a\u308b\u3068\u601d\u3046\u3002\n\n1. ORM\u30c7\u30fc\u30bf\u306e\u7dcf\u6570\u3092\u53d6\u5f97\u3059\u308b(Pagination\u306b\u6e21\u3059\u305f\u3081)\n2. Pagination\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092forge\n3. ORM\u3067\u73fe\u5728\u306e\u30da\u30fc\u30b8\u3092\u53d6\u5f97\u3059\u308b(Pagination\u306e\u30e1\u30bd\u30c3\u30c9\u304b\u3089limit\u3068offset\u3092\u8a2d\u5b9a)\n\n\u3053\u306e\u3088\u3046\u306b\u3001\nORM -> Pagination -> ORM\n\u306e\u3088\u3046\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bORM\u306f\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u3084\u308b\u3068\u697d\u3002\n\n```php:fuel/app/classes/controller/user.php\npublic function action_index()\n{\n    // \u30ab\u30c6\u30b4\u30ea1\u306e\u7dcf\u6570\u3092\u53d6\u5f97\u3059\u308b\u3002\n    $query =\n       Model_User::query()->where('category_id', 1);\n    $total_items = $query->count();\n\n    // Pagination\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    $pagination = Pagination::forge('users', [\n        'total_items' => $total_items,\n        'per_page'    => 20,\n        'uri_segment' => 'page',\n    ]);\n    $stash['pagination'] = $pagination;\n\n    // \u73fe\u5728\u306e\u30da\u30fc\u30b8\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\n    $stash['users'] =\n        $query\n        ->order_by('created_by', 'desc')\n        ->limit($pagination->per_page)\n        ->offset($pagination->offset)\n        ->get();\n\n    ...\n}\n```\n", "tags": ["FuelPHP"]}