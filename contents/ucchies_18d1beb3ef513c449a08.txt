{"context": " More than 1 year has passed since last update.\n\n\u8981\u70b9\n\n\u30b7\u30df\u30e5\u30ec\u30fc\u30bfor\u5b9f\u6a5f\u306e\u6642\u523b\u8a2d\u5b9a\n\n\n\niOS\u306e\u5730\u57df\u8a2d\u5b9a\uff08\u8a00\u8a9e\u8a2d\u5b9a\u3067\u306f\u306a\u3044\u3067\u3059\uff09\u3092\u4f7f\u7528\u3059\u308bCognito\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u308f\u305b\u308b\u3002\n\n\n\u30c6\u30fc\u30d6\u30eb\u5c5e\u6027\u306e\u30c7\u30fc\u30bf\u578b\u5b9a\u7fa9\n\n\n\nDynamoDB\u3067\u6271\u3048\u308b\u30c7\u30fc\u30bf\u578b\uff08\u6587\u5b57\u5217\u30fb\u6570\u5024\u30fb\u30d0\u30a4\u30ca\u30ea\uff09\u3092\u610f\u8b58\u3059\u308b\u3002\nDynamoDB\u5074\u306e\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\uff08\u5c5e\u6027\u540d\u30fb\u30c7\u30fc\u30bf\u578b\uff09\u306e\u3068\u304a\u308a\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5b9f\u88c5\u3059\u308b\u3002\n\n\n\u4f7f\u7528\u3059\u308bRole\u306b\u5bfe\u3059\u308b\u9069\u5207\u306a\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\n\n\nCognito\u3068DynamoDB\u306b\u95a2\u3057\u3066\u3001\u5fc5\u8981\u5341\u5206\u306a\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u3002\n\n\n\n\n\u8981\u70b9\u3092\u7121\u8996\u3057\u305f\u5834\u5408\u306e\u4e0d\u5177\u5408\n\n\n\u30b7\u30df\u30e5\u30ec\u30fc\u30bfor\u5b9f\u6a5f\u306e\u6642\u523b\u8a2d\u5b9a\n\niOS\u306e\u6642\u523b\u8a2d\u5b9a\u3092\u8aa4\u308b\u3068\u3001The security token included in the request is expired\u306a\u308bException\u304c\u767a\u751f\u3057\u307e\u3059\u3002(\u53c2\u8003: Stackoverflow)\niOS\u306e\u5730\u57df\u8a2d\u5b9a\u304c\u4f7f\u7528\u3059\u308bCognito\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u3001DynamoDB\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u305f\u3082\u306e\u3068\uff08AWS\u5074\u306b\uff09\u307f\u306a\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u79c1\u306e\u5834\u5408\u306f\u3001iOS\u8a00\u8a9e\u8a2d\u5b9a\uff1d\u65e5\u672c\u8a9e\u3001iOS\u5730\u57df\u8a2d\u5b9a\uff1d\u30c7\u30d5\u30a9\u30eb\u30c8\uff08\u30a2\u30e1\u30ea\u30ab\uff09\u3001Cognito\uff1d\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3001\u306e\u6761\u4ef6\u3067\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n\n\uff08Stackoverflow\u3067\u306e\u8cea\u554f\uff08\u629c\u7c8b\uff09\uff09\nCaused by: com.amazonaws.AmazonServiceException: The security token included in the request is expired (Service: AmazonDynamoDBv2; Status Code: 400; Error Code:  ExpiredTokenException\n\uff08\u4ee5\u4e0b\u3001Answer\u3002\u91cd\u8981\u7b87\u6240\u3092\u592a\u5b57\u5f37\u8abf\u3057\u307e\u3057\u305f\uff09\nThis looks to me like a clock skew error. If you have left an emulator open for awhile or changed the clock on a phone it is possible the token generated from the SDK does not match what AWS is expecting.\n\n\n\n\u30c6\u30fc\u30d6\u30eb\u5c5e\u6027\u306e\u30c7\u30fc\u30bf\u578b\u5b9a\u7fa9\n\nDynamoDB\u3067\u5b9a\u7fa9\u3057\u305f\u5c5e\u6027\u540dor\u30c7\u30fc\u30bf\u578b\u306e\u901a\u308a\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3092\u5b9f\u88c5\u3057\u306a\u3044\u3068\u3001Supplied AttributeValue is empty, must contain exactly one of the supported datatypes\u3068\u3044\u3063\u305f\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\nDynamoDB\u306b\u304a\u3044\u3066\u306f\u3001\u6587\u5b57\u5217\uff08NSString\uff09\u30fb\u6570\u5024(NSNumber)\u30fb\u30d0\u30a4\u30ca\u30ea\uff08NSData\uff09\u578b\u306e\u307f\u304c\u8a31\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u666e\u901a\u306eRDBMS\u3084CoreData\u3068\u540c\u3058\u3088\u3046\u306a\u611f\u899a\u3067\u65e5\u4ed8(NSDate)\u306a\u3093\u304b\u3092\u7a81\u3063\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\n\n\u4f7f\u7528\u3059\u308bRole\u306b\u5bfe\u3059\u308b\u9069\u5207\u306a\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\n\nCognito\u306eIdentityPoolId\u306b\u7d10\u3065\u304fRole\u306e\u30dd\u30ea\u30b7\u30fc\u306b\u5341\u5206\u306a\u6a29\u9650\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u3001\u5148\u307b\u3069\u306e1\u306eException\u306b\u52a0\u3048\u3066AccessDeniedException\u304c\u767a\u751f\u3057\u307e\u3059\u3002\uff08DynamoDB\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\u306e\u3084\u308a\u65b9\u306f\u3053\u3061\u3089\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\uff09\n\u307e\u305f\u904e\u5270\u306a\u6a29\u9650\u4ed8\u4e0e\u306f\u3001IdentityPoolId\uff08\u3067\u767a\u884c\u3057\u305f\u30ef\u30f3\u30bf\u30a4\u30e0\u30c8\u30fc\u30af\u30f3\uff09\u304c\u6f0f\u6d29\u3057\u305f\u969b\u306e\u4e0d\u6b63\u5229\u7528\u30ea\u30b9\u30af\u5897\u52a0\u306b\u3064\u306a\u304c\u308a\u307e\u3059\u3002\u305f\u3068\u3048\u3070Action\u306bdynamodb:*\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3068\u3001\u30ec\u30b3\u30fc\u30c9\u306eCRUD\u306e\u4ed6\u306b\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u524a\u9664\u3082\u8a31\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3055\u3089\u306bResource\u306e\u6307\u5b9a\u304c\u306a\u3051\u308c\u3070\u3001\u610f\u56f3\u3057\u306a\u3044\u5225\u30c6\u30fc\u30d6\u30eb\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3082\u5b9f\u73fe\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\n\uff08\u4ee5\u4e0b\u3001dynamodb:UpdateItem\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u306b\u3088\u308bException\uff09\nDomain=com.amazonaws.AWSDynamoDBErrorDomain Code=1 \"(null)\" UserInfo={__type=com.amazon.coral.service#AccessDeniedException, Message=User: arn:aws:sts::\uff08\u203b\u30e6\u30fc\u30b6ID\uff09:assumed-role/\uff08\u203bRole\u540d\uff09/CognitoIdentityCredentials is not authorized to perform: dynamodb:UpdateItem on resource: arn:aws:dynamodb:us-west-2:\uff08\u203b\u30e6\u30fc\u30b6ID\uff09:table/\uff08\u203bDynamoDB\u306e\u30c6\u30fc\u30d6\u30eb\u540d\uff09}\n\n\n\n# \u8981\u70b9\n1. \u30b7\u30df\u30e5\u30ec\u30fc\u30bfor\u5b9f\u6a5f\u306e\u6642\u523b\u8a2d\u5b9a\n  - **iOS\u306e\u5730\u57df\u8a2d\u5b9a**\uff08\u8a00\u8a9e\u8a2d\u5b9a\u3067\u306f\u306a\u3044\u3067\u3059\uff09\u3092\u4f7f\u7528\u3059\u308bCognito\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u308f\u305b\u308b\u3002\n2. \u30c6\u30fc\u30d6\u30eb\u5c5e\u6027\u306e\u30c7\u30fc\u30bf\u578b\u5b9a\u7fa9\n  - **DynamoDB\u3067\u6271\u3048\u308b\u30c7\u30fc\u30bf\u578b**\uff08\u6587\u5b57\u5217\u30fb\u6570\u5024\u30fb\u30d0\u30a4\u30ca\u30ea\uff09\u3092\u610f\u8b58\u3059\u308b\u3002\n  - DynamoDB\u5074\u306e\u30c6\u30fc\u30d6\u30eb\u5b9a\u7fa9\uff08\u5c5e\u6027\u540d\u30fb\u30c7\u30fc\u30bf\u578b\uff09\u306e\u3068\u304a\u308a\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5b9f\u88c5\u3059\u308b\u3002\n3. \u4f7f\u7528\u3059\u308bRole\u306b\u5bfe\u3059\u308b\u9069\u5207\u306a\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\n  - Cognito\u3068DynamoDB\u306b\u95a2\u3057\u3066\u3001**\u5fc5\u8981\u5341\u5206\u306a\u6a29\u9650**\u3092\u4ed8\u4e0e\u3059\u308b\u3002\n\n# \u8981\u70b9\u3092\u7121\u8996\u3057\u305f\u5834\u5408\u306e\u4e0d\u5177\u5408\n1. \u30b7\u30df\u30e5\u30ec\u30fc\u30bfor\u5b9f\u6a5f\u306e\u6642\u523b\u8a2d\u5b9a\n  - iOS\u306e\u6642\u523b\u8a2d\u5b9a\u3092\u8aa4\u308b\u3068\u3001**The security token included in the request is expired**\u306a\u308bException\u304c\u767a\u751f\u3057\u307e\u3059\u3002(\u53c2\u8003: [Stackoverflow](http://stackoverflow.com/questions/29908514/dynamodb-the-security-token-included-in-the-request-is-expired))\n  - iOS\u306e\u5730\u57df\u8a2d\u5b9a\u304c\u4f7f\u7528\u3059\u308bCognito\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u3001DynamoDB\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u306e\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u304c\u5207\u308c\u305f\u3082\u306e\u3068\uff08AWS\u5074\u306b\uff09\u307f\u306a\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n  - \u79c1\u306e\u5834\u5408\u306f\u3001iOS\u8a00\u8a9e\u8a2d\u5b9a\uff1d\u65e5\u672c\u8a9e\u3001iOS\u5730\u57df\u8a2d\u5b9a\uff1d\u30c7\u30d5\u30a9\u30eb\u30c8\uff08\u30a2\u30e1\u30ea\u30ab\uff09\u3001Cognito\uff1d\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3001\u306e\u6761\u4ef6\u3067\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n    > \uff08Stackoverflow\u3067\u306e\u8cea\u554f\uff08\u629c\u7c8b\uff09\uff09\n    > Caused by: com.amazonaws.AmazonServiceException: The security token included in the request is expired (Service: AmazonDynamoDBv2; Status Code: 400; Error Code:  ExpiredTokenException\n    > \n    > \uff08\u4ee5\u4e0b\u3001Answer\u3002\u91cd\u8981\u7b87\u6240\u3092\u592a\u5b57\u5f37\u8abf\u3057\u307e\u3057\u305f\uff09\n    > This looks to me like **a clock skew error**. If you have left an emulator open for awhile or changed **the clock on a phone it is possible the token generated from the SDK does not match** what AWS is expecting.\n\n\n2. \u30c6\u30fc\u30d6\u30eb\u5c5e\u6027\u306e\u30c7\u30fc\u30bf\u578b\u5b9a\u7fa9\n  - DynamoDB\u3067\u5b9a\u7fa9\u3057\u305f\u5c5e\u6027\u540dor\u30c7\u30fc\u30bf\u578b\u306e\u901a\u308a\u306b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3092\u5b9f\u88c5\u3057\u306a\u3044\u3068\u3001**Supplied AttributeValue is empty, must contain exactly one of the supported datatypes**\u3068\u3044\u3063\u305f\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\n  - DynamoDB\u306b\u304a\u3044\u3066\u306f\u3001\u6587\u5b57\u5217\uff08NSString\uff09\u30fb\u6570\u5024(NSNumber)\u30fb\u30d0\u30a4\u30ca\u30ea\uff08NSData\uff09\u578b\u306e\u307f\u304c\u8a31\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n  - \u666e\u901a\u306eRDBMS\u3084CoreData\u3068\u540c\u3058\u3088\u3046\u306a\u611f\u899a\u3067\u65e5\u4ed8(NSDate)\u306a\u3093\u304b\u3092\u7a81\u3063\u8fbc\u3093\u3067\u3057\u307e\u3046\u3068\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\n3. \u4f7f\u7528\u3059\u308bRole\u306b\u5bfe\u3059\u308b\u9069\u5207\u306a\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\n  - Cognito\u306eIdentityPoolId\u306b\u7d10\u3065\u304fRole\u306e\u30dd\u30ea\u30b7\u30fc\u306b\u5341\u5206\u306a\u6a29\u9650\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u306a\u3044\u3068\u3001\u5148\u307b\u3069\u306e1\u306eException\u306b\u52a0\u3048\u3066**AccessDeniedException**\u304c\u767a\u751f\u3057\u307e\u3059\u3002\uff08DynamoDB\u306b\u95a2\u3059\u308b\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\u306e\u3084\u308a\u65b9\u306f[\u3053\u3061\u3089](http://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/UsingIAMWithDDB.html#ARN_Format)\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\uff09\n  - \u307e\u305f\u904e\u5270\u306a\u6a29\u9650\u4ed8\u4e0e\u306f\u3001IdentityPoolId\uff08\u3067\u767a\u884c\u3057\u305f\u30ef\u30f3\u30bf\u30a4\u30e0\u30c8\u30fc\u30af\u30f3\uff09\u304c\u6f0f\u6d29\u3057\u305f\u969b\u306e\u4e0d\u6b63\u5229\u7528\u30ea\u30b9\u30af\u5897\u52a0\u306b\u3064\u306a\u304c\u308a\u307e\u3059\u3002\u305f\u3068\u3048\u3070Action\u306b**dynamodb:\\***\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u3068\u3001\u30ec\u30b3\u30fc\u30c9\u306eCRUD\u306e\u4ed6\u306b\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306e\u524a\u9664\u3082\u8a31\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3055\u3089\u306bResource\u306e\u6307\u5b9a\u304c\u306a\u3051\u308c\u3070\u3001\u610f\u56f3\u3057\u306a\u3044\u5225\u30c6\u30fc\u30d6\u30eb\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3082\u5b9f\u73fe\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n    > \uff08\u4ee5\u4e0b\u3001**dynamodb:UpdateItem**\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u306b\u3088\u308bException\uff09\n    > Domain=com.amazonaws.AWSDynamoDBErrorDomain Code=1 \"(null)\" UserInfo={__type=com.amazon.coral.service#AccessDeniedException, Message=User: arn:aws:sts::\uff08\u203b\u30e6\u30fc\u30b6ID\uff09:assumed-role/\uff08\u203bRole\u540d\uff09/CognitoIdentityCredentials **is not authorized to perform: dynamodb:UpdateItem** on resource: arn:aws:dynamodb:us-west-2:\uff08\u203b\u30e6\u30fc\u30b6ID\uff09:table/\uff08\u203bDynamoDB\u306e\u30c6\u30fc\u30d6\u30eb\u540d\uff09}\n  \n", "tags": ["iOS", "AWS", "AWS_SDK", "DynamoDB"]}