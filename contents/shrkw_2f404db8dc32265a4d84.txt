{"context": " More than 1 year has passed since last update.\u305a\u3063\u3068\u4f7f\u3063\u3066\u308bHiki\u304c\u3042\u308b\u3051\u3069\u3001\u3044\u3044\u52a0\u6e1b\u3001Hiki\u8a18\u6cd5\u3092\u5fd8\u308c\u3066\u308b\u306e\u3067\u3001Markdown\u306awiki\u306b\u79fb\u884c\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u3002Markdown\u3060\u3068dl\u306e\u5bfe\u5fdc\u304c\u306a\u3044\u304b\u3089\u672c\u5f53\u306fAsciiDoc\u306e\u307b\u3046\u304c\u3044\u3044\u3093\u3060\u3051\u3069\u3001\u30de\u30a4\u30ca\u30fc\u306a\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306b\u79fb\u308b\u3093\u306a\u3089Hiki\u306e\u307e\u307e\u3067\u3044\u3044\u3084\u3068\u306a\u3063\u305f\u306e\u3067\u3001Gollum\u3068Github Flavored Markdown\u3092\u9078\u629e\u3002\n\ntl;dr\nshrkw/gollum-auto-backup\u306b\u3082\u308d\u3082\u308d\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u7f6e\u3044\u305f\u306e\u3067\u52d5\u304b\u3059\u306e\u306b\u4f55\u304c\u5fc5\u8981\u304b\u308f\u304b\u308b\u306f\u305a\u3002\n\n\u3084\u3063\u305f\u3053\u3068\n\n\nLocal\u3067\u52d5\u304b\u3059\n\n\n\n\u666e\u901a\u306b\u52d5\u304f\n\nBasic\u8a8d\u8a3c\u304b\u3051\u308b\n\nHook\u3067git push\u3059\u308b\n\nBitBucket\u306bpush\u3059\u308b\n\n\n\nGithub Flavored Markdown\u3092\u4f7f\u3046\n\nHeroku\u3067\u52d5\u304b\u3059\n\n\n\ngit push\u3082\u3061\u3083\u3093\u3068\u52d5\u304f\u3053\u3068\n\n\n\nhiki\u306e\u30c7\u30fc\u30bf\u3092markdown\u306b\u30b3\u30f3\u30d0\u30fc\u30c8\n\n\nLocal\u3067\u52d5\u304b\u3059\n\u6e96\u5099\n$ mkdir Desktop/shr-gollum\n$ cat Gemfile\nsource 'https://rubygems.org'\nruby '2.2.2'\ngem 'gollum', '~> 4.0.1'\ngem 'github-markdown', '~> 0.6.9'\n$ bundle install --path=vendor/bundle\n\n\u8d77\u52d5\n$ cd /tmp\n$ git clone git@github.com:shrkw/gollumwiki.git\n$ bundle exec gollum /tmp/gollumwiki\n\n\u78ba\u8a8d\n$ cd /tmp/gollumwiki/\n$ git log\ncommit f201b8be8803d0fc29f78b2308825baa6ef6710c\nAuthor: shrkw <shrkwh@gmail.com>\nDate:   Thu Dec 24 23:21:14 2015 +0900\n\n    Created foo (markdown)\n\ncommit 4e10983baad0c3c6183aa6972c9b64f102008fbd\nAuthor: shrkw <shrkwh@gmail.com>\nDate:   Thu Dec 24 23:21:02 2015 +0900\n\n    Created Home (markdown)\n\n\nBasic\u8a8d\u8a3c\u304b\u3051\u308b\ngollum-on-heroku/precious.rb at master \u00b7 naoa/gollum-on-heroku\u3092\u30d1\u30af\u3063\u3066\u8a8d\u8a3c\u304b\u3051\u308b\u3002\n#!/usr/bin/env ruby\nrequire 'rubygems'\nrequire 'gollum/app'\n\nmodule Precious\n  class App < Sinatra::Base\n    basic_auth_username = ENV['BASIC_AUTH_USERNAME']\n    basic_auth_password = ENV['BASIC_AUTH_PASSWORD']\n    if basic_auth_username && basic_auth_password\n      before do\n        authorize\n      end\n    end\n\n    private\n    def authorize\n      response['WWW-Authenticate'] = %(Basic realm=\"Restricted area.\")\n      throw(:halt, [401, \"Not authorized\\n\"]) unless authorized?\n    end\n\n    def authorized?\n      basic_auth_username = ENV['BASIC_AUTH_USERNAME']\n      basic_auth_password = ENV['BASIC_AUTH_PASSWORD']\n\n      @auth ||=  Rack::Auth::Basic::Request.new(request.env)\n      @auth.provided? && @auth.basic? && @auth.credentials && @auth.credentials == [basic_auth_username, basic_auth_password]\n    end\n  end\nend\n\n\nHook\u3067git push\u3059\u308b\nnaoa/gollum-on-heroku \u304c\u3059\u3054\u304f\u53c2\u8003\u306b\u306a\u3063\u305f\u3002\nHook\u304c\u4f7f\u3048\u308b\u3068\u304b\u3001gollum/gollum-lib\u306b\u3057\u304b\u66f8\u3044\u3066\u306a\u3044\u306e\u306b\u4f7f\u3063\u3066\u3066\u3059\u3054\u3044\u3002\nwiki = Gollum::Wiki.new(gollum_path)\nGollum::Hook.register(:post_commit, :hook_id) do |committer, sha1|\n#  wiki.repo.git.pull(\"origin\", \"master\")\n  wiki.repo.git.push(\"origin\", \"master\")\nend\n\n\nBitBucket\u306bpush\u3059\u308b\n\u3059\u3054\u3044\u3081\u3093\u3069\u304f\u3055\u3044\u3002\u306a\u305c\u306a\u3089BitBucket\u306eOAuth Access Token\u306f1\u6642\u9593\u3067\u5931\u52b9\u3057\u3066\u3057\u307e\u3046\u304b\u3089 [OAuth on Bitbucket Cloud - Atlassian Documentation]\u3002\n\u306a\u306e\u3067\u3001\u3053\u3093\u306a\u30d7\u30ed\u30bb\u30b9\u304c\u6bce\u6642\u3067\u5fc5\u8981\u306b\u306a\u308b\u3002\n\nrefresh_token\u306eAPI\u53e9\u3044\u3066\u65b0\u3057\u3044Access Token\u3092\u53d6\u5f97\n\n\ncurl -X POST -u \"client_id:secret\" https://bitbucket.org/site/oauth2/access_token -d grant_type=refresh_token -d refresh_token={refresh_token}\n\n\nconfig\u306eurl\u3092\u66f4\u65b0\n\n\ngit remote set-url origin https://x-token-auth:{access_token}@bitbucket.org/shrkwh/gollumwiki.git\n\n\n\n\u3082\u3057\u304f\u306f\u3001\u3053\u308c\u7528\u306essh\u30ad\u30fc\u3092\u767b\u9332\u3057\u3066\u304a\u3044\u3066\u3001ssh\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u3092\u74b0\u5883\u5909\u6570\u306b\u6e21\u3057\u3066\u3001dyno\u8d77\u52d5\u306e\u305f\u3073\u306b\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\u3001\u3068\u304b\u3002\u305d\u308c\u3082\u30a4\u30e4\u3060\u3051\u3069\u3002\nnon-expiring\u306aAPI token\u3082\u691c\u8a0e\u3057\u3066\u306f\u3044\u308b\u3089\u3057\u3044 [comment from Atlassian guy]\u3002\u4e00\u5fdc\u3001Bitbucket\u306eissue tracker\u306b\u3082\u8ffd\u52a0\u3057\u3066\u304a\u3044\u305f [site / master / issues / #12186 - non-expiring auth access tokens (BB-15425) \u2014 Bitbucket]\u3002\n\n\u3082\u3057\u304f\u306f\u3001dyno\u306e\u8d77\u52d5\u6642\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\u3059\u308b\n\nOAuth2\u30ad\u30fc\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u74b0\u5883\u5909\u6570\u3067\u767b\u9332\ndyno\u8d77\u52d5\u6642\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\n\u305d\u308c\u3092\u4f7f\u3063\u3066BitBucket\u304b\u3089clone\ndyno\u8d77\u52d5\u4e2d\u306f\u305d\u308c\u3067push\u3059\u308b\n\ndyno\u306f\u6bce\u65e5reboot\u3057\u3066\u308b\u307f\u305f\u3044\u3060\u3057\u3001\u3053\u308c\u3067\u3044\u3044\u304b\u3002\u306a\u3093\u304b\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3089\u307e\u305f\u8003\u3048\u3088\u3046\u3002\nrequire 'net/http'\nrequire 'uri'\nrequire 'openssl'\nrequire 'json'\nrequire 'logger'\n\ndef fetch_access_token(key, secret)\n  logger = Logger.new(STDERR)\n  url = URI.parse('https://bitbucket.org/site/oauth2/access_token')\n  req = Net::HTTP::Post.new(url.path)\n\n  req.basic_auth key, secret\n  req.set_form_data({'grant_type'=>'client_credentials'}, ';')\n  http = Net::HTTP.new(url.host, url.port)\n  http.use_ssl = true\n  #http.set_debug_output $stderr\n  res = http.start {|http| http.request(req) }\n  case res\n  when Net::HTTPSuccess, Net::HTTPRedirection\n    logger.info('Fetching Access Token Succeed')\n    js = JSON.parse(res.body)\n    js['access_token']\n  else\n    raise StandardError, 'Fetching Access Token Failed'\n  end\nend\n\ngollum-auto-backup/bitbucket.rb at master \u00b7 shrkw/gollum-auto-backup\n\nGithub Flavored Markdown\u3092\u4f7f\u3046\n\u3082\u3068\u3082\u3068github-markdown\u306b\u5bfe\u5fdc\u3057\u3066\u305f [gollum/README.md at master \u00b7 gollum/gollum]\u3002Gemfile\u306b\u66f8\u3051\u3070OK\u3002\ngem 'github-markdown'\n\n\nHeroku\u3067\u52d5\u304b\u3059\nbuildpack-multi\u4f7f\u3046\u3068.buildpacks\u30d5\u30a1\u30a4\u30eb\u3067\u8907\u6570\u306ebuildpack\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u306d\u3002\u3067\u3001Heorku Deploy\u30dc\u30bf\u3093\u304b\u3089\u306e\u8d77\u52d5\u306a\u3089app.json\u306b\u6307\u5b9a\u3067\u304d\u308b\u3051\u3069\u3001\u30b3\u30de\u30f3\u30c9\u304b\u3089\u306a\u3089\u3001\u4ee5\u4e0b\u3067\u6307\u5b9a\u3002\nheroku buildpacks:set https://github.com/heroku/heroku-buildpack-multi.git\n\n\u305d\u306e\u4ed6\u306econfig\u3082\u9069\u5b9c\u6307\u5b9a\u3002\nheroku config:add GIT_REPO_PATH=\"shrkw/gollumwiki\"\nheroku config:add OAUTH_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXX\n\n\ngit push\u3082\u3061\u3083\u3093\u3068\u52d5\u304f\u3053\u3068\nhttps://x-token-auth:{access_token}@bitbucket.org/shrkwh/gollumwiki.git\u3067clone\u3067\u304d\u3066\u308c\u3070\u3001\u4e0a\u8a18\u306ehook\u3067\u3061\u3083\u3093\u3068push\u3067\u304d\u308b\u3002\n\nHiki\u306e\u30c7\u30fc\u30bf\u3092Markdown\u306b\u30b3\u30f3\u30d0\u30fc\u30c8\nmasasuzu/p5-App-hiki2md\u304c\u3042\u3063\u305f\u306e\u3067\u4f7f\u3046\u3002\u3068\u601d\u3063\u305f\u3089\u5fae\u5999\u306b\u7a7a\u767d\u306e\u5bfe\u5fdc\u304c\u671f\u5f85\u3057\u3066\u305f\u306e\u3068\u9055\u3046\u3002\u306e\u3067\u3001folk [shrkw/p5-App-hiki2md]\u3000\u3057\u3066\u3001\u3064\u3044\u3067\u306b\u30c6\u30fc\u30d6\u30eb\u306b\u3056\u3063\u304f\u308a\u5bfe\u5fdc\u3055\u305b\u305f\u3002\nperl\u306e\u66f8\u304d\u65b9\u3068\u304b\u52d5\u304b\u3057\u65b9\u5168\u304f\u3082\u3063\u3066\u5fd8\u308c\u3066\u305f\u3002\nexport PERL5LIB=/Users/shrkw/.ghq/github.com/shrkw/p5-App-hiki2md/lib\nperl ./bin/hiki2md Src > Dest\n\n\u3067\u304d\u305f\u30d5\u30a1\u30a4\u30eb\u3092git\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066push\u3057\u3066\u7d42\u308f\u308a\u3002\n\n\u307e\u3068\u3081\n\u3068\u3044\u3046\u308f\u3051\u3067BitBucket\u3068sync\u3059\u308bgollum\u304cHeroku\u306b\u5efa\u3066\u3089\u308c\u307e\u3057\u305f\u3002\u30b5\u30af\u30c3\u3068\u7d42\u308f\u308b\u3068\u601d\u3063\u3066\u305f\u3051\u3069\u6bce\u65e5\u5c11\u3057\u305a\u3064\u9032\u3081\u3066\u305f\u3089\u51ac\u4f11\u307f\u4e2d\u304b\u304b\u3063\u3066\u3057\u307e\u3063\u305f\u3002\nMarkdown\u3067todo\u30ea\u30b9\u30c8\u4f5c\u3063\u3066\u9032\u3081\u308b\u3068\u3001\u9032\u6357\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u3066\u52a9\u304b\u3063\u305f\u3002\n\n\u53c2\u8003\n\nDeploy to Heroku\u30dc\u30bf\u30f3\u3067Git\u30d9\u30fc\u30b9\u306eWiki gollum\u3092\u7121\u6599\u3067\u7c21\u5358\u306b\u4f5c\u308c\u308b\u3088\u3046\u306b\u3057\u305f - CreateField Blog\ngithub\u306ewiki\u30a8\u30f3\u30b8\u30f3\"gollum\"\u306e\u5c0e\u5165\u3068\u7d30\u304b\u3044\u8a2d\u5b9a - yukke::note\nhfm/wiki\nGollum on Heroku\ngollum\u3092\u4f7f\u3063\u3066\u500b\u4eba\u7528wiki\u3092\u30b5\u30fc\u30d0\u306b\u7acb\u3066\u305f | blog: takahiro okumura\nGithub\u88fdwiki\u30a8\u30f3\u30b8\u30f3\"Gollum\"\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - Qiita\n\n\n\u305a\u3063\u3068\u4f7f\u3063\u3066\u308bHiki\u304c\u3042\u308b\u3051\u3069\u3001\u3044\u3044\u52a0\u6e1b\u3001Hiki\u8a18\u6cd5\u3092\u5fd8\u308c\u3066\u308b\u306e\u3067\u3001Markdown\u306awiki\u306b\u79fb\u884c\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u3002Markdown\u3060\u3068dl\u306e\u5bfe\u5fdc\u304c\u306a\u3044\u304b\u3089\u672c\u5f53\u306fAsciiDoc\u306e\u307b\u3046\u304c\u3044\u3044\u3093\u3060\u3051\u3069\u3001\u30de\u30a4\u30ca\u30fc\u306a\u30de\u30fc\u30af\u30a2\u30c3\u30d7\u306b\u79fb\u308b\u3093\u306a\u3089Hiki\u306e\u307e\u307e\u3067\u3044\u3044\u3084\u3068\u306a\u3063\u305f\u306e\u3067\u3001Gollum\u3068Github Flavored Markdown\u3092\u9078\u629e\u3002\n\n## tl;dr\n\n[shrkw/gollum-auto-backup](https://github.com/shrkw/gollum-auto-backup)\u306b\u3082\u308d\u3082\u308d\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u7f6e\u3044\u305f\u306e\u3067\u52d5\u304b\u3059\u306e\u306b\u4f55\u304c\u5fc5\u8981\u304b\u308f\u304b\u308b\u306f\u305a\u3002\n\n## \u3084\u3063\u305f\u3053\u3068\n\n- [x] Local\u3067\u52d5\u304b\u3059\n - [x] \u666e\u901a\u306b\u52d5\u304f\n - [x] Basic\u8a8d\u8a3c\u304b\u3051\u308b\n - [x] Hook\u3067git push\u3059\u308b\n - [x] BitBucket\u306bpush\u3059\u308b\n- [x] Github Flavored Markdown\u3092\u4f7f\u3046\n- [x] Heroku\u3067\u52d5\u304b\u3059\n - [x] git push\u3082\u3061\u3083\u3093\u3068\u52d5\u304f\u3053\u3068\n- [x] hiki\u306e\u30c7\u30fc\u30bf\u3092markdown\u306b\u30b3\u30f3\u30d0\u30fc\u30c8\n\n## Local\u3067\u52d5\u304b\u3059\n\n\u6e96\u5099\n\n```\n$ mkdir Desktop/shr-gollum\n$ cat Gemfile\nsource 'https://rubygems.org'\nruby '2.2.2'\ngem 'gollum', '~> 4.0.1'\ngem 'github-markdown', '~> 0.6.9'\n$ bundle install --path=vendor/bundle\n```\n\n\u8d77\u52d5\n\n```\n$ cd /tmp\n$ git clone git@github.com:shrkw/gollumwiki.git\n$ bundle exec gollum /tmp/gollumwiki\n```\n\n\u78ba\u8a8d\n\n```\n$ cd /tmp/gollumwiki/\n$ git log\ncommit f201b8be8803d0fc29f78b2308825baa6ef6710c\nAuthor: shrkw <shrkwh@gmail.com>\nDate:   Thu Dec 24 23:21:14 2015 +0900\n\n    Created foo (markdown)\n\ncommit 4e10983baad0c3c6183aa6972c9b64f102008fbd\nAuthor: shrkw <shrkwh@gmail.com>\nDate:   Thu Dec 24 23:21:02 2015 +0900\n\n    Created Home (markdown)\n```\n\n### Basic\u8a8d\u8a3c\u304b\u3051\u308b\n\n[gollum-on-heroku/precious.rb at master \u00b7 naoa/gollum-on-heroku](https://github.com/naoa/gollum-on-heroku/blob/master/precious.rb)\u3092\u30d1\u30af\u3063\u3066\u8a8d\u8a3c\u304b\u3051\u308b\u3002\n\n```ruby\n#!/usr/bin/env ruby\nrequire 'rubygems'\nrequire 'gollum/app'\n\nmodule Precious\n  class App < Sinatra::Base\n    basic_auth_username = ENV['BASIC_AUTH_USERNAME']\n    basic_auth_password = ENV['BASIC_AUTH_PASSWORD']\n    if basic_auth_username && basic_auth_password\n      before do\n        authorize\n      end\n    end\n\n    private\n    def authorize\n      response['WWW-Authenticate'] = %(Basic realm=\"Restricted area.\")\n      throw(:halt, [401, \"Not authorized\\n\"]) unless authorized?\n    end\n\n    def authorized?\n      basic_auth_username = ENV['BASIC_AUTH_USERNAME']\n      basic_auth_password = ENV['BASIC_AUTH_PASSWORD']\n\n      @auth ||=  Rack::Auth::Basic::Request.new(request.env)\n      @auth.provided? && @auth.basic? && @auth.credentials && @auth.credentials == [basic_auth_username, basic_auth_password]\n    end\n  end\nend\n```\n\n### Hook\u3067git push\u3059\u308b\n\n[naoa/gollum-on-heroku](https://github.com/naoa/gollum-on-heroku) \u304c\u3059\u3054\u304f\u53c2\u8003\u306b\u306a\u3063\u305f\u3002\nHook\u304c\u4f7f\u3048\u308b\u3068\u304b\u3001[gollum/gollum-lib](https://github.com/gollum/gollum-lib)\u306b\u3057\u304b\u66f8\u3044\u3066\u306a\u3044\u306e\u306b\u4f7f\u3063\u3066\u3066\u3059\u3054\u3044\u3002\n\n```\nwiki = Gollum::Wiki.new(gollum_path)\nGollum::Hook.register(:post_commit, :hook_id) do |committer, sha1|\n#  wiki.repo.git.pull(\"origin\", \"master\")\n  wiki.repo.git.push(\"origin\", \"master\")\nend\n```\n\n### BitBucket\u306bpush\u3059\u308b\n\n\u3059\u3054\u3044\u3081\u3093\u3069\u304f\u3055\u3044\u3002\u306a\u305c\u306a\u3089BitBucket\u306eOAuth Access Token\u306f1\u6642\u9593\u3067\u5931\u52b9\u3057\u3066\u3057\u307e\u3046\u304b\u3089 [[OAuth on Bitbucket Cloud - Atlassian Documentation](https://confluence.atlassian.com/bitbucket/oauth-on-bitbucket-cloud-238027431.html#OAuthonBitbucketCloud-Refreshtokens)]\u3002\n\u306a\u306e\u3067\u3001\u3053\u3093\u306a\u30d7\u30ed\u30bb\u30b9\u304c\u6bce\u6642\u3067\u5fc5\u8981\u306b\u306a\u308b\u3002\n\n1. refresh_token\u306eAPI\u53e9\u3044\u3066\u65b0\u3057\u3044Access Token\u3092\u53d6\u5f97\n - `curl -X POST -u \"client_id:secret\" https://bitbucket.org/site/oauth2/access_token -d grant_type=refresh_token -d refresh_token={refresh_token}`\n2. config\u306eurl\u3092\u66f4\u65b0\n - `git remote set-url origin https://x-token-auth:{access_token}@bitbucket.org/shrkwh/gollumwiki.git`\n\n~~\u3082\u3057\u304f\u306f\u3001\u3053\u308c\u7528\u306essh\u30ad\u30fc\u3092\u767b\u9332\u3057\u3066\u304a\u3044\u3066\u3001ssh\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u3092\u74b0\u5883\u5909\u6570\u306b\u6e21\u3057\u3066\u3001dyno\u8d77\u52d5\u306e\u305f\u3073\u306b\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3059\u308b\u3001\u3068\u304b\u3002\u305d\u308c\u3082\u30a4\u30e4\u3060\u3051\u3069\u3002~~\n\nnon-expiring\u306aAPI token\u3082\u691c\u8a0e\u3057\u3066\u306f\u3044\u308b\u3089\u3057\u3044 [[comment from Atlassian guy](http://stackoverflow.com/questions/24965307/how-to-manipulate-bitbucket-repository-with-token/31398521#comment53581278_31398521)]\u3002\u4e00\u5fdc\u3001Bitbucket\u306eissue tracker\u306b\u3082\u8ffd\u52a0\u3057\u3066\u304a\u3044\u305f [[site / master / issues / #12186 - non-expiring auth access tokens (BB-15425) \u2014 Bitbucket](https://bitbucket.org/site/master/issues/12186/non-expiring-auth-access-tokens)]\u3002\n\n### \u3082\u3057\u304f\u306f\u3001dyno\u306e\u8d77\u52d5\u6642\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\u3059\u308b\n\n1. OAuth2\u30ad\u30fc\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u74b0\u5883\u5909\u6570\u3067\u767b\u9332\n2. dyno\u8d77\u52d5\u6642\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\n3. \u305d\u308c\u3092\u4f7f\u3063\u3066BitBucket\u304b\u3089clone\n4. dyno\u8d77\u52d5\u4e2d\u306f\u305d\u308c\u3067push\u3059\u308b\n\ndyno\u306f\u6bce\u65e5reboot\u3057\u3066\u308b\u307f\u305f\u3044\u3060\u3057\u3001\u3053\u308c\u3067\u3044\u3044\u304b\u3002\u306a\u3093\u304b\u3046\u307e\u304f\u3044\u304b\u306a\u304b\u3063\u305f\u3089\u307e\u305f\u8003\u3048\u3088\u3046\u3002\n\n```ruby\nrequire 'net/http'\nrequire 'uri'\nrequire 'openssl'\nrequire 'json'\nrequire 'logger'\n\ndef fetch_access_token(key, secret)\n  logger = Logger.new(STDERR)\n  url = URI.parse('https://bitbucket.org/site/oauth2/access_token')\n  req = Net::HTTP::Post.new(url.path)\n\n  req.basic_auth key, secret\n  req.set_form_data({'grant_type'=>'client_credentials'}, ';')\n  http = Net::HTTP.new(url.host, url.port)\n  http.use_ssl = true\n  #http.set_debug_output $stderr\n  res = http.start {|http| http.request(req) }\n  case res\n  when Net::HTTPSuccess, Net::HTTPRedirection\n    logger.info('Fetching Access Token Succeed')\n    js = JSON.parse(res.body)\n    js['access_token']\n  else\n    raise StandardError, 'Fetching Access Token Failed'\n  end\nend\n```\n[gollum-auto-backup/bitbucket.rb at master \u00b7 shrkw/gollum-auto-backup](https://github.com/shrkw/gollum-auto-backup/blob/master/bitbucket.rb)\n\n## Github Flavored Markdown\u3092\u4f7f\u3046\n\n\u3082\u3068\u3082\u3068`github-markdown`\u306b\u5bfe\u5fdc\u3057\u3066\u305f [[gollum/README.md at master \u00b7 gollum/gollum](https://github.com/gollum/gollum/blob/master/README.md)]\u3002`Gemfile`\u306b\u66f8\u3051\u3070OK\u3002\n\n```\ngem 'github-markdown'\n```\n\n## Heroku\u3067\u52d5\u304b\u3059\n\n`buildpack-multi`\u4f7f\u3046\u3068`.buildpacks`\u30d5\u30a1\u30a4\u30eb\u3067\u8907\u6570\u306ebuildpack\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u306d\u3002\u3067\u3001Heorku Deploy\u30dc\u30bf\u3093\u304b\u3089\u306e\u8d77\u52d5\u306a\u3089app.json\u306b\u6307\u5b9a\u3067\u304d\u308b\u3051\u3069\u3001\u30b3\u30de\u30f3\u30c9\u304b\u3089\u306a\u3089\u3001\u4ee5\u4e0b\u3067\u6307\u5b9a\u3002\n\n```\nheroku buildpacks:set https://github.com/heroku/heroku-buildpack-multi.git\n```\n\n\u305d\u306e\u4ed6\u306econfig\u3082\u9069\u5b9c\u6307\u5b9a\u3002\n\n```\nheroku config:add GIT_REPO_PATH=\"shrkw/gollumwiki\"\nheroku config:add OAUTH_KEY=XXXXXXXXXXXXXXXXXXXXXXXXXXXX\n```\n\n### git push\u3082\u3061\u3083\u3093\u3068\u52d5\u304f\u3053\u3068\n\n`https://x-token-auth:{access_token}@bitbucket.org/shrkwh/gollumwiki.git`\u3067clone\u3067\u304d\u3066\u308c\u3070\u3001\u4e0a\u8a18\u306ehook\u3067\u3061\u3083\u3093\u3068push\u3067\u304d\u308b\u3002\n\n## Hiki\u306e\u30c7\u30fc\u30bf\u3092Markdown\u306b\u30b3\u30f3\u30d0\u30fc\u30c8\n\n[masasuzu/p5-App-hiki2md](https://github.com/masasuzu/p5-App-hiki2md)\u304c\u3042\u3063\u305f\u306e\u3067\u4f7f\u3046\u3002\u3068\u601d\u3063\u305f\u3089\u5fae\u5999\u306b\u7a7a\u767d\u306e\u5bfe\u5fdc\u304c\u671f\u5f85\u3057\u3066\u305f\u306e\u3068\u9055\u3046\u3002\u306e\u3067\u3001folk [[shrkw/p5-App-hiki2md](https://github.com/shrkw/p5-App-hiki2md)]\u3000\u3057\u3066\u3001\u3064\u3044\u3067\u306b\u30c6\u30fc\u30d6\u30eb\u306b\u3056\u3063\u304f\u308a\u5bfe\u5fdc\u3055\u305b\u305f\u3002\n\nperl\u306e\u66f8\u304d\u65b9\u3068\u304b\u52d5\u304b\u3057\u65b9\u5168\u304f\u3082\u3063\u3066\u5fd8\u308c\u3066\u305f\u3002\n\n```\nexport PERL5LIB=/Users/shrkw/.ghq/github.com/shrkw/p5-App-hiki2md/lib\nperl ./bin/hiki2md Src > Dest\n```\n\n\u3067\u304d\u305f\u30d5\u30a1\u30a4\u30eb\u3092git\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u30b3\u30df\u30c3\u30c8\u3057\u3066push\u3057\u3066\u7d42\u308f\u308a\u3002\n\n## \u307e\u3068\u3081\n\n\u3068\u3044\u3046\u308f\u3051\u3067BitBucket\u3068sync\u3059\u308bgollum\u304cHeroku\u306b\u5efa\u3066\u3089\u308c\u307e\u3057\u305f\u3002\u30b5\u30af\u30c3\u3068\u7d42\u308f\u308b\u3068\u601d\u3063\u3066\u305f\u3051\u3069\u6bce\u65e5\u5c11\u3057\u305a\u3064\u9032\u3081\u3066\u305f\u3089\u51ac\u4f11\u307f\u4e2d\u304b\u304b\u3063\u3066\u3057\u307e\u3063\u305f\u3002\n\nMarkdown\u3067todo\u30ea\u30b9\u30c8\u4f5c\u3063\u3066\u9032\u3081\u308b\u3068\u3001\u9032\u6357\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u3066\u52a9\u304b\u3063\u305f\u3002\n\n## \u53c2\u8003\n\n- [Deploy to Heroku\u30dc\u30bf\u30f3\u3067Git\u30d9\u30fc\u30b9\u306eWiki gollum\u3092\u7121\u6599\u3067\u7c21\u5358\u306b\u4f5c\u308c\u308b\u3088\u3046\u306b\u3057\u305f - CreateField Blog](http://blog.createfield.com/entry/2015/09/21/214232)\n\n\n- [github\u306ewiki\u30a8\u30f3\u30b8\u30f3\"gollum\"\u306e\u5c0e\u5165\u3068\u7d30\u304b\u3044\u8a2d\u5b9a - yukke::note](http://yukke.hateblo.jp/entry/2013/05/02/224859)\n- [hfm/wiki](https://github.com/hfm/wiki)\n- [Gollum on Heroku](http://www.javiersaldana.com/tech/2014/02/07/gollum-on-heroku.html)\n- [gollum\u3092\u4f7f\u3063\u3066\u500b\u4eba\u7528wiki\u3092\u30b5\u30fc\u30d0\u306b\u7acb\u3066\u305f | blog: takahiro okumura](http://blog.hifumi.info/2014/02/02/my-wiki-powered-by-gollum/)\n- [Github\u88fdwiki\u30a8\u30f3\u30b8\u30f3&quot;Gollum&quot;\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb - Qiita](http://qiita.com/urunru@github/items/d4708bca0b70009856ec)\n\n", "tags": ["Heroku", "gollum"]}