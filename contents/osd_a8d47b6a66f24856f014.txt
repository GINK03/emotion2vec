{"context": " More than 1 year has passed since last update.\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u306b\u5165\u308b\u6642\u306b\u3001\u7406\u7531\u3092\u5f15\u6570\u306b\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b gem \u304c\u3042\u308b\nbiola/turnout\nrake maintenance:start reason=\"\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306e\u7d42\u4e86\u306f19\u6642\u3092\u4e88\u5b9a\u3057\u3066\u304a\u308a\u307e\u3059\"\n\n\u3053\u308c\u3092 capistrano \u7d4c\u7531\u3067\u5b9f\u884c\u3067\u304d\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3002\nnamespace :maintenance do\n  task :start, :reason do |_, args|\n    reason = args[:reason]\n    on release_roles :all do\n      within release_path do\n        with rails_env: fetch(:rails_env) do\n          execute :rake, \"maintenance:start reason='#{reason}'\"\n        end\n      end\n    end\n  end\nend\n\n\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u3002\nSSHKit::Runner::ExecuteError: Exception while executing as ****: incompatible character encodings: ASCII-8BIT and UTF-8\n\n\u3069\u3046\u3084\u3089\u65e5\u672c\u8a9e(UTF-8)\u3092\u4f7f\u3048\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001\u6570\u5024\u53c2\u7167\u306b\u5909\u63db\u3057\u3066\u6e21\u3059\u3053\u3068\u306b\u3057\u305f\u3002\n\u4f7f\u3063\u305f gem \u306f threedaymonk/htmlentities\nnamespace :maintenance do\n  task :start, :reason do |_, args|\n    require \"htmlentities\"\n    reason = HTMLEntities.new.encode(args[:reason], :hexadecimal) if args[:reason]\n    on release_roles :all do\n      within release_path do\n        with rails_env: fetch(:rails_env) do\n          execute :rake, \"maintenance:start reason='#{reason}'\"\n        end\n      end\n    end\n  end\n\n\u6570\u5024\u53c2\u7167\u306f\u4fbf\u5229\u3002\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u30e2\u30fc\u30c9\u306b\u5165\u308b\u6642\u306b\u3001\u7406\u7531\u3092\u5f15\u6570\u306b\u6e21\u3059\u3053\u3068\u304c\u3067\u304d\u308b gem \u304c\u3042\u308b\n[biola/turnout](https://github.com/biola/turnout)\n\n```\nrake maintenance:start reason=\"\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306e\u7d42\u4e86\u306f19\u6642\u3092\u4e88\u5b9a\u3057\u3066\u304a\u308a\u307e\u3059\"\n```\n\n\u3053\u308c\u3092 capistrano \u7d4c\u7531\u3067\u5b9f\u884c\u3067\u304d\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3002\n\n```rb\nnamespace :maintenance do\n  task :start, :reason do |_, args|\n    reason = args[:reason]\n    on release_roles :all do\n      within release_path do\n        with rails_env: fetch(:rails_env) do\n          execute :rake, \"maintenance:start reason='#{reason}'\"\n        end\n      end\n    end\n  end\nend\n```\n\n\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u3002\n\n```\nSSHKit::Runner::ExecuteError: Exception while executing as ****: incompatible character encodings: ASCII-8BIT and UTF-8\n```\n\n\u3069\u3046\u3084\u3089\u65e5\u672c\u8a9e(UTF-8)\u3092\u4f7f\u3048\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u306a\u306e\u3067\u3001\u6570\u5024\u53c2\u7167\u306b\u5909\u63db\u3057\u3066\u6e21\u3059\u3053\u3068\u306b\u3057\u305f\u3002\n\u4f7f\u3063\u305f gem \u306f [threedaymonk/htmlentities](https://github.com/threedaymonk/htmlentities)\n\n```rb\nnamespace :maintenance do\n  task :start, :reason do |_, args|\n    require \"htmlentities\"\n    reason = HTMLEntities.new.encode(args[:reason], :hexadecimal) if args[:reason]\n    on release_roles :all do\n      within release_path do\n        with rails_env: fetch(:rails_env) do\n          execute :rake, \"maintenance:start reason='#{reason}'\"\n        end\n      end\n    end\n  end\n```\n\n\u6570\u5024\u53c2\u7167\u306f\u4fbf\u5229\u3002\n", "tags": ["capistrano3"]}