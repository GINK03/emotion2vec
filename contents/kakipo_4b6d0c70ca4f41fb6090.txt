{"context": " More than 1 year has passed since last update.\n\n\u80cc\u666f\nRails 4.1 \u3088\u308a ActiveRecord::Enum \u304c\u5229\u7528\u53ef\u80fd\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308a\u4ee5\u4e0b\u306e\u69d8\u306a\u8a18\u8ff0\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\nclass User < ActiveRecord::Base\n\n  enum role: [:general, :admin]\n\n  ...\nend\n\n# role \u304c admin \u306a\u30e6\u30fc\u30b6\u3092\u53d6\u5f97\u3059\u308b\nuser = User.admin.first!\n\n# admin \u304b\u3069\u3046\u304b\nuser.admin?\n\n# role \u3092\u78ba\u8a8d\nuser.role # => \"general\"\n\n# role \u3092 admin \u306b\u5909\u66f4\nuser.admin!\n\n# role \u306e\u53d6\u308a\u3046\u308b\u5024\u3092\u78ba\u8a8d\nUser.roles # => {\"general\"=>0, \"admin\"=>1}\n\n\u3053\u308c\u307e\u3067\u533a\u5206\u5024\u3068\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u305f\u5024\u304c\u7c21\u5358\u306b\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u30cf\u30c3\u30d4\u30fc\u3067\u3059\u3002\n\n\u554f\u984c\n\u3057\u304b\u3057\u3001\u3053\u308c\u3089\u306e\u5024\u3092 form \u7d4c\u7531\u3067\u5909\u66f4\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3084\u3084\u3053\u3057\u3044\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n= simple_form_for @user, ... do |f|\n  = f.input :role, collection: User.roles\n  = f.input :name\n\n\nsubmit \u3067 ArgumentError\n\ni18n \u306f\u3069\u3046\u3059\u308b\uff1f\n\n\n\u539f\u56e0\n\uff08\u4eca\u306e\u3068\u3053\u308d\uff09ActiveRecord::Enum \u306f\u5185\u90e8\u7684\u306b\u5229\u7528\u3059\u308b\u5024\u306e\u305f\u3081\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3002\n\n\u5bfe\u5fdc\u6848\n\n\u68481: \u30b3\u30a2\u306e\u5bfe\u5fdc\u5f85\u3061\nActiveRecord::Enum \u306f\u5185\u90e8\u3067\u5229\u7528\u3059\u308b\u9805\u76ee\u306b\u306e\u307f\u5229\u7528\u3057\u3001\n\u30e6\u30fc\u30b6\u304b\u3089\u306e\u5909\u66f4\u306b\u306f\u4f7f\u308f\u306a\u3044\u3002\uff08\u2252View \u3092\u901a\u3058\u3066\u5909\u66f4\u3057\u306a\u3044\uff09\n\u4f7f\u3044\u30c9\u30b3\u30ed\u304c\u3061\u3087\u3063\u3068\u96e3\u3057\u3044\u3067\u3059\u306d\u3002\n\u30b3\u30a2\u3067\u5bfe\u5fdc\u3059\u308b\u304b\u3082\u672a\u5b9a\u306a\u3088\u3046\u3067\u3059\u3002\n\n\u68482: enum_help \u3092\u5229\u7528\u3059\u308b\nenum_help \u3092\u4f7f\u3046\u3068 form \u306e\u554f\u984c\u3082 i18n \u306e\u554f\u984c\u3082\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\n\u53c2\u8003\n\nActiveRecord enum: use validation if exists instead of raising ArgumentError \u00b7 Issue #13971 \u00b7 rails/rails\nI18n broken for enums? \u00b7 Issue #1063 \u00b7 plataformatec/simple_form\nzmbacker/enum_help\n\n\u80cc\u666f\n=====\n\nRails 4.1 \u3088\u308a `ActiveRecord::Enum` \u304c\u5229\u7528\u53ef\u80fd\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308a\u4ee5\u4e0b\u306e\u69d8\u306a\u8a18\u8ff0\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\n\n```\nclass User < ActiveRecord::Base\n\n  enum role: [:general, :admin]\n\n  ...\nend\n\n# role \u304c admin \u306a\u30e6\u30fc\u30b6\u3092\u53d6\u5f97\u3059\u308b\nuser = User.admin.first!\n \n# admin \u304b\u3069\u3046\u304b\nuser.admin?\n \n# role \u3092\u78ba\u8a8d\nuser.role # => \"general\"\n \n# role \u3092 admin \u306b\u5909\u66f4\nuser.admin!\n \n# role \u306e\u53d6\u308a\u3046\u308b\u5024\u3092\u78ba\u8a8d\nUser.roles # => {\"general\"=>0, \"admin\"=>1}\n```\n\n\u3053\u308c\u307e\u3067\u533a\u5206\u5024\u3068\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u305f\u5024\u304c\u7c21\u5358\u306b\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u30cf\u30c3\u30d4\u30fc\u3067\u3059\u3002\n\n\u554f\u984c\n=====\n\n\u3057\u304b\u3057\u3001\u3053\u308c\u3089\u306e\u5024\u3092 form \u7d4c\u7531\u3067\u5909\u66f4\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3084\u3084\u3053\u3057\u3044\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n= simple_form_for @user, ... do |f|\n  = f.input :role, collection: User.roles\n  = f.input :name\n```\n\n- submit \u3067 `ArgumentError`\n- i18n \u306f\u3069\u3046\u3059\u308b\uff1f\n\n\u539f\u56e0\n=====\n\n\uff08\u4eca\u306e\u3068\u3053\u308d\uff09`ActiveRecord::Enum` \u306f\u5185\u90e8\u7684\u306b\u5229\u7528\u3059\u308b\u5024\u306e\u305f\u3081\u306b\u8a2d\u8a08\u3055\u308c\u3066\u3044\u308b\u307f\u305f\u3044\u3002\n\n\n\u5bfe\u5fdc\u6848\n=====\n\n\u68481: \u30b3\u30a2\u306e\u5bfe\u5fdc\u5f85\u3061\n-----\n\n`ActiveRecord::Enum` \u306f\u5185\u90e8\u3067\u5229\u7528\u3059\u308b\u9805\u76ee\u306b\u306e\u307f\u5229\u7528\u3057\u3001\n\u30e6\u30fc\u30b6\u304b\u3089\u306e\u5909\u66f4\u306b\u306f\u4f7f\u308f\u306a\u3044\u3002\uff08\u2252View \u3092\u901a\u3058\u3066\u5909\u66f4\u3057\u306a\u3044\uff09\n\n\u4f7f\u3044\u30c9\u30b3\u30ed\u304c\u3061\u3087\u3063\u3068\u96e3\u3057\u3044\u3067\u3059\u306d\u3002\n\n\u30b3\u30a2\u3067\u5bfe\u5fdc\u3059\u308b\u304b\u3082\u672a\u5b9a\u306a\u3088\u3046\u3067\u3059\u3002\n\n\u68482: enum_help \u3092\u5229\u7528\u3059\u308b\n-----\n\n[enum_help](https://github.com/zmbacker/enum_help) \u3092\u4f7f\u3046\u3068 form \u306e\u554f\u984c\u3082 i18n \u306e\u554f\u984c\u3082\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\n\n\u53c2\u8003\n=====\n\n- [ActiveRecord enum: use validation if exists instead of raising ArgumentError \u00b7 Issue #13971 \u00b7 rails/rails](https://github.com/rails/rails/issues/13971#issuecomment-34530922)\n- [I18n broken for enums? \u00b7 Issue #1063 \u00b7 plataformatec/simple_form](https://github.com/plataformatec/simple_form/issues/1063)\n- [zmbacker/enum_help](https://github.com/zmbacker/enum_help)\n", "tags": ["Rails4", "simple_form"]}