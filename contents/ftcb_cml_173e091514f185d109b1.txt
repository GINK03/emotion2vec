{"tags": ["vps", "\u3055\u304f\u3089VPS"], "context": "\u3055\u304f\u3089\u306eVPS\u3092\u501f\u308a\u307e\u3057\u305f\u3002\n\u521d\u671f\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n\u3084\u3063\u305f\u3053\u3068\u4e00\u89a7\n\n\u3055\u304f\u3089VPS\u306e\u8d77\u52d5\n\u57fa\u672c\u8a2d\u5b9a\n\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306e\u8a2d\u5b9a\n\u8a8d\u8a3c\u9375\u306e\u8a2d\u5b9a\nSSH\u306e\u8a2d\u5b9a\n\u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\nWeb\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\nPHP\u306e\u8a2d\u5b9a\nMySQL\u306e\u8a2d\u5b9a\n\n\n1.\u3055\u304f\u3089VPS\u306e\u8d77\u52d5\nVPS\u7533\u3057\u8fbc\u307f\u304b\u3089\u8d77\u52d5\u307e\u3067\n\n\u7533\u3057\u8fbc\u307f\n\u3055\u304f\u3089\u306eVPS\n\u3053\u3053\u304b\u3089\u7533\u3057\u8fbc\u3080\n\u7533\u3057\u8fbc\u3080\u3068\u6570\u5206\u5f8c\u306b [\u3055\u304f\u3089\u306eVPS] \u4eee\u767b\u9332\u5b8c\u4e86\u306e\u304a\u77e5\u3089\u305b \u3068\u3044\u3046\u30e1\u30fc\u30eb\u304c\u5c4a\u304f\u3002\n\u30d1\u30b9\u30ef\u30fc\u30c9\u3084IP\u30a2\u30c9\u30ec\u30b9\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n\nVPS\u306e\u8d77\u52d5\n\u5148\u307b\u3069\u306e\u30e1\u30fc\u30eb\u306e\u60c5\u5831\u3092\u5143\u306b\u30ed\u30b0\u30a4\u30f3\u3092\u6e08\u307e\u305b\u308b\u3002\n\nIP\u30a2\u30c9\u30ec\u30b9\n\u30d1\u30b9\u30ef\u30fc\u30c9\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u306eURL\n\nVPS\u306f\u521d\u671f\u72b6\u614b\u3060\u3068\u505c\u6b62\u3057\u3066\u3044\u308b\u3002\u7a3c\u52d5\u3055\u305b\u308b\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u306b\u8d77\u52d5\u3068\u66f8\u304b\u308c\u3066\u308b\u30dc\u30bf\u30f3\u304c\u3042\u308b\u306e\u3067\u62bc\u3059\u3002\n\u300c\u505c\u6b62\u4e2d\u300d\u304c\u300c\u7a3c\u50cd\u4e2d\u300d\u306b\u5909\u308f\u308c\u3070VPS\u306e\u8d77\u52d5\u306f\u6210\u529f\u3067\u3059\u3002\n\n2.\u57fa\u672c\u8a2d\u5b9a\n\u3053\u3053\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u6e96\u5099\u3059\u308b\u3002IP\u30a2\u30c9\u30ec\u30b9\u7b49\u3092\u3057\u3066VPS\u306b\u63a5\u7d9a\u3059\u308b\u3002\n\u79c1\u306fPuTTY \u3054\u3063\u305f\u716e\u7248\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u6700\u65b0\u7248\u306b\u66f4\u65b0\n$ yum update\n\nyum\u3068\u306fCentOS\u306a\u3069\u3067\u5229\u7528\u3055\u308c\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb\u3067\u3059\u3002\nyum update\u3067VPS\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u6700\u65b0\u306e\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\n\u66f4\u65b0\u304c\u7121\u3051\u308c\u3070\u4ee5\u4e0b\u306e\u8868\u793a\u304c\u3055\u308c\u308b\u3002\nNo Packages marked for Update\n\n\u3042\u308b\u5834\u5408\u306f(y/n)\u3067\u805e\u304b\u308c\u308b\u3002y\u3067\u66f4\u65b0\u3092\u304b\u3051\u308b\u3002\n\n\u65e5\u672c\u8a9e\u5316\n$ vim /etc/sysconfig/i18n\n\nLANG\u306e\u5024\u3092\u5909\u3048\u308b\u3002\nLANG=\"ja_JP.UTF-8\"\n\n\u53cd\u6620\u306e\u305f\u3081\u3001\u4e00\u5ea6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n3.\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306e\u8a2d\u5b9a\n\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u3002\n$ useradd \u30e6\u30fc\u30b6\u30fc\u540d\n$ passwd \u30d1\u30b9\u30ef\u30fc\u30c9\n\n\nsudo\u6a29\u9650\u3092\u4e0e\u3048\u308b\nsudo\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u5225\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\nroot\u6a29\u9650\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u3092wheel\u30b0\u30eb\u30fc\u30d7\u306b\u5909\u66f4\u3059\u308b\n\u3053\u306ewheel\u30b0\u30eb\u30fc\u30d7\u304csudo\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n$ usermod -G wheel \u30e6\u30fc\u30b6\u30fc\u540d\n\nsudoers\u30d5\u30a1\u30a4\u30eb(sudo\u5468\u308a\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb)\u3092\u7de8\u96c6\u3059\u308b\u3002\n$ visudo\n\n\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3059\n#%wheel        ALL=(ALL)       ALL\n\u2193\n%wheel        ALL=(ALL)       ALL\n\n\u4fdd\u5b58\u3057\u3066\u8a2d\u5b9a\u7d42\u4e86\n\u8ffd\u52a0\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308c\u3070\u6210\u529f\u3067\u3059\n\n4.\u8a8d\u8a3c\u9375\u306e\u8a2d\u5b9a\n\u516c\u958b\u9375\u3092\u5165\u308c\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308b\n$ mkdir ~/.ssh\n$ chmod 700 ~/.ssh\n\n\u516c\u958b\u9375\u30fb\u79d8\u5bc6\u9375\u3092\u751f\u6210\u3059\u308b\u3001\u751f\u6210\u65b9\u6cd5\u306f\u74b0\u5883\u306b\u3088\u3063\u3066\u5909\u308f\u308b\u305f\u3081\u5272\u611b\u3057\u307e\u3059\u3002\n\u79c1\u306fPutty\u306b\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u9375\u751f\u6210\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\u751f\u6210\u3057\u305f\u516c\u958b\u9375\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fdd\u5b58\u3059\u308b\u3002\n\u79d8\u5bc6\u9375\u306f\u30ed\u30fc\u30ab\u30eb\u3067\u4fdd\u6301\u3059\u308b\u3002\n~/.ssh/authorized_keys\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5909\u66f4\n$ chmod 600 ~/.ssh/authorized_keys\n\n\u8a2d\u5b9a\u3057\u305f\u9375\u8a8d\u8a3c\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n5.SSH\u306e\u8a2d\u5b9a\n\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u3060\u3051\u3067\u306froot\u30ed\u30b0\u30a4\u30f3\u7b49\u3067\u304d\u3066\u3057\u307e\u3046\u3002\n\u3055\u3089\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u9ad8\u3081\u308b\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4\nroot\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n\nroot\u6a29\u9650\u3067\u306e\u51e6\u7406\u304c\u7d9a\u304f\u306e\u3067\u5909\u66f4\u3059\u308b\u3002\n$ sudo -s\n\nsshd_config\u3092\u7de8\u96c6\u3059\u308b\u3002\nSSH\u306e\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n$ vim /etc/ssh/sshd_config\n\n\n\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4\n\u30dd\u30fc\u30c8\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306722\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u3002\n\u305d\u306e\u305f\u3081\u653b\u6483\u306e\u5bfe\u8c61\u306b\u306a\u308a\u3084\u3059\u3044\u3067\u3059\u30021024\uff5e65535\u307e\u3067\u306e\u7bc4\u56f2\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n/Port\u3067\u691c\u7d22\u3057\u3001\u7de8\u96c6\n#Port 22\n\u2193\nPort 1024\uff5e65535\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\nPasswordAuthentication yes\n\u2193\nPasswordAuthentication no\n\n\nroot\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n#PermitRootLogin yes\n\u2193\nPermitRootLogin no\n\n\u3053\u3053\u307e\u3067\u8a2d\u5b9a\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u7d42\u4e86\u3057\u3001sshd\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n$ service sshd restart\n\nOK\u3068\u51fa\u308c\u3070\u8a2d\u5b9a\u5b8c\u4e86\u3067\u3059\u3002\n\n6.\u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\niptables\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u3053\u308c\u306fLinux\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u578b\u306e\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u6a5f\u80fd\u3067\u3059\u3002\n\u65b0\u898f\u4f5c\u6210\u3057\u8a18\u8ff0\u3057\u307e\u3059\u3002\n$ vim /etc/sysconfig/iptables\n\n\u4f8b\n*filter\n:INPUT    DROP    [0:0]\n:FORWARD  DROP    [0:0]\n:OUTPUT   ACCEPT  [0:0]\n:SERVICES -       [0:0]\n-A INPUT -i lo -j ACCEPT\n-A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/s --limit-burst 4  -j ACCEPT\n-A INPUT -p tcp -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A INPUT -p tcp -m state --state NEW -j SERVICES\n-A INPUT -p udp --sport 53 -j ACCEPT\n-A INPUT -p udp --sport 123 --dport 123 -j ACCEPT\n-A SERVICES -p tcp --dport 80 -j ACCEPT\n-A SERVICES -p tcp --dport 443 -j ACCEPT\n-A SERVICES -p tcp --dport (\u4e0a\u3067\u8a2d\u5b9a\u3057\u305f\u30dd\u30fc\u30c8\u756a\u53f7) -j ACCEPT\n\nCOMMIT\n\niptables\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\n$ service iptables restart\n\nOK\u304c\u51fa\u308c\u3070\u8a2d\u5b9a\u5b8c\u4e86\u3067\u3059\u3002\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\u3092\u3059\u308b\u3002\n$ iptables -L\n\n\u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u306f\u3053\u308c\u3067\u7d42\u4e86\u3067\u3059\u3002\n\n7.Web\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\nApache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nCentOS\u3067\u306fhttpd\u306fApache\u306e\u3053\u3068\u3092\u6307\u3057\u307e\u3059\u3002\n$ yum install httpd\n\n\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n$ chkconfig httpd on\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n$ vim /etc/httpd/conf/httpd.conf\n\n3\u7b87\u6240\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\nServerTokens OS\n\u2193\nServerTokens Prod\n\nServerSignature On\n\u2193\nServerSignature Off\n\nOptions Indexes FollowSymLinks\n\u2193\nOptions -Indexes FollowSymLinks\n\n\u8a2d\u5b9a\u304c\u6b63\u3057\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u8d77\u52d5\u3059\u308b\u3002\n$ service httpd configtest\n$ service httpd start\n\n\u30d6\u30e9\u30a6\u30b6\u3067VPS\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3001Apache Test Page\u3068\u8868\u793a\u3055\u308c\u308c\u3070Web\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u306f\u6210\u529f\u3067\u3059\u3002\n\n8.PHP\u306e\u8a2d\u5b9a\nPHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ yum install php php-devel php-mysql php-mbstring php-gd\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u3002\n$ vim /etc/php.ini\n\n\u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u51fa\u529b\u5834\u6240\u3092\u308f\u304b\u308a\u3084\u3059\u3044\u5834\u6240\u306b\u5909\u66f4\n;error_log = php_errors.log\n\u2193\nerror_log = /var/log/php.log\n\n\u65e5\u672c\u8a9e\u306b\u3059\u308b\u8a2d\u5b9a\n;mbstring.language = Japanese\n\u2193\nmbstring.language = Japanese\n\n;mbstring.internal_encoding = EUC-JP\n\u2193\nmbstring.internal_encoding = UTF-8\n\n;mbstring.http_input = auto\n\u2193\nmbstring.http_input = auto\n\n;expose_php = On\n\u2193\nexpose_php = Off\n\n\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306e\u8a2d\u5b9a\n;date.timezone = \n\u2193\ndate.timezone = Asia/Tokyo\n\n\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u3001httpd\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n$ service httpd restart\n\nOK\u304c\u51fa\u308c\u3070PHP\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\n\n9.MySQL\u306e\u8a2d\u5b9a\nMySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ yum install mysql-server\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u3002\n$ vim /etc/my.cnf\n\n\u6587\u5b57\u30b3\u30fc\u30c9\u3092UTF8\u306b\u3059\u308b\u305f\u3081\u3001\u8ffd\u8a18\u3059\u308b\u3002\n[mysqld]\ncharacter-set-server = utf8\n\nMySQL\u3092\u8d77\u52d5\u3059\u308b\u3002\n$ service mysqld start\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n$ mysql_secure_installation\n\n\u3044\u304f\u3064\u304b\u8cea\u554f\u3092\u3055\u308c\u307e\u3059\u3002\n\nroot\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\nroot\u306e\u30ea\u30e2\u30fc\u30c8\u30db\u30b9\u30c8\u304b\u3089\u306e\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\ntest\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u524a\u9664\n\u533f\u540d\u30e6\u30fc\u30b6\u30fc\u306e\u524a\u9664\n\n\u57fa\u672c\u7684\u306by\u3067\u627f\u8afe\u3057\u306a\u304c\u3089\u9032\u307f\u307e\u3059\u3002\n\u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u3082\u3057\u307e\u3059\u3002\n$ chkconfig mysqld on\n\n\u52d5\u4f5c\u78ba\u8a8d\u3002\n\u5148\u307b\u3069\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\nmysql -u root -p\n\nMySQL\u304c\u7acb\u3061\u4e0a\u304c\u308c\u3070\u8a2d\u5b9a\u5b8c\u4e86\u3067\u3059\u3002\n\u3055\u304f\u3089\u306eVPS\u3092\u501f\u308a\u307e\u3057\u305f\u3002\n\u521d\u671f\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n# \u3084\u3063\u305f\u3053\u3068\u4e00\u89a7\n\n1. \u3055\u304f\u3089VPS\u306e\u8d77\u52d5\n2. \u57fa\u672c\u8a2d\u5b9a\n3. \u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306e\u8a2d\u5b9a\n4. \u8a8d\u8a3c\u9375\u306e\u8a2d\u5b9a\n5. SSH\u306e\u8a2d\u5b9a\n6. \u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\n7. Web\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n8. PHP\u306e\u8a2d\u5b9a\n9. MySQL\u306e\u8a2d\u5b9a\n\n## 1.\u3055\u304f\u3089VPS\u306e\u8d77\u52d5\n\nVPS\u7533\u3057\u8fbc\u307f\u304b\u3089\u8d77\u52d5\u307e\u3067\n\n### \u7533\u3057\u8fbc\u307f\n\n[\u3055\u304f\u3089\u306eVPS](http://vps.sakura.ad.jp/)\n\n\u3053\u3053\u304b\u3089\u7533\u3057\u8fbc\u3080\n\n\u7533\u3057\u8fbc\u3080\u3068\u6570\u5206\u5f8c\u306b [\u3055\u304f\u3089\u306eVPS] \u4eee\u767b\u9332\u5b8c\u4e86\u306e\u304a\u77e5\u3089\u305b \u3068\u3044\u3046\u30e1\u30fc\u30eb\u304c\u5c4a\u304f\u3002\n\u30d1\u30b9\u30ef\u30fc\u30c9\u3084IP\u30a2\u30c9\u30ec\u30b9\u304c\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n\n### VPS\u306e\u8d77\u52d5\n\n\u5148\u307b\u3069\u306e\u30e1\u30fc\u30eb\u306e\u60c5\u5831\u3092\u5143\u306b\u30ed\u30b0\u30a4\u30f3\u3092\u6e08\u307e\u305b\u308b\u3002\n\n- IP\u30a2\u30c9\u30ec\u30b9\n- \u30d1\u30b9\u30ef\u30fc\u30c9\n- \u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u306eURL\n\nVPS\u306f\u521d\u671f\u72b6\u614b\u3060\u3068\u505c\u6b62\u3057\u3066\u3044\u308b\u3002\u7a3c\u52d5\u3055\u305b\u308b\u3002\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb\u30d1\u30cd\u30eb\u306b\u8d77\u52d5\u3068\u66f8\u304b\u308c\u3066\u308b\u30dc\u30bf\u30f3\u304c\u3042\u308b\u306e\u3067\u62bc\u3059\u3002\n\n\u300c\u505c\u6b62\u4e2d\u300d\u304c\u300c\u7a3c\u50cd\u4e2d\u300d\u306b\u5909\u308f\u308c\u3070VPS\u306e\u8d77\u52d5\u306f\u6210\u529f\u3067\u3059\u3002\n\n## 2.\u57fa\u672c\u8a2d\u5b9a\n\n\u3053\u3053\u3067\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u6e96\u5099\u3059\u308b\u3002IP\u30a2\u30c9\u30ec\u30b9\u7b49\u3092\u3057\u3066VPS\u306b\u63a5\u7d9a\u3059\u308b\u3002\n\u79c1\u306f[PuTTY \u3054\u3063\u305f\u716e\u7248](http://yebisuya.dip.jp/Software/PuTTY/)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n### \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u6700\u65b0\u7248\u306b\u66f4\u65b0\n\n```bash\n$ yum update\n```\nyum\u3068\u306fCentOS\u306a\u3069\u3067\u5229\u7528\u3055\u308c\u308b\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb\u3067\u3059\u3002\nyum update\u3067VPS\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u6700\u65b0\u306e\u72b6\u614b\u306b\u3057\u307e\u3059\u3002\n\n\u66f4\u65b0\u304c\u7121\u3051\u308c\u3070\u4ee5\u4e0b\u306e\u8868\u793a\u304c\u3055\u308c\u308b\u3002\n\n```\nNo Packages marked for Update\n```\n\n\u3042\u308b\u5834\u5408\u306f(y/n)\u3067\u805e\u304b\u308c\u308b\u3002y\u3067\u66f4\u65b0\u3092\u304b\u3051\u308b\u3002\n\n### \u65e5\u672c\u8a9e\u5316\n\n```bash\n$ vim /etc/sysconfig/i18n\n```\nLANG\u306e\u5024\u3092\u5909\u3048\u308b\u3002\n\n```\nLANG=\"ja_JP.UTF-8\"\n```\n\n\u53cd\u6620\u306e\u305f\u3081\u3001\u4e00\u5ea6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n## 3.\u4f5c\u696d\u30e6\u30fc\u30b6\u30fc\u306e\u8a2d\u5b9a\n\n\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n```bash\n$ useradd \u30e6\u30fc\u30b6\u30fc\u540d\n$ passwd \u30d1\u30b9\u30ef\u30fc\u30c9\n```\n\n### sudo\u6a29\u9650\u3092\u4e0e\u3048\u308b\n\nsudo\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u5225\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\nroot\u6a29\u9650\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30e6\u30fc\u30b6\u3092wheel\u30b0\u30eb\u30fc\u30d7\u306b\u5909\u66f4\u3059\u308b\n\u3053\u306ewheel\u30b0\u30eb\u30fc\u30d7\u304csudo\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n```bash\n$ usermod -G wheel \u30e6\u30fc\u30b6\u30fc\u540d\n```\n\n\nsudoers\u30d5\u30a1\u30a4\u30eb(sudo\u5468\u308a\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb)\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n```bash\n$ visudo\n```\n\n\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3059\n\n```\n#%wheel        ALL=(ALL)       ALL\n\u2193\n%wheel        ALL=(ALL)       ALL\n```\n\n\u4fdd\u5b58\u3057\u3066\u8a2d\u5b9a\u7d42\u4e86\n\n\u8ffd\u52a0\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308c\u3070\u6210\u529f\u3067\u3059\n\n## 4.\u8a8d\u8a3c\u9375\u306e\u8a2d\u5b9a\n\n\u516c\u958b\u9375\u3092\u5165\u308c\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308b\n\n```bash\n$ mkdir ~/.ssh\n$ chmod 700 ~/.ssh\n```\n\n\u516c\u958b\u9375\u30fb\u79d8\u5bc6\u9375\u3092\u751f\u6210\u3059\u308b\u3001\u751f\u6210\u65b9\u6cd5\u306f\u74b0\u5883\u306b\u3088\u3063\u3066\u5909\u308f\u308b\u305f\u3081\u5272\u611b\u3057\u307e\u3059\u3002\n\u79c1\u306fPutty\u306b\u4ed8\u5c5e\u3057\u3066\u3044\u308b\u9375\u751f\u6210\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n\u751f\u6210\u3057\u305f\u516c\u958b\u9375\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fdd\u5b58\u3059\u308b\u3002\n\u79d8\u5bc6\u9375\u306f\u30ed\u30fc\u30ab\u30eb\u3067\u4fdd\u6301\u3059\u308b\u3002\n\n```bash\n~/.ssh/authorized_keys\n```\n\n\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u5909\u66f4\n\n```bash\n$ chmod 600 ~/.ssh/authorized_keys\n```\n\n\u8a2d\u5b9a\u3057\u305f\u9375\u8a8d\u8a3c\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n## 5.SSH\u306e\u8a2d\u5b9a\n\n\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u3060\u3051\u3067\u306froot\u30ed\u30b0\u30a4\u30f3\u7b49\u3067\u304d\u3066\u3057\u307e\u3046\u3002\n\u3055\u3089\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u9ad8\u3081\u308b\u8a2d\u5b9a\u3059\u308b\u3002\n\n- \u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4\n- root\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n- \u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n\n\nroot\u6a29\u9650\u3067\u306e\u51e6\u7406\u304c\u7d9a\u304f\u306e\u3067\u5909\u66f4\u3059\u308b\u3002\n\n```bash\n$ sudo -s\n```\n\nsshd_config\u3092\u7de8\u96c6\u3059\u308b\u3002\nSSH\u306e\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```bash\n$ vim /etc/ssh/sshd_config\n```\n\n### \u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4\n\u30dd\u30fc\u30c8\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306722\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u3002\n\u305d\u306e\u305f\u3081\u653b\u6483\u306e\u5bfe\u8c61\u306b\u306a\u308a\u3084\u3059\u3044\u3067\u3059\u30021024\uff5e65535\u307e\u3067\u306e\u7bc4\u56f2\u3067\u8a2d\u5b9a\u3059\u308b\u3002\n\n/Port\u3067\u691c\u7d22\u3057\u3001\u7de8\u96c6\n\n```\n#Port 22\n\u2193\nPort 1024\uff5e65535\n```\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n\n```\nPasswordAuthentication yes\n\u2193\nPasswordAuthentication no\n```\n\n### root\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n\n```\n#PermitRootLogin yes\n\u2193\nPermitRootLogin no\n```\n\n\u3053\u3053\u307e\u3067\u8a2d\u5b9a\u3057\u305f\u3089\u4fdd\u5b58\u3057\u3066\u7d42\u4e86\u3057\u3001sshd\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n```bash\n$ service sshd restart\n```\nOK\u3068\u51fa\u308c\u3070\u8a2d\u5b9a\u5b8c\u4e86\u3067\u3059\u3002\n\n## 6.\u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\n\niptables\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u3053\u308c\u306fLinux\u306b\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u30d1\u30b1\u30c3\u30c8\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u578b\u306e\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u6a5f\u80fd\u3067\u3059\u3002\n\n\u65b0\u898f\u4f5c\u6210\u3057\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```bash\n$ vim /etc/sysconfig/iptables\n```\n\n\u4f8b\n\n```\n*filter\n:INPUT    DROP    [0:0]\n:FORWARD  DROP    [0:0]\n:OUTPUT   ACCEPT  [0:0]\n:SERVICES -       [0:0]\n-A INPUT -i lo -j ACCEPT\n-A INPUT -p icmp --icmp-type echo-request -m limit --limit 1/s --limit-burst 4  -j ACCEPT\n-A INPUT -p tcp -m state --state ESTABLISHED,RELATED -j ACCEPT\n-A INPUT -p tcp -m state --state NEW -j SERVICES\n-A INPUT -p udp --sport 53 -j ACCEPT\n-A INPUT -p udp --sport 123 --dport 123 -j ACCEPT\n-A SERVICES -p tcp --dport 80 -j ACCEPT\n-A SERVICES -p tcp --dport 443 -j ACCEPT\n-A SERVICES -p tcp --dport (\u4e0a\u3067\u8a2d\u5b9a\u3057\u305f\u30dd\u30fc\u30c8\u756a\u53f7) -j ACCEPT\n\nCOMMIT\n```\n\niptables\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\u3002\n\n```bash\n$ service iptables restart\n```\n\nOK\u304c\u51fa\u308c\u3070\u8a2d\u5b9a\u5b8c\u4e86\u3067\u3059\u3002\n\n\u8a2d\u5b9a\u306e\u78ba\u8a8d\u3092\u3059\u308b\u3002\n\n```bash\n$ iptables -L\n```\n\n\u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u306f\u3053\u308c\u3067\u7d42\u4e86\u3067\u3059\u3002\n\n## 7.Web\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n\nApache\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\nCentOS\u3067\u306fhttpd\u306fApache\u306e\u3053\u3068\u3092\u6307\u3057\u307e\u3059\u3002\n\n```bash\n$ yum install httpd\n```\n\n\u81ea\u52d5\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\n```bash\n$ chkconfig httpd on\n```\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n```bash\n$ vim /etc/httpd/conf/httpd.conf\n```\n\n3\u7b87\u6240\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```\nServerTokens OS\n\u2193\nServerTokens Prod\n```\n```\nServerSignature On\n\u2193\nServerSignature Off\n```\n\n```\nOptions Indexes FollowSymLinks\n\u2193\nOptions -Indexes FollowSymLinks\n```\n\n\u8a2d\u5b9a\u304c\u6b63\u3057\u3044\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u8d77\u52d5\u3059\u308b\u3002\n\n```bash\n$ service httpd configtest\n$ service httpd start\n```\n\n\u30d6\u30e9\u30a6\u30b6\u3067VPS\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3001Apache Test Page\u3068\u8868\u793a\u3055\u308c\u308c\u3070Web\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\u306f\u6210\u529f\u3067\u3059\u3002\n\n\n## 8.PHP\u306e\u8a2d\u5b9a\n\nPHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\n$ yum install php php-devel php-mysql php-mbstring php-gd\n```\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n```bash\n$ vim /etc/php.ini\n```\n\n\u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u51fa\u529b\u5834\u6240\u3092\u308f\u304b\u308a\u3084\u3059\u3044\u5834\u6240\u306b\u5909\u66f4\n\n```\n;error_log = php_errors.log\n\u2193\nerror_log = /var/log/php.log\n```\n\n\u65e5\u672c\u8a9e\u306b\u3059\u308b\u8a2d\u5b9a\n\n```\n;mbstring.language = Japanese\n\u2193\nmbstring.language = Japanese\n```\n\n```\n;mbstring.internal_encoding = EUC-JP\n\u2193\nmbstring.internal_encoding = UTF-8\n```\n\n```\n;mbstring.http_input = auto\n\u2193\nmbstring.http_input = auto\n```\n\n```\n;expose_php = On\n\u2193\nexpose_php = Off\n```\n\n\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u306e\u8a2d\u5b9a\n\n```\n;date.timezone = \n\u2193\ndate.timezone = Asia/Tokyo\n```\n\n\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u3001httpd\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n```bash\n$ service httpd restart\n```\n\nOK\u304c\u51fa\u308c\u3070PHP\u306e\u8a2d\u5b9a\u306f\u5b8c\u4e86\u3067\u3059\n\n## 9.MySQL\u306e\u8a2d\u5b9a\n\nMySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\n$ yum install mysql-server\n```\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n```bash\n$ vim /etc/my.cnf\n```\n\n\u6587\u5b57\u30b3\u30fc\u30c9\u3092UTF8\u306b\u3059\u308b\u305f\u3081\u3001\u8ffd\u8a18\u3059\u308b\u3002\n\n```\n[mysqld]\ncharacter-set-server = utf8\n```\n\nMySQL\u3092\u8d77\u52d5\u3059\u308b\u3002\n\n```bash\n$ service mysqld start\n```\n\n\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n```\n$ mysql_secure_installation\n```\n\n\u3044\u304f\u3064\u304b\u8cea\u554f\u3092\u3055\u308c\u307e\u3059\u3002\n\n- root\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5909\u66f4\n- root\u306e\u30ea\u30e2\u30fc\u30c8\u30db\u30b9\u30c8\u304b\u3089\u306e\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n- test\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u524a\u9664\n- \u533f\u540d\u30e6\u30fc\u30b6\u30fc\u306e\u524a\u9664\n\n\u57fa\u672c\u7684\u306by\u3067\u627f\u8afe\u3057\u306a\u304c\u3089\u9032\u307f\u307e\u3059\u3002\n\n\u81ea\u52d5\u8d77\u52d5\u306e\u8a2d\u5b9a\u3082\u3057\u307e\u3059\u3002\n\n```\n$ chkconfig mysqld on\n```\n\n\u52d5\u4f5c\u78ba\u8a8d\u3002\n\u5148\u307b\u3069\u8a2d\u5b9a\u3057\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3002\n\n```\nmysql -u root -p\n```\n\nMySQL\u304c\u7acb\u3061\u4e0a\u304c\u308c\u3070\u8a2d\u5b9a\u5b8c\u4e86\u3067\u3059\u3002\n\n"}