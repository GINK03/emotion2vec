{"context": " More than 1 year has passed since last update.Https\u901a\u4fe1\u3059\u308b\u969b\u306b\u3001\u81ea\u524d\u3067\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u969b\u306e\u30e1\u30e2\n\n\u74b0\u5883\n\u30ec\u30ac\u30b7\u30fc\u306a\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3001Java\u306f1.7\u3067\u5b9f\u65bd\n[vagrant@vagrant-centos63 ~]$ java -version\njava version \"1.7.0_80\"\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\nJava HotSpot(TM) Client VM (build 24.80-b11, mixed mode, sharing)\n\n[vagrant@vagrant-centos63 ~]$ openssl version\nOpenSSL 1.0.0-fips 29 Mar 2010\n\n\n\u30ad\u30fc\u30b9\u30c8\u30a2\u306e\u4f5c\u6210\n\u767a\u884c\u3057\u305f\u79d8\u5bc6\u9375\u3084\u8a3c\u660e\u66f8\u30c1\u30a7\u30fc\u30f3\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306e\u30ad\u30fc\u30b9\u30c8\u30a2\u3092\u4f5c\u6210\u3059\u308b\u3002\n# keytool -genkeypair -alias testkeystore -keyalg RSA -keysize 2048 -keystore test.jks -storetype JKS -validity 3650 -keypass hogehoge -storepass hogehoge\n\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5f8c\u3001\u3044\u304f\u3064\u304b\u805e\u304b\u308c\u308b\u306e\u5185\u5bb9\u306e\u5fdc\u7b54\u30b5\u30f3\u30d7\u30eb\u3002\nWhat is your first and last name?\n\nWhat is the name of your organizational unit?\n\nWhat is the name of your organization?\n\nWhat is the name of your City or Locality?\n\nWhat is the name of your State or Province?\n\nWhat is the two-letter country code for this unit?\n\nIs CN=example.com, OU=TestUnit, O=Test, L=Chiyoda-ku, ST=Tokyo, C=JP correct?\n\n\n\u5b8c\u4e86\u3059\u308b\u3068\u3001test.jks\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n[root@vagrant-centos63 keytest]# ls\ntest.jks\n\n\nCA\u306e\u4f5c\u6210\n\u81ea\u524d\u306e\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001\u540c\u3058\u30b5\u30fc\u30d0\u306bCA\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n # cd /usr/local/ssl\n # ./CA.sh  -newca\n\n\n\u8a3c\u660e\u66f8\u8981\u6c42(CSR)\u306e\u4f5c\u6210\n\u8a8d\u8a3c\u5c40\u306b\u7f72\u540d\u3057\u3066\u3082\u3089\u3046\u305f\u3081\u306e\u8a3c\u660e\u66f8\u8981\u6c42\u3092\u4f5c\u6210\u3059\u308b\u3002\n # keytool -certreq -alias testkeystore -sigalg SHA256withRSA -file test.csr -keypass hogehoge -keystore test.jks -storepass hogehoge -storetype JKS\n\n\nCA\u3067\u306e\u7f72\u540d\nCA\u3067\u7f72\u540d\u3057\u3066\u3001\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3059\u308b\u3002\u3053\u306e\u969b\u306bsha2\u30cf\u30c3\u30b7\u30e5\u306e\u8a3c\u660e\u66f8\u306b\u3057\u3066\u3082\u3089\u3046\u3088\u3046\u306b\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3059\u308b\u3002\n# openssl ca -md sha256 -keyfile /usr/local/ssl/CA/private/cakey.pem -cert /usr/local/ssl/CA/cacert.pem -in test.csr -out testservercert.crt -days 1460 -policy policy_anything\n\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068testservercert.crt\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\u3053\u308c\u306e\u4e2d\u8eab\u3092\u3001-----BEGIN CERTIFICATE-----\u3068-----END CERTIFICATE-----\u3068\u305d\u306e\u4e2d\u8eab\u3060\u3051\u306b\u306a\u308b\u3088\u3046\u306b\u3001\u307b\u304b\u3092\u524a\u9664\u3057\u3066\u304a\u304f\u3002\n\nCA\u306e\u767b\u9332\n\u4f5c\u6210\u3057\u305f\u81ea\u524dCA\u3092\u767b\u9332\u3059\u308b\u3002\n# keytool -importcert -alias testRootCA -file /etc/pki/CA/certs/ca.crt -keystore test.jks -trustcacerts -storepass hogehoge\n\n\n\u8a3c\u660e\u66f8\u306e\u767b\u9332\n# keytool -import -alias test -file testservercert.crt -keypass hogehoge -keystore test.jks -storepass hogehoge\n\n\n\u8a3c\u660e\u66f8\u306e\u78ba\u8a8d\n # keytool -list -v -keystore /root/key4/test.jks -storepass hogehoge\n\nHttps\u901a\u4fe1\u3059\u308b\u969b\u306b\u3001\u81ea\u524d\u3067\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u969b\u306e\u30e1\u30e2\n\n## \u74b0\u5883\n\u30ec\u30ac\u30b7\u30fc\u306a\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3001Java\u306f1.7\u3067\u5b9f\u65bd\n\n```shell-session\n[vagrant@vagrant-centos63 ~]$ java -version\njava version \"1.7.0_80\"\nJava(TM) SE Runtime Environment (build 1.7.0_80-b15)\nJava HotSpot(TM) Client VM (build 24.80-b11, mixed mode, sharing)\n```\n\n```shell-session\n[vagrant@vagrant-centos63 ~]$ openssl version\nOpenSSL 1.0.0-fips 29 Mar 2010\n```\n\n\n## \u30ad\u30fc\u30b9\u30c8\u30a2\u306e\u4f5c\u6210\n\n\u767a\u884c\u3057\u305f\u79d8\u5bc6\u9375\u3084\u8a3c\u660e\u66f8\u30c1\u30a7\u30fc\u30f3\u3092\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306e\u30ad\u30fc\u30b9\u30c8\u30a2\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```\n# keytool -genkeypair -alias testkeystore -keyalg RSA -keysize 2048 -keystore test.jks -storetype JKS -validity 3650 -keypass hogehoge -storepass hogehoge\n```\n\n\u4e0a\u8a18\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5f8c\u3001\u3044\u304f\u3064\u304b\u805e\u304b\u308c\u308b\u306e\u5185\u5bb9\u306e\u5fdc\u7b54\u30b5\u30f3\u30d7\u30eb\u3002\n\n```shell-session\nWhat is your first and last name?\n  [Unknown]:  example.com\nWhat is the name of your organizational unit?\n  [Unknown]:  TestUnit\nWhat is the name of your organization?\n  [Unknown]:  Test\nWhat is the name of your City or Locality?\n  [Unknown]:  Chiyoda-ku\nWhat is the name of your State or Province?\n  [Unknown]:  Tokyo\nWhat is the two-letter country code for this unit?\n  [Unknown]:  JP\nIs CN=example.com, OU=TestUnit, O=Test, L=Chiyoda-ku, ST=Tokyo, C=JP correct?\n  [no]:  yes\n```\n\n\u5b8c\u4e86\u3059\u308b\u3068\u3001`test.jks`\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n```shell-session\n[root@vagrant-centos63 keytest]# ls\ntest.jks\n```\n\n## CA\u306e\u4f5c\u6210\n\u81ea\u524d\u306e\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306b\u3001\u540c\u3058\u30b5\u30fc\u30d0\u306bCA\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\u3002\n\n```\n # cd /usr/local/ssl\n # ./CA.sh  -newca\n```\n\n## \u8a3c\u660e\u66f8\u8981\u6c42(CSR)\u306e\u4f5c\u6210\n \u8a8d\u8a3c\u5c40\u306b\u7f72\u540d\u3057\u3066\u3082\u3089\u3046\u305f\u3081\u306e\u8a3c\u660e\u66f8\u8981\u6c42\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```\n # keytool -certreq -alias testkeystore -sigalg SHA256withRSA -file test.csr -keypass hogehoge -keystore test.jks -storepass hogehoge -storetype JKS\n```\n\n## CA\u3067\u306e\u7f72\u540d\nCA\u3067\u7f72\u540d\u3057\u3066\u3001\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3059\u308b\u3002\u3053\u306e\u969b\u306bsha2\u30cf\u30c3\u30b7\u30e5\u306e\u8a3c\u660e\u66f8\u306b\u3057\u3066\u3082\u3089\u3046\u3088\u3046\u306b\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n```\n# openssl ca -md sha256 -keyfile /usr/local/ssl/CA/private/cakey.pem -cert /usr/local/ssl/CA/cacert.pem -in test.csr -out testservercert.crt -days 1460 -policy policy_anything\n```\n\n\u4e0a\u8a18\u3092\u5b9f\u884c\u3059\u308b\u3068`testservercert.crt`\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\u3053\u308c\u306e\u4e2d\u8eab\u3092\u3001`-----BEGIN CERTIFICATE-----`\u3068`-----END CERTIFICATE-----`\u3068\u305d\u306e\u4e2d\u8eab\u3060\u3051\u306b\u306a\u308b\u3088\u3046\u306b\u3001\u307b\u304b\u3092\u524a\u9664\u3057\u3066\u304a\u304f\u3002\n\n## CA\u306e\u767b\u9332\n\u4f5c\u6210\u3057\u305f\u81ea\u524dCA\u3092\u767b\u9332\u3059\u308b\u3002\n\n```\n# keytool -importcert -alias testRootCA -file /etc/pki/CA/certs/ca.crt -keystore test.jks -trustcacerts -storepass hogehoge\n```\n\n## \u8a3c\u660e\u66f8\u306e\u767b\u9332\n\n```\n# keytool -import -alias test -file testservercert.crt -keypass hogehoge -keystore test.jks -storepass hogehoge\n```\n\n## \u8a3c\u660e\u66f8\u306e\u78ba\u8a8d\n\n``` \n # keytool -list -v -keystore /root/key4/test.jks -storepass hogehoge\n```\n\n\n\n", "tags": ["Java", "SSL"]}