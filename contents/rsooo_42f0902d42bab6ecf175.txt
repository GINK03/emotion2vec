{"context": "Linux\u30a4\u30f3\u30d5\u30e9SE\u306a\u3089\u77e5\u3063\u3066\u304a\u304f\u3079\u304d\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u306b\u95a2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002\n\u968f\u6642\u8ffd\u52a0(\u3059\u308b\u304b\u3082)\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u4f8b\u306fCentOS 6.3 \u3067\u78ba\u8a8d\u3057\u305f\u3082\u306e\u3002\n[root@localhost /]# cat /etc/issue\nCentOS release 6.3 (Final)\n\n\n\u7a7a\u304d\u30e1\u30e2\u30ea\u304c\u77e5\u308a\u305f\u3044\nfree\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\n# free\n             total       used       free     shared    buffers     cached\nMem:       1026876     974072      52804          0     202656     348008\n-/+ buffers/cache:     423408     603468\nSwap:      2048276         92    2048184\n\n\u3053\u3053\u3067\u6ce8\u610f\u306a\u306e\u306f\u3001Linux\u306f\u7a7a\u304d\u30e1\u30e2\u30ea\u3092buffer\u3068cache\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\n\u4e00\u898bfree\u306f\u5c11\u306a\u3044(\u4e0a\u8a18\u306e\u5834\u540852M)\u3068\u601d\u308f\u308c\u304c\u3061\u3060\u304c\u3001\u5b9f\u969b\u306b\u306fbuffer+cache\u3068\u3057\u3066\u78ba\u4fdd\u3055\u308c\u3066\u3044\u308b(\u4e0a\u8a18\u306e\u5834\u5408600M\u78ba\u4fdd\u3055\u308c\u3066\u3044\u308b)\n\n\u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u77e5\u308a\u305f\u3044\u3002\ndf\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\u57fa\u672c\u3067\u3059\u306d\u3002\n[root@localhost /]# df\n/dev/mapper/VolGroup-lv_root\n                      12941636   1851304  10432924  16% /\nFilesystem           1K-blocks      Used Available Use% Mounted on\ntmpfs                   510348         0    510348   0% /dev/shm\n/dev/sda1               495844     70443    399801  15% /boot\n/vagrant             488383484 421285716  67097768  87% /vagrant\n\n\u3061\u306a\u307f\u306b\u8868\u793a\u304c\u9577\u3044\u30682\u884c\u306b\u5206\u3051\u3066\u51fa\u529b\u3055\u308c\u308b\u306e\u3060\u3051\u3069\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u4f7f\u7528\u7387\u3092\u5b9a\u671f\u7684\u306b\u76e3\u8996\u3057\u305f\u3044\u3068\u304d\u306b\u975e\u5e38\u306b\u3081\u3093\u3069\u304f\u3055\u3044\u3002\u305d\u306e\u5834\u5408\u306fdf -P \u3092\u4f7f\u3048\u30701\u884c\u3067\u8868\u793a\u3055\u308c\u308b\u3002\n\ni\u30ce\u30fc\u30c9\u306e\u4f7f\u7528\u7387\u304c\u77e5\u308a\u305f\u3044\u3002\ndf -i \u3067\u8868\u793a\u3055\u308c\u308b\u3002\u30b5\u30a4\u30ba\u306e\u5c0f\u3055\u306a\u30d5\u30a1\u30a4\u30eb\u304c\u975e\u5e38\u306b\u5927\u91cf\u306b\u3042\u308b\u5834\u5408\u3001\u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u3042\u308b\u306e\u306b\u306a\u305c\u304b\u66f8\u304d\u8fbc\u307f\u306b\u5931\u6557\u3057\u305f\uff01\u306a\u3093\u3066\u3053\u3068\u304c\u767a\u751f\u3059\u308b\u3002\n[root@localhost /]# df -i\nFilesystem            Inodes   IUsed   IFree IUse% Mounted on\n/dev/mapper/VolGroup-lv_root\n                      822544   72999  749545    9% /\ntmpfs                 127587       1  127586    1% /dev/shm\n/dev/sda1             128016      44  127972    1% /boot\n/vagrant                1000       0    1000    0% /vagrant\n\n\n\u7279\u5b9a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u30c7\u30a3\u30b9\u30af\u306e\u4f7f\u7528\u91cf\u3092\u77e5\u308a\u305f\u3044\u3002\ndu \u3067\u78ba\u8a8d\u53ef\u80fd\u3002 \u7d50\u679c\u3092sort\u3057\u3066\u8868\u793a\u3057\u305f\u308a\u3059\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u3002\n[root@localhost /]# du -sk /var/* | sort -nr  | head -5\n43788   /var/cache\n42600   /var/lib\n2060    /var/log\n104     /var/run\n44      /var/spool\n\n\n\u7269\u7406\u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u77e5\u308a\u305f\u3044(LVM\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408)\ndf\u3067\u306f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f7f\u7528\u91cf\u304c\u5206\u304b\u308b\u304c\u3001\u7269\u7406\u30c7\u30a3\u30b9\u30af\u306b\u3069\u306e\u304f\u3089\u3044\u7a7a\u304d\u304c\u3042\u308b\u304b\n\u77e5\u308a\u305f\u3044\u5834\u5408\u306f\u3001pvdisplay\u3092\u4f7f\u7528\u3059\u308b\u3002\n[root@localhost /]# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/sda2\n  VG Name               VolGroup\n  PV Size               14.51 GiB / not usable 3.00 MiB\n  Allocatable           yes (but full)\n  PE Size               4.00 MiB\n  Total PE              3714\n  Free PE               0\n  Allocated PE          3714\n  PV UUID               d2cKaW-6Ir3-XKJ6-GN2K-xKr0-jqlL-Vu7Ev9\n\n\u3053\u3053\u306eFree PE * PE Size\u304c\u7a7a\u304d\u5bb9\u91cf\u306b\u76f8\u5f53\u3059\u308b\u3002(\u3053\u306e\u5834\u5408\u306f\u7a7a\u304d\u5bb9\u91cf\u306a\u3057)\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u62e1\u5f35\u4f5c\u696d\u306a\u3069\u3092\u884c\u3044\u305f\u3044\u969b\u306b\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u95a2\u3059\u308b\u305d\u306e\u4ed6\u306e\u64cd\u4f5c\u306fLVM\u5404\u7a2e\u64cd\u4f5c\u30b3\u30de\u30f3\u30c9\u3092\u53c2\u7167\u3002\n\nLISTEN\u3057\u3066\u3044\u308b\u30dd\u30fc\u30c8\u4e00\u89a7\u3092\u77e5\u308a\u305f\u3044\u3002\n[root@localhost fd]# netstat -an | grep LISTEN\ntcp        0      0 0.0.0.0:55118               0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:111                 0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN\n\n<\u30b3\u30e1\u30f3\u30c8\u306b\u3088\u308a\u8ffd\u8a18>\ngrep\u4f7f\u308f\u306a\u304f\u3066\u3082-l\u30aa\u30d7\u30b7\u30e7\u30f3\u3067LISTEN\u3057\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u307f\u8868\u793a\u53ef\u3002\n[root@localhost fd]# netstat -nlt \ntcp        0      0 0.0.0.0:111                 0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:42936               0.0.0.0:*                   LISTEN\n\n\n\u7279\u5b9a\u306e\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u77e5\u308a\u305f\u3044\u3002\nlsof\u3092\u4f7f\u3046\u3068\u7c21\u5358\u3002\n[root@localhost fd]# lsof -i:111\nCOMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\nrpcbind 1013  rpc    6u  IPv4   8479      0t0  UDP *:sunrpc\nrpcbind 1013  rpc    8u  IPv4   8482      0t0  TCP *:sunrpc (LISTEN)\nrpcbind 1013  rpc    9u  IPv6   8484      0t0  UDP *:sunrpc\nrpcbind 1013  rpc   11u  IPv6   8487      0t0  TCP *:sunrpc (LISTEN)\n\n\n\u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u77e5\u308a\u305f\u3044\nlsof\u306f\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5f15\u6570\u306b\u4e0e\u3048\u308b\u3068\u63b4\u3093\u3067\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8868\u793a\u3067\u304d\u308b\u3002\u4fbf\u5229\u3002\n[root@localhost fd]# lsof /var/log/messages\nCOMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME\nrsyslogd 990 root    1w   REG  253,0   462813 655345 /var/log/messages\n\nlsof\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u30de\u30b7\u30f3\u306e\u5834\u5408\u306ffuser\u3067\u3082OK\n[root@localhost /]# fuser /var/log/messages\n/var/log/messages:    1060\n\n\n\u30d7\u30ed\u30bb\u30b9\u304c\u63b4\u3093\u3067\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u304c\u77e5\u308a\u305f\u3044\u3002\nlsof -p <PID>\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n[root@localhost ~]# lsof -p 991\nCOMMAND  PID USER   FD   TYPE             DEVICE SIZE/OFF       NODE NAME\nrsyslogd 991 root  cwd    DIR              253,0     4096          2 /\nrsyslogd 991 root  rtd    DIR              253,0     4096          2 /\nrsyslogd 991 root  txt    REG              253,0   391968       6410 /sbin/rsyslogd\nrsyslogd 991 root  mem    REG              253,0    27232     391290 /lib64/rsyslog/imklog.so\n\u3000/* \u4e00\u90e8\u7701\u7565 */\nrsyslogd 991 root  mem    REG              253,0   154624     407189 /lib64/ld-2.12.so\nrsyslogd 991 root    0u  unix 0xffff880037aef3c0      0t0       8354 /dev/log\nrsyslogd 991 root    1w   REG              253,0   492990     655345 /var/log/messages\nrsyslogd 991 root    2w   REG              253,0    47992     655346 /var/log/secure\nrsyslogd 991 root    3r   REG                0,3        0 4026532037 /proc/kmsg\n\nlsof\u304c\u4f7f\u3048\u306a\u3051\u308c\u3070\u3001/proc/<PID>/fd \u4ee5\u4e0b\u3092\u898b\u3066\u3082\u3042\u308b\u7a0b\u5ea6\u78ba\u8a8d\u53ef\u80fd\u3002\n[root@localhost ~]# ll /proc/991/fd\ntotal 0\nlrwx------ 1 root root 64 May 24 03:39 0 -> socket:[8354]\nl-wx------ 1 root root 64 May 24 03:39 1 -> /var/log/messages\nl-wx------ 1 root root 64 May 24 03:39 2 -> /var/log/secure\nlr-x------ 1 root root 64 May 24 03:39 3 -> /proc/kmsg\n\n\n\u30d7\u30ed\u30bb\u30b9\u5185\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u6570\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3002\nps -L\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30b9\u30ec\u30c3\u30c9\u3092\u78ba\u8a8d\u53ef\u80fd\u3002\n[root@localhost ~]# ps aux -L\nUSER       PID   LWP %CPU NLWP %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n <\u4e2d\u7565>\nroot      1021  1021  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot      1021  1022  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot      1021  1024  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot      1021  1025  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\n[root@localhost ~]# ps aux -L | head -1\n\n\u540c\u3058PID\u3067\u8907\u6570\u306eLWP\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3067\u3042\u308c\u3070\u3001\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\n\u7a3c\u52d5\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u691c\u7d22\u3057\u305f\u3044\u3002\npgrep\u3092\u4f7f\u3048\u3070\u3001PID\u3068\u30d7\u30ed\u30bb\u30b9\u540d\u3092\u7c21\u5358\u306b\u691c\u7d22\u3067\u304d\u308b\u3002\nps -ef | grep ...\u3068\u304b\u3088\u308a\u624b\u3063\u53d6\u308a\u65e9\u3044\u3002\n[root@localhost ~]# pgrep -l syslog\n1060 rsyslogd\n\n\n\u30d7\u30ed\u30bb\u30b9\u306e\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3092\u78ba\u8a8d\u3057\u305f\u3044\npmap\u30b3\u30de\u30f3\u30c9\u3067\u305d\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u30e1\u30e2\u30ea\u72b6\u6cc1\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u30e1\u30e2\u30ea\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3084\u4f7f\u7528\u91cf\u306e\u78ba\u8a8d\u306e\u969b\u306b\u4f7f\u3048\u308b\u3002\n[root@localhost ~]# pmap -x 1298\n1298:   crond\nAddress           Kbytes     RSS   Dirty Mode   Mapping\n00007fa1b356e000      48      20       0 r-x--  libnss_files-2.12.so\n00007fa1b357a000    2048       0       0 -----  libnss_files-2.12.so\n (\u4e2d\u7565)\nffffffffff600000       4       0       0 r-x--    [ anon ]\n----------------  ------  ------  ------\ntotal kB          117208    1232     600```\n\n\u8868\u793a\u3055\u308c\u308b\u9805\u76ee\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\nAddress: \u30de\u30c3\u30d7\u306e\u958b\u59cb\u30a2\u30c9\u30ec\u30b9\nKbytes: \u4eee\u60f3\u30e1\u30e2\u30ea\u306e\u30de\u30c3\u30d7\u30b5\u30a4\u30ba(\u30ad\u30ed\u30d0\u30a4\u30c8\u5358\u4f4d)\nRSS: \u7269\u7406\u5e38\u99d0\u30e1\u30e2\u30ea\u306e\u30de\u30c3\u30d7\u30b5\u30a4\u30ba(\u30ad\u30ed\u30d0\u30a4\u30c8\u5358\u4f4d)\nMode: \u30de\u30c3\u30d7\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3: \u8aad\u8fbc\u307f\u3001\u66f8\u8fbc\u307f\u3001\u5b9f\u884c\u3001\u5171\u6709\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8(\u66f8\u304d\u8fbc\u307f\u6642\u30b3\u30d4\u30fc)\nMapping: \u30de\u30c3\u30d7\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u540d\u3001\u307e\u305f\u306f \u2019[ anon ]\u2019 \u3067\u52d5\u7684\u306b\u78ba\u4fdd\u3055\u308c\u305f\u30e1\u30e2\u30ea\u3001\u307e\u305f\u306f \u2019[ stack ]\u2019 \u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u30b9\u30bf\u30c3\u30af\nDevice: \u30c7\u30d0\u30a4\u30b9\u540d (\u30e1\u30b8\u30e3\u30fc:\u30de\u30a4\u30ca\u30fc)\n\n\n\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u3092\u624b\u3063\u53d6\u308a\u65e9\u304f\u77e5\u308a\u305f\u3044\u3002\ntop\u3067\u3082\u8868\u793a\u3055\u308c\u308b\u3051\u3069\u3001\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u3057\u3066\u305f\u308aCPU\u4f7f\u7528\u7387\u304c100%\u306e\u3068\u304d\u306f\u91cd\u3059\u304e\u3066top\u304c\u8d77\u52d5\u3057\u306a\u3044\u3068\u304d\u304c\u3042\u308b\u3002\n\u305d\u3093\u306a\u3068\u304d\u306fuptime\u306e\u307b\u3046\u304c\u65e9\u304f\u898b\u308c\u308b\u306e\u3067\u304a\u52e7\u3081\u3002\n[root@localhost ]# uptime\n 16:26:02 up  1:21,  1 user,  load average: 0.00, 0.00, 0.00\n\n\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u304c\u9ad8\u3044\u3068\u8a00\u3046\u3053\u3068\u306f\u3001CPU\u5f85\u3061\u304bIO\u5f85\u3061\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u591a\u3044\u3068\u8a00\u3046\u3053\u3068\u3002\n\u30b5\u30fc\u30d0\u304c\u9045\u3044\u306a\u3069\u306e\u554f\u984c\u304c\u898b\u53d7\u3051\u3089\u308c\u305f\u3089\u3001\u307e\u305a\u306f\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u3068\u826f\u3044\u3002\n\n\u30b7\u30b9\u30c6\u30e0\u306e\u7a3c\u52d5\u6642\u9593\u304c\u77e5\u308a\u305f\u3044\u3002\nuptime\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\n[root@localhost ~]# uptime\n 09:48:55 up 1 day, 16:20,  3 users,  load average: 0.04, 0.01, 0.00\n\n\u308d\u304f\u306b\u76e3\u8996\u3057\u3066\u3044\u306a\u3044\u30b5\u30fc\u30d0\u3092\u305a\u3063\u3068\u8d77\u52d5\u3057\u3066\u3044\u308b\u3068\u3042\u308b\u65e5\u7a81\u7136\u30ea\u30d6\u30fc\u30c8\u3057\u3066\u3044\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u305d\u3046\u3044\u3063\u305f\u4e8b\u8c61\u304c\u767a\u751f\u3057\u3066\u3044\u306a\u3044\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u4f7f\u3063\u305f\u308a\u3059\u308b\u3002\n\nCPU\u4f7f\u7528\u7387\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3057\u305f\u3044\u3002\nvmstat\u3067\u53d6\u308b\u306e\u304c\u4e00\u822c\u7684\u3002\n[root@localhost ~]# vmstat 5\nprocs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n 0  0      0 392708  10852 462084    0    0   162    12  162  285  2  0 96  1  0\n\nproc\u306e\u9805\u76ee\uff1a\n\nr\u3000\u2026\u3000\u5b9f\u884c\u53ef\u80fd\u3067\u3001\u300c\u5b9f\u884c\u30ad\u30e5\u30fc\u300d\u306b\u5165\u3063\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u6570\u3002\nb\u3000\u2026\u3000\u672c\u6765\u306f\u5b9f\u884c\u53ef\u80fd\u306a\u30d7\u30ed\u30bb\u30b9\u3067\u3042\u308b\u304c\u3001I/O\u5f85\u3061\u306a\u3069\u306e\u4f55\u3089\u304b\u306e\u7406\u7531\u3067\u5f85\u3061\u3068\u306a\u3063\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u6570\n\nb\u306e\u6570\u304c\u5927\u304d\u3044\u3068I/O\u8ca0\u8377\u7b49\u304c\u5927\u304d\u3044\u3053\u3068\u304c\u4e88\u60f3\u3055\u308c\u308b\u3002\nr\u304c\u5927\u304d\u3044\u3068CPU\u306e\u8ca0\u8377\u304c\u5927\u304d\u304f\u3001\u30e6\u30fc\u30b6\u306b\u9045\u3044\u3068\u611f\u3058\u3055\u305b\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\nsystem\u306e\u9805\u76ee\uff1a\n\nin 1\u79d2\u5f53\u305f\u308a\u306e\u5272\u308a\u8fbc\u307f\u306e\u56de\u6570\ncs 1\u79d2\u5f53\u305f\u308a\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u56de\u6570\n\ncpu\u306e\u9805\u76ee\uff1a\n\nus\u3000\u2026\u3000\u30e6\u30fc\u30b6\u30fc\u304c\u4f7f\u7528\u3057\u305fCPU\u306e\u5272\u5408\uff08%\uff09\nsy\u3000\u2026\u3000\u30b7\u30b9\u30c6\u30e0\u304c\u4f7f\u7528\u3057\u305fCPU\u306e\u5272\u5408\uff08%\uff09\nid\u3000\u2026\u3000CPU\u30a2\u30a4\u30c9\u30eb\u6642\u9593\u306e\u5272\u5408(100 - us - sy)\uff08%\uff09\nwa\u3000\u2026\u3000IO\u5f85\u3061\u6642\u9593\n\n\u3082\u3063\u3068\u8a73\u7d30\u304c\u77e5\u308a\u305f\u3044\u65b9\u306f\u4ee5\u4e0b\u3078\n\u53c2\u8003\uff1ahttp://www.fulldigit.net/content/view/54/6/\nsysstat\u304c\u5165\u3063\u3066\u3044\u308b\u306a\u3089\u3001sar -u <\u53d6\u5f97\u9593\u9694> \u3067\u3082\u53ef\u80fd\u3002\n[root@localhost ~]# sar -p 5\n04:38:27 PM     CPU     %user     %nice   %system   %iowait    %steal     %idle\n04:38:32 PM     all      0.00      0.00      0.00      0.00      0.00    100.00\n04:38:37 PM     all      0.00      0.00      0.20      0.00      0.00     99.80 \n\n\u5404CPU\u3054\u3068\u306e\u4ed8\u52a0\u3092\u77e5\u308a\u305f\u3044\u306a\u3089\u3001 sar -u -P ALL <\u53d6\u5f97\u9593\u9694> \u3092\u4f7f\u3046\u3002\n\n\u30c7\u30a3\u30b9\u30afI/O\u4f7f\u7528\u7387\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3057\u305f\u3044\u3002\nvmstat -d \u3067\u53d6\u5f97\u53ef\u80fd\n[root@localhost ~]# vmstat -d 5\ndisk- ------------reads------------ ------------writes----------- -----IO------\n       total merged sectors      ms  total merged sectors      ms    cur    sec\nloop7      0      0       0       0      0      0       0       0      0      0\nsr0        0      0       0       0      0      0       0       0      0      0\nsda     6753   1823  462434   56021   3086   2639   36562    9380      0     28\ndm-0    7228      0  453258   80149   5454      0   36544   16809      0     28\ndm-1     297      0    2376     619      0      0       0       0      0      0\n\nread/write\u306e\u9805\u76ee\uff1a\n\ntotal\u3000\u2026\u3000\u8aad\u307f\u66f8\u304d\u306b\u6210\u529f\u3057\u305f\u7dcf\u6570\nms\u3000\u2026\u3000\u8aad\u307f\u66f8\u304d\u306b\u4f7f\u7528\u3057\u305f\u6642\u9593\n\n\n\u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u306e\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306eCPU/\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u3092\u77e5\u308a\u305f\u3044\u3002\ntop -u\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3068\u4fbf\u5229\u3002\n[root@localhost ~]# top -u oracle\n 1773 oracle    20   0  608m  13m  12m S  0.0  1.4   0:01.83 oracle\n 1775 oracle    20   0  608m  13m  11m S  0.0  1.4   0:01.87 oracle\n /* \u7701\u7565 */\n\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u6b63\u5e38\u306b\u30d1\u30b1\u30c3\u30c8\u304c\u9001\u53d7\u4fe1\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u305f\u3044\u3002\nnetstat -i \u3067\u78ba\u8a8d\u53ef\u80fd\u3002\n[root@localhost ~]# netstat -i\nKernel Interface table\nIface       MTU Met    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg\neth0       1500   0     9020      0      0      0    11186      0      0      0 BMRU\nlo        16436   0     2823      0      0      0     2823      0      0      0 LRU\n\nRX\u304c\u53d7\u4fe1\u3001TX\u304c\u9001\u4fe1\u3002\n\nOK\u3000\u2026\u3000\u6b63\u5e38\u306b\u9001\u53d7\u4fe1\u3067\u304d\u305f\u30d1\u30b1\u30c3\u30c8\u6570\nERR\u3000\u2026\u3000\u9001\u53d7\u4fe1\u3067\u30a8\u30e9\u30fc\u3068\u306a\u3063\u305f\u30d1\u30b1\u30c3\u30c8\u6570\nDRP\u3000\u2026\u3000\u9001\u53d7\u4fe1\u6642\u306b\u7834\u68c4\u3057\u305f\u30d1\u30b1\u30c3\u30c8\u6570\nOVR\u3000\u2026\u3000\u9001\u53d7\u4fe1\u6642\u306b\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u3057\u305f\u30d1\u30b1\u30c3\u30c8\u6570\u3002\u53d7\u4fe1\u5074\u306e\u30d0\u30c3\u30d5\u30a1\u3092\u8d8a\u3048\u3066\u30d1\u30b1\u30c3\u30c8\u9001\u4fe1\u3055\u308c\u305f\u3068\u304d\n\u306a\u3069\u304c\u3053\u308c\u306b\u8a72\u5f53\u3059\u308b\u3002\n\n\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u901a\u4fe1\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u969b\u306b\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ec\u30d9\u30eb\u3067\u7570\u5e38\u304c\u3042\u3063\u305f\u304b\u3069\u3046\u304b\u306e\n\u78ba\u8a8d\u306b\u4f7f\u7528\u3067\u304d\u308b\u304b\u3082\u3002\n\n\u30e6\u30fc\u30b6\u306e\u30ed\u30b0\u30a4\u30f3\u5c65\u6b74\u304c\u77e5\u308a\u305f\u3044\n\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u306a\u3044\u3051\u3069\u3001\u5229\u7528\u8005\u304c\u3044\u3064\u306e\u307e\u306b\u304b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u60aa\u3055\u3057\u3066\u3044\u306a\u3044\u304b\u3069\u3046\u304b\u3092\n\u8abf\u3079\u308b\u3053\u3068\u306f\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3064\u3044\u3067\u306b\u8a18\u8f09\u3002\nlastlog\u304blast\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\nlastlog\u3067\u5404\u30e6\u30fc\u30b6\u304c\u6700\u5f8c\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u6642\u523b\u3092\u78ba\u8a8d\u3067\u304d\u3001last\u306f\u6700\u8fd1\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u30e6\u30fc\u30b6\u306e\u6642\u523b\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\n[root@localhost ~]# last | head -5\nroot     pts/1        10.0.2.2         Sun May 24 03:13   still logged in\nroot     pts/0        10.0.2.2         Sun May 24 03:04   still logged in\nreboot   system boot  2.6.32-279.5.2.e Sun May 24 01:04 - 04:18  (03:14)\nroot     pts/0        10.0.2.2         Sun May 17 15:06 - 17:18  (02:12)\nreboot   system boot  2.6.32-279.5.2.e Sun May 17 13:04 - 17:18  (04:13)\n\n[root@localhost ~]# lastlog -u root\nUsername         Port     From             Latest\nroot             pts/1    10.0.2.2         Sun May 24 03:13:15 +0200 2015```\n\n\n\u30d7\u30ed\u30bb\u30b9\u306e\u89aa\u5b50\u95a2\u4fc2\u304c\u77e5\u308a\u305f\u3044\npstree \u3092\u5b9f\u884c\u3059\u308b\u3068\u7c21\u5358\u306b\u308f\u304b\u308b\u3002\n[root@localhost ~]# pstree\ninit\u2500\u252c\u2500VBoxService\u2500\u2500\u25007*[{VBoxService}]\n     \u251c\u2500auditd\u2500\u2500\u2500{auditd}\n     \u251c\u2500crond\n     \u251c\u2500dhclient\n     \u251c\u2500fcoemon\n     \u251c\u2500lldpad\n     \u251c\u25006*[mingetty]\n     \u251c\u2500rpc.idmapd\n     \u251c\u2500rpc.statd\n     \u251c\u2500rpcbind\n     \u251c\u2500rsyslogd\u2500\u2500\u25003*[{rsyslogd}]\n     \u251c\u25002*[sendmail]\n     \u251c\u2500sshd\u2500\u2500\u2500sshd\u2500\u2500\u2500bash\u2500\u2500\u2500pstree\n     \u2514\u2500udevd\u2500\u2500\u25002*[udevd]\n\n\u4e0a\u8a18\u306e\u7d50\u679c\u3067\u306finit\u304b\u3089\u5404\u30d7\u30ed\u30bb\u30b9\u306e\u89aa\u5b50\u95a2\u4fc2\u304c\u308f\u304b\u308b\u3002\n// \u9593\u9055\u3044\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\nLinux\u30a4\u30f3\u30d5\u30e9SE\u306a\u3089\u77e5\u3063\u3066\u304a\u304f\u3079\u304d\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u306b\u95a2\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002\n\u968f\u6642\u8ffd\u52a0(\u3059\u308b\u304b\u3082)\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u4f8b\u306fCentOS 6.3 \u3067\u78ba\u8a8d\u3057\u305f\u3082\u306e\u3002\n\n```shell-session\n[root@localhost /]# cat /etc/issue\nCentOS release 6.3 (Final)\n```\n\n## \u7a7a\u304d\u30e1\u30e2\u30ea\u304c\u77e5\u308a\u305f\u3044\n\n`free`\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\n\n```shell-session\n# free\n             total       used       free     shared    buffers     cached\nMem:       1026876     974072      52804          0     202656     348008\n-/+ buffers/cache:     423408     603468\nSwap:      2048276         92    2048184\n```\n\n\u3053\u3053\u3067\u6ce8\u610f\u306a\u306e\u306f\u3001Linux\u306f\u7a7a\u304d\u30e1\u30e2\u30ea\u3092buffer\u3068cache\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\n\u4e00\u898bfree\u306f\u5c11\u306a\u3044(\u4e0a\u8a18\u306e\u5834\u540852M)\u3068\u601d\u308f\u308c\u304c\u3061\u3060\u304c\u3001\u5b9f\u969b\u306b\u306fbuffer+cache\u3068\u3057\u3066\u78ba\u4fdd\u3055\u308c\u3066\u3044\u308b(\u4e0a\u8a18\u306e\u5834\u5408600M\u78ba\u4fdd\u3055\u308c\u3066\u3044\u308b)\n\n## \u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u77e5\u308a\u305f\u3044\u3002\n\n`df`\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\u57fa\u672c\u3067\u3059\u306d\u3002\n\n```shell-session\n[root@localhost /]# df\n/dev/mapper/VolGroup-lv_root\n                      12941636   1851304  10432924  16% /\nFilesystem           1K-blocks      Used Available Use% Mounted on\ntmpfs                   510348         0    510348   0% /dev/shm\n/dev/sda1               495844     70443    399801  15% /boot\n/vagrant             488383484 421285716  67097768  87% /vagrant\n```\n\n\u3061\u306a\u307f\u306b\u8868\u793a\u304c\u9577\u3044\u30682\u884c\u306b\u5206\u3051\u3066\u51fa\u529b\u3055\u308c\u308b\u306e\u3060\u3051\u3069\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u4f7f\u7528\u7387\u3092\u5b9a\u671f\u7684\u306b\u76e3\u8996\u3057\u305f\u3044\u3068\u304d\u306b\u975e\u5e38\u306b\u3081\u3093\u3069\u304f\u3055\u3044\u3002\u305d\u306e\u5834\u5408\u306f`df -P` \u3092\u4f7f\u3048\u30701\u884c\u3067\u8868\u793a\u3055\u308c\u308b\u3002\n\n\n## i\u30ce\u30fc\u30c9\u306e\u4f7f\u7528\u7387\u304c\u77e5\u308a\u305f\u3044\u3002\n\n`df -i` \u3067\u8868\u793a\u3055\u308c\u308b\u3002\u30b5\u30a4\u30ba\u306e\u5c0f\u3055\u306a\u30d5\u30a1\u30a4\u30eb\u304c\u975e\u5e38\u306b\u5927\u91cf\u306b\u3042\u308b\u5834\u5408\u3001\u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u3042\u308b\u306e\u306b\u306a\u305c\u304b\u66f8\u304d\u8fbc\u307f\u306b\u5931\u6557\u3057\u305f\uff01\u306a\u3093\u3066\u3053\u3068\u304c\u767a\u751f\u3059\u308b\u3002\n\n```shell-session\n[root@localhost /]# df -i\nFilesystem            Inodes   IUsed   IFree IUse% Mounted on\n/dev/mapper/VolGroup-lv_root\n                      822544   72999  749545    9% /\ntmpfs                 127587       1  127586    1% /dev/shm\n/dev/sda1             128016      44  127972    1% /boot\n/vagrant                1000       0    1000    0% /vagrant\n```\n\n## \u7279\u5b9a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u30c7\u30a3\u30b9\u30af\u306e\u4f7f\u7528\u91cf\u3092\u77e5\u308a\u305f\u3044\u3002\n\n`du` \u3067\u78ba\u8a8d\u53ef\u80fd\u3002 \u7d50\u679c\u3092sort\u3057\u3066\u8868\u793a\u3057\u305f\u308a\u3059\u308b\u3068\u5206\u304b\u308a\u3084\u3059\u3044\u3002\n\n```shell-session\n[root@localhost /]# du -sk /var/* | sort -nr  | head -5\n43788   /var/cache\n42600   /var/lib\n2060    /var/log\n104     /var/run\n44      /var/spool\n```\n\n## \u7269\u7406\u30c7\u30a3\u30b9\u30af\u306e\u7a7a\u304d\u5bb9\u91cf\u304c\u77e5\u308a\u305f\u3044(LVM\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408)\n\n`df`\u3067\u306f\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u4f7f\u7528\u91cf\u304c\u5206\u304b\u308b\u304c\u3001\u7269\u7406\u30c7\u30a3\u30b9\u30af\u306b\u3069\u306e\u304f\u3089\u3044\u7a7a\u304d\u304c\u3042\u308b\u304b\n\u77e5\u308a\u305f\u3044\u5834\u5408\u306f\u3001`pvdisplay`\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n```shell-session\n[root@localhost /]# pvdisplay\n  --- Physical volume ---\n  PV Name               /dev/sda2\n  VG Name               VolGroup\n  PV Size               14.51 GiB / not usable 3.00 MiB\n  Allocatable           yes (but full)\n  PE Size               4.00 MiB\n  Total PE              3714\n  Free PE               0\n  Allocated PE          3714\n  PV UUID               d2cKaW-6Ir3-XKJ6-GN2K-xKr0-jqlL-Vu7Ev9\n```\n\n\u3053\u3053\u306eFree PE * PE Size\u304c\u7a7a\u304d\u5bb9\u91cf\u306b\u76f8\u5f53\u3059\u308b\u3002(\u3053\u306e\u5834\u5408\u306f\u7a7a\u304d\u5bb9\u91cf\u306a\u3057)\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306e\u62e1\u5f35\u4f5c\u696d\u306a\u3069\u3092\u884c\u3044\u305f\u3044\u969b\u306b\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u8ad6\u7406\u30dc\u30ea\u30e5\u30fc\u30e0\u306b\u95a2\u3059\u308b\u305d\u306e\u4ed6\u306e\u64cd\u4f5c\u306f[LVM\u5404\u7a2e\u64cd\u4f5c\u30b3\u30de\u30f3\u30c9](http://qiita.com/rsooo/items/be3b8c4ecc944393e2d9)\u3092\u53c2\u7167\u3002\n\n\n## LISTEN\u3057\u3066\u3044\u308b\u30dd\u30fc\u30c8\u4e00\u89a7\u3092\u77e5\u308a\u305f\u3044\u3002\n\n```shell-session\n[root@localhost fd]# netstat -an | grep LISTEN\ntcp        0      0 0.0.0.0:55118               0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:111                 0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN\n```\n\n<\u30b3\u30e1\u30f3\u30c8\u306b\u3088\u308a\u8ffd\u8a18>\ngrep\u4f7f\u308f\u306a\u304f\u3066\u3082-l\u30aa\u30d7\u30b7\u30e7\u30f3\u3067LISTEN\u3057\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u307f\u8868\u793a\u53ef\u3002\n\n```shell-session\n[root@localhost fd]# netstat -nlt \ntcp        0      0 0.0.0.0:111                 0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:22                  0.0.0.0:*                   LISTEN\ntcp        0      0 0.0.0.0:42936               0.0.0.0:*                   LISTEN\n```\n\n\n## \u7279\u5b9a\u306e\u30dd\u30fc\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u77e5\u308a\u305f\u3044\u3002\n\n`lsof`\u3092\u4f7f\u3046\u3068\u7c21\u5358\u3002\n\n```shell-session\n[root@localhost fd]# lsof -i:111\nCOMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\nrpcbind 1013  rpc    6u  IPv4   8479      0t0  UDP *:sunrpc\nrpcbind 1013  rpc    8u  IPv4   8482      0t0  TCP *:sunrpc (LISTEN)\nrpcbind 1013  rpc    9u  IPv6   8484      0t0  UDP *:sunrpc\nrpcbind 1013  rpc   11u  IPv6   8487      0t0  TCP *:sunrpc (LISTEN)\n```\n\n## \u7279\u5b9a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u3044\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u304c\u77e5\u308a\u305f\u3044\n\n`lsof`\u306f\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u5f15\u6570\u306b\u4e0e\u3048\u308b\u3068\u63b4\u3093\u3067\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8868\u793a\u3067\u304d\u308b\u3002\u4fbf\u5229\u3002\n\n```shell-session\n[root@localhost fd]# lsof /var/log/messages\nCOMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF   NODE NAME\nrsyslogd 990 root    1w   REG  253,0   462813 655345 /var/log/messages\n```\n\n`lsof`\u304c\u5165\u3063\u3066\u3044\u306a\u3044\u30de\u30b7\u30f3\u306e\u5834\u5408\u306f`fuser`\u3067\u3082OK\n\n```shell-session\n[root@localhost /]# fuser /var/log/messages\n/var/log/messages:    1060\n```\n\n## \u30d7\u30ed\u30bb\u30b9\u304c\u63b4\u3093\u3067\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u304c\u77e5\u308a\u305f\u3044\u3002\n\n`lsof -p <PID>`\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n```shell-session\n[root@localhost ~]# lsof -p 991\nCOMMAND  PID USER   FD   TYPE             DEVICE SIZE/OFF       NODE NAME\nrsyslogd 991 root  cwd    DIR              253,0     4096          2 /\nrsyslogd 991 root  rtd    DIR              253,0     4096          2 /\nrsyslogd 991 root  txt    REG              253,0   391968       6410 /sbin/rsyslogd\nrsyslogd 991 root  mem    REG              253,0    27232     391290 /lib64/rsyslog/imklog.so\n\u3000/* \u4e00\u90e8\u7701\u7565 */\nrsyslogd 991 root  mem    REG              253,0   154624     407189 /lib64/ld-2.12.so\nrsyslogd 991 root    0u  unix 0xffff880037aef3c0      0t0       8354 /dev/log\nrsyslogd 991 root    1w   REG              253,0   492990     655345 /var/log/messages\nrsyslogd 991 root    2w   REG              253,0    47992     655346 /var/log/secure\nrsyslogd 991 root    3r   REG                0,3        0 4026532037 /proc/kmsg\n```\n\n`lsof`\u304c\u4f7f\u3048\u306a\u3051\u308c\u3070\u3001`/proc/<PID>/fd` \u4ee5\u4e0b\u3092\u898b\u3066\u3082\u3042\u308b\u7a0b\u5ea6\u78ba\u8a8d\u53ef\u80fd\u3002\n\n```shell-session\n[root@localhost ~]# ll /proc/991/fd\ntotal 0\nlrwx------ 1 root root 64 May 24 03:39 0 -> socket:[8354]\nl-wx------ 1 root root 64 May 24 03:39 1 -> /var/log/messages\nl-wx------ 1 root root 64 May 24 03:39 2 -> /var/log/secure\nlr-x------ 1 root root 64 May 24 03:39 3 -> /proc/kmsg\n```\n\n\n## \u30d7\u30ed\u30bb\u30b9\u5185\u306e\u30b9\u30ec\u30c3\u30c9\u306e\u6570\u3092\u78ba\u8a8d\u3057\u305f\u3044\u3002\n`ps -L`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u30b9\u30ec\u30c3\u30c9\u3092\u78ba\u8a8d\u53ef\u80fd\u3002\n\n```shell-session\n[root@localhost ~]# ps aux -L\nUSER       PID   LWP %CPU NLWP %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\n <\u4e2d\u7565>\nroot      1021  1021  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot      1021  1022  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot      1021  1024  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\nroot      1021  1025  0.0    4  0.3 249080  3612 ?        Sl   10:18   0:00 /sbin/rsyslogd -i /var/run/syslogd.pid -c 5\n[root@localhost ~]# ps aux -L | head -1\n```\n\n\u540c\u3058PID\u3067\u8907\u6570\u306eLWP\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3067\u3042\u308c\u3070\u3001\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u3092\u6301\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\n## \u7a3c\u52d5\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u691c\u7d22\u3057\u305f\u3044\u3002\n`pgrep`\u3092\u4f7f\u3048\u3070\u3001PID\u3068\u30d7\u30ed\u30bb\u30b9\u540d\u3092\u7c21\u5358\u306b\u691c\u7d22\u3067\u304d\u308b\u3002\n`ps -ef | grep ... `\u3068\u304b\u3088\u308a\u624b\u3063\u53d6\u308a\u65e9\u3044\u3002\n\n```shell-session\n[root@localhost ~]# pgrep -l syslog\n1060 rsyslogd\n```\n\n\n## \u30d7\u30ed\u30bb\u30b9\u306e\u30e1\u30e2\u30ea\u30de\u30c3\u30d7\u3092\u78ba\u8a8d\u3057\u305f\u3044\n\n`pmap`\u30b3\u30de\u30f3\u30c9\u3067\u305d\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\u30e1\u30e2\u30ea\u72b6\u6cc1\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\u30e1\u30e2\u30ea\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3084\u4f7f\u7528\u91cf\u306e\u78ba\u8a8d\u306e\u969b\u306b\u4f7f\u3048\u308b\u3002\n\n```shell-session\n[root@localhost ~]# pmap -x 1298\n1298:   crond\nAddress           Kbytes     RSS   Dirty Mode   Mapping\n00007fa1b356e000      48      20       0 r-x--  libnss_files-2.12.so\n00007fa1b357a000    2048       0       0 -----  libnss_files-2.12.so\n (\u4e2d\u7565)\nffffffffff600000       4       0       0 r-x--    [ anon ]\n----------------  ------  ------  ------\ntotal kB          117208    1232     600```\n```\n\n\u8868\u793a\u3055\u308c\u308b\u9805\u76ee\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3002\n\n - Address: \u30de\u30c3\u30d7\u306e\u958b\u59cb\u30a2\u30c9\u30ec\u30b9\n - Kbytes: \u4eee\u60f3\u30e1\u30e2\u30ea\u306e\u30de\u30c3\u30d7\u30b5\u30a4\u30ba(\u30ad\u30ed\u30d0\u30a4\u30c8\u5358\u4f4d)\n - RSS: \u7269\u7406\u5e38\u99d0\u30e1\u30e2\u30ea\u306e\u30de\u30c3\u30d7\u30b5\u30a4\u30ba(\u30ad\u30ed\u30d0\u30a4\u30c8\u5358\u4f4d)\n - Mode: \u30de\u30c3\u30d7\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3: \u8aad\u8fbc\u307f\u3001\u66f8\u8fbc\u307f\u3001\u5b9f\u884c\u3001\u5171\u6709\u3001\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8(\u66f8\u304d\u8fbc\u307f\u6642\u30b3\u30d4\u30fc)\n - Mapping: \u30de\u30c3\u30d7\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u540d\u3001\u307e\u305f\u306f \u2019[ anon ]\u2019 \u3067\u52d5\u7684\u306b\u78ba\u4fdd\u3055\u308c\u305f\u30e1\u30e2\u30ea\u3001\u307e\u305f\u306f \u2019[ stack ]\u2019 \u3067\u30d7\u30ed\u30b0\u30e9\u30e0\u30b9\u30bf\u30c3\u30af\n - Device: \u30c7\u30d0\u30a4\u30b9\u540d (\u30e1\u30b8\u30e3\u30fc:\u30de\u30a4\u30ca\u30fc)\n \n\n## \u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u3092\u624b\u3063\u53d6\u308a\u65e9\u304f\u77e5\u308a\u305f\u3044\u3002\n\n`top`\u3067\u3082\u8868\u793a\u3055\u308c\u308b\u3051\u3069\u3001\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\u3057\u3066\u305f\u308aCPU\u4f7f\u7528\u7387\u304c100%\u306e\u3068\u304d\u306f\u91cd\u3059\u304e\u3066top\u304c\u8d77\u52d5\u3057\u306a\u3044\u3068\u304d\u304c\u3042\u308b\u3002\n\u305d\u3093\u306a\u3068\u304d\u306fuptime\u306e\u307b\u3046\u304c\u65e9\u304f\u898b\u308c\u308b\u306e\u3067\u304a\u52e7\u3081\u3002\n\n```shell-session\n[root@localhost ]# uptime\n 16:26:02 up  1:21,  1 user,  load average: 0.00, 0.00, 0.00\n```\n\n\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u304c\u9ad8\u3044\u3068\u8a00\u3046\u3053\u3068\u306f\u3001CPU\u5f85\u3061\u304bIO\u5f85\u3061\u306e\u30d7\u30ed\u30bb\u30b9\u304c\u591a\u3044\u3068\u8a00\u3046\u3053\u3068\u3002\n\u30b5\u30fc\u30d0\u304c\u9045\u3044\u306a\u3069\u306e\u554f\u984c\u304c\u898b\u53d7\u3051\u3089\u308c\u305f\u3089\u3001\u307e\u305a\u306f\u30ed\u30fc\u30c9\u30a2\u30d9\u30ec\u30fc\u30b8\u3092\u78ba\u8a8d\u3059\u308b\u3068\u826f\u3044\u3002\n\n## \u30b7\u30b9\u30c6\u30e0\u306e\u7a3c\u52d5\u6642\u9593\u304c\u77e5\u308a\u305f\u3044\u3002\n\n`uptime`\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\n\n```shell-session\n[root@localhost ~]# uptime\n 09:48:55 up 1 day, 16:20,  3 users,  load average: 0.04, 0.01, 0.00\n```\n\n\n\u308d\u304f\u306b\u76e3\u8996\u3057\u3066\u3044\u306a\u3044\u30b5\u30fc\u30d0\u3092\u305a\u3063\u3068\u8d77\u52d5\u3057\u3066\u3044\u308b\u3068\u3042\u308b\u65e5\u7a81\u7136\u30ea\u30d6\u30fc\u30c8\u3057\u3066\u3044\u305f\u308a\u3059\u308b\u306e\u3067\u3001\u305d\u3046\u3044\u3063\u305f\u4e8b\u8c61\u304c\u767a\u751f\u3057\u3066\u3044\u306a\u3044\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u4f7f\u3063\u305f\u308a\u3059\u308b\u3002\n\n\n## CPU\u4f7f\u7528\u7387\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3057\u305f\u3044\u3002\n\n`vmstat`\u3067\u53d6\u308b\u306e\u304c\u4e00\u822c\u7684\u3002\n\n```shell-session\n[root@localhost ~]# vmstat 5\nprocs -----------memory---------- ---swap-- -----io---- --system-- -----cpu-----\n r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st\n 0  0      0 392708  10852 462084    0    0   162    12  162  285  2  0 96  1  0\n```\n\nproc\u306e\u9805\u76ee\uff1a\n\n* r\u3000\u2026\u3000\u5b9f\u884c\u53ef\u80fd\u3067\u3001\u300c\u5b9f\u884c\u30ad\u30e5\u30fc\u300d\u306b\u5165\u3063\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u6570\u3002\n* b\u3000\u2026\u3000\u672c\u6765\u306f\u5b9f\u884c\u53ef\u80fd\u306a\u30d7\u30ed\u30bb\u30b9\u3067\u3042\u308b\u304c\u3001I/O\u5f85\u3061\u306a\u3069\u306e\u4f55\u3089\u304b\u306e\u7406\u7531\u3067\u5f85\u3061\u3068\u306a\u3063\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306e\u6570\n\nb\u306e\u6570\u304c\u5927\u304d\u3044\u3068I/O\u8ca0\u8377\u7b49\u304c\u5927\u304d\u3044\u3053\u3068\u304c\u4e88\u60f3\u3055\u308c\u308b\u3002\nr\u304c\u5927\u304d\u3044\u3068CPU\u306e\u8ca0\u8377\u304c\u5927\u304d\u304f\u3001\u30e6\u30fc\u30b6\u306b\u9045\u3044\u3068\u611f\u3058\u3055\u305b\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n\nsystem\u306e\u9805\u76ee\uff1a\n\n* in 1\u79d2\u5f53\u305f\u308a\u306e\u5272\u308a\u8fbc\u307f\u306e\u56de\u6570\n* cs 1\u79d2\u5f53\u305f\u308a\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u30b9\u30a4\u30c3\u30c1\u306e\u56de\u6570\n\ncpu\u306e\u9805\u76ee\uff1a\n\n* us\u3000\u2026\u3000\u30e6\u30fc\u30b6\u30fc\u304c\u4f7f\u7528\u3057\u305fCPU\u306e\u5272\u5408\uff08%\uff09\n* sy\u3000\u2026\u3000\u30b7\u30b9\u30c6\u30e0\u304c\u4f7f\u7528\u3057\u305fCPU\u306e\u5272\u5408\uff08%\uff09\n* id\u3000\u2026\u3000CPU\u30a2\u30a4\u30c9\u30eb\u6642\u9593\u306e\u5272\u5408(100 - us - sy)\uff08%\uff09\n* wa\u3000\u2026\u3000IO\u5f85\u3061\u6642\u9593\n\n\u3082\u3063\u3068\u8a73\u7d30\u304c\u77e5\u308a\u305f\u3044\u65b9\u306f\u4ee5\u4e0b\u3078\n\u53c2\u8003\uff1ahttp://www.fulldigit.net/content/view/54/6/\n\n\n`sysstat`\u304c\u5165\u3063\u3066\u3044\u308b\u306a\u3089\u3001sar -u <\u53d6\u5f97\u9593\u9694> \u3067\u3082\u53ef\u80fd\u3002\n\n```shell-session\n[root@localhost ~]# sar -p 5\n04:38:27 PM     CPU     %user     %nice   %system   %iowait    %steal     %idle\n04:38:32 PM     all      0.00      0.00      0.00      0.00      0.00    100.00\n04:38:37 PM     all      0.00      0.00      0.20      0.00      0.00     99.80 \n```\n\n\u5404CPU\u3054\u3068\u306e\u4ed8\u52a0\u3092\u77e5\u308a\u305f\u3044\u306a\u3089\u3001 sar -u -P ALL <\u53d6\u5f97\u9593\u9694> \u3092\u4f7f\u3046\u3002\n\n\n## \u30c7\u30a3\u30b9\u30afI/O\u4f7f\u7528\u7387\u3092\u5b9a\u671f\u7684\u306b\u53d6\u5f97\u3057\u305f\u3044\u3002\n\n`vmstat -d` \u3067\u53d6\u5f97\u53ef\u80fd\n\n```shell-session\n[root@localhost ~]# vmstat -d 5\ndisk- ------------reads------------ ------------writes----------- -----IO------\n       total merged sectors      ms  total merged sectors      ms    cur    sec\nloop7      0      0       0       0      0      0       0       0      0      0\nsr0        0      0       0       0      0      0       0       0      0      0\nsda     6753   1823  462434   56021   3086   2639   36562    9380      0     28\ndm-0    7228      0  453258   80149   5454      0   36544   16809      0     28\ndm-1     297      0    2376     619      0      0       0       0      0      0\n```\n\n\nread/write\u306e\u9805\u76ee\uff1a\n\n* total\u3000\u2026\u3000\u8aad\u307f\u66f8\u304d\u306b\u6210\u529f\u3057\u305f\u7dcf\u6570\n* ms\u3000\u2026\u3000\u8aad\u307f\u66f8\u304d\u306b\u4f7f\u7528\u3057\u305f\u6642\u9593\n\n## \u7279\u5b9a\u306e\u30e6\u30fc\u30b6\u306e\u4f7f\u7528\u3057\u3066\u3044\u308b\u30d7\u30ed\u30bb\u30b9\u306eCPU/\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u3092\u77e5\u308a\u305f\u3044\u3002\n\n`top -u`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u308b\u3068\u4fbf\u5229\u3002\n\n```shell-session\n[root@localhost ~]# top -u oracle\n 1773 oracle    20   0  608m  13m  12m S  0.0  1.4   0:01.83 oracle\n 1775 oracle    20   0  608m  13m  11m S  0.0  1.4   0:01.87 oracle\n /* \u7701\u7565 */\n```\n\n## \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u6b63\u5e38\u306b\u30d1\u30b1\u30c3\u30c8\u304c\u9001\u53d7\u4fe1\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u305f\u3044\u3002\n\n`netstat -i` \u3067\u78ba\u8a8d\u53ef\u80fd\u3002\n\n```shell-session\n[root@localhost ~]# netstat -i\nKernel Interface table\nIface       MTU Met    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg\neth0       1500   0     9020      0      0      0    11186      0      0      0 BMRU\nlo        16436   0     2823      0      0      0     2823      0      0      0 LRU\n```\n\nRX\u304c\u53d7\u4fe1\u3001TX\u304c\u9001\u4fe1\u3002\n\n* OK\u3000\u2026\u3000\u6b63\u5e38\u306b\u9001\u53d7\u4fe1\u3067\u304d\u305f\u30d1\u30b1\u30c3\u30c8\u6570\n* ERR\u3000\u2026\u3000\u9001\u53d7\u4fe1\u3067\u30a8\u30e9\u30fc\u3068\u306a\u3063\u305f\u30d1\u30b1\u30c3\u30c8\u6570\n* DRP\u3000\u2026\u3000\u9001\u53d7\u4fe1\u6642\u306b\u7834\u68c4\u3057\u305f\u30d1\u30b1\u30c3\u30c8\u6570\n* OVR\u3000\u2026\u3000\u9001\u53d7\u4fe1\u6642\u306b\u30aa\u30fc\u30d0\u30fc\u30ed\u30fc\u30c9\u3057\u305f\u30d1\u30b1\u30c3\u30c8\u6570\u3002\u53d7\u4fe1\u5074\u306e\u30d0\u30c3\u30d5\u30a1\u3092\u8d8a\u3048\u3066\u30d1\u30b1\u30c3\u30c8\u9001\u4fe1\u3055\u308c\u305f\u3068\u304d\n\u306a\u3069\u304c\u3053\u308c\u306b\u8a72\u5f53\u3059\u308b\u3002\n\n\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u901a\u4fe1\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u969b\u306b\u78ba\u8a8d\u3059\u308b\u3068\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ec\u30d9\u30eb\u3067\u7570\u5e38\u304c\u3042\u3063\u305f\u304b\u3069\u3046\u304b\u306e\n\u78ba\u8a8d\u306b\u4f7f\u7528\u3067\u304d\u308b\u304b\u3082\u3002\n\n\n## \u30e6\u30fc\u30b6\u306e\u30ed\u30b0\u30a4\u30f3\u5c65\u6b74\u304c\u77e5\u308a\u305f\u3044\n\u30ea\u30bd\u30fc\u30b9\u76e3\u8996\u3068\u306f\u76f4\u63a5\u95a2\u4fc2\u306a\u3044\u3051\u3069\u3001\u5229\u7528\u8005\u304c\u3044\u3064\u306e\u307e\u306b\u304b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u60aa\u3055\u3057\u3066\u3044\u306a\u3044\u304b\u3069\u3046\u304b\u3092\n\u8abf\u3079\u308b\u3053\u3068\u306f\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u3064\u3044\u3067\u306b\u8a18\u8f09\u3002\n\n`lastlog`\u304b`last`\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u53ef\u80fd\u3002\n`lastlog`\u3067\u5404\u30e6\u30fc\u30b6\u304c\u6700\u5f8c\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u6642\u523b\u3092\u78ba\u8a8d\u3067\u304d\u3001`last`\u306f\u6700\u8fd1\u30ed\u30b0\u30a4\u30f3\u3057\u305f\u30e6\u30fc\u30b6\u306e\u6642\u523b\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n```shell-session\n[root@localhost ~]# last | head -5\nroot     pts/1        10.0.2.2         Sun May 24 03:13   still logged in\nroot     pts/0        10.0.2.2         Sun May 24 03:04   still logged in\nreboot   system boot  2.6.32-279.5.2.e Sun May 24 01:04 - 04:18  (03:14)\nroot     pts/0        10.0.2.2         Sun May 17 15:06 - 17:18  (02:12)\nreboot   system boot  2.6.32-279.5.2.e Sun May 17 13:04 - 17:18  (04:13)\n```\n\n```shell-session\n[root@localhost ~]# lastlog -u root\nUsername         Port     From             Latest\nroot             pts/1    10.0.2.2         Sun May 24 03:13:15 +0200 2015```\n```\n\n## \u30d7\u30ed\u30bb\u30b9\u306e\u89aa\u5b50\u95a2\u4fc2\u304c\u77e5\u308a\u305f\u3044\n`pstree` \u3092\u5b9f\u884c\u3059\u308b\u3068\u7c21\u5358\u306b\u308f\u304b\u308b\u3002\n\n```shell-session\n[root@localhost ~]# pstree\ninit\u2500\u252c\u2500VBoxService\u2500\u2500\u25007*[{VBoxService}]\n     \u251c\u2500auditd\u2500\u2500\u2500{auditd}\n     \u251c\u2500crond\n     \u251c\u2500dhclient\n     \u251c\u2500fcoemon\n     \u251c\u2500lldpad\n     \u251c\u25006*[mingetty]\n     \u251c\u2500rpc.idmapd\n     \u251c\u2500rpc.statd\n     \u251c\u2500rpcbind\n     \u251c\u2500rsyslogd\u2500\u2500\u25003*[{rsyslogd}]\n     \u251c\u25002*[sendmail]\n     \u251c\u2500sshd\u2500\u2500\u2500sshd\u2500\u2500\u2500bash\u2500\u2500\u2500pstree\n     \u2514\u2500udevd\u2500\u2500\u25002*[udevd]\n```\n\n\u4e0a\u8a18\u306e\u7d50\u679c\u3067\u306finit\u304b\u3089\u5404\u30d7\u30ed\u30bb\u30b9\u306e\u89aa\u5b50\u95a2\u4fc2\u304c\u308f\u304b\u308b\u3002\n\n\n// \u9593\u9055\u3044\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n", "tags": ["Linux", "infrastructure", "CentOS"]}