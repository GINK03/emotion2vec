{"context": " More than 1 year has passed since last update.\n\n\u30de\u30b9\u30bf\u30fc\u5074\u8a2d\u5b9a\n\n\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\nGRANT REPLICATION SLAVE ON *.* TO repl@% IDENTIFIED BY 'password';\n\n\nmy.cnf(win\u306e\u5834\u5408\u306fmy.ini)\u3092\u4fee\u6b63\uff08\u8ffd\u52a0\uff09\n[mysqld]\nlog-bin = mysql-bin\nserver-id = 1001\n\n\nmysql\u3092\u518d\u8d77\u52d5\nservice mysqld restart\n\n\nmysql\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4f5c\u6210\n\nmysql\u306b\u3066\n# DB\u30ed\u30c3\u30af\nFLUSH TABLES WITH READ LOCK;\n\n# \u73fe\u5728\u306e\u30d0\u30a4\u30ca\u30ea\u30dd\u30b8\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\nSHOW MASTER STATUS;\n\n# File\u3001Position\u306f\u30b9\u30ec\u30fc\u30d6\u5074\u306e\u8a2d\u5b9a\u306b\u5fc5\u8981\u306a\u306e\u3067\u63a7\u3048\u3066\u304a\u304f\n\n\n\n\u5225\u30bf\u30fc\u30df\u30ca\u30eb\u7b49\u3067DB\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b(mysqldump\u3092\u5229\u7528)\nmysqldump -u user -p --all-databases --lock-all-tables > snapshot.db\n\n\nDB\u30ed\u30c3\u30af\u3092\u89e3\u9664\n\nmysql\u306b\u3066\nUNLOCK TABLES;\n\n\n\u30b9\u30ec\u30fc\u30d6\u5074\u8a2d\u5b9a\n\nmy.cnf\u3092\u4fee\u6b63(\u8ffd\u52a0)\n[mysqld]\nlog-bin=mysql-bin\nlog_slave_updates #\u3053\u306e\u30b9\u30ec\u30fc\u30d6\u3092\u4ed6\u306e\u30de\u30b9\u30bf\u30fc\u3068\u3057\u3066\u4f7f\u3044\u305f\u3044\u5834\u5408\u8ffd\u52a0\nserver-id=1002\n\n\n\u30de\u30b9\u30bf\u3067\u4f5c\u6210\u3057\u305f\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u5fa9\u5143\nmysql -u user -p  < snapshot.db\n\n\nmysql\u3092\u518d\u8d77\u52d5\nservice mysqld restart\n\n\n\u30de\u30b9\u30bf\u60c5\u5831\u3092\u767b\u9332\nCHANGE MASTER TO\nMASTER_HOST='sample.com',\nMASTER_USER='rep-user',\nMASTER_PASSWORD='passwd',\nMASTER_LOG_FILE='mysql-bin.000001', #\u30de\u30b9\u30bf\u30fc\u306eFIle\nMASTER_LOG_POS=98; #\u30de\u30b9\u30bf\u30fc\u306ePosition\n\n\n\u30b9\u30ec\u30fc\u30d6\u3092\u30b9\u30bf\u30fc\u30c8\nSTART SLAVE;\n# STOP SLAVE;RESTART SLAVE;RESET SLAVE;\n\n\n\u8d77\u52d5\u78ba\u8a8d\nSHOW SLAVE STATUS\\G\n\n##\u30de\u30b9\u30bf\u30fc\u5074\u8a2d\u5b9a\n\n###\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\n\n```\nGRANT REPLICATION SLAVE ON *.* TO repl@% IDENTIFIED BY 'password';\n```\n\n###my.cnf(win\u306e\u5834\u5408\u306fmy.ini)\u3092\u4fee\u6b63\uff08\u8ffd\u52a0\uff09\n\n```\n[mysqld]\nlog-bin = mysql-bin\nserver-id = 1001\n```\n\n###mysql\u3092\u518d\u8d77\u52d5\n```\nservice mysqld restart\n```\n\n###mysql\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u4f5c\u6210\n\n####mysql\u306b\u3066\n```\n# DB\u30ed\u30c3\u30af\nFLUSH TABLES WITH READ LOCK;\n\n# \u73fe\u5728\u306e\u30d0\u30a4\u30ca\u30ea\u30dd\u30b8\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\nSHOW MASTER STATUS;\n\n# File\u3001Position\u306f\u30b9\u30ec\u30fc\u30d6\u5074\u306e\u8a2d\u5b9a\u306b\u5fc5\u8981\u306a\u306e\u3067\u63a7\u3048\u3066\u304a\u304f\n\n```\n\n\n### \u5225\u30bf\u30fc\u30df\u30ca\u30eb\u7b49\u3067DB\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b(mysqldump\u3092\u5229\u7528)\n\n```\nmysqldump -u user -p --all-databases --lock-all-tables > snapshot.db\n```\n\n###DB\u30ed\u30c3\u30af\u3092\u89e3\u9664\n\n####mysql\u306b\u3066\n```\nUNLOCK TABLES;\n```\n\n\n\n\n##\u30b9\u30ec\u30fc\u30d6\u5074\u8a2d\u5b9a\n\n###my.cnf\u3092\u4fee\u6b63(\u8ffd\u52a0)\n\n```\n[mysqld]\nlog-bin=mysql-bin\nlog_slave_updates #\u3053\u306e\u30b9\u30ec\u30fc\u30d6\u3092\u4ed6\u306e\u30de\u30b9\u30bf\u30fc\u3068\u3057\u3066\u4f7f\u3044\u305f\u3044\u5834\u5408\u8ffd\u52a0\nserver-id=1002\n```\n\n###\u30de\u30b9\u30bf\u3067\u4f5c\u6210\u3057\u305f\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u3092\u5fa9\u5143\n\n```\nmysql -u user -p  < snapshot.db\n```\n###mysql\u3092\u518d\u8d77\u52d5\n\n```\nservice mysqld restart\n```\n\n###\u30de\u30b9\u30bf\u60c5\u5831\u3092\u767b\u9332\n\n```\nCHANGE MASTER TO\nMASTER_HOST='sample.com',\nMASTER_USER='rep-user',\nMASTER_PASSWORD='passwd',\nMASTER_LOG_FILE='mysql-bin.000001', #\u30de\u30b9\u30bf\u30fc\u306eFIle\nMASTER_LOG_POS=98; #\u30de\u30b9\u30bf\u30fc\u306ePosition\n```\n\n###\u30b9\u30ec\u30fc\u30d6\u3092\u30b9\u30bf\u30fc\u30c8\n\n```\nSTART SLAVE;\n# STOP SLAVE;RESTART SLAVE;RESET SLAVE;\n```\n\n###\u8d77\u52d5\u78ba\u8a8d\n\n```\nSHOW SLAVE STATUS\\G\n```\n", "tags": ["MySQL", "\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3", "\u30d0\u30c3\u30af\u30a2\u30c3\u30d7", "\u5099\u5fd8\u9332"]}