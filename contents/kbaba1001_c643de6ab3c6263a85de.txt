{"context": " More than 1 year has passed since last update.http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md#Associations \u3092\u898b\u308b\u3068\u3001\nbelongs_to \u306f association \u30e1\u30bd\u30c3\u30c9\u3067\u30c7\u30fc\u30bf\u3092\u4f5c\u3063\u3066\u3044\u308b\u3051\u3069\u3001 has_many \u306f after_create \u3067\n\u30c7\u30fc\u30bf\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\nassociation \u30e1\u30bd\u30c3\u30c9\u306e\u5834\u5408 FactoryGirl.create(:post, author: author) \u3068\u3059\u308c\u3070\u5225\u306e\u3082\u306e\u3092\n\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u308b\u304c\u3001 has_many \u306a\u30c7\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f\u5fc5\u305a after_create \u3067\u4f5c\u3089\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u3066\u5909\u66f4\u3059\u308b\u624b\u6bb5\u304c\u306a\u3044\u3002\n\u3053\u308c\u304c\u30c6\u30b9\u30c8\u66f8\u304f\u3068\u304d\u306b\u5272\u3068\u3046\u3056\u3044\u3053\u3068\u304c\u591a\u3044\u3002\n\u3067\u3001\u8272\u3005\u8a66\u3057\u305f\u7d50\u679c\u3001\u6b21\u306e\u3084\u308a\u65b9\u3067\u3046\u307e\u304f\u3044\u3063\u305f\u3002\nFactoryGirl.define do\n  factory :post do\n    title \"Through the Looking Glass\"\n    user\n  end\n\n  factory :user do\n    name \"John Doe\"\n\n    factory :user_with_posts do\n      transient do\n        # build(:post) \u3060\u3068\u4f59\u5206\u306a user \u304c\u4f5c\u3089\u308c\u3066\u3057\u307e\u3046\u305f\u3081 user: nil \u3092\u6307\u5b9a\u3059\u308b\n        posts { [build(:post, user: nil)] }\n      end\n\n      after(:create) do |user, evaluator|\n        user.posts = evaluator.posts\n      end\n    end\n  end\nend\n\n# rspec\nFactoryGirl.create(:user_with_posts, posts: [FactoryGirl.create(:post), FactoryGirl.create(:post)])\n\n\n\u8ffd\u8a18\n\u540c\u50da\u304b\u3089\u306e\u6307\u6458\u306b\u3088\u308a\u3059\u3063\u304d\u308a\u3057\u305f\u66f8\u304d\u65b9\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nhttp://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md#Associations \u3092\u898b\u308b\u3068\u3001\n`belongs_to` \u306f `association` \u30e1\u30bd\u30c3\u30c9\u3067\u30c7\u30fc\u30bf\u3092\u4f5c\u3063\u3066\u3044\u308b\u3051\u3069\u3001 `has_many` \u306f `after_create` \u3067\n\u30c7\u30fc\u30bf\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002\n\n`association` \u30e1\u30bd\u30c3\u30c9\u306e\u5834\u5408 `FactoryGirl.create(:post, author: author)` \u3068\u3059\u308c\u3070\u5225\u306e\u3082\u306e\u3092\n\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u51fa\u6765\u308b\u304c\u3001 `has_many` \u306a\u30c7\u30fc\u30bf\u306b\u3064\u3044\u3066\u306f\u5fc5\u305a `after_create` \u3067\u4f5c\u3089\u308c\u3066\u3057\u307e\u3063\u3066\u3044\u3066\u5909\u66f4\u3059\u308b\u624b\u6bb5\u304c\u306a\u3044\u3002\n\n\u3053\u308c\u304c\u30c6\u30b9\u30c8\u66f8\u304f\u3068\u304d\u306b\u5272\u3068\u3046\u3056\u3044\u3053\u3068\u304c\u591a\u3044\u3002\n\n\u3067\u3001\u8272\u3005\u8a66\u3057\u305f\u7d50\u679c\u3001\u6b21\u306e\u3084\u308a\u65b9\u3067\u3046\u307e\u304f\u3044\u3063\u305f\u3002\n\n```ruby\nFactoryGirl.define do\n  factory :post do\n    title \"Through the Looking Glass\"\n    user\n  end\n\n  factory :user do\n    name \"John Doe\"\n\n    factory :user_with_posts do\n      transient do\n        # build(:post) \u3060\u3068\u4f59\u5206\u306a user \u304c\u4f5c\u3089\u308c\u3066\u3057\u307e\u3046\u305f\u3081 user: nil \u3092\u6307\u5b9a\u3059\u308b\n        posts { [build(:post, user: nil)] }\n      end\n\n      after(:create) do |user, evaluator|\n        user.posts = evaluator.posts\n      end\n    end\n  end\nend\n\n# rspec\nFactoryGirl.create(:user_with_posts, posts: [FactoryGirl.create(:post), FactoryGirl.create(:post)])\n```\n\n### \u8ffd\u8a18\n\n\u540c\u50da\u304b\u3089\u306e\u6307\u6458\u306b\u3088\u308a\u3059\u3063\u304d\u308a\u3057\u305f\u66f8\u304d\u65b9\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n", "tags": ["FactoryGirl", "Ruby", "Rails"]}