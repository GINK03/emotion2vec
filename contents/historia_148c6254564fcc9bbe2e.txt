{"context": "\n\n\u7d4c\u7def\nPaperclip\u306bURL\u3067\u753b\u50cf\u3092\u767b\u9332\u3057\u305f\u3089\u3001\u4e00\u90e8\u306e\u753b\u50cf\u304cContent type\u306evalidation\u3067\u5f3e\u304b\u308c\u305f\u3002\nRails\u306f4.2.6\u3001Paperclip\u306f4.3.6\u3067\u3057\u305f\u3002\n\n\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\n[paperclip] Content Type Spoof: Filename 1467013624.jpg \n(application/octet-stream from Headers, [\"image/jpeg\"] from Extension), \ncontent type discovered from file command: image/jpeg. \nSee documentation to allow this combination.\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u306fapplication/octet-stream\u3060\u3051\u3069\u62e1\u5f35\u5b50\u304b\u3089\u63a8\u6e2c\u3059\u308b\u306bimage/jpeg\u3060\u3088\u306d\uff1f\u5909\u3067\u3057\u3087\uff1f\u76f4\u3057\u3066\uff01\u3063\u3066\u3053\u3068\u3089\u3057\u3044\u3002\n\nissue\u306b\u306a\u3063\u3066\u305f\nhttps://github.com/thoughtbot/paperclip/issues/1429\nContent Type Spoof\u306e\u30a8\u30e9\u30fc\u3092\u51fa\u3055\u306a\u3044\u65b9\u6cd5\u306f\u3001\nconfig/initializer/paperclip.rb\u306b\nrequire 'paperclip/media_type_spoof_detector'\nmodule Paperclip\n  class MediaTypeSpoofDetector\n    def spoofed?\n      false\n    end\n  end\nend\n\n\u3053\u3046\u66f8\u304f\u3089\u3057\u3044\u3002\n\u78ba\u304b\u306b\u30a8\u30e9\u30fc\u306f\u51fa\u306a\u304f\u306a\u3063\u305f\u3002\n\u3067\u3082\u307e\u3060validation\u3067\u5f3e\u304b\u308c\u308b\u3002\n\n\u539f\u56e0\n\u3053\u3093\u306a\u3075\u3046\u306b\u66f8\u3044\u3066\u305f\ndata = Paperclip.io_adapters.for(url)\ndata.original_filename = url\nImage.new(image: data)\n\n\u3053\u3053\u3067\nputs data.content_type\n\n\u3059\u308b\u3068\u3001\napplication/octet-stream\n\n\u3063\u3066\u8fd4\u3063\u3066\u304f\u308b\u3002\nimage/*\u3058\u3083\u306a\u3044\u304b\u3089\u30c0\u30e1\u3060\u3063\u305f\u3089\u3057\u3044\u3002\n\u3058\u3083\u3042\u3053\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u3069\u3046\u3084\u3063\u3066image/*\u306econtent type\u3092\u30b2\u30c3\u30c8\u3057\u3066\u308b\u3093\u3060\u308d\u3046\u3068\u30a8\u30e9\u30fc\u5143\u3092\u898b\u3066\u307f\u305f\u3002\n\u305d\u3057\u305f\u3089\u30d5\u30a1\u30a4\u30eb\u540d\u304b\u3089content type\u3092\u6559\u3048\u3066\u304f\u308c\u308b\u306e\u3092\u898b\u3064\u3051\u305f\u3002\nhttps://github.com/thoughtbot/paperclip/blob/e60f00027704298455c039e111d96bcf46e12822/lib/paperclip/media_type_spoof_detector.rb#L57\n\u3068\u3044\u3046\u308f\u3051\u3067\ndata = Paperclip.io_adapters.for(url)\ndata.original_filename = url\ndata.content_type = MIME::Types.type_for(url).first.content_type\nreturn Image.new(image: data)\n\n\u3053\u3046\u306a\u3063\u305f\u3002\nMIME::Types.type_for(url)\u306fArray\u3067\u8fd4\u3063\u3066\u304f\u308b\u307f\u305f\u3044\u3060\u304b\u3089\u6700\u521d\u3092\u53d6\u308a\u51fa\u3057\u305f\u3002\n\u3081\u3067\u305f\u3057\u3002\n# \u7d4c\u7def\nPaperclip\u306bURL\u3067\u753b\u50cf\u3092\u767b\u9332\u3057\u305f\u3089\u3001\u4e00\u90e8\u306e\u753b\u50cf\u304cContent type\u306evalidation\u3067\u5f3e\u304b\u308c\u305f\u3002\n\nRails\u306f4.2.6\u3001Paperclip\u306f4.3.6\u3067\u3057\u305f\u3002\n\n# \u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\n```sh\n[paperclip] Content Type Spoof: Filename 1467013624.jpg \n(application/octet-stream from Headers, [\"image/jpeg\"] from Extension), \ncontent type discovered from file command: image/jpeg. \nSee documentation to allow this combination.\n```\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u306fapplication/octet-stream\u3060\u3051\u3069\u62e1\u5f35\u5b50\u304b\u3089\u63a8\u6e2c\u3059\u308b\u306bimage/jpeg\u3060\u3088\u306d\uff1f\u5909\u3067\u3057\u3087\uff1f\u76f4\u3057\u3066\uff01\u3063\u3066\u3053\u3068\u3089\u3057\u3044\u3002\n\n# issue\u306b\u306a\u3063\u3066\u305f\nhttps://github.com/thoughtbot/paperclip/issues/1429\n\nContent Type Spoof\u306e\u30a8\u30e9\u30fc\u3092\u51fa\u3055\u306a\u3044\u65b9\u6cd5\u306f\u3001\nconfig/initializer/paperclip.rb\u306b\n\n```rb\nrequire 'paperclip/media_type_spoof_detector'\nmodule Paperclip\n  class MediaTypeSpoofDetector\n    def spoofed?\n      false\n    end\n  end\nend\n```\n\u3053\u3046\u66f8\u304f\u3089\u3057\u3044\u3002\n\u78ba\u304b\u306b\u30a8\u30e9\u30fc\u306f\u51fa\u306a\u304f\u306a\u3063\u305f\u3002\n\u3067\u3082\u307e\u3060validation\u3067\u5f3e\u304b\u308c\u308b\u3002\n\n# \u539f\u56e0\n\u3053\u3093\u306a\u3075\u3046\u306b\u66f8\u3044\u3066\u305f\n\n```rb\ndata = Paperclip.io_adapters.for(url)\ndata.original_filename = url\nImage.new(image: data)\n```\n\u3053\u3053\u3067\n\n```rb\nputs data.content_type\n```\n\u3059\u308b\u3068\u3001\n\n```shell-session\napplication/octet-stream\n```\n\u3063\u3066\u8fd4\u3063\u3066\u304f\u308b\u3002\nimage/*\u3058\u3083\u306a\u3044\u304b\u3089\u30c0\u30e1\u3060\u3063\u305f\u3089\u3057\u3044\u3002\n\n\u3058\u3083\u3042\u3053\u306e\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u3069\u3046\u3084\u3063\u3066image/*\u306econtent type\u3092\u30b2\u30c3\u30c8\u3057\u3066\u308b\u3093\u3060\u308d\u3046\u3068\u30a8\u30e9\u30fc\u5143\u3092\u898b\u3066\u307f\u305f\u3002\n\u305d\u3057\u305f\u3089\u30d5\u30a1\u30a4\u30eb\u540d\u304b\u3089content type\u3092\u6559\u3048\u3066\u304f\u308c\u308b\u306e\u3092\u898b\u3064\u3051\u305f\u3002\nhttps://github.com/thoughtbot/paperclip/blob/e60f00027704298455c039e111d96bcf46e12822/lib/paperclip/media_type_spoof_detector.rb#L57\n\n\u3068\u3044\u3046\u308f\u3051\u3067\n\n```rb\ndata = Paperclip.io_adapters.for(url)\ndata.original_filename = url\ndata.content_type = MIME::Types.type_for(url).first.content_type\nreturn Image.new(image: data)\n```\n\u3053\u3046\u306a\u3063\u305f\u3002\nMIME::Types.type_for(url)\u306fArray\u3067\u8fd4\u3063\u3066\u304f\u308b\u307f\u305f\u3044\u3060\u304b\u3089\u6700\u521d\u3092\u53d6\u308a\u51fa\u3057\u305f\u3002\n\n\u3081\u3067\u305f\u3057\u3002\n", "tags": ["Rails4", "paperclip", "URL", "content-type"]}