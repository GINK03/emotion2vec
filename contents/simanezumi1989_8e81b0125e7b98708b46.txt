{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u3092\u653b\u7565\u3059\u308b\u4eba\u5de5\u77e5\u80fd\u306e\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3002\u79c1\u305f\u3061\u306e\u4eba\u5de5\u77e5\u80fd\u306f\u753b\u9762\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3068\u3057\uff0c\u884c\u52d5\u306e\u4fa1\u5024\u3092\u51fa\u529b\u3068\u3059\u308b\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3042\u308b\u3002\u3053\u3053\u3067\u554f\u984c\u3068\u306a\u308b\u306e\u304c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u69cb\u9020\u3067\u3042\u308b\u3002\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u69cb\u9020\u306f\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6570\u3068\u91cd\u307f\u306b\u4f9d\u5b58\u3059\u308b\u3002\u3053\u308c\u307e\u3067\u306f\u5f37\u5316\u5b66\u7fd2\u306e\u30c7\u30fc\u30bf\u3092\u6559\u5e2b\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u91cd\u307f\u3092\u9006\u4f1d\u64ad\u6cd5\u3067\u5b66\u7fd2\u3055\u305b\u3066\u3044\u305f\u3002\u305d\u306e\u7d50\u679c\u306f\u3053\u3061\u3089\u3092\u898b\u308c\u3070\u308f\u304b\u308b\u3088\u3046\u306b\u30a4\u30de\u30a4\u30c1\u3067\u3042\u308b\u3002\u4eca\u56de\u306f\u5b9f\u6570\u5024\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u4f7f\u3063\u3066\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u91cd\u307f\u3092\u6700\u9069\u5316\u3059\u308b\u3002\u3064\u307e\u308a\uff0c\u4f55\u4f53\u304b\u306e\u500b\u4f53\u306b\u30b2\u30fc\u30e0\u3092\u3055\u305b\u3066\u30b9\u30b3\u30a2\u304c\u9ad8\u3044\u500b\u4f53\u306e\u907a\u4f1d\u5b50\u3092\u3082\u3063\u305f\u500b\u4f53\u3092\u4f5c\u308b\u3002\u3002\u3002\u4e88\u5b9a\u3060\u3063\u305f\u304c\uff0c\u5b9f\u884c\u7d50\u679c\u304c\u9045\u3044\u306e\u3067\u305d\u306e\u30a2\u30a4\u30c7\u30a2\u3068\u4eca\u5f8c\u306e\u4e88\u5b9a\u3092\u66f8\u304f\u3002\n\n\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u6d41\u308c\n\u4e16\u4ee3\u4ea4\u4ee3\u30e2\u30c7\u30eb\u306fMGG,\u4ea4\u53c9\u306fBLX-\u03b1,\u8a55\u4fa1\u306f\u30b9\u30b3\u30a2\u306e\u9ad8\u3044\u3082\u306e\u3092\u9ad8\u304f\u3059\u308b\u3002\n1.\u91cd\u307f\u3068\u306a\u308b\u907a\u4f1d\u5b50\u3092\u3082\u3063\u305f\u500b\u4f53\u306e\u500b\u4f53\u7fa4\u3092\u4f5c\u308b\n2.\u30e9\u30f3\u30c0\u30e0\u306b\uff11\u7d44\u306e\u89aa\u3092\u500b\u4f53\u7fa4\u304b\u3089\u9078\u3073\uff0c\u5b50\u4f9b\u3092n\u500b\u4f53\u4f5c\u308b(BLX-\u03b1)\n3.\u89aa\u3068\u5b50\u4f9b\u306en+2\u500b\u4f53\u306b\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u3092\u3055\u305b\uff0c\u6700\u3082\u8a55\u4fa1\u306e\u9ad8\u3044\u500b\u4f53\u3068\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u9078\u3093\u3060\uff11\u500b\u4f53\u3092\u89aa\u500b\u4f53\u3068\u5165\u308c\u66ff\u3048\u308b\n4. 2,3\u3092\u7e70\u308a\u8fd4\u3059\n\u4ee5\u4e0b\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n1.\u91cd\u307f\u3068\u306a\u308b\u907a\u4f1d\u5b50\u3092\u3082\u3063\u305f\u500b\u4f53\u306e\u500b\u4f53\u7fa4\u3092\u4f5c\u308b\n    //\u521d\u671f\u8a2d\u5b9a\n    // \u30d0\u30a4\u30a2\u30b9\u3042\u308a\u306e(6,33,3)\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n    const INLEN = 6;\n    const HIDLEN = 33;\n    const OUTLEN = 3;\n\n    var N = 10;//\u500b\u4f53\u6570\n    var individual = new Array(N);\n    var chrom = INLEN*(HIDLEN - 1) + HIDLEN*OUTLEN;//\u907a\u4f1d\u5b50\u6570=\u91cd\u307f\u306e\u6570\n\n    //\u521d\u671f\u306e\u907a\u4f1d\u5b50\u6c7a\u5b9a(\u30e9\u30f3\u30c0\u30e0)\n    for(var n=0;n<N;n++){\n        individual[n] = new Array(chrom);\n        for(var c=0;c<chrom;c++){\n            individual[n][c] = Math.random()-0.5;//-0.5\u301c0.5\n        };\n    };\n\n\n2.\u30e9\u30f3\u30c0\u30e0\u306b\uff11\u7d44\u306e\u89aa\u3092\u500b\u4f53\u7fa4\u304b\u3089\u9078\u3073\uff0c\u5b50\u4f9b\u3092n\u500b\u4f53\u4f5c\u308b(BLX-\u03b1)\n\u30b3\u30fc\u30c9\u3067\u306f1,2\u4eba\u76ee\u306e\u5b50\u4f9b\u306b\u89aa\u3092\u4ee3\u5165\u3057\u3066\uff0cn+2\u4eba\u306e\u5b50\u4f9b\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002BLX-\u03b1\u306b\u3064\u3044\u3066\u306f\u524d\u56de\u306e\u30e1\u30e2\u3092\u53c2\u7167\u3002\n//\u89aa\u9078\u629e\nvar r1 = Math.floor(Math.random()*N);\nvar r2 = Math.floor(Math.random()*N);\n//1,2\u4eba\u76ee\u306e\u5b50\u4f9b\u306b\u89aa\u3092\u4ee3\u5165\u3057\u3066\uff0cn+2\u4eba\u306e\u5b50\u4f9b\u3092\u3064\u304f\u308b\nconst CHILDLEN = 20;\nvar child = new Array(CHILDLEN);\nfor(var n=0;n<CHILDLEN;n++){\n    child[n] = new Array(chrom);\n    for(var c=0;c<chrom;c++){\n        var parent=[individual[r1][c],individual[r2][c]];\n        if(n==0){\n            child[0][c] = parent[0];//\u89aa\u3092\u4ee3\u5165\n        }else if(n==1){\n            child[1][c] = parent[1];//\u89aa\u3092\u4ee3\u5165\n        }else{\n            //BLX-\u03b1\u3067\u5b50\u4f9b\u3092\u4f5c\u308b\n            const ALPHA = 0.5;\n            var minP = Math.min(parent[0],parent[1])-ALPHA*Math.abs(parent[0]-parent[1]);\n            var maxP = Math.max(parent[0],parent[1])+ALPHA*Math.abs(parent[0]-parent[1]);\n            child[n][c] = minP + Math.random()*(maxP - minP);\n        };\n    };\n};\n\n\n3.\u89aa\u3068\u5b50\u4f9b\u306en+2\u500b\u4f53\u306b\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u3092\u3055\u305b\uff0c\u6700\u3082\u8a55\u4fa1\u306e\u9ad8\u3044\u500b\u4f53\u3068\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u9078\u3093\u3060\uff11\u500b\u4f53\u3092\u89aa\u500b\u4f53\u3068\u5165\u308c\u66ff\u3048\u308b\n//\u8a55\u4fa1\u95a2\u6570evaluation\u304c\u6700\u5c0f\u306e\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\n//evaluation(\u500b\u4f53)=\u30b2\u30fc\u30e0\u30b9\u30b3\u30a2\nvar top = [evaluation(child[0]),0];\nfor(var n=1;n<CHILDLEN;n++){\n    if(evaluation(child[n])>top[0]){\n        top[0] = evaluation(child[n]);\n        top[1] = n;\n    };\n};\n//\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u6c7a\u5b9a\u3057\u305f\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\nvar total = 0;\nfor(var n=0;n<CHILDLEN;n++){\n    total += evaluation(child[n]);\n};\nvar arrow = Math.random()*total;\nvar select = 0;\nfor(var n=0,sum=0.0;n<CHILDLEN;n++){\n    sum += evaluation(child[n]);\n    if(sum>arrow){\n        select = n;\n        break;\n    };\n};\n//\u89aa\u3068\u5165\u308c\u66ff\u3048\u308b\nfor(var c=0;c<chrom;c++){\n    individual[r1][c] = child[top[1]][c];\n    individual[r2][c] = child[select][c];\n};      \n\n\n\u91cd\u8981\u306a\u95a2\u6570\n\n\u8a55\u4fa1\u95a2\u6570 evaluation( )\nfunction evaluation(In){\n    reward = 0;//\u30b9\u30b3\u30a2\u30920\u306b\u30bb\u30c3\u30c8\n    var copyi = new Array(chrom);\n    for(var c=0;c<chrom;c++){\n        copyi[c] = In[c];//\u3068\u308a\u3042\u3048\u305a\u30b3\u30d4\u30fc\n    };\n    for(var count=0;count<10;count++){\n        reset();\n        calculate(copyi);//\u500b\u4f53\u304c\u30b2\u30fc\u30e0\u3092\u3059\u308b\n    };\n    return reward//\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u306e\u30b9\u30b3\u30a2\u3092\u8fd4\u3059\n};\n\n\n\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af net( )\nnet(\u500b\u4f53,\u500b\u4f53\u756a\u53f7,,,\u884c\u52d5) = \u884c\u52d5\u306e\u4fa1\u5024\n//\u30b7\u30b0\u30e2\u30a4\u30c9\u95a2\u6570\nfunction sigmoid(x){\n    const A = 1.0;\n    return 1.0/(1.0 + Math.exp(-A*x));\n};\nfunction net(In,x,y,z,vx,vy,a){\n    var copyi = new Array(chrom);\n    for(var c=0;c<chrom;c++){\n        copyi[c] = In[c];//\u3068\u308a\u3042\u3048\u305a\u30b3\u30d4\u30fc\n    };\n    var c = 0;\n    //\u500b\u4f53\u306e\u907a\u4f1d\u5b50\u3092\u91cd\u307f\u306b\u5bfe\u5fdc\u4ed8\u3051\u308b(input)\n    var input_W = new Array(INLEN);\n    for(var i=0;i<INLEN;i++){\n        input_W[i] = new Array(HIDLEN-1);\n        for(var j=0;j<HIDLEN-1;j++){\n            input_W[i][j] = copyi[c];\n            c++;\n        };\n    };\n    //(hidden)\n    var hidden_W = new Array(HIDLEN);\n    for(var i=0;i<HIDLEN;i++){\n        hidden_W[i] = new Array(OUTLEN);\n        for(var j=0;j<OUTLEN;j++){\n            hidden_W[i][j] = copyi[c];\n            c++;\n        };\n    };\n    //\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6c7a\u5b9a\n    var input_N = [x/600,y/400,z/600,vx,vy,-1];\n    var hidden_N = new Array(HIDLEN-1);\n    hidden_N.push(-1);\n    var output_N = new Array(OUTLEN);\n    for(i=0;i<HIDLEN-1;i++){\n        var input_SUM = 0.0;\n        for(var j=0;j<INLEN;j++){\n            input_SUM += input_W[j][i]*input_N[j];\n        };\n        hidden_N[i] = sigmoid(input_SUM);\n    };\n    for(var i=0;i<OUTLEN;i++){\n        var hidden_SUM = 0.0;\n        for(var j=0;j<HIDLEN;j++){\n            hidden_SUM += hidden_W[j][i]*hidden_N[j];\n        };\n        output_N[i] = sigmoid(hidden_SUM);\n    };\n    return output_N[a];\n};\n\n\n\u7d50\u679c\n\u4e16\u4ee3\u6570\u3084\u30cb\u30e5\u30fc\u30ed\u30f3\u3092\u5897\u3084\u305b\u3070\u5b9f\u884c\u7d50\u679c\u304c\u9045\u304f\u306a\u308a\uff0c\u8abf\u7bc0\u3067\u304d\u306a\u3044\u306e\u3067\u7d50\u679c\u3082\u3067\u306a\u3044\u3002\n\n\u8ab2\u984c\n\u8abf\u6574\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u591a\u3044\u3002\u5177\u4f53\u7684\u306b\u306f\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6570\uff0c\u4e16\u4ee3\u6570\u306e\u6570\uff0c\u5b50\u4f9b\u306e\u6570\uff0c\u30b2\u30fc\u30e0\u306e\u56de\u6570\u3002\u3002\u3002\n\u307e\u305f\u5b9f\u884c\u901f\u5ea6\u304c\u9045\u3044\u3002\n\n\u3061\u3087\u3063\u3068\u601d\u3063\u305f\u3053\u3068\n\u3053\u306e\u52d5\u753b\u3092\u307f\u3066\uff0c\u6642\u9593\u3054\u3068\u306e\u884c\u52d5\u3092\u907a\u4f1d\u5b50\u3068\u3059\u308b\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u3002\n\n\u30b9\u30fc\u30d1\u30fc\u30de\u30ea\u30aa\u30d6\u30e9\u30b6\u30fc\u30ba\u3092\u5b66\u7fd2\u3055\u305b\u3066\u307f\u305f by\u30cb\u30b3\u30cb\u30b3\n\u30b9\u30fc\u30d1\u30fc\u30de\u30ea\u30aa\u30d6\u30e9\u30b6\u30fc\u30ba\u3092\u5b66\u7fd2\u3055\u305b\u3066\u307f\u305f byYOUTUBE\n\n\u6210\u529f\u4f8b\u304c\u3042\u308b\u306e\u306f\u5927\u304d\u306a\u52b1\u307f\u306b\u306a\u308b\u3002\u305f\u3060\u3057\uff0c\u3053\u306e\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f\u6c7a\u3081\u3089\u308c\u305f\u6642\u9593\u306b\u6c7a\u3081\u3089\u308c\u305f\u884c\u52d5\u3092\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u5fdc\u7528\u304c\u5229\u304b\u306a\u3044\u3002\u305d\u3053\u3067\u610f\u5473\u3065\u3051\u3068\u3057\u3066\u5f37\u5316\u5b66\u7fd2\u3092\u52a0\u3048\u308c\u3070\u3044\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3002\n\n\u4eca\u5f8c\u306e\u65b9\u91dd\n\u5b9f\u6570\u5024\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u307f\u3067\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u653b\u7565\u3059\u308b\u306e\u306f\u3072\u3068\u307e\u305a\u7f6e\u3044\u3066\u304a\u304f\u3002\u6b21\u306f\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\uff0c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\uff0cQ-learning\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u4eba\u5de5\u77e5\u80fd\u3092\u4f5c\u308b\u3002\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067\u884c\u3046\u3002\n1.\u6642\u9593\u3054\u3068\u306e\u884c\u52d5\u3092\u907a\u4f1d\u5b50\u3068\u3059\u308b\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u7406\u60f3\u7684\u306a\u500b\u4f53\u3092\u4f5c\u308b(\u30b9\u30b3\u30a2\u304c\u9ad8\u3044\uff0c\u30dc\u30fc\u30eb\u3092\u843d\u3068\u3055\u306a\u3044\u306a\u3069)\n2.\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u884c\u52d5\u3092\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u5b66\u7fd2\u3055\u305b\u308b\n3.\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u5f37\u5316\u5b66\u7fd2\u3092\u3055\u305b\u308b\n\u3064\u307e\u308a\uff0c\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u7b54\u3048\u3092\u4f5c\u308a\uff0c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u7b54\u3048\u3092\u4e38\u6697\u8a18\u3057\u3066\uff0c\u5f37\u5316\u5b66\u7fd2\u3067\u610f\u5473\u3092\u7406\u89e3\u3059\u308b\u3002\n\u3068\u308a\u3042\u3048\u305a\u6642\u9593\u3054\u3068\u306e\u884c\u52d5\u3092\u907a\u4f1d\u5b50\u3068\u3059\u308b\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u88c5\u3092\u3057\u3066\u307f\u308b\u3002\n\n\u53c2\u8003\u6587\u732e\n\u524d\u56de\u306e\u8a18\u4e8b\n\u5b9f\u6570\u5024\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306b\u3088\u308b\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5b66\u7fd2\n\n\u5b9f\u88c5\u30b3\u30fc\u30c9\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30d6\u30ed\u30c3\u30af\u5d29\u3057 - \u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af - \u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0</title>\n<meta http-equiv=\"Content-Style-Type\" content=\"text/css\">\n<meta http-equiv=\"Content-Script-Type\" content=\"text/javascript\">\n<meta name=\"robots\" content=\"noindex,nofollow\">\n<style type=\"text/css\">\n\nbody{ -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; font-size: 20px;}\ncanvas{ border: none; position: absolute; left: 10px; top: 10px;}\n#graph2{ cursor: pointer;}\n#data{ position: relative; top: 410px;}\n#myPercent{ width: 40px; font-size: inherit;}\n#quickCalc{ font-size: inherit;}\n\n</style>\n</head>\n<body>\n\n<canvas id='graph'></canvas>\n<canvas id='graph2'></canvas>\n<p id='data'>\n    <input type='checkbox' id='resetEverytime' checked>\u843d\u3061\u305f\u3089\u30ea\u30bb\u30c3\u30c8<br>\n    <input type='text' value='100' id='myPercent'>\u3000\n    <input type='button' id='quickCalc' value='\u63cf\u753b\u305b\u305a\u306b\u8a08\u7b97'>\u3000\n    <span id='myResult'></span>\n</p>\n\n<script>\n(function(){\n    //\u30d0\u30fc\u3092\u52d5\u304b\u3059\u95a2\u6570\n    function moveBar(In,T){\n            var action = Boltzmann(In,p.x,p.y,bar.x,p.vx,p.vy,T);\n            var tempX = bar.x+(action-1)*30; //\u5de6\u53f3\u306b30\u30d4\u30af\u30bb\u30eb\u307e\u305f\u306f\u52d5\u304b\u306a\u3044\n            if (tempX<p.r) tempX = p.r; //\u5de6\u306e\u58c1\u306b\u5f53\u305f\u3063\u305f\u3089\u3001\u305d\u308c\u4ee5\u4e0a\u5de6\u3078\u306f\u884c\u304b\u306a\u3044\n            else if (tempX>w-p.r) tempX = w-p.r; //\u53f3\u306e\u58c1\u306b\u5f53\u305f\u3063\u305f\u3089\u305d\u308c\u4ee5\u4e0a\u53f3\u3078\u306f\u884c\u304b\u306a\u3044\n            bar.x = tempX;\n    }\n\n    function d(ID){ return document.getElementById(ID);}\n    var timer;\n    var paused = false, gameOver = false, gameEnded = true;\n    var numberOfBalls = 0; //\u4f7f\u7528\u3057\u305f\u30dc\u30fc\u30eb\u306e\u6570\n    var numberOfFrames = 0; //\u304b\u304b\u3063\u305f\u30d5\u30ec\u30fc\u30e0\u6570\uff08\u00f733\uff1d\u6642\u9593\uff08\u79d2\uff09\uff09\n    var graph = d('graph'), graph2 = d('graph2');\n    var g = graph.getContext('2d'), g2 = graph2.getContext('2d');\n    var w = 600, h = 400;\n    graph.width = graph2.width = w; graph.height = graph2.height = h;\n    g.fillStyle = '#000';\n    g.fillRect(0,0,w,h);\n    g.save();\n    g.font = '30px Arial';\n    g.fillStyle = 'white';\n    g.fillText('Click to Start',210,220);\n    g.restore();\n\n    // p\u306f\u30dc\u30fc\u30eb\u3002\u9806\u306bx\u5ea7\u6a19\u3001y\u5ea7\u6a19\u3001\u534a\u5f84\u3001\u901f\u5ea6x\u6210\u5206\u3001\u901f\u5ea6y\u6210\u5206,\u8272\n    var p = {x: 300, y: 20, r: 10, vx: 0, vy: 0, color: '#fff'};\n\n    //bar\u306f\u68d2\u3002x\u5ea7\u6a19\u3001y\u306f\u539a\u307f\u3001L\u306f\u9577\u3055\u306e\u534a\u5206\u3001edge\u306f\u89d2\u5ea6\u304c\u4ed8\u304d\u59cb\u3081\u308b\u70b9\u306e\u7aef\u304b\u3089\u306e\u8ddd\u96e2\n    var bar = {x: 300, y: 10, L: 50, edge: 45, color: '#ff0'};\n\n    //b\u306f\u30d6\u30ed\u30c3\u30af\u3002b.x\u3068b.y\u304c\u3068\u3082\u306b\u914d\u5217\u3067\u3001xy\u5ea7\u6a19\u3092\u793a\u3059\u3002w\u306fwidth\u3067\u5e45\u3001h\u306fheight\u3067\u9ad8\u3055\u3002\u5168\u3066\u540c\u3058\u5927\u304d\u3055\u306e\u9577\u65b9\u5f62\n    var b = {x: [], y: [], w: 20, h: 10, color: '#88f'};\n\n    var score = 0;\n\n    d('graph2').addEventListener('click',function(){\n        if (gameEnded){\n            gameEnded = false;\n            reset();\n            drawBG();\n            mainLoop();\n        }\n        else if (paused){\n            paused = false;\n            drawBG();\n            mainLoop();\n        }\n        else{\n            paused = true;\n            clearTimeout(timer);\n            g2.font = '30px Arial';\n            g2.fillStyle = 'white';\n            g2.fillText('paused',250,220);\n        }\n    },false);\n\n    function reset(){\n        bar.x = 300;\n        p.x = bar.x; p.y = bar.y+p.r;\n        var angle = Math.PI*(10)/180;//Math.PI*(Math.random()*60-30)/180; //-30\uff5e30\n        p.vx = Math.sin(angle)*12; p.vy = Math.cos(angle)*12; //cos\u3068sin\u306e\u53cd\u8ee2\u306b\u6ce8\u610f\n        b.x = []; b.y = [];\n        for (var i=0; i<3; i++) for (var j=0; j<11; j++){\n            b.x.push(w/2-10*b.w+j*b.w*2);\n            b.y.push(340-i*b.h*2);\n        }\n        score = numberOfBalls = numberOfFrames = 0;\n    }\n\n    function mainLoop(){\n        g.fillStyle = '#000';\n        g.fillRect(0,0,w,h);\n        g.setTransform(1,0,0,-1,0,h);\n\n        //\u30dc\u30fc\u30eb\u306e\u63cf\u753b\n        g.beginPath();\n        g.arc(p.x,p.y,p.r,0,2*Math.PI);\n        g.fillStyle = p.color;\n        g.fill();\n        //\u30dc\u30fc\u30eb\u306e\u63cf\u753b\n\n        //\u30d0\u30fc\u306e\u63cf\u753b\n        g.fillStyle = bar.color;\n        g.fillRect(bar.x-bar.L+p.r+3,0,(bar.L-p.r-3)*2,bar.y); //\u00b13\u306f\"\u904a\u3073\"\n\n        //\u30dc\u30fc\u30eb\u3092\u73fe\u5728\u306e\u901f\u5ea6\u3092\u3082\u3068\u306b\u79fb\u52d5\u3055\u305b\u308b\n        p.x += p.vx;\n        p.y += p.vy;\n\n        //\u30d0\u30fc\u3092\u52d5\u304b\u3059\n        moveBar(individual[best[1]],1.0/Math.log(Time+1.001));\n        Time += 1;\n\n        //\u3053\u3053\u304b\u3089\u885d\u7a81\u5224\u5b9a\u3002\u307e\u305a\u306f\u30d6\u30ed\u30c3\u30af\n        if (p.y>=280){\n            for (var i=0,I=b.x.length,hit=false; i<I; i++){\n                if ((p.y-b.y[i])*p.vy<0 && Math.abs(p.x-b.x[i])<=b.w && Math.abs(p.y-b.y[i])<=b.h+p.r){\n                    p.vy *= -1;\n                    hit = true;\n                    break;\n                }\n                else if ((p.x-b.x[i])*p.vx<0 &&Math.abs(p.y-b.y[i])<=b.h && Math.abs(p.x-b.x[i])<=b.w+p.r){\n                    p.vx *= -1;\n                    hit = true;\n                    break;\n                }\n            }\n            if (hit){\n                score += 10;\n                b.x.splice(i,1); b.y.splice(i,1);\n                drawBG();\n                if (b.x.length<=0){\n                    gameEnded = true;\n                    d('graph2').style.cursor = 'pointer';\n                    g2.font = '40px Arial';\n                    g2.fillStyle = 'white';\n                    g2.fillText('SUCCESS !',200,200);\n                    var timeLapse = Math.floor(100*numberOfFrames/33)/100;\n                    g2.fillText(timeLapse+' sec',220,250);\n                    return;\n                }\n            }\n        }\n        //\u2193\u885d\u7a81\u5224\u5b9a\u3002\u3053\u3053\u304b\u3089\u58c1\n        if (p.x>w-p.r){ p.x = w-p.r; p.vx *= -1;} //right\n        if (p.x<p.r){   p.x = p.r; p.vx *= -1;} //left\n        if (p.y>h-p.r){ p.y = h-p.r; p.vy *= -1;} //up\n        if (p.y<p.r+bar.y){\n            var p_bar = Math.abs(p.x-bar.x);\n            if (!gameOver && p_bar<=bar.L){\n                var X = (p.x>bar.x) ? 1 : -1;\u3000//\u885d\u7a81\u70b9\u306e\u30d0\u30fc\u306e\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb(X,1);\n                if (p_bar<=bar.L-bar.edge) X = 0; //\u30d0\u30fc\u306e\u4e2d\u592e\n                else if (p_bar<=bar.L-bar.edge/3) X *= (p_bar-bar.L+bar.edge)/100; //0\uff5e0.3\uff08\u30d0\u30fc\u306e\u7aef\u306f\u7d0473\u00b0\uff09\n                else X *= 0.3;\n                var L = Math.sqrt(X*X+1); //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\n                var vec = {x: X/L, y: 1/L}; //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u6b63\u898f\u5316\n                var dot = vec.x*p.vx+vec.y*p.vy;\n                p.y = p.r+bar.y;\n                p.vx -= 2*dot*vec.x;\n                p.vy -= 2*dot*vec.y;\n                if (Math.abs(p.vx)/p.vy>1.5){ //\u89d2\u5ea6\u304c\u4ed8\u304d\u904e\u304e\u306a\u3044\u3088\u3046\u8abf\u6574\n                    var v2 = p.vx*p.vx+p.vy*p.vy;\n                    p.vy = Math.sqrt(v2/3.25);\n                    p.vx = (p.vx<0) ? -p.vy*1.5 : p.vy*1.5;\n                }\n            }\n            else if (!gameOver && p.y<p.r) gameOver = true;\n            else if (gameOver && p.y<-p.r){\n                gameOver = false;\n                if (d('resetEverytime').checked) reset();\n                else{\n                    p.x = bar.x; p.y = bar.y+p.r;\n                    var angle = Math.PI*(30)/180;//Math.PI*(Math.random()*60-30)/180; //-30\uff5e30\n                    p.vx = Math.sin(angle)*12; p.vy = Math.cos(angle)*12; //cos\u3068sin\u306e\u53cd\u8ee2\u306b\u6ce8\u610f\n                    numberOfBalls++;\n                }\n                drawBG();\n            }\n        }\n        numberOfFrames++;\n        timer = setTimeout(mainLoop,10); //30\u30df\u30ea\u79d2\u5f8c\u306bmainloop\u5b9f\u884c (-> 1\u79d2\u306b\u7d0430\u56de\u7e70\u308a\u8fd4\u3059)\n    }\n\n    //\u2193\u30d6\u30ed\u30c3\u30af\u306e\u63cf\u753b\u3002\u52d5\u304d\u304c\u306a\u3044\u306e\u306b\u6bce\u56de\u63cf\u304f\u306e\u306f\u7121\u99c4\u306a\u306e\u3067\u3001\u5225\u306b\u3057\u3066\u51e6\u7406\u3092\u7bc0\u7d04\u3002\n    function drawBG(){\n        g2.clearRect(0,0,w,h);\n        g2.font = '20px Arial';\n        g2.fillStyle = '#fff';\n        g2.fillText('Balls:\u3000'+numberOfBalls,15,25);\n        g2.fillText('Score:\u3000'+score,480,25);\n        g2.save();\n        g2.setTransform(1,0,0,-1,0,h);\n        g2.fillStyle = '#ccf';\n        for (var i=0,I=b.x.length; i<I; i++) g2.fillRect(b.x[i]-b.w,b.y[i]-b.h,2*b.w,2*b.h);\n        g2.fillStyle = b.color;\n        for (var i=0; i<I; i++) g2.fillRect(b.x[i]-b.w+1,b.y[i]-b.h+1,2*b.w-2,2*b.h-2);\n        g2.restore();\n    };\n\n    //\u30dc\u30eb\u30c4\u30de\u30f3\u9078\u629e\n    function Boltzmann(In,x,y,z,vx,vy,T){\n        var myNet = [net(In,x,y,z,vx,vy,0),net(In,x,y,z,vx,vy,1),net(In,x,y,z,vx,vy,2)];//net(\u500b\u4f53,,,0)=\u884c\u52d50\u306e\u4fa1\u5024\n        var prob = new Array(3);\n        for(var i=0;i<3;i++){\n            prob[i] = Math.exp(myNet[i]/T)/(Math.exp(myNet[0]/T) + Math.exp(myNet[1]/T) + Math.exp(myNet[2]/T));\n        };\n        var select = Math.random();\n        for(var i=0,sum=0.0;i<3;i++){\n            sum +=prob[i]\n            if (select<sum) {\n                return i;\n            };\n        };\n    };\n\n    console.log(\"start\");\n    var Time = 0;\n\n    //\u2193\u3053\u3053\u304b\u3089\u8a08\u7b97\u7528\n    function calculate(In){\n        while (numberOfFrames<1000){\n\n            p.x += p.vx;\n            p.y += p.vy;\n            moveBar(In,1.0/Math.log(Time + 1.000010));              \n            Time += 1;\n\n            if (p.y>=280){\n                for (var i=0,I=b.x.length,hit=false; i<I; i++){\n                    if ((p.y-b.y[i])*p.vy<0 && Math.abs(p.x-b.x[i])<=b.w && Math.abs(p.y-b.y[i])<=b.h+p.r){\n                        p.vy *= -1; hit = true; break;}\n                    else if ((p.x-b.x[i])*p.vx<0 && Math.abs(p.y-b.y[i])<=b.h && Math.abs(p.x-b.x[i])<=b.w+p.r){\n                        p.vx *= -1; hit = true; break;}\n                }\n                if (hit){\n                    score += 10;\n                    reward += 10;\n                    b.x.splice(i,1); b.y.splice(i,1);\n                    if (b.x.length==0) break;\n                }\n            }\n            if (p.x>w-p.r){ p.x = w-p.r; p.vx *= -1;} //right\n            if (p.x<p.r){   p.x = p.r; p.vx *= -1;} //left\n            if (p.y>h-p.r){ p.y = h-p.r; p.vy *= -1;} //up\n            if (p.y<p.r+bar.y){\n                var p_bar = Math.abs(p.x-bar.x);\n                if (p_bar<=bar.L){\n                    var X = (p.x>bar.x) ? 1 : -1;\u3000//\u885d\u7a81\u70b9\u306e\u30d0\u30fc\u306e\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb(X,1);\n                    if (p_bar<=bar.L-bar.edge) X = 0; //\u30d0\u30fc\u306e\u4e2d\u592e\n                    else if (p_bar<=bar.L-bar.edge/3) X *= (p_bar-bar.L+bar.edge)/100; //0\uff5e0.3\uff08\u30d0\u30fc\u306e\u7aef\u306f\u7d0473\u00b0\uff09\n                    else X *= 0.3;\n                    var L = Math.sqrt(X*X+1); //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\n                    var vec = {x: X/L, y: 1/L}; //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u6b63\u898f\u5316\n                    var dot = vec.x*p.vx+vec.y*p.vy;\n                    p.y = p.r+bar.y;\n                    p.vx -= 2*dot*vec.x;\n                    p.vy -= 2*dot*vec.y;\n                    if (Math.abs(p.vx)/p.vy>1.5){ //\u89d2\u5ea6\u304c\u4ed8\u304d\u904e\u304e\u306a\u3044\u3088\u3046\u8abf\u6574\n                        var v2 = p.vx*p.vx+p.vy*p.vy;\n                        p.vy = Math.sqrt(v2/3.25);\n                        p.vx = (p.vx<0) ? -p.vy*1.5 : p.vy*1.5;\n                    }\n                    reward = +10;\n                }else if (p.y<p.r){\n                    break;  \n                };\n            };\n            numberOfFrames++;\n        };\n    };\n\n    //\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\n\n    //\u521d\u671f\u8a2d\u5b9a\n\n    // \u30d0\u30a4\u30a2\u30b9\u3042\u308a\u306e(6,33,3)\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n    const INLEN = 6;\n    const HIDLEN = 30;\n    const OUTLEN = 3;\n\n    //\u907a\u4f1d\u5b50\u304c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u91cd\u307f\u3068\u306a\u308b\u500b\u4f53\u3092\u4f5c\u308b\n\n    var N = 10;//\u500b\u4f53\u6570\n    var individual = new Array(N);\n    var chrom = INLEN*(HIDLEN - 1) + HIDLEN*OUTLEN;//\u907a\u4f1d\u5b50\u6570=\u91cd\u307f\u306e\u6570\n\n    //\u521d\u671f\u306e\u907a\u4f1d\u5b50\u6c7a\u5b9a(\u30e9\u30f3\u30c0\u30e0)\n    for(var n=0;n<N;n++){\n        individual[n] = new Array(chrom);\n        for(var c=0;c<chrom;c++){\n            individual[n][c] = Math.random()-0.5;//-0.5\u301c0.5\n        };\n    };\n\n    //\u6700\u3082\u826f\u3044\u500b\u4f53\u3068\u305d\u306e\u756a\u53f7\u3092\u5165\u308c\u308b\u914d\u5217\n    var best = new Array(2);\n\n    //\u64cd\u4f5c\u3092GENERATION\u56de\u7e70\u308a\u8fd4\u3059\n    const GENERATION = 50;\n    for(var ge=0;ge<GENERATION;ge++){\n\n        if (ge == GENERATION-1){\n            //\u7d50\u679c\u306e\u51fa\u529b\n            best = [evaluation(individual[0]),0];//evaluation(\u500b\u4f53)=\u30b2\u30fc\u30e0\u30b9\u30b3\u30a2\n            for(var n=0;n<N;n++){\n                if(evaluation(individual[n])>best[0]){\n                    best[0] = evaluation(individual[n]);\n                    best[1] = n;\n                };\n            };\n            console.log(\"best : \", best[0]);\n            break;\n        };\n\n        //\u9078\u629e\u3068\u4ea4\u53c9\n        //MGG\u9078\u629e\n        const crossrate = 0.8;\n        if(crossrate>Math.random()){\n\n            //\u89aa\u9078\u629e\n            var r1 = Math.floor(Math.random()*N);\n            var r2 = Math.floor(Math.random()*N);\n\n            //\u89aa\u3068\u5b50\u4f9b\u3092\u542b\u3081\u3066\uff0c\u30a8\u30ea\u30fc\u30c8\uff0b\u30eb\u30fc\u30ec\u30c3\u30c8\u3067\u4e8c\u500b\u4f53\u3092\u751f\u6210\n            const CHILDLEN = 2;\n            var child = new Array(CHILDLEN);\n            for(var n=0;n<CHILDLEN;n++){\n                child[n] = new Array(chrom);\n                for(var c=0;c<chrom;c++){\n                    var parent=[individual[r1][c],individual[r2][c]];\n                    if(n==0){\n                        child[0][c] = parent[0];\n                    }else if(n==1){\n                        child[1][c] = parent[1];\n                    }else{\n                        //BLX-\u03b1\n                        const ALPHA = 0.5;\n                        var minP = Math.min(parent[0],parent[1])-ALPHA*Math.abs(parent[0]-parent[1]);\n                        var maxP = Math.max(parent[0],parent[1])+ALPHA*Math.abs(parent[0]-parent[1]);\n                        child[n][c] = minP + Math.random()*(maxP - minP);\n                    };\n                };\n            };\n\n            //\u8aa4\u5dee\u95a2\u6570E\u304c\u6700\u5c0f\u306e\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\n            var top = [evaluation(child[0]),0];\n            for(var n=1;n<CHILDLEN;n++){\n                if(evaluation(child[n])>top[0]){\n                    top[0] = evaluation(child[n]);\n                    top[1] = n;\n                };\n            };\n\n            //\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u6c7a\u5b9a\u3057\u305f\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\n            var total = 0;\n            for(var n=0;n<CHILDLEN;n++){\n                total += evaluation(child[n]);\n            };\n            var arrow = Math.random()*total;\n            var select = 0;\n            for(var n=0,sum=0.0;n<CHILDLEN;n++){\n                sum += evaluation(child[n]);\n                if(sum>arrow){\n                    select = n;\n                    break;\n                };\n            };\n\n            //\u7591\u554f\uff1aindividual\u304c\u5909\u66f4\u3055\u308c\u308c\u3070child\u3082\u5909\u66f4\u3055\u308c\u308b\u306e\u304b\uff1f\n            for(var c=0;c<chrom;c++){\n                individual[r1][c] = child[top[1]][c];\n                individual[r2][c] = child[select][c];\n            };      \n        };\n        //\u7a81\u7136\u5909\u7570\u306f\u884c\u308f\u306a\u3044\n    };\n\n    //\u8aa4\u5dee\u95a2\u6570evaluation(\u500b\u4f53[\u500b\u4f53\u756a\u53f7]) = \u30b2\u30fc\u30e0\u30b9\u30b3\u30a2\n    var reward;\n    function evaluation(In){\n        reward = 0;\n        var copyi = new Array(chrom);\n        for(var c=0;c<chrom;c++){\n            copyi[c] = In[c];\n        };\n        for(var count=0;count<10;count++){\n            reset();\n            calculate(copyi);//\u500b\u4f53\u304c\u30b2\u30fc\u30e0\u3092\u3059\u308b\n        };\n        return reward//\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u306e\u30b9\u30b3\u30a2\u3092\u4e0e\u3048\u308b\n    };\n\n    //\u30b7\u30b0\u30e2\u30a4\u30c9\u95a2\u6570\n    function sigmoid(x){\n        const A = 1.0;\n        return 1.0/(1.0 + Math.exp(-A*x));\n    };\n    //\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(\u500b\u4f53,\u500b\u4f53\u756a\u53f7,\u5165\u529b0,\u5165\u529b1) = \u884c\u52d5a\u306e\u4fa1\u5024\n    function net(In,x,y,z,vx,vy,a){\n        var copyi = new Array(chrom);\n        for(var c=0;c<chrom;c++){\n            copyi[c] = In[c];\n        };\n        var c = 0;\n\n        //\u91cd\u307f\n        var input_W = new Array(INLEN);\n        for(var i=0;i<INLEN;i++){\n            input_W[i] = new Array(HIDLEN-1);\n            for(var j=0;j<HIDLEN-1;j++){\n                input_W[i][j] = copyi[c];\n                c++;\n            };\n        };\n\n        var hidden_W = new Array(HIDLEN);\n        for(var i=0;i<HIDLEN;i++){\n            hidden_W[i] = new Array(OUTLEN);\n            for(var j=0;j<OUTLEN;j++){\n                hidden_W[i][j] = copyi[c];\n                c++;\n            };\n        };\n\n        //\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6c7a\u5b9a\n        var input_N = [x/600,y/400,z/600,vx,vy,-1];\n        var hidden_N = new Array(HIDLEN-1);\n        hidden_N.push(-1);\n        var output_N = new Array(OUTLEN);\n\n        for(i=0;i<HIDLEN-1;i++){\n            var input_SUM = 0.0;\n            for(var j=0;j<INLEN;j++){\n                input_SUM += input_W[j][i]*input_N[j];\n            };\n            hidden_N[i] = sigmoid(input_SUM);\n        };\n        for(var i=0;i<OUTLEN;i++){\n            var hidden_SUM = 0.0;\n            for(var j=0;j<HIDLEN;j++){\n                hidden_SUM += hidden_W[j][i]*hidden_N[j];\n            };\n            output_N[i] = sigmoid(hidden_SUM);\n        };\n        return output_N[a];\n    };\n})();\n</script>\n</body>\n</html>\n\n\u203b \u7d50\u679c\u306f\u4e0a\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\n#\u306f\u3058\u3081\u306b\n\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u3092\u653b\u7565\u3059\u308b\u4eba\u5de5\u77e5\u80fd\u306e\u958b\u767a\u3092\u3057\u3066\u3044\u308b\u3002\u79c1\u305f\u3061\u306e\u4eba\u5de5\u77e5\u80fd\u306f\u753b\u9762\u30c7\u30fc\u30bf\u3092\u5165\u529b\u3068\u3057\uff0c\u884c\u52d5\u306e\u4fa1\u5024\u3092\u51fa\u529b\u3068\u3059\u308b\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u3042\u308b\u3002\u3053\u3053\u3067\u554f\u984c\u3068\u306a\u308b\u306e\u304c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u69cb\u9020\u3067\u3042\u308b\u3002\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u69cb\u9020\u306f\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6570\u3068\u91cd\u307f\u306b\u4f9d\u5b58\u3059\u308b\u3002\u3053\u308c\u307e\u3067\u306f\u5f37\u5316\u5b66\u7fd2\u306e\u30c7\u30fc\u30bf\u3092\u6559\u5e2b\u30c7\u30fc\u30bf\u3068\u3057\u3066\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u91cd\u307f\u3092\u9006\u4f1d\u64ad\u6cd5\u3067\u5b66\u7fd2\u3055\u305b\u3066\u3044\u305f\u3002\u305d\u306e\u7d50\u679c\u306f[\u3053\u3061\u3089]()\u3092\u898b\u308c\u3070\u308f\u304b\u308b\u3088\u3046\u306b\u30a4\u30de\u30a4\u30c1\u3067\u3042\u308b\u3002**\u4eca\u56de\u306f\u5b9f\u6570\u5024\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u4f7f\u3063\u3066\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u91cd\u307f\u3092\u6700\u9069\u5316\u3059\u308b\u3002**\u3064\u307e\u308a\uff0c\u4f55\u4f53\u304b\u306e\u500b\u4f53\u306b\u30b2\u30fc\u30e0\u3092\u3055\u305b\u3066\u30b9\u30b3\u30a2\u304c\u9ad8\u3044\u500b\u4f53\u306e\u907a\u4f1d\u5b50\u3092\u3082\u3063\u305f\u500b\u4f53\u3092\u4f5c\u308b\u3002\u3002\u3002\u4e88\u5b9a\u3060\u3063\u305f\u304c\uff0c\u5b9f\u884c\u7d50\u679c\u304c\u9045\u3044\u306e\u3067\u305d\u306e\u30a2\u30a4\u30c7\u30a2\u3068\u4eca\u5f8c\u306e\u4e88\u5b9a\u3092\u66f8\u304f\u3002\n\n\n\n#\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u6d41\u308c\n\u4e16\u4ee3\u4ea4\u4ee3\u30e2\u30c7\u30eb\u306fMGG,\u4ea4\u53c9\u306fBLX-\u03b1,\u8a55\u4fa1\u306f\u30b9\u30b3\u30a2\u306e\u9ad8\u3044\u3082\u306e\u3092\u9ad8\u304f\u3059\u308b\u3002\n\n1.\u91cd\u307f\u3068\u306a\u308b\u907a\u4f1d\u5b50\u3092\u3082\u3063\u305f\u500b\u4f53\u306e\u500b\u4f53\u7fa4\u3092\u4f5c\u308b\n2.\u30e9\u30f3\u30c0\u30e0\u306b\uff11\u7d44\u306e\u89aa\u3092\u500b\u4f53\u7fa4\u304b\u3089\u9078\u3073\uff0c\u5b50\u4f9b\u3092n\u500b\u4f53\u4f5c\u308b(BLX-\u03b1)\n3.\u89aa\u3068\u5b50\u4f9b\u306en+2\u500b\u4f53\u306b**\u30d6\u30ed\u30c3\u30af\u5d29\u3057**\u3092\u3055\u305b\uff0c\u6700\u3082\u8a55\u4fa1\u306e\u9ad8\u3044\u500b\u4f53\u3068\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u9078\u3093\u3060\uff11\u500b\u4f53\u3092\u89aa\u500b\u4f53\u3068\u5165\u308c\u66ff\u3048\u308b\n4. 2,3\u3092\u7e70\u308a\u8fd4\u3059\n\n\u4ee5\u4e0b\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n##1.\u91cd\u307f\u3068\u306a\u308b\u907a\u4f1d\u5b50\u3092\u3082\u3063\u305f\u500b\u4f53\u306e\u500b\u4f53\u7fa4\u3092\u4f5c\u308b\n\n```js\n\t//\u521d\u671f\u8a2d\u5b9a\n\t// \u30d0\u30a4\u30a2\u30b9\u3042\u308a\u306e(6,33,3)\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n\tconst INLEN = 6;\n\tconst HIDLEN = 33;\n\tconst OUTLEN = 3;\n\n\tvar N = 10;//\u500b\u4f53\u6570\n\tvar individual = new Array(N);\n\tvar chrom = INLEN*(HIDLEN - 1) + HIDLEN*OUTLEN;//\u907a\u4f1d\u5b50\u6570=\u91cd\u307f\u306e\u6570\n\n\t//\u521d\u671f\u306e\u907a\u4f1d\u5b50\u6c7a\u5b9a(\u30e9\u30f3\u30c0\u30e0)\n\tfor(var n=0;n<N;n++){\n\t\tindividual[n] = new Array(chrom);\n\t\tfor(var c=0;c<chrom;c++){\n\t\t\tindividual[n][c] = Math.random()-0.5;//-0.5\u301c0.5\n\t\t};\n\t};\n```\n\n##2.\u30e9\u30f3\u30c0\u30e0\u306b\uff11\u7d44\u306e\u89aa\u3092\u500b\u4f53\u7fa4\u304b\u3089\u9078\u3073\uff0c\u5b50\u4f9b\u3092n\u500b\u4f53\u4f5c\u308b(BLX-\u03b1)\n\u30b3\u30fc\u30c9\u3067\u306f1,2\u4eba\u76ee\u306e\u5b50\u4f9b\u306b\u89aa\u3092\u4ee3\u5165\u3057\u3066\uff0cn+2\u4eba\u306e\u5b50\u4f9b\u3092\u4f5c\u3063\u3066\u3044\u308b\u3002BLX-\u03b1\u306b\u3064\u3044\u3066\u306f[\u524d\u56de\u306e\u30e1\u30e2]()\u3092\u53c2\u7167\u3002\n\n```js\n//\u89aa\u9078\u629e\nvar r1 = Math.floor(Math.random()*N);\nvar r2 = Math.floor(Math.random()*N);\n//1,2\u4eba\u76ee\u306e\u5b50\u4f9b\u306b\u89aa\u3092\u4ee3\u5165\u3057\u3066\uff0cn+2\u4eba\u306e\u5b50\u4f9b\u3092\u3064\u304f\u308b\nconst CHILDLEN = 20;\nvar child = new Array(CHILDLEN);\nfor(var n=0;n<CHILDLEN;n++){\n\tchild[n] = new Array(chrom);\n\tfor(var c=0;c<chrom;c++){\n\t\tvar parent=[individual[r1][c],individual[r2][c]];\n\t\tif(n==0){\n\t\t\tchild[0][c] = parent[0];//\u89aa\u3092\u4ee3\u5165\n\t\t}else if(n==1){\n\t\t\tchild[1][c] = parent[1];//\u89aa\u3092\u4ee3\u5165\n\t\t}else{\n\t\t\t//BLX-\u03b1\u3067\u5b50\u4f9b\u3092\u4f5c\u308b\n\t\t\tconst ALPHA = 0.5;\n\t\t\tvar minP = Math.min(parent[0],parent[1])-ALPHA*Math.abs(parent[0]-parent[1]);\n\t\t\tvar maxP = Math.max(parent[0],parent[1])+ALPHA*Math.abs(parent[0]-parent[1]);\n\t\t\tchild[n][c] = minP + Math.random()*(maxP - minP);\n\t\t};\n\t};\n};\n```\n\n##3.\u89aa\u3068\u5b50\u4f9b\u306en+2\u500b\u4f53\u306b**\u30d6\u30ed\u30c3\u30af\u5d29\u3057**\u3092\u3055\u305b\uff0c\u6700\u3082\u8a55\u4fa1\u306e\u9ad8\u3044\u500b\u4f53\u3068\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u9078\u3093\u3060\uff11\u500b\u4f53\u3092\u89aa\u500b\u4f53\u3068\u5165\u308c\u66ff\u3048\u308b\n\n```js\n//\u8a55\u4fa1\u95a2\u6570evaluation\u304c\u6700\u5c0f\u306e\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\n//evaluation(\u500b\u4f53)=\u30b2\u30fc\u30e0\u30b9\u30b3\u30a2\nvar top = [evaluation(child[0]),0];\nfor(var n=1;n<CHILDLEN;n++){\n\tif(evaluation(child[n])>top[0]){\n\t\ttop[0] = evaluation(child[n]);\n\t\ttop[1] = n;\n\t};\n};\n//\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u6c7a\u5b9a\u3057\u305f\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\nvar total = 0;\nfor(var n=0;n<CHILDLEN;n++){\n\ttotal += evaluation(child[n]);\n};\nvar arrow = Math.random()*total;\nvar select = 0;\nfor(var n=0,sum=0.0;n<CHILDLEN;n++){\n\tsum += evaluation(child[n]);\n\tif(sum>arrow){\n\t\tselect = n;\n\t\tbreak;\n\t};\n};\n//\u89aa\u3068\u5165\u308c\u66ff\u3048\u308b\nfor(var c=0;c<chrom;c++){\n\tindividual[r1][c] = child[top[1]][c];\n\tindividual[r2][c] = child[select][c];\n};\t\t\n```\n\n##\u91cd\u8981\u306a\u95a2\u6570\n###\u8a55\u4fa1\u95a2\u6570 evaluation( )\n\n```js\nfunction evaluation(In){\n\treward = 0;//\u30b9\u30b3\u30a2\u30920\u306b\u30bb\u30c3\u30c8\n\tvar copyi = new Array(chrom);\n\tfor(var c=0;c<chrom;c++){\n\t\tcopyi[c] = In[c];//\u3068\u308a\u3042\u3048\u305a\u30b3\u30d4\u30fc\n\t};\n\tfor(var count=0;count<10;count++){\n\t\treset();\n\t\tcalculate(copyi);//\u500b\u4f53\u304c\u30b2\u30fc\u30e0\u3092\u3059\u308b\n\t};\n\treturn reward//\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u306e\u30b9\u30b3\u30a2\u3092\u8fd4\u3059\n};\n```\n\n###\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af net( )\nnet(\u500b\u4f53,\u500b\u4f53\u756a\u53f7,,,\u884c\u52d5) = \u884c\u52d5\u306e\u4fa1\u5024\n\n\n```js\n//\u30b7\u30b0\u30e2\u30a4\u30c9\u95a2\u6570\nfunction sigmoid(x){\n\tconst A = 1.0;\n\treturn 1.0/(1.0 + Math.exp(-A*x));\n};\nfunction net(In,x,y,z,vx,vy,a){\n\tvar copyi = new Array(chrom);\n\tfor(var c=0;c<chrom;c++){\n\t\tcopyi[c] = In[c];//\u3068\u308a\u3042\u3048\u305a\u30b3\u30d4\u30fc\n\t};\n\tvar c = 0;\n\t//\u500b\u4f53\u306e\u907a\u4f1d\u5b50\u3092\u91cd\u307f\u306b\u5bfe\u5fdc\u4ed8\u3051\u308b(input)\n\tvar input_W = new Array(INLEN);\n\tfor(var i=0;i<INLEN;i++){\n\t\tinput_W[i] = new Array(HIDLEN-1);\n\t\tfor(var j=0;j<HIDLEN-1;j++){\n\t\t\tinput_W[i][j] = copyi[c];\n\t\t\tc++;\n\t\t};\n\t};\n    //(hidden)\n\tvar hidden_W = new Array(HIDLEN);\n\tfor(var i=0;i<HIDLEN;i++){\n\t\thidden_W[i] = new Array(OUTLEN);\n\t\tfor(var j=0;j<OUTLEN;j++){\n\t\t\thidden_W[i][j] = copyi[c];\n\t\t\tc++;\n\t\t};\n\t};\n\t//\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6c7a\u5b9a\n\tvar input_N = [x/600,y/400,z/600,vx,vy,-1];\n\tvar hidden_N = new Array(HIDLEN-1);\n\thidden_N.push(-1);\n\tvar output_N = new Array(OUTLEN);\n\tfor(i=0;i<HIDLEN-1;i++){\n\t\tvar input_SUM = 0.0;\n\t\tfor(var j=0;j<INLEN;j++){\n\t\t\tinput_SUM += input_W[j][i]*input_N[j];\n\t\t};\n\t\thidden_N[i] = sigmoid(input_SUM);\n\t};\n\tfor(var i=0;i<OUTLEN;i++){\n\t\tvar hidden_SUM = 0.0;\n\t\tfor(var j=0;j<HIDLEN;j++){\n\t\t\thidden_SUM += hidden_W[j][i]*hidden_N[j];\n\t\t};\n\t\toutput_N[i] = sigmoid(hidden_SUM);\n\t};\n\treturn output_N[a];\n};\n```\n\n#\u7d50\u679c\n\u4e16\u4ee3\u6570\u3084\u30cb\u30e5\u30fc\u30ed\u30f3\u3092\u5897\u3084\u305b\u3070\u5b9f\u884c\u7d50\u679c\u304c\u9045\u304f\u306a\u308a\uff0c\u8abf\u7bc0\u3067\u304d\u306a\u3044\u306e\u3067\u7d50\u679c\u3082\u3067\u306a\u3044\u3002\n\n#\u8ab2\u984c\n\u8abf\u6574\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u30d1\u30e9\u30e1\u30fc\u30bf\u304c\u591a\u3044\u3002\u5177\u4f53\u7684\u306b\u306f\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6570\uff0c\u4e16\u4ee3\u6570\u306e\u6570\uff0c\u5b50\u4f9b\u306e\u6570\uff0c\u30b2\u30fc\u30e0\u306e\u56de\u6570\u3002\u3002\u3002\n\u307e\u305f\u5b9f\u884c\u901f\u5ea6\u304c\u9045\u3044\u3002\n\n#\u3061\u3087\u3063\u3068\u601d\u3063\u305f\u3053\u3068\n\u3053\u306e\u52d5\u753b\u3092\u307f\u3066\uff0c\u6642\u9593\u3054\u3068\u306e\u884c\u52d5\u3092\u907a\u4f1d\u5b50\u3068\u3059\u308b\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u3084\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u3002\n>[\u30b9\u30fc\u30d1\u30fc\u30de\u30ea\u30aa\u30d6\u30e9\u30b6\u30fc\u30ba\u3092\u5b66\u7fd2\u3055\u305b\u3066\u307f\u305f by\u30cb\u30b3\u30cb\u30b3](http://www.nicovideo.jp/watch/sm18721450)\n[\u30b9\u30fc\u30d1\u30fc\u30de\u30ea\u30aa\u30d6\u30e9\u30b6\u30fc\u30ba\u3092\u5b66\u7fd2\u3055\u305b\u3066\u307f\u305f byYOUTUBE](https://www.youtube.com/watch?v=yZJ1V-zv_gU)\n\n\u6210\u529f\u4f8b\u304c\u3042\u308b\u306e\u306f\u5927\u304d\u306a\u52b1\u307f\u306b\u306a\u308b\u3002\u305f\u3060\u3057\uff0c\u3053\u306e\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306f\u6c7a\u3081\u3089\u308c\u305f\u6642\u9593\u306b\u6c7a\u3081\u3089\u308c\u305f\u884c\u52d5\u3092\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u5fdc\u7528\u304c\u5229\u304b\u306a\u3044\u3002\u305d\u3053\u3067\u610f\u5473\u3065\u3051\u3068\u3057\u3066\u5f37\u5316\u5b66\u7fd2\u3092\u52a0\u3048\u308c\u3070\u3044\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3063\u305f\u3002\n\n#\u4eca\u5f8c\u306e\u65b9\u91dd\n\n\u5b9f\u6570\u5024\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u307f\u3067\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u653b\u7565\u3059\u308b\u306e\u306f\u3072\u3068\u307e\u305a\u7f6e\u3044\u3066\u304a\u304f\u3002\u6b21\u306f\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\uff0c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\uff0cQ-learning\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u4eba\u5de5\u77e5\u80fd\u3092\u4f5c\u308b\u3002\u5177\u4f53\u7684\u306b\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067\u884c\u3046\u3002\n\n1.\u6642\u9593\u3054\u3068\u306e\u884c\u52d5\u3092\u907a\u4f1d\u5b50\u3068\u3059\u308b\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u7406\u60f3\u7684\u306a\u500b\u4f53\u3092\u4f5c\u308b(\u30b9\u30b3\u30a2\u304c\u9ad8\u3044\uff0c\u30dc\u30fc\u30eb\u3092\u843d\u3068\u3055\u306a\u3044\u306a\u3069)\n2.\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u884c\u52d5\u3092\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u5b66\u7fd2\u3055\u305b\u308b\n3.\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u5f37\u5316\u5b66\u7fd2\u3092\u3055\u305b\u308b\n\n\u3064\u307e\u308a\uff0c\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3067\u7b54\u3048\u3092\u4f5c\u308a\uff0c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\u7b54\u3048\u3092\u4e38\u6697\u8a18\u3057\u3066\uff0c\u5f37\u5316\u5b66\u7fd2\u3067\u610f\u5473\u3092\u7406\u89e3\u3059\u308b\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u6642\u9593\u3054\u3068\u306e\u884c\u52d5\u3092\u907a\u4f1d\u5b50\u3068\u3059\u308b\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5b9f\u88c5\u3092\u3057\u3066\u307f\u308b\u3002\n\n\n#\u53c2\u8003\u6587\u732e\n\u524d\u56de\u306e\u8a18\u4e8b\n[\u5b9f\u6570\u5024\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306b\u3088\u308b\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u5b66\u7fd2](http://qiita.com/simanezumi1989/items/4f821de2b77850fcf508)\n\n\n#\u5b9f\u88c5\u30b3\u30fc\u30c9\n\n```html\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n<title>\u30d6\u30ed\u30c3\u30af\u5d29\u3057 - \u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af - \u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0</title>\n<meta http-equiv=\"Content-Style-Type\" content=\"text/css\">\n<meta http-equiv=\"Content-Script-Type\" content=\"text/javascript\">\n<meta name=\"robots\" content=\"noindex,nofollow\">\n<style type=\"text/css\">\n\nbody{ -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; font-size: 20px;}\ncanvas{ border: none; position: absolute; left: 10px; top: 10px;}\n#graph2{ cursor: pointer;}\n#data{ position: relative; top: 410px;}\n#myPercent{ width: 40px; font-size: inherit;}\n#quickCalc{ font-size: inherit;}\n\n</style>\n</head>\n<body>\n\n<canvas id='graph'></canvas>\n<canvas id='graph2'></canvas>\n<p id='data'>\n\t<input type='checkbox' id='resetEverytime' checked>\u843d\u3061\u305f\u3089\u30ea\u30bb\u30c3\u30c8<br>\n\t<input type='text' value='100' id='myPercent'>\u3000\n\t<input type='button' id='quickCalc' value='\u63cf\u753b\u305b\u305a\u306b\u8a08\u7b97'>\u3000\n\t<span id='myResult'></span>\n</p>\n\n<script>\n(function(){\n\t//\u30d0\u30fc\u3092\u52d5\u304b\u3059\u95a2\u6570\n\tfunction moveBar(In,T){\n\t\t\tvar action = Boltzmann(In,p.x,p.y,bar.x,p.vx,p.vy,T);\n\t\t\tvar tempX = bar.x+(action-1)*30; //\u5de6\u53f3\u306b30\u30d4\u30af\u30bb\u30eb\u307e\u305f\u306f\u52d5\u304b\u306a\u3044\n\t\t\tif (tempX<p.r) tempX = p.r; //\u5de6\u306e\u58c1\u306b\u5f53\u305f\u3063\u305f\u3089\u3001\u305d\u308c\u4ee5\u4e0a\u5de6\u3078\u306f\u884c\u304b\u306a\u3044\n\t\t\telse if (tempX>w-p.r) tempX = w-p.r; //\u53f3\u306e\u58c1\u306b\u5f53\u305f\u3063\u305f\u3089\u305d\u308c\u4ee5\u4e0a\u53f3\u3078\u306f\u884c\u304b\u306a\u3044\n\t\t\tbar.x = tempX;\n\t}\n\n\tfunction d(ID){ return document.getElementById(ID);}\n\tvar timer;\n\tvar paused = false, gameOver = false, gameEnded = true;\n\tvar numberOfBalls = 0; //\u4f7f\u7528\u3057\u305f\u30dc\u30fc\u30eb\u306e\u6570\n\tvar numberOfFrames = 0; //\u304b\u304b\u3063\u305f\u30d5\u30ec\u30fc\u30e0\u6570\uff08\u00f733\uff1d\u6642\u9593\uff08\u79d2\uff09\uff09\n\tvar graph = d('graph'), graph2 = d('graph2');\n\tvar g = graph.getContext('2d'), g2 = graph2.getContext('2d');\n\tvar w = 600, h = 400;\n\tgraph.width = graph2.width = w; graph.height = graph2.height = h;\n\tg.fillStyle = '#000';\n\tg.fillRect(0,0,w,h);\n\tg.save();\n\tg.font = '30px Arial';\n\tg.fillStyle = 'white';\n\tg.fillText('Click to Start',210,220);\n\tg.restore();\n\n\t// p\u306f\u30dc\u30fc\u30eb\u3002\u9806\u306bx\u5ea7\u6a19\u3001y\u5ea7\u6a19\u3001\u534a\u5f84\u3001\u901f\u5ea6x\u6210\u5206\u3001\u901f\u5ea6y\u6210\u5206,\u8272\n\tvar p = {x: 300, y: 20, r: 10, vx: 0, vy: 0, color: '#fff'};\n\n\t//bar\u306f\u68d2\u3002x\u5ea7\u6a19\u3001y\u306f\u539a\u307f\u3001L\u306f\u9577\u3055\u306e\u534a\u5206\u3001edge\u306f\u89d2\u5ea6\u304c\u4ed8\u304d\u59cb\u3081\u308b\u70b9\u306e\u7aef\u304b\u3089\u306e\u8ddd\u96e2\n\tvar bar = {x: 300, y: 10, L: 50, edge: 45, color: '#ff0'};\n\n\t//b\u306f\u30d6\u30ed\u30c3\u30af\u3002b.x\u3068b.y\u304c\u3068\u3082\u306b\u914d\u5217\u3067\u3001xy\u5ea7\u6a19\u3092\u793a\u3059\u3002w\u306fwidth\u3067\u5e45\u3001h\u306fheight\u3067\u9ad8\u3055\u3002\u5168\u3066\u540c\u3058\u5927\u304d\u3055\u306e\u9577\u65b9\u5f62\n\tvar b = {x: [], y: [], w: 20, h: 10, color: '#88f'};\n\n\tvar score = 0;\n\n\td('graph2').addEventListener('click',function(){\n\t\tif (gameEnded){\n\t\t\tgameEnded = false;\n\t\t\treset();\n\t\t\tdrawBG();\n\t\t\tmainLoop();\n\t\t}\n\t\telse if (paused){\n\t\t\tpaused = false;\n\t\t\tdrawBG();\n\t\t\tmainLoop();\n\t\t}\n\t\telse{\n\t\t\tpaused = true;\n\t\t\tclearTimeout(timer);\n\t\t\tg2.font = '30px Arial';\n\t\t\tg2.fillStyle = 'white';\n\t\t\tg2.fillText('paused',250,220);\n\t\t}\n\t},false);\n\n\tfunction reset(){\n\t\tbar.x = 300;\n\t\tp.x = bar.x; p.y = bar.y+p.r;\n\t\tvar angle = Math.PI*(10)/180;//Math.PI*(Math.random()*60-30)/180; //-30\uff5e30\n\t\tp.vx = Math.sin(angle)*12; p.vy = Math.cos(angle)*12; //cos\u3068sin\u306e\u53cd\u8ee2\u306b\u6ce8\u610f\n\t\tb.x = []; b.y = [];\n\t\tfor (var i=0; i<3; i++) for (var j=0; j<11; j++){\n\t\t\tb.x.push(w/2-10*b.w+j*b.w*2);\n\t\t\tb.y.push(340-i*b.h*2);\n\t\t}\n\t\tscore = numberOfBalls = numberOfFrames = 0;\n\t}\n\n\tfunction mainLoop(){\n\t\tg.fillStyle = '#000';\n\t\tg.fillRect(0,0,w,h);\n\t\tg.setTransform(1,0,0,-1,0,h);\n\n\t\t//\u30dc\u30fc\u30eb\u306e\u63cf\u753b\n\t\tg.beginPath();\n\t\tg.arc(p.x,p.y,p.r,0,2*Math.PI);\n\t\tg.fillStyle = p.color;\n\t\tg.fill();\n\t\t//\u30dc\u30fc\u30eb\u306e\u63cf\u753b\n\n\t\t//\u30d0\u30fc\u306e\u63cf\u753b\n\t\tg.fillStyle = bar.color;\n\t\tg.fillRect(bar.x-bar.L+p.r+3,0,(bar.L-p.r-3)*2,bar.y); //\u00b13\u306f\"\u904a\u3073\"\n\n\t\t//\u30dc\u30fc\u30eb\u3092\u73fe\u5728\u306e\u901f\u5ea6\u3092\u3082\u3068\u306b\u79fb\u52d5\u3055\u305b\u308b\n\t\tp.x += p.vx;\n\t\tp.y += p.vy;\n\n\t\t//\u30d0\u30fc\u3092\u52d5\u304b\u3059\n\t\tmoveBar(individual[best[1]],1.0/Math.log(Time+1.001));\n\t\tTime += 1;\n\n\t\t//\u3053\u3053\u304b\u3089\u885d\u7a81\u5224\u5b9a\u3002\u307e\u305a\u306f\u30d6\u30ed\u30c3\u30af\n\t\tif (p.y>=280){\n\t\t\tfor (var i=0,I=b.x.length,hit=false; i<I; i++){\n\t\t\t\tif ((p.y-b.y[i])*p.vy<0 && Math.abs(p.x-b.x[i])<=b.w && Math.abs(p.y-b.y[i])<=b.h+p.r){\n\t\t\t\t\tp.vy *= -1;\n\t\t\t\t\thit = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\telse if ((p.x-b.x[i])*p.vx<0 &&Math.abs(p.y-b.y[i])<=b.h && Math.abs(p.x-b.x[i])<=b.w+p.r){\n\t\t\t\t\tp.vx *= -1;\n\t\t\t\t\thit = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hit){\n\t\t\t\tscore += 10;\n\t\t\t\tb.x.splice(i,1); b.y.splice(i,1);\n\t\t\t\tdrawBG();\n\t\t\t\tif (b.x.length<=0){\n\t\t\t\t\tgameEnded = true;\n\t\t\t\t\td('graph2').style.cursor = 'pointer';\n\t\t\t\t\tg2.font = '40px Arial';\n\t\t\t\t\tg2.fillStyle = 'white';\n\t\t\t\t\tg2.fillText('SUCCESS !',200,200);\n\t\t\t\t\tvar timeLapse = Math.floor(100*numberOfFrames/33)/100;\n\t\t\t\t\tg2.fillText(timeLapse+' sec',220,250);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t//\u2193\u885d\u7a81\u5224\u5b9a\u3002\u3053\u3053\u304b\u3089\u58c1\n\t\tif (p.x>w-p.r){ p.x = w-p.r; p.vx *= -1;} //right\n\t\tif (p.x<p.r){\tp.x = p.r; p.vx *= -1;} //left\n\t\tif (p.y>h-p.r){\tp.y = h-p.r; p.vy *= -1;} //up\n\t\tif (p.y<p.r+bar.y){\n\t\t\tvar p_bar = Math.abs(p.x-bar.x);\n\t\t\tif (!gameOver && p_bar<=bar.L){\n\t\t\t\tvar X = (p.x>bar.x) ? 1 : -1;\u3000//\u885d\u7a81\u70b9\u306e\u30d0\u30fc\u306e\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb(X,1);\n\t\t\t\tif (p_bar<=bar.L-bar.edge) X = 0; //\u30d0\u30fc\u306e\u4e2d\u592e\n\t\t\t\telse if (p_bar<=bar.L-bar.edge/3) X *= (p_bar-bar.L+bar.edge)/100; //0\uff5e0.3\uff08\u30d0\u30fc\u306e\u7aef\u306f\u7d0473\u00b0\uff09\n\t\t\t\telse X *= 0.3;\n\t\t\t\tvar L = Math.sqrt(X*X+1); //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\n\t\t\t\tvar vec = {x: X/L, y: 1/L}; //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u6b63\u898f\u5316\n\t\t\t\tvar dot = vec.x*p.vx+vec.y*p.vy;\n\t\t\t\tp.y = p.r+bar.y;\n\t\t\t\tp.vx -= 2*dot*vec.x;\n\t\t\t\tp.vy -= 2*dot*vec.y;\n\t\t\t\tif (Math.abs(p.vx)/p.vy>1.5){ //\u89d2\u5ea6\u304c\u4ed8\u304d\u904e\u304e\u306a\u3044\u3088\u3046\u8abf\u6574\n\t\t\t\t\tvar v2 = p.vx*p.vx+p.vy*p.vy;\n\t\t\t\t\tp.vy = Math.sqrt(v2/3.25);\n\t\t\t\t\tp.vx = (p.vx<0) ? -p.vy*1.5 : p.vy*1.5;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!gameOver && p.y<p.r) gameOver = true;\n\t\t\telse if (gameOver && p.y<-p.r){\n\t\t\t\tgameOver = false;\n\t\t\t\tif (d('resetEverytime').checked) reset();\n\t\t\t\telse{\n\t\t\t\t\tp.x = bar.x; p.y = bar.y+p.r;\n\t\t\t\t\tvar angle = Math.PI*(30)/180;//Math.PI*(Math.random()*60-30)/180; //-30\uff5e30\n\t\t\t\t\tp.vx = Math.sin(angle)*12; p.vy = Math.cos(angle)*12; //cos\u3068sin\u306e\u53cd\u8ee2\u306b\u6ce8\u610f\n\t\t\t\t\tnumberOfBalls++;\n\t\t\t\t}\n\t\t\t\tdrawBG();\n\t\t\t}\n\t\t}\n\t\tnumberOfFrames++;\n\t\ttimer = setTimeout(mainLoop,10); //30\u30df\u30ea\u79d2\u5f8c\u306bmainloop\u5b9f\u884c (-> 1\u79d2\u306b\u7d0430\u56de\u7e70\u308a\u8fd4\u3059)\n\t}\n\n\t//\u2193\u30d6\u30ed\u30c3\u30af\u306e\u63cf\u753b\u3002\u52d5\u304d\u304c\u306a\u3044\u306e\u306b\u6bce\u56de\u63cf\u304f\u306e\u306f\u7121\u99c4\u306a\u306e\u3067\u3001\u5225\u306b\u3057\u3066\u51e6\u7406\u3092\u7bc0\u7d04\u3002\n\tfunction drawBG(){\n\t\tg2.clearRect(0,0,w,h);\n\t\tg2.font = '20px Arial';\n\t\tg2.fillStyle = '#fff';\n\t\tg2.fillText('Balls:\u3000'+numberOfBalls,15,25);\n\t\tg2.fillText('Score:\u3000'+score,480,25);\n\t\tg2.save();\n\t\tg2.setTransform(1,0,0,-1,0,h);\n\t\tg2.fillStyle = '#ccf';\n\t\tfor (var i=0,I=b.x.length; i<I; i++) g2.fillRect(b.x[i]-b.w,b.y[i]-b.h,2*b.w,2*b.h);\n\t\tg2.fillStyle = b.color;\n\t\tfor (var i=0; i<I; i++) g2.fillRect(b.x[i]-b.w+1,b.y[i]-b.h+1,2*b.w-2,2*b.h-2);\n\t\tg2.restore();\n\t};\n\n\t//\u30dc\u30eb\u30c4\u30de\u30f3\u9078\u629e\n\tfunction Boltzmann(In,x,y,z,vx,vy,T){\n\t\tvar myNet = [net(In,x,y,z,vx,vy,0),net(In,x,y,z,vx,vy,1),net(In,x,y,z,vx,vy,2)];//net(\u500b\u4f53,,,0)=\u884c\u52d50\u306e\u4fa1\u5024\n\t\tvar prob = new Array(3);\n\t\tfor(var i=0;i<3;i++){\n\t\t\tprob[i] = Math.exp(myNet[i]/T)/(Math.exp(myNet[0]/T) + Math.exp(myNet[1]/T) + Math.exp(myNet[2]/T));\n\t\t};\n\t\tvar select = Math.random();\n\t\tfor(var i=0,sum=0.0;i<3;i++){\n\t\t\tsum +=prob[i]\n\t\t\tif (select<sum) {\n\t\t\t\treturn i;\n\t\t\t};\n\t\t};\n\t};\n\n\tconsole.log(\"start\");\n\tvar Time = 0;\n\n\t//\u2193\u3053\u3053\u304b\u3089\u8a08\u7b97\u7528\n\tfunction calculate(In){\n\t\twhile (numberOfFrames<1000){\n\n\t\t\tp.x += p.vx;\n\t\t\tp.y += p.vy;\n\t\t\tmoveBar(In,1.0/Math.log(Time + 1.000010));\t\t\t\t\n\t\t\tTime += 1;\n\n\t\t\tif (p.y>=280){\n\t\t\t\tfor (var i=0,I=b.x.length,hit=false; i<I; i++){\n\t\t\t\t\tif ((p.y-b.y[i])*p.vy<0 && Math.abs(p.x-b.x[i])<=b.w && Math.abs(p.y-b.y[i])<=b.h+p.r){\n\t\t\t\t\t\tp.vy *= -1;\thit = true;\tbreak;}\n\t\t\t\t\telse if ((p.x-b.x[i])*p.vx<0 && Math.abs(p.y-b.y[i])<=b.h && Math.abs(p.x-b.x[i])<=b.w+p.r){\n\t\t\t\t\t\tp.vx *= -1;\thit = true;\tbreak;}\n\t\t\t\t}\n\t\t\t\tif (hit){\n\t\t\t\t\tscore += 10;\n\t\t\t\t\treward += 10;\n\t\t\t\t\tb.x.splice(i,1); b.y.splice(i,1);\n\t\t\t\t\tif (b.x.length==0) break;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (p.x>w-p.r){ p.x = w-p.r; p.vx *= -1;} //right\n\t\t\tif (p.x<p.r){\tp.x = p.r; p.vx *= -1;} //left\n\t\t\tif (p.y>h-p.r){\tp.y = h-p.r; p.vy *= -1;} //up\n\t\t\tif (p.y<p.r+bar.y){\n\t\t\t\tvar p_bar = Math.abs(p.x-bar.x);\n\t\t\t\tif (p_bar<=bar.L){\n\t\t\t\t\tvar X = (p.x>bar.x) ? 1 : -1;\u3000//\u885d\u7a81\u70b9\u306e\u30d0\u30fc\u306e\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb(X,1);\n\t\t\t\t\tif (p_bar<=bar.L-bar.edge) X = 0; //\u30d0\u30fc\u306e\u4e2d\u592e\n\t\t\t\t\telse if (p_bar<=bar.L-bar.edge/3) X *= (p_bar-bar.L+bar.edge)/100; //0\uff5e0.3\uff08\u30d0\u30fc\u306e\u7aef\u306f\u7d0473\u00b0\uff09\n\t\t\t\t\telse X *= 0.3;\n\t\t\t\t\tvar L = Math.sqrt(X*X+1); //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u9577\u3055\n\t\t\t\t\tvar vec = {x: X/L, y: 1/L}; //\u6cd5\u7dda\u30d9\u30af\u30c8\u30eb\u306e\u6b63\u898f\u5316\n\t\t\t\t\tvar dot = vec.x*p.vx+vec.y*p.vy;\n\t\t\t\t\tp.y = p.r+bar.y;\n\t\t\t\t\tp.vx -= 2*dot*vec.x;\n\t\t\t\t\tp.vy -= 2*dot*vec.y;\n\t\t\t\t\tif (Math.abs(p.vx)/p.vy>1.5){ //\u89d2\u5ea6\u304c\u4ed8\u304d\u904e\u304e\u306a\u3044\u3088\u3046\u8abf\u6574\n\t\t\t\t\t\tvar v2 = p.vx*p.vx+p.vy*p.vy;\n\t\t\t\t\t\tp.vy = Math.sqrt(v2/3.25);\n\t\t\t\t\t\tp.vx = (p.vx<0) ? -p.vy*1.5 : p.vy*1.5;\n\t\t\t\t\t}\n\t\t\t\t\treward = +10;\n\t\t\t\t}else if (p.y<p.r){\n\t\t\t\t\tbreak;\t\n\t\t\t\t};\n\t\t\t};\n\t\t\tnumberOfFrames++;\n\t\t};\n\t};\n\n\t//\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\n\n\t//\u521d\u671f\u8a2d\u5b9a\n\n\t// \u30d0\u30a4\u30a2\u30b9\u3042\u308a\u306e(6,33,3)\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\n\tconst INLEN = 6;\n\tconst HIDLEN = 30;\n\tconst OUTLEN = 3;\n\n\t//\u907a\u4f1d\u5b50\u304c\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u91cd\u307f\u3068\u306a\u308b\u500b\u4f53\u3092\u4f5c\u308b\n\t\n\tvar N = 10;//\u500b\u4f53\u6570\n\tvar individual = new Array(N);\n\tvar chrom = INLEN*(HIDLEN - 1) + HIDLEN*OUTLEN;//\u907a\u4f1d\u5b50\u6570=\u91cd\u307f\u306e\u6570\n\n\t//\u521d\u671f\u306e\u907a\u4f1d\u5b50\u6c7a\u5b9a(\u30e9\u30f3\u30c0\u30e0)\n\tfor(var n=0;n<N;n++){\n\t\tindividual[n] = new Array(chrom);\n\t\tfor(var c=0;c<chrom;c++){\n\t\t\tindividual[n][c] = Math.random()-0.5;//-0.5\u301c0.5\n\t\t};\n\t};\n\n\t//\u6700\u3082\u826f\u3044\u500b\u4f53\u3068\u305d\u306e\u756a\u53f7\u3092\u5165\u308c\u308b\u914d\u5217\n\tvar best = new Array(2);\n\n\t//\u64cd\u4f5c\u3092GENERATION\u56de\u7e70\u308a\u8fd4\u3059\n\tconst GENERATION = 50;\n\tfor(var ge=0;ge<GENERATION;ge++){\n\n\t\tif (ge == GENERATION-1){\n\t\t\t//\u7d50\u679c\u306e\u51fa\u529b\n\t\t\tbest = [evaluation(individual[0]),0];//evaluation(\u500b\u4f53)=\u30b2\u30fc\u30e0\u30b9\u30b3\u30a2\n\t\t\tfor(var n=0;n<N;n++){\n\t\t\t\tif(evaluation(individual[n])>best[0]){\n\t\t\t\t\tbest[0] = evaluation(individual[n]);\n\t\t\t\t\tbest[1] = n;\n\t\t\t\t};\n\t\t\t};\n\t\t\tconsole.log(\"best : \", best[0]);\n\t\t\tbreak;\n\t\t};\n\n\t\t//\u9078\u629e\u3068\u4ea4\u53c9\n\t\t//MGG\u9078\u629e\n\t\tconst crossrate = 0.8;\n\t\tif(crossrate>Math.random()){\n\n\t\t\t//\u89aa\u9078\u629e\n\t\t\tvar r1 = Math.floor(Math.random()*N);\n\t\t\tvar r2 = Math.floor(Math.random()*N);\n\t\n\t\t\t//\u89aa\u3068\u5b50\u4f9b\u3092\u542b\u3081\u3066\uff0c\u30a8\u30ea\u30fc\u30c8\uff0b\u30eb\u30fc\u30ec\u30c3\u30c8\u3067\u4e8c\u500b\u4f53\u3092\u751f\u6210\n\t\t\tconst CHILDLEN = 2;\n\t\t\tvar child = new Array(CHILDLEN);\n\t\t\tfor(var n=0;n<CHILDLEN;n++){\n\t\t\t\tchild[n] = new Array(chrom);\n\t\t\t\tfor(var c=0;c<chrom;c++){\n\t\t\t\t\tvar parent=[individual[r1][c],individual[r2][c]];\n\t\t\t\t\tif(n==0){\n\t\t\t\t\t\tchild[0][c] = parent[0];\n\t\t\t\t\t}else if(n==1){\n\t\t\t\t\t\tchild[1][c] = parent[1];\n\t\t\t\t\t}else{\n\t\t\t\t\t\t//BLX-\u03b1\n\t\t\t\t\t\tconst ALPHA = 0.5;\n\t\t\t\t\t\tvar minP = Math.min(parent[0],parent[1])-ALPHA*Math.abs(parent[0]-parent[1]);\n\t\t\t\t\t\tvar maxP = Math.max(parent[0],parent[1])+ALPHA*Math.abs(parent[0]-parent[1]);\n\t\t\t\t\t\tchild[n][c] = minP + Math.random()*(maxP - minP);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t//\u8aa4\u5dee\u95a2\u6570E\u304c\u6700\u5c0f\u306e\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\n\t\t\tvar top = [evaluation(child[0]),0];\n\t\t\tfor(var n=1;n<CHILDLEN;n++){\n\t\t\t\tif(evaluation(child[n])>top[0]){\n\t\t\t\t\ttop[0] = evaluation(child[n]);\n\t\t\t\t\ttop[1] = n;\n\t\t\t\t};\n\t\t\t};\n\t\t\n\t\t\t//\u30eb\u30fc\u30ec\u30c3\u30c8\u9078\u629e\u3067\u6c7a\u5b9a\u3057\u305f\u500b\u4f53\u756a\u53f7\u306e\u53d6\u5f97\n\t\t\tvar total = 0;\n\t\t\tfor(var n=0;n<CHILDLEN;n++){\n\t\t\t\ttotal += evaluation(child[n]);\n\t\t\t};\n\t\t\tvar arrow = Math.random()*total;\n\t\t\tvar select = 0;\n\t\t\tfor(var n=0,sum=0.0;n<CHILDLEN;n++){\n\t\t\t\tsum += evaluation(child[n]);\n\t\t\t\tif(sum>arrow){\n\t\t\t\t\tselect = n;\n\t\t\t\t\tbreak;\n\t\t\t\t};\n\t\t\t};\n\n\t\t\t//\u7591\u554f\uff1aindividual\u304c\u5909\u66f4\u3055\u308c\u308c\u3070child\u3082\u5909\u66f4\u3055\u308c\u308b\u306e\u304b\uff1f\n\t\t\tfor(var c=0;c<chrom;c++){\n\t\t\t\tindividual[r1][c] = child[top[1]][c];\n\t\t\t\tindividual[r2][c] = child[select][c];\n\t\t\t};\t\t\n\t\t};\n\t\t//\u7a81\u7136\u5909\u7570\u306f\u884c\u308f\u306a\u3044\n\t};\n\n\t//\u8aa4\u5dee\u95a2\u6570evaluation(\u500b\u4f53[\u500b\u4f53\u756a\u53f7]) = \u30b2\u30fc\u30e0\u30b9\u30b3\u30a2\n\tvar reward;\n\tfunction evaluation(In){\n\t\treward = 0;\n\t\tvar copyi = new Array(chrom);\n\t\tfor(var c=0;c<chrom;c++){\n\t\t\tcopyi[c] = In[c];\n\t\t};\n\t\tfor(var count=0;count<10;count++){\n\t\t\treset();\n\t\t\tcalculate(copyi);//\u500b\u4f53\u304c\u30b2\u30fc\u30e0\u3092\u3059\u308b\n\t\t};\n\t\treturn reward//\u30d6\u30ed\u30c3\u30af\u5d29\u3057\u306e\u30b9\u30b3\u30a2\u3092\u4e0e\u3048\u308b\n\t};\n\n\t//\u30b7\u30b0\u30e2\u30a4\u30c9\u95a2\u6570\n\tfunction sigmoid(x){\n\t\tconst A = 1.0;\n\t\treturn 1.0/(1.0 + Math.exp(-A*x));\n\t};\n\t//\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af(\u500b\u4f53,\u500b\u4f53\u756a\u53f7,\u5165\u529b0,\u5165\u529b1) = \u884c\u52d5a\u306e\u4fa1\u5024\n\tfunction net(In,x,y,z,vx,vy,a){\n\t\tvar copyi = new Array(chrom);\n\t\tfor(var c=0;c<chrom;c++){\n\t\t\tcopyi[c] = In[c];\n\t\t};\n\t\tvar c = 0;\n\n\t\t//\u91cd\u307f\n\t\tvar input_W = new Array(INLEN);\n\t\tfor(var i=0;i<INLEN;i++){\n\t\t\tinput_W[i] = new Array(HIDLEN-1);\n\t\t\tfor(var j=0;j<HIDLEN-1;j++){\n\t\t\t\tinput_W[i][j] = copyi[c];\n\t\t\t\tc++;\n\t\t\t};\n\t\t};\n\n\t\tvar hidden_W = new Array(HIDLEN);\n\t\tfor(var i=0;i<HIDLEN;i++){\n\t\t\thidden_W[i] = new Array(OUTLEN);\n\t\t\tfor(var j=0;j<OUTLEN;j++){\n\t\t\t\thidden_W[i][j] = copyi[c];\n\t\t\t\tc++;\n\t\t\t};\n\t\t};\n\n\t\t//\u30cb\u30e5\u30fc\u30ed\u30f3\u306e\u6c7a\u5b9a\n\t\tvar input_N = [x/600,y/400,z/600,vx,vy,-1];\n\t\tvar hidden_N = new Array(HIDLEN-1);\n\t\thidden_N.push(-1);\n\t\tvar output_N = new Array(OUTLEN);\n\n\t\tfor(i=0;i<HIDLEN-1;i++){\n\t\t\tvar input_SUM = 0.0;\n\t\t\tfor(var j=0;j<INLEN;j++){\n\t\t\t\tinput_SUM += input_W[j][i]*input_N[j];\n\t\t\t};\n\t\t\thidden_N[i] = sigmoid(input_SUM);\n\t\t};\n\t\tfor(var i=0;i<OUTLEN;i++){\n\t\t\tvar hidden_SUM = 0.0;\n\t\t\tfor(var j=0;j<HIDLEN;j++){\n\t\t\t\thidden_SUM += hidden_W[j][i]*hidden_N[j];\n\t\t\t};\n\t\t\toutput_N[i] = sigmoid(hidden_SUM);\n\t\t};\n\t\treturn output_N[a];\n\t};\n})();\n</script>\n</body>\n</html>\n```\n\n\u203b \u7d50\u679c\u306f\u4e0a\u306b\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\n", "tags": ["\u907a\u4f1d\u7684\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0", "\u30cb\u30e5\u30fc\u30e9\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af", "\u30d6\u30ed\u30c3\u30af\u5d29\u3057", "JavaScript", "\u4eba\u5de5\u77e5\u80fd"]}