{"context": "\n\n\u4f55\u3068\u8a00\u3046\u304b\n\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u9694\u304c\u5206\u304b\u3063\u305f\u304b\u3089\u4f55\u306a\u3093\u3060\u3001\u3068\u8a00\u3046\u6c17\u304c\u3057\u306a\u3044\u3067\u3082\u306a\u3044\u3067\u3059\u304c\u3001\u52d5\u753b\u914d\u4fe1\u306e\u4ed5\u4e8b\u3092\u3057\u3066\u3044\u308b\u3068\n\u5e74\u306b2\uff5e3\u56de\u306f\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u9694\u3092\u8abf\u3079\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u5c0f\u30cd\u30bf\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nmp4box\u3092\u4f7f\u3046\n\u3053\u3093\u306a\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304d\u307e\u3059\u3002\nmp4box -dts some.mp4\n\n\u3059\u308b\u3068\u3001some_ts.txt\u3068\u8a00\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u305d\u308c\u3092\u958b\u304d\u307e\u3059\u3002\n#dumping track ID 1 timing:\nNum         DTS         CTS         Size    RAP Offset  isLeading   DependsOn   DependedOn  Redundant   RAP-SampleGroup Roll-SampleGroup    Roll-Distance\nSample 1    DTS 0       CTS 0       1659    1   128407  0           0           0           0           0               0                   0\nSample 2    DTS 1001    CTS 1001    476     0   130066  0           0           0           0           0               0                   0\nSample 3    DTS 2002    CTS 2002    208     0   130542  0           0           0           0           0               0                   0\nSample 4    DTS 3003    CTS 3003    167     0   130750  0           0           0           0           0               0                   0\n                                       \u30fb\n                                       \u30fb\n                                       \u30fb\nSample 55   DTS 54054   CTS 54054   7228    0   453175  0           0           0           0           0               0                   0\nSample 56   DTS 55055   CTS 55055   8792    0   460403  0           0           0           0           0               0                   0\nSample 57   DTS 56056   CTS 56056   9341    0   469195  0           0           0           0           0               0                   0\nSample 58   DTS 57057   CTS 57057   8719    0   485898  0           0           0           0           0               0                   0\nSample 59   DTS 58058   CTS 58058   8430    0   494617  0           0           0           0           0               0                   0\nSample 60   DTS 59059   CTS 59059   8284    0   503047  0           0           0           0           0               0                   0\nSample 61   DTS 60060   CTS 60060   18047   1   511331  0           0           0           0           0               0                   0\nSample 62   DTS 61061   CTS 61061   9091    0   529378  0           0           0           0           0               0                   0\nSample 63   DTS 62062   CTS 62062   8669    0   538469  0           0           0           0           0               0                   0\nSample 64   DTS 63063   CTS 63063   8897    0   547138  0           0           0           0           0               0                   0\n                                       \u30fb\n                                       \u30fb\n                                       \u30fb\nSample 117  DTS 116116  CTS 116116  5087    0   1170777 0           0           0           0           0               0                   0\nSample 118  DTS 117117  CTS 117117  4568    0   1175864 0           0           0           0           0               0                   0\nSample 119  DTS 118118  CTS 118118  4550    0   1180432 0           0           0           0           0               0                   0\nSample 120  DTS 119119  CTS 119119  4547    0   1184982 0           0           0           0           0               0                   0\nSample 121  DTS 120120  CTS 120120  32371   1   1189529 0           0           0           0           0               0                   0\nSample 122  DTS 121121  CTS 121121  1740    0   1221900 0           0           0           0           0               0                   0\nSample 123  DTS 122122  CTS 122122  3630    0   1223640 0           0           0           0           0               0                   0\nSample 124  DTS 123123  CTS 123123  4245    0   1227270 0           0           0           0           0               0                   0\n                                       \u30fb\n                                       \u30fb\n                                       \u30fb\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\u5404sample\u306eDTS\u3084CTS\u3001\u30b5\u30a4\u30ba\u306a\u306e\u304c\u4e00\u89a7\u3067\u304d\u307e\u3059\u3002\n\n\u4e00\u89a7\u3092\u773a\u3081\u308b\n\u5404\u884c\u306eRAP\u5217\u306b\u6ce8\u76ee\u3057\u307e\u3059\u3002RAP\u306fRandom Access Point\u306e\u7565\u3067\u3001\u8981\u306f\u52d5\u753b\u518d\u751f\u6642\u306b\u30b7\u30fc\u30af\u3092\u884c\u3063\u305f\u969b\u306b\u518d\u751f\u3055\u308c\u308b\u7b87\u6240\u3067\u3059\u3002\n\u3053\u306eRAP\u5217\u306b1\u304c\u7acb\u3063\u3066\u3044\u308bSample\u304c\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u3067\u3059\u3002\u3068\u8a00\u3046\u4e8b\u3067\u3001RAP\u5217\u306b1\u304c\u7acb\u3063\u305fsample\u306eDTS\u306e\u9593\u9694\u304c\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u306b\u306a\u308a\u307e\u3059\u3002\nSample 1    DTS 0       CTS 0       1659    1   128407  0   0   0   0   0   0   0\nSample 61   DTS 60060   CTS 60060   18047   1   511331  0   0   0   0   0   0   0\nSample 121  DTS 120120  CTS 120120  32371   1   1189529 0   0   0   0   0   0   0\nSample 181  DTS 180180  CTS 180180  21589   1   1525255 0   0   0   0   0   0   0\nSample 241  DTS 240240  CTS 240240  22444   1   1863545 0   0   0   0   0   0   0\nSample 301  DTS 300300  CTS 300300  28871   1   2082679 0   0   0   0   0   0   0\nSample 361  DTS 360360  CTS 360360  23859   1   2504712 0   0   0   0   0   0   0\nSample 421  DTS 420420  CTS 420420  29967   1   3031985 0   0   0   0   0   0   0\nSample 481  DTS 480480  CTS 480480  32377   1   3386185 0   0   0   0   0   0   0\nSample 541  DTS 540540  CTS 540540  32139   1   3677139 0   0   0   0   0   0   0\nSample 601  DTS 600600  CTS 600600  31110   1   4110642 0   0   0   0   0   0   0\n\n\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306eSample\u3060\u3051\u3092\u5e7e\u3064\u304b\u629c\u7c8b\u3057\u3066\u307f\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\u304d\u308c\u3044\u306b60Sample\u305a\u3064\u3001DTS\u304c60060\u305a\u3064\u306e\u5dee\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\u52d5\u753b\u914d\u4fe1\u306b\u9069\u3057\u305f\u30a8\u30f3\u30b3\u30fc\u30c9\u304c\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u3067\u3059\u3002\n\u3053\u306e\u4e00\u89a7\u306eDTS\u306f\u79d2\u3067\u306f\u306a\u304f\u3001\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u3092\u30d9\u30fc\u30b9\u306b\u3057\u305f\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u306a\u306e\u3067\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u3067\u5272\u3063\u3066\u3042\u3052\u308b\u3068\u79d2\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306emp4\u306e\u6620\u50cf\u30c8\u30e9\u30c3\u30af\u306e\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u306f30000\u306a\u306e\u3067\u300160060 \u00f7 30000 = 2.002 \u3068\u306a\u308a\u3001\u3053\u306emp4\u306e\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u306f\u7d042\u79d2\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u5225\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\n\u3053\u3053\u307e\u3067\u306fmp4box\u3092\u4f7f\u3063\u3066\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u3092\u8abf\u3079\u307e\u3057\u305f\u304c\u3001mp4\u3092\u30d0\u30a4\u30ca\u30ea\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u3044\u3066\u300c\u3075\u3080\u3075\u3080\u3001\u30ca\u30eb\u30db\u30c9\u30fc\u300d\u3068\nmp4 Parsable EYE\u3092\u6301\u3064\u65b9\u306a\u3089\u3001mp4\u306e\u5185\u5bb9\u304b\u3089\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u3092\u8abf\u3079\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u5148\u7a0b\u306e\u3001RAP\u5217\u306b1\u304c\u7acb\u3063\u305fSample\u306e\u756a\u53f7\u306f\u3001Sync Smple Box (stss) \u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nISO/IEC 14496-12\u306e\u4ed5\u69d8\u3067\u8a00\u3046\u3068\naligned(8) class SyncSampleBox extends FullBox(\u2018stss\u2019, version = 0, 0) {\n  unsigned int(32) entry_count;\n  int i;\n  for (i=0; i < entry_count; i++) {\n    unsigned int(32) sample_number;\n  }\n}\n\n\u306esample_number\u304c\u305d\u308c\u306b\u5f53\u305f\u308a\u307e\u3059\u3002\n\u3067\u30011sample\u5f53\u305f\u308a\u306eDTS\u306b\u3064\u3044\u3066\u306f\u3001Decoding Time to Sample Box (stts) \u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\naligned(8) class TimeToSampleBox extends FullBox(\u2019stts\u2019, version = 0, 0) {\n  unsigned int(32) entry_count;\n  int i;\n  for (i=0; i < entry_count; i++) {\n    unsigned int(32) sample_count\n    unsigned int(32) sample_delta;\n  }\n}\n\n\u306esample_delta\u304c\u305d\u308c\u306b\u5f53\u305f\u308a\u307e\u3059\u3002stts\u306b\u306f\u4ed5\u69d8\u4e0aentry\u3092\u8907\u6570\u6301\u3064\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u304c\u3001\u5927\u62b5\u306e\u5834\u5408\u306f1\u3064\u306a\u306e\u3067\n\u4f7f\u7528\u3059\u308bsample_delta\u30821\u3064\u3067\u3059\u3002\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u306esample_delta\u3092\u9069\u7528\u3059\u308bsample\u306e\u6570\u304csample_count\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\nsample\u3068sample_delta\u306e\u7d44\u5408\u308f\u305b\u306f\u4e00\u76ee\u3067\u5206\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u306f\u3001Media Header Box (mdhd) \u306etimescale\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3089\u3092\u4f7f\u3063\u3066\u306e\u8a08\u7b97\u3092\nint i;\ndouble[] keyframe_durations = double[stss.entry_count - 1];\nfor (i=0; i < stss.entry_count - 1; i++)\n  int sampleCount = stss.entry[i+1].sample_number - stss.entry[i].sample_number;\n  keyframe_durations = sampleCount * stts.entry[0].sample_delta / mdhd.timascale;\n}\n\n\u9069\u5f53\u306b\u30b3\u30fc\u30c9\u306b\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3067\u3057\u3087\u3046\u304b\u3002\n\u4eca\u56de\u4f7f\u7528\u3057\u3066\u3044\u308bmp4\u3092\u898b\u3066\u307f\u308b\u3068\u3001\nmdhd.timesclae = 30000\nstss.entry_count = 30\nstss.sample_number = 1, 61, 121, 181, 241, 301 ....\nstts.entry_count = 1\nstts.entry[0].sample_count = 1800\nstts.entry[0].sample_delta = 1001\n\n\u306a\u306e\u3067\u3001\n\u6700\u521d\u306e\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u3068\u6b21\u306e\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u306esample\u6570\u306f\u300161 - 1 = 60\n1sampe\u5f53\u305f\u308a\u306edelta\u306f1001\u306a\u306e\u306760sample\u3060\u3068DTS\u306f\u300160 * 1001 = 60060\ntimescale\u306f30000\u306a\u306e\u3067\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u9694\u306f\u300160060 / 30000 = 2.002 \u79d2\n\u3068\u306a\u308a\u3001mp4box\u3067\u8abf\u3079\u305f\u5834\u5408\u3068\u540c\u3058\u7d50\u679c\u306b\u306a\u308a\u307e\u3059\u3002\n\u4ee5\u4e0a\u306e\u3088\u3046\u306b\u3001mp4 Parsable\u306a\u76ee\u3092\u6301\u3064\u65b9\u306a\u3089mp4box\u3092\u4f7f\u7528\u305b\u305a\u3068\u3082\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u3092\u77e5\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n## \u4f55\u3068\u8a00\u3046\u304b\n\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u9694\u304c\u5206\u304b\u3063\u305f\u304b\u3089\u4f55\u306a\u3093\u3060\u3001\u3068\u8a00\u3046\u6c17\u304c\u3057\u306a\u3044\u3067\u3082\u306a\u3044\u3067\u3059\u304c\u3001\u52d5\u753b\u914d\u4fe1\u306e\u4ed5\u4e8b\u3092\u3057\u3066\u3044\u308b\u3068\n\u5e74\u306b2\uff5e3\u56de\u306f\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u9694\u3092\u8abf\u3079\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u5c0f\u30cd\u30bf\u3068\u3057\u3066\u6b8b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n## mp4box\u3092\u4f7f\u3046\n\u3053\u3093\u306a\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304d\u307e\u3059\u3002\n\n```\nmp4box -dts some.mp4\n```\n\u3059\u308b\u3068\u3001some_ts.txt\u3068\u8a00\u3046\u540d\u524d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u308b\u306e\u3067\u305d\u308c\u3092\u958b\u304d\u307e\u3059\u3002\n\n```\n#dumping track ID 1 timing:\nNum\t\t\tDTS\t\t\tCTS\t\t\tSize\tRAP\tOffset\tisLeading\tDependsOn\tDependedOn\tRedundant\tRAP-SampleGroup\tRoll-SampleGroup\tRoll-Distance\nSample 1\tDTS 0\t\tCTS 0\t\t1659\t1\t128407\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 2\tDTS 1001\tCTS 1001\t476\t\t0\t130066\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 3\tDTS 2002\tCTS 2002\t208\t\t0\t130542\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 4\tDTS 3003\tCTS 3003\t167\t\t0\t130750\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\n                                       \u30fb\n                                       \u30fb\n                                       \u30fb\nSample 55\tDTS 54054\tCTS 54054\t7228\t0\t453175\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 56\tDTS 55055\tCTS 55055\t8792\t0\t460403\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 57\tDTS 56056\tCTS 56056\t9341\t0\t469195\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 58\tDTS 57057\tCTS 57057\t8719\t0\t485898\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 59\tDTS 58058\tCTS 58058\t8430\t0\t494617\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 60\tDTS 59059\tCTS 59059\t8284\t0\t503047\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 61\tDTS 60060\tCTS 60060\t18047\t1\t511331\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 62\tDTS 61061\tCTS 61061\t9091\t0\t529378\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 63\tDTS 62062\tCTS 62062\t8669\t0\t538469\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 64\tDTS 63063\tCTS 63063\t8897\t0\t547138\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\n                                       \u30fb\n                                       \u30fb\n                                       \u30fb\nSample 117\tDTS 116116\tCTS 116116\t5087\t0\t1170777\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 118\tDTS 117117\tCTS 117117\t4568\t0\t1175864\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 119\tDTS 118118\tCTS 118118\t4550\t0\t1180432\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 120\tDTS 119119\tCTS 119119\t4547\t0\t1184982\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 121\tDTS 120120\tCTS 120120\t32371\t1\t1189529\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 122\tDTS 121121\tCTS 121121\t1740\t0\t1221900\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 123\tDTS 122122\tCTS 122122\t3630\t0\t1223640\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\nSample 124\tDTS 123123\tCTS 123123\t4245\t0\t1227270\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t0\t\t\t\t0\t\t\t\t\t0\n                                       \u30fb\n                                       \u30fb\n                                       \u30fb\n```\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\u5404sample\u306eDTS\u3084CTS\u3001\u30b5\u30a4\u30ba\u306a\u306e\u304c\u4e00\u89a7\u3067\u304d\u307e\u3059\u3002\n\n## \u4e00\u89a7\u3092\u773a\u3081\u308b\n\u5404\u884c\u306eRAP\u5217\u306b\u6ce8\u76ee\u3057\u307e\u3059\u3002RAP\u306fRandom Access Point\u306e\u7565\u3067\u3001\u8981\u306f\u52d5\u753b\u518d\u751f\u6642\u306b\u30b7\u30fc\u30af\u3092\u884c\u3063\u305f\u969b\u306b\u518d\u751f\u3055\u308c\u308b\u7b87\u6240\u3067\u3059\u3002\n\u3053\u306eRAP\u5217\u306b1\u304c\u7acb\u3063\u3066\u3044\u308bSample\u304c\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u3067\u3059\u3002\u3068\u8a00\u3046\u4e8b\u3067\u3001RAP\u5217\u306b1\u304c\u7acb\u3063\u305fsample\u306eDTS\u306e\u9593\u9694\u304c\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nSample 1\tDTS 0\t\tCTS 0\t\t1659\t1\t128407\t0\t0\t0\t0\t0\t0\t0\nSample 61\tDTS 60060\tCTS 60060\t18047\t1\t511331\t0\t0\t0\t0\t0\t0\t0\nSample 121\tDTS 120120\tCTS 120120\t32371\t1\t1189529\t0\t0\t0\t0\t0\t0\t0\nSample 181\tDTS 180180\tCTS 180180\t21589\t1\t1525255\t0\t0\t0\t0\t0\t0\t0\nSample 241\tDTS 240240\tCTS 240240\t22444\t1\t1863545\t0\t0\t0\t0\t0\t0\t0\nSample 301\tDTS 300300\tCTS 300300\t28871\t1\t2082679\t0\t0\t0\t0\t0\t0\t0\nSample 361\tDTS 360360\tCTS 360360\t23859\t1\t2504712\t0\t0\t0\t0\t0\t0\t0\nSample 421\tDTS 420420\tCTS 420420\t29967\t1\t3031985\t0\t0\t0\t0\t0\t0\t0\nSample 481\tDTS 480480\tCTS 480480\t32377\t1\t3386185\t0\t0\t0\t0\t0\t0\t0\nSample 541\tDTS 540540\tCTS 540540\t32139\t1\t3677139\t0\t0\t0\t0\t0\t0\t0\nSample 601\tDTS 600600\tCTS 600600\t31110\t1\t4110642\t0\t0\t0\t0\t0\t0\t0\n```\n\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306eSample\u3060\u3051\u3092\u5e7e\u3064\u304b\u629c\u7c8b\u3057\u3066\u307f\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\u304d\u308c\u3044\u306b60Sample\u305a\u3064\u3001DTS\u304c60060\u305a\u3064\u306e\u5dee\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u306d\u3002\u52d5\u753b\u914d\u4fe1\u306b\u9069\u3057\u305f\u30a8\u30f3\u30b3\u30fc\u30c9\u304c\u3055\u308c\u3066\u3044\u308b\u69d8\u5b50\u3067\u3059\u3002\n\n\u3053\u306e\u4e00\u89a7\u306eDTS\u306f\u79d2\u3067\u306f\u306a\u304f\u3001\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u3092\u30d9\u30fc\u30b9\u306b\u3057\u305f\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u306a\u306e\u3067\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u3067\u5272\u3063\u3066\u3042\u3052\u308b\u3068\u79d2\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306emp4\u306e\u6620\u50cf\u30c8\u30e9\u30c3\u30af\u306e\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u306f30000\u306a\u306e\u3067\u300160060 \u00f7 30000 = 2.002 \u3068\u306a\u308a\u3001\u3053\u306emp4\u306e\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u306f\u7d042\u79d2\u3068\u306a\u308a\u307e\u3059\u3002\n\n## \u5225\u306e\u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\n\u3053\u3053\u307e\u3067\u306fmp4box\u3092\u4f7f\u3063\u3066\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u3092\u8abf\u3079\u307e\u3057\u305f\u304c\u3001mp4\u3092\u30d0\u30a4\u30ca\u30ea\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u3044\u3066\u300c\u3075\u3080\u3075\u3080\u3001\u30ca\u30eb\u30db\u30c9\u30fc\u300d\u3068\nmp4 Parsable EYE\u3092\u6301\u3064\u65b9\u306a\u3089\u3001mp4\u306e\u5185\u5bb9\u304b\u3089\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u3092\u8abf\u3079\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u5148\u7a0b\u306e\u3001RAP\u5217\u306b1\u304c\u7acb\u3063\u305fSample\u306e\u756a\u53f7\u306f\u3001**Sync Smple Box (stss)** \u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nISO/IEC 14496-12\u306e\u4ed5\u69d8\u3067\u8a00\u3046\u3068\n\n```\naligned(8) class SyncSampleBox extends FullBox(\u2018stss\u2019, version = 0, 0) {\n  unsigned int(32) entry_count;\n  int i;\n  for (i=0; i < entry_count; i++) {\n    unsigned int(32) sample_number;\n  }\n}\n```\n\u306esample_number\u304c\u305d\u308c\u306b\u5f53\u305f\u308a\u307e\u3059\u3002\n\u3067\u30011sample\u5f53\u305f\u308a\u306eDTS\u306b\u3064\u3044\u3066\u306f\u3001**Decoding Time to Sample Box (stts)** \u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\naligned(8) class TimeToSampleBox extends FullBox(\u2019stts\u2019, version = 0, 0) {\n  unsigned int(32) entry_count;\n  int i;\n  for (i=0; i < entry_count; i++) {\n    unsigned int(32) sample_count\n    unsigned int(32) sample_delta;\n  }\n}\n```\n\u306esample_delta\u304c\u305d\u308c\u306b\u5f53\u305f\u308a\u307e\u3059\u3002stts\u306b\u306f\u4ed5\u69d8\u4e0aentry\u3092\u8907\u6570\u6301\u3064\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u304c\u3001\u5927\u62b5\u306e\u5834\u5408\u306f1\u3064\u306a\u306e\u3067\n\u4f7f\u7528\u3059\u308bsample_delta\u30821\u3064\u3067\u3059\u3002\u8907\u6570\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u306esample_delta\u3092\u9069\u7528\u3059\u308bsample\u306e\u6570\u304csample_count\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\nsample\u3068sample_delta\u306e\u7d44\u5408\u308f\u305b\u306f\u4e00\u76ee\u3067\u5206\u304b\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u30bf\u30a4\u30e0\u30b9\u30b1\u30fc\u30eb\u306f\u3001**Media Header Box (mdhd)** \u306etimescale\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3089\u3092\u4f7f\u3063\u3066\u306e\u8a08\u7b97\u3092\n\n```\nint i;\ndouble[] keyframe_durations = double[stss.entry_count - 1];\nfor (i=0; i < stss.entry_count - 1; i++)\n  int sampleCount = stss.entry[i+1].sample_number - stss.entry[i].sample_number;\n  keyframe_durations = sampleCount * stts.entry[0].sample_delta / mdhd.timascale;\n}\n```\n\n\u9069\u5f53\u306b\u30b3\u30fc\u30c9\u306b\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u3067\u3057\u3087\u3046\u304b\u3002\n\u4eca\u56de\u4f7f\u7528\u3057\u3066\u3044\u308bmp4\u3092\u898b\u3066\u307f\u308b\u3068\u3001\n\n```\nmdhd.timesclae = 30000\nstss.entry_count = 30\nstss.sample_number = 1, 61, 121, 181, 241, 301 ....\nstts.entry_count = 1\nstts.entry[0].sample_count = 1800\nstts.entry[0].sample_delta = 1001\n```\n\u306a\u306e\u3067\u3001\n\u6700\u521d\u306e\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u3068\u6b21\u306e\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u306esample\u6570\u306f\u3001**61 - 1 = 60**\n1sampe\u5f53\u305f\u308a\u306edelta\u306f1001\u306a\u306e\u306760sample\u3060\u3068DTS\u306f\u3001**60 * 1001 = 60060**\ntimescale\u306f30000\u306a\u306e\u3067\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u306e\u9593\u9694\u306f\u3001**60060 / 30000 = 2.002 \u79d2**\n\u3068\u306a\u308a\u3001mp4box\u3067\u8abf\u3079\u305f\u5834\u5408\u3068\u540c\u3058\u7d50\u679c\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4ee5\u4e0a\u306e\u3088\u3046\u306b\u3001mp4 Parsable\u306a\u76ee\u3092\u6301\u3064\u65b9\u306a\u3089mp4box\u3092\u4f7f\u7528\u305b\u305a\u3068\u3082\u30ad\u30fc\u30d5\u30ec\u30fc\u30e0\u9593\u9694\u3092\u77e5\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n", "tags": ["mp4box", "keyframe", "mp4"]}