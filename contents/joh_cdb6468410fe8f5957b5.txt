{"context": "\n\n\u9054\u6210\u3057\u305f\u3044\u3053\u3068\n\n\nPHP on Windows\u3067\u30c0\u30e1\u6587\u5b57\u3092\u542b\u3093\u3060\u30d1\u30b9\u3067 simplexml_load_file() \u3092\u4f7f\u3044\u305f\u3044\u2190\u30b3\u30b3\u5927\u4e8b $xml = new SimpleXMLElement(@file_get_contents($addslash_pass)\u3067\u30d1\u30fc\u30b9\u3067\u304d\u307e\u3057\u305f\n\nPHP on Windows\u3067\u30c0\u30e1\u6587\u5b57\u3092\u542b\u3093\u3060\u30d1\u30b9\u3067 file_exists() \u306a\u3069\u3092\u4f7f\u3044\u305f\u3044 @fopen($addslash_pass, 'r') \u3067\u4ee3\u66ff\u3067\u304d\u307e\u3057\u305f\nPHP on Windows\u3067\u30c0\u30e1\u6587\u5b57\u3092\u542b\u3093\u3060\u30d1\u30b9\u3067 is_dir() \u306a\u3069\u3092\u4f7f\u3044\u305f\u3044\n\n*$addslash_pass = $addslashes(mb_convert_encoding($xmlPath, \"cp932\", \"utf-8\"))\n\n\u5b9f\u884c\u74b0\u5883\nPHP5.6.3\nWindows 7, Windows Embeded Standard\nXampp(xampp-win32-5.6.3-0-VC11-installer)\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u73fe\u72b6\n\u4ee5\u4e0b\u306b\u884c\u3063\u305f\u8abf\u67fb\u3092\u8a18\u3057\u307e\u3059\u3002\n\n\u30d1\u30b9\u306b\u30a8\u30f3\u30b3\u30fc\u30c9\u5909\u63db\u3092\u565b\u307e\u305b\u306a\u3044\n\nmb_convert_encoding() \u3092\u884c\u3046\n\nmb_convert_encoding() \u3092\u884c\u3044\u3001addslashes() \u3082\u884c\u3046\n\n\u30c6\u30b9\u30c8\u6642\u306b\u306f\u4e0a\u8a18\u306e3\u3064\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3063\u305f\u306e\u3067\u3059\u304c\u30011, 2 \u306b\u3064\u3044\u3066\u306f\u9806\u5f53\u306a\u7d50\u679c\u3060\u3068\u601d\u308f\u308c\u308b\u306e\u3067\u3053\u3053\u3067\u306f\u8868\u306e\u63b2\u8f09\u3092\u7701\u304d\u307e\u3059\u3002\u8a73\u3057\u3044\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u3001\u4e0b\u8a18\u306e\u30c6\u30b9\u30c8\u30fb\u30b3\u30fc\u30c9\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\u4ee5\u4e0b\u7d50\u679c\u3002\u56f0\u3063\u3066\u3044\u308b\u306e\u306f\u30a2\u30b9\u30bf\u30ea\u30b9\u30af\u3067\u6ce8\u91c8\u3092\u4ed8\u3051\u3066\u3044\u308b\u70b9\u3067\u3059\u3002\n\u3044\u308f\u3086\u308b5C\u554f\u984c\u3001\u30c0\u30e1\u6587\u5b57\u3067\u8e93\u3044\u3066\u3044\u307e\u3059\u3002\n\u81ea\u5206\u306e\u30b3\u30fc\u30c9\u304c\u8aa4\u3063\u3066\u3044\u308b\u306e\u304b\u3001\u30a4\u30c7\u30a3\u30aa\u30e0\u7684\u306a\u66f8\u304d\u65b9\u304c\u3042\u308b\u306e\u304b\u3001PHP\u3068Shift-JIS\u306e\u30d1\u30b9\u306e\u76f8\u6027\u304c\u60aa\u3044\u306e\u304b\u308f\u304b\u3089\u305a\u3001\u56f0\u3063\u3066\u3044\u307e\u3059\u3002\u52a9\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u6271\u3044(addslashes + mb_convert_encoding)\n\n\n\n\nis_file()\nfile_exists()\nsimplexml_load_file()\ncopy()\nfopen()\n\n\n\n\nsample.xml\nT\nT\nT\nT\nT\n\n\n\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57.xml\nT\nT\nT\nT*2\nT\n\n\n\u30c0\u30e1\u6587\u5b57(\u8cbc).xml\nF*1\nF*1\nF*1\nT*2, 3\nT*3\n\n\n\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6271\u3044(addslashes + mb_convert_encoding)\n\n\n\n\ndir()\nis_dir()\nscandir\n\n\n\n\nsample_folder\nT\nT\nT\n\n\n\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57_folder\nT\nT\nT\n\n\n\u30c0\u30e1\u6587\u5b57(\u8cbc)_folder\nF*4\nF*4\nF*4\n\n\n\n1, 4 \u3053\u3053\u304cfalse\u306b\u306a\u308b\u306e\u304c\u56f0\u308b \n2 \u304a\u304b\u3057\u306a\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u8907\u88fd\u3055\u308c\u308b\u306e\u3067\u3001\u53b3\u5bc6\u306b\u306ftrue\u3067\u306f\u306a\u3044\n3 \u3053\u3053\u304ctrue\u306b\u306a\u308b\u7406\u7531\u304c\u308f\u304b\u3089\u306a\u3044 \n\n\u30c6\u30b9\u30c8\u30fb\u30b3\u30fc\u30c9\n<?php\n\nheader( 'Content-Type: text/html; charset=utf-8' );\n\nif ( setlocale( LC_ALL, '' ) === false )\n{\n    echo \"setlocale failed.\";\n    echo \"<br/>\";\n}\n\necho \"OS info: \", php_uname();\necho \"<br/>\";\necho \"PHP version: \", phpversion();\necho \"<br/>\";\necho \"locale: \", setlocale( LC_ALL, 0 );\necho \"<br/>\";\necho \"mb_get_info: \", var_dump( mb_get_info() );\necho \"<br/>\";\necho \"<br/>\";\n\n\necho \"<h2>\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u53d6\u308a\u6642\u306e\u3001\u30d1\u30b9\u306e\u6709\u52b9\u6027\u8abf\u67fb\uff08is_file, file_exists, simplexml_load_file\uff09</h2>\";\n\n$paths = array(\n    \"sample.xml\",\n    \"\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57.xml\",\n    \"\u30c0\u30e1\u6587\u5b57(\u8cbc).xml\",\n);\n\nforeach( $paths as $path )\n{\n    echo \"<h3>'$path' \u3092\u8aad\u307f\u53d6\u308b</h3>\";\n\n    echo '1. \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u5909\u63db\u306a\u3069\u306f\u884c\u308f\u306a\u3044';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> is_file: \", var_dump( is_file( $path ) );\n    echo \"<br/>\";\n    echo $path, \" -> file_exists: \", var_dump( file_exists( $path ) );\n    echo \"<br/>\";\n    echo $path, \" -> simplexml_load_file: \", var_dump( @simplexml_load_file( $path ) );\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n\n    $sjis_path = mb_convert_encoding( $path, \"cp932\", \"utf-8\" );\n\n    echo '2. mb_convert_encoding( $path ) \u3092\u884c\u3046';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> is_file: \", var_dump( is_file( $sjis_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> file_exists: \", var_dump( file_exists( $sjis_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> simplexml_load_file: \", var_dump( @simplexml_load_file( $sjis_path ) );\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n\n    $addslashes_path = addslashes( mb_convert_encoding( $path, \"cp932\", \"utf-8\" ) );\n\n    echo '3. addslashes( mb_convert_encoding( $path ) ) \u3092\u884c\u3046';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> is_file: \", var_dump( is_file( $addslashes_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> file_exists: \", var_dump( file_exists( $addslashes_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> simplexml_load_file: \", var_dump( @simplexml_load_file( $addslashes_path ) );\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n}\n\n\necho \"<h2>\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u53d6\u308a\u6642\u306e\u3001\u30d1\u30b9\u306e\u6709\u52b9\u6027\u8abf\u67fb\uff08copy, fopen\uff09</h2>\";\n\nforeach( $paths as $path )\n{\n    echo \"<h3>'$path' \u3092\u8aad\u307f\u53d6\u308b</h3>\";\n\n    echo '1. \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u5909\u63db\u306a\u3069\u306f\u884c\u308f\u306a\u3044';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> copy: \", var_dump( @copy( $path, \"copied_\".$path.\"1\" ) );\n    echo \"<br/>\";\n    echo $path, \" -> fopen: \", var_dump( $fp = @fopen( $path, 'r' ) ); if ( $fp ) { fclose($fp); }\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n\n    $sjis_path = mb_convert_encoding( $path, \"cp932\", \"utf-8\" );\n\n    echo '2. mb_convert_encoding( $path ) \u3092\u884c\u3046';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> copy: \", var_dump( @copy( $sjis_path, \"copied_\".$path.\"2\" ) );\n    echo \"<br/>\";\n    echo $path, \" -> fopen: \", var_dump( $fp = @fopen( $sjis_path, 'r' ) ); if ( $fp ) { fclose($fp); }\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n\n    $addslashes_path = addslashes( mb_convert_encoding( $path, \"cp932\", \"utf-8\" ) );\n\n    echo '3. addslashes( mb_convert_encoding( $path ) ) \u3092\u884c\u3046';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> copy: \", var_dump( copy( $addslashes_path, \"copied_\".$path.\"3\" ) );\n    echo \"<br/>\";\n    echo $path, \" -> fopen: \", var_dump( $fp = fopen( $addslashes_path, 'r' ) ); if ( $fp ) { fclose($fp); }\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n}\n\n\necho \"<h2>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u8aad\u307f\u53d6\u308a\u6642\u306e\u3001\u30d1\u30b9\u306e\u6709\u52b9\u6027\u8abf\u67fb\uff08dir, is_dir, scandir\uff09</h2>\";\n\n$paths = array(\n    \"C:\\\\xampp\\\\htdocs\\\\multibyte_5c_path\\\\sample_folder\",\n    \"C:\\\\xampp\\\\htdocs\\\\multibyte_5c_path\\\\\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57_folder\",\n    \"C:\\\\xampp\\\\htdocs\\\\multibyte_5c_path\\\\\u30c0\u30e1\u6587\u5b57(\u8cbc)_folder\",\n);\n\nforeach( $paths as $path )\n{\n    echo \"<h3>'$path' \u3092\u8aad\u307f\u53d6\u308b</h3>\";\n\n    echo '1. \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u5909\u63db\u306a\u3069\u306f\u884c\u308f\u306a\u3044';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> dir: \", var_dump( @dir( $path ) );\n    echo \"<br/>\";\n    echo $path, \" -> is_dir: \", var_dump( @is_dir( $path ) );\n    echo \"<br/>\";\n    echo $path, \" -> scandir: \", var_dump( @scandir( $path ) );\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n\n    $sjis_path = mb_convert_encoding( $path, \"cp932\", \"utf-8\" );\n\n    echo '2. mb_convert_encoding( $path ) \u3092\u884c\u3046';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> dir: \", var_dump( @dir( $sjis_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> is_dir: \", var_dump( @is_dir( $sjis_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> scandir: \", var_dump( @scandir( $sjis_path ) );\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n\n    $addslashes_path = addslashes( mb_convert_encoding( $path, \"cp932\", \"utf-8\" ) );\n\n    echo '3. addslashes( mb_convert_encoding( $path ) ) \u3092\u884c\u3046';\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo $path, \" -> dir: \", var_dump( @dir( $addslashes_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> is_dir: \", var_dump( @is_dir( $addslashes_path ) );\n    echo \"<br/>\";\n    echo $path, \" -> scandir: \", var_dump( @scandir( $addslashes_path ) );\n    echo \"<br/>\";\n    echo \"<br/>\";\n    echo \"<br/>\";\n}\n\n?>\n\nOS info: Windows NT ADMIN-PC 6.1 build 7601 (Windows 7 Business Edition Service Pack 1) i586\nPHP version: 5.6.3\nlocale: Japanese_Japan.932\nmb_get_info: array(14) { [\"internal_encoding\"]=> string(5) \"UTF-8\" [\"http_output\"]=> string(5) \"UTF-8\" [\"http_output_conv_mimetypes\"]=> string(31) \"^(text/|application/xhtml\\+xml)\" [\"func_overload\"]=> int(0) [\"func_overload_list\"]=> string(11) \"no overload\" [\"mail_charset\"]=> string(5) \"UTF-8\" [\"mail_header_encoding\"]=> string(6) \"BASE64\" [\"mail_body_encoding\"]=> string(6) \"BASE64\" [\"illegal_chars\"]=> int(0) [\"encoding_translation\"]=> string(3) \"Off\" [\"language\"]=> string(7) \"neutral\" [\"detect_order\"]=> array(2) { [0]=> string(5) \"ASCII\" [1]=> string(5) \"UTF-8\" } [\"substitute_character\"]=> int(63) [\"strict_detection\"]=> string(3) \"Off\" }\n\n...\n...\n...\n\u4ee5\u4e0b\u7701\u7565\n...\n...\n...\n\n## \u9054\u6210\u3057\u305f\u3044\u3053\u3068\n\n- ~~PHP on Windows\u3067\u30c0\u30e1\u6587\u5b57\u3092\u542b\u3093\u3060\u30d1\u30b9\u3067 ```simplexml_load_file()``` \u3092\u4f7f\u3044\u305f\u3044\u2190\u30b3\u30b3\u5927\u4e8b~~ ```$xml = new SimpleXMLElement(@file_get_contents($addslash_pass)```\u3067\u30d1\u30fc\u30b9\u3067\u304d\u307e\u3057\u305f\n- ~~PHP on Windows\u3067\u30c0\u30e1\u6587\u5b57\u3092\u542b\u3093\u3060\u30d1\u30b9\u3067 ```file_exists()``` \u306a\u3069\u3092\u4f7f\u3044\u305f\u3044~~ ```@fopen($addslash_pass, 'r')``` \u3067\u4ee3\u66ff\u3067\u304d\u307e\u3057\u305f\n- PHP on Windows\u3067\u30c0\u30e1\u6587\u5b57\u3092\u542b\u3093\u3060\u30d1\u30b9\u3067 ```is_dir()``` \u306a\u3069\u3092\u4f7f\u3044\u305f\u3044\n\n*```$addslash_pass = $addslashes(mb_convert_encoding($xmlPath, \"cp932\", \"utf-8\"))```\n\n## \u5b9f\u884c\u74b0\u5883\n\nPHP5.6.3\nWindows 7, Windows Embeded Standard\n\nXampp(xampp-win32-5.6.3-0-VC11-installer)\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u73fe\u72b6\n\n\u4ee5\u4e0b\u306b\u884c\u3063\u305f\u8abf\u67fb\u3092\u8a18\u3057\u307e\u3059\u3002\n\n1. \u30d1\u30b9\u306b\u30a8\u30f3\u30b3\u30fc\u30c9\u5909\u63db\u3092\u565b\u307e\u305b\u306a\u3044\n1. ```mb_convert_encoding()``` \u3092\u884c\u3046\n1. ```mb_convert_encoding()``` \u3092\u884c\u3044\u3001```addslashes()``` \u3082\u884c\u3046\n\n\u30c6\u30b9\u30c8\u6642\u306b\u306f\u4e0a\u8a18\u306e3\u3064\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3063\u305f\u306e\u3067\u3059\u304c\u30011, 2 \u306b\u3064\u3044\u3066\u306f\u9806\u5f53\u306a\u7d50\u679c\u3060\u3068\u601d\u308f\u308c\u308b\u306e\u3067\u3053\u3053\u3067\u306f\u8868\u306e\u63b2\u8f09\u3092\u7701\u304d\u307e\u3059\u3002\u8a73\u3057\u3044\u624b\u9806\u306b\u3064\u3044\u3066\u306f\u3001\u4e0b\u8a18\u306e\u30c6\u30b9\u30c8\u30fb\u30b3\u30fc\u30c9\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002\n\n\u4ee5\u4e0b\u7d50\u679c\u3002\u56f0\u3063\u3066\u3044\u308b\u306e\u306f\u30a2\u30b9\u30bf\u30ea\u30b9\u30af\u3067\u6ce8\u91c8\u3092\u4ed8\u3051\u3066\u3044\u308b\u70b9\u3067\u3059\u3002\n\u3044\u308f\u3086\u308b5C\u554f\u984c\u3001\u30c0\u30e1\u6587\u5b57\u3067\u8e93\u3044\u3066\u3044\u307e\u3059\u3002\n\u81ea\u5206\u306e\u30b3\u30fc\u30c9\u304c\u8aa4\u3063\u3066\u3044\u308b\u306e\u304b\u3001\u30a4\u30c7\u30a3\u30aa\u30e0\u7684\u306a\u66f8\u304d\u65b9\u304c\u3042\u308b\u306e\u304b\u3001PHP\u3068Shift-JIS\u306e\u30d1\u30b9\u306e\u76f8\u6027\u304c\u60aa\u3044\u306e\u304b\u308f\u304b\u3089\u305a\u3001\u56f0\u3063\u3066\u3044\u307e\u3059\u3002\u52a9\u3051\u3066\u304f\u3060\u3055\u3044\u3002\n\n### \u30d5\u30a1\u30a4\u30eb\u306e\u6271\u3044(addslashes + mb_convert_encoding)\n\n| |is_file()|file_exists()|simplexml_load_file()|copy()|fopen()|\n|---|---|---|---|---|---|\n|sample.xml|T|T|T|T|T|\n|\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57.xml|T|T|T|T*2|T|\n|\u30c0\u30e1\u6587\u5b57(\u8cbc).xml|F*1|F*1|F*1|T*2, 3|T*3|\n\n### \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6271\u3044(addslashes + mb_convert_encoding)\n\n| |dir()|is_dir()|scandir|\n|---|---|---|---|\n|sample_folder|T|T|T|\n|\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57_folder|T|T|T|\n|\u30c0\u30e1\u6587\u5b57(\u8cbc)_folder|F*4|F*4|F*4|\n\n*1, 4* \u3053\u3053\u304cfalse\u306b\u306a\u308b\u306e\u304c\u56f0\u308b \n*2* \u304a\u304b\u3057\u306a\u30d5\u30a1\u30a4\u30eb\u540d\u3067\u8907\u88fd\u3055\u308c\u308b\u306e\u3067\u3001\u53b3\u5bc6\u306b\u306ftrue\u3067\u306f\u306a\u3044\n*3* \u3053\u3053\u304ctrue\u306b\u306a\u308b\u7406\u7531\u304c\u308f\u304b\u3089\u306a\u3044 \n\n## \u30c6\u30b9\u30c8\u30fb\u30b3\u30fc\u30c9\n\n```php\n<?php\n\nheader( 'Content-Type: text/html; charset=utf-8' );\n\nif ( setlocale( LC_ALL, '' ) === false )\n{\n    echo \"setlocale failed.\";\n\techo \"<br/>\";\n}\n\necho \"OS info: \", php_uname();\necho \"<br/>\";\necho \"PHP version: \", phpversion();\necho \"<br/>\";\necho \"locale: \", setlocale( LC_ALL, 0 );\necho \"<br/>\";\necho \"mb_get_info: \", var_dump( mb_get_info() );\necho \"<br/>\";\necho \"<br/>\";\n\n\necho \"<h2>\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u53d6\u308a\u6642\u306e\u3001\u30d1\u30b9\u306e\u6709\u52b9\u6027\u8abf\u67fb\uff08is_file, file_exists, simplexml_load_file\uff09</h2>\";\n\n$paths = array(\n\t\"sample.xml\",\n\t\"\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57.xml\",\n\t\"\u30c0\u30e1\u6587\u5b57(\u8cbc).xml\",\n);\n\nforeach( $paths as $path )\n{\n\techo \"<h3>'$path' \u3092\u8aad\u307f\u53d6\u308b</h3>\";\n\t\n\techo '1. \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u5909\u63db\u306a\u3069\u306f\u884c\u308f\u306a\u3044';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> is_file: \", var_dump( is_file( $path ) );\n\techo \"<br/>\";\n\techo $path, \" -> file_exists: \", var_dump( file_exists( $path ) );\n\techo \"<br/>\";\n\techo $path, \" -> simplexml_load_file: \", var_dump( @simplexml_load_file( $path ) );\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n\t\n\t$sjis_path = mb_convert_encoding( $path, \"cp932\", \"utf-8\" );\n\t\n\techo '2. mb_convert_encoding( $path ) \u3092\u884c\u3046';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> is_file: \", var_dump( is_file( $sjis_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> file_exists: \", var_dump( file_exists( $sjis_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> simplexml_load_file: \", var_dump( @simplexml_load_file( $sjis_path ) );\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n\n\t$addslashes_path = addslashes( mb_convert_encoding( $path, \"cp932\", \"utf-8\" ) );\n\t\n\techo '3. addslashes( mb_convert_encoding( $path ) ) \u3092\u884c\u3046';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> is_file: \", var_dump( is_file( $addslashes_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> file_exists: \", var_dump( file_exists( $addslashes_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> simplexml_load_file: \", var_dump( @simplexml_load_file( $addslashes_path ) );\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n}\n\n\necho \"<h2>\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u53d6\u308a\u6642\u306e\u3001\u30d1\u30b9\u306e\u6709\u52b9\u6027\u8abf\u67fb\uff08copy, fopen\uff09</h2>\";\n\nforeach( $paths as $path )\n{\n\techo \"<h3>'$path' \u3092\u8aad\u307f\u53d6\u308b</h3>\";\n\t\n\techo '1. \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u5909\u63db\u306a\u3069\u306f\u884c\u308f\u306a\u3044';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> copy: \", var_dump( @copy( $path, \"copied_\".$path.\"1\" ) );\n\techo \"<br/>\";\n\techo $path, \" -> fopen: \", var_dump( $fp = @fopen( $path, 'r' ) ); if ( $fp ) { fclose($fp); }\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n\t\n\t$sjis_path = mb_convert_encoding( $path, \"cp932\", \"utf-8\" );\n\t\n\techo '2. mb_convert_encoding( $path ) \u3092\u884c\u3046';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> copy: \", var_dump( @copy( $sjis_path, \"copied_\".$path.\"2\" ) );\n\techo \"<br/>\";\n\techo $path, \" -> fopen: \", var_dump( $fp = @fopen( $sjis_path, 'r' ) ); if ( $fp ) { fclose($fp); }\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n\n\t$addslashes_path = addslashes( mb_convert_encoding( $path, \"cp932\", \"utf-8\" ) );\n\t\n\techo '3. addslashes( mb_convert_encoding( $path ) ) \u3092\u884c\u3046';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> copy: \", var_dump( copy( $addslashes_path, \"copied_\".$path.\"3\" ) );\n\techo \"<br/>\";\n\techo $path, \" -> fopen: \", var_dump( $fp = fopen( $addslashes_path, 'r' ) ); if ( $fp ) { fclose($fp); }\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n}\n\n\necho \"<h2>\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u8aad\u307f\u53d6\u308a\u6642\u306e\u3001\u30d1\u30b9\u306e\u6709\u52b9\u6027\u8abf\u67fb\uff08dir, is_dir, scandir\uff09</h2>\";\n\n$paths = array(\n\t\"C:\\\\xampp\\\\htdocs\\\\multibyte_5c_path\\\\sample_folder\",\n\t\"C:\\\\xampp\\\\htdocs\\\\multibyte_5c_path\\\\\u30e6\u30cb\u30b3\u30fc\u30c9\u6587\u5b57_folder\",\n\t\"C:\\\\xampp\\\\htdocs\\\\multibyte_5c_path\\\\\u30c0\u30e1\u6587\u5b57(\u8cbc)_folder\",\n);\n\nforeach( $paths as $path )\n{\n\techo \"<h3>'$path' \u3092\u8aad\u307f\u53d6\u308b</h3>\";\n\t\n\techo '1. \u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u5909\u63db\u306a\u3069\u306f\u884c\u308f\u306a\u3044';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> dir: \", var_dump( @dir( $path ) );\n\techo \"<br/>\";\n\techo $path, \" -> is_dir: \", var_dump( @is_dir( $path ) );\n\techo \"<br/>\";\n\techo $path, \" -> scandir: \", var_dump( @scandir( $path ) );\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n\t\n\t$sjis_path = mb_convert_encoding( $path, \"cp932\", \"utf-8\" );\n\t\n\techo '2. mb_convert_encoding( $path ) \u3092\u884c\u3046';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> dir: \", var_dump( @dir( $sjis_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> is_dir: \", var_dump( @is_dir( $sjis_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> scandir: \", var_dump( @scandir( $sjis_path ) );\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n\n\t$addslashes_path = addslashes( mb_convert_encoding( $path, \"cp932\", \"utf-8\" ) );\n\t\n\techo '3. addslashes( mb_convert_encoding( $path ) ) \u3092\u884c\u3046';\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo $path, \" -> dir: \", var_dump( @dir( $addslashes_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> is_dir: \", var_dump( @is_dir( $addslashes_path ) );\n\techo \"<br/>\";\n\techo $path, \" -> scandir: \", var_dump( @scandir( $addslashes_path ) );\n\techo \"<br/>\";\n\techo \"<br/>\";\n\techo \"<br/>\";\n}\n\n?>\n```\n\n\n```html\nOS info: Windows NT ADMIN-PC 6.1 build 7601 (Windows 7 Business Edition Service Pack 1) i586\nPHP version: 5.6.3\nlocale: Japanese_Japan.932\nmb_get_info: array(14) { [\"internal_encoding\"]=> string(5) \"UTF-8\" [\"http_output\"]=> string(5) \"UTF-8\" [\"http_output_conv_mimetypes\"]=> string(31) \"^(text/|application/xhtml\\+xml)\" [\"func_overload\"]=> int(0) [\"func_overload_list\"]=> string(11) \"no overload\" [\"mail_charset\"]=> string(5) \"UTF-8\" [\"mail_header_encoding\"]=> string(6) \"BASE64\" [\"mail_body_encoding\"]=> string(6) \"BASE64\" [\"illegal_chars\"]=> int(0) [\"encoding_translation\"]=> string(3) \"Off\" [\"language\"]=> string(7) \"neutral\" [\"detect_order\"]=> array(2) { [0]=> string(5) \"ASCII\" [1]=> string(5) \"UTF-8\" } [\"substitute_character\"]=> int(63) [\"strict_detection\"]=> string(3) \"Off\" }\n\n...\n...\n...\n\u4ee5\u4e0b\u7701\u7565\n...\n...\n...\n```\n", "tags": ["PHP", "Windows", "\u30c0\u30e1\u6587\u5b57", "5c\u554f\u984c", "\u8cea\u554f"]}