{"tags": ["AWS", "MySQL", "RDS"], "context": " More than 1 year has passed since last update.RDS\u3067\u306fDefault\u3067character-set\u306blatin1\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u70ba\u3001\u65e5\u672c\u8a9e\u3092\u5229\u7528\u3059\u308b\u969b\u306futf8\u306a\u3069\u306b\u5909\u66f4\u3057\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nStep1\nRDS\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u5de6\u30e1\u30cb\u30e5\u30fc\u304b\u3089Parameter Groups\u3092\u9078\u629e\u3059\u308b\u3002\nCreate DB Parameter Group\u3092\u9078\u629e\u3057\u3001\n\nDB Parameter Group Family \nDB Parameter Group Name\nDB Parameter Group Description\n\n\u3092\u305d\u308c\u305e\u308c\u9078\u629e\u3057\u3001\u8a2d\u5b9a\u3092\u884c\u3046DB\u306e\u7a2e\u985e\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u306e\u540d\u524d\u3068\u8aac\u660e\u3092\u5165\u529b\u3057\u3001\"Yes, Create\"\u3067\u4f5c\u6210\n\nStep2\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u304c\u51fa\u6765\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u4f5c\u6210\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u306e\u8a73\u7d30\u30da\u30fc\u30b8\u304b\u3089Edit Parameters\u3092\u9078\u629e\u3057\u3001\n\ncharacter_set_client\ncharacter_set_connection\ncharacter_set_database\ncharacter_set_results\ncharacter_set_server\n\n\u3053\u308c\u3089\u3092 utf8 \u306b\u8a2d\u5b9a\n\u305f\u3060\u3001\u3053\u308c\u3060\u3051\u3060\u3068\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4e00\u90e8\u304c latin1 \u304b\u3089\u5909\u308f\u3089\u306a\u3044\u554f\u984c\u304c\u751f\u3058\u3066\u3057\u307e\u3046\u306e\u3067\n\nskip-character-set-client-handshake\n\n\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30921\u306b\u8a2d\u5b9a\n\u5909\u66f4\u3092\u52a0\u3048\u305f\u3089\"Save Changes\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5909\u66f4\u3092\u4fdd\u5b58\u3059\u308b\n\nStep3\n\u307e\u3060\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3066\u306a\u3044\u5834\u5408\u306f\"Launch DB Instance\"\u3067\u65b0\u898f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3001Parameter Group\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u3059\u3067\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u5834\u5408\u306f\"modify\"\u3092\u9078\u629e\u3057\u3066\u3001Parameter Group\u3092\u5909\u66f4\u3057\u3066Save\u3059\u308b\u3002\n\u65e2\u306b\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u3092\u5909\u66f4\u3057\u305f\u969b\u306f\"Configuration Details\"\u306e\"Parameter Group\"\u304c pending-reboot \u3068\u306a\u308b\u306e\u3067\"Instance Action\u304b\u3089reboot\"\u3092\u9078\u629e\u3057\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\u305d\u306e\u969b\u306b\u6570\u5206\u9593\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6b62\u307e\u308b\u306e\u3067\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u898b\u8a08\u3089\u3063\u3066\u304b\u3089\u884c\u3046\u3068\u3088\u3044\n\nStep4\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u518d\u8d77\u52d5\u3092\u884c\u3063\u305f\u3089\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089mysql\u306b\u63a5\u7d9a\u3057\u3066charset\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\n% mysql -u \u30e6\u30fc\u30b6\u30fc\u540d -p -h xxx.xxxxxxxxxx.ap-northeast-1.rds.amazonaws.com \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\n\nmysql> show variables like 'char%';\n+--------------------------+-------------------------------------------+\n| Variable_name            | Value                                     |\n+--------------------------+-------------------------------------------+\n| character_set_client     | utf8                                      |\n| character_set_connection | utf8                                      |\n| character_set_database   | utf8                                      |\n| character_set_filesystem | binary                                    |\n| character_set_results    | utf8                                      |\n| character_set_server     | utf8                                      |\n| character_set_system     | utf8                                      |\n| character_sets_dir       | /rdsdbbin/mysql-5.6.17.R1/share/charsets/ |\n+--------------------------+-------------------------------------------+\n\n\u3053\u306e\u3088\u3046\u306butf8\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u305f\u3089\u5b8c\u4e86\n\n\u8ffd\u8a18\n\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306echarset\u304c\n\nSHOW CREATE TABLE \u30c6\u30fc\u30d6\u30eb\u540d\n\n\u3092\u884c\u3063\u305f\u6642\u306b\n+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table      | Create Table                                                                                                                                                                                                                                    |\n+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| \u30c6\u30fc\u30d6\u30eb\u540d | CREATE TABLE `\u30c6\u30fc\u30d6\u30eb\u540d` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 |\n+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.05 sec)\n\n\u306e\u3088\u3046\u306blatin1\u304b\u3089\u5909\u308f\u3063\u3066\u306a\u3044\u6642\u304c\u3042\u308b\u306e\u3067\u3001DROP TABLE\u3092\u3057\u3066\u4f5c\u308a\u76f4\u3059\u304b\u3001\nALTER TABLE \u30c6\u30fc\u30d6\u30eb\u540d CONVERT TO CHARACTER SET UTF8\n\n\u3068\u3057\u3066UTF8\u306b\u5909\u3048\u3066\u3042\u3052\u308b\u3068\u3088\u3044\nRDS\u3067\u306fDefault\u3067character-set\u306blatin1\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u308b\u70ba\u3001\u65e5\u672c\u8a9e\u3092\u5229\u7528\u3059\u308b\u969b\u306futf8\u306a\u3069\u306b\u5909\u66f4\u3057\u3066\u3042\u3052\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n##Step1\nRDS\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u5de6\u30e1\u30cb\u30e5\u30fc\u304b\u3089Parameter Groups\u3092\u9078\u629e\u3059\u308b\u3002\nCreate DB Parameter Group\u3092\u9078\u629e\u3057\u3001\n\n* DB Parameter Group Family\t\n* DB Parameter Group Name\n* DB Parameter Group Description\n\n\u3092\u305d\u308c\u305e\u308c\u9078\u629e\u3057\u3001\u8a2d\u5b9a\u3092\u884c\u3046DB\u306e\u7a2e\u985e\u3001\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u306e\u540d\u524d\u3068\u8aac\u660e\u3092\u5165\u529b\u3057\u3001\"Yes, Create\"\u3067\u4f5c\u6210\n\n##Step2\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u304c\u51fa\u6765\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u4f5c\u6210\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u306e\u8a73\u7d30\u30da\u30fc\u30b8\u304b\u3089Edit Parameters\u3092\u9078\u629e\u3057\u3001\n\n* character_set_client\n* character_set_connection\n* character_set_database\n* character_set_results\n* character_set_server\n\n\u3053\u308c\u3089\u3092 **utf8** \u306b\u8a2d\u5b9a\n\u305f\u3060\u3001\u3053\u308c\u3060\u3051\u3060\u3068\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4e00\u90e8\u304c **latin1** \u304b\u3089\u5909\u308f\u3089\u306a\u3044\u554f\u984c\u304c\u751f\u3058\u3066\u3057\u307e\u3046\u306e\u3067\n\n* skip-character-set-client-handshake\n\n\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30921\u306b\u8a2d\u5b9a\n\u5909\u66f4\u3092\u52a0\u3048\u305f\u3089\"Save Changes\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u5909\u66f4\u3092\u4fdd\u5b58\u3059\u308b\n\n##Step3\n\u307e\u3060\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3066\u306a\u3044\u5834\u5408\u306f\"Launch DB Instance\"\u3067\u65b0\u898f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u3001Parameter Group\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u30b0\u30eb\u30fc\u30d7\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u3059\u3067\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u5834\u5408\u306f\"modify\"\u3092\u9078\u629e\u3057\u3066\u3001Parameter Group\u3092\u5909\u66f4\u3057\u3066Save\u3059\u308b\u3002\n\u65e2\u306b\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30b0\u30eb\u30fc\u30d7\u3092\u5909\u66f4\u3057\u305f\u969b\u306f\"Configuration Details\"\u306e\"Parameter Group\"\u304c **pending-reboot** \u3068\u306a\u308b\u306e\u3067\"Instance Action\u304b\u3089reboot\"\u3092\u9078\u629e\u3057\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\u305d\u306e\u969b\u306b\u6570\u5206\u9593\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6b62\u307e\u308b\u306e\u3067\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u898b\u8a08\u3089\u3063\u3066\u304b\u3089\u884c\u3046\u3068\u3088\u3044\n\n##Step4\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u518d\u8d77\u52d5\u3092\u884c\u3063\u305f\u3089\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089mysql\u306b\u63a5\u7d9a\u3057\u3066charset\u304c\u5909\u308f\u3063\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\n\n```sh\n% mysql -u \u30e6\u30fc\u30b6\u30fc\u540d -p -h xxx.xxxxxxxxxx.ap-northeast-1.rds.amazonaws.com \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\n```\n\n```mysql\nmysql> show variables like 'char%';\n+--------------------------+-------------------------------------------+\n| Variable_name            | Value                                     |\n+--------------------------+-------------------------------------------+\n| character_set_client     | utf8                                      |\n| character_set_connection | utf8                                      |\n| character_set_database   | utf8                                      |\n| character_set_filesystem | binary                                    |\n| character_set_results    | utf8                                      |\n| character_set_server     | utf8                                      |\n| character_set_system     | utf8                                      |\n| character_sets_dir       | /rdsdbbin/mysql-5.6.17.R1/share/charsets/ |\n+--------------------------+-------------------------------------------+\n```\n\n\u3053\u306e\u3088\u3046\u306butf8\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u305f\u3089\u5b8c\u4e86\n\n##\u8ffd\u8a18\n\u65e2\u5b58\u30c6\u30fc\u30d6\u30eb\u306echarset\u304c\n```\nSHOW CREATE TABLE \u30c6\u30fc\u30d6\u30eb\u540d\n```\n\u3092\u884c\u3063\u305f\u6642\u306b\n\n```mysql\n+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Table      | Create Table                                                                                                                                                                                                                                    |\n+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| \u30c6\u30fc\u30d6\u30eb\u540d | CREATE TABLE `\u30c6\u30fc\u30d6\u30eb\u540d` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) DEFAULT NULL,\n  `created_at` datetime DEFAULT NULL,\n  `updated_at` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=latin1 |\n+------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n1 row in set (0.05 sec)\n```\n\u306e\u3088\u3046\u306blatin1\u304b\u3089\u5909\u308f\u3063\u3066\u306a\u3044\u6642\u304c\u3042\u308b\u306e\u3067\u3001DROP TABLE\u3092\u3057\u3066\u4f5c\u308a\u76f4\u3059\u304b\u3001\n\n```mysql\nALTER TABLE \u30c6\u30fc\u30d6\u30eb\u540d CONVERT TO CHARACTER SET UTF8\n```\n\n\u3068\u3057\u3066UTF8\u306b\u5909\u3048\u3066\u3042\u3052\u308b\u3068\u3088\u3044\n"}