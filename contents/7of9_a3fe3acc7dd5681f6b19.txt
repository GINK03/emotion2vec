{"context": " More than 1 year has passed since last update.\n\u52d5\u4f5c\u78ba\u8a8d\nUnity 5.1.3-f1 on MacOS X 10.8.5\n\n\n\n\u72b6\u6cc1\n\u4ee5\u4e0b\u306e\u3088\u3046\u306aHierarchy\u304c\u3042\u308b\u3068\u3059\u308b\u3002\u305d\u308c\u305e\u308c\u306ePanel\u306e\u540d\u524d\u304b\u3089Canvas\u306e\u540d\u524d\u3092\u53d6\u5f97\u3057\u305f\u3044\u3002\n\n\ncode\n\ntry 1 (v0.1: \u81ea\u4f5c\u51e6\u7406)\nv0.1 @ github\n\u4ee5\u4e0b\u306b\u304a\u3044\u3066\u3001\u30e1\u30a4\u30f3\u306e\u51e6\u7406\u306fgetMyParentCanvasName()\u3002\n\nFindParentCanvas.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\n\n/*\n * v0.1 2015/09/12\n *   - getMyParentCanvasName() worked as expected \n */\n\npublic class FindParentCanvas : MonoBehaviour {\n\n    string getMyParentCanvasName(GameObject panel) {\n        GameObject parentGO;\n        GameObject targetGO = panel;\n\n        for (int loop=0; loop<3; loop++) { // search upper three levels\n            parentGO = targetGO.transform.parent.gameObject;\n            if (parentGO.GetComponent<Canvas> () != null) {\n                return parentGO.name;\n            }\n            targetGO = parentGO;\n        }\n        return \"\";\n    }\n\n    void Test_each(string name) {\n        GameObject myPanel = GameObject.Find (name);\n        string canvasName = getMyParentCanvasName (myPanel);\n        Debug.Log (canvasName + \" - \" + myPanel.name);\n    }\n\n    void Test_main() {\n        Test_each (\"Panel_1\");\n        Test_each (\"Panel_1_1\");\n        Test_each (\"Panel_1_2_1\");\n\n        Test_each (\"Panel_2\");\n        Test_each (\"Panel_2_1\");\n        Test_each (\"Panel_2_2_1\");\n    }\n\n\n    void Start () {\n        Test_main ();\n    }   \n}\n\n\n\n\u7d50\u679c\n\n\u3053\u308c\u3067Canvas\u3092\u30a4\u30f3\u30b9\u30da\u30af\u30bf\u3067\u95a2\u9023\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308b\u3002\n\n\ntry2 (v0.2: GetComponentInParent()\u4f7f\u7528)\n@ ShajikuWorks \u3055\u3093\u306b\u62bc\u3057\u3066\u3044\u305f\u3060\u3044\u305fGetComponentInParent()\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u305f\u3002\nGetComponentInParent\n\n\u6709\u52b9\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u898b\u3064\u304b\u308b\u307e\u3067\u4e0a\u306b\u5411\u304b\u3063\u3066\uff08\u89aa\u306e\u89aa\uff09\u518d\u5e30\u3057\u307e\u3059\u3002\u305d\u308c\u3067\u3082\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\u306f null \u3092\u8fd4\u3057\u307e\u3059\n\n\u4e0a\u65b9\u5411\u306e\u518d\u5e30\u63a2\u7d22\u306a\u306e\u3067\u3001\u968e\u5c64\u304c\u3044\u304f\u3064\u3068\u3044\u3046\u306e\u3092\u691c\u8a0e\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u3002\nv0.2 @ github\n\u7d50\u679c\u3001getMyParentCanvasName()\u304c1\u884c\u306b\u306a\u3063\u305f\u3002\u3082\u306f\u3084getMyParentCanvasName()\u3068\u3044\u3046\u95a2\u6570\u306b\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u304b\u3082\u3002\n\nFindParentCanvas.cs\n...\n    string getMyParentCanvasName(GameObject panel) {\n        return panel.GetComponentInParent<Canvas>().name;\n    }\n...\n\n\n\n\ntry3 (try2\u306enull\u30b1\u30fc\u30b9\u5bfe\u5fdc)\nv0.3 @ github\nv0.2\u306e\u5834\u5408\u3001\u5b9f\u969b\u306bCanvas\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u6642\u306bGetComponentInParent<>()\u304cnull\u3092\u8fd4\u3057\u3066\u3001.name\u3092\u8fd4\u3059\u3068\u304d\u306b\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3067\u308b\u3002\nNullReferenceException: Object reference not set to an instance of an object\n\nnull\u30c1\u30a7\u30c3\u30af\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u308c\u305f\u3002\n\nFindParentCanvas.cs\n...\n    string getMyParentCanvasName(GameObject panel) {\n        Canvas canvasGO = panel.GetComponentInParent<Canvas> ();\n        if (canvasGO != null) {\n            return canvasGO.name;\n        } else {\n            return \"\";\n        }\n    }\n...\n\n\nnull\u30b1\u30fc\u30b9\u3068\u3057\u3066Panel3\u3092\u8ffd\u52a0\u3002\n\n    void Test_main() {\n                ...\n        Test_each (\"Panel_2_2_1\");\n\n        Test_each (\"Panel_3\"); // for null case\n    }\n\n\nPanel_3\u306e\u5834\u5408exception\u3067\u306a\u304f\"\"\u304c\u8fd4\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n```txt:\u52d5\u4f5c\u78ba\u8a8d\nUnity 5.1.3-f1 on MacOS X 10.8.5\n```\n\n##\u72b6\u6cc1\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306aHierarchy\u304c\u3042\u308b\u3068\u3059\u308b\u3002\u305d\u308c\u305e\u308c\u306ePanel\u306e\u540d\u524d\u304b\u3089Canvas\u306e\u540d\u524d\u3092\u53d6\u5f97\u3057\u305f\u3044\u3002\n\n![Main_unity_-_150912-findParentCanvasOfPanel_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/5b9e55fb-01ef-2dd5-6b9b-5a25f716382e.jpeg)\n\n##code\n\n###try 1 (v0.1: \u81ea\u4f5c\u51e6\u7406)\n[v0.1 @ github](https://github.com/yasokada/unity-150912-findParentCanvasOfPanel/releases/tag/v0.1)\n\n\u4ee5\u4e0b\u306b\u304a\u3044\u3066\u3001\u30e1\u30a4\u30f3\u306e\u51e6\u7406\u306f`getMyParentCanvasName()`\u3002\n\n```FindParentCanvas.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\n\n/*\n * v0.1 2015/09/12\n *   - getMyParentCanvasName() worked as expected \n */\n\npublic class FindParentCanvas : MonoBehaviour {\n\t\n\tstring getMyParentCanvasName(GameObject panel) {\n\t\tGameObject parentGO;\n\t\tGameObject targetGO = panel;\n\n\t\tfor (int loop=0; loop<3; loop++) { // search upper three levels\n\t\t\tparentGO = targetGO.transform.parent.gameObject;\n\t\t\tif (parentGO.GetComponent<Canvas> () != null) {\n\t\t\t\treturn parentGO.name;\n\t\t\t}\n\t\t\ttargetGO = parentGO;\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tvoid Test_each(string name) {\n\t\tGameObject myPanel = GameObject.Find (name);\n\t\tstring canvasName = getMyParentCanvasName (myPanel);\n\t\tDebug.Log (canvasName + \" - \" + myPanel.name);\n\t}\n\n\tvoid Test_main() {\n\t\tTest_each (\"Panel_1\");\n\t\tTest_each (\"Panel_1_1\");\n\t\tTest_each (\"Panel_1_2_1\");\n\n\t\tTest_each (\"Panel_2\");\n\t\tTest_each (\"Panel_2_1\");\n\t\tTest_each (\"Panel_2_2_1\");\n\t}\n\n\n\tvoid Start () {\n\t\tTest_main ();\n\t}\t\n}\n```\n\n###\u7d50\u679c\n\n![Main_unity_-_150912-findParentCanvasOfPanel_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/6728d237-4455-89cc-491e-b59090f3f52d.jpeg)\n\n\u3053\u308c\u3067Canvas\u3092\u30a4\u30f3\u30b9\u30da\u30af\u30bf\u3067\u95a2\u9023\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u306a\u304f\u306a\u308b\u3002\n\n<hr>\n###try2 (v0.2: GetComponentInParent()\u4f7f\u7528)\n\n@ ShajikuWorks \u3055\u3093\u306b\u62bc\u3057\u3066\u3044\u305f\u3060\u3044\u305fGetComponentInParent()\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u305f\u3002\n\n[GetComponentInParent](http://docs.unity3d.com/jp/current/ScriptReference/GameObject.GetComponentInParent.html)\n> \u6709\u52b9\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u898b\u3064\u304b\u308b\u307e\u3067\u4e0a\u306b\u5411\u304b\u3063\u3066\uff08\u89aa\u306e\u89aa\uff09\u518d\u5e30\u3057\u307e\u3059\u3002\u305d\u308c\u3067\u3082\u898b\u3064\u304b\u3089\u306a\u3044\u5834\u5408\u306f null \u3092\u8fd4\u3057\u307e\u3059\n\n\u4e0a\u65b9\u5411\u306e\u518d\u5e30\u63a2\u7d22\u306a\u306e\u3067\u3001\u968e\u5c64\u304c\u3044\u304f\u3064\u3068\u3044\u3046\u306e\u3092\u691c\u8a0e\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u3002\n\n[v0.2 @ github](https://github.com/yasokada/unity-150912-findParentCanvasOfPanel/releases/tag/v0.2)\n\n\u7d50\u679c\u3001getMyParentCanvasName()\u304c1\u884c\u306b\u306a\u3063\u305f\u3002\u3082\u306f\u3084getMyParentCanvasName()\u3068\u3044\u3046\u95a2\u6570\u306b\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u304b\u3082\u3002\n\n```FindParentCanvas.cs\n...\n\tstring getMyParentCanvasName(GameObject panel) {\n\t\treturn panel.GetComponentInParent<Canvas>().name;\n\t}\n...\n```\n\n<hr>\n### try3 (try2\u306enull\u30b1\u30fc\u30b9\u5bfe\u5fdc)\n\n[v0.3 @ github](https://github.com/yasokada/unity-150912-findParentCanvasOfPanel/releases/tag/v0.3)\n\nv0.2\u306e\u5834\u5408\u3001\u5b9f\u969b\u306bCanvas\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u6642\u306bGetComponentInParent<>()\u304cnull\u3092\u8fd4\u3057\u3066\u3001.name\u3092\u8fd4\u3059\u3068\u304d\u306b\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u3067\u308b\u3002\n\n```\nNullReferenceException: Object reference not set to an instance of an object\n```\n\nnull\u30c1\u30a7\u30c3\u30af\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5165\u308c\u305f\u3002\n\n```FindParentCanvas.cs\n...\n\tstring getMyParentCanvasName(GameObject panel) {\n\t\tCanvas canvasGO = panel.GetComponentInParent<Canvas> ();\n\t\tif (canvasGO != null) {\n\t\t\treturn canvasGO.name;\n\t\t} else {\n\t\t\treturn \"\";\n\t\t}\n\t}\n...\n```\n\nnull\u30b1\u30fc\u30b9\u3068\u3057\u3066Panel3\u3092\u8ffd\u52a0\u3002\n\n![Main_unity_-_150912-findParentCanvasOfPanel_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/6637e3f3-6a6c-24ad-2dd0-2e541d6776b2.jpeg)\n\n```\n\tvoid Test_main() {\n                ...\n\t\tTest_each (\"Panel_2_2_1\");\n\n\t\tTest_each (\"Panel_3\"); // for null case\n\t}\n```\n\n![Main_unity_-_150912-findParentCanvasOfPanel_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/47aac600-5975-627a-eeea-9555d493e1b3.jpeg)\n\nPanel_3\u306e\u5834\u5408exception\u3067\u306a\u304f\"\"\u304c\u8fd4\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\n", "tags": ["MyUnity"]}