{"context": " More than 1 year has passed since last update.\n\n\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\n\n\u30c9\u30e1\u30a4\u30f3\n\nPerson.groovy\npackage sqltest\n\nclass Person {\n\n    String name\n    Integer age\n    Editor editor\n    static hasMany = [hobbies:Hobby]\n\n    static constraints = {\n    }\n    static mapping = {\n        version: false\n    }\n\n    static adults = where {\n        age >= 20\n    }\n\n    def sayHello() {\n        \"Hello! I am ${name}\"\n    }\n\n    String toString() {\n        \"${name}(${age})\"\n    }\n}\n\n\n\nHoggy.groovy\npackage sqltest\n\nclass Hobby {\n\n    String name\n    static constraints = {\n    }\n    static mapping = {\n        version: false\n    }\n}\n\n\n\n\nEditor.groovy\npackage sqltest\n\nclass Editor {\n\n    String name\n\n    static constraints = {\n    }\n    static mapping = {\n        version:false\n    }\n}\n\n\n\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u767b\u9332\n\nBootStrap.groovy\nimport sqltest.Editor\nimport sqltest.Hobby\nimport sqltest.Person\n\nclass BootStrap {\n\n    def init = { servletContext ->\n        environments {\n            development {\n                def h1 = new Hobby(name:\"Hobby-1\").save(flush:true)\n                def h2 = new Hobby(name:\"Hobby-2\").save(flush:true)\n                def h3 = new Hobby(name:\"Hobby-3\").save(flush:true)\n\n                def e1 = new Editor(name:\"vim\").save(flush:true)\n                def e2 = new Editor(name:\"emacs\").save(flush:true)\n\n                def p1 = new Person(name:\"koji-1\", age: 19, editor: e1).addToHobbies(h1).save(flush:true)\n                def p2 = new Person(name:\"koji-2\", age: 20, editor: e2).addToHobbies(h2).save(flush:true)\n                def p3 = new Person(name:\"koji-3\", age: 99, editor: e1).addToHobbies(h1).addToHobbies(h2).addToHobbies(h3).save(flush:true)\n                def p4 = new Person(name:\"koji-1\", age: 20, editor: e2).addToHobbies(h2).save(flush:true)\n\n                p1.addToHobbies(h3).save(flush:true)\n                p2.addToHobbies(h3).save(flush:true)\n\n                p1.removeFromHobbies(h3)\n            }\n\n            test {\n\n            }\n            production {\n\n            }\n        }\n    }\n    def destroy = {\n    }\n\n}\n\n\n\n\u4f7f\u3044\u65b9\n\nHelloController\npackage sqltest\n\nimport grails.gorm.DetachedCriteria\n\nclass HelloController {\n\n    def where () {\n        DetachedCriteria a = Person.where {\n            name == \"koji-2\"\n        }\n\n        Person p = a.find()\n        render p.sayHello()\n    }\n\n    // \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u308f\u304b\u308a\u3084\u3059\u304f\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u3051\u3069\u3001Groovy\u306e\u6b63\u898f\u8868\u73fe\u3063\u307d\u3044\u69cb\u6587\u3067==~\u3068=~\n    // \u304c\u4f7f\u3048\u308b\u3051\u3069\u3001\u5229\u7528\u3067\u304d\u308b\u306e\u306f\u7d50\u5c40SQL\u306elike\u69cb\u6587\u306a\u306e\u3067\u3001\u6b63\u898f\u8868\u73fe\u304c\u4f7f\u3048\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3002\n    def where2() {\n        DetachedCriteria query = Person.where {\n            name ==~ /koji-%/\n        }\n        render query.list().size()\n    }\n\n    // \u5c11\u3057\u8907\u96d1\u306a\u6761\u4ef6\u306b\u306a\u308b\u3068\u3001Groovy\u30e9\u30a4\u30af\u306a\u6761\u4ef6\u6307\u5b9a\u304c\u3067\u304d\u308bwhere\u30af\u30a8\u30ea\u306e\u307b\u3046\u304c\n    // \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30d5\u30a1\u30a4\u30f3\u30c0\u30fc\u3088\u308a\u30b9\u30de\u30fc\u30c8\u304b\u3082\uff1f\n    def where3() {\n        DetachedCriteria query = Person.where {\n            (name == \"koji-1\" && age == 20) || age == 99\n        }\n        render query.list()\n    }\n\n    // where\u30af\u30a8\u30ea\u306f\u9045\u5ef6\u8a55\u4fa1\u306a\u306e\u3067\u3001\u30c9\u30e1\u30a4\u30f3\u306e\u4e2d\u306b\u4e8b\u524d\u306b\u7528\u610f\u3057\u3066\u304a\u304f\u3053\u3068\u3082\u53ef\u80fd\u3002\n    // \u7d50\u679c\u7684\u306b\u540d\u524d\u3092\u3064\u3051\u308b\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3001\u3069\u3046\u3044\u3063\u305f\u30c7\u30fc\u30bf\u304c\u62bd\u51fa\u3055\u308c\u308b\u306e\u304b\u308f\u304b\u308a\u3084\u3059\u304f\u306a\u308b\u3002\n    def where4() {\n        render Person.adults.list()\n    }\n\n    // \u95a2\u9023\u3092\u6301\u3063\u3066\u3044\u308b\u30c9\u30e1\u30a4\u30f3\u3082\u691c\u7d22\u3067\u304d\u308b\u3002\n    def where5() {\n        Editor e = Editor.findByName(\"vim\")\n        DetachedCriteria query = Person.where {\n            editor.name == e.name\n            // \u3053\u3063\u3061\u3082OK\n            //editor.name == Editor.findByName(\"vim\").name\n        }\n        render query.list()\n    }\n\n    // \u305f\u3060\u30571\u5bfe\u591a\u3060\u3068size\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\u3002\u3002\n    // \uff11\u5bfe\u591a\u306e\u6271\u3044\u306f\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30d5\u30a1\u30a4\u30f3\u30c0\u30fc\u3067\u3082\u5fae\u5999\u306b\u6319\u52d5\u304c\u7406\u89e3\u3057\u3065\u3089\u3044\u3002\n    def where6() {\n        DetachedCriteria query = Person.where {\n            hobbies.size() >= 2\n        }\n        render query.list()\n    }\n\n    // \u307e\u305a20\u6b73\u306e\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3002\u305d\u306e\u30e6\u30fc\u30b6\u305f\u3061\u306e\u540d\u524d\u3068\u4e00\u81f4\u3059\u308b\u30e6\u30fc\u30b6\u3092\u629c\u304d\u51fa\u3057\u3066\u304f\u308b\u3002\n    // \u306a\u306e\u3067\u3001\u5f53\u7136\u672a\u6210\u5e74\u8005\u304c\u542b\u307e\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n    def where7() {\n        DetachedCriteria query = Person.where {\n            name in where {age == 20}.name\n        }\n        render query.list()\n    }\n\n    // \u6210\u4eba\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3001\u3001\u305d\u306e\u4e2d\u304b\u3089\u6700\u3082\u82e5\u3044\u5e74\u9f62\u3092\u53d6\u5f97\u3059\u308b\u3002\n    // \u305d\u306e\u5e74\u9f62\u3068\u4e00\u81f4\u3059\u308b\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3002\n    // \u3064\u307e\u308a\u3001\u6210\u4eba\u30e6\u30fc\u30b6\u3067\u6700\u3082\u82e5\u3044\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3055\u308c\u308b\u3002\n    def where8() {\n        DetachedCriteria query = Person.where {\n            age == where { age > 19 }.min('age')\n        }\n        render query.list()\n    }\n}\n\n\n\n#\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\n##\u30c9\u30e1\u30a4\u30f3\n```groovy:Person.groovy\npackage sqltest\n\nclass Person {\n\n    String name\n    Integer age\n    Editor editor\n    static hasMany = [hobbies:Hobby]\n\n    static constraints = {\n    }\n    static mapping = {\n        version: false\n    }\n\n    static adults = where {\n        age >= 20\n    }\n\n    def sayHello() {\n        \"Hello! I am ${name}\"\n    }\n\n    String toString() {\n        \"${name}(${age})\"\n    }\n}\n```\n\n```groovy:Hoggy.groovy\npackage sqltest\n\nclass Hobby {\n\n    String name\n    static constraints = {\n    }\n    static mapping = {\n        version: false\n    }\n}\n\n```\n\n```groovy:Editor.groovy\npackage sqltest\n\nclass Editor {\n\n    String name\n\n    static constraints = {\n    }\n    static mapping = {\n        version:false\n    }\n}\n```\n\n##\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u767b\u9332\n```groovy:BootStrap.groovy\nimport sqltest.Editor\nimport sqltest.Hobby\nimport sqltest.Person\n\nclass BootStrap {\n\n    def init = { servletContext ->\n        environments {\n            development {\n                def h1 = new Hobby(name:\"Hobby-1\").save(flush:true)\n                def h2 = new Hobby(name:\"Hobby-2\").save(flush:true)\n                def h3 = new Hobby(name:\"Hobby-3\").save(flush:true)\n\n                def e1 = new Editor(name:\"vim\").save(flush:true)\n                def e2 = new Editor(name:\"emacs\").save(flush:true)\n\n                def p1 = new Person(name:\"koji-1\", age: 19, editor: e1).addToHobbies(h1).save(flush:true)\n                def p2 = new Person(name:\"koji-2\", age: 20, editor: e2).addToHobbies(h2).save(flush:true)\n                def p3 = new Person(name:\"koji-3\", age: 99, editor: e1).addToHobbies(h1).addToHobbies(h2).addToHobbies(h3).save(flush:true)\n                def p4 = new Person(name:\"koji-1\", age: 20, editor: e2).addToHobbies(h2).save(flush:true)\n\n                p1.addToHobbies(h3).save(flush:true)\n                p2.addToHobbies(h3).save(flush:true)\n\n                p1.removeFromHobbies(h3)\n            }\n\n            test {\n\n            }\n            production {\n\n            }\n        }\n    }\n    def destroy = {\n    }\n\n}\n```\n#\u4f7f\u3044\u65b9\n```groovy:HelloController\npackage sqltest\n\nimport grails.gorm.DetachedCriteria\n\nclass HelloController {\n\n    def where () {\n        DetachedCriteria a = Person.where {\n            name == \"koji-2\"\n        }\n\n        Person p = a.find()\n        render p.sayHello()\n    }\n\n    // \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u306f\u308f\u304b\u308a\u3084\u3059\u304f\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u3051\u3069\u3001Groovy\u306e\u6b63\u898f\u8868\u73fe\u3063\u307d\u3044\u69cb\u6587\u3067==~\u3068=~\n    // \u304c\u4f7f\u3048\u308b\u3051\u3069\u3001\u5229\u7528\u3067\u304d\u308b\u306e\u306f\u7d50\u5c40SQL\u306elike\u69cb\u6587\u306a\u306e\u3067\u3001\u6b63\u898f\u8868\u73fe\u304c\u4f7f\u3048\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3002\n    def where2() {\n        DetachedCriteria query = Person.where {\n            name ==~ /koji-%/\n        }\n        render query.list().size()\n    }\n\n    // \u5c11\u3057\u8907\u96d1\u306a\u6761\u4ef6\u306b\u306a\u308b\u3068\u3001Groovy\u30e9\u30a4\u30af\u306a\u6761\u4ef6\u6307\u5b9a\u304c\u3067\u304d\u308bwhere\u30af\u30a8\u30ea\u306e\u307b\u3046\u304c\n    // \u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30d5\u30a1\u30a4\u30f3\u30c0\u30fc\u3088\u308a\u30b9\u30de\u30fc\u30c8\u304b\u3082\uff1f\n    def where3() {\n        DetachedCriteria query = Person.where {\n            (name == \"koji-1\" && age == 20) || age == 99\n        }\n        render query.list()\n    }\n\n    // where\u30af\u30a8\u30ea\u306f\u9045\u5ef6\u8a55\u4fa1\u306a\u306e\u3067\u3001\u30c9\u30e1\u30a4\u30f3\u306e\u4e2d\u306b\u4e8b\u524d\u306b\u7528\u610f\u3057\u3066\u304a\u304f\u3053\u3068\u3082\u53ef\u80fd\u3002\n    // \u7d50\u679c\u7684\u306b\u540d\u524d\u3092\u3064\u3051\u308b\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3001\u3069\u3046\u3044\u3063\u305f\u30c7\u30fc\u30bf\u304c\u62bd\u51fa\u3055\u308c\u308b\u306e\u304b\u308f\u304b\u308a\u3084\u3059\u304f\u306a\u308b\u3002\n    def where4() {\n        render Person.adults.list()\n    }\n\n    // \u95a2\u9023\u3092\u6301\u3063\u3066\u3044\u308b\u30c9\u30e1\u30a4\u30f3\u3082\u691c\u7d22\u3067\u304d\u308b\u3002\n    def where5() {\n        Editor e = Editor.findByName(\"vim\")\n        DetachedCriteria query = Person.where {\n            editor.name == e.name\n            // \u3053\u3063\u3061\u3082OK\n            //editor.name == Editor.findByName(\"vim\").name\n        }\n        render query.list()\n    }\n\n    // \u305f\u3060\u30571\u5bfe\u591a\u3060\u3068size\u3057\u304b\u4f7f\u3048\u306a\u3044\u3002\u3002\u3002\n    // \uff11\u5bfe\u591a\u306e\u6271\u3044\u306f\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u30d5\u30a1\u30a4\u30f3\u30c0\u30fc\u3067\u3082\u5fae\u5999\u306b\u6319\u52d5\u304c\u7406\u89e3\u3057\u3065\u3089\u3044\u3002\n    def where6() {\n        DetachedCriteria query = Person.where {\n            hobbies.size() >= 2\n        }\n        render query.list()\n    }\n\n    // \u307e\u305a20\u6b73\u306e\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3002\u305d\u306e\u30e6\u30fc\u30b6\u305f\u3061\u306e\u540d\u524d\u3068\u4e00\u81f4\u3059\u308b\u30e6\u30fc\u30b6\u3092\u629c\u304d\u51fa\u3057\u3066\u304f\u308b\u3002\n    // \u306a\u306e\u3067\u3001\u5f53\u7136\u672a\u6210\u5e74\u8005\u304c\u542b\u307e\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n    def where7() {\n        DetachedCriteria query = Person.where {\n            name in where {age == 20}.name\n        }\n        render query.list()\n    }\n\n    // \u6210\u4eba\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3001\u3001\u305d\u306e\u4e2d\u304b\u3089\u6700\u3082\u82e5\u3044\u5e74\u9f62\u3092\u53d6\u5f97\u3059\u308b\u3002\n    // \u305d\u306e\u5e74\u9f62\u3068\u4e00\u81f4\u3059\u308b\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3002\n    // \u3064\u307e\u308a\u3001\u6210\u4eba\u30e6\u30fc\u30b6\u3067\u6700\u3082\u82e5\u3044\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\u304c\u53d6\u5f97\u3055\u308c\u308b\u3002\n    def where8() {\n        DetachedCriteria query = Person.where {\n            age == where { age > 19 }.min('age')\n        }\n        render query.list()\n    }\n}\n\n```\n", "tags": ["Grails2.4.2"]}