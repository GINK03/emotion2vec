{"context": " More than 1 year has passed since last update.\u4ee5\u524d\u66f8\u3044\u305f\u8a18\u4e8b\u3067\u8907\u6570\u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u6642\u306b\u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u4ed6\u306e\u30e2\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u751f\u3059\u308b\u306e\u306b\u9045\u5ef6\u304c\u767a\u751f\u3057\u3066\u307e\u3057\u305f\uff08\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u76f4\u5f8c\u306e\u307f\uff09\n\n\u30c6\u30a3\u30e9\u30ce\u30b9\u30af\u30ea\u30d7\u30c8\u306eLive2D\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u540c\u69d8\u306e\u51e6\u7406\u3092\u66f8\u3044\u3066\u305f\u306e\u3067\u3001\u30e2\u30fc\u30b7\u30e7\u30f3\u9045\u5ef6\u30d0\u30b0\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30d0\u30b0\u306f\u4fee\u6b63\u3057\u3066\u5148\u65e5UP\u3057\u307e\u3057\u305f m(_ _)m\n\u3068\u308a\u3042\u3048\u305a\u306e\u5bfe\u7b56\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u539f\u56e0\n\u30e2\u30fc\u30b7\u30e7\u30f3\u3092\u5168\u3066\u30d7\u30ea\u30ed\u30fc\u30c9\u3057\u3066\u304a\u308a\u3001idle\u30e2\u30fc\u30b7\u30e7\u30f3\u8aad\u307f\u8fbc\u307f\u304c\u7d42\u308f\u308b\u307e\u3067\u305d\u308c\u4ee5\u5916\u306e\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u30ed\u30fc\u30c9\u3055\u308c\u3066\u306a\u304b\u3063\u305f...\u3002\n\u3053\u306e\u73fe\u8c61\u306f\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u3067\u306f\u306a\u304f\u3001\u5c3a\u306e\u9577\u3055\u306b\u3088\u308b\u306e\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u9577\u3044\u3068\u305d\u308c\u3060\u3051\u30ed\u30fc\u30c9\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\n\n\u203b\u3000idle\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u884c\u3092\u4e00\u756a\u4e0b\u306b\u79fb\u3057\u3001\u6700\u5f8c\u306b\u30ed\u30fc\u30c9\u3059\u308b\u3088\u3046\u306b\u3059\u308c\u3070\u66ab\u5b9a\u5bfe\u7b56\u3067\u304d\u307e\u3059\n\nidle\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u5c3a\u304c\u9577\u304f(10\u79d2)\u3001idle\u4ee5\u5916\u306f\u5c3a\u304c\u77ed\u3044(1\u301c4\u79d2)\n\n\u5bfe\u7b56\u3057\u305f\u3053\u3068\n\u5c3a\u304c\u9577\u3044idle\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u307f\u30d7\u30ea\u30ed\u30fc\u30c9\u3057\u3001\u5c3a\u304c\u77ed\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306f\u5373\u6642\u30ed\u30fc\u30c9\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\u305f\u3060\u3001\u3053\u306e\u5834\u5408\u3082\u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u306f\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u304c\u3001\u5c3a\u304c\u77ed\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306f\u5373\u518d\u751f\u3067\u304d\u307e\u3059\n\n\u3061\u306a\u307f\u306bSDK\u30b5\u30f3\u30d7\u30eb\u306eSampleApp1\u3082\u305d\u3046\u3044\u3046\u5b9f\u88c5\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\nSimple.js\n/**\n*    \u5b9a\u6570\n*/\n// \u30e2\u30c7\u30eb\u30d1\u30b9\nvar MODEL_PATH = \"assets/haru/\";\n// \u30e2\u30c7\u30eb\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\nvar MODEL_JSON = \"haru.model.json\";\n// canvas\u306e\u5e45\u3068\u9ad8\u3055\nvar CANVAS_WIDTH  = 512;\nvar CANVAS_HEIGHT = 512;\n// canvas\u306eID\nvar CANVAS_ID =\"glcanvas\";\nvar glCanvas = null;\n// \u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u30e2\u30fc\u30b7\u30e7\u30f3\u30b0\u30eb\u30fc\u30d7\nvar PRELOAD_GROUP = \"idle\";\n\n\n// \u30ed\u30fc\u30c9\u6642\nwindow.onload = function(){\n    // model.json\u304b\u3089Live2D\u30e2\u30c7\u30eb\u60c5\u5831\u53d6\u5f97\u3057\u751f\u6210\n    jsonloader(MODEL_PATH + MODEL_JSON);\n}\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \" line:\" + line + \" \" + msg;\n    console.log(errmsg);\n}\n\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nfunction jsonloader(filepath){\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", filepath, true);\n    request.onreadystatechange = function(){\n        if(request.readyState == 4 && request.status == 200){\n            // model.json\u304b\u3089\u53d6\u5f97\n            var jsondata = JSON.parse(request.responseText);\n            // \u5f15\u6570\u306fCanvasID, json, \u8868\u793a\u30b9\u30b1\u30fc\u30eb\uff08\u7701\u7565\u53ef\uff09\n            glCanvas = new Simple(CANVAS_ID, jsondata , 2.0);\n            // \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\n            make_optionbtn();\n        }\n    }\n    request.send(null);\n}\n\n\n/****************************************\n* Simple\u3092\u62e1\u5f35\u3057\u305f\u30af\u30e9\u30b9\n****************************************/\nvar Simple = function(canvasid, json, modelscale) {\n    // optional\n    if(modelscale == null) modelscale = 2.0;\n    // Live2D\u30e2\u30c7\u30eb\u7ba1\u7406\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    this.live2DMgr = new LAppLive2DManager();\n    // Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    this.live2DModel = null;\n    // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    this.requestID = null;\n    // \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.loadLive2DCompleted = false;\n    // \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.initLive2DCompleted = false;\n    // WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    this.loadedImages = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motions = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30de\u30cd\u30b8\u30e3\u30fc\n    this.motionMgr = null;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u756a\u53f7\n    this.motionnm = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30e9\u30b0\n    this.motionflg = false;\n    // \u30b5\u30a6\u30f3\u30c9\n    this.sounds = [];\n    // \u30b5\u30a6\u30f3\u30c9\u756a\u53f7\n    this.soundnm = 0;\n    // \u524d\u306b\u6d41\u3057\u305f\u30b5\u30a6\u30f3\u30c9\n    this.beforesound = 0;\n    // Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\n    this.modelDef = json;\n    // Live2D\u30e2\u30c7\u30eb\u306eOpenGL\u8868\u793a\u30b5\u30a4\u30ba\n    this.modelscale = modelscale;\n    // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\n    this.fadeines = [];\n    // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\n    this.fadeoutes = [];\n    // \u30dd\u30fc\u30ba\n    this.pose = null;\n    // \u7269\u7406\u6f14\u7b97\n    this.physics = null;\n\n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n    this.canvas = document.getElementById(canvasid);\n    this.canvas.width = CANVAS_WIDTH;\n    this.canvas.height = CANVAS_HEIGHT;\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextlost\", function(e) {\n        console.log(\"context lost\");\n        this.loadLive2DCompleted = false;\n        this.initLive2DCompleted = false;\n\n        var cancelAnimationFrame =\n            window.cancelAnimationFrame ||\n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(this.requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n\n        e.preventDefault();\n    }, false);\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextrestored\" , function(e){\n        console.log(\"webglcontext restored\");\n        this.initLoop(this.canvas);\n    }, false);\n\n    // Init and start Loop\n    this.initLoop(this.canvas);\n};\n\n\n/**\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.prototype.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------\n    // WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var gl = this.getWebGLContext(canvas);\n    if (!gl) {\n        console.log(\"Failed to create WebGL context.\");\n        return;\n    }\n\n    // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n    gl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );\n\n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------\n    // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5bfe\u7b56\u7528\n    var that = this;\n    // moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    this.loadBytes(MODEL_PATH + that.modelDef.model, function(buf){\n        that.live2DModel = Live2DModelWebGL.loadModel(buf);\n    });\n\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n    for(var i = 0; i < that.modelDef.textures.length; i++){\n        (function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n            that.loadedImages[tno] = new Image();\n            that.loadedImages[tno].src = MODEL_PATH + that.modelDef.textures[tno];\n            that.loadedImages[tno].onload = function(){\n                if((++loadCount) == that.modelDef.textures.length) {\n                    that.loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                }\n            }\n            that.loadedImages[tno].onerror = function() {\n                console.log(\"Failed to load image : \" + that.modelDef.textures[tno]);\n            }\n        })( i );\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u51e6\u7406\n    that.preloadMotions(that);\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    that.motionMgr = new L2DMotionManager();\n\n    // \u30dd\u30fc\u30ba\u306e\u30ed\u30fc\u30c9(json\u5185\u306epose\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.pose !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.pose, function(buf){\n            // \u30dd\u30fc\u30b9\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.pose = L2DPose.load(buf);\n        });\n    }\n\n    // \u7269\u7406\u6f14\u7b97\u306e\u30ed\u30fc\u30c9(json\u5185\u306ephysics\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.physics !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.physics, function(buf){\n            // \u7269\u7406\u6f14\u7b97\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.physics = L2DPhysics.load(buf);\n        });\n    }\n\n    //------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n    (function tick() {\n        that.draw(gl, that); // 1\u56de\u5206\u63cf\u753b\n\n        var requestAnimationFrame =\n            window.requestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n        that.requestID = requestAnimationFrame( tick , that.canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n/**\n* \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u30d7\u30ea\u30ed\u30fc\u30c9\n*/\nSimple.prototype.preloadMotions = function(that){\nvar motion_keys = [];   // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u914d\u5217\nvar mtn_tag = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\nvar mtn_num = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ab\u30a6\u30f3\u30c8\n\n    // key\u3092\u53d6\u5f97\n    for(var key in that.modelDef.motions){\n        // moitons\u914d\u4e0b\u306e\u30ad\u30fc\u3092\u53d6\u5f97\n        motion_keys[mtn_tag] = key;\n        // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u6570\u3092\u53d6\u5f97\n        mtn_num += that.modelDef.motions[motion_keys[mtn_tag]].length;\n        mtn_tag++;\n    }\n\n    var mtncnt = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\u5206\u30eb\u30fc\u30d7\n    for(var mtnkey in motion_keys){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u3068\u30b5\u30a6\u30f3\u30c9\u3092\u8aad\u307f\u8fbc\u3080(motions\u914d\u4e0b\u306e\u30bf\u30b0\u3092\u8aad\u307f\u8fbc\u3080)\n        for(var j = 0; j < that.modelDef.motions[motion_keys[mtnkey]].length; j++){\n            // \u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u3060\u3051\u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\n            if(motion_keys [mtnkey] == PRELOAD_GROUP){\n                (function(){\n                    var idlecnt = mtncnt;   // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5185\u3067\u6e21\u3059\u5909\u6570\n                    // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n                    that.loadBytes(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].file, function(buf){\n                        that.motions[idlecnt] = Live2DMotion.loadMotion(buf);\n                    });\n                })();\n            }else{\n                // \u5c3a\u304c\u77ed\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306f\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u6587\u5b57\u5217\u3092\u30bb\u30c3\u30c8\u3059\u308b\n                that.motions[mtncnt] = MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].file;\n            }\n            // \u30b5\u30a6\u30f3\u30c9\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].sound == null){\n                that.sounds[mtncnt] = \"\";\n            }else{\n                that.sounds[mtncnt] = new Sound(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].sound);\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_in == null){\n                that.fadeines[mtncnt] = \"\";\n            }else{\n                that.fadeines[mtncnt] = that.modelDef.motions[motion_keys[mtnkey]][j].fade_in;\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_out == null){\n                that.fadeoutes[mtncnt] = \"\";\n            }else{\n                that.fadeoutes[mtncnt] = that.modelDef.motions[motion_keys[mtnkey]][j].fade_out;\n            }\n            mtncnt++;\n        }\n    }\n};\n\n\n/**\n* Live2D\u306e\u63cf\u753b\u51e6\u7406\n*/\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted )\n        return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n        that.initLive2DCompleted = true;\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = that.modelscale / that.live2DModel.getCanvasWidth();\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -that.modelscale/2, that.modelscale/2, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306e\u5834\u5408\uff08\u30d5\u30e9\u30b0\u3067\u5224\u5b9a\u3059\u308b\uff09\n    if(that.motionflg == true ){\n        // \u512a\u5148\u5ea6\u9ad8\u3081\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n        that.setMotion(that, 1);\n        // \u30d5\u30e9\u30b0\u306f\u843d\u3068\u3057\u3066\u304a\u304f\n        that.motionflg = false;\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u751f\n    if(that.motionMgr.isFinished() && that.motionnm != null){\n        // \u512a\u5148\u5ea6\u4f4e\u3081\u3067\u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n        that.setMotion(that, 0);\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n\n    // \u30dd\u30fc\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.pose != null)that.pose.updateParam(that.live2DModel);\n\n    // \u7269\u7406\u6f14\u7b97\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.physics != null)that.physics.updateParam(that.live2DModel);\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update();  // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();    // \u63cf\u753b\n};\n\n/**\n* Live2D\u306e\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n*/\nSimple.prototype.setMotion = function(that, priority){\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u5b9a\u7fa9\u304c\u3042\u3063\u305f\u5834\u5408\n    if(that.motions[that.motionnm] !== void 0){\n        // \u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306a\u3089\u30d0\u30a4\u30c8\u914d\u5217\u3067\u30ed\u30fc\u30c9\u3059\u308b\n        if(typeof that.motions[that.motionnm] == \"string\"){\n            // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\n            that.loadBytes(that.motions[that.motionnm], function(buf){\n                that.motions[that.motionnm] = Live2DMotion.loadMotion(buf);\n                // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n                if(that.fadeines[that.motionnm] != \"\"){\n                    that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n                }\n                // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n                if(that.fadeoutes[that.motionnm] != \"\"){\n                    that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n                }\n                // \u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n                that.motionMgr.startMotion(that.motions[that.motionnm], priority);\n                // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n                if(that.sounds[that.motionnm]){\n                    // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n                    if(that.sounds[that.beforesound] != \"\"){\n                        that.sounds[that.beforesound].stop();\n                    }\n                    // \u97f3\u58f0\u3092\u518d\u751f\n                    that.sounds[that.motionnm].play();\n                    // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n                    that.beforesound = that.motionnm;\n                }\n            });\n        }else{\n            // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n            if(that.fadeines[that.motionnm] != \"\"){\n                that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n            if(that.fadeoutes[that.motionnm] != \"\"){\n                that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n            }\n            // \u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n            that.motionMgr.startMotion(that.motions[that.motionnm], priority);\n            // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n            if(that.sounds[that.motionnm]){\n                // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n                if(that.sounds[that.beforesound] != \"\"){\n                    that.sounds[that.beforesound].stop();\n                }\n                // \u97f3\u58f0\u3092\u518d\u751f\n                that.sounds[that.motionnm].play();\n                // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n                that.beforesound = that.motionnm;\n            }\n        }\n    }\n};\n\n\n/**\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.prototype.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n    var param = { alpha : true };\n\n    for( var i = 0; i < NAMES.length; i++ ){\n        try{\n            var ctx = canvas.getContext( NAMES[i], param );\n            if( ctx ) return ctx;\n        }\n        catch(e){}\n    }\n    return null;\n};\n\n\n/**\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.prototype.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/)\n{\n    var texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n    if ( !texture ){\n        console.log(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n    // image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30e6\u30cb\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\n    gl.activeTexture( gl.TEXTURE0 );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306b\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u7d10\u4ed8\u3051\u308b\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b(\u5bfe\u8c61\u30d4\u30af\u30bb\u30eb\u306e\u4e2d\u5fc3\u306b\u6700\u3082\u8fd1\u3044\u70b9\u306e\u5024)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u751f\u6210\n    gl.generateMipmap(gl.TEXTURE_2D);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30d0\u30a4\u30f3\u30c9\u958b\u653e\n    gl.bindTexture( gl.TEXTURE_2D , null );\n\n    return texture;\n};\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.prototype.loadBytes = function(path , callback)\n{\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path , true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function(){\n        switch( request.status ){\n        case 200:\n            callback( request.response );\n            break;\n        default:\n            console.log( \"Failed to load (\" + request.status + \") : \" + path );\n            break;\n        }\n    }\n    request.send(null);\n};\n\n\n/****************************************\n* \u30b5\u30a6\u30f3\u30c9\u30af\u30e9\u30b9\n****************************************/\nvar Sound = function(path   /*\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9*/) {\n    this.snd = document.createElement(\"audio\");\n    this.snd.src = path;\n};\n\n/**\n* \u97f3\u58f0\u518d\u751f\n*/\nSound.prototype.play = function() {\n    this.snd.play();\n};\n\n/**\n* \u97f3\u58f0\u505c\u6b62\n*/\nSound.prototype.stop = function() {\n    this.snd.pause();\n    this.snd.currentTime = 0;\n};\n\n\n/****************************************\n* \u30dc\u30bf\u30f3\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\n****************************************/\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u53d6\u5f97\nvar mtnfilenames = [];\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u4f5c\u308b\u5834\u6240\nvar selectmenu = document.getElementById('selectmenu');\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\nfunction make_optionbtn(){\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\u3059\u308b\n    if(glCanvas != null && mtnfilenames.length == 0){\n        for(var key in glCanvas.modelDef.motions){\n            for(j = 0; j < glCanvas.modelDef.motions[key].length; j++){\n                // \u4f59\u5206\u306a\u30d1\u30b9\u3092\u30ab\u30c3\u30c8\n                var strfilenm = glCanvas.modelDef.motions[key][j].file.split(\"/\");\n                // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\n                mtnfilenames.push(strfilenm[1]);\n                // \u30aa\u30d7\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\n                var option = document.createElement('option');\n                option.value = strfilenm[1];\n                option.appendChild(document.createTextNode(strfilenm[1]));\n                selectmenu.appendChild(option);\n            }\n        }\n    }\n}\n\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u308a\u66ff\u3048\nfunction motionChange(){\n    // \u9078\u629e\u30dc\u30bf\u30f3\u306e\u5024\u3092\u53d6\u5f97\n    var mtnfilenm = selectmenu.value;\n\n    var cnt = 0;\n    // \u30d5\u30a1\u30a4\u30eb\u540d\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u756a\u53f7\u3092\u53d6\u308a\u51fa\u3059\n    for(var k = 0; k < mtnfilenames.length; k++){\n        if(mtnfilenm == mtnfilenames[k]){\n            break;\n        }\n        cnt++;\n    }\n    console.warn(mtnfilenm + \"\u9078\u629e\uff01\");\n    // Live2D\u30e2\u30c7\u30eb\u306b\u6e21\u3059\n    glCanvas.motionnm = cnt;\n    glCanvas.motionflg = true;\n}\n\n\n\n\u30c6\u30a3\u30e9\u30ce\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306e\u5909\u66f4\u70b9\n\u30c6\u30a3\u30e9\u30ce\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u3001\u305d\u3053\u306bmodel.json\u306e\u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u5909\u6570\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\n\ndata/others/live2d/Live2Dmodel.js\n// \u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u30e2\u30fc\u30b7\u30e7\u30f3\u30b0\u30eb\u30fc\u30d7\nvar PRELOAD_GROUP = \"idle\";\n\n// Live2D\u30e2\u30c7\u30eb\u306e\u914d\u5217\nvar LIVE2D_MODEL = [];\n\n// Live2D\u30e2\u30c7\u30eb\uff08haru\uff09\nLIVE2D_MODEL['haru'] = {\n    \"filepath\":\"data/others/live2d/assets/haru/\",\n    \"modeljson\":\"haru.model.json\"\n};\n\n// Live2D\u30e2\u30c7\u30eb\uff08Epsilon\uff09\nLIVE2D_MODEL['Epsilon'] = {\n    \"filepath\":\"data/others/live2d/assets/Epsilon/\",\n    \"modeljson\":\"Epsilon_free.model.json\"\n};\n\n\n\u3053\u306e\u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306fmodel.json\u306e\u4e2d\u3067idle\u30b0\u30eb\u30fc\u30d7\u306b\u542b\u3081\u3066\u3082\u3089\u3048\u308c\u3070\u5927\u4e08\u592b\u3067\u3059\uff01\n\n\u3053\u306e\u554f\u984c\u306f\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u30ed\u30fc\u30c9\u3059\u308bWebGL\u7248\u306eSDK\u3060\u3051\u306e\u554f\u984c\u3067\u3059\u304c\u3001\u4f55\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n[\u4ee5\u524d\u66f8\u3044\u305f\u8a18\u4e8b](http://qiita.com/naotaro0123/items/db277fd5a3c836ba2900)\u3067\u8907\u6570\u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u6642\u306b\u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u3042\u3063\u305f\u5834\u5408\u3001\u4ed6\u306e\u30e2\u30fc\u30b7\u30e7\u30f3\u3092\u518d\u751f\u3059\u308b\u306e\u306b\u9045\u5ef6\u304c\u767a\u751f\u3057\u3066\u307e\u3057\u305f\uff08\u30da\u30fc\u30b8\u30ed\u30fc\u30c9\u76f4\u5f8c\u306e\u307f\uff09\n![01 2.png](https://qiita-image-store.s3.amazonaws.com/0/15028/8bcdd565-1fd3-2690-bbfe-56ffc77208b5.png)\n\n\n[\u30c6\u30a3\u30e9\u30ce\u30b9\u30af\u30ea\u30d7\u30c8\u306eLive2D\u30d7\u30e9\u30b0\u30a4\u30f3](http://tyrano.jp/demo/play/live2d)\u3082\u540c\u69d8\u306e\u51e6\u7406\u3092\u66f8\u3044\u3066\u305f\u306e\u3067\u3001\u30e2\u30fc\u30b7\u30e7\u30f3\u9045\u5ef6\u30d0\u30b0\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u30d0\u30b0\u306f\u4fee\u6b63\u3057\u3066\u5148\u65e5UP\u3057\u307e\u3057\u305f m(_ _)m\n\n\u3068\u308a\u3042\u3048\u305a\u306e\u5bfe\u7b56\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n##\u539f\u56e0\n\u30e2\u30fc\u30b7\u30e7\u30f3\u3092\u5168\u3066\u30d7\u30ea\u30ed\u30fc\u30c9\u3057\u3066\u304a\u308a\u3001idle\u30e2\u30fc\u30b7\u30e7\u30f3\u8aad\u307f\u8fbc\u307f\u304c\u7d42\u308f\u308b\u307e\u3067\u305d\u308c\u4ee5\u5916\u306e\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u30ed\u30fc\u30c9\u3055\u308c\u3066\u306a\u304b\u3063\u305f...\u3002\n\u3053\u306e\u73fe\u8c61\u306f\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u3067\u306f\u306a\u304f\u3001\u5c3a\u306e\u9577\u3055\u306b\u3088\u308b\u306e\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u9577\u3044\u3068\u305d\u308c\u3060\u3051\u30ed\u30fc\u30c9\u306b\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\n![02.png](https://qiita-image-store.s3.amazonaws.com/0/15028/3aa3f28d-dd5a-c903-0744-0133f29ac921.png)\n\n**\u203b\u3000idle\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u884c\u3092\u4e00\u756a\u4e0b\u306b\u79fb\u3057\u3001\u6700\u5f8c\u306b\u30ed\u30fc\u30c9\u3059\u308b\u3088\u3046\u306b\u3059\u308c\u3070\u66ab\u5b9a\u5bfe\u7b56\u3067\u304d\u307e\u3059**\n![03.png](https://qiita-image-store.s3.amazonaws.com/0/15028/e36834e9-b40c-a7ef-7288-6f9e921633b6.png)\n\nidle\u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u5c3a\u304c\u9577\u304f(10\u79d2)\u3001idle\u4ee5\u5916\u306f\u5c3a\u304c\u77ed\u3044(1\u301c4\u79d2)\n\n##\u5bfe\u7b56\u3057\u305f\u3053\u3068\n\u5c3a\u304c\u9577\u3044idle\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u307f\u30d7\u30ea\u30ed\u30fc\u30c9\u3057\u3001\u5c3a\u304c\u77ed\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306f\u5373\u6642\u30ed\u30fc\u30c9\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\u305f\u3060\u3001\u3053\u306e\u5834\u5408\u3082\u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u306f\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u304c\u3001\u5c3a\u304c\u77ed\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306f\u5373\u518d\u751f\u3067\u304d\u307e\u3059\n![04.gif](https://qiita-image-store.s3.amazonaws.com/0/15028/ae4fbb21-e621-f0e4-6ced-45fcd5acd253.gif)\n\u3061\u306a\u307f\u306bSDK\u30b5\u30f3\u30d7\u30eb\u306eSampleApp1\u3082\u305d\u3046\u3044\u3046\u5b9f\u88c5\u306b\u306a\u3063\u3066\u3044\u307e\u3057\u305f\n\n##\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n```js:Simple.js\n/**\n*    \u5b9a\u6570\n*/\n// \u30e2\u30c7\u30eb\u30d1\u30b9\nvar MODEL_PATH = \"assets/haru/\";\n// \u30e2\u30c7\u30eb\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\nvar MODEL_JSON = \"haru.model.json\";\n// canvas\u306e\u5e45\u3068\u9ad8\u3055\nvar CANVAS_WIDTH  = 512;\nvar CANVAS_HEIGHT = 512;\n// canvas\u306eID\nvar CANVAS_ID =\"glcanvas\";\nvar glCanvas = null;\n// \u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u30e2\u30fc\u30b7\u30e7\u30f3\u30b0\u30eb\u30fc\u30d7\nvar PRELOAD_GROUP = \"idle\";\n\n\n// \u30ed\u30fc\u30c9\u6642\nwindow.onload = function(){\n    // model.json\u304b\u3089Live2D\u30e2\u30c7\u30eb\u60c5\u5831\u53d6\u5f97\u3057\u751f\u6210\n    jsonloader(MODEL_PATH + MODEL_JSON);\n}\n\n// JavaScript\u3067\u767a\u751f\u3057\u305f\u30a8\u30e9\u30fc\u3092\u53d6\u5f97\nwindow.onerror = function(msg, url, line, col, error) {\n    var errmsg = \"file:\" + url + \" line:\" + line + \" \" + msg;\n    console.log(errmsg);\n}\n\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nfunction jsonloader(filepath){\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", filepath, true);\n    request.onreadystatechange = function(){\n        if(request.readyState == 4 && request.status == 200){\n            // model.json\u304b\u3089\u53d6\u5f97\n            var jsondata = JSON.parse(request.responseText);\n            // \u5f15\u6570\u306fCanvasID, json, \u8868\u793a\u30b9\u30b1\u30fc\u30eb\uff08\u7701\u7565\u53ef\uff09\n            glCanvas = new Simple(CANVAS_ID, jsondata , 2.0);\n            // \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\n            make_optionbtn();\n        }\n    }\n    request.send(null);\n}\n\n\n/****************************************\n* Simple\u3092\u62e1\u5f35\u3057\u305f\u30af\u30e9\u30b9\n****************************************/\nvar Simple = function(canvasid, json, modelscale) {\n    // optional\n    if(modelscale == null) modelscale = 2.0;\n    // Live2D\u30e2\u30c7\u30eb\u7ba1\u7406\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    this.live2DMgr = new LAppLive2DManager();\n    // Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\n    this.live2DModel = null;\n    // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\u3059\u308b\u305f\u3081\u306eID\n    this.requestID = null;\n    // \u30e2\u30c7\u30eb\u306e\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.loadLive2DCompleted = false;\n    // \u30e2\u30c7\u30eb\u306e\u521d\u671f\u5316\u304c\u5b8c\u4e86\u3057\u305f\u3089 true\n    this.initLive2DCompleted = false;\n    // WebGL Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u914d\u5217\n    this.loadedImages = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\n    this.motions = [];\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u7ba1\u7406\u30de\u30cd\u30b8\u30e3\u30fc\n    this.motionMgr = null;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u756a\u53f7\n    this.motionnm = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30e9\u30b0\n    this.motionflg = false;\n    // \u30b5\u30a6\u30f3\u30c9\n    this.sounds = [];\n    // \u30b5\u30a6\u30f3\u30c9\u756a\u53f7\n    this.soundnm = 0;\n    // \u524d\u306b\u6d41\u3057\u305f\u30b5\u30a6\u30f3\u30c9\n    this.beforesound = 0;\n    // Live2D \u30e2\u30c7\u30eb\u8a2d\u5b9a\n    this.modelDef = json;\n    // Live2D\u30e2\u30c7\u30eb\u306eOpenGL\u8868\u793a\u30b5\u30a4\u30ba\n    this.modelscale = modelscale;\n    // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\n    this.fadeines = [];\n    // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\n    this.fadeoutes = [];\n    // \u30dd\u30fc\u30ba\n    this.pose = null;\n    // \u7269\u7406\u6f14\u7b97\n    this.physics = null;\n\n    // Live2D\u306e\u521d\u671f\u5316\n    Live2D.init();\n\n    // canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n    this.canvas = document.getElementById(canvasid);\n    this.canvas.width = CANVAS_WIDTH;\n    this.canvas.height = CANVAS_HEIGHT;\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5931\u3063\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextlost\", function(e) {\n        console.log(\"context lost\");\n        this.loadLive2DCompleted = false;\n        this.initLive2DCompleted = false;\n\n        var cancelAnimationFrame =\n            window.cancelAnimationFrame ||\n            window.mozCancelAnimationFrame;\n        cancelAnimationFrame(this.requestID); //\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u505c\u6b62\n\n        e.preventDefault();\n    }, false);\n\n    // \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u5fa9\u5143\u3055\u308c\u305f\u3068\u304d\n    this.canvas.addEventListener(\"webglcontextrestored\" , function(e){\n        console.log(\"webglcontext restored\");\n        this.initLoop(this.canvas);\n    }, false);\n\n    // Init and start Loop\n    this.initLoop(this.canvas);\n};\n\n\n/**\n* WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u30fb\u521d\u671f\u5316\u3002\n* Live2D\u306e\u521d\u671f\u5316\u3001\u63cf\u753b\u30eb\u30fc\u30d7\u3092\u958b\u59cb\u3002\n*/\nSimple.prototype.initLoop = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    //------------ WebGL\u306e\u521d\u671f\u5316 ------------\n    // WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n    var gl = this.getWebGLContext(canvas);\n    if (!gl) {\n        console.log(\"Failed to create WebGL context.\");\n        return;\n    }\n\n    // \u63cf\u753b\u30a8\u30ea\u30a2\u3092\u767d\u3067\u30af\u30ea\u30a2\n    gl.clearColor( 0.0 , 0.0 , 0.0 , 0.0 );\n\n    //------------ Live2D\u306e\u521d\u671f\u5316 ------------\n    // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5bfe\u7b56\u7528\n    var that = this;\n    // moc\u30d5\u30a1\u30a4\u30eb\u304b\u3089Live2D\u30e2\u30c7\u30eb\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\n    this.loadBytes(MODEL_PATH + that.modelDef.model, function(buf){\n        that.live2DModel = Live2DModelWebGL.loadModel(buf);\n    });\n\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u8aad\u307f\u8fbc\u307f\n    var loadCount = 0;\n    for(var i = 0; i < that.modelDef.textures.length; i++){\n        (function ( tno ){// \u5373\u6642\u95a2\u6570\u3067 i \u306e\u5024\u3092 tno \u306b\u56fa\u5b9a\u3059\u308b\uff08onerror\u7528)\n            that.loadedImages[tno] = new Image();\n            that.loadedImages[tno].src = MODEL_PATH + that.modelDef.textures[tno];\n            that.loadedImages[tno].onload = function(){\n                if((++loadCount) == that.modelDef.textures.length) {\n                    that.loadLive2DCompleted = true;//\u5168\u3066\u8aad\u307f\u7d42\u308f\u3063\u305f\n                }\n            }\n            that.loadedImages[tno].onerror = function() {\n                console.log(\"Failed to load image : \" + that.modelDef.textures[tno]);\n            }\n        })( i );\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u51e6\u7406\n    that.preloadMotions(that);\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30de\u30cd\u30b8\u30e3\u30fc\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\n    that.motionMgr = new L2DMotionManager();\n\n    // \u30dd\u30fc\u30ba\u306e\u30ed\u30fc\u30c9(json\u5185\u306epose\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.pose !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.pose, function(buf){\n            // \u30dd\u30fc\u30b9\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.pose = L2DPose.load(buf);\n        });\n    }\n\n    // \u7269\u7406\u6f14\u7b97\u306e\u30ed\u30fc\u30c9(json\u5185\u306ephysics\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af)\n    if(that.modelDef.physics !== void 0){\n        that.loadBytes(MODEL_PATH + that.modelDef.physics, function(buf){\n            // \u7269\u7406\u6f14\u7b97\u30af\u30e9\u30b9\u306e\u30ed\u30fc\u30c9\n            that.physics = L2DPhysics.load(buf);\n        });\n    }\n\n    //------------ \u63cf\u753b\u30eb\u30fc\u30d7 ------------\n    (function tick() {\n        that.draw(gl, that); // 1\u56de\u5206\u63cf\u753b\n\n        var requestAnimationFrame =\n            window.requestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n        that.requestID = requestAnimationFrame( tick , that.canvas );// \u4e00\u5b9a\u6642\u9593\u5f8c\u306b\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n    })();\n};\n\n/**\n* \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u30d7\u30ea\u30ed\u30fc\u30c9\n*/\nSimple.prototype.preloadMotions = function(that){\nvar motion_keys = [];   // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u914d\u5217\nvar mtn_tag = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\nvar mtn_num = 0;        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30ab\u30a6\u30f3\u30c8\n\n    // key\u3092\u53d6\u5f97\n    for(var key in that.modelDef.motions){\n        // moitons\u914d\u4e0b\u306e\u30ad\u30fc\u3092\u53d6\u5f97\n        motion_keys[mtn_tag] = key;\n        // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u6570\u3092\u53d6\u5f97\n        mtn_num += that.modelDef.motions[motion_keys[mtn_tag]].length;\n        mtn_tag++;\n    }\n\n    var mtncnt = 0;\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30bf\u30b0\u5206\u30eb\u30fc\u30d7\n    for(var mtnkey in motion_keys){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u3068\u30b5\u30a6\u30f3\u30c9\u3092\u8aad\u307f\u8fbc\u3080(motions\u914d\u4e0b\u306e\u30bf\u30b0\u3092\u8aad\u307f\u8fbc\u3080)\n        for(var j = 0; j < that.modelDef.motions[motion_keys[mtnkey]].length; j++){\n            // \u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u3060\u3051\u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\n            if(motion_keys [mtnkey] == PRELOAD_GROUP){\n                (function(){\n                    var idlecnt = mtncnt;   // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u5185\u3067\u6e21\u3059\u5909\u6570\n                    // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n                    that.loadBytes(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].file, function(buf){\n                        that.motions[idlecnt] = Live2DMotion.loadMotion(buf);\n                    });\n                })();\n            }else{\n                // \u5c3a\u304c\u77ed\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306f\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u6587\u5b57\u5217\u3092\u30bb\u30c3\u30c8\u3059\u308b\n                that.motions[mtncnt] = MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].file;\n            }\n            // \u30b5\u30a6\u30f3\u30c9\u306e\u6570\u3060\u3051\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].sound == null){\n                that.sounds[mtncnt] = \"\";\n            }else{\n                that.sounds[mtncnt] = new Sound(MODEL_PATH + that.modelDef.motions[motion_keys[mtnkey]][j].sound);\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_in == null){\n                that.fadeines[mtncnt] = \"\";\n            }else{\n                that.fadeines[mtncnt] = that.modelDef.motions[motion_keys[mtnkey]][j].fade_in;\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u30ed\u30fc\u30c9\n            if(that.modelDef.motions[motion_keys[mtnkey]][j].fade_out == null){\n                that.fadeoutes[mtncnt] = \"\";\n            }else{\n                that.fadeoutes[mtncnt] = that.modelDef.motions[motion_keys[mtnkey]][j].fade_out;\n            }\n            mtncnt++;\n        }\n    }\n};\n\n\n/**\n* Live2D\u306e\u63cf\u753b\u51e6\u7406\n*/\nSimple.prototype.draw = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, that)\n{\n    // Canvas\u3092\u30af\u30ea\u30a2\u3059\u308b\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Live2D\u521d\u671f\u5316\n    if( ! that.live2DModel || ! that.loadLive2DCompleted )\n        return; //\u30ed\u30fc\u30c9\u304c\u5b8c\u4e86\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u4f55\u3082\u3057\u306a\u3044\u3067\u8fd4\u308b\n\n    // \u30ed\u30fc\u30c9\u5b8c\u4e86\u5f8c\u306b\u521d\u56de\u306e\u307f\u521d\u671f\u5316\u3059\u308b\n    if( ! that.initLive2DCompleted ){\n        that.initLive2DCompleted = true;\n        // \u753b\u50cf\u304b\u3089WebGL\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\u3057\u3001\u30e2\u30c7\u30eb\u306b\u767b\u9332\n        for( var i = 0; i < that.loadedImages.length; i++ ){\n            //Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n            var texName = that.createTexture(gl, that.loadedImages[i]);\n\n            that.live2DModel.setTexture(i, texName); //\u30e2\u30c7\u30eb\u306b\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30bb\u30c3\u30c8\n        }\n\n        // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u5143\u753b\u50cf\u306e\u53c2\u7167\u3092\u30af\u30ea\u30a2\n        that.loadedImages = null;\n        // OpenGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u30bb\u30c3\u30c8\n        that.live2DModel.setGL(gl);\n        // \u8868\u793a\u4f4d\u7f6e\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306e\u884c\u5217\u3092\u5b9a\u7fa9\u3059\u308b\n        var s = that.modelscale / that.live2DModel.getCanvasWidth();\n        var matrix4x4 = [\n             s, 0, 0, 0,\n             0,-s, 0, 0,\n             0, 0, 1, 0,\n            -that.modelscale/2, that.modelscale/2, 0, 1\n        ];\n        that.live2DModel.setMatrix(matrix4x4);\n    }\n\n    // \u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u4ee5\u5916\u306e\u5834\u5408\uff08\u30d5\u30e9\u30b0\u3067\u5224\u5b9a\u3059\u308b\uff09\n    if(that.motionflg == true ){\n        // \u512a\u5148\u5ea6\u9ad8\u3081\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n        that.setMotion(that, 1);\n        // \u30d5\u30e9\u30b0\u306f\u843d\u3068\u3057\u3066\u304a\u304f\n        that.motionflg = false;\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u304c\u7d42\u4e86\u3057\u3066\u3044\u305f\u3089\u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u518d\u751f\n    if(that.motionMgr.isFinished() && that.motionnm != null){\n        // \u512a\u5148\u5ea6\u4f4e\u3081\u3067\u30a2\u30a4\u30c9\u30eb\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n        that.setMotion(that, 0);\n    }\n\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u6307\u5b9a\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u4f55\u3082\u518d\u751f\u3057\u306a\u3044\n    if(that.motionnm != null){\n        // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n        that.motionMgr.updateParam(that.live2DModel);\n    }\n\n    // \u30dd\u30fc\u30ba\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.pose != null)that.pose.updateParam(that.live2DModel);\n\n    // \u7269\u7406\u6f14\u7b97\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u66f4\u65b0\n    if(that.physics != null)that.physics.updateParam(that.live2DModel);\n\n    // Live2D\u30e2\u30c7\u30eb\u3092\u66f4\u65b0\u3057\u3066\u63cf\u753b\n    that.live2DModel.update();  // \u73fe\u5728\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u5408\u308f\u305b\u3066\u9802\u70b9\u7b49\u3092\u8a08\u7b97\n    that.live2DModel.draw();    // \u63cf\u753b\n};\n\n/**\n* Live2D\u306e\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n*/\nSimple.prototype.setMotion = function(that, priority){\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u306e\u5b9a\u7fa9\u304c\u3042\u3063\u305f\u5834\u5408\n    if(that.motions[that.motionnm] !== void 0){\n        // \u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u306a\u3089\u30d0\u30a4\u30c8\u914d\u5217\u3067\u30ed\u30fc\u30c9\u3059\u308b\n        if(typeof that.motions[that.motionnm] == \"string\"){\n            // \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u30e2\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\n            that.loadBytes(that.motions[that.motionnm], function(buf){\n                that.motions[that.motionnm] = Live2DMotion.loadMotion(buf);\n                // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n                if(that.fadeines[that.motionnm] != \"\"){\n                    that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n                }\n                // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n                if(that.fadeoutes[that.motionnm] != \"\"){\n                    that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n                }\n                // \u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n                that.motionMgr.startMotion(that.motions[that.motionnm], priority);\n                // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n                if(that.sounds[that.motionnm]){\n                    // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n                    if(that.sounds[that.beforesound] != \"\"){\n                        that.sounds[that.beforesound].stop();\n                    }\n                    // \u97f3\u58f0\u3092\u518d\u751f\n                    that.sounds[that.motionnm].play();\n                    // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n                    that.beforesound = that.motionnm;\n                }\n            });\n        }else{\n            // \u30d5\u30a7\u30fc\u30c9\u30a4\u30f3\u306e\u8a2d\u5b9a\n            if(that.fadeines[that.motionnm] != \"\"){\n                that.motions[that.motionnm].setFadeIn(that.fadeines[that.motionnm]);\n            }\n            // \u30d5\u30a7\u30fc\u30c9\u30a2\u30a6\u30c8\u306e\u8a2d\u5b9a\n            if(that.fadeoutes[that.motionnm] != \"\"){\n                that.motions[that.motionnm].setFadeOut(that.fadeoutes[that.motionnm]);\n            }\n            // \u512a\u5148\u5ea6\u3092\u6307\u5b9a\u3057\u30e2\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n            that.motionMgr.startMotion(that.motions[that.motionnm], priority);\n            // \u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u3082\u3042\u308c\u3070\u518d\u751f\n            if(that.sounds[that.motionnm]){\n                // \u524d\u56de\u306e\u97f3\u58f0\u304c\u3042\u308c\u3070\u505c\u6b62\u3059\u308b\n                if(that.sounds[that.beforesound] != \"\"){\n                    that.sounds[that.beforesound].stop();\n                }\n                // \u97f3\u58f0\u3092\u518d\u751f\n                that.sounds[that.motionnm].play();\n                // \u9014\u4e2d\u3067\u505c\u6b62\u3067\u304d\u308b\u3088\u3046\u306b\u683c\u7d0d\u3059\u308b\n                that.beforesound = that.motionnm;\n            }\n        }\n    }\n};\n\n\n/**\n* WebGL\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n*/\nSimple.prototype.getWebGLContext = function(canvas/*HTML5 canvas\u30aa\u30d6\u30b8\u30a7\u30af\u30c8*/)\n{\n    var NAMES = [ \"webgl\" , \"experimental-webgl\" , \"webkit-3d\" , \"moz-webgl\"];\n    var param = { alpha : true };\n\n    for( var i = 0; i < NAMES.length; i++ ){\n        try{\n            var ctx = canvas.getContext( NAMES[i], param );\n            if( ctx ) return ctx;\n        }\n        catch(e){}\n    }\n    return null;\n};\n\n\n/**\n* Image\u578b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u751f\u6210\n*/\nSimple.prototype.createTexture = function(gl/*WebGL\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8*/, image/*WebGL Image*/)\n{\n    var texture = gl.createTexture(); //\u30c6\u30af\u30b9\u30c1\u30e3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n    if ( !texture ){\n        console.log(\"Failed to generate gl texture name.\");\n        return -1;\n    }\n    // image\u3092\u4e0a\u4e0b\u53cd\u8ee2\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30e6\u30cb\u30c3\u30c8\u3092\u6307\u5b9a\u3059\u308b\n    gl.activeTexture( gl.TEXTURE0 );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u3092\u30d0\u30a4\u30f3\u30c9\u3059\u308b\n    gl.bindTexture( gl.TEXTURE_2D , texture );\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306b\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u7d10\u4ed8\u3051\u308b\n    gl.texImage2D( gl.TEXTURE_2D , 0 , gl.RGBA , gl.RGBA , gl.UNSIGNED_BYTE , image);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b(\u5bfe\u8c61\u30d4\u30af\u30bb\u30eb\u306e\u4e2d\u5fc3\u306b\u6700\u3082\u8fd1\u3044\u70b9\u306e\u5024)\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u54c1\u8cea\u3092\u6307\u5b9a\u3059\u308b\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_NEAREST);\n    // \u30df\u30c3\u30d7\u30de\u30c3\u30d7\u306e\u751f\u6210\n    gl.generateMipmap(gl.TEXTURE_2D);\n    // \u30c6\u30af\u30b9\u30c1\u30e3\u306e\u30d0\u30a4\u30f3\u30c9\u958b\u653e\n    gl.bindTexture( gl.TEXTURE_2D , null );\n\n    return texture;\n};\n\n/**\n* \u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30a4\u30c8\u914d\u5217\u3068\u3057\u3066\u30ed\u30fc\u30c9\u3059\u308b\n*/\nSimple.prototype.loadBytes = function(path , callback)\n{\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path , true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function(){\n        switch( request.status ){\n        case 200:\n            callback( request.response );\n            break;\n        default:\n            console.log( \"Failed to load (\" + request.status + \") : \" + path );\n            break;\n        }\n    }\n    request.send(null);\n};\n\n\n/****************************************\n* \u30b5\u30a6\u30f3\u30c9\u30af\u30e9\u30b9\n****************************************/\nvar Sound = function(path   /*\u97f3\u58f0\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9*/) {\n    this.snd = document.createElement(\"audio\");\n    this.snd.src = path;\n};\n\n/**\n* \u97f3\u58f0\u518d\u751f\n*/\nSound.prototype.play = function() {\n    this.snd.play();\n};\n\n/**\n* \u97f3\u58f0\u505c\u6b62\n*/\nSound.prototype.stop = function() {\n    this.snd.pause();\n    this.snd.currentTime = 0;\n};\n\n\n/****************************************\n* \u30dc\u30bf\u30f3\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\n****************************************/\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u53d6\u5f97\nvar mtnfilenames = [];\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u4f5c\u308b\u5834\u6240\nvar selectmenu = document.getElementById('selectmenu');\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5206\u306e\u9078\u629e\u30dc\u30bf\u30f3\u3092\u4f5c\u308b\nfunction make_optionbtn(){\n    // \u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\u3059\u308b\n    if(glCanvas != null && mtnfilenames.length == 0){\n        for(var key in glCanvas.modelDef.motions){\n            for(j = 0; j < glCanvas.modelDef.motions[key].length; j++){\n                // \u4f59\u5206\u306a\u30d1\u30b9\u3092\u30ab\u30c3\u30c8\n                var strfilenm = glCanvas.modelDef.motions[key][j].file.split(\"/\");\n                // \u8aad\u307f\u8fbc\u3080\u30e2\u30fc\u30b7\u30e7\u30f3\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u53d6\u5f97\n                mtnfilenames.push(strfilenm[1]);\n                // \u30aa\u30d7\u30b7\u30e7\u30f3\u30dc\u30bf\u30f3\u3092\u8ffd\u52a0\n                var option = document.createElement('option');\n                option.value = strfilenm[1];\n                option.appendChild(document.createTextNode(strfilenm[1]));\n                selectmenu.appendChild(option);\n            }\n        }\n    }\n}\n\n\n// \u30e2\u30fc\u30b7\u30e7\u30f3\u5207\u308a\u66ff\u3048\nfunction motionChange(){\n    // \u9078\u629e\u30dc\u30bf\u30f3\u306e\u5024\u3092\u53d6\u5f97\n    var mtnfilenm = selectmenu.value;\n\n    var cnt = 0;\n    // \u30d5\u30a1\u30a4\u30eb\u540d\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u756a\u53f7\u3092\u53d6\u308a\u51fa\u3059\n    for(var k = 0; k < mtnfilenames.length; k++){\n        if(mtnfilenm == mtnfilenames[k]){\n            break;\n        }\n        cnt++;\n    }\n    console.warn(mtnfilenm + \"\u9078\u629e\uff01\");\n    // Live2D\u30e2\u30c7\u30eb\u306b\u6e21\u3059\n    glCanvas.motionnm = cnt;\n    glCanvas.motionflg = true;\n}\n```\n\n##\u30c6\u30a3\u30e9\u30ce\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306e\u5909\u66f4\u70b9\n\u30c6\u30a3\u30e9\u30ce\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001\u30e2\u30c7\u30eb\u30d5\u30a1\u30a4\u30eb\u30d1\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308a\u3001\u305d\u3053\u306bmodel.json\u306e\u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u30b0\u30eb\u30fc\u30d7\u5909\u6570\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\n\n```js:data/others/live2d/Live2Dmodel.js\n// \u30d7\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u30e2\u30fc\u30b7\u30e7\u30f3\u30b0\u30eb\u30fc\u30d7\nvar PRELOAD_GROUP = \"idle\";\n\n// Live2D\u30e2\u30c7\u30eb\u306e\u914d\u5217\nvar LIVE2D_MODEL = [];\n\n// Live2D\u30e2\u30c7\u30eb\uff08haru\uff09\nLIVE2D_MODEL['haru'] = {\n    \"filepath\":\"data/others/live2d/assets/haru/\",\n    \"modeljson\":\"haru.model.json\"\n};\n\n// Live2D\u30e2\u30c7\u30eb\uff08Epsilon\uff09\nLIVE2D_MODEL['Epsilon'] = {\n    \"filepath\":\"data/others/live2d/assets/Epsilon/\",\n    \"modeljson\":\"Epsilon_free.model.json\"\n};\n```\n\n\u3053\u306e\u5c3a\u304c\u9577\u3044\u30e2\u30fc\u30b7\u30e7\u30f3\u306fmodel.json\u306e\u4e2d\u3067idle\u30b0\u30eb\u30fc\u30d7\u306b\u542b\u3081\u3066\u3082\u3089\u3048\u308c\u3070\u5927\u4e08\u592b\u3067\u3059\uff01\n![05.png](https://qiita-image-store.s3.amazonaws.com/0/15028/83820a4d-21cb-abca-f45d-4aa89d64b8a7.png)\n\n\u3053\u306e\u554f\u984c\u306f\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u30ed\u30fc\u30c9\u3059\u308bWebGL\u7248\u306eSDK\u3060\u3051\u306e\u554f\u984c\u3067\u3059\u304c\u3001\u4f55\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n", "tags": ["Live2D", "JavaScript", "WebGL"]}