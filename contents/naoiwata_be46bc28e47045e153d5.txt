{"tags": ["reactjs", "gulp", "browserify", "JavaScript"], "context": " More than 1 year has passed since last update.\n\nReact.JS \u958b\u767a\u74b0\u5883\u3092 Gulp \u3068 Browserify \u3067\u4f5c\u308b\n\n\u3084\u308a\u305f\u3044\u3053\u3068\nJSX \u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u3092\u76e3\u8996\u3057\u3066\u4efb\u610f\u306e JS \u30d5\u30a1\u30a4\u30eb\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u3044\u3002\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\nJSX \u30d5\u30a1\u30a4\u30eb\u3084 JS \u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308b ./src/app.js \u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001./dist/js \u306b\u51fa\u529b\u3059\u308b\u30bf\u30b9\u30af\u306e\u899a\u3048\u66f8\u304d\u3002\n\ngulpfile.js\n'use strict';\n\nvar fs = require('fs');\nvar _ = require('underscore');\nvar gulp = require('gulp');\nvar gulpif = require('gulp-if');\nvar gutil = require('gulp-util');\nvar plumber = require('gulp-plumber');\nvar reactify = require('reactify');\nvar browserify = require('browserify');\nvar streamify = require('gulp-streamify');\nvar uglify = require('gulp-uglify');\nvar source = require('vinyl-source-stream');\nvar connect = require('gulp-connect');\nvar runSequence = require('run-sequence');\nvar packageJson = require('./package.json');\n\nvar SRC_DIR = packageJson.dir.src;\nvar DIST_DIR = packageJson.dir.dist;\n\n/**\n * browserify\n */\ngulp.task('browserify', function() {\n  var jsFiles = packageJson.js;\n  _.each(jsFiles, function(name) {\n    return browserify({\n      entries: [SRC_DIR + '/' + name + '.js'],\n      transform: [reactify],\n      paths: packageJson.browserify.paths,\n      debug: packageJson.browserify.debug\n    })\n      .bundle()\n      .on('error', errorHandler)\n      .pipe(source(name + '.js'))\n      .pipe(gulpif(isProduction,\n                   streamify(uglify({ mangle: false }))))\n      .pipe(gulp.dest(DIST_DIR + '/js'));\n  });\n});\n\n/**\n * error handler\n */\nvar errorHandler = function(error) {\n  gutil.log(gutil.colors.red(error));\n};\n\n/**\n * clean\n */\ngulp.task('clean', function() {\n  rimraf(DIST_DIR);\n});\n\n/**\n * connect\n */\ngulp.task('connect', function() {\n  connect.server({\n    root: DIST_DIR,\n    livereload: true,\n    port: 8080\n  });\n});\n\n/**\n * watch\n */\ngulp.task('watch', function() {\n  gulp.watch(SRC_DIR + '/**/*.js', ['browserify']);\n  gulp.watch(SRC_DIR + '/**/*.jsx', ['browserify']);\n});\n\n/**\n * tasks\n */\ngulp.task('default', function() {});\n\ngulp.task('build', function(callback) {\n  runSequence(\n    'clean',\n    'browserify',\n    callback\n  );\n});\n\ngulp.task('develop', function(callback) {\n  runSequence(\n    'build',\n    'connect',\n    'watch',\n    callback\n  );\n});\n\n\n\npackage.json\n{\n  \"name\": \"reactjs wasshoi\",\n  \"scripts\": {\n    \"test\": \"jshint ./gulpfile.js && jshint ./src && jsxhint ./src/components\",\n    \"develop\": \"gulp develop\",\n    \"build\": \"gulp build\"\n  },\n  \"js\": [\n    \"app\"\n  ],\n  \"browserify\": {\n    \"paths\": [\n      \"./bower_components\",\n      \"./src\"\n    ],\n    \"debug\": false\n  },\n  \"dir\": {\n    \"src\": \"./src\",\n    \"dist\": \"./dist\"\n  },\n  \"devDependencies\": {\n    \"browserify\": \"^9.0.3\",\n    \"gulp\": \"^3.8.11\",\n    \"gulp-connect\": \"^2.2.0\",\n    \"gulp-if\": \"^1.2.5\",\n    \"gulp-plumber\": \"^0.6.6\",\n    \"gulp-streamify\": \"0.0.5\",\n    \"gulp-uglify\": \"^1.1.0\",\n    \"gulp-util\": \"^3.0.4\",\n    \"jshint\": \"^2.6.0\",\n    \"jsxhint\": \"^0.14.0\",\n    \"reactify\": \"^1.1.0\",\n    \"rimraf\": \"^2.2.8\",\n    \"run-sequence\": \"^1.0.2\",\n    \"underscore\": \"^1.8.2\",\n    \"vinyl-source-stream\": \"^1.0.0\"\n  }\n}\n\n\n\n\u30b3\u30fc\u30c9\u4f8b\n\u3061\u306a\u307f\u306b ./src/app.js \u306f\u3053\u3093\u306a\u611f\u3058\u3002 \n\n/src/app.js\n'use strict';\n\nrequire('./components/app.jsx');\n\n\n./src/components \u4ee5\u4e0b\u306b\u306f JSX \u3092\u30b4\u30ea\u30b4\u30ea\u66f8\u3044\u3066\u3044\u304f\u3002\n\n/src/components/app.jsx\n/* @jsx React.DOM */\n\n'use strict';\n\nvar React = require('react');\nvar Router = require('react-router');\nvar Route = Router.Route;\nvar NotFoundRoute = Router.NotFoundRoute;\nvar DefaultRoute = Router.DefaultRoute;\nvar Link = Router.Link;\nvar RouteHandler = Router.RouteHandler;\n\nvar Header = require('./header/Header.jsx');\nvar Dashboard = require('./common/Dashboard.jsx');\n\nvar App = React.createClass({\n    displayName: 'App',\n    render: function () {\n    return (\n      <div className=\"wrap\">\n        <Header/>\n        {/* this is the important part */}\n        <RouteHandler/>\n      </div>\n    );\n  }\n});\n\nvar routes = (\n  <Route name=\"app\" path=\"/\" handler={App}>\n    <Route handler={Dashboard}/>\n  </Route>\n);\n\nRouter.run(routes, function (Handler) {\n  React.render(<Handler/>, document.getElementById('content'));\n});\n\n\n# React.JS \u958b\u767a\u74b0\u5883\u3092 Gulp \u3068 Browserify \u3067\u4f5c\u308b\n\n## \u3084\u308a\u305f\u3044\u3053\u3068\n\nJSX \u30d5\u30a1\u30a4\u30eb\u306e\u4fdd\u5b58\u3092\u76e3\u8996\u3057\u3066\u4efb\u610f\u306e JS \u30d5\u30a1\u30a4\u30eb\u306b\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u305f\u3044\u3002\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\nJSX \u30d5\u30a1\u30a4\u30eb\u3084 JS \u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u308b `./src/app.js` \u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u3001`./dist/js` \u306b\u51fa\u529b\u3059\u308b\u30bf\u30b9\u30af\u306e\u899a\u3048\u66f8\u304d\u3002\n\n```gulpfile.js\n'use strict';\n\nvar fs = require('fs');\nvar _ = require('underscore');\nvar gulp = require('gulp');\nvar gulpif = require('gulp-if');\nvar gutil = require('gulp-util');\nvar plumber = require('gulp-plumber');\nvar reactify = require('reactify');\nvar browserify = require('browserify');\nvar streamify = require('gulp-streamify');\nvar uglify = require('gulp-uglify');\nvar source = require('vinyl-source-stream');\nvar connect = require('gulp-connect');\nvar runSequence = require('run-sequence');\nvar packageJson = require('./package.json');\n\nvar SRC_DIR = packageJson.dir.src;\nvar DIST_DIR = packageJson.dir.dist;\n\n/**\n * browserify\n */\ngulp.task('browserify', function() {\n  var jsFiles = packageJson.js;\n  _.each(jsFiles, function(name) {\n    return browserify({\n      entries: [SRC_DIR + '/' + name + '.js'],\n      transform: [reactify],\n      paths: packageJson.browserify.paths,\n      debug: packageJson.browserify.debug\n    })\n      .bundle()\n      .on('error', errorHandler)\n      .pipe(source(name + '.js'))\n      .pipe(gulpif(isProduction,\n                   streamify(uglify({ mangle: false }))))\n      .pipe(gulp.dest(DIST_DIR + '/js'));\n  });\n});\n\n/**\n * error handler\n */\nvar errorHandler = function(error) {\n  gutil.log(gutil.colors.red(error));\n};\n\n/**\n * clean\n */\ngulp.task('clean', function() {\n  rimraf(DIST_DIR);\n});\n\n/**\n * connect\n */\ngulp.task('connect', function() {\n  connect.server({\n    root: DIST_DIR,\n    livereload: true,\n    port: 8080\n  });\n});\n\n/**\n * watch\n */\ngulp.task('watch', function() {\n  gulp.watch(SRC_DIR + '/**/*.js', ['browserify']);\n  gulp.watch(SRC_DIR + '/**/*.jsx', ['browserify']);\n});\n\n/**\n * tasks\n */\ngulp.task('default', function() {});\n\ngulp.task('build', function(callback) {\n  runSequence(\n    'clean',\n    'browserify',\n    callback\n  );\n});\n\ngulp.task('develop', function(callback) {\n  runSequence(\n    'build',\n    'connect',\n    'watch',\n    callback\n  );\n});\n```\n\n```package.json\n{\n  \"name\": \"reactjs wasshoi\",\n  \"scripts\": {\n    \"test\": \"jshint ./gulpfile.js && jshint ./src && jsxhint ./src/components\",\n    \"develop\": \"gulp develop\",\n    \"build\": \"gulp build\"\n  },\n  \"js\": [\n    \"app\"\n  ],\n  \"browserify\": {\n    \"paths\": [\n      \"./bower_components\",\n      \"./src\"\n    ],\n    \"debug\": false\n  },\n  \"dir\": {\n    \"src\": \"./src\",\n    \"dist\": \"./dist\"\n  },\n  \"devDependencies\": {\n    \"browserify\": \"^9.0.3\",\n    \"gulp\": \"^3.8.11\",\n    \"gulp-connect\": \"^2.2.0\",\n    \"gulp-if\": \"^1.2.5\",\n    \"gulp-plumber\": \"^0.6.6\",\n    \"gulp-streamify\": \"0.0.5\",\n    \"gulp-uglify\": \"^1.1.0\",\n    \"gulp-util\": \"^3.0.4\",\n    \"jshint\": \"^2.6.0\",\n    \"jsxhint\": \"^0.14.0\",\n    \"reactify\": \"^1.1.0\",\n    \"rimraf\": \"^2.2.8\",\n    \"run-sequence\": \"^1.0.2\",\n    \"underscore\": \"^1.8.2\",\n    \"vinyl-source-stream\": \"^1.0.0\"\n  }\n}\n```\n\n## \u30b3\u30fc\u30c9\u4f8b\n\n\u3061\u306a\u307f\u306b `./src/app.js` \u306f\u3053\u3093\u306a\u611f\u3058\u3002 \n\n```./src/app.js\n'use strict';\n\nrequire('./components/app.jsx');\n```\n\n`./src/components` \u4ee5\u4e0b\u306b\u306f JSX \u3092\u30b4\u30ea\u30b4\u30ea\u66f8\u3044\u3066\u3044\u304f\u3002\n\n```./src/components/app.jsx\n/* @jsx React.DOM */\n\n'use strict';\n\nvar React = require('react');\nvar Router = require('react-router');\nvar Route = Router.Route;\nvar NotFoundRoute = Router.NotFoundRoute;\nvar DefaultRoute = Router.DefaultRoute;\nvar Link = Router.Link;\nvar RouteHandler = Router.RouteHandler;\n\nvar Header = require('./header/Header.jsx');\nvar Dashboard = require('./common/Dashboard.jsx');\n\nvar App = React.createClass({\n    displayName: 'App',\n    render: function () {\n    return (\n      <div className=\"wrap\">\n        <Header/>\n        {/* this is the important part */}\n        <RouteHandler/>\n      </div>\n    );\n  }\n});\n\nvar routes = (\n  <Route name=\"app\" path=\"/\" handler={App}>\n    <Route handler={Dashboard}/>\n  </Route>\n);\n\nRouter.run(routes, function (Handler) {\n  React.render(<Handler/>, document.getElementById('content'));\n});\n```\n\n\n"}