{"tags": ["WebGL"], "context": " More than 1 year has passed since last update.Curl Noise\u66f8\u3044\u3066\u307f\u305f\nWebGL Advent Calender 22\u65e5\u76ee\u9045\u523b\u3057\u307e\u3057\u305f\u3002\n\u3084\u307e\u3060\u3067\u3059\u3002\nWebGL\u7dcf\u672c\u5c71\u3063\u3066\u7686\u3055\u3093\u3054\u5b58\u77e5\u3067\u3059\u3088\u306d\uff1f\nWebGL\u3092\u4f7f\u3063\u305f\u30af\u30fc\u30eb\u306a\u30da\u30fc\u30b8\u3092\u7d39\u4ecb\u3059\u308b\u30b5\u30a4\u30c8\u3067\u79c1\u3082\u697d\u3057\u307e\u305b\u3066\u3044\u305f\u3060\u3044\u3066\u307e\u3059\u3002\n\u305d\u306e\u306a\u304b\u3067\u3082\u3061\u3087\u3063\u3068\u6c17\u306b\u306a\u3063\u305f\u306e\u304c\u3053\u306e\u8a18\u4e8b\u3067\u3082\u89e6\u308c\u3089\u308c\u3066\u3044\u308bCurl Noise\u3068\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u3059\u3002\n\u3069\u3046\u3084\u3089\u3053\u308c\u3092\u4f7f\u3046\u3068\u30af\u30fc\u30eb\u306a\u6d41\u4f53\u304c\u304b\u3051\u308b\u3068\u805e\u3044\u3066\u81ea\u5206\u3067\u3082\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nDemo\u306f\u3053\u3061\u3089\nInternet Explorer\u3067\u3082\u3082\u3061\u308d\u3093\u52d5\u304d\u307e\u3059\u3088\u3002\n\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u8272\u3084\u30ce\u30a4\u30ba\u306e\u5468\u6ce2\u6570\u3092UI\u3067\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u5909\u66f4\u3059\u308b\u3060\u3051\u3067\u307e\u3063\u305f\u304f\u9055\u3046\u8868\u60c5\u3092\u898b\u305b\u308b\u306e\u306f\u898b\u3066\u3044\u3066\u9762\u767d\u3044\u3067\u3059\u306d\u3002\n\nCurl Noise\u3068\u306f\n\u5f97\u3089\u308c\u308b\u7d50\u679c\u306e\u3068\u304a\u308a\u6d41\u4f53\u3063\u307d\u3044\u632f\u308b\u821e\u3044\u3092\u3059\u308b\u30d9\u30af\u30c8\u30eb\u304c\u8a08\u7b97\u3067\u304d\u308b\u30ce\u30a4\u30ba\u95a2\u6570\u3067\u3059\u3002\n\u30d9\u30af\u30c8\u30eb\u89e3\u6790\u3067\u3044\u3046\u56de\u8ee2\u3092\u30d1\u30fc\u30ea\u30f3\u30ce\u30a4\u30ba\u3084\u30b7\u30f3\u30d7\u30ec\u30af\u30b9\u30ce\u30a4\u30ba\u306b\u5bfe\u3057\u3066\u8a08\u7b97\u3057\u3001\u901f\u5ea6\u30d9\u30af\u30c8\u30eb\u3092\u6c42\u3081\u307e\u3059\u3002\n\u30d9\u30af\u30c8\u30eb\u89e3\u6790\u306e\u56de\u8ee2\u306b\u3064\u3044\u3066\u306f\u7269\u7406\u306e\u304b\u304e\u3057\u3063\u307d\u3055\u3093\u306e\u89e3\u8aac\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u306b\u3088\u308b\u3068\u56de\u8ee2\u306f\u30d9\u30af\u30c8\u30eb\u5834AAA\u306b\u5bfe\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u304b\u3051\u308b\u305d\u3046\u3067\u3059\u3002\n\\mathrm{rot}A\n = \\nabla \\times A\n = \\left( \\begin{array}{ccc}\\frac{\\partial}{\\partial x}\\\\ \\frac{\\partial}{\\partial y}\\\\ \\frac{\\partial}{\\partial z}\\end{array}\\right) \\times \\left( \\begin{array}{ccc}A_{x}\\\\A_{y}\\\\A_{z}\\end{array}\\right)\n = \\left( \\begin{array}{ccc}\\frac{\\partial A_z}{\\partial y}-\\frac{\\partial A_y}{\\partial z}\\\\ \\frac{\\partial A_x}{\\partial z}-\\frac{\\partial A_z}{\\partial x}\\\\ \\frac{\\partial A_y}{\\partial x}-\\frac{\\partial A_x}{\\partial y}\\end{array}\\right)\nrotA=\u2207\u00d7A=(\u2202\u2202x\u2202\u2202y\u2202\u2202z)\u00d7(AxAyAz)=(\u2202Az\u2202y\u2212\u2202Ay\u2202z\u2202Ax\u2202z\u2212\u2202Az\u2202x\u2202Ay\u2202x\u2212\u2202Ax\u2202y)rotA=\u2207\u00d7A=\u239b\u239d\u239c\u239c\u239c\u2202\u2202x\u2202\u2202y\u2202\u2202z\u239e\u23a0\u239f\u239f\u239f\u00d7\u239b\u239d\u239cAxAyAz\u239e\u23a0\u239f=\u239b\u239d\u239c\u239c\u239c\u239c\u2202Az\u2202y\u2212\u2202Ay\u2202z\u2202Ax\u2202z\u2212\u2202Az\u2202x\u2202Ay\u2202x\u2212\u2202Ax\u2202y\u239e\u23a0\u239f\u239f\u239f\u239f{\\mathrm{rot}A\n = \\nabla \\times A\n = \\left( \\begin{array}{ccc}\\frac{\\partial}{\\partial x}\\\\ \\frac{\\partial}{\\partial y}\\\\ \\frac{\\partial}{\\partial z}\\end{array}\\right) \\times \\left( \\begin{array}{ccc}A_{x}\\\\A_{y}\\\\A_{z}\\end{array}\\right)\n = \\left( \\begin{array}{ccc}\\frac{\\partial A_z}{\\partial y}-\\frac{\\partial A_y}{\\partial z}\\\\ \\frac{\\partial A_x}{\\partial z}-\\frac{\\partial A_z}{\\partial x}\\\\ \\frac{\\partial A_y}{\\partial x}-\\frac{\\partial A_x}{\\partial y}\\end{array}\\right)\n}\n\u898b\u305f\u3053\u3068\u306e\u3042\u308b\u8a18\u53f7\u3068\u898b\u305f\u3053\u3068\u3042\u308b\u3051\u3069\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u8a18\u53f7\u304c\u3042\u308a\u307e\u3059\u306d\uff08\u500b\u4eba\u306e\u611f\u60f3\u3067\u3059\uff09\u3002\n\n\u30d9\u30af\u30c8\u30eb\u5834\n\u307e\u305a\u30d9\u30af\u30c8\u30eb\u5834\u3068\u3044\u3046\u306e\u306f\u7a7a\u9593\u306b\u30d9\u30af\u30c8\u30eb\u304c\u3070\u30fc\u3063\u3066\u3061\u3089\u3070\u3063\u3066\u308b\u7a7a\u9593\u306e\u3053\u3068\u3067\u3059\uff08\u96d1\u3044\uff09\u3002\nGLSL\u3067\u66f8\u304f\u3068vec3\u3092\u5165\u529b\u3068\u3057\u3066vec3\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\u3092\u30d9\u30af\u30c8\u30eb\u5834\u3068\u3067\u304d\u307e\u3059\u3002\n\u3082\u3057\u3082\u4e09\u6b21\u5143\u30c6\u30af\u30b9\u30c1\u30e3\u304c\u4f7f\u3048\u308b\u306e\u3067\u3042\u308c\u3070\u30d9\u30af\u30c8\u30eb\u5834\u306f\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\u3067\u3057\u3087\u3046\u3002\nvec3 getVector(vec3 p) {\n  return texture3D(tex, p).xyz;\n}\n\nCurl Noise\u3067\u306f\u30d9\u30af\u30c8\u30eb\u5834\u3068\u3057\u3066\u30d1\u30fc\u30ea\u30f3\u30ce\u30a4\u30ba\u3084\u30b7\u30f3\u30d7\u30ec\u30af\u30b9\u30ce\u30a4\u30ba\u306a\u3069\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002\n\n\u4eca\u56de\u306fwebgl-noise\u304b\u3089\u30b7\u30f3\u30d7\u30ec\u30af\u30b9\u30ce\u30a4\u30ba\u3092\u304a\u304b\u308a\u3057\u307e\u3057\u305f\u3002\n2D\u306e\u30ce\u30a4\u30ba\u3060\u3068\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\u3067\u3059\u304c\u56f0\u3063\u305f\u3053\u3068\u306b\u3001\u3053\u306esnoise\u95a2\u6570\u3067\u3059\u304cvec3\u306e\u3088\u3046\u306a\u30d9\u30af\u30c8\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067float\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n\u6b32\u3057\u3044\u306e\u306f\u30d9\u30af\u30c8\u30eb\u5834\u306a\u306e\u3067\u3053\u3053\u3067\u5c11\u3057\u7d30\u5de5\u3092\u3057\u307e\u3059\u3002\nconst SNOISE_VEC3 = `\nvec3 snoiseVec3( vec3 x ){\n  float s   = snoise(vec3( x ));\n  float s1  = snoise(\n                vec3(\n                  x.y + ${Math.random().toFixed(10)},\n                  x.z + ${Math.random().toFixed(10)},\n                  x.x + ${Math.random().toFixed(10)}\n                )\n              );\n  float s2  = snoise(\n                vec3(\n                  x.z + ${Math.random().toFixed(10)},\n                  x.x + ${Math.random().toFixed(10)},\n                  x.y + ${Math.random().toFixed(10)}\n                )\n              );\n  return vec3( s , s1 , s2 );\n}\n`;\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u8ef8\u3092\u5165\u308c\u66ff\u3048\u3066\u304b\u3089JavaScript\u3067\u4e71\u6570\u3092\u306e\u305b\u3066\u7121\u7406\u3084\u308a\u30d9\u30af\u30c8\u30eb\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u9014\u4e2dMath.random()\u3068JavaScript\u306e\u6570\u5b66\u95a2\u6570\u304c\u767b\u5834\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306fECMAScript2015\u306e\u30d2\u30a2\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u547c\u3070\u308c\u308b\u8a18\u6cd5\u3067\u3059\u3002\n\u4fbf\u5229\u306a\u306e\u3067WebGL\u304b\u304f\u3068\u304d\u306b\u304a\u3059\u3059\u3081\u306a\u306e\u3067\u3059\u3088\u30fc\u3002\n\n\u2207\u306e\u6b63\u4f53\u306f\n\u540c\u3058\u3053\u3068\u306e\u7e70\u308a\u8fd4\u3057\u306b\u306a\u308a\u307e\u3059\u304c\u56de\u8ee2\u306f\u2207\u2207\\nabla\u3068\u30d9\u30af\u30c8\u30eb\u5834\u3068\u306e\u30af\u30ed\u30b9\u7a4d\u3067\u6c42\u307e\u308a\u307e\u3059\u3002\n\u2207\u2207\\nabla\u306e\u6b63\u4f53\u306f(\u2202\u2202x\u00a0\u2202\u2202y\u00a0\u2202\u2202z)\\left( \\begin{array}{ccc}\\frac{\\partial}{\\partial x} \\ \\frac{\\partial}{\\partial y}\\ \\frac{\\partial}{\\partial z}\\end{array}\\right)\u306e\u3088\u3046\u306b\u504f\u5fae\u5206\u306e\u30d9\u30af\u30c8\u30eb\u3067\u3059\u3002\n\u30af\u30ed\u30b9\u7a4d\u306f\u5358\u4f4d\u6cd5\u7dda\u306e\u8a08\u7b97\u3067\u3088\u304f\u3064\u304b\u3046\u306e\u3067\u308f\u304b\u308b\u306e\u3067\u3059\u304c\u504f\u5fae\u5206\u306b\u3064\u3044\u3066\u306f\u3088\u304f\u308f\u304b\u3093\u306a\u304b\u3063\u305f\u306e\u3067\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\uff08\u5927\u5b66\u3067\u52c9\u5f37\u3057\u305f\u6c17\u304c\u3059\u308b\u306e\u306b\uff09\u3002\n\u96d1\u306b\u8aac\u660e\u3059\u308b\u3068\u2202Ay\u2202x\\frac{\\partial A_y}{\\partial x}\u306fAA\u3092\u3061\u3087\u3063\u3074\u308axx\u65b9\u5411\u306b\u52d5\u304b\u3057\u305f\u6642\u306bAyA_y\u306f\u3069\u308c\u3060\u3051\u5897\u52a0\u3059\u308b\u304b\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u3067\u3059\u3002\n\u3042\u3068\u306f\u8a00\u8449\u901a\u308a\u306b\u3061\u3087\u3063\u3074\u308a\u79fb\u52d5\u3055\u305b\u3066\u305d\u306e\u5024\u3067\u901f\u5ea6\u30d9\u30af\u30c8\u30eb\u3092\u4f5c\u308b\u3060\u3051\u3001\u7c21\u5358\u3067\u3059\u306d\u3002\nvec3 curlNoise( vec3 p ){\n  const float e = 0.0009765625;\n  const float e2 = 2.0 * e;\n\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3( p - dx );\n  vec3 p_x1 = snoiseVec3( p + dx );\n  vec3 p_y0 = snoiseVec3( p - dy );\n  vec3 p_y1 = snoiseVec3( p + dy );\n  vec3 p_z0 = snoiseVec3( p - dz );\n  vec3 p_z1 = snoiseVec3( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  return normalize( vec3( x , y , z ) / e2 );\n}\n\n\n\u3055\u3041WebGL\u3067\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3060\uff01\n\u3055\u3066\u3001\u3070\u3070\u30fc\u3063\u3068\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u6563\u3089\u3070\u3089\u305b\u306a\u3044\u3068\u9762\u767d\u304f\u7121\u3044\u3067\u3059\u3088\u306d\uff1f\n\u306a\u306e\u3067VTF\u3084\u6d6e\u52d5\u5c0f\u6570\u70b9\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u4f7f\u3063\u3066\u9ad8\u901f\u306b\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3066\u3044\u307e\u3059\u3002\n\u9802\u70b9\u3092attribute\u3067\u306f\u306a\u304f\u3001\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u3092\u4f7f\u3063\u3066\u30c6\u30af\u30b9\u30c1\u30e3\u306b\u66f8\u304d\u8fbc\u3080\u3053\u3068\u306b\u3088\u308a\u3001\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u6bce\u30d5\u30ec\u30fc\u30e0\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3082\u8a71\u305b\u3070\u9577\u304f\u306a\u308b\u306e\u3067\u8aac\u660e\u3092wgld\u306eGPGPU\u306e\u8aac\u660e\u306b\u4e38\u6295\u3052\u3057\u3061\u3083\u3044\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\n\u304a\u3049\u306a\u3093\u304b\u4ffa\u6570\u5b66\u3063\u307d\u3044\u3053\u3068\u3084\u3063\u3066\u308b\uff01\u3068\u304b\u60a6\u306b\u6d78\u308a\u306a\u304c\u3089\u66f8\u3044\u3066\u304a\u308a\u307e\u3057\u305f\u3002\n\u5b66\u751f\u6642\u4ee3\u771f\u9762\u76ee\u306b\u6570\u5b66\u3068\u304b\u3084\u3063\u3066\u306a\u304b\u3063\u305f\u3051\u3069\u3084\u3063\u3071\u308a\u52c9\u5f37\u3057\u3066\u304a\u3051\u3070\u3088\u304b\u3063\u305f\u306a\u3041\u3068\u5f8c\u6094\u3057\u3066\u304a\u308a\u307e\u3059\u3002\nCurl Noise\u306f\u898b\u305f\u76ee\u304c\u30af\u30fc\u30eb\u3060\u3051\u3069\u5b9f\u88c5\u306f\u305d\u3053\u307e\u3067\u8907\u96d1\u3067\u306f\u306a\u3044\u306e\u3067\u4e00\u56de\u6311\u6226\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u53c2\u8003\n\u7269\u7406\u306e\u304b\u304e\u3057\u3063\u307d\nWebGL\u7dcf\u672c\u5c71\nwebgl-noise\nglsl-curl-noise\nCurl Noise\u66f8\u3044\u3066\u307f\u305f\n\nWebGL Advent Calender 22\u65e5\u76ee\u9045\u523b\u3057\u307e\u3057\u305f\u3002\n\u3084\u307e\u3060\u3067\u3059\u3002\n\n[WebGL\u7dcf\u672c\u5c71](http://webgl.souhonzan.org/)\u3063\u3066\u7686\u3055\u3093\u3054\u5b58\u77e5\u3067\u3059\u3088\u306d\uff1f\nWebGL\u3092\u4f7f\u3063\u305f\u30af\u30fc\u30eb\u306a\u30da\u30fc\u30b8\u3092\u7d39\u4ecb\u3059\u308b\u30b5\u30a4\u30c8\u3067\u79c1\u3082\u697d\u3057\u307e\u305b\u3066\u3044\u305f\u3060\u3044\u3066\u307e\u3059\u3002\n\n\u305d\u306e\u306a\u304b\u3067\u3082\u3061\u3087\u3063\u3068\u6c17\u306b\u306a\u3063\u305f\u306e\u304c[\u3053\u306e\u8a18\u4e8b](http://webgl.souhonzan.org/entry/?v=0247)\u3067\u3082\u89e6\u308c\u3089\u308c\u3066\u3044\u308bCurl Noise\u3068\u3044\u3046\u30ad\u30fc\u30ef\u30fc\u30c9\u3067\u3059\u3002\n\u3069\u3046\u3084\u3089\u3053\u308c\u3092\u4f7f\u3046\u3068\u30af\u30fc\u30eb\u306a\u6d41\u4f53\u304c\u304b\u3051\u308b\u3068\u805e\u3044\u3066\u81ea\u5206\u3067\u3082\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/5907/bd86c95b-1e0b-ed7a-03a2-e304f98d1438.png)\n\n[Demo\u306f\u3053\u3061\u3089](https://dl.dropboxusercontent.com/u/27815754/curl3d/index.html)\nInternet Explorer\u3067\u3082\u3082\u3061\u308d\u3093\u52d5\u304d\u307e\u3059\u3088\u3002\n\n\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u306e\u8272\u3084\u30ce\u30a4\u30ba\u306e\u5468\u6ce2\u6570\u3092UI\u3067\u5909\u66f4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3092\u5909\u66f4\u3059\u308b\u3060\u3051\u3067\u307e\u3063\u305f\u304f\u9055\u3046\u8868\u60c5\u3092\u898b\u305b\u308b\u306e\u306f\u898b\u3066\u3044\u3066\u9762\u767d\u3044\u3067\u3059\u306d\u3002\n\n# Curl Noise\u3068\u306f\n\n\u5f97\u3089\u308c\u308b\u7d50\u679c\u306e\u3068\u304a\u308a\u6d41\u4f53\u3063\u307d\u3044\u632f\u308b\u821e\u3044\u3092\u3059\u308b\u30d9\u30af\u30c8\u30eb\u304c\u8a08\u7b97\u3067\u304d\u308b\u30ce\u30a4\u30ba\u95a2\u6570\u3067\u3059\u3002\n\n\u30d9\u30af\u30c8\u30eb\u89e3\u6790\u3067\u3044\u3046\u56de\u8ee2\u3092\u30d1\u30fc\u30ea\u30f3\u30ce\u30a4\u30ba\u3084\u30b7\u30f3\u30d7\u30ec\u30af\u30b9\u30ce\u30a4\u30ba\u306b\u5bfe\u3057\u3066\u8a08\u7b97\u3057\u3001\u901f\u5ea6\u30d9\u30af\u30c8\u30eb\u3092\u6c42\u3081\u307e\u3059\u3002\n\u30d9\u30af\u30c8\u30eb\u89e3\u6790\u306e\u56de\u8ee2\u306b\u3064\u3044\u3066\u306f[\u7269\u7406\u306e\u304b\u304e\u3057\u3063\u307d](http://hooktail.sub.jp/index.html)\u3055\u3093\u306e[\u89e3\u8aac](http://hooktail.sub.jp/vectoranalysis/VectorRotation/)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u306b\u3088\u308b\u3068\u56de\u8ee2\u306f\u30d9\u30af\u30c8\u30eb\u5834$A$\u306b\u5bfe\u3057\u3066\u6b21\u306e\u3088\u3046\u306b\u304b\u3051\u308b\u305d\u3046\u3067\u3059\u3002\n\n```math\n\\mathrm{rot}A\n = \\nabla \\times A\n = \\left( \\begin{array}{ccc}\\frac{\\partial}{\\partial x}\\\\ \\frac{\\partial}{\\partial y}\\\\ \\frac{\\partial}{\\partial z}\\end{array}\\right) \\times \\left( \\begin{array}{ccc}A_{x}\\\\A_{y}\\\\A_{z}\\end{array}\\right)\n = \\left( \\begin{array}{ccc}\\frac{\\partial A_z}{\\partial y}-\\frac{\\partial A_y}{\\partial z}\\\\ \\frac{\\partial A_x}{\\partial z}-\\frac{\\partial A_z}{\\partial x}\\\\ \\frac{\\partial A_y}{\\partial x}-\\frac{\\partial A_x}{\\partial y}\\end{array}\\right)\n```\n\n\u898b\u305f\u3053\u3068\u306e\u3042\u308b\u8a18\u53f7\u3068\u898b\u305f\u3053\u3068\u3042\u308b\u3051\u3069\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u8a18\u53f7\u304c\u3042\u308a\u307e\u3059\u306d\uff08\u500b\u4eba\u306e\u611f\u60f3\u3067\u3059\uff09\u3002\n\n## \u30d9\u30af\u30c8\u30eb\u5834\n\n\u307e\u305a\u30d9\u30af\u30c8\u30eb\u5834\u3068\u3044\u3046\u306e\u306f\u7a7a\u9593\u306b\u30d9\u30af\u30c8\u30eb\u304c\u3070\u30fc\u3063\u3066\u3061\u3089\u3070\u3063\u3066\u308b\u7a7a\u9593\u306e\u3053\u3068\u3067\u3059~~\uff08\u96d1\u3044\uff09~~\u3002\nGLSL\u3067\u66f8\u304f\u3068`vec3`\u3092\u5165\u529b\u3068\u3057\u3066`vec3`\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\u3092\u30d9\u30af\u30c8\u30eb\u5834\u3068\u3067\u304d\u307e\u3059\u3002\n\u3082\u3057\u3082\u4e09\u6b21\u5143\u30c6\u30af\u30b9\u30c1\u30e3\u304c\u4f7f\u3048\u308b\u306e\u3067\u3042\u308c\u3070\u30d9\u30af\u30c8\u30eb\u5834\u306f\u6b21\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\u3067\u3057\u3087\u3046\u3002\n\n```glsl\nvec3 getVector(vec3 p) {\n  return texture3D(tex, p).xyz;\n}\n```\n\nCurl Noise\u3067\u306f\u30d9\u30af\u30c8\u30eb\u5834\u3068\u3057\u3066\u30d1\u30fc\u30ea\u30f3\u30ce\u30a4\u30ba\u3084\u30b7\u30f3\u30d7\u30ec\u30af\u30b9\u30ce\u30a4\u30ba\u306a\u3069\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/5907/6bd0f1aa-a3f2-eb28-57f5-37042caaf9dc.png)\n\u4eca\u56de\u306f[webgl-noise](https://github.com/ashima/webgl-noise)\u304b\u3089\u30b7\u30f3\u30d7\u30ec\u30af\u30b9\u30ce\u30a4\u30ba\u3092\u304a\u304b\u308a\u3057\u307e\u3057\u305f\u3002\n2D\u306e\u30ce\u30a4\u30ba\u3060\u3068\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3067\u3059\u304c\u56f0\u3063\u305f\u3053\u3068\u306b\u3001\u3053\u306e`snoise`\u95a2\u6570\u3067\u3059\u304c`vec3`\u306e\u3088\u3046\u306a\u30d9\u30af\u30c8\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067`float`\u3092\u51fa\u529b\u3059\u308b\u95a2\u6570\u3067\u3059\u3002\n\u6b32\u3057\u3044\u306e\u306f\u30d9\u30af\u30c8\u30eb\u5834\u306a\u306e\u3067\u3053\u3053\u3067\u5c11\u3057\u7d30\u5de5\u3092\u3057\u307e\u3059\u3002\n\n```\nconst SNOISE_VEC3 = `\nvec3 snoiseVec3( vec3 x ){\n  float s   = snoise(vec3( x ));\n  float s1  = snoise(\n                vec3(\n                  x.y + ${Math.random().toFixed(10)},\n                  x.z + ${Math.random().toFixed(10)},\n                  x.x + ${Math.random().toFixed(10)}\n                )\n              );\n  float s2  = snoise(\n                vec3(\n                  x.z + ${Math.random().toFixed(10)},\n                  x.x + ${Math.random().toFixed(10)},\n                  x.y + ${Math.random().toFixed(10)}\n                )\n              );\n  return vec3( s , s1 , s2 );\n}\n`;\n```\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u8ef8\u3092\u5165\u308c\u66ff\u3048\u3066\u304b\u3089JavaScript\u3067\u4e71\u6570\u3092\u306e\u305b\u3066\u7121\u7406\u3084\u308a\u30d9\u30af\u30c8\u30eb\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u9014\u4e2d`Math.random()`\u3068JavaScript\u306e\u6570\u5b66\u95a2\u6570\u304c\u767b\u5834\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u308c\u306fECMAScript2015\u306e\u30d2\u30a2\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u547c\u3070\u308c\u308b\u8a18\u6cd5\u3067\u3059\u3002\n\u4fbf\u5229\u306a\u306e\u3067WebGL\u304b\u304f\u3068\u304d\u306b\u304a\u3059\u3059\u3081\u306a\u306e\u3067\u3059\u3088\u30fc\u3002\n\n## \u2207\u306e\u6b63\u4f53\u306f\n\n\u540c\u3058\u3053\u3068\u306e\u7e70\u308a\u8fd4\u3057\u306b\u306a\u308a\u307e\u3059\u304c\u56de\u8ee2\u306f$\\nabla$\u3068\u30d9\u30af\u30c8\u30eb\u5834\u3068\u306e\u30af\u30ed\u30b9\u7a4d\u3067\u6c42\u307e\u308a\u307e\u3059\u3002\n$\\nabla$\u306e\u6b63\u4f53\u306f$\\left( \\begin{array}{ccc}\\frac{\\partial}{\\partial x} \\\\ \\frac{\\partial}{\\partial y}\\\\ \\frac{\\partial}{\\partial z}\\end{array}\\right)$\u306e\u3088\u3046\u306b\u504f\u5fae\u5206\u306e\u30d9\u30af\u30c8\u30eb\u3067\u3059\u3002\n\u30af\u30ed\u30b9\u7a4d\u306f\u5358\u4f4d\u6cd5\u7dda\u306e\u8a08\u7b97\u3067\u3088\u304f\u3064\u304b\u3046\u306e\u3067\u308f\u304b\u308b\u306e\u3067\u3059\u304c\u504f\u5fae\u5206\u306b\u3064\u3044\u3066\u306f\u3088\u304f\u308f\u304b\u3093\u306a\u304b\u3063\u305f\u306e\u3067\u8abf\u3079\u3066\u307f\u307e\u3057\u305f~~\uff08\u5927\u5b66\u3067\u52c9\u5f37\u3057\u305f\u6c17\u304c\u3059\u308b\u306e\u306b\uff09~~\u3002\n\n\u96d1\u306b\u8aac\u660e\u3059\u308b\u3068$\\frac{\\partial A_y}{\\partial x}$\u306f**$A$\u3092\u3061\u3087\u3063\u3074\u308a$x$\u65b9\u5411\u306b\u52d5\u304b\u3057\u305f\u6642\u306b$A_y$\u306f\u3069\u308c\u3060\u3051\u5897\u52a0\u3059\u308b\u304b**\u3068\u3044\u3046\u3053\u3068\u306e\u3088\u3046\u3067\u3059\u3002\n\n\u3042\u3068\u306f\u8a00\u8449\u901a\u308a\u306b\u3061\u3087\u3063\u3074\u308a\u79fb\u52d5\u3055\u305b\u3066\u305d\u306e\u5024\u3067\u901f\u5ea6\u30d9\u30af\u30c8\u30eb\u3092\u4f5c\u308b\u3060\u3051\u3001\u7c21\u5358\u3067\u3059\u306d\u3002\n\n```glsl\nvec3 curlNoise( vec3 p ){\n  const float e = 0.0009765625;\n  const float e2 = 2.0 * e;\n\n  vec3 dx = vec3( e   , 0.0 , 0.0 );\n  vec3 dy = vec3( 0.0 , e   , 0.0 );\n  vec3 dz = vec3( 0.0 , 0.0 , e   );\n\n  vec3 p_x0 = snoiseVec3( p - dx );\n  vec3 p_x1 = snoiseVec3( p + dx );\n  vec3 p_y0 = snoiseVec3( p - dy );\n  vec3 p_y1 = snoiseVec3( p + dy );\n  vec3 p_z0 = snoiseVec3( p - dz );\n  vec3 p_z1 = snoiseVec3( p + dz );\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  return normalize( vec3( x , y , z ) / e2 );\n}\n```\n\n# \u3055\u3041WebGL\u3067\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3060\uff01\n\n\u3055\u3066\u3001\u3070\u3070\u30fc\u3063\u3068\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u6563\u3089\u3070\u3089\u305b\u306a\u3044\u3068\u9762\u767d\u304f\u7121\u3044\u3067\u3059\u3088\u306d\uff1f\n\u306a\u306e\u3067VTF\u3084\u6d6e\u52d5\u5c0f\u6570\u70b9\u30c6\u30af\u30b9\u30c1\u30e3\u3092\u4f7f\u3063\u3066\u9ad8\u901f\u306b\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3066\u3044\u307e\u3059\u3002\n\u9802\u70b9\u3092attribute\u3067\u306f\u306a\u304f\u3001\u30d5\u30ec\u30fc\u30e0\u30d0\u30c3\u30d5\u30a1\u3092\u4f7f\u3063\u3066\u30c6\u30af\u30b9\u30c1\u30e3\u306b\u66f8\u304d\u8fbc\u3080\u3053\u3068\u306b\u3088\u308a\u3001\u30d1\u30fc\u30c6\u30a3\u30af\u30eb\u3092\u6bce\u30d5\u30ec\u30fc\u30e0\u52d5\u304b\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3082\u8a71\u305b\u3070\u9577\u304f\u306a\u308b\u306e\u3067\u8aac\u660e\u3092[wgld](http://wgld.org/)\u306e[GPGPU\u306e\u8aac\u660e](http://wgld.org/d/webgl/w083.html)\u306b\u4e38\u6295\u3052\u3057\u3061\u3083\u3044\u307e\u3059\u3002\n\n# \u6700\u5f8c\u306b\n\n\u304a\u3049\u306a\u3093\u304b\u4ffa\u6570\u5b66\u3063\u307d\u3044\u3053\u3068\u3084\u3063\u3066\u308b\uff01\u3068\u304b\u60a6\u306b\u6d78\u308a\u306a\u304c\u3089\u66f8\u3044\u3066\u304a\u308a\u307e\u3057\u305f\u3002\n\u5b66\u751f\u6642\u4ee3\u771f\u9762\u76ee\u306b\u6570\u5b66\u3068\u304b\u3084\u3063\u3066\u306a\u304b\u3063\u305f\u3051\u3069\u3084\u3063\u3071\u308a\u52c9\u5f37\u3057\u3066\u304a\u3051\u3070\u3088\u304b\u3063\u305f\u306a\u3041\u3068\u5f8c\u6094\u3057\u3066\u304a\u308a\u307e\u3059\u3002\nCurl Noise\u306f\u898b\u305f\u76ee\u304c\u30af\u30fc\u30eb\u3060\u3051\u3069\u5b9f\u88c5\u306f\u305d\u3053\u307e\u3067\u8907\u96d1\u3067\u306f\u306a\u3044\u306e\u3067\u4e00\u56de\u6311\u6226\u3057\u3066\u307f\u3066\u306f\u3044\u304b\u304c\u3067\u3057\u3087\u3046\u304b\uff1f\n\n# \u53c2\u8003\n[\u7269\u7406\u306e\u304b\u304e\u3057\u3063\u307d](http://hooktail.sub.jp/)\n[WebGL\u7dcf\u672c\u5c71](http://webgl.souhonzan.org/)\n[webgl-noise](https://github.com/ashima/webgl-noise)\n[glsl-curl-noise](https://github.com/cabbibo/glsl-curl-noise)\n"}