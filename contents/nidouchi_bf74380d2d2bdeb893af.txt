{"tags": ["Ruby", "\u3069\u3046\u66f8\u304f", "yhpg"], "context": " More than 1 year has passed since last update.\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://nabetani.sakura.ne.jp/hena/ord18notfork/\ndef solve(q)\n  regs = ([0]*5).zip(0..4)\n  tp = [2,7,3,5,2]\n  xpos = [-1]*5\n  q.chars.each{|c|\n    si = regs.sort[0][1]\n    case c\n    when 'x'\n      regs[si][0] += 1\n      xpos[si] = regs[si][0] - 1 if xpos[si] < 0\n    when '.'\n      regs.each_with_index{|reg, i|\n        if xpos[i] >= 0\n          if xpos[i] > tp[i]\n            xpos[i] -= tp[i]\n            reg[0] -= tp[i]\n          else\n            reg[0] -= xpos[i]\n            xpos[i] = 0\n          end\n        else\n          reg[0] -= tp[i]\n          reg[0] = 0 if reg[0] < 0\n        end\n      }\n    else\n      regs[si][0] += c.to_i\n    end\n  }\n  regs.map(&:first).join(',')\nend\n\nDATA.readlines.each do |line|\n  no,q,a = line.chop.split(/\\s+/)\n  ans = solve(q)\n  print no + \"\\t\"\n  print ans\n  puts ans == a ? 'o' : 'x'\nend\n__END__\n0   42873x.3.   0,4,2,0,0\n1   1   1,0,0,0,0\n2   .   0,0,0,0,0\n3   x   1,0,0,0,0\n4   31. 1,0,0,0,0\n5   3x. 1,1,0,0,0\n6   99569x  9,9,6,6,9\n7   99569x33    9,9,9,9,9\n8   99569x33.   7,2,6,4,7\n9   99569x33..  5,0,4,0,5\n10  12345x3333. 4,0,3,2,3\n11  54321x3333. 3,0,3,0,4\n12  51423x3333. 3,4,4,0,4\n13  12x34x. 1,0,1,0,2\n14  987x654x.32 7,6,4,10,5\n15  99999999999x99999999.......9.   20,10,12,5,20\n\n\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://nabetani.sakura.ne.jp/hena/ord18notfork/\n\n```rb\ndef solve(q)\n  regs = ([0]*5).zip(0..4)\n  tp = [2,7,3,5,2]\n  xpos = [-1]*5\n  q.chars.each{|c|\n    si = regs.sort[0][1]\n    case c\n    when 'x'\n      regs[si][0] += 1\n      xpos[si] = regs[si][0] - 1 if xpos[si] < 0\n    when '.'\n      regs.each_with_index{|reg, i|\n        if xpos[i] >= 0\n          if xpos[i] > tp[i]\n            xpos[i] -= tp[i]\n            reg[0] -= tp[i]\n          else\n            reg[0] -= xpos[i]\n            xpos[i] = 0\n          end\n        else\n          reg[0] -= tp[i]\n          reg[0] = 0 if reg[0] < 0\n        end\n      }\n    else\n      regs[si][0] += c.to_i\n    end\n  }\n  regs.map(&:first).join(',')\nend\n\nDATA.readlines.each do |line|\n  no,q,a = line.chop.split(/\\s+/)\n  ans = solve(q)\n  print no + \"\\t\"\n  print ans\n  puts ans == a ? 'o' : 'x'\nend\n__END__\n0\t42873x.3.\t0,4,2,0,0\n1\t1\t1,0,0,0,0\n2\t.\t0,0,0,0,0\n3\tx\t1,0,0,0,0\n4\t31.\t1,0,0,0,0\n5\t3x.\t1,1,0,0,0\n6\t99569x\t9,9,6,6,9\n7\t99569x33\t9,9,9,9,9\n8\t99569x33.\t7,2,6,4,7\n9\t99569x33..\t5,0,4,0,5\n10\t12345x3333.\t4,0,3,2,3\n11\t54321x3333.\t3,0,3,0,4\n12\t51423x3333.\t3,4,4,0,4\n13\t12x34x.\t1,0,1,0,2\n14\t987x654x.32\t7,6,4,10,5\n15\t99999999999x99999999.......9.\t20,10,12,5,20\n```"}