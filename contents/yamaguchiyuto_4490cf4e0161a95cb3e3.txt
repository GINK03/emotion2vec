{"context": " More than 1 year has passed since last update.\u914d\u5217\u306b0\u8981\u7d20\u304c\u3042\u308b\u6642\u306f\u666e\u901a\u306b\u3084\u308b\u3068\u5024\u304cNan\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n>>> import numpy as np\n>>> a = np.array([0.1,0.3,0,0.05,0.15,0.6,0])\n>>> np.log(a)\narray([-2.30258509, -1.2039728 ,        -inf, -2.99573227, -1.89711998,\n       -0.51082562,        -inf])\n>>> a*np.log(a)\narray([-0.23025851, -0.36119184,         nan, -0.14978661, -0.284568  ,\n       -0.30649537,         nan])\n>>> -sum(a*np.log(a))\nnan\n\n\u305d\u3046\u3044\u3046\u6642\u306fmasked arrays\u3092\u4f7f\u3046\u3002\n>>> import numpy as np\n>>> a = np.array([0.1,0.3,0,0.05,0.15,0.6,0])\n>>> np.ma.log(a)\nmasked_array(data = [-2.3025850929940455 -1.2039728043259361 -- -2.995732273553991\n -1.8971199848858813 -0.5108256237659907 --],\n             mask = [False False  True False False False  True],\n       fill_value = 1e+20)\n\n>>> a*np.ma.log(a)\nmasked_array(data = [-0.23025850929940456 -0.3611918412977808 -- -0.14978661367769955\n -0.28456799773288216 -0.30649537425959444 --],\n             mask = [False False  True False False False  True],\n       fill_value = 1e+20)\n\n>>> -(a*np.ma.log(a)).sum()\n1.3323003362673613\n\n\u3061\u306a\u307f\u306b\u5358\u7d14\u306b\u30ea\u30b9\u30c8\u5185\u5305\u3067\u3084\u308b\u6642\u306f\u3053\u3046\u3002\n>>> import numpy as np\n>>> a = np.array([0.1,0.3,0,0.05,0.15,0.6,0])\n>>> -sum([v*math.log(v) if v > 0 else 0 for v in a])\n1.3323003362673613\n\n\u3069\u3063\u3061\u304c\u3044\u3044\u3093\u3060\u308d\u3002\n\n\u914d\u5217\u306b0\u8981\u7d20\u304c\u3042\u308b\u6642\u306f\u666e\u901a\u306b\u3084\u308b\u3068\u5024\u304cNan\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3002\n\n```python\n>>> import numpy as np\n>>> a = np.array([0.1,0.3,0,0.05,0.15,0.6,0])\n>>> np.log(a)\narray([-2.30258509, -1.2039728 ,        -inf, -2.99573227, -1.89711998,\n       -0.51082562,        -inf])\n>>> a*np.log(a)\narray([-0.23025851, -0.36119184,         nan, -0.14978661, -0.284568  ,\n       -0.30649537,         nan])\n>>> -sum(a*np.log(a))\nnan\n```\n\n\u305d\u3046\u3044\u3046\u6642\u306f[masked arrays](http://docs.scipy.org/doc/numpy/reference/maskedarray.html)\u3092\u4f7f\u3046\u3002\n\n```python\n>>> import numpy as np\n>>> a = np.array([0.1,0.3,0,0.05,0.15,0.6,0])\n>>> np.ma.log(a)\nmasked_array(data = [-2.3025850929940455 -1.2039728043259361 -- -2.995732273553991\n -1.8971199848858813 -0.5108256237659907 --],\n             mask = [False False  True False False False  True],\n       fill_value = 1e+20)\n\n>>> a*np.ma.log(a)\nmasked_array(data = [-0.23025850929940456 -0.3611918412977808 -- -0.14978661367769955\n -0.28456799773288216 -0.30649537425959444 --],\n             mask = [False False  True False False False  True],\n       fill_value = 1e+20)\n\n>>> -(a*np.ma.log(a)).sum()\n1.3323003362673613\n```\n\n\u3061\u306a\u307f\u306b\u5358\u7d14\u306b\u30ea\u30b9\u30c8\u5185\u5305\u3067\u3084\u308b\u6642\u306f\u3053\u3046\u3002\n\n```python\n>>> import numpy as np\n>>> a = np.array([0.1,0.3,0,0.05,0.15,0.6,0])\n>>> -sum([v*math.log(v) if v > 0 else 0 for v in a])\n1.3323003362673613\n```\n\n\u3069\u3063\u3061\u304c\u3044\u3044\u3093\u3060\u308d\u3002\n", "tags": ["numpy", "Python"]}