{"context": " More than 1 year has passed since last update.\u4f8b\u3048\u3070sbt-assembly\u3067\u30d0\u30c3\u30c1\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7b49\u3092\u542b\u3093\u3060\u30c7\u30d7\u30ed\u30a4\u7528tgz\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3044\u5834\u5408\u306a\u3069\u306b\u4f7f\u3048\u308b\u3002\n\n\u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\u5b9a\u7fa9\n\nBuild.scala\ncase class Tar(name: String, destDirPath: String, paths:Map[String, String])\nval tarContents = SettingKey[Tar](\"tarContents\", \"tar file name, file / direcotry paths\")\nval tar = TaskKey[Unit](\"tar\", \"tar\")\nval tarTask = tar <<= tarContents map { (tar: Tar) =>\n  val tarDirectoryPath = tar.destDirPath + \"/\" + tar.name\n  Process(\"rm -fr \" + tarDirectoryPath)\n  Process(\"mkdir -p \" + tarDirectoryPath)\n\n  tar.paths.foreach { kv =>\n    if (kv._2.endsWith(\"/\"))\n      Process(\"mkdir -p \" + tarDirectoryPath + \"/\" + kv._2)\n      Process(\"cp -pr \" + kv._1 + \" \" + tarDirectoryPath + \"/\" + kv._2)\n  }   \n  Process(\"tar -C \" + tar.destDirPath + \" -czf \" + tarDirectoryPath + \".tgz \" + tar.name)\n}\n\n\n\n\u4f7f\u7528\u65b9\u6cd5\n\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001*.jar\u3068conf/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u542b\u3080tgz\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u3002\n\nbuild.sbt\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\u306e\u8a2d\u5b9a\nSeq(tarTask)\n\nSeq(tarContents := Tar(\"\u62e1\u5f35\u5b50\u3092\u9664\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u540d\",\n                       \"XXX/target/\",\n                       Map(\"XXX/target/XXX.jar\" -> \"XXX.jar\",\n                           \"XXX/target/scala-2.10/classes/conf\" -> \"conf\"))\n\n\n\u4f8b\u3048\u3070sbt-assembly\u3067\u30d0\u30c3\u30c1\u306ejar\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u7b49\u3092\u542b\u3093\u3060\u30c7\u30d7\u30ed\u30a4\u7528tgz\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3044\u5834\u5408\u306a\u3069\u306b\u4f7f\u3048\u308b\u3002\n\n## \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\u5b9a\u7fa9\n\n```scala:Build.scala\ncase class Tar(name: String, destDirPath: String, paths:Map[String, String])\nval tarContents = SettingKey[Tar](\"tarContents\", \"tar file name, file / direcotry paths\")\nval tar = TaskKey[Unit](\"tar\", \"tar\")\nval tarTask = tar <<= tarContents map { (tar: Tar) =>\n  val tarDirectoryPath = tar.destDirPath + \"/\" + tar.name\n  Process(\"rm -fr \" + tarDirectoryPath)\n  Process(\"mkdir -p \" + tarDirectoryPath)\n\n  tar.paths.foreach { kv =>\n    if (kv._2.endsWith(\"/\"))\n      Process(\"mkdir -p \" + tarDirectoryPath + \"/\" + kv._2)\n      Process(\"cp -pr \" + kv._1 + \" \" + tarDirectoryPath + \"/\" + kv._2)\n  }   \n  Process(\"tar -C \" + tar.destDirPath + \" -czf \" + tarDirectoryPath + \".tgz \" + tar.name)\n}\n```\n\n## \u4f7f\u7528\u65b9\u6cd5\n\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001*.jar\u3068conf/\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u542b\u3080tgz\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b\u3002\n\n```scala:build.sbt\n// \u30ab\u30b9\u30bf\u30e0\u30bf\u30b9\u30af\u306e\u8a2d\u5b9a\nSeq(tarTask)\n\nSeq(tarContents := Tar(\"\u62e1\u5f35\u5b50\u3092\u9664\u3044\u305f\u30d5\u30a1\u30a4\u30eb\u540d\",\n                       \"XXX/target/\",\n                       Map(\"XXX/target/XXX.jar\" -> \"XXX.jar\",\n                           \"XXX/target/scala-2.10/classes/conf\" -> \"conf\"))\n```\n", "tags": ["Scala", "sbt0.13"]}