{"tags": ["\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3", "python3"], "context": "simpy\u306fsympy\u3068\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u306b\u9593\u9055\u308f\u308c\u308b\u3057\u3001python\u306e2\u7cfb\u7528\u30683\u7cfb\u7528\u304c\u3042\u3063\u3066\u60c5\u5831\u3082\u6df7\u3056\u3063\u3066\u3044\u308b\u3057\u3001\u65e5\u672c\u8a9e\u306e\u60c5\u5831\u3082\u5c11\u306a\u304f\u3066\u82f1\u8a9e\u3060\u3089\u3051\u3060\u3057\u30a6\u30c0\u30a6\u30c0\u30b0\u30c0\u30b0\u30c0\u3002\u3002\u3002\n\u3063\u3068\u3059\u307f\u307e\u305b\u3093\u8131\u7dda\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u4eca\u56de\u306f\u524d\u56de\u306e\u4e88\u544a\u306e\u901a\u308asimpy\u306esimpy.Resource\u30af\u30e9\u30b9\u3068simpy.Container\u30af\u30e9\u30b9\u3067\u3057\u305f\u306d\u3002\nResource\u3068Cotainer\u3092\u305d\u308c\u305e\u308c\u7c21\u5358\u306b\u8aac\u660e\u3059\u308b\u3068Resource\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff08\u5229\u7528\u8005\uff09\u304c\u5171\u901a\u306b\u5229\u7528\u53ef\u80fd\u306a\u30b5\u30fc\u30d0\u30fc\uff08\u30b5\u30fc\u30d3\u30b9\u3092\u3057\u3066\u304f\u308c\u308b\u5834\u6240\uff09\u306e\u3053\u3068\u3067Container\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5229\u7528\u53ef\u80fd\u306a\u8a2d\u5b9a\u3055\u308c\u305f\u74b0\u5883\u306b\u5171\u901a\u306a\u8cc7\u6e90\u306e\u3053\u3068\u3067\u3059\u3002\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u4f8b\u306b\u3057\u3066\u8aac\u660e\u3059\u308b\u3068Resource\u304c\u7d66\u6cb9\u6a5f\u3067Container\u304c\u30ac\u30bd\u30ea\u30f3\u306e\u91cf\u3067\u3059\u306d\u3002\n\nResource\n\u307e\u305a\u7c21\u5358\u306b\u5148\u306b\u6319\u3052\u305f\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u4f8b\u306b\u30bd\u30fc\u30b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002simpy\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u30b5\u30a4\u30c8\u306b\u3082\u3042\u308a\u307e\u3059\u304c\u305d\u308c\u3068\u306f\u9055\u3046\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\nresource.py\nimport simpy\nimport random\n\nNUM_GASSTATION = 2\nGAS_MAX = 20\n\n\nclass Car:\n    def __init__(self, name, env, gasstation):\n        self.name = name\n        self.gas_amount = random.randint(1, GAS_MAX)\n        self.res = gasstation\n        print(\"%s\u304c%d\u30ea\u30c3\u30c8\u30eb\u306e\u30ac\u30bd\u30ea\u30f3\u3067\u904b\u8ee2\u958b\u59cb\" % (self.name, self.gas_amount))\n        env.process(self.car_run(env))\n\n    def car_run(self, env):\n        yield env.timeout(self.gas_amount)  # 0\u3060\u3051\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\n        with self.res.request() as req:\n            yield req\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u5230\u7740\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n            amount = GAS_MAX\n            yield env.timeout(amount)\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u51fa\u767a\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n\ndef carfuctory(env, gasstation, N):\n    for i in range(N):\n        Car(\"car\"+str(i), env, gasstation)\n\nenv = simpy.Environment()\ngasstation = simpy.Resource(env, capacity=NUM_GASSTATION) # NUM_GASSTATION\u500b\u3060\u3051\u306e\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306e\u6e96\u5099\ncarfuctory(env, gasstation, 10)  # 10\u53f0\u5206\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\nenv.run()  # \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u95a2\u6570\u304c\u306a\u304f\u306a\u308b\u307e\u3067\n\n\n\u524d\u56de\u3068\u9055\u3063\u3066\u30af\u30e9\u30b9\u3067\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\u4eca\u56de\u306fCar\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u305f\u3068\u304d\u306b\u521d\u671f\u5316\u95a2\u6570\u306e\u4e2d\u3067env.process\u3067\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u306d\u3002python\u306f\u53c2\u7167\u4ee3\u5165\u306a\u306e\u3067\u30af\u30e9\u30b9\u306e\u4e2d\u3067env\u3092\u5f15\u6570\u3068\u3057\u3066\u3082\u3046\u307e\u304f\u3044\u304f\u3093\u3067\u3059\u306d\u3002\u4eca\u56de\u306e\u8aac\u660e\u3067\u91cd\u8981\u306a\u3068\u3053\u308d\u306fResource\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5f15\u6570\u306b\u53d7\u3051\u53d6\u308b\nwith self.res.request() as req:\n            yield req\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u5230\u7740\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n            amount = GAS_MAX\n            yield env.timeout(amount)\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u51fa\u767a\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n\n\u3053\u3053\u306e\u90e8\u5206\u3067\u3059\u3002with\u6587\u306f\u3053\u306e\u8981\u6c42\u306f\u3053\u3053\u304b\u3089\u3053\u3053\u307e\u3067\u3067\u3059\u3088\u3001\u3053\u3053\u306e\u90e8\u5206\u3060\u3051\u3067Resource\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eself.res\u306e\u4e2d\u8eab\u3092\u3064\u304b\u3044\u307e\u3059\u3088\u3068\u3044\u3046\u5ba3\u8a00\u3067\u3059\u3002\u305d\u3057\u3066yield req\u306fself.res\u306e\u4e2d\u8eab\u3092\u8981\u6c42\u3057\u307e\u3059\u3068\u3044\u3046\u5ba3\u8a00\u3067\u3059\u3002\u3053\u306e\u90e8\u5206\u3067\u306fself.res\u306e\u521d\u671f\u5316\u6642\u306bcapacity\u3067\u5ba3\u8a00\u3055\u308c\u305f\u500b\u6570\u306e\u3046\u3061\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u3082\u306e\u306e\u4e00\u3064\u3092\u4f7f\u3048\u308b\u307e\u3067\u6b21\u306b\u9032\u307f\u307e\u305b\u3093\u3002\u3082\u3061\u308d\u3093\u8981\u6c42\u3057\u305f\u77ac\u9593\u306b\u901a\u308c\u3070\u305d\u306e\u307e\u307e\u6b21\u306b\u9032\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\nContainer\n\u4eca\u5ea6\u306fsimpy\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u3053\u3061\u3089\u3067\u8aac\u660e\u3092\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u306b\u548c\u8a33\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u65e5\u672c\u8a9e\u306b\u3057\u305f\u30bd\u30fc\u30b9\u3092\u8f09\u305b\u307e\u3059\u3002\n\nGasStationRefueling.py\nimport itertools  # \u7279\u5225\u306a\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\nimport random\n\nimport simpy\n\n\nRANDOM_SEED = 42\nGAS_STATION_SIZE = 200     # \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u4fdd\u6709\u3067\u304d\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u91cf\nTHRESHOLD = 10             # \u30ac\u30bd\u30ea\u30f3\u3092\u904b\u3076\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3076\u3068\u304d\u306e\u30ac\u30bd\u30ea\u30f3\u306e\u5168\u4f53\u306b\u5bfe\u3059\u308b\u5272\u5408\nFUEL_TANK_SIZE = 50        # \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u84c4\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u6700\u5927\u91cf\nFUEL_TANK_LEVEL = [5, 25]  # \u8eca\u304c\u6301\u3064\u30ac\u30bd\u30ea\u30f3\u306e\u521d\u671f\u5316\u6642\u306b\u5fc5\u8981\u306a\u4e71\u6570\u306e\u7bc4\u56f2[Min, Max]\u306e\u8868\u8a18\u3067\u5358\u4f4d\u306f\u30ea\u30c3\u30bf\u30fc\nREFUELING_SPEED = 2        # \u74b0\u5883\u306e\u5358\u4f4d\u6642\u9593\u3042\u305f\u308a\u306b\u88dc\u5145\u3067\u304d\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u91cf\nTANK_TRUCK_TIME = 300      # \u30c8\u30e9\u30c3\u30af\u304c\u30ac\u30bd\u30ea\u30f3\u3092\u904b\u3076\u306e\u306b\u304b\u304b\u308b\u6642\u9593\nT_INTER = [30, 300]        # \u8eca\u3092\u4f5c\u308b\u9593\u9694\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u4e71\u6570\u306e\u7bc4\u56f2\u3067[min, max]\u306e\u8868\u8a18\nSIM_TIME = 1000            # \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u6642\u9593\n\n\ndef car(name, env, gas_station, fuel_pump):\n    \"\"\"\n    \u30ac\u30bd\u30ea\u30f3\u3092\u4f7f\u3063\u3066\u8d70\u308b\u8eca\u306e\u30af\u30e9\u30b9\n    \"\"\"\n    fuel_tank_level = random.randint(*FUEL_TANK_LEVEL)\n    print('%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u5230\u7740\u3057\u307e\u3057\u305f\u3002' % (name, env.now))\n    with gas_station.request() as req:\n        start = env.now\n        # \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u8981\u6c42\n        yield req\n\n        # \u305d\u306e\u8eca\u306e\u30ac\u30bd\u30ea\u30f3\u304c\u6e80\u30bf\u30f3\u306b\u306a\u308b\u3088\u3046\u306b\u5bb9\u91cf\u3092\u8a2d\u5b9a\u3057\u3066\u8eca\u306b\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\n        # \u305f\u3060\u3057\u71c3\u6599\u304c\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u306a\u3044\u5834\u5408\u306f\u30ac\u30bd\u30ea\u30f3\u304c\u624b\u306b\u5165\u308b\u307e\u3067\u5f85\u3064\u3002\n        liters_required = FUEL_TANK_SIZE - fuel_tank_level\n        yield fuel_pump.get(liters_required)\n\n        # \u30ac\u30bd\u30ea\u30f3\u306e\u88dc\u5145\u3059\u308b\u901f\u5ea6\u306b\u306e\u3063\u3068\u3063\u3066\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\n        yield env.timeout(liters_required / REFUELING_SPEED)\n\n        print('%s\u306f%.1f\u304b\u304b\u3063\u3066\u30ac\u30bd\u30ea\u30f3\u3092\u6e80\u30bf\u30f3\u306b\u3057\u307e\u3057\u305f\u3002' % (name,\n                                                          env.now - start))\n\n\ndef gas_station_control(env, fuel_pump):\n    \"\"\"\n    \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u30ac\u30bd\u30ea\u30f3\u3092\u7a4d\u3093\u3060\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3076\u305f\u3081\u306e\u4e00\u9023\u306e\u6d41\u308c\u3092\u8a18\u3057\u305f\u95a2\u6570\n    \"\"\"\n    while True:\n        if fuel_pump.level / fuel_pump.capacity * 100 < THRESHOLD:\n            print('%d\u306b\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3073\u307e\u3057\u305f\u3002' % env.now)\n            # \u30bf\u30f3\u30af\u304c\u5230\u7740\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8fd4\u3059\n            yield env.process(tank_truck(env, fuel_pump))\n\n        yield env.timeout(10)  # 10\u5358\u4f4d\u6642\u9593\u5206\u5f85\u3064\n\n\ndef tank_truck(env, fuel_pump):\n    \"\"\"\u30ac\u30bd\u30ea\u30f3\u3092\u7a4d\u3093\u3060\u30c8\u30e9\u30c3\u30af\u306e\u4e00\u9023\u306e\u6d41\u308c\"\"\"\n    yield env.timeout(TANK_TRUCK_TIME)\n    print('%d\u306b\u30c8\u30e9\u30c3\u30af\u304c\u5230\u7740\u3057\u307e\u3057\u305f' % env.now)\n    amount = fuel_pump.capacity - fuel_pump.level\n    print('\u30c8\u30e9\u30c3\u30af\u304c%.1f\u30ea\u30c3\u30c8\u30eb\u306e\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\u3057\u59cb\u3081\u307e\u3057\u305f\u3002' % amount)\n    yield fuel_pump.put(amount)\n\n\ndef car_generator(env, gas_station, fuel_pump):\n    \"\"\"\u8eca\u3092\u4f5c\u308b\u5de5\u5834\"\"\"\n    # 0\u304b\u3089\u3072\u3068\u3064\u305a\u3064\u30ab\u30a6\u30f3\u30c8\u3092\u5897\u3084\u3057\u3066\u3044\u304f\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u30eb\u30fc\u30d7\u3092\u56de\u3059\u3002\n    for i in itertools.count():\n        yield env.timeout(random.randint(*T_INTER))\n        env.process(car('Car %d' % i, env, gas_station, fuel_pump))\n\n\n# \u3053\u3053\u304b\u3089\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6e96\u5099\u3068\u305d\u306e\u5b9f\u884c\nprint('Gas Station refuelling')\nrandom.seed(RANDOM_SEED)\n\n# \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6e96\u5099\nenv = simpy.Environment()\n# \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306e\u5229\u7528\u3067\u304d\u308b\u7d66\u6cb9\u53e3\u306e\u5b9a\u7fa9\ngas_station = simpy.Resource(env, 2)\n# \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u4fdd\u6709\u3059\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u5b9a\u7fa9\nfuel_pump = simpy.Container(env, GAS_STATION_SIZE, init=GAS_STATION_SIZE)\n\nenv.process(gas_station_control(env, fuel_pump))\nenv.process(car_generator(env, gas_station, fuel_pump))\n\n# \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\nenv.run(until=SIM_TIME)\n\n\n\u3053\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u6b21\u3005\u306b\u8eca\u304c\u5165\u3063\u3066\u304f\u308b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306e\u30ac\u30bd\u30ea\u30f3\u3092\u7a4d\u3093\u3060\u30bf\u30f3\u30af\u3092\u8aad\u3093\u3067\u88dc\u5145\u3057\u3066\u3082\u3089\u3046\u3068\u3044\u3046\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002Container\u30af\u30e9\u30b9\u3067\u91cd\u8981\u306a\u3053\u3068\u306f\ncontainer = simpy.Container(env, amount, init=init_amount)\nyield container.put(amount)\nyield container.get(amount)\n\n\u306e\u95a2\u6570\u7fa4\u3067\u3059\u3002\u4e0a\u304b\u3089\u9806\u306b\u5909\u6570\u5ba3\u8a00\u3001container\u3078\u306e\u88dc\u5145\u3001container\u304b\u3089\u306e\u53d6\u5f97\u3067\u3059\u3002\u6ce8\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306fcontainer\u306e\u9650\u754c\u3092\u8d85\u3048\u308b\u6ce8\u5165\u306f\u30a8\u30e9\u30fc\u3092\u306f\u304b\u305a\u306b\u30b9\u30eb\u30fc\u3055\u308c\u3001amount = 0\u306e\u6642\u306f\u30a8\u30e9\u30fc\u3092\u306f\u3044\u3066\u3057\u307e\u3046\u3053\u3068\u3067\u3059\u3002\n\u3061\u306a\u307f\u306bsimpy\u306fenv\u74b0\u5883\u3067\u4f5c\u3063\u305fContainer\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u305d\u306eenv\u74b0\u5883\u3067\u306f\u5171\u901a\u306b\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u304cresource\u3068\u306f\u4f55\u4e00\u3064\u7d50\u3073\u3064\u3044\u3066\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u4e0b\u3055\u3044\u3002\u4eca\u56de\u3067\u306f\nfuel_pump = simpy.Container(env, GAS_STATION_SIZE, init=GAS_STATION_SIZE)\n\n\u3067\u9650\u754c\u5024\u304cGAS_STATION\u3067\u521d\u671f\u5024\u304cGAS_STATION_SIZE\u306e\u30ac\u30bd\u30ea\u30f3\u3092\u84c4\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u71c3\u6599\u30bf\u30f3\u30af\u3092\u4f5c\u308a\u307e\u3059\u3088\u3068\u5ba3\u8a00\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u30b3\u30fc\u30c9\u3067\u306ftank_truck\u3067fuel_pump.put\u95a2\u6570\u3067\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\u3057\u3066\n        # \u305d\u306e\u8eca\u306e\u30ac\u30bd\u30ea\u30f3\u304c\u6e80\u30bf\u30f3\u306b\u306a\u308b\u3088\u3046\u306b\u5bb9\u91cf\u3092\u8a2d\u5b9a\u3057\u3066\u8eca\u306b\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\n        # \u305f\u3060\u3057\u71c3\u6599\u304c\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u306a\u3044\u5834\u5408\u306f\u30ac\u30bd\u30ea\u30f3\u304c\u624b\u306b\u5165\u308b\u307e\u3067\u5f85\u3064\u3002\n        liters_required = FUEL_TANK_SIZE - fuel_tank_level\n        yield fuel_pump.get(liters_required)\n\n\n\u306e\u90e8\u5206\u3067\u30ac\u30bd\u30ea\u30f3\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u90e8\u5206\u3067\u306eyield fuel_pump.get\u95a2\u6570\u306e\u3075\u308b\u307e\u3044\u306f\u30ac\u30bd\u30ea\u30f3\u304c\u53d6\u5f97\u3067\u304d\u308b\u307e\u3067\u5f85\u3063\u3066\u304b\u3089\u30ac\u30bd\u30ea\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\u7c21\u5358\u3067\u3059\u306d\u3002\n\u3053\u306e\u3088\u3046\u306bsimpy\u306f\u7c21\u5358\u306b\u88dc\u5145\u3057\u305f\u308a\u53d6\u5f97\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nContainer\u30af\u30e9\u30b9\u306e\u8ffd\u8a18\n\u91cd\u8981\u306a\u5909\u6570\u306e\u8aac\u660e\u3092\u5fd8\u308c\u3066\u3044\u305f\u306e\u3067\u3053\u3053\u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\nContainer\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306flevel\u5909\u6570\u3068capacity\u5909\u6570\u3092\u6301\u3061\u307e\u3059\u3002\u3053\u306e\u5909\u6570\u306f\u9806\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u4fdd\u6709\u3059\u308b\u91cf\u3001\u4fdd\u6709\u3067\u304d\u308b\u9650\u754c\u306e\u91cf\u3092\u8868\u3057\u307e\u3059\u3002\u4eca\u56de\u306e2\u3064\u76ee\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3082\u3053\u306e\u5909\u6570\u3067\u5834\u5408\u5206\u3051\u3092\u3057\u3066\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3093\u3060\u308a\u3057\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u5b9f\u306fResource\u30af\u30e9\u30b9\u3067\u3082\u4eca\u3069\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u3063\u3066\u3044\u308b\u304b\u306e\u756a\u53f7\u3092\u5909\u6570\u3068\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3088\u304f\u6319\u52d5\u304c\u308f\u304b\u3063\u3066\u306a\u3044\u306e\u3067\u3053\u3053\u3067\u306f\u8aac\u660e\u3057\u307e\u305b\u3093\u3002\n\n\u6b21\u56de\u4e88\u544a\n\u3053\u308c\u307e\u3067\u306e\u96d1\u306a\u89e3\u8aac\u306e\u7dcf\u96c6\u7de8\u3068\u3057\u3066\u81ea\u4f5c\u3057\u305f\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u8aad\u3093\u3067\u7406\u89e3\u3067\u304d\u305f\u4eba\u306f\u3059\u3050\u306b\u7406\u89e3\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u306e\uff13\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nsimpy\u306fsympy\u3068\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u306b\u9593\u9055\u308f\u308c\u308b\u3057\u3001python\u306e2\u7cfb\u7528\u30683\u7cfb\u7528\u304c\u3042\u3063\u3066\u60c5\u5831\u3082\u6df7\u3056\u3063\u3066\u3044\u308b\u3057\u3001\u65e5\u672c\u8a9e\u306e\u60c5\u5831\u3082\u5c11\u306a\u304f\u3066\u82f1\u8a9e\u3060\u3089\u3051\u3060\u3057\u30a6\u30c0\u30a6\u30c0\u30b0\u30c0\u30b0\u30c0\u3002\u3002\u3002\n\u3063\u3068\u3059\u307f\u307e\u305b\u3093\u8131\u7dda\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u4eca\u56de\u306f[\u524d\u56de](http://qiita.com/ogata-k/items/08de9637111bf61099da)\u306e\u4e88\u544a\u306e\u901a\u308asimpy\u306esimpy.Resource\u30af\u30e9\u30b9\u3068simpy.Container\u30af\u30e9\u30b9\u3067\u3057\u305f\u306d\u3002\nResource\u3068Cotainer\u3092\u305d\u308c\u305e\u308c\u7c21\u5358\u306b\u8aac\u660e\u3059\u308b\u3068Resource\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff08\u5229\u7528\u8005\uff09\u304c\u5171\u901a\u306b\u5229\u7528\u53ef\u80fd\u306a\u30b5\u30fc\u30d0\u30fc\uff08\u30b5\u30fc\u30d3\u30b9\u3092\u3057\u3066\u304f\u308c\u308b\u5834\u6240\uff09\u306e\u3053\u3068\u3067Container\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u5229\u7528\u53ef\u80fd\u306a\u8a2d\u5b9a\u3055\u308c\u305f\u74b0\u5883\u306b\u5171\u901a\u306a\u8cc7\u6e90\u306e\u3053\u3068\u3067\u3059\u3002\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u4f8b\u306b\u3057\u3066\u8aac\u660e\u3059\u308b\u3068Resource\u304c\u7d66\u6cb9\u6a5f\u3067Container\u304c\u30ac\u30bd\u30ea\u30f3\u306e\u91cf\u3067\u3059\u306d\u3002\n#Resource\n\u307e\u305a\u7c21\u5358\u306b\u5148\u306b\u6319\u3052\u305f\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u4f8b\u306b\u30bd\u30fc\u30b9\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002simpy\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u30b5\u30a4\u30c8\u306b\u3082\u3042\u308a\u307e\u3059\u304c\u305d\u308c\u3068\u306f\u9055\u3046\u3082\u306e\u306b\u306a\u308a\u307e\u3059\u3002\n\n```python:resource.py\nimport simpy\nimport random\n\nNUM_GASSTATION = 2\nGAS_MAX = 20\n\n\nclass Car:\n    def __init__(self, name, env, gasstation):\n        self.name = name\n        self.gas_amount = random.randint(1, GAS_MAX)\n        self.res = gasstation\n        print(\"%s\u304c%d\u30ea\u30c3\u30c8\u30eb\u306e\u30ac\u30bd\u30ea\u30f3\u3067\u904b\u8ee2\u958b\u59cb\" % (self.name, self.gas_amount))\n        env.process(self.car_run(env))\n\n    def car_run(self, env):\n        yield env.timeout(self.gas_amount)  # 0\u3060\u3051\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306f\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\n        with self.res.request() as req:\n            yield req\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u5230\u7740\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n            amount = GAS_MAX\n            yield env.timeout(amount)\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u51fa\u767a\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n\ndef carfuctory(env, gasstation, N):\n    for i in range(N):\n        Car(\"car\"+str(i), env, gasstation)\n\nenv = simpy.Environment()\ngasstation = simpy.Resource(env, capacity=NUM_GASSTATION) # NUM_GASSTATION\u500b\u3060\u3051\u306e\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306e\u6e96\u5099\ncarfuctory(env, gasstation, 10)  # 10\u53f0\u5206\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\nenv.run()  # \u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u95a2\u6570\u304c\u306a\u304f\u306a\u308b\u307e\u3067\n```\n\n\u524d\u56de\u3068\u9055\u3063\u3066\u30af\u30e9\u30b9\u3067\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\u4eca\u56de\u306fCar\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u305f\u3068\u304d\u306b\u521d\u671f\u5316\u95a2\u6570\u306e\u4e2d\u3067env.process\u3067\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u306d\u3002python\u306f\u53c2\u7167\u4ee3\u5165\u306a\u306e\u3067\u30af\u30e9\u30b9\u306e\u4e2d\u3067env\u3092\u5f15\u6570\u3068\u3057\u3066\u3082\u3046\u307e\u304f\u3044\u304f\u3093\u3067\u3059\u306d\u3002\u4eca\u56de\u306e\u8aac\u660e\u3067\u91cd\u8981\u306a\u3068\u3053\u308d\u306fResource\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5f15\u6570\u306b\u53d7\u3051\u53d6\u308b\n\n```\nwith self.res.request() as req:\n            yield req\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u5230\u7740\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n            amount = GAS_MAX\n            yield env.timeout(amount)\n            print(\"%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u51fa\u767a\u3057\u307e\u3057\u305f\u3002\" % (self.name, env.now))\n```\n\n\u3053\u3053\u306e\u90e8\u5206\u3067\u3059\u3002with\u6587\u306f\u3053\u306e\u8981\u6c42\u306f\u3053\u3053\u304b\u3089\u3053\u3053\u307e\u3067\u3067\u3059\u3088\u3001\u3053\u3053\u306e\u90e8\u5206\u3060\u3051\u3067Resource\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306eself.res\u306e\u4e2d\u8eab\u3092\u3064\u304b\u3044\u307e\u3059\u3088\u3068\u3044\u3046\u5ba3\u8a00\u3067\u3059\u3002\u305d\u3057\u3066yield req\u306fself.res\u306e\u4e2d\u8eab\u3092\u8981\u6c42\u3057\u307e\u3059\u3068\u3044\u3046\u5ba3\u8a00\u3067\u3059\u3002\u3053\u306e\u90e8\u5206\u3067\u306fself.res\u306e\u521d\u671f\u5316\u6642\u306bcapacity\u3067\u5ba3\u8a00\u3055\u308c\u305f\u500b\u6570\u306e\u3046\u3061\u4f7f\u308f\u308c\u3066\u3044\u306a\u3044\u3082\u306e\u306e\u4e00\u3064\u3092\u4f7f\u3048\u308b\u307e\u3067\u6b21\u306b\u9032\u307f\u307e\u305b\u3093\u3002\u3082\u3061\u308d\u3093\u8981\u6c42\u3057\u305f\u77ac\u9593\u306b\u901a\u308c\u3070\u305d\u306e\u307e\u307e\u6b21\u306b\u9032\u3093\u3067\u3044\u304d\u307e\u3059\u3002\n\n# Container\n\u4eca\u5ea6\u306fsimpy\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e[\u3053\u3061\u3089](https://simpy.readthedocs.io/en/latest/examples/gas_station_refuel.html)\u3067\u8aac\u660e\u3092\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u306b\u548c\u8a33\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u308f\u304b\u308a\u3084\u3059\u304f\u65e5\u672c\u8a9e\u306b\u3057\u305f\u30bd\u30fc\u30b9\u3092\u8f09\u305b\u307e\u3059\u3002\n\n```python:GasStationRefueling.py\nimport itertools  # \u7279\u5225\u306a\u30a4\u30c6\u30ec\u30fc\u30bf\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\nimport random\n\nimport simpy\n\n\nRANDOM_SEED = 42\nGAS_STATION_SIZE = 200     # \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u4fdd\u6709\u3067\u304d\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u91cf\nTHRESHOLD = 10             # \u30ac\u30bd\u30ea\u30f3\u3092\u904b\u3076\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3076\u3068\u304d\u306e\u30ac\u30bd\u30ea\u30f3\u306e\u5168\u4f53\u306b\u5bfe\u3059\u308b\u5272\u5408\nFUEL_TANK_SIZE = 50        # \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u84c4\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u6700\u5927\u91cf\nFUEL_TANK_LEVEL = [5, 25]  # \u8eca\u304c\u6301\u3064\u30ac\u30bd\u30ea\u30f3\u306e\u521d\u671f\u5316\u6642\u306b\u5fc5\u8981\u306a\u4e71\u6570\u306e\u7bc4\u56f2[Min, Max]\u306e\u8868\u8a18\u3067\u5358\u4f4d\u306f\u30ea\u30c3\u30bf\u30fc\nREFUELING_SPEED = 2        # \u74b0\u5883\u306e\u5358\u4f4d\u6642\u9593\u3042\u305f\u308a\u306b\u88dc\u5145\u3067\u304d\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u91cf\nTANK_TRUCK_TIME = 300      # \u30c8\u30e9\u30c3\u30af\u304c\u30ac\u30bd\u30ea\u30f3\u3092\u904b\u3076\u306e\u306b\u304b\u304b\u308b\u6642\u9593\nT_INTER = [30, 300]        # \u8eca\u3092\u4f5c\u308b\u9593\u9694\u3092\u6307\u5b9a\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u4e71\u6570\u306e\u7bc4\u56f2\u3067[min, max]\u306e\u8868\u8a18\nSIM_TIME = 1000            # \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u6642\u9593\n\n\ndef car(name, env, gas_station, fuel_pump):\n    \"\"\"\n    \u30ac\u30bd\u30ea\u30f3\u3092\u4f7f\u3063\u3066\u8d70\u308b\u8eca\u306e\u30af\u30e9\u30b9\n    \"\"\"\n    fuel_tank_level = random.randint(*FUEL_TANK_LEVEL)\n    print('%s\u304c%.1f\u306b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u5230\u7740\u3057\u307e\u3057\u305f\u3002' % (name, env.now))\n    with gas_station.request() as req:\n        start = env.now\n        # \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u3092\u8981\u6c42\n        yield req\n\n        # \u305d\u306e\u8eca\u306e\u30ac\u30bd\u30ea\u30f3\u304c\u6e80\u30bf\u30f3\u306b\u306a\u308b\u3088\u3046\u306b\u5bb9\u91cf\u3092\u8a2d\u5b9a\u3057\u3066\u8eca\u306b\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\n        # \u305f\u3060\u3057\u71c3\u6599\u304c\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u306a\u3044\u5834\u5408\u306f\u30ac\u30bd\u30ea\u30f3\u304c\u624b\u306b\u5165\u308b\u307e\u3067\u5f85\u3064\u3002\n        liters_required = FUEL_TANK_SIZE - fuel_tank_level\n        yield fuel_pump.get(liters_required)\n\n        # \u30ac\u30bd\u30ea\u30f3\u306e\u88dc\u5145\u3059\u308b\u901f\u5ea6\u306b\u306e\u3063\u3068\u3063\u3066\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\n        yield env.timeout(liters_required / REFUELING_SPEED)\n\n        print('%s\u306f%.1f\u304b\u304b\u3063\u3066\u30ac\u30bd\u30ea\u30f3\u3092\u6e80\u30bf\u30f3\u306b\u3057\u307e\u3057\u305f\u3002' % (name,\n                                                          env.now - start))\n\n\ndef gas_station_control(env, fuel_pump):\n    \"\"\"\n    \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u30ac\u30bd\u30ea\u30f3\u3092\u7a4d\u3093\u3060\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3076\u305f\u3081\u306e\u4e00\u9023\u306e\u6d41\u308c\u3092\u8a18\u3057\u305f\u95a2\u6570\n    \"\"\"\n    while True:\n        if fuel_pump.level / fuel_pump.capacity * 100 < THRESHOLD:\n            print('%d\u306b\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3073\u307e\u3057\u305f\u3002' % env.now)\n            # \u30bf\u30f3\u30af\u304c\u5230\u7740\u3059\u308b\u30d7\u30ed\u30bb\u30b9\u3092\u8fd4\u3059\n            yield env.process(tank_truck(env, fuel_pump))\n\n        yield env.timeout(10)  # 10\u5358\u4f4d\u6642\u9593\u5206\u5f85\u3064\n\n\ndef tank_truck(env, fuel_pump):\n    \"\"\"\u30ac\u30bd\u30ea\u30f3\u3092\u7a4d\u3093\u3060\u30c8\u30e9\u30c3\u30af\u306e\u4e00\u9023\u306e\u6d41\u308c\"\"\"\n    yield env.timeout(TANK_TRUCK_TIME)\n    print('%d\u306b\u30c8\u30e9\u30c3\u30af\u304c\u5230\u7740\u3057\u307e\u3057\u305f' % env.now)\n    amount = fuel_pump.capacity - fuel_pump.level\n    print('\u30c8\u30e9\u30c3\u30af\u304c%.1f\u30ea\u30c3\u30c8\u30eb\u306e\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\u3057\u59cb\u3081\u307e\u3057\u305f\u3002' % amount)\n    yield fuel_pump.put(amount)\n\n\ndef car_generator(env, gas_station, fuel_pump):\n    \"\"\"\u8eca\u3092\u4f5c\u308b\u5de5\u5834\"\"\"\n    # 0\u304b\u3089\u3072\u3068\u3064\u305a\u3064\u30ab\u30a6\u30f3\u30c8\u3092\u5897\u3084\u3057\u3066\u3044\u304f\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u30eb\u30fc\u30d7\u3092\u56de\u3059\u3002\n    for i in itertools.count():\n        yield env.timeout(random.randint(*T_INTER))\n        env.process(car('Car %d' % i, env, gas_station, fuel_pump))\n\n\n# \u3053\u3053\u304b\u3089\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6e96\u5099\u3068\u305d\u306e\u5b9f\u884c\nprint('Gas Station refuelling')\nrandom.seed(RANDOM_SEED)\n\n# \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u6e96\u5099\nenv = simpy.Environment()\n# \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306e\u5229\u7528\u3067\u304d\u308b\u7d66\u6cb9\u53e3\u306e\u5b9a\u7fa9\ngas_station = simpy.Resource(env, 2)\n# \u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u304c\u4fdd\u6709\u3059\u308b\u30ac\u30bd\u30ea\u30f3\u306e\u5b9a\u7fa9\nfuel_pump = simpy.Container(env, GAS_STATION_SIZE, init=GAS_STATION_SIZE)\n\nenv.process(gas_station_control(env, fuel_pump))\nenv.process(car_generator(env, gas_station, fuel_pump))\n\n# \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\nenv.run(until=SIM_TIME)\n```\n\n\u3053\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u306f\u6b21\u3005\u306b\u8eca\u304c\u5165\u3063\u3066\u304f\u308b\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306e\u30ac\u30bd\u30ea\u30f3\u3092\u7a4d\u3093\u3060\u30bf\u30f3\u30af\u3092\u8aad\u3093\u3067\u88dc\u5145\u3057\u3066\u3082\u3089\u3046\u3068\u3044\u3046\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002Container\u30af\u30e9\u30b9\u3067\u91cd\u8981\u306a\u3053\u3068\u306f\n\n```\ncontainer = simpy.Container(env, amount, init=init_amount)\nyield container.put(amount)\nyield container.get(amount)\n```\n\u306e\u95a2\u6570\u7fa4\u3067\u3059\u3002\u4e0a\u304b\u3089\u9806\u306b\u5909\u6570\u5ba3\u8a00\u3001container\u3078\u306e\u88dc\u5145\u3001container\u304b\u3089\u306e\u53d6\u5f97\u3067\u3059\u3002\u6ce8\u610f\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u306fcontainer\u306e\u9650\u754c\u3092\u8d85\u3048\u308b\u6ce8\u5165\u306f\u30a8\u30e9\u30fc\u3092\u306f\u304b\u305a\u306b\u30b9\u30eb\u30fc\u3055\u308c\u3001amount = 0\u306e\u6642\u306f\u30a8\u30e9\u30fc\u3092\u306f\u3044\u3066\u3057\u307e\u3046\u3053\u3068\u3067\u3059\u3002\n\u3061\u306a\u307f\u306bsimpy\u306fenv\u74b0\u5883\u3067\u4f5c\u3063\u305fContainer\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u305d\u306eenv\u74b0\u5883\u3067\u306f\u5171\u901a\u306b\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u3067\u3059\u304cresource\u3068\u306f\u4f55\u4e00\u3064\u7d50\u3073\u3064\u3044\u3066\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u3066\u4e0b\u3055\u3044\u3002\u4eca\u56de\u3067\u306f\n\n```\nfuel_pump = simpy.Container(env, GAS_STATION_SIZE, init=GAS_STATION_SIZE)\n```\n\n\u3067\u9650\u754c\u5024\u304cGAS_STATION\u3067\u521d\u671f\u5024\u304cGAS_STATION_SIZE\u306e\u30ac\u30bd\u30ea\u30f3\u3092\u84c4\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u71c3\u6599\u30bf\u30f3\u30af\u3092\u4f5c\u308a\u307e\u3059\u3088\u3068\u5ba3\u8a00\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u3057\u3066\u3053\u306e\u30b3\u30fc\u30c9\u3067\u306ftank_truck\u3067fuel_pump.put\u95a2\u6570\u3067\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\u3057\u3066\n\n```\n        # \u305d\u306e\u8eca\u306e\u30ac\u30bd\u30ea\u30f3\u304c\u6e80\u30bf\u30f3\u306b\u306a\u308b\u3088\u3046\u306b\u5bb9\u91cf\u3092\u8a2d\u5b9a\u3057\u3066\u8eca\u306b\u30ac\u30bd\u30ea\u30f3\u3092\u88dc\u5145\n        # \u305f\u3060\u3057\u71c3\u6599\u304c\u30ac\u30bd\u30ea\u30f3\u30b9\u30bf\u30f3\u30c9\u306b\u306a\u3044\u5834\u5408\u306f\u30ac\u30bd\u30ea\u30f3\u304c\u624b\u306b\u5165\u308b\u307e\u3067\u5f85\u3064\u3002\n        liters_required = FUEL_TANK_SIZE - fuel_tank_level\n        yield fuel_pump.get(liters_required)\n\n```\n\n\u306e\u90e8\u5206\u3067\u30ac\u30bd\u30ea\u30f3\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u90e8\u5206\u3067\u306eyield fuel_pump.get\u95a2\u6570\u306e\u3075\u308b\u307e\u3044\u306f\u30ac\u30bd\u30ea\u30f3\u304c\u53d6\u5f97\u3067\u304d\u308b\u307e\u3067\u5f85\u3063\u3066\u304b\u3089\u30ac\u30bd\u30ea\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\u7c21\u5358\u3067\u3059\u306d\u3002\n\u3053\u306e\u3088\u3046\u306bsimpy\u306f\u7c21\u5358\u306b\u88dc\u5145\u3057\u305f\u308a\u53d6\u5f97\u3057\u305f\u308a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n# Container\u30af\u30e9\u30b9\u306e\u8ffd\u8a18\n\u91cd\u8981\u306a\u5909\u6570\u306e\u8aac\u660e\u3092\u5fd8\u308c\u3066\u3044\u305f\u306e\u3067\u3053\u3053\u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\nContainer\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306flevel\u5909\u6570\u3068capacity\u5909\u6570\u3092\u6301\u3061\u307e\u3059\u3002\u3053\u306e\u5909\u6570\u306f\u9806\u306b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u4fdd\u6709\u3059\u308b\u91cf\u3001\u4fdd\u6709\u3067\u304d\u308b\u9650\u754c\u306e\u91cf\u3092\u8868\u3057\u307e\u3059\u3002\u4eca\u56de\u306e2\u3064\u76ee\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u3082\u3053\u306e\u5909\u6570\u3067\u5834\u5408\u5206\u3051\u3092\u3057\u3066\u30c8\u30e9\u30c3\u30af\u3092\u547c\u3093\u3060\u308a\u3057\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u5b9f\u306fResource\u30af\u30e9\u30b9\u3067\u3082\u4eca\u3069\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u3063\u3066\u3044\u308b\u304b\u306e\u756a\u53f7\u3092\u5909\u6570\u3068\u3057\u3066\u4fdd\u6301\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3088\u304f\u6319\u52d5\u304c\u308f\u304b\u3063\u3066\u306a\u3044\u306e\u3067\u3053\u3053\u3067\u306f\u8aac\u660e\u3057\u307e\u305b\u3093\u3002\n# \u6b21\u56de\u4e88\u544a\n\u3053\u308c\u307e\u3067\u306e\u96d1\u306a\u89e3\u8aac\u306e\u7dcf\u96c6\u7de8\u3068\u3057\u3066\u81ea\u4f5c\u3057\u305f\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u8aad\u3093\u3067\u7406\u89e3\u3067\u304d\u305f\u4eba\u306f\u3059\u3050\u306b\u7406\u89e3\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n[\u305d\u306e\uff13](http://qiita.com/ogata-k/items/7f72ae71b07de3f1ce52#%E3%81%BE%E3%81%A8%E3%82%81)\u304c\u3067\u304d\u307e\u3057\u305f\u3002\n"}