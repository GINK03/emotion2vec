{"tags": ["3GPI", "BME280", "Raspberrypi3", "AzureIoTHub"], "context": "Raspberry Pi 3\u306b3GPI(Raspberry Pi\u5411\u30513G\u901a\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb)\u3092\u63a5\u7d9a\u3057\u3001\u74b0\u5883\u30bb\u30f3\u30b5\u30e2\u30b8\u30e5\u30fc\u30eb\u300cBME280\u300d\u306e\u74b0\u5883\uff08\u6e29\u6e7f\u5ea6\u30fb\u6c17\u5727\uff09\u30c7\u30fc\u30bf\u3092\u3001HTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u7528\u3044\u3066Azure IoT Hub\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002Raspberry Pi 3\u306b\u5b9f\u88c5\u3055\u308c\u308bAzure IoT Hub\u7528\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001Microsoft Azure IoT device SDK for C\u3092\u4f7f\u7528\u3057\u307e\u3059\u30023GPI\u306f\u3001Azure IoT Certified device  \u3092\u53d6\u5f97\u3057\u3066\u304a\u308a\u3001\u540c\u68b1\u3055\u308c\u3066\u3044\u308b\u63a5\u7d9a\u8a2d\u5b9a\u6e08Raspbian\u5165microSD\u30ab\u30fc\u30c9\u306b\u3088\u308a\u3001Raspberry Pi 3\u3092\u8d77\u52d5\u3059\u308b\u3068\u30013GPI\u3092\u4f7f\u7528\u3057\u3066PPP\u63a5\u7d9a\u304c\u53ef\u80fd\u3068\u306a\u308a\u3001Microsoft Azure IoT device SDK for C\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001Azure IoT Hub\u306b\u63a5\u7d9a\u53ef\u80fd\u306a\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u958b\u767a\u3067\u304d\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u307e\u3059\u3002Microsoft Azure\u3001Device\u3001Windows PC\u9593\u306e\u63a5\u7d9a\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\n\n3GPI\u306f\u3001Raspberry Pi\u5c02\u7528\u306b\u958b\u767a\u3055\u308c\u305f3G\u901a\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3001\u643a\u5e2f\u96fb\u8a71\u7db2\u3067\u901a\u4fe1\u3059\u308b\u305f\u3081\u3001\u56fd\u5185\u306e\u307b\u307c\u5168\u57df\u3067\u4f7f\u7528\u3067\u304d\u307e\u3059\u30023GPI\u306eSIM\u30ab\u30fc\u30c9\u306b\u3001\u4eca\u56de\u306fIoT\u5411\u304d\u306e\u5f93\u91cf\u8ab2\u91d1\u306eSORACOM Air\u3092\u5229\u7528\u3057\u307e\u3059\u30023GPI\u306bSORACOM Air\u306eSIM\u30ab\u30fc\u30c9\u3092\u633f\u5165\u3059\u308b\u3068\u3001\u81ea\u52d5\u7684\u306bPPP\u63a5\u7d9a\u306b\u3088\u308aIP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3001\u7c21\u5358\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3078\u306e\u63a5\u7d9a\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\nAzure IoT Hub \u3078\u306f\u30013GPI\u3092\u4f7f\u7528\u3057\u3066\u63a5\u7d9a\u3057\u307e\u3059\u3002IoT Hub\u306f\u3042\u3089\u304b\u3058\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002BME280\u304b\u3089\u306e\u74b0\u5883\u30c7\u30fc\u30bf\u306f\u3001HTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u3088\u308a3GPI\u304b\u3089IoT Hub\u306b\u8ee2\u9001\u3057\u3001DeviceExplorer\u306b\u8868\u793a\u3057\u307e\u3059\u3002\u306a\u304aDeviceExplorer\u306b\u306f\u3001\u4f5c\u6210\u3057\u305fIoT Hub\u3092\u3042\u3089\u304b\u3058\u3081\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nRaspberry Pi 3\u30683GPI\u3068BME280\u306e\u63a5\u7d9a\n\n\u6b21\u306e\u3088\u3046\u306bRaspberry Pi 3\u306b3GPI\u3092\u63a5\u7d9a\u3057\u3001BME280\u3092I2C\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u63a5\u7d9a\u3057\u307e\u3059\u3002Raspberry Pi 3\u30683GPI\u306f40\u672c\u306e\u30d4\u30f3\u3067\u63a5\u7d9a\u3057\u3001USB\u30b1\u30fc\u30d6\u30eb\u3067\u63a5\u7d9a\u3057\u307e\u3059\u30023GPI\u306f\u6a19\u6e96SIM\u30b5\u30a4\u30ba\u306e\u305f\u3081\u3001\u30ca\u30ceSIM\u306e\u5834\u5408\u3001\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4ed8\u3051\u3066\u88c5\u7740\u3057\u307e\u3059\u3002\u4ed8\u5c5e\u3057\u3066\u3044\u308bAC\u30a2\u30c0\u30d7\u30bf\u3092\uff13GPI\u306b\u63a5\u7d9a\u3059\u308c\u3070\u3001Raspberry Pi\u672c\u4f53\u306b\u3082\u96fb\u6e90\u304c\u4f9b\u7d66\u3055\u308c\u307e\u3059\u3002BME280\u306f\u30013GPI\u306e\u30dc\u30fc\u30c9\u4e0a\u304b\u3089\u51fa\u3066\u3044\u308bI2C\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u7528\u306epin\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\u3053\u306epin\u306fRaspberry Pi\u306e40\u672c\u306epin\u3068\u540c\u3058\u63a5\u7d9a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u300c3GPi on Raspberry Pi 2 + SORACOM Air SIM\u3067\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3059\u308b\u300d\u3084\u300cRaspberryPi 1 Model B \u30673GPI\u3092\u4f7f\u3046\u306b\u306f\u30cb\u30c3\u30d1\u30fc\u304c\u5fc5\u8981\u3060\u3063\u3066\u8a71\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n3GPI\u304c\u3001Raspberry Pi 3\u306b\u6b63\u5e38\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u30023GPI\u306f\u3001USB\u30c7\u30d0\u30a4\u30b9\u300cttyUSB3\u300d\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n# nmcli c\nNAME              UUID                                  TYPE     DEVICE  \ngsm-3gpi-iij      38298e50-ec1f-4ebf-81cf-dd1d35e3acf0  gsm      --      \ngsm-3gpi-soracom  9c14b0aa-0cb8-4b08-8c02-08c73b95cabd  gsm      ttyUSB3 \nsoracom3g         6a3d9e17-e66e-427e-9050-752d3b54283c  gsm      --      \nppp0              5949063a-1e06-464b-816e-1ff055dd68d0  generic  ppp0    \nsoracom3g         7498c543-444b-451d-b66d-d636311476f3  gsm      --      \n\n\u307e\u305fBME280\u304c\u3001Raspberry Pi 3\u306b\u6b63\u5e38\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002I2C\u306e\u30dd\u30fc\u30c8\u304c\u3001\u300c76\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n# i2cdetect -y 1\n     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f\n00:          -- -- -- -- -- -- -- -- -- -- -- -- -- \n10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n70: -- -- -- -- -- -- 76 --                         \n\n\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001PPP\u63a5\u7d9a\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002ppp0\u306b\u300c10.180.248.128\u300d\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n# ifconfig\neth0      Link encap:Ethernet  HWaddr b8:27:eb:84:4a:ba  \n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\nppp0      Link encap:Point-to-Point Protocol  \n          inet addr:10.180.248.128  P-t-P:10.64.64.64  Mask:255.255.255.255\n          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1\n          RX packets:144 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:188 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:3 \n          RX bytes:11464 (11.1 KiB)  TX bytes:13737 (13.4 KiB)\n\nwlan0     Link encap:Ethernet  HWaddr b8:27:eb:d1:1f:ef  \n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\n          RX packets:47 errors:0 dropped:47 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:18732 (18.2 KiB)  TX bytes:0 (0.0 B)\n\n\n\u5404\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306f\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306b\u3088\u308a\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3001\u53d6\u5f97\u3057\u3066\u307e\u3059\u3002\n\n\nAzure IoT device SDK\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\n\nAzure IoT device SDK\u3092Raspberry Pi 3\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066\u3001\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001HTTP\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u306f\u3002\u5168\u3066root\u6a29\u9650\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\u306a\u304a\u3001HTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u3088\u308a\u3001IoT Hub\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u3001\u5fc5\u8981\u3068\u306a\u308bHTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u7528\u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u306e\u7de8\u96c6\u3068\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3064\u3044\u3066\u306f\u3001\u9805\u76ee\u300cAzure IoT Hub\u3078\u306e\u63a5\u7d9a\u306e\u305f\u3081\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\u300d\u306b\u8a73\u7d30\u3092\u793a\u3057\u307e\u3059\u3002\n\u6700\u521d\u306b\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001Raspberry Pi\u306bAzure IoT device SDK\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n# git clone --recursive https://github.com/Azure/azure-iot-sdks.git\n\n\u30d5\u30a9\u30eb\u30c0\u300c./azure-iot-sdks\u300d\u306bSDK\u304c\u30b3\u30d4\u30fc\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u300cazure-iot-sdks\u300d\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n# cd azure-iot-sdks\n\n\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u8ffd\u52a0\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u554f\u3044\u5408\u308f\u305b\u306b\u306f\u3001\u5168\u3066\u300cy\u300d\u3068\u7b54\u3048\u307e\u3059\u3002\n# sudo c/build_all/linux/setup.sh\n\n\u9805\u76ee\u300cAzure IoT Hub\u3078\u306e\u63a5\u7d9a\u306e\u305f\u3081\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\u300d\u306b\u5f93\u3063\u3066\u3001IoT Hub\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306eHTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u7528\u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7de8\u96c6\u3068\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4fee\u6b63\u3057\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n# ./c/build_all/linux/build.sh\n\nHTTP\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u300ciothub_client_sample_http\u300d\u304c\u3001\u6b21\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30d3\u30eb\u30c9\u306f\u6210\u529f\u3067\u3059\u3002\n# ls /root/cmake/iothub_client/samples/iothub_client_sample_http\n\n\nAzure IoT Hub\u3078\u306e\u63a5\u7d9a\u306e\u305f\u3081\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u524d\u306b\u3001\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u306e\u57cb\u3081\u8fbc\u307f\u3068\u3001BME280\u304b\u3089\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u3092\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u7de8\u96c6\u3059\u308b\u305f\u3081\u306b\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u3001\u30bb\u30f3\u30b5\u60c5\u5831\u3092\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u7de8\u96c6\u3059\u308b\u30ed\u30b8\u30c3\u30af\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3078\u306e\u63a5\u7d9a\u6587\u5b57\u5217\u306e\u57cb\u3081\u8fbc\u307f\n\n\u30d5\u30a1\u30a4\u30eb\u300c./c/iothub_client/samples/iothub_client_sample_http/iothub_client_sample_http.c\u300d\u3092\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u304d\u3001\u30c7\u30fc\u30bf\u5b9a\u7fa9\u90e8\u5206\u306e\u6b21\u306b\u793a\u3059\u30b3\u30fc\u30c9\u300c[device connection string]\u300d\u3092\u3001\u9805\u76ee\u300cDeviceExplorer\u3067\u306eIoT Hub\u306e\u8a2d\u5b9a\u300d\u3067\u53d6\u5f97\u3057\u305fManagement\u30bf\u30d6\u306e\u300cRaspbian3GPI\u300d\u306e\u300cConnectionString\u300d\u3067\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\n                              *\n                              *              \n/*String containing Hostname, Device Id & Device Key in the format:                         */\n/*  \"HostName=<host_name>;DeviceId=<device_id>;SharedAccessKey=<device_key>\"                */\n/*  \"HostName=<host_name>;DeviceId=<device_id>;SharedAccessSignature=<device_sas_token>\"    */\nstatic const char* connectionString = \"[device connection string]\";\n                              *              \n\n\nBME280\u304b\u3089\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u7de8\u96c6\n\n\u74b0\u5883\u30bb\u30f3\u30b5\u30e2\u30b8\u30e5\u30fc\u30eb\u300cBME280\u300d\u304b\u3089\u74b0\u5883\uff08\u6e29\u6e7f\u5ea6\u30fb\u6c17\u5727\uff09\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u53d6\u308a\u3001\u6b21\u306e\u3088\u3046\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\u8a73\u7d30\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001raspberry pi 3\u3067C\u8a00\u8a9e\u306b\u3088\u308b\u74b0\u5883\u30bb\u30f3\u30b5\u30fc\u300cBME280\u300d\u306e\u63a5\u7d9a\u306emain\u95a2\u6570\u306e\u30b3\u30fc\u30c9\u3092\u7de8\u96c6\u3057\u3001\u95a2\u6570\u540d\u3092\u300cbme280_main\u300d\u3001\u623b\u308a\u5024\u3092char*\u3068\u3057\u3066\u3001\u30bb\u30f3\u30b5\u60c5\u5831\u3092json\u5f62\u5f0f\u3067\u7de8\u96c6\u3057\u305f\u6587\u5b57\u5217\u3068\u3057\u307e\u3059\u3002\nvoid bme280_main(char* sensor)\n{\n    unsigned char osrs_t = 1;             //Temperature oversampling x 1\n\n                       *\n                       *\n    hum_act = (double)hum_cal / 1024.0;\n    sprintf(sensor, \"{\\\"TEMP\\\": %.2f,\\\"PRESS\\\": %.2f,\\\"HUM\\\": %.2f}\",temp_act,press_act,hum_act);\n}\n\nAzure IoT Hub \u306b\u9001\u4fe1\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u300c./c/iothub_client/samples/iothub_client_sample_http/iothub_client_sample_http.c\u300d\u306eiothub_client_sample_http_run\u95a2\u6570\u3092\u6b21\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u3066\u3001\u300cbme280_main\u300d\u3092\u7d44\u307f\u8fbc\u307f\u307e\u3059\u3002\n                       *\n                       *\nfor (i = 0; i < MESSAGE_COUNT; i++) \n{\n//                    sprintf_s(msgText, sizeof(msgText), \"{\\\"deviceId\\\": \\\"myFirstDevice\\\",\\\"windSpeed\\\": %.2f}\", avgWindSpeed + (rand() % 4 + 2));\n    bme280_main(msgText);\n    if ((messages[i].messageHandle = IoTHubMessage_CreateFromByteArray((const unsigned char*)msgText, strlen(msgText))) == NULL)\n    {\n        (void)printf(\"ERROR: iotHubMessageHandle is NULL!\\r\\n\");\n    }\n                       *\n\n\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u4f9d\u5b58\u3057\u306a\u3044\u30d3\u30eb\u30c9\u81ea\u52d5\u5316\u306e\u30b3\u30de\u30f3\u30c9\u300cCMake\u300d\u306b\u3088\u308a\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u3082\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30ea\u30f3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u300c./c/iothub_client/samples/iothub_client_sample_http/CMakeLists.txt\u300d\u3092\u6b21\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\u300cbme280.c\u300d\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u5bfe\u8c61\u306b\u3057\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u3001C\u8a00\u8a9e\u30e9\u30a4\u30d6\u30e9\u30ea\u300cwiringPi\u300d\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001target_link_libraries\u95a2\u6570\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u300cwiringPi\u300d\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n                       *\n                       *\nif(WIN32)\n    set(iothub_client_sample_http_c_files ${iothub_client_sample_http_c_files} ./windows/main.c)\nelse()\n    set(iothub_client_sample_http_c_files ${iothub_client_sample_http_c_files} bme280.c ./linux/main.c)\nendif()\n\n                       *\n\ntarget_link_libraries(iothub_client_sample_http \n#iothubclient is here only because locking... in gballoc no less.\n    iothub_client\n    iothub_client_http_transport\n    wiringPi\n)\n                       *\n\n\nAzure IoT Hub\u306e\u4f5c\u6210\u30fb\u767b\u9332\n\n\u3042\u3089\u304b\u3058\u3081\u4f5c\u6210\u3057\u3066\u304a\u3044\u305fMicrosoft\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7528\u3044\u3066\u3001Azure \u30dd\u30fc\u30bf\u30eb\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002IoT Hub\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f\u3001\u5de6\u5074\u30e1\u30cb\u30e5\u30fc\u3088\u308a\u300c\u65b0\u898f\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u300cAzure IoT Hub\u300d\u3092\u9078\u629e\u3057\u3001\u5fc5\u8981\u306a\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u4f5c\u6210\u3057\u305fIoT Hub\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u6b21\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\nDeviceExplorer\u3067\u4f7f\u7528\u3059\u308b\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u306f\u3001\u300c\u8a2d\u5b9a\u300d\u3088\u308a\u300c\u5171\u901a\u30a2\u30af\u30bb\u30b9\u30dd\u30ea\u30b7\u30fc\u300d\u3092\u9078\u629e\u3057\u3001\u300ciothubowner\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u300d\u306b\u8868\u793a\u3055\u308c\u308b\u5185\u5bb9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nDeviceExplorer\u3067\u306eIoT Hub\u306e\u8a2d\u5b9a\n\n\u300cAzure IoT Hu\uff42\u3067DeviceExplorer\u306e\u4f7f\u7528\u65b9\u6cd5 \u300d\u306b\u5f93\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fDeviceExplorer\u3092\u5b9f\u884c\u3057\u3066\u3001Configuration\u30bf\u30d6\u306e\u300cIoT Hub Connection String\u300d\u306b\u9805\u76ee\u300cAzure IoT Hub\u306e\u4f5c\u6210\u30fb\u767b\u9332\u300d\u3067\u53d6\u5f97\u3057\u305f\u300c\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u300d\u3092\u8a2d\u5b9a\u3057\u3066\u3001Update\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u300cShared Access Signature\u300d\u306bKey Name\u3084Value\u306e\u5024\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u6b21\u306b\u3001Management\u30bf\u30d6\u3092\u9078\u629e\u3057\u3066Create\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3001\u300cDevice ID\u300d\u306b\u9069\u5f53\u306a\u540d\u524d\u3092\u5165\u308c\u3066Create\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u300cDevices\u300d\u306b\u30c7\u30d0\u30a4\u30b9\u304c\u65b0\u898f\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\u4eca\u56de\u306fDevice ID\u3092\u300cRaspbian3GPI\u300d\u306b\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u751f\u6210\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e\u4e00\u90e8\u300cConnectionString\u300d\u3092\u3001\u9805\u76ee\u300c\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3078\u306e\u63a5\u7d9a\u6587\u5b57\u5217\u306e\u57cb\u3081\u8fbc\u307f\u300d\u3067\u793a\u3059\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u300cdevice connection string\u300d\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\nAzure IoT Hub \u3078\u306e\u74b0\u5883\u30c7\u30fc\u30bf\u306e\u9001\u4fe1\n\nRaspberry Pi 3\u304c\u3001BME280\u304b\u3089\u74b0\u5883\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001SORACOM Air\u3092\u5229\u7528\u3057\u305f3GPI\u3092\u7d4c\u7531\u3057\u3066\u3001Azure IoT Hub\u306b\u74b0\u5883\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3057\u3001DeviceExplorer\u306b\u8868\u793a\u3057\u307e\u3059\u3002\n\u6700\u521d\u306bAzure \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u4f5c\u6210\u3057\u305fIoT Hub\u3092\u8d77\u52d5\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u6b21\u306bDeviceExplore\u306eData\u30bf\u30d6\u3092\u9078\u629e\u3057\u3001Monitor\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002\u305d\u3057\u3066Raspberry Pi 3\u304b\u3089\u3001\u4f5c\u6210\u3057\u305fHTTP\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n# ./cmake/iothub_client/samples/iothub_client_sample_http/iothub_client_sample_http\n\nDeviceExplorer\u306eData\u30bf\u30d6\u306b\u3001\u53d7\u4fe1\u3057\u305f\u74b0\u5883\u30c7\u30fc\u30bf\u304c\u6b21\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\nDeviceExplorer\u306eData\u30bf\u30d6\u306eEventHubData\u306b\u8868\u793a\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u3001\u6b21\u306b\u793a\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u8a2d\u5b9a\u3057\u305fBME280\u304b\u3089\u306e\u74b0\u5883\u30c7\u30fc\u30bf\u306e\u4ed6\u306b\u3001\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304a\u3088\u3073Device ID\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nReceiving events...\n2016/05/21 3:22:52> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.41,\"PRESS\": 1306.69,\"HUM\": 54.36}]Properties:\n'PropName': 'PropMsg_0'\n\n2016/05/21 3:22:53> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.42,\"PRESS\": 1306.28,\"HUM\": 54.34}]Properties:\n'PropName': 'PropMsg_1'\n\n2016/05/21 3:22:54> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.40,\"PRESS\": 1307.15,\"HUM\": 54.30}]Properties:\n'PropName': 'PropMsg_2'\n\n2016/05/21 3:22:54> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.41,\"PRESS\": 1306.69,\"HUM\": 54.33}]Properties:\n'PropName': 'PropMsg_3'\n\n2016/05/21 3:22:54> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.42,\"PRESS\": 1306.25,\"HUM\": 54.35}]Properties:\n'PropName': 'PropMsg_4'\n\nRaspberry Pi 3\u3067\u51fa\u529b\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\u30025\u500b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8ee2\u9001\u3055\u308c\u3001\u3044\u305a\u308c\u3082\u9001\u4fe1\u7d50\u679c\u304cOK\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nStarting the IoTHub client sample HTTP...\n\nInfo: IoT Hub SDK for C, version 1.0.6\n\nIoTHubClient_LL_SetMessageCallback...successful.\n\nIoTHubClient_LL_SendEventAsync accepted message [0] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [1] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [2] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [3] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [4] for transmission to IoT Hub.\n\nConfirmation[0] received for message tracking id = 0 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[1] received for message tracking id = 1 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[2] received for message tracking id = 2 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[3] received for message tracking id = 3 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[4] received for message tracking id = 4 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\n^C\n#\n\n\nRaspberry Pi 3\u306e\u51fa\u529b\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u4fdd\u5b58\u3057\u305f\u5b9f\u884c\u30ed\u30b0\u306f\u3001script\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\nAzure IoT Hub\u3067\u30c7\u30fc\u30bf\u306e\u9001\u4fe1\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306b5\u500b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\n\u53c2\u7167URL\n\n\n\nRun a simple C sample on Raspberry Pi 2 device running Raspbian\nRaspberry Pi\u4e0a\u3067Microsoft Azure IoT device SDK for C\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u30fb\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\n\nAzure IoT Hub\u3092\u4f7f\u3063\u3066\u307f\u305f \nAzure IoT Hub\u306e\u4f5c\u6210\u30fb\u767b\u9332\u304a\u3088\u3073DeviceExplorer\u3067\u306eIoT Hub\u306e\u8a2d\u5b9a\u65b9\u6cd5\n\nRaspberry Pi 3\u306b[3GPI(Raspberry Pi\u5411\u30513G\u901a\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb)](http://www.mechatrax.com/products/3gpi)\u3092\u63a5\u7d9a\u3057\u3001\u74b0\u5883\u30bb\u30f3\u30b5\u30e2\u30b8\u30e5\u30fc\u30eb\u300cBME280\u300d\u306e\u74b0\u5883\uff08\u6e29\u6e7f\u5ea6\u30fb\u6c17\u5727\uff09\u30c7\u30fc\u30bf\u3092\u3001HTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u7528\u3044\u3066Azure IoT Hub\u306b\u9001\u4fe1\u3057\u307e\u3059\u3002Raspberry Pi 3\u306b\u5b9f\u88c5\u3055\u308c\u308bAzure IoT Hub\u7528\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001[Microsoft Azure IoT device SDK for C](https://azure.microsoft.com/ja-jp/documentation/articles/iot-hub-device-sdk-c-intro/)\u3092\u4f7f\u7528\u3057\u307e\u3059\u30023GPI\u306f\u3001[Azure IoT Certified device](https://azure.microsoft.com/ja-jp/documentation/articles/iot-hub-tested-configurations/)  \u3092\u53d6\u5f97\u3057\u3066\u304a\u308a\u3001\u540c\u68b1\u3055\u308c\u3066\u3044\u308b\u63a5\u7d9a\u8a2d\u5b9a\u6e08Raspbian\u5165microSD\u30ab\u30fc\u30c9\u306b\u3088\u308a\u3001Raspberry Pi 3\u3092\u8d77\u52d5\u3059\u308b\u3068\u30013GPI\u3092\u4f7f\u7528\u3057\u3066PPP\u63a5\u7d9a\u304c\u53ef\u80fd\u3068\u306a\u308a\u3001Microsoft Azure IoT device SDK for C\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001Azure IoT Hub\u306b\u63a5\u7d9a\u53ef\u80fd\u306a\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u958b\u767a\u3067\u304d\u308b\u3053\u3068\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u307e\u3059\u3002Microsoft Azure\u3001Device\u3001Windows PC\u9593\u306e\u63a5\u7d9a\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\n\n<div align=\"center\" \"><img src=\"https://qiita-image-store.s3.amazonaws.com/0/124811/c2a48255-93c9-0125-fefc-8b323d54bb7d.jpeg\"></div>\n\n3GPI\u306f\u3001Raspberry Pi\u5c02\u7528\u306b\u958b\u767a\u3055\u308c\u305f3G\u901a\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3001\u643a\u5e2f\u96fb\u8a71\u7db2\u3067\u901a\u4fe1\u3059\u308b\u305f\u3081\u3001\u56fd\u5185\u306e\u307b\u307c\u5168\u57df\u3067\u4f7f\u7528\u3067\u304d\u307e\u3059\u30023GPI\u306eSIM\u30ab\u30fc\u30c9\u306b\u3001\u4eca\u56de\u306fIoT\u5411\u304d\u306e\u5f93\u91cf\u8ab2\u91d1\u306eSORACOM Air\u3092\u5229\u7528\u3057\u307e\u3059\u30023GPI\u306bSORACOM Air\u306eSIM\u30ab\u30fc\u30c9\u3092\u633f\u5165\u3059\u308b\u3068\u3001\u81ea\u52d5\u7684\u306bPPP\u63a5\u7d9a\u306b\u3088\u308aIP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3001\u7c21\u5358\u306b\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3078\u306e\u63a5\u7d9a\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\n\nAzure IoT Hub \u3078\u306f\u30013GPI\u3092\u4f7f\u7528\u3057\u3066\u63a5\u7d9a\u3057\u307e\u3059\u3002IoT Hub\u306f\u3042\u3089\u304b\u3058\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002BME280\u304b\u3089\u306e\u74b0\u5883\u30c7\u30fc\u30bf\u306f\u3001HTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u3088\u308a3GPI\u304b\u3089IoT Hub\u306b\u8ee2\u9001\u3057\u3001DeviceExplorer\u306b\u8868\u793a\u3057\u307e\u3059\u3002\u306a\u304aDeviceExplorer\u306b\u306f\u3001\u4f5c\u6210\u3057\u305fIoT Hub\u3092\u3042\u3089\u304b\u3058\u3081\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n#_Raspberry Pi 3\u30683GPI\u3068BME280\u306e\u63a5\u7d9a_\n\u6b21\u306e\u3088\u3046\u306bRaspberry Pi 3\u306b3GPI\u3092\u63a5\u7d9a\u3057\u3001BME280\u3092I<Sup>2</Sup>C\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u63a5\u7d9a\u3057\u307e\u3059\u3002Raspberry Pi 3\u30683GPI\u306f40\u672c\u306e\u30d4\u30f3\u3067\u63a5\u7d9a\u3057\u3001USB\u30b1\u30fc\u30d6\u30eb\u3067\u63a5\u7d9a\u3057\u307e\u3059\u30023GPI\u306f\u6a19\u6e96SIM\u30b5\u30a4\u30ba\u306e\u305f\u3081\u3001\u30ca\u30ceSIM\u306e\u5834\u5408\u3001\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4ed8\u3051\u3066\u88c5\u7740\u3057\u307e\u3059\u3002\u4ed8\u5c5e\u3057\u3066\u3044\u308bAC\u30a2\u30c0\u30d7\u30bf\u3092\uff13GPI\u306b\u63a5\u7d9a\u3059\u308c\u3070\u3001Raspberry Pi\u672c\u4f53\u306b\u3082\u96fb\u6e90\u304c\u4f9b\u7d66\u3055\u308c\u307e\u3059\u3002BME280\u306f\u30013GPI\u306e\u30dc\u30fc\u30c9\u4e0a\u304b\u3089\u51fa\u3066\u3044\u308bI<Sup>2</Sup>C\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u7528\u306epin\u306b\u63a5\u7d9a\u3057\u307e\u3059\u3002\u3053\u306epin\u306fRaspberry Pi\u306e40\u672c\u306epin\u3068\u540c\u3058\u63a5\u7d9a\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u300c[3GPi on Raspberry Pi 2 + SORACOM Air SIM\u3067\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3059\u308b](http://dev.classmethod.jp/cloud/3gpi-raspberry-pi2-sim/)\u300d\u3084\u300c[RaspberryPi 1 Model B \u30673GPI\u3092\u4f7f\u3046\u306b\u306f\u30cb\u30c3\u30d1\u30fc\u304c\u5fc5\u8981\u3060\u3063\u3066\u8a71](http://qiita.com/sgrowd/items/7050ce8ea5baf850ab36)\u300d\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002<br>\n<div align=\"center\" \"><img src=\"https://qiita-image-store.s3.amazonaws.com/0/124811/baef398b-5cc0-c315-e83e-4b62dfbfe6ec.jpeg\"></div>\n\n3GPI\u304c\u3001Raspberry Pi 3\u306b\u6b63\u5e38\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u30023GPI\u306f\u3001USB\u30c7\u30d0\u30a4\u30b9\u300cttyUSB3\u300d\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n# nmcli c\nNAME              UUID                                  TYPE     DEVICE  \ngsm-3gpi-iij      38298e50-ec1f-4ebf-81cf-dd1d35e3acf0  gsm      --      \ngsm-3gpi-soracom  9c14b0aa-0cb8-4b08-8c02-08c73b95cabd  gsm      ttyUSB3 \nsoracom3g         6a3d9e17-e66e-427e-9050-752d3b54283c  gsm      --      \nppp0              5949063a-1e06-464b-816e-1ff055dd68d0  generic  ppp0    \nsoracom3g         7498c543-444b-451d-b66d-d636311476f3  gsm      --      \n```\n\n\u307e\u305fBME280\u304c\u3001Raspberry Pi 3\u306b\u6b63\u5e38\u306b\u63a5\u7d9a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002I<Sup>2</Sup>C\u306e\u30dd\u30fc\u30c8\u304c\u3001\u300c76\u300d\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n# i2cdetect -y 1\n     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f\n00:          -- -- -- -- -- -- -- -- -- -- -- -- -- \n10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- \n70: -- -- -- -- -- -- 76 --                         \n```\n\n\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001PPP\u63a5\u7d9a\u306bIP\u30a2\u30c9\u30ec\u30b9\u304c\u5272\u308a\u632f\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002ppp0\u306b\u300c```10.180.248.128```\u300d\u304c\u5272\u308a\u5f53\u3066\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n# ifconfig\neth0      Link encap:Ethernet  HWaddr b8:27:eb:84:4a:ba  \n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:0 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:0 \n          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)\n\nppp0      Link encap:Point-to-Point Protocol  \n          inet addr:10.180.248.128  P-t-P:10.64.64.64  Mask:255.255.255.255\n          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1\n          RX packets:144 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:188 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:3 \n          RX bytes:11464 (11.1 KiB)  TX bytes:13737 (13.4 KiB)\n\nwlan0     Link encap:Ethernet  HWaddr b8:27:eb:d1:1f:ef  \n          UP BROADCAST MULTICAST  MTU:1500  Metric:1\n          RX packets:47 errors:0 dropped:47 overruns:0 frame:0\n          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:18732 (18.2 KiB)  TX bytes:0 (0.0 B)\n```\n>\u5404\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u306f\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306b\u3088\u308a\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u3001\u53d6\u5f97\u3057\u3066\u307e\u3059\u3002\n\n#_Azure IoT device SDK\u306e\u30b3\u30f3\u30d1\u30a4\u30eb_\nAzure IoT device SDK\u3092Raspberry Pi 3\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3057\u3066\u3001\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001HTTP\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u306f\u3002\u5168\u3066root\u6a29\u9650\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\u306a\u304a\u3001HTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u306b\u3088\u308a\u3001IoT Hub\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306b\u3001\u5fc5\u8981\u3068\u306a\u308bHTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u7528\u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u306e\u7de8\u96c6\u3068\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3064\u3044\u3066\u306f\u3001\u9805\u76ee\u300cAzure IoT Hub\u3078\u306e\u63a5\u7d9a\u306e\u305f\u3081\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\u300d\u306b\u8a73\u7d30\u3092\u793a\u3057\u307e\u3059\u3002\n\n\u6700\u521d\u306b\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001Raspberry Pi\u306bAzure IoT device SDK\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\n```\n# git clone --recursive https://github.com/Azure/azure-iot-sdks.git\n```\n\n\u30d5\u30a9\u30eb\u30c0\u300c./azure-iot-sdks\u300d\u306bSDK\u304c\u30b3\u30d4\u30fc\u3055\u308c\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u300cazure-iot-sdks\u300d\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n```\n# cd azure-iot-sdks\n```\n\n\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a\u8ffd\u52a0\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u554f\u3044\u5408\u308f\u305b\u306b\u306f\u3001\u5168\u3066\u300cy\u300d\u3068\u7b54\u3048\u307e\u3059\u3002\n\n```\n# sudo c/build_all/linux/setup.sh\n```\n\n\u9805\u76ee\u300cAzure IoT Hub\u3078\u306e\u63a5\u7d9a\u306e\u305f\u3081\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63\u300d\u306b\u5f93\u3063\u3066\u3001IoT Hub\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306eHTTPS\u30d7\u30ed\u30c8\u30b3\u30eb\u7528\u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u7de8\u96c6\u3068\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4fee\u6b63\u3057\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\n```\n# ./c/build_all/linux/build.sh\n```\n\nHTTP\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u300ciothub_client_sample_http\u300d\u304c\u3001\u6b21\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30d3\u30eb\u30c9\u306f\u6210\u529f\u3067\u3059\u3002\n\n```\n# ls /root/cmake/iothub_client/samples/iothub_client_sample_http\n```\n\n#_Azure IoT Hub\u3078\u306e\u63a5\u7d9a\u306e\u305f\u3081\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306e\u4fee\u6b63_\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\u524d\u306b\u3001\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u306e\u57cb\u3081\u8fbc\u307f\u3068\u3001BME280\u304b\u3089\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u3092\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u7de8\u96c6\u3059\u308b\u305f\u3081\u306b\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u3001\u30bb\u30f3\u30b5\u60c5\u5831\u3092\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u7de8\u96c6\u3059\u308b\u30ed\u30b8\u30c3\u30af\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n##_\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3078\u306e\u63a5\u7d9a\u6587\u5b57\u5217\u306e\u57cb\u3081\u8fbc\u307f_\n\u30d5\u30a1\u30a4\u30eb\u300c./c/iothub_client/samples/iothub_client_sample_http/iothub_client_sample_http.c\u300d\u3092\u30a8\u30c7\u30a3\u30bf\u3067\u958b\u304d\u3001\u30c7\u30fc\u30bf\u5b9a\u7fa9\u90e8\u5206\u306e\u6b21\u306b\u793a\u3059\u30b3\u30fc\u30c9\u300c[device connection string]\u300d\u3092\u3001\u9805\u76ee\u300cDeviceExplorer\u3067\u306eIoT Hub\u306e\u8a2d\u5b9a\u300d\u3067\u53d6\u5f97\u3057\u305fManagement\u30bf\u30d6\u306e\u300cRaspbian3GPI\u300d\u306e\u300cConnectionString\u300d\u3067\u7f6e\u304d\u63db\u3048\u307e\u3059\u3002\n\n```c\n                              *\n                              *              \n/*String containing Hostname, Device Id & Device Key in the format:                         */\n/*  \"HostName=<host_name>;DeviceId=<device_id>;SharedAccessKey=<device_key>\"                */\n/*  \"HostName=<host_name>;DeviceId=<device_id>;SharedAccessSignature=<device_sas_token>\"    */\nstatic const char* connectionString = \"[device connection string]\";\n                              *              \n```\n\n##_BME280\u304b\u3089\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u7de8\u96c6_\n\u74b0\u5883\u30bb\u30f3\u30b5\u30e2\u30b8\u30e5\u30fc\u30eb\u300cBME280\u300d\u304b\u3089\u74b0\u5883\uff08\u6e29\u6e7f\u5ea6\u30fb\u6c17\u5727\uff09\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u53d6\u308a\u3001\u6b21\u306e\u3088\u3046\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\u8a73\u7d30\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001[raspberry pi 3\u3067C\u8a00\u8a9e\u306b\u3088\u308b\u74b0\u5883\u30bb\u30f3\u30b5\u30fc\u300cBME280\u300d\u306e\u63a5\u7d9a](http://tomosoft.jp/design/?p=6963)\u306emain\u95a2\u6570\u306e\u30b3\u30fc\u30c9\u3092\u7de8\u96c6\u3057\u3001\u95a2\u6570\u540d\u3092\u300cbme280_main\u300d\u3001\u623b\u308a\u5024\u3092char*\u3068\u3057\u3066\u3001\u30bb\u30f3\u30b5\u60c5\u5831\u3092json\u5f62\u5f0f\u3067\u7de8\u96c6\u3057\u305f\u6587\u5b57\u5217\u3068\u3057\u307e\u3059\u3002\n\n```c\nvoid bme280_main(char* sensor)\n{\n    unsigned char osrs_t = 1;             //Temperature oversampling x 1\n\n                       *\n                       *\n\thum_act = (double)hum_cal / 1024.0;\n\tsprintf(sensor, \"{\\\"TEMP\\\": %.2f,\\\"PRESS\\\": %.2f,\\\"HUM\\\": %.2f}\",temp_act,press_act,hum_act);\n}\n```\n\nAzure IoT Hub \u306b\u9001\u4fe1\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u300c./c/iothub_client/samples/iothub_client_sample_http/iothub_client_sample_http.c\u300d\u306eiothub_client_sample_http_run\u95a2\u6570\u3092\u6b21\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u3066\u3001\u300cbme280_main\u300d\u3092\u7d44\u307f\u8fbc\u307f\u307e\u3059\u3002\n\n```c\n                       *\n                       *\nfor (i = 0; i < MESSAGE_COUNT; i++) \n{\n//                    sprintf_s(msgText, sizeof(msgText), \"{\\\"deviceId\\\": \\\"myFirstDevice\\\",\\\"windSpeed\\\": %.2f}\", avgWindSpeed + (rand() % 4 + 2));\n    bme280_main(msgText);\n    if ((messages[i].messageHandle = IoTHubMessage_CreateFromByteArray((const unsigned char*)msgText, strlen(msgText))) == NULL)\n    {\n        (void)printf(\"ERROR: iotHubMessageHandle is NULL!\\r\\n\");\n    }\n                       *\n```\n\n\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u4f9d\u5b58\u3057\u306a\u3044\u30d3\u30eb\u30c9\u81ea\u52d5\u5316\u306e\u30b3\u30de\u30f3\u30c9\u300cCMake\u300d\u306b\u3088\u308a\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u3082\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u30ea\u30f3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u3001\u300c./c/iothub_client/samples/iothub_client_sample_http/CMakeLists.txt\u300d\u3092\u6b21\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\u300cbme280.c\u300d\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u5bfe\u8c61\u306b\u3057\u3001BME280\u7528\u306e\u30bb\u30f3\u30b5\u60c5\u5831\u53ce\u96c6\u30d7\u30ed\u30b0\u30e9\u30e0\u304c\u3001C\u8a00\u8a9e\u30e9\u30a4\u30d6\u30e9\u30ea\u300cwiringPi\u300d\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001target_link_libraries\u95a2\u6570\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u300cwiringPi\u300d\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n                       *\n                       *\nif(WIN32)\n\tset(iothub_client_sample_http_c_files ${iothub_client_sample_http_c_files} ./windows/main.c)\nelse()\n\tset(iothub_client_sample_http_c_files ${iothub_client_sample_http_c_files} bme280.c ./linux/main.c)\nendif()\n\n                       *\n\ntarget_link_libraries(iothub_client_sample_http \n#iothubclient is here only because locking... in gballoc no less.\n\tiothub_client\n\tiothub_client_http_transport\n\twiringPi\n)\n                       *\n```\n\n#_Azure IoT Hub\u306e\u4f5c\u6210\u30fb\u767b\u9332_\n\u3042\u3089\u304b\u3058\u3081\u4f5c\u6210\u3057\u3066\u304a\u3044\u305fMicrosoft\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7528\u3044\u3066\u3001Azure \u30dd\u30fc\u30bf\u30eb\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002IoT Hub\u3092\u4f5c\u6210\u3059\u308b\u306b\u306f\u3001\u5de6\u5074\u30e1\u30cb\u30e5\u30fc\u3088\u308a\u300c\u65b0\u898f\u300d\u3092\u9078\u629e\u3057\u3066\u3001\u300cAzure IoT Hub\u300d\u3092\u9078\u629e\u3057\u3001\u5fc5\u8981\u306a\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u4f5c\u6210\u304c\u5b8c\u4e86\u3059\u308b\u3068\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u4f5c\u6210\u3057\u305fIoT Hub\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u6b21\u306e\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002<br>\n<div align=\"center\" \"><img src=\"https://qiita-image-store.s3.amazonaws.com/0/124811/58904658-25d8-ddfe-ad2c-20103d2c5b1e.jpeg\"></div>\n\nDeviceExplorer\u3067\u4f7f\u7528\u3059\u308b\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u306f\u3001\u300c\u8a2d\u5b9a\u300d\u3088\u308a\u300c\u5171\u901a\u30a2\u30af\u30bb\u30b9\u30dd\u30ea\u30b7\u30fc\u300d\u3092\u9078\u629e\u3057\u3001\u300ciothubowner\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u300c\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u300d\u306b\u8868\u793a\u3055\u308c\u308b\u5185\u5bb9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n#_DeviceExplorer\u3067\u306eIoT Hub\u306e\u8a2d\u5b9a_\n\u300c[Azure IoT Hu\uff42\u3067DeviceExplorer\u306e\u4f7f\u7528\u65b9\u6cd5 ](http://tomosoft.jp/design/?p=7733)\u300d\u306b\u5f93\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fDeviceExplorer\u3092\u5b9f\u884c\u3057\u3066\u3001Configuration\u30bf\u30d6\u306e\u300cIoT Hub Connection String\u300d\u306b\u9805\u76ee\u300cAzure IoT Hub\u306e\u4f5c\u6210\u30fb\u767b\u9332\u300d\u3067\u53d6\u5f97\u3057\u305f\u300c\u30d7\u30e9\u30a4\u30de\u30ea\u30ad\u30fc\u63a5\u7d9a\u6587\u5b57\u5217\u300d\u3092\u8a2d\u5b9a\u3057\u3066\u3001Update\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u300cShared Access Signature\u300d\u306bKey Name\u3084Value\u306e\u5024\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u6b21\u306b\u3001Management\u30bf\u30d6\u3092\u9078\u629e\u3057\u3066Create\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3001\u300cDevice ID\u300d\u306b\u9069\u5f53\u306a\u540d\u524d\u3092\u5165\u308c\u3066Create\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u300cDevices\u300d\u306b\u30c7\u30d0\u30a4\u30b9\u304c\u65b0\u898f\u306b\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\u4eca\u56de\u306fDevice ID\u3092\u300cRaspbian3GPI\u300d\u306b\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u751f\u6210\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e\u4e00\u90e8\u300cConnectionString\u300d\u3092\u3001\u9805\u76ee\u300c\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3078\u306e\u63a5\u7d9a\u6587\u5b57\u5217\u306e\u57cb\u3081\u8fbc\u307f\u300d\u3067\u793a\u3059\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u300cdevice connection string\u300d\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002<br>\n<div align=\"center\" \"><img src=\"https://qiita-image-store.s3.amazonaws.com/0/124811/c1e812fe-74a9-28ce-ac26-48e1f729a24a.jpeg\"></div>\n\n#_Azure IoT Hub \u3078\u306e\u74b0\u5883\u30c7\u30fc\u30bf\u306e\u9001\u4fe1_\nRaspberry Pi 3\u304c\u3001BME280\u304b\u3089\u74b0\u5883\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001SORACOM Air\u3092\u5229\u7528\u3057\u305f3GPI\u3092\u7d4c\u7531\u3057\u3066\u3001Azure IoT Hub\u306b\u74b0\u5883\u30c7\u30fc\u30bf\u3092\u9001\u4fe1\u3057\u3001DeviceExplorer\u306b\u8868\u793a\u3057\u307e\u3059\u3002\n\n\u6700\u521d\u306bAzure \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u4f5c\u6210\u3057\u305fIoT Hub\u3092\u8d77\u52d5\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u6b21\u306bDeviceExplore\u306eData\u30bf\u30d6\u3092\u9078\u629e\u3057\u3001Monitor\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002\u305d\u3057\u3066Raspberry Pi 3\u304b\u3089\u3001\u4f5c\u6210\u3057\u305fHTTP\u30d7\u30ed\u30c8\u30b3\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\n# ./cmake/iothub_client/samples/iothub_client_sample_http/iothub_client_sample_http\n```\n\nDeviceExplorer\u306eData\u30bf\u30d6\u306b\u3001\u53d7\u4fe1\u3057\u305f\u74b0\u5883\u30c7\u30fc\u30bf\u304c\u6b21\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002<br>\n<div align=\"center\" \"><img src=\"https://qiita-image-store.s3.amazonaws.com/0/124811/c98a47ad-8918-0d4f-e261-a17dfa8860c0.jpeg\"></div>\n\nDeviceExplorer\u306eData\u30bf\u30d6\u306eEventHubData\u306b\u8868\u793a\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u3001\u6b21\u306b\u793a\u3057\u307e\u3059\u3002\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u8a2d\u5b9a\u3057\u305fBME280\u304b\u3089\u306e\u74b0\u5883\u30c7\u30fc\u30bf\u306e\u4ed6\u306b\u3001\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u304a\u3088\u3073Device ID\u304c\u4ed8\u4e0e\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\nReceiving events...\n2016/05/21 3:22:52> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.41,\"PRESS\": 1306.69,\"HUM\": 54.36}]Properties:\n'PropName': 'PropMsg_0'\n\n2016/05/21 3:22:53> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.42,\"PRESS\": 1306.28,\"HUM\": 54.34}]Properties:\n'PropName': 'PropMsg_1'\n\n2016/05/21 3:22:54> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.40,\"PRESS\": 1307.15,\"HUM\": 54.30}]Properties:\n'PropName': 'PropMsg_2'\n\n2016/05/21 3:22:54> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.41,\"PRESS\": 1306.69,\"HUM\": 54.33}]Properties:\n'PropName': 'PropMsg_3'\n\n2016/05/21 3:22:54> Device: [Raspbian3GPI], Data:[{\"TEMP\": 21.42,\"PRESS\": 1306.25,\"HUM\": 54.35}]Properties:\n'PropName': 'PropMsg_4'\n```\n\nRaspberry Pi 3\u3067\u51fa\u529b\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\u30025\u500b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u8ee2\u9001\u3055\u308c\u3001\u3044\u305a\u308c\u3082\u9001\u4fe1\u7d50\u679c\u304cOK\u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```\nStarting the IoTHub client sample HTTP...\n\nInfo: IoT Hub SDK for C, version 1.0.6\n\nIoTHubClient_LL_SetMessageCallback...successful.\n\nIoTHubClient_LL_SendEventAsync accepted message [0] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [1] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [2] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [3] for transmission to IoT Hub.\n\nIoTHubClient_LL_SendEventAsync accepted message [4] for transmission to IoT Hub.\n\nConfirmation[0] received for message tracking id = 0 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[1] received for message tracking id = 1 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[2] received for message tracking id = 2 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[3] received for message tracking id = 3 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\nConfirmation[4] received for message tracking id = 4 with result = IOTHUB_CLIENT_CONFIRMATION_OK\n\n^C\n#\n```\n>Raspberry Pi 3\u306e\u51fa\u529b\u3055\u308c\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u4fdd\u5b58\u3057\u305f\u5b9f\u884c\u30ed\u30b0\u306f\u3001script\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\nAzure IoT Hub\u3067\u30c7\u30fc\u30bf\u306e\u9001\u4fe1\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306b5\u500b\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002<br>\n<div align=\"center\" \"><img src=\"https://qiita-image-store.s3.amazonaws.com/0/124811/27319a34-f792-4f33-64ed-175dfe3a5cdb.jpeg\"></div>\n\n#_\u53c2\u7167URL_\n\n1. [Run a simple C sample on Raspberry Pi 2 device running Raspbian](https://github.com/Azure/azure-iot-sdks/blob/master/doc/get_started/raspbian-raspberrypi2-c.md)<br>\nRaspberry Pi\u4e0a\u3067Microsoft Azure IoT device SDK for C\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u30fb\u5b9f\u884c\u3059\u308b\u65b9\u6cd5\n1. [Azure IoT Hub\u3092\u4f7f\u3063\u3066\u307f\u305f](http://qiita.com/linyixian/items/e319c5f63f9e57459ac0) <br>\nAzure IoT Hub\u306e\u4f5c\u6210\u30fb\u767b\u9332\u304a\u3088\u3073DeviceExplorer\u3067\u306eIoT Hub\u306e\u8a2d\u5b9a\u65b9\u6cd5\n"}