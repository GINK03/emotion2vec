{"context": " More than 1 year has passed since last update.\u53c2\u8003:\n\n1\u5186\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c6\u30a3\u30f3\u30b0DigitalOcean\u3092\u3001Vagrant\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\nsmdahlen/vagrant-digitalocean\nVagrant Fabric\u3067\u7c21\u5358\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\n\n\n\u4f5c\u6210\u3059\u308b\u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u306e\u30b9\u30da\u30c3\u30af\n\u30a4\u30e1\u30fc\u30b8: Arch Linux 2013.05 x64\n\u30ea\u30fc\u30b8\u30e7\u30f3: Singapore 1\n\u30b5\u30a4\u30ba: 512MB\n\n\u30d5\u30a1\u30a4\u30eb\nVagrantfile\nVagrant.configure('2') do |config|\n\n  config.vm.provider :digital_ocean do |provider, override|\n    override.ssh.private_key_path = '~/.ssh/digitalocean_vagrant'\n    override.vm.box = 'digital_ocean'\n    override.vm.box_url = \"https://github.com/smdahlen/vagrant-digitalocean/raw/master/box/digital_ocean.box\"\n\n    provider.client_id = \"... CLIENT ID ...\"\n    provider.api_key = \"... API KEY ...\"\n\n    provider.size = \"512MB\"\n    provider.region = \"Singapore 1\"\n    provider.image = \"Arch Linux 2013.05 x64\"\n  end\n\n  config.vm.provision :fabric do |fabric|\n    fabric.fabfile_path = \"./fabfile.py\"\n    fabric.tasks = [\"hello\"]\n  end\nend\n\nfabfile.py\nfrom fabric.api import run\n\ndef hello():\n    run(\"echo hello\")\n\n\n\u624b\u9806\nvagrant\u3067\u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u3001fabric\u306e\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u7d50\u679c\u3092\u78ba\u8a8d\npython\u306eSimpleHTTPServer\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://192.***.***.***:8000/index.html\n$ vagrant plugin install vagrant-digitalocean\n$ vagrant plugin install vagrant-fabric\n$ vagrant up --provider=digital_ocean --provision\nBringing machine 'default' up with 'digital_ocean' provider...\n[default] Using existing SSH key: Vagrant\n[default] Creating a new droplet...\n[default] Assigned IP address: 192.***.***.***\n[default] Rsyncing folder: /path/vagrant/directory/ => /vagrant...\n[default] Running provisioner: fabric...\n[192.***.***.***] Executing task 'hello'\n[192.***.***.***] run: echo hello\n[192.***.***.***] out: hello\n[192.***.***.***] out:\n\n\nDone.\nDisconnecting from 192.***.***.***... done.\n$ vagrant ssh\n[root@default ~]# mkdir hello\n[root@default ~]# cd hello\n[root@default hello]# cat >> index.html << EOF\n<h1>Hello, Digital Ocean!</h1>\nEOF\n[root@default ~]# sed -i -e \"s/^Server/#Server/g\" /etc/pacman.d/mirrorlist\n[root@default ~]# echo \"Server = http://mirror.nus.edu.sg/archlinux/$repo/os/$arch\" >> /etc/pacman.d/mirrorlist\n[root@default ~]# pacman -Syu\n[root@default ~]# pacman -S python2\n[root@default ~]# python2 -m SimpleHTTPServer\n\n\u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u306e\u505c\u6b62/\u524a\u9664\n$ vagrant halt\n[default] Powering off the droplet...\n$ vagrant destroy\nAre you sure you want to destroy the 'default' VM? [y/N] y\n[default] Destroying the droplet...\n[default] Running cleanup tasks for 'fabric' provisioner...\n\n\u30e1\u30e2\n\n~/.ssh/known_hosts\u306b\u6ce8\u610f. \u524a\u9664\u3057\u305fdroplet\u306eIP\u3068\u65b0\u3057\u304f\u4f5c\u6210\u3057\u305fdroplet\u306eIP\u304c\u540c\u3058\u3060\u3068fabric\u304c\u5931\u6557\u3059\u308b\n\n\n\u30b3\u30de\u30f3\u30c9 $ ssh-keygen -R 192.***.***.***\n\n\n\n\n\n\u53c2\u8003:\n\n* [1\u5186\u30af\u30e9\u30a6\u30c9\u30fb\u30db\u30b9\u30c6\u30a3\u30f3\u30b0DigitalOcean\u3092\u3001Vagrant\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b](http://d.hatena.ne.jp/m-hiyama/20140301/1393669079)\n* [smdahlen/vagrant-digitalocean](https://github.com/smdahlen/vagrant-digitalocean)\n* [Vagrant Fabric\u3067\u7c21\u5358\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0](http://www.ryuzee.com/contents/blog/6769)\n\n## \u4f5c\u6210\u3059\u308b\u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u306e\u30b9\u30da\u30c3\u30af\n\n\u30a4\u30e1\u30fc\u30b8: Arch Linux 2013.05 x64\n\u30ea\u30fc\u30b8\u30e7\u30f3: Singapore 1\n\u30b5\u30a4\u30ba: 512MB\n\n## \u30d5\u30a1\u30a4\u30eb\n\nVagrantfile\n\n```ruby\nVagrant.configure('2') do |config|\n\n  config.vm.provider :digital_ocean do |provider, override|\n    override.ssh.private_key_path = '~/.ssh/digitalocean_vagrant'\n    override.vm.box = 'digital_ocean'\n    override.vm.box_url = \"https://github.com/smdahlen/vagrant-digitalocean/raw/master/box/digital_ocean.box\"\n\n    provider.client_id = \"... CLIENT ID ...\"\n    provider.api_key = \"... API KEY ...\"\n\n\tprovider.size = \"512MB\"\n    provider.region = \"Singapore 1\"\n    provider.image = \"Arch Linux 2013.05 x64\"\n  end\n\n  config.vm.provision :fabric do |fabric|\n    fabric.fabfile_path = \"./fabfile.py\"\n    fabric.tasks = [\"hello\"]\n  end\nend\n```\n\nfabfile.py\n\n```\nfrom fabric.api import run\n\ndef hello():\n    run(\"echo hello\")\n```\n\n## \u624b\u9806\n\nvagrant\u3067\u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u3092\u4f5c\u6210\u3057\u3001fabric\u306e\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u7d50\u679c\u3092\u78ba\u8a8d\npython\u306eSimpleHTTPServer\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\nhttp://192.***.***.***:8000/index.html\n\n```\n$ vagrant plugin install vagrant-digitalocean\n$ vagrant plugin install vagrant-fabric\n$ vagrant up --provider=digital_ocean --provision\nBringing machine 'default' up with 'digital_ocean' provider...\n[default] Using existing SSH key: Vagrant\n[default] Creating a new droplet...\n[default] Assigned IP address: 192.***.***.***\n[default] Rsyncing folder: /path/vagrant/directory/ => /vagrant...\n[default] Running provisioner: fabric...\n[192.***.***.***] Executing task 'hello'\n[192.***.***.***] run: echo hello\n[192.***.***.***] out: hello\n[192.***.***.***] out:\n\n\nDone.\nDisconnecting from 192.***.***.***... done.\n$ vagrant ssh\n[root@default ~]# mkdir hello\n[root@default ~]# cd hello\n[root@default hello]# cat >> index.html << EOF\n<h1>Hello, Digital Ocean!</h1>\nEOF\n[root@default ~]# sed -i -e \"s/^Server/#Server/g\" /etc/pacman.d/mirrorlist\n[root@default ~]# echo \"Server = http://mirror.nus.edu.sg/archlinux/$repo/os/$arch\" >> /etc/pacman.d/mirrorlist\n[root@default ~]# pacman -Syu\n[root@default ~]# pacman -S python2\n[root@default ~]# python2 -m SimpleHTTPServer\n```\n\n\u30c9\u30ed\u30c3\u30d7\u30ec\u30c3\u30c8\u306e\u505c\u6b62/\u524a\u9664\n\n```\n$ vagrant halt\n[default] Powering off the droplet...\n$ vagrant destroy\nAre you sure you want to destroy the 'default' VM? [y/N] y\n[default] Destroying the droplet...\n[default] Running cleanup tasks for 'fabric' provisioner...\n```\n\n\u30e1\u30e2\n\n* ~/.ssh/known_hosts\u306b\u6ce8\u610f. \u524a\u9664\u3057\u305fdroplet\u306eIP\u3068\u65b0\u3057\u304f\u4f5c\u6210\u3057\u305fdroplet\u306eIP\u304c\u540c\u3058\u3060\u3068fabric\u304c\u5931\u6557\u3059\u308b\n\t* \u30b3\u30de\u30f3\u30c9 `$ ssh-keygen -R 192.***.***.***`", "tags": ["vagrant", "DigitalOcean"]}