{"context": "\n\n\u524d\u63d0\n\npostfix\u3092\u5c0e\u5165\n\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u3059\u308b\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u8a2d\u5b9a\u306froot\u3067\u884c\u3046\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum -y install postfix\n\n\n\u57fa\u672c\u8a2d\u5b9a\n\n\u30c9\u30e1\u30a4\u30f3\u306fexample.com\u3068\u3059\u308b\n\n# vi /etc/postfix/main.cf\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\n\nmyhostname = mail.example.com\nmydomain = torhamzedd.local\nmyorigin = $mydomain\ninet_interfaces = all\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\nmynetworks = 127.0.0.0/8\n\nrelay_domains = $mydestination\nhome_mailbox = Maildir/\nheader_checks = regexp:/etc/postfix/header_checks\nsmtpd_banner = $myhostname ESMTP unknown\n\n\n\u4ee5\u4e0b\u3092\u6700\u7d42\u884c\u306b\u8ffd\u8a18\u3059\u308b\n\n\nmailbox_size_limit\n\n\n\u500b\u4eba\u306e\u30e1\u30fc\u30eb\u30dc\u30c3\u30af\u30b9\u306e\u4e0a\u9650\uff08\u30d0\u30a4\u30c8\u5358\u4f4d\uff09\n\n\nmessage_size_limit\n\n\n\u53d7\u4fe1\u53ef\u80fd\u306a\u4e00\u901a\u306e\u30e1\u30fc\u30eb\u306e\u4e0a\u9650\uff08\u30d0\u30a4\u30c8\u5358\u4f4d\uff09\n\n\n\n\n\nsmtpd_client_restrictions = permit_mynetworks, reject_rbl_client relays.ordb.org, permit\nsmtpd_sasl_auth_enable = yes\nsmtpd_sasl_local_domain = $myhostname\nsmtpd_recipient_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination\nsmtpd_recipient_limit = 10\nmailbox_size_limit = 104857600\nmessage_size_limit = 10485760\n\n\nReceived\u304b\u3089\u59cb\u307e\u308b\u884c\u3092\u524a\u9664\u3059\u308b\n\n# vi /etc/postfix/header_checks\n\n\n\u4ee5\u4e0b\u3092\u6700\u7d42\u884c\u306b\u8ffd\u8a18\u3059\u308b\n\n/^Received:/ IGNORE\n\n\n\u30e6\u30fc\u30b6\u5bfe\u5fdc\n\n\u30b3\u30d4\u30fc\u5143\u8a2d\u5b9a\n\n\n\u30e6\u30fc\u30b6\u8ffd\u52a0\u6642\u306b\u6709\u52b9\n\u65e2\u5b58\u30e6\u30fc\u30b6\u306f\u540c\u3058\u69cb\u9020\u3092\u5225\u9014\u500b\u5225\u306b\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n\n\n# mkdir -p /etc/skel/Maildir/{new,cur,tmp}\n# chmod -R 700 /etc/skel/Maildir/\n\n\nMTA\u5207\u308a\u66ff\u3048\n\nsendmail\u505c\u6b62\n\n# systemctl stop sendmail.service\n# systemctl disable sendmail.service\n\n\n\u5207\u308a\u66ff\u3048\u30b3\u30de\u30f3\u30c9\n\n# alternatives --config mta\n\n\u300csendmail.postfix\u300d\u3092\u9078\u629e\u3059\u308b\n\nPostfix\u8d77\u52d5\n\n# systemctl start postfix.service\n# systemctl enable postfix.service\n\n\n## \u524d\u63d0\n\n- postfix\u3092\u5c0e\u5165\n- \u5fc5\u8981\u6700\u4f4e\u9650\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3068\u3059\u308b\n- \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u8a2d\u5b9a\u306froot\u3067\u884c\u3046\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# yum -y install postfix\n```\n\n## \u57fa\u672c\u8a2d\u5b9a\n\n- \u30c9\u30e1\u30a4\u30f3\u306fexample.com\u3068\u3059\u308b\n\n```\n# vi /etc/postfix/main.cf\n```\n\n- \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\n\n```\nmyhostname = mail.example.com\nmydomain = torhamzedd.local\nmyorigin = $mydomain\ninet_interfaces = all\nmydestination = $myhostname, localhost.$mydomain, localhost, $mydomain\nmynetworks = 127.0.0.0/8\n\nrelay_domains = $mydestination\nhome_mailbox = Maildir/\nheader_checks = regexp:/etc/postfix/header_checks\nsmtpd_banner = $myhostname ESMTP unknown\n```\n\n- \u4ee5\u4e0b\u3092\u6700\u7d42\u884c\u306b\u8ffd\u8a18\u3059\u308b\n    - mailbox_size_limit\n        - \u500b\u4eba\u306e\u30e1\u30fc\u30eb\u30dc\u30c3\u30af\u30b9\u306e\u4e0a\u9650\uff08\u30d0\u30a4\u30c8\u5358\u4f4d\uff09\n    - message_size_limit\n        - \u53d7\u4fe1\u53ef\u80fd\u306a\u4e00\u901a\u306e\u30e1\u30fc\u30eb\u306e\u4e0a\u9650\uff08\u30d0\u30a4\u30c8\u5358\u4f4d\uff09\n\n```\nsmtpd_client_restrictions = permit_mynetworks, reject_rbl_client relays.ordb.org, permit\nsmtpd_sasl_auth_enable = yes\nsmtpd_sasl_local_domain = $myhostname\nsmtpd_recipient_restrictions = permit_mynetworks, permit_sasl_authenticated, reject_unauth_destination\nsmtpd_recipient_limit = 10\nmailbox_size_limit = 104857600\nmessage_size_limit = 10485760\n```\n\n\n- Received\u304b\u3089\u59cb\u307e\u308b\u884c\u3092\u524a\u9664\u3059\u308b\n\n```\n# vi /etc/postfix/header_checks\n```\n\n- \u4ee5\u4e0b\u3092\u6700\u7d42\u884c\u306b\u8ffd\u8a18\u3059\u308b\n\n```\n/^Received:/ IGNORE\n```\n\n## \u30e6\u30fc\u30b6\u5bfe\u5fdc\n\n- \u30b3\u30d4\u30fc\u5143\u8a2d\u5b9a\n    - \u30e6\u30fc\u30b6\u8ffd\u52a0\u6642\u306b\u6709\u52b9\n    - \u65e2\u5b58\u30e6\u30fc\u30b6\u306f\u540c\u3058\u69cb\u9020\u3092\u5225\u9014\u500b\u5225\u306b\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n```\n# mkdir -p /etc/skel/Maildir/{new,cur,tmp}\n# chmod -R 700 /etc/skel/Maildir/\n```\n\n## MTA\u5207\u308a\u66ff\u3048\n\n- sendmail\u505c\u6b62\n\n```\n# systemctl stop sendmail.service\n# systemctl disable sendmail.service\n```\n\n- \u5207\u308a\u66ff\u3048\u30b3\u30de\u30f3\u30c9\n\n```\n# alternatives --config mta\n```\n\n\u300csendmail.postfix\u300d\u3092\u9078\u629e\u3059\u308b\n\n\n- Postfix\u8d77\u52d5\n\n```\n# systemctl start postfix.service\n# systemctl enable postfix.service\n```\n\n", "tags": ["postfix", "lamp"]}