{"tags": ["AWS", "boto3", "Python"], "context": "\n\n\u4e8b\u524d\u6e96\u5099\nIAM\u3067\u3001default, dev, prod\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\ndev\u306b\u306f\u3001AmazonS3FullAccess\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u30a2\u30bf\u30c3\u30c1\u3057\u3001S3\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\nS3\u306b\u3001bucket1, bucket2, bucket3\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\ncredentials\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\n\n\ncredentials\u30d5\u30a1\u30a4\u30eb\n~/.aws/credentials or C:\\Users\\USER_NAME\\.aws\\credentials\n[default]\naws_access_key_id = DEFAULT_ID\naws_secret_access_key = SECRET_KEY1\n\n[dev]\naws_access_key_id = DEV_ID\naws_secret_access_key = SECRET_KEY2\n\n[prod]\naws_access_key_id = PROD_ID\naws_secret_access_key = SECRET_KEY3\n\n\n\nPython\u30d7\u30ed\u30b0\u30e9\u30e0\nimport boto3.session\n\ndev_sess = boto3.session.Session(profile_name='dev')\ns3 = dev_sess.resource('s3')\nfor bucket in s3.buckets.all():\n    print(bucket.name)\n\n\u203b profile_name\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001profile_name='default'\u3067\u3059\u3002\n\n\n\n\u30a2\u30af\u30bb\u30b9\uff29\uff24\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3092\u76f4\u63a5\u6307\u5b9a\n\n\nPython\u30d7\u30ed\u30b0\u30e9\u30e0\nimport boto3.session\n\ndev_sess = boto3.session.Session(\n                            aws_access_key_id='DEV_ID',\n                            aws_secret_access_key='SECRET_KEY2')\ns3 = dev_sess.resource('s3')\nfor bucket in s3.buckets.all():\n    print(bucket.name)\n\n\u203b \uff29\uff24/\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u904b\u7528\u3067\u306f\u907f\u3051\u307e\u3057\u3087\u3046\u3002\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\n'dev'\u3092\u6307\u5b9a\n\nbucket1\nbucket2\nbucket3\n\n\n'prod'\u3092\u6307\u5b9a\n\nClientError: An error occurred (AccessDenied) when calling the ListBuckets operation: Access Denied\n\n\n'foo'\u3092\u6307\u5b9a\n\nProfileNotFound: The config profile (foo) could not be found\n\n# \u4e8b\u524d\u6e96\u5099\nIAM\u3067\u3001default, dev, prod\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\ndev\u306b\u306f\u3001AmazonS3FullAccess\u306e\u30dd\u30ea\u30b7\u30fc\u3092\u30a2\u30bf\u30c3\u30c1\u3057\u3001S3\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\nS3\u306b\u3001bucket1, bucket2, bucket3\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n# credentials\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\n+ credentials\u30d5\u30a1\u30a4\u30eb  \n    `~/.aws/credentials` or `C:\\Users\\USER_NAME\\.aws\\credentials`\n    \n    ```\n    [default]\n    aws_access_key_id = DEFAULT_ID\n    aws_secret_access_key = SECRET_KEY1\n     \n    [dev]\n    aws_access_key_id = DEV_ID\n    aws_secret_access_key = SECRET_KEY2\n     \n    [prod]\n    aws_access_key_id = PROD_ID\n    aws_secret_access_key = SECRET_KEY3\n    ```\n    \n+ Python\u30d7\u30ed\u30b0\u30e9\u30e0\n    \n    ```\n    import boto3.session\n    \n    dev_sess = boto3.session.Session(profile_name='dev')\n    s3 = dev_sess.resource('s3')\n    for bucket in s3.buckets.all():\n        print(bucket.name)\n    ```\n    \u203b profile_name\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001profile_name='default'\u3067\u3059\u3002\n\n# \u30a2\u30af\u30bb\u30b9\uff29\uff24\u3001\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3092\u76f4\u63a5\u6307\u5b9a\n+ Python\u30d7\u30ed\u30b0\u30e9\u30e0\n    \n    ```\n    import boto3.session\n    \n    dev_sess = boto3.session.Session(\n                                aws_access_key_id='DEV_ID',\n                                aws_secret_access_key='SECRET_KEY2')\n    s3 = dev_sess.resource('s3')\n    for bucket in s3.buckets.all():\n        print(bucket.name)\n    ```\n    \u203b \uff29\uff24/\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u904b\u7528\u3067\u306f\u907f\u3051\u307e\u3057\u3087\u3046\u3002\n\n# \u5b9f\u884c\u7d50\u679c\n+ 'dev'\u3092\u6307\u5b9a\n\n```\nbucket1\nbucket2\nbucket3\n```\n\n+ 'prod'\u3092\u6307\u5b9a\n\n```\nClientError: An error occurred (AccessDenied) when calling the ListBuckets operation: Access Denied\n```\n\n+ 'foo'\u3092\u6307\u5b9a\n\n```\nProfileNotFound: The config profile (foo) could not be found\n```\n"}