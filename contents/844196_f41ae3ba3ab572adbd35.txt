{"tags": ["Ruby2.3.0", "\u30ba\u30f3\u30c9\u30b3\u30ad\u30e8\u30b7"], "context": "\u6642\u671f\u3092\u9003\u3057\u3066\u308b\u3057\u3001\u77ed\u304f\u3082\u6c17\u6301\u3061\u60aa\u3044\u66f8\u304d\u65b9\u3082\u3067\u304d\u306a\u3044\u306f\u3061\u3088\u3093\u306f\u3001\u75b2\u308c\u304b\u3089\u304b\u4e0d\u5e78\u306b\u3082\u9ed2\u5857\u308a\u306e\u9ad8\u7d1a\u8eca\u306b\u8ffd\u7a81\u3057\u3066\u3057\u307e\u3046\u2026\n\nkiyoshi.rb\nmodule Kiyoshi\n  class Phrase\n    attr_accessor :words, :pattern, :finish\n\n    def initialize\n      yield(self)\n    end\n\n    def sing\n      string = ''\n      string << words.sample.tap(&:display) until string =~ pattern\n      puts finish\n    end\n  end\n\n  class << self\n    def sing(&config)\n      phrase = Phrase.new(&config)\n      phrase.sing\n    end\n  end\nend\n\n\n\napp.rb\nrequire_relative 'kiyoshi'\n\nKiyoshi.sing do |zundoko|\n  zundoko.words   = %w(\u30ba\u30f3 \u30c9\u30b3)\n  zundoko.pattern = /(?:\u30ba\u30f3){4}\u30c9\u30b3/\n  zundoko.finish  = '\u30ad\u30fb\u30e8\u30fb\u30b7\uff01'\nend\n\nKiyoshi.sing do |shintyoku|\n  shintyoku.words   = %w(\u9032\u6357 \u3069\u3046 \u3067\u3059 \u304b)\n  shintyoku.pattern = /\u9032\u6357\u3069\u3046\u3067\u3059\u304b/\n  shintyoku.finish  = '\uff1f'\nend\n\nKiyoshi.sing do |yajyu|\n  yajyu.words   = %w(114 514 810 1919)\n  yajyu.pattern = /1145148101919/\n  yajyu.finish  = '\u80f8\u306b\u304b\u3051\u3066\u80f8\u306b\uff01'\nend\n\n\n$ ruby app.rb\n\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30c9\u30b3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\n\u9032\u6357\u9032\u6357\u304b\u304b\u3067\u3059\u304b\u9032\u6357\u304b\u9032\u6357\u9032\u6357\u3069\u3046\u9032\u6357\u304b\u3069\u3046\u9032\u6357\u304b\u3069\u3046\u304b\u9032\u6357\u3067\u3059\u3069\u3046\u3067\u3059\u3069\u3046\u9032\u6357\u9032\u6357\u3069\u3046\u3069\u3046\u9032\u6357\u9032\u6357\u9032\u6357\u9032\u6357\u3067\u3059\u3069\u3046\u3069\u3046\u3067\u3059\u304b\u9032\u6357\u3069\u3046\u3067\u3059\u304b\uff1f\n1919114114191911411481011481011451419191919191981081051419195145148108101145145145141145148101919\u80f8\u306b\u304b\u3051\u3066\u80f8\u306b\uff01\n\n\u6642\u671f\u3092\u9003\u3057\u3066\u308b\u3057\u3001\u77ed\u304f\u3082\u6c17\u6301\u3061\u60aa\u3044\u66f8\u304d\u65b9\u3082\u3067\u304d\u306a\u3044\u306f\u3061\u3088\u3093\u306f\u3001\u75b2\u308c\u304b\u3089\u304b\u4e0d\u5e78\u306b\u3082\u9ed2\u5857\u308a\u306e\u9ad8\u7d1a\u8eca\u306b\u8ffd\u7a81\u3057\u3066\u3057\u307e\u3046\u2026\n\n```ruby:kiyoshi.rb\nmodule Kiyoshi\n  class Phrase\n    attr_accessor :words, :pattern, :finish\n\n    def initialize\n      yield(self)\n    end\n\n    def sing\n      string = ''\n      string << words.sample.tap(&:display) until string =~ pattern\n      puts finish\n    end\n  end\n\n  class << self\n    def sing(&config)\n      phrase = Phrase.new(&config)\n      phrase.sing\n    end\n  end\nend\n```\n\n```ruby:app.rb\nrequire_relative 'kiyoshi'\n\nKiyoshi.sing do |zundoko|\n  zundoko.words   = %w(\u30ba\u30f3 \u30c9\u30b3)\n  zundoko.pattern = /(?:\u30ba\u30f3){4}\u30c9\u30b3/\n  zundoko.finish  = '\u30ad\u30fb\u30e8\u30fb\u30b7\uff01'\nend\n\nKiyoshi.sing do |shintyoku|\n  shintyoku.words   = %w(\u9032\u6357 \u3069\u3046 \u3067\u3059 \u304b)\n  shintyoku.pattern = /\u9032\u6357\u3069\u3046\u3067\u3059\u304b/\n  shintyoku.finish  = '\uff1f'\nend\n\nKiyoshi.sing do |yajyu|\n  yajyu.words   = %w(114 514 810 1919)\n  yajyu.pattern = /1145148101919/\n  yajyu.finish  = '\u80f8\u306b\u304b\u3051\u3066\u80f8\u306b\uff01'\nend\n```\n\n```shell-session\n$ ruby app.rb\n\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30c9\u30b3\u30c9\u30b3\u30ba\u30f3\u30c9\u30b3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30ba\u30f3\u30c9\u30b3\u30ad\u30fb\u30e8\u30fb\u30b7\uff01\n\u9032\u6357\u9032\u6357\u304b\u304b\u3067\u3059\u304b\u9032\u6357\u304b\u9032\u6357\u9032\u6357\u3069\u3046\u9032\u6357\u304b\u3069\u3046\u9032\u6357\u304b\u3069\u3046\u304b\u9032\u6357\u3067\u3059\u3069\u3046\u3067\u3059\u3069\u3046\u9032\u6357\u9032\u6357\u3069\u3046\u3069\u3046\u9032\u6357\u9032\u6357\u9032\u6357\u9032\u6357\u3067\u3059\u3069\u3046\u3069\u3046\u3067\u3059\u304b\u9032\u6357\u3069\u3046\u3067\u3059\u304b\uff1f\n1919114114191911411481011481011451419191919191981081051419195145148108101145145145141145148101919\u80f8\u306b\u304b\u3051\u3066\u80f8\u306b\uff01\n```\n"}