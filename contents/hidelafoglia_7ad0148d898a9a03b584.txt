{"context": " More than 1 year has passed since last update.\n\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u9078\u629e\u76f4\u5f8c\u306b\u9078\u629e\u89e3\u9664\u3059\u308b\u3068\u518d\u63cf\u753b\u3057\u3066\u304f\u308c\u308b\u6a21\u69d8\n\n\nusing System;\n\nusing UIKit;\nusing CoreGraphics;\nusing CoreLocation;\n\nusing Xamarin.Forms;\nusing Xamarin.Forms.Maps.iOS;\nusing Xamarin.Forms.Platform.iOS;\n\n[assembly:ExportRenderer( // Xamarin.Forms Dependency Injection         \n  typeof(HelloXamap.HelloMap),\n  typeof(HelloXamap.iOS.HelloMapRenderer))\n]\npublic class HelloMapRenderer : MapRenderer\n{\n  // MapKIT\u306e\u30de\u30c3\u30d7\u30d3\u30e5\u30fc\n  private MKMapView _native_map {\n    get { return (this.NativeView as MapRenderer).Control as MKMapView; } }\n\n  // \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3(MKAnnotation\u30b5\u30d6\u30af\u30e9\u30b9)\n  public Bike _running_bike = new Bike (\n    new CLLocationCoordinate2D(35.658987, 139.702776),\n    \"\u6e0b\u8c37\", \"City of Light\");\n\n  // \u3068\u308a\u3042\u3048\u305a\u30bf\u30a4\u30de\u30fc\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3059\u308b\n  System.Timers.Timer _timer = new System.Timers.Timer (1000.0);\n\n  public HelloMapRenderer():base(){\n\n    _timer.Elapsed +=  (\n      object sender,\n      System.Timers.ElapsedEventArgs ev\n    ) =>  {\n      // \u4f4d\u7f6e\u5909\u66f4(\u5317\u6771\u306b\u659c\u3081\u306b\u79fb\u52d5)\n      _running_bike.SetCoordinate (new CLLocationCoordinate2D (\n        _running_bike.Coordinate.Latitude + 0.001,\n        _running_bike.Coordinate.Longitude + 0.001));\n\n      BeginInvokeOnMainThread(delegate {  // UI\u306e\u547d\u4ee4\u3092\u547c\u3076\u304a\u307e\u3058\u306a\u3044\n        // \u9078\u629e & \u89e3\u9664\u3000\u3059\u308b\u3068\u518d\u63cf\u753b\u3055\u308c\u308b\u6a21\u69d8\n        _native_map.SelectAnnotation(_running_bike, true);\n        _native_map.DeselectAnnotation(_running_bike,true);\n      });\n\n    };\n    _timer.Enabled = true;\n    _timer.Start ();\n  }\n}\n\n\n- \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u9078\u629e\u76f4\u5f8c\u306b\u9078\u629e\u89e3\u9664\u3059\u308b\u3068\u518d\u63cf\u753b\u3057\u3066\u304f\u308c\u308b\u6a21\u69d8\n\n~~~csharp\n\nusing System;\n\nusing UIKit;\nusing CoreGraphics;\nusing CoreLocation;\n\nusing Xamarin.Forms;\nusing Xamarin.Forms.Maps.iOS;\nusing Xamarin.Forms.Platform.iOS;\n\n[assembly:ExportRenderer( // Xamarin.Forms Dependency Injection         \n  typeof(HelloXamap.HelloMap),\n  typeof(HelloXamap.iOS.HelloMapRenderer))\n]\npublic class HelloMapRenderer : MapRenderer\n{\n  // MapKIT\u306e\u30de\u30c3\u30d7\u30d3\u30e5\u30fc\n  private MKMapView _native_map {\n    get { return (this.NativeView as MapRenderer).Control as MKMapView; } }\n\n  // \u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3(MKAnnotation\u30b5\u30d6\u30af\u30e9\u30b9)\n  public Bike _running_bike = new Bike (\n    new CLLocationCoordinate2D(35.658987, 139.702776),\n    \"\u6e0b\u8c37\", \"City of Light\");\n\n  // \u3068\u308a\u3042\u3048\u305a\u30bf\u30a4\u30de\u30fc\u3092\u30c8\u30ea\u30ac\u30fc\u306b\u3059\u308b\n  System.Timers.Timer _timer = new System.Timers.Timer (1000.0);\n\n  public HelloMapRenderer():base(){\n\n    _timer.Elapsed +=  (\n      object sender,\n      System.Timers.ElapsedEventArgs ev\n    ) =>  {\n      // \u4f4d\u7f6e\u5909\u66f4(\u5317\u6771\u306b\u659c\u3081\u306b\u79fb\u52d5)\n      _running_bike.SetCoordinate (new CLLocationCoordinate2D (\n        _running_bike.Coordinate.Latitude + 0.001,\n        _running_bike.Coordinate.Longitude + 0.001));\n\n      BeginInvokeOnMainThread(delegate {  // UI\u306e\u547d\u4ee4\u3092\u547c\u3076\u304a\u307e\u3058\u306a\u3044\n        // \u9078\u629e & \u89e3\u9664\u3000\u3059\u308b\u3068\u518d\u63cf\u753b\u3055\u308c\u308b\u6a21\u69d8\n        _native_map.SelectAnnotation(_running_bike, true);\n        _native_map.DeselectAnnotation(_running_bike,true);\n      });\n\n    };\n    _timer.Enabled = true;\n    _timer.Start ();\n  }\n}\n~~~\n", "tags": ["iOS", "Xamarin", "MapKit"]}