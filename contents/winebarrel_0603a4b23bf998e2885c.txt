{"context": " More than 1 year has passed since last update.fluentd+dstat+InfluxDB v0.9.x+Grafana\u3067\u306e\u3001\u30b5\u30fc\u30d0\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u53ef\u8996\u5316\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\n\n\u7528\u610f\u3059\u308b\u3082\u306e\n\nfluentd (v0.12\u4ee5\u964d)\nfluent-plugin-dstat\nfluent-plugin-filter-object-flatten\nfluent-plugin-filter-record-map\nRinflux\nfluent-plugin-rinflux\nInfluxDB v0.9.x\nGrafana v2.0.2\n\n\n\u4f5c\u696d\u624b\u9806\n\nInfluxDB\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nhttps://influxdb.com/download/index.html\nwget http://s3.amazonaws.com/influxdb/influxdb_latest_amd64.deb\nsudo dpkg -i influxdb_latest_amd64.deb\nsudo service influxdb start\n\n\ndatabase\u306e\u4f5c\u6210\nInfluxDB\u306e\u7ba1\u7406\u753b\u9762\uff08localhost:8083\uff09\u304b\u3089\u4ee5\u4e0b\u306e\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3066\u3001\u3042\u3089\u304b\u3058\u3081\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nCREATE DATABASE mydb\n\n\nGrafana\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nhttp://docs.grafana.org/installation/\nwget https://grafanarel.s3.amazonaws.com/builds/grafana_2.0.2_amd64.deb\nsudo apt-get install -y adduser libfontconfig\nsudo dpkg -i grafana_2.0.2_amd64.deb\n\n\nRinflux/fluent-plugin-rinflux\nInfluxDB\u516c\u5f0f\u306eRuby\u30e9\u30a4\u30d6\u30e9\u30ea\u306fv0.9.0\u306b\u5bfe\u5fdc\u4e2d\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3067\u3001fluentd\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u542b\u3081\u3001InfluxDB v0.9.x\u3067\u306f\u307e\u3060\u4f7f\u3048\u306a\u3044\u72b6\u614b\u3067\u3059\uff082015/07/18\u73fe\u5728\uff09\n\u203bv0.2.0\u304c\u51fa\u305f\u3088\u3046\u3067\u3059\n\u306a\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305av0.9.x\u5bfe\u5fdc\u306eInfluxDB\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068fluentd\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u81ea\u4f5c\u3057\u307e\u3057\u305f\u3002\u672c\u5bb6\u306e\u5bfe\u5fdc\u72b6\u6cc1\u3092\u9451\u307f\u3066rubygems.org\u306b\u306f\u767b\u9332\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u5f93\u3063\u3066\u3001git clone\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n# install rinflux\ngit clone https://github.com/winebarrel/rinflux.git\ncd rinflux\nbundle install\nbundle exec rake install\n\ncd ..\n\n# install fluent-plugin-rinflux\ngit clone https://github.com/winebarrel/fluent-plugin-rinflux.git\ncd fluent-plugin-rinflux\nbundle install\nbundle exec rake install\n\n\nfluent.conf\ndstat\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u53ce\u96c6\u307e\u3067\u306f\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c8\u30ea\u3068\u540c\u3058\u3067\u3059\u3002\n\nfluentd+dstat+librato\u3067\u30b5\u30fc\u30d0\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u53ef\u8996\u5316\u3059\u308b - Qiita\n\nfluent.conf\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n<source>\n  type dstat\n  tag dstat.${hostname}\n  option -clmdrn --freespace\n  delay 3\n</source>\n\n<filter>\n  type object_flatten\n  separator _\n  tr [\" /\", \"__\"]\n</filter>\n\n<filter>\n  type grep\n  exclude1 hostname .+\n</filter>\n\n<filter>\n  type record_map\n  map1 record.each {|k, v| new_record[k] = v.to_f }\n</filter>\n\n<match dstat.**>\n  type rinflux\n  db mydb\n  flush_interval 1s\n</match>\n\nInfluxDB\u306b\u6d41\u308c\u308b\u30ec\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n{\"dstat_net_total_send\":1138.667}\n{\"dstat___used\":3879976960.0}\n{\"dstat___free\":38361186304.0}\n{\"dstat__dev_used\":12288.0}\n{\"dstat__dev_free\":251576320.0}\n{\"dstat__run_used\":360448.0}\n{\"dstat__run_free\":51019776.0}\n{\"dstat__rpc_pipefs_used\":0.0}\n{\"dstat__rpc_pipefs_free\":0.0}\n{\"dstat__systemd_used\":0.0}\n{\"dstat__systemd_free\":0.0}\n{\"dstat__vagrant_used\":68592746496.0}\n{\"dstat__vagrant_free\":430489739264.0}\n{\"dstat_total_cpu_usage_usr\":0.0}\n{\"dstat_total_cpu_usage_sys\":0.667}\n{\"dstat_total_cpu_usage_idl\":99.333}\n{\"dstat_total_cpu_usage.wai\":0.0}\n\n\nGrapana\u306b\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8ffd\u52a0\n\u7ba1\u7406\u30e6\u30fc\u30b6\uff08admin/admin\uff09\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u307e\u3060\u30a2\u30eb\u30d5\u30a1\u7248\u3068\u306e\u3053\u3068\u3002\nData source implementation: Alpha stage\n\nThis data source implementation is not complete, a lot is not working and implemented yet\nUpdates can be tracked, and feedback directed here #1525.\n\n\nGrapana\u306b\u30b0\u30e9\u30d5\u3092\u8ffd\u52a0\nGrapana\u306b\u9069\u5f53\u306b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u3001\u30b0\u30e9\u30d5\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u30b0\u30e9\u30d5\u3092\u8ffd\u52a0\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304c\u4f5c\u308c\u307e\u3059\u3002\n\nfluentd+dstat+InfluxDB v0.9.x+Grafana\u3067\u306e\u3001\u30b5\u30fc\u30d0\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u53ef\u8996\u5316\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\n\n# \u7528\u610f\u3059\u308b\u3082\u306e\n* fluentd (v0.12\u4ee5\u964d)\n* [fluent-plugin-dstat](https://github.com/shun0102/fluent-plugin-dstat)\n* [fluent-plugin-filter-object-flatten](https://github.com/winebarrel/fluent-plugin-filter-object-flatten)\n* [fluent-plugin-filter-record-map](https://github.com/winebarrel/fluent-plugin-filter-record-map)\n* [Rinflux](https://github.com/winebarrel/rinflux)\n* [fluent-plugin-rinflux](https://github.com/winebarrel/fluent-plugin-rinflux)\n* [InfluxDB v0.9.x](https://influxdb.com/download/index.html)\n* [Grafana v2.0.2](http://grafana.org/download/)\n\n# \u4f5c\u696d\u624b\u9806\n\n# InfluxDB\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nhttps://influxdb.com/download/index.html\n\n```bash\nwget http://s3.amazonaws.com/influxdb/influxdb_latest_amd64.deb\nsudo dpkg -i influxdb_latest_amd64.deb\nsudo service influxdb start\n```\n\n## database\u306e\u4f5c\u6210\n\nInfluxDB\u306e\u7ba1\u7406\u753b\u9762\uff08localhost:8083\uff09\u304b\u3089\u4ee5\u4e0b\u306e\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u3066\u3001\u3042\u3089\u304b\u3058\u3081\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```sql\nCREATE DATABASE mydb\n```\n\n# Grafana\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nhttp://docs.grafana.org/installation/\n\n```bash\nwget https://grafanarel.s3.amazonaws.com/builds/grafana_2.0.2_amd64.deb\nsudo apt-get install -y adduser libfontconfig\nsudo dpkg -i grafana_2.0.2_amd64.deb\n```\n\n## Rinflux/fluent-plugin-rinflux\n\n[InfluxDB\u516c\u5f0f\u306eRuby\u30e9\u30a4\u30d6\u30e9\u30ea](https://github.com/influxdb/influxdb-ruby)\u306fv0.9.0\u306b\u5bfe\u5fdc\u4e2d\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3067\u3001fluentd\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u542b\u3081\u3001InfluxDB v0.9.x\u3067\u306f\u307e\u3060\u4f7f\u3048\u306a\u3044\u72b6\u614b\u3067\u3059\uff082015/07/18\u73fe\u5728\uff09\n\n\u203b[v0.2.0](https://rubygems.org/gems/influxdb/versions/0.2.0)\u304c\u51fa\u305f\u3088\u3046\u3067\u3059\n\n\u306a\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305av0.9.x\u5bfe\u5fdc\u306eInfluxDB\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068fluentd\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u81ea\u4f5c\u3057\u307e\u3057\u305f\u3002\u672c\u5bb6\u306e\u5bfe\u5fdc\u72b6\u6cc1\u3092\u9451\u307f\u3066rubygems.org\u306b\u306f\u767b\u9332\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u5f93\u3063\u3066\u3001`git clone`\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```bash\n# install rinflux\ngit clone https://github.com/winebarrel/rinflux.git\ncd rinflux\nbundle install\nbundle exec rake install\n\ncd ..\n\n# install fluent-plugin-rinflux\ngit clone https://github.com/winebarrel/fluent-plugin-rinflux.git\ncd fluent-plugin-rinflux\nbundle install\nbundle exec rake install\n```\n\n## fluent.conf\n\ndstat\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u53ce\u96c6\u307e\u3067\u306f\u4ee5\u4e0b\u306e\u30a8\u30f3\u30c8\u30ea\u3068\u540c\u3058\u3067\u3059\u3002\n\n* [fluentd+dstat+librato\u3067\u30b5\u30fc\u30d0\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u53ef\u8996\u5316\u3059\u308b - Qiita](http://qiita.com/winebarrel/items/ab9d8e0d2e331d68c6e7)\n\n`fluent.conf`\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```apache\n<source>\n  type dstat\n  tag dstat.${hostname}\n  option -clmdrn --freespace\n  delay 3\n</source>\n\n<filter>\n  type object_flatten\n  separator _\n  tr [\" /\", \"__\"]\n</filter>\n\n<filter>\n  type grep\n  exclude1 hostname .+\n</filter>\n\n<filter>\n  type record_map\n  map1 record.each {|k, v| new_record[k] = v.to_f }\n</filter>\n\n<match dstat.**>\n  type rinflux\n  db mydb\n  flush_interval 1s\n</match>\n```\n\nInfluxDB\u306b\u6d41\u308c\u308b\u30ec\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```json\n{\"dstat_net_total_send\":1138.667}\n{\"dstat___used\":3879976960.0}\n{\"dstat___free\":38361186304.0}\n{\"dstat__dev_used\":12288.0}\n{\"dstat__dev_free\":251576320.0}\n{\"dstat__run_used\":360448.0}\n{\"dstat__run_free\":51019776.0}\n{\"dstat__rpc_pipefs_used\":0.0}\n{\"dstat__rpc_pipefs_free\":0.0}\n{\"dstat__systemd_used\":0.0}\n{\"dstat__systemd_free\":0.0}\n{\"dstat__vagrant_used\":68592746496.0}\n{\"dstat__vagrant_free\":430489739264.0}\n{\"dstat_total_cpu_usage_usr\":0.0}\n{\"dstat_total_cpu_usage_sys\":0.667}\n{\"dstat_total_cpu_usage_idl\":99.333}\n{\"dstat_total_cpu_usage.wai\":0.0}\n```\n\n# Grapana\u306b\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8ffd\u52a0\n\u7ba1\u7406\u30e6\u30fc\u30b6\uff08admin/admin\uff09\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/20100/e450d77c-69d6-d5eb-34b1-c09ae13268e1.png)\n\n\u307e\u3060\u30a2\u30eb\u30d5\u30a1\u7248\u3068\u306e\u3053\u3068\u3002\n\n```\nData source implementation: Alpha stage\n\nThis data source implementation is not complete, a lot is not working and implemented yet\nUpdates can be tracked, and feedback directed here #1525.\n```\n\n# Grapana\u306b\u30b0\u30e9\u30d5\u3092\u8ffd\u52a0\n\nGrapana\u306b\u9069\u5f53\u306b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u3063\u3066\u3001\u30b0\u30e9\u30d5\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/20100/377a9c9e-55dc-0d25-ab83-cf89ace08ade.png)\n\n\u30b0\u30e9\u30d5\u3092\u8ffd\u52a0\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304c\u4f5c\u308c\u307e\u3059\u3002\n\n![](https://qiita-image-store.s3.amazonaws.com/0/20100/d9d4e098-22c6-6fa2-e740-41fdc51ee576.png)\n", "tags": ["fluentd", "dstat", "influxdb", "grafana"]}