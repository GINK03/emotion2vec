{"context": " More than 1 year has passed since last update.\u3053\u3093\u3070\u3093\u306f\u3001cloudpack \u306e @dz_ \u3053\u3068\u5927\u5e73\u304b\u3065\u307f\u3067\u3059\u3002\n\nPrologue - \u306f\u3058\u3081\u306b\n\u524d\u56de\u300cCheck! Serf - \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\u300d\u306b\u5f15\u304d\u7d9a\u304d\u3001Serf \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u9032\u3081\u307e\u3059\u3002\n\u3053\u3053\u3067\u8aad\u307f\u89e3\u3044\u305f\u5185\u5bb9\u306f\u3001\u3053\u3061\u3089\u300cSerf \u306f\u3058\u3081\u3066\u306e\u904b\u7528\u30c4\u30fc\u30eb \u301c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8d77\u52d5\u300d\u306b\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002\n\u4f75\u305b\u3066\u3054\u89a7\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\u3002\n\nSerf: \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8d77\u52d5\nSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8d77\u52d5\u306b\u3064\u3044\u3066\u3001\u300cRun the Agent\u300d\u3092\u8aad\u307f\u307e\u3059\u3002\n\nRun the Serf Agent\nAfter Serf is installed, the agent must be run. The agent is a lightweight process that runs until told to quit and maintains cluster membership and communication. The agent must be run for every node that will be part of the cluster.\n\n\"Serf\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3068\u3001\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u8efd\u91cf\u306a\u30d7\u30ed\u30bb\u30b9\u3067\u3001\u7d42\u4e86\u3092\u8a00\u3044\u6e21\u3055\u308c\u308b\u307e\u3067\u306f\u7a3c\u50cd\u3057\u7d9a\u3051\u3001\u30af\u30e9\u30b9\u30bf\u306e\u30e1\u30f3\u30d0\u30b7\u30c3\u30d7\u3068\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\u3053\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3001\u30af\u30e9\u30b9\u30bf\u306b\u5c5e\u3059\u308b\u3059\u3079\u3066\u306e\u30ce\u30fc\u30c9\u3067\u7a3c\u50cd\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\"\n\nIt is possible to run multiple agents, and thus participate in multiple Serf clusters. For example, you may want to run a separate Serf cluster to maintain web server membership info for a load balancer from another Serf cluster that manages membership of Memcached nodes, but perhaps the web servers need to be part of the Memcached cluster too so they can be notified when Memcached nodes come online or go offline. Other examples include a Serf cluster within a datacenter, and a seperate cluster used for cross WAN gossip which has more relaxed timing.\n\n\"\u8907\u6570\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3001\u3055\u3089\u306b\u8907\u6570\u306eSerf\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u305f\u3068\u3048\u3070\u3001Memcached\u30ce\u30fc\u30c9\u306e\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7\u3092\u7ba1\u7406\u3059\u308bSerf\u30af\u30e9\u30b9\u30bf\u3068\u306f\u5225\u306b\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306bweb\u30b5\u30fc\u30d0\u7528\u306e\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308bSerf\u30af\u30e9\u30b9\u30bf\u3092\u8d77\u52d5\u3057\u305f\u3044\u3068\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306fweb\u30b5\u30fc\u30d0\u306fMemcached\u30af\u30e9\u30b9\u30bf\u306e\u4e00\u90e8\u3067\u3042\u308a\u3001\u305d\u308c\u3067\u305d\u308c\u3089\u306fMemcached\u30ce\u30fc\u30c9\u304c\u30aa\u30f3\u30e9\u30a4\u30f3\u306b\u306a\u3063\u305f\u308a\u30aa\u30d5\u30e9\u30a4\u30f3\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u901a\u77e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4ed6\u306e\u4f8b\u3067\u306f\u3001\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u5185\u306eSerf\u30af\u30e9\u30b9\u30bf\u3084\u3001\u3088\u308a\u7de9\u3084\u304b\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u6271\u3046(?) cross WAN gossip \u3092\u4f7f\u3046\u5206\u96e2\u3055\u308c\u305f\u30af\u30e9\u30b9\u30bf\u304c\u3042\u308a\u307e\u3059\u3002\"\n\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u958b\u59cb\n\nStarting the Agent\nFor simplicity, we'll run a single Serf agent right now:\n\n\"\u308f\u304b\u308a\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001\u5358\u4e00\u306eSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u3055\u3063\u3068\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046:\"\n$ serf agent\n==> Starting Serf agent...\n==> Serf agent running!\n    Node name: 'foobar'\n    Bind addr: '0.0.0.0:7946'\n     RPC addr: '127.0.0.1:7373'\n\n==> Log data will now stream in as it occurs:\n\n2013/10/21 18:57:15 [INFO] Serf agent starting\n2013/10/21 18:57:15 [INFO] serf: EventMemberJoin: mitchellh.local 10.0.1.60\n2013/10/21 18:57:15 [INFO] Serf agent started\n2013/10/21 18:57:15 [INFO] agent: Received event: member-join\n\n\nAs you can see, the Serf agent has started and has output some log data. From the log data, you can see that a member has joined the cluster. This member is yourself.\n\n\"\u898b\u3066\u308f\u304b\u308b\u3088\u3046\u306b\u3001Serf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3044\u304f\u3064\u304b\u306e\u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u3053\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u304b\u3089\u308f\u304b\u308b\u3053\u3068\u306f\u3001\u30e1\u30f3\u30d0\u30fc\u304c\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3057\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u305d\u306e\u30e1\u30f3\u30d0\u30fc\u306f\u81ea\u8eab\u3067\u3059\u3002\"\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30e1\u30f3\u30d0\u30fc\n\nCluster Members\nIf you run serf members in another terminal, you can see the members of the Serf cluster. You should only see one member (yourself). We'll cover joining clusters in the next section.\n\n\"\u4ed6\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 serf members \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Serf\u304f\u3089\u3059\u305f\u306e\u30e1\u30f3\u30d0\u30fc\u4e00\u89a7\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u6bb5\u968e\u3067\u306f\u30011\u30e1\u30f3\u30d0\u30fc\u3060\u3051\u304c\u898b\u3048\u308b\u306f\u305a\u3067\u3059\u3002(\u3042\u306a\u305f\u304c\u7a3c\u50cd\u3055\u305b\u3066\u3044\u308b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u81ea\u8eab\u3067\u3059)\u3002\u30af\u30e9\u30b9\u30bf\u3078\u306e\u53c2\u52a0\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u6271\u3044\u307e\u3059\u3002\"\n$ serf members\nmitchellh.local    10.0.1.60    alive\n\n\nThis command, along with many others, communicates with a running Serf agent via an internal RPC protocol. When starting the Serf agent, you may have noticed that it tells you the \"RPC addr\". This is the address that commands such as serf members use to communicate with the agent.\n\n\"\u4ed6\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f \u5185\u90e8\u306eRPC\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u901a\u3058\u3066\u3001\u7a3c\u50cd\u4e2d\u306eSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u901a\u4fe1\u3057\u307e\u3059\u3002Serf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u958b\u59cb\u3059\u308b\u3068\u3001\u3042\u306a\u305f\u306f 'RPC addr' \u3092\u4f1d\u3048\u308b\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\u3053\u308c\u306f serf members \u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u304c\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u901a\u4fe1\u3059\u308b\u305f\u3081\u306b\u4f7f\u3046\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\"\n\nBy default, RPC listens only on loopback, so it is inaccessible outside of your machine for security reasons.\n\n\"\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001RPC\u306f loopback \u4e0a\u3067\u306e\u307f\u53d7\u3051\u4ed8\u3051\u3066\u3044\u308b\u306e\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u7406\u7531\u3067\u3042\u306a\u305f\u306e\u30de\u30b7\u30f3\u306e\u5916\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002\"\n\nIf you're running multiple Serf agents, you'll have to specify an -rpc-addr to both the agent and any commands so that it doesn't collide with other agents.\n\n\"\u3082\u3057\u8907\u6570\u306eSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u7a3c\u50cd\u3059\u308b\u306a\u3089\u3001\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u5404\u30b3\u30de\u30f3\u30c9\u4e21\u65b9\u306b -rpc-addr \u3092\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u306b\u3088\u308a\u307b\u304b\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u885d\u7a81\u3059\u308b\u3053\u3068\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002\"\n\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u505c\u6b62\n\nStopping the Agent\nYou can use Ctrl-C (the interrupt signal) to gracefully halt the agent. After interrupting the agent, you should see it leave the cluster gracefully and shut down.\n\n\"\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u6b63\u5e38\u306b\u7d42\u4e86\u3059\u308b\u306b\u306f\u3001Ctrl-C (\u5272\u308a\u8fbc\u307f\u30b7\u30b0\u30ca\u30eb) \u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306b\u5272\u308a\u8fbc\u307f\u3092\u767a\u884c\u3059\u308b\u3068\u3001\u6b63\u5e38\u306b\u30af\u30e9\u30b9\u30bf\u304b\u3089\u96e2\u8131\u3057\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b\u306e\u304c\u308f\u304b\u308b\u3067\u3057\u3087\u3046\u3002\"\n\nBy gracefully leaving, Serf notifies other cluster members that the node left. If you had forcibly killed the agent process, other members of the cluster would have detected that the node failed. This can be a crucial difference depending on what your use case of Serf is. Serf will automatically try to reconnect to failed nodes, which allows it to recover from certain network conditions, while left node s are no longer contacted.\n\n\u6b63\u5e38\u306b\u96e2\u8131\u3059\u308b\u3053\u3068\u3067\u3001Serf\u306f\u30af\u30e9\u30b9\u30bf\u306e\u307b\u304b\u306e\u30e1\u30f3\u30d0\u30fc\u306b\u30ce\u30fc\u30c9\u304c \u629c\u3051\u308b \u3053\u3068\u3092\u901a\u77e5\u3057\u307e\u3059\u3002\u3082\u3057\u5f37\u5236\u7684\u306b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7d42\u4e86\u3059\u308b\u3068\u3001\u30af\u30e9\u30b9\u30bf\u306e\u307b\u304b\u306e\u30e1\u30f3\u30d0\u30fc\u306f\u305d\u306e\u30ce\u30fc\u30c9\u304c \u969c\u5bb3\u3092\u8d77\u3053\u3057\u305f \u3068\u691c\u77e5\u3057\u307e\u3059\u3002\u3053\u308c\u306fSerf\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u4f9d\u5b58\u3057\u305f\u91cd\u8981\u306a\u9055\u3044\u3067\u3059\u3002Serf\u306f\u969c\u5bb3\u3092\u8d77\u3053\u3057\u305f\u30ce\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u81ea\u52d5\u7684\u306b\u518d\u63a5\u7d9a\u3092\u8a66\u307f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u72b6\u6cc1\u304b\u3089\u5fa9\u5e30\u3057\u3066\u304f\u308b\u306e\u3092\u8a31\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u5bfe\u3057\u3066\u3001\u81ea\u3089\u96e2\u8131\u3057\u305f\u30ce\u30fc\u30c9\u306b\u95a2\u3057\u3066\u306f\u305d\u308c\u4ee5\u4e0a\u30b3\u30f3\u30bf\u30af\u30c8\u3092\u3068\u308a\u307e\u305b\u3093\u3002\n\nEpilogue -\u3000\u304a\u308f\u308a\u306b\n\u4e00\u90e8\u3001\u8a33\u304c\u602a\u3057\u3044\u3067\u3059\u2026 \u7cbe\u9032\u305b\u306d\u3070\u2026\uff01\n\u7d9a\u3051\u3066 \u300cJoin a Cluster\u300d \u3092\u8aad\u3093\u3067\u3044\u304d\u307e\u3059\u3088\u30fc\uff01\n\nQiita \u3067\u306e Serf \u95a2\u9023\u8a18\u4e8b\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n\nSerf - Getting Started \uff5e \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u307f\u307e\u3059\nCheck! Serf - \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\n\nSerf \u307e\u3068\u3081\u3001Amazon Lambda \u306b\u3064\u3044\u3066\u3001\u3053\u3061\u3089\u3067\u8a18\u4e8b\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3082\u3057\u3054\u8208\u5473\u3042\u308c\u3070\u3069\u3046\u305e\uff01\n\nSerf \u306f\u3058\u3081\u3066\u306e\u904b\u7528\u30c4\u30fc\u30eb \u301c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8d77\u52d5\n\u5927\u5e73 \u304b\u3065\u307f \u306e\u8a18\u4e8b\u4e00\u89a7\n\n\u3053\u3093\u3070\u3093\u306f\u3001[cloudpack][] \u306e @dz_ \u3053\u3068\u5927\u5e73\u304b\u3065\u307f\u3067\u3059\u3002\n\n[cloudpack]:https://cloudpack.jp/ \"cloudpack\uff08\u30af\u30e9\u30a6\u30c9\u30d1\u30c3\u30af\uff09 400\u793e\u3092\u8d85\u3048\u308b\u5c0e\u5165\u5b9f\u7e3e! EC2\u306a\u3069AWS\u30af\u30e9\u30a6\u30c9\u306e\u5c0e\u5165\u8a2d\u8a08\u3001\u69cb\u7bc9\u3001\u904b\u7528\u4fdd\u5b88\u30b5\u30fc\u30d3\u30b9\"\n\nPrologue - \u306f\u3058\u3081\u306b\n====================================================\n\u524d\u56de\u300c[Check! Serf - \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066](http://qiita.com/dz_/items/16a3bc72dfabe05294c5 \"Check! Serf - \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\")\u300d\u306b\u5f15\u304d\u7d9a\u304d\u3001[Serf][] \u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u9032\u3081\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u8aad\u307f\u89e3\u3044\u305f\u5185\u5bb9\u306f\u3001\u3053\u3061\u3089\u300c<a href=\"http://blog.cloudpack.jp/2014/12/19/serf-my-first-orchestration-tool-vol1-install-launch-agent/\" title=\"Serf \u306f\u3058\u3081\u3066\u306e\u904b\u7528\u30c4\u30fc\u30eb \u301c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8d77\u52d5\" target=\"_balnk\">Serf \u306f\u3058\u3081\u3066\u306e\u904b\u7528\u30c4\u30fc\u30eb \u301c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8d77\u52d5</a>\u300d\u306b\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u3002\n\u4f75\u305b\u3066\u3054\u89a7\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\u3002\n\n[Serf]:https://serfdom.io/ \"Serf by HashiCorp\"\n\nSerf: \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8d77\u52d5\n====================================================\nSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8d77\u52d5\u306b\u3064\u3044\u3066\u3001\u300c[Run the Agent][]\u300d\u3092\u8aad\u307f\u307e\u3059\u3002\n\n[Run the Agent]:https://serfdom.io/intro/getting-started/agent.html \"Run the Agent - Serf by HashiCorp\"\n\n> Run the Serf Agent\n> After Serf is installed, the agent must be run. The agent is a lightweight process that runs until told to quit and maintains cluster membership and communication. The agent must be run for every node that will be part of the cluster.\n\n&quot;Serf\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u3068\u3001\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u8efd\u91cf\u306a\u30d7\u30ed\u30bb\u30b9\u3067\u3001\u7d42\u4e86\u3092\u8a00\u3044\u6e21\u3055\u308c\u308b\u307e\u3067\u306f\u7a3c\u50cd\u3057\u7d9a\u3051\u3001\u30af\u30e9\u30b9\u30bf\u306e\u30e1\u30f3\u30d0\u30b7\u30c3\u30d7\u3068\u30b3\u30df\u30e5\u30cb\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\u3053\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3001\u30af\u30e9\u30b9\u30bf\u306b\u5c5e\u3059\u308b\u3059\u3079\u3066\u306e\u30ce\u30fc\u30c9\u3067\u7a3c\u50cd\u3057\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002&quot;\n\n> It is possible to run multiple agents, and thus participate in multiple Serf clusters. For example, you may want to run a separate Serf cluster to maintain web server membership info for a load balancer from another Serf cluster that manages membership of Memcached nodes, but perhaps the web servers need to be part of the Memcached cluster too so they can be notified when Memcached nodes come online or go offline. Other examples include a Serf cluster within a datacenter, and a seperate cluster used for cross WAN gossip which has more relaxed timing.\n\n&quot;\u8907\u6570\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u7a3c\u50cd\u3055\u305b\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3001\u3055\u3089\u306b\u8907\u6570\u306eSerf\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\u305f\u3068\u3048\u3070\u3001Memcached\u30ce\u30fc\u30c9\u306e\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7\u3092\u7ba1\u7406\u3059\u308bSerf\u30af\u30e9\u30b9\u30bf\u3068\u306f\u5225\u306b\u3001\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc\u3067\u5229\u7528\u3059\u308b\u305f\u3081\u306bweb\u30b5\u30fc\u30d0\u7528\u306e\u30e1\u30f3\u30d0\u30fc\u30b7\u30c3\u30d7\u60c5\u5831\u3092\u7ba1\u7406\u3059\u308bSerf\u30af\u30e9\u30b9\u30bf\u3092\u8d77\u52d5\u3057\u305f\u3044\u3068\u3057\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u5834\u5408\u306b\u3088\u3063\u3066\u306fweb\u30b5\u30fc\u30d0\u306fMemcached\u30af\u30e9\u30b9\u30bf\u306e\u4e00\u90e8\u3067\u3042\u308a\u3001\u305d\u308c\u3067\u305d\u308c\u3089\u306fMemcached\u30ce\u30fc\u30c9\u304c\u30aa\u30f3\u30e9\u30a4\u30f3\u306b\u306a\u3063\u305f\u308a\u30aa\u30d5\u30e9\u30a4\u30f3\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u901a\u77e5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u4ed6\u306e\u4f8b\u3067\u306f\u3001\u30c7\u30fc\u30bf\u30bb\u30f3\u30bf\u30fc\u5185\u306eSerf\u30af\u30e9\u30b9\u30bf\u3084\u3001\u3088\u308a\u7de9\u3084\u304b\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u6271\u3046(?) cross WAN gossip \u3092\u4f7f\u3046\u5206\u96e2\u3055\u308c\u305f\u30af\u30e9\u30b9\u30bf\u304c\u3042\u308a\u307e\u3059\u3002&quot;\n\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u958b\u59cb\n---------------------------------------------------\n> Starting the Agent\n> For simplicity, we'll run a single Serf agent right now:\n\n&quot;\u308f\u304b\u308a\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001\u5358\u4e00\u306eSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u3055\u3063\u3068\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u3087\u3046:&quot;\n\n```bash\n$ serf agent\n==> Starting Serf agent...\n==> Serf agent running!\n    Node name: 'foobar'\n    Bind addr: '0.0.0.0:7946'\n     RPC addr: '127.0.0.1:7373'\n\n==> Log data will now stream in as it occurs:\n\n2013/10/21 18:57:15 [INFO] Serf agent starting\n2013/10/21 18:57:15 [INFO] serf: EventMemberJoin: mitchellh.local 10.0.1.60\n2013/10/21 18:57:15 [INFO] Serf agent started\n2013/10/21 18:57:15 [INFO] agent: Received event: member-join\n```\n\n> As you can see, the Serf agent has started and has output some log data. From the log data, you can see that a member has joined the cluster. This member is yourself.\n\n&quot;\u898b\u3066\u308f\u304b\u308b\u3088\u3046\u306b\u3001Serf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306f\u3044\u304f\u3064\u304b\u306e\u30c7\u30fc\u30bf\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\u3053\u306e\u30ed\u30b0\u30c7\u30fc\u30bf\u304b\u3089\u308f\u304b\u308b\u3053\u3068\u306f\u3001\u30e1\u30f3\u30d0\u30fc\u304c\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3057\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\u305d\u306e\u30e1\u30f3\u30d0\u30fc\u306f\u81ea\u8eab\u3067\u3059\u3002&quot;\n\n\u30af\u30e9\u30b9\u30bf\u306e\u30e1\u30f3\u30d0\u30fc\n-----------------------------------------------------\n> Cluster Members\n> If you run `serf members` in another terminal, you can see the members of the Serf cluster. You should only see one member (yourself). We'll cover joining clusters in the next section.\n\n&quot;\u4ed6\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067 `serf members` \u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Serf\u304f\u3089\u3059\u305f\u306e\u30e1\u30f3\u30d0\u30fc\u4e00\u89a7\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u3053\u306e\u6bb5\u968e\u3067\u306f\u30011\u30e1\u30f3\u30d0\u30fc\u3060\u3051\u304c\u898b\u3048\u308b\u306f\u305a\u3067\u3059\u3002(\u3042\u306a\u305f\u304c\u7a3c\u50cd\u3055\u305b\u3066\u3044\u308b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u81ea\u8eab\u3067\u3059)\u3002\u30af\u30e9\u30b9\u30bf\u3078\u306e\u53c2\u52a0\u306b\u3064\u3044\u3066\u306f\u6b21\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u6271\u3044\u307e\u3059\u3002&quot;\n\n```bash\n$ serf members\nmitchellh.local    10.0.1.60    alive\n```\n\n> This command, along with many others, communicates with a running Serf agent via an internal RPC protocol. When starting the Serf agent, you may have noticed that it tells you the \"RPC addr\". This is the address that commands such as `serf members` use to communicate with the agent.\n\n&quot;\u4ed6\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f \u5185\u90e8\u306eRPC\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u901a\u3058\u3066\u3001\u7a3c\u50cd\u4e2d\u306eSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u901a\u4fe1\u3057\u307e\u3059\u3002Serf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u958b\u59cb\u3059\u308b\u3068\u3001\u3042\u306a\u305f\u306f &#39;RPC addr&#39; \u3092\u4f1d\u3048\u308b\u901a\u77e5\u3092\u53d7\u3051\u53d6\u308a\u307e\u3059\u3002\u3053\u308c\u306f `serf members` \u306e\u3088\u3046\u306a\u30b3\u30de\u30f3\u30c9\u304c\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u901a\u4fe1\u3059\u308b\u305f\u3081\u306b\u4f7f\u3046\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002&quot;\n\n> By default, RPC listens only on loopback, so it is inaccessible outside of your machine for security reasons.\n\n&quot;\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001RPC\u306f loopback \u4e0a\u3067\u306e\u307f\u53d7\u3051\u4ed8\u3051\u3066\u3044\u308b\u306e\u3067\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u7406\u7531\u3067\u3042\u306a\u305f\u306e\u30de\u30b7\u30f3\u306e\u5916\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u305b\u3093\u3002&quot;\n\n> If you're running multiple Serf agents, you'll have to specify an `-rpc-addr` to both the agent and any commands so that it doesn't collide with other agents.\n\n&quot;\u3082\u3057\u8907\u6570\u306eSerf\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u7a3c\u50cd\u3059\u308b\u306a\u3089\u3001\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u5404\u30b3\u30de\u30f3\u30c9\u4e21\u65b9\u306b `-rpc-addr` \u3092\u6307\u5b9a\u3057\u306a\u3051\u308c\u3070\u306a\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u306b\u3088\u308a\u307b\u304b\u306e\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3068\u885d\u7a81\u3059\u308b\u3053\u3068\u304c\u306a\u304f\u306a\u308a\u307e\u3059\u3002&quot;\n\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u505c\u6b62\n-----------------------------------------------------\n> Stopping the Agent\n> You can use `Ctrl-C` (the interrupt signal) to gracefully halt the agent. After interrupting the agent, you should see it leave the cluster gracefully and shut down.\n\n&quot;\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u6b63\u5e38\u306b\u7d42\u4e86\u3059\u308b\u306b\u306f\u3001`Ctrl-C` (\u5272\u308a\u8fbc\u307f\u30b7\u30b0\u30ca\u30eb) \u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306b\u5272\u308a\u8fbc\u307f\u3092\u767a\u884c\u3059\u308b\u3068\u3001\u6b63\u5e38\u306b\u30af\u30e9\u30b9\u30bf\u304b\u3089\u96e2\u8131\u3057\u30b7\u30e3\u30c3\u30c8\u30c0\u30a6\u30f3\u3059\u308b\u306e\u304c\u308f\u304b\u308b\u3067\u3057\u3087\u3046\u3002&quot;\n\n> By gracefully leaving, Serf notifies other cluster members that the node *left*. If you had forcibly killed the agent process, other members of the cluster would have detected that the node failed. This can be a crucial difference depending on what your use case of Serf is. Serf will automatically try to reconnect to failed nodes, which allows it to recover from certain network conditions, while left node s are no longer contacted.\n\n\u6b63\u5e38\u306b\u96e2\u8131\u3059\u308b\u3053\u3068\u3067\u3001Serf\u306f\u30af\u30e9\u30b9\u30bf\u306e\u307b\u304b\u306e\u30e1\u30f3\u30d0\u30fc\u306b\u30ce\u30fc\u30c9\u304c *\u629c\u3051\u308b* \u3053\u3068\u3092\u901a\u77e5\u3057\u307e\u3059\u3002\u3082\u3057\u5f37\u5236\u7684\u306b\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7d42\u4e86\u3059\u308b\u3068\u3001\u30af\u30e9\u30b9\u30bf\u306e\u307b\u304b\u306e\u30e1\u30f3\u30d0\u30fc\u306f\u305d\u306e\u30ce\u30fc\u30c9\u304c *\u969c\u5bb3\u3092\u8d77\u3053\u3057\u305f* \u3068\u691c\u77e5\u3057\u307e\u3059\u3002\u3053\u308c\u306fSerf\u306e\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u4f9d\u5b58\u3057\u305f\u91cd\u8981\u306a\u9055\u3044\u3067\u3059\u3002Serf\u306f\u969c\u5bb3\u3092\u8d77\u3053\u3057\u305f\u30ce\u30fc\u30c9\u306b\u5bfe\u3057\u3066\u81ea\u52d5\u7684\u306b\u518d\u63a5\u7d9a\u3092\u8a66\u307f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u72b6\u6cc1\u304b\u3089\u5fa9\u5e30\u3057\u3066\u304f\u308b\u306e\u3092\u8a31\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u5bfe\u3057\u3066\u3001\u81ea\u3089\u96e2\u8131\u3057\u305f\u30ce\u30fc\u30c9\u306b\u95a2\u3057\u3066\u306f\u305d\u308c\u4ee5\u4e0a\u30b3\u30f3\u30bf\u30af\u30c8\u3092\u3068\u308a\u307e\u305b\u3093\u3002\n\n\nEpilogue -\u3000\u304a\u308f\u308a\u306b\n====================================================\n\u4e00\u90e8\u3001\u8a33\u304c\u602a\u3057\u3044\u3067\u3059\u2026 \u7cbe\u9032\u305b\u306d\u3070\u2026\uff01\n\n\u7d9a\u3051\u3066 \u300c[Join a Cluster][]\u300d \u3092\u8aad\u3093\u3067\u3044\u304d\u307e\u3059\u3088\u30fc\uff01\n[Join a Cluster]:https://serfdom.io/intro/getting-started/join.html \"Join a Cluster - Serf by HashiCorp\"\n\n----\n\nQiita \u3067\u306e Serf \u95a2\u9023\u8a18\u4e8b\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n\n- [Serf - Getting Started \uff5e \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u307f\u307e\u3059](http://qiita.com/dz_/items/9b0aacc1b86eff2a1147)\n- [Check! Serf - \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066](http://qiita.com/dz_/items/16a3bc72dfabe05294c5 \"Check! Serf - \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u3064\u3044\u3066\")\n\n\nSerf \u307e\u3068\u3081\u3001Amazon Lambda \u306b\u3064\u3044\u3066\u3001\u3053\u3061\u3089\u3067\u8a18\u4e8b\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3082\u3057\u3054\u8208\u5473\u3042\u308c\u3070\u3069\u3046\u305e\uff01\n\n- <a href=\"http://blog.cloudpack.jp/2014/12/19/serf-my-first-orchestration-tool-vol1-install-launch-agent/\" title=\"Serf \u306f\u3058\u3081\u3066\u306e\u904b\u7528\u30c4\u30fc\u30eb \u301c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8d77\u52d5\" target=\"_balnk\">Serf \u306f\u3058\u3081\u3066\u306e\u904b\u7528\u30c4\u30fc\u30eb \u301c \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8d77\u52d5</a>\n- <a href=\"http://blog.cloudpack.jp/author/oohira/\" title=\"\u5927\u5e73 \u304b\u3065\u307f \u306e\u8a18\u4e8b\u4e00\u89a7 | cloudpack\u6280\u8853\u60c5\u5831\u30b5\u30a4\u30c8\"\u3000target=\"_blank\">\u5927\u5e73 \u304b\u3065\u307f \u306e\u8a18\u4e8b\u4e00\u89a7</a>\n", "tags": ["serf", "\u904b\u7528"]}