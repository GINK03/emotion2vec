{"context": "\n\n\u3053\u306e\u8a18\u4e8b\u3067\u308f\u304b\u308b\u3053\u3068\n\nSpacewalk \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u7c21\u5358\u306a\u4f7f\u3044\u65b9\nRHEL \u306e\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u306e\u6271\u3044\nyum \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30b3\u30d4\u30fc\n\n\nSpacewalk \u3068\u306f\nLinux (\u4e3b\u306b Red Hat Enterprise Linux) \u306e\u7ba1\u7406\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u306f\u3053\u3061\u3089\u516c\u5f0f\u30b5\u30a4\u30c8\u3067\u3002\n\u4ed6\u306b\u306f\u307b\u3068\u3093\u3069\u7d39\u4ecb\u8a18\u4e8b\u3082\u898b\u5f53\u305f\u3089\u305a\u3001\u304b\u306a\u308a\u82e6\u52b4\u3057\u307e\u3057\u305f\u3002\nhttp://www.spacewalkproject.org/\n\n\u7d39\u4ecb\u3059\u308b\u74b0\u5883\nOS \u306f\u5168\u3066 RHEL 6 \u3067\u3059\u3002\n\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u305f\u3081\u306b\u6539\u3081\u3066 VirtualBox \u3067\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\n\u5404\u30b5\u30fc\u30d0\u304b\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u306f\u51fa\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u540d\u524d\u89e3\u6c7a\u306f\u9069\u5207\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nSpacewalk\u30b5\u30fc\u30d0\n\n\nspw: 192.168.0.10, 192.168.56.101\n\n\n\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\n\n\nap1: 192.168.56.102\nap2: 192.168.56.103\n\n\n\n\nSpacewalk \u30b5\u30fc\u30d0\u306b\u306f\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092\u5341\u5206\u306b\u7528\u610f\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n100GB \u307b\u3069\u3042\u308c\u3070\u5341\u5206\u304b\u3068\u601d\u3044\u307e\u3059\u3002\nSpacewalk \u306e\u7ba1\u7406\u6a5f\u80fd\u306b\u306f\u3055\u307e\u3056\u307e\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u304c\u3001\n\u4eca\u56de\u306f RPM \u3092\u914d\u5e03\u3059\u308b\u6a5f\u80fd\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u5bfe\u8c61\u3068\u3057\u3066\u306f\u3001RHEL 6 \u3084 JBoss EAP 6 \u3092\u4f8b\u306b\u3057\u3066\u307f\u307e\u3059\u3002\nDeveloper \u5411\u3051\u306e\u8a66\u7528\u30e9\u30a4\u30bb\u30f3\u30b9\u3092\u4f7f\u3063\u3066\u691c\u8a3c\u3057\u307e\u3057\u305f\u304c\u3001\n\u672c\u756a\u3067\u306f\u304d\u3061\u3093\u3068\u8cb7\u3044\u307e\u3057\u3087\u3046\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n2016/8 \u6642\u70b9\u3067\u6700\u65b0\u306e 2.5 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n\u5fc5\u8981\u306a\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n# rpm -Uvh http://yum.spacewalkproject.org/2.5/RHEL/6/x86_64/spacewalk-repo-2.5-3.el6.noarch.rpm\n...\n# rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm\n...\n\n# cat > /etc/yum.repos.d/jpackage-generic.repo << EOF\n[jpackage-generic]\nname=JPackage generic\n#baseurl=http://mirrors.dotsrc.org/pub/jpackage/5.0/generic/free/\nmirrorlist=http://www.jpackage.org/mirrorlist.php?dist=generic&type=free&release=5.0\nenabled=1\ngpgcheck=1\ngpgkey=http://www.jpackage.org/jpackage.asc\nEOF\n\n\nrpm \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nDB (PostgreSQL \u3092\u9078\u3073\u307e\u3057\u305f) \u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n# yum install spacewalk-setup-postgresql\n...\n\n\u3044\u3088\u3044\u3088\u672c\u4f53\u3067\u3059\u3002\u3053\u308c\u306f\u304b\u306a\u308a\u5927\u304d\u3044\u306e\u3067\u8981\u6ce8\u610f\u3002\n\u5148\u306b JBoss EAP 6 \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u308b\u3068\u3001\n\u3044\u308d\u3044\u308d\u91cd\u8907\u3057\u3066\u4f9d\u5b58\u95a2\u4fc2\u304c\u3084\u3084\u3053\u3057\u304f\u306a\u308b\u306e\u3067\u3053\u3053\u3067\u306f\u3042\u3089\u304b\u3058\u3081\u7121\u52b9\u306b\u3057\u3066\u304b\u3089\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n# yum install spacewalk-postgresql\n...\n\n250\u500b\u304f\u3089\u3044\u306e RPM \u3092\u5165\u308c\u3066\u3001\u5fc5\u8981\u306a\u3082\u306e\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u521d\u671f\u8a2d\u5b9a\n\u521d\u671f\u8a2d\u5b9a\u306f\u3042\u3089\u304b\u3058\u3081\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u6d41\u3059\u306e\u304c\u7c21\u5358\u3067\u3059\u3002\n\nanswerfile.txt\nadmin-email = root@localhost\nssl-set-org = Spacewalk\nssl-set-org-unit = spacewalk\nssl-set-city = Tokyo\nssl-set-state = Tokyo\nssl-set-country = JP\nssl-password = spacewalk\nssl-set-email = root@localhost\nssl-config-sslvhost = Y\ndb-backend=postgresql\ndb-name=spaceschema\ndb-user=spaceuser\ndb-password=spacepw\ndb-host=localhost\ndb-port=5432\nenable-tftp=N\n\n\nspacewalk-setup \u3067\u521d\u671f\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\n# spacewalk-setup --answer-file=answerfile.txt\n* Loading answer file: answerfile.txt.\n** Database: Setting up database connection for PostgreSQL backend.\n** Database: Installing the database:\n** Database: This is a long process that is logged in:\n** Database:   /var/log/rhn/install_db.log\n*** Progress: #\n** Database: Installation complete.\n** Database: Populating database.\n*** Progress: ############################\n* Configuring tomcat.\n* Setting up users and groups.\n** GPG: Initializing GPG and importing key.\n** GPG: Creating /root/.gnupg directory\n* Performing initial configuration.\n* Configuring apache SSL virtual host.\n** /etc/httpd/conf.d/ssl.conf has been backed up to ssl.conf-swsave\n* Configuring jabberd.\n* Creating SSL certificates.\n** SSL: Generating CA certificate.\n** SSL: Deploying CA certificate.\n** SSL: Generating server certificate.\n** SSL: Storing SSL certificates.\n* Deploying configuration files.\n* Update configuration in database.\n* Setting up Cobbler..\n* Restarting services.\nInstallation complete.\nVisit https://spw.localdomain to create the Spacewalk administrator account.\n\nSpacewalk \u306f Web \u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u64cd\u4f5c\u3057\u307e\u3059\u3002firewall \u3067 80, 443 \u3092\u958b\u3051\u307e\u3059\u3002\n# vi /etc/sysconfig/iptables\n(\u4e0b\u8a18\u306e2\u884c\u3092\u9069\u5207\u306a\u4f4d\u7f6e\u306b\u8ffd\u52a0)\n\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT\n\n# service iptables restart\n\n\nWeb\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u8a2d\u5b9a\nhttps://spw/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001Spacewalk \u306e\u7ba1\u7406\u753b\u9762\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u6700\u521d\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210 \u2192 \u7d44\u7e54\u306e\u4f5c\u6210\n\u7d44\u7e54\u540d\u3084\u30ed\u30b0\u30a4\u30f3\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3069\u3092\u9069\u5207\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u3053\u3053\u307e\u3067\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u306f\u7d42\u308f\u308a\u3067\u3059\u3002\u3042\u3068\u306f\u305d\u308c\u305e\u308c\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\nyum\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u540c\u671f\nSpacewalk\u30b5\u30fc\u30d0\u304b\u3089\u5404\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u306b\u914d\u5e03\u3059\u308b\u305f\u3081\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3001\n\u3053\u3053\u3067\u306f RHN (Red Hat Network) \u304b\u3089\u540c\u671f\u3059\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\nSpacewalk\u30b5\u30fc\u30d0\u3067\u5229\u7528\u3059\u308bRHN\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\n\u3042\u3089\u304b\u3058\u3081\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u3089\u3092\u65e5\u3005\u540c\u671f\u3057\u3066\u3001\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u306b\u914d\u5e03\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nRHEL 6\n\n\nrhel-6-server-rpms\nrhel-6-server-eus-rpms\nrhel-server-rhscl-6-rpms\n\n\nJBoss EAP 6\n\n\njb-eap-6-for-rhel-6-server-rpms\n\n\n\nsubscription-manager \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n# subscription-manager repos --list-enabled\n\n\n\u540c\u671f\u65b9\u6cd5\nreposync \u3067\u540c\u671f\u3057\u307e\u3059\u3002\n\u5185\u90e8\u7528\u306b\u7acb\u3066\u305f Apache HTTPD \u304b\u3089\u898b\u3048\u308b\u3068\u3053\u308d\u306b\u540c\u671f\u3059\u308b\u3068\u8a2d\u5b9a\u304c\u697d\u306b\u306a\u308a\u307e\u3059\u3002\n# cd /var/www/html\n# reposync -g -n --download-metadata --repoid=rhel-6-server-rpms\n...\n# reposync -g -n --download-metadata --repoid=rhel-6-server-eus-rpms\n...\n# reposync -g -n --download-metadata --repoid=rhel-server-rhscl-6-rpms\n...\n# reposync -g -n --download-metadata --repoid=jb-eap-6-for-rhel-6-server-rpms\n...\n\n\u540c\u671f\u3057\u305f\u5bfe\u8c61\u306b\u3064\u3044\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u3067\u3001\n\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u304b\u3089\u3082yum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\ncomps.xml \u306f rpm \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u306a\u3044\u3068\u30c0\u30e1\u307f\u305f\u3044\u3067\u3059\u3002\n# REPO=rhel-6-server-rpms\n# COMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\n# cp -f $REPO/$COMPS $REPO/Packages/\n# createrepo --update -p -g $COMPS $REPO/Packages\nSpawning worker 0 with 4019 pkgs\nWorkers Finished\nGathering worker results\n\nSaving Primary metadata\nSaving file lists metadata\nSaving other metadata\nGenerating sqlite DBs\nSqlite DBs complete\n\n\u4ed6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b createrepo \u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u8a2d\u5b9a\nRHN \u3068\u540c\u3058\u540d\u524d\u3092\u3064\u3051\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u5358\u7d14\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u2192\u300c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u7ba1\u7406\u300d\u306e\u753b\u9762\u3067\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u4f5c\u6210\u300d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nRHEL 6\n\n\nJBoss EAP 6\n\n\n\n\n\u3053\u306e\u3088\u3046\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u306f\u89aa\u5b50\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u5404\u30b7\u30b9\u30c6\u30e0\u3067\u306f1\u3064\u306e\u30d9\u30fc\u30b9\u30c1\u30e3\u30f3\u30cd\u30eb\u3060\u3051\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3057\u304b\u3067\u304d\u306a\u3044\u306e\u3067\u3001\n\u3088\u308a\u7d30\u304b\u304f\u7ba1\u7406\u3057\u305f\u3044\u5834\u5408\u306b\u306f\u304d\u3061\u3093\u3068\u8a2d\u8a08\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\n\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u2192\u300c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u7ba1\u7406\u300d\u2192\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u7ba1\u7406\u300d\u3067\n\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4f5c\u6210\u300d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30e9\u30d9\u30eb: spw-rhel-6\n\u30ea\u30dd\u30b8\u30c8\u30eaURL: http://spw.localdomain/rhel-6-server-rpms/Packages/\n\n\n\u30ea\u30dd\u30b8\u30c8\u30eaURL \u306f HTTPS \u306b\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u305f\u3081\u96e3\u89e3\u306a\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u4eca\u56de\u306f HTTP \u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u4ed6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u6b21\u306b\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u7d10\u4ed8\u3051\u307e\u3059\u3002\n\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u2192\u300c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u7ba1\u7406\u300d\u304b\u3089\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u9078\u629e\u3057\u3066\n\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u300d\u306e\u30bf\u30d6\u3067\u7d10\u4ed8\u3051\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u300d\u2192\u300c\u540c\u671f\u300d\u306e\u753b\u9762\u3067\u300c\u4eca\u3059\u3050\u540c\u671f\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001Spacewalk \u306b\u540c\u671f\u3055\u308c\u307e\u3059\u3002\n\u3053\u3053\u3067\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u306b\u767b\u9332\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5b9f\u884c\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n# spacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/rhel-6-server-rpms/Packages/ -t yum\n\n\u4ed6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3044\u3001\u540c\u671f\u3092\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u30b7\u30b9\u30c6\u30e0\u306e\u767b\u9332\n\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u306f\u30b7\u30b9\u30c6\u30e0\u3068\u547c\u3073\u307e\u3059\u3002\n\u307e\u305aSpacewalk\u30b5\u30fc\u30d0\u5074\u3067\u9375\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u300c\u30b7\u30b9\u30c6\u30e0\u300d\u2192\u300c\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u300d\u3067\u300c\u30ad\u30fc\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u8a73\u7d30\u300d\u306f\u30ad\u30fc\u306e\u540d\u524d\u306e\u3088\u3046\u3067\u3059\u3002\n\n\u30b7\u30b9\u30c6\u30e0\u5074\u3067\u306f\u3001\u307e\u305a Spacewalk \u7528\u306e\u8a3c\u660e\u66f8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u3053\u308c\u306f Spacewalk \u304c\u521d\u671f\u5316\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u3067\u3001RPM \u304c\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n[root@ap1 ~]# rpm -ivh http://spw.localdomain/pub/rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm \nhttp://spw.localdomain/pub/rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm \u3092\u53d6\u5f97\u4e2d\n\u6e96\u5099\u4e2d...                ########################################### [100%]\n   1:rhn-org-trusted-ssl-cer########################################### [100%]\nupdate-ca-trust: Warning: The dynamic CA configuration feature is in the disabled state\n[root@ap1 ~]#\n[root@ap1 ~]# rpm -ql rhn-org-trusted-ssl-cert\n/usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT\n[root@ap1 ~]# \n\nSpacewalk \u306e\u9375\u3068\u8a3c\u660e\u66f8\u3092\u6307\u5b9a\u3057\u3066\u767b\u9332\u3059\u308b\u3068\u3001Spacewalk\u5074\u306b\u51fa\u3066\u304d\u307e\u3059\u3002\n[root@ap1 ~]# rhnreg_ks -v --activationkey=1-f959869376fd8ec6071ca4xxxxxxxxxx \\\n> --serverUrl=https://spw.localdomain/XMLRPC \\\n> --sslCACert=/usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT\n\u3053\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u3044\u305a\u308c\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u3082\u30b5\u30d6\u30b9\u30af\u30e9\u30a4\u30d6\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\nRHN \u30c1\u30e3\u30f3\u30cd\u30eb\u30b5\u30dd\u30fc\u30c8\u306f\u7121\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n[root@ap1 ~]# \n\n\u300c\u30b7\u30b9\u30c6\u30e0\u300d\u306e\u753b\u9762\u3067\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u540c\u69d8\u306b ap2 \u306b\u3064\u3044\u3066\u3082\u767b\u9332\u3057\u307e\u3059\u3002\n\n\nyum \u306e\u521d\u671f\u8a2d\u5b9a\u3092\u524a\u9664\n\u30b7\u30b9\u30c6\u30e0\u5074\u3067\u306f subscription-manager \u3092\u4f7f\u308f\u305a Spacewalk \u7ba1\u7406\u306b\u3057\u305f\u306e\u3067\u3001\nyum \u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n[root@ap1 ~]# sed -i.bak 's/1/0/' /etc/yum/pluginconf.d/subscription-manager.conf\n[root@ap1 ~]# rm /etc/yum.repos.d/*\nrm: remove \u901a\u5e38\u30d5\u30a1\u30a4\u30eb `/etc/yum.repos.d/redhat.repo'? y\nrm: remove \u901a\u5e38\u30d5\u30a1\u30a4\u30eb `/etc/yum.repos.d/rhel-source.repo'? y\n[root@ap1 ~]# yum clean all\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:product-id, rhnplugin, security\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u3092\u6e05\u6383\u3057\u3066\u3044\u307e\u3059: \n\u3059\u3079\u3066\u6383\u9664\u3057\u3066\u3044\u307e\u3059\n[root@ap1 ~]# \n\nrhsmcertd \u30b5\u30fc\u30d3\u30b9\u3092\u843d\u3068\u3057\u307e\u3059\u3002\n[root@ap1 ~]# chkconfig rhsmcertd off\n[root@ap1 ~]# service rhsmcertd stop\nStopping rhsmcertd...                                      [  OK  ]\n\n\u53c2\u7167\u5148\u304c\u306a\u304f\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n[root@ap1 ~]# yum repolist\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:product-id, rhnplugin, security\n\u3053\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u3044\u305a\u308c\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u3082\u30b5\u30d6\u30b9\u30af\u30e9\u30a4\u30d6\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\nRHN \u30c1\u30e3\u30f3\u30cd\u30eb\u30b5\u30dd\u30fc\u30c8\u306f\u7121\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\nrepolist: 0\n[root@ap1 ~]#\n\n\n\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u30b7\u30b9\u30c6\u30e0\u306e\u95a2\u9023\u4ed8\u3051\n\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u30b7\u30b9\u30c6\u30e0\u3092\u95a2\u9023\u4ed8\u3051\u308b\u3053\u3068\u3067\u3001\n\u305d\u308c\u305e\u308c\u306e\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u300c\u30b7\u30b9\u30c6\u30e0\u300d\u2192\u30b7\u30b9\u30c6\u30e0\u540d\u3092\u9078\u629e\u2192\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u306e\u5909\u66f4\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u30d9\u30fc\u30b9\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u3067\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u95a2\u9023\u4ed8\u3051\u306b\u306a\u308a\u307e\u3059\u3002\n\u4e00\u3064\u3057\u304b\u9078\u3079\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n\u6bce\u65e5\u306e\u540c\u671f\n\u6bce\u65e5\u56de\u3059\u3068\u3044\u3046\u3053\u3068\u3092\u8003\u3048\u3066\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u5316\u3057\u3066\u304a\u304f\u3068\u4fbf\u5229\u3067\u3059\u3002(\u304b\u306a\u308a\u30ab\u30c3\u30b3\u60aa\u3044)\n\nsync_repositories.sh\n#!/bin/sh\n\n####\nREPO=rhel-6-server-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n\n####\nREPO=rhel-6-server-eus-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n\n####\nREPO=rhel-server-rhscl-6-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n\n####\nREPO=jb-eap-6-for-rhel-6-server-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-jboss-eap-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n\n\n\n\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0(\u30b7\u30b9\u30c6\u30e0)\u3067\u306e\u52d5\u304d\nSpacewalk \u304b\u3089 RPM \u3092 push \u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u3001\n\u3053\u3053\u3067\u306f yum \u3067\u5404\u30b5\u30fc\u30d0\u304b\u3089\u53d6\u308a\u306b\u6765\u308b\u3068\u3044\u3046\u5f62\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u53c2\u7167\u3057\u3066\u3044\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4e00\u89a7\u306f yum repolist \u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n[root@ap1 ~]# yum repolist -v\n\u30d7\u30e9\u30b0\u30a4\u30f3\u300crhnplugin\u300d\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\n\u30d7\u30e9\u30b0\u30a4\u30f3\u300cproduct-id\u300d\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\n\u30d7\u30e9\u30b0\u30a4\u30f3\u300csecurity\u300d\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\n\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u300csubscription-manager\u300d\u306f\u8aad\u307f\u8fbc\u307f\u307e\u305b\u3093\nConfig time: 0.152\nThis system is receiving updates from RHN Classic or RHN Satellite.\nLooking for repo options for [main]\nLooking for repo options for [spw-rhel-6]\nRepo 'spw-rhel-6' setting option 'enabled' = '1'\nRepo 'spw-rhel-6' setting option 'gpgcheck' = '1'\nRepo 'spw-rhel-6' setting option 'timeout' = '120'\nLooking for repo options for [spw-jboss-eap-6]\nRepo 'spw-jboss-eap-6' setting option 'enabled' = '1'\nRepo 'spw-jboss-eap-6' setting option 'gpgcheck' = '1'\nRepo 'spw-jboss-eap-6' setting option 'timeout' = '120'\nYum Version: 3.2.29\nspw-jboss-eap-6                                                                         | 1.2 kB     00:00     \nspw-jboss-eap-6/primary                                                                 |  79 kB     00:00     \nspw-jboss-eap-6                                                                                        402/402\nspw-rhel-6                                                                              | 1.2 kB     00:00     \nspw-rhel-6/primary                                                                      | 3.2 MB     00:00     \nspw-rhel-6                                                                                           8711/8711\nSetting up Package Sacks\npkgsack time: 0.017\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc ID            : spw-jboss-eap-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u540d\u524d         : JBoss EAP 6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u66f4\u65b0\u65e5         : Tue Aug  9 21:52:40 2016\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5185\u30d1\u30c3\u30b1\u30fc\u30b8\u6570 : 402\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5bb9\u91cf           : 464 M\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u57fa\u6e96 URL       : https://spw.localdomain/XMLRPC/GET-REQ/spw-jboss-eap-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u671f\u9650         : 21,600 \u79d2 (\u6700\u7d42: Tue Aug  9 21:54:59 2016)\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc ID            : spw-rhel-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u540d\u524d         : RHEL 6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u66f4\u65b0\u65e5         : Tue Aug  9 21:39:58 2016\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5185\u30d1\u30c3\u30b1\u30fc\u30b8\u6570 : 8,711\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5bb9\u91cf           : 7.5 G\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u57fa\u6e96 URL       : https://spw.localdomain/XMLRPC/GET-REQ/spw-rhel-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u671f\u9650         : 21,600 \u79d2 (\u6700\u7d42: Tue Aug  9 21:55:00 2016)\n\nrepolist: 9,113\n[root@ap1 ~]# \n\n\n\u3053\u306e\u5148\u306e Spacewalk\nSatellite 6 \u306f Spacewalk \u3068\u306f\u5225\u7269\u306b\u306a\u308b\u305d\u3046\u3067\u3059\u3002\n\u3053\u308c\u3089\u306e\u3044\u308d\u3093\u306a\u30c4\u30fc\u30eb\u3092\u53d6\u308a\u8fbc\u3093\u3060\u3082\u306e\u306b\u306a\u308b\u305d\u3046\u306a\u3002\n\nKatello http://www.katello.org/\n\nForeman https://theforeman.org/\n\nPulp http://pulpproject.org/\n\nCandlepin http://www.candlepinproject.org/\n\n\n\u3059\u3067\u306b Satellite 6 \u306f\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\n\u3053\u308c\u304b\u3089\u306e\u4eba\u306f\u65b0\u3057\u3044\u3082\u306e\u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u3067\u3057\u3087\u3046 ><\n\n(\u304a\u307e\u3051) \u56f3\u3092\u63cf\u304f\u30c4\u30fc\u30eb blockdiag\u30b7\u30ea\u30fc\u30ba\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ pip install actdiag blockdiag nwdiag seqdiag\n\n\n\u56f3\u3092\u63cf\u3044\u3066\u307f\u308b\n\nspacewalk.diag\nnwdiag {\n  network vbox_bridge {\n      address = \"192.168.0.0/24\"\n\n      spw [address = \"192.168.0.10\"];\n  }\n  network vbox_hostonly {\n      address = \"192.168.56.0/24\";\n\n      spw [address = \"192.168.56.101\"];\n      ap1 [address = \"192.168.56.102\"];\n      ap2 [address = \"192.168.56.103\"];\n  }\n}\n\n\nnwdiag \u30b3\u30de\u30f3\u30c9\u3067 png \u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n$ nwdiag --antialias spacewalk.diag\n\n\u3088\u308a\u8a73\u3057\u304f\u306f blockdiag \u306e\u30b5\u30a4\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002http://blockdiag.com/ja/\n# \u3053\u306e\u8a18\u4e8b\u3067\u308f\u304b\u308b\u3053\u3068\n\n* Spacewalk \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u7c21\u5358\u306a\u4f7f\u3044\u65b9\n* RHEL \u306e\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u306e\u6271\u3044\n* yum \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30b3\u30d4\u30fc\n\n\n# Spacewalk \u3068\u306f\n\nLinux (\u4e3b\u306b Red Hat Enterprise Linux) \u306e\u7ba1\u7406\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306a\u3069\u306f\u3053\u3061\u3089\u516c\u5f0f\u30b5\u30a4\u30c8\u3067\u3002\n\u4ed6\u306b\u306f\u307b\u3068\u3093\u3069\u7d39\u4ecb\u8a18\u4e8b\u3082\u898b\u5f53\u305f\u3089\u305a\u3001\u304b\u306a\u308a\u82e6\u52b4\u3057\u307e\u3057\u305f\u3002\nhttp://www.spacewalkproject.org/\n\n\n# \u7d39\u4ecb\u3059\u308b\u74b0\u5883\n\nOS \u306f\u5168\u3066 RHEL 6 \u3067\u3059\u3002\n\n\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u305f\u3081\u306b\u6539\u3081\u3066 VirtualBox \u3067\u69cb\u7bc9\u3057\u307e\u3057\u305f\u3002\n\u5404\u30b5\u30fc\u30d0\u304b\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u306f\u51fa\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u540d\u524d\u89e3\u6c7a\u306f\u9069\u5207\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n* Spacewalk\u30b5\u30fc\u30d0\n * spw: 192.168.0.10, 192.168.56.101\n* \u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\n * ap1: 192.168.56.102\n * ap2: 192.168.56.103\n\n![spacewalk.png](https://qiita-image-store.s3.amazonaws.com/0/21268/f80752a8-8381-bf96-7a54-052c58df863b.png)\n\n\n\nSpacewalk \u30b5\u30fc\u30d0\u306b\u306f\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092\u5341\u5206\u306b\u7528\u610f\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n100GB \u307b\u3069\u3042\u308c\u3070\u5341\u5206\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nSpacewalk \u306e\u7ba1\u7406\u6a5f\u80fd\u306b\u306f\u3055\u307e\u3056\u307e\u306a\u3082\u306e\u304c\u3042\u308a\u307e\u3059\u304c\u3001\n\u4eca\u56de\u306f RPM \u3092\u914d\u5e03\u3059\u308b\u6a5f\u80fd\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u5bfe\u8c61\u3068\u3057\u3066\u306f\u3001RHEL 6 \u3084 JBoss EAP 6 \u3092\u4f8b\u306b\u3057\u3066\u307f\u307e\u3059\u3002\nDeveloper \u5411\u3051\u306e\u8a66\u7528\u30e9\u30a4\u30bb\u30f3\u30b9\u3092\u4f7f\u3063\u3066\u691c\u8a3c\u3057\u307e\u3057\u305f\u304c\u3001\n\u672c\u756a\u3067\u306f\u304d\u3061\u3093\u3068\u8cb7\u3044\u307e\u3057\u3087\u3046\u3002\n\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n2016/8 \u6642\u70b9\u3067\u6700\u65b0\u306e 2.5 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\n## \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n\n\u5fc5\u8981\u306a\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n# rpm -Uvh http://yum.spacewalkproject.org/2.5/RHEL/6/x86_64/spacewalk-repo-2.5-3.el6.noarch.rpm\n...\n# rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-6.noarch.rpm\n...\n```\n\n```\n# cat > /etc/yum.repos.d/jpackage-generic.repo << EOF\n[jpackage-generic]\nname=JPackage generic\n#baseurl=http://mirrors.dotsrc.org/pub/jpackage/5.0/generic/free/\nmirrorlist=http://www.jpackage.org/mirrorlist.php?dist=generic&type=free&release=5.0\nenabled=1\ngpgcheck=1\ngpgkey=http://www.jpackage.org/jpackage.asc\nEOF\n```\n\n## rpm \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nDB (PostgreSQL \u3092\u9078\u3073\u307e\u3057\u305f) \u3092\u5165\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\n# yum install spacewalk-setup-postgresql\n...\n```\n\n\u3044\u3088\u3044\u3088\u672c\u4f53\u3067\u3059\u3002\u3053\u308c\u306f\u304b\u306a\u308a\u5927\u304d\u3044\u306e\u3067\u8981\u6ce8\u610f\u3002\n\u5148\u306b JBoss EAP 6 \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u308b\u3068\u3001\n\u3044\u308d\u3044\u308d\u91cd\u8907\u3057\u3066\u4f9d\u5b58\u95a2\u4fc2\u304c\u3084\u3084\u3053\u3057\u304f\u306a\u308b\u306e\u3067\u3053\u3053\u3067\u306f\u3042\u3089\u304b\u3058\u3081\u7121\u52b9\u306b\u3057\u3066\u304b\u3089\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\n# yum install spacewalk-postgresql\n...\n```\n\n250\u500b\u304f\u3089\u3044\u306e RPM \u3092\u5165\u308c\u3066\u3001\u5fc5\u8981\u306a\u3082\u306e\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n\n## \u521d\u671f\u8a2d\u5b9a\n\n\u521d\u671f\u8a2d\u5b9a\u306f\u3042\u3089\u304b\u3058\u3081\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u3044\u3066\u6d41\u3059\u306e\u304c\u7c21\u5358\u3067\u3059\u3002\n\n```answerfile.txt\nadmin-email = root@localhost\nssl-set-org = Spacewalk\nssl-set-org-unit = spacewalk\nssl-set-city = Tokyo\nssl-set-state = Tokyo\nssl-set-country = JP\nssl-password = spacewalk\nssl-set-email = root@localhost\nssl-config-sslvhost = Y\ndb-backend=postgresql\ndb-name=spaceschema\ndb-user=spaceuser\ndb-password=spacepw\ndb-host=localhost\ndb-port=5432\nenable-tftp=N\n```\n\nspacewalk-setup \u3067\u521d\u671f\u8a2d\u5b9a\u3092\u5b9f\u65bd\u3057\u307e\u3059\u3002\n\n```\n# spacewalk-setup --answer-file=answerfile.txt\n* Loading answer file: answerfile.txt.\n** Database: Setting up database connection for PostgreSQL backend.\n** Database: Installing the database:\n** Database: This is a long process that is logged in:\n** Database:   /var/log/rhn/install_db.log\n*** Progress: #\n** Database: Installation complete.\n** Database: Populating database.\n*** Progress: ############################\n* Configuring tomcat.\n* Setting up users and groups.\n** GPG: Initializing GPG and importing key.\n** GPG: Creating /root/.gnupg directory\n* Performing initial configuration.\n* Configuring apache SSL virtual host.\n** /etc/httpd/conf.d/ssl.conf has been backed up to ssl.conf-swsave\n* Configuring jabberd.\n* Creating SSL certificates.\n** SSL: Generating CA certificate.\n** SSL: Deploying CA certificate.\n** SSL: Generating server certificate.\n** SSL: Storing SSL certificates.\n* Deploying configuration files.\n* Update configuration in database.\n* Setting up Cobbler..\n* Restarting services.\nInstallation complete.\nVisit https://spw.localdomain to create the Spacewalk administrator account.\n```\n\nSpacewalk \u306f Web \u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u64cd\u4f5c\u3057\u307e\u3059\u3002firewall \u3067 80, 443 \u3092\u958b\u3051\u307e\u3059\u3002\n\n```\n# vi /etc/sysconfig/iptables\n(\u4e0b\u8a18\u306e2\u884c\u3092\u9069\u5207\u306a\u4f4d\u7f6e\u306b\u8ffd\u52a0)\n\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -j ACCEPT\n\n# service iptables restart\n```\n\n\n## Web\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3057\u3066\u8a2d\u5b9a\n\nhttps://spw/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001Spacewalk \u306e\u7ba1\u7406\u753b\u9762\u306b\u306a\u308a\u307e\u3059\u3002\n\n### \u6700\u521d\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210 \u2192 \u7d44\u7e54\u306e\u4f5c\u6210\n\n\u7d44\u7e54\u540d\u3084\u30ed\u30b0\u30a4\u30f3\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306a\u3069\u3092\u9069\u5207\u306b\u5165\u529b\u3057\u307e\u3059\u3002\n\n![spw1.png](https://qiita-image-store.s3.amazonaws.com/0/21268/5cc7a830-0e2e-d3de-d864-a31e2966b93c.png)\n\n\n\n\u3053\u3053\u307e\u3067\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u306f\u7d42\u308f\u308a\u3067\u3059\u3002\u3042\u3068\u306f\u305d\u308c\u305e\u308c\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n# yum\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u540c\u671f\n\nSpacewalk\u30b5\u30fc\u30d0\u304b\u3089\u5404\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u306b\u914d\u5e03\u3059\u308b\u305f\u3081\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3001\n\u3053\u3053\u3067\u306f RHN (Red Hat Network) \u304b\u3089\u540c\u671f\u3059\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n## Spacewalk\u30b5\u30fc\u30d0\u3067\u5229\u7528\u3059\u308bRHN\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\n\n\u3042\u3089\u304b\u3058\u3081\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\u3053\u308c\u3089\u3092\u65e5\u3005\u540c\u671f\u3057\u3066\u3001\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u306b\u914d\u5e03\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n* RHEL 6\n * rhel-6-server-rpms\n * rhel-6-server-eus-rpms\n * rhel-server-rhscl-6-rpms\n* JBoss EAP 6\n * jb-eap-6-for-rhel-6-server-rpms\n\nsubscription-manager \u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```\n# subscription-manager repos --list-enabled\n```\n\n## \u540c\u671f\u65b9\u6cd5\n\nreposync \u3067\u540c\u671f\u3057\u307e\u3059\u3002\n\u5185\u90e8\u7528\u306b\u7acb\u3066\u305f Apache HTTPD \u304b\u3089\u898b\u3048\u308b\u3068\u3053\u308d\u306b\u540c\u671f\u3059\u308b\u3068\u8a2d\u5b9a\u304c\u697d\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n# cd /var/www/html\n# reposync -g -n --download-metadata --repoid=rhel-6-server-rpms\n...\n# reposync -g -n --download-metadata --repoid=rhel-6-server-eus-rpms\n...\n# reposync -g -n --download-metadata --repoid=rhel-server-rhscl-6-rpms\n...\n# reposync -g -n --download-metadata --repoid=jb-eap-6-for-rhel-6-server-rpms\n...\n```\n\n\u540c\u671f\u3057\u305f\u5bfe\u8c61\u306b\u3064\u3044\u3066\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3053\u3068\u3067\u3001\n\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u304b\u3089\u3082yum\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3068\u3057\u3066\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\ncomps.xml \u306f rpm \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b3\u30d4\u30fc\u3057\u306a\u3044\u3068\u30c0\u30e1\u307f\u305f\u3044\u3067\u3059\u3002\n\n```\n# REPO=rhel-6-server-rpms\n# COMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\n# cp -f $REPO/$COMPS $REPO/Packages/\n# createrepo --update -p -g $COMPS $REPO/Packages\nSpawning worker 0 with 4019 pkgs\nWorkers Finished\nGathering worker results\n\nSaving Primary metadata\nSaving file lists metadata\nSaving other metadata\nGenerating sqlite DBs\nSqlite DBs complete\n```\n\n\u4ed6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b createrepo \u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n# \u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u8a2d\u5b9a\n\nRHN \u3068\u540c\u3058\u540d\u524d\u3092\u3064\u3051\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u5358\u7d14\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u2192\u300c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u7ba1\u7406\u300d\u306e\u753b\u9762\u3067\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u4f5c\u6210\u300d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n* RHEL 6\n * JBoss EAP 6\n\n![spw2.png](https://qiita-image-store.s3.amazonaws.com/0/21268/faa79124-0bc6-8663-1b81-f1fb632e88cb.png)\n\n\n\u3053\u306e\u3088\u3046\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u306f\u89aa\u5b50\u95a2\u4fc2\u3092\u5b9a\u7fa9\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u5404\u30b7\u30b9\u30c6\u30e0\u3067\u306f1\u3064\u306e\u30d9\u30fc\u30b9\u30c1\u30e3\u30f3\u30cd\u30eb\u3060\u3051\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3057\u304b\u3067\u304d\u306a\u3044\u306e\u3067\u3001\n\u3088\u308a\u7d30\u304b\u304f\u7ba1\u7406\u3057\u305f\u3044\u5834\u5408\u306b\u306f\u304d\u3061\u3093\u3068\u8a2d\u8a08\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\n\n\n# \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a2d\u5b9a\n\n\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u2192\u300c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u7ba1\u7406\u300d\u2192\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u7ba1\u7406\u300d\u3067\n\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4f5c\u6210\u300d\u3067\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n* \u30ea\u30dd\u30b8\u30c8\u30ea\u30e9\u30d9\u30eb: spw-rhel-6\n* \u30ea\u30dd\u30b8\u30c8\u30eaURL: http://spw.localdomain/rhel-6-server-rpms/Packages/\n\n\u30ea\u30dd\u30b8\u30c8\u30eaURL \u306f HTTPS \u306b\u306f\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u30a8\u30e9\u30fc\u304c\u51fa\u306a\u3044\u305f\u3081\u96e3\u89e3\u306a\u3068\u3053\u308d\u3067\u3059\u304c\u3001\u4eca\u56de\u306f HTTP \u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u4ed6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u6b21\u306b\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u7d10\u4ed8\u3051\u307e\u3059\u3002\n\n\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u2192\u300c\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u306e\u7ba1\u7406\u300d\u304b\u3089\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u9078\u629e\u3057\u3066\n\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u300d\u306e\u30bf\u30d6\u3067\u7d10\u4ed8\u3051\u3092\u884c\u3044\u307e\u3059\u3002\n\n![spw3.png](https://qiita-image-store.s3.amazonaws.com/0/21268/4be68568-1d7d-7078-eb12-84bc9ab2b2f8.png)\n\n\n\u300c\u30ea\u30dd\u30b8\u30c8\u30ea\u300d\u2192\u300c\u540c\u671f\u300d\u306e\u753b\u9762\u3067\u300c\u4eca\u3059\u3050\u540c\u671f\u300d\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001Spacewalk \u306b\u540c\u671f\u3055\u308c\u307e\u3059\u3002\n\u3053\u3053\u3067\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u306b\u767b\u9332\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u5b9f\u884c\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```\n# spacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/rhel-6-server-rpms/Packages/ -t yum\n```\n\n\u4ed6\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u3064\u3044\u3066\u3082\u540c\u69d8\u306b\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u95a2\u9023\u4ed8\u3051\u3092\u884c\u3044\u3001\u540c\u671f\u3092\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n# \u30b7\u30b9\u30c6\u30e0\u306e\u767b\u9332\n\n\u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0\u306f\u30b7\u30b9\u30c6\u30e0\u3068\u547c\u3073\u307e\u3059\u3002\n\n\u307e\u305aSpacewalk\u30b5\u30fc\u30d0\u5074\u3067\u9375\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u300c\u30b7\u30b9\u30c6\u30e0\u300d\u2192\u300c\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ad\u30fc\u300d\u3067\u300c\u30ad\u30fc\u306e\u4f5c\u6210\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u8a73\u7d30\u300d\u306f\u30ad\u30fc\u306e\u540d\u524d\u306e\u3088\u3046\u3067\u3059\u3002\n\n![spw4.png](https://qiita-image-store.s3.amazonaws.com/0/21268/4680b80e-c197-fc7a-4a6a-552dfcac7e80.png)\n\n\n\u30b7\u30b9\u30c6\u30e0\u5074\u3067\u306f\u3001\u307e\u305a Spacewalk \u7528\u306e\u8a3c\u660e\u66f8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\u3053\u308c\u306f Spacewalk \u304c\u521d\u671f\u5316\u3055\u308c\u305f\u3068\u304d\u306b\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u3067\u3001RPM \u304c\u4f5c\u3089\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n[root@ap1 ~]# rpm -ivh http://spw.localdomain/pub/rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm \nhttp://spw.localdomain/pub/rhn-org-trusted-ssl-cert-1.0-1.noarch.rpm \u3092\u53d6\u5f97\u4e2d\n\u6e96\u5099\u4e2d...                ########################################### [100%]\n   1:rhn-org-trusted-ssl-cer########################################### [100%]\nupdate-ca-trust: Warning: The dynamic CA configuration feature is in the disabled state\n[root@ap1 ~]#\n[root@ap1 ~]# rpm -ql rhn-org-trusted-ssl-cert\n/usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT\n[root@ap1 ~]# \n```\n\nSpacewalk \u306e\u9375\u3068\u8a3c\u660e\u66f8\u3092\u6307\u5b9a\u3057\u3066\u767b\u9332\u3059\u308b\u3068\u3001Spacewalk\u5074\u306b\u51fa\u3066\u304d\u307e\u3059\u3002\n\n```\n[root@ap1 ~]# rhnreg_ks -v --activationkey=1-f959869376fd8ec6071ca4xxxxxxxxxx \\\n> --serverUrl=https://spw.localdomain/XMLRPC \\\n> --sslCACert=/usr/share/rhn/RHN-ORG-TRUSTED-SSL-CERT\n\u3053\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u3044\u305a\u308c\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u3082\u30b5\u30d6\u30b9\u30af\u30e9\u30a4\u30d6\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\nRHN \u30c1\u30e3\u30f3\u30cd\u30eb\u30b5\u30dd\u30fc\u30c8\u306f\u7121\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n[root@ap1 ~]# \n```\n\n\u300c\u30b7\u30b9\u30c6\u30e0\u300d\u306e\u753b\u9762\u3067\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u540c\u69d8\u306b ap2 \u306b\u3064\u3044\u3066\u3082\u767b\u9332\u3057\u307e\u3059\u3002\n\n![spw5.png](https://qiita-image-store.s3.amazonaws.com/0/21268/00ef8f14-ee1b-ddf0-906e-4b25772e84bd.png)\n\n\n\n# yum \u306e\u521d\u671f\u8a2d\u5b9a\u3092\u524a\u9664\n\n\u30b7\u30b9\u30c6\u30e0\u5074\u3067\u306f subscription-manager \u3092\u4f7f\u308f\u305a Spacewalk \u7ba1\u7406\u306b\u3057\u305f\u306e\u3067\u3001\nyum \u306e\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```\n[root@ap1 ~]# sed -i.bak 's/1/0/' /etc/yum/pluginconf.d/subscription-manager.conf\n[root@ap1 ~]# rm /etc/yum.repos.d/*\nrm: remove \u901a\u5e38\u30d5\u30a1\u30a4\u30eb `/etc/yum.repos.d/redhat.repo'? y\nrm: remove \u901a\u5e38\u30d5\u30a1\u30a4\u30eb `/etc/yum.repos.d/rhel-source.repo'? y\n[root@ap1 ~]# yum clean all\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:product-id, rhnplugin, security\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u3092\u6e05\u6383\u3057\u3066\u3044\u307e\u3059: \n\u3059\u3079\u3066\u6383\u9664\u3057\u3066\u3044\u307e\u3059\n[root@ap1 ~]# \n```\n\nrhsmcertd \u30b5\u30fc\u30d3\u30b9\u3092\u843d\u3068\u3057\u307e\u3059\u3002\n\n```\n[root@ap1 ~]# chkconfig rhsmcertd off\n[root@ap1 ~]# service rhsmcertd stop\nStopping rhsmcertd...                                      [  OK  ]\n```\n\n\u53c2\u7167\u5148\u304c\u306a\u304f\u306a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n[root@ap1 ~]# yum repolist\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:product-id, rhnplugin, security\n\u3053\u306e\u30b7\u30b9\u30c6\u30e0\u306f\u3044\u305a\u308c\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u306b\u3082\u30b5\u30d6\u30b9\u30af\u30e9\u30a4\u30d6\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\nRHN \u30c1\u30e3\u30f3\u30cd\u30eb\u30b5\u30dd\u30fc\u30c8\u306f\u7121\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\nrepolist: 0\n[root@ap1 ~]#\n```\n\n\n# \u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u30b7\u30b9\u30c6\u30e0\u306e\u95a2\u9023\u4ed8\u3051\n\n\u30c1\u30e3\u30f3\u30cd\u30eb\u3068\u30b7\u30b9\u30c6\u30e0\u3092\u95a2\u9023\u4ed8\u3051\u308b\u3053\u3068\u3067\u3001\n\u305d\u308c\u305e\u308c\u306e\u30b7\u30b9\u30c6\u30e0\u304b\u3089\u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u300c\u30b7\u30b9\u30c6\u30e0\u300d\u2192\u30b7\u30b9\u30c6\u30e0\u540d\u3092\u9078\u629e\u2192\u300c\u30c1\u30e3\u30f3\u30cd\u30eb\u30b5\u30d6\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3\u306e\u5909\u66f4\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u300c\u30d9\u30fc\u30b9\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30c1\u30e3\u30f3\u30cd\u30eb\u300d\u3067\u30c1\u30e3\u30f3\u30cd\u30eb\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u95a2\u9023\u4ed8\u3051\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4e00\u3064\u3057\u304b\u9078\u3079\u306a\u3044\u306e\u3067\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\n![spw6.png](https://qiita-image-store.s3.amazonaws.com/0/21268/6d1d7b36-10d0-9e97-769e-15f542874b81.png)\n\n\n\n# \u6bce\u65e5\u306e\u540c\u671f\n\n\u6bce\u65e5\u56de\u3059\u3068\u3044\u3046\u3053\u3068\u3092\u8003\u3048\u3066\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u5316\u3057\u3066\u304a\u304f\u3068\u4fbf\u5229\u3067\u3059\u3002(\u304b\u306a\u308a\u30ab\u30c3\u30b3\u60aa\u3044)\n\n```sync_repositories.sh\n#!/bin/sh\n\n####\nREPO=rhel-6-server-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n\n####\nREPO=rhel-6-server-eus-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n\n####\nREPO=rhel-server-rhscl-6-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-rhel-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n\n####\nREPO=jb-eap-6-for-rhel-6-server-rpms\nreposync -g -n --download-metadata --repoid=$REPO\n\nCOMPS=$(ls $REPO/*comps*.xml | awk -F/ '{print $NF}')\ncp -f $REPO/$COMPS $REPO/Packages/\ncreaterepo --update -p -g $COMPS $REPO/Packages\n\nspacewalk-repo-sync -c spw-jboss-eap-6 -u http://spw.localdomain/$REPO/Packages/ -t yum\n```\n\n\n# \u7ba1\u7406\u5bfe\u8c61\u30b5\u30fc\u30d0(\u30b7\u30b9\u30c6\u30e0)\u3067\u306e\u52d5\u304d\n\nSpacewalk \u304b\u3089 RPM \u3092 push \u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u304c\u3001\n\u3053\u3053\u3067\u306f yum \u3067\u5404\u30b5\u30fc\u30d0\u304b\u3089\u53d6\u308a\u306b\u6765\u308b\u3068\u3044\u3046\u5f62\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u53c2\u7167\u3057\u3066\u3044\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u4e00\u89a7\u306f yum repolist \u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```\n[root@ap1 ~]# yum repolist -v\n\u30d7\u30e9\u30b0\u30a4\u30f3\u300crhnplugin\u300d\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\n\u30d7\u30e9\u30b0\u30a4\u30f3\u300cproduct-id\u300d\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\n\u30d7\u30e9\u30b0\u30a4\u30f3\u300csecurity\u300d\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\n\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u30d7\u30e9\u30b0\u30a4\u30f3\u300csubscription-manager\u300d\u306f\u8aad\u307f\u8fbc\u307f\u307e\u305b\u3093\nConfig time: 0.152\nThis system is receiving updates from RHN Classic or RHN Satellite.\nLooking for repo options for [main]\nLooking for repo options for [spw-rhel-6]\nRepo 'spw-rhel-6' setting option 'enabled' = '1'\nRepo 'spw-rhel-6' setting option 'gpgcheck' = '1'\nRepo 'spw-rhel-6' setting option 'timeout' = '120'\nLooking for repo options for [spw-jboss-eap-6]\nRepo 'spw-jboss-eap-6' setting option 'enabled' = '1'\nRepo 'spw-jboss-eap-6' setting option 'gpgcheck' = '1'\nRepo 'spw-jboss-eap-6' setting option 'timeout' = '120'\nYum Version: 3.2.29\nspw-jboss-eap-6                                                                         | 1.2 kB     00:00     \nspw-jboss-eap-6/primary                                                                 |  79 kB     00:00     \nspw-jboss-eap-6                                                                                        402/402\nspw-rhel-6                                                                              | 1.2 kB     00:00     \nspw-rhel-6/primary                                                                      | 3.2 MB     00:00     \nspw-rhel-6                                                                                           8711/8711\nSetting up Package Sacks\npkgsack time: 0.017\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc ID            : spw-jboss-eap-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u540d\u524d         : JBoss EAP 6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u66f4\u65b0\u65e5         : Tue Aug  9 21:52:40 2016\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5185\u30d1\u30c3\u30b1\u30fc\u30b8\u6570 : 402\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5bb9\u91cf           : 464 M\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u57fa\u6e96 URL       : https://spw.localdomain/XMLRPC/GET-REQ/spw-jboss-eap-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u671f\u9650         : 21,600 \u79d2 (\u6700\u7d42: Tue Aug  9 21:54:59 2016)\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc ID            : spw-rhel-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u540d\u524d         : RHEL 6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u66f4\u65b0\u65e5         : Tue Aug  9 21:39:58 2016\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5185\u30d1\u30c3\u30b1\u30fc\u30b8\u6570 : 8,711\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u5bb9\u91cf           : 7.5 G\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u57fa\u6e96 URL       : https://spw.localdomain/XMLRPC/GET-REQ/spw-rhel-6\n\u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\u306e\u671f\u9650         : 21,600 \u79d2 (\u6700\u7d42: Tue Aug  9 21:55:00 2016)\n\nrepolist: 9,113\n[root@ap1 ~]# \n```\n\n\n# \u3053\u306e\u5148\u306e Spacewalk \n\nSatellite 6 \u306f Spacewalk \u3068\u306f\u5225\u7269\u306b\u306a\u308b\u305d\u3046\u3067\u3059\u3002\n\u3053\u308c\u3089\u306e\u3044\u308d\u3093\u306a\u30c4\u30fc\u30eb\u3092\u53d6\u308a\u8fbc\u3093\u3060\u3082\u306e\u306b\u306a\u308b\u305d\u3046\u306a\u3002\n\n* Katello http://www.katello.org/\n* Foreman https://theforeman.org/\n* Pulp http://pulpproject.org/\n* Candlepin http://www.candlepinproject.org/\n\n\u3059\u3067\u306b Satellite 6 \u306f\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u3001\n\u3053\u308c\u304b\u3089\u306e\u4eba\u306f\u65b0\u3057\u3044\u3082\u306e\u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u3067\u3057\u3087\u3046 ><\n\n\n# (\u304a\u307e\u3051) \u56f3\u3092\u63cf\u304f\u30c4\u30fc\u30eb blockdiag\u30b7\u30ea\u30fc\u30ba\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ pip install actdiag blockdiag nwdiag seqdiag\n```\n\n## \u56f3\u3092\u63cf\u3044\u3066\u307f\u308b\n\n```spacewalk.diag\nnwdiag {\n  network vbox_bridge {\n      address = \"192.168.0.0/24\"\n\n      spw [address = \"192.168.0.10\"];\n  }\n  network vbox_hostonly {\n      address = \"192.168.56.0/24\";\n\n      spw [address = \"192.168.56.101\"];\n      ap1 [address = \"192.168.56.102\"];\n      ap2 [address = \"192.168.56.103\"];\n  }\n}\n```\n\nnwdiag \u30b3\u30de\u30f3\u30c9\u3067 png \u30d5\u30a1\u30a4\u30eb\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n```\n$ nwdiag --antialias spacewalk.diag\n```\n\n\u3088\u308a\u8a73\u3057\u304f\u306f blockdiag \u306e\u30b5\u30a4\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002http://blockdiag.com/ja/\n", "tags": ["spacewalk", "RHEL", "Linux", "Yum"]}