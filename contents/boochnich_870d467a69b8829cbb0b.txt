{"tags": ["Java", "JavaFX", "Affine", "canvas"], "context": "\u672c\u8a18\u4e8b\u306fJavaFX Advent Calendar 2016\u306e12\u65e5\u76ee\u3067\u3059\u3002\u6628\u65e5\u306f\u3001@skrb\u3055\u3093\u306eScene Builder \u5c0f\u30cd\u30bf 3\u3064\u3067\u3059\u3002\u660e\u65e5\u306f\u3001@sk44_\u3055\u3093\u3067\u3059\u3002\n\n\u306f\u3058\u3081\u306b\nJavaFX\u306eCanvas\u306b\u306f\u3001\u7dda\u3001\u77e9\u5f62\u3001\u6955\u5186\u3001\u30dd\u30ea\u30b4\u30f3\u306a\u3069\u306e\u30d9\u30af\u30c8\u30eb\u30c7\u30fc\u30bf\u3084\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u63cf\u753b\u3059\u308b2D\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30b9\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u6307\u5b9a\u3057\u3066\u3001\u62e1\u5927\u3001\u7e2e\u5c0f\u3001\u5e73\u884c\u79fb\u52d5\u3001\u56de\u8ee2\u3001\u305b\u3093\u65ad\u3068\u3044\u3063\u305f2D\u63cf\u753b\u306e\u5909\u5f62\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u3053\u3053\u3067\u3001\u753b\u9762\u3088\u308a\u3082\u5927\u304d\u306a2D\u30c7\u30fc\u30bf\u3092\u3001\u4efb\u610f\u306b\u62e1\u5927\u3001\u7e2e\u5c0f\u3057\u3066\u8868\u793a\u3059\u308b\u3001\u4e0a\u4e0b\u5de6\u53f3\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u8868\u793a\u3059\u308b\u3001\u3068\u3044\u3046\u64cd\u4f5c\u3092\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u4f7f\u3063\u3066\u5b9f\u73fe\u3059\u308b\u3068\u3057\u307e\u3059\u3002\u5730\u56f3\u306e\u8868\u793a\u3001CAD\u30c7\u30fc\u30bf\u306e\u8868\u793a\u3001\u306a\u3069\u304c\u4e00\u4f8b\u3067\u3059\u3002\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u539f\u7406\u306f\u30b7\u30f3\u30d7\u30eb\u306a\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u3084\u3063\u3066\u307f\u308b\u3068\u306f\u307e\u308b\u3053\u3068\u304c\u591a\u304f\u30012\u5e74\u524d\u306b\u3082Canvas\u3067Affine\u5909\u63db\u3067\u5927\u3044\u306b\u306f\u307e\u308b\uff08\u6570\u5b66\u7684\u30bb\u30f3\u30b9\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\uff09\u3068\u3044\u3046\u30d6\u30ed\u30b0\u3092\u66f8\u3044\u305f\u307b\u3069\u3067\u3059\u3002\n\u4eca\u67083\u65e5\u306b\u958b\u50ac\u3055\u308c\u305fJJUG CCC 2016 Fall\u306b\u304a\u3044\u3066\u3001\u300c\u4e16\u754c\u306f\u56db\u89d2\u3067\u306f\u306a\u3044\uff5eJavaFX\u3067\u5730\u56f3\u3092\u63cf\u304f\u300d\u3068\u3044\u3046\u984c\u76ee\u3067\u3001\u5730\u56f3\u30c7\u30fc\u30bf\uff08\u4e16\u754c\u6d77\u5cb8\u7dda\u30c7\u30fc\u30bf\uff09\u3092JavaFX\u306eCanvas\u3067\u63cf\u753b\u3059\u308b\u5185\u5bb9\u3092\u767a\u8868\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u3068\u304d\u306b\u7528\u610f\u3057\u305f\u5730\u56f3\u8868\u793a\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u306f\u3001\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u4f7f\u3063\u3066\u62e1\u5927\u30fb\u7e2e\u5c0f\u30fb\u30b9\u30af\u30ed\u30fc\u30eb\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u3067\u3059\u304c\u3001\u62e1\u5927\u30fb\u7e2e\u5c0f\u3092\u3059\u308b\u3068\u8868\u793a\u3057\u3066\u3044\u308b\u5730\u56f3\u306e\u4f4d\u7f6e\u304c\u305a\u308c\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u554f\u984c\u3092\u62b1\u3048\u3066\u3044\u307e\u3057\u305f\u3002\u6b8b\u5ff5\u306a\u304c\u3089\u767a\u8868\u5f53\u65e5\u307e\u3067\u306b\u306f\u89e3\u6c7a\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001\u30ea\u30d9\u30f3\u30b8\u3068\u3057\u3066\u3001\u8868\u793a\u306e\u62e1\u5927\u30fb\u7e2e\u5c0f\u3092\u3059\u308b\u3068\u304d\u306f\u3001\u753b\u9762\u306b\u8868\u793a\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306e\u4e2d\u5fc3\u304c\u305a\u308c\u306a\u3044\u3088\u3046\u306b\u3001\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u518d\u5ea6\u57fa\u790e\u304b\u3089\u52c9\u5f37\u3057\u76f4\u3057\u3001\u6574\u7406\u3057\u3066\u307e\u3068\u3081\u308b\u3053\u3068\u3068\u3057\u307e\u3057\u305f\u3002\n\n\u672c\u8a18\u4e8b\u306e\u5b9f\u884c\u74b0\u5883\n\u672c\u8a18\u4e8b\u306f\u3001JavaFX\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u8abf\u3079\u3066\u7406\u89e3\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u306b\u8a18\u8ff0\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3042\u308a\u307e\u305b\u3093\u3002Affine\u5909\u63db\u306e\u52d5\u4f5c\u3092\u7c21\u5358\u306b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u6765\u5e74\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u4e88\u5b9a\u306eJDK 9\u306b\u642d\u8f09\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u74b0\u5883jshell\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\nWindows 10 64bit\u74b0\u5883\u306e\u4e0a\u3067\u3001Java SE Development Kit 9 Early Access\u7248\u3092\u5165\u308c\u3066shell\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u8a18\u4e8b\u57f7\u7b46\u6642\u70b9\u3067\u306f\u3001JDK 9 Build 148\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059\u3002\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3068\u753b\u9762\u5ea7\u6a19\u7cfb\n\u4e00\u822c\u306b\u30c7\u30fc\u30bf\u306e\u5f62\u72b6\u306f\u3001\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u3053\u306e\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u306f\u53f3\u624b\u7cfb\u3001\u3064\u307e\u308ax\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3092\u53cd\u6642\u8a08\u56de\u308a\u306b90\u5ea6\u56de\u8ee2\u3057\u305f\u5411\u304d\u3092y\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3068\u3057\u3066\u8868\u3057\u307e\u3059\u3002\n\u4e00\u65b9\u3001JavaFX\u306e\u753b\u9762\u5ea7\u6a19\u3082\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u304c\u3001\u3053\u306e\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u306f\u5de6\u624b\u7cfb\u3001\u3064\u307e\u308ax\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3092\u6642\u8a08\u56de\u308a\u306b90\u5ea6\u56de\u8ee2\u3057\u305f\u5411\u304d\u3092y\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3068\u3057\u3066\u8868\u3057\u307e\u3059\u3002\n\n\u305d\u306e\u305f\u3081\u3001\u30c7\u30fc\u30bf\u306e\u5ea7\u6a19\u3092\u305d\u306e\u307e\u307e\u753b\u9762\u306b\u8868\u793a\u3059\u308b\u3068\u4e0a\u4e0b\u304c\u9006\u3055\u307e\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u5730\u56f3\u30c7\u30fc\u30bf\u3092\u5909\u63db\u305b\u305a\u306b\u8868\u793a\u3059\u308b\u3068\u30fb\u30fb\u30fb\n\u4e00\u822c\u306b\u5730\u56f3\u30c7\u30fc\u30bf\u306f\u3001\u7def\u5ea6\u7d4c\u5ea6\u5ea7\u6a19\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u3001\u7def\u5ea6\u3092y\u8ef8\u3001\u7d4c\u5ea6\u3092x\u8ef8\u3067\u8868\u73fe\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u5730\u56f3\u30c7\u30fc\u30bf\u3092\u3001\u5ea7\u6a19\u306e\u5909\u63db\u3092\u4e00\u5207\u305b\u305a\u306b\u753b\u9762\u306b\u8868\u793a\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306a\u8868\u793a\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u5730\u56f3\u30c7\u30fc\u30bf\u306e\u5ea7\u6a19\u7cfb\u306e\u7b2c1\u8c61\u9650\uff080,0)\uff5e(180,90)\u306e\u7bc4\u56f2\u304c\u4e0a\u4e0b\u9006\u3055\u307e\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u304b\u3089\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5ea7\u6a19\u5909\u63db\u3092\u5c0e\u5165\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u4efb\u610f\u306b\u62e1\u5927\u30fb\u7e2e\u5c0f\u30fb\u5e73\u884c\u79fb\u52d5\u30fb\u56de\u8ee2\u3057\u3066\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u305d\u306e\u969b\u306b\u4f7f\u308f\u308c\u308b\u5ea7\u6a19\u5909\u63db\u304c\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306b\u3088\u308b\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u304b\u3089\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5909\u63db\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3092xy\u5ea7\u6a19\u7cfb\u3001\u753b\u9762\u5ea7\u6a19\u7cfb\u3092x'y'\u5ea7\u6a19\u7cfb\u3068\u3057\u307e\u3059\u3002\nxy\u5ea7\u6a19\u7cfb\u4e0a\u306e\u70b9\u3092\uff08x, y\uff09\u3001x'y'\u5ea7\u6a19\u7cfb\u4e0a\u306e\u70b9\u3092\uff08x', y'\uff09\u3068\u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u304b\u3089\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5ea7\u6a19\u5909\u63db\u306f\u3001(x, y)\u3092\u5165\u529b\u3068\u3057\u3066(x', y')\u3092\u51fa\u529b\u3068\u3059\u308b\u5909\u63db\u5f0f\u3068\u306a\u308a\u307e\u3059\u3002\nx' = ax + by + t_x\\\\\ny' = cx + dy + t_y\nx\u2032=ax+by+txy\u2032=cx+dy+ty{x' = ax + by + t_x\\\\\ny' = cx + dy + t_y\n}\n\u3053\u306e\u5909\u63db\u5f0f\u3092\u3001\u5ea7\u6a19\u3092\u30d9\u30af\u30c8\u30eb\u3001\u5909\u63db\u3092\u884c\u5217\u3067\u8868\u73fe\u3057\u76f4\u3059\u3068\n\\begin{pmatrix}\nx'\\\\ \ny'\\\\\n1\n\\end{pmatrix}\n= \\begin{pmatrix}\na & b & t_x\\\\\nc & d & t_y\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\\ny\\\\\n1\n\\end{pmatrix}\n(x\u2032y\u20321)=(abtxcdty001)(xy1){\\begin{pmatrix}\nx'\\\\ \ny'\\\\\n1\n\\end{pmatrix}\n= \\begin{pmatrix}\na & b & t_x\\\\\nc & d & t_y\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\\ny\\\\\n1\n\\end{pmatrix}\n}\n\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u884c\u5217\u304cAffine\u5909\u63db\u884c\u5217\u3068\u306a\u308a\u307e\u3059\u3002\uff082\u6b21\u5143\u306e\u5834\u5408\uff09\n\u8a08\u7b97\u306e\u53d6\u308a\u6271\u3044\u4e0a\u30013\u6b21\u306e\u30d9\u30af\u30c8\u30eb\u30fb\u884c\u5217\u3067\u8a08\u7b97\uff08\u540c\u6b21\u5ea7\u6a19\uff09\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff11\uff09\uff1a\u6052\u7b49\u5909\u63db\nx' = x\\\\\ny' = y\\\\\nx\u2032=xy\u2032=y{x' = x\\\\\ny' = y\\\\\n}\n\u3068\u306a\u308b\u5909\u63db\uff08\u3064\u307e\u308a\u4f55\u3082\u5909\u63db\u3057\u306a\u3044\uff09\u3092\u9069\u7528\u3059\u308b\u3068\u3001\u4e0a\u4e0b\u9006\u3055\u307e\u306e\u8868\u793a\u3068\u306a\u308a\u307e\u3059\u3002\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\\begin{pmatrix}\nx'\\\\y\\\\1'\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & 1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n(x\u2032y1\u2032)=(100010001)(xy1){\\begin{pmatrix}\nx'\\\\y\\\\1'\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & 1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n}\n\u3053\u306e\u5909\u63db\uff08\u7121\u5909\u63db\uff09\u3067\u306f\u3001\u30c7\u30fc\u30bf\u306f\u6b21\u306e\u3088\u3046\u306b\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u9ec4\u8272\u3044\u77e9\u5f62\u90e8\u5206\u304c\u753b\u9762\u63cf\u753b\u9818\u57df\u3067\u3059\u3002\u70b9A\u3001B\u3001C\u306f\u6b21\u306e\u3088\u3046\u306bA', B', C'\u306b\u5909\u63db\uff08\u7121\u5909\u63db\uff09\u3055\u308c\u307e\u3059\u3002\n\\begin{align*}\n(A'_x, A'_y) &= (A_x, A_y) = (160, 200)\\\\\n(B'_x, B'_y) &= (B_x, B_y) = (320, 0)\\\\\n(C'_x, C'_y) &= (C_x, C_y) = (160, -200)\n\\end{align*}\n(A\u2032x,A\u2032y)=(Ax,Ay)=(160,200)(B\u2032x,B\u2032y)=(Bx,By)=(320,0)(C\u2032x,C\u2032y)=(Cx,Cy)=(160,\u2212200){\\begin{align*}\n(A'_x, A'_y) &= (A_x, A_y) = (160, 200)\\\\\n(B'_x, B'_y) &= (B_x, B_y) = (320, 0)\\\\\n(C'_x, C'_y) &= (C_x, C_y) = (160, -200)\n\\end{align*}\n}\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nAffine affine = new Affine();\n\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\nJDK 9\u306b\u74b0\u5883\u5909\u6570PATH\u3092\u901a\u3057\u3066\u304a\u304d\u307e\u3059\u3002jshell\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nC:\\>java -version\njava version \"9-ea\"\nJava(TM) SE Runtime Environment (build 9-ea+148)\nJava HotSpot(TM) 64-Bit Server VM (build 9-ea+148, mixed mode)\n\nC:\\>jshell\n|  JShell\u3078\u3088\u3046\u3053\u305d -- \u30d0\u30fc\u30b8\u30e7\u30f39-ea\n|  \u6982\u8981\u306b\u3064\u3044\u3066\u306f\u3001\u6b21\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044: /help intro\n|\njshell>\n\nAffine\u5909\u63db\uff08\u6052\u7b49\u5909\u63db\uff09\u3092\u751f\u6210\u3057\u307e\u3059\u3002\njshell> import javafx.scene.transform.Affine\n\njshell> Affine affine = new Affine()\naffine ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, 1.0, 0.0, 0.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell\u74b0\u5883\u306f\u3001\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\u3057\u304b\u3057\u30013\u884c4\u5217\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\u3053\u308c\u306f\u3001JavaFX \u304c\u6a19\u6e96\u30673D\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u5099\u3048\u3066\u3044\u308b\u306e\u3067\u30013\u6b21\u5143\u5ea7\u6a19\u306e\u5909\u63db\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n2D\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u6271\u3046\u5834\u5408\u306f\u3001\u4e0a\u56f3\u306e\u3088\u3046\u306b\u30013\u5217\u76ee\u306f\u6c17\u306b\u3057\u306a\u3044\u3067\u304a\u304d\u307e\u3059\u3002\n\u6b21\u306b\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u70b9\u30921\u3064\u4f5c\u6210\u3057\u3001\u3053\u306eAffine\u3067\u5909\u63db\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\njshell> import javafx.geometry.Point2D\n\njshell> Point2D dataA = new Point2D(160, 200)\ndataA ==> Point2D [x = 160.0, y = 200.0]\n\njshell> affine.transform(dataA)\n$5 ==> Point2D [x = 160.0, y = 200.0]\n\njshell>\n\n\u5143\u306e\u5ea7\u6a19\uff08160,200\uff09\u3068\u540c\u3058\u5024\u306e\u5ea7\u6a19\u304c\u3053\u306eAffine\u306e\u5909\u63db\u7d50\u679c\u3068\u3057\u3066\u5f97\u3089\u308c\u307e\u3057\u305f\u3002\n\n\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff12\uff09\uff1a\u4e0a\u4e0b\u9006\u3055\u307e\u306e\u89e3\u6d88\ny\u8ef8\u304c\u9006\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u5358\u7d14\u306b\u306fy\u5ea7\u6a19\u306e\u7b26\u53f7\u3092\u9006\u306b\u3059\u308c\u3070\u3088\u3044\u3068\u8003\u3048\u6b21\u306e\u5ea7\u6a19\u5909\u63db\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n\\begin{align*}\nx' &= x\\\\\ny' &= -y\\\\\n\\end{align*}\nx\u2032=xy\u2032=\u2212y{\\begin{align*}\nx' &= x\\\\\ny' &= -y\\\\\n\\end{align*}\n}\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n(x\u2032y\u20321)=(1000\u221210001)(xy1){\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n}\n\n\u70b9A\u3001B\u3001C\u306f\u6b21\u306e\u3088\u3046\u306bA', B', C'\u306b\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\\begin{align*}\n(A'_x, A'_y) &= (A_x, -A_y) = (160, -200)\\\\\n(B'_x, B'_y) &= (B_x, -B_y) = (320, 0)\\\\\n(C'_x, C'_y) &= (C_x, -C_y) = (160, 200)\n\\end{align*}\n(A\u2032x,A\u2032y)=(Ax,\u2212Ay)=(160,\u2212200)(B\u2032x,B\u2032y)=(Bx,\u2212By)=(320,0)(C\u2032x,C\u2032y)=(Cx,\u2212Cy)=(160,200){\\begin{align*}\n(A'_x, A'_y) &= (A_x, -A_y) = (160, -200)\\\\\n(B'_x, B'_y) &= (B_x, -B_y) = (320, 0)\\\\\n(C'_x, C'_y) &= (C_x, -C_y) = (160, 200)\n\\end{align*}\n}\n\u30c7\u30fc\u30bf\u306e\u8868\u793a\u304c\u9006\u3055\u307e\u306b\u306a\u308b\u3053\u3068\u306f\u89e3\u6d88\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30c7\u30fc\u30bf\u306e\u8868\u793a\u9818\u57df\u304c\uff08\u305d\u306e\uff11\uff09\u3067\u306e\u8868\u793a\u9818\u57df\u3068\u306f\u305a\u308c\u3066\uff08X\u8ef8\u306e\u53cd\u5bfe\u5074\uff09\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nAffine affine = new Affine(1, 0, 0, 0, -1, 0);\n\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\njshell> affine = new Affine(1, 0, 0, 0, -1, 0)\naffine ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, -1.0, 0.0, 0.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(dataA)\n$9 ==> Point2D [x = 160.0, y = -200.0]\n\njshell>\n\n\u70b9A\u304c(160, 200)\u304b\u3089(160, -200)\u306b\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\u540c\u69d8\u306b\u70b9B\u3001\u70b9C\u306b\u3064\u3044\u3066\u3082\u5909\u63db\u7d50\u679c\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\njshell> Point2D dataB = new Point2D(320, 0)\ndataB ==> Point2D [x = 320.0, y = 0.0]\n\njshell> affine.transform(dataB)\n$12 ==> Point2D [x = 320.0, y = -0.0]\n\njshell> Point2D dataC = new Point2D(160, -200)\ndataC ==> Point2D [x = 160.0, y = -200.0]\n\njshell> affine.transform(dataC)\n$13 ==> Point2D [x = 160.0, y = 200.0]\n\njshell>\n\n\u70b9B\u304c(320, 0)\u304b\u3089(320, -0)\u3078\u5909\u63db\uff08\u5ea7\u6a19\u5024\u5909\u5316\u305b\u305a\uff09\u3055\u308c\u307e\u3057\u305f\u3002\n\u70b9C\u304c(160, -200)\u304b\u3089(160, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff13\uff09\uff1a\u539f\u70b9\u306e\u5e73\u884c\u79fb\u52d5\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u306f\u63cf\u753b\u3057\u305f\u3044\u9818\u57df\u306e\u5de6\u4e0b\u9685\u3067\u3059\u304c\u3001\u753b\u9762\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u306f\u63cf\u753b\u3055\u308c\u308b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u3068\u306a\u308a\u307e\u3059\u3002\u305d\u3053\u3067\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u3092\u753b\u9762\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u3078\u5e73\u884c\u79fb\u52d5\u3055\u305b\u3066\u63cf\u753b\u3057\u305f\u3044\u9818\u57df\u3092\u5408\u308f\u305b\u307e\u3059\u3002\n\u3053\u306e\u5834\u5408\u306e\u5e73\u884c\u79fb\u52d5\u306f\u3001y\u8ef8\u65b9\u5411\u306b\u63cf\u753b\u9818\u57df\u306e\u9ad8\u3055\u5206\u306e\u79fb\u52d5\u3068\u306a\u308a\u307e\u3059\u3002\u63cf\u753b\u9818\u57df\u306e\u9ad8\u3055\u3092h\u3068\u3059\u308b\u3068\u6b21\u306e\u5909\u63db\u5f0f\u3068\u306a\u308a\u307e\u3059\u3002\n\\begin{align*}\nx' &= x\\\\\ny' &= -(y - h) = -y + h\\\\\n\\end{align*}\nx\u2032=xy\u2032=\u2212(y\u2212h)=\u2212y+h{\\begin{align*}\nx' &= x\\\\\ny' &= -(y - h) = -y + h\\\\\n\\end{align*}\n}\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & h\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n(x\u2032y\u20321)=(1000\u22121h001)(xy1){\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & h\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n}\n\u9ad8\u3055h\u3092200\u3068\u3057\u305f\u3068\u304d\u306e\u56f3\u3068\u5404\u5ea7\u6a19\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n\\begin{align*}\n(A'_x, A'_y) &= (A_x, -A_y + 200) = (160, 0)\\\\\n(B'_x, B'_y) &= (B_x, -B_y + 200) = (320, 200)\\\\\n(C'_x, C'_y) &= (C_x, -C_y + 200) = (160, 0)\n\\end{align*}\n(A\u2032x,A\u2032y)=(Ax,\u2212Ay+200)=(160,0)(B\u2032x,B\u2032y)=(Bx,\u2212By+200)=(320,200)(C\u2032x,C\u2032y)=(Cx,\u2212Cy+200)=(160,0){\\begin{align*}\n(A'_x, A'_y) &= (A_x, -A_y + 200) = (160, 0)\\\\\n(B'_x, B'_y) &= (B_x, -B_y + 200) = (320, 200)\\\\\n(C'_x, C'_y) &= (C_x, -C_y + 200) = (160, 0)\n\\end{align*}\n}\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nAffine affine = new Affine(1, 0, 0, 0, -1, 200);\n\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\njshell> affine = new Affine(1, 0, 0, 0, -1, 200)\naffine ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, -1.0, 0.0, 200.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(dataA)\n$19 ==> Point2D [x = 160.0, y = 0.0]\n\njshell> affine.transform(dataB)\n$20 ==> Point2D [x = 320.0, y = 200.0]\n\njshell> affine.transform(dataC)\n$21 ==> Point2D [x = 160.0, y = 400.0]\n\njshell>\n\n\u70b9A\u304c(160, 200)\u304b\u3089(160, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u70b9B\u304c(320, 0)\u304b\u3089(320, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u70b9C\u304c(160, -200)\u304b\u3089\uff08160, 400)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff14\uff09\uff1a\u63cf\u753b\u9818\u57df\u3092\u79fb\u52d5\n\u63cf\u753b\u9818\u57df\u3092\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u4efb\u610f\u306e\u7b87\u6240\u306b\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u306e\u5ea7\u6a19\u3092\uff08x1, y1\uff09\u3068\u3059\u308b\u3068\u3001\u6b21\u306e\u5f0f\u3067\u5e73\u884c\u79fb\u52d5\u3092\u8868\u3057\u307e\u3059\u3002\n\\begin{align*}\nx' &= x - x_1\\\\\ny' &= -(y - y_1) = -y + y_1\n\\end{align*}\nx\u2032=x\u2212x1y\u2032=\u2212(y\u2212y1)=\u2212y+y1{\\begin{align*}\nx' &= x - x_1\\\\\ny' &= -(y - y_1) = -y + y_1\n\\end{align*}\n}\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & -1 & y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n(x\u2032y\u20321)=(10\u2212x10\u22121y1001)(xy1){\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & -1 & y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n}\n\uff08x1, y1)\u3092\uff08-280, 500)\u3068\u3057\u305f\u3068\u304d\u306e\u56f3\u3068\u5404\u5ea7\u6a19\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n\\begin{align*}\n(A'_x, A'_y) &= (A_x - (-280), -(A_y - 500))\\\\\n &= (A_x + 280, -A_y + 500)\\\\\n &= (0, 0)\\\\\n(B'_x, B'_y) &= (B_x - (-280), -(B_y - 500))\\\\\n &= (B_x + 280, -B_y + 500)\\\\\n &= (0, 200)\n\\end{align*}\n(A\u2032x,A\u2032y)=(Ax\u2212(\u2212280),\u2212(Ay\u2212500))=(Ax+280,\u2212Ay+500)=(0,0)(B\u2032x,B\u2032y)=(Bx\u2212(\u2212280),\u2212(By\u2212500))=(Bx+280,\u2212By+500)=(0,200){\\begin{align*}\n(A'_x, A'_y) &= (A_x - (-280), -(A_y - 500))\\\\\n &= (A_x + 280, -A_y + 500)\\\\\n &= (0, 0)\\\\\n(B'_x, B'_y) &= (B_x - (-280), -(B_y - 500))\\\\\n &= (B_x + 280, -B_y + 500)\\\\\n &= (0, 200)\n\\end{align*}\n}\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nAffine affine = new Affine(1, 0, 280, 0, -1, 500);\n\n\u3061\u3087\u3063\u3068\u308f\u304b\u308a\u306b\u304f\u3044\u3067\u3059\u306d\u3002\n2\u3064\u306e\u5ea7\u6a19\u5909\u63db\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\n\u5e73\u884c\u79fb\u52d5\n\u4e0a\u4e0b\u53cd\u8ee2\n\n\u5e73\u884c\u79fb\u52d5\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u6b21\u306e\u884c\u5217\u5f0f\u3067\u8868\u3055\u308c\u307e\u3059\u3002\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & 1 & -y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n(10\u2212x101\u2212y1001){\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & 1 & -y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n}\n\u4e0a\u4e0b\u53cd\u8ee2\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u6b21\u306e\u884c\u5217\u5f0f\u3067\u8868\u3055\u308c\u307e\u3059\u3002\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n(1000\u221210001){\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n}\n\u307e\u305a\u5e73\u884c\u79fb\u52d5\u3092\u5b9f\u65bd\u3057\u3066\u3001\u6b21\u306b\u4e0a\u4e0b\u53cd\u8ee2\u3092\u3057\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001\u884c\u5217\u306e\u7d50\u5408\u3067\u306f\u6700\u521d\u306b\u9069\u7528\u3059\u308b\u65b9\u3092\u53f3\u5074\u306b\u66f8\u304d\u307e\u3059\u3002\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & 1 & -y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & -1 & y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n(1000\u221210001)(10\u2212x101\u2212y1001)=(10\u2212x10\u22121y1001){\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & 1 & -y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & -1 & y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n}\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n2\u3064\u306eAffine\u3092\u5408\u6210\u3057\u307e\u3059\u3002\njshell> Affine affineMove = new Affine(1, 0, -(-280), 0, 1, -500)\naffineMove ==> Affine [\n        1.0, 0.0, 0.0, 280.0\n        0.0, 1.0, 0.0, -500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> Affine affineReverse = new Affine(1, 0, 0, 0, -1, 0)\naffineReverse ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, -1.0, 0.0, 0.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affineReverse.createConcatenation(affineMove)\n$35 ==> Affine [\n        1.0, 0.0, 0.0, 280.0\n        0.0, -1.0, 0.0, 500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\n\n\u3046\u30fc\u3093\u3001\u3084\u306f\u308a\u308f\u304b\u308a\u306b\u304f\u3044\u3067\u3059\u30fb\u30fb\u30fb\u3002\n\u3055\u3066\u3001\u5ea7\u6a19\u5909\u63db\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\njshell> affine = new Affine(1, 0, 280, 0, -1, 500)\naffine ==> Affine [\n        1.0, 0.0, 0.0, 280.0\n        0.0, -1.0, 0.0, 500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> Point2D dataJ = new Point2D(-280, 500)\ndataJ ==> Point2D [x = -280.0, y = 500.0]\n\njshell> affine.transform(dataJ)\n$29 ==> Point2D [x = 0.0, y = 0.0]\n\njshell> Point2D dataK = new Point2D(-280, 300)\ndataK ==> Point2D [x = -280.0, y = 300.0]\n\njshell> affine.transform(dataK)\n$30 ==> Point2D [x = 0.0, y = 200.0]\n\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(-280, 500)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(-280, 300)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff15\uff09\uff1a\u62e1\u5927\u7e2e\u5c0f\u3068\u5e73\u884c\u79fb\u52d5\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u63cf\u753b\u9818\u57df\u306e\u5927\u304d\u3055\u3092\u4efb\u610f\u306e\u5927\u304d\u3055\u306b\u62e1\u5927\u307e\u305f\u306f\u7e2e\u5c0f\u3055\u305b\u307e\u3059\u3002\n\u62e1\u5927\u7387\u3092 S \u3068\u3057\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u4e0a\u3067\u306e\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u306e\u5ea7\u6a19\u3092 (x1, y1)\u3068\u3059\u308b\u3068\u3001\u6b21\u306e\u5f0f\u3067\u62e1\u5927\u7e2e\u5c0f\u3068\u5e73\u884c\u79fb\u52d5\u3092\u8868\u3057\u307e\u3059\u3002\n\\begin{align*}\nx' &= s(x - x_1) = sx - sx_1\\\\\ny' &= -s(y - y_1) = -sy + sy_1\n\\end{align*}\nx\u2032=s(x\u2212x1)=sx\u2212sx1y\u2032=\u2212s(y\u2212y1)=\u2212sy+sy1{\\begin{align*}\nx' &= s(x - x_1) = sx - sx_1\\\\\ny' &= -s(y - y_1) = -sy + sy_1\n\\end{align*}\n}\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\ns & 0 & -sx_1\\\\\n0 & -s & sy_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n(x\u2032y\u20321)=(s0\u2212sx10\u2212ssy1001)(xy1){\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\ns & 0 & -sx_1\\\\\n0 & -s & sy_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n}\n\n\u62e1\u5927\u73872\u3001\u5e73\u884c\u79fb\u52d5(0, 100)\u306e\u5834\u5408\n\u3053\u3053\u3067\u3001\u62e1\u5927\u7387\u30922\u306b\u3001\u5e73\u884c\u79fb\u52d5\u91cf\u3092(0,100)\u3068\u3057\u305f\u5834\u5408\u306e\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u8868\u793a\u9818\u57df\u3068\u3001\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5909\u63db\u3092\u56f3\u3067\u898b\u3066\u307f\u307e\u3059\u3002\n\n\u62e1\u5927\u7387\u304c2\u500d\u306a\u306e\u3067\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u4e2d\u306e160\u00d7100\u306e\u7bc4\u56f2\u304c\u753b\u9762\u5ea7\u6a19\u7cfb320\u00d7200\u306b\u63cf\u753b\u3055\u308c\u307e\u3059\u3002\n\\begin{align*}\n(A'_x, A'_y) &= (2A_x + 2\u30fb0, -2A_y + 2\u30fb100)\\\\\n &= (0, 0)\\\\\n(B'_x, B'_y) &= (2B_x + 2\u30fb0, -2B_y + 2\u30fb100)\\\\\n &= (320, 0)\\\\\n(C'_x, C'_y) &= (2C_x + 2\u30fb0, -2C_y + 2\u30fb100)\\\\\n &= (320, 200)\n\\end{align*}\n(A\u2032x,A\u2032y)=(2Ax+2\u30fb0,\u22122Ay+2\u30fb100)=(0,0)(B\u2032x,B\u2032y)=(2Bx+2\u30fb0,\u22122By+2\u30fb100)=(320,0)(C\u2032x,C\u2032y)=(2Cx+2\u30fb0,\u22122Cy+2\u30fb100)=(320,200){\\begin{align*}\n(A'_x, A'_y) &= (2A_x + 2\u30fb0, -2A_y + 2\u30fb100)\\\\\n &= (0, 0)\\\\\n(B'_x, B'_y) &= (2B_x + 2\u30fb0, -2B_y + 2\u30fb100)\\\\\n &= (320, 0)\\\\\n(C'_x, C'_y) &= (2C_x + 2\u30fb0, -2C_y + 2\u30fb100)\\\\\n &= (320, 200)\n\\end{align*}\n}\n\u30c7\u30fc\u30bf\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u6b21\u306e\u56f3\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nAffine affine = new Affine(2, 0, 0, 0, -2, 200);\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\njshell> affine = new Affine(2, 0, 0, 0, -2, 200)\naffine ==> Affine [\n        2.0, 0.0, 0.0, 0.0\n        0.0, -2.0, 0.0, 200.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> dataA = new Point2D(0, 100)\ndataA ==> Point2D [x = 0.0, y = 100.0]\n\njshell> affine.transform(dataA)\n$38 ==> Point2D [x = 0.0, y = 0.0]\n\njshell> dataB = new Point2D(160, 100)\ndataB ==> Point2D [x = 160.0, y = 100.0]\n\njshell> affine.transform(dataB)\n$40 ==> Point2D [x = 320.0, y = 0.0]\n\njshell> dataC = new Point2D(160, 0)\ndataC ==> Point2D [x = 160.0, y = 0.0]\n\njshell> affine.transform(dataC)\n$42 ==> Point2D [x = 320.0, y = 200.0]\n\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(0, 100)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(160, 100)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(160, 0)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u62e1\u5927\u73870.5\u3001\u5e73\u884c\u79fb\u52d5(100, 1000)\u3067\u306e\u4f8b\n\u62e1\u5927\u7387\u304c0.5\u3067\u5e73\u884c\u79fb\u52d5\u91cf\u304c(100,1000)\u306e\u3068\u304d\u306e\u5909\u63db\u306e\u56f3\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u3068\u304d\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306e\u884c\u5217\u306f\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\n\\begin{pmatrix}\n0.5 & 0 & -50\\\\\n0 & -0.5 & 500\\\\\n0 & 0 & 1\n\\end{pmatrix}\n(0.50\u2212500\u22120.5500001){\\begin{pmatrix}\n0.5 & 0 & -50\\\\\n0 & -0.5 & 500\\\\\n0 & 0 & 1\n\\end{pmatrix}\n}\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\njshell> Affine affine = new Affine(0.5, 0, -50, 0, -0.5, 500)\naffine ==> Affine [\n        0.5, 0.0, 0.0, -50.0\n        0.0, -0.5, 0.0, 500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(100, 1000)\n$4 ==> Point2D [x = 0.0, y = 0.0]\n\njshell> affine.transform(740, 1000)\n$5 ==> Point2D [x = 320.0, y = 0.0]\n\njshell> affine.transform(740, 600)\n$6 ==> Point2D [x = 320.0, y = 200.0]\n\njshell> affine.transform(100, 600)\n$7 ==> Point2D [x = 0.0, y = 200.0]\n\njshell>\n\n\u4eca\u56de\u306f\u3001\u5909\u63db\u306e\u30a4\u30f3\u30d7\u30c3\u30c8\u3068\u3057\u3066Point2D\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u76f4\u63a5\uff58\u5ea7\u6a19\u5024\u3001\uff59\u5ea7\u6a19\u5024\u3092\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(100, 1000)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(740, 1000)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(740, 600)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(100, 600)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e( 0, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff16\uff09\uff1a\u753b\u9762\u4e2d\u5fc3\u3067\u62e1\u5927\u7e2e\u5c0f\n\u3053\u308c\u307e\u3067\u306e\u5ea7\u6a19\u5909\u63db\u306b\u304a\u3051\u308b\u62e1\u5927\u30fb\u7e2e\u5c0f\u3067\u306f\u3001\u753b\u9762\u5de6\u4e0a\u3092\u57fa\u70b9\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u6b21\u306b\u3001\u3053\u3053\u307e\u3067\u306e\u5ea7\u6a19\u5909\u63db\u3092\u5b9f\u88c5\u3057\u305f\u3068\u3042\u308bCanvas\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8868\u793a\u3092\u898b\u3066\u307f\u307e\u3059\u3002\u8868\u793a\uff08\uff11\uff09\u304b\u3089\u8868\u793a\uff08\uff13\uff09\u3078\u62e1\u5927\u3057\u3066\u3044\u304f\u3068\u3001\u5de6\u4e0a\u9685\u3092\u57fa\u70b9\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u8868\u793a\uff08\uff11\uff09\n\n\u8868\u793a\uff08\uff12\uff09\n\n\u8868\u793a\uff08\uff13\uff09\n\n\n\u3057\u304b\u3057\u3001\u76f4\u611f\u7684\u306a\u64cd\u4f5c\u3068\u3057\u3066\u306f\u3001\u753b\u9762\u4e2d\u5fc3\u3092\u57fa\u70b9\u3068\u3057\u3066\u62e1\u5927\u30fb\u7e2e\u5c0f\u3057\u3066\u307b\u3057\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u305d\u3053\u3067\u3001\u4eca\u56de\u306f\u753b\u9762\u5ea7\u6a19\u7cfb\u306b\u304a\u3044\u3066\u753b\u9762\u5de6\u4e0a\u9685\u306e\u5ea7\u6a19\u3092\u753b\u9762\u4e2d\u5fc3\u306b\u79fb\u52d5\u3055\u305b\u308b\u5e73\u884c\u79fb\u52d5\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\u307e\u305a\u3001\u300c\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff15\uff09\uff1a\u62e1\u5927\u7e2e\u5c0f\u3068\u5e73\u884c\u79fb\u52d5\u300d\u3067\u4f7f\u7528\u3057\u305f\u5ea7\u6a19\u5909\u63db\u306e\u5f0f\u3092\u6b21\u306b\u518d\u5ea6\u6319\u3052\u307e\u3059\u3002\n\\begin{align*}\nx' &= sx - sx_1 \\\\\ny' &= -sy + sy_1\n\\end{align*}\nx\u2032=sx\u2212sx1y\u2032=\u2212sy+sy1{\\begin{align*}\nx' &= sx - sx_1 \\\\\ny' &= -sy + sy_1\n\\end{align*}\n}\n\u753b\u9762\u306e\u5e45\u3092w, \u753b\u9762\u306e\u9ad8\u3055\u3092h\u3068\u3057\u307e\u3059\u3002\u753b\u9762\u5de6\u4e0a\u9685\u3092\u753b\u9762\u4e2d\u5fc3\u306b\u5e73\u884c\u79fb\u52d5\u3059\u308b\u64cd\u4f5c\u306e\u5ea7\u6a19\u5909\u63db\u5f0f\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\\begin{align*}\nx'' &= x' + \\frac{w}{2}\\\\\ny'' &= y' + \\frac{h}{2}\n\\end{align*}\nx\u2033=x\u2032+w2y\u2033=y\u2032+h2{\\begin{align*}\nx'' &= x' + \\frac{w}{2}\\\\\ny'' &= y' + \\frac{h}{2}\n\\end{align*}\n}\n\u753b\u9762\u5de6\u4e0a\u9685\u3092\u753b\u9762\u4e2d\u5fc3\u306b\u5e73\u884c\u79fb\u52d5\u3059\u308b\u64cd\u4f5c\u3092\u8ffd\u52a0\u3057\u305f\u5ea7\u6a19\u5909\u63db\u5f0f\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\\begin{align*}\nx'' &= sx - sx_1 + \\frac{w}{2}\\\\\ny'' &= -sy + sy_1 + \\frac{h}{2}\n\\end{align*}\nx\u2033=sx\u2212sx1+w2y\u2033=\u2212sy+sy1+h2{\\begin{align*}\nx'' &= sx - sx_1 + \\frac{w}{2}\\\\\ny'' &= -sy + sy_1 + \\frac{h}{2}\n\\end{align*}\n}\n\u753b\u9762\u306e\u30b5\u30a4\u30ba\u306b\u5fdc\u3058\u305f\u5e73\u884c\u79fb\u52d5\u306f\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u62e1\u5927\u7e2e\u5c0f\u306b\u306f\u5f71\u97ff\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u4e0a\u306e\u5f0f\u306e\u3088\u3046\u306b\u62e1\u5927\u7e2e\u5c0f\u4fc2\u6570s\u306f\u304b\u3051\u3089\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u56f3\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\u3002\n\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u6b21\u306e\u884c\u5217\u5f0f\u3067\u8868\u3055\u308c\u307e\u3059\u3002\n\\begin{pmatrix}\ns & 0 & -sx_1 + \\frac{w}{2}\\\\\n0 & -s & sy_1 + \\frac{h}{2}\\\\\n0 & 0 & 1\n\\end{pmatrix}\n(s0\u2212sx1+w20\u2212ssy1+h2001){\\begin{pmatrix}\ns & 0 & -sx_1 + \\frac{w}{2}\\\\\n0 & -s & sy_1 + \\frac{h}{2}\\\\\n0 & 0 & 1\n\\end{pmatrix}\n}\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\u753b\u9762\u30b5\u30a4\u30ba\u3092320x200\u3068\u3057\u3066\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3067\u306e\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u5ea7\u6a19\u3092\uff08200, 500)\u3001\u30b9\u30b1\u30fc\u30eb\u30922\u3068\u3057\u305f\u3068\u304d\njshell> affine = new Affine(2, 0, -240, 0, -2, 1100)\naffine ==> Affine [\n        2.0, 0.0, 0.0, -240.0\n        0.0, -2.0, 0.0, 1100.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(200, 500)\n$12 ==> Point2D [x = 160.0, y = 100.0]\n\n\u3068\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u5de6\u4e0a\u9685(200, 500)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u3067\u306e(160, 100)\u3068\u753b\u9762\u4e2d\u5fc3\u306b\u5909\u63db\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\u753b\u9762\u30b5\u30a4\u30ba\u3092320x200\u3068\u3057\u3066\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3067\u306e\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u5ea7\u6a19\u3092\uff08200, 500)\u3001\u30b9\u30b1\u30fc\u30eb\u30920.5\u3068\u3057\u305f\u3068\u304d\njshell> affine = new Affine(0.5, 0, 60, 0, -0.5, 350)\naffine ==> Affine [\n        0.5, 0.0, 0.0, 60.0\n        0.0, -0.5, 0.0, 350.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(200, 500)\n$14 ==> Point2D [x = 160.0, y = 100.0]\n\n\u3068\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u5de6\u4e0a\u9685(200, 500)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u3067\u306e(160, 100)\u3068\u753b\u9762\u4e2d\u5fc3\u306b\u5909\u63db\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u307e\u3068\u3081\n\u53f3\u624b\u7cfb\u306e\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u3067\u5b9a\u7fa9\u3055\u308c\u308b\u30c7\u30fc\u30bf\u3092\u753b\u9762\u306b\u8868\u793a\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308b\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\\begin{pmatrix}\ns & 0 & -sx_1 + \\frac{w}{2}\\\\\n0 & -s & sy_1 + \\frac{h}{2}\\\\\n0 & 0 & 1\n\\end{pmatrix}\n(s0\u2212sx1+w20\u2212ssy1+h2001){\\begin{pmatrix}\ns & 0 & -sx_1 + \\frac{w}{2}\\\\\n0 & -s & sy_1 + \\frac{h}{2}\\\\\n0 & 0 & 1\n\\end{pmatrix}\n}\n\u4f46\u3057\u3001\\\\\ns\u306f\u62e1\u5927\u7387\\\\\n(x_1, y_1)\u306f\u753b\u9762\u306e\u4e2d\u5fc3\u306b\u8868\u793a\u3059\u308b\u30c7\u30fc\u30bf\u5ea7\u6a19\\\\\n(w, h)\u306f\u753b\u9762\u5ea7\u6a19\u7cfb\u306b\u304a\u3051\u308b\u8868\u793a\u30b5\u30a4\u30ba\u306e\u5e45\u3068\u9ad8\u3055\n\u4f46\u3057\u3001s\u306f\u62e1\u5927\u7387(x1,y1)\u306f\u753b\u9762\u306e\u4e2d\u5fc3\u306b\u8868\u793a\u3059\u308b\u30c7\u30fc\u30bf\u5ea7\u6a19(w,h)\u306f\u753b\u9762\u5ea7\u6a19\u7cfb\u306b\u304a\u3051\u308b\u8868\u793a\u30b5\u30a4\u30ba\u306e\u5e45\u3068\u9ad8\u3055{\u4f46\u3057\u3001\\\\\ns\u306f\u62e1\u5927\u7387\\\\\n(x_1, y_1)\u306f\u753b\u9762\u306e\u4e2d\u5fc3\u306b\u8868\u793a\u3059\u308b\u30c7\u30fc\u30bf\u5ea7\u6a19\\\\\n(w, h)\u306f\u753b\u9762\u5ea7\u6a19\u7cfb\u306b\u304a\u3051\u308b\u8868\u793a\u30b5\u30a4\u30ba\u306e\u5e45\u3068\u9ad8\u3055\n}\n\n\u53c2\u8003\u30fb\u95a2\u9023\u60c5\u5831\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u4f7f\u7528\u3057\u305fJavaFX Canvas\u3067\u306e\u753b\u9762\u8868\u793a\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u305d\u306e\u89e3\u8aac\u3092\u6b21\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n\nJavaFX Canvas\u3092\u4f7f\u3063\u305f\u30d9\u30af\u30bf\u30fc\u63cf\u753b\u3068\u62e1\u5927\u7e2e\u5c0f\u79fb\u52d5\u64cd\u4f5c\n\n\u672c\u8a18\u4e8b\u3092\u66f8\u304f\u304d\u3063\u304b\u3068\u306a\u3063\u305fJJUG CCC 2016 Fall\u3067\u306e\u767a\u8868\u30b9\u30e9\u30a4\u30c9\u306f\u6b21\u3067\u3059\u3002\n\n\u4e16\u754c\u306f\u56db\u89d2\u3067\u306f\u306a\u3044\uff5eJavaFX\u3067\u5730\u56f3\u3092\u63cf\u304f\n\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\n\n\u904e\u53bb\u306bCanvas\u3067\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306b\u53d6\u308a\u7d44\u307f\u306f\u307e\u3063\u305f\u3053\u3068\u3092\u66f8\u3044\u305f\u30d6\u30ed\u30b0\n\nCanvas\u3067Affine\u5909\u63db\u3067\u5927\u3044\u306b\u306f\u307e\u308b\uff08\u6570\u5b66\u7684\u30bb\u30f3\u30b9\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\uff09\n\n\u672c\u8a18\u4e8b\u306f[JavaFX Advent Calendar 2016](http://qiita.com/advent-calendar/2016/javafx)\u306e12\u65e5\u76ee\u3067\u3059\u3002\u6628\u65e5\u306f\u3001@skrb\u3055\u3093\u306e[Scene Builder \u5c0f\u30cd\u30bf 3\u3064](http://skrb.hatenablog.com/entry/2016/12/11/000300)\u3067\u3059\u3002\u660e\u65e5\u306f\u3001@sk44_\u3055\u3093\u3067\u3059\u3002\n\n# \u306f\u3058\u3081\u306b\n\nJavaFX\u306eCanvas\u306b\u306f\u3001\u7dda\u3001\u77e9\u5f62\u3001\u6955\u5186\u3001\u30dd\u30ea\u30b4\u30f3\u306a\u3069\u306e\u30d9\u30af\u30c8\u30eb\u30c7\u30fc\u30bf\u3084\u753b\u50cf\u30c7\u30fc\u30bf\u3092\u63cf\u753b\u3059\u308b2D\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30b9\u6a5f\u80fd\u304c\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u6307\u5b9a\u3057\u3066\u3001\u62e1\u5927\u3001\u7e2e\u5c0f\u3001\u5e73\u884c\u79fb\u52d5\u3001\u56de\u8ee2\u3001\u305b\u3093\u65ad\u3068\u3044\u3063\u305f2D\u63cf\u753b\u306e\u5909\u5f62\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u3053\u3053\u3067\u3001\u753b\u9762\u3088\u308a\u3082\u5927\u304d\u306a2D\u30c7\u30fc\u30bf\u3092\u3001\u4efb\u610f\u306b\u62e1\u5927\u3001\u7e2e\u5c0f\u3057\u3066\u8868\u793a\u3059\u308b\u3001\u4e0a\u4e0b\u5de6\u53f3\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057\u3066\u8868\u793a\u3059\u308b\u3001\u3068\u3044\u3046\u64cd\u4f5c\u3092\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u4f7f\u3063\u3066\u5b9f\u73fe\u3059\u308b\u3068\u3057\u307e\u3059\u3002\u5730\u56f3\u306e\u8868\u793a\u3001CAD\u30c7\u30fc\u30bf\u306e\u8868\u793a\u3001\u306a\u3069\u304c\u4e00\u4f8b\u3067\u3059\u3002\n\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u539f\u7406\u306f\u30b7\u30f3\u30d7\u30eb\u306a\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u3084\u3063\u3066\u307f\u308b\u3068\u306f\u307e\u308b\u3053\u3068\u304c\u591a\u304f\u30012\u5e74\u524d\u306b\u3082[Canvas\u3067Affine\u5909\u63db\u3067\u5927\u3044\u306b\u306f\u307e\u308b\uff08\u6570\u5b66\u7684\u30bb\u30f3\u30b9\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\uff09](http://d.hatena.ne.jp/torutk/20140415/p1)\u3068\u3044\u3046\u30d6\u30ed\u30b0\u3092\u66f8\u3044\u305f\u307b\u3069\u3067\u3059\u3002\n\n\u4eca\u67083\u65e5\u306b\u958b\u50ac\u3055\u308c\u305fJJUG CCC 2016 Fall\u306b\u304a\u3044\u3066\u3001\u300c\u4e16\u754c\u306f\u56db\u89d2\u3067\u306f\u306a\u3044\uff5eJavaFX\u3067\u5730\u56f3\u3092\u63cf\u304f\u300d\u3068\u3044\u3046\u984c\u76ee\u3067\u3001\u5730\u56f3\u30c7\u30fc\u30bf\uff08\u4e16\u754c\u6d77\u5cb8\u7dda\u30c7\u30fc\u30bf\uff09\u3092JavaFX\u306eCanvas\u3067\u63cf\u753b\u3059\u308b\u5185\u5bb9\u3092\u767a\u8868\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u3068\u304d\u306b\u7528\u610f\u3057\u305f\u5730\u56f3\u8868\u793a\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u306f\u3001\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u4f7f\u3063\u3066\u62e1\u5927\u30fb\u7e2e\u5c0f\u30fb\u30b9\u30af\u30ed\u30fc\u30eb\u3092\u884c\u3063\u3066\u3044\u307e\u3059\u3002\u3067\u3059\u304c\u3001\u62e1\u5927\u30fb\u7e2e\u5c0f\u3092\u3059\u308b\u3068\u8868\u793a\u3057\u3066\u3044\u308b\u5730\u56f3\u306e\u4f4d\u7f6e\u304c\u305a\u308c\u3066\u3057\u307e\u3046\u3068\u3044\u3046\u554f\u984c\u3092\u62b1\u3048\u3066\u3044\u307e\u3057\u305f\u3002\u6b8b\u5ff5\u306a\u304c\u3089\u767a\u8868\u5f53\u65e5\u307e\u3067\u306b\u306f\u89e3\u6c7a\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u305d\u3053\u3067\u3001\u30ea\u30d9\u30f3\u30b8\u3068\u3057\u3066\u3001\u8868\u793a\u306e\u62e1\u5927\u30fb\u7e2e\u5c0f\u3092\u3059\u308b\u3068\u304d\u306f\u3001\u753b\u9762\u306b\u8868\u793a\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u306e\u4e2d\u5fc3\u304c\u305a\u308c\u306a\u3044\u3088\u3046\u306b\u3001\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u518d\u5ea6\u57fa\u790e\u304b\u3089\u52c9\u5f37\u3057\u76f4\u3057\u3001\u6574\u7406\u3057\u3066\u307e\u3068\u3081\u308b\u3053\u3068\u3068\u3057\u307e\u3057\u305f\u3002\n\n## \u672c\u8a18\u4e8b\u306e\u5b9f\u884c\u74b0\u5883\n\n\u672c\u8a18\u4e8b\u306f\u3001JavaFX\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u8abf\u3079\u3066\u7406\u89e3\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u306b\u8a18\u8ff0\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3042\u308a\u307e\u305b\u3093\u3002Affine\u5909\u63db\u306e\u52d5\u4f5c\u3092\u7c21\u5358\u306b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u3001\u6765\u5e74\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u308b\u4e88\u5b9a\u306eJDK 9\u306b\u642d\u8f09\u3055\u308c\u308b\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u74b0\u5883jshell\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\n\nWindows 10 64bit\u74b0\u5883\u306e\u4e0a\u3067\u3001[Java SE Development Kit 9 Early Access\u7248](https://jdk9.java.net/download/)\u3092\u5165\u308c\u3066shell\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\u8a18\u4e8b\u57f7\u7b46\u6642\u70b9\u3067\u306f\u3001JDK 9 Build 148\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059\u3002\n\n# \u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3068\u753b\u9762\u5ea7\u6a19\u7cfb\n\n\u4e00\u822c\u306b\u30c7\u30fc\u30bf\u306e\u5f62\u72b6\u306f\u3001\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u3053\u306e\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u306f\u53f3\u624b\u7cfb\u3001\u3064\u307e\u308ax\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3092\u53cd\u6642\u8a08\u56de\u308a\u306b90\u5ea6\u56de\u8ee2\u3057\u305f\u5411\u304d\u3092y\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3068\u3057\u3066\u8868\u3057\u307e\u3059\u3002\n\n\u4e00\u65b9\u3001JavaFX\u306e\u753b\u9762\u5ea7\u6a19\u3082\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u304c\u3001\u3053\u306e\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u306f\u5de6\u624b\u7cfb\u3001\u3064\u307e\u308ax\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3092\u6642\u8a08\u56de\u308a\u306b90\u5ea6\u56de\u8ee2\u3057\u305f\u5411\u304d\u3092y\u8ef8\u306e\u6b63\u306e\u65b9\u5411\u3068\u3057\u3066\u8868\u3057\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3068\u753b\u9762\u5ea7\u6a19\u7cfb.png](https://qiita-image-store.s3.amazonaws.com/0/100353/0277c4be-1001-c46d-fd38-8453a945f20c.png)\n\n\u305d\u306e\u305f\u3081\u3001\u30c7\u30fc\u30bf\u306e\u5ea7\u6a19\u3092\u305d\u306e\u307e\u307e\u753b\u9762\u306b\u8868\u793a\u3059\u308b\u3068\u4e0a\u4e0b\u304c\u9006\u3055\u307e\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n## \u5730\u56f3\u30c7\u30fc\u30bf\u3092\u5909\u63db\u305b\u305a\u306b\u8868\u793a\u3059\u308b\u3068\u30fb\u30fb\u30fb\n\n\u4e00\u822c\u306b\u5730\u56f3\u30c7\u30fc\u30bf\u306f\u3001\u7def\u5ea6\u7d4c\u5ea6\u5ea7\u6a19\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u3001\u7def\u5ea6\u3092y\u8ef8\u3001\u7d4c\u5ea6\u3092x\u8ef8\u3067\u8868\u73fe\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3068\u306a\u308a\u307e\u3059\u3002\n\n![mapcoordinate.png](https://qiita-image-store.s3.amazonaws.com/0/100353/dc052dc1-24c8-47a2-85b7-3968fe729cb3.png)\n\n\u3053\u306e\u5730\u56f3\u30c7\u30fc\u30bf\u3092\u3001\u5ea7\u6a19\u306e\u5909\u63db\u3092\u4e00\u5207\u305b\u305a\u306b\u753b\u9762\u306b\u8868\u793a\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306a\u8868\u793a\u3068\u306a\u308a\u307e\u3059\u3002\n\n![screencoordinate.png](https://qiita-image-store.s3.amazonaws.com/0/100353/dd7b32dd-9fb5-57a5-467f-fca32ad2ef20.png)\n\n\u5730\u56f3\u30c7\u30fc\u30bf\u306e\u5ea7\u6a19\u7cfb\u306e\u7b2c1\u8c61\u9650\uff080,0)\uff5e(180,90)\u306e\u7bc4\u56f2\u304c\u4e0a\u4e0b\u9006\u3055\u307e\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u3053\u3067\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u304b\u3089\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5ea7\u6a19\u5909\u63db\u3092\u5c0e\u5165\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u4efb\u610f\u306b\u62e1\u5927\u30fb\u7e2e\u5c0f\u30fb\u5e73\u884c\u79fb\u52d5\u30fb\u56de\u8ee2\u3057\u3066\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u305d\u306e\u969b\u306b\u4f7f\u308f\u308c\u308b\u5ea7\u6a19\u5909\u63db\u304c\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3068\u306a\u308a\u307e\u3059\u3002\n\n## \u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306b\u3088\u308b\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u304b\u3089\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5909\u63db\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3092xy\u5ea7\u6a19\u7cfb\u3001\u753b\u9762\u5ea7\u6a19\u7cfb\u3092x'y'\u5ea7\u6a19\u7cfb\u3068\u3057\u307e\u3059\u3002\nxy\u5ea7\u6a19\u7cfb\u4e0a\u306e\u70b9\u3092\uff08x, y\uff09\u3001x'y'\u5ea7\u6a19\u7cfb\u4e0a\u306e\u70b9\u3092\uff08x', y'\uff09\u3068\u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u304b\u3089\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5ea7\u6a19\u5909\u63db\u306f\u3001(x, y)\u3092\u5165\u529b\u3068\u3057\u3066(x', y')\u3092\u51fa\u529b\u3068\u3059\u308b\u5909\u63db\u5f0f\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\nx' = ax + by + t_x\\\\\ny' = cx + dy + t_y\n```\n\n\u3053\u306e\u5909\u63db\u5f0f\u3092\u3001\u5ea7\u6a19\u3092\u30d9\u30af\u30c8\u30eb\u3001\u5909\u63db\u3092\u884c\u5217\u3067\u8868\u73fe\u3057\u76f4\u3059\u3068\n\n```math\n\\begin{pmatrix}\nx'\\\\ \ny'\\\\\n1\n\\end{pmatrix}\n= \\begin{pmatrix}\na & b & t_x\\\\\nc & d & t_y\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\\ny\\\\\n1\n\\end{pmatrix}\n```\n\n\u3068\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u884c\u5217\u304cAffine\u5909\u63db\u884c\u5217\u3068\u306a\u308a\u307e\u3059\u3002\uff082\u6b21\u5143\u306e\u5834\u5408\uff09\n\u8a08\u7b97\u306e\u53d6\u308a\u6271\u3044\u4e0a\u30013\u6b21\u306e\u30d9\u30af\u30c8\u30eb\u30fb\u884c\u5217\u3067\u8a08\u7b97\uff08\u540c\u6b21\u5ea7\u6a19\uff09\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff11\uff09\uff1a\u6052\u7b49\u5909\u63db\n\n```math\nx' = x\\\\\ny' = y\\\\\n```\n\u3068\u306a\u308b\u5909\u63db\uff08\u3064\u307e\u308a\u4f55\u3082\u5909\u63db\u3057\u306a\u3044\uff09\u3092\u9069\u7528\u3059\u308b\u3068\u3001\u4e0a\u4e0b\u9006\u3055\u307e\u306e\u8868\u793a\u3068\u306a\u308a\u307e\u3059\u3002\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\nx'\\\\y\\\\1'\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & 1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n```\n\u3053\u306e\u5909\u63db\uff08\u7121\u5909\u63db\uff09\u3067\u306f\u3001\u30c7\u30fc\u30bf\u306f\u6b21\u306e\u3088\u3046\u306b\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u6052\u7b49\u5909\u63db\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/bb271002-42db-d035-f7a4-056bf143fc8f.png)\n\n\u9ec4\u8272\u3044\u77e9\u5f62\u90e8\u5206\u304c\u753b\u9762\u63cf\u753b\u9818\u57df\u3067\u3059\u3002\u70b9A\u3001B\u3001C\u306f\u6b21\u306e\u3088\u3046\u306bA', B', C'\u306b\u5909\u63db\uff08\u7121\u5909\u63db\uff09\u3055\u308c\u307e\u3059\u3002\n\n\n```math\n\\begin{align*}\n(A'_x, A'_y) &= (A_x, A_y) = (160, 200)\\\\\n(B'_x, B'_y) &= (B_x, B_y) = (320, 0)\\\\\n(C'_x, C'_y) &= (C_x, C_y) = (160, -200)\n\\end{align*}\n```\n\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```java\nAffine affine = new Affine();\n```\n\n### JDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\nJDK 9\u306b\u74b0\u5883\u5909\u6570PATH\u3092\u901a\u3057\u3066\u304a\u304d\u307e\u3059\u3002jshell\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\nC:\\>java -version\njava version \"9-ea\"\nJava(TM) SE Runtime Environment (build 9-ea+148)\nJava HotSpot(TM) 64-Bit Server VM (build 9-ea+148, mixed mode)\n\nC:\\>jshell\n|  JShell\u3078\u3088\u3046\u3053\u305d -- \u30d0\u30fc\u30b8\u30e7\u30f39-ea\n|  \u6982\u8981\u306b\u3064\u3044\u3066\u306f\u3001\u6b21\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044: /help intro\n|\njshell>\n```\n\nAffine\u5909\u63db\uff08\u6052\u7b49\u5909\u63db\uff09\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n```\njshell> import javafx.scene.transform.Affine\n\njshell> Affine affine = new Affine()\naffine ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, 1.0, 0.0, 0.0\n        0.0, 0.0, 1.0, 0.0\n]\n```\n\njshell\u74b0\u5883\u306f\u3001\u5b9a\u7fa9\u3057\u305f\u5909\u6570\u306e\u5185\u5bb9\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\u3057\u304b\u3057\u30013\u884c4\u5217\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\u3053\u308c\u306f\u3001JavaFX \u304c\u6a19\u6e96\u30673D\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30b9\u3092\u5099\u3048\u3066\u3044\u308b\u306e\u3067\u30013\u6b21\u5143\u5ea7\u6a19\u306e\u5909\u63db\u306b\u5bfe\u5fdc\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n![affine_jshell.png](https://qiita-image-store.s3.amazonaws.com/0/100353/d6189a1e-3b0a-9ee3-0148-6a8daa03f981.png)\n\n2D\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u6271\u3046\u5834\u5408\u306f\u3001\u4e0a\u56f3\u306e\u3088\u3046\u306b\u30013\u5217\u76ee\u306f\u6c17\u306b\u3057\u306a\u3044\u3067\u304a\u304d\u307e\u3059\u3002\n\n\u6b21\u306b\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u70b9\u30921\u3064\u4f5c\u6210\u3057\u3001\u3053\u306eAffine\u3067\u5909\u63db\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\njshell> import javafx.geometry.Point2D\n\njshell> Point2D dataA = new Point2D(160, 200)\ndataA ==> Point2D [x = 160.0, y = 200.0]\n\njshell> affine.transform(dataA)\n$5 ==> Point2D [x = 160.0, y = 200.0]\n\njshell>\n```\n\n\u5143\u306e\u5ea7\u6a19\uff08160,200\uff09\u3068\u540c\u3058\u5024\u306e\u5ea7\u6a19\u304c\u3053\u306eAffine\u306e\u5909\u63db\u7d50\u679c\u3068\u3057\u3066\u5f97\u3089\u308c\u307e\u3057\u305f\u3002\n\n## \u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff12\uff09\uff1a\u4e0a\u4e0b\u9006\u3055\u307e\u306e\u89e3\u6d88\n\ny\u8ef8\u304c\u9006\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u5358\u7d14\u306b\u306fy\u5ea7\u6a19\u306e\u7b26\u53f7\u3092\u9006\u306b\u3059\u308c\u3070\u3088\u3044\u3068\u8003\u3048\u6b21\u306e\u5ea7\u6a19\u5909\u63db\u3092\u5c0e\u5165\u3057\u307e\u3059\u3002\n\n```math\n\\begin{align*}\nx' &= x\\\\\ny' &= -y\\\\\n\\end{align*}\n```\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n```\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u4e0a\u4e0b\u53cd\u8ee2\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/0b5e5129-0ae8-ae24-cb89-c98c856f2058.png)\n\n\u70b9A\u3001B\u3001C\u306f\u6b21\u306e\u3088\u3046\u306bA', B', C'\u306b\u5909\u63db\u3055\u308c\u307e\u3059\u3002\n\n```math\n\\begin{align*}\n(A'_x, A'_y) &= (A_x, -A_y) = (160, -200)\\\\\n(B'_x, B'_y) &= (B_x, -B_y) = (320, 0)\\\\\n(C'_x, C'_y) &= (C_x, -C_y) = (160, 200)\n\\end{align*}\n```\n\u30c7\u30fc\u30bf\u306e\u8868\u793a\u304c\u9006\u3055\u307e\u306b\u306a\u308b\u3053\u3068\u306f\u89e3\u6d88\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u30c7\u30fc\u30bf\u306e\u8868\u793a\u9818\u57df\u304c\uff08\u305d\u306e\uff11\uff09\u3067\u306e\u8868\u793a\u9818\u57df\u3068\u306f\u305a\u308c\u3066\uff08X\u8ef8\u306e\u53cd\u5bfe\u5074\uff09\u3057\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```java\nAffine affine = new Affine(1, 0, 0, 0, -1, 0);\n```\n\n### JDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\n```\njshell> affine = new Affine(1, 0, 0, 0, -1, 0)\naffine ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, -1.0, 0.0, 0.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(dataA)\n$9 ==> Point2D [x = 160.0, y = -200.0]\n\njshell>\n```\n\n\u70b9A\u304c(160, 200)\u304b\u3089(160, -200)\u306b\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\u540c\u69d8\u306b\u70b9B\u3001\u70b9C\u306b\u3064\u3044\u3066\u3082\u5909\u63db\u7d50\u679c\u3092\u898b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```\njshell> Point2D dataB = new Point2D(320, 0)\ndataB ==> Point2D [x = 320.0, y = 0.0]\n\njshell> affine.transform(dataB)\n$12 ==> Point2D [x = 320.0, y = -0.0]\n\njshell> Point2D dataC = new Point2D(160, -200)\ndataC ==> Point2D [x = 160.0, y = -200.0]\n\njshell> affine.transform(dataC)\n$13 ==> Point2D [x = 160.0, y = 200.0]\n\njshell>\n```\n\n\u70b9B\u304c(320, 0)\u304b\u3089(320, -0)\u3078\u5909\u63db\uff08\u5ea7\u6a19\u5024\u5909\u5316\u305b\u305a\uff09\u3055\u308c\u307e\u3057\u305f\u3002\n\u70b9C\u304c(160, -200)\u304b\u3089(160, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n## \u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff13\uff09\uff1a\u539f\u70b9\u306e\u5e73\u884c\u79fb\u52d5\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u306f\u63cf\u753b\u3057\u305f\u3044\u9818\u57df\u306e\u5de6\u4e0b\u9685\u3067\u3059\u304c\u3001\u753b\u9762\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u306f\u63cf\u753b\u3055\u308c\u308b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u3068\u306a\u308a\u307e\u3059\u3002\u305d\u3053\u3067\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u3092\u753b\u9762\u5ea7\u6a19\u7cfb\u306e\u539f\u70b9\u3078\u5e73\u884c\u79fb\u52d5\u3055\u305b\u3066\u63cf\u753b\u3057\u305f\u3044\u9818\u57df\u3092\u5408\u308f\u305b\u307e\u3059\u3002\n\n\u3053\u306e\u5834\u5408\u306e\u5e73\u884c\u79fb\u52d5\u306f\u3001y\u8ef8\u65b9\u5411\u306b\u63cf\u753b\u9818\u57df\u306e\u9ad8\u3055\u5206\u306e\u79fb\u52d5\u3068\u306a\u308a\u307e\u3059\u3002\u63cf\u753b\u9818\u57df\u306e\u9ad8\u3055\u3092h\u3068\u3059\u308b\u3068\u6b21\u306e\u5909\u63db\u5f0f\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{align*}\nx' &= x\\\\\ny' &= -(y - h) = -y + h\\\\\n\\end{align*}\n```\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & h\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n```\n\n\u9ad8\u3055h\u3092200\u3068\u3057\u305f\u3068\u304d\u306e\u56f3\u3068\u5404\u5ea7\u6a19\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u4e0a\u4e0b\u53cd\u8ee2\uff0b\u539f\u70b9\u4e00\u81f4\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/63272915-ecf1-5650-e649-7cd9daa7a0bc.png)\n\n\n```math\n\\begin{align*}\n(A'_x, A'_y) &= (A_x, -A_y + 200) = (160, 0)\\\\\n(B'_x, B'_y) &= (B_x, -B_y + 200) = (320, 200)\\\\\n(C'_x, C'_y) &= (C_x, -C_y + 200) = (160, 0)\n\\end{align*}\n```\n\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```java\nAffine affine = new Affine(1, 0, 0, 0, -1, 200);\n```\n\n### JDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\n```\njshell> affine = new Affine(1, 0, 0, 0, -1, 200)\naffine ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, -1.0, 0.0, 200.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(dataA)\n$19 ==> Point2D [x = 160.0, y = 0.0]\n\njshell> affine.transform(dataB)\n$20 ==> Point2D [x = 320.0, y = 200.0]\n\njshell> affine.transform(dataC)\n$21 ==> Point2D [x = 160.0, y = 400.0]\n\njshell>\n```\n\n\u70b9A\u304c(160, 200)\u304b\u3089(160, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u70b9B\u304c(320, 0)\u304b\u3089(320, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u70b9C\u304c(160, -200)\u304b\u3089\uff08160, 400)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n## \u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff14\uff09\uff1a\u63cf\u753b\u9818\u57df\u3092\u79fb\u52d5\n\n\u63cf\u753b\u9818\u57df\u3092\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u4efb\u610f\u306e\u7b87\u6240\u306b\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u306e\u5ea7\u6a19\u3092\uff08x1, y1\uff09\u3068\u3059\u308b\u3068\u3001\u6b21\u306e\u5f0f\u3067\u5e73\u884c\u79fb\u52d5\u3092\u8868\u3057\u307e\u3059\u3002\n\n```math\n\\begin{align*}\nx' &= x - x_1\\\\\ny' &= -(y - y_1) = -y + y_1\n\\end{align*}\n```\n\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & -1 & y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n```\n\n\uff08x1, y1)\u3092\uff08-280, 500)\u3068\u3057\u305f\u3068\u304d\u306e\u56f3\u3068\u5404\u5ea7\u6a19\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u5e73\u884c\u79fb\u52d5\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/5f3e7f90-0cab-4d36-190c-70deedde2c7a.png)\n\n```math\n\\begin{align*}\n(A'_x, A'_y) &= (A_x - (-280), -(A_y - 500))\\\\\n &= (A_x + 280, -A_y + 500)\\\\\n &= (0, 0)\\\\\n(B'_x, B'_y) &= (B_x - (-280), -(B_y - 500))\\\\\n &= (B_x + 280, -B_y + 500)\\\\\n &= (0, 200)\n\\end{align*}\n```\n\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```java\nAffine affine = new Affine(1, 0, 280, 0, -1, 500);\n```\n\n\u3061\u3087\u3063\u3068\u308f\u304b\u308a\u306b\u304f\u3044\u3067\u3059\u306d\u3002\n\n2\u3064\u306e\u5ea7\u6a19\u5909\u63db\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u8003\u3048\u3066\u307f\u307e\u3059\u3002\n\n0. \u5e73\u884c\u79fb\u52d5\n1. \u4e0a\u4e0b\u53cd\u8ee2\n\n\u5e73\u884c\u79fb\u52d5\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u6b21\u306e\u884c\u5217\u5f0f\u3067\u8868\u3055\u308c\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & 1 & -y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n```\n\n\u4e0a\u4e0b\u53cd\u8ee2\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u6b21\u306e\u884c\u5217\u5f0f\u3067\u8868\u3055\u308c\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n```\n\n\u307e\u305a\u5e73\u884c\u79fb\u52d5\u3092\u5b9f\u65bd\u3057\u3066\u3001\u6b21\u306b\u4e0a\u4e0b\u53cd\u8ee2\u3092\u3057\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3001\u884c\u5217\u306e\u7d50\u5408\u3067\u306f\u6700\u521d\u306b\u9069\u7528\u3059\u308b\u65b9\u3092\u53f3\u5074\u306b\u66f8\u304d\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\n1 & 0 & 0\\\\\n0 & -1 & 0\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & 1 & -y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}=\n\\begin{pmatrix}\n1 & 0 & -x_1\\\\\n0 & -1 & y_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n```\n### JDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\n2\u3064\u306eAffine\u3092\u5408\u6210\u3057\u307e\u3059\u3002\n\n```\njshell> Affine affineMove = new Affine(1, 0, -(-280), 0, 1, -500)\naffineMove ==> Affine [\n        1.0, 0.0, 0.0, 280.0\n        0.0, 1.0, 0.0, -500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> Affine affineReverse = new Affine(1, 0, 0, 0, -1, 0)\naffineReverse ==> Affine [\n        1.0, 0.0, 0.0, 0.0\n        0.0, -1.0, 0.0, 0.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affineReverse.createConcatenation(affineMove)\n$35 ==> Affine [\n        1.0, 0.0, 0.0, 280.0\n        0.0, -1.0, 0.0, 500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\n```\n\u3046\u30fc\u3093\u3001\u3084\u306f\u308a\u308f\u304b\u308a\u306b\u304f\u3044\u3067\u3059\u30fb\u30fb\u30fb\u3002\n\n\u3055\u3066\u3001\u5ea7\u6a19\u5909\u63db\u3092\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\njshell> affine = new Affine(1, 0, 280, 0, -1, 500)\naffine ==> Affine [\n        1.0, 0.0, 0.0, 280.0\n        0.0, -1.0, 0.0, 500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> Point2D dataJ = new Point2D(-280, 500)\ndataJ ==> Point2D [x = -280.0, y = 500.0]\n\njshell> affine.transform(dataJ)\n$29 ==> Point2D [x = 0.0, y = 0.0]\n\njshell> Point2D dataK = new Point2D(-280, 300)\ndataK ==> Point2D [x = -280.0, y = 300.0]\n\njshell> affine.transform(dataK)\n$30 ==> Point2D [x = 0.0, y = 200.0]\n\n```\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(-280, 500)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(-280, 300)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n## \u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff15\uff09\uff1a\u62e1\u5927\u7e2e\u5c0f\u3068\u5e73\u884c\u79fb\u52d5\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u63cf\u753b\u9818\u57df\u306e\u5927\u304d\u3055\u3092\u4efb\u610f\u306e\u5927\u304d\u3055\u306b\u62e1\u5927\u307e\u305f\u306f\u7e2e\u5c0f\u3055\u305b\u307e\u3059\u3002\n\u62e1\u5927\u7387\u3092 S \u3068\u3057\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u4e0a\u3067\u306e\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u306e\u5ea7\u6a19\u3092 (x1, y1)\u3068\u3059\u308b\u3068\u3001\u6b21\u306e\u5f0f\u3067\u62e1\u5927\u7e2e\u5c0f\u3068\u5e73\u884c\u79fb\u52d5\u3092\u8868\u3057\u307e\u3059\u3002\n\n```math\n\\begin{align*}\nx' &= s(x - x_1) = sx - sx_1\\\\\ny' &= -s(y - y_1) = -sy + sy_1\n\\end{align*}\n```\n\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3067\u8868\u73fe\u3059\u308b\u3068\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\nx'\\\\y'\\\\1\n\\end{pmatrix}=\n\\begin{pmatrix}\ns & 0 & -sx_1\\\\\n0 & -s & sy_1\\\\\n0 & 0 & 1\n\\end{pmatrix}\n\\begin{pmatrix}\nx\\\\y\\\\1\n\\end{pmatrix}\n```\n\n### \u62e1\u5927\u73872\u3001\u5e73\u884c\u79fb\u52d5(0, 100)\u306e\u5834\u5408\n\n\u3053\u3053\u3067\u3001\u62e1\u5927\u7387\u30922\u306b\u3001\u5e73\u884c\u79fb\u52d5\u91cf\u3092(0,100)\u3068\u3057\u305f\u5834\u5408\u306e\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u8868\u793a\u9818\u57df\u3068\u3001\u753b\u9762\u5ea7\u6a19\u7cfb\u3078\u306e\u5909\u63db\u3092\u56f3\u3067\u898b\u3066\u307f\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u30b9\u30b1\u30fc\u30eb\uff11\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/95f2a00f-e55b-3223-1d03-04728296d431.png)\n\n\u62e1\u5927\u7387\u304c2\u500d\u306a\u306e\u3067\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u4e2d\u306e160\u00d7100\u306e\u7bc4\u56f2\u304c\u753b\u9762\u5ea7\u6a19\u7cfb320\u00d7200\u306b\u63cf\u753b\u3055\u308c\u307e\u3059\u3002\n\n```math\n\\begin{align*}\n(A'_x, A'_y) &= (2A_x + 2\u30fb0, -2A_y + 2\u30fb100)\\\\\n &= (0, 0)\\\\\n(B'_x, B'_y) &= (2B_x + 2\u30fb0, -2B_y + 2\u30fb100)\\\\\n &= (320, 0)\\\\\n(C'_x, C'_y) &= (2C_x + 2\u30fb0, -2C_y + 2\u30fb100)\\\\\n &= (320, 200)\n\\end{align*}\n```\n\n\u30c7\u30fc\u30bf\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u6b21\u306e\u56f3\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u30b9\u30b1\u30fc\u30eb\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/725811d3-6a94-f14c-dbea-68b4f6aa186b.png)\n\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u30b3\u30fc\u30c9\u3067\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```java\nAffine affine = new Affine(2, 0, 0, 0, -2, 200);\n```\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\n```\njshell> affine = new Affine(2, 0, 0, 0, -2, 200)\naffine ==> Affine [\n        2.0, 0.0, 0.0, 0.0\n        0.0, -2.0, 0.0, 200.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> dataA = new Point2D(0, 100)\ndataA ==> Point2D [x = 0.0, y = 100.0]\n\njshell> affine.transform(dataA)\n$38 ==> Point2D [x = 0.0, y = 0.0]\n\njshell> dataB = new Point2D(160, 100)\ndataB ==> Point2D [x = 160.0, y = 100.0]\n\njshell> affine.transform(dataB)\n$40 ==> Point2D [x = 320.0, y = 0.0]\n\njshell> dataC = new Point2D(160, 0)\ndataC ==> Point2D [x = 160.0, y = 0.0]\n\njshell> affine.transform(dataC)\n$42 ==> Point2D [x = 320.0, y = 200.0]\n\n```\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(0, 100)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(160, 100)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(160, 0)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n### \u62e1\u5927\u73870.5\u3001\u5e73\u884c\u79fb\u52d5(100, 1000)\u3067\u306e\u4f8b\n\n\u62e1\u5927\u7387\u304c0.5\u3067\u5e73\u884c\u79fb\u52d5\u91cf\u304c(100,1000)\u306e\u3068\u304d\u306e\u5909\u63db\u306e\u56f3\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u30b9\u30b1\u30fc\u30eb\uff0b\u5e73\u884c\u79fb\u52d5\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/033fc5e3-0bb5-7fde-8e2a-7cbe608111b6.png)\n\n\u3053\u306e\u3068\u304d\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306e\u884c\u5217\u306f\u6b21\u306b\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\n0.5 & 0 & -50\\\\\n0 & -0.5 & 500\\\\\n0 & 0 & 1\n\\end{pmatrix}\n```\n\nJDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\n```\njshell> Affine affine = new Affine(0.5, 0, -50, 0, -0.5, 500)\naffine ==> Affine [\n        0.5, 0.0, 0.0, -50.0\n        0.0, -0.5, 0.0, 500.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(100, 1000)\n$4 ==> Point2D [x = 0.0, y = 0.0]\n\njshell> affine.transform(740, 1000)\n$5 ==> Point2D [x = 320.0, y = 0.0]\n\njshell> affine.transform(740, 600)\n$6 ==> Point2D [x = 320.0, y = 200.0]\n\njshell> affine.transform(100, 600)\n$7 ==> Point2D [x = 0.0, y = 200.0]\n\njshell>\n```\n\n\u4eca\u56de\u306f\u3001\u5909\u63db\u306e\u30a4\u30f3\u30d7\u30c3\u30c8\u3068\u3057\u3066Point2D\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3067\u306f\u306a\u304f\u76f4\u63a5\uff58\u5ea7\u6a19\u5024\u3001\uff59\u5ea7\u6a19\u5024\u3092\u5165\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(100, 1000)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(0, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(740, 1000)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 0)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(740, 600)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e(320, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e(100, 600)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u306e( 0, 200)\u3078\u5909\u63db\u3055\u308c\u307e\u3057\u305f\u3002\n\n## \u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff16\uff09\uff1a\u753b\u9762\u4e2d\u5fc3\u3067\u62e1\u5927\u7e2e\u5c0f\n\n\u3053\u308c\u307e\u3067\u306e\u5ea7\u6a19\u5909\u63db\u306b\u304a\u3051\u308b\u62e1\u5927\u30fb\u7e2e\u5c0f\u3067\u306f\u3001\u753b\u9762\u5de6\u4e0a\u3092\u57fa\u70b9\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u6b21\u306b\u3001\u3053\u3053\u307e\u3067\u306e\u5ea7\u6a19\u5909\u63db\u3092\u5b9f\u88c5\u3057\u305f\u3068\u3042\u308bCanvas\u306e\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u8868\u793a\u3092\u898b\u3066\u307f\u307e\u3059\u3002\u8868\u793a\uff08\uff11\uff09\u304b\u3089\u8868\u793a\uff08\uff13\uff09\u3078\u62e1\u5927\u3057\u3066\u3044\u304f\u3068\u3001\u5de6\u4e0a\u9685\u3092\u57fa\u70b9\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n* \u8868\u793a\uff08\uff11\uff09\n![zoomPanCanvas_scale1.png](https://qiita-image-store.s3.amazonaws.com/0/100353/09716548-634e-751c-a1fe-55c69f9b8798.png)\n\n* \u8868\u793a\uff08\uff12\uff09\n![zoomPanCanvas_scale2.png](https://qiita-image-store.s3.amazonaws.com/0/100353/4276c8d3-a0d2-ca45-1798-288561dbdbe1.png)\n\n* \u8868\u793a\uff08\uff13\uff09\n![zoomPanCanvas_scale3.png](https://qiita-image-store.s3.amazonaws.com/0/100353/c358fb74-b0fb-dc4c-656c-1d6d9f242997.png)\n\n\u3057\u304b\u3057\u3001\u76f4\u611f\u7684\u306a\u64cd\u4f5c\u3068\u3057\u3066\u306f\u3001\u753b\u9762\u4e2d\u5fc3\u3092\u57fa\u70b9\u3068\u3057\u3066\u62e1\u5927\u30fb\u7e2e\u5c0f\u3057\u3066\u307b\u3057\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\n\u305d\u3053\u3067\u3001\u4eca\u56de\u306f\u753b\u9762\u5ea7\u6a19\u7cfb\u306b\u304a\u3044\u3066\u753b\u9762\u5de6\u4e0a\u9685\u306e\u5ea7\u6a19\u3092\u753b\u9762\u4e2d\u5fc3\u306b\u79fb\u52d5\u3055\u305b\u308b\u5e73\u884c\u79fb\u52d5\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u3001\u300c\u5ea7\u6a19\u5909\u63db\uff08\u305d\u306e\uff15\uff09\uff1a\u62e1\u5927\u7e2e\u5c0f\u3068\u5e73\u884c\u79fb\u52d5\u300d\u3067\u4f7f\u7528\u3057\u305f\u5ea7\u6a19\u5909\u63db\u306e\u5f0f\u3092\u6b21\u306b\u518d\u5ea6\u6319\u3052\u307e\u3059\u3002\n\n```math\n\\begin{align*}\nx' &= sx - sx_1 \\\\\ny' &= -sy + sy_1\n\\end{align*}\n```\n\n\u753b\u9762\u306e\u5e45\u3092w, \u753b\u9762\u306e\u9ad8\u3055\u3092h\u3068\u3057\u307e\u3059\u3002\u753b\u9762\u5de6\u4e0a\u9685\u3092\u753b\u9762\u4e2d\u5fc3\u306b\u5e73\u884c\u79fb\u52d5\u3059\u308b\u64cd\u4f5c\u306e\u5ea7\u6a19\u5909\u63db\u5f0f\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{align*}\nx'' &= x' + \\frac{w}{2}\\\\\ny'' &= y' + \\frac{h}{2}\n\\end{align*}\n```\n\n\u753b\u9762\u5de6\u4e0a\u9685\u3092\u753b\u9762\u4e2d\u5fc3\u306b\u5e73\u884c\u79fb\u52d5\u3059\u308b\u64cd\u4f5c\u3092\u8ffd\u52a0\u3057\u305f\u5ea7\u6a19\u5909\u63db\u5f0f\u306f\u6b21\u3068\u306a\u308a\u307e\u3059\u3002\n\n```math\n\\begin{align*}\nx'' &= sx - sx_1 + \\frac{w}{2}\\\\\ny'' &= -sy + sy_1 + \\frac{h}{2}\n\\end{align*}\n```\n\n\u753b\u9762\u306e\u30b5\u30a4\u30ba\u306b\u5fdc\u3058\u305f\u5e73\u884c\u79fb\u52d5\u306f\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u62e1\u5927\u7e2e\u5c0f\u306b\u306f\u5f71\u97ff\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u4e0a\u306e\u5f0f\u306e\u3088\u3046\u306b\u62e1\u5927\u7e2e\u5c0f\u4fc2\u6570s\u306f\u304b\u3051\u3089\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u56f3\u3092\u6b21\u306b\u793a\u3057\u307e\u3059\u3002\n\n![\u30c7\u30fc\u30bf\u5ea7\u6a19\u2192\u753b\u9762\u5ea7\u6a19\uff08\u753b\u9762\u4e2d\u5fc3\uff09.png](https://qiita-image-store.s3.amazonaws.com/0/100353/fae91429-2ca7-dbc3-e61b-ae05d23efcd9.png)\n\n\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u6b21\u306e\u884c\u5217\u5f0f\u3067\u8868\u3055\u308c\u307e\u3059\u3002\n\n```math\n\\begin{pmatrix}\ns & 0 & -sx_1 + \\frac{w}{2}\\\\\n0 & -s & sy_1 + \\frac{h}{2}\\\\\n0 & 0 & 1\n\\end{pmatrix}\n```\n\n### JDK 9\u306ejshell\u74b0\u5883\u3067Affine\u306e\u5b9f\u9a13\n\n\u753b\u9762\u30b5\u30a4\u30ba\u3092320x200\u3068\u3057\u3066\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3067\u306e\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u5ea7\u6a19\u3092\uff08200, 500)\u3001\u30b9\u30b1\u30fc\u30eb\u30922\u3068\u3057\u305f\u3068\u304d\n\n```\njshell> affine = new Affine(2, 0, -240, 0, -2, 1100)\naffine ==> Affine [\n        2.0, 0.0, 0.0, -240.0\n        0.0, -2.0, 0.0, 1100.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(200, 500)\n$12 ==> Point2D [x = 160.0, y = 100.0]\n```\n\n\u3068\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u5de6\u4e0a\u9685(200, 500)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u3067\u306e(160, 100)\u3068\u753b\u9762\u4e2d\u5fc3\u306b\u5909\u63db\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u753b\u9762\u30b5\u30a4\u30ba\u3092320x200\u3068\u3057\u3066\u3001\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u3067\u306e\u63cf\u753b\u9818\u57df\u306e\u5de6\u4e0a\u9685\u5ea7\u6a19\u3092\uff08200, 500)\u3001\u30b9\u30b1\u30fc\u30eb\u30920.5\u3068\u3057\u305f\u3068\u304d\n\n```\njshell> affine = new Affine(0.5, 0, 60, 0, -0.5, 350)\naffine ==> Affine [\n        0.5, 0.0, 0.0, 60.0\n        0.0, -0.5, 0.0, 350.0\n        0.0, 0.0, 1.0, 0.0\n]\n\njshell> affine.transform(200, 500)\n$14 ==> Point2D [x = 160.0, y = 100.0]\n```\n\n\u3068\u30c7\u30fc\u30bf\u5ea7\u6a19\u7cfb\u306e\u5de6\u4e0a\u9685(200, 500)\u304c\u753b\u9762\u5ea7\u6a19\u7cfb\u3067\u306e(160, 100)\u3068\u753b\u9762\u4e2d\u5fc3\u306b\u5909\u63db\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n# \u307e\u3068\u3081\n\n\u53f3\u624b\u7cfb\u306e\u76f4\u4ea4\u5ea7\u6a19\u7cfb\u3067\u5b9a\u7fa9\u3055\u308c\u308b\u30c7\u30fc\u30bf\u3092\u753b\u9762\u306b\u8868\u793a\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308b\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306f\u3001\u6b21\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n```math\n\\begin{pmatrix}\ns & 0 & -sx_1 + \\frac{w}{2}\\\\\n0 & -s & sy_1 + \\frac{h}{2}\\\\\n0 & 0 & 1\n\\end{pmatrix}\n```\n\n```math\n\u4f46\u3057\u3001\\\\\ns\u306f\u62e1\u5927\u7387\\\\\n(x_1, y_1)\u306f\u753b\u9762\u306e\u4e2d\u5fc3\u306b\u8868\u793a\u3059\u308b\u30c7\u30fc\u30bf\u5ea7\u6a19\\\\\n(w, h)\u306f\u753b\u9762\u5ea7\u6a19\u7cfb\u306b\u304a\u3051\u308b\u8868\u793a\u30b5\u30a4\u30ba\u306e\u5e45\u3068\u9ad8\u3055\n```\n\n# \u53c2\u8003\u30fb\u95a2\u9023\u60c5\u5831\n\n\u3053\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u3092\u4f7f\u7528\u3057\u305fJavaFX Canvas\u3067\u306e\u753b\u9762\u8868\u793a\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u3068\u305d\u306e\u89e3\u8aac\u3092\u6b21\u306b\u8a18\u8f09\u3057\u3066\u3044\u307e\u3059\u3002\n\n* [JavaFX Canvas\u3092\u4f7f\u3063\u305f\u30d9\u30af\u30bf\u30fc\u63cf\u753b\u3068\u62e1\u5927\u7e2e\u5c0f\u79fb\u52d5\u64cd\u4f5c](http://www.torutk.com/projects/swe/wiki/JavaFX_Canvas%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%99%E3%82%AF%E3%82%BF%E3%83%BC%E6%8F%8F%E7%94%BB%E3%81%A8%E6%8B%A1%E5%A4%A7%E7%B8%AE%E5%B0%8F%E7%A7%BB%E5%8B%95%E6%93%8D%E4%BD%9C)\n\n\u672c\u8a18\u4e8b\u3092\u66f8\u304f\u304d\u3063\u304b\u3068\u306a\u3063\u305fJJUG CCC 2016 Fall\u3067\u306e\u767a\u8868\u30b9\u30e9\u30a4\u30c9\u306f\u6b21\u3067\u3059\u3002\n\n* [\u4e16\u754c\u306f\u56db\u89d2\u3067\u306f\u306a\u3044\uff5eJavaFX\u3067\u5730\u56f3\u3092\u63cf\u304f](http://www.slideshare.net/torutk/java-fx7)\n* [\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0](https://github.com/torutk/jjugccc2016fall-javafx)\n\n\u904e\u53bb\u306bCanvas\u3067\u306e\u30a2\u30d5\u30a3\u30f3\u5909\u63db\u306b\u53d6\u308a\u7d44\u307f\u306f\u307e\u3063\u305f\u3053\u3068\u3092\u66f8\u3044\u305f\u30d6\u30ed\u30b0\n\n* [Canvas\u3067Affine\u5909\u63db\u3067\u5927\u3044\u306b\u306f\u307e\u308b\uff08\u6570\u5b66\u7684\u30bb\u30f3\u30b9\u304c\u8db3\u308a\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fb\uff09](http://d.hatena.ne.jp/torutk/20140415/p1)\n"}