{"context": "Protobuf gradle plugin \u3092 Android Studio \u306b\u9069\u7528\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066 Andoid Studio \u3067 Java \u521d\u5fc3\u8005\u3067 Groovy \u306a\u306b\u305d\u308c\u306a\u79c1\u304c\u6307\u5411\u932f\u8aa4\u3002\n\u4ee5\u4e0b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3092 SampleProject \u3068\u3057\u3066\u8a18\u8ff0\u3002\n\n\u74b0\u5883\n\nUbuntu 16.04\nAndroid Studio 2.2.2\ngradle 2.1.4\n\n\nSampleProject/build.gradle \u306e\u7de8\u96c6\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3084\u308b\u4e8b\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u3068 classpath \u306e\u8ffd\u52a0\nbuildscript {\n  repositories {\n    ...\n    // mavenCentral \u3092\u8ffd\u52a0\n    mavenCentral()\n  }\n\n  dependencies {\n    ...\n    classpath 'com.google.protobuf-gradle-plugin:0.8.0'\n  }\n}\n\n\nSampleProject/app/build.gradle \u306e\u7de8\u96c6\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u306e\u4f5c\u696d\u306f\n\n\u30d7\u30e9\u30b0\u30a4\u30f3\u306e apply\nprotobuf \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u8a2d\u5b9a\ndependencies \u306e\u5909\u66f4\n\napply plugin: 'com.android.application'\n//\u5fc5\u305a com.android.application \u306e\u5f8c\u306b apply \u3059\u308b\napply plugin: 'com.google.protobuf'\n\nandroid {\n    (snip)\n}\n\n// protobuf \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u8a2d\u5b9a\nprotobuf {\n    // protoc \u306e\u8a2d\u5b9a\n    protoc {\n        artifact = \"com.google.protobuf:protoc:3.0.0\"\n    }\n    // javalite \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3046\n    plugins {\n        lite {\n            artifact = \"com.google.protobuf:protoc-gen-javalite:3.0.0\"\n        }\n    }\n    // \u30bf\u30b9\u30af\u95a2\u9023\n    generateProtoTasks {\n        all().each { task ->\n            task.plugins {\n                lite {}\n            }\n        }\n    }\n}\n\ndependencies {\n    (snip)\n    compile 'com.google.protobuf:protobuf-lite:3.0.0'\n}\n\n\u6c17\u3092\u3064\u3051\u308b\u3079\u304d\u4e8b\u306f apply \u3092 com.android.application \u306e\u5f8c\u306b\u884c\u3046\u3053\u3068\u3002\nprotobuf {} \u306e\u90e8\u5206\u306b\u3064\u3044\u3066\u306f Github \u306e issue \u3092\u53c2\u8003\u306b\u3057\u305f\u3002\n\u7de8\u96c6\u5f8c\u306f Sync Project with Gradle Files \u3092\u3059\u308b\u3053\u3068\u3002\n\n\u8a66\u3057\u306b .proto \u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u3066\u307f\u308b\n\nBy default, it includes all *.proto files under src/$sourceSetName/proto\n\n\u3068\u306e\u3053\u3068\u306a\u306e\u3067 SampleProject/app/src/main/proto/ \u4ee5\u4e0b\u306b sample.proto \u3092\u8ffd\u52a0\u3002\nsyntax=\"proto2\";\n\noption java_package = \"com.foo.sampleproject\";\n\nmessage Persion {\n  required string name = 1;\n  required uint32 age = 2;\n}\n\n\u3053\u308c\u3067\u30d3\u30eb\u30c9\u3092\u884c\u3046\u3068 SampleProject/build/generated/source/proto/debug/lite/com/foo/sampleproject \u306b Sample.Java \u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3002\n[Protobuf gradle plugin](https://github.com/google/protobuf-gradle-plugin) \u3092 Android Studio \u306b\u9069\u7528\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066 Andoid Studio \u3067 Java \u521d\u5fc3\u8005\u3067 Groovy \u306a\u306b\u305d\u308c\u306a\u79c1\u304c\u6307\u5411\u932f\u8aa4\u3002\n\n\u4ee5\u4e0b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d\u3092 `SampleProject` \u3068\u3057\u3066\u8a18\u8ff0\u3002\n\n# \u74b0\u5883\n- Ubuntu 16.04\n- Android Studio 2.2.2\n- gradle 2.1.4\n\n# SampleProject/build.gradle \u306e\u7de8\u96c6\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3084\u308b\u4e8b\u306f\u30ea\u30dd\u30b8\u30c8\u30ea\u3068 classpath \u306e\u8ffd\u52a0\n\n```groovy\nbuildscript {\n  repositories {\n    ...\n    // mavenCentral \u3092\u8ffd\u52a0\n    mavenCentral()\n  }\n\n  dependencies {\n    ...\n    classpath 'com.google.protobuf-gradle-plugin:0.8.0'\n  }\n}\n```\n\n# SampleProject/app/build.gradle \u306e\u7de8\u96c6\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u306e\u4f5c\u696d\u306f\n\n- \u30d7\u30e9\u30b0\u30a4\u30f3\u306e apply\n- protobuf \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u8a2d\u5b9a\n- dependencies \u306e\u5909\u66f4\n\n```groovy\napply plugin: 'com.android.application'\n//\u5fc5\u305a com.android.application \u306e\u5f8c\u306b apply \u3059\u308b\napply plugin: 'com.google.protobuf'\n\nandroid {\n    (snip)\n}\n\n// protobuf \u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u8a2d\u5b9a\nprotobuf {\n    // protoc \u306e\u8a2d\u5b9a\n    protoc {\n        artifact = \"com.google.protobuf:protoc:3.0.0\"\n    }\n    // javalite \u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3046\n    plugins {\n        lite {\n            artifact = \"com.google.protobuf:protoc-gen-javalite:3.0.0\"\n        }\n    }\n    // \u30bf\u30b9\u30af\u95a2\u9023\n    generateProtoTasks {\n        all().each { task ->\n            task.plugins {\n                lite {}\n            }\n        }\n    }\n}\n\ndependencies {\n    (snip)\n    compile 'com.google.protobuf:protobuf-lite:3.0.0'\n}\n```\n\n\u6c17\u3092\u3064\u3051\u308b\u3079\u304d\u4e8b\u306f `apply` \u3092 `com.android.application` \u306e\u5f8c\u306b\u884c\u3046\u3053\u3068\u3002\n`protobuf {}` \u306e\u90e8\u5206\u306b\u3064\u3044\u3066\u306f [Github \u306e issue](https://github.com/google/protobuf-gradle-plugin/issues/89) \u3092\u53c2\u8003\u306b\u3057\u305f\u3002\n\n\u7de8\u96c6\u5f8c\u306f `Sync Project with Gradle Files` \u3092\u3059\u308b\u3053\u3068\u3002\n\n# \u8a66\u3057\u306b `.proto` \u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0\u3057\u3066\u307f\u308b\n> By default, it includes all *.proto files under `src/$sourceSetName/proto`\n\n\u3068\u306e\u3053\u3068\u306a\u306e\u3067 `SampleProject/app/src/main/proto/` \u4ee5\u4e0b\u306b `sample.proto` \u3092\u8ffd\u52a0\u3002\n\n```protobuf\nsyntax=\"proto2\";\n\noption java_package = \"com.foo.sampleproject\";\n\nmessage Persion {\n  required string name = 1;\n  required uint32 age = 2;\n}\n```\n\n\u3053\u308c\u3067\u30d3\u30eb\u30c9\u3092\u884c\u3046\u3068 `SampleProject/build/generated/source/proto/debug/lite/com/foo/sampleproject` \u306b Sample.Java \u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3002\n", "tags": ["AndroidStudio", "protobuf", "gradle"]}