{"context": "\n\n\u3084\u308b\u3053\u3068\nChrome\u3067\u767a\u751f\u3059\u308b\u901a\u4fe1\u3092\u6355\u307e\u3048\u3066\u3001\u306a\u306b\u304b\u3092\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\u3092\u3059\u308b\u3002\n\n\u69cb\u6210\n\u9069\u5f53\u306a\u30d5\u30a9\u30eb\u30c0\u3092\u3064\u304f\u308a\u3001Chrome\u62e1\u5f35\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u63c3\u3048\u308b\u3002\n\n\u69cb\u6210\nNetworkWatcher\n \u2503\n \u2523\u2501 manifest.json  // \u3044\u308d\u3044\u308d\u8a2d\u5b9a\u3092\u66f8\u304f\n \u2503\n \u2523\u2501 background.js  // \u901a\u4fe1\u3092\u6355\u307e\u3048\u308b\u51e6\u7406\u3092\u66f8\u304f\n \u2503\n \u2523\u2501 contents.js    // \u30da\u30fc\u30b8\u4e0a\u306e\u51e6\u7406\u3092\u66f8\u304f\n \u2503\n \u2517\u2501 icon.png       // \u30a2\u30a4\u30b3\u30f3\u753b\u50cf\n\n\n\nmanifest.json\nmanifest.json\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u66f8\u304f\u3002\n\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u8a18\u8ff0\u306e\u307f\u8a18\u8f09\u3059\u308b\u306e\u3067\u3001\u305d\u306e\u4ed6\u306e\u8a2d\u5b9a\u306fManifest File Format - Google Chrome\u3078\u3002\n\nmanifest.json\n{\n  \"manifest_version\": 2,\n  \"name\": \"NetworkWatcher\",\n  \"version\": \"0.0.0\",\n  \"icons\": {\n    \"128\": \"icon.png\"\n  },\n  \"permissions\": [\n    \"*://*/*/\",\n    \"webRequest\",\n    \"tabs\"\n  ],\n  \"background\": {\n    \"scripts\": [\n      \"background.js\"\n    ]\n  },\n  \"content_scripts\": [{\n    \"matches\": [\"*://*/*\"],\n    \"js\": [\"content.js\"],\n    \"run_at\": \"document_start\"\n  }]\n}\n\n\n\u3068\u308a\u3042\u3048\u305a\u3059\u3079\u3066\u306e\u901a\u4fe1\u3092\u30ad\u30e3\u30c3\u30c1\u3057\u305f\u3044\u306e\u3067\u3001webRequest\uff08\u901a\u4fe1\u3092\u62fe\u3046API\uff09\u3068*://*/*/\uff08\u5168domain\uff09\u3092 permissions\u306b\u6307\u5b9a\u3002\ntabs\u306f\u5f8c\u8ff0\u3002\n\u307e\u305f\u3001\u6700\u7d42\u7684\u306b\u30da\u30fc\u30b8\u5074\u3067\u901a\u4fe1\u3092\u30ad\u30e3\u30c3\u30c1\u3055\u305b\u305f\u3044\u306e\u3067\u3001content_scripts\u306erun_at\u306b\u306fdocument_start\u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3002\n\u8a73\u7d30\u306fContent Scripts - Google Chrome\u3078\u3002\n\n\u901a\u4fe1\u3092\u62fe\u3046\nwebRequestAPI\u3092\u3064\u304b\u3063\u3066\u901a\u4fe1\u3092\u30ad\u30e3\u30c3\u30c1\u3059\u308b\u51e6\u7406\u3092background.js\u66f8\u304f\u3002\n\nbackground.js\nchrome.webRequest.onBeforeRequest.addListener(\n  function (details) {\n    console.log(details.url);\n  },\n  {urls: ['<all_urls>']},\n  []\n);\n\n\n\u3053\u308c\u3060\u3051\u3067background page\u306b\u901a\u4fe1\u5185\u5bb9\u304c\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u62e1\u5f35\u3092\u8aad\u307f\u8fbc\u3080\n\u4e0a\u8a18\u306e\u72b6\u614b\u3067\u3001\u5b9f\u969b\u306bChrome\u306b\u62e1\u5f35\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066\u307f\u308b\u3002\nChrome\u3067chrome://extensions/\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u300c\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u30e2\u30fc\u30c9\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u300c\u30d1\u30c3\u30b1\u30fc\u30b8\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u62e1\u5f35\u6a5f\u80fd\u3092\u8aad\u307f\u8fbc\u3080...\u300d\u3092\u62bc\u3059\u3002\n\n\u306f\u3058\u3081\u306b\u3064\u304f\u3063\u305f\u30d5\u30a9\u30eb\u30c0\u3092\u9078\u629e\u3059\u308b\u3068\u3001\n\n\u62e1\u5f35\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3002\n\n\u300c\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9 \u30da\u30fc\u30b8\u300d\u3092\u62bc\u3059\u3068\u5225\u7a93\u3067\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u7acb\u3061\u4e0a\u304c\u308b\u306e\u3067\u3001\u9069\u5f53\u306a\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u52d5\u4f5c\u78ba\u8a8d\u304c\u3067\u304d\u308b\u3002\n\u2193Google\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306e\u30ed\u30b0\u3002\n\n\n\u30c7\u30fc\u30bf\u3092\u30da\u30fc\u30b8\u5074\u306b\u6e21\u3059\nbackground page\u306b\u5410\u304d\u51fa\u3055\u308c\u3066\u3044\u308b\u30ed\u30b0\u3092\u30da\u30fc\u30b8\u5074\u3067\u6271\u3044\u305f\u3044\u306e\u3067\u3001\u305d\u306e\u90e8\u5206\u306e\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u6e21\u3057\u51e6\u7406\u3092\u8ffd\u8a18\u3059\u308b\u3002\n\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u6e21\u3057\u306b\u306ftabsAPI\u3092\u3064\u304b\u3046\u3002\n\nbackground.js\nchrome.webRequest.onBeforeRequest.addListener(\n  function (details) {\n    console.log(details.url);\n    // \u73fe\u5728\u306e\u30bf\u30d6\u3092\u53d6\u5f97\u3059\u308b\n    chrome.tabs.query({\n      active: true,\n      windowId: chrome.windows.WINDOW_ID_CURRENT\n    }, function (result) {\n      var currentTab = result.shift();\n      // \u53d6\u5f97\u3057\u305f\u30bf\u30d6\u306b\u5bfe\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\n      chrome.tabs.sendMessage(currentTab.id, details, function() {});\n    });\n  },\n  {urls: ['<all_urls>']},\n  []\n);\n\n\n\ncontent.js\n// \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\nchrome.runtime.onMessage.addListener(function (message, sender, sendResponse) {\n  console.log(message);\n});\n\n\n\n\u62e1\u5f35\u3092\u66f4\u65b0\u3059\u308b\njs\u3092\u4fee\u6b63\u3057\u305f\u3089\u3001chrome://extensions/\u3067\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u66f4\u65b0\u3055\u308c\u308b\u3002\n\n\u2193\u3053\u3093\u306a\u611f\u3058\n\n\nNext...\n\u3068\u308a\u3042\u3048\u305a\u901a\u4fe1\u3092\u62fe\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u3053\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u3063\u3066\u306a\u306b\u304b\u3057\u305f\u3044\u3002\n\n## \u3084\u308b\u3053\u3068\nChrome\u3067\u767a\u751f\u3059\u308b\u901a\u4fe1\u3092\u6355\u307e\u3048\u3066\u3001\u306a\u306b\u304b\u3092\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\u3092\u3059\u308b\u3002\n\n## \u69cb\u6210\n\u9069\u5f53\u306a\u30d5\u30a9\u30eb\u30c0\u3092\u3064\u304f\u308a\u3001Chrome\u62e1\u5f35\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u63c3\u3048\u308b\u3002\n\n```javascript:\u69cb\u6210\nNetworkWatcher\n \u2503\n \u2523\u2501 manifest.json  // \u3044\u308d\u3044\u308d\u8a2d\u5b9a\u3092\u66f8\u304f\n \u2503\n \u2523\u2501 background.js  // \u901a\u4fe1\u3092\u6355\u307e\u3048\u308b\u51e6\u7406\u3092\u66f8\u304f\n \u2503\n \u2523\u2501 contents.js    // \u30da\u30fc\u30b8\u4e0a\u306e\u51e6\u7406\u3092\u66f8\u304f\n \u2503\n \u2517\u2501 icon.png       // \u30a2\u30a4\u30b3\u30f3\u753b\u50cf\n```\n\n## manifest.json\n\n`manifest.json`\u306b\u5fc5\u8981\u306a\u60c5\u5831\u3092\u66f8\u304f\u3002\n\u5fc5\u8981\u6700\u4f4e\u9650\u306e\u8a18\u8ff0\u306e\u307f\u8a18\u8f09\u3059\u308b\u306e\u3067\u3001\u305d\u306e\u4ed6\u306e\u8a2d\u5b9a\u306f[Manifest File Format - Google Chrome](https://developer.chrome.com/extensions/manifest)\u3078\u3002\n\n```json:manifest.json\n{\n  \"manifest_version\": 2,\n  \"name\": \"NetworkWatcher\",\n  \"version\": \"0.0.0\",\n  \"icons\": {\n    \"128\": \"icon.png\"\n  },\n  \"permissions\": [\n    \"*://*/*/\",\n    \"webRequest\",\n    \"tabs\"\n  ],\n  \"background\": {\n    \"scripts\": [\n      \"background.js\"\n    ]\n  },\n  \"content_scripts\": [{\n    \"matches\": [\"*://*/*\"],\n    \"js\": [\"content.js\"],\n    \"run_at\": \"document_start\"\n  }]\n}\n```\n\n\n\u3068\u308a\u3042\u3048\u305a\u3059\u3079\u3066\u306e\u901a\u4fe1\u3092\u30ad\u30e3\u30c3\u30c1\u3057\u305f\u3044\u306e\u3067\u3001`webRequest`\uff08\u901a\u4fe1\u3092\u62fe\u3046API\uff09\u3068`*://*/*/`\uff08\u5168domain\uff09\u3092 `permissions`\u306b\u6307\u5b9a\u3002\n`tabs`\u306f\u5f8c\u8ff0\u3002\n\n\u307e\u305f\u3001\u6700\u7d42\u7684\u306b\u30da\u30fc\u30b8\u5074\u3067\u901a\u4fe1\u3092\u30ad\u30e3\u30c3\u30c1\u3055\u305b\u305f\u3044\u306e\u3067\u3001`content_scripts`\u306e`run_at`\u306b\u306f`document_start`\u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3002\n\u8a73\u7d30\u306f[Content Scripts - Google Chrome](https://developer.chrome.com/extensions/content_scripts)\u3078\u3002\n\n## \u901a\u4fe1\u3092\u62fe\u3046\n\n`webRequest`API\u3092\u3064\u304b\u3063\u3066\u901a\u4fe1\u3092\u30ad\u30e3\u30c3\u30c1\u3059\u308b\u51e6\u7406\u3092`background.js`\u66f8\u304f\u3002\n\n```javascript:background.js\nchrome.webRequest.onBeforeRequest.addListener(\n  function (details) {\n    console.log(details.url);\n  },\n  {urls: ['<all_urls>']},\n  []\n);\n```\n\n\u3053\u308c\u3060\u3051\u3067background page\u306b\u901a\u4fe1\u5185\u5bb9\u304c\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n## \u62e1\u5f35\u3092\u8aad\u307f\u8fbc\u3080\n\n\u4e0a\u8a18\u306e\u72b6\u614b\u3067\u3001\u5b9f\u969b\u306bChrome\u306b\u62e1\u5f35\u3092\u8aad\u307f\u8fbc\u307e\u305b\u3066\u307f\u308b\u3002\nChrome\u3067[chrome://extensions/](chrome://extensions/)\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u300c\u30c7\u30d9\u30ed\u30c3\u30d1\u30fc\u30e2\u30fc\u30c9\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u300c\u30d1\u30c3\u30b1\u30fc\u30b8\u5316\u3055\u308c\u3066\u3044\u306a\u3044\u62e1\u5f35\u6a5f\u80fd\u3092\u8aad\u307f\u8fbc\u3080...\u300d\u3092\u62bc\u3059\u3002\n\n![Kobito.lMVw5C.png](https://qiita-image-store.s3.amazonaws.com/0/53664/b5346659-dc18-97b6-6d06-0b2c1c95d3d6.png \"Kobito.lMVw5C.png\")\n\n\u306f\u3058\u3081\u306b\u3064\u304f\u3063\u305f\u30d5\u30a9\u30eb\u30c0\u3092\u9078\u629e\u3059\u308b\u3068\u3001\n\n![Kobito.JyoQgc.png](https://qiita-image-store.s3.amazonaws.com/0/53664/3763d86b-ad74-4e6d-1c68-2c7ce68de3d1.png \"Kobito.JyoQgc.png\")\n\n\u62e1\u5f35\u304c\u8aad\u307f\u8fbc\u307e\u308c\u308b\u3002\n\n![Kobito.HojMF3.png](https://qiita-image-store.s3.amazonaws.com/0/53664/2540e3a5-a966-71c4-161d-c54f709eed0a.png \"Kobito.HojMF3.png\")\n\n\n\u300c\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9 \u30da\u30fc\u30b8\u300d\u3092\u62bc\u3059\u3068\u5225\u7a93\u3067\u30b3\u30f3\u30bd\u30fc\u30eb\u304c\u7acb\u3061\u4e0a\u304c\u308b\u306e\u3067\u3001\u9069\u5f53\u306a\u30b5\u30a4\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u52d5\u4f5c\u78ba\u8a8d\u304c\u3067\u304d\u308b\u3002\n\n\u2193Google\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306e\u30ed\u30b0\u3002\n\n![Kobito.xINWaf.png](https://qiita-image-store.s3.amazonaws.com/0/53664/11c11a55-5f02-adc7-bd4f-c417182062c8.png \"Kobito.xINWaf.png\")\n\n\n## \u30c7\u30fc\u30bf\u3092\u30da\u30fc\u30b8\u5074\u306b\u6e21\u3059\n\nbackground page\u306b\u5410\u304d\u51fa\u3055\u308c\u3066\u3044\u308b\u30ed\u30b0\u3092\u30da\u30fc\u30b8\u5074\u3067\u6271\u3044\u305f\u3044\u306e\u3067\u3001\u305d\u306e\u90e8\u5206\u306e\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u6e21\u3057\u51e6\u7406\u3092\u8ffd\u8a18\u3059\u308b\u3002\n\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u6e21\u3057\u306b\u306f`tabs`API\u3092\u3064\u304b\u3046\u3002\n\n```javascript:background.js\nchrome.webRequest.onBeforeRequest.addListener(\n  function (details) {\n    console.log(details.url);\n    // \u73fe\u5728\u306e\u30bf\u30d6\u3092\u53d6\u5f97\u3059\u308b\n    chrome.tabs.query({\n      active: true,\n      windowId: chrome.windows.WINDOW_ID_CURRENT\n    }, function (result) {\n      var currentTab = result.shift();\n      // \u53d6\u5f97\u3057\u305f\u30bf\u30d6\u306b\u5bfe\u3057\u3066\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\n      chrome.tabs.sendMessage(currentTab.id, details, function() {});\n    });\n  },\n  {urls: ['<all_urls>']},\n  []\n);\n```\n\n\n```javascript:content.js\n// \u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u53d7\u3051\u53d6\u308b\nchrome.runtime.onMessage.addListener(function (message, sender, sendResponse) {\n  console.log(message);\n});\n```\n\n## \u62e1\u5f35\u3092\u66f4\u65b0\u3059\u308b\n\njs\u3092\u4fee\u6b63\u3057\u305f\u3089\u3001[chrome://extensions/](chrome://extensions/)\u3067\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3060\u3051\u3067\u66f4\u65b0\u3055\u308c\u308b\u3002\n![Kobito.IQUSnL.png](https://qiita-image-store.s3.amazonaws.com/0/53664/dcaccd62-b4af-81fa-2c2b-f73bdfd9da03.png \"Kobito.IQUSnL.png\")\n\n\u2193\u3053\u3093\u306a\u611f\u3058\n![Kobito.XqiUnO.png](https://qiita-image-store.s3.amazonaws.com/0/53664/cd18ddc7-f615-558d-ee65-41d3b5b226bc.png \"Kobito.XqiUnO.png\")\n\n## Next...\n\n\u3068\u308a\u3042\u3048\u305a\u901a\u4fe1\u3092\u62fe\u3048\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u3053\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u3063\u3066\u306a\u306b\u304b\u3057\u305f\u3044\u3002\n", "tags": ["JavaScript", "Chrome", "chrome-extension"]}