{"context": " More than 1 year has passed since last update.\n\n\u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u304b\u30891\u5e74\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002 \u6c17\u3092\u3064\u3051\u3066\u306d\u3002\n\n\u4ee5\u524d\u3001Chef\u3092\u3064\u304b\u3063\u3066mruby\u3092Cookbook\u304b\u3089\u624b\u8efd\u306b\u5165\u308c\u3088\u3046 | Opsrock\u3068\u3044\u3046\u8a18\u4e8b\u3092\u516c\u958b\u3057\u307e\u3057\u305f\u3002\nmruby\u306eCookbook\u306fOpscode\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3Cookbook\u3068\u3057\u3066\u3082\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3069\u3046\u305e\u3054\u81ea\u7531\u306b\u3054\u5229\u7528\u304f\u3060\u3055\u3044\u3002\n\u306a\u306e\u3067\u3059\u304c\u3001\u8a66\u3059\u30b5\u30fc\u30d0\u3082\u7121\u3044\u3088\u3068\u3044\u3046\u65b9\u306e\u305f\u3081\u306b\u3001\u4eca\u65e5\u306ftest-kitchen(with vagrant-driver)\u3067mruby\u3092\u89e6\u3063\u3066\u307f\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3002\n\n\u8ffd\u8a18: mod_mruby\u306b\u3082\u5bfe\u5fdc\u3057\u305f\n\n\ntest-kitchen\u306e\u4e8b\u524d\u6e96\u5099\n\u4e8b\u524d\u306b\u3053\u308c\u3089\u3092\u516c\u5f0f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u5165\u308c\u307e\u3057\u3087\u3046\u3001\u3042\u3068Ruby\u306d\u3002\n\nvirtualbox\nvagrant\n\n\u5165\u308c\u307e\u3057\u305f\u306d\u3002\n\ntest-kitchen\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nmruby Cookbook\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002\n\nbash-cli_git_clone\n$ git clone https://github.com/higanworks-cookbooks/mruby.git\n$ cd mruby\n\n\nbundler\u3067 tes-kitchen\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\n\nbash-cli_bundle\n$ bundle\nUsing rake (10.1.0) \nUsing archive-tar-minitar (0.5.2) \n-- snip --\nUsing test-kitchen (1.1.0) \nUsing kitchen-vagrant (0.13.0) \nUsing librarian (0.1.0) \nUsing librarian-chef (0.0.1) \nUsing bundler (1.3.5) \nYour bundle is complete!\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n\n\n$ kitchen -v\nTest Kitchen version 1.1.0\n\n\n\u306f\u3044\u3001\u3067\u304d\u307e\u3057\u305f\u306d\u3002\n\n\u4f5c\u6210\u3067\u304d\u308b\u74b0\u5883 + mruby\u306e\u30bb\u30c3\u30c8\u3092\u78ba\u8a8d\u3059\u308b\nkitchen list\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f5c\u308c\u308b\u74b0\u5883\u3092\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nbash-cli_kitchen_list\n$ kitchen list\nInstance               Driver   Provisioner  Last Action\ndefault-ubuntu-1204    Vagrant  ChefSolo     <Not Created>\ndefault-centos-64      Vagrant  ChefSolo     <Not Created>\nrbenv-ubuntu-1204      Vagrant  ChefSolo     <Not Created>\nrbenv-centos-64        Vagrant  ChefSolo     <Not Created>\nngx-mruby-ubuntu-1204  Vagrant  ChefSolo     <Not Created>\nngx-mruby-centos-64    Vagrant  ChefSolo     <Not Created>\n\n\n2\u7cfb\u7d71\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30673\u7a2e\u985e\u305a\u3064\u306e\u74b0\u5883\u304c\u4f5c\u308c\u307e\u3059\u3002\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u666e\u901a\u306emuby\u3092\u4f7f\u3048\u308b\u74b0\u5883\u3092\u69cb\u7bc9\ndefault-*\u304c\u305d\u308c\u306b\u3042\u305f\u308a\u307e\u3059\u3002Ubuntu\u3068CentOS\u3068\u3042\u308a\u307e\u3059\u306d\u3002\nkitchen converge\u30b3\u30de\u30f3\u30c9\u3067\u4e21\u65b9\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nbash-cli_converge_default\n$  kitchen converge default\n-----> Starting Kitchen (v1.1.0)\n-----> Creating <default-ubuntu-1204>...\n       Bringing machine 'default' up with 'virtualbox' provider...\n       [default] Importing base box 'opscode-ubuntu-12.04'...\n\n\nUbuntu\u74b0\u5883\u306e\u4f5c\u6210\u304c\u59cb\u307e\u308a\u307e\u3057\u305f\u3001\u3057\u3070\u3089\u304f\u5f85\u3061\u307e\u3057\u3087\u3046\u3002\n...\nBuild summary:       \n\n================================================       \n      Config Name: host       \n Output Directory: build/host       \n         Binaries: mruby, mrbc, mirb       \n    Included Gems:       \n             mruby-sprintf - 0.0.0       \n             mruby-print - 0.0.0       \n             mruby-math - 0.0.0       \n             mruby-time - 0.0.0       \n             mruby-struct - 0.0.0       \n             mruby-enum-ext - 0.0.0       \n             mruby-string-ext - 0.0.0\n             mruby-numeric-ext - 0.0.0\n             mruby-array-ext - 0.0.0\n             mruby-hash-ext - 0.0.0\n             mruby-range-ext - 0.0.0\n             mruby-proc-ext - 0.0.0\n             mruby-symbol-ext - 0.0.0\n             mruby-random - 0.0.0\n             mruby-object-ext - 0.0.0\n             mruby-objectspace - 0.0.0\n             mruby-fiber - 0.0.0\n             mruby-toplevel-ext - 0.0.0\n             mruby-bin-mirb - 0.0.0\n               - Binaries: mirb\n             mruby-bin-mruby - 0.0.0\n               - Binaries: mruby\n             mruby-io - 0.0.0\n       ================================================\n...\n\nmruby\u30d3\u30eb\u30c9\u307d\u3044\u30ed\u30b0\u304c\u3002\n\u9593\u9aea\u5165\u308c\u305a\u306bCentOS\u3082\u59cb\u307e\u308a\u307e\u3059\u3002\n-----> Creating <default-centos-64>...\n       Bringing machine 'default' up with 'virtualbox' provider...\n       [default] Importing base box 'opscode-centos-6.4'...\n\n\u307e\u3060\u307e\u3060\u653e\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n...\n       Build summary:\n\n       ================================================\n             Config Name: host\n        Output Directory: build/host\n         Binaries: mruby, mrbc, mirb\n           Included Gems:\n...\n\n\u30d3\u30eb\u30c9\u6765\u3066\u307e\u3059\u306d\u3002\n\nmruby\u3092\u78ba\u8a8d\u3059\u308b\nkitchen login\u30b3\u30de\u30f3\u30c9\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3001Ubuntu\u304b\u3089\u3002\n$ kitchen login default-ubuntu-1204\nWelcome to Ubuntu 12.04.2 LTS (GNU/Linux 3.5.0-23-generic x86_64)\n\n## \u4ee5\u4e0b\u4eee\u60f3\u30de\u30b7\u30f3\u5185\n\nvagrant@default-ubuntu-1204:~$ mruby --version\nmruby - Embeddable Ruby  Copyright (c) 2010-2013 mruby developers\n\n\u6b21\u306fCentOS\u3078\u3002\n$ kitchen login default-centos-64\nLast login: Fri Dec  6 05:14:40 2013 from 10.0.2.2\n\n## \u4ee5\u4e0b\u4eee\u60f3\u30de\u30b7\u30f3\u5185\n\n[vagrant@default-centos-64 ~]$ mruby --version\nmruby - Embeddable Ruby  Copyright (c) 2010-2013 mruby developers\n\n\u3084\u3063\u305f\u306d\u3002\n\u3061\u306a\u307f\u306bmruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fmaster\u306eHEAD\u3067\u3059\u3001\u81ea\u7531\u306b\u9078\u3079\u308b\u3088\u3046\u306b\u3082\u3057\u3066\u3044\u308b\u306e\u3067\u8208\u5473\u304c\u3042\u308c\u3070\u5909\u66f4\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u304a\u304b\u305f\u3065\u3051\nmruby\u3092\u5b58\u5206\u306b\u89e6\u3063\u305f\u3089\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u6d88\u3057\u307e\u3057\u3087\u3046\u3002\nkitchen destroy\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\nbash-cli_\n$  kitchen destroy default\n-----> Starting Kitchen (v1.1.0)\n-----> Destroying <default-ubuntu-1204>...\n       [default] Forcing shutdown of VM...\n       [default] Destroying VM and associated drives...\n       Vagrant instance <default-ubuntu-1204> destroyed.\n       Finished destroying <default-ubuntu-1204> (0m2.49s).\n-----> Destroying <default-centos-64>...\n       [default] Forcing shutdown of VM...\n       [default] Destroying VM and associated drives...\n       Vagrant instance <default-centos-64> destroyed.\n       Finished destroying <default-centos-64> (0m2.51s).\n-----> Kitchen is finished. (0m5.30s)\n\n\n\u6d88\u3057\u305f\u306d\u3002\n\nngx_mruby\u3092\u7d44\u307f\u8fbc\u3093\u3060nginx\nngx-mruby-*\u306fmruby\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3064\u3044\u3067\u306b\u3001ngx_mruby\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u7d44\u307f\u8fbc\u3093\u3060Nginx\u3092\u30d3\u30eb\u30c9\u3059\u308b\u74b0\u5883\u3067\u3059\u3002\n\u3064\u3044\u3067\u306b\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nngx_mruby\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u3069\u3046\u305e\u3002\n\u4eba\u9593\u3068\u30a6\u30a7\u30d6\u306e\u672a\u6765 - ngx_mruby\u306e\u7d39\u4ecb \u306a\u3089\u3073\u306b nginx+mruby+Redis\u306b\u3088\u308b\u52d5\u7684\u306a\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u5b9f\u88c5\u6848\n\u3061\u306a\u307f\u306b\u3053\u3061\u3089\u306e\u74b0\u5883\u306fmruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c9b2f4c4423ed11f12d6393ae1f0dd4fe3e51ffa0\u306b\u56fa\u5b9a\u3068\u306a\u3063\u3066\u307e\u3059\u3002\u6307\u5b9a\u306f.kitchen.yml\u30d5\u30a1\u30a4\u30eb\u3067\u3002\n\n\u3055\u3042\u3001\u306a\u306b\u306f\u3068\u3082\u3042\u308ckitchen converge\u3067\u3059\u3002\n\nbash-cli_converge_ngx_mruby\n$ kitchen converge ngx-mruby\n-----> Starting Kitchen (v1.1.0)\n-----> Creating <ngx-mruby-ubuntu-1204>...\n-- snip --\n\n\n\u307e\u305f\u3057\u3070\u3089\u304f\u5f85\u3061\u307e\u3057\u3087\u3046\u3002\n\nbash-cli_ngx_mruby\n$ kitchen login ngx-mruby-ubuntu-1204\nWelcome to Ubuntu 12.04.2 LTS (GNU/Linux 3.5.0-23-generic x86_64)\n\nvagrant@ngx-mruby-ubuntu-1204:~$ /opt/nginx-1.4.2/sbin/nginx -V\nnginx version: nginx/1.4.2\nbuilt by gcc 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) \nTLS SNI support enabled\nconfigure arguments: --prefix=/opt/nginx-1.4.2 --conf-path=/etc/nginx/nginx.conf --sbin-path=/opt/nginx-1.4.2/sbin/nginx --with-debug --add-module=/opt/chef_mruby/ngx_mruby --add-module=/opt/chef_mruby/ngx_mruby/dependence/ngx_devel_kit --with-http_ssl_module --with-http_geoip_module --with-ld-opt='-Wl,-R,/usr/local/lib -L /usr/local/lib' --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module\n\n\n--add-module=/opt/chef_mruby/ngx_mruby\u304c\u3064\u3044\u3066\u307e\u3059\u3001\u3084\u3063\u305f\u306d\u3002\n\nmod_mruby\u3092apache httpd\u306b\u8ffd\u52a0(12/13\u8ffd\u8a18)\n\n\u3064\u304b\u307e\u3048\u305f\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304b\u3089\u3001\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n$ kitchen list\nInstance               Driver   Provisioner  Last Action\ndefault-ubuntu-1204    Vagrant  ChefSolo     <Not Created>\ndefault-centos-64      Vagrant  ChefSolo     <Not Created>\nrbenv-ubuntu-1204      Vagrant  ChefSolo     <Not Created>\nrbenv-centos-64        Vagrant  ChefSolo     <Not Created>\nngx-mruby-ubuntu-1204  Vagrant  ChefSolo     <Not Created>\nngx-mruby-centos-64    Vagrant  ChefSolo     <Not Created>\nmod-mruby-ubuntu-1204  Vagrant  ChefSolo     Converged\nmod-mruby-centos-64    Vagrant  ChefSolo     Converged\n\nmod_mruby\u74b0\u5883\u306e\u304a\u8a66\u3057\u306f\u3053\u3061\u3089\u3002\n$ kitchen converge mod-mruby\n\nVM\u5185\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3088\u3002\n$ kitchen login mod-mruby-centos\n\n$ sudo httpd -M\nLoaded Modules:\n core_module (static)\n mpm_prefork_module (static)\n http_module (static)\n so_module (static)\n mruby_module (shared)\n alias_module (shared)\n auth_basic_module (shared)\n authn_file_module (shared)\n authz_default_module (shared)\n authz_groupfile_module (shared)\n authz_host_module (shared)\n authz_user_module (shared)\n autoindex_module (shared)\n deflate_module (shared)\n dir_module (shared)\n env_module (shared)\n log_config_module (shared)\n logio_module (shared)\n mime_module (shared)\n negotiation_module (shared)\n setenvif_module (shared)\n status_module (shared)\nSyntax OK\n\n\u9069\u5f53\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u3044\u3066\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\u3002\n$ cat -n /var/www/html/hoge.rb \n     1  if server_name == \"NGINX\"\n     2    Server = Nginx\n     3  elsif server_name == \"Apache\"\n     4    Server = Apache\n     5  end\n     6  \n     7  Server::rputs \"Hello #{Server::module_name}/#{Server::module_version} world!\\n\"\n\n$ curl localhost/hoge.rb\nHello mod_mruby/0.9.4 world!\n\n\u3067\u307e\u3057\u305f\u306d\u3048\u3002\n\n\u304a\u308f\u308a\u306b\nCookbook\u306eREADME\u306b\u4efb\u610f\u306emgem\u3092\u7d44\u307f\u8fbc\u3080\u65b9\u6cd5\u304c\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3082\u662f\u975e\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u3000\u8ffd\u8a18:12/27\n\nmruby\u6700\u65b0\u306e\u30d3\u30eb\u30c9\u306b\u5bfe\u5fdc\u3057\u3066\u304d\u305f\u3088\u3046\u3067\u3059\u3002\n\u305f\u3060\u3001\u5143\u304b\u3089\u4efb\u610f\u306e\u30ea\u30d3\u30b8\u30e7\u30f3\u306emruby\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u304b\u3089\u3001\u30ec\u30b7\u30d4\u306b\u5909\u66f4\u3059\u308b\u3068\u3053\u308d\u306f\u306a\u3044\u306e\u3067\u3059\u3002\n\u3069\u3053\u3092\u5909\u3048\u305f\u3089\u3044\u3044\u304b\u306a? \u3053\u306e\u8a18\u4e8b\u3092\u8aad\u3093\u3060\u4eba\u306f\u662f\u975e\u3084\u3063\u3066\u307f\u3088\u3046\u3002\n<!-- too_old -->\n> **\u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u304b\u30891\u5e74\u4ee5\u4e0a\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002** \u6c17\u3092\u3064\u3051\u3066\u306d\u3002\n\n\n\u4ee5\u524d\u3001[Chef\u3092\u3064\u304b\u3063\u3066mruby\u3092Cookbook\u304b\u3089\u624b\u8efd\u306b\u5165\u308c\u3088\u3046 | Opsrock](http://opsrock.in/2013/09/24/768 \"Chef\u3092\u3064\u304b\u3063\u3066mruby\u3092Cookbook\u304b\u3089\u624b\u8efd\u306b\u5165\u308c\u3088\u3046 | Opsrock\")\u3068\u3044\u3046\u8a18\u4e8b\u3092\u516c\u958b\u3057\u307e\u3057\u305f\u3002\nmruby\u306eCookbook\u306fOpscode\u306e\u30b3\u30df\u30e5\u30cb\u30c6\u30a3Cookbook\u3068\u3057\u3066\u3082\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3069\u3046\u305e\u3054\u81ea\u7531\u306b\u3054\u5229\u7528\u304f\u3060\u3055\u3044\u3002\n\n\u306a\u306e\u3067\u3059\u304c\u3001\u8a66\u3059\u30b5\u30fc\u30d0\u3082\u7121\u3044\u3088\u3068\u3044\u3046\u65b9\u306e\u305f\u3081\u306b\u3001\u4eca\u65e5\u306ftest-kitchen(with vagrant-driver)\u3067mruby\u3092\u89e6\u3063\u3066\u307f\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3002\n\n> \u8ffd\u8a18: mod_mruby\u306b\u3082\u5bfe\u5fdc\u3057\u305f\n\n\n## test-kitchen\u306e\u4e8b\u524d\u6e96\u5099\n\n\u4e8b\u524d\u306b\u3053\u308c\u3089\u3092\u516c\u5f0f\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u5165\u308c\u307e\u3057\u3087\u3046\u3001\u3042\u3068Ruby\u306d\u3002\n\n- virtualbox\n- vagrant\n\n\u5165\u308c\u307e\u3057\u305f\u306d\u3002\n\n## test-kitchen\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nmruby Cookbook\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u304b\u3089\u30af\u30ed\u30fc\u30f3\u3057\u307e\u3059\u3002\n\n```shell:bash-cli_git_clone\n$ git clone https://github.com/higanworks-cookbooks/mruby.git\n$ cd mruby\n```\n\n\nbundler\u3067 tes-kitchen\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\n\n```shell:bash-cli_bundle\n$ bundle\nUsing rake (10.1.0) \nUsing archive-tar-minitar (0.5.2) \n-- snip --\nUsing test-kitchen (1.1.0) \nUsing kitchen-vagrant (0.13.0) \nUsing librarian (0.1.0) \nUsing librarian-chef (0.0.1) \nUsing bundler (1.3.5) \nYour bundle is complete!\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n\n\n$ kitchen -v\nTest Kitchen version 1.1.0\n```\n\n\u306f\u3044\u3001\u3067\u304d\u307e\u3057\u305f\u306d\u3002\n\n\n## \u4f5c\u6210\u3067\u304d\u308b\u74b0\u5883 + mruby\u306e\u30bb\u30c3\u30c8\u3092\u78ba\u8a8d\u3059\u308b\n\n`kitchen list`\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f5c\u308c\u308b\u74b0\u5883\u3092\u306e\u4e00\u89a7\u3092\u8868\u793a\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```shell:bash-cli_kitchen_list\n$ kitchen list\nInstance               Driver   Provisioner  Last Action\ndefault-ubuntu-1204    Vagrant  ChefSolo     <Not Created>\ndefault-centos-64      Vagrant  ChefSolo     <Not Created>\nrbenv-ubuntu-1204      Vagrant  ChefSolo     <Not Created>\nrbenv-centos-64        Vagrant  ChefSolo     <Not Created>\nngx-mruby-ubuntu-1204  Vagrant  ChefSolo     <Not Created>\nngx-mruby-centos-64    Vagrant  ChefSolo     <Not Created>\n```\n\n2\u7cfb\u7d71\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u30673\u7a2e\u985e\u305a\u3064\u306e\u74b0\u5883\u304c\u4f5c\u308c\u307e\u3059\u3002\n\n\n## \u4eee\u60f3\u30de\u30b7\u30f3\u306b\u666e\u901a\u306emuby\u3092\u4f7f\u3048\u308b\u74b0\u5883\u3092\u69cb\u7bc9\n\n`default-*`\u304c\u305d\u308c\u306b\u3042\u305f\u308a\u307e\u3059\u3002Ubuntu\u3068CentOS\u3068\u3042\u308a\u307e\u3059\u306d\u3002\n`kitchen converge`\u30b3\u30de\u30f3\u30c9\u3067\u4e21\u65b9\u4f5c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\n\n```shell:bash-cli_converge_default\n$  kitchen converge default\n-----> Starting Kitchen (v1.1.0)\n-----> Creating <default-ubuntu-1204>...\n       Bringing machine 'default' up with 'virtualbox' provider...\n       [default] Importing base box 'opscode-ubuntu-12.04'...\n```\n\nUbuntu\u74b0\u5883\u306e\u4f5c\u6210\u304c\u59cb\u307e\u308a\u307e\u3057\u305f\u3001\u3057\u3070\u3089\u304f\u5f85\u3061\u307e\u3057\u3087\u3046\u3002\n\n\n```\n...\nBuild summary:       \n       \n================================================       \n      Config Name: host       \n Output Directory: build/host       \n         Binaries: mruby, mrbc, mirb       \n    Included Gems:       \n             mruby-sprintf - 0.0.0       \n             mruby-print - 0.0.0       \n             mruby-math - 0.0.0       \n             mruby-time - 0.0.0       \n             mruby-struct - 0.0.0       \n             mruby-enum-ext - 0.0.0       \n             mruby-string-ext - 0.0.0\n             mruby-numeric-ext - 0.0.0\n             mruby-array-ext - 0.0.0\n             mruby-hash-ext - 0.0.0\n             mruby-range-ext - 0.0.0\n             mruby-proc-ext - 0.0.0\n             mruby-symbol-ext - 0.0.0\n             mruby-random - 0.0.0\n             mruby-object-ext - 0.0.0\n             mruby-objectspace - 0.0.0\n             mruby-fiber - 0.0.0\n             mruby-toplevel-ext - 0.0.0\n             mruby-bin-mirb - 0.0.0\n               - Binaries: mirb\n             mruby-bin-mruby - 0.0.0\n               - Binaries: mruby\n             mruby-io - 0.0.0\n       ================================================\n...\n```\n\nmruby\u30d3\u30eb\u30c9\u307d\u3044\u30ed\u30b0\u304c\u3002\n\n\u9593\u9aea\u5165\u308c\u305a\u306bCentOS\u3082\u59cb\u307e\u308a\u307e\u3059\u3002\n\n```\n-----> Creating <default-centos-64>...\n       Bringing machine 'default' up with 'virtualbox' provider...\n       [default] Importing base box 'opscode-centos-6.4'...\n```\n\n\u307e\u3060\u307e\u3060\u653e\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n...\n       Build summary:\n       \n       ================================================\n             Config Name: host\n        Output Directory: build/host\n         Binaries: mruby, mrbc, mirb\n           Included Gems:\n...\n```\n\n\u30d3\u30eb\u30c9\u6765\u3066\u307e\u3059\u306d\u3002\n\n\n#### mruby\u3092\u78ba\u8a8d\u3059\u308b\n\n`kitchen login`\u30b3\u30de\u30f3\u30c9\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3001Ubuntu\u304b\u3089\u3002\n\n```\n$ kitchen login default-ubuntu-1204\nWelcome to Ubuntu 12.04.2 LTS (GNU/Linux 3.5.0-23-generic x86_64)\n\n## \u4ee5\u4e0b\u4eee\u60f3\u30de\u30b7\u30f3\u5185\n\nvagrant@default-ubuntu-1204:~$ mruby --version\nmruby - Embeddable Ruby  Copyright (c) 2010-2013 mruby developers\n```\n\n\u6b21\u306fCentOS\u3078\u3002\n\n```\n$ kitchen login default-centos-64\nLast login: Fri Dec  6 05:14:40 2013 from 10.0.2.2\n\n## \u4ee5\u4e0b\u4eee\u60f3\u30de\u30b7\u30f3\u5185\n\n[vagrant@default-centos-64 ~]$ mruby --version\nmruby - Embeddable Ruby  Copyright (c) 2010-2013 mruby developers\n```\n\n\u3084\u3063\u305f\u306d\u3002\n\n\u3061\u306a\u307f\u306bmruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fmaster\u306eHEAD\u3067\u3059\u3001\u81ea\u7531\u306b\u9078\u3079\u308b\u3088\u3046\u306b\u3082\u3057\u3066\u3044\u308b\u306e\u3067\u8208\u5473\u304c\u3042\u308c\u3070\u5909\u66f4\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\n### \u304a\u304b\u305f\u3065\u3051\n\nmruby\u3092\u5b58\u5206\u306b\u89e6\u3063\u305f\u3089\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u6d88\u3057\u307e\u3057\u3087\u3046\u3002\n`kitchen destroy`\u30b3\u30de\u30f3\u30c9\u3067\u3059\u3002\n\n\n```shell:bash-cli_\n$  kitchen destroy default\n-----> Starting Kitchen (v1.1.0)\n-----> Destroying <default-ubuntu-1204>...\n       [default] Forcing shutdown of VM...\n       [default] Destroying VM and associated drives...\n       Vagrant instance <default-ubuntu-1204> destroyed.\n       Finished destroying <default-ubuntu-1204> (0m2.49s).\n-----> Destroying <default-centos-64>...\n       [default] Forcing shutdown of VM...\n       [default] Destroying VM and associated drives...\n       Vagrant instance <default-centos-64> destroyed.\n       Finished destroying <default-centos-64> (0m2.51s).\n-----> Kitchen is finished. (0m5.30s)\n```\n\n\u6d88\u3057\u305f\u306d\u3002\n\n## ngx_mruby\u3092\u7d44\u307f\u8fbc\u3093\u3060nginx\n\n`ngx-mruby-*`\u306fmruby\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3064\u3044\u3067\u306b\u3001ngx_mruby\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u7d44\u307f\u8fbc\u3093\u3060Nginx\u3092\u30d3\u30eb\u30c9\u3059\u308b\u74b0\u5883\u3067\u3059\u3002\n\u3064\u3044\u3067\u306b\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nngx_mruby\u306b\u3064\u3044\u3066\u306f\u3053\u3061\u3089\u3092\u3069\u3046\u305e\u3002\n\n[\u4eba\u9593\u3068\u30a6\u30a7\u30d6\u306e\u672a\u6765 - ngx_mruby\u306e\u7d39\u4ecb \u306a\u3089\u3073\u306b nginx+mruby+Redis\u306b\u3088\u308b\u52d5\u7684\u306a\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u5b9f\u88c5\u6848](http://blog.matsumoto-r.jp/?p=3737 \"\u4eba\u9593\u3068\u30a6\u30a7\u30d6\u306e\u672a\u6765 - ngx_mruby\u306e\u7d39\u4ecb \u306a\u3089\u3073\u306b nginx+mruby+Redis\u306b\u3088\u308b\u52d5\u7684\u306a\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u306e\u5b9f\u88c5\u6848\")\n\n\u3061\u306a\u307f\u306b\u3053\u3061\u3089\u306e\u74b0\u5883\u306fmruby\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c[9b2f4c4423ed11f12d6393ae1f0dd4fe3e51ffa0](https://github.com/mruby/mruby/tree/9b2f4c4423ed11f12d6393ae1f0dd4fe3e51ffa0)\u306b\u56fa\u5b9a\u3068\u306a\u3063\u3066\u307e\u3059\u3002\u6307\u5b9a\u306f`.kitchen.yml`\u30d5\u30a1\u30a4\u30eb\u3067\u3002\n\n<blockquote class=\"twitter-tweet\" lang=\"ja\"><p>mod_mruby\u3068ngx_mruby\u3001submodule\u3067\u4fdd\u5b58\u3057\u3066\u3044\u308bmruby\u306ecommit\u30d0\u30fc\u30b8\u30e7\u30f3\u3058\u3083\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\uff08\u6700\u65b0mruby\u306e\u30d0\u30a4\u30c8\u30b3\u30fc\u30c9\u306e\u6301\u3061\u65b9\u304c\u5927\u304d\u304f\u5909\u66f4\u3055\u308c\u3066\u3044\u308b\u305f\u3081\uff09\u306e\u3067\u6ce8\u610f\u3057\u3066\u4e0b\u3055\u3044\u3002\u5e74\u672b\u5bfe\u5fdc\u4e88\u5b9a\u3067\u3059\u3002</p>&mdash; MATSUMOTO, Ryosuke (@matsumotory) <a href=\"https://twitter.com/matsumotory/statuses/408833398040305664\">2013, 12\u6708 6</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n\n\u3055\u3042\u3001\u306a\u306b\u306f\u3068\u3082\u3042\u308c`kitchen converge`\u3067\u3059\u3002\n\n\n```shell:bash-cli_converge_ngx_mruby\n$ kitchen converge ngx-mruby\n-----> Starting Kitchen (v1.1.0)\n-----> Creating <ngx-mruby-ubuntu-1204>...\n-- snip --\n```\n\n\u307e\u305f\u3057\u3070\u3089\u304f\u5f85\u3061\u307e\u3057\u3087\u3046\u3002\n\n\n```shell:bash-cli_ngx_mruby\n$ kitchen login ngx-mruby-ubuntu-1204\nWelcome to Ubuntu 12.04.2 LTS (GNU/Linux 3.5.0-23-generic x86_64)\n\nvagrant@ngx-mruby-ubuntu-1204:~$ /opt/nginx-1.4.2/sbin/nginx -V\nnginx version: nginx/1.4.2\nbuilt by gcc 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) \nTLS SNI support enabled\nconfigure arguments: --prefix=/opt/nginx-1.4.2 --conf-path=/etc/nginx/nginx.conf --sbin-path=/opt/nginx-1.4.2/sbin/nginx --with-debug --add-module=/opt/chef_mruby/ngx_mruby --add-module=/opt/chef_mruby/ngx_mruby/dependence/ngx_devel_kit --with-http_ssl_module --with-http_geoip_module --with-ld-opt='-Wl,-R,/usr/local/lib -L /usr/local/lib' --with-http_realip_module --with-http_stub_status_module --with-http_gzip_static_module\n```\n\n`--add-module=/opt/chef_mruby/ngx_mruby`\u304c\u3064\u3044\u3066\u307e\u3059\u3001\u3084\u3063\u305f\u306d\u3002\n\n\n## mod_mruby\u3092apache httpd\u306b\u8ffd\u52a0(12/13\u8ffd\u8a18)\n\n<blockquote class=\"twitter-tweet\" lang=\"ja\"><p>\u3053\u308c\u3001mod_mruby\u306e\u30a4\u30e1\u30fc\u30b8\u3082\u3042\u3063\u305f\u3089\u958b\u767a\u74b0\u5883\u3068\u3057\u3066\u500b\u4eba\u7684\u306b\u6700\u9ad8\u3060\u306a\u2026</p>&mdash; MATSUMOTO, Ryosuke (@matsumotory) <a href=\"https://twitter.com/matsumotory/statuses/409342266017210368\">2013, 12\u6708 7</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\n\u3064\u304b\u307e\u3048\u305f\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u304b\u3089\u3001\u30ec\u30b7\u30d4\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\n```\n$ kitchen list\nInstance               Driver   Provisioner  Last Action\ndefault-ubuntu-1204    Vagrant  ChefSolo     <Not Created>\ndefault-centos-64      Vagrant  ChefSolo     <Not Created>\nrbenv-ubuntu-1204      Vagrant  ChefSolo     <Not Created>\nrbenv-centos-64        Vagrant  ChefSolo     <Not Created>\nngx-mruby-ubuntu-1204  Vagrant  ChefSolo     <Not Created>\nngx-mruby-centos-64    Vagrant  ChefSolo     <Not Created>\nmod-mruby-ubuntu-1204  Vagrant  ChefSolo     Converged\nmod-mruby-centos-64    Vagrant  ChefSolo     Converged\n```\n\nmod_mruby\u74b0\u5883\u306e\u304a\u8a66\u3057\u306f\u3053\u3061\u3089\u3002\n\n```\n$ kitchen converge mod-mruby\n```\n\nVM\u5185\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3088\u3002\n\n```\n$ kitchen login mod-mruby-centos\n\n$ sudo httpd -M\nLoaded Modules:\n core_module (static)\n mpm_prefork_module (static)\n http_module (static)\n so_module (static)\n mruby_module (shared)\n alias_module (shared)\n auth_basic_module (shared)\n authn_file_module (shared)\n authz_default_module (shared)\n authz_groupfile_module (shared)\n authz_host_module (shared)\n authz_user_module (shared)\n autoindex_module (shared)\n deflate_module (shared)\n dir_module (shared)\n env_module (shared)\n log_config_module (shared)\n logio_module (shared)\n mime_module (shared)\n negotiation_module (shared)\n setenvif_module (shared)\n status_module (shared)\nSyntax OK\n```\n\n\u9069\u5f53\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u3044\u3066\u52d5\u4f5c\u30c1\u30a7\u30c3\u30af\u3002\n\n```\n$ cat -n /var/www/html/hoge.rb \n     1\tif server_name == \"NGINX\"\n     2\t  Server = Nginx\n     3\telsif server_name == \"Apache\"\n     4\t  Server = Apache\n     5\tend\n     6\t\n     7\tServer::rputs \"Hello #{Server::module_name}/#{Server::module_version} world!\\n\"\n```\n\n```\n$ curl localhost/hoge.rb\nHello mod_mruby/0.9.4 world!\n```\n\n\u3067\u307e\u3057\u305f\u306d\u3048\u3002\n\n## \u304a\u308f\u308a\u306b\n\nCookbook\u306eREADME\u306b\u4efb\u610f\u306emgem\u3092\u7d44\u307f\u8fbc\u3080\u65b9\u6cd5\u304c\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u306e\u3067\u3001\u305d\u308c\u3082\u662f\u975e\u3084\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n##\u3000\u8ffd\u8a18:12/27\n\n<blockquote class=\"twitter-tweet\" lang=\"ja\"><p><a href=\"https://twitter.com/sawanoboly\">@sawanoboly</a> <a href=\"https://t.co/02uAltxjmJ\">https://t.co/02uAltxjmJ</a> \u6700\u65b0\u306emruby\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u306e\u3067\u3001advent calendar\u306e\u74b0\u5883\u69cb\u7bc9\u30c4\u30fc\u30eb\u3082\u6700\u521d\u66f8\u3044\u3066\u3044\u305f\u306e\u306b\u5408\u308f\u3057\u3066\u3044\u305f\u3060\u3051\u308b\u3068\u5b09\u3057\u3044\u3067\u3059\uff01</p>&mdash; MATSUMOTO, Ryosuke (@matsumotory) <a href=\"https://twitter.com/matsumotory/statuses/416182604526653440\">2013, 12\u6708 26</a></blockquote>\n<script async src=\"//platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\nmruby\u6700\u65b0\u306e\u30d3\u30eb\u30c9\u306b\u5bfe\u5fdc\u3057\u3066\u304d\u305f\u3088\u3046\u3067\u3059\u3002\n\u305f\u3060\u3001\u5143\u304b\u3089\u4efb\u610f\u306e\u30ea\u30d3\u30b8\u30e7\u30f3\u306emruby\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u304b\u3089\u3001\u30ec\u30b7\u30d4\u306b\u5909\u66f4\u3059\u308b\u3068\u3053\u308d\u306f\u306a\u3044\u306e\u3067\u3059\u3002\n\n\u3069\u3053\u3092\u5909\u3048\u305f\u3089\u3044\u3044\u304b\u306a? \u3053\u306e\u8a18\u4e8b\u3092\u8aad\u3093\u3060\u4eba\u306f\u662f\u975e\u3084\u3063\u3066\u307f\u3088\u3046\u3002\n", "tags": ["mruby", "chef"]}