{"context": " More than 1 year has passed since last update.\u5931\u6557\u3057\u305f\u3089\u30ea\u30c8\u30e9\u30a4\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f5c\u6210\nhttps://github.com/toshinori/scripts/tree/master/pdf\n\nshrink_pdf.sh\n#!/bin/sh\n\n# use xpdf, pdftk, imagemagick, poppler\n\nset -e\n\nreadonly TARGET=$1\n\nif [ ! -e \"${TARGET}\" ];\nthen\n    echo \"${TARGET} not found.\"\n    exit 1\nfi\n\nreadonly DIR=`dirname \"${TARGET}\"`\nreadonly FILENAME=`basename \"${TARGET}\"`\nreadonly BASENAME=`basename \"${TARGET}\" \".pdf\"`\n\ncd \"${DIR}\"\n\nreadonly PRIFIX=\"work\"\n\necho \"${FILENAME}\"\necho \"PDF to PPM\"\n\nreadonly RESOLUTION=150\n`pdftoppm \"${FILENAME}\" -r ${RESOLUTION} \"${PRIFIX}\"`\n\necho \"PPM to JPG\"\nreadonly SIZE=1024\n`mogrify -format jpg -geometry ${SIZE}x${SIZE} \"${PRIFIX}*.ppm\"`\n\necho \"JPG to PDF\"\n`mogrify -format pdf \"${PRIFIX}*.jpg\"`\n\necho \"backup target file.\"\n`mv -f \"${FILENAME}\" \"${FILENAME}.bak\"`\n\necho \"concat PDF.\"\n`pdftk ${PRIFIX}*.pdf output \"${FILENAME}\"`\n\necho \"dispose.\"\n`rm -f *.ppm`\n`rm -f *.jpg`\n`rm -f ${PRIFIX}*.pdf`\n\n\n\u4f7f\u3044\u65b9\u3002\n./shrink_pdf.sh \"hoge.pdf\"\n\n\u307e\u3068\u3081\u3066\u5b9f\u884c\u3059\u308b\u3002\n\u30ab\u30ec\u30f3\u30c8\u914d\u4e0b\u306ePDF\u3092\u62bd\u51fa\u3057\u3066\u3059\u3067\u306b\u51e6\u7406\u6e08\u307f\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u30b9\u30ad\u30c3\u30d7\u3002\n\nshrink_all.sh\n#!/bin/sh\n\nset -e\n\nBACKUP=\"\"\n\nfind . -type f -name '*.pdf' | while read PDF \ndo\n    BACKUP=\"${PDF}.bak\"\n\n    if [ ! -e \"${BACKUP}\" ]; then\n        ./shrink.sh \"${PDF}\"\n    fi\n\ndone\n\n\n\u5931\u6557\u3057\u305f\u3089\u30ea\u30c8\u30e9\u30a4\u3059\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f5c\u6210\nhttps://github.com/toshinori/scripts/tree/master/pdf\n\n```shrink_pdf.sh\n#!/bin/sh\n\n# use xpdf, pdftk, imagemagick, poppler\n\nset -e\n\nreadonly TARGET=$1\n\nif [ ! -e \"${TARGET}\" ];\nthen\n\techo \"${TARGET} not found.\"\n\texit 1\nfi\n\nreadonly DIR=`dirname \"${TARGET}\"`\nreadonly FILENAME=`basename \"${TARGET}\"`\nreadonly BASENAME=`basename \"${TARGET}\" \".pdf\"`\n\ncd \"${DIR}\"\n\nreadonly PRIFIX=\"work\"\n\necho \"${FILENAME}\"\necho \"PDF to PPM\"\n\nreadonly RESOLUTION=150\n`pdftoppm \"${FILENAME}\" -r ${RESOLUTION} \"${PRIFIX}\"`\n\necho \"PPM to JPG\"\nreadonly SIZE=1024\n`mogrify -format jpg -geometry ${SIZE}x${SIZE} \"${PRIFIX}*.ppm\"`\n\necho \"JPG to PDF\"\n`mogrify -format pdf \"${PRIFIX}*.jpg\"`\n\necho \"backup target file.\"\n`mv -f \"${FILENAME}\" \"${FILENAME}.bak\"`\n\necho \"concat PDF.\"\n`pdftk ${PRIFIX}*.pdf output \"${FILENAME}\"`\n\necho \"dispose.\"\n`rm -f *.ppm`\n`rm -f *.jpg`\n`rm -f ${PRIFIX}*.pdf`\n```\n\n\u4f7f\u3044\u65b9\u3002\n\n```sh\n./shrink_pdf.sh \"hoge.pdf\"\n```\n\n\u307e\u3068\u3081\u3066\u5b9f\u884c\u3059\u308b\u3002\n\u30ab\u30ec\u30f3\u30c8\u914d\u4e0b\u306ePDF\u3092\u62bd\u51fa\u3057\u3066\u3059\u3067\u306b\u51e6\u7406\u6e08\u307f\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u30b9\u30ad\u30c3\u30d7\u3002\n\n```shrink_all.sh\n#!/bin/sh\n\nset -e\n\nBACKUP=\"\"\n\nfind . -type f -name '*.pdf' | while read PDF \ndo\n\tBACKUP=\"${PDF}.bak\"\n\t\n\tif [ ! -e \"${BACKUP}\" ]; then\n\t    ./shrink.sh \"${PDF}\"\n\tfi\n\ndone\n```\n", "tags": ["ShellScript", "PDF"]}