{"context": "\n\n\u307e\u3068\u3081\n\n\u57fa\u672c\u7684\u306b\u306fDateTimeImmutable\u3092\u4f7f\u3048\n\nDatePeriod\u3067\u4e8b\u8db3\u308a\u308b\u5834\u5408\u306f\u591a\u3044\u3002\n\n\nDateTime\u3092\u4f7f\u308f\u306a\u3044\u4f8b\n\n$today\u3068\u304b$tomorrow\u3068\u304b\u306b\u306f\u4f7f\u308f\u306a\u3044\uff08DateTimeImmutable\u3092\u4f7f\u3048\uff09\n\u4f8b\u3048\u3070\u3001\u77e5\u3089\u305a\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\u3001\u30cf\u30de\u308a\u307e\u3059\u3002\n<?php\n// \u4f8b\u3048\u3070\u30012016-06-15 15:48\n$tomorrow = new DateTime();\n// \u3053\u3053\u3067\u30012016-06-16 15:48\u306b\u306a\u308b\u3002\n$tomorrow->add(new DatetimeInterval('P1D')); \n\n// \u3069\u3053\u304b\u77e5\u3089\u306a\u5834\u6240\u3067\u3053\u3046\u3044\u3046\u3053\u3068\u3092\u3084\u308b\u3068\u2026\n$dayAfterTomorrow = $tomorrow->add(new DatetimeInterval('P1D'));\n\n// $tomorrow \u5909\u6570\u304c\u3001tomorrow\u3058\u3083\u306a\u304f\u306a\u3063\u305f\uff01\uff01\uff01\uff01\n\n\u666e\u901a\u3001\u300c\u4eca\u65e5\u300d\u3068\u304b\u300c\u660e\u5f8c\u65e5\u300d\u3068\u304b\u300c9\u65e5\u5f8c\u300d\u306a\u3069\u3068\u3044\u3063\u305f\u3001\u7279\u5b9a\u306e\u65e5\u4ed8\u3092\u8868\u3059\u5909\u6570 \u306b\u306f\u3001DateTimeImmutable\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u4e00\u65b9\u5411\uff08Unidirectional\uff09\u306e\u30ab\u30fc\u30bd\u30eb\u306b\u306f\u4f7f\u308f\u306a\u3044\uff08DatePeriod\u3067\u4e8b\u8db3\u308a\u308b\uff09\n<?php\nfunction getGenerator(DateTime $first, DateTime $last){\n    $cursor = $first;\n    while($first <= $last) {\n        yield $cursor;\n        $first->add(new DateTimeInterval('P1D'));\n    }\n}\n$today = new DateTimeImmutable();\n$nextFriday = new DateTimeImmutable('next friday');\nforeach(getGenerator($today, $nextFriday) as $datetime) {\n    // \u306a\u306b\u304b\u51e6\u7406\n}\n\n\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u306f\u3001DatePeriod\u3067\u4e8b\u8db3\u308a\u307e\u3059\u3002\n<?php\n$today = new DateTimeImmutable();\n$nextFriday = new DateTimeImmutable('next friday');\n$interval = new DateInterval('P1D');\n$iterator = new DatePeriod($today, $interval ,$nextFryday);\nforeach($iterator as $datetime) {\n    // \u4f55\u304b\u51e6\u7406\n}\n\n\u4ee5\u4e0b\u306e\u3069\u3063\u3061\u304b\u306e\u5834\u5408\u306f\u3001DatePeriod\u3067\u5bfe\u5fdc\u3067\u304d\u307e\u3059\u3002\n\n\u300c\u958b\u59cb\u65e5\u300d\u3068\u300c\u7d42\u4e86\u65e5\u300d\u3068\u300c\u7e70\u308a\u8fd4\u3059\u56de\u6570\u300d\u3067\u3001\u30eb\u30fc\u30d7\u3059\u308b\n\u300c\u958b\u59cb\u65e5\u300d\u3068\u300c\u7d42\u4e86\u65e5\u300d\u3068\u300c\u7e70\u308a\u8fd4\u3057\u3054\u3068\u306e\u6642\u9593\u5dee\u300d\u3067\u3001\u30eb\u30fc\u30d7\u3059\u308b\n\n\nDateTime\u3092\u4f7f\u3046\u4f8b\n\nDatePeriod\u3067\u5bfe\u5fdc\u3067\u304d\u306a\u3044\u3001\u8981\u7d20\u6570\u305f\u304f\u3055\u3093\u306a\u30a4\u30c6\u30ec\u30fc\u30bf\n\u8981\u7d20\u6570\u304c\u6570\u767e\u7a0b\u5ea6\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\u306a\u3089\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8a70\u3081\u8fbc\u3093\u3067\u304a\u3051\u3070\u3044\u3044\u3067\u3059\u3002\n\u3057\u304b\u3057\u3001\u4f8b\u3048\u3070\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u3042\u308b1\u5104\u4ef6\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u306e\u51e6\u7406\u3067\u3001\u6761\u4ef6\u5206\u5c90\u304c\u305f\u304f\u3055\u3093\u3042\u308b\u3068\u304d\u306f\u3001DateTime\u578b\u3067\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5f79\u7acb\u3061\u307e\u3059\u3002\n<?php\nfunction get()\n{\n    $datetime = new DateTime();\n    $counter = 0;\n    do{\n        $diffDaysString = \"P{$counter}D\";\n        yield $datetime->add(new DateInterval($diffDaysString));\n        $counter++;\n    } while($counter < 1000 * 1000);\n}\n\nforeach(get() as $datetime) {\n    // \u306a\u3093\u304b\u51e6\u7406\n}\n\n\n# \u307e\u3068\u3081\n\n* \u57fa\u672c\u7684\u306b\u306f[DateTimeImmutable](http://php.net/manual/ja/class.datetimeimmutable.php)\u3092\u4f7f\u3048\n* [DatePeriod](http://php.net/manual/ja/class.dateperiod.php)\u3067\u4e8b\u8db3\u308a\u308b\u5834\u5408\u306f\u591a\u3044\u3002\n\n# DateTime\u3092\u4f7f\u308f\u306a\u3044\u4f8b\n\n## $today\u3068\u304b$tomorrow\u3068\u304b\u306b\u306f\u4f7f\u308f\u306a\u3044\uff08DateTimeImmutable\u3092\u4f7f\u3048\uff09\n\u4f8b\u3048\u3070\u3001\u77e5\u3089\u305a\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3068\u3001\u30cf\u30de\u308a\u307e\u3059\u3002\n\n```php\n<?php\n// \u4f8b\u3048\u3070\u30012016-06-15 15:48\n$tomorrow = new DateTime();\n// \u3053\u3053\u3067\u30012016-06-16 15:48\u306b\u306a\u308b\u3002\n$tomorrow->add(new DatetimeInterval('P1D')); \n\n// \u3069\u3053\u304b\u77e5\u3089\u306a\u5834\u6240\u3067\u3053\u3046\u3044\u3046\u3053\u3068\u3092\u3084\u308b\u3068\u2026\n$dayAfterTomorrow = $tomorrow->add(new DatetimeInterval('P1D'));\n\n// $tomorrow \u5909\u6570\u304c\u3001tomorrow\u3058\u3083\u306a\u304f\u306a\u3063\u305f\uff01\uff01\uff01\uff01\n```\n\n\u666e\u901a\u3001\u300c\u4eca\u65e5\u300d\u3068\u304b\u300c\u660e\u5f8c\u65e5\u300d\u3068\u304b\u300c9\u65e5\u5f8c\u300d\u306a\u3069\u3068\u3044\u3063\u305f\u3001**\u7279\u5b9a\u306e\u65e5\u4ed8\u3092\u8868\u3059\u5909\u6570** \u306b\u306f\u3001[DateTimeImmutable](http://php.net/manual/ja/class.datetimeimmutable.php)\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n## \u4e00\u65b9\u5411\uff08Unidirectional\uff09\u306e\u30ab\u30fc\u30bd\u30eb\u306b\u306f\u4f7f\u308f\u306a\u3044\uff08DatePeriod\u3067\u4e8b\u8db3\u308a\u308b\uff09\n\n```php\n<?php\nfunction getGenerator(DateTime $first, DateTime $last){\n    $cursor = $first;\n    while($first <= $last) {\n        yield $cursor;\n        $first->add(new DateTimeInterval('P1D'));\n    }\n}\n$today = new DateTimeImmutable();\n$nextFriday = new DateTimeImmutable('next friday');\nforeach(getGenerator($today, $nextFriday) as $datetime) {\n    // \u306a\u306b\u304b\u51e6\u7406\n}\n```\n\n\u4e0a\u8a18\u306e\u30b3\u30fc\u30c9\u306f\u3001[DatePeriod](http://php.net/manual/ja/class.dateperiod.php)\u3067\u4e8b\u8db3\u308a\u307e\u3059\u3002\n\n```php\n<?php\n$today = new DateTimeImmutable();\n$nextFriday = new DateTimeImmutable('next friday');\n$interval = new DateInterval('P1D');\n$iterator = new DatePeriod($today, $interval ,$nextFryday);\nforeach($iterator as $datetime) {\n    // \u4f55\u304b\u51e6\u7406\n}\n```\n\n\u4ee5\u4e0b\u306e\u3069\u3063\u3061\u304b\u306e\u5834\u5408\u306f\u3001DatePeriod\u3067\u5bfe\u5fdc\u3067\u304d\u307e\u3059\u3002\n\n* \u300c\u958b\u59cb\u65e5\u300d\u3068\u300c\u7d42\u4e86\u65e5\u300d\u3068\u300c\u7e70\u308a\u8fd4\u3059\u56de\u6570\u300d\u3067\u3001\u30eb\u30fc\u30d7\u3059\u308b\n* \u300c\u958b\u59cb\u65e5\u300d\u3068\u300c\u7d42\u4e86\u65e5\u300d\u3068\u300c\u7e70\u308a\u8fd4\u3057\u3054\u3068\u306e\u6642\u9593\u5dee\u300d\u3067\u3001\u30eb\u30fc\u30d7\u3059\u308b\n\n\n# DateTime\u3092\u4f7f\u3046\u4f8b\n\n## DatePeriod\u3067\u5bfe\u5fdc\u3067\u304d\u306a\u3044\u3001\u8981\u7d20\u6570\u305f\u304f\u3055\u3093\u306a\u30a4\u30c6\u30ec\u30fc\u30bf\n\u8981\u7d20\u6570\u304c\u6570\u767e\u7a0b\u5ea6\u306e\u30a4\u30c6\u30ec\u30fc\u30bf\u306a\u3089\u3001\u30d5\u30a3\u30fc\u30eb\u30c9\u306b\u8a70\u3081\u8fbc\u3093\u3067\u304a\u3051\u3070\u3044\u3044\u3067\u3059\u3002  \n\u3057\u304b\u3057\u3001\u4f8b\u3048\u3070\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u3042\u308b1\u5104\u4ef6\u306e\u30c7\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u306e\u51e6\u7406\u3067\u3001\u6761\u4ef6\u5206\u5c90\u304c\u305f\u304f\u3055\u3093\u3042\u308b\u3068\u304d\u306f\u3001DateTime\u578b\u3067\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5f79\u7acb\u3061\u307e\u3059\u3002\n\n```php\n<?php\nfunction get()\n{\n    $datetime = new DateTime();\n    $counter = 0;\n    do{\n        $diffDaysString = \"P{$counter}D\";\n        yield $datetime->add(new DateInterval($diffDaysString));\n        $counter++;\n    } while($counter < 1000 * 1000);\n}\n\nforeach(get() as $datetime) {\n    // \u306a\u3093\u304b\u51e6\u7406\n}\n```\n", "tags": ["PHP5.6", "PHP7", "PHP", "datetime"]}