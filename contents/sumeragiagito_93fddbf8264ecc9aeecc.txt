{"tags": ["webpack", "hot-module-replacement", "webpack-dev-server", "JavaScript"], "context": "\n\nwebpack \u4f7f\u3063\u3066\u307f\u308b\u3068\u4fbf\u5229\u306a\u3093\u3067\u3059\u304c\u984c\u76ee\u306e\u3088\u3046\u306b\u300e\u7656\u304c\u3042\u308b\u304c\u30af\u30bb\u306b\u306a\u308b\u300f ----> \u306a\u308a\u307e\u308a\u307e\u3057\u305f\u3001\u79c1\u306f\u3002\n\nwebpack \u306f build & bundle \u306e tool \u3067\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u4e2d\u3067\u3082\u63d0\u4f9btool\u3067\u3042\u308b webpack-dev-server \u3067\u5229\u7528\u53ef\u80fd\u306a\u6a5f\u80fd\u306b HMR(Hot module Replacement) \u3068\u3044\u3046\u958b\u767a\u6bb5\u968e\u306b\u304a\u3044\u3066\u3001\u753b\u9762\u63a8\u79fb\u305b\u305a\u306b\u5909\u66f4\u7b87\u6240\u3092\u66f4\u65b0\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308b\u306e\u306f\u5468\u77e5\u306e\u4e8b\u5b9f\u3067\u3059\u304c...\u3000\u3002\n\n\u3053\u306e\u6a5f\u80fd\u306b\u304a\u3044\u3066 extract-text-webpack-plugin\u3000\u3092\u4f7f\u7528\u3057 stylesheet \u3092 link \u3067\u4f7f\u7528\u3059\u308b\u3068 HMR\u3000\u304c\u6a5f\u80fd\u305b\u305a\u753b\u9762\u5168\u4f53\u3092 reload \u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n\n\u81ea\u52d5 reload \u306f gulp grunt \u7b49\u306a\u3069\u3067\u5b9f\u73fe\u3067\u304d\u308b\u3053\u3068\u306f\u3082\u3046\u5f53\u305f\u308a\u524d\u3067\u3059\u304c\u3001\u3057\u304b\u3057\u6298\u89d2\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3057\u306a\u3044\u306e\u3082\u52ff\u4f53\u7121\u3044\u3002\u307e\u3042\u3001\u305d\u308c\u304c\u7406\u7531\u304b\u306f\u5b58\u3058\u307e\u305b\u3093\u304c link \u3067\u4f7f\u7528\u3057\u305f\u6642\u306b HMR \u3092\u4f7f\u304a\u3046\u3068 stackoverflow \u7b49\u3067\u8a71\u984c\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3092\u898b\u304b\u3051\u307e\u3057\u305f\u3002\n\n\u305d\u3093\u306a\u4e2d\u3001javascript\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u6d77\u5916\u306e\u60c5\u5831\u5171\u6709site 60devs.com \u306b\u3066\u8208\u5473\u6df1\u3044\u5185\u5bb9\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nAuthor \u306e\u4e00\u4eba\u3067\u3042\u308b  Ruslan Prytula\u3000\u3055\u3093\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\nWebpack: hot reload for CSS modules\n\nIn this post, I\u2019ll show you a way to make hot reloading work for stylesheets in a non-React project with enabled CSS modules. I\u2019ll use SASS as my CSS preprocessor, but it\u2019s going to be pretty much the same for other ones. By the way, it\u2019s going to be a hackish way to get things done :)\n\nReact \u306a\u3093\u304b\u3067\u306f\u53ef\u80fd\u306a\u3088\u3046\u306a\u3093\u3067\u3059\u304c\u3001React \u3092\u4f7f\u308f\u306a\u3044\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u632f\u308a\u56de\u3055\u308c\u305f\u304f\u306a\u3044\uff09\u5834\u5408\u306a\u3093\u304b\u3092\u60f3\u5b9a\u3057\u3066\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n\nCSS modules in webpack\n\nOnce css-loader is installed, CSS modules could be enabled / disabled using the modules parameter. For example:\n\n// webpack.config.js\n...\nmodule: {\n  use: [{\n    test: /\\.css$/,\n    loaders: ['style', 'css?modules', 'sass']  // CSS \u3092 cssModule \u3068\u3057\u3066\u6271\u3044\u307e\u3059\u3002\n  }]                                           // React \u306a\u3093\u304b\u3067\u306f\u304a\u306a\u3058\u307f\u3067\u3059\u304b\u306d\u3002\n}\n...\n\n\n\n// components/helloWorld.js\n\nlet style = require('./helloWorld.scss')\n\nwindow.onload = () => {\n  document.body.innerHTML = `<div class=\"${style.component}\">hello world</div>`\n}\n// cssmodule \u306b\u3059\u308b\u3068 ${style.component} \u3067\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\n\n\n\n/* components/helloWorld.scss */\n\n.component {\n  padding: 20px;\n  background-color: gold;\n  color: #fff;\n}\n\n\n\n// your-main-entry-file.js\n...\n\nif(module.hot) {\n  const FILE_NAME = 'bundle.css'\n  let file = ''\n  let el = document.querySelector(`link[href*=\"${FILE_NAME}\"]`)\n  let {href} = el\n\n  function httpGet(url, callback) {                    // httpGet\u95a2\u6570\u3092\u5b9a\u7fa9\n    let xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => callback(xhr))\n    xhr.open('GET', url)\n    xhr.send()\n  }\n\n  module.hot.accept()                                 // \u3053\u308c\u3067 module \u306e\u3084\u308a\u53d6\u308a\u304c\u53ef\u80fd\u306b\u3002\n  module.hot.dispose(() => {                          // dispose() \u3067 module \u306e\u5165\u66ff\u51e6\u7406\u3002\n    let url = `${href}?d=${new Date().getTime()}`\n\n    httpGet(url, ({responseText}) => {\n      if(responseText == file)\n        window.location.reload() // js was changed\n      else\n        el.href = url\n    })\n  })\n\n  httpGet(href, ({responseText}) => {\n    file = responseText\n  })\n}\n\n\n\n\u8981\u3059\u308b\u306b\u3001Ajax \u3067 bundle.css \u306e\u5909\u66f4\u524d\u3068\u5909\u66f4\u5f8c\u3092\u53d6\u5f97\u3057\u3066 HMR \u3092\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002github \u306e sample \u30b3\u30fc\u30c9\u3092\u89e6\u3063\u3066\u307f\u305f\u3093\u3067\u3059\u304c\u3001\u30d0\u30c3\u30c1\u30ea HMR \u3067\u304d\u3066\u307e\u3057\u305f\u3002\n\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u4fbf\u5229\u306a\u3093\u3067\u3059\u304c\u3001\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b\u3082\u306e\u3082\u591a\u3044\u306e\u3067\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n#####[webpack](https://webpack.js.org/) \u4f7f\u3063\u3066\u307f\u308b\u3068\u4fbf\u5229\u306a\u3093\u3067\u3059\u304c\u984c\u76ee\u306e\u3088\u3046\u306b\u300e\u7656\u304c\u3042\u308b\u304c\u30af\u30bb\u306b\u306a\u308b\u300f ----> \u306a\u308a\u307e\u308a\u307e\u3057\u305f\u3001\u79c1\u306f\u3002\n#####webpack \u306f build & bundle \u306e tool \u3067\u3042\u308b\u306e\u3067\u3059\u304c\u3001\u4e2d\u3067\u3082\u63d0\u4f9btool\u3067\u3042\u308b webpack-dev-server \u3067\u5229\u7528\u53ef\u80fd\u306a\u6a5f\u80fd\u306b HMR(Hot module Replacement) \u3068\u3044\u3046\u958b\u767a\u6bb5\u968e\u306b\u304a\u3044\u3066\u3001\u753b\u9762\u63a8\u79fb\u305b\u305a\u306b\u5909\u66f4\u7b87\u6240\u3092\u66f4\u65b0\u3059\u308b\u6a5f\u80fd\u304c\u3042\u308b\u306e\u306f\u5468\u77e5\u306e\u4e8b\u5b9f\u3067\u3059\u304c...\u3000\u3002\n#####\u3053\u306e\u6a5f\u80fd\u306b\u304a\u3044\u3066 extract-text-webpack-plugin\u3000\u3092\u4f7f\u7528\u3057 stylesheet \u3092 link \u3067\u4f7f\u7528\u3059\u308b\u3068 HMR\u3000\u304c\u6a5f\u80fd\u305b\u305a\u753b\u9762\u5168\u4f53\u3092 reload \u3057\u306a\u3044\u3068\u3044\u3051\u307e\u305b\u3093\u3002\n#####\u81ea\u52d5 reload \u306f gulp grunt \u7b49\u306a\u3069\u3067\u5b9f\u73fe\u3067\u304d\u308b\u3053\u3068\u306f\u3082\u3046\u5f53\u305f\u308a\u524d\u3067\u3059\u304c\u3001\u3057\u304b\u3057\u6298\u89d2\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3057\u306a\u3044\u306e\u3082\u52ff\u4f53\u7121\u3044\u3002\u307e\u3042\u3001\u305d\u308c\u304c\u7406\u7531\u304b\u306f\u5b58\u3058\u307e\u305b\u3093\u304c link \u3067\u4f7f\u7528\u3057\u305f\u6642\u306b HMR \u3092\u4f7f\u304a\u3046\u3068 stackoverflow \u7b49\u3067\u8a71\u984c\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3092\u898b\u304b\u3051\u307e\u3057\u305f\u3002\n\n#####\u305d\u3093\u306a\u4e2d\u3001javascript\u3092\u4e2d\u5fc3\u3068\u3057\u305f\u6d77\u5916\u306e\u60c5\u5831\u5171\u6709site [60devs.com](https://60devs.com/webpack-hot-reload-css-modules.html) \u306b\u3066\u8208\u5473\u6df1\u3044\u5185\u5bb9\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n#####Author \u306e\u4e00\u4eba\u3067\u3042\u308b [ Ruslan Prytula](https://60devs.com/authors/ruslan.prytula/)\u3000\u3055\u3093\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n#Webpack: hot reload for CSS modules\n######In this post, I\u2019ll show you a way to make hot reloading work for stylesheets in a non-React project with enabled CSS modules. I\u2019ll use SASS as my CSS preprocessor, but it\u2019s going to be pretty much the same for other ones. By the way, it\u2019s going to be a hackish way to get things done :)\n\n#####React \u306a\u3093\u304b\u3067\u306f\u53ef\u80fd\u306a\u3088\u3046\u306a\u3093\u3067\u3059\u304c\u3001React \u3092\u4f7f\u308f\u306a\u3044\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306b\u632f\u308a\u56de\u3055\u308c\u305f\u304f\u306a\u3044\uff09\u5834\u5408\u306a\u3093\u304b\u3092\u60f3\u5b9a\u3057\u3066\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n\n\n\n#CSS modules in webpack\n######Once css-loader is installed, CSS modules could be enabled / disabled using the modules parameter. For example:\n\n```\n\n// webpack.config.js\n...\nmodule: {\n  use: [{\n    test: /\\.css$/,\n    loaders: ['style', 'css?modules', 'sass']  // CSS \u3092 cssModule \u3068\u3057\u3066\u6271\u3044\u307e\u3059\u3002\n  }]                                           // React \u306a\u3093\u304b\u3067\u306f\u304a\u306a\u3058\u307f\u3067\u3059\u304b\u306d\u3002\n}\n...\n\n```\n\n```\n\n// components/helloWorld.js\n\nlet style = require('./helloWorld.scss')\n\nwindow.onload = () => {\n  document.body.innerHTML = `<div class=\"${style.component}\">hello world</div>`\n}\n// cssmodule \u306b\u3059\u308b\u3068 ${style.component} \u3067\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\n\n```\n```\n\n/* components/helloWorld.scss */\n\n.component {\n  padding: 20px;\n  background-color: gold;\n  color: #fff;\n}\n\n```\n```\n\n// your-main-entry-file.js\n...\n\nif(module.hot) {\n  const FILE_NAME = 'bundle.css'\n  let file = ''\n  let el = document.querySelector(`link[href*=\"${FILE_NAME}\"]`)\n  let {href} = el\n\n  function httpGet(url, callback) {                    // httpGet\u95a2\u6570\u3092\u5b9a\u7fa9\n    let xhr = new XMLHttpRequest()\n\n    xhr.addEventListener('load', () => callback(xhr))\n    xhr.open('GET', url)\n    xhr.send()\n  }\n\n  module.hot.accept()                                 // \u3053\u308c\u3067 module \u306e\u3084\u308a\u53d6\u308a\u304c\u53ef\u80fd\u306b\u3002\n  module.hot.dispose(() => {                          // dispose() \u3067 module \u306e\u5165\u66ff\u51e6\u7406\u3002\n    let url = `${href}?d=${new Date().getTime()}`\n\n    httpGet(url, ({responseText}) => {\n      if(responseText == file)\n        window.location.reload() // js was changed\n      else\n        el.href = url\n    })\n  })\n\n  httpGet(href, ({responseText}) => {\n    file = responseText\n  })\n}\n\n```\n\n######\u8981\u3059\u308b\u306b\u3001Ajax \u3067 bundle.css \u306e\u5909\u66f4\u524d\u3068\u5909\u66f4\u5f8c\u3092\u53d6\u5f97\u3057\u3066 HMR \u3092\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002github \u306e sample \u30b3\u30fc\u30c9\u3092\u89e6\u3063\u3066\u307f\u305f\u3093\u3067\u3059\u304c\u3001\u30d0\u30c3\u30c1\u30ea HMR \u3067\u304d\u3066\u307e\u3057\u305f\u3002\n######\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u4fbf\u5229\u306a\u3093\u3067\u3059\u304c\u3001\u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b\u3082\u306e\u3082\u591a\u3044\u306e\u3067\u826f\u3044\u306e\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff1f\n"}