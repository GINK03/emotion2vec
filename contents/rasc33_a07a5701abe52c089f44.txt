{"context": " More than 1 year has passed since last update.\n\nGhost 0.3.3 \u3092Arch Linux\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nGhost 0.3.3\u3092Arch Linux\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u306e\u3067\u624b\u9806\u306e\u30e1\u30e2\u3002\n\nSource\u3092Download\u3057\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u7528Directory\u3078\u914d\u7f6e\ncd /usr/local/src\nwget https://ghost.org/zip/ghost-0.3.3.zip\ncd /srv/http\nunzip /usr/local/src/ghost-0.3.3.zip -d ghost\nchown -R http ghost\n\n\nDB\u3092\u4f5c\u6210\nMarinaDB\u304c\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b\u3088\u3046\u8a2d\u5b9a\nsystemctl enable mysqld.service\nsystemctl start mysqld.service\n\n\u4ee5\u4e0b2\u3064\u306eDB\u3092\u4f5c\u6210\n\nghost\nghost_dev\n\nMarinaDB\u3078\u30ed\u30b0\u30a4\u30f3\nmysql -u root -p\npassword: ******\n\nMariaDB [(none)]> CREATE DATABASE ghost CHARACTER SET utf8;\nQuery OK, 1 row affected (0.00 sec)\n\nMariaDB [(none)]> CREATE DATABASE ghost_dev CHARACTER SET utf8;\nQuery OK, 1 row affected (0.01 sec)\n\nMariaDB [(none)]> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| ghost              |\n| ghost_dev          |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n6 rows in set (0.00 sec)\n\nMariaDB [(none)]> GRANT ALL ON ghost.* to ghost@localhost;\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> GRANT ALL ON ghost_dev.* to ghost_dev@localhost;\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> SET PASSWORD FOR ghost@localhost=password('YOUR PASSWORD');\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> SET PASSWORD FOR ghost_dev@localhost=password('YOUR PASSWORD');\nQuery OK, 0 rows affected (0.01 sec)\n\n\nconfig.js\u3092\u7de8\u96c6\ncd /srv/http/ghost\nvi config.js\n\nconfig.js\u3067\u306fDB Client\u90e8\u5206\u3092sqlite3\u304b\u3089marinadb(mysql)\u3078\u5909\u66f4\u3057\u307e\u3059\u3002\n\nconfig.js\n     // ### Production\n(snip)\n            client: 'mysql',\n            connection: {\n                host: 'localhost',\n                user: 'ghost',\n                password: 'YOUR PASSWORD',\n                database: 'ghost',\n                charset: 'utf8'\n             },\n(snip)\n    // ### Development **(default)**\n(snip)\n        database: {\n            client: 'mysql',\n            connection: {\n               host: 'localhost',\n               user: 'ghost_dev',\n               password: 'YOUR PASSWORD',\n               database: 'ghost_dev',\n               charset: 'utf8'\n            },\n(snip)\n\n\n\nnpm install\ncd /srv/http/ghost\nnpm install --production\n\n\ndefault\u306e\u8d77\u52d5\u30e2\u30fc\u30c9\u3092production\u306b\u8a2d\u5b9a\nvi index.js\n\n\nindex.js\nprocess.env.NODE_ENV = 'production';\n\n\n\nApache\u306e\u8a2d\u5b9a\nhttpd-vhosts.conf\u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u8a2d\u5b9a\ncd /etc/httpd/conf\nvi httpd.conf\n\n\nhttpd.conf\n- #Include conf/extra/httpd-vhosts.conf\n+ Include conf/extra/httpd-vhosts.conf\n\n\nVirtualHost\u3092\u8a2d\u5b9a\u3059\u308b\ncd /etc/httpd/conf/extra/\nvi httpd-vhosts.conf\n\n\nhttpd-vhosts.conf\n#### ghost\n<VirtualHost *:80>\n    ServerAdmin wwwadmin@example.com\n    DocumentRoot \"/srv/http/ghost/\"\n    ServerName example.com\n    ServerAlias www.example.com\n    AddDefaultCharset Off\n    ErrorLog \"/var/log/httpd/www.example.com/error_log\"\n    CustomLog \"/var/log/httpd/www.example.com/access_log\" common\n    <Proxy *>\n        order deny,allow\n        allow from 127.0.0.1\n    </Proxy>\n    <IfModule mod_proxy.c>\n        ProxyPass / http://localhost:2368/\n        ProxyPassReverse / http://localhost:2368/\n        ProxyPreserveHost On\n    </IfModule>\n</VirtualHost>\n\n\nApache\u304c\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b\u3088\u3046\u8a2d\u5b9a\nsystemctl enable httpd.service\nsystemctl start httpd.service\n\nApache\u3092\u8d77\u52d5\u3059\u308b\u3002\nsystemctl start httpd.service\n\n\npm2\u3067index.js\u3092daemon\u5316\u3059\u308b\npm2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\ncd /srv/http/ghost\nnpm install pm2\n\n\u4e00\u5fdc\u8d77\u52d5\u3055\u305b\u308b\u3002\npm2 start /srv/http/ghost/index.js -i max\npm2 list\n\n\n\u30b5\u30fc\u30d0\u8d77\u52d5\u6642\u306bindex.js\u304c\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3059\u308b\n/usr/lib/systemd/system\u3078\u79fb\u52d5\u3057\u3001ghost.service\u3092\u4f5c\u6210\ncd /usr/lib/systemd/system/\nvi ghost.service\n\n\nghost.service\n[Unit]\nDescription=Ghost service\n# Make sure we have functional network and logging available\nAfter=syslog.target\nAfter=network.target\n\n[Service]\n# Optional, assign custom user and group for this service\nUser=root\nGroup=root\n# Allow process forking\nExecStart=/usr/bin/pm2 start /srv/http/ghost/index.js -i max\n#ExecStop=/usr/bin/pm2 stop all\n#ExecReload=/usr/bin/pm2 restart all\nType=forking\n# Give a reasonable amount of time for the server to start up/shut down\nTimeoutSec=10\n\n[Install]\nWantedBy=multi-user.target\n\n\n## Ghost 0.3.3 \u3092Arch Linux\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nGhost 0.3.3\u3092Arch Linux\u3078\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u306e\u3067\u624b\u9806\u306e\u30e1\u30e2\u3002\n\n### Source\u3092Download\u3057\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u7528Directory\u3078\u914d\u7f6e\n\n```bash\ncd /usr/local/src\nwget https://ghost.org/zip/ghost-0.3.3.zip\ncd /srv/http\nunzip /usr/local/src/ghost-0.3.3.zip -d ghost\nchown -R http ghost\n```\n\n### DB\u3092\u4f5c\u6210\n\nMarinaDB\u304c\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b\u3088\u3046\u8a2d\u5b9a\n\n```bash\nsystemctl enable mysqld.service\nsystemctl start mysqld.service\n```\n\n\u4ee5\u4e0b2\u3064\u306eDB\u3092\u4f5c\u6210\n\n* ghost\n* ghost_dev\n\nMarinaDB\u3078\u30ed\u30b0\u30a4\u30f3\n\n```bash\nmysql -u root -p\npassword: ******\n```\n\n```mysql\nMariaDB [(none)]> CREATE DATABASE ghost CHARACTER SET utf8;\nQuery OK, 1 row affected (0.00 sec)\n\nMariaDB [(none)]> CREATE DATABASE ghost_dev CHARACTER SET utf8;\nQuery OK, 1 row affected (0.01 sec)\n\nMariaDB [(none)]> show databases;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| ghost              |\n| ghost_dev          |\n| mysql              |\n| performance_schema |\n| test               |\n+--------------------+\n6 rows in set (0.00 sec)\n\nMariaDB [(none)]> GRANT ALL ON ghost.* to ghost@localhost;\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> GRANT ALL ON ghost_dev.* to ghost_dev@localhost;\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> FLUSH PRIVILEGES;\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> SET PASSWORD FOR ghost@localhost=password('YOUR PASSWORD');\nQuery OK, 0 rows affected (0.00 sec)\n\nMariaDB [(none)]> SET PASSWORD FOR ghost_dev@localhost=password('YOUR PASSWORD');\nQuery OK, 0 rows affected (0.01 sec)\n```\n\n### config.js\u3092\u7de8\u96c6\n\n```bash\ncd /srv/http/ghost\nvi config.js\n```\n\nconfig.js\u3067\u306fDB Client\u90e8\u5206\u3092sqlite3\u304b\u3089marinadb(mysql)\u3078\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```vim:config.js\n     // ### Production\n(snip)\n            client: 'mysql',\n            connection: {\n                host: 'localhost',\n                user: 'ghost',\n                password: 'YOUR PASSWORD',\n                database: 'ghost',\n                charset: 'utf8'\n             },\n(snip)\n    // ### Development **(default)**\n(snip)\n        database: {\n            client: 'mysql',\n            connection: {\n               host: 'localhost',\n               user: 'ghost_dev',\n               password: 'YOUR PASSWORD',\n               database: 'ghost_dev',\n               charset: 'utf8'\n            },\n(snip)\n```\n\n### npm install\n```bash\ncd /srv/http/ghost\nnpm install --production\n```\n\n### default\u306e\u8d77\u52d5\u30e2\u30fc\u30c9\u3092production\u306b\u8a2d\u5b9a\n```bash\nvi index.js\n```\n\n```vim:index.js\nprocess.env.NODE_ENV = 'production';\n```\n\n### Apache\u306e\u8a2d\u5b9a\n\nhttpd-vhosts.conf\u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u8a2d\u5b9a\n\n```bash\ncd /etc/httpd/conf\nvi httpd.conf\n```\n\n```vim:httpd.conf\n- #Include conf/extra/httpd-vhosts.conf\n+ Include conf/extra/httpd-vhosts.conf\n```\n\nVirtualHost\u3092\u8a2d\u5b9a\u3059\u308b\n\n```bash\ncd /etc/httpd/conf/extra/\nvi httpd-vhosts.conf\n```\n\n```vim:httpd-vhosts.conf\n#### ghost\n<VirtualHost *:80>\n    ServerAdmin wwwadmin@example.com\n    DocumentRoot \"/srv/http/ghost/\"\n    ServerName example.com\n    ServerAlias www.example.com\n    AddDefaultCharset Off\n    ErrorLog \"/var/log/httpd/www.example.com/error_log\"\n    CustomLog \"/var/log/httpd/www.example.com/access_log\" common\n    <Proxy *>\n        order deny,allow\n        allow from 127.0.0.1\n    </Proxy>\n    <IfModule mod_proxy.c>\n        ProxyPass / http://localhost:2368/\n        ProxyPassReverse / http://localhost:2368/\n        ProxyPreserveHost On\n    </IfModule>\n</VirtualHost>\n```\nApache\u304c\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b\u3088\u3046\u8a2d\u5b9a\n\n```bash\nsystemctl enable httpd.service\nsystemctl start httpd.service\n```\nApache\u3092\u8d77\u52d5\u3059\u308b\u3002\n\n```bash\nsystemctl start httpd.service\n```\n\n### pm2\u3067index.js\u3092daemon\u5316\u3059\u308b\n\npm2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\ncd /srv/http/ghost\nnpm install pm2\n```\n\n\u4e00\u5fdc\u8d77\u52d5\u3055\u305b\u308b\u3002\n\n```bash\npm2 start /srv/http/ghost/index.js -i max\npm2 list\n```\n\n### \u30b5\u30fc\u30d0\u8d77\u52d5\u6642\u306bindex.js\u304c\u81ea\u52d5\u3067\u8d77\u52d5\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3059\u308b\n\n/usr/lib/systemd/system\u3078\u79fb\u52d5\u3057\u3001ghost.service\u3092\u4f5c\u6210\n\n```bash\ncd /usr/lib/systemd/system/\nvi ghost.service\n```\n\n```vim:ghost.service\n[Unit]\nDescription=Ghost service\n# Make sure we have functional network and logging available\nAfter=syslog.target\nAfter=network.target\n\n[Service]\n# Optional, assign custom user and group for this service\nUser=root\nGroup=root\n# Allow process forking\nExecStart=/usr/bin/pm2 start /srv/http/ghost/index.js -i max\n#ExecStop=/usr/bin/pm2 stop all\n#ExecReload=/usr/bin/pm2 restart all\nType=forking\n# Give a reasonable amount of time for the server to start up/shut down\nTimeoutSec=10\n\n[Install]\nWantedBy=multi-user.target\n```\n", "tags": ["mariadb5.5.33a", "Arch_Linux", "Apache2.2", "systemd", "Ghost0.3.3"]}