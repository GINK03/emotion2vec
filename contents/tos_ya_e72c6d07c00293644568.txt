{"tags": ["linebot"], "context": "\n\n\u306f\u3058\u3081\u306b\n\u8a71\u984c\u306eLINE BOT API\u3067\u30aa\u30a6\u30e0\u8fd4\u3057\u3059\u308bBOT\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\u65e2\u306b\u591a\u304f\u306e\u95a2\u9023\u8a18\u4e8b\u304c\u51fa\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\nLINE BOT API\u3092\u4f7f\u3063\u3066\u7ffb\u8a33BOT\u3092\u4f5c\u3063\u3066\u307f\u305f\u3088\uff01\uff01\n\n\n\u6e96\u5099\n\n\nLINE BUSINESS CENTER\u306b\u767b\u9332\nBOT\u306e\u60c5\u5831\u3092\u767b\u9332\nCallbackURL\u306e\u8a2d\u5b9a\n\u56fa\u5b9aIP\u306e\u767b\u9332\n\n\nCallbackURL\n\n\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u3064\u3051\u308b\n\n\nhttps://example.com:443/callback\n\n\n\n\nRails\n\nrequire 'rest-client'\n\nclass LineBotController < ApplicationController\n  protect_from_forgery with: :null_session\n\n  CHANNEL_ID     = ENV[\"YOUR_CHANNEL_ID\"]\n  CHANNEL_SECRET = ENV[\"YOUR_CHANNEL_SECRET\"]\n  CHANNEL_MID    = ENV[\"YOUR_CHANNEL_MID\"]\n\n  def callback\n    http_request_body = request.raw_post\n    hash = OpenSSL::HMAC::digest(OpenSSL::Digest::SHA256.new, CHANNEL_SECRET, http_request_body)\n    signature = Base64.strict_encode64(hash)\n    if signature != request.headers[\"X-LINE-CHANNELSIGNATURE\"]\n        render json: [], status: :ng\n        return\n    end\n\n    from = params[:result][0][:content][:from]\n    text = params[:result][0][:content][:text]\n\n    line_messaging(from, text)\n    render json: [], status: :ok\n  end\n\n  private\n\n  def line_messaging to, text\n      request_headers = {\n          \"Content-Type\": \"application/json\",\n          \"X-Line-ChannelID\": CHANNEL_ID,\n          \"X-Line-ChannelSecret\": CHANNEL_SECRET,\n          \"X-Line-Trusted-User-With-ACL\": CHANNEL_MID\n      }\n      request_params = {\n          to: [to],\n          toChannel: 1383378250, # Fixed value\n          eventType: \"138311608800106203\", # Fixed value\n          content:{\n            contentType: 1,\n            toType: 1,\n            text: text\n          }\n      }\n      RestClient.post 'https://trialbot-api.line.me/v1/events', request_params.to_json, request_headers\n  end\n\nend\n\n\n\n\u307e\u3068\u3081\n\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3070\u304b\u308a\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u65e2\u306b\u591a\u304f\u306e\u4eba\u304c\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u305f\u304a\u304b\u3052\u3067\u52d5\u304f\u3082\u306e\u3092\u3064\u304f\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002API\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u306a\u304c\u3081\u305f\u308a\u3001\u4ed6\u306e\u4eba\u306e\u8a18\u4e8b\u3092\u8aad\u3093\u3060\u308a\u3057\u306a\u304c\u3089\u3001\u4f55\u304c\u3067\u304d\u308b\u304b\u3092\u8003\u3048\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u53c2\u8003\u8a18\u4e8b\n\nLINE BOT API\u3092\u4f7f\u3063\u3066\u7ffb\u8a33BOT\u3092\u4f5c\u3063\u3066\u307f\u305f\u3088\uff01\uff01\nAPI reference for BOT API\nRails Heroku\u3067LINE BOT\u3092\u8a66\u3057\u3066\u307f\u305f\nLINE BOT API \u3092\u4f7f\u3044\u3001\u533f\u540d\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u3092\u4f5c\u308b\nLINE BOT API\u3067\u4eca\u65e5\u306e\u30e9\u30f3\u30c1\u3092\u691c\u7d22\u3059\u308b\n\u3068\u308a\u3042\u3048\u305aLINE BOT API\u3067\u30aa\u30a6\u30e0\u3092\u4f5c\u3063\u3066\u307f\u305f\n\n## \u306f\u3058\u3081\u306b\n\u8a71\u984c\u306eLINE BOT API\u3067\u30aa\u30a6\u30e0\u8fd4\u3057\u3059\u308bBOT\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\u65e2\u306b\u591a\u304f\u306e\u95a2\u9023\u8a18\u4e8b\u304c\u51fa\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\n* [LINE BOT API\u3092\u4f7f\u3063\u3066\u7ffb\u8a33BOT\u3092\u4f5c\u3063\u3066\u307f\u305f\u3088\uff01\uff01](http://tech.itandi.co.jp/2016/04/line-bot-api/)\n\n## \u6e96\u5099\n\n* [LINE BUSINESS CENTER](https://business.line.me/ja/products/4/introduction)\u306b\u767b\u9332\n* BOT\u306e\u60c5\u5831\u3092\u767b\u9332\n* CallbackURL\u306e\u8a2d\u5b9a\n* \u56fa\u5b9aIP\u306e\u767b\u9332\n\n### CallbackURL\n* \u30dd\u30fc\u30c8\u756a\u53f7\u3092\u3064\u3051\u308b\n    * https://example.com:443/callback\n\n## Rails\n\n```rb\n\nrequire 'rest-client'\n\nclass LineBotController < ApplicationController\n  protect_from_forgery with: :null_session\n\n  CHANNEL_ID     = ENV[\"YOUR_CHANNEL_ID\"]\n  CHANNEL_SECRET = ENV[\"YOUR_CHANNEL_SECRET\"]\n  CHANNEL_MID    = ENV[\"YOUR_CHANNEL_MID\"]\n\n  def callback\n    http_request_body = request.raw_post\n    hash = OpenSSL::HMAC::digest(OpenSSL::Digest::SHA256.new, CHANNEL_SECRET, http_request_body)\n    signature = Base64.strict_encode64(hash)\n    if signature != request.headers[\"X-LINE-CHANNELSIGNATURE\"]\n        render json: [], status: :ng\n        return\n    end\n\n    from = params[:result][0][:content][:from]\n    text = params[:result][0][:content][:text]\n\n    line_messaging(from, text)\n    render json: [], status: :ok\n  end\n\n  private\n\n  def line_messaging to, text\n      request_headers = {\n          \"Content-Type\": \"application/json\",\n          \"X-Line-ChannelID\": CHANNEL_ID,\n          \"X-Line-ChannelSecret\": CHANNEL_SECRET,\n          \"X-Line-Trusted-User-With-ACL\": CHANNEL_MID\n      }\n      request_params = {\n          to: [to],\n          toChannel: 1383378250, # Fixed value\n          eventType: \"138311608800106203\", # Fixed value\n          content:{\n            contentType: 1,\n            toType: 1,\n            text: text\n          }\n      }\n      RestClient.post 'https://trialbot-api.line.me/v1/events', request_params.to_json, request_headers\n  end\n\nend\n\n```\n\n## \u307e\u3068\u3081\n\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u3070\u304b\u308a\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u65e2\u306b\u591a\u304f\u306e\u4eba\u304c\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u305f\u304a\u304b\u3052\u3067\u52d5\u304f\u3082\u306e\u3092\u3064\u304f\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\u3002API\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u3092\u306a\u304c\u3081\u305f\u308a\u3001\u4ed6\u306e\u4eba\u306e\u8a18\u4e8b\u3092\u8aad\u3093\u3060\u308a\u3057\u306a\u304c\u3089\u3001\u4f55\u304c\u3067\u304d\u308b\u304b\u3092\u8003\u3048\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u53c2\u8003\u8a18\u4e8b\n* [LINE BOT API\u3092\u4f7f\u3063\u3066\u7ffb\u8a33BOT\u3092\u4f5c\u3063\u3066\u307f\u305f\u3088\uff01\uff01](http://tech.itandi.co.jp/2016/04/line-bot-api/)\n* [API reference for BOT API](https://developers.line.me/bot-api/api-reference)\n* [Rails Heroku\u3067LINE BOT\u3092\u8a66\u3057\u3066\u307f\u305f](http://qiita.com/Arahabica/items/98e3d0d5b65269386dc4)\n* [LINE BOT API \u3092\u4f7f\u3044\u3001\u533f\u540d\u30c1\u30e3\u30c3\u30c8\u30eb\u30fc\u30e0\u3092\u4f5c\u308b](http://qiita.com/masuhajime/items/9e7d08e202c9a833bcdd)\n* [LINE BOT API\u3067\u4eca\u65e5\u306e\u30e9\u30f3\u30c1\u3092\u691c\u7d22\u3059\u308b](http://qiita.com/ichikawa_0829/items/2e640e162976ec341ff1)\n* [\u3068\u308a\u3042\u3048\u305aLINE BOT API\u3067\u30aa\u30a6\u30e0\u3092\u4f5c\u3063\u3066\u307f\u305f](http://qiita.com/masuidrive/items/1042d93740a7a72242a3)\n"}