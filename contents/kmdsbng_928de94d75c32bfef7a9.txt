{"context": " More than 1 year has passed since last update.\n2012-11-21 \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u305f\u6642\u3001\u4f8b\u5916\u3092\u51fa\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3067\u304d\u306a\u3044\u72b6\u614b\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u30d0\u30b0\u3092\u4fee\u6b63\u3057\u307e\u3057\u305f\n\nbinding.pry\u3084\u30c7\u30d0\u30c3\u30ac\u306e\u30d6\u30ec\u30fc\u30af\u30dd\u30a4\u30f3\u30c8\u306a\u3069\u3001\u30b3\u30df\u30c3\u30c8\u524d\u306b\u524a\u9664\u3059\u3079\u304d\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3046\u3044\u3046\u30b3\u30df\u30c3\u30c8\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u542b\u307e\u308c\u3066\u305f\u3089\u3001\u30b3\u30df\u30c3\u30c8\u306b\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3001\nMercurial\u306e\u8a2d\u5b9a\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u30d5\u30c3\u30af\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\n~/.hg/prevent_ngword.py\nfrom mercurial import hg, ui, util\n\nng_words = ['binding.pry', 'DONTCOMMIT']\n\ndef hook(ui, repo, **kwargs):\n  current_context = repo[None]\n  for file_name in current_context.files():\n    if (not file_name.endswith('.rb')) and (not file_name.endswith('.erb')) and (not file_name.endswith('.haml')):\n      continue\n    file_context = current_context.filectx(file_name)\n    try:\n      file_context.size() # for file exists check\n    except:\n      continue\n\n    file_data = file_context.data()\n    for ng_word in ng_words:\n      if ng_word in file_data:\n        raise util.Abort(\"File %s contains forbidden string %s\" % (file_name, ng_word))\n  return False\n\n\n\n\n~/.hgrc \u306b\u4ee5\u4e0b\u306e\u8a18\u8ff0\u3092\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n.hgrc\n[hooks]\nprecommit.prevent_ngword = python:~/.hg/prevent_ngword.py:hook\n\n\n~/.hgrc\u3067\u306f\u306a\u304f\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306e .hg/hgrc \u306b\u66f8\u3044\u3066\u3082OK\u3067\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5236\u9650\u3068\u304bNG\u30ef\u30fc\u30c9\u306e\u5b9a\u7fa9\u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\u4ee5\u4e0a\u3067\u3059\u3002\n\u3053\u306eTips\u306f\u3001https://gist.github.com/1183543 \u306e\u30b3\u30fc\u30c9\u3092\u307b\u307c\u4e38\u3005\u3044\u305f\u3060\u3044\u3066\u3001\u8aac\u660e\u88dc\u8db3\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n* 2012-11-21 \u30d5\u30a1\u30a4\u30eb\u3092\u524a\u9664\u3057\u305f\u6642\u3001\u4f8b\u5916\u3092\u51fa\u3057\u3066\u30b3\u30df\u30c3\u30c8\u3067\u304d\u306a\u3044\u72b6\u614b\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u30d0\u30b0\u3092\u4fee\u6b63\u3057\u307e\u3057\u305f\n\nbinding.pry\u3084\u30c7\u30d0\u30c3\u30ac\u306e\u30d6\u30ec\u30fc\u30af\u30dd\u30a4\u30f3\u30c8\u306a\u3069\u3001\u30b3\u30df\u30c3\u30c8\u524d\u306b\u524a\u9664\u3059\u3079\u304d\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u3053\u3046\u3044\u3046\u30b3\u30df\u30c3\u30c8\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u30ad\u30fc\u30ef\u30fc\u30c9\u304c\u542b\u307e\u308c\u3066\u305f\u3089\u3001\u30b3\u30df\u30c3\u30c8\u306b\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3001\nMercurial\u306e\u8a2d\u5b9a\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n* \u30d5\u30c3\u30af\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```python:~/.hg/prevent_ngword.py\nfrom mercurial import hg, ui, util\n\nng_words = ['binding.pry', 'DONTCOMMIT']\n\ndef hook(ui, repo, **kwargs):\n  current_context = repo[None]\n  for file_name in current_context.files():\n    if (not file_name.endswith('.rb')) and (not file_name.endswith('.erb')) and (not file_name.endswith('.haml')):\n      continue\n    file_context = current_context.filectx(file_name)\n    try:\n      file_context.size() # for file exists check\n    except:\n      continue\n\n    file_data = file_context.data()\n    for ng_word in ng_words:\n      if ng_word in file_data:\n        raise util.Abort(\"File %s contains forbidden string %s\" % (file_name, ng_word))\n  return False\n\n```\n\n* ~/.hgrc \u306b\u4ee5\u4e0b\u306e\u8a18\u8ff0\u3092\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```hgrc:.hgrc\n[hooks]\nprecommit.prevent_ngword = python:~/.hg/prevent_ngword.py:hook\n```\n\n~/.hgrc\u3067\u306f\u306a\u304f\u3066\u3001\u30ea\u30dd\u30b8\u30c8\u30ea\u76f4\u4e0b\u306e .hg/hgrc \u306b\u66f8\u3044\u3066\u3082OK\u3067\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u5236\u9650\u3068\u304bNG\u30ef\u30fc\u30c9\u306e\u5b9a\u7fa9\u306f\u9069\u5b9c\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\n\u3053\u306eTips\u306f\u3001https://gist.github.com/1183543 \u306e\u30b3\u30fc\u30c9\u3092\u307b\u307c\u4e38\u3005\u3044\u305f\u3060\u3044\u3066\u3001\u8aac\u660e\u88dc\u8db3\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n\n", "tags": ["Mercurial"]}