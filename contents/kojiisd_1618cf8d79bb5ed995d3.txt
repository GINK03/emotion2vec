{"tags": ["Apache", "storm", "StreamingAPI"], "context": "Apache Storm 1.0.0\u3092\u4f7f\u3063\u3066\u307f\u308b\u30b7\u30ea\u30fc\u30ba\u306e\uff13\u56de\u76ee\u3067\u3059\u3002\u4eca\u307e\u3067\u306f\u3053\u3093\u306a\u306e\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\nApache Storm 1.0.0\u3092\u4f7f\u3063\u3066\u307f\u308b Distributed Cache API\u7de8\nApache Storm 1.0.0\u3092\u4f7f\u3063\u3066\u307f\u308b Storm UI\u7de8\n\u4eca\u56de\u306fNative Streaming Window API\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\nTopology\u306e\u8d77\u52d5\nSlidingWindowTopology\u304c\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n# bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n\n\nSlidingWindowTopology\n$ bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\nRunning: /Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/bin/java -client -Ddaemon.name= -Dstorm.options= -Dstorm.home=/opt/apache-storm-1.0.0 -Dstorm.log.dir=/opt/apache-storm-1.0.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin -Dstorm.jar=examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n3712 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:host.name=192.168.10.100\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.version=1.8.0_66\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.vendor=Oracle Corporation\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.compiler=<NA>\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.name=Mac OS X\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.arch=x86_64\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.version=10.11.4\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.name=KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.home=/Users/KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.dir=/opt/apache-storm-1.0.0\n3736 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2 snapdir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2\n3760 [main] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - binding to port 0.0.0.0/0.0.0.0:2000\n3766 [main] INFO  o.a.s.zookeeper - Starting inprocess zookeeper at port 2000 and dir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//bd026224-c71e-4395-b96f-9ab3551b5c60\n3944 [main] INFO  o.a.s.d.nimbus - Starting Nimbus with conf {\"topology.builtin.metrics.bucket.size.secs\" 60, \"nimbus.childopts\" \"-Xmx1024m\", \"ui.filter.params\" nil, \"storm.cluster.mode\" \"local\", \"storm.messaging.netty.client_worker_threads\" 1, \"logviewer.max.per.worker.logs.size.mb\" 2048, \"supervisor.run.worker.as.user\" false, \"topology.max.task.parallelism\" nil, \"topology.priority\" 29, \"zmq.threads\" 1, \"storm.group.mapping.service\" \"org.apache.storm.security.auth.ShellBasedGroupsMapping\", \"transactional.zookeeper.root\" \"/transactional\", \"topology.sleep.spout.wait.strategy.time.ms\" 1, \"scheduler.display.resource\" false, \"topology.max.replication.wait.time.sec\" 60, \"drpc.invocations.port\" 3773, \"supervisor.localizer.cache.target.size.mb\" 10240, \"topology.multilang.serializer\" \"org.apache.storm.multilang.JsonSerializer\", \"storm.messaging.netty.server_worker_threads\" 1, \"nimbus.blobstore.class\" \"org.apache.storm.blobstore.LocalFsBlobStore\", \"resource.aware.scheduler.eviction.strategy\" \"org.apache.storm.scheduler.resource.strategies.eviction.DefaultEvictionStrategy\", \"topology.max.error.report.per.interval\" 5, \"storm.thrift.transport\" \"org.apache.storm.security.auth.SimpleTransportPlugin\", \"zmq.hwm\" 0, \"storm.group.mapping.service.params\" nil, \"worker.profiler.enabled\" false, \"storm.principal.tolocal\" \"org.apache.storm.security.auth.DefaultPrincipalToLocal\", \"supervisor.worker.shutdown.sleep.secs\" 1, \"pacemaker.host\" \"localhost\", \"storm.zookeeper.retry.times\" 5, \"ui.actions.enabled\" true, \"zmq.linger.millis\" 0, \"supervisor.enable\" true, \"topology.stats.sample.rate\" 0.05, \"storm.messaging.netty.min_wait_ms\" 100, \"worker.log.level.reset.poll.secs\" 30, \"storm.zookeeper.port\" 2000, \"supervisor.heartbeat.frequency.secs\" 5, \"topology.enable.message.timeouts\" true, \"supervisor.cpu.capacity\" 400.0, \"drpc.worker.threads\" 64, \"supervisor.blobstore.download.thread.count\" 5, \"drpc.queue.size\" 128, \"topology.backpressure.enable\" true, \"supervisor.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"storm.blobstore.inputstream.buffer.size.bytes\" 65536, \"topology.shellbolt.max.pending\" 100, \"drpc.https.keystore.password\" \"\", \"nimbus.code.sync.freq.secs\" 120, \"logviewer.port\" 8000, \"topology.scheduler.strategy\" \"org.apache.storm.scheduler.resource.strategies.scheduling.DefaultResourceAwareStrategy\", \"topology.executor.send.buffer.size\" 1024, \"resource.aware.scheduler.priority.strategy\" \"org.apache.storm.scheduler.resource.strategies.priority.DefaultSchedulingPriorityStrategy\", \"pacemaker.auth.method\" \"NONE\", \"storm.daemon.metrics.reporter.plugins\" [\"org.apache.storm.daemon.metrics.reporters.JmxPreparableReporter\"], \"topology.worker.logwriter.childopts\" \"-Xmx64m\", \"topology.spout.wait.strategy\" \"org.apache.storm.spout.SleepSpoutWaitStrategy\", \"ui.host\" \"0.0.0.0\", \"storm.nimbus.retry.interval.millis\" 2000, \"nimbus.inbox.jar.expiration.secs\" 3600, \"dev.zookeeper.path\" \"/tmp/dev-storm-zookeeper\", \"topology.acker.executors\" nil, \"topology.fall.back.on.java.serialization\" true, \"topology.eventlogger.executors\" 0, \"supervisor.localizer.cleanup.interval.ms\" 600000, \"storm.zookeeper.servers\" [\"localhost\"], \"nimbus.thrift.threads\" 64, \"logviewer.cleanup.age.mins\" 10080, \"topology.worker.childopts\" nil, \"topology.classpath\" nil, \"supervisor.monitor.frequency.secs\" 3, \"nimbus.credential.renewers.freq.secs\" 600, \"topology.skip.missing.kryo.registrations\" true, \"drpc.authorizer.acl.filename\" \"drpc-auth-acl.yaml\", \"pacemaker.kerberos.users\" [], \"storm.group.mapping.service.cache.duration.secs\" 120, \"topology.testing.always.try.serialize\" false, \"nimbus.monitor.freq.secs\" 10, \"storm.health.check.timeout.ms\" 5000, \"supervisor.supervisors\" [], \"topology.tasks\" nil, \"topology.bolts.outgoing.overflow.buffer.enable\" false, \"storm.messaging.netty.socket.backlog\" 500, \"topology.workers\" 1, \"pacemaker.base.threads\" 10, \"storm.local.dir\" \"/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//db374078-fd57-4aeb-b7df-537f90929bc4\", \"topology.disable.loadaware\" false, \"worker.childopts\" \"-Xmx%HEAP-MEM%m -XX:+PrintGCDetails -Xloggc:artifacts/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=1M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=artifacts/heapdump\", \"storm.auth.simple-white-list.users\" [], \"topology.disruptor.batch.timeout.millis\" 1, \"topology.message.timeout.secs\" 30, \"topology.state.synchronization.timeout.secs\" 60, \"topology.tuple.serializer\" \"org.apache.storm.serialization.types.ListDelegateSerializer\", \"supervisor.supervisors.commands\" [], \"nimbus.blobstore.expiration.secs\" 600, \"logviewer.childopts\" \"-Xmx128m\", \"topology.environment\" nil, \"topology.debug\" false, \"topology.disruptor.batch.size\" 100, \"storm.messaging.netty.max_retries\" 300, \"ui.childopts\" \"-Xmx768m\", \"storm.network.topography.plugin\" \"org.apache.storm.networktopography.DefaultRackDNSToSwitchMapping\", \"storm.zookeeper.session.timeout\" 20000, \"drpc.childopts\" \"-Xmx768m\", \"drpc.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.connection.timeout\" 15000, \"storm.zookeeper.auth.user\" nil, \"storm.meta.serialization.delegate\" \"org.apache.storm.serialization.GzipThriftSerializationDelegate\", \"topology.max.spout.pending\" nil, \"storm.codedistributor.class\" \"org.apache.storm.codedistributor.LocalFileSystemCodeDistributor\", \"nimbus.supervisor.timeout.secs\" 60, \"nimbus.task.timeout.secs\" 30, \"drpc.port\" 3772, \"pacemaker.max.threads\" 50, \"storm.zookeeper.retry.intervalceiling.millis\" 30000, \"nimbus.thrift.port\" 6627, \"storm.auth.simple-acl.admins\" [], \"topology.component.cpu.pcore.percent\" 10.0, \"supervisor.memory.capacity.mb\" 3072.0, \"storm.nimbus.retry.times\" 5, \"supervisor.worker.start.timeout.secs\" 120, \"storm.zookeeper.retry.interval\" 1000, \"logs.users\" nil, \"worker.profiler.command\" \"flight.bash\", \"transactional.zookeeper.port\" nil, \"drpc.max_buffer_size\" 1048576, \"pacemaker.thread.timeout\" 10, \"task.credentials.poll.secs\" 30, \"blobstore.superuser\" \"KojiIshida\", \"drpc.https.keystore.type\" \"JKS\", \"topology.worker.receiver.thread.count\" 1, \"topology.state.checkpoint.interval.ms\" 1000, \"supervisor.slots.ports\" [6700 6701 6702 6703], \"topology.transfer.buffer.size\" 1024, \"storm.health.check.dir\" \"healthchecks\", \"topology.worker.shared.thread.pool.size\" 4, \"drpc.authorizer.acl.strict\" false, \"nimbus.file.copy.expiration.secs\" 600, \"worker.profiler.childopts\" \"-XX:+UnlockCommercialFeatures -XX:+FlightRecorder\", \"topology.executor.receive.buffer.size\" 1024, \"backpressure.disruptor.low.watermark\" 0.4, \"nimbus.task.launch.secs\" 120, \"storm.local.mode.zmq\" false, \"storm.messaging.netty.buffer_size\" 5242880, \"storm.cluster.state.store\" \"org.apache.storm.cluster_state.zookeeper_state_factory\", \"worker.heartbeat.frequency.secs\" 1, \"storm.log4j2.conf.dir\" \"log4j2\", \"ui.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.root\" \"/storm\", \"topology.tick.tuple.freq.secs\" nil, \"drpc.https.port\" -1, \"storm.workers.artifacts.dir\" \"workers-artifacts\", \"supervisor.blobstore.download.max_retries\" 3, \"task.refresh.poll.secs\" 10, \"storm.exhibitor.port\" 8080, \"task.heartbeat.frequency.secs\" 3, \"pacemaker.port\" 6699, \"storm.messaging.netty.max_wait_ms\" 1000, \"nimbus.impersonation.authorizer\" \"org.apache.storm.security.auth.authorizer.ImpersonationAuthorizer\", \"topology.component.resources.offheap.memory.mb\" 0.0, \"drpc.http.port\" 3774, \"topology.error.throttle.interval.secs\" 10, \"storm.messaging.transport\" \"org.apache.storm.messaging.netty.Context\", \"storm.messaging.netty.authentication\" false, \"topology.component.resources.onheap.memory.mb\" 128.0, \"topology.kryo.factory\" \"org.apache.storm.serialization.DefaultKryoFactory\", \"worker.gc.childopts\" \"\", \"nimbus.topology.validator\" \"org.apache.storm.nimbus.DefaultTopologyValidator\", \"nimbus.seeds\" [\"0.0.0.0\"], \"nimbus.queue.size\" 100000, \"nimbus.cleanup.inbox.freq.secs\" 600, \"storm.blobstore.replication.factor\" 3, \"worker.heap.memory.mb\" 768, \"logviewer.max.sum.worker.logs.size.mb\" 4096, \"pacemaker.childopts\" \"-Xmx1024m\", \"ui.users\" nil, \"transactional.zookeeper.servers\" nil, \"supervisor.worker.timeout.secs\" 30, \"storm.zookeeper.auth.password\" nil, \"client.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"supervisor.childopts\" \"-Xmx256m\", \"topology.worker.max.heap.size.mb\" 768.0, \"backpressure.disruptor.high.watermark\" 0.9, \"ui.filter\" nil, \"ui.header.buffer.bytes\" 4096, \"topology.min.replication.count\" 1, \"topology.disruptor.wait.timeout.millis\" 1000, \"storm.nimbus.retry.intervalceiling.millis\" 60000, \"topology.trident.batch.emit.interval.millis\" 50, \"storm.auth.simple-acl.users\" [], \"drpc.invocations.threads\" 64, \"java.library.path\" \"/usr/local/lib:/opt/local/lib:/usr/lib\", \"ui.port\" 8080, \"storm.exhibitor.poll.uripath\" \"/exhibitor/v1/cluster/list\", \"storm.messaging.netty.transfer.batch.size\" 262144, \"logviewer.appender.name\" \"A1\", \"nimbus.thrift.max_buffer_size\" 1048576, \"storm.auth.simple-acl.users.commands\" [], \"drpc.request.timeout.secs\" 600}\n3948 [main] INFO  o.a.s.d.nimbus - Using default scheduler\n3999 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:host.name=192.168.10.100\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.version=1.8.0_66\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.vendor=Oracle Corporation\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.compiler=<NA>\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.name=Mac OS X\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.arch=x86_64\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.version=10.11.4\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.name=KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.home=/Users/KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.dir=/opt/apache-storm-1.0.0\n4005 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@77c3c037\n4031 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4047 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4048 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000/storm sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@52226e57\n4050 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4055 [main] INFO  o.a.s.b.FileBlobStoreImpl - Creating new blob store based in /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/db374078-fd57-4aeb-b7df-537f90929bc4/blobs\n4104 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4106 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60125\n4108 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4110 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60126\n4111 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4112 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60125\n4113 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@68b734a8\n4114 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60126\n4115 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.p.FileTxnLog - Creating new log file: log.1\n4117 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2000. Will not attempt to authenticate using SASL (unknown error)\n4118 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/0:0:0:0:0:0:0:1:2000, initiating session\n4118 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /0:0:0:0:0:0:0:1:60127\n4119 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /0:0:0:0:0:0:0:1:60127\n4153 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500000 with negotiated timeout 20000 for client /127.0.0.1:60125\n4153 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500000, negotiated timeout = 20000\n4155 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500001 with negotiated timeout 20000 for client /127.0.0.1:60126\n4155 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500001, negotiated timeout = 20000\n4157 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500002 with negotiated timeout 20000 for client /0:0:0:0:0:0:0:1:60127\n4157 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2000, sessionid = 0x154488b21500002, negotiated timeout = 20000\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n\n\n\u306a\u306b\u3084\u3089\u5927\u91cf\u306b\u30ed\u30b0\u304c\u51fa\u3066\u304d\u307e\u3057\u305f\u3002\u3068\u3044\u3046\u304b\u51fa\u7d9a\u3051\u307e\u3059\u3002\n\u4f55\u304c\u8d77\u3053\u3063\u305f\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u5c11\u3057\u30bd\u30fc\u30b9\u3092\u8aad\u3080\u3053\u3068\u306b\u3002\n\nSlidingWindowTopology.java\u3092\u898b\u3066\u307f\u308b\u3002\n\u30ad\u30fc\u3068\u306a\u308b\u306e\u306f\u3053\u306e\u8fba\u3067\u3059\u304b\u306d\u3002\n\nSlidingWindowTopology.java\n    public static void main(String[] args) throws Exception {\n        TopologyBuilder builder = new TopologyBuilder();\n        builder.setSpout(\"integer\", new RandomIntegerSpout(), 1);\n        builder.setBolt(\"slidingsum\", new SlidingWindowSumBolt().withWindow(new Count(30), new Count(10)), 1)\n                .shuffleGrouping(\"integer\");\n        builder.setBolt(\"tumblingavg\", new TumblingWindowAvgBolt().withTumblingWindow(new Count(3)), 1)\n                .shuffleGrouping(\"slidingsum\");\n        builder.setBolt(\"printer\", new PrinterBolt(), 1).shuffleGrouping(\"tumblingavg\");\n        Config conf = new Config();\n        conf.setDebug(true);\n        if (args != null && args.length > 0) {\n            conf.setNumWorkers(1);\n            StormSubmitter.submitTopologyWithProgressBar(args[0], conf, builder.createTopology());\n        } else {\n            LocalCluster cluster = new LocalCluster();\n            cluster.submitTopology(\"test\", conf, builder.createTopology());\n            Utils.sleep(40000);\n            cluster.killTopology(\"test\");\n            cluster.shutdown();\n        }\n    }\n\n\n\u30e1\u30a4\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u30673\u3064\u306eBolt\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n- SlidingWindowSumBold\n- TumblingWindowAvgBolt\n- PrinterBolt\n\u5408\u8a08\u5024\u3092\u8a08\u7b97\u3059\u308bBolt\u3068\u3001\u5e73\u5747\u5024\u3092\u8a08\u7b97\u3059\u308bBolt\u3068\u3001\u305d\u308c\u3092\u8868\u793a\u3059\u308bBolt\u304c\u3042\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\u305d\u308c\u305e\u308c\u306eBolt\u306e\u4e2d\u306e\u30bd\u30fc\u30b9\u3092\u898b\u3066\u3001\u4f55\u3092\u3057\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u305f\u5f8c\u306b\u518d\u5ea6\u30ed\u30b0\u306e\u65b9\u3092\u898b\u3066\u307f\u308c\u3070\u3001\u4f55\u304b\u308f\u304b\u308a\u305d\u3046\u3067\u3059\u3002\n\n\u305d\u306e\u524d\u306bRandomIntegerSpout\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\nRandomIntegerSpout\u3068\u3044\u3046Spout\u304c\u3042\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u307e\u305a\u3053\u306e\u4e2d\u8eab\u304b\u3089\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\nRandomIntegerSpout.java\n    @Override\n    public void nextTuple() {\n        Utils.sleep(100);\n        collector.emit(new Values(rand.nextInt(1000), System.currentTimeMillis() - (24 * 60 * 60 * 1000), ++msgId), msgId);\n    }\n\n\n\u3044\u3044\u611f\u3058\u306b\u3068\u3066\u3082\u5358\u7d14\u3067\u3059\u306d\u30020\u301c999\u306e\u4e71\u6570\u3092\u767a\u751f\u3055\u305b\u3066\u3044\u308b\u3060\u3051\u306e\u3088\u3046\u3067\u3059\u3002\n\n\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bBolt\u306e\u30bd\u30fc\u30b9\u3092\u898b\u3066\u307f\u308b\n\nSlidingWindowSumBold\u3092\u898b\u3066\u307f\u308b\n\u3067\u306f\u3001Bolt\u306e\u78ba\u8a8d\u306b\u5165\u308a\u307e\u3059\u3002\u307e\u305a\u306fSlidingWindowSumBolt\n\nSlidingWindowSumBolt.java\n    @Override\n    public void execute(TupleWindow inputWindow) {\n            /*\n             * The inputWindow gives a view of\n             * (a) all the events in the window\n             * (b) events that expired since last activation of the window\n             * (c) events that newly arrived since last activation of the window\n             */\n        List<Tuple> tuplesInWindow = inputWindow.get();\n        List<Tuple> newTuples = inputWindow.getNew();\n        List<Tuple> expiredTuples = inputWindow.getExpired();\n\n        LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            /*\n             * Instead of iterating over all the tuples in the window to compute\n             * the sum, the values for the new events are added and old events are\n             * subtracted. Similar optimizations might be possible in other\n             * windowing computations.\n             */\n        for (Tuple tuple : newTuples) {\n            sum += (int) tuple.getValue(0);\n        }\n        for (Tuple tuple : expiredTuples) {\n            sum -= (int) tuple.getValue(0);\n        }\n        collector.emit(new Values(sum));\n    }\n\n\n\u3075\u3080\u3002\u53d7\u4fe1\u3057\u305fTuple\u306e\u4e2d\u8eab\u3092\u8db3\u3057\u5408\u308f\u305b\u3066\u3044\u307e\u3059\u304c\u3001expired\u306b\u306a\u3063\u305f\u3082\u306e\u306f\u6e1b\u7b97\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u306e\u8fba\u304cSlidingWindow\u3068\u95a2\u4fc2\u3057\u3066\u304f\u308b\u306e\u3067\u3057\u3087\u3046\u3002\u4f55\u306f\u3068\u3082\u3042\u308c\u3001\u30bd\u30fc\u30b9\u81ea\u4f53\u306f\u5358\u7d14\u3067\u3057\u305f\u3002\n\nTumblingWindowAvgBolt\u3092\u898b\u3066\u307f\u308b\n\u6b21\u306fTumblingWindowAvgBolt\u3067\u3059\u3002\u3053\u3061\u3089\u306fSlidingWindowTopology\u306b\u5185\u5305\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\nTumblingWindowAvgBolt.java\n        @Override\n        public void execute(TupleWindow inputWindow) {\n            int sum = 0;\n            List<Tuple> tuplesInWindow = inputWindow.get();\n            LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            if (tuplesInWindow.size() > 0) {\n                /*\n                * Since this is a tumbling window calculation,\n                * we use all the tuples in the window to compute the avg.\n                */\n                for (Tuple tuple : tuplesInWindow) {\n                    sum += (int) tuple.getValue(0);\n                }\n                collector.emit(new Values(sum / tuplesInWindow.size()));\n            }\n        }\n\n\n\u8a2d\u5b9a\u3055\u308c\u305fWindow\u306e\u30b5\u30a4\u30ba\u306b\u3088\u3063\u3066\u3001\u8db3\u3057\u5408\u308f\u305b\u3066\u304d\u305f\u5408\u8a08\u5024\u304b\u3089\u5e73\u5747\u5024\u3092\u51fa\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u305d\u3046\u3044\u3048\u3070main\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u3067\u306f\u3053\u306e\u8a2d\u5b9a\u5024\u306b3\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u304a\u305d\u3089\u304f3\u56de\u5408\u8a08\u5024\u3092\u53d7\u4fe1\u3057\u305f\u3089\u3001\u5e73\u5747\u5024\u306e\u7b97\u51fa\u3092\u3059\u308b\u306e\u3067\u3057\u3087\u3046\u3002\n\nPrinterBolt\u3092\u898b\u3066\u307f\u308b\n\u89e3\u8aac\u304c\u4e0d\u8981\u306a\u304f\u3089\u3044\u3001\u3068\u3066\u3082\u30b7\u30f3\u30d7\u30eb\u306a\u4f5c\u308a\u3067\u3057\u305f\u3002\n\nPrinterBolt.java\n  @Override\n  public void execute(Tuple tuple, BasicOutputCollector collector) {\n    System.out.println(tuple);\n  }\n\n\n\u3046\u3093\u3001\u3068\u3063\u3066\u3082\u5358\u7d14\u3002\n\n\u3053\u306eTopology\u306e\u52d5\u304d\u3092\u307e\u3068\u3081\u308b\u3068\n\u4e88\u60f3\u3067\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u306b\u52d5\u304f\u306f\u305a\u3067\u3059\u306d\u3002\n1. 0\u301c999\u306e\u4e71\u6570\u3092\u751f\u6210\u3057\u3066\u3001\u52a0\u7b97\u7528\u306eBolt\u306b\u9001\u4fe1\u3059\u308b\u3002\n2. \u53d7\u4fe1\u3057\u305fTuple\u306e\u6570\u5024\u309210\u56de\u8db3\u3057\u5408\u308f\u305b\u3066\u4fdd\u6301\u3059\u308b\u3002\n3. \u5e73\u5747\u5024\u8a08\u7b97\u7528\u306eBolt\u306b\u5408\u8a08\u5024\u3092\u9001\u4ed8\u3059\u308b\u3002\n4. 3\u56de\u5408\u8a08\u5024\u304c\u6e9c\u307e\u3063\u305f\u3089\u3001\u5e73\u5747\u5024\u3092\u7b97\u51fa\u3059\u308b\u3002\n\n\u51fa\u529b\u3055\u308c\u305f\u30ed\u30b0\u3092\u898b\u3066\u307f\u308b\n\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u3066\u3001\u51fa\u529b\u3055\u308c\u305f\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002main\u30e1\u30bd\u30c3\u30c9\u306b\u3088\u308c\u307040\u79d2\u3067\u5b9f\u65bd\u304c\u5b8c\u4e86\u3059\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u5f85\u3063\u3066\u307f\u307e\u3059\u3002\n22857 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Preparing bolt __system:(-1)\n22864 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Prepared bolt __system:(-1)\n22874 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opening spout integer:(2)\n22878 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opened spout integer:(2)\n22881 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Activating spout integer:(2)\n22887 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Preparing bolt tumblingavg:(5)\n22891 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Prepared bolt tumblingavg:(5)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Preparing bolt printer:(3)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Prepared bolt printer:(3)\n22900 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Preparing bolt slidingsum:(4)\n22901 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Prepared bolt slidingsum:(4)\n22950 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Preparing bolt __acker:(1)\n22952 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Prepared bolt __acker:(1)\n\n\u6700\u521d\u306b\u66f8\u304fSpout\u3068Bolt\u304c\u521d\u671f\u5316\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u306d\u3002\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6570\u5b57\u304c\u3001\u4eca\u5f8c\u898b\u308b\u4e0a\u3067\u5927\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n22988 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer default [778, 1462006953163, 1]\n22994 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n22995 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer __ack_init [7447250857071583863 -3578654789271241288 2]\n22996 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 1 tuple: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]]\n22997 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]\n22998 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1] TASK: 4 DELTA: \n22999 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n23000 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n\n\u3055\u3066\u3001\u65e9\u901f\u4e71\u6570\u304c\u4f5c\u6210\u3055\u308c\u3066Emit\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u30021\u756a\u76ee\u3068\u3057\u3066[778, 1462006953163, 1]\u3092\u9001\u4ed8\u3057\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\u3067\u3001\u305d\u306e\u6b21\u306e\u884c\u306b\nTRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n\n\u3068\u3044\u3046\u30ed\u30b0\u304c\u51fa\u3066\u3044\u307e\u3059\u304c\u30014\u756a\u76ee\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u300cslidingsum\u300d\u306b\u5411\u3051\u30662\u756a\u76ee\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u300cinteger\u300d\u304b\u3089\u30c7\u30fc\u30bf\u304c\u9001\u4ed8\u3055\u308c\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u610f\u5473\u306b\u306a\u308a\u307e\u3059\u3002\u6700\u521d\u306e\u521d\u671f\u5316\u3057\u3066\u3044\u305fID\u304c\u3053\u3053\u3067\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u3053\u306e\u3088\u3046\u306a\u3084\u308a\u53d6\u308a\u3092\u3057\u306a\u304c\u3089\u300110\u756a\u76ee\u307e\u3067\u9001\u4ed8\u3092\u7d9a\u3051\u3066\u3044\u307e\u3059\u3002\u3067\u300110\u756a\u76ee\u307e\u3067\u9001\u4ed8\u3092\u3059\u308b\u3068\u3001\u30ed\u30b0\u306e\u51fa\u529b\u306e\u3055\u308c\u65b9\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n23921 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {4389696495574006045=2681496747949810702}, [645, 1462006954095, 10]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2] TASK: 1 DELTA: \n23922 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [6050]\n23923 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=-1172784951702062669, 6973864295393994913=1708061666379587936, 7447250857071583863=5623972221711691701, -6102906463311307032=5518334604031423874, -7638682188827435429=4478428313701290490, 4389696495574006045=5932148635671668893, -6197802534174832134=1497464440461667439, -4266159872746606489=3561774369052512930, 4334659838991266401=-7106335497305084820, 4712299375428287216=3508884140400825778}, [6050]]\n\n\u5408\u8a08\u5024\u3068\u3057\u3066\u7b97\u51fa\u3055\u308c\u305f6050\u30925\u756a\u76ee\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u300ctumblingavg\u300d\u306b\u9001\u4ed8\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u30676050\u3068\u3044\u3046\u6570\u5024\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u304a\u305d\u3089\u304f\u3053\u308c\u30923\u56de\u7e70\u308a\u8fd4\u3059\u306e\u3067\u30012\u56de\u76ee\u30013\u56de\u76ee\u3067\u305d\u308c\u305e\u308c\u3069\u306e\u3088\u3046\u306a\u6570\u5024\u304c\u9001\u4ed8\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [11976]\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=492010799657169784, 317525622483766670=2638127789448427461, 3002989214851206566=128002525292759865, 7447250857071583863=8767372787937047960, -6102906463311307032=-4546730023383659346, 3562603101316339696=-7385522463102788783, -7547522651842339766=4915704745663260957, -8228450230436970384=-4055518290977434481, 6973864295393994913=6291843886548489067, -7638682188827435429=8441873508646088204, 4389696495574006045=-1674211243428697808, -6197802534174832134=2733983747371624992, 2558430164343979559=285379101380278186, -4266159872746606489=-6678113015319323641, 4334659838991266401=999638572688010822, 4712299375428287216=-2506689729719803634, -3288150160972036797=6163930983830697438, -6632312692089791299=4450995360647585394, 3635266110827390635=325375251356977723, 7564414229761366650=126552843783268400}, [11976]]\n:\n:\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [15909]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2] TASK: 1 DELTA: 1\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]]\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {-3948625081878221959=-8424958756548618666}, [34, 1462006956174, 30] TASK: 4 DELTA: \n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Processing received message FOR 5 TUPLE: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]\n\n20\u756a\u76ee\u306f11976\u300130\u756a\u76ee\u306f15909\u3067\u3059\u306d\u3002\u5bfe\u8c61\u3068\u306a\u308bID\u3082\u4e00\u7dd2\u306b\u9001\u4ed8\u3055\u308c\u308b\u306e\u3067\u3001\u3069\u3093\u3069\u3093\u30ed\u30b0\u304c\u9577\u304f\u306a\u3063\u3066\u3044\u304d\u307e\u3059\u3002\uff08\uff3e\uff3e\uff1b\u3067\u30013\u3064\u306e\u5408\u8a08\u5024\u304c\u305f\u307e\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u5e73\u5747\u5024\u306e\u8a08\u7b97\u304c\u3055\u308c\u307e\u3059\u3002\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.task - Emitting: tumblingavg default [11311]\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 3 tuple: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]]\n26004 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Execute done TUPLE source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909] TASK: 5 DELTA: \n26006 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Processing received message FOR 3 TUPLE: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\nsource: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\n\n(6050 + 11976 + 15909) / 3 = 11311.66666...\u3067\u3059\u306e\u3067\u3001\u5c0f\u6570\u70b9\u4ee5\u4e0b\u306f\u5207\u308a\u6368\u3066\u306e\u3088\u3046\u3067\u3059\u306d\u300211311\u304cPrinter\u7528\u306eBolt\u306b\u9001\u4ed8\u3055\u308c\u307e\u3057\u305f\u3002\n\u3053\u308c\u3067\u4e00\u901a\u308a\u306e\u52d5\u304d\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\nNative Streaming Window API\u3092\u632f\u308a\u8fd4\u308b\n\u3055\u3066\u3001\u4eca\u56deNative Streaming Window API\u3092\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u3053\u306eAPI\u306e\u6700\u5927\u306e\u7279\u5fb4\u306f\u3001\u3053\u308c\u3089\u306eSpout\u3084Bolt\u304c\u81ea\u524d\u3067\u4f5c\u308c\u308b\u3001\u3068\u3044\u3046\u3068\u3053\u308d\u3067\u3057\u3087\u3046\u304b\u3002\u4f5c\u308a\u65b9\u306f\u4ed6\u306eSpout\u3084Bolt\u3092\u53c2\u8003\u306b\u3059\u308c\u3070\u3001\u5272\u3068\u7c21\u5358\u306b\u5b9f\u88c5\u304c\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u3042\u308b\u7a0b\u5ea6\u6163\u308c\u3066\u304f\u308c\u3070\u3001\u4eca\u307e\u3067Siddhi\u306a\u3069\u3092\u4f7f\u3063\u3066Window\u5236\u5fa1\u3092\u3057\u3066\u3044\u305f\u3053\u3068\u306a\u3069\u304c\u3001Storm\u3060\u3051\u3067\u5b9f\u73fe\u53ef\u80fd\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\n\nEnglish translation\nI was requested from a Storm user to translate this article.\nFollowing contents are same meaning as above contents.\n\nTopology Start\nSlidingWindowTopology is used as a sample so I use it.\n# bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n\n\nSlidingWindowTopology\n$ bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\nRunning: /Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/bin/java -client -Ddaemon.name= -Dstorm.options= -Dstorm.home=/opt/apache-storm-1.0.0 -Dstorm.log.dir=/opt/apache-storm-1.0.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin -Dstorm.jar=examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n3712 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:host.name=192.168.10.100\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.version=1.8.0_66\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.vendor=Oracle Corporation\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.compiler=<NA>\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.name=Mac OS X\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.arch=x86_64\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.version=10.11.4\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.name=KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.home=/Users/KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.dir=/opt/apache-storm-1.0.0\n3736 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2 snapdir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2\n3760 [main] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - binding to port 0.0.0.0/0.0.0.0:2000\n3766 [main] INFO  o.a.s.zookeeper - Starting inprocess zookeeper at port 2000 and dir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//bd026224-c71e-4395-b96f-9ab3551b5c60\n3944 [main] INFO  o.a.s.d.nimbus - Starting Nimbus with conf {\"topology.builtin.metrics.bucket.size.secs\" 60, \"nimbus.childopts\" \"-Xmx1024m\", \"ui.filter.params\" nil, \"storm.cluster.mode\" \"local\", \"storm.messaging.netty.client_worker_threads\" 1, \"logviewer.max.per.worker.logs.size.mb\" 2048, \"supervisor.run.worker.as.user\" false, \"topology.max.task.parallelism\" nil, \"topology.priority\" 29, \"zmq.threads\" 1, \"storm.group.mapping.service\" \"org.apache.storm.security.auth.ShellBasedGroupsMapping\", \"transactional.zookeeper.root\" \"/transactional\", \"topology.sleep.spout.wait.strategy.time.ms\" 1, \"scheduler.display.resource\" false, \"topology.max.replication.wait.time.sec\" 60, \"drpc.invocations.port\" 3773, \"supervisor.localizer.cache.target.size.mb\" 10240, \"topology.multilang.serializer\" \"org.apache.storm.multilang.JsonSerializer\", \"storm.messaging.netty.server_worker_threads\" 1, \"nimbus.blobstore.class\" \"org.apache.storm.blobstore.LocalFsBlobStore\", \"resource.aware.scheduler.eviction.strategy\" \"org.apache.storm.scheduler.resource.strategies.eviction.DefaultEvictionStrategy\", \"topology.max.error.report.per.interval\" 5, \"storm.thrift.transport\" \"org.apache.storm.security.auth.SimpleTransportPlugin\", \"zmq.hwm\" 0, \"storm.group.mapping.service.params\" nil, \"worker.profiler.enabled\" false, \"storm.principal.tolocal\" \"org.apache.storm.security.auth.DefaultPrincipalToLocal\", \"supervisor.worker.shutdown.sleep.secs\" 1, \"pacemaker.host\" \"localhost\", \"storm.zookeeper.retry.times\" 5, \"ui.actions.enabled\" true, \"zmq.linger.millis\" 0, \"supervisor.enable\" true, \"topology.stats.sample.rate\" 0.05, \"storm.messaging.netty.min_wait_ms\" 100, \"worker.log.level.reset.poll.secs\" 30, \"storm.zookeeper.port\" 2000, \"supervisor.heartbeat.frequency.secs\" 5, \"topology.enable.message.timeouts\" true, \"supervisor.cpu.capacity\" 400.0, \"drpc.worker.threads\" 64, \"supervisor.blobstore.download.thread.count\" 5, \"drpc.queue.size\" 128, \"topology.backpressure.enable\" true, \"supervisor.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"storm.blobstore.inputstream.buffer.size.bytes\" 65536, \"topology.shellbolt.max.pending\" 100, \"drpc.https.keystore.password\" \"\", \"nimbus.code.sync.freq.secs\" 120, \"logviewer.port\" 8000, \"topology.scheduler.strategy\" \"org.apache.storm.scheduler.resource.strategies.scheduling.DefaultResourceAwareStrategy\", \"topology.executor.send.buffer.size\" 1024, \"resource.aware.scheduler.priority.strategy\" \"org.apache.storm.scheduler.resource.strategies.priority.DefaultSchedulingPriorityStrategy\", \"pacemaker.auth.method\" \"NONE\", \"storm.daemon.metrics.reporter.plugins\" [\"org.apache.storm.daemon.metrics.reporters.JmxPreparableReporter\"], \"topology.worker.logwriter.childopts\" \"-Xmx64m\", \"topology.spout.wait.strategy\" \"org.apache.storm.spout.SleepSpoutWaitStrategy\", \"ui.host\" \"0.0.0.0\", \"storm.nimbus.retry.interval.millis\" 2000, \"nimbus.inbox.jar.expiration.secs\" 3600, \"dev.zookeeper.path\" \"/tmp/dev-storm-zookeeper\", \"topology.acker.executors\" nil, \"topology.fall.back.on.java.serialization\" true, \"topology.eventlogger.executors\" 0, \"supervisor.localizer.cleanup.interval.ms\" 600000, \"storm.zookeeper.servers\" [\"localhost\"], \"nimbus.thrift.threads\" 64, \"logviewer.cleanup.age.mins\" 10080, \"topology.worker.childopts\" nil, \"topology.classpath\" nil, \"supervisor.monitor.frequency.secs\" 3, \"nimbus.credential.renewers.freq.secs\" 600, \"topology.skip.missing.kryo.registrations\" true, \"drpc.authorizer.acl.filename\" \"drpc-auth-acl.yaml\", \"pacemaker.kerberos.users\" [], \"storm.group.mapping.service.cache.duration.secs\" 120, \"topology.testing.always.try.serialize\" false, \"nimbus.monitor.freq.secs\" 10, \"storm.health.check.timeout.ms\" 5000, \"supervisor.supervisors\" [], \"topology.tasks\" nil, \"topology.bolts.outgoing.overflow.buffer.enable\" false, \"storm.messaging.netty.socket.backlog\" 500, \"topology.workers\" 1, \"pacemaker.base.threads\" 10, \"storm.local.dir\" \"/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//db374078-fd57-4aeb-b7df-537f90929bc4\", \"topology.disable.loadaware\" false, \"worker.childopts\" \"-Xmx%HEAP-MEM%m -XX:+PrintGCDetails -Xloggc:artifacts/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=1M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=artifacts/heapdump\", \"storm.auth.simple-white-list.users\" [], \"topology.disruptor.batch.timeout.millis\" 1, \"topology.message.timeout.secs\" 30, \"topology.state.synchronization.timeout.secs\" 60, \"topology.tuple.serializer\" \"org.apache.storm.serialization.types.ListDelegateSerializer\", \"supervisor.supervisors.commands\" [], \"nimbus.blobstore.expiration.secs\" 600, \"logviewer.childopts\" \"-Xmx128m\", \"topology.environment\" nil, \"topology.debug\" false, \"topology.disruptor.batch.size\" 100, \"storm.messaging.netty.max_retries\" 300, \"ui.childopts\" \"-Xmx768m\", \"storm.network.topography.plugin\" \"org.apache.storm.networktopography.DefaultRackDNSToSwitchMapping\", \"storm.zookeeper.session.timeout\" 20000, \"drpc.childopts\" \"-Xmx768m\", \"drpc.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.connection.timeout\" 15000, \"storm.zookeeper.auth.user\" nil, \"storm.meta.serialization.delegate\" \"org.apache.storm.serialization.GzipThriftSerializationDelegate\", \"topology.max.spout.pending\" nil, \"storm.codedistributor.class\" \"org.apache.storm.codedistributor.LocalFileSystemCodeDistributor\", \"nimbus.supervisor.timeout.secs\" 60, \"nimbus.task.timeout.secs\" 30, \"drpc.port\" 3772, \"pacemaker.max.threads\" 50, \"storm.zookeeper.retry.intervalceiling.millis\" 30000, \"nimbus.thrift.port\" 6627, \"storm.auth.simple-acl.admins\" [], \"topology.component.cpu.pcore.percent\" 10.0, \"supervisor.memory.capacity.mb\" 3072.0, \"storm.nimbus.retry.times\" 5, \"supervisor.worker.start.timeout.secs\" 120, \"storm.zookeeper.retry.interval\" 1000, \"logs.users\" nil, \"worker.profiler.command\" \"flight.bash\", \"transactional.zookeeper.port\" nil, \"drpc.max_buffer_size\" 1048576, \"pacemaker.thread.timeout\" 10, \"task.credentials.poll.secs\" 30, \"blobstore.superuser\" \"KojiIshida\", \"drpc.https.keystore.type\" \"JKS\", \"topology.worker.receiver.thread.count\" 1, \"topology.state.checkpoint.interval.ms\" 1000, \"supervisor.slots.ports\" [6700 6701 6702 6703], \"topology.transfer.buffer.size\" 1024, \"storm.health.check.dir\" \"healthchecks\", \"topology.worker.shared.thread.pool.size\" 4, \"drpc.authorizer.acl.strict\" false, \"nimbus.file.copy.expiration.secs\" 600, \"worker.profiler.childopts\" \"-XX:+UnlockCommercialFeatures -XX:+FlightRecorder\", \"topology.executor.receive.buffer.size\" 1024, \"backpressure.disruptor.low.watermark\" 0.4, \"nimbus.task.launch.secs\" 120, \"storm.local.mode.zmq\" false, \"storm.messaging.netty.buffer_size\" 5242880, \"storm.cluster.state.store\" \"org.apache.storm.cluster_state.zookeeper_state_factory\", \"worker.heartbeat.frequency.secs\" 1, \"storm.log4j2.conf.dir\" \"log4j2\", \"ui.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.root\" \"/storm\", \"topology.tick.tuple.freq.secs\" nil, \"drpc.https.port\" -1, \"storm.workers.artifacts.dir\" \"workers-artifacts\", \"supervisor.blobstore.download.max_retries\" 3, \"task.refresh.poll.secs\" 10, \"storm.exhibitor.port\" 8080, \"task.heartbeat.frequency.secs\" 3, \"pacemaker.port\" 6699, \"storm.messaging.netty.max_wait_ms\" 1000, \"nimbus.impersonation.authorizer\" \"org.apache.storm.security.auth.authorizer.ImpersonationAuthorizer\", \"topology.component.resources.offheap.memory.mb\" 0.0, \"drpc.http.port\" 3774, \"topology.error.throttle.interval.secs\" 10, \"storm.messaging.transport\" \"org.apache.storm.messaging.netty.Context\", \"storm.messaging.netty.authentication\" false, \"topology.component.resources.onheap.memory.mb\" 128.0, \"topology.kryo.factory\" \"org.apache.storm.serialization.DefaultKryoFactory\", \"worker.gc.childopts\" \"\", \"nimbus.topology.validator\" \"org.apache.storm.nimbus.DefaultTopologyValidator\", \"nimbus.seeds\" [\"0.0.0.0\"], \"nimbus.queue.size\" 100000, \"nimbus.cleanup.inbox.freq.secs\" 600, \"storm.blobstore.replication.factor\" 3, \"worker.heap.memory.mb\" 768, \"logviewer.max.sum.worker.logs.size.mb\" 4096, \"pacemaker.childopts\" \"-Xmx1024m\", \"ui.users\" nil, \"transactional.zookeeper.servers\" nil, \"supervisor.worker.timeout.secs\" 30, \"storm.zookeeper.auth.password\" nil, \"client.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"supervisor.childopts\" \"-Xmx256m\", \"topology.worker.max.heap.size.mb\" 768.0, \"backpressure.disruptor.high.watermark\" 0.9, \"ui.filter\" nil, \"ui.header.buffer.bytes\" 4096, \"topology.min.replication.count\" 1, \"topology.disruptor.wait.timeout.millis\" 1000, \"storm.nimbus.retry.intervalceiling.millis\" 60000, \"topology.trident.batch.emit.interval.millis\" 50, \"storm.auth.simple-acl.users\" [], \"drpc.invocations.threads\" 64, \"java.library.path\" \"/usr/local/lib:/opt/local/lib:/usr/lib\", \"ui.port\" 8080, \"storm.exhibitor.poll.uripath\" \"/exhibitor/v1/cluster/list\", \"storm.messaging.netty.transfer.batch.size\" 262144, \"logviewer.appender.name\" \"A1\", \"nimbus.thrift.max_buffer_size\" 1048576, \"storm.auth.simple-acl.users.commands\" [], \"drpc.request.timeout.secs\" 600}\n3948 [main] INFO  o.a.s.d.nimbus - Using default scheduler\n3999 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:host.name=192.168.10.100\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.version=1.8.0_66\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.vendor=Oracle Corporation\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.compiler=<NA>\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.name=Mac OS X\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.arch=x86_64\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.version=10.11.4\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.name=KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.home=/Users/KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.dir=/opt/apache-storm-1.0.0\n4005 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@77c3c037\n4031 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4047 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4048 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000/storm sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@52226e57\n4050 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4055 [main] INFO  o.a.s.b.FileBlobStoreImpl - Creating new blob store based in /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/db374078-fd57-4aeb-b7df-537f90929bc4/blobs\n4104 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4106 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60125\n4108 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4110 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60126\n4111 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4112 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60125\n4113 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@68b734a8\n4114 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60126\n4115 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.p.FileTxnLog - Creating new log file: log.1\n4117 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2000. Will not attempt to authenticate using SASL (unknown error)\n4118 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/0:0:0:0:0:0:0:1:2000, initiating session\n4118 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /0:0:0:0:0:0:0:1:60127\n4119 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /0:0:0:0:0:0:0:1:60127\n4153 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500000 with negotiated timeout 20000 for client /127.0.0.1:60125\n4153 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500000, negotiated timeout = 20000\n4155 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500001 with negotiated timeout 20000 for client /127.0.0.1:60126\n4155 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500001, negotiated timeout = 20000\n4157 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500002 with negotiated timeout 20000 for client /0:0:0:0:0:0:0:1:60127\n4157 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2000, sessionid = 0x154488b21500002, negotiated timeout = 20000\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n\n\nA massive log follows, continuing\u2026\nWill be looking up at the source since I have no idea what\u2019s happened.\n\nLooking at #slidingwindowtopology.java\nLooks like I found something here\u2026\n\nSlidingWindowTopology.java\n    public static void main(String[] args) throws Exception {\n        TopologyBuilder builder = new TopologyBuilder();\n        builder.setSpout(\"integer\", new RandomIntegerSpout(), 1);\n        builder.setBolt(\"slidingsum\", new SlidingWindowSumBolt().withWindow(new Count(30), new Count(10)), 1)\n                .shuffleGrouping(\"integer\");\n        builder.setBolt(\"tumblingavg\", new TumblingWindowAvgBolt().withTumblingWindow(new Count(3)), 1)\n                .shuffleGrouping(\"slidingsum\");\n        builder.setBolt(\"printer\", new PrinterBolt(), 1).shuffleGrouping(\"tumblingavg\");\n        Config conf = new Config();\n        conf.setDebug(true);\n        if (args != null && args.length > 0) {\n            conf.setNumWorkers(1);\n            StormSubmitter.submitTopologyWithProgressBar(args[0], conf, builder.createTopology());\n        } else {\n            LocalCluster cluster = new LocalCluster();\n            cluster.submitTopology(\"test\", conf, builder.createTopology());\n            Utils.sleep(40000);\n            cluster.killTopology(\"test\");\n            cluster.shutdown();\n        }\n    }\n\n\nThe following three bolts are configured inside main method.\n\nSlidingWindowSumBold\nTumblingWindowAvgBolt\nPrinterBolt\n\nSeems there are a Bolt to calculate the total value, and another Bolt to calculate the average and another one for outputting results. \nCheck the sources of each bolts, confirm what they\u2019re doing and looking again the logs, we can understand more.\n\nBeforehand confirming RandomIntegerSpout\n\nRandomIntegerSpout.java\n    @Override\n    public void nextTuple() {\n        Utils.sleep(100);\n        collector.emit(new Values(rand.nextInt(1000), System.currentTimeMillis() - (24 * 60 * 60 * 1000), ++msgId), msgId);\n    }\n\n\nPretty simple actually. It just generates a random number (0~999).\n\nExamining source of SlidingWindowSumBolt\n\nSlidingWindowSumBolt.java\n    @Override\n    public void execute(TupleWindow inputWindow) {\n            /*\n             * The inputWindow gives a view of\n             * (a) all the events in the window\n             * (b) events that expired since last activation of the window\n             * (c) events that newly arrived since last activation of the window\n             */\n        List<Tuple> tuplesInWindow = inputWindow.get();\n        List<Tuple> newTuples = inputWindow.getNew();\n        List<Tuple> expiredTuples = inputWindow.getExpired();\n\n        LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            /*\n             * Instead of iterating over all the tuples in the window to compute\n             * the sum, the values for the new events are added and old events are\n             * subtracted. Similar optimizations might be possible in other\n             * windowing computations.\n             */\n        for (Tuple tuple : newTuples) {\n            sum += (int) tuple.getValue(0);\n        }\n        for (Tuple tuple : expiredTuples) {\n            sum -= (int) tuple.getValue(0);\n        }\n        collector.emit(new Values(sum));\n    }\n\n\nThe values from received tuples are being summarized but values from expired tuples are being subtracted. So this part should be related with SlidingWindow. The source itself was simple enough.\n\nExamining the source of TumblingWindowAvgBolt\nNext is TumblingWindowAvgBolt which is included in the SlidingWIndowTopology.\n\nTumblingWindowAvgBolt.java\n        @Override\n        public void execute(TupleWindow inputWindow) {\n            int sum = 0;\n            List<Tuple> tuplesInWindow = inputWindow.get();\n            LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            if (tuplesInWindow.size() > 0) {\n                /*\n                * Since this is a tumbling window calculation,\n                * we use all the tuples in the window to compute the avg.\n                */\n                for (Tuple tuple : tuplesInWindow) {\n                    sum += (int) tuple.getValue(0);\n                }\n                collector.emit(new Values(sum / tuplesInWindow.size()));\n            }\n        }\n\n\nDepending on the size of the Window, the average value of the tuples from inputWindow is output. By the way, since count \u201c3\u201d is configured inside topology main method for this bolt, after three times of summing up, the avg value will be output.\n\nExamining source of PrinterBolt\nPretty much simple. I don't need to explain at all.\n\nPrinterBolt.java\n  @Override\n  public void execute(Tuple tuple, BasicOutputCollector collector) {\n    System.out.println(tuple);\n  }\n\n\nYear, very simple.\n\nSummarizing the flow of this topology\nThe sample should work in following steps.\n1. Generates random number from 0~999.\n2. Sum up up to 10 times from the numerical values of the received tuple.\n3. Send total value to next bolt for calculating average value.\n4. Accumulating the total value for three times, then calculate the average value.\n\nConfirming output logs\nAfter executing sample program, confirm output logs. According to main method, it takes 40 sec to finish executing.\n22857 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Preparing bolt __system:(-1)\n22864 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Prepared bolt __system:(-1)\n22874 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opening spout integer:(2)\n22878 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opened spout integer:(2)\n22881 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Activating spout integer:(2)\n22887 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Preparing bolt tumblingavg:(5)\n22891 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Prepared bolt tumblingavg:(5)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Preparing bolt printer:(3)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Prepared bolt printer:(3)\n22900 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Preparing bolt slidingsum:(4)\n22901 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Prepared bolt slidingsum:(4)\n22950 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Preparing bolt __acker:(1)\n22952 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Prepared bolt __acker:(1)\n\nHere, Spout and Bolt that we implement firstly seem to be initialized. Numbers which is configured to each components are important to check behavior later.\n22988 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer default [778, 1462006953163, 1]\n22994 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n22995 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer __ack_init [7447250857071583863 -3578654789271241288 2]\n22996 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 1 tuple: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]]\n22997 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]\n22998 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1] TASK: 4 DELTA: \n22999 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n23000 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n\nWell, you can understand random numbers were created and emitted. At first the program sent [778, 1462006953163, 1], and also at next line\nTRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n\nAbove log was output. That means 2nd component \"integer\" sent data to 4th component \"slidingsum\". The IDs initialized firstly were used here. When continuing these processes until 10th. After that output logs pattern was changed.\n23921 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {4389696495574006045=2681496747949810702}, [645, 1462006954095, 10]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2] TASK: 1 DELTA: \n23922 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [6050]\n23923 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=-1172784951702062669, 6973864295393994913=1708061666379587936, 7447250857071583863=5623972221711691701, -6102906463311307032=5518334604031423874, -7638682188827435429=4478428313701290490, 4389696495574006045=5932148635671668893, -6197802534174832134=1497464440461667439, -4266159872746606489=3561774369052512930, 4334659838991266401=-7106335497305084820, 4712299375428287216=3508884140400825778}, [6050]]\n\nTotal number \"6050\" was sent to 5th component \"tumblingavg\". 6050 was stored. This process was done 3 times so check 2nd and 3rd time's sending data.\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [11976]\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=492010799657169784, 317525622483766670=2638127789448427461, 3002989214851206566=128002525292759865, 7447250857071583863=8767372787937047960, -6102906463311307032=-4546730023383659346, 3562603101316339696=-7385522463102788783, -7547522651842339766=4915704745663260957, -8228450230436970384=-4055518290977434481, 6973864295393994913=6291843886548489067, -7638682188827435429=8441873508646088204, 4389696495574006045=-1674211243428697808, -6197802534174832134=2733983747371624992, 2558430164343979559=285379101380278186, -4266159872746606489=-6678113015319323641, 4334659838991266401=999638572688010822, 4712299375428287216=-2506689729719803634, -3288150160972036797=6163930983830697438, -6632312692089791299=4450995360647585394, 3635266110827390635=325375251356977723, 7564414229761366650=126552843783268400}, [11976]]\n:\n:\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [15909]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2] TASK: 1 DELTA: 1\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]]\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {-3948625081878221959=-8424958756548618666}, [34, 1462006956174, 30] TASK: 4 DELTA: \n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Processing received message FOR 5 TUPLE: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]\n\n20th data was 11976 and 30th data was 15909. Target ID was sent together so log length became long and long (^^; Well, we can get 3 total data so average will be calculated.\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.task - Emitting: tumblingavg default [11311]\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 3 tuple: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]]\n26004 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Execute done TUPLE source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909] TASK: 5 DELTA: \n26006 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Processing received message FOR 3 TUPLE: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\nsource: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\n\n(6050 + 11976 + 15909) / 3 = 11311.66666... So the decimal point seems to be suppressed. 11131 was sent to Printer Bolt.\nThen we could confirm all the behavior of sample program.\n\nReview Native Streaming Window API\nI used Native Streaming Window API and I understood the most biggest features for this API is that we can develop original Spout and Bolt as we like. For development way you can refer another Spout and Bolt. If we can be familiar with development of this API, we don't need to use CEP libraries like \"Siddhi\", we can just implement that controlling with Storm only.\n\nApache Storm 1.0.0\u3092\u4f7f\u3063\u3066\u307f\u308b\u30b7\u30ea\u30fc\u30ba\u306e\uff13\u56de\u76ee\u3067\u3059\u3002\u4eca\u307e\u3067\u306f\u3053\u3093\u306a\u306e\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n[Apache Storm 1.0.0\u3092\u4f7f\u3063\u3066\u307f\u308b Distributed Cache API\u7de8](http://qiita.com/kojiisd/items/2123cb78c2accffb3a4d)\n[Apache Storm 1.0.0\u3092\u4f7f\u3063\u3066\u307f\u308b Storm UI\u7de8](http://qiita.com/kojiisd/items/d15568b1166107cdf5d1)\n\n\u4eca\u56de\u306fNative Streaming Window API\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n#Topology\u306e\u8d77\u52d5\nSlidingWindowTopology\u304c\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n```\n# bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n```\n\n```lang:SlidingWindowTopology\n$ bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\nRunning: /Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/bin/java -client -Ddaemon.name= -Dstorm.options= -Dstorm.home=/opt/apache-storm-1.0.0 -Dstorm.log.dir=/opt/apache-storm-1.0.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin -Dstorm.jar=examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n3712 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:host.name=192.168.10.100\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.version=1.8.0_66\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.vendor=Oracle Corporation\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.compiler=<NA>\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.name=Mac OS X\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.arch=x86_64\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.version=10.11.4\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.name=KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.home=/Users/KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.dir=/opt/apache-storm-1.0.0\n3736 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2 snapdir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2\n3760 [main] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - binding to port 0.0.0.0/0.0.0.0:2000\n3766 [main] INFO  o.a.s.zookeeper - Starting inprocess zookeeper at port 2000 and dir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//bd026224-c71e-4395-b96f-9ab3551b5c60\n3944 [main] INFO  o.a.s.d.nimbus - Starting Nimbus with conf {\"topology.builtin.metrics.bucket.size.secs\" 60, \"nimbus.childopts\" \"-Xmx1024m\", \"ui.filter.params\" nil, \"storm.cluster.mode\" \"local\", \"storm.messaging.netty.client_worker_threads\" 1, \"logviewer.max.per.worker.logs.size.mb\" 2048, \"supervisor.run.worker.as.user\" false, \"topology.max.task.parallelism\" nil, \"topology.priority\" 29, \"zmq.threads\" 1, \"storm.group.mapping.service\" \"org.apache.storm.security.auth.ShellBasedGroupsMapping\", \"transactional.zookeeper.root\" \"/transactional\", \"topology.sleep.spout.wait.strategy.time.ms\" 1, \"scheduler.display.resource\" false, \"topology.max.replication.wait.time.sec\" 60, \"drpc.invocations.port\" 3773, \"supervisor.localizer.cache.target.size.mb\" 10240, \"topology.multilang.serializer\" \"org.apache.storm.multilang.JsonSerializer\", \"storm.messaging.netty.server_worker_threads\" 1, \"nimbus.blobstore.class\" \"org.apache.storm.blobstore.LocalFsBlobStore\", \"resource.aware.scheduler.eviction.strategy\" \"org.apache.storm.scheduler.resource.strategies.eviction.DefaultEvictionStrategy\", \"topology.max.error.report.per.interval\" 5, \"storm.thrift.transport\" \"org.apache.storm.security.auth.SimpleTransportPlugin\", \"zmq.hwm\" 0, \"storm.group.mapping.service.params\" nil, \"worker.profiler.enabled\" false, \"storm.principal.tolocal\" \"org.apache.storm.security.auth.DefaultPrincipalToLocal\", \"supervisor.worker.shutdown.sleep.secs\" 1, \"pacemaker.host\" \"localhost\", \"storm.zookeeper.retry.times\" 5, \"ui.actions.enabled\" true, \"zmq.linger.millis\" 0, \"supervisor.enable\" true, \"topology.stats.sample.rate\" 0.05, \"storm.messaging.netty.min_wait_ms\" 100, \"worker.log.level.reset.poll.secs\" 30, \"storm.zookeeper.port\" 2000, \"supervisor.heartbeat.frequency.secs\" 5, \"topology.enable.message.timeouts\" true, \"supervisor.cpu.capacity\" 400.0, \"drpc.worker.threads\" 64, \"supervisor.blobstore.download.thread.count\" 5, \"drpc.queue.size\" 128, \"topology.backpressure.enable\" true, \"supervisor.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"storm.blobstore.inputstream.buffer.size.bytes\" 65536, \"topology.shellbolt.max.pending\" 100, \"drpc.https.keystore.password\" \"\", \"nimbus.code.sync.freq.secs\" 120, \"logviewer.port\" 8000, \"topology.scheduler.strategy\" \"org.apache.storm.scheduler.resource.strategies.scheduling.DefaultResourceAwareStrategy\", \"topology.executor.send.buffer.size\" 1024, \"resource.aware.scheduler.priority.strategy\" \"org.apache.storm.scheduler.resource.strategies.priority.DefaultSchedulingPriorityStrategy\", \"pacemaker.auth.method\" \"NONE\", \"storm.daemon.metrics.reporter.plugins\" [\"org.apache.storm.daemon.metrics.reporters.JmxPreparableReporter\"], \"topology.worker.logwriter.childopts\" \"-Xmx64m\", \"topology.spout.wait.strategy\" \"org.apache.storm.spout.SleepSpoutWaitStrategy\", \"ui.host\" \"0.0.0.0\", \"storm.nimbus.retry.interval.millis\" 2000, \"nimbus.inbox.jar.expiration.secs\" 3600, \"dev.zookeeper.path\" \"/tmp/dev-storm-zookeeper\", \"topology.acker.executors\" nil, \"topology.fall.back.on.java.serialization\" true, \"topology.eventlogger.executors\" 0, \"supervisor.localizer.cleanup.interval.ms\" 600000, \"storm.zookeeper.servers\" [\"localhost\"], \"nimbus.thrift.threads\" 64, \"logviewer.cleanup.age.mins\" 10080, \"topology.worker.childopts\" nil, \"topology.classpath\" nil, \"supervisor.monitor.frequency.secs\" 3, \"nimbus.credential.renewers.freq.secs\" 600, \"topology.skip.missing.kryo.registrations\" true, \"drpc.authorizer.acl.filename\" \"drpc-auth-acl.yaml\", \"pacemaker.kerberos.users\" [], \"storm.group.mapping.service.cache.duration.secs\" 120, \"topology.testing.always.try.serialize\" false, \"nimbus.monitor.freq.secs\" 10, \"storm.health.check.timeout.ms\" 5000, \"supervisor.supervisors\" [], \"topology.tasks\" nil, \"topology.bolts.outgoing.overflow.buffer.enable\" false, \"storm.messaging.netty.socket.backlog\" 500, \"topology.workers\" 1, \"pacemaker.base.threads\" 10, \"storm.local.dir\" \"/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//db374078-fd57-4aeb-b7df-537f90929bc4\", \"topology.disable.loadaware\" false, \"worker.childopts\" \"-Xmx%HEAP-MEM%m -XX:+PrintGCDetails -Xloggc:artifacts/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=1M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=artifacts/heapdump\", \"storm.auth.simple-white-list.users\" [], \"topology.disruptor.batch.timeout.millis\" 1, \"topology.message.timeout.secs\" 30, \"topology.state.synchronization.timeout.secs\" 60, \"topology.tuple.serializer\" \"org.apache.storm.serialization.types.ListDelegateSerializer\", \"supervisor.supervisors.commands\" [], \"nimbus.blobstore.expiration.secs\" 600, \"logviewer.childopts\" \"-Xmx128m\", \"topology.environment\" nil, \"topology.debug\" false, \"topology.disruptor.batch.size\" 100, \"storm.messaging.netty.max_retries\" 300, \"ui.childopts\" \"-Xmx768m\", \"storm.network.topography.plugin\" \"org.apache.storm.networktopography.DefaultRackDNSToSwitchMapping\", \"storm.zookeeper.session.timeout\" 20000, \"drpc.childopts\" \"-Xmx768m\", \"drpc.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.connection.timeout\" 15000, \"storm.zookeeper.auth.user\" nil, \"storm.meta.serialization.delegate\" \"org.apache.storm.serialization.GzipThriftSerializationDelegate\", \"topology.max.spout.pending\" nil, \"storm.codedistributor.class\" \"org.apache.storm.codedistributor.LocalFileSystemCodeDistributor\", \"nimbus.supervisor.timeout.secs\" 60, \"nimbus.task.timeout.secs\" 30, \"drpc.port\" 3772, \"pacemaker.max.threads\" 50, \"storm.zookeeper.retry.intervalceiling.millis\" 30000, \"nimbus.thrift.port\" 6627, \"storm.auth.simple-acl.admins\" [], \"topology.component.cpu.pcore.percent\" 10.0, \"supervisor.memory.capacity.mb\" 3072.0, \"storm.nimbus.retry.times\" 5, \"supervisor.worker.start.timeout.secs\" 120, \"storm.zookeeper.retry.interval\" 1000, \"logs.users\" nil, \"worker.profiler.command\" \"flight.bash\", \"transactional.zookeeper.port\" nil, \"drpc.max_buffer_size\" 1048576, \"pacemaker.thread.timeout\" 10, \"task.credentials.poll.secs\" 30, \"blobstore.superuser\" \"KojiIshida\", \"drpc.https.keystore.type\" \"JKS\", \"topology.worker.receiver.thread.count\" 1, \"topology.state.checkpoint.interval.ms\" 1000, \"supervisor.slots.ports\" [6700 6701 6702 6703], \"topology.transfer.buffer.size\" 1024, \"storm.health.check.dir\" \"healthchecks\", \"topology.worker.shared.thread.pool.size\" 4, \"drpc.authorizer.acl.strict\" false, \"nimbus.file.copy.expiration.secs\" 600, \"worker.profiler.childopts\" \"-XX:+UnlockCommercialFeatures -XX:+FlightRecorder\", \"topology.executor.receive.buffer.size\" 1024, \"backpressure.disruptor.low.watermark\" 0.4, \"nimbus.task.launch.secs\" 120, \"storm.local.mode.zmq\" false, \"storm.messaging.netty.buffer_size\" 5242880, \"storm.cluster.state.store\" \"org.apache.storm.cluster_state.zookeeper_state_factory\", \"worker.heartbeat.frequency.secs\" 1, \"storm.log4j2.conf.dir\" \"log4j2\", \"ui.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.root\" \"/storm\", \"topology.tick.tuple.freq.secs\" nil, \"drpc.https.port\" -1, \"storm.workers.artifacts.dir\" \"workers-artifacts\", \"supervisor.blobstore.download.max_retries\" 3, \"task.refresh.poll.secs\" 10, \"storm.exhibitor.port\" 8080, \"task.heartbeat.frequency.secs\" 3, \"pacemaker.port\" 6699, \"storm.messaging.netty.max_wait_ms\" 1000, \"nimbus.impersonation.authorizer\" \"org.apache.storm.security.auth.authorizer.ImpersonationAuthorizer\", \"topology.component.resources.offheap.memory.mb\" 0.0, \"drpc.http.port\" 3774, \"topology.error.throttle.interval.secs\" 10, \"storm.messaging.transport\" \"org.apache.storm.messaging.netty.Context\", \"storm.messaging.netty.authentication\" false, \"topology.component.resources.onheap.memory.mb\" 128.0, \"topology.kryo.factory\" \"org.apache.storm.serialization.DefaultKryoFactory\", \"worker.gc.childopts\" \"\", \"nimbus.topology.validator\" \"org.apache.storm.nimbus.DefaultTopologyValidator\", \"nimbus.seeds\" [\"0.0.0.0\"], \"nimbus.queue.size\" 100000, \"nimbus.cleanup.inbox.freq.secs\" 600, \"storm.blobstore.replication.factor\" 3, \"worker.heap.memory.mb\" 768, \"logviewer.max.sum.worker.logs.size.mb\" 4096, \"pacemaker.childopts\" \"-Xmx1024m\", \"ui.users\" nil, \"transactional.zookeeper.servers\" nil, \"supervisor.worker.timeout.secs\" 30, \"storm.zookeeper.auth.password\" nil, \"client.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"supervisor.childopts\" \"-Xmx256m\", \"topology.worker.max.heap.size.mb\" 768.0, \"backpressure.disruptor.high.watermark\" 0.9, \"ui.filter\" nil, \"ui.header.buffer.bytes\" 4096, \"topology.min.replication.count\" 1, \"topology.disruptor.wait.timeout.millis\" 1000, \"storm.nimbus.retry.intervalceiling.millis\" 60000, \"topology.trident.batch.emit.interval.millis\" 50, \"storm.auth.simple-acl.users\" [], \"drpc.invocations.threads\" 64, \"java.library.path\" \"/usr/local/lib:/opt/local/lib:/usr/lib\", \"ui.port\" 8080, \"storm.exhibitor.poll.uripath\" \"/exhibitor/v1/cluster/list\", \"storm.messaging.netty.transfer.batch.size\" 262144, \"logviewer.appender.name\" \"A1\", \"nimbus.thrift.max_buffer_size\" 1048576, \"storm.auth.simple-acl.users.commands\" [], \"drpc.request.timeout.secs\" 600}\n3948 [main] INFO  o.a.s.d.nimbus - Using default scheduler\n3999 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:host.name=192.168.10.100\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.version=1.8.0_66\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.vendor=Oracle Corporation\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.compiler=<NA>\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.name=Mac OS X\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.arch=x86_64\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.version=10.11.4\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.name=KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.home=/Users/KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.dir=/opt/apache-storm-1.0.0\n4005 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@77c3c037\n4031 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4047 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4048 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000/storm sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@52226e57\n4050 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4055 [main] INFO  o.a.s.b.FileBlobStoreImpl - Creating new blob store based in /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/db374078-fd57-4aeb-b7df-537f90929bc4/blobs\n4104 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4106 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60125\n4108 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4110 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60126\n4111 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4112 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60125\n4113 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@68b734a8\n4114 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60126\n4115 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.p.FileTxnLog - Creating new log file: log.1\n4117 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2000. Will not attempt to authenticate using SASL (unknown error)\n4118 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/0:0:0:0:0:0:0:1:2000, initiating session\n4118 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /0:0:0:0:0:0:0:1:60127\n4119 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /0:0:0:0:0:0:0:1:60127\n4153 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500000 with negotiated timeout 20000 for client /127.0.0.1:60125\n4153 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500000, negotiated timeout = 20000\n4155 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500001 with negotiated timeout 20000 for client /127.0.0.1:60126\n4155 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500001, negotiated timeout = 20000\n4157 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500002 with negotiated timeout 20000 for client /0:0:0:0:0:0:0:1:60127\n4157 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2000, sessionid = 0x154488b21500002, negotiated timeout = 20000\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n```\n\u306a\u306b\u3084\u3089\u5927\u91cf\u306b\u30ed\u30b0\u304c\u51fa\u3066\u304d\u307e\u3057\u305f\u3002\u3068\u3044\u3046\u304b\u51fa\u7d9a\u3051\u307e\u3059\u3002\n\n\u4f55\u304c\u8d77\u3053\u3063\u305f\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u306e\u3067\u3001\u5c11\u3057\u30bd\u30fc\u30b9\u3092\u8aad\u3080\u3053\u3068\u306b\u3002\n\n#SlidingWindowTopology.java\u3092\u898b\u3066\u307f\u308b\u3002\n\u30ad\u30fc\u3068\u306a\u308b\u306e\u306f\u3053\u306e\u8fba\u3067\u3059\u304b\u306d\u3002\n\n```lang:SlidingWindowTopology.java\n    public static void main(String[] args) throws Exception {\n        TopologyBuilder builder = new TopologyBuilder();\n        builder.setSpout(\"integer\", new RandomIntegerSpout(), 1);\n        builder.setBolt(\"slidingsum\", new SlidingWindowSumBolt().withWindow(new Count(30), new Count(10)), 1)\n                .shuffleGrouping(\"integer\");\n        builder.setBolt(\"tumblingavg\", new TumblingWindowAvgBolt().withTumblingWindow(new Count(3)), 1)\n                .shuffleGrouping(\"slidingsum\");\n        builder.setBolt(\"printer\", new PrinterBolt(), 1).shuffleGrouping(\"tumblingavg\");\n        Config conf = new Config();\n        conf.setDebug(true);\n        if (args != null && args.length > 0) {\n            conf.setNumWorkers(1);\n            StormSubmitter.submitTopologyWithProgressBar(args[0], conf, builder.createTopology());\n        } else {\n            LocalCluster cluster = new LocalCluster();\n            cluster.submitTopology(\"test\", conf, builder.createTopology());\n            Utils.sleep(40000);\n            cluster.killTopology(\"test\");\n            cluster.shutdown();\n        }\n    }\n```\n\u30e1\u30a4\u30f3\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u30673\u3064\u306eBolt\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n- SlidingWindowSumBold\n- TumblingWindowAvgBolt\n- PrinterBolt\n\n\u5408\u8a08\u5024\u3092\u8a08\u7b97\u3059\u308bBolt\u3068\u3001\u5e73\u5747\u5024\u3092\u8a08\u7b97\u3059\u308bBolt\u3068\u3001\u305d\u308c\u3092\u8868\u793a\u3059\u308bBolt\u304c\u3042\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\u305d\u308c\u305e\u308c\u306eBolt\u306e\u4e2d\u306e\u30bd\u30fc\u30b9\u3092\u898b\u3066\u3001\u4f55\u3092\u3057\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u305f\u5f8c\u306b\u518d\u5ea6\u30ed\u30b0\u306e\u65b9\u3092\u898b\u3066\u307f\u308c\u3070\u3001\u4f55\u304b\u308f\u304b\u308a\u305d\u3046\u3067\u3059\u3002\n#\u305d\u306e\u524d\u306bRandomIntegerSpout\u3092\u78ba\u8a8d\u3057\u3066\u307f\u308b\nRandomIntegerSpout\u3068\u3044\u3046Spout\u304c\u3042\u308a\u307e\u3057\u305f\u306e\u3067\u3001\u307e\u305a\u3053\u306e\u4e2d\u8eab\u304b\u3089\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n```lang:RandomIntegerSpout.java\n    @Override\n    public void nextTuple() {\n        Utils.sleep(100);\n        collector.emit(new Values(rand.nextInt(1000), System.currentTimeMillis() - (24 * 60 * 60 * 1000), ++msgId), msgId);\n    }\n```\n\u3044\u3044\u611f\u3058\u306b\u3068\u3066\u3082\u5358\u7d14\u3067\u3059\u306d\u30020\u301c999\u306e\u4e71\u6570\u3092\u767a\u751f\u3055\u305b\u3066\u3044\u308b\u3060\u3051\u306e\u3088\u3046\u3067\u3059\u3002\n#\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bBolt\u306e\u30bd\u30fc\u30b9\u3092\u898b\u3066\u307f\u308b\n##SlidingWindowSumBold\u3092\u898b\u3066\u307f\u308b\n\u3067\u306f\u3001Bolt\u306e\u78ba\u8a8d\u306b\u5165\u308a\u307e\u3059\u3002\u307e\u305a\u306fSlidingWindowSumBolt\n\n```lang:SlidingWindowSumBolt.java\n    @Override\n    public void execute(TupleWindow inputWindow) {\n            /*\n             * The inputWindow gives a view of\n             * (a) all the events in the window\n             * (b) events that expired since last activation of the window\n             * (c) events that newly arrived since last activation of the window\n             */\n        List<Tuple> tuplesInWindow = inputWindow.get();\n        List<Tuple> newTuples = inputWindow.getNew();\n        List<Tuple> expiredTuples = inputWindow.getExpired();\n\n        LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            /*\n             * Instead of iterating over all the tuples in the window to compute\n             * the sum, the values for the new events are added and old events are\n             * subtracted. Similar optimizations might be possible in other\n             * windowing computations.\n             */\n        for (Tuple tuple : newTuples) {\n            sum += (int) tuple.getValue(0);\n        }\n        for (Tuple tuple : expiredTuples) {\n            sum -= (int) tuple.getValue(0);\n        }\n        collector.emit(new Values(sum));\n    }\n```\n\u3075\u3080\u3002\u53d7\u4fe1\u3057\u305fTuple\u306e\u4e2d\u8eab\u3092\u8db3\u3057\u5408\u308f\u305b\u3066\u3044\u307e\u3059\u304c\u3001expired\u306b\u306a\u3063\u305f\u3082\u306e\u306f\u6e1b\u7b97\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u306e\u8fba\u304cSlidingWindow\u3068\u95a2\u4fc2\u3057\u3066\u304f\u308b\u306e\u3067\u3057\u3087\u3046\u3002\u4f55\u306f\u3068\u3082\u3042\u308c\u3001\u30bd\u30fc\u30b9\u81ea\u4f53\u306f\u5358\u7d14\u3067\u3057\u305f\u3002\n##TumblingWindowAvgBolt\u3092\u898b\u3066\u307f\u308b\n\u6b21\u306fTumblingWindowAvgBolt\u3067\u3059\u3002\u3053\u3061\u3089\u306fSlidingWindowTopology\u306b\u5185\u5305\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n```lang:TumblingWindowAvgBolt.java\n        @Override\n        public void execute(TupleWindow inputWindow) {\n            int sum = 0;\n            List<Tuple> tuplesInWindow = inputWindow.get();\n            LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            if (tuplesInWindow.size() > 0) {\n                /*\n                * Since this is a tumbling window calculation,\n                * we use all the tuples in the window to compute the avg.\n                */\n                for (Tuple tuple : tuplesInWindow) {\n                    sum += (int) tuple.getValue(0);\n                }\n                collector.emit(new Values(sum / tuplesInWindow.size()));\n            }\n        }\n```\n\u8a2d\u5b9a\u3055\u308c\u305fWindow\u306e\u30b5\u30a4\u30ba\u306b\u3088\u3063\u3066\u3001\u8db3\u3057\u5408\u308f\u305b\u3066\u304d\u305f\u5408\u8a08\u5024\u304b\u3089\u5e73\u5747\u5024\u3092\u51fa\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u305d\u3046\u3044\u3048\u3070main\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u3067\u306f\u3053\u306e\u8a2d\u5b9a\u5024\u306b3\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u305f\u306e\u3067\u3001\u304a\u305d\u3089\u304f3\u56de\u5408\u8a08\u5024\u3092\u53d7\u4fe1\u3057\u305f\u3089\u3001\u5e73\u5747\u5024\u306e\u7b97\u51fa\u3092\u3059\u308b\u306e\u3067\u3057\u3087\u3046\u3002\n##PrinterBolt\u3092\u898b\u3066\u307f\u308b\n\u89e3\u8aac\u304c\u4e0d\u8981\u306a\u304f\u3089\u3044\u3001\u3068\u3066\u3082\u30b7\u30f3\u30d7\u30eb\u306a\u4f5c\u308a\u3067\u3057\u305f\u3002\n\n```lang:PrinterBolt.java\n  @Override\n  public void execute(Tuple tuple, BasicOutputCollector collector) {\n    System.out.println(tuple);\n  }\n```\n\u3046\u3093\u3001\u3068\u3063\u3066\u3082\u5358\u7d14\u3002\n#\u3053\u306eTopology\u306e\u52d5\u304d\u3092\u307e\u3068\u3081\u308b\u3068\n\u4e88\u60f3\u3067\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u306b\u52d5\u304f\u306f\u305a\u3067\u3059\u306d\u3002\n1. 0\u301c999\u306e\u4e71\u6570\u3092\u751f\u6210\u3057\u3066\u3001\u52a0\u7b97\u7528\u306eBolt\u306b\u9001\u4fe1\u3059\u308b\u3002\n2. \u53d7\u4fe1\u3057\u305fTuple\u306e\u6570\u5024\u309210\u56de\u8db3\u3057\u5408\u308f\u305b\u3066\u4fdd\u6301\u3059\u308b\u3002\n3. \u5e73\u5747\u5024\u8a08\u7b97\u7528\u306eBolt\u306b\u5408\u8a08\u5024\u3092\u9001\u4ed8\u3059\u308b\u3002\n4. 3\u56de\u5408\u8a08\u5024\u304c\u6e9c\u307e\u3063\u305f\u3089\u3001\u5e73\u5747\u5024\u3092\u7b97\u51fa\u3059\u308b\u3002\n#\u51fa\u529b\u3055\u308c\u305f\u30ed\u30b0\u3092\u898b\u3066\u307f\u308b\n\u30b5\u30f3\u30d7\u30eb\u3092\u52d5\u304b\u3057\u3066\u3001\u51fa\u529b\u3055\u308c\u305f\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002main\u30e1\u30bd\u30c3\u30c9\u306b\u3088\u308c\u307040\u79d2\u3067\u5b9f\u65bd\u304c\u5b8c\u4e86\u3059\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u5f85\u3063\u3066\u307f\u307e\u3059\u3002\n\n```\n22857 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Preparing bolt __system:(-1)\n22864 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Prepared bolt __system:(-1)\n22874 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opening spout integer:(2)\n22878 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opened spout integer:(2)\n22881 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Activating spout integer:(2)\n22887 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Preparing bolt tumblingavg:(5)\n22891 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Prepared bolt tumblingavg:(5)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Preparing bolt printer:(3)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Prepared bolt printer:(3)\n22900 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Preparing bolt slidingsum:(4)\n22901 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Prepared bolt slidingsum:(4)\n22950 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Preparing bolt __acker:(1)\n22952 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Prepared bolt __acker:(1)\n```\n\u6700\u521d\u306b\u66f8\u304fSpout\u3068Bolt\u304c\u521d\u671f\u5316\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u306d\u3002\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\u6570\u5b57\u304c\u3001\u4eca\u5f8c\u898b\u308b\u4e0a\u3067\u5927\u4e8b\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n22988 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer default [778, 1462006953163, 1]\n22994 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n22995 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer __ack_init [7447250857071583863 -3578654789271241288 2]\n22996 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 1 tuple: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]]\n22997 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]\n22998 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1] TASK: 4 DELTA: \n22999 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n23000 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n```\n\u3055\u3066\u3001\u65e9\u901f\u4e71\u6570\u304c\u4f5c\u6210\u3055\u308c\u3066Emit\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308a\u307e\u3059\u30021\u756a\u76ee\u3068\u3057\u3066[778, 1462006953163, 1]\u3092\u9001\u4ed8\u3057\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\u3067\u3001\u305d\u306e\u6b21\u306e\u884c\u306b\n\n```\nTRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n```\n\u3068\u3044\u3046\u30ed\u30b0\u304c\u51fa\u3066\u3044\u307e\u3059\u304c\u30014\u756a\u76ee\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u300cslidingsum\u300d\u306b\u5411\u3051\u30662\u756a\u76ee\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u300cinteger\u300d\u304b\u3089\u30c7\u30fc\u30bf\u304c\u9001\u4ed8\u3055\u308c\u3066\u3044\u308b\u3001\u3068\u3044\u3046\u610f\u5473\u306b\u306a\u308a\u307e\u3059\u3002\u6700\u521d\u306e\u521d\u671f\u5316\u3057\u3066\u3044\u305fID\u304c\u3053\u3053\u3067\u4f7f\u308f\u308c\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u3053\u306e\u3088\u3046\u306a\u3084\u308a\u53d6\u308a\u3092\u3057\u306a\u304c\u3089\u300110\u756a\u76ee\u307e\u3067\u9001\u4ed8\u3092\u7d9a\u3051\u3066\u3044\u307e\u3059\u3002\u3067\u300110\u756a\u76ee\u307e\u3067\u9001\u4ed8\u3092\u3059\u308b\u3068\u3001\u30ed\u30b0\u306e\u51fa\u529b\u306e\u3055\u308c\u65b9\u304c\u5909\u308f\u308a\u307e\u3059\u3002\n\n```\n23921 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {4389696495574006045=2681496747949810702}, [645, 1462006954095, 10]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2] TASK: 1 DELTA: \n23922 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [6050]\n23923 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=-1172784951702062669, 6973864295393994913=1708061666379587936, 7447250857071583863=5623972221711691701, -6102906463311307032=5518334604031423874, -7638682188827435429=4478428313701290490, 4389696495574006045=5932148635671668893, -6197802534174832134=1497464440461667439, -4266159872746606489=3561774369052512930, 4334659838991266401=-7106335497305084820, 4712299375428287216=3508884140400825778}, [6050]]\n```\n\u5408\u8a08\u5024\u3068\u3057\u3066\u7b97\u51fa\u3055\u308c\u305f6050\u30925\u756a\u76ee\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u300ctumblingavg\u300d\u306b\u9001\u4ed8\u3057\u307e\u3057\u305f\u3002\u3053\u308c\u30676050\u3068\u3044\u3046\u6570\u5024\u304c\u4fdd\u5b58\u3055\u308c\u307e\u3057\u305f\u3002\u304a\u305d\u3089\u304f\u3053\u308c\u30923\u56de\u7e70\u308a\u8fd4\u3059\u306e\u3067\u30012\u56de\u76ee\u30013\u56de\u76ee\u3067\u305d\u308c\u305e\u308c\u3069\u306e\u3088\u3046\u306a\u6570\u5024\u304c\u9001\u4ed8\u3055\u308c\u3066\u3044\u308b\u306e\u304b\u898b\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [11976]\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=492010799657169784, 317525622483766670=2638127789448427461, 3002989214851206566=128002525292759865, 7447250857071583863=8767372787937047960, -6102906463311307032=-4546730023383659346, 3562603101316339696=-7385522463102788783, -7547522651842339766=4915704745663260957, -8228450230436970384=-4055518290977434481, 6973864295393994913=6291843886548489067, -7638682188827435429=8441873508646088204, 4389696495574006045=-1674211243428697808, -6197802534174832134=2733983747371624992, 2558430164343979559=285379101380278186, -4266159872746606489=-6678113015319323641, 4334659838991266401=999638572688010822, 4712299375428287216=-2506689729719803634, -3288150160972036797=6163930983830697438, -6632312692089791299=4450995360647585394, 3635266110827390635=325375251356977723, 7564414229761366650=126552843783268400}, [11976]]\n:\n:\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [15909]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2] TASK: 1 DELTA: 1\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]]\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {-3948625081878221959=-8424958756548618666}, [34, 1462006956174, 30] TASK: 4 DELTA: \n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Processing received message FOR 5 TUPLE: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]\n```\n20\u756a\u76ee\u306f11976\u300130\u756a\u76ee\u306f15909\u3067\u3059\u306d\u3002\u5bfe\u8c61\u3068\u306a\u308bID\u3082\u4e00\u7dd2\u306b\u9001\u4ed8\u3055\u308c\u308b\u306e\u3067\u3001\u3069\u3093\u3069\u3093\u30ed\u30b0\u304c\u9577\u304f\u306a\u3063\u3066\u3044\u304d\u307e\u3059\u3002\uff08\uff3e\uff3e\uff1b\u3067\u30013\u3064\u306e\u5408\u8a08\u5024\u304c\u305f\u307e\u3063\u305f\u306e\u3067\u3001\u3053\u3053\u304b\u3089\u5e73\u5747\u5024\u306e\u8a08\u7b97\u304c\u3055\u308c\u307e\u3059\u3002\n\n```\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.task - Emitting: tumblingavg default [11311]\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 3 tuple: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]]\n26004 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Execute done TUPLE source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909] TASK: 5 DELTA: \n26006 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Processing received message FOR 3 TUPLE: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\nsource: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\n```\n(6050 + 11976 + 15909) / 3 = 11311.66666...\u3067\u3059\u306e\u3067\u3001\u5c0f\u6570\u70b9\u4ee5\u4e0b\u306f\u5207\u308a\u6368\u3066\u306e\u3088\u3046\u3067\u3059\u306d\u300211311\u304cPrinter\u7528\u306eBolt\u306b\u9001\u4ed8\u3055\u308c\u307e\u3057\u305f\u3002\n\n\u3053\u308c\u3067\u4e00\u901a\u308a\u306e\u52d5\u304d\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3057\u305f\u3002\n\n#Native Streaming Window API\u3092\u632f\u308a\u8fd4\u308b\n\u3055\u3066\u3001\u4eca\u56deNative Streaming Window API\u3092\u5b9f\u969b\u306b\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u3053\u306eAPI\u306e\u6700\u5927\u306e\u7279\u5fb4\u306f\u3001\u3053\u308c\u3089\u306eSpout\u3084Bolt\u304c\u81ea\u524d\u3067\u4f5c\u308c\u308b\u3001\u3068\u3044\u3046\u3068\u3053\u308d\u3067\u3057\u3087\u3046\u304b\u3002\u4f5c\u308a\u65b9\u306f\u4ed6\u306eSpout\u3084Bolt\u3092\u53c2\u8003\u306b\u3059\u308c\u3070\u3001\u5272\u3068\u7c21\u5358\u306b\u5b9f\u88c5\u304c\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u3042\u308b\u7a0b\u5ea6\u6163\u308c\u3066\u304f\u308c\u3070\u3001\u4eca\u307e\u3067Siddhi\u306a\u3069\u3092\u4f7f\u3063\u3066Window\u5236\u5fa1\u3092\u3057\u3066\u3044\u305f\u3053\u3068\u306a\u3069\u304c\u3001Storm\u3060\u3051\u3067\u5b9f\u73fe\u53ef\u80fd\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u306d\u3002\n\n# English translation\nI was requested from a Storm user to translate this article.\nFollowing contents are same meaning as above contents.\n\n# Topology Start\nSlidingWindowTopology is used as a sample so I use it.\n\n```\n# bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n```\n\n```lang:SlidingWindowTopology\n$ bin/storm jar examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\nRunning: /Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/bin/java -client -Ddaemon.name= -Dstorm.options= -Dstorm.home=/opt/apache-storm-1.0.0 -Dstorm.log.dir=/opt/apache-storm-1.0.0/logs -Djava.library.path=/usr/local/lib:/opt/local/lib:/usr/lib -Dstorm.conf.file= -cp /opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin -Dstorm.jar=examples/storm-starter/storm-starter-topologies-1.0.0.jar org.apache.storm.starter.SlidingWindowTopology\n3712 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:host.name=192.168.10.100\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.version=1.8.0_66\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.vendor=Oracle Corporation\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n3713 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:java.compiler=<NA>\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.name=Mac OS X\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.arch=x86_64\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:os.version=10.11.4\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.name=KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.home=/Users/KojiIshida\n3714 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Server environment:user.dir=/opt/apache-storm-1.0.0\n3736 [main] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Created server with tickTime 2000 minSessionTimeout 4000 maxSessionTimeout 40000 datadir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2 snapdir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/bd026224-c71e-4395-b96f-9ab3551b5c60/version-2\n3760 [main] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - binding to port 0.0.0.0/0.0.0.0:2000\n3766 [main] INFO  o.a.s.zookeeper - Starting inprocess zookeeper at port 2000 and dir /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//bd026224-c71e-4395-b96f-9ab3551b5c60\n3944 [main] INFO  o.a.s.d.nimbus - Starting Nimbus with conf {\"topology.builtin.metrics.bucket.size.secs\" 60, \"nimbus.childopts\" \"-Xmx1024m\", \"ui.filter.params\" nil, \"storm.cluster.mode\" \"local\", \"storm.messaging.netty.client_worker_threads\" 1, \"logviewer.max.per.worker.logs.size.mb\" 2048, \"supervisor.run.worker.as.user\" false, \"topology.max.task.parallelism\" nil, \"topology.priority\" 29, \"zmq.threads\" 1, \"storm.group.mapping.service\" \"org.apache.storm.security.auth.ShellBasedGroupsMapping\", \"transactional.zookeeper.root\" \"/transactional\", \"topology.sleep.spout.wait.strategy.time.ms\" 1, \"scheduler.display.resource\" false, \"topology.max.replication.wait.time.sec\" 60, \"drpc.invocations.port\" 3773, \"supervisor.localizer.cache.target.size.mb\" 10240, \"topology.multilang.serializer\" \"org.apache.storm.multilang.JsonSerializer\", \"storm.messaging.netty.server_worker_threads\" 1, \"nimbus.blobstore.class\" \"org.apache.storm.blobstore.LocalFsBlobStore\", \"resource.aware.scheduler.eviction.strategy\" \"org.apache.storm.scheduler.resource.strategies.eviction.DefaultEvictionStrategy\", \"topology.max.error.report.per.interval\" 5, \"storm.thrift.transport\" \"org.apache.storm.security.auth.SimpleTransportPlugin\", \"zmq.hwm\" 0, \"storm.group.mapping.service.params\" nil, \"worker.profiler.enabled\" false, \"storm.principal.tolocal\" \"org.apache.storm.security.auth.DefaultPrincipalToLocal\", \"supervisor.worker.shutdown.sleep.secs\" 1, \"pacemaker.host\" \"localhost\", \"storm.zookeeper.retry.times\" 5, \"ui.actions.enabled\" true, \"zmq.linger.millis\" 0, \"supervisor.enable\" true, \"topology.stats.sample.rate\" 0.05, \"storm.messaging.netty.min_wait_ms\" 100, \"worker.log.level.reset.poll.secs\" 30, \"storm.zookeeper.port\" 2000, \"supervisor.heartbeat.frequency.secs\" 5, \"topology.enable.message.timeouts\" true, \"supervisor.cpu.capacity\" 400.0, \"drpc.worker.threads\" 64, \"supervisor.blobstore.download.thread.count\" 5, \"drpc.queue.size\" 128, \"topology.backpressure.enable\" true, \"supervisor.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"storm.blobstore.inputstream.buffer.size.bytes\" 65536, \"topology.shellbolt.max.pending\" 100, \"drpc.https.keystore.password\" \"\", \"nimbus.code.sync.freq.secs\" 120, \"logviewer.port\" 8000, \"topology.scheduler.strategy\" \"org.apache.storm.scheduler.resource.strategies.scheduling.DefaultResourceAwareStrategy\", \"topology.executor.send.buffer.size\" 1024, \"resource.aware.scheduler.priority.strategy\" \"org.apache.storm.scheduler.resource.strategies.priority.DefaultSchedulingPriorityStrategy\", \"pacemaker.auth.method\" \"NONE\", \"storm.daemon.metrics.reporter.plugins\" [\"org.apache.storm.daemon.metrics.reporters.JmxPreparableReporter\"], \"topology.worker.logwriter.childopts\" \"-Xmx64m\", \"topology.spout.wait.strategy\" \"org.apache.storm.spout.SleepSpoutWaitStrategy\", \"ui.host\" \"0.0.0.0\", \"storm.nimbus.retry.interval.millis\" 2000, \"nimbus.inbox.jar.expiration.secs\" 3600, \"dev.zookeeper.path\" \"/tmp/dev-storm-zookeeper\", \"topology.acker.executors\" nil, \"topology.fall.back.on.java.serialization\" true, \"topology.eventlogger.executors\" 0, \"supervisor.localizer.cleanup.interval.ms\" 600000, \"storm.zookeeper.servers\" [\"localhost\"], \"nimbus.thrift.threads\" 64, \"logviewer.cleanup.age.mins\" 10080, \"topology.worker.childopts\" nil, \"topology.classpath\" nil, \"supervisor.monitor.frequency.secs\" 3, \"nimbus.credential.renewers.freq.secs\" 600, \"topology.skip.missing.kryo.registrations\" true, \"drpc.authorizer.acl.filename\" \"drpc-auth-acl.yaml\", \"pacemaker.kerberos.users\" [], \"storm.group.mapping.service.cache.duration.secs\" 120, \"topology.testing.always.try.serialize\" false, \"nimbus.monitor.freq.secs\" 10, \"storm.health.check.timeout.ms\" 5000, \"supervisor.supervisors\" [], \"topology.tasks\" nil, \"topology.bolts.outgoing.overflow.buffer.enable\" false, \"storm.messaging.netty.socket.backlog\" 500, \"topology.workers\" 1, \"pacemaker.base.threads\" 10, \"storm.local.dir\" \"/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T//db374078-fd57-4aeb-b7df-537f90929bc4\", \"topology.disable.loadaware\" false, \"worker.childopts\" \"-Xmx%HEAP-MEM%m -XX:+PrintGCDetails -Xloggc:artifacts/gc.log -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=10 -XX:GCLogFileSize=1M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=artifacts/heapdump\", \"storm.auth.simple-white-list.users\" [], \"topology.disruptor.batch.timeout.millis\" 1, \"topology.message.timeout.secs\" 30, \"topology.state.synchronization.timeout.secs\" 60, \"topology.tuple.serializer\" \"org.apache.storm.serialization.types.ListDelegateSerializer\", \"supervisor.supervisors.commands\" [], \"nimbus.blobstore.expiration.secs\" 600, \"logviewer.childopts\" \"-Xmx128m\", \"topology.environment\" nil, \"topology.debug\" false, \"topology.disruptor.batch.size\" 100, \"storm.messaging.netty.max_retries\" 300, \"ui.childopts\" \"-Xmx768m\", \"storm.network.topography.plugin\" \"org.apache.storm.networktopography.DefaultRackDNSToSwitchMapping\", \"storm.zookeeper.session.timeout\" 20000, \"drpc.childopts\" \"-Xmx768m\", \"drpc.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.connection.timeout\" 15000, \"storm.zookeeper.auth.user\" nil, \"storm.meta.serialization.delegate\" \"org.apache.storm.serialization.GzipThriftSerializationDelegate\", \"topology.max.spout.pending\" nil, \"storm.codedistributor.class\" \"org.apache.storm.codedistributor.LocalFileSystemCodeDistributor\", \"nimbus.supervisor.timeout.secs\" 60, \"nimbus.task.timeout.secs\" 30, \"drpc.port\" 3772, \"pacemaker.max.threads\" 50, \"storm.zookeeper.retry.intervalceiling.millis\" 30000, \"nimbus.thrift.port\" 6627, \"storm.auth.simple-acl.admins\" [], \"topology.component.cpu.pcore.percent\" 10.0, \"supervisor.memory.capacity.mb\" 3072.0, \"storm.nimbus.retry.times\" 5, \"supervisor.worker.start.timeout.secs\" 120, \"storm.zookeeper.retry.interval\" 1000, \"logs.users\" nil, \"worker.profiler.command\" \"flight.bash\", \"transactional.zookeeper.port\" nil, \"drpc.max_buffer_size\" 1048576, \"pacemaker.thread.timeout\" 10, \"task.credentials.poll.secs\" 30, \"blobstore.superuser\" \"KojiIshida\", \"drpc.https.keystore.type\" \"JKS\", \"topology.worker.receiver.thread.count\" 1, \"topology.state.checkpoint.interval.ms\" 1000, \"supervisor.slots.ports\" [6700 6701 6702 6703], \"topology.transfer.buffer.size\" 1024, \"storm.health.check.dir\" \"healthchecks\", \"topology.worker.shared.thread.pool.size\" 4, \"drpc.authorizer.acl.strict\" false, \"nimbus.file.copy.expiration.secs\" 600, \"worker.profiler.childopts\" \"-XX:+UnlockCommercialFeatures -XX:+FlightRecorder\", \"topology.executor.receive.buffer.size\" 1024, \"backpressure.disruptor.low.watermark\" 0.4, \"nimbus.task.launch.secs\" 120, \"storm.local.mode.zmq\" false, \"storm.messaging.netty.buffer_size\" 5242880, \"storm.cluster.state.store\" \"org.apache.storm.cluster_state.zookeeper_state_factory\", \"worker.heartbeat.frequency.secs\" 1, \"storm.log4j2.conf.dir\" \"log4j2\", \"ui.http.creds.plugin\" \"org.apache.storm.security.auth.DefaultHttpCredentialsPlugin\", \"storm.zookeeper.root\" \"/storm\", \"topology.tick.tuple.freq.secs\" nil, \"drpc.https.port\" -1, \"storm.workers.artifacts.dir\" \"workers-artifacts\", \"supervisor.blobstore.download.max_retries\" 3, \"task.refresh.poll.secs\" 10, \"storm.exhibitor.port\" 8080, \"task.heartbeat.frequency.secs\" 3, \"pacemaker.port\" 6699, \"storm.messaging.netty.max_wait_ms\" 1000, \"nimbus.impersonation.authorizer\" \"org.apache.storm.security.auth.authorizer.ImpersonationAuthorizer\", \"topology.component.resources.offheap.memory.mb\" 0.0, \"drpc.http.port\" 3774, \"topology.error.throttle.interval.secs\" 10, \"storm.messaging.transport\" \"org.apache.storm.messaging.netty.Context\", \"storm.messaging.netty.authentication\" false, \"topology.component.resources.onheap.memory.mb\" 128.0, \"topology.kryo.factory\" \"org.apache.storm.serialization.DefaultKryoFactory\", \"worker.gc.childopts\" \"\", \"nimbus.topology.validator\" \"org.apache.storm.nimbus.DefaultTopologyValidator\", \"nimbus.seeds\" [\"0.0.0.0\"], \"nimbus.queue.size\" 100000, \"nimbus.cleanup.inbox.freq.secs\" 600, \"storm.blobstore.replication.factor\" 3, \"worker.heap.memory.mb\" 768, \"logviewer.max.sum.worker.logs.size.mb\" 4096, \"pacemaker.childopts\" \"-Xmx1024m\", \"ui.users\" nil, \"transactional.zookeeper.servers\" nil, \"supervisor.worker.timeout.secs\" 30, \"storm.zookeeper.auth.password\" nil, \"client.blobstore.class\" \"org.apache.storm.blobstore.NimbusBlobStore\", \"supervisor.childopts\" \"-Xmx256m\", \"topology.worker.max.heap.size.mb\" 768.0, \"backpressure.disruptor.high.watermark\" 0.9, \"ui.filter\" nil, \"ui.header.buffer.bytes\" 4096, \"topology.min.replication.count\" 1, \"topology.disruptor.wait.timeout.millis\" 1000, \"storm.nimbus.retry.intervalceiling.millis\" 60000, \"topology.trident.batch.emit.interval.millis\" 50, \"storm.auth.simple-acl.users\" [], \"drpc.invocations.threads\" 64, \"java.library.path\" \"/usr/local/lib:/opt/local/lib:/usr/lib\", \"ui.port\" 8080, \"storm.exhibitor.poll.uripath\" \"/exhibitor/v1/cluster/list\", \"storm.messaging.netty.transfer.batch.size\" 262144, \"logviewer.appender.name\" \"A1\", \"nimbus.thrift.max_buffer_size\" 1048576, \"storm.auth.simple-acl.users.commands\" [], \"drpc.request.timeout.secs\" 600}\n3948 [main] INFO  o.a.s.d.nimbus - Using default scheduler\n3999 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:zookeeper.version=3.4.6-1569965, built on 02/20/2014 09:09 GMT\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:host.name=192.168.10.100\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.version=1.8.0_66\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.vendor=Oracle Corporation\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.home=/Library/Java/JavaVirtualMachines/jdk1.8.0_66.jdk/Contents/Home/jre\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.class.path=/opt/apache-storm-1.0.0/lib/asm-5.0.3.jar:/opt/apache-storm-1.0.0/lib/clojure-1.7.0.jar:/opt/apache-storm-1.0.0/lib/disruptor-3.3.2.jar:/opt/apache-storm-1.0.0/lib/kryo-3.0.3.jar:/opt/apache-storm-1.0.0/lib/log4j-api-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-core-2.1.jar:/opt/apache-storm-1.0.0/lib/log4j-over-slf4j-1.6.6.jar:/opt/apache-storm-1.0.0/lib/log4j-slf4j-impl-2.1.jar:/opt/apache-storm-1.0.0/lib/minlog-1.3.0.jar:/opt/apache-storm-1.0.0/lib/objenesis-2.1.jar:/opt/apache-storm-1.0.0/lib/reflectasm-1.10.1.jar:/opt/apache-storm-1.0.0/lib/servlet-api-2.5.jar:/opt/apache-storm-1.0.0/lib/slf4j-api-1.7.7.jar:/opt/apache-storm-1.0.0/lib/storm-core-1.0.0.jar:/opt/apache-storm-1.0.0/lib/storm-rename-hack-1.0.0.jar:examples/storm-starter/storm-starter-topologies-1.0.0.jar:/opt/storm/conf:/opt/apache-storm-1.0.0/bin\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.library.path=/usr/local/lib:/opt/local/lib:/usr/lib\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.io.tmpdir=/var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:java.compiler=<NA>\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.name=Mac OS X\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.arch=x86_64\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:os.version=10.11.4\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.name=KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.home=/Users/KojiIshida\n4004 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Client environment:user.dir=/opt/apache-storm-1.0.0\n4005 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@77c3c037\n4031 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4047 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4048 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000/storm sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@52226e57\n4050 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/127.0.0.1:2000. Will not attempt to authenticate using SASL (unknown error)\n4055 [main] INFO  o.a.s.b.FileBlobStoreImpl - Creating new blob store based in /var/folders/f2/dn55vt054w5djx70_r7nq1sr0000gn/T/db374078-fd57-4aeb-b7df-537f90929bc4/blobs\n4104 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4106 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60125\n4108 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/127.0.0.1:2000, initiating session\n4110 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /127.0.0.1:60126\n4111 [main] INFO  o.a.s.s.o.a.c.f.i.CuratorFrameworkImpl - Starting\n4112 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60125\n4113 [main] INFO  o.a.s.s.o.a.z.ZooKeeper - Initiating client connection, connectString=localhost:2000 sessionTimeout=20000 watcher=org.apache.storm.shade.org.apache.curator.ConnectionState@68b734a8\n4114 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /127.0.0.1:60126\n4115 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.p.FileTxnLog - Creating new log file: log.1\n4117 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Opening socket connection to server localhost/0:0:0:0:0:0:0:1:2000. Will not attempt to authenticate using SASL (unknown error)\n4118 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Socket connection established to localhost/0:0:0:0:0:0:0:1:2000, initiating session\n4118 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.NIOServerCnxnFactory - Accepted socket connection from /0:0:0:0:0:0:0:1:60127\n4119 [NIOServerCxn.Factory:0.0.0.0/0.0.0.0:2000] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Client attempting to establish new session at /0:0:0:0:0:0:0:1:60127\n4153 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500000 with negotiated timeout 20000 for client /127.0.0.1:60125\n4153 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500000, negotiated timeout = 20000\n4155 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500001 with negotiated timeout 20000 for client /127.0.0.1:60126\n4155 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/127.0.0.1:2000, sessionid = 0x154488b21500001, negotiated timeout = 20000\n4157 [SyncThread:0] INFO  o.a.s.s.o.a.z.s.ZooKeeperServer - Established session 0x154488b21500002 with negotiated timeout 20000 for client /0:0:0:0:0:0:0:1:60127\n4157 [main-SendThread(localhost:2000)] INFO  o.a.s.s.o.a.z.ClientCnxn - Session establishment complete on server localhost/0:0:0:0:0:0:0:1:2000, sessionid = 0x154488b21500002, negotiated timeout = 20000\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4158 [main-EventThread] INFO  o.a.s.s.o.a.c.f.s.ConnectionStateManager - State change: CONNECTED\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n4177 [main-EventThread] INFO  o.a.s.zookeeper - Zookeeper state update: :connected:none\n```\nA massive log follows, continuing\u2026\n\nWill be looking up at the source since I have no idea what\u2019s happened.\n#Looking at #slidingwindowtopology.java\n\nLooks like I found something here\u2026\n\n```lang:SlidingWindowTopology.java\n    public static void main(String[] args) throws Exception {\n        TopologyBuilder builder = new TopologyBuilder();\n        builder.setSpout(\"integer\", new RandomIntegerSpout(), 1);\n        builder.setBolt(\"slidingsum\", new SlidingWindowSumBolt().withWindow(new Count(30), new Count(10)), 1)\n                .shuffleGrouping(\"integer\");\n        builder.setBolt(\"tumblingavg\", new TumblingWindowAvgBolt().withTumblingWindow(new Count(3)), 1)\n                .shuffleGrouping(\"slidingsum\");\n        builder.setBolt(\"printer\", new PrinterBolt(), 1).shuffleGrouping(\"tumblingavg\");\n        Config conf = new Config();\n        conf.setDebug(true);\n        if (args != null && args.length > 0) {\n            conf.setNumWorkers(1);\n            StormSubmitter.submitTopologyWithProgressBar(args[0], conf, builder.createTopology());\n        } else {\n            LocalCluster cluster = new LocalCluster();\n            cluster.submitTopology(\"test\", conf, builder.createTopology());\n            Utils.sleep(40000);\n            cluster.killTopology(\"test\");\n            cluster.shutdown();\n        }\n    }\n```\nThe following three bolts are configured inside main method.\n\n- SlidingWindowSumBold\n- TumblingWindowAvgBolt\n- PrinterBolt\n\n\nSeems there are a Bolt to calculate the total value, and another Bolt to calculate the average and another one for outputting results. \n\nCheck the sources of each bolts, confirm what they\u2019re doing and looking again the logs, we can understand more.\n\n# Beforehand confirming RandomIntegerSpout\n```lang:RandomIntegerSpout.java\n    @Override\n    public void nextTuple() {\n        Utils.sleep(100);\n        collector.emit(new Values(rand.nextInt(1000), System.currentTimeMillis() - (24 * 60 * 60 * 1000), ++msgId), msgId);\n    }\n```\nPretty simple actually. It just generates a random number (0~999).\n\n# Examining source of SlidingWindowSumBolt\n\n```lang:SlidingWindowSumBolt.java\n    @Override\n    public void execute(TupleWindow inputWindow) {\n            /*\n             * The inputWindow gives a view of\n             * (a) all the events in the window\n             * (b) events that expired since last activation of the window\n             * (c) events that newly arrived since last activation of the window\n             */\n        List<Tuple> tuplesInWindow = inputWindow.get();\n        List<Tuple> newTuples = inputWindow.getNew();\n        List<Tuple> expiredTuples = inputWindow.getExpired();\n\n        LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            /*\n             * Instead of iterating over all the tuples in the window to compute\n             * the sum, the values for the new events are added and old events are\n             * subtracted. Similar optimizations might be possible in other\n             * windowing computations.\n             */\n        for (Tuple tuple : newTuples) {\n            sum += (int) tuple.getValue(0);\n        }\n        for (Tuple tuple : expiredTuples) {\n            sum -= (int) tuple.getValue(0);\n        }\n        collector.emit(new Values(sum));\n    }\n```\nThe values from received tuples are being summarized but values from expired tuples are being subtracted. So this part should be related with SlidingWindow. The source itself was simple enough.\n# Examining the source of TumblingWindowAvgBolt\n\nNext is TumblingWindowAvgBolt which is included in the SlidingWIndowTopology.\n\n```lang:TumblingWindowAvgBolt.java\n        @Override\n        public void execute(TupleWindow inputWindow) {\n            int sum = 0;\n            List<Tuple> tuplesInWindow = inputWindow.get();\n            LOG.debug(\"Events in current window: \" + tuplesInWindow.size());\n            if (tuplesInWindow.size() > 0) {\n                /*\n                * Since this is a tumbling window calculation,\n                * we use all the tuples in the window to compute the avg.\n                */\n                for (Tuple tuple : tuplesInWindow) {\n                    sum += (int) tuple.getValue(0);\n                }\n                collector.emit(new Values(sum / tuplesInWindow.size()));\n            }\n        }\n```\nDepending on the size of the Window, the average value of the tuples from inputWindow is output. By the way, since count \u201c3\u201d is configured inside topology main method for this bolt, after three times of summing up, the avg value will be output.\n\n# Examining source of PrinterBolt\nPretty much simple. I don't need to explain at all.\n\n```lang:PrinterBolt.java\n  @Override\n  public void execute(Tuple tuple, BasicOutputCollector collector) {\n    System.out.println(tuple);\n  }\n```\nYear, very simple.\n\n# Summarizing the flow of this topology\nThe sample should work in following steps.\n1. Generates random number from 0~999.\n2. Sum up up to 10 times from the numerical values of the received tuple.\n3. Send total value to next bolt for calculating average value.\n4. Accumulating the total value for three times, then calculate the average value.\n\n# Confirming output logs\nAfter executing sample program, confirm output logs. According to main method, it takes 40 sec to finish executing.\n\n```\n22857 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Preparing bolt __system:(-1)\n22864 [Thread-21-__system-executor[-1 -1]] INFO  o.a.s.d.executor - Prepared bolt __system:(-1)\n22874 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opening spout integer:(2)\n22878 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Opened spout integer:(2)\n22881 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - Activating spout integer:(2)\n22887 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Preparing bolt tumblingavg:(5)\n22891 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Prepared bolt tumblingavg:(5)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Preparing bolt printer:(3)\n22893 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Prepared bolt printer:(3)\n22900 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Preparing bolt slidingsum:(4)\n22901 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Prepared bolt slidingsum:(4)\n22950 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Preparing bolt __acker:(1)\n22952 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Prepared bolt __acker:(1)\n```\nHere, Spout and Bolt that we implement firstly seem to be initialized. Numbers which is configured to each components are important to check behavior later.\n\n```\n22988 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer default [778, 1462006953163, 1]\n22994 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n22995 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.task - Emitting: integer __ack_init [7447250857071583863 -3578654789271241288 2]\n22996 [Thread-15-integer-executor[2 2]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 1 tuple: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]]\n22997 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]\n22998 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1] TASK: 4 DELTA: \n22999 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n23000 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [7447250857071583863 -3578654789271241288 2]\n```\nWell, you can understand random numbers were created and emitted. At first the program sent [778, 1462006953163, 1], and also at next line\n\n```\nTRANSFERING tuple [dest: 4 tuple: source: integer:2, stream: default, id: {7447250857071583863=-3578654789271241288}, [778, 1462006953163, 1]]\n```\nAbove log was output. That means 2nd component \"integer\" sent data to 4th component \"slidingsum\". The IDs initialized firstly were used here. When continuing these processes until 10th. After that output logs pattern was changed.\n\n```\n23921 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Processing received message FOR 4 TUPLE: source: integer:2, stream: default, id: {4389696495574006045=2681496747949810702}, [645, 1462006954095, 10]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Processing received message FOR 1 TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2]\n23921 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [4389696495574006045 2681496747949810702 2] TASK: 1 DELTA: \n23922 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [6050]\n23923 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=-1172784951702062669, 6973864295393994913=1708061666379587936, 7447250857071583863=5623972221711691701, -6102906463311307032=5518334604031423874, -7638682188827435429=4478428313701290490, 4389696495574006045=5932148635671668893, -6197802534174832134=1497464440461667439, -4266159872746606489=3561774369052512930, 4334659838991266401=-7106335497305084820, 4712299375428287216=3508884140400825778}, [6050]]\n```\nTotal number \"6050\" was sent to 5th component \"tumblingavg\". 6050 was stored. This process was done 3 times so check 2nd and 3rd time's sending data.\n\n```\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [11976]\n24961 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {-4601633546221640614=492010799657169784, 317525622483766670=2638127789448427461, 3002989214851206566=128002525292759865, 7447250857071583863=8767372787937047960, -6102906463311307032=-4546730023383659346, 3562603101316339696=-7385522463102788783, -7547522651842339766=4915704745663260957, -8228450230436970384=-4055518290977434481, 6973864295393994913=6291843886548489067, -7638682188827435429=8441873508646088204, 4389696495574006045=-1674211243428697808, -6197802534174832134=2733983747371624992, 2558430164343979559=285379101380278186, -4266159872746606489=-6678113015319323641, 4334659838991266401=999638572688010822, 4712299375428287216=-2506689729719803634, -3288150160972036797=6163930983830697438, -6632312692089791299=4450995360647585394, 3635266110827390635=325375251356977723, 7564414229761366650=126552843783268400}, [11976]]\n:\n:\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.task - Emitting: slidingsum default [15909]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - BOLT ack TASK: 1 TIME:  TUPLE: source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2]\n26001 [Thread-19-__acker-executor[1 1]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: __ack_init, id: {}, [-3948625081878221959 -8424958756548618666 2] TASK: 1 DELTA: 1\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 5 tuple: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]]\n26001 [Thread-25-slidingsum-executor[4 4]] INFO  o.a.s.d.executor - Execute done TUPLE source: integer:2, stream: default, id: {-3948625081878221959=-8424958756548618666}, [34, 1462006956174, 30] TASK: 4 DELTA: \n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Processing received message FOR 5 TUPLE: source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909]\n```\n20th data was 11976 and 30th data was 15909. Target ID was sent together so log length became long and long (^^; Well, we can get 3 total data so average will be calculated.\n\n```\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.task - Emitting: tumblingavg default [11311]\n26003 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - TRANSFERING tuple [dest: 3 tuple: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]]\n26004 [Thread-23-tumblingavg-executor[5 5]] INFO  o.a.s.d.executor - Execute done TUPLE source: slidingsum:4, stream: default, id: {317525622483766670=7555764236357609298, 3002989214851206566=1694128471165560315, 3562603101316339696=-9141305483820762660, -7547522651842339766=-2863953427390624123, 6875073760184740346=-5132920613823939509, -3948625081878221959=-5437427497122664614, -6197802534174832134=-5798652776913323486, 2558430164343979559=-3974124564791740629, 5827912698427451791=-8755182930855226192, 4334659838991266401=1875094829666965635, -3288150160972036797=2882654408400632661, -6632312692089791299=-7416978337353888496, 5660369989147374586=-146257236873007036, -4601633546221640614=314568010495525006, 7447250857071583863=-7894145466289122325, -6102906463311307032=-734768705874586731, 2416468512832932723=5395971769109383713, -7913753694545619816=-422366601723792798, 2216548725421935911=-1747022309515322275, 5545722913635347065=-4183811763737068653, -8228450230436970384=7072197569993326849, 1069888987022072121=1339914806148366726, 6973864295393994913=881160568155161730, -1038295836277073885=-6098822845524698690, -7638682188827435429=-1166341425454927490, 4389696495574006045=621900626234935483, -4266159872746606489=5786349201308905180, 4712299375428287216=7586810889173452616, 3635266110827390635=-4551921407959807206, 7564414229761366650=-2358375753654415983}, [15909] TASK: 5 DELTA: \n26006 [Thread-17-printer-executor[3 3]] INFO  o.a.s.d.executor - Processing received message FOR 3 TUPLE: source: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\nsource: tumblingavg:5, stream: default, id: {317525622483766670=5280243493335298546, 3002989214851206566=5280243493335298546, 3562603101316339696=5280243493335298546, -7547522651842339766=5280243493335298546, 6875073760184740346=-224228321843401347, -3948625081878221959=-224228321843401347, -6197802534174832134=3666185645087914158, 2558430164343979559=5280243493335298546, 5827912698427451791=-224228321843401347, 4334659838991266401=3666185645087914158, -3288150160972036797=5280243493335298546, -6632312692089791299=5280243493335298546, 5660369989147374586=-224228321843401347, -4601633546221640614=3666185645087914158, 7447250857071583863=3666185645087914158, -6102906463311307032=3666185645087914158, 2416468512832932723=-224228321843401347, -7913753694545619816=-224228321843401347, 2216548725421935911=-224228321843401347, 5545722913635347065=-224228321843401347, -8228450230436970384=5280243493335298546, 1069888987022072121=-224228321843401347, 6973864295393994913=3666185645087914158, -1038295836277073885=-224228321843401347, -7638682188827435429=3666185645087914158, 4389696495574006045=3666185645087914158, -4266159872746606489=3666185645087914158, 4712299375428287216=3666185645087914158, 3635266110827390635=5280243493335298546, 7564414229761366650=5280243493335298546}, [11311]\n```\n(6050 + 11976 + 15909) / 3 = 11311.66666... So the decimal point seems to be suppressed. 11131 was sent to Printer Bolt.\n\nThen we could confirm all the behavior of sample program.\n\n* Review Native Streaming Window API\nI used Native Streaming Window API and I understood the most biggest features for this API is that we can develop original Spout and Bolt as we like. For development way you can refer another Spout and Bolt. If we can be familiar with development of this API, we don't need to use CEP libraries like \"Siddhi\", we can just implement that controlling with Storm only.\n"}