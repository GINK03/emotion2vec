{"context": "You can stop reading now if you are trying to build GPSBabel from the latest code on the GitHub repository. This issue has been already fixed on it.\n\n;tl;dr\nYou need to set EXTRA_LDFLAGS to build GPSBabel 1.5.3 on Mac OS X. Please adjust the /Library/Qt in the path accordingly.\nexport EXTRA_LDFLAGS=\"-Xlinker -rpath -Xlinker /Library/Qt/5.6/clang_64/lib\"\n\n\nIntro\nGPSBabel is a command line tool to manage GPS data: downloading data from GPS devices, converting data format. An executable package is available for Mac OS X, but I needed to build it from source to work on some issues on the latest version (1.5.3 currently).\n\nVersions\nI used the following versions to build GPSBabel 1.5.3.\n\nMac OS X 10.10\nXcode 7.2\nGPSBabel 1.5.3\nQt 5.6\n\n\nSetup\nGPSBabel 1.5 requires Qt to be built. You can download it from Qt site. I installed it under /Library/Qt directory, and added it to the PATH.\nexport PATH=${PATH}:/Library/Qt/5.6/clang_64/bin/\n\n\nBuild\nIt could be compiled simply as follows:\n./configure && make\n\nBut the binary doesn't run. It failed with the following error. The dyld couldn't resolve the @rpath at runtime.\n./gpsbabel \ndyld: Library not loaded: @rpath/QtCore.framework/Versions/5/QtCore\n  Referenced from: /Users/miz/Downloads/gpsbabel/./gpsbabel\n  Reason: image not found\nTrace/BPT trap: 5\n\nIn order to fix the error,  the EXTRA_LDFLAGS needs to be set. It specifies the run-path search path for ld.\nmake clean\n# or simply \nrm gpsbabel\n\nexport EXTRA_LDFLAGS=\"-Xlinker -rpath -Xlinker /Library/Qt/5.6/clang_64/lib\"\nmake\n\nThen, it works :)\n./gpsbabel \nGPSBabel Version 1.5.3.  http://www.gpsbabel.org\n...\n\n\nTips\nYou can check the dyld name expansion at runtime if you set DYLD_PRINT_RPATHS.\nexport DYLD_PRINT_RPATHS=1\n\n./gpsbabel\nRPATH successful expansion of @rpath/QtCore.framework/Versions/5/QtCore to: /Library/Qt/5.6/clang_64/lib/QtCore.framework/Versions/5/QtCore\nGPSBabel Version 1.5.3.  http://www.gpsbabel.org\n...\n\nFor more detail about the run-path, please refer to Run-Path Dependent Libraries.\n**You can stop reading now if you are trying to build GPSBabel from the latest code on the [GitHub repository](https://github.com/gpsbabel/gpsbabel)**. This issue has been already fixed on it.\n\n# ;tl;dr\nYou need to set ``EXTRA_LDFLAGS`` to build GPSBabel 1.5.3 on Mac OS X. Please adjust the ``/Library/Qt`` in the path accordingly.\n\n```sh\nexport EXTRA_LDFLAGS=\"-Xlinker -rpath -Xlinker /Library/Qt/5.6/clang_64/lib\"\n```\n\n\n# Intro\n[GPSBabel](http://www.gpsbabel.org/lists.html) is a command line tool to manage GPS data: downloading data from GPS devices, converting data format. An executable package is available for Mac OS X, but I needed to build it from source to work on some issues on the latest version (1.5.3 currently).\n\n# Versions\nI used the following versions to build GPSBabel 1.5.3.\n\n* Mac OS X 10.10\n* Xcode 7.2\n* [GPSBabel 1.5.3](http://www.gpsbabel.org/download.html)\n* [Qt 5.6](http://www.qt.io/)\n\n# Setup\nGPSBabel 1.5 requires Qt to be built. You can download it from [Qt](http://www.qt.io/) site. I installed it under ``/Library/Qt`` directory, and added it to the ``PATH``.\n\n```sh\nexport PATH=${PATH}:/Library/Qt/5.6/clang_64/bin/\n```\n\n# Build\nIt could be compiled simply as follows:\n\n```sh\n./configure && make\n```\n\nBut the binary doesn't run. It failed with the following error. The ``dyld`` couldn't resolve the ``@rpath`` at runtime.\n\n```sh\n./gpsbabel \ndyld: Library not loaded: @rpath/QtCore.framework/Versions/5/QtCore\n  Referenced from: /Users/miz/Downloads/gpsbabel/./gpsbabel\n  Reason: image not found\nTrace/BPT trap: 5\n```\n\nIn order to fix the error,  the ``EXTRA_LDFLAGS`` needs to be set. It specifies the run-path search path for ``ld``.\n\n```sh\nmake clean\n# or simply \nrm gpsbabel\n\nexport EXTRA_LDFLAGS=\"-Xlinker -rpath -Xlinker /Library/Qt/5.6/clang_64/lib\"\nmake\n```\n\nThen, it works :)\n\n```sh\n./gpsbabel \nGPSBabel Version 1.5.3.  http://www.gpsbabel.org\n...\n```\n\n# Tips\nYou can check the ``dyld`` name expansion at runtime if you set ``DYLD_PRINT_RPATHS``.\n\n```sh\nexport DYLD_PRINT_RPATHS=1\n\n./gpsbabel\nRPATH successful expansion of @rpath/QtCore.framework/Versions/5/QtCore to: /Library/Qt/5.6/clang_64/lib/QtCore.framework/Versions/5/QtCore\nGPSBabel Version 1.5.3.  http://www.gpsbabel.org\n...\n```\n\nFor more detail about the run-path, please refer to [Run-Path Dependent Libraries](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/RunpathDependentLibraries.html).\n", "tags": ["Build", "GPS", "Mac"]}