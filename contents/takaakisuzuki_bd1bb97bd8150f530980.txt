{"context": "\n\n\u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u3001OpenStack Advent Calendar 2016\u306e12/14\u5206\u306e\u8a18\u4e8b\u306b\u306a\u308a\u307e\u3059.\nCanonical\u306e\u9234\u6728\u3067\u3059\u3001OpenStack\u306eCompute\u30ce\u30fc\u30c9\u3092LXD\u3067\u7528\u610f\u3059\u308b\u6a5f\u4f1a\u304c\u3042\u308a\u307e\u3057\u305f\u306e\u3067\n\u7c21\u6613\u3067\u3059\u304c\u3054\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059.\n\n\u7269\u7406\u74b0\u5883\nCanonical\u306eOrangeBox\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n[OpenStack\u30ce\u30fc\u30c9]\nNodes: Controller 1\u53f0\u3001Neutron GW 1\u53f0\u3001Compute3\u53f0\nOS: Ubuntu16.04 xenial\n\nOpenStack\u306e\u7528\u610f\nJuju\u3092\u5229\u7528\u3057\u3066OpenStack LXD Bundle Charm\u3092\u5229\u7528\u3057\u3066\u30c7\u30d7\u30ed\u30a4.\nOpenStack LXD Bundle Charm: https://jujucharms.com/u/openstack-charmers-next/openstack-lxd\nubuntu@OrangeBox64:~$ juju status\nModel    Controller  Cloud/Region  Version\ndefault  maas        maas          2.0.1\n\nApp                    Version      Status   Scale  Charm                  Store       Rev  OS      Notes\nglance                 13.0.0       active       1  glance                 jujucharms  253  ubuntu  \nkeystone               10.0.0       active       1  keystone               jujucharms  258  ubuntu  \nlxd                    2.0.5        active       3  lxd                    jujucharms    4  ubuntu  \nmysql                  5.6.21-25.8  active       1  percona-cluster        jujucharms  246  ubuntu  \nneutron-api            9.0.0        active       1  neutron-api            jujucharms  246  ubuntu  \nneutron-gateway        9.0.0        active       1  neutron-gateway        jujucharms  232  ubuntu  \nneutron-openvswitch    9.0.0        active       3  neutron-openvswitch    jujucharms  238  ubuntu  \nnova-cloud-controller  14.0.1       active       1  nova-cloud-controller  jujucharms  292  ubuntu  \nnova-compute           14.0.1       active       3  nova-compute           jujucharms  259  ubuntu  \nntp                                 unknown      4  ntp                    jujucharms    0  ubuntu  \nopenstack-dashboard    10.0.0       active       1  openstack-dashboard    jujucharms  243  ubuntu  \nrabbitmq-server        3.5.7        active       1  rabbitmq-server        jujucharms   54  ubuntu  \n\nUnit                      Workload  Agent  Machine  Public address  Ports           Message\nglance/0*                 active    idle   23       172.27.64.5     9292/tcp        Unit is ready\nkeystone/0*               active    idle   23       172.27.64.5     5000/tcp        Unit is ready\nmysql/0*                  active    idle   21       172.27.64.3                     Unit is ready\nneutron-api/0*            active    idle   23       172.27.64.5     9696/tcp        Unit is ready\nneutron-gateway/0*        active    idle   26       172.27.64.7                     Unit is ready\n  ntp/3                   unknown   idle            172.27.64.7                     \nnova-cloud-controller/0*  active    idle   23       172.27.64.5     8774/tcp        Unit is ready\nnova-compute/0            active    idle   25       172.27.64.8                     Unit is ready\n  lxd/1                   active    idle            172.27.64.8                     Unit is ready\n  neutron-openvswitch/1   active    idle            172.27.64.8                     Unit is ready\n  ntp/1                   unknown   idle            172.27.64.8                     \nnova-compute/1*           active    idle   22       172.27.64.4                     Unit is ready\n  lxd/0*                  active    idle            172.27.64.4                     Unit is ready\n  neutron-openvswitch/0*  active    idle            172.27.64.4                     Unit is ready\n  ntp/0*                  unknown   idle            172.27.64.4                     \nnova-compute/2            active    idle   24       172.27.64.6                     Unit is ready\n  lxd/2                   active    idle            172.27.64.6                     Unit is ready\n  neutron-openvswitch/2   active    idle            172.27.64.6                     Unit is ready\n  ntp/2                   unknown   idle            172.27.64.6                     \nopenstack-dashboard/0*    active    idle   23       172.27.64.5     80/tcp,443/tcp  Unit is ready\nrabbitmq-server/0*        active    idle   23       172.27.64.5     5672/tcp        Unit is ready\n\nMachine   State    DNS           Inst id               Series  AZ\n21        started  172.27.64.3   4y3hgt                xenial  zone0\n22        started  172.27.64.4   4y3hfm                xenial  zone1\n22/lxd/0  started  172.27.65.27  juju-79fcc7-22-lxd-0  xenial  \n22/lxd/1  started  172.27.64.10  juju-79fcc7-22-lxd-1  xenial  \n22/lxd/2  started  172.27.65.25  juju-79fcc7-22-lxd-2  xenial  \n23        started  172.27.64.5   4y3hfs                xenial  zone2\n23/lxd/0  started  172.27.64.9   juju-79fcc7-23-lxd-0  xenial  \n23/lxd/1  started  172.27.65.23  juju-79fcc7-23-lxd-1  xenial  \n23/lxd/2  started  172.27.65.24  juju-79fcc7-23-lxd-2  xenial  \n24        started  172.27.64.6   4y3hgr                xenial  zone0\n24/lxd/0  started  172.27.65.22  juju-79fcc7-24-lxd-0  xenial  \n24/lxd/1  started  172.27.65.28  juju-79fcc7-24-lxd-1  xenial  \n24/lxd/2  started  172.27.65.29  juju-79fcc7-24-lxd-2  xenial  \n25        started  172.27.64.8   4y3hft                xenial  zone2\n25/lxd/0  started  172.27.65.21  juju-79fcc7-25-lxd-0  xenial  \n25/lxd/1  started  172.27.65.26  juju-79fcc7-25-lxd-1  xenial  \n26        started  172.27.64.7   4y3hfn                xenial  zone1\n\nRelation                 Provides               Consumes               Type\ncluster                  glance                 glance                 peer\nidentity-service         glance                 keystone               regular\nshared-db                glance                 mysql                  regular\nimage-service            glance                 nova-cloud-controller  regular\nimage-service            glance                 nova-compute           regular\namqp                     glance                 rabbitmq-server        regular\ncluster                  keystone               keystone               peer\nshared-db                keystone               mysql                  regular\nidentity-service         keystone               neutron-api            regular\nidentity-service         keystone               nova-cloud-controller  regular\nidentity-service         keystone               openstack-dashboard    regular\nlxd-migration            lxd                    lxd                    peer\nlxd                      lxd                    nova-compute           regular\ncluster                  mysql                  mysql                  peer\nshared-db                mysql                  neutron-api            regular\nshared-db                mysql                  nova-cloud-controller  regular\ncluster                  neutron-api            neutron-api            peer\nneutron-plugin-api       neutron-api            neutron-gateway        regular\nneutron-plugin-api       neutron-api            neutron-openvswitch    regular\nneutron-api              neutron-api            nova-cloud-controller  regular\namqp                     neutron-api            rabbitmq-server        regular\ncluster                  neutron-gateway        neutron-gateway        peer\nquantum-network-service  neutron-gateway        nova-cloud-controller  regular\njuju-info                neutron-gateway        ntp                    subordinate\namqp                     neutron-gateway        rabbitmq-server        regular\nneutron-plugin           neutron-openvswitch    nova-compute           regular\namqp                     neutron-openvswitch    rabbitmq-server        regular\ncluster                  nova-cloud-controller  nova-cloud-controller  peer\ncloud-compute            nova-cloud-controller  nova-compute           regular\namqp                     nova-cloud-controller  rabbitmq-server        regular\nlxd                      nova-compute           lxd                    subordinate\nneutron-plugin           nova-compute           neutron-openvswitch    subordinate\ncompute-peer             nova-compute           nova-compute           peer\njuju-info                nova-compute           ntp                    subordinate\namqp                     nova-compute           rabbitmq-server        regular\nntp-peers                ntp                    ntp                    peer\ncluster                  openstack-dashboard    openstack-dashboard    peer\ncluster                  rabbitmq-server        rabbitmq-server        peer\n\n\nCompute\u30ce\u30fc\u30c9LXD\u30d1\u30e9\u30e1\u30fc\u30bf\n\nnova.conf\n[DEFAULT]\nverbose=True\ndebug=True\ndhcpbridge_flagfile=/etc/nova/nova.conf\ndhcpbridge=/usr/bin/nova-dhcpbridge\nlogdir=/var/log/nova\nstate_path=/var/lib/nova\nforce_dhcp_release=True\nuse_syslog = False\nec2_private_dns_show_ip=True\napi_paste_config=/etc/nova/api-paste.ini\nenabled_apis=osapi_compute,metadata\nauth_strategy=keystone\nmy_ip = 172.27.64.8\n\nvnc_enabled = False\nnovnc_enabled = False\nlibvirt_vif_driver = nova.virt.libvirt.vif.LibvirtGenericVIFDriver\nsecurity_group_api = neutron\nfirewall_driver = nova.virt.firewall.NoopFirewallDriver\nnetwork_api_class = nova.network.neutronv2.api.API\nuse_neutron = True\nvolume_api_class = nova.volume.cinder.API\nreserved_host_memory = 512\n\n\n\n[neutron]\nurl = http://172.27.64.5:9696\nauth_url = http://172.27.64.5:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = services\nusername = nova\npassword = ptMFPHWVRBhyGrXqhxhPwwtmKbZwcXXwHkxTVkGbrr9FXSxZmCghYLb7VwHh7KNC\nsigning_dir = \n[keystone_authtoken]\nauth_uri = http://172.27.64.5:5000\nauth_url = http://172.27.64.5:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = services\nusername = nova\npassword = ptMFPHWVRBhyGrXqhxhPwwtmKbZwcXXwHkxTVkGbrr9FXSxZmCghYLb7VwHh7KNC\nsigning_dir = \n\n\n[glance]\napi_servers = http://172.27.64.5:9292\n[libvirt]\nrbd_user = \nrbd_secret_uuid = \nlive_migration_uri = qemu+ssh://%s/system\n\n# Disable tunnelled migration so that selective\n# live block migration can be supported.\nlive_migration_tunnelled = False\n\n\n\n[oslo_messaging_rabbit]\nrabbit_userid = nova\nrabbit_virtual_host = openstack\nrabbit_password = SK2CLycVLTYVYJmCkN6rhCYPjPrNdYGpNyxSShqY775WPJyJC458HVHrswzwZXYW\nrabbit_host = 172.27.64.5\n\n\n[cinder]\n\nos_region_name = RegionOne\n\n\n\n[oslo_concurrency]\nlock_path=/var/lock/nova\n\n[workarounds]\ndisable_libvirt_livesnapshot = False\n\n\n\n[serial_console]\nenabled = false\nproxyclient_address = 172.27.64.8\nbase_url = ws://172.27.64.5:6083/\n\n\n\nnova-compute.conf\n[DEFAULT]\ncompute_driver = lxd.LXDDriver\n\n\ncompute_driver\u30d1\u30e9\u30e1\u30fc\u30bf\u3092lxd.LXDDriver\u306b\u5909\u66f4.\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u30d0\u30fc\u30b8\u30e7\u30f3\u3068LXD\u306e\u52d5\u4f5c\u78ba\u8a8d\nroot@node07ob64:~# dpkg -l | grep lxd\nii  lxd                                2.0.5-0ubuntu1~ubuntu16.04.1      amd64        Container hypervisor based on LXC - daemon\nii  lxd-client                         2.0.5-0ubuntu1~ubuntu16.04.1      amd64        Container hypervisor based on LXC - client\nii  nova-compute-lxd                   14.0.0-0ubuntu1~cloud0            all          Openstack Compute - LXD container hypervisor support\nii  python-nova-lxd                    14.0.0-0ubuntu1~cloud0            all          OpenStack Compute Python libraries - LXD driver\nii  python-pylxd                       2.1.1-0ubuntu1~cloud0             all          Python library for interacting with LXD REST API\nroot@node07ob64:~# lxc list\n+----------------------+---------+----------------------+------+------------+-----------+\n|         NAME         |  STATE  |         IPV4         | IPV6 |    TYPE    | SNAPSHOTS |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-0 | RUNNING | 172.27.65.21 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-1 | RUNNING | 172.27.65.26 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n\n\nHypervisor\u306e\u78ba\u8a8d\n\nCompute\u30ce\u30fc\u30c9\u304cType \"lxd\"\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b.\n\n\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u30c6\u30ca\u30f3\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4f5c\u6210\n\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8907\u6570\u8d77\u52d5\n\n\nNova LXD\u306e\u52d5\u4f5c\u6982\u8981\n/usr/lib/python2.7/dist-packages/nova/virt/lxd/driver.py\u3092\u53c2\u7167.\n\npylxd\u3092\u5229\u7528\u3057\u3066LXD\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb.\nGlance\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066\u304f\u308b.\nLXC\u30b3\u30f3\u30c6\u30ca\u7528\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u4f5c\u6210.\nLXC\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210.\nLXC\u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30bf\u30fc\u30c8.\n\n\nnova-compute.log\u304b\u3089\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\u629c\u7c8b\n#\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u7528LinuxBridge\u306e\u4f5c\u6210\nsudo nova-rootwrap /etc/nova/rootwrap.conf brctl addbr qbr9e0c6af1-30 \nsudo nova-rootwrap /etc/nova/rootwrap.conf brctl stp qbr9e0c6af1-30 off\nsudo nova-rootwrap /etc/nova/rootwrap.conf tee /sys/class/net/qbr9e0c6af1-30/bridge/multicast_snooping\n#\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u7528\u306eveth\u306e\u4f5c\u6210\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link add qvb9e0c6af1-30 type veth peer name qvo9e0c6af1-30 \nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvb9e0c6af1-30 up\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvb9e0c6af1-30 promisc on\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvo9e0c6af1-30 up\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvo9e0c6af1-30 promisc on\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qbr9e0c6af1-30 up\n#veth\u3092LinuxBridge\u3078\u63a5\u7d9a\nsudo nova-rootwrap /etc/nova/rootwrap.conf brctl addif qbr9e0c6af1-30 qvb9e0c6af1-30\n#veth\u3092OVS\u306ebr-int\u3078\u63a5\u7d9a\nsudo nova-rootwrap /etc/nova/rootwrap.conf ovs-vsctl --timeout=120 -- --if-exists del-port qvo9e0c6af1-30 -- add-port br-int qvo9e0c6af1-30 -- set Interface qvo9e0c6af1-30 external-ids:iface-id=9e0c6af1-30bc-418d-b82f-c025c935d987 external-ids:iface-status=active external-ids:attached-mac=fa:16:3e:e4:a3:bf external-ids:vm-uuid=instance-00000014\n\n\nroot@node07ob64:~# lxc list\n+----------------------+---------+----------------------+------+------------+-----------+\n|         NAME         |  STATE  |         IPV4         | IPV6 |    TYPE    | SNAPSHOTS |\n+----------------------+---------+----------------------+------+------------+-----------+\n| instance-00000002    | RUNNING | 192.168.20.4 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| instance-0000000c    | RUNNING | 192.168.20.12 (eth0) |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| instance-00000012    | RUNNING | 192.168.20.7 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-0 | RUNNING | 172.27.65.21 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-1 | RUNNING | 172.27.65.26 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n\nnova\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\u5f8c\u306b\u30b3\u30f3\u30d4\u30e5\u30fc\u30c8\u30ce\u30fc\u30c9\u306b\u3066lxc list\u3092\u3059\u308b\u3068\u30b3\u30f3\u30c6\u30ca\u4e00\u89a7\u304c\u898b\u308c\u307e\u3059.\nroot@node07ob64:/usr/lib/python2.7/dist-packages/nova/api# lxc profile show instance-00000014\nname: instance-00000014\nconfig:\n  boot.autostart: \"True\"\n  limits.cpu: \"1\"\n  limits.memory: 2048MB\n  raw.lxc: |\n    lxc.console.logfile=/var/log/lxd/instance-00000014/console.log\ndescription: \"\"\ndevices:\n  qbr9e0c6af1-30:\n    host_name: tap9e0c6af1-30\n    hwaddr: fa:16:3e:e4:a3:bf\n    nictype: bridged\n    parent: qbr9e0c6af1-30\n    type: nic\n  root:\n    path: /\n    size: 0GB\n    type: disk\n\nlxc profile\u30b3\u30de\u30f3\u30c9\u3067\u8a73\u7d30\u3092\u78ba\u8a8d\u3001nictype\u306f\"bridged\".\nroot@node07ob64:~# lxc exec instance-0000000c /bin/bash\nroot@lxc-test-1:~# ifconfig\neth0      Link encap:Ethernet  HWaddr fa:16:3e:54:f9:9d  \n          inet addr:192.168.20.12  Bcast:192.168.20.255  Mask:255.255.255.0\n          inet6 addr: fe80::f816:3eff:fe54:f99d/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1456  Metric:1\n          RX packets:2711 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:1425 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:252983 (252.9 KB)  TX bytes:129955 (129.9 KB)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:4 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:4 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1 \n          RX bytes:280 (280.0 B)  TX bytes:280 (280.0 B)\n\n\u3082\u3061\u308d\u3093lxc exec\u30b3\u30de\u30f3\u30c9\u3067\u30b3\u30f3\u30c6\u30ca\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u30b3\u30f3\u30d4\u30e5\u30fc\u30c8\u30ce\u30fc\u30c9\u9593\u3067\u306e\u7c21\u6613\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u56f3.\nubuntu@OrangeBox64:~$ juju ssh 26\nubuntu@node02ob64:~$ sudo -s\n\nroot@node02ob64:~# ip netns\nqdhcp-f8ec06d8-c199-45b8-bc72-56ee2c806fed (id: 3)\nqdhcp-2ed6a3e2-9d78-4323-b6dd-d433e67d7f9f (id: 2)\nqrouter-35fea0f3-ca4d-4bdf-a3b7-c00194bbd566 (id: 1)\nqdhcp-ac7bafe8-3c37-48ba-8c24-98be14f4d9f7 (id: 0)\n\nroot@node02ob64:~# ip netns exec qrouter-35fea0f3-ca4d-4bdf-a3b7-c00194bbd566 bash\n\nroot@node02ob64:~# ping 119.115.26.136\nPING 119.115.26.136 (119.115.26.136) 56(84) bytes of data.\n64 bytes from 119.115.26.136: icmp_seq=1 ttl=64 time=0.816 ms\n64 bytes from 119.115.26.136: icmp_seq=2 ttl=64 time=0.462 ms\n64 bytes from 119.115.26.136: icmp_seq=3 ttl=64 time=0.383 ms\n^C\n--- 119.115.26.136 ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2000ms\nrtt min/avg/max/mdev = 0.383/0.553/0.816/0.190 ms\n\nroot@node02ob64:~# ping 119.115.26.133\nPING 119.115.26.133 (119.115.26.133) 56(84) bytes of data.\n64 bytes from 119.115.26.133: icmp_seq=1 ttl=64 time=0.827 ms\n64 bytes from 119.115.26.133: icmp_seq=2 ttl=64 time=0.369 ms\n64 bytes from 119.115.26.133: icmp_seq=3 ttl=64 time=0.497 ms\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ce\u30fc\u30c9\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u4ed8\u4e0e\u3057\u305f\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084FloatingIP\u306e\u63a5\u7d9a\u3082\u53ef\u80fd\u3067\u3059.\n\n\u304a\u308f\u308a\u306b\n\u901a\u5e38\u306fKVM\u3092\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u30fc\u306b\u4f7f\u7528\u3055\u308c\u3066\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002NovaLXD\u3092\u5229\u7528\u3057\u3066LXC\u306b\u3059\u308b\u3053\u3068\u3067KVM\u306b\u5b58\u5728\u3059\u308b\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3092\u53d6\u308a\u9664\u3044\u305f\u308a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\u524a\u9664\u6642\u9593\u3092\u77ed\u7e2e\u3059\u308b\u3067\u304d\u308b\u306e\u304b\u306a\u3068\u8003\u3048\u307e\u3059\u3001NovaLXD\u306fOpenStack\u306e\u53ef\u80fd\u6027\u3092\u5e83\u3081\u3066\u304f\u308c\u308b\u5b58\u5728\u4e00\u3064\u3067\u3059.\n#\u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f\u3001OpenStack Advent Calendar 2016\u306e12/14\u5206\u306e\u8a18\u4e8b\u306b\u306a\u308a\u307e\u3059.\nCanonical\u306e\u9234\u6728\u3067\u3059\u3001OpenStack\u306eCompute\u30ce\u30fc\u30c9\u3092LXD\u3067\u7528\u610f\u3059\u308b\u6a5f\u4f1a\u304c\u3042\u308a\u307e\u3057\u305f\u306e\u3067\n\u7c21\u6613\u3067\u3059\u304c\u3054\u7d39\u4ecb\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059.\n\n#\u7269\u7406\u74b0\u5883\nCanonical\u306eOrangeBox\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n![Screenshot from 2016-12-13 14-29-08.png](https://qiita-image-store.s3.amazonaws.com/0/76442/8e13fee0-2730-3a5e-9d91-3f01da3f9464.png)\n![Screenshot from 2016-12-13 14-37-48.png](https://qiita-image-store.s3.amazonaws.com/0/76442/4c97a7e1-fcf4-18ac-6cdb-be2374732744.png)\n\n[OpenStack\u30ce\u30fc\u30c9]\nNodes: Controller 1\u53f0\u3001Neutron GW 1\u53f0\u3001Compute3\u53f0\nOS: Ubuntu16.04 xenial\n\n#OpenStack\u306e\u7528\u610f\nJuju\u3092\u5229\u7528\u3057\u3066OpenStack LXD Bundle Charm\u3092\u5229\u7528\u3057\u3066\u30c7\u30d7\u30ed\u30a4.\nOpenStack LXD Bundle Charm: https://jujucharms.com/u/openstack-charmers-next/openstack-lxd\n\n```\nubuntu@OrangeBox64:~$ juju status\nModel    Controller  Cloud/Region  Version\ndefault  maas        maas          2.0.1\n\nApp                    Version      Status   Scale  Charm                  Store       Rev  OS      Notes\nglance                 13.0.0       active       1  glance                 jujucharms  253  ubuntu  \nkeystone               10.0.0       active       1  keystone               jujucharms  258  ubuntu  \nlxd                    2.0.5        active       3  lxd                    jujucharms    4  ubuntu  \nmysql                  5.6.21-25.8  active       1  percona-cluster        jujucharms  246  ubuntu  \nneutron-api            9.0.0        active       1  neutron-api            jujucharms  246  ubuntu  \nneutron-gateway        9.0.0        active       1  neutron-gateway        jujucharms  232  ubuntu  \nneutron-openvswitch    9.0.0        active       3  neutron-openvswitch    jujucharms  238  ubuntu  \nnova-cloud-controller  14.0.1       active       1  nova-cloud-controller  jujucharms  292  ubuntu  \nnova-compute           14.0.1       active       3  nova-compute           jujucharms  259  ubuntu  \nntp                                 unknown      4  ntp                    jujucharms    0  ubuntu  \nopenstack-dashboard    10.0.0       active       1  openstack-dashboard    jujucharms  243  ubuntu  \nrabbitmq-server        3.5.7        active       1  rabbitmq-server        jujucharms   54  ubuntu  \n\nUnit                      Workload  Agent  Machine  Public address  Ports           Message\nglance/0*                 active    idle   23       172.27.64.5     9292/tcp        Unit is ready\nkeystone/0*               active    idle   23       172.27.64.5     5000/tcp        Unit is ready\nmysql/0*                  active    idle   21       172.27.64.3                     Unit is ready\nneutron-api/0*            active    idle   23       172.27.64.5     9696/tcp        Unit is ready\nneutron-gateway/0*        active    idle   26       172.27.64.7                     Unit is ready\n  ntp/3                   unknown   idle            172.27.64.7                     \nnova-cloud-controller/0*  active    idle   23       172.27.64.5     8774/tcp        Unit is ready\nnova-compute/0            active    idle   25       172.27.64.8                     Unit is ready\n  lxd/1                   active    idle            172.27.64.8                     Unit is ready\n  neutron-openvswitch/1   active    idle            172.27.64.8                     Unit is ready\n  ntp/1                   unknown   idle            172.27.64.8                     \nnova-compute/1*           active    idle   22       172.27.64.4                     Unit is ready\n  lxd/0*                  active    idle            172.27.64.4                     Unit is ready\n  neutron-openvswitch/0*  active    idle            172.27.64.4                     Unit is ready\n  ntp/0*                  unknown   idle            172.27.64.4                     \nnova-compute/2            active    idle   24       172.27.64.6                     Unit is ready\n  lxd/2                   active    idle            172.27.64.6                     Unit is ready\n  neutron-openvswitch/2   active    idle            172.27.64.6                     Unit is ready\n  ntp/2                   unknown   idle            172.27.64.6                     \nopenstack-dashboard/0*    active    idle   23       172.27.64.5     80/tcp,443/tcp  Unit is ready\nrabbitmq-server/0*        active    idle   23       172.27.64.5     5672/tcp        Unit is ready\n\nMachine   State    DNS           Inst id               Series  AZ\n21        started  172.27.64.3   4y3hgt                xenial  zone0\n22        started  172.27.64.4   4y3hfm                xenial  zone1\n22/lxd/0  started  172.27.65.27  juju-79fcc7-22-lxd-0  xenial  \n22/lxd/1  started  172.27.64.10  juju-79fcc7-22-lxd-1  xenial  \n22/lxd/2  started  172.27.65.25  juju-79fcc7-22-lxd-2  xenial  \n23        started  172.27.64.5   4y3hfs                xenial  zone2\n23/lxd/0  started  172.27.64.9   juju-79fcc7-23-lxd-0  xenial  \n23/lxd/1  started  172.27.65.23  juju-79fcc7-23-lxd-1  xenial  \n23/lxd/2  started  172.27.65.24  juju-79fcc7-23-lxd-2  xenial  \n24        started  172.27.64.6   4y3hgr                xenial  zone0\n24/lxd/0  started  172.27.65.22  juju-79fcc7-24-lxd-0  xenial  \n24/lxd/1  started  172.27.65.28  juju-79fcc7-24-lxd-1  xenial  \n24/lxd/2  started  172.27.65.29  juju-79fcc7-24-lxd-2  xenial  \n25        started  172.27.64.8   4y3hft                xenial  zone2\n25/lxd/0  started  172.27.65.21  juju-79fcc7-25-lxd-0  xenial  \n25/lxd/1  started  172.27.65.26  juju-79fcc7-25-lxd-1  xenial  \n26        started  172.27.64.7   4y3hfn                xenial  zone1\n\nRelation                 Provides               Consumes               Type\ncluster                  glance                 glance                 peer\nidentity-service         glance                 keystone               regular\nshared-db                glance                 mysql                  regular\nimage-service            glance                 nova-cloud-controller  regular\nimage-service            glance                 nova-compute           regular\namqp                     glance                 rabbitmq-server        regular\ncluster                  keystone               keystone               peer\nshared-db                keystone               mysql                  regular\nidentity-service         keystone               neutron-api            regular\nidentity-service         keystone               nova-cloud-controller  regular\nidentity-service         keystone               openstack-dashboard    regular\nlxd-migration            lxd                    lxd                    peer\nlxd                      lxd                    nova-compute           regular\ncluster                  mysql                  mysql                  peer\nshared-db                mysql                  neutron-api            regular\nshared-db                mysql                  nova-cloud-controller  regular\ncluster                  neutron-api            neutron-api            peer\nneutron-plugin-api       neutron-api            neutron-gateway        regular\nneutron-plugin-api       neutron-api            neutron-openvswitch    regular\nneutron-api              neutron-api            nova-cloud-controller  regular\namqp                     neutron-api            rabbitmq-server        regular\ncluster                  neutron-gateway        neutron-gateway        peer\nquantum-network-service  neutron-gateway        nova-cloud-controller  regular\njuju-info                neutron-gateway        ntp                    subordinate\namqp                     neutron-gateway        rabbitmq-server        regular\nneutron-plugin           neutron-openvswitch    nova-compute           regular\namqp                     neutron-openvswitch    rabbitmq-server        regular\ncluster                  nova-cloud-controller  nova-cloud-controller  peer\ncloud-compute            nova-cloud-controller  nova-compute           regular\namqp                     nova-cloud-controller  rabbitmq-server        regular\nlxd                      nova-compute           lxd                    subordinate\nneutron-plugin           nova-compute           neutron-openvswitch    subordinate\ncompute-peer             nova-compute           nova-compute           peer\njuju-info                nova-compute           ntp                    subordinate\namqp                     nova-compute           rabbitmq-server        regular\nntp-peers                ntp                    ntp                    peer\ncluster                  openstack-dashboard    openstack-dashboard    peer\ncluster                  rabbitmq-server        rabbitmq-server        peer\n```\n#Compute\u30ce\u30fc\u30c9LXD\u30d1\u30e9\u30e1\u30fc\u30bf\n```nova.conf\n[DEFAULT]\nverbose=True\ndebug=True\ndhcpbridge_flagfile=/etc/nova/nova.conf\ndhcpbridge=/usr/bin/nova-dhcpbridge\nlogdir=/var/log/nova\nstate_path=/var/lib/nova\nforce_dhcp_release=True\nuse_syslog = False\nec2_private_dns_show_ip=True\napi_paste_config=/etc/nova/api-paste.ini\nenabled_apis=osapi_compute,metadata\nauth_strategy=keystone\nmy_ip = 172.27.64.8\n\nvnc_enabled = False\nnovnc_enabled = False\nlibvirt_vif_driver = nova.virt.libvirt.vif.LibvirtGenericVIFDriver\nsecurity_group_api = neutron\nfirewall_driver = nova.virt.firewall.NoopFirewallDriver\nnetwork_api_class = nova.network.neutronv2.api.API\nuse_neutron = True\nvolume_api_class = nova.volume.cinder.API\nreserved_host_memory = 512\n\n\n\n[neutron]\nurl = http://172.27.64.5:9696\nauth_url = http://172.27.64.5:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = services\nusername = nova\npassword = ptMFPHWVRBhyGrXqhxhPwwtmKbZwcXXwHkxTVkGbrr9FXSxZmCghYLb7VwHh7KNC\nsigning_dir = \n[keystone_authtoken]\nauth_uri = http://172.27.64.5:5000\nauth_url = http://172.27.64.5:35357\nauth_type = password\nproject_domain_name = default\nuser_domain_name = default\nproject_name = services\nusername = nova\npassword = ptMFPHWVRBhyGrXqhxhPwwtmKbZwcXXwHkxTVkGbrr9FXSxZmCghYLb7VwHh7KNC\nsigning_dir = \n\n\n[glance]\napi_servers = http://172.27.64.5:9292\n[libvirt]\nrbd_user = \nrbd_secret_uuid = \nlive_migration_uri = qemu+ssh://%s/system\n\n# Disable tunnelled migration so that selective\n# live block migration can be supported.\nlive_migration_tunnelled = False\n\n\n\n[oslo_messaging_rabbit]\nrabbit_userid = nova\nrabbit_virtual_host = openstack\nrabbit_password = SK2CLycVLTYVYJmCkN6rhCYPjPrNdYGpNyxSShqY775WPJyJC458HVHrswzwZXYW\nrabbit_host = 172.27.64.5\n\n\n[cinder]\n\nos_region_name = RegionOne\n\n\n\n[oslo_concurrency]\nlock_path=/var/lock/nova\n\n[workarounds]\ndisable_libvirt_livesnapshot = False\n\n\n\n[serial_console]\nenabled = false\nproxyclient_address = 172.27.64.8\nbase_url = ws://172.27.64.5:6083/\n```\n\n```nova-compute.conf\n[DEFAULT]\ncompute_driver = lxd.LXDDriver\n```\ncompute_driver\u30d1\u30e9\u30e1\u30fc\u30bf\u3092lxd.LXDDriver\u306b\u5909\u66f4.\n\n\n#\u30d1\u30c3\u30b1\u30fc\u30b8\u30d0\u30fc\u30b8\u30e7\u30f3\u3068LXD\u306e\u52d5\u4f5c\u78ba\u8a8d\n```\nroot@node07ob64:~# dpkg -l | grep lxd\nii  lxd                                2.0.5-0ubuntu1~ubuntu16.04.1      amd64        Container hypervisor based on LXC - daemon\nii  lxd-client                         2.0.5-0ubuntu1~ubuntu16.04.1      amd64        Container hypervisor based on LXC - client\nii  nova-compute-lxd                   14.0.0-0ubuntu1~cloud0            all          Openstack Compute - LXD container hypervisor support\nii  python-nova-lxd                    14.0.0-0ubuntu1~cloud0            all          OpenStack Compute Python libraries - LXD driver\nii  python-pylxd                       2.1.1-0ubuntu1~cloud0             all          Python library for interacting with LXD REST API\nroot@node07ob64:~# lxc list\n+----------------------+---------+----------------------+------+------------+-----------+\n|         NAME         |  STATE  |         IPV4         | IPV6 |    TYPE    | SNAPSHOTS |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-0 | RUNNING | 172.27.65.21 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-1 | RUNNING | 172.27.65.26 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n```\n\n#Hypervisor\u306e\u78ba\u8a8d\n![Screenshot from 2016-12-13 14-59-44.png](https://qiita-image-store.s3.amazonaws.com/0/76442/4fff8f1c-34b4-197d-6469-9b706203fe74.png)\n\nCompute\u30ce\u30fc\u30c9\u304cType \"lxd\"\u3068\u3057\u3066\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b.\n\n#\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u30c6\u30ca\u30f3\u30c8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3092\u4f5c\u6210\n![Screenshot from 2016-12-13 15-04-40.png](https://qiita-image-store.s3.amazonaws.com/0/76442/262c1ce7-7af5-b48b-bffd-64890d2d54c7.png)\n![Screenshot from 2016-12-13 15-07-34.png](https://qiita-image-store.s3.amazonaws.com/0/76442/157e2a6f-417e-1fe6-cb7d-ee32ffc1f84e.png)\n\n#\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8907\u6570\u8d77\u52d5\n![Screenshot from 2016-12-13 15-06-29.png](https://qiita-image-store.s3.amazonaws.com/0/76442/ada209a9-213d-c0d1-f61b-3043db6b5af2.png)\n\n#Nova LXD\u306e\u52d5\u4f5c\u6982\u8981\n/usr/lib/python2.7/dist-packages/nova/virt/lxd/driver.py\u3092\u53c2\u7167.\n\n- pylxd\u3092\u5229\u7528\u3057\u3066LXD\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30eb.\n- Glance\u304b\u3089\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066\u304f\u308b.\n- LXC\u30b3\u30f3\u30c6\u30ca\u7528\u306e\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u4f5c\u6210.\n- LXC\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210.\n- LXC\u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30bf\u30fc\u30c8.\n\n\n```nova-compute.log\u304b\u3089\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u4f5c\u6210\u30b3\u30de\u30f3\u30c9\u629c\u7c8b\n#\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u7528LinuxBridge\u306e\u4f5c\u6210\nsudo nova-rootwrap /etc/nova/rootwrap.conf brctl addbr qbr9e0c6af1-30 \nsudo nova-rootwrap /etc/nova/rootwrap.conf brctl stp qbr9e0c6af1-30 off\nsudo nova-rootwrap /etc/nova/rootwrap.conf tee /sys/class/net/qbr9e0c6af1-30/bridge/multicast_snooping\n#\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u7528\u306eveth\u306e\u4f5c\u6210\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link add qvb9e0c6af1-30 type veth peer name qvo9e0c6af1-30 \nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvb9e0c6af1-30 up\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvb9e0c6af1-30 promisc on\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvo9e0c6af1-30 up\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qvo9e0c6af1-30 promisc on\nsudo nova-rootwrap /etc/nova/rootwrap.conf ip link set qbr9e0c6af1-30 up\n#veth\u3092LinuxBridge\u3078\u63a5\u7d9a\nsudo nova-rootwrap /etc/nova/rootwrap.conf brctl addif qbr9e0c6af1-30 qvb9e0c6af1-30\n#veth\u3092OVS\u306ebr-int\u3078\u63a5\u7d9a\nsudo nova-rootwrap /etc/nova/rootwrap.conf ovs-vsctl --timeout=120 -- --if-exists del-port qvo9e0c6af1-30 -- add-port br-int qvo9e0c6af1-30 -- set Interface qvo9e0c6af1-30 external-ids:iface-id=9e0c6af1-30bc-418d-b82f-c025c935d987 external-ids:iface-status=active external-ids:attached-mac=fa:16:3e:e4:a3:bf external-ids:vm-uuid=instance-00000014\n```\n\n```\nroot@node07ob64:~# lxc list\n+----------------------+---------+----------------------+------+------------+-----------+\n|         NAME         |  STATE  |         IPV4         | IPV6 |    TYPE    | SNAPSHOTS |\n+----------------------+---------+----------------------+------+------------+-----------+\n| instance-00000002    | RUNNING | 192.168.20.4 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| instance-0000000c    | RUNNING | 192.168.20.12 (eth0) |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| instance-00000012    | RUNNING | 192.168.20.7 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-0 | RUNNING | 172.27.65.21 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n| juju-79fcc7-25-lxd-1 | RUNNING | 172.27.65.26 (eth0)  |      | PERSISTENT | 0         |\n+----------------------+---------+----------------------+------+------------+-----------+\n```\nnova\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\u5f8c\u306b\u30b3\u30f3\u30d4\u30e5\u30fc\u30c8\u30ce\u30fc\u30c9\u306b\u3066lxc list\u3092\u3059\u308b\u3068\u30b3\u30f3\u30c6\u30ca\u4e00\u89a7\u304c\u898b\u308c\u307e\u3059.\n\n```\nroot@node07ob64:/usr/lib/python2.7/dist-packages/nova/api# lxc profile show instance-00000014\nname: instance-00000014\nconfig:\n  boot.autostart: \"True\"\n  limits.cpu: \"1\"\n  limits.memory: 2048MB\n  raw.lxc: |\n    lxc.console.logfile=/var/log/lxd/instance-00000014/console.log\ndescription: \"\"\ndevices:\n  qbr9e0c6af1-30:\n    host_name: tap9e0c6af1-30\n    hwaddr: fa:16:3e:e4:a3:bf\n    nictype: bridged\n    parent: qbr9e0c6af1-30\n    type: nic\n  root:\n    path: /\n    size: 0GB\n    type: disk\n```\nlxc profile\u30b3\u30de\u30f3\u30c9\u3067\u8a73\u7d30\u3092\u78ba\u8a8d\u3001nictype\u306f\"bridged\".\n\n```\nroot@node07ob64:~# lxc exec instance-0000000c /bin/bash\nroot@lxc-test-1:~# ifconfig\neth0      Link encap:Ethernet  HWaddr fa:16:3e:54:f9:9d  \n          inet addr:192.168.20.12  Bcast:192.168.20.255  Mask:255.255.255.0\n          inet6 addr: fe80::f816:3eff:fe54:f99d/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1456  Metric:1\n          RX packets:2711 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:1425 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:252983 (252.9 KB)  TX bytes:129955 (129.9 KB)\n\nlo        Link encap:Local Loopback  \n          inet addr:127.0.0.1  Mask:255.0.0.0\n          inet6 addr: ::1/128 Scope:Host\n          UP LOOPBACK RUNNING  MTU:65536  Metric:1\n          RX packets:4 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:4 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1 \n          RX bytes:280 (280.0 B)  TX bytes:280 (280.0 B)\n```\n\u3082\u3061\u308d\u3093lxc exec\u30b3\u30de\u30f3\u30c9\u3067\u30b3\u30f3\u30c6\u30ca\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n![Screenshot from 2016-12-14 10-29-06.png](https://qiita-image-store.s3.amazonaws.com/0/76442/d3615289-21b4-8634-55b9-0f54aeafa422.png)\n\n\u30b3\u30f3\u30d4\u30e5\u30fc\u30c8\u30ce\u30fc\u30c9\u9593\u3067\u306e\u7c21\u6613\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u56f3.\n\n```\nubuntu@OrangeBox64:~$ juju ssh 26\nubuntu@node02ob64:~$ sudo -s\n\nroot@node02ob64:~# ip netns\nqdhcp-f8ec06d8-c199-45b8-bc72-56ee2c806fed (id: 3)\nqdhcp-2ed6a3e2-9d78-4323-b6dd-d433e67d7f9f (id: 2)\nqrouter-35fea0f3-ca4d-4bdf-a3b7-c00194bbd566 (id: 1)\nqdhcp-ac7bafe8-3c37-48ba-8c24-98be14f4d9f7 (id: 0)\n\nroot@node02ob64:~# ip netns exec qrouter-35fea0f3-ca4d-4bdf-a3b7-c00194bbd566 bash\n\nroot@node02ob64:~# ping 119.115.26.136\nPING 119.115.26.136 (119.115.26.136) 56(84) bytes of data.\n64 bytes from 119.115.26.136: icmp_seq=1 ttl=64 time=0.816 ms\n64 bytes from 119.115.26.136: icmp_seq=2 ttl=64 time=0.462 ms\n64 bytes from 119.115.26.136: icmp_seq=3 ttl=64 time=0.383 ms\n^C\n--- 119.115.26.136 ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2000ms\nrtt min/avg/max/mdev = 0.383/0.553/0.816/0.190 ms\n\nroot@node02ob64:~# ping 119.115.26.133\nPING 119.115.26.133 (119.115.26.133) 56(84) bytes of data.\n64 bytes from 119.115.26.133: icmp_seq=1 ttl=64 time=0.827 ms\n64 bytes from 119.115.26.133: icmp_seq=2 ttl=64 time=0.369 ms\n64 bytes from 119.115.26.133: icmp_seq=3 ttl=64 time=0.497 ms\n```\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ce\u30fc\u30c9\u304b\u3089\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u4ed8\u4e0e\u3057\u305f\u5916\u90e8\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084FloatingIP\u306e\u63a5\u7d9a\u3082\u53ef\u80fd\u3067\u3059.\n\n#\u304a\u308f\u308a\u306b\n\u901a\u5e38\u306fKVM\u3092\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u30fc\u306b\u4f7f\u7528\u3055\u308c\u3066\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002NovaLXD\u3092\u5229\u7528\u3057\u3066LXC\u306b\u3059\u308b\u3053\u3068\u3067KVM\u306b\u5b58\u5728\u3059\u308b\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3092\u53d6\u308a\u9664\u3044\u305f\u308a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\u524a\u9664\u6642\u9593\u3092\u77ed\u7e2e\u3059\u308b\u3067\u304d\u308b\u306e\u304b\u306a\u3068\u8003\u3048\u307e\u3059\u3001NovaLXD\u306fOpenStack\u306e\u53ef\u80fd\u6027\u3092\u5e83\u3081\u3066\u304f\u308c\u308b\u5b58\u5728\u4e00\u3064\u3067\u3059.\n", "tags": ["Ubuntu", "16.04LTS", "openstack"]}