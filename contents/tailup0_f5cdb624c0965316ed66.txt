{"context": "\u4ee5\u4e0b\u306fNginx\u306bssl\u3092\u5c0e\u5165\u3059\u308b\u306b\u3042\u305f\u308a\u5b9f\u65bd\u3057\u305f\u3053\u3068\u3067\u3059\u3002\n\n\u74b0\u5883\nCentOS 6.8\nnginx 1.10.2\nRapidSSL\n\nNginx\u306bssl\u3092\u5c0e\u5165\u3059\u308b\u6d41\u308c\n\n\u79d8\u5bc6\u9375\u306e\u4f5c\u6210\nCSR\uff08\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42\uff09\u306e\u4f5c\u6210\u30fb\u63d0\u51fa\n\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593CA\u8a3c\u660e\u66f8\u306e\u7d50\u5408\n\u79d8\u5bc6\u9375\u30fb\u7d50\u5408\u8a3c\u660e\u66f8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nSSL\u306e\u8a55\u4fa1\u8a08\u6e2c\n\n\n1.\u79d8\u5bc6\u9375\u306e\u4f5c\u6210\n\u30b5\u30fc\u30d0\u306b\u3066\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\nopenssl genrsa -out [\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u540d] 2048\n\n\n2.CSR\uff08\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42\uff09\u306e\u4f5c\u6210\u30fb\u63d0\u51fa\n\u30b5\u30fc\u30d0\u306b\u3066\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001CSR\u3092\u4f5c\u6210\nopenssl req -new -key [\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u540d] -out [CSR\u30d5\u30a1\u30a4\u30eb\u540d]\n\n\u3044\u308d\u3044\u308d\u805e\u3044\u3066\u304f\u308b\u306e\u3067\u3001\u5165\u529b\nCountry Name (2 letter code) [XX]:JP\nState or Province Name (full name) []:Osaka\nLocality Name (eg, city) [Default City]:Naniwa-ku Osaka-shi\nOrganization Name (eg, company) [Default Company Ltd]:\u4f1a\u793e\u540d\nOrganizational Unit Name (eg, section) []:\u4f1a\u793e\u90e8\u9580\u540d\u3001\u30b5\u30fc\u30d3\u30b9\u540d\u7b49\nCommon Name (eg, your name or your server's hostname) []:\u30b5\u30fc\u30d0\u30db\u30b9\u30c8\u540d\nEmail Address []:\u672a\u5165\u529b\nA challenge password []:\u672a\u5165\u529b\nAn optional company name []:\u672a\u5165\u529b\n\nSSL\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8\u8ca9\u58f2\u4ee3\u7406\u5e97\u306bCSR\u63d0\u51fa\n\n3.\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593CA\u8a3c\u660e\u66f8\u306e\u7d50\u5408\n\u8a8d\u8a3c\u5f8c\u3001\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593CA\u8a3c\u660e\u66f8\u3092\u5165\u624b\u3057\u3001\u7d50\u5408\u3059\u308b\n\u203b\u4e2d\u9593CA\u8a3c\u660e\u66f8\u306f\u57fa\u672c\u7684\u306b\u8a8d\u8a3c\u5c40\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\ncat [\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8] [\u4e2d\u9593CA\u8a3c\u660e\u66f8] > [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb]\n\n\u203b\u7d50\u5408\u5f8c\u3001\u4e2d\u8eab\u3092\u78ba\u8a8d\u3057\u3066\u4e0b\u8a18\u90e8\u5206\u304c\u6539\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u78ba\u8a8d\u3059\u308b\n-----END RSA PRIVATE KEY-----\n-----BEGIN RSA PRIVATE KEY-----\n\n\n4.\u79d8\u5bc6\u9375\u30fb\u7d50\u5408\u8a3c\u660e\u66f8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u7d50\u5408\u30d5\u30a1\u30a4\u30eb\u3068\u79d8\u5bc6\u9375\u306e\u6a29\u9650\u30fb\u6240\u6709\u8005\u306e\u5909\u66f4\nsudo chown root:root [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb]\nsudo chmod 400 [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb]\nsudo chown root:root [\u79d8\u5bc6\u9375]\nsudo chmod 400 [\u79d8\u5bc6\u9375]\n\nNginx\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\nserver {\n    listen 443 ssl;\n    ssl_certificate [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30eb\u30d1\u30b9];\n    ssl_certificate_key [\u79d8\u5bc6\u9375\u306e\u30d5\u30eb\u30d1\u30b9];\n    ...\n}\n\nNginx\u306e\u30ea\u30b9\u30bf\u30fc\u30c8\nsudo /etc/init.d/nginx restart\n\n\u4e00\u5fdciptables\u3092\u78ba\u8a8d\u3057\u3066443\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u308b\u304b\u3082\u78ba\u8a8d\u3002\n\u3053\u306e\u6642\u70b9\u3067\u30d6\u30e9\u30a6\u30b6\u7b49\u304b\u3089https\u306b\u3066\u63a5\u7d9a\u53ef\u80fd\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n5.SSL\u306e\u8a55\u4fa1\u8a08\u6e2c\n\u4e0b\u8a18\u30b5\u30a4\u30c8\u3067\u3001SSL\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u8a55\u4fa1\u8a08\u6e2c\u3092\u884c\u3048\u307e\u3059\u3002\nhttps://www.ssllabs.com/ssltest/\n\n\u53c2\u8003\n\u30b8\u30fc\u30e9\u30a4\u30d6\n\u4ee5\u4e0b\u306fNginx\u306bssl\u3092\u5c0e\u5165\u3059\u308b\u306b\u3042\u305f\u308a\u5b9f\u65bd\u3057\u305f\u3053\u3068\u3067\u3059\u3002\n\n## \u74b0\u5883\nCentOS 6.8\nnginx 1.10.2\nRapidSSL\n\n## Nginx\u306bssl\u3092\u5c0e\u5165\u3059\u308b\u6d41\u308c\n0. \u79d8\u5bc6\u9375\u306e\u4f5c\u6210\n0. CSR\uff08\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42\uff09\u306e\u4f5c\u6210\u30fb\u63d0\u51fa\n0. \u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593CA\u8a3c\u660e\u66f8\u306e\u7d50\u5408\n0. \u79d8\u5bc6\u9375\u30fb\u7d50\u5408\u8a3c\u660e\u66f8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n0. SSL\u306e\u8a55\u4fa1\u8a08\u6e2c\n\n### 1.\u79d8\u5bc6\u9375\u306e\u4f5c\u6210\n\n\u30b5\u30fc\u30d0\u306b\u3066\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u79d8\u5bc6\u9375\u3092\u4f5c\u6210\n\n```\nopenssl genrsa -out [\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u540d] 2048\n```\n\n### 2.CSR\uff08\u8a3c\u660e\u66f8\u7f72\u540d\u8981\u6c42\uff09\u306e\u4f5c\u6210\u30fb\u63d0\u51fa\n\n\u30b5\u30fc\u30d0\u306b\u3066\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001CSR\u3092\u4f5c\u6210\n\n```\nopenssl req -new -key [\u79d8\u5bc6\u9375\u30d5\u30a1\u30a4\u30eb\u540d] -out [CSR\u30d5\u30a1\u30a4\u30eb\u540d]\n```\n\n\u3044\u308d\u3044\u308d\u805e\u3044\u3066\u304f\u308b\u306e\u3067\u3001\u5165\u529b\n\n```\nCountry Name (2 letter code) [XX]:JP\nState or Province Name (full name) []:Osaka\nLocality Name (eg, city) [Default City]:Naniwa-ku Osaka-shi\nOrganization Name (eg, company) [Default Company Ltd]:\u4f1a\u793e\u540d\nOrganizational Unit Name (eg, section) []:\u4f1a\u793e\u90e8\u9580\u540d\u3001\u30b5\u30fc\u30d3\u30b9\u540d\u7b49\nCommon Name (eg, your name or your server's hostname) []:\u30b5\u30fc\u30d0\u30db\u30b9\u30c8\u540d\nEmail Address []:\u672a\u5165\u529b\nA challenge password []:\u672a\u5165\u529b\nAn optional company name []:\u672a\u5165\u529b\n```\n\nSSL\u30b5\u30fc\u30d0\u30fc\u8a3c\u660e\u66f8\u8ca9\u58f2\u4ee3\u7406\u5e97\u306bCSR\u63d0\u51fa\n\n### 3.\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593CA\u8a3c\u660e\u66f8\u306e\u7d50\u5408\n\n\u8a8d\u8a3c\u5f8c\u3001\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3068\u4e2d\u9593CA\u8a3c\u660e\u66f8\u3092\u5165\u624b\u3057\u3001\u7d50\u5408\u3059\u308b\n\n\u203b\u4e2d\u9593CA\u8a3c\u660e\u66f8\u306f\u57fa\u672c\u7684\u306b\u8a8d\u8a3c\u5c40\u30db\u30fc\u30e0\u30da\u30fc\u30b8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u308b\n\n```\ncat [\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8] [\u4e2d\u9593CA\u8a3c\u660e\u66f8] > [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb]\n```\n\n\u203b\u7d50\u5408\u5f8c\u3001\u4e2d\u8eab\u3092\u78ba\u8a8d\u3057\u3066\u4e0b\u8a18\u90e8\u5206\u304c\u6539\u884c\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u78ba\u8a8d\u3059\u308b\n\n```\n-----END RSA PRIVATE KEY-----\n-----BEGIN RSA PRIVATE KEY-----\n```\n\n### 4.\u79d8\u5bc6\u9375\u30fb\u7d50\u5408\u8a3c\u660e\u66f8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u7d50\u5408\u30d5\u30a1\u30a4\u30eb\u3068\u79d8\u5bc6\u9375\u306e\u6a29\u9650\u30fb\u6240\u6709\u8005\u306e\u5909\u66f4\n\n```\nsudo chown root:root [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb]\nsudo chmod 400 [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb]\nsudo chown root:root [\u79d8\u5bc6\u9375]\nsudo chmod 400 [\u79d8\u5bc6\u9375]\n```\n\nNginx\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u4fee\u6b63\n\n```\nserver {\n    listen 443 ssl;\n    ssl_certificate [\u7d50\u5408\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30eb\u30d1\u30b9];\n    ssl_certificate_key [\u79d8\u5bc6\u9375\u306e\u30d5\u30eb\u30d1\u30b9];\n    ...\n}\n```\n\nNginx\u306e\u30ea\u30b9\u30bf\u30fc\u30c8\n\n```\nsudo /etc/init.d/nginx restart\n```\n\n\u4e00\u5fdciptables\u3092\u78ba\u8a8d\u3057\u3066443\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u308b\u304b\u3082\u78ba\u8a8d\u3002\n\n\u3053\u306e\u6642\u70b9\u3067\u30d6\u30e9\u30a6\u30b6\u7b49\u304b\u3089https\u306b\u3066\u63a5\u7d9a\u53ef\u80fd\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n### 5.SSL\u306e\u8a55\u4fa1\u8a08\u6e2c\n\u4e0b\u8a18\u30b5\u30a4\u30c8\u3067\u3001SSL\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u8a55\u4fa1\u8a08\u6e2c\u3092\u884c\u3048\u307e\u3059\u3002\nhttps://www.ssllabs.com/ssltest/\n\n## \u53c2\u8003\n[\u30b8\u30fc\u30e9\u30a4\u30d6](http://blog.geelive-inc.com/archives/101)\n", "tags": ["Bash", "HTTPS", "nginx", "CentOS", "SSL"]}