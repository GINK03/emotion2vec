{"context": " More than 1 year has passed since last update.\n\u52d5\u4f5c\u78ba\u8a8d\nUnity 5.1.1-f on MacOS X 10.8.5\n\n\n\n\u6e96\u5099\nScene1\n\u3053\u3061\u3089\u3068\u540c\u3058\nFileSelector :Scene\n\u3053\u3061\u3089\u3068\u540c\u3058\u3002\u305f\u3060\u3057\u3001Scene2\u3068\u3044\u3046\u540d\u524d\u304b\u3089FileSelector\u306b\u5909\u66f4\u3057\u305f\u3002\n\u3055\u3089\u306b\u3001\u5404Button\u306bSelectButtonControl.cs (\u4e0b\u8a18)\u3092\u95a2\u9023\u4ed8\u3051\u305f\u3002\n\ncode\n\nButton1Control.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\n\npublic class Button1Control : MonoBehaviour {\n\n    public static string filename; // used from FileSelector:Scene\n\n    void Start () {\n        DontDestroyOnLoad (this);\n    }\n\n    public void Button1Click() {\n        Application.LoadLevel (\"FileSelector\");\n    }\n\n    public Text myText; // should be related to TextFileName:Text\n    void OnGUI() {\n        myText.text = filename;\n    }\n}\n\n\n\nSelectButtonControl.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\n\npublic class SelectButtonControl : MonoBehaviour {\n\n    public void ButtonSelector() {\n        GameObject work = GameObject.Find (gameObject.name + \"Text\");\n        if (work) {\n            Button1Control.filename = work.GetComponent<Text>().text;\n        } else { // error\n            Button1Control.filename = gameObject.name;\n        }\n        Application.LoadLevel (\"Scene1\");\n    }\n}\n\n\n\n\u5b9f\u884c\u306e\u69d8\u5b50\n\n\n\n\ncode02 (w/ mouse wheel)\nFileSelector\u30b7\u30fc\u30f3\u306b\u304a\u3044\u3066\u3001mouse wheel\u306b\u3088\u308b\u30b9\u30af\u30ed\u30fc\u30eb\u30d0\u30fc\u5236\u5fa1\u3092\u8db3\u3057\u305f\u306e\u306f\u3053\u3061\u3089\u3002\n\nScrollScript.cs\nusing UnityEngine;\nusing System.Collections;\n\nusing UnityEngine.UI; // for Text\nusing System.IO; // for Directory()\n\n// Button1\n// - Button1Text\n// Button2\n// - Button2Text\n// Button3\n// - Button3Text\n// Button4\n// - Button4Text\n// ScrollbarFile\n// EventSystem\n\npublic class ScrollScript : MonoBehaviour {\n\n    private string [ ] s_files = Directory.GetFiles(\".\"); \n\n    private void dispFilesOnButtons(string filename, int idx, int shift) {\n        int pos = idx - shift;\n        GameObject work = GameObject.Find (\"Button\" + pos.ToString () + \"Text\");\n        if (work) {\n            work.GetComponent<Text>().text = filename;\n        }\n    }\n\n    private void changeScrollBarValue(string scrollBarName, bool isUp) {\n        GameObject work = GameObject.Find (scrollBarName);\n        if (work) {\n            float aRatio = (float)work.GetComponent<Scrollbar>().value;\n            if (isUp) {\n                aRatio -= 0.05f; // for from top to bottom direction\n            } else {\n                aRatio += 0.05f; // for from top to bottom direction\n            }\n            work.GetComponent<Scrollbar>().value = aRatio;\n        }\n    }\n\n    private int getShiftValue(string scrollBarName, int maxFileNum) {\n        GameObject work = GameObject.Find (scrollBarName);\n        if (work) {\n            float aRatio = (float)work.GetComponent<Scrollbar>().value;\n            return (int)(maxFileNum * aRatio);\n        }\n        return 0;\n    }\n\n    private void clearButtonsText()\n    {\n        foreach (Text aText in Text.FindObjectsOfType<Text> ()) {\n            if (aText.name.Contains(\"Button\")) { // e.g. Button2Text\n                aText.text = \"\";\n            }\n        }\n    }\n\n    private void updateFileList()\n    {\n        int shift = getShiftValue (\"ScrollbarFile\", s_files.Length);\n\n        clearButtonsText ();\n        int count = 1;\n        foreach (string aFile in s_files) {\n            dispFilesOnButtons(aFile, count, shift);\n            count++;\n            Debug.Log(aFile);\n        }\n    }\n\n    void Start() {\n        updateFileList ();\n    }\n\n    public void ScrollBarChange() {\n        updateFileList ();\n    }   \n\n    void OnGUI() {\n        float val = Input.GetAxis (\"Mouse ScrollWheel\");\n        if (val > 0.0f) {\n            changeScrollBarValue(\"ScrollbarFile\", /* isUp=*/true);\n            Debug.Log (\"up\");\n        } else if (val < 0.0f) {\n            changeScrollBarValue(\"ScrollbarFile\", /* isUp=*/false);\n            Debug.Log (\"down\");\n        } else {\n            // do nothing\n        }\n    }\n\n}\n\n\n```txt:\u52d5\u4f5c\u78ba\u8a8d\nUnity 5.1.1-f on MacOS X 10.8.5\n```\n\n##\u6e96\u5099\nScene1\n[\u3053\u3061\u3089](http://qiita.com/7of9/items/8ea0d330ccf912c2c3f1)\u3068\u540c\u3058\n\nFileSelector :Scene\n[\u3053\u3061\u3089](http://qiita.com/7of9/items/566d62e2c35bf108336d)\u3068\u540c\u3058\u3002\u305f\u3060\u3057\u3001Scene2\u3068\u3044\u3046\u540d\u524d\u304b\u3089FileSelector\u306b\u5909\u66f4\u3057\u305f\u3002\n\u3055\u3089\u306b\u3001\u5404Button\u306bSelectButtonControl.cs (\u4e0b\u8a18)\u3092\u95a2\u9023\u4ed8\u3051\u305f\u3002\n\n##code\n\n```csharp:Button1Control.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\n\npublic class Button1Control : MonoBehaviour {\n\t\n\tpublic static string filename; // used from FileSelector:Scene\n\t\n\tvoid Start () {\n\t\tDontDestroyOnLoad (this);\n\t}\n\t\n\tpublic void Button1Click() {\n\t\tApplication.LoadLevel (\"FileSelector\");\n\t}\n\t\n\tpublic Text myText; // should be related to TextFileName:Text\n\tvoid OnGUI() {\n\t\tmyText.text = filename;\n\t}\n}\n```\n\n```SelectButtonControl.cs\nusing UnityEngine;\nusing System.Collections;\nusing UnityEngine.UI;\n\npublic class SelectButtonControl : MonoBehaviour {\n\t\n\tpublic void ButtonSelector() {\n\t\tGameObject work = GameObject.Find (gameObject.name + \"Text\");\n\t\tif (work) {\n\t\t\tButton1Control.filename = work.GetComponent<Text>().text;\n\t\t} else { // error\n\t\t\tButton1Control.filename = gameObject.name;\n\t\t}\n\t\tApplication.LoadLevel (\"Scene1\");\n\t}\n}\n```\n\n##\u5b9f\u884c\u306e\u69d8\u5b50\n![Scene1_unity_-_150813-fileSelector_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/55f65f7c-c44b-46e8-3f51-3ae38c8808be.jpeg)\n\n![Scene1_unity_-_150813-fileSelector_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/15fe0789-47f0-f4bd-353a-9a4a544e877f.jpeg)\n\n![Scene1_unity_-_150813-fileSelector_-_PC__Mac___Linux_Standalone__Personal_.jpg](https://qiita-image-store.s3.amazonaws.com/0/32870/a05498b8-bfc3-78d3-e43a-bb04be74c9d6.jpeg)\n\n\n##code02 (w/ mouse wheel)\n\nFileSelector\u30b7\u30fc\u30f3\u306b\u304a\u3044\u3066\u3001mouse wheel\u306b\u3088\u308b\u30b9\u30af\u30ed\u30fc\u30eb\u30d0\u30fc\u5236\u5fa1\u3092\u8db3\u3057\u305f\u306e\u306f\u3053\u3061\u3089\u3002\n\n```csharp:ScrollScript.cs\nusing UnityEngine;\nusing System.Collections;\n\nusing UnityEngine.UI; // for Text\nusing System.IO; // for Directory()\n\n// Button1\n// - Button1Text\n// Button2\n// - Button2Text\n// Button3\n// - Button3Text\n// Button4\n// - Button4Text\n// ScrollbarFile\n// EventSystem\n\npublic class ScrollScript : MonoBehaviour {\n\t\n\tprivate string [ ] s_files = Directory.GetFiles(\".\"); \n\t\n\tprivate void dispFilesOnButtons(string filename, int idx, int shift) {\n\t\tint pos = idx - shift;\n\t\tGameObject work = GameObject.Find (\"Button\" + pos.ToString () + \"Text\");\n\t\tif (work) {\n\t\t\twork.GetComponent<Text>().text = filename;\n\t\t}\n\t}\n\n\tprivate void changeScrollBarValue(string scrollBarName, bool isUp) {\n\t\tGameObject work = GameObject.Find (scrollBarName);\n\t\tif (work) {\n\t\t\tfloat aRatio = (float)work.GetComponent<Scrollbar>().value;\n\t\t\tif (isUp) {\n\t\t\t\taRatio -= 0.05f; // for from top to bottom direction\n\t\t\t} else {\n\t\t\t\taRatio += 0.05f; // for from top to bottom direction\n\t\t\t}\n\t\t\twork.GetComponent<Scrollbar>().value = aRatio;\n\t\t}\n\t}\n\n\tprivate int getShiftValue(string scrollBarName, int maxFileNum) {\n\t\tGameObject work = GameObject.Find (scrollBarName);\n\t\tif (work) {\n\t\t\tfloat aRatio = (float)work.GetComponent<Scrollbar>().value;\n\t\t\treturn (int)(maxFileNum * aRatio);\n\t\t}\n\t\treturn 0;\n\t}\n\t\n\tprivate void clearButtonsText()\n\t{\n\t\tforeach (Text aText in Text.FindObjectsOfType<Text> ()) {\n\t\t\tif (aText.name.Contains(\"Button\")) { // e.g. Button2Text\n\t\t\t\taText.text = \"\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tprivate void updateFileList()\n\t{\n\t\tint shift = getShiftValue (\"ScrollbarFile\", s_files.Length);\n\t\t\n\t\tclearButtonsText ();\n\t\tint count = 1;\n\t\tforeach (string aFile in s_files) {\n\t\t\tdispFilesOnButtons(aFile, count, shift);\n\t\t\tcount++;\n\t\t\tDebug.Log(aFile);\n\t\t}\n\t}\n\t\n\tvoid Start() {\n\t\tupdateFileList ();\n\t}\n\t\n\tpublic void ScrollBarChange() {\n\t\tupdateFileList ();\n\t}   \n\n\tvoid OnGUI() {\n\t\tfloat val = Input.GetAxis (\"Mouse ScrollWheel\");\n\t\tif (val > 0.0f) {\n\t\t\tchangeScrollBarValue(\"ScrollbarFile\", /* isUp=*/true);\n\t\t\tDebug.Log (\"up\");\n\t\t} else if (val < 0.0f) {\n\t\t\tchangeScrollBarValue(\"ScrollbarFile\", /* isUp=*/false);\n\t\t\tDebug.Log (\"down\");\n\t\t} else {\n\t\t\t// do nothing\n\t\t}\n\t}\n\n}\n```\n", "tags": ["MyUnity", "uGUI"]}