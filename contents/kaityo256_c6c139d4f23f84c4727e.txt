{"tags": ["clang", "C++"], "context": " More than 1 year has passed since last update.clang++\u3068GNU g++\u3067random_shuffle\u306e\u52d5\u4f5c\u304c\u9055\u3063\u3066\u56f0\u3063\u305f\u3053\u3068\u306e\u899a\u66f8\u3002\n\n\u73fe\u8c61\nclang++\u3067random_shuffle\u306e\u4e71\u6570\u751f\u6210\u5668\u306brand()\u3092\u4f7f\u3063\u305f\u6642\u3001srand\u30920\u4ee5\u5916\u306e\u6bd4\u8f03\u7684\u5c0f\u3055\u306a\u5024\u3092\u5165\u308c\u3066\u547c\u3093\u3060\u76f4\u5f8c\u306b\u30b7\u30e3\u30c3\u30d5\u30eb\u3059\u308b\u3068\u3001\u5148\u982d\u8981\u7d20\u304c\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u306a\u3044\u3002\n\n\u30b3\u30fc\u30c9\u4f8b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u30020\u304b\u30899\u307e\u3067\u306e\u6574\u6570\u3092\u8981\u7d20\u306b\u6301\u3064\u914d\u5217\u3092\u3001random_shuffle\u3067\u30b7\u30e3\u30c3\u30d5\u30eb\u3059\u308b\u3002\u4e71\u6570\u751f\u6210\u5668\u306frand()\u3092\u4f7f\u3044\u3001\u30b7\u30e3\u30c3\u30d5\u30eb\u3059\u308b\u76f4\u524d\u306bsrand\u3059\u308b\u3002\n\nrandom_shuffle.cc\n#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <stdlib.h>\n//----------------------------------------------------------------------\nint\nmyrand(const int max) {\n  double r = static_cast<double>(rand()) / (static_cast<double>(RAND_MAX) + 1.0);\n  return static_cast<int>(r * max);\n};\n//----------------------------------------------------------------------\nint\nmain(int argc, char **argv){\n  const int N = 10;\n  for(int i=1;i<10;i++){\n    int a[N] = {0,1,2,3,4,5,6,7,8,9};\n    srand(i);\n    std::random_shuffle(a,a+N,myrand);\n    for(int j=0;j<N;j++){\n      std::cout << a[j];\n    }\n    std::cout<< std::endl;\n  }\n}\n//----------------------------------------------------------------------\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\u74b0\u5883\u306fMacOS X\u3002g++\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fg++ (MacPorts gcc49 4.9.2_1) 4.9.2\u3001clang++\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fApple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\u3002\n\ng++\u306e\u5b9f\u884c\u7d50\u679c\n$ g++ random_shuffle.cc; ./a.out\n9347128065\n7645139208\n7039421568\n9705623418\n5701438962\n6709231458\n9574203618\n1476538902\n3518960472\n8917526340\n\n\n\nclang++\u306e\u5b9f\u884c\u7d50\u679c\n$ clang++ random_shuffle.cc; ./a.out\n2150497386\n0286735941\n0369472851\n0415786239\n0528496173\n0685731249\n0861527439\n0942875163\n0127583469\n0283197645\n\n\ng++\u3067\u306f\u3061\u3083\u3093\u3068\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u3066\u3044\u308b\u304c\u3001clang++\u3067\u306f\u3001\u6700\u521d\u306e\u4f8b(srand(0)\u306e\u76f4\u5f8c)\u4ee5\u5916\u3067\u306f\u3001\u5148\u982d\u8981\u7d20\u304c\u5fc5\u305a0\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u3064\u307e\u308a\u3001\u3061\u3083\u3093\u3068\u30b7\u30e3\u30c3\u30d5\u30eb\u3067\u304d\u3066\u3044\u306a\u3044\u3002\n\nrand\u3068srand\u306e\u6319\u52d5\n0\u304b\u3089MAX-1\u307e\u3067\u306e\u6574\u6570\u3092\u8fd4\u3059\u4e71\u6570\u3092\u624b\u629c\u304d\u3067\u4f5c\u308a\u305f\u3044\u3068\u304d\u3001\u6a19\u6e96rand()\u3092\u4f7f\u3063\u3066\u3001double\u306b\u30ad\u30e3\u30b9\u30c8\u3057\u3066RAND_MAX\u3067\u5272\u3063\u3066\u304b\u3089MAX\u3092\u304b\u3051\u3066int\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3046\u3002\n\u3068\u3053\u308d\u304c\u5b9f\u306f\u3001\u6a19\u6e96\u306erand\u306fsrand\u306b0\u4ee5\u5916\u306e\u5c0f\u3055\u306a\u6574\u6570\u3092\u5165\u308c\u308b\u3068\u3001\u6700\u521d\u306b\u8fd4\u3059\u64ec\u4f3c\u4e71\u6570\u304c(RAND_MAX\u306b\u6bd4\u3079\u3066)\u975e\u5e38\u306b\u5c0f\u3055\u3044\u5024\u306b\u306a\u308b\u3002\u306a\u306e\u3067\u305d\u308c\u3092double\u306b\u30ad\u30e3\u30b9\u30c8\u3057\u3066RAND_MAX\u3067\u5272\u308b\u3068\u5fc5\u305a\u30bc\u30ed\u306b\u306a\u308b\u3002\u3064\u307e\u308a\u3001srand\u306b\u6bd4\u8f03\u7684\u5c0f\u3055\u3044\u5024\u3092\u5165\u308c\u3066\u3001\u4e0a\u8a18\u306e\u65b9\u6cd5\u30670\u304b\u3089MAX-1\u307e\u3067\u306e\u4e71\u6570\u3092\u4f5c\u308d\u3046\u3068\u3059\u308b\u3068\u3001\u4e00\u756a\u6700\u521d\u306f\u5fc5\u305a0\u304c\u8fd4\u308b\u3002\u3053\u308c\u306fg++\u3067\u3082clang++\u3067\u3082\u540c\u3058\u6319\u52d5\u306b\u306a\u308b\u3002\n\nrandtest.cc\n#include <stdio.h>\n#include <stdlib.h>\n\nint\nmain(void){\n  const int max = 10;\n  for(int i=0;i<10;i++){\n    srand(i);\n    const int r = rand();\n    const double f = static_cast<double>(r)/(static_cast<double>(RAND_MAX)+1.0);\n    const int r2 = static_cast<int>(max*f);\n    printf(\"%d: %d\\n\",r2,r);\n  }\n}\n\n\n\ng++/clang++\u5171\u901a\n0: 16807\n0: 33614\n0: 50421\n0: 67228\n0: 84035\n0: 100842\n0: 117649\n0: 134456\n0: 151263\n\n\n\nclang\u306erandom_shuffle\n\u4e71\u6570\u751f\u6210\u5668\u304c\u6700\u521d\u306b0\u3092\u8fd4\u3059\u3068\u6700\u521d\u306e\u8981\u7d20\u304c\u52d5\u304b\u306a\u3044\u306e\u3067\u3001\u304a\u305d\u3089\u304frandom_shuffle\u306e\u30bd\u30fc\u30b9\u306f\u3053\u3046\u3044\u3046\u5f62\u306a\u306e\u3067\u3042\u308d\u3046\u3001\u3068\u3044\u3046\u4e88\u60f3\u304c\u3064\u304f\u3002\u5b9f\u969b\u306b\u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u66f8\u3044\u3066\u3042\u308b\u306e\u3060\u308d\u3046\u304c\u3001\u308f\u304b\u308a\u3084\u3059\u3055\u306e\u305f\u3081\u914d\u5217\u3067\u66f8\u304f\u3002\nfor(int i=0;i<N-1;i++){\n  const int r = rand(hoge)%hogehoge;\n  std::swap(a[i],a[i+r]);\n}\n\n\u3064\u307e\u308a\u3001\u5148\u982d\u304b\u3089\u9806\u756a\u306bswap\u3057\u3066\u3044\u304f\u304c\u3001\u4e00\u5ea6swap\u3057\u305f\u3082\u306e\u306f\u3082\u3046\u89e6\u3089\u306a\u3044\u3001\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3002\u307e\u305f\u3001\u4e71\u6570\u751f\u6210\u5668\u304c\u5168\u30660\u3092\u8fd4\u3057\u305f\u6642\u306b\u5168\u304f\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u306a\u3044\u3053\u3068\u3082\u4e88\u60f3\u3067\u304d\u308b(\u5b9f\u969b\u305d\u3046\u306a\u3063\u3066\u3044\u308b)\u3002\n\u3067\u3001\u5b9f\u969b\u306b\u30bd\u30fc\u30b9\u3092\u898b\u308b\u3068\u3053\u3046\u306a\u3063\u3066\u305f\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u66f8\u3044\u3066\u3042\u3063\u305f\u304c\u3001\u540c\u3058\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u914d\u5217\u3067\u66f8\u304d\u306a\u304a\u3059\u3002\n\nshuffle\nvoid\nshuffle(int a[N]){\n  int first = 0;\n  int last = N;\n  int d = last - first;\n  for(--last;first<last;++first,--d){\n    int i = myrand(d);\n    std::swap(a[first],a[first+i]);\n  }\n}\n\n\n\u307e\u3041\u3001\u4e88\u60f3\u901a\u308a\u3001\u4e00\u5ea6swap\u3057\u305f\u8981\u7d20\u306f\u3082\u3046\u89e6\u3089\u305a\u3001\u81ea\u5206\u3068\u6700\u5f8c\u306e\u8981\u7d20\u306e\u9593\u306e\u3069\u308c\u304b\u3068swap\u3001\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3060\u3063\u305f\u3002\n\n\u307e\u3068\u3081\nclang++\u3067random_shuffle\u306e\u4e71\u6570\u751f\u6210\u5668\u306brand()\u3092\u4f7f\u3046\u3068\u3001srand()\u3092\u547c\u3093\u3060\u76f4\u5f8c\u306b\u6700\u521d\u306e\u8981\u7d20\u304c\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u306a\u3044\u554f\u984c\u306f\u3001\n\nsrand\u306b\u5c0f\u3055\u306a\u5024\u3092\u5165\u308c\u305f\u76f4\u5f8c\u3001rand\u306f\u5c0f\u3055\u306a\u5024\u3092\u8fd4\u3059\u3002\u305d\u308c\u3092RAND_MAX\u3067\u5272\u3063\u3066\u304b\u3089\u3001max\u3092\u304b\u3051\u3066int\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u30680\u304c\u8fd4\u308b\u3002\nLLVM\u306erandom_shuffle\u306e\u5b9f\u88c5\u3067\u306f\u3001\u4e71\u6570\u751f\u6210\u5668\u304c0\u3092\u8fd4\u3057\u305f\u5834\u5408\u306f\u305d\u306e\u8981\u7d20\u306f\u52d5\u304b\u306a\u3044\u3002\n\n\u3068\u3044\u3046\u4e8c\u3064\u306e\u539f\u56e0\u306b\u3088\u308a\u767a\u751f\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u3002\n\u539f\u56e0\u304c\u308f\u304b\u3063\u3066\u3057\u307e\u3048\u3070\u5bfe\u7b56\u306f\u7c21\u5358\u3067\u3001srand\u3092\u547c\u3093\u3060\u76f4\u5f8c\u3001rand\u3092\u4f55\u5ea6\u304b\u7a7a\u307e\u308f\u3057\u3057\u3066\u304a\u3051\u3070\u826f\u3044\u3002\u306a\u304a\u3001srand\u306b\u5c0f\u3055\u306a\u5024\u3092\u5165\u308c\u308b\u306e\u304c\u672c\u8cea\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u4f8b\u3048\u3070srand(seed+RAND_MAX/2)\u3068\u304b\u3084\u3063\u3066\u3082\u3060\u3081\u3002\u3053\u3046\u3059\u308b\u3068\u6700\u521d\u306e\u8981\u7d20\u304c\u5fc5\u305a5(10\u306e\u534a\u5206)\u306b\u306a\u308b\u3002\u8981\u3059\u308b\u306b\u3001\u8981\u7d20\u6570N\u3001srand\u306b\u4e0e\u3048\u308b\u7a2e\u3092seed\u3068\u3059\u308b\u3068\u3001\u30b7\u30e3\u30c3\u30d5\u30eb\u5f8c\u306e\u6700\u521d\u306e\u8981\u7d20\u304c(seed/RAND_MAX)*N\u756a\u76ee\u306e\u8981\u7d20\u306b\u306a\u308b\u3068\u3044\u3046\u3053\u3068\u3002\n\u3082\u3061\u308d\u3093random_shuffle\u3067\u306f\u306a\u304frandom\u3092\u4f7f\u3063\u305f\u308a\u3001\u4e71\u6570\u751f\u6210\u5668\u3082rand\u3058\u3083\u306a\u304f\u3066\u3082\u3063\u3068\u3061\u3083\u3093\u3068\u3057\u305f\u306e\u3092\u4f7f\u3046\u306e\u304c\u6b63\u3057\u3044\u3093\u3060\u3051\u308c\u3069\u3001\u74b0\u5883\u306b\u3088\u3063\u3066\u306f\u306a\u304b\u306a\u304b\u305d\u3046\u3082\u3044\u304b\u306a\u3044\u306e\u3067\u3002\nclang++\u3068GNU g++\u3067random_shuffle\u306e\u52d5\u4f5c\u304c\u9055\u3063\u3066\u56f0\u3063\u305f\u3053\u3068\u306e\u899a\u66f8\u3002\n\n# \u73fe\u8c61\n\nclang++\u3067random_shuffle\u306e\u4e71\u6570\u751f\u6210\u5668\u306brand()\u3092\u4f7f\u3063\u305f\u6642\u3001srand\u30920\u4ee5\u5916\u306e\u6bd4\u8f03\u7684\u5c0f\u3055\u306a\u5024\u3092\u5165\u308c\u3066\u547c\u3093\u3060\u76f4\u5f8c\u306b\u30b7\u30e3\u30c3\u30d5\u30eb\u3059\u308b\u3068\u3001\u5148\u982d\u8981\u7d20\u304c\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u306a\u3044\u3002\n\n# \u30b3\u30fc\u30c9\u4f8b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u30020\u304b\u30899\u307e\u3067\u306e\u6574\u6570\u3092\u8981\u7d20\u306b\u6301\u3064\u914d\u5217\u3092\u3001random_shuffle\u3067\u30b7\u30e3\u30c3\u30d5\u30eb\u3059\u308b\u3002\u4e71\u6570\u751f\u6210\u5668\u306frand()\u3092\u4f7f\u3044\u3001\u30b7\u30e3\u30c3\u30d5\u30eb\u3059\u308b\u76f4\u524d\u306bsrand\u3059\u308b\u3002\n\n```cpp:random_shuffle.cc\n#include <iostream>\n#include <algorithm>\n#include <vector>\n#include <stdlib.h>\n//----------------------------------------------------------------------\nint\nmyrand(const int max) {\n  double r = static_cast<double>(rand()) / (static_cast<double>(RAND_MAX) + 1.0);\n  return static_cast<int>(r * max);\n};\n//----------------------------------------------------------------------\nint\nmain(int argc, char **argv){\n  const int N = 10;\n  for(int i=1;i<10;i++){\n    int a[N] = {0,1,2,3,4,5,6,7,8,9};\n    srand(i);\n    std::random_shuffle(a,a+N,myrand);\n    for(int j=0;j<N;j++){\n      std::cout << a[j];\n    }\n    std::cout<< std::endl;\n  }\n}\n//----------------------------------------------------------------------\n```\n# \u5b9f\u884c\u7d50\u679c\n\u74b0\u5883\u306fMacOS X\u3002g++\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fg++ (MacPorts gcc49 4.9.2_1) 4.9.2\u3001clang++\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306fApple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\u3002\n\n```sh:g++\u306e\u5b9f\u884c\u7d50\u679c\n$ g++ random_shuffle.cc; ./a.out\n9347128065\n7645139208\n7039421568\n9705623418\n5701438962\n6709231458\n9574203618\n1476538902\n3518960472\n8917526340\n```\n```sh:clang++\u306e\u5b9f\u884c\u7d50\u679c\n$ clang++ random_shuffle.cc; ./a.out\n2150497386\n0286735941\n0369472851\n0415786239\n0528496173\n0685731249\n0861527439\n0942875163\n0127583469\n0283197645\n```\ng++\u3067\u306f\u3061\u3083\u3093\u3068\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u3066\u3044\u308b\u304c\u3001clang++\u3067\u306f\u3001\u6700\u521d\u306e\u4f8b(srand(0)\u306e\u76f4\u5f8c)\u4ee5\u5916\u3067\u306f\u3001\u5148\u982d\u8981\u7d20\u304c\u5fc5\u305a0\u306b\u306a\u3063\u3066\u3044\u308b\u3002\u3064\u307e\u308a\u3001\u3061\u3083\u3093\u3068\u30b7\u30e3\u30c3\u30d5\u30eb\u3067\u304d\u3066\u3044\u306a\u3044\u3002\n\n# rand\u3068srand\u306e\u6319\u52d5\n\n0\u304b\u3089MAX-1\u307e\u3067\u306e\u6574\u6570\u3092\u8fd4\u3059\u4e71\u6570\u3092\u624b\u629c\u304d\u3067\u4f5c\u308a\u305f\u3044\u3068\u304d\u3001\u6a19\u6e96rand()\u3092\u4f7f\u3063\u3066\u3001double\u306b\u30ad\u30e3\u30b9\u30c8\u3057\u3066RAND_MAX\u3067\u5272\u3063\u3066\u304b\u3089MAX\u3092\u304b\u3051\u3066int\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u3001\u307f\u305f\u3044\u306a\u3053\u3068\u3092\u3059\u308b\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u3046\u3002\n\n\u3068\u3053\u308d\u304c\u5b9f\u306f\u3001\u6a19\u6e96\u306erand\u306fsrand\u306b0\u4ee5\u5916\u306e\u5c0f\u3055\u306a\u6574\u6570\u3092\u5165\u308c\u308b\u3068\u3001\u6700\u521d\u306b\u8fd4\u3059\u64ec\u4f3c\u4e71\u6570\u304c(RAND_MAX\u306b\u6bd4\u3079\u3066)\u975e\u5e38\u306b\u5c0f\u3055\u3044\u5024\u306b\u306a\u308b\u3002\u306a\u306e\u3067\u305d\u308c\u3092double\u306b\u30ad\u30e3\u30b9\u30c8\u3057\u3066RAND_MAX\u3067\u5272\u308b\u3068\u5fc5\u305a\u30bc\u30ed\u306b\u306a\u308b\u3002\u3064\u307e\u308a\u3001srand\u306b\u6bd4\u8f03\u7684\u5c0f\u3055\u3044\u5024\u3092\u5165\u308c\u3066\u3001\u4e0a\u8a18\u306e\u65b9\u6cd5\u30670\u304b\u3089MAX-1\u307e\u3067\u306e\u4e71\u6570\u3092\u4f5c\u308d\u3046\u3068\u3059\u308b\u3068\u3001\u4e00\u756a\u6700\u521d\u306f\u5fc5\u305a0\u304c\u8fd4\u308b\u3002\u3053\u308c\u306fg++\u3067\u3082clang++\u3067\u3082\u540c\u3058\u6319\u52d5\u306b\u306a\u308b\u3002\n\n```cpp:randtest.cc\n#include <stdio.h>\n#include <stdlib.h>\n\nint\nmain(void){\n  const int max = 10;\n  for(int i=0;i<10;i++){\n    srand(i);\n    const int r = rand();\n    const double f = static_cast<double>(r)/(static_cast<double>(RAND_MAX)+1.0);\n    const int r2 = static_cast<int>(max*f);\n    printf(\"%d: %d\\n\",r2,r);\n  }\n}\n```\n```sh:g++/clang++\u5171\u901a\n0: 16807\n0: 33614\n0: 50421\n0: 67228\n0: 84035\n0: 100842\n0: 117649\n0: 134456\n0: 151263\n```\n\n# clang\u306erandom_shuffle\n\n\u4e71\u6570\u751f\u6210\u5668\u304c\u6700\u521d\u306b0\u3092\u8fd4\u3059\u3068\u6700\u521d\u306e\u8981\u7d20\u304c\u52d5\u304b\u306a\u3044\u306e\u3067\u3001\u304a\u305d\u3089\u304frandom_shuffle\u306e\u30bd\u30fc\u30b9\u306f\u3053\u3046\u3044\u3046\u5f62\u306a\u306e\u3067\u3042\u308d\u3046\u3001\u3068\u3044\u3046\u4e88\u60f3\u304c\u3064\u304f\u3002\u5b9f\u969b\u306b\u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u66f8\u3044\u3066\u3042\u308b\u306e\u3060\u308d\u3046\u304c\u3001\u308f\u304b\u308a\u3084\u3059\u3055\u306e\u305f\u3081\u914d\u5217\u3067\u66f8\u304f\u3002\n\n```cpp:\nfor(int i=0;i<N-1;i++){\n  const int r = rand(hoge)%hogehoge;\n  std::swap(a[i],a[i+r]);\n}\n```\n\u3064\u307e\u308a\u3001\u5148\u982d\u304b\u3089\u9806\u756a\u306bswap\u3057\u3066\u3044\u304f\u304c\u3001\u4e00\u5ea6swap\u3057\u305f\u3082\u306e\u306f\u3082\u3046\u89e6\u3089\u306a\u3044\u3001\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3002\u307e\u305f\u3001\u4e71\u6570\u751f\u6210\u5668\u304c\u5168\u30660\u3092\u8fd4\u3057\u305f\u6642\u306b\u5168\u304f\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u306a\u3044\u3053\u3068\u3082\u4e88\u60f3\u3067\u304d\u308b(\u5b9f\u969b\u305d\u3046\u306a\u3063\u3066\u3044\u308b)\u3002\n\n\u3067\u3001\u5b9f\u969b\u306b\u30bd\u30fc\u30b9\u3092\u898b\u308b\u3068\u3053\u3046\u306a\u3063\u3066\u305f\u3002\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u66f8\u3044\u3066\u3042\u3063\u305f\u304c\u3001\u540c\u3058\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u914d\u5217\u3067\u66f8\u304d\u306a\u304a\u3059\u3002\n\n```cpp:shuffle\nvoid\nshuffle(int a[N]){\n  int first = 0;\n  int last = N;\n  int d = last - first;\n  for(--last;first<last;++first,--d){\n    int i = myrand(d);\n    std::swap(a[first],a[first+i]);\n  }\n}\n```\n\u307e\u3041\u3001\u4e88\u60f3\u901a\u308a\u3001\u4e00\u5ea6swap\u3057\u305f\u8981\u7d20\u306f\u3082\u3046\u89e6\u3089\u305a\u3001\u81ea\u5206\u3068\u6700\u5f8c\u306e\u8981\u7d20\u306e\u9593\u306e\u3069\u308c\u304b\u3068swap\u3001\u3068\u3044\u3046\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3060\u3063\u305f\u3002\n\n# \u307e\u3068\u3081\n\nclang++\u3067random_shuffle\u306e\u4e71\u6570\u751f\u6210\u5668\u306brand()\u3092\u4f7f\u3046\u3068\u3001srand()\u3092\u547c\u3093\u3060\u76f4\u5f8c\u306b\u6700\u521d\u306e\u8981\u7d20\u304c\u30b7\u30e3\u30c3\u30d5\u30eb\u3055\u308c\u306a\u3044\u554f\u984c\u306f\u3001\n\n* srand\u306b\u5c0f\u3055\u306a\u5024\u3092\u5165\u308c\u305f\u76f4\u5f8c\u3001rand\u306f\u5c0f\u3055\u306a\u5024\u3092\u8fd4\u3059\u3002\u305d\u308c\u3092RAND_MAX\u3067\u5272\u3063\u3066\u304b\u3089\u3001max\u3092\u304b\u3051\u3066int\u306b\u30ad\u30e3\u30b9\u30c8\u3059\u308b\u30680\u304c\u8fd4\u308b\u3002\n* LLVM\u306erandom_shuffle\u306e\u5b9f\u88c5\u3067\u306f\u3001\u4e71\u6570\u751f\u6210\u5668\u304c0\u3092\u8fd4\u3057\u305f\u5834\u5408\u306f\u305d\u306e\u8981\u7d20\u306f\u52d5\u304b\u306a\u3044\u3002\n\n\u3068\u3044\u3046\u4e8c\u3064\u306e\u539f\u56e0\u306b\u3088\u308a\u767a\u751f\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u3002\n\n\u539f\u56e0\u304c\u308f\u304b\u3063\u3066\u3057\u307e\u3048\u3070\u5bfe\u7b56\u306f\u7c21\u5358\u3067\u3001srand\u3092\u547c\u3093\u3060\u76f4\u5f8c\u3001rand\u3092\u4f55\u5ea6\u304b\u7a7a\u307e\u308f\u3057\u3057\u3066\u304a\u3051\u3070\u826f\u3044\u3002\u306a\u304a\u3001**srand\u306b\u5c0f\u3055\u306a\u5024\u3092\u5165\u308c\u308b\u306e\u304c\u672c\u8cea\u3067\u306f\u306a\u3044**\u306e\u3067\u3001\u4f8b\u3048\u3070`srand(seed+RAND_MAX/2)`\u3068\u304b\u3084\u3063\u3066\u3082\u3060\u3081\u3002\u3053\u3046\u3059\u308b\u3068\u6700\u521d\u306e\u8981\u7d20\u304c\u5fc5\u305a5(10\u306e\u534a\u5206)\u306b\u306a\u308b\u3002\u8981\u3059\u308b\u306b\u3001\u8981\u7d20\u6570N\u3001srand\u306b\u4e0e\u3048\u308b\u7a2e\u3092seed\u3068\u3059\u308b\u3068\u3001\u30b7\u30e3\u30c3\u30d5\u30eb\u5f8c\u306e\u6700\u521d\u306e\u8981\u7d20\u304c`(seed/RAND_MAX)*N`\u756a\u76ee\u306e\u8981\u7d20\u306b\u306a\u308b\u3068\u3044\u3046\u3053\u3068\u3002\n\n\u3082\u3061\u308d\u3093random_shuffle\u3067\u306f\u306a\u304frandom\u3092\u4f7f\u3063\u305f\u308a\u3001\u4e71\u6570\u751f\u6210\u5668\u3082rand\u3058\u3083\u306a\u304f\u3066\u3082\u3063\u3068\u3061\u3083\u3093\u3068\u3057\u305f\u306e\u3092\u4f7f\u3046\u306e\u304c\u6b63\u3057\u3044\u3093\u3060\u3051\u308c\u3069\u3001\u74b0\u5883\u306b\u3088\u3063\u3066\u306f\u306a\u304b\u306a\u304b\u305d\u3046\u3082\u3044\u304b\u306a\u3044\u306e\u3067\u3002\n"}