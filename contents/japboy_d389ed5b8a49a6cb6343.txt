{"context": " More than 1 year has passed since last update.\u73fe\u5b9f\u7684\u306b FRP \u3092\u5b9f\u8df5\u3057\u3066\u307f\u308b\u30c6\u30b9\u30c8\u3068\u3044\u3046\u4e8b\u3067\u3001XMLHttpRequest \u3092 Kefir.js \u3067\u51e6\u7406\u3059\u308b\u306a\u3089\u3001\u3053\u3046\u3059\u308c\u3070\u826f\u3044\u306e\u304b\u306a\u30fc\u3068\u3044\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u308b\u3002\n\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4e0b\u8a18\u306e 2 \u3064\u3002\n\nlodash\nKefir.js \u2014 fast and light Reactive Programming library for JavaScript inspired by Bacon.js and RxJS\n\nBacon.js \u3067\u3082\u307b\u307c\u540c\u3058\u3060\u3068\u601d\u3046\u3002Kefir.js \u306e web \u30da\u30fc\u30b8\u304c\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u7684\u3067\u8aad\u307f\u3084\u3059\u304b\u3063\u305f\u306e\u3068\u3001\u30b5\u30a4\u30ba\u304c Bacon.js \u3088\u308a\u30b3\u30f3\u30d1\u30af\u30c8\u3068\u306e\u4e8b\u3067\u3001\u3053\u3061\u3089\u3092\u9078\u629e\u3057\u305f\u3002\n\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\u307e\u305a\u306f\u4e0b\u8a18 2 \u3064\u306e XHR \u3068 Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9:\nvar req = new window.XMLHttpRequest(), xhr = Kefir.fromEvent(req, 'readystatechange');\n\n\u6b21\u306f XHR \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u7528\u306e\u57fa\u790e\u7684\u306a\u51e6\u7406\u3092\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304f:\n// \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u6587\u5b57\u5217\u3092\u30cf\u30c3\u30b7\u30e5\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u751f\u6210\u3059\u308b\u95a2\u6570\nvar serialize = function (data) {\n  return _(data)\n    .pairs()\n    .map(function (val) { return val[0] + '=' + val[1]; })\n    .value()\n    .join('&')\n    .replace(/%20/g, '+');\n};\n\n// GET/POST \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u767a\u884c\u3059\u308b\u30ab\u30ea\u30fc\u5316\u3055\u308c\u305f\u95a2\u6570\nvar request = _.curry(function (method, uri, data) {\n  switch (method) {\n    case 'GET':\n      req.open(method, uri + serialize(data), true);\n      req.send();\n      break;\n    case 'POST':\n      req.open(method, uri, true);\n      req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      req.send(serialize(data));\n      break;\n  }\n});\n\n// \u4eca\u56de\u306f GET \u3067\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\u306e\u3067\u524d\u8ff0\u306e\u95a2\u6570\u304b\u3089 get \u95a2\u6570\u3092\u5b9a\u7fa9\nvar get = request('GET');   \n\n\u6b21\u306f XHR \u30a4\u30d9\u30f3\u30c8\u306e Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u306e\u8fd4\u308a\u5024\u3092\u6b63\u898f\u5316\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9:\n// `readystatechange` \u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306b\u5b9f\u884c\u3055\u308c\u5024\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u5e38\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u95a2\u6570\nvar readystatechange = function (ev) {\n  if (ev.target.DONE !== ev.target.readyState) return;\n  if (200 === ev.target.status) {\n    var response, ctype = ev.target.getResponseHeader('Content-Type');\n    switch (ctype) {\n      case 'application/json':\n      case 'text/json':\n        response = window.JSON.parse(ev.target.responseText);\n        break;\n      case 'application/xml':\n      case 'text/xml':\n        response = ev.target.responseXML;\n        break;\n      default:\n        response = ev.target.responseText;\n    }\n    // \u6b63\u5e38\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u5024\u3092\u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n    return { 'response': response };\n  } else {\n    // \u30a8\u30e9\u30fc\u6642\u3001\u30a8\u30e9\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n    return new Error(ev.target.status + ' ' + ev.target.responseText);\n  }\n};\n\n\u524d\u8ff0\u306e\u95a2\u6570\u3092\u3082\u3063\u3066\u3001\u5b9f\u969b\u306b Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u5b9f\u884c\u3059\u308b:\nxhr\n  .map(readystatechange)\n  .filter(_.isObject)\n  .log();\n\nget('/path/to/test.json', {});\n\n\u3053\u308c\u3067\u3001test.json \u306e\u5024\u304c web \u30d6\u30e9\u30a6\u30b6\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3002\n\nJSONP \u306e\u5834\u5408\n\u3069\u3063\u304b\u306e JSONP \u3092\u8fd4\u3059 ReST API \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u306a\u3089\u6b21\u306e\u3088\u3046\u306a\u611f\u3058:\nvar jsonp = _.curry(function (uri, callback) {\n  var script = document.createElement('script');\n  window.___jsonp = function (data) { return callback({ 'response': data }) };\n  script.setAttribute('src', uri + '&callback=___jsonp');\n  document.getElementsByTagName('head')[0].appendChild(script);\n});\n\nvar req = Kefir.fromCallback(jsonp('http://example.com/path/to/test'));\n\nreq.log();\n\n\n\u307e\u3068\u3081\nFRP \u306e\u30dd\u30a4\u30f3\u30c8\u306f\u3001Kefir.js \u306a\u308a Bacon.js \u306a\u308a\u304c\u7406\u89e3\u3067\u304d\u308b Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u3001\u5982\u4f55\u306b\u69d8\u3005\u306a\u975e\u540c\u671f\u51e6\u7406\u3084\u30a4\u30d9\u30f3\u30c8\u306e\u8fd4\u308a\u5024\u3092\u6b63\u898f\u5316\u3059\u308b\u304b\u3002\u3068\u3044\u3046\u4e8b\u306a\u306e\u304b\u306a\u30fc\u3068\u3044\u3046\u7406\u89e3\u3067\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u3067\u826f\u3044\u306e\u304b\u306a\u3041\u3002\n\n\u73fe\u5b9f\u7684\u306b FRP \u3092\u5b9f\u8df5\u3057\u3066\u307f\u308b\u30c6\u30b9\u30c8\u3068\u3044\u3046\u4e8b\u3067\u3001`XMLHttpRequest` \u3092 [Kefir.js](https://pozadi.github.io/kefir/) \u3067\u51e6\u7406\u3059\u308b\u306a\u3089\u3001\u3053\u3046\u3059\u308c\u3070\u826f\u3044\u306e\u304b\u306a\u30fc\u3068\u3044\u3046\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u308b\u3002\n\n\u4f7f\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u4e0b\u8a18\u306e 2 \u3064\u3002\n\n* [lodash](https://lodash.com/)\n* [Kefir.js \u2014 fast and light Reactive Programming library for JavaScript inspired by Bacon.js and RxJS](https://pozadi.github.io/kefir/)\n\n[Bacon.js](https://baconjs.github.io/) \u3067\u3082\u307b\u307c\u540c\u3058\u3060\u3068\u601d\u3046\u3002Kefir.js \u306e web \u30da\u30fc\u30b8\u304c\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u7684\u3067\u8aad\u307f\u3084\u3059\u304b\u3063\u305f\u306e\u3068\u3001\u30b5\u30a4\u30ba\u304c Bacon.js \u3088\u308a\u30b3\u30f3\u30d1\u30af\u30c8\u3068\u306e\u4e8b\u3067\u3001\u3053\u3061\u3089\u3092\u9078\u629e\u3057\u305f\u3002\n\n\n# \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\u307e\u305a\u306f\u4e0b\u8a18 2 \u3064\u306e XHR \u3068 Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9:\n\n```javascript\nvar req = new window.XMLHttpRequest(), xhr = Kefir.fromEvent(req, 'readystatechange');\n```\n\n\u6b21\u306f XHR \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u7528\u306e\u57fa\u790e\u7684\u306a\u51e6\u7406\u3092\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304f:\n\n```javascript\n// \u30ea\u30af\u30a8\u30b9\u30c8\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u6587\u5b57\u5217\u3092\u30cf\u30c3\u30b7\u30e5\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u751f\u6210\u3059\u308b\u95a2\u6570\nvar serialize = function (data) {\n  return _(data)\n    .pairs()\n    .map(function (val) { return val[0] + '=' + val[1]; })\n    .value()\n    .join('&')\n    .replace(/%20/g, '+');\n};\n\n// GET/POST \u30ea\u30af\u30a8\u30b9\u30c8\u3092\u767a\u884c\u3059\u308b\u30ab\u30ea\u30fc\u5316\u3055\u308c\u305f\u95a2\u6570\nvar request = _.curry(function (method, uri, data) {\n  switch (method) {\n    case 'GET':\n      req.open(method, uri + serialize(data), true);\n      req.send();\n      break;\n    case 'POST':\n      req.open(method, uri, true);\n      req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n      req.send(serialize(data));\n      break;\n  }\n});\n\n// \u4eca\u56de\u306f GET \u3067\u30c6\u30b9\u30c8\u3057\u3066\u307f\u308b\u306e\u3067\u524d\u8ff0\u306e\u95a2\u6570\u304b\u3089 get \u95a2\u6570\u3092\u5b9a\u7fa9\nvar get = request('GET');   \n```\n\n\u6b21\u306f XHR \u30a4\u30d9\u30f3\u30c8\u306e Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u306e\u8fd4\u308a\u5024\u3092\u6b63\u898f\u5316\u3059\u308b\u95a2\u6570\u3092\u5b9a\u7fa9:\n\n```javascript\n// `readystatechange` \u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306b\u5b9f\u884c\u3055\u308c\u5024\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u5e38\u306b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\u95a2\u6570\nvar readystatechange = function (ev) {\n  if (ev.target.DONE !== ev.target.readyState) return;\n  if (200 === ev.target.status) {\n    var response, ctype = ev.target.getResponseHeader('Content-Type');\n    switch (ctype) {\n      case 'application/json':\n      case 'text/json':\n        response = window.JSON.parse(ev.target.responseText);\n        break;\n      case 'application/xml':\n      case 'text/xml':\n        response = ev.target.responseXML;\n        break;\n      default:\n        response = ev.target.responseText;\n    }\n    // \u6b63\u5e38\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u305d\u306e\u5024\u3092\u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n    return { 'response': response };\n  } else {\n    // \u30a8\u30e9\u30fc\u6642\u3001\u30a8\u30e9\u30fc\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059\n    return new Error(ev.target.status + ' ' + ev.target.responseText);\n  }\n};\n```\n\n\u524d\u8ff0\u306e\u95a2\u6570\u3092\u3082\u3063\u3066\u3001\u5b9f\u969b\u306b Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3059\u308b\u51e6\u7406\u3092\u5b9a\u7fa9\u3057\u5b9f\u884c\u3059\u308b:\n\n```javascript\nxhr\n  .map(readystatechange)\n  .filter(_.isObject)\n  .log();\n\nget('/path/to/test.json', {});\n```\n\n\u3053\u308c\u3067\u3001`test.json` \u306e\u5024\u304c web \u30d6\u30e9\u30a6\u30b6\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\u3055\u308c\u308b\u306f\u305a\u3002\n\n\n# JSONP \u306e\u5834\u5408\n\n\u3069\u3063\u304b\u306e JSONP \u3092\u8fd4\u3059 ReST API \u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3059\u308b\u306a\u3089\u6b21\u306e\u3088\u3046\u306a\u611f\u3058:\n\n```javascript\nvar jsonp = _.curry(function (uri, callback) {\n  var script = document.createElement('script');\n  window.___jsonp = function (data) { return callback({ 'response': data }) };\n  script.setAttribute('src', uri + '&callback=___jsonp');\n  document.getElementsByTagName('head')[0].appendChild(script);\n});\n\nvar req = Kefir.fromCallback(jsonp('http://example.com/path/to/test'));\n\nreq.log();\n```\n\n\n# \u307e\u3068\u3081\n\nFRP \u306e\u30dd\u30a4\u30f3\u30c8\u306f\u3001Kefir.js \u306a\u308a Bacon.js \u306a\u308a\u304c\u7406\u89e3\u3067\u304d\u308b Stream \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3057\u3066\u3001\u5982\u4f55\u306b\u69d8\u3005\u306a\u975e\u540c\u671f\u51e6\u7406\u3084\u30a4\u30d9\u30f3\u30c8\u306e\u8fd4\u308a\u5024\u3092\u6b63\u898f\u5316\u3059\u308b\u304b\u3002\u3068\u3044\u3046\u4e8b\u306a\u306e\u304b\u306a\u30fc\u3068\u3044\u3046\u7406\u89e3\u3067\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u826f\u3044\u306e\u304b\u306a\u3041\u3002\n", "tags": ["JavaScript", "FRP", "Bacon.js", "Kefir.js", "FP"]}