{"tags": ["docker-machine", "docker"], "context": " More than 1 year has passed since last update.\n\n\u7d50\u8ad6\n/\u304ctmpfs(RAM\u30c7\u30a3\u30b9\u30af)\u306a\u306e\u3067\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u6d88\u3048\u308b\n\n\u6982\u8981\ndocker-machine upgrade\u3059\u308b\u3068\u304d\u306e\u6ce8\u610f\u70b9 vagrant \u3068 busybox \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408 - Qiita\n\u4e0a\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u6642\u306b\u3001docker-machine upgrade \u3057\u305f\u3042\u3068\u306b\u3001/home\u4ee5\u4e0b\u306a\u3069\u304c\u6d88\u3048\u305f\u3088\u3046\u306b\u601d\u3063\u305f\u306e\u3067\u3001\u8abf\u3079\u3066\u307f\u305f\u3002\n/home/docker \u4ee5\u4e0b\u3084\u3001/usr/local/bin \u306e\u4e0b\u306a\u3069\u304c\u6d88\u3048\u305f\u304c\u3001\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u304c\u6b8b\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u4f55\u304c\u6d88\u3048\u308b\u306e\u304b\u6c17\u306b\u306a\u3063\u305f\u3002\n\n\u78ba\u8a8d\n\ndocker-machine create \u3067\u4eee\u60f3\u30de\u30b7\u30f3\u304b\u3089\u4f5c\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\ndocker-machine create -d virtualbox disktestremove\n\n\u5b9f\u969b\u306e\u30ed\u30b0\n$ docker-machine create -d virtualbox disktestremove\nRunning pre-create checks...\nCreating machine...\nWaiting for machine to be running, this may take a few minutes...\nMachine is running, waiting for SSH to be available...\nDetecting operating system of created instance...\nProvisioning created instance...\nCopying certs to the local machine directory...\nCopying certs to the remote machine...\nSetting Docker configuration on the remote daemon...\nTo see how to connect Docker to this machine, run: docker-machine env disktestremove\n\n\ndocker-machine stop start\n\u4f5c\u6210\u5f8cssh\u3057\u3066\u307f\u305f\ndocker-machine ssh disktestremove\n\n\u9069\u5f53\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u3001/home/docker\u4ee5\u4e0b\u306b\u4f5c\u308b\ndocker@disktestremove:~$ touch create.txt\ndocker@disktestremove:~$ ls -l\ntotal 4\n-rw-r--r--    1 docker   staff            0 Jan  8 03:30 create.txt\n-rw-r--r--    1 docker   staff           69 Jan  8 03:28 log.log\ndocker@disktestremove:~$\n\nexit\u3067\u306c\u3051\u305f\u3042\u3068\u3001\ndocker-machine \u3067 stop start \u3057\u3066\u307f\u308b\u3002\ndocker-machine stop disktestremove\ndocker-machine start disktestremove\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\ndocker@disktestremove:~$ ls -l\ntotal 0\n\n\n\u30de\u30b7\u30f3\u306e\u4e2d\u304b\u3089\u518d\u8d77\u52d5\n\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\ndocker@disktestremove:~$ touch sudoreboot.txt\ndocker@disktestremove:~$ ls -l\ntotal 0\n-rw-r--r--    1 docker   staff            0 Jan  8 03:33 sudoreboot.txt\n\n\u518d\u8d77\u52d5\n\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\ndocker@disktestremove:~$ ls -l\ntotal 0\n\n\n\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u78ba\u8a8d\n/  \u4ee5\u4e0b\u304c\u3069\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u304b\u78ba\u8a8d\u3059\u308b\u3002\ntmpfs \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\ndocker@disktestremove:~$ df -h\nFilesystem                Size      Used Available Use% Mounted on\ntmpfs                   896.6M    123.8M    772.8M  14% /\ntmpfs                   498.1M         0    498.1M   0% /dev/shm\n/dev/sda1                18.2G     44.5M     17.2G   0% /mnt/sda1\ncgroup                  498.1M         0    498.1M   0% /sys/fs/cgroup\n/dev/sda1                18.2G     44.5M     17.2G   0% /mnt/sda1/var/lib/docker/aufs\n\ntmpfs \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n/etc/fstab \u3092\u78ba\u8a8d\n/ \u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306f\u3001/etc/fstab\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u3060\u3002\n\u30ab\u30fc\u30cd\u30eb\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u304b\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u304b\u306f\u8abf\u3079\u3066\u3044\u306a\u3044\u3002\ndocker@disktestremove:~$ cat /etc/fstab\n# /etc/fstab\nproc            /proc        proc    defaults          0       0\nsysfs           /sys         sysfs   defaults          0       0\ndevpts          /dev/pts     devpts  defaults          0       0\ntmpfs           /dev/shm     tmpfs   defaults          0       0\n/dev/zram0  swap         swap    defaults,noauto   0       0\n/dev/sda1       /mnt/sda1       ext4     noauto,users,exec    0 0 # Added by TC\n/dev/sda2       none            swap     defaults             0 0 # Added by TC\n/dev/sr0        /mnt/sr0        auto     noauto,users,exec    0 0 # Added by TC\n\n# \u7d50\u8ad6\n\n***/\u304ctmpfs(RAM\u30c7\u30a3\u30b9\u30af)\u306a\u306e\u3067\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u6d88\u3048\u308b***\n\n# \u6982\u8981\n\n[docker-machine upgrade\u3059\u308b\u3068\u304d\u306e\u6ce8\u610f\u70b9 vagrant \u3068 busybox \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408 - Qiita](http://qiita.com/manabuishiirb/items/7c1b2d1bf43ae3c36a4f)\n\n\u4e0a\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u6642\u306b\u3001docker-machine upgrade \u3057\u305f\u3042\u3068\u306b\u3001/home\u4ee5\u4e0b\u306a\u3069\u304c\u6d88\u3048\u305f\u3088\u3046\u306b\u601d\u3063\u305f\u306e\u3067\u3001\u8abf\u3079\u3066\u307f\u305f\u3002\n\n/home/docker \u4ee5\u4e0b\u3084\u3001/usr/local/bin \u306e\u4e0b\u306a\u3069\u304c\u6d88\u3048\u305f\u304c\u3001\u4f5c\u6210\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u304c\u6b8b\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u4f55\u304c\u6d88\u3048\u308b\u306e\u304b\u6c17\u306b\u306a\u3063\u305f\u3002\n\n\n## \u78ba\u8a8d\n\n### docker-machine create \u3067\u4eee\u60f3\u30de\u30b7\u30f3\u304b\u3089\u4f5c\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\n\n```\ndocker-machine create -d virtualbox disktestremove\n```\n\n\u5b9f\u969b\u306e\u30ed\u30b0\n\n```\n$ docker-machine create -d virtualbox disktestremove\nRunning pre-create checks...\nCreating machine...\nWaiting for machine to be running, this may take a few minutes...\nMachine is running, waiting for SSH to be available...\nDetecting operating system of created instance...\nProvisioning created instance...\nCopying certs to the local machine directory...\nCopying certs to the remote machine...\nSetting Docker configuration on the remote daemon...\nTo see how to connect Docker to this machine, run: docker-machine env disktestremove\n```\n\n### docker-machine stop start\n\n\u4f5c\u6210\u5f8cssh\u3057\u3066\u307f\u305f\n\n```\ndocker-machine ssh disktestremove\n```\n\n\u9069\u5f53\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u3001/home/docker\u4ee5\u4e0b\u306b\u4f5c\u308b\n\n```\ndocker@disktestremove:~$ touch create.txt\ndocker@disktestremove:~$ ls -l\ntotal 4\n-rw-r--r--    1 docker   staff            0 Jan  8 03:30 create.txt\n-rw-r--r--    1 docker   staff           69 Jan  8 03:28 log.log\ndocker@disktestremove:~$\n```\n\nexit\u3067\u306c\u3051\u305f\u3042\u3068\u3001\ndocker-machine \u3067 stop start \u3057\u3066\u307f\u308b\u3002\n\n```\ndocker-machine stop disktestremove\ndocker-machine start disktestremove\n```\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\n\n```\ndocker@disktestremove:~$ ls -l\ntotal 0\n```\n\n### \u30de\u30b7\u30f3\u306e\u4e2d\u304b\u3089\u518d\u8d77\u52d5\n\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\n```\ndocker@disktestremove:~$ touch sudoreboot.txt\ndocker@disktestremove:~$ ls -l\ntotal 0\n-rw-r--r--    1 docker   staff            0 Jan  8 03:33 sudoreboot.txt\n```\n\n\u518d\u8d77\u52d5\n\n\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\n\n```\ndocker@disktestremove:~$ ls -l\ntotal 0\n```\n\n\n### \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u3092\u78ba\u8a8d\n/  \u4ee5\u4e0b\u304c\u3069\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u304b\u78ba\u8a8d\u3059\u308b\u3002\ntmpfs \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n```\ndocker@disktestremove:~$ df -h\nFilesystem                Size      Used Available Use% Mounted on\ntmpfs                   896.6M    123.8M    772.8M  14% /\ntmpfs                   498.1M         0    498.1M   0% /dev/shm\n/dev/sda1                18.2G     44.5M     17.2G   0% /mnt/sda1\ncgroup                  498.1M         0    498.1M   0% /sys/fs/cgroup\n/dev/sda1                18.2G     44.5M     17.2G   0% /mnt/sda1/var/lib/docker/aufs\n```\n\ntmpfs \u3067\u3042\u308b\u3053\u3068\u304c\u308f\u304b\u308b\u3002\n\n### /etc/fstab \u3092\u78ba\u8a8d\n\n/ \u306e\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306f\u3001/etc/fstab\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u3060\u3002\n\u30ab\u30fc\u30cd\u30eb\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u304b\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u7d44\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u306e\u304b\u306f\u8abf\u3079\u3066\u3044\u306a\u3044\u3002\n\n```\ndocker@disktestremove:~$ cat /etc/fstab\n# /etc/fstab\nproc            /proc        proc    defaults          0       0\nsysfs           /sys         sysfs   defaults          0       0\ndevpts          /dev/pts     devpts  defaults          0       0\ntmpfs           /dev/shm     tmpfs   defaults          0       0\n/dev/zram0  swap         swap    defaults,noauto   0       0\n/dev/sda1       /mnt/sda1       ext4     noauto,users,exec    0 0 # Added by TC\n/dev/sda2       none            swap     defaults             0 0 # Added by TC\n/dev/sr0        /mnt/sr0        auto     noauto,users,exec    0 0 # Added by TC\n```\n"}