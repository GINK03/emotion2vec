{"context": "\n\nVirtual Machine\u3067\u30c7\u30fc\u30bf\u9818\u57df\u7528\u306e\u30c7\u30a3\u30b9\u30af\u3092\u304f\u3063\u3064\u3051\u3066\u304a\u304f\u3002\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306fWindows\u306a\u306e\u3067\u4ee5\u4e0bpowershell\u3002\u666e\u901a\u306bGUI\u3067\u51fa\u6765\u308b\u8a2d\u5b9a\u3060\u3068\u601d\u3046\u306e\u3067\u3001GUI\u3067\u3082\u3088\u3057\u3002\nSet-Alias VBoxManage \"VirtualBox_.exe_path\"\nVBoxManage createhd --filename data.vdi --size 5120 --format VDI --variant Fixed\nVBoxManage storageattach CentOS-node1 --storagectl \"SATA\" --port 1 --device 0 --type hdd --medium mysql_data.vdi --mtype shareable\n\n\u5fc5\u8981\u306a\u3082\u306e\u306eInstall\nSELinux\u3068firewalld\u306f\u6b62\u3081\u3066\u304a\u304f\u3002\n\nERP REPO\nrpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\nrpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm\nyum -y install yum-plugin-fastestmirror\n\ndrbd\nyum install drbd kmod-drbd\n\npacemaker\nyum -y install yum-plugin-priorities\nyum install -y http://iij.dl.sourceforge.jp/linux-ha/66936/pacemaker-repo-1.1.15-1.1.el7.x86_64.rpm\nyum-config-manager --setopt=linux-ha-ja-pacemaker.priority=10 --save\nyum install -y pacemaker\n/etc/yum.repo.d/\u914d\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3067exclude\u3059\u308b\u3068\u3069\u3053\u3082\u66f8\u3044\u3066\u3044\u308b\u304c\n\u306a\u305c\u304b\u4e00\u5411\u306b\u3046\u307e\u304f\u3044\u304b\u305a\u3001\u3053\u3061\u3089\u306e\u65b9\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nhttp://qiita.com/ngyuki/items/3c652b1e746d85d130c7\n\nmysql community server 5.7\nyum install -y https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm\nyum install -y mysql-communnity-server\n\u3053\u306e\u3042\u305f\u308a\u3092\u53c2\u8003\u3002\nhttps://www.drbd.org/en/doc/users-guide-90/s-distro-packages#_centos\nhttp://linux-ha.osdn.jp/wp/archives/4591\nhttp://www.conversion.co.jp/technology/product/drbd\n\n\u5404\u7a2e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n\ndrbd\n[root@localhost ~]# drbdadm -V\nDRBDADM_BUILDTAG=GIT-hash:\\ c0fb2d367b8be5e9f53919f88a8c344dc8c61fe9\\ build\\ by\\ mockbuild@\\,\\ 2016-12-03\\ 14:42:44\nDRBDADM_API_VERSION=1\nDRBD_KERNEL_VERSION_CODE=0x000000\nDRBDADM_VERSION_CODE=0x080908\nDRBDADM_VERSION=8.9.8\n\npacemaker\n[root@localhost ~]# pacemakerd -$\nPacemaker 1.1.15-11.el7\nWritten by Andrew Beekhof\n\ncorosync\n[root@localhost ~]#  corosync -v\nCorosync Cluster Engine, version '2.4.0'\nCopyright (c) 2006-2009 Red Hat, Inc.\n\n\u3053\u3053\u3067\u76f8\u65b9\u306enode\u7528\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u30af\u30ed\u30fc\u30f3\n# Virtual Machine\u3067\u30c7\u30fc\u30bf\u9818\u57df\u7528\u306e\u30c7\u30a3\u30b9\u30af\u3092\u304f\u3063\u3064\u3051\u3066\u304a\u304f\u3002\n\n\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306fWindows\u306a\u306e\u3067\u4ee5\u4e0bpowershell\u3002\u666e\u901a\u306bGUI\u3067\u51fa\u6765\u308b\u8a2d\u5b9a\u3060\u3068\u601d\u3046\u306e\u3067\u3001GUI\u3067\u3082\u3088\u3057\u3002\n\nSet-Alias VBoxManage \"VirtualBox_.exe_path\"\nVBoxManage createhd --filename data.vdi --size 5120 --format VDI --variant Fixed\nVBoxManage storageattach CentOS-node1 --storagectl \"SATA\" --port 1 --device 0 --type hdd --medium mysql_data.vdi --mtype shareable\n\n\n# \u5fc5\u8981\u306a\u3082\u306e\u306eInstall\n\nSELinux\u3068firewalld\u306f\u6b62\u3081\u3066\u304a\u304f\u3002\n\n## ERP REPO\nrpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org\nrpm -Uvh http://www.elrepo.org/elrepo-release-7.0-2.el7.elrepo.noarch.rpm\nyum -y install yum-plugin-fastestmirror\n\n## drbd\nyum install drbd kmod-drbd\n\n## pacemaker\nyum -y install yum-plugin-priorities\nyum install -y http://iij.dl.sourceforge.jp/linux-ha/66936/pacemaker-repo-1.1.15-1.1.el7.x86_64.rpm\nyum-config-manager --setopt=linux-ha-ja-pacemaker.priority=10 --save\nyum install -y pacemaker\n\n/etc/yum.repo.d/\u914d\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3067exclude\u3059\u308b\u3068\u3069\u3053\u3082\u66f8\u3044\u3066\u3044\u308b\u304c\n\u306a\u305c\u304b\u4e00\u5411\u306b\u3046\u307e\u304f\u3044\u304b\u305a\u3001\u3053\u3061\u3089\u306e\u65b9\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nhttp://qiita.com/ngyuki/items/3c652b1e746d85d130c7\n\n\n## mysql community server 5.7\nyum install -y https://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm\nyum install -y mysql-communnity-server\n\n\u3053\u306e\u3042\u305f\u308a\u3092\u53c2\u8003\u3002\nhttps://www.drbd.org/en/doc/users-guide-90/s-distro-packages#_centos\nhttp://linux-ha.osdn.jp/wp/archives/4591\nhttp://www.conversion.co.jp/technology/product/drbd\n\n\n###\u5404\u7a2e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n\n#### drbd\n[root@localhost ~]# drbdadm -V\nDRBDADM_BUILDTAG=GIT-hash:\\ c0fb2d367b8be5e9f53919f88a8c344dc8c61fe9\\ build\\ by\\ mockbuild@\\,\\ 2016-12-03\\ 14:42:44\nDRBDADM_API_VERSION=1\nDRBD_KERNEL_VERSION_CODE=0x000000\nDRBDADM_VERSION_CODE=0x080908\nDRBDADM_VERSION=8.9.8\n\n\n#### pacemaker\n[root@localhost ~]# pacemakerd -$\nPacemaker 1.1.15-11.el7\nWritten by Andrew Beekhof\n\n\n#### corosync\n[root@localhost ~]#  corosync -v\nCorosync Cluster Engine, version '2.4.0'\nCopyright (c) 2006-2009 Red Hat, Inc.\n\n\n# \u3053\u3053\u3067\u76f8\u65b9\u306enode\u7528\u306b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u30af\u30ed\u30fc\u30f3\n\n", "tags": ["CentOS", "MySQL", "drbd", "pacemaker"]}