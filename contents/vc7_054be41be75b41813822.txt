{"context": " More than 1 year has passed since last update.\u7528 devise \u5275\u5efa User \u4e4b\u5f8c\uff0c\u53ea\u6709\u57fa\u672c\u7684\u6b04\u4f4d\uff0c\u5982\u679c\u8981\u65b0\u589e\u81ea\u5b9a\u7fa9\u7684\u6b04\u4f4d\uff0c\u56e0\u70ba strong parameter \u7684\u95dc\u4fc2\uff0c\u5fc5\u9808\u8981\u52a0\u5165 permit \u4e2d\uff0c\u907f\u514d\u8cc7\u6599\u7121\u6cd5\u5b58\u5165\u3002\n\u8a3b\uff1a \u8868\u55ae view \u4ee5\u53ca model \u7684 migration \u8b8a\u66f4\u8acb\u5148\u81ea\u884c\u5b8c\u6210\n\n\u5efa\u7acb controller class\n\u9019\u6642\u5019\u5148\u65b0\u589e\u4e00\u500b\u6a94\u6848\uff1a \ntouch app/controllers/users/registrations_controller.rb\n\n\u5982\u679c\u6c92\u6709 users \u9019\u500b\u8cc7\u6599\u593e\uff0c\u5c31\u5148\u5efa\u7acb\u4e00\u500b\nmkdir app/controllers/users\n\n\u63a5\u8457\u7de8\u8f2f\u6a94\u6848\u5167\u5bb9\uff0c\u5b9a\u7fa9 class\n\napp/controllers/users/registrations_controller.rb\nclass Users::RegistrationsController < Devise::RegistrationsController\nend\n\n\n\n\u52a0\u5165\u60f3\u8981\u65b0\u589e\u7684\u6b04\u4f4d\n\u9019\u6642\u5019\uff0c\u8981\u8907\u5beb\u4e00\u500b method - configure_permitted_parameters\n\n\u65b0\u589e permit\n\u5728\u4e0d\u540c\u7684\u8868\u55ae\u5167\u65b0\u589e permit \uff0c\u9700\u8981\u5404\u81ea\u8a2d\u5b9a\u5728 devise_parameter_sanitizer \u7684 for() \u7684\u53c3\u6578\n\n\u8a3b\u518a - :sign_up\n\n\u7de8\u8f2f\u5e33\u865f - :account_update\n\n\n\n\u50b3\u5165\u6b04\u4f4d\n\u5728\u5f8c\u9762\u63a5\u4e0a << \u8f38\u5165\u8981\u65b0\u589e\u7684\u6b04\u4f4d\uff0c\u5982\u679c\u53ea\u6709\u4e00\u500b\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u653e :name \u5c31\u53ef\u4ee5\uff1b\u4e00\u500b\u4ee5\u4e0a\u7684\u8a71\uff0c\u5c31\u53ef\u4ee5\u7528\u9663\u5217\u5305\u8d77\u4f86\u50b3\u5165\u3002\ndef configure_permitted_parameters\n  devise_parameter_sanitizer.for(:sign_up) << [:name]\n  devise_parameter_sanitizer.for(:account_update) << [:name]\nend\n\n\n\u52a0\u5165 before_filter\n\u70ba\u4e86\u8981\u8b93 devise \u77e5\u9053\u8981\u8b93\u9019\u500b\u6211\u5011\u5b9a\u7fa9\u7684\u6b04\u4f4d\u901a\u904e\uff0c\u5fc5\u9808\u52a0\u5165 before_filter\nbefore_filter :configure_permitted_parameters\n\n\nController \u6700\u5f8c\u7684\u6a23\u5b50\n\napp/controllers/users/registrations_controller.rb\nclass Users::RegistrationsController < Devise::RegistrationsController\n  before_filter :configure_permitted_parameters\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up) << :name\n    devise_parameter_sanitizer.for(:account_update) << :name\n  end\nend\n\n\n\n\u5c0e\u5411 controller\n\u6700\u5f8c\uff0c\u8b93 devise \u77e5\u9053\u8981\u4f7f\u7528\u6211\u5011\u81ea\u5df1\u65b0\u589e\u7684 registrations controller\n\nconfig/routes.rb\ndevise_for :users, :controllers => { :registrations => \"users/registrations\" }\n\n\n\u6700\u5f8c\uff0c\u91cd\u555f rails s \uff0c\u8b8a\u66f4\u5c31\u53ef\u4ee5\u751f\u6548\u4e86\u3002\n\n\u7528 devise \u5275\u5efa User \u4e4b\u5f8c\uff0c\u53ea\u6709\u57fa\u672c\u7684\u6b04\u4f4d\uff0c\u5982\u679c\u8981\u65b0\u589e\u81ea\u5b9a\u7fa9\u7684\u6b04\u4f4d\uff0c\u56e0\u70ba strong parameter \u7684\u95dc\u4fc2\uff0c\u5fc5\u9808\u8981\u52a0\u5165 permit \u4e2d\uff0c\u907f\u514d\u8cc7\u6599\u7121\u6cd5\u5b58\u5165\u3002\n\n\u8a3b\uff1a \u8868\u55ae view \u4ee5\u53ca model \u7684 migration \u8b8a\u66f4\u8acb\u5148\u81ea\u884c\u5b8c\u6210\n\n### \u5efa\u7acb controller class\n\n\u9019\u6642\u5019\u5148\u65b0\u589e\u4e00\u500b\u6a94\u6848\uff1a \n\n``` bash\ntouch app/controllers/users/registrations_controller.rb\n```\n\n\u5982\u679c\u6c92\u6709 users \u9019\u500b\u8cc7\u6599\u593e\uff0c\u5c31\u5148\u5efa\u7acb\u4e00\u500b\n\n``` bash\nmkdir app/controllers/users\n```\n\n\u63a5\u8457\u7de8\u8f2f\u6a94\u6848\u5167\u5bb9\uff0c\u5b9a\u7fa9 class\n\n``` ruby:app/controllers/users/registrations_controller.rb\nclass Users::RegistrationsController < Devise::RegistrationsController\nend\n```\n\n### \u52a0\u5165\u60f3\u8981\u65b0\u589e\u7684\u6b04\u4f4d\n\n\u9019\u6642\u5019\uff0c\u8981\u8907\u5beb\u4e00\u500b method - `configure_permitted_parameters`\n\n\n#### \u65b0\u589e permit\n\n\u5728\u4e0d\u540c\u7684\u8868\u55ae\u5167\u65b0\u589e permit \uff0c\u9700\u8981\u5404\u81ea\u8a2d\u5b9a\u5728 devise_parameter_sanitizer \u7684 `for()` \u7684\u53c3\u6578\n\n- \u8a3b\u518a - `:sign_up`\n- \u7de8\u8f2f\u5e33\u865f - `:account_update`\n\n#### \u50b3\u5165\u6b04\u4f4d\n\n\u5728\u5f8c\u9762\u63a5\u4e0a `<<` \u8f38\u5165\u8981\u65b0\u589e\u7684\u6b04\u4f4d\uff0c\u5982\u679c\u53ea\u6709\u4e00\u500b\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u653e `:name` \u5c31\u53ef\u4ee5\uff1b\u4e00\u500b\u4ee5\u4e0a\u7684\u8a71\uff0c\u5c31\u53ef\u4ee5\u7528\u9663\u5217\u5305\u8d77\u4f86\u50b3\u5165\u3002\n\n``` ruby\ndef configure_permitted_parameters\n  devise_parameter_sanitizer.for(:sign_up) << [:name]\n  devise_parameter_sanitizer.for(:account_update) << [:name]\nend\n```\n\n### \u52a0\u5165 before_filter\n\n\u70ba\u4e86\u8981\u8b93 devise \u77e5\u9053\u8981\u8b93\u9019\u500b\u6211\u5011\u5b9a\u7fa9\u7684\u6b04\u4f4d\u901a\u904e\uff0c\u5fc5\u9808\u52a0\u5165 before_filter\n\n``` ruby\nbefore_filter :configure_permitted_parameters\n```\n\n### Controller \u6700\u5f8c\u7684\u6a23\u5b50\n\n``` ruby:app/controllers/users/registrations_controller.rb\nclass Users::RegistrationsController < Devise::RegistrationsController\n  before_filter :configure_permitted_parameters\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.for(:sign_up) << :name\n    devise_parameter_sanitizer.for(:account_update) << :name\n  end\nend\n```\n\n## \u5c0e\u5411 controller\n\n\u6700\u5f8c\uff0c\u8b93 devise \u77e5\u9053\u8981\u4f7f\u7528\u6211\u5011\u81ea\u5df1\u65b0\u589e\u7684 registrations controller\n\n``` ruby:config/routes.rb\ndevise_for :users, :controllers => { :registrations => \"users/registrations\" }\n```\n\n\u6700\u5f8c\uff0c\u91cd\u555f `rails s` \uff0c\u8b8a\u66f4\u5c31\u53ef\u4ee5\u751f\u6548\u4e86\u3002\n", "tags": ["Rails", "devise"]}