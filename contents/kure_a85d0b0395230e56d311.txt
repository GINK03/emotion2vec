{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\nBrowserAction\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001Ajax\u3067\u30b5\u30fc\u30d0(PHP)\u3068\u901a\u4fe1\u3059\u308b\u3002\n\u30b5\u30fc\u30d0\u304b\u3089\u6570\u5024\u304cJSON\u3067\u8fd4\u7b54\u3055\u308c\u3001\u305d\u306e\u7d50\u679c\u3092BrowserAction\u306e\u30dc\u30bf\u30f3\u306b\u8868\u793a\u3059\u308b\n\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u753b\u9762\u306f\u8868\u793a\u3057\u306a\u3044\n\n\n\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d0\u304b\u3089\u6570\u5024\u304cJSON\u3067\u8fd4\u7b54\u3055\u308c\u3001\u30dc\u30bf\u30f3\u306b\u8868\u793a\u3055\u308c\u308b\u2193\n\n\n\u30b3\u30fc\u30c9\n\nmanifest.json\n{\n    \"name\": \"Ajax Sample\",\n    \"version\": \"0.1\",\n    \"manifest_version\": 2,\n    \"description\": \"Ajax Sample\",\n    \"permissions\": [\"http://sample.info/*\"], \n    \"browser_action\": {\n        \"default_title\": \"Ajax Sample\"\n    },\n    \"background\": {\n    \"scripts\": [\"background.js\"]\n    }\n}\n\n\n\n\nbackground.js\nchrome.browserAction.onClicked.addListener(function(tab){\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function(){\n        if(xhr.readyState == 4 && xhr.status == 200){\n            chrome.browserAction.setBadgeText({text:\"\"+JSON.parse(xhr.responseText).num});\n        }\n    }\n    var url = 'http://sample.info/ajax.php';\n    xhr.open('GET', url, true);\n    xhr.send();\n});\n\n\n\najax.php\n<?php\n\necho json_encode(array('num' => 1));\n\n\n\n### \u6982\u8981\n* BrowserAction\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001Ajax\u3067\u30b5\u30fc\u30d0(PHP)\u3068\u901a\u4fe1\u3059\u308b\u3002\n* \u30b5\u30fc\u30d0\u304b\u3089\u6570\u5024\u304cJSON\u3067\u8fd4\u7b54\u3055\u308c\u3001\u305d\u306e\u7d50\u679c\u3092BrowserAction\u306e\u30dc\u30bf\u30f3\u306b\u8868\u793a\u3059\u308b\n* \u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u753b\u9762\u306f\u8868\u793a\u3057\u306a\u3044\n\n![browseraction1.png](https://qiita-image-store.s3.amazonaws.com/0/50690/52ce2e00-9264-b9fb-958d-abee0af7611b.png)\n\n\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u30b5\u30fc\u30d0\u304b\u3089\u6570\u5024\u304cJSON\u3067\u8fd4\u7b54\u3055\u308c\u3001\u30dc\u30bf\u30f3\u306b\u8868\u793a\u3055\u308c\u308b\u2193\n\n![browseraction2.png](https://qiita-image-store.s3.amazonaws.com/0/50690/dde8ae9b-fcd1-dd80-ffbe-0dc3d80ef8c1.png)\n\n\n### \u30b3\u30fc\u30c9\n\n\n```lang:manifest.json\n{\n    \"name\": \"Ajax Sample\",\n    \"version\": \"0.1\",\n    \"manifest_version\": 2,\n    \"description\": \"Ajax Sample\",\n    \"permissions\": [\"http://sample.info/*\"], \n    \"browser_action\": {\n        \"default_title\": \"Ajax Sample\"\n    },\n    \"background\": {\n\t\"scripts\": [\"background.js\"]\n    }\n}\n\n```\n\n```lang:background.js\nchrome.browserAction.onClicked.addListener(function(tab){\n\tvar xhr = new XMLHttpRequest();\n\txhr.onreadystatechange = function(){\n\t\tif(xhr.readyState == 4 && xhr.status == 200){\n\t\t\tchrome.browserAction.setBadgeText({text:\"\"+JSON.parse(xhr.responseText).num});\n\t\t}\n\t}\n\tvar url = 'http://sample.info/ajax.php';\n\txhr.open('GET', url, true);\n\txhr.send();\n});\n```\n\n```lang:ajax.php\n<?php\n\necho json_encode(array('num' => 1));\n```\n", "tags": ["chrome-extension", "PHP", "JavaScript"]}