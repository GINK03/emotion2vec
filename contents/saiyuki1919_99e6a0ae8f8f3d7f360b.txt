{"context": "\n\nWebSocket\u3068\u306f\n\u53cc\u65b9\u5411\u901a\u4fe1\u3067\u3042\u308a\u3001\u30b5\u30fc\u30d0\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u9593\u3067\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057\u3001\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u304c\u9001\u4fe1\u3055\u308c\u308b\u3068\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u305d\u306e\u30b3\u30e1\u30f3\u30c8\u304c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u5f35\u3063\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5168\u54e1\u306b\u9001\u3089\u308c\u308b\u3053\u3068\u3067Facebook\u30e1\u30c3\u30bb\u30f3\u30b8\u30e3\u30fc\u3084Line\u306e\u3088\u3046\u306a\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u73fe\u3067\u304d\u308b\u3002\u3053\u306e\u3088\u3046\u306a\u53cc\u65b9\u5411\u901a\u4fe1\u306e\u4ed5\u7d44\u307f\u3092WebSocket\u3068\u3044\u3046\u3002\n\u3061\u306a\u307f\u306b\u4f59\u8ac7\u3068\u3057\u3066\u30dd\u30fc\u30ea\u30f3\u30b0\u65b9\u5f0f\u304c\u3042\u308b\u304c\u3001websocket\u3067\u306f\u30b3\u30e1\u30f3\u30c8\u304c\u9001\u4fe1\u3055\u308c\u305f\u9014\u7aef\u306b\u30b5\u30fc\u30d0\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u308b\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u30dd\u30fc\u30ea\u30f3\u30b0\u3067\u306f\u3001\u4f55\u79d2\u9593\u3054\u3068\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u308a\u7d9a\u3051\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u3055\u308c\u308b\u3068\u9001\u308a\u7d9a\u3051\u3066\u3044\u308b\u30d1\u30b1\u30c3\u30c8\u306b\u305d\u306e\u307e\u307e\u4e57\u305b\u3066\u30b5\u30fc\u30d0\u306b\u9001\u308b\u4ed5\u7d44\u307f\u306b\u306a\u308b\u3002\u3088\u3063\u3066\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u53cd\u6620\u3055\u308c\u308b\u307e\u3067\u4f55\u79d2\u9593\u3068\u5927\u5e45\u306b\u9045\u308c\u308b\u4e0a\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u308a\u3064\u3064\u3065\u3051\u308b\u305f\u3081\u30b5\u30fc\u30d0\u306e\u8ca0\u62c5\u304c\u5927\u304d\u3044\u3002\n\nFlask\u4e0a\u3067WebSocket\u3092\u5b9f\u73fe\n\nFlask\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\nVisual Studio2015\u3092\u958b\u304d\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u9078\u629e\n\u3010\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3011\u25b6\ufe0e\u3010Python\u3011\u25b6\ufe0e\u3010Web\u3011\u25b6\ufe0e\u3010Flask Web Project\u3011\n\n\nWebsocket\u306e\u5c0e\u5165\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\n\nhello.html\n<!DOCTYPE html>\n\n<html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <meta charset=\"utf-8\" />\n    <title>Test</title>\n</head>\n<body>\n    <h1>Flask\u3067echo\u30b5\u30fc\u30d0\u30fc\u2606</h1>\n    <form id=\"emit\" method=\"POST\" action='#'>\n        <input type=\"text\" name=\"emit_data\" id=\"emit_data\" placeholder=\"Message\">\n        <input type=\"submit\" value=\"Echo\">\n    </form>\n    <form id=\"broadcast\" method=\"POST\" action='#'>\n        <input type=\"text\" name=\"broadcast_data\" id=\"broadcast_data\" placeholder=\"Message\">\n        <input type=\"submit\" value=\"Broadcast\">\n    </form>\n\n    <ul id=\"log\"></ul>\n    <script type=\"text/javascript\" src=\"//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js\"></script>\n    <script src=\"http://code.jquery.com/jquery-1.8.2.min.js\"></script>\n    <script type=\"text/javascript\" charset=\"utf-8\">\n        $(function () {\n            namespace = '/test';\n            var socket = io.connect('http://'+ document.domain+ ':' + location.port + namespace);\n            $('form#emit').submit(function (event) {\n                socket.emit('my event', { data: $('#emit_data').val() });\n                return false;\n            });\n            $('form#broadcast').submit(function (event) {\n                socket.emit('my broadcast event', { data: $('#broadcast_data').val() });\n                return false;\n            });\n\n            socket.on('my response', function (msg) {\n                $('#log').append('<br>' + $('<div/>').text('Received #' + msg.count + ': ' + msg.data).html());\n            });\n        })\n    </script>\n</body>\n</html>\n\n\n\nviews.py\n\"\"\"\nRoutes and views for the flask application.\n\"\"\"\n\nfrom datetime import datetime\nfrom flask import render_template\nfrom FlaskWebProject2 import app\nfrom flask_sockets import Sockets\n\n@app.route('/')\ndef hello():\n    return render_template('hello.html')\n\nif __name__ == '__main__':\n    socketio.run(app, debug=True)\n\n\n\nrunserver.py\n\"\"\"\nThis script runs the FlaskWebProject2 application using a development server.\n\"\"\"\n\nfrom os import environ\nfrom FlaskWebProject2 import app\nfrom flask import Flask, render_template, session, request         \nfrom flask_socketio import SocketIO, emit, join_room, leave_room,close_room, rooms, disconnect   \n\nasync_mode = None\napp.config['SECRET_KEY'] = 'secret!'\n\nsocketio = SocketIO(app)\nthread = None\n\n@socketio.on('my event', namespace='/test')\ndef test_message(message):\n    session['receive_count'] = session.get('receive_count', 0) + 1\n    emit('my response',{'data': message['data'], 'count': session['receive_count']})\n\n@socketio.on('my broadcast event', namespace='/test')\ndef test_broadcast_message(message):\n    session['receive_count'] = session.get('receive_count', 0) + 1\n    emit('my response',{'data': message['data'], 'count': session['receive_count']},broadcast=True)\n\nif __name__ == '__main__':\n\n    HOST = environ.get('SERVER_HOST', 'localhost')\n    try:\n        PORT = int(environ.get('SERVER_PORT', '5555'))\n    except ValueError:\n        PORT = 5555\n    socketio.run(app,HOST,PORT)\n    #app.run(HOST, PORT)\n\n\n\n\n\u5b9f\u884c\nVS\u3092Run\u3059\u308b\u3059\u308b\u3068\u4e0b\u8a18\u306e\u753b\u50cf\u306e\u3088\u3046\u306a\u30da\u30fc\u30b8\u304c\u958b\u304f\nEcho\u3068\u3044\u3046\u9805\u76ee\u306f\u30a8\u30b3\u30fc\u3092\u8fd4\u3059\u3060\u3051\u3067\u3059\n\nBroadcast\u3068\u3044\u3046\u9805\u76ee\u3067\u306fwebsoket\u3092\u4f7f\u3063\u3066\u3001\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u540c\u69d8\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\u306e\u3067\u3001\u65b0\u3057\u3044\u30bf\u30d6\u3092\u958b\u304f\u3068Broadcast\u3067\u9001\u4fe1\u3057\u305f\u300chello\u300d\u306f\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\n\n\n\nAzure\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\uff06\u30a8\u30e9\u30fc\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u304f\u3060\u3055\u3044\n\u30c7\u30d7\u30ed\u30a4\u3092\u3059\u308b\u3068ScoketIO\u306e\u8aad\u307f\u8fbc\u307f\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066websocket\u3055\u308c\u306a\u3044\n\u3053\u306e\u30a8\u30e9\u30fc\u306f\u591a\u5206\u3001web\u304b\u3089socketio\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3053\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u306bAzure\u306e\u30d5\u30a9\u30eb\u30c0\u30fc\u304b\u3089\u8aad\u3082\u3046\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u3066\u3044\u308b\u3068\u8003\u3048\u3089\u308c\u308b\u3002\n\n\u3053\u306e\u30a8\u30e9\u30fc\u306e\u89e3\u6c7a\u65b9\u6cd5\u3092\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u3067\u3044\u305f\u3060\u3051\u308b\u3068\u3042\u308a\u304c\u305f\u3044\u3067\u3059\u3002\u63a2\u3057\u3066\u3082\u89e3\u6c7a\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3067\u3059\n#WebSocket\u3068\u306f\n\u53cc\u65b9\u5411\u901a\u4fe1\u3067\u3042\u308a\u3001\u30b5\u30fc\u30d0\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u9593\u3067\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057\u3001\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u304c\u9001\u4fe1\u3055\u308c\u308b\u3068\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u305d\u306e\u30b3\u30e1\u30f3\u30c8\u304c\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u5f35\u3063\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5168\u54e1\u306b\u9001\u3089\u308c\u308b\u3053\u3068\u3067Facebook\u30e1\u30c3\u30bb\u30f3\u30b8\u30e3\u30fc\u3084Line\u306e\u3088\u3046\u306a\u30c1\u30e3\u30c3\u30c8\u30b7\u30b9\u30c6\u30e0\u3092\u5b9f\u73fe\u3067\u304d\u308b\u3002\u3053\u306e\u3088\u3046\u306a\u53cc\u65b9\u5411\u901a\u4fe1\u306e\u4ed5\u7d44\u307f\u3092WebSocket\u3068\u3044\u3046\u3002\n\n\u3061\u306a\u307f\u306b\u4f59\u8ac7\u3068\u3057\u3066\u30dd\u30fc\u30ea\u30f3\u30b0\u65b9\u5f0f\u304c\u3042\u308b\u304c\u3001websocket\u3067\u306f\u30b3\u30e1\u30f3\u30c8\u304c\u9001\u4fe1\u3055\u308c\u305f\u9014\u7aef\u306b\u30b5\u30fc\u30d0\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u308b\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u30dd\u30fc\u30ea\u30f3\u30b0\u3067\u306f\u3001\u4f55\u79d2\u9593\u3054\u3068\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u308a\u7d9a\u3051\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u3055\u308c\u308b\u3068\u9001\u308a\u7d9a\u3051\u3066\u3044\u308b\u30d1\u30b1\u30c3\u30c8\u306b\u305d\u306e\u307e\u307e\u4e57\u305b\u3066\u30b5\u30fc\u30d0\u306b\u9001\u308b\u4ed5\u7d44\u307f\u306b\u306a\u308b\u3002\u3088\u3063\u3066\u3001\u30b3\u30e1\u30f3\u30c8\u304c\u53cd\u6620\u3055\u308c\u308b\u307e\u3067\u4f55\u79d2\u9593\u3068\u5927\u5e45\u306b\u9045\u308c\u308b\u4e0a\u306b\u30d1\u30b1\u30c3\u30c8\u3092\u9001\u308a\u3064\u3064\u3065\u3051\u308b\u305f\u3081\u30b5\u30fc\u30d0\u306e\u8ca0\u62c5\u304c\u5927\u304d\u3044\u3002\n\n\n#Flask\u4e0a\u3067WebSocket\u3092\u5b9f\u73fe\n##Flask\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\nVisual Studio2015\u3092\u958b\u304d\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u9078\u629e\n**\u3010\u65b0\u3057\u3044\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3011\u25b6\ufe0e\u3010Python\u3011\u25b6\ufe0e\u3010Web\u3011\u25b6\ufe0e\u3010Flask Web Project\u3011**\n\n<img width=\"1274\" alt=\"1.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/130097/0d7b1fa8-8686-2d1f-f78c-7d1f32ec92aa.png\">\n\n##Websocket\u306e\u5c0e\u5165\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u66f8\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\n\u53c2\u8003\u306b\u3057\u305f[\u30b5\u30a4\u30c8](http://blog.kzfmix.com/entry/1380712277)\n\n```Python:hello.html\n<!DOCTYPE html>\n\n<html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <meta charset=\"utf-8\" />\n    <title>Test</title>\n</head>\n<body>\n    <h1>Flask\u3067echo\u30b5\u30fc\u30d0\u30fc\u2606</h1>\n    <form id=\"emit\" method=\"POST\" action='#'>\n        <input type=\"text\" name=\"emit_data\" id=\"emit_data\" placeholder=\"Message\">\n        <input type=\"submit\" value=\"Echo\">\n    </form>\n    <form id=\"broadcast\" method=\"POST\" action='#'>\n        <input type=\"text\" name=\"broadcast_data\" id=\"broadcast_data\" placeholder=\"Message\">\n        <input type=\"submit\" value=\"Broadcast\">\n    </form>\n\n    <ul id=\"log\"></ul>\n    <script type=\"text/javascript\" src=\"//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js\"></script>\n    <script src=\"http://code.jquery.com/jquery-1.8.2.min.js\"></script>\n    <script type=\"text/javascript\" charset=\"utf-8\">\n        $(function () {\n            namespace = '/test';\n            var socket = io.connect('http://'+ document.domain+ ':' + location.port + namespace);\n            $('form#emit').submit(function (event) {\n                socket.emit('my event', { data: $('#emit_data').val() });\n                return false;\n            });\n            $('form#broadcast').submit(function (event) {\n                socket.emit('my broadcast event', { data: $('#broadcast_data').val() });\n                return false;\n            });\n\n            socket.on('my response', function (msg) {\n                $('#log').append('<br>' + $('<div/>').text('Received #' + msg.count + ': ' + msg.data).html());\n            });\n        })\n    </script>\n</body>\n</html>\n```\n\n```Python:views.py\n\"\"\"\nRoutes and views for the flask application.\n\"\"\"\n\nfrom datetime import datetime\nfrom flask import render_template\nfrom FlaskWebProject2 import app\nfrom flask_sockets import Sockets\n\n@app.route('/')\ndef hello():\n    return render_template('hello.html')\n\nif __name__ == '__main__':\n    socketio.run(app, debug=True)\n```\n\n\n```Python:runserver.py\n\"\"\"\nThis script runs the FlaskWebProject2 application using a development server.\n\"\"\"\n\nfrom os import environ\nfrom FlaskWebProject2 import app\nfrom flask import Flask, render_template, session, request         \nfrom flask_socketio import SocketIO, emit, join_room, leave_room,close_room, rooms, disconnect   \n\nasync_mode = None\napp.config['SECRET_KEY'] = 'secret!'\n\nsocketio = SocketIO(app)\nthread = None\n\n@socketio.on('my event', namespace='/test')\ndef test_message(message):\n    session['receive_count'] = session.get('receive_count', 0) + 1\n    emit('my response',{'data': message['data'], 'count': session['receive_count']})\n\n@socketio.on('my broadcast event', namespace='/test')\ndef test_broadcast_message(message):\n    session['receive_count'] = session.get('receive_count', 0) + 1\n    emit('my response',{'data': message['data'], 'count': session['receive_count']},broadcast=True)\n\nif __name__ == '__main__':\n\n    HOST = environ.get('SERVER_HOST', 'localhost')\n    try:\n        PORT = int(environ.get('SERVER_PORT', '5555'))\n    except ValueError:\n        PORT = 5555\n    socketio.run(app,HOST,PORT)\n    #app.run(HOST, PORT)\n\n```\n\n##\u5b9f\u884c\nVS\u3092Run\u3059\u308b\u3059\u308b\u3068\u4e0b\u8a18\u306e\u753b\u50cf\u306e\u3088\u3046\u306a\u30da\u30fc\u30b8\u304c\u958b\u304f\nEcho\u3068\u3044\u3046\u9805\u76ee\u306f\u30a8\u30b3\u30fc\u3092\u8fd4\u3059\u3060\u3051\u3067\u3059\n<img width=\"1098\" alt=\"\uff11.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/130097/755e5571-c86f-a66d-f056-c15bc3a0e071.png\">\n\nBroadcast\u3068\u3044\u3046\u9805\u76ee\u3067\u306fwebsoket\u3092\u4f7f\u3063\u3066\u3001\u30b3\u30cd\u30af\u30b7\u30e7\u30f3\u3092\u78ba\u7acb\u3057\u3066\u3044\u308b\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u540c\u69d8\u306b\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u4fe1\u3059\u308b\u306e\u3067\u3001\u65b0\u3057\u3044\u30bf\u30d6\u3092\u958b\u304f\u3068**Broadcast**\u3067\u9001\u4fe1\u3057\u305f\u300c**hello**\u300d\u306f\u53cd\u6620\u3055\u308c\u3066\u3044\u308b\n<img width=\"1095\" alt=\"\uff12.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/130097/eeb5830b-84e6-fa47-9f2e-26175f70c227.png\">\n\n<img width=\"1097\" alt=\"3.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/130097/e303ba5f-3aca-74fb-ff18-3bff8a480d06.png\">\n\n#Azure\u4e0a\u306b\u30c7\u30d7\u30ed\u30a4\uff06\u30a8\u30e9\u30fc\n[\u3053\u3061\u3089](http://qiita.com/saiyuki1919/items/db6f9a2c705a1c9135dc)\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u3066\u304f\u3060\u3055\u3044\n\u30c7\u30d7\u30ed\u30a4\u3092\u3059\u308b\u3068ScoketIO\u306e\u8aad\u307f\u8fbc\u307f\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066websocket\u3055\u308c\u306a\u3044\n\u3053\u306e\u30a8\u30e9\u30fc\u306f\u591a\u5206\u3001web\u304b\u3089socketio\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3053\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u306e\u306bAzure\u306e\u30d5\u30a9\u30eb\u30c0\u30fc\u304b\u3089\u8aad\u3082\u3046\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u3066\u3044\u308b\u3068\u8003\u3048\u3089\u308c\u308b\u3002\n![error.png](https://qiita-image-store.s3.amazonaws.com/0/130097/95542a6c-226d-959a-1e87-3b225becd38a.png)\n\n\n**\u3053\u306e\u30a8\u30e9\u30fc\u306e\u89e3\u6c7a\u65b9\u6cd5\u3092\u30b3\u30e1\u30f3\u30c8\u306a\u3069\u3067\u3044\u305f\u3060\u3051\u308b\u3068\u3042\u308a\u304c\u305f\u3044\u3067\u3059\u3002\u63a2\u3057\u3066\u3082\u89e3\u6c7a\u65b9\u6cd5\u304c\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3067\u3059**\n", "tags": ["PTVS", "Azure", "Flask", "Sockets", "websocket"]}