{"tags": ["zabbix", "CentOS"], "context": "\n\nZabbix\u69cb\u7bc9\u30fb\u904b\u7528\u30ac\u30a4\u30c9\n\n1.\u6982\u8981\n\n1-1. \u8aac\u660e\u3059\u308b\u3053\u3068\nZabbix\u306e\u69cb\u7bc9\u30fb\u8a2d\u5b9a\u30fb\u904b\u7528\u306b\u3064\u3044\u3066\u8a18\u8f09\u3059\u308b\u3002\n\n\n\u69cb\u7bc9\u306b\u3064\u3044\u3066\n\u5358\u4e00\u30b5\u30fc\u30d0\u4e0a\u306bWeb\u30b5\u30fc\u30d0(Apache httpd)\u30fbAPL\u30b5\u30fc\u30d0(Zabbix Server)\u30fbDB\u30b5\u30fc\u30d0(MySQL)\u3092\u5168\u4e57\u305b\u3059\u308b\u69cb\u6210\u3067\u69cb\u7bc9\u3059\u308b\u3002\n\n\n\u8a2d\u5b9a\u306b\u3064\u3044\u3066\nZabbix\u306e\u8a2d\u5b9a\u306f\u3001\u8a2d\u5b9a\u7b87\u6240\u3092\u306a\u308b\u3079\u304f\u5c40\u6240\u5316\uff0f\u30eb\u30fc\u30eb\u5316\u3057\u306a\u3044\u3068\u30ab\u30aa\u30b9\u306b\u306a\u308b\u305f\u3081\u3001\u53ef\u80fd\u306a\u9650\u308a\u8a2d\u5b9a\u4f5c\u696d\u3092\u81ea\u52d5\u5316\u3059\u308b\u3088\u3046\u3001Zabbix\u306e\u6a5f\u80fd\u3092\u6d3b\u7528\u3059\u308b\u3002\n\n\n\u904b\u7528\u306b\u3064\u3044\u3066\n\u5b9f\u904b\u7528\u3067\u906d\u9047\u3057\u305f\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c8\u3084\u7d4c\u9a13\u8ac7\u3082\u90fd\u5ea6\u8ffd\u8a18\u3057\u3066\u3044\u304f\u3002\n\n\n\n1-2. \u4eca\u56de\u306e\u69cb\u7bc9\u74b0\u5883\nOS:CentOS 6.8\nVersion:Zabbix 2.4\n\n1-2. \u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\n\nCentOS6 zabbix\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u8a2d\u5b9a\u65b9\u6cd5\n\n\n2. Zabbix\u69cb\u7bc9\n\n2-1. Zabbix\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nZabbix\u30ea\u30dd\u30b8\u30c8\u30ea\u767b\u9332\nyum install http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpm\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install zabbix-server-mysql zabbix-web-mysql zabbix-agent zabbix_get\nyum install httpd mysql-server\nyum install php-mysql php-gd php-xml php-bcmath \n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\ncp -pi /etc/my.cnf /etc/my.cnf.org\ncp -pi /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.org\ncp -pi /etc/zabbix/zabbix_server.conf /etc/zabbix/zabbix_server.conf.org\n\n\nMySQL\u8a2d\u5b9a\n\nmy.cnf\nvi /etc/my.cnf\nutf\u3092\u6709\u52b9\u306b\u3059\u308b\ncharacter-set-server=utf8\u3000\u3092\u8ffd\u52a0\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\nservice mysqld start\n\n\nchkconfig\u8a2d\u5b9a\nchkconfig mysqld on\n\n\nmysql_secure_install\u8a2d\u5b9a\nmysql_secure_installation\n\n\nDB\u4f5c\u6210\nmysql -u root -p\nmysql> create database zabbix; \n\n\n\u6a29\u9650\u4ed8\u4e0e/\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\n\u3053\u3053\u3067\u306f\u4f8b\u3068\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092'password'\u3068\u3057\u305f\u3002\nmysql> grant all privileges on zabbix.* to zabbix@'localhost' identified by 'password'; \nmysql> grant all privileges on zabbix.* to zabbix@'%' identified by 'password'; \nmysql> flush privileges; \nmysql> \\q\n\n\n\n\nhttpd\u8a2d\u5b9a\n\nphp.ini\u8a2d\u5b9a\nvi /etc/php.ini\ntimezone\u3092\"Asia/Tokyo\"\u306b\u3059\u308b\nvi zabbix_server.conf\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\nservice httpd start\n\n\nchkconfig\u8a2d\u5b9a\nchkconfig httpd on\n\n\n\n\nZabbix\u30b5\u30fc\u30d0\u8a2d\u5b9a\n\n\u521d\u671f\u8a2d\u5b9a\u3092\u3059\u308b\nDB\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u5148\u307b\u3069\u8a2d\u5b9a\u3057\u305f\u3082\u306e\u3068\u5408\u308f\u305b\u308b\u3002\nvi /etc/zabbix/zabbix_server.conf\nDBHost=localhost\nDBPassword=password\n\n\n\u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\ncd /usr/share/doc/zabbix-server-mysql-2.4.8/create/\nmysql -u root -p zabbix < schema.sql \nmysql -u root -p zabbix < images.sql \nmysql -u root -p zabbix < data.sql \n\n\nZabbix\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3059\u308b\nservice zabbix-server start\n\n\niptables\u306e\u8a31\u53ef\u8a2d\u5b9a\n\u30b3\u30de\u30f3\u30c9\u306f\u74b0\u5883\u306b\u3042\u308f\u305b\u3066\u5909\u66f4\u3059\u308b\u3002\u76f4\u63a5 /etc/sysconfig/iptables \u3092\u4fee\u6b63\u3057\u3066\u3082\u3088\u3044\u3002\n\u4eca\u56de\u306fiptables\u306e\uff15\u884c\u76ee\u306b\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u3002\niptables -I INPUT 5 -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT\nservice iptables save\n \n\n\nWeb\u30d6\u30e9\u30a6\u30b6\u304b\u3089Zabbix\u30b5\u30fc\u30d0\u306b\u30a2\u30af\u30bb\u30b9\nhttp://IP\u30a2\u30c9\u30ec\u30b9/zabbix\n\u521d\u671fID: Admin\n\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9: zabbix\n\n\n\n\n2-2. \u4efb\u610f\u306e\u5c0e\u5165\n\n\u30d5\u30a9\u30f3\u30c8\u8a2d\u5b9a\uff08\u30b0\u30e9\u30d5\u63cf\u753b\u3067\u65e5\u672c\u8a9e\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\uff09\n\nIPA\u30b4\u30b7\u30c3\u30af\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install ipa-pgothic-fonts\n\n\nIPA\u30b4\u30b7\u30c3\u30af\u306e\u30d5\u30a9\u30f3\u30c8\u306e\u512a\u5148\u5ea6\u3092\u9ad8\u304f\u3059\u308b\nalternatives --install /usr/share/zabbix/fonts/graphfont.ttf zabbix-web-font /usr/share/fonts/ipa-pgothic/ipagp.ttf 1000\n\n\n\u8a2d\u5b9a\u53cd\u6620\nalternatives --display zabbix-web-font\n\n\n\n\n\u30e1\u30fc\u30eb\u306e\u5916\u90e8\u914d\u9001\u8a2d\u5b9a\uff08\u901a\u77e5\u30e1\u30fc\u30eb\u3092\u5916\u90e8\u914d\u9001\u3059\u308b\u5834\u5408\uff09\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install postfix cyrus-sasl-plain mailx\n\n\nmain.cf\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\nvi /etc/postfix/main.cf\nrelayhost = [smtp.nifty.com]:587\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_mechanism_filter = plain\nsmtp_sasl_password_maps = hash:/etc/postfix/nifty_passwd\nsmtp_sasl_security_options = noanonymous\nsmtp_sasl_tls_security_options = noanonymous\nsmtp_use_tls = yes\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\ntouch /etc/postfix/nifty_passwd\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306b\u5404\u7a2e\u60c5\u5831\u3092\u8a18\u8f09\nvi /etc/postfix/nifty_passwd\n[smtp.nifty.com]:587 xxxxx@nifty.com:\u30d1\u30b9\u30ef\u30fc\u30c9\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092 Berkeley DB\u5f62\u5f0f\u306b\u5909\u63db\npostmap /etc/postfix/nifty_passwd\n\n\n\u8fd4\u9084\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3092\u78ba\u8a8d\nfile /etc/postfix/nifty_passwd.db \nnifty_passwd.db: Berkeley DB (Hash, version 9, native byte-order)\n\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u3092\u78ba\u8a8d\ndb_dump -p /etc/postfix/nifty_passwd.db \nVERSION=3\nformat=print\ntype=hash\nh_nelem=4097\ndb_pagesize=4096\nHEADER=END\n[smtp.nifty.com]:587\\00\nxxxxx@nifty.com:\u30d1\u30b9\u30ef\u30fc\u30c9\\00\nDATA=END\n\n\npostfix\u3092\u518d\u8d77\u52d5\nservice postfix restart\n\n\n\u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\necho \"This mail is test\" | mail -s \"test mail\" -r \u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u540d@nifty.com \u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u540d@nifty.com\n\n\n\n\nSNMP\u30c8\u30e9\u30c3\u30d7\u53d7\u4fe1\u8a2d\u5b9a\uff08SNTP\u306e\u30c8\u30e9\u30c3\u30d7\u76e3\u8996\u3092\u7528\u3044\u308b\u5834\u5408\uff09\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nyum install net-snmp net-snmp-perl net-snmp-utils snmptt\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\ncp -pi /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.org\ncp -pi /etc/snmp/snmptrapd.conf /etc/snmp/snmptrapd.conf.org\ncp -pi /etc/snmp/snmptt.ini /etc/snmp/snmptt.ini.org\n\n\nsnmptrapd.conf\u306e\u8a2d\u5b9a\n\u3053\u3053\u3067\u306f\u4f8b\u3068\u3057\u3066\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u540d\u306f'public'\u3068\u3057\u305f\u3002\nvi /etc/snmp/snmptrapd.conf\nauthCommunity   log,execute,net public\ntraphandle default /usr/sbin/snmptthandler\n\n\nsnmptrapd\u306e\u8a2d\u5b9a\nvi /etc/sysconfig/snmptrapd\nOPTIONS=\"-On -Lsd -p /var/run/snmptrapd.pid\"\n\nvi /etc/init.d/snmptrapd\nOPTIONS=\"-On -Lsd -p /var/run/snmptrapd.pid\"\n\n\nsnmptt.ini\u306e\u8a2d\u5b9a\nvi /etc/snmp/snmptt.ini\ndate_time_format = %Y/%m%d %H:%M:%S\n\n\nsnmptt.conf\u306e\u8a2d\u5b9a\nvi /etc/snmp/snmptt.conf\nEVENT general .* \"General event\" Normal\nFORMAT ZBXTRAP $aA $*\n\n\n\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\nservice snmptt start\nservice snmptrapd start\n\n\nchkconfig\u8a2d\u5b9a\nchkconfig snmptt on\nchkconfig snmptrapd on\n\n\nZabbix\u30b5\u30fc\u30d0\u518d\u8d77\u52d5\nservice zabbix-server restart\n\n\niptables\u306e\u8a31\u53ef\u8a2d\u5b9a\niptables -I INPUT 5 -p udp -m state --state NEW -m udp --dport 162 -j ACCEPT \nservice iptables save\n\n\n\u81ea\u30db\u30b9\u30c8\u3078snmptrap\u3092\u9001\u4fe1\nsnmptrap -v 2c -c public localhost '' .1.3.6.1.4.1.8072.9999 .1.3.6.1.4.1.8072.9999 s 'TEST'\n\n\nsnmptt.log\u306b\u30c8\u30e9\u30c3\u30d7\u30ed\u30b0\u306e\u51fa\u529b\u78ba\u8a8d\ncat /var/log/snmptt/snmptt.log\n2016/08/25 23:05:35 .1.3.6.1.4.1.8072.9999 Normal \"General event\" localhost - ZBXTRAP 127.0.0.1 TEST\n\n\n\n\n\n\n3.Zabbix\u8a2d\u5b9a\n\n3-1. \u8a2d\u5b9a\u3059\u308b\u9806\u756a\n\u4ee5\u4e0b\u306e\u9806\u3067\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u304f\n1. \u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u4f5c\u6210\n2. \u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210\n3. \u30e6\u30fc\u30b6\u4f5c\u6210\n4. \u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210\n5. \u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30eb\u30fc\u30eb\u4f5c\u6210\n6. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\n7. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210\n8. \u30a2\u30a4\u30c6\u30e0\u4f5c\u6210\n9. \u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c8\u30ea\u30ac\u30fc\uff09\u4f5c\u6210\n10. \u30b0\u30e9\u30d5\u4f5c\u6210\n11. \u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\uff09\u4f5c\u6210\n\n3-2. \u8a2d\u5b9a\u306e\u6d41\u308c\u306b\u3064\u3044\u3066\n\u307e\u305a\u3001\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u30fb\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u30fb\u30e6\u30fc\u30b6\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n\u3053\u308c\u3089\u306e\u60c5\u5831\u306f\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u60c5\u5831\u3068\u5207\u308a\u96e2\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u5909\u66f4\u3057\u3084\u3059\u3044\u3002\n\u6b21\u306b\u3001\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u30fb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u306e\u767b\u9332\u8a2d\u5b9a\u304b\u3089\u3001\u76e3\u8996\u5185\u5bb9\u3001\u901a\u77e5\u6761\u4ef6\u3001\u30b0\u30e9\u30d5\u306e\u4f5c\u6210\u3092\u884c\u3046\u3002\n\u524d\u8ff0\u3057\u305f\u304c\u3001\u3053\u308c\u3089\u306f\u53ef\u80fd\u306a\u9650\u308a\u81ea\u52d5\u767b\u9332\u3001\u5909\u66f4\u7b87\u6240\u3092\u5c40\u6240\u5316\u3057\u306a\u3044\u3068\u904b\u7528\u3057\u3066\u304b\u3089\u6ce3\u304f\u3053\u3068\u306b\u306a\u308b\u3002\n\u6d41\u308c\u3068\u3057\u3066\u306f\u3001IP\u30a2\u30c9\u30ec\u30b9\u30d9\u30fc\u30b9\u306b\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30eb\u30fc\u30eb\u3092\u4f5c\u6210\u3001ICMP Ping\u3067\u767a\u898b\u5f8c\u3001\u3042\u3089\u304b\u3058\u3081\u4f5c\u6210\u3057\u305f\u5b9a\u7fa9\u3092\u3082\u3068\u306b\u76e3\u8996\u5bfe\u8c61\uff08\u7269\u7406\u30b5\u30fc\u30d0\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3001VM\u306a\u3069\uff09\u306e\u81ea\u52d5\u767b\u9332\u3001\u76e3\u8996\u9805\u76ee\uff08\u30a2\u30a4\u30c6\u30e0\uff09\u306e\u8a2d\u5b9a\u3001\u969c\u5bb3\u6642\u306e\u901a\u77e5\u8a2d\u5b9a\u3001\u30b0\u30e9\u30d5\u306e\u4f5c\u6210\u307e\u3067\u81ea\u52d5\u3067\u884c\u3046\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067\u3001\u3042\u3068\u304b\u3089\u76e3\u8996\u5bfe\u8c61\u304c\u8ffd\u52a0\u306b\u306a\u3063\u305f\u3068\u304d\u3082IP\u30a2\u30c9\u30ec\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u4e00\u65b9\u3001Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u3067\u306e\u76e3\u8996\u306e\u5834\u5408\u3001\u3069\u3046\u3057\u3066\u3082\u624b\u52d5\u3067\u8a2d\u5b9a\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u7b87\u6240\u304c\u3042\u308b\u305f\u3081\u3001\u305d\u3053\u306f\u8ae6\u3081\u3066\u624b\u52d5\u3067\u30dd\u30c1\u30dd\u30c1\u3059\u308b\u3002\n\n3-3. Zabbix\u8a2d\u5b9a\u624b\u9806\n\n\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u4f5c\u6210\nZabbix\u30b5\u30fc\u30d0\u304b\u3089\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u305f\u3081\u3001SMTP\u30b5\u30fc\u30d0\u3068SMTP helo\u3092localhost.localdomain\u3068\u3059\u308b\u3002\n\u4eca\u56de\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u306e\u540d\u524d\u306f Email \u3068\u3057\u3066\u3044\u308b\u304c\u3001\u5b9b\u5148\u304c\u8907\u6570\u306b\u306a\u308b\u5834\u5408\u306f\u3001\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u540d\u524d\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u671b\u307e\u3057\u3044\u3002\n[\u7ba1\u7406]->[\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7]->[\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u306e\u4f5c\u6210]\u304b\u3089\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u3092\u4f5c\u6210\u3059\u308b\n\n\u4f8b\uff09\u5916\u90e8\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u4e2d\u7d99\u3057\u306a\u3044\u5834\u5408(Zabbix\u30b5\u30fc\u30d0\u304b\u3089\u76f4\u63a5\u9001\u4fe1\u3059\u308b\u5834\u5408)\n\u540d\u524d\uff1aEmail\n\u30bf\u30a4\u30d7\uff1a\u30e1\u30fc\u30eb\nSMTP\u30b5\u30fc\u30d0\uff1alocalhost.localdomain\nSMTP helo\uff1alocalhost.localdomain\n\u9001\u4fe1\u5143\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff1azabbix@example.com\n\n\u4f8b\uff09\u5916\u90e8\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u4e2d\u7d99\u3059\u308b\u5834\u5408\n\uff20nifty\u306e\u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7528\u3044\u3066\u3001\uff20nifty\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3059\u308b\u3002\n\u5916\u90e8\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u4e2d\u7d99\u3059\u308b\u5834\u5408\u3001Zabbix\u30b5\u30fc\u30d0\u4e0a\u306e\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\uff08\u5f8c\u8ff0\uff09\u3002\n\u540d\u524d\uff1aEmail\n\u30bf\u30a4\u30d7\uff1a\u30e1\u30fc\u30eb\nSMTP\u30b5\u30fc\u30d0\uff1alocalhost.localdomain\nSMTP helo\uff1alocalhost.localdomain\n\u9001\u4fe1\u5143\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff1axxxxx@nifty.com\n\n\n\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210\n[\u7ba1\u7406\uff3d->[\u30e6\u30fc\u30b6]->[\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7]\u304b\u3089\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\n\n\u4f8b\uff09\u7ba1\u7406\u8005\u6a29\u9650\n\u30b0\u30eb\u30fc\u30d7\u540d\uff1aAdministrator\nWeb\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\uff1a\u30b7\u30b9\u30c6\u30e0\u30c7\u30d5\u30a9\u30eb\u30c8\n\u6709\u52b9\uff1a\u30c1\u30a7\u30c3\u30af\n\n\u4f8b\uff09\u30e6\u30fc\u30b6\u6a29\u9650\n\u30b0\u30eb\u30fc\u30d7\u540d\uff1aUsers\nWeb\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\uff1a\u30b7\u30b9\u30c6\u30e0\u30c7\u30d5\u30a9\u30eb\u30c8\n\u6709\u52b9\uff1a\u30c1\u30a7\u30c3\u30af\n\n\n\u30e6\u30fc\u30b6\u4f5c\u6210\n\n\u30e6\u30fc\u30b6\u30bf\u30d6\n[\u7ba1\u7406]->[\u30e6\u30fc\u30b6]->[\u30e6\u30fc\u30b6]\u304b\u3089\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\n\n\u4f8b\uff09\u9234\u6728\u4e00\u90ce\n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3092\u4f8b\u3068\u3059\u308b\n\u540d\u524d\uff1aIchiro\n\u540d\u5b57\uff1aSuzuki\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff1aichiro-suzuki@example.com\n\u6a29\u9650\uff1a\u7ba1\u7406\u8005\n\n\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u30e1\u30fc\u30eb\u306e\u30a2\u30c9\u30ec\u30b9\u90e8\u5206(\u3053\u3053\u3067\u306fichiro-suzuki)\u3068\u3057\u3066\u304a\u304d\u3001\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u540c\u4e00\u3068\u3057\u3066\u304a\u304f\u3068\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u306b\u60a9\u307e\u306a\u304f\u3066\u6e08\u3080\u3002\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u901f\u3084\u304b\u306b\u5909\u66f4\u3057\u3066\u3082\u3089\u3046\u3002\n\u30a8\u30a4\u30ea\u30a2\u30b9\uff1aichiro-suzuki\n\u540d\u524d\uff1aIchiro\n\u540d\u5b57\uff1aSuzuki\n\u30b0\u30eb\u30fc\u30d7\uff1aAdministrator\n\u30d1\u30b9\u30ef\u30fc\u30c9\uff1aichiro-suzuki\n\u8a00\u8a9e\uff1a\u65e5\u672c\u8a9e(ja_JP)\n\n\n\u30e1\u30c7\u30a3\u30a2\u30bf\u30d6\n[\u8ffd\u52a0]\u304b\u3089\u65b0\u898f\u30e1\u30c7\u30a3\u30a2\u3092\u8ffd\u52a0\u3059\u308b\n\n\u4f8b\uff09\u65b0\u898f\u30e1\u30c7\u30a3\u30a2\u306e\u8ffd\u52a0\n\u30bf\u30a4\u30d7\uff1aEmail\n\u9001\u4fe1\u5148\uff1aichiro-suzuki@example.com\n\u30b9\u30c6\u30fc\u30bf\u30b9\uff1a\u6709\u52b9\n\n\n\u6a29\u9650\u30bf\u30d6\n\u30e6\u30fc\u30b6\u306e\u7a2e\u985e\uff1aZabbix\u7279\u6a29\u7ba1\u7406\u8005\n\n\n\n\n\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210\n\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\n\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\uff1asample hosts\n\n\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30eb\u30fc\u30eb\u4f5c\u6210\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3084\u7a3c\u50cd\u4e2d\u306e\u30b5\u30fc\u30d0\u306a\u3069\u3001Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u76e3\u8996\u5bfe\u8c61\u306b\u5bfe\u3057\u3066\u306f\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3067 \u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af\uff08ICMP Ping\u30fb\u30dd\u30fc\u30c8\u30c1\u30a7\u30c3\u30af\u30fbSNMP\u30dd\u30fc\u30ea\u30f3\u30b0\u306a\u3069\uff09\u3067\u76e3\u8996\u5bfe\u8c61\u3092\u767a\u898b\u3057\u3001\u76e3\u8996\u5bfe\u8c61\u306b\u7d44\u307f\u8fbc\u3080\u3002\nZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u76e3\u8996\u5bfe\u8c61\u306b\u5bfe\u3057\u3066\u306f\u3001Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u9078\u629e\u3059\u308b\u3002\n\u4f5c\u6210\u3059\u308b\u30eb\u30fc\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u3054\u3068\u306b\u4f5c\u6210\u3059\u308b\u3068\u3088\u3044\u3002\n\n\n\u30c1\u30a7\u30c3\u30af\u65b9\u6cd5\u3054\u3068\uff08\u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af or Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30c1\u30a7\u30c3\u30af\uff09\n\n\u30b5\u30fc\u30d0\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3054\u3068\uff08Cisco Router, Cisco Catalyst, Fujitsu primergy)\n\nOS\u3054\u3068\uff08Linux, Windows)\n\u4f8b\uff09\u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af\u3067\u306e\u30eb\u30fc\u30eb\u8a2d\u5b9a\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d\uff1aHome network appliance\nIP\u30a2\u30c9\u30ec\u30b9\u306e\u7bc4\u56f2:192.168.1.1,192.168.1.24-64\n\u30c1\u30a7\u30c3\u30af:ICMP ping\n\n\u4f8b\uff09Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3067\u306e\u30eb\u30fc\u30eb\u8a2d\u5b9a\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d\uff1aFujitsu primergy\nIP\u30a2\u30c9\u30ec\u30b9\u306e\u7bc4\u56f2:192.168.1.65-128\n\u30c1\u30a7\u30c3\u30af:Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\n\u30ad\u30fc\uff1aLinux\n\u30c7\u30d0\u30a4\u30b9\u306e\u56fa\u6709\u6027\u3092\u7279\u5b9a\u3059\u308b\u57fa\u6e96\uff1aZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8 \"Linux\"\n\n\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\n\u76e3\u8996\u9805\u76ee\u3054\u3068\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\u76e3\u8996\u9805\u76ee\u306e\u4f8b\uff08\u6b7b\u6d3b\u76e3\u8996\u3001\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\u3001\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996\uff09\n\n\n\u6b7b\u6d3b\u76e3\u8996\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067ICMP\u7528\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u8907\u88fd\u3057\u3066\u4f7f\u7528\u3059\u308b\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u4eca\u5f8c\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u3066\u305d\u306e\u307e\u307e\u6b8b\u3057\u3066\u304a\u304d\u3001\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u8907\u88fd\u3057\u3066\u4f7f\u7528\u3059\u308b\n\u4f5c\u6210\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b0\u30eb\u30fc\u30d7\uff08\u4eca\u56de\u306f sample hosts\uff09\u306b\u7d10\u4ed8\u3051\u308b\u3053\u3068\u3067\u3001\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u3057\u3066\u3044\u308b\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aICMP Ping\uff08Template ICMP Ping\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\uff1asample hosts\n\n\n\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aHTTP Service\uff08Template App HTTP Service\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\uff1asample hosts\n\n\n\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996\nTemplate SNMP Devices\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5143\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\nTemplate SNMP Devices\u306f\u3001Template SNMP Generic\u3068Template SNMP Interfaces\u306b\u7d10\u4ed8\u3044\u3066\u3044\u308b\u305f\u3081\u3001\u540c\u69d8\u306b\u305d\u308c\u305e\u308c\u5143\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u8907\u88fd\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002\n\u4f5c\u6210\u5f8c\u306f\u3001SNMP Devices\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\uff12\u3064\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7d10\u4ed8\u3051\u3059\u308b\u3002\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aSNMP Device\uff08Template SNMP Device\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aSNMP Generic\uff08Template SNMP Generic\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aSNMP Interfaces\uff08Template SNMP Interfaces\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\n\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u540c\u4e00\u540d\u3067\u30e6\u30cb\u30fc\u30af\u306b\u3059\u308b\u3002\nSNMP\u306f\u30dd\u30fc\u30ea\u30f3\u30b0\u3068\u30c8\u30e9\u30c3\u30d7\u306b\u3088\u308b\u76e3\u8996\u304c\u3042\u308b\u305f\u3081\u3001\u30dd\u30fc\u30ea\u30f3\u30b0\u7528\u3092SNMP poling\u3001\n\u30c8\u30e9\u30c3\u30d7\u7528\u3092SNMP trap\u3068\u3059\u308b\u3002\n\u4f8b\uff09\u6b7b\u6d3b\u76e3\u8996\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aICMP Ping\n\n\u4f8b\uff09\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aHTTP Service\n\n\u4f8b\uff09\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996\uff08SNMP polig\uff09\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aSNMP poling\n\n\u4f8b\uff09\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996\uff08SNMP trap\uff09\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aSNMP trap\n\n\n\u30a2\u30a4\u30c6\u30e0\u4f5c\u6210\n\u30a2\u30a4\u30c6\u30e0\u306f\u76e3\u8996\u65b9\u6cd5\u3054\u3068\u306b\u5897\u3084\u3059\n\u4f8b\uff09HTTP Service\n\u540d\u524d\uff1aHTTP service is running\n\u30bf\u30a4\u30d7\uff1a\u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af\n\u30ad\u30fc\uff1anet.tcp.service[,,80]\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aHTTP Service\n\n\n\u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c8\u30ea\u30ac\u30fc\uff09\u4f5c\u6210\n\u30c8\u30ea\u30ac\u30fc\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\u30eb\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u76e3\u8996\u65b9\u6cd5\u3054\u3068\u306b\u4f5c\u6210\u3059\u308b\n\u4f8b\uff09\u6b7b\u6d3b\u76e3\u8996\u901a\u77e5\n\u540d\u524d\uff1a\u6b7b\u6d3b\u76e3\u8996\u901a\u77e5\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u6761\u4ef6\uff1a\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306e\u72b6\u614b \u671f\u9593\u5916 \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 = ICMP Ping\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u5185\u5bb9\uff1a\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7 or \u30e6\u30fc\u30b6 \uff08\u307e\u305f\u306f\u4e21\u65b9\uff09\u306b\u9001\u4fe1\n\n\n\u30b0\u30e9\u30d5\u4f5c\u6210\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5bfe\u3057\u3066\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3059\u308b\n\n\n\u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\uff09\n\u4f8b\uff09BB\u30eb\u30fc\u30bf\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d:Auto discovery.PR-500KI.\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u6761\u4ef6:\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30c1\u30a7\u30c3\u30af = PR-500KI: ICMP ping\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u5185\u5bb9:\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0:sample hosts\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u30ea\u30f3\u30af: ICMP Ping\n\n\u4f8b\uff09\u81ea\u5b85\u30b5\u30fc\u30d0\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d:Auto discovery.FUJITSU PRIMERGY.\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u6761\u4ef6:\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30c1\u30a7\u30c3\u30af = FUJITSU PRIMERGY: Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8 \"Linux\"\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u5185\u5bb9:\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0:sample hosts\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u30ea\u30f3\u30af: ICMP Ping, OS Linux\n\n\n\n\n3-4. Zabbix\u901a\u77e5\u30c6\u30b9\u30c8\n\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u3084\u30d7\u30ed\u30bb\u30b9\u3092\u76f4\u63a5\u843d\u4e0b\u3055\u305b\u3066\u3082\u78ba\u8a8d\u3067\u304d\u308b\u304c\u3001\n\u307e\u305a\u306fZabbix\u30b5\u30fc\u30d0\u4e0a\u3067\u901a\u77e5\u78ba\u8a8d\u3092\u884c\u3046\u3068\u3088\u3044\u3002\n\u6b7b\u6d3b\u76e3\u8996\uff08ICMP Ping\uff09\u3068\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\uff08TCP\u30dd\u30fc\u30c8\uff09\u306f\u3001\nZabbix\u30b5\u30fc\u30d0\u4e0a\u306eiptables\u3067\u30d1\u30b1\u30c3\u30c8\u3092\u843d\u3068\u3059\u3053\u3068\u3067\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3002\n\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u6700\u4f4e\uff12\u3064\u958b\u304d\u3001\uff11\u3064\u306fiptables\u306e\u30d1\u30b1\u30c3\u30c8\u30ab\u30a6\u30f3\u30bf\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u7528\u3001\n\u3082\u3046\uff11\u3064\u306fiptables\u5b9a\u7fa9\u64cd\u4f5c\u7528\u3068\u3057\u3066\u4f5c\u696d\u3092\u884c\u3046\u3002  \n\n\u30d1\u30b1\u30c3\u30c8\u30ab\u30a6\u30f3\u30bf\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\niptables -Z\n\n\n\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306biptables\u306e\u30d1\u30b1\u30c3\u30c8\u30ab\u30a6\u30f3\u30bf\u3092\u78ba\u8a8d\u3059\u308b\nwhile :; do iptables -nvxL --line-numbers; sleep 1; clear; done\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum      pkts      bytes target     prot opt in     out     source               destination\n1         485    64109 ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED \n2           0        0 ACCEPT     icmp --  *      *       0.0.0.0/0            0.0.0.0/0\n3          12      720 ACCEPT     all  --  lo     *       0.0.0.0/0            0.0.0.0/0\n4           0        0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22 \n5          34     2176 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:80 \n6           0        0 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW udp dpt:162 \n7           0        0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:10050 \n8          20     3320 REJECT     all  --  *      *       0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited \n\n\n\u30d1\u30b1\u30c3\u30c8\u30c9\u30ed\u30c3\u30d7\u306e\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\n\n\n\u6b7b\u6d3b\u76e3\u8996\u306e\u5834\u5408\n\u76e3\u8996\u30c6\u30b9\u30c8\u3092\u884c\u3046\u30db\u30b9\u30c8\uff08\u3053\u3053\u3067\u306f 192.168.1.62)\u304b\u3089\u306e icmp ping\u3092\u30c9\u30ed\u30c3\u30d7\u3059\u308b\niptables -I INPUT 1 -p icmp --src 192.168.1.62 -j DROP\n\n\u5148\u307b\u3069\u306e\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u30eb\u30fc\u30eb\u304c\uff11\u884c\u76ee\u306b\u8ffd\u52a0\u3055\u308c\u305f\nwhile :; do iptables -nvxL --line-numbers; sleep 1; clear; done\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum      pkts      bytes target     prot opt in     out     source               destination\n1           0        0 DROP       icmp --  *      *       192.168.1.62         0.0.0.0/0\n\n\u30ab\u30a6\u30f3\u30bf\u304c\u5897\u3048\u3066\u304a\u308a\u3001\u30d1\u30b1\u30c3\u30c8\u304c\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308b\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum      pkts      bytes target     prot opt in     out     source               destination\n1           3      288 DROP       icmp --  *      *       192.168.1.62         0.0.0.0/0\n\n\u76e3\u8996\u30c6\u30b9\u30c8\u5f8c\u306f\u30eb\u30fc\u30eb\u3092\u524a\u9664\u3059\u308b\n\u524a\u9664\u3059\u308b\u884c\u3092\u8aa4\u308b\u3068\u901a\u4fe1\u3067\u304d\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u6ce8\u610f\u3059\u308b\niptables -D INPUT 1\n\n\n\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\u306e\u5834\u5408\n\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\u306e\u5834\u5408\u3082\u5148\u307b\u3069\u306e\u6b7b\u6d3b\u76e3\u8996\u3068\u540c\u69d8\u306e\u624b\u9806\u3067\u884c\u3046\n\u3053\u3053\u3067\u306f\u76e3\u8996\u30c6\u30b9\u30c8\u3092\u884c\u3046\u30db\u30b9\u30c8(\u3053\u3053\u3067\u306f 192.168.1.60)\u306ehttp(80/tcp)\u306b\u5bfe\u3057\u3066\u306e\n\u30d1\u30b1\u30c3\u30c8\u30c9\u30ed\u30c3\u30d7\u306e\u307f\u8aac\u660e\u3059\u308b\niptables -I INPUT 1 -p tcp -m tcp --dst 192.168.1.60 --dport 80 -j DROP\n\n\n\n\n\n\n4.\u904b\u7528\n\n4-1. Web\u30b5\u30fc\u30d0(Apache httpd)\n\n\u969c\u5bb3\u6642\u306b\u4e00\u6589\u306bZabbix\u3067\u30b0\u30e9\u30d5\u3084\u30b9\u30af\u30ea\u30fc\u30f3\u3092\u95b2\u89a7\u3057\u3088\u3046\u3068\u3057\u3066httpd\u304c\u843d\u3061\u305f\n\n\nhttpd\u304c\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3068\u306a\u308b\u5834\u5408\u306f\u3001\u30d5\u30ed\u30f3\u30c8(Web\u30b5\u30fc\u30d0)\u3092\u8907\u6570\u306b\u5206\u3051\u3001\u30d0\u30c3\u30af(DB\u30b5\u30fc\u30d0)\u3092\u5206\u96e2\u3059\u308b\u306a\u3069\u5bfe\u7b56\u3092\u53d6\u308b\uff08httpd\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u524d\u63d0\uff09\n\n\n\n\n4-2. DB\u30b5\u30fc\u30d0(MySQL)\n\n\u6c17\u304c\u3064\u3044\u305f\u3089DB\u304c\u80a5\u5927\u5316\u3057\u3066\u3057\u307e\u3063\u305f\n\n\nDB\u304c\u3042\u308b\u7a0b\u5ea6\u80a5\u5927\u5316\u3057\u305f\u3089\u3001DB\u304b\u3089\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\u3057\u3001DB\u3092\u518d\u69cb\u7bc9\u3059\u308b\n\u203b MySQL\u306e\u30a8\u30f3\u30b8\u30f3\u3092innodb\u3067\u904b\u7528\u3092\u958b\u59cb\u3057\u3001\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2(ibdata1)\u304c\u80a5\u5927\u5316\u3057\u3066\u3057\u307e\u3063\u305f\u7d4c\u9a13\u3042\u308a\u3002\n\u203b bdata1\u304c12GB\u306e\u3068\u304d\u306bmysqldump\u3067\u30c0\u30f3\u30d7\u3092\u53d6\u3063\u305f\u3089\u5b9f\u30c7\u30fc\u30bf\u306f1.5GB\u7a0b\u5ea6\u3060\u3063\u305f\u3002 DB\u306b\u8a73\u3057\u304f\u7b46\u8005\u306fZabbix\u306ehousekeeper\uff08\u53e4\u3044\u30c7\u30fc\u30bf\u3092\u81ea\u52d5\u524a\u9664\u3059\u308b\u6a5f\u80fd)\u3067\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u81ea\u4f53\u304c\u6e1b\u308b\u3068\u601d\u3063\u3066\u3044\u305f\u304c\u3001\u4e00\u5ea6\u80a5\u5927\u5316\u3057\u305fDB\u306fdelete\u6587\u3067\u524a\u9664\u3057\u3066\u3082\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u304c\u6e1b\u3089\u306a\u3044\u3053\u3068\u3092\u77e5\u3063\u305f\u3002\uff08\u5b9f\u969b\u3001housekeeper\u306f\u5185\u90e8\u3067delete\u6587\u3092\u5b9f\u884c\u3057\u3001\u30c7\u30fc\u30bf\u3092\u6d88\u3057\u3066\u3044\u308b\uff09\n\n\n\n\n4-3. APL\u30b5\u30fc\u30d0(Zabbix)\n# Zabbix\u69cb\u7bc9\u30fb\u904b\u7528\u30ac\u30a4\u30c9\n\n## 1.\u6982\u8981\n\n### 1-1. \u8aac\u660e\u3059\u308b\u3053\u3068\n\nZabbix\u306e\u69cb\u7bc9\u30fb\u8a2d\u5b9a\u30fb\u904b\u7528\u306b\u3064\u3044\u3066\u8a18\u8f09\u3059\u308b\u3002\n\n* **\u69cb\u7bc9\u306b\u3064\u3044\u3066**  \n  \u5358\u4e00\u30b5\u30fc\u30d0\u4e0a\u306bWeb\u30b5\u30fc\u30d0(Apache httpd)\u30fbAPL\u30b5\u30fc\u30d0(Zabbix Server)\u30fbDB\u30b5\u30fc\u30d0(MySQL)\u3092\u5168\u4e57\u305b\u3059\u308b\u69cb\u6210\u3067\u69cb\u7bc9\u3059\u308b\u3002  \n* **\u8a2d\u5b9a\u306b\u3064\u3044\u3066**  \n  Zabbix\u306e\u8a2d\u5b9a\u306f\u3001\u8a2d\u5b9a\u7b87\u6240\u3092\u306a\u308b\u3079\u304f\u5c40\u6240\u5316\uff0f\u30eb\u30fc\u30eb\u5316\u3057\u306a\u3044\u3068\u30ab\u30aa\u30b9\u306b\u306a\u308b\u305f\u3081\u3001\u53ef\u80fd\u306a\u9650\u308a\u8a2d\u5b9a\u4f5c\u696d\u3092\u81ea\u52d5\u5316\u3059\u308b\u3088\u3046\u3001Zabbix\u306e\u6a5f\u80fd\u3092\u6d3b\u7528\u3059\u308b\u3002  \n* **\u904b\u7528\u306b\u3064\u3044\u3066**  \n  \u5b9f\u904b\u7528\u3067\u906d\u9047\u3057\u305f\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c8\u3084\u7d4c\u9a13\u8ac7\u3082\u90fd\u5ea6\u8ffd\u8a18\u3057\u3066\u3044\u304f\u3002  \n\n### 1-2. \u4eca\u56de\u306e\u69cb\u7bc9\u74b0\u5883\n\nOS:CentOS 6.8\nVersion:Zabbix 2.4\n\n### 1-2. \u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\n* [CentOS6 zabbix\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb](https://www.server-world.info/query?os=CentOS_6&p=zabbix)\n* [\u65e5\u672c\u8a9e\u30d5\u30a9\u30f3\u30c8\u8a2d\u5b9a\u65b9\u6cd5](http://sechiro.hatenablog.com/entry/2013/08/27/Zabbix_2.0_%E3%81%AE%E3%82%B0%E3%83%A9%E3%83%95%E3%81%AE%E6%96%87%E5%AD%97%E5%8C%96%E3%81%91%E3%82%92%E7%9B%B4%E3%81%99%E3%80%81%E3%80%8Calternatives%E3%80%8D%E3%81%A7%E3%81%AE%E6%97%A5%E6%9C%AC)\n\n## 2. Zabbix\u69cb\u7bc9\n\n### 2-1. Zabbix\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n1. Zabbix\u30ea\u30dd\u30b8\u30c8\u30ea\u767b\u9332  \n<pre>\nyum install http://repo.zabbix.com/zabbix/2.4/rhel/6/x86_64/zabbix-release-2.4-1.el6.noarch.rpm\n</pre>\n2. \u30d1\u30c3\u30b1\u30fc\u30b8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb  \n<pre>\nyum install zabbix-server-mysql zabbix-web-mysql zabbix-agent zabbix_get\nyum install httpd mysql-server\nyum install php-mysql php-gd php-xml php-bcmath \n</pre>\n3. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7  \n<pre>\ncp -pi /etc/my.cnf /etc/my.cnf.org\ncp -pi /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.org\ncp -pi /etc/zabbix/zabbix_server.conf /etc/zabbix/zabbix_server.conf.org\n</pre>\n4. MySQL\u8a2d\u5b9a  \n  1. my.cnf  \n<pre>\nvi /etc/my.cnf\nutf\u3092\u6709\u52b9\u306b\u3059\u308b\ncharacter-set-server=utf8\u3000\u3092\u8ffd\u52a0\n</pre>\n  2. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5  \n<pre>\nservice mysqld start\n</pre>\n  3. chkconfig\u8a2d\u5b9a  \n<pre>\nchkconfig mysqld on\n</pre>\n  4. mysql_secure_install\u8a2d\u5b9a  \n<pre>\nmysql_secure_installation\n</pre>\n  5. DB\u4f5c\u6210  \n<pre>\nmysql -u root -p\nmysql> create database zabbix; \n</pre>\n  6. \u6a29\u9650\u4ed8\u4e0e/\u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a  \n  \u3053\u3053\u3067\u306f\u4f8b\u3068\u3057\u3066\u30d1\u30b9\u30ef\u30fc\u30c9\u3092'password'\u3068\u3057\u305f\u3002\n<pre>\nmysql> grant all privileges on zabbix.* to zabbix@'localhost' identified by 'password'; \nmysql> grant all privileges on zabbix.* to zabbix@'%' identified by 'password'; \nmysql> flush privileges; \nmysql> \\q\n</pre>\n5. httpd\u8a2d\u5b9a  \n  1. php.ini\u8a2d\u5b9a  \n<pre>  \nvi /etc/php.ini\ntimezone\u3092\"Asia/Tokyo\"\u306b\u3059\u308b\nvi zabbix_server.conf\n</pre>\n  2. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5  \n<pre>\nservice httpd start\n</pre>\n  3. chkconfig\u8a2d\u5b9a  \n<pre>\nchkconfig httpd on\n</pre>\n6. Zabbix\u30b5\u30fc\u30d0\u8a2d\u5b9a  \n  1. \u521d\u671f\u8a2d\u5b9a\u3092\u3059\u308b  \n  DB\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u5148\u307b\u3069\u8a2d\u5b9a\u3057\u305f\u3082\u306e\u3068\u5408\u308f\u305b\u308b\u3002\n<pre>\nvi /etc/zabbix/zabbix_server.conf\nDBHost=localhost\nDBPassword=password\n</pre>\n  2. \u30c7\u30fc\u30bf\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b  \n<pre>\ncd /usr/share/doc/zabbix-server-mysql-2.4.8/create/\nmysql -u root -p zabbix < schema.sql \nmysql -u root -p zabbix < images.sql \nmysql -u root -p zabbix < data.sql \n</pre>\n  3. Zabbix\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3059\u308b  \n<pre>\nservice zabbix-server start\n</pre>\n  4. iptables\u306e\u8a31\u53ef\u8a2d\u5b9a  \n\u30b3\u30de\u30f3\u30c9\u306f\u74b0\u5883\u306b\u3042\u308f\u305b\u3066\u5909\u66f4\u3059\u308b\u3002\u76f4\u63a5 /etc/sysconfig/iptables \u3092\u4fee\u6b63\u3057\u3066\u3082\u3088\u3044\u3002\n\u4eca\u56de\u306fiptables\u306e\uff15\u884c\u76ee\u306b\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\u3002\n<pre>\niptables -I INPUT 5 -p tcp -m state --state NEW -m tcp --dport 80 -j ACCEPT\nservice iptables save\n</pre> \n7. Web\u30d6\u30e9\u30a6\u30b6\u304b\u3089Zabbix\u30b5\u30fc\u30d0\u306b\u30a2\u30af\u30bb\u30b9  \n<pre>\nhttp://IP\u30a2\u30c9\u30ec\u30b9/zabbix\n\u521d\u671fID: Admin\n\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9: zabbix\n</pre>\n\n### 2-2. \u4efb\u610f\u306e\u5c0e\u5165  \n1. \u30d5\u30a9\u30f3\u30c8\u8a2d\u5b9a\uff08\u30b0\u30e9\u30d5\u63cf\u753b\u3067\u65e5\u672c\u8a9e\u304c\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\uff09  \n  1. IPA\u30b4\u30b7\u30c3\u30af\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb  \n<pre>\nyum install ipa-pgothic-fonts\n</pre>\n  2. IPA\u30b4\u30b7\u30c3\u30af\u306e\u30d5\u30a9\u30f3\u30c8\u306e\u512a\u5148\u5ea6\u3092\u9ad8\u304f\u3059\u308b  \n<pre>\nalternatives --install /usr/share/zabbix/fonts/graphfont.ttf zabbix-web-font /usr/share/fonts/ipa-pgothic/ipagp.ttf 1000\n</pre>\n  3. \u8a2d\u5b9a\u53cd\u6620  \n<pre>\nalternatives --display zabbix-web-font\n</pre>\n2. \u30e1\u30fc\u30eb\u306e\u5916\u90e8\u914d\u9001\u8a2d\u5b9a\uff08\u901a\u77e5\u30e1\u30fc\u30eb\u3092\u5916\u90e8\u914d\u9001\u3059\u308b\u5834\u5408\uff09\n  1. \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb  \n<pre>\nyum install postfix cyrus-sasl-plain mailx\n</pre>\n  2. main.cf\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0  \n<pre>\nvi /etc/postfix/main.cf\nrelayhost = [smtp.nifty.com]:587\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_mechanism_filter = plain\nsmtp_sasl_password_maps = hash:/etc/postfix/nifty_passwd\nsmtp_sasl_security_options = noanonymous\nsmtp_sasl_tls_security_options = noanonymous\nsmtp_use_tls = yes\n</pre>\n  3. \u30d1\u30b9\u30ef\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210  \n<pre>\ntouch /etc/postfix/nifty_passwd\n</pre>\n  4. \u30d1\u30b9\u30ef\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u306b\u5404\u7a2e\u60c5\u5831\u3092\u8a18\u8f09  \n<pre>\nvi /etc/postfix/nifty_passwd\n[smtp.nifty.com]:587 xxxxx@nifty.com:\u30d1\u30b9\u30ef\u30fc\u30c9\n</pre>\n  5. \u30d1\u30b9\u30ef\u30fc\u30c9\u30d5\u30a1\u30a4\u30eb\u3092 Berkeley DB\u5f62\u5f0f\u306b\u5909\u63db  \n<pre>\npostmap /etc/postfix/nifty_passwd\n</pre>\n  6. \u8fd4\u9084\u5f8c\u306e\u30d5\u30a1\u30a4\u30eb\u5f62\u5f0f\u3092\u78ba\u8a8d  \n<pre>\nfile /etc/postfix/nifty_passwd.db \nnifty_passwd.db: Berkeley DB (Hash, version 9, native byte-order)\n</pre>\n  7. \u30d5\u30a1\u30a4\u30eb\u306e\u4e2d\u8eab\u3092\u78ba\u8a8d  \n<pre>\ndb_dump -p /etc/postfix/nifty_passwd.db \nVERSION=3\nformat=print\ntype=hash\nh_nelem=4097\ndb_pagesize=4096\nHEADER=END\n\\[smtp.nifty.com]:587\\00\nxxxxx@nifty.com:\u30d1\u30b9\u30ef\u30fc\u30c9\\00\nDATA=END\n</pre>\n  8. postfix\u3092\u518d\u8d77\u52d5  \n<pre>\nservice postfix restart\n</pre>\n  9. \u30c6\u30b9\u30c8\u30e1\u30fc\u30eb\u3092\u9001\u4fe1  \n<pre>\necho \"This mail is test\" | mail -s \"test mail\" -r \u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u540d@nifty.com \u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u540d@nifty.com\n</pre>\n2. SNMP\u30c8\u30e9\u30c3\u30d7\u53d7\u4fe1\u8a2d\u5b9a\uff08SNTP\u306e\u30c8\u30e9\u30c3\u30d7\u76e3\u8996\u3092\u7528\u3044\u308b\u5834\u5408\uff09  \n  1. \u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b  \n<pre>\nyum install net-snmp net-snmp-perl net-snmp-utils snmptt\n</pre>\n  2. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b  \n<pre>\ncp -pi /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.org\ncp -pi /etc/snmp/snmptrapd.conf /etc/snmp/snmptrapd.conf.org\ncp -pi /etc/snmp/snmptt.ini /etc/snmp/snmptt.ini.org\n</pre>\n  3. snmptrapd.conf\u306e\u8a2d\u5b9a  \n  \u3053\u3053\u3067\u306f\u4f8b\u3068\u3057\u3066\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u540d\u306f'public'\u3068\u3057\u305f\u3002\n<pre>\nvi /etc/snmp/snmptrapd.conf\nauthCommunity   log,execute,net public\ntraphandle default /usr/sbin/snmptthandler\n</pre>\n  4. snmptrapd\u306e\u8a2d\u5b9a\n<pre>\nvi /etc/sysconfig/snmptrapd\nOPTIONS=\"-On -Lsd -p /var/run/snmptrapd.pid\"\n</pre>\n<pre>\nvi /etc/init.d/snmptrapd\nOPTIONS=\"-On -Lsd -p /var/run/snmptrapd.pid\"\n</pre>\n  5. snmptt.ini\u306e\u8a2d\u5b9a\n<pre>\nvi /etc/snmp/snmptt.ini\ndate_time_format = %Y/%m%d %H:%M:%S\n</pre>\n  6. snmptt.conf\u306e\u8a2d\u5b9a\n<pre>\nvi /etc/snmp/snmptt.conf\nEVENT general .* \"General event\" Normal\nFORMAT ZBXTRAP $aA $*\n</pre>\n  7. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5  \n<pre>\nservice snmptt start\nservice snmptrapd start\n</pre>\n  8. chkconfig\u8a2d\u5b9a  \n<pre>\nchkconfig snmptt on\nchkconfig snmptrapd on\n</pre>\n  9. Zabbix\u30b5\u30fc\u30d0\u518d\u8d77\u52d5  \n<pre>\nservice zabbix-server restart\n</pre>\n  10. iptables\u306e\u8a31\u53ef\u8a2d\u5b9a\n<pre>\niptables -I INPUT 5 -p udp -m state --state NEW -m udp --dport 162 -j ACCEPT \nservice iptables save\n</pre>\n  11. \u81ea\u30db\u30b9\u30c8\u3078snmptrap\u3092\u9001\u4fe1\n<pre>\nsnmptrap -v 2c -c public localhost '' .1.3.6.1.4.1.8072.9999 .1.3.6.1.4.1.8072.9999 s 'TEST'\n</pre>\n  12. snmptt.log\u306b\u30c8\u30e9\u30c3\u30d7\u30ed\u30b0\u306e\u51fa\u529b\u78ba\u8a8d\n<pre>\ncat /var/log/snmptt/snmptt.log\n2016/08/25 23:05:35 .1.3.6.1.4.1.8072.9999 Normal \"General event\" localhost - ZBXTRAP 127.0.0.1 TEST\n</pre>\n\n## 3.Zabbix\u8a2d\u5b9a\n\n### 3-1. \u8a2d\u5b9a\u3059\u308b\u9806\u756a\n\n\u4ee5\u4e0b\u306e\u9806\u3067\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u304f\n1. \u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u4f5c\u6210\n2. \u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210\n3. \u30e6\u30fc\u30b6\u4f5c\u6210\n4. \u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210\n5. \u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30eb\u30fc\u30eb\u4f5c\u6210\n6. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210\n7. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210\n8. \u30a2\u30a4\u30c6\u30e0\u4f5c\u6210\n9. \u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c8\u30ea\u30ac\u30fc\uff09\u4f5c\u6210\n10. \u30b0\u30e9\u30d5\u4f5c\u6210\n11. \u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\uff09\u4f5c\u6210\n\n\n### 3-2. \u8a2d\u5b9a\u306e\u6d41\u308c\u306b\u3064\u3044\u3066\n\n\u307e\u305a\u3001\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u30fb\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u30fb\u30e6\u30fc\u30b6\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n\u3053\u308c\u3089\u306e\u60c5\u5831\u306f\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u60c5\u5831\u3068\u5207\u308a\u96e2\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u5909\u66f4\u3057\u3084\u3059\u3044\u3002\n\n\u6b21\u306b\u3001\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u30fb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u306e\u767b\u9332\u8a2d\u5b9a\u304b\u3089\u3001\u76e3\u8996\u5185\u5bb9\u3001\u901a\u77e5\u6761\u4ef6\u3001\u30b0\u30e9\u30d5\u306e\u4f5c\u6210\u3092\u884c\u3046\u3002\n\u524d\u8ff0\u3057\u305f\u304c\u3001\u3053\u308c\u3089\u306f\u53ef\u80fd\u306a\u9650\u308a\u81ea\u52d5\u767b\u9332\u3001\u5909\u66f4\u7b87\u6240\u3092\u5c40\u6240\u5316\u3057\u306a\u3044\u3068\u904b\u7528\u3057\u3066\u304b\u3089\u6ce3\u304f\u3053\u3068\u306b\u306a\u308b\u3002\n\n\u6d41\u308c\u3068\u3057\u3066\u306f\u3001IP\u30a2\u30c9\u30ec\u30b9\u30d9\u30fc\u30b9\u306b\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30eb\u30fc\u30eb\u3092\u4f5c\u6210\u3001ICMP Ping\u3067\u767a\u898b\u5f8c\u3001\u3042\u3089\u304b\u3058\u3081\u4f5c\u6210\u3057\u305f\u5b9a\u7fa9\u3092\u3082\u3068\u306b\u76e3\u8996\u5bfe\u8c61\uff08\u7269\u7406\u30b5\u30fc\u30d0\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3001VM\u306a\u3069\uff09\u306e\u81ea\u52d5\u767b\u9332\u3001\u76e3\u8996\u9805\u76ee\uff08\u30a2\u30a4\u30c6\u30e0\uff09\u306e\u8a2d\u5b9a\u3001\u969c\u5bb3\u6642\u306e\u901a\u77e5\u8a2d\u5b9a\u3001\u30b0\u30e9\u30d5\u306e\u4f5c\u6210\u307e\u3067\u81ea\u52d5\u3067\u884c\u3046\u3088\u3046\u306b\u3059\u308b\u3053\u3068\u3067\u3001\u3042\u3068\u304b\u3089\u76e3\u8996\u5bfe\u8c61\u304c\u8ffd\u52a0\u306b\u306a\u3063\u305f\u3068\u304d\u3082IP\u30a2\u30c9\u30ec\u30b9\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u3067\u81ea\u52d5\u8a2d\u5b9a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u4e00\u65b9\u3001Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30ec\u30b9\u3067\u306e\u76e3\u8996\u306e\u5834\u5408\u3001\u3069\u3046\u3057\u3066\u3082\u624b\u52d5\u3067\u8a2d\u5b9a\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u7b87\u6240\u304c\u3042\u308b\u305f\u3081\u3001\u305d\u3053\u306f\u8ae6\u3081\u3066\u624b\u52d5\u3067\u30dd\u30c1\u30dd\u30c1\u3059\u308b\u3002\n\n### 3-3. Zabbix\u8a2d\u5b9a\u624b\u9806\n\n1. \u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u4f5c\u6210  \nZabbix\u30b5\u30fc\u30d0\u304b\u3089\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3059\u308b\u305f\u3081\u3001SMTP\u30b5\u30fc\u30d0\u3068SMTP helo\u3092localhost.localdomain\u3068\u3059\u308b\u3002  \n\u4eca\u56de\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u306e\u540d\u524d\u306f Email \u3068\u3057\u3066\u3044\u308b\u304c\u3001\u5b9b\u5148\u304c\u8907\u6570\u306b\u306a\u308b\u5834\u5408\u306f\u3001\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u540d\u524d\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u304c\u671b\u307e\u3057\u3044\u3002\n<pre>\n[\u7ba1\u7406]->[\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7]->[\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u306e\u4f5c\u6210]\u304b\u3089\u30e1\u30c7\u30a3\u30a2\u30bf\u30a4\u30d7\u3092\u4f5c\u6210\u3059\u308b\n</pre>\n\u4f8b\uff09\u5916\u90e8\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u4e2d\u7d99\u3057\u306a\u3044\u5834\u5408(Zabbix\u30b5\u30fc\u30d0\u304b\u3089\u76f4\u63a5\u9001\u4fe1\u3059\u308b\u5834\u5408)  \n<pre>\n\u540d\u524d\uff1aEmail\n\u30bf\u30a4\u30d7\uff1a\u30e1\u30fc\u30eb\nSMTP\u30b5\u30fc\u30d0\uff1alocalhost.localdomain\nSMTP helo\uff1alocalhost.localdomain\n\u9001\u4fe1\u5143\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff1azabbix@example.com\n</pre>\n\u4f8b\uff09\u5916\u90e8\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u4e2d\u7d99\u3059\u308b\u5834\u5408  \n\uff20nifty\u306e\u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u7528\u3044\u3066\u3001\uff20nifty\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3078\u9001\u4fe1\u3059\u308b\u3002\n\u5916\u90e8\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u4e2d\u7d99\u3059\u308b\u5834\u5408\u3001Zabbix\u30b5\u30fc\u30d0\u4e0a\u306e\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\uff08\u5f8c\u8ff0\uff09\u3002  \n<pre>\n\u540d\u524d\uff1aEmail\n\u30bf\u30a4\u30d7\uff1a\u30e1\u30fc\u30eb\nSMTP\u30b5\u30fc\u30d0\uff1alocalhost.localdomain\nSMTP helo\uff1alocalhost.localdomain\n\u9001\u4fe1\u5143\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff1axxxxx@nifty.com\n</pre>\n2. \u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210  \n<pre>\n[\u7ba1\u7406\uff3d->[\u30e6\u30fc\u30b6]->[\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7]\u304b\u3089\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7\u3092\u4f5c\u6210\u3059\u308b\n</pre>\n\u4f8b\uff09\u7ba1\u7406\u8005\u6a29\u9650\n<pre>\n\u30b0\u30eb\u30fc\u30d7\u540d\uff1aAdministrator\nWeb\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\uff1a\u30b7\u30b9\u30c6\u30e0\u30c7\u30d5\u30a9\u30eb\u30c8\n\u6709\u52b9\uff1a\u30c1\u30a7\u30c3\u30af\n</pre>\n\u4f8b\uff09\u30e6\u30fc\u30b6\u6a29\u9650\n<pre>\n\u30b0\u30eb\u30fc\u30d7\u540d\uff1aUsers\nWeb\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3078\u306e\u30a2\u30af\u30bb\u30b9\uff1a\u30b7\u30b9\u30c6\u30e0\u30c7\u30d5\u30a9\u30eb\u30c8\n\u6709\u52b9\uff1a\u30c1\u30a7\u30c3\u30af\n</pre>\n3. \u30e6\u30fc\u30b6\u4f5c\u6210  \n  1. \u30e6\u30fc\u30b6\u30bf\u30d6  \n<pre>\n[\u7ba1\u7406]->[\u30e6\u30fc\u30b6]->[\u30e6\u30fc\u30b6]\u304b\u3089\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\n</pre>\n\u4f8b\uff09\u9234\u6728\u4e00\u90ce  \n\u4eca\u56de\u306f\u4ee5\u4e0b\u306e\u30e6\u30fc\u30b6\u306e\u8ffd\u52a0\u3092\u4f8b\u3068\u3059\u308b\n<pre>\n\u540d\u524d\uff1aIchiro\n\u540d\u5b57\uff1aSuzuki\n\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff1aichiro-suzuki@example.com\n\u6a29\u9650\uff1a\u7ba1\u7406\u8005\n</pre>\n\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u30e1\u30fc\u30eb\u306e\u30a2\u30c9\u30ec\u30b9\u90e8\u5206(\u3053\u3053\u3067\u306fichiro-suzuki)\u3068\u3057\u3066\u304a\u304d\u3001\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u540c\u4e00\u3068\u3057\u3066\u304a\u304f\u3068\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u306b\u60a9\u307e\u306a\u304f\u3066\u6e08\u3080\u3002\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u901f\u3084\u304b\u306b\u5909\u66f4\u3057\u3066\u3082\u3089\u3046\u3002\n<pre>\n\u30a8\u30a4\u30ea\u30a2\u30b9\uff1aichiro-suzuki\n\u540d\u524d\uff1aIchiro\n\u540d\u5b57\uff1aSuzuki\n\u30b0\u30eb\u30fc\u30d7\uff1aAdministrator\n\u30d1\u30b9\u30ef\u30fc\u30c9\uff1aichiro-suzuki\n\u8a00\u8a9e\uff1a\u65e5\u672c\u8a9e(ja_JP)\n</pre>\n  2. \u30e1\u30c7\u30a3\u30a2\u30bf\u30d6  \n<pre>\n[\u8ffd\u52a0]\u304b\u3089\u65b0\u898f\u30e1\u30c7\u30a3\u30a2\u3092\u8ffd\u52a0\u3059\u308b\n</pre>\n\u4f8b\uff09\u65b0\u898f\u30e1\u30c7\u30a3\u30a2\u306e\u8ffd\u52a0\n<pre>\n\u30bf\u30a4\u30d7\uff1aEmail\n\u9001\u4fe1\u5148\uff1aichiro-suzuki@example.com\n\u30b9\u30c6\u30fc\u30bf\u30b9\uff1a\u6709\u52b9\n</pre>\n  3. \u6a29\u9650\u30bf\u30d6\n<pre>\n\u30e6\u30fc\u30b6\u306e\u7a2e\u985e\uff1aZabbix\u7279\u6a29\u7ba1\u7406\u8005\n</pre>\n4. \u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u4f5c\u6210  \n\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\n<pre>\n\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\uff1asample hosts\n</pre>\n5. \u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30eb\u30fc\u30eb\u4f5c\u6210  \n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3084\u7a3c\u50cd\u4e2d\u306e\u30b5\u30fc\u30d0\u306a\u3069\u3001Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u76e3\u8996\u5bfe\u8c61\u306b\u5bfe\u3057\u3066\u306f\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3067 \u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af\uff08ICMP Ping\u30fb\u30dd\u30fc\u30c8\u30c1\u30a7\u30c3\u30af\u30fbSNMP\u30dd\u30fc\u30ea\u30f3\u30b0\u306a\u3069\uff09\u3067\u76e3\u8996\u5bfe\u8c61\u3092\u767a\u898b\u3057\u3001\u76e3\u8996\u5bfe\u8c61\u306b\u7d44\u307f\u8fbc\u3080\u3002  \nZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u76e3\u8996\u5bfe\u8c61\u306b\u5bfe\u3057\u3066\u306f\u3001Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u9078\u629e\u3059\u308b\u3002\n\u4f5c\u6210\u3059\u308b\u30eb\u30fc\u30eb\u306f\u3001\u4ee5\u4e0b\u306e\u30eb\u30fc\u30eb\u3054\u3068\u306b\u4f5c\u6210\u3059\u308b\u3068\u3088\u3044\u3002\n  * \u30c1\u30a7\u30c3\u30af\u65b9\u6cd5\u3054\u3068\uff08\u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af or Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u30c1\u30a7\u30c3\u30af\uff09  \n  * \u30b5\u30fc\u30d0\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u6a5f\u5668\u3054\u3068\uff08Cisco Router, Cisco Catalyst, Fujitsu primergy)  \n  * OS\u3054\u3068\uff08Linux, Windows)  \n\u4f8b\uff09\u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af\u3067\u306e\u30eb\u30fc\u30eb\u8a2d\u5b9a\n<pre>\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d\uff1aHome network appliance\nIP\u30a2\u30c9\u30ec\u30b9\u306e\u7bc4\u56f2:192.168.1.1,192.168.1.24-64\n\u30c1\u30a7\u30c3\u30af:ICMP ping\n</pre>\n\u4f8b\uff09Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3067\u306e\u30eb\u30fc\u30eb\u8a2d\u5b9a\n<pre>\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d\uff1aFujitsu primergy\nIP\u30a2\u30c9\u30ec\u30b9\u306e\u7bc4\u56f2:192.168.1.65-128\n\u30c1\u30a7\u30c3\u30af:Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\n\u30ad\u30fc\uff1aLinux\n\u30c7\u30d0\u30a4\u30b9\u306e\u56fa\u6709\u6027\u3092\u7279\u5b9a\u3059\u308b\u57fa\u6e96\uff1aZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8 \"Linux\"\n</pre>\n6. \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u4f5c\u6210  \n\u76e3\u8996\u9805\u76ee\u3054\u3068\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b  \n\u76e3\u8996\u9805\u76ee\u306e\u4f8b\uff08\u6b7b\u6d3b\u76e3\u8996\u3001\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\u3001\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996\uff09\n  1. \u6b7b\u6d3b\u76e3\u8996  \n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067ICMP\u7528\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u8907\u88fd\u3057\u3066\u4f7f\u7528\u3059\u308b\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306f\u4eca\u5f8c\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u3066\u305d\u306e\u307e\u307e\u6b8b\u3057\u3066\u304a\u304d\u3001\u4f7f\u7528\u3059\u308b\u5834\u5408\u306f\u8907\u88fd\u3057\u3066\u4f7f\u7528\u3059\u308b\n\u4f5c\u6210\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b0\u30eb\u30fc\u30d7\uff08\u4eca\u56de\u306f sample hosts\uff09\u306b\u7d10\u4ed8\u3051\u308b\u3053\u3068\u3067\u3001\u4f7f\u7528\u3059\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u3057\u3066\u3044\u308b\n<pre>\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aICMP Ping\uff08Template ICMP Ping\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\uff1asample hosts\n</pre>\n  2. \u30b5\u30fc\u30d3\u30b9\u76e3\u8996  \n<pre>\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aHTTP Service\uff08Template App HTTP Service\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u6240\u5c5e\u30b0\u30eb\u30fc\u30d7\uff1asample hosts\n</pre>\n  3. \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996  \nTemplate SNMP Devices\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5143\u306b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\nTemplate SNMP Devices\u306f\u3001Template SNMP Generic\u3068Template SNMP Interfaces\u306b\u7d10\u4ed8\u3044\u3066\u3044\u308b\u305f\u3081\u3001\u540c\u69d8\u306b\u305d\u308c\u305e\u308c\u5143\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u8907\u88fd\u3057\u3066\u4f5c\u6210\u3059\u308b\u3002\n\u4f5c\u6210\u5f8c\u306f\u3001SNMP Devices\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\uff12\u3064\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7d10\u4ed8\u3051\u3059\u308b\u3002\n<pre>\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aSNMP Device\uff08Template SNMP Device\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aSNMP Generic\uff08Template SNMP Generic\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u540d\uff1aSNMP Interfaces\uff08Template SNMP Interfaces\u3092\u8907\u88fd\u3057\u3066\u4f5c\u6210\uff09\n</pre>\n7. \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4f5c\u6210  \n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u540c\u4e00\u540d\u3067\u30e6\u30cb\u30fc\u30af\u306b\u3059\u308b\u3002\nSNMP\u306f\u30dd\u30fc\u30ea\u30f3\u30b0\u3068\u30c8\u30e9\u30c3\u30d7\u306b\u3088\u308b\u76e3\u8996\u304c\u3042\u308b\u305f\u3081\u3001\u30dd\u30fc\u30ea\u30f3\u30b0\u7528\u3092SNMP poling\u3001\n\u30c8\u30e9\u30c3\u30d7\u7528\u3092SNMP trap\u3068\u3059\u308b\u3002\n\u4f8b\uff09\u6b7b\u6d3b\u76e3\u8996\n<pre>\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aICMP Ping\n</pre>\n\u4f8b\uff09\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\n<pre>\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aHTTP Service\n</pre>\n\u4f8b\uff09\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996\uff08SNMP polig\uff09\n<pre>\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aSNMP poling\n</pre>\n\u4f8b\uff09\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u76e3\u8996\uff08SNMP trap\uff09\n<pre>\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aSNMP trap\n</pre>\n8. \u30a2\u30a4\u30c6\u30e0\u4f5c\u6210  \n\u30a2\u30a4\u30c6\u30e0\u306f\u76e3\u8996\u65b9\u6cd5\u3054\u3068\u306b\u5897\u3084\u3059\n\u4f8b\uff09HTTP Service\n<pre>\n\u540d\u524d\uff1aHTTP service is running\n\u30bf\u30a4\u30d7\uff1a\u30b7\u30f3\u30d7\u30eb\u30c1\u30a7\u30c3\u30af\n\u30ad\u30fc\uff1anet.tcp.service[,,80]\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\uff1aHTTP Service\n</pre>\n9. \u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c8\u30ea\u30ac\u30fc\uff09\u4f5c\u6210  \n\u30c8\u30ea\u30ac\u30fc\u306f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u4f5c\u6210\u30eb\u30fc\u30eb\u3068\u540c\u69d8\u306b\u3001\u76e3\u8996\u65b9\u6cd5\u3054\u3068\u306b\u4f5c\u6210\u3059\u308b\n\u4f8b\uff09\u6b7b\u6d3b\u76e3\u8996\u901a\u77e5\n<pre>\n\u540d\u524d\uff1a\u6b7b\u6d3b\u76e3\u8996\u901a\u77e5\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u6761\u4ef6\uff1a\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u306e\u72b6\u614b \u671f\u9593\u5916 \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8 = ICMP Ping\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u5185\u5bb9\uff1a\u30e6\u30fc\u30b6\u30b0\u30eb\u30fc\u30d7 or \u30e6\u30fc\u30b6 \uff08\u307e\u305f\u306f\u4e21\u65b9\uff09\u306b\u9001\u4fe1\n</pre>\n10. \u30b0\u30e9\u30d5\u4f5c\u6210  \n<pre>\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u5bfe\u3057\u3066\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\u3059\u308b\n</pre>\n11. \u30a2\u30af\u30b7\u30e7\u30f3\uff08\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\uff09  \n\u4f8b\uff09BB\u30eb\u30fc\u30bf\n<pre>\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d:Auto discovery.PR-500KI.\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u6761\u4ef6:\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30c1\u30a7\u30c3\u30af = PR-500KI: ICMP ping\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u5185\u5bb9:\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0:sample hosts\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u30ea\u30f3\u30af: ICMP Ping\n</pre>\n\u4f8b\uff09\u81ea\u5b85\u30b5\u30fc\u30d0\n<pre>\n\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u540d:Auto discovery.FUJITSU PRIMERGY.\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u6761\u4ef6:\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u30c1\u30a7\u30c3\u30af = FUJITSU PRIMERGY: Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8 \"Linux\"\n\u30a2\u30af\u30b7\u30e7\u30f3\u306e\u5b9f\u884c\u5185\u5bb9:\u30db\u30b9\u30c8\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0:sample hosts\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3068\u30ea\u30f3\u30af: ICMP Ping, OS Linux\n</pre>\n\n### 3-4. Zabbix\u901a\u77e5\u30c6\u30b9\u30c8\n\n\u76e3\u8996\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u3084\u30d7\u30ed\u30bb\u30b9\u3092\u76f4\u63a5\u843d\u4e0b\u3055\u305b\u3066\u3082\u78ba\u8a8d\u3067\u304d\u308b\u304c\u3001\n\u307e\u305a\u306fZabbix\u30b5\u30fc\u30d0\u4e0a\u3067\u901a\u77e5\u78ba\u8a8d\u3092\u884c\u3046\u3068\u3088\u3044\u3002  \n\u6b7b\u6d3b\u76e3\u8996\uff08ICMP Ping\uff09\u3068\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\uff08TCP\u30dd\u30fc\u30c8\uff09\u306f\u3001\nZabbix\u30b5\u30fc\u30d0\u4e0a\u306eiptables\u3067\u30d1\u30b1\u30c3\u30c8\u3092\u843d\u3068\u3059\u3053\u3068\u3067\u30c6\u30b9\u30c8\u3067\u304d\u308b\u3002  \n\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u6700\u4f4e\uff12\u3064\u958b\u304d\u3001\uff11\u3064\u306fiptables\u306e\u30d1\u30b1\u30c3\u30c8\u30ab\u30a6\u30f3\u30bf\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u7528\u3001\n\u3082\u3046\uff11\u3064\u306fiptables\u5b9a\u7fa9\u64cd\u4f5c\u7528\u3068\u3057\u3066\u4f5c\u696d\u3092\u884c\u3046\u3002  \n\n1. \u30d1\u30b1\u30c3\u30c8\u30ab\u30a6\u30f3\u30bf\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\n<pre>\niptables -Z\n</pre>\n2. \u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306biptables\u306e\u30d1\u30b1\u30c3\u30c8\u30ab\u30a6\u30f3\u30bf\u3092\u78ba\u8a8d\u3059\u308b\n<pre>\nwhile :; do iptables -nvxL --line-numbers; sleep 1; clear; done\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum      pkts      bytes target     prot opt in     out     source               destination         \n1         485    64109 ACCEPT     all  --  *      *       0.0.0.0/0            0.0.0.0/0           state RELATED,ESTABLISHED \n2           0        0 ACCEPT     icmp --  *      *       0.0.0.0/0            0.0.0.0/0           \n3          12      720 ACCEPT     all  --  lo     *       0.0.0.0/0            0.0.0.0/0           \n4           0        0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:22 \n5          34     2176 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:80 \n6           0        0 ACCEPT     udp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW udp dpt:162 \n7           0        0 ACCEPT     tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           state NEW tcp dpt:10050 \n8          20     3320 REJECT     all  --  *      *       0.0.0.0/0            0.0.0.0/0           reject-with icmp-host-prohibited \n</pre>\n3. \u30d1\u30b1\u30c3\u30c8\u30c9\u30ed\u30c3\u30d7\u306e\u30eb\u30fc\u30eb\u3092\u8ffd\u52a0\u3059\u308b\n  1. \u6b7b\u6d3b\u76e3\u8996\u306e\u5834\u5408  \n\u76e3\u8996\u30c6\u30b9\u30c8\u3092\u884c\u3046\u30db\u30b9\u30c8\uff08\u3053\u3053\u3067\u306f 192.168.1.62)\u304b\u3089\u306e icmp ping\u3092\u30c9\u30ed\u30c3\u30d7\u3059\u308b\n<pre>\niptables -I INPUT 1 -p icmp --src 192.168.1.62 -j DROP\n</pre>\n\u5148\u307b\u3069\u306e\u30c9\u30ed\u30c3\u30d7\u3059\u308b\u30eb\u30fc\u30eb\u304c\uff11\u884c\u76ee\u306b\u8ffd\u52a0\u3055\u308c\u305f\n<pre>\nwhile :; do iptables -nvxL --line-numbers; sleep 1; clear; done\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum      pkts      bytes target     prot opt in     out     source               destination         \n1           0        0 DROP       icmp --  *      *       192.168.1.62         0.0.0.0/0           \n</pre>\n\u30ab\u30a6\u30f3\u30bf\u304c\u5897\u3048\u3066\u304a\u308a\u3001\u30d1\u30b1\u30c3\u30c8\u304c\u30c9\u30ed\u30c3\u30d7\u3055\u308c\u305f\u3053\u3068\u304c\u308f\u304b\u308b\n<pre>\nChain INPUT (policy ACCEPT 0 packets, 0 bytes)\nnum      pkts      bytes target     prot opt in     out     source               destination         \n1           3      288 DROP       icmp --  *      *       192.168.1.62         0.0.0.0/0           \n</pre>\n\u76e3\u8996\u30c6\u30b9\u30c8\u5f8c\u306f\u30eb\u30fc\u30eb\u3092\u524a\u9664\u3059\u308b  \n\u524a\u9664\u3059\u308b\u884c\u3092\u8aa4\u308b\u3068\u901a\u4fe1\u3067\u304d\u306a\u304f\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u305f\u3081\u6ce8\u610f\u3059\u308b  \n<pre>\niptables -D INPUT 1\n</pre>\n  2. \u30b5\u30fc\u30d3\u30b9\u76e3\u8996\u306e\u5834\u5408  \n\u30b5\u30fc\u30d3\u30b9\u76e3\u8996\u306e\u5834\u5408\u3082\u5148\u307b\u3069\u306e\u6b7b\u6d3b\u76e3\u8996\u3068\u540c\u69d8\u306e\u624b\u9806\u3067\u884c\u3046    \n\u3053\u3053\u3067\u306f\u76e3\u8996\u30c6\u30b9\u30c8\u3092\u884c\u3046\u30db\u30b9\u30c8(\u3053\u3053\u3067\u306f 192.168.1.60)\u306ehttp(80/tcp)\u306b\u5bfe\u3057\u3066\u306e\n\u30d1\u30b1\u30c3\u30c8\u30c9\u30ed\u30c3\u30d7\u306e\u307f\u8aac\u660e\u3059\u308b\n<pre>\niptables -I INPUT 1 -p tcp -m tcp --dst 192.168.1.60 --dport 80 -j DROP\n</pre>\n\n## 4.\u904b\u7528\n\n### 4-1. Web\u30b5\u30fc\u30d0(Apache httpd)\n* \u969c\u5bb3\u6642\u306b\u4e00\u6589\u306bZabbix\u3067\u30b0\u30e9\u30d5\u3084\u30b9\u30af\u30ea\u30fc\u30f3\u3092\u95b2\u89a7\u3057\u3088\u3046\u3068\u3057\u3066httpd\u304c\u843d\u3061\u305f\n - httpd\u304c\u30dc\u30c8\u30eb\u30cd\u30c3\u30af\u3068\u306a\u308b\u5834\u5408\u306f\u3001\u30d5\u30ed\u30f3\u30c8(Web\u30b5\u30fc\u30d0)\u3092\u8907\u6570\u306b\u5206\u3051\u3001\u30d0\u30c3\u30af(DB\u30b5\u30fc\u30d0)\u3092\u5206\u96e2\u3059\u308b\u306a\u3069\u5bfe\u7b56\u3092\u53d6\u308b\uff08httpd\u306e\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u524d\u63d0\uff09\n\n### 4-2. DB\u30b5\u30fc\u30d0(MySQL)\n* \u6c17\u304c\u3064\u3044\u305f\u3089DB\u304c\u80a5\u5927\u5316\u3057\u3066\u3057\u307e\u3063\u305f\n - DB\u304c\u3042\u308b\u7a0b\u5ea6\u80a5\u5927\u5316\u3057\u305f\u3089\u3001DB\u304b\u3089\u30c7\u30fc\u30bf\u3092\u30c0\u30f3\u30d7\u3057\u3001DB\u3092\u518d\u69cb\u7bc9\u3059\u308b  \n  \u203b MySQL\u306e\u30a8\u30f3\u30b8\u30f3\u3092innodb\u3067\u904b\u7528\u3092\u958b\u59cb\u3057\u3001\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2(ibdata1)\u304c\u80a5\u5927\u5316\u3057\u3066\u3057\u307e\u3063\u305f\u7d4c\u9a13\u3042\u308a\u3002  \n  \u203b bdata1\u304c12GB\u306e\u3068\u304d\u306bmysqldump\u3067\u30c0\u30f3\u30d7\u3092\u53d6\u3063\u305f\u3089\u5b9f\u30c7\u30fc\u30bf\u306f1.5GB\u7a0b\u5ea6\u3060\u3063\u305f\u3002 DB\u306b\u8a73\u3057\u304f\u7b46\u8005\u306fZabbix\u306ehousekeeper\uff08\u53e4\u3044\u30c7\u30fc\u30bf\u3092\u81ea\u52d5\u524a\u9664\u3059\u308b\u6a5f\u80fd)\u3067\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u81ea\u4f53\u304c\u6e1b\u308b\u3068\u601d\u3063\u3066\u3044\u305f\u304c\u3001\u4e00\u5ea6\u80a5\u5927\u5316\u3057\u305fDB\u306fdelete\u6587\u3067\u524a\u9664\u3057\u3066\u3082\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u304c\u6e1b\u3089\u306a\u3044\u3053\u3068\u3092\u77e5\u3063\u305f\u3002\uff08\u5b9f\u969b\u3001housekeeper\u306f\u5185\u90e8\u3067delete\u6587\u3092\u5b9f\u884c\u3057\u3001\u30c7\u30fc\u30bf\u3092\u6d88\u3057\u3066\u3044\u308b\uff09\n\n### 4-3. APL\u30b5\u30fc\u30d0(Zabbix)\n"}