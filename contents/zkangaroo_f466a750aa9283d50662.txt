{"tags": ["Redmine", "gitolite", "centos7"], "context": "\n\n\u74b0\u5883\n\nCentOS7\nApache/2.4.6\nRuby 2.0.0\nRedmine 3.2.0\nGit 1.8.3.1\n\ngitolite\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30e6\u30fc\u30b6 \u300cgit\u300d\ngitolite\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \u300c/home/git\u300d\n\u9023\u643a\u3059\u308b\u30ea\u30dd\u30b8\u30c8\u30ea \u300choge\u300d\nApache\u306e\u5b9f\u884c\u30e6\u30fc\u30b6 \u300capache\u300d\n\n\u65b9\u91dd\nRedmine\u304b\u3089\u306fapache\u30e6\u30fc\u30b6\u3067Git\u3092\u53c2\u7167\u3059\u308b\u306e\u3067\u3001git\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30df\u30e9\u30fc\u3092\u4f5c\u3063\u3066\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8abf\u6574\u3092\u3057\u307e\u3059\u3002\npush\u304c\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u30d5\u30c3\u30af\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u624b\u9806\n\napache\u3092git\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\nsudo usermod -G git apache\n\n\ngitolite\u306eumask\u8abf\u6574\n\n.gitolite.rc\n21c21\n<     UMASK                           =>  0077,\n---\n>     UMASK                           =>  0027,\n\n\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30df\u30e9\u30fc\nsudo -u git mkdir -p /var/lib/redmine/repositories\nsudo chown git:git /var/lib/redmine/repositories\n\ncd /var/lib/redmine/repositories/\nsudo -u git git clone --mirror /home/git/repositories/hoge.git\n\n\npush\u3092\u30df\u30e9\u30fc\u306b\u53cd\u6620\u3059\u308b\u3088\u3046\u306b\u30d5\u30c3\u30af\u3092\u4f5c\u6210\n\n/home/git/repositories/hoge.git/hooks/post-receive\n#!/bin/sh\n/usr/bin/git push --mirror /var/lib/redmine/repositories/hoge.git\n\n\nchmod 700 /home/git/repositories/hoge.git/hooks/post-receive\n\n\nRedmine\u306e\u30c7\u30d0\u30c3\u30af\u30ed\u30b0\u51fa\u529b\n\u4e0a\u624b\u304f\u884c\u304b\u306a\u3044\u6642\u306f\u3001Redmine\u306e\u30c7\u30d0\u30c3\u30af\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u3068\u624b\u52a9\u3051\u306b\u306a\u308a\u307e\u3059\u3002\n\n/<redmine_dirname>/config/additional_environment.rb\nconfig.log_level = :debug\n\n\n\u7de8\u96c6\u3057\u3066\u3001Apache\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u30ed\u30b0\u306f\u3001 /<redmine_dirname>/log/production.log \u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n# \u74b0\u5883\n\n* CentOS7\n* Apache/2.4.6\n* Ruby 2.0.0\n* Redmine 3.2.0\n* Git 1.8.3.1\n\ngitolite\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30e6\u30fc\u30b6 \u300cgit\u300d\ngitolite\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea \u300c/home/git\u300d\n\u9023\u643a\u3059\u308b\u30ea\u30dd\u30b8\u30c8\u30ea \u300choge\u300d\nApache\u306e\u5b9f\u884c\u30e6\u30fc\u30b6 \u300capache\u300d\n\n# \u65b9\u91dd\nRedmine\u304b\u3089\u306fapache\u30e6\u30fc\u30b6\u3067Git\u3092\u53c2\u7167\u3059\u308b\u306e\u3067\u3001git\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30df\u30e9\u30fc\u3092\u4f5c\u3063\u3066\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u3092\u8abf\u6574\u3092\u3057\u307e\u3059\u3002\npush\u304c\u53cd\u6620\u3055\u308c\u308b\u3088\u3046\u306b\u30d5\u30c3\u30af\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n# \u624b\u9806\n\n## apache\u3092git\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\n```sh:\nsudo usermod -G git apache\n```\n\n## gitolite\u306eumask\u8abf\u6574\n```diff:.gitolite.rc\n21c21\n<     UMASK                           =>  0077,\n---\n>     UMASK                           =>  0027,\n```\n\n## \u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30df\u30e9\u30fc\n```\nsudo -u git mkdir -p /var/lib/redmine/repositories\nsudo chown git:git /var/lib/redmine/repositories\n\ncd /var/lib/redmine/repositories/\nsudo -u git git clone --mirror /home/git/repositories/hoge.git\n```\n\n## push\u3092\u30df\u30e9\u30fc\u306b\u53cd\u6620\u3059\u308b\u3088\u3046\u306b\u30d5\u30c3\u30af\u3092\u4f5c\u6210\n```vim:/home/git/repositories/hoge.git/hooks/post-receive\n#!/bin/sh\n/usr/bin/git push --mirror /var/lib/redmine/repositories/hoge.git\n```\n```sh:\nchmod 700 /home/git/repositories/hoge.git/hooks/post-receive\n```\n\n### Redmine\u306e\u30c7\u30d0\u30c3\u30af\u30ed\u30b0\u51fa\u529b\n\u4e0a\u624b\u304f\u884c\u304b\u306a\u3044\u6642\u306f\u3001Redmine\u306e\u30c7\u30d0\u30c3\u30af\u30ed\u30b0\u3092\u51fa\u529b\u3059\u308b\u3068\u624b\u52a9\u3051\u306b\u306a\u308a\u307e\u3059\u3002\n\n```rb:/&lt;redmine_dirname&gt;/config/additional_environment.rb\nconfig.log_level = :debug\n```\n\n\u7de8\u96c6\u3057\u3066\u3001Apache\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u30ed\u30b0\u306f\u3001 /&lt;redmine_dirname&gt;/log/production.log \u306b\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n"}