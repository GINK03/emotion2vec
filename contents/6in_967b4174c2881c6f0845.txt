{"context": "\n\n\u6982\u8981\nnim\u306e\u30d7\u30ed\u30bb\u30b9\u5b9f\u884c\u64cd\u4f5c\u3092\u30b3\u30c4\u30b3\u30c4\u3068\u3002\n\n\u4ee5\u4e0b\u30e1\u30e2\n\n\u30d7\u30ed\u30bb\u30b9\u5b9f\u884c\nimport osproc,streams,times\nproc `$`(t:TimeInfo) : string = format(t, \"yyyy/MM/dd HH:mm:ss \")\nblock:\n  var p: Process\n  defer:\n    p.close\n  # \u30d7\u30ed\u30bb\u30b9\u5b9f\u884c\n  p = startProcess(\"/usr/bin/ping\",\"\",@[\"-c\",\"5\",\"127.0.0.1\"])\n  echo p.processID\n  # \u6a19\u6e96\u51fa\u529b\u3092\u53d6\u5f97\u3057\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\n  let outstr = p.outputStream\n  var line:string = \"\"\n  # \u30b9\u30c8\u30ea\u30fc\u30e0\u304b\u3089\uff11\u884c\u305a\u3064\u30d5\u30a7\u30c3\u30c1\n  while outstr.readLine(line):\n    # \u73fe\u5728\u6642\u523b\u3092\u53d6\u5f97\n    let now: TimeInfo = getLocalTime(getTime())\n    echo now,line\n  # \u7d42\u4e86\u5f85\u6a5f\n  echo p.waitForExit()\n\n(stdout)\n10256\n2016/06/23 00:24:59 PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n2016/06/23 00:24:59 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.050 ms\n2016/06/23 00:25:00 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.043 ms\n2016/06/23 00:25:01 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.044 ms\n2016/06/23 00:25:02 64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.051 ms\n2016/06/23 00:25:03 64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.047 ms\n2016/06/23 00:25:03\n2016/06/23 00:25:03 --- 127.0.0.1 ping statistics ---\n2016/06/23 00:25:03 5 packets transmitted, 5 received, 0% packet loss, time 3999ms\n2016/06/23 00:25:03 rtt min/avg/max/mdev = 0.043/0.047/0.051/0.003 ms\n0\n\n# \u6982\u8981\nnim\u306e\u30d7\u30ed\u30bb\u30b9\u5b9f\u884c\u64cd\u4f5c\u3092\u30b3\u30c4\u30b3\u30c4\u3068\u3002\n## \u4ee5\u4e0b\u30e1\u30e2\n### \u30d7\u30ed\u30bb\u30b9\u5b9f\u884c\n```nim\nimport osproc,streams,times\nproc `$`(t:TimeInfo) : string = format(t, \"yyyy/MM/dd HH:mm:ss \")\nblock:\n  var p: Process\n  defer:\n    p.close\n  # \u30d7\u30ed\u30bb\u30b9\u5b9f\u884c\n  p = startProcess(\"/usr/bin/ping\",\"\",@[\"-c\",\"5\",\"127.0.0.1\"])\n  echo p.processID\n  # \u6a19\u6e96\u51fa\u529b\u3092\u53d6\u5f97\u3057\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8868\u793a\n  let outstr = p.outputStream\n  var line:string = \"\"\n  # \u30b9\u30c8\u30ea\u30fc\u30e0\u304b\u3089\uff11\u884c\u305a\u3064\u30d5\u30a7\u30c3\u30c1\n  while outstr.readLine(line):\n    # \u73fe\u5728\u6642\u523b\u3092\u53d6\u5f97\n    let now: TimeInfo = getLocalTime(getTime())\n    echo now,line\n  # \u7d42\u4e86\u5f85\u6a5f\n  echo p.waitForExit()\n```\n```\n(stdout)\n10256\n2016/06/23 00:24:59 PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.\n2016/06/23 00:24:59 64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.050 ms\n2016/06/23 00:25:00 64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.043 ms\n2016/06/23 00:25:01 64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.044 ms\n2016/06/23 00:25:02 64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.051 ms\n2016/06/23 00:25:03 64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.047 ms\n2016/06/23 00:25:03\n2016/06/23 00:25:03 --- 127.0.0.1 ping statistics ---\n2016/06/23 00:25:03 5 packets transmitted, 5 received, 0% packet loss, time 3999ms\n2016/06/23 00:25:03 rtt min/avg/max/mdev = 0.043/0.047/0.051/0.003 ms\n0\n```\n", "tags": ["Nim"]}