{"context": "\n\n\u6982\u8981\n\u30a2\u30ab\u30a6\u30f3\u30c8\u79fb\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u3001S3\u306e\u30c7\u30fc\u30bf\u306e\u79fb\u884c\u624b\u9806\u306e\u307e\u3068\u3081\n\n\u6a29\u9650\u8a2d\u5b9a\n\u65e7\u30a2\u30ab\u30a6\u30f3\u30c8\u306eS3\u306ebucket\u306b\u5bfe\u3057\u3066policy\u3092\u8a2d\u5b9a\u3059\u308b\n{\n    \"Version\": \"2012-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"GetObject\",\n            \"Action\": [\n                \"s3:GetObject\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"arn:aws:s3:::${OLD_BUCKET_NAME}/*\",\n            \"Principal\": {\n                \"AWS\": [\n                    \"#{NEW_AWS_ACCOUNT_NUMBER}\"\n                ]\n            }\n        },\n        {\n            \"Sid\": \"ListBucket\",\n            \"Action\": [\n                \"s3:ListBucket\"\n            ],\n            \"Effect\": \"Allow\",\n            \"Resource\": \"arn:aws:s3:::${OLD_BUCKET_NAME}\",\n            \"Principal\": {\n                \"AWS\": [\n                    \"#{NWE_AWS_ACCOUNT_NUMBER}\"\n                ]\n            }\n        }\n    ]\n}\n\n\nCLI\u3067sync\u3059\u308b\nGUI\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u306f\u4f5c\u696d\u3067\u304d\u306a\u3044\u306e\u3067\u3001CLI\u3092\u4f7f\u3063\u3066sync\u3059\u308b\n$ aws s3 sync s3://${OLD_BUCKET_NAME} s3://${NEW_BUCKET_NAME}\n\n# \u6982\u8981\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u79fb\u884c\u3059\u308b\u5fc5\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u3001S3\u306e\u30c7\u30fc\u30bf\u306e\u79fb\u884c\u624b\u9806\u306e\u307e\u3068\u3081\n\n# \u6a29\u9650\u8a2d\u5b9a\n\n\u65e7\u30a2\u30ab\u30a6\u30f3\u30c8\u306eS3\u306ebucket\u306b\u5bfe\u3057\u3066policy\u3092\u8a2d\u5b9a\u3059\u308b\n\n```\n{\n\t\"Version\": \"2012-10-17\",\n\t\"Statement\": [\n\t\t{\n\t\t\t\"Sid\": \"GetObject\",\n\t\t\t\"Action\": [\n\t\t\t\t\"s3:GetObject\"\n\t\t\t],\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Resource\": \"arn:aws:s3:::${OLD_BUCKET_NAME}/*\",\n\t\t\t\"Principal\": {\n\t\t\t\t\"AWS\": [\n\t\t\t\t\t\"#{NEW_AWS_ACCOUNT_NUMBER}\"\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\t\"Sid\": \"ListBucket\",\n\t\t\t\"Action\": [\n\t\t\t\t\"s3:ListBucket\"\n\t\t\t],\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Resource\": \"arn:aws:s3:::${OLD_BUCKET_NAME}\",\n\t\t\t\"Principal\": {\n\t\t\t\t\"AWS\": [\n\t\t\t\t\t\"#{NWE_AWS_ACCOUNT_NUMBER}\"\n\t\t\t\t]\n\t\t\t}\n\t\t}\n\t]\n}\n```\n\n# CLI\u3067sync\u3059\u308b\n\nGUI\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u306f\u4f5c\u696d\u3067\u304d\u306a\u3044\u306e\u3067\u3001CLI\u3092\u4f7f\u3063\u3066sync\u3059\u308b\n\n```\n$ aws s3 sync s3://${OLD_BUCKET_NAME} s3://${NEW_BUCKET_NAME}\n```\n", "tags": ["AWS", "S3"]}