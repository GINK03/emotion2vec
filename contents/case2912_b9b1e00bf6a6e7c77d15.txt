{"context": "\u4eca\u56de\u306fWeb Audio API\u3068Grimoire.js\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u904a\u3093\u3067\u307f\u307e\u3057\u305f\u3002\u6700\u8fd1\u306fGrimoire.js\u3068\u4ed6\u306eWeb\u306e\u6280\u8853\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u9762\u767d\u3044\u8868\u73fe\u304c\u3067\u304d\u306a\u3044\u304b\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\nWebAudioAPI\u3067mp3\u97f3\u6e90\u306e\u6ce2\u5f62\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u305f\u3002gif\u3060\u3068\u3001\u97f3\u304c\u306a\u3044\u306e\u3067\u3044\u3055\u3055\u304b\u5730\u5473\u3067\u3059\u304c\u3001\u3053\u306e\u3088\u3046\u306a\u8868\u73fe\u3082Grimoire.js\u306a\u3089\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\n\u4ee5\u4e0b\u306f\u307b\u3068\u3093\u3069WebAudioAPI\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3067\u3059\u304c\u3001\u4e0b\u90e8\u306bGrimoire.js\u306eAPI\u306b\u53d6\u5f97\u3057\u305f\u97f3\u6e90\u306e\u6ce2\u5f62\u306e\u5024\u3092\u5165\u308c\u3066\u3044\u307e\u3059\u3002\nWebAudioAPI\u306b\u95a2\u3059\u308b\u57fa\u672c\u7684\u306a\u3053\u3068\u306f\u4e0b\u8a18\u306e\u8a18\u4e8b\u7b49\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\nhttp://qiita.com/soarflat/items/b60649195c16c7a43868\ngr(function() {\n    var d = new Date();\n    var source, animationId;\n    var audioContext = new AudioContext;\n    var fileReader = new FileReader;\n    var analyser = audioContext.createAnalyser();\n    analyser.fftSize = 128;\n    analyser.connect(audioContext.destination);\n    fileReader.onload = function() {\n        audioContext.decodeAudioData(fileReader.result, function(buffer) {\n            if (source) {\n                source.stop();\n                cancelAnimationFrame(animationId);\n            }\n            source = audioContext.createBufferSource();\n            source.buffer = buffer;\n            source.connect(analyser);\n            source.start(0);\n            animationId = requestAnimationFrame(render);\n        });\n    };\n    document.getElementById('file').addEventListener('change', function(e) {\n        fileReader.readAsArrayBuffer(e.target.files[0]);\n    });\n    const $$ = gr(\"#main\");\n    render = function() {\n        var spectrums = new Uint8Array(analyser.frequencyBinCount);\n        analyser.getByteFrequencyData(spectrums);\n        for (var i = 1; i <= spectrums.length; i++) {\n            $$(\"#mesh-\" + i}).setAttribute(\"position\", `${i/5},${spectrums[i-1]/100},0`);\n        }\n        animationId = requestAnimationFrame(render);\n    };\n});\n\nWebGL\u306e\u8868\u73fe\u3068\u4ed6\u306e\u6280\u8853\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u308b\u3068\u3001\u8868\u73fe\u306e\u5e45\u304c\u5e83\u304c\u308b\u3053\u3068\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u4ed6\u306b\u3082\u9762\u767d\u3044\u8868\u73fe\u3092\u63a2\u3057\u3066\u5171\u6709\u3067\u304d\u308c\u3070\u3044\u3044\u3067\u3059\u306d\u3002\n\u4eca\u56de\u306f**Web Audio API**\u3068Grimoire.js\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u904a\u3093\u3067\u307f\u307e\u3057\u305f\u3002\u6700\u8fd1\u306fGrimoire.js\u3068\u4ed6\u306eWeb\u306e\u6280\u8853\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u9762\u767d\u3044\u8868\u73fe\u304c\u3067\u304d\u306a\u3044\u304b\u8003\u3048\u3066\u3044\u307e\u3059\u3002\n\n![](https://gyazo.com/de98314792bc78cea00b7c267fd608b1.gif)\n\nWebAudioAPI\u3067mp3\u97f3\u6e90\u306e\u6ce2\u5f62\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3057\u305f\u3002gif\u3060\u3068\u3001\u97f3\u304c\u306a\u3044\u306e\u3067\u3044\u3055\u3055\u304b\u5730\u5473\u3067\u3059\u304c\u3001\u3053\u306e\u3088\u3046\u306a\u8868\u73fe\u3082Grimoire.js\u306a\u3089\u7c21\u5358\u306b\u4f5c\u6210\u3067\u304d\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306f\u307b\u3068\u3093\u3069WebAudioAPI\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u30b3\u30fc\u30c9\u3067\u3059\u304c\u3001\u4e0b\u90e8\u306bGrimoire.js\u306eAPI\u306b\u53d6\u5f97\u3057\u305f\u97f3\u6e90\u306e\u6ce2\u5f62\u306e\u5024\u3092\u5165\u308c\u3066\u3044\u307e\u3059\u3002\n\nWebAudioAPI\u306b\u95a2\u3059\u308b\u57fa\u672c\u7684\u306a\u3053\u3068\u306f\u4e0b\u8a18\u306e\u8a18\u4e8b\u7b49\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\nhttp://qiita.com/soarflat/items/b60649195c16c7a43868\n\n```js\ngr(function() {\n    var d = new Date();\n    var source, animationId;\n    var audioContext = new AudioContext;\n    var fileReader = new FileReader;\n    var analyser = audioContext.createAnalyser();\n    analyser.fftSize = 128;\n    analyser.connect(audioContext.destination);\n    fileReader.onload = function() {\n        audioContext.decodeAudioData(fileReader.result, function(buffer) {\n            if (source) {\n                source.stop();\n                cancelAnimationFrame(animationId);\n            }\n            source = audioContext.createBufferSource();\n            source.buffer = buffer;\n            source.connect(analyser);\n            source.start(0);\n            animationId = requestAnimationFrame(render);\n        });\n    };\n    document.getElementById('file').addEventListener('change', function(e) {\n        fileReader.readAsArrayBuffer(e.target.files[0]);\n    });\n    const $$ = gr(\"#main\");\n    render = function() {\n        var spectrums = new Uint8Array(analyser.frequencyBinCount);\n        analyser.getByteFrequencyData(spectrums);\n        for (var i = 1; i <= spectrums.length; i++) {\n            $$(\"#mesh-\" + i}).setAttribute(\"position\", `${i/5},${spectrums[i-1]/100},0`);\n        }\n        animationId = requestAnimationFrame(render);\n    };\n});\n```\n\nWebGL\u306e\u8868\u73fe\u3068\u4ed6\u306e\u6280\u8853\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u308b\u3068\u3001\u8868\u73fe\u306e\u5e45\u304c\u5e83\u304c\u308b\u3053\u3068\u3060\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u306e\u4ed6\u306b\u3082\u9762\u767d\u3044\u8868\u73fe\u3092\u63a2\u3057\u3066\u5171\u6709\u3067\u304d\u308c\u3070\u3044\u3044\u3067\u3059\u306d\u3002\n", "tags": ["Grimoire.js", "WebAudioAPI"]}