{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nfacebook\u3067\u6295\u7a3f\u3059\u308b\u3068\u304d\u306burl\u3092\u8cbc\u308a\u4ed8\u3051\u308b\u3068\u3001\u81ea\u52d5\u7684\u306b\u5199\u771f\u3084\u8a18\u4e8b\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u30ab\u30fc\u30c9\u306b\u306a\u3063\u3066\u8868\u793a\u3055\u308c\u308b\u306e\u304c\u7d20\u6575\u3067\u3001\u3069\u3046\u3084\u3063\u3066\u3044\u308b\u306e\u304b\u6c17\u306b\u306a\u3063\u3066\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\u5fd8\u308c\u305d\u3046\u306a\u306e\u3067\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u74b0\u5883\nrails 4.2.4\nruby 2.0.0\n\nOGP\uff08Open Graph Protocol\uff09\n\u30b5\u30a4\u30c8\u306e\u7d39\u4ecb\u306b\u4f7f\u7528\u3059\u308b\u7c21\u5358\u306a\u8aac\u660e\u3084\u753b\u50cf\u3092html\u306b\u8a18\u3059\u305f\u3081\u306e\u30eb\u30fc\u30eb\u3002\nhtml\u306emeta\u30bf\u30b0\u306b\u66f8\u304b\u308c\u305f\u60c5\u5831\u3092\u5143\u306b\u3001\u5199\u771f\u3084\u8a18\u4e8b\u30bf\u30a4\u30c8\u30eb\u3092\u53d6\u5f97\u3057\u3066\u30ab\u30fc\u30c9\u3067\u8868\u793a\u3057\u3066\u3044\u308b\u305d\u3046\u3067\u3059\u3002\nThe Open Graph protocol\u3084facebook for developers\u304c\u8a73\u3057\u3044\u3067\u3059\u3002\n\u305f\u3060\u3001\u5168\u3066\u306e\u30b5\u30a4\u30c8\u304cOGP\u3067\u66f8\u304b\u308c\u305f\u60c5\u5831\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u4f8b\u3048\u3070\u30b5\u30a4\u30c8\u306e\u30bf\u30a4\u30c8\u30eb\u3067\u3042\u308c\u3070\u3001title\u30bf\u30b0\u3067\u53d6\u5f97\u3059\u308b\u306a\u3069\u3057\u305f\u307b\u3046\u304c\u3088\u3055\u305d\u3046\u3002\n\nNokogiri\nRails\u3067\u3001\u30ea\u30f3\u30af\u5148\u306eHTML\u89e3\u6790\u306a\u3069\u3092\u3084\u308b\u306b\u306f\u3053\u308c\u304c\u3044\u3044\u3089\u3057\u3044\u3002\n\nNokogiri\u3068open-uri\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ngemfile\ngem 'nokogiri'\ngem 'open-uri'\n\n\n$ bundle install\n\nNokogiri\u3067HTML\u3092\u8aad\u307f\u8fbc\u3080\n\n\nrequire 'nokogiri'\nrequire 'open-uri'\n\nurl = 'http://www.perfume-web.jp'\n\ncharset = nil\nhtml = open(url) do |f|\n  charset = f.charset # \u6587\u5b57\u7a2e\u5225\u3092\u53d6\u5f97\n  f.read # html\u3092\u8aad\u307f\u8fbc\u3093\u3067\u5909\u6570html\u306b\u6e21\u3059\nend\n\n# \u30ce\u30b3\u30ae\u30ea\u3092\u4f7f\u3063\u3066html\u3092\u89e3\u6790\ndoc = Nokogiri::HTML.parse(html, charset)\n\n\n\n\u89e3\u6790\u3057\u305f\u4e2d\u304b\u3089\u6b32\u3057\u3044\u60c5\u5831\u3092\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\ndoc.css(@@@)\u3067\u3001@@@\u306fCSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u6307\u5b9a\u3057\u3066\u308c\u3070\u3088\u3044\u307f\u305f\u3044\u3002\n\u4eca\u56de\u306e\u3088\u3046\u306bcontent\u5c5e\u6027\u3092\u53d6\u308a\u305f\u3044\u5834\u5408\u306f/@content\u3092\u30bb\u30ec\u30af\u30bf\u306e\u5f8c\u308d\u306b\u3057\u3066\u3044\u3059\u308c\u3070\u3088\u3044\u3088\u3046\u3067\u3059\u3002\n\n\u30b5\u30a4\u30c8\u306e\u30bf\u30a4\u30c8\u30eb\n\n# site title\nif doc.css('//meta[property=\"og:site_name\"]/@content').empty?\n  p doc.title.to_s\nelse\n  p doc.css('//meta[property=\"og:site_name\"]/@content').to_s\nend\n\n\n\u30b5\u30a4\u30c8\u306edescription\n\n# description\nif doc.css('//meta[property=\"og:description\"]/@content').empty?\n  p doc.css('//meta[name$=\"escription\"]/@content').to_s\nelse\n  p doc.css('//meta[property=\"og:description\"]/@content').to_s\nend\n\n\n\u30b5\u30a4\u30c8\u306e\u30a4\u30e1\u30fc\u30b8\n\n# image\np doc.css('//meta[property=\"og:image\"]/@content').to_s\n\n\n\u7d50\u679c\n\"Perfume Official Site\"\n\"\u6240\u5c5e\u4e8b\u52d9\u6240\u30a2\u30df\u30e5\u30fc\u30ba\u306b\u3088\u308bPerfume\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30b5\u30a4\u30c8\"\n\"http://www.perfume-web.jp/img/og.png\"\n\n\n\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\nNokogiri\u306e\u3053\u3068\nhttp://morizyun.github.io/blog/ruby-nokogiri-scraping-tutorial/\nmeta\u8981\u7d20\u306e\u3053\u3068\nhttps://reference.hyper-text.org/html5/element/meta/\nCSS\u30bb\u30ec\u30af\u30bf\nhttp://zero.css-happylife.com/selectors/\n# \u306f\u3058\u3081\u306b\nfacebook\u3067\u6295\u7a3f\u3059\u308b\u3068\u304d\u306burl\u3092\u8cbc\u308a\u4ed8\u3051\u308b\u3068\u3001\u81ea\u52d5\u7684\u306b\u5199\u771f\u3084\u8a18\u4e8b\u306e\u30bf\u30a4\u30c8\u30eb\u304c\u30ab\u30fc\u30c9\u306b\u306a\u3063\u3066\u8868\u793a\u3055\u308c\u308b\u306e\u304c\u7d20\u6575\u3067\u3001\u3069\u3046\u3084\u3063\u3066\u3044\u308b\u306e\u304b\u6c17\u306b\u306a\u3063\u3066\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\u5fd8\u308c\u305d\u3046\u306a\u306e\u3067\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n##\u74b0\u5883\n`rails 4.2.4`\n`ruby 2.0.0`\n\n##OGP\uff08Open Graph Protocol\uff09\n\u30b5\u30a4\u30c8\u306e\u7d39\u4ecb\u306b\u4f7f\u7528\u3059\u308b\u7c21\u5358\u306a\u8aac\u660e\u3084\u753b\u50cf\u3092html\u306b\u8a18\u3059\u305f\u3081\u306e\u30eb\u30fc\u30eb\u3002\nhtml\u306emeta\u30bf\u30b0\u306b\u66f8\u304b\u308c\u305f\u60c5\u5831\u3092\u5143\u306b\u3001\u5199\u771f\u3084\u8a18\u4e8b\u30bf\u30a4\u30c8\u30eb\u3092\u53d6\u5f97\u3057\u3066\u30ab\u30fc\u30c9\u3067\u8868\u793a\u3057\u3066\u3044\u308b\u305d\u3046\u3067\u3059\u3002\n[The Open Graph protocol](http://ogp.me/)\u3084[facebook for developers](https://developers.facebook.com/docs/sharing/opengraph)\u304c\u8a73\u3057\u3044\u3067\u3059\u3002\n\n\u305f\u3060\u3001\u5168\u3066\u306e\u30b5\u30a4\u30c8\u304cOGP\u3067\u66f8\u304b\u308c\u305f\u60c5\u5831\u304c\u3042\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3001\u4f8b\u3048\u3070\u30b5\u30a4\u30c8\u306e\u30bf\u30a4\u30c8\u30eb\u3067\u3042\u308c\u3070\u3001title\u30bf\u30b0\u3067\u53d6\u5f97\u3059\u308b\u306a\u3069\u3057\u305f\u307b\u3046\u304c\u3088\u3055\u305d\u3046\u3002\n\n##Nokogiri\nRails\u3067\u3001\u30ea\u30f3\u30af\u5148\u306eHTML\u89e3\u6790\u306a\u3069\u3092\u3084\u308b\u306b\u306f\u3053\u308c\u304c\u3044\u3044\u3089\u3057\u3044\u3002\n\n## Nokogiri\u3068open-uri\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```lang:gemfile\ngem 'nokogiri'\ngem 'open-uri'\n```\n\n`$ bundle install`\n\n##Nokogiri\u3067HTML\u3092\u8aad\u307f\u8fbc\u3080\n\n```rb\n\n\nrequire 'nokogiri'\nrequire 'open-uri'\n\nurl = 'http://www.perfume-web.jp'\n\ncharset = nil\nhtml = open(url) do |f|\n  charset = f.charset # \u6587\u5b57\u7a2e\u5225\u3092\u53d6\u5f97\n  f.read # html\u3092\u8aad\u307f\u8fbc\u3093\u3067\u5909\u6570html\u306b\u6e21\u3059\nend\n\n# \u30ce\u30b3\u30ae\u30ea\u3092\u4f7f\u3063\u3066html\u3092\u89e3\u6790\ndoc = Nokogiri::HTML.parse(html, charset)\n \n```\n\n##\u89e3\u6790\u3057\u305f\u4e2d\u304b\u3089\u6b32\u3057\u3044\u60c5\u5831\u3092\u30d4\u30c3\u30af\u30a2\u30c3\u30d7\u3059\u308b\n`doc.css(@@@)`\u3067\u3001@@@\u306fCSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u6307\u5b9a\u3057\u3066\u308c\u3070\u3088\u3044\u307f\u305f\u3044\u3002\n\u4eca\u56de\u306e\u3088\u3046\u306b`content`\u5c5e\u6027\u3092\u53d6\u308a\u305f\u3044\u5834\u5408\u306f`/@content`\u3092\u30bb\u30ec\u30af\u30bf\u306e\u5f8c\u308d\u306b\u3057\u3066\u3044\u3059\u308c\u3070\u3088\u3044\u3088\u3046\u3067\u3059\u3002\n\n##\u30b5\u30a4\u30c8\u306e\u30bf\u30a4\u30c8\u30eb\n```rb\n\n# site title\nif doc.css('//meta[property=\"og:site_name\"]/@content').empty?\n  p doc.title.to_s\nelse\n  p doc.css('//meta[property=\"og:site_name\"]/@content').to_s\nend\n```\n\n##\u30b5\u30a4\u30c8\u306edescription\n```rb\n\n# description\nif doc.css('//meta[property=\"og:description\"]/@content').empty?\n  p doc.css('//meta[name$=\"escription\"]/@content').to_s\nelse\n  p doc.css('//meta[property=\"og:description\"]/@content').to_s\nend\n```\n\n##\u30b5\u30a4\u30c8\u306e\u30a4\u30e1\u30fc\u30b8\n```rb\n\n# image\np doc.css('//meta[property=\"og:image\"]/@content').to_s\n```\n\n##\u7d50\u679c\n```\n\"Perfume Official Site\"\n\"\u6240\u5c5e\u4e8b\u52d9\u6240\u30a2\u30df\u30e5\u30fc\u30ba\u306b\u3088\u308bPerfume\u30aa\u30d5\u30a3\u30b7\u30e3\u30eb\u30b5\u30a4\u30c8\"\n\"http://www.perfume-web.jp/img/og.png\"\n```\n\n##\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\nNokogiri\u306e\u3053\u3068\nhttp://morizyun.github.io/blog/ruby-nokogiri-scraping-tutorial/\n\nmeta\u8981\u7d20\u306e\u3053\u3068\nhttps://reference.hyper-text.org/html5/element/meta/\n\nCSS\u30bb\u30ec\u30af\u30bf\nhttp://zero.css-happylife.com/selectors/\n", "tags": ["Rails4", "Nokogiri", "OGP"]}