{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nproxy \u306b\u56f2\u307e\u308c\u305f Windows7 \u304b\u3089 CentOS \u306b Chef \u3067 Redmine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u3088\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u53f3\u5f80\u5de6\u5f80\u3057\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u3069\u306a\u305f\u304b\u306e\u5f79\u306b\u7acb\u3066\u3070\u3068\u601d\u3044\u624b\u9806\u3092\u66f8\u304d\u7559\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\u4ee5\u4e0b\u3067\u306f Windows7 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f Vagrant \u306b Chef \u306e\u7528\u8a9e\u3067\u8a00\u3046\u3068\u3053\u308d\u306e workstation \u3068 node \u3092\u4f5c\u6210\u3057\u3001workstation \u304b\u3089 node \u306b Chef \u3067 Redmine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u3092\u793a\u3057\u307e\u3059\u3002\nWindows7 \u304b\u3089\u76f4\u63a5 CentOS \u306b\u30ec\u30b7\u30d4\u3092\u6d41\u305b\u3070\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3046\u65b9\u3082\u3044\u3089\u3063\u3057\u3083\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u30a6\u30a4\u30f3\u30c9\u30fc\u30ba\u3067 Ruby \u5468\u308a\u306e\u30d7\u30ed\u30c0\u30af\u30c8\u3092\u8a66\u3059\u306e\u306f\u4e0d\u8981\u306a\u30c8\u30e9\u30d6\u30eb\u306b\u898b\u821e\u308f\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u304a\u52e7\u3081\u3057\u307e\u305b\u3093\u3002\nCygwin \u3082\u7d50\u5c40\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u304a\u3068\u306a\u3057\u304f Vagrant \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\n\nWindows7 \u306b Vagrant \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\nVirtualBox\nVirtualBox 4.3.6 r91406 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u8d77\u52d5\u3057\u3001\u3059\u3079\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u53d7\u3051\u5165\u308c\u307e\u3059\u3002\n\nVagrant\nVagrant 1.4.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u3053\u3061\u3089\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u8d77\u52d5\u3057\u3001\u3059\u3079\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u53d7\u3051\u5165\u308c\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089 vagrant \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30d1\u30b9\u304c\u901a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nC:\\Users\\umezawa>vagrant --version\nVagrant 1.4.1\n\n\u5f8c\u7d9a\u306e\u624b\u9806\u3067\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089 box \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u306e\u3067\u3001\u74b0\u5883\u5909\u6570\u306b\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nC:\\Users\\umezawa>echo %http_proxy%\nhttp://your.proxy.host:9999/\n\nC:\\Users\\umezawa>echo %https_proxy%\nhttp://your.proxy.host:9999/\n\n\nVagrant \u4e0a\u306b Workstation \u3092\u4f5c\u308b\nVagrant \u4e0a\u306b workstation \u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u4f7f\u7528\u3059\u308b OS \u306b\u7279\u306b\u5236\u9650\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u3053\u3067\u306f Ubuntu 12.04LTS 64bit \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nA list of base boxes for Vagrant - Vagrantbox.es \u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b box \u3092 Vagrant \u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\nC:\\Users\\umezawa>vagrant box add precise64 http://files.vagrantup.com/precise64.box\nDownloading box from URL: http://files.vagrantup.com/precise64.box\nExtracting box...ate: 2124k/s, Estimated time remaining: --:--:--)\nSuccessfully added box 'precise64' with provider 'virtualbox'!\n\nworkstation \u7528\u306e\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u79fb\u52d5\u3057\u3066 box \u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\nC:\\Users\\umezawa>mkdir c:\\temp\\workstation\n\nC:\\Users\\umezawa>cd c:\\temp\\workstation\n\nc:\\temp\\workstation>vagrant box list\nprecise64 (virtualbox)\n\nc:\\temp\\workstation>vagrant init precise64\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n\n\u30a8\u30c7\u30a3\u30bf\u3067\u4f5c\u6210\u3055\u308c\u305f Vagrantfile \u3092\u958b\u3044\u3066 IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e 192.168.33.10 \u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b\u8a2d\u5b9a\u3092\u6709\u52b9\u5316\u3057\u307e\u3057\u305f\u3002\nc:\\temp\\workstation>notepad Vagrantfile\n(snip)\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network :private_network, ip: \"192.168.33.10\"\n\n\u305d\u308c\u3067\u306f box \u3092\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\nc:\\temp\\workstation>vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n[default] Importing base box 'precise64'...\n[default] Matching MAC address for NAT networking...\n[default] Setting the name of the VM...\n[default] Clearing any previously set forwarded ports...\n[default] Clearing any previously set network interfaces...\n[default] Preparing network interfaces based on configuration...\n[default] Forwarding ports...\n[default] -- 22 => 2222 (adapter 1)\n[default] Booting VM...\n[default] Waiting for machine to boot. This may take a few minutes...\nDL is deprecated, please use Fiddle\n[default] Machine booted and ready!\n[default] The guest additions on this VM do not match the installed version of\nVirtualBox! In most cases this is fine, but in rare cases it can\ncause things such as shared folders to not work properly. If you see\nshared folder errors, please make sure the guest additions within the\nvirtual machine match the version of VirtualBox you have installed on\nyour host and reload your VM.\n\nGuest Additions Version: 4.2.0\nVirtualBox Version: 4.3\n[default] Configuring and enabling network interfaces...\n[default] Mounting shared folders...\n[default] -- /vagrant\n\nGuest Additions \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30ba\u30ec\u3066\u3044\u308b\u3068\u8a00\u308f\u308c\u307e\u3059\u304c\u3001\u7121\u8996\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\u3002\nbox \u304c\u8d77\u52d5\u3057\u305f\u3089 teraterm \u306a\u3069\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 vagrant/vagrant \u3067 192.168.33.10 \u306b\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nWelcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\nWelcome to your Vagrant-built virtual machine.\nLast login: Fri Sep 14 06:23:18 2012 from 10.0.2.2\nvagrant@precise64:~$\n\n\u4ee5\u4e0b\u3001\u3053\u306e workstation \u4e0a\u306b Chef \u306e\u5b9f\u884c\u306b\u5fc5\u8981\u306a\u74b0\u5883\u3092\u6574\u3048\u3066\u884c\u304d\u307e\u3059\u3002\n\nssh, rsync\n\u30ec\u30b7\u30d4\u306e\u8ee2\u9001\u306b\u5fc5\u8981\u306a ssh \u3068 rsync \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nvagrant@precise64:~$ ssh -v\nOpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012\n(snip)\n\nvagrant@precise64:~$ rsync --version\nrsync  version 3.0.9  protocol version 30\n(snip)\n\n\ngit\n\u30ec\u30b7\u30d4\u306e clone \u306b\u5fc5\u8981\u306a git \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002proxy \u74b0\u5883\u4e0b\u304b\u3089 apt-get \u3059\u308b\u305f\u3081\u306e\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u306f\u3044\u308d\u3044\u308d\u306a\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f /etc/environment \u306b\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:~$ sudo vi /etc/environment\nvagrant@precise64:~$ cat /etc/environment\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\"\n\nhttp_proxy=\"http://your.proxy.host:9999\"\nhttps_proxy=\"http://your.proxy.host:9999\"\n\n\u307e\u305f\u3001sudo \u3057\u305f\u969b\u306b\u8a2d\u5b9a\u5185\u5bb9\u3092\u4fdd\u6301\u3059\u308b\u3088\u3046 visudo \u3067 env_keep \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nUbuntu \u3067 visudo \u3057\u305f\u969b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30c7\u30a3\u30bf\u306b\u306f nano \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u500b\u4eba\u7684\u306b\u4f7f\u3044\u3065\u3089\u304b\u3063\u305f\u306e\u3067 vim \u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\nvagrant@precise64:~$ sudo update-alternatives --config editor\nThere are 3 choices for the alternative editor (providing /usr/bin/editor).\n\n  Selection    Path               Priority   Status\n------------------------------------------------------------\n* 0            /bin/nano           40        auto mode\n  1            /bin/ed            -100       manual mode\n  2            /bin/nano           40        manual mode\n  3            /usr/bin/vim.tiny   10        manual mode\n\nPress enter to keep the current choice[*], or type selection number: 3\nupdate-alternatives: using /usr/bin/vim.tiny to provide /usr/bin/editor (editor) in manual mode.\n\nvagrant@precise64:~$ sudo visudo\nvagrant@precise64:~$ sudo grep proxy /etc/sudoers\nDefaults        env_keep=\"http_proxy https_proxy\"\n\n\u3053\u308c\u3067 proxy \u74b0\u5883\u4e0b\u304b\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u3064\u306a\u304c\u308b\u306f\u305a\u3067\u3059\u3002apt-get update \u3057\u305f\u3089 apt-get install \u3067 git-core \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nvagrant@precise64:~$ sudo apt-get update\n(snip)\nReading package lists... Done\n\nvagrant@precise64:~$ sudo apt-get install -y git-core\n(snip)\nSetting up git (1:1.7.9.5-1) ...\nSetting up git-core (1:1.7.9.5-1) ...\nSetting up patch (2.6.1-3) ...\n\ngit \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u30d1\u30b9\u304c\u901a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306b\u4f7f\u7528\u3055\u308c\u308b\u540d\u524d\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002yourname \u3068 your@email.address \u306f\u81ea\u8eab\u306e\u3082\u306e\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:~$ git --version\ngit version 1.7.9.5\n\nvagrant@precise64:~/work/chef-repo$ git config --global user.name \"yourname\"\nvagrant@precise64:~/work/chef-repo$ git config --global user.email \"your@email.address\"\n\n\nruby\nvagrant \u306f\u81ea\u524d\u3067 ruby 1.8.7 \u3092\u6301\u3063\u3066\u304a\u308a\u3001/etc/profile.d/vagrant_ruby.sh \u3067\u30d1\u30b9\u306b\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\nvagrant@precise64:~$ ruby -v\nruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]\n\nvagrant@precise64:~$ whereis ruby\nruby: /opt/vagrant_ruby/bin/ruby\n\n\u5f8c\u8ff0\u3059\u308b berkshelf \u306b\u306f ruby 1.9 \u4ee5\u964d\u304c\u5fc5\u8981\u306a\u306e\u3067\u3001\u6539\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nvagrant@precise64:~$ sudo apt-get install -y ruby1.9.3\n\n\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u304b /etc/profile \u3092 source \u3057\u3066\u30d1\u30b9\u3092\u66f4\u65b0\u3059\u308c\u3070\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f ruby 1.9.3 \u304c\u53c2\u7167\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nvagrant@precise64:~$ source /etc/profile\n\nvagrant@precise64:~$ ruby -v\nruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]\n\n\nknife-solo\nvagrant \u306e ruby \u306b\u3082 knife \u306f\u5165\u3063\u3066\u3044\u307e\u3059\u304c\u3001knife \u3068 knife-solo \u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u7d44\u307f\u5408\u308f\u305b\u304c\u60aa\u3044\u3068\u52d5\u4f5c\u3057\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u3001\u6539\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nvagrant@precise64:~$ sudo gem install knife-solo --no-ri --no-rdoc\n(snip)\nSuccessfully installed pry-0.9.12.6\nSuccessfully installed chef-11.8.2\nSuccessfully installed knife-solo-0.4.1\n29 gems installed\n\nvagrant@precise64:~$ knife -v\nChef: 11.8.2\n\n\nberkshelf\n\u6700\u5f8c\u306b Berkshelf \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nberkshelf \u304c\u4f9d\u5b58\u3059\u308b gem \u306b native build \u304c\u5fc5\u8981\u306a\u3082\u306e\u304c\u3044\u304f\u3064\u304b\u3042\u308b\u306e\u3067\u3001\u307e\u305a build-essential \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nvagrant@precise64:~$ sudo apt-get install -y build-essential\n\n\u7d9a\u3044\u3066 berkshelf \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002native build \u306b\u305d\u308c\u306a\u308a\u306e\u6642\u9593\u304c\u639b\u304b\u308b\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:~$ sudo gem install berkshelf --no-ri --no-rdoc\n(snip)\nSuccessfully installed thor-0.18.1\nSuccessfully installed rbzip2-0.2.0\nSuccessfully installed berkshelf-2.0.13\n43 gems installed\n\nvagrant@precise64:~$ berks -v\nBerkshelf (2.0.13)\n(snip)\n\n\u4ee5\u4e0a\u3067 workstation \u306e\u74b0\u5883\u69cb\u7bc9\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nVagrant \u4e0a\u306b node \u3092\u4f5c\u308b\n\u7d9a\u3044\u3066 vagrant \u4e0a\u306b node \u3092\u4f5c\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u624b\u9806\u78ba\u8a8d\u306e\u305f\u3081 vagrant \u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\u304c\u3001\u5b9f\u969b\u306b\u306f\u30ec\u30b7\u30d4\u3092\u9069\u7528\u3059\u308b\u7269\u7406\u30b5\u30fc\u30d0\u3084\u4eee\u60f3\u30b5\u30fc\u30d0\u304c node \u306b\u306a\u308b\u306e\u3067\u3001\u3059\u3067\u306b\u4f5c\u696d\u5bfe\u8c61\u30b5\u30fc\u30d0\u304c\u3042\u308b\u5834\u5408\u306f vagrant \u4e0a\u306b node \u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u4eca\u56de\u306f node \u306b CentOS 6.3 \u3092\u63a1\u7528\u3059\u308b\u60f3\u5b9a\u306a\u306e\u3067\u3001Vagrant Base Box Downloads \u304b\u3089\u9069\u5f53\u306a box \u3092\u9078\u3093\u3067\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\nC:\\Users\\umezawa>vagrant box add CentOS-6.3-x86_64-v20130101 http://developer.nrel.gov/downloads/vagrant-boxes/CentOS-6.3-x86_64-v20130101.box\nDownloading box from URL: http://developer.nrel.gov/downloads/vagrant-boxes/CentOS-6.3-x86_64-v20130101.box\nExtracting box...ate: 171k/s, Estimated time remaining: --:--:--)\nSuccessfully added box 'CentOS-6.3-x86_64-v20130101' with provider 'virtualbox'!\n\nnode \u7528\u306e\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u79fb\u52d5\u3057\u3066 box \u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\nC:\\Users\\umezawa>mkdir c:\\temp\\node\n\nc:\\Users\\umezawa>cd c:\\temp\\node\n\nc:\\temp\\node>vagrant box list\nCentOS-6.3-x86_64-v20130101 (virtualbox)\nprecise64                   (virtualbox)\n\nc:\\temp\\node>vagrant init CentOS-6.3-x86_64-v20130101\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n\n\u30a8\u30c7\u30a3\u30bf\u3067\u4f5c\u6210\u3055\u308c\u305f Vagrantfile \u3092\u958b\u3044\u3066 workstation \u3068\u306f\u7570\u306a\u308b IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f 192.168.33.100 \u3068\u3057\u307e\u3057\u305f\u3002\nc:\\temp\\node>notepad Vagrantfile\n(snip)\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network :private_network, ip: \"192.168.33.100\"\n\n\u305d\u308c\u3067\u306f box \u3092\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\nc:\\temp\\node>vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n[default] Importing base box 'CentOS-6.3-x86_64-v20130101'...\n[default] Matching MAC address for NAT networking...\n[default] Setting the name of the VM...\n[default] Clearing any previously set forwarded ports...\n[default] Fixed port collision for 22 => 2222. Now on port 2200.\n[default] Clearing any previously set network interfaces...\n[default] Preparing network interfaces based on configuration...\n[default] Forwarding ports...\n[default] -- 22 => 2200 (adapter 1)\n[default] Booting VM...\n[default] Waiting for machine to boot. This may take a few minutes...\nDL is deprecated, please use Fiddle\n[default] Machine booted and ready!\n[default] The guest additions on this VM do not match the installed version of\nVirtualBox! In most cases this is fine, but in rare cases it can\ncause things such as shared folders to not work properly. If you see\nshared folder errors, please make sure the guest additions within the\nvirtual machine match the version of VirtualBox you have installed on\nyour host and reload your VM.\n\nGuest Additions Version: 4.2.6\nVirtualBox Version: 4.3\n[default] Configuring and enabling network interfaces...\n[default] Mounting shared folders...\n[default] -- /vagrant\n\nbox \u304c\u8d77\u52d5\u3057\u305f\u3089 teraterm \u306a\u3069\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 vagrant/vagrant \u3067 192.168.33.100 \u306b\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nLast login: Thu Jan 30 05:43:34 2014 from 192.168.33.10\nWelcome to your Vagrant-built virtual machine.\n[vagrant@localhost ~]$\n\n\nssh, rsync\n\u30ec\u30b7\u30d4\u306e\u8ee2\u9001\u306b\u5fc5\u8981\u306a ssh \u3068 rsync \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n[vagrant@localhost ~]$ ssh -v\nOpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010\n(snip)\n\n[vagrant@localhost ~]$ rsync --version\n-bash: rsync: command not found\n\nrsync \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001yum \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\n/etc/yum.conf \u306b\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3066\u3001yum update \u3057\u3066\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n[vagrant@localhost ~]$ sudo vi /etc/yum.conf\n[vagrant@localhost ~]$ grep proxy /etc/yum.conf\nproxy=http://your.proxy.host:9999/\n\n[vagrant@localhost ~]$ sudo yum update\n\n[vagrant@localhost ~]$ sudo yum -y install rsync\n(snip)\nInstalled:\n  rsync.x86_64 0:3.0.6-9.el6_4.1\n\nComplete!\n\n[vagrant@localhost ~]$ rsync --version\nrsync  version 3.0.6  protocol version 30\n(snip)\n\n\u3042\u3068\u3067 knife prepare \u3059\u308b\u969b\u306b\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u5148\u56de\u308a\u3057\u3066 /etc/environment \u3068 /etc/sudoers \u306b\u3082\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n[vagrant@localhost ~]$ sudo vi /etc/environment\n[vagrant@localhost ~]$ sudo grep proxy /etc/environment\nhttp_proxy=\"http://your.proxy.host:9999\"\nhttps_proxy=\"http://your.proxy.host:9999\"\n\n[vagrant@localhost ~]$ sudo visudo\n[vagrant@localhost ~]$ sudo grep proxy /etc/sudoers\nDefaults    env_keep += \"http_proxy https_proxy\"\n\n\u4ee5\u4e0a\u3067 node \u306e\u74b0\u5883\u69cb\u7bc9\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\u9375\u4ea4\u63db\n\u3053\u308c\u307e\u3067\u4f55\u5ea6\u304b\u89e6\u308c\u3066\u304d\u305f\u3068\u304a\u308a\u3001chef \u306f workstation \u304b\u3089 node \u306b ssh \u3092\u4f7f\u3063\u3066\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\u30ec\u30b7\u30d4\u9069\u7528\u4e2d\u306b\u4f55\u5ea6\u3082\u8a8d\u8a3c\u60c5\u5831\u3092\u5165\u529b\u3059\u308b\u306e\u306f\u3068\u3066\u3082\u9762\u5012\u306a\u306e\u3067\u3001workstation \u304b\u3089 node \u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u305b\u305a\u306b ssh \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u3001workstation \u306e\u516c\u958b\u9375\u3092 node \u306b\u767b\u9332\u3057\u307e\u3057\u3087\u3046\u3002\n\u307e\u305a workstation \u3067\u9375\u30da\u30a2\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4f55\u5ea6\u304b\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u304c\u3001\u3059\u3079\u3066\u4f55\u3082\u5165\u529b\u305b\u305a\u306b enter \u3057\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:~$ ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/vagrant/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/vagrant/.ssh/id_rsa.\nYour public key has been saved in /home/vagrant/.ssh/id_rsa.pub.\n(snip)\n\n\u4f5c\u6210\u3057\u305f\u9375\u30da\u30a2\u306e\u3046\u3061\u3001\u516c\u958b\u9375\u3092 node \u306e /tmp \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b scp \u8ee2\u9001\u3057\u307e\u3059\u3002\u5f53\u7136\u3053\u3053\u3067\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u3001vagrant \u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:~$ scp /home/vagrant/.ssh/id_rsa.pub 192.168.33.100:/tmp\nThe authenticity of host '192.168.33.100 (192.168.33.100)' can't be established.\nRSA key fingerprint is 35:08:c4:e7:a1:77:af:b8:fa:a7:b0:9d:68:84:a9:5f.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '192.168.33.100' (RSA) to the list of known hosts.\nvagrant@192.168.33.100's password:\nid_rsa.pub                                     100%  399     0.4KB/s   00:00\n\nnode \u306b ssh \u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u8ee2\u9001\u3057\u305f\u516c\u958b\u9375\u306e\u5185\u5bb9\u3092 ~/.ssh/authorized_keys \u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001\u4e0d\u8981\u306b\u306a\u3063\u305f\u516c\u958b\u9375\u3092\u524a\u9664\u3057\u3066\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\nvagrant@precise64:~$ ssh 192.168.33.100\nvagrant@192.168.33.100's password:\nWelcome to your Vagrant-built virtual machine.\n\n[vagrant@localhost ~]$ cat /tmp/id_rsa.pub >> ~/.ssh/authorized_keys\n\n[vagrant@localhost ~]$ rm /tmp/id_rsa.pub\n\n[vagrant@localhost ~]$ logout\nConnection to 192.168.33.100 closed.\n\nworkstation \u304b\u3089 node \u306b\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306a\u3057\u3067 ssh \u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\nvagrant@precise64:~$ ssh 192.168.33.100\n\nLast login: Thu Jan 30 05:43:15 2014 from 192.168.33.10\nWelcome to your Vagrant-built virtual machine.\n\n\u4ee5\u4e0a\u3067 workstation \u3068 node \u306e\u9375\u4ea4\u63db\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\nworkstation \u304b\u3089 node \u306b\u30ec\u30b7\u30d4\u3092\u9069\u7528\u3059\u308b\n\u3044\u3088\u3044\u3088 workstation \u304b\u3089 node \u306b\u30ec\u30b7\u30d4\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n\nknife configure\n\u307e\u305a\u306f workstation \u3067 chef \u306e\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002knife configure \u3059\u308b\u3068\u4f55\u5ea6\u304b\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u304c\u3001\u3059\u3079\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u69cb\u308f\u306a\u3044\u306e\u3067\u3001\u306a\u306b\u3082\u5165\u529b\u305b\u305a\u306b enter \u3057\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:~$ knife configure\nWARNING: No knife configuration file found\nWhere should I put the config file? [/home/vagrant/.chef/knife.rb]\nPlease enter the chef server URL: [https://precise64:443]\nPlease enter an existing username or clientname for the API: [vagrant]\nPlease enter the validation clientname: [chef-validator]\nPlease enter the location of the validation key: [/etc/chef-server/chef-validator.pem]\nPlease enter the path to a chef repository (or leave blank):\n*****\n\nYou must place your client key in:\n  /home/vagrant/.chef/vagrant.pem\nBefore running commands with Knife!\n\n*****\n\nYou must place your validation key in:\n  /etc/chef-server/chef-validator.pem\nBefore generating instance data with Knife!\n\n*****\nConfiguration file written to /home/vagrant/.chef/knife.rb\n\n\u4f5c\u6210\u3055\u308c\u305f knife.rb \u306b\u30d7\u30ed\u30ad\u30b7\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:~$ vi /home/vagrant/.chef/knife.rb\nvagrant@precise64:~$ cat /home/vagrant/.chef/knife.rb\n(snip)\nhttp_proxy               'your.proxy.host:9999/'\nhttps_proxy              'your.proxy.host:9999/'\n\n\ncookbook\n\u7d9a\u3044\u3066 cookbook \u3092\u7528\u610f\u3057\u307e\u3059\u3002\u4eca\u56de\u306f juanje/cookbook-redmine \u3092 fork \u3057\u3066 iptables \u3068 subversion \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305f\u30ec\u30b7\u30d4\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\nworkstation \u4e0a\u306b\u4f5c\u696d\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001garbagetown/cookbook-redmine \u3092 clone \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4f59\u8ac7\u3067\u3059\u304c\u3001vagrant \u306f\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u306e /vagrant \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30db\u30b9\u30c8 OS \u4e0a\u306e Vagrantfile \u304c\u5b58\u5728\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3001Winodows7 \u4e0a\u306e SublimeText2 \u306a\u3069\u4f7f\u3044\u6163\u308c\u305f GUI \u30a8\u30c7\u30a3\u30bf\u3067\u30ec\u30b7\u30d4\u3092\u7de8\u96c6\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092 /vagrant \u5185\u306b\u4f5c\u6210\u3059\u308b\u4fbf\u5229\u3067\u3059\u3002\nvagrant@precise64:~$ mkdir /vagrant/work; cd /vagrant/work\nvagrant@precise64:/vagrant/work$ git clone https://github.com/garbagetown/cookbook-redmine.git\nCloning into 'cookbook-redmine'...\nremote: Reusing existing pack: 305, done.\nremote: Counting objects: 17, done.\nremote: Compressing objects: 100% (14/14), done.\nremote: Total 322 (delta 2), reused 0 (delta 0)\nReceiving objects: 100% (322/322), 50.05 KiB, done.\nResolving deltas: 100% (145/145), done.\n\nclone \u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u305f\u3089\u3001knife solo prepare \u3092\u5b9f\u884c\u3057\u3066\u30ec\u30b7\u30d4\u3092 node \u306b\u9069\u7528\u3059\u308b\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\nvagrant@precise64:/vagrant/work$ cd cookbook-redmine/\nvagrant@precise64:/vagrant/work/cookbook-redmine$ knife solo prepare 192.168.33.100\nBootstrapping Chef...\n(snip)\nInstalling Chef 11.8.2\ninstalling with rpm...\nwarning: /tmp/install.sh.17099/chef-11.8.2-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY\nPreparing...                ########################################### [100%]\n   1:chef                   ########################################### [100%]\nThank you for installing Chef!\nGenerating node config 'nodes/192.168.33.100.json'...\n\n\u4f5c\u6210\u3055\u308c\u305f json \u306b\u5b9f\u884c\u3059\u308b\u30ec\u30b7\u30d4\u3084 attributes \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002password \u306f\u81ea\u8eab\u306e\u8a2d\u5b9a\u5024\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\nvagrant@precise64:/vagrant/work/cookbook-redmine$ vi nodes/192.168.33.100.json\nvagrant@precise64:/vagrant/work/cookbook-redmine$ cat nodes/192.168.33.100.json\n{\n  \"run_list\":[\n    \"redmine\",\n    \"mysql\",\n    \"subversion::server\"\n  ],\n  \"redmine\" : {\n    \"databases\" : {\n      \"production\" : {\n        \"password\" : \"password\"\n      }\n    }\n  },\n  \"mysql\" : {\n    \"server_root_password\" : \"password\",\n    \"server_repl_password\" : \"password\",\n    \"server_debian_password\" : \"password\"\n  }\n}\n\n\u6700\u5f8c\u306b\u3001knife solo cook \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nvagrant@precise64:/vagrant/work/cookbook-redmine$ knife solo cook 192.168.33.100\nRunning Chef on 192.168.33.100...\nChecking Chef version...\nInstalling Berkshelf cookbooks to '/home/vagrant/.berkshelf/knife-solo/4cf4f5c173d6b541da0269be1b4eb5e4f9805994'...\nUsing redmine (0.1.0) from metadata\nInstalling apt (2.3.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling yum (2.2.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling iptables (0.12.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling subversion (1.1.2) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling git (2.9.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling dmg (2.1.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling build-essential (1.4.2) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling windows (1.12.8) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling chef_handler (1.1.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling runit (1.5.8) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling yum-epel (0.2.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling apache2 (1.8.14) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling passenger_apache2 (2.1.2) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling mysql (4.0.20) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling openssl (1.1.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling postgresql (3.3.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling database (1.6.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling aws (1.0.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling xfs (1.1.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nUploading the kitchen...\n(snip)\nChef Client finished, 137 resources updated\n\n\u30db\u30b9\u30c8 OS \u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089 http://192.168.33.100/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Redmine \u306e\u30c8\u30c3\u30d7\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u53c2\u8003\n\nUbuntu\u306evisudo\u30a8\u30c7\u30a3\u30bf\u304c\u5909nano\u306b\u306a\u308b - \u305d\u308c\u30de\u30b0\u3067\uff01\n\n# \u306f\u3058\u3081\u306b\n\nproxy \u306b\u56f2\u307e\u308c\u305f Windows7 \u304b\u3089 CentOS \u306b Chef \u3067 Redmine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u3088\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u53f3\u5f80\u5de6\u5f80\u3057\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u3069\u306a\u305f\u304b\u306e\u5f79\u306b\u7acb\u3066\u3070\u3068\u601d\u3044\u624b\u9806\u3092\u66f8\u304d\u7559\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3067\u306f Windows7 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f Vagrant \u306b Chef \u306e\u7528\u8a9e\u3067\u8a00\u3046\u3068\u3053\u308d\u306e workstation \u3068 node \u3092\u4f5c\u6210\u3057\u3001workstation \u304b\u3089 node \u306b Chef \u3067 Redmine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u9806\u3092\u793a\u3057\u307e\u3059\u3002\n\nWindows7 \u304b\u3089\u76f4\u63a5 CentOS \u306b\u30ec\u30b7\u30d4\u3092\u6d41\u305b\u3070\u3044\u3044\u3058\u3083\u306a\u3044\u304b\u3068\u601d\u3046\u65b9\u3082\u3044\u3089\u3063\u3057\u3083\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u30a6\u30a4\u30f3\u30c9\u30fc\u30ba\u3067 Ruby \u5468\u308a\u306e\u30d7\u30ed\u30c0\u30af\u30c8\u3092\u8a66\u3059\u306e\u306f\u4e0d\u8981\u306a\u30c8\u30e9\u30d6\u30eb\u306b\u898b\u821e\u308f\u308c\u308b\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u304a\u52e7\u3081\u3057\u307e\u305b\u3093\u3002\n\nCygwin \u3082\u7d50\u5c40\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u3053\u3068\u304c\u591a\u3044\u306e\u3067\u3001\u304a\u3068\u306a\u3057\u304f Vagrant \u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\n\n\n## Windows7 \u306b Vagrant \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n### VirtualBox\n\nVirtualBox 4.3.6 r91406 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u8d77\u52d5\u3057\u3001\u3059\u3079\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u53d7\u3051\u5165\u308c\u307e\u3059\u3002\n\n### Vagrant \n\nVagrant 1.4.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u3053\u3061\u3089\u3082\u30a4\u30f3\u30b9\u30c8\u30fc\u30e9\u3092\u8d77\u52d5\u3057\u3001\u3059\u3079\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u3092\u53d7\u3051\u5165\u308c\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u304b\u3089 vagrant \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u30d1\u30b9\u304c\u901a\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\nC:\\Users\\umezawa>vagrant --version\nVagrant 1.4.1\n```\n\n\u5f8c\u7d9a\u306e\u624b\u9806\u3067\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089 box \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u306e\u3067\u3001\u74b0\u5883\u5909\u6570\u306b\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nC:\\Users\\umezawa>echo %http_proxy%\nhttp://your.proxy.host:9999/\n\nC:\\Users\\umezawa>echo %https_proxy%\nhttp://your.proxy.host:9999/\n```\n\n## Vagrant \u4e0a\u306b Workstation \u3092\u4f5c\u308b\n\nVagrant \u4e0a\u306b workstation \u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u4f7f\u7528\u3059\u308b OS \u306b\u7279\u306b\u5236\u9650\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u3053\u3067\u306f Ubuntu 12.04LTS 64bit \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n[A list of base boxes for Vagrant - Vagrantbox.es](http://www.vagrantbox.es/) \u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b box \u3092 Vagrant \u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\nC:\\Users\\umezawa>vagrant box add precise64 http://files.vagrantup.com/precise64.box\nDownloading box from URL: http://files.vagrantup.com/precise64.box\nExtracting box...ate: 2124k/s, Estimated time remaining: --:--:--)\nSuccessfully added box 'precise64' with provider 'virtualbox'!\n```\n\nworkstation \u7528\u306e\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u79fb\u52d5\u3057\u3066 box \u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n\n```\nC:\\Users\\umezawa>mkdir c:\\temp\\workstation\n\nC:\\Users\\umezawa>cd c:\\temp\\workstation\n\nc:\\temp\\workstation>vagrant box list\nprecise64 (virtualbox)\n\nc:\\temp\\workstation>vagrant init precise64\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n```\n\n\u30a8\u30c7\u30a3\u30bf\u3067\u4f5c\u6210\u3055\u308c\u305f Vagrantfile \u3092\u958b\u3044\u3066 IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e 192.168.33.10 \u3092\u4f7f\u7528\u3059\u308b\u306e\u3067\u3001\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b\u8a2d\u5b9a\u3092\u6709\u52b9\u5316\u3057\u307e\u3057\u305f\u3002\n\n```\nc:\\temp\\workstation>notepad Vagrantfile\n(snip)\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network :private_network, ip: \"192.168.33.10\"\n```\n\n\u305d\u308c\u3067\u306f box \u3092\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\nc:\\temp\\workstation>vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n[default] Importing base box 'precise64'...\n[default] Matching MAC address for NAT networking...\n[default] Setting the name of the VM...\n[default] Clearing any previously set forwarded ports...\n[default] Clearing any previously set network interfaces...\n[default] Preparing network interfaces based on configuration...\n[default] Forwarding ports...\n[default] -- 22 => 2222 (adapter 1)\n[default] Booting VM...\n[default] Waiting for machine to boot. This may take a few minutes...\nDL is deprecated, please use Fiddle\n[default] Machine booted and ready!\n[default] The guest additions on this VM do not match the installed version of\nVirtualBox! In most cases this is fine, but in rare cases it can\ncause things such as shared folders to not work properly. If you see\nshared folder errors, please make sure the guest additions within the\nvirtual machine match the version of VirtualBox you have installed on\nyour host and reload your VM.\n\nGuest Additions Version: 4.2.0\nVirtualBox Version: 4.3\n[default] Configuring and enabling network interfaces...\n[default] Mounting shared folders...\n[default] -- /vagrant\n```\n\nGuest Additions \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u30ba\u30ec\u3066\u3044\u308b\u3068\u8a00\u308f\u308c\u307e\u3059\u304c\u3001\u7121\u8996\u3057\u3066\u69cb\u3044\u307e\u305b\u3093\u3002\n\nbox \u304c\u8d77\u52d5\u3057\u305f\u3089 teraterm \u306a\u3069\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 vagrant/vagrant \u3067 192.168.33.10 \u306b\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\nWelcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)\n\n * Documentation:  https://help.ubuntu.com/\nWelcome to your Vagrant-built virtual machine.\nLast login: Fri Sep 14 06:23:18 2012 from 10.0.2.2\nvagrant@precise64:~$\n```\n\n\u4ee5\u4e0b\u3001\u3053\u306e workstation \u4e0a\u306b Chef \u306e\u5b9f\u884c\u306b\u5fc5\u8981\u306a\u74b0\u5883\u3092\u6574\u3048\u3066\u884c\u304d\u307e\u3059\u3002\n\n### ssh, rsync\n\n\u30ec\u30b7\u30d4\u306e\u8ee2\u9001\u306b\u5fc5\u8981\u306a ssh \u3068 rsync \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ ssh -v\nOpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012\n(snip)\n\nvagrant@precise64:~$ rsync --version\nrsync  version 3.0.9  protocol version 30\n(snip)\n```\n\n### git\n\n\u30ec\u30b7\u30d4\u306e clone \u306b\u5fc5\u8981\u306a git \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002proxy \u74b0\u5883\u4e0b\u304b\u3089 apt-get \u3059\u308b\u305f\u3081\u306e\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\u306f\u3044\u308d\u3044\u308d\u306a\u65b9\u6cd5\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u3053\u3067\u306f /etc/environment \u306b\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\nvagrant@precise64:~$ sudo vi /etc/environment\nvagrant@precise64:~$ cat /etc/environment\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games\"\n\nhttp_proxy=\"http://your.proxy.host:9999\"\nhttps_proxy=\"http://your.proxy.host:9999\"\n```\n\n\u307e\u305f\u3001sudo \u3057\u305f\u969b\u306b\u8a2d\u5b9a\u5185\u5bb9\u3092\u4fdd\u6301\u3059\u308b\u3088\u3046 visudo \u3067 env_keep \u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nUbuntu \u3067 visudo \u3057\u305f\u969b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a8\u30c7\u30a3\u30bf\u306b\u306f nano \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u500b\u4eba\u7684\u306b\u4f7f\u3044\u3065\u3089\u304b\u3063\u305f\u306e\u3067 vim \u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n```bash\nvagrant@precise64:~$ sudo update-alternatives --config editor\nThere are 3 choices for the alternative editor (providing /usr/bin/editor).\n\n  Selection    Path               Priority   Status\n------------------------------------------------------------\n* 0            /bin/nano           40        auto mode\n  1            /bin/ed            -100       manual mode\n  2            /bin/nano           40        manual mode\n  3            /usr/bin/vim.tiny   10        manual mode\n\nPress enter to keep the current choice[*], or type selection number: 3\nupdate-alternatives: using /usr/bin/vim.tiny to provide /usr/bin/editor (editor) in manual mode.\n\nvagrant@precise64:~$ sudo visudo\nvagrant@precise64:~$ sudo grep proxy /etc/sudoers\nDefaults        env_keep=\"http_proxy https_proxy\"\n```\n\n\u3053\u308c\u3067 proxy \u74b0\u5883\u4e0b\u304b\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u3064\u306a\u304c\u308b\u306f\u305a\u3067\u3059\u3002apt-get update \u3057\u305f\u3089 apt-get install \u3067 git-core \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\nvagrant@precise64:~$ sudo apt-get update\n(snip)\nReading package lists... Done\n\nvagrant@precise64:~$ sudo apt-get install -y git-core\n(snip)\nSetting up git (1:1.7.9.5-1) ...\nSetting up git-core (1:1.7.9.5-1) ...\nSetting up patch (2.6.1-3) ...\n```\n\ngit \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u30d1\u30b9\u304c\u901a\u3063\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3089\u3001\u30b3\u30df\u30c3\u30c8\u30ed\u30b0\u306b\u4f7f\u7528\u3055\u308c\u308b\u540d\u524d\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002yourname \u3068 your@email.address \u306f\u81ea\u8eab\u306e\u3082\u306e\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\nvagrant@precise64:~$ git --version\ngit version 1.7.9.5\n\nvagrant@precise64:~/work/chef-repo$ git config --global user.name \"yourname\"\nvagrant@precise64:~/work/chef-repo$ git config --global user.email \"your@email.address\"\n```\n\n### ruby\n\nvagrant \u306f\u81ea\u524d\u3067 ruby 1.8.7 \u3092\u6301\u3063\u3066\u304a\u308a\u3001/etc/profile.d/vagrant_ruby.sh \u3067\u30d1\u30b9\u306b\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ ruby -v\nruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]\n\nvagrant@precise64:~$ whereis ruby\nruby: /opt/vagrant_ruby/bin/ruby\n```\n\n\u5f8c\u8ff0\u3059\u308b berkshelf \u306b\u306f ruby 1.9 \u4ee5\u964d\u304c\u5fc5\u8981\u306a\u306e\u3067\u3001\u6539\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ sudo apt-get install -y ruby1.9.3\n```\n\n\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u304b /etc/profile \u3092 source \u3057\u3066\u30d1\u30b9\u3092\u66f4\u65b0\u3059\u308c\u3070\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f ruby 1.9.3 \u304c\u53c2\u7167\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ source /etc/profile\n\nvagrant@precise64:~$ ruby -v\nruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]\n```\n\n### knife-solo\n\nvagrant \u306e ruby \u306b\u3082 knife \u306f\u5165\u3063\u3066\u3044\u307e\u3059\u304c\u3001knife \u3068 knife-solo \u306f\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u7d44\u307f\u5408\u308f\u305b\u304c\u60aa\u3044\u3068\u52d5\u4f5c\u3057\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u3001\u6539\u3081\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ sudo gem install knife-solo --no-ri --no-rdoc\n(snip)\nSuccessfully installed pry-0.9.12.6\nSuccessfully installed chef-11.8.2\nSuccessfully installed knife-solo-0.4.1\n29 gems installed\n\nvagrant@precise64:~$ knife -v\nChef: 11.8.2\n```\n\n### berkshelf\n\n\u6700\u5f8c\u306b Berkshelf \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nberkshelf \u304c\u4f9d\u5b58\u3059\u308b gem \u306b native build \u304c\u5fc5\u8981\u306a\u3082\u306e\u304c\u3044\u304f\u3064\u304b\u3042\u308b\u306e\u3067\u3001\u307e\u305a build-essential \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ sudo apt-get install -y build-essential\n```\n\n\u7d9a\u3044\u3066 berkshelf \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002native build \u306b\u305d\u308c\u306a\u308a\u306e\u6642\u9593\u304c\u639b\u304b\u308b\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nvagrant@precise64:~$ sudo gem install berkshelf --no-ri --no-rdoc\n(snip)\nSuccessfully installed thor-0.18.1\nSuccessfully installed rbzip2-0.2.0\nSuccessfully installed berkshelf-2.0.13\n43 gems installed\n\nvagrant@precise64:~$ berks -v\nBerkshelf (2.0.13)\n(snip)\n```\n\n\u4ee5\u4e0a\u3067 workstation \u306e\u74b0\u5883\u69cb\u7bc9\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\n## Vagrant \u4e0a\u306b node \u3092\u4f5c\u308b\n\n\u7d9a\u3044\u3066 vagrant \u4e0a\u306b node \u3092\u4f5c\u308a\u307e\u3059\u3002\u4eca\u56de\u306f\u624b\u9806\u78ba\u8a8d\u306e\u305f\u3081 vagrant \u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3057\u305f\u304c\u3001\u5b9f\u969b\u306b\u306f\u30ec\u30b7\u30d4\u3092\u9069\u7528\u3059\u308b\u7269\u7406\u30b5\u30fc\u30d0\u3084\u4eee\u60f3\u30b5\u30fc\u30d0\u304c node \u306b\u306a\u308b\u306e\u3067\u3001\u3059\u3067\u306b\u4f5c\u696d\u5bfe\u8c61\u30b5\u30fc\u30d0\u304c\u3042\u308b\u5834\u5408\u306f vagrant \u4e0a\u306b node \u3092\u4f5c\u6210\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u4eca\u56de\u306f node \u306b CentOS 6.3 \u3092\u63a1\u7528\u3059\u308b\u60f3\u5b9a\u306a\u306e\u3067\u3001[Vagrant Base Box Downloads](http://nrel.github.io/vagrant-boxes/) \u304b\u3089\u9069\u5f53\u306a box \u3092\u9078\u3093\u3067\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\n```\nC:\\Users\\umezawa>vagrant box add CentOS-6.3-x86_64-v20130101 http://developer.nrel.gov/downloads/vagrant-boxes/CentOS-6.3-x86_64-v20130101.box\nDownloading box from URL: http://developer.nrel.gov/downloads/vagrant-boxes/CentOS-6.3-x86_64-v20130101.box\nExtracting box...ate: 171k/s, Estimated time remaining: --:--:--)\nSuccessfully added box 'CentOS-6.3-x86_64-v20130101' with provider 'virtualbox'!\n```\n\nnode \u7528\u306e\u9069\u5f53\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u79fb\u52d5\u3057\u3066 box \u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n\n```\nC:\\Users\\umezawa>mkdir c:\\temp\\node\n\nc:\\Users\\umezawa>cd c:\\temp\\node\n\nc:\\temp\\node>vagrant box list\nCentOS-6.3-x86_64-v20130101 (virtualbox)\nprecise64                   (virtualbox)\n\nc:\\temp\\node>vagrant init CentOS-6.3-x86_64-v20130101\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n```\n\n\u30a8\u30c7\u30a3\u30bf\u3067\u4f5c\u6210\u3055\u308c\u305f Vagrantfile \u3092\u958b\u3044\u3066 workstation \u3068\u306f\u7570\u306a\u308b IP \u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f 192.168.33.100 \u3068\u3057\u307e\u3057\u305f\u3002\n\n```\nc:\\temp\\node>notepad Vagrantfile\n(snip)\n  # Create a private network, which allows host-only access to the machine\n  # using a specific IP.\n  config.vm.network :private_network, ip: \"192.168.33.100\"\n```\n\n\u305d\u308c\u3067\u306f box \u3092\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\nc:\\temp\\node>vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n[default] Importing base box 'CentOS-6.3-x86_64-v20130101'...\n[default] Matching MAC address for NAT networking...\n[default] Setting the name of the VM...\n[default] Clearing any previously set forwarded ports...\n[default] Fixed port collision for 22 => 2222. Now on port 2200.\n[default] Clearing any previously set network interfaces...\n[default] Preparing network interfaces based on configuration...\n[default] Forwarding ports...\n[default] -- 22 => 2200 (adapter 1)\n[default] Booting VM...\n[default] Waiting for machine to boot. This may take a few minutes...\nDL is deprecated, please use Fiddle\n[default] Machine booted and ready!\n[default] The guest additions on this VM do not match the installed version of\nVirtualBox! In most cases this is fine, but in rare cases it can\ncause things such as shared folders to not work properly. If you see\nshared folder errors, please make sure the guest additions within the\nvirtual machine match the version of VirtualBox you have installed on\nyour host and reload your VM.\n\nGuest Additions Version: 4.2.6\nVirtualBox Version: 4.3\n[default] Configuring and enabling network interfaces...\n[default] Mounting shared folders...\n[default] -- /vagrant\n```\n\nbox \u304c\u8d77\u52d5\u3057\u305f\u3089 teraterm \u306a\u3069\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 vagrant/vagrant \u3067 192.168.33.100 \u306b\u63a5\u7d9a\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\nLast login: Thu Jan 30 05:43:34 2014 from 192.168.33.10\nWelcome to your Vagrant-built virtual machine.\n[vagrant@localhost ~]$\n```\n\n### ssh, rsync\n\n\u30ec\u30b7\u30d4\u306e\u8ee2\u9001\u306b\u5fc5\u8981\u306a ssh \u3068 rsync \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n[vagrant@localhost ~]$ ssh -v\nOpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010\n(snip)\n\n[vagrant@localhost ~]$ rsync --version\n-bash: rsync: command not found\n```\n\nrsync \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001yum \u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002\n\n/etc/yum.conf \u306b\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3066\u3001yum update \u3057\u3066\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n[vagrant@localhost ~]$ sudo vi /etc/yum.conf\n[vagrant@localhost ~]$ grep proxy /etc/yum.conf\nproxy=http://your.proxy.host:9999/\n\n[vagrant@localhost ~]$ sudo yum update\n\n[vagrant@localhost ~]$ sudo yum -y install rsync\n(snip)\nInstalled:\n  rsync.x86_64 0:3.0.6-9.el6_4.1\n\nComplete!\n\n[vagrant@localhost ~]$ rsync --version\nrsync  version 3.0.6  protocol version 30\n(snip)\n```\n\n\u3042\u3068\u3067 knife prepare \u3059\u308b\u969b\u306b\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u5148\u56de\u308a\u3057\u3066 /etc/environment \u3068 /etc/sudoers \u306b\u3082\u30d7\u30ed\u30ad\u30b7\u30b5\u30fc\u30d0\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n[vagrant@localhost ~]$ sudo vi /etc/environment\n[vagrant@localhost ~]$ sudo grep proxy /etc/environment\nhttp_proxy=\"http://your.proxy.host:9999\"\nhttps_proxy=\"http://your.proxy.host:9999\"\n\n[vagrant@localhost ~]$ sudo visudo\n[vagrant@localhost ~]$ sudo grep proxy /etc/sudoers\nDefaults    env_keep += \"http_proxy https_proxy\"\n```\n\n\u4ee5\u4e0a\u3067 node \u306e\u74b0\u5883\u69cb\u7bc9\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\n## \u9375\u4ea4\u63db\n\n\u3053\u308c\u307e\u3067\u4f55\u5ea6\u304b\u89e6\u308c\u3066\u304d\u305f\u3068\u304a\u308a\u3001chef \u306f workstation \u304b\u3089 node \u306b ssh \u3092\u4f7f\u3063\u3066\u30a2\u30af\u30bb\u30b9\u3057\u307e\u3059\u3002\n\n\u30ec\u30b7\u30d4\u9069\u7528\u4e2d\u306b\u4f55\u5ea6\u3082\u8a8d\u8a3c\u60c5\u5831\u3092\u5165\u529b\u3059\u308b\u306e\u306f\u3068\u3066\u3082\u9762\u5012\u306a\u306e\u3067\u3001workstation \u304b\u3089 node \u306b\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u305b\u305a\u306b ssh \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u3001workstation \u306e\u516c\u958b\u9375\u3092 node \u306b\u767b\u9332\u3057\u307e\u3057\u3087\u3046\u3002\n\n\u307e\u305a workstation \u3067\u9375\u30da\u30a2\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4f55\u5ea6\u304b\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u304c\u3001\u3059\u3079\u3066\u4f55\u3082\u5165\u529b\u305b\u305a\u306b enter \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\nvagrant@precise64:~$ ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/home/vagrant/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /home/vagrant/.ssh/id_rsa.\nYour public key has been saved in /home/vagrant/.ssh/id_rsa.pub.\n(snip)\n```\n\n\u4f5c\u6210\u3057\u305f\u9375\u30da\u30a2\u306e\u3046\u3061\u3001\u516c\u958b\u9375\u3092 node \u306e /tmp \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b scp \u8ee2\u9001\u3057\u307e\u3059\u3002\u5f53\u7136\u3053\u3053\u3067\u306f\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u308b\u306e\u3067\u3001vagrant \u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\nvagrant@precise64:~$ scp /home/vagrant/.ssh/id_rsa.pub 192.168.33.100:/tmp\nThe authenticity of host '192.168.33.100 (192.168.33.100)' can't be established.\nRSA key fingerprint is 35:08:c4:e7:a1:77:af:b8:fa:a7:b0:9d:68:84:a9:5f.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '192.168.33.100' (RSA) to the list of known hosts.\nvagrant@192.168.33.100's password:\nid_rsa.pub                                     100%  399     0.4KB/s   00:00\n```\n\nnode \u306b ssh \u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3001\u8ee2\u9001\u3057\u305f\u516c\u958b\u9375\u306e\u5185\u5bb9\u3092 ~/.ssh/authorized_keys \u306b\u8ffd\u8a18\u3057\u307e\u3059\u3002\u305d\u306e\u5f8c\u3001\u4e0d\u8981\u306b\u306a\u3063\u305f\u516c\u958b\u9375\u3092\u524a\u9664\u3057\u3066\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ ssh 192.168.33.100\nvagrant@192.168.33.100's password:\nWelcome to your Vagrant-built virtual machine.\n\n[vagrant@localhost ~]$ cat /tmp/id_rsa.pub >> ~/.ssh/authorized_keys\n\n[vagrant@localhost ~]$ rm /tmp/id_rsa.pub\n\n[vagrant@localhost ~]$ logout\nConnection to 192.168.33.100 closed.\n```\n\nworkstation \u304b\u3089 node \u306b\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306a\u3057\u3067 ssh \u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:~$ ssh 192.168.33.100\n\nLast login: Thu Jan 30 05:43:15 2014 from 192.168.33.10\nWelcome to your Vagrant-built virtual machine.\n```\n\n\u4ee5\u4e0a\u3067 workstation \u3068 node \u306e\u9375\u4ea4\u63db\u306f\u5b8c\u4e86\u3067\u3059\u3002\n\n\n## workstation \u304b\u3089 node \u306b\u30ec\u30b7\u30d4\u3092\u9069\u7528\u3059\u308b\n\n\u3044\u3088\u3044\u3088 workstation \u304b\u3089 node \u306b\u30ec\u30b7\u30d4\u3092\u9069\u7528\u3057\u307e\u3059\u3002\n\n### knife configure\n\n\u307e\u305a\u306f workstation \u3067 chef \u306e\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002knife configure \u3059\u308b\u3068\u4f55\u5ea6\u304b\u5165\u529b\u3092\u6c42\u3081\u3089\u308c\u307e\u3059\u304c\u3001\u3059\u3079\u3066\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u69cb\u308f\u306a\u3044\u306e\u3067\u3001\u306a\u306b\u3082\u5165\u529b\u305b\u305a\u306b enter \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nvagrant@precise64:~$ knife configure\nWARNING: No knife configuration file found\nWhere should I put the config file? [/home/vagrant/.chef/knife.rb]\nPlease enter the chef server URL: [https://precise64:443]\nPlease enter an existing username or clientname for the API: [vagrant]\nPlease enter the validation clientname: [chef-validator]\nPlease enter the location of the validation key: [/etc/chef-server/chef-validator.pem]\nPlease enter the path to a chef repository (or leave blank):\n*****\n\nYou must place your client key in:\n  /home/vagrant/.chef/vagrant.pem\nBefore running commands with Knife!\n\n*****\n\nYou must place your validation key in:\n  /etc/chef-server/chef-validator.pem\nBefore generating instance data with Knife!\n\n*****\nConfiguration file written to /home/vagrant/.chef/knife.rb\n```\n\n\u4f5c\u6210\u3055\u308c\u305f knife.rb \u306b\u30d7\u30ed\u30ad\u30b7\u306e\u60c5\u5831\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002your.proxy.host \u3068 9999 \u306f\u81ea\u8eab\u306e\u74b0\u5883\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nvagrant@precise64:~$ vi /home/vagrant/.chef/knife.rb\nvagrant@precise64:~$ cat /home/vagrant/.chef/knife.rb\n(snip)\nhttp_proxy               'your.proxy.host:9999/'\nhttps_proxy              'your.proxy.host:9999/'\n```\n\n### cookbook\n\n\u7d9a\u3044\u3066 cookbook \u3092\u7528\u610f\u3057\u307e\u3059\u3002\u4eca\u56de\u306f [juanje/cookbook-redmine](https://github.com/juanje/cookbook-redmine) \u3092 fork \u3057\u3066 iptables \u3068 subversion \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305f\u30ec\u30b7\u30d4\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\nworkstation \u4e0a\u306b\u4f5c\u696d\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001[garbagetown/cookbook-redmine](https://github.com/garbagetown/cookbook-redmine) \u3092 clone \u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4f59\u8ac7\u3067\u3059\u304c\u3001vagrant \u306f\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u306e /vagrant \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30db\u30b9\u30c8 OS \u4e0a\u306e Vagrantfile \u304c\u5b58\u5728\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3001Winodows7 \u4e0a\u306e SublimeText2 \u306a\u3069\u4f7f\u3044\u6163\u308c\u305f GUI \u30a8\u30c7\u30a3\u30bf\u3067\u30ec\u30b7\u30d4\u3092\u7de8\u96c6\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4f5c\u696d\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092 /vagrant \u5185\u306b\u4f5c\u6210\u3059\u308b\u4fbf\u5229\u3067\u3059\u3002\n\n```bash\nvagrant@precise64:~$ mkdir /vagrant/work; cd /vagrant/work\nvagrant@precise64:/vagrant/work$ git clone https://github.com/garbagetown/cookbook-redmine.git\nCloning into 'cookbook-redmine'...\nremote: Reusing existing pack: 305, done.\nremote: Counting objects: 17, done.\nremote: Compressing objects: 100% (14/14), done.\nremote: Total 322 (delta 2), reused 0 (delta 0)\nReceiving objects: 100% (322/322), 50.05 KiB, done.\nResolving deltas: 100% (145/145), done.\n```\n\nclone \u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u305f\u3089\u3001knife solo prepare \u3092\u5b9f\u884c\u3057\u3066\u30ec\u30b7\u30d4\u3092 node \u306b\u9069\u7528\u3059\u308b\u6e96\u5099\u3092\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:/vagrant/work$ cd cookbook-redmine/\nvagrant@precise64:/vagrant/work/cookbook-redmine$ knife solo prepare 192.168.33.100\nBootstrapping Chef...\n(snip)\nInstalling Chef 11.8.2\ninstalling with rpm...\nwarning: /tmp/install.sh.17099/chef-11.8.2-1.el6.x86_64.rpm: Header V4 DSA/SHA1 Signature, key ID 83ef826a: NOKEY\nPreparing...                ########################################### [100%]\n   1:chef                   ########################################### [100%]\nThank you for installing Chef!\nGenerating node config 'nodes/192.168.33.100.json'...\n```\n\n\u4f5c\u6210\u3055\u308c\u305f json \u306b\u5b9f\u884c\u3059\u308b\u30ec\u30b7\u30d4\u3084 attributes \u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002password \u306f\u81ea\u8eab\u306e\u8a2d\u5b9a\u5024\u306b\u8aad\u307f\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\nvagrant@precise64:/vagrant/work/cookbook-redmine$ vi nodes/192.168.33.100.json\nvagrant@precise64:/vagrant/work/cookbook-redmine$ cat nodes/192.168.33.100.json\n{\n  \"run_list\":[\n    \"redmine\",\n    \"mysql\",\n    \"subversion::server\"\n  ],\n  \"redmine\" : {\n    \"databases\" : {\n      \"production\" : {\n        \"password\" : \"password\"\n      }\n    }\n  },\n  \"mysql\" : {\n    \"server_root_password\" : \"password\",\n    \"server_repl_password\" : \"password\",\n    \"server_debian_password\" : \"password\"\n  }\n}\n```\n\n\u6700\u5f8c\u306b\u3001knife solo cook \u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\nvagrant@precise64:/vagrant/work/cookbook-redmine$ knife solo cook 192.168.33.100\nRunning Chef on 192.168.33.100...\nChecking Chef version...\nInstalling Berkshelf cookbooks to '/home/vagrant/.berkshelf/knife-solo/4cf4f5c173d6b541da0269be1b4eb5e4f9805994'...\nUsing redmine (0.1.0) from metadata\nInstalling apt (2.3.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling yum (2.2.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling iptables (0.12.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling subversion (1.1.2) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling git (2.9.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling dmg (2.1.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling build-essential (1.4.2) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling windows (1.12.8) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling chef_handler (1.1.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling runit (1.5.8) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling yum-epel (0.2.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling apache2 (1.8.14) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling passenger_apache2 (2.1.2) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling mysql (4.0.20) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling openssl (1.1.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling postgresql (3.3.4) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling database (1.6.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling aws (1.0.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nInstalling xfs (1.1.0) from site: 'http://cookbooks.opscode.com/api/v1/cookbooks'\nUploading the kitchen...\n(snip)\nChef Client finished, 137 resources updated\n```\n\n\u30db\u30b9\u30c8 OS \u306e\u30d6\u30e9\u30a6\u30b6\u304b\u3089 http://192.168.33.100/ \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001Redmine \u306e\u30c8\u30c3\u30d7\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\n## \u53c2\u8003\n\n* [Ubuntu\u306evisudo\u30a8\u30c7\u30a3\u30bf\u304c\u5909nano\u306b\u306a\u308b - \u305d\u308c\u30de\u30b0\u3067\uff01](http://takuya-1st.hatenablog.jp/entry/20110423/1303585363)", "tags": ["vagrant", "chef", "Redmine"]}