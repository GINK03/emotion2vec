{"context": " More than 1 year has passed since last update.\n\n\u76ee\u7684\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u306b\u3001WEB\u30b5\u30a4\u30c8\u3092\u898b\u3089\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u884c\u3063\u305f\u3053\u3068\n\u30a2\u30af\u30bb\u30b9\u3092\u3055\u308c\u305f\u969b\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u304c\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5165\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u3001\nwelcome\u30da\u30fc\u30b8\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u3059\u308b\u3002\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u5b9f\u88c5\n\nLoginConfirmInterceptor.java\npublic class LoginConfirmInterceptor extends AbstractInterceptor {\n    private static final long serialVersionUID = 1L;\n\n    // ===================================================================================\n    //          When you inherit the AbstractInterceptor, this methods must be implemented\n    //                                                                            ========\n    @Override\n    public Object invoke(MethodInvocation invocation) throws Throwable {\n        // Failure to meet both conditions , skip to the Login page.\n        return (!isExecuteMethod(invocation) || isLoggedIn()) ? invocation.proceed() : \"/\u98db\u3070\u3057\u305f\u3044\u30a2\u30af\u30b7\u30e7\u30f3/\";\n    }\n\n    /**\n     * Whether or not with a Execute to the executed Action.\n     * \n     * @param invocation\n     * @return If with annotation true\n     */\n    private boolean isExecuteMethod(MethodInvocation invocation) {\n        return invocation.getMethod().isAnnotationPresent(Execute.class);\n    }\n\n    /**\n     * There is Dto on the session , and the userID in Dto\n     * \n     * @return if satisfies both the above conditions true\n     */\n    private boolean isLoggedIn() {\n        UserDto userDto = (UserDto) RequestUtil.getRequest().getSession().getAttribute(\"userDto\");\n        return (userDto != null && userDto.userId != null);\n    }\n}\n\n\n\n\n\u8a2d\u5b9a\u306e\u5909\u66f4\n\n\u51e6\u7406\u5bfe\u8c61\u306b\u3059\u308bAction\n\u51e6\u7406\u5bfe\u8c61\u306b\u3057\u306a\u3044Action\n\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n\ncustomizer.dicon\n<initMethod name=\"addCustomizer\">\n    <arg>\n        <component class=\"org.seasar.framework.container.customizer.AspectCustomizer\">\n            <property name=\"interceptorName\">\"loginConfirmInterceptor\"</property>\n\n            <!-- \u51e6\u7406\u306e\u5bfe\u8c61\u5916\u306b\u306b\u3057\u305f\u3044Action -->\n            <initMethod name=\"addIgnoreClassPattern\">\n            <arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n                <arg>\"Action\u540d\"</arg>\n            </initMethod>\n            <initMethod name=\"addIgnoreClassPattern\">\n                <arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n                <arg>\"Action\u540d\"</arg>\n            </initMethod>\n            <initMethod name=\"addIgnoreClassPattern\">\n                <arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n                <arg>\"Action\u540d\"</arg>\n            </initMethod>\n\n            <!-- \u5bfe\u8c61\u306b\u3057\u305f\u3044\u30af\u30e9\u30b9 -->\n            <initMethod name=\"addClassPattern\">\n                <arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n                <arg>\"\u30af\u30e9\u30b9\u540d\"</arg>\n            </initMethod>\n        </component>\n    </arg>\n</initMethod>\n\n\n\n\n## \u76ee\u7684\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u30fc\u306b\u3001WEB\u30b5\u30a4\u30c8\u3092\u898b\u3089\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u3002\n\n## \u884c\u3063\u305f\u3053\u3068\n\u30a2\u30af\u30bb\u30b9\u3092\u3055\u308c\u305f\u969b\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u304c\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5165\u3063\u3066\u3044\u306a\u3044\u5834\u5408\u3001\nwelcome\u30da\u30fc\u30b8\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3092\u3059\u308b\u3002\n\n## \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n###\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc\u306e\u5b9f\u88c5\n\n```LoginConfirmInterceptor.java\npublic class LoginConfirmInterceptor extends AbstractInterceptor {\n    private static final long serialVersionUID = 1L;\n\n    // ===================================================================================\n    //          When you inherit the AbstractInterceptor, this methods must be implemented\n    //                                                                            ========\n    @Override\n    public Object invoke(MethodInvocation invocation) throws Throwable {\n        // Failure to meet both conditions , skip to the Login page.\n        return (!isExecuteMethod(invocation) || isLoggedIn()) ? invocation.proceed() : \"/\u98db\u3070\u3057\u305f\u3044\u30a2\u30af\u30b7\u30e7\u30f3/\";\n    }\n\n    /**\n     * Whether or not with a Execute to the executed Action.\n     * \n     * @param invocation\n     * @return If with annotation true\n     */\n    private boolean isExecuteMethod(MethodInvocation invocation) {\n        return invocation.getMethod().isAnnotationPresent(Execute.class);\n    }\n\n    /**\n     * There is Dto on the session , and the userID in Dto\n     * \n     * @return if satisfies both the above conditions true\n     */\n    private boolean isLoggedIn() {\n        UserDto userDto = (UserDto) RequestUtil.getRequest().getSession().getAttribute(\"userDto\");\n        return (userDto != null && userDto.userId != null);\n    }\n}\n\n```\n\n###\u8a2d\u5b9a\u306e\u5909\u66f4\n- \u51e6\u7406\u5bfe\u8c61\u306b\u3059\u308bAction\n- \u51e6\u7406\u5bfe\u8c61\u306b\u3057\u306a\u3044Action\n\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n```customizer.dicon\n<initMethod name=\"addCustomizer\">\n\t<arg>\n\t\t<component class=\"org.seasar.framework.container.customizer.AspectCustomizer\">\n\t\t\t<property name=\"interceptorName\">\"loginConfirmInterceptor\"</property>\n\t\n\t\t\t<!-- \u51e6\u7406\u306e\u5bfe\u8c61\u5916\u306b\u306b\u3057\u305f\u3044Action -->\n\t\t\t<initMethod name=\"addIgnoreClassPattern\">\n\t\t\t<arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n\t\t\t\t<arg>\"Action\u540d\"</arg>\n\t\t\t</initMethod>\n\t\t\t<initMethod name=\"addIgnoreClassPattern\">\n\t\t\t\t<arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n\t\t\t\t<arg>\"Action\u540d\"</arg>\n\t\t\t</initMethod>\n\t\t\t<initMethod name=\"addIgnoreClassPattern\">\n\t\t\t\t<arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n\t\t\t\t<arg>\"Action\u540d\"</arg>\n\t\t\t</initMethod>\n\t\n\t\t\t<!-- \u5bfe\u8c61\u306b\u3057\u305f\u3044\u30af\u30e9\u30b9 -->\n\t\t\t<initMethod name=\"addClassPattern\">\n\t\t\t\t<arg>\"\u30d1\u30c3\u30b1\u30fc\u30b8\u540d\"</arg>\n\t\t\t\t<arg>\"\u30af\u30e9\u30b9\u540d\"</arg>\n\t\t\t</initMethod>\n\t\t</component>\n\t</arg>\n</initMethod>\n\n```\n", "tags": ["\u30a4\u30f3\u30bf\u30fc\u30bb\u30d7\u30bf\u30fc", "Java", "SAStruts", "Seasar2"]}