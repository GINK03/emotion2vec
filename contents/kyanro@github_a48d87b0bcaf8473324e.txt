{"context": "\u3053\u306e\u8a18\u4e8b\u306f\u3001\u30b9\u30bf\u30fc\u30c8\u30c8\u30a5\u30c7\u30a4\u5de5\u52d9\u5e97 Advent Calendar 15\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\u306f\u3058\u3081\u306b\n\u6700\u8fd1Rx\u3068\u304bDataBinding\u304c\u6d41\u884c\u3063\u3066\u304d\u3066\u3044\u308b\u7a7a\u6c17\u3092\u3072\u3057\u3072\u3057\u3068\u611f\u3058\u308b\u306e\u3067\u3001\u3053\u306e\u30d3\u30c3\u30b0\u30a6\u30a7\u30fc\u30d6\u306b\u4e57\u308a\u9045\u308c\u306a\u3044\u305f\u3081\u306bfizz buzz\u3057\u307e\u3059\u3002\n\n\u52d5\u4f5c\u4ed5\u69d8\n\n\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u305f\u56de\u6570\u3092\u8868\u793a\u3059\u308b\n\u30dc\u30bf\u30f3\u304c\u30bf\u30c3\u30d7\u3055\u308c\u305f\u56de\u6570\u304c3\u3067\u5272\u308a\u5207\u308c\u308b\u306a\u3089 fizz \u306eView\u3092\u8868\u793a\u3059\u308b\u3002\u5272\u308a\u5207\u308c\u306a\u3044\u306a\u3089\u975e\u8868\u793a\u306b\u3059\u308b\n\u30dc\u30bf\u30f3\u304c\u30bf\u30c3\u30d7\u3055\u308c\u305f\u56de\u6570\u304c5\u3067\u5272\u308a\u5207\u308c\u308b\u306a\u3089 buzz \u306eView\u3092\u8868\u793a\u3059\u308b\u3002\u5272\u308a\u5207\u308c\u306a\u3044\u306a\u3089\u975e\u8868\u793a\u306b\u3059\u308b\n\n\u4e0b\u8a18\u306e3\u30d1\u30bf\u30fc\u30f3\u3067\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n1. \u4eca\u307e\u3067\u306e\u5ef6\u9577\u4e0a\u306bRx\u3092\u53d6\u308a\u5165\u308c\u308b\u30d1\u30bf\u30fc\u30f3\n2. \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5206\u5c90\u3092\u3064\u304b\u3063\u3066\u3001Rx\u3063\u307d\u304f\u3057\u3066\u307f\u308b\u30d1\u30bf\u30fc\u30f3\n3. RxProperty\u3092\u5229\u7528\u3057\u3066\u3001Binding\u3057\u3066\u308b\u611f\u3092\u9ad8\u3081\u305f\u30d1\u30bf\u30fc\u30f3\n\u3067\u306f\u9806\u756a\u306b\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u5b9f\u88c5\n\n\u4eca\u307e\u3067\u306e\u5ef6\u9577\u4e0a\u306bRx\u3092\u53d6\u308a\u5165\u308c\u308b\u30d1\u30bf\u30fc\u30f3\nMainActivity.kt\nactivity_main.xml\nRx\u3092\u5229\u7528\u3057\u305f\u90e8\u5206\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3002\u4eca\u307e\u3067\u306e\u5ef6\u9577\u4e0a\u3001\u3068\u611f\u3058\u308b\u90e8\u5206\u306f\n\n\u4e00\u3064\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u3060\u3051\u3092\u5229\u7528\u3057\u3066\u3001subscribe\u6642\u306b\u30bf\u30c3\u30d7\u6570\u304b\u3089\u8868\u793a\u3001\u975e\u8868\u793a\u306e\u5224\u5b9a\u3092\u3057\u3066\u3044\u308b\u90e8\u5206\n\ninit {\n    buttonTapStream\n            .map({ event -> 1 })\n            .scan({ sum, n -> sum + n })\n            .subscribe({ n: Int ->\n                count = n.toString()\n                activity.setFizzEnabled(n % 3 == 0)\n                activity.setBuzzEnabled(n % 5 == 0)\n            })\n}\n\n\n\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5206\u5c90\u3092\u3064\u304b\u3063\u3066\u3001Rx\u3063\u307d\u304f\u3057\u3066\u307f\u308b\u30d1\u30bf\u30fc\u30f3\n1\u306e\u5b9f\u88c5\u304c\u7279\u306b\u60aa\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304fRx\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u305d\u308c\u3063\u307d\u3044\u5f62\u3067\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002\nMainActivity.kt\nactivity_main.xml\nRx\u3063\u307d\u3044\u304b\u306a\u3068\u611f\u3058\u308b\u90e8\u5206\u306f\u3001\u5404\u30d3\u30e5\u30fc\u7528\u306b\u305d\u308c\u305e\u308cStream\u3092\u5206\u5c90\u3055\u305b\u3066\u3044\u308b\u3042\u305f\u308a\u3067\u3059\u3002\n\u307e\u305f\u3001\u305d\u306e\u7d50\u679c\u3092DataBinding\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u76f4\u63a5View\u306bBind\u3067\u304d\u308b\u3068\u3053\u308d\u304c\u500b\u4eba\u7684\u306b\u306f\u9ad8\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002(\u4eca\u56de\u306ffizz,buzz\u7528\u306b\u6e96\u5099\u3057\u305fView\u306eVisibility\u306bBind\u3057\u3066\u3044\u307e\u3059\u3002)\ninit {\n    val countStream = buttonTapStream\n            .map({ event -> 1 })\n            .scan({ sum, n -> sum + n })\n            .publish()\n            .refCount()\n    countStream.subscribe({ n -> count = n.toString() })\n\n    val fizzStream = countStream.map({ n -> n % 3 == 0 })\n    fizzStream.subscribe({ isShown ->\n        fizzVisibility = if (isShown) View.VISIBLE else View.INVISIBLE\n    })\n\n    val buzzStream = countStream.map({ n -> n % 5 == 0 })\n    buzzStream.subscribe({ isShown ->\n        buzzVisibility = if (isShown) View.VISIBLE else View.INVISIBLE\n    })\n}\n\n\nRxProperty\u3092\u5229\u7528\u3057\u3066\u3001Binding\u3057\u3066\u308b\u611f\u3092\u9ad8\u3081\u305f\u30d1\u30bf\u30fc\u30f3\n2\u306e\u5b9f\u88c5\u304c\u60aa\u3044\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u81ea\u5206\u3067setter\u306b\u901a\u77e5\u306e\u51e6\u7406\u3092\u66f8\u3044\u305f\u308a\u3059\u308b\u306e\u306f\u3001\u30b3\u30fc\u30c9\u3082\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3057\u3001\u30d0\u30b0\u306e\u3082\u3068\u306b\u3082\u306a\u308b\u306e\u3067\u304d\u308b\u306a\u3089\u3084\u308a\u305f\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067RxProperty\u3092\u5229\u7528\u3057\u3066\u3001\u305d\u306e\u3042\u305f\u308a\u3092\u3046\u307e\u3044\u3053\u3068\u89e3\u6c7a\u3057\u305f\u30d1\u30bf\u30fc\u30f3\u304c\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\n\u500b\u4eba\u7684\u306b\u306f\u3053\u306e\u66f8\u304d\u65b9\u304c\u4e00\u756a\u3059\u304d\u3067\u3059\u3002(\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u3001\u30b3\u30fc\u30c9\u77ed\u3044\u3001Rx\u611f\u304c\u6f02\u3063\u3066\u3044\u308b)\n\u77ed\u3044\u306e\u3067\u30bd\u30fc\u30b9\u3092\u5168\u90e8\u306e\u305b\u3066\u307f\u307e\u3059\u3002\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n    >\n\n    <data>\n\n        <variable\n            name=\"viewModel\"\n            type=\"kyanro.com.androidrxfizzbuzzsample.MainActivity.ViewModel\"\n            />\n    </data>\n\n    <LinearLayout\n        android:id=\"@+id/activity_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\"\n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"\n        tools:context=\"kyanro.com.androidrxfizzbuzzsample.MainActivity\"\n        >\n\n        <Button\n            android:id=\"@+id/button\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"24dp\"\n            android:text=\"tap me\"\n            />\n\n        <TextView\n            android:id=\"@+id/count\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"32dp\"\n            android:text=\"@{viewModel.count.value}\"\n            />\n\n        <TextView\n            android:id=\"@+id/fizz\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"32dp\"\n            android:visibility=\"@{viewModel.fizzVisibility.value}\"\n            android:text=\"Fizz!\"\n            />\n\n        <TextView\n            android:id=\"@+id/buzz\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"32dp\"\n            android:visibility=\"@{viewModel.buzzVisibility.value}\"\n            android:text=\"Buzz!\"\n            />\n\n\n    </LinearLayout>\n</layout>\n\nclass MainActivity : AppCompatActivity() {\n\n    val binding: ActivityMainBinding by lazy {\n        DataBindingUtil.setContentView<ActivityMainBinding>(this, R.layout.activity_main)\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val viewModel = ViewModel(RxView.clicks(binding.button))\n        binding.viewModel = viewModel\n    }\n\n    class ViewModel(buttonTapStream: rx.Observable<Void>) {\n        val count: ReadOnlyRxProperty<String>\n\n        val fizzVisibility: ReadOnlyRxProperty<Int>\n        val buzzVisibility: ReadOnlyRxProperty<Int>\n\n        init {\n            val countStream = buttonTapStream\n                    .map({ event -> 1 })\n                    .scan({ sum, n -> sum + n })\n                    .publish()\n                    .refCount()\n            count = countStream.map(Int::toString)\n                    .toRxProperty(\"0\")\n\n            fizzVisibility = countStream\n                    .map({ n -> if (n % 3 == 0) View.VISIBLE else View.INVISIBLE })\n                    .toRxProperty(View.VISIBLE)\n\n            buzzVisibility = countStream\n                    .map({ n -> if (n % 5 == 0) View.VISIBLE else View.INVISIBLE })\n                    .toRxProperty(View.VISIBLE)\n        }\n    }\n}\n\n\n\n\u307e\u3068\u3081\nkotlin, DataBinding, RxJava, RxProperty \u3092\u5229\u7528\u3059\u308b\u3068\n\nfizz buzz\u304c\u77ed\u304f\u304b\u3051\u308b\n\u30d0\u30b0\u304c\u5165\u308a\u8fbc\u307f\u306b\u304f\u305d\u3046\u306a\u30b3\u30fc\u30c9\u304c\u304b\u3051\u308b\n\u30c6\u30b9\u30c8\u3057\u3084\u3059\u305d\u3046\u306a\u30b3\u30fc\u30c9\u304c\u304b\u3051\u308b\n\n\u5b9f\u969b\u306b\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u306e\u304b\u3001\u3068\u3044\u3046\u306e\u306f\u4eca\u5f8c\u8a66\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u306f\u3001[\u30b9\u30bf\u30fc\u30c8\u30c8\u30a5\u30c7\u30a4\u5de5\u52d9\u5e97 Advent Calendar](http://qiita.com/advent-calendar/2016/stk) 15\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n# \u306f\u3058\u3081\u306b\n\u6700\u8fd1Rx\u3068\u304bDataBinding\u304c\u6d41\u884c\u3063\u3066\u304d\u3066\u3044\u308b\u7a7a\u6c17\u3092\u3072\u3057\u3072\u3057\u3068\u611f\u3058\u308b\u306e\u3067\u3001\u3053\u306e\u30d3\u30c3\u30b0\u30a6\u30a7\u30fc\u30d6\u306b\u4e57\u308a\u9045\u308c\u306a\u3044\u305f\u3081\u306bfizz buzz\u3057\u307e\u3059\u3002\n\n# \u52d5\u4f5c\u4ed5\u69d8\n+ \u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u305f\u56de\u6570\u3092\u8868\u793a\u3059\u308b\n+ \u30dc\u30bf\u30f3\u304c\u30bf\u30c3\u30d7\u3055\u308c\u305f\u56de\u6570\u304c3\u3067\u5272\u308a\u5207\u308c\u308b\u306a\u3089 fizz \u306eView\u3092\u8868\u793a\u3059\u308b\u3002\u5272\u308a\u5207\u308c\u306a\u3044\u306a\u3089\u975e\u8868\u793a\u306b\u3059\u308b\n+ \u30dc\u30bf\u30f3\u304c\u30bf\u30c3\u30d7\u3055\u308c\u305f\u56de\u6570\u304c5\u3067\u5272\u308a\u5207\u308c\u308b\u306a\u3089 buzz \u306eView\u3092\u8868\u793a\u3059\u308b\u3002\u5272\u308a\u5207\u308c\u306a\u3044\u306a\u3089\u975e\u8868\u793a\u306b\u3059\u308b\n\n\u4e0b\u8a18\u306e3\u30d1\u30bf\u30fc\u30f3\u3067\u3084\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n1. \u4eca\u307e\u3067\u306e\u5ef6\u9577\u4e0a\u306bRx\u3092\u53d6\u308a\u5165\u308c\u308b\u30d1\u30bf\u30fc\u30f3\n2. \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5206\u5c90\u3092\u3064\u304b\u3063\u3066\u3001Rx\u3063\u307d\u304f\u3057\u3066\u307f\u308b\u30d1\u30bf\u30fc\u30f3\n3. [RxProperty](https://github.com/k-kagurazaka/rx-property-android)\u3092\u5229\u7528\u3057\u3066\u3001Binding\u3057\u3066\u308b\u611f\u3092\u9ad8\u3081\u305f\u30d1\u30bf\u30fc\u30f3\n\n\u3067\u306f\u9806\u756a\u306b\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n# \u5b9f\u88c5\n## \u4eca\u307e\u3067\u306e\u5ef6\u9577\u4e0a\u306bRx\u3092\u53d6\u308a\u5165\u308c\u308b\u30d1\u30bf\u30fc\u30f3\n[MainActivity.kt](https://github.com/kyanro/AndroidRxFizzBuzz/blob/488a0e68d9ee729345ab01d5d3bf1fcbfa96e973/app/src/main/kotlin/kyanro/com/androidrxfizzbuzzsample/MainActivity.kt)\n[activity_main.xml](https://github.com/kyanro/AndroidRxFizzBuzz/blob/488a0e68d9ee729345ab01d5d3bf1fcbfa96e973/app/src/main/res/layout/activity_main.xml)\n\nRx\u3092\u5229\u7528\u3057\u305f\u90e8\u5206\u306f\u4e0b\u8a18\u306e\u901a\u308a\u3002\u4eca\u307e\u3067\u306e\u5ef6\u9577\u4e0a\u3001\u3068\u611f\u3058\u308b\u90e8\u5206\u306f\n\n+ \u4e00\u3064\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u3060\u3051\u3092\u5229\u7528\u3057\u3066\u3001subscribe\u6642\u306b\u30bf\u30c3\u30d7\u6570\u304b\u3089\u8868\u793a\u3001\u975e\u8868\u793a\u306e\u5224\u5b9a\u3092\u3057\u3066\u3044\u308b\u90e8\u5206\n\n```kotlin\ninit {\n    buttonTapStream\n            .map({ event -> 1 })\n            .scan({ sum, n -> sum + n })\n            .subscribe({ n: Int ->\n                count = n.toString()\n                activity.setFizzEnabled(n % 3 == 0)\n                activity.setBuzzEnabled(n % 5 == 0)\n            })\n}\n```\n\n## \u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5206\u5c90\u3092\u3064\u304b\u3063\u3066\u3001Rx\u3063\u307d\u304f\u3057\u3066\u307f\u308b\u30d1\u30bf\u30fc\u30f3\n1\u306e\u5b9f\u88c5\u304c\u7279\u306b\u60aa\u3044\u3068\u3044\u3046\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304fRx\u3092\u5229\u7528\u3059\u308b\u306e\u3067\u305d\u308c\u3063\u307d\u3044\u5f62\u3067\u5b9f\u88c5\u3057\u3066\u307f\u307e\u3059\u3002\n[MainActivity.kt](https://github.com/kyanro/AndroidRxFizzBuzz/blob/89b903a71d9948d583d8a03d2521d3b27ec54887/app/src/main/kotlin/kyanro/com/androidrxfizzbuzzsample/MainActivity.kt)\n[activity_main.xml](https://github.com/kyanro/AndroidRxFizzBuzz/blob/89b903a71d9948d583d8a03d2521d3b27ec54887/app/src/main/res/layout/activity_main.xml)\n\nRx\u3063\u307d\u3044\u304b\u306a\u3068\u611f\u3058\u308b\u90e8\u5206\u306f\u3001\u5404\u30d3\u30e5\u30fc\u7528\u306b\u305d\u308c\u305e\u308cStream\u3092\u5206\u5c90\u3055\u305b\u3066\u3044\u308b\u3042\u305f\u308a\u3067\u3059\u3002\n\u307e\u305f\u3001\u305d\u306e\u7d50\u679c\u3092DataBinding\u306e\u6a5f\u80fd\u3092\u5229\u7528\u3057\u3066\u76f4\u63a5View\u306bBind\u3067\u304d\u308b\u3068\u3053\u308d\u304c\u500b\u4eba\u7684\u306b\u306f\u9ad8\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002(\u4eca\u56de\u306ffizz,buzz\u7528\u306b\u6e96\u5099\u3057\u305fView\u306eVisibility\u306bBind\u3057\u3066\u3044\u307e\u3059\u3002)\n\n```kotlin\ninit {\n    val countStream = buttonTapStream\n            .map({ event -> 1 })\n            .scan({ sum, n -> sum + n })\n            .publish()\n            .refCount()\n    countStream.subscribe({ n -> count = n.toString() })\n\n    val fizzStream = countStream.map({ n -> n % 3 == 0 })\n    fizzStream.subscribe({ isShown ->\n        fizzVisibility = if (isShown) View.VISIBLE else View.INVISIBLE\n    })\n\n    val buzzStream = countStream.map({ n -> n % 5 == 0 })\n    buzzStream.subscribe({ isShown ->\n        buzzVisibility = if (isShown) View.VISIBLE else View.INVISIBLE\n    })\n}\n```\n\n## [RxProperty](https://github.com/k-kagurazaka/rx-property-android)\u3092\u5229\u7528\u3057\u3066\u3001Binding\u3057\u3066\u308b\u611f\u3092\u9ad8\u3081\u305f\u30d1\u30bf\u30fc\u30f3\n\n2\u306e\u5b9f\u88c5\u304c\u60aa\u3044\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u81ea\u5206\u3067setter\u306b\u901a\u77e5\u306e\u51e6\u7406\u3092\u66f8\u3044\u305f\u308a\u3059\u308b\u306e\u306f\u3001\u30b3\u30fc\u30c9\u3082\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3057\u3001\u30d0\u30b0\u306e\u3082\u3068\u306b\u3082\u306a\u308b\u306e\u3067\u304d\u308b\u306a\u3089\u3084\u308a\u305f\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n\u305d\u3053\u3067RxProperty\u3092\u5229\u7528\u3057\u3066\u3001\u305d\u306e\u3042\u305f\u308a\u3092\u3046\u307e\u3044\u3053\u3068\u89e3\u6c7a\u3057\u305f\u30d1\u30bf\u30fc\u30f3\u304c\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u500b\u4eba\u7684\u306b\u306f\u3053\u306e\u66f8\u304d\u65b9\u304c\u4e00\u756a\u3059\u304d\u3067\u3059\u3002(\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u3001\u30b3\u30fc\u30c9\u77ed\u3044\u3001Rx\u611f\u304c\u6f02\u3063\u3066\u3044\u308b)\n\n\u77ed\u3044\u306e\u3067\u30bd\u30fc\u30b9\u3092\u5168\u90e8\u306e\u305b\u3066\u307f\u307e\u3059\u3002\n\n```kotlin\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<layout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n    >\n\n    <data>\n\n        <variable\n            name=\"viewModel\"\n            type=\"kyanro.com.androidrxfizzbuzzsample.MainActivity.ViewModel\"\n            />\n    </data>\n\n    <LinearLayout\n        android:id=\"@+id/activity_main\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:orientation=\"vertical\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\"\n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"\n        tools:context=\"kyanro.com.androidrxfizzbuzzsample.MainActivity\"\n        >\n\n        <Button\n            android:id=\"@+id/button\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"24dp\"\n            android:text=\"tap me\"\n            />\n\n        <TextView\n            android:id=\"@+id/count\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"32dp\"\n            android:text=\"@{viewModel.count.value}\"\n            />\n\n        <TextView\n            android:id=\"@+id/fizz\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"32dp\"\n            android:visibility=\"@{viewModel.fizzVisibility.value}\"\n            android:text=\"Fizz!\"\n            />\n\n        <TextView\n            android:id=\"@+id/buzz\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:layout_marginBottom=\"32dp\"\n            android:visibility=\"@{viewModel.buzzVisibility.value}\"\n            android:text=\"Buzz!\"\n            />\n\n\n    </LinearLayout>\n</layout>\n```\n\n```kotlin\nclass MainActivity : AppCompatActivity() {\n\n    val binding: ActivityMainBinding by lazy {\n        DataBindingUtil.setContentView<ActivityMainBinding>(this, R.layout.activity_main)\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        val viewModel = ViewModel(RxView.clicks(binding.button))\n        binding.viewModel = viewModel\n    }\n\n    class ViewModel(buttonTapStream: rx.Observable<Void>) {\n        val count: ReadOnlyRxProperty<String>\n\n        val fizzVisibility: ReadOnlyRxProperty<Int>\n        val buzzVisibility: ReadOnlyRxProperty<Int>\n\n        init {\n            val countStream = buttonTapStream\n                    .map({ event -> 1 })\n                    .scan({ sum, n -> sum + n })\n                    .publish()\n                    .refCount()\n            count = countStream.map(Int::toString)\n                    .toRxProperty(\"0\")\n\n            fizzVisibility = countStream\n                    .map({ n -> if (n % 3 == 0) View.VISIBLE else View.INVISIBLE })\n                    .toRxProperty(View.VISIBLE)\n\n            buzzVisibility = countStream\n                    .map({ n -> if (n % 5 == 0) View.VISIBLE else View.INVISIBLE })\n                    .toRxProperty(View.VISIBLE)\n        }\n    }\n}\n```\n\n![fizzbuzz.gif](https://qiita-image-store.s3.amazonaws.com/0/18789/0d3659ef-bfca-1dae-d1d6-287c3f95147f.gif)\n\n\n# \u307e\u3068\u3081\nkotlin, DataBinding, RxJava, RxProperty \u3092\u5229\u7528\u3059\u308b\u3068\n\n+ fizz buzz\u304c\u77ed\u304f\u304b\u3051\u308b\n+ \u30d0\u30b0\u304c\u5165\u308a\u8fbc\u307f\u306b\u304f\u305d\u3046\u306a\u30b3\u30fc\u30c9\u304c\u304b\u3051\u308b\n+ \u30c6\u30b9\u30c8\u3057\u3084\u3059\u305d\u3046\u306a\u30b3\u30fc\u30c9\u304c\u304b\u3051\u308b\n\n\u5b9f\u969b\u306b\u30c6\u30b9\u30c8\u3057\u3084\u3059\u3044\u306e\u304b\u3001\u3068\u3044\u3046\u306e\u306f\u4eca\u5f8c\u8a66\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Android", "Kotlin", "DataBinding", "RxJava", "RxProperty"]}