{"context": " More than 1 year has passed since last update.\n\n\u524d\u56de\n\uff11\uff1ahttp://qiita.com/GushiSnow/items/cc1440e0a8ea199e78c5\n\uff12\uff1ahttp://qiita.com/GushiSnow/items/a24cad7231de341738ee\n\uff13\uff1ahttp://qiita.com/GushiSnow/items/e099baf9d1c2e72cb3d1\n\uff14\uff1ahttp://qiita.com/GushiSnow/items/d431a5c49dc4206def2d\n\n\u30b0\u30e9\u30d5\u4f5c\u6210\n\n\u30c7\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u524d\u306e\u4f5c\u696d\u3067\u30b0\u30e9\u30d5\u4f5c\u6210\u4f5c\u696d\u304c\u3042\u308b\u3002\n\u4e0b\u8a18\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u53ef\u80fd\n\"--mono\"       #\u30e2\u30ce\u30d5\u30a9\u30f3   \n\"--quinphone\"  #\u30af\u30a4\u30f3\u30d5\u30a9\u30f3\n\"--reverse\"    #\u9006\u9806\n\"--transition-scale\" #\u30b9\u30b1\u30fc\u30eb\u5909\u63db\n\"--self-loop-scale\"  #\u81ea\u5df1\u5b66\u7fd2\u306e\u56de\u6570\u30b9\u30b1\u30fc\u30eb\n\n\nLG\u306e\u30b0\u30e9\u30d5\uff08\u8a00\u8a9e\u30e2\u30c7\u30eb\u3068\u97f3\u7d20\u306e\u30e2\u30c7\u30eb\u306e\u7d50\u5408\uff09\u3092\u4f5c\u6210\nLG\u306e\u30b0\u30e9\u30d5\uff08\u8a00\u8a9e\u30e2\u30c7\u30eb\u3068\u97f3\u7d20\u306e\u30e2\u30c7\u30eb\u306e\u7d50\u5408\uff09\u3092\u4f5c\u6210\nepsilons\u306e\u9664\u53bb\u3068\u6c7a\u5b9a\nFST after encoding\u306e\u6700\u5c0f\u5316\nfsttablecompose $lang/L_disambig.fst $lang/G.fst |\n\nfstdeterminizestar --use-log=true|\n\nfstminimizeencoded | fstarcsort --sort_type=ilabel > $lang/tmp/LG.fst\n\n\nCLG\u306e\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\n\u6587\u8108\u4f9d\u5b58\u306eLG\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\n\u305d\u308c\u305e\u308c\u306e\u7d4c\u8def\u306b\u5bfe\u3057\u3066\u30bd\u30fc\u30c8\nfstcomposecontext --context-size=$N --central-position=$P --read-disambig-syms=$lang/phones/disambig.int --write-disambig-syms=$lang/tmp/disambig_ilabels_${N}_${P}.int $lang/tmp/ilabels_${N}_${P} < $lang/tmp/LG.fst|\n\nfstarcsort --sort_type=ilabel > $clg\n\nfstisstochastic $clg  || echo \"[info]: CLG not stochastic.\"\n\n\u6587\u8108\u3001\u5358\u8a9e\u3001\u97f3\u7d20\u306b\u52a0\u3048\u3066HMM\u306e\u8981\u7d20\u3082\u52a0\u3048\u305fHCLG\u3092\u4f5c\u6210\u3059\u308b\u3002\nif [[ ! -s $dir/Ha.fst || $dir/Ha.fst -ot $model  \\\n    || $dir/Ha.fst -ot $lang/tmp/ilabels_${N}_${P} ]]; then\n  if $reverse; then\n    make-h-transducer --reverse=true --push_weights=true \\\n      --disambig-syms-out=$dir/disambig_tid.int \\\n      --transition-scale=$tscale $lang/tmp/ilabels_${N}_${P} $tree $model \\\n      > $dir/Ha.fst  || exit 1;\n  else\n    make-h-transducer --disambig-syms-out=$dir/disambig_tid.int \\\n      --transition-scale=$tscale $lang/tmp/ilabels_${N}_${P} $tree $model \\\n       > $dir/Ha.fst  || exit 1;\n  fi\nfi\n\nif [[ ! -s $dir/HCLGa.fst || $dir/HCLGa.fst -ot $dir/Ha.fst || \\\n      $dir/HCLGa.fst -ot $clg ]]; then\n  fsttablecompose $dir/Ha.fst $clg | fstdeterminizestar --use-log=true \\\n    | fstrmsymbols $dir/disambig_tid.int | fstrmepslocal | \\\n     fstminimizeencoded > $dir/HCLGa.fst || exit 1;\n  fstisstochastic $dir/HCLGa.fst || echo \"HCLGa is not stochastic\"\nfi\n\n\n#\u524d\u56de\n\n\uff11\uff1ahttp://qiita.com/GushiSnow/items/cc1440e0a8ea199e78c5\n\n\uff12\uff1ahttp://qiita.com/GushiSnow/items/a24cad7231de341738ee\n\n\uff13\uff1ahttp://qiita.com/GushiSnow/items/e099baf9d1c2e72cb3d1\n\n\uff14\uff1ahttp://qiita.com/GushiSnow/items/d431a5c49dc4206def2d\n\n#\u30b0\u30e9\u30d5\u4f5c\u6210\n\n##\u30c7\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u524d\u306e\u4f5c\u696d\u3067\u30b0\u30e9\u30d5\u4f5c\u6210\u4f5c\u696d\u304c\u3042\u308b\u3002\n\n\u4e0b\u8a18\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6307\u5b9a\u53ef\u80fd\n\n```shell-session\n\"--mono\"       #\u30e2\u30ce\u30d5\u30a9\u30f3   \n\"--quinphone\"  #\u30af\u30a4\u30f3\u30d5\u30a9\u30f3\n\"--reverse\"    #\u9006\u9806\n\"--transition-scale\" #\u30b9\u30b1\u30fc\u30eb\u5909\u63db\n\"--self-loop-scale\"  #\u81ea\u5df1\u5b66\u7fd2\u306e\u56de\u6570\u30b9\u30b1\u30fc\u30eb\n```\n\n##LG\u306e\u30b0\u30e9\u30d5\uff08\u8a00\u8a9e\u30e2\u30c7\u30eb\u3068\u97f3\u7d20\u306e\u30e2\u30c7\u30eb\u306e\u7d50\u5408\uff09\u3092\u4f5c\u6210\n\nLG\u306e\u30b0\u30e9\u30d5\uff08\u8a00\u8a9e\u30e2\u30c7\u30eb\u3068\u97f3\u7d20\u306e\u30e2\u30c7\u30eb\u306e\u7d50\u5408\uff09\u3092\u4f5c\u6210\nepsilons\u306e\u9664\u53bb\u3068\u6c7a\u5b9a\nFST after encoding\u306e\u6700\u5c0f\u5316\n\n```shell-session\nfsttablecompose $lang/L_disambig.fst $lang/G.fst |\n\nfstdeterminizestar --use-log=true|\n\nfstminimizeencoded | fstarcsort --sort_type=ilabel > $lang/tmp/LG.fst\n```\n\n##CLG\u306e\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\n\n\u6587\u8108\u4f9d\u5b58\u306eLG\u30b0\u30e9\u30d5\u3092\u4f5c\u6210\n\u305d\u308c\u305e\u308c\u306e\u7d4c\u8def\u306b\u5bfe\u3057\u3066\u30bd\u30fc\u30c8\n\n```shell-session\nfstcomposecontext --context-size=$N --central-position=$P --read-disambig-syms=$lang/phones/disambig.int --write-disambig-syms=$lang/tmp/disambig_ilabels_${N}_${P}.int $lang/tmp/ilabels_${N}_${P} < $lang/tmp/LG.fst|\n\nfstarcsort --sort_type=ilabel > $clg\n  \nfstisstochastic $clg  || echo \"[info]: CLG not stochastic.\"\n```\n\u6587\u8108\u3001\u5358\u8a9e\u3001\u97f3\u7d20\u306b\u52a0\u3048\u3066HMM\u306e\u8981\u7d20\u3082\u52a0\u3048\u305fHCLG\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```shell-session\nif [[ ! -s $dir/Ha.fst || $dir/Ha.fst -ot $model  \\\n    || $dir/Ha.fst -ot $lang/tmp/ilabels_${N}_${P} ]]; then\n  if $reverse; then\n    make-h-transducer --reverse=true --push_weights=true \\\n      --disambig-syms-out=$dir/disambig_tid.int \\\n      --transition-scale=$tscale $lang/tmp/ilabels_${N}_${P} $tree $model \\\n      > $dir/Ha.fst  || exit 1;\n  else\n    make-h-transducer --disambig-syms-out=$dir/disambig_tid.int \\\n      --transition-scale=$tscale $lang/tmp/ilabels_${N}_${P} $tree $model \\\n       > $dir/Ha.fst  || exit 1;\n  fi\nfi\n\nif [[ ! -s $dir/HCLGa.fst || $dir/HCLGa.fst -ot $dir/Ha.fst || \\\n      $dir/HCLGa.fst -ot $clg ]]; then\n  fsttablecompose $dir/Ha.fst $clg | fstdeterminizestar --use-log=true \\\n    | fstrmsymbols $dir/disambig_tid.int | fstrmepslocal | \\\n     fstminimizeencoded > $dir/HCLGa.fst || exit 1;\n  fstisstochastic $dir/HCLGa.fst || echo \"HCLGa is not stochastic\"\nfi\n\n```\n\n", "tags": ["\u97f3\u58f0\u8a8d\u8b58", "Kaldi"]}