{"tags": ["Caffe", "MacOSX", "Python", "DeepLearning"], "context": " More than 1 year has passed since last update.2015\u5e744\u670822\u65e5\u73fe\u5728\u306e\u60c5\u5831\u3067\u3059\ncaffe\u306f\u983b\u7e41\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u884c\u3046\u306e\u3067\u4eca\u73fe\u5728\u52d5\u304f\u304b\u306f\u4fdd\u8a3c\u3057\u304b\u306d\u307e\u3059\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u3092\u7528\u3044\u3066\u753b\u50cf\u5224\u5225\u3092\u3057\u307e\u3059\uff0e\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30ebbvlc_reference_caffenet.caffemodel\u3068classify.py\u3092\u4f7f\u7528\u3057\u305f\u753b\u50cf\u8b58\u5225\u306b\u3064\u3044\u3066\u307e\u3067\u3067\u3059\uff0e\n\ncaffe\u3068\u306f\n\u30c7\u30a3\u30fc\u30d7\u30e9\u30fc\u30cb\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\u975e\u5e38\u306b\u9ad8\u901f\u304b\u3064\u958b\u767a\u304c\u6d3b\u767a\u3067\u4eba\u6c17\u306e\u9ad8\u3044\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\n\u8a73\u3057\u304f\u306f\u516c\u5f0f\u3092\u898b\u307e\u3057\u3087\u3046\nhttp://caffe.berkeleyvision.org/\n\u5c11\u3057\u6027\u80fd\u3092\u898b\u305f\u3044\u65b9\u306f\nCaffe Demos\n\u306b\u5206\u985e\u3057\u305f\u3044\u753b\u50cf\u306eURL\u3092\u8cbc\u308b\u3068\n\u516c\u5f0f\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u3067\u753b\u50cf\u5206\u985e\u3092\u884c\u3063\u3066\u304f\u308c\u307e\u3059\n\nMacOSX10.10.3(yosemite)\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3082\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\nOS X 10.10\uff08Yosemite\uff09\u306bCaffe\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff08libstdc++\u554f\u984c\u89e3\u6c7a\uff09\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u74b0\u5883\u306b\u3064\u3044\u3066\n\u30fbiMac 27-inch, Late 2013\n\u30fbCPU 3.5 GHz Intel Core i7\n\u30fb16 GB 1600 MHz DDR3\n\u30fbGPU NVIDIA GeForce GTX 775M 2048 MB\n\u30fbOS MaxOSX10.10.3 yosemite\n\n\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\n\nPython\n\u516c\u5f0f\u3067Anaconda\u3092\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067Anaconda-2.1.0\u3092\u4f7f\u7528\nAnaconda\u3068\u306fpython\u306b\u6570\u5024\u8a08\u7b97\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306b\u3044\u308d\u3093\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5c0e\u5165\u3057\u305f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\u3053\u308c\u3092\u4f7f\u7528\u3057\u307e\u3059\npyenv\u306b\u3088\u3063\u3066\u7ba1\u7406\u3059\u308b\npyenv\u3092\u4f7f\u3063\u3066Mac\u306bPython\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\n\u3092\u53c2\u8003\u306b\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\n\u672c\u7a3f\u3067\u306fbrew\u3092\u4f7f\u7528\u305b\u305a\u306bpyenv\u3092\u30db\u30fc\u30e0\u30c7\u30a3\u30af\u30c8\u30ea\u306b\u4f5c\u6210\npython\u74b0\u5883\u3092Anaconda\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\n2\u7cfb\u30683\u7cfb\u304c\u3042\u308a\u307e\u3059\u304c2\u7cfb\u304c\u30d9\u30bf\u30fc\u304b\u3068\npyenv install anaconda-2.1.0\npyenv global anaconda-2.1.0\npyenv local anaconda-2.1.0\n\nanaconda-2.1.0\u306b\u3059\u3067\u306b\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u304c\u3001\u4e00\u5fdc\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\npip install -r caffe/python/python/requirements.txt\n\n\u3067\u5fc5\u8981\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5c0e\u5165\u3057\u307e\u3057\u3087\u3046\n\nCUDA7.0\nNAVIDIA\u304b\u30897.0\u4ee5\u4e0a\u3092\u5c0e\u5165\n\u73fe\u5728\u306f\u6b63\u5f0f\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u306e\u3067\u767b\u9332\u4e0d\u8981\n7.0\u4ee5\u4e0a\u3067\u3042\u308c\u3070libc++\u3067\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u53ef\u80fd\nNAVIDIA CUDA7 Downloads\n\n\u305d\u306e\u4ed6\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\nHomebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\nbrew install --fresh -vd snappy leveldb gflags glog szip lmdb\n\n\nboost boost-python\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3061\u307e\u305f\u3067\u306fver1.55\u3067\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u3068\u3044\u3046\u60c5\u5831\u304c\u3042\u308a\u307e\u3057\u305f\u304c\nboost1.57 \u3068 boost-python1.57\u3067\u52d5\u3044\u305f\u306e\u3067\u305d\u306e\u307e\u307e\nbrew install --build-from-source --fresh -vd boost boost-python\n\n\nprotobuf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5fc5\u305a--with-python\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\n\u3064\u3051\u306a\u3044\u3068\u3001\u30d3\u30eb\u30c9\u6642\u306bPROTOC\u3046\u3093\u306c\u3093\u3068\u6012\u3089\u308c\u307e\u3059\nbrew install --build-from-source --with-python --fresh -vd protobuf\n\n\nopenBLAS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbrew tap homebrew/science\nbrew install homebrew/science/openblas\n\n\nhdf5\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u304a\u305d\u3089\u304f\u3001\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3067\u6539\u5584\u3055\u308c\u308b\u306e\u3067\u3001\u554f\u984c\u306a\u304fruntest\u304c\u884c\u3048\u308b\u5834\u5408\u306fFormula\u306e\u5909\u66f4\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\nruntest\u3092\u884c\u3046\u969b\nlibhdf5_hl.8.dylib\n\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u3001\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\uff082015/4/22\u73fe\u5728\uff09\n\u3069\u3046\u3084\u3089hdf5-1.8.14\u3067\u306f\nlibhdf5_hl.9.dylib\n\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3057\u307e\u3046\u3082\u3088\u3046\u3001\u305d\u3053\u3067Homebrew\u306eFormula\u3092\u5909\u66f4\u3057\u3066\nhdf5-1.8.13\u3092\u5c0e\u5165\u3057\u307e\u3059\nbrew edit hdf5\n\nurl\u3068sha1\u3092\u5909\u66f4\u3057\u307e\u3059\nclass Hdf5 < Formula\n  homepage \"http://www.hdfgroup.org/HDF5\"\n --> url \"http://www.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8.13/src/hdf5-1.8.13.tar.bz2\"\n --> sha1 \"712955025f03db808f000d8f4976b8df0c0d37b5\"\n\nbrew install --build-from-source --fresh -vd hdf5\n\n\u3072\u3068\u307e\u305a\u3053\u308c\u3067\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u5c0e\u5165\u5b8c\u4e86\u3067\u3059\n\nmakefile\u3068makefile.config\u306e\u4fee\u6b63\nOS X 10.10\uff08Yosemite\uff09\u306bCaffe\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff08libstdc++\u554f\u984c\u89e3\u6c7a\uff09\n\u3053\u3053\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\n\nMakefile\u306e\u4fee\u6b63\nMakefile\u3092\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\n\n#stdlib=libstdc++\u3092-stdlib=libc++\u306b\u5909\u66f4\nCXXFLAGS += -stdlib=libc++\nLINKFLAGS += -stdlib=libc++\n\n#BLAS_INCLUDE\u3082\u901a\u3059\uff08\uff12\u884c\u3042\u308b\u306e\u3067\u4e00\u5fdc\u4e21\u65b9\u901a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\uff09           \nBLAS_INCLUDE ?= /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/Headers/\n\n\nMakefile.comfig\u306e\u4fee\u6b63\n#\u30b3\u30f3\u30d1\u30a4\u30eb\u3092clang\u306b\u5909\u66f4\n# To customize your choice of compiler, uncomment and set the following.\n# N.B. the default for Linux is g++ and the default for OSX is clang++\nCUSTOM_CXX := /usr/bin/clang++\n\n#7\u4ee5\u4e0a\u306a\u306e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# For CUDA < 6.0, comment the *_50 lines for compatibility.\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n        -gencode arch=compute_20,code=sm_21 \\\n        -gencode arch=compute_30,code=sm_30 \\\n        -gencode arch=compute_35,code=sm_35 \\\n#-gencode arch=compute_50,code=sm_50 \\\n#-gencode arch=compute_50,code=compute_50\n\n#\u30a2\u30ca\u30b3\u30f3\u30c0\u307e\u308f\u308a\n# Anaconda Python distribution is quite popular. Include path:\n# Verify anaconda location, sometimes it's in root.\n# ANACONDA_HOME := $(HOME)/anaconda\n#\u3084\u3084\u3053\u3057\u3044\u306e\u3067ANACONDA_HOME\u306f\u4f7f\u308f\u306a\u3044\u3067\u3001\u2193\u306b\u30d1\u30b9\u304b\u3044\u3066\u3044\u304f\n PYTHON_INCLUDE := /Users/name/.pyenv/versions/anaconda-2.1.0/include /Users/name/.pyenv/versions/anaconda-2.1.0/include/python2.7 /Users/name/.pyenv/versions/anaconda-2.1.0/lib/python2.7/site-packages/numpy/core/include\n\n# open for OpenBlas\nBLAS := open\n\n BLAS_INCLUDE := /usr/local/Cellar/openblas/0.2.14/include\n BLAS_LIB := /usr/local/Cellar/openblas/0.2.14/lib\n\npython\u306e\u30d1\u30b9\u3092\u901a\u3057\u3066\u304a\u304f\n# We need to be able to find libpythonX.X.so or .dylib.\nPYTHON_LIB := /Users/name/.pyenv/versions/anaconda-2.1.0/lib\n\nlib\u30d1\u30b9\u901a\u3057\u3066\u304a\u304f\n# Whatever else you find you need goes here.\nINCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include\nLIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /Developer/NVIDIA/CUDA-7.0/lib\n\n\n\u30d3\u30eb\u30c9\u3059\u308b\ncaffe\u306e\u5148\u982d\u306e\u30d5\u30a9\u30eb\u30c0\u3067\nmake all -j8\nmake test -j8\n\n-j8\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u4e26\u5217\u5316\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\uff0c\u6570\u5b57\u306f\u4e26\u5217\u6570\u3067\u3059\u306e\u3067\u74b0\u5883\u306b\u3042\u308f\u305b\u3066\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3001\u30b7\u30f3\u30b0\u30eb\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u601d\u3044\u307e\u3059\uff0e\n\u30c6\u30b9\u30c8\u3092\u884c\u3046\nmake runtest\n\n\u3057\u3070\u3089\u304f\u3044\u308d\u3093\u306a\u30c6\u30b9\u30c8\u7d50\u679c\u304c\u51fa\u529b\u3055\u308c\u305f\u5f8c\nYOU HAVE 2 DISABLED TESTS\n\n\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u5927\u4e08\u592b\u3067\u3059\n\npython\u3067Caffe\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u30d3\u30eb\u30c9\ncaffe\u306e\u5148\u982d\u30d5\u30a9\u30eb\u30c0\u3067\nmake pycaffe\n\n\u3092\u53e9\u304f\uff01\n\u4eca\u56de\u306fpython\u7d4c\u7531\u3067\u52d5\u304b\u3059\u306e\u3067\u5fd8\u308c\u305a\u306b\uff01\n.bash_profile\u3067\u30d1\u30b9\u3092\u304b\u3051\u3066\u304a\u304f\nPYTHONPATH=/Users/name/caffe/python\u3092\u901a\u3059\n\n\u30d3\u30eb\u30c9\u4e2d\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u5834\u5408\u306f\npython/caffe/_caffe.cpp:1:10: fatal error: 'Python.h' file not found\n#include <Python.h>  // NOLINT(build/include_alpha)\n\n\u4ee5\u4e0b\u306epath\u3092.bash_profile\u306b\u8ffd\u52a0\nCPLUS_INCLUDE_PATH=/Users/name/.pyenv/versions/anaconda-2.1.0/include/python2.7\n\n\npython\u3067caffe\u3092import\nProtoc\u304c\u5fc5\u8981\u306a\u306e\u3067\uff0cpip\u3067python\u306b\u5c0e\u5165\npip install protobuf\n\npython\u3092\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u3066\n>>> import caffe\n\n\u3053\u308c\u3067\u901a\u308c\u3070ok\n\u3053\u3061\u3089\u306e\u74b0\u5883\u3067\u306f\ncaffe Fatal Python error: PyThreadState_Get: no current thread\n\n\u3068python\u304c\u5f37\u5236\u7d42\u4e86\u3057\u305f\u306e\u3067\uff0c\u4ee5\u4e0b\u306epath\u3092.bash_profile\u3067\u901a\u3057\u305f\nexport DYLD_FALLBACK_LIBRARY_PATH=/Users/name/.pyenv/versions/anaconda-2.1.0/lib:/usr/local/cuda/lib:/usr/local/lib:/usr/local/cuda/lib:/usr/local/lib\n\n\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u3067\u753b\u50cf\u5206\u985e\u3092\u884c\u3046\nCaffe\u3067\u624b\u8efd\u306b\u753b\u50cf\u5206\u985e\n\u3068\u3044\u3046\u8a18\u4e8b\u304c\u3042\u308a\u307e\u3059\u304c\uff0c\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u308f\u3063\u3066\u304a\u308a\uff0c\u304a\u624b\u8efd\u3068\u306f\u3044\u304b\u306a\u3044\u3067\u3059\uff0e\n\u4eca\u56de\u306f\u3053\u306e\u30da\u30fc\u30b8\u306e\u6700\u521d\u306e\u90e8\u5206\u307e\u3067\u884c\u3044\u307e\u3059\uff0e\n\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ncaffe/models/bvlc_reference_caffenet/readme.md\n\n\u306b\u3088\u308b\u3068\u4ee5\u4e0b\u306eURL\u306b\u5b58\u5728\u3059\u308b\u3089\u3057\u3044\u306e\u3067\nhttp://dl.caffe.berkeleyvision.org/bvlc_reference_caffenet.caffemodel\n\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ncaffe/models/bvlc_reference_caffenet/\n\n\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304d\u307e\u3059\n\n\u95a2\u9023\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ncaffe/data/ilsvrc12/get_ilsvrc_aux.sh\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\uff0c\n\u30e2\u30c7\u30eb\u306e\u95a2\u9023\u30c7\u30fc\u30bf\u3092\u5165\u624b\u3057\u307e\u3059\uff0e\n\n\u7269\u4f53\u8a8d\u8b58\u306e\u753b\u50cf\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\n\n\u3053\u306e\u30a2\u30d5\u30ea\u30ab\u8c61\u306e\u753b\u50cf\u306b\u3064\u3044\u3066\u5206\u985e\u3092\u3057\u3066\u307f\u307e\u3059\uff0e\ncaffe/python/Elefante.jpg\n\n\u3068\u3057\u3066\u4fdd\u5b58\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n\nclassify.py\u3092\u4f7f\u7528\u3057\u3066\u753b\u50cf\u5206\u985e\ncaffe/python/\n\n\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u3044\u3066\uff0c\u5206\u985e\u3092\u884c\u3044\u307e\u3059\npython classify.py --raw_scale 255 ./Elefante.jpg  ./result.npy\n\n\u3053\u3053\u3067\u3059\u3093\u306a\u308a\u3068\u30af\u30ea\u30a2\u3067\u304d\u308c\u3070ok\u3067\u3059\u304c\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\n  File \"classify.py\", line 137, in <module>\n\n    main(sys.argv)\n\n  File \"classify.py\", line 109, in main\n\n    channel_swap=channel_swap)\n\n  File \"/Users/name/caffe/python/caffe/classifier.py\", line 34, in __init__\n\n    self.transformer.set_mean(in_, mean)\n\n  File \"/Users/name/caffe/python/caffe/io.py\", line 255, in set_mean\n\n    raise ValueError('Mean shape incompatible with input shape.')\n\nValueError: Mean shape incompatible with input shape.\n\n\u3068\u3044\u3063\u305f\u30a8\u30e9\u30fc\u304c\u304b\u3048\u3063\u3066\u304f\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\uff0e\n\u5165\u529b\u3057\u305f'caffe/imagenet/ilsvrc_2012_mean.npy'\u3092\u3046\u307e\u304f\u6271\u3048\u306a\u3044\u3088\u3046\u3067\u3059\uff0e\n\u539f\u56e0\u306fclassify.py\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\ncaffe/python/caffe/io.py\n\n\u306e253-254\u884c\u76ee\nif ms != self.inputs[in_][1:]:\n    raise ValueError('Mean shape incompatible with input shape.')\n\n\u306b\u3042\u308b\u3088\u3046\u3067\u3059\uff0e\n\u3069\u3046\u3084\u3089\uff0c\u65b0\u3057\u304f\u4f5c\u3089\u308c\u305f\u90e8\u5206\u304c\u3046\u307e\u304f\u6a5f\u80fd\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\uff0c\u53e4\u3044Caffe\u3067\u66f8\u304b\u308c\u3066\u3044\u305f\u66f8\u304d\u65b9\u3067\u66f8\u304d\u76f4\u3057\u307e\u3059\nif ms != self.inputs[in_][1:]:\n    print(self.inputs[in_])\n    in_shape = self.inputs[in_][1:]\n    m_min, m_max = mean.min(), mean.max()\n    normal_mean = (mean - m_min) / (m_max - m_min)\n    mean = resize_image(normal_mean.transpose((1,2,0)),in_shape[1:]).transpose((2,0,1)) * (m_max - m_min) + m_min\n    #raise ValueError('Mean shape incompatible with input shape.')\n\n\u4ee5\u4e0b\u306eURL\u306b\u3082\u540c\u3058\u554f\u984c\u304c\u3042\u3052\u3089\u308c\u3066\u3044\u307e\u3059\nhttp://stackoverflow.com/questions/28692209/using-gpu-despite-setting-cpu-only-yielding-unexpected-keyword-argument\n\u5909\u66f4\u5f8c\u3082\u3046\u4e00\u5ea6\uff0cclassify.py\u3092\u4f7f\u7528\u3057\n\n\u5b9f\u884c\u7d50\u679c\nLoading file: ./Elefante.jpg\nClassifying 1 inputs.\nDone in 0.90 s.\nSaving results into ./result.npy\n\n\u3068\u51fa\u308c\u3070ok\u3067\u3059.\n\u5224\u5225\u7d50\u679c\u304cresult.pny\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059.\nresult.npy\u306e\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\nCaffe\u3067\u624b\u8efd\u306b\u753b\u50cf\u5206\u985e\n\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\nshow_result.py\n\n\u3092\u4f7f\u7528\u3059\u308b\u3068\u7d50\u679c\u3092\u6570\u5024\u3067\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\n$ python show_result.sh ../data/ilsvrc12/synset_words.txt result.npy \n1 | n02504458 African elephant, Loxodonta africana | 81.2%\n2 | n01871265 tusker | 14.9%\n3 | n02504013 Indian elephant, Elephas maximus |  3.3%\n\n81\uff05\u306e\u78ba\u7387\u3067\u30a2\u30d5\u30ea\u30ab\u8c61\n14\uff05\u3067\u7259\u306e\u751f\u3048\u305f\u5927\u304d\u306a\u751f\u304d\u7269\n3\uff05\u3067\u30a4\u30f3\u30c9\u8c61\u3067\u3042\u308b\u3068\n\u5224\u65ad\u3055\u308c\u307e\u3057\u305f\n**2015\u5e744\u670822\u65e5\u73fe\u5728\u306e\u60c5\u5831\u3067\u3059**\n**caffe\u306f\u983b\u7e41\u306b\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u884c\u3046\u306e\u3067\u4eca\u73fe\u5728\u52d5\u304f\u304b\u306f\u4fdd\u8a3c\u3057\u304b\u306d\u307e\u3059**\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u3092\u7528\u3044\u3066\u753b\u50cf\u5224\u5225\u3092\u3057\u307e\u3059\uff0e\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30ebbvlc_reference_caffenet.caffemodel\u3068classify.py\u3092\u4f7f\u7528\u3057\u305f\u753b\u50cf\u8b58\u5225\u306b\u3064\u3044\u3066\u307e\u3067\u3067\u3059\uff0e\n\n\n#caffe\u3068\u306f\n\u30c7\u30a3\u30fc\u30d7\u30e9\u30fc\u30cb\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\u975e\u5e38\u306b\u9ad8\u901f\u304b\u3064\u958b\u767a\u304c\u6d3b\u767a\u3067\u4eba\u6c17\u306e\u9ad8\u3044\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\n\u8a73\u3057\u304f\u306f\u516c\u5f0f\u3092\u898b\u307e\u3057\u3087\u3046\nhttp://caffe.berkeleyvision.org/\n\n\u5c11\u3057\u6027\u80fd\u3092\u898b\u305f\u3044\u65b9\u306f\n[Caffe Demos](http://demo.caffe.berkeleyvision.org/)\n\u306b\u5206\u985e\u3057\u305f\u3044\u753b\u50cf\u306eURL\u3092\u8cbc\u308b\u3068\n\u516c\u5f0f\u306e\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u3067\u753b\u50cf\u5206\u985e\u3092\u884c\u3063\u3066\u304f\u308c\u307e\u3059\n\n\n#MacOSX10.10.3(yosemite)\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3082\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\n[OS X 10.10\uff08Yosemite\uff09\u306bCaffe\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff08libstdc++\u554f\u984c\u89e3\u6c7a\uff09](http://qiita.com/Leonhalt2714/items/8d7054f044b4f4603264)\n\n#\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u74b0\u5883\u306b\u3064\u3044\u3066\n\u30fbiMac 27-inch, Late 2013\n\u30fbCPU 3.5 GHz Intel Core i7\n\u30fb16 GB 1600 MHz DDR3\n\u30fbGPU NVIDIA GeForce GTX 775M 2048 MB\n\u30fbOS MaxOSX10.10.3 yosemite\n\n#\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5c0e\u5165\u3059\u308b\n##Python\n\u516c\u5f0f\u3067Anaconda\u3092\u63a8\u5968\u3055\u308c\u3066\u3044\u308b\u306e\u3067Anaconda-2.1.0\u3092\u4f7f\u7528\nAnaconda\u3068\u306fpython\u306b\u6570\u5024\u8a08\u7b97\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\u305f\u3081\u306b\u3044\u308d\u3093\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5c0e\u5165\u3057\u305f\u30c7\u30a3\u30b9\u30c8\u30ea\u30d3\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\u3053\u308c\u3092\u4f7f\u7528\u3057\u307e\u3059\n\npyenv\u306b\u3088\u3063\u3066\u7ba1\u7406\u3059\u308b\n[pyenv\u3092\u4f7f\u3063\u3066Mac\u306bPython\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b](http://qiita.com/1000ch/items/93841f76ea52551b6a97)\n\u3092\u53c2\u8003\u306b\u5c0e\u5165\u3057\u3066\u304f\u3060\u3055\u3044\n\n\u672c\u7a3f\u3067\u306fbrew\u3092\u4f7f\u7528\u305b\u305a\u306bpyenv\u3092\u30db\u30fc\u30e0\u30c7\u30a3\u30af\u30c8\u30ea\u306b\u4f5c\u6210\npython\u74b0\u5883\u3092Anaconda\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\n2\u7cfb\u30683\u7cfb\u304c\u3042\u308a\u307e\u3059\u304c2\u7cfb\u304c\u30d9\u30bf\u30fc\u304b\u3068\n\n```bash:\npyenv install anaconda-2.1.0\npyenv global anaconda-2.1.0\npyenv local anaconda-2.1.0\n```\nanaconda-2.1.0\u306b\u3059\u3067\u306b\u5c0e\u5165\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u304c\u3001\u4e00\u5fdc\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n\n```bash:\npip install -r caffe/python/python/requirements.txt\n```\n\u3067\u5fc5\u8981\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u5c0e\u5165\u3057\u307e\u3057\u3087\u3046\n\n##CUDA7.0\nNAVIDIA\u304b\u30897.0\u4ee5\u4e0a\u3092\u5c0e\u5165\n\u73fe\u5728\u306f\u6b63\u5f0f\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f\u306e\u3067\u767b\u9332\u4e0d\u8981\n7.0\u4ee5\u4e0a\u3067\u3042\u308c\u3070libc++\u3067\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u304c\u53ef\u80fd\n[NAVIDIA CUDA7 Downloads](https://developer.nvidia.com/cuda-downloads)\n\n\n##\u305d\u306e\u4ed6\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\nHomebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\n\n```bash:\nbrew install --fresh -vd snappy leveldb gflags glog szip lmdb\n```\n\n##boost boost-python\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u3061\u307e\u305f\u3067\u306fver1.55\u3067\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u3068\u3044\u3046\u60c5\u5831\u304c\u3042\u308a\u307e\u3057\u305f\u304c\nboost1.57 \u3068 boost-python1.57\u3067\u52d5\u3044\u305f\u306e\u3067\u305d\u306e\u307e\u307e\n\n```bash:\nbrew install --build-from-source --fresh -vd boost boost-python\n```\n##protobuf\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u5fc5\u305a--with-python\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\n\u3064\u3051\u306a\u3044\u3068\u3001\u30d3\u30eb\u30c9\u6642\u306bPROTOC\u3046\u3093\u306c\u3093\u3068\u6012\u3089\u308c\u307e\u3059\n\n```bash:\nbrew install --build-from-source --with-python --fresh -vd protobuf\n```\n\n\n\n##openBLAS\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\nbrew tap homebrew/science\nbrew install homebrew/science/openblas\n```\n\n##hdf5\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n**\u304a\u305d\u3089\u304f\u3001\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3067\u6539\u5584\u3055\u308c\u308b\u306e\u3067\u3001\u554f\u984c\u306a\u304fruntest\u304c\u884c\u3048\u308b\u5834\u5408\u306fFormula\u306e\u5909\u66f4\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093**\n\nruntest\u3092\u884c\u3046\u969b\n**libhdf5_hl.8.dylib**\n\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u3001\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\uff082015/4/22\u73fe\u5728\uff09\n\n\u3069\u3046\u3084\u3089hdf5-1.8.14\u3067\u306f\n**libhdf5_hl.9.dylib**\n\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3057\u307e\u3046\u3082\u3088\u3046\u3001\u305d\u3053\u3067Homebrew\u306eFormula\u3092\u5909\u66f4\u3057\u3066\nhdf5-1.8.13\u3092\u5c0e\u5165\u3057\u307e\u3059\n\n```bash:\nbrew edit hdf5\n```\nurl\u3068sha1\u3092\u5909\u66f4\u3057\u307e\u3059\n\n```ruby:\nclass Hdf5 < Formula\n  homepage \"http://www.hdfgroup.org/HDF5\"\n --> url \"http://www.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8.13/src/hdf5-1.8.13.tar.bz2\"\n --> sha1 \"712955025f03db808f000d8f4976b8df0c0d37b5\"\n```\n\n```bash:\nbrew install --build-from-source --fresh -vd hdf5\n```\n\n\u3072\u3068\u307e\u305a\u3053\u308c\u3067\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u5c0e\u5165\u5b8c\u4e86\u3067\u3059\n\n##makefile\u3068makefile.config\u306e\u4fee\u6b63\n[OS X 10.10\uff08Yosemite\uff09\u306bCaffe\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\uff08libstdc++\u554f\u984c\u89e3\u6c7a\uff09](http://qiita.com/Leonhalt2714/items/8d7054f044b4f4603264)\n\u3053\u3053\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\n\n##Makefile\u306e\u4fee\u6b63\nMakefile\u3092\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\n\n```bash:\n\n#stdlib=libstdc++\u3092-stdlib=libc++\u306b\u5909\u66f4\nCXXFLAGS += -stdlib=libc++\nLINKFLAGS += -stdlib=libc++\n\t\t\t\n#BLAS_INCLUDE\u3082\u901a\u3059\uff08\uff12\u884c\u3042\u308b\u306e\u3067\u4e00\u5fdc\u4e21\u65b9\u901a\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\uff09\t\t\t\nBLAS_INCLUDE ?= /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.10.sdk/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/Headers/\n```\n\t\t\t\n##Makefile.comfig\u306e\u4fee\u6b63\n```bash:\n#\u30b3\u30f3\u30d1\u30a4\u30eb\u3092clang\u306b\u5909\u66f4\n# To customize your choice of compiler, uncomment and set the following.\n# N.B. the default for Linux is g++ and the default for OSX is clang++\nCUSTOM_CXX := /usr/bin/clang++\n\n#7\u4ee5\u4e0a\u306a\u306e\u3067\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n# For CUDA < 6.0, comment the *_50 lines for compatibility.\nCUDA_ARCH := -gencode arch=compute_20,code=sm_20 \\\n\t\t-gencode arch=compute_20,code=sm_21 \\\n\t\t-gencode arch=compute_30,code=sm_30 \\\n\t\t-gencode arch=compute_35,code=sm_35 \\\n#-gencode arch=compute_50,code=sm_50 \\\n#-gencode arch=compute_50,code=compute_50\n\n#\u30a2\u30ca\u30b3\u30f3\u30c0\u307e\u308f\u308a\n# Anaconda Python distribution is quite popular. Include path:\n# Verify anaconda location, sometimes it's in root.\n# ANACONDA_HOME := $(HOME)/anaconda\n#\u3084\u3084\u3053\u3057\u3044\u306e\u3067ANACONDA_HOME\u306f\u4f7f\u308f\u306a\u3044\u3067\u3001\u2193\u306b\u30d1\u30b9\u304b\u3044\u3066\u3044\u304f\n PYTHON_INCLUDE := /Users/name/.pyenv/versions/anaconda-2.1.0/include /Users/name/.pyenv/versions/anaconda-2.1.0/include/python2.7 /Users/name/.pyenv/versions/anaconda-2.1.0/lib/python2.7/site-packages/numpy/core/include\n\n# open for OpenBlas\nBLAS := open\n\n BLAS_INCLUDE := /usr/local/Cellar/openblas/0.2.14/include\n BLAS_LIB := /usr/local/Cellar/openblas/0.2.14/lib\n\npython\u306e\u30d1\u30b9\u3092\u901a\u3057\u3066\u304a\u304f\n# We need to be able to find libpythonX.X.so or .dylib.\nPYTHON_LIB := /Users/name/.pyenv/versions/anaconda-2.1.0/lib\n\nlib\u30d1\u30b9\u901a\u3057\u3066\u304a\u304f\n# Whatever else you find you need goes here.\nINCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include\nLIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /Developer/NVIDIA/CUDA-7.0/lib\n```\n\n#\u30d3\u30eb\u30c9\u3059\u308b\ncaffe\u306e\u5148\u982d\u306e\u30d5\u30a9\u30eb\u30c0\u3067\n\n```bash:\nmake all -j8\nmake test -j8\n```\n-j8\u306f\u30b3\u30f3\u30d1\u30a4\u30eb\u3092\u4e26\u5217\u5316\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3059\uff0c\u6570\u5b57\u306f\u4e26\u5217\u6570\u3067\u3059\u306e\u3067\u74b0\u5883\u306b\u3042\u308f\u305b\u3066\u5909\u3048\u3066\u304f\u3060\u3055\u3044\u3001\u30b7\u30f3\u30b0\u30eb\u3067\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304b\u306a\u308a\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u601d\u3044\u307e\u3059\uff0e\n\n\u30c6\u30b9\u30c8\u3092\u884c\u3046\n\n```bash:\nmake runtest\n```\n\u3057\u3070\u3089\u304f\u3044\u308d\u3093\u306a\u30c6\u30b9\u30c8\u7d50\u679c\u304c\u51fa\u529b\u3055\u308c\u305f\u5f8c\n\n```bash:\nYOU HAVE 2 DISABLED TESTS\n```\n\u3068\u8868\u793a\u3055\u308c\u308c\u3070\u5927\u4e08\u592b\u3067\u3059\n\n##python\u3067Caffe\u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u30d3\u30eb\u30c9\ncaffe\u306e\u5148\u982d\u30d5\u30a9\u30eb\u30c0\u3067\n\n```bash:\nmake pycaffe\n```\n\u3092\u53e9\u304f\uff01\n\u4eca\u56de\u306fpython\u7d4c\u7531\u3067\u52d5\u304b\u3059\u306e\u3067\u5fd8\u308c\u305a\u306b\uff01\n\n.bash_profile\u3067\u30d1\u30b9\u3092\u304b\u3051\u3066\u304a\u304f\n\n```bash:\nPYTHONPATH=/Users/name/caffe/python\u3092\u901a\u3059\n```\n\n\u30d3\u30eb\u30c9\u4e2d\u306b\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u5834\u5408\u306f\n\n```bash:\npython/caffe/_caffe.cpp:1:10: fatal error: 'Python.h' file not found\n#include <Python.h>  // NOLINT(build/include_alpha)\n```\n\u4ee5\u4e0b\u306epath\u3092.bash_profile\u306b\u8ffd\u52a0\n\n```bash:\nCPLUS_INCLUDE_PATH=/Users/name/.pyenv/versions/anaconda-2.1.0/include/python2.7\n```\n\n##python\u3067caffe\u3092import\nProtoc\u304c\u5fc5\u8981\u306a\u306e\u3067\uff0cpip\u3067python\u306b\u5c0e\u5165\n\n```\npip install protobuf\n```\n\npython\u3092\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u3066\n\n```python:\n>>> import caffe\n```\n\u3053\u308c\u3067\u901a\u308c\u3070ok\n\u3053\u3061\u3089\u306e\u74b0\u5883\u3067\u306f\n\n```python:\ncaffe Fatal Python error: PyThreadState_Get: no current thread\n```\n\u3068python\u304c\u5f37\u5236\u7d42\u4e86\u3057\u305f\u306e\u3067\uff0c\u4ee5\u4e0b\u306epath\u3092.bash_profile\u3067\u901a\u3057\u305f\n\n```bash:\nexport DYLD_FALLBACK_LIBRARY_PATH=/Users/name/.pyenv/versions/anaconda-2.1.0/lib:/usr/local/cuda/lib:/usr/local/lib:/usr/local/cuda/lib:/usr/local/lib\n```\n\n\n\n#\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u3067\u753b\u50cf\u5206\u985e\u3092\u884c\u3046\n[Caffe\u3067\u624b\u8efd\u306b\u753b\u50cf\u5206\u985e](http://techblog.yahoo.co.jp/programming/caffe-intro/)\n\u3068\u3044\u3046\u8a18\u4e8b\u304c\u3042\u308a\u307e\u3059\u304c\uff0c\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5909\u308f\u3063\u3066\u304a\u308a\uff0c\u304a\u624b\u8efd\u3068\u306f\u3044\u304b\u306a\u3044\u3067\u3059\uff0e\n\u4eca\u56de\u306f\u3053\u306e\u30da\u30fc\u30b8\u306e\u6700\u521d\u306e\u90e8\u5206\u307e\u3067\u884c\u3044\u307e\u3059\uff0e\n\n##\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u30e2\u30c7\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```bash:\ncaffe/models/bvlc_reference_caffenet/readme.md\n```\n\u306b\u3088\u308b\u3068\u4ee5\u4e0b\u306eURL\u306b\u5b58\u5728\u3059\u308b\u3089\u3057\u3044\u306e\u3067\nhttp://dl.caffe.berkeleyvision.org/bvlc_reference_caffenet.caffemodel\n\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n```bash:\ncaffe/models/bvlc_reference_caffenet/\n```\n\u4ee5\u4e0b\u306b\u4fdd\u5b58\u3057\u3066\u304a\u304d\u307e\u3059\n\n##\u95a2\u9023\u30d5\u30a1\u30a4\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\ncaffe/data/ilsvrc12/get_ilsvrc_aux.sh\n\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u5b9f\u884c\uff0c\n\u30e2\u30c7\u30eb\u306e\u95a2\u9023\u30c7\u30fc\u30bf\u3092\u5165\u624b\u3057\u307e\u3059\uff0e\n\n##\u7269\u4f53\u8a8d\u8b58\u306e\u753b\u50cf\n\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\n![Serengeti_Elefantenbulle.jpg](http://upload.wikimedia.org/wikipedia/commons/5/59/Serengeti_Elefantenbulle.jpg)\n\u3053\u306e\u30a2\u30d5\u30ea\u30ab\u8c61\u306e\u753b\u50cf\u306b\u3064\u3044\u3066\u5206\u985e\u3092\u3057\u3066\u307f\u307e\u3059\uff0e\n\n```bash:\ncaffe/python/Elefante.jpg\n```\n\u3068\u3057\u3066\u4fdd\u5b58\u3057\u3066\u304a\u304d\u307e\u3059\uff0e\n\n##classify.py\u3092\u4f7f\u7528\u3057\u3066\u753b\u50cf\u5206\u985e\n```bash:\ncaffe/python/\n```\n\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u3044\u3066\uff0c\u5206\u985e\u3092\u884c\u3044\u307e\u3059\n\n```bash:\npython classify.py --raw_scale 255 ./Elefante.jpg  ./result.npy\n```\n\u3053\u3053\u3067\u3059\u3093\u306a\u308a\u3068\u30af\u30ea\u30a2\u3067\u304d\u308c\u3070ok\u3067\u3059\u304c\n\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3088\u3063\u3066\n\n```bash:\n  File \"classify.py\", line 137, in <module>\n\n    main(sys.argv)\n\n  File \"classify.py\", line 109, in main\n\n    channel_swap=channel_swap)\n\n  File \"/Users/name/caffe/python/caffe/classifier.py\", line 34, in __init__\n\n    self.transformer.set_mean(in_, mean)\n\n  File \"/Users/name/caffe/python/caffe/io.py\", line 255, in set_mean\n\n    raise ValueError('Mean shape incompatible with input shape.')\n\nValueError: Mean shape incompatible with input shape.\n```\n\u3068\u3044\u3063\u305f\u30a8\u30e9\u30fc\u304c\u304b\u3048\u3063\u3066\u304f\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\uff0e\n\n\u5165\u529b\u3057\u305f'caffe/imagenet/ilsvrc_2012_mean.npy'\u3092\u3046\u307e\u304f\u6271\u3048\u306a\u3044\u3088\u3046\u3067\u3059\uff0e\n\u539f\u56e0\u306fclassify.py\u304c\u4f7f\u7528\u3057\u3066\u3044\u308b\n\n```bash:\ncaffe/python/caffe/io.py\n```\n\u306e253-254\u884c\u76ee\n\n```python:\nif ms != self.inputs[in_][1:]:\n\traise ValueError('Mean shape incompatible with input shape.')\n```\n\u306b\u3042\u308b\u3088\u3046\u3067\u3059\uff0e\n\u3069\u3046\u3084\u3089\uff0c\u65b0\u3057\u304f\u4f5c\u3089\u308c\u305f\u90e8\u5206\u304c\u3046\u307e\u304f\u6a5f\u80fd\u3057\u3066\u3044\u306a\u3044\u3088\u3046\u306a\u306e\u3067\uff0c\u53e4\u3044Caffe\u3067\u66f8\u304b\u308c\u3066\u3044\u305f\u66f8\u304d\u65b9\u3067\u66f8\u304d\u76f4\u3057\u307e\u3059\n\n```python:\nif ms != self.inputs[in_][1:]:\n\tprint(self.inputs[in_])\n\tin_shape = self.inputs[in_][1:]\n\tm_min, m_max = mean.min(), mean.max()\n\tnormal_mean = (mean - m_min) / (m_max - m_min)\n\tmean = resize_image(normal_mean.transpose((1,2,0)),in_shape[1:]).transpose((2,0,1)) * (m_max - m_min) + m_min\n\t#raise ValueError('Mean shape incompatible with input shape.')\n```\n\n\u4ee5\u4e0b\u306eURL\u306b\u3082\u540c\u3058\u554f\u984c\u304c\u3042\u3052\u3089\u308c\u3066\u3044\u307e\u3059\nhttp://stackoverflow.com/questions/28692209/using-gpu-despite-setting-cpu-only-yielding-unexpected-keyword-argument\n\n\n\n\u5909\u66f4\u5f8c\u3082\u3046\u4e00\u5ea6\uff0cclassify.py\u3092\u4f7f\u7528\u3057\n\n##\u5b9f\u884c\u7d50\u679c\n```\nLoading file: ./Elefante.jpg\nClassifying 1 inputs.\nDone in 0.90 s.\nSaving results into ./result.npy\n```\n\u3068\u51fa\u308c\u3070ok\u3067\u3059.\n\u5224\u5225\u7d50\u679c\u304cresult.pny\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u307e\u3059.\n\nresult.npy\u306e\u5185\u5bb9\u306b\u3064\u3044\u3066\u306f\n[Caffe\u3067\u624b\u8efd\u306b\u753b\u50cf\u5206\u985e](http://techblog.yahoo.co.jp/programming/caffe-intro/)\n\u3067\u516c\u958b\u3055\u308c\u3066\u3044\u308b\n\n```bash:\nshow_result.py\n```\n\u3092\u4f7f\u7528\u3059\u308b\u3068\u7d50\u679c\u3092\u6570\u5024\u3067\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\n\n```bash:\n$ python show_result.sh ../data/ilsvrc12/synset_words.txt result.npy \n1 | n02504458 African elephant, Loxodonta africana | 81.2%\n2 | n01871265 tusker | 14.9%\n3 | n02504013 Indian elephant, Elephas maximus |  3.3%\n```\n81\uff05\u306e\u78ba\u7387\u3067\u30a2\u30d5\u30ea\u30ab\u8c61\n14\uff05\u3067\u7259\u306e\u751f\u3048\u305f\u5927\u304d\u306a\u751f\u304d\u7269\n3\uff05\u3067\u30a4\u30f3\u30c9\u8c61\u3067\u3042\u308b\u3068\n\u5224\u65ad\u3055\u308c\u307e\u3057\u305f\n"}