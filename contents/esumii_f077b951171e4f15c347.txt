{"context": " More than 1 year has passed since last update.\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306e\u5b9a\u7fa9\uff06\u5b9f\u88c5\u306e\u4ed5\u65b9\u306e\u4f8b\u3067\u300c\u9700\u8981\u304c\u3042\u308c\u3070\u5f8c\u3067\u66f8\u304f\u300d\u3068\u66f8\u3044\u305f\u3001\u300c\u3088\u308a\u52b9\u7387\u7684\u306a\u5b9f\u88c5\u300d\u3067\u3059\uff08\u6570\u4ef6:-)\u306e\u9700\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u2026\uff09\u3002\u524d\u306e\u8a18\u4e8b\u306f\u8aad\u3093\u3067\u3044\u308b\u3068\u4eee\u5b9a\u3057\u307e\u3059\u3002\n\u3055\u3066\u3001\u524d\u306e\u5b9f\u88c5\u3067\u306f\u3001\u95a2\u6570function(x){E}\u3092\u5024v\u306b\u9069\u7528\u3059\u308b\u3068\u3001\u672c\u4f53\u3067\u3042\u308b\u5f0fE\u306e\u62bd\u8c61\u69cb\u6587\u6728\u3092\u3059\u3079\u3066\u8fbf\u3063\u3066\u3001\u305d\u306e\u4e2d\u306e\u5909\u6570x\u3092\u3059\u3079\u3066v\u3067\u7f6e\u304d\u63db\u3048\u305f\u5f0f\u3092\u4f5c\u3063\u3066\u3044\u307e\u3057\u305f\uff08subst\uff09\u3002\u3053\u308c\u306f\u660e\u3089\u304b\u306b\u975e\u52b9\u7387\u7684\u3067\u3059\u3002\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u305f\u3073\u306b\u3001\u672c\u4f53\u306e\u62bd\u8c61\u69cb\u6587\u6728\u3092\u4f5c\u308a\u76f4\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304b\u3089\uff01\n\u305d\u3053\u3067\u3001\u5909\u6570\u306b\u672c\u5f53\u306b\u5024\u3092\u4ee3\u5165\u3057\u3066\u65b0\u3057\u3044\u5f0f\u3092\u4f5c\u308a\u76f4\u3059\u304b\u308f\u308a\u306b\u3001\u3069\u306e\u5909\u6570\u306b\u3069\u3046\u3044\u3046\u5024\u304c\u4e0e\u3048\u3089\u308c\u305f\uff08\u675f\u7e1b(binding)\u3068\u8a00\u3044\u307e\u3059\uff09\u306e\u304b\u3001\u899a\u3048\u3066\u304a\u304f\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u7528\u610f\u3057\u307e\u3059\u3002\u3053\u308c\u3092\u74b0\u5883(environment)\u3068\u8a00\u3044\u307e\u3059\u3002\n\u74b0\u5883\u306f\u9023\u60f3\u30ea\u30b9\u30c8\u3067\u3082\u30cf\u30c3\u30b7\u30e5\u30c6\u30fc\u30d6\u30eb\u3067\u3082\u63a2\u7d22\u6728\u3067\u3082\u3001\u5909\u6570\u304b\u3089\u5024\u3078\u306e\u5bfe\u5fdc\uff08\u5199\u50cf\uff09\u3092\u8868\u3057\u3066\u3044\u308c\u3070\u3001\u4f55\u3067\u3082\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u3042\u308b\u95a2\u6570\u547c\u3073\u51fa\u3057\u3067x\u304cv\u306b\u675f\u7e1b\u3055\u308c\u305f\u304b\u3089\u3068\u8a00\u3063\u3066\u3001\u5225\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u306ex\u3082\u540c\u3058v\u306b\u306a\u308b\u3068\u306f\u9650\u3089\u306a\u3044\u306e\u3067\u3001\u975e\u7834\u58ca\u7684\uff08\u95a2\u6570\u7684\uff09\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u74b0\u5883\u3092\u7528\u3044\u3066\u3001Eval\u306e\uff08\u5b9f\u88c5\u3067\u306f\u306a\u304f\u6570\u5b66\u7684\u306a\uff09\u5b9a\u7fa9\u3092\u66f8\u304d\u4e0b\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\nEval(i, env) = i\n\nEval(x, env) = \u74b0\u5883env\u306b\u304a\u3051\u308b\u5909\u6570x\u306e\u5024\u3092\u8fd4\u3059\n\nEval(E1-E2, env) =\n  Eval(E1, env) = i \u304b\u3064 Eval(E2, env) = j \u3068\u3057\u3066\u3001\n  i \u304b\u3089 j \u3092\u5f15\u3044\u305f\u6574\u6570\u3092\u8fd4\u3059\n\nEval(if E1 <= E2 then E3 else E4, env) =\n  Eval(E1, env) = i \u304b\u3064 Eval(E2, env) = j \u3068\u3057\u3066\u3001\n  i <= j \u306a\u3089\u3070 Eval(E3, env) \u3092\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 Eval(E4, env) \u3092\u8fd4\u3059\n\nEval(function(x){E}, env) = (function(x){E}, env)\uff08\u5f8c\u3067\u8aac\u660e\u3059\u308b\u300c\u30af\u30ed\u30fc\u30b8\u30e3\u300d\uff09\n\nEval(E1(E2), env) =\n  Eval(E1, env) = (function(x){E}, env') \u304b\u3064 Eval(E2, env) = v \u3068\u3057\u3066\u3001\n  env' \u306b x \u304b\u3089 v \u3078\u306e\u5bfe\u5fdc\u3092\u4ed8\u3051\u52a0\u3048\u305f\u74b0\u5883\u3092 env'' \u3068\u3057\u3001\n  Eval(E, env'') \u3092\u8fd4\u3059\n\n\u307e\u305a\u3001\u5909\u6570x\u306e\u8a55\u4fa1\u3067\u306f\u3001\u74b0\u5883env\u304b\u3089x\u306e\u5024\u3092\u898b\u3064\u3051\u51fa\u3057\u3001\u305d\u308c\u3092\u8fd4\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u74b0\u5883\u306e\u305d\u3082\u305d\u3082\u306e\u76ee\u7684\u304b\u3089\u3057\u3066\u5f53\u305f\u308a\u524d\u3067\u3059\u306d\u3002\n\u6b21\u306b\u3001\u95a2\u6570function(x){E}\u306e\u8a55\u4fa1\u306f\u3001\u524d\u56de\u306f\u95a2\u6570\u305d\u306e\u3082\u306e\u3092\u305d\u306e\u307e\u307e\u8fd4\u3057\u3066\u3057\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u306f\u95a2\u6570\u3068\u73fe\u5728\u306e\u74b0\u5883env\u3092\u7d44\u306b\u3057\u3066\u8fd4\u3057\u307e\u3059\u3002\u3053\u306e\u7d44\u306e\u3053\u3068\u3092\u30af\u30ed\u30fc\u30b8\u30e3(closure)\u3068\u8a00\u3044\u307e\u3059\u3002\n\u3069\u3046\u3057\u3066\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\u6b21\u306e\u3088\u3046\u306a\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u3092\u8003\u3048\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nlet y = 3 in\nlet f = function(x){x-y} in\nlet y = 7 in\nf(42) - y\n\nlet x = E1 in E2\u3068\u3044\u3046\u5f62\u306e\u5f0f\u306f(function(x){E2})(E1)\u3068\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305f\u3053\u3068\u3092\u601d\u3044\u51fa\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u69cb\u6587\u7cd6\u8863\uff09\u3002\n\u4e0a\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\uff08\u5f0f\uff09\u306e\u5b9f\u884c\u7d50\u679c\uff08\u5024\uff09\u306f\u3044\u304f\u3064\u306b\u306a\u308b\u3079\u304d\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\u524d\u56de\u306e\u4ee3\u5165\u306b\u57fa\u3065\u304f\u610f\u5473\u8ad6\u3084\u5b9f\u88c5\u3067\u8003\u3048\u308b\u3068\u3001\u307e\u305a1\u884c\u76ee\u306elet y = 3 in\u306b\u3088\u308a\u3001function(x){x-y}\u306ey\u306b3\u304c\u4ee3\u5165\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\nlet f = function(x){x-3} in\nlet y = 7 in\nf(42) - y\n\nf(42) - y\u306ey\u306f\u3001let y = 3 in\u306ey\u3068\u306f\u5225\u306ey\u306a\u306e\u3067\u4ee3\u5165\u3055\u308c\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u524d\u56de\u306e\u5b9a\u7fa9\u3067\u3082\u3001Subst(function(x){E},x,v) = function(x){E}\u3060\u3063\u305f\u306e\u3067\u3001\u78ba\u304b\u306b\u305d\u3046\u306a\u308a\u307e\u3059\uff01\n\u6b21\u306b\u3001let f = function(x){x-3} in\u306b\u5f93\u3044\u3001f\u306bfunction(x){x-3}\u3092\u4ee3\u5165\u3057\u307e\u3059\u3002\nlet y = 7 in\n(function(x){x-3})(42) - y\n\nlet y = 7 in\u306b\u3088\u308ay\u306b7\u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002\n(function(x){x-3})(42) - 7\n\n(function(x){x-3})(42)\u3092\u8a08\u7b97\u3059\u308b\u306842-3\u3059\u306a\u308f\u306139\u306b\u306a\u308b\u306e\u3067\u3001\u7b54\u306f39-7\u3059\u306a\u308f\u306132\u3067\u3059\u3002\n\u4e0a\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u306e\u8a55\u4fa1\u3067\u3001function(x){x-y}\u306ey\u306b\u306f7\u3067\u306f\u306a\u304f3\u304c\u4ee3\u5165\u3055\u308c\u305f\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u3088\u3046\u306b\u3001\u95a2\u6570\u306e\u672c\u4f53\u306e\u4e2d\u306e\u5f15\u6570\u4ee5\u5916\u306e\u5909\u6570\uff08\u81ea\u7531\u5909\u6570(free variable)\u3068\u8a00\u3044\u307e\u3059\uff09\u306e\u5024\u306f\u3001\u305d\u306e\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u304d\u306e\u5024\uff08y = 7\uff09\u3067\u306f\u306a\u304f\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u3068\u304d\u306e\u5024\uff08y = 3\uff09\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u9759\u7684\u675f\u7e1b(static binding)\u306a\u3044\u3057\u30ec\u30ad\u30b7\u30ab\u30eb\u30b9\u30b3\u30fc\u30d7\u3068\u8a00\u3044\u307e\u3059\u3002\n\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u304d\u3067\u306f\u306a\u304f\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u3068\u304d\u306e\u5024\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001\u95a2\u6570\u306e\u5b9a\u7fa9\u3068\u4e00\u7dd2\u306b\u305d\u306e\u3068\u304d\u306e\u74b0\u5883\u3092\u899a\u3048\u3066\u304a\u304f\u3001\u3059\u306a\u308f\u3061\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3059\u3002\n\u3061\u3087\u3063\u3068\u3084\u3084\u3053\u3057\u304b\u3063\u305f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u7e70\u308a\u8fd4\u3059\u3068\u8981\u70b9\u306f\u4ee5\u4e0b\u306e2\u3064\u3067\u3059\u3002\n\n\u300c\u95a2\u6570\u3068\u3001\u305d\u308c\u304c\u5b9a\u7fa9\u3055\u308c\u305f\u3068\u304d\u306e\u74b0\u5883\u3068\u306e\u7d44\u300d\u304c\u30af\u30ed\u30fc\u30b8\u30e3\n\u95a2\u6570\u306e\u672c\u4f53\u306f\u3001\u547c\u3073\u51fa\u3057\u6642\u3067\u306f\u306a\u304f\u5b9a\u7fa9\u6642\u306e\u74b0\u5883\u3067\u8a55\u4fa1\n\n\u5f8c\u8005\u3092\u3075\u307e\u3048\u308b\u3068\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u8a55\u4fa1Eval(E1(E2), env)\u306b\u304a\u3044\u3066\u3001\u547c\u3073\u51fa\u3057\u6642\u306e\u74b0\u5883env\u3067\u306f\u306a\u304f\u3001\u30af\u30ed\u30fc\u30b8\u30e3\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u5b9a\u7fa9\u6642\u306e\u74b0\u5883env'\u306b\u57fa\u3065\u3044\u3066\u672c\u4f53\u3092\u8a55\u4fa1\u3057\u3066\u3044\u308b\u7406\u7531\u3082\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u96e3\u3057\u3044\u8a71\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304cOCaml\u3067\u5b9f\u88c5\u3057\u307e\u3059\uff01 exp\u306e\u5b9a\u7fa9\u306f\u524d\u56de\u3068\u540c\u3058\u3067\u3059\u3002\n(* \u74b0\u5883\u3092\u8868\u3059\u9023\u60f3\u30ea\u30b9\u30c8\uff08\u624b\u629c\u304d\u3067\u3059\uff09 *)\ntype env = (string * valu) list\n\n(* eval\u306e\u7d50\u679c\uff08\u5024\uff09\u3092\u8868\u3059\u30c7\u30fc\u30bf\u578b *)\nand valu = VInt of int\n  | Closure of string * exp * env\n\nlet rec eval e0 env =\n  match e0 with Int i -> VInt i\n  | Var x -> List.assoc x env\n  | Sub(e1, e2) ->\n      let VInt i = eval e1 env in\n      let VInt j = eval e2 env in\n      VInt(i - j)\n  | If(e1, e2, e3, e4) ->\n      let VInt i = eval e1 env in\n      let VInt j = eval e2 env in\n      if i <= j then eval e3 env else eval e4 env\n  | Fun(x, e) -> Closure(x, e, env)\n  | App(e1, e2) ->\n      let Closure(x, e, env') = eval e1 env in\n      let v = eval e2 env in\n      let env'' = (x, v) :: env' in\n      eval e env''\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u3082\u524d\u56de\u3068\u540c\u3058\u3067\u3059\u304c\u3001eval\u306e\u7b2c2\u5f15\u6570\u3068\u3057\u3066\u7a7a\u306e\u74b0\u5883[]\u3092\u4e0e\u3048\u307e\u3059\u3002\n# eval one_plus_two [] ;;\n- : valu = VInt 3\n# eval abs [] ;;\n- : valu = VInt 42\n# eval loop [] ;;\n  C-c C-cInterrupted.\n# eval sum10000 [] ;;\n- : valu = VInt 50005000\n\n\u3082\u3061\u308d\u3093\u3001\u30af\u30ed\u30fc\u30b8\u30e3\u306e\u8aac\u660e\u306b\u4f7f\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u3082\u3061\u3083\u3093\u3068\u52d5\u304d\u307e\u3059\u3002\n# let clo =\n    _Let(\"y\", Int 3,\n         _Let(\"f\", Fun(\"x\", Sub(Var \"x\", Var \"y\")),\n              _Let (\"y\", Int 7,\n                    Sub(App(Var \"f\", Int 42), Var \"y\")))) ;;\nval clo : exp =\n  App\n   (Fun (\"y\",\n     App\n      (Fun (\"f\",\n        App (Fun (\"y\", Sub (App (Var \"f\", Int 42), Var \"y\")), Int 7)),\n      Fun (\"x\", Sub (Var \"x\", Var \"y\")))),\n   Int 3)\n# eval clo [] ;;\n- : valu = VInt 32\n\n\u3061\u306a\u307f\u306b\u521d\u671f\u306eLISP\u306f\u3001\u95a2\u6570\u306e\u5b9a\u7fa9\u6642\u3067\u306f\u306a\u304f\u547c\u3073\u51fa\u3057\u6642\u306e\u74b0\u5883\u3067\u672c\u4f53\u304c\u8a55\u4fa1\u3055\u308c\u308b\u52d5\u7684\u675f\u7e1b(dynamic binding)\u3067\u3057\u305f\u3002\u3053\u308c\u306f\u610f\u56f3\u3057\u305f\u52d5\u4f5c\u3067\u306f\u306a\u304f\u30d0\u30b0\u3060\u3063\u305f\u3088\u3046\u3067\u3059\u3002\u30af\u30ed\u30fc\u30b8\u30e3\u306f\u5f8c\u306bJava\u3067\u3082\u8457\u540d\u306b\u306a\u3063\u305f\u30ac\u30a4\u30fb\u30b9\u30c6\u30a3\u30fc\u30eb\u3089\u304cScheme\u306e\u5b9f\u88c5\u3067\u5c0e\u5165\u3057\u307e\u3057\u305f\uff08\u7406\u8ad6\u306f\u305d\u308c\u4ee5\u524d\u304b\u3089\u3042\u308a\u307e\u3057\u305f\u304c\uff09\u3002\n\u7d42\u308f\u308a\u3002\n[\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306e\u5b9a\u7fa9\uff06\u5b9f\u88c5\u306e\u4ed5\u65b9\u306e\u4f8b](http://qiita.com/esumii/items/0eeb30f35c2a9da4ab8a)\u3067\u300c\u9700\u8981\u304c\u3042\u308c\u3070\u5f8c\u3067\u66f8\u304f\u300d\u3068\u66f8\u3044\u305f\u3001\u300c\u3088\u308a\u52b9\u7387\u7684\u306a\u5b9f\u88c5\u300d\u3067\u3059\uff08\u6570\u4ef6:-)\u306e\u9700\u8981\u304c\u3042\u3063\u305f\u306e\u3067\u2026\uff09\u3002\u524d\u306e\u8a18\u4e8b\u306f\u8aad\u3093\u3067\u3044\u308b\u3068\u4eee\u5b9a\u3057\u307e\u3059\u3002\n\n\u3055\u3066\u3001\u524d\u306e\u5b9f\u88c5\u3067\u306f\u3001\u95a2\u6570``function(x){E}``\u3092\u5024``v``\u306b\u9069\u7528\u3059\u308b\u3068\u3001\u672c\u4f53\u3067\u3042\u308b\u5f0f``E``\u306e\u62bd\u8c61\u69cb\u6587\u6728\u3092\u3059\u3079\u3066\u8fbf\u3063\u3066\u3001\u305d\u306e\u4e2d\u306e\u5909\u6570``x``\u3092\u3059\u3079\u3066``v``\u3067\u7f6e\u304d\u63db\u3048\u305f\u5f0f\u3092\u4f5c\u3063\u3066\u3044\u307e\u3057\u305f\uff08``subst``\uff09\u3002\u3053\u308c\u306f\u660e\u3089\u304b\u306b\u975e\u52b9\u7387\u7684\u3067\u3059\u3002\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u305f\u3073\u306b\u3001\u672c\u4f53\u306e\u62bd\u8c61\u69cb\u6587\u6728\u3092\u4f5c\u308a\u76f4\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304b\u3089\uff01\n\n\u305d\u3053\u3067\u3001\u5909\u6570\u306b\u672c\u5f53\u306b\u5024\u3092\u4ee3\u5165\u3057\u3066\u65b0\u3057\u3044\u5f0f\u3092\u4f5c\u308a\u76f4\u3059\u304b\u308f\u308a\u306b\u3001\u3069\u306e\u5909\u6570\u306b\u3069\u3046\u3044\u3046\u5024\u304c\u4e0e\u3048\u3089\u308c\u305f\uff08**\u675f\u7e1b**(binding)\u3068\u8a00\u3044\u307e\u3059\uff09\u306e\u304b\u3001\u899a\u3048\u3066\u304a\u304f\u30c7\u30fc\u30bf\u69cb\u9020\u3092\u7528\u610f\u3057\u307e\u3059\u3002\u3053\u308c\u3092**\u74b0\u5883**(environment)\u3068\u8a00\u3044\u307e\u3059\u3002\n\n\u74b0\u5883\u306f\u9023\u60f3\u30ea\u30b9\u30c8\u3067\u3082\u30cf\u30c3\u30b7\u30e5\u30c6\u30fc\u30d6\u30eb\u3067\u3082\u63a2\u7d22\u6728\u3067\u3082\u3001\u5909\u6570\u304b\u3089\u5024\u3078\u306e\u5bfe\u5fdc\uff08\u5199\u50cf\uff09\u3092\u8868\u3057\u3066\u3044\u308c\u3070\u3001\u4f55\u3067\u3082\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u3042\u308b\u95a2\u6570\u547c\u3073\u51fa\u3057\u3067``x``\u304c``v``\u306b\u675f\u7e1b\u3055\u308c\u305f\u304b\u3089\u3068\u8a00\u3063\u3066\u3001\u5225\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e``x``\u3082\u540c\u3058``v``\u306b\u306a\u308b\u3068\u306f\u9650\u3089\u306a\u3044\u306e\u3067\u3001\u975e\u7834\u58ca\u7684\uff08\u95a2\u6570\u7684\uff09\u306a\u30c7\u30fc\u30bf\u69cb\u9020\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u74b0\u5883\u3092\u7528\u3044\u3066\u3001``Eval``\u306e\uff08\u5b9f\u88c5\u3067\u306f\u306a\u304f\u6570\u5b66\u7684\u306a\uff09\u5b9a\u7fa9\u3092\u66f8\u304d\u4e0b\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nEval(i, env) = i\n\nEval(x, env) = \u74b0\u5883env\u306b\u304a\u3051\u308b\u5909\u6570x\u306e\u5024\u3092\u8fd4\u3059\n\nEval(E1-E2, env) =\n  Eval(E1, env) = i \u304b\u3064 Eval(E2, env) = j \u3068\u3057\u3066\u3001\n  i \u304b\u3089 j \u3092\u5f15\u3044\u305f\u6574\u6570\u3092\u8fd4\u3059\n\nEval(if E1 <= E2 then E3 else E4, env) =\n  Eval(E1, env) = i \u304b\u3064 Eval(E2, env) = j \u3068\u3057\u3066\u3001\n  i <= j \u306a\u3089\u3070 Eval(E3, env) \u3092\u3001\u305d\u3046\u3067\u306a\u3051\u308c\u3070 Eval(E4, env) \u3092\u8fd4\u3059\n\nEval(function(x){E}, env) = (function(x){E}, env)\uff08\u5f8c\u3067\u8aac\u660e\u3059\u308b\u300c\u30af\u30ed\u30fc\u30b8\u30e3\u300d\uff09\n\nEval(E1(E2), env) =\n  Eval(E1, env) = (function(x){E}, env') \u304b\u3064 Eval(E2, env) = v \u3068\u3057\u3066\u3001\n  env' \u306b x \u304b\u3089 v \u3078\u306e\u5bfe\u5fdc\u3092\u4ed8\u3051\u52a0\u3048\u305f\u74b0\u5883\u3092 env'' \u3068\u3057\u3001\n  Eval(E, env'') \u3092\u8fd4\u3059\n```\n\n\u307e\u305a\u3001\u5909\u6570``x``\u306e\u8a55\u4fa1\u3067\u306f\u3001\u74b0\u5883``env``\u304b\u3089``x``\u306e\u5024\u3092\u898b\u3064\u3051\u51fa\u3057\u3001\u305d\u308c\u3092\u8fd4\u3057\u307e\u3059\u3002\u3053\u308c\u306f\u74b0\u5883\u306e\u305d\u3082\u305d\u3082\u306e\u76ee\u7684\u304b\u3089\u3057\u3066\u5f53\u305f\u308a\u524d\u3067\u3059\u306d\u3002\n\n\u6b21\u306b\u3001\u95a2\u6570``function(x){E}``\u306e\u8a55\u4fa1\u306f\u3001\u524d\u56de\u306f\u95a2\u6570\u305d\u306e\u3082\u306e\u3092\u305d\u306e\u307e\u307e\u8fd4\u3057\u3066\u3057\u307e\u3057\u305f\u304c\u3001\u4eca\u56de\u306f**\u95a2\u6570\u3068\u73fe\u5728\u306e\u74b0\u5883``env``\u3092\u7d44\u306b\u3057\u3066**\u8fd4\u3057\u307e\u3059\u3002\u3053\u306e\u7d44\u306e\u3053\u3068\u3092**\u30af\u30ed\u30fc\u30b8\u30e3**(closure)\u3068\u8a00\u3044\u307e\u3059\u3002\n\n\u3069\u3046\u3057\u3066\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\u6b21\u306e\u3088\u3046\u306a\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u3092\u8003\u3048\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nlet y = 3 in\nlet f = function(x){x-y} in\nlet y = 7 in\nf(42) - y\n```\n\n```let x = E1 in E2```\u3068\u3044\u3046\u5f62\u306e\u5f0f\u306f```(function(x){E2})(E1)```\u3068\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305f\u3053\u3068\u3092\u601d\u3044\u51fa\u3057\u3066\u304f\u3060\u3055\u3044\uff08\u69cb\u6587\u7cd6\u8863\uff09\u3002\n\n\u4e0a\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\uff08\u5f0f\uff09\u306e\u5b9f\u884c\u7d50\u679c\uff08\u5024\uff09\u306f\u3044\u304f\u3064\u306b\u306a\u308b\u3079\u304d\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\u524d\u56de\u306e\u4ee3\u5165\u306b\u57fa\u3065\u304f\u610f\u5473\u8ad6\u3084\u5b9f\u88c5\u3067\u8003\u3048\u308b\u3068\u3001\u307e\u305a1\u884c\u76ee\u306e```let y = 3 in```\u306b\u3088\u308a\u3001``function(x){x-y}``\u306e``y``\u306b``3``\u304c\u4ee3\u5165\u3055\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n\n```\nlet f = function(x){x-3} in\nlet y = 7 in\nf(42) - y\n```\n\n```f(42) - y```\u306e``y``\u306f\u3001```let y = 3 in```\u306e``y``\u3068\u306f**\u5225\u306e``y``\u306a\u306e\u3067\u4ee3\u5165\u3055\u308c\u306a\u3044**\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u524d\u56de\u306e\u5b9a\u7fa9\u3067\u3082\u3001``Subst(function(x){E},x,v) = function(x){E}``\u3060\u3063\u305f\u306e\u3067\u3001\u78ba\u304b\u306b\u305d\u3046\u306a\u308a\u307e\u3059\uff01\n\n\u6b21\u306b\u3001```let f = function(x){x-3} in```\u306b\u5f93\u3044\u3001``f``\u306b``function(x){x-3}``\u3092\u4ee3\u5165\u3057\u307e\u3059\u3002\n\n```\nlet y = 7 in\n(function(x){x-3})(42) - y\n```\n\n``let y = 7 in``\u306b\u3088\u308a``y``\u306b``7``\u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002\n\n```\n(function(x){x-3})(42) - 7\n```\n\n``(function(x){x-3})(42)``\u3092\u8a08\u7b97\u3059\u308b\u3068``42-3``\u3059\u306a\u308f\u3061``39``\u306b\u306a\u308b\u306e\u3067\u3001\u7b54\u306f``39-7``\u3059\u306a\u308f\u3061``32``\u3067\u3059\u3002\n\n\u4e0a\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u306e\u8a55\u4fa1\u3067\u3001**``function(x){x-y}``\u306e``y``\u306b\u306f``7``\u3067\u306f\u306a\u304f``3``\u304c\u4ee3\u5165\u3055\u308c\u305f**\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3053\u306e\u3088\u3046\u306b\u3001\u95a2\u6570\u306e\u672c\u4f53\u306e\u4e2d\u306e\u5f15\u6570\u4ee5\u5916\u306e\u5909\u6570\uff08\u81ea\u7531\u5909\u6570(free variable)\u3068\u8a00\u3044\u307e\u3059\uff09\u306e\u5024\u306f\u3001\u305d\u306e\u95a2\u6570\u304c**\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u304d\u306e\u5024\uff08``y = 7``\uff09\u3067\u306f\u306a\u304f\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u3068\u304d\u306e\u5024\uff08``y = 3``\uff09**\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u9759\u7684\u675f\u7e1b(static binding)\u306a\u3044\u3057\u30ec\u30ad\u30b7\u30ab\u30eb\u30b9\u30b3\u30fc\u30d7\u3068\u8a00\u3044\u307e\u3059\u3002\n\n\u95a2\u6570\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u304d\u3067\u306f\u306a\u304f\u3001\u5b9a\u7fa9\u3055\u308c\u305f\u3068\u304d\u306e\u5024\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001\u95a2\u6570\u306e\u5b9a\u7fa9\u3068\u4e00\u7dd2\u306b\u305d\u306e\u3068\u304d\u306e\u74b0\u5883\u3092\u899a\u3048\u3066\u304a\u304f\u3001\u3059\u306a\u308f\u3061\u30af\u30ed\u30fc\u30b8\u30e3\u3092\u4f5c\u308b\u5fc5\u8981\u304c\u3042\u308b\u306e\u3067\u3059\u3002\n\n\u3061\u3087\u3063\u3068\u3084\u3084\u3053\u3057\u304b\u3063\u305f\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001\u7e70\u308a\u8fd4\u3059\u3068\u8981\u70b9\u306f\u4ee5\u4e0b\u306e2\u3064\u3067\u3059\u3002\n\n* \u300c\u95a2\u6570\u3068\u3001\u305d\u308c\u304c\u5b9a\u7fa9\u3055\u308c\u305f\u3068\u304d\u306e\u74b0\u5883\u3068\u306e\u7d44\u300d\u304c\u30af\u30ed\u30fc\u30b8\u30e3\n* \u95a2\u6570\u306e\u672c\u4f53\u306f\u3001\u547c\u3073\u51fa\u3057\u6642\u3067\u306f\u306a\u304f\u5b9a\u7fa9\u6642\u306e\u74b0\u5883\u3067\u8a55\u4fa1\n\n\u5f8c\u8005\u3092\u3075\u307e\u3048\u308b\u3068\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u8a55\u4fa1``Eval(E1(E2), env)``\u306b\u304a\u3044\u3066\u3001\u547c\u3073\u51fa\u3057\u6642\u306e\u74b0\u5883``env``\u3067\u306f\u306a\u304f\u3001\u30af\u30ed\u30fc\u30b8\u30e3\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u5b9a\u7fa9\u6642\u306e\u74b0\u5883``env'``\u306b\u57fa\u3065\u3044\u3066\u672c\u4f53\u3092\u8a55\u4fa1\u3057\u3066\u3044\u308b\u7406\u7531\u3082\u308f\u304b\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u96e3\u3057\u3044\u8a71\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304cOCaml\u3067\u5b9f\u88c5\u3057\u307e\u3059\uff01 ``exp``\u306e\u5b9a\u7fa9\u306f\u524d\u56de\u3068\u540c\u3058\u3067\u3059\u3002\n\n```ocaml:\n(* \u74b0\u5883\u3092\u8868\u3059\u9023\u60f3\u30ea\u30b9\u30c8\uff08\u624b\u629c\u304d\u3067\u3059\uff09 *)\ntype env = (string * valu) list\n\n(* eval\u306e\u7d50\u679c\uff08\u5024\uff09\u3092\u8868\u3059\u30c7\u30fc\u30bf\u578b *)\nand valu = VInt of int\n  | Closure of string * exp * env\n\nlet rec eval e0 env =\n  match e0 with Int i -> VInt i\n  | Var x -> List.assoc x env\n  | Sub(e1, e2) ->\n      let VInt i = eval e1 env in\n      let VInt j = eval e2 env in\n      VInt(i - j)\n  | If(e1, e2, e3, e4) ->\n      let VInt i = eval e1 env in\n      let VInt j = eval e2 env in\n      if i <= j then eval e3 env else eval e4 env\n  | Fun(x, e) -> Closure(x, e, env)\n  | App(e1, e2) ->\n      let Closure(x, e, env') = eval e1 env in\n      let v = eval e2 env in\n      let env'' = (x, v) :: env' in\n      eval e env''\n```\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u3082\u524d\u56de\u3068\u540c\u3058\u3067\u3059\u304c\u3001eval\u306e\u7b2c2\u5f15\u6570\u3068\u3057\u3066\u7a7a\u306e\u74b0\u5883``[]``\u3092\u4e0e\u3048\u307e\u3059\u3002\n\n```ocaml:\n# eval one_plus_two [] ;;\n- : valu = VInt 3\n# eval abs [] ;;\n- : valu = VInt 42\n# eval loop [] ;;\n  C-c C-cInterrupted.\n# eval sum10000 [] ;;\n- : valu = VInt 50005000\n```\n\n\u3082\u3061\u308d\u3093\u3001\u30af\u30ed\u30fc\u30b8\u30e3\u306e\u8aac\u660e\u306b\u4f7f\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u4f8b\u3082\u3061\u3083\u3093\u3068\u52d5\u304d\u307e\u3059\u3002\n\n```ocaml:\n# let clo =\n    _Let(\"y\", Int 3,\n         _Let(\"f\", Fun(\"x\", Sub(Var \"x\", Var \"y\")),\n              _Let (\"y\", Int 7,\n                    Sub(App(Var \"f\", Int 42), Var \"y\")))) ;;\nval clo : exp =\n  App\n   (Fun (\"y\",\n     App\n      (Fun (\"f\",\n        App (Fun (\"y\", Sub (App (Var \"f\", Int 42), Var \"y\")), Int 7)),\n      Fun (\"x\", Sub (Var \"x\", Var \"y\")))),\n   Int 3)\n# eval clo [] ;;\n- : valu = VInt 32\n```\n\n\u3061\u306a\u307f\u306b\u521d\u671f\u306eLISP\u306f\u3001\u95a2\u6570\u306e\u5b9a\u7fa9\u6642\u3067\u306f\u306a\u304f\u547c\u3073\u51fa\u3057\u6642\u306e\u74b0\u5883\u3067\u672c\u4f53\u304c\u8a55\u4fa1\u3055\u308c\u308b\u52d5\u7684\u675f\u7e1b(dynamic binding)\u3067\u3057\u305f\u3002\u3053\u308c\u306f\u610f\u56f3\u3057\u305f\u52d5\u4f5c\u3067\u306f\u306a\u304f\u30d0\u30b0\u3060\u3063\u305f\u3088\u3046\u3067\u3059\u3002\u30af\u30ed\u30fc\u30b8\u30e3\u306f\u5f8c\u306bJava\u3067\u3082\u8457\u540d\u306b\u306a\u3063\u305f\u30ac\u30a4\u30fb\u30b9\u30c6\u30a3\u30fc\u30eb\u3089\u304cScheme\u306e\u5b9f\u88c5\u3067\u5c0e\u5165\u3057\u307e\u3057\u305f\uff08\u7406\u8ad6\u306f\u305d\u308c\u4ee5\u524d\u304b\u3089\u3042\u308a\u307e\u3057\u305f\u304c\uff09\u3002\n\n\u7d42\u308f\u308a\u3002\n", "tags": ["\u95a2\u6570\u578b\u8a00\u8a9e", "OCaml", "Scheme", "lisp", "\u95a2\u6570\u578b\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0"]}