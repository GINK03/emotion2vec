{"context": " More than 1 year has passed since last update.\u3059\u3054\u3044\u5197\u9577\u306a\u6c17\u304c\u3059\u308b\u3051\u3069\n\nhubot with chatwork adapter\nredis\nredis\u306eData Volume Container\n\n\u306e3\u3064\u306edocker\u30b3\u30f3\u30c6\u30ca\u3092docker-compose\u3067\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u524d\u63d0\n\nMac OS X 10.10.3\nvirtualbox 4.3.28\nhomebrew\nnode.js\n\n\n\u624b\u9806\n\ndocker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306fboot2docker\u4e0a\u3067docker\u3092\u52d5\u304b\u3057\u307e\u3059\u3002\nbrew install boot2docker\n\nboot2docker VM\u3092\u4f5c\u6210\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\nboot2docker init\nboot2docker start\n\n\u74b0\u5883\u5909\u6570\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n$(boot2docker shellinit)\n\n\ndocker-compose\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nbrew install docker-compose\n\n\nhubot\u74b0\u5883\u3092\u4f5c\u308b\n\u30ed\u30fc\u30ab\u30eb\u306bhubot\u74b0\u5883\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u516c\u5f0f\u306b\u5023\u3063\u3066yeoman\u3067\u3072\u306a\u5f62\u3092\u751f\u6210\u3057\u307e\u3059\u3002\nHUBOT\nnpm install -g yo generator-hubot\nmkdir myhubot\ncd myhubot\nyo hubot\n\n\u5e7e\u3064\u304b\u8cea\u554f\u3055\u308c\u307e\u3059\u3002Bot adapter\u306b\u306fchatwork\u3068\u5165\u529b\u3057\u307e\u3059\u3002\n\u3072\u306a\u5f62\u304c\u751f\u6210\u3055\u308c\u305f\u3089\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308bexternal-scripts.json\u3092\u958b\u304d\u307e\u3059\u3002\n\u4eca\u56deheroku\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067hubot-heroku-keepalive\u3092\u6d88\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nhubot\u30b3\u30f3\u30c6\u30ca\u306eDockerfile\u3092\u66f8\u304f\n\u4e0a\u8a18\u3067hubot\u306e\u3072\u306a\u5f62\u3092\u4f5c\u3063\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306bDockerfile\u3092\u7f6e\u304d\u307e\u3059\u3002\nFROM node:latest\n\nENV BOT_HOME /bot\n\nRUN mkdir $BOT_HOME\nWORKDIR $BOT_HOME\n\nADD ./package.json $BOT_HOME/\nRUN npm install\n\nADD . $BOT_HOME\n\nCMD [\"bin/hubot\", \"--adapter\", \"chatwork\"]\n\n\u5148\u306bpackage.json\u3060\u3051\u3092ADD\u3057\u3066npm install\u3059\u308b\u3053\u3068\u3067\u3001package.json\u306b\u5909\u66f4\u304c\u306a\u3051\u308c\u3070build\u3092\u30b9\u30ad\u30c3\u30d7\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002Rails\u306eDockerfile\u5185\u3067Gemfile\u306b\u5bfe\u3057\u3066\u4f7f\u308f\u308c\u3066\u3044\u308b\u624b\u6cd5\u3092\u771f\u4f3c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n.dockerignore\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\nbuild\u6642\u306b\u5909\u66f4\u304c\u3042\u3063\u305f\u3053\u3068\u3092\u691c\u77e5\u3057\u3066\u307b\u3057\u304f\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u306f\u7121\u8996\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n## node\nnode_modules\n\n.git\n\n## log\n.hubot_history\n\n## OSX\n.DS_Store\n\n\ndocker-compose.yml\u3092\u66f8\u304f\nhubot\u306fDockerfile\u304b\u3089build\u3001redis\u3068Data Volume Container\u306fimage\u304b\u3089\u4f5c\u308a\u307e\u3059\u3002\n\u3053\u306edocker-compose.yml\u3082\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u306b\u7f6e\u304d\u307e\u3059\u3002\nredis:\n  restart: always\n  image: redis:latest\n  command: redis-server --appendonly yes\n  volumes_from:\n    - storage\n\nstorage:\n  restart: always\n  image: busybox:latest\n  volumes:\n    - /var/lib/redis:/data\n\nhubot:\n  restart: always\n  build: .\n  ports:\n    - '8190:8080'\n  environment:\n    REDIS_URL: redis://redis:6379\n    HUBOT_CHATWORK_TOKEN: \n    HUBOT_CHATWORK_ROOMS: \n    HUBOT_CHATWORK_API_RATE: 420\n    TZ: Asia/Tokyo\n  links:\n    - redis\n\nhubot\u30b3\u30f3\u30c6\u30ca\u306e\u74b0\u5883\u5909\u6570\u306b\u306fredis\u306e\u63a5\u7d9a\u306b\u5fc5\u8981\u306aREDIS_URL\u3068\u3001chatwork\u7528hubot\u30a2\u30c0\u30d7\u30bf\u30fc\u306e\u74b0\u5883\u5909\u6570\u3001\u3042\u3068\u306f\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u8a2d\u5b9a\u3092\u3059\u308bTZ\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u74b0\u5883\u5909\u6570\u306f\u3001\u5024\u3092\u7a7a\u306b\u3059\u308b\u3053\u3068\u3067docker-compose up\u6642\u306bhost\u30de\u30b7\u30f3\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u540c\u3058\u540d\u524d\u306e\u74b0\u5883\u5909\u6570\u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\u30bb\u30ad\u30e5\u30a2\u306a\u60c5\u5831\u3092\u66f8\u304d\u305f\u304f\u306a\u3044\u6642\u306b\u4fbf\u5229\u3067\u3059\u306d\u3002\nCompose yml - Docker Documentation\n\u4e00\u5fdc8190\u30dd\u30fc\u30c8\u3067hubot\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001chatwork\u3068\u9023\u643a\u3059\u308b\u3060\u3051\u306a\u3089\u3053\u308c\u306f\u7279\u306b\u5fc5\u8981\u306a\u3044\u3067\u3059\u3002\n\n\u8d77\u52d5\n\u5148\u306bhost\u306eMac\u5074\u3067chatwork\u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nexport HUBOT_CHATWORK_TOKEN=XXXXXXXXXXXXXXXXXX\nexport HUBOT_CHATWORK_ROOMS=XXXXXX,XXXXXX\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002\ndocker-compose up -d\n\nup\u30b3\u30de\u30f3\u30c9\u306fbuild\u304b\u3089\u8d77\u52d5\u307e\u3067\u5168\u90e8\u307e\u3068\u3081\u3066\u3084\u3063\u3066\u304f\u308c\u307e\u3059\u3002\nCompose command line - Docker Documentation\n-d\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3067hubot\u304c\u52d5\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002chatwork\u4e0a\u3067\u8a71\u3057\u304b\u3051\u305f\u3089\u306a\u3093\u304b\u7b54\u3048\u3066\u304f\u308c\u308b\u3068\u601d\u3046\u3002\n\u30bd\u30fc\u30b9\u306fGitHub\u306b\u7f6e\u3044\u3066\u3044\u307e\u3059\u3002\ndistkloc/docker-hubot-chatwork\n\n\u53c2\u8003\n\n\u8907\u96d1\u306a\u69cb\u6210\u306erails\u30a2\u30d7\u30ea\u3092docker\u3067\u52d5\u304b\u3057\u305f\u3044\u5834\u5408\u306f\u3069\u3046\u3059\u308b\u3079\u304d\u304b - Qiita\nDocker + Yeoman + Hubot + Slack \u3067\u7c21\u5358bot\u4f5c\u6210\n\n\u3059\u3054\u3044\u5197\u9577\u306a\u6c17\u304c\u3059\u308b\u3051\u3069\n\n- hubot with chatwork adapter\n- redis\n- redis\u306eData Volume Container\n\n\u306e3\u3064\u306edocker\u30b3\u30f3\u30c6\u30ca\u3092docker-compose\u3067\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u524d\u63d0\n\n- Mac OS X 10.10.3\n- virtualbox 4.3.28\n- homebrew\n- node.js\n\n# \u624b\u9806\n\n## docker\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u4eca\u56de\u306fboot2docker\u4e0a\u3067docker\u3092\u52d5\u304b\u3057\u307e\u3059\u3002\n\n```sh\nbrew install boot2docker\n```\n\nboot2docker VM\u3092\u4f5c\u6210\u3057\u3066\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```sh\nboot2docker init\nboot2docker start\n```\n\u74b0\u5883\u5909\u6570\u3092\u30bb\u30c3\u30c8\u3057\u307e\u3059\u3002\n\n```sh\n$(boot2docker shellinit)\n```\n\n## docker-compose\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```sh\nbrew install docker-compose\n```\n\n## hubot\u74b0\u5883\u3092\u4f5c\u308b\n\n\u30ed\u30fc\u30ab\u30eb\u306bhubot\u74b0\u5883\u3092\u4f5c\u308a\u307e\u3059\u3002\n\u516c\u5f0f\u306b\u5023\u3063\u3066yeoman\u3067\u3072\u306a\u5f62\u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\n[HUBOT](https://hubot.github.com/docs/)\n\n```sh\nnpm install -g yo generator-hubot\nmkdir myhubot\ncd myhubot\nyo hubot\n```\n\n\u5e7e\u3064\u304b\u8cea\u554f\u3055\u308c\u307e\u3059\u3002Bot adapter\u306b\u306f`chatwork`\u3068\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u3072\u306a\u5f62\u304c\u751f\u6210\u3055\u308c\u305f\u3089\u30ab\u30ec\u30f3\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3042\u308b`external-scripts.json`\u3092\u958b\u304d\u307e\u3059\u3002\n\u4eca\u56deheroku\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067`hubot-heroku-keepalive`\u3092\u6d88\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n## hubot\u30b3\u30f3\u30c6\u30ca\u306eDockerfile\u3092\u66f8\u304f\n\n\u4e0a\u8a18\u3067hubot\u306e\u3072\u306a\u5f62\u3092\u4f5c\u3063\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b`Dockerfile`\u3092\u7f6e\u304d\u307e\u3059\u3002\n\n```\nFROM node:latest\n\nENV BOT_HOME /bot\n\nRUN mkdir $BOT_HOME\nWORKDIR $BOT_HOME\n\nADD ./package.json $BOT_HOME/\nRUN npm install\n\nADD . $BOT_HOME\n\nCMD [\"bin/hubot\", \"--adapter\", \"chatwork\"]\n```\n\n\u5148\u306b`package.json`\u3060\u3051\u3092`ADD`\u3057\u3066`npm install`\u3059\u308b\u3053\u3068\u3067\u3001`package.json`\u306b\u5909\u66f4\u304c\u306a\u3051\u308c\u3070build\u3092\u30b9\u30ad\u30c3\u30d7\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002Rails\u306eDockerfile\u5185\u3067Gemfile\u306b\u5bfe\u3057\u3066\u4f7f\u308f\u308c\u3066\u3044\u308b\u624b\u6cd5\u3092\u771f\u4f3c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n## .dockerignore\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308b\n\nbuild\u6642\u306b\u5909\u66f4\u304c\u3042\u3063\u305f\u3053\u3068\u3092\u691c\u77e5\u3057\u3066\u307b\u3057\u304f\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u306f\u7121\u8996\u3055\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n## node\nnode_modules\n\n.git\n\n## log\n.hubot_history\n\n## OSX\n.DS_Store\n```\n\n## docker-compose.yml\u3092\u66f8\u304f\n\nhubot\u306fDockerfile\u304b\u3089build\u3001redis\u3068Data Volume Container\u306fimage\u304b\u3089\u4f5c\u308a\u307e\u3059\u3002\n\u3053\u306e`docker-compose.yml`\u3082\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u306b\u7f6e\u304d\u307e\u3059\u3002\n\n```yaml\nredis:\n  restart: always\n  image: redis:latest\n  command: redis-server --appendonly yes\n  volumes_from:\n    - storage\n\nstorage:\n  restart: always\n  image: busybox:latest\n  volumes:\n    - /var/lib/redis:/data\n  \nhubot:\n  restart: always\n  build: .\n  ports:\n    - '8190:8080'\n  environment:\n    REDIS_URL: redis://redis:6379\n    HUBOT_CHATWORK_TOKEN: \n    HUBOT_CHATWORK_ROOMS: \n    HUBOT_CHATWORK_API_RATE: 420\n    TZ: Asia/Tokyo\n  links:\n    - redis\n```\n\nhubot\u30b3\u30f3\u30c6\u30ca\u306e\u74b0\u5883\u5909\u6570\u306b\u306fredis\u306e\u63a5\u7d9a\u306b\u5fc5\u8981\u306a`REDIS_URL`\u3068\u3001[chatwork\u7528hubot\u30a2\u30c0\u30d7\u30bf\u30fc](https://github.com/akiomik/hubot-chatwork)\u306e\u74b0\u5883\u5909\u6570\u3001\u3042\u3068\u306f\u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u8a2d\u5b9a\u3092\u3059\u308b`TZ`\u3092\u8a2d\u5b9a\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u74b0\u5883\u5909\u6570\u306f\u3001\u5024\u3092\u7a7a\u306b\u3059\u308b\u3053\u3068\u3067`docker-compose up`\u6642\u306bhost\u30de\u30b7\u30f3\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u540c\u3058\u540d\u524d\u306e\u74b0\u5883\u5909\u6570\u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\u4e8b\u304c\u3067\u304d\u307e\u3059\u3002\u30bb\u30ad\u30e5\u30a2\u306a\u60c5\u5831\u3092\u66f8\u304d\u305f\u304f\u306a\u3044\u6642\u306b\u4fbf\u5229\u3067\u3059\u306d\u3002\n\n[Compose yml - Docker Documentation](https://docs.docker.com/compose/yml/#environment)\n\n\u4e00\u5fdc8190\u30dd\u30fc\u30c8\u3067hubot\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u304c\u3001chatwork\u3068\u9023\u643a\u3059\u308b\u3060\u3051\u306a\u3089\u3053\u308c\u306f\u7279\u306b\u5fc5\u8981\u306a\u3044\u3067\u3059\u3002\n\n## \u8d77\u52d5\n\n\u5148\u306bhost\u306eMac\u5074\u3067chatwork\u306e\u74b0\u5883\u5909\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```sh\nexport HUBOT_CHATWORK_TOKEN=XXXXXXXXXXXXXXXXXX\nexport HUBOT_CHATWORK_ROOMS=XXXXXX,XXXXXX\n```\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```sh\ndocker-compose up -d\n```\n\n`up`\u30b3\u30de\u30f3\u30c9\u306fbuild\u304b\u3089\u8d77\u52d5\u307e\u3067\u5168\u90e8\u307e\u3068\u3081\u3066\u3084\u3063\u3066\u304f\u308c\u307e\u3059\u3002\n\n[Compose command line - Docker Documentation](https://docs.docker.com/compose/cli/#up)\n\n`-d`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3067hubot\u304c\u52d5\u304f\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002chatwork\u4e0a\u3067\u8a71\u3057\u304b\u3051\u305f\u3089\u306a\u3093\u304b\u7b54\u3048\u3066\u304f\u308c\u308b\u3068\u601d\u3046\u3002\n\u30bd\u30fc\u30b9\u306fGitHub\u306b\u7f6e\u3044\u3066\u3044\u307e\u3059\u3002\n\n[distkloc/docker-hubot-chatwork](https://github.com/distkloc/docker-hubot-chatwork)\n\n## \u53c2\u8003\n\n- [\u8907\u96d1\u306a\u69cb\u6210\u306erails\u30a2\u30d7\u30ea\u3092docker\u3067\u52d5\u304b\u3057\u305f\u3044\u5834\u5408\u306f\u3069\u3046\u3059\u308b\u3079\u304d\u304b - Qiita](http://qiita.com/k-shogo/items/3c887cbf86b3cab85b72)\n- [Docker + Yeoman + Hubot + Slack \u3067\u7c21\u5358bot\u4f5c\u6210](http://blog.fenneclab.com/docker-yeoman-hubot-slack/)\n", "tags": ["docker", "docker-compose", "Hubot", "chatwork"]}