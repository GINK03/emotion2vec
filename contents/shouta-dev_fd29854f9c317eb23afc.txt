{"context": " More than 1 year has passed since last update.\n\nFluentd\u304b\u3089Elastic Search\u3078\u6295\u5165\u3059\u308b\u30c7\u30fc\u30bf\u306e\u578b\u3092\u5909\u63db\u3059\u308b\n\n\u5143\u3005\u3084\u308a\u305f\u304b\u3063\u305f\u4e8b\n\napache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092fluentd\u3067\u53d6\u308a\u8fbc\u3093\u3067Elastic Search\u306b\u6295\u5165\u3057\u3066Kibana\u3067\u5206\u6790\u3057\u305f\u3044\n\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u306f\u3061\u3087\u3063\u3068\u5f62\u5f0f\u3092\u3044\u3058\u3063\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c\u8a18\u9332\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\nElasticSearch\u306710\u79d2\u4ee5\u4e0a\u3068\u304b\u9045\u3044\u30a2\u30af\u30bb\u30b9\u3092\u62bd\u51fa\u3057\u305f\u3044\n\n\n\u56f0\u3063\u305f\u4e8b\n\n\u6a19\u6e96\u306eapache\u306e\u30ed\u30b0\u5f62\u5f0f\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067\u81ea\u524d\u3067\u4e0b\u8a18\u306e\u611f\u3058\u3067\u6b63\u898f\u8868\u73fe\u3092\u5b9a\u7fa9\n\n\nfluent.conf\n<source>\n  type tail\n  format /^(?<host>[^ ]*) - - \\[(?<time>[^\\]]*)\\] \"(?<method>\\S+)(?: +(?<path>[^ ]*) +\\S*)?\" (\n?<code>[^ ]*) (?<size>[^ ]*) (?<restime>[^ ]*) (?<resstate>[^ ]*)(?: \"(?<referer>[^\\\"]*)\" \"(?<\nagent>[^\\\"]*)\")?.*$/\n  path /path/to/access.log\n  time_format %d/%b/%Y:%H:%M:%S %z\n  tag apache.access\n</source>\n\n\n\nrestime\u3068\u3044\u3046\u30ad\u30fc\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c\u3067\u308b\u306e\u3060\u3051\u3069\u3001\u6587\u5b57\u5217\u578b\u3067Elastic Search\u306b\u767b\u9332\u3055\u308c\u3066\u3057\u307e\u3044\u3001\u5927\u5c0f\u6bd4\u8f03\u304c\u8f9e\u66f8\u5f0f\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\n\u3069\u3046\u3082\u6a19\u6e96\u306e\u5f62\u5f0f\u3092\u4f7f\u3046\u3068\u81ea\u52d5\u7684\u306b\u578b\u5909\u63db\u3055\u308c\u308b\u3051\u3069\u3001\u6b63\u898f\u8868\u73fe\u3067\u30ab\u30b9\u30bf\u30e0\u306e\u5b9a\u7fa9\u3092\u3059\u308b\u3068\u5168\u90e8\u6587\u5b57\u5217\u578b\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3089\u3057\u3044\n\n\n\u5bfe\u5fdc\u6848\uff11\uff1aElastic Search\u5074\u3067\u5909\u63db\u3059\u308b\uff08\u5931\u6557\uff09\n\nElastic Search\u5074\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3089\u3057\u3044\n\n\nhttp://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-core-types.html\n\u8a66\u3057\u3066\u307f\u305f\u3051\u3069\u306a\u305c\u304b\u3046\u307e\u304f\u3044\u304b\u306a\u3044\n\n\n\n\n\u5bfe\u5fdc\u6848\uff12\uff1afluentd\u5074\u3067\u5909\u63db\u3059\u308b\uff08\u6210\u529f\uff09\n\nfluentd\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067fluent-plugin-typecast\u3068\u3044\u3046\u306e\u3092\u767a\u898b\n\u4e0b\u8a18\u306e\u611f\u3058\u3067\u9069\u7528\n\n\nitem_types\u3068\u3044\u3046\u9805\u76ee\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u8a18\u8ff0\u3059\u308b\n\n\n\n# gem install fluent-plugin-typecast\n\n\nfluent.conf\n<match apache.access>\n  type typecast\n  item_types restime:integer\n  prefix typed\n</match>\n\n<match typed.apache.access>\n  type elasticsearch\n(snip)\n</match>\n\n\n\n\u7d50\u679c\n\n\u7121\u4e8b\u5909\u63db\u3067\u304d\u307e\u3057\u305f\u3002\n\u3053\u3093\u306a\u2193\u611f\u3058\u3067Kibana\u304b\u3089\u30af\u30a8\u30ea\u6295\u3052\u308b\u306810\u79d2\u4ee5\u4e0a\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u3092\u62bd\u51fa\u3067\u304d\u307e\u3057\u305f\u3002\n\nrestime:[10 TO *]\n\n\n\u304a\u308f\u308a\u306b\nElasticSearch\u5074\u306emapping\u3067\u89e3\u6c7a\u3067\u304d\u306a\u304b\u3063\u305f\u8b0e\u306f\u89e3\u3051\u306a\u304b\u3063\u305f\u3051\u3069\u3088\u3057\u3068\u3057\u307e\u3059\nFluentd\u304b\u3089Elastic Search\u3078\u6295\u5165\u3059\u308b\u30c7\u30fc\u30bf\u306e\u578b\u3092\u5909\u63db\u3059\u308b\n===\n\n\u5143\u3005\u3084\u308a\u305f\u304b\u3063\u305f\u4e8b\n---\n* apache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092fluentd\u3067\u53d6\u308a\u8fbc\u3093\u3067Elastic Search\u306b\u6295\u5165\u3057\u3066Kibana\u3067\u5206\u6790\u3057\u305f\u3044\n* \u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u306f\u3061\u3087\u3063\u3068\u5f62\u5f0f\u3092\u3044\u3058\u3063\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c\u8a18\u9332\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\n* ElasticSearch\u306710\u79d2\u4ee5\u4e0a\u3068\u304b\u9045\u3044\u30a2\u30af\u30bb\u30b9\u3092\u62bd\u51fa\u3057\u305f\u3044\n\n\u56f0\u3063\u305f\u4e8b\n---\n* \u6a19\u6e96\u306eapache\u306e\u30ed\u30b0\u5f62\u5f0f\u306f\u4f7f\u3048\u306a\u3044\u306e\u3067\u81ea\u524d\u3067\u4e0b\u8a18\u306e\u611f\u3058\u3067\u6b63\u898f\u8868\u73fe\u3092\u5b9a\u7fa9\n\n``` fluent.conf\n<source>\n  type tail\n  format /^(?<host>[^ ]*) - - \\[(?<time>[^\\]]*)\\] \"(?<method>\\S+)(?: +(?<path>[^ ]*) +\\S*)?\" (\n?<code>[^ ]*) (?<size>[^ ]*) (?<restime>[^ ]*) (?<resstate>[^ ]*)(?: \"(?<referer>[^\\\"]*)\" \"(?<\nagent>[^\\\"]*)\")?.*$/\n  path /path/to/access.log\n  time_format %d/%b/%Y:%H:%M:%S %z\n  tag apache.access\n</source>\n```\n* restime\u3068\u3044\u3046\u30ad\u30fc\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u30bf\u30a4\u30e0\u304c\u3067\u308b\u306e\u3060\u3051\u3069\u3001\u6587\u5b57\u5217\u578b\u3067Elastic Search\u306b\u767b\u9332\u3055\u308c\u3066\u3057\u307e\u3044\u3001\u5927\u5c0f\u6bd4\u8f03\u304c\u8f9e\u66f8\u5f0f\u306b\u306a\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\n* \u3069\u3046\u3082\u6a19\u6e96\u306e\u5f62\u5f0f\u3092\u4f7f\u3046\u3068\u81ea\u52d5\u7684\u306b\u578b\u5909\u63db\u3055\u308c\u308b\u3051\u3069\u3001\u6b63\u898f\u8868\u73fe\u3067\u30ab\u30b9\u30bf\u30e0\u306e\u5b9a\u7fa9\u3092\u3059\u308b\u3068\u5168\u90e8\u6587\u5b57\u5217\u578b\u306b\u306a\u3063\u3066\u3057\u307e\u3046\u3089\u3057\u3044\n\n\u5bfe\u5fdc\u6848\uff11\uff1aElastic Search\u5074\u3067\u5909\u63db\u3059\u308b\uff08\u5931\u6557\uff09\n---\n* Elastic Search\u5074\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3089\u3057\u3044\n  * http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-core-types.html\n  * \u8a66\u3057\u3066\u307f\u305f\u3051\u3069\u306a\u305c\u304b\u3046\u307e\u304f\u3044\u304b\u306a\u3044\n\n\u5bfe\u5fdc\u6848\uff12\uff1afluentd\u5074\u3067\u5909\u63db\u3059\u308b\uff08\u6210\u529f\uff09\n---\n* fluentd\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u3067[fluent-plugin-typecast](https://github.com/tarom/fluent-plugin-typecast)\u3068\u3044\u3046\u306e\u3092\u767a\u898b\n* \u4e0b\u8a18\u306e\u611f\u3058\u3067\u9069\u7528\n    * item_types\u3068\u3044\u3046\u9805\u76ee\u3067\u30de\u30c3\u30d4\u30f3\u30b0\u3092\u8a18\u8ff0\u3059\u308b\n\n```\n# gem install fluent-plugin-typecast\n```\n\n``` fluent.conf\n<match apache.access>\n  type typecast\n  item_types restime:integer\n  prefix typed\n</match>\n\n<match typed.apache.access>\n  type elasticsearch\n(snip)\n</match>\n```\n\n\u7d50\u679c\n---\n* \u7121\u4e8b\u5909\u63db\u3067\u304d\u307e\u3057\u305f\u3002\n* \u3053\u3093\u306a\u2193\u611f\u3058\u3067Kibana\u304b\u3089\u30af\u30a8\u30ea\u6295\u3052\u308b\u306810\u79d2\u4ee5\u4e0a\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u3092\u62bd\u51fa\u3067\u304d\u307e\u3057\u305f\u3002\n\n```\nrestime:[10 TO *]\n```\n\n\u304a\u308f\u308a\u306b\n---\nElasticSearch\u5074\u306emapping\u3067\u89e3\u6c7a\u3067\u304d\u306a\u304b\u3063\u305f\u8b0e\u306f\u89e3\u3051\u306a\u304b\u3063\u305f\u3051\u3069\u3088\u3057\u3068\u3057\u307e\u3059", "tags": ["fluentd", "Elasticsearch", "kibana3"]}