{"tags": ["grape", "Rails", "Ruby", "RSpec"], "context": " More than 1 year has passed since last update.Grape \u306f Ruby \u3067 API \u3092\u66f8\u304f\u306e\u306b\u4fbf\u5229\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002\nGrape \u81ea\u4f53\u306b\u3064\u3044\u3066\u306f fakestarbaby \u6c0f\u304c\u3059\u3067\u306b\u3059\u3066\u304d\u306a\u30a8\u30f3\u30c8\u30ea\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3063\u3066\u3044\u307e\u3059\u3002\nGrape | API\u751f\u6210\u30de\u30a4\u30af\u30ed\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af #Rails #Gems #Ruby #grape #api_builders - Qiita\n\u3053\u3053\u3067\u306f\u3069\u3046\u3084\u3063\u3066\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u306e\u304b\u3068\u3044\u3046\u3053\u3068\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u60f3\u5b9a\n\nRSpec \u306e\u53d7\u3051\u5165\u308c\u30c6\u30b9\u30c8\u306e request_spec \u3092\u4f7f\u3046\u3088\nAPI \u306f JSON \u3092\u8fd4\u3059\u3088\nAPI \u7528\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\uff08api.foobar.com\uff09\u3092\u5207\u3063\u3066\u3044\u308b\u3088\nJSON \u306e\u30c6\u30b9\u30c8\u306f json_expressions \u3092\u4f7f\u3046\u3088\uff08\u53c2\u8003\uff09\nOAuth 2.0 \u306e Provider \u306b\u306a\u3063\u3066 Web Application Flow \u3068\u304b\u3067\u8a8d\u8a3c\u3057\u3061\u3083\u3063\u305f\u308a\n\u30e2\u30c3\u30af\u306f FactoryGirl \u3067\u4f5c\u3063\u3061\u3083\u3046\u3088\n\n\nhelper\n\u307e\u305a\u306f helper \u30e1\u30bd\u30c3\u30c9\u3092\u3044\u304f\u3064\u304b api_helper.rb \u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\ninclude Rack::Test::Methods\nRack::Test::Methods \u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308b\u3053\u3068\u3067\u3001get, post \u7b49\u3005\u3092\u4e8b\u9805\u3057\u305f\u7d50\u679c\u306e\u30c6\u30b9\u30c8\u3092\u304a\u3053\u306a\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nspec/support/api_helper.rb\nmodule ApiHelper\n  include Rack::Test::Methods\nend\n\n\n\nAPI \u7528\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306e\u305f\u3081\u306e\u8a2d\u5b9a\nAPI \u7528\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u5207\u3063\u305f\u306e\u3067\u305d\u308c\u306b\u5fdc\u3058\u308b\u3088\u3046\u306b\u3001\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30c6\u30b9\u30c8\u306e\u5834\u5408\u3001\u30c9\u30e1\u30a4\u30f3\u540d\u306f example.com \u306b\u306a\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306f api.example.com \u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3055\u304d\u307b\u3069 api.foobar.com \u3068\u66f8\u3044\u305f\u306e\u306f\u3053\u306e\u3068\u304d\u306e api.example.com \u3068\u6df7\u540c\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\nspec/support/api_helper.rb\nmodule ApiHelper\n  # (\u7565)\n  def domain\n    'api.example.com'\n  end\n\n  def default_rack_env\n    { 'HTTP_HOST' => domain }\n  end\nend\n\n\n\nshared_context \u3067\u5168\u4f53\u306e\u524d\u63d0\u3092\u5b9a\u7fa9\uff01\n\nspec/support/api_helper.rb\nmodule ApiHelper\n  # (\u7565)\n  shared_context 'api' do\n    subject { eval(\"#{method}(url, parameters, rack_env)\") }\n    let(:parameters) { '' }\n    let(:rack_env)   { default_rack_env }\n  end\nend\n\n\n\u30c6\u30b9\u30c8\u7528\u306e request \u306f HTTP\u30e1\u30bd\u30c3\u30c9\u540d(url, parameters, rack_env) \u306e\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u6bce\u56de\u66f8\u304f\u306e\u306f\u304b\u3063\u305f\u308b\u3044\u306e\u3067\u3001subject \u306b eval \u3067\u62bc\u3057\u8fbc\u3081\u307e\u3057\u305f\u3002\n\nsinatra\u3067\u30c6\u30b9\u30c8\u306e\u5165\u9580\u306e\u5165\u9580(\u305d\u306e1) - tomi\u306e\u65e5\u8a18\nsinatra\u3067\u30c6\u30b9\u30c8\u306e\u5165\u9580\u306e\u5165\u9580(\u305d\u306e2)sinatra\u3067rspec - tomi\u306e\u65e5\u8a18\n\nRSpec \u306e subject \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001it do end \u306e\u4e2d\u8eab\u306f subject \u304c\u5b9f\u884c\u3055\u308c\u305f\u7d50\u679c\u3092\u53d7\u3051\u308b\u306e\u3067\u3001\u3044\u304d\u306a\u308a should \u304b\u3089\u66f8\u304d\u59cb\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nHTTP \u306e status \u3068 body \u3092\u4e00\u6c17\u306b\u8a66\u3059 shared_examples_for \u3092\u5b9a\u7fa9\uff01\n\nspec/support/api_helper.rb\nmodulde ApiHelper\n  # (\u7565)\n  shared_examples_for '200 Success' do\n    its(:status) { should be(200) }\n    its(:body)   { should match_json_expression(result) }\n  end\n\n  shared_examples_for '201 Created' do\n    its(:status) { should be(201) }\n    its(:body)   { should match_json_expression(result) }\n  end\n\n  shared_examples_for '204 No Content' do\n    its(:status) { should be(204) }\n    its(:body)   { should eq('') }\n  end\n\n  shared_examples_for '404 Not Found' do\n    its(:status) { should be(404) }\n    its(:body)   { should match_json_expression({ message: '404 Not Found' }) }\n  end\n\n  shared_examples_for '422 Unprocessable Entity' do\n    its(:status) { should be(422) }\n    its(:body)   { should match_json_expression({ message: '422 Unprocessable Entity' }) }\n  end\nend\n\n\n\u5148\u307b\u3069\u306e subject \u306e\u7d50\u679c\u3067\u5f97\u3089\u308c\u308b last_response \u306f status / body \u306a\u3069\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u3001RSpec \u306e its \u3067\u3055\u3089\u306b\u53d6\u308a\u51fa\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n20x \u306a\u3069\u306e\u6210\u529f\u6642\u306e match_json_expression \u306e\u4e2d\u8eab\u306f\u3001\u4f7f\u7528\u6642\u306b let \u3092\u4f7f\u3044 result \u3068\u3044\u3046\u540d\u524d\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\u3059\u3054\u3044\u305eRSpec(attribute of subject\u5373\u3061its\u7de8) - \u3077\u308d\u3050\u3089\u307e\u306d\u304c\n\n\nOAuth 2 \u8a8d\u8a3c\nOAuth 2 \u306e\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u5148\u307b\u3069\u306e shared_context \u3092\u62e1\u5f35\u3057\u307e\u3059\u3002\n\nspec/support/api_helper.rb\nmodule ApiHelper\n  # (\u7565)\n  def oauth2_auth(token)\n    header('Authorization', \"Bearer #{token}\")\n  end\n\n  shared_context 'api' do\n    let(:user)                { FactoryGirl.create(:user) }\n    let(:client_application)  { FactoryGirl.create(:client_application,\n                                                   user: user) }\n    let(:access_token)        { FactoryGirl.create(:access_token,\n                                                   user: user,\n                                                   client_application: client_application) }\n\n    before(:each) { oauth2_auth(access_token.token) }\n\n    subject { eval(\"#{method}(url, parameters, rack_env)\") }\n    let(:parameters) { '' }\n    let(:rack_env)   { default_rack_env }\n  end\nend\n\n\n\n\u5b9f\u969b\u306e\u4f7f\u3044\u65b9\n\u3053\u3053\u307e\u3067\u4f5c\u3063\u305f helper \u3092\u4f7f\u3063\u3066\u3001\u5b9f\u969b\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nspec/requests/api/articles_spec.rb\ndescribe Api do\n  include ApiHelper\n  include_context 'api'\n\n  describe 'Articles' do\n    let(:article) { FactoryGirl.create(:article, user: user) }\n\n    describe 'GET /articles/:article_id' do\n      let(:method) { 'get' }\n      let(:url)    { \"/articles/#{article.id}\" }\n      let(:result) do\n        {\n          id:      article.id,\n          title:   article.title,\n          content: article.content,\n          user: {\n            id:            user.id,\n            name:          user.name,\n            profile_image: user.profile_image.url(:small),\n            created_at:    user.created_at.as_json,\n            updated_at:    user.created_at.as_json,\n          }\n        }\n      end\n\n      it_behaves_like('200 Success')\n    end\n\n    describe 'DELETE /articles/:article_id' do\n      let(:method) { 'delete' }\n      let(:url)    { \"/articles/#{article.id}\" }\n\n      it_behaves_like('204 No Content')\n\n      it 'The article is successfully deleted.' do\n        subject\n        expect { Article.find(article.id) }.to raise_error ActiveRecord::RecordNotFound\n      end\n    end\n  end\nend\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306e parameter \u306b\u3064\u3044\u3066\u306f\u5fc5\u8981\u304c\u3042\u308c\u3070 let \u306f\u4e0a\u66f8\u304d\u304c\u3067\u304d\u308b\u306e\u3067\u3001\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002method \u3084 url \u306f\u4e0a\u306e\u65b9\u3067\u5b9a\u7fa9\u3057\u3066\u304a\u3044\u3066\u3001context \u3092\u30cd\u30b9\u30c8\u3055\u305b\u308c\u3070\u3001\u7121\u99c4\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3053\u3068\u306a\u304f\u30c6\u30b9\u30c8\u306e\u30b3\u30fc\u30c9\u306e\u96c6\u4e2d\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u3068\u601d\u3044\u307e\u3059\u3002\nsubject \u3092 it do \u306e\u4e2d\u3067\u547c\u3073\u51fa\u305b\u3070\u3001response \u3067\u306a\u3044\u9805\u76ee\u3082\u30c6\u30b9\u30c8\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u5168\u4f53\u3068\u3057\u3066\u53c2\u8003\u306b\u3057\u305f\u3082\u306e\n\nRSpec \u306e\u5165\u9580\u3068\u305d\u306e\u4e00\u6b69\u5148\u3078 - t-wada\u306e\u65e5\u8a18\n\n\nGrape \u306f Ruby \u3067 API \u3092\u66f8\u304f\u306e\u306b\u4fbf\u5229\u306a\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002\n\nGrape \u81ea\u4f53\u306b\u3064\u3044\u3066\u306f fakestarbaby \u6c0f\u304c\u3059\u3067\u306b\u3059\u3066\u304d\u306a\u30a8\u30f3\u30c8\u30ea\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3063\u3066\u3044\u307e\u3059\u3002\n[Grape | API\u751f\u6210\u30de\u30a4\u30af\u30ed\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af #Rails #Gems #Ruby #grape #api_builders - Qiita](http://qiita.com/items/fa03cf333744b7c70e72)\n\n\u3053\u3053\u3067\u306f\u3069\u3046\u3084\u3063\u3066\u30c6\u30b9\u30c8\u3092\u66f8\u304f\u306e\u304b\u3068\u3044\u3046\u3053\u3068\u306b\u3064\u3044\u3066\u66f8\u3044\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u60f3\u5b9a\n\n* RSpec \u306e\u53d7\u3051\u5165\u308c\u30c6\u30b9\u30c8\u306e request_spec \u3092\u4f7f\u3046\u3088\n* API \u306f JSON \u3092\u8fd4\u3059\u3088\n* API \u7528\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\uff08api.foobar.com\uff09\u3092\u5207\u3063\u3066\u3044\u308b\u3088\n* JSON \u306e\u30c6\u30b9\u30c8\u306f json_expressions \u3092\u4f7f\u3046\u3088\uff08[\u53c2\u8003](http://qiita.com/items/72bf43a0d07321d072dd)\uff09\n* OAuth 2.0 \u306e Provider \u306b\u306a\u3063\u3066 Web Application Flow \u3068\u304b\u3067\u8a8d\u8a3c\u3057\u3061\u3083\u3063\u305f\u308a\n* \u30e2\u30c3\u30af\u306f FactoryGirl \u3067\u4f5c\u3063\u3061\u3083\u3046\u3088\n\n## helper\n\n\u307e\u305a\u306f helper \u30e1\u30bd\u30c3\u30c9\u3092\u3044\u304f\u3064\u304b api_helper.rb \u306b\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n### include Rack::Test::Methods\n\nRack::Test::Methods \u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3059\u308b\u3053\u3068\u3067\u3001get, post \u7b49\u3005\u3092\u4e8b\u9805\u3057\u305f\u7d50\u679c\u306e\u30c6\u30b9\u30c8\u3092\u304a\u3053\u306a\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```ruby:spec/support/api_helper.rb\nmodule ApiHelper\n  include Rack::Test::Methods\nend\n```\n\n### API \u7528\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306e\u305f\u3081\u306e\u8a2d\u5b9a\n\nAPI \u7528\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3092\u5207\u3063\u305f\u306e\u3067\u305d\u308c\u306b\u5fdc\u3058\u308b\u3088\u3046\u306b\u3001\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30c6\u30b9\u30c8\u306e\u5834\u5408\u3001\u30c9\u30e1\u30a4\u30f3\u540d\u306f example.com \u306b\u306a\u308b\u3088\u3046\u306a\u306e\u3067\u3001\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u306f api.example.com \u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3055\u304d\u307b\u3069 api.foobar.com \u3068\u66f8\u3044\u305f\u306e\u306f\u3053\u306e\u3068\u304d\u306e api.example.com \u3068\u6df7\u540c\u3057\u306a\u3044\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u3067\u3059\u3002\n\n```ruby:spec/support/api_helper.rb\nmodule ApiHelper\n  # (\u7565)\n  def domain\n    'api.example.com'\n  end\n\n  def default_rack_env\n    { 'HTTP_HOST' => domain }\n  end\nend\n```\n\n\n### shared_context \u3067\u5168\u4f53\u306e\u524d\u63d0\u3092\u5b9a\u7fa9\uff01\n\n```ruby:spec/support/api_helper.rb\nmodule ApiHelper\n  # (\u7565)\n  shared_context 'api' do\n    subject { eval(\"#{method}(url, parameters, rack_env)\") }\n    let(:parameters) { '' }\n    let(:rack_env)   { default_rack_env }\n  end\nend\n```\n\n\u30c6\u30b9\u30c8\u7528\u306e request \u306f HTTP\u30e1\u30bd\u30c3\u30c9\u540d(url, parameters, rack_env) \u306e\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3059\u304c\u3001\u6bce\u56de\u66f8\u304f\u306e\u306f\u304b\u3063\u305f\u308b\u3044\u306e\u3067\u3001subject \u306b eval \u3067\u62bc\u3057\u8fbc\u3081\u307e\u3057\u305f\u3002\n\n* [sinatra\u3067\u30c6\u30b9\u30c8\u306e\u5165\u9580\u306e\u5165\u9580(\u305d\u306e1) - tomi\u306e\u65e5\u8a18](http://tomiacannondale.hatenablog.com/entry/20110801/1312175754)\n* [sinatra\u3067\u30c6\u30b9\u30c8\u306e\u5165\u9580\u306e\u5165\u9580(\u305d\u306e2)sinatra\u3067rspec - tomi\u306e\u65e5\u8a18](http://tomiacannondale.hatenablog.com/entry/20110829/1314631619)\n\nRSpec \u306e subject \u3092\u4f7f\u3046\u3053\u3068\u3067\u3001it do end \u306e\u4e2d\u8eab\u306f subject \u304c\u5b9f\u884c\u3055\u308c\u305f\u7d50\u679c\u3092\u53d7\u3051\u308b\u306e\u3067\u3001\u3044\u304d\u306a\u308a should \u304b\u3089\u66f8\u304d\u59cb\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n### HTTP \u306e status \u3068 body \u3092\u4e00\u6c17\u306b\u8a66\u3059 shared_examples_for \u3092\u5b9a\u7fa9\uff01\n\n```ruby:spec/support/api_helper.rb\nmodulde ApiHelper\n  # (\u7565)\n  shared_examples_for '200 Success' do\n    its(:status) { should be(200) }\n    its(:body)   { should match_json_expression(result) }\n  end\n\n  shared_examples_for '201 Created' do\n    its(:status) { should be(201) }\n    its(:body)   { should match_json_expression(result) }\n  end\n\n  shared_examples_for '204 No Content' do\n    its(:status) { should be(204) }\n    its(:body)   { should eq('') }\n  end\n\n  shared_examples_for '404 Not Found' do\n    its(:status) { should be(404) }\n    its(:body)   { should match_json_expression({ message: '404 Not Found' }) }\n  end\n\n  shared_examples_for '422 Unprocessable Entity' do\n    its(:status) { should be(422) }\n    its(:body)   { should match_json_expression({ message: '422 Unprocessable Entity' }) }\n  end\nend\n```\n\n\u5148\u307b\u3069\u306e subject \u306e\u7d50\u679c\u3067\u5f97\u3089\u308c\u308b last_response \u306f status / body \u306a\u3069\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u6301\u3063\u3066\u3044\u308b\u306e\u3067\u3001RSpec \u306e its \u3067\u3055\u3089\u306b\u53d6\u308a\u51fa\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n20x \u306a\u3069\u306e\u6210\u529f\u6642\u306e match_json_expression \u306e\u4e2d\u8eab\u306f\u3001\u4f7f\u7528\u6642\u306b let \u3092\u4f7f\u3044 result \u3068\u3044\u3046\u540d\u524d\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n* [\u3059\u3054\u3044\u305eRSpec(attribute of subject\u5373\u3061its\u7de8) - \u3077\u308d\u3050\u3089\u307e\u306d\u304c](http://d.hatena.ne.jp/yohfee/20110225/1298639902)\n\n\n### OAuth 2 \u8a8d\u8a3c\n\nOAuth 2 \u306e\u8a8d\u8a3c\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f\u3001\u5148\u307b\u3069\u306e shared_context \u3092\u62e1\u5f35\u3057\u307e\u3059\u3002\n\n```ruby:spec/support/api_helper.rb\nmodule ApiHelper\n  # (\u7565)\n  def oauth2_auth(token)\n    header('Authorization', \"Bearer #{token}\")\n  end\n\n  shared_context 'api' do\n    let(:user)                { FactoryGirl.create(:user) }\n    let(:client_application)  { FactoryGirl.create(:client_application,\n                                                   user: user) }\n    let(:access_token)        { FactoryGirl.create(:access_token,\n                                                   user: user,\n                                                   client_application: client_application) }\n\n    before(:each) { oauth2_auth(access_token.token) }\n\n    subject { eval(\"#{method}(url, parameters, rack_env)\") }\n    let(:parameters) { '' }\n    let(:rack_env)   { default_rack_env }\n  end\nend\n```\n\n## \u5b9f\u969b\u306e\u4f7f\u3044\u65b9\n\n\u3053\u3053\u307e\u3067\u4f5c\u3063\u305f helper \u3092\u4f7f\u3063\u3066\u3001\u5b9f\u969b\u306b\u30c6\u30b9\u30c8\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```ruby:spec/requests/api/articles_spec.rb\ndescribe Api do\n  include ApiHelper\n  include_context 'api'\n\n  describe 'Articles' do\n    let(:article) { FactoryGirl.create(:article, user: user) }\n\n    describe 'GET /articles/:article_id' do\n      let(:method) { 'get' }\n      let(:url)    { \"/articles/#{article.id}\" }\n      let(:result) do\n        {\n          id:      article.id,\n          title:   article.title,\n          content: article.content,\n          user: {\n            id:            user.id,\n            name:          user.name,\n            profile_image: user.profile_image.url(:small),\n            created_at:    user.created_at.as_json,\n            updated_at:    user.created_at.as_json,\n          }\n        }\n      end\n\n      it_behaves_like('200 Success')\n    end\n\n    describe 'DELETE /articles/:article_id' do\n      let(:method) { 'delete' }\n      let(:url)    { \"/articles/#{article.id}\" }\n\n      it_behaves_like('204 No Content')\n\n      it 'The article is successfully deleted.' do\n        subject\n        expect { Article.find(article.id) }.to raise_error ActiveRecord::RecordNotFound\n      end\n    end\n  end\nend\n```\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306e parameter \u306b\u3064\u3044\u3066\u306f\u5fc5\u8981\u304c\u3042\u308c\u3070 let \u306f\u4e0a\u66f8\u304d\u304c\u3067\u304d\u308b\u306e\u3067\u3001\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002method \u3084 url \u306f\u4e0a\u306e\u65b9\u3067\u5b9a\u7fa9\u3057\u3066\u304a\u3044\u3066\u3001context \u3092\u30cd\u30b9\u30c8\u3055\u305b\u308c\u3070\u3001\u7121\u99c4\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3053\u3068\u306a\u304f\u30c6\u30b9\u30c8\u306e\u30b3\u30fc\u30c9\u306e\u96c6\u4e2d\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\nsubject \u3092 it do \u306e\u4e2d\u3067\u547c\u3073\u51fa\u305b\u3070\u3001response \u3067\u306a\u3044\u9805\u76ee\u3082\u30c6\u30b9\u30c8\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n## \u5168\u4f53\u3068\u3057\u3066\u53c2\u8003\u306b\u3057\u305f\u3082\u306e\n\n* [RSpec \u306e\u5165\u9580\u3068\u305d\u306e\u4e00\u6b69\u5148\u3078 - t-wada\u306e\u65e5\u8a18](http://d.hatena.ne.jp/t-wada/20100228/p1)\n"}