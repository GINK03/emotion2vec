{"context": "\n\nAbout\n\n@mizchi\nQiita \u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a8\u30f3\u30b8\u30cb\u30a2\nReact\u52dd\u624b\u30a8\u30f4\u30a1\u30f3\u30b8\u30a7\u30ea\u30b9\u30c8\n4\u30f6\u6708\u306714kg\u75e9\u305b\u305f (80kg => 66kg)\n\n\n\n\u8fd1\u6cc1\n\n\u30d3\u30b8\u30cd\u30b9\u30c9\u30e1\u30a4\u30f3\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u304c\u4e3b\u3067\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u5c11\u306a\u3044\n\u6ce5\u81ed\u7cfb\u306e\u77e5\u898b\u306f\u6e9c\u307e\u3063\u3066\u308b\n\u4f1a\u793e\u306e\u30e1\u30f3\u30d0\u30fc\u304c\u5897\u3048\u305f + \u81ea\u5206\u4ee5\u5916\u306e\u30d5\u30ed\u30f3\u30c8\u7cfb\u306e\u4eba\u304c\u5897\u3048\u305f\u306e\u3067\u3001\u8a2d\u8a08\u3092\u660e\u793a\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n\n\n\n\u3053\u306e\u8cc7\u6599\u306f\u4f55\n\n\nJSer.info 5\u5468\u5e74\u8a18\u5ff5\u30a4\u30d9\u30f3\u30c8 - connpass (2016/01/16) \u306b\u3066\u767a\u8868\u3057\u305f\u8cc7\u6599\u3092\u52a0\u7b46\u3057\u305f\u3082\u306e\n\u5982\u4f55\u306b\u3057\u3066React\u3092\u300c\u3075\u3064\u3046\u306e\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u300d\u306b\u5c0e\u5165\u3057\u3066\u3044\u304f\u304b\n\n\n\n\u3075\u3064\u3046\u306e\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\n\n\nNOT SPA\n\n\nSPA \u3067\u306a\u304f\u3068\u3082React\u306f\u4f7f\u3048\u308b\njQuery \u306b\u652f\u914d\u3055\u308c\u305f\u73fe\u4ee3\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u6539\u5584\u3057\u305f\u3044\n\n\n\n=> \u8907\u96d1\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5c40\u6240\u7684\u306b\u89e3\u6c7a\u3059\u308b\u306e\u306bReact\u304c\u6709\u7528\u3067\u3042\u308b\u3053\u3068\u3092\u793a\u3057\u305f\u3044\n\n\n\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u6d41\u308c\n\nAJAX\u4ee5\u524d(~2003)\njQuery\u6642\u4ee3(2004~)\n\u69cb\u9020\u5316jQuery\u306e\u6642\u4ee3(2011~)\n\n\nBackbone\n\n\n\u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306e\u8208\u9686\n\n\nKnockout\nAngular 1/2\nVue\n\n\n\u4eee\u60f3DOM\u306e\u6642\u4ee3\n\n\nReact\n\n\n\n(\u6b21\u306f\u4eee\u60f3DOM\u306e\u96a0\u853d\u304c\u6b21\u306b\u6765\u305d\u3046)\n\n\nReact\u306e\u96e3\u3057\u3055\u518d\u8003\n\u5927\u304d\u304f2\u3064\n\nReact\u3092\u4f7f\u3046\u305f\u3081\u306e\u524d\u63d0\u3068\u306a\u308b\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u69cb\u7bc9\nReact\u306e\u8907\u96d1\u5316\u306b\u5bfe\u51e6\u306e\u305f\u3081\u306eFlux\u6982\u5ff5\n\n\u4eca\u56de\u8a71\u3059\u306e\u306f\u524d\u8005\u3092\u5012\u3059\n\n\nReact\u304c\u4e57\u308b\u70ba\u306e\u30e2\u30c0\u30f3\u306aJS\u3068\u306f(mizchi\u4e3b\u89b3)\n\nnpm/browserify or webpack\u3067\u4f9d\u5b58\u3092\u89e3\u6c7a\nBabel/ES2015\nReact/Flux\nTestable\nNo More jQuery plugins\n\nNo Side Effect on module loaded\n\n\n\nQiita 2015\n\nCoffeeScript\nSprockets / \u30b0\u30ed\u30fc\u30d0\u30eb\u540d\u524d\u7a7a\u9593\u6e21\u3057\nBackbone\n\n\nJS\u306e\u30c6\u30b9\u30c8\u306fjasmine\u3067\u6570\u4ef6 \n\n\njQuery plugins \u3084 jQuery UI \u307e\u307f\u308c\n\n\u203b Rails\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30da\u30c3\u30af\u306f\u8c4a\u5bcc\n\n\n\u521d\u898b\u3067\u306e\u8a55\u4fa1\n\nQiita\u306f2011\u672b\u304b\u3089\u958b\u767a\u3055\u308c\u3066\u3044\u308b\n\n\n\u5f53\u6642\u306e\u9078\u629e\u57fa\u6e96\u3068\u3057\u3066\u306f\u30b9\u30b8\u60aa\u3067\u306f\u306a\u3044\n\n\n\n\u5341\u5206\u306b\u30e6\u30fc\u30b6\u30fc\u306b\u4fa1\u5024\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b(\u91cd\u8981)\n\n\n\u4fa1\u5024\u3092\u751f\u307e\u306a\u3044\u30b3\u30fc\u30c9\u306f\u30e1\u30f3\u30c6\u3059\u308b\u4fa1\u5024\u304c\u7121\u3044\n\n\n\u305f\u3060\u3061\u3087\u3063\u3068CTO(yuku_t)\u306e\u624b\u7656\u304c\u3061\u3087\u3063\u3068\u5f37\u3044\u304b\u306a\u2026\n\n\n\n\u964d\u3063\u3066\u304d\u305f\u4ed5\u4e8b\n=> \u306a\u3093\u304b\u3088\u304f\u3057\u3066\u304f\u308c\n\n\n\u306a\u3093\u304b\u3088\u304f\u3059\u308b\n\n\n\u306a\u3093\u304b\u3088\u304f\n\n\u30e2\u30c0\u30f3\u306a\u958b\u767a\u74b0\u5883\u3092\u5c0e\u5165\u3059\u308b\n\u4eca\u306e\u30b3\u30fc\u30c9\u3092\u6d17\u7df4\u3055\u305b\u308b\n\u518d\u5229\u7528\u3059\u308b\u30b3\u30fc\u30c9\u3068\u3067\u304d\u306a\u3044\u30b3\u30fc\u30c9\u3092\u5206\u5225\u3059\u308b\n\n\n\n\u6700\u521d\u306e\u5931\u6557\n\n\n\u5931\u6557\n\n\u7de8\u96c6\u753b\u9762\u3092\u66f8\u304d\u63db\u3048\u3088\u3046\u3068\u3057\u305f\n\n\n\n\n\u66f8\u304d\u63db\u3048\u3088\u3046\u3068\u3057\u305f\u7406\u7531\n\n\u30b3\u30fc\u30c9\u304c\u591a\u3044\u306e\u3067\u7f6e\u304d\u63db\u3048\u308c\u3070\u53e4\u3044\u30b3\u30fc\u30c9\u3092\u3054\u3063\u305d\u308a\u6d88\u305b\u308b\n\u62e1\u5f35\u306e\u8981\u671b\u304c\u591a\u3044\n\u30a8\u30c7\u30a3\u30bf\u306a\u3089Kobito\u306e\u958b\u767a\u306e\u30ce\u30a6\u30cf\u30a6\u3092\u6d3b\u304b\u305b\u308b\n\n\n\n\u7834\u7dbb\u3078\n\n\u307e\u305a\u3084\u3063\u3071\u308a\u5206\u91cf\u304c\u591a\u3044\n\u3064\u3064\u304f\u3068\u7121\u9650\u306b\u77e5\u3089\u306a\u3044\u4ed5\u69d8\u304c\u51fa\u3066\u304f\u308b\n\n\n\u305d\u3082\u305d\u3082\u30c9\u30e1\u30a4\u30f3\u77e5\u8b58\u304c\u306a\u304b\u3063\u305f\n\n\n\u5224\u660e\u3059\u308b\u4ed5\u69d8\u3092\u7d99\u304e\u63a5\u304e\u3059\u308b\u3068\u30b3\u30fc\u30c9\u304c\u7dba\u9e97\u306b\u306a\u3089\u306a\u3044\u2026\n\n\n\n\u9032\u6357\n\n\u300c2\u9031\u9593\u3050\u3089\u3044\u3067\u7d42\u308f\u3089\u305b\u308b\u308f\u301c\u300d\n\u66f8\u304d\u76f4\u3057\u305f\u30b3\u30fc\u30c9\u304c\u8aad\u307f\u6613\u304f\u306a\u3089\u305a\u8f9b\u3044\n=> 2\u30f6\u6708\u305f\u3063\u3066\u3082\u7d42\u308f\u3089\u305a\n\n\n\n\u7d50\u679c\n\n\u4e00\u90e8\u306e\u305e\u3044\u3066\u30b3\u30fc\u30c9\u3092\u7834\u68c4\u3057\u3066\u4e2d\u65ad\n\n\n\n\u6559\u8a13\n\n\u4ed5\u69d8\u3092\u7406\u89e3\u3057\u3066\u306a\u3044\u3082\u306e\u306e\u30b3\u30fc\u30c9\u306f\u66f8\u3051\u306a\u3044\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5883\u754c\u9762\u304c\u660e\u793a\u3055\u308c\u3066\u306a\u3044\u3082\u306e\u306f\u5206\u89e3\u3067\u304d\u306a\u3044\n\u300c\u5225\u5b9f\u88c5\u3067\u5143\u306e\u4ed5\u69d8\u3092\u5b8c\u5168\u518d\u73fe\u300d\u306f\u30a8\u30cd\u30eb\u30ae\u30fc\u306e\u7121\u99c4\n\u898b\u7a4d\u3082\u308a\u306f\u5931\u6557\u3059\u308b\n\n\n\n\u632f\u308a\u51fa\u3057\u306b\u623b\u308b\n\n\n\u6c7a\u610f\n\n\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3092\u6574\u7406\u3057\u3088\u3046\n\u73fe\u6642\u70b9\u3067\u306e\u8ca0\u50b5\u3068\u4f7f\u3048\u308b\u90e8\u5206\u3092\u8a8d\u8b58\u3057\u3088\u3046\n\n\n\n\u30b4\u30fc\u30eb\u306e\u8a2d\u5b9a\n\nReact/Babel\u3067\u65b0\u898f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u53d7\u3051\u5165\u308c\u3089\u308c\u308b\u74b0\u5883\nTurbolinks(PushState)\u304c\u5c0e\u5165\u53ef\u80fd\u306a\u521d\u671f\u5316\u30d5\u30ed\u30fc\u3092\u4f5c\u308b(\u4f7f\u3046\u304b\u306f\u3068\u3082\u304b\u304f)\n\n\n\nRails\u4e0a\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u8a2d\u5b9a\n\nReact.Component\u63d0\u4f9b\u304a\u3058\u3055\u3093\nhistory.pushState \u304c\u5c0e\u5165\u3067\u304d\u308b\u72b6\u614b\u3092\u4f5c\u308b\n\n\n\u904b\u7528\u3059\u308b\u304b\u306f\u5225\n\u30b3\u30fc\u30c9\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u76ee\u6a19\u3068\u3057\u3066\u6709\u7528\n\n\n\n\n\n\u8db3\u5143\u3092\u898b\u76f4\u3059\n\n\n\u3084\u3063\u305f\u3053\u3068\n\nnpm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04\nSprockets => browserify(-rails)\n\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u5c0e\u5165\nReact\u3067\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u7f6e\u304d\u63db\u3048\n\n\n\n1. npm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04\n\n\nnpm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04: \u5143\u306e\u72b6\u614b\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3054\u3068\u306b\u7570\u306a\u308bCDN\u3092\u53c2\u7167\n\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u5927\n\u3069\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u308b\u304b\u898b\u901a\u3057\u304c\u60aa\u3044\n\n\n\nnpm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04: \u5909\u66f4\u5f8c\n\nnpm\u3068bower\u3067\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u3092\u89e3\u6c7a\u3059\u308b\u3088\u3046\u306b\u3057\u305f\n1\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u56fa\u3081\u3066\u81ea\u524d\u306e S3\u304b\u3089 CloudFront \u3067\u914d\u4fe1\n\u66f4\u306bnpm\u306b\u96c6\u7d04\u3092\u9032\u3081\u3066bower\u3092\u524a\u9664\nbower\u3084\u3081\u308d\n\n\n\n2. Sprockets => browserify\n\n\nbrowserify\u5c0e\u5165\n\ncommonjs\u5f62\u5f0f\u3067\u66f8\u304b\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u9759\u7684\u89e3\u6790\u3057\u30661\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30d3\u30eb\u30c9\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3092\u4f7f\u308f\u305a\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u89e3\u6c7a\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\n\n\n\u305d\u3057\u3066 Sprockets \u3092\u6368\u3066\u308b\n\n\nSprockets\n\nRails\u4e0a\u306e\u30c7\u30d5\u30a1\u30af\u30c8\u306e\u6a19\u6e96\u30e2\u30b8\u30e5\u30fc\u30eb\u30b7\u30b9\u30c6\u30e0\n\u62e1\u5f35\u5b50\u3054\u3068\u306b\u5909\u63db\n\n\n\nSprockets\u306e\u554f\u984c\n\n\u30d5\u30a1\u30a4\u30eb\u30b9\u30b3\u30fc\u30d7\u3067\u8fd4\u308a\u5024\u3092\u6301\u3066\u306a\u3044\nnode\u3067\u52d5\u304b\u306a\u3044\nruby\u306e\u554f\u984c\u3068js\u306e\u554f\u984c\u3092\u5207\u308a\u5206\u3051\u3089\u308c\u306a\u3044\nJS\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306b\u4e57\u308c\u306a\u3044\nSprockets\u3067\u52d5\u304fJS\u7cfb\u306egem\u30e1\u30f3\u30c6\u3055\u308c\u306a\u3044\n\n\nhoge.js.coffee.erb\n# require_tree ./foo_dir\n# require app\n\n\u5fc5\u305a asset_root(app/assets/javascripts) \u304b\u3089\u89e3\u6c7a\n\n\n\n\n\u66f8\u304d\u63db\u3048\u308b\n\n\n\u66f8\u304d\u63db\u3048\u305f\u3044\u2026\n\n\u5206\u91cf\u304c\u591a\u3044\n\u5e73\u884c\u3057\u3066\u958b\u767a\u3057\u3066\u3044\u308b\u6a5f\u80fd\u304c\u305f\u304f\u3055\u3093\u3042\u308b\n\u3061\u3093\u305f\u3089\u3084\u3063\u3066\u308b\u3068\u7121\u9650\u306b\u30b3\u30f3\u30d5\u30ea\u30af\u30c8\u3059\u308b\n\n\n\n\u89e3\u6cd5\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u66f8\u3044\u3066\u4e00\u767a\n\u3059\u3079\u3066\u3092\u76f8\u5bfe\u30d1\u30b9\u306b\u66f8\u304d\u63db\u3048\u308b\nbrowserify - app/assets/javascripts\u4ee5\u4e0b\u306eJS\u3092\u5168\u3066commonjs\u306erequire\u306b\u66f8\u304d\u63db\u3048\u308b - Qiita http://qiita.com/mizchi/items/20f529a9d783552d7c7d\n\n\n\n\n\u306a\u3093\u304b\u3084\u308b\n\nfunction convertSprocketPathToCommonjsPath(root, fpath, spath) {\n  if (/^\\./.test(spath)) {\n    return spath;\n  }\n  let relToRoot = path.relative(fpath, root);\n  let rel = path.join(relToRoot, spath).replace(/^(\\.\\.\\/)/, \"\");\n  return rel.indexOf(\"..\") > -1 ? rel : \"./\" + rel;\n}\n\nhttps://gist.github.com/mizchi/5ee5cd7d0ca9447b92d5\n\n\n\n\n\u9054\u6210\n\n\u30d5\u30a1\u30a4\u30eb\u5358\u4f4d\u306e\u4f9d\u5b58\u306f\u660e\u793a\u3055\u308c\u305f\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u4f9d\u5b58\u306a\u306e\u306f\u5909\u308f\u3089\u305a\n\n\n\nQiita\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u30b7\u30b9\u30c6\u30e0(\u65e7)\n\nSprockets\u3067\u30d5\u30a1\u30a4\u30eb\u9023\u7d50\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u6e21\u3057\n\nnew Qiita.views.HomeView();\n\n\n\u65e7\n//= require foo\nQiita.util.foo();\nQiita.util.bar = function(){...};\n\n\u65b0\nconst foo = require('./foo');\nfoo();\nmodule.exports = function bar() {...}\n\n\n\nbrowserify \u306b\u3088\u3063\u3066\u3082\u305f\u3089\u3055\u308c\u308b\u3082\u306e\n\n\u4f9d\u5b58\u304c\u305d\u308c\u305e\u308c\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u5b8c\u7d50\u3057\u305f\u72b6\u614b\n\u5358\u4f53\u30c6\u30b9\u30c8\u53ef\u80fd\u306a\u9589\u3058\u305f\u53c2\u7167\u306e\u63d0\u4f9b\n\u540d\u524d\u7a7a\u9593\u306e\u521d\u671f\u5316\u9806\u306b\u5de6\u53f3\u3055\u308c\u306a\u304f\u306a\u308b\n\n\n\n\u3053\u306e\u904e\u7a0b\u3067\u3084\u3063\u305f\u3053\u3068\n\n\ngulp\n\n\u300c\u30d5\u30ed\u30f3\u30c8\u304c\u66f4\u65b0\u3055\u308c\u305f\u3089 npm install \u3068 gulp \u3092\u53e9\u3044\u3066\u304f\u3060\u3055\u3044~\u300d\n=> \u3057\u306a\u3044\n\u300c\u52d5\u304b\u306a\u3044\u3093\u3060\u3051\u3069\u300d\n=> \u5bfe\u5fdc\u3067\u4e00\u65e5\u304c\u7d42\u308f\u308b\n\n\n\nSprockets\u3092\u6368\u3066\u308b\u6e96\u5099\n\nbrowserify-rails\n\u53c2\u8003: \u30e2\u30c0\u30f3JavaScript\u958b\u767a\u74b0\u5883 on Rails - \u30af\u30c3\u30af\u30d1\u30c3\u30c9\u958b\u767a\u8005\u30d6\u30ed\u30b0 http://techlife.cookpad.com/entry/2015/12/14/130041\n\n\n\n\nbrowserify-rails\u306b\u3064\u3044\u3066\n\n\u4e2d\u3067\u4f7f\u3063\u3066\u308b\u306e\u306fbrowserify-incremental\n\u3076\u3063\u3061\u3083\u3051watchify\u306e\u65b9\u304c\u901f\u3044\n\n\nbabel\u306e\u521d\u671f\u5316\u306e\u5dee\n\n\n\u3044\u308d\u3093\u306a\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u8003\u3048\u3066\u30a2\u30ea\n\n\n\n\u7d50\u679c\n\u3059\u3079\u3066\u3092 browserify\u306etransform \u3067\u89e3\u6c7a\u3057\u305f\n\n\n3. \u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u5c0e\u5165\n\n\n\u72b6\u6cc1\n\nbrowserify\u306b\u3088\u3063\u3066\u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f9d\u5b58\u304c\u660e\u793a\u3055\u308c\u305f\njasmine\u304c\u91cd\u3044\u306e\u3067node\u3067\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3057\u305f\u3044\nE2E\u30c6\u30b9\u30c8\u306f\u307e\u3060\u8003\u3048\u306a\u3044\n\n\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5206\u89e3\u3055\u308c\u305f\u518d\u5229\u7528\u6027\u306e\u30b3\u30fc\u30c9\n\u65b0\u898f\u306b\u66f8\u304b\u308c\u308b react component\n\u4f9d\u5b58\u304c\u58ca\u308c\u3066\u306a\u3044\u304b\u3001\u8aad\u307f\u8fbc\u3093\u3060\u3060\u3051\u3067\u526f\u4f5c\u7528\u304c\u767a\u751f\u3057\u306a\u3044\u304b\u691c\u77e5\n\n\n\n\u30c6\u30b9\u30c8\u3092\u66f8\u304f\n\nJavaScript - \u30c6\u30b9\u30c8\u304c\u306a\u3044JS\u74b0\u5883\u306b\u30e2\u30c0\u30f3\u306a\u30c6\u30b9\u30c8\u74b0\u5883\u3092\u5c0e\u5165\u3057\u3066\u3044\u304f - Qiita http://qiita.com/mizchi/items/bdf84f0b1c11c2870290\n\nnode/mocha/isparta/jsdom\n\n\n\n\u6700\u521d\u306e\u66f8\u304d\u63db\u3048\n+ module.exports =\nQiita.util.foo = function() {...}\n\n\u203b coffee \u304c\u591a\u3044\u306e\u3067 commonjs\n\n\n\u30c6\u30b9\u30c8\nimport foo from \"../../src/util/foo\";\ndescribe(\"util\", () => {\n  describe(\"foo\", () => {\n    it(\"returns foo\", () => {\n      assert.equal(foo(), \"foo\");\n    });\n  });\n});\n\n\n\n\u6f70\u3059\n\ngit grep 'Qiita.util.foo'\n\u5168\u90e8require\u306b\u66f8\u304d\u63db\u3048\u308b\nJasmine\u306e\u30b3\u30fc\u30c9\u3092\u5168\u90e8\u7f6e\u304d\u63db\u3048\u308b\n\n\n\n\u30c6\u30b9\u30c8\u306e\u4f8b\n  beforeEach(() => {\n    deleteSrcCache();\n    let jsdom = require('jsdom').jsdom;\n    global.document = jsdom('<html><body></body></html>')\n    global.window = document.defaultView;\n    global.navigator = window.navigator;\n    global.location = window.location;\n  });\n\n  afterEach(() => {\n    delete global.document;\n    delete global.window;\n    delete global.navigator;\n  });\n\n\n\n\u6bce\u56de require cache\u306f\u6d88\u3059\nexport function deleteSrcCache() {\n  Object.keys(require.cache).map(cachePath => {\n    if (/src/.test(cachePath)) {\n      delete require.cache[cachePath];\n    }\n  });\n}\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u526f\u4f5c\u7528\u304c\u3042\u308b\u3068 require cache\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u3057\u307e\u3046\u3068\u518d\u5b9a\u7fa9\u3055\u308c\u306a\u3044\n\n\n\u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u9078\u5b9a\n\nMocha \u304c RSpec \u306b\u96f0\u56f2\u6c17\u4f3c\u3066\u308b\u306e\u3067\u66f8\u3044\u3066\u3082\u3089\u3044\u3084\u3059\u3044\nava \u3082\u3044\u3044\u3051\u3069\u72ec\u81ea\u6982\u5ff5\u304c\u591a\u304f\u3066\u3081\u3093\u3069\u304b\u3063\u305f\n\n\n\nReact \u306e\u30c6\u30b9\u30c8\n\u4eca\u306f airbnb/enzyme: JavaScript Testing utilities for React \u4e00\u629e\n\n\n3 React\u306b\u66f8\u304d\u63db\u3048\n\n\n\u30d8\u30c3\u30c0\n\n\n\n\u30b9\u30e9\u30a4\u30c9\u6a5f\u80fd(\u3053\u308c)\n\n\n\n\u30b3\u30e1\u30f3\u30c8\u30d5\u30a9\u30fc\u30e0\n\n\n\nReact\u5316\n\nFlux\u306e\u9078\u5b9a\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u30d9\u30bf\u66f8\u304d\u3057\u305f\nreact-rails \u306e prerender: false \u3067\u66f8\u304d\u51fa\u3057\n\n\n\nreact-dispatcher-decorator\n\nhttps://github.com/mizchi/react-dispatcher-decorator\n\u30c7\u30b3\u30ec\u30fc\u30bf\u3067event-emitter\u306epubsub\u306e\u95a2\u6570\u3092DI\n\nhttps://github.com/mizchi/flumpt \u304b\u3089\u5207\u308a\u51fa\u3057\u305f\n\n\n\n\u306a\u305c Redux \u3067\u306f\u306a\u3044\u304b\n\n\u975eSPA\u306b\u7d71\u5408\u7684\u306a\u7ba1\u7406\u6a5f\u69cb\u304c(\u305f\u3076\u3093)\u30ef\u30fc\u30af\u3057\u306a\u3044\n\n\n\u30b7\u30f3\u30b0\u30eb\u30b9\u30c8\u30a2\u306b\u3059\u308b\u306e\u306f\u56f0\u96e3\n\n\n\u89e3\u6c7a\u3057\u305f\u3044\u554f\u984c\u306b\u5bfe\u3057\u3066\u30b3\u30fc\u30c9\u304c\u5927\u3052\u3055\u306b\n\n\n\n\u30b7\u30f3\u30b0\u30eb\u30b9\u30c8\u30a2\u8a2d\u8a08\u3092\u76ee\u6307\u3059\u306b\u306f\n\nDOM\u306b\u7d10\u4ed8\u304b\u306a\u3044\u4eee\u60f3\u30eb\u30fc\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3001\u753b\u9762\u306b\u51fa\u73fe\u3057\u3046\u308b\u8981\u7d20\u306e\u7d10\u4ed8\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u4f5c\u3059\u308b\u5fc5\u8981\n\n\n\nRails\u4e0a\u306eReact\n\n\nreact-rails\n\nRails\u5074\u3067 = react_component(\"Header\", {a: 1}, {prerender: false})\n\n<div data-props='<serialize\u5316\u3055\u308c\u305fjson>'..>...</div>\nRails => JS\u306e\u30c7\u30fc\u30bf\u53d7\u3051\u6e21\u3057\u30d7\u30ed\u30c8\u30b3\u30eb\u304c\u307b\u3057\u304b\u3063\u305f\nSSR\u306f\u30b5\u30fc\u30d0\u30fc\u306e\u8ca0\u8377\u307f\u3066\u6bb5\u968e\u7684\u306b\u5c0e\u5165(\u3057\u305f\u3044)\n\n\n\nreact-rails \u3067\u306e\u30c7\u30fc\u30bf\u306e\u6e21\u3057\u65b9\n\nApplicationHelper\u3067\u30cf\u30c3\u30b7\u30e5\u306b\u5909\u63db\u3059\u308b\u30d8\u30eb\u30d1\u3092\u7528\u610f\n\ndef comment_to_component_props(comment)\n  { ... }\nend\n\n\nRails\u3067\u306f\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30c6\u30b9\u30c8\u3059\u308b\n\u5c06\u6765\u7684\u306bGraphQL\u3092\u4f7f\u3046\u5834\u5408\u3001\u305f\u3076\u3093\u3053\u3053\u3092\u7f6e\u304d\u63db\u3048\u308b\n\n\n\nreact-rails\u306e\u6b21\n\u4eca\u306f\u4ee3\u66ff\u624b\u6bb5\u304c\u305f\u304f\u3055\u3093\n\nhttps://github.com/airbnb/hypernova\nhttps://github.com/alt-j/fast-react-server\n\n\u3042\u305f\u308a\u304c\u6c17\u306b\u306a\u3063\u3066\u308b\n\n\nFlowtype\n\n\nFlowtype\u306e\u5c0e\u5165\n\n\u65b0\u898f\u3067\u66f8\u304f\u90e8\u5206\u306fBabel\u3067\n\u53e4\u3044\u30e2\u30b8\u30e5\u30fc\u30eb\u3082\u4eca\u5f8c\u3082\u958b\u767a\u3059\u308b\u90e8\u5206\u3092Babel\u3067\nBabel\u3060\u3063\u305f\u3089\u6bb5\u968e\u7684\u306bFlow\u5165\u308c\u3089\u308c\u308b\u3084\u3093 => \u5c0e\u5165\n\n\n\nFlowtype\u306e\u9078\u5b9a\u7406\u7531\n\n\u6bb5\u968e\u7684\u306b\u5c0e\u5165\u3057\u3066\u3044\u3051\u308b\nReact/JSX \u306b\u5bfe\u3057\u3066\u304b\u306a\u308a\u578b\u304c\u52b9\u304f\n\u63a8\u8ad6\u304c\u512a\u79c0\n\u30d5\u30ed\u30f3\u30c8\u306e\u30c6\u30b9\u30c8\u3057\u3065\u3089\u3044\u90e8\u5206\u3092\u305b\u3081\u3066\u3067\u3082\u30ab\u30d0\u30fc\n\n\u53c2\u8003: \u578b\u306a\u304d\u4e16\u754c\u306e\u305f\u3081\u306eflowtype\u5165\u9580 - Qiita\n\n\nTypescript \u3092\u9078\u3070\u306a\u304b\u3063\u305f\u7406\u7531\n\n\u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u3067\u5168\u90e8\u306e\u30b3\u30fc\u30c9\u3092\u6271\u3048\u306a\u3044\u3068\u4e0d\u4fbf\n\n\nbabel/coffee\u3068\u7d44\u308f\u305b\u308b\u3068gulp\u306e\u8907\u96d1\u306a\u30bf\u30b9\u30af\u3092\u7d44\u3080\u5fc5\u8981\n\n\n(\u6700\u8fd1\u306e\u958b\u767a\u65b9\u91dd\u304c\u306a\u3093\u304b\u6c17\u306b\u98df\u308f\u306a\u3044)\n\n\n\n\u8272\u3005\u8f9b\u304b\u3063\u305f\n\n\n\u4eca\u3084\u3063\u3066\u308b\u3053\u3068\n\n\u7de8\u96c6\u753b\u9762\u306eReact\u5316\n\n\n\u6700\u5f8c\u306b\n\n\u304c\u3093\u3070\u3063\u3066\u3044\u304d\u307e\u3057\u3087\u3046\n\n## About\n\n- @mizchi\n- Qiita \u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a8\u30f3\u30b8\u30cb\u30a2\n- React\u52dd\u624b\u30a8\u30f4\u30a1\u30f3\u30b8\u30a7\u30ea\u30b9\u30c8\n- 4\u30f6\u6708\u306714kg\u75e9\u305b\u305f (80kg => 66kg)\n\n---\n\n## \u8fd1\u6cc1\n\n- \u30d3\u30b8\u30cd\u30b9\u30c9\u30e1\u30a4\u30f3\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u304c\u4e3b\u3067\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u5c11\u306a\u3044\n- \u6ce5\u81ed\u7cfb\u306e\u77e5\u898b\u306f\u6e9c\u307e\u3063\u3066\u308b\n- \u4f1a\u793e\u306e\u30e1\u30f3\u30d0\u30fc\u304c\u5897\u3048\u305f + \u81ea\u5206\u4ee5\u5916\u306e\u30d5\u30ed\u30f3\u30c8\u7cfb\u306e\u4eba\u304c\u5897\u3048\u305f\u306e\u3067\u3001\u8a2d\u8a08\u3092\u660e\u793a\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\n\n---\n\n## \u3053\u306e\u8cc7\u6599\u306f\u4f55\n\n- [JSer.info 5\u5468\u5e74\u8a18\u5ff5\u30a4\u30d9\u30f3\u30c8 - connpass](http://jser.connpass.com/event/24202/ \"JSer.info 5\u5468\u5e74\u8a18\u5ff5\u30a4\u30d9\u30f3\u30c8 - connpass\") (2016/01/16) \u306b\u3066\u767a\u8868\u3057\u305f\u8cc7\u6599\u3092\u52a0\u7b46\u3057\u305f\u3082\u306e\n- \u5982\u4f55\u306b\u3057\u3066React\u3092\u300c\u3075\u3064\u3046\u306e\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\u300d\u306b\u5c0e\u5165\u3057\u3066\u3044\u304f\u304b\n\n---\n\n## \u3075\u3064\u3046\u306e\u30a6\u30a7\u30d6\u30a2\u30d7\u30ea\n\n- **NOT** SPA\n    - SPA \u3067\u306a\u304f\u3068\u3082React\u306f\u4f7f\u3048\u308b\n    - jQuery \u306b\u652f\u914d\u3055\u308c\u305f\u73fe\u4ee3\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u6539\u5584\u3057\u305f\u3044\n\n=> \u8907\u96d1\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5c40\u6240\u7684\u306b\u89e3\u6c7a\u3059\u308b\u306e\u306bReact\u304c\u6709\u7528\u3067\u3042\u308b\u3053\u3068\u3092\u793a\u3057\u305f\u3044\n\n----\n\n## \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u6d41\u308c\n\n- AJAX\u4ee5\u524d(~2003)\n- jQuery\u6642\u4ee3(2004~)\n- \u69cb\u9020\u5316jQuery\u306e\u6642\u4ee3(2011~)\n    - Backbone\n- \u30c7\u30fc\u30bf\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306e\u8208\u9686\n    - Knockout\n    - Angular 1/2\n    - Vue\n- \u4eee\u60f3DOM\u306e\u6642\u4ee3\n    - React\n\n(\u6b21\u306f\u4eee\u60f3DOM\u306e\u96a0\u853d\u304c\u6b21\u306b\u6765\u305d\u3046)\n\n-----\n\n## React\u306e\u96e3\u3057\u3055\u518d\u8003\n\n\u5927\u304d\u304f2\u3064\n\n- React\u3092\u4f7f\u3046\u305f\u3081\u306e\u524d\u63d0\u3068\u306a\u308b\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u69cb\u7bc9\n- React\u306e\u8907\u96d1\u5316\u306b\u5bfe\u51e6\u306e\u305f\u3081\u306eFlux\u6982\u5ff5\n\n\u4eca\u56de\u8a71\u3059\u306e\u306f\u524d\u8005\u3092\u5012\u3059\n\n----------\n\n## React\u304c\u4e57\u308b\u70ba\u306e\u30e2\u30c0\u30f3\u306aJS\u3068\u306f(mizchi\u4e3b\u89b3)\n\n1. npm/browserify or webpack\u3067\u4f9d\u5b58\u3092\u89e3\u6c7a\n2. Babel/ES2015\n3. React/Flux\n4. Testable\n5. No More **jQuery plugins**\n6. No Side Effect on module loaded\n\n\n------\n\n## Qiita 2015\n\n1. CoffeeScript\n2. Sprockets / \u30b0\u30ed\u30fc\u30d0\u30eb\u540d\u524d\u7a7a\u9593\u6e21\u3057\n3. Backbone\n    4. JS\u306e\u30c6\u30b9\u30c8\u306fjasmine\u3067\u6570\u4ef6 \n5. jQuery plugins \u3084 jQuery UI \u307e\u307f\u308c\n\n\u203b Rails\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30b9\u30da\u30c3\u30af\u306f\u8c4a\u5bcc\n\n--------\n\n## \u521d\u898b\u3067\u306e\u8a55\u4fa1\n\n- Qiita\u306f2011\u672b\u304b\u3089\u958b\u767a\u3055\u308c\u3066\u3044\u308b\n  - \u5f53\u6642\u306e\u9078\u629e\u57fa\u6e96\u3068\u3057\u3066\u306f\u30b9\u30b8\u60aa\u3067\u306f\u306a\u3044\n- **\u5341\u5206\u306b\u30e6\u30fc\u30b6\u30fc\u306b\u4fa1\u5024\u3092\u63d0\u4f9b\u3057\u3066\u3044\u308b**(\u91cd\u8981)\n  - \u4fa1\u5024\u3092\u751f\u307e\u306a\u3044\u30b3\u30fc\u30c9\u306f\u30e1\u30f3\u30c6\u3059\u308b\u4fa1\u5024\u304c\u7121\u3044\n- \u305f\u3060\u3061\u3087\u3063\u3068CTO(yuku_t)\u306e\u624b\u7656\u304c\u3061\u3087\u3063\u3068\u5f37\u3044\u304b\u306a\u2026\n\n--------\n\n## \u964d\u3063\u3066\u304d\u305f\u4ed5\u4e8b\n\n=> \u306a\u3093\u304b\u3088\u304f\u3057\u3066\u304f\u308c\n\n--------\n\n# \u306a\u3093\u304b\u3088\u304f\u3059\u308b\n\n--------\n\n## \u306a\u3093\u304b\u3088\u304f\n\n- \u30e2\u30c0\u30f3\u306a\u958b\u767a\u74b0\u5883\u3092\u5c0e\u5165\u3059\u308b\n- ~~\u4eca\u306e\u30b3\u30fc\u30c9\u3092\u6d17\u7df4\u3055\u305b\u308b~~\n- \u518d\u5229\u7528\u3059\u308b\u30b3\u30fc\u30c9\u3068\u3067\u304d\u306a\u3044\u30b3\u30fc\u30c9\u3092\u5206\u5225\u3059\u308b\n\n----\n\n## \u6700\u521d\u306e\u5931\u6557\n\n-----\n\n# \u5931\u6557\n\n- \u7de8\u96c6\u753b\u9762\u3092\u66f8\u304d\u63db\u3048\u3088\u3046\u3068\u3057\u305f\n\n![inline](https://i.gyazo.com/6b075f3f4e3f761be20816ec496fe483.png)\n\n-------\n\n# \u66f8\u304d\u63db\u3048\u3088\u3046\u3068\u3057\u305f\u7406\u7531\n\n- \u30b3\u30fc\u30c9\u304c\u591a\u3044\u306e\u3067\u7f6e\u304d\u63db\u3048\u308c\u3070\u53e4\u3044\u30b3\u30fc\u30c9\u3092\u3054\u3063\u305d\u308a\u6d88\u305b\u308b\n- \u62e1\u5f35\u306e\u8981\u671b\u304c\u591a\u3044\n- \u30a8\u30c7\u30a3\u30bf\u306a\u3089Kobito\u306e\u958b\u767a\u306e\u30ce\u30a6\u30cf\u30a6\u3092\u6d3b\u304b\u305b\u308b\n\n----------\n\n# \u7834\u7dbb\u3078\n\n- \u307e\u305a\u3084\u3063\u3071\u308a\u5206\u91cf\u304c\u591a\u3044\n- \u3064\u3064\u304f\u3068\u7121\u9650\u306b\u77e5\u3089\u306a\u3044\u4ed5\u69d8\u304c\u51fa\u3066\u304f\u308b\n  - \u305d\u3082\u305d\u3082\u30c9\u30e1\u30a4\u30f3\u77e5\u8b58\u304c\u306a\u304b\u3063\u305f\n- \u5224\u660e\u3059\u308b\u4ed5\u69d8\u3092\u7d99\u304e\u63a5\u304e\u3059\u308b\u3068\u30b3\u30fc\u30c9\u304c\u7dba\u9e97\u306b\u306a\u3089\u306a\u3044\u2026\n\n----------\n\n## \u9032\u6357\n\n- \u300c2\u9031\u9593\u3050\u3089\u3044\u3067\u7d42\u308f\u3089\u305b\u308b\u308f\u301c\u300d\n- \u66f8\u304d\u76f4\u3057\u305f\u30b3\u30fc\u30c9\u304c\u8aad\u307f\u6613\u304f\u306a\u3089\u305a\u8f9b\u3044\n- => 2\u30f6\u6708\u305f\u3063\u3066\u3082\u7d42\u308f\u3089\u305a\n\n-------------\n\n## \u7d50\u679c\n\n- \u4e00\u90e8\u306e\u305e\u3044\u3066\u30b3\u30fc\u30c9\u3092\u7834\u68c4\u3057\u3066\u4e2d\u65ad\n\n------------\n\n## \u6559\u8a13\n\n- \u4ed5\u69d8\u3092\u7406\u89e3\u3057\u3066\u306a\u3044\u3082\u306e\u306e\u30b3\u30fc\u30c9\u306f\u66f8\u3051\u306a\u3044\n- \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u5883\u754c\u9762\u304c\u660e\u793a\u3055\u308c\u3066\u306a\u3044\u3082\u306e\u306f\u5206\u89e3\u3067\u304d\u306a\u3044\n- \u300c\u5225\u5b9f\u88c5\u3067\u5143\u306e\u4ed5\u69d8\u3092\u5b8c\u5168\u518d\u73fe\u300d\u306f\u30a8\u30cd\u30eb\u30ae\u30fc\u306e\u7121\u99c4\n- **\u898b\u7a4d\u3082\u308a\u306f\u5931\u6557\u3059\u308b**\n\n-------------\n\n## \u632f\u308a\u51fa\u3057\u306b\u623b\u308b\n\n-----------\n\n## \u6c7a\u610f\n\n- \u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u3092\u6574\u7406\u3057\u3088\u3046\n- \u73fe\u6642\u70b9\u3067\u306e\u8ca0\u50b5\u3068\u4f7f\u3048\u308b\u90e8\u5206\u3092\u8a8d\u8b58\u3057\u3088\u3046\n\n-------\n\n## \u30b4\u30fc\u30eb\u306e\u8a2d\u5b9a\n\n- React/Babel\u3067\u65b0\u898f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u53d7\u3051\u5165\u308c\u3089\u308c\u308b\u74b0\u5883\n- Turbolinks(PushState)\u304c\u5c0e\u5165\u53ef\u80fd\u306a\u521d\u671f\u5316\u30d5\u30ed\u30fc\u3092\u4f5c\u308b(\u4f7f\u3046\u304b\u306f\u3068\u3082\u304b\u304f)\n\n--------\n\n## Rails\u4e0a\u306e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30a8\u30f3\u30b8\u30cb\u30a2\u306e\u8a2d\u5b9a\n\n- React.Component\u63d0\u4f9b\u304a\u3058\u3055\u3093\n- history.pushState \u304c\u5c0e\u5165\u3067\u304d\u308b\u72b6\u614b\u3092\u4f5c\u308b\n    - \u904b\u7528\u3059\u308b\u304b\u306f\u5225\n    - \u30b3\u30fc\u30c9\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u76ee\u6a19\u3068\u3057\u3066\u6709\u7528\n\n--------------\n\n## \u8db3\u5143\u3092\u898b\u76f4\u3059\n\n--------------\n\n## \u3084\u3063\u305f\u3053\u3068\n\n1. npm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04\n2. Sprockets => browserify(-rails)\n3. \u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u5c0e\u5165\n4. React\u3067\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u7f6e\u304d\u63db\u3048\n\n----------\n\n## 1. npm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04\n\n----------\n\n## npm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04: \u5143\u306e\u72b6\u614b\n\n- \u30e9\u30a4\u30d6\u30e9\u30ea\u3054\u3068\u306b\u7570\u306a\u308bCDN\u3092\u53c2\u7167\n- \u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u5927\n- \u3069\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4f7f\u3063\u3066\u308b\u304b\u898b\u901a\u3057\u304c\u60aa\u3044\n\n----------\n\n## npm\u306b\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u96c6\u7d04: \u5909\u66f4\u5f8c\n\n- npm\u3068bower\u3067\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u3092\u89e3\u6c7a\u3059\u308b\u3088\u3046\u306b\u3057\u305f\n- 1\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u56fa\u3081\u3066\u81ea\u524d\u306e S3\u304b\u3089 CloudFront \u3067\u914d\u4fe1\n- \u66f4\u306bnpm\u306b\u96c6\u7d04\u3092\u9032\u3081\u3066bower\u3092\u524a\u9664\n- bower\u3084\u3081\u308d\n\n---------\n\n## 2. Sprockets => browserify\n\n------------\n\n## browserify\u5c0e\u5165\n\n- commonjs\u5f62\u5f0f\u3067\u66f8\u304b\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u9759\u7684\u89e3\u6790\u3057\u30661\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30d3\u30eb\u30c9\n- \u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u3092\u4f7f\u308f\u305a\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u89e3\u6c7a\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\n----------\n\n## \u305d\u3057\u3066 Sprockets \u3092\u6368\u3066\u308b\n\n----------\n\n## Sprockets\n\n- Rails\u4e0a\u306e\u30c7\u30d5\u30a1\u30af\u30c8\u306e\u6a19\u6e96\u30e2\u30b8\u30e5\u30fc\u30eb\u30b7\u30b9\u30c6\u30e0\n- \u62e1\u5f35\u5b50\u3054\u3068\u306b\u5909\u63db\n\n-----------\n\n## Sprockets\u306e\u554f\u984c\n\n- \u30d5\u30a1\u30a4\u30eb\u30b9\u30b3\u30fc\u30d7\u3067\u8fd4\u308a\u5024\u3092\u6301\u3066\u306a\u3044\n- node\u3067\u52d5\u304b\u306a\u3044\n- ruby\u306e\u554f\u984c\u3068js\u306e\u554f\u984c\u3092\u5207\u308a\u5206\u3051\u3089\u308c\u306a\u3044\n- JS\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u306b\u4e57\u308c\u306a\u3044\n- Sprockets\u3067\u52d5\u304fJS\u7cfb\u306egem\u30e1\u30f3\u30c6\u3055\u308c\u306a\u3044\n\n-----------\n\n`hoge.js.coffee.erb`\n\n```coffee\n# require_tree ./foo_dir\n# require app\n```\n\n\u5fc5\u305a asset_root(app/assets/javascripts) \u304b\u3089\u89e3\u6c7a\n\n\n---------\n\n![](https://i.gyazo.com/646bf1555f1af10998b03ddde8d7c66a.png)\n\n----------\n\n## \u66f8\u304d\u63db\u3048\u308b\n\n---------\n\n## \u66f8\u304d\u63db\u3048\u305f\u3044\u2026\n\n- \u5206\u91cf\u304c\u591a\u3044\n- \u5e73\u884c\u3057\u3066\u958b\u767a\u3057\u3066\u3044\u308b\u6a5f\u80fd\u304c\u305f\u304f\u3055\u3093\u3042\u308b\n- \u3061\u3093\u305f\u3089\u3084\u3063\u3066\u308b\u3068\u7121\u9650\u306b\u30b3\u30f3\u30d5\u30ea\u30af\u30c8\u3059\u308b\n\n----------\n\n## \u89e3\u6cd5\n\n- \u30b9\u30af\u30ea\u30d7\u30c8\u66f8\u3044\u3066\u4e00\u767a\n- \u3059\u3079\u3066\u3092\u76f8\u5bfe\u30d1\u30b9\u306b\u66f8\u304d\u63db\u3048\u308b\n- browserify - app/assets/javascripts\u4ee5\u4e0b\u306eJS\u3092\u5168\u3066commonjs\u306erequire\u306b\u66f8\u304d\u63db\u3048\u308b - Qiita http://qiita.com/mizchi/items/20f529a9d783552d7c7d\n\n--------\n\n- \u306a\u3093\u304b\u3084\u308b\n\n```js\nfunction convertSprocketPathToCommonjsPath(root, fpath, spath) {\n  if (/^\\./.test(spath)) {\n    return spath;\n  }\n  let relToRoot = path.relative(fpath, root);\n  let rel = path.join(relToRoot, spath).replace(/^(\\.\\.\\/)/, \"\");\n  return rel.indexOf(\"..\") > -1 ? rel : \"./\" + rel;\n}\n```\n\nhttps://gist.github.com/mizchi/5ee5cd7d0ca9447b92d5\n\n---------\n\n![fit](https://i.gyazo.com/dd3b74cb97e4d7cb528d894ad2e11f74.png)\n\n\n----------\n\n## \u9054\u6210\n\n- \u30d5\u30a1\u30a4\u30eb\u5358\u4f4d\u306e\u4f9d\u5b58\u306f\u660e\u793a\u3055\u308c\u305f\n- \u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u4f9d\u5b58\u306a\u306e\u306f\u5909\u308f\u3089\u305a\n\n---------\n\n## Qiita\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u30b7\u30b9\u30c6\u30e0(\u65e7)\n\n- Sprockets\u3067\u30d5\u30a1\u30a4\u30eb\u9023\u7d50\n- \u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u6e21\u3057\n\n```js\nnew Qiita.views.HomeView();\n```\n---------\n\n\u65e7\n\n```js\n//= require foo\nQiita.util.foo();\nQiita.util.bar = function(){...};\n```\n\n\u65b0\n\n```js\nconst foo = require('./foo');\nfoo();\nmodule.exports = function bar() {...}\n```\n\n-----------\n\n## browserify \u306b\u3088\u3063\u3066\u3082\u305f\u3089\u3055\u308c\u308b\u3082\u306e\n\n- \u4f9d\u5b58\u304c\u305d\u308c\u305e\u308c\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u5b8c\u7d50\u3057\u305f\u72b6\u614b\n- \u5358\u4f53\u30c6\u30b9\u30c8\u53ef\u80fd\u306a\u9589\u3058\u305f\u53c2\u7167\u306e\u63d0\u4f9b\n- \u540d\u524d\u7a7a\u9593\u306e\u521d\u671f\u5316\u9806\u306b\u5de6\u53f3\u3055\u308c\u306a\u304f\u306a\u308b\n\n----------\n\n## \u3053\u306e\u904e\u7a0b\u3067\u3084\u3063\u305f\u3053\u3068\n\n-------\n\n## gulp\n\n- \u300c\u30d5\u30ed\u30f3\u30c8\u304c\u66f4\u65b0\u3055\u308c\u305f\u3089 npm install \u3068 gulp \u3092\u53e9\u3044\u3066\u304f\u3060\u3055\u3044~\u300d\n- => \u3057\u306a\u3044\n- \u300c\u52d5\u304b\u306a\u3044\u3093\u3060\u3051\u3069\u300d\n- => \u5bfe\u5fdc\u3067\u4e00\u65e5\u304c\u7d42\u308f\u308b\n\n-----\n\n## Sprockets\u3092\u6368\u3066\u308b\u6e96\u5099\n\n- browserify-rails\n- \u53c2\u8003: \u30e2\u30c0\u30f3JavaScript\u958b\u767a\u74b0\u5883 on Rails - \u30af\u30c3\u30af\u30d1\u30c3\u30c9\u958b\u767a\u8005\u30d6\u30ed\u30b0 http://techlife.cookpad.com/entry/2015/12/14/130041\n\n------\n\n## browserify-rails\u306b\u3064\u3044\u3066\n\n- \u4e2d\u3067\u4f7f\u3063\u3066\u308b\u306e\u306fbrowserify-incremental\n- \u3076\u3063\u3061\u3083\u3051watchify\u306e\u65b9\u304c\u901f\u3044\n  - babel\u306e\u521d\u671f\u5316\u306e\u5dee\n- \u3044\u308d\u3093\u306a\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5\u8003\u3048\u3066\u30a2\u30ea\n\n-----------\n\n## \u7d50\u679c\n\n\u3059\u3079\u3066\u3092 browserify\u306etransform \u3067\u89e3\u6c7a\u3057\u305f\n\n----------\n\n## 3. \u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u306e\u5c0e\u5165\n\n---------\n\n## \u72b6\u6cc1\n\n- browserify\u306b\u3088\u3063\u3066\u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f9d\u5b58\u304c\u660e\u793a\u3055\u308c\u305f\n- jasmine\u304c\u91cd\u3044\u306e\u3067node\u3067\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3057\u305f\u3044\n- E2E\u30c6\u30b9\u30c8\u306f\u307e\u3060\u8003\u3048\u306a\u3044\n\n----------\n\n## \u30c6\u30b9\u30c8\u5bfe\u8c61\n\n- \u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u5206\u89e3\u3055\u308c\u305f\u518d\u5229\u7528\u6027\u306e\u30b3\u30fc\u30c9\n- \u65b0\u898f\u306b\u66f8\u304b\u308c\u308b react component\n- \u4f9d\u5b58\u304c\u58ca\u308c\u3066\u306a\u3044\u304b\u3001\u8aad\u307f\u8fbc\u3093\u3060\u3060\u3051\u3067\u526f\u4f5c\u7528\u304c\u767a\u751f\u3057\u306a\u3044\u304b\u691c\u77e5\n\n---------\n\n## \u30c6\u30b9\u30c8\u3092\u66f8\u304f\n\n- JavaScript - \u30c6\u30b9\u30c8\u304c\u306a\u3044JS\u74b0\u5883\u306b\u30e2\u30c0\u30f3\u306a\u30c6\u30b9\u30c8\u74b0\u5883\u3092\u5c0e\u5165\u3057\u3066\u3044\u304f - Qiita http://qiita.com/mizchi/items/bdf84f0b1c11c2870290\n- node/mocha/isparta/jsdom\n\n----------\n\n## \u6700\u521d\u306e\u66f8\u304d\u63db\u3048\n\n```diff\n+ module.exports =\nQiita.util.foo = function() {...}\n```\n\n\u203b coffee \u304c\u591a\u3044\u306e\u3067 commonjs\n\n---------\n\n## \u30c6\u30b9\u30c8\n\n```js\nimport foo from \"../../src/util/foo\";\ndescribe(\"util\", () => {\n  describe(\"foo\", () => {\n    it(\"returns foo\", () => {\n      assert.equal(foo(), \"foo\");\n    });\n  });\n});\n```\n\n---------\n\n## \u6f70\u3059\n\n- `git grep 'Qiita.util.foo'`\n- \u5168\u90e8require\u306b\u66f8\u304d\u63db\u3048\u308b\n- Jasmine\u306e\u30b3\u30fc\u30c9\u3092\u5168\u90e8\u7f6e\u304d\u63db\u3048\u308b\n\n------------\n\n## \u30c6\u30b9\u30c8\u306e\u4f8b\n\n```js\n  beforeEach(() => {\n    deleteSrcCache();\n    let jsdom = require('jsdom').jsdom;\n    global.document = jsdom('<html><body></body></html>')\n    global.window = document.defaultView;\n    global.navigator = window.navigator;\n    global.location = window.location;\n  });\n\n  afterEach(() => {\n    delete global.document;\n    delete global.window;\n    delete global.navigator;\n  });\n```\n\n-----------\n\n## \u6bce\u56de require cache\u306f\u6d88\u3059\n\n```js\nexport function deleteSrcCache() {\n  Object.keys(require.cache).map(cachePath => {\n    if (/src/.test(cachePath)) {\n      delete require.cache[cachePath];\n    }\n  });\n}\n```\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570\u306b\u526f\u4f5c\u7528\u304c\u3042\u308b\u3068 require cache\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u3057\u307e\u3046\u3068\u518d\u5b9a\u7fa9\u3055\u308c\u306a\u3044\n\n---\n\n## \u30c6\u30b9\u30c8\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u9078\u5b9a\n\n- Mocha \u304c RSpec \u306b\u96f0\u56f2\u6c17\u4f3c\u3066\u308b\u306e\u3067\u66f8\u3044\u3066\u3082\u3089\u3044\u3084\u3059\u3044\n- ava \u3082\u3044\u3044\u3051\u3069\u72ec\u81ea\u6982\u5ff5\u304c\u591a\u304f\u3066\u3081\u3093\u3069\u304b\u3063\u305f\n\n---\n\n## React \u306e\u30c6\u30b9\u30c8\n\n\u4eca\u306f [airbnb/enzyme: JavaScript Testing utilities for React](https://github.com/airbnb/enzyme \"airbnb/enzyme: JavaScript Testing utilities for React\") \u4e00\u629e\n\n-----------\n\n## 3 React\u306b\u66f8\u304d\u63db\u3048\n\n-----------\n\n## \u30d8\u30c3\u30c0\n\n![fit](https://i.gyazo.com/fe9086d42e429dcf567ca2553328b745.png)\n\n---------\n\n## \u30b9\u30e9\u30a4\u30c9\u6a5f\u80fd(\u3053\u308c)\n\n![](https://i.gyazo.com/9850fdc441643a12f08ddae58f261083.png)\n\n----\n\n## \u30b3\u30e1\u30f3\u30c8\u30d5\u30a9\u30fc\u30e0\n\n![](https://i.gyazo.com/ddeb66dee5291828422d40258bb1e2fc.png)\n\n-----------\n\n## React\u5316\n\n- Flux\u306e\u9078\u5b9a\u9762\u5012\u3060\u3063\u305f\u306e\u3067\u30d9\u30bf\u66f8\u304d\u3057\u305f\n- react-rails \u306e prerender: false \u3067\u66f8\u304d\u51fa\u3057\n\n----------\n\n## react-dispatcher-decorator\n\n- https://github.com/mizchi/react-dispatcher-decorator\n- \u30c7\u30b3\u30ec\u30fc\u30bf\u3067event-emitter\u306epubsub\u306e\u95a2\u6570\u3092DI\n- https://github.com/mizchi/flumpt \u304b\u3089\u5207\u308a\u51fa\u3057\u305f\n\n---\n\n## \u306a\u305c Redux \u3067\u306f\u306a\u3044\u304b\n\n- \u975eSPA\u306b\u7d71\u5408\u7684\u306a\u7ba1\u7406\u6a5f\u69cb\u304c(\u305f\u3076\u3093)\u30ef\u30fc\u30af\u3057\u306a\u3044\n    - \u30b7\u30f3\u30b0\u30eb\u30b9\u30c8\u30a2\u306b\u3059\u308b\u306e\u306f\u56f0\u96e3\n- \u89e3\u6c7a\u3057\u305f\u3044\u554f\u984c\u306b\u5bfe\u3057\u3066\u30b3\u30fc\u30c9\u304c\u5927\u3052\u3055\u306b\n\n---\n\n## \u30b7\u30f3\u30b0\u30eb\u30b9\u30c8\u30a2\u8a2d\u8a08\u3092\u76ee\u6307\u3059\u306b\u306f\n\n- DOM\u306b\u7d10\u4ed8\u304b\u306a\u3044\u4eee\u60f3\u30eb\u30fc\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u3001\u753b\u9762\u306b\u51fa\u73fe\u3057\u3046\u308b\u8981\u7d20\u306e\u7d10\u4ed8\u3092\u884c\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u81ea\u4f5c\u3059\u308b\u5fc5\u8981\n\n----------\n\n## Rails\u4e0a\u306eReact\n\n-----\n\n## react-rails\n\n- Rails\u5074\u3067 `= react_component(\"Header\", {a: 1}, {prerender: false})`\n- `<div data-props='<serialize\u5316\u3055\u308c\u305fjson>'..>...</div>`\n- Rails => JS\u306e\u30c7\u30fc\u30bf\u53d7\u3051\u6e21\u3057\u30d7\u30ed\u30c8\u30b3\u30eb\u304c\u307b\u3057\u304b\u3063\u305f\n- SSR\u306f\u30b5\u30fc\u30d0\u30fc\u306e\u8ca0\u8377\u307f\u3066\u6bb5\u968e\u7684\u306b\u5c0e\u5165(\u3057\u305f\u3044)\n\n----\n\n## react-rails \u3067\u306e\u30c7\u30fc\u30bf\u306e\u6e21\u3057\u65b9\n\n- ApplicationHelper\u3067\u30cf\u30c3\u30b7\u30e5\u306b\u5909\u63db\u3059\u308b\u30d8\u30eb\u30d1\u3092\u7528\u610f\n\n```ruby\ndef comment_to_component_props(comment)\n  { ... }\nend\n```\n\n- Rails\u3067\u306f\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u30c6\u30b9\u30c8\u3059\u308b\n- \u5c06\u6765\u7684\u306bGraphQL\u3092\u4f7f\u3046\u5834\u5408\u3001\u305f\u3076\u3093\u3053\u3053\u3092\u7f6e\u304d\u63db\u3048\u308b\n\n-----------\n\n## react-rails\u306e\u6b21\n\n\u4eca\u306f\u4ee3\u66ff\u624b\u6bb5\u304c\u305f\u304f\u3055\u3093\n\n- https://github.com/airbnb/hypernova\n- https://github.com/alt-j/fast-react-server\n\n\u3042\u305f\u308a\u304c\u6c17\u306b\u306a\u3063\u3066\u308b\n\n-------\n\n## Flowtype\n\n-------\n\n## Flowtype\u306e\u5c0e\u5165\n\n- \u65b0\u898f\u3067\u66f8\u304f\u90e8\u5206\u306fBabel\u3067\n- \u53e4\u3044\u30e2\u30b8\u30e5\u30fc\u30eb\u3082\u4eca\u5f8c\u3082\u958b\u767a\u3059\u308b\u90e8\u5206\u3092Babel\u3067\n- Babel\u3060\u3063\u305f\u3089\u6bb5\u968e\u7684\u306bFlow\u5165\u308c\u3089\u308c\u308b\u3084\u3093 => \u5c0e\u5165\n\n-------\n\n## Flowtype\u306e\u9078\u5b9a\u7406\u7531\n\n- \u6bb5\u968e\u7684\u306b\u5c0e\u5165\u3057\u3066\u3044\u3051\u308b\n- React/JSX \u306b\u5bfe\u3057\u3066\u304b\u306a\u308a\u578b\u304c\u52b9\u304f\n- \u63a8\u8ad6\u304c\u512a\u79c0\n- \u30d5\u30ed\u30f3\u30c8\u306e\u30c6\u30b9\u30c8\u3057\u3065\u3089\u3044\u90e8\u5206\u3092\u305b\u3081\u3066\u3067\u3082\u30ab\u30d0\u30fc\n\n\u53c2\u8003: [\u578b\u306a\u304d\u4e16\u754c\u306e\u305f\u3081\u306eflowtype\u5165\u9580 - Qiita](http://qiita.com/mizchi/items/95ee0101ac22e4b7b662 \"\u578b\u306a\u304d\u4e16\u754c\u306e\u305f\u3081\u306eflowtype\u5165\u9580 - Qiita\")\n\n----\n\n## Typescript \u3092\u9078\u3070\u306a\u304b\u3063\u305f\u7406\u7531\n\n- \u30c8\u30c3\u30d7\u30ec\u30d9\u30eb\u3067\u5168\u90e8\u306e\u30b3\u30fc\u30c9\u3092\u6271\u3048\u306a\u3044\u3068\u4e0d\u4fbf\n    - babel/coffee\u3068\u7d44\u308f\u305b\u308b\u3068gulp\u306e\u8907\u96d1\u306a\u30bf\u30b9\u30af\u3092\u7d44\u3080\u5fc5\u8981\n- (\u6700\u8fd1\u306e\u958b\u767a\u65b9\u91dd\u304c\u306a\u3093\u304b\u6c17\u306b\u98df\u308f\u306a\u3044)\n\n--------\n\n## \u8272\u3005\u8f9b\u304b\u3063\u305f\n\n\n-----\n\n## \u4eca\u3084\u3063\u3066\u308b\u3053\u3068\n\n![](https://i.gyazo.com/4569eb8465fa3a88b91641174190d120.png)\n\n\u7de8\u96c6\u753b\u9762\u306eReact\u5316\n\n--------\n\n## \u6700\u5f8c\u306b\n\n- \u304c\u3093\u3070\u3063\u3066\u3044\u304d\u307e\u3057\u3087\u3046\n", "tags": ["react.js"]}