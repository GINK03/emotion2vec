{"context": "\u5186\u5f62\u3042\u307f\u3060\u304f\u3058\u306e\u6a2a\u7dda\u3067\u4e0d\u53ef\u306a\u3082\u306e\u3092\u30de\u30fc\u30af\u3002\u305f\u3060\u3057\u843d\u77f3\u304c\u6a2a\u7dda\u306b\u304b\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u7279\u5225\u6271\u3044\u3002\n\ntyama_henae04.rb\n#!/usr/bin/env ruby\n#http://qiita.com/mtsmfm/items/6d9112fcc568908caaba\n#http://mtsmfm.github.io/2016/06/04/doukaku-e04.html\n#1630-1659\n\nN=8\n\nif __FILE__==$0\n    while gets\n        line=$_.chomp.split(':')\n        a=line[0].reverse.chars.map{|e|[(e.to_i+N-1)%N,(e.to_i)%N]}\n        idx1=line[1].ord-65\n        (a.size-1).downto(0){|i|\n            x=a[i].index(idx1)\n            if x\n                idx1=a[i][x^1]\n                a[i][2]=true\n            end\n        }\n        f=a.none?{|e|e[2]}\n        puts N.times.select{|i|\n            next false if f && i==idx1\n            idx=i\n            a.all?{|e|\n                x=e.index(idx)\n                !x || (!e[2] && idx=e[x^1])\n            }\n        }.map{|e|(e+65).chr}*''\n        STDOUT.flush\n    end\nend\n\n\n\n\u5186\u5f62\u3042\u307f\u3060\u304f\u3058\u306e\u6a2a\u7dda\u3067\u4e0d\u53ef\u306a\u3082\u306e\u3092\u30de\u30fc\u30af\u3002\u305f\u3060\u3057\u843d\u77f3\u304c\u6a2a\u7dda\u306b\u304b\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408\u306f\u7279\u5225\u6271\u3044\u3002\n\n```rb:tyama_henae04.rb\n#!/usr/bin/env ruby\n#http://qiita.com/mtsmfm/items/6d9112fcc568908caaba\n#http://mtsmfm.github.io/2016/06/04/doukaku-e04.html\n#1630-1659\n\nN=8\n\nif __FILE__==$0\n\twhile gets\n\t\tline=$_.chomp.split(':')\n\t\ta=line[0].reverse.chars.map{|e|[(e.to_i+N-1)%N,(e.to_i)%N]}\n\t\tidx1=line[1].ord-65\n\t\t(a.size-1).downto(0){|i|\n\t\t\tx=a[i].index(idx1)\n\t\t\tif x\n\t\t\t\tidx1=a[i][x^1]\n\t\t\t\ta[i][2]=true\n\t\t\tend\n\t\t}\n\t\tf=a.none?{|e|e[2]}\n\t\tputs N.times.select{|i|\n\t\t\tnext false if f && i==idx1\n\t\t\tidx=i\n\t\t\ta.all?{|e|\n\t\t\t\tx=e.index(idx)\n\t\t\t\t!x || (!e[2] && idx=e[x^1])\n\t\t\t}\n\t\t}.map{|e|(e+65).chr}*''\n\t\tSTDOUT.flush\n\tend\nend\n```\n", "tags": ["\u3069\u3046\u66f8\u304f", "yhpg", "Ruby"]}