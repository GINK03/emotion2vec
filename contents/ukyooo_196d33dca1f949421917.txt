{"context": "\u6bce\u5ea6\u3001 VPC \u3092\u4f5c\u6210\u3057\u3066 Subnet \u3092\u5207\u308b\u969b\u306b \u300cIP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8\u300d \u306e\u8a2d\u5b9a\u306b\u95a2\u3057\u3066\u60a9\u3080\u306e\u3067\u30e1\u30e2\u3002\n\u500b\u4eba\u7684\u306a\u30eb\u30fc\u30eb\u306a\u306e\u3067\u3001\u3042\u304f\u307e\u3067\u53c2\u8003\u7a0b\u5ea6\u306b\u3002\n\n\nAWS VPC Subnet IP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8 \u8a2d\u5b9a \u30eb\u30fc\u30eb\n\u4e0b\u8a18\u306b\u793a\u3059 \u7528\u9014 \u306e\u7d44\u307f\u5408\u308f\u305b\u3067 \u5024 \u3092\u8ad6\u7406\u7a4d\u3067\u639b\u3051\u3042\u308f\u305b\u305f\u7d50\u679c\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n\n\n2 \u9032\u6570\n\u5024\n\u7528\u9014\n\u88dc\u8db3\n\n\n\n\n10000000\n128\nprivate\n0: public / 1: private\n\n\n01000000\n64\n\n\u4e88\u5099\n\n\n00100000\n32\nproduction\n1: \u672c\u756a\u7528 ( staging \u3092\u542b\u3080 )\n\n\n00010000\n16\ndevelop\n1: \u958b\u767a\u7528\n\n\n00001000\n8\ncompute\n1: EC2 / etc.\n\n\n00000100\n4\ndatabase\n1: RDS / ElastiCache / etc.\n\n\n00000010\n2\n\n\u4e88\u5099\n\n\n00000001\n1\nAvailability Zone\n0: a / 1: c\n\n\n\n\n\u88dc\u8db3\n\ncompute \u3068\u306f AWS > Services > Compute \u306b\u5c5e\u3059\u308b service\ndatabase \u3068\u306f AWS > Services > Database \u306b\u5c5e\u3059\u308b service\n\n\n\nAWS VPC Subnet IP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8 \u8a2d\u5b9a \u4f8b\n\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b\u3067 IP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8 \u3092\u6c7a\u5b9a\u3055\u305b\u308b\u3002\n\u4f8b\u3048\u3070\u3001private \u9818\u57df\u306b\u8a2d\u7f6e\u3059\u308b\u672c\u756a\u7528 DB \u306e\u5834\u5408\u3060\u3068\u3001\n    10000000 : private\n    00100000 : production\n +  00000100 : database\n--------------------------------------------\n    10100100 : private-production-database\n\n\u3092\u3001 AZ-a \u306b\u3001\n    10100100 : private-production-database\n +  00000000 : (Availability Zone) a\n--------------------------------------------\n    10100100 : private-production-database-a (=164)\n\n\u3068\u3001 AZ-c \u306b\u3001\n    10100100 : private-production-database\n +  00000001 : (Availability Zone) c\n--------------------------------------------\n    10100101 : private-production-database-c (=165)\n\n\u3067\u3001 10 \u9032\u6570\u306b\u5909\u63db\u3057\u3001\u305d\u308c\u305e\u308c\u3001\n\nx.x.164.0/24 : private-production-database-a\nx.x.165.0/24 : private-production-database-c\n\n\u3068\u3044\u3046\u5177\u5408\u306b\u306a\u308b\u3002\n\n\nAWS VPC Subnet CIDR \u8a2d\u5b9a \u4f8b\n\u4e0b\u8a18\u306f VPC 10.0.0.0/16 \u306b Subnet \u3092\u8a2d\u5b9a\u3059\u308b\u969b\u306e\u4f8b\u3002\n\u3053\u3061\u3089\u3082\u53c2\u8003\u7a0b\u5ea6\u306b\u3002\n\n\n\n2 \u9032\u6570\n\u5024\nCIDR\nName\n\u88dc\u8db3\n\n\n\n\n00000000\n0\n10.0.0.0/24\npublic-a\nELB \u306a\u3069\n\n\n00000001\n1\n10.0.1.0/24\npublic-c\n\n\n\n00001000\n8\n10.0.8.0/24\npublic-compute-a\n\u8e0f\u307f\u53f0 EC2 \u306a\u3069\n\n\n00001001\n9\n10.0.9.0/24\npublic-compute-c\n\n\n\n00111000\n56\n10.0.56.0/24\npublic-common-compute-a\n\n\n\n00111001\n57\n10.0.57.0/24\npublic-common-compute-c\n\n\n\n00010100\n20\n10.0.20.0/24\npublic-develop-database-a\n\u958b\u767a\u7528 DB \u306a\u3069 (local \u304b\u3089\u3082\u63a5\u7d9a\u3057\u305f\u3044\u5834\u5408)\n\n\n00010101\n21\n10.0.21.0/24\npublic-develop-database-c\n\n\n\n10000000\n128\n10.0.128.0/24\nprivate-a\nNAT Gateway \u306a\u3069\n\n\n10000001\n129\n10.0.129.0/24\nprivate-c\n\n\n\n10001000\n136\n10.0.136.0/24\nprivate-compute-a\n\n\n\n10001001\n137\n10.0.137.0/24\nprivate-compute-c\n\n\n\n10011000\n152\n10.0.152.0/24\nprivate-develop-compute-a\n\u958b\u767a\u7528 EC2 \u306a\u3069\n\n\n10011001\n153\n10.0.153.0/24\nprivate-develop-compute-c\n\n\n\n10100100\n164\n10.0.164.0/24\nprivate-production-database-a\n\u672c\u756a\u7528 DB \u306a\u3069\n\n\n10100101\n165\n10.0.165.0/24\nprivate-production-database-c\n\n\n\n10101000\n168\n10.0.168.0/24\nprivate-production-compute-a\n\u672c\u756a\u7528 EC2 \u306a\u3069\n\n\n10101001\n169\n10.0.169.0/24\nprivate-production-compute-c\n\n\n\n10110100\n180\n10.0.180.0/24\nprivate-common-database-a\n\u5171\u7528 DB \u306a\u3069 ( NOTE.1 )\n\n\n10110101\n181\n10.0.181.0/24\nprivate-common-database-c\n\n\n\n\n\n\nNOTE.1 : \u672c\u756a\u3068\u958b\u767a\u3067\u5171\u7528\u3059\u308b\u3053\u3068\u3092\u660e\u793a\u3057\u305f\u3044\u5834\u5408\u300100100000 (=production) \u3068 00010000 (=develop) \u306e bit \u3092\u7acb\u3066\u3066 00011000 (=common) \u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u3001\u306a\u3069\u3002\uff08\u3053\u308c\u3082\u500b\u4eba\u7684\u306a\u30eb\u30fc\u30eb\uff09\n\n\n\u6bce\u5ea6\u3001 VPC \u3092\u4f5c\u6210\u3057\u3066 Subnet \u3092\u5207\u308b\u969b\u306b **\u300cIP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8\u300d** \u306e\u8a2d\u5b9a\u306b\u95a2\u3057\u3066\u60a9\u3080\u306e\u3067\u30e1\u30e2\u3002\n\n\u500b\u4eba\u7684\u306a\u30eb\u30fc\u30eb\u306a\u306e\u3067\u3001\u3042\u304f\u307e\u3067\u53c2\u8003\u7a0b\u5ea6\u306b\u3002\n\n\n\n- - -\n\n## AWS VPC Subnet IP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8 \u8a2d\u5b9a \u30eb\u30fc\u30eb\n\n\u4e0b\u8a18\u306b\u793a\u3059 `\u7528\u9014` \u306e\u7d44\u307f\u5408\u308f\u305b\u3067 `\u5024` \u3092\u8ad6\u7406\u7a4d\u3067\u639b\u3051\u3042\u308f\u305b\u305f\u7d50\u679c\u3092\u4f7f\u7528\u3059\u308b\u3002\n\n| 2 \u9032\u6570    | \u5024    | \u7528\u9014              | \u88dc\u8db3                          |\n|-----------|-------|-------------------|-------------------------------|\n| 10000000  |   128 | private           | 0: public / 1: private        |\n| 01000000  |    64 |                   | \u4e88\u5099                          |\n| 00100000  |    32 | production        | 1: \u672c\u756a\u7528 ( staging \u3092\u542b\u3080 )  |\n| 00010000  |    16 | develop           | 1: \u958b\u767a\u7528                     |\n| 00001000  |     8 | compute           | 1: EC2 / etc.                 |\n| 00000100  |     4 | database          | 1: RDS / ElastiCache / etc.   |\n| 00000010  |     2 |                   | \u4e88\u5099                          |\n| 00000001  |     1 | Availability Zone | 0: a / 1: c                   |\n\n\n\n### \u88dc\u8db3\n\n* compute \u3068\u306f `AWS > Services > Compute` \u306b\u5c5e\u3059\u308b service\n* database \u3068\u306f `AWS > Services > Database` \u306b\u5c5e\u3059\u308b service\n\n\n\n- - -\n\n## AWS VPC Subnet IP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8 \u8a2d\u5b9a \u4f8b\n\n\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b\u3067 IP \u30a2\u30c9\u30ec\u30b9 \u7b2c 3 \u30aa\u30af\u30c6\u30c3\u30c8 \u3092\u6c7a\u5b9a\u3055\u305b\u308b\u3002\n\n\u4f8b\u3048\u3070\u3001private \u9818\u57df\u306b\u8a2d\u7f6e\u3059\u308b\u672c\u756a\u7528 DB \u306e\u5834\u5408\u3060\u3068\u3001\n\n```\n    10000000 : private\n    00100000 : production\n +  00000100 : database\n--------------------------------------------\n    10100100 : private-production-database\n```\n\n\u3092\u3001 AZ-a \u306b\u3001\n\n```\n    10100100 : private-production-database\n +  00000000 : (Availability Zone) a\n--------------------------------------------\n    10100100 : private-production-database-a (=164)\n```\n\n\u3068\u3001 AZ-c \u306b\u3001\n\n```\n    10100100 : private-production-database\n +  00000001 : (Availability Zone) c\n--------------------------------------------\n    10100101 : private-production-database-c (=165)\n```\n\n\u3067\u3001 10 \u9032\u6570\u306b\u5909\u63db\u3057\u3001\u305d\u308c\u305e\u308c\u3001\n\n* x.x.164.0/24 : private-production-database-a\n* x.x.165.0/24 : private-production-database-c\n\n\u3068\u3044\u3046\u5177\u5408\u306b\u306a\u308b\u3002\n\n\n\n- - -\n\n## AWS VPC Subnet CIDR \u8a2d\u5b9a \u4f8b\n\n\u4e0b\u8a18\u306f `VPC 10.0.0.0/16` \u306b Subnet \u3092\u8a2d\u5b9a\u3059\u308b\u969b\u306e\u4f8b\u3002\n\n\u3053\u3061\u3089\u3082\u53c2\u8003\u7a0b\u5ea6\u306b\u3002\n\n| 2 \u9032\u6570    | \u5024    | CIDR              | Name                          | \u88dc\u8db3                                              |\n|-----------|-------|-------------------|-------------------------------|---------------------------------------------------|\n| 00000000  |     0 | 10.0.0.0/24       | public-a                      | ELB \u306a\u3069                                          |\n| 00000001  |     1 | 10.0.1.0/24       | public-c                      |                                                   |\n| 00001000  |     8 | 10.0.8.0/24       | public-compute-a              | \u8e0f\u307f\u53f0 EC2 \u306a\u3069                                   |\n| 00001001  |     9 | 10.0.9.0/24       | public-compute-c              |                                                   |\n| 00111000  |    56 | 10.0.56.0/24      | public-common-compute-a       |                                                   |\n| 00111001  |    57 | 10.0.57.0/24      | public-common-compute-c       |                                                   |\n| 00010100  |    20 | 10.0.20.0/24      | public-develop-database-a     | \u958b\u767a\u7528 DB \u306a\u3069 (local \u304b\u3089\u3082\u63a5\u7d9a\u3057\u305f\u3044\u5834\u5408)       |\n| 00010101  |    21 | 10.0.21.0/24      | public-develop-database-c     |                                                   |\n| 10000000  |   128 | 10.0.128.0/24     | private-a                     | NAT Gateway \u306a\u3069                                  |\n| 10000001  |   129 | 10.0.129.0/24     | private-c                     |                                                   |\n| 10001000  |   136 | 10.0.136.0/24     | private-compute-a             |                                                   |\n| 10001001  |   137 | 10.0.137.0/24     | private-compute-c             |                                                   |\n| 10011000  |   152 | 10.0.152.0/24     | private-develop-compute-a     | \u958b\u767a\u7528 EC2 \u306a\u3069                                   |\n| 10011001  |   153 | 10.0.153.0/24     | private-develop-compute-c     |                                                   |\n| 10100100  |   164 | 10.0.164.0/24     | private-production-database-a | \u672c\u756a\u7528 DB \u306a\u3069                                    |\n| 10100101  |   165 | 10.0.165.0/24     | private-production-database-c |                                                   |\n| 10101000  |   168 | 10.0.168.0/24     | private-production-compute-a  | \u672c\u756a\u7528 EC2 \u306a\u3069                                   |\n| 10101001  |   169 | 10.0.169.0/24     | private-production-compute-c  |                                                   |\n| 10110100  |   180 | 10.0.180.0/24     | private-common-database-a     | \u5171\u7528 DB \u306a\u3069 ( **NOTE.1** )                       |\n| 10110101  |   181 | 10.0.181.0/24     | private-common-database-c     |                                                   |\n\n* **NOTE.1** : \u672c\u756a\u3068\u958b\u767a\u3067\u5171\u7528\u3059\u308b\u3053\u3068\u3092\u660e\u793a\u3057\u305f\u3044\u5834\u5408\u300100100000 (=production) \u3068 00010000 (=develop) \u306e bit \u3092\u7acb\u3066\u3066 00011000 (=common) \u3068\u3057\u3066\u8a2d\u5b9a\u3059\u308b\u3001\u306a\u3069\u3002\uff08\u3053\u308c\u3082\u500b\u4eba\u7684\u306a\u30eb\u30fc\u30eb\uff09\n", "tags": ["vpc", "AWS"]}