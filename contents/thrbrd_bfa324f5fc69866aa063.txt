{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u8868\u984c\u306e\u4ef6\u306f\u3001\u7d14\u7c8b\u306b\u884c\u304a\u3046\u3068\u3059\u308b\u3068\u30cf\u30de\u3063\u3066\u3057\u307e\u3046 and StackOverflow\u3067\u3082\u89e3\u6c7a\u7b56\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u305f\u3081\u3001\n\u540c\u3058\u3088\u3046\u306b\u82e6\u3057\u3093\u3067\u3044\u308b\u65b9\u3005\u306e\u305f\u3081\u306b\u8aac\u660e\u3092\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\n\u554f\u984c\u306e\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18\n<input type=\"text\" datepicker-popup=\"yyyy\u5e74MM\u6708dd\u65e5\" is-open=\"isOpen\" ui-mask=\"9999\u5e7499\u670899\u65e5\" ng-model=\"targetDate\" ng-focus=\"isOpen = true\">\n\n\n\u554f\u984c\u70b9\n\u305d\u3082\u305d\u3082\u306e\u554f\u984c\u70b9\u3068\u3057\u3066\u306f\u3001datepicker-popup\u3082ui-mask\u3082ngModel\u3092\u76e3\u8996\u3057\u3066\u304a\u308a\u3001\nui-mask\u306fString\u3001datepicker-popup\u306fDate\u3092\u4fdd\u6301\u3059\u308b\u3082\u306e\u3067\u3059\u3002\ndatepicker-popup\u306f\u8868\u9762\u3068\u3057\u3066\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u304c\u3001\n\u5185\u90e8\u3067\u306fngModel\u306bDate\u306e\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\u305d\u308c\u306b\u5bfe\u3057\u3066ui-mask\u306fngModel\u306e\u5024\u3092Date\u306b\u3055\u308c\u308b\u3068\u6307\u5b9a\u3057\u305f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u5247\u3063\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u3053\u3093\u306a\u554f\u984c\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\u3067\u306f\u3069\u3046\u3059\u308b?\n\u5404\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u304c\u7ba1\u7406\u3059\u308b\u5bfe\u8c61\u3092\u5206\u96e2\u3057\u307e\u3057\u3087\u3046\u3002\n\u79c1\u306e\u5834\u5408\u306f\u3001\u4e0a\u8a18\u3092\u9054\u6210\u3059\u308b\u305f\u3081\u306e\u30ab\u30b9\u30bf\u30e0\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u6982\u8981\nui-mask\u304c\u6587\u5b57\u5217\u3092\u5236\u5fa1\u3059\u308binput\u3068\u3001datepicker-popup\u5358\u4f53\u306e\u69cb\u6210\u306b\u3057\u307e\u3059\u3002\n<input type=\"text\" ui-mask=\"9999\u5e7499\u670899\u65e5\" ng-model=\"maskedText\" ng-focus=\"isOpen = true\">\n<datepicker-popup=\"yyyy\u5e74MM\u6708dd\u65e5\" is-open=\"isOpen\" ng-model=\"targetDate\">\n\n\n\u5177\u4f53\u7684\u306a\u30b3\u30fc\u30c9\uff08ES6\u3067\u3059\u3001\u3059\u307f\u307e\u305b\u3093\u2026\uff09\n\njs\nclass DatepickerDirective {\n  controller = DatepickerController;\n  scope = {};\n  bindToController = {\n    targetDate: '=ngModel',\n    maskedText: '='\n  };\n  controllerAs: 'dpCtrl';\n  template = `\n    <input type=\"text\" ui-mask=\"9999\u5e7499\u670899\u65e5\" ng-model=\"dpCtrl.maskedText\" ng-focus=\"dpCtrl.isOpen = true\">\n    <datepicker-popup=\"yyyy\u5e74MM\u6708dd\u65e5\" is-open=\"dpCtrl.isOpen\" ng-model=\"dpCtrl.ngModel\">\n  `;\n}\n\nclass DatepickerController {\n  targetDate;\n  maskedText;\n  $scope;\n  $filter\n  dpCtrl = false;\n\n  constructor (\n    $scope,\n    $filter\n  ) {\n    this.$scope = $scope;\n    this.$filter = $filter;\n\n    this.bindEvents();\n  }\n\n  bindEvents () {\n    this.$scope.$watch(() => {\n      return this.maskedText;\n    }, (changedText) => {\n      this.setTargetDateByMaskedText(changedText);\n    });\n\n    this.$scope.$watch(() => {\n      return this.targetDate;\n    }, (changedDate) => {\n      this.setMaskedTextByTargetDate(changedDate);\n    });\n  }\n\n  setTargetDateByMaskedText (changedText) {\n    // ui-mask\u306f\u5e74\u6708\u65e5\u306a\u3069\u9664\u3044\u305f\u6570\u5b57\u3060\u3051\u3092\u7ba1\u7406\u3057\u3066\u3044\u307e\u3059\n    if (/^\\d{8}$/.test(changedText)) {\n      let matchedText = changedText.match(/^(\\d{4})(\\d{2})(\\d{2})$/);\n      let year = matchedText[1];\n      let month = matchedText[2];\n      let day = matchedText[3];\n\n      this.targetDate = new Date(`${year}/${month}/${day}`);\n    }\n  }\n\n  setMaskedTextByTargetDate (changedDate) {\n    if (changedDate) {\n      // ui-mask\u306f\u5e74\u6708\u65e5\u306a\u3069\u9664\u3044\u305f\u6570\u5b57\u3060\u3051\u3092\u7ba1\u7406\u3057\u3066\u3044\u307e\u3059\n      this.maskedText = this.$filter('date')(changedDate, 'yyyyMMdd');\n    }\n  }\n}\n\nangular.module('Test', [])\n  .directive('customDatepicker', () => new DatepickerController)\n;\n\n\nhtml\n<custom-datepicker ng-model=\"targetDate\">\n\n\n\u6700\u5f8c\u306b\n\u3059\u3054\u304f\u9069\u5f53\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u306e\u3067\u3001\u9593\u9055\u3063\u3066\u3044\u305f\u308a\u3057\u305f\u3089\u3059\u307f\u307e\u305b\u3093\u3002\n\u305f\u3060\u3001\u8003\u3048\u65b9\u3068\u3057\u3066\u306f\u3053\u308c\u3067\u3044\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u4ef6\u306f\u304b\u306a\u308a\u30cf\u30de\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u5fc5\u8981\u3067\u3042\u308c\u3070\u662f\u975e\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044!\n# \u306f\u3058\u3081\u306b\n\n\u8868\u984c\u306e\u4ef6\u306f\u3001\u7d14\u7c8b\u306b\u884c\u304a\u3046\u3068\u3059\u308b\u3068\u30cf\u30de\u3063\u3066\u3057\u307e\u3046 and StackOverflow\u3067\u3082\u89e3\u6c7a\u7b56\u3092\u898b\u3064\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u305f\u3081\u3001\n\u540c\u3058\u3088\u3046\u306b\u82e6\u3057\u3093\u3067\u3044\u308b\u65b9\u3005\u306e\u305f\u3081\u306b\u8aac\u660e\u3092\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3059\u3002\n\n\u554f\u984c\u306e\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18\n\n``` html\n<input type=\"text\" datepicker-popup=\"yyyy\u5e74MM\u6708dd\u65e5\" is-open=\"isOpen\" ui-mask=\"9999\u5e7499\u670899\u65e5\" ng-model=\"targetDate\" ng-focus=\"isOpen = true\">\n```\n\n# \u554f\u984c\u70b9\n\n\u305d\u3082\u305d\u3082\u306e\u554f\u984c\u70b9\u3068\u3057\u3066\u306f\u3001datepicker-popup\u3082ui-mask\u3082ngModel\u3092\u76e3\u8996\u3057\u3066\u304a\u308a\u3001\nui-mask\u306fString\u3001datepicker-popup\u306fDate\u3092\u4fdd\u6301\u3059\u308b\u3082\u306e\u3067\u3059\u3002\n\ndatepicker-popup\u306f\u8868\u9762\u3068\u3057\u3066\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3055\u308c\u305f\u6587\u5b57\u5217\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u304c\u3001\n\u5185\u90e8\u3067\u306fngModel\u306bDate\u306e\u5024\u3092\u30bb\u30c3\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u305d\u308c\u306b\u5bfe\u3057\u3066ui-mask\u306fngModel\u306e\u5024\u3092Date\u306b\u3055\u308c\u308b\u3068\u6307\u5b9a\u3057\u305f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306b\u5247\u3063\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u3053\u3093\u306a\u554f\u984c\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n# \u3067\u306f\u3069\u3046\u3059\u308b?\n\n\u5404\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u304c\u7ba1\u7406\u3059\u308b\u5bfe\u8c61\u3092\u5206\u96e2\u3057\u307e\u3057\u3087\u3046\u3002\n\u79c1\u306e\u5834\u5408\u306f\u3001\u4e0a\u8a18\u3092\u9054\u6210\u3059\u308b\u305f\u3081\u306e\u30ab\u30b9\u30bf\u30e0\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n## \u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u306e\u6982\u8981\n\nui-mask\u304c\u6587\u5b57\u5217\u3092\u5236\u5fa1\u3059\u308binput\u3068\u3001datepicker-popup\u5358\u4f53\u306e\u69cb\u6210\u306b\u3057\u307e\u3059\u3002\n\n``` html\n<input type=\"text\" ui-mask=\"9999\u5e7499\u670899\u65e5\" ng-model=\"maskedText\" ng-focus=\"isOpen = true\">\n<datepicker-popup=\"yyyy\u5e74MM\u6708dd\u65e5\" is-open=\"isOpen\" ng-model=\"targetDate\">\n```\n\n## \u5177\u4f53\u7684\u306a\u30b3\u30fc\u30c9\uff08ES6\u3067\u3059\u3001\u3059\u307f\u307e\u305b\u3093\u2026\uff09\n\n### js\n\n``` javascript\nclass DatepickerDirective {\n  controller = DatepickerController;\n  scope = {};\n  bindToController = {\n    targetDate: '=ngModel',\n    maskedText: '='\n  };\n  controllerAs: 'dpCtrl';\n  template = `\n    <input type=\"text\" ui-mask=\"9999\u5e7499\u670899\u65e5\" ng-model=\"dpCtrl.maskedText\" ng-focus=\"dpCtrl.isOpen = true\">\n    <datepicker-popup=\"yyyy\u5e74MM\u6708dd\u65e5\" is-open=\"dpCtrl.isOpen\" ng-model=\"dpCtrl.ngModel\">\n  `;\n}\n\nclass DatepickerController {\n  targetDate;\n  maskedText;\n  $scope;\n  $filter\n  dpCtrl = false;\n\n  constructor (\n    $scope,\n    $filter\n  ) {\n    this.$scope = $scope;\n    this.$filter = $filter;\n\n    this.bindEvents();\n  }\n\n  bindEvents () {\n    this.$scope.$watch(() => {\n      return this.maskedText;\n    }, (changedText) => {\n      this.setTargetDateByMaskedText(changedText);\n    });\n\n    this.$scope.$watch(() => {\n      return this.targetDate;\n    }, (changedDate) => {\n      this.setMaskedTextByTargetDate(changedDate);\n    });\n  }\n\n  setTargetDateByMaskedText (changedText) {\n    // ui-mask\u306f\u5e74\u6708\u65e5\u306a\u3069\u9664\u3044\u305f\u6570\u5b57\u3060\u3051\u3092\u7ba1\u7406\u3057\u3066\u3044\u307e\u3059\n    if (/^\\d{8}$/.test(changedText)) {\n      let matchedText = changedText.match(/^(\\d{4})(\\d{2})(\\d{2})$/);\n      let year = matchedText[1];\n      let month = matchedText[2];\n      let day = matchedText[3];\n\n      this.targetDate = new Date(`${year}/${month}/${day}`);\n    }\n  }\n\n  setMaskedTextByTargetDate (changedDate) {\n    if (changedDate) {\n      // ui-mask\u306f\u5e74\u6708\u65e5\u306a\u3069\u9664\u3044\u305f\u6570\u5b57\u3060\u3051\u3092\u7ba1\u7406\u3057\u3066\u3044\u307e\u3059\n      this.maskedText = this.$filter('date')(changedDate, 'yyyyMMdd');\n    }\n  }\n}\n\nangular.module('Test', [])\n  .directive('customDatepicker', () => new DatepickerController)\n;\n```\n\n### html\n\n``` html\n<custom-datepicker ng-model=\"targetDate\">\n```\n\n# \u6700\u5f8c\u306b\n\n\u3059\u3054\u304f\u9069\u5f53\u306b\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\u306e\u3067\u3001\u9593\u9055\u3063\u3066\u3044\u305f\u308a\u3057\u305f\u3089\u3059\u307f\u307e\u305b\u3093\u3002\n\u305f\u3060\u3001\u8003\u3048\u65b9\u3068\u3057\u3066\u306f\u3053\u308c\u3067\u3044\u3051\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u4ef6\u306f\u304b\u306a\u308a\u30cf\u30de\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u5fc5\u8981\u3067\u3042\u308c\u3070\u662f\u975e\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044!\n", "tags": ["AngularJS", "ui-bootstrap", "DatePicker", "es6", "JavaScript"]}