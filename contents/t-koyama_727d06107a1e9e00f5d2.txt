{"context": "\u524d\u56de\u306f Riot.js \u3092\u4f7f\u3063\u3066 Hello World \u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f Web API \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3068\u3053\u308d\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\nASP.NET Core \u3067 Riot.js \u305d\u306e\uff11\nASP.NET Core \u3067 Riot.js \u305d\u306e\uff12\n\n\n\u958b\u767a\u74b0\u5883\nWindows 10 Pro\nVisual Studio Code\n\nServer-side\nServer-side \u306b Web API \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u4eca\u56de\u4f5c\u6210\u3059\u308b HTTP \u30e1\u30bd\u30c3\u30c9\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\nAPI\n\u6982\u8981\nRequest body\nResponse body\n\n\n\n\nGET /api/v1/person\nPerson \u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3002\n\u306a\u3057\nPerson\u306e\u4e00\u89a7\n\n\nGET /api/v1/person/{id}\nid \u306b\u7d10\u4ed8\u304f Person \u3092\u53d6\u5f97\u3059\u308b\u3002\n\u306a\u3057\nPerson\n\n\nPOST /api/v1/person\nPerson \u3092\u4f5c\u6210\u3059\u308b\u3002\nPerson\nPerson\n\n\nPUT /api/v1/person/{id}\nid \u306b\u7d10\u4ed8\u304f Person \u3092\u66f4\u65b0\u3059\u308b\u3002\nPerson\n\u306a\u3057\n\n\nDELETE /api/v1/person/{id}\nid \u306b\u7d10\u4ed8\u304f Person \u3092\u524a\u9664\u3059\u308b\u3002\n\u306a\u3057\n\u306a\u3057\n\n\n\n\u4eca\u56de\u306f\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u4e00\u756a\u4e0a\u306e GET \u30e1\u30bd\u30c3\u30c9\u3060\u3051\u3042\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u304c\u3001 CRUD \u64cd\u4f5c\u306b\u5fc5\u8981\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u4e00\u901a\u308a\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u307e\u305a\u306f HTTP\u30e1\u30bd\u30c3\u30c9\u3067\u3084\u308a\u53d6\u308a\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a Model \u3068\u306a\u308b\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nModel\nModel \u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u4eca\u56de\u306f Building Your First Web API with ASP.NET Core MVC and Visual Studio \u3092\u53c2\u8003\u306b Repository  \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u3063\u3066\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067\u306f\u4ee5\u4e0b\u306e\u3053\u3068\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\nModel \u30af\u30e9\u30b9\u306e\u4f5c\u6210\nRepository \u30af\u30e9\u30b9\u306e\u4f5c\u6210\n\u4f5c\u6210\u3057\u305fRepository \u30af\u30e9\u30b9\u306e\u767b\u9332 (DI)\n\n\u307e\u305a\u306f Models \u30d5\u30a9\u30eb\u30c0\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002Visual Studio Code \u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nmkdir Models & cd Models\nyo aspnet:Class Person\nyo aspnet:Interface IPersonRepository\nyo aspnet:Class PersonRepository\ncd ..\n\n\nModel \u30af\u30e9\u30b9\u306e\u4f5c\u6210\nModels \u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u305f Person.cs \u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nPerson.cs\nnamespace AspRiotApp.Models\n{\n    public class Person\n    {\n        public string Id { get; set; }\n        public string Name { get; set; }\n        public int Age { get; set; }\n    }\n}\n\n\n\nRepository \u30af\u30e9\u30b9\u306e\u4f5c\u6210\nRepository \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f IPersonRepository \u306b Repository \u30af\u30e9\u30b9\u3067\u5b9f\u88c5\u3059\u308b\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002Models \u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u305f IPersonRepository.cs \u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nIPersonRepository.cs\nusing System.Collections.Generic;\n\nnamespace AspRiotApp.Models\n{\n    public interface IPersonRepository\n    {\n        void Add(Person person);\n        IEnumerable<Person> GetAll();\n        Person Find(string id);\n        void Remove(string id);\n        void Update(Person person);\n    }\n}\n\n\n\u7d9a\u3044\u3066\u4f5c\u6210\u3057\u305f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ed\u30b8\u30c3\u30af\u3092 PersonRepository \u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002 Models \u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u305f PersonRepository.cs \u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nPersonRepository.cs\nusing System;\nusing System.Collections.Generic;\nusing System.Collections.Concurrent;\n\nnamespace AspRiotApp.Models\n{\n    public class PersonRepository : IPersonRepository\n    {\n         private static ConcurrentDictionary<string, Person> _people = \n              new ConcurrentDictionary<string, Person>();\n\n        public PersonRepository()\n        {\n            Add(new Person { Name = \"Eiji\", Age = 35 });\n            Add(new Person { Name = \"Akemi\", Age = 35 });\n            Add(new Person { Name = \"Satoru\", Age = 7 });\n            Add(new Person { Name = \"Madoka\", Age = 7 });\n        }\n\n        public IEnumerable<Person> GetAll() => _people.Values;\n\n        public void Add(Person person)\n        {\n            person.Id = Guid.NewGuid().ToString();\n            _people[person.Id] = person;\n        }\n\n        public Person Find(string id)\n        {\n            var person = default(Person);\n            _people.TryGetValue(id, out person);\n            return person;\n        }\n\n        public void Remove(string id)\n        {\n            var person = default(Person);\n            _people.TryRemove(id, out person);\n        }\n\n        public void Update(Person person) => _people[person.Id] = person;\n    }\n}\n\n\n\u5b9f\u969b\u306f Database \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u308a\u306a\u3069\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30e2\u30c3\u30af\u3068\u3057\u3066 private \u306a \u9759\u7684\u30e1\u30f3\u30d0\u3068\u3057\u3066 _people \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u7528\u610f\u3057\u3066\u3001\u9069\u5f53\u306a\u30c7\u30fc\u30bf\u3092\u7a81\u3063\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\nprivate static ConcurrentDictionary<string, Person> _people = new ConcurrentDictionary<string, Person>();\n\nSystem.Collections.Concurrent.ConcurrentDictionary \u306f\u5024\u306e\u30da\u30a2\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u3059\u3002\u5024\u306e\u30da\u30a2\u304b\u3089\u306a\u308b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3068\u3044\u3046\u3053\u3068\u3067 System.Collections.Generic.Dictionary \u3068\u4f3c\u3066\u3044\u307e\u3059\u304c ConcurrentDictionary \u306f\u540c\u6642\u306b\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u30b9\u30ec\u30c3\u30c9 \u30bb\u30fc\u30d5\uff09\u3068\u3044\u3046\u7279\u5fb4\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u4f5c\u6210\u3057\u305fRepository \u30af\u30e9\u30b9\u306e\u767b\u9332\n\u4f5c\u6210\u3057\u305fRepository \u30af\u30e9\u30b9\u3092\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002ASP.NET Core \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u65b0\u3057\u304f\u30b5\u30fc\u30d3\u30b9\u3092\u767b\u9332\u3059\u308b\u5834\u5408\u306f Startup.cs \u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b ConfigureServices() \u30e1\u30bd\u30c3\u30c9\u306b\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3059\u3002 \n\nStartup.cs\npublic void ConfigureServices(IServiceCollection services)\n{\n    // Add framework services.\n    services.AddMvc();\n    // \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u767b\u9332\n    services.AddSingleton<IPersonRepository, PersonRepository>();\n}\n\n\nAddSingleton() \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3093\u3067\u4f5c\u6210\u3057\u305f Repository \u30af\u30e9\u30b9\u3092\u3072\u3068\u3064\u3060\u3051\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3059\u308b\u3088\u3046 DI \u30b3\u30f3\u30c6\u30ca\u306b\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u767b\u9332\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u306f Controller \u306a\u3069\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u53d7\u53d6\u308b\u3053\u3068\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u3053\u308c\u3067 Model \u306e\u4f5c\u6210\u306f\u5b8c\u4e86\u3067\u3059\u3002\u3064\u304e\u306f Controller \u3092\u4f5c\u6210\u3057\u3066Web API \u3068\u3057\u3066\u4eca\u56de\u63d0\u4f9b\u3059\u308b HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nController\n\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066 Controllers \u30d5\u30a9\u30eb\u30c0\u306b PersonController.cs \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\ncd Controllers\nyo aspnet:WebApiController PersonController\ncd ..\n\n\u4f5c\u6210\u3057\u305f\u3089\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nPersonController.cs\nusing System.Collections.Generic;\nusing Microsoft.AspNetCore.Mvc;\nusing AspRiotApp.Models;\n\nnamespace AspRiotApp.Controllers\n{\n    [Route(\"api/v1/[controller]\")]\n    public class PersonController : Controller\n    {\n        private IPersonRepository People { get; set; }\n\n        public PersonController(IPersonRepository people)\n        {\n            People = people;\n        }\n\n        // GET api/v1/person\n        [HttpGet]\n        public IEnumerable<Person> Get() => People.GetAll();\n\n        // GET api/v1/person/{id}\n        [HttpGet(\"{id}\", Name=\"GetPerson\")]\n        public IActionResult Get(string id)\n        {\n            var person = People.Find(id);\n\n            if(person == null)\n                return NotFound();\n\n            return new ObjectResult(person);\n        }\n\n        // POST api/v1/person/\n        [HttpPost]\n        public IActionResult Post([FromBody]Person person)\n        {\n            if (person == null)\n                return BadRequest();\n\n            People.Add(person);\n\n            return new CreatedResult(\"GetPerson\", person);\n        }\n\n        // PUT api/v1/person/{id}\n        [HttpPut(\"{id}\")]\n        public IActionResult Put(string id, [FromBody]Person person)\n        {\n            if (person == null || person.Id != id)\n                return BadRequest();\n\n            if (People.Find(id) == null)\n                return NotFound();\n\n            People.Update(person);\n\n            return new NoContentResult();\n        }\n\n        // DELETE api/v1/person/{id}\n        [HttpDelete(\"{id}\")]\n        public void Delete(string id) => People.Remove(id);\n    }\n}\n\n\n\nInjection\n\u30b3\u30f3\u30c8\u30e9\u30af\u30bf\u3067\u5148\u307b\u3069\u767b\u9332\u3057\u305f Repository \u30b5\u30fc\u30d3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u53d7\u53d6\u308a\u307e\u3059\u3002\nprivate IPersonRepository People { get; set; }\n\npublic PersonController(IPersonRepository people)\n{\n    People = people;\n}\n\n\nAttribute\n\u30af\u30e9\u30b9\u306b Attribute \u3092\u4ed8\u52a0\u3057\u3066\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u307e\u3059\u3002(api/v1/person)\n[Route(\"api/v1/[controller]\")]\npublic class PersonController : Controller\n{\n    ...\n}\n\nGET/POST/PUT/DELETE \u306a\u3069 Web API \u3068\u3057\u3066\u4eca\u56de\u63d0\u4f9b\u3059\u308b HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u304d\u306f\u5bfe\u5fdc\u3059\u308b Attribute \u3092\u30e1\u30bd\u30c3\u30c9\u306b\u4ed8\u52a0\u3057\u307e\u3059\u3002\n// GET api/v1/person\n[HttpGet]\npublic IEnumerable<Person> Get() => People.GetAll();\n\n\u4ed8\u52a0\u3067\u304d\u308b Attribute \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\n\nHttpDelete\nHttpGet\nHttpHead\nHttpOptions\nHttpPatch\nHttpPost\nHttpPut\n\nURL\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f Attribute \u306e\u5f15\u6570\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n// DELETE api/v1/person/{id}\n[HttpDelete(\"{id}\")]\npublic void Delete(string id) => People.Remove(id);\n\n\u30a2\u30af\u30b7\u30e7\u30f3\u540d\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f Attribute \u306e Name \u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n// GET api/v1/person/{id}\n[HttpGet(\"{id}\", Name=\"GetPerson\")]\npublic IActionResult Get(string id)\n{\n    ...\n}\n\n\n\u623b\u308a\u5024\n\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u306b\u306f IEnumerable<Person> \u306a\u3069\u4efb\u610f\u306e\u578b\u3092\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306f 200 (OK) \u3068\u306a\u308a\u307e\u3059\u3002 \n[HttpGet]\npublic IEnumerable<Person> Get() => People.GetAll();\n\n\u307e\u305f\u3001 \u623b\u308a\u5024\u304c\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u3082\u6271\u3048\u307e\u3059\u3002 \u3053\u306e\u5834\u5408\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306f  204 (No Content) \u3068\u306a\u308a\u307e\u3059\u3002\n[HttpDelete(\"{id}\")]\npublic void Delete(string id) => People.Remove(id);\n\nIActionResult \u306f\u51e6\u7406\u7d50\u679c\u306b\u5fdc\u3058\u3066\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306b\u4f7f\u3044\u307e\u3059\u3002\u4f8b\u3068\u3057\u3066 Put() \u30e1\u30bd\u30c3\u30c9\u3067\u306f\u6761\u4ef6\u306b\u3088\u3063\u3066 BadRequest() \u3084 NotFound() \u306a\u3069\u305d\u308c\u305e\u308c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306b\u5bfe\u5fdc\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\n [HttpPut(\"{id}\")]\n public IActionResult Put(string id, [FromBody]Person person)\n {\n     if (person == null || person.Id != id)\n         return BadRequest();\n\n     if (People.Find(id) == null)\n         return NotFound();\n\n     People.Update(person);\n\n     return new NoContentResult();\n }\n\nPut() \u30e1\u30bd\u30c3\u30c9\u306e\u6761\u4ef6\u3068\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\n\u6761\u4ef6\n\n\n\n\n400 (Bad Request)\n\u5f15\u6570\u3067\u4e0e\u3048\u3089\u308c\u3066\u308b\u5024\u306b\u4e0d\u6b63\u304c\u3042\u308b\u5834\u5408\n\n\n404 (Not Found)\n\u5f15\u6570\u306e id \u304b\u3089\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u3066\u4e00\u81f4\u3059\u308b\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408\n\n\n204 (No Content)\n\u66f4\u65b0\u306b\u6210\u529f\u3057\u305f\u5834\u5408\n\n\n\n\n\u6700\u5f8c\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b ValuesController.cs \u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u524a\u9664\u3059\u308c\u3070 Server-side \u306e\u5b9f\u88c5\u306f\u7d42\u308f\u308a\u3067\u3059\u3002\u7d9a\u3044\u3066 Client-side \u306e\u5b9f\u88c5\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\nClient-side\nClient-side \u3067\u306f index.html \u3068 app.tag \u306e\u4fee\u6b63\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\nhtml\nindex.html \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\nindex.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>ASP.NET Core \u3067 Riot.js</title>\n    <!-- jQuery -->\n    <script src=\"https://code.jquery.com/jquery-3.0.0.min.js\"></script>\n    <!-- app.tag \u306e\u8aad\u8fbc\u307f -->\n    <script src=\"app.tag\" type=\"riot/tag\"></script>\n    <!-- riot+compiler.min.js \u306e\u8aad\u8fbc\u307f -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/riot/2.5.0/riot+compiler.min.js\"></script>\n</head>\n\n<body>\n    <!-- app \u30bf\u30b0 -->\n    <app></app>\n\n    <!-- \u4f5c\u6210\u3057\u305f\u30bf\u30b0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b -->\n    <script>\n        riot.mount('*');\n    </script>\n</body>\n\n</html>\n\n\nWeb API \u3068\u306e\u3084\u308a\u53d6\u308a\u3092 jQuery \u3092\u4f7f\u3063\u3066 Ajax \u901a\u4fe1\u3067\u304a\u3053\u306a\u3044\u305f\u3044\u306e\u3067 jQuery \u3092\u8aad\u8fbc\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n<script src=\"https://code.jquery.com/jquery-3.0.0.min.js\"></script>\n\n\u3042\u3068\u524d\u56de app \u30bf\u30b0\u306e title \u5c5e\u6027\u306b\u5024\u3092\u5165\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u4eca\u56de\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u53d6\u308a\u307e\u3057\u305f\u3002\n<app></app>\n\n\nTag\napp.tag \u306b Ajax \u901a\u4fe1\u3067 GET \u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u7d50\u679c\u3092\u4e00\u89a7\u3067\u8868\u793a\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\napp.tag\n<app>\n    <h1>People</h1>\n    <ul>\n        <li each=\"{ person in people }\" title=\"{ person.name }\">\n            <a href=\"#item/{person.id}\">{ person.name } ({ person.age })</a>\n        </li>\n    </ul>\n\n    <style scoped>\n        :scope { display: block }\n        ul {\n            list-style: none;\n            padding: 0;\n            margin: 0;\n        }\n        li {\n            margin: 0.8em 0;\n        }\n        a {\n            background: #eee;\n            border-radius:0.3em;\n            color: inherit;\n            display: block;\n            padding: 1.2em;\n            text-decoration: none;\n        }\n        a:hover {\n            background: #7ACBE2\n        }\n    </style>\n\n    // \u4e00\u89a7\n    this.people = [];\n\n    var self = this;\n\n    // GET\n    $.ajax({\n        url  : '/api/v1/person',\n        type : 'GET'\n    })\n    .then(\n        function (result) {\n            // \u53d6\u5f97\u7d50\u679c\u3092\u4e00\u89a7\u306b\u8a2d\u5b9a\n            self.people = result;\n            // \u66f4\u65b0\n            self.update();\n        },\n        function () {\n            console.log('\u5931\u6557');\n        }\n    );\n</app>\n\n\n\nAjax\n$.ajax() \u3067 GET \u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066 people \u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u7d50\u679c\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n// GET\n$.ajax({\n    url  : '/api/v1/person',\n    type : 'GET'\n})\n.then(\n    function (result) {\n        // \u53d6\u5f97\u7d50\u679c\u3092\u4e00\u89a7\u306b\u8a2d\u5b9a\n        self.people = result;\n        // \u66f4\u65b0\n        self.update();\n    },\n    function () {\n        console.log('\u5931\u6557');\n    }\n);\n\n\u4eca\u56de\u306f $.ajax() \u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306b url \u3068 type \u3060\u3051\u6307\u5b9a\u3057\u3066\u307e\u3059\u304c\u3001\u672c\u756a\u3067\u306f timeout \u3092\u6307\u5b9a\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u305f\u3001Web API \u306e\u5185\u5bb9\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u306a\u3069\u518d\u5ea6 GET\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u3068\u304d\u306b IE \u306a\u3069\u3067\u53d6\u5f97\u7d50\u679c\u304c\u3046\u307e\u304f\u53cd\u6620\u3055\u308c\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u306e\u3068\u304d\u306f cache : false \u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\neach\nul \u30bf\u30b0\u5185\u3067\u306f\u53d6\u5f97\u3057\u305f\u7d50\u679c\u3092\u4e00\u89a7\u3067\u8868\u793a\u3059\u308b\u305f\u3081\u306b each=\"{ person in people }\" \u3067 people \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u30eb\u30fc\u30d7\u3057\u3066\u8981\u7d20\u3092 person \u3068\u3057\u3066\u53d6\u308a\u51fa\u3057\u3066\u5185\u5bb9\u3092 li \u30bf\u30b0\u306b\u30d0\u30a4\u30f3\u30c9\u3057\u3066\u3044\u307e\u3059\u3002\n<li each=\"{ person in people }\" title=\"{ person.name }\">\n    <a href=\"#item/{person.id}\">{ person.name } ({ person.age })</a>\n</li>\n\n\n\u3053\u308c\u3067 Client-side \u306e\u5b9f\u88c5\u306f\u7d42\u308f\u308a\u3067\u3059\u3002dotnet run \u3057\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089 localhost \u306b\u63a5\u7d9a\u3059\u308b\u3068\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u6b21\u56de\n\u6b21\u56de\u306f Server-side \u306b\u5b9f\u88c5\u3057\u305f HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u5229\u7528\u3057\u3066\u3001Client-side \u3067\u30c7\u30fc\u30bf\u306e\u8ffd\u52a0\u3084\u5909\u66f4\u306a\u3069\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u524d\u56de\u306f Riot.js \u3092\u4f7f\u3063\u3066 Hello World \u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f Web API \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3068\u3053\u308d\u3092\u3084\u3063\u3066\u307f\u307e\u3059\u3002\n\n* [ASP.NET Core \u3067 Riot.js \u305d\u306e\uff11](http://qiita.com/t-koyama/items/a2b1b6bfbf401a8dd868)\n* ASP.NET Core \u3067 Riot.js \u305d\u306e\uff12\n\n# \u958b\u767a\u74b0\u5883\nWindows 10 Pro\nVisual Studio Code\n\n# Server-side\nServer-side \u306b Web API \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u4f5c\u6210\u3059\u308b HTTP \u30e1\u30bd\u30c3\u30c9\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n| API                                          | \u6982\u8981                                              | Request body | Response body |\n| :------------------------------ | :----------------------------------| :-------------- | :--------------- |\n| GET /api/v1/person               | Person \u306e\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3002         | \u306a\u3057                 | Person\u306e\u4e00\u89a7  | \n| GET /api/v1/person/{id}        | id \u306b\u7d10\u4ed8\u304f Person \u3092\u53d6\u5f97\u3059\u308b\u3002| \u306a\u3057                | Person              | \n| POST /api/v1/person             | Person \u3092\u4f5c\u6210\u3059\u308b\u3002                   | Person            | Person              |\n| PUT /api/v1/person/{id}        | id \u306b\u7d10\u4ed8\u304f Person \u3092\u66f4\u65b0\u3059\u308b\u3002| Person            | \u306a\u3057                  | \n| DELETE /api/v1/person/{id} | id \u306b\u7d10\u4ed8\u304f Person \u3092\u524a\u9664\u3059\u308b\u3002 | \u306a\u3057                | \u306a\u3057                  | \n\n\u4eca\u56de\u306f\u4e00\u89a7\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u4e00\u756a\u4e0a\u306e GET \u30e1\u30bd\u30c3\u30c9\u3060\u3051\u3042\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u304c\u3001 CRUD \u64cd\u4f5c\u306b\u5fc5\u8981\u306a\u30e1\u30bd\u30c3\u30c9\u3092\u4e00\u901a\u308a\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u307e\u305a\u306f HTTP\u30e1\u30bd\u30c3\u30c9\u3067\u3084\u308a\u53d6\u308a\u3059\u308b\u305f\u3081\u306b\u5fc5\u8981\u306a Model \u3068\u306a\u308b\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n## Model\nModel \u3092\u4f5c\u6210\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u4eca\u56de\u306f [Building Your First Web API with ASP.NET Core MVC and Visual Studio](https://docs.asp.net/en/latest/tutorials/first-web-api.html) \u3092\u53c2\u8003\u306b Repository  \u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u3063\u3066\u3084\u3063\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u4ee5\u4e0b\u306e\u3053\u3068\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\n* Model \u30af\u30e9\u30b9\u306e\u4f5c\u6210\n* Repository \u30af\u30e9\u30b9\u306e\u4f5c\u6210\n* \u4f5c\u6210\u3057\u305fRepository \u30af\u30e9\u30b9\u306e\u767b\u9332 (DI)\n\n\u307e\u305a\u306f Models \u30d5\u30a9\u30eb\u30c0\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002Visual Studio Code \u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\nmkdir Models & cd Models\nyo aspnet:Class Person\nyo aspnet:Interface IPersonRepository\nyo aspnet:Class PersonRepository\ncd ..\n```\n\n### Model \u30af\u30e9\u30b9\u306e\u4f5c\u6210\nModels \u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u305f Person.cs \u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```csharp:Person.cs\nnamespace AspRiotApp.Models\n{\n    public class Person\n    {\n        public string Id { get; set; }\n        public string Name { get; set; }\n        public int Age { get; set; }\n    }\n}\n```\n\n### Repository \u30af\u30e9\u30b9\u306e\u4f5c\u6210\nRepository \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u307e\u305a\u306f `IPersonRepository` \u306b Repository \u30af\u30e9\u30b9\u3067\u5b9f\u88c5\u3059\u308b\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ed\u30b8\u30c3\u30af\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002Models \u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u305f IPersonRepository.cs \u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```csharp:IPersonRepository.cs\nusing System.Collections.Generic;\n\nnamespace AspRiotApp.Models\n{\n    public interface IPersonRepository\n    {\n        void Add(Person person);\n        IEnumerable<Person> GetAll();\n        Person Find(string id);\n        void Remove(string id);\n        void Update(Person person);\n    }\n}\n```\n\n\u7d9a\u3044\u3066\u4f5c\u6210\u3057\u305f\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u30ed\u30b8\u30c3\u30af\u3092 `PersonRepository` \u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002 Models \u30d5\u30a9\u30eb\u30c0\u306b\u4f5c\u6210\u3057\u305f PersonRepository.cs \u306e\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```csharp:PersonRepository.cs\nusing System;\nusing System.Collections.Generic;\nusing System.Collections.Concurrent;\n\nnamespace AspRiotApp.Models\n{\n    public class PersonRepository : IPersonRepository\n    {\n         private static ConcurrentDictionary<string, Person> _people = \n              new ConcurrentDictionary<string, Person>();\n\n        public PersonRepository()\n        {\n            Add(new Person { Name = \"Eiji\", Age = 35 });\n            Add(new Person { Name = \"Akemi\", Age = 35 });\n            Add(new Person { Name = \"Satoru\", Age = 7 });\n            Add(new Person { Name = \"Madoka\", Age = 7 });\n        }\n\n        public IEnumerable<Person> GetAll() => _people.Values;\n\n        public void Add(Person person)\n        {\n            person.Id = Guid.NewGuid().ToString();\n            _people[person.Id] = person;\n        }\n\n        public Person Find(string id)\n        {\n            var person = default(Person);\n            _people.TryGetValue(id, out person);\n            return person;\n        }\n\n        public void Remove(string id)\n        {\n            var person = default(Person);\n            _people.TryRemove(id, out person);\n        }\n\n        public void Update(Person person) => _people[person.Id] = person;\n    }\n}\n```\n\n \u5b9f\u969b\u306f Database \u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u305f\u308a\u306a\u3069\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u30e2\u30c3\u30af\u3068\u3057\u3066 private \u306a \u9759\u7684\u30e1\u30f3\u30d0\u3068\u3057\u3066 `_people` \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u7528\u610f\u3057\u3066\u3001\u9069\u5f53\u306a\u30c7\u30fc\u30bf\u3092\u7a81\u3063\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\n \n```csharp\nprivate static ConcurrentDictionary<string, Person> _people = new ConcurrentDictionary<string, Person>();\n```\n \nSystem.Collections.Concurrent.ConcurrentDictionary \u306f\u5024\u306e\u30da\u30a2\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u3059\u3002\u5024\u306e\u30da\u30a2\u304b\u3089\u306a\u308b\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3068\u3044\u3046\u3053\u3068\u3067 System.Collections.Generic.Dictionary \u3068\u4f3c\u3066\u3044\u307e\u3059\u304c ConcurrentDictionary \u306f\u540c\u6642\u306b\u8907\u6570\u306e\u30b9\u30ec\u30c3\u30c9\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\uff08\u30b9\u30ec\u30c3\u30c9 \u30bb\u30fc\u30d5\uff09\u3068\u3044\u3046\u7279\u5fb4\u3092\u6301\u3063\u3066\u3044\u307e\u3059\u3002\n \n### \u4f5c\u6210\u3057\u305fRepository \u30af\u30e9\u30b9\u306e\u767b\u9332\n\u4f5c\u6210\u3057\u305fRepository \u30af\u30e9\u30b9\u3092\u30b5\u30fc\u30d3\u30b9\u3068\u3057\u3066\u767b\u9332\u3057\u307e\u3059\u3002ASP.NET Core \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u65b0\u3057\u304f\u30b5\u30fc\u30d3\u30b9\u3092\u767b\u9332\u3059\u308b\u5834\u5408\u306f Startup.cs \u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b `ConfigureServices()` \u30e1\u30bd\u30c3\u30c9\u306b\u51e6\u7406\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3059\u3002 \n\n```csharp:Startup.cs\npublic void ConfigureServices(IServiceCollection services)\n{\n    // Add framework services.\n    services.AddMvc();\n    // \u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u767b\u9332\n    services.AddSingleton<IPersonRepository, PersonRepository>();\n}\n```\n\n`AddSingleton()` \u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3093\u3067\u4f5c\u6210\u3057\u305f Repository \u30af\u30e9\u30b9\u3092\u3072\u3068\u3064\u3060\u3051\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5316\u3059\u308b\u3088\u3046 DI \u30b3\u30f3\u30c6\u30ca\u306b\u8ffd\u52a0\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3053\u3067\u767b\u9332\u3057\u305f\u30b5\u30fc\u30d3\u30b9\u306f Controller \u306a\u3069\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u53d7\u53d6\u308b\u3053\u3068\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u308c\u3067 Model \u306e\u4f5c\u6210\u306f\u5b8c\u4e86\u3067\u3059\u3002\u3064\u304e\u306f Controller \u3092\u4f5c\u6210\u3057\u3066Web API \u3068\u3057\u3066\u4eca\u56de\u63d0\u4f9b\u3059\u308b HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n## Controller\n\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066 Controllers \u30d5\u30a9\u30eb\u30c0\u306b PersonController.cs \u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\ncd Controllers\nyo aspnet:WebApiController PersonController\ncd ..\n```\n\n\u4f5c\u6210\u3057\u305f\u3089\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```csharp:PersonController.cs\nusing System.Collections.Generic;\nusing Microsoft.AspNetCore.Mvc;\nusing AspRiotApp.Models;\n\nnamespace AspRiotApp.Controllers\n{\n    [Route(\"api/v1/[controller]\")]\n    public class PersonController : Controller\n    {\n        private IPersonRepository People { get; set; }\n\n        public PersonController(IPersonRepository people)\n        {\n            People = people;\n        }\n\n        // GET api/v1/person\n        [HttpGet]\n        public IEnumerable<Person> Get() => People.GetAll();\n\n        // GET api/v1/person/{id}\n        [HttpGet(\"{id}\", Name=\"GetPerson\")]\n        public IActionResult Get(string id)\n        {\n            var person = People.Find(id);\n\n            if(person == null)\n                return NotFound();\n\n            return new ObjectResult(person);\n        }\n\n        // POST api/v1/person/\n        [HttpPost]\n        public IActionResult Post([FromBody]Person person)\n        {\n            if (person == null)\n                return BadRequest();\n\n            People.Add(person);\n\n            return new CreatedResult(\"GetPerson\", person);\n        }\n\n        // PUT api/v1/person/{id}\n        [HttpPut(\"{id}\")]\n        public IActionResult Put(string id, [FromBody]Person person)\n        {\n            if (person == null || person.Id != id)\n                return BadRequest();\n\n            if (People.Find(id) == null)\n                return NotFound();\n\n            People.Update(person);\n\n            return new NoContentResult();\n        }\n\n        // DELETE api/v1/person/{id}\n        [HttpDelete(\"{id}\")]\n        public void Delete(string id) => People.Remove(id);\n    }\n}\n```\n\n### Injection\n\n\u30b3\u30f3\u30c8\u30e9\u30af\u30bf\u3067\u5148\u307b\u3069\u767b\u9332\u3057\u305f Repository \u30b5\u30fc\u30d3\u30b9\u3092\u30a4\u30f3\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3057\u3066\u53d7\u53d6\u308a\u307e\u3059\u3002\n\n```csharp\nprivate IPersonRepository People { get; set; }\n\npublic PersonController(IPersonRepository people)\n{\n    People = people;\n}\n```\n\n### Attribute\n\n\u30af\u30e9\u30b9\u306b Attribute \u3092\u4ed8\u52a0\u3057\u3066\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3057\u307e\u3059\u3002(api/v1/person)\n\n```csharp\n[Route(\"api/v1/[controller]\")]\npublic class PersonController : Controller\n{\n    ...\n}\n```\n\nGET/POST/PUT/DELETE \u306a\u3069 Web API \u3068\u3057\u3066\u4eca\u56de\u63d0\u4f9b\u3059\u308b HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\u3068\u304d\u306f\u5bfe\u5fdc\u3059\u308b Attribute \u3092\u30e1\u30bd\u30c3\u30c9\u306b\u4ed8\u52a0\u3057\u307e\u3059\u3002\n\n```csharp\n// GET api/v1/person\n[HttpGet]\npublic IEnumerable<Person> Get() => People.GetAll();\n```\n\n\u4ed8\u52a0\u3067\u304d\u308b Attribute \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\n\n* HttpDelete\n* HttpGet\n* HttpHead\n* HttpOptions\n* HttpPatch\n* HttpPost\n* HttpPut\n\nURL\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f Attribute \u306e\u5f15\u6570\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```csharp\n// DELETE api/v1/person/{id}\n[HttpDelete(\"{id}\")]\npublic void Delete(string id) => People.Remove(id);\n```\n\n\u30a2\u30af\u30b7\u30e7\u30f3\u540d\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u306f Attribute \u306e `Name` \u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```csharp\n// GET api/v1/person/{id}\n[HttpGet(\"{id}\", Name=\"GetPerson\")]\npublic IActionResult Get(string id)\n{\n    ...\n}\n```\n\n### \u623b\u308a\u5024\n\n\u30e1\u30bd\u30c3\u30c9\u306e\u623b\u308a\u5024\u306b\u306f `IEnumerable<Person>` \u306a\u3069\u4efb\u610f\u306e\u578b\u3092\u8fd4\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306f 200 (OK) \u3068\u306a\u308a\u307e\u3059\u3002 \n\n```csharp\n[HttpGet]\npublic IEnumerable<Person> Get() => People.GetAll();\n```\n\n\u307e\u305f\u3001 \u623b\u308a\u5024\u304c\u306a\u3044\u30e1\u30bd\u30c3\u30c9\u3082\u6271\u3048\u307e\u3059\u3002 \u3053\u306e\u5834\u5408\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306f  204 (No Content) \u3068\u306a\u308a\u307e\u3059\u3002\n\n```csharp\n[HttpDelete(\"{id}\")]\npublic void Delete(string id) => People.Remove(id);\n```\n\nIActionResult \u306f\u51e6\u7406\u7d50\u679c\u306b\u5fdc\u3058\u3066\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3092\u8fd4\u3059\u5fc5\u8981\u304c\u3042\u308b\u5834\u5408\u306b\u4f7f\u3044\u307e\u3059\u3002\u4f8b\u3068\u3057\u3066 `Put()` \u30e1\u30bd\u30c3\u30c9\u3067\u306f\u6761\u4ef6\u306b\u3088\u3063\u3066 `BadRequest()` \u3084 `NotFound()` \u306a\u3069\u305d\u308c\u305e\u308c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306b\u5bfe\u5fdc\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\n\n```csharp\n [HttpPut(\"{id}\")]\n public IActionResult Put(string id, [FromBody]Person person)\n {\n     if (person == null || person.Id != id)\n         return BadRequest();\n\n     if (People.Find(id) == null)\n         return NotFound();\n\n     People.Update(person);\n\n     return new NoContentResult();\n }\n```\n\n`Put()` \u30e1\u30bd\u30c3\u30c9\u306e\u6761\u4ef6\u3068\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n| \u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9     | \u6761\u4ef6                                                                                                                | \n| :-------------------- | :----------------------------------------------------------------------------- |\n| 400 (Bad Request)  |  \u5f15\u6570\u3067\u4e0e\u3048\u3089\u308c\u3066\u308b\u5024\u306b\u4e0d\u6b63\u304c\u3042\u308b\u5834\u5408                                                        |\n| 404 (Not Found)      |  \u5f15\u6570\u306e `id` \u304b\u3089\u30c7\u30fc\u30bf\u3092\u691c\u7d22\u3057\u3066\u4e00\u81f4\u3059\u308b\u30c7\u30fc\u30bf\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u5834\u5408 |\n| 204 (No Content)     |  \u66f4\u65b0\u306b\u6210\u529f\u3057\u305f\u5834\u5408                                                                                      |\n\n---\n\u6700\u5f8c\u306b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b ValuesController.cs \u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u524a\u9664\u3059\u308c\u3070 Server-side \u306e\u5b9f\u88c5\u306f\u7d42\u308f\u308a\u3067\u3059\u3002\u7d9a\u3044\u3066 Client-side \u306e\u5b9f\u88c5\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\n# Client-side\nClient-side \u3067\u306f index.html \u3068 app.tag \u306e\u4fee\u6b63\u3092\u304a\u3053\u306a\u3044\u307e\u3059\u3002\n\n## html\nindex.html \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n```html:index.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>ASP.NET Core \u3067 Riot.js</title>\n    <!-- jQuery -->\n    <script src=\"https://code.jquery.com/jquery-3.0.0.min.js\"></script>\n    <!-- app.tag \u306e\u8aad\u8fbc\u307f -->\n    <script src=\"app.tag\" type=\"riot/tag\"></script>\n    <!-- riot+compiler.min.js \u306e\u8aad\u8fbc\u307f -->\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/riot/2.5.0/riot+compiler.min.js\"></script>\n</head>\n\n<body>\n    <!-- app \u30bf\u30b0 -->\n    <app></app>\n\n    <!-- \u4f5c\u6210\u3057\u305f\u30bf\u30b0\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b -->\n    <script>\n        riot.mount('*');\n    </script>\n</body>\n\n</html>\n```\n\nWeb API \u3068\u306e\u3084\u308a\u53d6\u308a\u3092 jQuery \u3092\u4f7f\u3063\u3066 Ajax \u901a\u4fe1\u3067\u304a\u3053\u306a\u3044\u305f\u3044\u306e\u3067 jQuery \u3092\u8aad\u8fbc\u3080\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n```html\n<script src=\"https://code.jquery.com/jquery-3.0.0.min.js\"></script>\n```\n\n\u3042\u3068\u524d\u56de `app` \u30bf\u30b0\u306e `title` \u5c5e\u6027\u306b\u5024\u3092\u5165\u308c\u3066\u3044\u307e\u3057\u305f\u304c\u4eca\u56de\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067\u53d6\u308a\u307e\u3057\u305f\u3002\n\n```html\n<app></app>\n```\n\n## Tag\napp.tag \u306b Ajax \u901a\u4fe1\u3067 GET \u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u7d50\u679c\u3092\u4e00\u89a7\u3067\u8868\u793a\u3059\u308b\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```html:app.tag\n<app>\n    <h1>People</h1>\n    <ul>\n        <li each=\"{ person in people }\" title=\"{ person.name }\">\n            <a href=\"#item/{person.id}\">{ person.name } ({ person.age })</a>\n        </li>\n    </ul>\n\n    <style scoped>\n        :scope { display: block }\n        ul {\n            list-style: none;\n            padding: 0;\n            margin: 0;\n        }\n        li {\n            margin: 0.8em 0;\n        }\n        a {\n            background: #eee;\n            border-radius:0.3em;\n            color: inherit;\n            display: block;\n            padding: 1.2em;\n            text-decoration: none;\n        }\n        a:hover {\n            background: #7ACBE2\n        }\n    </style>\n\n    // \u4e00\u89a7\n    this.people = [];\n \n    var self = this;\n\n    // GET\n    $.ajax({\n        url  : '/api/v1/person',\n        type : 'GET'\n    })\n    .then(\n        function (result) {\n            // \u53d6\u5f97\u7d50\u679c\u3092\u4e00\u89a7\u306b\u8a2d\u5b9a\n            self.people = result;\n            // \u66f4\u65b0\n            self.update();\n        },\n        function () {\n            console.log('\u5931\u6557');\n        }\n    );\n</app>\n```\n\n### Ajax\n\n`$.ajax()` \u3067 GET \u30ea\u30af\u30a8\u30b9\u30c8\u3057\u3066 `people` \u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u7d50\u679c\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n```javascript\n// GET\n$.ajax({\n    url  : '/api/v1/person',\n    type : 'GET'\n})\n.then(\n    function (result) {\n        // \u53d6\u5f97\u7d50\u679c\u3092\u4e00\u89a7\u306b\u8a2d\u5b9a\n        self.people = result;\n        // \u66f4\u65b0\n        self.update();\n    },\n    function () {\n        console.log('\u5931\u6557');\n    }\n);\n```\n\n\u4eca\u56de\u306f `$.ajax()` \u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306b `url` \u3068 `type` \u3060\u3051\u6307\u5b9a\u3057\u3066\u307e\u3059\u304c\u3001\u672c\u756a\u3067\u306f `timeout` \u3092\u6307\u5b9a\u3057\u305f\u308a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u305f\u3001Web API \u306e\u5185\u5bb9\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u306a\u3069\u518d\u5ea6 GET\u30ea\u30af\u30a8\u30b9\u30c8\u3057\u305f\u3068\u304d\u306b IE \u306a\u3069\u3067\u53d6\u5f97\u7d50\u679c\u304c\u3046\u307e\u304f\u53cd\u6620\u3055\u308c\u306a\u3044\u3053\u3068\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u306e\u3068\u304d\u306f `cache : false` \u3092\u6307\u5b9a\u3057\u3066\u3042\u3052\u307e\u3059\u3002\n\n### each\n\n`ul` \u30bf\u30b0\u5185\u3067\u306f\u53d6\u5f97\u3057\u305f\u7d50\u679c\u3092\u4e00\u89a7\u3067\u8868\u793a\u3059\u308b\u305f\u3081\u306b `each=\"{ person in people }\"` \u3067 `people` \u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u30eb\u30fc\u30d7\u3057\u3066\u8981\u7d20\u3092 `person` \u3068\u3057\u3066\u53d6\u308a\u51fa\u3057\u3066\u5185\u5bb9\u3092 `li` \u30bf\u30b0\u306b\u30d0\u30a4\u30f3\u30c9\u3057\u3066\u3044\u307e\u3059\u3002\n\n```html\n<li each=\"{ person in people }\" title=\"{ person.name }\">\n    <a href=\"#item/{person.id}\">{ person.name } ({ person.age })</a>\n</li>\n```\n\n---\n\n\u3053\u308c\u3067 Client-side \u306e\u5b9f\u88c5\u306f\u7d42\u308f\u308a\u3067\u3059\u3002`dotnet run` \u3057\u3066\u30d6\u30e9\u30a6\u30b6\u304b\u3089 localhost \u306b\u63a5\u7d9a\u3059\u308b\u3068\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n# \u6b21\u56de\n\u6b21\u56de\u306f Server-side \u306b\u5b9f\u88c5\u3057\u305f HTTP \u30e1\u30bd\u30c3\u30c9\u3092\u5229\u7528\u3057\u3066\u3001Client-side \u3067\u30c7\u30fc\u30bf\u306e\u8ffd\u52a0\u3084\u5909\u66f4\u306a\u3069\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n", "tags": ["C#", "ASP.NET", ".NETCore", "riot", "ASP.NET_WebAPI"]}