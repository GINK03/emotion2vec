{"tags": ["RaspberryPi", "OpenVPN", "server"], "context": "\n\n\u6982\u8981\n\u30b9\u30bf\u30d0\u3084\u30db\u30c6\u30eb\u306a\u3069\u30d5\u30ea\u30fcWifi\u30b9\u30dd\u30c3\u30c8\u3067\u3001OpenVPN\u3092\u5229\u7528\u3057\u3066\u30ed\u30fc\u30ab\u30eb\uff08\u81ea\u5b85\uff09\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b VPN \u63a5\u7d9a\u3059\u308b\nOS\u306bRaspbian\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u6761\u4ef6\uff08Lite\u7248\u4ee5\u5916\uff09\n\nOpenVPN\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\n\u3059\u3079\u3066\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6(root)\u3067\u64cd\u4f5c\u3092\u884c\u306a\u3046\u3053\u3068\nvi\u30a8\u30c7\u30a3\u30bf\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306eURL\u3092\u53c2\u7167\nhttp://net-newbie.com/linux/commands/vi.html\n\nOpenVPN\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# apt-get update\n# apt-get upgrade\n# apt-get install zip\n# apt-get install openssl\n# apt-get install openvpn\n\nzip\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u8ee2\u9001\u306b\u4f7f\u7528\u3059\u308b\u305f\u3081\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\nIP\u30d5\u30a9\u30ef\u30fc\u30c9\u3092\u6709\u52b9\u306b\u8a2d\u5b9a\n# echo 1 > /proc/sys/net/ipv4/ip_forward\n# vi /etc/sysctl.conf\n\n\u4ee5\u4e0b\u3092\u7de8\u96c6\u3059\u308b\n\n/etc/sysctl.conf\n# Uncomment the next line to enable packet forwarding for IPv4\n#net.ipv4.ip_forward=1\u3000\u2190 #\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\n\n\n\u518d\u8d77\u52d5\u3059\u308b\n# reboot\n\n\n\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n# sudo su\n# cd /usr/share/doc/openvpn/examples/easy-rsa/2.0\n# vi vars\n\n\u4ee5\u4e0b\u306e\u90e8\u5206\u3092\u63a2\u3057\u3066\u4efb\u610f\u306b\u5909\u66f4\u3059\u308b\u3002\nKEY_COUNTRY=\nKEY_PROVINCE=\nKEY_CITY=\nKEY_ORG=\nKEY_EMAIL=\n\n\n/usr/share/doc/openvpn/examples/easy-rsa/2.0/vars\nKEY_COUNTRY=\"JP\"\nKEY_PROVINCE=\"IBARAKI\"\nKEY_CITY=\"TSUKUBA\"\nKEY_ORG=\"VPNSERVER\"\nKEY_EMAIL=\"me@myhost.mydomain\"\n\n\n# . ./vars\n# ./clean-all\n\n\n\u30de\u30b9\u30bfCA\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\n# ./build-ca\n\nCommon Name (eg, your name or your server's hostname) []:\n\nCommon Name\u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u4ee5\u5916\u306f\u7a7a\u767d\u3067\u826f\u3044\u3002\n\u79c1\u306e\u5834\u5408\u306b\u306fca\u3068\u5165\u529b\u3057\u307e\u3057\u305f\u3002\n\n\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\n# ./build-key-server server\n\nCommon Name (eg, your name or your server's hostname) []:\n\nCommon Name\u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u4ee5\u5916\u306f\u7a7a\u767d\u3067\u826f\u3044\u3002\n\u79c1\u306e\u5834\u5408\u306b\u306fserver\u3068\u5165\u529b\u3057\u307e\u3057\u305f\u3002\n\u3055\u3089\u306b\nSign the certificate? [y/n]:\n1 out of 1 certificate requests certified, commit? [y/n]\n\n\u3053\u306e\uff12\u3064\u3092\u805e\u3044\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u4e21\u65b9\u3068\u3082y\u3067\u3002\n\n\u5404\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u914d\u5e03\u3059\u308b\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\n# ./build-key client1\n\nCommon Name (eg, your name or your server's hostname) []:\n\nCommon Name\u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u4ee5\u5916\u306f\u7a7a\u767d\u3067\u826f\u3044\u3002\n\u79c1\u306e\u5834\u5408\u306b\u306fclient1\u3068\u5165\u529b\u3057\u307e\u3057\u305f\u3002\n\u3055\u3089\u306b\nSign the certificate? [y/n]:\n1 out of 1 certificate requests certified, commit? [y/n]\n\n\u3053\u306e\uff12\u3064\u3092\u805e\u3044\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u4e21\u65b9\u3068\u3082y\u3067\u3002\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5897\u3084\u3057\u305f\u3051\u308c\u3070\u6b21\u306e\u3088\u3046\u306b\u3064\u304f\u308b\u3002\n#./build-key client2\n#./build-key client3\n#./build-key client4\n\n\nDH (Diffie Hellman) \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f5c\u6210\n# ./build-dh\n\n\nTLS\u9375\u3092\u4f5c\u6210\n# cd keys\n# openvpn --genkey --secret vpn_ta.key\n\n\n\u4f5c\u6210\u3057\u305f\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\n# cp vpn_ta.key server.crt server.key dh1024.pem ca.crt /etc/openvpn\n\n\n\u5fc5\u8981\u306a\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5727\u7e2e\n# zip vpnclient.zip ca.crt vpn_ta.key client1.crt client1.key\n\n\nzip\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\n\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001\u51fa\u6765\u308b\u3088\u3046\u306b/home\u3078\u79fb\u52d5\u3059\u308b\n\u65b9\u6cd5\u306f\u3001USB\u30e1\u30e2\u30ea\u3084\u30e1\u30fc\u30eb\u306a\u3069\u3067\u8ee2\u9001\u3059\u308b\n# cp vpnclient.zip /home\n\n\nconf\u30d5\u30a1\u30a4\u30eb\u3067OpenVPN\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n# cd /etc/openvpn\n# cp /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz .\n# gunzip server.conf.gz\n# vi server.conf\n\nxxx.xxx.xxx.xxx\u306f\u30d7\u30ed\u30d0\u30a4\u30c0\u306eDNS\u30b5\u30fc\u30d0\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3059\u308b\nDNS\u30b5\u30fc\u30d0\u306e\u78ba\u8a8d\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306eURL\u3092\u53c2\u7167\nhttp://www.akakagemaru.info/port/dns-address.html\n\n/etc/openvpn/server.conf\n;local a.b.c.d\n\nport 1194\n\n;proto tcp\nproto udp\n\n;dev tap0\ndev tun\n\n;dev-node MyTap\n\nca /etc/openvpn/ca.crt\ncert /etc/openvpn/server.crt\nkey /etc/openvpn/server.key\n\ndh /etc/openvpn/dh1024.pem\n\nserver 10.8.0.0 255.255.255.0\n\nifconfig-pool-persist ipp.txt\n\n;server-bridge 10.8.0.4 255.255.255.0 10.8.0.50 10.8.0.100\n\n;server-bridge\n\npush \"route 10.8.0.0 255.255.255.0\"\n;push \"route 192.168.20.0 255.255.255.0\"\n\n;client-config-dir ccd\n;route 192.168.40.128 255.255.255.248\n\n;client-config-dir ccd\n;route 10.9.0.0 255.255.255.252\n\n;learn-address ./script\n\npush \"redirect-gateway def1\"\n\npush \"dhcp-option DNS xxx.xxx.xxx.xxx\"\npush \"dhcp-option DNS xxx.xxx.xxx.xxx\"\n\n;client-to-client\n\n;duplicate-cn\n\nkeepalive 10 120\n\ntls-auth /etc/openvpn/vpn_ta.key 0 \n\n;cipher BF-CBC        \n;cipher AES-128-CBC   \n;cipher DES-EDE3-CBC  \n\n;comp-lzo\n\n\n;max-clients 100\n\nuser nobody\ngroup nogroup\n\npersist-key\npersist-tun\n\nstatus /etc/openvpn/openvpn-status.log\n\nlog         /etc/openvpn/openvpn.log\nlog-append  /etc/openvpn/openvpn.log\n\nverb 3\n\n;mute 20\n\n\n\n\u8a2d\u5b9a\u3057\u305fOpenVPN\u3092\u518d\u8d77\u52d5\n# /etc/init.d/openvpn restart\n\nStopping virtual private network daemon:.\nStarting virtual private network daemon: server.\n\n[OK]\u3068\u8868\u793a\u3067\u304d\u305f\u3089\u8d77\u52d5\u6210\u529f\uff01\n\nRasPi\u8d77\u52d5\u6642\u306bOpenVPN\u3092\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# update-rc.d openvpn defaults\n\n\nRasPi\u306e\u30dd\u30fc\u30c8\u958b\u653e\u306e\u8a2d\u5b9a\n\u30eb\u30fc\u30bf\u30fc\u306eUDP1194\u30dd\u30fc\u30c8\u958b\u653e\u3082\u5fd8\u308c\u305a\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068\n# vi /etc/rc.local\n\n\u4ee5\u4e0b\u3092 iptables\uff5e\uff5e\uff5e \u306e2\u884c\u3092\u8ffd\u8a18\u3059\u308b\u3002\n  : \u7701\u7565\niptables -A INPUT -p udp -m state --state NEW -m udp --dport 1194 -j ACCEPT\niptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE\n\nexit 0\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u8a2d\u5b9a\n\u5727\u7e2e\u3057\u305fzip\u30d5\u30a1\u30a4\u30eb\u306ekey\u30d5\u30a1\u30a4\u30eb\u307e\u305f\u306fcrt\u30d5\u30a1\u30a4\u30eb\u3092\u30e1\u30e2\u5e33\u3067\u958b\u304d\u3001< > </ >\u5185\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3002\nxxx.xxx.xxx.xxx\u306f\u30eb\u30fc\u30bf\u306e\u56fa\u5b9aIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a18\u5165\u3059\u308b\n\nclient.ovpn\nclient\ndev tun\nproto udp\nkey-direction 1\nremote xxx.xxx.xxx.xxx 1194\nresolv-retry infinite\nnobind\npersist-key\npersist-tun\nverb 3\n<ca>\n-----BEGIN CERTIFICATE-----\n\n-----END CERTIFICATE-----\n</ca>\n<cert>\n-----BEGIN CERTIFICATE-----\n\n-----END CERTIFICATE-----\n</cert>\n<key>\n-----BEGIN PRIVATE KEY-----\n\n-----END PRIVATE KEY-----\n</key>\n<tls-auth>\n-----BEGIN OpenVPN Static key V1-----\n\n-----END OpenVPN Static key V1-----\n</tls-auth>\n\n\n## \u6982\u8981\n\u30b9\u30bf\u30d0\u3084\u30db\u30c6\u30eb\u306a\u3069\u30d5\u30ea\u30fcWifi\u30b9\u30dd\u30c3\u30c8\u3067\u3001OpenVPN\u3092\u5229\u7528\u3057\u3066\u30ed\u30fc\u30ab\u30eb\uff08\u81ea\u5b85\uff09\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b VPN \u63a5\u7d9a\u3059\u308b\nOS\u306bRaspbian\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u6761\u4ef6\uff08Lite\u7248\u4ee5\u5916\uff09\n\n\n## OpenVPN\u30b5\u30fc\u30d0\u306e\u69cb\u7bc9\n\u3059\u3079\u3066\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6(root)\u3067\u64cd\u4f5c\u3092\u884c\u306a\u3046\u3053\u3068\nvi\u30a8\u30c7\u30a3\u30bf\u306e\u4f7f\u3044\u65b9\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306eURL\u3092\u53c2\u7167\n[http://net-newbie.com/linux/commands/vi.html](http://net-newbie.com/linux/commands/vi.html)\n\n### OpenVPN\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# apt-get update\n# apt-get upgrade\n# apt-get install zip\n# apt-get install openssl\n# apt-get install openvpn\n```\n\nzip\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u8ee2\u9001\u306b\u4f7f\u7528\u3059\u308b\u305f\u3081\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\n### IP\u30d5\u30a9\u30ef\u30fc\u30c9\u3092\u6709\u52b9\u306b\u8a2d\u5b9a\n\n```\n# echo 1 > /proc/sys/net/ipv4/ip_forward\n# vi /etc/sysctl.conf\n```\n\n\u4ee5\u4e0b\u3092\u7de8\u96c6\u3059\u308b\n\n```/etc/sysctl.conf\n# Uncomment the next line to enable packet forwarding for IPv4\n#net.ipv4.ip_forward=1\u3000\u2190 #\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\n```\n\u518d\u8d77\u52d5\u3059\u308b\n\n```\n# reboot\n```\n\n### \u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\n```\n# sudo su\n# cd /usr/share/doc/openvpn/examples/easy-rsa/2.0\n# vi vars\n```\n\n\u4ee5\u4e0b\u306e\u90e8\u5206\u3092\u63a2\u3057\u3066\u4efb\u610f\u306b\u5909\u66f4\u3059\u308b\u3002\n\n```\nKEY_COUNTRY=\nKEY_PROVINCE=\nKEY_CITY=\nKEY_ORG=\nKEY_EMAIL=\n```\n\n```/usr/share/doc/openvpn/examples/easy-rsa/2.0/vars\nKEY_COUNTRY=\"JP\"\nKEY_PROVINCE=\"IBARAKI\"\nKEY_CITY=\"TSUKUBA\"\nKEY_ORG=\"VPNSERVER\"\nKEY_EMAIL=\"me@myhost.mydomain\"\n```\n\n```\n# . ./vars\n# ./clean-all\n```\n\n### \u30de\u30b9\u30bfCA\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\n\n```\n# ./build-ca\n```\n\n```\nCommon Name (eg, your name or your server's hostname) []:\n```\n\nCommon Name\u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u4ee5\u5916\u306f\u7a7a\u767d\u3067\u826f\u3044\u3002\n\u79c1\u306e\u5834\u5408\u306b\u306f**ca**\u3068\u5165\u529b\u3057\u307e\u3057\u305f\u3002\n\n### \u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\n```\n# ./build-key-server server\n```\n\n```\nCommon Name (eg, your name or your server's hostname) []:\n```\nCommon Name\u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u4ee5\u5916\u306f\u7a7a\u767d\u3067\u826f\u3044\u3002\n\u79c1\u306e\u5834\u5408\u306b\u306f**server**\u3068\u5165\u529b\u3057\u307e\u3057\u305f\u3002\n\n\u3055\u3089\u306b\n\n```\nSign the certificate? [y/n]:\n1 out of 1 certificate requests certified, commit? [y/n]\n````\n\n\u3053\u306e\uff12\u3064\u3092\u805e\u3044\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u4e21\u65b9\u3068\u3082**y**\u3067\u3002\n\n### \u5404\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u914d\u5e03\u3059\u308b\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\n\n```\n# ./build-key client1\n```\n\n```\nCommon Name (eg, your name or your server's hostname) []:\n```\nCommon Name\u306b\u4efb\u610f\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u4ee5\u5916\u306f\u7a7a\u767d\u3067\u826f\u3044\u3002\n\u79c1\u306e\u5834\u5408\u306b\u306f**client1**\u3068\u5165\u529b\u3057\u307e\u3057\u305f\u3002\n\n\u3055\u3089\u306b\n\n```\nSign the certificate? [y/n]:\n1 out of 1 certificate requests certified, commit? [y/n]\n```\n\n\u3053\u306e\uff12\u3064\u3092\u805e\u3044\u3066\u304d\u307e\u3059\u306e\u3067\u3001\u4e21\u65b9\u3068\u3082**y**\u3067\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5897\u3084\u3057\u305f\u3051\u308c\u3070\u6b21\u306e\u3088\u3046\u306b\u3064\u304f\u308b\u3002\n\n```\n#./build-key client2\n#./build-key client3\n#./build-key client4\n```\n\n### DH (Diffie Hellman) \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f5c\u6210\n\n```\n# ./build-dh\n```\n\n### TLS\u9375\u3092\u4f5c\u6210\n\n```\n# cd keys\n# openvpn --genkey --secret vpn_ta.key\n```\n\n### \u4f5c\u6210\u3057\u305f\u8a3c\u660e\u66f8\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\n\n```\n# cp vpn_ta.key server.crt server.key dh1024.pem ca.crt /etc/openvpn\n```\n\n### \u5fc5\u8981\u306a\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u5727\u7e2e\n\n```\n# zip vpnclient.zip ca.crt vpn_ta.key client1.crt client1.key\n```\n\n### zip\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\n\n\u30d5\u30a1\u30a4\u30eb\u8ee2\u9001\u51fa\u6765\u308b\u3088\u3046\u306b/home\u3078\u79fb\u52d5\u3059\u308b\n\u65b9\u6cd5\u306f\u3001USB\u30e1\u30e2\u30ea\u3084\u30e1\u30fc\u30eb\u306a\u3069\u3067\u8ee2\u9001\u3059\u308b\n\n```\n# cp vpnclient.zip /home\n```\n\n### conf\u30d5\u30a1\u30a4\u30eb\u3067OpenVPN\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n```\n# cd /etc/openvpn\n# cp /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz .\n# gunzip server.conf.gz\n# vi server.conf\n```\n\nxxx.xxx.xxx.xxx\u306f\u30d7\u30ed\u30d0\u30a4\u30c0\u306eDNS\u30b5\u30fc\u30d0\u306e\u74b0\u5883\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3059\u308b\nDNS\u30b5\u30fc\u30d0\u306e\u78ba\u8a8d\u65b9\u6cd5\u306f\u4ee5\u4e0b\u306eURL\u3092\u53c2\u7167\n[http://www.akakagemaru.info/port/dns-address.html](http://www.akakagemaru.info/port/dns-address.html)\n\n```/etc/openvpn/server.conf\n;local a.b.c.d\n\nport 1194\n\n;proto tcp\nproto udp\n\n;dev tap0\ndev tun\n\n;dev-node MyTap\n\nca /etc/openvpn/ca.crt\ncert /etc/openvpn/server.crt\nkey /etc/openvpn/server.key\n\ndh /etc/openvpn/dh1024.pem\n\nserver 10.8.0.0 255.255.255.0\n\nifconfig-pool-persist ipp.txt\n\n;server-bridge 10.8.0.4 255.255.255.0 10.8.0.50 10.8.0.100\n\n;server-bridge\n\npush \"route 10.8.0.0 255.255.255.0\"\n;push \"route 192.168.20.0 255.255.255.0\"\n\n;client-config-dir ccd\n;route 192.168.40.128 255.255.255.248\n\n;client-config-dir ccd\n;route 10.9.0.0 255.255.255.252\n\n;learn-address ./script\n\npush \"redirect-gateway def1\"\n\npush \"dhcp-option DNS xxx.xxx.xxx.xxx\"\npush \"dhcp-option DNS xxx.xxx.xxx.xxx\"\n\n;client-to-client\n\n;duplicate-cn\n\nkeepalive 10 120\n\ntls-auth /etc/openvpn/vpn_ta.key 0 \n\n;cipher BF-CBC        \n;cipher AES-128-CBC   \n;cipher DES-EDE3-CBC  \n\n;comp-lzo\n\n\n;max-clients 100\n\nuser nobody\ngroup nogroup\n\npersist-key\npersist-tun\n\nstatus /etc/openvpn/openvpn-status.log\n\nlog         /etc/openvpn/openvpn.log\nlog-append  /etc/openvpn/openvpn.log\n\nverb 3\n\n;mute 20\n```\n\n### \u8a2d\u5b9a\u3057\u305fOpenVPN\u3092\u518d\u8d77\u52d5\n\n```\n# /etc/init.d/openvpn restart\n```\n\n```\nStopping virtual private network daemon:.\nStarting virtual private network daemon: server.\n```\n\n[OK]\u3068\u8868\u793a\u3067\u304d\u305f\u3089\u8d77\u52d5\u6210\u529f\uff01\n\n### RasPi\u8d77\u52d5\u6642\u306bOpenVPN\u3092\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\n```\n# update-rc.d openvpn defaults\n```\n\n### RasPi\u306e\u30dd\u30fc\u30c8\u958b\u653e\u306e\u8a2d\u5b9a\n**\u30eb\u30fc\u30bf\u30fc\u306eUDP1194\u30dd\u30fc\u30c8\u958b\u653e\u3082\u5fd8\u308c\u305a\u306b\u8a2d\u5b9a\u3059\u308b\u3053\u3068**\n\n```\n# vi /etc/rc.local\n```\n\n\u4ee5\u4e0b\u3092 iptables\uff5e\uff5e\uff5e \u306e2\u884c\u3092\u8ffd\u8a18\u3059\u308b\u3002\n\n```\n  : \u7701\u7565\niptables -A INPUT -p udp -m state --state NEW -m udp --dport 1194 -j ACCEPT\niptables -t nat -A POSTROUTING -s 10.8.0.0/24 -o eth0 -j MASQUERADE\n\nexit 0\n```\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u8a2d\u5b9a\n\u5727\u7e2e\u3057\u305fzip\u30d5\u30a1\u30a4\u30eb\u306ekey\u30d5\u30a1\u30a4\u30eb\u307e\u305f\u306fcrt\u30d5\u30a1\u30a4\u30eb\u3092\u30e1\u30e2\u5e33\u3067\u958b\u304d\u3001< > </ >\u5185\u306b\u30b3\u30d4\u30fc\u3059\u308b\u3002\nxxx.xxx.xxx.xxx\u306f\u30eb\u30fc\u30bf\u306e\u56fa\u5b9aIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a18\u5165\u3059\u308b\n\n```client.ovpn\nclient\ndev tun\nproto udp\nkey-direction 1\nremote xxx.xxx.xxx.xxx 1194\nresolv-retry infinite\nnobind\npersist-key\npersist-tun\nverb 3\n<ca>\n-----BEGIN CERTIFICATE-----\n\n-----END CERTIFICATE-----\n</ca>\n<cert>\n-----BEGIN CERTIFICATE-----\n\n-----END CERTIFICATE-----\n</cert>\n<key>\n-----BEGIN PRIVATE KEY-----\n\n-----END PRIVATE KEY-----\n</key>\n<tls-auth>\n-----BEGIN OpenVPN Static key V1-----\n\n-----END OpenVPN Static key V1-----\n</tls-auth>\n```\n"}