{"tags": ["RaspberryPi", "ngrok2.0.19", "webcam", "freeboard", "motion"], "context": " More than 1 year has passed since last update.\u6c34\u8015\u683d\u57f9\u3057\u3066\u3044\u308b\u30a2\u30dc\u30ab\u30c9\u306e\u690d\u7269\u80b2\u6210LED\u30e9\u30a4\u30c8\u306e\u70b9\u706f\u3084\u6d88\u706f\u3092Hubot\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u304b\u3089\u30e9\u30a4\u30c8\u3092\u5236\u5fa1\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u69d8\u5b50\u304c\u898b\u3048\u306a\u3044\u306e\u3067\u672c\u5f53\u306b\u30e9\u30a4\u30c8\u304c\u70b9\u3044\u305f\u3069\u3046\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u3002Raspberry Pi\u306bWebcam\u3092\u3064\u3051\u3066\u30a2\u30dc\u30ab\u30c9\u3092\u30e9\u30a4\u30d6\u914d\u4fe1\u3057\u306a\u304c\u3089\u30e9\u30a4\u30c8\u306e\u5236\u5fa1\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\nLogicool C270\nWebcam\u306f\u5b89\u4fa1\u306aLogicool C270\u30922,000\u5186\u304f\u3089\u3044\u3067\u8cfc\u5165\u3057\u307e\u3057\u305f\u3002\u56fd\u5185\u5916\u3067Raspberry Pi\u3068\u4e00\u7dd2\u306b\u4f7f\u3046\u4f8b\u304c\u305f\u304f\u3055\u3093\u898b\u3064\u304b\u308b\u306e\u3067\u5b89\u5fc3\u3067\u3059\u3002\n\nRaspberry Pi\u306eWeb\u30ab\u30e1\u30e9\u3092Logicool C270\u306b\u30b0\u30ec\u30fc\u30c9\u30a2\u30c3\u30d7\u3059\u308b\nHow to make a DIY home alarm system with a raspberry pi and a webcam\n\n\nMotion\n\nRaspberry Pi\u306e\u52d5\u753b\u914d\u4fe1\u30c4\u30fc\u30eb\nRaspberry Pi\u306bWebcam\u3092USB\u3067\u63a5\u7d9a\u3057\u3066\u52d5\u753b\u914d\u4fe1\u3092\u3059\u308b\u30c4\u30fc\u30eb\u3092\u8abf\u3079\u308b\u3068\u3044\u304f\u3064\u304b\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\nMotion\nUV4L\nMJPG-streamer\nSocket.IO binary support\nWebSocket\n\n\u4eca\u56de\u306fdeb\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u3066\u3001\u8a2d\u5b9a\u304c\u7c21\u5358\u306aMotion\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\nMotion\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nRaspberry Pi\u306bWebcam\u3092USB\u63a5\u7d9a\u3057\u307e\u3059\u3002lsusb\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ab\u30e1\u30e9\u304c\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ lsusb\n...\nBus 001 Device 005: ID 046d:0825 Logitech, Inc. Webcam C270\n\nMotion\u3092apt-get install\u3057\u307e\u3059\u3002motion\u30e6\u30fc\u30b6\u30fc\u3068video\u30b0\u30eb\u30fc\u30d7\u3082\u540c\u6642\u306b\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n$ sudo apt-get update\n$ sudo apt-get install motion\n...\nSetting up motion (3.2.12-3.4) ...\nAdding group `motion' (GID 111) ...\nDone.\nAdding system user `motion' (UID 108) ...\nAdding new user `motion' (UID 108) with group `motion' ...\nNot creating home directory `/home/motion'.\nAdding user `motion' to group `video' ...\nAdding user motion to group video\nDone.\nNot starting motion daemon, disabled via /etc/default/motion ... (warning).\nSetting up ffmpeg (6:0.8.17-1+rpi1) ...\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\u6700\u521d\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u3068\u308a\u307e\u3059\u3002\n$ sudo cp /etc/motion/motion.conf{,.orig}\n\nmotion.conf\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\nmotion\u3067\u304a\u624b\u8efd\u76e3\u8996\u30ab\u30e1\u30e9\u3092\u3064\u304f\u308b\nMotion \u3067\u30e9\u30a4\u30d6\u30ab\u30e1\u30e9+\u52d5\u4f53\u691c\u77e5\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\n\n\n/etc/motion/motion.conf\nwidth 640             # \u5e45\nheight 480            # \u9ad8\u3055\nframerate 30          # \u30d5\u30ec\u30fc\u30e0\u30ec\u30fc\u30c8\u30011\u79d2\u9593\u306b\u64ae\u5f71\u3059\u308b\u679a\u6570\noutput_normal off     # \u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3057\u306a\u3044\nwebcam_localhost off  # \u30ed\u30fc\u30ab\u30eb\u30db\u30b9\u30c8\u4ee5\u5916\u3082\u30e9\u30a4\u30d6\u6620\u50cf\u3092\u914d\u4fe1\n\n\n\nMotion\u306e\u8d77\u52d5\n\n\u30ce\u30f3\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\n\u30c6\u30b9\u30c8\u7528\u306bMotion\u3092non-daemon\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ sudo motion -n\n\nRaspberry Pi\u306f\u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306b\u3042\u308a\u307e\u3059\u3002\nhttp://192.168.128.203:8081/\n\u540c\u3058LAN\u306bOSX\u3092\u63a5\u7d9a\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u3092\u958b\u304d\u307e\u3059\u3002Chrome\u306f\u76f4\u63a5URL\u304b\u3089\u958b\u3051\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\nChrome: x\nSafari: \u25cb\nFirefox: \u25cb\n\n\n\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\nMotion\u3092\u30c7\u30e2\u30ca\u30a4\u30ba\u3059\u308b\u5834\u5408\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f2\u3064\u4fee\u6b63\u304c\u5fc5\u8981\u3067\u3059\u3002/etc/default/motion\u306estart_motion_daemon\u3092yes\u306b\u3057\u307e\u3059\u3002\n\n/etc/default/motion\n# set to 'yes' to enable the motion daemon\n#start_motion_daemon=no\nstart_motion_daemon=yes\n\n\n/etc/motion/motion.conf\u306edaemon\u3092on\u306b\u3057\u307e\u3059\u3002\n\n/etc/motion/motion.conf\n# Start in daemon (background) mode and release terminal (default: off)\n#daemon off\ndaemon on\n\n\n/etc/init.d/motion\u304c\u6709\u52b9\u306b\u306a\u308b\u306e\u3067Motion\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ sudo service motion start\nStarting motion detection daemon: motion.\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306ediff\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u7b87\u6240\u3092diff\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ sudo diff -u motion.conf.orig motion.conf > /tmp/motion.diff\n\n\n/tmp/motion.diff\n--- motion.conf.orig    2015-08-04 15:32:52.354807944 +0900\n+++ motion.conf 2015-08-05 12:56:32.980973204 +0900\n@@ -8,7 +8,8 @@\n ############################################################\n\n # Start in daemon (background) mode and release terminal (default: off)\n-daemon off\n+#daemon off\n+daemon on\n\n # File to store the process ID, also called pid file. (default: not defined)\n process_id_file /var/run/motion/motion.pid\n@@ -67,14 +68,17 @@\n rotate 0\n\n # Image width (pixels). Valid range: Camera dependent, default: 352\n-width 320\n+#width 320\n+width 640\n\n # Image height (pixels). Valid range: Camera dependent, default: 288\n-height 240\n+#height 240\n+height 480\n\n # Maximum number of frames to be captured per second.\n # Valid range: 2-100. Default: 100 (almost no limit).\n-framerate 2\n+#framerate 2\n+framerate 30\n\n # Minimum time in seconds between capturing picture frames from the camera.\n # Default: 0 = disabled - the capture rate is given by the camera framerate.\n@@ -224,7 +228,8 @@\n # Picture with most motion of an event is saved when set to 'best'.\n # Picture with motion nearest center of picture is saved when set to 'center'.\n # Can be used as preview shot for the corresponding movie.\n-output_normal on\n+#output_normal on\n+output_normal off\n\n # Output pictures with only the pixels moving object (ghost images) (default: off)\n output_motion off\n@@ -410,7 +415,8 @@\n webcam_maxrate 1\n\n # Restrict webcam connections to localhost only (default: on)\n-webcam_localhost on\n+#webcam_localhost on\n+webcam_localhost off\n\n # Limits the number of images per connection (default: 0 = unlimited)\n # Number can be defined by multiplying actual webcam rate by desired number of seconds\n\n\n\nngrok\nngrok\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30da\u30fc\u30b8\u304b\u3089Linux/ARM\u306e\u30d0\u30a4\u30ca\u30ea\u3092Raspberry Pi\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ wget https://dl.ngrok.com/ngrok_2.0.19_linux_arm.zip\n$ sudo unzip ngrok_2.0.19_linux_arm.zip -d /usr/local/bin\nArchive:  ngrok_2.0.19_linux_arm.zip\n  inflating: /usr/local/bin/ngrok\n$ ngrok version\nngrok version 2.0.19\n\n\u6700\u521d\u306bngrok\u3092\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3057\u3066\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002Motion\u306eHTTP\n\u306e8081\u30dd\u30fc\u30c8\u3092ngrok\u3092\u4f7f\u3063\u3066\u30c8\u30f3\u30cd\u30eb\u3057\u307e\u3059\u3002\n$ ngrok http 8081\n...\nForwarding                    http://0a08cc8b.ngrok.io -> localhost:8081\nForwarding                    https://0a08cc8b.ngrok.io -> localhost:8081\n\nSafari\u304bFirefox\u3067\u958b\u3044\u3066Webcam\u306e\u52d5\u753b\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\nSupervisor\nSupervisor\u3092\u4f7f\u3044ngrok\u306e\u30c8\u30f3\u30cd\u30eb\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306ecommand\u884c\u306bngrok\u30b3\u30de\u30f3\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002--authtoken\u30d5\u30e9\u30b0\u3068-subdomain\u30d5\u30e9\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002-subdomain\u30d5\u30e9\u30b0\u3067\u6307\u5b9a\u3059\u308b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u540d\u306fReserved Tunnels\u753b\u9762\u306eReserved Domain\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n/etc/supervisor/conf.d/ngrok-webcam.conf\n[program:ngrok-webcam]\ncommand=/usr/local/bin/ngrok http --authtoken xxx -subdomain=xxx 8081\nnumprocs=1\nredirect_stderr=true\nstdout_logfile=/var/log/ngrok-webcam.log\nautorestart=true\nuser=pi\n\n\nreread\u3057\u3066\u4f5c\u6210\u3057\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092Supervisor\u306b\u8aad\u307f\u8fbc\u307e\u305b\u307e\u3059\u3002\n$ sudo supervisorctl reread\nngrok-webcam: available\n\nadd\u3067Supervisor\u306e\u30b5\u30d6\u30d7\u30ed\u30bb\u30b9\u306bngrok\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n$ sudo supervisorctl add ngrok-webcam\nngrok-webcam: added process group\n$ sudo supervisorctl status ngrok-webcam\nngrok-webcam                       RUNNING    pid 30319, uptime 0:00:44\n\nngrok\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306eTunnels Online\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u30c8\u30f3\u30cd\u30eb\u3057\u3066\u3044\u308bURL\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\nSafari\u304b\u3089\u3053\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068Motion\u304c\u914d\u4fe1\u3057\u3066\u3044\u308b\u52d5\u753b\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nfreeboard\u306b\u7d71\u5408\u3059\u308b\nfreeboard\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306bMotion\u306e\u52d5\u753b\u3092\u57cb\u3081\u8fbc\u3080\u3068\u3001Chrome\u3067\u3082\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nPane\u306e\u8ffd\u52a0\nADD PANE\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Pane\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nPane\u306e\u5de5\u5177\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Pane\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u540d\u524d\u306f\u300c\u30a2\u30dc\u30ab\u30c9\u30e9\u30a4\u30d6\u300d\u3068\u3064\u3051\u307e\u3057\u305f\u3002\n\nWidget\u306e\u8ffd\u52a0\n\u6b21\u306bPane\u306e\u30d7\u30e9\u30b9\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Widget\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nWidget\u306e\u30d7\u30e9\u30b9\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Widget\u306e\u7de8\u96c6\u3092\u3057\u307e\u3059\u3002\u52d5\u753b\u306e\u30d5\u30ec\u30fc\u30e0\u753b\u50cf\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u5909\u66f4\u3055\u308c\u308b\u306e\u3067\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u306f\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u3057\u307e\u305b\u3093\u3002\n\nTYPE: Picture\nIMAGE URL: ngrok\u304c\u30c8\u30f3\u30cd\u30eb\u3057\u3066\u3044\u308bURL\nREFRESH EVERY: 3600 (\u753b\u9762\u304c\u6d88\u3048\u308b\u306e\u3067\u305f\u307e\u306b\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u3059\u308b)\n\n\n\n\u5b8c\u6210\nHubot\u306e\u30e9\u30a4\u30c8\u3092\u30aa\u30f3/\u30aa\u30d5\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u30e9\u30a4\u30d6\u6620\u50cf\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u6c34\u8015\u683d\u57f9\u3057\u3066\u3044\u308b\u30a2\u30dc\u30ab\u30c9\u306e[\u690d\u7269\u80b2\u6210LED\u30e9\u30a4\u30c8\u306e\u70b9\u706f\u3084\u6d88\u706f](http://qiita.com/masato/items/ba56103f44d487cdfc51)\u3092[Hubot](https://hubot.github.com/)\u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\u30ea\u30e2\u30fc\u30c8\u304b\u3089\u30e9\u30a4\u30c8\u3092\u5236\u5fa1\u3067\u304d\u308b\u306e\u3067\u3059\u304c\u3001\u69d8\u5b50\u304c\u898b\u3048\u306a\u3044\u306e\u3067\u672c\u5f53\u306b\u30e9\u30a4\u30c8\u304c\u70b9\u3044\u305f\u3069\u3046\u304b\u5206\u304b\u308a\u307e\u305b\u3093\u3002Raspberry Pi\u306bWebcam\u3092\u3064\u3051\u3066\u30a2\u30dc\u30ab\u30c9\u3092\u30e9\u30a4\u30d6\u914d\u4fe1\u3057\u306a\u304c\u3089\u30e9\u30a4\u30c8\u306e\u5236\u5fa1\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n## Logicool C270\n\nWebcam\u306f\u5b89\u4fa1\u306a[Logicool C270](http://www.logicool.co.jp/ja-jp/product/hd-webcam-c270?crid=34)\u30922,000\u5186\u304f\u3089\u3044\u3067\u8cfc\u5165\u3057\u307e\u3057\u305f\u3002\u56fd\u5185\u5916\u3067Raspberry Pi\u3068\u4e00\u7dd2\u306b\u4f7f\u3046\u4f8b\u304c\u305f\u304f\u3055\u3093\u898b\u3064\u304b\u308b\u306e\u3067\u5b89\u5fc3\u3067\u3059\u3002\n\n* [Raspberry Pi\u306eWeb\u30ab\u30e1\u30e9\u3092Logicool C270\u306b\u30b0\u30ec\u30fc\u30c9\u30a2\u30c3\u30d7\u3059\u308b](http://denshikousaku.net/logicool-c270-raspberry-pi)\n* [How to make a DIY home alarm system with a raspberry pi and a webcam](https://medium.com/@Cvrsor/how-to-make-a-diy-home-alarm-system-with-a-raspberry-pi-and-a-webcam-2d5a2d61da3d)\n\n\n## Motion\n\n### Raspberry Pi\u306e\u52d5\u753b\u914d\u4fe1\u30c4\u30fc\u30eb\n\nRaspberry Pi\u306bWebcam\u3092USB\u3067\u63a5\u7d9a\u3057\u3066\u52d5\u753b\u914d\u4fe1\u3092\u3059\u308b\u30c4\u30fc\u30eb\u3092\u8abf\u3079\u308b\u3068\u3044\u304f\u3064\u304b\u898b\u3064\u304b\u308a\u307e\u3057\u305f\u3002\n\n* [Motion](http://www.lavrsen.dk/foswiki/bin/view/Motion/WebHome)\n* [UV4L](http://www.linux-projects.org/modules/sections/index.php?op=viewarticle&artid=14)\n* [MJPG-streamer](http://sourceforge.net/projects/mjpg-streamer/)\n* [Socket.IO binary support](http://yosuke-furukawa.hatenablog.com/entry/2014/06/25/111615)\n* [WebSocket](http://ami-gs.hatenablog.com/entry/2014/04/09/230224)\n\n\u4eca\u56de\u306fdeb\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u3066\u3001\u8a2d\u5b9a\u304c\u7c21\u5358\u306a[Motion](http://www.lavrsen.dk/foswiki/bin/view/Motion/WebHome)\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n\n### Motion\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nRaspberry Pi\u306bWebcam\u3092USB\u63a5\u7d9a\u3057\u307e\u3059\u3002lsusb\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u30ab\u30e1\u30e9\u304c\u8a8d\u8b58\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n$ lsusb\n...\nBus 001 Device 005: ID 046d:0825 Logitech, Inc. Webcam C270\n```\n\nMotion\u3092apt-get install\u3057\u307e\u3059\u3002`motion`\u30e6\u30fc\u30b6\u30fc\u3068`video`\u30b0\u30eb\u30fc\u30d7\u3082\u540c\u6642\u306b\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n\n```bash\n$ sudo apt-get update\n$ sudo apt-get install motion\n...\nSetting up motion (3.2.12-3.4) ...\nAdding group `motion' (GID 111) ...\nDone.\nAdding system user `motion' (UID 108) ...\nAdding new user `motion' (UID 108) with group `motion' ...\nNot creating home directory `/home/motion'.\nAdding user `motion' to group `video' ...\nAdding user motion to group video\nDone.\nNot starting motion daemon, disabled via /etc/default/motion ... (warning).\nSetting up ffmpeg (6:0.8.17-1+rpi1) ...\n```\n\n### \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\n\n\u6700\u521d\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u3068\u308a\u307e\u3059\u3002\n\n```bash\n$ sudo cp /etc/motion/motion.conf{,.orig}\n```\n\nmotion.conf\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n* [motion\u3067\u304a\u624b\u8efd\u76e3\u8996\u30ab\u30e1\u30e9\u3092\u3064\u304f\u308b](http://blog.hello-world.jp.net/raspberrypi/1949/)\n* [Motion \u3067\u30e9\u30a4\u30d6\u30ab\u30e1\u30e9+\u52d5\u4f53\u691c\u77e5\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9](http://debianj.com/ubuntu/webcam/motion)\n\n```bash:/etc/motion/motion.conf\nwidth 640             # \u5e45\nheight 480            # \u9ad8\u3055\nframerate 30          # \u30d5\u30ec\u30fc\u30e0\u30ec\u30fc\u30c8\u30011\u79d2\u9593\u306b\u64ae\u5f71\u3059\u308b\u679a\u6570\noutput_normal off     # \u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u3092\u4fdd\u5b58\u3057\u306a\u3044\nwebcam_localhost off  # \u30ed\u30fc\u30ab\u30eb\u30db\u30b9\u30c8\u4ee5\u5916\u3082\u30e9\u30a4\u30d6\u6620\u50cf\u3092\u914d\u4fe1\n```\n\n## Motion\u306e\u8d77\u52d5\n\n### \u30ce\u30f3\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\n\n\u30c6\u30b9\u30c8\u7528\u306bMotion\u3092non-daemon\u30e2\u30fc\u30c9\u3067\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo motion -n\n```\n\nRaspberry Pi\u306f\u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u4e0a\u306b\u3042\u308a\u307e\u3059\u3002\n\nhttp://192.168.128.203:8081/\n\n\u540c\u3058LAN\u306bOSX\u3092\u63a5\u7d9a\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u3092\u958b\u304d\u307e\u3059\u3002Chrome\u306f\u76f4\u63a5URL\u304b\u3089\u958b\u3051\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n* Chrome: x\n* Safari: \u25cb\n* Firefox: \u25cb\n\n### \u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\n\nMotion\u3092\u30c7\u30e2\u30ca\u30a4\u30ba\u3059\u308b\u5834\u5408\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306f2\u3064\u4fee\u6b63\u304c\u5fc5\u8981\u3067\u3059\u3002`/etc/default/motion`\u306e`start_motion_daemon`\u3092yes\u306b\u3057\u307e\u3059\u3002\n\n```bash:/etc/default/motion\n# set to 'yes' to enable the motion daemon\n#start_motion_daemon=no\nstart_motion_daemon=yes\n```\n\n`/etc/motion/motion.conf`\u306e`daemon`\u3092on\u306b\u3057\u307e\u3059\u3002\n\n```bash:/etc/motion/motion.conf\n# Start in daemon (background) mode and release terminal (default: off)\n#daemon off\ndaemon on\n```\n\n`/etc/init.d/motion`\u304c\u6709\u52b9\u306b\u306a\u308b\u306e\u3067Motion\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo service motion start\nStarting motion detection daemon: motion.\n```\n\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306ediff\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u7b87\u6240\u3092diff\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo diff -u motion.conf.orig motion.conf > /tmp/motion.diff\n```\n\n```diff:/tmp/motion.diff\n--- motion.conf.orig    2015-08-04 15:32:52.354807944 +0900\n+++ motion.conf 2015-08-05 12:56:32.980973204 +0900\n@@ -8,7 +8,8 @@\n ############################################################\n\n # Start in daemon (background) mode and release terminal (default: off)\n-daemon off\n+#daemon off\n+daemon on\n\n # File to store the process ID, also called pid file. (default: not defined)\n process_id_file /var/run/motion/motion.pid\n@@ -67,14 +68,17 @@\n rotate 0\n\n # Image width (pixels). Valid range: Camera dependent, default: 352\n-width 320\n+#width 320\n+width 640\n\n # Image height (pixels). Valid range: Camera dependent, default: 288\n-height 240\n+#height 240\n+height 480\n\n # Maximum number of frames to be captured per second.\n # Valid range: 2-100. Default: 100 (almost no limit).\n-framerate 2\n+#framerate 2\n+framerate 30\n\n # Minimum time in seconds between capturing picture frames from the camera.\n # Default: 0 = disabled - the capture rate is given by the camera framerate.\n@@ -224,7 +228,8 @@\n # Picture with most motion of an event is saved when set to 'best'.\n # Picture with motion nearest center of picture is saved when set to 'center'.\n # Can be used as preview shot for the corresponding movie.\n-output_normal on\n+#output_normal on\n+output_normal off\n\n # Output pictures with only the pixels moving object (ghost images) (default: off)\n output_motion off\n@@ -410,7 +415,8 @@\n webcam_maxrate 1\n\n # Restrict webcam connections to localhost only (default: on)\n-webcam_localhost on\n+#webcam_localhost on\n+webcam_localhost off\n\n # Limits the number of images per connection (default: 0 = unlimited)\n # Number can be defined by multiplying actual webcam rate by desired number of seconds\n```\n\n## ngrok\n\nngrok\u306e[\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](https://ngrok.com/download)\u30da\u30fc\u30b8\u304b\u3089Linux/ARM\u306e\u30d0\u30a4\u30ca\u30ea\u3092Raspberry Pi\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ wget https://dl.ngrok.com/ngrok_2.0.19_linux_arm.zip\n$ sudo unzip ngrok_2.0.19_linux_arm.zip -d /usr/local/bin\nArchive:  ngrok_2.0.19_linux_arm.zip\n  inflating: /usr/local/bin/ngrok\n$ ngrok version\nngrok version 2.0.19\n```\n\n\u6700\u521d\u306bngrok\u3092\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u8d77\u52d5\u3057\u3066\u30c6\u30b9\u30c8\u3057\u307e\u3059\u3002Motion\u306eHTTP\n\u306e8081\u30dd\u30fc\u30c8\u3092ngrok\u3092\u4f7f\u3063\u3066\u30c8\u30f3\u30cd\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ ngrok http 8081\n...\nForwarding                    http://0a08cc8b.ngrok.io -> localhost:8081\nForwarding                    https://0a08cc8b.ngrok.io -> localhost:8081\n```\n\nSafari\u304bFirefox\u3067\u958b\u3044\u3066Webcam\u306e\u52d5\u753b\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n![avocado-webcam.png](https://qiita-image-store.s3.amazonaws.com/0/43745/c2026267-0ee1-fa22-72f1-a6830c06371b.png)\n\n\n### Supervisor\n\n[Supervisor](http://supervisord.org/)\u3092\u4f7f\u3044ngrok\u306e\u30c8\u30f3\u30cd\u30eb\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7ba1\u7406\u3057\u307e\u3059\u3002\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e`command`\u884c\u306bngrok\u30b3\u30de\u30f3\u30c9\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002`--authtoken`\u30d5\u30e9\u30b0\u3068`-subdomain`\u30d5\u30e9\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002`-subdomain`\u30d5\u30e9\u30b0\u3067\u6307\u5b9a\u3059\u308b\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u540d\u306f[Reserved Tunnels](https://dashboard.ngrok.com/reserved)\u753b\u9762\u306eReserved Domain\u30bb\u30af\u30b7\u30e7\u30f3\u304b\u3089\u767b\u9332\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash:/etc/supervisor/conf.d/ngrok-webcam.conf\n[program:ngrok-webcam]\ncommand=/usr/local/bin/ngrok http --authtoken xxx -subdomain=xxx 8081\nnumprocs=1\nredirect_stderr=true\nstdout_logfile=/var/log/ngrok-webcam.log\nautorestart=true\nuser=pi\n```\n\nreread\u3057\u3066\u4f5c\u6210\u3057\u305f\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092Supervisor\u306b\u8aad\u307f\u8fbc\u307e\u305b\u307e\u3059\u3002\n\n```\n$ sudo supervisorctl reread\nngrok-webcam: available\n```\n\nadd\u3067Supervisor\u306e\u30b5\u30d6\u30d7\u30ed\u30bb\u30b9\u306bngrok\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n$ sudo supervisorctl add ngrok-webcam\nngrok-webcam: added process group\n$ sudo supervisorctl status ngrok-webcam\nngrok-webcam                       RUNNING    pid 30319, uptime 0:00:44\n```\n\nngrok\u306e[\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9](https://dashboard.ngrok.com/)\u306eTunnels Online\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u30c8\u30f3\u30cd\u30eb\u3057\u3066\u3044\u308bURL\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n![ngrok-webcam.png](https://qiita-image-store.s3.amazonaws.com/0/43745/50e11d70-f564-24d6-19b3-01d297e4c552.png)\n\nSafari\u304b\u3089\u3053\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068Motion\u304c\u914d\u4fe1\u3057\u3066\u3044\u308b\u52d5\u753b\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n## freeboard\u306b\u7d71\u5408\u3059\u308b\n\n[freeboard](https://github.com/Freeboard/freeboard)\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306bMotion\u306e\u52d5\u753b\u3092\u57cb\u3081\u8fbc\u3080\u3068\u3001Chrome\u3067\u3082\u8868\u793a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n### Pane\u306e\u8ffd\u52a0\n\nADD PANE\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Pane\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n![avocado-add-pane.png](https://qiita-image-store.s3.amazonaws.com/0/43745/b1465f3f-de72-c648-4d34-8aa8ee07c800.png)\n\n\nPane\u306e\u5de5\u5177\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Pane\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u540d\u524d\u306f\u300c\u30a2\u30dc\u30ab\u30c9\u30e9\u30a4\u30d6\u300d\u3068\u3064\u3051\u307e\u3057\u305f\u3002\n\n### Widget\u306e\u8ffd\u52a0\n\n\u6b21\u306bPane\u306e\u30d7\u30e9\u30b9\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Widget\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n![avocado-add-widget.png](https://qiita-image-store.s3.amazonaws.com/0/43745/2362d321-ea08-8ff0-9632-ddb61e10d91f.png)\n\nWidget\u306e\u30d7\u30e9\u30b9\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066Widget\u306e\u7de8\u96c6\u3092\u3057\u307e\u3059\u3002\u52d5\u753b\u306e\u30d5\u30ec\u30fc\u30e0\u753b\u50cf\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u5909\u66f4\u3055\u308c\u308b\u306e\u3067\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u306f\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u3057\u307e\u305b\u3093\u3002\n\n* TYPE: Picture\n* IMAGE URL: ngrok\u304c\u30c8\u30f3\u30cd\u30eb\u3057\u3066\u3044\u308bURL\n* REFRESH EVERY: 3600 (\u753b\u9762\u304c\u6d88\u3048\u308b\u306e\u3067\u305f\u307e\u306b\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u3059\u308b)\n\n![avocado-edit-widget.png](https://qiita-image-store.s3.amazonaws.com/0/43745/fdfcba1e-46e1-db1a-3f98-f1fb997c0886.png)\n\n### \u5b8c\u6210\n\nHubot\u306e\u30e9\u30a4\u30c8\u3092\u30aa\u30f3/\u30aa\u30d5\u3059\u308b\u30b3\u30de\u30f3\u30c9\u304c\u6b63\u3057\u304f\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u30e9\u30a4\u30d6\u6620\u50cf\u3067\u78ba\u8a8d\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n![avocado-live.png](https://qiita-image-store.s3.amazonaws.com/0/43745/4dc07e7a-3e18-5e26-602a-97adbff8f7cc.png)\n"}