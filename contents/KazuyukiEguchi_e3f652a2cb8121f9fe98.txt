{"context": " More than 1 year has passed since last update.Laird Technology\u793e\u88fd\u306eBLE\u30e2\u30b8\u30e5\u30fc\u30eb BL600-SA\u3092\u642d\u8f09\u3057\u305f\u300eFRISK\u30b1\u30fc\u30b9\u306b\u5165\u308bBL600\u57fa\u677f REBL600FR\u300f\u3092\u4f7f\u3063\u3066\u3001Eddystone\u5bfe\u5fdc\u306e\u30d3\u30fc\u30b3\u30f3\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\u672c\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001Eddystone UID,URL,TLM\u306e\uff13\u3064\u306e\u4fe1\u53f7\u3092\u4ea4\u4e92\u306b\u9001\u4fe1\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001SmartBASIC\u3067\u8a18\u8ff0\u3067\u304d\u3001UART\u7d4c\u7531\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u8ee2\u9001\u3067\u304d\u308b\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u5b9f\u9a13\u306b\u306f\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\n$autorun$.eddystone.Firmware.sb\n' BL600\u7528 Eddystone\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\n' Programed by Kazuyuki Eguchi\n\n DIM rc AS INTEGER\n DIM txpower AS INTEGER : txpower = 4\n\n DIM addr$ : addr$=\"\" \n DIM advRpt$\n DIM scnRpt$ : scnRpt$=\"\"  \n DIM adElmnt$ : adElmnt$=\"\\aa\\fe\"\n DIM devname$ : devname$=\"\"\n\n DIM flag AS INTEGER : flag = 0\n DIM adv AS INTEGER : adv = 0\n DIM tim AS INTEGER : tim = 0\n\n FUNCTION HandlerTimer0()\n    IF flag == 0 THEN\n        IF BleAdvertStop()==0 THEN\n        ENDIF\n\n        // Eddystone UID\n        DIM adElmnt1$ : adElmnt1$=\"\\aa\\fe\\00\\00\\00\\01\\02\\03\\04\\05\\06\\07\\08\\09\\0a\\0b\\0c\\0d\\0e\\0f\"\n\n        DIM power1 AS INTEGER : power1 = SYSINFO(2008)\n\n        IF power1 < 0 THEN\n            power1 = 256 + power1\n        ENDIF\n\n        rc = StrSetChr(adElmnt1$,power1 & 0xff,3)\n\n        rc = BleAdvRptInit(advRpt$, 2, 0, 0) \n        rc = BleAdvRptAppendAD(advRpt$,0x03,adElmnt$)\n        rc = BleAdvRptAppendAD(advRpt$,0x16,adElmnt1$)\n        rc = BleScanRptInit(scnRpt$)\n        rc = BleAdvRptAppendAD(scnRpt$,0x09,devname$)\n        rc = BleAdvRptsCommit(advRpt$,scnRpt$)\n\n        IF BleAdvertStart(3,addr$,500,0,0)==0 THEN\n        ELSE\n        ENDIF\n\n    ELSEIF flag == 2 THEN\n        IF BleAdvertStop()==0 THEN\n        ENDIF\n\n        // Eddystone URL\n        DIM adElmnt2$ : adElmnt2$=\"\\aa\\fe\\10\\00\\02eguchi.jp\"\n\n        DIM power2 AS INTEGER : power2 = SYSINFO(2008)\n\n        IF power2 < 0 THEN\n            power2 = 256 + power2\n        ENDIF\n\n        rc = StrSetChr(adElmnt2$,power2 & 0xff,3)\n\n        rc = BleAdvRptInit(advRpt$, 2, 0, 0) \n        rc = BleAdvRptAppendAD(advRpt$,0x03,adElmnt$)\n        rc = BleAdvRptAppendAD(advRpt$,0x16,adElmnt2$)\n        rc = BleScanRptInit(scnRpt$)\n        rc = BleAdvRptAppendAD(scnRpt$,0x09,devname$)\n        rc = BleAdvRptsCommit(advRpt$,scnRpt$)\n\n        IF BleAdvertStart(3,addr$,500,0,0)==0 THEN\n        ELSE\n        ENDIF\n\n    ELSEIF flag == 5 THEN\n        IF BleAdvertStop()==0 THEN\n        ENDIF\n\n        // Eddystone TLM\n        adv = adv + 10\n        tim = tim + 50\n\n        DIM adElmnt3$ : adElmnt3$=\"\\aa\\fe\\20\\00\\01\\00\\02\\00\\00\\00\\00\\00\\00\\00\\00\\00\"\n        DIM temp : temp = 0\n        DIM vol : vol = 3000 // mv\n\n        rc = StrSetChr(adElmnt3$,(vol & 0xff),5)\n        rc = StrSetChr(adElmnt3$,((vol >> 8) & 0xff),4)\n\n        rc = StrSetChr(adElmnt3$,(temp & 0xff),7)\n        rc = StrSetChr(adElmnt3$,((temp >> 8) & 0xff),6)\n\n        rc = StrSetChr(adElmnt3$,(adv & 0xff),11)\n        rc = StrSetChr(adElmnt3$,((adv >> 8) & 0xff),10)\n        rc = StrSetChr(adElmnt3$,((adv >> 16) & 0xff),9)\n        rc = StrSetChr(adElmnt3$,((adv >> 24) & 0xff),8)\n\n        rc = StrSetChr(adElmnt3$,(tim & 0xff),15)\n        rc = StrSetChr(adElmnt3$,((tim >> 8) & 0xff),14)\n        rc = StrSetChr(adElmnt3$,((tim >> 16) & 0xff),13)\n        rc = StrSetChr(adElmnt3$,((tim >> 24) & 0xff),12)\n\n        rc = BleAdvRptInit(advRpt$, 2, 0, 0) \n        rc = BleAdvRptAppendAD(advRpt$,0x03,adElmnt$)\n        rc = BleAdvRptAppendAD(advRpt$,0x16,adElmnt3$)\n        rc = BleScanRptInit(scnRpt$)\n        rc = BleAdvRptAppendAD(scnRpt$,0x09,devname$)\n        rc = BleAdvRptsCommit(advRpt$,scnRpt$)\n\n        IF BleAdvertStart(3,addr$,500,0,0)==0 THEN\n        ELSE\n        ENDIF\n\n    ENDIF\n\n    flag = flag + 1\n\n    IF flag > 5 THEN\n        flag = 0\n    ENDIF\n ENDFUNC 1 \n\n ONEVENT    EVTMR0  CALL    HandlerTimer0 \n\n rc = BleTxPowerSet(txpower)\n\n TimerStart(0,1000,1)\n\n PRINT \"\\nWaiting for Timer 0\\n\" \n\n WAITEVENT \n\n\n\u52d5\u4f5c\u3055\u305b\u308b\u3068\u3001\u516c\u5f0f\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306b\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\n\n\nLaird Technology\u793e\u88fd\u306eBLE\u30e2\u30b8\u30e5\u30fc\u30eb BL600-SA\u3092\u642d\u8f09\u3057\u305f\u300e[FRISK\u30b1\u30fc\u30b9\u306b\u5165\u308bBL600\u57fa\u677f REBL600FR](http://www.runele.com/ca1/24/)\u300f\u3092\u4f7f\u3063\u3066\u3001Eddystone\u5bfe\u5fdc\u306e\u30d3\u30fc\u30b3\u30f3\u3092\u4f5c\u3063\u3066\u307f\u305f\u3002\n\n\u672c\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u3001Eddystone UID,URL,TLM\u306e\uff13\u3064\u306e\u4fe1\u53f7\u3092\u4ea4\u4e92\u306b\u9001\u4fe1\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u3001SmartBASIC\u3067\u8a18\u8ff0\u3067\u304d\u3001UART\u7d4c\u7531\u3067\u30e2\u30b8\u30e5\u30fc\u30eb\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u8ee2\u9001\u3067\u304d\u308b\u306e\u3067\u3001\u3061\u3087\u3063\u3068\u3057\u305f\u5b9f\u9a13\u306b\u306f\u5411\u3044\u3066\u3044\u307e\u3059\u3002\n\n```basic:\\$autorun$.eddystone.Firmware.sb\n' BL600\u7528 Eddystone\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\n' Programed by Kazuyuki Eguchi\n\n DIM rc AS INTEGER\n DIM txpower AS INTEGER : txpower = 4\n \n DIM addr$ : addr$=\"\" \n DIM advRpt$\n DIM scnRpt$ : scnRpt$=\"\"  \n DIM adElmnt$ : adElmnt$=\"\\aa\\fe\"\n DIM devname$ : devname$=\"\"\n \n DIM flag AS INTEGER : flag = 0\n DIM adv AS INTEGER : adv = 0\n DIM tim AS INTEGER : tim = 0\n \n FUNCTION HandlerTimer0()\n\tIF flag == 0 THEN\n\t\tIF BleAdvertStop()==0 THEN\n\t\tENDIF\n\t\t\n\t\t// Eddystone UID\n\t\tDIM adElmnt1$ : adElmnt1$=\"\\aa\\fe\\00\\00\\00\\01\\02\\03\\04\\05\\06\\07\\08\\09\\0a\\0b\\0c\\0d\\0e\\0f\"\n\t\t\n\t\tDIM power1 AS INTEGER : power1 = SYSINFO(2008)\n\t\t\n\t\tIF power1 < 0 THEN\n\t\t\tpower1 = 256 + power1\n\t\tENDIF\n\t\t\n\t\trc = StrSetChr(adElmnt1$,power1 & 0xff,3)\n\t\t\n\t\trc = BleAdvRptInit(advRpt$, 2, 0, 0) \n\t\trc = BleAdvRptAppendAD(advRpt$,0x03,adElmnt$)\n\t\trc = BleAdvRptAppendAD(advRpt$,0x16,adElmnt1$)\n\t\trc = BleScanRptInit(scnRpt$)\n\t\trc = BleAdvRptAppendAD(scnRpt$,0x09,devname$)\n\t\trc = BleAdvRptsCommit(advRpt$,scnRpt$)\n\t\n\t\tIF BleAdvertStart(3,addr$,500,0,0)==0 THEN\n\t\tELSE\n\t\tENDIF\n\t\t\n\tELSEIF flag == 2 THEN\n\t\tIF BleAdvertStop()==0 THEN\n\t\tENDIF\n\n\t\t// Eddystone URL\n\t\tDIM adElmnt2$ : adElmnt2$=\"\\aa\\fe\\10\\00\\02eguchi.jp\"\n\t\t\n\t\tDIM power2 AS INTEGER : power2 = SYSINFO(2008)\n\t\t\n\t\tIF power2 < 0 THEN\n\t\t\tpower2 = 256 + power2\n\t\tENDIF\n\t\t\n\t\trc = StrSetChr(adElmnt2$,power2 & 0xff,3)\n\t\t \n\t\trc = BleAdvRptInit(advRpt$, 2, 0, 0) \n\t\trc = BleAdvRptAppendAD(advRpt$,0x03,adElmnt$)\n\t\trc = BleAdvRptAppendAD(advRpt$,0x16,adElmnt2$)\n\t\trc = BleScanRptInit(scnRpt$)\n\t\trc = BleAdvRptAppendAD(scnRpt$,0x09,devname$)\n\t\trc = BleAdvRptsCommit(advRpt$,scnRpt$)\n\t\n\t\tIF BleAdvertStart(3,addr$,500,0,0)==0 THEN\n\t\tELSE\n\t\tENDIF\n\t\t\n\tELSEIF flag == 5 THEN\n\t\tIF BleAdvertStop()==0 THEN\n\t\tENDIF\n\n\t\t// Eddystone TLM\n\t\tadv = adv + 10\n\t\ttim = tim + 50\n\t\t\n\t\tDIM adElmnt3$ : adElmnt3$=\"\\aa\\fe\\20\\00\\01\\00\\02\\00\\00\\00\\00\\00\\00\\00\\00\\00\"\n\t\tDIM temp : temp = 0\n\t\tDIM vol : vol = 3000 // mv\n\t\t\n\t\trc = StrSetChr(adElmnt3$,(vol & 0xff),5)\n\t\trc = StrSetChr(adElmnt3$,((vol >> 8) & 0xff),4)\n\n\t\trc = StrSetChr(adElmnt3$,(temp & 0xff),7)\n\t\trc = StrSetChr(adElmnt3$,((temp >> 8) & 0xff),6)\n\t\t\n\t\trc = StrSetChr(adElmnt3$,(adv & 0xff),11)\n\t\trc = StrSetChr(adElmnt3$,((adv >> 8) & 0xff),10)\n\t\trc = StrSetChr(adElmnt3$,((adv >> 16) & 0xff),9)\n\t\trc = StrSetChr(adElmnt3$,((adv >> 24) & 0xff),8)\n\t\t\n\t\trc = StrSetChr(adElmnt3$,(tim & 0xff),15)\n\t\trc = StrSetChr(adElmnt3$,((tim >> 8) & 0xff),14)\n\t\trc = StrSetChr(adElmnt3$,((tim >> 16) & 0xff),13)\n\t\trc = StrSetChr(adElmnt3$,((tim >> 24) & 0xff),12)\n\t\t\n\t\trc = BleAdvRptInit(advRpt$, 2, 0, 0) \n\t\trc = BleAdvRptAppendAD(advRpt$,0x03,adElmnt$)\n\t\trc = BleAdvRptAppendAD(advRpt$,0x16,adElmnt3$)\n\t\trc = BleScanRptInit(scnRpt$)\n\t\trc = BleAdvRptAppendAD(scnRpt$,0x09,devname$)\n\t\trc = BleAdvRptsCommit(advRpt$,scnRpt$)\n\t\n\t\tIF BleAdvertStart(3,addr$,500,0,0)==0 THEN\n\t\tELSE\n\t\tENDIF\n\n\tENDIF\n\t\n\tflag = flag + 1\n\t\n\tIF flag > 5 THEN\n\t\tflag = 0\n\tENDIF\n ENDFUNC 1 \n  \n ONEVENT\tEVTMR0\tCALL\tHandlerTimer0 \n \n rc = BleTxPowerSet(txpower)\n \n TimerStart(0,1000,1)\n \n PRINT \"\\nWaiting for Timer 0\\n\" \n \n WAITEVENT \n```\n\n\u52d5\u4f5c\u3055\u305b\u308b\u3068\u3001\u516c\u5f0f\u306e\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u306b\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u3002\n\n![Screenshot_20150729-142043.png](https://qiita-image-store.s3.amazonaws.com/0/33220/6bcdf8d9-7b20-ba3d-807a-a14ba0ad4901.png)\n", "tags": ["eddystone", "bluetooth", "BASIC", "BL600"]}