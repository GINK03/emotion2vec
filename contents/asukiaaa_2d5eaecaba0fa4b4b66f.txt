{"context": " More than 1 year has passed since last update.webpay\u306e\u66f8\u304d\u65b9\u304c\u5909\u308f\u3063\u3066\u3044\u3066\u3001undefined method\u306b\u56f0\u3089\u3055\u308c\u305f\u306e\u3067\u3001\u3053\u3053\u3067\u73fe\u6642\u70b9\uff082014/09/03\uff09\u3067\u306e\u65b9\u6cd5\u3092\u5171\u6709\u3057\u307e\u3059\u3002\n\n\u8a18\u8ff0\u65b9\u6cd5\n\u6ce8\u610f\u70b9\u4ee5\u5916\u306f\u57fa\u672c\u7684\u306b\u3053\u3053\u3068\u540c\u3058\u3067\u3059\u3002\n\u4eca\u56de\u306fpayment\u3068\u3044\u3046\u30af\u30e9\u30b9\u3067\u652f\u6255\u3046\u3092\u884c\u3046\u5834\u5408\u3092\u4f8b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n\u6ce8\u610f\u70b9\n\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u3044\u308b\u3068\u3001\nWebPay.api_key = \"WEBPAY_API_KEY\"\n\n\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\nundefined method `api_key=' for WebPay:Class\n\n\u6b63\u3057\u304f\u306f\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002\nwebpay = WebPay.new(WEBPAY_API_KEY)\n\n\n\u5b9f\u30b3\u30fc\u30c9\n\nGemfile\ngem 'webpay'\n\n\n\nconfig/initializers/setting.rb\nWEBPAY_PUBLIC_KEY = '  ***  ' #\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u516c\u958b\u9375\nWEBPAY_SECRET_KEY = '  ***  ' #\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u79d8\u5bc6\u9375\n\n\n\napp/controller/payments_controller.rb\n  def create\n    webpay = WebPay.new(WEBPAY_SECRET_KEY)\n    charge = webpay.charge.create(currency: 'jpy', amount: 4000, card: params['webpay-token'])\n    flash.now[:notice] = '\u652f\u6255\u3044\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f'\n    redirect_to action: :show\n  end\n\n\n\napp/views/payments/new.html.haml\n= form_for payments_path, method: :post do\n  %script(src=\"https://checkout.webpay.jp/v2/\" class=\"webpay-button\" data-key=\"#{WEBPAY_PUBLIC_KEY}\" data-lang=\"ja\" data-partial=\"true\")\n  =  submit_tag 'send'\n\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\u8ab0\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\n\u53c2\u8003\nhttp://tech.creofuga.jp/?p=264\nhttps://webpay.jp/docs/api/ruby#recursions\nwebpay\u306e\u66f8\u304d\u65b9\u304c\u5909\u308f\u3063\u3066\u3044\u3066\u3001undefined method\u306b\u56f0\u3089\u3055\u308c\u305f\u306e\u3067\u3001\u3053\u3053\u3067\u73fe\u6642\u70b9\uff082014/09/03\uff09\u3067\u306e\u65b9\u6cd5\u3092\u5171\u6709\u3057\u307e\u3059\u3002\n\n\n#\u8a18\u8ff0\u65b9\u6cd5\n\n\u6ce8\u610f\u70b9\u4ee5\u5916\u306f\u57fa\u672c\u7684\u306b[\u3053\u3053](http://tech.creofuga.jp/?p=264)\u3068\u540c\u3058\u3067\u3059\u3002\n\u4eca\u56de\u306fpayment\u3068\u3044\u3046\u30af\u30e9\u30b9\u3067\u652f\u6255\u3046\u3092\u884c\u3046\u5834\u5408\u3092\u4f8b\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n\n##\u6ce8\u610f\u70b9\n\n\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u3044\u308b\u3068\u3001\n\n````\nWebPay.api_key = \"WEBPAY_API_KEY\"\n````\n\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\n\n````\nundefined method `api_key=' for WebPay:Class\n````\n\n\u6b63\u3057\u304f\u306f\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u307e\u3059\u3002\n\n````\nwebpay = WebPay.new(WEBPAY_API_KEY)\n````\n\n##\u5b9f\u30b3\u30fc\u30c9\n\n````none:Gemfile\ngem 'webpay'\n````\n\n````config/initializers/setting.rb\nWEBPAY_PUBLIC_KEY = '  ***  ' #\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u516c\u958b\u9375\nWEBPAY_SECRET_KEY = '  ***  ' #\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u79d8\u5bc6\u9375\n````\n\n````app/controller/payments_controller.rb\n  def create\n    webpay = WebPay.new(WEBPAY_SECRET_KEY)\n    charge = webpay.charge.create(currency: 'jpy', amount: 4000, card: params['webpay-token'])\n    flash.now[:notice] = '\u652f\u6255\u3044\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f'\n    redirect_to action: :show\n  end\n````\n\n````app/views/payments/new.html.haml\n= form_for payments_path, method: :post do\n  %script(src=\"https://checkout.webpay.jp/v2/\" class=\"webpay-button\" data-key=\"#{WEBPAY_PUBLIC_KEY}\" data-lang=\"ja\" data-partial=\"true\")\n  =  submit_tag 'send'\n````\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n\u8ab0\u304b\u306e\u53c2\u8003\u306b\u306a\u308c\u3070\u5e78\u3044\u3067\u3059\u3002\n\n#\u53c2\u8003\nhttp://tech.creofuga.jp/?p=264\nhttps://webpay.jp/docs/api/ruby#recursions\n", "tags": ["Rails4", "webpay3"]}