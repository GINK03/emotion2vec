{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nJUnit\u3092\u4f7f\u7528\u3057\u3066\u3001\u30e1\u30bd\u30c3\u30c9\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3046\u3068\u304d\n\u5bfe\u8c61\u3068\u306a\u308b\u30e1\u30bd\u30c3\u30c9\u5185\u3067\u5225\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308b\n\u3053\u306e\u5225\u30af\u30e9\u30b9\u3092\u3001\u3069\u3046\u3057\u3066\u3082Mock\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u4e0b\u8a18\u306e\u624b\u9806\u3067\u884c\u3046\u3002\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\njava\u30001.8\njunit\u30004.1.2\nMockito\u30001.10.19\nPowerMock\u30001.6.2\n\n\u4e0b\u8a18\u30b5\u30a4\u30c8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttps://code.google.com/p/powermock/wiki/Downloads\n\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30af\u30e9\u30b9\n\nTaisyou.java\npackage sample;\n\npublic class Taisyou {\n\n    public String search() {\n        Util util = new Util();\n\n        return util.get();\n    }\n}\n\n\n\nUtil.java\npackage sample;\n\npublic class Util {\n\n    public String get() {\n        return \"Util get\";\n    }\n}\n\n\n\nTaisyou\u30af\u30e9\u30b9\u306esearch\u30e1\u30bd\u30c3\u30c9\u3067\u3001Util\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u547c\u3073\u51fa\u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3044\u308b\n\u3053\u306e\u3088\u3046\u306a\u3001\u30e1\u30bd\u30c3\u30c9\u5185\u3067\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u623b\u308a\u5024\u3092Mock\u306b\u7f6e\u304d\u63db\u3048\u3066\u30c6\u30b9\u30c8\u3092\u3057\u305f\u3044\u3002\n\n\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\n\nUtilTest.java\npackage sample;\n\nimport org.junit.Assert;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest({Taisyou.class})\npublic class TaisyouTest {\n\n    /** \u30c6\u30b9\u30c8\u5bfe\u8c61 */\n    private Taisyou taisyou;\n\n    /**\n     * \u521d\u671f\u51e6\u7406\n     */\n    @Before\n    public void setup() {\n        this.taisyou = new Taisyou();\n    }\n\n    /**\n     * \u30c6\u30b9\u30c8\n     */\n    @Test\n    public void searchTest() throws Exception {\n        // \u30c6\u30b9\u30c8\u5bfe\u8c61\u30e1\u30bd\u30c3\u30c9\u5185\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u8fd4\u3059\u30e2\u30c3\u30af\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\n        Util mock = Mockito.mock(Util.class);\n        Mockito.doReturn(\"test\").when(mock).get();\n\n        // Util\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u8fd4\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30e2\u30c3\u30af\u306b\u5909\u66f4\n        PowerMockito.whenNew(Util.class).withNoArguments().thenReturn(mock );\n\n        // \u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u5b9f\u884c\n        String result = this.taisyou.search();\n\n        // \u8a55\u4fa1\n        Assert.assertSame(result, \"test\");\n    }\n}\n\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u507d\u88c5\n\nPowerMockito.whenNew(Util.class).withNoArguments().thenReturn(mock);\n\nwhenNew(Util.class)\u3000\u3067\u5bfe\u8c61\u306e\u30af\u30e9\u30b9\u3092\u6307\u5b9a\nwithNoArguments()\u3000\u306f\u5f15\u6570\u306a\u3057\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u5834\u5408\n\u3000\u203b\u5f15\u6570\u3042\u308a\u306e\u5834\u5408\u306f\u3001withArguments(anyString())\u3000\u306a\u3069\u3068\u3059\u308b\nthenReturn(mock)\u3000\u8fd4\u5374\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n#\u6982\u8981\nJUnit\u3092\u4f7f\u7528\u3057\u3066\u3001\u30e1\u30bd\u30c3\u30c9\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3046\u3068\u304d\n\u5bfe\u8c61\u3068\u306a\u308b\u30e1\u30bd\u30c3\u30c9\u5185\u3067\u5225\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3044\u308b\u5834\u5408\u304c\u3042\u308b\n\u3053\u306e\u5225\u30af\u30e9\u30b9\u3092\u3001\u3069\u3046\u3057\u3066\u3082Mock\u306b\u3057\u305f\u3044\u5834\u5408\u306f\u4e0b\u8a18\u306e\u624b\u9806\u3067\u884c\u3046\u3002\n\n\n#\u30d0\u30fc\u30b8\u30e7\u30f3\n- java\u30001.8\n- junit\u30004.1.2\n- Mockito\u30001.10.19\n- PowerMock\u30001.6.2\n\n\u4e0b\u8a18\u30b5\u30a4\u30c8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nhttps://code.google.com/p/powermock/wiki/Downloads\n\n\n#\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30af\u30e9\u30b9\n```lang:Taisyou.java\npackage sample;\n\npublic class Taisyou {\n\n\tpublic String search() {\n\t\tUtil util = new Util();\n\n\t\treturn util.get();\n\t}\n}\n```\n```lang:Util.java\npackage sample;\n\npublic class Util {\n\n\tpublic String get() {\n\t\treturn \"Util get\";\n\t}\n}\n\n```\nTaisyou\u30af\u30e9\u30b9\u306esearch\u30e1\u30bd\u30c3\u30c9\u3067\u3001Util\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u547c\u3073\u51fa\u3057\u3066\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u3066\u3044\u308b\n\u3053\u306e\u3088\u3046\u306a\u3001\u30e1\u30bd\u30c3\u30c9\u5185\u3067\u5b9f\u884c\u3055\u308c\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u623b\u308a\u5024\u3092Mock\u306b\u7f6e\u304d\u63db\u3048\u3066\u30c6\u30b9\u30c8\u3092\u3057\u305f\u3044\u3002\n\n# \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\n\n```lang:UtilTest.java\npackage sample;\n\nimport org.junit.Assert;\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito;\nimport org.powermock.api.mockito.PowerMockito;\nimport org.powermock.core.classloader.annotations.PrepareForTest;\nimport org.powermock.modules.junit4.PowerMockRunner;\n\n@RunWith(PowerMockRunner.class)\n@PrepareForTest({Taisyou.class})\npublic class TaisyouTest {\n\n\t/** \u30c6\u30b9\u30c8\u5bfe\u8c61 */\n\tprivate Taisyou taisyou;\n\n\t/**\n\t * \u521d\u671f\u51e6\u7406\n\t */\n\t@Before\n\tpublic void setup() {\n\t\tthis.taisyou = new Taisyou();\n\t}\n\n\t/**\n\t * \u30c6\u30b9\u30c8\n\t */\n\t@Test\n\tpublic void searchTest() throws Exception {\n\t\t// \u30c6\u30b9\u30c8\u5bfe\u8c61\u30e1\u30bd\u30c3\u30c9\u5185\u3067\u547c\u3073\u51fa\u3055\u308c\u308b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u8fd4\u3059\u30e2\u30c3\u30af\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u751f\u6210\n\t\tUtil mock = Mockito.mock(Util.class);\n\t\tMockito.doReturn(\"test\").when(mock).get();\n\n\t\t// Util\u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u8fd4\u3055\u308c\u308b\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u30e2\u30c3\u30af\u306b\u5909\u66f4\n\t\tPowerMockito.whenNew(Util.class).withNoArguments().thenReturn(mock );\n\n\t\t// \u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u5b9f\u884c\n\t\tString result = this.taisyou.search();\n\n\t\t// \u8a55\u4fa1\n\t\tAssert.assertSame(result, \"test\");\n\t}\n}\n```\n\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3092\u507d\u88c5\n>PowerMockito.whenNew(Util.class).withNoArguments().thenReturn(mock);\n\nwhenNew(Util.class)\u3000\u3067\u5bfe\u8c61\u306e\u30af\u30e9\u30b9\u3092\u6307\u5b9a\nwithNoArguments()\u3000\u306f\u5f15\u6570\u306a\u3057\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306e\u5834\u5408\n\u3000\u203b\u5f15\u6570\u3042\u308a\u306e\u5834\u5408\u306f\u3001withArguments(anyString())\u3000\u306a\u3069\u3068\u3059\u308b\nthenReturn(mock)\u3000\u8fd4\u5374\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n", "tags": ["JUnit", "PowerMock"]}