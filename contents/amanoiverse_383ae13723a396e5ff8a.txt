{"context": " More than 1 year has passed since last update.emacs \u306e major-mode \u307f\u3066\u3001perltify \u3064\u304b\u3063\u305f\u308a js-beautify \u3064\u304b\u3063\u305f\u308a\u3092\u81ea\u52d5\u3067\u5206\u3051\u308b\u3002\n(defun my-tidy-region (begin end)\n  (interactive \"r\")\n  (save-match-data\n    (save-restriction\n      (my-tidy begin end)\n      )))\n\n(defun my-tidy-buffer ()\n  (interactive)\n  (let (cpoint)\n    (setq cpoint (point))\n    (save-excursion\n      (save-match-data\n        (save-restriction\n          (mark-whole-buffer)\n          (my-tidy (point-min) (point-max)))))\n    (goto-char cpoint)\n    ))\n\n(defun my-tidy (begin end)\n  (let ((current-major-mode major-mode) cmd)\n    (setenv \"LC_ALL\" \"C\")\n    (setenv \"LANG\" \"C\")\n    (message (format \"%s\" current-major-mode))\n    (cond\n     ((string= \"cperl-mode\" current-major-mode) (setq cmd \"perltidy -q\"))\n     ((string= \"js3-mode\" current-major-mode) (setq cmd \"js-beautify.js -f - --good-stuff\"))\n     )\n    (if (not (null cmd))\n        (shell-command-on-region begin end cmd nil t)\n      (progn (indent-region begin end)\n             (delete-trailing-whitespace)\n             (delete-blank-lines)\n             (untabify (point-min) (point-max))\n             )\n      )))\n\n\nemacs \u306e major-mode \u307f\u3066\u3001perltify \u3064\u304b\u3063\u305f\u308a js-beautify \u3064\u304b\u3063\u305f\u308a\u3092\u81ea\u52d5\u3067\u5206\u3051\u308b\u3002\n\n\n```el\n(defun my-tidy-region (begin end)\n  (interactive \"r\")\n  (save-match-data\n    (save-restriction\n      (my-tidy begin end)\n      )))\n\n(defun my-tidy-buffer ()\n  (interactive)\n  (let (cpoint)\n    (setq cpoint (point))\n    (save-excursion\n      (save-match-data\n        (save-restriction\n          (mark-whole-buffer)\n          (my-tidy (point-min) (point-max)))))\n    (goto-char cpoint)\n    ))\n\n(defun my-tidy (begin end)\n  (let ((current-major-mode major-mode) cmd)\n    (setenv \"LC_ALL\" \"C\")\n    (setenv \"LANG\" \"C\")\n    (message (format \"%s\" current-major-mode))\n    (cond\n     ((string= \"cperl-mode\" current-major-mode) (setq cmd \"perltidy -q\"))\n     ((string= \"js3-mode\" current-major-mode) (setq cmd \"js-beautify.js -f - --good-stuff\"))\n     )\n    (if (not (null cmd))\n        (shell-command-on-region begin end cmd nil t)\n      (progn (indent-region begin end)\n             (delete-trailing-whitespace)\n             (delete-blank-lines)\n             (untabify (point-min) (point-max))\n             )\n      )))\n\n```\n", "tags": ["Emacs", "elisp"]}