{"context": "\nmain.tf\nresource \"aws_vpc\" \"main\" {\n    cidr_block = \"${var.main_cidr}\"\n    enable_dns_hostnames = true\n}\nresource \"aws_subnet\" \"main\" {\n    vpc_id = \"${aws_vpc.main.id}\"\n    cidr_block = \"${var.main_subnet.cidrs[count.index]}\"\n    availability_zone = \"${var.main_subnet.availability_zones[count.index]}\"\n    map_public_ip_on_launch = true\n    count = \"${length(var.main_subnet.cidrs)}\"\n}\nvariable \"main_cidr\" {\n    description = \"AWS vpc main cidr\"\n}\nvariable \"main_subnet_cidrs\" {\n    type = \"list\"\n}\nvariable \"main_subnet_availability_zones\" {\n    type = \"list\"\n}\n\n\n\nterraform.tfvars\nmain_cidr = \"172.17.0.0/16\"\nmain_subnet.cidrs = [\"172.17.0.0/20\",\"172.17.16.0/20\"]\nmain_subnet.availability_zones = [\"us-east-1b\",\"us-east-1e\"]\n\n\n\u3053\u308c\u3067vpc_subnet\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306a\u3068\u304d\u306b\u4e00\u3064\u306e\u5024\u3067\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n# aws_elb\u306esubnets\u3068\u304b\n subnets = [\"${aws_subnet.main.*.id}\"]\n# autoscaling_group\u306evpc_zone_identifier\u3068\u304b\n vpc_zone_identifier = [\"${aws_subnet.main.*.id}\"]\n# count\u3092\u4f7f\u3063\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306esubnet\u3092\u4ea4\u4e92\u306b\u9078\u629e\u3055\u305b\u308b\u3068\u304b\n  subnet_id = \"${element(aws_subnet.main.*.id, count.index%length(aws_subnet.main.*.id))}\"\n\n\n\n```main.tf\nresource \"aws_vpc\" \"main\" {\n    cidr_block = \"${var.main_cidr}\"\n    enable_dns_hostnames = true\n}\nresource \"aws_subnet\" \"main\" {\n    vpc_id = \"${aws_vpc.main.id}\"\n    cidr_block = \"${var.main_subnet.cidrs[count.index]}\"\n    availability_zone = \"${var.main_subnet.availability_zones[count.index]}\"\n    map_public_ip_on_launch = true\n    count = \"${length(var.main_subnet.cidrs)}\"\n}\nvariable \"main_cidr\" {\n    description = \"AWS vpc main cidr\"\n}\nvariable \"main_subnet_cidrs\" {\n    type = \"list\"\n}\nvariable \"main_subnet_availability_zones\" {\n    type = \"list\"\n}\n```\n\n```terraform.tfvars\nmain_cidr = \"172.17.0.0/16\"\nmain_subnet.cidrs = [\"172.17.0.0/20\",\"172.17.16.0/20\"]\nmain_subnet.availability_zones = [\"us-east-1b\",\"us-east-1e\"]\n```\n\n\u3053\u308c\u3067vpc_subnet\u3092\u53c2\u7167\u3059\u308b\u3088\u3046\u306a\u3068\u304d\u306b\u4e00\u3064\u306e\u5024\u3067\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n\n```\n# aws_elb\u306esubnets\u3068\u304b\n subnets = [\"${aws_subnet.main.*.id}\"]\n# autoscaling_group\u306evpc_zone_identifier\u3068\u304b\n vpc_zone_identifier = [\"${aws_subnet.main.*.id}\"]\n# count\u3092\u4f7f\u3063\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306esubnet\u3092\u4ea4\u4e92\u306b\u9078\u629e\u3055\u305b\u308b\u3068\u304b\n  subnet_id = \"${element(aws_subnet.main.*.id, count.index%length(aws_subnet.main.*.id))}\"\n```\n", "tags": ["Terraform0.7.2"]}