{"context": " More than 1 year has passed since last update.\u7def\u5ea6\u7d4c\u5ea6\u4ed8\u304d\u30c7\u30fc\u30bf\u3092\u5165\u308c\u305f\u5f8c\u306bGeometory\u578b\u306b\u3059\u308b\u3068\u304d\u306eSQL\u3067\u3088\u304f\u5fd8\u308c\u308b\u306e\u3067\u30e1\u30e2\u3002\nSELECT AddGeometryColumn('schema','table','geom',4326, 'POINT', 2);\n\u3082\u3057\u304f\u306f\nALTER TABLE schema.table ADD geom GEOMETRY(POINT,4326);\n\u305d\u306e\u5f8cGeometory\u578b\u306e\u30c7\u30fc\u30bf\u3092\u4f5c\u308b\u305f\u3081\nUPDATE schema.table SET geom=ST_GeometryFromText('SRID=4326;POINT('||lng||' '||lat||')')\n\u3067Geometory\u578b\u306e\u30c7\u30fc\u30bf\u304c\u4f5c\u3089\u308c\u308b\u3002\uff08lat\u3068lng\u306f\u30ab\u30e9\u30e0\u540d\uff09\n\u3042\u3068\u306f\nSELECT * FROM schema.table \nWHERE ST_DWithin(geom, ST_GeomFromText('POINT(135 35)', 4326), 500, true)\nLIMIT 100;\n\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u7def\u5ea6\u7d4c\u5ea6\uff0835,135\uff09\u306e\u4f4d\u7f6e\u3067500m\u4ee5\u5185\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\nindex\u3092\u4f5c\u308b\u306b\u306f\nCREATE INDEX indexname ON schema.table USING GIST (geom);\n\u3042\u3068\u672c\u984c\u3068\u9055\u3046\u3051\u3069PostGIS\u3092Mac\u3067Python\u304b\u3089\u4f7f\u3046\u306e\u306bPsycopg2\u3092\u4f7f\u3046\u305f\u3081\u306e\u30e1\u30e2\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fpip\u3067\u3067\u304d\u308b\u304c\u5c11\u3057\u3060\u3051\u306f\u307e\u3063\u305f\u306e\u3067\npip install psycopg2\n\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3068\u3042\u308b\u304c\u3001PATH\u306bPostgres\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u306a\u3044\u3068\nError: pg_config executable not found.\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u3002PATH\u8a2d\u5b9a\u306f\n$ export PATH=/usr/lib/postgresql/X.Y/bin/:$PATH\nsource ~/.bash_profile\n\u7def\u5ea6\u7d4c\u5ea6\u4ed8\u304d\u30c7\u30fc\u30bf\u3092\u5165\u308c\u305f\u5f8c\u306bGeometory\u578b\u306b\u3059\u308b\u3068\u304d\u306eSQL\u3067\u3088\u304f\u5fd8\u308c\u308b\u306e\u3067\u30e1\u30e2\u3002\n\n`SELECT AddGeometryColumn('schema','table','geom',4326, 'POINT', 2);`\n\u3082\u3057\u304f\u306f\n`ALTER TABLE schema.table ADD geom GEOMETRY(POINT,4326);`\n\u305d\u306e\u5f8cGeometory\u578b\u306e\u30c7\u30fc\u30bf\u3092\u4f5c\u308b\u305f\u3081\n`UPDATE schema.table SET geom=ST_GeometryFromText('SRID=4326;POINT('||lng||' '||lat||')')`\n\u3067Geometory\u578b\u306e\u30c7\u30fc\u30bf\u304c\u4f5c\u3089\u308c\u308b\u3002\uff08lat\u3068lng\u306f\u30ab\u30e9\u30e0\u540d\uff09\n\n\u3042\u3068\u306f\n`SELECT * FROM schema.table \nWHERE ST_DWithin(geom, ST_GeomFromText('POINT(135 35)', 4326), 500, true)\nLIMIT 100;`\n\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u7def\u5ea6\u7d4c\u5ea6\uff0835,135\uff09\u306e\u4f4d\u7f6e\u3067500m\u4ee5\u5185\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\nindex\u3092\u4f5c\u308b\u306b\u306f\n`CREATE INDEX indexname ON schema.table USING GIST (geom);`\n\n\n\u3042\u3068\u672c\u984c\u3068\u9055\u3046\u3051\u3069PostGIS\u3092Mac\u3067Python\u304b\u3089\u4f7f\u3046\u306e\u306bPsycopg2\u3092\u4f7f\u3046\u305f\u3081\u306e\u30e1\u30e2\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306fpip\u3067\u3067\u304d\u308b\u304c\u5c11\u3057\u3060\u3051\u306f\u307e\u3063\u305f\u306e\u3067\n`pip install psycopg2`\n\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3068\u3042\u308b\u304c\u3001PATH\u306bPostgres\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u306a\u3044\u3068\n`Error: pg_config executable not found.`\n\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u3002PATH\u8a2d\u5b9a\u306f\n`$ export PATH=/usr/lib/postgresql/X.Y/bin/:$PATH`\n`source ~/.bash_profile`\n", "tags": ["PostGIS", "psycopg2"]}