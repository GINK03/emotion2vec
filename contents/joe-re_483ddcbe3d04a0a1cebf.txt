{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u6700\u8fd1Mithril.js\u3067\u904a\u3093\u3067\u3044\u308b\u3002\nMithril.js\u306f\u6700\u8fd1\u6d41\u884c\u308a\u306eReact\u3068\u540c\u3058\u4eee\u60f3DOM\u306a\u5b9f\u88c5\u306ejs\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\u3068\u306b\u304b\u304f\u901f\u5ea6\u304c\u7206\u901f\u3067\u3001React\u306e5\u500d\u901f\u3044\u3089\u3057\u3044\u3002\n\u2193\u306e\u8a18\u4e8b\u304c\u3059\u3054\u304f\u5206\u304b\u308a\u3084\u3059\u3044\u3002(\u50d5\u304c\u3084\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u304d\u3063\u304b\u3051\u3082\u3053\u306e\u8a18\u4e8b\u3067\u3057\u305f\u3002)\n\u6700\u901fMVC\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30afMithril.js\u306e\u901f\u5ea6\u306e\u79d8\u5bc6 - Qiita\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u306b\u3082\u66f8\u3044\u3066\u3042\u308b\u3051\u3069\u3001Mithril\u306fredraw\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u5c11\u3057\u7279\u6b8a\u3067\u3001\u305d\u308c\u304c\u9ad8\u901f\u5316\u306e\u4e00\u7aef\u3092\u62c5\u3063\u3066\u3044\u308b\u3002\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30d7\u30ec\u30d3\u30e5\u30fc\u3059\u308b\u5b9f\u88c5\u3092\u3057\u3066\u307f\u3066\u3001\u305d\u306e\u8fba\u304c\u7406\u89e3\u3067\u304d\u305f\u306e\u3067\u7d39\u4ecb\u3002\n\n\u74b0\u5883\n\nMithril.js 0.2\n\n\n\u8cc7\u6599\nauto-redraw\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u95a2\u3059\u308b\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\n\n\u30b3\u30fc\u30c9\nhttp://jsfiddle.net/k0Lu22fm/2/\nimageView = {}\nimageView.vm =\n  init: ->\n    @image = m.prop(null)\n    @fileChange = (e) =>\n      file = e.target.files[0]\n      unless file?\n        @image(null)\n        return\n      fr = new FileReader\n      fr.readAsDataURL(file)\n      m.startComputation()\n      fr.onload = (event) =>\n        @image(event.target.result)\n        m.endComputation()\n\nimageView.controller = -> imageView.vm.init()\n\nimageView.view = ->\n  m('div', [\n    m('div', [\n      m('input[type=file]', {onchange: imageView.vm.fileChange})\n    ])\n    m('img', src: imageView.vm.image()) if imageView.vm.image()?\n  ])\n\nm.mount(document.getElementById('image-view'), {controller: imageView.controller, view: imageView.view})\n\n\n\u89e3\u8aac\nMithril\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fcontroller\u306einitialize\u304c\u8d70\u3063\u305f\u6642\u304b\u3001\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3057\u305f\u6642\u306bauto-redraw\u3055\u308c\u308b\u3002\nReact\u3067\u306fstate\u3068\u3044\u3046\u6982\u5ff5\u304c\u3042\u3063\u3066\u3001setState\u30e1\u30bd\u30c3\u30c9\u3067\u72b6\u614b\u304c\u5909\u66f4\u3055\u308c\u305f\u6642\u306b\u518drender\u304c\u8d70\u308b\u308f\u3051\u3060\u3051\u3069\u3001Mithril\u306e\u30d7\u30ed\u30d1\u30c6\u30a3(m.prop)\u306b\u306f\u305d\u3046\u3044\u3046\u4ed5\u7d44\u307f\u306f\u306a\u3044\u3002\nm.prop\u306f\u3001\u7d14\u7c8b\u306bgetter\u3001setter\u3092\u5b9a\u7fa9\u3057\u3066\u304f\u308c\u308b\u3060\u3051\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306bauto-redraw\u3055\u308c\u308b\u306e\u3067\u3001view\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u4e2d\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u66f4\u65b0\u3059\u308b\u3060\u3051\u306a\u3089\u3001\u30a4\u30d9\u30f3\u30c8\u7d42\u4e86\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067redraw\u3057\u3066\u304f\u308c\u308b\u3002\n\u3060\u3051\u3069\u4eca\u56de\u306fHTML5\u306eFileAPI\u306eFileReader\u3092\u4f7f\u3063\u3066\u3001\u975e\u540c\u671f\u306b\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3063\u3066\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u66f4\u65b0\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\n\u305d\u3046\u3059\u308b\u3068\u3001\u30a4\u30d9\u30f3\u30c8\u304c\u7d42\u4e86\u3057\u305f\u6642\u306b\u306f\u307e\u3060\u8aad\u307f\u8fbc\u307f\u304c\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u3067\u306fredraw\u3055\u308c\u306a\u3044\u3002\n\u305d\u3053\u3067\u767b\u5834\u3059\u308b\u306e\u304c\u3001m.startComputation()\u3068m.endComputation()\u3060\u3002\n\u3053\u308c\u304c\u4f55\u304b\u3092\u8aac\u660e\u3059\u308b\u524d\u306b\u3001Mithril\u306eredraw\u304c\u8d70\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u8aac\u660e\u3059\u308b\u3002\nMithril\u3067\u306f\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u304c\u547c\u3070\u308c\u308b\u3068increment\u3055\u308c\u3066\u3001\u7d42\u4e86\u6642\u306bdecriment\u3055\u308c\u308b\u3002redraw\u304c\u8d70\u308b\u306e\u306f\u3053\u306e\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u304c0\u306b\u306a\u3063\u305f\u6642\u3060\u3002\nm.startComputation()\u306f\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u3092\u624b\u52d5\u3067increment\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3001m.endComputation()\u306fdecrement\u3059\u308b\u3002\n\u3064\u307e\u308a\u3001\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306bincrement\u3055\u308c\u30661\u306b\u306a\u3063\u305f\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u306f\u3001\u3055\u3089\u306bm.startComputation()\u3092\u547c\u3070\u308c\u30662\u306b\u306a\u308b\u3002\n\u30a4\u30d9\u30f3\u30c8\u7d42\u4e86\u6642\u306bdecrement\u3055\u308c\u30661\u306b\u306a\u308a\u3001FileReader\u306eonload\u30a4\u30d9\u30f3\u30c8\u3067m.endComputation()\u304c\u547c\u3070\u308c\u30660\u306b\u306a\u308b\u3002\n\u3053\u3053\u30670\u306b\u306a\u3063\u305f\u306e\u304c\u691c\u77e5\u3055\u308c\u3066\u3001redraw\u304c\u8d70\u308b\u3002\n\u3053\u306e\u4ed5\u7d44\u307f\u306f\u3059\u3054\u304f\u3088\u304f\u3067\u304d\u3066\u3044\u3066\u3001view\u30e1\u30bd\u30c3\u30c9\u306bconsole.log\u3092\u4ed5\u8fbc\u3080\u3068\u5206\u304b\u308b\u3051\u3069\u3001view\u30e1\u30bd\u30c3\u30c9\u306f\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6642\u306b1\u5ea6\u3057\u304b\u547c\u3070\u308c\u306a\u3044\u3002\n\u975e\u540c\u671f\u51e6\u7406\u304c\u8907\u6570\u3042\u3063\u3066\u3001\u5168\u3066\u7d42\u4e86\u3057\u305f\u6642\u306bredraw\u3057\u305f\u3044\u3001\u307f\u305f\u3044\u306a\u6642\u306b\u306f\u305d\u308c\u305e\u308c\u306e\u30e1\u30bd\u30c3\u30c9\u3067m.startComputation()\u3068m.endComputation()\u3092\u547c\u3076\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u3001\u7121\u99c4\u306aredraw\u3067\u30ea\u30bd\u30fc\u30b9\u3092\u6d88\u8cbb\u3057\u306a\u304f\u3066\u6e08\u3080\u3002(\u516c\u5f0f\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u4f8b\u304c\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002)\nm.render()\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3048\u3070\u3001\u5f37\u5236\u7684\u306bredraw\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3002\n\n\u6240\u611f\n\u4eca\u56de\u306fView\u306e\u90e8\u5206\u3060\u3051\u3060\u3063\u305f\u3051\u3069\u3001Mithril.js\u306f\u8efd\u91cf\u306a\u5272\u306b\u3001MVC\u306e\u7bc4\u56f2\u3092\u5168\u3066\u30ab\u30d0\u30fc\u3057\u3066\u3044\u308b\u3002\n\u500b\u4eba\u7684\u306b\u306f\u3059\u3054\u304f\u66f8\u3044\u3066\u3044\u3066\u6c17\u6301\u3061\u304c\u826f\u3044\u3002\n\u4ed6\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u306e\u3082\u7c21\u5358\u306a\u306e\u3067\u3001\u899a\u3048\u3066\u304a\u3044\u3066\u640d\u306f\u306a\u3044\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304b\u306a\u30fc\u3068\u601d\u3046\u3002\n\n# \u306f\u3058\u3081\u306b\n\n\u6700\u8fd1[Mithril.js](https://lhorie.github.io/mithril/index.html)\u3067\u904a\u3093\u3067\u3044\u308b\u3002\n\nMithril.js\u306f\u6700\u8fd1\u6d41\u884c\u308a\u306e[React](https://facebook.github.io/react/)\u3068\u540c\u3058\u4eee\u60f3DOM\u306a\u5b9f\u88c5\u306ejs\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\n\u3068\u306b\u304b\u304f\u901f\u5ea6\u304c\u7206\u901f\u3067\u3001React\u306e5\u500d\u901f\u3044\u3089\u3057\u3044\u3002\n\n\u2193\u306e\u8a18\u4e8b\u304c\u3059\u3054\u304f\u5206\u304b\u308a\u3084\u3059\u3044\u3002(\u50d5\u304c\u3084\u3063\u3066\u307f\u3088\u3046\u3068\u601d\u3063\u305f\u304d\u3063\u304b\u3051\u3082\u3053\u306e\u8a18\u4e8b\u3067\u3057\u305f\u3002)\n\b[\u6700\u901fMVC\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30afMithril.js\u306e\u901f\u5ea6\u306e\u79d8\u5bc6 - Qiita](http://qiita.com/shibukawa/items/890d24874655439932ec)\n\n\n\u4e0a\u8a18\u306e\u8a18\u4e8b\u306b\u3082\u66f8\u3044\u3066\u3042\u308b\u3051\u3069\u3001Mithril\u306fredraw\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u5c11\u3057\u7279\u6b8a\u3067\u3001\u305d\u308c\u304c\u9ad8\u901f\u5316\u306e\u4e00\u7aef\u3092\u62c5\u3063\u3066\u3044\u308b\u3002\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u753b\u50cf\u3092\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30d7\u30ec\u30d3\u30e5\u30fc\u3059\u308b\u5b9f\u88c5\u3092\u3057\u3066\u307f\u3066\u3001\u305d\u306e\u8fba\u304c\u7406\u89e3\u3067\u304d\u305f\u306e\u3067\u7d39\u4ecb\u3002\n\n# \u74b0\u5883\n- Mithril.js 0.2\n\n# \u8cc7\u6599\n[auto-redraw\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u306b\u95a2\u3059\u308b\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://lhorie.github.io/mithril/auto-redrawing.html)\n\n# \u30b3\u30fc\u30c9\nhttp://jsfiddle.net/k0Lu22fm/2/\n\n\n```coffeescript\nimageView = {}\nimageView.vm =\n  init: ->\n    @image = m.prop(null)\n    @fileChange = (e) =>\n      file = e.target.files[0]\n      unless file?\n        @image(null)\n        return\n      fr = new FileReader\n      fr.readAsDataURL(file)\n      m.startComputation()\n      fr.onload = (event) =>\n        @image(event.target.result)\n        m.endComputation()\n\nimageView.controller = -> imageView.vm.init()\n\nimageView.view = ->\n  m('div', [\n    m('div', [\n      m('input[type=file]', {onchange: imageView.vm.fileChange})\n    ])\n    m('img', src: imageView.vm.image()) if imageView.vm.image()?\n  ])\n\nm.mount(document.getElementById('image-view'), {controller: imageView.controller, view: imageView.view})\n```\n\n# \u89e3\u8aac\n\nMithril\u306f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fcontroller\u306einitialize\u304c\u8d70\u3063\u305f\u6642\u304b\u3001\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u706b\u3057\u305f\u6642\u306bauto-redraw\u3055\u308c\u308b\u3002\nReact\u3067\u306fstate\u3068\u3044\u3046\u6982\u5ff5\u304c\u3042\u3063\u3066\u3001`setState`\u30e1\u30bd\u30c3\u30c9\u3067\u72b6\u614b\u304c\u5909\u66f4\u3055\u308c\u305f\u6642\u306b\u518drender\u304c\u8d70\u308b\u308f\u3051\u3060\u3051\u3069\u3001Mithril\u306e\u30d7\u30ed\u30d1\u30c6\u30a3(m.prop)\u306b\u306f\u305d\u3046\u3044\u3046\u4ed5\u7d44\u307f\u306f\u306a\u3044\u3002\nm.prop\u306f\u3001\u7d14\u7c8b\u306bgetter\u3001setter\u3092\u5b9a\u7fa9\u3057\u3066\u304f\u308c\u308b\u3060\u3051\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306bauto-redraw\u3055\u308c\u308b\u306e\u3067\u3001view\u304b\u3089\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3057\u3066\u30a4\u30d9\u30f3\u30c8\u4e2d\u306b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u66f4\u65b0\u3059\u308b\u3060\u3051\u306a\u3089\u3001\u30a4\u30d9\u30f3\u30c8\u7d42\u4e86\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067redraw\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u3060\u3051\u3069\u4eca\u56de\u306fHTML5\u306eFileAPI\u306eFileReader\u3092\u4f7f\u3063\u3066\u3001\u975e\u540c\u671f\u306b\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3063\u3066\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u66f4\u65b0\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\n\u305d\u3046\u3059\u308b\u3068\u3001\u30a4\u30d9\u30f3\u30c8\u304c\u7d42\u4e86\u3057\u305f\u6642\u306b\u306f\u307e\u3060\u8aad\u307f\u8fbc\u307f\u304c\u3055\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u3067\u306fredraw\u3055\u308c\u306a\u3044\u3002\n\n\u305d\u3053\u3067\u767b\u5834\u3059\u308b\u306e\u304c\u3001`m.startComputation()`\u3068`m.endComputation()`\u3060\u3002\n\n\u3053\u308c\u304c\u4f55\u304b\u3092\u8aac\u660e\u3059\u308b\u524d\u306b\u3001Mithril\u306eredraw\u304c\u8d70\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u8aac\u660e\u3059\u308b\u3002\n\nMithril\u3067\u306f\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u304c\u547c\u3070\u308c\u308b\u3068increment\u3055\u308c\u3066\u3001\u7d42\u4e86\u6642\u306bdecriment\u3055\u308c\u308b\u3002redraw\u304c\u8d70\u308b\u306e\u306f\u3053\u306e\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u304c0\u306b\u306a\u3063\u305f\u6642\u3060\u3002\n\n`m.startComputation()`\u306f\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u3092\u624b\u52d5\u3067increment\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3067\u3001`m.endComputation()`\u306fdecrement\u3059\u308b\u3002\n\n\u3064\u307e\u308a\u3001\u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306bincrement\u3055\u308c\u30661\u306b\u306a\u3063\u305f\u5185\u90e8\u30ab\u30a6\u30f3\u30bf\u306f\u3001\u3055\u3089\u306b`m.startComputation()`\u3092\u547c\u3070\u308c\u30662\u306b\u306a\u308b\u3002\n\u30a4\u30d9\u30f3\u30c8\u7d42\u4e86\u6642\u306bdecrement\u3055\u308c\u30661\u306b\u306a\u308a\u3001FileReader\u306eonload\u30a4\u30d9\u30f3\u30c8\u3067`m.endComputation()`\u304c\u547c\u3070\u308c\u30660\u0010\u306b\u306a\u308b\u3002\n\u3053\u3053\u30670\u0010\u306b\u306a\u3063\u305f\u306e\u304c\u691c\u77e5\u3055\u308c\u3066\u3001redraw\u304c\u8d70\u308b\u3002\n\n\u3053\u306e\u4ed5\u7d44\u307f\u306f\u3059\u3054\u304f\u3088\u304f\u3067\u304d\u3066\u3044\u3066\u3001`view`\u30e1\u30bd\u30c3\u30c9\u306bconsole.log\u3092\u4ed5\u8fbc\u3080\u3068\u5206\u304b\u308b\u3051\u3069\u3001`view`\u30e1\u30bd\u30c3\u30c9\u306f\u30d5\u30a1\u30a4\u30eb\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u6642\u306b1\u5ea6\u3057\u304b\u547c\u3070\u308c\u306a\u3044\u3002\n\n\u975e\u540c\u671f\u51e6\u7406\u304c\u8907\u6570\u3042\u3063\u3066\u3001\u5168\u3066\u7d42\u4e86\u3057\u305f\u6642\u306bredraw\u3057\u305f\u3044\u3001\u307f\u305f\u3044\u306a\u6642\u306b\u306f\u305d\u308c\u305e\u308c\u306e\u30e1\u30bd\u30c3\u30c9\u3067`m.startComputation()`\u3068`m.endComputation()`\u3092\u547c\u3076\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u3001\u7121\u99c4\u306aredraw\u3067\u30ea\u30bd\u30fc\u30b9\u3092\u6d88\u8cbb\u3057\u306a\u304f\u3066\u6e08\u3080\u3002(\u516c\u5f0f\u306b\u5206\u304b\u308a\u3084\u3059\u3044\u4f8b\u304c\u66f8\u3044\u3066\u3042\u308a\u307e\u3059\u3002)\n\n`m.render()`\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u3048\u3070\u3001\u5f37\u5236\u7684\u306bredraw\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3002\n\n# \u6240\u611f\n\n\u4eca\u56de\u306fView\u306e\u0010\u90e8\u5206\u3060\u3051\u3060\u3063\u305f\u3051\u3069\u3001Mithril.js\u306f\u8efd\u91cf\u306a\u5272\u306b\u3001MVC\u306e\u7bc4\u56f2\u3092\u5168\u3066\u30ab\u30d0\u30fc\u3057\u3066\u3044\u308b\u3002\n\u500b\u4eba\u7684\u306b\u306f\u3059\u3054\u304f\u66f8\u3044\u3066\u3044\u3066\u6c17\u6301\u3061\u304c\u826f\u3044\u3002\n\u4ed6\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3068\u7d44\u307f\u5408\u308f\u305b\u308b\u306e\u3082\u7c21\u5358\u306a\u306e\u3067\u3001\u899a\u3048\u3066\u304a\u3044\u3066\u640d\u306f\u306a\u3044\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u304b\u306a\u30fc\u3068\u601d\u3046\u3002\n", "tags": ["VirtualDom", "Mithril.js"]}