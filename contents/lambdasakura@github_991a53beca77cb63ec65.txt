{"tags": ["CommonLisp", "lisp"], "context": " More than 1 year has passed since last update.CommonLisp\u306b\u306fHTML\u306eparse\u3092\u884c\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u69d8\u3005\u3042\u308a\u307e\u3059\u3002\nhttp://www.cliki.net/HTML%20parser\n\u304cjQuery\u306e\u3088\u3046\u306acss\u3067\u30bb\u30ec\u30af\u30bf\u3092\u6307\u5b9a\u3059\u308b\u5f62\u5f0f\u306e\u3082\u306e\u3068\u3057\u3066\nstp-query\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092quicklisp\u3092\u773a\u3081\u3066\u3044\u305f\u3089\u898b\u3064\u3051\u305f\u306e\u3067\u7c21\u5358\u306b\u4f7f\u3044\u65b9\u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nstp-query.lisp\n(ql:quickload \"drakma\")\n(ql:quickload \"stp-query\")\n(ql:quickload \"jp\")\n(ql:quickload \"cxml-stp\")\n\n;; \"->\" \u30de\u30af\u30ed\u3067\u5229\u7528\u3057\u3066\u3044\u308b\u95a2\u6570\n;; \u3069\u3053\u7531\u6765\u306e\u95a2\u6570\u306a\u3093\u3060\u308d\u3046...?\n(defun ensure-list (thing)\n  \"Returns THING as a list.\n\nIf THING is already a list (as per listp) it is returned,\notherwise a one element list containing THING is returned.\"\n  (if (listp thing)\n      thing\n      (list thing)))\n\n;; jQuery\u306e\u3088\u3046\u306b\u30c1\u30a7\u30a4\u30f3\u3057\u305f\u3044\u306e\u3067\u30de\u30af\u30ed\u3092\u5b9a\u7fa9\n;; stp-query\u306e\u4f5c\u8005\u306ebackports\u30ea\u30dd\u30b8\u30c8\u30ea\u3088\u308a\u62dd\u501f\n(defmacro -> (x &rest forms)\n  \"Threads X through FORMS in second postition.\"\n  (if (null forms)\n      x\n      `(-> ,(let ((list (ensure-list (first forms))))\n              (list* (first list) x (rest list)))\n           ,@(rest forms))))\n\n;;\n;; drakma\u3067Web\u30da\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066cxml-stp\u306e\u30c4\u30ea\u30fc\u306b\u5909\u63db\n;; \u305d\u306e\u5185\u5bb9\u3092$:find\u3067\u691c\u7d22\u3057\u3066\u307f\u308b\n;;\n;; \u30a2\u30af\u30bb\u30b9\u5148\u306f\u3055\u304f\u3089\u3093\u307c\u4ead\u306e\u516c\u5f0fWeb\n;;\n(let* ((web-page (ql:quickload \"stp-query\")\n       (parsed-doc (chtml:parse web-page (cxml-stp:make-builder)))\n     (-> ($:find parsed-doc \"li\") ($:find \"a\"))))\n\n\n\u3053\u3093\u306a\u611f\u3058\u3067jQuery\u306e\u3088\u3046\u306bDOM\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\nCommonLisp\u306b\u306fHTML\u306eparse\u3092\u884c\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u69d8\u3005\u3042\u308a\u307e\u3059\u3002\nhttp://www.cliki.net/HTML%20parser\n\n\u304cjQuery\u306e\u3088\u3046\u306acss\u3067\u30bb\u30ec\u30af\u30bf\u3092\u6307\u5b9a\u3059\u308b\u5f62\u5f0f\u306e\u3082\u306e\u3068\u3057\u3066\n[stp-query](https://github.com/nubgames/stp-query)\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3092quicklisp\u3092\u773a\u3081\u3066\u3044\u305f\u3089\u898b\u3064\u3051\u305f\u306e\u3067\u7c21\u5358\u306b\u4f7f\u3044\u65b9\u3092\u30e1\u30e2\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```common-lisp:stp-query.lisp\n(ql:quickload \"drakma\")\n(ql:quickload \"stp-query\")\n(ql:quickload \"jp\")\n(ql:quickload \"cxml-stp\")\n\n;; \"->\" \u30de\u30af\u30ed\u3067\u5229\u7528\u3057\u3066\u3044\u308b\u95a2\u6570\n;; \u3069\u3053\u7531\u6765\u306e\u95a2\u6570\u306a\u3093\u3060\u308d\u3046...?\n(defun ensure-list (thing)\n  \"Returns THING as a list.\n\nIf THING is already a list (as per listp) it is returned,\notherwise a one element list containing THING is returned.\"\n  (if (listp thing)\n      thing\n      (list thing)))\n\n;; jQuery\u306e\u3088\u3046\u306b\u30c1\u30a7\u30a4\u30f3\u3057\u305f\u3044\u306e\u3067\u30de\u30af\u30ed\u3092\u5b9a\u7fa9\n;; stp-query\u306e\u4f5c\u8005\u306ebackports\u30ea\u30dd\u30b8\u30c8\u30ea\u3088\u308a\u62dd\u501f\n(defmacro -> (x &rest forms)\n  \"Threads X through FORMS in second postition.\"\n  (if (null forms)\n      x\n      `(-> ,(let ((list (ensure-list (first forms))))\n              (list* (first list) x (rest list)))\n           ,@(rest forms))))\n\n;;\n;; drakma\u3067Web\u30da\u30fc\u30b8\u3092\u53d6\u5f97\u3057\u3066cxml-stp\u306e\u30c4\u30ea\u30fc\u306b\u5909\u63db\n;; \u305d\u306e\u5185\u5bb9\u3092$:find\u3067\u691c\u7d22\u3057\u3066\u307f\u308b\n;;\n;; \u30a2\u30af\u30bb\u30b9\u5148\u306f\u3055\u304f\u3089\u3093\u307c\u4ead\u306e\u516c\u5f0fWeb\n;;\n(let* ((web-page (ql:quickload \"stp-query\")\n       (parsed-doc (chtml:parse web-page (cxml-stp:make-builder)))\n     (-> ($:find parsed-doc \"li\") ($:find \"a\"))))\n```\n\n\u3053\u3093\u306a\u611f\u3058\u3067jQuery\u306e\u3088\u3046\u306bDOM\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002"}