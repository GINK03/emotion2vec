{"context": "\nSpring Boot 1.4.3.RELEASE\nSpring Security 4.1.4.RELEASE (4.2.1.RELEASE\u3067\u3082\u540c\u69d8)\n\nSpring Security\u3067UserDetailsService\u3092\u5b9f\u88c5\u3057\u3001\u8a8d\u8a3c\u5931\u6557\u6642\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5909\u66f4\u3057\u305f\u3044\u3002\n\n\u5bfe\u8c61\u5916\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306b\u8a72\u5f53\u3059\u308b\u5834\u5408\u306f\u5bfe\u8c61\u5916\u3067\u3059\u3002\n\nSpring Security\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u306a\u3044\nSpring Security 4.1.0.RELEASE\u306e\u6a5f\u80fd\u3092\u4f7f\u308f\u306a\u3044\n\nAuthenticationProvider\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\n\nUserDetailsService\u3092\u4f7f\u308f\u306a\u3044\n\n\n\u60f3\u5b9a\u624b\u9806\u3068\u8aac\u660e\n\n\nUserDetailsService\u3092\u5b9f\u88c5\u3057\u3066Bean\u5b9a\u7fa9\u3059\u308b\u3002\n\nmessages.properties\u306bSpring Security\u306e\u30ad\u30fc\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n\u4ee5\u4e0a\u3002\nUserDetailsService\u306e\u5b9f\u88c5 \uff08\u3057\u3066\u306a\u3044\uff09\n@Service\npublic class MyUserDetailsService implements UserDetailsService {\n   // \u3044\u3044\u611f\u3058\u306b\u5b9f\u88c5\u3059\u308b\n}\n\nmessages.properties \uff08\u629c\u7c8b\uff09\nAbstractUserDetailsAuthenticationProvider.badCredentials=\u30e6\u30fc\u30b6\u30fcID\u304b\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9055\u3044\u307e\u3059\u3002\n\n\u30ad\u30fc\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306emessages.properties \u3092\u53c2\u7167\u3059\u308b\u306e\u304c\u65e9\u3044\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u898b\u3064\u3051\u3089\u308c\u3066\u3044\u306a\u3044\u3002\n\n\u8aac\u660e\n4.1.0\u3067\u8ffd\u52a0\u3055\u308c\u305f InitializeUserDetailsBeanManagerConfigurer \u304c\u3001AuthenticationManagerBuilder\u304c\u672a\u8a2d\u5b9a\u306e\u5834\u5408\u306e\u307f\u52d5\u4f5c\u3002\n\u30b3\u30f3\u30c6\u30ca\u304b\u3089UserDetailsService\u3068PasswordEncoder\u3092\u62fe\u3063\u3066\u304d\u3066DaoAuthenticationProvider\u3092\u4f5c\u3063\u3066\u767b\u9332\u3057\u3066\u304f\u308c\u308b\u3002\nAuthenticationManagerBuilder\u306e\u8a2d\u5b9a\u306f\u4e0d\u8981\u3002\n\u30fb\u30fb\u30fb\u3067\u3042\u308b\u306f\u305a\u3060\u3063\u305f\u3002\n\n\u671f\u5f85\u306f\u305a\u308c\u306e\u6319\u52d5\n\u4f8b\u5916\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u304b\u3089\u5909\u308f\u3089\u305a\u3001\u300cBad credentials\u300d\u306b\u306a\u308b\u3002\nMessageResource\u304c\u3042\u308c\u3070MessageSourceAware\u3067\u66f8\u304d\u63db\u3048\u3089\u308c\u308b\u60f3\u5b9a\u3060\u3063\u305f\u3002\nMessageResource\u306fSpring Boot\u304c\u4f5c\u3063\u3066\u304f\u308c\u3066\u3044\u308b\u3002\n\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001DaoAuthenticationProvider\u306eMessageSourceAccessor\u306fSpringSecurityMessageSource\u306e\u307e\u307e\u3067\u3042\u308b\u3002\n\n\u3053\u306e\u5834\u306e\u89e3\u6c7a\nAuthenticationManagerBuilder\u3092\u4f7f\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u304a\u3051\u3070DaoAuthenticationConfigurer\u3092\u4ecb\u3057\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u308b\u3002\n\u3064\u307e\u308a\u3001\u3044\u307e\u307e\u3067\u901a\u308a\u306b\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3059\u308b\u3002\n@Autowired\nvoid authenticationManagerBuilder(AuthenticationManagerBuilder builder,\n    UserDetailsService service) {\n    builder.userDetailsService(service).passwordEncoder(passwordEncoder());\n}\n\n* Spring Boot 1.4.3.RELEASE\n* Spring Security 4.1.4.RELEASE (4.2.1.RELEASE\u3067\u3082\u540c\u69d8)\n\nSpring Security\u3067`UserDetailsService`\u3092\u5b9f\u88c5\u3057\u3001\u8a8d\u8a3c\u5931\u6557\u6642\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5909\u66f4\u3057\u305f\u3044\u3002\n\n# \u5bfe\u8c61\u5916\n\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306b\u8a72\u5f53\u3059\u308b\u5834\u5408\u306f\u5bfe\u8c61\u5916\u3067\u3059\u3002\n\n* Spring Security\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u4f7f\u7528\u3057\u306a\u3044\n* Spring Security 4.1.0.RELEASE\u306e\u6a5f\u80fd\u3092\u4f7f\u308f\u306a\u3044\n* `AuthenticationProvider`\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\n* `UserDetailsService`\u3092\u4f7f\u308f\u306a\u3044\n\n# \u60f3\u5b9a\u624b\u9806\u3068\u8aac\u660e\n\n1. `UserDetailsService`\u3092\u5b9f\u88c5\u3057\u3066Bean\u5b9a\u7fa9\u3059\u308b\u3002\n2. `messages.properties`\u306bSpring Security\u306e\u30ad\u30fc\u3067\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n\u4ee5\u4e0a\u3002\n\n`UserDetailsService`\u306e\u5b9f\u88c5 \uff08\u3057\u3066\u306a\u3044\uff09\n\n```java\n@Service\npublic class MyUserDetailsService implements UserDetailsService {\n   // \u3044\u3044\u611f\u3058\u306b\u5b9f\u88c5\u3059\u308b\n}\n```\n\n`messages.properties` \uff08\u629c\u7c8b\uff09\n\n```properties\nAbstractUserDetailsAuthenticationProvider.badCredentials=\u30e6\u30fc\u30b6\u30fcID\u304b\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9055\u3044\u307e\u3059\u3002\n```\n\u30ad\u30fc\u306f[\u30c7\u30d5\u30a9\u30eb\u30c8\u306emessages.properties](https://github.com/spring-projects/spring-security/blob/4.1.4.RELEASE/core/src/main/resources/org/springframework/security/messages.properties) \u3092\u53c2\u7167\u3059\u308b\u306e\u304c\u65e9\u3044\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u898b\u3064\u3051\u3089\u308c\u3066\u3044\u306a\u3044\u3002\n\n## \u8aac\u660e\n\n[4.1.0\u3067\u8ffd\u52a0\u3055\u308c\u305f `InitializeUserDetailsBeanManagerConfigurer`](https://github.com/spring-projects/spring-security/blob/4.1.0.RELEASE/config/src/main/java/org/springframework/security/config/annotation/authentication/configuration/InitializeUserDetailsBeanManagerConfigurer.java) \u304c\u3001`AuthenticationManagerBuilder`\u304c\u672a\u8a2d\u5b9a\u306e\u5834\u5408\u306e\u307f\u52d5\u4f5c\u3002\n\u30b3\u30f3\u30c6\u30ca\u304b\u3089`UserDetailsService`\u3068`PasswordEncoder`\u3092\u62fe\u3063\u3066\u304d\u3066`DaoAuthenticationProvider`\u3092\u4f5c\u3063\u3066\u767b\u9332\u3057\u3066\u304f\u308c\u308b\u3002\n`AuthenticationManagerBuilder`\u306e\u8a2d\u5b9a\u306f\u4e0d\u8981\u3002\n\n\u30fb\u30fb\u30fb\u3067\u3042\u308b\u306f\u305a\u3060\u3063\u305f\u3002\n\n# \u671f\u5f85\u306f\u305a\u308c\u306e\u6319\u52d5\n\n\u4f8b\u5916\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u304b\u3089\u5909\u308f\u3089\u305a\u3001\u300cBad credentials\u300d\u306b\u306a\u308b\u3002\n`MessageResource`\u304c\u3042\u308c\u3070`MessageSourceAware`\u3067\u66f8\u304d\u63db\u3048\u3089\u308c\u308b\u60f3\u5b9a\u3060\u3063\u305f\u3002\n\n`MessageResource`\u306fSpring Boot\u304c\u4f5c\u3063\u3066\u304f\u308c\u3066\u3044\u308b\u3002\n\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001`DaoAuthenticationProvider`\u306e`MessageSourceAccessor`\u306f`SpringSecurityMessageSource`\u306e\u307e\u307e\u3067\u3042\u308b\u3002\n\n\n# \u3053\u306e\u5834\u306e\u89e3\u6c7a\n\n`AuthenticationManagerBuilder`\u3092\u4f7f\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u304a\u3051\u3070`DaoAuthenticationConfigurer`\u3092\u4ecb\u3057\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u308c\u308b\u3002\n\n\u3064\u307e\u308a\u3001\u3044\u307e\u307e\u3067\u901a\u308a\u306b\u4ee5\u4e0b\u3092\u8a18\u8ff0\u3059\u308b\u3002\n\n```java\n@Autowired\nvoid authenticationManagerBuilder(AuthenticationManagerBuilder builder,\n    UserDetailsService service) {\n    builder.userDetailsService(service).passwordEncoder(passwordEncoder());\n}\n```\n", "tags": ["spring-security"]}