{"tags": ["SASL", "openldap"], "context": " More than 1 year has passed since last update.\u793e\u5185\u306bWeb\u30b7\u30b9\u30c6\u30e0\u304c\u7acb\u3061\u4e0a\u304c\u308b\u305f\u3073\u306b\u3001\u5404\u30b7\u30b9\u30c6\u30e0\u30ed\u30fc\u30ab\u30eb\u306e\u8a8d\u8a3c\u60c5\u5831\u304c\u3064\u304f\u3089\u308c\u308b\u3053\u3068\u306b\u3046\u3093\u3056\u308a\u3057\u3066\u3044\u305f\u3002\n\u305f\u3060\u3057\u3001\u793e\u5185\u306eActiveDirectory\u306b\u30e6\u30fc\u30b6\u767b\u9332\u3057\u3066\u3082\u3089\u3046\u306e\u3082\u30cf\u30fc\u30c9\u30eb\u304c\u9ad8\u3044\u306e\u3067\u3001\u5354\u529b\u4f1a\u793e\u30e1\u30f3\u30d0\u30fc\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306fOpenLDAP\u3067\u7ba1\u7406\u3057\u305f\u3044\u3001\u3068\u3044\u3046\u306e\u304c\u767a\u7aef\u3002\n\u3067\u3001\u307e\u305a\u306f\u81ea\u5206\u304c\u7ba1\u7406\u3059\u308bsubversion\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a8d\u8a3c\u3092SASL\u306b\u5909\u66f4\u3002\n\u5165\u529b\u3057\u305f\u30e6\u30fc\u30b6ID\u304cSASL\u7d4c\u7531\u3067LDAP\u306b\u6e21\u308a\u3001OpenLDAP:uid\u3001ActiveDirectory:sAMAccountName\u3000\u306e\u3069\u3061\u3089\u304b\u306bhit\u3059\u308c\u3070\u3088\u3044\u3002\u3068\u3057\u305f\u3002\n\u6700\u521d\u306f\u7c21\u5358\u3060\u308d\u3001\u3068\u601d\u3063\u305f\u304c\u65e5\u672c\u8a9e\u306e\u30b5\u30a4\u30c8\u306b\u306f\u60c5\u5831\u304c\u305c\u3093\u305c\u3093\u306a\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u524d\u63d0\u3068\u3059\u308bOS/MW\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\nCentOS 5.11(x86_64)\ncyrus-sasl\uff1a2.1.22\nopenldap-servers\uff1a2.3.43\nopenldap\uff1a2.3.43\n\n\u30d9\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5b9a\u7fa9\n\u3000AD\uff1adc=XXXX,dc=local\n\u3000LDAP\uff1adc=ldap,dc=XXXX,dc=local\nAD\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3068\u3059\u308b\u3053\u3068\u3067\u4e00\u3064\u306e\u30c4\u30ea\u30fc\u306b\u898b\u305b\u304b\u3051\u305f\n\u30e6\u30fc\u30b6DN\n\u3000AD\uff1acn=%\u540d\u524d%,OU=OU_Users,dc=XXXX,dc=local\n\u3000LDAP\uff1auid=%\u30e6\u30fc\u30b6ID%,ou=partner,dc=ldap,dc=XXXX,dc=local\n\"%\"\u306e\u90e8\u5206\u306f\u74b0\u5883\u4f9d\u5b58\u5024\u3002\u4ee5\u964d\u3082\u540c\u69d8\n\u4e0a\u8a18\u306e\u72b6\u614b\u3067OpenLDAP\u3068SASL\u306f\u5c0e\u5165\u6e08\u307f\u3068\u3057\u307e\u3059\u3002\n\u53c2\u8003\u30da\u30fc\u30b8\n\u3000http://www.linuxtopia.org/online_books/network_administration_guides/ldap_administration/overlays_Chaining.html\n\uff11\uff0eActiveDirectory\u7528\u306e\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u53d6\u5f97\n # wget http://lism.sourceforge.jp/docs/ad.schema -O /etc/openldap/schema/ad.schema\n\n\uff12\uff0eOpenLDAP\u306e\u8a2d\u5b9a\n\u203bACL\u306f\u7701\u7565\n\n/etc/openldap/slapd.conf\ninclude         /etc/openldap/schema/core.schema\ninclude         /etc/openldap/schema/cosine.schema\ninclude         /etc/openldap/schema/inetorgperson.schema\ninclude         /etc/openldap/schema/nis.schema\n\npidfile         /var/run/openldap/slapd.pid\nargsfile        /var/run/openldap/slapd.args\n\n# ActiveDirectory\u306eSchema\u8a2d\u5b9a\uff08\u8ffd\u52a0\uff09\ninclude         /etc/openldap/schema/ad.schema\nsizelimit unlimited\n\n# ActiveDirectory\u306eChain\u8a2d\u5b9a\uff08\u8ffd\u52a0\uff09\noverlay chain\nchain-max-depth 2\nchain-return-error TRUE\nchain-uri \"ldap://aaa.bbb.ccc.ddd/\"\nchain-rebind-as-user true\nchain-idassert-bind bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\" mode=\"legacy\" flags=\"non-prescriptive\"\nchain-acl-bind bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\"\n\npassword-hash   {SSHA}\n\n# For Local LDAP\ndatabase        bdb\nsuffix          \"dc=ldap,dc=XXXX,dc=local\"\nrootdn          \"cn=Manager,dc=ldap,dc=XXXX,dc=local\"\nrootpw          {SSHA}ReO7KDZeKSxWfn8T9903YzbS8TqizgqR\ndirectory       /var/lib/ldap\n\n# For Local Index\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n\n# ActiveDirectory\u306eIndex\uff08\u8ffd\u52a0\uff09\nindex sAMAccountName                    eq,pres\nindex distinguishedName                 eq,pres\n\n\n# ActiveDirectory\u3078\u306e\u554f\u3044\u5408\u308f\u305b\u8a2d\u5b9a\uff08\u8ffd\u52a0\uff09\ndatabase        ldap\nchase-referrals no\nsuffix          \"dc=XXXX,dc=local\"\nuri             ldap://aaa.bbb.ccc.ddd/\nacl-bind        bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\"\nidassert-bind   bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\" mode=\"legacy\" flags=\"non-prescriptive\"\n\n\n\n/etc/openldap/ldap.conf\nURI     ldap://127.0.0.1/\nBASE    dc=ldap,dc=XXXX,dc=local\nSASL_REALM ldap.XXXX.local\n\nscope sub\nssl no\nsizelimit unlimited\n\nTLS_CACERTDIR   /etc/openldap/certs\n\n\n\uff13\uff0eSASL\u306e\u8a2d\u5b9a\n\n/etc/sysconfig/saslauthd\nMECH=ldap\nFLAGS=\"-O /etc/saslauthd.conf\"\n\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\n\n/etc/saslauthd.conf\nldap_servers: ldap://127.0.0.1\nldap_use_sasl: no\nldap_bind_dn: uid=%LDAP\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local\nldap_password: %\u30d1\u30b9\u30ef\u30fc\u30c9%\nldap_mech: PLAIN\nldap_auth_method: bind\nldap_filter: (|(uid=%U)(sAMAccountName=%U))\nldap_scope: sub\nldap_search_base: dc=ldap,dc=XXXX,dc=local\nldap_deref: always\n\n\n\uff14\uff0euid\u306b\u8a72\u5f53\u3059\u308b\u30e6\u30fc\u30b6\u3067\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\n# ldapsearch -x -D \"uid=%LDAP\u691c\u7d22\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local\" \"(|(uid=partnera)(sAMAccountName=partnera))\" -W\n\n\n\n\u7d50\u679c(LDAP\u304b\u3089\u306e\u8fd4\u5374\u5024)\n# extended LDIF\n#\n# LDAPv3\n# base <> with scope subtree\n# filter: (|(uid=partnera)(sAMAccountName=partnera))\n# requesting: ALL\n#\n\n# partnera, partner, ldap.XXXX.local\ndn: uid=partnera,ou=partner,dc=ldap,dc=XXXX,dc=local\nobjectClass: top\nobjectClass: inetOrgPerson\nuid: partnera\nmail: partnerA@XXXX.co.jp\ngivenName: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nsn: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ncn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nuserPassword:: e1NTSEF9a3RoQUpKZE5icmFUNUlQRkE3a1BZdm5heHN4R1RscHRkbm95VEdSS1p\n ETT0=\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 2\n\n\n\uff15\uff0esAMAccountName\u306b\u8a72\u5f53\u3059\u308b\u30e6\u30fc\u30b6\u3067\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\n# ldapsearch -x -D \"uid=%LDAP\u691c\u7d22\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local\" \"(|(uid=%\u793e\u54e1\u756a\u53f7%)(sAMAccountName=%\u793e\u54e1\u756a\u53f7%))\" -W\n\n\n\n\u7d50\u679c\uff08ActiveDirectory\u304b\u3089\u306e\u8fd4\u5374\u5024\uff09\n# extended LDIF\n#\n# LDAPv3\n# base <> with scope subtree\n# filter: (|(uid=%\u793e\u54e1\u756a\u53f7%)(sAMAccountName=%\u793e\u54e1\u756a\u53f7%))\n# requesting: ALL\n#\n\n# %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%, OU_Users, XXXX.local\ndn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nobjectClass: top\nobjectClass: person\nobjectClass: organizationalPerson\nobjectClass: user\ncn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nsn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ndescription:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ngivenName:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ndistinguishedName:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ninstanceType: 4\nwhenCreated: 20120329081907.0Z\nwhenChanged: 20141217011450.0Z\ndisplayName:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nuSNCreated: 8558\nuSNChanged: 7815826\nname:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nobjectGUID:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nuserAccountControl: 512\nbadPwdCount: 0\ncodePage: 0\ncountryCode: 0\nbadPasswordTime: 130607728713210993\nlastLogoff: 0\nlastLogon: 130632524744753546\npwdLastSet: 130632524908555646\nprimaryGroupID: 513\nobjectSid:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\naccountExpires: 9223372036854775807\nlogonCount: 12\nsAMAccountName: %\u793e\u54e1\u756a\u53f7%\nsAMAccountType: 805306368\nuserPrincipalName: %\u793e\u54e1\u756a\u53f7%@XXXX.local\nlockoutTime: 0\nobjectCategory: cn=Person,cn=Schema,cn=Configuration,dc=XXXX,dc=local\ndSCorePropagationData: 20140108085735.0Z\ndSCorePropagationData: 16010101000000.0Z\nLASTLOGONTIMESTAMP: 130632509056134209\nmail: mailLocalPart@XXXX.co.jp\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 2\n# numEntries: 1\n\n\n\uff16\uff0eSubversion\u306e\u8a2d\u5b9a\n\nsvnserve.conf\n[sasl]\nuse-sasl = true\n\n\n\u4e0a\u8a18\u3092\u8ffd\u52a0\n\n/usr/lib64/sasl2/svn.conf\npwcheck_method: saslauthd\nauxprop_plugin: ldap\nmech_list: PLAIN\nldapdb_mech: PLAIN\n\n\n\u4e0a\u8a18\u306e\u5185\u5bb9\u3067\u65b0\u898f\u4f5c\u6210\n\u304a\u307e\u3051\uff0ephpLDAPadmin\n\n/etc/phpldapadmin/config.php\n$servers->setValue('login','attr','uid'); #\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3000\n# \u4ee5\u4e0b\u3092\u6700\u4e0b\u884c\u306e\u3000?>\u3000\u524d\u306b\u8ffd\u52a0\n$servers->setValue('server','base',array('dc=XXXX,dc=local','dc=ldap,dc=XXXX,dc=local'));\n$servers->setValue('login','base',array('dc=ldap,dc=XXXX,dc=local'));\n$servers->setValue('login','bind_id','uid=%LDAP\u691c\u7d22\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local');\n$servers->setValue('login','bind_pass','%\u30d1\u30b9\u30ef\u30fc\u30c9%');\n$servers->setValue('login','fallback_dn',true);\n\n\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u3067LDAP\u306fuid,dn\u3001ActiveDirectory\u306fdn\u6307\u5b9a\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u306b\u306a\u308b\u3002\n\u793e\u5185\u306bWeb\u30b7\u30b9\u30c6\u30e0\u304c\u7acb\u3061\u4e0a\u304c\u308b\u305f\u3073\u306b\u3001\u5404\u30b7\u30b9\u30c6\u30e0\u30ed\u30fc\u30ab\u30eb\u306e\u8a8d\u8a3c\u60c5\u5831\u304c\u3064\u304f\u3089\u308c\u308b\u3053\u3068\u306b\u3046\u3093\u3056\u308a\u3057\u3066\u3044\u305f\u3002\n\u305f\u3060\u3057\u3001\u793e\u5185\u306eActiveDirectory\u306b\u30e6\u30fc\u30b6\u767b\u9332\u3057\u3066\u3082\u3089\u3046\u306e\u3082\u30cf\u30fc\u30c9\u30eb\u304c\u9ad8\u3044\u306e\u3067\u3001\u5354\u529b\u4f1a\u793e\u30e1\u30f3\u30d0\u30fc\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u306fOpenLDAP\u3067\u7ba1\u7406\u3057\u305f\u3044\u3001\u3068\u3044\u3046\u306e\u304c\u767a\u7aef\u3002\n\n\u3067\u3001\u307e\u305a\u306f\u81ea\u5206\u304c\u7ba1\u7406\u3059\u308bsubversion\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8a8d\u8a3c\u3092SASL\u306b\u5909\u66f4\u3002\n\u5165\u529b\u3057\u305f\u30e6\u30fc\u30b6ID\u304cSASL\u7d4c\u7531\u3067LDAP\u306b\u6e21\u308a\u3001OpenLDAP:uid\u3001ActiveDirectory:sAMAccountName\u3000\u306e\u3069\u3061\u3089\u304b\u306bhit\u3059\u308c\u3070\u3088\u3044\u3002\u3068\u3057\u305f\u3002\n\n\u6700\u521d\u306f\u7c21\u5358\u3060\u308d\u3001\u3068\u601d\u3063\u305f\u304c\u65e5\u672c\u8a9e\u306e\u30b5\u30a4\u30c8\u306b\u306f\u60c5\u5831\u304c\u305c\u3093\u305c\u3093\u306a\u304b\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n<dl>\n<dt>\u524d\u63d0\u3068\u3059\u308bOS/MW\u306e\u30d0\u30fc\u30b8\u30e7\u30f3</dt>\n<dd>CentOS 5.11(x86_64)</dd>\n<dd>cyrus-sasl\uff1a2.1.22</dd>\n<dd>openldap-servers\uff1a2.3.43</dd>\n<dd>openldap\uff1a2.3.43</dd>\n</dl>\n\n**\u30d9\u30fc\u30b9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5b9a\u7fa9**\n\u3000AD\uff1adc=XXXX,dc=local\n\u3000LDAP\uff1adc=ldap,dc=XXXX,dc=local\n*AD\u306e\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3068\u3059\u308b\u3053\u3068\u3067\u4e00\u3064\u306e\u30c4\u30ea\u30fc\u306b\u898b\u305b\u304b\u3051\u305f*\n\n**\u30e6\u30fc\u30b6DN**\n\u3000AD\uff1acn=%\u540d\u524d%,OU=OU_Users,dc=XXXX,dc=local\n\u3000LDAP\uff1auid=%\u30e6\u30fc\u30b6ID%,ou=partner,dc=ldap,dc=XXXX,dc=local\n*\"%\"\u306e\u90e8\u5206\u306f\u74b0\u5883\u4f9d\u5b58\u5024\u3002\u4ee5\u964d\u3082\u540c\u69d8*\n\n*\u4e0a\u8a18\u306e\u72b6\u614b\u3067OpenLDAP\u3068SASL\u306f\u5c0e\u5165\u6e08\u307f\u3068\u3057\u307e\u3059\u3002*\n\n**\u53c2\u8003\u30da\u30fc\u30b8**\n\u3000http://www.linuxtopia.org/online_books/network_administration_guides/ldap_administration/overlays_Chaining.html\n\n<h2>\uff11\uff0eActiveDirectory\u7528\u306e\u30b9\u30ad\u30fc\u30de\u30d5\u30a1\u30a4\u30eb\u53d6\u5f97</h2>\n```\n # wget http://lism.sourceforge.jp/docs/ad.schema -O /etc/openldap/schema/ad.schema\n```\n<h2>\uff12\uff0eOpenLDAP\u306e\u8a2d\u5b9a</h2>\n*\u203bACL\u306f\u7701\u7565*\n\n```text:/etc/openldap/slapd.conf\ninclude         /etc/openldap/schema/core.schema\ninclude         /etc/openldap/schema/cosine.schema\ninclude         /etc/openldap/schema/inetorgperson.schema\ninclude         /etc/openldap/schema/nis.schema\n\npidfile         /var/run/openldap/slapd.pid\nargsfile        /var/run/openldap/slapd.args\n\n# ActiveDirectory\u306eSchema\u8a2d\u5b9a\uff08\u8ffd\u52a0\uff09\ninclude         /etc/openldap/schema/ad.schema\nsizelimit unlimited\n\n# ActiveDirectory\u306eChain\u8a2d\u5b9a\uff08\u8ffd\u52a0\uff09\noverlay chain\nchain-max-depth 2\nchain-return-error TRUE\nchain-uri \"ldap://aaa.bbb.ccc.ddd/\"\nchain-rebind-as-user true\nchain-idassert-bind bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\" mode=\"legacy\" flags=\"non-prescriptive\"\nchain-acl-bind bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\"\n\npassword-hash   {SSHA}\n\n# For Local LDAP\ndatabase        bdb\nsuffix          \"dc=ldap,dc=XXXX,dc=local\"\nrootdn          \"cn=Manager,dc=ldap,dc=XXXX,dc=local\"\nrootpw          {SSHA}ReO7KDZeKSxWfn8T9903YzbS8TqizgqR\ndirectory       /var/lib/ldap\n\n# For Local Index\nindex objectClass                       eq,pres\nindex ou,cn,mail,surname,givenname      eq,pres,sub\nindex uidNumber,gidNumber,loginShell    eq,pres\nindex uid,memberUid                     eq,pres,sub\nindex nisMapName,nisMapEntry            eq,pres,sub\n\n# ActiveDirectory\u306eIndex\uff08\u8ffd\u52a0\uff09\nindex sAMAccountName                    eq,pres\nindex distinguishedName                 eq,pres\n\n\n# ActiveDirectory\u3078\u306e\u554f\u3044\u5408\u308f\u305b\u8a2d\u5b9a\uff08\u8ffd\u52a0\uff09\ndatabase        ldap\nchase-referrals no\nsuffix          \"dc=XXXX,dc=local\"\nuri             ldap://aaa.bbb.ccc.ddd/\nacl-bind        bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\"\nidassert-bind   bindmethod=\"simple\" binddn=\"cn=%\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,OU=OU_Users,dc=XXXX,dc=local\" credentials=\"%\u30d1\u30b9\u30ef\u30fc\u30c9%\" mode=\"legacy\" flags=\"non-prescriptive\"\n```\n\n```text:/etc/openldap/ldap.conf\nURI     ldap://127.0.0.1/\nBASE    dc=ldap,dc=XXXX,dc=local\nSASL_REALM ldap.XXXX.local\n\nscope sub\nssl no\nsizelimit unlimited\n\nTLS_CACERTDIR   /etc/openldap/certs\n```\n\n<h2>\uff13\uff0eSASL\u306e\u8a2d\u5b9a</h2>\n```text:/etc/sysconfig/saslauthd\nMECH=ldap\nFLAGS=\"-O /etc/saslauthd.conf\"\n```\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5909\u66f4\n\n```text:/etc/saslauthd.conf\nldap_servers: ldap://127.0.0.1\nldap_use_sasl: no\nldap_bind_dn: uid=%LDAP\u691c\u7d22\u7528\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local\nldap_password: %\u30d1\u30b9\u30ef\u30fc\u30c9%\nldap_mech: PLAIN\nldap_auth_method: bind\nldap_filter: (|(uid=%U)(sAMAccountName=%U))\nldap_scope: sub\nldap_search_base: dc=ldap,dc=XXXX,dc=local\nldap_deref: always\n```\n\n<h2>\uff14\uff0euid\u306b\u8a72\u5f53\u3059\u308b\u30e6\u30fc\u30b6\u3067\u78ba\u8a8d</h2>\n```text:\u30b3\u30de\u30f3\u30c9\n# ldapsearch -x -D \"uid=%LDAP\u691c\u7d22\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local\" \"(|(uid=partnera)(sAMAccountName=partnera))\" -W\n```\n\n```text:\u7d50\u679c(LDAP\u304b\u3089\u306e\u8fd4\u5374\u5024)\n# extended LDIF\n#\n# LDAPv3\n# base <> with scope subtree\n# filter: (|(uid=partnera)(sAMAccountName=partnera))\n# requesting: ALL\n#\n\n# partnera, partner, ldap.XXXX.local\ndn: uid=partnera,ou=partner,dc=ldap,dc=XXXX,dc=local\nobjectClass: top\nobjectClass: inetOrgPerson\nuid: partnera\nmail: partnerA@XXXX.co.jp\ngivenName: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nsn: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ncn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nuserPassword:: e1NTSEF9a3RoQUpKZE5icmFUNUlQRkE3a1BZdm5heHN4R1RscHRkbm95VEdSS1p\n ETT0=\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 2\n```\n\n<h2>\uff15\uff0esAMAccountName\u306b\u8a72\u5f53\u3059\u308b\u30e6\u30fc\u30b6\u3067\u78ba\u8a8d</h2>\n```text:\u30b3\u30de\u30f3\u30c9\n# ldapsearch -x -D \"uid=%LDAP\u691c\u7d22\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local\" \"(|(uid=%\u793e\u54e1\u756a\u53f7%)(sAMAccountName=%\u793e\u54e1\u756a\u53f7%))\" -W\n```\n\n```text:\u7d50\u679c\uff08ActiveDirectory\u304b\u3089\u306e\u8fd4\u5374\u5024\uff09\n# extended LDIF\n#\n# LDAPv3\n# base <> with scope subtree\n# filter: (|(uid=%\u793e\u54e1\u756a\u53f7%)(sAMAccountName=%\u793e\u54e1\u756a\u53f7%))\n# requesting: ALL\n#\n\n# %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%, OU_Users, XXXX.local\ndn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nobjectClass: top\nobjectClass: person\nobjectClass: organizationalPerson\nobjectClass: user\ncn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nsn:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ndescription:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ngivenName:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ndistinguishedName:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\ninstanceType: 4\nwhenCreated: 20120329081907.0Z\nwhenChanged: 20141217011450.0Z\ndisplayName:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nuSNCreated: 8558\nuSNChanged: 7815826\nname:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nobjectGUID:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\nuserAccountControl: 512\nbadPwdCount: 0\ncodePage: 0\ncountryCode: 0\nbadPasswordTime: 130607728713210993\nlastLogoff: 0\nlastLogon: 130632524744753546\npwdLastSet: 130632524908555646\nprimaryGroupID: 513\nobjectSid:: %\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u5024%\naccountExpires: 9223372036854775807\nlogonCount: 12\nsAMAccountName: %\u793e\u54e1\u756a\u53f7%\nsAMAccountType: 805306368\nuserPrincipalName: %\u793e\u54e1\u756a\u53f7%@XXXX.local\nlockoutTime: 0\nobjectCategory: cn=Person,cn=Schema,cn=Configuration,dc=XXXX,dc=local\ndSCorePropagationData: 20140108085735.0Z\ndSCorePropagationData: 16010101000000.0Z\nLASTLOGONTIMESTAMP: 130632509056134209\nmail: mailLocalPart@XXXX.co.jp\n\n# search result\nsearch: 2\nresult: 0 Success\n\n# numResponses: 2\n# numEntries: 1\n```\n\n<h2>\uff16\uff0eSubversion\u306e\u8a2d\u5b9a</h2>\n```text:svnserve.conf\n[sasl]\nuse-sasl = true\n```\n\u4e0a\u8a18\u3092\u8ffd\u52a0\n\n```text:/usr/lib64/sasl2/svn.conf\npwcheck_method: saslauthd\nauxprop_plugin: ldap\nmech_list: PLAIN\nldapdb_mech: PLAIN\n```\n\u4e0a\u8a18\u306e\u5185\u5bb9\u3067\u65b0\u898f\u4f5c\u6210\n\n<h2>\u304a\u307e\u3051\uff0ephpLDAPadmin</h2>\n```text:/etc/phpldapadmin/config.php\n$servers->setValue('login','attr','uid'); #\u30b3\u30e1\u30f3\u30c8\u30a4\u30f3\u3000\n# \u4ee5\u4e0b\u3092\u6700\u4e0b\u884c\u306e\u3000?>\u3000\u524d\u306b\u8ffd\u52a0\n$servers->setValue('server','base',array('dc=XXXX,dc=local','dc=ldap,dc=XXXX,dc=local'));\n$servers->setValue('login','base',array('dc=ldap,dc=XXXX,dc=local'));\n$servers->setValue('login','bind_id','uid=%LDAP\u691c\u7d22\u30e6\u30fc\u30b6\u30fc%,ou=system,dc=ldap,dc=XXXX,dc=local');\n$servers->setValue('login','bind_pass','%\u30d1\u30b9\u30ef\u30fc\u30c9%');\n$servers->setValue('login','fallback_dn',true);\n```\n\n\u4e0a\u8a18\u306e\u8a2d\u5b9a\u3067LDAP\u306fuid,dn\u3001ActiveDirectory\u306fdn\u6307\u5b9a\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u306b\u306a\u308b\u3002\n"}