{"context": "\n\n\u30e1\u30cb\u30e5\u30fc\n\n\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u30b4\u30fc\u30eb\n\nServerspec \u306e\u5404\u7a2e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\nDocker \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066 Dockerfile \u306e\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\nInfrataster \u3092\u5229\u7528\u3057\u3066 Web \u30b5\u30a4\u30c8\u306e\u632f\u308b\u821e\u3044\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\n\u304a\u307e\u3051\u3067 Jenkins \u3092\u5229\u7528\u3057\u3066\u30c6\u30b9\u30c8\u3001Docker Hub \u3078\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u81ea\u52d5\u5316\u3082\u884c\u3044\u307e\u3059\n\n\n\u6ce8\u610f\n\n\u8cc7\u6599\u306e\u898b\u65b9\n\u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n\u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\n\n\u53c2\u8003\u8cc7\u6599\n\n\u53c2\u8003 URL\n\u53c2\u8003\u66f8\u7c4d\n\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\n\u30cf\u30f3\u30ba\u30aa\u30f3\u6559\u6750\n\n\n1. \u4e8b\u524d\u6e96\u5099\n1.1. Serverspec \u3092\u5b9f\u884c\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n1.2. \u4eee\u60f3\u30de\u30b7\u30f3\u306b Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1.3. \u4eee\u60f3\u30de\u30b7\u30f3\u306b Serverspec \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1.4. \u4eee\u60f3\u30de\u30b7\u30f3\u306b Docker Engine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1.5. \u69cb\u6210\u306e\u78ba\u8a8d\n\n\n\u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u30b4\u30fc\u30eb\n\nServerspec \u3067\u63d0\u4f9b\u3055\u308c\u308b\u5404\u7a2e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\nDocker \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066 Dockerfile \u306e\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\nInfrataster \u3092\u5229\u7528\u3057\u3066 Web \u30b5\u30a4\u30c8\u306e\u632f\u308b\u821e\u3044\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\n\n\n\n\u6ce8\u610f\n\n\u8cc7\u6599\u306e\u898b\u65b9\n\u4ee5\u4e0b\u3001\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u8868\u793a\u3067\u3059\u3002\n\ncommand\n# \u30b3\u30e1\u30f3\u30c8\u3067\u3059\n\n# \u30cf\u30f3\u30ba\u30aa\u30f3\u5185\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\uff08\u30b3\u30d4\u30fc\uff06\u30da\u30fc\u30b9\u30c8\u3067\u8cbc\u308a\u4ed8\u3051\u3066\u5229\u7528\u3057\u3066\u4e0b\u3055\u3044\uff09\ncommand \"foo\" \"bar\"\n\n\n\u4ee5\u4e0b\u3001\u51fa\u529b\u4f8b\u306e\u8868\u793a\u3067\u3059\u3002\n\noutput\n# \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5f8c\u306e\u51fa\u529b\u4f8b\u3067\u3059\nfoo\nbar\n\n\n\u4e0a\u8a18\u306b\u5b9f\u884c\u4f8b\u3068\u7570\u306a\u308b\u51fa\u529b\u3092\u78ba\u8a8d\u3057\u305f\u5834\u5408\u306b\u306f\u304a\u58f0\u304c\u3051\u4e0b\u3055\u3044\u3002\n\n\u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n\n\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u5186\u6ed1\u306b\u9032\u3081\u308b\u306b\u3042\u305f\u3063\u3066\u4e8b\u524d\u6e96\u5099\u306f\u51fa\u6765\u308b\u3060\u3051\u884c\u3046\u3088\u3046\u306b\u3057\u3066\u4e0b\u3055\u3044\n\n\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\nOS\n\n\noutput\n$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 14.04.4 LTS\nRelease:        14.04\nCodename:       trusty\n\n\n\nRuby\n\n\noutput\n$ ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n\n\n\nServerspec\n\n\noutput\n$ bundle exec gem list | grep serverspec\nserverspec (2.36.0)\n\n\n\nInfrataster\n\n\noutput\n$ bundle exec gem list | grep infrataster\ninfrataster (0.3.2)\n\n\n\nDocker Engine\n\n\noutput\n$ docker version\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\n\n\n\u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\u672c\u65e5\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u30cf\u30f3\u30ba\u30aa\u30f3\u7d42\u4e86\u5f8c\u3001\u4e0d\u8981\u3067\u3042\u308c\u3070\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n\u53c2\u8003\u8cc7\u6599\n\n\u53c2\u8003 URL\n\nhttp://serverspec.org/\n\n\n\u53c2\u8003\u66f8\u7c4d\n\nhttp://www.oreilly.co.jp/books/9784873117096/\n\n\n\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\n\n\nServerspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08\u4e8b\u524d\u6e96\u5099\u7de8\uff09\u203b\u672c\u8cc7\u6599\u3067\u3059\nServerspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08\u5b9f\u8df5\u7de8\uff09\n\nServerspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08Jenkins \u304a\u3058\u3055\u3093\u304a\u5c4a\u3051\u7de8\uff09\n\n\n\u30cf\u30f3\u30ba\u30aa\u30f3\u6559\u6750\n\nhttps://github.com/inokappa/handson-serverspec\n\n\n\n1. \u4e8b\u524d\u6e96\u5099\n\n\u6982\u8981\n1-1. Serverspec \u3092\u5b9f\u884c\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n1-2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1-3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Serverspec \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1-4. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Docker Engine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1-5. \u69cb\u6210\n\n1.1. Serverspec \u3092\u5b9f\u884c\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n\n1.1.1. \u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\nServerspec \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Ubuntu Serve 14.04 LTS 64bit \u3067\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n\n\u74b0\u5883\nAMI ID / \u30a4\u30e1\u30fc\u30b8\u540d / Vagrant Box\n\u53c2\u8003\u624b\u9806\n\n\n\n\nAWS\nami-a21529cc\n\u4f53\u80b2\u4f1a\u7cfb Amazon EC2 \u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806\n\n\nIDCF Cloud\nUbuntu Serve 14.04 LTS 64bit\n\u4f53\u80b2\u4f1a\u7cfb IDCF Cloud \u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806\n\n\n\u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3\nubuntu/trusty64\nvagrant init ubuntu/trusty64; vagrant up --provider virtualbox\n\n\n\n\u4e0a\u8a18\u306e\u4f55\u308c\u304b\u306e\u69cb\u6210\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3055\u308c\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u524d\u63d0\u306b\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u9032\u3081\u307e\u3059\u3002\n\n1.1.2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u4e8b\u524d\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\n\n\n1.1.3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u4e8b\u524d\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\n\n\n1.2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n1.2.1. rbenv \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\ncommand\n#\n# \u5099\u8003\uff1aidcf \u30af\u30e9\u30a6\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u3066 root \u306b\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f sudo \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n#\n\n# apt-get update \u3092\u5b9f\u884c\u3059\u308b\nsudo apt-get update\n\n# Ruby \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nsudo apt-get install -y autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm3 libgdbm-dev git\n\n# rbenv \u3092 git clone \u3059\u308b\ngit clone https://github.com/rbenv/rbenv.git ~/.rbenv\n\n# Ruby \u3092\u30d3\u30eb\u30c9\u3059\u308b\u70ba\u306b\u5fc5\u8981\u306a ruby-build \u3092 git clone \u3059\u308b\ngit clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build\n\n# rbenv \u3078\u306e\u30d1\u30b9\u3092\u901a\u3059\necho 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' >> ~/.bash_profile\n\n# rbenv \u3092\u521d\u671f\u5316\u3059\u308b\necho 'eval \"$(rbenv init -)\"' >> ~/.bash_profile\n\n# rbenv \u3092\u5229\u7528\u3059\u308b\u70ba\u306b .bash_profile \u306e\u518d\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3046\nsource ~/.bash_profile\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 rbenv \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\ncommand\n# rbenv \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\nrbenv --version\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\n#\n# \u5099\u8003\uff1a\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u5dee\u7570\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n#\n\nrbenv 1.0.0-21-g9fdce5d\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 rbenv \u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\ncommand\nrbenv\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\nrbenv 1.0.0-21-g9fdce5d\nUsage: rbenv <command> [<args>]\n\nSome useful rbenv commands are:\n   commands    List all available rbenv commands\n   local       Set or show the local application-specific Ruby version\n   global      Set or show the global Ruby version\n   shell       Set or show the shell-specific Ruby version\n   install     Install a Ruby version using ruby-build\n   uninstall   Uninstall a specific Ruby version\n   rehash      Rehash rbenv shims (run this after installing executables)\n   version     Show the current Ruby version and its origin\n   versions    List all Ruby versions available to rbenv\n   which       Display the full path to an executable\n   whence      List all Ruby versions that contain the given executable\n\nSee `rbenv help <command>' for information on a specific command.\nFor full documentation, see: https://github.com/rbenv/rbenv#readme\n\n\ninstall \u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n\n1.2.2. rbenv \u3092\u5229\u7528\u3057\u3066 Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Ruby 2.3.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\ncommand\nrbenv install -v 2.3.1\n\n\n\u30d3\u30eb\u30c9\u306b\u66ab\u304f\u6642\u9593\u304c\u639b\u304b\u308b\u306e\u3067\u30d3\u30fc\u30eb\u3067\u3082\u5451\u3093\u3067\u5f85\u6a5f\u3057\u3066\u304a\u304f\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u7d42\u4e86\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Ruby 2.3.1 \u304c\u5229\u7528\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\n\ncommand\nrbenv global 2.3.1\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Ruby \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\ncommand\nruby -v\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\n#\n# \u5099\u8003\uff1a\u30ea\u30d3\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u5dee\u7570\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n#\n\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n\n\n\n1.2.3. bundler \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 bundler \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\ncommand\ngem install bundler --no-ri --no-rdoc -V\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\n(snip)\n\nSuccessfully installed bundler-1.12.5\n1 gem installed\n\n\n\n1.3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Serverspec \u3068 Infrataster \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n1.3.1. \u6559\u6750\u3092 git clone \u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u6559\u6750\u3092 git clone \u3059\u308b\u3002\n\ncommand\ngit clone https://github.com/inokappa/handson-serverspec.git\n\n\n\n1.3.2. budler \u3092\u5229\u7528\u3057\u3066 Serverspec \u3068 Infrataster \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Serverspec \u3068 Infrataster \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\ncommand\ncd handson-serverspec\nbundle install --path vendor/bundle\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutout\n(snip)\n\nBundle complete! 4 Gemfile dependencies, 39 gems now installed.\nBundled gems are installed into ./vendor/bundler.\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Servespec \u3068 Infrataster \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\ncommand\nbundle exec gem list | egrep 'serverspec|infrataster'\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\n#\n# \u5099\u8003\uff1a\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u5dee\u7570\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n#\n\ninfrataster (0.3.2)\nserverspec (2.36.0)\n\n\n\n1.4. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Docker Engine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n1.4.1. \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u9806\u756a\u306b\u5b9f\u884c\u3059\u308b\n\ncommand\n#\n# \u5099\u8003\uff1aidcf \u30af\u30e9\u30a6\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u3066 root \u306b\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f sudo \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n#\nsudo apt-get -y install apt-transport-https ca-certificates unzip\nsudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\nsudo sh -c 'echo \"deb https://apt.dockerproject.org/repo ubuntu-trusty main\" > /etc/apt/sources.list.d/docker.list'\nsudo apt-get update\nsudo apt-get -y install docker-engine\n\n\n\n1.4.2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3053\u3068\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\n\ncommand\nsudo docker version\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\n\n\n1.4.3. \u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067 docker \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u51fa\u6765\u308b\u3088\u3046\u306b\u3082\u3046\u3072\u3068\u624b\u9593\u52a0\u3048\u308b\n\u203b idcf \u30af\u30e9\u30a6\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u3066 root \u306b\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u672c\u30b9\u30c6\u30c3\u30d7\u306f\u5b9f\u65bd\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n\ncommand\nsudo usermod -aG docker ${USER}\nid ${USER}\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\n#\n# vagrant \u3067\u8a66\u3057\u305f\u4f8b\u3067\u3059\n#\n\nuid=1000(vagrant) gid=1000(vagrant) groups=1000(vagrant),999(docker)\n\n\n\u4e00\u5ea6\u3001SSH \u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\n\n1.4.5. \u518d\u3073\u30ed\u30b0\u30a4\u30f3\u3057\u3066 docker \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n\ncommand\ndocker version\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\n\n\n1.5. \u69cb\u6210\u306e\u78ba\u8a8d\n\n1.5.1. \u69cb\u6210\u56f3\n\u4e8b\u524d\u6e96\u5099\u304c\u5b8c\u4e86\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u304c\u5229\u7528\u53ef\u80fd\u306a\u72b6\u614b\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\n\n1.5.2. Serverspec \u3067\u30c6\u30b9\u30c8\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u6e96\u5099\u3057\u305f\u69cb\u6210\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3002\n\ncommand\ncd ~/handson-serverspec/\nbundle exec rspec spec/local_exec_spec.rb\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\noutput\nOS \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f Ubuntu 14.04 \u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n  Command \"lsb_release -a\"\n    stdout\n      should match /Ubuntu 14.04/\n\ndocker-engine \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n  Package \"docker-engine\"\n    should be installed\n\ndocker-engine \u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068 / docker \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n  Service \"docker\"\n    should be running\n  Command \"docker version\"\n    stdout\n      should match /1.11.2/\n\nRuby \u3084 servespec / infrataster \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n  \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b Ruby \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.3.1 \u3067\u3042\u308b\n  Serverspec \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\n  Infrataster \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\n\nFinished in 0.8244 seconds (files took 0.7915 seconds to load)\n7 examples, 0 failures\n\n\n\u5b9f\u969b\u306e\u51fa\u529b\u753b\u9762\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3002\n\n\u4e0a\u56f3\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308c\u3070\u4e8b\u524d\u6e96\u5099\u306f\u5b8c\u4e86\u3068\u306a\u308b\u3002\n\u300cServerspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08\u5b9f\u8df5\u7de8\uff09\u300d\u306b\u7d9a\u304f...\n\n## \u30e1\u30cb\u30e5\u30fc\n\n### \u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u30b4\u30fc\u30eb\n\n- Serverspec \u306e\u5404\u7a2e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\n- Docker \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066 Dockerfile \u306e\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\n- Infrataster \u3092\u5229\u7528\u3057\u3066 Web \u30b5\u30a4\u30c8\u306e\u632f\u308b\u821e\u3044\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\n- \u304a\u307e\u3051\u3067 Jenkins \u3092\u5229\u7528\u3057\u3066\u30c6\u30b9\u30c8\u3001Docker Hub \u3078\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u306e\u81ea\u52d5\u5316\u3082\u884c\u3044\u307e\u3059\n\n### \u6ce8\u610f\n\n- \u8cc7\u6599\u306e\u898b\u65b9\n- \u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n- \u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n- \u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\n### \u53c2\u8003\u8cc7\u6599\n\n- \u53c2\u8003 URL\n- \u53c2\u8003\u66f8\u7c4d\n- \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\n- \u30cf\u30f3\u30ba\u30aa\u30f3\u6559\u6750\n\n### 1. \u4e8b\u524d\u6e96\u5099\n\n1.1. Serverspec \u3092\u5b9f\u884c\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n1.2. \u4eee\u60f3\u30de\u30b7\u30f3\u306b Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1.3. \u4eee\u60f3\u30de\u30b7\u30f3\u306b Serverspec \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1.4. \u4eee\u60f3\u30de\u30b7\u30f3\u306b Docker Engine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1.5. \u69cb\u6210\u306e\u78ba\u8a8d\n\n***\n\n## \u672c\u30cf\u30f3\u30ba\u30aa\u30f3\u306e\u30b4\u30fc\u30eb\n\n- Serverspec \u3067\u63d0\u4f9b\u3055\u308c\u308b\u5404\u7a2e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u8a66\u3057\u3066\u307f\u307e\u3059\n- Docker \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u5229\u7528\u3057\u3066 Dockerfile \u306e\u30c6\u30b9\u30c8\u3092\u4f5c\u6210\u3057\u3001\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\n- Infrataster \u3092\u5229\u7528\u3057\u3066 Web \u30b5\u30a4\u30c8\u306e\u632f\u308b\u821e\u3044\u306e\u30c6\u30b9\u30c8\u3092\u884c\u3044\u307e\u3059\n\n***\n\n## \u6ce8\u610f\n\n### \u8cc7\u6599\u306e\u898b\u65b9\n\n\u4ee5\u4e0b\u3001\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u306e\u8868\u793a\u3067\u3059\u3002\n\n~~~sh:command\n# \u30b3\u30e1\u30f3\u30c8\u3067\u3059\n\n# \u30cf\u30f3\u30ba\u30aa\u30f3\u5185\u3067\u5b9f\u884c\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3067\u3059\uff08\u30b3\u30d4\u30fc\uff06\u30da\u30fc\u30b9\u30c8\u3067\u8cbc\u308a\u4ed8\u3051\u3066\u5229\u7528\u3057\u3066\u4e0b\u3055\u3044\uff09\ncommand \"foo\" \"bar\"\n~~~\n\n\u4ee5\u4e0b\u3001\u51fa\u529b\u4f8b\u306e\u8868\u793a\u3067\u3059\u3002\n\n~~~sh:output\n# \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u5f8c\u306e\u51fa\u529b\u4f8b\u3067\u3059\nfoo\nbar\n~~~\n\n\u4e0a\u8a18\u306b\u5b9f\u884c\u4f8b\u3068\u7570\u306a\u308b\u51fa\u529b\u3092\u78ba\u8a8d\u3057\u305f\u5834\u5408\u306b\u306f\u304a\u58f0\u304c\u3051\u4e0b\u3055\u3044\u3002\n\n### \u4e8b\u524d\u6e96\u5099\u306b\u3064\u3044\u3066\n\n- \u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u5186\u6ed1\u306b\u9032\u3081\u308b\u306b\u3042\u305f\u3063\u3066\u4e8b\u524d\u6e96\u5099\u306f\u51fa\u6765\u308b\u3060\u3051\u884c\u3046\u3088\u3046\u306b\u3057\u3066\u4e0b\u3055\u3044\n\n### \u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u3064\u3044\u3066\n\n\u8cc7\u6599\u5185\u3067\u7d39\u4ecb\u3059\u308b\u5404\u7a2e\u30c4\u30fc\u30eb\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n- OS\n\n~~~sh:output\n$ lsb_release -a\nNo LSB modules are available.\nDistributor ID: Ubuntu\nDescription:    Ubuntu 14.04.4 LTS\nRelease:        14.04\nCodename:       trusty\n~~~\n\n- Ruby\n\n~~~sh:output\n$ ruby -v\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n~~~\n\n- Serverspec\n\n~~~sh:output\n$ bundle exec gem list | grep serverspec\nserverspec (2.36.0)\n~~~\n\n- Infrataster\n\n~~~sh:output\n$ bundle exec gem list | grep infrataster\ninfrataster (0.3.2)\n~~~\n\n- Docker Engine\n\n~~~sh:output\n$ docker version\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n~~~\n\n### \u5f8c\u7247\u4ed8\u3051\u306f\u3057\u3063\u304b\u308a\u3068\n\n\u672c\u65e5\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306f\u30cf\u30f3\u30ba\u30aa\u30f3\u7d42\u4e86\u5f8c\u3001\u4e0d\u8981\u3067\u3042\u308c\u3070\u524a\u9664\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n***\n\n## \u53c2\u8003\u8cc7\u6599\n\n### \u53c2\u8003 URL\n\n- http://serverspec.org/\n\n### \u53c2\u8003\u66f8\u7c4d\n\n- http://www.oreilly.co.jp/books/9784873117096/\n\n### \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\n\n- [Serverspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08\u4e8b\u524d\u6e96\u5099\u7de8\uff09](http://qiita.com/inokappa/private/43bb47745b3565b9b69f)\u203b\u672c\u8cc7\u6599\u3067\u3059\n- [Serverspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08\u5b9f\u8df5\u7de8\uff09\n](http://qiita.com/inokappa/private/f96c0939331b24236bc0)\n- [Serverspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08Jenkins \u304a\u3058\u3055\u3093\u304a\u5c4a\u3051\u7de8\uff09](http://qiita.com/inokappa/private/f9f624ec5ea01937b840)\n\n### \u30cf\u30f3\u30ba\u30aa\u30f3\u6559\u6750\n\n- https://github.com/inokappa/handson-serverspec\n\n***\n\n## 1. \u4e8b\u524d\u6e96\u5099\n\n### \u6982\u8981\n\n1-1. Serverspec \u3092\u5b9f\u884c\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n1-2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1-3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Serverspec \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1-4. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Docker Engine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n1-5. \u69cb\u6210\n\n### 1.1. Serverspec \u3092\u5b9f\u884c\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n\n#### 1.1.1. \u4eee\u60f3\u30de\u30b7\u30f3\u3092\u7528\u610f\u3059\u308b\n\nServerspec \u3092\u52d5\u304b\u3059\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Ubuntu Serve 14.04 LTS 64bit \u3067\u4f5c\u6210\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\u3002\n\n| \u74b0\u5883 | AMI ID / \u30a4\u30e1\u30fc\u30b8\u540d / Vagrant Box | \u53c2\u8003\u624b\u9806 |\n|:---|:---|:---|\n| AWS | ami-a21529cc | [\u4f53\u80b2\u4f1a\u7cfb Amazon EC2 \u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806](http://qiita.com/inokappa/private/25a98ca152850e373f02) |\n| IDCF Cloud | Ubuntu Serve 14.04 LTS 64bit | [\u4f53\u80b2\u4f1a\u7cfb IDCF Cloud \u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092 Vagrant \u7d4c\u7531\u3067\u8d77\u52d5\u3059\u308b\u624b\u9806](http://qiita.com/inokappa/private/1e184f28d48178817bbc) |\n| \u30ed\u30fc\u30ab\u30eb\u30de\u30b7\u30f3 | ubuntu/trusty64 | `vagrant init ubuntu/trusty64; vagrant up --provider virtualbox` |\n\n\u4e0a\u8a18\u306e\u4f55\u308c\u304b\u306e\u69cb\u6210\u3067\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3055\u308c\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u524d\u63d0\u306b\u30cf\u30f3\u30ba\u30aa\u30f3\u3092\u9032\u3081\u307e\u3059\u3002\n\n#### 1.1.2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n- \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u4e8b\u524d\u306b SSH \u3067\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\n\n#### 1.1.3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\n\n- \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u4e8b\u524d\u306b HTTP \u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3057\u3087\u3046\n\n### 1.2. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n#### 1.2.1. rbenv \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n~~~sh:command\n#\n# \u5099\u8003\uff1aidcf \u30af\u30e9\u30a6\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u3066 root \u306b\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f sudo \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n#\n\n# apt-get update \u3092\u5b9f\u884c\u3059\u308b\nsudo apt-get update\n\n# Ruby \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nsudo apt-get install -y autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm3 libgdbm-dev git\n\n# rbenv \u3092 git clone \u3059\u308b\ngit clone https://github.com/rbenv/rbenv.git ~/.rbenv\n\n# Ruby \u3092\u30d3\u30eb\u30c9\u3059\u308b\u70ba\u306b\u5fc5\u8981\u306a ruby-build \u3092 git clone \u3059\u308b\ngit clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build\n\n# rbenv \u3078\u306e\u30d1\u30b9\u3092\u901a\u3059\necho 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' >> ~/.bash_profile\n\n# rbenv \u3092\u521d\u671f\u5316\u3059\u308b\necho 'eval \"$(rbenv init -)\"' >> ~/.bash_profile\n\n# rbenv \u3092\u5229\u7528\u3059\u308b\u70ba\u306b .bash_profile \u306e\u518d\u8aad\u307f\u8fbc\u307f\u3092\u884c\u3046\nsource ~/.bash_profile\n~~~\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 rbenv \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:command\n# rbenv \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\nrbenv --version\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\n#\n# \u5099\u8003\uff1a\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u5dee\u7570\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n#\n\nrbenv 1.0.0-21-g9fdce5d\n~~~\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 rbenv \u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:command\nrbenv\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\nrbenv 1.0.0-21-g9fdce5d\nUsage: rbenv <command> [<args>]\n\nSome useful rbenv commands are:\n   commands    List all available rbenv commands\n   local       Set or show the local application-specific Ruby version\n   global      Set or show the global Ruby version\n   shell       Set or show the shell-specific Ruby version\n   install     Install a Ruby version using ruby-build\n   uninstall   Uninstall a specific Ruby version\n   rehash      Rehash rbenv shims (run this after installing executables)\n   version     Show the current Ruby version and its origin\n   versions    List all Ruby versions available to rbenv\n   which       Display the full path to an executable\n   whence      List all Ruby versions that contain the given executable\n\nSee `rbenv help <command>' for information on a specific command.\nFor full documentation, see: https://github.com/rbenv/rbenv#readme\n~~~\n\n`install` \u306e\u30b5\u30d6\u30b3\u30de\u30f3\u30c9\u304c\u5229\u7528\u53ef\u80fd\u3067\u3042\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n\n#### 1.2.2. rbenv \u3092\u5229\u7528\u3057\u3066 Ruby \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Ruby 2.3.1 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n~~~sh:command\nrbenv install -v 2.3.1\n~~~\n\n\u30d3\u30eb\u30c9\u306b\u66ab\u304f\u6642\u9593\u304c\u639b\u304b\u308b\u306e\u3067\u30d3\u30fc\u30eb\u3067\u3082\u5451\u3093\u3067\u5f85\u6a5f\u3057\u3066\u304a\u304f\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u7d42\u4e86\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Ruby 2.3.1 \u304c\u5229\u7528\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304f\u3002\n\n~~~sh:command\nrbenv global 2.3.1\n~~~\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Ruby \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:command\nruby -v\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\n#\n# \u5099\u8003\uff1a\u30ea\u30d3\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u5dee\u7570\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n#\n\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]\n~~~\n\n#### 1.2.3. bundler \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 bundler \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n~~~sh:command\ngem install bundler --no-ri --no-rdoc -V\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\n(snip)\n\nSuccessfully installed bundler-1.12.5\n1 gem installed\n~~~\n\n### 1.3. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Serverspec \u3068 Infrataster \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n#### 1.3.1. \u6559\u6750\u3092 git clone \u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u6559\u6750\u3092 `git clone` \u3059\u308b\u3002\n\n~~~sh:command\ngit clone https://github.com/inokappa/handson-serverspec.git\n~~~\n\n#### 1.3.2. budler \u3092\u5229\u7528\u3057\u3066 Serverspec \u3068 Infrataster \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Serverspec \u3068 Infrataster \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n~~~sh:command\ncd handson-serverspec\nbundle install --path vendor/bundle\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:outout\n(snip)\n\nBundle complete! 4 Gemfile dependencies, 39 gems now installed.\nBundled gems are installed into ./vendor/bundler.\n~~~\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066 Servespec \u3068 Infrataster \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:command\nbundle exec gem list | egrep 'serverspec|infrataster'\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\n#\n# \u5099\u8003\uff1a\u30d0\u30fc\u30b8\u30e7\u30f3\u756a\u53f7\u306b\u5dee\u7570\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n#\n\ninfrataster (0.3.2)\nserverspec (2.36.0)\n~~~\n\n### 1.4. \u4f5c\u6210\u3057\u305f\u4eee\u60f3\u30de\u30b7\u30f3\u306b Docker Engine \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n#### 1.4.1. \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u9806\u756a\u306b\u5b9f\u884c\u3059\u308b\n\n~~~sh:command\n#\n# \u5099\u8003\uff1aidcf \u30af\u30e9\u30a6\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u3066 root \u306b\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f sudo \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n#\nsudo apt-get -y install apt-transport-https ca-certificates unzip\nsudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D\nsudo sh -c 'echo \"deb https://apt.dockerproject.org/repo ubuntu-trusty main\" > /etc/apt/sources.list.d/docker.list'\nsudo apt-get update\nsudo apt-get -y install docker-engine\n~~~\n\n#### 1.4.2. \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u3053\u3068\u3092\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\n\n~~~sh:command\nsudo docker version\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n~~~\n\n#### 1.4.3. \u30e6\u30fc\u30b6\u30fc\u6a29\u9650\u3067 docker \u30b3\u30de\u30f3\u30c9\u3092\u5229\u7528\u51fa\u6765\u308b\u3088\u3046\u306b\u3082\u3046\u3072\u3068\u624b\u9593\u52a0\u3048\u308b\n\n\u203b idcf \u30af\u30e9\u30a6\u30c9\u3092\u5229\u7528\u3057\u3066\u3044\u3066 root \u306b\u3066\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u306f\u672c\u30b9\u30c6\u30c3\u30d7\u306f\u5b9f\u65bd\u3059\u308b\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\n\n~~~sh:command\nsudo usermod -aG docker ${USER}\nid ${USER}\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\n#\n# vagrant \u3067\u8a66\u3057\u305f\u4f8b\u3067\u3059\n#\n\nuid=1000(vagrant) gid=1000(vagrant) groups=1000(vagrant),999(docker)\n~~~\n\n\u4e00\u5ea6\u3001SSH \u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\n\n#### 1.4.5. \u518d\u3073\u30ed\u30b0\u30a4\u30f3\u3057\u3066 docker \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n\n~~~sh:command\ndocker version\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\nClient:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n\nServer:\n Version:      1.11.2\n API version:  1.23\n Go version:   go1.5.4\n Git commit:   b9f10c9\n Built:        Wed Jun  1 21:47:50 2016\n OS/Arch:      linux/amd64\n~~~\n\n### 1.5. \u69cb\u6210\u306e\u78ba\u8a8d\n\n#### 1.5.1. \u69cb\u6210\u56f3\n\n\u4e8b\u524d\u6e96\u5099\u304c\u5b8c\u4e86\u3059\u308b\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u304c\u5229\u7528\u53ef\u80fd\u306a\u72b6\u614b\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\n![2016061901.png](https://qiita-image-store.s3.amazonaws.com/0/87189/6f21e282-9725-9b9b-a43a-b4dcd0d4aec9.png \"2016061901.png\")\n\n#### 1.5.2. Serverspec \u3067\u30c6\u30b9\u30c8\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u6e96\u5099\u3057\u305f\u69cb\u6210\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3002\n\n~~~sh:command\ncd ~/handson-serverspec/\nbundle exec rspec spec/local_exec_spec.rb\n~~~\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n~~~sh:output\nOS \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f Ubuntu 14.04 \u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n  Command \"lsb_release -a\"\n    stdout\n      should match /Ubuntu 14.04/\n\ndocker-engine \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n  Package \"docker-engine\"\n    should be installed\n\ndocker-engine \u8d77\u52d5\u3057\u3066\u3044\u308b\u3053\u3068 / docker \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3059\u308b\n  Service \"docker\"\n    should be running\n  Command \"docker version\"\n    stdout\n      should match /1.11.2/\n\nRuby \u3084 servespec / infrataster \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n  \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b Ruby \u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f 2.3.1 \u3067\u3042\u308b\n  Serverspec \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\n  Infrataster \u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\n\nFinished in 0.8244 seconds (files took 0.7915 seconds to load)\n7 examples, 0 failures\n~~~\n\n\u5b9f\u969b\u306e\u51fa\u529b\u753b\u9762\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3002\n\n![2016062501.png](https://qiita-image-store.s3.amazonaws.com/0/87189/9e0ca5f3-eab7-2494-b154-4cf293d3595b.png \"2016062501.png\")\n\n\u4e0a\u56f3\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u308c\u3070\u4e8b\u524d\u6e96\u5099\u306f\u5b8c\u4e86\u3068\u306a\u308b\u3002\n\n\u300c[Serverspec \u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\uff08\u5b9f\u8df5\u7de8\uff09](http://qiita.com/inokappa/items/f96c0939331b24236bc0)\u300d\u306b\u7d9a\u304f...\n", "tags": ["serverspec", "\u30cf\u30f3\u30ba\u30aa\u30f3", "\u4e8b\u524d\u6e96\u5099", "specinfra", "Infrataster"]}