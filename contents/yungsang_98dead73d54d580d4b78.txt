{"context": " More than 1 year has passed since last update.Dongri's Blog - docker-sharing \u7528\u306e Vagrantfile \u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\n\nVagrantfile\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.define \"boot2docker\"\n\n  config.vm.box = \"yungsang/boot2docker\"\n\n  config.vm.network :forwarded_port, guest: 2375, host: 4243, disabled: true\n\n  config.vm.network :private_network, ip: \"192.168.33.10\"\n\n  config.vm.synced_folder \".\", \"/var/app\", type: \"nfs\"\n\n  # Fix busybox/udhcpc issue\n  config.vm.provision :shell do |s|\n    s.inline = <<-EOT\n      if ! grep -qs ^nameserver /etc/resolv.conf; then\n        sudo /sbin/udhcpc\n      fi\n      cat /etc/resolv.conf\n    EOT\n  end\n\n  # Adjust datetime after suspend and resume\n  config.vm.provision :shell do |s|\n    s.inline = <<-EOT\n      sudo /usr/local/bin/ntpclient -s -h pool.ntp.org\n      date\n    EOT\n  end\n\n  config.vm.provision :shell do |s|\n    s.inline = <<-EOT\n      docker rm -f nodejs || true\n    EOT\n  end\n\n  config.vm.provision :docker do |d|\n    d.build_image \"/var/app/node/\", args: \"-t dongri/node\"\n    d.run \"nodejs\", image: \"dongri/node\", args: \"-p 3000:3000\"\n  end\n\n  config.vm.network :forwarded_port, guest: 3000, host: 3000\nend\n\n\n$ git clone git@github.com:dongri/Dockerfiles.git\n$ cd Dockerfiles\n$ edit Vagrantfile\n$ vagrant up\n$ open http://localhost:3000\n\n\u3042\u3068\u306f\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u305f\u3089 vagrant provision \u3092\u3084\u308b\u611f\u3058\u3067\u3002\n[Dongri's Blog - docker-sharing](http://dongri.github.io/articles/2014/06/17/docker-sharing/) \u7528\u306e Vagrantfile \u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\n\n```ruby:Vagrantfile\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.define \"boot2docker\"\n\n  config.vm.box = \"yungsang/boot2docker\"\n\n  config.vm.network :forwarded_port, guest: 2375, host: 4243, disabled: true\n\n  config.vm.network :private_network, ip: \"192.168.33.10\"\n\n  config.vm.synced_folder \".\", \"/var/app\", type: \"nfs\"\n\n  # Fix busybox/udhcpc issue\n  config.vm.provision :shell do |s|\n    s.inline = <<-EOT\n      if ! grep -qs ^nameserver /etc/resolv.conf; then\n        sudo /sbin/udhcpc\n      fi\n      cat /etc/resolv.conf\n    EOT\n  end\n\n  # Adjust datetime after suspend and resume\n  config.vm.provision :shell do |s|\n    s.inline = <<-EOT\n      sudo /usr/local/bin/ntpclient -s -h pool.ntp.org\n      date\n    EOT\n  end\n\n  config.vm.provision :shell do |s|\n    s.inline = <<-EOT\n      docker rm -f nodejs || true\n    EOT\n  end\n\n  config.vm.provision :docker do |d|\n    d.build_image \"/var/app/node/\", args: \"-t dongri/node\"\n    d.run \"nodejs\", image: \"dongri/node\", args: \"-p 3000:3000\"\n  end\n\n  config.vm.network :forwarded_port, guest: 3000, host: 3000\nend\n```\n\n```\n$ git clone git@github.com:dongri/Dockerfiles.git\n$ cd Dockerfiles\n$ edit Vagrantfile\n$ vagrant up\n$ open http://localhost:3000\n```\n\n\u3042\u3068\u306f\u30b3\u30fc\u30c9\u3092\u4fee\u6b63\u3057\u305f\u3089 `vagrant provision` \u3092\u3084\u308b\u611f\u3058\u3067\u3002\n", "tags": ["docker", "vagrant", "boot2docker", "nodejs"]}