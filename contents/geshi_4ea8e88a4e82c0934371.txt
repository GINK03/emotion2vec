{"tags": ["rake", "RSpec", "Rails"], "context": " More than 1 year has passed since last update.\u307b\u3068\u3093\u3069\u5b9a\u578b\u6587\u3067\u3059\u3002\u7406\u89e3\u3057\u306a\u3044\u3067\u3082\u304b\u3051\u307e\u3059\u3002\nlib/tasks/sample.rake\ntask sample: :environment do\n  user = User.first\n  user.destroy!\nend\n\nspec/lib/tasks/sample_spec.rb\n\nrequire 'rails_helper'\nrequire 'rake'\n\ndescribe 'sample' do\n  before(:all) do\n    @rake = Rake::Application.new\n    Rake.application = @rake\n    Rake.application.rake_require('sample', [\"#{Rails.root}/lib/tasks\"])\n    Rake::Task.define_task(:environment)\n  end\n\n\n  describe 'sample' do\n    subject { @rake['sample'].execute }\n\n    it 'returns hoge' do\n      user = create(:user)\n      expect{ subject }.to change(User, :count).by(-1)\n    end\n  end\nend\n\n\n\n\n\u307b\u3068\u3093\u3069\u5b9a\u578b\u6587\u3067\u3059\u3002\u7406\u89e3\u3057\u306a\u3044\u3067\u3082\u304b\u3051\u307e\u3059\u3002\n\n\nlib/tasks/sample.rake\n\n```ruby\ntask sample: :environment do\n  user = User.first\n  user.destroy!\nend\n```\n\n\n\nspec/lib/tasks/sample_spec.rb\n\n```ruby\n\nrequire 'rails_helper'\nrequire 'rake'\n\ndescribe 'sample' do\n  before(:all) do\n    @rake = Rake::Application.new\n    Rake.application = @rake\n    Rake.application.rake_require('sample', [\"#{Rails.root}/lib/tasks\"])\n    Rake::Task.define_task(:environment)\n  end\n\n\n  describe 'sample' do\n    subject { @rake['sample'].execute }\n    \n    it 'returns hoge' do\n      user = create(:user)\n      expect{ subject }.to change(User, :count).by(-1)\n    end\n  end\nend\n\n\n```\n\n"}