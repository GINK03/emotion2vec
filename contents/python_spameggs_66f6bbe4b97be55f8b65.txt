{"tags": ["docker", "CentOS6"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30b9\u30da\u30c3\u30af\ndocker v1.3.3\ncentos6.5\n\n\u306a\u305c\u5897\u3084\u3057\u305f\n\u521d\u671f\u8a2d\u5b9a\u306e10GB\u3060\u3068\u8db3\u308a\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u5897\u3084\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u3061\u306a\u307f\u306b\n# cat /var/lib/docker/devicemapper/metadata/\n{\"device_id\":0,\"size\":10737418240,\"transaction_id\":1,\"initialized\":true}\n\n\u3053\u308c\u3067\u78ba\u8a8d\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3069\u3046\u3084\u3063\u3066\u5897\u3084\u3059\nDocker\u3067\u30eb\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u30b5\u30a4\u30ba\u3092\u8abf\u6574\u3059\u308b\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u305f\u3068\u3053\u308d\n/etc/sysconfig/docker-storage\u3092\u7528\u610f\u3057\u3066\u300cDOCKER_STORAGE_OPTIONS=\" --storage-opt dm.basesize=40G\" \u300d\u3092\u8ffd\u52a0\u3057\u3066\u3042\u3052\u308c\u3070\u3044\u3044\u306e\u304b\u3068\u601d\u3063\u3066\n# service docker stop\n# rm -rf /var/lib/docekr\n/etc/sysconfig/docker-storage # \u8ffd\u52a0\n# service docker start\n\n\u3053\u306e\u3088\u3046\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u304c\n# cat /var/lib/docker/devicemapper/metadata/base\n{\"device_id\":0,\"size\":10737418240,\"transaction_id\":1,\"initialized\":true}\n\n\u3068\u5897\u3048\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u5c11\u3057\u9055\u3063\u3066\u3044\u305f\nhttps://github.com/docker/docker/tree/ec1002db58e8f84fc6d8306a3dd580e5fa88872c/contrib/init/sysvinit-redhat\nDocker\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306b\u306f\u4e0a\u8a18\u306eURL\u304b\u3089init\u3092\u6301\u3063\u3066\u304d\u3066docker\u306fgithub\u306b\u3042\u308b\u30d0\u30a4\u30ca\u30ea\u3092\u4f7f\u3063\u3066\u307e\u3057\u305f\u3002\ninit\u306edocker\u306e\u65b9\u3092\u898b\u3066\u307f\u308b\u3068\n# Description: Daemon for docker.com\n### END INIT INFO\n\n# Source function library.\n. /etc/rc.d/init.d/functions\n\nprog=\"docker\"\nexec=\"/usr/bin/$prog\"\npidfile=\"/var/run/$prog.pid\"\nlockfile=\"/var/lock/subsys/$prog\"\nlogfile=\"/var/log/$prog\"\n\n[ -e /etc/sysconfig/$prog ] && . /etc/sysconfig/$prog\n\nprestart() {\n\n\u4e00\u90e8\u629c\u7c8b\u3067\u3059\u304c\u3001/etc/sysconfig/$prog\u3068/etc/sysconfig/docker\u306e\u307f\u53e9\u3044\u3066\u3044\u307e\u3057\u305f\u3002\n\u3067\u3059\u306e\u3067\u3001/etc/sys/config/docker-storage\u3067\u306a\u304f\u3066/etc/sysconfig/docker\u3092\u5909\u66f4\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nbefore\n# /etc/sysconfig/docker\n#\n# Other arguments to pass to the docker daemon process\n# These will be parsed by the sysv initscript and appended\n# to the arguments list passed to docker daemon\n\nother_args=\"\"\n\n\nafter\n# /etc/sysconfig/docker\n#\n# Other arguments to pass to the docker daemon process\n# These will be parsed by the sysv initscript and appended\n# to the arguments list passed to docker -d\n\nother_args=\" --storage-opt dm.basesize=40G\"\n\n\u3068\u5909\u3048\u3066\u3042\u3052\u3066\u5148\u307b\u3069\u306e\u624b\u9806\u3092\u884c\u3063\u305f\u3068\u3053\u308d\n# cat /var/lib/docker/devicemapper/metadata/base\n{\"device_id\":0,\"size\":42949672960,\"transaction_id\":1,\"initialized\":true}\n\n\u5897\u3084\u3059\u3053\u3068\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n\u7d42\u308f\u308a\n\u4eca\u56de\u8abf\u3079\u3066\u307f\u305f\u3089\u307b\u3068\u3093\u3069/etc/sysconfig/docker-storage\u306b\u300cDOCKER_STORAGE_OPTIONS=\" --storage-opt dm.basesize=40G\"\u300d\u3092\u8a18\u8f09\u3057\u3066\u3042\u3052\u308c\u3070\u3044\u3044\u3068\u306e\u4e8b\u3060\u3063\u305f\u306e\u3067v1.3.3\u3088\u308a\u5927\u304d\u3044Docker\u306a\u3089\u3070\u3053\u306e\u304a\u65b9\u6cd5\u306f\u5fc5\u8981\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n###\u30b9\u30da\u30c3\u30af\ndocker v1.3.3\ncentos6.5\n\n##\u306a\u305c\u5897\u3084\u3057\u305f\n\u521d\u671f\u8a2d\u5b9a\u306e10GB\u3060\u3068\u8db3\u308a\u306a\u304f\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u5897\u3084\u3059\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n\u3061\u306a\u307f\u306b\n\n```\n# cat /var/lib/docker/devicemapper/metadata/\n{\"device_id\":0,\"size\":10737418240,\"transaction_id\":1,\"initialized\":true}\n```\n\u3053\u308c\u3067\u78ba\u8a8d\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n##\u3069\u3046\u3084\u3063\u3066\u5897\u3084\u3059\n[Docker\u3067\u30eb\u30fc\u30c8\u30c7\u30a3\u30b9\u30af\u30b5\u30a4\u30ba\u3092\u8abf\u6574\u3059\u308b](http://qiita.com/HommaHomma/items/a3ad028ba619aae76fa9)\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u305f\u3068\u3053\u308d\n/etc/sysconfig/docker-storage\u3092\u7528\u610f\u3057\u3066\u300cDOCKER_STORAGE_OPTIONS=\" --storage-opt dm.basesize=40G\" \u300d\u3092\u8ffd\u52a0\u3057\u3066\u3042\u3052\u308c\u3070\u3044\u3044\u306e\u304b\u3068\u601d\u3063\u3066\n\n```\n# service docker stop\n# rm -rf /var/lib/docekr\n/etc/sysconfig/docker-storage # \u8ffd\u52a0\n# service docker start\n```\n\u3053\u306e\u3088\u3046\u306b\u5bfe\u5fdc\u3057\u307e\u3057\u305f\u304c\n\n```\n# cat /var/lib/docker/devicemapper/metadata/base\n{\"device_id\":0,\"size\":10737418240,\"transaction_id\":1,\"initialized\":true}\n```\n\u3068\u5897\u3048\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n##\u5c11\u3057\u9055\u3063\u3066\u3044\u305f\nhttps://github.com/docker/docker/tree/ec1002db58e8f84fc6d8306a3dd580e5fa88872c/contrib/init/sysvinit-redhat\nDocker\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u30b5\u30fc\u30d0\u30fc\u306b\u306f\u4e0a\u8a18\u306eURL\u304b\u3089init\u3092\u6301\u3063\u3066\u304d\u3066docker\u306fgithub\u306b\u3042\u308b\u30d0\u30a4\u30ca\u30ea\u3092\u4f7f\u3063\u3066\u307e\u3057\u305f\u3002\ninit\u306edocker\u306e\u65b9\u3092\u898b\u3066\u307f\u308b\u3068\n\n```\n# Description: Daemon for docker.com\n### END INIT INFO\n\n# Source function library.\n. /etc/rc.d/init.d/functions\n\nprog=\"docker\"\nexec=\"/usr/bin/$prog\"\npidfile=\"/var/run/$prog.pid\"\nlockfile=\"/var/lock/subsys/$prog\"\nlogfile=\"/var/log/$prog\"\n\n[ -e /etc/sysconfig/$prog ] && . /etc/sysconfig/$prog\n\nprestart() {\n```\n\u4e00\u90e8\u629c\u7c8b\u3067\u3059\u304c\u3001/etc/sysconfig/$prog\u3068/etc/sysconfig/docker\u306e\u307f\u53e9\u3044\u3066\u3044\u307e\u3057\u305f\u3002\n\u3067\u3059\u306e\u3067\u3001/etc/sys/config/docker-storage\u3067\u306a\u304f\u3066/etc/sysconfig/docker\u3092\u5909\u66f4\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n####before\n\n```\n# /etc/sysconfig/docker\n#\n# Other arguments to pass to the docker daemon process\n# These will be parsed by the sysv initscript and appended\n# to the arguments list passed to docker daemon\n\nother_args=\"\"\n```\n\n####after\n\n```\n# /etc/sysconfig/docker\n#\n# Other arguments to pass to the docker daemon process\n# These will be parsed by the sysv initscript and appended\n# to the arguments list passed to docker -d\n\nother_args=\" --storage-opt dm.basesize=40G\"\n```\n\u3068\u5909\u3048\u3066\u3042\u3052\u3066\u5148\u307b\u3069\u306e\u624b\u9806\u3092\u884c\u3063\u305f\u3068\u3053\u308d\n\n```\n# cat /var/lib/docker/devicemapper/metadata/base\n{\"device_id\":0,\"size\":42949672960,\"transaction_id\":1,\"initialized\":true}\n```\n\n\u5897\u3084\u3059\u3053\u3068\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\n\n##\u7d42\u308f\u308a\n\u4eca\u56de\u8abf\u3079\u3066\u307f\u305f\u3089\u307b\u3068\u3093\u3069/etc/sysconfig/docker-storage\u306b\u300cDOCKER_STORAGE_OPTIONS=\" --storage-opt dm.basesize=40G\"\u300d\u3092\u8a18\u8f09\u3057\u3066\u3042\u3052\u308c\u3070\u3044\u3044\u3068\u306e\u4e8b\u3060\u3063\u305f\u306e\u3067v1.3.3\u3088\u308a\u5927\u304d\u3044Docker\u306a\u3089\u3070\u3053\u306e\u304a\u65b9\u6cd5\u306f\u5fc5\u8981\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n"}