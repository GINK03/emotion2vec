{"context": "\n\n\u306f\u3058\u3081\u306b\n\u4ee5\u524d\u66f8\u3044\u305fGolang\u306eGin/bindata\u3067\u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30ca\u30ea\u3092\u8a66\u3057\u3066\u307f\u305f(+React)\u306e\u7d9a\u304d\u3067\u3059\u3002\u4eca\u56de\u306fReact\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u8ffd\u52a0\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u306a\u304a\u3001Golang\u3067\u4f7f\u3048\u308bJavaScript\u30a8\u30f3\u30b8\u30f3\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306fgo-duktape\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\u30b5\u30a4\u30c8\u306b\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u304c\u8a18\u8f09\u3055\u308c\u3066\u304a\u308a\u305d\u3053\u305d\u3053\u901f\u305d\u3046\u3067\u3059\u3002\u307e\u305f\u3001go-duktape\u306e\u4f5c\u8005\u306e\u65b9\u304cgo-starter-kit\u3068\u3044\u3046Echo + React\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u3066\u304f\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066Gin\u5411\u3051\u306b\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u4f5c\u3063\u305f\u3082\u306e\nhttps://github.com/wadahiro/gin-react-boilerplate/tree/server-side-rendering \u306b\u3042\u308a\u307e\u3059\u3002\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\u524d\u56de\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u3002\u524d\u56de\u304b\u3089\u5909\u66f4\u3057\u305f\u3001\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u90e8\u5206\u306f\u203b1\uff5e4\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\ngin-react-boilerplate\n\u251c\u2500assets\n\u2502  \u251c\u2500css\n\u2502  \u2502  \u2514\u2500main.css\n\u2502  \u251c\u2500index.html\n\u2502  \u2514\u2500js\n\u2502      \u2514\u2500bundle.js\n\u251c\u2500client\n\u2502  \u251c\u2500app\n\u2502  \u2502  \u2514\u2500App.jsx\n\u2502  \u251c\u2500index.jsx  \u203b1\n\u2502  \u2514\u2500webpack\n\u2502      \u251c\u2500webpack.base.config.js\n\u2502      \u251c\u2500webpack.config.js\n\u2502      \u251c\u2500webpack.dev.config.js\n\u2502      \u251c\u2500webpack.prod.config.js\n\u2502      \u2514\u2500webpack.server.js\n\u251c\u2500dist\n\u251c\u2500.gitignore\n\u251c\u2500package.json\n\u251c\u2500runner.conf\n\u2514\u2500server\n   \u251c\u2500controllers\n   \u2502  \u2514\u2500home.go\n   \u251c\u2500templates\n   \u2502  \u2514\u2500react.html  \u203b2\n   \u2502\u2500main.go  \u203b3\n   \u2502\u2500react.go  \u203b4\n   \u2514\u2500utils.go\n\n\n\u203b1 index.jsx: React\u306e\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u7528\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\u203b2 react.html: \u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u306eHTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u51e6\u7406\u3067\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u203b3 main.go: Gin\u3067\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067HTML\u3092\u751f\u6210\u3057\u3066\u8fd4\u3059\u3088\u3046\u306b\u30cf\u30f3\u30c9\u30e9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u203b4 react.go: go-duktape\u3092\u4f7f\u3063\u3066JavaScript\u3092\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067\u51e6\u7406\u3055\u305b\u308b\u90e8\u5206\u3002Gin\u306eHandle\u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002 go-duktape\u306e\u4f5c\u8005\u304c\u4f5c\u3063\u3066\u3044\u308bgo-starter-kit\u306eserver/react.go\u3092\u53c2\u8003\u306b\u3057\u3001Gin\u5411\u3051\u306b\u4fee\u6b63\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3001\u4e0a\u8a184\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066\u8a73\u7d30\u3092\u8a18\u8f09\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nindex.jsx\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570window\u306e\u3042\u308a/\u306a\u3057\u3067\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\u3057\u3001\u51e6\u7406\u3092\u5206\u3051\u3066\u3044\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u306e\u5834\u5408\u306fglobal.main\u95a2\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u304creact.go\u306e\u51e6\u7406\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u95a2\u6570\u5185\u3067\u306f\u3001\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u7528\u306eAPI\u3067\u3042\u308bReactDOMServer.renderToString\u3092\u4f7f\u3063\u3066HTML\u6587\u5b57\u5217\u3092\u751f\u6210\u3057\u307e\u3059\u3002callback\u95a2\u6570\u306b\u751f\u6210\u3057\u305fHTML\u6587\u5b57\u5217\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306ecallback\u95a2\u6570\u3082react.go\u306e\u4e2d\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u306b\u306a\u308a\u3001\u305d\u3061\u3089\u3067\u6700\u7d42\u7684\u306aHTML\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u3002\nif (typeof window !== 'undefined') {\n    ReactDOM.render(<App />, document.getElementById('app'));\n} else {\n    global.main = (options, callback) => {\n        // console.log('render server side', JSON.stringify(options))\n        const s = ReactDOMServer.renderToString(React.createElement(App, {}));\n\n        callback(JSON.stringify({\n            uuid: options.uuid,\n            app: s,\n            title: null,\n            meta: null,\n            initial: null,\n            error: null,\n            redirect: null\n        }));\n    };\n}\n\n\nreact.html\n\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u6642\u306b\u8fd4\u3059HTML\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u4f7f\u3044\u307e\u3059\u3002\u30dd\u30a4\u30f3\u30c8\u306f<div id=\"app\">{{ .HTMLApp }}</div>\u306e\u90e8\u5206\u3002\u3053\u3053\u306b\u5148\u307b\u3069\u306eReactDOMServer.renderToString\u3067\u751f\u6210\u3055\u308c\u305fHTML\u304c\u6d41\u3057\u8fbc\u307e\u308c\u307e\u3059\u3002\n<!DOCTYPE html>\n<html data-uuid=\"{{ .UUID }}\">\n  ...\n  <body>\n    ...\n    <div id=\"app\">{{ .HTMLApp }}</div>\n    <script onload=\"this.parentElement.removeChild(this)\">window['--app-initial'] = JSON.parse(\"{{if .Initial}}{{ .Initial }}{{else}}{}{{end}}\");</script>\n    <script async defer src=\"js/bundle.js\" onload=\"this.parentElement.removeChild(this)\"></script>\n  </body>\n</html>\n\n\nmain.go\n\nmain\u51e6\u7406\u3060\u3051\u629c\u7c8b\u3057\u3066\u30dd\u30a4\u30f3\u30c8\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n\nfunc main() {\n    r := gin.Default()\n\n    r.HTMLRender = loadTemplates(\"react.html\")\n\n    r.Use(func(c *gin.Context) {\n        id, _ := uuid.NewV4()\n        c.Set(\"uuid\", id)\n    })\n\n    // add routes\n    r.GET(\"/api/home\", controllers.Home)\n\n    react := NewReact(\n        \"assets/js/bundle.js\",\n        true,\n        r,\n    )\n\n    r.GET(\"/\", react.Handle)\n\n    // We can't use router.Static method to use '/' for static files.\n    // see https://github.com/gin-gonic/gin/issues/75\n    // r.StaticFS(\"/\", assetFS())\n    r.Use(static.Serve(\"/\", BinaryFileSystem(\"assets\")))\n\n    port := os.Getenv(\"PORT\")\n    if len(port) == 0 {\n        port = \"3000\"\n    }\n    r.Run(\":\" + port)\n}\n\n\n\nr.HTMLRender = loadTemplates(\"react.html\") \u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\u901a\u5e38\u3001Gin\u3060\u3068LoadHTMLGlob\u3092\u4f7f\u3063\u3066\u8aad\u307f\u8fbc\u307f\u307e\u3059\u304c\u3001bindata\u3092\u4f7f\u3063\u3066\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307e\u305b\u308b\u305f\u3081\u306bmultitemplate\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\u8a73\u3057\u304f\u306f\u3001Use templates from go-bindata?\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nreact.go\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308bNewReact\u3092\u547c\u3073\u3060\u3057\u3001r.GET(\"/\", react.Handle)\u3067Gin\u306e\u30cf\u30f3\u30c9\u30e9\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u3067/\u4ee5\u4e0b\u306e\u30a2\u30af\u30bb\u30b9\u3067\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u7d50\u679c\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\u306a\u304a\u3001NewReact\u306e\u7b2c2\u5f15\u6570\u306btrue\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u304c\u3001false\u3092\u6e21\u3059\u3068bundle.js\u3092\u6700\u521d\u306b\u8aad\u307f\u8fbc\u3093\u3067\u30d7\u30fc\u30eb\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u3001\u9ad8\u901f\u306b\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u958b\u767a\u6642\u306fJavaScript\u306e\u5909\u66f4\u3092\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u53cd\u6620\u3055\u305b\u305f\u3044\u305f\u3081\u3001false\u3092\u6e21\u3057\u307e\u3059\u3002\n\n\nreact.go\n\n\u9577\u3044\u306e\u3067\u30dd\u30a4\u30f3\u30c8\u3060\u3051\u629c\u7c8b\u3002\n\nHandle\u95a2\u6570\u304cGin\u306e\u30cf\u30f3\u30c9\u30e9\u5b9f\u88c5\u3002\u3053\u3053\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u53d7\u3051\u3064\u3051\u305f\u6642\u306e\u8d77\u70b9\u3068\u306a\u308a\u307e\u3059\u3002vm.Handle\u95a2\u6570\u306e\u51e6\u7406\u7d50\u679c\u3068\u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u7528\u306e\u69cb\u9020\u5316\u30c7\u30fc\u30bfResp\u3092\u53d7\u3051\u53d6\u308a\u3001c.HTML(http.StatusOK, \"react.html\", re)\u306b\u3066HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6d41\u3057\u8fbc\u307e\u308c\u3001\u6700\u7d42\u7684\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u306a\u308bHTML\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\nfunc (r *React) Handle(c *gin.Context) {\n    ...\n\n    select {\n    case re := <-vm.Handle(map[string]interface{}{\n        \"url\":     c.Request.URL.String(),\n        \"headers\": c.Request.Header,\n        \"uuid\":    UUID.String(),\n    }):\n        re.RenderTime = time.Since(start)\n        // Return vm back to the pool\n        r.put(vm)\n        // Handle the Response\n        if len(re.Redirect) == 0 && len(re.Error) == 0 {\n            // If no redirection and no errors\n            c.Header(\"X-React-Render-Time\", fmt.Sprintf(\"%s\", re.RenderTime))\n            c.HTML(http.StatusOK, \"react.html\", re)\n            // If redirect\n        } else if len(re.Redirect) != 0 {\n            c.Redirect(http.StatusMovedPermanently, re.Redirect)\n            // If internal error\n        } else if len(re.Error) != 0 {\n            c.Header(\"X-React-Render-Time\", fmt.Sprintf(\"%s\", re.RenderTime))\n            c.HTML(http.StatusInternalServerError, \"react.html\", re)\n        }\n\n\n\nvm.Handle\u95a2\u6570\u306e\u4e2d\u8eab\u3067\u3059\u3002PevalString\u95a2\u6570\u3092\u547c\u3073\u3001index.jsx\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305fJavaScript\u306eglobal.main\u95a2\u6570\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002__goServerCallback__\u306f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5909\u6570\u540d\u3067\u3059\u3002\n\n// Handle handles http requests\nfunc (r *ReactVM) Handle(req map[string]interface{}) <-chan Resp {\n    b, err := json.Marshal(req)\n    Must(err)\n    // Keep it sync with `client/index.jsx`\n    r.PevalString(`main(` + string(b) + `, __goServerCallback__)`)\n    return r.ch\n}\n\n\n\n__goServerCallback__\u306fnewReactVM\u95a2\u6570\u306e\u4e2d\u3067\u521d\u671f\u5316\u51e6\u7406\u6642\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002index.jsx\u304b\u3089\u53d7\u3051\u53d6\u3063\u305fJSON\u6587\u5b57\u5217\u304b\u3089Resp\u69cb\u9020\u4f53\u306e\u30c7\u30fc\u30bf\u3092\u751f\u6210\u3057\u3001\u30c1\u30e3\u30cd\u30eb\u3092\u901a\u3058\u3066\u8fd4\u3059\u95a2\u6570\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nfunc newReactVM(filePath string, engine http.Handler) *ReactVM {\n    ...\n\n    vm.PushGlobalGoFunction(\"__goServerCallback__\", func(ctx *duktape.Context) int {\n        result := ctx.SafeToString(-1)\n        vm.ch <- func() Resp {\n            var re Resp\n            json.Unmarshal([]byte(result), &re)\n            return re\n        }()\n        return 0\n    })\n\n\n\nResp\u69cb\u9020\u4f53\u306e\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002App\u306bindex.jsx\u3067\u751f\u6210\u3057\u305fHTML\u6587\u5b57\u5217\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u6587\u5b57\u5217\u306f\u3001HTMLApp\u95a2\u6570\u3092\u7d4c\u7531\u3057\u3066react.html\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\ntype Resp struct {\n    UUID       string        `json:\"uuid\"`\n    Error      string        `json:\"error\"`\n    Redirect   string        `json:\"redirect\"`\n    App        string        `json:\"app\"`\n    Title      string        `json:\"title\"`\n    Meta       string        `json:\"meta\"`\n    Initial    string        `json:\"initial\"`\n    RenderTime time.Duration `json:\"-\"`\n}\n\n// HTMLApp returns a application template\nfunc (r Resp) HTMLApp() template.HTML {\n    return template.HTML(r.App)\n}\n\n// HTMLMeta returns a meta data\nfunc (r Resp) HTMLMeta() template.HTML {\n    return template.HTML(r.Meta)\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u30d3\u30eb\u30c9\uff06\u5b9f\u884c\u3057\u3066 http://localhost:3000/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306eHTML\u304c\u8fd4\u308a\u307e\u3059\u3002React\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u3057\u306a\u3044\u5834\u5408\u306f<div id=\"app\"></div>\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u3061\u3083\u3093\u3068\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067React\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u304c\u884c\u308f\u308c\u305f\u7d50\u679c\u306eHTML\u304c\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n<!DOCTYPE html>\n<html data-uuid=\"7dca6e5c-3b3d-40fb-778d-867fc2a05425\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <link rel=\"stylesheet\" href=\"css/main.css\">\n    <title></title>\n\n  </head>\n  <body>\n\n    <div id=\"app\"><div data-reactid=\".b363pa5tp4\" data-react-checksum=\"133442110\"><span data-reactid=\".b363pa5tp4.0\">Message: </span><span data-reactid=\".b363pa5tp4.1\"></span></div></div>\n    <script onload=\"this.parentElement.removeChild(this)\">window['--app-initial'] = JSON.parse(\"{}\");</script>\n    <script async defer src=\"js/bundle.js\" onload=\"this.parentElement.removeChild(this)\"></script>\n  </body>\n</html>\n\n\u524d\u56de\u540c\u69d8\u3001\u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30ca\u30ea\u3068\u3057\u3066\u3082\u3082\u3061\u308d\u3093\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\n\u6027\u80fd\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u51e6\u7406\u6642\u9593\u306f\u3069\u3093\u306a\u3082\u306e\u304b\u3001\u5358\u4f53\u6027\u80fd\u3060\u3051\u898b\u3066\u307f\u307e\u3057\u305f\u3002\nGin\u304c\u51fa\u3059\u51e6\u7406\u6642\u9593\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001192ms\u3068\u5fae\u5999\u306a\u7d50\u679c\u304c\u3001\u3001\u3001\uff1f\n[GIN] 2016/03/30 - 12:31:18 |[97;42m 200 [0m|    192.0244ms | ::1 |[97;44m  [0m GET     /\n[GIN] 2016/03/30 - 12:31:18 |[90;47m 304 [0m|             0 | ::1 |[97;44m  [0m GET     /css/main.css\n[GIN] 2016/03/30 - 12:31:18 |[90;47m 304 [0m|     20.0026ms | ::1 |[97;44m  [0m GET     /js/bundle.js\n[GIN] 2016/03/30 - 12:31:19 |[97;42m 200 [0m|             0 | ::1 |[97;44m  [0m GET     /api/home\n\n\u3053\u308c\u306f\u5358\u306breact.go\u3067bundle.js\u3092\u30d7\u30fc\u30eb\u3055\u305b\u305a\u306b\u52d5\u304b\u3057\u3066\u3044\u305f\u305f\u3081\u3067\u3057\u305f\u3002main.go\u306eNewReact\u306e\u5f15\u6570\u306bfalse\u3092\u6e21\u3057\u3066\u30c7\u30d0\u30c3\u30b0\u30e2\u30fc\u30c9\u3092\u30aa\u30d5\u306b\u3057\u3066\u518d\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\nmain.go\n    react := NewReact(\n        \"assets/js/bundle.js\",\n        false,\n        r,\n    )\n\n\n\u7d50\u679c\u306f\u30d7\u30fc\u30eb\u304c\u52b9\u304d\u30012.5ms\u3068\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u5358\u4f53\u6027\u80fd\u306f\u304b\u306a\u308a\u901f\u3044\uff01\u3002\n[GIN] 2016/03/30 - 12:32:44 |[97;42m 200 [0m|      2.5003ms | ::1 |[97;44m  [0m GET     /\n[GIN] 2016/03/30 - 12:32:44 |[90;47m 304 [0m|             0 | ::1 |[97;44m  [0m GET     /css/main.css\n[GIN] 2016/03/30 - 12:32:45 |[90;47m 304 [0m|     21.5027ms | ::1 |[97;44m  [0m GET     /js/bundle.js\n[GIN] 2016/03/30 - 12:32:45 |[97;42m 200 [0m|             0 | ::1 |[97;44m  [0m GET     /api/home\n\n\n\u307e\u3068\u3081\n\nGolang\u3067\u3082React\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306f\u3067\u304d\u308b\u3002\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u5358\u4f53\u6027\u80fd\u3082\u826f\u3055\u305d\u3046\u3002\u9ad8\u8ca0\u8377\u6642\u306b\u3069\u3046\u306a\u308b\u304b\u306f\u4eca\u5f8c\u8a66\u3057\u3066\u307f\u305f\u3044\u3002\n\n# \u306f\u3058\u3081\u306b\n\n\u4ee5\u524d\u66f8\u3044\u305f[Golang\u306eGin/bindata\u3067\u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30ca\u30ea\u3092\u8a66\u3057\u3066\u307f\u305f(+React)](http://qiita.com/wadahiro/items/4173788d54f028936723)\u306e\u7d9a\u304d\u3067\u3059\u3002\u4eca\u56de\u306fReact\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u8ffd\u52a0\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u306a\u304a\u3001Golang\u3067\u4f7f\u3048\u308bJavaScript\u30a8\u30f3\u30b8\u30f3\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u307e\u3059\u304c\u3001\u4eca\u56de\u306f[go-duktape](https://github.com/olebedev/go-duktape)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\u30b5\u30a4\u30c8\u306b\u30d9\u30f3\u30c1\u30de\u30fc\u30af\u304c\u8a18\u8f09\u3055\u308c\u3066\u304a\u308a\u305d\u3053\u305d\u3053\u901f\u305d\u3046\u3067\u3059\u3002\u307e\u305f\u3001`go-duktape`\u306e\u4f5c\u8005\u306e\u65b9\u304c[go-starter-kit](https://github.com/olebedev/go-starter-kit)\u3068\u3044\u3046Echo + React\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u4f5c\u3063\u3066\u304f\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066Gin\u5411\u3051\u306b\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u4f5c\u3063\u305f\u3082\u306e\n\nhttps://github.com/wadahiro/gin-react-boilerplate/tree/server-side-rendering \u306b\u3042\u308a\u307e\u3059\u3002\n\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\n[\u524d\u56de](http://qiita.com/wadahiro/items/4173788d54f028936723)\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u3002\u524d\u56de\u304b\u3089\u5909\u66f4\u3057\u305f\u3001\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u90e8\u5206\u306f\u203b1\uff5e4\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n\n```\ngin-react-boilerplate\n\u251c\u2500assets\n\u2502  \u251c\u2500css\n\u2502  \u2502  \u2514\u2500main.css\n\u2502  \u251c\u2500index.html\n\u2502  \u2514\u2500js\n\u2502      \u2514\u2500bundle.js\n\u251c\u2500client\n\u2502  \u251c\u2500app\n\u2502  \u2502  \u2514\u2500App.jsx\n\u2502  \u251c\u2500index.jsx  \u203b1\n\u2502  \u2514\u2500webpack\n\u2502      \u251c\u2500webpack.base.config.js\n\u2502      \u251c\u2500webpack.config.js\n\u2502      \u251c\u2500webpack.dev.config.js\n\u2502      \u251c\u2500webpack.prod.config.js\n\u2502      \u2514\u2500webpack.server.js\n\u251c\u2500dist\n\u251c\u2500.gitignore\n\u251c\u2500package.json\n\u251c\u2500runner.conf\n\u2514\u2500server\n   \u251c\u2500controllers\n   \u2502  \u2514\u2500home.go\n   \u251c\u2500templates\n   \u2502  \u2514\u2500react.html  \u203b2\n   \u2502\u2500main.go  \u203b3\n   \u2502\u2500react.go  \u203b4\n   \u2514\u2500utils.go\n```\n\n* \u203b1 `index.jsx`: React\u306e\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u7528\u306e\u30b3\u30fc\u30c9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n* \u203b2 `react.html`: \u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u306eHTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u51e6\u7406\u3067\u4f7f\u7528\u3057\u307e\u3059\u3002\n* \u203b3 `main.go`: Gin\u3067\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067HTML\u3092\u751f\u6210\u3057\u3066\u8fd4\u3059\u3088\u3046\u306b\u30cf\u30f3\u30c9\u30e9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n* \u203b4 `react.go`: `go-duktape`\u3092\u4f7f\u3063\u3066JavaScript\u3092\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067\u51e6\u7406\u3055\u305b\u308b\u90e8\u5206\u3002Gin\u306eHandle\u3092\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002 `go-duktape`\u306e\u4f5c\u8005\u304c\u4f5c\u3063\u3066\u3044\u308b[go-starter-kit](https://github.com/olebedev/go-starter-kit)\u306e`server/react.go`\u3092\u53c2\u8003\u306b\u3057\u3001Gin\u5411\u3051\u306b\u4fee\u6b63\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u3001\u4e0a\u8a184\u30d5\u30a1\u30a4\u30eb\u306b\u3064\u3044\u3066\u8a73\u7d30\u3092\u8a18\u8f09\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n# `index.jsx`\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u5909\u6570`window`\u306e\u3042\u308a/\u306a\u3057\u3067\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u5224\u5b9a\u3057\u3001\u51e6\u7406\u3092\u5206\u3051\u3066\u3044\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u306e\u5834\u5408\u306f`global.main`\u95a2\u6570\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u95a2\u6570\u304c`react.go`\u306e\u51e6\u7406\u304b\u3089\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u95a2\u6570\u5185\u3067\u306f\u3001\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u7528\u306eAPI\u3067\u3042\u308b`ReactDOMServer.renderToString`\u3092\u4f7f\u3063\u3066HTML\u6587\u5b57\u5217\u3092\u751f\u6210\u3057\u307e\u3059\u3002`callback`\u95a2\u6570\u306b\u751f\u6210\u3057\u305fHTML\u6587\u5b57\u5217\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u306e`callback`\u95a2\u6570\u3082`react.go`\u306e\u4e2d\u3067\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u95a2\u6570\u306b\u306a\u308a\u3001\u305d\u3061\u3089\u3067\u6700\u7d42\u7684\u306aHTML\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u8fd4\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js\nif (typeof window !== 'undefined') {\n    ReactDOM.render(<App />, document.getElementById('app'));\n} else {\n    global.main = (options, callback) => {\n        // console.log('render server side', JSON.stringify(options))\n        const s = ReactDOMServer.renderToString(React.createElement(App, {}));\n\n        callback(JSON.stringify({\n            uuid: options.uuid,\n            app: s,\n            title: null,\n            meta: null,\n            initial: null,\n            error: null,\n            redirect: null\n        }));\n    };\n}\n```\n\n# `react.html`\n\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u6642\u306b\u8fd4\u3059HTML\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u4f7f\u3044\u307e\u3059\u3002\u30dd\u30a4\u30f3\u30c8\u306f`<div id=\"app\">{{ .HTMLApp }}</div>`\u306e\u90e8\u5206\u3002\u3053\u3053\u306b\u5148\u307b\u3069\u306e`ReactDOMServer.renderToString`\u3067\u751f\u6210\u3055\u308c\u305fHTML\u304c\u6d41\u3057\u8fbc\u307e\u308c\u307e\u3059\u3002\n\n```html\n<!DOCTYPE html>\n<html data-uuid=\"{{ .UUID }}\">\n  ...\n  <body>\n    ...\n    <div id=\"app\">{{ .HTMLApp }}</div>\n    <script onload=\"this.parentElement.removeChild(this)\">window['--app-initial'] = JSON.parse(\"{{if .Initial}}{{ .Initial }}{{else}}{}{{end}}\");</script>\n    <script async defer src=\"js/bundle.js\" onload=\"this.parentElement.removeChild(this)\"></script>\n  </body>\n</html>\n```\n\n# `main.go`\n\nmain\u51e6\u7406\u3060\u3051\u629c\u7c8b\u3057\u3066\u30dd\u30a4\u30f3\u30c8\u3092\u8a18\u8f09\u3057\u307e\u3059\u3002\n\n```go\n\nfunc main() {\n\tr := gin.Default()\n\n\tr.HTMLRender = loadTemplates(\"react.html\")\n\n\tr.Use(func(c *gin.Context) {\n\t\tid, _ := uuid.NewV4()\n\t\tc.Set(\"uuid\", id)\n\t})\n\n\t// add routes\n\tr.GET(\"/api/home\", controllers.Home)\n\n\treact := NewReact(\n\t\t\"assets/js/bundle.js\",\n\t\ttrue,\n\t\tr,\n\t)\n\n\tr.GET(\"/\", react.Handle)\n\n\t// We can't use router.Static method to use '/' for static files.\n\t// see https://github.com/gin-gonic/gin/issues/75\n\t// r.StaticFS(\"/\", assetFS())\n\tr.Use(static.Serve(\"/\", BinaryFileSystem(\"assets\")))\n\n\tport := os.Getenv(\"PORT\")\n\tif len(port) == 0 {\n\t\tport = \"3000\"\n\t}\n\tr.Run(\":\" + port)\n}\n```\n\n* `r.HTMLRender = loadTemplates(\"react.html\")` \u3067\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059\u3002\u901a\u5e38\u3001Gin\u3060\u3068[LoadHTMLGlob](https://github.com/gin-gonic/gin#html-rendering)\u3092\u4f7f\u3063\u3066\u8aad\u307f\u8fbc\u307f\u307e\u3059\u304c\u3001bindata\u3092\u4f7f\u3063\u3066\u30d0\u30a4\u30ca\u30ea\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u3053\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307e\u305b\u308b\u305f\u3081\u306b[multitemplate](https://github.com/gin-gonic/contrib/tree/master/renders/multitemplate)\u3092\u4f7f\u3063\u3066\u3044\u307e\u3059\u3002\u8a73\u3057\u304f\u306f\u3001[Use templates from go-bindata?](https://github.com/gin-gonic/contrib/issues/23)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n* `react.go`\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b`NewReact`\u3092\u547c\u3073\u3060\u3057\u3001`r.GET(\"/\", react.Handle)`\u3067Gin\u306e\u30cf\u30f3\u30c9\u30e9\u3068\u3057\u3066\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u3053\u308c\u3067`/`\u4ee5\u4e0b\u306e\u30a2\u30af\u30bb\u30b9\u3067\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u7d50\u679c\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\u306a\u304a\u3001`NewReact`\u306e\u7b2c2\u5f15\u6570\u306b`true`\u3092\u6e21\u3057\u3066\u3044\u307e\u3059\u304c\u3001`false`\u3092\u6e21\u3059\u3068`bundle.js`\u3092\u6700\u521d\u306b\u8aad\u307f\u8fbc\u3093\u3067\u30d7\u30fc\u30eb\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u3001\u9ad8\u901f\u306b\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u958b\u767a\u6642\u306fJavaScript\u306e\u5909\u66f4\u3092\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306b\u53cd\u6620\u3055\u305b\u305f\u3044\u305f\u3081\u3001`false`\u3092\u6e21\u3057\u307e\u3059\u3002\n\n# `react.go`\n\n\u9577\u3044\u306e\u3067\u30dd\u30a4\u30f3\u30c8\u3060\u3051\u629c\u7c8b\u3002\n\n* Handle\u95a2\u6570\u304cGin\u306e\u30cf\u30f3\u30c9\u30e9\u5b9f\u88c5\u3002\u3053\u3053\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u53d7\u3051\u3064\u3051\u305f\u6642\u306e\u8d77\u70b9\u3068\u306a\u308a\u307e\u3059\u3002`vm.Handle`\u95a2\u6570\u306e\u51e6\u7406\u7d50\u679c\u3068\u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u7528\u306e\u69cb\u9020\u5316\u30c7\u30fc\u30bf`Resp`\u3092\u53d7\u3051\u53d6\u308a\u3001`c.HTML(http.StatusOK, \"react.html\", re)`\u306b\u3066HTML\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6d41\u3057\u8fbc\u307e\u308c\u3001\u6700\u7d42\u7684\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u306a\u308bHTML\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\n\n```go\nfunc (r *React) Handle(c *gin.Context) {\n\t...\n\n\tselect {\n\tcase re := <-vm.Handle(map[string]interface{}{\n\t\t\"url\":     c.Request.URL.String(),\n\t\t\"headers\": c.Request.Header,\n\t\t\"uuid\":    UUID.String(),\n\t}):\n\t\tre.RenderTime = time.Since(start)\n\t\t// Return vm back to the pool\n\t\tr.put(vm)\n\t\t// Handle the Response\n\t\tif len(re.Redirect) == 0 && len(re.Error) == 0 {\n\t\t\t// If no redirection and no errors\n\t\t\tc.Header(\"X-React-Render-Time\", fmt.Sprintf(\"%s\", re.RenderTime))\n\t\t\tc.HTML(http.StatusOK, \"react.html\", re)\n\t\t\t// If redirect\n\t\t} else if len(re.Redirect) != 0 {\n\t\t\tc.Redirect(http.StatusMovedPermanently, re.Redirect)\n\t\t\t// If internal error\n\t\t} else if len(re.Error) != 0 {\n\t\t\tc.Header(\"X-React-Render-Time\", fmt.Sprintf(\"%s\", re.RenderTime))\n\t\t\tc.HTML(http.StatusInternalServerError, \"react.html\", re)\n\t\t}\n```\n\n* `vm.Handle`\u95a2\u6570\u306e\u4e2d\u8eab\u3067\u3059\u3002`PevalString`\u95a2\u6570\u3092\u547c\u3073\u3001`index.jsx`\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u305fJavaScript\u306e`global.main`\u95a2\u6570\u3092\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002`__goServerCallback__`\u306f\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u95a2\u6570\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u5909\u6570\u540d\u3067\u3059\u3002\n\n```go\n// Handle handles http requests\nfunc (r *ReactVM) Handle(req map[string]interface{}) <-chan Resp {\n\tb, err := json.Marshal(req)\n\tMust(err)\n\t// Keep it sync with `client/index.jsx`\n\tr.PevalString(`main(` + string(b) + `, __goServerCallback__)`)\n\treturn r.ch\n}\n```\n\n* `__goServerCallback__`\u306f`newReactVM`\u95a2\u6570\u306e\u4e2d\u3067\u521d\u671f\u5316\u51e6\u7406\u6642\u306b\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u307e\u3059\u3002`index.jsx`\u304b\u3089\u53d7\u3051\u53d6\u3063\u305fJSON\u6587\u5b57\u5217\u304b\u3089Resp\u69cb\u9020\u4f53\u306e\u30c7\u30fc\u30bf\u3092\u751f\u6210\u3057\u3001\u30c1\u30e3\u30cd\u30eb\u3092\u901a\u3058\u3066\u8fd4\u3059\u95a2\u6570\u304c\u5b9f\u88c5\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```go\nfunc newReactVM(filePath string, engine http.Handler) *ReactVM {\n\t...\n\n\tvm.PushGlobalGoFunction(\"__goServerCallback__\", func(ctx *duktape.Context) int {\n\t\tresult := ctx.SafeToString(-1)\n\t\tvm.ch <- func() Resp {\n\t\t\tvar re Resp\n\t\t\tjson.Unmarshal([]byte(result), &re)\n\t\t\treturn re\n\t\t}()\n\t\treturn 0\n\t})\n```\n\n* `Resp`\u69cb\u9020\u4f53\u306e\u5b9a\u7fa9\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002`App`\u306b`index.jsx`\u3067\u751f\u6210\u3057\u305fHTML\u6587\u5b57\u5217\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\u305d\u306e\u6587\u5b57\u5217\u306f\u3001`HTMLApp`\u95a2\u6570\u3092\u7d4c\u7531\u3057\u3066`react.html`\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3044\u307e\u3059\u3002\n\n```go\ntype Resp struct {\n\tUUID       string        `json:\"uuid\"`\n\tError      string        `json:\"error\"`\n\tRedirect   string        `json:\"redirect\"`\n\tApp        string        `json:\"app\"`\n\tTitle      string        `json:\"title\"`\n\tMeta       string        `json:\"meta\"`\n\tInitial    string        `json:\"initial\"`\n\tRenderTime time.Duration `json:\"-\"`\n}\n\n// HTMLApp returns a application template\nfunc (r Resp) HTMLApp() template.HTML {\n\treturn template.HTML(r.App)\n}\n\n// HTMLMeta returns a meta data\nfunc (r Resp) HTMLMeta() template.HTML {\n\treturn template.HTML(r.Meta)\n}\n```\n\n# \u52d5\u4f5c\u78ba\u8a8d\n\n\u30d3\u30eb\u30c9\uff06\u5b9f\u884c\u3057\u3066 http://localhost:3000/ \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u4e0b\u8a18\u306eHTML\u304c\u8fd4\u308a\u307e\u3059\u3002React\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3092\u3057\u306a\u3044\u5834\u5408\u306f`<div id=\"app\"></div>`\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u3061\u3083\u3093\u3068\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067React\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u304c\u884c\u308f\u308c\u305f\u7d50\u679c\u306eHTML\u304c\u57cb\u3081\u8fbc\u307e\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n```html\n<!DOCTYPE html>\n<html data-uuid=\"7dca6e5c-3b3d-40fb-778d-867fc2a05425\">\n  <head>\n    <meta charset=\"UTF-8\">\n    <link rel=\"stylesheet\" href=\"css/main.css\">\n    <title></title>\n    \n  </head>\n  <body>\n    \n    <div id=\"app\"><div data-reactid=\".b363pa5tp4\" data-react-checksum=\"133442110\"><span data-reactid=\".b363pa5tp4.0\">Message: </span><span data-reactid=\".b363pa5tp4.1\"></span></div></div>\n    <script onload=\"this.parentElement.removeChild(this)\">window['--app-initial'] = JSON.parse(\"{}\");</script>\n    <script async defer src=\"js/bundle.js\" onload=\"this.parentElement.removeChild(this)\"></script>\n  </body>\n</html>\n```\n\n\u524d\u56de\u540c\u69d8\u3001\u30b7\u30f3\u30b0\u30eb\u30d0\u30a4\u30ca\u30ea\u3068\u3057\u3066\u3082\u3082\u3061\u308d\u3093\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\n# \u6027\u80fd\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u51e6\u7406\u6642\u9593\u306f\u3069\u3093\u306a\u3082\u306e\u304b\u3001\u5358\u4f53\u6027\u80fd\u3060\u3051\u898b\u3066\u307f\u307e\u3057\u305f\u3002\nGin\u304c\u51fa\u3059\u51e6\u7406\u6642\u9593\u3092\u78ba\u8a8d\u3059\u308b\u3068\u3001`192ms`\u3068\u5fae\u5999\u306a\u7d50\u679c\u304c\u3001\u3001\u3001\uff1f\n\n```\n[GIN] 2016/03/30 - 12:31:18 |\u001b[97;42m 200 \u001b[0m|    192.0244ms | ::1 |\u001b[97;44m  \u001b[0m GET     /\n[GIN] 2016/03/30 - 12:31:18 |\u001b[90;47m 304 \u001b[0m|             0 | ::1 |\u001b[97;44m  \u001b[0m GET     /css/main.css\n[GIN] 2016/03/30 - 12:31:18 |\u001b[90;47m 304 \u001b[0m|     20.0026ms | ::1 |\u001b[97;44m  \u001b[0m GET     /js/bundle.js\n[GIN] 2016/03/30 - 12:31:19 |\u001b[97;42m 200 \u001b[0m|             0 | ::1 |\u001b[97;44m  \u001b[0m GET     /api/home\n```\n\n\u3053\u308c\u306f\u5358\u306b`react.go`\u3067`bundle.js`\u3092\u30d7\u30fc\u30eb\u3055\u305b\u305a\u306b\u52d5\u304b\u3057\u3066\u3044\u305f\u305f\u3081\u3067\u3057\u305f\u3002`main.go`\u306e`NewReact`\u306e\u5f15\u6570\u306b`false`\u3092\u6e21\u3057\u3066\u30c7\u30d0\u30c3\u30b0\u30e2\u30fc\u30c9\u3092\u30aa\u30d5\u306b\u3057\u3066\u518d\u5b9f\u884c\u3057\u3066\u307f\u307e\u3059\u3002\n\n```go:main.go\n\treact := NewReact(\n\t\t\"assets/js/bundle.js\",\n\t\tfalse,\n\t\tr,\n\t)\n```\n\n\u7d50\u679c\u306f\u30d7\u30fc\u30eb\u304c\u52b9\u304d\u3001`2.5ms`\u3068\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u5358\u4f53\u6027\u80fd\u306f\u304b\u306a\u308a\u901f\u3044\uff01\u3002\n\n```\n[GIN] 2016/03/30 - 12:32:44 |\u001b[97;42m 200 \u001b[0m|      2.5003ms | ::1 |\u001b[97;44m  \u001b[0m GET     /\n[GIN] 2016/03/30 - 12:32:44 |\u001b[90;47m 304 \u001b[0m|             0 | ::1 |\u001b[97;44m  \u001b[0m GET     /css/main.css\n[GIN] 2016/03/30 - 12:32:45 |\u001b[90;47m 304 \u001b[0m|     21.5027ms | ::1 |\u001b[97;44m  \u001b[0m GET     /js/bundle.js\n[GIN] 2016/03/30 - 12:32:45 |\u001b[97;42m 200 \u001b[0m|             0 | ::1 |\u001b[97;44m  \u001b[0m GET     /api/home\n```\n\n\n# \u307e\u3068\u3081\n* Golang\u3067\u3082React\u306e\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306f\u3067\u304d\u308b\u3002\n* \u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u306e\u5358\u4f53\u6027\u80fd\u3082\u826f\u3055\u305d\u3046\u3002\u9ad8\u8ca0\u8377\u6642\u306b\u3069\u3046\u306a\u308b\u304b\u306f\u4eca\u5f8c\u8a66\u3057\u3066\u307f\u305f\u3044\u3002\n", "tags": ["golang", "reactjs", "React", "gin", "Go"]}