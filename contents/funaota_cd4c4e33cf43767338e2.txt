{"context": "\u753b\u50cf\u3092\u6295\u7a3f\u51fa\u6765\u308b\u3081\u3063\u3061\u3083\u4fbf\u5229\u306aCarrierWave\nhttps://github.com/carrierwaveuploader/carrierwave\n\n\u4eca\u65e5\u306f\u6700\u901f\u3067\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u307e\u3067\u4f5c\u308a\u307e\u3059\n\n\u2460\u4f5c\u308a\u305f\u3044Model\u540d\u3067scaffold & Migrate\n\u307e\u305a\u3001Model\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fview\u3068\u304b\u3092\u3044\u3061\u3044\u3061\u4f5c\u3063\u3066\u308b\u3068\u6700\u901f\u306b\u306a\u3089\u306a\u3044\u306e\u3067\u9762\u5012\u306a\u306e\u3067scaffold\u3057\u3061\u3083\u3044\u307e\u3059\n$ rails g scaffold Image content:string\n$ rake db:migrate\n\n\u2461form\u3092\u5909\u66f4\nf.text_field\u306e\u90e8\u5206\u3092f.file_field\u306b\u5909\u66f4\n\napp/views/images/_form.html.erb\n<%= form_for(@image) do |f| %>\n  <% if @image.errors.any? %>\n    <div id=\"error_explanation\">\n      <h2><%= pluralize(@image.errors.count, \"error\") %> prohibited this image from being saved:</h2>\n\n      <ul>\n      <% @image.errors.full_messages.each do |message| %>\n        <li><%= message %></li>\n      <% end %>\n      </ul>\n    </div>\n  <% end %>\n\n  <div class=\"field\">\n    <%= f.label :content %><br>\n    <%= f.file_field :content %>\n  </div>\n  <div class=\"actions\">\n    <%= f.submit %>\n  </div>\n<% end %>\n\n\n\n\n\u2462Gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ngemfile\u306b\u8ffd\u52a0\u3057\u3066bundle install\n\nGemfile\ngem 'carrierwave'\ngem 'rmagick'\n\n\n$ bundle install\n\n\u2463uploader\u3092generate\nUploader\u3092generate\u3057\u307e\u3059\uff08\u3068\u308a\u3042\u3048\u305a\u3001\u5f15\u6570\u306fImage\u3067OK\uff09\n$ rails g uploader Image\n\n\u2464\u4f5c\u6210\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u3053\u308c\u3092\u30b3\u30d4\u30da\n\napp/uploaders/image_uploader.rb\n# encoding: utf-8\n\nclass ImageUploader < CarrierWave::Uploader::Base\n\n  storage :file\n\n  include CarrierWave::RMagick\n\n  process :resize_to_limit => [700, 700]\n  process :convert => 'jpg'\n\n  version :thumb do\n    process :resize_to_limit => [300, 300]\n  end\n\n  def store_dir\n    \"uploads/photos/\"\n  end\n\n  def extension_white_list\n    %w(jpg jpeg gif png)\n  end\n\n  def filename\n    Time.now.strftime('%Y%m%d%H%M%S') + original_filename + '.jpg' if original_filename.present?\n  end\n\nend\n\n\n\n\n\u2465\u3010\u5b8c\u6210\u3011Model\u306b\u30de\u30a6\u30f3\u30c8\n\napp/models/image.rb\nclass Image < ActiveRecord::Base\n\n  mount_uploader :content, ImageUploader\n\n  ....\n\nend\n\n\n\n\n\u3000\u3053\u308c\u3067\u5b8c\u6210\uff01\n\n\u304a\u307e\u3051\uff1a\u4f5c\u6210\u3057\u305fUploader\u306b\u4f55\u304b\u30e1\u30bd\u30c3\u30c9\u8ffd\u52a0\u3057\u305f\u3044\u3068\u304d\n\u306a\u306b\u304b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u3068\u304d\u306b\u306f\u3001process :method_name\u3067\u5b9a\u7fa9\u3059\u308b\u3068\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\uff01\n\napp/uploaders/image_uploader.rb\n# encoding: utf-8\n\nclass ImageUploader < CarrierWave::Uploader::Base\n\n  ...\n\n  process :hogehoge\n\n  def hogehoge\n    p '\u3046\u307e\u304f\u3044\u3063\u305f\u306f\u305a'\n  end \n\n  ...\n\nend\n\n\n\n\n\u3000\u304a\u307e\u3051\uff1acarrierwave\u3067exif\u60c5\u5831\u3092\u3068\u308a\u305f\u3044\u6642\nhttp://qiita.com/funao/items/ceb7106b4a1ef7e23122\n\n\u6700\u901f\u30b7\u30ea\u30fc\u30ba\n\u3010\u6700\u901f\u30b7\u30ea\u30fc\u30ba\u3011\u6700\u901f\u3067devise\u3067facebook\u30ed\u30b0\u30a4\u30f3\u307e\u3067\u4f5c\u308b\nhttp://qiita.com/funao/items/6337589eef8f94b6eae0\n\u753b\u50cf\u3092\u6295\u7a3f\u51fa\u6765\u308b\u3081\u3063\u3061\u3083\u4fbf\u5229\u306aCarrierWave\nhttps://github.com/carrierwaveuploader/carrierwave\n\n# \u4eca\u65e5\u306f\u6700\u901f\u3067\u753b\u50cf\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u307e\u3067\u4f5c\u308a\u307e\u3059\n\n## \u2460\u4f5c\u308a\u305f\u3044Model\u540d\u3067scaffold & Migrate\n\n\u307e\u305a\u3001Model\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\u4eca\u56de\u306fview\u3068\u304b\u3092\u3044\u3061\u3044\u3061\u4f5c\u3063\u3066\u308b\u3068\u6700\u901f\u306b\u306a\u3089\u306a\u3044\u306e\u3067\u9762\u5012\u306a\u306e\u3067scaffold\u3057\u3061\u3083\u3044\u307e\u3059\n\n`$ rails g scaffold Image content:string`\n`$ rake db:migrate`\n\n## \u2461form\u3092\u5909\u66f4\n\n`f.text_field`\u306e\u90e8\u5206\u3092`f.file_field`\u306b\u5909\u66f4\n\n```rb:app/views/images/_form.html.erb\n<%= form_for(@image) do |f| %>\n  <% if @image.errors.any? %>\n    <div id=\"error_explanation\">\n      <h2><%= pluralize(@image.errors.count, \"error\") %> prohibited this image from being saved:</h2>\n\n      <ul>\n      <% @image.errors.full_messages.each do |message| %>\n        <li><%= message %></li>\n      <% end %>\n      </ul>\n    </div>\n  <% end %>\n\n  <div class=\"field\">\n    <%= f.label :content %><br>\n    <%= f.file_field :content %>\n  </div>\n  <div class=\"actions\">\n    <%= f.submit %>\n  </div>\n<% end %>\n\n```\n\n## \u2462Gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ngemfile\u306b\u8ffd\u52a0\u3057\u3066bundle install\n\n```rb:Gemfile\ngem 'carrierwave'\ngem 'rmagick'\n```\n\n`$ bundle install`\n\n## \u2463uploader\u3092generate\n\nUploader\u3092generate\u3057\u307e\u3059\uff08\u3068\u308a\u3042\u3048\u305a\u3001\u5f15\u6570\u306fImage\u3067OK\uff09\n\n`$ rails g uploader Image`\n\n## \u2464\u4f5c\u6210\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u3053\u308c\u3092\u30b3\u30d4\u30da\n\n```rb:app/uploaders/image_uploader.rb\n# encoding: utf-8\n\nclass ImageUploader < CarrierWave::Uploader::Base\n\n  storage :file\n\n  include CarrierWave::RMagick\n\n  process :resize_to_limit => [700, 700]\n  process :convert => 'jpg'\n\n  version :thumb do\n    process :resize_to_limit => [300, 300]\n  end\n\n  def store_dir\n    \"uploads/photos/\"\n  end\n\n  def extension_white_list\n    %w(jpg jpeg gif png)\n  end\n\n  def filename\n    Time.now.strftime('%Y%m%d%H%M%S') + original_filename + '.jpg' if original_filename.present?\n  end\n\nend\n\n```\n\n## \u2465\u3010\u5b8c\u6210\u3011Model\u306b\u30de\u30a6\u30f3\u30c8\n\n```rb:app/models/image.rb\nclass Image < ActiveRecord::Base\n\n  mount_uploader :content, ImageUploader\n\n  ....\n\nend\n\n```\n\n###\u3000\u3053\u308c\u3067\u5b8c\u6210\uff01\n\n## \u304a\u307e\u3051\uff1a\u4f5c\u6210\u3057\u305fUploader\u306b\u4f55\u304b\u30e1\u30bd\u30c3\u30c9\u8ffd\u52a0\u3057\u305f\u3044\u3068\u304d\n\n\u306a\u306b\u304b\u30e1\u30bd\u30c3\u30c9\u3092\u8ffd\u52a0\u3057\u305f\u3044\u3068\u304d\u306b\u306f\u3001process :method_name\u3067\u5b9a\u7fa9\u3059\u308b\u3068\u8aad\u307f\u8fbc\u307e\u308c\u307e\u3059\uff01\n\n```rb:app/uploaders/image_uploader.rb\n# encoding: utf-8\n\nclass ImageUploader < CarrierWave::Uploader::Base\n\n  ...\n\n  process :hogehoge\n\n  def hogehoge\n    p '\u3046\u307e\u304f\u3044\u3063\u305f\u306f\u305a'\n  end \n\n  ...\n\nend\n\n```\n\n##\u3000\u304a\u307e\u3051\uff1acarrierwave\u3067exif\u60c5\u5831\u3092\u3068\u308a\u305f\u3044\u6642\nhttp://qiita.com/funao/items/ceb7106b4a1ef7e23122\n\n## \u6700\u901f\u30b7\u30ea\u30fc\u30ba\n\n\u3010\u6700\u901f\u30b7\u30ea\u30fc\u30ba\u3011\u6700\u901f\u3067devise\u3067facebook\u30ed\u30b0\u30a4\u30f3\u307e\u3067\u4f5c\u308b\nhttp://qiita.com/funao/items/6337589eef8f94b6eae0\n", "tags": ["carrierwave", "Rails", "\u65b0\u4eba\u30d7\u30ed\u30b0\u30e9\u30de\u5fdc\u63f4"]}