{"context": " More than 1 year has passed since last update.\u5bb6\u3067\u3082\u4f1a\u793e\u3067\u3082\u540c\u3058\u74b0\u5883\u3067\u52c9\u5f37\u3057\u305f\u3044\u306e\u3067VPS\u3092\u501f\u308a\u3066\u307f\u308b\u3002\n\u5168\u304f\u306e\u521d\u5fc3\u8005\u306a\u306e\u3067\u8a70\u307e\u308a\u307e\u304f\u308a\u3067\u3059\u3002\u304a\u304b\u3057\u306a\u3068\u3053\u308d\u3042\u308c\u3070\u3054\u6307\u6458\u304f\u3060\u3055\u3044\u3002\n\n\u74b0\u5883\n\nVPS\n\u501f\u308a\u305f\u306e\u306f\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306eVPS2G\u30d7\u30e9\u30f3\u3001\u8a73\u7d30\u306f\u4ee5\u4e0b\u3068\u3053\u3061\u3089\u3002\n\n\u30e1\u30e2\u30ea:2G\n\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf:200GB\nCPU:\u4eee\u60f33\u30b3\u30a2\n\u30ea\u30fc\u30b8\u30e7\u30f3:\u77f3\u72e9\nOS:CentOS6.5\uff08\u6700\u521d\u304b\u3089\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3068\u308a\u3042\u3048\u305a\uff09\n\n\n\u30c4\u30fc\u30eb\n\nPutty\nWinSCP\n\n\n\u3084\u308b\u3053\u3068\n\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u3093\u306e\u3055\u304f\u3089VPS\u5165\u9580\u306b\u3057\u305f\u304c\u3063\u3066\u521d\u671f\u8a2d\u5b9a\u3092\u3059\u3059\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u521d\u671f\u8a2d\u5b9a\n\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210 & \u8a2d\u5b9a\n\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\nSSH\u306e\u8a2d\u5b9a\nFirewall\u306e\u8a2d\u5b9a\nWeb\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n\n\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u307e\u3067\u9811\u5f35\u308a\u307e\u3059\u3002\n\n\u521d\u671f\u8a2d\u5b9a\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u307e\u305a\u306f\u6700\u65b0\u306b\u3057\u307e\u3059\u3002\n# yum update\n\n(yum\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002)\n\u6b21\u306b\u65e5\u672c\u8a9e\u5316\u3002\nvim\u3067\u8a72\u5f53\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n/etc/sysconfig/i18n\nLANG=\"ja_JP.UTF-8\"\n...\n\n\n\u4e00\u65e6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057date\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3002\n2014\u5e74  9\u6708  4\u65e5 \u6728\u66dc\u65e5 12:17:34 JST\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u6210\u529f\u3002\n\u3082\u3057date\u306e\u7d50\u679c\u304c\u6587\u5b57\u5316\u3051\u3092\u3057\u3066\u3044\u305f\u3089Putty\u306e\u8a2d\u5b9a\u3088\u308a\u3001\n\u30a6\u30a3\u30f3\u30c9\u30a6 > \u5909\u63db > \u6587\u5b57\u30b3\u30fc\u30c9\u306e\u8a2d\u5b9a\u306e\u8a2d\u5b9a\u304cUTF-8\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u30c1\u30a7\u30c3\u30af\u3002\n\n\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210 & \u8a2d\u5b9a\n\u666e\u6bb5\u306froot\u3067\u306f\u306a\u304f\u5225\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f7f\u3046\u306e\u304c\u4e00\u822c\u7684\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76ee\u7684\uff1f\uff09\u306e\u305f\u3081\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3002\n# useradd username\n# passwd password\n\n\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3002\n\u307e\u305f\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u3082root\u6a29\u9650\u3067\u4f5c\u696d\u304c\u51fa\u6765\u308b\u30b3\u30de\u30f3\u30c9sudo\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\u307e\u305a\u306f\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7(\u4e0b\u8a18\u4f8b\u3067\u306fwheel)\u306b\u767b\u9332\u3059\u308b\u3002\n# usermod -G wheel username\n\n\u767b\u9332\u3057\u305fwheel\u30b0\u30eb\u30fc\u30d7\u304csudo\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306bvisudo\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3001\n\u8a72\u5f53\u884c\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b\u3002\uff08\u5148\u982d\u306e#\u3092\u53d6\u308b\uff09\n# visudo\n\n\nvisudo\n## Allows people in group wheel to run all commands\n%wheel  ALL=(ALL)       ALL\n\n\n\n\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\n\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3067\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u5f31\u3044\u305f\u3081\u3001\u9375\u8a8d\u8a3c\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\uff08\u9375\u8a8d\u8a3c:\u516c\u958b\u9375\u3068\u79d8\u5bc6\u9375\u3068\u547c\u3070\u308c\u308b\u51c4\u304f\u9577\u3044\u6587\u5b57\u5217\u3092\u4f7f\u3046\u8a8d\u8a3c\u65b9\u5f0f\u3002\uff09\n\n\u516c\u958b\u9375 -> VPS\u306b\u4fdd\u7ba1\u3059\u308b\n\u79d8\u5bc6\u9375 -> \u500b\u4eba\u3067\u4fdd\u7ba1\u3059\u308b\n\n\n\u9375\u306e\u751f\u6210\n\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u516c\u958b\u9375\u3092\u4fdd\u7ba1\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u79fb\u52d5\u3002\n$ mkdir .ssh/\n$ cd .ssh/\n\n\u30ad\u30fc\u3092\u751f\u6210\u3059\u308b\u3002\n$ ssh-keygen -t rsa\n\nEnter file in which to save the key (/home/username/.ssh/id_rsa): (\u4f55\u3082\u5165\u529b\u3057\u306a\u3044\u3067ENTER\u62bc\u4e0b)\nEnter passphrase (empty for no passphrase): (\u4f55\u3082\u5165\u529b\u3057\u306a\u3044\u3067ENTER\u62bc\u4e0b)\nEnter same passphrase again: (\u4f55\u3082\u5165\u529b\u3057\u306a\u3044\u3067ENTER\u62bc\u4e0b)\n\n\u516c\u958b\u9375id_rsa.pub\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092authorized_keys\u3078\u5909\u66f4\u3059\u308b\u3002\n$ mv id_rsa.pub authorized_keys \n\n.ssh\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068authorized_keys\u306e\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b\u3002\n$ cd /home/username/\n$ chmod 700 .ssh/\n$ chmod 600 .ssh/authorized_keys\n\n\n\u79d8\u5bc6\u9375\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nWinSCP\u306a\u3069\u3092\u4f7f\u3044VPS\u4e0a\u304b\u3089id_rsa\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\n\nPutty\u3067\u5909\u63db\u3057\u3066\u30ed\u30b0\u30a4\u30f3\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fid_rsa\u306f\u305d\u306e\u307e\u307e\u3067\u306fPutty\u3067\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u305f\u3081\u3001\nPuTTY\u3054\u3063\u305f\u716e\u7248\u3067\u540c\u68b1\u3055\u308c\u3066\u3044\u308bPuTTYgen\u3092\u4f7f\u7528\u3057\u3001Putty\u7528\u306e\u9375\u306b\u5909\u66f4\u3059\u308b\u3002\n\nPuTTYgen\u3067\u65e2\u5b58\u306e\u79d8\u5bc6\u9375\u306e\u8aad\u8fbc\n\n\n\u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u53ca\u3073\u305d\u306e\u78ba\u8a8d\u3092\u5165\u529b\n\u79d8\u5bc6\u9375\u306e\u4fdd\u5b58\n\n\u63a5\u7d9a > SSH > \u8a8d\u8a3c > \u8a8d\u8a3c\u306e\u305f\u3081\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307f\n\u4fdd\u5b58\u3057\u63a5\u7d9a\n2.\u3067\u5165\u529b\u3057\u305f\u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u3092\u4f7f\u7528\u3057\u8a8d\u8a3c\u3001\u30ed\u30b0\u30a4\u30f3\n\n\nSSH\u306e\u8a2d\u5b9a\n\u3055\u3089\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u56fa\u306b\u3059\u308b\u305f\u3081\u306bSSH\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u306f\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u7ba1\u7406\u8005\u306b\u5909\u66f4\u3059\u308b\u3082\u306e\u3002\u3088\u304f\u4f7f\u3046\uff08\u306f\u305a\uff09\u306e\u3067\u899a\u3048\u3066\u304a\u304f\u3002\n$ sudo -s\n\n\u3053\u306e\u9805\u76ee\u3067\u306f/etc/ssh/sshd_config\u306e\u307f\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u307e\u305a\u7de8\u96c6\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b\u3001\u5fd8\u308c\u304c\u3061\u306a\u306e\u3067\u7656\u3092\u3064\u3051\u308b\u3002\n# cp -a /etc/ssh/sshd_config /etc/ssh/sshd_config.org\n\n\nsshd_config\u306e\u8a2d\u5b9a\n\n\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30dd\u30fc\u30c822\u756a\u306f\u3042\u307e\u308a\u306b\u3082\u5e83\u304f\u4f7f\u308f\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u305f\u3081\u5909\u66f4\u3002\n1024\uff5e65535\u307e\u3067\u306e\u9593\u3067\u8a2d\u5b9a\u53ef\u80fd\u3002\n\n/etc/ssh/sshd_config\n#Port 22\n...\n\n\n\u3000\u3000\u2193\n\n/etc/ssh/sshd_config\nPort 9117\n...\n\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n\u9375\u8a8d\u8a3c\u3092\u5b9f\u88c5\u3057\u305f\u305f\u3081\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u3088\u3046\u7981\u6b62\u3059\u308b\u3002\n\n/etc/ssh/sshd_config\n...\nPasswordAuthentication yes\n...\n\n\n\u3000\u3000\u2193\n\n/etc/ssh/sshd_config\n...\nPasswordAuthentication no\n...\n\n\n\nroot\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\nroot\u306fpassword\u304c\u5272\u308c\u305f\u3060\u3051\u3067\u30de\u30ba\u3044\u3053\u3068\u306b\u306a\u308b\u306e\u3067root\u3078\u306e\u76f4\u63a5\u30ed\u30b0\u30a4\u30f3\u3092\u7981\u6b62\u3057\u307e\u3059\u3002\n\n/etc/ssh/sshd_config\n...\n#PermitRootLogin yes\n...\n\n\n\u3000\u3000\u2193\n\n/etc/ssh/sshd_config\n...\nPermitRootLogin no\n...\n\n\n\u6700\u5f8c\u306bsshd\u306erestart\u3002\u3053\u308c\u5fd8\u308c\u3066\u3044\u3066\u5927\u5909\u82e6\u52b4\u3057\u307e\u3057\u305f\u3002\n$ sudo service sshd restart\n\n\nFirewall\u306e\u8a2d\u5b9a\n\u3053\u3053\u304c\u4e00\u756a\u3088\u304f\u5206\u304b\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3082\u3046\u3061\u3087\u3063\u3068\u7406\u89e3\u3057\u305f\u3044\u3002\n\nipv4\u306e\u8a2d\u5b9a\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306biptables\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n# vim /etc/sysconfig/iptables\n\n\nipv6\u306e\u8a2d\u5b9a\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306bip6tables\u3092\u8a2d\u5b9a\u3059\u308b\u3002\nipv6\u306e\u6709\u52b9\u5316\u3084\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u6700\u521d\u304b\u3089\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u305f\u3088\u3046\u3067\u3001\u7279\u306b\u3059\u308b\u3053\u3068\u7121\u3057\u3002\n# vim /etc/sysconfig/ip6tables\n\n\nWeb\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n\nApache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum install httpd\n\n\u3064\u3044\u3067\u306b\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u8d77\u52d5\u3082\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n# chkconfig httpd on\n\n\u7de8\u96c6\u3059\u308b\u30d5\u30a1\u30a4\u30eb/etc/httpd/conf/httpd.conf\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n# cp -a /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.org\n\n\nhttpd.conf\u306e\u8a2d\u5b9a\n\n\u653b\u6483\u8005\u306b\u6709\u5229\u3068\u306a\u308b\u60c5\u5831\u306e\u8868\u793a\u3092\u6e1b\u3089\u3059\n\u653b\u6483\u8005\u306b\u6709\u5229\u306a\u60c5\u5831\u3092\u6975\u529b\u8868\u793a\u3057\u306a\u3044\u3088\u3046\u4fee\u6b63\u3002\n\u3053\u3061\u3089\u304c\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n/etc/httpd/conf/httpd.conf\n...\nServerTokens OS\n\n...\nServerSignature On\n\n\n\u3000\u3000\u2193\n\n/etc/httpd/conf/httpd.conf\n...\nServerTokens Prod\n\n...\nServerSignature Off\n\n\n\n\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u3092\u8868\u793a\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n\u3053\u3061\u3089\u304c\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n/etc/httpd/conf/httpd.conf\n...\nOptions Indexes FollowSymLinks\n\n\n\u3000\u3000\u2193\n\n/etc/httpd/conf/httpd.conf\n...\nOptions -Indexes FollowSymLinks\n\n\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306e\u8a2d\u5b9a\nURL\u3068\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\u3001\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u7279\u306b\u7de8\u96c6\u306f\u3057\u307e\u305b\u3093\u304c\u3001\u3088\u304f\u4f7f\u3046\u306e\u3067\u899a\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\n/etc/httpd/conf/httpd.conf\n...\nDocumentRoot \"/var/www/html\"\n\n\n\nApache\u306e\u8d77\u52d5\n\u307e\u305a\u306f\u8a2d\u5b9a\u3092\u5909\u3048\u305f\u306e\u3067\u30c6\u30b9\u30c8\u3002\n# service httpd configtest\n\nSyntax OK\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u554f\u984c\u306a\u3057\u3001Apache\u3092\u8d77\u52d5\u3055\u305b\u308b\u3002\n# service httpd start\n\nVPS\u306eIP\u306b\u63a5\u7d9a\u3057\u3066\u3001\u3044\u3064\u3082\u306eApache Test Page\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3002\n\n\u6700\u5f8c\u306b\nDocumentRoot(/var/www/html)\u4e0b\u306bindex.html\u306a\u3069\u3092\u7f6e\u3044\u3066\u30c6\u30b9\u30c8\u3002\n\u305d\u308c\u3082OK\u306a\u3089\u3053\u3053\u307e\u3067\u306f\u5927\u4e08\u592b\u3002\uff08\u306a\u306f\u305a\uff09\n\n\u5f15\u3063\u304b\u304b\u3063\u305f\u7b87\u6240\n\n\u521d\u671f\u8a2d\u5b9a\u306b\u3066LANG=\"ja_JP.UTF-8\"\u3068\u66f8\u304f\u3079\u304d\u3068\u3053\u308d\u3092LANG=\"ja_JP\"\u3068\u66f8\u3044\u3066\u3057\u307e\u3044\u6587\u5b57\u5316\u3051\u3002\n\n\nPutty\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u8a2d\u5b9a\u3067UTF-8/Auto-Detect Japanese\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3067\u6587\u5b57\u5316\u3051\u306f\u89e3\u6d88\n\u4e0a\u8a18\u89e3\u6c7a\u7b56\u306f\u6839\u672c\u7684\u89e3\u6c7a\u3067\u306f\u306a\u3044\u305f\u3081\u975e\u63a8\u5968\u3002\u3061\u3083\u3093\u3068LANG=\"ja_JP.UTF-8\"\u3068\u8a18\u8ff0\u3057\u3088\u3046\n\n\n\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u306b\u3066\u3001\u6700\u521d\u304b\u3089Putty\u3067\u516c\u958b\u30fb\u79d8\u5bc6\u9375\u3092\u4f5c\u308d\u3046\u3068\u3057\u305f\u3089\u30a8\u30e9\u30fc\u3002\n\n\n\u6700\u521d\u306bssh-keygen -t rsa\u30b3\u30de\u30f3\u30c9\u3067\u9375\u3092\u4f5c\u6210\u3057\u3001\u305d\u308c\u3092Putty\u7528\u306b\u5909\u63db\u3057\u3088\u3046\n\n\n\n\u5bb6\u3067\u3082\u4f1a\u793e\u3067\u3082\u540c\u3058\u74b0\u5883\u3067\u52c9\u5f37\u3057\u305f\u3044\u306e\u3067VPS\u3092\u501f\u308a\u3066\u307f\u308b\u3002\n\u5168\u304f\u306e\u521d\u5fc3\u8005\u306a\u306e\u3067\u8a70\u307e\u308a\u307e\u304f\u308a\u3067\u3059\u3002\u304a\u304b\u3057\u306a\u3068\u3053\u308d\u3042\u308c\u3070\u3054\u6307\u6458\u304f\u3060\u3055\u3044\u3002\n\n#\u74b0\u5883\n##VPS\n\u501f\u308a\u305f\u306e\u306f\u3055\u304f\u3089\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306eVPS2G\u30d7\u30e9\u30f3\u3001\u8a73\u7d30\u306f\u4ee5\u4e0b\u3068[\u3053\u3061\u3089\u3002](http://vps.sakura.ad.jp/specification.html)\n\n* \u30e1\u30e2\u30ea:2G\n* \u30c7\u30a3\u30b9\u30af\u5bb9\u91cf:200GB\n* CPU:\u4eee\u60f33\u30b3\u30a2\n* \u30ea\u30fc\u30b8\u30e7\u30f3:\u77f3\u72e9\n* OS:CentOS6.5\uff08\u6700\u521d\u304b\u3089\u5165\u3063\u3066\u3044\u305f\u306e\u3067\u3068\u308a\u3042\u3048\u305a\uff09\n\n##\u30c4\u30fc\u30eb\n\n* Putty\n* WinSCP\n\n#\u3084\u308b\u3053\u3068\n\u30c9\u30c3\u30c8\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u3093\u306e[\u3055\u304f\u3089VPS\u5165\u9580](http://dotinstall.com/lessons/basic_sakura_vps)\u306b\u3057\u305f\u304c\u3063\u3066\u521d\u671f\u8a2d\u5b9a\u3092\u3059\u3059\u3081\u3066\u3044\u304d\u307e\u3059\u3002\n\n* \u521d\u671f\u8a2d\u5b9a\n* \u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210 & \u8a2d\u5b9a\n* \u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\n* SSH\u306e\u8a2d\u5b9a\n* Firewall\u306e\u8a2d\u5b9a\n* Web\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n\n\u3068\u308a\u3042\u3048\u305a\u3053\u3053\u307e\u3067\u9811\u5f35\u308a\u307e\u3059\u3002\n\n#\u521d\u671f\u8a2d\u5b9a\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u307e\u305a\u306f\u6700\u65b0\u306b\u3057\u307e\u3059\u3002\n\n```\n# yum update\n```\n\n(`yum`\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7ba1\u7406\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3002)\n\n\u6b21\u306b\u65e5\u672c\u8a9e\u5316\u3002\nvim\u3067\u8a72\u5f53\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u308b\u3002\n\n```:/etc/sysconfig/i18n\nLANG=\"ja_JP.UTF-8\"\n...\n```\n\n\u4e00\u65e6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057`date`\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3002\n\n```\n2014\u5e74  9\u6708  4\u65e5 \u6728\u66dc\u65e5 12:17:34 JST\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070\u6210\u529f\u3002\n\n\u3082\u3057`date`\u306e\u7d50\u679c\u304c\u6587\u5b57\u5316\u3051\u3092\u3057\u3066\u3044\u305f\u3089Putty\u306e\u8a2d\u5b9a\u3088\u308a\u3001\n`\u30a6\u30a3\u30f3\u30c9\u30a6 > \u5909\u63db > \u6587\u5b57\u30b3\u30fc\u30c9\u306e\u8a2d\u5b9a`\u306e\u8a2d\u5b9a\u304c`UTF-8`\u306b\u306a\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u30c1\u30a7\u30c3\u30af\u3002\n\n#\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210 & \u8a2d\u5b9a\n\u666e\u6bb5\u306froot\u3067\u306f\u306a\u304f\u5225\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f7f\u3046\u306e\u304c\u4e00\u822c\u7684\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u76ee\u7684\uff1f\uff09\u306e\u305f\u3081\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3002\n\n```\n# useradd username\n# passwd password\n```\n\n\u30e6\u30fc\u30b6\u30fc\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3002\n\u307e\u305f\u3001\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u3067\u3082root\u6a29\u9650\u3067\u4f5c\u696d\u304c\u51fa\u6765\u308b\u30b3\u30de\u30f3\u30c9`sudo`\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u307e\u305a\u306f\u5148\u307b\u3069\u4f5c\u6210\u3057\u305f\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u3092\u30b0\u30eb\u30fc\u30d7(\u4e0b\u8a18\u4f8b\u3067\u306f`wheel`)\u306b\u767b\u9332\u3059\u308b\u3002\n\n```\n# usermod -G wheel username\n```\n\n\u767b\u9332\u3057\u305f`wheel`\u30b0\u30eb\u30fc\u30d7\u304c`sudo`\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b`visudo`\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3001\n\u8a72\u5f53\u884c\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3059\u308b\u3002\uff08\u5148\u982d\u306e#\u3092\u53d6\u308b\uff09\n\n```\n# visudo\n```\n```:visudo\n## Allows people in group wheel to run all commands\n%wheel  ALL=(ALL)       ALL\n```\n\n#\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\n\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3067\u306f\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u304c\u5f31\u3044\u305f\u3081\u3001\u9375\u8a8d\u8a3c\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\uff08\u9375\u8a8d\u8a3c:\u516c\u958b\u9375\u3068\u79d8\u5bc6\u9375\u3068\u547c\u3070\u308c\u308b\u51c4\u304f\u9577\u3044\u6587\u5b57\u5217\u3092\u4f7f\u3046\u8a8d\u8a3c\u65b9\u5f0f\u3002\uff09\n\n* \u516c\u958b\u9375 -> VPS\u306b\u4fdd\u7ba1\u3059\u308b\n* \u79d8\u5bc6\u9375 -> \u500b\u4eba\u3067\u4fdd\u7ba1\u3059\u308b\n\n##\u9375\u306e\u751f\u6210\n\u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u516c\u958b\u9375\u3092\u4fdd\u7ba1\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u79fb\u52d5\u3002\n\n```\n$ mkdir .ssh/\n$ cd .ssh/\n```\n\n\u30ad\u30fc\u3092\u751f\u6210\u3059\u308b\u3002\n\n```\n$ ssh-keygen -t rsa\n\nEnter file in which to save the key (/home/username/.ssh/id_rsa): (\u4f55\u3082\u5165\u529b\u3057\u306a\u3044\u3067ENTER\u62bc\u4e0b)\nEnter passphrase (empty for no passphrase): (\u4f55\u3082\u5165\u529b\u3057\u306a\u3044\u3067ENTER\u62bc\u4e0b)\nEnter same passphrase again: (\u4f55\u3082\u5165\u529b\u3057\u306a\u3044\u3067ENTER\u62bc\u4e0b)\n```\n\n\u516c\u958b\u9375`id_rsa.pub`\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092`authorized_keys`\u3078\u5909\u66f4\u3059\u308b\u3002\n\n```\n$ mv id_rsa.pub authorized_keys \n```\n\n`.ssh`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068`authorized_keys`\u306e\u6a29\u9650\u3092\u5909\u66f4\u3059\u308b\u3002\n\n```\n$ cd /home/username/\n$ chmod 700 .ssh/\n$ chmod 600 .ssh/authorized_keys\n```\n\n##\u79d8\u5bc6\u9375\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nWinSCP\u306a\u3069\u3092\u4f7f\u3044VPS\u4e0a\u304b\u3089`id_rsa`\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3002\n\n##Putty\u3067\u5909\u63db\u3057\u3066\u30ed\u30b0\u30a4\u30f3\n\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f`id_rsa`\u306f\u305d\u306e\u307e\u307e\u3067\u306fPutty\u3067\u306f\u4f7f\u7528\u3067\u304d\u306a\u3044\u305f\u3081\u3001\nPuTTY\u3054\u3063\u305f\u716e\u7248\u3067\u540c\u68b1\u3055\u308c\u3066\u3044\u308bPuTTYgen\u3092\u4f7f\u7528\u3057\u3001Putty\u7528\u306e\u9375\u306b\u5909\u66f4\u3059\u308b\u3002\n\n1. PuTTYgen\u3067\u65e2\u5b58\u306e\u79d8\u5bc6\u9375\u306e`\u8aad\u8fbc`\n1. `\u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba`\u53ca\u3073\u305d\u306e\u78ba\u8a8d\u3092\u5165\u529b\n1. `\u79d8\u5bc6\u9375\u306e\u4fdd\u5b58`\n1. `\u63a5\u7d9a` > `SSH` > `\u8a8d\u8a3c` > `\u8a8d\u8a3c\u306e\u305f\u3081\u306e\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30ad\u30fc\u30d5\u30a1\u30a4\u30eb`\u3092\u8aad\u307f\u8fbc\u307f\n1. \u4fdd\u5b58\u3057\u63a5\u7d9a\n1. 2.\u3067\u5165\u529b\u3057\u305f`\u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba`\u3092\u4f7f\u7528\u3057\u8a8d\u8a3c\u3001\u30ed\u30b0\u30a4\u30f3\n\n#SSH\u306e\u8a2d\u5b9a\n\u3055\u3089\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3092\u5f37\u56fa\u306b\u3059\u308b\u305f\u3081\u306bSSH\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u306f\u4e00\u822c\u30e6\u30fc\u30b6\u30fc\u304b\u3089\u7ba1\u7406\u8005\u306b\u5909\u66f4\u3059\u308b\u3082\u306e\u3002\u3088\u304f\u4f7f\u3046\uff08\u306f\u305a\uff09\u306e\u3067\u899a\u3048\u3066\u304a\u304f\u3002\n\n```\n$ sudo -s\n```\n\n\u3053\u306e\u9805\u76ee\u3067\u306f`/etc/ssh/sshd_config`\u306e\u307f\u7de8\u96c6\u3057\u307e\u3059\u3002\n\u307e\u305a\u7de8\u96c6\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u308b\u3001\u5fd8\u308c\u304c\u3061\u306a\u306e\u3067\u7656\u3092\u3064\u3051\u308b\u3002\n\n```\n# cp -a /etc/ssh/sshd_config /etc/ssh/sshd_config.org\n```\n\n##sshd_config\u306e\u8a2d\u5b9a\n###\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u5909\u66f4\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30dd\u30fc\u30c822\u756a\u306f\u3042\u307e\u308a\u306b\u3082\u5e83\u304f\u4f7f\u308f\u308c\u3066\u3044\u308b\u30dd\u30fc\u30c8\u306e\u305f\u3081\u5909\u66f4\u3002\n1024\uff5e65535\u307e\u3067\u306e\u9593\u3067\u8a2d\u5b9a\u53ef\u80fd\u3002\n\n```:/etc/ssh/sshd_config\n#Port 22\n...\n```\n\n\u3000\u3000\u2193\n\n```:/etc/ssh/sshd_config\nPort 9117\n...\n```\n\n###\u30d1\u30b9\u30ef\u30fc\u30c9\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\n\u9375\u8a8d\u8a3c\u3092\u5b9f\u88c5\u3057\u305f\u305f\u3081\u30d1\u30b9\u30ef\u30fc\u30c9\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044\u3088\u3046\u7981\u6b62\u3059\u308b\u3002\n\n```:/etc/ssh/sshd_config\n...\nPasswordAuthentication yes\n...\n```\n\n\u3000\u3000\u2193\n\n```:/etc/ssh/sshd_config\n...\nPasswordAuthentication no\n...\n```\n\n###root\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\nroot\u306fpassword\u304c\u5272\u308c\u305f\u3060\u3051\u3067\u30de\u30ba\u3044\u3053\u3068\u306b\u306a\u308b\u306e\u3067root\u3078\u306e\u76f4\u63a5\u30ed\u30b0\u30a4\u30f3\u3092\u7981\u6b62\u3057\u307e\u3059\u3002\n\n```:/etc/ssh/sshd_config\n...\n#PermitRootLogin yes\n...\n```\n\n\u3000\u3000\u2193\n\n```:/etc/ssh/sshd_config\n...\nPermitRootLogin no\n...\n```\n\n\u6700\u5f8c\u306bsshd\u306erestart\u3002\u3053\u308c\u5fd8\u308c\u3066\u3044\u3066\u5927\u5909\u82e6\u52b4\u3057\u307e\u3057\u305f\u3002\n\n```\n$ sudo service sshd restart\n```\n\n#Firewall\u306e\u8a2d\u5b9a\n\u3053\u3053\u304c\u4e00\u756a\u3088\u304f\u5206\u304b\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3082\u3046\u3061\u3087\u3063\u3068\u7406\u89e3\u3057\u305f\u3044\u3002\n##ipv4\u306e\u8a2d\u5b9a\n[\u3053\u3061\u3089](http://tweeeety.hateblo.jp/entry/20140210/1392063648)\u3092\u53c2\u8003\u306b`iptables`\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n```\n# vim /etc/sysconfig/iptables\n```\n\n##ipv6\u306e\u8a2d\u5b9a\n[\u3053\u3061\u3089](http://fnya.cocolog-nifty.com/blog/2014/01/vps-centos-ipv6.html)\u3092\u53c2\u8003\u306b`ip6tables`\u3092\u8a2d\u5b9a\u3059\u308b\u3002\nipv6\u306e\u6709\u52b9\u5316\u3084\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u6700\u521d\u304b\u3089\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u305f\u3088\u3046\u3067\u3001\u7279\u306b\u3059\u308b\u3053\u3068\u7121\u3057\u3002\n\n```\n# vim /etc/sysconfig/ip6tables\n```\n\n#Web\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n##Apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n# yum install httpd\n```\n\n\u3064\u3044\u3067\u306b\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u8d77\u52d5\u3082\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n\n```\n# chkconfig httpd on\n```\n\n\u7de8\u96c6\u3059\u308b\u30d5\u30a1\u30a4\u30eb`/etc/httpd/conf/httpd.conf`\u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u53d6\u3063\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n# cp -a /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.org\n```\n\n##httpd.conf\u306e\u8a2d\u5b9a\n###\u653b\u6483\u8005\u306b\u6709\u5229\u3068\u306a\u308b\u60c5\u5831\u306e\u8868\u793a\u3092\u6e1b\u3089\u3059\n\u653b\u6483\u8005\u306b\u6709\u5229\u306a\u60c5\u5831\u3092\u6975\u529b\u8868\u793a\u3057\u306a\u3044\u3088\u3046\u4fee\u6b63\u3002\n[\u3053\u3061\u3089](http://web.just4fun.biz/?Apache%2FServerTokens%E3%81%A8ServerSignature%E3%81%AE%E9%96%A2%E4%BF%82)\u304c\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```:/etc/httpd/conf/httpd.conf\n...\nServerTokens OS\n\n...\nServerSignature On\n```\n\n\u3000\u3000\u2193\n\n```:/etc/httpd/conf/httpd.conf\n...\nServerTokens Prod\n\n...\nServerSignature Off\n```\n\n###\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u3092\u8868\u793a\u3055\u305b\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n[\u3053\u3061\u3089](http://www.atmarkit.co.jp/flinux/rensai/linuxtips/705noindexes.html)\u304c\u53c2\u8003\u306b\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```:/etc/httpd/conf/httpd.conf\n...\nOptions Indexes FollowSymLinks\n```\n\n\u3000\u3000\u2193\n\n```:/etc/httpd/conf/httpd.conf\n...\nOptions -Indexes FollowSymLinks\n```\n\n###\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306e\u8a2d\u5b9a\nURL\u3068\u3057\u3066\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3068\u304d\u306b\u3001\u3053\u3053\u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u304c\u53ef\u80fd\u3068\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u306f\u7279\u306b\u7de8\u96c6\u306f\u3057\u307e\u305b\u3093\u304c\u3001\u3088\u304f\u4f7f\u3046\u306e\u3067\u899a\u3048\u3066\u304a\u304d\u307e\u3059\u3002\n\n```:/etc/httpd/conf/httpd.conf\n...\nDocumentRoot \"/var/www/html\"\n```\n\n##Apache\u306e\u8d77\u52d5\n\u307e\u305a\u306f\u8a2d\u5b9a\u3092\u5909\u3048\u305f\u306e\u3067\u30c6\u30b9\u30c8\u3002\n\n```\n# service httpd configtest\n```\n\n`Syntax OK`\u3068\u8868\u793a\u3055\u308c\u305f\u3089\u554f\u984c\u306a\u3057\u3001Apache\u3092\u8d77\u52d5\u3055\u305b\u308b\u3002\n\n```\n# service httpd start\n```\n\nVPS\u306eIP\u306b\u63a5\u7d9a\u3057\u3066\u3001\u3044\u3064\u3082\u306eApache Test Page\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308c\u3070OK\u3002\n\n#\u6700\u5f8c\u306b\nDocumentRoot(`/var/www/html`)\u4e0b\u306bindex.html\u306a\u3069\u3092\u7f6e\u3044\u3066\u30c6\u30b9\u30c8\u3002\n\u305d\u308c\u3082OK\u306a\u3089\u3053\u3053\u307e\u3067\u306f\u5927\u4e08\u592b\u3002\uff08\u306a\u306f\u305a\uff09\n\n#\u5f15\u3063\u304b\u304b\u3063\u305f\u7b87\u6240\n\n1. \u521d\u671f\u8a2d\u5b9a\u306b\u3066`LANG=\"ja_JP.UTF-8\"`\u3068\u66f8\u304f\u3079\u304d\u3068\u3053\u308d\u3092`LANG=\"ja_JP\"`\u3068\u66f8\u3044\u3066\u3057\u307e\u3044\u6587\u5b57\u5316\u3051\u3002\n * Putty\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u8a2d\u5b9a\u3067`UTF-8/Auto-Detect Japanese`\u3092\u9078\u629e\u3059\u308b\u3053\u3068\u3067\u6587\u5b57\u5316\u3051\u306f\u89e3\u6d88\n * \u4e0a\u8a18\u89e3\u6c7a\u7b56\u306f\u6839\u672c\u7684\u89e3\u6c7a\u3067\u306f\u306a\u3044\u305f\u3081\u975e\u63a8\u5968\u3002\u3061\u3083\u3093\u3068`LANG=\"ja_JP.UTF-8\"`\u3068\u8a18\u8ff0\u3057\u3088\u3046\n1. \u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u306b\u3066\u3001\u6700\u521d\u304b\u3089Putty\u3067\u516c\u958b\u30fb\u79d8\u5bc6\u9375\u3092\u4f5c\u308d\u3046\u3068\u3057\u305f\u3089\u30a8\u30e9\u30fc\u3002\n * \u6700\u521d\u306b`ssh-keygen -t rsa`\u30b3\u30de\u30f3\u30c9\u3067\u9375\u3092\u4f5c\u6210\u3057\u3001\u305d\u308c\u3092Putty\u7528\u306b\u5909\u63db\u3057\u3088\u3046\n", "tags": ["vps", "CentOS6.5", "CentOS"]}