{"context": " More than 1 year has passed since last update.iOS8\u304b\u3089AVAudioEngine\u306e\u767b\u5834\u306b\u3088\u308a\u3001CoreAudio\u304c\u3082\u3063\u3068\u4f7f\u3044\u3084\u3059\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306fSwift\u3068Playground\u3092\u7528\u3044\u3066\u97f3\u3067\u904a\u3093\u3067\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u6700\u521d\u306b\u4f7f\u7528\u3059\u308b\u30af\u30e9\u30b9\u306b\u3064\u3044\u3066\u8efd\u304f\u8aac\u660e\u3067\u3059\u3002\n\nAVAudioEngine\nAVAudioNode\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\nAVAudioEngine\u306b\u5bfe\u3057\u3066AVAudioNode\u3092attach\u3059\u308b\u3053\u3068\u3067\u5165\u529b\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u306a\u3069\u3092\u304b\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nAVAudioNode\n\u97f3\u306e\u751f\u6210\u3001\u51e6\u7406\u3001\u5165\u51fa\u529b\u306e\u305f\u3081\u306e\u62bd\u8c61\u30af\u30e9\u30b9\n\u30a8\u30d5\u30a7\u30af\u30c8\u306a\u3069\u306fAVAudioUnitEffect\u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u3082AVAudioNode\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u3067\u3059\u3002\n\n\u57fa\u672c\u7684\u306b\u306f\u4e0a\u8a18\u306e\uff12\u3064\u30af\u30e9\u30b9\u304c\u5143\u3068\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\u3067\u306f\u3001\u7c21\u5358\u306b\u30de\u30a4\u30af\u5165\u529b\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u304b\u3051\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u307e\u305a\u9069\u5f53\u306aPlayground\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u3068\u304dPlatform\u306fMac OS\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\niOS\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u5165\u529bnode\u306e\u751f\u6210\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u3067\u306f\u3068\u308a\u3042\u3048\u305a\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u4e00\u6c17\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u3057\u307e\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u308c\u3067\u30de\u30a4\u30af\u5165\u529b\u306bdelay\u3068reverb\u304c\u304b\u304b\u308a\u307e\u3059\u3002\nimport AVFoundation\nimport XCPlayground\nXCPSetExecutionShouldContinueIndefinitely(continueIndefinitely: true)\n\nvar engine = AVAudioEngine()\n\n//effectNode\u306e\u7528\u610f\nvar delay = AVAudioUnitDelay()\nvar reverb = AVAudioUnitReverb()\n\nvar input = engine.inputNode\nvar output = engine.outputNode\nvar format = input.inputFormatForBus(0)\nvar error:NSError?\n\n//delay\u306e\u8a2d\u5b9a\ndelay.delayTime = 1.5\ndelay.feedback = 20\n\n//reverb\u306e\u8a2d\u5b9a\nreverb.loadFactoryPreset(.LargeRoom2)\nreverb.wetDryMix = 80\n\n//engine\u306bdelay\u3068reverb\u3092\u8ffd\u52a0\nengine.attachNode(delay)\nengine.attachNode(reverb)\n\n//effect\u3092\u3064\u306a\u3050\u9806\u756a\u3092\u6307\u5b9a\u3000\u5165\u529b -> delay -> reverb -> \u51fa\u529b\nengine.connect(input, to: delay, format: format)\nengine.connect(delay, to: reverb, format: format)\nengine.connect(reverb, to: output, format: format)\n\n// engine\u3092\u5b9f\u884c\nengine.startAndReturnError(&error)\n\n\u6bd4\u8f03\u7684\u7c21\u5358\u305d\u3046\u306b\u898b\u3048\u307e\u3059\u3088\u306d\u3002\n\u7279\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u7e4b\u3044\u3067\u3044\u304f\u90e8\u5206\u306f\u30ae\u30bf\u30fc\u306e\u30a8\u30d5\u30a7\u30af\u30bf\u30fc\u3092\u7e4b\u3044\u3067\u3044\u304f\u3088\u3046\u306a\u611f\u899a\u3067\u3059\u306d\u3002\n\u30de\u30a4\u30af\u306e\u5165\u529b\u306fAVAudioEngine\u751f\u6210\u6642\u306b\u78ba\u4fdd\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u6b21\u306f\u4efb\u610f\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u307e\u3059\u3002\n\u3053\u308c\u3082Playground\u3067\u3084\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001Playground\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u304c\u3046\u307e\u304f\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067CocoaAppliation\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\nCocoaApplication\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\nimport Cocoa\nimport AVFoundation\n\nclass ViewController: NSViewController {\n\n    var engine = AVAudioEngine()\n    //playerNode\u306e\u6e96\u5099\n    var player = AVAudioPlayerNode()\n    //revebNode\u306e\u6e96\u5099\n    var reverb = AVAudioUnitReverb()\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        self.playAudio()\n    }\n\n    func playAudio() {\n        var fileUrl = NSURL(fileURLWithPath: \"/Users/Muukii/Desktop/sample.m4a\")\n        // \u30aa\u30fc\u30c7\u30a3\u30aa\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\n        var audioFile = AVAudioFile(forReading: fileUrl!, error: nil)\n\n        if let file = audioFile {\n            // reverb\u306e\u8a2d\u5b9a\n            reverb.loadFactoryPreset(.LargeHall2)\n\n            // AudioEngine\u306bnode\u3092\u8a2d\u5b9a\n            engine.attachNode(player)\n            engine.attachNode(reverb)\n\n            engine.connect(player, to: reverb, format: file.processingFormat)\n            engine.connect(reverb, to: engine.outputNode, format: file.processingFormat)\n\n            engine.startAndReturnError(nil)\n\n            // player\u306b\u30aa\u30fc\u30c7\u30a3\u30aa\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a\n            self.player.scheduleFile(file, atTime: nil, completionHandler: { () -> Void in\n                // \u518d\u751f\u304c\u7d42\u4e86\u3059\u308b\u3068\u547c\u3070\u308c\u308b\n                println(\"Completion\")\n                })\n\n                // \u518d\u751f\u958b\u59cb\n                self.player.play()\n            }\n        }\n    }\n\n\u3053\u308c\u3067\u5b9f\u884c\u3059\u308b\u3068\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u518d\u751f\u3055\u308c\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306fwav,mp3,aac\u3042\u305f\u308a\u306a\u3089\u5927\u4f53\u518d\u751f\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u308c\u3067\u4ee5\u4e0a\u3068\u306a\u308a\u307e\u3059\u3002\n\u4eca\u56de\u30a8\u30d5\u30a7\u30af\u30c8\u306fDelay\u3068Reverb\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u304c\u3001\u4ed6\u306b\u306f\n- AVAudioUnitDistortion\n- AVAudioUnitEQ\n\u306a\u3069\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5168\u90e8\u3067\uff14\u7a2e\u985e\u306a\u306e\u3067\u307e\u3060\u3061\u3087\u3063\u3068\u5c11\u306a\u3044\u3067\u3059\u306d\u3002\nAVAudioUnitEffect\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u308b\u3053\u3068\u3067\u72ec\u81ea\u306e\u30a8\u30d5\u30a7\u30af\u30c8\u306f\u4f5c\u308c\u305d\u3046\u3067\u3059\u304c\u3001\n\u7d50\u5c40\u306e\u3068\u3053\u308d\u5185\u90e8\u3067\u306fCoreAudio\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3001\n\u30a8\u30d5\u30a7\u30af\u30c8\u51e6\u7406\u306fC,C++\u3067\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\u305f\u3060\u3001\u4eca\u307e\u3067\u306f\u97f3\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u304b\u3051\u308b\u306b\u306fCoreAudio\u3092\u76f4\u63a5\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001\nAVAudioEngine\u306e\u767b\u5834\u306b\u3088\u308aObjective-C,Swift\u3067\u7c21\u5358\u306b\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u306f\u7d20\u6674\u3089\u3057\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u5f8c\u306eAPI\u8ffd\u52a0\u306b\u3082\u671f\u5f85\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\niOS8\u304b\u3089AVAudioEngine\u306e\u767b\u5834\u306b\u3088\u308a\u3001CoreAudio\u304c\u3082\u3063\u3068\u4f7f\u3044\u3084\u3059\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306fSwift\u3068Playground\u3092\u7528\u3044\u3066\u97f3\u3067\u904a\u3093\u3067\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u6700\u521d\u306b\u4f7f\u7528\u3059\u308b\u30af\u30e9\u30b9\u306b\u3064\u3044\u3066\u8efd\u304f\u8aac\u660e\u3067\u3059\u3002\n\n- AVAudioEngine\nAVAudioNode\u3092\u7ba1\u7406\u3059\u308b\u30af\u30e9\u30b9\nAVAudioEngine\u306b\u5bfe\u3057\u3066AVAudioNode\u3092attach\u3059\u308b\u3053\u3068\u3067\u5165\u529b\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u306a\u3069\u3092\u304b\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n- AVAudioNode\n\u97f3\u306e\u751f\u6210\u3001\u51e6\u7406\u3001\b\u5165\u51fa\u529b\u306e\u305f\u3081\u306e\u62bd\u8c61\u30af\u30e9\u30b9\n\u30a8\u30d5\u30a7\u30af\u30c8\u306a\u3069\u306fAVAudioUnitEffect\u30af\u30e9\u30b9\u3092\u4f7f\u7528\u3057\u307e\u3059\u304c\u3001\u3053\u308c\u3089\u3082AVAudioNode\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u3067\u3059\u3002\n\n\u57fa\u672c\u7684\u306b\u306f\u4e0a\u8a18\u306e\uff12\u3064\u30af\u30e9\u30b9\u304c\u5143\u3068\u306a\u3063\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\n\n\u3067\u306f\u3001\u7c21\u5358\u306b\u30de\u30a4\u30af\u5165\u529b\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u304b\u3051\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u307e\u305a\u9069\u5f53\u306aPlayground\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n>\u3053\u306e\u3068\u304dPlatform\u306f`Mac OS`\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n>iOS\u306b\u3057\u3066\u3057\u307e\u3046\u3068\u5165\u529bnode\u306e\u751f\u6210\u304c\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u3067\u306f\u3068\u308a\u3042\u3048\u305a\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u4e00\u6c17\u306b\u8cbc\u308a\u4ed8\u3051\u3066\u3057\u307e\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u308c\u3067\u30de\u30a4\u30af\u5165\u529b\u306bdelay\u3068reverb\u304c\u304b\u304b\u308a\u307e\u3059\u3002\n\n```swift\nimport AVFoundation\nimport XCPlayground\nXCPSetExecutionShouldContinueIndefinitely(continueIndefinitely: true)\n\nvar engine = AVAudioEngine()\n\n//effectNode\u306e\u7528\u610f\nvar delay = AVAudioUnitDelay()\nvar reverb = AVAudioUnitReverb()\n\nvar input = engine.inputNode\nvar output = engine.outputNode\nvar format = input.inputFormatForBus(0)\nvar error:NSError?\n\n//delay\u306e\u8a2d\u5b9a\ndelay.delayTime = 1.5\ndelay.feedback = 20\n\n//reverb\u306e\u8a2d\u5b9a\nreverb.loadFactoryPreset(.LargeRoom2)\nreverb.wetDryMix = 80\n\n//engine\u306bdelay\u3068reverb\u3092\u8ffd\u52a0\nengine.attachNode(delay)\nengine.attachNode(reverb)\n\n//effect\u3092\u3064\u306a\u3050\u9806\u756a\u3092\u6307\u5b9a\u3000\u5165\u529b -> delay -> reverb -> \u51fa\u529b\nengine.connect(input, to: delay, format: format)\nengine.connect(delay, to: reverb, format: format)\nengine.connect(reverb, to: output, format: format)\n\n// engine\u3092\u5b9f\u884c\nengine.startAndReturnError(&error)\n```\n\n\u6bd4\u8f03\u7684\u7c21\u5358\u305d\u3046\u306b\u898b\u3048\u307e\u3059\u3088\u306d\u3002\n\u7279\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u7e4b\u3044\u3067\u3044\u304f\u90e8\u5206\u306f\u30ae\u30bf\u30fc\u306e\u30a8\u30d5\u30a7\u30af\u30bf\u30fc\u3092\u7e4b\u3044\u3067\u3044\u304f\u3088\u3046\u306a\u611f\u899a\u3067\u3059\u306d\u3002\n\n\u30de\u30a4\u30af\u306e\u5165\u529b\u306fAVAudioEngine\u751f\u6210\u6642\u306b\u78ba\u4fdd\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n\u6b21\u306f\u4efb\u610f\u306e\u30aa\u30fc\u30c7\u30a3\u30aa\u30d5\u30a1\u30a4\u30eb\u3092\u518d\u751f\u3057\u3066\u307f\u307e\u3059\u3002\n\u3053\u308c\u3082Playground\u3067\u3084\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u3059\u304c\u3001Playground\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u304c\u3046\u307e\u304f\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067CocoaAppliation\u3067\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nCocoaApplication\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n\n```swift\nimport Cocoa\nimport AVFoundation\n\nclass ViewController: NSViewController {\n\n\tvar engine = AVAudioEngine()\n\t//playerNode\u306e\u6e96\u5099\n\tvar player = AVAudioPlayerNode()\n\t//revebNode\u306e\u6e96\u5099\n\tvar reverb = AVAudioUnitReverb()\n\n\toverride func viewDidLoad() {\n\t\tsuper.viewDidLoad()\n\t\tself.playAudio()\n\t}\n\n\tfunc playAudio() {\n\t\tvar fileUrl = NSURL(fileURLWithPath: \"/Users/Muukii/Desktop/sample.m4a\")\n\t\t// \u30aa\u30fc\u30c7\u30a3\u30aa\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\n\t\tvar audioFile = AVAudioFile(forReading: fileUrl!, error: nil)\n\n\t\tif let file = audioFile {\n\t\t\t// reverb\u306e\u8a2d\u5b9a\n\t\t\treverb.loadFactoryPreset(.LargeHall2)\n\n\t\t\t// AudioEngine\u306bnode\u3092\u8a2d\u5b9a\n\t\t\tengine.attachNode(player)\n\t\t\tengine.attachNode(reverb)\n\n\t\t\tengine.connect(player, to: reverb, format: file.processingFormat)\n\t\t\tengine.connect(reverb, to: engine.outputNode, format: file.processingFormat)\n\n\t\t\tengine.startAndReturnError(nil)\n\n\t\t\t// player\u306b\u30aa\u30fc\u30c7\u30a3\u30aa\u30d5\u30a1\u30a4\u30eb\u3092\u8a2d\u5b9a\n\t\t\tself.player.scheduleFile(file, atTime: nil, completionHandler: { () -> Void in\n\t\t\t\t// \u518d\u751f\u304c\u7d42\u4e86\u3059\u308b\u3068\u547c\u3070\u308c\u308b\n\t\t\t\tprintln(\"Completion\")\n\t\t\t\t})\n\n\t\t\t\t// \u518d\u751f\u958b\u59cb\n\t\t\t\tself.player.play()\n\t\t\t}\n\t\t}\n\t}\n```\n\n\u3053\u308c\u3067\u5b9f\u884c\u3059\u308b\u3068\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u304c\u518d\u751f\u3055\u308c\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306fwav,mp3,aac\u3042\u305f\u308a\u306a\u3089\u5927\u4f53\u518d\u751f\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\n***\n\u7c21\u5358\u306a\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u308c\u3067\u4ee5\u4e0a\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u4eca\u56de\u30a8\u30d5\u30a7\u30af\u30c8\u306fDelay\u3068Reverb\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u304c\u3001\u4ed6\u306b\u306f\n- AVAudioUnitDistortion\n- AVAudioUnitEQ\n\n\u306a\u3069\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5168\u90e8\u3067\uff14\u7a2e\u985e\u306a\u306e\u3067\u307e\u3060\u3061\u3087\u3063\u3068\u5c11\u306a\u3044\u3067\u3059\u306d\u3002\nAVAudioUnitEffect\u306e\u30b5\u30d6\u30af\u30e9\u30b9\u3092\u4f5c\u308b\u3053\u3068\u3067\u72ec\u81ea\u306e\u30a8\u30d5\u30a7\u30af\u30c8\u306f\u4f5c\u308c\u305d\u3046\u3067\u3059\u304c\u3001\n\u7d50\u5c40\u306e\u3068\u3053\u308d\u5185\u90e8\u3067\u306fCoreAudio\u304c\u4f7f\u7528\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3001\n\u30a8\u30d5\u30a7\u30af\u30c8\u51e6\u7406\u306fC,C++\u3067\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\n\u305f\u3060\u3001\u4eca\u307e\u3067\u306f\u97f3\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u304b\u3051\u308b\u306b\u306fCoreAudio\u3092\u76f4\u63a5\u4f7f\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001\nAVAudioEngine\u306e\u767b\u5834\u306b\u3088\u308aObjective-C,Swift\u3067\u7c21\u5358\u306b\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u306f\u7d20\u6674\u3089\u3057\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u5f8c\u306eAPI\u8ffd\u52a0\u306b\u3082\u671f\u5f85\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Swift", "CoreAudio", "avfoundation", "iOS", "Xcode"]}