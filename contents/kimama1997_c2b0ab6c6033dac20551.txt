{"context": " More than 1 year has passed since last update.Rails4(webRick)\u3092Windows\u3067\u8d70\u3089\u305b\u3066SSL(https)\u3092\u4f7f\u3046\u30e1\u30e2\u3002\n\u74b0\u5883\uff1a Windows8 / Ruby1.9.3 / Rails4.0.2\n\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3084\u3063\u3066\u307f\u305f\u3002\n\nrails\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\n.\\bin\\sslrails\u3092\u4f5c\u308b\u3002\n\nbin/sslrails\n#!/usr/bin/env ruby\nrequire 'rubygems'\nrequire 'rails/commands/server'\nrequire 'rack'\nrequire 'webrick'\nrequire 'webrick/https'\n\nmodule Rails\n  class Server < ::Rack::Server\n    def default_options\n\n      # cn \u3068 comment \u3092\u9069\u5f53\u306b\u8a2d\u5b9a\n      cn = [[ \"CN\", WEBrick::Utils::getservername]]  \n      comment = \"Generated by Ruby/OpenSSL\"   \n      cert, rsa = WEBrick::Utils::create_self_signed_cert(1024, cn, comment)\n      ssl_certificate = cert.to_s\n      ssl_private_key = rsa.to_s\n\n      super.merge({\n          :Port => 443,\n          :environment => (ENV['RAILS_ENV'] || \"development\").dup,\n          :daemonize => false,\n          :debugger => false,\n          :pid => File.expand_path(\"tmp/pids/server.pid\"),\n          :config => File.expand_path(\"config.ru\"),\n          :SSLEnable => true,\n          :SSLVerifyClient => OpenSSL::SSL::VERIFY_NONE,\n          :SSLPrivateKey => OpenSSL::PKey::RSA.new(ssl_private_key),\n          :SSLCertificate => OpenSSL::X509::Certificate.new(ssl_certificate),\n          :SSLCertName => cn\n      })\n    end\n  end\nend\n\n\nAPP_PATH = File.expand_path('../../config/application',  __FILE__)\nrequire_relative '../config/boot'\nrequire 'rails/commands'\n\n\nconfig/environments/development.rb\u306b\u3001config.force_ssl = true\u3092\u8ffd\u52a0\u3059\u308b\u3068http\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3082https\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u304f\u308c\u308b\u3089\u3057\u3044\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\nbundle exec ruby .\\bin\\sslrails s\n\u3082\u3057\u304b\u3057\u305f\u3089ruby .\\bin\\sslrails s\u3067\u3082\u5927\u4e08\u592b\uff1f\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\u306a\u308a\u8b66\u544a\u30c0\u30a4\u30a2\u30ed\u30b0\u306a\u308a\u51fa\u308b\u3060\u308d\u3046\u3051\u3069\u6b63\u5e38\u3002\n\n\u30b5\u30fc\u30d0\u30fc\u306e\u518d\u8d77\u52d5\n\u306a\u304a\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u9375\u3092\u751f\u6210\u3057\u3066\u308b\u306e\u3067\u518d\u8d77\u52d5\u3059\u308b\u3068\u9375\u304c\u5909\u308f\u308b\u3002\n\u305d\u306e\u305f\u3081\u540c\u30bb\u30c3\u30b7\u30e7\u30f3\u304b\u3089\u518d\u63a5\u7d9a\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u5f53\u7136\u306e\u3053\u3068\u306a\u304c\u3089\u8a3c\u660e\u66f8\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n[2014-03-08 15:39:19] ERROR OpenSSL::SSL::SSLError: SSL_accept returned=1 errno=0 state=SSLv3 read client certificate A:\n sslv3 alert bad certificate\n        C:/Ruby193/lib/ruby/1.9.1/openssl/ssl-internal.rb:172:in `accept'\n[2014-03-08 15:39:33] ERROR OpenSSL::SSL::SSLError: SSL_accept SYSCALL returned=5 errno=0 state=SSLv2/v3 read client hel\nlo A\n        C:/Ruby193/lib/ruby/1.9.1/openssl/ssl-internal.rb:172:in `accept'\n\nChrome\u3060\u3063\u305f\u3089\u3068\u308a\u3042\u3048\u305a\u3044\u3063\u305f\u3093\u7d42\u4e86\u3059\u308c\u3070\u5927\u4e08\u592b\u3002Firefox\u306e\u5834\u5408\u306fcert8.db\u3092\u524a\u9664\u3059\u308b\u3057\u304b\u7121\u3044\u307f\u305f\u3044(http://www.yubaz.com/?p=52 )\u2026\u307b\u304b\u306e\u624b\u6bb5\u77e5\u3063\u3066\u305f\u3089\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u53c2\u8003(\u3063\u3066\u304b\u305d\u306e\u307e\u307e)\n\n\nRails\u306e\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306bhttps(SSL)\u3092\u5c0e\u5165\u3059\u308b\u65b9\u6cd5 \nConfiguring WEBrick to use SSL in Rails 4 - Stack Overflow\n\nRails4(webRick)\u3092Windows\u3067\u8d70\u3089\u305b\u3066SSL(https)\u3092\u4f7f\u3046\u30e1\u30e2\u3002\n\n\u74b0\u5883\uff1a Windows8 / Ruby1.9.3 / Rails4.0.2\n\n----\n\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u3084\u3063\u3066\u307f\u305f\u3002\n\n## rails\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\n\n`.\\bin\\sslrails`\u3092\u4f5c\u308b\u3002\n\n```rb:bin/sslrails\n#!/usr/bin/env ruby\nrequire 'rubygems'\nrequire 'rails/commands/server'\nrequire 'rack'\nrequire 'webrick'\nrequire 'webrick/https'\n\nmodule Rails\n  class Server < ::Rack::Server\n    def default_options\n\n      # cn \u3068 comment \u3092\u9069\u5f53\u306b\u8a2d\u5b9a\n      cn = [[ \"CN\", WEBrick::Utils::getservername]]  \n      comment = \"Generated by Ruby/OpenSSL\"   \n      cert, rsa = WEBrick::Utils::create_self_signed_cert(1024, cn, comment)\n      ssl_certificate = cert.to_s\n      ssl_private_key = rsa.to_s\n\n      super.merge({\n          :Port => 443,\n          :environment => (ENV['RAILS_ENV'] || \"development\").dup,\n          :daemonize => false,\n          :debugger => false,\n          :pid => File.expand_path(\"tmp/pids/server.pid\"),\n          :config => File.expand_path(\"config.ru\"),\n          :SSLEnable => true,\n          :SSLVerifyClient => OpenSSL::SSL::VERIFY_NONE,\n          :SSLPrivateKey => OpenSSL::PKey::RSA.new(ssl_private_key),\n          :SSLCertificate => OpenSSL::X509::Certificate.new(ssl_certificate),\n          :SSLCertName => cn\n      })\n    end\n  end\nend\n\n\nAPP_PATH = File.expand_path('../../config/application',  __FILE__)\nrequire_relative '../config/boot'\nrequire 'rails/commands'\n```\n\n`config/environments/development.rb`\u306b\u3001`config.force_ssl = true`\u3092\u8ffd\u52a0\u3059\u308b\u3068http\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3082https\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3066\u304f\u308c\u308b\u3089\u3057\u3044\u3002\n\n## \u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\n`bundle exec ruby .\\bin\\sslrails s`\n\u3082\u3057\u304b\u3057\u305f\u3089`ruby .\\bin\\sslrails s`\u3067\u3082\u5927\u4e08\u592b\uff1f\n\n\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30a8\u30e9\u30fc\u30da\u30fc\u30b8\u306a\u308a\u8b66\u544a\u30c0\u30a4\u30a2\u30ed\u30b0\u306a\u308a\u51fa\u308b\u3060\u308d\u3046\u3051\u3069\u6b63\u5e38\u3002\n\n## \u30b5\u30fc\u30d0\u30fc\u306e\u518d\u8d77\u52d5\n\u306a\u304a\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3059\u308b\u3068\u304d\u306b\u9375\u3092\u751f\u6210\u3057\u3066\u308b\u306e\u3067\u518d\u8d77\u52d5\u3059\u308b\u3068\u9375\u304c\u5909\u308f\u308b\u3002\n\u305d\u306e\u305f\u3081\u540c\u30bb\u30c3\u30b7\u30e7\u30f3\u304b\u3089\u518d\u63a5\u7d9a\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u5f53\u7136\u306e\u3053\u3068\u306a\u304c\u3089\u8a3c\u660e\u66f8\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u3002\n\n```\n[2014-03-08 15:39:19] ERROR OpenSSL::SSL::SSLError: SSL_accept returned=1 errno=0 state=SSLv3 read client certificate A:\n sslv3 alert bad certificate\n        C:/Ruby193/lib/ruby/1.9.1/openssl/ssl-internal.rb:172:in `accept'\n[2014-03-08 15:39:33] ERROR OpenSSL::SSL::SSLError: SSL_accept SYSCALL returned=5 errno=0 state=SSLv2/v3 read client hel\nlo A\n        C:/Ruby193/lib/ruby/1.9.1/openssl/ssl-internal.rb:172:in `accept'\n```\n\nChrome\u3060\u3063\u305f\u3089\u3068\u308a\u3042\u3048\u305a\u3044\u3063\u305f\u3093\u7d42\u4e86\u3059\u308c\u3070\u5927\u4e08\u592b\u3002Firefox\u306e\u5834\u5408\u306fcert8.db\u3092\u524a\u9664\u3059\u308b\u3057\u304b\u7121\u3044\u307f\u305f\u3044(http://www.yubaz.com/?p=52 )\u2026\u307b\u304b\u306e\u624b\u6bb5\u77e5\u3063\u3066\u305f\u3089\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n\n\n## \u53c2\u8003(\u3063\u3066\u304b\u305d\u306e\u307e\u307e)\n\n- [Rails\u306e\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u306bhttps(SSL)\u3092\u5c0e\u5165\u3059\u308b\u65b9\u6cd5](http://qiita.com/GenTamura84/items/a1af6e9b5eb69d5469b7) \n- [Configuring WEBrick to use SSL in Rails 4 - Stack Overflow](http://stackoverflow.com/questions/21189920/configuring-webrick-to-use-ssl-in-rails-4)", "tags": ["Rails4.0.2", "SSL", "Ruby1.9.3"]}