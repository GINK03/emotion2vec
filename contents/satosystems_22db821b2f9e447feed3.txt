{"tags": ["Haskell", "\u3055\u304f\u3089\u306e\u30ec\u30f3\u30bf\u30eb\u30b5\u30fc\u30d0"], "context": " More than 1 year has passed since last update.\u79c1\u306e\u4f7f\u7528\u3057\u3066\u3044\u308b\u300c\u3055\u304f\u3089\u306e\u30ec\u30f3\u30bf\u30eb\u30b5\u30fc\u30d0 \u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u300d\u306f FreeBSD 9.1-RELEASE-p24 amd64 \u3068\u3044\u3046\u74b0\u5883\u3067\u3059\u3002root \u6a29\u9650\u306f\u306a\u3044\u3082\u306e\u306e\u3001\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u306f 100GB \u3042\u308b\u306e\u3067\u3001\u3053\u3053\u306b ghc\u3001cabal-install \u3092\u5c0e\u5165\u3057\u3066\u3001Haskell \u304c\u52d5\u4f5c\u3059\u308b\u74b0\u5883\u3092\u6574\u3048\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u3055\u304f\u3089\u306e\u30ec\u30f3\u30bf\u30eb\u30b5\u30fc\u30d0\u30fc\u306bGHC+Cabal\u3092\u5c0e\u5165\u3057\u305f | \u96d1\u8a18\u5e33\n\n\nghc \u5c0e\u5165\n\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u30012015 \u5e74 12 \u6708\u6642\u70b9\u306e\u6700\u65b0 ghc-7.10.x \u306f root \u6a29\u9650\u304c\u306a\u3044\u3068\u5c0e\u5165\u304c\u96e3\u3057\u3044\u3067\u3059\u3002\u306a\u306e\u3067\u4eca\u56de\u306f ghc-7.8.x \u7cfb\u306e\u6700\u65b0\u7248\u3067\u3042\u308b ghc-7.8.4 \u3092\u5c0e\u5165\u3057\u307e\u3057\u305f\u3002\n.bash_profile \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nalias cabal='TMPDIR=~/.tmp LANG=en_US.UTF-8 cabal'\nexport PATH=$HOME/usr/bin:$PATH\nexport PATH=$HOME/.cabal/bin:$PATH\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/rts-1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/ghc-prim-0.3.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/integer-gmp-0.5.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/base-4.7.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/filepath-1.3.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/array-0.5.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/deepseq-1.3.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/bytestring-0.10.4.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/containers-0.5.5.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/old-locale-1.0.0.6\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/time-1.4.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/unix-2.7.0.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/directory-1.2.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/process-1.2.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/hpc-0.6.0.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/pretty-1.1.1.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/template-haskell-2.9.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/Cabal-1.18.1.5\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/binary-0.7.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/bin-package-db-0.0.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/hoopl-3.10.0.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/transformers-0.3.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/xhtml-3000.2.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/terminfo-0.4.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/haskeline-0.7.1.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/ghc-7.8.4\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/old-time-1.1.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/haskell98-2.0.0.3\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/haskell2010-1.1.2.0\n\ncabal \u306e alias \u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002cabal \u304c\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u969b\u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 /var/tmp \u304c\u4f7f\u7528\u3055\u308c\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u304c\u6642\u3005\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u5410\u304d\u307e\u3059\u3002\n$ cabal install --only-dependencies\n...(snip)\nchecking whether we are cross compiling... configure: error: in `/var/tmp/cabal-tmp-8769/network-2.6.2.1':\n...(snip)\ncabal: Error: some packages failed to install:\nnetwork-2.6.2.1 failed during the configure step. The exception was:\nExitFailure 1\n\n\u3053\u308c\u3092 $HOME/.tmp \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u56de\u907f\u3057\u3066\u3044\u307e\u3059\u3002\nghc \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306f $HOME/usr \u306b\u6307\u5b9a\u3059\u308b\u306e\u3067\u3059\u304c\u3001ghc \u30d3\u30eb\u30c9\u6642\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3092\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b LD_LIBRARY_PATH \u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u56de\u907f\u3057\u307e\u3059\u3002\u3064\u3044\u3067\u306b ghc \u3068 cabal \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306b\u3082 PATH \u3092\u901a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3082\u3057\u3001ghc \u3084 cabal \u3092\u4f55\u5ea6\u304b\u5c0e\u5165\u3057\u3088\u3046\u3068\u3057\u3066\u632b\u6298\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u5834\u5408\u3001.ghc \u3084 .cabal \u304c\u5b58\u5728\u3059\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u3089\u306f\u6d88\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30c8\u30e9\u30d6\u30eb\u306e\u5143\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n$ rm -rf ~/.ghc ~/.cabal\n\n\u74b0\u5883\u304c\u304d\u308c\u3044\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3067 ghc \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ wget -c --no-check-certificate https://www.haskell.org/ghc/dist/7.8.4/ghc-7.8.4-x86_64-portbld-freebsd.tar.xz\n$ tar xf ghc-7.8.4-x86_64-portbld-freebsd.tar.xz\n$ cd ghc-7.8.4\n$ ./configure --prefix=$HOME/usr\n$ gmake install\n\n\u3053\u308c\u3067 ghc \u304c\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n$ ghc --version\nThe Glorious Glasgow Haskell Compilation System, version 7.8.4\n\n\u7c21\u5358\u306a\u30b3\u30fc\u30c9\u306a\u3089\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u5b9f\u884c\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n$ echo 'main = putStrLn \"hello\"' > hello.hs\n$ ghc hello.hs\n[1 of 1] Compiling Main             ( hello.hs, hello.o )\nLinking hello ...\n$ ./hello \nhello\n\n\ncabal-install \u306e\u5c0e\u5165\nghc \u3060\u3051\u3067\u306f\u4f55\u3082\u3067\u304d\u306a\u3044\u306e\u3067\u3001cabal-install \u3092\u5c0e\u5165\u3057\u307e\u3059\u3002cabal-install \u306f\u6700\u65b0\u306e 1.22.6.0 \u304c\u5c0e\u5165\u3067\u304d\u307e\u3057\u305f\u3002\n$ curl -O http://hackage.haskell.org/package/cabal-install-1.22.6.0/cabal-install-1.22.6.0.tar.gz\n$ tar xf cabal-install-1.22.6.0.tar.gz\n$ cd cabal-install-1.22.6.0\n$ vi bootstrap.sh\n\nbootstrap.sh \u3092\u5b9f\u884c\u3059\u308b\u524d\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n+ LINK=/usr/bin/ld\n+ #LINK=\"$(for link in collect2 ld; do\n+ #  echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -qw $link &&\n+ #  echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -w  $link |\n+ #  sed -e \"s|\\(.*$link\\).*|\\1|\" -e 's/ //g' -e 's|\"||' && break\n+ #done)\"\n- LINK=\"$(for link in collect2 ld; do\n-   echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -qw $link &&\n-   echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -w  $link |\n-   sed -e \"s|\\(.*$link\\).*|\\1|\" -e 's/ //g' -e 's|\"||' && break\n- done)\"\n\n\u8981\u3059\u308b\u306b\u74b0\u5883\u304b\u3089\u9069\u5207\u306a ld \u30b3\u30de\u30f3\u30c9\u3092\u63a2\u3057\u3060\u3057\u3066\u3044\u308b\u90e8\u5206\u3092\u3001LINK=/usr/bin/ld \u3068\u6c7a\u3081\u6253\u3061\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u884c\u308f\u306a\u3044\u3068\u3001'/usr/bin/ld\"\"--eh-frame-hdr\"\"-V\"\"-dynamic-linker\"\"/libexec/ld' does not refer \u3068\u3044\u3046\u4e0d\u53ef\u89e3\u306a\u7d50\u679c\u304c LINK \u306b\u5165\u3063\u3066\u3057\u307e\u3044\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3053\u3051\u307e\u3059\u3002\n\u4fee\u6b63\u3092\u884c\u3063\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ TAR=\"tar -f -\" ./bootstrap.sh --no-doc\n\n\u7d50\u69cb\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u304c\u3001\u304a\u8336\u3067\u3082\u98f2\u307f\u306a\u304c\u3089\u5f85\u3061\u307e\u3059\u3002\n$ cabal --version\ncabal-install version 1.22.6.0\nusing version 1.22.4.0 of the Cabal library\n\n\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\u3053\u3093\u306a\u611f\u3058\u3067\u59cb\u3081\u307e\u3059\u3002\n$ mkdir foo\n$ cd foo\n$ cabal sandbox init\n$ cabal init\n\n\u6700\u8fd1\u306f cabal \u3088\u308a\u3082 stack \u3092\u4f7f\u3046\u306e\u304c\u4e3b\u6d41\u306b\u306a\u3063\u3066\u304d\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001stack \u306f\u52d5\u5411\u304c\u6fc0\u3057\u3044\u306e\u3067\u3001\u843d\u3061\u7740\u304f\u307e\u3067\u306f\u67af\u308c\u305f cabal \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u79c1\u306e\u4f7f\u7528\u3057\u3066\u3044\u308b\u300c\u3055\u304f\u3089\u306e\u30ec\u30f3\u30bf\u30eb\u30b5\u30fc\u30d0 \u30b9\u30bf\u30f3\u30c0\u30fc\u30c9\u300d\u306f FreeBSD 9.1-RELEASE-p24 amd64 \u3068\u3044\u3046\u74b0\u5883\u3067\u3059\u3002root \u6a29\u9650\u306f\u306a\u3044\u3082\u306e\u306e\u3001\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u306f 100GB \u3042\u308b\u306e\u3067\u3001\u3053\u3053\u306b ghc\u3001cabal-install \u3092\u5c0e\u5165\u3057\u3066\u3001Haskell \u304c\u52d5\u4f5c\u3059\u308b\u74b0\u5883\u3092\u6574\u3048\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u30a8\u30f3\u30c8\u30ea\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n* [\u3055\u304f\u3089\u306e\u30ec\u30f3\u30bf\u30eb\u30b5\u30fc\u30d0\u30fc\u306bGHC+Cabal\u3092\u5c0e\u5165\u3057\u305f | \u96d1\u8a18\u5e33](http://d-poppo.nazo.cc/blog/2014/07/ghc-on-rental-server/)\n\n\n# ghc \u5c0e\u5165\n\n\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u30012015 \u5e74 12 \u6708\u6642\u70b9\u306e\u6700\u65b0 ghc-7.10.x \u306f root \u6a29\u9650\u304c\u306a\u3044\u3068\u5c0e\u5165\u304c\u96e3\u3057\u3044\u3067\u3059\u3002\u306a\u306e\u3067\u4eca\u56de\u306f ghc-7.8.x \u7cfb\u306e\u6700\u65b0\u7248\u3067\u3042\u308b ghc-7.8.4 \u3092\u5c0e\u5165\u3057\u307e\u3057\u305f\u3002\n\n`.bash_profile` \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```.bash_profile\nalias cabal='TMPDIR=~/.tmp LANG=en_US.UTF-8 cabal'\nexport PATH=$HOME/usr/bin:$PATH\nexport PATH=$HOME/.cabal/bin:$PATH\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/rts-1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/ghc-prim-0.3.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/integer-gmp-0.5.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/base-4.7.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/filepath-1.3.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/array-0.5.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/deepseq-1.3.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/bytestring-0.10.4.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/containers-0.5.5.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/old-locale-1.0.0.6\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/time-1.4.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/unix-2.7.0.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/directory-1.2.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/process-1.2.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/hpc-0.6.0.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/pretty-1.1.1.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/template-haskell-2.9.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/Cabal-1.18.1.5\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/binary-0.7.1.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/bin-package-db-0.0.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/hoopl-3.10.0.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/transformers-0.3.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/xhtml-3000.2.1\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/terminfo-0.4.0.0\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/haskeline-0.7.1.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/ghc-7.8.4\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/old-time-1.1.0.2\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/haskell98-2.0.0.3\nexport LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/${HOME}/usr/lib/ghc-7.8.4/haskell2010-1.1.2.0\n```\n\ncabal \u306e alias \u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002cabal \u304c\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30d3\u30eb\u30c9\u3059\u308b\u969b\u306b\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 `/var/tmp` \u304c\u4f7f\u7528\u3055\u308c\u308b\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u304c\u6642\u3005\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u5410\u304d\u307e\u3059\u3002\n\n```bash\n$ cabal install --only-dependencies\n...(snip)\nchecking whether we are cross compiling... configure: error: in `/var/tmp/cabal-tmp-8769/network-2.6.2.1':\n...(snip)\ncabal: Error: some packages failed to install:\nnetwork-2.6.2.1 failed during the configure step. The exception was:\nExitFailure 1\n```\n\n\u3053\u308c\u3092 `$HOME/.tmp` \u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u56de\u907f\u3057\u3066\u3044\u307e\u3059\u3002\n\nghc \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306f `$HOME/usr` \u306b\u6307\u5b9a\u3059\u308b\u306e\u3067\u3059\u304c\u3001ghc \u30d3\u30eb\u30c9\u6642\u306b\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u898b\u3064\u304b\u3089\u306a\u3044\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3092\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b `LD_LIBRARY_PATH` \u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u56de\u907f\u3057\u307e\u3059\u3002\u3064\u3044\u3067\u306b ghc \u3068 cabal \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5148\u306b\u3082 PATH \u3092\u901a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u3082\u3057\u3001ghc \u3084 cabal \u3092\u4f55\u5ea6\u304b\u5c0e\u5165\u3057\u3088\u3046\u3068\u3057\u3066\u632b\u6298\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u5834\u5408\u3001`.ghc` \u3084 `.cabal` \u304c\u5b58\u5728\u3059\u308b\u304b\u3082\u77e5\u308c\u307e\u305b\u3093\u3002\u3053\u308c\u3089\u306f\u6d88\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30c8\u30e9\u30d6\u30eb\u306e\u5143\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n```bash\n$ rm -rf ~/.ghc ~/.cabal\n```\n\n\u74b0\u5883\u304c\u304d\u308c\u3044\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3067 ghc \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ wget -c --no-check-certificate https://www.haskell.org/ghc/dist/7.8.4/ghc-7.8.4-x86_64-portbld-freebsd.tar.xz\n$ tar xf ghc-7.8.4-x86_64-portbld-freebsd.tar.xz\n$ cd ghc-7.8.4\n$ ./configure --prefix=$HOME/usr\n$ gmake install\n```\n\n\u3053\u308c\u3067 ghc \u304c\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```bash\n$ ghc --version\nThe Glorious Glasgow Haskell Compilation System, version 7.8.4\n```\n\n\u7c21\u5358\u306a\u30b3\u30fc\u30c9\u306a\u3089\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u5b9f\u884c\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n```bash\n$ echo 'main = putStrLn \"hello\"' > hello.hs\n$ ghc hello.hs\n[1 of 1] Compiling Main             ( hello.hs, hello.o )\nLinking hello ...\n$ ./hello \nhello\n```\n\n# cabal-install \u306e\u5c0e\u5165\n\nghc \u3060\u3051\u3067\u306f\u4f55\u3082\u3067\u304d\u306a\u3044\u306e\u3067\u3001cabal-install \u3092\u5c0e\u5165\u3057\u307e\u3059\u3002cabal-install \u306f\u6700\u65b0\u306e 1.22.6.0 \u304c\u5c0e\u5165\u3067\u304d\u307e\u3057\u305f\u3002\n\n```bash\n$ curl -O http://hackage.haskell.org/package/cabal-install-1.22.6.0/cabal-install-1.22.6.0.tar.gz\n$ tar xf cabal-install-1.22.6.0.tar.gz\n$ cd cabal-install-1.22.6.0\n$ vi bootstrap.sh\n```\n\n`bootstrap.sh` \u3092\u5b9f\u884c\u3059\u308b\u524d\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```diff\n+ LINK=/usr/bin/ld\n+ #LINK=\"$(for link in collect2 ld; do\n+ #  echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -qw $link &&\n+ #  echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -w  $link |\n+ #  sed -e \"s|\\(.*$link\\).*|\\1|\" -e 's/ //g' -e 's|\"||' && break\n+ #done)\"\n- LINK=\"$(for link in collect2 ld; do\n-   echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -qw $link &&\n-   echo 'main;' | ${CC} -v -x c - -o /dev/null -\\#\\#\\# 2>&1 | grep -w  $link |\n-   sed -e \"s|\\(.*$link\\).*|\\1|\" -e 's/ //g' -e 's|\"||' && break\n- done)\"\n```\n\n\u8981\u3059\u308b\u306b\u74b0\u5883\u304b\u3089\u9069\u5207\u306a ld \u30b3\u30de\u30f3\u30c9\u3092\u63a2\u3057\u3060\u3057\u3066\u3044\u308b\u90e8\u5206\u3092\u3001`LINK=/usr/bin/ld` \u3068\u6c7a\u3081\u6253\u3061\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u884c\u308f\u306a\u3044\u3068\u3001`'/usr/bin/ld\"\"--eh-frame-hdr\"\"-V\"\"-dynamic-linker\"\"/libexec/ld' does not refer` \u3068\u3044\u3046\u4e0d\u53ef\u89e3\u306a\u7d50\u679c\u304c `LINK` \u306b\u5165\u3063\u3066\u3057\u307e\u3044\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3053\u3051\u307e\u3059\u3002\n\n\u4fee\u6b63\u3092\u884c\u3063\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\n$ TAR=\"tar -f -\" ./bootstrap.sh --no-doc\n```\n\n\u7d50\u69cb\u6642\u9593\u304c\u304b\u304b\u308a\u307e\u3059\u304c\u3001\u304a\u8336\u3067\u3082\u98f2\u307f\u306a\u304c\u3089\u5f85\u3061\u307e\u3059\u3002\n\n```bash\n$ cabal --version\ncabal-install version 1.22.6.0\nusing version 1.22.4.0 of the Cabal library\n```\n\n# \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u59cb\u3081\u307e\u3059\u3002\n\n```bash\n$ mkdir foo\n$ cd foo\n$ cabal sandbox init\n$ cabal init\n```\n\n\u6700\u8fd1\u306f `cabal` \u3088\u308a\u3082 `stack` \u3092\u4f7f\u3046\u306e\u304c\u4e3b\u6d41\u306b\u306a\u3063\u3066\u304d\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u304c\u3001`stack` \u306f\u52d5\u5411\u304c\u6fc0\u3057\u3044\u306e\u3067\u3001\u843d\u3061\u7740\u304f\u307e\u3067\u306f\u67af\u308c\u305f `cabal` \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n"}