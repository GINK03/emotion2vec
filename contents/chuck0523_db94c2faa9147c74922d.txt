{"context": "\u6700\u8fd1\u3088\u3046\u3084\u304fPromise\u3092\u89e6\u308a\u59cb\u3081\u307e\u3057\u305f\u3002\u308f\u308a\u3068\u96f0\u56f2\u6c17\u3067\u4f7f\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3053\u3089\u3067\u81ea\u5206\u306e\u305f\u3081\u306b\u6574\u7406\u3092\u2026\u3002\n\u305f\u3060\u3001\u57fa\u672c\u7684\u306a\u4f8b\u304c\u3059\u3067\u306b\u8907\u96d1\u3068\u3044\u3046\u304b\u3001\u521d\u5fc3\u8005\u306b\u3068\u3063\u3066\u306f\u30e0\u30ba\u3044\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u8d85\u565b\u307f\u7815\u3044\u3066\u307f\u307e\u3057\u305f\u3002\nPromise - MDN\n\n\u6700\u5c0f\u69cb\u6210\nPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\u5f15\u6570\u306e\u95a2\u6570\u306f\u5fc5\u9808\u3067\u3059\u3002\nnew Promise(() => {})\n\n\u5f15\u6570\u304c\u7a7a\u3060\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6012\u3089\u308c\u307e\u3059\u3002\n> new Promise()\nTypeError: Promise resolver undefined is not a function\n\n\u6570\u5024\u3067\u8aa4\u9b54\u5316\u305d\u3046\u3068\u3057\u3066\u3082\u30e0\u30c0\u307f\u305f\u3044\u3067\u3059\u3002\n> new Promise(10)\nTypeError: Promise resolver 10 is not a function\n\n\n\u95a2\u6570\u306e\u5f15\u6570\nPromise\u521d\u671f\u5316\u6642\u306e\u95a2\u6570\u306b\u306f\u3001\u5f15\u6570\u3092\uff12\u3064\u6e21\u305b\u307e\u3059\u3002\n\u7b2c\u4e00\u5f15\u6570\u304c\"\u6210\u529f\"\u306e\u305f\u3081\u306e\u95a2\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u304c\"\u5931\u6557\"\u306e\u305f\u3081\u306e\u95a2\u6570\u3067\u3059\u3002\nnew Promise((seikou, sippai) => {})\n\n\n\u6210\u529f\u3055\u305b\u308b\n\u6210\u529f\u3055\u305b\u307e\u3059\u3002\u7b2c\u4e00\u5f15\u6570\u306e\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u3068\"\u6210\u529f\"\u3068\u306a\u308a\u307e\u3059\u3002\nnew Promise((seikou, sippai) => {\n  seikou()\n})\n\n\n\u5931\u6557\u3055\u305b\u308b\n\u5931\u6557\u3055\u305b\u307e\u3059\u3002\u7b2c\u4e8c\u5f15\u6570\u306e\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u3068\"\u5931\u6557\"\u3068\u306a\u308a\u307e\u3059\u3002\nnew Promise((seikou, sippai) => {\n  sippai()\n})\n\n\u3061\u306a\u307f\u306b\u3001\u6b63\u5f0f\u306b\u306f\u6210\u529f\u3057\u305f\u72b6\u614b\u3092\"fulfilled\"\u3001\u5931\u6557\u3057\u305f\u72b6\u614b\u3092\"rejected\"\u3068\u547c\u3076\u3089\u3057\u3044\u3067\u3059\u3002\n\n\u5f8c\u51e6\u7406\u3082\u66f8\u3044\u3066\u307f\u308b\n\u5f8c\u51e6\u7406\u3082\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\nnew Promise(() => {})\n  .then(() => {}) // Promise\u304c\"\u6210\u529f\"\u306a\u3089then\u4ee5\u4e0b\u304c\u547c\u3070\u308c\u308b\u3002\n  .catch(() => {}) // Promise\u304c\"\u5931\u6557\"\u306a\u3089catch\u4ee5\u4e0b\u304c\u547c\u3070\u308c\u308b\u3002\n\n\n\u78ba\u8a8d\n\u6210\u529f\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nnew Promise((seikou, sippai) => {\n  seikou()\n})\n  .then(() => {\n    console.log('\u6210\u529f\u3057\u305f\u306e\u3067\u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b')\n  })\n  .catch(() => {})\n\n\u4e00\u5fdc\u3001\u5931\u6557\u3057\u305f\u3053\u3068\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nnew Promise((seikou, sippai) => {\n    sippai()\n  })\n    .then(() => {})\n    .catch(() => {\n      console.log('\u5931\u6557\u3057\u305f\u306e\u3067\u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b')\n    })\n\n\nresolve, reject\n\u4e00\u822c\u7684\u306b\u306f\u3001seikou\u306b\u306fresolve(\u89e3\u6c7a), sippai\u306b\u306freject(\u62d2\u7d76)\u3068\u3044\u3046\u540d\u524d\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002\nnew Promise((resolve, reject) => {})\n\n\nPromise\u3092\u8fd4\u3059\u95a2\u6570\nPromise\u3092\u4f5c\u3063\u3066\u8fd4\u3059\u95a2\u6570\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nconst createPromise = () => {\n  return new Promise((resolve, reject) => {})\n}\n\nPromise\u3092\u6210\u529f\u3055\u305b\u308b\u304b\u3069\u3046\u304b\u3002\u5f15\u6570\u3092\u6e21\u3057\u3066\u6c7a\u3081\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nconst makePromise = (seikou) => {\n  return new Promise((resolve, reject) => {\n    if(seikou) {\n      resolve() // \u6210\u529f\u3055\u305b\u308b\n    } else {\n      reject() // \u5931\u6557\u3055\u305b\u308b\n    }\n  })\n}\n\nPromise\uff08\u7d04\u675f\uff09\u3092\u7834\u3063\u3066\u307f\u307e\u3059\u3002\nconst brokenPromise = makePromise(false) // false\u3092\u6e21\u3059\u3068reject\u304c\u5b9f\u884c\u3055\u308c\u308b\nbrokenPromise\n  .then(() => {\n    // \u4eca\u56de\u306f\u3053\u3063\u3061\u306f\u547c\u3070\u308c\u306a\u3044\n  })\n  .catch(() => {\n    // \u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b\u3002\n    console.log('\u5931\u6557\u3055\u305b\u305f\u306e\u3067\u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b')\n  })\n\n\u6210\u529f/\u5931\u6557\u306e\u7406\u7531\u3092\u6301\u305f\u305b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u307e\u305a\u306f\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3001\nconst promiseAgain = (seikou, riyuu) => {\n  return new Promise((resolve, reject) => {\n    if(seikou) {\n      resolve(riyuu) // \u6210\u529f\u3055\u305b\u308b\n    } else {\n      reject(riyuu) // \u5931\u6557\u3055\u305b\u308b\n    }\n  })\n}\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\nconst brokenPromiseAgain = promiseAgain(false, '\u3084\u308b\u6c17\u304c\u8d77\u304d\u306a\u3044')\nbrokenPromiseAgain\n  .then((result) => {\n    // \u4eca\u56de\u3082\u3053\u3063\u3061\u306f\u547c\u3070\u308c\u306a\u3044\u3051\u3069\u3001\u6210\u529f\u7d50\u679c\u306fresult\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u3002\n  })\n  .catch((err) => {\n    // reject\u306e\u7406\u7531\u304cerr\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\n    console.log(`\u5931\u6557\u7406\u7531\u306f\u3001${err}\u304b\u3089\u3002`)\n  })\n\n\n\u6210\u529f/\u5931\u6557\u304c\u78ba\u5b9a\u3057\u3066\u3044\u308b\u306a\u3089\n\u6210\u529f\uff08resolve\uff09\u3060\u3051\u3092\u884c\u3046\u306a\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nconst keptPromise = () => {\n  return Promise.resolve('\u5fc5\u305a\u6210\u529f\u3059\u308bPromise')\n}\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\nkeptPromise()\n  .then((result) => {\n    console.log(result) // '\u5fc5\u305a\u6210\u529f\u3059\u308bPromise'\n  })\n  .catch(() => {\n    // \u3053\u3063\u3061\u306f\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\n  })\n\n\u3053\u308c\u306f\u4ee5\u4e0b\u3068\u540c\u69d8\u3067\u3059\u3002\nconst keptPromise = () => {\n  new Promise((resolve) => {\n    resolve('\u5fc5\u305a\u6210\u529f\u3059\u308bPromise')\n  })\n}\nkeptPromise()\n  .then((result) => {\n    console.log(result) // '\u5fc5\u305a\u6210\u529f\u3059\u308bPromise'\n  })\n  .catch(() => {\n    // \u3053\u3063\u3061\u306f\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\n  })\n\n\u5931\u6557\uff08reject\uff09\u3060\u3051\u3082\u53ef\u80fd\u3067\u3059\u3002\nconst keptPromise = () => {\n  return Promise.reject('\u5fc5\u305a\u5931\u6557\u3059\u308bPromise...')\n}\n\nPromise.resolve() - MDN\nPromise.reject() - MDN\n\n\u8907\u6570\u306ePromise\u306e\u5b9f\u884c\u3092\u5f85\u3064\n\n\u5168\u3066\u304c\u6210\u529f\u3059\u308b\u5834\u5408\nPromise.all\u95a2\u6570\u3092\u4f7f\u3048\u3070\u3001\u8907\u6570\u306ePromise\u3092\u51e6\u7406\u3067\u304d\u307e\u3059\u3002\nPromise.all\u81ea\u4f53\u306fPromise\u3092\u8fd4\u3059\u306e\u3067\u3059\u304c\u3001\u5f15\u6570\u306b\u3068\u3063\u305f\u8907\u6570\u306ePromise\u304c\u3059\u3079\u3066resolve\u3055\u308c\u308b\u307e\u3067\u3001then\u3055\u308c\u307e\u305b\u3093\u3002\n\u307e\u305a\u306f\u3001Promise\u3092\u8fd4\u3059\u95a2\u6570\u3092\u3044\u304f\u3064\u304b\u5b9a\u7fa9\u3057\u307e\u3059\u3002setTimeout\u95a2\u6570\u3092\u4f7f\u3044\u3001\u3061\u3087\u3063\u3068\u305a\u3064\u6210\u529f\u3092\u305a\u3089\u3057\u3066\u3044\u307e\u3059\u3002\nconst promiseA = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('PromiseA\u304c\u6210\u529f')\n      resolve()\n    }, 2000) // \u4e00\u756a\u9045\u3044\n  })\n}\nconst promiseB = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('PromiseB\u304c\u6210\u529f')\n      resolve()\n    }, 1000)\n  })\n}\nconst promiseC = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('PromiseC\u304c\u6210\u529f')\n      resolve()\n    }, 1500)\n  })\n}\n\n\u6b21\u306b\u3001Promise.all\u95a2\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002\u8907\u6570\u306ePromise\u3092\u914d\u5217\u306e\u5f62\u5f0f\u3067\u6307\u5b9a\u3057\u3001\u5168\u3066\u304c\u6210\u529f\u3057\u305f\u3089\u304b\u304b\u3063\u305f\u6642\u9593\u3092\u8868\u793a\u3057\u307e\u3059\u3002\nconst startAllPromises = () => {\n  const startTime = new Date() // \u8a08\u6e2c\u958b\u59cb\u6642\u9593\n  Promise.all([ \n    promiseA(),\n    promiseB(),\n    promiseC()\n  ]).then(() => {\n    const endTime = new Date() // \u8a08\u6e2c\u7d42\u4e86\u6642\u9593\n    console.log(`${(endTime - startTime) / 1000}\u79d2\u3067\u3001\u5168\u3066\u306ePromise\u304c\u6210\u529f`)\n  })\n}\nstartAllPromises() // \u3060\u3044\u305f\u30442\u79d2\u304f\u3089\u3044\u304c\u8868\u793a\u3055\u308c\u308b\n\n\u4e00\u756a\u6210\u529f\u306e\u9045\u3044PromiseA\u304c\u7d42\u308f\u3063\u305f\u3089\u3001Promise.all\u306e\u8fd4\u3059Promise\u306ethen\u304c\u547c\u3070\u308c\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001ABC\u306e\u3069\u308c\u304b\u304c\u5931\u6557(reject)\u3057\u305f\u5834\u5408\u306f\u3001Promise.all()\u306ethen\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\n\n\u5931\u6557\u30b1\u30fc\u30b9\u3092\u88dc\u8db3\u3059\u308b\u5834\u5408\nPromise.all\u306e\u3042\u3068\u306bcatch\u3092\u30c1\u30a7\u30fc\u30f3\u3059\u308c\u3070OK\u3067\u3059\u3002\n\u5931\u6557\u3059\u308bPromise\u3092\u65b0\u3057\u304f\u5b9a\u7fa9\u3057\u307e\u3059\u3002\nconst promiseD = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      console.log('PromiseD\u304c\u5931\u6557\u2026')\n      reject('D')\n    }, 1700)\n  })\n}\n\n\u5931\u6557\u306f1700\u30df\u30ea\u79d2\u5f8c\u3002PromiseC\u304c\u6210\u529f\u3059\u308b\u5f8c\u3001PromiseA\u304c\u6210\u529f\u3059\u308b\u524d\u306b\u5931\u6557\u3057\u307e\u3059\u3002\nconst onePromiseFails = () => {\n  const startTime = new Date()\n  Promise.all([\n    promiseA(),\n    promiseB(),\n    promiseC(),\n    promiseD() // \u2190 \u5931\u6557\u3059\u308bPromise\u3092\u8ffd\u52a0\n  ]).catch((err) => {\n    const endTime = new Date()\n    console.log(`${(endTime - startTime) / 1000}\u79d2\u3067\u3001promise${err}\u304c\u5931\u6557\u3057\u305f\u306e\u3067\u7d42\u4e86`)\n  })\n}\nonePromiseFails()\n\n\u3053\u308c\u3067\u5931\u6557\u306e\u88dc\u8db3\u306f\u3067\u304d\u307e\u3057\u305f\u304c\u3001\u3059\u3067\u306b\u8d70\u308a\u51fa\u3057\u305fPromise\u304c\u505c\u6b62\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\u3002\nPromiseB\u304c\u6210\u529f\nPromiseC\u304c\u6210\u529f\nPromiseD\u304c\u5931\u6557\u2026\n1.703\u79d2\u3067\u3001promiseD\u304c\u5931\u6557\nPromiseA\u304c\u6210\u529f\n\nPromise.all\u306ethen\u304c\u547c\u3070\u308c\u306a\u3044\u3060\u3051\u3067\u3001\u5404Promise\u306f\u304d\u3061\u3093\u3068\u5b9f\u884c\u3055\u308c\u308b\u3093\u3067\u3059\u306d\u3002\nPromise.all() - MDN\n\u57fa\u790e\u306e\u57fa\u790e\u3060\u3051\u3067\u3059\u304c\u3001\u4ee5\u4e0a\u3067\u3059\u3002\n\u4f55\u304b\u9593\u9055\u3044\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3001\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\n\u7d20\u6674\u3089\u3057\u3044\u8cc7\u6599\nJavaScript Promise\u306e\u672c\n\u8a00\u308f\u305a\u3068\u77e5\u308c\u305f\u3001Azu\u3055\u3093\u306ePromise\u89e3\u8aac\u3002\n\u6700\u8fd1\u3088\u3046\u3084\u304fPromise\u3092\u89e6\u308a\u59cb\u3081\u307e\u3057\u305f\u3002\u308f\u308a\u3068\u96f0\u56f2\u6c17\u3067\u4f7f\u3063\u3066\u3057\u307e\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u3053\u3089\u3067\u81ea\u5206\u306e\u305f\u3081\u306b\u6574\u7406\u3092\u2026\u3002\n\u305f\u3060\u3001\u57fa\u672c\u7684\u306a\u4f8b\u304c\u3059\u3067\u306b\u8907\u96d1\u3068\u3044\u3046\u304b\u3001\u521d\u5fc3\u8005\u306b\u3068\u3063\u3066\u306f\u30e0\u30ba\u3044\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u8d85\u565b\u307f\u7815\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n[Promise - MDN](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise)\n\n\n## \u6700\u5c0f\u69cb\u6210\n\nPromise\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u521d\u671f\u5316\u3057\u307e\u3059\u3002\u5f15\u6570\u306e\u95a2\u6570\u306f\u5fc5\u9808\u3067\u3059\u3002\n\n```js\nnew Promise(() => {})\n```\n\n\n\u5f15\u6570\u304c\u7a7a\u3060\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6012\u3089\u308c\u307e\u3059\u3002\n\n```js\n> new Promise()\nTypeError: Promise resolver undefined is not a function\n```\n\n\u6570\u5024\u3067\u8aa4\u9b54\u5316\u305d\u3046\u3068\u3057\u3066\u3082\u30e0\u30c0\u307f\u305f\u3044\u3067\u3059\u3002\n\n```js\n> new Promise(10)\nTypeError: Promise resolver 10 is not a function\n```\n\n## \u95a2\u6570\u306e\u5f15\u6570\n\nPromise\u521d\u671f\u5316\u6642\u306e\u95a2\u6570\u306b\u306f\u3001\u5f15\u6570\u3092\uff12\u3064\u6e21\u305b\u307e\u3059\u3002\n\u7b2c\u4e00\u5f15\u6570\u304c\"\u6210\u529f\"\u306e\u305f\u3081\u306e\u95a2\u6570\u3001\u7b2c\u4e8c\u5f15\u6570\u304c\"\u5931\u6557\"\u306e\u305f\u3081\u306e\u95a2\u6570\u3067\u3059\u3002\n\n```js\nnew Promise((seikou, sippai) => {})\n```\n\n## \u6210\u529f\u3055\u305b\u308b\n\n\u6210\u529f\u3055\u305b\u307e\u3059\u3002\u7b2c\u4e00\u5f15\u6570\u306e\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u3068\"\u6210\u529f\"\u3068\u306a\u308a\u307e\u3059\u3002\n\n```js\nnew Promise((seikou, sippai) => {\n  seikou()\n})\n```\n\n## \u5931\u6557\u3055\u305b\u308b\n\n\u5931\u6557\u3055\u305b\u307e\u3059\u3002\u7b2c\u4e8c\u5f15\u6570\u306e\u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u3068\"\u5931\u6557\"\u3068\u306a\u308a\u307e\u3059\u3002\n\n```js\nnew Promise((seikou, sippai) => {\n  sippai()\n})\n```\n\n\u3061\u306a\u307f\u306b\u3001\u6b63\u5f0f\u306b\u306f\u6210\u529f\u3057\u305f\u72b6\u614b\u3092\"fulfilled\"\u3001\u5931\u6557\u3057\u305f\u72b6\u614b\u3092\"rejected\"\u3068\u547c\u3076\u3089\u3057\u3044\u3067\u3059\u3002\n\n\n## \u5f8c\u51e6\u7406\u3082\u66f8\u3044\u3066\u307f\u308b\n\n\u5f8c\u51e6\u7406\u3082\u66f8\u3044\u3066\u307f\u307e\u3059\u3002\n\n```js\nnew Promise(() => {})\n  .then(() => {}) // Promise\u304c\"\u6210\u529f\"\u306a\u3089then\u4ee5\u4e0b\u304c\u547c\u3070\u308c\u308b\u3002\n  .catch(() => {}) // Promise\u304c\"\u5931\u6557\"\u306a\u3089catch\u4ee5\u4e0b\u304c\u547c\u3070\u308c\u308b\u3002\n```\n\n## \u78ba\u8a8d\n\n\u6210\u529f\u3057\u305f\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```js\nnew Promise((seikou, sippai) => {\n  seikou()\n})\n  .then(() => {\n    console.log('\u6210\u529f\u3057\u305f\u306e\u3067\u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b')\n  })\n  .catch(() => {})\n```\n\n\u4e00\u5fdc\u3001\u5931\u6557\u3057\u305f\u3053\u3068\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```js\nnew Promise((seikou, sippai) => {\n    sippai()\n  })\n    .then(() => {})\n    .catch(() => {\n      console.log('\u5931\u6557\u3057\u305f\u306e\u3067\u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b')\n    })\n```\n\n## resolve, reject\n\n\u4e00\u822c\u7684\u306b\u306f\u3001seikou\u306b\u306fresolve(\u89e3\u6c7a), sippai\u306b\u306freject(\u62d2\u7d76)\u3068\u3044\u3046\u540d\u524d\u304c\u4f7f\u308f\u308c\u307e\u3059\u3002\n\n```js\nnew Promise((resolve, reject) => {})\n```\n\n## Promise\u3092\u8fd4\u3059\u95a2\u6570\n\nPromise\u3092\u4f5c\u3063\u3066\u8fd4\u3059\u95a2\u6570\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n```js\nconst createPromise = () => {\n  return new Promise((resolve, reject) => {})\n}\n```\n\n\nPromise\u3092\u6210\u529f\u3055\u305b\u308b\u304b\u3069\u3046\u304b\u3002\u5f15\u6570\u3092\u6e21\u3057\u3066\u6c7a\u3081\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```js\nconst makePromise = (seikou) => {\n  return new Promise((resolve, reject) => {\n    if(seikou) {\n      resolve() // \u6210\u529f\u3055\u305b\u308b\n    } else {\n      reject() // \u5931\u6557\u3055\u305b\u308b\n    }\n  })\n}\n```\n\n\nPromise\uff08\u7d04\u675f\uff09\u3092\u7834\u3063\u3066\u307f\u307e\u3059\u3002\n\n```js\nconst brokenPromise = makePromise(false) // false\u3092\u6e21\u3059\u3068reject\u304c\u5b9f\u884c\u3055\u308c\u308b\nbrokenPromise\n  .then(() => {\n    // \u4eca\u56de\u306f\u3053\u3063\u3061\u306f\u547c\u3070\u308c\u306a\u3044\n  })\n  .catch(() => {\n    // \u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b\u3002\n    console.log('\u5931\u6557\u3055\u305b\u305f\u306e\u3067\u3053\u3063\u3061\u304c\u547c\u3070\u308c\u308b')\n  })\n```\n\n\n\u6210\u529f/\u5931\u6557\u306e\u7406\u7531\u3092\u6301\u305f\u305b\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u307e\u305a\u306f\u95a2\u6570\u3092\u5b9a\u7fa9\u3057\u3066\u3001\n\n```js\nconst promiseAgain = (seikou, riyuu) => {\n  return new Promise((resolve, reject) => {\n    if(seikou) {\n      resolve(riyuu) // \u6210\u529f\u3055\u305b\u308b\n    } else {\n      reject(riyuu) // \u5931\u6557\u3055\u305b\u308b\n    }\n  })\n}\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```js\nconst brokenPromiseAgain = promiseAgain(false, '\u3084\u308b\u6c17\u304c\u8d77\u304d\u306a\u3044')\nbrokenPromiseAgain\n  .then((result) => {\n    // \u4eca\u56de\u3082\u3053\u3063\u3061\u306f\u547c\u3070\u308c\u306a\u3044\u3051\u3069\u3001\u6210\u529f\u7d50\u679c\u306fresult\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\u3002\n  })\n  .catch((err) => {\n    // reject\u306e\u7406\u7531\u304cerr\u3068\u3057\u3066\u6e21\u3055\u308c\u308b\n    console.log(`\u5931\u6557\u7406\u7531\u306f\u3001${err}\u304b\u3089\u3002`)\n  })\n```\n\n\n## \u6210\u529f/\u5931\u6557\u304c\u78ba\u5b9a\u3057\u3066\u3044\u308b\u306a\u3089\n\n\u6210\u529f\uff08resolve\uff09\u3060\u3051\u3092\u884c\u3046\u306a\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```js\nconst keptPromise = () => {\n  return Promise.resolve('\u5fc5\u305a\u6210\u529f\u3059\u308bPromise')\n}\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```js\nkeptPromise()\n  .then((result) => {\n    console.log(result) // '\u5fc5\u305a\u6210\u529f\u3059\u308bPromise'\n  })\n  .catch(() => {\n    // \u3053\u3063\u3061\u306f\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\n  })\n```\n\n\u3053\u308c\u306f\u4ee5\u4e0b\u3068\u540c\u69d8\u3067\u3059\u3002\n\n```js\nconst keptPromise = () => {\n  new Promise((resolve) => {\n    resolve('\u5fc5\u305a\u6210\u529f\u3059\u308bPromise')\n  })\n}\nkeptPromise()\n  .then((result) => {\n    console.log(result) // '\u5fc5\u305a\u6210\u529f\u3059\u308bPromise'\n  })\n  .catch(() => {\n    // \u3053\u3063\u3061\u306f\u5b9f\u884c\u3055\u308c\u306a\u3044\u3002\n  })\n```\n\n\u5931\u6557\uff08reject\uff09\u3060\u3051\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n```js\nconst keptPromise = () => {\n  return Promise.reject('\u5fc5\u305a\u5931\u6557\u3059\u308bPromise...')\n}\n```\n\n[Promise.resolve() - MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve)\n[Promise.reject() - MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject)\n\n\n## \u8907\u6570\u306ePromise\u306e\u5b9f\u884c\u3092\u5f85\u3064\n\n### \u5168\u3066\u304c\u6210\u529f\u3059\u308b\u5834\u5408\n\nPromise.all\u95a2\u6570\u3092\u4f7f\u3048\u3070\u3001\u8907\u6570\u306ePromise\u3092\u51e6\u7406\u3067\u304d\u307e\u3059\u3002\nPromise.all\u81ea\u4f53\u306fPromise\u3092\u8fd4\u3059\u306e\u3067\u3059\u304c\u3001\u5f15\u6570\u306b\u3068\u3063\u305f\u8907\u6570\u306ePromise\u304c\u3059\u3079\u3066resolve\u3055\u308c\u308b\u307e\u3067\u3001then\u3055\u308c\u307e\u305b\u3093\u3002\n\n\n\u307e\u305a\u306f\u3001Promise\u3092\u8fd4\u3059\u95a2\u6570\u3092\u3044\u304f\u3064\u304b\u5b9a\u7fa9\u3057\u307e\u3059\u3002setTimeout\u95a2\u6570\u3092\u4f7f\u3044\u3001\u3061\u3087\u3063\u3068\u305a\u3064\u6210\u529f\u3092\u305a\u3089\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js\nconst promiseA = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('PromiseA\u304c\u6210\u529f')\n      resolve()\n    }, 2000) // \u4e00\u756a\u9045\u3044\n  })\n}\nconst promiseB = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('PromiseB\u304c\u6210\u529f')\n      resolve()\n    }, 1000)\n  })\n}\nconst promiseC = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      console.log('PromiseC\u304c\u6210\u529f')\n      resolve()\n    }, 1500)\n  })\n}\n```\n\n\u6b21\u306b\u3001Promise.all\u95a2\u6570\u3092\u4f7f\u3044\u307e\u3059\u3002\u8907\u6570\u306ePromise\u3092\u914d\u5217\u306e\u5f62\u5f0f\u3067\u6307\u5b9a\u3057\u3001\u5168\u3066\u304c\u6210\u529f\u3057\u305f\u3089\u304b\u304b\u3063\u305f\u6642\u9593\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n```js\nconst startAllPromises = () => {\n  const startTime = new Date() // \u8a08\u6e2c\u958b\u59cb\u6642\u9593\n  Promise.all([ \n    promiseA(),\n    promiseB(),\n    promiseC()\n  ]).then(() => {\n    const endTime = new Date() // \u8a08\u6e2c\u7d42\u4e86\u6642\u9593\n    console.log(`${(endTime - startTime) / 1000}\u79d2\u3067\u3001\u5168\u3066\u306ePromise\u304c\u6210\u529f`)\n  })\n}\nstartAllPromises() // \u3060\u3044\u305f\u30442\u79d2\u304f\u3089\u3044\u304c\u8868\u793a\u3055\u308c\u308b\n```\n\n\u4e00\u756a\u6210\u529f\u306e\u9045\u3044PromiseA\u304c\u7d42\u308f\u3063\u305f\u3089\u3001Promise.all\u306e\u8fd4\u3059Promise\u306ethen\u304c\u547c\u3070\u308c\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001ABC\u306e\u3069\u308c\u304b\u304c\u5931\u6557(reject)\u3057\u305f\u5834\u5408\u306f\u3001Promise.all()\u306ethen\u306f\u5b9f\u884c\u3055\u308c\u307e\u305b\u3093\u3002\n\n\n### \u5931\u6557\u30b1\u30fc\u30b9\u3092\u88dc\u8db3\u3059\u308b\u5834\u5408\n\nPromise.all\u306e\u3042\u3068\u306bcatch\u3092\u30c1\u30a7\u30fc\u30f3\u3059\u308c\u3070OK\u3067\u3059\u3002\n\n\u5931\u6557\u3059\u308bPromise\u3092\u65b0\u3057\u304f\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```js\nconst promiseD = () => {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      console.log('PromiseD\u304c\u5931\u6557\u2026')\n      reject('D')\n    }, 1700)\n  })\n}\n```\n\n\u5931\u6557\u306f1700\u30df\u30ea\u79d2\u5f8c\u3002PromiseC\u304c\u6210\u529f\u3059\u308b\u5f8c\u3001PromiseA\u304c\u6210\u529f\u3059\u308b\u524d\u306b\u5931\u6557\u3057\u307e\u3059\u3002\n\n```js\nconst onePromiseFails = () => {\n  const startTime = new Date()\n  Promise.all([\n    promiseA(),\n    promiseB(),\n    promiseC(),\n    promiseD() // \u2190 \u5931\u6557\u3059\u308bPromise\u3092\u8ffd\u52a0\n  ]).catch((err) => {\n    const endTime = new Date()\n    console.log(`${(endTime - startTime) / 1000}\u79d2\u3067\u3001promise${err}\u304c\u5931\u6557\u3057\u305f\u306e\u3067\u7d42\u4e86`)\n  })\n}\nonePromiseFails()\n```\n\n\u3053\u308c\u3067\u5931\u6557\u306e\u88dc\u8db3\u306f\u3067\u304d\u307e\u3057\u305f\u304c\u3001\u3059\u3067\u306b\u8d70\u308a\u51fa\u3057\u305fPromise\u304c\u505c\u6b62\u3059\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n\u30b3\u30f3\u30bd\u30fc\u30eb\u51fa\u529b\u3002\n\n```bash\nPromiseB\u304c\u6210\u529f\nPromiseC\u304c\u6210\u529f\nPromiseD\u304c\u5931\u6557\u2026\n1.703\u79d2\u3067\u3001promiseD\u304c\u5931\u6557\nPromiseA\u304c\u6210\u529f\n```\n\nPromise.all\u306ethen\u304c\u547c\u3070\u308c\u306a\u3044\u3060\u3051\u3067\u3001\u5404Promise\u306f\u304d\u3061\u3093\u3068\u5b9f\u884c\u3055\u308c\u308b\u3093\u3067\u3059\u306d\u3002\n\n[Promise.all() - MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)\n\n\u57fa\u790e\u306e\u57fa\u790e\u3060\u3051\u3067\u3059\u304c\u3001\u4ee5\u4e0a\u3067\u3059\u3002\n\u4f55\u304b\u9593\u9055\u3044\u306a\u3069\u3042\u308a\u307e\u3057\u305f\u3089\u3001\u3054\u6307\u6458\u3044\u305f\u3060\u3051\u308b\u3068\u5e78\u3044\u3067\u3059\u3002\n\n## \u7d20\u6674\u3089\u3057\u3044\u8cc7\u6599\n\n\n[JavaScript Promise\u306e\u672c](http://azu.github.io/promises-book/)\n\u8a00\u308f\u305a\u3068\u77e5\u308c\u305f\u3001Azu\u3055\u3093\u306ePromise\u89e3\u8aac\u3002\n\n", "tags": ["JavaScript", "promise"]}