{"tags": ["\u6570\u5b66", "F#"], "context": "\u6570\u5b66\u306e\u52c9\u5f37\u3092\u517c\u306d\u3066\u3001\u6570\u5f0f\u3092\u8a08\u7b97\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002Qiita \u306a\u3069\u306b\u8cbc\u308b\u3053\u3068\u3092\u524d\u63d0\u306b TeX \u306e\u30b3\u30fc\u30c9\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\u203b \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u6570\u5b66\u306e\u52c9\u5f37\u306b\u5fdc\u7528\u3059\u308b\u4f8b\u3068\u3057\u3066\u306e\u7d39\u4ecb\u3067\u3059\u3002\u3053\u306e\u65b9\u6cd5\u3067\u52c9\u5f37\u3059\u308b\u306a\u3089\u5404\u81ea\u3067\u4f3c\u305f\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3059\u308b\u306e\u306f\u3001\u3069\u3061\u3089\u304b\u3068\u3044\u3046\u3068\u6368\u3066\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u985e\u3067\u3059\u3002\n\u7c21\u5358\u306a\u8a08\u7b97\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u8a08\u7b97\u904e\u7a0b\u3092\u30b3\u30fc\u30c9\u3067\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u597d\u304d\u306a\u3088\u3046\u306b\u5909\u5f62\u3059\u308b\u306e\u304c\u72d9\u3044\u3067\u3059\u3002\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n(x+y)^3=x^3+3x^2y+3xy^2+y^3\n(x+y)3=x3+3x2y+3xy2+y3{(x+y)^3=x^3+3x^2y+3xy^2+y^3\n}\n\u30b7\u30ea\u30fc\u30ba\u306e\u8a18\u4e8b\u3067\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u62e1\u5f35\u3057\u3066\u8a08\u7b97\u3057\u307e\u3059\u3002\n\n\u591a\u9805\u5f0f\u306e\u7a4d\u3092\u8a08\u7b97 \u2190 \u3053\u306e\u8a18\u4e8b\n\u5916\u7a4d\u3068\u6109\u5feb\u306a\u4ef2\u9593\u305f\u3061\n\u30e6\u30fc\u30af\u30ea\u30c3\u30c9\u7a7a\u9593\u306e\u30db\u30c3\u30b8\u53cc\u5bfe\u3068\u30d0\u30d6\u30eb\u30bd\u30fc\u30c8\n\u56db\u5143\u6570\u3092\u4f5c\u308d\u3046\n\u56db\u5143\u6570\u3068\u884c\u5217\u3067\u898b\u308b\u5185\u7a4d\u3068\u5916\u7a4d\u306e\u300c\u5185\u300d\u3068\u300c\u5916\u300d\n\u516b\u5143\u6570\u3092\u4f5c\u308d\u3046\n\u516b\u5143\u6570\u306e\u7a4d\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u78ba\u8a8d\n\u5916\u7a4d\u306e\u6210\u5206\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u78ba\u8a8d\n\u591a\u5143\u6570\u306e\u7a4d\u306e\u69cb\u6210\n\u5341\u516d\u5143\u6570\u3092\u4f5c\u308d\u3046\n\n\u95a2\u9023\u3059\u308b\u30b3\u30fc\u30c9\u3092\u307e\u3068\u3081\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3059\u3002\n\nhttps://bitbucket.org/7shi/math7\n\n\u3053\u306e\u8a18\u4e8b\u306b\u306f\u95a2\u9023\u8a18\u4e8b\u304c\u3042\u308a\u307e\u3059\u3002\n\n\nHaskell\u306b\u3088\u308b\u4ee3\u6570\u8a08\u7b97\u5165\u9580 2014.09.19\n\n\n\u5b9f\u88c5\n\u5b9f\u88c5\u306b\u306f F# \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u624b\u6cd5\u3067\u958b\u767a\u3057\u307e\u3057\u305f\u3002\n\n\nF#\u958b\u767a\u74b0\u5883\u306e\u7d39\u4ecb 2016.12.30\n\nF#\u306e\u5165\u9580\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n\nC#/JavaScript\u3067\u5b66\u3076F#\u5165\u9580 2017.01.04\n\nHaskell\u3067\u5b66\u3076F#\u5165\u9580 2017.01.11\n\n\n\u9805\n\u307e\u305a\u9805\u306e\u8868\u73fe\u65b9\u6cd5\u3092\u6c7a\u3081\u307e\u3059\u3002\u4fc2\u6570\u3068\u6587\u5b57\u3092\u30bf\u30d7\u30eb\u306b\u3057\u3066\u7d44\u307f\u5408\u308f\u305b\u307e\u3059\u3002\u5b9a\u6570\u9805\u306f\u6587\u5b57\u3092\u7a7a\u306b\u3057\u307e\u3059\u3002\n\n\u4f8b\n(2,\"x\")  // 2x\n(3,\"\")   // 3\n\n\n\u3053\u308c\u3092\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u95a2\u6570 str \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\nlet str = function\n|  a, \"\" -> sprintf \"%d\" a\n|  1, x  ->       x\n| -1, x  -> \"-\" + x\n|  a, x  -> sprintf \"%d%s\" a x\n\nprintfn \"%s\" (str ( 3,\"\" ))\nprintfn \"%s\" (str ( 1,\"x\"))\nprintfn \"%s\" (str ( 2,\"y\"))\nprintfn \"%s\" (str (-1,\"y\"))\nprintfn \"%s\" (str (-2,\"z\"))\n\n\n\u5b9f\u884c\u7d50\u679c\n3\nx\n2y\n-y\n-2z\n\n\n\n\u591a\u9805\u5f0f\n\u591a\u9805\u5f0f\u306f\u30ea\u30b9\u30c8\u3067\u8868\u73fe\u3057\u307e\u3059\u3002\n\n\u4f8b\n[2,\"x\"; 3,\"y\"]  // 2x+3y\n\n\n\u3053\u308c\u3092\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u95a2\u6570 strs \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u9806\u756a i \u3092\u898b\u3066 + \u3092\u633f\u5165\u3057\u307e\u3059\u3002\nlet strs ts =\n    ts\n    |> List.mapi (fun i (a, _ as t) ->\n        if i > 0 && a >= 0 then \"+\" + str t else str t)\n    |> String.concat \"\"\n\nprintfn \"%s\" (strs [2,\"x\"; 3,\"y\"])\n\n\n\u5b9f\u884c\u7d50\u679c\n2x\n\n\n\n\u3079\u304d\u4e57\n\u3079\u304d\u4e57\u306f\u540c\u3058\u6587\u5b57\u306e\u7e70\u308a\u8fd4\u3057\u3067\u8868\u73fe\u3057\u307e\u3059\u3002str \u3092\u5bfe\u5fdc\u3055\u305b\u307e\u3059\u3002Seq.groupBy \u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\nlet str (a, x) =\n    if x = \"\" then a.ToString() else\n    let sa = match a with 1 -> \"\" | -1 -> \"-\" | _ -> a.ToString()\n    x.ToCharArray()\n    |> Seq.groupBy id\n    |> Seq.map (fun (e, xs) ->\n        match Seq.length xs with\n        | 1 -> e.ToString()\n        | n -> sprintf \"%c^%d\" e n)\n    |> String.concat \"\"\n    |> (+) sa\n\nprintfn \"%s\" (str (1,\"xx\"))\n\n\n\u5b9f\u884c\u7d50\u679c\nx^2\n\n\n\n\u9805\u306e\u7a4d\n\u9805\u306e\u7a4d\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570 prod \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u4fc2\u6570\u3092\u639b\u3051\u3066\u3001\u6587\u5b57\u306f\u9023\u7d50\u3057\u307e\u3059\u3002\nlet prod (ts:(int * string) list) =\n    ts |> Seq.reduce (fun (a, x) (b, y) -> a * b, x + y)\n\nprintfn \"%s\" (prod [2,\"x\"; 3,\"y\"] |> str)\n\n\n\u5b9f\u884c\u7d50\u679c\n6xy\n\n\n\n\u591a\u9805\u5f0f\u306e\u7a4d\n\u591a\u9805\u5f0f\u306e\u7a4d\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570 prods \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\nlet prods ts =\n    ts\n    |> Seq.reduce (fun al bl ->\n        [for a in al do for b in bl -> prod [a; b]])\n\nlet a, b = [1,\"x\"; 2,\"\" ], [1,\"x\"; 3,\"\" ]\nlet c, d = [1,\"x\"; 2,\"y\"], [1,\"x\"; 3,\"y\"]\nprintfn \"(%s)(%s)=%s\" (strs a) (strs b) (prods [a; b] |> strs)\nprintfn \"(%s)(%s)=%s\" (strs c) (strs d) (prods [c; d] |> strs)\n\n\n\u5b9f\u884c\u7d50\u679c\n(x+2)(x+3)=x^2+3x+2x+6\n(x+2y)(x+3y)=x^2+3xy+2yx+6y^2\n\n\n\n\u540c\u985e\u9805\u306e\u6574\u7406\n\u540c\u985e\u9805\u3092\u6574\u7406\u3059\u308b\u95a2\u6570 simplify \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u3082 Seq.groupBy \u3092\u4f7f\u3044\u307e\u3059\u3002xy \u3068 yx \u3092\u540c\u4e00\u8996\u3059\u308b\u305f\u3081\u30bd\u30fc\u30c8\u3057\u307e\u3059\u3002\nlet simplify (ts:(int * string) list) =\n    ts\n    |> Seq.groupBy (fun (a, x) -> System.String(x.ToCharArray() |> Array.sort))\n    |> Seq.map (fun (a, xl) -> xl |> Seq.map fst |> Seq.sum, a)\n    |> Seq.toList\n\nprintfn \"(%s)(%s)=%s\" (strs a) (strs b) (prods [a; b] |> simplify |> strs)\nprintfn \"(%s)(%s)=%s\" (strs c) (strs d) (prods [c; d] |> simplify |> strs)\n\n\n\u5b9f\u884c\u7d50\u679c\n(x+2)(x+3)=x^2+5x+6\n(x+2y)(x+3y)=x^2+5xy+6y^2\n\n\n\n\u4f7f\u7528\u4f8b\n(x+y)(x+y) \u306e\u3079\u304d\u4e57\u3092\u8a08\u7b97\u3057\u3066\u307f\u307e\u3059\u3002\nprintfn @\"\\begin{align}\"\nlet f = [1,\"x\"; 1,\"y\"]\nfor n = 2 to 8 do\n    let ff = List.replicate n f |> prods |> simplify\n    printfn @\"(%s)^%d&=%s \\\\\" (strs f) n (strs ff)\nprintfn @\"\\end{align}\"\n\n\n\u51fa\u529b\u7d50\u679c\n\\begin{align}\n(x+y)^2&=x^2+2xy+y^2 \\\\\n(x+y)^3&=x^3+3x^2y+3xy^2+y^3 \\\\\n(x+y)^4&=x^4+4x^3y+6x^2y^2+4xy^3+y^4 \\\\\n(x+y)^5&=x^5+5x^4y+10x^3y^2+10x^2y^3+5xy^4+y^5 \\\\\n(x+y)^6&=x^6+6x^5y+15x^4y^2+20x^3y^3+15x^2y^4+6xy^5+y^6 \\\\\n(x+y)^7&=x^7+7x^6y+21x^5y^2+35x^4y^3+35x^3y^4+21x^2y^5+7xy^6+y^7 \\\\\n(x+y)^8&=x^8+8x^7y+28x^6y^2+56x^5y^3+70x^4y^4+56x^3y^5+28x^2y^6+8xy^7+y^8 \\\\\n\\end{align}\n\n\n\\begin{align}\n(x+y)^2&=x^2+2xy+y^2 \\\\\n(x+y)^3&=x^3+3x^2y+3xy^2+y^3 \\\\\n(x+y)^4&=x^4+4x^3y+6x^2y^2+4xy^3+y^4 \\\\\n(x+y)^5&=x^5+5x^4y+10x^3y^2+10x^2y^3+5xy^4+y^5 \\\\\n(x+y)^6&=x^6+6x^5y+15x^4y^2+20x^3y^3+15x^2y^4+6xy^5+y^6 \\\\\n(x+y)^7&=x^7+7x^6y+21x^5y^2+35x^4y^3+35x^3y^4+21x^2y^5+7xy^6+y^7 \\\\\n(x+y)^8&=x^8+8x^7y+28x^6y^2+56x^5y^3+70x^4y^4+56x^3y^5+28x^2y^6+8xy^7+y^8 \\\\\n\\end{align}\n(x+y)2=x2+2xy+y2(x+y)3=x3+3x2y+3xy2+y3(x+y)4=x4+4x3y+6x2y2+4xy3+y4(x+y)5=x5+5x4y+10x3y2+10x2y3+5xy4+y5(x+y)6=x6+6x5y+15x4y2+20x3y3+15x2y4+6xy5+y6(x+y)7=x7+7x6y+21x5y2+35x4y3+35x3y4+21x2y5+7xy6+y7(x+y)8=x8+8x7y+28x6y2+56x5y3+70x4y4+56x3y5+28x2y6+8xy7+y8{\\begin{align}\n(x+y)^2&=x^2+2xy+y^2 \\\\\n(x+y)^3&=x^3+3x^2y+3xy^2+y^3 \\\\\n(x+y)^4&=x^4+4x^3y+6x^2y^2+4xy^3+y^4 \\\\\n(x+y)^5&=x^5+5x^4y+10x^3y^2+10x^2y^3+5xy^4+y^5 \\\\\n(x+y)^6&=x^6+6x^5y+15x^4y^2+20x^3y^3+15x^2y^4+6xy^5+y^6 \\\\\n(x+y)^7&=x^7+7x^6y+21x^5y^2+35x^4y^3+35x^3y^4+21x^2y^5+7xy^6+y^7 \\\\\n(x+y)^8&=x^8+8x^7y+28x^6y^2+56x^5y^3+70x^4y^4+56x^3y^5+28x^2y^6+8xy^7+y^8 \\\\\n\\end{align}\n}\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5168\u4f53: Term.fsx\n\nMath7\n\u3053\u306e\u8a18\u4e8b\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30d9\u30fc\u30b9\u306b\u6a5f\u80fd\u62e1\u5f35\u3057\u306a\u304c\u3089\u7d9a\u7de8\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\nhttps://bitbucket.org/7shi/math7\n\nMath7 \u3068\u3044\u3046\u540d\u524d\u306f\u9069\u5f53\u3067\u30017\u306f\u4e03\u8a8c\u306e\u4e03\u3067\u3059\u3002\n\u6570\u5b66\u306e\u52c9\u5f37\u3092\u517c\u306d\u3066\u3001\u6570\u5f0f\u3092\u8a08\u7b97\u3059\u308b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002Qiita \u306a\u3069\u306b\u8cbc\u308b\u3053\u3068\u3092\u524d\u63d0\u306b TeX \u306e\u30b3\u30fc\u30c9\u3092\u51fa\u529b\u3057\u307e\u3059\u3002\n\n\u203b \u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u3092\u6570\u5b66\u306e\u52c9\u5f37\u306b\u5fdc\u7528\u3059\u308b\u4f8b\u3068\u3057\u3066\u306e\u7d39\u4ecb\u3067\u3059\u3002\u3053\u306e\u65b9\u6cd5\u3067\u52c9\u5f37\u3059\u308b\u306a\u3089\u5404\u81ea\u3067\u4f3c\u305f\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3059\u308b\u306e\u306f\u3001\u3069\u3061\u3089\u304b\u3068\u3044\u3046\u3068\u6368\u3066\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u985e\u3067\u3059\u3002\n\n\u7c21\u5358\u306a\u8a08\u7b97\u3057\u304b\u3067\u304d\u307e\u305b\u3093\u304c\u3001\u8a08\u7b97\u904e\u7a0b\u3092\u30b3\u30fc\u30c9\u3067\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067\u597d\u304d\u306a\u3088\u3046\u306b\u5909\u5f62\u3059\u308b\u306e\u304c\u72d9\u3044\u3067\u3059\u3002\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n\n```math\n(x+y)^3=x^3+3x^2y+3xy^2+y^3\n```\n\n\u30b7\u30ea\u30fc\u30ba\u306e\u8a18\u4e8b\u3067\u3059\u3002\u3053\u306e\u8a18\u4e8b\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u62e1\u5f35\u3057\u3066\u8a08\u7b97\u3057\u307e\u3059\u3002\n\n1. \u591a\u9805\u5f0f\u306e\u7a4d\u3092\u8a08\u7b97 \u2190 \u3053\u306e\u8a18\u4e8b\n1. [\u5916\u7a4d\u3068\u6109\u5feb\u306a\u4ef2\u9593\u305f\u3061](http://qiita.com/7shi/items/017d2d2c758f76071f23)\n1. [\u30e6\u30fc\u30af\u30ea\u30c3\u30c9\u7a7a\u9593\u306e\u30db\u30c3\u30b8\u53cc\u5bfe\u3068\u30d0\u30d6\u30eb\u30bd\u30fc\u30c8](http://qiita.com/7shi/items/f54302058149d07da592)\n1. [\u56db\u5143\u6570\u3092\u4f5c\u308d\u3046](http://qiita.com/7shi/items/2036e7a739c2a9e04025)\n1. [\u56db\u5143\u6570\u3068\u884c\u5217\u3067\u898b\u308b\u5185\u7a4d\u3068\u5916\u7a4d\u306e\u300c\u5185\u300d\u3068\u300c\u5916\u300d](http://qiita.com/7shi/items/a80988a32a0d706e9378)\n1. [\u516b\u5143\u6570\u3092\u4f5c\u308d\u3046](http://qiita.com/7shi/items/b34fe724d36fb7d96456)\n1. [\u516b\u5143\u6570\u306e\u7a4d\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u78ba\u8a8d](http://qiita.com/7shi/items/8495b2d6b888e7b8703f)\n1. [\u5916\u7a4d\u306e\u6210\u5206\u3092\u30d7\u30ed\u30b0\u30e9\u30e0\u3067\u78ba\u8a8d](http://qiita.com/7shi/items/02c758c03d2fd7038912)\n1. [\u591a\u5143\u6570\u306e\u7a4d\u306e\u69cb\u6210](http://qiita.com/7shi/items/88be5203769e629df243)\n1. [\u5341\u516d\u5143\u6570\u3092\u4f5c\u308d\u3046](http://qiita.com/7shi/items/989d59d74a505a92c419)\n\n\u95a2\u9023\u3059\u308b\u30b3\u30fc\u30c9\u3092\u307e\u3068\u3081\u305f\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u3059\u3002\n\n* https://bitbucket.org/7shi/math7\n\n\u3053\u306e\u8a18\u4e8b\u306b\u306f\u95a2\u9023\u8a18\u4e8b\u304c\u3042\u308a\u307e\u3059\u3002\n\n* [Haskell\u306b\u3088\u308b\u4ee3\u6570\u8a08\u7b97\u5165\u9580](http://qiita.com/7shi/items/096396f0007857676515) 2014.09.19\n\n# \u5b9f\u88c5\n\n\u5b9f\u88c5\u306b\u306f F# \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u624b\u6cd5\u3067\u958b\u767a\u3057\u307e\u3057\u305f\u3002\n\n* [F#\u958b\u767a\u74b0\u5883\u306e\u7d39\u4ecb](http://qiita.com/7shi/items/5fc7d6477d96bbd7a71d) 2016.12.30\n\nF#\u306e\u5165\u9580\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n* [C#/JavaScript\u3067\u5b66\u3076F#\u5165\u9580](http://qiita.com/7shi/items/ff746903680ae8d0d7ce) 2017.01.04\n* [Haskell\u3067\u5b66\u3076F#\u5165\u9580](http://qiita.com/7shi/items/1d3750ba17f5a88b8405) 2017.01.11\n\n## \u9805\n\n\u307e\u305a\u9805\u306e\u8868\u73fe\u65b9\u6cd5\u3092\u6c7a\u3081\u307e\u3059\u3002\u4fc2\u6570\u3068\u6587\u5b57\u3092\u30bf\u30d7\u30eb\u306b\u3057\u3066\u7d44\u307f\u5408\u308f\u305b\u307e\u3059\u3002\u5b9a\u6570\u9805\u306f\u6587\u5b57\u3092\u7a7a\u306b\u3057\u307e\u3059\u3002\n\n```fsharp:\u4f8b\n(2,\"x\")  // 2x\n(3,\"\")   // 3\n```\n\n\u3053\u308c\u3092\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u95a2\u6570 `str` \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```fsharp\nlet str = function\n|  a, \"\" -> sprintf \"%d\" a\n|  1, x  ->       x\n| -1, x  -> \"-\" + x\n|  a, x  -> sprintf \"%d%s\" a x\n\nprintfn \"%s\" (str ( 3,\"\" ))\nprintfn \"%s\" (str ( 1,\"x\"))\nprintfn \"%s\" (str ( 2,\"y\"))\nprintfn \"%s\" (str (-1,\"y\"))\nprintfn \"%s\" (str (-2,\"z\"))\n```\n```text:\u5b9f\u884c\u7d50\u679c\n3\nx\n2y\n-y\n-2z\n```\n\n## \u591a\u9805\u5f0f\n\n\u591a\u9805\u5f0f\u306f\u30ea\u30b9\u30c8\u3067\u8868\u73fe\u3057\u307e\u3059\u3002\n\n```fsharp:\u4f8b\n[2,\"x\"; 3,\"y\"]  // 2x+3y\n```\n\n\u3053\u308c\u3092\u6587\u5b57\u5217\u306b\u5909\u63db\u3059\u308b\u95a2\u6570 `strs` \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u9806\u756a `i` \u3092\u898b\u3066 `+` \u3092\u633f\u5165\u3057\u307e\u3059\u3002\n\n```fsharp\nlet strs ts =\n    ts\n    |> List.mapi (fun i (a, _ as t) ->\n        if i > 0 && a >= 0 then \"+\" + str t else str t)\n    |> String.concat \"\"\n\nprintfn \"%s\" (strs [2,\"x\"; 3,\"y\"])\n```\n```text:\u5b9f\u884c\u7d50\u679c\n2x\n```\n\n## \u3079\u304d\u4e57\n\n\u3079\u304d\u4e57\u306f\u540c\u3058\u6587\u5b57\u306e\u7e70\u308a\u8fd4\u3057\u3067\u8868\u73fe\u3057\u307e\u3059\u3002`str` \u3092\u5bfe\u5fdc\u3055\u305b\u307e\u3059\u3002`Seq.groupBy` \u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\n\n```fsharp\nlet str (a, x) =\n    if x = \"\" then a.ToString() else\n    let sa = match a with 1 -> \"\" | -1 -> \"-\" | _ -> a.ToString()\n    x.ToCharArray()\n    |> Seq.groupBy id\n    |> Seq.map (fun (e, xs) ->\n        match Seq.length xs with\n        | 1 -> e.ToString()\n        | n -> sprintf \"%c^%d\" e n)\n    |> String.concat \"\"\n    |> (+) sa\n\nprintfn \"%s\" (str (1,\"xx\"))\n```\n```text:\u5b9f\u884c\u7d50\u679c\nx^2\n```\n\n## \u9805\u306e\u7a4d\n\n\u9805\u306e\u7a4d\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570 `prod` \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u4fc2\u6570\u3092\u639b\u3051\u3066\u3001\u6587\u5b57\u306f\u9023\u7d50\u3057\u307e\u3059\u3002\n\n```fsharp\nlet prod (ts:(int * string) list) =\n    ts |> Seq.reduce (fun (a, x) (b, y) -> a * b, x + y)\n\nprintfn \"%s\" (prod [2,\"x\"; 3,\"y\"] |> str)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n6xy\n```\n\n## \u591a\u9805\u5f0f\u306e\u7a4d\n\n\u591a\u9805\u5f0f\u306e\u7a4d\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570 `prods` \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```fsharp\nlet prods ts =\n    ts\n    |> Seq.reduce (fun al bl ->\n        [for a in al do for b in bl -> prod [a; b]])\n\nlet a, b = [1,\"x\"; 2,\"\" ], [1,\"x\"; 3,\"\" ]\nlet c, d = [1,\"x\"; 2,\"y\"], [1,\"x\"; 3,\"y\"]\nprintfn \"(%s)(%s)=%s\" (strs a) (strs b) (prods [a; b] |> strs)\nprintfn \"(%s)(%s)=%s\" (strs c) (strs d) (prods [c; d] |> strs)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(x+2)(x+3)=x^2+3x+2x+6\n(x+2y)(x+3y)=x^2+3xy+2yx+6y^2\n```\n\n## \u540c\u985e\u9805\u306e\u6574\u7406\n\n\u540c\u985e\u9805\u3092\u6574\u7406\u3059\u308b\u95a2\u6570 `simplify` \u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u3082 `Seq.groupBy` \u3092\u4f7f\u3044\u307e\u3059\u3002`xy` \u3068 `yx` \u3092\u540c\u4e00\u8996\u3059\u308b\u305f\u3081\u30bd\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n```fsharp\nlet simplify (ts:(int * string) list) =\n    ts\n    |> Seq.groupBy (fun (a, x) -> System.String(x.ToCharArray() |> Array.sort))\n    |> Seq.map (fun (a, xl) -> xl |> Seq.map fst |> Seq.sum, a)\n    |> Seq.toList\n\nprintfn \"(%s)(%s)=%s\" (strs a) (strs b) (prods [a; b] |> simplify |> strs)\nprintfn \"(%s)(%s)=%s\" (strs c) (strs d) (prods [c; d] |> simplify |> strs)\n```\n```text:\u5b9f\u884c\u7d50\u679c\n(x+2)(x+3)=x^2+5x+6\n(x+2y)(x+3y)=x^2+5xy+6y^2\n```\n\n# \u4f7f\u7528\u4f8b\n\n$(x+y)$ \u306e\u3079\u304d\u4e57\u3092\u8a08\u7b97\u3057\u3066\u307f\u307e\u3059\u3002\n\n```fsharp\nprintfn @\"\\begin{align}\"\nlet f = [1,\"x\"; 1,\"y\"]\nfor n = 2 to 8 do\n    let ff = List.replicate n f |> prods |> simplify\n    printfn @\"(%s)^%d&=%s \\\\\" (strs f) n (strs ff)\nprintfn @\"\\end{align}\"\n```\n```text:\u51fa\u529b\u7d50\u679c\n\\begin{align}\n(x+y)^2&=x^2+2xy+y^2 \\\\\n(x+y)^3&=x^3+3x^2y+3xy^2+y^3 \\\\\n(x+y)^4&=x^4+4x^3y+6x^2y^2+4xy^3+y^4 \\\\\n(x+y)^5&=x^5+5x^4y+10x^3y^2+10x^2y^3+5xy^4+y^5 \\\\\n(x+y)^6&=x^6+6x^5y+15x^4y^2+20x^3y^3+15x^2y^4+6xy^5+y^6 \\\\\n(x+y)^7&=x^7+7x^6y+21x^5y^2+35x^4y^3+35x^3y^4+21x^2y^5+7xy^6+y^7 \\\\\n(x+y)^8&=x^8+8x^7y+28x^6y^2+56x^5y^3+70x^4y^4+56x^3y^5+28x^2y^6+8xy^7+y^8 \\\\\n\\end{align}\n```\n```math\n\\begin{align}\n(x+y)^2&=x^2+2xy+y^2 \\\\\n(x+y)^3&=x^3+3x^2y+3xy^2+y^3 \\\\\n(x+y)^4&=x^4+4x^3y+6x^2y^2+4xy^3+y^4 \\\\\n(x+y)^5&=x^5+5x^4y+10x^3y^2+10x^2y^3+5xy^4+y^5 \\\\\n(x+y)^6&=x^6+6x^5y+15x^4y^2+20x^3y^3+15x^2y^4+6xy^5+y^6 \\\\\n(x+y)^7&=x^7+7x^6y+21x^5y^2+35x^4y^3+35x^3y^4+21x^2y^5+7xy^6+y^7 \\\\\n(x+y)^8&=x^8+8x^7y+28x^6y^2+56x^5y^3+70x^4y^4+56x^3y^5+28x^2y^6+8xy^7+y^8 \\\\\n\\end{align}\n```\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u5168\u4f53: [Term.fsx](https://bitbucket.org/7shi/math7/src/tip/Term.fsx)\n\n# Math7\n\n\u3053\u306e\u8a18\u4e8b\u3067\u4f5c\u3063\u305f\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u30d9\u30fc\u30b9\u306b\u6a5f\u80fd\u62e1\u5f35\u3057\u306a\u304c\u3089\u7d9a\u7de8\u306e\u8a18\u4e8b\u3092\u66f8\u3044\u3066\u3044\u307e\u3059\u3002\n\n* https://bitbucket.org/7shi/math7\n\nMath7 \u3068\u3044\u3046\u540d\u524d\u306f\u9069\u5f53\u3067\u30017\u306f\u4e03\u8a8c\u306e\u4e03\u3067\u3059\u3002\n"}