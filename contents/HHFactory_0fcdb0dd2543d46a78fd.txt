{"tags": ["spring-boot", "spring-security", "AngularJS"], "context": "Spring Security\u3092\u4f7f\u3063\u305f\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3063\u3066\u30cf\u30de\u308a\u307e\u3059\u3088\u306d\u3002\u3002\n\u516c\u5f0ftutorial\u8aad\u3093\u3060\u308a\u3001\u3055\u3093\u3056\u3093\u30b0\u30b0\u3063\u3066\u3082\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u3089\u306a\u3044\u30fb\u30fb\u30fb\n\u5168\u3066\u306e\u4ed5\u69d8\u3092\u628a\u63e1\u3057\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3053\u3093\u306a\u3093\u3067\u52d5\u304d\u307e\u3057\u305f\u3068\u3044\u3046\u611f\u3058\u3067\u8aad\u3093\u3067\u3044\u305f\u3060\u3051\u308c\u3070\u3002\n\u4eca\u56de\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u304b\u3089\nGithub\n\n\u53c2\u8003\u8cc7\u6599\n\n\n\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\nspring Security 3.1 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 - \u30c6\u30af\u30cb\u30ab\u30eb\u30fb\u30b5\u30de\u30ea (1)\nAngularJS\u3067Spring Security\nui-router \u3092\u4f7f\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u5fc5\u9808\u306estate\u3092\u4f5c\u308b\nspring security\u516c\u5f0ftutorial\n\u66f8\u7c4d\uff1a\u306f\u3058\u3081\u3066\u306espring boot\n\n\n\u69cb\u6210\u3068\u4ed5\u69d8\n\n\u30b5\u30fc\u30d0\u30fc\u306fREST API\u3068\u3057\u3066\u30c7\u30fc\u30bf\u3092\u5410\u304f\u3060\u3051\u3001\u753b\u9762\u9077\u79fb\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3002\n\u57fa\u672c\u7684\u306b\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u8a8d\u8a3c\u3092\u884c\u3044\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u8a8d\u53ef\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\u30b5\u30fc\u30d0\u30fc\n\u30fbspring security\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u51e6\u7406\u3092\u884c\u3046\u3002\n\u3000\u2192DB\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u30e6\u30fc\u30b6\u60c5\u5831\u304b\u3089\u8a8d\u8a3c\u3059\u308b\u3002\n\u30fbREST API\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066json\u30c7\u30fc\u30bf\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u6e21\u3059\u3002\n\uff08API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a8d\u53ef\u3092\u884c\u3046\uff09\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\u4f7f\u7528\u30e9\u30a4\u30d6\u30e9\u30ea\u3000ui-router,ngStorage\n\u30fbui-router\u306b\u3088\u308b\u753b\u9762\u9077\u79fb\u3084\u3001\u30dc\u30bf\u30f3\u8868\u793a\u5236\u5fa1\u306a\u3069\u306e\u8a8d\u53ef\u51e6\u7406\u3092\u884c\u3046\u3002\n\u30fb\u8a8d\u8a3c\u60c5\u5831\u306fngStorage\u3092\u4f7f\u3063\u3066localStorage\u306b\u683c\u7d0d\u3059\u308b\n\nDB\uff08\u30c6\u30fc\u30d6\u30eb\u69cb\u6210\uff09\n\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306b\u57fa\u3065\u304d\u3001\u4e0b\u8a18\u306e\u30c6\u30fc\u30d6\u30eb\u69cb\u6210\u3068\u3059\u308b\u3002\n\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u306b\u3064\u3044\u3066\u306f\u4e0b\u8a18\u53c2\u7167\n\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\n\u30fbUser\u30c6\u30fc\u30d6\u30eb\u30fb\u30fb\u30fb\u8907\u6570\u306eRole\u3092\u4fdd\u6709\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u3066\u683c\u7d0d\u3002\n\u30fbRole\u30c6\u30fc\u30d6\u30eb\u30fb\u30fb\u30fb\u8907\u6570\u306ePermission\u3092\u4fdd\u6709\u3059\u308b\u30ed\u30fc\u30eb\u3092\u683c\u7d0d\u3002\n\u30fbPermission\u30c6\u30fc\u30d6\u30eb\u30fb\u30fb\u30fb\u767b\u9332\u6a29\u9650\u3084\u53c2\u7167\u6a29\u9650\u306a\u3069\u304c\u683c\u7d0d\u3002\n\n\n\u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u30af\u30e9\u30b9\n\n\u30b5\u30fc\u30d0\u30fc\uff1a\n\u30fbLoginUserDetails\u30fb\u30fb\u30fbUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3082\u3068\u306b\u4f5c\u6210\u3055\u308c\u308b\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\n\u30fbLoginUserDetailsService\u30fb\u30fb\u30fb\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\n\u30fbLoginService\u30fb\u30fb\u30fb\u8a8d\u8a3c\u51e6\u7406\u3092\u884c\u3046\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u6e21\u3055\u308c\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff06\u30d1\u30b9\u30ef\u30fc\u30c9\u304b\u3089\u5bfe\u8c61\u3068\u306a\u308b\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001CSRF\u30c8\u30fc\u30af\u30f3\u3092cookie\u306b\u8ffd\u52a0\u3059\u308b\u3002\n\u30fbSecurityConfig\u30fb\u30fb\u30fb\u8a8d\u8a3c\u4e0d\u8981\u30a2\u30c9\u30ec\u30b9\u8a2d\u5b9a\u306a\u3069\u3001\u8a8d\u8a3c/\u8a8d\u53ef\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3002\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff1a\n\u30fbrun.js\u30fb\u30fb\u30fbui-router\u3092\u4f7f\u3063\u305f\u753b\u9762\u9077\u79fb\u6642\u306b\u3001\u30e6\u30fc\u30b6\u306e\u6a29\u9650\u306b\u5fdc\u3058\u305f\u8a8d\u53ef\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n\u8a8d\u8a3c\u51e6\u7406\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\uff09\n\nui-router\u3092\u4f7f\u7528\u3057\u3066\u753b\u9762\u9077\u79fb\u3057\u307e\u3059\u3002\nindex.html\u5185\u306b\u30ed\u30b0\u30a4\u30f3\u753b\u9762(loginform.html)\u3068\u30ed\u30b0\u30a4\u30f3\u5f8c\u30db\u30fc\u30e0\u753b\u9762(home.html)\u3001\u7ba1\u7406\u8005\u30da\u30fc\u30b8(admin.html)\u3092\u547c\u3073\u51fa\u305b\u308b\u3088\u3046ui-view\u30bf\u30b0\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30ed\u30b0\u30a4\u30f3\u753b\u9762\n\nloginform.html\n<!-- \u30ed\u30b0\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0 -->\n<div class=\"l-login\">\n    <form ng-submit=\"LoginCtrl.login(LoginCtrl.credentials)\" class=\"form-group\">\n        <!-- \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9 -->\n        <input type=\"email\" class=\"form-control\" placeholder=\"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" name=\"mailaddress\" ng-model=\"LoginCtrl.credentials.mailaddress\">\n        <!-- \u30d1\u30b9\u30ef\u30fc\u30c9 -->\n        <input type=\"password\" class=\"form-control\" placeholder=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" name=\"password\" ng-model=\"LoginCtrl.credentials.password\">\n        <button type=\"submit\" class=\"l-login-btn btn btn-success\">\u30ed\u30b0\u30a4\u30f3</button>\n    </form>\n    <!-- \u8a8d\u8a3c\u5931\u6557\u6642\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8 -->\n    <div ng-show=\"LoginCtrl.error\">\n        \u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002\n    </div>\n</div>\n\n\n\nLoginController.js\n/**\n * \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\n * \n * @return\n */\n(function(){\n    'use strict';\n\n    function LoginCtrl($scope,$http,$state,$localStorage){\n        var self = this;\n\n        /**\n         * \u30ed\u30b0\u30a4\u30f3\u30dc\u30bf\u30f3\u62bc\u4e0b\u51e6\u7406\n         * @param  {[object]} credentials \n         * @return              \n         */\n        self.login = function(credentials){\n            $http.post(\"/demo/api/login\",credentials)\n                /** \u8a8d\u8a3c\u6210\u529f\u6642 */\n                .success(function(apiResult){\n                    $localStorage.userinfo = apiResult; //localStorage\u306b\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u3092\u683c\u7d0d\n                    $state.go('home'); //home\u753b\u9762\u306b\u9077\u79fb\n                })\n                /** \u8a8d\u8a3c\u5931\u6557\u6642 */\n                .error(function(apiResult) {\n                    self.error = true; //\u30a8\u30e9\u30fc\u8868\u793a\u30d5\u30e9\u30b0:true\n                });\n        }\n\n    }\n\n    angular.module(demoApp).controller('LoginController',['$scope','$http','$state','$localStorage',LoginCtrl]);\n})();\n\n\n\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u5148\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u5411\u3051\u3066\u3001\u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6e21\u3057\u307e\u3059\u3002\n\u8a8d\u8a3c\u6210\u529f\u6642\u306f\u8a8d\u8a3c\u7d50\u679c\u3092userinfo\u3068\u3057\u3066localStorage\u306b\u683c\u7d0d\u3057\u307e\u3059\u3002\n\u3068\u308a\u3042\u3048\u305a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u6295\u3052\u308b\u3068\u3053\u308d\u307e\u3067\u3002\n\n\u8a8d\u8a3c\u51e6\u7406\uff08\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\uff09\n\n\u307e\u305a\u306f\u8a8d\u8a3c\u51e6\u7406\u3092\u884c\u3046\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u304b\u3089\n\n\u8a8d\u8a3c\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\n\n\nLoginService.java\n    @Autowired\n    private AuthenticationManager authManager;\n    /** logger */\n    private static final Logger logger = LoggerFactory.getLogger(LoginService.class);\n\n    /**\n     * \u8a8d\u8a3c\u51e6\u7406\n     * @param loginInfo\n     * @return\n     */\n    public AuthResult login(LoginInfoDTO loginInfo){\n        Authentication authentication = null;\n        AuthResult authResult = new AuthResult();\n        try {\n            //\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u3088\u308b\u7167\u5408\u3092\u5b9f\u65bd\n            Authentication request = new UsernamePasswordAuthenticationToken(loginInfo.getMailaddress(), loginInfo.getPassword());\n\u3000\u3000\u3000\u3000\u3000\u3000 //\u5bfe\u8c61\u30e6\u30fc\u30b6\u304c\u5b58\u5728\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u8a8d\u8a3c\u3092\u884c\u3046\n            authentication = authManager.authenticate(request);\n            //\u8a8d\u8a3cOK\u306e\u5834\u5408\u306f\u3001\u8a8d\u8a3c\u7d50\u679c\u3092contextholder\u306b\u8a2d\u5b9a\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n            //\u8a8d\u8a3c\u6e08\u307f\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u683c\u7d0d\n            LoginUserDetails principal = (LoginUserDetails)authentication.getPrincipal();\n            //\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3078\u306e\u8fd4\u5374\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\n            authResult.setUserName(principal.getUsername());\n            authResult.setPermissions(principal.getPermissions());\n            authResult.setRoles(principal.getAuthorities().stream().map(authority -> authority.getAuthority()).collect(Collectors.toList()));\n        }\n        //\u8a8d\u8a3c\u5931\u6557\u306e\u5834\u5408\n        catch (Exception e) {\n            logger.error(e.toString());\n        }\n        return authResult;\n    }\n\n\n\u3053\u306elogin\u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3057\u3066\u3044\u308bLoginInfoDto\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u306a\u308a\u307e\u3059\u3002spring security\u3067\u306e\u8a8d\u8a3c\u51e6\u7406\u306e\u6d41\u308c\u3068\u3057\u3066\u306f\u4e0b\u8a18\u30da\u30fc\u30b8\u304c\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u3067\u3059\u3002\nspring Security 3.1 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 - \u30c6\u30af\u30cb\u30ab\u30eb\u30fb\u30b5\u30de\u30ea (1)\n\n\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5f97\u3089\u308c\u3001\u305d\u308c\u3089\u304cUsernamePasswordAuthenticationToken\uff08\u5148\u306b\u898b\u305fAuthentication\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u5b9f\u88c5\u306e1\u3064\u3067\u3059\uff09\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u306a\u304b\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u30c8\u30fc\u30af\u30f3\u306f\u691c\u8a3c\u306e\u305f\u3081AuthenticationManager\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u6e21\u3055\u308c\u307e\u3059\u3002\n\u8a8d\u8a3c\u306b\u6210\u529f\u3059\u308b\u3068AuthenticationManager\u306f\u5341\u5168\u306a\u60c5\u5831\u3092\u8a2d\u5b9a\u3055\u308c\u305f\u72b6\u614b\u306eAuthentication\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u3053\u306eAuthentication\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5f15\u6570\u306b\u3057\u3066SecurityContextHolder.getContext().setAuthentication(...)\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u30fb\u30b3\u30fc\u30eb\u3092\u884c\u3046\u3053\u3068\u306b\u3088\u3063\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fb\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u78ba\u7acb\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u4ee5\u964d\u3001\u30e6\u30fc\u30b6\u306f\u201c\u8a8d\u8a3c\u6e08\u307f\u3067\u3042\u308b\u201d\u3068\u898b\u306a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30e6\u30fc\u30b6\u540d\uff06\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u3088\u3046\u306b2\u70b9\u8a8d\u8a3c\u306e\u5834\u5408\u306f\u3001UsernamePasswordAuthenticaionToken\u30e1\u30bd\u30c3\u30c9\u3067\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u3053\u308c\u304c\u30e6\u30fc\u30b6\u540d\uff06\u30d1\u30b9\u30ef\u30fc\u30c9\uff06\u793e\u54e1\u756a\u53f7\u306a\u3069\u306e\u3088\u3046\u306a3\u70b9\u8a8d\u8a3c\u306e\u5834\u5408\u306f\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\n\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u306e\u4f5c\u6210\n\n\u4eca\u56de\u306f\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u3068\u3057\u3066\u4e0b\u8a18\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u306b\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u306e\u304cLoginUserDetailsService\u30af\u30e9\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e2\u3064\u306b\u95a2\u3057\u3066\u306f\u304a\u306a\u3058\u307f\u306e\u66f8\u7c4d\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\u306f\u3058\u3081\u3066\u306espringboot\n\nLoginUserDetails.java\n@Data\npublic class LoginUserDetails extends org.springframework.security.core.userdetails.User{\n    private static final long serialVersionUID = 1L;\n\n    /** \u8a8d\u8a3c\u30e6\u30fc\u30b6\u540d*/\n    private String name;\n    /** \u30d1\u30b9\u30ef\u30fc\u30c9*/\n    private String password;\n    /** \u6a29\u9650\u30ea\u30b9\u30c8*/\n    private List<String> permissions;\n    /** \u30ed\u30fc\u30eb\u30ea\u30b9\u30c8*/\n    private Collection<GrantedAuthority> authorities;\n\n    /**\n     * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n     * @param user\n     */\n    public LoginUserDetails(User user){\n        //User\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304b\u3089\u3001\u8a8d\u8a3c\u30e6\u30fc\u30b6\u306e\u30e6\u30fc\u30b6\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3001\u6a29\u9650\u30ea\u30b9\u30c8\u3001\u30ed\u30fc\u30eb\u30ea\u30b9\u30c8\u3092\u8a2d\u5b9a\n        super(user.getName(), user.getEncodedPassword(), new ArrayList<GrantedAuthority>());\n        name = user.getName();\n        password = user.getEncodedPassword();\n        //User -> list<Role> -> list<Permission> -> list<String>\n        permissions = user.getRoles()\n                          .stream()\n                          .flatMap(role -> role.getPermissions().stream()\n                                                                .map(permission -> permission.getName()))\n                          .collect(Collectors.toList());\n        //User -> list<Role> -> list<GrantedAuthority>\n        authorities = user.getRoles()\n                        .stream()\n                        .map(role -> new SimpleGrantedAuthority(role.getName()))\n                        .collect(Collectors.toList());\n    }\n\n}\n\n\n\nLoginUserDetailsService.java\n@Service\npublic class LoginUserDetailsService implements UserDetailsService{\n    @Autowired\n    UserRepository repository;\n\n    @Override\n    public UserDetails loadUserByUsername(String mailaddress) throws UsernameNotFoundException{\n        //DB\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u8a8d\u8a3c\u5bfe\u8c61\u30e6\u30fc\u30b6\u3092\u53d6\u5f97\n        User user = repository.findOne(mailaddress);\n        if(user == null){\n            throw new UsernameNotFoundException(\"\u5bfe\u8c61\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\");\n        }\n        //\u53d6\u5f97\u3057\u305fUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3082\u3068\u306bLoginUserDetails\u3092\u4f5c\u6210\u3059\u308b\n        return new LoginUserDetails(user);\n    }\n}\n\n\n1.LoginUserDetailsService\u3067\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304b\u3089User\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u53d6\u5f97\n2.\u53d6\u5f97\u3057\u305fUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u5143\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\uff08LoginUserDetails\uff09\u3092\u4f5c\u6210\n\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n\u3053\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u304b\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30e6\u30fc\u30b6\u540d\u3001\u6a29\u9650\u30ea\u30b9\u30c8\u3001\u30ed\u30fc\u30eb\u30ea\u30b9\u30c8\u3092\u8fd4\u5374\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\u8a8d\u8a3c\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8RestController\n\n\u4e0a\u8a18\u306eLoginService\u3092\u547c\u3073\u51fa\u3059RestController\u5185\u5bb9\u306f\u6b21\u306e\u3068\u304a\u308a\u3002\n\nLoginRestController.java\n@RestController\npublic class LoginRestController {\n\n    @Autowired\n    private LoginService loginService;\n\n    /**\n     * \u30ed\u30b0\u30a4\u30f3\u51e6\u7406\n     * @param loginInfo\n     * @param request\n     * @param response\n     * @return\n     */\n    @RequestMapping(value=\"/api/login\",method=RequestMethod.POST)\n    public ResponseEntity<AuthResult> login(@RequestBody LoginInfoDTO loginInfo,HttpServletRequest request,HttpServletResponse response){\n        //\u8a8d\u8a3c\u51e6\u7406\u3092\u5b9f\u884c\n        AuthResult  authResult = loginService.login(loginInfo);\n        //\u8a8d\u8a3cOK\u306e\u5834\u5408\u306fcsrf\u30c8\u30fc\u30af\u30f3\u3092\u30af\u30c3\u30ad\u30fc\u306b\u30bb\u30c3\u30c8\n        if(authResult.getUserName() != null){\n            CsrfToken csrf = (CsrfToken)request.getAttribute(CsrfToken.class.getName());\n            if(csrf != null){\n                Cookie cookie = WebUtils.getCookie(request, \"XSRF-TOKEN\");\n                String token = csrf.getToken();\n                Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n                if((cookie == null || token != null && !token.equals(cookie.getValue())) && (authentication != null && authentication.isAuthenticated())){\n                    cookie = new Cookie(\"XSRF-TOKEN\", token);\n                    cookie.setPath(\"/\");\n                    response.addCookie(cookie);\n                }\n            }\n            return new ResponseEntity<>(authResult,null,HttpStatus.OK);\n        }\n        //\u8a8d\u8a3c\u5931\u6557\u6642\u306f401\u30a8\u30e9\u30fc\u3092\u8fd4\u5374\n        else{\n            return new ResponseEntity<>(authResult,null,HttpStatus.UNAUTHORIZED);\n        }\n    }\n\n}\n\n\nAngular\u3092\u4f7f\u3063\u305f\u5834\u5408\u306fCSRF\u5bfe\u7b56\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u3053\u306e\u51e6\u7406\u306b\u95a2\u3057\u3066\u306f\u4e0b\u8a18\u8a18\u4e8b\u304b\u3089\u4f7f\u308f\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\nAngularJS\u3067Spring Security\n\n\nSecurityConfig\n\n\u8a8d\u8a3c\u306e\u6700\u5f8c\u306bconfig\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3053\u3061\u3089\u3082\u4e0a\u8a18\u8a18\u4e8b\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\nSecurityConfig.java\n@Configuration\n@EnableWebMvcSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            //\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u4e0d\u8981\u30d1\u30b9\u3092\u8a2d\u5b9a\n            .antMatchers(\n                    \"/index\",\n                    \"/api/login\",\n                    \"/webjars/**\",\n                    \"/app/**/*.js\",\n                    \"/app/**/*.css\",\n                    \"/app/views/**.html\"\n            ).permitAll()\n            //\u7ba1\u7406\u8005\u30da\u30fc\u30b8\u3078\u306eURL\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u306e\u307f\u53ef\u80fd\n            .antMatchers(\"/admin\",\"/api/v1/users\").hasRole(\"ADMIN\")\n            //\u4e0a\u8a18\u30d1\u30b9\u610f\u5916\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306f\u5168\u3066\u8a8d\u8a3c\u304c\u5fc5\u8981\n            .anyRequest().authenticated()\n        //\u30ed\u30b0\u30a2\u30a6\u30c8\u8a2d\u5b9a\n        .and().logout()\n            //\u30ed\u30b0\u30a2\u30a6\u30c8\u5b9f\u884capi\u3092\u6307\u5b9a\n            .logoutRequestMatcher(new AntPathRequestMatcher(\"/api/logout\"))\n        //CSRF\u5bfe\u7b56\n        .and().csrf().csrfTokenRepository(csrfTokenRepository())\n        .and().addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);\n    }\n\n    //\u30bb\u30c3\u30b7\u30e7\u30f3\u30d8\u30c3\u30c0\u30fc\u306bCSRF\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\n    private CsrfTokenRepository csrfTokenRepository(){\n        HttpSessionCsrfTokenRepository repository = new HttpSessionCsrfTokenRepository();\n        repository.setHeaderName(\"X-XSRF-TOKEN\");\n        return repository;\n    }\n\n    private Filter csrfHeaderFilter() {\n        return new OncePerRequestFilter() {\n            @Override\n            protected void doFilterInternal(HttpServletRequest request,\n                    HttpServletResponse response, FilterChain filterChain)\n                    throws ServletException, IOException {\n                CsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class\n                        .getName());\n                if (csrf != null) {\n                    Cookie cookie = WebUtils.getCookie(request, \"XSRF-TOKEN\");\n                    String token = csrf.getToken();\n                    if (cookie == null || token != null\n                            && !token.equals(cookie.getValue())) {\n                        cookie = new Cookie(\"XSRF-TOKEN\", token);\n                        cookie.setPath(\"/\");\n                        response.addCookie(cookie);\n                    }\n                }\n                filterChain.doFilter(request, response);\n            }\n        };\n    }\n\n    //\u8a8d\u8a3c\u51e6\u7406\u8a2d\u5b9a\n    @Configuration\n    static class AuthenticationConfiguration extends GlobalAuthenticationConfigurerAdapter {\n        //\u8a8d\u8a3c\u30e6\u30fc\u30b6\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\n        @Autowired\n        private LoginUserDetailsService userDetailService;\n\n        //\u30e6\u30fc\u30b6\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3059\u308bEncoder\u8a2d\u5b9a\n        //\u30d1\u30b9\u30ef\u30fc\u30c9\u30cf\u30c3\u30b7\u30e5\u306b\u7279\u5316\u3057\u305f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0BCrypt\u3092\u6307\u5b9a\n        @Bean\n        PasswordEncoder passwordEncoder(){\n            return new BCryptPasswordEncoder();\n        }\n\n        //\u8a8d\u8a3c\u51e6\u7406\u8a2d\u5b9a\n        public void init(AuthenticationManagerBuilder auth) throws Exception {\n            auth\n                //\u8a8d\u8a3c\u30e6\u30fc\u30b6\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\n                .userDetailsService(userDetailService)\n                //\u30d1\u30b9\u30ef\u30fc\u30c9\u7167\u5408\u6642\u306eEncoder\u3092\u6307\u5b9a\n                .passwordEncoder(passwordEncoder());\n        }\n    }\n\n\n\n\u304a\u305d\u3089\u304fspring security\u4f7f\u3044\u65b9\u3092\u8abf\u3079\u308b\u3068\u3001formLogin\u3092\u4f7f\u3063\u305f\u4f8b\u3092\u3088\u304f\u898b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u4eca\u56de\u306fCSRF\u5bfe\u7b56\u3092\u3059\u308b\u305f\u3081\u306b\u5225\u9014\u30ed\u30b0\u30a4\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u306f\u8a18\u8ff0\u3057\u307e\u305b\u3093\u3002\nindex.html\u3092\u8aad\u307f\u8fbc\u3080\u3068\u304d\u306b\u5fc5\u8981\u306acss\u3084js\u306f\u8a8d\u8a3c\u305b\u305a\u306b\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3001\u7ba1\u7406\u8005\u30da\u30fc\u30b8\u3084\u30c7\u30fc\u30bf\u53d6\u5f97\u6642\u306eAPI\u30a2\u30c9\u30ec\u30b9\u306fROLE_ADMIN\u6a29\u9650\u304c\u306a\u3051\u308c\u3070\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\nAuthenticationConfiguration\u306b\u3064\u3044\u3066\u306f\u3001\u66f8\u7c4d\u300c\u306f\u3058\u3081\u3066\u306espringboot\u300d\u306e\u307e\u307e\u3067\u3059\u306d\u3002\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u3066DB\u306b\u683c\u7d0d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u3056\u3063\u304f\u308a\u3068\u3067\u3059\u304c\u8a8d\u8a3c\u306f\u3053\u3093\u306a\u3068\u3053\u308d\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u8a8d\u53ef\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\uff09\n\n\u753b\u9762\u9077\u79fb\u3084\u30dc\u30bf\u30f3\u8868\u793a\u5236\u5fa1\u306a\u3069\u306e\u8a8d\u53ef\u306b\u3064\u3044\u3066\u306f\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u8a8d\u8a3c\u7d50\u679c\u3068\u3057\u3066\u53d6\u5f97\u3057\u305f\u6a29\u9650\u30ea\u30b9\u30c8\u3092\u5143\u306b\u8a8d\u53ef\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n\u30dc\u30bf\u30f3\u8868\u793a\u5236\u5fa1\n\n\nhome.html\n<li ng-if=\"HomeCtrl.hasPermission('manageUser')\"><a ng-click=\"HomeCtrl.goAdminPage()\">\u7ba1\u7406\u30da\u30fc\u30b8</a></li>\n<li><p class=\"navbar-text\">{{HomeCtrl.userName}}</p></li>\n<li ><a ng-click=\"HomeCtrl.logout()\"><i class=\"fa fa-power-off\"/></a></li>\n\n\n\nHomeController.js\nself.hasPermission = function(targetPermission){\n  return LoginUserService.hasPermission(targetPermission);\n}\n\n\n\nLoginUserService.js\n(function(){\n    'use strict';\n\n    function LoginUserService($localStorage){\n\n        var loginUserService = {\n            /**\n             * \u6307\u5b9a\u3055\u308c\u305f\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\n             * @param  {[type]}  targetPermission\n             * @return {Boolean}                 \n             */\n            hasPermission: function(targetPermission){\n                for(var i=0; i<$localStorage.userinfo.permissions.length; i++){\n                    if($localStorage.userinfo.permissions[i] === targetPermission){\n                        return true;\n                    }\n                }\n                return false;\n            }\n        }\n\n        return loginUserService;\n    }\n\n    angular.module(demoApp).factory('LoginUserService',['$localStorage',LoginUserService]);\n})();\n\n\nlocalStorage\u306b\u683c\u7d0d\u3057\u3066\u3042\u308b\u8a8d\u8a3c\u60c5\u5831\u306b\u6307\u5b9a\u3055\u308c\u305f\u6a29\u9650\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u306d\u3002\nlocalStorage\u3078\u306e\u683c\u7d0d\u65b9\u6cd5\u306fngStorage\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nngStorage\n\u7ba1\u7406\u8005\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\n\n\u7ba1\u7406\u8005\u6a29\u9650\u304c\u306a\u3044\u5834\u5408\n\n\n\n\u753b\u9762\u9077\u79fb\u6642\n\n\u7d9a\u3044\u3066\u753b\u9762\u9077\u79fb\u6642\u306e\u8a8d\u53ef\u306b\u3064\u3044\u3066\u306f\u3001run\u30e1\u30bd\u30c3\u30c9\u3067\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\nui-router\u306e$stateChangeStart\u3068\u3044\u3046\u30a4\u30d9\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u3001state\u304c\u5909\u5316\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51e6\u7406\u3092\u767a\u706b\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u4e2d\u3067\u6307\u5b9a\u3055\u308c\u305f\u6a29\u9650\u304clocalStorage\u306b\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u306a\u3051\u308c\u3070\u9077\u79fb\u3055\u305b\u306a\u3044\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\nrun.js\n    function run($rootScope,$state,$localStorage,LoginUserService){\n        $rootScope.$on('$stateChangeStart',function(e,toState,toParams,fromState,fromParams){\n\n            // \u7ba1\u7406\u8005\u30da\u30fc\u30b8\u306b\u9077\u79fb\u3059\u308b\u5834\u5408\n            if(toState.name == 'admin'){\n                // admin\u6a29\u9650\u304c\u306a\u3044\u5834\u5408\u306f\u9077\u79fb\u3055\u305b\u306a\u3044\n                if(!LoginUserService.hasPermission('manageUser')){\n                    e.preventDefault();\n                    alert('\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093');\n                }\n            }\n\n            // \u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u306b\u9077\u79fb\u3059\u308b\u5834\u5408\uff08\u30d6\u30e9\u30a6\u30b6\u30d0\u30c3\u30af\u6642\u306e\u5bfe\u5fdc\u3068\u3057\u3066\uff09\n            if(toState.name == 'login'){\n                // \u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u306e\u5834\u5408\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u307e\u3067\u9077\u79fb\u3055\u305b\u306a\u3044\n                if($localStorage.userinfo){\n                    $state.go('home'); //\u30db\u30fc\u30e0\u753b\u9762\u306b\u9077\u79fb\n                }\n            }\n\n            // \u30db\u30fc\u30e0\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u5834\u5408\uff08\u672a\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u30db\u30fc\u30e0\u753b\u9762\u3078\u306eURL\u3092\u76f4\u63a5\u5165\u529b\u3055\u308c\u305f\u5834\u5408\u306e\u5bfe\u5fdc\u3068\u3057\u3066\uff09\n            if(toState.name == 'home'){\n                if(!$localStorage.userinfo){\n                    e.preventDefault();\n                    alert('\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044');\n                }\n            }\n\n        });\n    }\n\n\n\u3053\u3053\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u30d6\u30e9\u30a6\u30b6\u30d0\u30c3\u30af\u3067\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u307e\u3067\u623b\u3063\u3066\u3057\u307e\u3046\u5834\u5408\u3084\u30db\u30fc\u30e0\u753b\u9762\u3078\u306eURL\u304c\u76f4\u63a5\u5165\u529b\u3055\u308c\u305f\u5834\u5408\u3082\u6a29\u9650\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3088\u3046\u306a\u51e6\u7406\u3068\u3057\u307e\u3057\u305f\u3002\n\uff08\u753b\u9762\u6570\u304c\u591a\u3044\u5834\u5408\u306f\u3053\u3046\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u306e\u306f\u7169\u96d1\u3067\u3059\u306d\u30fb\u30fb\u30fb\uff09\n\u53c2\u8003\u8a18\u4e8b\u306f\u3053\u3061\u3089\nui-router \u3092\u4f7f\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u5fc5\u9808\u306estate\u3092\u4f5c\u308b\n\nlocalStorage\u3092\u4f7f\u3063\u305f\u8a8d\u53ef\u306e\u8ab2\u984c\nlocalStorage\u306e\u5834\u5408\u306f\u30d6\u30e9\u30a6\u30b6\u958b\u767a\u8005\u30c4\u30fc\u30eb\u3067\u5024\u3092\u5909\u66f4\u3067\u304d\u308b\u305f\u3081\u3001\u4e0d\u9069\u5207\u306a\u8a8d\u53ef\u304c\u53ef\u80fd\u3068\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u305d\u308c\u304c\u5acc\u3067\u3042\u308c\u3070\u8a8d\u53ef\u304c\u5fc5\u8981\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306a\u51e6\u7406\u304c\u5fc5\u8981\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u308c\u306f\u305d\u308c\u3067\u30b5\u30fc\u30d0\u30fc\u3068\u306e\u30a2\u30af\u30bb\u30b9\u304c\u5897\u3048\u3001\u30e6\u30fc\u30b6\u4f53\u9a13\u3082\u640d\u306a\u308f\u308c\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\n\u306a\u306e\u3067\u4eca\u56de\u306f\u30c7\u30fc\u30bf\u53d6\u5f97API\u3078\u306e\u8a8d\u53ef\u3092\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u62c5\u4fdd\u3059\u308b\u3053\u3068\u3067\u3001\u753b\u9762\u9077\u79fb\u3092\u4e0d\u6b63\u306b\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u306f\u5bb9\u8a8d\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\nSpring Security\u3092\u4f7f\u3063\u305f\u30ed\u30b0\u30a4\u30f3\u6a5f\u80fd\u3063\u3066\u30cf\u30de\u308a\u307e\u3059\u3088\u306d\u3002\u3002\n\u516c\u5f0ftutorial\u8aad\u3093\u3060\u308a\u3001\u3055\u3093\u3056\u3093\u30b0\u30b0\u3063\u3066\u3082\u306a\u3093\u3068\u306a\u304f\u308f\u304b\u3089\u306a\u3044\u30fb\u30fb\u30fb\n\u5168\u3066\u306e\u4ed5\u69d8\u3092\u628a\u63e1\u3057\u305f\u308f\u3051\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3053\u3093\u306a\u3093\u3067\u52d5\u304d\u307e\u3057\u305f\u3068\u3044\u3046\u611f\u3058\u3067\u8aad\u3093\u3067\u3044\u305f\u3060\u3051\u308c\u3070\u3002\n\n\u4eca\u56de\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u304b\u3089\n[Github](https://github.com/HHFactory/LoginDemo)\n\n### \u53c2\u8003\u8cc7\u6599\n***\n1. [\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u5236\u5fa1](http://qiita.com/kawasima/items/8dd7eda743f2fdcad78e)\n\n2. [spring Security 3.1 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 - \u30c6\u30af\u30cb\u30ab\u30eb\u30fb\u30b5\u30de\u30ea (1)](http://m12i.hatenablog.com/entry/2013/03/28/004152)\n\n3. [AngularJS\u3067Spring Security](http://qiita.com/ko-aoki/items/8c4fbcbb36f458652754#%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89)\n\n4. [ui-router \u3092\u4f7f\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u5fc5\u9808\u306estate\u3092\u4f5c\u308b](http://qiita.com/ooharabucyou/items/65f52646d721da5b2032)\n\n\n5. [spring security\u516c\u5f0ftutorial](https://spring.io/guides/tutorials/spring-security-and-angular-js/)\n\n6. \u66f8\u7c4d\uff1a[\u306f\u3058\u3081\u3066\u306espring boot](http://www.amazon.co.jp/dp/4777518655)\n\n### \u69cb\u6210\u3068\u4ed5\u69d8\n***\n\u30b5\u30fc\u30d0\u30fc\u306fREST API\u3068\u3057\u3066\u30c7\u30fc\u30bf\u3092\u5410\u304f\u3060\u3051\u3001\u753b\u9762\u9077\u79fb\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3002\n\u57fa\u672c\u7684\u306b\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u8a8d\u8a3c\u3092\u884c\u3044\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u8a8d\u53ef\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u3002\n\n**\u30b5\u30fc\u30d0\u30fc**\n\u30fbspring security\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u51e6\u7406\u3092\u884c\u3046\u3002\n\u3000\u2192DB\u306b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u30e6\u30fc\u30b6\u60c5\u5831\u304b\u3089\u8a8d\u8a3c\u3059\u308b\u3002\n\u30fbREST API\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066json\u30c7\u30fc\u30bf\u3092\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u6e21\u3059\u3002\n\uff08API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u8a8d\u53ef\u3092\u884c\u3046\uff09\n![160403-0003.png](https://qiita-image-store.s3.amazonaws.com/0/118585/769e8480-00b1-adf7-55c8-7c59bf69bd58.png)\n\n**\u30af\u30e9\u30a4\u30a2\u30f3\u30c8**\n\u4f7f\u7528\u30e9\u30a4\u30d6\u30e9\u30ea\u3000ui-router,ngStorage\n\u30fbui-router\u306b\u3088\u308b\u753b\u9762\u9077\u79fb\u3084\u3001\u30dc\u30bf\u30f3\u8868\u793a\u5236\u5fa1\u306a\u3069\u306e\u8a8d\u53ef\u51e6\u7406\u3092\u884c\u3046\u3002\n\u30fb\u8a8d\u8a3c\u60c5\u5831\u306fngStorage\u3092\u4f7f\u3063\u3066localStorage\u306b\u683c\u7d0d\u3059\u308b\n![160403-0004.png](https://qiita-image-store.s3.amazonaws.com/0/118585/387e3cb9-df90-6462-9069-146bfb6208e9.png)\n\n**DB\uff08\u30c6\u30fc\u30d6\u30eb\u69cb\u6210\uff09**\n\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306b\u57fa\u3065\u304d\u3001\u4e0b\u8a18\u306e\u30c6\u30fc\u30d6\u30eb\u69cb\u6210\u3068\u3059\u308b\u3002\n\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u306b\u3064\u3044\u3066\u306f\u4e0b\u8a18\u53c2\u7167\n[\u696d\u52d9\u30b7\u30b9\u30c6\u30e0\u306b\u304a\u3051\u308b\u30ed\u30fc\u30eb\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9\u5236\u5fa1](http://qiita.com/kawasima/items/8dd7eda743f2fdcad78e)\n\n\u30fbUser\u30c6\u30fc\u30d6\u30eb\u30fb\u30fb\u30fb\u8907\u6570\u306eRole\u3092\u4fdd\u6709\u3002\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u3066\u683c\u7d0d\u3002\n\u30fbRole\u30c6\u30fc\u30d6\u30eb\u30fb\u30fb\u30fb\u8907\u6570\u306ePermission\u3092\u4fdd\u6709\u3059\u308b\u30ed\u30fc\u30eb\u3092\u683c\u7d0d\u3002\n\u30fbPermission\u30c6\u30fc\u30d6\u30eb\u30fb\u30fb\u30fb\u767b\u9332\u6a29\u9650\u3084\u53c2\u7167\u6a29\u9650\u306a\u3069\u304c\u683c\u7d0d\u3002\n\n![\u540d\u79f0\u672a\u8a2d\u5b9a.jpg](https://qiita-image-store.s3.amazonaws.com/0/118585/e28ae7b0-5527-abef-4912-e8b9e7e15bdb.jpeg)\n\n### \u30dd\u30a4\u30f3\u30c8\u3068\u306a\u308b\u30af\u30e9\u30b9\n***\n\u30b5\u30fc\u30d0\u30fc\uff1a\n\u30fbLoginUserDetails\u30fb\u30fb\u30fbUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3082\u3068\u306b\u4f5c\u6210\u3055\u308c\u308b\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\n\u30fbLoginUserDetailsService\u30fb\u30fb\u30fb\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\n\u30fbLoginService\u30fb\u30fb\u30fb\u8a8d\u8a3c\u51e6\u7406\u3092\u884c\u3046\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u3002\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u6e21\u3055\u308c\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff06\u30d1\u30b9\u30ef\u30fc\u30c9\u304b\u3089\u5bfe\u8c61\u3068\u306a\u308b\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3001CSRF\u30c8\u30fc\u30af\u30f3\u3092cookie\u306b\u8ffd\u52a0\u3059\u308b\u3002\n\u30fbSecurityConfig\u30fb\u30fb\u30fb\u8a8d\u8a3c\u4e0d\u8981\u30a2\u30c9\u30ec\u30b9\u8a2d\u5b9a\u306a\u3069\u3001\u8a8d\u8a3c/\u8a8d\u53ef\u8a2d\u5b9a\u3092\u8a18\u8ff0\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\uff1a\n\u30fbrun.js\u30fb\u30fb\u30fbui-router\u3092\u4f7f\u3063\u305f\u753b\u9762\u9077\u79fb\u6642\u306b\u3001\u30e6\u30fc\u30b6\u306e\u6a29\u9650\u306b\u5fdc\u3058\u305f\u8a8d\u53ef\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n### \u8a8d\u8a3c\u51e6\u7406\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\uff09\n***\nui-router\u3092\u4f7f\u7528\u3057\u3066\u753b\u9762\u9077\u79fb\u3057\u307e\u3059\u3002\nindex.html\u5185\u306b\u30ed\u30b0\u30a4\u30f3\u753b\u9762(loginform.html)\u3068\u30ed\u30b0\u30a4\u30f3\u5f8c\u30db\u30fc\u30e0\u753b\u9762(home.html)\u3001\u7ba1\u7406\u8005\u30da\u30fc\u30b8(admin.html)\u3092\u547c\u3073\u51fa\u305b\u308b\u3088\u3046ui-view\u30bf\u30b0\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n**\u30ed\u30b0\u30a4\u30f3\u753b\u9762**\n\n```loginform.html\n<!-- \u30ed\u30b0\u30a4\u30f3\u30d5\u30a9\u30fc\u30e0 -->\n<div class=\"l-login\">\n\t<form ng-submit=\"LoginCtrl.login(LoginCtrl.credentials)\" class=\"form-group\">\n\t\t<!-- \u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9 -->\n\t\t<input type=\"email\" class=\"form-control\" placeholder=\"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\" name=\"mailaddress\" ng-model=\"LoginCtrl.credentials.mailaddress\">\n\t\t<!-- \u30d1\u30b9\u30ef\u30fc\u30c9 -->\n\t\t<input type=\"password\" class=\"form-control\" placeholder=\"\u30d1\u30b9\u30ef\u30fc\u30c9\" name=\"password\" ng-model=\"LoginCtrl.credentials.password\">\n\t\t<button type=\"submit\" class=\"l-login-btn btn btn-success\">\u30ed\u30b0\u30a4\u30f3</button>\n\t</form>\n\t<!-- \u8a8d\u8a3c\u5931\u6557\u6642\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8 -->\n\t<div ng-show=\"LoginCtrl.error\">\n\t\t\u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u8aa4\u308a\u304c\u3042\u308a\u307e\u3059\u3002\n\t</div>\n</div>\n```\n```LoginController.js\n/**\n * \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\n * \n * @return\n */\n(function(){\n\t'use strict';\n\n\tfunction LoginCtrl($scope,$http,$state,$localStorage){\n\t\tvar self = this;\n\n\t\t/**\n\t\t * \u30ed\u30b0\u30a4\u30f3\u30dc\u30bf\u30f3\u62bc\u4e0b\u51e6\u7406\n\t\t * @param  {[object]} credentials \n\t\t * @return              \n\t\t */\n\t\tself.login = function(credentials){\n\t\t\t$http.post(\"/demo/api/login\",credentials)\n\t\t\t\t/** \u8a8d\u8a3c\u6210\u529f\u6642 */\n\t\t\t\t.success(function(apiResult){\n\t\t\t\t\t$localStorage.userinfo = apiResult; //localStorage\u306b\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u3092\u683c\u7d0d\n\t\t\t\t\t$state.go('home'); //home\u753b\u9762\u306b\u9077\u79fb\n\t\t\t\t})\n\t\t\t\t/** \u8a8d\u8a3c\u5931\u6557\u6642 */\n\t\t\t\t.error(function(apiResult) {\n\t\t\t\t\tself.error = true; //\u30a8\u30e9\u30fc\u8868\u793a\u30d5\u30e9\u30b0:true\n\t\t\t\t});\n\t\t}\n\n\t}\n\n\tangular.module(demoApp).controller('LoginController',['$scope','$http','$state','$localStorage',LoginCtrl]);\n})();\n```\n\u30ed\u30b0\u30a4\u30f3\u51e6\u7406\u5148\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u5411\u3051\u3066\u3001\u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u6e21\u3057\u307e\u3059\u3002\n\u8a8d\u8a3c\u6210\u529f\u6642\u306f\u8a8d\u8a3c\u7d50\u679c\u3092userinfo\u3068\u3057\u3066localStorage\u306b\u683c\u7d0d\u3057\u307e\u3059\u3002\n\n\u3068\u308a\u3042\u3048\u305a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30b5\u30fc\u30d0\u30fc\u306b\u6295\u3052\u308b\u3068\u3053\u308d\u307e\u3067\u3002\n\n### \u8a8d\u8a3c\u51e6\u7406\uff08\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\uff09\n***\n\u307e\u305a\u306f\u8a8d\u8a3c\u51e6\u7406\u3092\u884c\u3046\u30b5\u30fc\u30d3\u30b9\u30af\u30e9\u30b9\u304b\u3089\n\n- \u8a8d\u8a3c\u51e6\u7406\u30b5\u30fc\u30d3\u30b9\n\n```LoginService.java\n\t@Autowired\n\tprivate AuthenticationManager authManager;\n\t/** logger */\n\tprivate static final Logger logger = LoggerFactory.getLogger(LoginService.class);\n\n\t/**\n\t * \u8a8d\u8a3c\u51e6\u7406\n\t * @param loginInfo\n\t * @return\n\t */\n\tpublic AuthResult login(LoginInfoDTO loginInfo){\n\t\tAuthentication authentication = null;\n\t\tAuthResult authResult = new AuthResult();\n\t\ttry {\n\t\t\t//\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306b\u3088\u308b\u7167\u5408\u3092\u5b9f\u65bd\n\t\t\tAuthentication request = new UsernamePasswordAuthenticationToken(loginInfo.getMailaddress(), loginInfo.getPassword());\n\u3000\u3000\u3000\u3000\u3000\u3000 //\u5bfe\u8c61\u30e6\u30fc\u30b6\u304c\u5b58\u5728\u3059\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u8a8d\u8a3c\u3092\u884c\u3046\n\t\t\tauthentication = authManager.authenticate(request);\n\t\t\t//\u8a8d\u8a3cOK\u306e\u5834\u5408\u306f\u3001\u8a8d\u8a3c\u7d50\u679c\u3092contextholder\u306b\u8a2d\u5b9a\n\t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\n\t\t\t//\u8a8d\u8a3c\u6e08\u307f\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u683c\u7d0d\n\t\t\tLoginUserDetails principal = (LoginUserDetails)authentication.getPrincipal();\n\t\t\t//\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3078\u306e\u8fd4\u5374\u30c7\u30fc\u30bf\u3092\u8a2d\u5b9a\n\t\t\tauthResult.setUserName(principal.getUsername());\n\t\t\tauthResult.setPermissions(principal.getPermissions());\n\t\t\tauthResult.setRoles(principal.getAuthorities().stream().map(authority -> authority.getAuthority()).collect(Collectors.toList()));\n\t\t}\n\t\t//\u8a8d\u8a3c\u5931\u6557\u306e\u5834\u5408\n\t\tcatch (Exception e) {\n\t\t\tlogger.error(e.toString());\n\t\t}\n\t\treturn authResult;\n\t}\n```\n\u3053\u306elogin\u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3057\u3066\u3044\u308bLoginInfoDto\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u5165\u529b\u3055\u308c\u305f\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3068\u306a\u308a\u307e\u3059\u3002spring security\u3067\u306e\u8a8d\u8a3c\u51e6\u7406\u306e\u6d41\u308c\u3068\u3057\u3066\u306f\u4e0b\u8a18\u30da\u30fc\u30b8\u304c\u308f\u304b\u308a\u3084\u3059\u304b\u3063\u305f\u3067\u3059\u3002\n[spring Security 3.1 \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9 - \u30c6\u30af\u30cb\u30ab\u30eb\u30fb\u30b5\u30de\u30ea (1)](http://m12i.hatenablog.com/entry/2013/03/28/004152)\n\n\n>\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u5f97\u3089\u308c\u3001\u305d\u308c\u3089\u304cUsernamePasswordAuthenticationToken\uff08\u5148\u306b\u898b\u305fAuthentication\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u306e\u5b9f\u88c5\u306e1\u3064\u3067\u3059\uff09\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u306a\u304b\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\u3002\n\u30c8\u30fc\u30af\u30f3\u306f\u691c\u8a3c\u306e\u305f\u3081AuthenticationManager\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u6e21\u3055\u308c\u307e\u3059\u3002\n\u8a8d\u8a3c\u306b\u6210\u529f\u3059\u308b\u3068AuthenticationManager\u306f\u5341\u5168\u306a\u60c5\u5831\u3092\u8a2d\u5b9a\u3055\u308c\u305f\u72b6\u614b\u306eAuthentication\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8fd4\u3057\u307e\u3059\u3002\n\u3053\u306eAuthentication\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5f15\u6570\u306b\u3057\u3066SecurityContextHolder.getContext().setAuthentication(...)\u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u30fb\u30b3\u30fc\u30eb\u3092\u884c\u3046\u3053\u3068\u306b\u3088\u3063\u3066\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30fb\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u304c\u78ba\u7acb\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u4ee5\u964d\u3001\u30e6\u30fc\u30b6\u306f\u201c\u8a8d\u8a3c\u6e08\u307f\u3067\u3042\u308b\u201d\u3068\u898b\u306a\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u30e6\u30fc\u30b6\u540d\uff06\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u3088\u3046\u306b2\u70b9\u8a8d\u8a3c\u306e\u5834\u5408\u306f\u3001UsernamePasswordAuthenticaionToken\u30e1\u30bd\u30c3\u30c9\u3067\u826f\u3044\u3067\u3057\u3087\u3046\u3002\u3053\u308c\u304c\u30e6\u30fc\u30b6\u540d\uff06\u30d1\u30b9\u30ef\u30fc\u30c9\uff06\u793e\u54e1\u756a\u53f7\u306a\u3069\u306e\u3088\u3046\u306a3\u70b9\u8a8d\u8a3c\u306e\u5834\u5408\u306f\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n***\n- \u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u306e\u4f5c\u6210\n\n\u4eca\u56de\u306f\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u3068\u3057\u3066\u4e0b\u8a18\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u306b\u3057\u307e\u3057\u305f\u3002\u3053\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u306e\u304cLoginUserDetailsService\u30af\u30e9\u30b9\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u306e2\u3064\u306b\u95a2\u3057\u3066\u306f\u304a\u306a\u3058\u307f\u306e\u66f8\u7c4d\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n[\u306f\u3058\u3081\u3066\u306espringboot](http://www.amazon.co.jp/dp/4777518655)\n\n```LoginUserDetails.java\n@Data\npublic class LoginUserDetails extends org.springframework.security.core.userdetails.User{\n\tprivate static final long serialVersionUID = 1L;\n\t\n\t/** \u8a8d\u8a3c\u30e6\u30fc\u30b6\u540d*/\n\tprivate String name;\n\t/** \u30d1\u30b9\u30ef\u30fc\u30c9*/\n\tprivate String password;\n\t/** \u6a29\u9650\u30ea\u30b9\u30c8*/\n\tprivate List<String> permissions;\n\t/** \u30ed\u30fc\u30eb\u30ea\u30b9\u30c8*/\n\tprivate Collection<GrantedAuthority> authorities;\n\t\n\t/**\n\t * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\t * @param user\n\t */\n\tpublic LoginUserDetails(User user){\n\t\t//User\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u304b\u3089\u3001\u8a8d\u8a3c\u30e6\u30fc\u30b6\u306e\u30e6\u30fc\u30b6\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3001\u6a29\u9650\u30ea\u30b9\u30c8\u3001\u30ed\u30fc\u30eb\u30ea\u30b9\u30c8\u3092\u8a2d\u5b9a\n\t\tsuper(user.getName(), user.getEncodedPassword(), new ArrayList<GrantedAuthority>());\n\t\tname = user.getName();\n\t\tpassword = user.getEncodedPassword();\n\t\t//User -> list<Role> -> list<Permission> -> list<String>\n\t\tpermissions = user.getRoles()\n\t\t\t\t\t\t  .stream()\n\t\t\t\t\t\t  .flatMap(role -> role.getPermissions().stream()\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.map(permission -> permission.getName()))\n\t\t\t\t\t\t  .collect(Collectors.toList());\n\t\t//User -> list<Role> -> list<GrantedAuthority>\n\t\tauthorities = user.getRoles()\n\t\t\t\t\t\t.stream()\n\t\t\t\t\t\t.map(role -> new SimpleGrantedAuthority(role.getName()))\n\t\t\t\t\t\t.collect(Collectors.toList());\n\t}\n\n}\n```\n\n```LoginUserDetailsService.java\n@Service\npublic class LoginUserDetailsService implements UserDetailsService{\n\t@Autowired\n\tUserRepository repository;\n\t\n\t@Override\n\tpublic UserDetails loadUserByUsername(String mailaddress) throws UsernameNotFoundException{\n\t\t//DB\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u8a8d\u8a3c\u5bfe\u8c61\u30e6\u30fc\u30b6\u3092\u53d6\u5f97\n\t\tUser user = repository.findOne(mailaddress);\n\t\tif(user == null){\n\t\t\tthrow new UsernameNotFoundException(\"\u5bfe\u8c61\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\");\n\t\t}\n\t\t//\u53d6\u5f97\u3057\u305fUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u3082\u3068\u306bLoginUserDetails\u3092\u4f5c\u6210\u3059\u308b\n\t\treturn new LoginUserDetails(user);\n\t}\n}\n```\n1.LoginUserDetailsService\u3067\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304b\u3089User\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u53d6\u5f97\n2.\u53d6\u5f97\u3057\u305fUser\u30a8\u30f3\u30c6\u30a3\u30c6\u30a3\u3092\u5143\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\uff08LoginUserDetails\uff09\u3092\u4f5c\u6210\n\u3068\u3044\u3046\u6d41\u308c\u3067\u3059\u3002\n\n\u3053\u306e\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u60c5\u5831\u304b\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30e6\u30fc\u30b6\u540d\u3001\u6a29\u9650\u30ea\u30b9\u30c8\u3001\u30ed\u30fc\u30eb\u30ea\u30b9\u30c8\u3092\u8fd4\u5374\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n***\n- \u8a8d\u8a3c\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8RestController\n\n\u4e0a\u8a18\u306eLoginService\u3092\u547c\u3073\u51fa\u3059RestController\u5185\u5bb9\u306f\u6b21\u306e\u3068\u304a\u308a\u3002\n\n```LoginRestController.java\n@RestController\npublic class LoginRestController {\n\t\n\t@Autowired\n\tprivate LoginService loginService;\n\t\n\t/**\n\t * \u30ed\u30b0\u30a4\u30f3\u51e6\u7406\n\t * @param loginInfo\n\t * @param request\n\t * @param response\n\t * @return\n\t */\n\t@RequestMapping(value=\"/api/login\",method=RequestMethod.POST)\n\tpublic ResponseEntity<AuthResult> login(@RequestBody LoginInfoDTO loginInfo,HttpServletRequest request,HttpServletResponse response){\n\t\t//\u8a8d\u8a3c\u51e6\u7406\u3092\u5b9f\u884c\n\t\tAuthResult  authResult = loginService.login(loginInfo);\n\t\t//\u8a8d\u8a3cOK\u306e\u5834\u5408\u306fcsrf\u30c8\u30fc\u30af\u30f3\u3092\u30af\u30c3\u30ad\u30fc\u306b\u30bb\u30c3\u30c8\n\t\tif(authResult.getUserName() != null){\n\t\t\tCsrfToken csrf = (CsrfToken)request.getAttribute(CsrfToken.class.getName());\n\t\t\tif(csrf != null){\n\t\t\t\tCookie cookie = WebUtils.getCookie(request, \"XSRF-TOKEN\");\n\t\t\t\tString token = csrf.getToken();\n\t\t\t\tAuthentication authentication = SecurityContextHolder.getContext().getAuthentication();\n\t\t\t\tif((cookie == null || token != null && !token.equals(cookie.getValue())) && (authentication != null && authentication.isAuthenticated())){\n\t\t\t\t\tcookie = new Cookie(\"XSRF-TOKEN\", token);\n\t\t\t\t\tcookie.setPath(\"/\");\n\t\t\t\t\tresponse.addCookie(cookie);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn new ResponseEntity<>(authResult,null,HttpStatus.OK);\n\t\t}\n\t\t//\u8a8d\u8a3c\u5931\u6557\u6642\u306f401\u30a8\u30e9\u30fc\u3092\u8fd4\u5374\n\t\telse{\n\t\t\treturn new ResponseEntity<>(authResult,null,HttpStatus.UNAUTHORIZED);\n\t\t}\n\t}\n\t\n}\n```\n\nAngular\u3092\u4f7f\u3063\u305f\u5834\u5408\u306fCSRF\u5bfe\u7b56\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u3053\u306e\u51e6\u7406\u306b\u95a2\u3057\u3066\u306f\u4e0b\u8a18\u8a18\u4e8b\u304b\u3089\u4f7f\u308f\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n[AngularJS\u3067Spring Security](http://qiita.com/ko-aoki/items/8c4fbcbb36f458652754#%E3%83%95%E3%83%AD%E3%83%B3%E3%83%88%E3%82%A8%E3%83%B3%E3%83%89)\n***\n- SecurityConfig\n\n\u8a8d\u8a3c\u306e\u6700\u5f8c\u306bconfig\u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u3053\u3061\u3089\u3082\u4e0a\u8a18\u8a18\u4e8b\u304c\u5927\u5909\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\n```SecurityConfig.java\n@Configuration\n@EnableWebMvcSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter{\n\t\n\t@Override\n    protected void configure(HttpSecurity http) throws Exception {\n\t\thttp.authorizeRequests()\n\t\t\t//\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u4e0d\u8981\u30d1\u30b9\u3092\u8a2d\u5b9a\n\t\t\t.antMatchers(\n\t\t\t\t\t\"/index\",\n      \t\t\t\t\"/api/login\",\n      \t\t\t\t\"/webjars/**\",\n      \t\t\t\t\"/app/**/*.js\",\n      \t\t\t\t\"/app/**/*.css\",\n      \t\t\t\t\"/app/views/**.html\"\n      \t\t).permitAll()\n      \t\t//\u7ba1\u7406\u8005\u30da\u30fc\u30b8\u3078\u306eURL\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\u306e\u307f\u53ef\u80fd\n      \t\t.antMatchers(\"/admin\",\"/api/v1/users\").hasRole(\"ADMIN\")\n      \t\t//\u4e0a\u8a18\u30d1\u30b9\u610f\u5916\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306f\u5168\u3066\u8a8d\u8a3c\u304c\u5fc5\u8981\n      \t\t.anyRequest().authenticated()\n      \t//\u30ed\u30b0\u30a2\u30a6\u30c8\u8a2d\u5b9a\n      \t.and().logout()\n      \t\t//\u30ed\u30b0\u30a2\u30a6\u30c8\u5b9f\u884capi\u3092\u6307\u5b9a\n      \t\t.logoutRequestMatcher(new AntPathRequestMatcher(\"/api/logout\"))\n      \t//CSRF\u5bfe\u7b56\n      \t.and().csrf().csrfTokenRepository(csrfTokenRepository())\n      \t.and().addFilterAfter(csrfHeaderFilter(), CsrfFilter.class);\n    }\n\t\n\t//\u30bb\u30c3\u30b7\u30e7\u30f3\u30d8\u30c3\u30c0\u30fc\u306bCSRF\u30c8\u30fc\u30af\u30f3\u3092\u8a2d\u5b9a\n\tprivate CsrfTokenRepository csrfTokenRepository(){\n\t\tHttpSessionCsrfTokenRepository repository = new HttpSessionCsrfTokenRepository();\n\t\trepository.setHeaderName(\"X-XSRF-TOKEN\");\n\t\treturn repository;\n\t}\n\t\t\t\n\tprivate Filter csrfHeaderFilter() {\n\t\treturn new OncePerRequestFilter() {\n\t\t\t@Override\n\t\t\tprotected void doFilterInternal(HttpServletRequest request,\n\t\t\t\t\tHttpServletResponse response, FilterChain filterChain)\n\t\t\t\t\tthrows ServletException, IOException {\n\t\t\t\tCsrfToken csrf = (CsrfToken) request.getAttribute(CsrfToken.class\n\t\t\t\t\t\t.getName());\n\t\t\t\tif (csrf != null) {\n\t\t\t\t\tCookie cookie = WebUtils.getCookie(request, \"XSRF-TOKEN\");\n\t\t\t\t\tString token = csrf.getToken();\n\t\t\t\t\tif (cookie == null || token != null\n\t\t\t\t\t\t\t&& !token.equals(cookie.getValue())) {\n\t\t\t\t\t\tcookie = new Cookie(\"XSRF-TOKEN\", token);\n\t\t\t\t\t\tcookie.setPath(\"/\");\n\t\t\t\t\t\tresponse.addCookie(cookie);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfilterChain.doFilter(request, response);\n\t\t\t}\n\t\t};\n\t}\n\t\n\t//\u8a8d\u8a3c\u51e6\u7406\u8a2d\u5b9a\n\t@Configuration\n\tstatic class AuthenticationConfiguration extends GlobalAuthenticationConfigurerAdapter {\n\t\t//\u8a8d\u8a3c\u30e6\u30fc\u30b6\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\n\t\t@Autowired\n\t\tprivate LoginUserDetailsService userDetailService;\n\t\t\n\t\t//\u30e6\u30fc\u30b6\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3059\u308bEncoder\u8a2d\u5b9a\n\t\t//\u30d1\u30b9\u30ef\u30fc\u30c9\u30cf\u30c3\u30b7\u30e5\u306b\u7279\u5316\u3057\u305f\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0BCrypt\u3092\u6307\u5b9a\n\t\t@Bean\n\t\tPasswordEncoder passwordEncoder(){\n\t\t\treturn new BCryptPasswordEncoder();\n\t\t}\n\t\t\n\t\t//\u8a8d\u8a3c\u51e6\u7406\u8a2d\u5b9a\n\t\tpublic void init(AuthenticationManagerBuilder auth) throws Exception {\n\t\t\tauth\n\t\t\t\t//\u8a8d\u8a3c\u30e6\u30fc\u30b6\u53d6\u5f97\u30b5\u30fc\u30d3\u30b9\u3092\u6307\u5b9a\n\t\t\t\t.userDetailsService(userDetailService)\n\t\t\t\t//\u30d1\u30b9\u30ef\u30fc\u30c9\u7167\u5408\u6642\u306eEncoder\u3092\u6307\u5b9a\n\t\t\t\t.passwordEncoder(passwordEncoder());\n\t\t}\n\t}\n\n```\n\u304a\u305d\u3089\u304fspring security\u4f7f\u3044\u65b9\u3092\u8abf\u3079\u308b\u3068\u3001formLogin\u3092\u4f7f\u3063\u305f\u4f8b\u3092\u3088\u304f\u898b\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u304c\u4eca\u56de\u306fCSRF\u5bfe\u7b56\u3092\u3059\u308b\u305f\u3081\u306b\u5225\u9014\u30ed\u30b0\u30a4\u30f3\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u306b\u95a2\u3059\u308b\u8a2d\u5b9a\u306f\u8a18\u8ff0\u3057\u307e\u305b\u3093\u3002\nindex.html\u3092\u8aad\u307f\u8fbc\u3080\u3068\u304d\u306b\u5fc5\u8981\u306acss\u3084js\u306f\u8a8d\u8a3c\u305b\u305a\u306b\u547c\u3073\u51fa\u305b\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3001\u7ba1\u7406\u8005\u30da\u30fc\u30b8\u3084\u30c7\u30fc\u30bf\u53d6\u5f97\u6642\u306eAPI\u30a2\u30c9\u30ec\u30b9\u306fROLE_ADMIN\u6a29\u9650\u304c\u306a\u3051\u308c\u3070\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u3002\n\nAuthenticationConfiguration\u306b\u3064\u3044\u3066\u306f\u3001\u66f8\u7c4d\u300c\u306f\u3058\u3081\u3066\u306espringboot\u300d\u306e\u307e\u307e\u3067\u3059\u306d\u3002\n\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u3066DB\u306b\u683c\u7d0d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u3056\u3063\u304f\u308a\u3068\u3067\u3059\u304c\u8a8d\u8a3c\u306f\u3053\u3093\u306a\u3068\u3053\u308d\u3067\u3057\u3087\u3046\u304b\u3002\n### \u8a8d\u53ef\uff08\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\uff09\n***\n\u753b\u9762\u9077\u79fb\u3084\u30dc\u30bf\u30f3\u8868\u793a\u5236\u5fa1\u306a\u3069\u306e\u8a8d\u53ef\u306b\u3064\u3044\u3066\u306f\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\u8a8d\u8a3c\u7d50\u679c\u3068\u3057\u3066\u53d6\u5f97\u3057\u305f\u6a29\u9650\u30ea\u30b9\u30c8\u3092\u5143\u306b\u8a8d\u53ef\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\n- \u30dc\u30bf\u30f3\u8868\u793a\u5236\u5fa1\n\n```home.html\n<li ng-if=\"HomeCtrl.hasPermission('manageUser')\"><a ng-click=\"HomeCtrl.goAdminPage()\">\u7ba1\u7406\u30da\u30fc\u30b8</a></li>\n<li><p class=\"navbar-text\">{{HomeCtrl.userName}}</p></li>\n<li ><a ng-click=\"HomeCtrl.logout()\"><i class=\"fa fa-power-off\"/></a></li>\n```\n```HomeController.js\nself.hasPermission = function(targetPermission){\n  return LoginUserService.hasPermission(targetPermission);\n}\n```\n```LoginUserService.js\n(function(){\n\t'use strict';\n\n\tfunction LoginUserService($localStorage){\n\n\t\tvar loginUserService = {\n\t\t\t/**\n\t\t\t * \u6307\u5b9a\u3055\u308c\u305f\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\n\t\t\t * @param  {[type]}  targetPermission\n\t\t\t * @return {Boolean}                 \n\t\t\t */\n\t\t\thasPermission: function(targetPermission){\n\t\t\t\tfor(var i=0; i<$localStorage.userinfo.permissions.length; i++){\n\t\t\t\t\tif($localStorage.userinfo.permissions[i] === targetPermission){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn loginUserService;\n\t}\n\n\tangular.module(demoApp).factory('LoginUserService',['$localStorage',LoginUserService]);\n})();\n```\nlocalStorage\u306b\u683c\u7d0d\u3057\u3066\u3042\u308b\u8a8d\u8a3c\u60c5\u5831\u306b\u6307\u5b9a\u3055\u308c\u305f\u6a29\u9650\u304c\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u3044\u308b\u3060\u3051\u3067\u3059\u306d\u3002\nlocalStorage\u3078\u306e\u683c\u7d0d\u65b9\u6cd5\u306fngStorage\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n[ngStorage](https://github.com/gsklee/ngStorage)\n\n\u7ba1\u7406\u8005\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u5834\u5408\n![\u7ba1\u7406\u8005\u6a29\u9650.png](https://qiita-image-store.s3.amazonaws.com/0/118585/8cff2c1f-da6f-882c-a8c1-ddd6b97aa219.png)\n\n\n\u7ba1\u7406\u8005\u6a29\u9650\u304c\u306a\u3044\u5834\u5408\n![\u7ba1\u7406\u8005\u6a29\u9650\u306a\u3057.png](https://qiita-image-store.s3.amazonaws.com/0/118585/16e4cc1a-55af-8df2-02eb-bce3e2ba6b89.png)\n\n\n***\n- \u753b\u9762\u9077\u79fb\u6642\n\n\n\u7d9a\u3044\u3066\u753b\u9762\u9077\u79fb\u6642\u306e\u8a8d\u53ef\u306b\u3064\u3044\u3066\u306f\u3001run\u30e1\u30bd\u30c3\u30c9\u3067\u5b9a\u7fa9\u3057\u307e\u3057\u305f\u3002\nui-router\u306e$stateChangeStart\u3068\u3044\u3046\u30a4\u30d9\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u3001state\u304c\u5909\u5316\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u51e6\u7406\u3092\u767a\u706b\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305d\u306e\u4e2d\u3067\u6307\u5b9a\u3055\u308c\u305f\u6a29\u9650\u304clocalStorage\u306b\u3042\u308b\u304b\u30c1\u30a7\u30c3\u30af\u3057\u3001\u306a\u3051\u308c\u3070\u9077\u79fb\u3055\u305b\u306a\u3044\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n\n```run.js\n\tfunction run($rootScope,$state,$localStorage,LoginUserService){\n\t\t$rootScope.$on('$stateChangeStart',function(e,toState,toParams,fromState,fromParams){\n\n\t\t\t// \u7ba1\u7406\u8005\u30da\u30fc\u30b8\u306b\u9077\u79fb\u3059\u308b\u5834\u5408\n\t\t\tif(toState.name == 'admin'){\n\t\t\t\t// admin\u6a29\u9650\u304c\u306a\u3044\u5834\u5408\u306f\u9077\u79fb\u3055\u305b\u306a\u3044\n\t\t\t\tif(!LoginUserService.hasPermission('manageUser')){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\talert('\u6a29\u9650\u304c\u3042\u308a\u307e\u305b\u3093');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u306b\u9077\u79fb\u3059\u308b\u5834\u5408\uff08\u30d6\u30e9\u30a6\u30b6\u30d0\u30c3\u30af\u6642\u306e\u5bfe\u5fdc\u3068\u3057\u3066\uff09\n\t\t\tif(toState.name == 'login'){\n\t\t\t\t// \u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u306e\u5834\u5408\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u307e\u3067\u9077\u79fb\u3055\u305b\u306a\u3044\n\t\t\t\tif($localStorage.userinfo){\n\t\t\t\t\t$state.go('home'); //\u30db\u30fc\u30e0\u753b\u9762\u306b\u9077\u79fb\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// \u30db\u30fc\u30e0\u753b\u9762\u306b\u9077\u79fb\u3059\u308b\u5834\u5408\uff08\u672a\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u30db\u30fc\u30e0\u753b\u9762\u3078\u306eURL\u3092\u76f4\u63a5\u5165\u529b\u3055\u308c\u305f\u5834\u5408\u306e\u5bfe\u5fdc\u3068\u3057\u3066\uff09\n\t\t\tif(toState.name == 'home'){\n\t\t\t\tif(!$localStorage.userinfo){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\talert('\u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u304f\u3060\u3055\u3044');\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\t}\n```\n\u3053\u3053\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u30d6\u30e9\u30a6\u30b6\u30d0\u30c3\u30af\u3067\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u307e\u3067\u623b\u3063\u3066\u3057\u307e\u3046\u5834\u5408\u3084\u30db\u30fc\u30e0\u753b\u9762\u3078\u306eURL\u304c\u76f4\u63a5\u5165\u529b\u3055\u308c\u305f\u5834\u5408\u3082\u6a29\u9650\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3088\u3046\u306a\u51e6\u7406\u3068\u3057\u307e\u3057\u305f\u3002\n\uff08\u753b\u9762\u6570\u304c\u591a\u3044\u5834\u5408\u306f\u3053\u3046\u3057\u3066\u5b9a\u7fa9\u3059\u308b\u306e\u306f\u7169\u96d1\u3067\u3059\u306d\u30fb\u30fb\u30fb\uff09\n\n\u53c2\u8003\u8a18\u4e8b\u306f\u3053\u3061\u3089\n[ui-router \u3092\u4f7f\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u5fc5\u9808\u306estate\u3092\u4f5c\u308b](http://qiita.com/ooharabucyou/items/65f52646d721da5b2032)\n\n***\n**localStorage\u3092\u4f7f\u3063\u305f\u8a8d\u53ef\u306e\u8ab2\u984c**\nlocalStorage\u306e\u5834\u5408\u306f\u30d6\u30e9\u30a6\u30b6\u958b\u767a\u8005\u30c4\u30fc\u30eb\u3067\u5024\u3092\u5909\u66f4\u3067\u304d\u308b\u305f\u3081\u3001\u4e0d\u9069\u5207\u306a\u8a8d\u53ef\u304c\u53ef\u80fd\u3068\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u305d\u308c\u304c\u5acc\u3067\u3042\u308c\u3070\u8a8d\u53ef\u304c\u5fc5\u8981\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u3001\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\u3088\u3046\u306a\u51e6\u7406\u304c\u5fc5\u8981\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u305d\u308c\u306f\u305d\u308c\u3067\u30b5\u30fc\u30d0\u30fc\u3068\u306e\u30a2\u30af\u30bb\u30b9\u304c\u5897\u3048\u3001\u30e6\u30fc\u30b6\u4f53\u9a13\u3082\u640d\u306a\u308f\u308c\u308b\u6c17\u304c\u3057\u307e\u3059\u3002\n\u306a\u306e\u3067\u4eca\u56de\u306f\u30c7\u30fc\u30bf\u53d6\u5f97API\u3078\u306e\u8a8d\u53ef\u3092\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u62c5\u4fdd\u3059\u308b\u3053\u3068\u3067\u3001\u753b\u9762\u9077\u79fb\u3092\u4e0d\u6b63\u306b\u3067\u304d\u3066\u3057\u307e\u3046\u306e\u306f\u5bb9\u8a8d\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002\n"}