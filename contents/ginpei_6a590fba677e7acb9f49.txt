{"context": " More than 1 year has passed since last update.(\u30fb\u0398\u30fb) oO( mixin\u3068\u8a00\u3046\u306e\u304b\u3069\u3046\u304b\u3088\u304f\u308f\u304b\u3093\u306a\u3044\u3051\u3069\u3002 )\n\u5358\u7d14\u306bon\u3068trigger\u3060\u3051\u3002\u30a4\u30d9\u30f3\u30c8\u306f\u5b8c\u5168\u4e00\u81f4\u3067\u691c\u7d22\u3059\u308b\u306e\u3067\uff08\u624b\u629c\u304d\uff09\u3001\u4f8b\u3048\u3070change:name\u306fchange\u3067\u306f\u62fe\u3048\u306a\u3044\u3002\n\n\u30c7\u30e2\n\nhttp://jsfiddle.net/ginpei/Kd8S9/\n\n\n\u30b3\u30fc\u30c9\n\nlib/eventer.js\n// By Takanashi Ginpei; MIT License\n/**\n * \n * \u30a4\u30d9\u30f3\u30c8\u307e\u308f\u308a\u306e\u51e6\u7406\u3002\n * @mixin\n * @sample\n * var obj = _.extend({}, _eventer, {\n *   // \u2026\n * });\n *\n * obj.on('foo', function(a, b) {\n *   console.log(a, b, this.c);  // 'A', true, 123\n * }, { c:123 });\n * obj.trigger('A', true);\n */\nvar _eventer = {\n    _listeners: null,\n\n    /**\n     * \u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3055\u305b\u308b\u3002\n     * @param {String} type\n     */\n    trigger: function(type /* , ... */) {\n        if (this._listeners && type in this._listeners) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            var listeners = this._listeners[type];\n            for (var i=0, l=listeners.length; i<l; i++) {\n                listeners[i].apply(this, args);\n            }\n        }\n    },\n\n    /**\n     * \u30a4\u30d9\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\u3002\n     * @param {String} type\n     * @param {Function} listeners\n     * @param {Object} [context]\n     */\n    on: function(type, listener, context) {\n        if (context) {\n            listener = listener.bind(context);\n        }\n\n        if (!this._listeners) {\n            this._listeners = {};\n        }\n\n        if (!(type in this._listeners)) {\n            this._listeners[type] = [];\n        }\n\n        this._listeners[type].push(listener);\n    }\n};\n\n\n\nlib/eventer.min.js\n// By Takanashi Ginpei; MIT License\nvar _eventer={_listeners:null,trigger:function(e){if(this._listeners&&e in this._listeners){var t=Array.prototype.slice.call(arguments,1);var n=this._listeners[e];for(var r=0,i=n.length;r<i;r++){n[r].apply(this,t)}}},on:function(e,t,n){if(n){t=t.bind(n)}if(!this._listeners){this._listeners={}}if(!(e in this._listeners)){this._listeners[e]=[]}this._listeners[e].push(t)}}\n\n\n\n\u4f7f\u7528\u4f8b\n\ndemo/timer.js\n// \u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\nvar timer = Object.create(_eventer);\ntimer.startedAt = Date.now();\ntimer.el = document.getElementById('timer');\ntimer.update = function() {\n    var elTimer = this.el;\n    if (elTimer.firstChild) {\n        elTimer.removeChild(elTimer.firstChild);\n    }\n    elTimer.appendChild(document.createTextNode(Date.now()-this.startedAt));\n};\n\n// \u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306e\u51e6\u7406\ntimer.on('changetime', timer.update, timer);\n\n// \u5b9a\u671f\u7684\u306b\u30a4\u30d9\u30f3\u30c8\u767a\u706b\nsetInterval(function() {\n    timer.trigger('changetime');\n}, 1);\n\n\n(\u30fb\u0398\u30fb) oO( mixin\u3068\u8a00\u3046\u306e\u304b\u3069\u3046\u304b\u3088\u304f\u308f\u304b\u3093\u306a\u3044\u3051\u3069\u3002 )\n\n\u5358\u7d14\u306b`on`\u3068`trigger`\u3060\u3051\u3002\u30a4\u30d9\u30f3\u30c8\u306f\u5b8c\u5168\u4e00\u81f4\u3067\u691c\u7d22\u3059\u308b\u306e\u3067\uff08\u624b\u629c\u304d\uff09\u3001\u4f8b\u3048\u3070`change:name`\u306f`change`\u3067\u306f\u62fe\u3048\u306a\u3044\u3002\n\n# \u30c7\u30e2\n\n* http://jsfiddle.net/ginpei/Kd8S9/\n\n# \u30b3\u30fc\u30c9\n\n```js:lib/eventer.js\n// By Takanashi Ginpei; MIT License\n/**\n * \n * \u30a4\u30d9\u30f3\u30c8\u307e\u308f\u308a\u306e\u51e6\u7406\u3002\n * @mixin\n * @sample\n * var obj = _.extend({}, _eventer, {\n *   // \u2026\n * });\n *\n * obj.on('foo', function(a, b) {\n *   console.log(a, b, this.c);  // 'A', true, 123\n * }, { c:123 });\n * obj.trigger('A', true);\n */\nvar _eventer = {\n    _listeners: null,\n\n    /**\n     * \u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3055\u305b\u308b\u3002\n     * @param {String} type\n     */\n    trigger: function(type /* , ... */) {\n        if (this._listeners && type in this._listeners) {\n            var args = Array.prototype.slice.call(arguments, 1);\n            var listeners = this._listeners[type];\n            for (var i=0, l=listeners.length; i<l; i++) {\n                listeners[i].apply(this, args);\n            }\n        }\n    },\n\n    /**\n     * \u30a4\u30d9\u30f3\u30c8\u3092\u76e3\u8996\u3059\u308b\u3002\n     * @param {String} type\n     * @param {Function} listeners\n     * @param {Object} [context]\n     */\n    on: function(type, listener, context) {\n        if (context) {\n            listener = listener.bind(context);\n        }\n\n        if (!this._listeners) {\n            this._listeners = {};\n        }\n\n        if (!(type in this._listeners)) {\n            this._listeners[type] = [];\n        }\n\n        this._listeners[type].push(listener);\n    }\n};\n```\n\n```js:lib/eventer.min.js\n// By Takanashi Ginpei; MIT License\nvar _eventer={_listeners:null,trigger:function(e){if(this._listeners&&e in this._listeners){var t=Array.prototype.slice.call(arguments,1);var n=this._listeners[e];for(var r=0,i=n.length;r<i;r++){n[r].apply(this,t)}}},on:function(e,t,n){if(n){t=t.bind(n)}if(!this._listeners){this._listeners={}}if(!(e in this._listeners)){this._listeners[e]=[]}this._listeners[e].push(t)}}\n```\n\n# \u4f7f\u7528\u4f8b\n\n```js:demo/timer.js\n// \u30a4\u30d9\u30f3\u30c8\u51e6\u7406\u3092\u6301\u3064\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\nvar timer = Object.create(_eventer);\ntimer.startedAt = Date.now();\ntimer.el = document.getElementById('timer');\ntimer.update = function() {\n    var elTimer = this.el;\n    if (elTimer.firstChild) {\n        elTimer.removeChild(elTimer.firstChild);\n    }\n    elTimer.appendChild(document.createTextNode(Date.now()-this.startedAt));\n};\n\n// \u30a4\u30d9\u30f3\u30c8\u767a\u706b\u6642\u306e\u51e6\u7406\ntimer.on('changetime', timer.update, timer);\n\n// \u5b9a\u671f\u7684\u306b\u30a4\u30d9\u30f3\u30c8\u767a\u706b\nsetInterval(function() {\n    timer.trigger('changetime');\n}, 1);\n```", "tags": ["JavaScript", "snippets"]}