{"tags": ["Python", "python2.7", "HTML5", "Twitter", "TwitterAPI"], "context": " More than 1 year has passed since last update.\u601d\u3044\u3064\u304f\u307e\u307e\u306b\u624b\u3092\u52d5\u304b\u3057\u305f\u306e\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u8eab\u306f\u6c5a\u3044\u3057\u3001.tpl\u30d5\u30a1\u30a4\u30eb\uff11\u3064\u3060\u3057\u3067\u5de5\u592b\u3082\u4f55\u3082\u306a\u3044\u3002TL\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u53d6\u5f97\u3057\u305f\u308a\u3001\u691c\u7d22\u6a5f\u80fd\u3092\u3064\u3051\u305f\u308a\u8272\u3005\u904a\u3079\u308b\u306e\u3067\u3069\u3046\u305e\u3002\n\nindex.py\n\n#!/user/bin/env python\n# -*- coding: utf-8 -*-\nfrom bottle import route, run, template, request, static_file, url, get, post, response, error\nfrom requests_oauthlib import OAuth1Session\nimport json\nimport requests\nimport time, calendar\nimport datetime\nfrom datetime import timedelta\nfrom datetime import datetime\nimport pytz\ntoday = datetime.now(pytz.timezone('Asia/Tokyo'))\nimport sys, codecs\nsys.stdout = codecs.getwriter(\"utf-8\")(sys.stdout)\n\n@route(\"/\")\ndef title():\n\n    C_KEY = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n    C_SECRET = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n    A_KEY = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n    A_SECRET = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n\n    search_words = u\"\u30af\u30ea\u30b9\u30de\u30b9\"\n\n    url = \"https://api.twitter.com/1.1/search/tweets.json?\"\n    params = {\n                \"q\": (search_words, \"utf-8\"),\n                \"lang\": \"ja\",\n                \"result_type\": \"recent\",\n                \"count\": \"100\"\n                }\n    tw = OAuth1Session(C_KEY,C_SECRET,A_KEY,A_SECRET)\n    req = tw.get(url, params = params)\n    tweets = json.loads(req.text)\n    for tweet in tweets[\"statuses\"]:\n        Created_at = YmdHMS(tweet[\"created_at\"])\n        User = (tweet[\"user\"][\"screen_name\"].encode(\"utf-8\"))\n        Name = (tweet[\"user\"][\"name\"].encode(\"utf-8\"))\n        Text = (tweet[\"text\"].encode(\"utf-8\"))\n        U_img = (tweet[\"user\"][\"profile_image_url\"])\n\n    return template(\"main\", Created_at=Created_at, User=User, Name=Name, Text=Text)\n\n\ndef YmdHMS(created_at):\n    time_utc = time.strptime(created_at, '%a %b %d %H:%M:%S +0000 %Y')\n    unix_time = calendar.timegm(time_utc)\n    time_local = time.localtime(unix_time)\n    return int(time.strftime(\"%Y%m%d%H%M%S\", time_local))\n\n\nrun(host='localhost', port=8000, debug=True, reloader=True)\n\n\n\nmain.tpl\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n\n<title>StarTwit</title>\n</head>\n\n<body>\n\n\n\n  <style>\n  body{\n      background: #000;\n  }\n  #titles{\n      position: absolute;\n      width: 18em;\n      height: 50em;\n      bottom: 0;\n      left: 50%;\n      margin-left: -9em;\n      font-size: 350%;\n      font-weight: bold;\n      text-align: justify;\n      overflow: hidden;\n      color: #fff;\n      transform-origin: 50% 100%;\n      transform: perspective(300px) rotateX(25deg);\n  }\n  #titles:after{\n      position: absolute;\n      content: ' ';\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 60%;\n      background-image: linear-gradient(top, rgba(0,0,0,1) 0%, transparent 100%);\n      pointer-events: none;\n  }\n  #titlecontent{\n      position: absolute;\n      top: 100%;\n      color: #fff;\n      animation: scroll 100s linear 4s infinite;\n  }\n  @keyframes scroll {\n      0% { top: 100%; }\n      100% { top: -170%; }\n  }\n  </style>\n  <div id=\"titles\"><div id=\"titlecontent\">\n    <ul>\n      <li>{{Created_at}}</li>\n      <li>{{User}}:{{Name}}</li>\n      <li>{{Text}}</li>\n    </ul>\n\n  </div></div>\n  </body>\n  </html>\n\n\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u5b9f\u88c5\u3055\u308c\u307e\u3059\u3002\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u306b\u914d\u616e\u3057\u307e\u3057\u305f\u3002\n\u601d\u3044\u3064\u304f\u307e\u307e\u306b\u624b\u3092\u52d5\u304b\u3057\u305f\u306e\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4e2d\u8eab\u306f\u6c5a\u3044\u3057\u3001.tpl\u30d5\u30a1\u30a4\u30eb\uff11\u3064\u3060\u3057\u3067\u5de5\u592b\u3082\u4f55\u3082\u306a\u3044\u3002TL\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3067\u53d6\u5f97\u3057\u305f\u308a\u3001\u691c\u7d22\u6a5f\u80fd\u3092\u3064\u3051\u305f\u308a\u8272\u3005\u904a\u3079\u308b\u306e\u3067\u3069\u3046\u305e\u3002\n\n```index.py\n\n#!/user/bin/env python\n# -*- coding: utf-8 -*-\nfrom bottle import route, run, template, request, static_file, url, get, post, response, error\nfrom requests_oauthlib import OAuth1Session\nimport json\nimport requests\nimport time, calendar\nimport datetime\nfrom datetime import timedelta\nfrom datetime import datetime\nimport pytz\ntoday = datetime.now(pytz.timezone('Asia/Tokyo'))\nimport sys, codecs\nsys.stdout = codecs.getwriter(\"utf-8\")(sys.stdout)\n\n@route(\"/\")\ndef title():\n\n\tC_KEY = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n\tC_SECRET = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n\tA_KEY = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n\tA_SECRET = \"\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\uff0a\"\n\n\tsearch_words = u\"\u30af\u30ea\u30b9\u30de\u30b9\"\n\n\turl = \"https://api.twitter.com/1.1/search/tweets.json?\"\n\tparams = {\n\t\t\t\t\"q\": (search_words, \"utf-8\"),\n\t\t\t\t\"lang\": \"ja\",\n\t\t\t\t\"result_type\": \"recent\",\n\t\t\t\t\"count\": \"100\"\n\t\t\t\t}\n\ttw = OAuth1Session(C_KEY,C_SECRET,A_KEY,A_SECRET)\n\treq = tw.get(url, params = params)\n\ttweets = json.loads(req.text)\n\tfor tweet in tweets[\"statuses\"]:\n\t\tCreated_at = YmdHMS(tweet[\"created_at\"])\n\t\tUser = (tweet[\"user\"][\"screen_name\"].encode(\"utf-8\"))\n\t\tName = (tweet[\"user\"][\"name\"].encode(\"utf-8\"))\n\t\tText = (tweet[\"text\"].encode(\"utf-8\"))\n\t\tU_img = (tweet[\"user\"][\"profile_image_url\"])\n\n\treturn template(\"main\", Created_at=Created_at, User=User, Name=Name, Text=Text)\n\n\ndef YmdHMS(created_at):\n    time_utc = time.strptime(created_at, '%a %b %d %H:%M:%S +0000 %Y')\n    unix_time = calendar.timegm(time_utc)\n    time_local = time.localtime(unix_time)\n    return int(time.strftime(\"%Y%m%d%H%M%S\", time_local))\n\n\nrun(host='localhost', port=8000, debug=True, reloader=True)\n```\n\n```main.tpl\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n\n<title>StarTwit</title>\n</head>\n\n<body>\n\n\n\n  <style>\n  body{\n      background: #000;\n  }\n  #titles{\n      position: absolute;\n      width: 18em;\n      height: 50em;\n      bottom: 0;\n      left: 50%;\n      margin-left: -9em;\n      font-size: 350%;\n      font-weight: bold;\n      text-align: justify;\n      overflow: hidden;\n      color: #fff;\n      transform-origin: 50% 100%;\n      transform: perspective(300px) rotateX(25deg);\n  }\n  #titles:after{\n      position: absolute;\n      content: ' ';\n      left: 0;\n      right: 0;\n      top: 0;\n      bottom: 60%;\n      background-image: linear-gradient(top, rgba(0,0,0,1) 0%, transparent 100%);\n      pointer-events: none;\n  }\n  #titlecontent{\n      position: absolute;\n      top: 100%;\n      color: #fff;\n      animation: scroll 100s linear 4s infinite;\n  }\n  @keyframes scroll {\n      0% { top: 100%; }\n      100% { top: -170%; }\n  }\n  </style>\n  <div id=\"titles\"><div id=\"titlecontent\">\n    <ul>\n      <li>{{Created_at}}</li>\n      <li>{{User}}:{{Name}}</li>\n      <li>{{Text}}</li>\n    </ul>\n\n  </div></div>\n  </body>\n  </html>\n```\n\n![img.jpg](https://qiita-image-store.s3.amazonaws.com/0/71585/60ecfa83-ff15-d3c2-8740-685400fcf5a2.jpeg)\n\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u5b9f\u88c5\u3055\u308c\u307e\u3059\u3002\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u306b\u914d\u616e\u3057\u307e\u3057\u305f\u3002\n"}