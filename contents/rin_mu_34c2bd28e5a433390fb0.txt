{"tags": ["Ruby", "Rails", "MongoDB", "mongoid"], "context": "MongoDB\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092Mongoid\u304b\u3089\u500b\u5225\u306b\u524a\u9664\u3059\u308b\u65b9\u6cd5\u3092\u8abf\u3079\u305f\u306e\u3067\u3001\u3053\u308c\u3092\u671f\u306bMongoid\u7d4c\u7531\u3067\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u64cd\u4f5c\u3092\u307e\u3068\u3081\u3066\u304a\u304f\u3002\n\n\u30e2\u30c7\u30eb\u5168\u4f53\nrake\u30bf\u30b9\u30af\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u305d\u308c\u3092\u4f7f\u3046\nbundle exec rake db:mongoid:create_indexes\nbundle exec rake db:mongoid:remove_indexes\n\n\n\u5358\u4e00\u306e\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\n\u3053\u3053\u304b\u3089\u306frails c\u3068\u304b\u3067\u3002\nAccount.create_indexes\nAccount.remove_indexes\n\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u500b\u5225\u306b\u524a\u9664\u3057\u305f\u3044\u5834\u5408\n\u307e\u305a\u306f\u65e2\u5b58\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u4e00\u89a7\u3092\u53d6\u5f97\u3002\nAccount.collection.indexes.to_a\n\n\u3053\u3093\u306a\u7d50\u679c\u304c\u5e30\u3063\u3066\u304f\u308b\u3002\n[{\"v\"=>1, \"key\"=>{\"_id\"=>1}, \"name\"=>\"_id_\",    \"ns\"=>\"database_name.accounts\"},\n {\"v\"=>1, \"key\"=>{\"name\"=>1}, \"name\"=>\"name_1\", \"background\"=>true, \"ns\"=>\"database_name.accounts\"},\n{\"v\"=>1, \"key\"=>{\"email\"=>1}, \"name\"=>\"email_1\", \"background\"=>true, \"ns\"=>\"database_name.accounts\"}]\n\n\u524a\u9664\u3057\u305f\u3044key\u3092\u6307\u5b9a\u3057\u3066drop\u3092\u547c\u3079\u3070OK\u3002\nAccount.collection.indexes.drop({\"name\"=>1})\n\nMongoDB\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092Mongoid\u304b\u3089\u500b\u5225\u306b\u524a\u9664\u3059\u308b\u65b9\u6cd5\u3092\u8abf\u3079\u305f\u306e\u3067\u3001\u3053\u308c\u3092\u671f\u306bMongoid\u7d4c\u7531\u3067\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u64cd\u4f5c\u3092\u307e\u3068\u3081\u3066\u304a\u304f\u3002\n\n## \u30e2\u30c7\u30eb\u5168\u4f53\n\nrake\u30bf\u30b9\u30af\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u306e\u305d\u308c\u3092\u4f7f\u3046\n\n```\nbundle exec rake db:mongoid:create_indexes\nbundle exec rake db:mongoid:remove_indexes\n```\n\n## \u5358\u4e00\u306e\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066\n\n\u3053\u3053\u304b\u3089\u306f`rails c`\u3068\u304b\u3067\u3002\n\n```ruby\nAccount.create_indexes\nAccount.remove_indexes\n```\n\n## \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u500b\u5225\u306b\u524a\u9664\u3057\u305f\u3044\u5834\u5408\n\n\u307e\u305a\u306f\u65e2\u5b58\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u4e00\u89a7\u3092\u53d6\u5f97\u3002\n\n```ruby\nAccount.collection.indexes.to_a\n```\n\n\u3053\u3093\u306a\u7d50\u679c\u304c\u5e30\u3063\u3066\u304f\u308b\u3002\n\n```ruby\n[{\"v\"=>1, \"key\"=>{\"_id\"=>1}, \"name\"=>\"_id_\",    \"ns\"=>\"database_name.accounts\"},\n {\"v\"=>1, \"key\"=>{\"name\"=>1}, \"name\"=>\"name_1\", \"background\"=>true, \"ns\"=>\"database_name.accounts\"},\n{\"v\"=>1, \"key\"=>{\"email\"=>1}, \"name\"=>\"email_1\", \"background\"=>true, \"ns\"=>\"database_name.accounts\"}]\n```\n\n\u524a\u9664\u3057\u305f\u3044key\u3092\u6307\u5b9a\u3057\u3066drop\u3092\u547c\u3079\u3070OK\u3002\n\n```ruby\nAccount.collection.indexes.drop({\"name\"=>1})\n```\n"}