{"context": "\n\n\u306f\u3058\u3081\u306b\nAndroid\u30a2\u30d7\u30ea\u306e\u30d3\u30eb\u30c9\u3001Emulator\u7528AVD\u306e\u4f5c\u6210\u3001Emualtor\u306e\u8d77\u52d5\u3001UI\u30c6\u30b9\u30c8\u3092\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u5b9f\u65bd\u3059\u308b\u5b9f\u9a13\u3092\u3057\u305f\u304c\u5931\u6557\u3057\u305f\u3002\nEmulator\u306e\u8d77\u52d5\u306e\u3068\u3053\u308d\u3067KVM\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308a\u3001\u3069\u3046\u3084\u3089\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u52d5\u4f5c\u3055\u305b\u308b\u306e\u306f\u7121\u7406\u307e\u305f\u306f\u4e00\u822c\u7684\u3067\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u3053\u3053\u3067\u4e2d\u65ad\u3068\u3059\u308b\u3002\n\n\u7d50\u8ad6\nCLI\u3067\u306eEmulator\u8d77\u52d5\uff0b\u30c6\u30b9\u30c8\u306f\u53ef\u80fd\u3060\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u306e\u5b9f\u65bd\u306f\u4e00\u822c\u7684\u3067\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u5225\u306e\u65b9\u6cd5\u3092\u691c\u8a0e\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3002\n\u4eca\u5f8c\u306f\u3001Emulator\u7121\u3057\u3067\u53ef\u80fd\u306a\u30c6\u30b9\u30c8\u3068\u3001Emulator\u6709\u308a\u3067\u53ef\u80fd\u306a\u30c6\u30b9\u30c8\u306e\u305d\u308c\u305e\u308c\u3067\u8abf\u67fb\u3092\u3057\u3066\u3044\u304f\u3002\n\u307e\u305f\u3001Emulator\u6709\u308a\u306e\u30c6\u30b9\u30c8\u306b\u3064\u3044\u3066\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u4ee5\u5916\u306e\u65b9\u6cd5\u3068\u3057\u3066\u3001\nSakura VPS\u3067\u306eVM on VM\u3084\u3001\u81ea\u5b85\u30b5\u30fc\u30d0\u4e0a\u3067\u306e\u30c6\u30b9\u30c8\u304c\u5019\u88dc\u306b\u6319\u3052\u3089\u308c\u308b\u3002\n\n\u74b0\u5883\n\u30db\u30b9\u30c8OS\n$ docker -v\nDocker version 1.7.1, build 786b29d/1.7.1\n\n\u30b3\u30f3\u30c6\u30ca\u5185\n# uname -a\nLinux a7f955bd9c05 3.10.0-327.el7.x86_64 #1 SMP Thu Nov 19 22:10:57 UTC 2015 x86_64 GNU/Linux\n# java -version\nopenjdk version \"1.8.0_91\"\nOpenJDK Runtime Environment (build 1.8.0_91-8u91-b14-1~bpo8+1-b14)\nOpenJDK 64-Bit Server VM (build 25.91-b14, mixed mode)\n\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\n\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\u3002\nsudo docker pull gfx2015/android:latest\nsudo docker run -it gfx2015/android  \n\n\n\u8ffd\u52a0\u306eAndroid-SDK\u3092\u8ffd\u52a0\nandroid update sdk -u -a -t android-20\nandroid update sdk -a --no-ui --filter source-22      \nandroid update sdk -a --no-ui --filter android-22\nandroid update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\n\n\n\u30d3\u30eb\u30c9\u306e\u78ba\u8a8d\ncd /home\ngit clone http://xxxxxxxxxxxxxxxxxxxx.git\n./gradlew clean && ./gradlew build\n\n\nAVD\u306e\u4f5c\u6210\nandroid create avd --name myandroid22 -t \"android-22\" --abi \"default/x86_64\"\n\n\nEmulator\u306e\u8d77\u52d5\nAVD\u3092\u4f5c\u6210\u3067\u304d\u305f\u306e\u3067\u3001Emulator\u3092\u8d77\u52d5\u3055\u305b\u308b\u3002\nkvm\u304c\u5fc5\u8981\u3089\u3057\u3044\u3002\nroot@b1aeb9a769e1:/home# emulator -avd myandroid22 -force-32bit\nemulator: WARNING: Increasing RAM size to 1GB\nemulator: ERROR: x86_64 emulation currently requires hardware acceleration!\nPlease ensure KVM is properly installed and usable.\nCPU acceleration status: KVM is not installed on this machine (/dev/kvm is missing).\n\nkvm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nroot@b1aeb9a769e1:/home# apt-get install kvm\n\nkvm\u304c\u3046\u307e\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u69d8\u5b50\u3002\n\u305f\u3060\u3001\u305d\u3082\u305d\u3082LXC\u4e0a\u306a\u306e\u3067\u3001\u3053\u3053\u3067kvm\u304c\u52d5\u4f5c\u3059\u308b\u306e\u304b\u304c\u4e0d\u660e\u3002\nroot@b1aeb9a769e1:/home# emulator -avd myandroid22 -force-32bit\nemulator: WARNING: Increasing RAM size to 1GB\nemulator: ERROR: x86_64 emulation currently requires hardware acceleration!\nPlease ensure KVM is properly installed and usable.\nCPU acceleration status: KVM is not installed on this machine (/dev/kvm is missing).\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u30c7\u30fc\u30e2\u30f3\u30e2\u30fc\u30c9\u3067\u306a\u3044\u3053\u3068\u3001\n\u6a29\u9650\u7121\u8996\u30d5\u30e9\u30b0\u304c\u4ed8\u3044\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u308c\u3092\u3064\u3051\u3066\u30c7\u30fc\u30e2\u30f3\u304c\u52d5\u4f5c\u3059\u308b\u72b6\u614b\u306b\u3057\u3066\u518d\u8a66\u884c\u3059\u308b\u3002\nsudo docker commit b1aeb9a769e1 temp/android_emulator\nsudo docker run -d temp/android_emulator /sbin/init\nsudo docker exec -it a7f955bd9c053f22a8838d71c86c00466987ff4cc278cb21ff1cd625e6ab232e /bin/bash\n\nKVM\u306e\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\napt-get remove kvm\napt-get install kvm\n\n\u3084\u306f\u308a\u30c0\u30e1\u3002\nKVM kernel module\u3068\u8a00\u3063\u3066\u3044\u308b\u306e\u3067\u3001\n\u3082\u3057\u304b\u3059\u308b\u3068\u3001docker\u672c\u4f53\u304c\u52d5\u3044\u3066\u3044\u308b\u30db\u30b9\u30c8OS\u5074\u306bKVM\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308c\u3070\n\u52d5\u304f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3051\u308c\u3069\u3082\u3001\u3053\u3053\u3089\u3078\u3093\u3067\u3084\u3081\u3066\u304a\u304f\u3002\nroot@a7f955bd9c05:/# kvm \nCould not access KVM kernel module: No such file or directory\nfailed to initialize KVM: No such file or directory\nroot@a7f955bd9c05:/# \n\n\n\u6700\u521d\u306b\u5b9f\u65bd\u3057\u305f\u3068\u304d\u306e\u8a66\u884c\u932f\u8aa4\n\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\u3002\nsudo docker pull gfx2015/android:latest\nsudo docker run -it gfx2015/android  \n\n\u8ffd\u52a0SDK\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\nandroid update sdk -u -a -t android-20\nandroid update sdk -u -a -t platform-tools\nandroid update sdk -u -a -t build-tools-20.0.0\n\nAVD\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u78ba\u8a8d\u3002\nroot@0741f65689c0:/home/android_program# android list targets\nAvailable Android targets:\n----------\nid: 1 or \"android-20\"\n     Name: Android 4.4W.2\n     Type: Platform\n     API level: 20\n     Revision: 2\n     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in\n Tag/ABIs : no ABIs.\n----------\nid: 2 or \"android-23\"\n     Name: Android 6.0\n     Type: Platform\n     API level: 23\n     Revision: 3\n     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in\n Tag/ABIs : no ABIs.\nroot@0741f65689c0:/home/android_program# \n\nAVD\u3092\u4f5c\u6210\u3057\u3066\u307f\u308b\u30fb\u30fb\u30fb\u5931\u6557\u3002\nroot@0741f65689c0:/home/android_program# android create avd -n avd_android4_4 -t 1\nValid ABIs: no ABIs.\nError: This platform has more than one ABI. Please specify one using --abi.\nroot@0741f65689c0:/home/android_program# \n\nABI\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b\u30fb\u30fb\u30fbSDK\u306e\u4f9d\u5b58\u6027\u304c\u3042\u308b\u3089\u3057\u3044\u3002\nandroid update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\nInstalling Archives:\n  Preparing to install archives\n  Skipping 'ARM EABI v7a System Image, Android API 22, revision 1'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Skipping 'Intel x86 Atom_64 System Image, Android API 22, revision 5'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Done. Nothing was installed.\n\nSDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30fb\u30fb\u30fb\u6210\u529f\nandroid update sdk -a --no-ui --filter source-22      \nInstalling Archives:\n  Preparing to install archives\n  Downloading Sources for Android SDK, API 22, revision 1\n  Installing Sources for Android SDK, API 22, revision 1\nINFO   | jvm 5    | 2016/06/09 08:55:40 | 2016-06-09 08:55:40,053 INFO [0-BAM::0741f65689c0::Agent:pool-3-thread-1] [BuildAgentControllerImpl] Agent 1474561 checking build queue for executables...\n    Installed Sources for Android SDK, API 22, revision 1\n  Done. 1 package installed.\n\n\u518d\u5ea6\u3001ABI\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b\u30fb\u30fb\u30fb\nandroid update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\nInstalling Archives:\n  Preparing to install archives\n  Skipping 'ARM EABI v7a System Image, Android API 22, revision 1'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Skipping 'Intel x86 Atom_64 System Image, Android API 22, revision 5'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Done. Nothing was installed.\n\nsource\u3068android\u3092\u52d8\u9055\u3044\u3057\u305f\u3002\nroot@0741f65689c0:/home/android_program# android update sdk -a --no-ui --filter android-22\nInstalling Archives:\n  Preparing to install archives\n  Downloading SDK Platform Android 5.1.1, API 22, revision 2\n  Installing SDK Platform Android 5.1.1, API 22, revision 2\n    Installed SDK Platform Android 5.1.1, API 22, revision 296%)\n  Done. 1 package installed.\n\n\u3088\u3046\u3084\u304fABI\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u6210\u529f\u3002\nroot@0741f65689c0:/home/android_program# android update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\nInstalling Archives:\n  Preparing to install archives\n  Downloading ARM EABI v7a System Image, Android API 22, revision 1\n  Installing ARM EABI v7a System Image, Android API 22, revision 1\n    Installed ARM EABI v7a System Image, Android API 22, revision 199%)\n  Downloading Intel x86 Atom_64 System Image, Android API 22, revision 5\n  Installing Intel x86 Atom_64 System Image, Android API 22, revision 5\n  Unzip failed: No space left on deviceage, Android API 22, revision 5 (5%)\n  Done. 1 package installed.\n\nAVD\u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u304c\u8db3\u308a\u306a\u3044\u3068\u304b\u3002\u3002\n\u203b\u5f8c\u65e5\u88dc\u8db3\uff1adocker\u306f\u30b3\u30f3\u30c6\u30ca\u304c\u4f7f\u3048\u308b\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306710GB\u7b49\u306b\u5236\u9650\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u554f\u984c\u306f\u305d\u308c\u3092\u5909\u66f4\u3059\u308c\u3070\u3088\u304b\u3063\u305f\u3060\u3051\u3067\u3057\u305f\u3002\nroot@0741f65689c0:/home/android_program# android create avd --name myandroid22 -t \"android-22\" --abi \"default/x86_64\"\nAndroid 5.1.1 is a basic Android platform.\nDo you wish to create a custom hardware profile [no]n\nError: No space left on device\nError: AVD not created.\n\nAndroid-SDK\u5185\u306e\u4e0d\u8981\u305d\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u624b\u52d5\u3067\u524a\u9664\u3057\u305f\u3089\n\u4eca\u5ea6\u306f\u4f8b\u5916\u767a\u751f\u3002\nandroid\u30b3\u30de\u30f3\u30c9\u304c\u5168\u6ec5\u3002\u3002\nroot@0741f65689c0:~# android create avd --name myandroid22_02 -t \"android-22\" --abi \"default/x86_64\"\nException in thread \"main\" java.lang.NullPointerException\n    at java.io.File.<init>(File.java:277)\n    at com.android.sdklib.internal.avd.AvdManager.parseAvdInfo(AvdManager.java:1623)\n    at com.android.sdklib.internal.avd.AvdManager.buildAvdList(AvdManager.java:1584)\n    at com.android.sdklib.internal.avd.AvdManager.<init>(AvdManager.java:357)\n    at com.android.sdklib.internal.avd.AvdManager.getInstance(AvdManager.java:380)\n    at com.android.sdkmanager.Main.getAvdManager(Main.java:295)\n    at com.android.sdkmanager.Main.createAvd(Main.java:1252)\n    at com.android.sdkmanager.Main.doAction(Main.java:337)\n    at com.android.sdkmanager.Main.run(Main.java:151)\n    at com.android.sdkmanager.Main.main(Main.java:117)\n\n\u30c0\u30e1\u3060\u3053\u308c\u306f\u3002\u3002\n\n\u53c2\u8003\nhttp://stackoverflow.com/questions/10019532/no-abi-error-when-creating-an-android-virtual-device\nhttp://www.javadrive.jp/android/emulator/index1.html\nhttp://stackoverflow.com/questions/28921210/how-to-run-unit-tests-for-android-is-not-on-the-device-or-emulator\n# \u306f\u3058\u3081\u306b\n\nAndroid\u30a2\u30d7\u30ea\u306e\u30d3\u30eb\u30c9\u3001Emulator\u7528AVD\u306e\u4f5c\u6210\u3001Emualtor\u306e\u8d77\u52d5\u3001UI\u30c6\u30b9\u30c8\u3092\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u5b9f\u65bd\u3059\u308b\u5b9f\u9a13\u3092\u3057\u305f\u304c\u5931\u6557\u3057\u305f\u3002\nEmulator\u306e\u8d77\u52d5\u306e\u3068\u3053\u308d\u3067KVM\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308a\u3001\u3069\u3046\u3084\u3089\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u52d5\u4f5c\u3055\u305b\u308b\u306e\u306f\u7121\u7406\u307e\u305f\u306f\u4e00\u822c\u7684\u3067\u306f\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u3053\u3053\u3067\u4e2d\u65ad\u3068\u3059\u308b\u3002\n\n# \u7d50\u8ad6\n\nCLI\u3067\u306eEmulator\u8d77\u52d5\uff0b\u30c6\u30b9\u30c8\u306f\u53ef\u80fd\u3060\u304c\u3001\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067\u306e\u5b9f\u65bd\u306f\u4e00\u822c\u7684\u3067\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u5225\u306e\u65b9\u6cd5\u3092\u691c\u8a0e\u3057\u305f\u307b\u3046\u304c\u826f\u3044\u3002\n\u4eca\u5f8c\u306f\u3001Emulator\u7121\u3057\u3067\u53ef\u80fd\u306a\u30c6\u30b9\u30c8\u3068\u3001Emulator\u6709\u308a\u3067\u53ef\u80fd\u306a\u30c6\u30b9\u30c8\u306e\u305d\u308c\u305e\u308c\u3067\u8abf\u67fb\u3092\u3057\u3066\u3044\u304f\u3002\n\u307e\u305f\u3001Emulator\u6709\u308a\u306e\u30c6\u30b9\u30c8\u306b\u3064\u3044\u3066\u306f\u3001\u30b3\u30f3\u30c6\u30ca\u4ee5\u5916\u306e\u65b9\u6cd5\u3068\u3057\u3066\u3001\nSakura VPS\u3067\u306eVM on VM\u3084\u3001\u81ea\u5b85\u30b5\u30fc\u30d0\u4e0a\u3067\u306e\u30c6\u30b9\u30c8\u304c\u5019\u88dc\u306b\u6319\u3052\u3089\u308c\u308b\u3002\n\n# \u74b0\u5883\n\n\u30db\u30b9\u30c8OS\n\n```\n$ docker -v\nDocker version 1.7.1, build 786b29d/1.7.1\n```\n\n\u30b3\u30f3\u30c6\u30ca\u5185\n\n```\n# uname -a\nLinux a7f955bd9c05 3.10.0-327.el7.x86_64 #1 SMP Thu Nov 19 22:10:57 UTC 2015 x86_64 GNU/Linux\n# java -version\nopenjdk version \"1.8.0_91\"\nOpenJDK Runtime Environment (build 1.8.0_91-8u91-b14-1~bpo8+1-b14)\nOpenJDK 64-Bit Server VM (build 25.91-b14, mixed mode)\n```\n\n\n# \u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u4f5c\u6210\u3002\n\n```\nsudo docker pull gfx2015/android:latest\nsudo docker run -it gfx2015/android  \n```\n\n# \u8ffd\u52a0\u306eAndroid-SDK\u3092\u8ffd\u52a0\n\n```\nandroid update sdk -u -a -t android-20\nandroid update sdk -a --no-ui --filter source-22      \nandroid update sdk -a --no-ui --filter android-22\nandroid update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\n```\n\n# \u30d3\u30eb\u30c9\u306e\u78ba\u8a8d\n\n```\ncd /home\ngit clone http://xxxxxxxxxxxxxxxxxxxx.git\n./gradlew clean && ./gradlew build\n```\n\n# AVD\u306e\u4f5c\u6210\n\n```\nandroid create avd --name myandroid22 -t \"android-22\" --abi \"default/x86_64\"\n```\n\n# Emulator\u306e\u8d77\u52d5\n\nAVD\u3092\u4f5c\u6210\u3067\u304d\u305f\u306e\u3067\u3001Emulator\u3092\u8d77\u52d5\u3055\u305b\u308b\u3002\nkvm\u304c\u5fc5\u8981\u3089\u3057\u3044\u3002\n\n```\nroot@b1aeb9a769e1:/home# emulator -avd myandroid22 -force-32bit\nemulator: WARNING: Increasing RAM size to 1GB\nemulator: ERROR: x86_64 emulation currently requires hardware acceleration!\nPlease ensure KVM is properly installed and usable.\nCPU acceleration status: KVM is not installed on this machine (/dev/kvm is missing).\n```\n\nkvm\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\nroot@b1aeb9a769e1:/home# apt-get install kvm\n```\n\nkvm\u304c\u3046\u307e\u304f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u69d8\u5b50\u3002\n\u305f\u3060\u3001\u305d\u3082\u305d\u3082LXC\u4e0a\u306a\u306e\u3067\u3001\u3053\u3053\u3067kvm\u304c\u52d5\u4f5c\u3059\u308b\u306e\u304b\u304c\u4e0d\u660e\u3002\n\n```\nroot@b1aeb9a769e1:/home# emulator -avd myandroid22 -force-32bit\nemulator: WARNING: Increasing RAM size to 1GB\nemulator: ERROR: x86_64 emulation currently requires hardware acceleration!\nPlease ensure KVM is properly installed and usable.\nCPU acceleration status: KVM is not installed on this machine (/dev/kvm is missing).\n```\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u30b3\u30f3\u30c6\u30ca\u304c\u30c7\u30fc\u30e2\u30f3\u30e2\u30fc\u30c9\u3067\u306a\u3044\u3053\u3068\u3001\n\u6a29\u9650\u7121\u8996\u30d5\u30e9\u30b0\u304c\u4ed8\u3044\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u308c\u3092\u3064\u3051\u3066\u30c7\u30fc\u30e2\u30f3\u304c\u52d5\u4f5c\u3059\u308b\u72b6\u614b\u306b\u3057\u3066\u518d\u8a66\u884c\u3059\u308b\u3002\n\n```\nsudo docker commit b1aeb9a769e1 temp/android_emulator\nsudo docker run -d temp/android_emulator /sbin/init\nsudo docker exec -it a7f955bd9c053f22a8838d71c86c00466987ff4cc278cb21ff1cd625e6ab232e /bin/bash\n```\n\nKVM\u306e\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\napt-get remove kvm\napt-get install kvm\n```\n\n\u3084\u306f\u308a\u30c0\u30e1\u3002\nKVM kernel module\u3068\u8a00\u3063\u3066\u3044\u308b\u306e\u3067\u3001\n\u3082\u3057\u304b\u3059\u308b\u3068\u3001docker\u672c\u4f53\u304c\u52d5\u3044\u3066\u3044\u308b\u30db\u30b9\u30c8OS\u5074\u306bKVM\u30ab\u30fc\u30cd\u30eb\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308c\u3070\n\u52d5\u304f\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3051\u308c\u3069\u3082\u3001\u3053\u3053\u3089\u3078\u3093\u3067\u3084\u3081\u3066\u304a\u304f\u3002\n\n```\nroot@a7f955bd9c05:/# kvm \nCould not access KVM kernel module: No such file or directory\nfailed to initialize KVM: No such file or directory\nroot@a7f955bd9c05:/# \n```\n\n# \u6700\u521d\u306b\u5b9f\u65bd\u3057\u305f\u3068\u304d\u306e\u8a66\u884c\u932f\u8aa4\n\n\n\u30b3\u30f3\u30c6\u30ca\u4f5c\u6210\u3002\n\n```\nsudo docker pull gfx2015/android:latest\nsudo docker run -it gfx2015/android  \n```\n\n\u8ffd\u52a0SDK\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```\nandroid update sdk -u -a -t android-20\nandroid update sdk -u -a -t platform-tools\nandroid update sdk -u -a -t build-tools-20.0.0\n```\n\nAVD\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u30bf\u30fc\u30b2\u30c3\u30c8\u3092\u78ba\u8a8d\u3002\n\n```\nroot@0741f65689c0:/home/android_program# android list targets\nAvailable Android targets:\n----------\nid: 1 or \"android-20\"\n     Name: Android 4.4W.2\n     Type: Platform\n     API level: 20\n     Revision: 2\n     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in\n Tag/ABIs : no ABIs.\n----------\nid: 2 or \"android-23\"\n     Name: Android 6.0\n     Type: Platform\n     API level: 23\n     Revision: 3\n     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in\n Tag/ABIs : no ABIs.\nroot@0741f65689c0:/home/android_program# \n```\n\nAVD\u3092\u4f5c\u6210\u3057\u3066\u307f\u308b\u30fb\u30fb\u30fb\u5931\u6557\u3002\n\n```\nroot@0741f65689c0:/home/android_program# android create avd -n avd_android4_4 -t 1\nValid ABIs: no ABIs.\nError: This platform has more than one ABI. Please specify one using --abi.\nroot@0741f65689c0:/home/android_program# \n```\n\nABI\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b\u30fb\u30fb\u30fbSDK\u306e\u4f9d\u5b58\u6027\u304c\u3042\u308b\u3089\u3057\u3044\u3002\n\n```\nandroid update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\nInstalling Archives:\n  Preparing to install archives\n  Skipping 'ARM EABI v7a System Image, Android API 22, revision 1'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Skipping 'Intel x86 Atom_64 System Image, Android API 22, revision 5'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Done. Nothing was installed.\n```\n\nSDK\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30fb\u30fb\u30fb\u6210\u529f\n\n```\nandroid update sdk -a --no-ui --filter source-22      \nInstalling Archives:\n  Preparing to install archives\n  Downloading Sources for Android SDK, API 22, revision 1\n  Installing Sources for Android SDK, API 22, revision 1\nINFO   | jvm 5    | 2016/06/09 08:55:40 | 2016-06-09 08:55:40,053 INFO [0-BAM::0741f65689c0::Agent:pool-3-thread-1] [BuildAgentControllerImpl] Agent 1474561 checking build queue for executables...\n    Installed Sources for Android SDK, API 22, revision 1\n  Done. 1 package installed.\n```\n\n\u518d\u5ea6\u3001ABI\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u308b\u30fb\u30fb\u30fb\n\n```\nandroid update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\nInstalling Archives:\n  Preparing to install archives\n  Skipping 'ARM EABI v7a System Image, Android API 22, revision 1'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Skipping 'Intel x86 Atom_64 System Image, Android API 22, revision 5'; it depends on 'SDK Platform Android 5.1.1, API 22, revision 2' which was not installed.\n  Done. Nothing was installed.\n```\n\nsource\u3068android\u3092\u52d8\u9055\u3044\u3057\u305f\u3002\n\n```\nroot@0741f65689c0:/home/android_program# android update sdk -a --no-ui --filter android-22\nInstalling Archives:\n  Preparing to install archives\n  Downloading SDK Platform Android 5.1.1, API 22, revision 2\n  Installing SDK Platform Android 5.1.1, API 22, revision 2\n    Installed SDK Platform Android 5.1.1, API 22, revision 296%)\n  Done. 1 package installed.\n```\n\n\u3088\u3046\u3084\u304fABI\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u6210\u529f\u3002\n\n```\nroot@0741f65689c0:/home/android_program# android update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22\nInstalling Archives:\n  Preparing to install archives\n  Downloading ARM EABI v7a System Image, Android API 22, revision 1\n  Installing ARM EABI v7a System Image, Android API 22, revision 1\n    Installed ARM EABI v7a System Image, Android API 22, revision 199%)\n  Downloading Intel x86 Atom_64 System Image, Android API 22, revision 5\n  Installing Intel x86 Atom_64 System Image, Android API 22, revision 5\n  Unzip failed: No space left on deviceage, Android API 22, revision 5 (5%)\n  Done. 1 package installed.\n```\n\nAVD\u3092\u4f5c\u6210\u3057\u3088\u3046\u3068\u3057\u305f\u3089\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u304c\u8db3\u308a\u306a\u3044\u3068\u304b\u3002\u3002\n\u203b\u5f8c\u65e5\u88dc\u8db3\uff1adocker\u306f\u30b3\u30f3\u30c6\u30ca\u304c\u4f7f\u3048\u308b\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u3092\u30c7\u30d5\u30a9\u30eb\u30c8\u306710GB\u7b49\u306b\u5236\u9650\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u30c7\u30a3\u30b9\u30af\u30b9\u30da\u30fc\u30b9\u554f\u984c\u306f\u305d\u308c\u3092\u5909\u66f4\u3059\u308c\u3070\u3088\u304b\u3063\u305f\u3060\u3051\u3067\u3057\u305f\u3002\n\n```\nroot@0741f65689c0:/home/android_program# android create avd --name myandroid22 -t \"android-22\" --abi \"default/x86_64\"\nAndroid 5.1.1 is a basic Android platform.\nDo you wish to create a custom hardware profile [no]n\nError: No space left on device\nError: AVD not created.\n```\n\nAndroid-SDK\u5185\u306e\u4e0d\u8981\u305d\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u624b\u52d5\u3067\u524a\u9664\u3057\u305f\u3089\n\u4eca\u5ea6\u306f\u4f8b\u5916\u767a\u751f\u3002\nandroid\u30b3\u30de\u30f3\u30c9\u304c\u5168\u6ec5\u3002\u3002\n\n```\nroot@0741f65689c0:~# android create avd --name myandroid22_02 -t \"android-22\" --abi \"default/x86_64\"\nException in thread \"main\" java.lang.NullPointerException\n\tat java.io.File.<init>(File.java:277)\n\tat com.android.sdklib.internal.avd.AvdManager.parseAvdInfo(AvdManager.java:1623)\n\tat com.android.sdklib.internal.avd.AvdManager.buildAvdList(AvdManager.java:1584)\n\tat com.android.sdklib.internal.avd.AvdManager.<init>(AvdManager.java:357)\n\tat com.android.sdklib.internal.avd.AvdManager.getInstance(AvdManager.java:380)\n\tat com.android.sdkmanager.Main.getAvdManager(Main.java:295)\n\tat com.android.sdkmanager.Main.createAvd(Main.java:1252)\n\tat com.android.sdkmanager.Main.doAction(Main.java:337)\n\tat com.android.sdkmanager.Main.run(Main.java:151)\n\tat com.android.sdkmanager.Main.main(Main.java:117)\n```\n\n\u30c0\u30e1\u3060\u3053\u308c\u306f\u3002\u3002\n\n# \u53c2\u8003\nhttp://stackoverflow.com/questions/10019532/no-abi-error-when-creating-an-android-virtual-device\nhttp://www.javadrive.jp/android/emulator/index1.html\nhttp://stackoverflow.com/questions/28921210/how-to-run-unit-tests-for-android-is-not-on-the-device-or-emulator\n\n", "tags": ["docker", "test", "automation", "Android"]}