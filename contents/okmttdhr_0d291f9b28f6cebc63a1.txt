{"context": " More than 1 year has passed since last update.\n\nKnockoutJs Tutorial\uff5cCreating custom bindings\n\nknockout.js tutorial\uff14\u3053\u3081http://learn.knockoutjs.com/#/?tutorial=collections \nbinding\u3092\u81ea\u4f5c\u3057\u307e\u3059\u3002\u65e5\u672c\u8a9e\u3067\u8efd\u304f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u5165\u308c\u307e\u3057\u305f\u3002\uff08\u307e\u305a\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u307f\u3066\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3089\u898b\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff09\u3002\n\n\u3064\u304f\u308a\u305f\u3044\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\n\n\u3082\u3068\u3082\u3068\u306e\u30bd\u30fc\u30b9\u304c\u591a\u3044\u306e\u3067\u308f\u304b\u308a\u3065\u3089\u3044\u3067\u3059\u304c\u3001\u3084\u308a\u305f\u3044\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306f\u3001\n\nstarRating\nfadeVisible\njqButton\n\n\u306e\uff13\u3064\u3067\u3059\u3002\n\nHTML\n\n<h3 data-bind=\"text: question\"></h3>\n<p>Please distribute <b data-bind=\"text: pointsBudget\"></b> points between the following options.</p>\n\n<table>\n    <thead><tr><th>Option</th><th>Importance</th></tr></thead>\n    <tbody data-bind=\"foreach: answers\">\n        <tr>\n            <td data-bind=\"text: answerText\"></td>\n\n            <!-- \u2193starRating\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3002points\u306e\u90e8\u5206\u304cJS\u5074\u306evalueAccessor\u306b\u306a\u308b -->\n            <td data-bind=\"starRating: points\"></td>\n\n            <td><select data-bind=\"options: [1,2,3,4,5], value: points\"></select></td>\n        </tr>    \n    </tbody>\n</table>\n\n<!-- \u2193fadeVisible\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3002\u300cpointsUsed() > pointsBudget\u300d\u306eboolean\u5024\u304cJS\u5074\u306evalueAccessor\u306b\u306a\u308b -->\n<h3 data-bind=\"fadeVisible: pointsUsed() > pointsBudget\">You've used too many points! Please remove some.</h3>\n\n<p>You've got <b data-bind=\"text: pointsBudget - pointsUsed()\"></b> points left to use.</p>\n\n<!-- \u2193jqButton\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3002\u300c{ enable: pointsUsed() <= pointsBudget }\u300d\u306eboolean\u5024\u304cJS\u5074\u306evalueAccessor\u306b\u3002jQuery UI\u3092\u3064\u304b\u3063\u3066\u3044\u308b\u306e\u3067\u901a\u5e38\u306e\u66f8\u304d\u65b9\u3068\u7570\u306a\u308b\u3002 -->\n<button data-bind=\"jqButton: { enable: pointsUsed() <= pointsBudget }, click: save\">Finished</button>\n\n\nJS\n\nfunction Answer(text) { this.answerText = text; this.points = ko.observable(1); }\n\nfunction SurveyViewModel(question, pointsBudget, answers) {\n\n    // ===== starRating =====\n    ko.bindingHandlers.starRating = {\n        init: function(element, valueAccessor) {\n            $(element).addClass(\"starRating\");\n            for (var i = 0; i < 5; i++)\n               $(\"<span>\").appendTo(element);\n\n            // Handle mouse events on the stars\n            $(\"span\", element).each(function(index) {\n                $(this).hover(\n\n                    // hover\u3057\u305f\u3089\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\n                    function() { $(this).prevAll().add(this).addClass(\"hoverChosen\") }, \n                    function() { $(this).prevAll().add(this).removeClass(\"hoverChosen\") }                \n\n                ).click(function() { \n\n                   // click\u3057\u305f\u3089\u3001valueAccessor\u3092\u66f4\u65b0\u3002each\u3092\u3064\u304b\u3063\u3066index\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\n                   var observable = valueAccessor();  // Get the associated observable\n                   observable(index+1);               // Write the new rating to it\n\n                 }); \n            });\n        },\n        update: function(element, valueAccessor) {\n            // Give the first x stars the \"chosen\" class, where x <= rating\n            var observable = valueAccessor();\n            $(\"span\", element).each(function(index) {\n                $(this).toggleClass(\"chosen\", index < observable());\n            });\n        }\n    };\n    // ===== starRating end =====\n\n    // ===== jqButton =====\n    ko.bindingHandlers.jqButton = {\n        init: function(element) {\n           $(element).button(); // jQuery UI\u306ebutton\u306b\u5909\u3048\u308b\n        },\n        update: function(element, valueAccessor) {\n            var currentValue = valueAccessor();\n            // \"disabled\"\u30d7\u30ed\u30d0\u30c6\u30a3\u3092\u66f4\u65b0\n            $(element).button(\"option\", \"disabled\", currentValue.enable === false);\n        }\n    };\n    // ===== jqButton end =====\n\n    // ===== fadeVisible =====\n    ko.bindingHandlers.fadeVisible = {\n        init: function(element, valueAccessor) {\n            // visible/invisible\u304b\u3092\u521d\u671f\u5024\u306b\u3088\u3063\u3066\u5224\u5225\n            var shouldDisplay = valueAccessor();\n            $(element).toggle(shouldDisplay);\n        },\n        update: function(element, valueAccessor) {\n            // visible/invisible\u304b\u3092\u66f4\u65b0\n            var shouldDisplay = valueAccessor();\n            shouldDisplay ? $(element).fadeIn() : $(element).fadeOut();\n        } \n    };\n    // ===== fadeVisible end =====\n\n    this.question = question;\n    this.pointsBudget = pointsBudget;\n    this.answers = $.map(answers, function(text) { return new Answer(text) });\n    this.save = function() { alert('To do') };\n\n    this.pointsUsed = ko.computed(function() {\n        var total = 0;\n        for (var i = 0; i < this.answers.length; i++)\n            total += this.answers[i].points();\n        return total;        \n    }, this);\n}\n\nko.applyBindings(new SurveyViewModel(\"Which factors affect your technology choices?\", 10, [\n   \"Functionality, compatibility, pricing - all that boring stuff\",\n   \"How often it is mentioned on Hacker News\",    \n   \"Number of gradients/dropshadows on project homepage\",        \n   \"Totally believable testimonials on project homepage\"\n]));\n\n\n\n# **KnockoutJs Tutorial\uff5cCreating custom bindings**\n\nknockout.js tutorial\uff14\u3053\u3081http://learn.knockoutjs.com/#/?tutorial=collections \n\nbinding\u3092\u81ea\u4f5c\u3057\u307e\u3059\u3002\u65e5\u672c\u8a9e\u3067\u8efd\u304f\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u5165\u308c\u307e\u3057\u305f\u3002\uff08\u307e\u305a\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3092\u307f\u3066\u3001\u3088\u304f\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u3089\u898b\u3066\u307f\u3066\u304f\u3060\u3055\u3044\uff09\u3002\n\n\n# **\u3064\u304f\u308a\u305f\u3044\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0**\n\n\u3082\u3068\u3082\u3068\u306e\u30bd\u30fc\u30b9\u304c\u591a\u3044\u306e\u3067\u308f\u304b\u308a\u3065\u3089\u3044\u3067\u3059\u304c\u3001\u3084\u308a\u305f\u3044\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u306f\u3001\n\n* starRating\n* fadeVisible\n* jqButton\n\n\u306e\uff13\u3064\u3067\u3059\u3002\n\n\n# **HTML**\n\n```\n<h3 data-bind=\"text: question\"></h3>\n<p>Please distribute <b data-bind=\"text: pointsBudget\"></b> points between the following options.</p>\n\n<table>\n    <thead><tr><th>Option</th><th>Importance</th></tr></thead>\n    <tbody data-bind=\"foreach: answers\">\n        <tr>\n            <td data-bind=\"text: answerText\"></td>\n\n            <!-- \u2193starRating\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3002points\u306e\u90e8\u5206\u304cJS\u5074\u306evalueAccessor\u306b\u306a\u308b -->\n            <td data-bind=\"starRating: points\"></td>\n\n            <td><select data-bind=\"options: [1,2,3,4,5], value: points\"></select></td>\n        </tr>    \n    </tbody>\n</table>\n\n<!-- \u2193fadeVisible\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3002\u300cpointsUsed() > pointsBudget\u300d\u306eboolean\u5024\u304cJS\u5074\u306evalueAccessor\u306b\u306a\u308b -->\n<h3 data-bind=\"fadeVisible: pointsUsed() > pointsBudget\">You've used too many points! Please remove some.</h3>\n\n<p>You've got <b data-bind=\"text: pointsBudget - pointsUsed()\"></b> points left to use.</p>\n\n<!-- \u2193jqButton\u306e\u30d0\u30a4\u30f3\u30c7\u30a3\u30f3\u30b0\u3002\u300c{ enable: pointsUsed() <= pointsBudget }\u300d\u306eboolean\u5024\u304cJS\u5074\u306evalueAccessor\u306b\u3002jQuery UI\u3092\u3064\u304b\u3063\u3066\u3044\u308b\u306e\u3067\u901a\u5e38\u306e\u66f8\u304d\u65b9\u3068\u7570\u306a\u308b\u3002 -->\n<button data-bind=\"jqButton: { enable: pointsUsed() <= pointsBudget }, click: save\">Finished</button>\n```\n\n\n\n# **JS**\n\n```\nfunction Answer(text) { this.answerText = text; this.points = ko.observable(1); }\n\nfunction SurveyViewModel(question, pointsBudget, answers) {\n\n    // ===== starRating =====\n    ko.bindingHandlers.starRating = {\n        init: function(element, valueAccessor) {\n            $(element).addClass(\"starRating\");\n            for (var i = 0; i < 5; i++)\n               $(\"<span>\").appendTo(element);\n\n            // Handle mouse events on the stars\n            $(\"span\", element).each(function(index) {\n                $(this).hover(\n\n                    // hover\u3057\u305f\u3089\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\n                    function() { $(this).prevAll().add(this).addClass(\"hoverChosen\") }, \n                    function() { $(this).prevAll().add(this).removeClass(\"hoverChosen\") }                \n\n                ).click(function() { \n\n                   // click\u3057\u305f\u3089\u3001valueAccessor\u3092\u66f4\u65b0\u3002each\u3092\u3064\u304b\u3063\u3066index\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\n                   var observable = valueAccessor();  // Get the associated observable\n                   observable(index+1);               // Write the new rating to it\n\n                 }); \n            });\n        },\n        update: function(element, valueAccessor) {\n            // Give the first x stars the \"chosen\" class, where x <= rating\n            var observable = valueAccessor();\n            $(\"span\", element).each(function(index) {\n                $(this).toggleClass(\"chosen\", index < observable());\n            });\n        }\n    };\n    // ===== starRating end =====\n\n    // ===== jqButton =====\n    ko.bindingHandlers.jqButton = {\n        init: function(element) {\n           $(element).button(); // jQuery UI\u306ebutton\u306b\u5909\u3048\u308b\n        },\n        update: function(element, valueAccessor) {\n            var currentValue = valueAccessor();\n            // \"disabled\"\u30d7\u30ed\u30d0\u30c6\u30a3\u3092\u66f4\u65b0\n            $(element).button(\"option\", \"disabled\", currentValue.enable === false);\n        }\n    };\n    // ===== jqButton end =====\n\n    // ===== fadeVisible =====\n    ko.bindingHandlers.fadeVisible = {\n        init: function(element, valueAccessor) {\n            // visible/invisible\u304b\u3092\u521d\u671f\u5024\u306b\u3088\u3063\u3066\u5224\u5225\n            var shouldDisplay = valueAccessor();\n            $(element).toggle(shouldDisplay);\n        },\n        update: function(element, valueAccessor) {\n            // visible/invisible\u304b\u3092\u66f4\u65b0\n            var shouldDisplay = valueAccessor();\n            shouldDisplay ? $(element).fadeIn() : $(element).fadeOut();\n        } \n    };\n    // ===== fadeVisible end =====\n\n    this.question = question;\n    this.pointsBudget = pointsBudget;\n    this.answers = $.map(answers, function(text) { return new Answer(text) });\n    this.save = function() { alert('To do') };\n                       \n    this.pointsUsed = ko.computed(function() {\n        var total = 0;\n        for (var i = 0; i < this.answers.length; i++)\n            total += this.answers[i].points();\n        return total;        \n    }, this);\n}\n\nko.applyBindings(new SurveyViewModel(\"Which factors affect your technology choices?\", 10, [\n   \"Functionality, compatibility, pricing - all that boring stuff\",\n   \"How often it is mentioned on Hacker News\",    \n   \"Number of gradients/dropshadows on project homepage\",        \n   \"Totally believable testimonials on project homepage\"\n]));\n```\n", "tags": ["knockoutjs", "JavaScript"]}