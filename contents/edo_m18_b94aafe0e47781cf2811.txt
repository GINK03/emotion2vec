{"context": " More than 1 year has passed since last update.\u3061\u3087\u3063\u3068\uff08\u3060\u3044\u3076\uff1f\uff09\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\u3044\u3084\u30fc\u3001Three.js\u306fupdate\u304c\u6fc0\u3057\u3044\u306e\u3068\u3001\u305d\u3082\u305d\u3082\u65e5\u672c\u8a9e\u8a18\u4e8b\u304c\u5c11\u306a\u3044\u306e\u3067\u3060\u3044\u3076\u82e6\u6226\u3057\u305f\u3002\uff08\u3068\u3044\u3046\u304b\u3001\u307e\u3060\u5168\u7136\u3057\u3063\u304b\u308a\u628a\u63e1\u3067\u304d\u3066\u306a\u3044\u3051\u3069\uff09\n\u3068\u308a\u3042\u3048\u305a \u30e2\u30c7\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b \u3001\u3068\u3044\u3046WebGL\u3067\u306a\u306b\u304b\u3084\u308b\u3068\u304d\u306b\u907f\u3051\u3066\u901a\u308c\u306a\u3044\u51e6\u7406\u3067\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\u307e\u305a\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u3001**Bone\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u3055\u305b\u308b\u969b\u306f\u3001Bone\u306e\u6570\u304c\u554f\u984c\u306b\u306a\u308b**\u307d\u3044\u3002\nbone\u306e\u6570\u306f\u3069\u3046\u3084\u3089\u95a2\u4fc2\u306a\u3044\u307d\u3044\u3002\u6539\u3081\u3066\u66f8\u304d\u3060\u3057\u3066\u307f\u305f\u3089\u6b63\u5e38\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u307e\u3057\u305f\u3002\n\u3061\u306a\u307f\u306b\u30e2\u30c7\u30eb\u30c7\u30fc\u30bf\u306fBlender\u3067Three.js\u306eJSON\u5f62\u5f0f\u306bExport\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3002\nExport\u8a2d\u5b9a\n\n\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u3066Bone\u3092\u3044\u304f\u3064\u304b\u9069\u5f53\u306b\u8ffd\u52a0\u3057\u3066\u304b\u3089\uff0817\u304f\u3089\u3044\uff1f\uff09Export\u3057\u3066\u8aad\u307f\u8fbc\u307e\u305b\u305f\u3068\u3053\u308d\u3001\u30e2\u30c7\u30eb\u81ea\u4f53\u306f\u6b63\u5e38\u306b\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u306a\u3044\u3002\n\u8a66\u3057\u306bBone\u3092\u3075\u305f\u3064\u7a0b\u5ea6\u306b\u6e1b\u3089\u3057\u3066Export\u2192\u8aad\u307f\u8fbc\u307f\u3001\u3063\u3066\u3057\u305f\u3089\u52d5\u3044\u305f\u3002\n\u306a\u306e\u3067\u3001Bone\u3092\u8907\u6570\u4f7f\u3063\u3066\u8907\u96d1\u306a\u52d5\u304d\u3092\u3055\u305b\u308b\u5834\u5408\u306f\u30e2\u30c7\u30eb\u3092\u5206\u3051\u3066Three.js\u5074\u3067\u5408\u6210\u3059\u308b\u306a\u3069\u306e\u51e6\u7406\u304c\u5fc5\u8981\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u305f\u3060\u3001\u3055\u3059\u304c\u306b\u305d\u308c\u306f\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067\u3082\u3046\u5c11\u3057\u8abf\u3079\u3066\u898b\u308b\u3053\u3068\u306b\u3059\u308b\u3002\n\n\u3061\u306a\u307f\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u30bd\u30fc\u30b9\u3092\u3044\u3061\u304a\u3046\u8f09\u305b\u3066\u304a\u304f\n\nanimation.js\nvar container;\nvar camera, scene, projector, renderer;\nvar mesh;\nvar animation;\nvar composer;\n\ninit();\n\nfunction init() {\n\n    container = document.createElement('div');\n    document.body.appendChild(container);\n\n    camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 10000);\n    camera.position.z = 800;\n    camera.target = new THREE.Vector3(0, 0, 0);\n\n    scene = new THREE.Scene();\n\n    var light = new THREE.DirectionalLight( 0xefefff, 2);\n    light.position.set(1, 1, 1).normalize();\n    scene.add(light);\n\n    var light = new THREE.DirectionalLight(0xffefef, 2);\n    light.position.set(-1, -1, -1).normalize();\n    scene.add(light);\n\n    var loader = new THREE.JSONLoader(true);\n    var url = 'models/some-model.js';\n    loader.load(url, function(geometry, materials) {\n      var material = new THREE.MeshFaceMaterial(materials);\n      mesh = new THREE.SkinnedMesh(geometry, material);\n      mesh.scale.x = mesh.scale.y = mesh.scale.z = 150.0;\n\n      //enable skinning\n      mesh.material.materials.forEach(function (mat) {\n          mat.skinning = true;\n      });\n\n      scene.add(mesh);\n\n      if (mesh.geometry.animation.name) {\n        THREE.AnimationHandler.add(mesh.geometry.animation);\n        animation = new THREE.Animation(mesh, mesh.geometry.animation.name, THREE.AnimationHandler.CATMULLROM);\n        animation.play();\n      }\n\n      animate();\n    });\n\n    renderer = new THREE.WebGLRenderer({antialias: true, preserveDrawingBuffer: true});\n    renderer.sortObjects = false;\n    renderer.setSize(window.innerWidth, window.innerHeight);\n\n    container.appendChild(renderer.domElement);\n\n    window.addEventListener('resize', onWindowResize, false);\n\n    //\u30dd\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9\u306e\u8a2d\u5b9a\n    composer = new THREE.EffectComposer(renderer);\n    composer.addPass(new THREE.RenderPass(scene, camera));\n\n    //\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30dd\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9\u3092\u8ffd\u52a0\n    composer.addPass(new THREE.ShaderPass({\n      vertexShader: document.getElementById('vshader').textContent,\n      fragmentShader: document.getElementById('fshader').textContent,\n      uniforms: {\n        ef: { type: 't', value: 0.2 },\n        tDiffuse: { type: 't', value: null }\n      }\n    }));\n\n    var toScreen = new THREE.ShaderPass(THREE.CopyShader);\n    toScreen.renderToScreen = true;\n    composer.addPass(toScreen);\n}\n\nfunction onWindowResize() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n}\n\nfunction animate() {\n    requestAnimationFrame(animate);\n    animation && animation.update(0.03);\n    render();\n}\n\nfunction render() {\n\n    //theta += 0.1;\n    //cnt++;\n\n    //camera.position.x = radius * Math.sin(THREE.Math.degToRad(theta));\n    //camera.position.z = radius * Math.cos(THREE.Math.degToRad(theta));\n    //camera.lookAt(camera.target);\n\n    //if (mesh && mesh.morphTargetInfluences) {\n\n    //    // Alternate morph targets\n\n    //    var time = Date.now() % duration;\n\n    //    var keyframe = Math.floor(time / interpolation);\n\n    //    if (keyframe != currentKeyframe) {\n\n    //        mesh.morphTargetInfluences[lastKeyframe] = 0;\n    //        mesh.morphTargetInfluences[currentKeyframe] = 1;\n    //        mesh.morphTargetInfluences[keyframe] = 0;\n\n    //        lastKeyframe = currentKeyframe;\n    //        currentKeyframe = keyframe;\n    //    }\n\n    //    mesh.scale.set(100, 100, 100);\n    //    mesh.morphTargetInfluences[keyframe] = (time % interpolation) / interpolation;\n    //    mesh.morphTargetInfluences[lastKeyframe] = 1 - mesh.morphTargetInfluences[keyframe];\n    //}\n\n    //renderer.render(scene, camera);\n    composer.render();\n}\n\n\n\n\u53c2\u8003\u30ea\u30f3\u30af\n\nThree.js\nBlender\u516c\u5f0f\u30b5\u30a4\u30c8\nblender.jp\uff08\u65e5\u672c\u8a9e\u306e\u975e\u516c\u5f0f\u30b5\u30a4\u30c8\uff09\n\n\u3061\u3087\u3063\u3068\uff08\u3060\u3044\u3076\uff1f\uff09\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u3044\u3084\u30fc\u3001Three.js\u306fupdate\u304c\u6fc0\u3057\u3044\u306e\u3068\u3001\u305d\u3082\u305d\u3082\u65e5\u672c\u8a9e\u8a18\u4e8b\u304c\u5c11\u306a\u3044\u306e\u3067\u3060\u3044\u3076\u82e6\u6226\u3057\u305f\u3002\uff08\u3068\u3044\u3046\u304b\u3001\u307e\u3060\u5168\u7136\u3057\u3063\u304b\u308a\u628a\u63e1\u3067\u304d\u3066\u306a\u3044\u3051\u3069\uff09\n\n\u3068\u308a\u3042\u3048\u305a **\u30e2\u30c7\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b** \u3001\u3068\u3044\u3046WebGL\u3067\u306a\u306b\u304b\u3084\u308b\u3068\u304d\u306b\u907f\u3051\u3066\u901a\u308c\u306a\u3044\u51e6\u7406\u3067\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n<del>\u307e\u305a\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u3001**Bone\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u3055\u305b\u308b\u969b\u306f\u3001Bone\u306e\u6570\u304c\u554f\u984c\u306b\u306a\u308b**\u307d\u3044\u3002</del>\n<ins>bone\u306e\u6570\u306f\u3069\u3046\u3084\u3089\u95a2\u4fc2\u306a\u3044\u307d\u3044\u3002\u6539\u3081\u3066\u66f8\u304d\u3060\u3057\u3066\u307f\u305f\u3089\u6b63\u5e38\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u307e\u3057\u305f\u3002</ins>\n\n\u3061\u306a\u307f\u306b\u30e2\u30c7\u30eb\u30c7\u30fc\u30bf\u306fBlender\u3067Three.js\u306eJSON\u5f62\u5f0f\u306bExport\u3057\u305f\u3082\u306e\u3092\u4f7f\u7528\u3002\n\n**Export\u8a2d\u5b9a**\n\n![Export\u8a2d\u5b9a](http://f.cl.ly/items/2K0Y3r08052l0Z3s011h/settings-capture.png)\n\n\n\n\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u3066Bone\u3092\u3044\u304f\u3064\u304b\u9069\u5f53\u306b\u8ffd\u52a0\u3057\u3066\u304b\u3089\uff0817\u304f\u3089\u3044\uff1f\uff09Export\u3057\u3066\u8aad\u307f\u8fbc\u307e\u305b\u305f\u3068\u3053\u308d\u3001\u30e2\u30c7\u30eb\u81ea\u4f53\u306f\u6b63\u5e38\u306b\u8aad\u307f\u8fbc\u307e\u308c\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u306a\u3044\u3002\n\n\u8a66\u3057\u306bBone\u3092\u3075\u305f\u3064\u7a0b\u5ea6\u306b\u6e1b\u3089\u3057\u3066Export\u2192\u8aad\u307f\u8fbc\u307f\u3001\u3063\u3066\u3057\u305f\u3089\u52d5\u3044\u305f\u3002\n\u306a\u306e\u3067\u3001Bone\u3092\u8907\u6570\u4f7f\u3063\u3066\u8907\u96d1\u306a\u52d5\u304d\u3092\u3055\u305b\u308b\u5834\u5408\u306f\u30e2\u30c7\u30eb\u3092\u5206\u3051\u3066Three.js\u5074\u3067\u5408\u6210\u3059\u308b\u306a\u3069\u306e\u51e6\u7406\u304c\u5fc5\u8981\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n\u305f\u3060\u3001\u3055\u3059\u304c\u306b\u305d\u308c\u306f\u3081\u3093\u3069\u304f\u3055\u3044\u306e\u3067\u3082\u3046\u5c11\u3057\u8abf\u3079\u3066\u898b\u308b\u3053\u3068\u306b\u3059\u308b\u3002\n\n##\u3061\u306a\u307f\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u305f\u30bd\u30fc\u30b9\u3092\u3044\u3061\u304a\u3046\u8f09\u305b\u3066\u304a\u304f\n\n```js:animation.js\nvar container;\nvar camera, scene, projector, renderer;\nvar mesh;\nvar animation;\nvar composer;\n \ninit();\n \nfunction init() {\n \n    container = document.createElement('div');\n    document.body.appendChild(container);\n \n    camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 10000);\n    camera.position.z = 800;\n    camera.target = new THREE.Vector3(0, 0, 0);\n \n    scene = new THREE.Scene();\n \n    var light = new THREE.DirectionalLight( 0xefefff, 2);\n    light.position.set(1, 1, 1).normalize();\n    scene.add(light);\n \n    var light = new THREE.DirectionalLight(0xffefef, 2);\n    light.position.set(-1, -1, -1).normalize();\n    scene.add(light);\n \n    var loader = new THREE.JSONLoader(true);\n    var url = 'models/some-model.js';\n    loader.load(url, function(geometry, materials) {\n      var material = new THREE.MeshFaceMaterial(materials);\n      mesh = new THREE.SkinnedMesh(geometry, material);\n      mesh.scale.x = mesh.scale.y = mesh.scale.z = 150.0;\n \n      //enable skinning\n      mesh.material.materials.forEach(function (mat) {\n          mat.skinning = true;\n      });\n \n      scene.add(mesh);\n \n      if (mesh.geometry.animation.name) {\n        THREE.AnimationHandler.add(mesh.geometry.animation);\n        animation = new THREE.Animation(mesh, mesh.geometry.animation.name, THREE.AnimationHandler.CATMULLROM);\n        animation.play();\n      }\n \n      animate();\n    });\n \n    renderer = new THREE.WebGLRenderer({antialias: true, preserveDrawingBuffer: true});\n    renderer.sortObjects = false;\n    renderer.setSize(window.innerWidth, window.innerHeight);\n \n    container.appendChild(renderer.domElement);\n \n    window.addEventListener('resize', onWindowResize, false);\n \n    //\u30dd\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9\u306e\u8a2d\u5b9a\n    composer = new THREE.EffectComposer(renderer);\n    composer.addPass(new THREE.RenderPass(scene, camera));\n \n    //\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30dd\u30b9\u30c8\u30d7\u30ed\u30bb\u30b9\u3092\u8ffd\u52a0\n    composer.addPass(new THREE.ShaderPass({\n      vertexShader: document.getElementById('vshader').textContent,\n      fragmentShader: document.getElementById('fshader').textContent,\n      uniforms: {\n        ef: { type: 't', value: 0.2 },\n        tDiffuse: { type: 't', value: null }\n      }\n    }));\n \n    var toScreen = new THREE.ShaderPass(THREE.CopyShader);\n    toScreen.renderToScreen = true;\n    composer.addPass(toScreen);\n}\n \nfunction onWindowResize() {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n}\n \nfunction animate() {\n    requestAnimationFrame(animate);\n    animation && animation.update(0.03);\n    render();\n}\n \nfunction render() {\n \n    //theta += 0.1;\n    //cnt++;\n \n    //camera.position.x = radius * Math.sin(THREE.Math.degToRad(theta));\n    //camera.position.z = radius * Math.cos(THREE.Math.degToRad(theta));\n    //camera.lookAt(camera.target);\n \n    //if (mesh && mesh.morphTargetInfluences) {\n \n    //    // Alternate morph targets\n \n    //    var time = Date.now() % duration;\n \n    //    var keyframe = Math.floor(time / interpolation);\n \n    //    if (keyframe != currentKeyframe) {\n \n    //        mesh.morphTargetInfluences[lastKeyframe] = 0;\n    //        mesh.morphTargetInfluences[currentKeyframe] = 1;\n    //        mesh.morphTargetInfluences[keyframe] = 0;\n \n    //        lastKeyframe = currentKeyframe;\n    //        currentKeyframe = keyframe;\n    //    }\n \n    //    mesh.scale.set(100, 100, 100);\n    //    mesh.morphTargetInfluences[keyframe] = (time % interpolation) / interpolation;\n    //    mesh.morphTargetInfluences[lastKeyframe] = 1 - mesh.morphTargetInfluences[keyframe];\n    //}\n \n    //renderer.render(scene, camera);\n    composer.render();\n}\n```\n\n##\u53c2\u8003\u30ea\u30f3\u30af\n\n* [Three.js](http://threejs.org/)\n* [Blender\u516c\u5f0f\u30b5\u30a4\u30c8](http://www.blender.org/)\n* [blender.jp\uff08\u65e5\u672c\u8a9e\u306e\u975e\u516c\u5f0f\u30b5\u30a4\u30c8\uff09](http://blender.jp/)", "tags": ["three.js", "animation", "model", "WebGL", "\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3"]}