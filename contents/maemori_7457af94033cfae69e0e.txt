{"context": "\n\n\u25cbDockerfile\u306f\u3001\u3053\u3061\u3089(GitHub)\n\n\n\u25cbDockerfile\u4e00\u5f0f\u306f\u3001\u3053\u3061\u3089\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n\n\n\n1. \u6982\u8981\nPHP\u30fbWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u7279\u5316\u3057\u305f\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3002\n\u30ed\u30fc\u30ab\u30ebPC\u306e\u958b\u767a\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092Docker\u30b3\u30f3\u30c6\u30ca\u3068\u5171\u6709\u3057\u3001\u305d\u306eUbuntu\u4e0a\u3067\u5b9f\u884c\u30fb\u958b\u767a\u30fb\u30c7\u30d0\u30c3\u30b0\u3092\u884c\u3046\u305f\u3081\u306e\u74b0\u5883\u3002\n\n2. \u69cb\u6210\u30d0\u30fc\u30b8\u30e7\u30f3\n\nUbuntu: 16.10 LTS (\u65e5\u672c\u8a9e\u5bfe\u5fdc)\nNginx: 1.10\nPHP: 7.0\nMySQL: 5.7\nPHP-FPM: 7.0\nxdebug: 2.4\nRedis: 3.2\n\n\n3. \u5229\u7528\u65b9\u6cd5\n\n3.1. \u30ed\u30fc\u30ab\u30ebPC\u306bDocker\u30b3\u30f3\u30c6\u30ca\u3068\u5171\u6709\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\nmkdir -p ~/public/data-volume/workspace\nmkdir ~/public/data-volume/www\n\n\ndata-volume\u30c7\u30a3\u30ec\u30af\u30c8\u30ea(\u914d\u7f6e\u5834\u6240\u306fHOME\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u914d\u4e0b\u306e\u4efb\u610f\u306e\u5834\u6240)\nDocker\u30b3\u30f3\u30c6\u30ca\u306e/develop\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002\ndata-volume/workspace\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\nWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\ndata-volume/www\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\nWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u516c\u958b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002  \n\n\n3.2. Docker\u30b3\u30f3\u30c6\u30ca\u306e\u53d6\u5f97\u3068\u8d77\u52d5\ndocker run -d \\\n -v ~/public/data-volume:/develop:rw \\\n -p 80:80 \\\n -p 443:443 \\\n -p 3901:3306 \\\n -p 9901:9001 \\\n -t -i \\\n -h develop-server-01 \\\n --name develop-server-01 \\\n accon/ubuntu-nginx-phpfpm-redis-mysql\n\n\n3.4. \u52d5\u4f5c\u78ba\u8a8d\u7528\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u7f6e\n~/public/data-volume/www\u30c7\u30a3\u30ec\u30af\u30ea\u914d\u4e0b\u306bindex.php\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3002\n\n\nindex.php\u306e\u5185\u5bb9\n<?php phpinfo();\n\n\n\n\n3.5. \u52d5\u4f5c\u78ba\u8a8d\n\u4e0b\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057PHP\u306e\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002\n\nhttp://127.0.0.1\nhttps://127.0.0.1\n\n\n4. \u3088\u304f\u4f7f\u3046Docker\u30b3\u30f3\u30c6\u30ca\u3092\u5236\u5fa1\u3059\u308b\u30b3\u30de\u30f3\u30c9\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u63a5\u7d9a\nbash:\ndocker exec -it develop-server-01 bash\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30bf\u30fc\u30c8\nbash:\ndocker start develop-server-01\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30c8\u30c3\u30d7\nbash:\ndocker stop develop-server-01\n\n\u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664\nbash:\ndocker rm develop-server-01\n\n\u8d77\u52d5\u4e2d\u30b3\u30f3\u30c6\u30ca\u306e\u78ba\u8a8d\nbash:\ndocker ps\n\n\u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u78ba\u8a8d\nbash:\ndocker ps -a\n\n\n\n## \u25cb[Dockerfile\u306f\u3001\u3053\u3061\u3089(GitHub)](https://github.com/maemori/accon/blob/master/docker/ubuntu-nginx-phpfpm-redis-mysql/Dockerfile)\n\n## \u25cb[Dockerfile\u4e00\u5f0f\u306f\u3001\u3053\u3061\u3089\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9](https://kurobuta.jp/download/get/15)\n\n-----\n\n## 1. \u6982\u8981\n\nPHP\u30fbWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u7279\u5316\u3057\u305f\u30ed\u30fc\u30ab\u30eb\u958b\u767a\u74b0\u5883\u3002  \n\u30ed\u30fc\u30ab\u30ebPC\u306e\u958b\u767a\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092Docker\u30b3\u30f3\u30c6\u30ca\u3068\u5171\u6709\u3057\u3001\u305d\u306eUbuntu\u4e0a\u3067\u5b9f\u884c\u30fb\u958b\u767a\u30fb\u30c7\u30d0\u30c3\u30b0\u3092\u884c\u3046\u305f\u3081\u306e\u74b0\u5883\u3002\n\n## 2. \u69cb\u6210\u30d0\u30fc\u30b8\u30e7\u30f3\n\n * Ubuntu: 16.10 LTS (\u65e5\u672c\u8a9e\u5bfe\u5fdc)\n * Nginx: 1.10\n * PHP: 7.0\n * MySQL: 5.7\n * PHP-FPM: 7.0\n * xdebug: 2.4\n * Redis: 3.2\n\n## 3. \u5229\u7528\u65b9\u6cd5\n\n### 3.1. \u30ed\u30fc\u30ab\u30ebPC\u306bDocker\u30b3\u30f3\u30c6\u30ca\u3068\u5171\u6709\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n\n``` bash:\nmkdir -p ~/public/data-volume/workspace\nmkdir ~/public/data-volume/www\n```\n\n * data-volume\u30c7\u30a3\u30ec\u30af\u30c8\u30ea(\u914d\u7f6e\u5834\u6240\u306fHOME\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u914d\u4e0b\u306e\u4efb\u610f\u306e\u5834\u6240)  \n  Docker\u30b3\u30f3\u30c6\u30ca\u306e/develop\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30de\u30a6\u30f3\u30c8\u3055\u308c\u307e\u3059\u3002\n\n * data-volume/workspace\u30c7\u30a3\u30ec\u30af\u30c8\u30ea  \n  Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n * data-volume/www\u30c7\u30a3\u30ec\u30af\u30c8\u30ea  \n  Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u516c\u958b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u307e\u3059\u3002  \n\n### 3.2. Docker\u30b3\u30f3\u30c6\u30ca\u306e\u53d6\u5f97\u3068\u8d77\u52d5\n\n```bash:\ndocker run -d \\\n -v ~/public/data-volume:/develop:rw \\\n -p 80:80 \\\n -p 443:443 \\\n -p 3901:3306 \\\n -p 9901:9001 \\\n -t -i \\\n -h develop-server-01 \\\n --name develop-server-01 \\\n accon/ubuntu-nginx-phpfpm-redis-mysql\n```\n\n### 3.4. \u52d5\u4f5c\u78ba\u8a8d\u7528\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u7f6e\n\n~/public/data-volume/www\u30c7\u30a3\u30ec\u30af\u30ea\u914d\u4e0b\u306bindex.php\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3002\n\n* index.php\u306e\u5185\u5bb9\n\n    ```php\n    <?php phpinfo();\n    ```\n\n#### 3.5. \u52d5\u4f5c\u78ba\u8a8d\n\n\u4e0b\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3057PHP\u306e\u60c5\u5831\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3002\n\n* [http://127.0.0.1](http://127.0.0.1)\n* [https://127.0.0.1](https://127.0.0.1)\n\n## 4. \u3088\u304f\u4f7f\u3046Docker\u30b3\u30f3\u30c6\u30ca\u3092\u5236\u5fa1\u3059\u308b\u30b3\u30de\u30f3\u30c9\n\n* \u30b3\u30f3\u30c6\u30ca\u306e\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u63a5\u7d9a\n```bash:\ndocker exec -it develop-server-01 bash\n```\n\n* \u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30bf\u30fc\u30c8\n```bash:\ndocker start develop-server-01\n```\n\n* \u30b3\u30f3\u30c6\u30ca\u306e\u30b9\u30c8\u30c3\u30d7\n```bash:\ndocker stop develop-server-01\n```\n\n* \u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664\n```bash:\ndocker rm develop-server-01\n```\n\n* \u8d77\u52d5\u4e2d\u30b3\u30f3\u30c6\u30ca\u306e\u78ba\u8a8d\n```bash:\ndocker ps\n```\n* \u5168\u3066\u306e\u30b3\u30f3\u30c6\u30ca\u306e\u78ba\u8a8d\n```bash:\ndocker ps -a\n```\n", "tags": ["docker", "PHP", "xdebug", "MySQL"]}