{"tags": ["Rails", "memo"], "context": " More than 1 year has passed since last update.\n\n\u5c0f\u5b66\u751f\u3067\u3082\u308f\u304b\u308bRuby on Rails\u5165\u9580 | OpenBook\u306e\u5b66\u7fd2\u30e1\u30e2\n\n\nvim-rails\u304c\u4fbf\u5229\ncd ~/.vim\ngit clone https://github.com/tpope/vim-rails\necho \"set runtimepath+=${HOME}/.vim/vim-rails/\" >> ~/.vimrc\n\n\n\n:R\u3067view<-->contoller\u3092\u5207\u308a\u66ff\u3048\u3089\u308c\u308b\u3002\n:Vview\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u6e96\u5099\napt-get install -y sqlite3 libsqlite3-dev zlib1g-dev\ngem install rails\ngem install rake\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nrails new twitter\ncd twitter\n\n\n\nusers/show\u4f5c\u6210\n\nview\u3068controller\u4f5c\u6210\nrails g controller users \\\n index show\n\n\n\n3000\u30dd\u30fc\u30c8\nrails s\n\n\n\nhttp://localhost:3000/users/show\n\n\nget\u5024\u306e\u53d6\u5f97\n\nconfig/routes.rb\nget 'users/index'\nget 'users/show'\nget 'users/show/:username' => \"users#show\"\n\n\n\nusers/show/:username \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3089 UsersController\u306eshow\u3092\u660e\u793a\u7684\u306b\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3002\nget\u5024\u306e\u53c2\u7167 => params[:username]\n\n\n\nDB\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 : \u30ce\u30fc\u30c8\n\u30b9\u30ad\u30fc\u30de\u3000\u3000 : \u60c5\u5831\u3092\u5165\u529b\u3059\u308b\u305f\u3081\u306e\u5171\u901a\u306e\u67a0\n\n\nDB\u306e\u4f5c\u6210\nrake db:create\n\n\n\ndb/development.sqlite3 \u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n\nmigrate\nrails g model user \\\n  name:string \\\n  username:string \\\n  location:string \\\n  about:text\n\n\nsqlite3\u306b\u53cd\u6620\nrake db:migrate\n\n\n\n\u521d\u671f\u30c7\u30fc\u30bf\n\ndb/seeds.rb\n@user = User.new\n@user.name = 'Ryo Suzuki'\n@user.username = 'ryooopan'\n@user.location = 'Kanagawa, Japan'\n@user.about = 'Hello, I am Ryo. I am from database!'\n@user.save\n\n@user = User.new\n@user.name = 'Shohei Aoki'\n@user.username = 'moyahima'\n@user.location = 'Tottori, Japan'\n@user.about = 'Nice to meet you. I am from database!'\n@user.save\n\n\n\n\u521d\u671f\u30c7\u30fc\u30bf\u6295\u5165\nrake db:seed\n\n\n\n\u691c\u7d22\n@user = User.find_by(:username => params[:username])\n\n\n\napp/views/users/show.html.erb\n<h1><%= @user[:name] %></h1>\n<p><%= @user[:username] %></p>\n<ul>\n  <li>Location : <%= @user[:location] %></li>\n  <li>About    : <%= @user[:about] %></li>\n</ul>\n\n\n\n\ntwitter\u3063\u307d\u3044\u3084\u3064\n\nrails g\n\nview\u3068contoller\u4f5c\u6210\nrails g controller tweets \\\n index show new\n\n\n\nmodel\u4f5c\u6210\nrails g model tweet \\\n title:string \\\n content:text\n\n\nrake db:migrate\n\n\nhttp://0.0.0.0:3000/tweets/new\n\n\napp/views/tweets/index.html.erb\n<a href=\"/tweets/new\">\u6295\u7a3f</a>\n\n<% @tweets.each do |tweet| %>\n  <h1><%= tweet.title %></h1>\n  <p><%= tweet.content %></p>\n<% end %>\n\n\n\napp/views/tweets/new.html.erb\n<%= form_for Tweet.new do |f| %>\n  <%= f.label :title %>\n  <%= f.text_field :title %>\n  <%= f.label :content %>\n  <%= f.text_area :content %>\n  <%= f.submit %>\n<% end %>\n\n\n\nconfig/routes.rb\nget 'tweets/index'\nget 'tweets/show'\nget 'tweets/new'\npost 'tweets' => \"tweets#create\"\n\n\n\n\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\n\napp/controllers/tweets_controller.rb\n  def create\n    @tweet = Tweet.new\n    @tweet.title = params[:tweet][:title]\n    @tweet.content = params[:tweet][:content]\n    @tweet.save\n    redirect_to '/tweets/index'\n  end\n\n\n\npost\u3057\u305f\u3089 /tweets/index \u306b\u98db\u3076\n\nclass TweetsController < ApplicationController\n  def index\n    @tweets = Tweet.all\n  end\n...\n\n\n\n\u5225\u306e\u66f8\u304d\u65b9\n\n\u88dc\u8db3 (\u5c0f\u5b66\u751f\u3067\u3082\u308f\u304b\u308bRuby on Rails\u5165\u9580) | OpenBook\n\n\nconfig/routes.rb\nresources :tweets\nresources :users\n\n\n\u4fdd\u5b58\u6642\u306e\u30a8\u30e9\u30fc\u5bfe\u5fdc\n\nruby on rails - ActiveModel::ForbiddenAttributesError when creating new user - Stack Overflow\n\n\napp/controllers/application_controller.rb\n  class ApplicationController < ActionController::Base\n    # Prevent CSRF attacks by raising an exception.\n    # For APIs, you may want to use :null_session instead.\n    protect_from_forgery with: :exception\n\n+   before_filter do\n+     resource = controller_name.singularize.to_sym\n+     method = \"#{resource}_params\"\n+     params[resource] &&= send(method) if respond_to?(method, true)\n+   end\n  end\n\n\n\napp/controllers/tweets_controller.rb\n  class TweetsController < ApplicationController\n\n    def create\n-     @tweet = Tweet.new\n-     @tweet.title = params[:tweet][:title]\n-     @tweet.content = params[:tweet][:content]\n-     @tweet.save\n-     params.permit!\n+     @tweet = Tweet.create(params[:tweet])\n      redirect_to '/tweets'\n    end\n\n+   private\n+   def tweet_params\n+     params.require(:tweet).permit(:title,:content)\n+   end\n\n  end\n\n\n* [\u5c0f\u5b66\u751f\u3067\u3082\u308f\u304b\u308bRuby on Rails\u5165\u9580 | OpenBook](http://openbook4.me/projects/92/)\u306e\u5b66\u7fd2\u30e1\u30e2\n\n## vim-rails\u304c\u4fbf\u5229\n\n```bash:\ncd ~/.vim\ngit clone https://github.com/tpope/vim-rails\necho \"set runtimepath+=${HOME}/.vim/vim-rails/\" >> ~/.vimrc\n```\n\n* `:R`\u3067view<-->contoller\u3092\u5207\u308a\u66ff\u3048\u3089\u308c\u308b\u3002\n* `:Vview`\n\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u6e96\u5099\n\n```bash:\napt-get install -y sqlite3 libsqlite3-dev zlib1g-dev\ngem install rails\ngem install rake\n```\n\n```bash:\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nrails new twitter\ncd twitter\n```\n\n## users/show\u4f5c\u6210\n\n```ruby:view\u3068controller\u4f5c\u6210\nrails g controller users \\\n index show\n```\n\n```bash:3000\u30dd\u30fc\u30c8\nrails s\n```\n\n* http://localhost:3000/users/show\n\n## get\u5024\u306e\u53d6\u5f97\n\n```rb:config/routes.rb\nget 'users/index'\nget 'users/show'\nget 'users/show/:username' => \"users#show\"\n```\n\n* users/show/:username \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3089 UsersController\u306eshow\u3092\u660e\u793a\u7684\u306b\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u610f\u5473\u3002\n* get\u5024\u306e\u53c2\u7167 => `params[:username]`\n\n\n## DB\n\n* \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9 : \u30ce\u30fc\u30c8\n* \u30b9\u30ad\u30fc\u30de\u3000\u3000 : \u60c5\u5831\u3092\u5165\u529b\u3059\u308b\u305f\u3081\u306e\u5171\u901a\u306e\u67a0\n\n```bash:DB\u306e\u4f5c\u6210\nrake db:create\n```\n\n* db/development.sqlite3 \u304c\u751f\u6210\u3055\u308c\u308b\u3002\n\n## migrate\n\n```bash:\nrails g model user \\\n  name:string \\\n  username:string \\\n  location:string \\\n  about:text\n```\n\n```bash:sqlite3\u306b\u53cd\u6620\nrake db:migrate\n```\n\n## \u521d\u671f\u30c7\u30fc\u30bf\n\n```bash:db/seeds.rb\n@user = User.new\n@user.name = 'Ryo Suzuki'\n@user.username = 'ryooopan'\n@user.location = 'Kanagawa, Japan'\n@user.about = 'Hello, I am Ryo. I am from database!'\n@user.save\n\n@user = User.new\n@user.name = 'Shohei Aoki'\n@user.username = 'moyahima'\n@user.location = 'Tottori, Japan'\n@user.about = 'Nice to meet you. I am from database!'\n@user.save\n```\n\n```bash:\u521d\u671f\u30c7\u30fc\u30bf\u6295\u5165\nrake db:seed\n```\n\n```bash:\u691c\u7d22\n@user = User.find_by(:username => params[:username])\n```\n\n```erb:app/views/users/show.html.erb\n<h1><%= @user[:name] %></h1>\n<p><%= @user[:username] %></p>\n<ul>\n  <li>Location : <%= @user[:location] %></li>\n  <li>About    : <%= @user[:about] %></li>\n</ul>\n```\n\n----\n\n# twitter\u3063\u307d\u3044\u3084\u3064\n\n## rails g\n\n```bash:view\u3068contoller\u4f5c\u6210\nrails g controller tweets \\\n index show new\n```\n\n```bash:model\u4f5c\u6210\nrails g model tweet \\\n title:string \\\n content:text\n```\n\n```\nrake db:migrate\n```\n\n* http://0.0.0.0:3000/tweets/new\n\n```rb:app/views/tweets/index.html.erb\n<a href=\"/tweets/new\">\u6295\u7a3f</a>\n\n<% @tweets.each do |tweet| %>\n  <h1><%= tweet.title %></h1>\n  <p><%= tweet.content %></p>\n<% end %>\n```\n\n```erb:app/views/tweets/new.html.erb\n<%= form_for Tweet.new do |f| %>\n  <%= f.label :title %>\n  <%= f.text_field :title %>\n  <%= f.label :content %>\n  <%= f.text_area :content %>\n  <%= f.submit %>\n<% end %>\n```\n\n```rb:config/routes.rb\nget 'tweets/index'\nget 'tweets/show'\nget 'tweets/new'\npost 'tweets' => \"tweets#create\"\n```\n\n## \u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\n\n```bash:app/controllers/tweets_controller.rb\n  def create\n    @tweet = Tweet.new\n    @tweet.title = params[:tweet][:title]\n    @tweet.content = params[:tweet][:content]\n    @tweet.save\n    redirect_to '/tweets/index'\n  end\n```\n\n* post\u3057\u305f\u3089 /tweets/index \u306b\u98db\u3076\n\n```rb:\nclass TweetsController < ApplicationController\n  def index\n    @tweets = Tweet.all\n  end\n...\n```\n\n----\n\n# \u5225\u306e\u66f8\u304d\u65b9\n\n* [\u88dc\u8db3 (\u5c0f\u5b66\u751f\u3067\u3082\u308f\u304b\u308bRuby on Rails\u5165\u9580) | OpenBook](http://openbook4.me/projects/92/sections/503)\n\n## config/routes.rb\n\n```rb:\nresources :tweets\nresources :users\n```\n\n## \u4fdd\u5b58\u6642\u306e\u30a8\u30e9\u30fc\u5bfe\u5fdc\n\n* [ruby on rails - ActiveModel::ForbiddenAttributesError when creating new user - Stack Overflow](http://stackoverflow.com/questions/17335329/activemodelforbiddenattributeserror-when-creating-new-user)\n\n```diff:app/controllers/application_controller.rb\n  class ApplicationController < ActionController::Base\n    # Prevent CSRF attacks by raising an exception.\n    # For APIs, you may want to use :null_session instead.\n    protect_from_forgery with: :exception\n  \n+   before_filter do\n+     resource = controller_name.singularize.to_sym\n+     method = \"#{resource}_params\"\n+     params[resource] &&= send(method) if respond_to?(method, true)\n+   end\n  end\n```\n\n```diff:app/controllers/tweets_controller.rb\n  class TweetsController < ApplicationController\n\n    def create\n-     @tweet = Tweet.new\n-     @tweet.title = params[:tweet][:title]\n-     @tweet.content = params[:tweet][:content]\n-     @tweet.save\n-     params.permit!\n+     @tweet = Tweet.create(params[:tweet])\n      redirect_to '/tweets'\n    end\n\n+   private\n+   def tweet_params\n+     params.require(:tweet).permit(:title,:content)\n+   end\n\n  end\n```\n"}