{"context": "\n\nEMLauncher\u306b\u3064\u3044\u3066\n\nEMLauncher\u306fKLab\u3055\u3093\u958b\u767a\u306eAndroid/iOS\u5411\u3051\u30c6\u30b9\u30c8\u30a2\u30d7\u30ea\u914d\u4fe1\u30c4\u30fc\u30eb\n\u624b\u9806\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u304c\u7701\u7565\u3057\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u624b\u9806\u306f\u3060\u3044\u305f\u3044\u306e\u3053\u3068\u3057\u304b\u66f8\u304b\u304b\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3082\u3046\u5c11\u3057\u8a73\u3057\u3044\u624b\u9806\u3092\u516c\u958b\u3057\u307e\u3057\u305f\n\u5b9f\u65bd\u74b0\u5883\u306fDebianGNULinux7\uff08Wheezy\uff09\u3067\u3059\u3002CentOS\u306a\u3069\u4f7f\u7528\u306e\u5834\u5408\u306f\u9069\u5f53\u306b\u8aad\u307f\u66ff\u3048\u3066\u4e0b\u3055\u3044\n\n\n\u524d\u63d0\u6761\u4ef6\n\n\u9001\u4fe1\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u7acb\u3066\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\n.htaccess\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\nrewrite_module\u3092\u6709\u52b9\nDB\u306eID\u767b\u9332\u306fSQL\u76f4\u6253\u3061\u3067\u3059\nAWS\u3067S3\u3068IAM\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\n\n\n\u57fa\u672c\u8a2d\u5b9a\n\n\u4ee5\u4e0b\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u53c2\u7167\nhttps://github.com/KLab/emlauncher\n\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u60c5\u5831\u306f\u8a2d\u5b9a\u60c5\u5831\u3068\u3057\u3066\u306f\u4e00\u90e8\u3067\u3059\nAWS\u6e96\u5099\n\n\nAWS\u30a2\u30ab\u30a6\u30f3\u30c8\u7528\u610f\u3057\u307e\u3057\u3087\u3046\n\n\nIAM\u8a2d\u5b9a\n\n\n\u8a73\u7d30\u306f\u7701\u7565\u3057\u307e\u3059\n\n\n\n\nS3\u8a2d\u5b9a\n\n\n\u8a73\u7d30\u306f\u7701\u7565\u3057\u307e\u3059\n\n\n\n\n\n\nHTTP\u8a2d\u5b9a\n\nHTTP\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\napache\u57fa\u672c\u8a2d\u5b9a\n\n #ServerRoot \"/etc/apache2\"\nMutex file:${APACHE_LOCK_DIR} default\nPidFile ${APACHE_PID_FILE}\nTimeout 300\nKeepAlive On\nMaxKeepAliveRequests 100\nKeepAliveTimeout 5\nUser ${APACHE_RUN_USER}\nGroup ${APACHE_RUN_GROUP}\nHostnameLookups Off\nErrorLog ${APACHE_LOG_DIR}/error.log\nLogLevel warn\nIncludeOptional mods-enabled/*.load\nIncludeOptional mods-enabled/*.conf\nInclude ports.conf\n<Directory />\n        Options FollowSymLinks\n        AllowOverride None\n        Require all denied\n</Directory>\n<Directory /usr/share>\n        AllowOverride None\n        Require all granted\n</Directory>\n<Directory /var/www/>\n        Options Indexes FollowSymLinks\n        AllowOverride None\n        Require all granted\n</Directory>\nAccessFileName .htaccess\n<FilesMatch \"^\\.ht\">\n        Require all denied\n        #Require all granted\n</FilesMatch>\nLogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O\" common\nLogFormat \"%{Referer}i -> %U\" referer\nLogFormat \"%{User-agent}i\" agent\nIncludeOptional conf-enabled/*.conf\nIncludeOptional sites-enabled/*.conf\n\n\n\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u8a2d\u5b9a\n\n\u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306a\u3069\u500b\u5225\u306e\u8a2d\u5b9a\u306f\u95a2\u4fc2\u306a\u3044\u306e\u3067\u7121\u8996\u3057\u3066\u4e0b\u3055\u3044\n\n<VirtualHost *:80>\n        ServerName emlauncher.hoge.net\n        ServerAdmin webmaster@localhost\n        DocumentRoot /var/source/emlauncher/web\n        DirectoryIndex index.html index.php\n        AddDefaultCharset UTF-8\n        SetEnvIf Request_URI \"\\.(jpg|png|gif|css|js|ico)$\" nolog\n        SetEnv MFW_ENV 'ec2'\n        ErrorLog ${APACHE_LOG_DIR}/emlauncher-error.log\n        CustomLog ${APACHE_LOG_DIR}/emlauncher-access.log combined\n        <Directory \"/var/source/emlauncher/web\">\n         AuthType Basic\n         AuthName \"Please enter your ID and password\"\n         AuthUserFile /etc/apache2/.htpasswd\n         require valid-user\n         Satisfy Any\n         Order Deny,Allow\n         Allow from xx.xx.xx.xx/32\n         Deny from all\n         Options FollowSymLinks MultiViews\n         AllowOverride All\n         Require all granted\n        </Directory>\n</VirtualHost>\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n/var/source/emlauncher/config/emlauncher_config_sample.php\u3092\u30b3\u30d4\u30fc\u3057\u3066\u7de8\u96c6\u3059\u308b\n\n$ ls -la /var/source/emlauncher/\ntotal 68\ndrwxr-xr-x 10 appuser appuser 4096 Nov 21 15:55 .\ndrwxr-xr-x 23 admin   admin   4096 Nov 16 16:57 ..\ndrwxr-xr-x  2 appuser appuser 4096 Nov 16 21:50 config\ndrwxr-xr-x  5 appuser appuser 4096 Nov 16 16:57 data\ndrwxr-xr-x  9 appuser appuser 4096 Nov 16 17:11 .git\n-rw-r--r--  1 appuser appuser  132 Nov 16 16:57 .gitignore\n-rw-r--r--  1 appuser appuser  193 Nov 16 16:57 .gitmodules\n-rw-r--r--  1 appuser appuser  948 Nov 16 16:57 initialize.php\ndrwxr-xr-x  5 appuser appuser 4096 Nov 16 16:57 libs\n-rw-r--r--  1 appuser appuser 1076 Nov 16 16:57 LICENSE.txt\ndrwxr-xr-x 12 appuser appuser 4096 Nov 16 16:57 mainmodules\ndrwxr-xr-x  6 appuser appuser 4096 Nov 16 17:11 mfw\ndrwxr-xr-x  2 appuser appuser 4096 Nov 16 16:57 model\n-rw-r--r--  1 appuser appuser 2148 Nov 16 16:57 README(EN).md\n-rw-r--r--  1 appuser appuser 2387 Nov 16 16:57 README.md\n-rwxr-xr-x  1 appuser appuser    5 Nov 18 21:38 test.html\ndrwxr-xr-x  3 appuser appuser 4096 Nov 21 17:22 web\n\n<?php\n/**@file\n * EMLauncher\u8a2d\u5b9a.\n * emlauncher_config.php\u306b\u30ea\u30cd\u30fc\u30e0\u3059\u308b.\n */\nrequire_once APP_ROOT.'/libs/aws/aws-autoloader.php';\n$emlauncher_config = array(\n        /** EC2\u74b0\u5883\u7528\u306e\u8a2d\u5b9a (httpd.conf\u3067SetEnv MFW_ENV 'ec2') */\n        'ec2' => array(\n                /**\n                 * \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u901a\u77e5\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u5143\u30a2\u30c9\u30ec\u30b9.\n                 */\n                'mail_sender' => 'hogeEmLauncherAdmin <no-reply@hoge.emlauncher.net>',\n                /**\n                 * \u30bf\u30a4\u30c8\u30eb\u7b49\u306b\u3064\u3051\u308bprefix\n                 */\n                'title_prefix' => 'Application_Name_',\n                /**\n                 * HTTPS\u3067\u52d5\u4f5c\u3055\u305b\u308b.\n                 * \u30ed\u30b0\u30a4\u30f3\u6642\u306bHTTPS\u3067\u7121\u304b\u3063\u305f\u5834\u5408\u3001HTTPS\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b.\n                 */\n                'enable_https' => false,\n                /** \u30ed\u30b0\u30a4\u30f3\u306e\u8a2d\u5b9a. */\n                'login' => array(\n                        /**\n                         * email+password\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3092\u8a31\u53ef.\n                         * `user_pass`\u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u306b\u3059\u308b.\n                         * @note\n                         *  \u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3059\u308b\u6642\u306f`user_pass`\u30c6\u30fc\u30d6\u30eb\u306b`email`\u306e\u307f\u3092\u767b\u9332\u3057\n                         *  \u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u624b\u9806\u3092\u8e0f\u3080\u3053\u3068\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u767b\u9332\u3059\u308b.\n                         */\n                        'enable_password' => true,\n                        /**\n                         * Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u8a31\u53ef.\n                         * \u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c'allowed_mailaddr_pattern'\u306b\u30de\u30c3\u30c1\u3059\u308b\u304b,\n                         * user_pass\u30c6\u30fc\u30d6\u30eb\u306b\u5b58\u5728\u3057\u305f\u3089\u30ed\u30b0\u30a4\u30f3\u3092\u8a8d\u3081\u308b.\n                         *\n                         * \u5229\u7528\u3059\u308b\u5834\u5408, \u4e8b\u524d\u306bgoogole\u306b\u30a2\u30d7\u30ea\u3092\u767b\u9332\u3057\u3066OAuth\u306eID, Secret\u3092\u767a\u884c\u3057\u3066\u304a\u304f.\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//google\u306eOauth\u8a8d\u8a3c\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067OFF\u306b\u3057\u3066\u304a\u304f\n                         */\n                        'enable_google_auth' => false,\n                        'google_app_id' => 'xxxxxxxx.apps.googleusercontent.com',\n                        'google_app_secret' => 'xxxxxxxx',\n                        'allowed_mailaddr_pattern' => '/@klab\\.com$/',\n                        ),\n                /** AWS\u306e\u8a2d\u5b9a */\n                'aws' => array(\n                        /**\n                         * API\u30a2\u30af\u30bb\u30b9\u306e\u305f\u3081\u306eKey\u3068Secret.\n                         */\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//IAM\u3067\u4ee5\u4e0b\u306eKey\u3092\u53d6\u5f97\u3057\u3066\u304a\u304f\u3002\u540c\u3058\u5024\u306e\u53d6\u5f97\u306f\u4e00\u5ea6\u304d\u308a\u306a\u306e\u3067\u6c17\u3092\u3064\u3051\u308b\u3053\u3068\n                        'key' => 'AKIXXXXXXXXXXXW7A',\n                        'secret' => '1XqXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXSaY',\n                        /** S3\u306eRegion. */\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u3042\u308c\u3070\u30b5\u30f3\u30d7\u30eb\u3068\u540c\u3058\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u66f8\u5f0f\u3067\u554f\u984c\u306a\u3044\n                        'region' => Aws\\Common\\Enum\\Region::TOKYO,\n                        /** S3\u306ebucket\u540d. \u4e88\u3081\u4f5c\u6210\u3057\u3066\u304a\u304f. */\n                        'bucket_name' => 'hoge-emlauncher',\n                        ),\n                ),\n        );\n/**\n * \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u7528\u306e\u8a2d\u5b9a. (MFW_ENV=local)\n * Google\u30a2\u30ab\u30a6\u30f3\u30c8\u8a8d\u8a3c\u3092\u7121\u52b9\u306b\u3057\u3001bucket\u540d\u3082\u5909\u66f4\u3057\u3066\u3044\u308b.\n */\n$emlauncher_config['local'] = $emlauncher_config['ec2'];\n$emlauncher_config['local']['login']['enable_google_auth'] = false;\n$emlauncher_config['local']['aws']['bucket_name'] = 'emlauncher-dev';\n\n\n\u305d\u306e\u4ed6\u624b\u9806\n\n\u4ee5\u4e0b\u306f\u8a2d\u5b9a\u4e2d\u5f15\u3063\u639b\u304b\u3063\u305f\u7b87\u6240\u3092\u7e8f\u3081\u3066\u3044\u307e\u3059\n\u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u624b\u9806\u3092\u884c\u3046\u524d\u306b\u78ba\u8a8d\u3057\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\n\u30ed\u30fc\u30ab\u30eb\u306b\u9001\u4fe1\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\u8a73\u7d30\u306f\u7aef\u6298\u3063\u3066\u307e\u3059\u3002mail\u30b3\u30de\u30f3\u30c9\u304c\u6a19\u6e96\u3067\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u4f7f\u3048\u308b\u3068\u3053\u308d\u307e\u3067\u8a2d\u5b9a\u3059\u308b\u3053\u3068\nGMail\u3067\u30e1\u30fc\u30eb\u53d7\u4fe1\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\n\n$ sudo apt-get install postfix\n$ sudo apt-get install chkconfig\n$ sudo chkconfig postfix on\n$ sudo apt-get install aptitude\n$ sudo aptitude install bsd-mailx\n$ sudo aptitude install exim4\n$ which mail\n$ echo testmail | mail user@hoge.jp\n\n\nmain.php\u3067Rwrite\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304c\u6a19\u6e96\u3067\u306f\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n$ sudo apache2ctl -M | grep rewrite_module\n$ sudo a2enmod rewrite\n$ sudo apache2ctl -M | grep rewrite_module\n\n\n\u30e6\u30fc\u30b6\u8ffd\u52a0\u306fSQL\u76f4\u6253\u3061\u3067\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u767b\u9332\u3057\u305f\u3089\u30d6\u30e9\u30a6\u30b6\u753b\u9762\u304b\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u518d\u8a2d\u5b9a\u3059\u308b\n\n$ mysql\nmysql > use emlauncher\nmysql > INSERT INTO user_pass (mail) VALUES ('ezaki@geeplus.jp');\nmysql > exit\n\n\n\u30a2\u30d7\u30ea\u3092\u767b\u9332\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u753b\u50cf\u304c\u5727\u7e2e\u3067\u304d\u306a\u304f\u3066\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u308a\u3059\u308b\nimagick\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u3084\u3084\u3053\u3057\u304fComposer\u306e\u307b\u3046\u304c\u7c21\u5358\u3089\u3057\u3044\n\u4ee5\u4e0b\u306f\u5c11\u6570\u6d3e\u306epecl\u3067\u306e\u5c0e\u5165\u65b9\u6cd5\u3002\u203bphpinfo\u3067\u78ba\u8a8d\u3059\u308b\u3053\u3068\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u5fc5\u305aphp.ini\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\n\n$ sudo apt-get update\n$ sudo apt-get install libmagickwand-dev\n$ sudo apt-get install php5-dev\n$ sudo apt-get install php-pear\n$ sudo pecl install imagick\n:\nPlease provide the prefix of Imagemagick installation [autodetect] : \uff08\u203b\u4f55\u3082\u5165\u529b\u305b\u305aEnter\u30ad\u30fc\u62bc\u4e0b\uff09\n\n$ vi /etc/php5/cli/php.ini\n:\n;APPEND hoge.corp Config\nextension=imagick.so\n\n\ncurl\u306e\u30a8\u30e9\u30fc\u3068\u306a\u308bGuzzle\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u5fc5\u8981\u3068\u306a\u308b\u304c\u306a\u304b\u306a\u304b\u826f\u3044\u60c5\u5831\u304c\u7121\u3044\u3002\u4ee5\u4e0b\u3067\u5bfe\u5fdc\n\n$ sudo apt-get install php5-curl\n$ sudo pear channel-discover guzzlephp.org/pear\n$ sudo pear remote-list -c guzzle\n$ sudo pear upgrade PEAR\n$ sudo pear channel-discover pear.symfony.com\n$ sudo pear install guzzle/Guzzle-3.9.0\n$ sudo /etc/init.d/apache2 restart\n\n\n\u30ed\u30b0\u30a4\u30f3\u306b\u3064\u3044\u3066\n\n\u30b5\u30fc\u30d0\u7ba1\u7406\u8005\u304cSQL\u3067\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u30d9\u30fc\u30b9\u306e\u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\n\u30d6\u30e9\u30a6\u30b6\u3067EMLauncher\u306b\u30a2\u30af\u30bb\u30b9\u3057\u300cforget password\u300d\u304b\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u8a2d\u5b9a\u3057\u3066\u4e0b\u3055\u3044\n\n\n\n\n# EMLauncher\u306b\u3064\u3044\u3066\n- EMLauncher\u306fKLab\u3055\u3093\u958b\u767a\u306eAndroid/iOS\u5411\u3051\u30c6\u30b9\u30c8\u30a2\u30d7\u30ea\u914d\u4fe1\u30c4\u30fc\u30eb\n- \u624b\u9806\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u304c\u7701\u7565\u3057\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308a\u307e\u3059\n- \u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u624b\u9806\u306f\u3060\u3044\u305f\u3044\u306e\u3053\u3068\u3057\u304b\u66f8\u304b\u304b\u308c\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u3082\u3046\u5c11\u3057\u8a73\u3057\u3044\u624b\u9806\u3092\u516c\u958b\u3057\u307e\u3057\u305f\n- \u5b9f\u65bd\u74b0\u5883\u306fDebianGNULinux7\uff08Wheezy\uff09\u3067\u3059\u3002CentOS\u306a\u3069\u4f7f\u7528\u306e\u5834\u5408\u306f\u9069\u5f53\u306b\u8aad\u307f\u66ff\u3048\u3066\u4e0b\u3055\u3044\n\n# \u524d\u63d0\u6761\u4ef6\n- \u9001\u4fe1\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u3092\u7acb\u3066\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\n- .htaccess\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u307e\u3059\n- rewrite_module\u3092\u6709\u52b9\n- DB\u306eID\u767b\u9332\u306fSQL\u76f4\u6253\u3061\u3067\u3059\n- AWS\u3067S3\u3068IAM\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\n\n# \u57fa\u672c\u8a2d\u5b9a\n- \u4ee5\u4e0b\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u53c2\u7167\nhttps://github.com/KLab/emlauncher\n- \u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u60c5\u5831\u306f\u8a2d\u5b9a\u60c5\u5831\u3068\u3057\u3066\u306f\u4e00\u90e8\u3067\u3059\n- AWS\u6e96\u5099\n - AWS\u30a2\u30ab\u30a6\u30f3\u30c8\u7528\u610f\u3057\u307e\u3057\u3087\u3046\n- IAM\u8a2d\u5b9a\n - \u8a73\u7d30\u306f\u7701\u7565\u3057\u307e\u3059\n  ![EMlauncher_IAM.JPG](https://qiita-image-store.s3.amazonaws.com/0/57350/ef8ae7e5-79b0-7085-810e-8d280fd004f8.jpeg)\n- S3\u8a2d\u5b9a\n - \u8a73\u7d30\u306f\u7701\u7565\u3057\u307e\u3059\n  ![EMLauncher_S3.png](https://qiita-image-store.s3.amazonaws.com/0/57350/2bc98f37-fdde-88d4-157c-ccc17a5d46b0.png)\n\n\n# HTTP\u8a2d\u5b9a\n- HTTP\u306e\u8a2d\u5b9a\u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u30b5\u30f3\u30d7\u30eb\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\n- apache\u57fa\u672c\u8a2d\u5b9a\n\n~~~\n #ServerRoot \"/etc/apache2\"\nMutex file:${APACHE_LOCK_DIR} default\nPidFile ${APACHE_PID_FILE}\nTimeout 300\nKeepAlive On\nMaxKeepAliveRequests 100\nKeepAliveTimeout 5\nUser ${APACHE_RUN_USER}\nGroup ${APACHE_RUN_GROUP}\nHostnameLookups Off\nErrorLog ${APACHE_LOG_DIR}/error.log\nLogLevel warn\nIncludeOptional mods-enabled/*.load\nIncludeOptional mods-enabled/*.conf\nInclude ports.conf\n<Directory />\n        Options FollowSymLinks\n        AllowOverride None\n        Require all denied\n</Directory>\n<Directory /usr/share>\n        AllowOverride None\n        Require all granted\n</Directory>\n<Directory /var/www/>\n        Options Indexes FollowSymLinks\n        AllowOverride None\n        Require all granted\n</Directory>\nAccessFileName .htaccess\n<FilesMatch \"^\\.ht\">\n        Require all denied\n        #Require all granted\n</FilesMatch>\nLogFormat \"%v:%p %h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\nLogFormat \"%h %l %u %t \\\"%r\\\" %>s %O\" common\nLogFormat \"%{Referer}i -> %U\" referer\nLogFormat \"%{User-agent}i\" agent\nIncludeOptional conf-enabled/*.conf\nIncludeOptional sites-enabled/*.conf\n~~~\n\n### \u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u8a2d\u5b9a\n- \u30d9\u30fc\u30b7\u30c3\u30af\u8a8d\u8a3c\u306a\u3069\u500b\u5225\u306e\u8a2d\u5b9a\u306f\u95a2\u4fc2\u306a\u3044\u306e\u3067\u7121\u8996\u3057\u3066\u4e0b\u3055\u3044\n\n~~~\n<VirtualHost *:80>\n        ServerName emlauncher.hoge.net\n        ServerAdmin webmaster@localhost\n        DocumentRoot /var/source/emlauncher/web\n        DirectoryIndex index.html index.php\n        AddDefaultCharset UTF-8\n        SetEnvIf Request_URI \"\\.(jpg|png|gif|css|js|ico)$\" nolog\n        SetEnv MFW_ENV 'ec2'\n        ErrorLog ${APACHE_LOG_DIR}/emlauncher-error.log\n        CustomLog ${APACHE_LOG_DIR}/emlauncher-access.log combined\n        <Directory \"/var/source/emlauncher/web\">\n         AuthType Basic\n         AuthName \"Please enter your ID and password\"\n         AuthUserFile /etc/apache2/.htpasswd\n         require valid-user\n         Satisfy Any\n         Order Deny,Allow\n         Allow from xx.xx.xx.xx/32\n         Deny from all\n         Options FollowSymLinks MultiViews\n         AllowOverride All\n         Require all granted\n        </Directory>\n</VirtualHost>\n~~~\n\n### \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\n- \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n/var/source/emlauncher/config/emlauncher_config_sample.php\u3092\u30b3\u30d4\u30fc\u3057\u3066\u7de8\u96c6\u3059\u308b\n\n~~~\n$ ls -la /var/source/emlauncher/\ntotal 68\ndrwxr-xr-x 10 appuser appuser 4096 Nov 21 15:55 .\ndrwxr-xr-x 23 admin   admin   4096 Nov 16 16:57 ..\ndrwxr-xr-x  2 appuser appuser 4096 Nov 16 21:50 config\ndrwxr-xr-x  5 appuser appuser 4096 Nov 16 16:57 data\ndrwxr-xr-x  9 appuser appuser 4096 Nov 16 17:11 .git\n-rw-r--r--  1 appuser appuser  132 Nov 16 16:57 .gitignore\n-rw-r--r--  1 appuser appuser  193 Nov 16 16:57 .gitmodules\n-rw-r--r--  1 appuser appuser  948 Nov 16 16:57 initialize.php\ndrwxr-xr-x  5 appuser appuser 4096 Nov 16 16:57 libs\n-rw-r--r--  1 appuser appuser 1076 Nov 16 16:57 LICENSE.txt\ndrwxr-xr-x 12 appuser appuser 4096 Nov 16 16:57 mainmodules\ndrwxr-xr-x  6 appuser appuser 4096 Nov 16 17:11 mfw\ndrwxr-xr-x  2 appuser appuser 4096 Nov 16 16:57 model\n-rw-r--r--  1 appuser appuser 2148 Nov 16 16:57 README(EN).md\n-rw-r--r--  1 appuser appuser 2387 Nov 16 16:57 README.md\n-rwxr-xr-x  1 appuser appuser    5 Nov 18 21:38 test.html\ndrwxr-xr-x  3 appuser appuser 4096 Nov 21 17:22 web\n~~~\n\n~~~\n<?php\n/**@file\n * EMLauncher\u8a2d\u5b9a.\n * emlauncher_config.php\u306b\u30ea\u30cd\u30fc\u30e0\u3059\u308b.\n */\nrequire_once APP_ROOT.'/libs/aws/aws-autoloader.php';\n$emlauncher_config = array(\n        /** EC2\u74b0\u5883\u7528\u306e\u8a2d\u5b9a (httpd.conf\u3067SetEnv MFW_ENV 'ec2') */\n        'ec2' => array(\n                /**\n                 * \u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u901a\u77e5\u3084\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u30e1\u30fc\u30eb\u306e\u9001\u4fe1\u5143\u30a2\u30c9\u30ec\u30b9.\n                 */\n                'mail_sender' => 'hogeEmLauncherAdmin <no-reply@hoge.emlauncher.net>',\n                /**\n                 * \u30bf\u30a4\u30c8\u30eb\u7b49\u306b\u3064\u3051\u308bprefix\n                 */\n                'title_prefix' => 'Application_Name_',\n                /**\n                 * HTTPS\u3067\u52d5\u4f5c\u3055\u305b\u308b.\n                 * \u30ed\u30b0\u30a4\u30f3\u6642\u306bHTTPS\u3067\u7121\u304b\u3063\u305f\u5834\u5408\u3001HTTPS\u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3059\u308b.\n                 */\n                'enable_https' => false,\n                /** \u30ed\u30b0\u30a4\u30f3\u306e\u8a2d\u5b9a. */\n                'login' => array(\n                        /**\n                         * email+password\u306b\u3088\u308b\u30ed\u30b0\u30a4\u30f3\u3092\u8a31\u53ef.\n                         * `user_pass`\u30c6\u30fc\u30d6\u30eb\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u30ed\u30b0\u30a4\u30f3\u53ef\u80fd\u306b\u3059\u308b.\n                         * @note\n                         *  \u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u3059\u308b\u6642\u306f`user_pass`\u30c6\u30fc\u30d6\u30eb\u306b`email`\u306e\u307f\u3092\u767b\u9332\u3057\n                         *  \u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u306e\u624b\u9806\u3092\u8e0f\u3080\u3053\u3068\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u767b\u9332\u3059\u308b.\n                         */\n                        'enable_password' => true,\n                        /**\n                         * Google\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u8a31\u53ef.\n                         * \u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304c'allowed_mailaddr_pattern'\u306b\u30de\u30c3\u30c1\u3059\u308b\u304b,\n                         * user_pass\u30c6\u30fc\u30d6\u30eb\u306b\u5b58\u5728\u3057\u305f\u3089\u30ed\u30b0\u30a4\u30f3\u3092\u8a8d\u3081\u308b.\n                         *\n                         * \u5229\u7528\u3059\u308b\u5834\u5408, \u4e8b\u524d\u306bgoogole\u306b\u30a2\u30d7\u30ea\u3092\u767b\u9332\u3057\u3066OAuth\u306eID, Secret\u3092\u767a\u884c\u3057\u3066\u304a\u304f.\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//google\u306eOauth\u8a8d\u8a3c\u306f\u4f7f\u308f\u306a\u3044\u306e\u3067OFF\u306b\u3057\u3066\u304a\u304f\n                         */\n                        'enable_google_auth' => false,\n                        'google_app_id' => 'xxxxxxxx.apps.googleusercontent.com',\n                        'google_app_secret' => 'xxxxxxxx',\n                        'allowed_mailaddr_pattern' => '/@klab\\.com$/',\n                        ),\n                /** AWS\u306e\u8a2d\u5b9a */\n                'aws' => array(\n                        /**\n                         * API\u30a2\u30af\u30bb\u30b9\u306e\u305f\u3081\u306eKey\u3068Secret.\n                         */\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//IAM\u3067\u4ee5\u4e0b\u306eKey\u3092\u53d6\u5f97\u3057\u3066\u304a\u304f\u3002\u540c\u3058\u5024\u306e\u53d6\u5f97\u306f\u4e00\u5ea6\u304d\u308a\u306a\u306e\u3067\u6c17\u3092\u3064\u3051\u308b\u3053\u3068\n                        'key' => 'AKIXXXXXXXXXXXW7A',\n                        'secret' => '1XqXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXSaY',\n                        /** S3\u306eRegion. */\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000//\u6771\u4eac\u30ea\u30fc\u30b8\u30e7\u30f3\u3067\u3042\u308c\u3070\u30b5\u30f3\u30d7\u30eb\u3068\u540c\u3058\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u66f8\u5f0f\u3067\u554f\u984c\u306a\u3044\n                        'region' => Aws\\Common\\Enum\\Region::TOKYO,\n                        /** S3\u306ebucket\u540d. \u4e88\u3081\u4f5c\u6210\u3057\u3066\u304a\u304f. */\n                        'bucket_name' => 'hoge-emlauncher',\n                        ),\n                ),\n        );\n/**\n * \u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u7528\u306e\u8a2d\u5b9a. (MFW_ENV=local)\n * Google\u30a2\u30ab\u30a6\u30f3\u30c8\u8a8d\u8a3c\u3092\u7121\u52b9\u306b\u3057\u3001bucket\u540d\u3082\u5909\u66f4\u3057\u3066\u3044\u308b.\n */\n$emlauncher_config['local'] = $emlauncher_config['ec2'];\n$emlauncher_config['local']['login']['enable_google_auth'] = false;\n$emlauncher_config['local']['aws']['bucket_name'] = 'emlauncher-dev';\n~~~\n\n### \u305d\u306e\u4ed6\u624b\u9806\n\n- \u4ee5\u4e0b\u306f\u8a2d\u5b9a\u4e2d\u5f15\u3063\u639b\u304b\u3063\u305f\u7b87\u6240\u3092\u7e8f\u3081\u3066\u3044\u307e\u3059\n- \u516c\u5f0f\u30b5\u30a4\u30c8\u306e\u624b\u9806\u3092\u884c\u3046\u524d\u306b\u78ba\u8a8d\u3057\u3066\u304a\u3044\u305f\u307b\u3046\u304c\u826f\u3044\u3067\u3059\n- \u30ed\u30fc\u30ab\u30eb\u306b\u9001\u4fe1\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n- \u8a73\u7d30\u306f\u7aef\u6298\u3063\u3066\u307e\u3059\u3002mail\u30b3\u30de\u30f3\u30c9\u304c\u6a19\u6e96\u3067\u5165\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u4f7f\u3048\u308b\u3068\u3053\u308d\u307e\u3067\u8a2d\u5b9a\u3059\u308b\u3053\u3068\n- GMail\u3067\u30e1\u30fc\u30eb\u53d7\u4fe1\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\n \n ~~~\n$ sudo apt-get install postfix\n$ sudo apt-get install chkconfig\n$ sudo chkconfig postfix on\n$ sudo apt-get install aptitude\n$ sudo aptitude install bsd-mailx\n$ sudo aptitude install exim4\n$ which mail\n$ echo testmail | mail user@hoge.jp\n ~~~\n \n- main.php\u3067Rwrite\u304c\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304c\u6a19\u6e96\u3067\u306f\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308b\n\n ~~~\n$ sudo apache2ctl -M | grep rewrite_module\n$ sudo a2enmod rewrite\n$ sudo apache2ctl -M | grep rewrite_module\n~~~\n\n- \u30e6\u30fc\u30b6\u8ffd\u52a0\u306fSQL\u76f4\u6253\u3061\u3067\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u767b\u9332\u3057\u305f\u3089\u30d6\u30e9\u30a6\u30b6\u753b\u9762\u304b\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u518d\u8a2d\u5b9a\u3059\u308b\n\n~~~\n$ mysql\nmysql > use emlauncher\nmysql > INSERT INTO user_pass (mail) VALUES ('ezaki@geeplus.jp');\nmysql > exit\n ~~~\n \n- \u30a2\u30d7\u30ea\u3092\u767b\u9332\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u753b\u50cf\u304c\u5727\u7e2e\u3067\u304d\u306a\u304f\u3066\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u308a\u3059\u308b\n- imagick\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u3084\u3084\u3053\u3057\u304fComposer\u306e\u307b\u3046\u304c\u7c21\u5358\u3089\u3057\u3044\n- \u4ee5\u4e0b\u306f\u5c11\u6570\u6d3e\u306epecl\u3067\u306e\u5c0e\u5165\u65b9\u6cd5\u3002\u203bphpinfo\u3067\u78ba\u8a8d\u3059\u308b\u3053\u3068\n- \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u3089\u5fc5\u305aphp.ini\u306b\u8ffd\u52a0\u3059\u308b\u3053\u3068\n\n ~~~\n$ sudo apt-get update\n$ sudo apt-get install libmagickwand-dev\n$ sudo apt-get install php5-dev\n$ sudo apt-get install php-pear\n$ sudo pecl install imagick\n:\nPlease provide the prefix of Imagemagick installation [autodetect] : \uff08\u203b\u4f55\u3082\u5165\u529b\u305b\u305aEnter\u30ad\u30fc\u62bc\u4e0b\uff09\n ~~~\n \n ~~~\n$ vi /etc/php5/cli/php.ini\n:\n;APPEND hoge.corp Config\nextension=imagick.so\n ~~~\n \n- curl\u306e\u30a8\u30e9\u30fc\u3068\u306a\u308bGuzzle\u3068\u3044\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u5fc5\u8981\u3068\u306a\u308b\u304c\u306a\u304b\u306a\u304b\u826f\u3044\u60c5\u5831\u304c\u7121\u3044\u3002\u4ee5\u4e0b\u3067\u5bfe\u5fdc\n\n ~~~\n$ sudo apt-get install php5-curl\n$ sudo pear channel-discover guzzlephp.org/pear\n$ sudo pear remote-list -c guzzle\n$ sudo pear upgrade PEAR\n$ sudo pear channel-discover pear.symfony.com\n$ sudo pear install guzzle/Guzzle-3.9.0\n$ sudo /etc/init.d/apache2 restart\n~~~\n\n### \u30ed\u30b0\u30a4\u30f3\u306b\u3064\u3044\u3066\n- \u30b5\u30fc\u30d0\u7ba1\u7406\u8005\u304cSQL\u3067\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u30d9\u30fc\u30b9\u306e\u30e6\u30fc\u30b6\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\n- \u30d6\u30e9\u30a6\u30b6\u3067EMLauncher\u306b\u30a2\u30af\u30bb\u30b9\u3057\u300cforget password\u300d\u304b\u3089\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u518d\u8a2d\u5b9a\u3057\u3066\u4e0b\u3055\u3044\n![EMlauncher_TOP.JPG](https://qiita-image-store.s3.amazonaws.com/0/57350/aa39fb6f-2700-d12d-624c-6dd65e7532c9.jpeg)\n", "tags": ["EMLauncher", "DeployGate"]}