{"context": " More than 1 year has passed since last update.\n\n\u30c6\u30b9\u30c8\u74b0\u5883\n\n\n\n\u5f79\u5272\n\u30db\u30b9\u30c8\u540d\nIP\nOS\n\n\n\n\nserver\npuppet-master.localhost\n172.16.0.200\nCentOS6.5\n\n\nclient\npuppet-client.localhost\n172.16.0.201\nCentOS6.5\n\n\n\n\npuppet-server\n\n\u3010puppet-master.localhost\u3011puppet-server\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1.puppet\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n2.puppet-server\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nshell\nrpm -ivh http://yum.puppetlabs.com/puppetlabs-release-el-6.noarch.rpm\nyum install -y puppet-server\n\n\n\n\u3010puppet-master.localhost\u3011 site.pp\u7de8\u96c6\n\nshell\nvi /etc/puppet/manifests/site.pp\n\n\n\n\nsite.pp\n#----------------------------------------------------------\n# ALLOW_VIRTUAL\n#----------------------------------------------------------\nPackage {\n    allow_virtual => true,\n}\n\n#----------------------------------------------------------\n# PACKAGES\u3000(yum install \u3059\u308b\u3082\u306e)\n#----------------------------------------------------------\nclass packages {\n    package { \"vim\":\n        ensure => installed,\n    }\n    package { \"screen\":\n        ensure => installed,\n    }\n}\n\n#----------------------------------------------------------\n#  FILES (\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5e03\u3059\u308b\u3082\u306e)\n#----------------------------------------------------------\nclass files {\n    file { '/etc/vimrc':\n            owner  => 'root',\n            group  => 'root',\n            mode   => '644',\n            source => \"puppet:///files/vimrc\",\n    }\n    file { '/etc/screenrc':\n            owner  => 'root',\n            group  => 'root',\n            mode   => '644',\n            source => \"puppet:///files/screenrc\",\n    }\n}\n\n#----------------------------------------------------------\n# localhost \u306f packages files\u3092\u884c\u3046\n#----------------------------------------------------------\nnode /.*\\.localhost$/ {\n    include packages\n    include files\n}\n\n\n\n\n\u3010puppet-master.localhost\u3011 \u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n\nshell\nvi /etc/puppet/fileserver.conf\n\n\n\n\nfileserver.conf\n[files]\n    path /etc/puppet/files\n        allow *\n\n\n\n\n\u3010puppet-master.localhost\u3011 \u914d\u5e03\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u7f6e\n\nshell\ncp -av /etc/vimrc /etc/puppet/files\ncp -av /etc/screenrc /etc/puppet/files\n\n\n\n\u3010puppet-master.localhost\u3011puppet-server \u306e\u8d77\u52d5\n\nshell\nservice puppetmaster start\n\n\n\npuppet-client\n\n\u3010puppet-client.localhost\u3011puppet\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nshell\nrpm -ivh http://yum.puppetlabs.com/puppetlabs-release-el-6.noarch.rpm\nyum install -y puppet\n\n\n\n\u3010puppet-client.localhost\u3011\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\npuppet-server\u306b\u5bfe\u3057\u3066\u7f72\u540d\u3059\u308b\u3088\u3046\u30ea\u30af\u30a8\u30b9\u30c8\n\nshell\npuppet agent --test --server puppet-master.localhost --noop\n\n\n\n\u3010puppet-master.localhost\u3011\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7f72\u540d\n\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u78ba\u8a8d\n\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7f72\u540d\n\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u4e00\u89a7\u78ba\u8a8d\n\nshell\npuppet cert --list\npuppet cert sign puppet-client.localhost\npuppet cert --list --all\n\n\n\n\u3010puppet-client.localhost\u3011\u540c\u671f\u51e6\u7406\n\u540c\u671f\u30c6\u30b9\u30c8\n\u540c\u671f\u5b9f\u884c\n\nshell\npuppet agent --test --verbose --server=puppet-master.localhost --noop\npuppet agent --test --verbose --server=puppet-master.localhost\n\n\n#\u30c6\u30b9\u30c8\u74b0\u5883\n\n| \u5f79\u5272 | \u30db\u30b9\u30c8\u540d                  | IP           | OS        |\n|:--   |:--                       |:--           |:--:       |\n| server | puppet-master.localhost  | 172.16.0.200 | CentOS6.5 |\n| client | puppet-client.localhost  | 172.16.0.201 | CentOS6.5 |\n\n#puppet-server\n##\u3010puppet-master.localhost\u3011puppet-server\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n1.puppet\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n2.puppet-server\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:shell\nrpm -ivh http://yum.puppetlabs.com/puppetlabs-release-el-6.noarch.rpm\nyum install -y puppet-server\n```\n\n##\u3010puppet-master.localhost\u3011 site.pp\u7de8\u96c6\n\n```shell-session:shell\nvi /etc/puppet/manifests/site.pp\n```\n>\n```text:site.pp\n#----------------------------------------------------------\n# ALLOW_VIRTUAL\n#----------------------------------------------------------\nPackage {\n    allow_virtual => true,\n}\n>\n#----------------------------------------------------------\n# PACKAGES\u3000(yum install \u3059\u308b\u3082\u306e)\n#----------------------------------------------------------\nclass packages {\n    package { \"vim\":\n        ensure => installed,\n    }\n    package { \"screen\":\n        ensure => installed,\n    }\n}\n>\n#----------------------------------------------------------\n#  FILES (\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u5e03\u3059\u308b\u3082\u306e)\n#----------------------------------------------------------\nclass files {\n    file { '/etc/vimrc':\n            owner  => 'root',\n            group  => 'root',\n            mode   => '644',\n            source => \"puppet:///files/vimrc\",\n    }\n    file { '/etc/screenrc':\n            owner  => 'root',\n            group  => 'root',\n            mode   => '644',\n            source => \"puppet:///files/screenrc\",\n    }\n}\n>\n#----------------------------------------------------------\n# localhost \u306f packages files\u3092\u884c\u3046\n#----------------------------------------------------------\nnode /.*\\.localhost$/ {\n    include packages\n    include files\n}\n```\n\n##\u3010puppet-master.localhost\u3011 \u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u8a2d\u5b9a\n\n```shell-session:shell\nvi /etc/puppet/fileserver.conf\n```\n>\n```text:fileserver.conf\n[files]\n    path /etc/puppet/files\n        allow *\n```\n\n##\u3010puppet-master.localhost\u3011 \u914d\u5e03\u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u7f6e\n\n```shell-session:shell\ncp -av /etc/vimrc /etc/puppet/files\ncp -av /etc/screenrc /etc/puppet/files\n```\n\n##\u3010puppet-master.localhost\u3011puppet-server \u306e\u8d77\u52d5\n\n```shell-session:shell\nservice puppetmaster start\n```\n\n#puppet-client\n##\u3010puppet-client.localhost\u3011puppet\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell-session:shell\nrpm -ivh http://yum.puppetlabs.com/puppetlabs-release-el-6.noarch.rpm\nyum install -y puppet\n```\n\n##\u3010puppet-client.localhost\u3011\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\npuppet-server\u306b\u5bfe\u3057\u3066\u7f72\u540d\u3059\u308b\u3088\u3046\u30ea\u30af\u30a8\u30b9\u30c8\n\n```shell-session:shell\npuppet agent --test --server puppet-master.localhost --noop\n```\n\n##\u3010puppet-master.localhost\u3011\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7f72\u540d\n\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u78ba\u8a8d\n\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7f72\u540d\n\u7f72\u540d\u30ea\u30af\u30a8\u30b9\u30c8\u4e00\u89a7\u78ba\u8a8d\n\n```shell-session:shell\npuppet cert --list\npuppet cert sign puppet-client.localhost\npuppet cert --list --all\n```\n\n##\u3010puppet-client.localhost\u3011\u540c\u671f\u51e6\u7406\n\u540c\u671f\u30c6\u30b9\u30c8\n\u540c\u671f\u5b9f\u884c\n\n```shell-session:shell\npuppet agent --test --verbose --server=puppet-master.localhost --noop\npuppet agent --test --verbose --server=puppet-master.localhost\n``` \n", "tags": ["Puppet3.6.2", "CentOS6.5"]}