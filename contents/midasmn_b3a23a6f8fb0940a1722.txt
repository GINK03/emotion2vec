{"tags": ["nginx", "PHP", "mariadb", "\u3055\u304f\u3089\u306eVPS"], "context": " More than 1 year has passed since last update.\u25bcNginx\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n\nvim /etc/yum.repos.d/nginx.repo\n\u203b\u8a2d\u5b9a\u306f\u672c\u5bb6\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\nhttp://wiki.nginx.org/Install\n[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/6/$basearch/\ngpgcheck=0\nenabled=1\n\u6700\u65b0\u306b\u66f4\u65b0\n\nyum update\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum install nginx\nNginx\u3092\u8d77\u52d5\n\nservice nginx start\nNginx\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\nchkconfig nginx on\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30aa\u30fc\u30ca\u30fc\u30c1\u30a7\u30f3\u30b8\n\nchown -R midasmn:midasmn /usr/share/nginx/html/\n\u25bcPHP\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum install php php-fpm php-devel php-mysql php-gd php-mbstring\n\u25bcPHP-FPM\u3092\u8a2d\u5b9a\n\u8a2d\u5b9a\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\ncp /etc/php-fpm.d/{www.conf,www.conf.back}\n\u7de8\u96c6\n\nvim /etc/php-fpm.d/www.conf\n\n; RPM: apache Choosed to be able to access some dir as httpd\nuser = nginx # apache\u304b\u3089\u66f8\u304d\u63db\u3048\u308b\n; RPM: Keep a group allowed to write in log dir.\ngroup = nginx\u3000# apache\u304b\u3089\u66f8\u304d\u63db\u3048\u308b\nlisten = /var/run/php-fpm/php-fpm.sock\u3000\u2190UNIX\u30bd\u30b1\u30c3\u30c8\u3092\u5229\u7528\nPHP-FPM\u3092\u8d77\u52d5\n\nsudo service php-fpm start\n\nchkconfig php-fpm on\n\u25bcNginx\u3067PHP\u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u8a2d\u5b9a\n\u8a2d\u5b9a\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\ncp /etc/nginx/conf.d/{default.conf,default.conf.back}\n\u7de8\u96c6\n\nvim /etc/nginx/conf.d/default.conf\nserver {\n    listen       80;\n    server_name  localhost;\n#charset koi8-r;\n#access_log  /var/log/nginx/log/host.access.log  main;\n\nlocation / {\n    root   /usr/share/nginx/html;\n    index  index.php index.html index.htm;\n}\n\n#error_page  404              /404.html;\n\n# redirect server error pages to the static page /50x.html\n#\nerror_page   500 502 503 504  /50x.html;\nlocation = /50x.html {\n    root   /usr/share/nginx/html;\n}\n\n# proxy the PHP scripts to Apache listening on 127.0.0.1:80\n#\n#location ~ \\.php$ {\n#    proxy_pass   http://127.0.0.1;\n#}\n\n# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n#\nlocation ~ \\.php$ {\n    root           /usr/share/nginx/html;\n    fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;\n    fastcgi_index  index.php;\n    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n    include        fastcgi_params;\n}\n\n# deny access to .htaccess files, if Apache's document root\n# concurs with nginx's one\n#\n#location ~ /\\.ht {\n#    deny  all;\n#}\n\n}\n\u203b10\u884c\u76ee\u306eindex\u306bindex.php\u3092\u8ffd\u52a0\u3002\n\u203b30\u884c\u76ee\u304b\u3089\u306ePHP\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u7de8\u96c6\u3002\n\u25bcMariaDB\u3092yum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n\nvim /etc/yum.repos.d/MariaDB.repo\n\u203b\u8a2d\u5b9a\u306f\u672c\u5bb6\u30b5\u30a4\u30c8\u53c2\u7167\nhttps://downloads.mariadb.org/mariadb/repositories/#mirror=yamagata-university&distro=CentOS&distro_release=centos6-amd64&version=10.0\n\nMariaDB 10.0 CentOS repository list - created 2014-05-02 02:22 UTC\n\nhttp://mariadb.org/mariadb/repositories/\n\n[mariadb]\nname = MariaDB\nbaseurl = http://yum.mariadb.org/10.0/centos6-amd64\ngpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\ngpgcheck=1\n\u6700\u65b0\u306b\u66f4\u65b0\n\nyum update\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum install MariaDB-devel MariaDB-client MariaDB-server\n\u8a2d\u5b9a\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n\ncp /etc/my.cnf.d/{server.cnf,server.cnf.back}\n\u7de8\u96c6\n\nvim /etc/my.cnf.d/server.cnf\n\u4e0b\u8a18\u3092\u8ffd\u52a0\ncharacter_set_server=utf8\ndefault-storage-engine=InnoDB\ninnodb_file_per_table\n[mysql]\ndefault-character-set=utf8\n[mysqldump]\ndefault-character-set=utf8\nMariaDB\u3092\u8d77\u52d5\n\nservice mysql start\nMariaDB\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\nchkconfig mysql on\nroot\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\n$ mysqladmin -u root password '\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9'\nMariaDB\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\n$ mysql -u root -p\nEnter password:\n\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u78ba\u8a8d\nMariaDB [(none)]> SHOW ENGINES;\n\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d\nMariaDB [(none)]> STATUS;\n\n\u25bcNginx\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n# vim /etc/yum.repos.d/nginx.repo\n\n\u203b\u8a2d\u5b9a\u306f\u672c\u5bb6\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\nhttp://wiki.nginx.org/Install\n\n[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/6/$basearch/\ngpgcheck=0\nenabled=1\n\n\u6700\u65b0\u306b\u66f4\u65b0\n# yum update\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum install nginx\n\nNginx\u3092\u8d77\u52d5\n# service nginx start\n\nNginx\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# chkconfig nginx on\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30aa\u30fc\u30ca\u30fc\u30c1\u30a7\u30f3\u30b8\n\n# chown -R midasmn:midasmn /usr/share/nginx/html/\n\n\n\n\u25bcPHP\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n#  yum install php php-fpm php-devel php-mysql php-gd php-mbstring\n\n\u25bcPHP-FPM\u3092\u8a2d\u5b9a\n\u8a2d\u5b9a\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n# cp /etc/php-fpm.d/{www.conf,www.conf.back}\n\n\u7de8\u96c6\n# vim /etc/php-fpm.d/www.conf\n\n; RPM: apache Choosed to be able to access some dir as httpd\nuser = nginx # apache\u304b\u3089\u66f8\u304d\u63db\u3048\u308b\n; RPM: Keep a group allowed to write in log dir.\ngroup = nginx\u3000# apache\u304b\u3089\u66f8\u304d\u63db\u3048\u308b\n\nlisten = /var/run/php-fpm/php-fpm.sock\u3000\u2190UNIX\u30bd\u30b1\u30c3\u30c8\u3092\u5229\u7528\n\nPHP-FPM\u3092\u8d77\u52d5\n# sudo service php-fpm start\n# chkconfig php-fpm on\n\n\u25bcNginx\u3067PHP\u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u8a2d\u5b9a\n\u8a2d\u5b9a\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n# cp /etc/nginx/conf.d/{default.conf,default.conf.back}\n\n\u7de8\u96c6\n# vim /etc/nginx/conf.d/default.conf\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    #charset koi8-r;\n    #access_log  /var/log/nginx/log/host.access.log  main;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.php index.html index.htm;\n    }\n\n    #error_page  404              /404.html;\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n    #\n    #location ~ \\.php$ {\n    #    proxy_pass   http://127.0.0.1;\n    #}\n\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #\n    location ~ \\.php$ {\n        root           /usr/share/nginx/html;\n        fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n\n    # deny access to .htaccess files, if Apache's document root\n    # concurs with nginx's one\n    #\n    #location ~ /\\.ht {\n    #    deny  all;\n    #}\n}\n\n\u203b10\u884c\u76ee\u306eindex\u306bindex.php\u3092\u8ffd\u52a0\u3002\n\u203b30\u884c\u76ee\u304b\u3089\u306ePHP\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u3092\u7de8\u96c6\u3002\n\n\u25bcMariaDB\u3092yum\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n# vim /etc/yum.repos.d/MariaDB.repo\n\n\u203b\u8a2d\u5b9a\u306f\u672c\u5bb6\u30b5\u30a4\u30c8\u53c2\u7167\nhttps://downloads.mariadb.org/mariadb/repositories/#mirror=yamagata-university&distro=CentOS&distro_release=centos6-amd64&version=10.0\n\n# MariaDB 10.0 CentOS repository list - created 2014-05-02 02:22 UTC\n# http://mariadb.org/mariadb/repositories/\n[mariadb]\nname = MariaDB\nbaseurl = http://yum.mariadb.org/10.0/centos6-amd64\ngpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB\ngpgcheck=1\n\n\n\n\u6700\u65b0\u306b\u66f4\u65b0\n# yum update\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n# yum install MariaDB-devel MariaDB-client MariaDB-server\n\n\u8a2d\u5b9a\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n# cp /etc/my.cnf.d/{server.cnf,server.cnf.back}\n\n\u7de8\u96c6\n# vim /etc/my.cnf.d/server.cnf\n\n\u4e0b\u8a18\u3092\u8ffd\u52a0\ncharacter_set_server=utf8\ndefault-storage-engine=InnoDB\ninnodb_file_per_table\n[mysql]\ndefault-character-set=utf8\n[mysqldump]\ndefault-character-set=utf8\n\nMariaDB\u3092\u8d77\u52d5\n# service mysql start\n\nMariaDB\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n# chkconfig mysql on\n\nroot\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\n$ mysqladmin -u root password '\u65b0\u3057\u3044\u30d1\u30b9\u30ef\u30fc\u30c9'\n\nMariaDB\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\n$ mysql -u root -p\nEnter password:\n\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u78ba\u8a8d\nMariaDB [(none)]> SHOW ENGINES;\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u78ba\u8a8d\nMariaDB [(none)]> STATUS;\n"}