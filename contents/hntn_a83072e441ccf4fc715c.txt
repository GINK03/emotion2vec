{"tags": ["Titanium"], "context": "Titanium Advent Calendar 2014 \u306e14\u65e5\u76ee\u3067\u3059\u3002\n\n2015/09/13 \u8ffd\u8a18\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u304c\u6b32\u3057\u3044\u3068\u306e\u554f\u3044\u5408\u308f\u305b\u3092\u9802\u3044\u305f\u306e\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9 (\u30b5\u30fc\u30d0\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u4e21\u65b9) \u3092\u66f8\u304d\u76f4\u3057\u307e\u3057\u305f\u3002\n\u30e2\u30b8\u30e5\u30fc\u30eb\u3082\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u6e21\u3057\u90e8\u5206\u3092\u4fee\u6b63\u52a0\u7b46\u306e\u3046\u3048\u3001SDK 4.1.1\u306b\u5bfe\u5fdc\u3055\u305b\u3066\u30d3\u30eb\u30c9\u3057\u306a\u304a\u3057\u307e\u3057\u305f\u3002\nhttps://github.com/tdtsh/gcm.js\n\u305f\u3060\u3053\u306e\u9ec4\u3055\u3093\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u66f8\u304d\u65b9\u3060\u3068\u3001service\u3092Titanium\u5074\u3067\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u30a2\u30d7\u30ea\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u306a\u3044\u6642\u306b\u306fPush\u3092\u53d7\u3051\u53d6\u3089\u308c\u307e\u305b\u3093\u3002\n\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u304b\u30d0\u30c3\u30af\u30b0\u30e9\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u304c\u52d5\u3044\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u30a2\u30d7\u30ea\u304c\u7acb\u3061\u4e0a\u304c\u308b\u524d\u3067\u3082Push\u901a\u77e5\u304c\u53d7\u3051\u53d6\u3089\u308c\u308b\u69d8\u306b\u3059\u308b\u306b\u306f\u3001service\u90e8\u5206\u3082\u30e2\u30b8\u30e5\u30fc\u30eb\u5074\u3067\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3082\u3057\u8981\u671b\u304c\u591a\u3051\u308c\u3070\u5225\u9014\u30e2\u30b8\u30e5\u30fc\u30eb\u4f5c\u308a\u307e\u3059\u3002\n\n\n\u306f\u3058\u3081\u306b\n\u305d\u306e\u6614\u3001Titanium \u3067 Android \u3068\u3044\u3046\u3068\u306a\u304b\u306a\u304b\u30b7\u30f3\u30c9\u30a4\u3068\u3044\u3046\u8a71\u304c\u591a\u304b\u3063\u305f\u69d8\u3067\u3059\u304c\u3001\u4eca\u3082\u307e\u3041\u307e\u3041\u30b7\u30f3\u30c9\u30a4\u3067\u3059\u3002\n\u3067\u3082\u305d\u308c\u306f\u3001UI\u306e\u8a2d\u8a08\u3084\u9032\u3081\u65b9(\u3069\u3046\u3057\u3066\u3082iOS\u30d5\u30a1\u30fc\u30b9\u30c8\u306b\u306a\u308a\u304c\u3061)\u306b\u5bc4\u308b\u6240\u3082\u591a\u304f\u3001\u30dd\u30a4\u30f3\u30c8\u3092\u62bc\u3055\u3048\u308c\u3070\u6700\u8fd1\u306eTitanium \u3067\u306e Andorid \u306f\u304b\u306a\u308a\u51fa\u6765\u306a\u3044\u3053\u3068\u304c\u6e1b\u3063\u3066\u4f7f\u3048\u308b\u5b50\u306b\u306a\u3063\u3066\u304d\u3066\u307e\u3059\u3002\n\u306a\u306e\u3067\u6614\u632b\u6298\u3057\u305f\u65b9\u3082\u30ec\u30c3\u30c4\u30c8\u30e9\u30a4\u3067\u3059\u3002\u662f\u975e\u3002\n\u305d\u3093\u306a\u4e2d\u3067\u3001\u975e\u5e38\u306b\u91cd\u8981\u3067\u3042\u308b\u306e\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001iOS\u306a\u3089\u7c21\u5358\u306a\u306e\u306bAndroid\u3067\u306f\u3059\u3053\u3076\u308b\u9762\u5012\u304f\u3055\u3044\u306e\u304cPush\u901a\u77e5\u307e\u308f\u308a\u3001Google Cloud Messaging (GCM)\u306e\u30c8\u30b3\u3067\u3059\u3002\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3046or\u4f5c\u308b\u3057\u304b\u65b9\u6cd5\u304c\u7121\u304f\u3066\u3001\u3044\u304d\u306a\u308a\u30cf\u30fc\u30c9\u30eb\u4e0a\u3052\u3066\u308b\u611f\u3058\u3067\u3059\u3002\ngcm\u3068\u3044\u3048\u3070\u3053\u308c\u3068\u3044\u3046\u4f4d\u5b9a\u756a\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u3053\u3061\u3089\u306eiamyellow\u3055\u3093(\u4ee5\u4e0b\u9ec3\u3055\u3093)\u306egcm.js\u3067\u3059\u3002\nhttps://github.com/iamyellow/gcm.js\n\u9ec4\u3055\u3093\u3054\u81ea\u8eab\u304c\u30d6\u30ed\u30b0\u306b\u5927\u5909\u4e01\u5be7\u306b\u89e3\u8aac\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u82f1\u8a9e\u3067\u3059\u304c\u3002\nGCM push notifications for Titanium (made easy)\n\u3053\u308c\u8aad\u3093\u3067\u3084\u308c\u3070\u307e\u3041\u3044\u3051\u308b\u3063\u3061\u3083\u30fc\u3044\u3051\u308b\u3093\u3067\u3059\u304c\u3001\u82f1\u8a9e\u306f\u3061\u3087\u3063\u3068\u30fb\u30fb\u30fb\u3068\u3044\u3046\u4eba\u3082\u3044\u308b\u3068\u601d\u3046\u306e\u3068\u3001gcm.jar\u304c\u30aa\u30ef\u30b3\u30f3\u306b\u306a\u3063\u3066\u4e45\u3057\u3044\u306e\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u672a\u3060\u306bTitanium\u306eGCM\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u304b\u306f gcm.jar \u304c\u73fe\u5f79\u306a\u611f\u3058\u306a\u306e\u3067\u3001\u9811\u5f35\u3063\u3066 Google Play Service \u306b\u7f6e\u304d\u63db\u3048\u3066\u307f\u307e\u3057\u305f\u3002\n\nGoogle\u5074\u306eAPI\u6e96\u5099\u3068GCM_sender_id\u53d6\u5f97\n\u5947\u3057\u304f\u3082\u660e\u65e5(15\u65e5)\u62c5\u5f53\u306edksg\u3055\u3093 \u304c\u66f8\u304b\u308c\u305f\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\nSE\u596e\u95d8\u8a18: Titanium\u30a2\u30d7\u30ea\u3067Push Notification\u3010Android\u7248\u3011\n\u305f\u3060\u3053\u3053\u3082\u82f1\u8a9e\u306f\u3061\u3087\u3063\u3068\u30fb\u30fb\u30fb\u306a\u4eba\u3082\u3044\u308b\u304b\u3082\u306a\u306e\u3067\u3001Google Developer Console \u3092\u4e45\u3005\u306b\u89e6\u3063\u305f\u3089\u3044\u3064\u306e\u307e\u306b\u304b\u65e5\u672c\u8a9e\u5316\u3055\u308c\u3066\u305f\u4e8b\u3082\u3042\u3063\u3066\u4e00\u5fdc\u65e5\u672c\u8a9e\u3067\u3082\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\u5185\u5bb9\u3068\u3057\u3066\u306f\u540c\u3058\u3067\u3059\u3002\n\nGoogle API Console \u3092\u30d6\u30e9\u30a6\u30b6\u3067\u958b\u304f\n[\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u306e\u5165\u529b\u3068\u304b\u8981\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u9069\u5b9c\u6307\u793a\u306b\u5f93\u3044\u5165\u529b\u3002\n\u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30af\u30ea\u30c3\u30af\n\u5de6\u30e1\u30cb\u30e5\u30fc[API\u3068\u8a8d\u8a3c] - [API] \u3092\u30af\u30ea\u30c3\u30af\n\u4e0b\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057[Google Cloud Messaging for Android]\u306e\u53f3\u7aef\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092[...]\u30af\u30ea\u30c3\u30af\n\u4e0a\u306e\u65b9\u306e[\u6709\u52b9\u306aAPI]\u306b[Google Cloud Messaging for Android]\u304c\u79fb\u52d5\u3057\u30b9\u30c6\u30fc\u30bf\u30b9\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\n\u5de6\u30e1\u30cb\u30e5\u30fc[API\u3068\u8a8d\u8a3c] - [\u8a8d\u8a3c\u60c5\u5831] \u3092\u30af\u30ea\u30c3\u30af\n[\u516c\u958bAPI\u3078\u306e\u30a2\u30af\u30bb\u30b9] \u306e [\u65b0\u3057\u3044\u30ad\u30fc\u3092\u4f5c\u6210]\u3092\u30af\u30ea\u30c3\u30af\n[\u30b5\u30fc\u30d0\u30fc \u30ad\u30fc]\u3092\u30af\u30ea\u30c3\u30af\n[\u4f5c\u6210]\u3092\u30af\u30ea\u30c3\u30af\n\u5de6\u30e1\u30cb\u30e5\u30fc[\u6982\u8981] \u3092\u30af\u30ea\u30c3\u30af\n\u4e0a\u90e8\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u756a\u53f7\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002(\u3042\u3068\u3067GCM_sender_id\u3068\u3057\u3066tiapp.xml\u306b\u66f8\u304f\u4e8b\u306b\u306a\u308b)\n\n\ntitanium\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\u30c6\u30b9\u30c8\u7528\u306bTitanium\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002Alloy\u524d\u63d0\u3067\u3059\u3002Titanium Studio\u306a\u4eba\u306f\u305d\u3063\u3061\u3067Alloy\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\ncd ~/dev/\nti create --platforms android --id com.tdtsh.app.gcmtest --name gcmtest --workspace-dir ./\ncd gcmtest\nalloy new\n\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u30d3\u30eb\u30c9\n\u9ec4\u3055\u3093\u306egcm.js\u306e\u4ee3\u308f\u308a\u306b\u3001\u79c1\u304cfolk\u3057\u3066\u4fee\u6b63\u3057\u305f\u3084\u3064\u3092clone\u3057\u307e\u3059\u3002\ngcm.jar \u306e\u66ff\u308f\u308a\u306b google-play-services.jar \u203b\u30b9\u30ea\u30e0\u306ajar\u30d5\u30a1\u30a4\u30eb\u306e\u91cd\u8981\u6027\u306b\u3064\u3044\u3066\u306f\u30b3\u30e1\u30f3\u30c8\u6b04\u53c2\u7167\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u306a\u3069\u3001\u5404\u6240\u624b\u76f4\u3057\u3057\u3066\u3044\u307e\u3059\u3002\n\u51fa\u6765\u308b\u3060\u3051\u5f8c\u65b9\u4e92\u63db\u306b\u6c17\u3092\u3064\u3051\u3066\u66f8\u3044\u305f\u3064\u3082\u308a\u306a\u306e\u3067\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u4ee3\u66ff\u3068\u3057\u3066\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\u591a\u5206\u3002\ncd ~/dev/\ngit clone https://github.com/tdtsh/gcm.js\n\nbuild.properties\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\u304a\u3082\u3044\u3063\u304d\u308a\u79c1\u306e\u4f8b\u3067\u3059\u304c\u81ea\u5206\u306e\u74b0\u5883\u306b\u3042\u308f\u305b\u3066PATH\u306f\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nbuild.properties\ntitanium.platform=/Users/tadatoshi_hanazaki/Library/Application Support/Titanium/mobilesdk/osx/3.4.1.GA/android\nandroid.platform=/Users/tadatoshi_hanazaki/android-sdk-macosx/platforms/android-21\ngoogle.apis=/Users/tadatoshi_hanazaki/android-sdk-macosx/add-ons/addon-google_apis-google-21\n\n\n\u3093\u3067\u30d3\u30eb\u30c9\u3057\u3066\u3001titanium\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\ncd gcm.js\nant clean\nant\n\ncp dist/net.iamyellow.gcmjs-android-*.zip ~/dev/gcmtest/\n\nAndroid\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u74b0\u5883\u3064\u304f\u308a\u304c\u9762\u5012\u304f\u3055\u3044\u65b9\u306f\u3001\u30d3\u30eb\u30c9\u6e08\u307f\u306e\u3082\u306e\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002\n\ngcm.jar\u306e\u7d44\u307f\u8fbc\u307f\ntiapp.xml\u3092\u7de8\u96c6\u3057\u3066\u6700\u521d\u306b\u53d6\u5f97\u3057\u305fGCM_sender_id\u3092YOUR_SENDER_ID\u306e\u30c8\u30b3\u306b\u66f8\u304d\u307e\u3059\u3002\n\u3064\u3044\u3067\u306b\u30d3\u30eb\u30c9\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3082\u8a2d\u5b9a\u3057\u3068\u304d\u307e\u3059\u3002\n\ntiapp.xml\n<property name=\"GCM_sender_id\" type=\"string\">YOUR_SENDER_ID</property>\n<modules>\n    <module platform=\"android\">net.iamyellow.gcmjs</module>\n</modules>\n\n\n\nGCM\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u9023\u643a\u3059\u308bjs\u306e\u90e8\u5206\u3092\u66f8\u304f\n\u307e\u305a\u306f\u9ec4\u3055\u3093\u306e\u8a00\u3046\u3068\u304a\u308a\u3001GCM\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u52d5\u304b\u3059\u70ba\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u30021\u3064\u3081\u306e\u30b3\u30fc\u30c9\u306findex.js\u306b\u3002\u4e2d\u8eab\u306f\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u304c\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u65b9\u5f0f\u306b\u52a0\u3048\u3001\u30a4\u30d9\u30f3\u30c8\u3082\u53d7\u3051\u53d6\u308c\u308b\u69d8\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u65b9\u5f0f\u306f\u51e6\u7406\u304c\u91cd\u305f\u3044\u6642\u3068\u304b\u306b\u4e00\u90e8\u6a5f\u7a2e(Galaxy3\u3068\u304bGalaxy3\u3068\u304bGalaxy3\u3068\u304b)\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3059\u308b\u4e8b\u304c\u3042\u3063\u305f\u306e\u3067\u3002\u304a\u597d\u307f\u3067\u9078\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\napp/controllers/index.js\nvar gcm = require('net.iamyellow.gcmjs')\n\nvar pendingData = gcm.data;\nif (pendingData && pendingData !== null) {\n    // if we're here is because user has clicked on the notification\n    // and we set extras for the intent \n    // and the app WAS NOT running\n    // (don't worry, we'll see more of this later)\n    Ti.API.info('******* data (started) ' + JSON.stringify(pendingData));\n}\n\n/*\n// \u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u65b9\u5f0f\ngcm.registerForPushNotifications({\n        Ti.API.info('******* success, ' + ev.deviceToken);\n    },\n    error: function (ev) {\n        // when an error occurs\n        Ti.API.info('******* error, ' + ev.error);\n    },\n    callback: function () {\n        // when a gcm notification is received WHEN the app IS IN FOREGROUND\n        alert('hellow yellow!');\n    },\n    unregister: function (ev) {\n        // on unregister \n        Ti.API.info('******* unregister, ' + ev.deviceToken);\n    },\n    data: function (data) {\n        // if we're here is because user has clicked on the notification\n        // and we set extras in the intent \n        // and the app WAS RUNNING (=> RESUMED)\n        // (again don't worry, we'll see more of this later)\n        Ti.API.info('******* data (resumed) ' + JSON.stringify(data));\n    }\n});\n*/\n\n// \u30a4\u30d9\u30f3\u30c8\u8fd4\u3059\u65b9\u5f0f\nvar receivePush = function() {\n    alert('hellow yellow!');\n};\n\nvar deviceTokenSuccess = function(ev) {\n    Ti.API.info('GCM ******* success, ' + ev.deviceToken);\n};\n\nvar deviceTokenError = function(ev) {\n    Ti.API.info('GCM ******* error, ' + ev.error);\n};\n\nvar dataWhenResume = function(data) {\n    Ti.API.info('GCM ******* data (resumed) ' + JSON.stringify(data));\n};\n\ngcm.addEventListener('callback', receivePush);\ngcm.addEventListener('success', deviceTokenSuccess);\ngcm.addEventListener('error', deviceTokenError);\ngcm.addEventListener('data', dataWhenResume);\ngcm.registerForPushNotifications({});\n\n// in order to unregister:\n// require('net.iamyellow.gcmjs').unregister();\n\n\n2\u3064\u3081\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3053\u306b\u3002\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u540c\u3058\u3067OK\u3067\u3059\u3002\n\u9ec4\u3055\u3093\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f55\u304c\u30a4\u30b1\u3066\u308b\u3063\u3066\u3001\u30b3\u30b3\u304cTitanium\u5074\u3068\u3044\u3046\u304bjs\u306a\u4e8b\u3067\u3059\u3002\n\u3053\u3053\u3067Notification\u3068\u304b\u3092\u51fa\u3057\u3066\u3044\u308b\u306e\u3067\u9069\u5b9c\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308c\u3070\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nAndroid\u306b\u5f37\u3044\u4eba\u306f\u3053\u3053\u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u5074\u3067\u3084\u308b\u3068\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\napp/assets/android/gcm.js\n/*global Ti: true, require: true */\n\n(function (service) {\n\n    var serviceIntent = service.getIntent(),\n    ...\u4e2d\u7565\n    service.stop();\n\n})(Ti.Android.currentService);\n\n\n3\u3064\u3081\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3053\u3053\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\u3053\u308c\u3082\u4e2d\u8eab\u306f\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u540c\u3058\u3067\u3059\u3002\n\u5fc5\u305a\u3057\u3082\u5fc5\u8981\u3067\u306f\u7121\u3044\u3051\u3069\u3001\u5f8c\u65b9\u4e92\u63db\u306e\u70ba\u306b\u3053\u3053\u306f\u305d\u306e\u307e\u307e\u6b8b\u3057\u307e\u3057\u305f\u3002\n\napp/assets/android/gcm_activity.js\n/*global Ti: true, require: true */\n\n(function (activity, gcm) {\n\n    var intent = activity.intent;\n    ...\u4e2d\u7565\n    }\n})(Ti.Android.currentActivity, require('net.iamyellow.gcmjs'));\n\n\n\nGCM\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u52d5\u304b\u3059\n\u3042\u3068\u306f\nti build -p android -T device\n\n\u3057\u3066\u3001\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3084\u30d0\u30c3\u30af\u30b0\u30e9\u30f3\u30c9\u306e\u6642\u306bPush\u901a\u77e5\u6253\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u660e\u65e5\u306fdksg\u3055\u3093\u306eTitanium\u3068WordPress\u3067\u7c21\u5358SNS\u30a2\u30d7\u30ea\u3067\u3059\u3002\n\nTitanium Advent Calendar 2014 \u306e14\u65e5\u76ee\u3067\u3059\u3002\n\n\n## 2015/09/13 \u8ffd\u8a18\n> \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u304c\u6b32\u3057\u3044\u3068\u306e\u554f\u3044\u5408\u308f\u305b\u3092\u9802\u3044\u305f\u306e\u3067\u3001\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9 (\u30b5\u30fc\u30d0\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u4e21\u65b9) \u3092\u66f8\u304d\u76f4\u3057\u307e\u3057\u305f\u3002\n> \u30e2\u30b8\u30e5\u30fc\u30eb\u3082\u30c7\u30fc\u30bf\u306e\u53d7\u3051\u6e21\u3057\u90e8\u5206\u3092\u4fee\u6b63\u52a0\u7b46\u306e\u3046\u3048\u3001SDK 4.1.1\u306b\u5bfe\u5fdc\u3055\u305b\u3066\u30d3\u30eb\u30c9\u3057\u306a\u304a\u3057\u307e\u3057\u305f\u3002\n\n> [https://github.com/tdtsh/gcm.js](https://github.com/tdtsh/gcm.js)\n\n> \u305f\u3060\u3053\u306e\u9ec4\u3055\u3093\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u66f8\u304d\u65b9\u3060\u3068\u3001service\u3092Titanium\u5074\u3067\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\u30a2\u30d7\u30ea\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3044\u306a\u3044\u6642\u306b\u306fPush\u3092\u53d7\u3051\u53d6\u3089\u308c\u307e\u305b\u3093\u3002\n> \u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u304b\u30d0\u30c3\u30af\u30b0\u30e9\u30f3\u30c9\u3067\u30a2\u30d7\u30ea\u304c\u52d5\u3044\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n> \u30a2\u30d7\u30ea\u304c\u7acb\u3061\u4e0a\u304c\u308b\u524d\u3067\u3082Push\u901a\u77e5\u304c\u53d7\u3051\u53d6\u3089\u308c\u308b\u69d8\u306b\u3059\u308b\u306b\u306f\u3001service\u90e8\u5206\u3082\u30e2\u30b8\u30e5\u30fc\u30eb\u5074\u3067\u66f8\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n> \u3082\u3057\u8981\u671b\u304c\u591a\u3051\u308c\u3070\u5225\u9014\u30e2\u30b8\u30e5\u30fc\u30eb\u4f5c\u308a\u307e\u3059\u3002\n\n\n## \u306f\u3058\u3081\u306b\n\n\u305d\u306e\u6614\u3001Titanium \u3067 Android \u3068\u3044\u3046\u3068\u306a\u304b\u306a\u304b\u30b7\u30f3\u30c9\u30a4\u3068\u3044\u3046\u8a71\u304c\u591a\u304b\u3063\u305f\u69d8\u3067\u3059\u304c\u3001\u4eca\u3082\u307e\u3041\u307e\u3041\u30b7\u30f3\u30c9\u30a4\u3067\u3059\u3002\n\n\u3067\u3082\u305d\u308c\u306f\u3001UI\u306e\u8a2d\u8a08\u3084\u9032\u3081\u65b9(\u3069\u3046\u3057\u3066\u3082iOS\u30d5\u30a1\u30fc\u30b9\u30c8\u306b\u306a\u308a\u304c\u3061)\u306b\u5bc4\u308b\u6240\u3082\u591a\u304f\u3001\u30dd\u30a4\u30f3\u30c8\u3092\u62bc\u3055\u3048\u308c\u3070\u6700\u8fd1\u306eTitanium \u3067\u306e Andorid \u306f\u304b\u306a\u308a\u51fa\u6765\u306a\u3044\u3053\u3068\u304c\u6e1b\u3063\u3066\u4f7f\u3048\u308b\u5b50\u306b\u306a\u3063\u3066\u304d\u3066\u307e\u3059\u3002\n\u306a\u306e\u3067\u6614\u632b\u6298\u3057\u305f\u65b9\u3082\u30ec\u30c3\u30c4\u30c8\u30e9\u30a4\u3067\u3059\u3002\u662f\u975e\u3002\n\n\u305d\u3093\u306a\u4e2d\u3067\u3001\u975e\u5e38\u306b\u91cd\u8981\u3067\u3042\u308b\u306e\u306b\u3082\u304b\u304b\u308f\u3089\u305a\u3001iOS\u306a\u3089\u7c21\u5358\u306a\u306e\u306bAndroid\u3067\u306f\u3059\u3053\u3076\u308b\u9762\u5012\u304f\u3055\u3044\u306e\u304cPush\u901a\u77e5\u307e\u308f\u308a\u3001Google Cloud Messaging (GCM)\u306e\u30c8\u30b3\u3067\u3059\u3002\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3046or\u4f5c\u308b\u3057\u304b\u65b9\u6cd5\u304c\u7121\u304f\u3066\u3001\u3044\u304d\u306a\u308a\u30cf\u30fc\u30c9\u30eb\u4e0a\u3052\u3066\u308b\u611f\u3058\u3067\u3059\u3002\n\ngcm\u3068\u3044\u3048\u3070\u3053\u308c\u3068\u3044\u3046\u4f4d\u5b9a\u756a\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u3053\u3061\u3089\u306eiamyellow\u3055\u3093(\u4ee5\u4e0b\u9ec3\u3055\u3093)\u306egcm.js\u3067\u3059\u3002\n[https://github.com/iamyellow/gcm.js](https://github.com/iamyellow/gcm.js)\n\n\u9ec4\u3055\u3093\u3054\u81ea\u8eab\u304c\u30d6\u30ed\u30b0\u306b\u5927\u5909\u4e01\u5be7\u306b\u89e3\u8aac\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u82f1\u8a9e\u3067\u3059\u304c\u3002\n[GCM push notifications for Titanium (made easy)](http://iamyellow.net/post/40100981563/gcm-appcelerator-titanium-module)\n\n\u3053\u308c\u8aad\u3093\u3067\u3084\u308c\u3070\u307e\u3041\u3044\u3051\u308b\u3063\u3061\u3083\u30fc\u3044\u3051\u308b\u3093\u3067\u3059\u304c\u3001\u82f1\u8a9e\u306f\u3061\u3087\u3063\u3068\u30fb\u30fb\u30fb\u3068\u3044\u3046\u4eba\u3082\u3044\u308b\u3068\u601d\u3046\u306e\u3068\u3001[gcm.jar\u304c\u30aa\u30ef\u30b3\u30f3\u306b\u306a\u3063\u3066\u4e45\u3057\u3044](http://quesera2.hatenablog.jp/entry/2014/03/15/001413)\u306e\u306b\u3082\u95a2\u308f\u3089\u305a\u3001\u672a\u3060\u306bTitanium\u306eGCM\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u304b\u306f gcm.jar \u304c\u73fe\u5f79\u306a\u611f\u3058\u306a\u306e\u3067\u3001\u9811\u5f35\u3063\u3066 Google Play Service \u306b\u7f6e\u304d\u63db\u3048\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n\n\n\n\n## Google\u5074\u306eAPI\u6e96\u5099\u3068GCM_sender_id\u53d6\u5f97\n\n\u5947\u3057\u304f\u3082\u660e\u65e5(15\u65e5)\u62c5\u5f53\u306e[dksg\u3055\u3093](http://qiita.com/dksg) \u304c\u66f8\u304b\u308c\u305f\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3059\u3002\n\n[SE\u596e\u95d8\u8a18: Titanium\u30a2\u30d7\u30ea\u3067Push Notification\u3010Android\u7248\u3011](http://se-suganuma.blogspot.com/2014/09/titaniumpush-notificationandroid.html)\n\n\u305f\u3060\u3053\u3053\u3082\u82f1\u8a9e\u306f\u3061\u3087\u3063\u3068\u30fb\u30fb\u30fb\u306a\u4eba\u3082\u3044\u308b\u304b\u3082\u306a\u306e\u3067\u3001Google Developer Console \u3092\u4e45\u3005\u306b\u89e6\u3063\u305f\u3089\u3044\u3064\u306e\u307e\u306b\u304b\u65e5\u672c\u8a9e\u5316\u3055\u308c\u3066\u305f\u4e8b\u3082\u3042\u3063\u3066\u4e00\u5fdc\u65e5\u672c\u8a9e\u3067\u3082\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\u5185\u5bb9\u3068\u3057\u3066\u306f\u540c\u3058\u3067\u3059\u3002\n\n\n1. [Google API Console](https://code.google.com/apis/console/) \u3092\u30d6\u30e9\u30a6\u30b6\u3067\u958b\u304f\n\n2. [\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210]\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u306e\u5165\u529b\u3068\u304b\u8981\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u9069\u5b9c\u6307\u793a\u306b\u5f93\u3044\u5165\u529b\u3002\n\n3. \u4f5c\u6210\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30af\u30ea\u30c3\u30af\n\n4. \u5de6\u30e1\u30cb\u30e5\u30fc[API\u3068\u8a8d\u8a3c] - [API] \u3092\u30af\u30ea\u30c3\u30af\n\n5. \u4e0b\u306b\u30b9\u30af\u30ed\u30fc\u30eb\u3057[Google Cloud Messaging for Android]\u306e\u53f3\u7aef\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092[...]\u30af\u30ea\u30c3\u30af\n\n6. \u4e0a\u306e\u65b9\u306e[\u6709\u52b9\u306aAPI]\u306b[Google Cloud Messaging for Android]\u304c\u79fb\u52d5\u3057\u30b9\u30c6\u30fc\u30bf\u30b9\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\n\n7. \u5de6\u30e1\u30cb\u30e5\u30fc[API\u3068\u8a8d\u8a3c] - [\u8a8d\u8a3c\u60c5\u5831] \u3092\u30af\u30ea\u30c3\u30af\n\n8. [\u516c\u958bAPI\u3078\u306e\u30a2\u30af\u30bb\u30b9] \u306e [\u65b0\u3057\u3044\u30ad\u30fc\u3092\u4f5c\u6210]\u3092\u30af\u30ea\u30c3\u30af\n\n9. [\u30b5\u30fc\u30d0\u30fc \u30ad\u30fc]\u3092\u30af\u30ea\u30c3\u30af\n\n10. [\u4f5c\u6210]\u3092\u30af\u30ea\u30c3\u30af\n\n11. \u5de6\u30e1\u30cb\u30e5\u30fc[\u6982\u8981] \u3092\u30af\u30ea\u30c3\u30af\n\n12. \u4e0a\u90e8\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u756a\u53f7\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002(\u3042\u3068\u3067GCM_sender_id\u3068\u3057\u3066tiapp.xml\u306b\u66f8\u304f\u4e8b\u306b\u306a\u308b)\n\n\n\n\n## titanium\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\u30c6\u30b9\u30c8\u7528\u306bTitanium\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002Alloy\u524d\u63d0\u3067\u3059\u3002Titanium Studio\u306a\u4eba\u306f\u305d\u3063\u3061\u3067Alloy\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n```CLI\ncd ~/dev/\nti create --platforms android --id com.tdtsh.app.gcmtest --name gcmtest --workspace-dir ./\ncd gcmtest\nalloy new\n```\n\n## \u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u30d3\u30eb\u30c9\n\u9ec4\u3055\u3093\u306egcm.js\u306e\u4ee3\u308f\u308a\u306b\u3001[\u79c1\u304cfolk\u3057\u3066\u4fee\u6b63\u3057\u305f\u3084\u3064](https://github.com/tdtsh/gcm.js)\u3092clone\u3057\u307e\u3059\u3002\ngcm.jar \u306e\u66ff\u308f\u308a\u306b google-play-services.jar *\u203b\u30b9\u30ea\u30e0\u306ajar\u30d5\u30a1\u30a4\u30eb\u306e\u91cd\u8981\u6027\u306b\u3064\u3044\u3066\u306f\u30b3\u30e1\u30f3\u30c8\u6b04\u53c2\u7167*\u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u306a\u3069\u3001\u5404\u6240\u624b\u76f4\u3057\u3057\u3066\u3044\u307e\u3059\u3002\n\u51fa\u6765\u308b\u3060\u3051\u5f8c\u65b9\u4e92\u63db\u306b\u6c17\u3092\u3064\u3051\u3066\u66f8\u3044\u305f\u3064\u3082\u308a\u306a\u306e\u3067\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u4ee3\u66ff\u3068\u3057\u3066\u52d5\u304f\u3068\u601d\u3044\u307e\u3059\u3002\u591a\u5206\u3002\n\n```CLI\ncd ~/dev/\ngit clone https://github.com/tdtsh/gcm.js\n```\n\nbuild.properties\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\u304a\u3082\u3044\u3063\u304d\u308a\u79c1\u306e\u4f8b\u3067\u3059\u304c\u81ea\u5206\u306e\u74b0\u5883\u306b\u3042\u308f\u305b\u3066PATH\u306f\u9069\u5b9c\u4fee\u6b63\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```build.properties\ntitanium.platform=/Users/tadatoshi_hanazaki/Library/Application Support/Titanium/mobilesdk/osx/3.4.1.GA/android\nandroid.platform=/Users/tadatoshi_hanazaki/android-sdk-macosx/platforms/android-21\ngoogle.apis=/Users/tadatoshi_hanazaki/android-sdk-macosx/add-ons/addon-google_apis-google-21\n```\n\n\u3093\u3067\u30d3\u30eb\u30c9\u3057\u3066\u3001titanium\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n```CLI\ncd gcm.js\nant clean\nant\n\ncp dist/net.iamyellow.gcmjs-android-*.zip ~/dev/gcmtest/\n```\n\nAndroid\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u74b0\u5883\u3064\u304f\u308a\u304c\u9762\u5012\u304f\u3055\u3044\u65b9\u306f\u3001[\u30d3\u30eb\u30c9\u6e08\u307f\u306e\u3082\u306e](https://github.com/tdtsh/gcm.js/blob/master/dist/net.iamyellow.gcmjs-android-0.3.zip)\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002\n\n\n## gcm.jar\u306e\u7d44\u307f\u8fbc\u307f\ntiapp.xml\u3092\u7de8\u96c6\u3057\u3066\u6700\u521d\u306b\u53d6\u5f97\u3057\u305fGCM_sender_id\u3092YOUR_SENDER_ID\u306e\u30c8\u30b3\u306b\u66f8\u304d\u307e\u3059\u3002\n\u3064\u3044\u3067\u306b\u30d3\u30eb\u30c9\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3082\u8a2d\u5b9a\u3057\u3068\u304d\u307e\u3059\u3002\n\n```tiapp.xml\n<property name=\"GCM_sender_id\" type=\"string\">YOUR_SENDER_ID</property>\n<modules>\n\t<module platform=\"android\">net.iamyellow.gcmjs</module>\n</modules>\n```\n\n\n## GCM\u30e2\u30b8\u30e5\u30fc\u30eb\u3068\u9023\u643a\u3059\u308bjs\u306e\u90e8\u5206\u3092\u66f8\u304f\n\u307e\u305a\u306f[\u9ec4\u3055\u3093\u306e\u8a00\u3046\u3068\u304a\u308a](http://iamyellow.net/post/40100981563/gcm-appcelerator-titanium-module)\u3001GCM\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u52d5\u304b\u3059\u70ba\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u30021\u3064\u3081\u306e\u30b3\u30fc\u30c9\u306findex.js\u306b\u3002\u4e2d\u8eab\u306f\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u304c\u3001\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u65b9\u5f0f\u306b\u52a0\u3048\u3001\u30a4\u30d9\u30f3\u30c8\u3082\u53d7\u3051\u53d6\u308c\u308b\u69d8\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u65b9\u5f0f\u306f\u51e6\u7406\u304c\u91cd\u305f\u3044\u6642\u3068\u304b\u306b\u4e00\u90e8\u6a5f\u7a2e(Galaxy3\u3068\u304bGalaxy3\u3068\u304bGalaxy3\u3068\u304b)\u3067\u30af\u30e9\u30c3\u30b7\u30e5\u3059\u308b\u4e8b\u304c\u3042\u3063\u305f\u306e\u3067\u3002\u304a\u597d\u307f\u3067\u9078\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\n\n```app/controllers/index.js\nvar gcm = require('net.iamyellow.gcmjs')\n\nvar pendingData = gcm.data;\nif (pendingData && pendingData !== null) {\n\t// if we're here is because user has clicked on the notification\n\t// and we set extras for the intent \n\t// and the app WAS NOT running\n\t// (don't worry, we'll see more of this later)\n\tTi.API.info('******* data (started) ' + JSON.stringify(pendingData));\n}\n\n/*\n// \u30aa\u30ea\u30b8\u30ca\u30eb\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u65b9\u5f0f\ngcm.registerForPushNotifications({\n\t\tTi.API.info('******* success, ' + ev.deviceToken);\n\t},\n\terror: function (ev) {\n\t\t// when an error occurs\n\t\tTi.API.info('******* error, ' + ev.error);\n\t},\n\tcallback: function () {\n\t\t// when a gcm notification is received WHEN the app IS IN FOREGROUND\n\t\talert('hellow yellow!');\n\t},\n\tunregister: function (ev) {\n\t\t// on unregister \n\t\tTi.API.info('******* unregister, ' + ev.deviceToken);\n\t},\n\tdata: function (data) {\n\t\t// if we're here is because user has clicked on the notification\n\t\t// and we set extras in the intent \n\t\t// and the app WAS RUNNING (=> RESUMED)\n\t\t// (again don't worry, we'll see more of this later)\n\t\tTi.API.info('******* data (resumed) ' + JSON.stringify(data));\n\t}\n});\n*/\n\n// \u30a4\u30d9\u30f3\u30c8\u8fd4\u3059\u65b9\u5f0f\nvar receivePush = function() {\n\talert('hellow yellow!');\n};\n\nvar deviceTokenSuccess = function(ev) {\n\tTi.API.info('GCM ******* success, ' + ev.deviceToken);\n};\n\nvar deviceTokenError = function(ev) {\n\tTi.API.info('GCM ******* error, ' + ev.error);\n};\n\nvar dataWhenResume = function(data) {\n\tTi.API.info('GCM ******* data (resumed) ' + JSON.stringify(data));\n};\n\ngcm.addEventListener('callback', receivePush);\ngcm.addEventListener('success', deviceTokenSuccess);\ngcm.addEventListener('error', deviceTokenError);\ngcm.addEventListener('data', dataWhenResume);\ngcm.registerForPushNotifications({});\n\n// in order to unregister:\n// require('net.iamyellow.gcmjs').unregister();\n```\n\n\n\n\n2\u3064\u3081\u306e\u30b3\u30fc\u30c9\u306f\u3053\u3053\u306b\u3002\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u540c\u3058\u3067OK\u3067\u3059\u3002\n\u9ec4\u3055\u3093\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u4f55\u304c\u30a4\u30b1\u3066\u308b\u3063\u3066\u3001\u30b3\u30b3\u304cTitanium\u5074\u3068\u3044\u3046\u304bjs\u306a\u4e8b\u3067\u3059\u3002\n\u3053\u3053\u3067Notification\u3068\u304b\u3092\u51fa\u3057\u3066\u3044\u308b\u306e\u3067\u9069\u5b9c\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308c\u3070\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nAndroid\u306b\u5f37\u3044\u4eba\u306f\u3053\u3053\u3092\u30e2\u30b8\u30e5\u30fc\u30eb\u5074\u3067\u3084\u308b\u3068\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n```app/assets/android/gcm.js\n/*global Ti: true, require: true */\n\n(function (service) {\n\n\tvar serviceIntent = service.getIntent(),\n\t...\u4e2d\u7565\n\tservice.stop();\n\n})(Ti.Android.currentService);\n```\n\n3\u3064\u3081\u306e\u30b3\u30fc\u30c9\u3092\u30b3\u30d4\u30fc\u3057\u3066\u3053\u3053\u306b\u914d\u7f6e\u3057\u307e\u3059\u3002\u3053\u308c\u3082\u4e2d\u8eab\u306f\u30aa\u30ea\u30b8\u30ca\u30eb\u3068\u540c\u3058\u3067\u3059\u3002\n\u5fc5\u305a\u3057\u3082\u5fc5\u8981\u3067\u306f\u7121\u3044\u3051\u3069\u3001\u5f8c\u65b9\u4e92\u63db\u306e\u70ba\u306b\u3053\u3053\u306f\u305d\u306e\u307e\u307e\u6b8b\u3057\u307e\u3057\u305f\u3002\n\n```app/assets/android/gcm_activity.js\n/*global Ti: true, require: true */\n\n(function (activity, gcm) {\n\n\tvar intent = activity.intent;\n\t...\u4e2d\u7565\n\t}\n})(Ti.Android.currentActivity, require('net.iamyellow.gcmjs'));\n```\n\n## GCM\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u52d5\u304b\u3059\n\n\u3042\u3068\u306f\n\n```CLI\nti build -p android -T device\n```\n\n\u3057\u3066\u3001\u30d5\u30a9\u30a2\u30b0\u30e9\u30a6\u30f3\u30c9\u3084\u30d0\u30c3\u30af\u30b0\u30e9\u30f3\u30c9\u306e\u6642\u306bPush\u901a\u77e5\u6253\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n![2014-12-10 00.16.393.png](https://qiita-image-store.s3.amazonaws.com/0/27892/a587bbf5-a3a7-2d12-a8e8-778a313bfe4e.png \"2014-12-10 00.16.393.png\")\n\n\n\n\n\n\u660e\u65e5\u306f[dksg\u3055\u3093](http://qiita.com/dksg)\u306eTitanium\u3068WordPress\u3067\u7c21\u5358SNS\u30a2\u30d7\u30ea\u3067\u3059\u3002\n"}