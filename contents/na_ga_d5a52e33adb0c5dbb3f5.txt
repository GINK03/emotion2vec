{"context": " More than 1 year has passed since last update.Riak \u306e Seconday Index (\u4ee5\u5f8c 2i) \u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n\n\u306f\u3058\u3081\u306b\n1 \u53f0\u306e\u30b5\u30fc\u30d0\u3067 Riak \u30d0\u30fc\u30b8\u30e7\u30f3 1.3.1 \u3092 CentOS 6.4 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30022i \u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\u3001app.config \u3067\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30b9\u30c8\u30ec\u30fc\u30b8\u306b ELevelDB \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002HTTP \u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u6271\u3046\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066 curl \u3068 httpie \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\u3072\u3068\u3064\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u8907\u6570\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u9805\u76ee\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data1' -H \"x-riak-index-field1_bin:val1\" -H \"x-riak-index-field2_int:1001\" http://127.0.0.1:8098/riak/mybucket/mykey1\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey1 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-field1_bin: val1\n> x-riak-index-field2_int: 1001\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:30:15 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey1\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 02:54:04 GMT\nETag: \"2TiABeHgQo586MBaPwmcCp\"\nLast-Modified: Thu, 27 Jun 2013 02:30:15 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIk8fKsF3e4TRfFgA=\nx-riak-index-field1_bin: val1\nx-riak-index-field2_int: 1001\n\ndata1\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306b\u5927\u6587\u5b57\u304c\u542b\u307e\u308c\u308b\u5834\u5408\u306f\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306b\u5927\u6587\u5b57\u3092\u542b\u3080\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data2' -H \"x-riak-index-Field1_bin:val2\" -H \"x-riak-index-Field2_int:1002\" http://127.0.0.1:8098/riak/mybucket/mykey2\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey2 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-Field1_bin:val2\n> x-riak-index-Field2_int:1002\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:37:36 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey2\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 03:01:36 GMT\nETag: \"37HUXH3xjNv5G8AQVWPJPl\"\nLast-Modified: Thu, 27 Jun 2013 02:37:36 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIlMfKUKDocJovCwA=\nx-riak-index-field1_bin: val2\nx-riak-index-field2_int: 1002\n\ndata2\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304c\u5927\u6587\u5b57\u306e\u307f\u306e\u5834\u5408\u3082\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306b\u5927\u6587\u5b57\u3092\u542b\u3080\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data3' -H \"X-RIAK-INDEX-FIELD1_BIN:val3\" -H \"X-RIAK-INDEX-FIELD2_INT:1003\" http://127.0.0.1:8098/riak/mybucket/mykey3\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey3 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> X-RIAK-INDEX-FIELD1_BIN:val3\n> X-RIAK-INDEX-FIELD2_INT:1003\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:49:08 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey3\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 02:51:07 GMT\nETag: \"6grLbg0eKBqljxJyH2xZZZ\"\nLast-Modified: Thu, 27 Jun 2013 02:49:08 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIlMfKoKLicJovCwA=\nx-riak-index-field1_bin: val3\nx-riak-index-field2_int: 1003\n\ndata3\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u5024\u306f\u8907\u6570\u500b\u6307\u5b9a\u3067\u304d\u3001\u91cd\u8907\u3057\u305f\u5024\u306f\u30e6\u30cb\u30fc\u30af\u306b\u306a\u308b\u3088\u3046\u306b\u53d6\u308a\u9664\u304b\u308c\u308b\u3002\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u5024\u306b\u8907\u6570\u500b\u6307\u5b9a\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data4' -H \"x-riak-index-field1_bin:val4, val4, val4a, val4b\" -H \"x-riak-index-field2_int:1004, 1004, 1005, 1006\" -H \"x-riak-index-field2_int:1004\" -H \"x-riak-index-field2_int:1004\" -H \"x-riak-index-field2_int:1004\" -H \"x-riak-index-field2_int:1007\" http://127.0.0.1:8098/riak/mybucket/mykey4\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey4 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-field1_bin:val4, val4, val4a, val4b\n> x-riak-index-field2_int:1004, 1004, 1005, 1006\n> x-riak-index-field2_int:1004\n> x-riak-index-field2_int:1004\n> x-riak-index-field2_int:1004\n> x-riak-index-field2_int:1007\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:50:22 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey4\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 02:51:08 GMT\nETag: \"5XWGgxIagddHHbaInjJ4sk\"\nLast-Modified: Thu, 27 Jun 2013 02:50:22 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIlMfKkKficJovCwA=\nx-riak-index-field1_bin: val4, val4a, val4b\nx-riak-index-field2_int: 1004, 1005, 1006, 1007\n\ndata4\n\n\u4ed6\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u540c\u3058\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u308c\u308b\u3002\n[on server01]$ ### \u4ed6\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 /mybucket/mykey4 \u3068\u540c\u3058\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data5' -H \"X-RIAK-INDEX-FIELD1_BIN:val5\" -H \"X-RIAK-INDEX-FIELD2_INT:1005\" http://127.0.0.1:8098/riak/mybucket/mykey5\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey5 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-field1_bin:val5\n> x-riak-index-field2_int:1005\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 03:16:26 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field1_bin/val5\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 37\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:16:31 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey5\"\n    ]\n}\n\n\nExact Match \u30af\u30a8\u30ea\u30fc\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u8fd4\u3059\u3002\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field1_bin=val1 \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field1_bin/val1\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 37\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:19:47 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey1\"\n    ]\n}\n\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field2_int=1005 \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field2_int/1005\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 42\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:16:41 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey4\", \n        \"mykey5\"\n    ]\n}\n\n\nRange \u30af\u30a8\u30ea\u30fc\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u7bc4\u56f2\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u8fd4\u3059\u3002\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field1_bin=[val2-val4] \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field1_bin/val2/val4\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 45\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:32:58 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey3\", \n        \"mykey2\", \n        \"mykey4\"\n    ]\n}\n\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field2_int=[1002-1007] \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field2_int/1002/1007\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 48\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:33:00 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey4\", \n        \"mykey4\", \n        \"mykey4\", \n        \"mykey4\", \n        \"mykey5\", \n        \"mykey3\", \n        \"mykey2\"\n    ]\n}\n\n\n\u7279\u5225\u306a\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9 $key \u3092\u4f7f\u7528\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 $key=mykey1 \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/\\$key/mykey1\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 37\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:49:05 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey1\"\n    ]\n}\n\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 $key=[mykey3-mykey5] \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$  http localhost:8098/buckets/mybucket/index/\\$key/mykey3/mykey5\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 45\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:49:13 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey4\", \n        \"mykey5\", \n        \"mykey3\"\n    ]\n}\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9 $bucket \u3092\u4f7f\u7528\u3057\u3066\u5168\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n[on server01]$ ### \u5168\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/\\$bucket/_\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 50\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:50:52 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey5\", \n        \"mykey3\", \n        \"mykey4\", \n        \"mykey2\", \n        \"mykey1\"\n    ]\n}\n\n\n\u304a\u308f\u308a\n\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u3060\u3051\u3069\u30012i \u306e\u5168\u6a5f\u80fd\u3092\u8a66\u305b\u305f\u3002\u554f\u3044\u5408\u308f\u305b\u306b\u5bfe\u3059\u308b\u7d50\u679c\u306e\u30bd\u30fc\u30c8\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u554f\u3044\u5408\u308f\u305b\u3059\u308b\u305f\u3073\u306b\u9806\u756a\u304c\u304b\u308f\u308b\u6319\u52d5\u3092\u3057\u3066\u3044\u308b\u3002\u30bd\u30fc\u30c8\u304c\u5fc5\u8981\u3060\u3063\u305f\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u3084\u308b\u304b\u3001MapReduce \u9023\u643a\u3092\u4f7f\u3048\u3063\u3066\u3053\u3068\u3060\u306d\u3002\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4ed8\u3051\u65b9\u306b\u3088\u3063\u3066\u306f\u3001Range \u30af\u30a8\u30ea\u30fc\u306e\u7d50\u679c\u306f\u91cd\u8907\u3057\u305f\u9805\u76ee\u3092\u542b\u3093\u3067\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3063\u3066\u306e\u306f\u6ce8\u610f\u3057\u306a\u3044\u3068\u306a\u3002\n\n\u95a2\u9023\n\nCentOS 6.4 \u306b Riak Cluster \u3092\u69cb\u7bc9\u3059\u308b\nRiak docs \u306e 2i \u3092\u610f\u8a33\u3057\u3066\u307f\u305f\nRiak docs \u306e Configuring 2i \u3092\u610f\u8a33\u3057\u3066\u307f\u305f\nRiak docs \u306e 2i Examples \u3092\u610f\u8a33\u3057\u3066\u307f\u305f\n\n\nRiak \u306e Seconday Index (\u4ee5\u5f8c 2i) \u3092\u8a66\u3057\u3066\u307f\u308b\u3002\n\n## \u306f\u3058\u3081\u306b\n\n1 \u53f0\u306e\u30b5\u30fc\u30d0\u3067 Riak \u30d0\u30fc\u30b8\u30e7\u30f3 1.3.1 \u3092 CentOS 6.4 \u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u30022i \u3092\u6709\u52b9\u306b\u3059\u308b\u305f\u3081\u306b\u3001app.config \u3067\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u30b9\u30c8\u30ec\u30fc\u30b8\u306b ELevelDB \u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u3002HTTP \u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u6271\u3046\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3068\u3057\u3066 curl \u3068 [httpie](https://github.com/jkbr/httpie) \u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u3002\n\n## \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\n\n\u3072\u3068\u3064\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u8907\u6570\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u9805\u76ee\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3002\n\n```\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data1' -H \"x-riak-index-field1_bin:val1\" -H \"x-riak-index-field2_int:1001\" http://127.0.0.1:8098/riak/mybucket/mykey1\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey1 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-field1_bin: val1\n> x-riak-index-field2_int: 1001\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:30:15 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey1\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 02:54:04 GMT\nETag: \"2TiABeHgQo586MBaPwmcCp\"\nLast-Modified: Thu, 27 Jun 2013 02:30:15 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIk8fKsF3e4TRfFgA=\nx-riak-index-field1_bin: val1\nx-riak-index-field2_int: 1001\n\ndata1\n```\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306b\u5927\u6587\u5b57\u304c\u542b\u307e\u308c\u308b\u5834\u5408\u306f\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n\n```\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306b\u5927\u6587\u5b57\u3092\u542b\u3080\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data2' -H \"x-riak-index-Field1_bin:val2\" -H \"x-riak-index-Field2_int:1002\" http://127.0.0.1:8098/riak/mybucket/mykey2\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey2 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-Field1_bin:val2\n> x-riak-index-Field2_int:1002\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:37:36 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey2\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 03:01:36 GMT\nETag: \"37HUXH3xjNv5G8AQVWPJPl\"\nLast-Modified: Thu, 27 Jun 2013 02:37:36 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIlMfKUKDocJovCwA=\nx-riak-index-field1_bin: val2\nx-riak-index-field2_int: 1002\n\ndata2\n```\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u304c\u5927\u6587\u5b57\u306e\u307f\u306e\u5834\u5408\u3082\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n\n```\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u540d\u306b\u5927\u6587\u5b57\u3092\u542b\u3080\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data3' -H \"X-RIAK-INDEX-FIELD1_BIN:val3\" -H \"X-RIAK-INDEX-FIELD2_INT:1003\" http://127.0.0.1:8098/riak/mybucket/mykey3\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey3 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> X-RIAK-INDEX-FIELD1_BIN:val3\n> X-RIAK-INDEX-FIELD2_INT:1003\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:49:08 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey3\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 02:51:07 GMT\nETag: \"6grLbg0eKBqljxJyH2xZZZ\"\nLast-Modified: Thu, 27 Jun 2013 02:49:08 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIlMfKoKLicJovCwA=\nx-riak-index-field1_bin: val3\nx-riak-index-field2_int: 1003\n\ndata3\n```\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u5024\u306f\u8907\u6570\u500b\u6307\u5b9a\u3067\u304d\u3001\u91cd\u8907\u3057\u305f\u5024\u306f\u30e6\u30cb\u30fc\u30af\u306b\u306a\u308b\u3088\u3046\u306b\u53d6\u308a\u9664\u304b\u308c\u308b\u3002\n\n```\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\u5024\u306b\u8907\u6570\u500b\u6307\u5b9a\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data4' -H \"x-riak-index-field1_bin:val4, val4, val4a, val4b\" -H \"x-riak-index-field2_int:1004, 1004, 1005, 1006\" -H \"x-riak-index-field2_int:1004\" -H \"x-riak-index-field2_int:1004\" -H \"x-riak-index-field2_int:1004\" -H \"x-riak-index-field2_int:1007\" http://127.0.0.1:8098/riak/mybucket/mykey4\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey4 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-field1_bin:val4, val4, val4a, val4b\n> x-riak-index-field2_int:1004, 1004, 1005, 1006\n> x-riak-index-field2_int:1004\n> x-riak-index-field2_int:1004\n> x-riak-index-field2_int:1004\n> x-riak-index-field2_int:1007\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 02:50:22 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/riak/mybucket/mykey4\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 25\nContent-Type: application/x-www-form-urlencoded\nDate: Thu, 27 Jun 2013 02:51:08 GMT\nETag: \"5XWGgxIagddHHbaInjJ4sk\"\nLast-Modified: Thu, 27 Jun 2013 02:50:22 GMT\nLink: </riak/mybucket>; rel=\"up\"\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\nX-Riak-Vclock: a85hYGBgzGDKBVIcXvnPqwNPT16SwZTIlMfKkKficJovCwA=\nx-riak-index-field1_bin: val4, val4a, val4b\nx-riak-index-field2_int: 1004, 1005, 1006, 1007\n\ndata4\n```\n\n\u4ed6\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u540c\u3058\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u308c\u308b\u3002\n\n```\n[on server01]$ ### \u4ed6\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8 /mybucket/mykey4 \u3068\u540c\u3058\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3092\u4ed8\u3051\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u683c\u7d0d\u3059\u308b\n[on server01]$ curl -v -X PUT -d 'data5' -H \"X-RIAK-INDEX-FIELD1_BIN:val5\" -H \"X-RIAK-INDEX-FIELD2_INT:1005\" http://127.0.0.1:8098/riak/mybucket/mykey5\n* About to connect() to 127.0.0.1 port 8098 (#0)\n*   Trying 127.0.0.1... connected\n* Connected to 127.0.0.1 (127.0.0.1) port 8098 (#0)\n> PUT /riak/mybucket/mykey5 HTTP/1.1\n> User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2\n> Host: 127.0.0.1:8098\n> Accept: */*\n> x-riak-index-field1_bin:val5\n> x-riak-index-field2_int:1005\n> Content-Length: 5\n> Content-Type: application/x-www-form-urlencoded\n> \n< HTTP/1.1 204 No Content\n< Vary: Accept-Encoding\n< Server: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\n< Date: Thu, 27 Jun 2013 03:16:26 GMT\n< Content-Type: application/x-www-form-urlencoded\n< Content-Length: 0\n< \n* Connection #0 to host 127.0.0.1 left intact\n* Closing connection #0\n\n[on server01]$ ### \u683c\u7d0d\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4e3b\u30ad\u30fc\u3067\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field1_bin/val5\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 37\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:16:31 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey5\"\n    ]\n}\n```\n\n## Exact Match \u30af\u30a8\u30ea\u30fc\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u8fd4\u3059\u3002\n\n```\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field1_bin=val1 \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field1_bin/val1\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 37\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:19:47 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey1\"\n    ]\n}\n\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field2_int=1005 \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field2_int/1005\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 42\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:16:41 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey4\", \n        \"mykey5\"\n    ]\n}\n```\n\n## Range \u30af\u30a8\u30ea\u30fc\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u7bc4\u56f2\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u8fd4\u3059\u3002\n\n```\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field1_bin=[val2-val4] \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field1_bin/val2/val4\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 45\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:32:58 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey3\", \n        \"mykey2\", \n        \"mykey4\"\n    ]\n}\n\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 field2_int=[1002-1007] \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/field2_int/1002/1007\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 48\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:33:00 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey4\", \n        \"mykey4\", \n        \"mykey4\", \n        \"mykey4\", \n        \"mykey5\", \n        \"mykey3\", \n        \"mykey2\"\n    ]\n}\n```\n\n## \u7279\u5225\u306a\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9 $key \u3092\u4f7f\u7528\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n```\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 $key=mykey1 \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/\\$key/mykey1\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 37\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:49:05 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey1\"\n    ]\n}\n\n[on server01]$ ### \u30a4\u30f3\u30c7\u30c3\u30af\u30b9 $key=[mykey3-mykey5] \u306e\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$  http localhost:8098/buckets/mybucket/index/\\$key/mykey3/mykey5\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 45\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:49:13 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey4\", \n        \"mykey5\", \n        \"mykey3\"\n    ]\n}\n```\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u30d5\u30a3\u30fc\u30eb\u30c9 $bucket \u3092\u4f7f\u7528\u3057\u3066\u5168\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n```\n[on server01]$ ### \u5168\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e key \u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\n[on server01]$ http localhost:8098/buckets/mybucket/index/\\$bucket/_\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Length: 50\nContent-Type: application/json\nDate: Thu, 27 Jun 2013 03:50:52 GMT\nServer: MochiWeb/1.1 WebMachine/1.9.2 (someone had painted it blue)\nVary: Accept-Encoding\n\n{\n    \"keys\": [\n        \"mykey5\", \n        \"mykey3\", \n        \"mykey4\", \n        \"mykey2\", \n        \"mykey1\"\n    ]\n}\n```\n\n## \u304a\u308f\u308a\n\n\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u6c17\u306b\u306a\u308b\u3068\u3053\u308d\u3060\u3051\u3069\u30012i \u306e\u5168\u6a5f\u80fd\u3092\u8a66\u305b\u305f\u3002\u554f\u3044\u5408\u308f\u305b\u306b\u5bfe\u3059\u308b\u7d50\u679c\u306e\u30bd\u30fc\u30c8\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u554f\u3044\u5408\u308f\u305b\u3059\u308b\u305f\u3073\u306b\u9806\u756a\u304c\u304b\u308f\u308b\u6319\u52d5\u3092\u3057\u3066\u3044\u308b\u3002\u30bd\u30fc\u30c8\u304c\u5fc5\u8981\u3060\u3063\u305f\u3089\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u3084\u308b\u304b\u3001MapReduce \u9023\u643a\u3092\u4f7f\u3048\u3063\u3066\u3053\u3068\u3060\u306d\u3002\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u4ed8\u3051\u65b9\u306b\u3088\u3063\u3066\u306f\u3001Range \u30af\u30a8\u30ea\u30fc\u306e\u7d50\u679c\u306f\u91cd\u8907\u3057\u305f\u9805\u76ee\u3092\u542b\u3093\u3067\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3063\u3066\u306e\u306f\u6ce8\u610f\u3057\u306a\u3044\u3068\u306a\u3002\n\n## \u95a2\u9023\n\n* [CentOS 6.4 \u306b Riak Cluster \u3092\u69cb\u7bc9\u3059\u308b](http://qiita.com/na_ga/items/1abee5a44e2a348e869f)\n* [Riak docs \u306e 2i \u3092\u610f\u8a33\u3057\u3066\u307f\u305f](http://qiita.com/na_ga/items/2cc047c621da286aca44)\n* [Riak docs \u306e Configuring 2i \u3092\u610f\u8a33\u3057\u3066\u307f\u305f](http://qiita.com/na_ga/items/d0ca008d87e667a4cc27)\n* [Riak docs \u306e 2i Examples \u3092\u610f\u8a33\u3057\u3066\u307f\u305f](http://qiita.com/na_ga/items/b9f2e0b98128c6d9cb76)", "tags": ["riak"]}