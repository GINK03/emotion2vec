{"context": "\n\n\u6982\u8981\nRails\u3067Sidekiq\u3092Capistrano\u3067AWS\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002\n\n\u6e96\u5099\n\n\u30a2\u30d7\u30ea\n\nGemfile\u306bcapistrano-sidekiq\u3092\u8ffd\u52a0\n\nGemfile\ngem 'capistrano-sidekiq'\n\n\n\nCapfile\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\nCapfile\nrequire 'capistrano/sidekiq'\nrequire 'capistrano/sidekiq/monit' #to require monit tasks # Only for capistrano3\n\n\n\ndeploy.rb\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\nconfig/deploy.rb\nset :sidekiq_monit_conf_dir, '/etc/monit.d'\n\n\n\n\u30b5\u30fc\u30d0\n\nvisudo\u3092\u5b9f\u884c\u3057\u3066\u30a2\u30d7\u30ea\u5b9f\u884c\u30e6\u30fc\u30b6\u304c\u30d1\u30b9\u30ef\u30fc\u30c9\u4e0d\u7528\u3067sudo\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\nvisudo\n## Same thing without a password\n# %wheel        ALL=(ALL)       NOPASSWD: ALL\napp     ALL=(ALL)       NOPASSWD: ALL\n\n\n\nmonit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum install -y monit\n\n\nmonit\u3092\u81ea\u52d5\u8d77\u52d5\u306b\u3059\u308b\nsudo chkconfig monit on\n\n\n/etc/monit.conf\u306e\u4ee5\u4e0b\u306e\u90e8\u5206\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3059\n\n/etc/monit.conf\nset httpd port 2812 and\n   use address localhost  # only accept connection from localhost\n   allow localhost\n\n\n\n\u30c7\u30d7\u30ed\u30a4\u5b9f\u884c\nbundle exec cap staging deploy\n\n# \u6982\u8981\nRails\u3067Sidekiq\u3092Capistrano\u3067AWS\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3002\n\n# \u6e96\u5099\n## \u30a2\u30d7\u30ea\n### Gemfile\u306bcapistrano-sidekiq\u3092\u8ffd\u52a0\n```ruby:Gemfile\ngem 'capistrano-sidekiq'\n```\n\n### Capfile\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\n```ruby:Capfile\nrequire 'capistrano/sidekiq'\nrequire 'capistrano/sidekiq/monit' #to require monit tasks # Only for capistrano3\n```\n\n### deploy.rb\u306b\u8a2d\u5b9a\u3092\u8ffd\u52a0\n```ruby:config/deploy.rb\nset :sidekiq_monit_conf_dir, '/etc/monit.d'\n```\n\n## \u30b5\u30fc\u30d0\n### visudo\u3092\u5b9f\u884c\u3057\u3066\u30a2\u30d7\u30ea\u5b9f\u884c\u30e6\u30fc\u30b6\u304c\u30d1\u30b9\u30ef\u30fc\u30c9\u4e0d\u7528\u3067sudo\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n```sh:visudo\n## Same thing without a password\n# %wheel        ALL=(ALL)       NOPASSWD: ALL\napp     ALL=(ALL)       NOPASSWD: ALL\n```\n\n### monit\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```sh\nsudo yum install -y monit\n```\n\n### monit\u3092\u81ea\u52d5\u8d77\u52d5\u306b\u3059\u308b\n```sh\nsudo chkconfig monit on\n```\n\n### /etc/monit.conf\u306e\u4ee5\u4e0b\u306e\u90e8\u5206\u306e\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3059\n```sh:/etc/monit.conf\nset httpd port 2812 and\n   use address localhost  # only accept connection from localhost\n   allow localhost\n```\n\n# \u30c7\u30d7\u30ed\u30a4\u5b9f\u884c\n```sh\nbundle exec cap staging deploy\n```\n", "tags": ["Rails4", "sidekiq", "capistrano"]}