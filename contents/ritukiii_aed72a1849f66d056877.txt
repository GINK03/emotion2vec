{"context": " More than 1 year has passed since last update.\n\nstep1. \u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3059\u308b\n\u4e88\u3081\u3001\u3055\u304f\u3089VPS\u306e\u4eee\u767b\u9332\u5b8c\u4e86\u30e1\u30fc\u30eb\u3067\u4e0b\u8a183\u70b9\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nIP\u30a2\u30c9\u30ec\u30b9: ...\n\n\u30e6\u30fc\u30b6\u540d\uff1a root\n\u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\uff1a *****\n\n\u624b\u5143\u306b\u3042\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u306a\u3069\u306e\u30a2\u30d7\u30ea\u3067\u63a5\u7d9a\u3057\u307e\u3059\u3002\nssh root@IP\u30a2\u30c9\u30ec\u30b9\n\n\nstep2. root\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\npasswd\n\n\nstep3. VPS\u30b5\u30fc\u30d0\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5168\u3066\u6700\u65b0\u306e\u72b6\u614b\u306b\u3059\u308b\nyum update\n\n\nstep4. VPS\u3092\u65e5\u672c\u8a9e\u5316\u3059\u308b\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\netc/sysconfig/i18n\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3001wq\u30b3\u30de\u30f3\u30c9\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u9589\u3058\u308b\n\u4fee\u6b63\u524d\uff1a LANG=\"C\"\n\u4fee\u6b63\u5f8c\uff1a LANG=\"ja_JP.UTF-8\"\n\n\nstep5. \u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\nuseradd hoge\npasswd hoge\nusermod -G wheel hoge\n\n\nstep6. \u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u306bsudo\u6a29\u9650\u3092\u4e0e\u3048\u308b\nvisudo\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3001wq\u30b3\u30de\u30f3\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u9589\u3058\u308b\n\u4fee\u6b63\u524d\uff1a # %wheel        ALL=(ALL)       ALL\n\u4fee\u6b63\u5f8c\uff1a %wheel        ALL=(ALL)       ALL\n\n\nstep7. su\u30b3\u30de\u30f3\u30c9\u3092\u30b0\u30eb\u30fc\u30d7\u5185\u30e6\u30fc\u30b6\u3060\u3051\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4fee\u6b63\u3059\u308b\u3002\nvim /etc/pam.d/su\n\n\u4fee\u6b63\u524d\uff1b #auth           required        pam_wheel.so use_uid\n\u4fee\u6b63\u5f8c\uff1aauth           required        pam_wheel.so use_uid\n\n\nstep8. \u516c\u958b\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n\n8-1. \u30ed\u30fc\u30ab\u30eb\u3067\u516c\u958b\u9375\u3068\u79d8\u5bc6\u9375\u3092\u4f5c\u308b\n\ncd ~\nmkdir .ssh\nssh-keygen\n\n\n8-2. \u516c\u958b\u9375\u3092\u30b5\u30fc\u30d0\u306b\u7f6e\u304f\n\nssh hoge@IP\u30a2\u30c9\u30ec\u30b9 \u2190 \u4e00\u65e6\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u3001\u5148\u307b\u3069\u306e`hoge`\u30e6\u30fc\u30b6\u3067\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3059\u308b\ncd ~\nmkdir .ssh\nchmod 700 .ssh\nvi .ssh/authorized_keys\u3000\u2190  \u30ed\u30fc\u30ab\u30eb\u3067\u4f5c\u3063\u305fid_rsa.pub\u306e\u5185\u5bb9\u3092\u30b3\u30d4\u30da\nchmod 600 .ssh/authorized_keys\n\n\nstep9. SSH\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3059\u308b\nsudo vi /etc/ssh/sshd_config\n\n13\u884c\u76ee\u306e\u4e0b\u8a18\u3092\u4fee\u6b63\n\u4fee\u6b63\u524d #Port 22\n\u4fee\u6b63\u5f8c #Port 10230 \u2190 1024\uff5e65535\u306e\u9593\u306e\u6570\u5024\u3092\u6307\u5b9a\u3059\u308b\n\nsudo /etc/init.d/sshd restart \u2190 ssh\u3092\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\n\n\nstep10. \u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u884c\u3046\nsudo vi /etc/sysconfig/iptables \u2190 \u4e0b\u8a18\u306eiptables\u306e\u8a2d\u5b9a\u3092\u30b3\u30d4\u30da\n\n\n\niptables\u306e\u8a2d\u5b9a\u5185\u5bb9\n\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n:RH-Firewall-1-INPUT - [0:0]\n-A INPUT -j RH-Firewall-1-INPUT\n-A FORWARD -j RH-Firewall-1-INPUT\n-A RH-Firewall-1-INPUT -i lo -j ACCEPT\n-A RH-Firewall-1-INPUT -p icmp --icmp-type any -j ACCEPT\n-A RH-Firewall-1-INPUT -p 50 -j ACCEPT\n-A RH-Firewall-1-INPUT -p 51 -j ACCEPT\n-A RH-Firewall-1-INPUT -p udp --dport 5353 -d 224.0.0.251 -j ACCEPT\n-A RH-Firewall-1-INPUT -p udp -m udp --dport 631 -j ACCEPT\n-A RH-Firewall-1-INPUT -p tcp -m tcp --dport 631 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n\nSSH, HTTP, FTP1, FTP2, MySQL\n\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 10230 -j ACCEPT \u2190 \u3053\u3053\u306e\"10230\"\u306fstep9\u3067\u8a2d\u5b9a\u3057\u305f\u30dd\u30fc\u30c8\u756a\u53f7\u306b\u66f8\u304d\u63db\u3048\u308b\uff01\uff01\uff01\uff01\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 20 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 21 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT\n-A RH-Firewall-1-INPUT -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n\n\n\n\u8a2d\u5b9a\u53cd\u6620\n\nsudo /etc/rc.d/init.d/iptables restart\n\n\n\n\nStep11. WEB\u30b5\u30fc\u30d0\u3068\u3057\u3066\u306e\u8a2d\u5b9a\u3092\u884c\u3046\n\n11-1. Apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nsudo yum -y install httpd\n\n\n11-2. chkconfig\u306e\u8a2d\u5b9a\n\nsudo chkconfig httpd on\n\n\n11-3. WEB\u30b5\u30fc\u30d0\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\n\n\u4e00\u5fdc\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u3068\u3063\u3066\u304a\u304f\nsudo cp /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.org\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\nsudo vim /etc/httpd/conf/httpd.conf\n\n\u4fee\u6b63\u524d\uff1a ServerTokens OS\n\u4fee\u6b63\u5f8c\uff1a ServerTokens Prod\n\n\u4fee\u6b63\u524d\uff1a ServerSignature On\n\u4fee\u6b63\u5f8c\uff1a ServerSignature Off\n\n\u4fee\u6b63\u524d\uff1a Options Indexes FollowSymLinks\n\u4fee\u6b63\u5f8c\uff1a Options -Indexes FollowSymLinks\n\n\u8a2d\u5b9a\u306e\u53cd\u6620\nsudo service httpd configtest \u2190 \u69cb\u6587\u30c1\u30a7\u30c3\u30af\nsudo service httpd start\n\n\u30d6\u30e9\u30a6\u30b6\u306bIP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u3001Apache\u306e\u753b\u9762\u304c\u51fa\u308c\u3070OK\u3067\u3059\u3002\n\nstep12. PHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u305d\u308d\u305d\u308d\u7d42\u76e4\u3067\u3059\u3002\n\u52d5\u7684\u306aWEB\u30b5\u30fc\u30d0\u306b\u3059\u308b\u305f\u3081\u306b\u3001PHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n\nPHP\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum -y install php php-mbstring php-mysql php-gd\n\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\n\nvim /etc/php.ini\n\n\n\n\u25a0 \u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u5410\u304d\u51fa\u3057\u5834\u6240\u3092\u5909\u66f4\n\u4fee\u6b63\u524d\uff1a ;error_log = php_errors.log\n\u4fee\u6b63\u5f8c\uff1a error_log = /var/log/php_errors.log\n\u25a0 \u65e5\u672c\u8a9e\u3092\u6271\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\u4fee\u6b63\u524d\uff1a ;mbstring.language = Japanese\n\u4fee\u6b63\u5f8c\uff1a mbstring.language = Japanese\n\u4fee\u6b63\u524d\uff1a ;mbstring.internal_encoding = EUC-JP\n\u4fee\u6b63\u5f8c\uff1a mbstring.internal_encoding = UTF-8\n\u4fee\u6b63\u524d\uff1a ;mbstring.http_input = auto\n\u4fee\u6b63\u524d\uff1a mbstring.http_input = auto\n\u4fee\u6b63\u524d: ;expose_php = On\n\u4fee\u6b63\u5f8c: expose_php = Off\n\n\n\u8a2d\u5b9a\u53cd\u6620\nservice httpd restart\n\n\n\n\u3053\u308c\u3067PHP\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nstep13. Mysql\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum -y install mysql-server\n\n\n\n\u8a2d\u5b9a\u5909\u66f4\n\nvi /etc/my.cnf\n\n\n\n\u4e0b\u8a182\u884c\u8ffd\u52a0\ndefault-character-set=utf8 \nskip-character-set-client-handshake \n\n\n\n\u8a2d\u5b9a\u53cd\u6620\n\n/etc/rc.d/init.d/mysqld restart\n\n\n\n\u521d\u671f\u8a2d\u5b9a\n\nmysql_secure_installation\n\n\n\n\u6700\u521d\u306eEnter current password for root(enter for none)\u3067\u306f\u3001\u4f55\u3082\u5165\u308c\u305a\u306bEnter\u3092\u62bc\u3059\u3002\n\u6b21\u306eSet root password? [Y/n]\u3067Y\u3092\u62bc\u3059\u3002\n\u305d\u306e\u5f8c\u306f\u3001\u5168\u3066Enter\u3067OK\n\n\nMysql\u306e\u81ea\u52d5\u8d77\u52d5\n/etc/rc.d/init.d/mysqld start\n\n\n\n\n\u756a\u5916\u7de8 \u30c9\u30e1\u30a4\u30f3\u3092\u5272\u308a\u5f53\u3066\u308b\n\n\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3059\u308b\n\n\n\u304a\u540d\u524d.com\u306a\u3069\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u304a\u540d\u524d.com\u306a\u3069\u3067DNS\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u30c9\u30e1\u30a4\u30f3\u3068\u81ea\u5206\u306e\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u3072\u3082\u3065\u3051\u308b\nvhost.conf\u3092\u4f5c\u6210\u3059\u308b\n\n\nvhost.conf\u306e\u8a2d\u5b9a\n\nvi /etc/httpd/conf.d/vhost.conf\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304f\nNameVirtualHost *:80\n\n<VirtualHost *:80>\nDocumentRoot \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306e\u30d1\u30b9\nServerName \u81ea\u5206\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\nServerAlias \u81ea\u5206\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\n<Directory \"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306e\u30d1\u30b9\">\nAllowOverride All\n</Directory>\n</VirtualHost>\n\n\nApache\u306e\u518d\u8d77\u52d5\n\n/etc/rc.d/init.d/httpd restart\n\n## step1. \u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3059\u308b\n\n\u4e88\u3081\u3001\u3055\u304f\u3089VPS\u306e\u4eee\u767b\u9332\u5b8c\u4e86\u30e1\u30fc\u30eb\u3067\u4e0b\u8a183\u70b9\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n* IP\u30a2\u30c9\u30ec\u30b9: ***.***.***.***\n* \u30e6\u30fc\u30b6\u540d\uff1a root\n* \u521d\u671f\u30d1\u30b9\u30ef\u30fc\u30c9\uff1a *****\n\n\u624b\u5143\u306b\u3042\u308b\u30bf\u30fc\u30df\u30ca\u30eb\u306a\u3069\u306e\u30a2\u30d7\u30ea\u3067\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\n<pre>\nssh root@IP\u30a2\u30c9\u30ec\u30b9\n</pre>\n\n## step2. root\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u5909\u66f4\n\n<pre>\npasswd\n</pre>\n\n## step3. VPS\u30b5\u30fc\u30d0\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5168\u3066\u6700\u65b0\u306e\u72b6\u614b\u306b\u3059\u308b\n\n<pre>\nyum update\n</pre>\n\n## step4. VPS\u3092\u65e5\u672c\u8a9e\u5316\u3059\u308b\n\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\n<pre>\netc/sysconfig/i18n\n</pre>\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3001`wq`\u30b3\u30de\u30f3\u30c9\u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u9589\u3058\u308b\n<pre>\n\u4fee\u6b63\u524d\uff1a LANG=\"C\"\n\u4fee\u6b63\u5f8c\uff1a LANG=\"ja_JP.UTF-8\"\n</pre>\n\n## step5. \u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n\n<pre>\nuseradd hoge\npasswd hoge\nusermod -G wheel hoge\n</pre>\n\n## step6. \u4f5c\u696d\u7528\u30e6\u30fc\u30b6\u306bsudo\u6a29\u9650\u3092\u4e0e\u3048\u308b\n\n<pre>\nvisudo\n</pre>\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3001`wq`\u30b3\u30de\u30f3\u30c9\u3067\u30d5\u30a1\u30a4\u30eb\u3092\u9589\u3058\u308b\n<pre>\n\u4fee\u6b63\u524d\uff1a # %wheel        ALL=(ALL)       ALL\n\u4fee\u6b63\u5f8c\uff1a %wheel        ALL=(ALL)       ALL\n</pre>\n\n## step7. su\u30b3\u30de\u30f3\u30c9\u3092\u30b0\u30eb\u30fc\u30d7\u5185\u30e6\u30fc\u30b6\u3060\u3051\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\n\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4fee\u6b63\u3059\u308b\u3002\n<pre>\nvim /etc/pam.d/su\n</pre>\n\n<pre>\n\u4fee\u6b63\u524d\uff1b #auth           required        pam_wheel.so use_uid\n\u4fee\u6b63\u5f8c\uff1aauth           required        pam_wheel.so use_uid\n</pre>\n\n## step8. \u516c\u958b\u9375\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n\n* 8-1. \u30ed\u30fc\u30ab\u30eb\u3067\u516c\u958b\u9375\u3068\u79d8\u5bc6\u9375\u3092\u4f5c\u308b\n\n<pre>\ncd ~\nmkdir .ssh\nssh-keygen\n</pre>\n\n* 8-2. \u516c\u958b\u9375\u3092\u30b5\u30fc\u30d0\u306b\u7f6e\u304f\n\n\n<pre>\nssh hoge@IP\u30a2\u30c9\u30ec\u30b9 \u2190 \u4e00\u65e6\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089\u3001\u5148\u307b\u3069\u306e`hoge`\u30e6\u30fc\u30b6\u3067\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3059\u308b\ncd ~\nmkdir .ssh\nchmod 700 .ssh\nvi .ssh/authorized_keys\u3000\u2190  \u30ed\u30fc\u30ab\u30eb\u3067\u4f5c\u3063\u305fid_rsa.pub\u306e\u5185\u5bb9\u3092\u30b3\u30d4\u30da\nchmod 600 .ssh/authorized_keys\n</pre>\n\n## step9. SSH\u306e\u30dd\u30fc\u30c8\u756a\u53f7\u3092\u5909\u66f4\u3059\u308b\n\n<pre>\nsudo vi /etc/ssh/sshd_config\n\n13\u884c\u76ee\u306e\u4e0b\u8a18\u3092\u4fee\u6b63\n\u4fee\u6b63\u524d #Port 22\n\u4fee\u6b63\u5f8c #Port 10230 \u2190 1024\uff5e65535\u306e\u9593\u306e\u6570\u5024\u3092\u6307\u5b9a\u3059\u308b\n\nsudo /etc/init.d/sshd restart \u2190 ssh\u3092\u518d\u8d77\u52d5\u3057\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\n</pre>\n\n## step10. \u30d5\u30a1\u30a4\u30a2\u30fc\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u884c\u3046\n\n<pre>\nsudo vi /etc/sysconfig/iptables \u2190 \u4e0b\u8a18\u306eiptables\u306e\u8a2d\u5b9a\u3092\u30b3\u30d4\u30da\n</pre>\n\n* iptables\u306e\u8a2d\u5b9a\u5185\u5bb9\n<pre>\n*filter\n:INPUT ACCEPT [0:0]\n:FORWARD ACCEPT [0:0]\n:OUTPUT ACCEPT [0:0]\n:RH-Firewall-1-INPUT - [0:0]\n-A INPUT -j RH-Firewall-1-INPUT\n-A FORWARD -j RH-Firewall-1-INPUT\n-A RH-Firewall-1-INPUT -i lo -j ACCEPT\n-A RH-Firewall-1-INPUT -p icmp --icmp-type any -j ACCEPT\n-A RH-Firewall-1-INPUT -p 50 -j ACCEPT\n-A RH-Firewall-1-INPUT -p 51 -j ACCEPT\n-A RH-Firewall-1-INPUT -p udp --dport 5353 -d 224.0.0.251 -j ACCEPT\n-A RH-Firewall-1-INPUT -p udp -m udp --dport 631 -j ACCEPT\n-A RH-Firewall-1-INPUT -p tcp -m tcp --dport 631 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT\n# SSH, HTTP, FTP1, FTP2, MySQL\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 10230 -j ACCEPT \u2190 \u3053\u3053\u306e\"10230\"\u306fstep9\u3067\u8a2d\u5b9a\u3057\u305f\u30dd\u30fc\u30c8\u756a\u53f7\u306b\u66f8\u304d\u63db\u3048\u308b\uff01\uff01\uff01\uff01\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 20 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 21 -j ACCEPT\n-A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -j ACCEPT\n-A RH-Firewall-1-INPUT -j REJECT --reject-with icmp-host-prohibited\nCOMMIT\n</pre>\n\n* \u8a2d\u5b9a\u53cd\u6620\n<pre>\nsudo /etc/rc.d/init.d/iptables restart\n</pre>\n\n## Step11. WEB\u30b5\u30fc\u30d0\u3068\u3057\u3066\u306e\u8a2d\u5b9a\u3092\u884c\u3046\n\n* 11-1. Apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n<pre>\nsudo yum -y install httpd\n</pre>\n\n* 11-2. chkconfig\u306e\u8a2d\u5b9a\n\n<pre>\nsudo chkconfig httpd on\n</pre>\n\n* 11-3. WEB\u30b5\u30fc\u30d0\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a\n\n\u4e00\u5fdc\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u3092\u3068\u3063\u3066\u304a\u304f\n<pre>\nsudo cp /etc/httpd/conf/httpd.conf /etc/httpd/conf/httpd.conf.org\n</pre>\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\n<pre>\nsudo vim /etc/httpd/conf/httpd.conf\n\n\u4fee\u6b63\u524d\uff1a ServerTokens OS\n\u4fee\u6b63\u5f8c\uff1a ServerTokens Prod\n\n\u4fee\u6b63\u524d\uff1a ServerSignature On\n\u4fee\u6b63\u5f8c\uff1a ServerSignature Off\n\n\u4fee\u6b63\u524d\uff1a Options Indexes FollowSymLinks\n\u4fee\u6b63\u5f8c\uff1a Options -Indexes FollowSymLinks\n</pre>\n\n\u8a2d\u5b9a\u306e\u53cd\u6620\n<pre>\nsudo service httpd configtest \u2190 \u69cb\u6587\u30c1\u30a7\u30c3\u30af\nsudo service httpd start\n</pre>\n\n\u30d6\u30e9\u30a6\u30b6\u306bIP\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u3001Apache\u306e\u753b\u9762\u304c\u51fa\u308c\u3070OK\u3067\u3059\u3002\n\n### step12. PHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u305d\u308d\u305d\u308d\u7d42\u76e4\u3067\u3059\u3002\n\u52d5\u7684\u306aWEB\u30b5\u30fc\u30d0\u306b\u3059\u308b\u305f\u3081\u306b\u3001PHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n* PHP\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n<pre>\nyum -y install php php-mbstring php-mysql php-gd\n</pre>\n\n* \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\n<pre>\nvim /etc/php.ini\n\n\u25a0 \u30a8\u30e9\u30fc\u30ed\u30b0\u306e\u5410\u304d\u51fa\u3057\u5834\u6240\u3092\u5909\u66f4\n\u4fee\u6b63\u524d\uff1a ;error_log = php_errors.log\n\u4fee\u6b63\u5f8c\uff1a error_log = /var/log/php_errors.log\n\n\u25a0 \u65e5\u672c\u8a9e\u3092\u6271\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\u4fee\u6b63\u524d\uff1a ;mbstring.language = Japanese\n\u4fee\u6b63\u5f8c\uff1a mbstring.language = Japanese\n\n\u4fee\u6b63\u524d\uff1a ;mbstring.internal_encoding = EUC-JP\n\u4fee\u6b63\u5f8c\uff1a mbstring.internal_encoding = UTF-8\n\n\u4fee\u6b63\u524d\uff1a ;mbstring.http_input = auto\n\u4fee\u6b63\u524d\uff1a mbstring.http_input = auto\n\n\u4fee\u6b63\u524d: ;expose_php = On\n\u4fee\u6b63\u5f8c: expose_php = Off\n</pre>\n\n* \u8a2d\u5b9a\u53cd\u6620\n<pre>\nservice httpd restart\n</pre>\n\n\u3053\u308c\u3067PHP\u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n### step13. Mysql\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n* \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n<pre>\nyum -y install mysql-server\n</pre>\n\n* \u8a2d\u5b9a\u5909\u66f4\n<pre>\nvi /etc/my.cnf\n\n\u4e0b\u8a182\u884c\u8ffd\u52a0\ndefault-character-set=utf8 \nskip-character-set-client-handshake \n</pre>\n\n* \u8a2d\u5b9a\u53cd\u6620\n<pre>\n/etc/rc.d/init.d/mysqld restart\n</pre>\n\n* \u521d\u671f\u8a2d\u5b9a\n<pre>\nmysql_secure_installation\n\n\u6700\u521d\u306e`Enter current password for root(enter for none)`\u3067\u306f\u3001\u4f55\u3082\u5165\u308c\u305a\u306bEnter\u3092\u62bc\u3059\u3002\n\n\u6b21\u306e`Set root password? [Y/n]`\u3067Y\u3092\u62bc\u3059\u3002\n\u305d\u306e\u5f8c\u306f\u3001\u5168\u3066Enter\u3067OK\n</pre>\n\n* Mysql\u306e\u81ea\u52d5\u8d77\u52d5\n<pre>\n/etc/rc.d/init.d/mysqld start\n</pre>\n\n\n### \u756a\u5916\u7de8 \u30c9\u30e1\u30a4\u30f3\u3092\u5272\u308a\u5f53\u3066\u308b\n\n* \u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3059\u308b\n\n1. \u304a\u540d\u524d.com\u306a\u3069\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n2. \u304a\u540d\u524d.com\u306a\u3069\u3067DNS\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\u30c9\u30e1\u30a4\u30f3\u3068\u81ea\u5206\u306e\u30b5\u30fc\u30d0\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u3072\u3082\u3065\u3051\u308b\n3. vhost.conf\u3092\u4f5c\u6210\u3059\u308b\n\n* vhost.conf\u306e\u8a2d\u5b9a\n\n```\nvi /etc/httpd/conf.d/vhost.conf\n```\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304f\n\n```\nNameVirtualHost *:80\n\n<VirtualHost *:80>\nDocumentRoot \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306e\u30d1\u30b9\nServerName \u81ea\u5206\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\nServerAlias \u81ea\u5206\u3067\u53d6\u5f97\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u540d\n<Directory \"\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306e\u30d1\u30b9\">\nAllowOverride All\n</Directory>\n</VirtualHost>\n```\n\n* Apache\u306e\u518d\u8d77\u52d5\n\n```\n/etc/rc.d/init.d/httpd restart\n```\n", "tags": ["vps"]}