{"context": "GAE/Go+glide\u7684\u306a\u69cb\u6210\u3067\u306e\u74b0\u5883\u69cb\u7bc9\u3068\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u307e\u3067\u306e\u624b\u9806\u5099\u5fd8\u9332\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\n\u3053\u306e\u89e3\u8aac\u3067\u306f\u3001\u6700\u7d42\u7684\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306b\u306a\u308b\u3002\n$GOPATH\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 app.yaml      <= app.yaml\u306fsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5916\u306b\u914d\u7f6e\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.go\n  \u2514\u2500\u2500 src\n   \u00a0\u00a0 \u251c\u2500\u2500 glide.yaml    <= glide.yaml\u306fsrc\u76f4\u4e0b\n      \u251c\u2500\u2500 glide.lock\n   \u00a0\u00a0 \u251c\u2500\u2500 {package}     <= \u57fa\u672c\u7684\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fsrc\u4ee5\u4e0b\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\n   \u00a0\u00a0 \u2514\u2500\u2500 vendor        <= \u30a2\u30d7\u30ea\u3067\u5229\u7528\u3059\u308b\u5916\u90e8\u30d1\u30c3\u30b1\u30fc\u30b8\n\n\nGAE/Go\u306e\u4ed5\u69d8\u3067app.yaml\u304c\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u304c\u5168\u3066\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\u3053\u306e\u4ed5\u69d8\u306e\u305f\u3081\u3001vendoring\u3092\u4f7f\u7528\u3057\u3066\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5229\u7528\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\u307b\u307c\u9593\u9055\u3044\u306a\u304f\u30d3\u30eb\u30c9\u3067\u3053\u3051\u3066\u3057\u307e\u3046\u306e\u3067app.yaml\u306fsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u306f\u542b\u3081\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\u53c2\u8003\nGoogle App Engine\u3067Go\u3092\u52d5\u304b\u3059\u3068\u304d\u306b\u77e5\u3063\u3066\u304a\u304f\u3079\u304d\u3053\u3068\uff08\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30fb\u30d3\u30eb\u30c9\u7de8\uff09 - Hatena Blog\n\n\u958b\u767a\u30c4\u30fc\u30eb\n\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u5fc5\u9808\n\n\nAppEngine SDK\n\n\nglide\n\npython2.7\n\n\n\n\u305d\u306e\u4ed6(\u3042\u308b\u3068\u4fbf\u5229)\n\ngoenv\n\u901a\u5e38\u306eGo\u958b\u767a\u74b0\u5883\u3068GAE/Go\u306e\u74b0\u5883\u306e\u5207\u308a\u66ff\u3048\u306b\n\npyenv\nAppEngine SDK\u3092\u52d5\u304b\u3059\u306e\u306b\u3001python2\u7cfb\u304c\u5fc5\u9808\u306e\u305f\u3081\u3001python\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5207\u308a\u66ff\u3048\u304c\u5fc5\u8981\u306a\u5834\u5408\n\n\u53c2\u8003\ngoenv\u3067gae/go\u3068\u666e\u901a\u306ego\u306e\u74b0\u5883\u3092\u5207\u308a\u66ff\u3048\u308b - Qiita\n\n\n\n\u74b0\u5883\u69cb\u7bc9\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n\ngoenv\u672a\u4f7f\u7528\u306e\u5834\u5408\n\n\nGOPATH\u4ee5\u4e0b\u306bapp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\n\napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u3001app.yaml\u3092\u4f5c\u6210\u3059\u308b\n\n\napp.yaml\napplication: {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}\nversion: 1\nruntime: go\napi_version: go1\n\nhandlers:\n- url: /.*\n  script: _go_app\n\n\n\ngoenv\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\ngoenv -gae -go {$APPENGINE_SDK/goroot} -deps $GOPATH {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}\n\n\n\u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u3001app\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n\nsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306bapp.yaml\u30d5\u30a1\u30a4\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001app\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3059\u308b\n\n\u3053\u306e\u6642\u70b9\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u306b\u306a\u308b\n${GOPATH}\n  \u251c\u2500\u2500 activate(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 app.yaml\n  \u2514\u2500\u2500 src\n      \u2514\u2500\u2500 {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}.go(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n\n\nglide\u521d\u671f\u8a2d\u5b9a\nglide\u306e\u521d\u671f\u8a2d\u5b9a\u306a\u3069\n\n\nsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067glide create\u3092\u5b9f\u884c\n\nglide.yaml\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u4f7f\u7528\u3059\u308b\u5916\u90e8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u8a18\u8f09\u3059\u308b\u304b\u3001glide get {\u30d1\u30c3\u30b1\u30fc\u30b8\u540d}\u3092\u5b9f\u884c\u3059\u308b\n\n\nglide.yaml\n# cloud.google.com/go/storage\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n# glide get\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u306f\u81ea\u52d5\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u8ffd\u8a18\u3055\u308c\u308b\n\npackage: .\nimport:\n  - package: cloud.google.com/go\n    subpackages:\n      - storage\n\n\n\u3053\u3053\u307e\u3067\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a(glide.yaml\u3092\u76f4\u63a5\u7de8\u96c6\u3057\u305f\u5834\u5408\u306f\u307e\u3060glide.lock\u3068vendor\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4f5c\u6210\u3055\u308c\u306a\u3044)\n$GOPATH\n  \u251c\u2500\u2500 activate(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 app.yaml\n  \u2514\u2500\u2500 src\n   \u00a0\u00a0 \u251c\u2500\u2500 glide.yaml\n      \u251c\u2500\u2500 glide.lock \n   \u00a0\u00a0 \u251c\u2500\u2500 vendor\n      \u2514\u2500\u2500 {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}.go(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u78ba\u8a8d\u3068\u3001glide\u3067\u306e\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u7ba1\u7406\u78ba\u8a8d\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3002\nDataStore\u3092\u4f7f\u7528\u3057\u3066\u7c21\u5358\u306a\u30c7\u30fc\u30bf\u767b\u9332\u3068\u53d6\u5f97\u3092\u884c\u3046API\u3092\u4f5c\u6210\u3057\u3066\u307f\u308b\u3002\n\n\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\n$GOPATH\n  \u251c\u2500\u2500 activate\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 app.yaml\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.go\n  \u2514\u2500\u2500 src\n      \u251c\u2500\u2500 glide.lock\n      \u251c\u2500\u2500 glide.yaml\n      \u251c\u2500\u2500 sample\n      \u2502\u00a0\u00a0 \u2514\u2500\u2500 crud.go\n      \u2514\u2500\u2500 vendor\n\n\napp.yaml\n\n\napp.yaml\napplication: sample-crud\nversion: 1\nruntime: go\napi_version: go1\n\nhandlers:\n- url: /.*\n  script: _go_app\n\n\n\nglide.yaml\n\n\nglide.yaml\npackage: .\nimport:\n- package: golang.org/x/net\n  subpackages:\n  - context\n- package: google.golang.org/appengine\n  version: ~1.0.0\n  subpackages:\n  - datastore\n\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n\napp/main.go\npackage main\n\nimport (\n    \"net/http\"\n    \"sample\"\n)\n\nfunc init() {\n    http.Handle(\"/foo\", sample.GetCRUDSampleHandler())\n}\n\n\n\nsrc/sample/crud.go\npackage sample\n\nimport (\n    \"encoding/json\"\n    \"fmt\"\n    \"net/http\"\n\n    \"golang.org/x/net/context\"\n    \"google.golang.org/appengine\"\n    \"google.golang.org/appengine/datastore\"\n)\n\nconst KindFoo = \"foo\"\n\ntype Foo struct {\n    Foo string `json:\"foo\"`\n    Bar string `json:\"bar\"`\n}\n\nfunc GetCRUDSampleHandler() *CRUDSample {\n    return new(CRUDSample)\n}\n\ntype CRUDSample struct {\n    ctx context.Context\n    w   http.ResponseWriter\n    r   *http.Request\n}\n\nfunc (c *CRUDSample) ServeHTTP(w http.ResponseWriter, r *http.Request) {\n    c.ctx, c.w, c.r = appengine.NewContext(r), w, r\n    switch r.Method {\n    case http.MethodGet:\n        c.Get()\n    case http.MethodPost:\n        c.Post()\n    default:\n        w.WriteHeader(http.StatusNotFound)\n        fmt.Fprintln(w, \"Not found.\")\n    }\n}\n\ntype RespGetFoo struct {\n    Id  int64  `json:\"id\"`\n    Foo string `json:\"foo\"`\n    Bar string `json:\"bar\"`\n}\n\nfunc (c *CRUDSample) Get() {\n    var foos []Foo\n    keys, err := datastore.NewQuery(KindFoo).GetAll(c.ctx, &foos)\n    if err != nil {\n        c.responseServerError(err)\n        return\n    }\n    result := make([]RespGetFoo, len(keys))\n    for i, f := range foos {\n        result[i] = RespGetFoo{keys[i].IntID(), f.Foo, f.Bar}\n    }\n    c.responseJson(http.StatusOK, result)\n}\n\nfunc (c *CRUDSample) Post() {\n    var foo Foo\n    err := json.NewDecoder(c.r.Body).Decode(&foo)\n    if err != nil {\n        c.responseServerError(err)\n        return\n    }\n    key := datastore.NewIncompleteKey(c.ctx, KindFoo, nil)\n    newKey, err := datastore.Put(c.ctx, key, &foo)\n    if err != nil {\n        c.responseServerError(err)\n        return\n    }\n    response := map[string]int64{\"id\": newKey.IntID()}\n    c.responseJson(http.StatusCreated, response)\n}\n\nfunc (c *CRUDSample) responseJson(status int, v interface{}) {\n    c.w.WriteHeader(status)\n    json.NewEncoder(c.w).Encode(v)\n}\n\nfunc (c *CRUDSample) responseServerError(err error) {\n    c.w.WriteHeader(http.StatusInternalServerError)\n    fmt.Fprintln(c.w, err)\n}\n\n\n\n\u5b9f\u884c\n\n\u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u53d6\u5f97\nsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u3001glide up\u3092\u5b9f\u884c\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u3001\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6c7a\u3057\u3066vendor\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3076\u3061\u8fbc\u3093\u3067\u304f\u308c\u308b\u3002\n\n$ cd src\n$ glide up\n\n\n\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\napp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001goapp serve app.yaml\u3092\u5b9f\u884c\n\n$ cd app\n$ goapp serve app.yaml\n\n\u6ce8\u610f\u70b9\n\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u306b\u306fpython2\u7cfb\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u524d\u306bpyhton\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u66f4\u3057\u3066\u304a\u304f\u3053\u3068\u3002\npyenv\u306a\u3069\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\n$ cd app\n$ pyenv local 2.7.13\n\n\u3068\u304b\u3092\u5b9f\u884c\u3057\u3066\u3001app\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306epython\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u3092\u56fa\u5b9a\u3057\u3066\u304a\u304f\u3068\u4fbf\u5229\n\u4ee5\u4e0a\u3001GAE/Go+glide\u306e\u74b0\u5883\u6e96\u5099\u304b\u3089\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u307e\u3067\u306e\u624b\u9806\u3002\n\u4eca\u5f8cglide\u3067\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u306f\u57fa\u672c\u306b\u306a\u308b\u304b\u3068\u601d\u3046\u306e\u3067\u3001\u624b\u9806\u306a\u3069\u3084\u69cb\u6210\u306a\u3069\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3002\nGAE/Go+glide\u7684\u306a\u69cb\u6210\u3067\u306e\u74b0\u5883\u69cb\u7bc9\u3068\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u307e\u3067\u306e\u624b\u9806\u5099\u5fd8\u9332\n\n#\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u69cb\u6210\n\u3053\u306e\u89e3\u8aac\u3067\u306f\u3001\u6700\u7d42\u7684\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306b\u306a\u308b\u3002\n\n```\n$GOPATH\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 app.yaml      <= app.yaml\u306fsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5916\u306b\u914d\u7f6e\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.go\n  \u2514\u2500\u2500 src\n   \u00a0\u00a0 \u251c\u2500\u2500 glide.yaml    <= glide.yaml\u306fsrc\u76f4\u4e0b\n      \u251c\u2500\u2500 glide.lock\n   \u00a0\u00a0 \u251c\u2500\u2500 {package}     <= \u57fa\u672c\u7684\u306a\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fsrc\u4ee5\u4e0b\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\n   \u00a0\u00a0 \u2514\u2500\u2500 vendor        <= \u30a2\u30d7\u30ea\u3067\u5229\u7528\u3059\u308b\u5916\u90e8\u30d1\u30c3\u30b1\u30fc\u30b8\n\n```\nGAE/Go\u306e\u4ed5\u69d8\u3067app.yaml\u304c\u914d\u7f6e\u3055\u308c\u3066\u3044\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u304c\u5168\u3066\u30d3\u30eb\u30c9\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\u3053\u306e\u4ed5\u69d8\u306e\u305f\u3081\u3001vendoring\u3092\u4f7f\u7528\u3057\u3066\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5229\u7528\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\u307b\u307c\u9593\u9055\u3044\u306a\u304f\u30d3\u30eb\u30c9\u3067\u3053\u3051\u3066\u3057\u307e\u3046\u306e\u3067app.yaml\u306fsrc\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u306f\u542b\u3081\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n**\u53c2\u8003**\n[Google App Engine\u3067Go\u3092\u52d5\u304b\u3059\u3068\u304d\u306b\u77e5\u3063\u3066\u304a\u304f\u3079\u304d\u3053\u3068\uff08\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u30fb\u30d3\u30eb\u30c9\u7de8\uff09 - Hatena Blog](http://motemen.hatenablog.com/entry/2016/11/gae-go-building#goapp-%E3%81%AF%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%83%AB%E3%83%BC%E3%83%88%E4%BB%A5%E4%B8%8B%E3%81%AE%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89%E3%82%92%E3%81%99%E3%81%B9%E3%81%A6%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%97%E3%82%88%E3%81%86%E3%81%A8%E3%81%99%E3%82%8B)\n\n# \u958b\u767a\u30c4\u30fc\u30eb\n\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n#### \u5fc5\u9808\n+ [AppEngine SDK](https://cloud.google.com/appengine/downloads)  \n+ [glide](https://github.com/Masterminds/glide)  \n+ python2.7  \n\n#### \u305d\u306e\u4ed6(\u3042\u308b\u3068\u4fbf\u5229)\n+ [goenv](https://bitbucket.org/ymotongpoo/goenv)\n\u901a\u5e38\u306eGo\u958b\u767a\u74b0\u5883\u3068GAE/Go\u306e\u74b0\u5883\u306e\u5207\u308a\u66ff\u3048\u306b\n\n+ [pyenv](https://github.com/yyuu/pyenv)\nAppEngine SDK\u3092\u52d5\u304b\u3059\u306e\u306b\u3001python2\u7cfb\u304c\u5fc5\u9808\u306e\u305f\u3081\u3001python\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u5207\u308a\u66ff\u3048\u304c\u5fc5\u8981\u306a\u5834\u5408\n######\u53c2\u8003\n[goenv\u3067gae/go\u3068\u666e\u901a\u306ego\u306e\u74b0\u5883\u3092\u5207\u308a\u66ff\u3048\u308b - Qiita](http://qiita.com/sinmetal/items/71cfba4ae27cc2366572)\n\n# \u74b0\u5883\u69cb\u7bc9\n### \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n##### goenv\u672a\u4f7f\u7528\u306e\u5834\u5408\n+ `GOPATH`\u4ee5\u4e0b\u306b`app`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\n+ `app`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u3001`app.yaml`\u3092\u4f5c\u6210\u3059\u308b\n\n```yaml:app.yaml\napplication: {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}\nversion: 1\nruntime: go\napi_version: go1\n\nhandlers:\n- url: /.*\n  script: _go_app\n```\n\n##### goenv\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n+ \u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\n\n```\ngoenv -gae -go {$APPENGINE_SDK/goroot} -deps $GOPATH {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}\n```\n+ \u81ea\u52d5\u751f\u6210\u3055\u308c\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u3001`app`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n+ `src`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b`app.yaml`\u30d5\u30a1\u30a4\u30eb\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001`app`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3059\u308b\n\n\u3053\u306e\u6642\u70b9\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u306b\u306a\u308b\n\n```\n${GOPATH}\n  \u251c\u2500\u2500 activate(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 app.yaml\n  \u2514\u2500\u2500 src\n      \u2514\u2500\u2500 {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}.go(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n ```\n\n### glide\u521d\u671f\u8a2d\u5b9a\nglide\u306e\u521d\u671f\u8a2d\u5b9a\u306a\u3069\n\n+ `src`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067`glide create`\u3092\u5b9f\u884c\n+ `glide.yaml`\u304c\u81ea\u52d5\u751f\u6210\u3055\u308c\u308b\u306e\u3067\u3001\u4f7f\u7528\u3059\u308b\u5916\u90e8\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u8a18\u8f09\u3059\u308b\u304b\u3001`glide get {\u30d1\u30c3\u30b1\u30fc\u30b8\u540d}`\u3092\u5b9f\u884c\u3059\u308b\n\n```yaml:glide.yaml\n# cloud.google.com/go/storage\u3092\u4f7f\u7528\u3059\u308b\u5834\u5408\n# glide get\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u306f\u81ea\u52d5\u3067\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u8ffd\u8a18\u3055\u308c\u308b\n\npackage: .\nimport:\n  - package: cloud.google.com/go\n    subpackages:\n      - storage\n```\n\n\u3053\u3053\u307e\u3067\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u69cb\u6210\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a(`glide.yaml`\u3092\u76f4\u63a5\u7de8\u96c6\u3057\u305f\u5834\u5408\u306f\u307e\u3060`glide.lock`\u3068`vendor`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u4f5c\u6210\u3055\u308c\u306a\u3044)\n\n```\n$GOPATH\n  \u251c\u2500\u2500 activate(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 app.yaml\n  \u2514\u2500\u2500 src\n   \u00a0\u00a0 \u251c\u2500\u2500 glide.yaml\n      \u251c\u2500\u2500 glide.lock \n   \u00a0\u00a0 \u251c\u2500\u2500 vendor\n      \u2514\u2500\u2500 {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d}.go(goenv\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408)\n```\n\n# \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u78ba\u8a8d\u3068\u3001glide\u3067\u306e\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u7ba1\u7406\u78ba\u8a8d\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u3002\nDataStore\u3092\u4f7f\u7528\u3057\u3066\u7c21\u5358\u306a\u30c7\u30fc\u30bf\u767b\u9332\u3068\u53d6\u5f97\u3092\u884c\u3046API\u3092\u4f5c\u6210\u3057\u3066\u307f\u308b\u3002\n\n+ \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\n\n```\n$GOPATH\n  \u251c\u2500\u2500 activate\n  \u251c\u2500\u2500 app\n  \u2502\u00a0\u00a0 \u251c\u2500\u2500 app.yaml\n  \u2502\u00a0\u00a0 \u2514\u2500\u2500 main.go\n  \u2514\u2500\u2500 src\n      \u251c\u2500\u2500 glide.lock\n      \u251c\u2500\u2500 glide.yaml\n      \u251c\u2500\u2500 sample\n      \u2502\u00a0\u00a0 \u2514\u2500\u2500 crud.go\n      \u2514\u2500\u2500 vendor\n```\n\n+ app.yaml\n\n```yaml:app.yaml\napplication: sample-crud\nversion: 1\nruntime: go\napi_version: go1\n\nhandlers:\n- url: /.*\n  script: _go_app\n```\n\n+ glide.yaml\n\n```yaml:glide.yaml\npackage: .\nimport:\n- package: golang.org/x/net\n  subpackages:\n  - context\n- package: google.golang.org/appengine\n  version: ~1.0.0\n  subpackages:\n  - datastore\n```\n\n+ \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\n\n```go:app/main.go\npackage main\n\nimport (\n\t\"net/http\"\n\t\"sample\"\n)\n\nfunc init() {\n\thttp.Handle(\"/foo\", sample.GetCRUDSampleHandler())\n}\n```\n\n```go:src/sample/crud.go\npackage sample\n\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"net/http\"\n\n\t\"golang.org/x/net/context\"\n\t\"google.golang.org/appengine\"\n\t\"google.golang.org/appengine/datastore\"\n)\n\nconst KindFoo = \"foo\"\n\ntype Foo struct {\n\tFoo string `json:\"foo\"`\n\tBar string `json:\"bar\"`\n}\n\nfunc GetCRUDSampleHandler() *CRUDSample {\n\treturn new(CRUDSample)\n}\n\ntype CRUDSample struct {\n\tctx context.Context\n\tw   http.ResponseWriter\n\tr   *http.Request\n}\n\nfunc (c *CRUDSample) ServeHTTP(w http.ResponseWriter, r *http.Request) {\n\tc.ctx, c.w, c.r = appengine.NewContext(r), w, r\n\tswitch r.Method {\n\tcase http.MethodGet:\n\t\tc.Get()\n\tcase http.MethodPost:\n\t\tc.Post()\n\tdefault:\n\t\tw.WriteHeader(http.StatusNotFound)\n\t\tfmt.Fprintln(w, \"Not found.\")\n\t}\n}\n\ntype RespGetFoo struct {\n\tId  int64  `json:\"id\"`\n\tFoo string `json:\"foo\"`\n\tBar string `json:\"bar\"`\n}\n\nfunc (c *CRUDSample) Get() {\n\tvar foos []Foo\n\tkeys, err := datastore.NewQuery(KindFoo).GetAll(c.ctx, &foos)\n\tif err != nil {\n\t\tc.responseServerError(err)\n\t\treturn\n\t}\n\tresult := make([]RespGetFoo, len(keys))\n\tfor i, f := range foos {\n\t\tresult[i] = RespGetFoo{keys[i].IntID(), f.Foo, f.Bar}\n\t}\n\tc.responseJson(http.StatusOK, result)\n}\n\nfunc (c *CRUDSample) Post() {\n\tvar foo Foo\n\terr := json.NewDecoder(c.r.Body).Decode(&foo)\n\tif err != nil {\n\t\tc.responseServerError(err)\n\t\treturn\n\t}\n\tkey := datastore.NewIncompleteKey(c.ctx, KindFoo, nil)\n\tnewKey, err := datastore.Put(c.ctx, key, &foo)\n\tif err != nil {\n\t\tc.responseServerError(err)\n\t\treturn\n\t}\n\tresponse := map[string]int64{\"id\": newKey.IntID()}\n\tc.responseJson(http.StatusCreated, response)\n}\n\nfunc (c *CRUDSample) responseJson(status int, v interface{}) {\n\tc.w.WriteHeader(status)\n\tjson.NewEncoder(c.w).Encode(v)\n}\n\nfunc (c *CRUDSample) responseServerError(err error) {\n\tc.w.WriteHeader(http.StatusInternalServerError)\n\tfmt.Fprintln(c.w, err)\n}\n```\n\n# \u5b9f\u884c\n+ \u4f9d\u5b58\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u53d6\u5f97  \n`src`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3066\u3001`glide up`\u3092\u5b9f\u884c\u3002\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3084\u3001\u5916\u90e8\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6c7a\u3057\u3066`vendor`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u3076\u3061\u8fbc\u3093\u3067\u304f\u308c\u308b\u3002\n\n```\n$ cd src\n$ glide up\n```\n\n+ \u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5  \n`app`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001`goapp serve app.yaml`\u3092\u5b9f\u884c\n\n```\n$ cd app\n$ goapp serve app.yaml\n```\n\n**\u6ce8\u610f\u70b9**\n\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u306b\u306fpython2\u7cfb\u304c\u5fc5\u8981\u306a\u305f\u3081\u3001\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u306e\u8d77\u52d5\u524d\u306bpyhton\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u5909\u66f4\u3057\u3066\u304a\u304f\u3053\u3068\u3002\n`pyenv`\u306a\u3069\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306f\n\n```\n$ cd app\n$ pyenv local 2.7.13\n```\n\n\u3068\u304b\u3092\u5b9f\u884c\u3057\u3066\u3001`app`\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306epython\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u3092\u56fa\u5b9a\u3057\u3066\u304a\u304f\u3068\u4fbf\u5229\n\n\n\n\u4ee5\u4e0a\u3001GAE/Go+glide\u306e\u74b0\u5883\u6e96\u5099\u304b\u3089\u30ed\u30fc\u30ab\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u307e\u3067\u306e\u624b\u9806\u3002\n\u4eca\u5f8cglide\u3067\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u306f\u57fa\u672c\u306b\u306a\u308b\u304b\u3068\u601d\u3046\u306e\u3067\u3001\u624b\u9806\u306a\u3069\u3084\u69cb\u6210\u306a\u3069\u3092\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u3002\n", "tags": ["Go", "GoogleCloudPlatform", "glide", "GoogleAppEngine", "GAE"]}