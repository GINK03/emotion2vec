{"tags": ["AndroidThings", "RaspberryPi", "gcp", "Firebase", "Android"], "context": "Android Things\u3092\u8f09\u305b\u305fRaspberry Pi3\u306e\u30ab\u30e1\u30e9\u3067\u64ae\u5f71\u3057\u305f\u753b\u50cf\u3092Firebase\u306eDatabase\u3078\u9001\u308a\u3001Android\u30b9\u30de\u30d5\u30a9\u304b\u3089\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u95b2\u89a7\u3059\u308bAndroid Things\u306edoorbell\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u64ae\u5f71\u3057\u305f\u753b\u50cf\u306b\u306fCloud Vision API\u3092\u4f7f\u3063\u3066\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3082\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u524d\u6e96\u5099\n\nAndroid Things\u642d\u8f09\u30dc\u30fc\u30c9\nRaspberry Pi3\u3092\u4f7f\u7528\u3057\u3066\u307e\u3059\u3002\nRaspberry Pi3\u306b\u3088\u308bAndroid Things\u5165\u9580\u3092\u3054\u53c2\u7167\u3002\n\nRaspberry Pi3\nRaspberry Pi Camera Module V2\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\n\u30d7\u30c3\u30b7\u30e5\u30dc\u30bf\u30f3\uff08\u30bf\u30af\u30c8\u30b9\u30a4\u30c3\u30c1\uff091\u500b\n\u62b5\u6297 1K\u03a9 1\u500b\n\u30b8\u30e3\u30f3\u30d1\u30fc\u30ef\u30a4\u30e4\u30fc \u30aa\u30b9\u30fc\u30aa\u30b92\u672c\u3001\u30aa\u30b9-\u30e1\u30b93\u672c\n\n\n\u203bGPIO\u30d4\u30f3\u306fBCM21\u3092\u4f7f\u7528\u3057\u3066\u307e\u3059\u3002\n\nGoogle Cloud Platform\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306eAPI Manager\u3067Cloud Vision API\u3092\u6709\u52b9\u306b\u3057\u3001API Key\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30bd\u30fc\u30b9\u306b\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\n\nCloudVisionUtils.java\n    private static final String CLOUD_VISION_API_KEY = \"<ENTER VISION API KEY>\";\n\n\n\nFirebase\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u305f\u3089Android\u30a2\u30d7\u30ea\u3092\u8ffd\u52a0\u3057\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306egoogle-services.json\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001AndroidThings\u30a2\u30d7\u30ea\u306eapp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u3068\u3001Android\u30a2\u30d7\u30ea\u306ecompanionApp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\u7f6e\u3044\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u306eapi_key\u304c\u7a7a\u3063\u307d\u3067\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\nhttp://stackoverflow.com/questions/37317295/missing-api-key-current-key-with-google-services-3-0-0\n\ngoogle-services.json\n      \"api_key\": []\n\n\n\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089SDK\u8a2d\u5b9a\u624b\u9806\u3092\u8868\u793a\u3057\u3001\u518d\u5ea6\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30d3\u30eb\u30c9\u304c\u901a\u308a\u307e\u3059\u3002\n\ngoogle-services.json\n      \"api_key\": [\n        {\n          \"current_key\": \"encrypted-string\"\n        }\n      ],\n\n\n\u3061\u306a\u307f\u306b\u3053\u306eapi_key\u306fCloud Vision API\u306e\u30ad\u30fc\u3068\u306f\u5225\u3082\u306e\u3067\u3059\u3002\nDatabase\u306e\u30eb\u30fc\u30eb\u306f\u3001\u8a8d\u8a3c\u306a\u3057\u3067\u8ab0\u3067\u3082\u8aad\u307f\u66f8\u304d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n{\n  \"rules\": {\n    \".read\": true,\n    \".write\": true\n  }\n}\n\n\n\u5b9f\u884c\n\nRaspberry Pi3\u306b\u96fb\u6e90\u3092\u5165\u308c\u3066AndroidThings\u3092\u8d77\u52d5\u3057\u305f\u3089adb\u63a5\u7d9a\u3057\u3001app\u30a2\u30d7\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\u5bfe\u5411\u306ecompanionApp\u30a2\u30d7\u30ea\u3082\u30b9\u30de\u30d5\u30a9\u3067\u8d77\u52d5\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u4e0a\u306e\u30d7\u30c3\u30b7\u30e5\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u64ae\u5f71\u3055\u308c\u3001\u753b\u50cf\u3068\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304cFirebase\u306eDatabase\u306b\u767b\u9332\u3055\u308c\u307e\u3059\u3002\ncompanionApp\u30a2\u30d7\u30ea\u3067\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\uff08\u30bf\u30a4\u30e0\u30e9\u30b0\u306f\u3042\u308a\u307e\u3059\u3002\uff09\n\n\n\u81ea\u5206\u306f\u624b\u9806\u3092\u884c\u304d\u3064\u623b\u308a\u3064\u3057\u3066\u3044\u305f\u306e\u3067\u8d77\u304d\u3066\u3044\u305f\u304b\u4e0d\u660e\u3067\u3059\u304c\u3001Developer Preview 1\u306e\u65e2\u77e5\u306e\u4e0d\u5177\u5408\u306b\u3088\u308a\u3001\u64ae\u5f71\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u3001AndroidThings\u306e\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u5f8c\u306b\u4e00\u65e6\u30dc\u30fc\u30c9\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n\n\u304a\u3057\u307e\u3044\n\u305d\u306e\u540d\u306e\u901a\u308a\u3001IoT\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\uff08\u3068\u308a\u308f\u3051\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3068\uff09\u3064\u306a\u304c\u308b\u3068\u3001\u3044\u308d\u3044\u308d\u306a\u7d44\u307f\u5408\u308f\u305b\u3068\u7528\u9014\u304c\u5e83\u304c\u308b\u611f\u3058\u304c\u3057\u3066\u30ef\u30af\u30ef\u30af\u611f\u304c\u3042\u308a\u307e\u3059\u306d\u3002\nAndroid Things\u3092\u8f09\u305b\u305fRaspberry Pi3\u306e\u30ab\u30e1\u30e9\u3067\u64ae\u5f71\u3057\u305f\u753b\u50cf\u3092Firebase\u306eDatabase\u3078\u9001\u308a\u3001Android\u30b9\u30de\u30d5\u30a9\u304b\u3089\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u3067\u95b2\u89a7\u3059\u308bAndroid Things\u306e[doorbell](https://github.com/androidthings/doorbell)\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u64ae\u5f71\u3057\u305f\u753b\u50cf\u306b\u306fCloud Vision API\u3092\u4f7f\u3063\u3066\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u3082\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u524d\u6e96\u5099\n\n### Android Things\u642d\u8f09\u30dc\u30fc\u30c9\n\nRaspberry Pi3\u3092\u4f7f\u7528\u3057\u3066\u307e\u3059\u3002\n\n[Raspberry Pi3\u306b\u3088\u308bAndroid Things\u5165\u9580](http://qiita.com/tatsu/items/dc98d600ff6c35832243)\u3092\u3054\u53c2\u7167\u3002\n\n- Raspberry Pi3\n- Raspberry Pi Camera Module V2\n- \u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\n- \u30d7\u30c3\u30b7\u30e5\u30dc\u30bf\u30f3\uff08\u30bf\u30af\u30c8\u30b9\u30a4\u30c3\u30c1\uff091\u500b\n- \u62b5\u6297 1K\u03a9 1\u500b\n- \u30b8\u30e3\u30f3\u30d1\u30fc\u30ef\u30a4\u30e4\u30fc \u30aa\u30b9\u30fc\u30aa\u30b92\u672c\u3001\u30aa\u30b9-\u30e1\u30b93\u672c\n\n![schematics.png](https://qiita-image-store.s3.amazonaws.com/0/49088/09645b6f-eda8-ccd2-46f7-2087f87cefa2.png)\n\n\u203bGPIO\u30d4\u30f3\u306fBCM21\u3092\u4f7f\u7528\u3057\u3066\u307e\u3059\u3002\n\n### Google Cloud Platform\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u3066\u3001\u30b3\u30f3\u30bd\u30fc\u30eb\u306eAPI Manager\u3067Cloud Vision API\u3092\u6709\u52b9\u306b\u3057\u3001API Key\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30bd\u30fc\u30b9\u306b\u30b3\u30d4\u30da\u3057\u307e\u3059\u3002\n\n```CloudVisionUtils.java\n    private static final String CLOUD_VISION_API_KEY = \"<ENTER VISION API KEY>\";\n```\n\n### Firebase\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u3063\u305f\u3089Android\u30a2\u30d7\u30ea\u3092\u8ffd\u52a0\u3057\u3001\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306egoogle-services.json\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001AndroidThings\u30a2\u30d7\u30ea\u306eapp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u3068\u3001Android\u30a2\u30d7\u30ea\u306ecompanionApp\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\u7f6e\u3044\u3066\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u5185\u306eapi_key\u304c\u7a7a\u3063\u307d\u3067\u30d3\u30eb\u30c9\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3053\u3068\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\nhttp://stackoverflow.com/questions/37317295/missing-api-key-current-key-with-google-services-3-0-0\n\n```google-services.json\n      \"api_key\": []\n```\n\n\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089SDK\u8a2d\u5b9a\u624b\u9806\u3092\u8868\u793a\u3057\u3001\u518d\u5ea6\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30d3\u30eb\u30c9\u304c\u901a\u308a\u307e\u3059\u3002\n\n```google-services.json\n      \"api_key\": [\n        {\n          \"current_key\": \"encrypted-string\"\n        }\n      ],\n```\n\n\u3061\u306a\u307f\u306b\u3053\u306eapi_key\u306fCloud Vision API\u306e\u30ad\u30fc\u3068\u306f\u5225\u3082\u306e\u3067\u3059\u3002\n\nDatabase\u306e\u30eb\u30fc\u30eb\u306f\u3001\u8a8d\u8a3c\u306a\u3057\u3067\u8ab0\u3067\u3082\u8aad\u307f\u66f8\u304d\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n{\n  \"rules\": {\n    \".read\": true,\n    \".write\": true\n  }\n}\n```\n\n## \u5b9f\u884c\n\n1. Raspberry Pi3\u306b\u96fb\u6e90\u3092\u5165\u308c\u3066AndroidThings\u3092\u8d77\u52d5\u3057\u305f\u3089adb\u63a5\u7d9a\u3057\u3001app\u30a2\u30d7\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n2. \u5bfe\u5411\u306ecompanionApp\u30a2\u30d7\u30ea\u3082\u30b9\u30de\u30d5\u30a9\u3067\u8d77\u52d5\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n3. \u30d6\u30ec\u30c3\u30c9\u30dc\u30fc\u30c9\u4e0a\u306e\u30d7\u30c3\u30b7\u30e5\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u64ae\u5f71\u3055\u308c\u3001\u753b\u50cf\u3068\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304cFirebase\u306eDatabase\u306b\u767b\u9332\u3055\u308c\u307e\u3059\u3002\n4. companionApp\u30a2\u30d7\u30ea\u3067\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u3002\uff08\u30bf\u30a4\u30e0\u30e9\u30b0\u306f\u3042\u308a\u307e\u3059\u3002\uff09\n\n> \u81ea\u5206\u306f\u624b\u9806\u3092\u884c\u304d\u3064\u623b\u308a\u3064\u3057\u3066\u3044\u305f\u306e\u3067\u8d77\u304d\u3066\u3044\u305f\u304b\u4e0d\u660e\u3067\u3059\u304c\u3001Developer Preview 1\u306e[\u65e2\u77e5\u306e\u4e0d\u5177\u5408](https://developer.android.com/things/preview/releases.html#developer_preview_1)\u306b\u3088\u308a\u3001\u64ae\u5f71\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306b\u3001AndroidThings\u306e\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u5f8c\u306b\u4e00\u65e6\u30dc\u30fc\u30c9\u3092\u30ea\u30bb\u30c3\u30c8\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u3002\n\n![Screenshot_20170118-103658[1].png](https://qiita-image-store.s3.amazonaws.com/0/49088/5ab64dfe-0326-72fa-5e3c-140c75b959ed.png)\n\n## \u304a\u3057\u307e\u3044\n\n\u305d\u306e\u540d\u306e\u901a\u308a\u3001IoT\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3067\uff08\u3068\u308a\u308f\u3051\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3068\uff09\u3064\u306a\u304c\u308b\u3068\u3001\u3044\u308d\u3044\u308d\u306a\u7d44\u307f\u5408\u308f\u305b\u3068\u7528\u9014\u304c\u5e83\u304c\u308b\u611f\u3058\u304c\u3057\u3066\u30ef\u30af\u30ef\u30af\u611f\u304c\u3042\u308a\u307e\u3059\u306d\u3002\n"}