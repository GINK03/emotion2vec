{"context": " More than 1 year has passed since last update.\n\nPHP\u3067\u6587\u5b57\u5217\u691c\u7d22\u306eBoyer Moore\u6cd5\n\u623b\u308a\u91cf\u3092\u8003\u616e\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u7121\u9650\u30eb\u30fc\u30d7\u3084\u672b\u5c3e\u306e\u53d6\u308a\u6271\u3044\u3067\u82e6\u6226\u3057\u305f\u3002\n\n\n/*\nBoyer Moore\u6cd5\n\u898b\u3064\u3051\u305f\u3044\u6587\u5b57(\u30d1\u30bf\u30fc\u30f3)\u306e\u672b\u5c3e\u304b\u3089\u63a2\u3057\u3066\u3044\u304f\n\u30c6\u30ad\u30b9\u30c8\u306e\u982d\u304b\u3089\u9032\u3081\u308b\u3002\n\u30d1\u30bf\u30fc\u30f3\u306b\u542b\u307e\u308c\u3066\u5c45\u306a\u3044\u6587\u5b57\u306e\u5834\u5408\u306f\u30d1\u30bf\u30fc\u30f3\u306e\u6570\u5206\u305a\u3089\u3059\n\u30d1\u30bf\u30fc\u30f3\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u6700\u5c0f\u9650\u306e\u79fb\u52d5\n */\nmb_internal_encoding(\"UTF-8\");\n//\u65e5\u672c\u8a9e\n//\u2460\u5168\u90e8\u540c\u3058\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                            //true\necho '<br>';\n//\u2461\u6700\u521d\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30c8\u30c8\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                      //true\necho '<br>';\n//\u2462\u9014\u4e2d\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30c6\u30c6\u30c6\u30c6\u30c6', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));       //true\necho '<br>';\n//\u2463\u9014\u4e2d\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('aaaabdfdsrtat\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30c6', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8')); //true\necho '<br>';\n//\u2464\u6700\u5f8c\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                  //true\necho '<br>';\n//\u2465\u6700\u5f8c\u3067\u30de\u30c3\u30c12\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6n\u30c8\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));               //true\necho '<br>';\n//\u2466\u6700\u5f8c\u3067\u30de\u30c3\u30c13\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9n\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));               //true\necho '<br>';\n//\u2467\u898b\u3064\u3051\u305f\u3044\u6587\u5b57\u3088\u308a\u3082\u77ed\u3044\nvar_dump(bMSearch('\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                                   //false\necho '<br>';\n//\u2468\u4e00\u81f4\u3057\u306a\u3044\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                             //false\necho '<br>';\n//\u2469\u4e00\u81f4\u3057\u306a\u3044\nvar_dump(bMSearch('\u5f8c\u623b\u308a\u3092\u8003\u616e\u305b\u305a\u7121\u9650\u30eb\u30fc\u30d7\u3067\u306f\u307e\u308b', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                             //false\n\nfunction bMSearch($text, $pattern) {\n    $tLength   = mb_strlen($text);    //\u30c6\u30ad\u30b9\u30c8\u306e\u9577\u3055\n    $pLength   = mb_strlen($pattern); //\u30d1\u30bf\u30fc\u30f3\u306e\u9577\u3055\n    $shifTable = array();             //\u30b7\u30d5\u30c8\u3059\u308b\u91cf\u306e\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\n\n    //\u30b7\u30d5\u30c8\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\u3002\u672b\u5c3e\u306e\uff11\u500b\u524d\u307e\u3067\u5b9f\u65bd\n    for ($i = 0; $i < $pLength - 1; $i++) {\n        //\u30ad\u30fc\u306f\u30d1\u30bf\u30fc\u30f3\u306e\u6587\u5b57\u3002\u5024\u306f\u30b7\u30d5\u30c8\u91cf\n        $shifTable[mb_substr($pattern, $i, 1, 'UTF-8')] = $pLength - $i -1;\n    }\n    //\u30d1\u30bf\u30fc\u30f3\u306e\u672b\u5c3e\u306e\u307f\u306e\u8a08\u7b97\u3002\u3082\u3057\u3001\u65e2\u306b\u6587\u5b57\u304c\u3042\u308b\u5834\u5408\u306f\u4f55\u3082\u3057\u306a\u3044\u3002\u6700\u521d\u306efor\u5206\u3067\u3084\u308b\u3068\u30b7\u30d5\u30c8\u91cf\u304c0\u306b\u306a\u308b\u305f\u3081\n    if (!array_key_exists(mb_substr($pattern, $pLength-1, 1, 'UTF-8'), $shifTable)) {\n        $shifTable[mb_substr($pattern, $pLength-1, 1, 'UTF-8')] = $pLength;\n    }\n\n    //var_dump($shifTable);\n    //exit('');\n    //\u63a2\u7d22\u3059\u308b\n    //\u30c6\u30ad\u30b9\u30c8\u306eindex\u3092\u30d1\u30bf\u30fc\u30f3\u306e\u672b\u5c3e\u3068\u3042\u308f\u305b\u308b\u3002\u672b\u5c3e\u304b\u3089\u63a2\u7d22\u3057\u3066\u3044\u304f\n    $tIndex = $pLength -1;\n    while ($tIndex < $tLength) {\n        //\u30d1\u30bf\u30fc\u30f3\u306e\u672b\u5c3e\u4f4d\u7f6e\n        $pp = $pLength - 1;\n        //\u6587\u5b57\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u9593\u5b9f\u65bd\n        while (mb_substr($text, $tIndex, 1, 'UTF-8') == mb_substr($pattern, $pp, 1, 'UTF-8')) {\n            if ($pp == 0) {\n                //\u63a2\u7d22\u6210\u529f\n                return true;\n            }\n            $tIndex--;\n            $pp--;\n        }\n        //\u79fb\u52d5\u3059\u308b\n        if (isset($shifTable[mb_substr($text, $tIndex, 1, 'UTF-8')])) {\n            //\u5f8c\u623b\u308a\u5bfe\u7b56\u3002\u5927\u304d\u3044\u65b9\u3092\u53d6\u308b\n            $tIndex = $tIndex + MAX($shifTable[mb_substr($text, $tIndex, 1, 'UTF-8')], $pLength - $pp);\n        } else {\n            //\u30d1\u30bf\u30fc\u30f3\u4ee5\u5916\u306e\u6587\u5b57\u306e\u6642\n            $tIndex = $tIndex + $pLength;\n        }\n    }\n    //\u63a2\u7d22\u5931\u6557\n    return false;\n}\n\n\n\n\n\n\u53c2\u8003\u30b5\u30a4\u30c8\nhttp://tokyo-ct.net/usr/kosaka/for_students/jissen1/akiyojissen1/kougi17.html\nhttp://www.comp.cs.gunma-u.ac.jp/~koichi/ALG2/9beamerBM.pdf\nhttp://www.comp.cs.gunma-u.ac.jp/~koichi/ALG2/ALG2.html\n#PHP\u3067\u6587\u5b57\u5217\u691c\u7d22\u306eBoyer Moore\u6cd5\n\n\u623b\u308a\u91cf\u3092\u8003\u616e\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u7121\u9650\u30eb\u30fc\u30d7\u3084\u672b\u5c3e\u306e\u53d6\u308a\u6271\u3044\u3067\u82e6\u6226\u3057\u305f\u3002\n\n```php\n\n\n/*\nBoyer Moore\u6cd5\n\u898b\u3064\u3051\u305f\u3044\u6587\u5b57(\u30d1\u30bf\u30fc\u30f3)\u306e\u672b\u5c3e\u304b\u3089\u63a2\u3057\u3066\u3044\u304f\n\u30c6\u30ad\u30b9\u30c8\u306e\u982d\u304b\u3089\u9032\u3081\u308b\u3002\n\u30d1\u30bf\u30fc\u30f3\u306b\u542b\u307e\u308c\u3066\u5c45\u306a\u3044\u6587\u5b57\u306e\u5834\u5408\u306f\u30d1\u30bf\u30fc\u30f3\u306e\u6570\u5206\u305a\u3089\u3059\n\u30d1\u30bf\u30fc\u30f3\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u6700\u5c0f\u9650\u306e\u79fb\u52d5\n */\nmb_internal_encoding(\"UTF-8\");\n//\u65e5\u672c\u8a9e\n//\u2460\u5168\u90e8\u540c\u3058\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                            //true\necho '<br>';\n//\u2461\u6700\u521d\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30c8\u30c8\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                      //true\necho '<br>';\n//\u2462\u9014\u4e2d\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30c6\u30c6\u30c6\u30c6\u30c6', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));       //true\necho '<br>';\n//\u2463\u9014\u4e2d\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('aaaabdfdsrtat\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8\u30c6', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8')); //true\necho '<br>';\n//\u2464\u6700\u5f8c\u3067\u30de\u30c3\u30c1\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                  //true\necho '<br>';\n//\u2465\u6700\u5f8c\u3067\u30de\u30c3\u30c12\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6n\u30c8\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));               //true\necho '<br>';\n//\u2466\u6700\u5f8c\u3067\u30de\u30c3\u30c13\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9n\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));               //true\necho '<br>';\n//\u2467\u898b\u3064\u3051\u305f\u3044\u6587\u5b57\u3088\u308a\u3082\u77ed\u3044\nvar_dump(bMSearch('\u30c6\u30b9\u30c8', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                                   //false\necho '<br>';\n//\u2468\u4e00\u81f4\u3057\u306a\u3044\nvar_dump(bMSearch('\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                             //false\necho '<br>';\n//\u2469\u4e00\u81f4\u3057\u306a\u3044\nvar_dump(bMSearch('\u5f8c\u623b\u308a\u3092\u8003\u616e\u305b\u305a\u7121\u9650\u30eb\u30fc\u30d7\u3067\u306f\u307e\u308b', '\u30c6\u30b9\u30c8\u30c8\u30c6\u30b9\u30c8'));                             //false\n\nfunction bMSearch($text, $pattern) {\n    $tLength   = mb_strlen($text);    //\u30c6\u30ad\u30b9\u30c8\u306e\u9577\u3055\n    $pLength   = mb_strlen($pattern); //\u30d1\u30bf\u30fc\u30f3\u306e\u9577\u3055\n    $shifTable = array();             //\u30b7\u30d5\u30c8\u3059\u308b\u91cf\u306e\u30de\u30b9\u30bf\u30c6\u30fc\u30d6\u30eb\n\n    //\u30b7\u30d5\u30c8\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\u3002\u672b\u5c3e\u306e\uff11\u500b\u524d\u307e\u3067\u5b9f\u65bd\n    for ($i = 0; $i < $pLength - 1; $i++) {\n        //\u30ad\u30fc\u306f\u30d1\u30bf\u30fc\u30f3\u306e\u6587\u5b57\u3002\u5024\u306f\u30b7\u30d5\u30c8\u91cf\n        $shifTable[mb_substr($pattern, $i, 1, 'UTF-8')] = $pLength - $i -1;\n    }\n    //\u30d1\u30bf\u30fc\u30f3\u306e\u672b\u5c3e\u306e\u307f\u306e\u8a08\u7b97\u3002\u3082\u3057\u3001\u65e2\u306b\u6587\u5b57\u304c\u3042\u308b\u5834\u5408\u306f\u4f55\u3082\u3057\u306a\u3044\u3002\u6700\u521d\u306efor\u5206\u3067\u3084\u308b\u3068\u30b7\u30d5\u30c8\u91cf\u304c0\u306b\u306a\u308b\u305f\u3081\n    if (!array_key_exists(mb_substr($pattern, $pLength-1, 1, 'UTF-8'), $shifTable)) {\n        $shifTable[mb_substr($pattern, $pLength-1, 1, 'UTF-8')] = $pLength;\n    }\n\n    //var_dump($shifTable);\n    //exit('');\n    //\u63a2\u7d22\u3059\u308b\n    //\u30c6\u30ad\u30b9\u30c8\u306eindex\u3092\u30d1\u30bf\u30fc\u30f3\u306e\u672b\u5c3e\u3068\u3042\u308f\u305b\u308b\u3002\u672b\u5c3e\u304b\u3089\u63a2\u7d22\u3057\u3066\u3044\u304f\n    $tIndex = $pLength -1;\n    while ($tIndex < $tLength) {\n        //\u30d1\u30bf\u30fc\u30f3\u306e\u672b\u5c3e\u4f4d\u7f6e\n        $pp = $pLength - 1;\n        //\u6587\u5b57\u304c\u4e00\u81f4\u3057\u3066\u3044\u308b\u9593\u5b9f\u65bd\n        while (mb_substr($text, $tIndex, 1, 'UTF-8') == mb_substr($pattern, $pp, 1, 'UTF-8')) {\n            if ($pp == 0) {\n                //\u63a2\u7d22\u6210\u529f\n                return true;\n            }\n            $tIndex--;\n            $pp--;\n        }\n        //\u79fb\u52d5\u3059\u308b\n        if (isset($shifTable[mb_substr($text, $tIndex, 1, 'UTF-8')])) {\n            //\u5f8c\u623b\u308a\u5bfe\u7b56\u3002\u5927\u304d\u3044\u65b9\u3092\u53d6\u308b\n            $tIndex = $tIndex + MAX($shifTable[mb_substr($text, $tIndex, 1, 'UTF-8')], $pLength - $pp);\n        } else {\n            //\u30d1\u30bf\u30fc\u30f3\u4ee5\u5916\u306e\u6587\u5b57\u306e\u6642\n            $tIndex = $tIndex + $pLength;\n        }\n    }\n    //\u63a2\u7d22\u5931\u6557\n    return false;\n}\n\n\n\n```\n##\u53c2\u8003\u30b5\u30a4\u30c8\nhttp://tokyo-ct.net/usr/kosaka/for_students/jissen1/akiyojissen1/kougi17.html\nhttp://www.comp.cs.gunma-u.ac.jp/~koichi/ALG2/9beamerBM.pdf\nhttp://www.comp.cs.gunma-u.ac.jp/~koichi/ALG2/ALG2.html\n", "tags": ["PHP", "\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0"]}