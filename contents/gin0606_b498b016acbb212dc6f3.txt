{"context": " More than 1 year has passed since last update.\n\u666e\u901a\u306bHTTP\u901a\u4fe1\u3067\u753b\u50cf\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304f\u308b\n\u30c7\u30fc\u30bf\u304b\u3089cocos2d::Image\u4f5c\u308b\n\ncocos2d::TextureCache\u306b\u6e21\u3057\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\uff06cocos2d::Texture2D\u53d6\u5f97\u3059\u308b\n\ncocos2d::Sprite::createWithTexture\u3067Sprite\u4f5c\u308b\n\naddChild\u3067\u8868\u793a\u3059\u308b\n\n\u4ee5\u964d\u306fcocos2d::Director::getInstance()->getTextureCache()->getTextureForKey(url)\u3067\u30c6\u30af\u30b9\u30c1\u30e3\u53d6\u5f97\u3067\u304d\u308b\u306f\u305a\u3002\nui::ImageView\u306e\u5834\u5408\u306f\u3001SpriteFrameCache\u306b\u767b\u9332\u3059\u308c\u3070\u4ee5\u964dImageView::create(spriteFrameName, cocos2d::ui::TextureResType::PLIST);\u3068\u3044\u3046\u611f\u3058\u3067\u4f5c\u308c\u308b\u3002\nauto url = \"\u4efb\u610f\u306e\u753b\u50cf\u306eURL\";\nauto request = new cocos2d::network::HttpRequest();\nrequest->setUrl(url);\nrequest->setRequestType(cocos2d::network::HttpRequest::Type::GET);\n\nrequest->setResponseCallback([this, url](cocos2d::network::HttpClient *, cocos2d::network::HttpResponse *response) {\n    if (!response->isSucceed()) {return;}\n    auto responseData = response->getResponseData();\n    auto bytes = reinterpret_cast<unsigned char *>(&(responseData->front()));\n\n    auto data = cocos2d::Data();\n    data.copy(&(bytes.front()), bytes.size());\n\n    auto image = new (std::nothrow) cocos2d::Image();\n    if (!image) {return;}\n    image->initWithImageData(data.getBytes(), data.getSize());\n    auto texture = cocos2d::Director::getInstance()->getTextureCache()->addImage(image, url);\n\n    auto spriteFrame = cocos2d::SpriteFrame::createWithTexture(texture, cocos2d::Rect(0, 0, texture->getContentSize().width, texture->getContentSize().height));\n    cocos2d::SpriteFrameCache::getInstance()->addSpriteFrame(spriteFrame, url); \n    CC_SAFE_RELEASE(image);\n\n    auto sprite = cocos2d::Sprite::createWithTexture(texture);\n    this->addChild(sprite);\n    // or\n    auto imageView = cocos2d::ui::ImageView::create(url, cocos2d::ui::TextureResType::PLIST);\n    this->addChild(imageView);\n});\ncocos2d::network::HttpClient::getInstance()->send(request);\n\n1. \u666e\u901a\u306bHTTP\u901a\u4fe1\u3067\u753b\u50cf\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u3063\u3066\u304f\u308b\n2. \u30c7\u30fc\u30bf\u304b\u3089`cocos2d::Image`\u4f5c\u308b\n3. `cocos2d::TextureCache`\u306b\u6e21\u3057\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\uff06`cocos2d::Texture2D`\u53d6\u5f97\u3059\u308b\n4. `cocos2d::Sprite::createWithTexture`\u3067Sprite\u4f5c\u308b\n5. `addChild`\u3067\u8868\u793a\u3059\u308b\n\n\u4ee5\u964d\u306f`cocos2d::Director::getInstance()->getTextureCache()->getTextureForKey(url)`\u3067\u30c6\u30af\u30b9\u30c1\u30e3\u53d6\u5f97\u3067\u304d\u308b\u306f\u305a\u3002\n\n`ui::ImageView`\u306e\u5834\u5408\u306f\u3001SpriteFrameCache\u306b\u767b\u9332\u3059\u308c\u3070\u4ee5\u964d`ImageView::create(spriteFrameName, cocos2d::ui::TextureResType::PLIST);`\u3068\u3044\u3046\u611f\u3058\u3067\u4f5c\u308c\u308b\u3002\n\n```cpp\nauto url = \"\u4efb\u610f\u306e\u753b\u50cf\u306eURL\";\nauto request = new cocos2d::network::HttpRequest();\nrequest->setUrl(url);\nrequest->setRequestType(cocos2d::network::HttpRequest::Type::GET);\n\nrequest->setResponseCallback([this, url](cocos2d::network::HttpClient *, cocos2d::network::HttpResponse *response) {\n    if (!response->isSucceed()) {return;}\n    auto responseData = response->getResponseData();\n    auto bytes = reinterpret_cast<unsigned char *>(&(responseData->front()));\n\n    auto data = cocos2d::Data();\n    data.copy(&(bytes.front()), bytes.size());\n\n    auto image = new (std::nothrow) cocos2d::Image();\n    if (!image) {return;}\n    image->initWithImageData(data.getBytes(), data.getSize());\n    auto texture = cocos2d::Director::getInstance()->getTextureCache()->addImage(image, url);\n\n    auto spriteFrame = cocos2d::SpriteFrame::createWithTexture(texture, cocos2d::Rect(0, 0, texture->getContentSize().width, texture->getContentSize().height));\n    cocos2d::SpriteFrameCache::getInstance()->addSpriteFrame(spriteFrame, url); \n    CC_SAFE_RELEASE(image);\n\n    auto sprite = cocos2d::Sprite::createWithTexture(texture);\n    this->addChild(sprite);\n    // or\n    auto imageView = cocos2d::ui::ImageView::create(url, cocos2d::ui::TextureResType::PLIST);\n    this->addChild(imageView);\n});\ncocos2d::network::HttpClient::getInstance()->send(request);\n```\n", "tags": ["cocos2d-x"]}