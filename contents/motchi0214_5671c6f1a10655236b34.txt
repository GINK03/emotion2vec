{"context": " More than 1 year has passed since last update.AWS\u3067\u306fCloudWatch Logs\u304b\u3089Elasticsearch Service\u306b\u30ed\u30b0\u3092\u9001\u3063\u3066Kibana\u3067\u898b\u308b\u3068\u3044\u3046\u904b\u7528\u304c\u3067\u304d\u308b\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u304c\u300ccwl-YYYY.MM.DD\u300d\u56fa\u5b9a\u306b\u306a\u308b\u3002\n\u8907\u6570\u306e\u30ed\u30b0\u3092\u9001\u308b\u6642\u306a\u3069\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u3092\u5909\u3048\u305f\u3044\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u305d\u306e\u6642\u306e\u305f\u3081\u306e\u899a\u66f8\u3002\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u306fLambda\u3067\u5b9a\u7fa9\nCloudWatch Logs -> Elasticsearch Service\u306e\u30ed\u30b0\u9001\u4fe1\u306f\u88cf\u5074\u3067Lambda\u3092\u8d70\u3089\u305b\u3066\u3044\u308b\u3002\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u3057\u305f\u6642\u306b\u52dd\u624b\u306bLambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u63db\u3048\u308c\u3070OK\n\n\u8a2d\u5b9a\u7b87\u6240\n60\u301c70\u884c\u76ee\u3042\u305f\u308a\u306b\u8a72\u5f53\u30b3\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n    payload.logEvents.forEach(function(logEvent) {\n        var timestamp = new Date(1 * logEvent.timestamp);\n\n        // index name format: cwl-YYYY.MM.DD\n        var indexName = [\n            'cwl-' + timestamp.getUTCFullYear(),              // year\n            ('0' + (timestamp.getUTCMonth() + 1)).slice(-2),  // month\n            ('0' + timestamp.getUTCDate()).slice(-2)          // day\n        ].join('.');\n\n\n\u300cvar indexName\u300d\u304c\u305d\u306e\u307e\u307e\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u3092\u4efb\u610f\u306e\u540d\u524d\u306b\u66f8\u304d\u63db\u3048\u308c\u3070\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u3092\u5206\u3051\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u305d\u306e\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u898b\u308b\u3068\u300cpayload.logGroup\u300d\u304b\u3089\u306f\u300c\u30ed\u30b0\u30b0\u30eb\u30fc\u30d7\u300d\u304c\u300cpayload.logStream\u300d\u304b\u3089\u306f\u300c\u30ed\u30b0\u30b9\u30c8\u30ea\u30fc\u30e0\u300d\u306e\u5024\u304c\u53d6\u308c\u308b\u69d8\u5b50\u306a\u306e\u3067\u3001\u305d\u306e\u8fba\u308a\u3067if\u5206\u5c90\u304b\u3051\u308c\u3070\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\nif\u5206\u5c90\u306b\u4f7f\u3048\u305d\u3046\u306a\u5024\u4e00\u89a7\n        var source = buildSource(logEvent.message, logEvent.extractedFields);\n        source['@id'] = logEvent.id;\n        source['@timestamp'] = new Date(1 * logEvent.timestamp).toISOString();\n        source['@message'] = logEvent.message;\n        source['@owner'] = payload.owner;\n        source['@log_group'] = payload.logGroup;\n        source['@log_stream'] = payload.logStream;```\n\nAWS\u3067\u306fCloudWatch Logs\u304b\u3089Elasticsearch Service\u306b\u30ed\u30b0\u3092\u9001\u3063\u3066Kibana\u3067\u898b\u308b\u3068\u3044\u3046\u904b\u7528\u304c\u3067\u304d\u308b\u304c\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u304c\u300ccwl-YYYY.MM.DD\u300d\u56fa\u5b9a\u306b\u306a\u308b\u3002\n\n\u8907\u6570\u306e\u30ed\u30b0\u3092\u9001\u308b\u6642\u306a\u3069\u3001\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u3092\u5909\u3048\u305f\u3044\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067\u305d\u306e\u6642\u306e\u305f\u3081\u306e\u899a\u66f8\u3002\n\n##\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u306fLambda\u3067\u5b9a\u7fa9\nCloudWatch Logs -> Elasticsearch Service\u306e\u30ed\u30b0\u9001\u4fe1\u306f\u88cf\u5074\u3067Lambda\u3092\u8d70\u3089\u305b\u3066\u3044\u308b\u3002\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u3057\u305f\u6642\u306b\u52dd\u624b\u306bLambda\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u304c\u4f5c\u3089\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u63db\u3048\u308c\u3070OK\n\n####\u8a2d\u5b9a\u7b87\u6240\n60\u301c70\u884c\u76ee\u3042\u305f\u308a\u306b\u8a72\u5f53\u30b3\u30fc\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\n    payload.logEvents.forEach(function(logEvent) {\n        var timestamp = new Date(1 * logEvent.timestamp);\n\n        // index name format: cwl-YYYY.MM.DD\n        var indexName = [\n            'cwl-' + timestamp.getUTCFullYear(),              // year\n            ('0' + (timestamp.getUTCMonth() + 1)).slice(-2),  // month\n            ('0' + timestamp.getUTCDate()).slice(-2)          // day\n        ].join('.');\n\n```\n\n\u300cvar indexName\u300d\u304c\u305d\u306e\u307e\u307e\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u3092\u4efb\u610f\u306e\u540d\u524d\u306b\u66f8\u304d\u63db\u3048\u308c\u3070\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u540d\u3092\u5206\u3051\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n\u305d\u306e\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u898b\u308b\u3068\u300cpayload.logGroup\u300d\u304b\u3089\u306f\u300c\u30ed\u30b0\u30b0\u30eb\u30fc\u30d7\u300d\u304c\u300cpayload.logStream\u300d\u304b\u3089\u306f\u300c\u30ed\u30b0\u30b9\u30c8\u30ea\u30fc\u30e0\u300d\u306e\u5024\u304c\u53d6\u308c\u308b\u69d8\u5b50\u306a\u306e\u3067\u3001\u305d\u306e\u8fba\u308a\u3067if\u5206\u5c90\u304b\u3051\u308c\u3070\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u304b\u306a\u3068\u601d\u3044\u307e\u3059\u3002\n\n####if\u5206\u5c90\u306b\u4f7f\u3048\u305d\u3046\u306a\u5024\u4e00\u89a7\n\n```\n        var source = buildSource(logEvent.message, logEvent.extractedFields);\n        source['@id'] = logEvent.id;\n        source['@timestamp'] = new Date(1 * logEvent.timestamp).toISOString();\n        source['@message'] = logEvent.message;\n        source['@owner'] = payload.owner;\n        source['@log_group'] = payload.logGroup;\n        source['@log_stream'] = payload.logStream;```\n", "tags": ["CloudWatch", "ElasticsearchService"]}