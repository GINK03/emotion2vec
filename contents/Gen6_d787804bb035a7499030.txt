{"context": " More than 1 year has passed since last update.bottle\u306f\u3068\u308a\u3042\u3048\u305a\u89e6\u3063\u3066\u3084\u3063\u3066\u307f\u308b\u3068\u610f\u5916\u3068\u697d\u3060\u306a\u3001\u7c21\u5358\u3060\u306a\u3002\n\u3068\u3044\u3046\u306e\u304c\u5b9f\u611f\u3067\u304d\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\u3084\u306f\u308a\u7c21\u5358\u3067\u305d\u308c\u306a\u308a\u306b\u4f5c\u3063\u305f\u6c17\u306b\u306a\u308b\u305f\u3081\u306b\u3082API\u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306fbottle\u3092\u4f7f\u3063\u3066Twitter\u306e\u691c\u7d22\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\nindex.py\n\n#!/user/bin/env python\n# -*- coding: utf-8 -*-\nfrom bottle import route, run, template, request, static_file, url, get, post, response, error\nfrom requests_oauthlib import OAuth1Session\nimport json\nimport sys, codecs\nsys.stdout = codecs.getwriter(\"utf-8\")(sys.stdout)\n\n@route(\"/\")\ndef html_index():\n    return template(\"index\")\n\n@route(\"/static/<filepath:path>\", name=\"static_file\")\ndef static(filepath):   \n    return static_file(filepath, root=\"./static\")\n\n\n@route(\"/show\", method=\"GET\")\ndef search_twitter():\n\n    search_words = request.query.search_words\n\n    C_KEY = \"*****************************\"\n    C_SECRET = \"*****************************\"\n    A_KEY = \"*****************************\"\n    A_SECRET = \"*****************************\"\n\n    url = \"https://api.twitter.com/1.1/search/tweets.json?\"\n\n    params = {\n            \"q\": (search_words, \"utf-8\"),\n            \"lang\": \"ja\",\n            \"result_type\": \"mixed\",\n            \"count\": \"100\"\n            }       \n    tw = OAuth1Session(C_KEY,C_SECRET,A_KEY,A_SECRET)\n    req = tw.get(url, params = params)\n    tweets = json.loads(req.text)\n\n    if req.status_code == 200:\n        for tweet in tweets[\"statuses\"]:\n            created_at = (tweet[\"created_at\"])\n            User = (tweet[\"user\"][\"screen_name\"].encode(\"utf-8\"))\n            U_Name = (tweet[\"user\"][\"name\"].encode(\"utf-8\"))\n            U_img = (tweet[\"user\"][\"profile_image_url\"])\n            Text = (tweet[\"text\"].encode(\"utf-8\"))\n\n    return template(\"show\", \n                Text=Text, \n                User=User, \n                U_Name=U_Name,\n                U_img=U_img, \n                created_at=created_at,\n                url=url\n                )   \nrun(host=\"localhost\", port=8000, debug=True, reloader=True)\n\n\n\u6b21\u306bviews\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306bindex.html \u3068\u3000show.html\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nindex.html\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n<link href=\"../static/css/style.css\" type=\"text/css\" rel=\"stylesheet\" />\n<title>Twitter TL</title>\n</head>\n\n<body>\n\n\n\n<div id=\"content\">\n\n<div class=\"area\">\n<form method=\"GET\" action=\"/show\">\n<p>Twitter \u691c\u7d22: <input type=\"text\" name=\"search_words\"> <input type=\"submit\" value=\"\u9001\u4fe1\u3059\u308b\"></p>\n</form>\n</div><!-- area -->\n\n</div><!-- content -->\n\n\n</body>\n\n</html>\n\n\n\nshow.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n<link href=\"../static/css/style.css\" type=\"text/css\" rel=\"stylesheet\" />\n<title>Twitter TL</title>\n</head>\n\n<body>\n\n\n\n<div id=\"content\">\n\n<div class=\"area\">\n\n<p><img src=\"{{U_img}}\"></p>\n<p>{{User}}:{{U_Name}}</p>\n<p>TEXT: {{Text}}</p>\n<p>{{created_at}}</p>\n\n<p><input type=\"button\" value=\"\u3053\u306e\u30da\u30fc\u30b8\u3092\u518d\u8aad\u8fbc\" onclick=\"location.reload();\" /></p>\n\n</div><!-- area -->\n\n</div><!-- content -->\n\n\n</body>\n\n</html>\n\n\n\u3053\u308c\u3060\u3051\u3067\u306f\u60b2\u3057\u304f\u306a\u308b\u306e\u3067CSS\u306f\u3000static\u30d5\u30a9\u30eb\u30c0\u3092views\u30d5\u30a9\u30eb\u30c0\u3068\u540c\u3058\u968e\u5c64\u306b\u4f5c\u3063\u3066/CSS\u30d5\u30a9\u30eb\u30c0\u3051\u5165\u308c\u8fbc\u307f\u307e\u3059\u3002\n\nstyle.css\n@charset \"UTF-8\";\n\n* {\nmargin: 0;\npadding: 0;\n}\n\nbody {\nmargin:0;\npadding:0;\n}\n\n\n#content {\nmargin-right:auto; \nmargin-left:auto;\nwidth:800px;\n}\n\n.area{\nmargin: 80px 0 0 0;\n}\n\n\nul li {\nlist-style:none;\nmargin:0;\npadding:0;\n}\n\ninput[type=text]{\n   border-radius: 5px;\n   -moz-border-radius: 5px;\n   -webkit-border-radius: 5px;\n   -o-border-radius: 5px;\n   -ms-border-radius: 5px;\n   border:#a9a9a9 1px solid;\n   -moz-box-shadow: inset 0 0 5px rgba(0,0,0,0.2),0 0 2px rgba(0,0,0,0.3);\n   -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   width:50%;\n   height:30px;\n   padding:0 3px;\n}\n\ninput[type=text]:focus {\n   border:solid 1px #20b2aa;\n}\n\ninput[type=text], select { \n   outline: none;\n}\n\ninput[type=submit]{\n   border-radius: 5px;\n   -moz-border-radius: 5px;\n   -webkit-border-radius: 5px;\n   -o-border-radius: 5px;\n   -ms-border-radius: 5px;\n   border:#a9a9a9 1px solid;\n   -moz-box-shadow: inset 0 0 5px rgba(0,0,0,0.2),0 0 2px rgba(0,0,0,0.3);\n   -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   width:100px;\n   margin-left:auto;\n   margin-right:auto;\n   height:40px;\n   padding:0 3px;\n   cursor:pointer;\n   color:#333;\n   font-weight:bold;\n   background:#f5f5f5;\n   text-shadow:1px 1px 0px #fff;\n   text-align:center;\n}\n\ninput[type=button]{\n   border-radius: 5px;\n   -moz-border-radius: 5px;\n   -webkit-border-radius: 5px;\n   -o-border-radius: 5px;\n   -ms-border-radius: 5px;\n   border:#a9a9a9 1px solid;\n   -moz-box-shadow: inset 0 0 5px rgba(0,0,0,0.2),0 0 2px rgba(0,0,0,0.3);\n   -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   width:150px;\n   margin-left:auto;\n   margin-right:auto;\n   height:40px;\n   padding:0 3px;\n   cursor:pointer;\n   color:#333;\n   font-weight:bold;\n   background:#f5f5f5;\n   text-shadow:1px 1px 0px #fff;\n   text-align:center;\n}\n\n\n\u3053\u308c\u3067index.py\u3092\u52d5\u304b\u305b\u3070Twitter\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u306e\u691c\u7d22\u304c\u3067\u304d\u307e\u3059\u3002show.html\u5185\u306b\u3000% for~\u3067\u66f8\u3044\u3066\u3084\u308c\u3070\u3001\u53d6\u5f97\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u3092\u5168\u6570\u8868\u793a\u3067\u304d\u307e\u3059\u3002\nbottle\u306f\u3068\u308a\u3042\u3048\u305a\u89e6\u3063\u3066\u3084\u3063\u3066\u307f\u308b\u3068\u610f\u5916\u3068\u697d\u3060\u306a\u3001\u7c21\u5358\u3060\u306a\u3002\n\u3068\u3044\u3046\u306e\u304c\u5b9f\u611f\u3067\u304d\u308b\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3084\u306f\u308a\u7c21\u5358\u3067\u305d\u308c\u306a\u308a\u306b\u4f5c\u3063\u305f\u6c17\u306b\u306a\u308b\u305f\u3081\u306b\u3082API\u3092\u4f7f\u3046\u306e\u304c\u3044\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4eca\u56de\u306fbottle\u3092\u4f7f\u3063\u3066Twitter\u306e\u691c\u7d22\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n```index.py\n\n#!/user/bin/env python\n# -*- coding: utf-8 -*-\nfrom bottle import route, run, template, request, static_file, url, get, post, response, error\nfrom requests_oauthlib import OAuth1Session\nimport json\nimport sys, codecs\nsys.stdout = codecs.getwriter(\"utf-8\")(sys.stdout)\n\n@route(\"/\")\ndef html_index():\n\treturn template(\"index\")\n\n@route(\"/static/<filepath:path>\", name=\"static_file\")\ndef static(filepath):\t\n\treturn static_file(filepath, root=\"./static\")\n\n\n@route(\"/show\", method=\"GET\")\ndef search_twitter():\n\t\n\tsearch_words = request.query.search_words\n\t\n\tC_KEY = \"*****************************\"\n\tC_SECRET = \"*****************************\"\n\tA_KEY = \"*****************************\"\n\tA_SECRET = \"*****************************\"\n\n\turl = \"https://api.twitter.com/1.1/search/tweets.json?\"\n\t\n\tparams = {\n\t\t\t\"q\": (search_words, \"utf-8\"),\n\t\t\t\"lang\": \"ja\",\n\t\t\t\"result_type\": \"mixed\",\n\t\t\t\"count\": \"100\"\n\t\t\t}\t\t\n\ttw = OAuth1Session(C_KEY,C_SECRET,A_KEY,A_SECRET)\n\treq = tw.get(url, params = params)\n\ttweets = json.loads(req.text)\n\t\n\tif req.status_code == 200:\n\t\tfor tweet in tweets[\"statuses\"]:\n\t\t\tcreated_at = (tweet[\"created_at\"])\n\t\t\tUser = (tweet[\"user\"][\"screen_name\"].encode(\"utf-8\"))\n\t\t\tU_Name = (tweet[\"user\"][\"name\"].encode(\"utf-8\"))\n\t\t\tU_img = (tweet[\"user\"][\"profile_image_url\"])\n\t\t\tText = (tweet[\"text\"].encode(\"utf-8\"))\n\t\t\t\n\treturn template(\"show\", \n\t\t\t\tText=Text, \n\t\t\t\tUser=User, \n\t\t\t\tU_Name=U_Name,\n\t\t\t\tU_img=U_img, \n\t\t\t\tcreated_at=created_at,\n\t\t\t\turl=url\n\t\t\t\t)\t\nrun(host=\"localhost\", port=8000, debug=True, reloader=True)\n```\n\n\u6b21\u306bviews\u30d5\u30a9\u30eb\u30c0\u306e\u4e2d\u306bindex.html \u3068\u3000show.html\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n```index.html\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n<link href=\"../static/css/style.css\" type=\"text/css\" rel=\"stylesheet\" />\n<title>Twitter TL</title>\n</head>\n\n<body>\n\n\n\n<div id=\"content\">\n\n<div class=\"area\">\n<form method=\"GET\" action=\"/show\">\n<p>Twitter \u691c\u7d22: <input type=\"text\" name=\"search_words\"> <input type=\"submit\" value=\"\u9001\u4fe1\u3059\u308b\"></p>\n</form>\n</div><!-- area -->\n\n</div><!-- content -->\n\n\n</body>\n\n</html>\n```\n\n```show.html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n<meta charset=\"UTF-8\">\n<link href=\"../static/css/style.css\" type=\"text/css\" rel=\"stylesheet\" />\n<title>Twitter TL</title>\n</head>\n\n<body>\n\n\n\n<div id=\"content\">\n\n<div class=\"area\">\n\n<p><img src=\"{{U_img}}\"></p>\n<p>{{User}}:{{U_Name}}</p>\n<p>TEXT: {{Text}}</p>\n<p>{{created_at}}</p>\n\n<p><input type=\"button\" value=\"\u3053\u306e\u30da\u30fc\u30b8\u3092\u518d\u8aad\u8fbc\" onclick=\"location.reload();\" /></p>\n\n</div><!-- area -->\n\n</div><!-- content -->\n\n\n</body>\n\n</html>\n```\n\n\u3053\u308c\u3060\u3051\u3067\u306f\u60b2\u3057\u304f\u306a\u308b\u306e\u3067CSS\u306f\u3000static\u30d5\u30a9\u30eb\u30c0\u3092views\u30d5\u30a9\u30eb\u30c0\u3068\u540c\u3058\u968e\u5c64\u306b\u4f5c\u3063\u3066/CSS\u30d5\u30a9\u30eb\u30c0\u3051\u5165\u308c\u8fbc\u307f\u307e\u3059\u3002\n\n```style.css\n@charset \"UTF-8\";\n\n* {\nmargin: 0;\npadding: 0;\n}\n\nbody {\nmargin:0;\npadding:0;\n}\n\n\n#content {\nmargin-right:auto; \nmargin-left:auto;\nwidth:800px;\n}\n\n.area{\nmargin: 80px 0 0 0;\n}\n\n\nul li {\nlist-style:none;\nmargin:0;\npadding:0;\n}\n\ninput[type=text]{\n   border-radius: 5px;\n   -moz-border-radius: 5px;\n   -webkit-border-radius: 5px;\n   -o-border-radius: 5px;\n   -ms-border-radius: 5px;\n   border:#a9a9a9 1px solid;\n   -moz-box-shadow: inset 0 0 5px rgba(0,0,0,0.2),0 0 2px rgba(0,0,0,0.3);\n   -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   width:50%;\n   height:30px;\n   padding:0 3px;\n}\n\ninput[type=text]:focus {\n   border:solid 1px #20b2aa;\n}\n\ninput[type=text], select { \n   outline: none;\n}\n\ninput[type=submit]{\n   border-radius: 5px;\n   -moz-border-radius: 5px;\n   -webkit-border-radius: 5px;\n   -o-border-radius: 5px;\n   -ms-border-radius: 5px;\n   border:#a9a9a9 1px solid;\n   -moz-box-shadow: inset 0 0 5px rgba(0,0,0,0.2),0 0 2px rgba(0,0,0,0.3);\n   -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   width:100px;\n   margin-left:auto;\n   margin-right:auto;\n   height:40px;\n   padding:0 3px;\n   cursor:pointer;\n   color:#333;\n   font-weight:bold;\n   background:#f5f5f5;\n   text-shadow:1px 1px 0px #fff;\n   text-align:center;\n}\n\ninput[type=button]{\n   border-radius: 5px;\n   -moz-border-radius: 5px;\n   -webkit-border-radius: 5px;\n   -o-border-radius: 5px;\n   -ms-border-radius: 5px;\n   border:#a9a9a9 1px solid;\n   -moz-box-shadow: inset 0 0 5px rgba(0,0,0,0.2),0 0 2px rgba(0,0,0,0.3);\n   -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2),0 0 2px rgba(0,0,0,0.3);\n   width:150px;\n   margin-left:auto;\n   margin-right:auto;\n   height:40px;\n   padding:0 3px;\n   cursor:pointer;\n   color:#333;\n   font-weight:bold;\n   background:#f5f5f5;\n   text-shadow:1px 1px 0px #fff;\n   text-align:center;\n}\n```\n\n\u3053\u308c\u3067index.py\u3092\u52d5\u304b\u305b\u3070Twitter\u304b\u3089\u30c4\u30a4\u30fc\u30c8\u306e\u691c\u7d22\u304c\u3067\u304d\u307e\u3059\u3002show.html\u5185\u306b\u3000% for~\u3067\u66f8\u3044\u3066\u3084\u308c\u3070\u3001\u53d6\u5f97\u3057\u305f\u30c4\u30a4\u30fc\u30c8\u3092\u5168\u6570\u8868\u793a\u3067\u304d\u307e\u3059\u3002\n", "tags": ["TwitterAPI", "bottle", "Python"]}