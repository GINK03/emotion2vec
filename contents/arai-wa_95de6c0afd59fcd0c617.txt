{"tags": ["Android", "JUnit", "Robotium"], "context": " More than 1 year has passed since last update.JUnit4 \u3068 Robotium \u3092\u5171\u5b58\u3055\u305b\u308b\u65b9\u6cd5\u3067\u3059\u3002\n@RunWith(Enclosed.class) \u3067\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u3092\u968e\u5c64\u5316\u30fb\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u30c6\u30b9\u30c8\u306e\u6761\u4ef6\u3054\u3068\u306b\u30c6\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u3092\u5206\u985e\u3057\u3066\u6574\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n\nGradle \u307e\u308f\u308a\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30a2\u30d7\u30ea\u306e build.gradle \u306b\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\u884c\u3046\u3053\u3068\u306f2\u3064\u3067\u3059\u3002\n\n\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4f9d\u5b58\u95a2\u4fc2\u306e\u89e3\u6c7a\n\nJUnit4\uff08\u306a\u3069\uff09\nRobotium\n\n\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002\ndependencies {\n    androidTestCompile 'com.android.support.test:testing-support-lib:0.1'\n    androidTestCompile 'com.jayway.android.robotium:robotium-solo:5.2.1'\n\n    // \u3082\u3057\u304f\u306f\u3001 jar \u30d5\u30a1\u30a4\u30eb\u3092 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u3044\u3066\u304a\u304f\u306a\u3089\n    // androidTestCompile fileTree(dir: 'testlibs', include: '*.jar')\n}\n\n\n\u30c6\u30b9\u30c8\u30e9\u30f3\u30ca\u30fc (android.support.test.runner.AndroidJUnitRunner) \u306e\u8a2d\u5b9a\nandroid {\n    defaultConfig {\n        testInstrumentationRunner 'android.support.test.runner.AndroidJUnitRunner'\n    }\n}\n\n\n\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\nmain \u3068\u540c\u3058\u968e\u5c64\u306b androidTest \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\u305d\u306e\u306a\u304b\u306b java \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u56f3\u306b\u3059\u308b\u3068\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\nsrc\n\u2523 main\n\u2503 \u2517 java\n\u2503    \u2517 com.example // \u30a2\u30d7\u30ea\u306e\u30b3\u30fc\u30c9\n\u2517 androidTest\n   \u2517 java\n      \u2517 com.example.debug.test // \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306f\u3053\u306e\u4e2d\uff01\n\n\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u5404\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306e\u89aa\u30af\u30e9\u30b9\u306b\u306a\u308b BaseTest \u30af\u30e9\u30b9\n\u30b5\u30d6\u30af\u30e9\u30b9\u306e SampleTest \uff08@RunWith(Enclosed.class) \u3067\u968e\u5c64\u5316\u3057\u3066\u307f\u307e\u3057\u305f\uff09\n\n\u306e2\u3064\u306b\u308f\u3051\u3066\u307f\u307e\u3057\u305f\u3002\n\nBaseTest.class\n@RunWith(AndroidJUnit4.class)\nabstract public class BaseTest extends ActivityInstrumentationTestCase2<AppBaseActivity> {\n\n    protected Solo solo;\n\n    public BaseTest() {\n        super(AppBaseActivity.class);\n    }\n\n    @Before\n    @Override\n    public void setUp() throws Exception {\n        super.setUp();\n        injectInstrumentation(InstrumentationRegistry.getInstrumentation());\n        solo = new Solo(getInstrumentation());\n        getActivity();\n    }\n\n    @After\n    @Override\n    public void tearDown() throws Exception {\n        solo.finishOpenedActivities();\n        super.tearDown();\n    }\n}\n\n\n\nSampleTest.class\n@RunWith(Enclosed.class)\npublic class SampleTest {\n\n    @RunWith(AndroidJUnit4.class)\n    public static class FooTest extends BaseTest {\n\n        public FooTest() {\n            super();\n        }\n\n        @Test\n        public void runFoo() {\n            // \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n        }\n\n        @Test\n        public void runFooWithExpiredToken() {\n            // \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n        }\n    }\n\n    @RunWith(AndroidJUnit4.class)\n    public static class BarTest extends BaseTest {\n\n        public BarTest() {\n            super();\n        }\n\n        @Test\n        public void runBar() {\n            // \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n        }\n    }\n}\n\n\n\n\u30c6\u30b9\u30c8\u5b9f\u884c\n\nGUI\nAndroid Studio\u3002\u5857\u308a\u3064\u3076\u3057\u3066\u3044\u308b\u7b87\u6240\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u9078\u629e\u3002\n\n\nCUI\n./gradlew clean assembleDebug assembleAndroidTest\n\n# \u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30a2\u30d7\u30ea \nadb install -r sample/build/outputs/apk/app-debug.apk\n\n# \u30c6\u30b9\u30c8\nadb install -r sample/build/outputs/apk/app-debug-androidTest-unaligned.apk\n\nadb shell am instrument -w com.example.debug.test/android.support.test.runner.AndroidJUnitRunner\n\n\n\u611f\u60f3\nJUnit4 \u306f JUnit3 \u306b\u6bd4\u3079\u3066\u8272\u3005\u3068\u4fbf\u5229\u306a\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\u3042\u307e\u308a\u77e5\u3089\u306a\u3044\u306e\u3067\u5b66\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\nJUnit4 \u3068 Robotium \u3092\u5171\u5b58\u3055\u305b\u308b\u65b9\u6cd5\u3067\u3059\u3002\n`@RunWith(Enclosed.class)` \u3067\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u3092\u968e\u5c64\u5316\u30fb\u30b0\u30eb\u30fc\u30d4\u30f3\u30b0\u3057\u3066\u3001\u30c6\u30b9\u30c8\u306e\u6761\u4ef6\u3054\u3068\u306b\u30c6\u30b9\u30c8\u30e1\u30bd\u30c3\u30c9\u3092\u5206\u985e\u3057\u3066\u6574\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002\n\n# Gradle \u307e\u308f\u308a\n\u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30a2\u30d7\u30ea\u306e build.gradle \u306b\u8a2d\u5b9a\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\u884c\u3046\u3053\u3068\u306f2\u3064\u3067\u3059\u3002\n## \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u306e\u4f9d\u5b58\u95a2\u4fc2\u306e\u89e3\u6c7a\n* JUnit4\uff08\u306a\u3069\uff09\n* Robotium\n\n\u306e\u4f9d\u5b58\u95a2\u4fc2\u3092\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\n```groovy\ndependencies {\n    androidTestCompile 'com.android.support.test:testing-support-lib:0.1'\n    androidTestCompile 'com.jayway.android.robotium:robotium-solo:5.2.1'\n\n    // \u3082\u3057\u304f\u306f\u3001 jar \u30d5\u30a1\u30a4\u30eb\u3092 \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u7f6e\u3044\u3066\u304a\u304f\u306a\u3089\n    // androidTestCompile fileTree(dir: 'testlibs', include: '*.jar')\n}\n```\n\n## \u30c6\u30b9\u30c8\u30e9\u30f3\u30ca\u30fc (android.support.test.runner.AndroidJUnitRunner) \u306e\u8a2d\u5b9a\n\n```groovy\nandroid {\n    defaultConfig {\n        testInstrumentationRunner 'android.support.test.runner.AndroidJUnitRunner'\n    }\n}\n```\n\n# \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\nmain \u3068\u540c\u3058\u968e\u5c64\u306b androidTest \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u308a\u307e\u3059\u3002\u305d\u306e\u306a\u304b\u306b java \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u56f3\u306b\u3059\u308b\u3068\u4e0b\u306e\u3068\u304a\u308a\u3067\u3059\u3002\n\n```\nsrc\n\u2523 main\n\u2503 \u2517 java\n\u2503    \u2517 com.example // \u30a2\u30d7\u30ea\u306e\u30b3\u30fc\u30c9\n\u2517 androidTest\n   \u2517 java\n      \u2517 com.example.debug.test // \u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306f\u3053\u306e\u4e2d\uff01\n```\n\n\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n* \u5404\u30c6\u30b9\u30c8\u30af\u30e9\u30b9\u306e\u89aa\u30af\u30e9\u30b9\u306b\u306a\u308b `BaseTest` \u30af\u30e9\u30b9\n* \u30b5\u30d6\u30af\u30e9\u30b9\u306e `SampleTest` \uff08`@RunWith(Enclosed.class)` \u3067\u968e\u5c64\u5316\u3057\u3066\u307f\u307e\u3057\u305f\uff09\n\n\u306e2\u3064\u306b\u308f\u3051\u3066\u307f\u307e\u3057\u305f\u3002\n\n```java:BaseTest.class\n@RunWith(AndroidJUnit4.class)\nabstract public class BaseTest extends ActivityInstrumentationTestCase2<AppBaseActivity> {\n\n\tprotected Solo solo;\n\n\tpublic BaseTest() {\n\t\tsuper(AppBaseActivity.class);\n\t}\n\n\t@Before\n\t@Override\n\tpublic void setUp() throws Exception {\n\t\tsuper.setUp();\n\t\tinjectInstrumentation(InstrumentationRegistry.getInstrumentation());\n\t\tsolo = new Solo(getInstrumentation());\n\t\tgetActivity();\n\t}\n\n\t@After\n\t@Override\n\tpublic void tearDown() throws Exception {\n\t\tsolo.finishOpenedActivities();\n\t\tsuper.tearDown();\n\t}\n}\n```\n\n```java:SampleTest.class\n@RunWith(Enclosed.class)\npublic class SampleTest {\n\n\t@RunWith(AndroidJUnit4.class)\n\tpublic static class FooTest extends BaseTest {\n\n\t\tpublic FooTest() {\n\t\t\tsuper();\n\t\t}\n\n\t\t@Test\n\t\tpublic void runFoo() {\n\t\t\t// \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\t\t}\n\n\t\t@Test\n\t\tpublic void runFooWithExpiredToken() {\n\t\t\t// \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\t\t}\n\t}\n\n\t@RunWith(AndroidJUnit4.class)\n\tpublic static class BarTest extends BaseTest {\n\n\t\tpublic BarTest() {\n\t\t\tsuper();\n\t\t}\n\n\t\t@Test\n\t\tpublic void runBar() {\n\t\t\t// \u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\n\t\t}\n\t}\n}\n```\n\n# \u30c6\u30b9\u30c8\u5b9f\u884c\n## GUI\nAndroid Studio\u3002\u5857\u308a\u3064\u3076\u3057\u3066\u3044\u308b\u7b87\u6240\u306f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u9078\u629e\u3002\n![run_on_android-studio.png](https://qiita-image-store.s3.amazonaws.com/0/44676/38b73d7e-32f2-98a6-b20b-5cb00e923b35.png)\n## CUI\n```bash\n./gradlew clean assembleDebug assembleAndroidTest\n\n# \u30c6\u30b9\u30c8\u5bfe\u8c61\u306e\u30a2\u30d7\u30ea \nadb install -r sample/build/outputs/apk/app-debug.apk\n\n# \u30c6\u30b9\u30c8\nadb install -r sample/build/outputs/apk/app-debug-androidTest-unaligned.apk\n\nadb shell am instrument -w com.example.debug.test/android.support.test.runner.AndroidJUnitRunner\n```\n\n# \u611f\u60f3\nJUnit4 \u306f JUnit3 \u306b\u6bd4\u3079\u3066\u8272\u3005\u3068\u4fbf\u5229\u306a\u30a2\u30ce\u30c6\u30fc\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3059\u306d\u3002\u3042\u307e\u308a\u77e5\u3089\u306a\u3044\u306e\u3067\u5b66\u3093\u3067\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n"}