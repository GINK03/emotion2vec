{"context": " More than 1 year has passed since last update.\u73fe\u5728\u653e\u6620\u3055\u308c\u3066\u3044\u308b\u30a2\u30cb\u30e1\u4f5c\u54c1\u306e\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3092\u30b0\u30e9\u30d5\u5316\u3059\u308banime_follower\u3068\u3044\u3046Twitter\u30dc\u30c3\u30c8\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\nhttps://twitter.com/anime_follower\n\n\u3053\u3093\u306a\u306e\n\u307e\u305f\u73fe\u5728\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3060\u3051\u3067\u306a\u304f\u3001\u4e00\u5b9a\u671f\u9593\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u5897\u52a0\u6570\u306a\u3093\u304b\u3082\u3068\u3063\u3066\u3044\u307e\u3059\u3002\n\nTwitter API\u3067\u306fTwitter\u306e\u73fe\u5728\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3057\u304b\u3068\u308c\u306a\u3044\u306e\u3067\u3001\u30d5\u30a9\u30ed\u30ef\u30fc\u5c65\u6b74\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u305f\u3081\u3066\u3001REST API\u3067\u53d6\u5f97\u3067\u304d\u308bAPI\u30b5\u30fc\u30d0\u30fc\u3092Elixir Phoenix + MySQL\u3067\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\nhttps://github.com/Project-ShangriLa/sana_server_phoenix\n\u4eca\u56de\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u5b9f\u88c5\u3067\u306a\u304fAPI\u306e\u4ed5\u69d8\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5229\u7528\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u30fb\u30fb\u304c\u30ea\u30a2\u30eb\u306b\u4e00\u822c\u516c\u958b\u3055\u308c\u3066\u3044\u308bElixir Phoenix\u88fd\u306eAPI\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u3061\u3087\u3063\u3068\u306fElixir\u30e6\u30fc\u30b6\u30fc\u306b\u3082\u53c2\u8003\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u306a\u304a\u3053\u306e\u8a18\u4e8b\u306f\u4ee5\u524d\u306eAnime API\u306e\u8a18\u4e8b\u306e\u8ffd\u52a0API\u306b\u3064\u3044\u3066\u306e\u7d39\u4ecb\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3053\u3061\u3089\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u653e\u6620\u4e2d\u306e\u30a2\u30cb\u30e1\u4f5c\u54c1\u306e\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308bAnime RESTful API \u30b5\u30fc\u30d0\u30fc\u4f5c\u308a\u307e\u3057\u305f\n\n\nShangriLa Anime Twitter API \u4ed5\u69d8\u66f8\n\n\u53d6\u308a\u6271\u3046\u30c7\u30fc\u30bf\n2014\u5e74\u4ee5\u964d\u306e\u30a2\u30cb\u30e1\u4f5c\u54c1\n(\u203b\u904e\u53bb\u306e\u3082\u8ffd\u52a0\u4e88\u5b9a\u306f\u3042\u308a)\n\nAPI Server \u30c9\u30e1\u30a4\u30f3\nhttp://api.moemoe.tokyo/\n\n\u8a8d\u8a3c\nV1\u3067\u306f\u8a8d\u8a3c\u3092\u884c\u3044\u307e\u305b\u3093\u3002\n\n\u30ec\u30fc\u30c8\u30ea\u30df\u30c3\u30c8\n\u306a\u3057\n\nGET /anime/v1/twitter/follower/status\n\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30cb\u30e1\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6700\u65b0\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3092\u8fd4\u5374\u3057\u307e\u3059\n\nRequest Parameter\n\n\n\nProperty\nValue\ndescription\nSample\n\n\n\n\naccounts\nString\n\u5bfe\u8c61\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u3057\u305f\u3082\u306e\nusagi_anime,kinmosa_anime\n\n\n\n\nResponse Body\n\n\n\nProperty\nValue\ndescription\nSample\n\n\n\n\nRequest twitter_account 1\nfollower Object\n\n\"usagi_anime\": {..}\n\n\nRequest twitter_account 2\nfollower Object\n\n\"kinmosa_anime\": {..}\n\n\nRequest twitter_account X\nfollower Object\n\n\"lovelive_staff\": {..}\n\n\n\n\nfollower Object\n\n\n\nProperty\nValue\ndescription\nSample\n\n\n\n\nfollower\nNumber\n\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\n12500\n\n\nupdated_at\nNumber\n\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u65e5\u6642 UNIX TIMESTAMP\n1446132941\n\n\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u4f8b\ncurl -v http://api.moemoe.tokyo/anime/v1/twitter/follower/status?accounts=usagi_anime,kinmosa_anime,aldnoahzero | jq .\n\n{\n  \"aldnoahzero\": {\n    \"updated_at\": 1432364949,\n    \"follower\": 51055\n  },\n  \"usagi_anime\": {\n    \"updated_at\": 1411466007,\n    \"follower\": 51345\n  },\n  \"kinmosa_anime\": {\n    \"updated_at\": 1432364961,\n    \"follower\": 57350\n  }\n}\n\n\nGET /anime/v1/twitter/follower/history\n\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30cb\u30e1\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u306e\u5c65\u6b74\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\uff08\u6700\u5927100\u5c65\u6b74\uff09\n\nRequest Parameter\n\n\n\nProperty\nValue\nRequired\ndescription\nSample\n\n\n\n\naccount\nString\n\u25ef\n\u5bfe\u8c61\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\nusagi_anime\n\n\nend_date\nNumber\n-\nunixtimestamp\u3067\u6307\u5b9a\u3057\u305f\u65e5\u6642\u3088\u308a\u904e\u53bb\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3002\u6307\u5b9a\u304c\u306a\u3044\u5834\u5408\u306f\u73fe\u5728\u65e5\u6642\u3002 where updated_at < end_date\n1446132941\n\n\n\n\nResponse Body\n\n\n\nProperty\nValue\ndescription\nSample\n\n\n\n\nArray Object\nhistory Object Array\n\u53d6\u5f97\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u7a7a\u306e\u914d\u5217\n[]\n\n\n\n\nhistory Object\n\n\n\nProperty\nValue\ndescription\nSample\n\n\n\n\nfollower\nNumber\n\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\n12500\n\n\nupdated_at\nNumber\n\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u65e5\u6642 UNIXTIMESTAMP\n1446132941\n\n\n\n\u30c7\u30fc\u30bf\u306f\u66f4\u65b0\u65e5\u6642\u306e\u964d\u9806\u3067\u30bd\u30fc\u30c8\u3055\u308c\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u4f8b1\ncurl -v http://api.moemoe.tokyo/anime/v1/twitter/follower/history?account=usagi_anime | jq .\n\n[\n  {\n    \"updated_at\": 1411466007,\n    \"follower\": 51345\n  },\n  {\n    \"updated_at\": 1410674102,\n    \"follower\": 50606\n  },\n  {\n    \"updated_at\": 1410673804,\n    \"follower\": 50607\n  },\n  {\n    \"updated_at\": 1407743045,\n    \"follower\": 46350\n  }\n]\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u4f8b2\ncurl \"http://api.moemoe.tokyo/anime/v1/twitter/follower/history?account=usagi_anime&end_date=1407562541\" | jq .\n\n[\n  {\n    \"updated_at\": 1407560663,\n    \"follower\": 46165\n  },\n  {\n    \"updated_at\": 1407558786,\n    \"follower\": 46166\n  },\n  {\n    \"updated_at\": 1407556908,\n    \"follower\": 46162\n  }\n]\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5229\u7528\u65b9\u6cd5 Ruby \u30e2\u30b8\u30e5\u30fc\u30eb\u5b9f\u88c5\u7de8\nURL\u3092\u53e9\u304f\u3060\u3051\u3067\u3059\u304c\u7c21\u5358\u306arubygems\u3092\u5b9f\u88c5\u3057rubygems.org\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\nrequire 'net/http'\nrequire 'uri'\nrequire 'json'\nrequire 'httpclient'\n\nmodule Shangrila\n\n  class Sana\n    URL = 'http://api.moemoe.tokyo/anime/v1/twitter'\n\n    def initialize\n    end\n\n    # @param [Array] accounts \u30c7\u30fc\u30bf\u53d6\u5f97\u5bfe\u8c61\u306e\u30a2\u30cb\u30e1Twitter\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\n    # @return [Hash] \u30a2\u30ab\u30a6\u30f3\u30c8\u7fa4\u3092\u30ad\u30fc\u3068\u3057\u305f\u30cf\u30c3\u30b7\u30e5\n    def follower_status(accounts)\n      response = HTTPClient.get(sprintf('%s/follower/status?accounts=%s', URL, accounts.join(',')))\n      JSON.load(response.body)\n    end\n\n    # @param [Array] account \u30c7\u30fc\u30bf\u53d6\u5f97\u5bfe\u8c61\u306e\u30a2\u30cb\u30e1Twitter\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\n    # @param [int] end_date \u691c\u7d22\u5bfe\u8c61\u306e\u7d42\u4e86\u65e5\u6642 where update_at < end_date)\n    # @return [Array] \u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3068\u66f4\u65b0\u65e5\u6642\u306e\u30cf\u30c3\u30b7\u30e5\u306e\u914d\u5217\n    def follower_history(account, end_date = nil)\n      response = nil\n      if end_date.nil?\n        response = HTTPClient.get(sprintf('%s/follower/history?account=%s', URL, account))\n      else\n        response = HTTPClient.get(sprintf('%s/follower/history?account=%s&end_date=%d', URL, account, end_date))\n      end\n\n      JSON.load(response.body)\n    end\n\n  end\n\nend\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5229\u7528\u65b9\u6cd5 Ruby \u30e2\u30b8\u30e5\u30fc\u30eb\u4f7f\u7528\u7de8\n\nGemfile\n# A sample Gemfile\nsource \"https://rubygems.org\"\n\ngem 'shangrila'\n\n\n\nfollower_status.rb\n\u6307\u5b9a\u3057\u305f\u5e74&\u30af\u30fc\u30eb\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u30ea\u30b9\u30c8\u3092\u8868\u793a\n\nfollower_status.rb\nrequire 'shangrila'\n\nyear = ARGV[0]\ncours = ARGV[1]\n\n# \u6307\u5b9a\u3057\u305f\u5e74\u3001\u30af\u30fc\u30eb\u306e\u30a2\u30cb\u30e1\u516c\u5f0fTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u53d6\u5f97(Sora[Master] API)\nmaster =  Shangrila::Sora.new().get_flat_data(year, cours, ['twitter_account'])\n\ntwitter_account_list = master.flatten\n\n# \u6307\u5b9a\u3057\u305fTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3092\u53d6\u5f97(Sana[Twitter] API)\nfollower_status = Shangrila::Sana.new().follower_status(twitter_account_list)\n\nfollower_status.each do |key,val|\n  puts sprintf('%20s %d', key, val['follower'])\nend\n\n\n\n\u5b9f\u884c\n bundle exe ruby follower_status.rb 2015 4\n\n\u7d50\u679c\n     ketsuekigatakun 5659\n         anime_lance 8685\n            DwD_info 22470\n          g_tekketsu 35960\n      DDhokuto_anime 2572\n      owarino_seraph 95786\n      anime_kagewani 1625\n              te_kyu 12599\n         rainy_cocoa 4224\n        hokuto_15aji 11417\n       fafnerproject 29933\n     Anime_W_Trigger 41316\n          onsenyosei 2685\n         usagi_anime 134950\n            ho_anime 7633\n         f_noitamina 12723\n     nisioisin_anime 131155\n            hstar_mu 26364\n        cometlucifer 8161\n     anime_kyojinchu 30973\n        SakurakoKujo 10738\n     UtawareOfficial 14501\n         shinmaimaou 14722\n     animehaikyu_com 286058\n      anime_yuruyuri 92904\n           ittoshura 15200\n           anime_k11 92573\n           opm_anime 52513\n     animekindaichiR 5132\n        ariaAA_anime 11440\n        asterisk_war 15870\n        anime_syomin 11946\n      35shoutai_info 7946\n        anime_somera 2553\n     Hackadoll_anime 7120\n        lupinIII_4th 20991\n      anime_dialover 68508\n         conrevoinfo 8273\n           anime_ybj 9113\n       valkyriedrive 6383\n        komori_anime 2570\n         noragami_PR 81402\n         osomatsu_PR 129156\n\n\u3053\u306e\u60c5\u5831\u3092\u5143\u306b\u3053\u3046\u3044\u3046\u30b0\u30e9\u30d5\u306f\u3059\u3050\u4f5c\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\n\n\nfollower_history.rb\n\u6307\u5b9a\u3057\u305f\u30a2\u30cb\u30e1\u516c\u5f0fTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u5c65\u6b74\u3092\u53d6\u5f97\n\nfollower_history.rb\nrequire 'shangrila'\n\naccount = ARGV[0]\nend_date_unixtimestamp = ARGV[1]\n\n#\u6307\u5b9a\u3057\u305f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u5c65\u6b74\u3092\u53d6\u5f97\nhistory_list = Shangrila::Sana.new().follower_history(account, end_date_unixtimestamp)\n\nhistory_list.each do |history|\n puts sprintf('%d %s %d', history['follower'], Time.at(history['updated_at']).strftime('%Y-%m-%d %H:%M:%S'), history['updated_at'] )\nend\n\n\n\u5b9f\u884c\n bundle exe ruby follower_history.rb usagi_anime\n\nor \n bundle exe ruby follower_history.rb usagi_anime 1446901208\n\n\u7d50\u679c\n134964 2015-11-10 00:30:07 1447083007\n134942 2015-11-10 00:00:07 1447081207\n134924 2015-11-09 23:30:06 1447079406\n134900 2015-11-09 23:00:07 1447077607\n134882 2015-11-09 22:30:07 1447075807\n134868 2015-11-09 22:00:07 1447074007\n134851 2015-11-09 21:30:06 1447072206\n134838 2015-11-09 21:00:07 1447070407\n134824 2015-11-09 20:30:06 1447068606\n134809 2015-11-09 20:00:06 1447066806\n134791 2015-11-09 19:30:07 1447065007\n134766 2015-11-09 19:00:06 1447063206\n134759 2015-11-09 18:30:07 1447061407\n134755 2015-11-09 18:00:07 1447059607\n134747 2015-11-09 17:30:06 1447057806\n134745 2015-11-09 17:00:06 1447056006\n134741 2015-11-09 16:30:06 1447054206\n134734 2015-11-09 16:00:07 1447052407\n134730 2015-11-09 15:30:07 1447050607\n134724 2015-11-09 15:00:06 1447048806\n134720 2015-11-09 14:30:06 1447047006\n134718 2015-11-09 14:00:07 1447045207\n134718 2015-11-09 13:30:06 1447043406\n134715 2015-11-09 13:00:06 1447041606\n134711 2015-11-09 12:30:06 1447039806\n134712 2015-11-09 12:00:06 1447038006\n\n\u6700\u5927100\u4ef6\u3001\u8fd4\u5374\u3057\u307e\u3059\u3002\n\u305d\u308c\u4ee5\u4e0a\u904e\u53bb\u306e\u5c65\u6b74\u304c\u898b\u305f\u3044\u5834\u5408\u306f\u3001\u914d\u5217\u306e\u6700\u5f8c\u306eUNIX TIMESTAMP\u3092\u5f15\u6570\u306b\u6e21\u3057\u307e\u3059\u3002\n\nShangriLa Anime API\u306e\u53c2\u8003\u60c5\u5831\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\nhttps://github.com/Project-ShangriLa/shangrila_api_doc\n\u73fe\u5728\u653e\u6620\u3055\u308c\u3066\u3044\u308b\u30a2\u30cb\u30e1\u4f5c\u54c1\u306e\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3092\u30b0\u30e9\u30d5\u5316\u3059\u308banime_follower\u3068\u3044\u3046Twitter\u30dc\u30c3\u30c8\u3092\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\nhttps://twitter.com/anime_follower\n\n\n![CTYbAcsUEAA2Q-r.png-large.png](https://qiita-image-store.s3.amazonaws.com/0/36931/a0e14037-8602-12e1-5b2d-35800404ad63.png)\n\n\n\u3053\u3093\u306a\u306e\n\n\u307e\u305f\u73fe\u5728\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3060\u3051\u3067\u306a\u304f\u3001\u4e00\u5b9a\u671f\u9593\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u5897\u52a0\u6570\u306a\u3093\u304b\u3082\u3068\u3063\u3066\u3044\u307e\u3059\u3002\n![CTYUl3kUkAA2BMz.png](https://qiita-image-store.s3.amazonaws.com/0/36931/21c0fd74-e9b0-67b8-dfa4-f68b66078142.png)\n\n\nTwitter API\u3067\u306fTwitter\u306e\u73fe\u5728\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3057\u304b\u3068\u308c\u306a\u3044\u306e\u3067\u3001\u30d5\u30a9\u30ed\u30ef\u30fc\u5c65\u6b74\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u305f\u3081\u3066\u3001REST API\u3067\u53d6\u5f97\u3067\u304d\u308bAPI\u30b5\u30fc\u30d0\u30fc\u3092Elixir Phoenix + MySQL\u3067\u4f5c\u6210\u3057\u307e\u3057\u305f\u3002\n\n\nhttps://github.com/Project-ShangriLa/sana_server_phoenix\n\n\u4eca\u56de\u306f\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u5b9f\u88c5\u3067\u306a\u304fAPI\u306e\u4ed5\u69d8\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5229\u7528\u306b\u3064\u3044\u3066\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u30fb\u30fb\u304c\u30ea\u30a2\u30eb\u306b\u4e00\u822c\u516c\u958b\u3055\u308c\u3066\u3044\u308bElixir Phoenix\u88fd\u306eAPI\u30b5\u30fc\u30d0\u30fc\u3068\u3057\u3066\u3061\u3087\u3063\u3068\u306fElixir\u30e6\u30fc\u30b6\u30fc\u306b\u3082\u53c2\u8003\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u306a\u304a\u3053\u306e\u8a18\u4e8b\u306f\u4ee5\u524d\u306eAnime API\u306e\u8a18\u4e8b\u306e\u8ffd\u52a0API\u306b\u3064\u3044\u3066\u306e\u7d39\u4ecb\u306b\u306a\u308a\u307e\u3059\u306e\u3067\u3053\u3061\u3089\u3082\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n[\u653e\u6620\u4e2d\u306e\u30a2\u30cb\u30e1\u4f5c\u54c1\u306e\u60c5\u5831\u3092\u63d0\u4f9b\u3059\u308bAnime RESTful API \u30b5\u30fc\u30d0\u30fc\u4f5c\u308a\u307e\u3057\u305f](http://qiita.com/AKB428/items/64938febfd4dcf6ea698)\n\n![shangriLa.png](https://qiita-image-store.s3.amazonaws.com/0/36931/d0a79b38-275a-a87b-a44e-8a69c5b0c6ec.png)\n\n\n\n## ShangriLa Anime Twitter API \u4ed5\u69d8\u66f8\n\n### \u53d6\u308a\u6271\u3046\u30c7\u30fc\u30bf\n\n2014\u5e74\u4ee5\u964d\u306e\u30a2\u30cb\u30e1\u4f5c\u54c1\n(\u203b\u904e\u53bb\u306e\u3082\u8ffd\u52a0\u4e88\u5b9a\u306f\u3042\u308a)\n\n\n### API Server \u30c9\u30e1\u30a4\u30f3\n\nhttp://api.moemoe.tokyo/\n\n### \u8a8d\u8a3c\n\nV1\u3067\u306f\u8a8d\u8a3c\u3092\u884c\u3044\u307e\u305b\u3093\u3002\n\n\n### \u30ec\u30fc\u30c8\u30ea\u30df\u30c3\u30c8\n\n\u306a\u3057\n\n### GET /anime/v1/twitter/follower/status\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30cb\u30e1\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u6700\u65b0\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3092\u8fd4\u5374\u3057\u307e\u3059\n\n#### Request Parameter\n\n| Property     | Value               |description|Sample|\n| :------------ | :------------------ |:--------|:-------|\n| accounts    |String|\u5bfe\u8c61\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30ab\u30f3\u30de\u533a\u5207\u308a\u306b\u3057\u305f\u3082\u306e|usagi_anime,kinmosa_anime|\n\n\n#### Response Body\n\n| Property     | Value               |description|Sample|\n| :------------ | :------------------ |:--------|:-------|\n| Request twitter_account 1|follower Object||\"usagi_anime\": {..}|\n| Request twitter_account 2|follower Object||\"kinmosa_anime\": {..}|\n| Request twitter_account X|follower Object||\"lovelive_staff\": {..}|\n\n##### follower Object\n\n| Property     | Value               |description|Sample|\n| :------------ | :------------------ |:--------|:-------|\n| follower    |Number|\u30d5\u30a9\u30ed\u30ef\u30fc\u6570|12500|\n| updated_at   |Number|\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u65e5\u6642 UNIX TIMESTAMP|1446132941|\n\n#### \u30ec\u30b9\u30dd\u30f3\u30b9\u4f8b\n\n```\ncurl -v http://api.moemoe.tokyo/anime/v1/twitter/follower/status?accounts=usagi_anime,kinmosa_anime,aldnoahzero | jq .\n```\n\n```json\n{\n  \"aldnoahzero\": {\n    \"updated_at\": 1432364949,\n    \"follower\": 51055\n  },\n  \"usagi_anime\": {\n    \"updated_at\": 1411466007,\n    \"follower\": 51345\n  },\n  \"kinmosa_anime\": {\n    \"updated_at\": 1432364961,\n    \"follower\": 57350\n  }\n}\n```\n\n\n\n### GET /anime/v1/twitter/follower/history\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u3067\u6307\u5b9a\u3055\u308c\u305f\u30a2\u30cb\u30e1\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u306e\u5c65\u6b74\u3092\u8fd4\u5374\u3057\u307e\u3059\u3002\uff08\u6700\u5927100\u5c65\u6b74\uff09\n\n#### Request Parameter\n\n\n| Property     |Value |Required|description|Sample|\n| :------------|:-----|:-------|:----------|:-----|\n| account    |String|\u25ef|\u5bfe\u8c61\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8|usagi_anime|\n| end_date |Number|-|unixtimestamp\u3067\u6307\u5b9a\u3057\u305f\u65e5\u6642\u3088\u308a\u904e\u53bb\u306e\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3002\u6307\u5b9a\u304c\u306a\u3044\u5834\u5408\u306f\u73fe\u5728\u65e5\u6642\u3002 where updated_at < end_date |1446132941|\n\n\n#### Response Body\n\n| Property     | Value               |description|Sample|\n| :------------ | :------------------ |:--------|:-------|\n| Array Object|history Object Array|\u53d6\u5f97\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u7a7a\u306e\u914d\u5217|[]|\n\n\n##### history Object\n\n| Property     | Value               |description|Sample|\n| :------------ | :------------------ |:--------|:-------|\n| follower    |Number|\u30d5\u30a9\u30ed\u30ef\u30fc\u6570|12500|\n| updated_at   |Number|\u30c7\u30fc\u30bf\u306e\u66f4\u65b0\u65e5\u6642 UNIXTIMESTAMP|1446132941|\n\n\u30c7\u30fc\u30bf\u306f\u66f4\u65b0\u65e5\u6642\u306e\u964d\u9806\u3067\u30bd\u30fc\u30c8\u3055\u308c\u683c\u7d0d\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n#### \u30ec\u30b9\u30dd\u30f3\u30b9\u4f8b1\n\n```\ncurl -v http://api.moemoe.tokyo/anime/v1/twitter/follower/history?account=usagi_anime | jq .\n```\n\n```json\n[\n  {\n    \"updated_at\": 1411466007,\n    \"follower\": 51345\n  },\n  {\n    \"updated_at\": 1410674102,\n    \"follower\": 50606\n  },\n  {\n    \"updated_at\": 1410673804,\n    \"follower\": 50607\n  },\n  {\n    \"updated_at\": 1407743045,\n    \"follower\": 46350\n  }\n]\n```\n\n\n#### \u30ec\u30b9\u30dd\u30f3\u30b9\u4f8b2\n\n```\ncurl \"http://api.moemoe.tokyo/anime/v1/twitter/follower/history?account=usagi_anime&end_date=1407562541\" | jq .\n```\n\n```json\n[\n  {\n    \"updated_at\": 1407560663,\n    \"follower\": 46165\n  },\n  {\n    \"updated_at\": 1407558786,\n    \"follower\": 46166\n  },\n  {\n    \"updated_at\": 1407556908,\n    \"follower\": 46162\n  }\n]\n```\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5229\u7528\u65b9\u6cd5 Ruby \u30e2\u30b8\u30e5\u30fc\u30eb\u5b9f\u88c5\u7de8\n\nURL\u3092\u53e9\u304f\u3060\u3051\u3067\u3059\u304c\u7c21\u5358\u306arubygems\u3092\u5b9f\u88c5\u3057rubygems.org\u306b\u914d\u7f6e\u3057\u3066\u3044\u307e\u3059\n\n```ruby\nrequire 'net/http'\nrequire 'uri'\nrequire 'json'\nrequire 'httpclient'\n\nmodule Shangrila\n\n  class Sana\n    URL = 'http://api.moemoe.tokyo/anime/v1/twitter'\n\n    def initialize\n    end\n\n    # @param [Array] accounts \u30c7\u30fc\u30bf\u53d6\u5f97\u5bfe\u8c61\u306e\u30a2\u30cb\u30e1Twitter\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\n    # @return [Hash] \u30a2\u30ab\u30a6\u30f3\u30c8\u7fa4\u3092\u30ad\u30fc\u3068\u3057\u305f\u30cf\u30c3\u30b7\u30e5\n    def follower_status(accounts)\n      response = HTTPClient.get(sprintf('%s/follower/status?accounts=%s', URL, accounts.join(',')))\n      JSON.load(response.body)\n    end\n\n    # @param [Array] account \u30c7\u30fc\u30bf\u53d6\u5f97\u5bfe\u8c61\u306e\u30a2\u30cb\u30e1Twitter\u516c\u5f0f\u30a2\u30ab\u30a6\u30f3\u30c8\n    # @param [int] end_date \u691c\u7d22\u5bfe\u8c61\u306e\u7d42\u4e86\u65e5\u6642 where update_at < end_date)\n    # @return [Array] \u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3068\u66f4\u65b0\u65e5\u6642\u306e\u30cf\u30c3\u30b7\u30e5\u306e\u914d\u5217\n    def follower_history(account, end_date = nil)\n      response = nil\n      if end_date.nil?\n        response = HTTPClient.get(sprintf('%s/follower/history?account=%s', URL, account))\n      else\n        response = HTTPClient.get(sprintf('%s/follower/history?account=%s&end_date=%d', URL, account, end_date))\n      end\n\n      JSON.load(response.body)\n    end\n\n  end\n\nend\n```\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u306e\u5229\u7528\u65b9\u6cd5 Ruby \u30e2\u30b8\u30e5\u30fc\u30eb\u4f7f\u7528\u7de8\n\n```ruby:Gemfile\n# A sample Gemfile\nsource \"https://rubygems.org\"\n\ngem 'shangrila'\n```\n\n### follower_status.rb\n\n\u6307\u5b9a\u3057\u305f\u5e74&\u30af\u30fc\u30eb\u306eTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u30ea\u30b9\u30c8\u3092\u8868\u793a\n\n```ruby:follower_status.rb\nrequire 'shangrila'\n\nyear = ARGV[0]\ncours = ARGV[1]\n\n# \u6307\u5b9a\u3057\u305f\u5e74\u3001\u30af\u30fc\u30eb\u306e\u30a2\u30cb\u30e1\u516c\u5f0fTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u53d6\u5f97(Sora[Master] API)\nmaster =  Shangrila::Sora.new().get_flat_data(year, cours, ['twitter_account'])\n\ntwitter_account_list = master.flatten\n\n# \u6307\u5b9a\u3057\u305fTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u6570\u3092\u53d6\u5f97(Sana[Twitter] API)\nfollower_status = Shangrila::Sana.new().follower_status(twitter_account_list)\n\nfollower_status.each do |key,val|\n  puts sprintf('%20s %d', key, val['follower'])\nend\n\n```\n\n\n\u5b9f\u884c\n\n```\n bundle exe ruby follower_status.rb 2015 4\n```\n\n\u7d50\u679c\n\n```\n     ketsuekigatakun 5659\n         anime_lance 8685\n            DwD_info 22470\n          g_tekketsu 35960\n      DDhokuto_anime 2572\n      owarino_seraph 95786\n      anime_kagewani 1625\n              te_kyu 12599\n         rainy_cocoa 4224\n        hokuto_15aji 11417\n       fafnerproject 29933\n     Anime_W_Trigger 41316\n          onsenyosei 2685\n         usagi_anime 134950\n            ho_anime 7633\n         f_noitamina 12723\n     nisioisin_anime 131155\n            hstar_mu 26364\n        cometlucifer 8161\n     anime_kyojinchu 30973\n        SakurakoKujo 10738\n     UtawareOfficial 14501\n         shinmaimaou 14722\n     animehaikyu_com 286058\n      anime_yuruyuri 92904\n           ittoshura 15200\n           anime_k11 92573\n           opm_anime 52513\n     animekindaichiR 5132\n        ariaAA_anime 11440\n        asterisk_war 15870\n        anime_syomin 11946\n      35shoutai_info 7946\n        anime_somera 2553\n     Hackadoll_anime 7120\n        lupinIII_4th 20991\n      anime_dialover 68508\n         conrevoinfo 8273\n           anime_ybj 9113\n       valkyriedrive 6383\n        komori_anime 2570\n         noragami_PR 81402\n         osomatsu_PR 129156\n```\n\n\u3053\u306e\u60c5\u5831\u3092\u5143\u306b\u3053\u3046\u3044\u3046\u30b0\u30e9\u30d5\u306f\u3059\u3050\u4f5c\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\n\n\n![CTYavkjUsAA-I3A.png-large.png](https://qiita-image-store.s3.amazonaws.com/0/36931/d23b6d5d-2399-e0c5-5bd6-916de6f16d43.png)\n\n\n\n### follower_history.rb\n\n\u6307\u5b9a\u3057\u305f\u30a2\u30cb\u30e1\u516c\u5f0fTwitter\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u5c65\u6b74\u3092\u53d6\u5f97\n\n\n```ruby:follower_history.rb\nrequire 'shangrila'\n\naccount = ARGV[0]\nend_date_unixtimestamp = ARGV[1]\n\n#\u6307\u5b9a\u3057\u305f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d5\u30a9\u30ed\u30ef\u30fc\u5c65\u6b74\u3092\u53d6\u5f97\nhistory_list = Shangrila::Sana.new().follower_history(account, end_date_unixtimestamp)\n\nhistory_list.each do |history|\n puts sprintf('%d %s %d', history['follower'], Time.at(history['updated_at']).strftime('%Y-%m-%d %H:%M:%S'), history['updated_at'] )\nend\n```\n\n\n\n\u5b9f\u884c\n\n```\n bundle exe ruby follower_history.rb usagi_anime\n```\n\nor \n\n```\n bundle exe ruby follower_history.rb usagi_anime 1446901208\n```\n\n\u7d50\u679c\n\n```\n134964 2015-11-10 00:30:07 1447083007\n134942 2015-11-10 00:00:07 1447081207\n134924 2015-11-09 23:30:06 1447079406\n134900 2015-11-09 23:00:07 1447077607\n134882 2015-11-09 22:30:07 1447075807\n134868 2015-11-09 22:00:07 1447074007\n134851 2015-11-09 21:30:06 1447072206\n134838 2015-11-09 21:00:07 1447070407\n134824 2015-11-09 20:30:06 1447068606\n134809 2015-11-09 20:00:06 1447066806\n134791 2015-11-09 19:30:07 1447065007\n134766 2015-11-09 19:00:06 1447063206\n134759 2015-11-09 18:30:07 1447061407\n134755 2015-11-09 18:00:07 1447059607\n134747 2015-11-09 17:30:06 1447057806\n134745 2015-11-09 17:00:06 1447056006\n134741 2015-11-09 16:30:06 1447054206\n134734 2015-11-09 16:00:07 1447052407\n134730 2015-11-09 15:30:07 1447050607\n134724 2015-11-09 15:00:06 1447048806\n134720 2015-11-09 14:30:06 1447047006\n134718 2015-11-09 14:00:07 1447045207\n134718 2015-11-09 13:30:06 1447043406\n134715 2015-11-09 13:00:06 1447041606\n134711 2015-11-09 12:30:06 1447039806\n134712 2015-11-09 12:00:06 1447038006\n```\n\n\u6700\u5927100\u4ef6\u3001\u8fd4\u5374\u3057\u307e\u3059\u3002\n\u305d\u308c\u4ee5\u4e0a\u904e\u53bb\u306e\u5c65\u6b74\u304c\u898b\u305f\u3044\u5834\u5408\u306f\u3001\u914d\u5217\u306e\u6700\u5f8c\u306eUNIX TIMESTAMP\u3092\u5f15\u6570\u306b\u6e21\u3057\u307e\u3059\u3002\n\n\n## ShangriLa Anime API\u306e\u53c2\u8003\u60c5\u5831\n\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\n\nhttps://github.com/Project-ShangriLa/shangrila_api_doc\n", "tags": ["Ruby", "Elixir", "Phoenix"]}