{"context": "\n\n\u306f\u3058\u3081\u306b\nMVCP: Model, View, Controller, Presenter\u306e\u7ffb\u8a33\u3067\u3059\u3002\n\u696d\u52d9\u3067MVCP\u306b\u89e6\u308c\u3066\u304a\u304d\u306a\u304c\u3089\u3001\u304d\u3061\u3093\u3068\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068\u611f\u3058\u3001\u5c11\u3057\u30b0\u30b0\u3063\u305f\u3068\u3053\u308d\u624b\u9803\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u3001\u7ffb\u8a33\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002(\u8aa4\u8a33\u3057\u3066\u3044\u305f\u3089\u30b9\u30df\u30de\u30bb\u30f3\u3002\u7b46\u8005\u306e\u82f1\u8a9e\u7ffb\u8a33\u80fd\u529b\u306f\u9ad8\u304f\u306f\u306a\u3044\u3067\u3059\u3002)\n\u82f1\u8a9e\u306e\u7ffb\u8a33\u7df4\u7fd2\u3082\u517c\u306d\u3066\u3044\u307e\u3059:)\n\nIntroduction - \u306f\u3058\u3081\u306b\n\nModel, View, Controller (MVC). This is a pretty standard architectural pattern and has been in use when developing software since the early 1970's.\n\nModel, View, Controller (MVC)\u3002\u3053\u308c\u306f\u6a19\u6e96\u7684\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3067\u3042\u308a\u30011970\u5e74\u4ee3\u521d\u982d\u304b\u3089\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3059\u308b\u969b\u306b\u4f7f\u308f\u308c\u3066\u304d\u305f\u3002\n\nThe basic principle of the pattern is to separate the different areas of logic from your application into distinct compartments.\n\n\u305d\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u57fa\u672c\u539f\u5247\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u7570\u306a\u308b\u30ed\u30b8\u30c3\u30af\u306e\u9818\u57df\u3092\u660e\u78ba\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u5206\u96e2\u3059\u308b\u3053\u3068\u3060\u3002\n\nModel\n\nThe model holds your business data. Typically this will be data that is pulled in from a database or external data service of some kind.\n\nmodel \u306f\u30d3\u30b8\u30cd\u30b9\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3059\u308b\u3002\u5178\u578b\u7684\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3084\u3042\u308b\u7a2e\u985e\u306e\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30bf\u304b\u3089\u5f15\u3063\u5f35\u3063\u3066\u304f\u308b\u30c7\u30fc\u30bf\u3060\u3002\n\nView\n\nThe view is your user interface. This is what the client will interact with when using your application.\n\nview \u306f\u3042\u306a\u305f\u306e\u30e6\u30fc\u30b6\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u3042\u308b\u3002\u3053\u308c\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u969b\u306b\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u76f8\u4e92\u4f5c\u7528\u3059\u308b\u4f55\u304b\u3060\u3002\n\nController\n\nThe controller is the boss. He sits at the top and delegates responsibilities to either the view or the model.\n\ncontroller \u306f\u3001\u30dc\u30b9\u3067\u3042\u308b\u3002\u5f7c\u306f\u6700\u4e0a\u4f4d\u306b\u5b58\u5728\u3057\u3001\u8cac\u4efb\u3092 view \u3084 model \u306b\u59d4\u8b72\u3059\u308b\u3002\n\nMixed definitions - \u77db\u76fe\u3057\u305f\u5b9a\u7fa9\n\nThere seems to be a dispute in the dev community regarding how the responsibilities should be divided.\n\n\u958b\u767a\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u306f\u3069\u306e\u3088\u3046\u306b\u8cac\u4efb\u3092\u5206\u5272\u3059\u3079\u304d\u304b\u306b\u95a2\u3057\u3066\u8ad6\u4e89\u306b\u306a\u308b\u3088\u3046\u3060\u3002\n\nSome feel a 'fat controller' principle is best (where by the controller tells the model not only when but where and how it should get its data).\n\n\u4f55\u4eba\u304b\u306f '\u592a\u3063\u305fcontroller' \u539f\u5247\u304c\u30d9\u30b9\u30c8\u3060\u3068\u611f\u3058\u308b(\u305d\u308c\u306b\u3088\u3063\u3066 controller \u306f model \u306b\u30c7\u30fc\u30bf\u3092\u3044\u3064\u3001\u3069\u3053\u306b\u3001\u305d\u3057\u3066\u3069\u306e\u3088\u3046\u306b\u53d6\u5f97\u3059\u3079\u304d\u304b\u3092\u4f1d\u3048\u308b)\u3002\n\nMy understanding of the pattern is that it was designed so that the Controller stays 'skinny'. It may be the boss, but like most good bosses it doesn't try and stay in control. It knows the best team member for the job at hand and delegates accordingly.\n\n\u79c1\u306f\u3001Controller \u306f 'skinny' \u306b\u3068\u3069\u307e\u308b\u3088\u3046\u8a2d\u8a08\u3055\u308c\u305f\u3068\u8003\u3048\u3066\u3044\u308b\u3002\u305d\u308c\u306f\u30dc\u30b9\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u652f\u914d\u3057\u3088\u3046\u3068\u306f\u3057\u306a\u3044\u5927\u90e8\u5206\u306e\u826f\u3044\u30dc\u30b9\u3060\u3002\u305d\u306e\u30dc\u30b9\u306f\u3001\u4ed5\u4e8b\u306b\u5bfe\u3057\u3066\u6700\u3082\u826f\u3044\u8eab\u8fd1\u306a\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u3092\u77e5\u3063\u3066\u3044\u3066\u3001\u9069\u5207\u306b\u59d4\u8b72\u3059\u308b\u3002\n\nThis is also good code design because the Controller doesn't have too much context (i.e. it doesn't know everything, which means it'll be easier to maintain and scale).\n\nController \u306f\u591a\u304f\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u3082\u307e\u305f\u826f\u3044\u30b3\u30fc\u30c9\u8a2d\u8a08\u3060(\u3059\u306a\u308f\u3061\u3001Controller \u306f\u5168\u3066\u3092\u77e5\u3063\u3066\u304a\u3089\u305a\u3001\u305d\u308c\u304c\u610f\u5473\u3059\u308b\u306e\u306f\u4fdd\u5b88\u3084\u30b9\u30b1\u30fc\u30eb\u304c\u3057\u6613\u3044\u3053\u3068\u3060\u308d\u3046)\u3002\n\nGod Controller - \u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n\nThere are a few ways we can implement an MVC pattern, one is known as the 'God Controller'.\n\nMVC\u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u3001\u305d\u306e\u3072\u3068\u3064\u306f '\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u3068\u3057\u3066\u77e5\u308c\u3066\u3044\u308b\u3002\n\nThis is where a single Controller exists and it oversees everything no matter what was requested by the client.\n\n\u3053\u308c\u306f\u5358\u4e00\u306e Controller \u304c\u5b58\u5728\u3057\u3001\u304b\u3064\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3082\u306e\u304c\u4f55\u3067\u3042\u308d\u3046\u3068\u5168\u3066\u76e3\u8996\u3059\u308b\u3002\n\nFor example, the single Controller would be passed the request from the client (usually handled by a custom routing application, and most frameworks will provide their own).\n\n\u4f8b\u3048\u3070\u3001\u5358\u4e00\u306e Controller \u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6e21\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u306a\u3044(\u901a\u5e38\u3001\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u6271\u308f\u308c\u3001\u591a\u304f\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u81ea\u8eab\u3067\u63d0\u4f9b\u3057\u3066\u3044\u308b)\u3002\n\nThe Controller would determine what type of request was made (if the request was for a 'contact' page then it'll make a request for the Contact model, or if the request was for the 'about' page then it'll make a request for the About model).\n\nController \u306f\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7a2e\u985e\u304c\u4f55\u3067\u69cb\u7bc9\u3055\u308c\u305f\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044(\u30ea\u30af\u30a8\u30b9\u30c8\u304c 'contact' \u30da\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u3067\u3042\u3063\u305f\u5834\u5408\u3001Contact model \u306b\u5bfe\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3060\u308d\u3046\u3057\u3001'about' \u30da\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u3067\u3042\u3063\u305f\u5834\u5408\u3001About model \u306b\u5bfe\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3060\u308d\u3046)\u3002\n\nOnce it knows the type of request it'll proceed to get the relevant model data and assign it to some View variables and render the required View.\n\n\u4e00\u65e6\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7a2e\u985e\u3092\u77e5\u308b\u3068\u3001\u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3092\u958b\u59cb\u3057\u3001\u305d\u306e\u30c7\u30fc\u30bf\u3092\u3044\u304f\u3064\u304b\u306e View \u5909\u6570\u306b\u5272\u308a\u5f53\u3066\u3001\u5fc5\u8981\u3068\u3055\u308c\u308b View \u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u3002\n\nProblems - \u554f\u984c\n\nNow there are two problems with this implementation:\n\n\u3055\u3066\u3001\u3053\u306e\u5b9f\u88c5\u306b\u306f2\u3064\u306e\u554f\u984c\u304c\u3042\u308b:\n\n\nmaintainability\nscalability\n\n\n\n\u4fdd\u5b88\u6027\n\u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3\n\n\nAs mentioned before, this comes down to bad code design. The 'God Controller' knows too much and tries to do too much. Once you start getting above a few different types of requests you'll start to understand what a mess the code can become by having multiple branches for different routing scenarios.\n\n\u524d\u8ff0\u3057\u305f\u901a\u308a\u3001\u3053\u308c\u306f\u60aa\u3044\u30b3\u30fc\u30c9\u8a2d\u8a08\u306b\u6210\u308a\u4e0b\u304c\u308b\u3002'\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u306f\u77e5\u308a\u904e\u304e\u3067\u3042\u308a\u3001\u304b\u3064\u3001\u3084\u308d\u3046\u3068\u3057\u904e\u304e\u3067\u3042\u308b\u3002\u4e00\u65e6\u4e0a\u8ff0\u306e\u3044\u304f\u3064\u304b\u306e\u7570\u306a\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7a2e\u985e\u3092\u53d6\u5f97\u3059\u308b\u3068\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30ca\u30ea\u30aa\u306b\u5bfe\u3057\u8907\u6570\u306e\u5206\u5c90\u3092\u6301\u3064\u3053\u3068\u306b\u3088\u308a\u3001\u5927\u91cf\u306e\u30b3\u30fc\u30c9\u304c\u3069\u3046\u306a\u308b\u304b\u3092\u7406\u89e3\u3057\u59cb\u3081\u308b\u3002\n\nI work as an engineer for the BBC News team in London and we had suffered from this exact set-up (hence the lessons the team has learnt and improved upon are the reason why I'm able to write this post for you now).\n\n\u79c1\u306f\u30ed\u30f3\u30c9\u30f3\u3067BBC\u30cb\u30e5\u30fc\u30b9\u306e\u30c1\u30fc\u30e0\u30a8\u30f3\u30b8\u30cb\u30a2\u3068\u3057\u3066\u50cd\u3044\u3066\u304a\u308a\u3001\u307e\u3055\u306b\u3053\u306e\u3088\u3046\u306a\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u88ab\u5bb3\u3092\u53d7\u3051\u3066\u304d\u305f(\u305d\u308c\u6545\u3001\u30c1\u30fc\u30e0\u304c\u5b66\u3073\u3001\u304b\u3064\u6539\u5584\u3057\u305f\u6559\u8a13\u304c\u3001\u79c1\u304c\u3053\u3046\u3057\u3066\u3042\u306a\u305f\u306b\u3053\u306e\u6295\u7a3f\u3092\u66f8\u304d\u5f97\u308b\u7406\u7531\u3060)\u3002\n\nSkinny Controller\u3000- \u30b9\u30ad\u30cb\u30fc\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n\nThere is another approach we can take which is known as the 'skinny controller' approach.\n\n\u4ed6\u306b\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u306f\u3001'\u30b9\u30ad\u30cb\u30fc\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u77e5\u3089\u308c\u308b\u3082\u306e\u304c\u3042\u308b\u3002\n\nThe way it works is that a request will come into the application and will get passed to a page specific Controller.\n\n\u305d\u306e\u52d5\u4f5c\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3084\u3063\u3066\u304f\u308b\u3068\u3001\u30da\u30fc\u30b8\u7279\u6709\u306e Contller \u306b\u6e21\u3059\u3053\u3068\u3067\u3042\u308b\u3002\n\nThe page specific Controller will call the relevant Model and will assign the returned data to a few View variables.\n\n\u30da\u30fc\u30b8\u7279\u6709\u306e Controller \u306f\u95a2\u9023\u3057\u305f Model \u3092\u547c\u3073\u51fa\u3057\u3001\u3044\u304f\u3064\u304b\u306e View \u5909\u6570\u306b\u8fd4\u5374\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u5272\u308a\u5f53\u3066\u308b\u3002\n\nThe Controller will then render a View and pass through the variables into the View for it to use.\n\n\u7d9a\u3044\u3066\u3001Controller \u306f View \u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3001\u305d\u3057\u3066 View \u304c\u4f7f\u3046\u5909\u6570\u3092\u6e21\u3059\u3002\n\nAs you can see, this isn't that different from the 'God Controller' with the exception that the Routing part of the application now will have extra logic which determines which specific Controller should be loaded. This is a better situation to be in because you're making your code base both more maintainable and scalable.\n\n\u3054\u89a7\u306e\u901a\u308a\u3001\u3053\u308c\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u90e8\u5206\u304c\u4eca\u3067\u306f\u3069\u306e\u7279\u6709\u306e Controller \u3092\u8aad\u3080\u3079\u304d\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u3068\u3044\u3046\u4f59\u5206\u306a\u30ed\u30b8\u30c3\u30af\u3092\u6301\u3064\u3053\u3068\u3092\u9664\u3044\u3066\u3001'\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u3068\u305d\u308c\u307b\u3069\u9055\u3044\u304c\u306a\u3044\u3002\u3053\u308c\u306f\u826f\u3044\u72b6\u6cc1\u3060\u3002\u4f55\u6545\u306a\u3089\u3001\u3042\u306a\u305f\u306f\u3042\u306a\u305f\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u3092\u4fdd\u5b88\u3057\u3084\u3059\u304f\u3001\u304b\u3064\u30b9\u30b1\u30fc\u30eb\u3057\u3084\u3059\u304f\u3057\u3066\u3044\u308b\u304b\u3089\u3060\u3002\n\nNote: as I mentioned in the previous section, BBC News had a sort of 'God Controller' issue and our first step to resolving the problem was to take a similar approach as described above (i.e. to start creating page specific Controllers). That was a good first step.\n\n\u6ce8\u8a18: \u524d\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u8ff0\u3079\u305f\u901a\u308a\u3001BBC\u30cb\u30e5\u30fc\u30b9\u306f\u4e00\u7a2e\u306e '\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30fc\u30ed\u30fc\u30e9\u30fc' \u554f\u984c\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u6700\u521d\u306e\u4e00\u6b69\u306f\u4e0a\u8ff0\u3067\u8ff0\u3079\u305f\u3082\u306e\u3068\u4f3c\u305f\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u63a1\u308b\u3053\u3068\u3060\u3063\u305f(\u3059\u306a\u308f\u3061\u3001\u30da\u30fc\u30b8\u7279\u6709\u306e Controller \u3092\u4f5c\u6210\u3057\u59cb\u3081\u308b\u3053\u3068)\u3002\u3053\u308c\u306f\u826f\u3044\u6700\u521d\u306e\u4e00\u6b69\u3067\u3042\u3063\u305f\u3002\n\nThe next step from here was to separate out our logic even further by implementing Presenters, and it was our tech lead at BBC News (John Cleveley) who made that decision which resulted in a much more efficient, maintainable and scalable code base.\n\n\u3053\u3053\u304b\u3089\u6b21\u3078\u306e\u30b9\u30c6\u30c3\u30d7\u306f Presenter \u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3055\u3089\u306b\u3082\u3063\u3068\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3059\u308b\u3053\u3068\u3067\u3042\u308a\u3001\u305d\u3057\u3066\u3001\u3082\u3063\u3068\u3088\u308a\u52b9\u7387\u7684\u3067\u3001\u4fdd\u5b88\u6027\u306e\u3042\u308b\u3001\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u306b\u306a\u308b\u6c7a\u5b9a\u3092\u4e0b\u3057\u305fBBC\u30cb\u30e5\u30fc\u30b9\u3067\u306e\u6211\u3089\u304c\u30c6\u30c3\u30af\u30ea\u30fc\u30c9(John Cleveley)\u3067\u3042\u308b\u3002\u3000\n\nPresenters\n\nWhat problem are Presenters trying to solve? - Presenter \u304c\u89e3\u6c7a\u3057\u3088\u3046\u3068\u3059\u308b\u554f\u984c\u306f\u4f55\u304b\uff1f\n\nLet's imagine we've gone for the 'Skinny Controller' approach. There are still some inherent issues\u2026\n\n'Skinny Controller' \u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u5b9f\u88c5\u3057\u3066\u304d\u305f\u3068\u60f3\u50cf\u3057\u3088\u3046\u3002\u306a\u304a\u5148\u5929\u7684\u306a\u554f\u984c\u304c\u3042\u308b\u3002\n\nFirst of all, our Controller can still have too much context and be handling more information than it should.\n\n\u6700\u521d\u306b\u3001Controller \u306f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3061\u904e\u304e\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u672c\u6765\u3088\u308a\u3082\u591a\u304f\u306e\u60c5\u5831\u3092\u6271\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u3002\n\nBut also, and more importantly, you may find there is still a lot of duplication of code across your Controllers.\n\n\u3057\u304b\u3057\u3088\u308a\u91cd\u8981\u306a\u3053\u3068\u306b\u3001Controller \u9593\u3067\u591a\u6570\u306e\u30b3\u30fc\u30c9\u306e\u91cd\u8907\u304c\u3042\u308b\u3053\u3068\u306b\u6c17\u3065\u304f\u304b\u3082\u77e5\u308c\u306a\u3044\u3002\n\nThe reasoning for this is that if you consider the structure of a web page/application you'll notice that it is typically made up of unique 'features'. For example, if you're displaying your tweets on a page then that's a unique feature.\n\n\u3053\u306e\u7406\u7531\u306f\u3001web \u30da\u30fc\u30b8/\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u69cb\u9020\u3092\u8003\u616e\u3057\u3066\u3044\u308b\u3068\u3001\u305d\u308c\u306f\u5178\u578b\u7684\u306b\u552f\u4e00\u306a'\u6a5f\u80fd'\u306b\u3088\u308a\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u3065\u304f\u304b\u3089\u3060\u3002\u4f8b\u3048\u3070\u3001\u30c4\u30a4\u30fc\u30c8\u3092\u30da\u30fc\u30b8\u306b\u8868\u793a\u3057\u3066\u3044\u308b\u3068\u3059\u308c\u3070\u3001\u305d\u308c\u306f\u552f\u4e00\u306e\u6a5f\u80fd\u3060\u3002 \n\nEach feature must be able to stand on its own. We normally describe these features as being 'components'. Each component can be loaded whenever and wherever needed. Having a component based architecture allows your code base to become more modular and reusable.\n\n\u5404\u6a5f\u80fd\u306f\u3001\u305d\u308c\u81ea\u8eab\u306b\u7acb\u811a\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\u901a\u5e38\u3001\u3053\u308c\u3089\u306e\u6a5f\u80fd\u306f 'components' \u3068\u8a18\u8ff0\u3059\u308b\u3002\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u3044\u3064\u3067\u3082\u3069\u3053\u3067\u3082\u5fc5\u8981\u3068\u3042\u308c\u3070\u8aad\u307f\u8fbc\u307e\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u57fa\u3065\u3044\u305f\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6301\u3064\u3053\u3068\u306f\u3001\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u6027\u3001\u518d\u5229\u7528\u6027\u3092\u3088\u308a\u9ad8\u3081\u308b\u3002\n\nFor example the navigation menu on a page could be considered a 'component'. Also, the navigation menu component is likely going to need to appear on every single page of the application.\n\n\u4f8b\u3048\u3070\u3001\u30da\u30fc\u30b8\u4e0a\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30e1\u30cb\u30e5\u30fc\u306f 'component' \u3068\u8003\u3048\u3089\u308c\u5f97\u308b\u3002\u307e\u305f\u3001\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30e1\u30cb\u30e5\u30fc\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b7\u30f3\u30b0\u30eb\u30da\u30fc\u30b8\u6bce\u306b\u73fe\u308c\u308b\u3053\u3068\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\nSo, if you're splitting up your logic into page specific Controllers then it's possible that you're still repeating code across the Controllers to handle the loading of re-occurring components such as the navigation (e.g. pulling its data from a navigation Model and setting View variables etc).\n\n\u306a\u306e\u3067\u3001\u30ed\u30b8\u30c3\u30af\u3092\u30da\u30fc\u30b8\u306b\u7279\u6709\u306a\u3000Controller\u3000\u306b\u5206\u5272\u3057\u3066\u3044\u308b\u3068\u3001\u8907\u6570\u306eControllers\u306b\u8de8\u3063\u3066\u30b3\u30fc\u30c9\u3092\u7e70\u308a\u8fd4\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u305d\u308c\u3089\u306eControllers\u306f\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u306e\u3088\u3046\u306a\u518d\u767a\u751f\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u8aad\u8fbc\u307f\u3092\u6271\u3046\u305f\u3081\u306b\u4f7f\u308f\u308c\u308b (\u3059\u306a\u308f\u3061\u3001navigation Model\u304b\u3089\u30c7\u30fc\u30bf\u3092\u5f15\u304d\u51fa\u3057\u3001View\u5909\u6570\u306b\u9001\u308b\u3001\u306a\u3069)\u3002\n\nNow there are ways that this code repetition can be avoided, and one such way is to use the concept of Presenters.\n\n\u3055\u3066\u3001\u3053\u306e\u30b3\u30fc\u30c9\u306e\u7e70\u308a\u8fd4\u3057\u3092\u907f\u3051\u5f97\u308b\u65b9\u6cd5\u304c\u3042\u308a\u3001\u305d\u3057\u3066\u305d\u306e\u3088\u3046\u306a\u65b9\u6cd5\u306e1\u3064\u306f Presenters \u306e\u30b3\u30f3\u30bb\u30d7\u30c8\u3092\u4f7f\u3046\u3053\u3068\u3060\u3002\n\nHow do they work? - \u3069\u306e\u3088\u3046\u306b\u50cd\u304f\u304b\n\nPresenters (like everything in software engineering) can be implemented in many different ways.\n\nPresenter \u306f(\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u306b\u304a\u3051\u308b\u5168\u3066\u3068\u540c\u69d8\u306b)\u3001\u591a\u6570\u306e\u7570\u306a\u308b\u65b9\u6cd5\u3067\u5b9f\u88c5\u3055\u308c\u5f97\u308b\u3002\n\nFor example, at BBC News we initially were manually creating new Presenter instances \nwithin our page Controllers. But the team here are quite clever chaps \n(especially Robert Kenny and Simon Thulbourn) and they realised that this process could\nbe greatly improved by using configuration files instead (specifically YAML). \nAs we have multiple teams working on the BBC News code base and in multiple languages, \nusing configuration files is a much easier and maintainable solution.\n\n\u4f8b\u3048\u3070\u3001BBC\u30cb\u30e5\u30fc\u30b9\u3067\u306f\u6700\u521d\u306f page Controller \u3067\u65b0\u305f\u306a Presenter \u3092\u624b\u52d5\u3067\u751f\u6210\u3057\u3066\u3044\u305f\u3002\n\u3057\u304b\u3057\u3001\u30c1\u30fc\u30e0\u306f\u4ee5\u4e0b\u306b\u793a\u3059\u3068\u3066\u3082\u8ce2\u3044\u4eba\u305f\u3061(\u7279\u306b Rovert Kenny \u3068 Simon Thulbourn)\u3001 \u5f7c\u3089\u306f\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb(\u7279\u306bYAML)\u3092\u4ee3\u308f\u308a\u306b\u4f7f\u3046\u3053\u3068\u3067\u306f\u308b\u304b\u306b\u6539\u5584\u3055\u308c\u5f97\u308b\u3053\u3068\u3092\u609f\u3063\u305f\u3002\nBBC\u30cb\u30e5\u30fc\u30b9\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u4e0a\u3067\u3001\u8907\u6570\u306e\u8a00\u8a9e\u3067\u50cd\u3044\u3066\u3044\u308b\u8907\u6570\u306e\u30c1\u30fc\u30e0\u304c\u3042\u308b\u306e\u3067\u3001\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u3001\u3088\u308a\u7c21\u5358\u3067\u4fdd\u5b88\u3057\u6613\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3042\u308b\u3002\n\nI'm not going to go into the configuration set-up we use at BBC News. \nInstead I'll focus on the basic principles of how Presenters work, \nwhich is quite simply a case of moving the logic (getting component specific Model data and \nassigning it to to component specific variables) into separate files called Presenters \nwhich you can instantiate within your controller.\n\nBBC\u30cb\u30e5\u30fc\u30b9\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u308b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306b\u3064\u3044\u3066\u306f\u8ff0\u3079\u306a\u3044\u3002\n\u4ee3\u308f\u308a\u306b\u3001Presenter \u304c\u3069\u306e\u3088\u3046\u306b\u50cd\u304f\u304b\u306e\u57fa\u672c\u539f\u5247\u306b\u7126\u70b9\u3092\u5f53\u3066\u308b\u3002\n\u305d\u306e\u57fa\u672c\u539f\u5247\u306f\u3001controller \u3067\u5b9f\u4f53\u5316\u3067\u304d\u308b Presenters \u3068\u547c\u3070\u308c\u308b\u5206\u96e2\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u30ed\u30b8\u30c3\u30af(\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7279\u5b9a\u306e Model \u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001\u305d\u308c\u3092\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7279\u5b9a\u306e\u5909\u6570\u306b\u305d\u308c\u3092\u5272\u308a\u5f53\u3066\u308b)\u3092\u79fb\u3059\u3068\u3066\u3082\u30b7\u30f3\u30d7\u30eb\u306a\u4f8b\u3060\u3002\n\nCode Example\n\nController\n\nHere is a basic example in Ruby\u2026\n\n\u3053\u308c\u306f Ruby \u306b\u304a\u3051\u308b\u57fa\u672c\u7684\u306a\u4f8b\u3067\u3042\u308b\u3002\nrequire 'app/presenters/a'\nrequire 'app/presenters/b'\n\nclass AboutController < ApplicationController\n  get '/' do\n    @a = Presenters::A.new\n    @b = Presenters::B.new\n\n    title 'About'\n    erb :about\n  end\nend\n\n\n\u2026in this example we have an 'About' page which is made up of two components a and b. As you can see we require the presenters which handle those two components and within our Controller we instantiate the Presenters.\n\n\u3053\u306e\u4f8b\u3067\u306f 2\u3064\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 a \u3068 b \u3067\u4f5c\u3089\u308c\u305f 'About' \u30da\u30fc\u30b8\u3092\u6301\u3064\u3002\u3054\u89a7\u306e\u901a\u308a\u3001\u3053\u308c\u3089\u306e2\u3064\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u6271\u3046\u3000presenters \u3092\u5fc5\u8981\u3068\u3057\u3001Controller \u3067 Presenters \u3092\u5b9f\u4f53\u5316\u3059\u308b\u3002\n\nNotice that's all we do. Each Presenter encapsulates the logic needed to prepare \nthe data to be passed to the :about view template.\n\n\u3053\u308c\u304c\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u5168\u3066\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002\u5404 Presenter \u306f :about view \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e21\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306e\u6e96\u5099\u3092\u5fc5\u8981\u3068\u3059\u308b\u30ed\u30b8\u30c3\u30af\u3092\u30ab\u30d7\u30bb\u30eb\u5316\u3059\u308b\u3002\n\nView\n\nBefore I show you the Presenter code itself, I'll show you the View template file\u2026\n\nPresenter \u306e\u30b3\u30fc\u30c9\u3092\u898b\u305b\u308b\u524d\u306b\u3001View \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u305b\u3088\u3046\u3002\n<h1><%= @title %></h1>\n\n<% if @a.run %>\n  <%= partial :\"components/a\", { :title => @a.title, :summary => @a.summary, :data => @a.data } %>\n<% end %>\n\n<% if @b.run %>\n  <%= partial :\"components/b\", { :name => @b.name, :age => @b.age } %>\n<% end %>\n\n\n\u2026as you can see we have very minimal logic in place. If anything I have too much logic in the View as I initially was re-using the same View template over and over and so I wanted to protect again errors appearing when loading a template which referenced a component I wasn't loading, but I've since changed how my application was working but left the conditional checks in as an example of how code can evolve over time.\n\n\u3054\u89a7\u306e\u901a\u308a\u3001\u3068\u3066\u3082\u5c0f\u3055\u306a\u30ed\u30b8\u30c3\u30af\u304c\u9069\u5207\u306b\u3042\u308b\u3002\u6700\u521d\u306f\u540c\u3058 View \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7e70\u308a\u8fd4\u3057\u518d\u5229\u7528\u3057\u3066\u304a\u308a\u3001\u672a\u30ed\u30fc\u30c9\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u53c2\u7167\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30ed\u30fc\u30c9\u3059\u308b\u3068\u767a\u751f\u3059\u308b\u30a8\u30e9\u30fc\u3092\u9632\u304e\u305f\u304b\u3063\u305f\u7b49\u306e\u7406\u7531\u3067 View \u3067\u305f\u304f\u3055\u3093\u306e\u30ed\u30b8\u30c3\u30af\u3092\u6301\u305f\u305b\u308b\u3068\u3001\u6642\u9593\u306e\u7d4c\u904e\u3068\u3068\u3082\u306b\u3069\u306e\u304f\u3089\u3044\u30b3\u30fc\u30c9\u304c\u767a\u9054\u3057\u5f97\u308b\u304b\u306e\u4f8b\u306e\u901a\u308a\u3001\u6761\u4ef6\u30c1\u30a7\u30c3\u30af\u3092\u7f6e\u304d\u53bb\u308a\u306b\u3057\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6319\u52d5\u3092\u5909\u66f4\u3057\u3066\u3057\u307e\u3063\u305f\u3002\n\nWe literally just check to see if the component has been initialised (in this case \nwe created a run property we set to true when the component's Presenter is first initialised).\n\n\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u521d\u671f\u5316\u6e08\u307f\u304b\u3092\u5358\u306b\u6587\u5b57\u901a\u308a\u78ba\u8a8d\u3059\u308b(\u3053\u306e\u5834\u5408\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e Presenter \u304c\u6700\u521d\u306b\u521d\u671f\u5316\u3055\u308c\u308b\u3068\u304d\u306b true \u306b\u8a2d\u5b9a\u3055\u308c\u308b run \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u751f\u6210\u3057\u305f)\u3002\n\nWe then render the View for the component and pass through the variables that were set-up from within the Presenter.\n\n\u305d\u3057\u3066\u3001component \u306b\u5bfe\u3057 View \u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3001Presenter \u304b\u3089\u6e21\u3055\u308c\u305f\u8a2d\u5b9a\u6e08\u307f\u5909\u6570\u3092\u6e21\u3059\u3002\n\nNow I can also open up my :home View file and add in the a component there as well just as easily. \nIt would be even easier if I didn't have to manually add the a component to the :home View file\nbut that's where running from configuration files like we do at BBC News would come in handy \n(but that would have been too complicated an implementation for the sake of such a \nbasic example as required for this post).\n\n\u3055\u3041 :home View \u30d5\u30a1\u30a4\u30eb\u3082\u307e\u305f\u958b\u767a\u3067\u304d\u3001\u305d\u3053\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u7c21\u5358\u306b\u8ffd\u52a0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\u4fbf\u5229\u306b\u306a\u308b\u3067\u3042\u308d\u3046BBC\u30cb\u30e5\u30fc\u30b9\u3067\u3084\u3063\u3066\u3044\u308b\u306e\u3068\u540c\u69d8\u306b\u3001\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u5b9f\u884c\u3057\u3066\u3044\u308b :home View \u30d5\u30a1\u30a4\u30eb\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u624b\u52d5\u3067\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3068\u3001\u3088\u308a\u7c21\u5358\u306b\u306a\u308b(\u3057\u304b\u3057\u305d\u308c\u306f\u3001\u3053\u306e\u6295\u7a3f\u306b\u5fc5\u8981\u306a\u57fa\u672c\u7684\u306a\u4f8b\u306e\u3088\u3046\u306a\u76ee\u7684\u306b\u5bfe\u3057\u3066\u5b9f\u88c5\u304c\u8907\u96d1\u904e\u304e\u3067\u3042\u3063\u305f\u3060\u308d\u3046)\u3002\n\nPresenters\n\nNow let's take a look at one of our Presenters, in this case the Presenter for our b component\u2026\n\n\u3055\u3066\u3001Presenter \u306e 1\u3064\u3092\u898b\u3066\u3044\u3053\u3046\u3002\u3053\u3053\u3067\u306f b \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u306b\u5bfe\u5fdc\u3059\u308b Presenter \u306e\u4f8b\u3067\u3042\u308b\u3002\nrequire 'app/presenters/base'\nrequire 'app/models/b'\n\nclass Presenters::B < Presenters::Base\n  attr_reader :run, :name, :age\n\n  def initialize\n    @run = true\n\n    model = B.new('Mark', '99')\n    prepare_view_data({ :name => model.name, :age => model.age })\n  end\nend\n\n\n\u2026as you can see we load a specific Model for this component and then generate our View data by \npassing the Model information through to a prepare_view_data method (see below for the implementation details).\n\n\u3054\u89a7\u306e\u901a\u308a\u3001\u3053\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u5bfe\u5fdc\u3059\u308b\u7279\u5b9a\u306e Model \u3092\u8aad\u307f\u8fbc\u307f\u3001Model \u60c5\u5831\u3092 prepare_view_data \u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3059\u3053\u3068\u3067 View \u30c7\u30fc\u30bf\u3092\u751f\u6210\u3059\u308b(\u8a73\u7d30\u306a\u5b9f\u88c5\u306f\u4e0b\u8a18\u3092\u53c2\u7167\u306e\u3053\u3068)\u3002\n\nThe Base Presenter which our component Presenters inherit from is very straight forward as \nyou can see from the following example\u2026\n\n\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e Presenters \u306e\u7d99\u627f\u5143\u3067\u3042\u308b Base Presenter \u306f\u3001\u4e0b\u8a18\u306e\u4f8b\u304b\u3089\u5206\u304b\u308b\u901a\u308a\u3001\u7406\u89e3\u304c\u3068\u3066\u3082\u5bb9\u6613\u3067\u3042\u308b\u3002\nmodule Presenters\n  class Base\n    attr_accessor :model\n\n    def prepare_view_data hash\n      hash.each do |name, value|\n        instance_variable_set(\"@#{name}\", value)\n      end\n    end\n  end\nend\n\n\n\u2026it's just a module namespace with a base class that has a single method prepare_view_data which \ndynamically generates instance variables based on the data we passed through from the \ninheriting Presenter class and which then are usable within the View.\n\n\u7d99\u627f\u5148 Presenter \u30af\u30e9\u30b9\u304b\u3089\u6e21\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306b\u57fa\u3065\u304f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u76f4\u63a5\u751f\u6210\u3057\u3001\u304b\u3064 View \u3067\u4f7f\u7528\u53ef\u80fd\u306a prepare_view_data \u30e1\u30bd\u30c3\u30c9\u30921\u3064\u3060\u3051\u6301\u3064\u57fa\u5e95\u30af\u30e9\u30b9\u3092\u542b\u3080\u3001\u5358\u306a\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u524d\u7a7a\u9593\u3067\u3042\u308b\u3002\n\nConclusion - \u7d50\u3073\n\nThat's all there is to it as far as understanding the Presenter pattern. It's a nice clean solution for componentising your different page features and keeping your code more easily maintainable.\n\nPresenter \u30d1\u30bf\u30fc\u30f3\u3092\u7406\u89e3\u3059\u308b\u9650\u308a\u3067\u306f\u3001\u3053\u308c\u3067\u5168\u90e8\u3060\u3002\nPresenter \u30d1\u30bf\u30fc\u30f3\u306f\u3001\u7570\u306a\u308b\u30da\u30fc\u30b8\u6a5f\u80fd\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u5316\u306b\u5bfe\u3059\u308b\u660e\u78ba\u3067\u826f\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3042\u308a\u3001\u30b3\u30fc\u30c9\u306e\u4fdd\u5b88\u304c\u3088\u308a\u7c21\u5358\u306b\u306a\u308b\u3002\n\nI've created a repo on GitHub called MVCP which is written in Ruby and uses the Sinatra web framework. Note: I had some help from my colleague Simon in cleaning up and refactoring some of the code (it may only have been minor changes but as with all good refactorings it made a massive difference to the quality of the code, so thanks to him for helping out).\n\nGitHub \u306b Ruby \u3067\u66f8\u304b\u308c\u3001Sinatra web framework \u3092\u7528\u3044\u305f MVCP \u3068\u3044\u3046\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u3063\u305f\u3002\n\u6ce8\u610f: \u540c\u50da\u306e Simon \u306b\u30b3\u30fc\u30c9\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3068\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3092\u3044\u304f\u3089\u304b\u52a9\u3051\u3066\u3082\u3089\u3063\u305f(\u30de\u30a4\u30ca\u30fc\u30c1\u30a7\u30f3\u30b8\u306b\u7559\u307e\u3063\u305f\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u5168\u3066\u306e\u512a\u308c\u305f\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3068\u540c\u69d8\u306b\u3001\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u304c\u5287\u7684\u306b\u5909\u308f\u3063\u305f\u3002\u5f7c\u3089\u306e\u52a9\u3051\u306b\u5927\u5909\u611f\u8b1d\u3059\u308b\u3002)\n\nIf you have any questions then feel free to contact me either here on twitter and let me know your thoughts.\n\n\u3082\u3057\u8cea\u554f\u304c\u3042\u308c\u3070\u3001\u3053\u3061\u3089\u304b twitter \u3067\u6c17\u8efd\u306b\u9023\u7d61\u3057\u3066\u3044\u305f\u3060\u304d\u3001\u3042\u306a\u305f\u306e\u8003\u3048\u3092\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u8a33\u8005 \u7d50\u3073\u30fb\u8b1d\u8f9e\n\u3082\u3057\u8cea\u554f\u304c\u3042\u308c\u3070\u3054\u6c17\u8efd\u306b\u3001\u3068\u3044\u3046\u3053\u3068\u3060\u3063\u305f\u306e\u3067\u3001Twitter \u3067\u8457\u8005\u306e @integralist \u3055\u3093\u306b\u3001\u3053\u306e\u8a18\u4e8b\u3092\u7ffb\u8a33\u3057\u3066\u826f\u3044\u304b\u5c0b\u306d\u305f\u3068\u3053\u308d\u3001\u5feb\u8afe\u3057\u3066\u9802\u304d\u307e\u3057\u305f\u3002Many thanks:)\n@integralist \u3055\u3093\u306e\u8a18\u4e8b\u306f\u4e0b\u8a18\u304b\u3089\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\nhttp://www.integralist.co.uk/index.html\n\n## \u306f\u3058\u3081\u306b\n\n[MVCP: Model, View, Controller, Presenter](http://www.integralist.co.uk/posts/mvcp.html)\u306e\u7ffb\u8a33\u3067\u3059\u3002\n\n\u696d\u52d9\u3067MVCP\u306b\u89e6\u308c\u3066\u304a\u304d\u306a\u304c\u3089\u3001\u304d\u3061\u3093\u3068\u7406\u89e3\u3057\u3066\u3044\u306a\u3044\u3068\u611f\u3058\u3001\u5c11\u3057\u30b0\u30b0\u3063\u305f\u3068\u3053\u308d\u624b\u9803\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u898b\u3064\u3051\u305f\u306e\u3067\u3001\u7ffb\u8a33\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3057\u305f\u3002(\u8aa4\u8a33\u3057\u3066\u3044\u305f\u3089\u30b9\u30df\u30de\u30bb\u30f3\u3002\u7b46\u8005\u306e\u82f1\u8a9e\u7ffb\u8a33\u80fd\u529b\u306f\u9ad8\u304f\u306f\u306a\u3044\u3067\u3059\u3002)\n\n\u82f1\u8a9e\u306e\u7ffb\u8a33\u7df4\u7fd2\u3082\u517c\u306d\u3066\u3044\u307e\u3059:)\n\n## Introduction - \u306f\u3058\u3081\u306b\n\n> Model, View, Controller (MVC). This is a pretty standard architectural pattern and has been in use when developing software since the early 1970's.\n\nModel, View, Controller (MVC)\u3002\u3053\u308c\u306f\u6a19\u6e96\u7684\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3067\u3042\u308a\u30011970\u5e74\u4ee3\u521d\u982d\u304b\u3089\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u958b\u767a\u3059\u308b\u969b\u306b\u4f7f\u308f\u308c\u3066\u304d\u305f\u3002\n\n> The basic principle of the pattern is to separate the different areas of logic from your application into distinct compartments.\n\n\u305d\u306e\u30d1\u30bf\u30fc\u30f3\u306e\u57fa\u672c\u539f\u5247\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u7570\u306a\u308b\u30ed\u30b8\u30c3\u30af\u306e\u9818\u57df\u3092\u660e\u78ba\u306a\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u5206\u96e2\u3059\u308b\u3053\u3068\u3060\u3002\n\n### Model\n\n> The model holds your business data. Typically this will be data that is pulled in from a database or external data service of some kind.\n\nmodel \u306f\u30d3\u30b8\u30cd\u30b9\u30c7\u30fc\u30bf\u3092\u4fdd\u6301\u3059\u308b\u3002\u5178\u578b\u7684\u306b\u306f\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3084\u3042\u308b\u7a2e\u985e\u306e\u5916\u90e8\u30b5\u30fc\u30d3\u30b9\u30c7\u30fc\u30bf\u304b\u3089\u5f15\u3063\u5f35\u3063\u3066\u304f\u308b\u30c7\u30fc\u30bf\u3060\u3002\n\n### View\n\n> The view is your user interface. This is what the client will interact with when using your application.\n\nview \u306f\u3042\u306a\u305f\u306e\u30e6\u30fc\u30b6\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u3042\u308b\u3002\u3053\u308c\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f7f\u3046\u969b\u306b\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u76f8\u4e92\u4f5c\u7528\u3059\u308b\u4f55\u304b\u3060\u3002\n\n### Controller\n\n> The controller is the boss. He sits at the top and delegates responsibilities to either the view or the model.\n\ncontroller \u306f\u3001\u30dc\u30b9\u3067\u3042\u308b\u3002\u5f7c\u306f\u6700\u4e0a\u4f4d\u306b\u5b58\u5728\u3057\u3001\u8cac\u4efb\u3092 view \u3084 model \u306b\u59d4\u8b72\u3059\u308b\u3002\n\n## Mixed definitions - \u77db\u76fe\u3057\u305f\u5b9a\u7fa9\n\n> There seems to be a dispute in the dev community regarding how the responsibilities should be divided.\n\n\u958b\u767a\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u3067\u306f\u3069\u306e\u3088\u3046\u306b\u8cac\u4efb\u3092\u5206\u5272\u3059\u3079\u304d\u304b\u306b\u95a2\u3057\u3066\u8ad6\u4e89\u306b\u306a\u308b\u3088\u3046\u3060\u3002\n\n> Some feel a 'fat controller' principle is best (where by the controller tells the model not only when but where and how it should get its data).\n\n\u4f55\u4eba\u304b\u306f '\u592a\u3063\u305fcontroller' \u539f\u5247\u304c\u30d9\u30b9\u30c8\u3060\u3068\u611f\u3058\u308b(\u305d\u308c\u306b\u3088\u3063\u3066 controller \u306f model \u306b\u30c7\u30fc\u30bf\u3092\u3044\u3064\u3001\u3069\u3053\u306b\u3001\u305d\u3057\u3066\u3069\u306e\u3088\u3046\u306b\u53d6\u5f97\u3059\u3079\u304d\u304b\u3092\u4f1d\u3048\u308b)\u3002\n\n> My understanding of the pattern is that it was designed so that the Controller stays 'skinny'. It may be the boss, but like most good bosses it doesn't try and stay in control. It knows the best team member for the job at hand and delegates accordingly.\n\n\u79c1\u306f\u3001Controller \u306f 'skinny' \u306b\u3068\u3069\u307e\u308b\u3088\u3046\u8a2d\u8a08\u3055\u308c\u305f\u3068\u8003\u3048\u3066\u3044\u308b\u3002\u305d\u308c\u306f\u30dc\u30b9\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u652f\u914d\u3057\u3088\u3046\u3068\u306f\u3057\u306a\u3044\u5927\u90e8\u5206\u306e\u826f\u3044\u30dc\u30b9\u3060\u3002\u305d\u306e\u30dc\u30b9\u306f\u3001\u4ed5\u4e8b\u306b\u5bfe\u3057\u3066\u6700\u3082\u826f\u3044\u8eab\u8fd1\u306a\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u3092\u77e5\u3063\u3066\u3044\u3066\u3001\u9069\u5207\u306b\u59d4\u8b72\u3059\u308b\u3002\n\n> This is also good code design because the Controller doesn't have too much context (i.e. it doesn't know everything, which means it'll be easier to maintain and scale).\n\nController \u306f\u591a\u304f\u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3063\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u3053\u308c\u3082\u307e\u305f\u826f\u3044\u30b3\u30fc\u30c9\u8a2d\u8a08\u3060(\u3059\u306a\u308f\u3061\u3001Controller \u306f\u5168\u3066\u3092\u77e5\u3063\u3066\u304a\u3089\u305a\u3001\u305d\u308c\u304c\u610f\u5473\u3059\u308b\u306e\u306f\u4fdd\u5b88\u3084\u30b9\u30b1\u30fc\u30eb\u304c\u3057\u6613\u3044\u3053\u3068\u3060\u308d\u3046)\u3002\n\n### God Controller - \u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n\n> There are a few ways we can implement an MVC pattern, one is known as the 'God Controller'.\n\nMVC\u30d1\u30bf\u30fc\u30f3\u3092\u5b9f\u88c5\u3059\u308b\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308a\u3001\u305d\u306e\u3072\u3068\u3064\u306f '\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u3068\u3057\u3066\u77e5\u308c\u3066\u3044\u308b\u3002\n\n> This is where a single Controller exists and it oversees everything no matter what was requested by the client.\n\n\n\u3053\u308c\u306f\u5358\u4e00\u306e Controller \u304c\u5b58\u5728\u3057\u3001\u304b\u3064\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3055\u308c\u305f\u3082\u306e\u304c\u4f55\u3067\u3042\u308d\u3046\u3068\u5168\u3066\u76e3\u8996\u3059\u308b\u3002\n\n> For example, the single Controller would be passed the request from the client (usually handled by a custom routing application, and most frameworks will provide their own).\n\n\u4f8b\u3048\u3070\u3001\u5358\u4e00\u306e Controller \u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6e21\u3055\u308c\u308b\u304b\u3082\u3057\u308c\u306a\u3044(\u901a\u5e38\u3001\u30ab\u30b9\u30bf\u30e0\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3088\u3063\u3066\u6271\u308f\u308c\u3001\u591a\u304f\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306f\u81ea\u8eab\u3067\u63d0\u4f9b\u3057\u3066\u3044\u308b)\u3002\n\n> The Controller would determine what type of request was made (if the request was for a 'contact' page then it'll make a request for the Contact model, or if the request was for the 'about' page then it'll make a request for the About model).\n\nController \u306f\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7a2e\u985e\u304c\u4f55\u3067\u69cb\u7bc9\u3055\u308c\u305f\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u304b\u3082\u3057\u308c\u306a\u3044(\u30ea\u30af\u30a8\u30b9\u30c8\u304c 'contact' \u30da\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u3067\u3042\u3063\u305f\u5834\u5408\u3001Contact model \u306b\u5bfe\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3060\u308d\u3046\u3057\u3001'about' \u30da\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u3067\u3042\u3063\u305f\u5834\u5408\u3001About model \u306b\u5bfe\u3059\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3060\u308d\u3046)\u3002\n\n> Once it knows the type of request it'll proceed to get the relevant model data and assign it to some View variables and render the required View.\n\n\u4e00\u65e6\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7a2e\u985e\u3092\u77e5\u308b\u3068\u3001\u95a2\u9023\u3059\u308b\u30e2\u30c7\u30eb\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u3092\u958b\u59cb\u3057\u3001\u305d\u306e\u30c7\u30fc\u30bf\u3092\u3044\u304f\u3064\u304b\u306e View \u5909\u6570\u306b\u5272\u308a\u5f53\u3066\u3001\u5fc5\u8981\u3068\u3055\u308c\u308b View \u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308b\u3002\n\n### Problems - \u554f\u984c\n\n> Now there are two problems with this implementation:\n\n\u3055\u3066\u3001\u3053\u306e\u5b9f\u88c5\u306b\u306f2\u3064\u306e\u554f\u984c\u304c\u3042\u308b:\n\n> 1. maintainability\n2. scalability\n\n1. \u4fdd\u5b88\u6027\n2. \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3\n\n> As mentioned before, this comes down to bad code design. The 'God Controller' knows too much and tries to do too much. Once you start getting above a few different types of requests you'll start to understand what a mess the code can become by having multiple branches for different routing scenarios.\n\n\u524d\u8ff0\u3057\u305f\u901a\u308a\u3001\u3053\u308c\u306f\u60aa\u3044\u30b3\u30fc\u30c9\u8a2d\u8a08\u306b\u6210\u308a\u4e0b\u304c\u308b\u3002'\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u306f\u77e5\u308a\u904e\u304e\u3067\u3042\u308a\u3001\u304b\u3064\u3001\u3084\u308d\u3046\u3068\u3057\u904e\u304e\u3067\u3042\u308b\u3002\u4e00\u65e6\u4e0a\u8ff0\u306e\u3044\u304f\u3064\u304b\u306e\u7570\u306a\u308b\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7a2e\u985e\u3092\u53d6\u5f97\u3059\u308b\u3068\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30b7\u30ca\u30ea\u30aa\u306b\u5bfe\u3057\u8907\u6570\u306e\u5206\u5c90\u3092\u6301\u3064\u3053\u3068\u306b\u3088\u308a\u3001\u5927\u91cf\u306e\u30b3\u30fc\u30c9\u304c\u3069\u3046\u306a\u308b\u304b\u3092\u7406\u89e3\u3057\u59cb\u3081\u308b\u3002\n\n> I work as an engineer for the BBC News team in London and we had suffered from this exact set-up (hence the lessons the team has learnt and improved upon are the reason why I'm able to write this post for you now).\n\n\u79c1\u306f\u30ed\u30f3\u30c9\u30f3\u3067BBC\u30cb\u30e5\u30fc\u30b9\u306e\u30c1\u30fc\u30e0\u30a8\u30f3\u30b8\u30cb\u30a2\u3068\u3057\u3066\u50cd\u3044\u3066\u304a\u308a\u3001\u307e\u3055\u306b\u3053\u306e\u3088\u3046\u306a\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u88ab\u5bb3\u3092\u53d7\u3051\u3066\u304d\u305f(\u305d\u308c\u6545\u3001\u30c1\u30fc\u30e0\u304c\u5b66\u3073\u3001\u304b\u3064\u6539\u5584\u3057\u305f\u6559\u8a13\u304c\u3001\u79c1\u304c\u3053\u3046\u3057\u3066\u3042\u306a\u305f\u306b\u3053\u306e\u6295\u7a3f\u3092\u66f8\u304d\u5f97\u308b\u7406\u7531\u3060)\u3002\n\n### Skinny Controller\u3000- \u30b9\u30ad\u30cb\u30fc\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\n\n> There is another approach we can take which is known as the 'skinny controller' approach.\n\n\u4ed6\u306b\u53d6\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u30a2\u30d7\u30ed\u30fc\u30c1\u306b\u306f\u3001'\u30b9\u30ad\u30cb\u30fc\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u30a2\u30d7\u30ed\u30fc\u30c1\u3068\u3057\u3066\u77e5\u3089\u308c\u308b\u3082\u306e\u304c\u3042\u308b\u3002\n\n> The way it works is that a request will come into the application and will get passed to a page specific Controller.\n\n\u305d\u306e\u52d5\u4f5c\u306f\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u3084\u3063\u3066\u304f\u308b\u3068\u3001\u30da\u30fc\u30b8\u7279\u6709\u306e Contller \u306b\u6e21\u3059\u3053\u3068\u3067\u3042\u308b\u3002\n\n> The page specific Controller will call the relevant Model and will assign the returned data to a few View variables.\n\n\u30da\u30fc\u30b8\u7279\u6709\u306e Controller \u306f\u95a2\u9023\u3057\u305f Model \u3092\u547c\u3073\u51fa\u3057\u3001\u3044\u304f\u3064\u304b\u306e View \u5909\u6570\u306b\u8fd4\u5374\u3055\u308c\u305f\u30c7\u30fc\u30bf\u3092\u5272\u308a\u5f53\u3066\u308b\u3002\n\n> The Controller will then render a View and pass through the variables into the View for it to use.\n\n\u7d9a\u3044\u3066\u3001Controller \u306f View \u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3001\u305d\u3057\u3066 View \u304c\u4f7f\u3046\u5909\u6570\u3092\u6e21\u3059\u3002\n\n> As you can see, this isn't that different from the 'God Controller' with the exception that the Routing part of the application now will have extra logic which determines which specific Controller should be loaded. This is a better situation to be in because you're making your code base both more maintainable and scalable.\n\n\u3054\u89a7\u306e\u901a\u308a\u3001\u3053\u308c\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u90e8\u5206\u304c\u4eca\u3067\u306f\u3069\u306e\u7279\u6709\u306e Controller \u3092\u8aad\u3080\u3079\u304d\u304b\u3092\u6c7a\u5b9a\u3059\u308b\u3068\u3044\u3046\u4f59\u5206\u306a\u30ed\u30b8\u30c3\u30af\u3092\u6301\u3064\u3053\u3068\u3092\u9664\u3044\u3066\u3001'\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc' \u3068\u305d\u308c\u307b\u3069\u9055\u3044\u304c\u306a\u3044\u3002\u3053\u308c\u306f\u826f\u3044\u72b6\u6cc1\u3060\u3002\u4f55\u6545\u306a\u3089\u3001\u3042\u306a\u305f\u306f\u3042\u306a\u305f\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u3092\u4fdd\u5b88\u3057\u3084\u3059\u304f\u3001\u304b\u3064\u30b9\u30b1\u30fc\u30eb\u3057\u3084\u3059\u304f\u3057\u3066\u3044\u308b\u304b\u3089\u3060\u3002\n\n> Note: as I mentioned in the previous section, BBC News had a sort of 'God Controller' issue and our first step to resolving the problem was to take a similar approach as described above (i.e. to start creating page specific Controllers). That was a good first step.\n\n\u6ce8\u8a18: \u524d\u30bb\u30af\u30b7\u30e7\u30f3\u3067\u8ff0\u3079\u305f\u901a\u308a\u3001BBC\u30cb\u30e5\u30fc\u30b9\u306f\u4e00\u7a2e\u306e '\u30b4\u30c3\u30c9\u30b3\u30f3\u30c8\u30fc\u30ed\u30fc\u30e9\u30fc' \u554f\u984c\u3092\u6301\u3063\u3066\u3044\u3066\u3001\u554f\u984c\u3092\u89e3\u6c7a\u3059\u308b\u6700\u521d\u306e\u4e00\u6b69\u306f\u4e0a\u8ff0\u3067\u8ff0\u3079\u305f\u3082\u306e\u3068\u4f3c\u305f\u30a2\u30d7\u30ed\u30fc\u30c1\u3092\u63a1\u308b\u3053\u3068\u3060\u3063\u305f(\u3059\u306a\u308f\u3061\u3001\u30da\u30fc\u30b8\u7279\u6709\u306e Controller \u3092\u4f5c\u6210\u3057\u59cb\u3081\u308b\u3053\u3068)\u3002\u3053\u308c\u306f\u826f\u3044\u6700\u521d\u306e\u4e00\u6b69\u3067\u3042\u3063\u305f\u3002\n\n> The next step from here was to separate out our logic even further by implementing Presenters, and it was our tech lead at BBC News (John Cleveley) who made that decision which resulted in a much more efficient, maintainable and scalable code base.\n\n\u3053\u3053\u304b\u3089\u6b21\u3078\u306e\u30b9\u30c6\u30c3\u30d7\u306f Presenter \u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u3055\u3089\u306b\u3082\u3063\u3068\u30ed\u30b8\u30c3\u30af\u3092\u5206\u96e2\u3059\u308b\u3053\u3068\u3067\u3042\u308a\u3001\u305d\u3057\u3066\u3001\u3082\u3063\u3068\u3088\u308a\u52b9\u7387\u7684\u3067\u3001\u4fdd\u5b88\u6027\u306e\u3042\u308b\u3001\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u306b\u306a\u308b\u6c7a\u5b9a\u3092\u4e0b\u3057\u305fBBC\u30cb\u30e5\u30fc\u30b9\u3067\u306e\u6211\u3089\u304c\u30c6\u30c3\u30af\u30ea\u30fc\u30c9(John Cleveley)\u3067\u3042\u308b\u3002\u3000\n\n## Presenters\n\n### What problem are Presenters trying to solve? - Presenter \u304c\u89e3\u6c7a\u3057\u3088\u3046\u3068\u3059\u308b\u554f\u984c\u306f\u4f55\u304b\uff1f\n\n> Let's imagine we've gone for the 'Skinny Controller' approach. There are still some inherent issues\u2026\n\n'Skinny Controller' \u30a2\u30d7\u30ed\u30fc\u30c1\u3067\u5b9f\u88c5\u3057\u3066\u304d\u305f\u3068\u60f3\u50cf\u3057\u3088\u3046\u3002\u306a\u304a\u5148\u5929\u7684\u306a\u554f\u984c\u304c\u3042\u308b\u3002\n\n> First of all, our Controller can still have too much context and be handling more information than it should.\n\n\u6700\u521d\u306b\u3001Controller \u306f\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u6301\u3061\u904e\u304e\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u672c\u6765\u3088\u308a\u3082\u591a\u304f\u306e\u60c5\u5831\u3092\u6271\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u3082\u3042\u308b\u3002\n\n> But also, and more importantly, you may find there is still a lot of duplication of code across your Controllers.\n\n\u3057\u304b\u3057\u3088\u308a\u91cd\u8981\u306a\u3053\u3068\u306b\u3001Controller \u9593\u3067\u591a\u6570\u306e\u30b3\u30fc\u30c9\u306e\u91cd\u8907\u304c\u3042\u308b\u3053\u3068\u306b\u6c17\u3065\u304f\u304b\u3082\u77e5\u308c\u306a\u3044\u3002\n\n> The reasoning for this is that if you consider the structure of a web page/application you'll notice that it is typically made up of unique 'features'. For example, if you're displaying your tweets on a page then that's a unique feature.\n\n\u3053\u306e\u7406\u7531\u306f\u3001web \u30da\u30fc\u30b8/\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u69cb\u9020\u3092\u8003\u616e\u3057\u3066\u3044\u308b\u3068\u3001\u305d\u308c\u306f\u5178\u578b\u7684\u306b\u552f\u4e00\u306a'\u6a5f\u80fd'\u306b\u3088\u308a\u4f5c\u3089\u308c\u3066\u3044\u308b\u3053\u3068\u306b\u6c17\u3065\u304f\u304b\u3089\u3060\u3002\u4f8b\u3048\u3070\u3001\u30c4\u30a4\u30fc\u30c8\u3092\u30da\u30fc\u30b8\u306b\u8868\u793a\u3057\u3066\u3044\u308b\u3068\u3059\u308c\u3070\u3001\u305d\u308c\u306f\u552f\u4e00\u306e\u6a5f\u80fd\u3060\u3002 \n\n> Each feature must be able to stand on its own. We normally describe these features as being 'components'. Each component can be loaded whenever and wherever needed. Having a component based architecture allows your code base to become more modular and reusable.\n\n\u5404\u6a5f\u80fd\u306f\u3001\u305d\u308c\u81ea\u8eab\u306b\u7acb\u811a\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002\u901a\u5e38\u3001\u3053\u308c\u3089\u306e\u6a5f\u80fd\u306f 'components' \u3068\u8a18\u8ff0\u3059\u308b\u3002\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306f\u3044\u3064\u3067\u3082\u3069\u3053\u3067\u3082\u5fc5\u8981\u3068\u3042\u308c\u3070\u8aad\u307f\u8fbc\u307e\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u57fa\u3065\u3044\u305f\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3092\u6301\u3064\u3053\u3068\u306f\u3001\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u6027\u3001\u518d\u5229\u7528\u6027\u3092\u3088\u308a\u9ad8\u3081\u308b\u3002\n\n> For example the navigation menu on a page could be considered a 'component'. Also, the navigation menu component is likely going to need to appear on every single page of the application.\n\n\u4f8b\u3048\u3070\u3001\u30da\u30fc\u30b8\u4e0a\u306e\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30e1\u30cb\u30e5\u30fc\u306f 'component' \u3068\u8003\u3048\u3089\u308c\u5f97\u308b\u3002\u307e\u305f\u3001\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u30e1\u30cb\u30e5\u30fc\u306f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b7\u30f3\u30b0\u30eb\u30da\u30fc\u30b8\u6bce\u306b\u73fe\u308c\u308b\u3053\u3068\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\n> So, if you're splitting up your logic into page specific Controllers then it's possible that you're still repeating code across the Controllers to handle the loading of re-occurring components such as the navigation (e.g. pulling its data from a navigation Model and setting View variables etc).\n\n\u306a\u306e\u3067\u3001\u30ed\u30b8\u30c3\u30af\u3092\u30da\u30fc\u30b8\u306b\u7279\u6709\u306a\u3000Controller\u3000\u306b\u5206\u5272\u3057\u3066\u3044\u308b\u3068\u3001\u8907\u6570\u306eControllers\u306b\u8de8\u3063\u3066\u30b3\u30fc\u30c9\u3092\u7e70\u308a\u8fd4\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u305d\u308c\u3089\u306eControllers\u306f\u30ca\u30d3\u30b2\u30fc\u30b7\u30e7\u30f3\u306e\u3088\u3046\u306a\u518d\u767a\u751f\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u8aad\u8fbc\u307f\u3092\u6271\u3046\u305f\u3081\u306b\u4f7f\u308f\u308c\u308b (\u3059\u306a\u308f\u3061\u3001navigation Model\u304b\u3089\u30c7\u30fc\u30bf\u3092\u5f15\u304d\u51fa\u3057\u3001View\u5909\u6570\u306b\u9001\u308b\u3001\u306a\u3069)\u3002\n\n>Now there are ways that this code repetition can be avoided, and one such way is to use the concept of Presenters.\n\n\u3055\u3066\u3001\u3053\u306e\u30b3\u30fc\u30c9\u306e\u7e70\u308a\u8fd4\u3057\u3092\u907f\u3051\u5f97\u308b\u65b9\u6cd5\u304c\u3042\u308a\u3001\u305d\u3057\u3066\u305d\u306e\u3088\u3046\u306a\u65b9\u6cd5\u306e1\u3064\u306f Presenters \u306e\u30b3\u30f3\u30bb\u30d7\u30c8\u3092\u4f7f\u3046\u3053\u3068\u3060\u3002\n\n### How do they work? - \u3069\u306e\u3088\u3046\u306b\u50cd\u304f\u304b\n\n>Presenters (like everything in software engineering) can be implemented in many different ways.\n\nPresenter \u306f(\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30a8\u30f3\u30b8\u30cb\u30a2\u30ea\u30f3\u30b0\u306b\u304a\u3051\u308b\u5168\u3066\u3068\u540c\u69d8\u306b)\u3001\u591a\u6570\u306e\u7570\u306a\u308b\u65b9\u6cd5\u3067\u5b9f\u88c5\u3055\u308c\u5f97\u308b\u3002\n\n>For example, at BBC News we initially were manually creating new Presenter instances \nwithin our page Controllers. But the team here are quite clever chaps \n(especially Robert Kenny and Simon Thulbourn) and they realised that this process could\nbe greatly improved by using configuration files instead (specifically YAML). \nAs we have multiple teams working on the BBC News code base and in multiple languages, \nusing configuration files is a much easier and maintainable solution.\n\n\u4f8b\u3048\u3070\u3001BBC\u30cb\u30e5\u30fc\u30b9\u3067\u306f\u6700\u521d\u306f page Controller \u3067\u65b0\u305f\u306a Presenter \u3092\u624b\u52d5\u3067\u751f\u6210\u3057\u3066\u3044\u305f\u3002\n\u3057\u304b\u3057\u3001\u30c1\u30fc\u30e0\u306f\u4ee5\u4e0b\u306b\u793a\u3059\u3068\u3066\u3082\u8ce2\u3044\u4eba\u305f\u3061(\u7279\u306b Rovert Kenny \u3068 Simon Thulbourn)\u3001 \u5f7c\u3089\u306f\u3053\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb(\u7279\u306bYAML)\u3092\u4ee3\u308f\u308a\u306b\u4f7f\u3046\u3053\u3068\u3067\u306f\u308b\u304b\u306b\u6539\u5584\u3055\u308c\u5f97\u308b\u3053\u3068\u3092\u609f\u3063\u305f\u3002\nBBC\u30cb\u30e5\u30fc\u30b9\u306e\u30b3\u30fc\u30c9\u30d9\u30fc\u30b9\u4e0a\u3067\u3001\u8907\u6570\u306e\u8a00\u8a9e\u3067\u50cd\u3044\u3066\u3044\u308b\u8907\u6570\u306e\u30c1\u30fc\u30e0\u304c\u3042\u308b\u306e\u3067\u3001\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u306f\u3001\u3088\u308a\u7c21\u5358\u3067\u4fdd\u5b88\u3057\u6613\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3042\u308b\u3002\n\n>I'm not going to go into the configuration set-up we use at BBC News. \nInstead I'll focus on the basic principles of how Presenters work, \nwhich is quite simply a case of moving the logic (getting component specific Model data and \nassigning it to to component specific variables) into separate files called Presenters \nwhich you can instantiate within your controller.\n\nBBC\u30cb\u30e5\u30fc\u30b9\u3067\u4f7f\u7528\u3057\u3066\u3044\u308b\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u306b\u3088\u308b\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306b\u3064\u3044\u3066\u306f\u8ff0\u3079\u306a\u3044\u3002\n\u4ee3\u308f\u308a\u306b\u3001Presenter \u304c\u3069\u306e\u3088\u3046\u306b\u50cd\u304f\u304b\u306e\u57fa\u672c\u539f\u5247\u306b\u7126\u70b9\u3092\u5f53\u3066\u308b\u3002\n\u305d\u306e\u57fa\u672c\u539f\u5247\u306f\u3001controller \u3067\u5b9f\u4f53\u5316\u3067\u304d\u308b Presenters \u3068\u547c\u3070\u308c\u308b\u5206\u96e2\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb\u306b\u30ed\u30b8\u30c3\u30af(\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7279\u5b9a\u306e Model \u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3001\u305d\u308c\u3092\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u7279\u5b9a\u306e\u5909\u6570\u306b\u305d\u308c\u3092\u5272\u308a\u5f53\u3066\u308b)\u3092\u79fb\u3059\u3068\u3066\u3082\u30b7\u30f3\u30d7\u30eb\u306a\u4f8b\u3060\u3002\n\n## Code Example\n\n### Controller\n\n> Here is a basic example in Ruby\u2026\n\n\u3053\u308c\u306f Ruby \u306b\u304a\u3051\u308b\u57fa\u672c\u7684\u306a\u4f8b\u3067\u3042\u308b\u3002\n\n```ruby\nrequire 'app/presenters/a'\nrequire 'app/presenters/b'\n\nclass AboutController < ApplicationController\n  get '/' do\n    @a = Presenters::A.new\n    @b = Presenters::B.new\n\n    title 'About'\n    erb :about\n  end\nend\n```\n\n> \u2026in this example we have an 'About' page which is made up of two components a and b. As you can see we require the presenters which handle those two components and within our Controller we instantiate the Presenters.\n\n\u3053\u306e\u4f8b\u3067\u306f 2\u3064\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 `a` \u3068 `b` \u3067\u4f5c\u3089\u308c\u305f `'About'` \u30da\u30fc\u30b8\u3092\u6301\u3064\u3002\u3054\u89a7\u306e\u901a\u308a\u3001\u3053\u308c\u3089\u306e2\u3064\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u6271\u3046\u3000presenters \u3092\u5fc5\u8981\u3068\u3057\u3001Controller \u3067 Presenters \u3092\u5b9f\u4f53\u5316\u3059\u308b\u3002\n\n> Notice that's all we do. Each Presenter encapsulates the logic needed to prepare \nthe data to be passed to the :about view template.\n\n\u3053\u308c\u304c\u3084\u3063\u3066\u3044\u308b\u3053\u3068\u5168\u3066\u3067\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3002\u5404 Presenter \u306f `:about` view \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306b\u6e21\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306e\u6e96\u5099\u3092\u5fc5\u8981\u3068\u3059\u308b\u30ed\u30b8\u30c3\u30af\u3092\u30ab\u30d7\u30bb\u30eb\u5316\u3059\u308b\u3002\n\n### View\n> Before I show you the Presenter code itself, I'll show you the View template file\u2026\n\nPresenter \u306e\u30b3\u30fc\u30c9\u3092\u898b\u305b\u308b\u524d\u306b\u3001View \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u305b\u3088\u3046\u3002\n\n```\n<h1><%= @title %></h1>\n\n<% if @a.run %>\n  <%= partial :\"components/a\", { :title => @a.title, :summary => @a.summary, :data => @a.data } %>\n<% end %>\n\n<% if @b.run %>\n  <%= partial :\"components/b\", { :name => @b.name, :age => @b.age } %>\n<% end %>\n```\n\n> \u2026as you can see we have very minimal logic in place. If anything I have too much logic in the View as I initially was re-using the same View template over and over and so I wanted to protect again errors appearing when loading a template which referenced a component I wasn't loading, but I've since changed how my application was working but left the conditional checks in as an example of how code can evolve over time.\n\n\u3054\u89a7\u306e\u901a\u308a\u3001\u3068\u3066\u3082\u5c0f\u3055\u306a\u30ed\u30b8\u30c3\u30af\u304c\u9069\u5207\u306b\u3042\u308b\u3002\u6700\u521d\u306f\u540c\u3058 View \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7e70\u308a\u8fd4\u3057\u518d\u5229\u7528\u3057\u3066\u304a\u308a\u3001\u672a\u30ed\u30fc\u30c9\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u53c2\u7167\u3057\u305f\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30ed\u30fc\u30c9\u3059\u308b\u3068\u767a\u751f\u3059\u308b\u30a8\u30e9\u30fc\u3092\u9632\u304e\u305f\u304b\u3063\u305f\u7b49\u306e\u7406\u7531\u3067 View \u3067\u305f\u304f\u3055\u3093\u306e\u30ed\u30b8\u30c3\u30af\u3092\u6301\u305f\u305b\u308b\u3068\u3001\u6642\u9593\u306e\u7d4c\u904e\u3068\u3068\u3082\u306b\u3069\u306e\u304f\u3089\u3044\u30b3\u30fc\u30c9\u304c\u767a\u9054\u3057\u5f97\u308b\u304b\u306e\u4f8b\u306e\u901a\u308a\u3001\u6761\u4ef6\u30c1\u30a7\u30c3\u30af\u3092\u7f6e\u304d\u53bb\u308a\u306b\u3057\u3066\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u6319\u52d5\u3092\u5909\u66f4\u3057\u3066\u3057\u307e\u3063\u305f\u3002\n\n>We literally just check to see if the component has been initialised (in this case \nwe created a run property we set to true when the component's Presenter is first initialised).\n\n\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u521d\u671f\u5316\u6e08\u307f\u304b\u3092\u5358\u306b\u6587\u5b57\u901a\u308a\u78ba\u8a8d\u3059\u308b(\u3053\u306e\u5834\u5408\u3001\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e Presenter \u304c\u6700\u521d\u306b\u521d\u671f\u5316\u3055\u308c\u308b\u3068\u304d\u306b true \u306b\u8a2d\u5b9a\u3055\u308c\u308b run \u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u751f\u6210\u3057\u305f)\u3002\n\n> We then render the View for the component and pass through the variables that were set-up from within the Presenter.\n\n\u305d\u3057\u3066\u3001component \u306b\u5bfe\u3057 View \u3092\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3057\u3001Presenter \u304b\u3089\u6e21\u3055\u308c\u305f\u8a2d\u5b9a\u6e08\u307f\u5909\u6570\u3092\u6e21\u3059\u3002\n\n>Now I can also open up my :home View file and add in the a component there as well just as easily. \nIt would be even easier if I didn't have to manually add the a component to the :home View file\nbut that's where running from configuration files like we do at BBC News would come in handy \n(but that would have been too complicated an implementation for the sake of such a \nbasic example as required for this post).\n\n\u3055\u3041 `:home` View \u30d5\u30a1\u30a4\u30eb\u3082\u307e\u305f\u958b\u767a\u3067\u304d\u3001\u305d\u3053\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u7c21\u5358\u306b\u8ffd\u52a0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\n\u4fbf\u5229\u306b\u306a\u308b\u3067\u3042\u308d\u3046BBC\u30cb\u30e5\u30fc\u30b9\u3067\u3084\u3063\u3066\u3044\u308b\u306e\u3068\u540c\u69d8\u306b\u3001\u30b3\u30f3\u30d5\u30a3\u30b0\u30d5\u30a1\u30a4\u30eb\u304b\u3089\u5b9f\u884c\u3057\u3066\u3044\u308b `:home` View \u30d5\u30a1\u30a4\u30eb\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u624b\u52d5\u3067\u8ffd\u52a0\u3059\u308b\u5fc5\u8981\u304c\u306a\u3044\u3068\u3001\u3088\u308a\u7c21\u5358\u306b\u306a\u308b(\u3057\u304b\u3057\u305d\u308c\u306f\u3001\u3053\u306e\u6295\u7a3f\u306b\u5fc5\u8981\u306a\u57fa\u672c\u7684\u306a\u4f8b\u306e\u3088\u3046\u306a\u76ee\u7684\u306b\u5bfe\u3057\u3066\u5b9f\u88c5\u304c\u8907\u96d1\u904e\u304e\u3067\u3042\u3063\u305f\u3060\u308d\u3046)\u3002\n\n### Presenters\n\n> Now let's take a look at one of our Presenters, in this case the Presenter for our b component\u2026\n\n\u3055\u3066\u3001Presenter \u306e 1\u3064\u3092\u898b\u3066\u3044\u3053\u3046\u3002\u3053\u3053\u3067\u306f b \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u306b\u5bfe\u5fdc\u3059\u308b Presenter \u306e\u4f8b\u3067\u3042\u308b\u3002\n\n```\nrequire 'app/presenters/base'\nrequire 'app/models/b'\n\nclass Presenters::B < Presenters::Base\n  attr_reader :run, :name, :age\n\n  def initialize\n    @run = true\n\n    model = B.new('Mark', '99')\n    prepare_view_data({ :name => model.name, :age => model.age })\n  end\nend\n```\n> \u2026as you can see we load a specific Model for this component and then generate our View data by \npassing the Model information through to a prepare_view_data method (see below for the implementation details).\n\n\u3054\u89a7\u306e\u901a\u308a\u3001\u3053\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u5bfe\u5fdc\u3059\u308b\u7279\u5b9a\u306e Model \u3092\u8aad\u307f\u8fbc\u307f\u3001Model \u60c5\u5831\u3092 prepare_view_data \u30e1\u30bd\u30c3\u30c9\u306b\u6e21\u3059\u3053\u3068\u3067 View \u30c7\u30fc\u30bf\u3092\u751f\u6210\u3059\u308b(\u8a73\u7d30\u306a\u5b9f\u88c5\u306f\u4e0b\u8a18\u3092\u53c2\u7167\u306e\u3053\u3068)\u3002\n\n> The Base Presenter which our component Presenters inherit from is very straight forward as \nyou can see from the following example\u2026\n\n\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e Presenters \u306e\u7d99\u627f\u5143\u3067\u3042\u308b Base Presenter \u306f\u3001\u4e0b\u8a18\u306e\u4f8b\u304b\u3089\u5206\u304b\u308b\u901a\u308a\u3001\u7406\u89e3\u304c\u3068\u3066\u3082\u5bb9\u6613\u3067\u3042\u308b\u3002\n\n```\nmodule Presenters\n  class Base\n    attr_accessor :model\n\n    def prepare_view_data hash\n      hash.each do |name, value|\n        instance_variable_set(\"@#{name}\", value)\n      end\n    end\n  end\nend\n```\n\n> \u2026it's just a module namespace with a base class that has a single method prepare_view_data which \ndynamically generates instance variables based on the data we passed through from the \ninheriting Presenter class and which then are usable within the View.\n\n\u7d99\u627f\u5148 Presenter \u30af\u30e9\u30b9\u304b\u3089\u6e21\u3055\u308c\u308b\u30c7\u30fc\u30bf\u306b\u57fa\u3065\u304f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u5909\u6570\u3092\u76f4\u63a5\u751f\u6210\u3057\u3001\u304b\u3064 View \u3067\u4f7f\u7528\u53ef\u80fd\u306a prepare_view_data \u30e1\u30bd\u30c3\u30c9\u30921\u3064\u3060\u3051\u6301\u3064\u57fa\u5e95\u30af\u30e9\u30b9\u3092\u542b\u3080\u3001\u5358\u306a\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u540d\u524d\u7a7a\u9593\u3067\u3042\u308b\u3002\n\n## Conclusion - \u7d50\u3073\n\n> That's all there is to it as far as understanding the Presenter pattern. It's a nice clean solution for componentising your different page features and keeping your code more easily maintainable.\n\nPresenter \u30d1\u30bf\u30fc\u30f3\u3092\u7406\u89e3\u3059\u308b\u9650\u308a\u3067\u306f\u3001\u3053\u308c\u3067\u5168\u90e8\u3060\u3002\nPresenter \u30d1\u30bf\u30fc\u30f3\u306f\u3001\u7570\u306a\u308b\u30da\u30fc\u30b8\u6a5f\u80fd\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u5316\u306b\u5bfe\u3059\u308b\u660e\u78ba\u3067\u826f\u3044\u30bd\u30ea\u30e5\u30fc\u30b7\u30e7\u30f3\u3067\u3042\u308a\u3001\u30b3\u30fc\u30c9\u306e\u4fdd\u5b88\u304c\u3088\u308a\u7c21\u5358\u306b\u306a\u308b\u3002\n\n> I've created a repo on GitHub called MVCP which is written in Ruby and uses the Sinatra web framework. Note: I had some help from my colleague Simon in cleaning up and refactoring some of the code (it may only have been minor changes but as with all good refactorings it made a massive difference to the quality of the code, so thanks to him for helping out).\n\nGitHub \u306b Ruby \u3067\u66f8\u304b\u308c\u3001Sinatra web framework \u3092\u7528\u3044\u305f MVCP \u3068\u3044\u3046\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u4f5c\u3063\u305f\u3002\n\u6ce8\u610f: \u540c\u50da\u306e Simon \u306b\u30b3\u30fc\u30c9\u306e\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3068\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3092\u3044\u304f\u3089\u304b\u52a9\u3051\u3066\u3082\u3089\u3063\u305f(\u30de\u30a4\u30ca\u30fc\u30c1\u30a7\u30f3\u30b8\u306b\u7559\u307e\u3063\u305f\u304b\u3082\u3057\u308c\u306a\u3044\u304c\u3001\u5168\u3066\u306e\u512a\u308c\u305f\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3068\u540c\u69d8\u306b\u3001\u30b3\u30fc\u30c9\u306e\u54c1\u8cea\u304c\u5287\u7684\u306b\u5909\u308f\u3063\u305f\u3002\u5f7c\u3089\u306e\u52a9\u3051\u306b\u5927\u5909\u611f\u8b1d\u3059\u308b\u3002)\n\n> If you have any questions then feel free to contact me either here on twitter and let me know your thoughts.\n\n\u3082\u3057\u8cea\u554f\u304c\u3042\u308c\u3070\u3001\u3053\u3061\u3089\u304b twitter \u3067\u6c17\u8efd\u306b\u9023\u7d61\u3057\u3066\u3044\u305f\u3060\u304d\u3001\u3042\u306a\u305f\u306e\u8003\u3048\u3092\u6559\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u8a33\u8005 \u7d50\u3073\u30fb\u8b1d\u8f9e\n\u3082\u3057\u8cea\u554f\u304c\u3042\u308c\u3070\u3054\u6c17\u8efd\u306b\u3001\u3068\u3044\u3046\u3053\u3068\u3060\u3063\u305f\u306e\u3067\u3001Twitter \u3067\u8457\u8005\u306e @integralist \u3055\u3093\u306b\u3001\u3053\u306e\u8a18\u4e8b\u3092\u7ffb\u8a33\u3057\u3066\u826f\u3044\u304b\u5c0b\u306d\u305f\u3068\u3053\u308d\u3001\u5feb\u8afe\u3057\u3066\u9802\u304d\u307e\u3057\u305f\u3002Many thanks:)\n\n@integralist \u3055\u3093\u306e\u8a18\u4e8b\u306f\u4e0b\u8a18\u304b\u3089\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\n\nhttp://www.integralist.co.uk/index.html\n", "tags": ["MVCP", "\u7ffb\u8a33", "TechEnglish"]}