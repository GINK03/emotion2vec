{"context": " More than 1 year has passed since last update.CI\u306e\u691c\u8a3c\u7528\u3068\u3057\u3066AWS\u4e0a\u306eDocker\u30b3\u30f3\u30c6\u30ca\u4e0a\u306bJenkins\u306e\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\u3001GitHub\u3068\u9023\u643a\u3057\u3066\u81ea\u52d5\u30d3\u30eb\u30c9\u3055\u305b\u308b\u3002\n\u30d3\u30eb\u30c9\u5bfe\u8c61\u3068\u3057\u3066\u306f\u3001Hadoop\u4e0a\u306e\u30d0\u30c3\u30c1\u3092\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3001\"Asakusa Framework\"\u3067\u69cb\u7bc9\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3002\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u4e0a\u304c\u308a\u3001\u4ee5\u524d\u306fMaven\u30d9\u30fc\u30b9\u306e\u30d3\u30eb\u30c9\u65b9\u5f0f\u3060\u3063\u305f\u3082\u306e\u304cGradle\u30d9\u30fc\u30b9\u306b\u5909\u66f4\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u305d\u308c\u306b\u4f34\u3044Jenkins\u306e\u66f8\u304d\u65b9\u3082\u5909\u308f\u3063\u305f\u306e\u3067\u624b\u9806\u30e1\u30e2\u3002\n\n\u5099\u8003\n\u4eca\u56de\u306fGitHub\u3068\u306e\u9023\u643a\u306e\u78ba\u8a8d\u306e\u305f\u3081\u3001Jenkins\u3092\u624b\u3063\u53d6\u308a\u65e9\u304f\u52d5\u304b\u3059\u65b9\u6cd5\u3068\u3057\u3066Docker\u30b3\u30f3\u30c6\u30ca\u3092\u9078\u629e\u3057\u305f\u304c\u3001\u8272\u3005\u306a\u8a00\u8a9e\u306e\u30d3\u30eb\u30c9\u74b0\u5883\u306b\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u3067\u306f\u306a\u304fJenkins\u5c02\u7528\u306eVM\u3092\u7528\u610f\u3057\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3046\n\nIndex\n\n\u524d\u63d0\u74b0\u5883\nAWS\u4e0a\u306eVM\u3068GitHub\u304c\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\nDocker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067Jenkins\u8d77\u52d5\nGitHub\u3068\u9023\u643a\u3059\u308bJenkins\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\nGitHub\u5074\u306e\u8a2d\u5b9a\nAsakusaFramework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u81ea\u52d5\u30d3\u30eb\u30c9\n\n\n\u524d\u63d0\u74b0\u5883\n\nAWS EC2 \u4e0a\u306eVM (Amazon Linux AMI 2015.03.1)\nDocker 1.7.1\nJenkins 1.625.2 (Docker\u4e0a\u306e\u30b3\u30f3\u30c6\u30ca\uff09\nAWS\u3078\u306e\u767b\u9332\u3084\u4eee\u60f3\u30de\u30b7\u30f3\u767b\u9332\u306f\u7d42\u308f\u3063\u3066\u3044\u308b\u524d\u63d0\nGitHub\u306e\u30e6\u30fc\u30b6\u767b\u9332\u306f\u7d42\u308f\u3063\u3066\u3044\u308b\u524d\u63d0\n\n\nAWS\u4e0a\u306eVM\u3068\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\n\u4ee5\u4e0b\uff12\u3064\u306e\u901a\u4fe1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3001AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u8a2d\u5b9a\u3092\u3057\u3066\u304a\u304f\u3002\n(1) GitHub\u304b\u3089Jenkins\u3078\u901a\u77e5\u3059\u308b\u969b\u306e\u63a5\u7d9a\n\u3000GitHub\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u63a5\u7d9a\u3092\u8a31\u53ef\n(2) Jenkins\u306e\u30d6\u30e9\u30a6\u30b6GUI\u3078\u306e\u63a5\u7d9a\uff088080\u756a\u30dd\u30fc\u30c8\uff09\n\u3000\u30d6\u30e9\u30a6\u30b6\u304b\u3089Jenkins\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308bPC\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u63a5\u7d9a\u3092\u8a31\u53ef\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n\n\u203b\"192.30.252.0/22\"2015/11/18\u6642\u70b9\u306eGitHub\u306eIP\u30a2\u30c9\u30ec\u30b9\u3002 \u6700\u65b0\u306e\u60c5\u5831\u306fhttps://api.github.com/meta \u306e \"hooks\"\u3092\u53c2\u7167\u3059\u308b\u3068\u5206\u304b\u308b\u3002\n\nDocker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067Jenkins\u8d77\u52d5\nVM\u306bssh\u3067\u30ed\u30b0\u30a4\u30f3\u3002\nDocker\u672a\u5c0e\u5165\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3059\u308c\u3070Docker\u304c\u5c0e\u5165\u3055\u308c\u308b\u3002\n\ndocker\u5c0e\u5165\uff5e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\nsudo yum install -y docker\nsudo /etc/init.d/docker start\nsudo chkconfig docker on\nsudo docker -v\n Docker version 1.7.1, build 786b29d/1.7.1\n\n\njenkins\u306fDockerHub\u3067\u516c\u5f0f\u306e\u74b0\u5883\u69cb\u7bc9\u6e08\u307f\u30a4\u30e1\u30fc\u30b8\u304c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066Jenkins\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u3001jenkins\u306e\u30d3\u30eb\u30c9\u7d50\u679c\u3092\u53c2\u7167\u3057\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001'share_docker/jenkins'\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092jenkins\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u308b\u3002\n\njenkins\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\nmkdir -p /home/ec2-user/share_docker/jenkins\nsudo docker run -d -h jenkinstest --name jenkinstest -p 8080:8080 -v /home/ec2-user/share_docker/jenkins:/var/jenkins_home:rw jenkins\n\n\n\ndocker\u8d77\u52d5\u30d1\u30e9\u30e1\u30fc\u30bf\n-h jenkinstest\n\u3000>\u3000\u751f\u6210\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u30db\u30b9\u30c8\u540d\u3092'jenkinstest'\u306b\u8a2d\u5b9a\n--name jenkinstest\n\u3000> \u30b3\u30f3\u30c6\u30ca\u540d\u3092\u6307\u5b9a\n-p 8080:8080\n\u3000> VM\u306e8080\u756a\u30dd\u30fc\u30c8\u3078\u306e\u63a5\u7d9a\u3092Jenkins\u306e8080\u756a\u306b\u30de\u30c3\u30d4\u30f3\u30b0\n-v /home/ec2-user/share_docker/jenkins:/var/jenkins_home:rw\n\u3000> VM\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u5171\u6709\n\n\n\nJenkins\u6c0f\u8d77\u52d5\u78ba\u8a8d\n\u30a4\u30e1\u30fc\u30b8\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u8d77\u52d5\u51e6\u7406\u3067\u3057\u3070\u3057\u5f85\u3064\u3002\u8ffd\u52a0\u306e\u8a2d\u5b9a\u3092\u7279\u306b\u3057\u306a\u304f\u3068\u3082\u3001Jenkins\u304c\u7acb\u3061\u4e0a\u304c\u308a8080\u756a\u30dd\u30fc\u30c8\u3067\u5f85\u53d7\u3059\u308b\u306e\u3067\u3001\u8d77\u52d5\u78ba\u8a8d\u306b\u306fDocker\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308bVM\u306e8080\u7248\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\u306a\u304a\u3001\u63a5\u7d9a\u5148\u306fAWS\u4e0a\u306eVM\u306e\u305f\u3081\u3001IP\u30a2\u30c9\u30ec\u30b9\u306fVM\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\"\u30d1\u30d6\u30ea\u30c3\u30afIP\"\u306e\u30a2\u30c9\u30ec\u30b9\u3068\u306a\u308b\u3002AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u300d\u306e\u4e00\u89a7\u304b\u3089\u78ba\u8a8d\u53ef\u80fd\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u51fa\u308c\u3070\u8d77\u52d5\u306f\u5b8c\u4e86\u3002\n\n\nGitHub\u3068\u9023\u643a\u3059\u308bJenkins\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\nGitHub\u3068Jenkins\u3092\u9023\u643a\u3059\u308b\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308b\u304c\u3001\u4eca\u56de\u306fJenkins\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u3072\u3068\u3064\u3001\u300cGitHub Plugin\u300d\u3092\u4f7f\u3046\u3002\n\nGitHub Plugin\u306e\u5c0e\u5165\n\u30e1\u30cb\u30e5\uff0d\u304b\u3089\u300cJenkins\u306e\u7ba1\u7406\u300d\uff1e\u300c\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u7ba1\u7406\u300d\u3068\u8fbf\u3063\u3066\u300cGitHub Plugin\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3060\u3051\u3002\n\n\u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u307e\u3068\u3081\u3066\u5165\u308c\u3066\u304f\u308c\u308b\u3002\n\n\nGitHub\u304b\u3089\u6700\u65b0\u7248\u3092\u53d6\u5f97\u3059\u308bJenkins\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\nJenkins\u306e\u65b0\u898f\u30b8\u30e7\u30d6\u3092\u4f5c\u3063\u3066\u4fdd\u5b58\u3059\u308b\u3002\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3002\n-\u300c\u30d5\u30ea\u30fc\u30b9\u30bf\u30a4\u30eb\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d3\u30eb\u30c9\u300d\n-\u300c\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u7ba1\u7406\u300d\n\u3000GitHub project\uff1a\u81ea\u5206\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eURL\n\u3000\uff08GitHub\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30da\u30fc\u30b8\u3067\u3001\"HTTPS clone URL\"\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308bURL)\n-\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u7ba1\u7406\uff1aGit\n\u3000Repository URL\uff1a\u81ea\u5206\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eURL\u306e\u5148\u982d\u3092[https://\uff5e]\u304b\u3089[git://\uff5e\u300d\u306b\u5909\u66f4\u3057\u305fURL\n\u3000Credentials\uff1a\u81ea\u5206\u306egithub\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u60c5\u5831\u3092\u8ffd\u52a0\uff06\u6307\u5b9a\n- Branch Specifier (blank for 'any')\uff1a*/master\n- \u30d3\u30eb\u30c9\u30fb\u30c8\u30ea\u30ac\u306e\u300cBuild when a change is pushed to GitHub\u300d\u306b\u30c1\u30a7\u30c3\u30af\n\n\nGitHub\u5074\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c8\u30c3\u30d7\u753b\u9762\u304b\u3089\u300cSettings\u300d\uff1e\u300cWebhooks & services\u300d\u3068\u8fbf\u3063\u3066\u3001\"Add service\"\u30dc\u30bf\u30f3\u304b\u3089\"Jenkins(GitHub plugin)\"\u3092\u9078\u629e\u3059\u308b\u3002\n\n\nJenkins hook url\uff1ahttp://[VM\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP]:8080/github-webhook/\n(\u203b\u672b\u5c3e\u306b '/' \u3092\u4ed8\u3051\u5fd8\u308c\u308b\u3068\u901a\u3089\u306a\u3044\u306e\u3067\u6ce8\u610f)\nActive\u306b\u30c1\u30a7\u30c3\u30af\n\n\n\n\nJenkins-GitHub\u306e\u9023\u643a\u30c1\u30a7\u30c3\u30af\n\u300cTest Service\u300d\u3092\u62bc\u3059\u3068Jenkins\u306b\u30c6\u30b9\u30c8\u901a\u77e5\u3092\u9001\u4fe1\u3059\u308b\u3002\nJenkins\u5074\u306b\u901a\u77e5\u304c\uff08\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u7b49\u3067\u30d6\u30ed\u30c3\u30af\u3055\u308c\u305a\u306b\uff09\u5230\u7740\u3057\u3066\u3044\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u300cGitHub Hook Log\u300d\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n\n\nAsakusaFramework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u81ea\u52d5\u30d3\u30eb\u30c9\nAsakusa Gradle Plugin \u7528\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u4f7f\u3063\u3066\u4f5c\u3063\u305fAsakusaFramework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308c\u3070\u3001Gradle\u30e9\u30c3\u30d1\u30fc\uff08gradlew\uff09\u304c\u30c7\u30d5\u30a9\u3067\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30d3\u30eb\u30c9\u74b0\u5883\u306bGradle\u3092\u5165\u308c\u306a\u304a\u3059\u5fc5\u8981\u306f\u306a\u3044\u3002\n\u306a\u306e\u3067\u3001Jenkins\u3067\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u300c\u30d3\u30eb\u30c9\u300d\u306b\u300c\u30b7\u30a7\u30eb\u306e\u5b9f\u884c\u300d\u3092\u8ffd\u52a0\u3057\u3066\u3001\u4ee5\u4e0b\u8a18\u8ff0\u3059\u308b\u3060\u3051\u3002\n./gradlew clean assemble\n\n\u3042\u3068\u306fGitHub\u306b\u5909\u66f4\u304cPush\u3055\u308c\u308b\u3068\u52dd\u624b\u306b\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u3002\n\u305f\u3060\u3057\u3001\u3053\u306e\u4f8b\u3067\u306f\u30d3\u30eb\u30c9\u74b0\u5883\u306bASAKUSA_HOME\u306e\u8a2d\u5b9a\u3084Asakusa\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u307f\u3067\u30c6\u30b9\u30c8\uff08check\u30bf\u30b9\u30af\uff09\u306f\u4e0d\u53ef\u3002\n\nCI\u306e\u691c\u8a3c\u7528\u3068\u3057\u3066AWS\u4e0a\u306eDocker\u30b3\u30f3\u30c6\u30ca\u4e0a\u306bJenkins\u306e\u74b0\u5883\u3092\u7acb\u3061\u4e0a\u3052\u3001GitHub\u3068\u9023\u643a\u3057\u3066\u81ea\u52d5\u30d3\u30eb\u30c9\u3055\u305b\u308b\u3002\n\n\u30d3\u30eb\u30c9\u5bfe\u8c61\u3068\u3057\u3066\u306f\u3001Hadoop\u4e0a\u306e\u30d0\u30c3\u30c1\u3092\u8a18\u8ff0\u3059\u308b\u305f\u3081\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3001[\"Asakusa Framework\"](http://docs.asakusafw.com/latest/release/ja/html/index.html)\u3067\u69cb\u7bc9\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3002\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u4e0a\u304c\u308a\u3001\u4ee5\u524d\u306fMaven\u30d9\u30fc\u30b9\u306e\u30d3\u30eb\u30c9\u65b9\u5f0f\u3060\u3063\u305f\u3082\u306e\u304cGradle\u30d9\u30fc\u30b9\u306b\u5909\u66f4\u306b\u306a\u3063\u3066\u304a\u308a\u3001\u305d\u308c\u306b\u4f34\u3044Jenkins\u306e\u66f8\u304d\u65b9\u3082\u5909\u308f\u3063\u305f\u306e\u3067\u624b\u9806\u30e1\u30e2\u3002\n\n####\u5099\u8003\n\u4eca\u56de\u306fGitHub\u3068\u306e\u9023\u643a\u306e\u78ba\u8a8d\u306e\u305f\u3081\u3001Jenkins\u3092\u624b\u3063\u53d6\u308a\u65e9\u304f\u52d5\u304b\u3059\u65b9\u6cd5\u3068\u3057\u3066Docker\u30b3\u30f3\u30c6\u30ca\u3092\u9078\u629e\u3057\u305f\u304c\u3001\u8272\u3005\u306a\u8a00\u8a9e\u306e\u30d3\u30eb\u30c9\u74b0\u5883\u306b\u3059\u308b\u3053\u3068\u3092\u8003\u3048\u308b\u3068\u3001\u30b3\u30f3\u30c6\u30ca\u3067\u306f\u306a\u304fJenkins\u5c02\u7528\u306eVM\u3092\u7528\u610f\u3057\u305f\u65b9\u304c\u826f\u3044\u3068\u601d\u3046\n\n#Index\n- \u524d\u63d0\u74b0\u5883\n- AWS\u4e0a\u306eVM\u3068GitHub\u304c\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\n- Docker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067Jenkins\u8d77\u52d5\n- GitHub\u3068\u9023\u643a\u3059\u308bJenkins\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\n- GitHub\u5074\u306e\u8a2d\u5b9a\n- AsakusaFramework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u81ea\u52d5\u30d3\u30eb\u30c9\n\n##\u524d\u63d0\u74b0\u5883\n- AWS EC2 \u4e0a\u306eVM (Amazon Linux AMI 2015.03.1)\n- Docker 1.7.1\n- Jenkins 1.625.2 (Docker\u4e0a\u306e\u30b3\u30f3\u30c6\u30ca\uff09\n- AWS\u3078\u306e\u767b\u9332\u3084\u4eee\u60f3\u30de\u30b7\u30f3\u767b\u9332\u306f\u7d42\u308f\u3063\u3066\u3044\u308b\u524d\u63d0\n- GitHub\u306e\u30e6\u30fc\u30b6\u767b\u9332\u306f\u7d42\u308f\u3063\u3066\u3044\u308b\u524d\u63d0\n\n##AWS\u4e0a\u306eVM\u3068\u901a\u4fe1\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u8a2d\u5b9a\n\u4ee5\u4e0b\uff12\u3064\u306e\u901a\u4fe1\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3001[AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb](https://aws.amazon.com/jp/console/)\u3067\u901a\u4fe1\u3092\u8a31\u53ef\u3059\u308b\u8a2d\u5b9a\u3092\u3057\u3066\u304a\u304f\u3002\n(1) GitHub\u304b\u3089Jenkins\u3078\u901a\u77e5\u3059\u308b\u969b\u306e\u63a5\u7d9a\n\u3000GitHub\u306eIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u63a5\u7d9a\u3092\u8a31\u53ef\n(2) Jenkins\u306e\u30d6\u30e9\u30a6\u30b6GUI\u3078\u306e\u63a5\u7d9a\uff088080\u756a\u30dd\u30fc\u30c8\uff09\n\u3000\u30d6\u30e9\u30a6\u30b6\u304b\u3089Jenkins\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308bPC\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u304b\u3089\u306e\u63a5\u7d9a\u3092\u8a31\u53ef\n\u4f8b\u3048\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 12.22.00.png](https://qiita-image-store.s3.amazonaws.com/0/100910/6c40379e-6af4-90bf-cb56-48e158d0abdd.png)\n\n\u203b\"192.30.252.0/22\"2015/11/18\u6642\u70b9\u306eGitHub\u306eIP\u30a2\u30c9\u30ec\u30b9\u3002 \u6700\u65b0\u306e\u60c5\u5831\u306fhttps://api.github.com/meta \u306e \"hooks\"\u3092\u53c2\u7167\u3059\u308b\u3068\u5206\u304b\u308b\u3002\n\n##Docker\u30b3\u30f3\u30c6\u30ca\u4e0a\u3067Jenkins\u8d77\u52d5\nVM\u306bssh\u3067\u30ed\u30b0\u30a4\u30f3\u3002\nDocker\u672a\u5c0e\u5165\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3059\u308c\u3070Docker\u304c\u5c0e\u5165\u3055\u308c\u308b\u3002\n\n```bash:docker\u5c0e\u5165\uff5e\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\nsudo yum install -y docker\nsudo /etc/init.d/docker start\nsudo chkconfig docker on\nsudo docker -v\n Docker version 1.7.1, build 786b29d/1.7.1\n```\n\njenkins\u306fDockerHub\u3067\u516c\u5f0f\u306e\u74b0\u5883\u69cb\u7bc9\u6e08\u307f\u30a4\u30e1\u30fc\u30b8\u304c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u3053\u308c\u3092\u4f7f\u3063\u3066Jenkins\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308b\u3002\n\u3053\u306e\u4f8b\u3067\u306f\u3001jenkins\u306e\u30d3\u30eb\u30c9\u7d50\u679c\u3092\u53c2\u7167\u3057\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u3001'share_docker/jenkins'\u3068\u3044\u3046\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092jenkins\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u3057\u3066\u30de\u30a6\u30f3\u30c8\u3057\u3066\u3044\u308b\u3002\n\n```bash:jenkins\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\nmkdir -p /home/ec2-user/share_docker/jenkins\nsudo docker run -d -h jenkinstest --name jenkinstest -p 8080:8080 -v /home/ec2-user/share_docker/jenkins:/var/jenkins_home:rw jenkins\n```\n```bash:docker\u8d77\u52d5\u30d1\u30e9\u30e1\u30fc\u30bf\n-h jenkinstest\n\u3000>\u3000\u751f\u6210\u3059\u308b\u30b3\u30f3\u30c6\u30ca\u306e\u30db\u30b9\u30c8\u540d\u3092'jenkinstest'\u306b\u8a2d\u5b9a\n--name jenkinstest\n\u3000> \u30b3\u30f3\u30c6\u30ca\u540d\u3092\u6307\u5b9a\n-p 8080:8080\n\u3000> VM\u306e8080\u756a\u30dd\u30fc\u30c8\u3078\u306e\u63a5\u7d9a\u3092Jenkins\u306e8080\u756a\u306b\u30de\u30c3\u30d4\u30f3\u30b0\n-v /home/ec2-user/share_docker/jenkins:/var/jenkins_home:rw\n\u3000> VM\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30b3\u30f3\u30c6\u30ca\u306b\u30de\u30a6\u30f3\u30c8\u3057\u3066\u5171\u6709\n```\n###Jenkins\u6c0f\u8d77\u52d5\u78ba\u8a8d\n\u30a4\u30e1\u30fc\u30b8\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3068\u8d77\u52d5\u51e6\u7406\u3067\u3057\u3070\u3057\u5f85\u3064\u3002\u8ffd\u52a0\u306e\u8a2d\u5b9a\u3092\u7279\u306b\u3057\u306a\u304f\u3068\u3082\u3001Jenkins\u304c\u7acb\u3061\u4e0a\u304c\u308a8080\u756a\u30dd\u30fc\u30c8\u3067\u5f85\u53d7\u3059\u308b\u306e\u3067\u3001\u8d77\u52d5\u78ba\u8a8d\u306b\u306fDocker\u304c\u52d5\u4f5c\u3057\u3066\u3044\u308bVM\u306e8080\u7248\u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n\u306a\u304a\u3001\u63a5\u7d9a\u5148\u306fAWS\u4e0a\u306eVM\u306e\u305f\u3081\u3001IP\u30a2\u30c9\u30ec\u30b9\u306fVM\u306b\u5272\u308a\u5f53\u3066\u3089\u308c\u305f\"\u30d1\u30d6\u30ea\u30c3\u30afIP\"\u306e\u30a2\u30c9\u30ec\u30b9\u3068\u306a\u308b\u3002AWS\u30de\u30cd\u30b8\u30e1\u30f3\u30c8\u30b3\u30f3\u30bd\u30fc\u30eb\u306e\u300c\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u300d\u306e\u4e00\u89a7\u304b\u3089\u78ba\u8a8d\u53ef\u80fd\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u51fa\u308c\u3070\u8d77\u52d5\u306f\u5b8c\u4e86\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 11.19.56.png](https://qiita-image-store.s3.amazonaws.com/0/100910/eb833433-42f7-6b32-9237-9f08a0878968.png)\n\n##GitHub\u3068\u9023\u643a\u3059\u308bJenkins\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\nGitHub\u3068Jenkins\u3092\u9023\u643a\u3059\u308b\u65b9\u6cd5\u306f\u3044\u304f\u3064\u304b\u3042\u308b\u304c\u3001\u4eca\u56de\u306fJenkins\u306e\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u3072\u3068\u3064\u3001\u300cGitHub Plugin\u300d\u3092\u4f7f\u3046\u3002\n###GitHub Plugin\u306e\u5c0e\u5165\n\u30e1\u30cb\u30e5\uff0d\u304b\u3089\u300cJenkins\u306e\u7ba1\u7406\u300d\uff1e\u300c\u30d7\u30e9\u30b0\u30a4\u30f3\u306e\u7ba1\u7406\u300d\u3068\u8fbf\u3063\u3066\u300cGitHub Plugin\u300d\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3060\u3051\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 12.32.15.png](https://qiita-image-store.s3.amazonaws.com/0/100910/ec34f3fe-d001-9d30-fec1-54ca9aeb8b85.png)\n\n\u4f9d\u5b58\u95a2\u4fc2\u306e\u3042\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3082\u307e\u3068\u3081\u3066\u5165\u308c\u3066\u304f\u308c\u308b\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 12.33.01.png](https://qiita-image-store.s3.amazonaws.com/0/100910/dca098a7-89a4-5973-602b-8834751e3f88.png)\n\n##GitHub\u304b\u3089\u6700\u65b0\u7248\u3092\u53d6\u5f97\u3059\u308bJenkins\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\nJenkins\u306e\u65b0\u898f\u30b8\u30e7\u30d6\u3092\u4f5c\u3063\u3066\u4fdd\u5b58\u3059\u308b\u3002\u30dd\u30a4\u30f3\u30c8\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u3002\n-\u300c\u30d5\u30ea\u30fc\u30b9\u30bf\u30a4\u30eb\u30fb\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d3\u30eb\u30c9\u300d\n-\u300c\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u7ba1\u7406\u300d\n\u3000GitHub project\uff1a\u81ea\u5206\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eURL\n\u3000\uff08GitHub\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30da\u30fc\u30b8\u3067\u3001\"HTTPS clone URL\"\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308bURL)\n-\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u7ba1\u7406\uff1aGit\n\u3000Repository URL\uff1a\u81ea\u5206\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eURL\u306e\u5148\u982d\u3092[https://\uff5e]\u304b\u3089[git://\uff5e\u300d\u306b\u5909\u66f4\u3057\u305fURL\n\u3000Credentials\uff1a\u81ea\u5206\u306egithub\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u60c5\u5831\u3092\u8ffd\u52a0\uff06\u6307\u5b9a\n- Branch Specifier (blank for 'any')\uff1a*/master\n- \u30d3\u30eb\u30c9\u30fb\u30c8\u30ea\u30ac\u306e\u300cBuild when a change is pushed to GitHub\u300d\u306b\u30c1\u30a7\u30c3\u30af\n\n![image1.png](https://qiita-image-store.s3.amazonaws.com/0/100910/5ca6249d-3b97-3853-b8b3-a0db97de9d31.png)\n\n##GitHub\u5074\u306e\u8a2d\u5b9a\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30c8\u30c3\u30d7\u753b\u9762\u304b\u3089\u300cSettings\u300d\uff1e\u300cWebhooks & services\u300d\u3068\u8fbf\u3063\u3066\u3001\"Add service\"\u30dc\u30bf\u30f3\u304b\u3089\"Jenkins(GitHub plugin)\"\u3092\u9078\u629e\u3059\u308b\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 12.43.25.png](https://qiita-image-store.s3.amazonaws.com/0/100910/19c249c2-d6f7-0a66-2cd4-8cc46a663536.png)\n\n- Jenkins hook url\uff1ahttp://[VM\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP]:8080/github-webhook/\n  (\u203b\u672b\u5c3e\u306b '/' \u3092\u4ed8\u3051\u5fd8\u308c\u308b\u3068\u901a\u3089\u306a\u3044\u306e\u3067\u6ce8\u610f)\n- Active\u306b\u30c1\u30a7\u30c3\u30af\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 12.56.02.png](https://qiita-image-store.s3.amazonaws.com/0/100910/89c26cbd-cc27-8a2b-daac-0368cb288fb1.png)\n\n###Jenkins-GitHub\u306e\u9023\u643a\u30c1\u30a7\u30c3\u30af\n\u300cTest Service\u300d\u3092\u62bc\u3059\u3068Jenkins\u306b\u30c6\u30b9\u30c8\u901a\u77e5\u3092\u9001\u4fe1\u3059\u308b\u3002\nJenkins\u5074\u306b\u901a\u77e5\u304c\uff08\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u7b49\u3067\u30d6\u30ed\u30c3\u30af\u3055\u308c\u305a\u306b\uff09\u5230\u7740\u3057\u3066\u3044\u308c\u3070\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u300cGitHub Hook Log\u300d\u306b\u51fa\u529b\u3055\u308c\u308b\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 12.55.23.png](https://qiita-image-store.s3.amazonaws.com/0/100910/c66858cc-a368-3e74-8d53-c138af4758be.png)\n\n##AsakusaFramework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u81ea\u52d5\u30d3\u30eb\u30c9\n[Asakusa Gradle Plugin \u7528\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8](http://docs.asakusafw.com/latest/release/ja/html/application/gradle-plugin.html)\u3092\u4f7f\u3063\u3066\u4f5c\u3063\u305fAsakusaFramework\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u3042\u308c\u3070\u3001Gradle\u30e9\u30c3\u30d1\u30fc\uff08gradlew\uff09\u304c\u30c7\u30d5\u30a9\u3067\u5165\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u30d3\u30eb\u30c9\u74b0\u5883\u306bGradle\u3092\u5165\u308c\u306a\u304a\u3059\u5fc5\u8981\u306f\u306a\u3044\u3002\n\u306a\u306e\u3067\u3001Jenkins\u3067\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u300c\u30d3\u30eb\u30c9\u300d\u306b\u300c\u30b7\u30a7\u30eb\u306e\u5b9f\u884c\u300d\u3092\u8ffd\u52a0\u3057\u3066\u3001\u4ee5\u4e0b\u8a18\u8ff0\u3059\u308b\u3060\u3051\u3002\n```./gradlew clean assemble```\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 13.17.21.png](https://qiita-image-store.s3.amazonaws.com/0/100910/5ad77a6c-a6b8-c37d-1d05-e06c0e08ff04.png)\n\n\u3042\u3068\u306fGitHub\u306b\u5909\u66f4\u304cPush\u3055\u308c\u308b\u3068\u52dd\u624b\u306b\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u3002\n\u305f\u3060\u3057\u3001\u3053\u306e\u4f8b\u3067\u306f\u30d3\u30eb\u30c9\u74b0\u5883\u306bASAKUSA_HOME\u306e\u8a2d\u5b9a\u3084Asakusa\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u307f\u3067\u30c6\u30b9\u30c8\uff08check\u30bf\u30b9\u30af\uff09\u306f\u4e0d\u53ef\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-18 13.23.28.png](https://qiita-image-store.s3.amazonaws.com/0/100910/bd8a1735-d9b3-7ac7-bc0b-69b6395cb488.png)\n\n", "tags": ["GitHub", "Jenkins", "AWS", "AsakusaFramework", "hadoop"]}