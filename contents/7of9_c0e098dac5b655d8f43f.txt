{"tags": ["cppBuilder", "indy", "trap"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002txt: \u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n\nIndy\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\nres = m_IdUDPClient1->ReceiveString(m_host_ipadr, m_port, 300, m_encSJIS);\n\nReceiveString()\u306f\u6307\u5b9a\u306e\u30db\u30b9\u30c8:\u30dd\u30fc\u30c8\u304b\u3089\u306e\u53d7\u4fe1\u3092\u3059\u308b\u51e6\u7406\u3067\u3042\u308b\u304c\u3001\u901a\u4fe1\u56de\u7dda\u304c\u5207\u308c\u305f\u6642\u3001ReceiveString()\u3092\u5b9f\u884c\u3059\u308b\u3068m_host_ipadr\u3068m_port\u304c\u30af\u30ea\u30a2\u3055\u308c\u308b\u3001\u3088\u3046\u3060\u3002\n\u53c2\u7167\u3068\u3057\u3066\u306e\u5f15\u6570\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304b\u306f\u672a\u78ba\u8a8d\u3002\nC++ Builder\u4e0a\u306e\u30d8\u30eb\u30d7\u3067\u306f\n\npublic: __fastcall AnsiString ReceiveString(AnsiString VPeerIP, TIdPort VPeerPort,...\n\n\u3068\u306a\u3063\u3066\u3044\u3066\u3001\u53c2\u7167\u6e21\u3057\u306e\u3088\u3046\u306b\u306f\u898b\u3048\u306a\u3044\u304c\u3002\u3002\u3002\nm_host_ipadr\u3068m_port\u3092\u7528\u3044\u3066 IdUDPClient1\u3092\u63a5\u7d9a\u3001\u9001\u53d7\u4fe1\u3059\u308b\u51e6\u7406\u3092\u5b9a\u671f\u7684\u306b\u3057\u3066\u3044\u305f\u304c\u3001\u901a\u4fe1\u5207\u65ad\u5f8c m_host_ipadr==NULL, m_port=0\u3068\u306a\u308a\u3001\u4ee5\u5f8c\u306e\u9001\u53d7\u4fe1\u304c\u3059\u3079\u3066\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u3002\n\n\u5bfe\u5fdc\u65b9\u6cd5\u3068\u3057\u3066\u306f\n- m_host_ipadr, m_port\u3092\u9000\u907f\u3059\u308b\n- \u5225\u306e\u5909\u6570\u3092\u7528\u610f\u3057\u3066\u3001ReceiveString()\u6642\u306b\u4f7f\u3046\n\u306a\u3069\u304c\u3042\u308b\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u72ec\u81ea\u95a2\u6570\u3092\u4f5c\u3063\u3066\u3001\u5024\u6e21\u3057\u3067m_host_ipadr, m_port\u3092\u6e21\u3057\u3066\u51e6\u7406\u3059\u308b\u3068\u3001\u901a\u4fe1\u5207\u65ad\u6642\u306b\u3053\u308c\u3089\u304c\u30af\u30ea\u30a2\u3055\u308c\u306a\u304f\u3067\u304d\u308b\u3002\n\nString __fastcall MyThread::MyReceiveString(TIdUDPClient *udpPtr, String hostIpadr, unsigned short port, DWORD rcvTimeout_ms, Idglobal::_di_IIdTextEncoding encoding)\n{\n//  IdUDPClient1->ReceiveString(m_hostIpadr, m_port,...)\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5207\u65ad\u6642\u306b m_hostIpadr=NULL, m_port=0\n//  \u306b\u3057\u3066\u3057\u307e\u3046\u3002\u3053\u308c\u3092\u907f\u3051\u308b\u305f\u3081\u3001\u72ec\u81ea\u306e\u95a2\u6570\u3068\u3057\u3066\u5f15\u6570\u3092\u5024\u6e21\u3057\u306b\u3057\u3066\u3001\u3082\u3068\u3082\u3068\u306em_hostIpadr, m_port \u3078\u306f\n//  \u5f71\u97ff\u304c\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n    String res;\n\n    res = udpPtr->ReceiveString(hostIpadr, port, rcvTimeout_ms, encoding);\n    return res;\n}\n\n\n\u4f7f\u3044\u65b9\n#if 1\n            res = MyReceiveString(m_IdUDPClient1, m_host_ipadr, m_port, 300, m_encSJIS);\n#else\n            res = m_IdUDPClient1->ReceiveString(m_host_ipadr, m_port, 300, m_encSJIS);\n#endif\n\n```txt: \u52d5\u4f5c\u78ba\u8a8d\nC++ Builder XE4\n```\n\nIndy\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n```\nres = m_IdUDPClient1->ReceiveString(m_host_ipadr, m_port, 300, m_encSJIS);\n```\n\nReceiveString()\u306f\u6307\u5b9a\u306e\u30db\u30b9\u30c8:\u30dd\u30fc\u30c8\u304b\u3089\u306e\u53d7\u4fe1\u3092\u3059\u308b\u51e6\u7406\u3067\u3042\u308b\u304c\u3001\u901a\u4fe1\u56de\u7dda\u304c\u5207\u308c\u305f\u6642\u3001ReceiveString()\u3092\u5b9f\u884c\u3059\u308b\u3068<font color=red>m_host_ipadr\u3068m_port\u304c\u30af\u30ea\u30a2\u3055\u308c\u308b</font>\u3001\u3088\u3046\u3060\u3002\n\n\u53c2\u7167\u3068\u3057\u3066\u306e\u5f15\u6570\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304b\u306f\u672a\u78ba\u8a8d\u3002\nC++ Builder\u4e0a\u306e\u30d8\u30eb\u30d7\u3067\u306f\n> public: __fastcall AnsiString ReceiveString(AnsiString VPeerIP, TIdPort VPeerPort,...\n\n\u3068\u306a\u3063\u3066\u3044\u3066\u3001\u53c2\u7167\u6e21\u3057\u306e\u3088\u3046\u306b\u306f\u898b\u3048\u306a\u3044\u304c\u3002\u3002\u3002\n\nm_host_ipadr\u3068m_port\u3092\u7528\u3044\u3066 IdUDPClient1\u3092\u63a5\u7d9a\u3001\u9001\u53d7\u4fe1\u3059\u308b\u51e6\u7406\u3092\u5b9a\u671f\u7684\u306b\u3057\u3066\u3044\u305f\u304c\u3001\u901a\u4fe1\u5207\u65ad\u5f8c m_host_ipadr==NULL, m_port=0\u3068\u306a\u308a\u3001\u4ee5\u5f8c\u306e\u9001\u53d7\u4fe1\u304c\u3059\u3079\u3066\u5931\u6557\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u305f\u3002\n\n<hr>\n\u5bfe\u5fdc\u65b9\u6cd5\u3068\u3057\u3066\u306f\n- m_host_ipadr, m_port\u3092\u9000\u907f\u3059\u308b\n- \u5225\u306e\u5909\u6570\u3092\u7528\u610f\u3057\u3066\u3001ReceiveString()\u6642\u306b\u4f7f\u3046\n\u306a\u3069\u304c\u3042\u308b\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u72ec\u81ea\u95a2\u6570\u3092\u4f5c\u3063\u3066\u3001\u5024\u6e21\u3057\u3067m_host_ipadr, m_port\u3092\u6e21\u3057\u3066\u51e6\u7406\u3059\u308b\u3068\u3001\u901a\u4fe1\u5207\u65ad\u6642\u306b\u3053\u308c\u3089\u304c\u30af\u30ea\u30a2\u3055\u308c\u306a\u304f\u3067\u304d\u308b\u3002\n\n\n```cpp\nString __fastcall MyThread::MyReceiveString(TIdUDPClient *udpPtr, String hostIpadr, unsigned short port, DWORD rcvTimeout_ms, Idglobal::_di_IIdTextEncoding encoding)\n{\n//  IdUDPClient1->ReceiveString(m_hostIpadr, m_port,...)\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5207\u65ad\u6642\u306b m_hostIpadr=NULL, m_port=0\n//  \u306b\u3057\u3066\u3057\u307e\u3046\u3002\u3053\u308c\u3092\u907f\u3051\u308b\u305f\u3081\u3001\u72ec\u81ea\u306e\u95a2\u6570\u3068\u3057\u3066\u5f15\u6570\u3092\u5024\u6e21\u3057\u306b\u3057\u3066\u3001\u3082\u3068\u3082\u3068\u306em_hostIpadr, m_port \u3078\u306f\n//  \u5f71\u97ff\u304c\u306a\u3044\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\n\tString res;\n\n\tres = udpPtr->ReceiveString(hostIpadr, port, rcvTimeout_ms, encoding);\n\treturn res;\n}\n\n```\n\n\u4f7f\u3044\u65b9\n\n```cpp\n#if 1\n\t\t\tres = MyReceiveString(m_IdUDPClient1, m_host_ipadr, m_port, 300, m_encSJIS);\n#else\n\t\t\tres = m_IdUDPClient1->ReceiveString(m_host_ipadr, m_port, 300, m_encSJIS);\n#endif\n```\n"}