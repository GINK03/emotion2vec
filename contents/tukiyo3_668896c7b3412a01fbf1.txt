{"context": " More than 1 year has passed since last update.munin\n* ubuntu 16.04\u3067\u5b9f\u65bd\n\n\u53c2\u8003\n\nMunin\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30e2 on ubuntu 13.10 - Style\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\napt-get install -y \\\n  munin munin-node munin-plugins-extra\n\n\nmunin : Web\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\nmunin-node : \u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30c7\u30fc\u30e2\u30f3\nmunin-plugins-extra : \u62e1\u5f35\u30d7\u30e9\u30b0\u30a4\u30f3\n\n\n/etc/munin/munin.conf\n- #htmldir /var/cache/munin/www\n+ htmldir /var/cache/munin/www\n\n- [localhost.localdomain]\n+ [myserver.home]\n\n\n\nmunin\u306b\u767b\u9332\u3055\u308c\u308b\u30b5\u30fc\u30d0\u540d\u3092\u6307\u5b9a\u3002\n\n\n/etc/munin/apache24.conf\n <Location /munin-cgi/munin-cgi-graph>\n-        Require local\n+        Require ip local 192.168.0\n\n\n\n\u81ea\u5206\u81ea\u8eab\u3068192.168.0.0/24\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\n\n\n\u30ea\u30b9\u30bf\u30fc\u30c8\nsudo service munin-node restart\nsudo service apache2 restart\n\n\n\u30a2\u30af\u30bb\u30b9\n\nhttp://localhost/munin/\n\n\n\n\nSNMP\u304b\u3089\u76e3\u8996\n\nvyos\uff08SNMP\u5bfe\u5fdc\u6a5f\u5668\uff09\u3092munin\u3067\u76e3\u8996\u3059\u308b - Qiita\n\n\nroot\u6a29\u9650\u3067\u5b9f\u884c\nmunin-node-configure \\\n  --snmp 192.168.0.19 \\\n  --snmpversion 2 \\\n  --snmpcommunity \\\n  public\n\n\n\n\u8a2d\u5b9a\u53ef\u80fd\u306a\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4e00\u89a7\u3092\u8868\u793a\nmunin-node-configure \\\n  --snmp 192.168.0.19 \\\n  --snmpversion 2 \\\n  --snmpcommunity \\\n  public \\\n  --shell sh\n\n\n\nln -s '/usr/share/munin/plugins/snmp_cpuload' '/etc/munin/plugins/snmp192.168.0.19_cpuload'\n\n\u306e\u3088\u3046\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308b\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u4f7f\u3046\u3082\u306e\u306e\u307f\u624b\u3067\u30ea\u30f3\u30af\u3092\u8cbc\u308b\u3002\n\n\u30ce\u30fc\u30c9\u8ffd\u52a0\n\n/etc/munin/plugin-conf.d/munin-node\n[snmp_192.168.0.19_*]\nenv.version 2\nenv.community public\n\n\n\n/etc/munin/munin-conf.d\n[192.168.0.19]\n    address 127.0.0.1\n\n\n\n\naddress 127.0.0.1\u6c7a\u3081\u6253\u3061\u3002(\u5bfe\u8c61\u306eIP\u3092\u8a18\u8ff0\u3059\u308b\u306e\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f)\n\n\n\u4eca\u3059\u3050\u66f4\u65b0\nsudo -u munin /usr/bin/munin-cron\n\n\n\nnodes\u78ba\u8a8d\n  $ telnet localhost 4949\n  nodes\n  localhost.localdomain\n+ 192.168.0.19\n\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\n\n\n\u30ab\u30b9\u30bf\u30e0proc\u5024\u53d6\u5f97\ncd /usr/share/munin/plugins\ncp -a snmp__processes snmp__processes_apache2\n\n\n/usr/share/munin/plugins/snmp__processes_apache2\n-         print \"require 1.3.6.1.2.1.25.1.6.0 [0-9]\\n\";\n+         print \"require 1.3.6.1.4.1.2021.2.1.5.4 [0-9]\\n\";\n...\n- graph_category system\n+ graph_category proc_apache2\n...\n- print \"processes.value \", $session->get_single('1.3.6.1.2.1.25.1.6.0'), \"\\n\";\n+ print \"processes.value \", $session->get_single('1.3.6.1.4.1.2021.2.1.5.4'), \"\\n\";\n\n\n\n\u6709\u52b9\u5316\n$ sudo munin-node-configure --snmp 192.168.0.19 \\\n  --snmpversion 1 --snmpcommunity public --suggest | grep proc\nsnmp__processes            | yes  | yes (192.168.0.19)\nsnmp__processes_apache2    | no   | yes (+192.168.0.19)\n$ sudo ln -s '/usr/share/munin/plugins/snmp__processes_apache2' \\\n  '/etc/munin/plugins/snmp_192.168.0.19_processes_apache2'\n$ sudo service munin-nodes restart\n$ sudo -u munin /usr/bin/munin-cron\n\n\n\n\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\n\nmunin-node\u306e\u8a2d\u5b9a\u3092\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\n\n\n\u624b\u52d5\u3067snmp\u53d6\u5f97\nsudo munin-run snmp_192.168.0.19_uptime\n\n\nmunin\n* ubuntu 16.04\u3067\u5b9f\u65bd\n\n## \u53c2\u8003\n\n* [Munin\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30e2 on ubuntu 13.10 - Style](http://d.hatena.ne.jp/pidekazu/20150122/1421907617)\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash:\napt-get install -y \\\n  munin munin-node munin-plugins-extra\n```\n\n* munin : Web\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\n* munin-node : \u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30c7\u30fc\u30e2\u30f3\n* munin-plugins-extra : \u62e1\u5f35\u30d7\u30e9\u30b0\u30a4\u30f3\n\n```diff:/etc/munin/munin.conf\n- #htmldir /var/cache/munin/www\n+ htmldir /var/cache/munin/www\n\n- [localhost.localdomain]\n+ [myserver.home]\n```\n\n* munin\u306b\u767b\u9332\u3055\u308c\u308b\u30b5\u30fc\u30d0\u540d\u3092\u6307\u5b9a\u3002\n\n```diff:/etc/munin/apache24.conf\n <Location /munin-cgi/munin-cgi-graph>\n-        Require local\n+        Require ip local 192.168.0\n```\n\n* \u81ea\u5206\u81ea\u8eab\u3068192.168.0.0/24\u304b\u3089\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\n\n## \u30ea\u30b9\u30bf\u30fc\u30c8\n\n```bash:\nsudo service munin-node restart\nsudo service apache2 restart\n```\n\n## \u30a2\u30af\u30bb\u30b9\n\n* http://localhost/munin/\n\n![munin1.jpg](https://qiita-image-store.s3.amazonaws.com/0/25728/a30eecb9-58d1-113c-2271-4eea156c9a2b.jpeg)\n\n----\n\n# SNMP\u304b\u3089\u76e3\u8996\n\n* [vyos\uff08SNMP\u5bfe\u5fdc\u6a5f\u5668\uff09\u3092munin\u3067\u76e3\u8996\u3059\u308b - Qiita](http://qiita.com/sion_cojp/items/1155f3bbfe7e0a81ae1e)\n\n```bash:root\u6a29\u9650\u3067\u5b9f\u884c\nmunin-node-configure \\\n  --snmp 192.168.0.19 \\\n  --snmpversion 2 \\\n  --snmpcommunity \\\n  public\n```\n\n```bash:\u8a2d\u5b9a\u53ef\u80fd\u306a\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u4e00\u89a7\u3092\u8868\u793a\nmunin-node-configure \\\n  --snmp 192.168.0.19 \\\n  --snmpversion 2 \\\n  --snmpcommunity \\\n  public \\\n  --shell sh\n```\n\n> ln -s '/usr/share/munin/plugins/snmp__cpuload' '/etc/munin/plugins/snmp_192.168.0.19_cpuload'\n\n\u306e\u3088\u3046\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u8cbc\u308b\u30b3\u30de\u30f3\u30c9\u4e00\u89a7\u304c\u8868\u793a\u3055\u308c\u308b\u3002\n\u4f7f\u3046\u3082\u306e\u306e\u307f\u624b\u3067\u30ea\u30f3\u30af\u3092\u8cbc\u308b\u3002\n\n## \u30ce\u30fc\u30c9\u8ffd\u52a0\n\n```rb:/etc/munin/plugin-conf.d/munin-node\n[snmp_192.168.0.19_*]\nenv.version 2\nenv.community public\n```\n\n```rb:/etc/munin/munin-conf.d\n[192.168.0.19]\n    address 127.0.0.1\n```\n\n* `address 127.0.0.1`\u6c7a\u3081\u6253\u3061\u3002(\u5bfe\u8c61\u306eIP\u3092\u8a18\u8ff0\u3059\u308b\u306e\u3067\u306f\u306a\u3044\u3053\u3068\u306b\u6ce8\u610f)\n\n```bash:\u4eca\u3059\u3050\u66f4\u65b0\nsudo -u munin /usr/bin/munin-cron\n```\n\n```diff:nodes\u78ba\u8a8d\n  $ telnet localhost 4949\n  nodes\n  localhost.localdomain\n+ 192.168.0.19\n```\n\n* \u30d6\u30e9\u30a6\u30b6\u3067\u78ba\u8a8d\n\n## \u30ab\u30b9\u30bf\u30e0proc\u5024\u53d6\u5f97\n\n```bash:\ncd /usr/share/munin/plugins\ncp -a snmp__processes snmp__processes_apache2\n```\n\n```diff:/usr/share/munin/plugins/snmp__processes_apache2\n-         print \"require 1.3.6.1.2.1.25.1.6.0 [0-9]\\n\";\n+         print \"require 1.3.6.1.4.1.2021.2.1.5.4 [0-9]\\n\";\n...\n- graph_category system\n+ graph_category proc_apache2\n...\n- print \"processes.value \", $session->get_single('1.3.6.1.2.1.25.1.6.0'), \"\\n\";\n+ print \"processes.value \", $session->get_single('1.3.6.1.4.1.2021.2.1.5.4'), \"\\n\";\n```\n\n```bash:\u6709\u52b9\u5316\n$ sudo munin-node-configure --snmp 192.168.0.19 \\\n  --snmpversion 1 --snmpcommunity public --suggest | grep proc\nsnmp__processes            | yes  | yes (192.168.0.19)\nsnmp__processes_apache2    | no   | yes (+192.168.0.19)\n$ sudo ln -s '/usr/share/munin/plugins/snmp__processes_apache2' \\\n  '/etc/munin/plugins/snmp_192.168.0.19_processes_apache2'\n$ sudo service munin-nodes restart\n$ sudo -u munin /usr/bin/munin-cron\n```\n\n## \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\n\n* [munin-node\u306e\u8a2d\u5b9a\u3092\u30b3\u30de\u30f3\u30c9\u3067\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5](http://hivecolor.com/id/133)\n\n```bash:\u624b\u52d5\u3067snmp\u53d6\u5f97\nsudo munin-run snmp_192.168.0.19_uptime\n```\n", "tags": ["Munin"]}