{"tags": ["JavaScript", "AWS", "APIGateway", "IAM"], "context": "\n\n\u5b9f\u73fe\u3057\u305f\u3044\u3053\u3068\nAPIGateway\u3067\u8a8d\u8a3c\u3092\"AWS_IAM\"\u306b\u8a2d\u5b9a\u3057\u305fAPI\u3092\u30d6\u30e9\u30a6\u30b6\u304b\u3089Javascript\u3067\u53e9\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Cognito\u306eUnauthUser\u3068AuthUser\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308bAPI\u3092\u5236\u5fa1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u3084\u308b\u3053\u3068\n\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u9806\u3092\u8ffd\u3063\u3066\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\nLambda\u3067\u7c21\u5358\u306aFunction\u3092\u4f5c\u6210\nAPIGateway\u3067\u4e0a\u8a18Function\u3092\u547c\u3073\u51fa\u3059API\u3092\u4f5c\u6210\u3059\u308b\n\u4f5c\u6210\u3057\u305fAPI\u306eCORS\u3092\u6709\u52b9\u5316\u3059\u308b\nAPI\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3001API\u7528\u306eJavascript SDK\u3092\u4f5c\u6210\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n\u8a8d\u8a3c\u306a\u3057\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u3046\u307e\u304f\u3044\u304f\u3053\u3068\u3092\u78ba\u8a8d\uff09\nAPI\u306e\u8a8d\u8a3c\u3092\"\u306a\u3057\"\u2192\"AWS_IAM\"\u306b\u8a2d\u5b9a\u3059\u308b\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u30a2\u30af\u30bb\u30b9\u304c\u62d2\u5426\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff09\nCognito Identity Pool\u3092\u4f5c\u6210\nAPI\u306e\u5b9f\u884c\u3092\u8a31\u53ef\u3059\u308bIAM\u3092\u4f5c\u6210\u3057\u3001UnauthUser\u306eRole\u306b\u30a2\u30bf\u30c3\u30c1\u3059\u308b\nCognito UnauthUser\u306eCredential\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u5b8c\u6210\uff09\n\n\nLambda\u3067\u7c21\u5358\u306aFunction\u3092\u4f5c\u6210\n\u300cLambda\u300d\u3067\"Create Function\"> \u300cSelect BluePrint\u300d\u3067\"Blank Function\"\u3092\u9078\u629e>\u300cConfigure triggers\u300d\u306f\u305d\u306e\u307e\u307e\u3067\"Next\"\n\u3053\u306e\u753b\u9762\u3067\u306f\u3001\u95a2\u6570\u306e\u4e2d\u8eab\u306f\u7de8\u96c6\u3057\u307e\u305b\u3093\u3002\"FunctionName\"\u306b\u9069\u5f53\u306a\u95a2\u6570\u540d\uff08myHelloWorldFunc\u306a\u3069\uff09\u3092\u3064\u3051\u3001\u4e0b\u8a18\u306e\"Lambda function handler and role\"\u306e\u3068\u3053\u308d\u3067\"Create a custom role\"\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\n\u3059\u308b\u3068\u5225\u30bf\u30d6\u3067IAM\u304c\u958b\u304f\u306e\u3067\u3001\"\u65b0\u3057\u3044IAM\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\"\u3092\u9078\u629e\u3057\u3066\u3001\u305d\u306e\u307e\u307e\u53f3\u4e0b\u306e\"\u8a31\u53ef\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\uff08\u3059\u308b\u3068\u3001\u300clambda_basic_execution\u300d\u3068\u3044\u3046\u5fc5\u8981\u6700\u4f4e\u9650\u306eRole\u304c\u751f\u6210\u3055\u308c\u3001\u4f5c\u6210\u4e2d\u306eLambda Function\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\uff09\n\nFunction\u306e\u8a2d\u5b9a\u753b\u9762\u306b\u623b\u3063\u305f\u3089\u3001\"Lambda function handler and role\"\u306b\u3055\u304d\u307b\u3069\u306e\u300clambda_basic_execution\u300d\u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u53f3\u4e0b\u306eOK\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\u3053\u308c\u3067\u3001\u5b9f\u884c\u3059\u308b\u3068\u300cHello World\u300d\u3068\u3060\u3051\u8fd4\u3057\u3066\u304f\u308bLambda\u95a2\u6570\u304c\u5b8c\u6210\u3057\u307e\u3057\u305f\u3002\n\nAPIGateway\u3067\u4e0a\u8a18Function\u3092\u547c\u3073\u51fa\u3059API\u3092\u4f5c\u6210\u3059\u308b\n\u300cAPIGateway\u300d\u3067\"API\u3092\u4f5c\u6210\"\n\n\"\u30a2\u30af\u30b7\u30e7\u30f3\">\"\u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\"\n\n\u3053\u3053\u3067\u306f\u300ctest\u300d\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\"\u30a2\u30af\u30b7\u30e7\u30f3\" > \"\u30e1\u30bd\u30c3\u30c9\u306e\u4f5c\u6210\"\n\n\u3053\u3053\u3067Get\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08\u30c1\u30a7\u30c3\u30af\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u78ba\u5b9a\u3059\u308b\u306e\u3092\u5fd8\u308c\u305a\u306b\uff09\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u753b\u9762\u3067\u306f\u3001Lambda\u95a2\u6570\u3092\u9078\u629e\u3057\u3001\u3055\u304d\u307b\u3069\u4f5c\u3063\u305fmyHelloWorldFunction\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u9078\u629e\u3057\u3066\u3001myHelloWorldFunction\u3092\u8a2d\u5b9a\u3057\u3001\"\u4fdd\u5b58\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nGet\u30e1\u30bd\u30c3\u30c9\u304c\u4f5c\u6210\u3067\u304d\u307e\u3057\u305f\u3002\n\n\n\u4f5c\u6210\u3057\u305fAPI\u306eCORS\u3092\u6709\u52b9\u5316\u3059\u308b\n\"\u30a2\u30af\u30b7\u30e7\u30f3\" > \"CORS\u306e\u6709\u52b9\u5316\"\u3092\u30af\u30ea\u30c3\u30af\n\n\u30e1\u30bd\u30c3\u30c9\u306eGET\u306b\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u305d\u308c\u4ee5\u5916\u306e\u8a2d\u5b9a\u306f\u3044\u3058\u3089\u305a\u306b\"CORS\u3092\u6709\u52b9\u306b\u3057\u3066\u65e2\u5b58\u306eCORS\u30d8\u30c3\u30c0\u30fc\u3092\u7f6e\u304d\u63db\u3048\"\u3092\u30af\u30ea\u30c3\u30af\n\nCORS\u304c\u6709\u52b9\u5316\u3055\u308c\u3001GET\u30e1\u30bd\u30c3\u30c9\u306e\u4e0b\u306bOPTION\u30e1\u30bd\u30c3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n\n\nAPI\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3001API\u7528\u306eJavascript SDK\u3092\u4f5c\u6210\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\ntest\u30ea\u30bd\u30fc\u30b9\u304c\u9078\u629e\u3055\u308c\u305f\u72b6\u614b\u3067\u3001\"\u30a2\u30af\u30b7\u30e7\u30f3\" > \"API\u306e\u30c7\u30d7\u30ed\u30a4\"\u3092\u30af\u30ea\u30c3\u30af\n\n\u3053\u3053\u3067\u306f\u300cdev\u300d\u3068\u3044\u3046\u540d\u524d\u306e\u65b0\u3057\u3044\u30b9\u30c6\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3001\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\n\u300c\u30b9\u30c6\u30fc\u30b8\u30a8\u30c7\u30a3\u30bf\u30fc\u300d\u3067\"SDK\u306e\u751f\u6210\"\u304b\u3089\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\"Javascript\"\u3092\u9078\u629e\u3057\u3001SDK\u306e\u751f\u6210\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u3059\u308b\u3068\u3001SDK\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\n\n\u8a8d\u8a3c\u306a\u3057\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u3046\u307e\u304f\u3044\u304f\u3053\u3068\u3092\u78ba\u8a8d\uff09\n\nSDK\u306eZIP\u3092\u89e3\u7b54\u3057\u305f\u3089\u3001\u4e2d\u306b\u9069\u5f53\u306aHTML\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002(\u3053\u3053\u3067\u306fAPIGatewayTest.html\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002)\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>API test</title>\n  <!-- jQuery -->\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js\"></script>\n  <!-- API\u7528SDK -->\n  <script type=\"text/javascript\" src=\"lib/axios/dist/axios.standalone.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/hmac-sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/hmac.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/enc-base64.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/url-template/url-template.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/sigV4Client.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/apiGatewayClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/simpleHttpClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/utils.js\"></script>\n  <script type=\"text/javascript\" src=\"apigClient.js\"></script>\n</head>\n<body>\n<!-- HTML  -->\n<button id=\"btn\">\u30dc\u30bf\u30f3</button>\n<!-- Other Script -->\n<script type=\"text/javascript\">\nvar apigClient;\n$(function(){\n//API Client\u3092\u521d\u671f\u5316\n  apigClient = apigClientFactory.newClient();\n});\n$('#btn').click(function(){\n//test\u30ea\u30bd\u30fc\u30b9\u306eGet\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3059\u306e\u3067\u3001.testGet()\n  apigClient.testGet({}, {}, {})\n  .then(function(result){\n    // Add success callback code here.\n    console.log(result);\n  }).catch( function(result){\n    // Add error callback code here.\n    console.log(result);\n  });\n});\n</script>\n</body>\n</html>\n\n\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001API\u306e\u547c\u3073\u51fa\u3057\u304c\u6210\u529f\u3057\u3001Lambda\u304b\u3089'HelloWorld'\u306e\u6587\u5b57\u5217\u304c\u8fd4\u3063\u3066\u304f\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\nAPI\u306e\u8a8d\u8a3c\u3092\"\u306a\u3057\"\u2192\"AWS_IAM\"\u306b\u8a2d\u5b9a\u3059\u308b\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u30a2\u30af\u30bb\u30b9\u304c\u62d2\u5426\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff09\n\u3053\u3053\u3067\u3001\u4f5c\u6210\u3057\u305fAPI\u306e\"\u30e1\u30bd\u30c3\u30c9\u30ea\u30af\u30a8\u30b9\u30c8\"\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308bARN(Amazon Resource Name)\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304d\u307e\u3059\u3002\uff08\"arn:aws:execute-api:ap-notheast-xxxxxxxx/*/GET/test\"\u3068\u3044\u3046\u6587\u5b57\u5217\u3067\u3059\u3002\uff09\n\u4f5c\u6210\u3057\u305fAPI\u306eGet\u30e1\u30bd\u30c3\u30c9\u306e\"\u30e1\u30bd\u30c3\u30c9\u30ea\u30af\u30a8\u30b9\u30c8\"\u3092\u30af\u30ea\u30c3\u30af\n\n\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u3092\"AWS_IAM\"\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nAPI\u3092\u518d\u3073Dev\u30b9\u30c6\u30fc\u30b8\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n\n\u3053\u3046\u3057\u3066\u518d\u3073\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066API\u3092\u53e9\u3044\u3066\u307f\u308b\u3068\u3001403\u30a8\u30e9\u30fc\u304c\u8fd4\u3063\u3066\u304f\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u8a8d\u8a3c\u3092AWS_IAM\u306b\u8a2d\u5b9a\u3057\u305f\u305f\u3081\u3001\u30a2\u30af\u30bb\u30b9\u304c\u62d2\u5426\u3055\u308c\u3066\u3044\u307e\u3059\u3002\uff08CORS\u306b\u554f\u984c\u304c\u3042\u308b\u3068\u3044\u3046\u30a8\u30e9\u30fc\u6587\u3067\u3059\u304c\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\uff09\n\n\nCognito Identity Pool\u3092\u4f5c\u6210\n\u300cCognito\u300d\u3067\"Manage Federated Identities\"\u3092\u30af\u30ea\u30c3\u30af > \"Create Identity Pool\"\u3092\u30af\u30ea\u30c3\u30af\n\u6b21\u306e\u753b\u9762\u3067\u306f\u3001Identity Pool\u306e\u540d\u524d\uff08\u3053\u3053\u3067\u306f\"MyTestIdentity\"\uff09\u3092\u5165\u529b\u3057\u3001\"Enable access to unauthenticated identities\"\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u4e0a\u3067\"Create Pool\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u6b21\u306e\u753b\u9762\u3067\u78ba\u8a8d\u3067\u304d\u308b\"Identity Pool ID\"\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\nAPI\u306e\u5b9f\u884c\u3092\u8a31\u53ef\u3059\u308bIAM\u3092\u4f5c\u6210\u3057\u3001UnauthUser\u306eRole\u306b\u30a2\u30bf\u30c3\u30c1\u3059\u308b\n\u300cIAM\u300d\u3067\"\u30ed\u30fc\u30eb\"\u3092\u958b\u304f\u3068\u3001\u3055\u304d\u307b\u3069\"MyTestIdentity\"\u3068\u3044\u3046Identity Pool\u3092\u4f5c\u6210\u3057\u305f\u6642\u306bCognito_MyTestIndentityUnauth_Role\u3068\u3044\u3046\u672a\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u7528\u306eRole\u3068\u3001Cognito_MyTestIndentityAuth_Role\u3068\u3044\u3046\u8a8d\u8a3c\u6e08\u307f\u30e6\u30fc\u30b6\u30fc\u7528\u306eRole\u304c\uff12\u3064\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306fCognito\u306e\u672a\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3057\u3066API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4e0e\u3048\u308b\u306e\u3067\u3001\"Cognito_MyTestIndentity Unauth _Role\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\"\u30ed\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\"Policy Generator\"\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\"\u9078\u629e\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u300c\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u306e\u7de8\u96c6\u300d\u3067\u306f\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u52b9\u679c\uff1a\u8a31\u53ef\nAWS\u30b5\u30fc\u30d3\u30b9\uff1aAmazon APIGateway\n\u30a2\u30af\u30b7\u30e7\u30f3\uff1aInvoke\nAmazon\u30ea\u30bd\u30fc\u30b9\u30cd\u30fc\u30e0(ARN)\uff1a\u5148\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305fGET\u30e1\u30bd\u30c3\u30c9\u306eARN\n\n\u3053\u308c\u3089\u3092\u8a2d\u5b9a\u3057\u3001\"\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u3092\u8ffd\u52a0\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3001OK\u3067\u3059\u3002\"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u6b21\u306e\u78ba\u8a8d\u753b\u9762\u3067\u306f\u4f55\u3082\u305b\u305a\u3001\"\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u3001UnauthUser\u306b\u5bfe\u3057\u3066API\u3092\u5b9f\u884c\u3059\u308b\u8a31\u53ef\u3092\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nCognito UnauthUser\u306eCredential\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u5b8c\u6210\uff09\n\u3055\u304d\u307b\u3069\u4f5c\u6210\u3057\u305fHTML\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n\n<script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.7.19.min.js\"></script>\u3067AWS SDK for Javascript\u3092\u8aad\u307f\u8fbc\u307f\n\nAWS.config.credential\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u3055\u304d\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305fIdentity Pool ID\u3092\u8cbc\u308a\u4ed8\u3051\u308b\n\nAWS.config.credential.get()\u306b\u3088\u3063\u3066\u5f97\u3089\u308c\u308baccessKeyId\u3068secretAccessKey\u3068sessionToken\u3001\u53ca\u3073region\u3092apigClient\u306b\u8a2d\u5b9a\u3057\u3066\u521d\u671f\u5316\u3059\u308b\u3002\n\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>API test</title>\n  <!-- AWS SDK -->\n  <script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.7.19.min.js\"></script>\n  <!-- jQuery -->\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js\"></script>\n  <!-- API\u7528SDK -->\n  <script type=\"text/javascript\" src=\"lib/axios/dist/axios.standalone.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/hmac-sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/hmac.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/enc-base64.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/url-template/url-template.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/sigV4Client.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/apiGatewayClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/simpleHttpClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/utils.js\"></script>\n  <script type=\"text/javascript\" src=\"apigClient.js\"></script>\n</head>\n<body>\n<!-- HTML  -->\n<button id=\"btn\">\u30dc\u30bf\u30f3</button>\n<!-- Other Script -->\n<script type=\"text/javascript\">\nvar apigClient;\n$(function(){\n  //AWS Credential\u306e\u521d\u671f\u5316\n  AWS.config.region = 'ap-northeast-1';\n  AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n      IdentityPoolId: 'ap-northeast-XXXXXXXXXXXXXXXXXXXXXXX' //Identity Pool Id\u3092\u8cbc\u308a\u4ed8\u3051\u308b(ARN\u3067\u306f\u306a\u3044\u3002)\n  });\n  AWS.config.credentials.get(function(err){\n    if(!err){\n      //API Client\u306baccessKey,secretKey,sessionToken,region\u3092\u8a2d\u5b9a\u3057\u3001\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n      apigClient = apigClientFactory.newClient({\n        accessKey: AWS.config.credentials.accessKeyId,\n        secretKey: AWS.config.credentials.secretAccessKey,\n        sessionToken: AWS.config.credentials.sessionToken,//\u5927\u4e8b\n        region: 'ap-northeast-1'//\u5927\u4e8b\n      });\n    }else{\n      console.log(err);\n    }\n  });\n});\n$('#btn').click(function(){\n  apigClient.testGet({}, {}, {})\n  .then(function(result){\n    // Add success callback code here.\n    console.log(result);\n  }).catch( function(result){\n    // Add error callback code here.\n    console.log(result);\n  });\n});\n</script>\n</body>\n</html>\n\n\n\u3053\u308c\u3067\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001API\u306e\u547c\u3073\u51fa\u3057\u306b\u6210\u529f\u3057\u3001Lambda\u304b\u3089'Hello World'\u306e\u6587\u5b57\u5217\u304c\u8fd4\u3063\u3066\u304f\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\n\u30dd\u30a4\u30f3\u30c8\n\nCORS\u3092\u6709\u52b9\u5316\u3057\u305f\u308a\u8a8d\u8a3c\u3092\u5909\u66f4\u3057\u305f\u308a\u306a\u3069\u3001API\u306e\u8a2d\u5b9a\u3092\u3044\u3058\u3063\u305f\u5f8c\u306f\u3001API\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306e\u3092\u5fd8\u308c\u306a\u3044\u3002\nAPIGateway\u3067\u751f\u6210\u3057\u305fJavascript\u7528\u306eSDK\u306f\u3001\u8d85\u7d76\u9762\u5012\u304f\u3055\u3044Signature V4\u306e\u7f72\u540d\u4ed8\u304d\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3084\u3063\u3066\u304f\u308c\u308b\u3002\napigClient\u306b\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u6642\u3001sessionToken\u3068region\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u306e\u3067\u5168\u3066\u8a2d\u5b9a\u3059\u308b\u3002\uff08\u3053\u3053\u3067\u3060\u3044\u3076\u30cf\u30de\u3063\u305f\u3002\uff09\n\n\n\u53c2\u8003URL\nAPI Gateway \u30ea\u30bd\u30fc\u30b9\u306e CORS \u3092\u6709\u52b9\u306b\u3059\u308b\nAPI \u5b9f\u884c\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u306e IAM \u30dd\u30ea\u30b7\u30fc\u306e\u4f8b\nAPI Gateway \u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066 API \u306e SDK \u3092\u751f\u6210\u3059\u308b\nAPI Gateway \u3067\u751f\u6210\u3057\u305f JavaScript SDK \u3092\u4f7f\u7528\u3059\u308b\naws-api-gateway-client\n#\u5b9f\u73fe\u3057\u305f\u3044\u3053\u3068\nAPIGateway\u3067\u8a8d\u8a3c\u3092\"AWS_IAM\"\u306b\u8a2d\u5b9a\u3057\u305fAPI\u3092\u30d6\u30e9\u30a6\u30b6\u304b\u3089Javascript\u3067\u53e9\u304d\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001Cognito\u306eUnauthUser\u3068AuthUser\u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308bAPI\u3092\u5236\u5fa1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n#\u3084\u308b\u3053\u3068\n\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u9806\u3092\u8ffd\u3063\u3066\u3084\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n1. Lambda\u3067\u7c21\u5358\u306aFunction\u3092\u4f5c\u6210\n2. APIGateway\u3067\u4e0a\u8a18Function\u3092\u547c\u3073\u51fa\u3059API\u3092\u4f5c\u6210\u3059\u308b\n3. \u4f5c\u6210\u3057\u305fAPI\u306eCORS\u3092\u6709\u52b9\u5316\u3059\u308b\n3. API\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3001API\u7528\u306eJavascript SDK\u3092\u4f5c\u6210\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n4. \u8a8d\u8a3c\u306a\u3057\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u3046\u307e\u304f\u3044\u304f\u3053\u3068\u3092\u78ba\u8a8d\uff09\n5. API\u306e\u8a8d\u8a3c\u3092\"\u306a\u3057\"\u2192\"AWS_IAM\"\u306b\u8a2d\u5b9a\u3059\u308b\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u30a2\u30af\u30bb\u30b9\u304c\u62d2\u5426\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff09\n5. Cognito Identity Pool\u3092\u4f5c\u6210\n6. API\u306e\u5b9f\u884c\u3092\u8a31\u53ef\u3059\u308bIAM\u3092\u4f5c\u6210\u3057\u3001UnauthUser\u306eRole\u306b\u30a2\u30bf\u30c3\u30c1\u3059\u308b\n7. Cognito UnauthUser\u306eCredential\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u5b8c\u6210\uff09\n\n##Lambda\u3067\u7c21\u5358\u306aFunction\u3092\u4f5c\u6210\n\u300cLambda\u300d\u3067\"Create Function\"> \u300cSelect BluePrint\u300d\u3067\"Blank Function\"\u3092\u9078\u629e>\u300cConfigure triggers\u300d\u306f\u305d\u306e\u307e\u307e\u3067\"Next\"\n\n\u3053\u306e\u753b\u9762\u3067\u306f\u3001\u95a2\u6570\u306e\u4e2d\u8eab\u306f\u7de8\u96c6\u3057\u307e\u305b\u3093\u3002\"FunctionName\"\u306b\u9069\u5f53\u306a\u95a2\u6570\u540d\uff08myHelloWorldFunc\u306a\u3069\uff09\u3092\u3064\u3051\u3001\u4e0b\u8a18\u306e\"Lambda function handler and role\"\u306e\u3068\u3053\u308d\u3067\"Create a custom role\"\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-26 23.48.31.png](https://qiita-image-store.s3.amazonaws.com/0/86468/30069010-2999-e592-d758-577b0e842a6d.png)\n\n\u3059\u308b\u3068\u5225\u30bf\u30d6\u3067IAM\u304c\u958b\u304f\u306e\u3067\u3001\"\u65b0\u3057\u3044IAM\u30ed\u30fc\u30eb\u306e\u4f5c\u6210\"\u3092\u9078\u629e\u3057\u3066\u3001\u305d\u306e\u307e\u307e\u53f3\u4e0b\u306e\"\u8a31\u53ef\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\uff08\u3059\u308b\u3068\u3001\u300clambda_basic_execution\u300d\u3068\u3044\u3046\u5fc5\u8981\u6700\u4f4e\u9650\u306eRole\u304c\u751f\u6210\u3055\u308c\u3001\u4f5c\u6210\u4e2d\u306eLambda Function\u306b\u9069\u7528\u3055\u308c\u307e\u3059\u3002\uff09\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-26 23.49.02.png](https://qiita-image-store.s3.amazonaws.com/0/86468/7af158bb-c476-ab76-e8d0-c1972055331d.png)\n\nFunction\u306e\u8a2d\u5b9a\u753b\u9762\u306b\u623b\u3063\u305f\u3089\u3001\"Lambda function handler and role\"\u306b\u3055\u304d\u307b\u3069\u306e\u300clambda_basic_execution\u300d\u304c\u9069\u7528\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u53f3\u4e0b\u306eOK\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u3001\u5b9f\u884c\u3059\u308b\u3068\u300cHello World\u300d\u3068\u3060\u3051\u8fd4\u3057\u3066\u304f\u308bLambda\u95a2\u6570\u304c\u5b8c\u6210\u3057\u307e\u3057\u305f\u3002\n\n##APIGateway\u3067\u4e0a\u8a18Function\u3092\u547c\u3073\u51fa\u3059API\u3092\u4f5c\u6210\u3059\u308b\n\u300cAPIGateway\u300d\u3067\"API\u3092\u4f5c\u6210\"\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-26 23.59.16.png](https://qiita-image-store.s3.amazonaws.com/0/86468/f9354fab-0c97-c497-e43b-e6343d88d3e3.png)\n\n\"\u30a2\u30af\u30b7\u30e7\u30f3\">\"\u30ea\u30bd\u30fc\u30b9\u306e\u4f5c\u6210\"\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-26 23.59.28.png](https://qiita-image-store.s3.amazonaws.com/0/86468/ee657889-737d-107a-c23f-950e958c7426.png)\n\u3053\u3053\u3067\u306f\u300ctest\u300d\u3068\u3044\u3046\u30ea\u30bd\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-26 23.59.48.png](https://qiita-image-store.s3.amazonaws.com/0/86468/a95950af-79cd-34e7-dd12-e88f52ff31ef.png)\n\n\"\u30a2\u30af\u30b7\u30e7\u30f3\" > \"\u30e1\u30bd\u30c3\u30c9\u306e\u4f5c\u6210\"\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.00.08.png](https://qiita-image-store.s3.amazonaws.com/0/86468/7e248c4a-eb61-17f8-2227-8c44fae24b6d.png)\n\n\u3053\u3053\u3067Get\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\uff08\u30c1\u30a7\u30c3\u30af\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u78ba\u5b9a\u3059\u308b\u306e\u3092\u5fd8\u308c\u305a\u306b\uff09\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.00.19.png](https://qiita-image-store.s3.amazonaws.com/0/86468/fa2385e1-4f17-9a00-507e-12fb97efa4b3.png)\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u306e\u753b\u9762\u3067\u306f\u3001Lambda\u95a2\u6570\u3092\u9078\u629e\u3057\u3001\u3055\u304d\u307b\u3069\u4f5c\u3063\u305fmyHelloWorldFunction\u306e\u30ea\u30fc\u30b8\u30e7\u30f3\u3092\u9078\u629e\u3057\u3066\u3001myHelloWorldFunction\u3092\u8a2d\u5b9a\u3057\u3001\"\u4fdd\u5b58\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.00.42.png](https://qiita-image-store.s3.amazonaws.com/0/86468/3987a1af-3a66-b088-6d6a-63005c955f60.png)\n\nGet\u30e1\u30bd\u30c3\u30c9\u304c\u4f5c\u6210\u3067\u304d\u307e\u3057\u305f\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.05.49.png](https://qiita-image-store.s3.amazonaws.com/0/86468/0b06ff5a-a26b-de90-acc1-414ab7fe6e30.png)\n\n##\u4f5c\u6210\u3057\u305fAPI\u306eCORS\u3092\u6709\u52b9\u5316\u3059\u308b\n\"\u30a2\u30af\u30b7\u30e7\u30f3\" > \"CORS\u306e\u6709\u52b9\u5316\"\u3092\u30af\u30ea\u30c3\u30af\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.09.52.png](https://qiita-image-store.s3.amazonaws.com/0/86468/40cfb31b-eff5-a796-192a-80e34b82abdd.png)\n\n\u30e1\u30bd\u30c3\u30c9\u306eGET\u306b\u30c1\u30a7\u30c3\u30af\u304c\u5165\u3063\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3001\u305d\u308c\u4ee5\u5916\u306e\u8a2d\u5b9a\u306f\u3044\u3058\u3089\u305a\u306b\"CORS\u3092\u6709\u52b9\u306b\u3057\u3066\u65e2\u5b58\u306eCORS\u30d8\u30c3\u30c0\u30fc\u3092\u7f6e\u304d\u63db\u3048\"\u3092\u30af\u30ea\u30c3\u30af\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.10.06.png](https://qiita-image-store.s3.amazonaws.com/0/86468/f5913066-133b-85b0-74f4-45138d7fc67d.png)\n\nCORS\u304c\u6709\u52b9\u5316\u3055\u308c\u3001GET\u30e1\u30bd\u30c3\u30c9\u306e\u4e0b\u306bOPTION\u30e1\u30bd\u30c3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308c\u3070OK\u3067\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.10.22.png](https://qiita-image-store.s3.amazonaws.com/0/86468/16869705-6fa0-cb8c-99e6-290d178ddab4.png)\n\n##API\u3092\u30c7\u30d7\u30ed\u30a4\u3057\u3001API\u7528\u306eJavascript SDK\u3092\u4f5c\u6210\u3057\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\ntest\u30ea\u30bd\u30fc\u30b9\u304c\u9078\u629e\u3055\u308c\u305f\u72b6\u614b\u3067\u3001\"\u30a2\u30af\u30b7\u30e7\u30f3\" > \"API\u306e\u30c7\u30d7\u30ed\u30a4\"\u3092\u30af\u30ea\u30c3\u30af\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.15.04.png](https://qiita-image-store.s3.amazonaws.com/0/86468/405c9dbf-58a6-1ba5-ec4d-94ff20c5cfd1.png)\n\n\u3053\u3053\u3067\u306f\u300cdev\u300d\u3068\u3044\u3046\u540d\u524d\u306e\u65b0\u3057\u3044\u30b9\u30c6\u30fc\u30b8\u3092\u4f5c\u6210\u3057\u3001\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.15.21.png](https://qiita-image-store.s3.amazonaws.com/0/86468/cd2e2221-53cd-f246-aa71-62f67a12f68d.png)\n\n\u300c\u30b9\u30c6\u30fc\u30b8\u30a8\u30c7\u30a3\u30bf\u30fc\u300d\u3067\"SDK\u306e\u751f\u6210\"\u304b\u3089\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\"Javascript\"\u3092\u9078\u629e\u3057\u3001SDK\u306e\u751f\u6210\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.18.13.png](https://qiita-image-store.s3.amazonaws.com/0/86468/7baecb8c-a270-62bf-6d39-a4bec5e0e157.png)\n\n\u3059\u308b\u3068\u3001SDK\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\u3002\n\n##\u8a8d\u8a3c\u306a\u3057\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u3046\u307e\u304f\u3044\u304f\u3053\u3068\u3092\u78ba\u8a8d\uff09\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.29.18.png](https://qiita-image-store.s3.amazonaws.com/0/86468/a00d1065-b051-1629-e749-d8a49d5be439.png)\n\nSDK\u306eZIP\u3092\u89e3\u7b54\u3057\u305f\u3089\u3001\u4e2d\u306b\u9069\u5f53\u306aHTML\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3001\u4e0b\u8a18\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u307e\u3059\u3002(\u3053\u3053\u3067\u306fAPIGatewayTest.html\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002)\n\n```html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>API test</title>\n  <!-- jQuery -->\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js\"></script>\n  <!-- API\u7528SDK -->\n  <script type=\"text/javascript\" src=\"lib/axios/dist/axios.standalone.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/hmac-sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/hmac.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/enc-base64.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/url-template/url-template.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/sigV4Client.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/apiGatewayClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/simpleHttpClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/utils.js\"></script>\n  <script type=\"text/javascript\" src=\"apigClient.js\"></script>\n</head>\n<body>\n<!-- HTML  -->\n<button id=\"btn\">\u30dc\u30bf\u30f3</button>\n<!-- Other Script -->\n<script type=\"text/javascript\">\nvar apigClient;\n$(function(){\n//API Client\u3092\u521d\u671f\u5316\n  apigClient = apigClientFactory.newClient();\n});\n$('#btn').click(function(){\n//test\u30ea\u30bd\u30fc\u30b9\u306eGet\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3059\u306e\u3067\u3001.testGet()\n  apigClient.testGet({}, {}, {})\n  .then(function(result){\n    // Add success callback code here.\n    console.log(result);\n  }).catch( function(result){\n    // Add error callback code here.\n    console.log(result);\n  });\n});\n</script>\n</body>\n</html>\n```\n\n\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001API\u306e\u547c\u3073\u51fa\u3057\u304c\u6210\u529f\u3057\u3001Lambda\u304b\u3089'HelloWorld'\u306e\u6587\u5b57\u5217\u304c\u8fd4\u3063\u3066\u304f\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.33.05.png](https://qiita-image-store.s3.amazonaws.com/0/86468/9787d83e-5b10-ee00-ec6a-fc3ea7d6cdb3.png)\n\n##API\u306e\u8a8d\u8a3c\u3092\"\u306a\u3057\"\u2192\"AWS_IAM\"\u306b\u8a2d\u5b9a\u3059\u308b\uff08\u3053\u3053\u3067\u4e00\u5ea6\u30c6\u30b9\u30c8\u3057\u3001\u30a2\u30af\u30bb\u30b9\u304c\u62d2\u5426\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\uff09\n\u3053\u3053\u3067\u3001\u4f5c\u6210\u3057\u305fAPI\u306e\"\u30e1\u30bd\u30c3\u30c9\u30ea\u30af\u30a8\u30b9\u30c8\"\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b**ARN(Amazon Resource Name)**\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304d\u307e\u3059\u3002\uff08\"arn:aws:execute-api:ap-notheast-xxxxxxxx/*/GET/test\"\u3068\u3044\u3046\u6587\u5b57\u5217\u3067\u3059\u3002\uff09\n\n\u4f5c\u6210\u3057\u305fAPI\u306eGet\u30e1\u30bd\u30c3\u30c9\u306e\"\u30e1\u30bd\u30c3\u30c9\u30ea\u30af\u30a8\u30b9\u30c8\"\u3092\u30af\u30ea\u30c3\u30af\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.37.56.png](https://qiita-image-store.s3.amazonaws.com/0/86468/01d3eb1a-b95a-7231-d533-247faaf7bc58.png)\n\n\u8a8d\u8a3c\u306e\u8a2d\u5b9a\u3092\"AWS_IAM\"\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.38.22.png](https://qiita-image-store.s3.amazonaws.com/0/86468/558525dc-8a66-92fb-3ff4-e0267c00e902.png)\n\nAPI\u3092\u518d\u3073Dev\u30b9\u30c6\u30fc\u30b8\u306b\u30c7\u30d7\u30ed\u30a4\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.42.25.png](https://qiita-image-store.s3.amazonaws.com/0/86468/65f99d7d-a74f-cb6a-0514-8a7971e17b1b.png)\n\n\u3053\u3046\u3057\u3066\u518d\u3073\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066API\u3092\u53e9\u3044\u3066\u307f\u308b\u3068\u3001403\u30a8\u30e9\u30fc\u304c\u8fd4\u3063\u3066\u304f\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u8a8d\u8a3c\u3092AWS_IAM\u306b\u8a2d\u5b9a\u3057\u305f\u305f\u3081\u3001\u30a2\u30af\u30bb\u30b9\u304c\u62d2\u5426\u3055\u308c\u3066\u3044\u307e\u3059\u3002\uff08CORS\u306b\u554f\u984c\u304c\u3042\u308b\u3068\u3044\u3046\u30a8\u30e9\u30fc\u6587\u3067\u3059\u304c\u3001\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\uff09\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.43.58.png](https://qiita-image-store.s3.amazonaws.com/0/86468/8d44efb2-4269-5970-e5d8-f6fde3a53bc4.png)\n\n##Cognito Identity Pool\u3092\u4f5c\u6210\n\u300cCognito\u300d\u3067\"Manage Federated Identities\"\u3092\u30af\u30ea\u30c3\u30af > \"Create Identity Pool\"\u3092\u30af\u30ea\u30c3\u30af\n\n\u6b21\u306e\u753b\u9762\u3067\u306f\u3001Identity Pool\u306e\u540d\u524d\uff08\u3053\u3053\u3067\u306f\"MyTestIdentity\"\uff09\u3092\u5165\u529b\u3057\u3001**\"Enable access to unauthenticated identities\"\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u305f\u4e0a\u3067**\"Create Pool\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.47.58.png](https://qiita-image-store.s3.amazonaws.com/0/86468/a11dd179-d640-9fbb-e937-af0a2eb0cc14.png)\n\n\u6b21\u306e\u753b\u9762\u3067\u78ba\u8a8d\u3067\u304d\u308b**\"Identity Pool ID\"**\u3092\u30b3\u30d4\u30fc\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 1.14.44.png](https://qiita-image-store.s3.amazonaws.com/0/86468/4d5c89ea-c418-b6ab-ef5a-860f2d56c6c8.png)\n\n\n##API\u306e\u5b9f\u884c\u3092\u8a31\u53ef\u3059\u308bIAM\u3092\u4f5c\u6210\u3057\u3001UnauthUser\u306eRole\u306b\u30a2\u30bf\u30c3\u30c1\u3059\u308b\n\u300cIAM\u300d\u3067\"\u30ed\u30fc\u30eb\"\u3092\u958b\u304f\u3068\u3001\u3055\u304d\u307b\u3069\"MyTestIdentity\"\u3068\u3044\u3046Identity Pool\u3092\u4f5c\u6210\u3057\u305f\u6642\u306bCognito_MyTestIndentityUnauth_Role\u3068\u3044\u3046\u672a\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u7528\u306eRole\u3068\u3001Cognito_MyTestIndentityAuth_Role\u3068\u3044\u3046\u8a8d\u8a3c\u6e08\u307f\u30e6\u30fc\u30b6\u30fc\u7528\u306eRole\u304c\uff12\u3064\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306fCognito\u306e\u672a\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306b\u5bfe\u3057\u3066API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u4e0e\u3048\u308b\u306e\u3067\u3001\"Cognito_MyTestIndentity **Unauth** _Role\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n\"\u30ed\u30fc\u30eb\u30dd\u30ea\u30b7\u30fc\u306e\u4f5c\u6210\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.57.36.png](https://qiita-image-store.s3.amazonaws.com/0/86468/f643d35b-e86a-1e95-8952-5901db6fec5c.png)\n\n\"Policy Generator\"\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3001\"\u9078\u629e\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 0.58.15.png](https://qiita-image-store.s3.amazonaws.com/0/86468/1f6983ea-a6a8-d37b-9996-d48d68af5cba.png)\n\n\u300c\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u306e\u7de8\u96c6\u300d\u3067\u306f\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n- \u52b9\u679c\uff1a\u8a31\u53ef\n- AWS\u30b5\u30fc\u30d3\u30b9\uff1aAmazon APIGateway\n- \u30a2\u30af\u30b7\u30e7\u30f3\uff1aInvoke\n- Amazon\u30ea\u30bd\u30fc\u30b9\u30cd\u30fc\u30e0(ARN)\uff1a\u5148\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305fGET\u30e1\u30bd\u30c3\u30c9\u306eARN\n\n\u3053\u308c\u3089\u3092\u8a2d\u5b9a\u3057\u3001\"\u30b9\u30c6\u30fc\u30c8\u30e1\u30f3\u30c8\u3092\u8ffd\u52a0\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 1.03.20.png](https://qiita-image-store.s3.amazonaws.com/0/86468/fa897e61-34ec-e989-d820-bd5f0992ec61.png)\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u3001OK\u3067\u3059\u3002\"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 1.03.31.png](https://qiita-image-store.s3.amazonaws.com/0/86468/b6defa0d-b4fc-f34e-2ea0-11fb7b9a9282.png)\n\n\u6b21\u306e\u78ba\u8a8d\u753b\u9762\u3067\u306f\u4f55\u3082\u305b\u305a\u3001\"\u30dd\u30ea\u30b7\u30fc\u306e\u9069\u7528\"\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 1.06.38.png](https://qiita-image-store.s3.amazonaws.com/0/86468/3500246c-cade-caf2-8ec8-be76b9664c9b.png)\n\n\u3053\u308c\u3067\u3001UnauthUser\u306b\u5bfe\u3057\u3066API\u3092\u5b9f\u884c\u3059\u308b\u8a31\u53ef\u3092\u4e0e\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n##Cognito UnauthUser\u306eCredential\u3067API\u3092\u53e9\u304fJavascript\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u304f\uff08\u5b8c\u6210\uff09\n\n\u3055\u304d\u307b\u3069\u4f5c\u6210\u3057\u305fHTML\u30d5\u30a1\u30a4\u30eb\u3092\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n- `<script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.7.19.min.js\"></script>`\u3067AWS SDK for Javascript\u3092\u8aad\u307f\u8fbc\u307f\n- `AWS.config.credential`\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u306b\u3055\u304d\u307b\u3069\u30b3\u30d4\u30fc\u3057\u305f**Identity Pool ID**\u3092\u8cbc\u308a\u4ed8\u3051\u308b\n- `AWS.config.credential.get()`\u306b\u3088\u3063\u3066\u5f97\u3089\u308c\u308baccessKeyId\u3068secretAccessKey\u3068sessionToken\u3001\u53ca\u3073region\u3092apigClient\u306b\u8a2d\u5b9a\u3057\u3066\u521d\u671f\u5316\u3059\u308b\u3002\n\n```html\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>API test</title>\n  <!-- AWS SDK -->\n  <script src=\"https://sdk.amazonaws.com/js/aws-sdk-2.7.19.min.js\"></script>\n  <!-- jQuery -->\n  <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js\"></script>\n  <!-- API\u7528SDK -->\n  <script type=\"text/javascript\" src=\"lib/axios/dist/axios.standalone.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/hmac-sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/rollups/sha256.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/hmac.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/CryptoJS/components/enc-base64.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/url-template/url-template.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/sigV4Client.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/apiGatewayClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/simpleHttpClient.js\"></script>\n  <script type=\"text/javascript\" src=\"lib/apiGatewayCore/utils.js\"></script>\n  <script type=\"text/javascript\" src=\"apigClient.js\"></script>\n</head>\n<body>\n<!-- HTML  -->\n<button id=\"btn\">\u30dc\u30bf\u30f3</button>\n<!-- Other Script -->\n<script type=\"text/javascript\">\nvar apigClient;\n$(function(){\n  //AWS Credential\u306e\u521d\u671f\u5316\n  AWS.config.region = 'ap-northeast-1';\n  AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n      IdentityPoolId: 'ap-northeast-XXXXXXXXXXXXXXXXXXXXXXX' //Identity Pool Id\u3092\u8cbc\u308a\u4ed8\u3051\u308b(ARN\u3067\u306f\u306a\u3044\u3002)\n  });\n  AWS.config.credentials.get(function(err){\n    if(!err){\n      //API Client\u306baccessKey,secretKey,sessionToken,region\u3092\u8a2d\u5b9a\u3057\u3001\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n      apigClient = apigClientFactory.newClient({\n        accessKey: AWS.config.credentials.accessKeyId,\n        secretKey: AWS.config.credentials.secretAccessKey,\n        sessionToken: AWS.config.credentials.sessionToken,//\u5927\u4e8b\n        region: 'ap-northeast-1'//\u5927\u4e8b\n      });\n    }else{\n      console.log(err);\n    }\n  });\n});\n$('#btn').click(function(){\n  apigClient.testGet({}, {}, {})\n  .then(function(result){\n    // Add success callback code here.\n    console.log(result);\n  }).catch( function(result){\n    // Add error callback code here.\n    console.log(result);\n  });\n});\n</script>\n</body>\n</html>\n\n```\n\n\u3053\u308c\u3067\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001API\u306e\u547c\u3073\u51fa\u3057\u306b\u6210\u529f\u3057\u3001Lambda\u304b\u3089'Hello World'\u306e\u6587\u5b57\u5217\u304c\u8fd4\u3063\u3066\u304f\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-12-27 1.20.01.png](https://qiita-image-store.s3.amazonaws.com/0/86468/6431ba0a-dbf5-5d17-53b3-553f778a23f4.png)\n\n\n#\u30dd\u30a4\u30f3\u30c8\n- CORS\u3092\u6709\u52b9\u5316\u3057\u305f\u308a\u8a8d\u8a3c\u3092\u5909\u66f4\u3057\u305f\u308a\u306a\u3069\u3001API\u306e\u8a2d\u5b9a\u3092\u3044\u3058\u3063\u305f\u5f8c\u306f\u3001API\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u306e\u3092\u5fd8\u308c\u306a\u3044\u3002\n- APIGateway\u3067\u751f\u6210\u3057\u305fJavascript\u7528\u306eSDK\u306f\u3001\u8d85\u7d76\u9762\u5012\u304f\u3055\u3044Signature V4\u306e\u7f72\u540d\u4ed8\u304d\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u3084\u3063\u3066\u304f\u308c\u308b\u3002\n- apigClient\u306b\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3068\u30b7\u30fc\u30af\u30ec\u30c3\u30c8\u30ad\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u6642\u3001sessionToken\u3068region\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u306a\u3063\u3066\u3044\u308b\u304c\u3001\u3053\u3053\u3092\u8a2d\u5b9a\u3057\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\u306e\u3067\u5168\u3066\u8a2d\u5b9a\u3059\u308b\u3002\uff08\u3053\u3053\u3067\u3060\u3044\u3076\u30cf\u30de\u3063\u305f\u3002\uff09\n\n##\u53c2\u8003URL\n[API Gateway \u30ea\u30bd\u30fc\u30b9\u306e CORS \u3092\u6709\u52b9\u306b\u3059\u308b](http://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/how-to-cors.html)\n[API \u5b9f\u884c\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u306e IAM \u30dd\u30ea\u30b7\u30fc\u306e\u4f8b](http://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/api-gateway-iam-policy-examples-for-api-execution.html)\n[API Gateway \u30b3\u30f3\u30bd\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u3066 API \u306e SDK \u3092\u751f\u6210\u3059\u308b](http://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/how-to-generate-sdk-console.html)\n[API Gateway \u3067\u751f\u6210\u3057\u305f JavaScript SDK \u3092\u4f7f\u7528\u3059\u308b](http://docs.aws.amazon.com/ja_jp/apigateway/latest/developerguide/how-to-generate-sdk-javascript.html)\n[aws-api-gateway-client](https://www.npmjs.com/package/aws-api-gateway-client)\n"}