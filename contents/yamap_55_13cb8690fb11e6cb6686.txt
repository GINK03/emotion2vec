{"context": " More than 1 year has passed since last update.Groovy\u3067\u306eDB\u51e6\u7406\u3092\u307e\u3068\u3081\u3066\u3066\u3001\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u5974\u3089\u3002\n\u4e0a\u306f\u3068\u3082\u304b\u304f\u3001\u4e0b\u306edataset\u306b\u3064\u3044\u3066\u306ffumokmm\u3055\u3093\u306e\u6240\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u3084\u308a\u304b\u305f\u305d\u306e\u307e\u307e\u3060\u304b\u3089\u9593\u9055\u3063\u3066\u306a\u3044\u3068\u601d\u3046\u3093\u3067\u3059\u304c\u3002\u3002\u3002\nimport groovy.sql.Sql\n\ndef sql = Sql.newInstance(\"jdbc:mysql://localhost:3309/test\", \"yamap\", \"yamap\", \"com.mysql.jdbc.Driver\")\n\n// List\u3092\u8fd4\u3059executeInsert \u3068\u3044\u3046\u306e\u3082\u3042\u3063\u305f\u3051\u3069\u4f55\u304c\u8fd4\u3063\u3066\u304f\u308b\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u3002\n//\uff08\u8272\u3005\u8a66\u3057\u305f\u3051\u3069\u7a7a\u306e\u30ea\u30b9\u30c8\u3057\u304b\u8fd4\u3063\u3066\u3053\u306a\u3044\u3002\u3002\u3002\uff09\ndef keys =  sql.executeInsert(\"insert into data (id, name) values (?,?)\",['77', 'yamap'])\nassert keys == []\nprintln sql.rows(\"select * from data where id = ?\", [\"77\"])\n\n// dataSet\u3092\u4f7f\u7528\u3059\u308b\u3068sql\u4f5c\u3063\u3066\u304f\u308c\u308b\u3068\u304b\u3042\u308b\u3089\u3057\u3044\u3051\u3069\u3001\u4f8b\u5916\u767a\u751f\u3002\u4f55\u304c\u9055\u3046\uff1f\uff1f\ndef dataSet1 = sql.dataSet('data')\ndef dataSet2 = dataSet1.findAll{it.name == 'yamada'}\n\n// groovy.lang.GroovyRuntimeException: Could not find the ClassNode for MetaClass: org.codehaus.groovy.runtime.metaclass.ClosureMetaClass@1998b7d[class ConsoleScript9$_run_closure1]\nprintln dataSet2.rows()\n\n[Groovy\u3067\u306eDB\u51e6\u7406](http://qiita.com/items/2798 \"Groovy\u3067\u306eDB\u51e6\u7406\")\u3092\u307e\u3068\u3081\u3066\u3066\u3001\u308f\u304b\u3089\u306a\u304b\u3063\u305f\u5974\u3089\u3002\n\u4e0a\u306f\u3068\u3082\u304b\u304f\u3001\u4e0b\u306edataset\u306b\u3064\u3044\u3066\u306f[fumokmm\u3055\u3093\u306e\u6240](http://d.hatena.ne.jp/fumokmm/20090505/1241504105 \"Groovy\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u64cd\u4f5c\uff08GroovySQL\uff09\")\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\u3084\u308a\u304b\u305f\u305d\u306e\u307e\u307e\u3060\u304b\u3089\u9593\u9055\u3063\u3066\u306a\u3044\u3068\u601d\u3046\u3093\u3067\u3059\u304c\u3002\u3002\u3002\n\n```groovy\nimport groovy.sql.Sql\n\ndef sql = Sql.newInstance(\"jdbc:mysql://localhost:3309/test\", \"yamap\", \"yamap\", \"com.mysql.jdbc.Driver\")\n\n// List\u3092\u8fd4\u3059executeInsert \u3068\u3044\u3046\u306e\u3082\u3042\u3063\u305f\u3051\u3069\u4f55\u304c\u8fd4\u3063\u3066\u304f\u308b\u306e\u304b\u308f\u304b\u3089\u306a\u3044\u3002\n//\uff08\u8272\u3005\u8a66\u3057\u305f\u3051\u3069\u7a7a\u306e\u30ea\u30b9\u30c8\u3057\u304b\u8fd4\u3063\u3066\u3053\u306a\u3044\u3002\u3002\u3002\uff09\ndef keys =  sql.executeInsert(\"insert into data (id, name) values (?,?)\",['77', 'yamap'])\nassert keys == []\nprintln sql.rows(\"select * from data where id = ?\", [\"77\"])\n\n// dataSet\u3092\u4f7f\u7528\u3059\u308b\u3068sql\u4f5c\u3063\u3066\u304f\u308c\u308b\u3068\u304b\u3042\u308b\u3089\u3057\u3044\u3051\u3069\u3001\u4f8b\u5916\u767a\u751f\u3002\u4f55\u304c\u9055\u3046\uff1f\uff1f\ndef dataSet1 = sql.dataSet('data')\ndef dataSet2 = dataSet1.findAll{it.name == 'yamada'}\n\n// groovy.lang.GroovyRuntimeException: Could not find the ClassNode for MetaClass: org.codehaus.groovy.runtime.metaclass.ClosureMetaClass@1998b7d[class ConsoleScript9$_run_closure1]\nprintln dataSet2.rows()\n```\n", "tags": ["Groovy"]}