{"context": " More than 1 year has passed since last update.\u516c\u5f0f\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3001\u7aef\u6298\u3063\u3066\u65e5\u672c\u8a9e\u3067\u66f8\u3044\u305f\u3060\u3051\u3067\u3059\u3002\n\u8abf\u3079\u305f\u3053\u3068\u306e\u5099\u5fd8\u9332\u306a\u306e\u3067\u3001\u4e0d\u5b9a\u671f\u3067\u66f4\u65b0\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\u9593\u9055\u3063\u3066\u3044\u308b\u70b9\u3084\u3001\u602a\u3057\u3044\u65e5\u672c\u8a9e\u8a33\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059orz\n\n\u74b0\u5883\nRuby: 2.2.1\nRails: 4.2.3\ndevise: 3.5.1\n\nDevise\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ bundle exec rails g devise:install\n      create  config/initializers/devise.rb\n      create  config/locales/devise.en.yml\n\n\n\u521d\u671f\u8a2d\u5b9a\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u5f8c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n# environment\u3054\u3068\u306bURL\u60c5\u5831\u3092\u8a2d\u5b9a\n# ex) config/environments/development.rb\nconfig.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\n\n\u30e2\u30c7\u30eb\u4f5c\u6210\n# \u3053\u3053\u3067\u306f\u300cUser\u300d\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n$ bundle exec rails g devise User\n      invoke  active_record\n      create    db/migrate/20150710020211_devise_create_users.rb\n      create    app/models/user.rb\n      insert    app/models/user.rb\n       route  devise_for :users\n\n\n\u4f7f\u3044\u65b9\nUser\u30e2\u30c7\u30eb\u3092\u524d\u63d0\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u3082\u3057\u3001\u7570\u306a\u308b\u540d\u79f0\u306e\u30e2\u30c7\u30eb\u306b\u3057\u305f\u5834\u5408\u306f\u3001user\u90e8\u5206\u3092\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\u203b\u52d5\u7684\u30e1\u30bd\u30c3\u30c9\n\n\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\n\u8a8d\u8a3c\u3092\u5fc5\u8981\u3068\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u3001\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3002\n# \u8a8d\u8a3c\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u307e\u3059\u3002\nbefore_action :authenticate_user!\n\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u60c5\u5831\u306f\u3001\u4ee5\u4e0b\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\ncurrent_user\n\n\n\u4efb\u610f\u306e\u8a2d\u5b9a\n\n\u30e2\u30c7\u30eb\ndevise\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30aa\u30d7\u30b7\u30e7\u30f3\u306f10\u500b\u306e\u30af\u30e9\u30b9\u306b\u5206\u304b\u308c\u3066\u304a\u308a\u3001\u30b7\u30f3\u30dc\u30eb\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n# app/models/user.rb\nclass User < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\nend\n\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\n\nDatabase Authenticatable\n\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u6a5f\u80fd\u3002\n\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3068\u304d\u306b\u3001DB\u306b\u6697\u53f7\u5316\u3057\u3066\u767b\u9332\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u8a8d\u8a3c\u3092\u884c\u3046\u3002\n\u8a8d\u8a3c\u51e6\u7406\u306f\u3001POST\u30ea\u30af\u30a8\u30b9\u30c8\uff0fBASIC\u8a8d\u8a3c\u3092\u901a\u3057\u3066\u884c\u308f\u308c\u307e\u3059\u3002\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.string :email,              null: false, default: \"\"\nt.string :encrypted_password, null: false, default: \"\"\n\n\nOmniauthable\nOAuth\u3092\u30b5\u30dd\u30fc\u30c8\u3002\n\u203bOmniAuth\u3092\u5229\u7528\u3002\n\nConfirmable\n\u767b\u9332\u78ba\u8a8d\u6a5f\u80fd\u3002\n\u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u6642\u306b\u78ba\u8a8d\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u78ba\u8a8d\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.string   :confirmation_token\nt.datetime :confirmed_at\nt.datetime :confirmation_sent_at\nt.string   :unconfirmed_email # Only if using reconfirmable\n\n\nRecoverable\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u6a5f\u80fd\n\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u7d1b\u5931\u3057\u305f\u969b\u306b\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30ea\u30bb\u30c3\u30c8\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30ea\u30bb\u30c3\u30c8\u6642\u306b\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.string   :reset_password_token\nt.datetime :reset_password_sent_at\n\n\nRegisterable\n\u30a2\u30ab\u30a6\u30f3\u30c8\u64cd\u4f5c\u6a5f\u80fd\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\uff0f\u524a\u9664\u3068\u3001\u5404\u30e6\u30fc\u30b6\u304c\u81ea\u5206\u81ea\u8eab\u306e\u7de8\u96c6\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nRememberable\n\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306e\u4fdd\u6301\u6a5f\u80fd\n\u30af\u30c3\u30ad\u30fc\u3092\u5229\u7528\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306e\u4fdd\u6301\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u203b\u30af\u30c3\u30ad\u30fc\u304c\u6709\u52b9\u306a\u671f\u9593\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u3092\u5165\u529b\u305b\u305a\u306b\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3002\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.datetime :remember_created_at\n\n\nTrackable\n\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306e\u767b\u9332\n\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u56de\u6570\uff0f\u30ed\u30b0\u30a4\u30f3\u6642\u9593\uff0fIP\u30a2\u30c9\u30ec\u30b9\u3092DB\u306b\u767b\u9332\u3055\u308c\u307e\u3059\u3002\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.integer  :sign_in_count, default: 0, null: false\nt.datetime :current_sign_in_at\nt.datetime :last_sign_in_at\nt.string   :current_sign_in_ip\nt.string   :last_sign_in_ip\n\n\nTimeoutable\n\u5f37\u5236\u30ed\u30b0\u30a2\u30a6\u30c8\u6a5f\u80fd\n\u4e00\u5b9a\u6642\u9593\u3001\u753b\u9762\u64cd\u4f5c\u304c\u884c\u308f\u308c\u306a\u304b\u3063\u305f\u6642\u306b\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nValidatable\n\u8a8d\u8a3c\u6a5f\u80fd\nE\u30e1\u30fc\u30eb\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u8a8d\u8a3c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8a8d\u8a3c\u65b9\u6cd5\u3092\u5909\u3048\u305f\u3044\u5834\u5408\u306f\u3001\u72ec\u81ea\u3067\u5b9a\u7fa9\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nLockable\n\u30a2\u30ab\u30a6\u30f3\u30c8\u30ed\u30c3\u30af\u6a5f\u80fd\n\u4e00\u5b9a\u56de\u6570\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u305f\u6642\u306b\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30ed\u30c3\u30af\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4e00\u5b9a\u6642\u9593\u7d4c\u904e\u3059\u308b\u304b\u3001E\u30e1\u30fc\u30eb\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u89e3\u9664URL\u304b\u3089\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts\nt.string   :unlock_token # Only if unlock strategy is :email or :both\nt.datetime :locked_at\n\n\n\u30d3\u30e5\u30fc\n\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3001\u30c7\u30b6\u30a4\u30f3\u3092\u5909\u3048\u305f\u308a\u3059\u308b\u5834\u5408\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d3\u30e5\u30fc\u3092app/views/devise\u914d\u4e0b\u306b\u4f5c\u6210\u3002\n$ bundle exec rails g devise:views\n      invoke  Devise::Generators::SharedViewsGenerator\n      create    app/views/devise/shared\n      create    app/views/devise/shared/_links.html.erb\n      invoke  form_for\n      create    app/views/devise/confirmations\n      create    app/views/devise/confirmations/new.html.erb\n      create    app/views/devise/passwords\n      create    app/views/devise/passwords/edit.html.erb\n      create    app/views/devise/passwords/new.html.erb\n      create    app/views/devise/registrations\n      create    app/views/devise/registrations/edit.html.erb\n      create    app/views/devise/registrations/new.html.erb\n      create    app/views/devise/sessions\n      create    app/views/devise/sessions/new.html.erb\n      create    app/views/devise/unlocks\n      create    app/views/devise/unlocks/new.html.erb\n      invoke  erb\n      create    app/views/devise/mailer\n      create    app/views/devise/mailer/confirmation_instructions.html.erb\n      create    app/views/devise/mailer/reset_password_instructions.html.erb\n      create    app/views/devise/mailer/unlock_instructions.html.erb\n\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u304b\u3089\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001devise\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092override\u3059\u308b\u3002\n# \u300cuser\u300d\u30e2\u30c7\u30eb\u306a\u306e\u3067\u3001\u5f15\u6570\u306b`users`\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n$ bundle exec rails g devise:controllers users\n      create  app/controllers/users/confirmations_controller.rb\n      create  app/controllers/users/passwords_controller.rb\n      create  app/controllers/users/registrations_controller.rb\n      create  app/controllers/users/sessions_controller.rb\n      create  app/controllers/users/unlocks_controller.rb\n      create  app/controllers/users/omniauth_callbacks_controller.rb\n\ngenerate\u5b8c\u4e86\u5f8c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n# routes.rb\n# override\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u6307\u5b9a\ndevise_for :users, controllers: {\n  confirmations: 'users/confirmations',\n  passwords: 'users/passwords',\n  registrations: 'users/registrations',\n  sessions: 'users/sessions',\n  unlocks: 'users/unlocks',\n  omniauth_callbacks: 'users/omniauth_callbacks'\n}\n\n\n\u8ffd\u52a0\u30ab\u30e9\u30e0\nStrong Parameter\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u3066\u8ffd\u52a0\u30ab\u30e9\u30e0\u304c\u3042\u308b\u5834\u5408\u306f\u3001permit\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nclass ApplicationController < ActionController::Base\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  protected\n\n  def configure_permitted_parameters\n    # \u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u6642\u306b\u300cusername\u300d\u3092\u8ffd\u52a0\u3057\u305f\u5834\u5408\n    devise_parameter_sanitizer.for(:sign_up) << :username\n  end\nend\n\nfor()\u3067\u6307\u5b9a\u3067\u304d\u308b\u30b7\u30f3\u30dc\u30eb\u306f\u3001\u4ee5\u4e0b\u306e3\u70b9\u3067\u3059\u3002\n\n\n:sign_in: \u30ed\u30b0\u30a4\u30f3\u6642\n\n:sign_up: \u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u6642\n\n:account_update: \u30a2\u30ab\u30a6\u30f3\u30c8\u66f4\u65b0\u6642\n\n[\u516c\u5f0f](https://github.com/plataformatec/devise)\u306b\u66f8\u304b\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u3001\u7aef\u6298\u3063\u3066\u65e5\u672c\u8a9e\u3067\u66f8\u3044\u305f\u3060\u3051\u3067\u3059\u3002\n\n\u8abf\u3079\u305f\u3053\u3068\u306e\u5099\u5fd8\u9332\u306a\u306e\u3067\u3001\u4e0d\u5b9a\u671f\u3067\u66f4\u65b0\u3055\u308c\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\u9593\u9055\u3063\u3066\u3044\u308b\u70b9\u3084\u3001\u602a\u3057\u3044\u65e5\u672c\u8a9e\u8a33\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059orz\n\n# \u74b0\u5883\nRuby: 2.2.1\nRails: 4.2.3\ndevise: 3.5.1\n\n# Devise\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\n$ bundle exec rails g devise:install\n      create  config/initializers/devise.rb\n      create  config/locales/devise.en.yml\n```\n\n## \u521d\u671f\u8a2d\u5b9a\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u5f8c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n\n```\n# environment\u3054\u3068\u306bURL\u60c5\u5831\u3092\u8a2d\u5b9a\n# ex) config/environments/development.rb\nconfig.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n```\n\n### \u30e2\u30c7\u30eb\u4f5c\u6210\n```\n# \u3053\u3053\u3067\u306f\u300cUser\u300d\u30e2\u30c7\u30eb\u3092\u4f5c\u308b\u3053\u3068\u3068\u3057\u307e\u3059\u3002\n$ bundle exec rails g devise User\n      invoke  active_record\n      create    db/migrate/20150710020211_devise_create_users.rb\n      create    app/models/user.rb\n      insert    app/models/user.rb\n       route  devise_for :users\n```\n\n## \u4f7f\u3044\u65b9\n`User`\u30e2\u30c7\u30eb\u3092\u524d\u63d0\u3067\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\u3082\u3057\u3001\u7570\u306a\u308b\u540d\u79f0\u306e\u30e2\u30c7\u30eb\u306b\u3057\u305f\u5834\u5408\u306f\u3001`user`\u90e8\u5206\u3092\u7f6e\u304d\u63db\u3048\u3066\u304f\u3060\u3055\u3044\u3002\n\u203b\u52d5\u7684\u30e1\u30bd\u30c3\u30c9\n\n### \u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\n\u8a8d\u8a3c\u3092\u5fc5\u8981\u3068\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306b\u3001\u4ee5\u4e0b\u3092\u8ffd\u8a18\u3002\n\n```\n# \u8a8d\u8a3c\u3055\u308c\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3055\u308c\u307e\u3059\u3002\nbefore_action :authenticate_user!\n```\n\n### \u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u60c5\u5831\u306f\u3001\u4ee5\u4e0b\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n```\ncurrent_user\n```\n\n\n## \u4efb\u610f\u306e\u8a2d\u5b9a\n### \u30e2\u30c7\u30eb\ndevise\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\u30aa\u30d7\u30b7\u30e7\u30f3\u306f10\u500b\u306e\u30af\u30e9\u30b9\u306b\u5206\u304b\u308c\u3066\u304a\u308a\u3001\u30b7\u30f3\u30dc\u30eb\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```\n# app/models/user.rb\nclass User < ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\nend\n```\n\n#### \u30aa\u30d7\u30b7\u30e7\u30f3\n##### Database Authenticatable\n\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u6a5f\u80fd\u3002\n\n\u30ed\u30b0\u30a4\u30f3\u3059\u308b\u3068\u304d\u306b\u3001DB\u306b\u6697\u53f7\u5316\u3057\u3066\u767b\u9332\u3055\u308c\u305f\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u4f7f\u3063\u3066\u8a8d\u8a3c\u3092\u884c\u3046\u3002\n\u8a8d\u8a3c\u51e6\u7406\u306f\u3001POST\u30ea\u30af\u30a8\u30b9\u30c8\uff0fBASIC\u8a8d\u8a3c\u3092\u901a\u3057\u3066\u884c\u308f\u308c\u307e\u3059\u3002\n\n```\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.string :email,              null: false, default: \"\"\nt.string :encrypted_password, null: false, default: \"\"\n```\n\n##### Omniauthable\nOAuth\u3092\u30b5\u30dd\u30fc\u30c8\u3002\n\u203b[OmniAuth](https://github.com/intridea/omniauth)\u3092\u5229\u7528\u3002\n\n##### Confirmable\n\u767b\u9332\u78ba\u8a8d\u6a5f\u80fd\u3002\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u6642\u306b\u78ba\u8a8d\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u3001\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u78ba\u8a8d\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\u3002\n\n```\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.string   :confirmation_token\nt.datetime :confirmed_at\nt.datetime :confirmation_sent_at\nt.string   :unconfirmed_email # Only if using reconfirmable\n```\n\n##### Recoverable\n\u30d1\u30b9\u30ef\u30fc\u30c9\u30ea\u30bb\u30c3\u30c8\u6a5f\u80fd\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u7d1b\u5931\u3057\u305f\u969b\u306b\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u30ea\u30bb\u30c3\u30c8\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30ea\u30bb\u30c3\u30c8\u6642\u306b\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3057\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u518d\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n\n```\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.string   :reset_password_token\nt.datetime :reset_password_sent_at\n```\n\n##### Registerable\n\u30a2\u30ab\u30a6\u30f3\u30c8\u64cd\u4f5c\u6a5f\u80fd\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u767b\u9332\uff0f\u524a\u9664\u3068\u3001\u5404\u30e6\u30fc\u30b6\u304c\u81ea\u5206\u81ea\u8eab\u306e\u7de8\u96c6\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n##### Rememberable\n\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306e\u4fdd\u6301\u6a5f\u80fd\n\n\u30af\u30c3\u30ad\u30fc\u3092\u5229\u7528\u3057\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306e\u4fdd\u6301\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u203b\u30af\u30c3\u30ad\u30fc\u304c\u6709\u52b9\u306a\u671f\u9593\u306f\u3001\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u3092\u5165\u529b\u305b\u305a\u306b\u30ed\u30b0\u30a4\u30f3\u304c\u53ef\u80fd\u3002\n\n```\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.datetime :remember_created_at\n```\n\n##### Trackable\n\u30ed\u30b0\u30a4\u30f3\u60c5\u5831\u306e\u767b\u9332\n\n\u30ed\u30b0\u30a4\u30f3\u6642\u306b\u3001\u30ed\u30b0\u30a4\u30f3\u56de\u6570\uff0f\u30ed\u30b0\u30a4\u30f3\u6642\u9593\uff0fIP\u30a2\u30c9\u30ec\u30b9\u3092DB\u306b\u767b\u9332\u3055\u308c\u307e\u3059\u3002\n\n```\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.integer  :sign_in_count, default: 0, null: false\nt.datetime :current_sign_in_at\nt.datetime :last_sign_in_at\nt.string   :current_sign_in_ip\nt.string   :last_sign_in_ip\n```\n\n##### Timeoutable\n\u5f37\u5236\u30ed\u30b0\u30a2\u30a6\u30c8\u6a5f\u80fd\n\n\u4e00\u5b9a\u6642\u9593\u3001\u753b\u9762\u64cd\u4f5c\u304c\u884c\u308f\u308c\u306a\u304b\u3063\u305f\u6642\u306b\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n##### Validatable\n\u8a8d\u8a3c\u6a5f\u80fd\n\nE\u30e1\u30fc\u30eb\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u8a8d\u8a3c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8a8d\u8a3c\u65b9\u6cd5\u3092\u5909\u3048\u305f\u3044\u5834\u5408\u306f\u3001\u72ec\u81ea\u3067\u5b9a\u7fa9\u3092\u884c\u3046\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n##### Lockable\n\u30a2\u30ab\u30a6\u30f3\u30c8\u30ed\u30c3\u30af\u6a5f\u80fd\n\n\u4e00\u5b9a\u56de\u6570\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u305f\u6642\u306b\u3001\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u30ed\u30c3\u30af\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u4e00\u5b9a\u6642\u9593\u7d4c\u904e\u3059\u308b\u304b\u3001E\u30e1\u30fc\u30eb\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u89e3\u9664URL\u304b\u3089\u30ed\u30c3\u30af\u3092\u89e3\u9664\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n# \u8a72\u5f53\u30ab\u30e9\u30e0\nt.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts\nt.string   :unlock_token # Only if unlock strategy is :email or :both\nt.datetime :locked_at\n```\n\n### \u30d3\u30e5\u30fc\n\u30ab\u30e9\u30e0\u3092\u8ffd\u52a0\u3057\u305f\u308a\u3001\u30c7\u30b6\u30a4\u30f3\u3092\u5909\u3048\u305f\u308a\u3059\u308b\u5834\u5408\u306f\u3001\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306e\u30d3\u30e5\u30fc\u3092`app/views/devise`\u914d\u4e0b\u306b\u4f5c\u6210\u3002\n\n```\n$ bundle exec rails g devise:views\n      invoke  Devise::Generators::SharedViewsGenerator\n      create    app/views/devise/shared\n      create    app/views/devise/shared/_links.html.erb\n      invoke  form_for\n      create    app/views/devise/confirmations\n      create    app/views/devise/confirmations/new.html.erb\n      create    app/views/devise/passwords\n      create    app/views/devise/passwords/edit.html.erb\n      create    app/views/devise/passwords/new.html.erb\n      create    app/views/devise/registrations\n      create    app/views/devise/registrations/edit.html.erb\n      create    app/views/devise/registrations/new.html.erb\n      create    app/views/devise/sessions\n      create    app/views/devise/sessions/new.html.erb\n      create    app/views/devise/unlocks\n      create    app/views/devise/unlocks/new.html.erb\n      invoke  erb\n      create    app/views/devise/mailer\n      create    app/views/devise/mailer/confirmation_instructions.html.erb\n      create    app/views/devise/mailer/reset_password_instructions.html.erb\n      create    app/views/devise/mailer/unlock_instructions.html.erb\n```\n\n### \u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u51e6\u7406\u304b\u3089\u5909\u66f4\u3057\u305f\u3044\u5834\u5408\u306f\u3001devise\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092override\u3059\u308b\u3002\n\n```\n# \u300cuser\u300d\u30e2\u30c7\u30eb\u306a\u306e\u3067\u3001\u5f15\u6570\u306b`users`\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n$ bundle exec rails g devise:controllers users\n      create  app/controllers/users/confirmations_controller.rb\n      create  app/controllers/users/passwords_controller.rb\n      create  app/controllers/users/registrations_controller.rb\n      create  app/controllers/users/sessions_controller.rb\n      create  app/controllers/users/unlocks_controller.rb\n      create  app/controllers/users/omniauth_callbacks_controller.rb\n```\n\ngenerate\u5b8c\u4e86\u5f8c\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3001\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n# routes.rb\n# override\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3092\u6307\u5b9a\ndevise_for :users, controllers: {\n  confirmations: 'users/confirmations',\n  passwords: 'users/passwords',\n  registrations: 'users/registrations',\n  sessions: 'users/sessions',\n  unlocks: 'users/unlocks',\n  omniauth_callbacks: 'users/omniauth_callbacks'\n}\n```\n\n#### \u8ffd\u52a0\u30ab\u30e9\u30e0\nStrong Parameter\u3092\u6709\u52b9\u306b\u3057\u3066\u3044\u3066\u8ffd\u52a0\u30ab\u30e9\u30e0\u304c\u3042\u308b\u5834\u5408\u306f\u3001permit\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\nclass ApplicationController < ActionController::Base\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  protected\n\n  def configure_permitted_parameters\n    # \u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u6642\u306b\u300cusername\u300d\u3092\u8ffd\u52a0\u3057\u305f\u5834\u5408\n    devise_parameter_sanitizer.for(:sign_up) << :username\n  end\nend\n```\n\n`for()`\u3067\u6307\u5b9a\u3067\u304d\u308b\u30b7\u30f3\u30dc\u30eb\u306f\u3001\u4ee5\u4e0b\u306e3\u70b9\u3067\u3059\u3002\n\n- `:sign_in`: \u30ed\u30b0\u30a4\u30f3\u6642\n- `:sign_up`: \u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332\u6642\n- `:account_update`: \u30a2\u30ab\u30a6\u30f3\u30c8\u66f4\u65b0\u6642\n", "tags": ["Rails", "devise"]}