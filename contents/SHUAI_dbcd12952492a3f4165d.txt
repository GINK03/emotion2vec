{"context": "from How We Build Code at Netflix\n\nto be better, faster, and easier\n\nBinary Dependencies\nNetflix\u958b\u767c\u4e86\u540d\u70baNebula\u7684Gradle plugins\u96c6\u5408\n\u4e26\u4e14\u4f7f\u7528Gradle\u505a\u70babuild system\u7684\u5de5\u5177\n\u5176\u4e2dNebula dependency-lock plugin\u53ef\u91dd\u5c0d\u7279\u5b9a\u7248\u672c\u4f86lock dynamic dependency\n\u800cNebula resolution rules plugin\u53ef\u8a02\u5b9arule\u4f86\u898f\u7bc4\u89e3\u6790dependency\n\nBake Time\n\u7576jenkins\u6536\u5230git commit\u7570\u52d5trigger job\u5f8c\n\u6703\u57f7\u884cSpinnaker pipeline\nNebula ospackage plugin\u6703\u5c07application\u6253\u5305Debian or RPM package\nSpinnaker\u53d6\u5f97package\u5f8c\u6703call Bakery API to trigger a bake\n\u57f7\u884cinstall package\u7136\u5f8c\u7522\u751fimage\u81f3Amazon Machine Image(AMI)\n\u914d\u5408snapshot\u9032\u884c\u5ba2\u88fd\u5316AMI\u8655\u7406\n\n\n3 layers of volumes\n\nthe foundation image(OS image)\nthe base AMI(the vast majority of customization happens)\napplication's AMI\n\n\nImmutable Server\n\u81f3\u65bc\u70ba\u4ec0\u9ebc\u8981\u7522\u751f\u4ed6\u5011\u7c21\u7a31\u7684operating system package\u310b\n\u56e0\u70baNetflix deployment\u662f\u63a1\u7528Immutable Server pattern\nImmutable Infrastructure or Immutable Delivery\n\u8207\u5176\u8cbb\u6642\u8a2d\u5b9a\u53ef\u8b93application\u4f5c\u696d\u4e14\u751f\u547d\u9031\u671f\u77ed\u66ab\u7684infrastructure\u74b0\u5883\n\u4e0d\u5982\u88fd\u505a\u53ef\u91cd\u8986\u4f7f\u7528\u7684AMI\n\u5229\u7528AMI launch instance\u4f86\u8dd1\u6e2c\u8a66\u9a57\u8b49\u5b8c\u6210CD\n\u53ef\u6e1b\u5c11infrastructure\u8dd1\u5b8c\u6e2c\u8a66\u5f8c\u8981\u56de\u8986\u539f\u72c0\u7684\u4e0d\u78ba\u5b9a\u6027\n\u7c21\u55ae\u7684\u8aaa\u5c31\u662f\u8981\u5be6\u73feStateless\n\nContainer\n\u5982\u679c\u80fd\u63d0\u4f9blocal container-based\u7684cloud\u74b0\u5883\ncontainer deployed locally\u4e0d\u9700\u505a\u591a\u9918\u4fee\u6539\n\u76f8\u4fe1\u6709\u6a5f\u6703\u89e3\u6c7adependency\u548cbake\u6642\u9593\u904e\u9577\u7b49\u4ee5\u4e0a\u5169\u5927\u8ab2\u984c\n\u53e6\u5916\u6709\u95dcImmutable Container\u53ef\u53c3\u8003\u9019\u7bc7\u5fc3\u5f97\u7b46\u8a18\nfrom [How We Build Code at Netflix](http://techblog.netflix.com/2016/03/how-we-build-code-at-netflix.html)\n![pasted image 0.png](https://qiita-image-store.s3.amazonaws.com/0/84946/bfe1c018-3c8e-80b4-6519-2aef4850b1c7.png)\n\nto be better, faster, and easier\n\n##Binary Dependencies\nNetflix\u958b\u767c\u4e86\u540d\u70ba[Nebula](http://nebula-plugins.github.io/)\u7684Gradle plugins\u96c6\u5408\n\u4e26\u4e14\u4f7f\u7528**Gradle**\u505a\u70babuild system\u7684\u5de5\u5177\n\n\u5176\u4e2d[Nebula dependency-lock plugin](https://github.com/nebula-plugins/gradle-dependency-lock-plugin)\u53ef\u91dd\u5c0d\u7279\u5b9a\u7248\u672c\u4f86lock dynamic dependency\n\u800c[Nebula resolution rules plugin](https://github.com/nebula-plugins/gradle-resolution-rules-plugin)\u53ef\u8a02\u5b9arule\u4f86\u898f\u7bc4\u89e3\u6790dependency\n\n##Bake Time\n\u7576jenkins\u6536\u5230git commit\u7570\u52d5trigger job\u5f8c\n\u6703\u57f7\u884c[Spinnaker pipeline](http://spinnaker.io/online_docs/overview/overview.html#deployment-management)\n\n[Nebula ospackage plugin](https://github.com/nebula-plugins/nebula-ospackage-plugin)\u6703\u5c07application\u6253\u5305**Debian or RPM package**\n[Spinnaker](http://spinnaker.io/)\u53d6\u5f97package\u5f8c\u6703**call Bakery API to trigger a bake**\n\u57f7\u884cinstall package\u7136\u5f8c\u7522\u751fimage\u81f3[Amazon Machine Image](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html)(AMI)\n\u914d\u5408**snapshot**\u9032\u884c\u5ba2\u88fd\u5316AMI\u8655\u7406\n![6a00d8341c534853ef01a5118edb3c970c.png](https://qiita-image-store.s3.amazonaws.com/0/84946/9ab6c972-70d1-ebab-dbaf-2c79f4e5b0e3.png)\n\n###3 layers of volumes\n- the foundation image(OS image)\n- the base AMI(the vast majority of customization happens)\n- application's AMI\n\n###Immutable Server\n\u81f3\u65bc\u70ba\u4ec0\u9ebc\u8981\u7522\u751f\u4ed6\u5011\u7c21\u7a31\u7684**operating system package**\u310b\n\u56e0\u70baNetflix deployment\u662f\u63a1\u7528[Immutable Server](http://martinfowler.com/bliki/ImmutableServer.html) pattern\n[Immutable Infrastructure or Immutable Delivery](http://theagileadmin.com/2015/11/24/immutable-delivery/)\n\n\u8207\u5176\u8cbb\u6642\u8a2d\u5b9a\u53ef\u8b93application\u4f5c\u696d\u4e14\u751f\u547d\u9031\u671f\u77ed\u66ab\u7684infrastructure\u74b0\u5883\n\u4e0d\u5982\u88fd\u505a\u53ef\u91cd\u8986\u4f7f\u7528\u7684AMI\n\u5229\u7528AMI launch instance\u4f86\u8dd1\u6e2c\u8a66\u9a57\u8b49\u5b8c\u6210CD\n\u53ef\u6e1b\u5c11infrastructure\u8dd1\u5b8c\u6e2c\u8a66\u5f8c\u8981\u56de\u8986\u539f\u72c0\u7684\u4e0d\u78ba\u5b9a\u6027\n\u7c21\u55ae\u7684\u8aaa\u5c31\u662f\u8981\u5be6\u73fe**Stateless**\n\n##Container\n\u5982\u679c\u80fd\u63d0\u4f9blocal container-based\u7684cloud\u74b0\u5883\ncontainer deployed locally\u4e0d\u9700\u505a\u591a\u9918\u4fee\u6539\n\u76f8\u4fe1\u6709\u6a5f\u6703\u89e3\u6c7adependency\u548cbake\u6642\u9593\u904e\u9577\u7b49\u4ee5\u4e0a\u5169\u5927\u8ab2\u984c\n\n\u53e6\u5916\u6709\u95dc[Immutable Container](http://nedwu13.blogspot.tw/2016/03/easier-better-faster-safer-deployment.html)\u53ef\u53c3\u8003\u9019\u7bc7\u5fc3\u5f97\u7b46\u8a18\n", "tags": ["CI", "netflix"]}