{"context": "\n\n\u306f\u3058\u3081\u306b\nRaspberryPi\u304c20\u53f0\u304f\u3089\u3044\u624b\u306b\u5165\u3063\u305f\u306e\u3067\u3059\u304c\u3001SD\u30ab\u30fc\u30c9\u304c\u8db3\u308a\u306a\u3044\uff01\n\u305d\u3093\u306a\u3068\u304d\u3063\u3066\u3088\u304f\u3042\u308a\u307e\u3059\u3088\u306d\u3002\nRaspberyPi3\u304b\u3089\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d6\u30fc\u30c8\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f\u3088\u3046\u306a\u306e\u3067\u6311\u6226\u3057\u307e\u3057\u305f\n\n\u516c\u5f0f\u306e\u53c2\u8003\u60c5\u5831\u3092\u898b\u306a\u304c\u3089\u9032\u3081\u3066\u3044\u304d\u307e\u3059\n\u82f1\u8a9e\u3092\u8aad\u3081\u308b\u65b9\u306f\u672c\u5bb6\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nNETWORK BOOTING\nhttps://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md\nNETWORK BOOT YOUR RASPBERRY PI\nhttps://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net_tutorial.md\n\n\u3084\u3063\u3066\u307f\u305f\n\nServer\u5074\u306e\u8a2d\u5b9a\n\nRaspberyPI3\u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\nSD\u30ab\u30fc\u30c9\u306b\u3044\u3064\u3082\u306eRaspbian\u3092\u7528\u610f\u3059\u308b\n\n\n\u3044\u3064\u3082\u306eNOOBS\u3092\u3044\u3064\u3082\u306e\u624b\u9806\u3067\u6e96\u5099\u3057\u307e\u3057\u3087\u3046\n\n\nOS\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u639b\u3051\u307e\u3059\n\n# If on raspbian lite you need to install rpi-update before you can use it:\n$ sudo apt-get update; sudo apt-get install rpi-update\n$ sudo BRANCH=next rpi-update\n\n\nSD\u30ab\u30fc\u30c9\u306e\u5bb9\u91cf\u3044\u3063\u3071\u3044\u307e\u3067filesystem\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3046\u3002\n\u7d42\u308f\u3063\u305f\u3089\u518d\u8d77\u52d5\u3067\u3059\n\n$ sudo raspi-config\n$ sudo reboot\n\n-etho\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306b\u632f\u308a\u76f4\u3057\u307e\u3059\u3002\n$ sudo vi /etc/network/interfaces\n\nauto eth0\niface eth0 inet static \n        address 10.42.0.2\n        netmask 255.255.255.0\n        gateway 10.42.0.1\n\n\nNFS\u30b5\u30fc\u30d0\u3092\u5efa\u3066\u307e\u3059\n\n$ sudo mkdir -p /nfs/client1\n$ sudo apt-get install rsync\n$ sudo rsync -xa --progress --exclude /nfs / /nfs/client1\n$ cd /nfs/client1\n$ sudo mount --bind /dev dev\n$ sudo mount --bind /sys sys\n$ sudo mount --bind /proc proc\n$ sudo chroot .\n$ rm /etc/ssh/ssh_host_*\n$ dpkg-reconfigure openssh-server\n$ exit\n$ sudo umount dev\n$ sudo umount sys\n$ sudo umount proc\n\n\ndnsmasq\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\n\nsudo apt-get update\nsudo apt-get install dnsmasq tcpdump\nsudo rm /etc/resolvconf/update.d/dnsmasq\nsudo reboot\nsudo echo | sudo tee /etc/dnsmasq.conf\nsudo nano /etc/dnsmasq.conf\n\n\ndnsmasq.conf\u306e\u4f5c\u6210\n\nport=0\ndhcp-range=10.42.0.255,proxy\nlog-dhcp\nenable-tftp\ntftp-root=/tftpboot\npxe-service=0,\"Raspberry Pi Boot\"\n\n\n/tftpboot \u3092\u4f5c\u308a\u307e\u3059\n\nsudo mkdir /tftpboot\nsudo chmod 777 /tftpboot\nsudo systemctl enable dnsmasq.service\nsudo systemctl restart dnsmasq.service\ncp -r /boot/* /tftpboot\nsudo systemctl restart dnsmasq\n\n\nNFS Root\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nsudo apt-get install nfs-kernel-server\necho \"/nfs/client1 *(rw,sync,no_subtree_check,no_root_squash)\" | sudo tee -a /etc/exports\nsudo systemctl enable rpcbind\nsudo systemctl restart rpcbind\nsudo systemctl enable nfs-kernel-server\nsudo systemctl restart nfs-kernel-server\n\n\n\n/tftpboot/cmdline.txt\u306e\u4f5c\u6210\n\nroot=/dev/nfs nfsroot=10.42.0.2:/nfs/client1 rw ip=dhcp rootwait elevator=deadline\n\n\nServer\u5074\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\n\nClient\u5074\u306e\u8a2d\u5b9a\n\nRaspberyPI3\u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\nSD\u30ab\u30fc\u30c9\u306b\u3044\u3064\u3082\u306eRaspbian\u3092\u7528\u610f\u3059\u308b\n\n\n\u3044\u3064\u3082\u306eNOOBS\u3092\u3044\u3064\u3082\u306e\u624b\u9806\u3067\u6e96\u5099\u3057\u307e\u3057\u3087\u3046\n\n\nOS\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u639b\u3051\u307e\u3059\n\n# If on raspbian lite you need to install rpi-update before you can use it:\n$ sudo apt-get update; sudo apt-get install rpi-update\n$ sudo BRANCH=next rpi-update\n\n\nUSB boot\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\n\necho program_usb_boot_mode=1 | sudo tee -a /boot/config.txt\n\n\nUSB\u30d6\u30fc\u30c8\u30e2\u30fc\u30c9\u3092ON\u306b\u3057\u307e\u3059\u3002\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d6\u30fc\u30c8\u3067\u3059\u304c\u3001USB\u30d6\u30fc\u30c8\u30e2\u30fc\u30c9\u3092ON\u306b\u3057\u307e\u3059\u3002\n\n$ echo program_usb_boot_mode=1 | sudo tee -a /boot/config.txt\n\n\nvcgencmd\u306e\u7d50\u679c\u304c\u4ee5\u4e0b\u306e\u901a\u308a\u306a\u3089OK\n\n$ vcgencmd otp_dump | grep 17:\n17:3020000a\n\n\n\u96fb\u6e90\u3092\u505c\u6b62\u3055\u305b\u307e\u3059\u3002\n\n$ sudo poweroff\n\n\n\u96fb\u6e90\u304c\u3061\u3083\u3093\u3068\u6b62\u307e\u3063\u3066\u304b\u3089\u96fb\u6e90\u3068SD\u30ab\u30fc\u30c9\u3092\u629c\u304d\u307e\u3059\u3002\n\u518d\u3073\u96fb\u6e90\u3092\u633f\u3059\u3068Network boot\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n\n\nNetwork Boot\u3067\u8d77\u52d5\u3057\u305f\u306f\u3044\u3044\u304c\u2026\nSSH Server\u304c\u3069\u3046\u3057\u3066\u3082\u8d77\u52d5\u305b\u305a\u3002\n\u3055\u3066\u56f0\u3063\u305f\u30fb\u30fb\u30fb\u3002\n# \u306f\u3058\u3081\u306b\nRaspberryPi\u304c20\u53f0\u304f\u3089\u3044\u624b\u306b\u5165\u3063\u305f\u306e\u3067\u3059\u304c\u3001SD\u30ab\u30fc\u30c9\u304c\u8db3\u308a\u306a\u3044\uff01\n\u305d\u3093\u306a\u3068\u304d\u3063\u3066\u3088\u304f\u3042\u308a\u307e\u3059\u3088\u306d\u3002\nRaspberyPi3\u304b\u3089\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d6\u30fc\u30c8\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f\u3088\u3046\u306a\u306e\u3067\u6311\u6226\u3057\u307e\u3057\u305f\n\n# \u516c\u5f0f\u306e\u53c2\u8003\u60c5\u5831\u3092\u898b\u306a\u304c\u3089\u9032\u3081\u3066\u3044\u304d\u307e\u3059\n\u82f1\u8a9e\u3092\u8aad\u3081\u308b\u65b9\u306f\u672c\u5bb6\u306e\u624b\u9806\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nNETWORK BOOTING\nhttps://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md\nNETWORK BOOT YOUR RASPBERRY PI\nhttps://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net_tutorial.md\n\n\n# \u3084\u3063\u3066\u307f\u305f\n## Server\u5074\u306e\u8a2d\u5b9a\n\n- RaspberyPI3\u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\n- SD\u30ab\u30fc\u30c9\u306b\u3044\u3064\u3082\u306eRaspbian\u3092\u7528\u610f\u3059\u308b\n    - \u3044\u3064\u3082\u306eNOOBS\u3092\u3044\u3064\u3082\u306e\u624b\u9806\u3067\u6e96\u5099\u3057\u307e\u3057\u3087\u3046\n- OS\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u639b\u3051\u307e\u3059\n\n```\n# If on raspbian lite you need to install rpi-update before you can use it:\n$ sudo apt-get update; sudo apt-get install rpi-update\n$ sudo BRANCH=next rpi-update\n```\n- SD\u30ab\u30fc\u30c9\u306e\u5bb9\u91cf\u3044\u3063\u3071\u3044\u307e\u3067filesystem\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3046\u3002\n\u7d42\u308f\u3063\u305f\u3089\u518d\u8d77\u52d5\u3067\u3059\n\n```\n$ sudo raspi-config\n$ sudo reboot\n```\n\n-etho\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306b\u632f\u308a\u76f4\u3057\u307e\u3059\u3002\n\n```\n$ sudo vi /etc/network/interfaces\n```\n```\nauto eth0\niface eth0 inet static \n        address 10.42.0.2\n        netmask 255.255.255.0\n        gateway 10.42.0.1\n```\n\n- NFS\u30b5\u30fc\u30d0\u3092\u5efa\u3066\u307e\u3059\n\n```\n$ sudo mkdir -p /nfs/client1\n$ sudo apt-get install rsync\n$ sudo rsync -xa --progress --exclude /nfs / /nfs/client1\n$ cd /nfs/client1\n$ sudo mount --bind /dev dev\n$ sudo mount --bind /sys sys\n$ sudo mount --bind /proc proc\n$ sudo chroot .\n$ rm /etc/ssh/ssh_host_*\n$ dpkg-reconfigure openssh-server\n$ exit\n$ sudo umount dev\n$ sudo umount sys\n$ sudo umount proc\n```\n\n- dnsmasq\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\n\n```\nsudo apt-get update\nsudo apt-get install dnsmasq tcpdump\nsudo rm /etc/resolvconf/update.d/dnsmasq\nsudo reboot\nsudo echo | sudo tee /etc/dnsmasq.conf\nsudo nano /etc/dnsmasq.conf\n```\n- dnsmasq.conf\u306e\u4f5c\u6210\n\n```\nport=0\ndhcp-range=10.42.0.255,proxy\nlog-dhcp\nenable-tftp\ntftp-root=/tftpboot\npxe-service=0,\"Raspberry Pi Boot\"\n```\n\n- /tftpboot \u3092\u4f5c\u308a\u307e\u3059\n\n```\nsudo mkdir /tftpboot\nsudo chmod 777 /tftpboot\nsudo systemctl enable dnsmasq.service\nsudo systemctl restart dnsmasq.service\ncp -r /boot/* /tftpboot\nsudo systemctl restart dnsmasq\n```\n\n- NFS Root\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n```\nsudo apt-get install nfs-kernel-server\necho \"/nfs/client1 *(rw,sync,no_subtree_check,no_root_squash)\" | sudo tee -a /etc/exports\nsudo systemctl enable rpcbind\nsudo systemctl restart rpcbind\nsudo systemctl enable nfs-kernel-server\nsudo systemctl restart nfs-kernel-server\n\n```\n\n- /tftpboot/cmdline.txt\u306e\u4f5c\u6210\n\n```\nroot=/dev/nfs nfsroot=10.42.0.2:/nfs/client1 rw ip=dhcp rootwait elevator=deadline\n```\n\n- Server\u5074\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0a\u3067\u3059\u3002\n\n## Client\u5074\u306e\u8a2d\u5b9a\n\n- RaspberyPI3\u3092\u7528\u610f\u3057\u307e\u3057\u3087\u3046\n- SD\u30ab\u30fc\u30c9\u306b\u3044\u3064\u3082\u306eRaspbian\u3092\u7528\u610f\u3059\u308b\n    - \u3044\u3064\u3082\u306eNOOBS\u3092\u3044\u3064\u3082\u306e\u624b\u9806\u3067\u6e96\u5099\u3057\u307e\u3057\u3087\u3046\n- OS\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u639b\u3051\u307e\u3059\n\n```\n# If on raspbian lite you need to install rpi-update before you can use it:\n$ sudo apt-get update; sudo apt-get install rpi-update\n$ sudo BRANCH=next rpi-update\n```\n- USB boot\u30e2\u30fc\u30c9\u3092\u6709\u52b9\u306b\u3057\u307e\u3059\n\n```\necho program_usb_boot_mode=1 | sudo tee -a /boot/config.txt\n```\n- USB\u30d6\u30fc\u30c8\u30e2\u30fc\u30c9\u3092ON\u306b\u3057\u307e\u3059\u3002\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30d6\u30fc\u30c8\u3067\u3059\u304c\u3001USB\u30d6\u30fc\u30c8\u30e2\u30fc\u30c9\u3092ON\u306b\u3057\u307e\u3059\u3002\n\n```\n$ echo program_usb_boot_mode=1 | sudo tee -a /boot/config.txt\n```\n\n- vcgencmd\u306e\u7d50\u679c\u304c\u4ee5\u4e0b\u306e\u901a\u308a\u306a\u3089OK\n\n```\n$ vcgencmd otp_dump | grep 17:\n17:3020000a\n```\n\n- \u96fb\u6e90\u3092\u505c\u6b62\u3055\u305b\u307e\u3059\u3002\n\n```\n$ sudo poweroff\n```\n\n- \u96fb\u6e90\u304c\u3061\u3083\u3093\u3068\u6b62\u307e\u3063\u3066\u304b\u3089\u96fb\u6e90\u3068SD\u30ab\u30fc\u30c9\u3092\u629c\u304d\u307e\u3059\u3002\n- \u518d\u3073\u96fb\u6e90\u3092\u633f\u3059\u3068Network boot\u304c\u59cb\u307e\u308a\u307e\u3059\u3002\n\n# Network Boot\u3067\u8d77\u52d5\u3057\u305f\u306f\u3044\u3044\u304c\u2026\n\nSSH Server\u304c\u3069\u3046\u3057\u3066\u3082\u8d77\u52d5\u305b\u305a\u3002\n\u3055\u3066\u56f0\u3063\u305f\u30fb\u30fb\u30fb\u3002\n", "tags": ["RaspberryPi", "pxe", "pxeboot", "Raspberrypi3", "raspbian"]}