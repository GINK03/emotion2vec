{"context": " More than 1 year has passed since last update.ECDSA\u306a\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3059\u308b\u306e\u3063\u3066\u3069\u3046\u3084\u308b\u3093\u3060\u308d\u3046\uff1f\u3068\u601d\u3063\u3066\u8abf\u3079\u305f\u3002\n\u9375\u306e\u4f5c\u6210\u3001\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u66f8\u306e\u767a\u884c\u30b3\u30de\u30f3\u30c9\u306f http://qiita.com/Hexa/items/c677871bfc0a682d0de1 \u3067\u4e01\u5be7\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u305f\u3002\n\u3053\u308c\u3092\u30ef\u30f3\u30e9\u30a4\u30ca\u3067\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3060\u308d\u3046\u3068\u8abf\u3079\u3066\u3044\u305f\u3068\u3053\u308d\u3001 -newkey ec:<(openssl ecparam -name prime256v1) \u307f\u305f\u3044\u306a\u66f8\u304d\u65b9\u304c\u51fa\u6765\u308b\u307f\u305f\u3044\u3060\u3063\u305f\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\nCOMMON_NAME=localhost\nopenssl req \\\n        -newkey ec:<(openssl ecparam -name prime256v1) \\\n        -sha256 \\\n        -keyout $COMMON_NAME.key \\\n        -nodes \\\n        -x509 \\\n        -out $COMMON_NAME.crt \\\n        -days 365 \\\n        -subj \"/C=JP/ST=/L=/O=/OU=/CN=$COMMON_NAME\"\n\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u79d8\u5bc6\u9375\u3068\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u306e\u30bb\u30c3\u30c8\u304c\u751f\u307e\u308c\u308b\u3002\n$ openssl req \\\n>         -newkey ec:<(openssl ecparam -name prime256v1) \\\n>         -sha256 \\\n>         -keyout $COMMON_NAME.key \\\n>         -nodes \\\n>         -x509 \\\n>         -out $COMMON_NAME.crt \\\n>         -days 365 \\\n>         -subj \"/C=JP/ST=/L=/O=/OU=/CN=$COMMON_NAME\"\nGenerating a 256 bit EC private key\nwriting new private key to 'localhost.key'\n-----\nNo value provided for Subject Attribute ST, skipped\nNo value provided for Subject Attribute L, skipped\nNo value provided for Subject Attribute O, skipped\nNo value provided for Subject Attribute OU, skipped\n\n\u9375\u3068\u8a3c\u660e\u66f8\u306e\u4e2d\u8eab\u306f\u3053\u3093\u306a\u611f\u3058\u3002\nSignature Algorithm \u304c ecdsa-with-SHA256 \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n$ openssl ec -in localhost.key -noout -text\nread EC key\nPrivate-Key: (256 bit)\npriv:\n    00:aa:9b:c8:1b:9e:91:a0:78:17:54:c2:db:9d:62:\n    af:98:e5:a2:33:fe:ac:e6:d4:3b:8e:bc:d0:aa:a4:\n    34:47:6e\npub:\n    04:3f:d8:71:a3:ec:7e:b6:68:14:50:a7:07:3e:2e:\n    34:9b:8d:f1:59:39:f0:4d:ea:f0:40:3b:be:3b:0d:\n    5b:21:51:7b:9a:ec:a9:56:03:25:73:26:69:89:a1:\n    4b:91:ce:ce:7a:ef:b6:23:1b:e4:1b:fa:ae:cc:2a:\n    46:76:aa:8d:54\nASN1 OID: prime256v1\nNIST CURVE: P-256\n\n$ openssl x509 -in localhost.crt -noout -text\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 17279496450991085047 (0xefcd1a78b2f255f7)\n    Signature Algorithm: ecdsa-with-SHA256\n        Issuer: C=JP, CN=localhost\n        Validity\n            Not Before: Jul 25 12:31:41 2015 GMT\n            Not After : Jul 24 12:31:41 2016 GMT\n        Subject: C=JP, CN=localhost\n        Subject Public Key Info:\n            Public Key Algorithm: id-ecPublicKey\n                Public-Key: (256 bit)\n                pub:\n                    04:3f:d8:71:a3:ec:7e:b6:68:14:50:a7:07:3e:2e:\n                    34:9b:8d:f1:59:39:f0:4d:ea:f0:40:3b:be:3b:0d:\n                    5b:21:51:7b:9a:ec:a9:56:03:25:73:26:69:89:a1:\n                    4b:91:ce:ce:7a:ef:b6:23:1b:e4:1b:fa:ae:cc:2a:\n                    46:76:aa:8d:54\n                ASN1 OID: prime256v1\n                NIST CURVE: P-256\n        X509v3 extensions:\n            X509v3 Subject Key Identifier:\n                26:59:9F:B4:7B:89:BA:67:10:1E:F2:A1:9C:3F:88:36:19:85:F0:50\n            X509v3 Authority Key Identifier:\n                keyid:26:59:9F:B4:7B:89:BA:67:10:1E:F2:A1:9C:3F:88:36:19:85:F0:50\n\n            X509v3 Basic Constraints:\n                CA:TRUE\n    Signature Algorithm: ecdsa-with-SHA256\n         30:46:02:21:00:c4:7e:e9:10:5f:ef:59:b3:23:e1:4e:15:16:\n         66:b7:13:65:8d:ed:7e:81:88:93:a8:1c:22:bf:87:0d:31:21:\n         19:02:21:00:83:b0:c0:0f:c5:26:90:bd:9d:7d:31:3c:4f:09:\n         a9:61:da:f2:eb:2b:7d:dc:31:23:26:95:dd:3d:b0:ec:70:42\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u306e\u8868\u793a\u78ba\u8a8d\n\u3053\u3093\u306a\u611f\u3058\u306e nginx.conf \u3092\u7528\u610f\u3057\u3001 nginx -c /path/to/nginx.conf \u3067\u8d77\u52d5\u3059\u308b\u3002\nworker_processes 1;\ndaemon off;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    access_log /dev/stdout;\n    error_log  /dev/stderr debug;\n\n    server {\n       listen 4443;\n\n       ssl                       on;\n       ssl_certificate           localhost.crt;\n       ssl_certificate_key       localhost.key;\n\n       ssl_protocols             TLSv1 TLSv1.1 TLSv1.2;\n       ssl_ciphers               HIGH:!aNULL:!MD5;\n       ssl_prefer_server_ciphers on;\n    }\n}\n\nhttps://localhost:4443 \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\uff08\u3082\u3061\u308d\u3093 Trusted \u3067\u306f\u7121\u3044\u306e\u3067\u30d0\u30c4\u30de\u30fc\u30af\u306f\u51fa\u308b\u3051\u3069\u3001\uff09ECDSA\u306b\u3088\u308b\u8a3c\u660e\u66f8\u3067\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\n\u4ee5\u4e0a\u3001\u7c21\u5358\u306a\u304a\u8a66\u3057\u3067\u3057\u305f\u3002\n\nECDSA\u306a\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3059\u308b\u306e\u3063\u3066\u3069\u3046\u3084\u308b\u3093\u3060\u308d\u3046\uff1f\u3068\u601d\u3063\u3066\u8abf\u3079\u305f\u3002\n\u9375\u306e\u4f5c\u6210\u3001\u81ea\u5df1\u7f72\u540d\u8a3c\u660e\u66f8\u306e\u767a\u884c\u30b3\u30de\u30f3\u30c9\u306f http://qiita.com/Hexa/items/c677871bfc0a682d0de1 \u3067\u4e01\u5be7\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u305f\u3002\n\n\u3053\u308c\u3092\u30ef\u30f3\u30e9\u30a4\u30ca\u3067\u5b9f\u73fe\u3059\u308b\u305f\u3081\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3060\u308d\u3046\u3068\u8abf\u3079\u3066\u3044\u305f\u3068\u3053\u308d\u3001 [`-newkey ec:<(openssl ecparam -name prime256v1)` \u307f\u305f\u3044\u306a\u66f8\u304d\u65b9\u304c\u51fa\u6765\u308b](http://security.stackexchange.com/a/93712)\u307f\u305f\u3044\u3060\u3063\u305f\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\n\n```sh\nCOMMON_NAME=localhost\nopenssl req \\\n        -newkey ec:<(openssl ecparam -name prime256v1) \\\n        -sha256 \\\n        -keyout $COMMON_NAME.key \\\n        -nodes \\\n        -x509 \\\n        -out $COMMON_NAME.crt \\\n        -days 365 \\\n        -subj \"/C=JP/ST=/L=/O=/OU=/CN=$COMMON_NAME\"\n```\n\n\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u79d8\u5bc6\u9375\u3068\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u306e\u30bb\u30c3\u30c8\u304c\u751f\u307e\u308c\u308b\u3002\n\n\n```console\n$ openssl req \\\n>         -newkey ec:<(openssl ecparam -name prime256v1) \\\n>         -sha256 \\\n>         -keyout $COMMON_NAME.key \\\n>         -nodes \\\n>         -x509 \\\n>         -out $COMMON_NAME.crt \\\n>         -days 365 \\\n>         -subj \"/C=JP/ST=/L=/O=/OU=/CN=$COMMON_NAME\"\nGenerating a 256 bit EC private key\nwriting new private key to 'localhost.key'\n-----\nNo value provided for Subject Attribute ST, skipped\nNo value provided for Subject Attribute L, skipped\nNo value provided for Subject Attribute O, skipped\nNo value provided for Subject Attribute OU, skipped\n```\n\n\u9375\u3068\u8a3c\u660e\u66f8\u306e\u4e2d\u8eab\u306f\u3053\u3093\u306a\u611f\u3058\u3002\nSignature Algorithm \u304c `ecdsa-with-SHA256` \u306b\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\n```console\n$ openssl ec -in localhost.key -noout -text\nread EC key\nPrivate-Key: (256 bit)\npriv:\n    00:aa:9b:c8:1b:9e:91:a0:78:17:54:c2:db:9d:62:\n    af:98:e5:a2:33:fe:ac:e6:d4:3b:8e:bc:d0:aa:a4:\n    34:47:6e\npub:\n    04:3f:d8:71:a3:ec:7e:b6:68:14:50:a7:07:3e:2e:\n    34:9b:8d:f1:59:39:f0:4d:ea:f0:40:3b:be:3b:0d:\n    5b:21:51:7b:9a:ec:a9:56:03:25:73:26:69:89:a1:\n    4b:91:ce:ce:7a:ef:b6:23:1b:e4:1b:fa:ae:cc:2a:\n    46:76:aa:8d:54\nASN1 OID: prime256v1\nNIST CURVE: P-256\n\n$ openssl x509 -in localhost.crt -noout -text\nCertificate:\n    Data:\n        Version: 3 (0x2)\n        Serial Number: 17279496450991085047 (0xefcd1a78b2f255f7)\n    Signature Algorithm: ecdsa-with-SHA256\n        Issuer: C=JP, CN=localhost\n        Validity\n            Not Before: Jul 25 12:31:41 2015 GMT\n            Not After : Jul 24 12:31:41 2016 GMT\n        Subject: C=JP, CN=localhost\n        Subject Public Key Info:\n            Public Key Algorithm: id-ecPublicKey\n                Public-Key: (256 bit)\n                pub:\n                    04:3f:d8:71:a3:ec:7e:b6:68:14:50:a7:07:3e:2e:\n                    34:9b:8d:f1:59:39:f0:4d:ea:f0:40:3b:be:3b:0d:\n                    5b:21:51:7b:9a:ec:a9:56:03:25:73:26:69:89:a1:\n                    4b:91:ce:ce:7a:ef:b6:23:1b:e4:1b:fa:ae:cc:2a:\n                    46:76:aa:8d:54\n                ASN1 OID: prime256v1\n                NIST CURVE: P-256\n        X509v3 extensions:\n            X509v3 Subject Key Identifier:\n                26:59:9F:B4:7B:89:BA:67:10:1E:F2:A1:9C:3F:88:36:19:85:F0:50\n            X509v3 Authority Key Identifier:\n                keyid:26:59:9F:B4:7B:89:BA:67:10:1E:F2:A1:9C:3F:88:36:19:85:F0:50\n\n            X509v3 Basic Constraints:\n                CA:TRUE\n    Signature Algorithm: ecdsa-with-SHA256\n         30:46:02:21:00:c4:7e:e9:10:5f:ef:59:b3:23:e1:4e:15:16:\n         66:b7:13:65:8d:ed:7e:81:88:93:a8:1c:22:bf:87:0d:31:21:\n         19:02:21:00:83:b0:c0:0f:c5:26:90:bd:9d:7d:31:3c:4f:09:\n         a9:61:da:f2:eb:2b:7d:dc:31:23:26:95:dd:3d:b0:ec:70:42\n```\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u306e\u8868\u793a\u78ba\u8a8d\n---\n\n\u3053\u3093\u306a\u611f\u3058\u306e `nginx.conf` \u3092\u7528\u610f\u3057\u3001 `nginx -c /path/to/nginx.conf` \u3067\u8d77\u52d5\u3059\u308b\u3002\n\n\n```nginx\nworker_processes 1;\ndaemon off;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    access_log /dev/stdout;\n    error_log  /dev/stderr debug;\n\n    server {\n       listen 4443;\n\n       ssl                       on;\n       ssl_certificate           localhost.crt;\n       ssl_certificate_key       localhost.key;\n\n       ssl_protocols             TLSv1 TLSv1.1 TLSv1.2;\n       ssl_ciphers               HIGH:!aNULL:!MD5;\n       ssl_prefer_server_ciphers on;\n    }\n}\n```\n\n`https://localhost:4443` \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\uff08\u3082\u3061\u308d\u3093 Trusted \u3067\u306f\u7121\u3044\u306e\u3067\u30d0\u30c4\u30de\u30fc\u30af\u306f\u51fa\u308b\u3051\u3069\u3001\uff09ECDSA\u306b\u3088\u308b\u8a3c\u660e\u66f8\u3067\u3042\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\n\n![Kobito.ABETEW.png](https://qiita-image-store.s3.amazonaws.com/0/3986/373d3074-41b4-3ed4-bd66-5b7748e433af.png \"Kobito.ABETEW.png\")\n\n\u4ee5\u4e0a\u3001\u7c21\u5358\u306a\u304a\u8a66\u3057\u3067\u3057\u305f\u3002\n", "tags": ["openssl"]}