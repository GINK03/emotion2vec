{"context": " More than 1 year has passed since last update.\u4e00\u77ac\u3073\u3073\u3063\u3066\u3057\u307e\u3063\u305f\u304c\u3001\u934b\u8c37\u3055\u3093\u306e\u4ef0\u308b\u901a\u308a\u78ba\u304b\u306b\u697d\u3067\u3057\u305f\u3002\n(backports gem\u304c\u5fc5\u8981\u3067\u3059\u304c)Ruby 1.8\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\u305d\u308c\u306a\u308a\u306bDRY\u306b\u3057\u305f\u3064\u3082\u308a\u3002\n\nhena25.rb\n#!/usr/bin/env ruby\n#http://qiita.com/Nabetani/items/636fce060e1ebbc95f9b\n#http://nabetani.sakura.ne.jp/hena/ord25rotcell/\nif RUBY_VERSION<'1.9'\n    require 'rubygems'\n    require 'backports' # (Math.cbrt\u3068\u7570\u306a\u308a)1.8\u306eArray#rotate\u306fbackports\u306b\u5b58\u5728\u3059\u308b\u306e\u3067\u3001\u3042\u308a\u304c\u305f\u304f\u4f7f\u308f\u305b\u3066\u9802\u304d\u307e\u3059\nend\nif $0==__FILE__\n    STDOUT.sync=true\n    while gets\n        str=''\n        area=[*'a'..'y'].each_slice(5).to_a\n        $_.chomp.split(',').each{|s|\n            x,y=2.times.map{|i|[*0...area[0].size].product([*0...area.size]).find{|x,y|area[y][x]==s[i,1]}}.transpose\n            minx,maxx=x.minmax.zip([-1,1]).map{|e|e.reduce(:+)}\n            miny,maxy=y.minmax.zip([-1,1]).map{|e|e.reduce(:+)}\n            x=minx\n            y=miny\n            rotaters=[]\n            rotaters<<[x+=1,y] while x<maxx\n            rotaters<<[x,y+=1] while y<maxy\n            rotaters<<[x-=1,y] while x>minx\n            rotaters<<[x,y-=1] while y>miny\n            rotaters=rotaters.select{|x,y|0<=y&&y<area.size && 0<=x&&x<area[y].size}\n            str=rotaters.map{|x,y|area[y][x]}.rotate(-1)\n            rotaters.each_with_index{|(x,y),i|area[y][x]=str[i]}\n        }\n        puts str.empty? ? :none : str.sort*''\n    end\nend\n\n\n\u4e00\u77ac\u3073\u3073\u3063\u3066\u3057\u307e\u3063\u305f\u304c\u3001\u934b\u8c37\u3055\u3093\u306e\u4ef0\u308b\u901a\u308a\u78ba\u304b\u306b\u697d\u3067\u3057\u305f\u3002\n(backports gem\u304c\u5fc5\u8981\u3067\u3059\u304c)Ruby 1.8\u3067\u3082\u52d5\u4f5c\u3057\u307e\u3059\u3002\n\n\u305d\u308c\u306a\u308a\u306bDRY\u306b\u3057\u305f\u3064\u3082\u308a\u3002\n\n```rb:hena25.rb\n#!/usr/bin/env ruby\n#http://qiita.com/Nabetani/items/636fce060e1ebbc95f9b\n#http://nabetani.sakura.ne.jp/hena/ord25rotcell/\nif RUBY_VERSION<'1.9'\n\trequire 'rubygems'\n\trequire 'backports' # (Math.cbrt\u3068\u7570\u306a\u308a)1.8\u306eArray#rotate\u306fbackports\u306b\u5b58\u5728\u3059\u308b\u306e\u3067\u3001\u3042\u308a\u304c\u305f\u304f\u4f7f\u308f\u305b\u3066\u9802\u304d\u307e\u3059\nend\nif $0==__FILE__\n\tSTDOUT.sync=true\n\twhile gets\n\t\tstr=''\n\t\tarea=[*'a'..'y'].each_slice(5).to_a\n\t\t$_.chomp.split(',').each{|s|\n\t\t\tx,y=2.times.map{|i|[*0...area[0].size].product([*0...area.size]).find{|x,y|area[y][x]==s[i,1]}}.transpose\n\t\t\tminx,maxx=x.minmax.zip([-1,1]).map{|e|e.reduce(:+)}\n\t\t\tminy,maxy=y.minmax.zip([-1,1]).map{|e|e.reduce(:+)}\n\t\t\tx=minx\n\t\t\ty=miny\n\t\t\trotaters=[]\n\t\t\trotaters<<[x+=1,y] while x<maxx\n\t\t\trotaters<<[x,y+=1] while y<maxy\n\t\t\trotaters<<[x-=1,y] while x>minx\n\t\t\trotaters<<[x,y-=1] while y>miny\n\t\t\trotaters=rotaters.select{|x,y|0<=y&&y<area.size && 0<=x&&x<area[y].size}\n\t\t\tstr=rotaters.map{|x,y|area[y][x]}.rotate(-1)\n\t\t\trotaters.each_with_index{|(x,y),i|area[y][x]=str[i]}\n\t\t}\n\t\tputs str.empty? ? :none : str.sort*''\n\tend\nend\n```\n", "tags": ["Ruby", "\u3069\u3046\u66f8\u304f", "yhpg"]}