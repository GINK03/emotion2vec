{"context": " More than 1 year has passed since last update.NotAction\u3067\u9664\u5916\u3057\u305f\u3082\u306e\u3092\u90e8\u5206\u7684\u306bAllow\u306b\u3057\u3066\u3001\u305d\u306eAPI\u304c\u5229\u7528\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u306f\u3063\u304d\u308a\u5206\u304b\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nNotAction \u3060\u3051\u306e\u5834\u5408\n\u203b\u4ee5\u4e0b\u306e\u3088\u3046\u306bNotAction\u3092\u66f8\u304f\u3068\u3001IAM\u4ee5\u5916\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306e\u3067\u6ce8\u610f\u3002\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1421508859000\",\n      \"Effect\": \"Allow\",\n      \"NotAction\": [\n        \"iam:*\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    }\n  ]\n}\n\n$ aws iam list-users\n\n\u51fa\u529b\u7d50\u679c\nA client error (AccessDenied) occurred when calling the ListUsers operation: User: arn:aws:iam::xxxxxxxxxxxx:user/test-user is not authorized to perform: iam:ListUsers on resource: arn:aws:iam::xxxxxxxxxxxx:user/\n\nIAM\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306f\u3082\u3061\u308d\u3093\u3067\u304d\u307e\u305b\u3093\u3002\n\u6a29\u9650\u304c\u306a\u3044\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\n\nNotAction + Allow\u3067\u90e8\u5206\u7684\u306b\u8a31\u53ef\nIAM\u306b\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1421508701000\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListUsers\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1421508859000\",\n      \"Effect\": \"Allow\",\n      \"NotAction\": [\n        \"iam:*\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    }\n  ]\n}\n\n$ aws iam list-users\n\n\u51fa\u529b\u7d50\u679c\n{\n    \"Users\": [\n        {\n            \"UserName\": \"simeji\",\n            \"PasswordLastUsed\": \"2015-01-17T15:08:07Z\",\n            \"CreateDate\": \"2014-12-20T12:24:28Z\",\n            \"UserId\": \"AIDAXXXXXXXXXXXXXXXXXA\",\n            \"Path\": \"/\",\n            \"Arn\": \"arn:aws:iam::xxxxxxxxxx:user/simeji\"\n        },\n        {\n            \"UserName\": \"test-user\",\n            \"Path\": \"/\",\n            \"CreateDate\": \"2015-01-17T15:25:29Z\",\n            \"UserId\": \"AIDAXXXXXXXXXXXXXXXXU\",\n            \"Arn\": \"arn:aws:iam::xxxxxxxxxx:user/test-user\"\n        }\n    ]\n}\n\n\u7d50\u679c\u304c\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u3002\nNotAction\u306b\u3088\u3063\u3066\u9664\u5916\u3055\u308c\u305f\u7269\u3082\u660e\u793a\u7684\u306bAllow\u3057\u3066\u3084\u308c\u3070\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\nNotAction => Deny \u306b\u5909\u66f4 + Allow\u3067\u90e8\u5206\u7684\u306b\u8a31\u53ef\n\u5ff5\u306e\u305f\u3081Deny\u306b\u5909\u3048\u305f\u5834\u5408\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1421508701000\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListUsers\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1421508859000\",\n      \"Effect\": \"Deny\",\n      \"Action\": [\n        \"iam:*\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    }\n  ]\n}\n\n\n$ aws iam list-users\n\n\u51fa\u529b\u7d50\u679c\nA client error (AccessDenied) occurred when calling the ListUsers operation: User: arn:aws:iam::xxxxxxxxxxxx:user/test-user is not authorized to perform: iam:ListUsers on resource: arn:aws:iam::xxxxxxxxxxxx:user/\n\n\u6a29\u9650\u304c\u306a\u3044\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\n\nNotAction\u3067\u9664\u5916\u3057\u305f\u3082\u306e\u3092\u90e8\u5206\u7684\u306bAllow\u306b\u3057\u3066\u3001\u305d\u306eAPI\u304c\u5229\u7528\u3067\u304d\u308b\u304b\u3069\u3046\u304b\u306f\u3063\u304d\u308a\u5206\u304b\u3063\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u3067\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n## NotAction \u3060\u3051\u306e\u5834\u5408\n\n\u203b\u4ee5\u4e0b\u306e\u3088\u3046\u306bNotAction\u3092\u66f8\u304f\u3068\u3001IAM\u4ee5\u5916\u306b\u306f\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306e\u3067\u6ce8\u610f\u3002\n\n```IAM-Policy\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1421508859000\",\n      \"Effect\": \"Allow\",\n      \"NotAction\": [\n        \"iam:*\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    }\n  ]\n}\n```\n\n```command\n$ aws iam list-users\n```\n\u51fa\u529b\u7d50\u679c\n\n```\nA client error (AccessDenied) occurred when calling the ListUsers operation: User: arn:aws:iam::xxxxxxxxxxxx:user/test-user is not authorized to perform: iam:ListUsers on resource: arn:aws:iam::xxxxxxxxxxxx:user/\n```\n\nIAM\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306f\u3082\u3061\u308d\u3093\u3067\u304d\u307e\u305b\u3093\u3002\n\u6a29\u9650\u304c\u306a\u3044\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\n\n\n## NotAction + Allow\u3067\u90e8\u5206\u7684\u306b\u8a31\u53ef\n\nIAM\u306b\n\n```IAM-Policy\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1421508701000\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListUsers\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1421508859000\",\n      \"Effect\": \"Allow\",\n      \"NotAction\": [\n        \"iam:*\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    }\n  ]\n}\n```\n\n```command\n$ aws iam list-users\n```\n\n\u51fa\u529b\u7d50\u679c\n\n```\n{\n    \"Users\": [\n        {\n            \"UserName\": \"simeji\",\n            \"PasswordLastUsed\": \"2015-01-17T15:08:07Z\",\n            \"CreateDate\": \"2014-12-20T12:24:28Z\",\n            \"UserId\": \"AIDAXXXXXXXXXXXXXXXXXA\",\n            \"Path\": \"/\",\n            \"Arn\": \"arn:aws:iam::xxxxxxxxxx:user/simeji\"\n        },\n        {\n            \"UserName\": \"test-user\",\n            \"Path\": \"/\",\n            \"CreateDate\": \"2015-01-17T15:25:29Z\",\n            \"UserId\": \"AIDAXXXXXXXXXXXXXXXXU\",\n            \"Arn\": \"arn:aws:iam::xxxxxxxxxx:user/test-user\"\n        }\n    ]\n}\n```\n\n\u7d50\u679c\u304c\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u3002\nNotAction\u306b\u3088\u3063\u3066\u9664\u5916\u3055\u308c\u305f\u7269\u3082\u660e\u793a\u7684\u306bAllow\u3057\u3066\u3084\u308c\u3070\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\n\n\n##  NotAction => Deny \u306b\u5909\u66f4 + Allow\u3067\u90e8\u5206\u7684\u306b\u8a31\u53ef\n\n\u5ff5\u306e\u305f\u3081Deny\u306b\u5909\u3048\u305f\u5834\u5408\u3082\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```IAM-Policy\n{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Stmt1421508701000\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"iam:ListUsers\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    },\n    {\n      \"Sid\": \"Stmt1421508859000\",\n      \"Effect\": \"Deny\",\n      \"Action\": [\n        \"iam:*\"\n      ],\n      \"Resource\": [\n        \"*\"\n      ]\n    }\n  ]\n}\n\n```\n\n```command\n$ aws iam list-users\n```\n\u51fa\u529b\u7d50\u679c\n\n```\nA client error (AccessDenied) occurred when calling the ListUsers operation: User: arn:aws:iam::xxxxxxxxxxxx:user/test-user is not authorized to perform: iam:ListUsers on resource: arn:aws:iam::xxxxxxxxxxxx:user/\n```\n\n\u6a29\u9650\u304c\u306a\u3044\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\n", "tags": ["IAM", "AWS"]}