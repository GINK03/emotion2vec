{"context": "\n\n\u306f\u3058\u3081\u306b\nvalidate \u30d1\u30c3\u30b1\u30fc\u30b8 \u3092\u4f7f\u3046\u3068\u3001\u30c7\u30fc\u30bf\u691c\u8a3c\u4f5c\u696d\u306e\u52b9\u7387\u3092\u5411\u4e0a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001\u6307\u5b9a\u3057\u305f\u30eb\u30fc\u30eb\u306b\u5f93\u3063\u3066\u3001\u30eb\u30fc\u30eb\u306b\u5408\u683c\u3057\u305f\u304b\u3001\u8a55\u4fa1\u306b\u5931\u6557\u3057\u305f\u304b\u3001\u306a\u3069\u3092\u691c\u8a3c\u3067\u304d\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u306e\u69cb\u9020\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n\u25bc\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n\nR\n# \u74b0\u5883\u60c5\u5831\n# R version 3.2.5 (2016-04-14)  -- Very, Very Secure Dishes \n# \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ninstall.packages( \"magrittr\" )\ninstall.packages( \"validate\" )\ninstall.packages( \"yaml\" )\n\n# \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nlibrary( magrittr )\nlibrary( validate )\nlibrary( yaml )\n\n# \u30c7\u30fc\u30bf\u306e\u69cb\u9020\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\niris %>% check_that(\n  Sepal.Width > 0.5 * Sepal.Length                          # V1\n  , mean( Sepal.Width ) > 0                                 # V2\n  , sd( Sepal.Width ) < 0                                   # V3\n  , if ( Sepal.Width > 0.5*Sepal.Length ) Sepal.Length > 10 # V4\n) %>% summary()\n\n\n\u4e0a\u8a18\u306e\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001summary() \u306b\u3088\u3063\u3066\u3001check_that()\u306e\u5b9f\u884c\u7d50\u679c\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001\u30eb\u30fc\u30eb\u540d\u300cV2\u300d\u3067\u306f\u3001Sepal.Width\u5217\u5168\u4f53\u306e\u5e73\u5747\u5024\u304c0\u3088\u308a\u3044\u5927\u304d\u3044\u3053\u3068\u3092\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002passes = \"1\"\uff0cfails = \"0\" \u3067\u3042\u308b\u3053\u3068\u304b\u3089\u3001\u30eb\u30fc\u30eb\u306b\u5408\u683c\u3057\u3066\u3044\u308b\u4e8b\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\u25bc\u5b9f\u884c\u7d50\u679c\u4f8b\n\n\u5b9f\u884c\u7d50\u679c\u4f8b\n# check_that\u306e\u5b9f\u884c\u7d50\u679c\n  rule items passes fails nNA error warning                                              expression\n1   V1   150     66    84   0 FALSE   FALSE                        Sepal.Width > 0.5 * Sepal.Length\n2   V2     1      1     0   0 FALSE   FALSE                                   mean(Sepal.Width) > 0\n3   V3     1      0     1   0 FALSE   FALSE                                     sd(Sepal.Width) < 0\n4   V4   150     84    66   0 FALSE   FALSE !(Sepal.Width > 0.5 * Sepal.Length) | Sepal.Length > 10\n\n\n\n\u30c7\u30fc\u30bf\u691c\u8a3c\u30eb\u30fc\u30eb\u306e\u5b9a\u7fa9\nvalidator()\u306f\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3059\u308b\u30c7\u30fc\u30bf\u691c\u8a3c\u30eb\u30fc\u30eb\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u30d0\u30ea\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u547c\u3070\u308c\u3001\u30c7\u30fc\u30bf\u691c\u8a3c\u30eb\u30fc\u30eb\u3068\u3057\u3066\u518d\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u25bc\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n\nR\nv <-  validator(\n  ratio = Sepal.Width > 0.5 * Sepal.Length\n  , mean = mean( Sepal.Width ) > 0\n  , sd = sd( Sepal.Width ) < 0\n  , cnd = if ( Sepal.Width > 0.5*Sepal.Length ) Sepal.Length > 10\n  )\n\n\n\u25bc\u5b9f\u884c\u7d50\u679c\u4f8b\n\n\u5b9f\u884c\u7d50\u679c\u4f8b\nv\n# v(\u30d0\u30ea\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u306e\u4e2d\u8eab\u306e\u78ba\u8a8d\nObject of class 'validator' with 4 elements:\n ratio: Sepal.Width > 0.5 * Sepal.Length\n mean : mean(Sepal.Width) > 0\n sd   : sd(Sepal.Width) < 0\n cnd  : !(Sepal.Width > 0.5 * Sepal.Length) | Sepal.Length > 10\n\n\n\u6b21\u306e\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001\u3053\u306e\u30d0\u30ea\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3063\u3066iris\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3092confront()\u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\n\u25bc\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n\nR\ncf <- confront(iris, v)\n\n\n\u25bc\u5b9f\u884c\u7d50\u679c\u4f8b\n\n\u5b9f\u884c\u7d50\u679c\u4f8b\ncf\n# cf(\u691c\u8a3c\u7d50\u679c)\u306e\u4e2d\u8eab\u306e\u78ba\u8a8d\nObject of class 'validation'\nCall:\n    confront(x = iris, dat = v)\n\nConfrontations: 4\nWith fails    : 3\nWarnings      : 0\nErrors        : 0\n# cf(\u691c\u8a3c\u7d50\u679c)\u3092\u68d2\u30b0\u30e9\u30d5\u306b\u3057\u3066\u53ef\u8996\u5316\u3057\u307e\u3059\u3002\nbarplot( cf, main=\"iris\" )\n\n\n\n\n\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\nhttps://cran.r-project.org/web/packages/validate/vignettes/intro.html\nhttps://cran.r-project.org/web/packages/validate/vignettes/rule-files.html\n# \u306f\u3058\u3081\u306b\nvalidate \u30d1\u30c3\u30b1\u30fc\u30b8 \u3092\u4f7f\u3046\u3068\u3001\u30c7\u30fc\u30bf\u691c\u8a3c\u4f5c\u696d\u306e\u52b9\u7387\u3092\u5411\u4e0a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001\u6307\u5b9a\u3057\u305f\u30eb\u30fc\u30eb\u306b\u5f93\u3063\u3066\u3001\u30eb\u30fc\u30eb\u306b\u5408\u683c\u3057\u305f\u304b\u3001\u8a55\u4fa1\u306b\u5931\u6557\u3057\u305f\u304b\u3001\u306a\u3069\u3092\u691c\u8a3c\u3067\u304d\u307e\u3059\u3002\n\n# \u30c7\u30fc\u30bf\u306e\u69cb\u9020\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n\n\u25bc\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n\n```R:R\n# \u74b0\u5883\u60c5\u5831\n# R version 3.2.5 (2016-04-14)  -- Very, Very Secure Dishes \n# \u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ninstall.packages( \"magrittr\" )\ninstall.packages( \"validate\" )\ninstall.packages( \"yaml\" )\n\n# \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\nlibrary( magrittr )\nlibrary( validate )\nlibrary( yaml )\n\n# \u30c7\u30fc\u30bf\u306e\u69cb\u9020\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\niris %>% check_that(\n  Sepal.Width > 0.5 * Sepal.Length                          # V1\n  , mean( Sepal.Width ) > 0                                 # V2\n  , sd( Sepal.Width ) < 0                                   # V3\n  , if ( Sepal.Width > 0.5*Sepal.Length ) Sepal.Length > 10 # V4\n) %>% summary()\n```\n\n\u4e0a\u8a18\u306e\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001summary() \u306b\u3088\u3063\u3066\u3001check_that()\u306e\u5b9f\u884c\u7d50\u679c\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u305f\u3068\u3048\u3070\u3001\u30eb\u30fc\u30eb\u540d\u300cV2\u300d\u3067\u306f\u3001Sepal.Width\u5217\u5168\u4f53\u306e\u5e73\u5747\u5024\u304c0\u3088\u308a\u3044\u5927\u304d\u3044\u3053\u3068\u3092\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002passes = \"1\"\uff0cfails = \"0\" \u3067\u3042\u308b\u3053\u3068\u304b\u3089\u3001\u30eb\u30fc\u30eb\u306b\u5408\u683c\u3057\u3066\u3044\u308b\u4e8b\u304c\u5206\u304b\u308a\u307e\u3059\u3002\n\n\u25bc\u5b9f\u884c\u7d50\u679c\u4f8b\n\n```R:\u5b9f\u884c\u7d50\u679c\u4f8b\n# check_that\u306e\u5b9f\u884c\u7d50\u679c\n  rule items passes fails nNA error warning                                              expression\n1   V1   150     66    84   0 FALSE   FALSE                        Sepal.Width > 0.5 * Sepal.Length\n2   V2     1      1     0   0 FALSE   FALSE                                   mean(Sepal.Width) > 0\n3   V3     1      0     1   0 FALSE   FALSE                                     sd(Sepal.Width) < 0\n4   V4   150     84    66   0 FALSE   FALSE !(Sepal.Width > 0.5 * Sepal.Length) | Sepal.Length > 10\n```\n\n\n# \u30c7\u30fc\u30bf\u691c\u8a3c\u30eb\u30fc\u30eb\u306e\u5b9a\u7fa9\nvalidator()\u306f\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u5bfe\u3059\u308b\u30c7\u30fc\u30bf\u691c\u8a3c\u30eb\u30fc\u30eb\u3092\u5b9a\u7fa9\u3067\u304d\u307e\u3059\u3002\u5b9a\u7fa9\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f\u3001\u30d0\u30ea\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u547c\u3070\u308c\u3001\u30c7\u30fc\u30bf\u691c\u8a3c\u30eb\u30fc\u30eb\u3068\u3057\u3066\u518d\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u25bc\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n\n```R:R\nv <-  validator(\n  ratio = Sepal.Width > 0.5 * Sepal.Length\n  , mean = mean( Sepal.Width ) > 0\n  , sd = sd( Sepal.Width ) < 0\n  , cnd = if ( Sepal.Width > 0.5*Sepal.Length ) Sepal.Length > 10\n  )\n```\n\n\u25bc\u5b9f\u884c\u7d50\u679c\u4f8b\n\n```R:\u5b9f\u884c\u7d50\u679c\u4f8b\nv\n# v(\u30d0\u30ea\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8)\u306e\u4e2d\u8eab\u306e\u78ba\u8a8d\nObject of class 'validator' with 4 elements:\n ratio: Sepal.Width > 0.5 * Sepal.Length\n mean : mean(Sepal.Width) > 0\n sd   : sd(Sepal.Width) < 0\n cnd  : !(Sepal.Width > 0.5 * Sepal.Length) | Sepal.Length > 10\n```\n\n\u6b21\u306e\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u306f\u3001\u3053\u306e\u30d0\u30ea\u30c7\u30fc\u30bf\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3063\u3066iris\u30c7\u30fc\u30bf\u30bb\u30c3\u30c8\u3092confront()\u3067\u691c\u8a3c\u3057\u3066\u3044\u307e\u3059\u3002\n\u25bc\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n\n```R:R\ncf <- confront(iris, v)\n```\n\n\u25bc\u5b9f\u884c\u7d50\u679c\u4f8b\n\n```R:\u5b9f\u884c\u7d50\u679c\u4f8b\ncf\n# cf(\u691c\u8a3c\u7d50\u679c)\u306e\u4e2d\u8eab\u306e\u78ba\u8a8d\nObject of class 'validation'\nCall:\n    confront(x = iris, dat = v)\n\nConfrontations: 4\nWith fails    : 3\nWarnings      : 0\nErrors        : 0\n# cf(\u691c\u8a3c\u7d50\u679c)\u3092\u68d2\u30b0\u30e9\u30d5\u306b\u3057\u3066\u53ef\u8996\u5316\u3057\u307e\u3059\u3002\nbarplot( cf, main=\"iris\" )\n```\n![image](https://qiita-image-store.s3.amazonaws.com/0/106773/1932a8d3-08d7-fcf8-91d9-4cd514a81ed4.png)\n\n# \u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\nhttps://cran.r-project.org/web/packages/validate/vignettes/intro.html\nhttps://cran.r-project.org/web/packages/validate/vignettes/rule-files.html\n", "tags": ["R", "analytics", "statistics", "bigdata"]}