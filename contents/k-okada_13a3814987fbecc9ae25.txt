{"context": "\n\nDB\u4f5c\u6210\u306e\u5ea6\u306b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u305f\u306e\u3067\u3001\u30e1\u30e2\n\u53c2\u8003\u30b5\u30a4\u30c8\uff1a\n\u30e9\u30e9\u5e33\nLaravel5.1\u65e5\u672c\u8a9e\u30de\u30cb\u30e5\u30a2\u30eb\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u64cd\u4f5c\n1.MySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08homebrew\u3067\u5165\u308c\u308b\u3068\u826f\u3044)\n2.mysql.server start\u3000\u3067MySQL\u3092\u8d77\u52d5\n3.mysql -u root -p\u3000\u3067MySQL\u306b\u30ed\u30b0\u30a4\u30f3\n4.CREATE DATABASE test_db(\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d);\u3000\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n5.quit\u3000\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\n6.\".env\"\u3092\u958b\u3044\u3066\u3001\nDB_HOST=127.0.0.1\nDB_DATABASE=test_db\nDB_USERNAME=root\nDB_PASSWORD=\n\n\u306b\u5909\u66f4\u3002\n\n\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n7.php artisan make:migration create_tests_table(\u30d5\u30a1\u30a4\u30eb\u540d) --create=tests(\u30c6\u30fc\u30d6\u30eb\u540d)\u3092\u5b9f\u884c\u3002\n8./database/migrations/\u306b\u3000\"\u4f5c\u6210\u65e5_create_tests_table.php\"\u304c\u3067\u304d\u308b\u306e\u3067\u3001create\u95a2\u6570\u5185\u306b\u52a0\u3048\u305f\u3044\u30ab\u30e9\u30e0\u540d\u3092\u8ffd\u52a0\u3002\n \u30fb$table->softDeletes();  \u3067 delete at\u30ab\u30e9\u30e0\u8ffd\u52a0(\u8ad6\u7406\u524a\u9664\u30ab\u30e9\u30e0)\n \u30fb$table->integer('\u30ab\u30e9\u30e0\u540d');\u3000\u3067int\u578b\u306e\u30ab\u30e9\u30e0\u8ffd\u52a0\n \u30fb$table->string('\u30ab\u30e9\u30e0\u540d');\u3000\u3067varchar\u578b\u306e\u30ab\u30e9\u30e0\u8ffd\u52a0\n9.php artisan migrate\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u304c\u3067\u304d\u308b\u3002\n\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u633f\u5165\n10.php artisan make:seeder TestTableSeeder\u3092\u5b9f\u884c\u3002\n11./database/seeds/\u306b\u3000\"TestTableSeeder.php\"\u304c\u3067\u304d\u308b\u306e\u3067\u3001\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u8a18\u8ff0\u3057\u3066\u3044\u304f\u3002\n\u4e0b\u307f\u305f\u3044\u306b\u66f8\u304f\u3068\u826f\u3055\u305d\u3046\u3002\n\nuse Illuminate\\Database\\Seeder;\nuse Faker\\Factory as Faker;\n\nclass TestTableSeeder extends Seeder\n{\n  function run()\n    {\n        DB::table('tests')->delete();\n\n        $faker = Faker::create('ja_JP');\n\n        for($i=0; $i<10; $i++)\n        {\n            DB::table('tests')->insert([\n            'name' => $faker->name(),\n            'kana' => '\u30c6\u30b9\u30c8',\n            'email' => $faker->email(),\n            'password' => $faker->password(),\n            'tel' => $faker->phoneNumber(),\n            'address' => $faker->address(),\n            'staff_comment' => $faker->paragraph(),\n            ]);\n        }\n    }\n}\n\n11./database/seeds/DatabaseSeeder.php\u306b\u4eca\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3002\n    public function run()\n    {\n        Model::unguard();\n\n        $this->call(TestTableSeeder::class);\n\n        Model::reguard();\n    }\n\n12.php artisan db:seed\u3092\u5b9f\u884c\u3002\u3059\u308b\u3068\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u633f\u5165\u3055\u308c\u3066\u3044\u308b\u3002\n\uff0a\u3000github\u304b\u3089\u53d6\u5f97\u3057\u305fseeder\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u3067\ncomposer dump-autoload\u3092\u5b9f\u884c\u3057\u3066\u304b\u3089\u884c\u308f\u306a\u3044\u3068\u30a8\u30e9\u30fc\u51fa\u308b\u304b\u3082\u3002\n\uff0a\u3000php artisan migrate:refresh --seed\u3092\u4f7f\u3046\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u5168\u524a\u9664\u3057\u3066\u3001\u518d\u5ea6\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u633f\u5165\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u4e00\u5ea6\u5168\u90e8\u30ea\u30bb\u30c3\u30c8\u3057\u305f\u3044\u6642\u4fbf\u5229\u3002\n\n\u30e2\u30c7\u30eb\u30af\u30e9\u30b9\u4f5c\u6210\u3001DB\u30a2\u30af\u30bb\u30b9\n13.php artisan make:model Test\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001/app\u76f4\u4e0b\u306btest.php\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n14.\u5f8c\u306f\u9069\u5f53\u306b\u3001\napp/Http/route.php\nRoute::get('/test', 'TestController@show');\n\napp/Http/Controllers/TestController\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Routing\\Controller as BaseController;\nuse App\\Test;\n\nclass TestController extends BaseController\n{\n  public function __construct(Test $test)\n  {\n    $this->test = $test;\n  }\n\n  public function show()\n  {\n    $test = $this->test->all();\n    dd($test);\n  }\n}\n\n\nphp artisan serve\u3057\u3066\u3001\nhttp://localhost:8000/test\n\u3092\u8868\u793a\u3059\u308c\u3070\u3001DB\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\nDB\u30c7\u30fc\u30bf\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u5316\n\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u4fdd\u5b58\n\\Cache::remember('cacheName', 60, function() {\n    return \\DB::table('tableName')->get();\n});\n\n60\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u4fdd\u5b58\u671f\u9593\n\u3082\u3061\u308d\u3093DB\u30c7\u30fc\u30bf\u6574\u5f62\u3057\u3066\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u5316\u3082\u53ef\u80fd\u3002\n\\Cache::remember('cacheName', 60, function() {\n    return $this->modifyData();\n});\n\nprivate function modifyData()\n{\n    $tableData = \\DB::table('tableName')->get();\n    //\u9069\u5f53\u306a\u6574\u5f62\u51e6\u7406\u3002\n    return $tableData;\n}\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u5229\u7528\n\\Cache::get('cachename');\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u6d88\u3059\nphp artisan cache:clear\n\u3061\u306a\u307f\u306b \\ \u306f\u3001\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Cache;\n\u3068\u3059\u308c\u3070\u3001\u7701\u7565\u53ef\u80fd\u3002\n#DB\u4f5c\u6210\u306e\u5ea6\u306b\u30c1\u30a7\u30c3\u30af\u3057\u3066\u305f\u306e\u3067\u3001\u30e1\u30e2\n\u53c2\u8003\u30b5\u30a4\u30c8\uff1a\n[\u30e9\u30e9\u5e33](https://laravel10.wordpress.com/)\n[Laravel5.1\u65e5\u672c\u8a9e\u30de\u30cb\u30e5\u30a2\u30eb](http://readouble.com/laravel/5/1/ja/database.html)\n\n\n##\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210##\n\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u64cd\u4f5c\n1.MySQL\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08homebrew\u3067\u5165\u308c\u308b\u3068\u826f\u3044)\n2.``mysql.server start``\u3000\u3067MySQL\u3092\u8d77\u52d5\n3.``mysql -u root -p``\u3000\u3067MySQL\u306b\u30ed\u30b0\u30a4\u30f3\n4.``CREATE DATABASE test_db(\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d);``\u3000\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\n5.``quit``\u3000\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\n\n6.\".env\"\u3092\u958b\u3044\u3066\u3001\n\n```php\nDB_HOST=127.0.0.1\nDB_DATABASE=test_db\nDB_USERNAME=root\nDB_PASSWORD=\n```\n\u306b\u5909\u66f4\u3002\n\n##\u30c6\u30fc\u30d6\u30eb\u4f5c\u6210##\n7.``php artisan make:migration create_tests_table(\u30d5\u30a1\u30a4\u30eb\u540d) --create=tests(\u30c6\u30fc\u30d6\u30eb\u540d)``\u3092\u5b9f\u884c\u3002\n\n8./database/migrations/\u306b\u3000\"\u4f5c\u6210\u65e5_create_tests_table.php\"\u304c\u3067\u304d\u308b\u306e\u3067\u3001create\u95a2\u6570\u5185\u306b\u52a0\u3048\u305f\u3044\u30ab\u30e9\u30e0\u540d\u3092\u8ffd\u52a0\u3002\n \u30fb``$table->softDeletes();``  \u3067 delete at\u30ab\u30e9\u30e0\u8ffd\u52a0(\u8ad6\u7406\u524a\u9664\u30ab\u30e9\u30e0)\n \u30fb``$table->integer('\u30ab\u30e9\u30e0\u540d');``\u3000\u3067int\u578b\u306e\u30ab\u30e9\u30e0\u8ffd\u52a0\n \u30fb``$table->string('\u30ab\u30e9\u30e0\u540d');``\u3000\u3067varchar\u578b\u306e\u30ab\u30e9\u30e0\u8ffd\u52a0\n\n9.``php artisan migrate``\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u304c\u3067\u304d\u308b\u3002\n\n###\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u633f\u5165###\n10.```php artisan make:seeder TestTableSeeder ```\u3092\u5b9f\u884c\u3002\n\n11./database/seeds/\u306b\u3000\"TestTableSeeder.php\"\u304c\u3067\u304d\u308b\u306e\u3067\u3001\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u3092\u8a18\u8ff0\u3057\u3066\u3044\u304f\u3002\n\u4e0b\u307f\u305f\u3044\u306b\u66f8\u304f\u3068\u826f\u3055\u305d\u3046\u3002\n\n```php\n\nuse Illuminate\\Database\\Seeder;\nuse Faker\\Factory as Faker;\n\nclass TestTableSeeder extends Seeder\n{\n  function run()\n    {\n        DB::table('tests')->delete();\n\n        $faker = Faker::create('ja_JP');\n\n        for($i=0; $i<10; $i++)\n        {\n            DB::table('tests')->insert([\n            'name' => $faker->name(),\n            'kana' => '\u30c6\u30b9\u30c8',\n            'email' => $faker->email(),\n            'password' => $faker->password(),\n            'tel' => $faker->phoneNumber(),\n            'address' => $faker->address(),\n            'staff_comment' => $faker->paragraph(),\n            ]);\n        }\n    }\n}\n```\n\n11./database/seeds/DatabaseSeeder.php\u306b\u4eca\u4f5c\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3002\n\n```php\n    public function run()\n    {\n        Model::unguard();\n\n        $this->call(TestTableSeeder::class);\n        \n        Model::reguard();\n    }\n```\n\n12.``php artisan db:seed``\u3092\u5b9f\u884c\u3002\u3059\u308b\u3068\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u633f\u5165\u3055\u308c\u3066\u3044\u308b\u3002\n\uff0a\u3000github\u304b\u3089\u53d6\u5f97\u3057\u305fseeder\u30d5\u30a1\u30a4\u30eb\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u3001\u30bf\u30fc\u30df\u30ca\u30eb\u3067\n``composer dump-autoload``\u3092\u5b9f\u884c\u3057\u3066\u304b\u3089\u884c\u308f\u306a\u3044\u3068\u30a8\u30e9\u30fc\u51fa\u308b\u304b\u3082\u3002\n\uff0a\u3000``php artisan migrate:refresh --seed``\u3092\u4f7f\u3046\u3068\u3001\u30c6\u30fc\u30d6\u30eb\u5168\u524a\u9664\u3057\u3066\u3001\u518d\u5ea6\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u633f\u5165\u3057\u3066\u304f\u308c\u308b\u306e\u3067\u3001\u4e00\u5ea6\u5168\u90e8\u30ea\u30bb\u30c3\u30c8\u3057\u305f\u3044\u6642\u4fbf\u5229\u3002\n\n##\u30e2\u30c7\u30eb\u30af\u30e9\u30b9\u4f5c\u6210\u3001DB\u30a2\u30af\u30bb\u30b9##\n13.``php artisan make:model Test``\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001/app\u76f4\u4e0b\u306btest.php\u304c\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n14.\u5f8c\u306f\u9069\u5f53\u306b\u3001\napp/Http/route.php\n\n```php\nRoute::get('/test', 'TestController@show');\n```\napp/Http/Controllers/TestController\n\n```php\n\nnamespace App\\Http\\Controllers;\n\nuse Illuminate\\Routing\\Controller as BaseController;\nuse App\\Test;\n\nclass TestController extends BaseController\n{\n  public function __construct(Test $test)\n  {\n    $this->test = $test;\n  }\n\n  public function show()\n  {\n    $test = $this->test->all();\n    dd($test);\n  }\n}\n\n```\n\n``php artisan serve``\u3057\u3066\u3001\nhttp://localhost:8000/test\n\u3092\u8868\u793a\u3059\u308c\u3070\u3001DB\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u3066\u3044\u308b\u306e\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3002\n\n\n##DB\u30c7\u30fc\u30bf\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u5316##\n\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u4fdd\u5b58\n\n```php\n\\Cache::remember('cacheName', 60, function() {\n    return \\DB::table('tableName')->get();\n});\n```\n\n60\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u4fdd\u5b58\u671f\u9593\n\n\u3082\u3061\u308d\u3093DB\u30c7\u30fc\u30bf\u6574\u5f62\u3057\u3066\u3001\u30ad\u30e3\u30c3\u30b7\u30e5\u5316\u3082\u53ef\u80fd\u3002\n\n```php\n\\Cache::remember('cacheName', 60, function() {\n    return $this->modifyData();\n});\n\nprivate function modifyData()\n{\n    $tableData = \\DB::table('tableName')->get();\n    //\u9069\u5f53\u306a\u6574\u5f62\u51e6\u7406\u3002\n    return $tableData;\n}\n```\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u5229\u7528\n\n```php\n\\Cache::get('cachename');\n```\n\n\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u6d88\u3059\n``php artisan cache:clear``\n\n\u3061\u306a\u307f\u306b \\ \u306f\u3001\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Cache;\n\u3068\u3059\u308c\u3070\u3001\u7701\u7565\u53ef\u80fd\u3002\n", "tags": ["laravel5"]}