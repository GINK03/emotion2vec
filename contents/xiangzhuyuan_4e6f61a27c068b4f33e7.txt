{"context": "\n\n\u4f7f\u7528 React\n\u8fd9\u91cc\u8bf4\u660e\u7684\u5c31\u662f\u5176\u5b9e Redux \u5b83\u5b8c\u6210\u7684\u903b\u8f91\u662f\u4e0d\u9650\u4e8e react \u6765\u5b8c\u6210 UI \u90e8\u5206\u7684. \u4f60\u5b8c\u5168\u53ef\u4ee5\u4f7f\u7528\u5982Angular Ember \u6216\u8005jQuery \u7b49 frontend \u6846\u67b6\u6765\u5199. \u800c\u53ea\u662f Redux \u53ef\u4ee5\u66f4\u597d\u5730\u548c react \u6216\u8005 deku \u7ed3\u5408\u4f7f\u7528. \u56e0\u4e3a\u4ece react \u4ed6\u4eec\u7684\u6982\u5ff5\u5b9a\u4e49\u6765\u8bf4, \u63cf\u8ff0 UI \u7684\u8fc7\u7a0b\u5c31\u662f\u5728\u8bf4\u660e\u4e00\u4e2a\u72b6\u6001\u7684\u51fd\u6570. \u548c Redux \u54cd\u5e94\u4e00\u4e2a\u52a8\u4f5c\u51fa\u53d1\u72b6\u6001\u66f4\u65b0. \n\u63a5\u4e0b\u6765\u6211\u4eec\u4f7f\u7528 react \u6765\u6784\u5efa\u8fd9\u4e2a todoapp \u7684 UI \u90e8\u5206.\n\n\u5b89\u88c5 react redux\nreact \u7ed1\u5b9a \u662f\u5355\u72ec\u4e0e redux \u5b58\u5728,\u6211\u4eec\u73b0\u5728\u5b89\u88c5\u5b83:\nnpm install --save react-redux\n\n\nIf you don't use npm, you may grab the latest UMD build from unpkg (either a development or a production build). \nThe UMD build exports a global called window.\nReactRedux if you add it to your page via a <script> tag.\n\n\n\u5c55\u793a\u5bb9\u5668\u7ec4\u4ef6(\u7528\u6765\u753b UI, \u65e0\u903b\u8f91)\nReact redux \u7ed1\u5b9a\u5c01\u88c5\u4e86\u5c55\u793a\u548c\u5bb9\u5668\u7ec4\u4ef6\u5206\u79bb\u7684\u6982\u5ff5. \u82e5\u4e0d\u719f\u6089\u5148\u8bfb\u5b83,\n\u5f88\u91cd\u8981,\u53ef\u4ee5\u79bb\u5f00\u653e\u4e0b\u8fd9\u91cc,\u7b49\u4f60.\n\u56de\u6765...\n\u6211\u4eec\u603b\u7ed3\u4e0b\u6709\u4ec0\u4e48\u4e0d\u540c\u4e4b\u5904:\n\n\n\n\\\n\u5c55\u793a\u7ec4\u4ef6\n\u5bb9\u5668\u7ec4\u4ef6\n\n\n\n\n\u76ee\u7684\n\u770b\u4e0a\u53bb\u50cf\u4ec0\u4e48\n\u4ed6\u4eec\u662f\u600e\u4e48\u5de5\u4f5c\u7684\n\n\n\u548c Redux\u901a\u4fe1\n\u4e0d\n\u662f\n\n\n\u600e\u4e48\u8bfb\u53d6\u6570\u636e\n\u4ece\u5c5e\u6027 props\n\u8ba2\u9605 redux \u7684\u72b6\u6001\n\n\n\u600e\u4e48\u4fee\u6539\u6570\u636e\n\u901a\u8fc7\u5c5e\u6027\u91cc\u7684\u56de\u8c03\n\u89e6\u53d1 redux \u7684\u52a8\u4f5c\n\n\n\u8c01\u5199\u7684\n\u81ea\u5df1\u7528\u624b\n\u901a\u5e38\u7531react redux \u4f1a\u751f\u6210\n\n\n\n\u6211\u4eec\u9700\u8981\u5904\u7406\u7684\u5927\u90e8\u5206\u7684\u90fd\u662f\u5c55\u793a\u7ec4\u4ef6, \u5f53\u7136\u4e5f\u8981\u5904\u7406\u4e00\u4e9b\u5bb9\u5668\u7ec4\u4ef6, \u4ed6\u4eec\u7528\u6765\u548creudx store \u8fde\u63a5\u8d77\u6765.\n\u6280\u672f\u4e0a\u6765\u8bf4, \u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528store.subscribe()\u6765\u5199\u5bb9\u5668\u7ec4\u4ef6,\u4f46\u662f\u4e0d\u5efa\u8bae\u4f60\u90a3\u6837\u505a.\n\u56e0\u4e3aReact redux \u901a\u5e38\u4f1a\u505a\u5f88\u591a\u7684\u4f18\u5316, \u4ed6\u4eec\u90fd\u662f\u624b\u52a8\u65e0\u6cd5\u5b8c\u6210\u7684. \n\u56e0\u4e3a\u8fd9\u4e2a, \u6211\u4eec\u66f4\u52a0\u8d8b\u5411\u4e8e\u901a\u8fc7\u4f7f\u7528 react-reudx \u7684connect() \u51fd\u6570\u6765\u751f\u6210\u4ed6\u4eec.\n\n\u8bbe\u8ba1\u7ec4\u4ef6\u4f53\u7cfb\u7ed3\u6784\n\u4e4b\u524d\u6211\u4eec\u540c\u6837\u9047\u5230\u4e00\u4e2a\u73af\u8282\u5c31\u662f\u5728\u52a8\u624b\u4e4b\u524d\u8bbe\u8ba1\u6211\u4eec\u7684 state \u4f53\u7cfb. \u73b0\u5728\u6211\u4eec\u8981\u8bbe\u8ba1\u5982\u4f55\u7ec4\u7ec7 UI \u7ed3\u6784\u4e86. \u8fd9\u91cc\u5c31\u4e0d\u662f redux \u7684\u8303\u7574\u4e86. \u53ef\u4ee5\u901a\u8fc7\u5982\u4f55\u4f7f\u7528 react \u6765\u5b66\u4e60\u7406\u89e3\u5982\u4f55\u5904\u7406.\n\u6211\u4eec\u5728\u8fd9\u91cc\u7684\u8bbe\u8ba1\u5f88\u7b80\u5355\u4e86, \u6211\u4eec\u8981\u663e\u793a\u4e00\u4e2a todo \u7684 list. \u70b9\u51fb todo \u7684 item, \u5b83\u5c31\u6807\u8bb0\u4e3a\u5b8c\u6210. \u800c\u4e14\u53ef\u4ee5\u8fc7\u6ee4\u663e\u793a\u6ca1\u6709\u5b8c\u6210\u7684,\u6216\u8005\u5df2\u7ecf\u5b8c\u6210\u7684.\n\n\n\u5c55\u793a\u7ec4\u4ef6\n\u901a\u8fc7\u4e0a\u9762\u5927\u81f4\u7684\u8bb2\u8ff0,\u6211\u73b0\u5728\u8111\u6d77\u91cc\u5c31\u662f\u8fd9\u6837\u4e00\u4e9b\u4e1c\u897f\u6d6e\u73b0;\n\n\nTodoList \u7528\u6765\u8868\u793a\u53ef\u89c1\u7684 todo \u5217\u8868\n\ntodos:Array \u5c31\u662f\u4e00\u7ec4 todo \u7684 item, \u5927\u6982\u5185\u5bb9\u5c31\u662f {id,text,completed}.\nonTodoClick(id:number) \u662f\u4e00\u4e2a\u56de\u8c03\u5f53\u4e00\u4e2a todo \u7684 item \u88ab\u70b9\u51fb\u7684\u65f6\u5019.\n\n\n\nTodo \u5c31\u662f\u8868\u793a\u4e00\u4e2a\u5355\u72ec\u7684 todo\n\ntext:string \u5f53\u524d todo \u7684\u5185\u5bb9\ncompleted:boolean \u5f53\u524d\u662f\u5426\u6807\u8bb0\u4e3a\u5b8c\u6210\nonClick() \u662f\u4e00\u4e2a\u56de\u8c03, \u5f53\u5728 item \u88ab\u70b9\u51fb\u7684\u65f6\u5019\u89e6\u53d1\n\n\n\nLink \u56de\u8c03\u7528\n\nonClick() link \u5728\u88ab\u70b9\u51fb\u540e\u89e6\u53d1\u7684\u56de\u8c03\n\n\nFooter \u7528\u6765\u663e\u793a\u4ec0\u4e48\u72b6\u6001\u7684 toggle\nApp \u5c31\u662f\u5f53\u524d app \u7684\u6839\u5143\u7d20\n\n\u4ed6\u4eec\u5b8c\u5168\u4e0d\u4f9d\u8d56redux, \u5f53\u4f60\u628a redux \u8fc1\u79fb\u5230\u5176\u4ed6\u7684\u6846\u67b6\u4e0a\u65f6, \u8fd9\u4e9b\u4e1c\u897f\u5b8c\u5168\u4e0d\u9700\u8981\u4fee\u6539. \u4ed6\u4eec\u53ea\u662f\u7528\u6765\u6e32\u67d3\u4f60\u60f3\u8981\u5728 UI \u4e0a\u770b\u5230\u7684\u4e1c\u897f\n\n\n\u5bb9\u5668\u7ec4\u4ef6\n\u5bb9\u5668\u7ec4\u4ef6\u5728\u8fd9\u91cc\u5145\u5f53\u7684\u89d2\u8272\u5c31\u662f\u7528\u5b83\u6765\u8fde\u63a5\u5c55\u793a\u7ec4\u4ef6\u548c redux, \u8ba9redux \u7684\u6570\u80fd\u5bf9\u5e94\u7684\u663e\u793a\u5728\u5c55\u793a\u7ec4\u4ef6\u4e0a. \u6bd4\u5982\u521a\u624d\u5b9a\u4e49\u7684\u5c55\u793a\u7ec4\u4ef6TodoList \u7ec4\u4ef6\u5b83\u5c31\u9700\u8981\u4e00\u4e2a\u5bb9\u5668\u6bd4\u5982\u53ebVisibleTodoList, \u7136\u540e\u8ba9\u5b83\u8ba2\u9605\u5230Redux store\u91cc\u7684\u5f53\u524d\u5bf9\u5e94\u53ef\u89c1\u7684todo, \u4e3a\u4e86\u4fee\u6539\u53ef\u89c1\u8fc7\u6ee4\u5668,\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u6bd4\u5982FilterLink \u7684\u5bb9\u5668\u6765\u5b8c\u6210\u6e32\u67d3\u4e00\u4e2aLink \u6765\u8ba9\u5b83\u5b8c\u6210\u4e00\u4e2a\u52a8\u4f5c\u7684\u89e6\u53d1\u5f53\u70b9\u51fb\u5b83\u7684\u65f6\u5019:\n\nVisibleTodoList \u901a\u8fc7\u5f53\u524d\u7684\u663e\u793a\u8fc7\u6ee4\u6761\u4ef6\u62ff\u5230 todo list\nFilterLink \u83b7\u53d6\u5f53\u524d\u7684\u8fc7\u6ee4\u6761\u4ef6\u7136\u540e\u6e32\u67d3\u4e00\u4e2a link\n\n\nFilter:string \n\n\n\n\n\u5176\u4ed6\u7ec4\u4ef6\n\u6709\u65f6\u5019\u5f88\u96be\u754c\u5b9a\u5b83\u5230\u5e95\u662f\u5c55\u793a\u7ec4\u4ef6\u8fd8\u662f\u5bb9\u5668\u7ec4\u4ef6. \u4f8b\u5982\u6709\u65f6\u5019\u4e00\u4e2a\u8868\u5355\u6216\u8005\u4e00\u4e2a\u51fd\u6570\u4ed6\u4eec\u7cbe\u5bc6\u7684\u7f20\u7ed5,\u5982\n\nAddTodo \u5c31\u662f\u4e00\u4e2a\u8f93\u5165\u6846\u52a0\u4e00\u4e2a\u6dfb\u52a0\u6309\u94ae\n\n\u6280\u672f\u4e0a\u8bb2\u6211\u4eec\u53ef\u4ee5\u628a\u4ed6\u4eec\u5206\u5f00,\u4f46\u662f\u5462\u73b0\u5728\u8fd9\u4e2a\u521d\u7ea7\u9636\u6bb5\u6211\u4eec\u6700\u597d\u628a\u5b83\u6df7\u5408\u5728\u4e00\u8d77. \u56e0\u4e3a\u7ec4\u4ef6\u7684\u903b\u8f91\u4e5f\u4e0d\u662f\u5f88\u9ebb\u70e6, \u968f\u7740 app \u7684\u6210\u957f,\u5982\u4f55\u5206\u5272\u4ed6\u4eec\u5c31\u53d8\u5f97\u8d8a\u6765\u8d8a\u660e\u663e.\n\n\u52a8\u624b\u5b9e\u73b0\u7ec4\u4ef6\n\u6211\u4eec\u5148\u4ece\u5c55\u793a\u7ec4\u4ef6\u5f00\u59cb,\u56e0\u4e3a\u6211\u4eec\u4e0d\u9700\u8981\u8003\u8651\u5982\u4f55\u548c redux \u8054\u7cfb\u8d77\u6765.\n\n\u5c55\u793a\u7ec4\u4ef6\n\u8fd9\u4e9b\u90fd\u662f\u666e\u901a\u7684 React \u7ec4\u4ef6.\u6211\u4eec\u4e5f\u4e0d\u4f1a\u6d89\u53ca\u592a\u591a,\u5c31\u662f\u5199\u4e00\u4e9b\u65e0\u72b6\u6001\u7684\u7eaf\u51fd\u6570.\n\u9664\u975e\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e9b\u672c\u5730\u7684\u72b6\u6001\u6216\u8005\u751f\u547d\u5468\u671f\u7684\u65b9\u6cd5.\u5f53\u7136\u4e5f\u4e0d\u662f\u8bf4\u7ec4\u4ef6\u5fc5\u987b\u662f\u51fd\u6570.\u53ea\u662f\u7528\u51fd\u6570\u7b80\u5355.\n\u5982\u4f55\u4f60\u4e4b\u540e\u8bbe\u8ba1\u5230\u672c\u5730\u72b6\u6001,\u751f\u547d\u5468\u671f\u7684\u65b9\u6cd5,\u6216\u8005\u6027\u80fd\u4f18\u5316\u7684\u65f6\u5019\u53ef\u4ee5\u628a\u5b83\u4eec\u5199\u6210\u7c7b.\n\ncomponents/Todo.js\n\nimport React, { PropTypes } from 'react'\n// \u5b9a\u4e49\u5355\u4e2a todo \u5bf9\u8c61\n// \u9700\u89813\u4e2a\u53c2\u6570,1 click\u4e8b\u4ef6, 2 \u662f\u5426\u5b8c\u6210, 3 \u663e\u5f0f\u6587\u672c\nconst Todo = ({ onClick, completed, text }) => (\n  <li onClick={onClick} style={{ textDecoration: completed ? 'line-through' : 'none' }} > {text} </li>\n)\n\n// \u9a8c\u8bc13\u4e2a\u53c2\u6570\nTodo.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  completed: PropTypes.bool.isRequired,\n  text: PropTypes.string.isRequired\n}\n\nexport default Todo\n\n\n\ncomponents/TodoList.js\nimport React, { PropTypes } from 'react'\nimport Todo from './Todo'\n\nconst TodoList = ({ todos, onTodoClick }) => (\n  <ul>\n    {todos.map(todo =>\n      <Todo\n        key={todo.id}\n        {...todo}\n        onClick={() => onTodoClick(todo.id)}\n      />\n    )}\n  </ul>\n)\n\nTodoList.propTypes = {\n  todos: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    completed: PropTypes.bool.isRequired,\n    text: PropTypes.string.isRequired\n  }).isRequired).isRequired,\n  onTodoClick: PropTypes.func.isRequired\n}\n\nexport default TodoList\n\n\n\ncomponents/link.js\nimport React, { PropTypes } from 'react'\n\nconst Link = ({ active, children, onClick }) => {\n  if (active) {\n    return <span>{children}</span>\n  }\n\n  return (\n    <a href=\"#\"\n       onClick={e => {\n         e.preventDefault()\n         onClick()\n      }}\n    >\n      {children}\n    </a>\n  )\n}\n\nLink.propTypes = {\n  active: PropTypes.bool.isRequired,\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func.isRequired\n}\n\nexport default Link\n\n\n\ncomponents/Footer.js\nimport React from 'react'\nimport FilterLink from '../containers/FilterLink'\n\nconst Footer = () => (\n  <p>\n    Show:\n    {\" \"}\n    <FilterLink filter=\"SHOW_ALL\">\n      All\n    </FilterLink>\n    {\", \"}\n    <FilterLink filter=\"SHOW_ACTIVE\">\n      Active\n    </FilterLink>\n    {\", \"}\n    <FilterLink filter=\"SHOW_COMPLETED\">\n      Completed\n    </FilterLink>\n  </p>\n)\n\nexport default Footer\n\n\n\ncomponents/App.js\nimport React from 'react'\nimport Footer from './Footer'\nimport AddTodo from '../containers/AddTodo'\nimport VisibleTodoList from '../containers/VisibleTodoList'\n\nconst App = () => (\n  <div>\n    <AddTodo />\n    <VisibleTodoList />\n    <Footer />\n  </div>\n)\n\nexport default App\n\n\n\n\u5bb9\u5668\u7ec4\u4ef6\n\u73b0\u5728\u662f\u65f6\u5019\u628a\u8fd9\u4e9b\u89c6\u56fe\u7ec4\u4ef6 hook \u5230 redux \u91cc\u901a\u8fc7\u521b\u5efa\u4e00\u4e9b\u5bb9\u5668\u7ec4\u4ef6. \u6280\u672f\u4e0a\u6765\u8bf4, \u4e00\u4e2a\u5bb9\u5668\u7ec4\u4ef6\u5c31\u662f\u4e00\u4e2a React \u7684\u7ec4\u4ef6( component), \u4ed6\u4eec\u901a\u8fc7\u4f7f\u7528store.subscribe()\u6765\u8bfb\u53d6Redux \u72b6\u6001\u6811\u4e2d\u7684\u90e8\u5206\u72b6\u6001\u6570\u636e,\u7136\u540e\u7ed9\u89c6\u56fe\u7ec4\u4ef6\u7684props \u5bf9\u8c61,\u4e4b\u540e\u5c55\u793a\u7684\u8fc7\u7a0b\u548c\u903b\u8f91. \u4f60\u53ef\u4ee5\u624b\u6572\u4e00\u4e2a\u5bb9\u5668\u7ec4\u4ef6, \u4f46\u662f\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a\u6709\u70b9\u50bb,\u5efa\u8bae\u4f60\u901a\u8fc7\u4f7f\u7528 react redux \u7684\u5e93\u63d0\u4f9b\u7684connect() \u51fd\u6570\u6765\u751f\u6210\u8fd9\u4e9b\u5bb9\u5668\u7ec4\u4ef6.\u4ed6\u4eec\u540c\u65f6\u63d0\u4f9b\u4e86\u5f88\u591a\u4f18\u5316\u6765\u9632\u6b62\u91cd\u590d\u6ca1\u7528\u7684\u6e32\u67d3.\n\u4e3a\u4e86\u4f7f\u7528connect(),\u4f60\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\u540d\u5b57\u53eb\u505amapStateToProps, \u5b83\u7684\u4f5c\u7528\u5c31\u662f\u544a\u8bc9\u5f53\u524d\u7684 app \u5982\u4f55\u628a redux \u91cc\u7684\u7279\u5b9a\u7684\u72b6\u6001\u7247\u6bb5\u5bf9\u5e94\u5230\u7279\u5b9a\u7ec4\u4ef6\u7684props \u5c5e\u6027\u4e0a.\u4e3e\u4e2a\u4f8b\u5b50, VisibleTodoList \u9700\u8981\u8ba1\u7b97todos, \u628a\u5b83\u4f20\u7ed9TodoList. \u6240\u4ee5\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570,\u5b83\u80fd\u591f\u8fc7\u6ee4\u51fastate.todos, \u901a\u8fc7state.visibilityFilter, \u4e4b\u540e\u5728mapStateToProps \u91cc\u662f\u8fd9\u6837\u7684:\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case 'SHOW_ALL':\n      return todos\n    case 'SHOW_COMPLETED':\n      return todos.filter(t => t.completed)\n    case 'SHOW_ACTIVE':\n      return todos.filter(t => !t.completed)\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    todos: getVisibleTodos(state.todos, state.visibilityFilter)\n  }\n}\n\n\u9664\u4e86\u8bfb\u53d6 redux \u7684\u72b6\u6001,\u5bb9\u5668\u7ec4\u4ef6\u8fd8\u53ef\u4ee5\u5206\u53d1\u52a8\u4f5c. \u901a\u5e38\u6d41\u884c\u7684\u5199\u6cd5\u662f\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2amapDispatchToProps()\u51fd\u6570.\u4ed6\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2adispatch() \u65b9\u6cd5,\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u56de\u8c03\u53c2\u6570, \u8fd9\u4e2a\u56de\u8c03\u53c2\u6570\u5c31\u662f\u4f60\u60f3\u8981 hook\u5230\u89c6\u56fe\u7ec4\u4ef6\u4e2d\u7684. \u4f8b\u5982, \u6211\u4eec\u60f3\u8981\u628aVisibleTodoList \u6ce8\u5165\u4e00\u4e2aonTodoClick \u7684\u5c5e\u6027\u5230TodoList \u7684\u7ec4\u4ef6.\u800c\u4e14\u8fd9\u4e2aonTodoClick\u8fd8\u53ef\u4ee5\u65b9\u6cd5TOGGLE_TODO \u7684\u52a8\u4f5c:\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onTodoClick: (id) => {\n      dispatch(toggleTodo(id))\n    }\n  }\n}\n\n\u6700\u7ec8,\u6211\u4eec\u901a\u8fc7\u8c03\u7528connect() \u4f20\u90122\u4e2a\u53c2\u6570, \u521b\u5efa\u4e86VisibleTodoList\u5bf9\u8c61.\nimport { connect } from 'react-redux'\n\nconst VisibleTodoList = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n\nexport default VisibleTodoList\n\n\u8fd9\u4e9b\u90fd\u662f React redux \u57fa\u672c\u7684 API, \u4f46\u662f\u8fd8\u6709\u5f88\u591a\u65b9\u4fbf\u597d\u7528\u7684\u65b9\u6cd5\u6240\u4ee5\u5efa\u8bae\u4f60\u9605\u8bfb\u5b83\u7684\u6587\u6863,\u5982\u679c\u4f60 \u7ecf\u5e38\u62c5\u5fc3mapStateToProps\u521b\u5efa\u65b0\u7684\u5bf9\u8c61,\u4f60\u53ef\u4ee5\u5b66\u4e60computing derived data with reselect.\n\u63a5\u4e0b\u6765\u662f\u5168\u90e8\u7684\u5bb9\u5668\u7ec4\u4ef6\u7684\u4ee3\u7801:\n\ncontainers/FilterLink.js\n\nimport { connect } from 'react-redux'\nimport { setVisibilityFilter } from '../actions'\nimport Link from '../components/Link'\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    active: ownProps.filter === state.visibilityFilter\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    onClick: () => {\n      dispatch(setVisibilityFilter(ownProps.filter))\n    }\n  }\n}\n\nconst FilterLink = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Link)\n\nexport default FilterLink\n\n\n\ncontainers/VisibleTodoList.js\nimport { connect } from 'react-redux'\nimport { toggleTodo } from '../actions'\nimport TodoList from '../components/TodoList'\n\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case 'SHOW_ALL':\n      return todos\n    case 'SHOW_COMPLETED':\n      return todos.filter(t => t.completed)\n    case 'SHOW_ACTIVE':\n      return todos.filter(t => !t.completed)\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    todos: getVisibleTodos(state.todos, state.visibilityFilter)\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onTodoClick: (id) => {\n      dispatch(toggleTodo(id))\n    }\n  }\n}\n\nconst VisibleTodoList = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n\nexport default VisibleTodoList\n\n\n\n\u5176\u4ed6\u7684\u7ec4\u4ef6\n\ncontainers/AddTodo.js\n\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { addTodo } from '../actions'\n\nlet AddTodo = ({ dispatch }) => {\n  let input\n\n  return (\n    <div>\n      <form onSubmit={e => {\n        e.preventDefault()\n        if (!input.value.trim()) {\n          return\n        }\n        dispatch(addTodo(input.value))\n        input.value = ''\n      }}>\n        <input ref={node => {\n          input = node\n        }} />\n        <button type=\"submit\">\n          Add Todo\n        </button>\n      </form>\n    </div>\n  )\n}\nAddTodo = connect()(AddTodo)\n\nexport default AddTodo\n\n\n\n\u4f20\u9012 Store\n\u6240\u6709\u7684\u5bb9\u5668\u7ec4\u4ef6\u90fd\u80fd\u591f\u8bbf\u95ee Redux \u7684 store, \u6240\u4ee5\u4ed6\u4eec\u53ef\u4ee5\u8ba2\u9605\u5b83. \u6709\u4e2a\u65b9\u6cd5\u5c31\u662f\u53ef\u4ee5\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u53c2\u6570 prop \u4f20\u9012\u7ed9\u6bcf\u4e00\u4e2a\u5bb9\u5668\u7ec4\u4ef6. \u4f46\u662f\u8fd9\u6837\u5f88\u65e0\u804a,\u4f60\u9700\u8981\u628a\u5b83\u5728\u6240\u6709\u89c6\u56fe\u7ec4\u4ef6\u4e2d\u4f20\u9012?\n\u5c31\u662f\u56e0\u4e3a\u4ed6\u4eec\u5728\u7ec4\u4ef6\u6811\u91cc\u5f88\u6df1\u7684\u4f4d\u7f6e\u54e6.?\u4e0d\u61c2\n\u6211\u4eec\u63a8\u8350\u7684\u4e00\u4e2a\u65b9\u6cd5\u5c31\u662f\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684 react redux \u7ec4\u4ef6\u53eb\u505a<Provider>,\u5b83\u53ef\u4ee5\u5f88\u9b54\u6027\u7684\u8ba9 store\u53d8\u5f97\u5728\u6240\u6709\u7684\u5bb9\u5668\u7ec4\u4ef6\u4e2d\u53ef\u89c1, \u800c\u4e0d\u9700\u8981\u518d\u53bb\u663e\u793a\u7684\u4f20\u9012\u5b83, \u56e0\u4e3a\u4f60\u53ea\u9700\u8981\u5728\u6839\u7ec4\u4ef6\u91cc\u5f15\u7528\u4e00\u6b21.\n\nindex.js\n\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport todoApp from './reducers'\nimport App from './components/App'\n\nlet store = createStore(todoApp)\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n\n\n\u5230\u8fd9\u91cc, \u4e00\u4e2atodo app \u4e5f\u5c31\u5b8c\u4e8b\u513f, \u6211\u4eec\u56de\u8fc7\u5934\u6765\u91cd\u65b0\u67e5\u770b\u5b83\u7684\u6e90\u7801, \u5bf9\u6bd4\u4e0a\u9762\u6211\u4eec\u6240\u8bb2\u89e3\u8fc7\u7684\u4e00\u5207. \u518d\u53bb\u611f\u53d7\u5982\u4f55 build \u4e00\u4e2aredux-react app.\n-THE END-\n\n### \u4f7f\u7528 React\n\n\u8fd9\u91cc\u8bf4\u660e\u7684\u5c31\u662f\u5176\u5b9e Redux \u5b83\u5b8c\u6210\u7684\u903b\u8f91\u662f\u4e0d\u9650\u4e8e react \u6765\u5b8c\u6210 UI \u90e8\u5206\u7684. \u4f60\u5b8c\u5168\u53ef\u4ee5\u4f7f\u7528\u5982`Angular` `Ember` \u6216\u8005` jQuery` \u7b49 frontend \u6846\u67b6\u6765\u5199. \u800c\u53ea\u662f Redux \u53ef\u4ee5\u66f4\u597d\u5730\u548c react \u6216\u8005 deku \u7ed3\u5408\u4f7f\u7528. \u56e0\u4e3a\u4ece react \u4ed6\u4eec\u7684\u6982\u5ff5\u5b9a\u4e49\u6765\u8bf4, \u63cf\u8ff0 UI \u7684\u8fc7\u7a0b\u5c31\u662f\u5728\u8bf4\u660e\u4e00\u4e2a\u72b6\u6001\u7684\u51fd\u6570. \u548c Redux \u54cd\u5e94\u4e00\u4e2a\u52a8\u4f5c\u51fa\u53d1\u72b6\u6001\u66f4\u65b0. \n\n\u63a5\u4e0b\u6765\u6211\u4eec\u4f7f\u7528 react \u6765\u6784\u5efa\u8fd9\u4e2a todoapp \u7684 UI \u90e8\u5206.\n\n### \u5b89\u88c5 react redux\n\n[react \u7ed1\u5b9a](https://github.com/reactjs/react-redux) \u662f\u5355\u72ec\u4e0e redux \u5b58\u5728,\u6211\u4eec\u73b0\u5728\u5b89\u88c5\u5b83:\n\n```\nnpm install --save react-redux\n```\n\n\n\n> If you don't use npm, you may grab the latest UMD build from unpkg (either a development or a production build). \n> The UMD build exports a global called window.\n> ReactRedux if you add it to your page via a \\<script\\> tag.\n\n\n### \u5c55\u793a\u5bb9\u5668\u7ec4\u4ef6(\u7528\u6765\u753b UI, \u65e0\u903b\u8f91)\n\n**React redux \u7ed1\u5b9a**\u5c01\u88c5\u4e86`\u5c55\u793a\u548c\u5bb9\u5668\u7ec4\u4ef6\u5206\u79bb`\u7684\u6982\u5ff5. [\u82e5\u4e0d\u719f\u6089\u5148\u8bfb\u5b83](https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0),\n\n\u5f88\u91cd\u8981,\u53ef\u4ee5\u79bb\u5f00\u653e\u4e0b\u8fd9\u91cc,\u7b49\u4f60.\n\n\n\u56de\u6765...\n\n\u6211\u4eec\u603b\u7ed3\u4e0b\u6709\u4ec0\u4e48\u4e0d\u540c\u4e4b\u5904:\n\n| \\   |\u5c55\u793a\u7ec4\u4ef6|\u5bb9\u5668\u7ec4\u4ef6|\n|:--:|:-----:|:----:|\n|\u76ee\u7684|\u770b\u4e0a\u53bb\u50cf\u4ec0\u4e48|\u4ed6\u4eec\u662f\u600e\u4e48\u5de5\u4f5c\u7684|\n|\u548c Redux\u901a\u4fe1|\u4e0d|\u662f|\n|\u600e\u4e48\u8bfb\u53d6\u6570\u636e|\u4ece\u5c5e\u6027 props|\u8ba2\u9605 redux \u7684\u72b6\u6001|\n|\u600e\u4e48\u4fee\u6539\u6570\u636e|\u901a\u8fc7\u5c5e\u6027\u91cc\u7684\u56de\u8c03|\u89e6\u53d1 redux \u7684\u52a8\u4f5c|\n|\u8c01\u5199\u7684|\u81ea\u5df1\u7528\u624b|\u901a\u5e38\u7531react redux \u4f1a\u751f\u6210|\n\n\n\u6211\u4eec\u9700\u8981\u5904\u7406\u7684\u5927\u90e8\u5206\u7684\u90fd\u662f\u5c55\u793a\u7ec4\u4ef6, \u5f53\u7136\u4e5f\u8981\u5904\u7406\u4e00\u4e9b\u5bb9\u5668\u7ec4\u4ef6, \u4ed6\u4eec\u7528\u6765\u548c` reudx store` \u8fde\u63a5\u8d77\u6765.\n\n\u6280\u672f\u4e0a\u6765\u8bf4, \u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528` store.subscribe()`\u6765\u5199\u5bb9\u5668\u7ec4\u4ef6,\u4f46\u662f\u4e0d\u5efa\u8bae\u4f60\u90a3\u6837\u505a.\n\u56e0\u4e3a` React redux` \u901a\u5e38\u4f1a\u505a\u5f88\u591a\u7684\u4f18\u5316, \u4ed6\u4eec\u90fd\u662f\u624b\u52a8\u65e0\u6cd5\u5b8c\u6210\u7684. \n\u56e0\u4e3a\u8fd9\u4e2a, \u6211\u4eec\u66f4\u52a0\u8d8b\u5411\u4e8e\u901a\u8fc7\u4f7f\u7528 react-reudx \u7684` connect()` \u51fd\u6570\u6765\u751f\u6210\u4ed6\u4eec.\n\n###\u8bbe\u8ba1\u7ec4\u4ef6\u4f53\u7cfb\u7ed3\u6784\n\n\u4e4b\u524d\u6211\u4eec\u540c\u6837\u9047\u5230\u4e00\u4e2a\u73af\u8282\u5c31\u662f\u5728[\u52a8\u624b\u4e4b\u524d\u8bbe\u8ba1\u6211\u4eec\u7684 state \u4f53\u7cfb](http://redux.js.org/docs/basics/Reducers.html). \u73b0\u5728\u6211\u4eec\u8981\u8bbe\u8ba1\u5982\u4f55\u7ec4\u7ec7 UI \u7ed3\u6784\u4e86. \u8fd9\u91cc\u5c31\u4e0d\u662f redux \u7684\u8303\u7574\u4e86. \u53ef\u4ee5\u901a\u8fc7[\u5982\u4f55\u4f7f\u7528 react](https://facebook.github.io/react/docs/thinking-in-react.html) \u6765\u5b66\u4e60\u7406\u89e3\u5982\u4f55\u5904\u7406.\n\n\u6211\u4eec\u5728\u8fd9\u91cc\u7684\u8bbe\u8ba1\u5f88\u7b80\u5355\u4e86, \u6211\u4eec\u8981\u663e\u793a\u4e00\u4e2a todo \u7684 list. \u70b9\u51fb todo \u7684 item, \u5b83\u5c31\u6807\u8bb0\u4e3a\u5b8c\u6210. \u800c\u4e14\u53ef\u4ee5\u8fc7\u6ee4\u663e\u793a\u6ca1\u6709\u5b8c\u6210\u7684,\u6216\u8005\u5df2\u7ecf\u5b8c\u6210\u7684.\n\n---\n\n####\u5c55\u793a\u7ec4\u4ef6\n\n\u901a\u8fc7\u4e0a\u9762\u5927\u81f4\u7684\u8bb2\u8ff0,\u6211\u73b0\u5728\u8111\u6d77\u91cc\u5c31\u662f\u8fd9\u6837\u4e00\u4e9b\u4e1c\u897f\u6d6e\u73b0;\n\n- TodoList \u7528\u6765\u8868\u793a\u53ef\u89c1\u7684 todo \u5217\u8868\n\t- todos:Array \u5c31\u662f\u4e00\u7ec4 todo \u7684 item, \u5927\u6982\u5185\u5bb9\u5c31\u662f {id,text,completed}.\n\t- onTodoClick(id:number) \u662f\u4e00\u4e2a\u56de\u8c03\u5f53\u4e00\u4e2a todo \u7684 item \u88ab\u70b9\u51fb\u7684\u65f6\u5019.\n\n- Todo \u5c31\u662f\u8868\u793a\u4e00\u4e2a\u5355\u72ec\u7684 todo\n\t- text:string \u5f53\u524d todo \u7684\u5185\u5bb9\n\t- completed:boolean \u5f53\u524d\u662f\u5426\u6807\u8bb0\u4e3a\u5b8c\u6210\n\t- onClick() \u662f\u4e00\u4e2a\u56de\u8c03, \u5f53\u5728 item \u88ab\u70b9\u51fb\u7684\u65f6\u5019\u89e6\u53d1\n\n- Link \u56de\u8c03\u7528\n\t- onClick() link \u5728\u88ab\u70b9\u51fb\u540e\u89e6\u53d1\u7684\u56de\u8c03\n\n- Footer \u7528\u6765\u663e\u793a\u4ec0\u4e48\u72b6\u6001\u7684 toggle\n- App \u5c31\u662f\u5f53\u524d app \u7684\u6839\u5143\u7d20\n\n\u4ed6\u4eec\u5b8c\u5168\u4e0d\u4f9d\u8d56redux, \u5f53\u4f60\u628a redux \u8fc1\u79fb\u5230\u5176\u4ed6\u7684\u6846\u67b6\u4e0a\u65f6, \u8fd9\u4e9b\u4e1c\u897f\u5b8c\u5168\u4e0d\u9700\u8981\u4fee\u6539. \u4ed6\u4eec\u53ea\u662f\u7528\u6765\u6e32\u67d3\u4f60\u60f3\u8981\u5728 UI \u4e0a\u770b\u5230\u7684\u4e1c\u897f\n\n---\n\n#### \u5bb9\u5668\u7ec4\u4ef6\n\n\u5bb9\u5668\u7ec4\u4ef6\u5728\u8fd9\u91cc\u5145\u5f53\u7684\u89d2\u8272\u5c31\u662f\u7528\u5b83\u6765\u8fde\u63a5\u5c55\u793a\u7ec4\u4ef6\u548c redux, \u8ba9redux \u7684\u6570\u80fd\u5bf9\u5e94\u7684\u663e\u793a\u5728\u5c55\u793a\u7ec4\u4ef6\u4e0a. \u6bd4\u5982\u521a\u624d\u5b9a\u4e49\u7684\u5c55\u793a\u7ec4\u4ef6` TodoList` \u7ec4\u4ef6\u5b83\u5c31\u9700\u8981\u4e00\u4e2a\u5bb9\u5668\u6bd4\u5982\u53eb` VisibleTodoList`, \u7136\u540e\u8ba9\u5b83\u8ba2\u9605\u5230` Redux store`\u91cc\u7684\u5f53\u524d\u5bf9\u5e94\u53ef\u89c1\u7684` todo`, \u4e3a\u4e86\u4fee\u6539\u53ef\u89c1\u8fc7\u6ee4\u5668,\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u6bd4\u5982` FilterLink` \u7684\u5bb9\u5668\u6765\u5b8c\u6210\u6e32\u67d3\u4e00\u4e2a`Link` \u6765\u8ba9\u5b83\u5b8c\u6210\u4e00\u4e2a\u52a8\u4f5c\u7684\u89e6\u53d1\u5f53\u70b9\u51fb\u5b83\u7684\u65f6\u5019:\n\n- VisibleTodoList \u901a\u8fc7\u5f53\u524d\u7684\u663e\u793a\u8fc7\u6ee4\u6761\u4ef6\u62ff\u5230 todo list\n- FilterLink \u83b7\u53d6\u5f53\u524d\u7684\u8fc7\u6ee4\u6761\u4ef6\u7136\u540e\u6e32\u67d3\u4e00\u4e2a link\n\t- Filter:string \n\n\n####\u5176\u4ed6\u7ec4\u4ef6\n\n\u6709\u65f6\u5019\u5f88\u96be\u754c\u5b9a\u5b83\u5230\u5e95\u662f\u5c55\u793a\u7ec4\u4ef6\u8fd8\u662f\u5bb9\u5668\u7ec4\u4ef6. \u4f8b\u5982\u6709\u65f6\u5019\u4e00\u4e2a\u8868\u5355\u6216\u8005\u4e00\u4e2a\u51fd\u6570\u4ed6\u4eec\u7cbe\u5bc6\u7684\u7f20\u7ed5,\u5982\n\n- AddTodo \u5c31\u662f\u4e00\u4e2a\u8f93\u5165\u6846\u52a0\u4e00\u4e2a`\u6dfb\u52a0`\u6309\u94ae\n\n\u6280\u672f\u4e0a\u8bb2\u6211\u4eec\u53ef\u4ee5\u628a\u4ed6\u4eec\u5206\u5f00,\u4f46\u662f\u5462\u73b0\u5728\u8fd9\u4e2a\u521d\u7ea7\u9636\u6bb5\u6211\u4eec\u6700\u597d\u628a\u5b83\u6df7\u5408\u5728\u4e00\u8d77. \u56e0\u4e3a\u7ec4\u4ef6\u7684\u903b\u8f91\u4e5f\u4e0d\u662f\u5f88\u9ebb\u70e6, \u968f\u7740 app \u7684\u6210\u957f,\u5982\u4f55\u5206\u5272\u4ed6\u4eec\u5c31\u53d8\u5f97\u8d8a\u6765\u8d8a\u660e\u663e.\n\n\n### \u52a8\u624b\u5b9e\u73b0\u7ec4\u4ef6\n\n\u6211\u4eec\u5148\u4ece`\u5c55\u793a\u7ec4\u4ef6`\u5f00\u59cb,\u56e0\u4e3a\u6211\u4eec\u4e0d\u9700\u8981\u8003\u8651\u5982\u4f55\u548c redux \u8054\u7cfb\u8d77\u6765.\n\n####\u5c55\u793a\u7ec4\u4ef6\n\n\u8fd9\u4e9b\u90fd\u662f\u666e\u901a\u7684 React \u7ec4\u4ef6.\u6211\u4eec\u4e5f\u4e0d\u4f1a\u6d89\u53ca\u592a\u591a,\u5c31\u662f\u5199\u4e00\u4e9b\u65e0\u72b6\u6001\u7684\u7eaf\u51fd\u6570.\n\n\u9664\u975e\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e9b\u672c\u5730\u7684\u72b6\u6001\u6216\u8005\u751f\u547d\u5468\u671f\u7684\u65b9\u6cd5.\u5f53\u7136\u4e5f\u4e0d\u662f\u8bf4\u7ec4\u4ef6\u5fc5\u987b\u662f\u51fd\u6570.\u53ea\u662f\u7528\u51fd\u6570\u7b80\u5355.\n\n\u5982\u4f55\u4f60\u4e4b\u540e\u8bbe\u8ba1\u5230\u672c\u5730\u72b6\u6001,\u751f\u547d\u5468\u671f\u7684\u65b9\u6cd5,\u6216\u8005\u6027\u80fd\u4f18\u5316\u7684\u65f6\u5019\u53ef\u4ee5\u628a\u5b83\u4eec\u5199\u6210`\u7c7b`.\n\n \n```components/Todo.js\n\nimport React, { PropTypes } from 'react'\n// \u5b9a\u4e49\u5355\u4e2a todo \u5bf9\u8c61\n// \u9700\u89813\u4e2a\u53c2\u6570,1 click\u4e8b\u4ef6, 2 \u662f\u5426\u5b8c\u6210, 3 \u663e\u5f0f\u6587\u672c\nconst Todo = ({ onClick, completed, text }) => (\n  <li onClick={onClick} style={{ textDecoration: completed ? 'line-through' : 'none' }} > {text} </li>\n)\n\n// \u9a8c\u8bc13\u4e2a\u53c2\u6570\nTodo.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  completed: PropTypes.bool.isRequired,\n  text: PropTypes.string.isRequired\n}\n\nexport default Todo\n```\n\n\n\n\n```components/TodoList.js\nimport React, { PropTypes } from 'react'\nimport Todo from './Todo'\n\nconst TodoList = ({ todos, onTodoClick }) => (\n  <ul>\n    {todos.map(todo =>\n      <Todo\n        key={todo.id}\n        {...todo}\n        onClick={() => onTodoClick(todo.id)}\n      />\n    )}\n  </ul>\n)\n\nTodoList.propTypes = {\n  todos: PropTypes.arrayOf(PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    completed: PropTypes.bool.isRequired,\n    text: PropTypes.string.isRequired\n  }).isRequired).isRequired,\n  onTodoClick: PropTypes.func.isRequired\n}\n\nexport default TodoList\n```\n\n\n\n```components/link.js\nimport React, { PropTypes } from 'react'\n\nconst Link = ({ active, children, onClick }) => {\n  if (active) {\n    return <span>{children}</span>\n  }\n\n  return (\n    <a href=\"#\"\n       onClick={e => {\n         e.preventDefault()\n         onClick()\n      }}\n    >\n      {children}\n    </a>\n  )\n}\n\nLink.propTypes = {\n  active: PropTypes.bool.isRequired,\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func.isRequired\n}\n\nexport default Link\n```\n\n\n```components/Footer.js\nimport React from 'react'\nimport FilterLink from '../containers/FilterLink'\n\nconst Footer = () => (\n  <p>\n    Show:\n    {\" \"}\n    <FilterLink filter=\"SHOW_ALL\">\n      All\n    </FilterLink>\n    {\", \"}\n    <FilterLink filter=\"SHOW_ACTIVE\">\n      Active\n    </FilterLink>\n    {\", \"}\n    <FilterLink filter=\"SHOW_COMPLETED\">\n      Completed\n    </FilterLink>\n  </p>\n)\n\nexport default Footer\n```\n\n\n\n```components/App.js\nimport React from 'react'\nimport Footer from './Footer'\nimport AddTodo from '../containers/AddTodo'\nimport VisibleTodoList from '../containers/VisibleTodoList'\n\nconst App = () => (\n  <div>\n    <AddTodo />\n    <VisibleTodoList />\n    <Footer />\n  </div>\n)\n\nexport default App\n```\n\n### \u5bb9\u5668\u7ec4\u4ef6\n\n\u73b0\u5728\u662f\u65f6\u5019\u628a\u8fd9\u4e9b\u89c6\u56fe\u7ec4\u4ef6 hook \u5230 redux \u91cc\u901a\u8fc7\u521b\u5efa\u4e00\u4e9b\u5bb9\u5668\u7ec4\u4ef6. \u6280\u672f\u4e0a\u6765\u8bf4, \u4e00\u4e2a\u5bb9\u5668\u7ec4\u4ef6\u5c31\u662f\u4e00\u4e2a React \u7684\u7ec4\u4ef6( component), \u4ed6\u4eec\u901a\u8fc7\u4f7f\u7528` store.subscribe()`\u6765\u8bfb\u53d6` Redux` \u72b6\u6001\u6811\u4e2d\u7684\u90e8\u5206\u72b6\u6001\u6570\u636e,\u7136\u540e\u7ed9\u89c6\u56fe\u7ec4\u4ef6\u7684` props` \u5bf9\u8c61,\u4e4b\u540e\u5c55\u793a\u7684\u8fc7\u7a0b\u548c\u903b\u8f91. \u4f60\u53ef\u4ee5\u624b\u6572\u4e00\u4e2a\u5bb9\u5668\u7ec4\u4ef6, \u4f46\u662f\u4e0d\u5efa\u8bae\u8fd9\u4e48\u505a\u6709\u70b9\u50bb,\u5efa\u8bae\u4f60\u901a\u8fc7\u4f7f\u7528 react redux \u7684\u5e93\u63d0\u4f9b\u7684` connect()` \u51fd\u6570\u6765\u751f\u6210\u8fd9\u4e9b\u5bb9\u5668\u7ec4\u4ef6.\u4ed6\u4eec\u540c\u65f6\u63d0\u4f9b\u4e86\u5f88\u591a\u4f18\u5316\u6765\u9632\u6b62\u91cd\u590d\u6ca1\u7528\u7684\u6e32\u67d3.\n\n \u4e3a\u4e86\u4f7f\u7528` connect()`,\u4f60\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u7279\u6b8a\u7684\u51fd\u6570\u540d\u5b57\u53eb\u505a` mapStateToProps`, \u5b83\u7684\u4f5c\u7528\u5c31\u662f\u544a\u8bc9\u5f53\u524d\u7684 app \u5982\u4f55\u628a redux \u91cc\u7684\u7279\u5b9a\u7684\u72b6\u6001\u7247\u6bb5\u5bf9\u5e94\u5230\u7279\u5b9a\u7ec4\u4ef6\u7684` props` \u5c5e\u6027\u4e0a.\u4e3e\u4e2a\u4f8b\u5b50, `VisibleTodoList` \u9700\u8981\u8ba1\u7b97` todos`, \u628a\u5b83\u4f20\u7ed9` TodoList`. \u6240\u4ee5\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570,\u5b83\u80fd\u591f\u8fc7\u6ee4\u51fa` state.todos`, \u901a\u8fc7` state.visibilityFilter`, \u4e4b\u540e\u5728` mapStateToProps` \u91cc\u662f\u8fd9\u6837\u7684:\n \n```\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case 'SHOW_ALL':\n      return todos\n    case 'SHOW_COMPLETED':\n      return todos.filter(t => t.completed)\n    case 'SHOW_ACTIVE':\n      return todos.filter(t => !t.completed)\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    todos: getVisibleTodos(state.todos, state.visibilityFilter)\n  }\n}\n```\n\n\u9664\u4e86\u8bfb\u53d6 redux \u7684\u72b6\u6001,\u5bb9\u5668\u7ec4\u4ef6\u8fd8\u53ef\u4ee5\u5206\u53d1\u52a8\u4f5c. \u901a\u5e38\u6d41\u884c\u7684\u5199\u6cd5\u662f\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a` mapDispatchToProps()`\u51fd\u6570.\u4ed6\u53ef\u4ee5\u63a5\u6536\u4e00\u4e2a`dispatch()` \u65b9\u6cd5,\u7136\u540e\u8fd4\u56de\u4e00\u4e2a\u56de\u8c03\u53c2\u6570, \u8fd9\u4e2a\u56de\u8c03\u53c2\u6570\u5c31\u662f\u4f60\u60f3\u8981 hook\u5230\u89c6\u56fe\u7ec4\u4ef6\u4e2d\u7684. \u4f8b\u5982, \u6211\u4eec\u60f3\u8981\u628a` VisibleTodoList` \u6ce8\u5165\u4e00\u4e2a` onTodoClick` \u7684\u5c5e\u6027\u5230` TodoList` \u7684\u7ec4\u4ef6.\u800c\u4e14\u8fd9\u4e2a` onTodoClick`\u8fd8\u53ef\u4ee5\u65b9\u6cd5` TOGGLE_TODO` \u7684\u52a8\u4f5c:\n\n```\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onTodoClick: (id) => {\n      dispatch(toggleTodo(id))\n    }\n  }\n}\n```\n\n\u6700\u7ec8,\u6211\u4eec\u901a\u8fc7\u8c03\u7528` connect()` \u4f20\u90122\u4e2a\u53c2\u6570, \u521b\u5efa\u4e86` VisibleTodoList`\u5bf9\u8c61.\n\n```\nimport { connect } from 'react-redux'\n\nconst VisibleTodoList = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n\nexport default VisibleTodoList\n```\n\n\u8fd9\u4e9b\u90fd\u662f React redux \u57fa\u672c\u7684 API, \u4f46\u662f\u8fd8\u6709\u5f88\u591a\u65b9\u4fbf\u597d\u7528\u7684\u65b9\u6cd5\u6240\u4ee5[\u5efa\u8bae\u4f60\u9605\u8bfb\u5b83\u7684\u6587\u6863](https://github.com/reactjs/react-redux),\u5982\u679c\u4f60 \u7ecf\u5e38\u62c5\u5fc3` mapStateToProps`\u521b\u5efa\u65b0\u7684\u5bf9\u8c61,\u4f60\u53ef\u4ee5\u5b66\u4e60[computing derived data](http://redux.js.org/docs/recipes/ComputingDerivedData.html) with [reselect](https://github.com/reactjs/reselect).\n\n\n\u63a5\u4e0b\u6765\u662f\u5168\u90e8\u7684\u5bb9\u5668\u7ec4\u4ef6\u7684\u4ee3\u7801:\n\n\n```containers/FilterLink.js\n\nimport { connect } from 'react-redux'\nimport { setVisibilityFilter } from '../actions'\nimport Link from '../components/Link'\n\nconst mapStateToProps = (state, ownProps) => {\n  return {\n    active: ownProps.filter === state.visibilityFilter\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    onClick: () => {\n      dispatch(setVisibilityFilter(ownProps.filter))\n    }\n  }\n}\n\nconst FilterLink = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Link)\n\nexport default FilterLink\n```\n\n\n\n```containers/VisibleTodoList.js\nimport { connect } from 'react-redux'\nimport { toggleTodo } from '../actions'\nimport TodoList from '../components/TodoList'\n\nconst getVisibleTodos = (todos, filter) => {\n  switch (filter) {\n    case 'SHOW_ALL':\n      return todos\n    case 'SHOW_COMPLETED':\n      return todos.filter(t => t.completed)\n    case 'SHOW_ACTIVE':\n      return todos.filter(t => !t.completed)\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    todos: getVisibleTodos(state.todos, state.visibilityFilter)\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onTodoClick: (id) => {\n      dispatch(toggleTodo(id))\n    }\n  }\n}\n\nconst VisibleTodoList = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n\nexport default VisibleTodoList\n```\n\n###\u5176\u4ed6\u7684\u7ec4\u4ef6\n\n \n```containers/AddTodo.js\n\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { addTodo } from '../actions'\n\nlet AddTodo = ({ dispatch }) => {\n  let input\n\n  return (\n    <div>\n      <form onSubmit={e => {\n        e.preventDefault()\n        if (!input.value.trim()) {\n          return\n        }\n        dispatch(addTodo(input.value))\n        input.value = ''\n      }}>\n        <input ref={node => {\n          input = node\n        }} />\n        <button type=\"submit\">\n          Add Todo\n        </button>\n      </form>\n    </div>\n  )\n}\nAddTodo = connect()(AddTodo)\n\nexport default AddTodo\n```\n\n###\u4f20\u9012 Store\n\n\u6240\u6709\u7684\u5bb9\u5668\u7ec4\u4ef6\u90fd\u80fd\u591f\u8bbf\u95ee Redux \u7684 store, \u6240\u4ee5\u4ed6\u4eec\u53ef\u4ee5\u8ba2\u9605\u5b83. \u6709\u4e2a\u65b9\u6cd5\u5c31\u662f\u53ef\u4ee5\u628a\u5b83\u5f53\u505a\u4e00\u4e2a\u53c2\u6570 prop \u4f20\u9012\u7ed9\u6bcf\u4e00\u4e2a\u5bb9\u5668\u7ec4\u4ef6. \u4f46\u662f\u8fd9\u6837\u5f88\u65e0\u804a,\u4f60\u9700\u8981\u628a\u5b83\u5728\u6240\u6709\u89c6\u56fe\u7ec4\u4ef6\u4e2d\u4f20\u9012?\n\u5c31\u662f\u56e0\u4e3a\u4ed6\u4eec\u5728\u7ec4\u4ef6\u6811\u91cc\u5f88\u6df1\u7684\u4f4d\u7f6e\u54e6.?**\u4e0d\u61c2**\n\n\u6211\u4eec\u63a8\u8350\u7684\u4e00\u4e2a\u65b9\u6cd5\u5c31\u662f\u4f7f\u7528\u4e00\u4e2a\u7279\u6b8a\u7684 react redux \u7ec4\u4ef6\u53eb\u505a` <Provider>`,\u5b83\u53ef\u4ee5\u5f88\u9b54\u6027\u7684\u8ba9 `store `\u53d8\u5f97\u5728\u6240\u6709\u7684\u5bb9\u5668\u7ec4\u4ef6\u4e2d\u53ef\u89c1, \u800c\u4e0d\u9700\u8981\u518d\u53bb\u663e\u793a\u7684\u4f20\u9012\u5b83, \u56e0\u4e3a\u4f60\u53ea\u9700\u8981\u5728\u6839\u7ec4\u4ef6\u91cc\u5f15\u7528\u4e00\u6b21.\n\n\n\n```index.js\n\nimport React from 'react'\nimport { render } from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { createStore } from 'redux'\nimport todoApp from './reducers'\nimport App from './components/App'\n\nlet store = createStore(todoApp)\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n)\n\n```\n\n\u5230\u8fd9\u91cc, \u4e00\u4e2a` todo` app \u4e5f\u5c31\u5b8c\u4e8b\u513f, \u6211\u4eec\u56de\u8fc7\u5934\u6765\u91cd\u65b0\u67e5\u770b\u5b83\u7684\u6e90\u7801, \u5bf9\u6bd4\u4e0a\u9762\u6211\u4eec\u6240\u8bb2\u89e3\u8fc7\u7684\u4e00\u5207. \u518d\u53bb\u611f\u53d7\u5982\u4f55 build \u4e00\u4e2aredux-react app.\n\n-THE END-\n", "tags": ["redux"]}