{"context": "Vue.js Advent Calendar 2016\u300011\u65e5\u76ee\n\n\u307e\u3048\u304c\u304d\nVue.js\u3068\u63cf\u753b\u6a5f\u80fd\u3068d3.js\u306e\u8a08\u7b97\u6a5f\u80fd\u3092\u5408\u308f\u305b\u3066\u6298\u308c\u7dda\u30b0\u30e9\u30d5\u3092\u63cf\u3044\u3066\u307f\u307e\u3059\u3002\nd3.js\u3067\u76f4\u63a5\u63cf\u753b\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067Vue.js\u3067\u5ba3\u8a00\u7684\u306b\u63cf\u3051\u305f\u3089\u306a\u3001\u3068\u3002\n\n\u30c7\u30e2\n\u30c7\u30e2(jsfiddle)\n\n\u30b3\u30fc\u30c9\n\n\u30e1\u30a4\u30f3\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\nhtml\n  <svg :width=\"width\" :height=\"height\" :viewBox=\"viewBox\">\n    <my-line v-for=\"(line,index) in lines\" \n    :x-scale=\"xScale\"\n    :y-scale=\"yScale\"\n    :parameters=\"line\"\n    :index=\"index\"></my-line>\n\n\n    <horizontal-grid v-for=\"y in yTicks\"\n        :x-scale=\"xScale\"\n        :y-scale=\"yScale\"\n        :y=\"y\"\n        :x_max=\"100\"\n    ></horizontal-grid>\n    <vertical-grid v-for=\"x in xTicks\"\n        :x-scale=\"xScale\"\n        :y-scale=\"yScale\"\n        :x=\"x\"\n        :y_max=\"100\"\n    ></vertical-grid>\n  </svg>\n\n\n\njs\nnew Vue({\n  el: '#app',\n  data: function(){\n    return {\n      width:300,\n      height:300,\n      lines:[]\n    }\n  },\n  computed:{\n    viewBox:function(){\n        return '0 0 ' + this.width + ' ' + this.height;\n    },\n    xTicks:function(){\n        return this.xScale.ticks();\n    },\n    yTicks:function(){\n        return this.yScale.ticks();\n    },\n    xScale:function(){\n        return d3.scaleLinear().domain([0,100]).range([0, this.width]);\n    }, \n    yScale:function(y){\n        return d3.scaleLinear().domain([0,100]).range([0, this.height]);\n    }\n  }\n});\n\n\n\n\u30dd\u30a4\u30f3\u30c8\u306fxScale\u3068yScale\u3067\u3057\u3087\u3046\u304b\u3002\nmy-line\u306a\u3069\u306e\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u6e21\u3057\u3066\u30b9\u30b1\u30fc\u30eb\u3092\u5408\u308f\u305b\u3066\u3044\u307e\u3059\u3002\nxTicks\u3068yTicks\u306f\u76ee\u76db\u7dda\u306e\u5024\u3067\u3059\u3002\n\n\u66f2\u7dda\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\nhtml\n <path class=\"line\" :d=\"d\" :style=\"{stroke: myColor}\"></path>\n\n\n\njs\nVue.component('my-line', {\n  template: '#line',\n  props:{\n    parameters:Array,\n    index:Number,\n    xScale:Function,\n    yScale:Function\n  },\n  computed:{\n    d:function(){\n      var xScale = this.xScale;\n      var yScale = this.yScale;\n      var line = d3.line()\n                 .curve(d3.curveMonotoneX)\n                 .x(function(d) {return xScale(d.x); })\n                 .y(function(d) { return yScale(d.y); });\n\n      return line(this.parameters);\n    },\n    myColor:function(){\n        return d3.schemeCategory10[this.index % 10]\n    }\n  }\n});\n\n\n\nd\u5c5e\u6027\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u306d\u3002\n\u624b\u3067\u63cf\u304f\u3068\u3072\u305f\u3059\u3089\u3064\u3089\u3044\u306e\u3067\u3001d3.js\u306e\u6069\u6075\u611f\u3058\u307e\u3059\u3002\n\n\u30b0\u30ea\u30c3\u30c9\u7dda\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\nhtml\n<line :x1=\"0\" :y1=\"yValue\" :x2=\"max\" :y2=\"yValue\" class=\"grid\"></line>\n\n\n\njs\nVue.component('horizontal-grid', {\n  template: '#horizontal-grid',\n  props:{\n    x_max:Number,\n    y:Number,\n    xScale:Function,\n    yScale:Function\n  },\n  computed:{\n    yValue:function(){\n        return this.yScale(this.y);\n    },\n    max:function(){\n        return this.xScale(this.x_max);\n    }\n  }\n})\n\n\n\u6a2a\u7dda\u3092\u63cf\u304f\u3060\u3051\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3067\u3059\u3002\nxScale\u3068yScale\u3092\u53d7\u3051\u53d6\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u89aa\u306ewidth,height\u306e\u5909\u66f4\u306b\u8ffd\u5f93\u3057\u307e\u3059\u3002\n\u7e26\u7dda\u306f\u3053\u308c\u3068\u540c\u3058\u306a\u306e\u3067\u7701\u7565\u3057\u307e\u3059\u3002\n\nTransition\n\u66f2\u7dda\u306e\u5909\u66f4\u306b\u3064\u3044\u3066\u3060\u3051\u306a\u3089\u6b21\u306eCSS\u3067Chrome\u3067\u306f\u52d5\u304d\u307e\u3057\u305f\u3002\nFirefox\u3067\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u52d5\u304d\u307e\u305b\u3093\u3002\u3068\u3044\u3046\u304b\u306a\u305cChrome\u3067\u52d5\u304f\u3093\u3060\u2026\u2026\uff1f\n\ncss\n.line{\n  fill:none;\n  stroke-width: 2px;\n  transition: all 1s;\n}\n\n\n\u8ffd\u52a0/\u524a\u9664\u306e\u5909\u66f4\u306b\u3082\u5bfe\u5fdc\u3059\u308b\u6642\u306ftransition-group\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002\n\u3053\u3061\u3089\u306fVue\u304c-enter\u3068-leave\u306eclass\u3092\u8ffd\u52a0\u3057\u3066\u304f\u308c\u308b\u306e\u3067Firefox,Chrome\u306e\u3069\u3061\u3089\u3082\u52d5\u304d\u307e\u3059\u3002\n\nhtml\n  <transition-group name=\"line\" tag=\"g\">\n    <my-line v-for=\"(line,index) in lines\" \n      :key=\"index\"\n    :x-scale=\"xScale\"\n    :y-scale=\"yScale\"\n    :parameters=\"line\"\n    :index=\"index\"></my-line>\n </transition-group>\n\n\n\ncss\n.line-enter {\n  opacity: 0;\n  transform: translateX(-100px);\n}\n.line-leave-active {\n  opacity: 0;\n  transform: translateX(100px);\n}\n\n\n\n\n\u304a\u308f\u308a\u306b\n\u66f2\u7dda\u306e\u5909\u66f4\u306eTransition\u3092\u3069\u3046\u3057\u305f\u3082\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306a\u2026\u2026\u3002\n\n\u8ffd\u8a18\nsvg\u306eTransition\u306b\u60a9\u3093\u3060\u3051\u3069\u3001\u666e\u901a\u306b\u30ac\u30a4\u30c9\u306b\u66f8\u3044\u3066\u3042\u3063\u305f!\nVue\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u5145\u5b9f\u5177\u5408\u3059\u3052\u3048\u3084!\n\nTweenLite.js\u3092\u4f7f\u3063\u305fsvg\u306etransition\n\u30c7\u30e2(jsfiddle)\n\u66f2\u7dda\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3057\u305f\u3002\n\njs\nVue.component('my-line', {\n  template: '#line',\n  props:{\n    parameters:Array,\n    index:Number,\n    xScale:Function,\n    yScale:Function\n  },\n  data:function(){\n    return {\n      d:this.generateLineD(this.parameters)\n    }\n  },\n  watch:{\n    parameters:{\n      handler:'animateLine',\n      deep:true\n    },\n    xScale:function(){\n      this.animateLine(this.parameters);\n    },\n    yScale:function(){\n      this.animateLine(this.parameters);\n    }\n  },\n  computed:{\n    myColor:function(){\n        return d3.schemeCategory10[this.index % 10]\n    }\n  },\n  methods:{\n    animateLine(parameters){\n       TweenLite.to(\n          this.$data, \n          1, \n          { d: this.generateLineD(parameters) }\n       );\n    },\n    generateLineD(parameters){\n      var xScale = this.xScale;\n      var yScale = this.yScale;\n        var line = d3.line()\n                 .curve(d3.curveMonotoneX)\n                 .x(function(d) {return xScale(d.x); })\n                 .y(function(d) { return yScale(d.y); });\n\n      return line(parameters);\n    }\n  }\n});\n\n\n\nTweetLite.js\u306fObjet\u3084Array\u306e\u5024\u3092\u6307\u5b9a\u3057\u305f\u79d2\u6570\u5185\u3067\u6b21\u7b2c\u306b\u5909\u66f4\u3057\u3066\u304f\u308c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\n\u3053\u308c\u3092\u4f7f\u3063\u305fanimateLine\u30e1\u30bd\u30c3\u30c9\u306fvm.$data.d\u3092\u3058\u308f\u3058\u308f\u66f4\u65b0\u3057\u307e\u3059\u3002\nwatcher\u304b\u3089animateLine\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\u3001\nSVG\u66f2\u7dda\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\n\u304a\u308f\u308a\u306b(\u8ffd\u8a18)\n\u30ac\u30a4\u30c9\u3092\u8aad\u3082\u3046!\nVue.js Advent Calendar 2016\u300011\u65e5\u76ee\n#\u307e\u3048\u304c\u304d\nVue.js\u3068\u63cf\u753b\u6a5f\u80fd\u3068d3.js\u306e\u8a08\u7b97\u6a5f\u80fd\u3092\u5408\u308f\u305b\u3066\u6298\u308c\u7dda\u30b0\u30e9\u30d5\u3092\u63cf\u3044\u3066\u307f\u307e\u3059\u3002\nd3.js\u3067\u76f4\u63a5\u63cf\u753b\u3057\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u306a\u306e\u3067Vue.js\u3067\u5ba3\u8a00\u7684\u306b\u63cf\u3051\u305f\u3089\u306a\u3001\u3068\u3002\n\n#\u30c7\u30e2\n[\u30c7\u30e2(jsfiddle)](https://jsfiddle.net/huigo/2bz2mxb7/5/)\n\n#\u30b3\u30fc\u30c9\n##\u30e1\u30a4\u30f3\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\n```html:html\n  <svg :width=\"width\" :height=\"height\" :viewBox=\"viewBox\">\n    <my-line v-for=\"(line,index) in lines\" \n    :x-scale=\"xScale\"\n    :y-scale=\"yScale\"\n    :parameters=\"line\"\n    :index=\"index\"></my-line>\n\n\n    <horizontal-grid v-for=\"y in yTicks\"\n        :x-scale=\"xScale\"\n        :y-scale=\"yScale\"\n        :y=\"y\"\n        :x_max=\"100\"\n    ></horizontal-grid>\n    <vertical-grid v-for=\"x in xTicks\"\n        :x-scale=\"xScale\"\n        :y-scale=\"yScale\"\n        :x=\"x\"\n        :y_max=\"100\"\n    ></vertical-grid>\n  </svg>\n```\n```js:js\nnew Vue({\n  el: '#app',\n  data: function(){\n    return {\n      width:300,\n      height:300,\n      lines:[]\n    }\n  },\n  computed:{\n    viewBox:function(){\n\t    return '0 0 ' + this.width + ' ' + this.height;\n    },\n    xTicks:function(){\n    \treturn this.xScale.ticks();\n    },\n    yTicks:function(){\n    \treturn this.yScale.ticks();\n    },\n    xScale:function(){\n        return d3.scaleLinear().domain([0,100]).range([0, this.width]);\n    }, \n    yScale:function(y){\n        return d3.scaleLinear().domain([0,100]).range([0, this.height]);\n    }\n  }\n});\n\n```\n\u30dd\u30a4\u30f3\u30c8\u306f`xScale`\u3068`yScale`\u3067\u3057\u3087\u3046\u304b\u3002\n`my-line`\u306a\u3069\u306e\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u6e21\u3057\u3066\u30b9\u30b1\u30fc\u30eb\u3092\u5408\u308f\u305b\u3066\u3044\u307e\u3059\u3002\n`xTicks`\u3068`yTicks`\u306f\u76ee\u76db\u7dda\u306e\u5024\u3067\u3059\u3002\n\n##\u66f2\u7dda\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n```html:html\n <path class=\"line\" :d=\"d\" :style=\"{stroke: myColor}\"></path>\n```\n\n```js:js\nVue.component('my-line', {\n  template: '#line',\n  props:{\n  \tparameters:Array,\n    index:Number,\n    xScale:Function,\n    yScale:Function\n  },\n  computed:{\n    d:function(){\n      var xScale = this.xScale;\n      var yScale = this.yScale;\n      var line = d3.line()\n                 .curve(d3.curveMonotoneX)\n                 .x(function(d) {return xScale(d.x); })\n                 .y(function(d) { return yScale(d.y); });\n                 \n      return line(this.parameters);\n    },\n    myColor:function(){\n    \treturn d3.schemeCategory10[this.index % 10]\n    }\n  }\n});\n\n```\n`d`\u5c5e\u6027\u304c\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u306d\u3002\n\u624b\u3067\u63cf\u304f\u3068\u3072\u305f\u3059\u3089\u3064\u3089\u3044\u306e\u3067\u3001d3.js\u306e\u6069\u6075\u611f\u3058\u307e\u3059\u3002\n\n##\u30b0\u30ea\u30c3\u30c9\u7dda\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\n```html:html\n<line :x1=\"0\" :y1=\"yValue\" :x2=\"max\" :y2=\"yValue\" class=\"grid\"></line>\n```\n```js:js\nVue.component('horizontal-grid', {\n  template: '#horizontal-grid',\n  props:{\n  \tx_max:Number,\n    y:Number,\n    xScale:Function,\n    yScale:Function\n  },\n  computed:{\n  \tyValue:function(){\n    \treturn this.yScale(this.y);\n    },\n    max:function(){\n    \treturn this.xScale(this.x_max);\n    }\n  }\n})\n```\n\u6a2a\u7dda\u3092\u63cf\u304f\u3060\u3051\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3067\u3059\u3002\n`xScale`\u3068`yScale`\u3092\u53d7\u3051\u53d6\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u89aa\u306ewidth,height\u306e\u5909\u66f4\u306b\u8ffd\u5f93\u3057\u307e\u3059\u3002\n\u7e26\u7dda\u306f\u3053\u308c\u3068\u540c\u3058\u306a\u306e\u3067\u7701\u7565\u3057\u307e\u3059\u3002\n\n##Transition\n\u66f2\u7dda\u306e\u5909\u66f4\u306b\u3064\u3044\u3066\u3060\u3051\u306a\u3089\u6b21\u306eCSS\u3067Chrome\u3067\u306f\u52d5\u304d\u307e\u3057\u305f\u3002\nFirefox\u3067\u306f\u6b8b\u5ff5\u306a\u304c\u3089\u52d5\u304d\u307e\u305b\u3093\u3002\u3068\u3044\u3046\u304b\u306a\u305cChrome\u3067\u52d5\u304f\u3093\u3060\u2026\u2026\uff1f\n\n```css:css\n.line{\n  fill:none;\n  stroke-width: 2px;\n  transition: all 1s;\n}\n```\n\u8ffd\u52a0/\u524a\u9664\u306e\u5909\u66f4\u306b\u3082\u5bfe\u5fdc\u3059\u308b\u6642\u306f`transition-group`\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002\n\u3053\u3061\u3089\u306fVue\u304c`-enter`\u3068`-leave`\u306eclass\u3092\u8ffd\u52a0\u3057\u3066\u304f\u308c\u308b\u306e\u3067Firefox,Chrome\u306e\u3069\u3061\u3089\u3082\u52d5\u304d\u307e\u3059\u3002\n\n```html:html\n  <transition-group name=\"line\" tag=\"g\">\n    <my-line v-for=\"(line,index) in lines\" \n      :key=\"index\"\n    :x-scale=\"xScale\"\n    :y-scale=\"yScale\"\n    :parameters=\"line\"\n    :index=\"index\"></my-line>\n </transition-group>\n```\n\n```css:css\n.line-enter {\n  opacity: 0;\n  transform: translateX(-100px);\n}\n.line-leave-active {\n  opacity: 0;\n  transform: translateX(100px);\n}\n\n```\n\n#\u304a\u308f\u308a\u306b\n\u66f2\u7dda\u306e\u5909\u66f4\u306eTransition\u3092\u3069\u3046\u3057\u305f\u3082\u306e\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u306a\u2026\u2026\u3002\n\n#\u8ffd\u8a18\nsvg\u306eTransition\u306b\u60a9\u3093\u3060\u3051\u3069\u3001\u666e\u901a\u306b[\u30ac\u30a4\u30c9](https://jp.vuejs.org/v2/guide/transitioning-state.html)\u306b\u66f8\u3044\u3066\u3042\u3063\u305f!\nVue\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u5145\u5b9f\u5177\u5408\u3059\u3052\u3048\u3084!\n\n##TweenLite.js\u3092\u4f7f\u3063\u305fsvg\u306etransition\n[\u30c7\u30e2(jsfiddle)](https://jsfiddle.net/2bz2mxb7/6/)\n\n\u66f2\u7dda\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u6b21\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3057\u305f\u3002\n\n```js:js\nVue.component('my-line', {\n  template: '#line',\n  props:{\n  \tparameters:Array,\n    index:Number,\n    xScale:Function,\n    yScale:Function\n  },\n  data:function(){\n    return {\n      d:this.generateLineD(this.parameters)\n    }\n  },\n  watch:{\n  \tparameters:{\n      handler:'animateLine',\n      deep:true\n    },\n    xScale:function(){\n      this.animateLine(this.parameters);\n    },\n    yScale:function(){\n      this.animateLine(this.parameters);\n    }\n  },\n  computed:{\n    myColor:function(){\n    \treturn d3.schemeCategory10[this.index % 10]\n    }\n  },\n  methods:{\n    animateLine(parameters){\n       TweenLite.to(\n          this.$data, \n          1, \n          { d: this.generateLineD(parameters) }\n       );\n    },\n    generateLineD(parameters){\n      var xScale = this.xScale;\n      var yScale = this.yScale;\n    \tvar line = d3.line()\n                 .curve(d3.curveMonotoneX)\n                 .x(function(d) {return xScale(d.x); })\n                 .y(function(d) { return yScale(d.y); });\n                 \n      return line(parameters);\n    }\n  }\n});\n\n```\nTweetLite.js\u306fObjet\u3084Array\u306e\u5024\u3092\u6307\u5b9a\u3057\u305f\u79d2\u6570\u5185\u3067\u6b21\u7b2c\u306b\u5909\u66f4\u3057\u3066\u304f\u308c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\n\u3053\u308c\u3092\u4f7f\u3063\u305f`animateLine`\u30e1\u30bd\u30c3\u30c9\u306f`vm.$data.d`\u3092\u3058\u308f\u3058\u308f\u66f4\u65b0\u3057\u307e\u3059\u3002\nwatcher\u304b\u3089`animateLine`\u30e1\u30bd\u30c3\u30c9\u3092\u547c\u3073\u51fa\u3059\u3053\u3068\u3067\u3001\nSVG\u66f2\u7dda\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\n##\u304a\u308f\u308a\u306b(\u8ffd\u8a18)\n\u30ac\u30a4\u30c9\u3092\u8aad\u3082\u3046!\n", "tags": ["vue.js", "d3.js", "JavaScript"]}