{"tags": ["vagrant", "chef", "packer", "docker"], "context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nDocker Toolbox\u304c\u516c\u958b\u3055\u308c\u307e\u3057\u305f\u306d\uff01(\u53c2\u8003)\nDocker\u3044\u3058\u308b\u6a5f\u4f1a\u3082\u5897\u3048\u305f\u306e\u3067\uff0cMac\u306bInstall\u3057\u3066\u307f\u3066Packer\u3067DockerImage\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\uff0e\n\n\u76ee\u7684\nOSX\u4e0a\u3067Chef Cookbook\u306e\u5185\u5bb9\u306eDocker Image\u3092Packer\u3067\u30d3\u30eb\u30c9\u3057\u307e\u3059\uff0e\n\n\u74b0\u5883\n\nOSX 10.10\nDocker Toolbox 1.8.1b\nPacker 0.8.6\n\n\n\u4f5c\u6210\u65b9\u6cd5\n\u57fa\u672c\u7684\u306b\uff0c\u516c\u5f0f\u306eInstallation on Mac OS X\u306b\u5f93\u3063\u3066\u3044\u307e\u3059\uff0e\n\nshell\n$ docker-machine create --driver virtualbox default\nCreating VirtualBox VM...\nCreating SSH key...\nStarting VirtualBox VM...\nStarting VM...\nTo see how to connect Docker to this machine, run: docker-machine env default\n\n$ docker-machine ls\nNAME      ACTIVE   DRIVER       STATE     URL                         SWARM\ndefault   *        virtualbox   Running   tcp://192.168.99.100:2376\n\n$ docker-machine env default\nexport DOCKER_TLS_VERIFY=\"1\"\nexport DOCKER_HOST=\"tcp://192.168.99.100:2376\"\nexport DOCKER_CERT_PATH=\"/Users/kazutaka/.docker/machine/machines/default\"\nexport DOCKER_MACHINE_NAME=\"default\"\n# Run this command to configure your shell:\n# eval \"$(docker-machine env default)\"\n\n$ eval \"$(docker-machine env default)\"\n\n$ docker run hello-world\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\n\n\n\u4ee5\u4e0a\u3067\uff0cdocker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3067\u3059\uff0e\n\u6b21\u306bpacker\u3092\u4f7f\u3063\u3066docker image\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0eOSX\u4e0a\u3067\u306f\uff0cDocker Client\u304c\u30d0\u30b0\u306e\u305f\u3081\u3046\u307e\u304f\u9023\u643a\u3067\u304d\u306a\u3044\u3068\u3042\u308a\u307e\u3059\u304c\uff0c\u305d\u306e\u89e3\u6c7a\u65b9\u6cd5\u304cgithub issues\u306b\u3042\u3063\u305f\u305f\u3081\uff0c\u305d\u308c\u3092\u5229\u7528\u3059\u308b\u3068\u7121\u4e8b\u9023\u643a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff0e\n\nshell\n$ make ~/tmp\n$ export TMPDIR=~/tmp\n$ packer build machine_chef.json\n$ docker-machine ssh default\n$ docker images\n\n\nTMPDIR\u306e\u5834\u6240\u3092\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u307f\u305f\u3044\u3067\u3059\u306d\uff01\u79c1\u306e\u74b0\u5883\u3067\u306f\uff0c\u3053\u308c\u3067\u7121\u4e8bOSX\u4e0a\u3067docker image\u3092\u3064\u304f\u308b\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\n\nReference\n\nPacker\u3092\u4f7f\u3063\u3066Chef/Puppet/Ansible\u3067Docker\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u3064\u304f\u308b\n\n\n\u306f\u3058\u3081\u306b\n=======\nDocker Toolbox\u304c\u516c\u958b\u3055\u308c\u307e\u3057\u305f\u306d\uff01([\u53c2\u8003](http://pocketstudio.jp/log3/2015/08/13/docker-1-8/))\nDocker\u3044\u3058\u308b\u6a5f\u4f1a\u3082\u5897\u3048\u305f\u306e\u3067\uff0cMac\u306bInstall\u3057\u3066\u307f\u3066Packer\u3067DockerImage\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\uff0e\n\n\n\u76ee\u7684\n---\nOSX\u4e0a\u3067Chef Cookbook\u306e\u5185\u5bb9\u306eDocker Image\u3092Packer\u3067\u30d3\u30eb\u30c9\u3057\u307e\u3059\uff0e\n\n\n\u74b0\u5883\n---\n- OSX 10.10\n- Docker Toolbox 1.8.1b\n- Packer 0.8.6\n\n\u4f5c\u6210\u65b9\u6cd5\n-------\n\u57fa\u672c\u7684\u306b\uff0c\u516c\u5f0f\u306e[Installation on Mac OS X](http://docs.docker.com/installation/mac/)\u306b\u5f93\u3063\u3066\u3044\u307e\u3059\uff0e\n\n```sh:shell\n$ docker-machine create --driver virtualbox default\nCreating VirtualBox VM...\nCreating SSH key...\nStarting VirtualBox VM...\nStarting VM...\nTo see how to connect Docker to this machine, run: docker-machine env default\n\n$ docker-machine ls\nNAME      ACTIVE   DRIVER       STATE     URL                         SWARM\ndefault   *        virtualbox   Running   tcp://192.168.99.100:2376\n\n$ docker-machine env default\nexport DOCKER_TLS_VERIFY=\"1\"\nexport DOCKER_HOST=\"tcp://192.168.99.100:2376\"\nexport DOCKER_CERT_PATH=\"/Users/kazutaka/.docker/machine/machines/default\"\nexport DOCKER_MACHINE_NAME=\"default\"\n# Run this command to configure your shell:\n# eval \"$(docker-machine env default)\"\n\n$ eval \"$(docker-machine env default)\"\n\n$ docker run hello-world\nUnable to find image 'hello-world:latest' locally\nlatest: Pulling from library/hello-world\n```\n\n\u4ee5\u4e0a\u3067\uff0cdocker\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u5b8c\u4e86\u3067\u3059\uff0e\n\u6b21\u306bpacker\u3092\u4f7f\u3063\u3066docker image\u3092\u4f5c\u6210\u3057\u307e\u3059\uff0eOSX\u4e0a\u3067\u306f\uff0cDocker Client\u304c\u30d0\u30b0\u306e\u305f\u3081\u3046\u307e\u304f\u9023\u643a\u3067\u304d\u306a\u3044\u3068\u3042\u308a\u307e\u3059\u304c\uff0c\u305d\u306e\u89e3\u6c7a\u65b9\u6cd5\u304c[github issues](https://github.com/mitchellh/packer/issues/901)\u306b\u3042\u3063\u305f\u305f\u3081\uff0c\u305d\u308c\u3092\u5229\u7528\u3059\u308b\u3068\u7121\u4e8b\u9023\u643a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff0e\n\n```sh:shell\n$ make ~/tmp\n$ export TMPDIR=~/tmp\n$ packer build machine_chef.json\n$ docker-machine ssh default\n$ docker images\n```\n\nTMPDIR\u306e\u5834\u6240\u3092\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u307f\u305f\u3044\u3067\u3059\u306d\uff01\u79c1\u306e\u74b0\u5883\u3067\u306f\uff0c\u3053\u308c\u3067\u7121\u4e8bOSX\u4e0a\u3067docker image\u3092\u3064\u304f\u308b\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\n\n\n### Reference\n- [Packer\u3092\u4f7f\u3063\u3066Chef/Puppet/Ansible\u3067Docker\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u3064\u304f\u308b](http://deeeet.com/writing/2014/03/02/build-docker-image-by-packer/)\n"}