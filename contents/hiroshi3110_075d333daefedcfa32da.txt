{"context": " More than 1 year has passed since last update.brew install nginx\n\n\u901a\u5e38\u306f nginx start, nginx stop \u3067 daemon \u3092\u8d77\u52d5/\u505c\u6b62\u3059\u308b\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\u30c7\u30d0\u30c3\u30b0\u7528\u9014\u3060\u3068\u305d\u308c\u306f\u9b31\u9676\u3057\u3044\u306e\u3067\u3001 foreground \u3067\u8d77\u52d5\u3057\u3066 C-c \u3067\u7d42\u4e86\nsudo nginx -g \"daemon off; master_process off;\"\n\n\u305d\u306e\u307e\u307e\u3060\u3068\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u306a\u3044\u306e\u3067\u3001\n\n/usr/local/etc/nginx/nginx.conf\nerror_log /dev/stderr;\nhttp {\n  access_log /dev/stdout;\n}\n\n\n\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\nmkdir /usr/local/etc/nginx/ssl && cd $_\nopenssl genrsa -des3 -out server.key 1024 # \u3042\u3068\u3067\u524a\u9664\u3059\u308b\u306e\u3067\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306f\u9069\u5f53\nopenssl req -new -key server.key -out server.csr # \u30c6\u30b9\u30c8\u76ee\u7684\u306a\u306e\u3067\u8a2d\u5b9a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067OK\ncp server.key server.key.org\nopenssl rsa -in server.key.org -out server.key # \u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u3092\u524a\u9664\nsudo openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\n\nreverse proxy \u8a2d\u5b9a\u306e\u4f8b\n\n/usr/local/etc/nginx/nginx.conf\n    server {\n        listen 80;\n        listen 443 ssl;\n        server_name hoge.example.com;\n        location / {\n            proxy_pass https://localhost:3000/;\n            proxy_set_header X-Forwarded-Host $host;\n            proxy_set_header X-Forwarded-Server $host;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n        ssl on;\n        ssl_certificate /usr/local/etc/nginx/ssl/server.crt;\n        ssl_certificate_key /usr/local/etc/nginx/ssl/server.key;\n    }\n\n\n\n/etc/hosts\n127.0.0.1        hoge.example.com\n\n\n\n\u53c2\u8003\u30ea\u30bd\u30fc\u30b9\n\nHow To Create a SSL Certificate on nginx for Ubuntu 12.04 | DigitalOcean\nConfiguring HTTPS servers - nginx\n\n```shell-session\nbrew install nginx\n```\n\n\u901a\u5e38\u306f `nginx start`, `nginx stop` \u3067 daemon \u3092\u8d77\u52d5/\u505c\u6b62\u3059\u308b\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001\u30c7\u30d0\u30c3\u30b0\u7528\u9014\u3060\u3068\u305d\u308c\u306f\u9b31\u9676\u3057\u3044\u306e\u3067\u3001 foreground \u3067\u8d77\u52d5\u3057\u3066 `C-c` \u3067\u7d42\u4e86\n\n```shell-session\nsudo nginx -g \"daemon off; master_process off;\"\n```\n\n\u305d\u306e\u307e\u307e\u3060\u3068\u30ed\u30b0\u304c\u51fa\u529b\u3055\u308c\u306a\u3044\u306e\u3067\u3001\n\n```nginx:/usr/local/etc/nginx/nginx.conf\nerror_log /dev/stderr;\nhttp {\n  access_log /dev/stdout;\n}\n```\n\n\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\n\n```shell-session\nmkdir /usr/local/etc/nginx/ssl && cd $_\nopenssl genrsa -des3 -out server.key 1024 # \u3042\u3068\u3067\u524a\u9664\u3059\u308b\u306e\u3067\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u306f\u9069\u5f53\nopenssl req -new -key server.key -out server.csr # \u30c6\u30b9\u30c8\u76ee\u7684\u306a\u306e\u3067\u8a2d\u5b9a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067OK\ncp server.key server.key.org\nopenssl rsa -in server.key.org -out server.key # \u9375\u306e\u30d1\u30b9\u30d5\u30ec\u30fc\u30ba\u3092\u524a\u9664\nsudo openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt\n```\n\nreverse proxy \u8a2d\u5b9a\u306e\u4f8b\n\n```nginx:/usr/local/etc/nginx/nginx.conf\n    server {\n        listen 80;\n        listen 443 ssl;\n        server_name hoge.example.com;\n        location / {\n            proxy_pass https://localhost:3000/;\n            proxy_set_header X-Forwarded-Host $host;\n            proxy_set_header X-Forwarded-Server $host;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n        ssl on;\n        ssl_certificate /usr/local/etc/nginx/ssl/server.crt;\n        ssl_certificate_key /usr/local/etc/nginx/ssl/server.key;\n    }\n```\n\n```:/etc/hosts\n127.0.0.1        hoge.example.com\n```\n\n## \u53c2\u8003\u30ea\u30bd\u30fc\u30b9\n- [How To Create a SSL Certificate on nginx for Ubuntu 12.04 | DigitalOcean](  https://www.digitalocean.com/community/articles/how-to-create-a-ssl-certificate-on-nginx-for-ubuntu-12-04)\n- [Configuring HTTPS servers - nginx](http://nginx.org/en/docs/http/configuring_https_servers.html#single_http_https_server)", "tags": ["nginx", "MacOSX", "homebrew", "hosts", "boilerplate"]}