{"context": " More than 1 year has passed since last update.GYAO\u306e\u7a93\u969b\u30a8\u30f3\u30b8\u30cb\u30a2\u3000\u7389\u5229\u3067\u3059\u3002\n\u793e\u5185\u3092\u6b69\u3044\u3066\u3044\u305f\u3089\u300cExcel\u4f5c\u696d\u30c8\u30e9\u30d6\u30eb\u304c\u591a\u3044\u304b\u3089\u3001\u65b0\u3057\u3044\u30c1\u30a7\u30c3\u30af\u4f5c\u696d\u3092\u8ffd\u52a0\u3067\u304a\u9858\u3044\u3059\u308b\u300d\u3068\u3044\u3046\u3044\u3064\u3082\u306e\u6d41\u308c\u3092\u30c1\u30e9\u30ea\u3068\u805e\u3044\u3066\u3057\u307e\u3044\u3001\u4ed6\u6240\u306e\u90e8\u7f72\u306e\u8a71\u306a\u304c\u3089\u306a\u3093\u3068\u304b\u4f4e\u30b3\u30b9\u30c8\u3067\u89e3\u6c7a\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u7acb\u3061\u307e\u3057\u305f\u3002\n\u7c21\u5358\u306a\u7a81\u5408\u306e\u4ed5\u7d44\u307f\u3092\u5b9f\u73fe\u3059\u308b\u306e\u306b\u3001Couchbase\u306b\u30de\u30b9\u30bf\u306b\u306a\u308b\u30c7\u30fc\u30bf\u3092\u7f6e\u3044\u3066\u304a\u304d\u3001\u30d3\u30b8\u30cd\u30b9\u7528\u306eRails\u30a2\u30d7\u30ea\u304b\u3089\u53e9\u3044\u3066\u4e0d\u6574\u5408\u3092\u81ea\u52d5\u3067\u691c\u51fa\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u3060\u305d\u306e\u30a2\u30d7\u30ea\u306f\u958b\u767a\u4e2d\u306a\u306e\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u306e\u306f\u6700\u521d\u304b\u3089\u60f3\u5b9a\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30c0\u30e1\u3067\u3059\u3002\n\u305d\u3093\u306a\u306eSAP\u3068\u304bOracle EBS\u3068\u304bNetsuite\u307f\u305f\u3044\u306aERP\u5165\u308c\u3061\u307e\u3048\u3070\u4e00\u6c17\u306b\u89e3\u6c7a\u3059\u308b\u3060\u308d\u3001\u5bc4\u3089\u3070\u5927\u6a39\u306e\u9670\u3060\u308d\u3063\u3066\u3044\u3046\u30c4\u30c3\u30b3\u30df\u304c\u6a2a\u304b\u3089\u304f\u308b\u306e\u3067\u3059\u304c\u3001\u79c1\u3060\u3063\u3066\u30d9\u30b9\u30c8\u306a\u65b9\u6cd5\u3068\u601d\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u79c1\u304c\u5e2b\u5320\u3068\u52dd\u624b\u306b\u5d07\u3081\u3066\u3044\u308b\u3001\u3073\u30fc\u3048\u3059\u3067\u3043\u30fc\u65e5\u8a8c\u306eCandy\u5e2b\u5320\u306f\u3001\u300c3\u5206\u7bc0\u7d04\u3059\u308b\u305f\u3081\u306b2\u6642\u9593\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u306e\u30c0\u300d\u3068\u304a\u3063\u3057\u3083\u3063\u3066\u305f\u306e\u3067\u3001\u30c1\u30ea\u3082\u7a4d\u3082\u308c\u3070\u5c71\u3068\u306a\u308b\u3068\u4fe1\u3058\u307e\u3057\u3087\u3046\u3002\n\n\u3084\u3063\u3066\u307f\u308b\n\u624b\u5143\u306e\u30b5\u30fc\u30d0\u306bRuby on Rails\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u304b\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a66\u3059\u3002\nCouchbase\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3001repo\u60c5\u5831\u8ffd\u52a0\nsudo vim /etc/yum.repos.d/couchbase.repo\n\n[couchbase]\nenabled = 1\nname = Couchbase package repository\nbaseurl = http://packages.couchbase.com/rpm/6.2/x86_64\ngpgcheck = 1\ngpgkey = http://packages.couchbase.com/rpm/couchbase-rpm.key\n\ncouchbase\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5168\u90e8\u5165\u308a\u3067\u653e\u308a\u8fbc\u3080\u3002\nsudo yum install libcouchbase-devel libcouchbase2-core libcouchbase2-bin libcouchbase2-libevent libcouchbase2-libev\ngem i couchbase\n\n\u3053\u308c\u3067couchbase\u304c\u5229\u7528\u53ef\u80fd\u306b\u306a\u3063\u305f\u306f\u305a\u3002\nhttps://github.com/couchbase/couchbase-ruby-client\u3000\u306e\u30e6\u30fc\u30b6\u30fc\u30ac\u30a4\u30c9\u3092\u898b\u306a\u304c\u3089\u3059\u3059\u3081\u308b\nrails new testapp \u3057\u3066\u3001gemfile\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\ngem 'couchbase'\nbundle install\n\n\u8a66\u3057\u306brails console\u304b\u3089\u53e9\u3044\u3066\u307f\u308b\u3002\u3064\u306a\u304c\u3063\u305f\u3002\n[btamari@btamari01 testapp]$ rails c\nLoading development environment (Rails 4.2.4)\nirb(main):001:0> require 'couchbase'\n=> false\nirb(main):002:0> c = Couchbase.connect\n=> #<Couchbase::Bucket:0x007f9b4ecd76e8 \"http://localhost:8091/pools/default/buckets/default/\" transcoder=Couchbase::Transcoder::Document, default_flags=0x0, quiet=false, connected=true, timeout=2500000, bootstrap_transport=:http>\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fdefault\u30d0\u30b1\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u3066\u3044\u308b\u3002get/set\u304c\u3067\u304d\u308b\u3002ttl\u3067\u30e9\u30a4\u30d5\u30bf\u30a4\u30e0\u3082\u8a2d\u5b9a\u53ef\u80fd\u3002\nc.set(\"foo\", \"bar\", :flags => 0x1000, :ttl => 30, :format => :plain)\nc.set(\"hoge\", \"huga\", :flags => 0x1000, :ttl => 30, :format => :plain)\n\nirb(main):045:0> c.get(\"hoge\")\n=> \"huga\"\nirb(main):046:0> c.get(\"foo\")\n=> \"bar\"\n\n:ttl => 30\u3092\u8a2d\u5b9a\u3057\u305f\u306e\u3067\u300130\u79d2\u5f85\u3064\u3068\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u3066\u3044\u3066\u3001No Method error\u304c\u304b\u3048\u3063\u3066\u304f\u308b\u3002 \u3059\u3070\u3089\u3057\u3044\uff57\n\u4ee5\u524d\u306e\u30ef\u30fc\u30ad\u30f3\u30b0\u30b7\u30e7\u30c3\u30d7\u3067\u4f5c\u3063\u305fwork\u30d0\u30b1\u30c3\u30c8\u306b\u63a5\u7d9a\u3002\ncouchbase console\u306eBucket\u306e\u30a2\u30b3\u30fc\u30c7\u30a3\u30aa\u30f3\u3092\u958b\u304d\u3001[Edit] \u753b\u9762\u306epassword\u3067\u3001\u8a8d\u8a3c\u60c5\u5831\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u306a\u3055\u6c17\u3067\u3059\uff09\u3092\u8a2d\u5b9a\u3057\u305f\u4e0a\u3067connect\u30e1\u30bd\u30c3\u30c9\u3092\u53e9\u304d\u307e\u3059\u3002\nd = Couchbase.connect(:bucket => \"work\", :username => \"work\", :password => \"\u4efb\u610f\u30d1\u30b9\u30ef\u30fc\u30c9\")\nd.get(\"1\")\n\n\u5b9f\u884c\u7d50\u679c\n\nirb(main):070:0* d = Couchbase.connect(:bucket => \"work\", :username => \"work\", :password => \"himitsu\")\n=> #<Couchbase::Bucket:0x007f9b4f1260f0 \"http://localhost:8091/pools/default/buckets/work/\" transcoder=Couchbase::Transcoder::Document, default_flags=0x0, quiet=false, connected=true, timeout=2500000, bootstrap_transport=:http>\n\nKey = 1 \u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\nirb(main):071:0>key1 = d.get(\"1\")\n=> {\"appKey\"=>\"MTQyMDAzODkzMg==\", \"name\"=>\"\u3048\u3064\u30de\u30de\", \"gender\"=>\"2\", \"prefecture\"=>\"\u3046\u3069\u3093\u770c\", \"age\"=>\"3\", \"timestamp\"=>1420038932, \"clubNumber\"=>\"211671\", \"comments\"=>[{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]}\n\nkey1\u306e\u69cb\u9020\u3092\u78ba\u8a8d\u3059\u308b\u3002hash\u306b\u683c\u7d0d\u3055\u308c\u3066\u307e\u3059\u3002\nirb(main):084:0> key1.class\n=> Hash\nirb(main):094:0> key1.each do |value|\nirb(main):095:1* p value\nirb(main):096:1> end\n[\"appKey\", \"MTQyMDAzODkzMg==\"]\n[\"name\", \"\u3048\u3064\u30de\u30de\"]\n[\"gender\", \"2\"]\n[\"prefecture\", \"\u3046\u3069\u3093\u770c\"]\n[\"age\", \"3\"]\n[\"timestamp\", 1420038932]\n[\"clubNumber\", \"211671\"]\n[\"comments\", [{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]]\n=> {\"appKey\"=>\"MTQyMDAzODkzMg==\", \"name\"=>\"\u3048\u3064\u30de\u30de\", \"gender\"=>\"2\", \"prefecture\"=>\"\u3046\u3069\u3093\u770c\", \"age\"=>\"3\", \"timestamp\"=>1420038932, \"clubNumber\"=>\"211671\", \"comments\"=>[{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]}\n\n\u8981\u7d20\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306bhash\u3067\u53d6\u308c\u307e\u3059\u3002\nirb(main):100:0> print(key1[\"name\"])\n\u3048\u3064\u30de\u30de=> nil\nirb(main):101:0> print(key1[\"appKey\"])\nMTQyMDAzODkzMg===> nil\nirb(main):102:0> print(key1[\"comments\"])\n[{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]=> nil\n\n\u554f\u984c\u306f\u3001\u30cd\u30b9\u30c8\u3055\u308c\u305f\u5148\u3092\u3069\u3046\u53d6\u308b\u304b\u3002\u3002\u3002\u3002\u914d\u5217\u7684\u306b\u306f8\u500b\u3068\u51fa\u3066\u3044\u308b\u306e\u3067\u3001\u3055\u3089\u306b\u5206\u89e3\u3057\u3066\u53d6\u308a\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nHash\u3067\u53d6\u3063\u305f\u305d\u306e\u5148\u306f\u3001Array\u3067\u3057\u305f\u3002\nirb(main):117:0> comments.class\n=> Array\n\nirb(main):118:0> comments[0]\n=> {\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}\n\n\u305d\u3057\u3066\u3001\u66f4\u306b\u305d\u306e\u5148\u306fHash\u3067\u3057\u305f(\u7b11)\nirb(main):121:0> comment = comments[0]\n=> {\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}\nirb(main):122:0> comment.class\n=> Hash\n\n=> Hash\nirb(main):123:0> comment[\"id\"]\n=> \"265\"\nirb(main):124:0> comment[\"comment\"]\n=> \"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"\n\n\u3068\u308a\u3042\u3048\u305a\u3001\u6700\u4f4e\u9650\u306eKey/Value\u304c\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u3092\u7a81\u3063\u8fbc\u3093\u3067\u884c\u304f\u3053\u3068\u306b\u3057\u307e\u3059\uff08\u3064\u3065\u304f\u304b\u3082\uff09\nActiveRecord\u3067\u304c\u3064\u3063\u3068\u691c\u7d22\u3057\u305f\u3044\u3093\u3060\u3051\u3069\u306a\u3002\u3002\u3002\nGYAO\u306e\u7a93\u969b\u30a8\u30f3\u30b8\u30cb\u30a2\u3000\u7389\u5229\u3067\u3059\u3002\n\n\u793e\u5185\u3092\u6b69\u3044\u3066\u3044\u305f\u3089\u300cExcel\u4f5c\u696d\u30c8\u30e9\u30d6\u30eb\u304c\u591a\u3044\u304b\u3089\u3001\u65b0\u3057\u3044\u30c1\u30a7\u30c3\u30af\u4f5c\u696d\u3092\u8ffd\u52a0\u3067\u304a\u9858\u3044\u3059\u308b\u300d\u3068\u3044\u3046\u3044\u3064\u3082\u306e\u6d41\u308c\u3092\u30c1\u30e9\u30ea\u3068\u805e\u3044\u3066\u3057\u307e\u3044\u3001\u4ed6\u6240\u306e\u90e8\u7f72\u306e\u8a71\u306a\u304c\u3089\u306a\u3093\u3068\u304b\u4f4e\u30b3\u30b9\u30c8\u3067\u89e3\u6c7a\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u7acb\u3061\u307e\u3057\u305f\u3002\n\n\u7c21\u5358\u306a\u7a81\u5408\u306e\u4ed5\u7d44\u307f\u3092\u5b9f\u73fe\u3059\u308b\u306e\u306b\u3001Couchbase\u306b\u30de\u30b9\u30bf\u306b\u306a\u308b\u30c7\u30fc\u30bf\u3092\u7f6e\u3044\u3066\u304a\u304d\u3001\u30d3\u30b8\u30cd\u30b9\u7528\u306eRails\u30a2\u30d7\u30ea\u304b\u3089\u53e9\u3044\u3066\u4e0d\u6574\u5408\u3092\u81ea\u52d5\u3067\u691c\u51fa\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u307e\u3060\u305d\u306e\u30a2\u30d7\u30ea\u306f\u958b\u767a\u4e2d\u306a\u306e\u3067\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u306e\u306f\u6700\u521d\u304b\u3089\u60f3\u5b9a\u3057\u3066\u304a\u304b\u306a\u3044\u3068\u30c0\u30e1\u3067\u3059\u3002\n\n\u305d\u3093\u306a\u306eSAP\u3068\u304bOracle EBS\u3068\u304bNetsuite\u307f\u305f\u3044\u306aERP\u5165\u308c\u3061\u307e\u3048\u3070\u4e00\u6c17\u306b\u89e3\u6c7a\u3059\u308b\u3060\u308d\u3001\u5bc4\u3089\u3070\u5927\u6a39\u306e\u9670\u3060\u308d\u3063\u3066\u3044\u3046\u30c4\u30c3\u30b3\u30df\u304c\u6a2a\u304b\u3089\u304f\u308b\u306e\u3067\u3059\u304c\u3001\u79c1\u3060\u3063\u3066\u30d9\u30b9\u30c8\u306a\u65b9\u6cd5\u3068\u601d\u3063\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n\u79c1\u304c\u5e2b\u5320\u3068\u52dd\u624b\u306b\u5d07\u3081\u3066\u3044\u308b\u3001[\u3073\u30fc\u3048\u3059\u3067\u3043\u30fc\u65e5\u8a8c](http://www.bsddiary.net/)\u306eCandy\u5e2b\u5320\u306f\u3001\u300c3\u5206\u7bc0\u7d04\u3059\u308b\u305f\u3081\u306b2\u6642\u9593\u3067\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u306e\u30c0\u300d\u3068\u304a\u3063\u3057\u3083\u3063\u3066\u305f\u306e\u3067\u3001\u30c1\u30ea\u3082\u7a4d\u3082\u308c\u3070\u5c71\u3068\u306a\u308b\u3068\u4fe1\u3058\u307e\u3057\u3087\u3046\u3002\n\n## \u3084\u3063\u3066\u307f\u308b\n\n\u624b\u5143\u306e\u30b5\u30fc\u30d0\u306bRuby on Rails\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3057\u3066\u304b\u3089\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a66\u3059\u3002\n\n\nCouchbase\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3088\u3046\u306b\u3001repo\u60c5\u5831\u8ffd\u52a0\n\n```\nsudo vim /etc/yum.repos.d/couchbase.repo\n```\n\n```\n[couchbase]\nenabled = 1\nname = Couchbase package repository\nbaseurl = http://packages.couchbase.com/rpm/6.2/x86_64\ngpgcheck = 1\ngpgkey = http://packages.couchbase.com/rpm/couchbase-rpm.key\n```\n\ncouchbase\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u5168\u90e8\u5165\u308a\u3067\u653e\u308a\u8fbc\u3080\u3002\n\n```\nsudo yum install libcouchbase-devel libcouchbase2-core libcouchbase2-bin libcouchbase2-libevent libcouchbase2-libev\ngem i couchbase\n```\n\n\u3053\u308c\u3067couchbase\u304c\u5229\u7528\u53ef\u80fd\u306b\u306a\u3063\u305f\u306f\u305a\u3002\nhttps://github.com/couchbase/couchbase-ruby-client\u3000\u306e\u30e6\u30fc\u30b6\u30fc\u30ac\u30a4\u30c9\u3092\u898b\u306a\u304c\u3089\u3059\u3059\u3081\u308b\n\nrails new testapp \u3057\u3066\u3001gemfile\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\n\n```\ngem 'couchbase'\nbundle install\n```\n\n\u8a66\u3057\u306brails console\u304b\u3089\u53e9\u3044\u3066\u307f\u308b\u3002\u3064\u306a\u304c\u3063\u305f\u3002\n\n```\n[btamari@btamari01 testapp]$ rails c\nLoading development environment (Rails 4.2.4)\nirb(main):001:0> require 'couchbase'\n=> false\nirb(main):002:0> c = Couchbase.connect\n=> #<Couchbase::Bucket:0x007f9b4ecd76e8 \"http://localhost:8091/pools/default/buckets/default/\" transcoder=Couchbase::Transcoder::Document, default_flags=0x0, quiet=false, connected=true, timeout=2500000, bootstrap_transport=:http>\n```\n\n \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fdefault\u30d0\u30b1\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u3066\u3044\u308b\u3002get/set\u304c\u3067\u304d\u308b\u3002ttl\u3067\u30e9\u30a4\u30d5\u30bf\u30a4\u30e0\u3082\u8a2d\u5b9a\u53ef\u80fd\u3002\n\n```\nc.set(\"foo\", \"bar\", :flags => 0x1000, :ttl => 30, :format => :plain)\nc.set(\"hoge\", \"huga\", :flags => 0x1000, :ttl => 30, :format => :plain)\n\nirb(main):045:0> c.get(\"hoge\")\n=> \"huga\"\nirb(main):046:0> c.get(\"foo\")\n=> \"bar\"\n```\n \n:ttl => 30\u3092\u8a2d\u5b9a\u3057\u305f\u306e\u3067\u300130\u79d2\u5f85\u3064\u3068\u30c7\u30fc\u30bf\u304c\u6d88\u3048\u3066\u3044\u3066\u3001No Method error\u304c\u304b\u3048\u3063\u3066\u304f\u308b\u3002 \u3059\u3070\u3089\u3057\u3044\uff57\n\n\u4ee5\u524d\u306e\u30ef\u30fc\u30ad\u30f3\u30b0\u30b7\u30e7\u30c3\u30d7\u3067\u4f5c\u3063\u305fwork\u30d0\u30b1\u30c3\u30c8\u306b\u63a5\u7d9a\u3002\ncouchbase console\u306eBucket\u306e\u30a2\u30b3\u30fc\u30c7\u30a3\u30aa\u30f3\u3092\u958b\u304d\u3001[Edit] \u753b\u9762\u306epassword\u3067\u3001\u8a8d\u8a3c\u60c5\u5831\u8a2d\u5b9a\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u306a\u3055\u6c17\u3067\u3059\uff09\u3092\u8a2d\u5b9a\u3057\u305f\u4e0a\u3067connect\u30e1\u30bd\u30c3\u30c9\u3092\u53e9\u304d\u307e\u3059\u3002\n\n```\nd = Couchbase.connect(:bucket => \"work\", :username => \"work\", :password => \"\u4efb\u610f\u30d1\u30b9\u30ef\u30fc\u30c9\")\nd.get(\"1\")\n```\n \n\u5b9f\u884c\u7d50\u679c\n```\nirb(main):070:0* d = Couchbase.connect(:bucket => \"work\", :username => \"work\", :password => \"himitsu\")\n=> #<Couchbase::Bucket:0x007f9b4f1260f0 \"http://localhost:8091/pools/default/buckets/work/\" transcoder=Couchbase::Transcoder::Document, default_flags=0x0, quiet=false, connected=true, timeout=2500000, bootstrap_transport=:http>\n```\n\nKey = 1 \u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\nirb(main):071:0>key1 = d.get(\"1\")\n=> {\"appKey\"=>\"MTQyMDAzODkzMg==\", \"name\"=>\"\u3048\u3064\u30de\u30de\", \"gender\"=>\"2\", \"prefecture\"=>\"\u3046\u3069\u3093\u770c\", \"age\"=>\"3\", \"timestamp\"=>1420038932, \"clubNumber\"=>\"211671\", \"comments\"=>[{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]}\n```\n \nkey1\u306e\u69cb\u9020\u3092\u78ba\u8a8d\u3059\u308b\u3002hash\u306b\u683c\u7d0d\u3055\u308c\u3066\u307e\u3059\u3002\n\n```\nirb(main):084:0> key1.class\n=> Hash\nirb(main):094:0> key1.each do |value|\nirb(main):095:1* p value\nirb(main):096:1> end\n[\"appKey\", \"MTQyMDAzODkzMg==\"]\n[\"name\", \"\u3048\u3064\u30de\u30de\"]\n[\"gender\", \"2\"]\n[\"prefecture\", \"\u3046\u3069\u3093\u770c\"]\n[\"age\", \"3\"]\n[\"timestamp\", 1420038932]\n[\"clubNumber\", \"211671\"]\n[\"comments\", [{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]]\n=> {\"appKey\"=>\"MTQyMDAzODkzMg==\", \"name\"=>\"\u3048\u3064\u30de\u30de\", \"gender\"=>\"2\", \"prefecture\"=>\"\u3046\u3069\u3093\u770c\", \"age\"=>\"3\", \"timestamp\"=>1420038932, \"clubNumber\"=>\"211671\", \"comments\"=>[{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]}\n```\n \n \n \n\u8981\u7d20\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306bhash\u3067\u53d6\u308c\u307e\u3059\u3002\n\n``` \nirb(main):100:0> print(key1[\"name\"])\n\u3048\u3064\u30de\u30de=> nil\nirb(main):101:0> print(key1[\"appKey\"])\nMTQyMDAzODkzMg===> nil\nirb(main):102:0> print(key1[\"comments\"])\n[{\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}, {\"id\"=>\"208\", \"comment\"=>\"\u5065\u6c17\u3067\u512a\u3057\u3044\u6b4c\u3001\u307b\u3063\u3053\u308a\u3057\u307e\u3059\u3002\"}, {\"id\"=>\"82\", \"comment\"=>\"\u4e00\u756a\u597d\u304d\u306a\u3046\u305f\u3067\u3059\u3002\"}, {\"id\"=>\"53\", \"comment\"=>\"\u306a\u304b\u306a\u304b\u30e9\u30a4\u30d6\u3067\u306f\u8074\u3051\u306a\u304f\u3066\u6b8b\u5ff5\u3067\u3059\u2026(\uffe3\u25bd\uffe3;) \u30e1\u30ed\u30c7\u30a3\u30fc\u304c\u5927\u597d\u304d\u266a\"}, {\"id\"=>\"32\", \"comment\"=>\"\u4e3b\u4eba\u304c\u4e00\u756a\u597d\u304d\u306a\u66f2\u3067\u3059\uff01\u300e\u795e\u66f2\u3060\uff01\u300f\u3068\u8a00\u3063\u3066\u307e\u3059(\u7b11)\"}]=> nil\n```\n\n\u554f\u984c\u306f\u3001\u30cd\u30b9\u30c8\u3055\u308c\u305f\u5148\u3092\u3069\u3046\u53d6\u308b\u304b\u3002\u3002\u3002\u3002\u914d\u5217\u7684\u306b\u306f8\u500b\u3068\u51fa\u3066\u3044\u308b\u306e\u3067\u3001\u3055\u3089\u306b\u5206\u89e3\u3057\u3066\u53d6\u308a\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nHash\u3067\u53d6\u3063\u305f\u305d\u306e\u5148\u306f\u3001Array\u3067\u3057\u305f\u3002\n\n``` \nirb(main):117:0> comments.class\n=> Array\n \nirb(main):118:0> comments[0]\n=> {\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}\n```\n \n\u305d\u3057\u3066\u3001\u66f4\u306b\u305d\u306e\u5148\u306fHash\u3067\u3057\u305f(\u7b11)\n\n```\nirb(main):121:0> comment = comments[0]\n=> {\"id\"=>\"265\", \"comment\"=>\"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"}\nirb(main):122:0> comment.class\n=> Hash\n \n=> Hash\nirb(main):123:0> comment[\"id\"]\n=> \"265\"\nirb(main):124:0> comment[\"comment\"]\n=> \"\u3059\u3054\u304f\u30d1\u30ef\u30fc\u3092\u3082\u3089\u3048\u308b\u66f2\u3067\u3059\u3001\u81ea\u5206\u304c\u5f37\u304f\u306a\u308c\u305f\u3088\u3046\u306a\u6c17\u6301\u3061\u306b\u306a\u308a\u307e\u3059\uff01\"\n``` \n \n\u3068\u308a\u3042\u3048\u305a\u3001\u6700\u4f4e\u9650\u306eKey/Value\u304c\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u5b9f\u969b\u306e\u30c7\u30fc\u30bf\u3092\u7a81\u3063\u8fbc\u3093\u3067\u884c\u304f\u3053\u3068\u306b\u3057\u307e\u3059\uff08\u3064\u3065\u304f\u304b\u3082\uff09\n\nActiveRecord\u3067\u304c\u3064\u3063\u3068\u691c\u7d22\u3057\u305f\u3044\u3093\u3060\u3051\u3069\u306a\u3002\u3002\u3002\n", "tags": ["RubyOnRails", "Couchbase", "Ruby", "Rails"]}