{"tags": ["zabbix"], "context": " More than 1 year has passed since last update.CentOS7\u3067\u52d5\u304b\u3057\u3066\u3044\u308bZabbix2.4.7\u3092Zabbix3.0.0\u3078\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u307e\u3057\u305f\u3002\n\n\uff11\uff0e\u524d\u6e96\u5099\n\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff0f\u30b5\u30fc\u30d0\u3092\u505c\u6b62\u3002\nsystemctl stop zabbix-agent\nsystemctl stop zabbix-server\n\n\nDB\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\npg_dump -U zabbix zabbix > backup_zabbix.psql\n\n\n\u73fe\u5728\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u78ba\u8a8d\nrpm -qa |grep zabbix\n\nzabbix-release-2.4-1.el7.noarch\nzabbix-web-2.4.7-1.el7.noarch\nzabbix-2.4.7-1.el7.x86_64\nzabbix-agent-2.4.7-1.el7.x86_64\nzabbix-server-2.4.7-1.el7.x86_64\nzabbix-server-pgsql-2.4.7-1.el7.x86_64\nzabbix-web-pgsql-2.4.7-1.el7.noarch\nzabbix-get-2.4.7-1.el7.x86_64\nzabbix-java-gateway-2.4.7-1.el7.x86_64\nzabbix-web-japanese-2.4.7-1.el7.noarch\nzabbix-sender-2.4.7-1.el7.x86_64\n\n\n\uff12\uff0e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u5dee\u3057\u66ff\u3048\nrpm -e zabbix-release\nrpm -ivh http://repo.zabbix.com/zabbix/3.0/rhel/7/x86_64/zabbix-release-3.0-1.el7.noarch.rpm\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u78ba\u8a8d\nyum clean all\nyum check-update\n\nzabbix-agent.x86_64                         3.0.0-1.el7                  zabbix\nzabbix-get.x86_64                           3.0.0-1.el7                  zabbix\nzabbix-java-gateway.x86_64                  3.0.0-1.el7                  zabbix\nzabbix-sender.x86_64                        3.0.0-1.el7                  zabbix\nzabbix-server-pgsql.x86_64                  3.0.0-1.el7                  zabbix\nzabbix-web.noarch                           3.0.0-1.el7                  zabbix\nzabbix-web-japanese.noarch                  3.0.0-1.el7                  zabbix\nzabbix-web-pgsql.noarch                     3.0.0-1.el7                  zabbix\n\u4e0d\u8981\u306b\u306a\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\nzabbix-agent.x86_64                         3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-java-gateway.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-proxy-mysql.x86_64                   3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-proxy-pgsql.x86_64                   3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-proxy-sqlite3.x86_64                 3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-server-mysql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix-server.x86_64                    2.4.7-1.el7                  @zabbix\nzabbix-server-mysql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-server-pgsql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix-server.x86_64                    2.4.7-1.el7                  @zabbix\nzabbix-server-pgsql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\n\n\n\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\nyum -y update\n\n\u4f9d\u5b58\u6027\u3092\u89e3\u6c7a\u3057\u307e\u3057\u305f\n\n================================================================================\n Package                   \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30fc\n                                       \u30d0\u30fc\u30b8\u30e7\u30f3             \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\n                                                                           \u5bb9\u91cf\n================================================================================\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d:\n zabbix-agent              x86_64      3.0.0-1.el7            zabbix      319 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-java-gateway       x86_64      3.0.0-1.el7            zabbix      703 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-proxy-mysql        x86_64      3.0.0-1.el7            zabbix      624 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-proxy-pgsql        x86_64      3.0.0-1.el7            zabbix      597 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-proxy-sqlite3      x86_64      3.0.0-1.el7            zabbix      583 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-server-mysql       x86_64      3.0.0-1.el7            zabbix      1.7 M\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n     zabbix-server.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-server-pgsql       x86_64      3.0.0-1.el7            zabbix      1.7 M\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n     zabbix-server.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n\u66f4\u65b0\u3057\u307e\u3059:\n zabbix-get                x86_64      3.0.0-1.el7            zabbix      220 k\n zabbix-sender             x86_64      3.0.0-1.el7            zabbix      231 k\n zabbix-web                noarch      3.0.0-1.el7            zabbix      3.3 M\n zabbix-web-japanese       noarch      3.0.0-1.el7            zabbix      3.8 k\n zabbix-web-pgsql          noarch      3.0.0-1.el7            zabbix      3.3 k\n\n\n\uff13\uff0ezabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8a2d\u5b9a\u5909\u66f4\n2.4\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u3066\u3001.rpmnew\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3067\u4e0a\u66f8\u304d\u3057\u3066\u304b\u3089\u7de8\u96c6\n\n/etc/zabbix/zabbix_agentd.conf\nServer=xxx.xxx.xxx.xxx\n#Hostname=Zabbix server\nHostnameItem=system.hostname\n\n\n\n\uff14\uff0ezabbix\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\u5909\u66f4\n2.4\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u3066\u3001.rpmnew\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3067\u4e0a\u66f8\u304d\u3057\u3066\u304b\u3089\u7de8\u96c6\n\u203bPostgreSQL\u7528\u306e\u8a2d\u5b9a\n\n/etc/zabbix/zabbix_server.conf\nDBHost=\nDBUser=zabbix\nDBPassword=XXXXXXXX\n#DBSocket=/var/lib/mysql/mysql.sock\nDBPort=5432\nListenIP=0.0.0.0\n\n\n\n\uff15\uff0e\u8d77\u52d5\nsystemctl start zabbix-server\nsystemctl start zabbix-agent\n\n\n\uff16\uff0e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\n\u7279\u306b\u8a2d\u5b9a\u306f\u305b\u305a\u306b\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\n\nCentOS7\u3067\u52d5\u304b\u3057\u3066\u3044\u308bZabbix2.4.7\u3092Zabbix3.0.0\u3078\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u307e\u3057\u305f\u3002\n\n# \uff11\uff0e\u524d\u6e96\u5099\n## \u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\uff0f\u30b5\u30fc\u30d0\u3092\u505c\u6b62\u3002\n<pre>\nsystemctl stop zabbix-agent\nsystemctl stop zabbix-server\n</pre>\n## DB\u3092\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n<pre>\npg_dump -U zabbix zabbix > backup_zabbix.psql\n</pre>\n## \u73fe\u5728\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u78ba\u8a8d\n<pre>\nrpm -qa |grep zabbix\n</pre>\n```\nzabbix-release-2.4-1.el7.noarch\nzabbix-web-2.4.7-1.el7.noarch\nzabbix-2.4.7-1.el7.x86_64\nzabbix-agent-2.4.7-1.el7.x86_64\nzabbix-server-2.4.7-1.el7.x86_64\nzabbix-server-pgsql-2.4.7-1.el7.x86_64\nzabbix-web-pgsql-2.4.7-1.el7.noarch\nzabbix-get-2.4.7-1.el7.x86_64\nzabbix-java-gateway-2.4.7-1.el7.x86_64\nzabbix-web-japanese-2.4.7-1.el7.noarch\nzabbix-sender-2.4.7-1.el7.x86_64\n```\n\n# \uff12\uff0e\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n## \u30ea\u30dd\u30b8\u30c8\u30ea\u5b9a\u7fa9\u30d5\u30a1\u30a4\u30eb\u306e\u5dee\u3057\u66ff\u3048\n<pre>\nrpm -e zabbix-release\nrpm -ivh http://repo.zabbix.com/zabbix/3.0/rhel/7/x86_64/zabbix-release-3.0-1.el7.noarch.rpm\n</pre>\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u78ba\u8a8d\n<pre>\nyum clean all\nyum check-update\n</pre>\n```\nzabbix-agent.x86_64                         3.0.0-1.el7                  zabbix\nzabbix-get.x86_64                           3.0.0-1.el7                  zabbix\nzabbix-java-gateway.x86_64                  3.0.0-1.el7                  zabbix\nzabbix-sender.x86_64                        3.0.0-1.el7                  zabbix\nzabbix-server-pgsql.x86_64                  3.0.0-1.el7                  zabbix\nzabbix-web.noarch                           3.0.0-1.el7                  zabbix\nzabbix-web-japanese.noarch                  3.0.0-1.el7                  zabbix\nzabbix-web-pgsql.noarch                     3.0.0-1.el7                  zabbix\n\u4e0d\u8981\u306b\u306a\u3063\u305f\u30d1\u30c3\u30b1\u30fc\u30b8\nzabbix-agent.x86_64                         3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-java-gateway.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-proxy-mysql.x86_64                   3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-proxy-pgsql.x86_64                   3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-proxy-sqlite3.x86_64                 3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-server-mysql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix-server.x86_64                    2.4.7-1.el7                  @zabbix\nzabbix-server-mysql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\nzabbix-server-pgsql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix-server.x86_64                    2.4.7-1.el7                  @zabbix\nzabbix-server-pgsql.x86_64                  3.0.0-1.el7                  zabbix\n    zabbix.x86_64                           2.4.7-1.el7                  @zabbix\n```\n## \u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\n<pre>\nyum -y update\n</pre>\n```\n\u4f9d\u5b58\u6027\u3092\u89e3\u6c7a\u3057\u307e\u3057\u305f\n\n================================================================================\n Package                   \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30fc\n                                       \u30d0\u30fc\u30b8\u30e7\u30f3             \u30ea\u30dd\u30b8\u30c8\u30ea\u30fc\n                                                                           \u5bb9\u91cf\n================================================================================\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d:\n zabbix-agent              x86_64      3.0.0-1.el7            zabbix      319 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-java-gateway       x86_64      3.0.0-1.el7            zabbix      703 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-proxy-mysql        x86_64      3.0.0-1.el7            zabbix      624 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-proxy-pgsql        x86_64      3.0.0-1.el7            zabbix      597 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-proxy-sqlite3      x86_64      3.0.0-1.el7            zabbix      583 k\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-server-mysql       x86_64      3.0.0-1.el7            zabbix      1.7 M\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n     zabbix-server.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n zabbix-server-pgsql       x86_64      3.0.0-1.el7            zabbix      1.7 M\n     zabbix.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n     zabbix-server.x86_64 2.4.7-1.el7 \u3092\u5165\u308c\u66ff\u3048\u307e\u3059\n\u66f4\u65b0\u3057\u307e\u3059:\n zabbix-get                x86_64      3.0.0-1.el7            zabbix      220 k\n zabbix-sender             x86_64      3.0.0-1.el7            zabbix      231 k\n zabbix-web                noarch      3.0.0-1.el7            zabbix      3.3 M\n zabbix-web-japanese       noarch      3.0.0-1.el7            zabbix      3.8 k\n zabbix-web-pgsql          noarch      3.0.0-1.el7            zabbix      3.3 k\n```\n# \uff13\uff0ezabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u8a2d\u5b9a\u5909\u66f4\n2.4\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u3066\u3001.rpmnew\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3067\u4e0a\u66f8\u304d\u3057\u3066\u304b\u3089\u7de8\u96c6\n\n```text:/etc/zabbix/zabbix_agentd.conf\nServer=xxx.xxx.xxx.xxx\n#Hostname=Zabbix server\nHostnameItem=system.hostname\n```\n# \uff14\uff0ezabbix\u30b5\u30fc\u30d0\u30fc\u8a2d\u5b9a\u5909\u66f4\n2.4\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u6b8b\u3063\u3066\u3044\u3066\u3001.rpmnew\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\u306e\u3067\u4e0a\u66f8\u304d\u3057\u3066\u304b\u3089\u7de8\u96c6\n\u203bPostgreSQL\u7528\u306e\u8a2d\u5b9a\n\n```text:/etc/zabbix/zabbix_server.conf\nDBHost=\nDBUser=zabbix\nDBPassword=XXXXXXXX\n#DBSocket=/var/lib/mysql/mysql.sock\nDBPort=5432\nListenIP=0.0.0.0\n```\n\n# \uff15\uff0e\u8d77\u52d5\n<pre>\nsystemctl start zabbix-server\nsystemctl start zabbix-agent\n</pre>\n\n# \uff16\uff0e\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\n\u7279\u306b\u8a2d\u5b9a\u306f\u305b\u305a\u306b\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3057\u305f\u3002\n![zabbix_3.0.png](https://qiita-image-store.s3.amazonaws.com/0/63464/7104412c-9794-f968-f19b-1ab5d6c066f9.png)\n"}