{"context": "multipart/x-mixed-replace \u3068\u3044\u3046mimeType\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u308b\u3082\u306e\u3067\u3001Web\u30ab\u30e1\u30e9\u306e\u753b\u50cf\u3067\u3042\u3063\u305f\u308a\u3001\u64ec\u4f3c\u7684\u306a\u30b5\u30fc\u30d0\u30d7\u30c3\u30b7\u30e5\u3068\u3057\u3066\u4f7f\u308f\u308c\u305f\u308a\u3057\u3066\u3044\u307e\u3059\u3002\nmultipart/x-mixed-replace\u3067\u914d\u4fe1\u3055\u308c\u308b\u753b\u50cf\u3092\u4f7f\u3063\u3066JavaScript\u3067\u51e6\u7406\u3092\u3057\u305f\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u5916\u90e8\u30c9\u30e1\u30a4\u30f3\u3067\u914d\u4fe1\u3055\u308c\u3066\u3044\u308b\u3068CORS\u5236\u9650\u304c\u52a0\u308f\u3063\u3066Canvas\u306a\u3069\u3067\u4f7f\u3044\u52dd\u624b\u304c\u60aa\u304f\u306a\u308a\u307e\u3059\u3002\n\u305d\u3053\u3067multipart/x-mixed-replace\u306e\u30d7\u30ed\u30ad\u30b7\u3092\u7acb\u3066\u3066\u307f\u307e\u3057\u305f\u3002\nvar express = require('express');\nvar http = require('http');\nvar app = express();\nvar url = require('url');\napp.use(express.static('public'));\n\napp.get('/motion', function(req, res) {\n  var u = url.parse(req.query.url)\n  var options = {\n    host:   u.hostname,\n    port:   u.port,\n    path:   u.path,\n    method: 'GET',\n    headers: req.headers\n  };\n\n  var creq = http.request(options, function(cres) {\n    for (var name in cres.headers) {\n      res.setHeader(name, cres.headers[name]);\n    }\n    cres.on('data', function(chunk){\n      res.write(chunk);\n    });\n    cres.on('close', function(){\n      res.writeHead(cres.statusCode);\n      res.end();\n    });\n  }).on('error', function(e) {\n    res.writeHead(500);\n    res.end();\n  });\n  creq.end();\n})\n\napp.listen(3000, function () {\n  console.log('Example app listening on port 3000!');\n});\n\n\u3053\u308c\u3067 /motion\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30af\u30a8\u30ea\u306eurl\u3067\u6307\u5b9a\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u305d\u306e\u307e\u307e\u6d41\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u30b3\u30c4\u3068\u3057\u3066\u306fdata\u30a4\u30d9\u30f3\u30c8\u3067\u6d41\u308c\u3066\u304f\u308b\u60c5\u5831\u304c\u5e38\u6642\u767a\u751f\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3057\u3087\u3046\u304b\u3002\u3053\u3046\u3044\u3046\u51e6\u7406\u306fnode.js\u5411\u304d\u3067\u3059\u306d\u3002\n`multipart/x-mixed-replace` \u3068\u3044\u3046mimeType\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u306b\u30d7\u30c3\u30b7\u30e5\u3067\u304d\u308b\u3082\u306e\u3067\u3001Web\u30ab\u30e1\u30e9\u306e\u753b\u50cf\u3067\u3042\u3063\u305f\u308a\u3001\u64ec\u4f3c\u7684\u306a\u30b5\u30fc\u30d0\u30d7\u30c3\u30b7\u30e5\u3068\u3057\u3066\u4f7f\u308f\u308c\u305f\u308a\u3057\u3066\u3044\u307e\u3059\u3002\n\nmultipart/x-mixed-replace\u3067\u914d\u4fe1\u3055\u308c\u308b\u753b\u50cf\u3092\u4f7f\u3063\u3066JavaScript\u3067\u51e6\u7406\u3092\u3057\u305f\u3044\u3068\u601d\u3063\u305f\u306e\u3067\u3059\u304c\u3001\u5916\u90e8\u30c9\u30e1\u30a4\u30f3\u3067\u914d\u4fe1\u3055\u308c\u3066\u3044\u308b\u3068CORS\u5236\u9650\u304c\u52a0\u308f\u3063\u3066Canvas\u306a\u3069\u3067\u4f7f\u3044\u52dd\u624b\u304c\u60aa\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u305d\u3053\u3067multipart/x-mixed-replace\u306e\u30d7\u30ed\u30ad\u30b7\u3092\u7acb\u3066\u3066\u307f\u307e\u3057\u305f\u3002\n\n```\nvar express = require('express');\nvar http = require('http');\nvar app = express();\nvar url = require('url');\napp.use(express.static('public'));\n\napp.get('/motion', function(req, res) {\n  var u = url.parse(req.query.url)\n  var options = {\n    host:   u.hostname,\n    port:   u.port,\n    path:   u.path,\n    method: 'GET',\n    headers: req.headers\n  };\n\n  var creq = http.request(options, function(cres) {\n    for (var name in cres.headers) {\n      res.setHeader(name, cres.headers[name]);\n    }\n    cres.on('data', function(chunk){\n      res.write(chunk);\n    });\n    cres.on('close', function(){\n      res.writeHead(cres.statusCode);\n      res.end();\n    });\n  }).on('error', function(e) {\n    res.writeHead(500);\n    res.end();\n  });\n  creq.end();\n})\n\napp.listen(3000, function () {\n  console.log('Example app listening on port 3000!');\n});\n```\n\n\u3053\u308c\u3067 /motion\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30af\u30a8\u30ea\u306eurl\u3067\u6307\u5b9a\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u305d\u306e\u307e\u307e\u6d41\u3057\u3066\u304f\u308c\u307e\u3059\u3002\u30b3\u30c4\u3068\u3057\u3066\u306fdata\u30a4\u30d9\u30f3\u30c8\u3067\u6d41\u308c\u3066\u304f\u308b\u60c5\u5831\u304c\u5e38\u6642\u767a\u751f\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3057\u3087\u3046\u304b\u3002\u3053\u3046\u3044\u3046\u51e6\u7406\u306fnode.js\u5411\u304d\u3067\u3059\u306d\u3002\n\n", "tags": ["JavaScript", "nodejs", "Express", "\u30d7\u30ed\u30ad\u30b7"]}