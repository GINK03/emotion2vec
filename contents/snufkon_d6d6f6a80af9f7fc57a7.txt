{"context": "\n\n\u306f\u3058\u3081\u306b\n\u6700\u8fd1\u3001Electron(\u65e7atom-shell) \u3092\u89e6\u3063\u3066\u904a\u3093\u3067\u3044\u307e\u3057\u305f\u3002\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u5145\u5b9f\u3057\u3066\u304a\u308a\u3001Web\u958b\u767a\u306e\u7d4c\u9a13\u304c\u3042\u308c\u3070\u3001Electron \u3092\u4f7f\u3044\u624b\u8efd\u306b\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306a\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f\u3001JavaScript \u306e\u4ee3\u308f\u308a\u306b ClojureScript \u3092\u4f7f\u3044\u3053\u306e Electron \u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u958b\u767a\u3092\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001Electron \u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308bQuick Start\u306e\u52d5\u4f5c\u78ba\u8a8d\u304b\u3089\u5165\u308a\u3001\u5f90\u3005\u306b ClojureScript \u306b\u7f6e\u304d\u63db\u3048\u3064\u3064\u3001 ClojureScript \u3067 Electron \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u74b0\u5883\u3092\u6574\u3048\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5168\u4f53\u306e\u6d41\u308c\n\u307e\u305a\u306f\u3001\u5168\u4f53\u306e\u6d41\u308c\u3092\u3056\u3063\u3068\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nStep0: Quick Start \u306e\u52d5\u4f5c\u78ba\u8a8d\nStep1: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\nStep2: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\nStep3: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\nStep4: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\nStep5: Renderer Process \u306b Figwheel \u3092\u8a2d\u5b9a\nStep6: Main Process \u306b Figwheel \u3092\u8a2d\u5b9a\nStep7: SCSS \u306e\u8a2d\u5b9a\nStep8: externs \u306e\u8a2d\u5b9a\n\n\u6700\u7d42\u7684\u306b\u5b8c\u6210\u3057\u305f\u30b3\u30fc\u30c9\u306f github \u306b\u304a\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u5404 Step \u304c\u5b8c\u4e86\u3057\u305f\u6bb5\u968e\u306e\u30b3\u30fc\u30c9\u306f\u5bfe\u5fdc\u3059\u308b\u30bf\u30b0\u3068\u3057\u3066\u4f5c\u6210\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n$ git clone https://github.com/snufkon/cljs-hello-electron\n$ git checkout -b step0 step0\n\n\u5404 Step \u306b\u304a\u3051\u308b\u3042\u307e\u308a\u91cd\u8981\u3067\u306a\u3044\u5909\u66f4\u70b9\u306e\u89e3\u8aac\u306f\u7701\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30bf\u30b0\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u3066\u30bd\u30fc\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nStep0: Quick Start \u306e\u52d5\u4f5c\u78ba\u8a8d\n\u307e\u305a\u306f\u3001Quick Start\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u308b Electron \u306e\u6700\u5c0f\u69cb\u6210\u3067\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\n$ mkdir cljs-hello-electron\n$ touch cljs-hello-electron/{package.json,main.js,index.html}\n\n\u3067\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002main.js, index.html \u306b\u3064\u3044\u3066\u306f Quick Start \u306e\u30da\u30fc\u30b8\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30b3\u30fc\u30c9\u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002 package.json \u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\npackage.json\n{\n  \"name\"    : \"hello-electron\",\n  \"version\" : \"0.1.0\",\n  \"main\"    : \"main.js\"\n}\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nElectron \u30a2\u30d7\u30ea\u3092\u30c6\u30b9\u30c8\u8d77\u52d5\u3055\u305b\u308b\u305f\u3081\u3001npm \u3067 electron \u30b3\u30de\u30f3\u30c9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ npm install -g electron\n\n\u7121\u4e8b\u306b electron \u30b3\u30de\u30f3\u30c9\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001cljs-hello-electron \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\n$ electron .\n\n\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\nStep1: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\nElectron \u3067\u306f package.json \u306e main \u306b\u8a18\u8f09\u3057\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092 Main Process \u3068\u547c\u3073\u307e\u3059\u3002\u3053\u306e Main Process \u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u306e\u7ba1\u7406\u3092\u884c\u3044\u307e\u3059\u3002\u307e\u305f\u3001Main Process \u304b\u3089\u751f\u6210\u3055\u308c\u308b\u5404\u30a6\u30a3\u30f3\u30c9\u30a6(BrowserWindow\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9)\u3067\u8868\u793a\u3092\u884c\u3046\u30b9\u30af\u30ea\u30d7\u30c8\u3092 Renderer Process \u3068\u547c\u3073\u307e\u3059\u3002\nStep1 \u3068\u3057\u3066 Main Process \u306b\u3042\u305f\u308b main.js \u3092 ClojureScript \u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u74b0\u5883\u3092\u6574\u3048\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u5148\u306b\u5b8c\u6210\u5f8c\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u793a\u3059\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\ncljs-hello-electron\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 dev\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 package.json\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljs\n        \u2514\u2500\u2500 main\n            \u2514\u2500\u2500 hello_electron\n                \u2514\u2500\u2500 core.cljs\n\nStep0 \u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\u914d\u7f6e\u3057\u3066\u3044\u305f\u3001index.html, package.json \u306f app/dev \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001main.js \u306f Leiningen \u306b\u3088\u308a\u30d3\u30eb\u30c9\u884c\u3044 app/dev/js/main/main.js \u306b\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001package.json \u306e main \u3067\u6307\u5b9a\u3057\u3066\u3044\u308b js \u306e\u76f8\u5bfe\u30d1\u30b9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\npackage.json\n{\n  \"name\"    : \"hello-electron\",\n  \"version\" : \"0.1.0\",\n  \"main\"    : \"js/main/main.js\" // <-- \u5909\u66f4\n}\n\n\nproject.clj \u306e\u8ffd\u52a0\nleiningen \u3067\u4f7f\u7528\u3059\u308b project.clj \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\nproject.clj\n(defproject hello-electron \"0.1.0-SNAPSHOT\"\n  :description \"Hello Electron form ClojureScript\"\n  :dependencies [[org.clojure/clojure \"1.8.0\"]\n                 [org.clojure/clojurescript \"1.9.293\"]]\n  :plugins [[lein-cljsbuild \"1.1.4\"]]\n  :clean-targets [:target-path \"app/dev/js/main\"]\n  :cljsbuild\n  {:builds\n   {:dev-main {:source-paths [\"src/cljs/main\"]  ;; Main Process \u306b\u95a2\u3059\u308b\u30bd\u30fc\u30b9\u3092\u914d\u7f6e\u3059\u308b\u5834\u6240\n               :compiler {:target :nodejs       ;; Main Process \u5074\u306f target \u306b nodejs \u3092\u6307\u5b9a\n                          :main \"hello-electron.core\" ;; \u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\n                          :output-to \"app/dev/js/main/main.js\" ;; package.json \u3067\u306f\u3053\u306e main.js \u3092\u6307\u5b9a\u3059\u308b\n                          :output-dir \"app/dev/js/main\"\n                          :optimizations :none}}}})\n\n\nlein cljsbuild once dev-main \u3067 src/cljs/main \u4ee5\u4e0b\u306b\u914d\u7f6e\u3057\u305f cljs \u306e\u30bd\u30fc\u30b9\u3092\u30d3\u30eb\u30c9\u3057\u3001\u958b\u767a\u7528\u306e main.js \u3092\u51fa\u529b\u3055\u305b\u307e\u3059\u3002\u3053\u306e\u6bb5\u968e\u3067\u306f\u3001src/cljs/main \u4ee5\u4e0b\u306b\u306f main.js \u3092\u305d\u306e\u307e\u307e cljs \u306b\u7f6e\u304d\u63db\u3048\u305f src/cljs/hello_electron/core.cljs \u306e\u307f\u914d\u7f6e\u3057\u3066\u3042\u308a\u307e\u3059\u3002\nmain.js \u3092 core.cljs \u3078\u5909\u66f4\n\ncore.cljs\n(ns hello-electron.core\n  (:require [cljs.nodejs :as nodejs]))\n\n(nodejs/enable-util-print!)\n\n(defonce path          (js/require \"path\"))\n(defonce url           (js/require \"url\"))\n\n(defonce electron      (js/require \"electron\"))\n(defonce app           (.-app electron))\n(defonce BrowserWindow (.-BrowserWindow electron))\n\n(def win (atom nil))\n\n(defn create-window\n  []\n  (reset! win (BrowserWindow. (clj->js {:width 800 :height 600})))\n  (.loadURL @win (.format url (clj->js {:pathname (.join path (js* \"__dirname\") \"../../../index.html\")\n                                        :protocol \"file\"\n                                        :slashes true})))\n  (.openDevTools (.-webContents @win))\n  (.on @win \"closed\" (fn []\n                       ;; (println \"window: closed\")\n                       (reset! win nil))))\n\n(defn -main [& args]\n  (.on app \"ready\" (fn []\n                     ;; (println \"app: ready\")\n                     (create-window)))\n\n  (.on app \"window-all-closed\"\n     (fn []\n       ;; (println \"app: window-all-closed\")\n       (when (not= (.-platform nodejs/process) \"darwin\")\n         (.quit app))))\n\n  (.on app \"activate\"\n     (fn []\n       ;; (println \"app: activate\")\n       (when-not @win\n         (create-window)))))\n\n(set! *main-cli-fn* -main)\n\n\nmain.js \u306e\u4e2d\u8eab\u3092\u305d\u306e\u307e\u307e cljs \u306b\u7f6e\u304d\u63db\u3048\u307e\u3057\u305f\u3002\n(set! *main-cli-fn* -main)\n\u3067\u306f Node.js \u4e0a\u3067\u5b9f\u884c\u3059\u308b\u969b\u306b\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3092\u53d7\u3051\u53d6\u308b\u95a2\u6570\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u53c2\u8003: Running ClojureScript on Node.js\n\u52d5\u4f5c\u78ba\u8a8d\n\u4ee5\u4e0b\u3067\u3001\u30d3\u30eb\u30c9\u304a\u3088\u3073\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ lein cljsbuild once dev-main\n$ electron app/dev\n\nStep0 \u306e js\u7248 \u3068\u540c\u69d8\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nStep1: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\ndev \u74b0\u5883\u306e\u8a2d\u5b9a\u306b\u5f15\u304d\u7d9a\u304d\u3001Main Process \u306e production \u74b0\u5883\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u8a2d\u5b9a\u5b8c\u4e86\u5f8c\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\ncljs-hello-electron\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dev\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 package.json\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 prod\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 index.html <-- app/dev \u304b\u3089\u30b3\u30d4\u30fc\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 js        \n\u2502\u00a0\u00a0     \u2514\u2500\u2500 package.json <-- app/dev \u304b\u3089\u30b3\u30d4\u30fc\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljs\n        \u251c\u2500\u2500 dev-main  <-- dev-main \u30d3\u30eb\u30c9\u6642\u306e\u307f\u8aad\u307f\u8fbc\u307e\u305b\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_electron\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 config.cljs\n        \u251c\u2500\u2500 main\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_electron\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 core.cljs\n        \u2514\u2500\u2500 prod-main <-- prod-main \u30d3\u30eb\u30c9\u6642\u306e\u307f\u8aad\u307f\u8fbc\u307e\u305b\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\n            \u2514\u2500\u2500 hello_electron\n                \u2514\u2500\u2500 config.cljs\n\nproject.clj \u3078\u306e\u8ffd\u8a18\n\u4e0a\u8a18\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306b\u5bfe\u3057\u3066\u3001production \u74b0\u5883\u3092\u30d3\u30eb\u30c9\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305f project.clj \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\nproject.clj\n(defproject hello-electron \"0.1.0-SNAPSHOT\"\n  :description \"Hello Electron form ClojureScript\"\n  :dependencies [[org.clojure/clojure \"1.8.0\"]\n                 [org.clojure/clojurescript \"1.9.293\"]]\n  :plugins [[lein-cljsbuild \"1.1.4\"]]\n  ;; \u30d3\u30eb\u30c9\u3092\u884c\u3046\u30b3\u30de\u30f3\u30c9\u3068\u3001\u30d3\u30eb\u30c9\u7d50\u679c\u3092\u524a\u9664\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304f\n  :aliases {\"clean-dev\"  [\"clean\"]\n            \"clean-prod\" [\"with-profile\" \"prod\" \"clean\"]\n            \"clean-all\"  [\"do\"\n                          [\"clean-dev\"]\n                          [\"clean-prod\"]]\n            \"build-dev\"  [\"do\"\n                          [\"clean-dev\"]\n                          [\"cljsbuild\" \"once\" \"dev-main\"]]\n            \"build-prod\" [\"do\"\n                          [\"clean-prod\"]\n                          [\"cljsbuild\" \"once\" \"prod-main\"]]\n            \"build-all\"  [\"do\"\n                          [\"build-dev\"]\n                          [\"build-prod\"]]}\n  ;; dev, prod \u7528\u306e profile \u3092\u8ffd\u52a0\n  :profiles {:dev  {:clean-targets [:target-path \"app/dev/js/main\"]}\n             :prod {:clean-targets [:target-path \"app/prod/js/main\"]}}\n  :cljsbuild\n  {:builds\n   {:dev-main {:source-paths [\"src/cljs/main\"\n                              \"src/cljs/dev-main\"] ;; <-- \u8ffd\u52a0\n               :compiler {:target :nodejs\n                          :main \"hello-electron.core\"\n                          :output-to \"app/dev/js/main/main.js\"\n                          :output-dir \"app/dev/js/main\"\n                          :optimizations :none}}\n    ;; \u8ffd\u52a0\n    :prod-main {:source-paths [\"src/cljs/main\"\n                               \"src/cljs/prod-main\"]\n                :compiler {:target :nodejs\n                           :output-to \"app/prod/js/main/main.js\"\n                           :output-dir \"app/prod/js/main\"\n                           :optimizations :simple}}}})\n\n\n\nproduction \u30d3\u30eb\u30c9\u7528\u306e prod-main \u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002dev-main \u3068\u306e\u9055\u3044\u306f\n\n\n:source-paths \u306b\u6307\u5b9a\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5909\u66f4\n\n:main \u306e\u8a18\u8ff0\u3092\u524a\u9664\n\n:optimizations \u306b :simple \u3092\u6307\u5b9a\n\n\u3068\u3044\u3063\u305f\u70b9\u3067\u3059\u3002\nNode.js \u4e0a\u3067\u306f :optimizations \u3092 :advanced \u306b\u3057\u3066\u3082 :simple \u3084 :none \u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u3068\u307b\u3068\u3093\u3069\u9055\u3044\u304c\u751f\u3058\u306a\u3044\u305f\u3081\u3001:optimizations \u306b\u306f :simple \u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\u53c2\u8003: Running ClojureScript on Node.js\ndev, prod \u7528\u306e config.cljs \u3092\u7528\u610f\nsrc/cljs/dev-main/hello_electron/, src/cljs/prod-main/hello_electron \u306b config.cljs \u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\u74b0\u5883\u5225\u306b config.cljs \u3092\u7528\u610f\u3059\u308b\u306e\u306f :optimizations \u306e\u9055\u3044\u306b\u3088\u308a __dirname \u3067\u53d6\u5f97\u3067\u304d\u308b\u30d1\u30b9\u4f4d\u7f6e\u304c dev-main \u3067\u306e\u30d3\u30eb\u30c9\u3068 prod-main \u306e\u30d3\u30eb\u30c9\u3067\u7570\u306a\u308b\u305f\u3081\u3067\u3059\u3002\n\nconfig.cljs(dev)\n(ns hello-electron.config)\n\n(defonce path (js/require \"path\"))\n(defonce url  (js/require \"url\"))\n\n(def index-url (->> {:pathname (.join path (js* \"__dirname\") \"../../../index.html\") ;; <-- prod \u3068\u30d1\u30b9\u304c\u7570\u306a\u308b\n                     :protocol \"file\"\n                     :slashes true}\n                    clj->js\n                    (.format url)))\n\n\n\nconfig.cljs(prod)\n(ns hello-electron.config)\n\n(defonce path (js/require \"path\"))\n(defonce url  (js/require \"url\"))\n\n(def index-url (->> {:pathname (.join path (js* \"__dirname\") \"../../index.html\") ;; <-- dev \u3068\u30d1\u30b9\u304c\u7570\u306a\u308b\n                     :protocol \"file\"\n                     :slashes true}\n                    clj->js\n                    (.format url)))\n\n\ncore.cljs\u3092\u4fee\u6b63\nsrc/cljs/main/hello_electron/core.cljs \u3092\u4e0a\u8a18\u306e config.cljs \u3092\u5229\u7528\u3059\u308b\u5f62\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\ncore.cljs(\u5909\u66f4\u70b9\u306e\u307f)\n(ns hello-electron.core\n  (:require [cljs.nodejs :as nodejs]\n            [hello-electron.config :as config])) ;; <-- \u8ffd\u52a0\n\n...\n\n(defn create-window\n  []\n  (reset! win (BrowserWindow. (clj->js {:width 800 :height 600})))\n  (.loadURL @win config/index-url) ;; <-- \u5909\u66f4\n  (.openDevTools (.-webContents @win))\n  (.on @win \"closed\" (fn []\n                       ;; (println \"window: closed\")\n                       (reset! win nil))))\n\n...\n\n\n:source-paths \u306e\u8a2d\u5b9a\u306b\u3088\u308a core.cljs \u3067\u4f7f\u308f\u308c\u308b config.cljs \u306f\n\n\ndev-main \u3067\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408 src/cljs/dev-main/hello_electron/config.cljs\n\n\nprod-main \u3067\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408: src/cljs/prod-main/hello_electron/config.cljs\n\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\u52d5\u4f5c\u78ba\u8a8d\naliases\u306b\u8a2d\u5b9a\u3057\u305f\u3001build-prod \u30b3\u30de\u30f3\u30c9\u3067\u30d3\u30eb\u30c9\u3092\u884c\u3044\u307e\u3059\u3002\n$ lein build-prod\n\napp/prod/js/{main,front}/main.js \u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u3001\n$ electron app/prod\n\n\u3067 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3055\u305b\u3001Step2 \u306e dev \u74b0\u5883\u3068\u540c\u3058\u7d50\u679c\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nStep3: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\nindex.html \u3067\u884c\u3063\u3066\u3044\u308b Renderer Process \u4e0a\u306e\u8868\u793a\u3092 js \u3067\u884c\u3046\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u305d\u306e js \u3092 cljs \u3092\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u3067\u751f\u6210\u3055\u305b\u308b\u74b0\u5883\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nscript \u30bf\u30b0\u3092\u8ffd\u52a0\n<script type=\"text/javascript\" src=\"js/front/main.js\"></script>\n\n\u307e\u305a\u306f\u3001index.html \u306b js \u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\u305f\u3081\u306e script \u30bf\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nproject.clj \u306b dev-front \u30d3\u30eb\u30c9\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\u6b21\u306b\u3001project.clj \u306b\u30d3\u30eb\u30c9\u7528\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nproject.clj\n:dev-front {:source-paths [\"src/cljs/front\"]\n                :compiler {:main \"hello-electron.core\"\n                           :output-to \"app/dev/js/front/main.js\"\n                           :output-dir \"app/dev/js/front\"\n                           :asset-path \"js/front\"\n                           :optimizations :none}}\n\n\n\u30d3\u30eb\u30c9\u306b\u5229\u7528\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f src/cljs/front \u4ee5\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u30d3\u30eb\u30c9\u7d50\u679c\u306f app/dev/js/front \u4ee5\u4e0b\u306b\u51fa\u529b\u3055\u305b\u307e\u3059\u3002\n\u8868\u793a\u3092\u884c\u3046 ClojureScript \u306e\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0\n\u8868\u793a\u5143\u3068\u306a\u308b cljs \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\ncore.cljs\n(ns hello-electron.core)\n\n(let [node (-> \"h1\" js/document.getElementsByTagName (aget 0))]\n  (set! (.-innerHTML node) \"Hello ClojureScript World!\"))\n\n\n\u5358\u7d14\u306b index.html \u306b <h>\u30bf\u30b0\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30c6\u30ad\u30b9\u30c8\u3092 \"Hello ClojureScript World!\" \u306b\u5dee\u3057\u66ff\u3048\u308b\u30b3\u30fc\u30c9\u3068\u306a\u308a\u307e\u3059\u3002\n\u52d5\u4f5c\u78ba\u8a8d\n$ lein build-dev\n\n\u3067\u958b\u767a\u74b0\u5883\u7528\u306e\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001 app/dev/js/{main,front}/main.js \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001\n$ electron app/dev\n\n\u3067 dev \u74b0\u5883\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u3001\u753b\u9762\u306b \"Hello ClojureScript World!\" \u3068\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nStep4: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\nRenderer Process \u5074\u306b production \u30d3\u30eb\u30c9\u7528\u306e\u74b0\u5883\u3092\u6574\u3048\u307e\u3059\u3002\nscript \u30bf\u30b0\u3092\u8ffd\u52a0\ndev \u3068\u540c\u69d8 index.html \u306b script \u30bf\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nproject.clj \u306b prod-front \u30d3\u30eb\u30c9\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\u6b21\u306b\u3001project.clj \u306b\u30d3\u30eb\u30c9\u7528\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nproject.clj\n:prod-front {:source-paths [\"src/cljs/front\"]\n                 :compiler {:output-to \"app/prod/js/front/main.js\"\n                            :output-dir \"app/prod/js/front\"\n                            :optimizations :advanced}}\n\n\ndev-front \u306e\u8a2d\u5b9a\u3068\u306e\u9055\u3044\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n:main \u306e\u8a2d\u5b9a\u3092\u524a\u9664\n\n:asset-path \u306e\u8a2d\u5b9a\u3092\u524a\u9664\n\n:optimization \u3092 :advanced \u306b\u8a2d\u5b9a\n\n\u52d5\u4f5c\u78ba\u8a8d\n$ lein build-prod\n\n\u3067 production \u74b0\u5883\u7528\u306e\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001 app/prod/js/{main,front}/main.js \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u78ba\u8a8d\u3067\u304d\u305f\u3089\n$ electron app/prod\n\n\u3067 production \u74b0\u5883\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u3001Step3 \u3068\u540c\u3058\u7d50\u679c\u3068\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nStep5: Renderer Process \u306b Figwheel \u3092\u8a2d\u5b9a\n\u73fe\u72b6\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u958b\u767a\u6642\u306b Renderer Process \u5074\u306e\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u3001\u305d\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u306f Step3 \u306e\u52d5\u4f5c\u78ba\u8a8d\u306b\u8a18\u8f09\u3057\u305f\n$ lein build-dev\n$ electron app/dev\n\n\u3092\u6bce\u56de\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u7169\u96d1\u3067\u3059\u3002\nlein cljsbuild auto dev-front \u3067\u30bd\u30fc\u30b9\u3092\u76e3\u8996\u3057\u305f\u72b6\u614b\u3067\u30d3\u30eb\u30c9\u3057\u3001\u307e\u305f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e0a\u3067\u753b\u9762\u3092\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067\u6bce\u56de\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u7e70\u308a\u8fd4\u3059\u5fc5\u8981\u306f\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u3084\u306f\u308a\u7169\u96d1\u3067\u3059\u3002\n\u305d\u3053\u3067\u3001lein-figwheel\u3092\u4f7f\u3044\u3001\u30bd\u30fc\u30b9\u306e\u5909\u66f4\u3092\u691c\u77e5\u3057\u3001\u753b\u9762\u3092\u81ea\u52d5\u66f4\u65b0\u3055\u305b\u308b\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\nproject.clj \u306b figwheel \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\u307e\u305a project.clj \u306b figwheel \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n[lein-figwheel \"0.5.8\"]\n\n\u3092 :plugins \u306b\n:figwheel-front {:figwheel {:server-port 3500\n                 :server-logfile \"figwheel-front.log\"}}\n\n\u3092 :profiles \u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002Main Process \u5074\u306b\u8a2d\u5b9a\u3059\u308b figwheel \u3068\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u3092\u5206\u3051\u308b\u305f\u3081\u3001\u5404\u3005\u306b\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3001\u305d\u3053\u306b\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u3092\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nfigwheel-front \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3001figwheel \u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e alias \u3082\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\"figwheel-front\" [\"with-profile\" \"figwheel-front\" \"figwheel\" \"dev-front\"]\n\n\u3092 :aliases \u306b\u8ffd\u52a0\u3002\n\u6700\u5f8c\u306b dev-front \u306e\u8a2d\u5b9a\u306b :figwheel true \u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n:dev-front {:source-paths [\"src/cljs/front\"]\n                :figwheel true ;; <-- \u8ffd\u52a0\n                :compiler {:main \"hello-electron.core\"\n                           :output-to \"app/dev/js/front/main.js\"\n                           :output-dir \"app/dev/js/front\"\n                           :asset-path \"js/front\"\n                           :optimizations :none}}\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u307e\u305a\u3001aliases \u306b\u8a2d\u5b9a\u3057\u305f figwheel-front \u3092\u5b9f\u884c\u3057\u3001figwheel \u3092 Renderer Process \u4e0a\u3067\u8d70\u3089\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n$ lein figwheel-front\n\n\u6b21\u306b\u3001\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u304d dev \u74b0\u5883\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ electron app/dev\n\n\u3053\u306e\u72b6\u614b\u3067 src/cljs/front/hello_electron/core.cljs \u306b\u5909\u66f4\u3092\u52a0\u3048\u3066\u307f\u307e\u3059\u3002\n\"Hello ClojureScript World!\" \u306e\u6587\u5b57\u5217\u3092 \"Hello Figwheel\" \u306a\u3069\u306e\u9069\u5f53\u306a\u6587\u5b57\u5217\u306b\u5909\u66f4\u3057\u3001\u5909\u66f4\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8868\u793a\u306b\u53cd\u6620\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3082\u3057\u30d5\u30a1\u30a4\u30eb\u306e\u66f4\u65b0\u304c\u691c\u77e5\u3055\u308c\u305a\u306b\u3001\u753b\u9762\u306e\u518d\u63cf\u753b\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u5834\u5408\u306f project.clj \u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002(step5 \u30bf\u30b0\u306e project.clj \u306b\u306f\u8a2d\u5b9a\u6e08\u307f)\n:figwheel {:hawk-options {:watcher :polling}}\n\n\nStep6: Main Process \u306b Figwheel \u3092\u8a2d\u5b9a\nMain Process \u5074\u3082\u73fe\u72b6\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u304c\u7169\u96d1\u306a\u305f\u3081 figwheel \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nws\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nNode.js \u4e0a\u3067 figwheel \u3092\u4f7f\u3046\u305f\u3081\u306b\u306f ws \u3068\u3044\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\ncljs-hello-electron \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\n\npackage.json\n{\n  \"name\": \"hello-electron\",\n  \"version\": \"0.0.0\",\n  \"description\": \"\"\n}\n\n\n\u3092\u4f5c\u6210\u3057\n$ npm install ws --save-dev\n\n\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nproject.clj \u3078\u8a18\u8ff0\u3092\u8ffd\u52a0\nproject.clj \u3067\u5909\u66f4\u3059\u308b\u7b87\u6240\u306f Renderer Process \u306b figwheel \u3092\u8a2d\u5b9a\u3057\u305f\u969b\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u3002\naliases \u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002\n\"figwheel-main\"  [\"with-profile\" \"figwheel-main\" \"figwheel\" \"dev-main\"]\n\nprofiles \u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002\n:figwheel-main  {:figwheel {:server-port 3500\n                 :server-logfile \"figwheel-main.log\"}}\n:figwheel-front {:figwheel {:server-port 3600 ;; <-- \u30dd\u30fc\u30c8\u5909\u66f4\u3057\u305f\n                 :server-logfile \"figwheel-front.log\"}}\n\n\u307e\u305f\u3001dev-main \u306b\u306f\n:figwheel {:on-jsload \"hello-electron.core/reload\"}\n\n\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u30bd\u30fc\u30b9\u5909\u66f4\u3092 figwheel \u304c\u691c\u77e5\u3057\u305f\u969b\u306b\u3001hello-electron.core/reload \u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\ncore.cljs \u3092 Reloadable \u306a\u30b3\u30fc\u30c9\u3078\u4fee\u6b63\n\u73fe\u72b6\u306e\u30b3\u30fc\u30c9\u3067\u306f\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u691c\u77e5\u3057\u3066\u3082\u65e2\u306b\u4f5c\u6210\u6e08\u307f\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u5bfe\u3057\u3066\u4f55\u3082\u5909\u5316\u306f\u8d77\u3053\u308a\u307e\u305b\u3093\u3002\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3001\u30bd\u30fc\u30b9\u5909\u66f4\u3092\u691c\u77e5\u3057\u305f\u3089\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3057\u76f4\u3059\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\ncore.cljs\n(ns hello-electron.core\n  (:require [cljs.nodejs :as nodejs]\n            [hello-electron.config :as config]))\n\n(nodejs/enable-util-print!)\n\n(defonce electron      (js/require \"electron\"))\n(defonce app           (.-app electron))\n(defonce BrowserWindow (.-BrowserWindow electron))\n\n(defonce win (atom nil))\n\n(defn- create-window\n  []\n  (reset! win (BrowserWindow. (clj->js {:width 800 :height 600 :show false})))\n  (.loadURL @win config/index-url)\n  (.openDevTools (.-webContents @win))\n  (.on @win \"closed\" (fn []\n                       ;; (println \"window: closed\")\n                       (reset! win nil)))\n  (.on @win \"ready-to-show\" (fn []\n                              ;; (println \"window: ready-to-show\")\n                              (.showInactive @win))))\n\n(defn- destroy-window\n  []\n  (.destroy @win)\n  (reset! win nil))\n\n(defn- remove-listeners\n  []\n  (.removeAllListeners app \"ready\")\n  (.removeAllListeners app \"activate\")\n  (.removeAllListeners app \"window-all-closed\"))\n\n(defn- add-listeners\n  []\n  (.on app \"ready\" create-window)\n  (.on app \"activate\" (fn []\n                        ;;(println \"app: activate\")\n                        (when-not @win\n                          (create-window))))\n  (.on app \"window-all-closed\"\n     (fn []\n       ;; (println \"app: window-all-closed\")\n       (when (not= (.-platform nodejs/process) \"darwin\")\n         (.quit app)))))\n\n(defn -main [& args]\n  (add-listeners))\n\n(defn reload\n  []\n  (remove-listeners)\n  (add-listeners)\n  (destroy-window)\n  (create-window))\n\n(set! *main-cli-fn* -main)\n\n\n\u5143\u306e\u30b3\u30fc\u30c9\u3092 reloadable \u306a\u30b3\u30fc\u30c9\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u6642\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n\n-main \u95a2\u6570\u5b9f\u884c\n\nadd-listeners \u95a2\u6570\u5b9f\u884c\n\n\napp \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3057\u3066\u304a\u304f\n\n\nElectron \u306e\u521d\u671f\u5316\u5b8c\u4e86\u3067 ready \u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u4fe1\n\nadd-listeners \u3067\u767b\u9332\u3057\u305f create-window \u95a2\u6570\u3092\u5b9f\u884c\n\n\u307e\u305f\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u5f8c\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\nreload \u95a2\u6570\u5b9f\u884c\n\nremove-listeners \u95a2\u6570\u3067\u3001\u73fe\u72b6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30ea\u30b9\u30ca\u30fc\u3092\u5168\u3066\u524a\u9664\n\nadd-listenrs \u95a2\u6570\u3067\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3057\u76f4\u3057\n\ndestroy-window \u95a2\u6570\u3067\u73fe\u72b6\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u524a\u9664\n\ncreate-window \u95a2\u6570\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u308a\u76f4\u3057\n\n\u52d5\u4f5c\u78ba\u8a8d\nStep5 \u3068\u540c\u69d8\u3001\u307e\u305a\u306f Main Process \u4e0a\u3067 figwheel \u3092\u8d70\u3089\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n$ lein figwheel-main\n\n\u6b21\u306b\u3001\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u304d\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ electron app/dev\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3057\u305f\u3089\u3001src/cljs/main/hello_electron/core.cljs \u306b\u5909\u66f4\u3092\u52a0\u3048\u3066\u307f\u307e\u3059\u3002\n\u30a6\u30a3\u30f3\u30c9\u30a6\u30b5\u30a4\u30ba\u3092 :width 500 \u306a\u3069\u306e\u9069\u5f53\u306a\u5024\u306b\u5909\u66f4\u3057\u3001\u73fe\u72b6\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u7834\u68c4\u3055\u308c\u3001\u6307\u5b9a\u3057\u305f\u30b5\u30a4\u30ba\u3067\u65b0\u3057\u3044\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nStep7: SCSS \u306e\u8a2d\u5b9a\nQuick Start \u306e index.html \u3067\u306f css \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u5b9f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u5fc5\u8981\u306b\u306a\u3063\u3066\u304f\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u3053\u3067\u3001\n\nscss \u304b\u3089 css \u3078\u306e\u5909\u63db\ncss \u306e\u5909\u66f4\u691c\u77e5\u304b\u3089\u306e\u753b\u9762\u66f4\u65b0\n\n\u3092\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\u30bf\u30b0\u3092\u8ffd\u52a0\napp/{dev,prod}/index.html \u306b\n<link rel=\"stylesheet\" href=\"css/style.css\">\n\n\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nscss \u304b\u3089 css \u3078\u306e\u5909\u63db\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\nlein-sassy\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3044\u3001scss \u3092 css \u3078\u5909\u63db\u3055\u305b\u307e\u3059\u3002\n\u307e\u305a\u3001project.clj \u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n[lein-sassy \"1.0.7\"]\n\n\u3092 :plugins \u306b\u8ffd\u52a0\u3002\n:sass {:src \"src/scss\"\n       :dst \"app/dev/css\"\n       :style :nested}\n\n\u3092 dev \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3002\n:sass {:src \"src/scss\"\n       :dst \"app/prod/css\"\n       :style :compressed}\n\n\u3092 prod \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3002\n\u5909\u63db\u5143\u3068\u306a\u308b scss \u306f src/scss/style.scss \u306b\u914d\u7f6e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nstyle.scss\nbody {\n  background-color: #ccc;\n}\n\n\ncss\u306e\u5909\u66f4\u306b\u3088\u308b\u753b\u9762\u66f4\u65b0\u306e\u8a2d\u5b9a\nRenderer Process \u5074\u306e fighweel \u306b css \u76e3\u8996\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nproject.clj \u306e figwheel-front \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n:figwheel-front {:figwheel {:server-port 3600\n                            :server-logfile \"figwheel-front.log\"\n                            :css-dirs [\"app/dev/css\"]}} ;; <-- \u8ffd\u52a0\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u307e\u305a\u3001scss \u304b\u3089 css \u306e\u5909\u63db\u304c\u6b63\u3057\u304f\u884c\u308f\u308c\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ lein sass once\n\n\u3067 src/scss/style.scss \u304b\u3089 app/dev/css/style.css \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\n\u307e\u305f\u3001\n$ lein with-profile prod sass once\n\n\u3067 src/scss/style.scss \u304b\u3089 app/prod/css/style.css \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u6b21\u306b Renderer Process \u5074\u306e figwheel \u3068\u5408\u308f\u305b\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ lein build-dev\n$ lein figwheel-front\n\n\u3067 figwheel \u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u6b21\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\n$ lein sass watch\n\n\u3092\u5b9f\u884c\u3057 scss \u306e\u5909\u66f4\u3092\u76e3\u8996\u3055\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\u6700\u5f8c\u306b\u307e\u305f\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ electron app/dev\n\n\u3053\u306e\u72b6\u614b\u3067 style.scss \u306e background-color: #ccc; \u3092 background-color: #green; \u306a\u3069\u306e\u9069\u5f53\u306a\u5024\u306b\u5909\u66f4\u3057\u3001\u8d77\u52d5\u4e2d\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u753b\u9762\u306e\u80cc\u666f\u304c\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nStep8: externs \u306e\u8a2d\u5b9a\n\u73fe\u72b6\u306e\u30b3\u30fc\u30c9\u3067\u306f\u7279\u306b\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u3061\u3089\u3082 css \u540c\u69d8\u306b\u5b9f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u5fc5\u8981\u306b\u306a\u3063\u3066\u304f\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nlein-externs\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5229\u7528\u3057\u3001externs \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nproject.clj \u3078\u306e\u5909\u66f4\n[lein-externs \"0.1.6\"]\n\n\u3092 :plugins \u306b\u8ffd\u52a0\u3002\n\"externs-prod\"   [\"externs\" \"prod-front\" \"app/prod/js/externs_front.js\"]\n\n\u3092 :aliases \u306b\u8ffd\u52a0\u3002\n:prod-front {:source-paths [\"src/cljs/front\"]\n                 :compiler {:output-to \"app/prod/js/front/main.js\"\n                            :output-dir \"app/prod/js/front\"\n                            :optimizations :advanced\n                            :externs [\"app/prod/js/externs_front.js\"]}} ;; <-- \u8ffd\u52a0\n\nprod-front \u306b :externs \u306e\u8a18\u8ff0\u3092\u8ffd\u52a0\u3002\n\u52d5\u4f5c\u78ba\u8a8d\n$ lein externs-prod\n\n\u3067 app/prod/js/externs_front.js \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nproduction, dev \u74b0\u5883\u3067\u306e\u52d5\u4f5c\u78ba\u8a8d\n\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u3056\u3063\u3068\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\u6700\u5f8c\u306b\u3001production \u74b0\u5883\u3001dev \u74b0\u5883\u3067\u306e\u52d5\u4f5c\u78ba\u8a8d\u65b9\u6cd5\u3092\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nproduction \u74b0\u5883\nproduction \u74b0\u5883\u306e\u52d5\u4f5c\u78ba\u8a8d\u306f\u4ee5\u4e0b\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n$ lein build-prod\n$ electron app/prod\n\ndev \u74b0\u5883\ndev \u74b0\u5883\u306e\u52d5\u4f5c\u78ba\u8a8d\u306f\u4ee5\u4e0b\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n$ lein build-dev\n$ electron app/dev\n\n\u307e\u305f\u3001figwheel \u3092\u5229\u7528\u3057\u305f\u958b\u767a\u6642\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u884c\u3044\u307e\u3059\u3002\n$ lein figwheel-main\n\n\u3067 Main Process \u7528\u306e figwheel \u3092\u8d77\u52d5\u3002\n\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\n$ lein figwheel-front\n\n\u3092\u5b9f\u884c\u3057\u3001Renderer Process \u7528\u306e figwheel \u3092\u8d77\u52d5\u3002\n\u307e\u305f\u3001\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u304d\n$ lein sass watch\n\n\u3092\u5b9f\u884c\u3057\u3001lein-sassy \u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u3088\u308a scss \u306e\u5909\u66f4\u3092\u76e3\u8996\u3002\n\u6700\u5f8c\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\n$ electron app/dev\n\n\u3092\u5b9f\u884c\u3057\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\u3053\u306e\u72b6\u614b\u3067\u5404\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b\u3068\u4ee5\u4e0b\u306e\u66f4\u65b0\u51e6\u7406\u304c\u8d70\u308a\u307e\u3059\u3002(\u5192\u982d gif \u753b\u50cf\u306e\u72b6\u614b)\n\nsrc/main \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5909\u66f4: \u30a6\u30a3\u30f3\u30c9\u30a6\u518d\u4f5c\u6210\nsrc/front \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5909\u66f4:\u30a6\u30a3\u30f3\u30c9\u30a6\u753b\u9762\u66f4\u65b0\nsrc/scss \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5909\u66f4: \u30a6\u30a3\u30f3\u30c9\u30a6\u753b\u9762\u66f4\u65b0\n\n\n\u304a\u308f\u308a\u306b\n\u99c6\u3051\u8db3\u3068\u306a\u308a\u307e\u3057\u305f\u304c\u3001Electron \u306e Quick Start \u304b\u3089\u958b\u59cb\u3057\u3001\u5f90\u3005\u306b ClojureScript \u306b\u79fb\u884c\u3057\u306a\u304c\u3089\u3001Electron \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u958b\u767a\u74b0\u5883\u3068\u3057\u3066\u3001figwheel \u3092 Main Process \u5074\u3001Renderer Process \u5074\u306e\u4e21\u65b9\u306b\u8a2d\u5b9a\u3057\u305f\u305f\u3081\u3001Reloadable \u306a\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304f\u3053\u3068\u304c\u8981\u6c42\u3055\u308c\u307e\u3059\u304c\u3001\u305d\u3046\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30d3\u30eb\u30c9\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u3068\u3044\u3063\u305f\u7169\u96d1\u306a\u4f5c\u696d\u3092\u306a\u3057\u304f\u3001\u52b9\u7387\u3088\u304f\u958b\u767a\u3092\u3059\u3059\u3081\u3066\u3044\u3051\u308b\u74b0\u5883\u304c\u69cb\u7bc9\u3067\u304d\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u7d39\u4ecb\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001electron-packager\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3051\u3070\u3001\n$ electron-packager app/prod --platform=darwin --version=1.4.7\n\n\u3067\u7c21\u5358\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002(Mac\u306e\u5834\u5408)\n\u4eca\u56de\u306f\u3001ClojureScript \u3067 Electron \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u4e00\u304b\u3089\u4f5c\u6210\u3057\u307e\u3057\u305f\u304c\u3001@kara_d \u3055\u3093\u304c\u4f5c\u6210\u3057\u3066\u3044\u308b descjop\u3068\u3044\u3046\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3059\u3002 Main Process \u5074\u3078\u306e figwheel \u306e\u8a2d\u5b9a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001Window \u74b0\u5883\u3067\u306e\u958b\u767a\u3092\u8003\u616e\u3057\u305f\u8a2d\u5b9a\u306a\u3069\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u969b\u306b\u958b\u767a\u3092\u884c\u3046\u65b9\u306f\u5408\u308f\u305b\u3066\u3001\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\n\u5b9f\u969b\u306b\u30a2\u30d7\u30ea\u958b\u767a\u3092\u9032\u3081\u3066\u3044\u304f\u3068\u3001\u4eca\u56de\u8aac\u660e\u3057\u305f\u69cb\u6210\u3084\u8a2d\u5b9a\u3067\u306f\u3001\u554f\u984c\u304c\u51fa\u3066\u304f\u308b\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3072\u3068\u307e\u305a\u3001\u958b\u767a\u3092\u59cb\u3081\u308b\u969b\u306e\u8db3\u639b\u304b\u308a\u3068\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u53c2\u8003\u8cc7\u6599\n\nElectron\n\n\nDocumentation\nQuick Start\n\n\nClojureScript\n\n\nCompiler Options\n\nQuick Start\n\n\n\n\n\n![cljs-hello-electron_1080.gif](https://qiita-image-store.s3.amazonaws.com/0/20642/ca51b258-d2ec-d58c-104a-606c350589d6.gif \"cljs-hello-electron_1080.gif\")\n\n## \u306f\u3058\u3081\u306b\n\n\u6700\u8fd1\u3001[Electron](http://electron.atom.io/)(\u65e7atom-shell) \u3092\u89e6\u3063\u3066\u904a\u3093\u3067\u3044\u307e\u3057\u305f\u3002[\u516c\u5f0f\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://electron.atom.io/docs/)\u304c\u5145\u5b9f\u3057\u3066\u304a\u308a\u3001Web\u958b\u767a\u306e\u7d4c\u9a13\u304c\u3042\u308c\u3070\u3001Electron \u3092\u4f7f\u3044\u624b\u8efd\u306b\u30af\u30ed\u30b9\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306a\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f\u3001JavaScript \u306e\u4ee3\u308f\u308a\u306b ClojureScript \u3092\u4f7f\u3044\u3053\u306e Electron \u3092\u4f7f\u3063\u305f\u30a2\u30d7\u30ea\u958b\u767a\u3092\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001Electron \u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3042\u308b[Quick Start](http://electron.atom.io/docs/tutorial/quick-start/)\u306e\u52d5\u4f5c\u78ba\u8a8d\u304b\u3089\u5165\u308a\u3001\u5f90\u3005\u306b ClojureScript \u306b\u7f6e\u304d\u63db\u3048\u3064\u3064\u3001 ClojureScript \u3067 Electron \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u74b0\u5883\u3092\u6574\u3048\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u5168\u4f53\u306e\u6d41\u308c\n\n\u307e\u305a\u306f\u3001\u5168\u4f53\u306e\u6d41\u308c\u3092\u3056\u3063\u3068\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n- Step0: Quick Start \u306e\u52d5\u4f5c\u78ba\u8a8d\n- Step1: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\n- Step2: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\n- Step3: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\n- Step4: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\n- Step5: Renderer Process \u306b Figwheel \u3092\u8a2d\u5b9a\n- Step6: Main Process \u306b Figwheel \u3092\u8a2d\u5b9a\n- Step7: SCSS \u306e\u8a2d\u5b9a\n- Step8: externs \u306e\u8a2d\u5b9a\n\n\u6700\u7d42\u7684\u306b\u5b8c\u6210\u3057\u305f\u30b3\u30fc\u30c9\u306f github \u306b\u304a\u3044\u3066\u3042\u308a\u307e\u3059\u3002\u307e\u305f\u3001\u5404 Step \u304c\u5b8c\u4e86\u3057\u305f\u6bb5\u968e\u306e\u30b3\u30fc\u30c9\u306f\u5bfe\u5fdc\u3059\u308b\u30bf\u30b0\u3068\u3057\u3066\u4f5c\u6210\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n```\n$ git clone https://github.com/snufkon/cljs-hello-electron\n$ git checkout -b step0 step0\n```\n\n\u5404 Step \u306b\u304a\u3051\u308b\u3042\u307e\u308a\u91cd\u8981\u3067\u306a\u3044\u5909\u66f4\u70b9\u306e\u89e3\u8aac\u306f\u7701\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30bf\u30b0\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3057\u3066\u30bd\u30fc\u30b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n## Step0: Quick Start \u306e\u52d5\u4f5c\u78ba\u8a8d\n\n\u307e\u305a\u306f\u3001[Quick Start](http://electron.atom.io/docs/tutorial/quick-start/)\u306b\u8aac\u660e\u3055\u308c\u3066\u3044\u308b Electron \u306e\u6700\u5c0f\u69cb\u6210\u3067\u52d5\u4f5c\u3092\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n**\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e**\n\n```\n$ mkdir cljs-hello-electron\n$ touch cljs-hello-electron/{package.json,main.js,index.html}\n```\n\n\u3067\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002`main.js`, `index.html` \u306b\u3064\u3044\u3066\u306f Quick Start \u306e\u30da\u30fc\u30b8\u306b\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30b3\u30fc\u30c9\u3092\u305d\u306e\u307e\u307e\u30b3\u30d4\u30fc\u3057\u3066\u304f\u3060\u3055\u3044\u3002 `package.json` \u306b\u3064\u3044\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n```json:package.json\n{\n  \"name\"    : \"hello-electron\",\n  \"version\" : \"0.1.0\",\n  \"main\"    : \"main.js\"\n}\n```\n\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\nElectron \u30a2\u30d7\u30ea\u3092\u30c6\u30b9\u30c8\u8d77\u52d5\u3055\u305b\u308b\u305f\u3081\u3001npm \u3067 electron \u30b3\u30de\u30f3\u30c9\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ npm install -g electron\n```\n\n\u7121\u4e8b\u306b electron \u30b3\u30de\u30f3\u30c9\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3001`cljs-hello-electron` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u3001\n\n```\n$ electron .\n```\n\n\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8d77\u52d5\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n![step0.png](https://qiita-image-store.s3.amazonaws.com/0/20642/e53b03d8-896e-9933-1d38-e2419f0631cf.png \"step0.png\")\n\n## Step1: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\n\nElectron \u3067\u306f `package.json` \u306e `main` \u306b\u8a18\u8f09\u3057\u5b9f\u884c\u3059\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u3092 Main Process \u3068\u547c\u3073\u307e\u3059\u3002\u3053\u306e Main Process \u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5168\u4f53\u306e\u7ba1\u7406\u3092\u884c\u3044\u307e\u3059\u3002\u307e\u305f\u3001Main Process \u304b\u3089\u751f\u6210\u3055\u308c\u308b\u5404\u30a6\u30a3\u30f3\u30c9\u30a6(BrowserWindow\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9)\u3067\u8868\u793a\u3092\u884c\u3046\u30b9\u30af\u30ea\u30d7\u30c8\u3092 Renderer Process \u3068\u547c\u3073\u307e\u3059\u3002\n\nStep1 \u3068\u3057\u3066 Main Process \u306b\u3042\u305f\u308b `main.js` \u3092 ClojureScript \u304b\u3089\u30d3\u30eb\u30c9\u3059\u308b\u74b0\u5883\u3092\u6574\u3048\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5148\u306b\u5b8c\u6210\u5f8c\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u793a\u3059\u3068\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\ncljs-hello-electron\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 dev\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 package.json\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljs\n        \u2514\u2500\u2500 main\n            \u2514\u2500\u2500 hello_electron\n                \u2514\u2500\u2500 core.cljs\n```\n\nStep0 \u3067\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\u914d\u7f6e\u3057\u3066\u3044\u305f\u3001`index.html`, `package.json` \u306f `app/dev` \u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n\u307e\u305f\u3001`main.js` \u306f Leiningen \u306b\u3088\u308a\u30d3\u30eb\u30c9\u884c\u3044 `app/dev/js/main/main.js` \u306b\u51fa\u529b\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001`package.json` \u306e `main` \u3067\u6307\u5b9a\u3057\u3066\u3044\u308b js \u306e\u76f8\u5bfe\u30d1\u30b9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```json:package.json\n{\n  \"name\"    : \"hello-electron\",\n  \"version\" : \"0.1.0\",\n  \"main\"    : \"js/main/main.js\" // <-- \u5909\u66f4\n}\n```\n\n**project.clj \u306e\u8ffd\u52a0**\n\nleiningen \u3067\u4f7f\u7528\u3059\u308b `project.clj` \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n```clj:project.clj\n(defproject hello-electron \"0.1.0-SNAPSHOT\"\n  :description \"Hello Electron form ClojureScript\"\n  :dependencies [[org.clojure/clojure \"1.8.0\"]\n                 [org.clojure/clojurescript \"1.9.293\"]]\n  :plugins [[lein-cljsbuild \"1.1.4\"]]\n  :clean-targets [:target-path \"app/dev/js/main\"]\n  :cljsbuild\n  {:builds\n   {:dev-main {:source-paths [\"src/cljs/main\"]  ;; Main Process \u306b\u95a2\u3059\u308b\u30bd\u30fc\u30b9\u3092\u914d\u7f6e\u3059\u308b\u5834\u6240\n               :compiler {:target :nodejs       ;; Main Process \u5074\u306f target \u306b nodejs \u3092\u6307\u5b9a\n                          :main \"hello-electron.core\" ;; \u30a8\u30f3\u30c8\u30ea\u30fc\u30dd\u30a4\u30f3\u30c8\n                          :output-to \"app/dev/js/main/main.js\" ;; package.json \u3067\u306f\u3053\u306e main.js \u3092\u6307\u5b9a\u3059\u308b\n                          :output-dir \"app/dev/js/main\"\n                          :optimizations :none}}}})\n```\n\n`lein cljsbuild once dev-main` \u3067 `src/cljs/main` \u4ee5\u4e0b\u306b\u914d\u7f6e\u3057\u305f cljs \u306e\u30bd\u30fc\u30b9\u3092\u30d3\u30eb\u30c9\u3057\u3001\u958b\u767a\u7528\u306e `main.js` \u3092\u51fa\u529b\u3055\u305b\u307e\u3059\u3002\u3053\u306e\u6bb5\u968e\u3067\u306f\u3001`src/cljs/main` \u4ee5\u4e0b\u306b\u306f `main.js` \u3092\u305d\u306e\u307e\u307e cljs \u306b\u7f6e\u304d\u63db\u3048\u305f `src/cljs/hello_electron/core.cljs` \u306e\u307f\u914d\u7f6e\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n\n**main.js \u3092 core.cljs \u3078\u5909\u66f4**\n\n```clj:core.cljs\n(ns hello-electron.core\n  (:require [cljs.nodejs :as nodejs]))\n\n(nodejs/enable-util-print!)\n\n(defonce path          (js/require \"path\"))\n(defonce url           (js/require \"url\"))\n\n(defonce electron      (js/require \"electron\"))\n(defonce app           (.-app electron))\n(defonce BrowserWindow (.-BrowserWindow electron))\n\n(def win (atom nil))\n\n(defn create-window\n  []\n  (reset! win (BrowserWindow. (clj->js {:width 800 :height 600})))\n  (.loadURL @win (.format url (clj->js {:pathname (.join path (js* \"__dirname\") \"../../../index.html\")\n                                        :protocol \"file\"\n                                        :slashes true})))\n  (.openDevTools (.-webContents @win))\n  (.on @win \"closed\" (fn []\n                       ;; (println \"window: closed\")\n                       (reset! win nil))))\n\n(defn -main [& args]\n  (.on app \"ready\" (fn []\n                     ;; (println \"app: ready\")\n                     (create-window)))\n  \n  (.on app \"window-all-closed\"\n     (fn []\n       ;; (println \"app: window-all-closed\")\n       (when (not= (.-platform nodejs/process) \"darwin\")\n         (.quit app))))\n  \n  (.on app \"activate\"\n     (fn []\n       ;; (println \"app: activate\")\n       (when-not @win\n         (create-window)))))\n\n(set! *main-cli-fn* -main)\n```\n\n`main.js` \u306e\u4e2d\u8eab\u3092\u305d\u306e\u307e\u307e cljs \u306b\u7f6e\u304d\u63db\u3048\u307e\u3057\u305f\u3002\n\n`(set! *main-cli-fn* -main)`\n\n\u3067\u306f Node.js \u4e0a\u3067\u5b9f\u884c\u3059\u308b\u969b\u306b\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u5f15\u6570\u3092\u53d7\u3051\u53d6\u308b\u95a2\u6570\u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u53c2\u8003: [Running ClojureScript on Node.js](https://github.com/clojure/clojurescript/wiki/Quick-Start#running-clojurescript-on-nodejs)\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n\u4ee5\u4e0b\u3067\u3001\u30d3\u30eb\u30c9\u304a\u3088\u3073\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n$ lein cljsbuild once dev-main\n$ electron app/dev\n```\n\nStep0 \u306e js\u7248 \u3068\u540c\u69d8\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3059\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n## Step1: Main Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\n\ndev \u74b0\u5883\u306e\u8a2d\u5b9a\u306b\u5f15\u304d\u7d9a\u304d\u3001Main Process \u306e production \u74b0\u5883\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u5b8c\u4e86\u5f8c\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u6210\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\ncljs-hello-electron\n\u251c\u2500\u2500 app\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 dev\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 index.html\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 package.json\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 prod\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 index.html <-- app/dev \u304b\u3089\u30b3\u30d4\u30fc\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 js        \n\u2502\u00a0\u00a0     \u2514\u2500\u2500 package.json <-- app/dev \u304b\u3089\u30b3\u30d4\u30fc\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljs\n        \u251c\u2500\u2500 dev-main  <-- dev-main \u30d3\u30eb\u30c9\u6642\u306e\u307f\u8aad\u307f\u8fbc\u307e\u305b\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_electron\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 config.cljs\n        \u251c\u2500\u2500 main\n        \u2502\u00a0\u00a0 \u2514\u2500\u2500 hello_electron\n        \u2502\u00a0\u00a0     \u2514\u2500\u2500 core.cljs\n        \u2514\u2500\u2500 prod-main <-- prod-main \u30d3\u30eb\u30c9\u6642\u306e\u307f\u8aad\u307f\u8fbc\u307e\u305b\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\n            \u2514\u2500\u2500 hello_electron\n                \u2514\u2500\u2500 config.cljs\n```\n\n**project.clj \u3078\u306e\u8ffd\u8a18**\n\n\u4e0a\u8a18\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u306b\u5bfe\u3057\u3066\u3001production \u74b0\u5883\u3092\u30d3\u30eb\u30c9\u3059\u308b\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u305f `project.clj` \u306f\u4ee5\u4e0b\u3068\u306a\u308a\u307e\u3059\u3002\n\n```clj:project.clj\n(defproject hello-electron \"0.1.0-SNAPSHOT\"\n  :description \"Hello Electron form ClojureScript\"\n  :dependencies [[org.clojure/clojure \"1.8.0\"]\n                 [org.clojure/clojurescript \"1.9.293\"]]\n  :plugins [[lein-cljsbuild \"1.1.4\"]]\n  ;; \u30d3\u30eb\u30c9\u3092\u884c\u3046\u30b3\u30de\u30f3\u30c9\u3068\u3001\u30d3\u30eb\u30c9\u7d50\u679c\u3092\u524a\u9664\u3059\u308b\u30b3\u30de\u30f3\u30c9\u3092\u5b9a\u7fa9\u3057\u3066\u304a\u304f\n  :aliases {\"clean-dev\"  [\"clean\"]\n            \"clean-prod\" [\"with-profile\" \"prod\" \"clean\"]\n            \"clean-all\"  [\"do\"\n                          [\"clean-dev\"]\n                          [\"clean-prod\"]]\n            \"build-dev\"  [\"do\"\n                          [\"clean-dev\"]\n                          [\"cljsbuild\" \"once\" \"dev-main\"]]\n            \"build-prod\" [\"do\"\n                          [\"clean-prod\"]\n                          [\"cljsbuild\" \"once\" \"prod-main\"]]\n            \"build-all\"  [\"do\"\n                          [\"build-dev\"]\n                          [\"build-prod\"]]}\n  ;; dev, prod \u7528\u306e profile \u3092\u8ffd\u52a0\n  :profiles {:dev  {:clean-targets [:target-path \"app/dev/js/main\"]}\n             :prod {:clean-targets [:target-path \"app/prod/js/main\"]}}\n  :cljsbuild\n  {:builds\n   {:dev-main {:source-paths [\"src/cljs/main\"\n                              \"src/cljs/dev-main\"] ;; <-- \u8ffd\u52a0\n               :compiler {:target :nodejs\n                          :main \"hello-electron.core\"\n                          :output-to \"app/dev/js/main/main.js\"\n                          :output-dir \"app/dev/js/main\"\n                          :optimizations :none}}\n    ;; \u8ffd\u52a0\n    :prod-main {:source-paths [\"src/cljs/main\"\n                               \"src/cljs/prod-main\"]\n                :compiler {:target :nodejs\n                           :output-to \"app/prod/js/main/main.js\"\n                           :output-dir \"app/prod/js/main\"\n                           :optimizations :simple}}}})\n\n```\n\nproduction \u30d3\u30eb\u30c9\u7528\u306e `prod-main` \u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002`dev-main` \u3068\u306e\u9055\u3044\u306f\n\n- `:source-paths` \u306b\u6307\u5b9a\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u5909\u66f4\n- `:main` \u306e\u8a18\u8ff0\u3092\u524a\u9664\n- `:optimizations` \u306b `:simple` \u3092\u6307\u5b9a\n\n\u3068\u3044\u3063\u305f\u70b9\u3067\u3059\u3002\n\nNode.js \u4e0a\u3067\u306f `:optimizations` \u3092 `:advanced` \u306b\u3057\u3066\u3082 `:simple` \u3084 `:none` \u3092\u8a2d\u5b9a\u3057\u305f\u5834\u5408\u3068\u307b\u3068\u3093\u3069\u9055\u3044\u304c\u751f\u3058\u306a\u3044\u305f\u3081\u3001`:optimizations` \u306b\u306f `:simple` \u3092\u6307\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u53c2\u8003: [Running ClojureScript on Node.js](https://github.com/clojure/clojurescript/wiki/Quick-Start#running-clojurescript-on-nodejs)\n\n\n**dev, prod \u7528\u306e config.cljs \u3092\u7528\u610f**\n\n`src/cljs/dev-main/hello_electron/`, `src/cljs/prod-main/hello_electron` \u306b `config.cljs` \u3092\u914d\u7f6e\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\u5225\u306b `config.cljs` \u3092\u7528\u610f\u3059\u308b\u306e\u306f `:optimizations` \u306e\u9055\u3044\u306b\u3088\u308a `__dirname` \u3067\u53d6\u5f97\u3067\u304d\u308b\u30d1\u30b9\u4f4d\u7f6e\u304c `dev-main` \u3067\u306e\u30d3\u30eb\u30c9\u3068 `prod-main` \u306e\u30d3\u30eb\u30c9\u3067\u7570\u306a\u308b\u305f\u3081\u3067\u3059\u3002\n\n```clj:config.cljs(dev)\n(ns hello-electron.config)\n\n(defonce path (js/require \"path\"))\n(defonce url  (js/require \"url\"))\n\n(def index-url (->> {:pathname (.join path (js* \"__dirname\") \"../../../index.html\") ;; <-- prod \u3068\u30d1\u30b9\u304c\u7570\u306a\u308b\n                     :protocol \"file\"\n                     :slashes true}\n                    clj->js\n                    (.format url)))\n```\n\n```clj:config.cljs(prod)\n(ns hello-electron.config)\n\n(defonce path (js/require \"path\"))\n(defonce url  (js/require \"url\"))\n\n(def index-url (->> {:pathname (.join path (js* \"__dirname\") \"../../index.html\") ;; <-- dev \u3068\u30d1\u30b9\u304c\u7570\u306a\u308b\n                     :protocol \"file\"\n                     :slashes true}\n                    clj->js\n                    (.format url)))\n```\n\n**core.cljs\u3092\u4fee\u6b63**\n\n`src/cljs/main/hello_electron/core.cljs` \u3092\u4e0a\u8a18\u306e `config.cljs` \u3092\u5229\u7528\u3059\u308b\u5f62\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```clj:core.cljs(\u5909\u66f4\u70b9\u306e\u307f)\n(ns hello-electron.core\n  (:require [cljs.nodejs :as nodejs]\n            [hello-electron.config :as config])) ;; <-- \u8ffd\u52a0\n\n...\n\n(defn create-window\n  []\n  (reset! win (BrowserWindow. (clj->js {:width 800 :height 600})))\n  (.loadURL @win config/index-url) ;; <-- \u5909\u66f4\n  (.openDevTools (.-webContents @win))\n  (.on @win \"closed\" (fn []\n                       ;; (println \"window: closed\")\n                       (reset! win nil))))\n\n...\n```\n\n`:source-paths` \u306e\u8a2d\u5b9a\u306b\u3088\u308a `core.cljs ` \u3067\u4f7f\u308f\u308c\u308b `config.cljs` \u306f\n\n- `dev-main` \u3067\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408 `src/cljs/dev-main/hello_electron/config.cljs`\n- `prod-main` \u3067\u30d3\u30eb\u30c9\u3057\u305f\u5834\u5408: `src/cljs/prod-main/hello_electron/config.cljs`\n\n\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n`aliases`\u306b\u8a2d\u5b9a\u3057\u305f\u3001`build-prod` \u30b3\u30de\u30f3\u30c9\u3067\u30d3\u30eb\u30c9\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n$ lein build-prod\n```\n\n`app/prod/js/{main,front}/main.js` \u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u78ba\u8a8d\u304c\u3067\u304d\u305f\u3089\u3001\n\n```\n$ electron app/prod\n```\n\n\u3067 \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3055\u305b\u3001Step2 \u306e dev \u74b0\u5883\u3068\u540c\u3058\u7d50\u679c\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n## Step3: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (dev\u74b0\u5883)\n\n`index.html` \u3067\u884c\u3063\u3066\u3044\u308b Renderer Process \u4e0a\u306e\u8868\u793a\u3092 js \u3067\u884c\u3046\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u305d\u306e js \u3092 cljs \u3092\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u3067\u751f\u6210\u3055\u305b\u308b\u74b0\u5883\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n**script \u30bf\u30b0\u3092\u8ffd\u52a0**\n\n```\n<script type=\"text/javascript\" src=\"js/front/main.js\"></script>\n```\n\n\u307e\u305a\u306f\u3001`index.html` \u306b js \u3092\u8aad\u307f\u8fbc\u307e\u305b\u308b\u305f\u3081\u306e script \u30bf\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n**project.clj \u306b dev-front \u30d3\u30eb\u30c9\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0**\n\n\u6b21\u306b\u3001project.clj \u306b\u30d3\u30eb\u30c9\u7528\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```clj:project.clj\n:dev-front {:source-paths [\"src/cljs/front\"]\n                :compiler {:main \"hello-electron.core\"\n                           :output-to \"app/dev/js/front/main.js\"\n                           :output-dir \"app/dev/js/front\"\n                           :asset-path \"js/front\"\n                           :optimizations :none}}\n```\n\n\u30d3\u30eb\u30c9\u306b\u5229\u7528\u3059\u308b\u30d5\u30a1\u30a4\u30eb\u306f `src/cljs/front` \u4ee5\u4e0b\u306b\u914d\u7f6e\u3057\u3001\u30d3\u30eb\u30c9\u7d50\u679c\u306f `app/dev/js/front` \u4ee5\u4e0b\u306b\u51fa\u529b\u3055\u305b\u307e\u3059\u3002\n\n**\u8868\u793a\u3092\u884c\u3046 ClojureScript \u306e\u30b3\u30fc\u30c9\u3092\u8a18\u8ff0**\n\n\u8868\u793a\u5143\u3068\u306a\u308b cljs \u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```clj:core.cljs\n(ns hello-electron.core)\n\n(let [node (-> \"h1\" js/document.getElementsByTagName (aget 0))]\n  (set! (.-innerHTML node) \"Hello ClojureScript World!\"))\n```\n\n\u5358\u7d14\u306b `index.html` \u306b `<h>`\u30bf\u30b0\u3067\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30c6\u30ad\u30b9\u30c8\u3092 \"Hello ClojureScript World!\" \u306b\u5dee\u3057\u66ff\u3048\u308b\u30b3\u30fc\u30c9\u3068\u306a\u308a\u307e\u3059\u3002\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```\n$ lein build-dev\n```\n\n\u3067\u958b\u767a\u74b0\u5883\u7528\u306e\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001 `app/dev/js/{main,front}/main.js` \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001\n\n```\n$ electron app/dev\n```\n\n\u3067 dev \u74b0\u5883\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u3001\u753b\u9762\u306b \"Hello ClojureScript World!\" \u3068\u8868\u793a\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n## Step4: Renderer Process \u3092 ClojureScript \u306b\u7f6e\u304d\u63db\u3048 (production\u74b0\u5883)\n\nRenderer Process \u5074\u306b production \u30d3\u30eb\u30c9\u7528\u306e\u74b0\u5883\u3092\u6574\u3048\u307e\u3059\u3002\n\n**script \u30bf\u30b0\u3092\u8ffd\u52a0**\n\ndev \u3068\u540c\u69d8 `index.html` \u306b script \u30bf\u30b0\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n**project.clj \u306b prod-front \u30d3\u30eb\u30c9\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0**\n\n\u6b21\u306b\u3001`project.clj` \u306b\u30d3\u30eb\u30c9\u7528\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```clj:project.clj\n:prod-front {:source-paths [\"src/cljs/front\"]\n                 :compiler {:output-to \"app/prod/js/front/main.js\"\n                            :output-dir \"app/prod/js/front\"\n                            :optimizations :advanced}}\n```\n\n`dev-front` \u306e\u8a2d\u5b9a\u3068\u306e\u9055\u3044\u306f\u4ee5\u4e0b\u306b\u306a\u308a\u307e\u3059\u3002\n\n- `:main` \u306e\u8a2d\u5b9a\u3092\u524a\u9664\n- `:asset-path` \u306e\u8a2d\u5b9a\u3092\u524a\u9664\n- `:optimization` \u3092 `:advanced` \u306b\u8a2d\u5b9a\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```\n$ lein build-prod\n```\n\n\u3067 production \u74b0\u5883\u7528\u306e\u30d3\u30eb\u30c9\u3092\u884c\u3044\u3001 `app/prod/js/{main,front}/main.js` \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u78ba\u8a8d\u3067\u304d\u305f\u3089\n\n```\n$ electron app/prod\n```\n\n\u3067 production \u74b0\u5883\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u3001Step3 \u3068\u540c\u3058\u7d50\u679c\u3068\u306a\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n# Step5: Renderer Process \u306b Figwheel \u3092\u8a2d\u5b9a\n\n\u73fe\u72b6\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u958b\u767a\u6642\u306b Renderer Process \u5074\u306e\u30b3\u30fc\u30c9\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u3001\u305d\u306e\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u306b\u306f Step3 \u306e\u52d5\u4f5c\u78ba\u8a8d\u306b\u8a18\u8f09\u3057\u305f\n\n```\n$ lein build-dev\n$ electron app/dev\n```\n\n\u3092\u6bce\u56de\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u7169\u96d1\u3067\u3059\u3002\n\n`lein cljsbuild auto dev-front` \u3067\u30bd\u30fc\u30b9\u3092\u76e3\u8996\u3057\u305f\u72b6\u614b\u3067\u30d3\u30eb\u30c9\u3057\u3001\u307e\u305f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4e0a\u3067\u753b\u9762\u3092\u30ea\u30ed\u30fc\u30c9\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306b\u30bf\u30fc\u30df\u30ca\u30eb\u4e0a\u3067\u6bce\u56de\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u7e70\u308a\u8fd4\u3059\u5fc5\u8981\u306f\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u3084\u306f\u308a\u7169\u96d1\u3067\u3059\u3002\n\n\u305d\u3053\u3067\u3001[lein-figwheel](https://github.com/bhauman/lein-figwheel)\u3092\u4f7f\u3044\u3001\u30bd\u30fc\u30b9\u306e\u5909\u66f4\u3092\u691c\u77e5\u3057\u3001\u753b\u9762\u3092\u81ea\u52d5\u66f4\u65b0\u3055\u305b\u308b\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\n\n**project.clj \u306b figwheel \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0**\n\n\u307e\u305a `project.clj` \u306b figwheel \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n[lein-figwheel \"0.5.8\"]\n```\n\n\u3092 `:plugins` \u306b\n\n```\n:figwheel-front {:figwheel {:server-port 3500\n                 :server-logfile \"figwheel-front.log\"}}\n```\n\n\u3092 `:profiles` \u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002Main Process \u5074\u306b\u8a2d\u5b9a\u3059\u308b figwheel \u3068\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u3092\u5206\u3051\u308b\u305f\u3081\u3001\u5404\u3005\u306b\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u7528\u610f\u3057\u3001\u305d\u3053\u306b\u4f7f\u7528\u3059\u308b\u30dd\u30fc\u30c8\u3092\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n`figwheel-front` \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u3001figwheel \u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306e `alias` \u3082\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n\"figwheel-front\" [\"with-profile\" \"figwheel-front\" \"figwheel\" \"dev-front\"]\n```\n\n\u3092 `:aliases` \u306b\u8ffd\u52a0\u3002\n\n\u6700\u5f8c\u306b `dev-front` \u306e\u8a2d\u5b9a\u306b `:figwheel true` \u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n:dev-front {:source-paths [\"src/cljs/front\"]\n                :figwheel true ;; <-- \u8ffd\u52a0\n                :compiler {:main \"hello-electron.core\"\n                           :output-to \"app/dev/js/front/main.js\"\n                           :output-dir \"app/dev/js/front\"\n                           :asset-path \"js/front\"\n                           :optimizations :none}}\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n\u307e\u305a\u3001`aliases` \u306b\u8a2d\u5b9a\u3057\u305f `figwheel-front` \u3092\u5b9f\u884c\u3057\u3001figwheel \u3092 Renderer Process \u4e0a\u3067\u8d70\u3089\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ lein figwheel-front\n```\n\n\u6b21\u306b\u3001\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u304d dev \u74b0\u5883\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n$ electron app/dev\n```\n\n\u3053\u306e\u72b6\u614b\u3067 `src/cljs/front/hello_electron/core.cljs` \u306b\u5909\u66f4\u3092\u52a0\u3048\u3066\u307f\u307e\u3059\u3002\n\n\"Hello ClojureScript World!\" \u306e\u6587\u5b57\u5217\u3092 \"Hello Figwheel\" \u306a\u3069\u306e\u9069\u5f53\u306a\u6587\u5b57\u5217\u306b\u5909\u66f4\u3057\u3001\u5909\u66f4\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u8868\u793a\u306b\u53cd\u6620\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3082\u3057\u30d5\u30a1\u30a4\u30eb\u306e\u66f4\u65b0\u304c\u691c\u77e5\u3055\u308c\u305a\u306b\u3001\u753b\u9762\u306e\u518d\u63cf\u753b\u304c\u5b9f\u884c\u3055\u308c\u306a\u3044\u5834\u5408\u306f `project.clj` \u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3057\u3066\u78ba\u8a8d\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002(step5 \u30bf\u30b0\u306e `project.clj` \u306b\u306f\u8a2d\u5b9a\u6e08\u307f)\n\n```\n:figwheel {:hawk-options {:watcher :polling}}\n```\n\n# Step6: Main Process \u306b Figwheel \u3092\u8a2d\u5b9a\n\nMain Process \u5074\u3082\u73fe\u72b6\u306e\u8a2d\u5b9a\u3067\u306f\u3001\u52d5\u4f5c\u78ba\u8a8d\u304c\u7169\u96d1\u306a\u305f\u3081 figwheel \u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n**ws\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb**\n\nNode.js \u4e0a\u3067 figwheel \u3092\u4f7f\u3046\u305f\u3081\u306b\u306f `ws` \u3068\u3044\u3046\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\n\ncljs-hello-electron \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b\n\n```json:package.json\n{\n  \"name\": \"hello-electron\",\n  \"version\": \"0.0.0\",\n  \"description\": \"\"\n}\n```\n\n\u3092\u4f5c\u6210\u3057\n\n```\n$ npm install ws --save-dev\n```\n\n\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n**project.clj \u3078\u8a18\u8ff0\u3092\u8ffd\u52a0**\n\n`project.clj` \u3067\u5909\u66f4\u3059\u308b\u7b87\u6240\u306f Renderer Process \u306b figwheel \u3092\u8a2d\u5b9a\u3057\u305f\u969b\u3068\u307b\u307c\u540c\u3058\u3067\u3059\u3002\n\n`aliases` \u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002\n\n```\n\"figwheel-main\"  [\"with-profile\" \"figwheel-main\" \"figwheel\" \"dev-main\"]\n```\n\n`profiles` \u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\u3002\n\n```\n:figwheel-main  {:figwheel {:server-port 3500\n                 :server-logfile \"figwheel-main.log\"}}\n:figwheel-front {:figwheel {:server-port 3600 ;; <-- \u30dd\u30fc\u30c8\u5909\u66f4\u3057\u305f\n                 :server-logfile \"figwheel-front.log\"}}\n```\n\n\u307e\u305f\u3001`dev-main` \u306b\u306f\n\n```clj\n:figwheel {:on-jsload \"hello-electron.core/reload\"}\n```\n\n\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\u30bd\u30fc\u30b9\u5909\u66f4\u3092 figwheel \u304c\u691c\u77e5\u3057\u305f\u969b\u306b\u3001`hello-electron.core/reload` \u95a2\u6570\u3092\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n**core.cljs \u3092 Reloadable \u306a\u30b3\u30fc\u30c9\u3078\u4fee\u6b63**\n\n\u73fe\u72b6\u306e\u30b3\u30fc\u30c9\u3067\u306f\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u3092\u691c\u77e5\u3057\u3066\u3082\u65e2\u306b\u4f5c\u6210\u6e08\u307f\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u306b\u5bfe\u3057\u3066\u4f55\u3082\u5909\u5316\u306f\u8d77\u3053\u308a\u307e\u305b\u3093\u3002\u30b3\u30fc\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u3001\u30bd\u30fc\u30b9\u5909\u66f4\u3092\u691c\u77e5\u3057\u305f\u3089\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3057\u76f4\u3059\u3088\u3046\u306b\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n```clj:core.cljs\n(ns hello-electron.core\n  (:require [cljs.nodejs :as nodejs]\n            [hello-electron.config :as config]))\n\n(nodejs/enable-util-print!)\n\n(defonce electron      (js/require \"electron\"))\n(defonce app           (.-app electron))\n(defonce BrowserWindow (.-BrowserWindow electron))\n\n(defonce win (atom nil))\n\n(defn- create-window\n  []\n  (reset! win (BrowserWindow. (clj->js {:width 800 :height 600 :show false})))\n  (.loadURL @win config/index-url)\n  (.openDevTools (.-webContents @win))\n  (.on @win \"closed\" (fn []\n                       ;; (println \"window: closed\")\n                       (reset! win nil)))\n  (.on @win \"ready-to-show\" (fn []\n                              ;; (println \"window: ready-to-show\")\n                              (.showInactive @win))))\n\n(defn- destroy-window\n  []\n  (.destroy @win)\n  (reset! win nil))\n\n(defn- remove-listeners\n  []\n  (.removeAllListeners app \"ready\")\n  (.removeAllListeners app \"activate\")\n  (.removeAllListeners app \"window-all-closed\"))\n\n(defn- add-listeners\n  []\n  (.on app \"ready\" create-window)\n  (.on app \"activate\" (fn []\n                        ;;(println \"app: activate\")\n                        (when-not @win\n                          (create-window))))\n  (.on app \"window-all-closed\"\n     (fn []\n       ;; (println \"app: window-all-closed\")\n       (when (not= (.-platform nodejs/process) \"darwin\")\n         (.quit app)))))\n\n(defn -main [& args]\n  (add-listeners))\n\n(defn reload\n  []\n  (remove-listeners)\n  (add-listeners)\n  (destroy-window)\n  (create-window))\n\n(set! *main-cli-fn* -main)\n```\n\n\u5143\u306e\u30b3\u30fc\u30c9\u3092 reloadable \u306a\u30b3\u30fc\u30c9\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u6642\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n- `-main` \u95a2\u6570\u5b9f\u884c\n- `add-listeners` \u95a2\u6570\u5b9f\u884c\n  - app \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30a4\u30d9\u30f3\u30c8\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3057\u3066\u304a\u304f\n- Electron \u306e\u521d\u671f\u5316\u5b8c\u4e86\u3067 `ready` \u30a4\u30d9\u30f3\u30c8\u3092\u53d7\u4fe1\n- `add-listeners` \u3067\u767b\u9332\u3057\u305f `create-window` \u95a2\u6570\u3092\u5b9f\u884c\n\n\u307e\u305f\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u5f8c\u306f\u4ee5\u4e0b\u306e\u6d41\u308c\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n- `reload` \u95a2\u6570\u5b9f\u884c\n- `remove-listeners` \u95a2\u6570\u3067\u3001\u73fe\u72b6\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u30ea\u30b9\u30ca\u30fc\u3092\u5168\u3066\u524a\u9664\n- `add-listenrs` \u95a2\u6570\u3067\u30ea\u30b9\u30ca\u30fc\u3092\u767b\u9332\u3057\u76f4\u3057\n- `destroy-window` \u95a2\u6570\u3067\u73fe\u72b6\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u524a\u9664\n- `create-window` \u95a2\u6570\u3067\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u4f5c\u308a\u76f4\u3057\n\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\nStep5 \u3068\u540c\u69d8\u3001\u307e\u305a\u306f Main Process \u4e0a\u3067 figwheel \u3092\u8d70\u3089\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ lein figwheel-main\n```\n\n\u6b21\u306b\u3001\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u304d\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n$ electron app/dev\n```\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u8d77\u52d5\u3057\u305f\u3089\u3001`src/cljs/main/hello_electron/core.cljs` \u306b\u5909\u66f4\u3092\u52a0\u3048\u3066\u307f\u307e\u3059\u3002\n\n\u30a6\u30a3\u30f3\u30c9\u30a6\u30b5\u30a4\u30ba\u3092 `:width 500` \u306a\u3069\u306e\u9069\u5f53\u306a\u5024\u306b\u5909\u66f4\u3057\u3001\u73fe\u72b6\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u7834\u68c4\u3055\u308c\u3001\u6307\u5b9a\u3057\u305f\u30b5\u30a4\u30ba\u3067\u65b0\u3057\u3044\u30a6\u30a3\u30f3\u30c9\u30a6\u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n# Step7: SCSS \u306e\u8a2d\u5b9a\n\nQuick Start \u306e `index.html` \u3067\u306f css \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u304c\u3001\u5b9f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u5fc5\u8981\u306b\u306a\u3063\u3066\u304f\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u305d\u3053\u3067\u3001\n\n- scss \u304b\u3089 css \u3078\u306e\u5909\u63db\n- css \u306e\u5909\u66f4\u691c\u77e5\u304b\u3089\u306e\u753b\u9762\u66f4\u65b0\n\n\u3092\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n**<link>\u30bf\u30b0\u3092\u8ffd\u52a0**\n\n`app/{dev,prod}/index.html` \u306b\n\n```\n<link rel=\"stylesheet\" href=\"css/style.css\">\n```\n\n\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n**scss \u304b\u3089 css \u3078\u306e\u5909\u63db\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a**\n\n[lein-sassy](https://github.com/vladh/lein-sassy)\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u4f7f\u3044\u3001scss \u3092 css \u3078\u5909\u63db\u3055\u305b\u307e\u3059\u3002\n\n\u307e\u305a\u3001`project.clj` \u306b\u4ee5\u4e0b\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```\n[lein-sassy \"1.0.7\"]\n```\n\n\u3092 `:plugins` \u306b\u8ffd\u52a0\u3002\n\n```\n:sass {:src \"src/scss\"\n       :dst \"app/dev/css\"\n       :style :nested}\n```\n\n\u3092 `dev` \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3002\n\n```\n:sass {:src \"src/scss\"\n       :dst \"app/prod/css\"\n       :style :compressed}\n```\n\n\u3092 `prod` \u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u306b\u8ffd\u52a0\u3002\n\n\n\u5909\u63db\u5143\u3068\u306a\u308b scss \u306f `src/scss/style.scss` \u306b\u914d\u7f6e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```scss:style.scss\nbody {\n  background-color: #ccc;\n}\n```\n\n**css\u306e\u5909\u66f4\u306b\u3088\u308b\u753b\u9762\u66f4\u65b0\u306e\u8a2d\u5b9a**\n\nRenderer Process \u5074\u306e fighweel \u306b css \u76e3\u8996\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n`project.clj` \u306e `figwheel-front` \u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\n:figwheel-front {:figwheel {:server-port 3600\n                            :server-logfile \"figwheel-front.log\"\n                            :css-dirs [\"app/dev/css\"]}} ;; <-- \u8ffd\u52a0\n```\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n\u307e\u305a\u3001scss \u304b\u3089 css \u306e\u5909\u63db\u304c\u6b63\u3057\u304f\u884c\u308f\u308c\u308b\u304b\u78ba\u8a8d\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\n$ lein sass once\n```\n\n\u3067 `src/scss/style.scss` \u304b\u3089 `app/dev/css/style.css` \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\n\n\u307e\u305f\u3001\n\n```\n$ lein with-profile prod sass once\n```\n\n\u3067 `src/scss/style.scss` \u304b\u3089 `app/prod/css/style.css` \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u6b21\u306b Renderer Process \u5074\u306e figwheel \u3068\u5408\u308f\u305b\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```\n$ lein build-dev\n$ lein figwheel-front\n```\n\n\u3067 figwheel \u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\u6b21\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\n\n```\n$ lein sass watch\n```\n\n\u3092\u5b9f\u884c\u3057 scss \u306e\u5909\u66f4\u3092\u76e3\u8996\u3055\u305b\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\u307e\u305f\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n$ electron app/dev\n```\n\n\u3053\u306e\u72b6\u614b\u3067 `style.scss` \u306e `background-color: #ccc;` \u3092 `background-color: #green;` \u306a\u3069\u306e\u9069\u5f53\u306a\u5024\u306b\u5909\u66f4\u3057\u3001\u8d77\u52d5\u4e2d\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u753b\u9762\u306e\u80cc\u666f\u304c\u66f4\u65b0\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# Step8: externs \u306e\u8a2d\u5b9a\n\n\u73fe\u72b6\u306e\u30b3\u30fc\u30c9\u3067\u306f\u7279\u306b\u5fc5\u8981\u3042\u308a\u307e\u305b\u3093\u304c\u3001\u3053\u3061\u3089\u3082 css \u540c\u69d8\u306b\u5b9f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u306f\u5fc5\u8981\u306b\u306a\u3063\u3066\u304f\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n[lein-externs](https://github.com/ejlo/lein-externs)\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u5229\u7528\u3057\u3001externs \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n**project.clj \u3078\u306e\u5909\u66f4**\n\n```\n[lein-externs \"0.1.6\"]\n```\n\n\u3092 `:plugins` \u306b\u8ffd\u52a0\u3002\n\n\n```\n\"externs-prod\"   [\"externs\" \"prod-front\" \"app/prod/js/externs_front.js\"]\n```\n\n\u3092 `:aliases` \u306b\u8ffd\u52a0\u3002\n\n```\n:prod-front {:source-paths [\"src/cljs/front\"]\n                 :compiler {:output-to \"app/prod/js/front/main.js\"\n                            :output-dir \"app/prod/js/front\"\n                            :optimizations :advanced\n                            :externs [\"app/prod/js/externs_front.js\"]}} ;; <-- \u8ffd\u52a0\n```\n\n`prod-front` \u306b `:externs` \u306e\u8a18\u8ff0\u3092\u8ffd\u52a0\u3002\n\n**\u52d5\u4f5c\u78ba\u8a8d**\n\n```\n$ lein externs-prod\n```\n\n\u3067 `app/prod/js/externs_front.js` \u304c\u4f5c\u6210\u3055\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n# production, dev \u74b0\u5883\u3067\u306e\u52d5\u4f5c\u78ba\u8a8d\n\n\u9577\u304f\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u3056\u3063\u3068\u8a2d\u5b9a\u304c\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\u6700\u5f8c\u306b\u3001production \u74b0\u5883\u3001dev \u74b0\u5883\u3067\u306e\u52d5\u4f5c\u78ba\u8a8d\u65b9\u6cd5\u3092\u8a18\u8f09\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n**production \u74b0\u5883**\n\nproduction \u74b0\u5883\u306e\u52d5\u4f5c\u78ba\u8a8d\u306f\u4ee5\u4e0b\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n```\n$ lein build-prod\n$ electron app/prod\n```\n\n**dev \u74b0\u5883**\n\ndev \u74b0\u5883\u306e\u52d5\u4f5c\u78ba\u8a8d\u306f\u4ee5\u4e0b\u3067\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n```\n$ lein build-dev\n$ electron app/dev\n```\n\n\u307e\u305f\u3001figwheel \u3092\u5229\u7528\u3057\u305f\u958b\u767a\u6642\u306e\u8a2d\u5b9a\u306f\u4ee5\u4e0b\u306e\u624b\u9806\u3067\u884c\u3044\u307e\u3059\u3002\n\n```\n$ lein figwheel-main\n```\n\n\u3067 Main Process \u7528\u306e figwheel \u3092\u8d77\u52d5\u3002\n\n\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\n\n```\n$ lein figwheel-front\n```\n\n\u3092\u5b9f\u884c\u3057\u3001Renderer Process \u7528\u306e figwheel \u3092\u8d77\u52d5\u3002\n\n\u307e\u305f\u3001\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3092\u958b\u304d\n\n```\n$ lein sass watch\n```\n\n\u3092\u5b9f\u884c\u3057\u3001lein-sassy \u30d7\u30e9\u30b0\u30a4\u30f3\u306b\u3088\u308a scss \u306e\u5909\u66f4\u3092\u76e3\u8996\u3002\n\n\u6700\u5f8c\u306b\u5225\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u3067\n\n```\n$ electron app/dev\n```\n\n\u3092\u5b9f\u884c\u3057\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u72b6\u614b\u3067\u5404\u30d5\u30a1\u30a4\u30eb\u306b\u5909\u66f4\u3092\u52a0\u3048\u308b\u3068\u4ee5\u4e0b\u306e\u66f4\u65b0\u51e6\u7406\u304c\u8d70\u308a\u307e\u3059\u3002(\u5192\u982d gif \u753b\u50cf\u306e\u72b6\u614b)\n\n- src/main \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5909\u66f4: \u30a6\u30a3\u30f3\u30c9\u30a6\u518d\u4f5c\u6210\n- src/front \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5909\u66f4:\u30a6\u30a3\u30f3\u30c9\u30a6\u753b\u9762\u66f4\u65b0\n- src/scss \u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u5909\u66f4: \u30a6\u30a3\u30f3\u30c9\u30a6\u753b\u9762\u66f4\u65b0\n\n\n# \u304a\u308f\u308a\u306b\n\n\u99c6\u3051\u8db3\u3068\u306a\u308a\u307e\u3057\u305f\u304c\u3001Electron \u306e Quick Start \u304b\u3089\u958b\u59cb\u3057\u3001\u5f90\u3005\u306b ClojureScript \u306b\u79fb\u884c\u3057\u306a\u304c\u3089\u3001Electron \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u958b\u767a\u74b0\u5883\u3068\u3057\u3066\u3001figwheel \u3092 Main Process \u5074\u3001Renderer Process \u5074\u306e\u4e21\u65b9\u306b\u8a2d\u5b9a\u3057\u305f\u305f\u3081\u3001Reloadable \u306a\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u3044\u304f\u3053\u3068\u304c\u8981\u6c42\u3055\u308c\u307e\u3059\u304c\u3001\u305d\u3046\u3059\u308b\u3053\u3068\u306b\u3088\u308a\u3001\u30d3\u30eb\u30c9\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u8d77\u52d5\u3068\u3044\u3063\u305f\u7169\u96d1\u306a\u4f5c\u696d\u3092\u306a\u3057\u304f\u3001\u52b9\u7387\u3088\u304f\u958b\u767a\u3092\u3059\u3059\u3081\u3066\u3044\u3051\u308b\u74b0\u5883\u304c\u69cb\u7bc9\u3067\u304d\u305f\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u7d39\u4ecb\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001[electron-packager](https://github.com/electron-userland/electron-packager)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3051\u3070\u3001\n\n```\n$ electron-packager app/prod --platform=darwin --version=1.4.7\n```\n\n\u3067\u7c21\u5358\u306b\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002(Mac\u306e\u5834\u5408)\n\n\n\u4eca\u56de\u306f\u3001ClojureScript \u3067 Electron \u30a2\u30d7\u30ea\u3092\u958b\u767a\u3059\u308b\u4e00\u304b\u3089\u4f5c\u6210\u3057\u307e\u3057\u305f\u304c\u3001[@kara_d](https://twitter.com/kara_d) \u3055\u3093\u304c\u4f5c\u6210\u3057\u3066\u3044\u308b [descjop](https://github.com/karad/lein_template_descjop)\u3068\u3044\u3046\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u3082\u3042\u308a\u307e\u3059\u3002 Main Process \u5074\u3078\u306e figwheel \u306e\u8a2d\u5b9a\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001Window \u74b0\u5883\u3067\u306e\u958b\u767a\u3092\u8003\u616e\u3057\u305f\u8a2d\u5b9a\u306a\u3069\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5b9f\u969b\u306b\u958b\u767a\u3092\u884c\u3046\u65b9\u306f\u5408\u308f\u305b\u3066\u3001\u78ba\u8a8d\u3057\u3066\u307f\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002\n\n\u5b9f\u969b\u306b\u30a2\u30d7\u30ea\u958b\u767a\u3092\u9032\u3081\u3066\u3044\u304f\u3068\u3001\u4eca\u56de\u8aac\u660e\u3057\u305f\u69cb\u6210\u3084\u8a2d\u5b9a\u3067\u306f\u3001\u554f\u984c\u304c\u51fa\u3066\u304f\u308b\u3053\u3068\u3082\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u3072\u3068\u307e\u305a\u3001\u958b\u767a\u3092\u59cb\u3081\u308b\u969b\u306e\u8db3\u639b\u304b\u308a\u3068\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n# \u53c2\u8003\u8cc7\u6599\n\n- Electron\n  - [Documentation](http://electron.atom.io/docs/)\n  - [Quick Start](http://electron.atom.io/docs/tutorial/quick-start/)\n- ClojureScript\n  - [Compiler Options](https://github.com/clojure/clojurescript/wiki/Compiler-Options)\n  - [Quick Start](https://github.com/clojure/clojurescript/wiki/Quick-Start)  \n", "tags": ["ClojureScript", "Electron", "Clojure"]}