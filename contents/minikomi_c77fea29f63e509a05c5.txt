{"context": " More than 1 year has passed since last update.Clojurescript/Om\u3067\u697d\u3057\u304fSingle page app\u3092\u4f5c\u308b\u4e8b\u306b\u3064\u3044\u3066\u3001\u5b66\u3073\u306a\u304c\u3089\u66f8\u3053\u3046\u3068\u601d\u3063\u3066\u3044\u307e\u3059\uff0e\u306f\u3058\u3081\u306f\u3001\u74b0\u5883\u4f5c\u308a\u304b\u3089\u66f8\u304d\u307e\u3059\uff0e\n\nClojurescript\u3092\u4f7f\u3046\u524d\u306f\uff0e\uff0e\n\u307e\u305a\u3001leiningen\u3092install\u3057\u307e\u3057\u3087\u3046\uff0e(\u3053\u3061\u3089\u306e\u8d85\u5165\u9580\u3082\u304a\u3059\u3059\u3081\u3067\u3059\uff01)\nLeiningen\u306fClojure\u306eproject\u3092\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u3063\u305f\u308a\u3001\u30d6\u30eb\u30c9\u3057\u305f\u308a\u3001\u30c6\u30b9\u30c8\u3092\u3057\u305f\u308a\u3001lint\u3092\u3057\u305f\u308a\u3002\u3002\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u3067\u3059\uff0e\u4f7f\u308f\u306a\u3044\u3067Clojure\u3092\u66f8\u3044\u3066\u3044\u308b\u4eba\u5c11\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff0e\n\u3061\u3083\u3093\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u304b\u8a66\u3057\u307e\u3057\u3087\u3046\uff0eDefault\u306etemplate\u3092\u5229\u7528\u3057\u3066\u3001REPL\u3092start\u3057\u3066\u3001\u3061\u3087\u3063\u3068\u3060\u3051Clojure\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\uff0e\n$ mkdir clj\n$ cd clj\n$ lein new testproject\n$ cd testproject\n$ lein repl\n\nnREPL server started on port 53206 on host 127.0.0.1 - nrepl://127.0.0.1:53206\nREPL-y 0.3.2, nREPL 0.2.3\nClojure 1.6.0\nJava HotSpot(TM) 64-Bit Server VM 1.7.0_51-b13\n    Docs: (doc function-name-here)\n          (find-doc \"part-of-name-here\")\n  Source: (source function-name-here)\n Javadoc: (javadoc java-object-or-class-here)\n    Exit: Control+D or (exit) or (quit)\n Results: Stored in vars *1, *2, *3, an exception in *e\n\nuser=> (apply + '(1 2 3 4 5))\n15\n\n\nClojure\u52d5\u3044\u3066\u3044\u307e\u3059\u306d\uff0eOK!\n$ cd ..\n$ rm -rf ./testproject\n\n\nClojurescript\u3092\u3059\u3050\u305f\u3081\u3057\u305f\u3044\uff01\n\u5148\u306fdefault\u306etemplate\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u6b21\u306f\u3001Clojurescript\u306e\u3059\u3050\u51fa\u6765\u308btemplate\u3092\u3044\u304f\u3064\u304b\u7d39\u4ecb\u3057\u307e\u3059\uff0e\u307e\u305a\u306f\u3001minimal\u3067\u5206\u304b\u308a\u3084\u3059\u3044template:\nhttps://github.com/swannodette/mies\n$ lein new mies cljstestproject\n$ cd cljstestproject\n$ tree\n.\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljstestproject\n        \u2514\u2500\u2500 core.cljs\n\n\n\u304a\u30fc\u3002\u307b\u3068\u3093\u3069\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u3067\u3059\u306d:\n\nproject.clj\nclojure\u306eproject\u306econfig file\u3067\u3042\u308b\u3002\u5fc5\u8981\u306elibrary(Dependencies), leiningen\u306eplugin, build\u306econfig\u306a\u3069\u3092\u3001\u3053\u3053\u3067\u66f8\u304d\u307e\u3059\uff0e\n(defproject cljstestproject \"0.1.0-SNAPSHOT\"\n  :description \"FIXME: write this!\"\n  :url \"http://example.com/FIXME\"\n\n  :dependencies [[org.clojure/clojure \"1.6.0\"]\n                 [org.clojure/clojurescript \"0.0-2311\"]]\n\n  :plugins [[lein-cljsbuild \"1.0.4-SNAPSHOT\"]]\n\n  :source-paths [\"src\"]\n\n  :cljsbuild {\n    :builds [{:id \"cljstestproject\"\n              :source-paths [\"src\"]\n              :compiler {\n                :output-to \"cljstestproject.js\"\n                :output-dir \"out\"\n                :optimizations :none\n                :source-map true}}]})\n\n\n\n\n:dependencies - clojure\u3082\u3001clojurescript\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\uff0e\n\n:plugins - cljsbuild - clojurescript\u3092javascript\u306bbuild\u3059\u308b\u306e\u304c\u697d\u306b\u306a\u308bleiningen\u306eplugin\u3002\n\n:cljsbuild - \u5148\u306eplugin\u306econfig.\n\n\n\n:builds - \u3044\u304f\u3064\u304b\u306ebuild\u3092\u540c\u6642\u306b\u4f5c\u3063\u305f\u308a\u3001\u540d\u524d\u4ed8\u3051\u3066lein cljsbuild once \u540d\u524d \u3067\u305d\u308c\u3060\u3051\u3092\u4f5c\u3063\u305f\u308a\u3067\u304d\u307e\u3059\uff0e\u4eca\u56de\u306f\u3001development\u304c\u7c21\u5358\u306b\u3067\u304d\u308b:optimizations :none (\u3088\u3046\u306f\u3001minify \u3057\u306a\u3044\u3001\u305d\u306e\u307e\u307e\u66f8\u304d\u51fa\u3059)\u3001:soruce-map true \u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u306f\u3058\u3081\u306f\u3001\u3053\u308c\u3067OK!\n\n\n\n\n\u521dbuild\n\u4e00\u56debuild\u3057\u3066\u3001\u3069\u3046\u306a\u308b\u304b\u3001\u305f\u3081\u3057\u3066\u307f\u3088\u3046\u3002\n$ lein cljsbuild once\nCompiling ClojureScript.\nCompiling \"cljstestproject.js\" from [\"src\"]...\nSuccessfully compiled \"cljstestproject.js\" in 8.153 seconds.\n\n\u304a\u30fc\u3001cljstestproject.js\u304c\u51fa\u6765\u305f\u3088\u3046\u3067\u3059\uff0e\n$tree\n.\n\u251c\u2500\u2500 cljstestproject.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 out\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cljs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.cljs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 core.js.map\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cljstestproject\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.cljs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 core.js.map\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 goog\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 array\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 array.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 asserts\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 asserts.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 debug\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 error.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 deps.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 dom\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 nodetype.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 object\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 object.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 string\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 string.js\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 stringbuffer.js\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljstestproject\n        \u2514\u2500\u2500 core.cljs\n\n\u7d50\u69cb\u5897\u3048\u307e\u3057\u305f\u306d\uff01\ngoog?\u3042\u30fc\u3001\u305d\u3046\u3044\u3048\u3070\u3001Clojurescript\u306fgoogle closure library / google closure compiler\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\uff0eoptimization\u304c:none\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001minify\u3057\u306a\u3044\u3067\u3001\u4f7f\u3063\u3066\u3044\u308blibrary\u304c\u5168\u90e8\u305d\u306e\u307e\u307ejs\u304b\u3089\u5165\u3063\u3066\u304f\u308b\uff0edeploy\u3059\u308b\u3068\u304d\u3053\u308c\u306f\u3060\u3081\u3060\u3051\u3069\u3001dev\u3059\u308b\u3068\u304d\u306fOK\u3067\u3059\u3002\n\nindex.html\u3067build\u3057\u305fclojurescript\u3092\u4f7f\u3046\n\u305d\u3057\u3066\u3001index.html\u3092\u898b\u307e\u3057\u3087\u3046\uff0e\n<html>\n    <body>\n        <script src=\"out/goog/base.js\" type=\"text/javascript\"></script>\n        <script src=\"cljstestproject.js\" type=\"text/javascript\"></script>\n        <script type=\"text/javascript\">goog.require(\"cljstestproject.core\");</script>\n    </body>\n</html>\n\n\u304a\u30fc\uff01\u307f\u3058\u304b\u3044\u3002google closure library\u306ebase.js\u3068\u3001cljstestproject.js\u3068\u3092<script>\u3067\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u3001goog.require(\"cljstestproject.core\")\u3057\u3066\u3044\u308b\u3002\n\u3053\u308c\u3060\u3051\u3067\u3044\u3044\u306e\uff1f\nsrc/cljstestproject/core.cljs\u3092\u898b\u3066\u307f\u308b\u3068\u3002\u3002\n(ns cljstestproject.core)\n\n(enable-console-print!)\n\n(println \"Hello world!\")\n\n\u306a\u308b\u307b\u3069\u3002cljstestproject.core\u3068\u3044\u3046namespace\u3092\u3064\u304f\u3066\u3001print function\u3092console\u3067print\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3001\"hello world\"\u3092println\u3067\u51fa\u3057\u3066\u3044\u308b\u3002\nindex.html\u3092browser\u3067\u958b\u3044\u3066\u3001console\u3092\u898b\u3066\u307f\u3088\u3046\uff0e\n\n\u3042\u30fc\u3002Hello World\u51fa\u3066\u3044\u307e\u3059\u306d\uff0e\n\u4eca\u5ea6\u306f\u3001\u5909\u63db\u304c\u3042\u3063\u305f\u3089\u3001\u81ea\u52d5\u306bbuild\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\uff0e\n$ lein cljsbuild auto\nCompiling ClojureScript.\n\n\u304a\u30fc\u3002core.cljs\u3092\u5909\u3048\u3066\u307f\u3066\u3001\u3069\u3046\u306a\u308b\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\uff0e\u305f\u3068\u3048\u3070\u3002\u3002\n(ns cljstestproject.core)\n\n(enable-console-print!)\n\n(set! (.. js/document -body -innerHTML) \n      \"Hello browser!\")\n\n\n\nauto build\n\u4fdd\u5b58\u3057\u3066\u3001\u5148\u306ebuild\u3057\u3066\u3044\u308b\u6240\u3092\u898b\u308b\u3068\nlein cljsbuild auto\nCompiling ClojureScript.\nCompiling \"cljstestproject.js\" from [\"src\"]...\nSuccessfully compiled \"cljstestproject.js\" in 2.82 seconds.\n\n\u30d3\u30eb\u30c9\u3057\u76f4\u3057\u3066\u304f\u308c\u305f\u3088\u3046\u3067\u3059\u3002index.html\u3092browser\u3067refresh\u3059\u308b\u3068\u3002\u3002\n\n\u3053\u3093\u3069\u3001body\u306einnerHTML\u5909\u308f\u3063\u3066\u3044\u307e\u3059\uff0e\u3044\u3044\u3067\u3059\u306d\u3002\n\nBrowser REPL\u3092\u8db3\u3057\u307e\u3057\u3087\u3046\nClojure\u306eREPL\u3092Browser\u306e\u74b0\u5883\u3067Clojurescript\u306eREPL\u306b\u304b\u3048\u308b\u4e8b\u3067\u304d\u307e\u3059\u3002\u4eca\u7c21\u5358\u306b\u3067\u304d\u308b\u7528\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001austin\u3068\u3044\u3046plugin\u3067\u3059\u3002Sample\u306eproject\u3082\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u4eca\u4f5c\u3063\u305fproject\u3092REPL\u4f7f\u3048\u308b\u7528\u306b\u3057\u307e\u3059\uff0e\u540c\u6642\u306b\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u30ce\u30fc\u30de\u30eb\u306eproject\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\uff0e\n\n1) resources/\u3092\u4f5c\u3063\u3066\u3001index.html\u3092\u79fb\u52d5\u3057\u307e\u3059\uff0e\n2) rm -rf out/ \u3092\u3057\u307e\u3059\u3002\n3) resources/index.html\u3092edit\u3057\u307e\u3059\u3002\n\n<!DOCTYPE html>\n<html>\n  <body>\n    <div id=\"app\"></div>\n    <script src=\"/out/goog/base.js\" type=\"text/javascript\"></script>\n    <script src=\"/app.js\" type=\"text/javascript\"></script>\n    <script type=\"text/javascript\">goog.require(\"cljstestproject.core\");</script>\n  </body>\n</html>\n\n\n\n\u5909\u66f4\uff1a\n\n\n#app\u3068\u3044\u3046id\u3092\u4ed8\u3051\u3089\u308c\u305f<div>\u3092\u8db3\u3057\u307e\u3057\u305f\ncljstestproject.js\u3092/app.js\u306b\u3082\u5909\u3048\u3066\u3044\u307e\u3059\uff0e\n\u305d\u308c\u3067\u3082\u3001namespace\u306f\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307egoog.require(\"cljstestproject.core\");\u306b\u3057\u3066\u3044\u307e\u3059\uff0e\n\n\n4) project.clj\u3092\u5909\u3048\u307e\u3059\uff0e\n\n(defproject cljstestproject \"0.1.0-SNAPSHOT\"\n  :description \"FIXME: write this!\"\n  :url \"http://example.com/FIXME\"\n\n  :dependencies [[org.clojure/clojure \"1.6.0\"]\n                 [org.clojure/clojurescript \"0.0-2311\"]\n                 [ring \"1.2.2\"]\n                 [compojure \"1.1.8\"]\n                 [enlive \"1.1.5\"]]\n\n  :plugins [[lein-cljsbuild \"1.0.4-SNAPSHOT\"]\n            [com.cemerick/austin \"0.1.4\"]]\n\n  :source-paths [\"src/clj\" \"src/cljs\"]\n\n  :repl-options  {:init-ns cljstestproject.server}\n\n  :cljsbuild {\n    :builds [{:id \"cljstestproject\"\n              :source-paths [\"src/cljs\"]\n              :compiler {:output-to     \"resources/public/app.js\"\n                         :output-dir    \"resources/public/out\"\n                         :optimizations :none\n                         :source-map true}}]})\n\n\n\n\n\u5909\u66f4\uff1a\n\n\n:dependencies\u306bring, compojure, enlive (Clojure\u306e server / routing / templating \u30e9\u30a4\u30d6\u30e9\u30ea\u30fc)\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\uff0e\u3053\u308c\u304b\u3089\u3001browser-repl\u3092\u4ed8\u3051\u308b\u305f\u3081\u306b\u3001Clojure\u3067\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30fc\u30d0\u30fc\u3082\u4f5c\u308a\u307e\u3059\uff0e\n\n:plugins\u306baustin\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\uff0e\u666e\u901a\u306eclojurescript\u306erepl\u3088\u308a\u3001\u7c21\u5358\u306b\u4f7f\u3048\u308b\u7528\u306b\u51fa\u6765\u3066\u3044\u307e\u3059\uff0e\n\n:repl-options \u306b {:init-ns cljstestproject.server}\u3002\u3053\u308c\u304b\u3089\u66f8\u304f\u30b5\u30fc\u30d0\u30fc\u304c\u3001repl\u59cb\u307e\u3063\u3066\u3044\u308b\u6642\u3001\u81ea\u52d5\u306b\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u304f\u308c\u308b\u7528\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\n\n:source-paths\u306b\u3001clj\u3082cljs\u3082\u3042\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n:cljsbuild\u306e:output-to\u3059\u308bdirectory\u3082resources/\u306b\u306a\u304b\u306b\u5909\u3048\u3066\u3044\u307e\u3059\uff0e\n\n\n5) mkdir src/clj && mkdir src/cljs - clj \u3068 cljs\u3092\u5206\u3051\u307e\u3059\uff0e\n6) mv src/cljstestproject src/cljs/ - \u4eca\u307e\u3067\u306ecljs\u3092src/cljs\u306b\u52d5\u304b\u3059\uff0e\n7) src/cljs/cljstestproject/core.cljs\u306b clojure.browser.repl\u3092\u8db3\u3057\u307e\u3059\u3002\n\n(ns cljstestproject.core\n  (:require [clojure.browser.repl]))\n\n(enable-console-print!)\n\n(def app-element (.getElementById js/document \"app\"))\n\n(set! (.. app-element -innerHTML) \"Hello Browser!\")\n\n\u3069\u3046\u3058\u306b\u3001\u5148\u8db3\u3057\u305f<div id=\"app\">\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\uff0e\n\n8) create src/clj/server.cljs\n\n\n(ns cljstestproject.server\n  (:require [cemerick.austin.repls :refer (browser-connected-repl-js)]\n            [net.cgrand.enlive-html :as enlive]\n            [compojure.route :refer (resources)]\n            [compojure.core :refer (GET defroutes)]\n            ring.adapter.jetty\n            [clojure.java.io :as io]))\n\n; #1\n(enlive/deftemplate page\n  (io/resource \"index.html\")\n  []\n  [:body] (enlive/append\n            (enlive/html [:script (browser-connected-repl-js)])))\n\n; #2\n(defroutes site\n  (resources \"/\")\n  (GET \"/*\" req (page)))\n\n; #3 \n(defn run\n  []\n  (defonce ^:private server\n    (ring.adapter.jetty/run-jetty #'site {:port 8080 :join? false}))\n  server)\n\n; #4\n(defn browser-repl []\n  (let [repl-env (reset! cemerick.austin.repls/browser-repl-env\n                         (cemerick.austin/repl-env))]\n    (cemerick.austin.repls/cljs-repl repl-env)))\n\n\n\u3053\u306eclj\u3092\u7c21\u5358\u306b\u8aac\u660e\u3059\u308b\u3068\uff1a\n\n\n#1 - index.html\u3092template\u5316\u3057\u3066\u3001body\u306bbrowser-repl\u306e\u305f\u3081\u306ejavascript\u3092\u8db3\u3057\u307e\u3059\uff0e\n\n#2 - \u30d5\u30a1\u30a4\u30eb\u306erequest\u304c\u6765\u305f\u3089resources/\u306e\u4e2d\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u305d\u308d\u3063\u305f\u3089\u3001\u305d\u308c\u3092\u51fa\u3057\u307e\u3059\uff0e\u306a\u304b\u3063\u305f\u3089\u3001\u5148\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u51fa\u3057\u307e\u3059.\n\n#3 & #4 - clojure\u306eREPL\u304b\u3089\u547c\u3076\u3001server\u3092\u30b9\u30bf\u30fc\u30c8\u3057\u3066\u3001browser-repl\u3092\u30b9\u30bf\u30fc\u30c8\u3059\u308b\u305f\u3081\u306efunction.\n\n\u7d50\u679c\u306f\u3053\u306e\u74b0\u5883\u3067\u3059\uff1a\n.\n\u251c\u2500\u2500 project.clj\n\u251c\u2500\u2500 resources\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 index.html\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 clj\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 cljstestproject\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 server.clj\n    \u2514\u2500\u2500 cljs\n        \u2514\u2500\u2500 cljstestproject\n            \u2514\u2500\u2500 core.cljs\n\n\n\nBrowser-REPL\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n$ lein do cljsbuild once, repl\nCompiling ClojureScript.\nCompiling \"resources/public/app.js\" from [\"src/cljs\"]...\nSuccessfully compiled \"resources/public/app.js\" in 8.525 seconds.\n\nnREPL server started on port 55622 on host 127.0.0.1 - nrepl://127.0.0.1:55622\nREPL-y 0.3.2, nREPL 0.2.3\nClojure 1.6.0\nJava HotSpot(TM) 64-Bit Server VM 1.7.0_51-b13\n    Docs: (doc function-name-here)\n          (find-doc \"part-of-name-here\")\n  Source: (source function-name-here)\n Javadoc: (javadoc java-object-or-class-here)\n    Exit: Control+D or (exit) or (quit)\n Results: Stored in vars *1, *2, *3, an exception in *e\n\ncljstestproject.server=>\n\n\nClojurescript\u304c\u30d3\u30eb\u30c9\u3057\u3066\u3001repl\u304ccljstestproject.server\u3068\u3044\u3046namespace\u3067\u521d\u3081\u3066\u304f\u308c\u305f\uff0e\ncljstestproject.server=> (run)\n2014-09-08 15:02:03.219:INFO:oejs.Server:jetty-7.6.8.v20121106\n2014-09-08 15:02:03.227:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080\n#<Server org.eclipse.jetty.server.Server@2ea84a17>\ncljstestproject.server=> (browser-repl)\nBrowser-REPL ready @ http://localhost:55680/6793/repl/start\nType `:cljs/quit` to stop the ClojureScript REPL\nnil\ncljs.user=>\n\n\nhttp://localhost:8080\u3067\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3001browser-repl\u304c\u59cb\u307e\u3063\u305f\uff0e\n\n\u76f8\u5909\u308f\u3089\u305a\u3001hello browser\u304c\u51fa\u3066\u3044\u307e\u3059\uff0e\ncljs.user=> cljstestproject.core/app-element\n#<[object HTMLDivElement]>\n\n\u3061\u3083\u3093\u3068app-element\u304c\u3042\u308a\u307e\u3059\u3002\ncljs.user=> (set! (.. cljstestproject.core/app-element -innerHTML) \"banana\")\n\"banana\"\n\n\ncljs.user=> (set! (.. cljstestproject.core/app-element -style -backgroundColor) \"green\")\n\"green\"\ncljs.user=> (set! (.. cljstestproject.core/app-element -style -color) \"white\")\n\"white\"\n\n\n\u3053\u306e\u98a8\u306b\u3001\u4fbf\u5229\u306aREPL\u304c\u4f7f\u3048\u307e\u3059\uff0e\n\u4f8b\u3048\u3070\u3001js\u3068cljs\u306e\u985e\u7fa9\u8a9e\u3092\u7df4\u7fd2\u3059\u308b\u3002\n\u4eca\u65e5\u306f\u3053\u3053\u307e\u3067\uff01\u6b21\u306f\u3001refresh\u3057\u306a\u304f\u3066\u3082\u3001\u81ea\u52d5\u306b\u65b0\u3057\u304f\u306a\u3063\u305fclojurescript\u304creload\u3059\u308bfigwheel\u3068\u3044\u3046plugin\u3092\u7d39\u4ecb\u3057\u307e\u3059\uff0e\nClojurescript/Om\u3067\u697d\u3057\u304fSingle page app\u3092\u4f5c\u308b\u4e8b\u306b\u3064\u3044\u3066\u3001\u5b66\u3073\u306a\u304c\u3089\u66f8\u3053\u3046\u3068\u601d\u3063\u3066\u3044\u307e\u3059\uff0e\u306f\u3058\u3081\u306f\u3001\u74b0\u5883\u4f5c\u308a\u304b\u3089\u66f8\u304d\u307e\u3059\uff0e\n\n\n## Clojurescript\u3092\u4f7f\u3046\u524d\u306f\uff0e\uff0e\n\n\u307e\u305a\u3001[leiningen](https://github.com/technomancy/leiningen/blob/stable/README.md#installation)\u3092install\u3057\u307e\u3057\u3087\u3046\uff0e(\u3053\u3061\u3089\u306e[\u8d85\u5165\u9580](http://qiita.com/ka_/items/a3f79b761e25d485f2a9)\u3082\u304a\u3059\u3059\u3081\u3067\u3059\uff01)\n\nLeiningen\u306fClojure\u306eproject\u3092\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u3063\u305f\u308a\u3001\u30d6\u30eb\u30c9\u3057\u305f\u308a\u3001\u30c6\u30b9\u30c8\u3092\u3057\u305f\u308a\u3001lint\u3092\u3057\u305f\u308a\u3002\u3002\u4fbf\u5229\u306a\u30c4\u30fc\u30eb\u3067\u3059\uff0e\u4f7f\u308f\u306a\u3044\u3067Clojure\u3092\u66f8\u3044\u3066\u3044\u308b\u4eba\u5c11\u306a\u3044\u3067\u3057\u3087\u3046\u304b\uff0e\n\n\u3061\u3083\u3093\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u304b\u8a66\u3057\u307e\u3057\u3087\u3046\uff0eDefault\u306etemplate\u3092\u5229\u7528\u3057\u3066\u3001REPL\u3092start\u3057\u3066\u3001\u3061\u3087\u3063\u3068\u3060\u3051Clojure\u3092\u66f8\u3044\u3066\u307f\u307e\u3059\uff0e\n\n```text\n$ mkdir clj\n$ cd clj\n$ lein new testproject\n$ cd testproject\n$ lein repl\n\nnREPL server started on port 53206 on host 127.0.0.1 - nrepl://127.0.0.1:53206\nREPL-y 0.3.2, nREPL 0.2.3\nClojure 1.6.0\nJava HotSpot(TM) 64-Bit Server VM 1.7.0_51-b13\n    Docs: (doc function-name-here)\n          (find-doc \"part-of-name-here\")\n  Source: (source function-name-here)\n Javadoc: (javadoc java-object-or-class-here)\n    Exit: Control+D or (exit) or (quit)\n Results: Stored in vars *1, *2, *3, an exception in *e\n\nuser=> (apply + '(1 2 3 4 5))\n15\n\n```\n\nClojure\u52d5\u3044\u3066\u3044\u307e\u3059\u306d\uff0eOK!\n\n``` text\n$ cd ..\n$ rm -rf ./testproject\n```\n\n## Clojurescript\u3092\u3059\u3050\u305f\u3081\u3057\u305f\u3044\uff01\n\n\u5148\u306fdefault\u306etemplate\u3092\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\u6b21\u306f\u3001Clojurescript\u306e\u3059\u3050\u51fa\u6765\u308btemplate\u3092\u3044\u304f\u3064\u304b\u7d39\u4ecb\u3057\u307e\u3059\uff0e\u307e\u305a\u306f\u3001minimal\u3067\u5206\u304b\u308a\u3084\u3059\u3044template:\n\nhttps://github.com/swannodette/mies\n\n```text\n$ lein new mies cljstestproject\n$ cd cljstestproject\n$ tree\n.\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljstestproject\n        \u2514\u2500\u2500 core.cljs\n\n```\n\n\u304a\u30fc\u3002\u307b\u3068\u3093\u3069\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u3067\u3059\u306d:\n\n## project.clj \n\nclojure\u306eproject\u306econfig file\u3067\u3042\u308b\u3002\u5fc5\u8981\u306elibrary(Dependencies), leiningen\u306eplugin, build\u306econfig\u306a\u3069\u3092\u3001\u3053\u3053\u3067\u66f8\u304d\u307e\u3059\uff0e\n\n``` clojure\n(defproject cljstestproject \"0.1.0-SNAPSHOT\"\n  :description \"FIXME: write this!\"\n  :url \"http://example.com/FIXME\"\n\n  :dependencies [[org.clojure/clojure \"1.6.0\"]\n                 [org.clojure/clojurescript \"0.0-2311\"]]\n\n  :plugins [[lein-cljsbuild \"1.0.4-SNAPSHOT\"]]\n\n  :source-paths [\"src\"]\n\n  :cljsbuild {\n    :builds [{:id \"cljstestproject\"\n              :source-paths [\"src\"]\n              :compiler {\n                :output-to \"cljstestproject.js\"\n                :output-dir \"out\"\n                :optimizations :none\n                :source-map true}}]})\n\n```\n\n* `:dependencies` - clojure\u3082\u3001clojurescript\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\uff0e\n* `:plugins` - [cljsbuild](https://github.com/emezeske/lein-cljsbuild) - clojurescript\u3092javascript\u306bbuild\u3059\u308b\u306e\u304c\u697d\u306b\u306a\u308bleiningen\u306eplugin\u3002\n* `:cljsbuild` - \u5148\u306eplugin\u306econfig.\n    * `:builds` - \u3044\u304f\u3064\u304b\u306ebuild\u3092\u540c\u6642\u306b\u4f5c\u3063\u305f\u308a\u3001\u540d\u524d\u4ed8\u3051\u3066`lein cljsbuild once \u540d\u524d` \u3067\u305d\u308c\u3060\u3051\u3092\u4f5c\u3063\u305f\u308a\u3067\u304d\u307e\u3059\uff0e\u4eca\u56de\u306f\u3001development\u304c\u7c21\u5358\u306b\u3067\u304d\u308b`:optimizations :none` (\u3088\u3046\u306f\u3001minify \u3057\u306a\u3044\u3001\u305d\u306e\u307e\u307e\u66f8\u304d\u51fa\u3059)\u3001`:soruce-map true` \u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u306f\u3058\u3081\u306f\u3001\u3053\u308c\u3067OK!\n\n## \u521dbuild\n\n\u4e00\u56debuild\u3057\u3066\u3001\u3069\u3046\u306a\u308b\u304b\u3001\u305f\u3081\u3057\u3066\u307f\u3088\u3046\u3002\n\n``` text\n$ lein cljsbuild once\nCompiling ClojureScript.\nCompiling \"cljstestproject.js\" from [\"src\"]...\nSuccessfully compiled \"cljstestproject.js\" in 8.153 seconds.\n```\n\n\u304a\u30fc\u3001cljstestproject.js\u304c\u51fa\u6765\u305f\u3088\u3046\u3067\u3059\uff0e\n\n``` text\n$tree\n.\n\u251c\u2500\u2500 cljstestproject.js\n\u251c\u2500\u2500 index.html\n\u251c\u2500\u2500 out\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cljs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.cljs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 core.js.map\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cljstestproject\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.cljs\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 core.js\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 core.js.map\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 goog\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 array\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 array.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 asserts\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 asserts.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 base.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 debug\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 error.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 deps.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 dom\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 nodetype.js\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 object\n\u2502\u00a0\u00a0     \u2502\u00a0\u00a0 \u2514\u2500\u2500 object.js\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 string\n\u2502\u00a0\u00a0         \u251c\u2500\u2500 string.js\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 stringbuffer.js\n\u251c\u2500\u2500 project.clj\n\u2514\u2500\u2500 src\n    \u2514\u2500\u2500 cljstestproject\n        \u2514\u2500\u2500 core.cljs\n```\n\n\u7d50\u69cb\u5897\u3048\u307e\u3057\u305f\u306d\uff01\n\ngoog?\u3042\u30fc\u3001\u305d\u3046\u3044\u3048\u3070\u3001Clojurescript\u306f[google closure library / google closure compiler](https://developers.google.com/closure/)\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\uff0e`optimization`\u304c`:none`\u306b\u306a\u3063\u3066\u3044\u308b\u305f\u3081\u3001minify\u3057\u306a\u3044\u3067\u3001\u4f7f\u3063\u3066\u3044\u308blibrary\u304c\u5168\u90e8\u305d\u306e\u307e\u307ejs\u304b\u3089\u5165\u3063\u3066\u304f\u308b\uff0edeploy\u3059\u308b\u3068\u304d\u3053\u308c\u306f\u3060\u3081\u3060\u3051\u3069\u3001dev\u3059\u308b\u3068\u304d\u306fOK\u3067\u3059\u3002\n\n## index.html\u3067build\u3057\u305fclojurescript\u3092\u4f7f\u3046\n\n\u305d\u3057\u3066\u3001`index.html`\u3092\u898b\u307e\u3057\u3087\u3046\uff0e\n\n```html\n<html>\n    <body>\n        <script src=\"out/goog/base.js\" type=\"text/javascript\"></script>\n        <script src=\"cljstestproject.js\" type=\"text/javascript\"></script>\n        <script type=\"text/javascript\">goog.require(\"cljstestproject.core\");</script>\n    </body>\n</html>\n```\n\u304a\u30fc\uff01\u307f\u3058\u304b\u3044\u3002google closure library\u306e`base.js`\u3068\u3001`cljstestproject.js`\u3068\u3092`<script>`\u3067\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u3001`goog.require(\"cljstestproject.core\")`\u3057\u3066\u3044\u308b\u3002\n\n\u3053\u308c\u3060\u3051\u3067\u3044\u3044\u306e\uff1f\n\nsrc/cljstestproject/core.cljs\u3092\u898b\u3066\u307f\u308b\u3068\u3002\u3002\n\n```clj\n(ns cljstestproject.core)\n\n(enable-console-print!)\n\n(println \"Hello world!\")\n```\n\n\u306a\u308b\u307b\u3069\u3002cljstestproject.core\u3068\u3044\u3046namespace\u3092\u3064\u304f\u3066\u3001print function\u3092console\u3067print\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3001\"hello world\"\u3092println\u3067\u51fa\u3057\u3066\u3044\u308b\u3002\n\n`index.html`\u3092browser\u3067\u958b\u3044\u3066\u3001console\u3092\u898b\u3066\u307f\u3088\u3046\uff0e\n\n![Screen Shot 2014-09-08 at 1.38.11 PM.png](https://qiita-image-store.s3.amazonaws.com/0/32921/ae8f74e5-563d-8fb8-fb04-82f5f67a5a2f.png)\n\n\u3042\u30fc\u3002Hello World\u51fa\u3066\u3044\u307e\u3059\u306d\uff0e\n\n\u4eca\u5ea6\u306f\u3001\u5909\u63db\u304c\u3042\u3063\u305f\u3089\u3001\u81ea\u52d5\u306bbuild\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\uff0e\n\n```test\n$ lein cljsbuild auto\nCompiling ClojureScript.\n```\n\n\u304a\u30fc\u3002core.cljs\u3092\u5909\u3048\u3066\u307f\u3066\u3001\u3069\u3046\u306a\u308b\u304b\u898b\u3066\u307f\u307e\u3057\u3087\u3046\uff0e\u305f\u3068\u3048\u3070\u3002\u3002\n\n```clj\n(ns cljstestproject.core)\n\n(enable-console-print!)\n\n(set! (.. js/document -body -innerHTML) \n      \"Hello browser!\")\n\n```\n\n## auto build\n\n\u4fdd\u5b58\u3057\u3066\u3001\u5148\u306ebuild\u3057\u3066\u3044\u308b\u6240\u3092\u898b\u308b\u3068\n\n```test\nlein cljsbuild auto\nCompiling ClojureScript.\nCompiling \"cljstestproject.js\" from [\"src\"]...\nSuccessfully compiled \"cljstestproject.js\" in 2.82 seconds.\n```\n\n\u30d3\u30eb\u30c9\u3057\u76f4\u3057\u3066\u304f\u308c\u305f\u3088\u3046\u3067\u3059\u3002index.html\u3092browser\u3067refresh\u3059\u308b\u3068\u3002\u3002\n\n![Screen Shot 2014-09-08 at 1.46.50 PM.png](https://qiita-image-store.s3.amazonaws.com/0/32921/a2bb0c8f-7b24-ffc3-488e-864950ca5866.png)\n\n\u3053\u3093\u3069\u3001body\u306einnerHTML\u5909\u308f\u3063\u3066\u3044\u307e\u3059\uff0e\u3044\u3044\u3067\u3059\u306d\u3002\n\n## Browser REPL\u3092\u8db3\u3057\u307e\u3057\u3087\u3046\n\nClojure\u306eREPL\u3092Browser\u306e\u74b0\u5883\u3067Clojurescript\u306eREPL\u306b\u304b\u3048\u308b\u4e8b\u3067\u304d\u307e\u3059\u3002\u4eca\u7c21\u5358\u306b\u3067\u304d\u308b\u7528\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001[austin](https://github.com/cemerick/austin)\u3068\u3044\u3046plugin\u3067\u3059\u3002[Sample\u306eproject](https://github.com/cemerick/austin)\u3082\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u4eca\u4f5c\u3063\u305fproject\u3092REPL\u4f7f\u3048\u308b\u7528\u306b\u3057\u307e\u3059\uff0e\u540c\u6642\u306b\u3001\u3082\u3046\u3061\u3087\u3063\u3068\u30ce\u30fc\u30de\u30eb\u306eproject\u306e\u30ec\u30a4\u30a2\u30a6\u30c8\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\uff0e\n\n* 1) `resources/`\u3092\u4f5c\u3063\u3066\u3001index.html\u3092\u79fb\u52d5\u3057\u307e\u3059\uff0e\n* 2) rm -rf out/ \u3092\u3057\u307e\u3059\u3002\n* 3) resources/index.html\u3092edit\u3057\u307e\u3059\u3002\n\n``` html\n<!DOCTYPE html>\n<html>\n  <body>\n    <div id=\"app\"></div>\n    <script src=\"/out/goog/base.js\" type=\"text/javascript\"></script>\n    <script src=\"/app.js\" type=\"text/javascript\"></script>\n    <script type=\"text/javascript\">goog.require(\"cljstestproject.core\");</script>\n  </body>\n</html>\n```\n* \u5909\u66f4\uff1a\n    * `#app`\u3068\u3044\u3046id\u3092\u4ed8\u3051\u3089\u308c\u305f`<div>`\u3092\u8db3\u3057\u307e\u3057\u305f\n    * cljstestproject.js\u3092/app.js\u306b\u3082\u5909\u3048\u3066\u3044\u307e\u3059\uff0e\n    * \u305d\u308c\u3067\u3082\u3001namespace\u306f\u5909\u308f\u3089\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e`goog.require(\"cljstestproject.core\");`\u306b\u3057\u3066\u3044\u307e\u3059\uff0e\n\n* 4) project.clj\u3092\u5909\u3048\u307e\u3059\uff0e\n\n``` clj\n(defproject cljstestproject \"0.1.0-SNAPSHOT\"\n  :description \"FIXME: write this!\"\n  :url \"http://example.com/FIXME\"\n\n  :dependencies [[org.clojure/clojure \"1.6.0\"]\n                 [org.clojure/clojurescript \"0.0-2311\"]\n                 [ring \"1.2.2\"]\n                 [compojure \"1.1.8\"]\n                 [enlive \"1.1.5\"]]\n\n  :plugins [[lein-cljsbuild \"1.0.4-SNAPSHOT\"]\n            [com.cemerick/austin \"0.1.4\"]]\n\n  :source-paths [\"src/clj\" \"src/cljs\"]\n\n  :repl-options  {:init-ns cljstestproject.server}\n\n  :cljsbuild {\n    :builds [{:id \"cljstestproject\"\n              :source-paths [\"src/cljs\"]\n              :compiler {:output-to     \"resources/public/app.js\"\n                         :output-dir    \"resources/public/out\"\n                         :optimizations :none\n                         :source-map true}}]})\n\n```\n\n* \u5909\u66f4\uff1a\n    * `:dependencies`\u306b[ring](https://github.com/ring-clojure/ring), [compojure](https://github.com/weavejester/compojure), [enlive](https://github.com/cgrand/enlive) (Clojure\u306e server / routing / templating \u30e9\u30a4\u30d6\u30e9\u30ea\u30fc)\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\uff0e\u3053\u308c\u304b\u3089\u3001browser-repl\u3092\u4ed8\u3051\u308b\u305f\u3081\u306b\u3001Clojure\u3067\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30fc\u30d0\u30fc\u3082\u4f5c\u308a\u307e\u3059\uff0e\n    * `:plugins`\u306b[austin](https://github.com/cemerick/austin)\u3092\u8db3\u3057\u3066\u3044\u307e\u3059\uff0e\u666e\u901a\u306eclojurescript\u306erepl\u3088\u308a\u3001\u7c21\u5358\u306b\u4f7f\u3048\u308b\u7528\u306b\u51fa\u6765\u3066\u3044\u307e\u3059\uff0e\n    * `:repl-options` \u306b {:init-ns cljstestproject.server}\u3002\u3053\u308c\u304b\u3089\u66f8\u304f\u30b5\u30fc\u30d0\u30fc\u304c\u3001repl\u59cb\u307e\u3063\u3066\u3044\u308b\u6642\u3001\u81ea\u52d5\u306b\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u304f\u308c\u308b\u7528\u306b\u8a2d\u5b9a\u3057\u307e\u3059\uff0e\n    * `:source-paths`\u306b\u3001clj\u3082cljs\u3082\u3042\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n    * `:cljsbuild`\u306e`:output-to`\u3059\u308bdirectory\u3082`resources/`\u306b\u306a\u304b\u306b\u5909\u3048\u3066\u3044\u307e\u3059\uff0e\n\n* 5) `mkdir src/clj && mkdir src/cljs` - clj \u3068 cljs\u3092\u5206\u3051\u307e\u3059\uff0e\n* 6) `mv src/cljstestproject src/cljs/` - \u4eca\u307e\u3067\u306ecljs\u3092`src/cljs`\u306b\u52d5\u304b\u3059\uff0e\n\n* 7) src/cljs/cljstestproject/core.cljs\u306b `clojure.browser.repl`\u3092\u8db3\u3057\u307e\u3059\u3002\n\n``` clj\n(ns cljstestproject.core\n  (:require [clojure.browser.repl]))\n\n(enable-console-print!)\n\n(def app-element (.getElementById js/document \"app\"))\n\n(set! (.. app-element -innerHTML) \"Hello Browser!\")\n```\n\n\u3069\u3046\u3058\u306b\u3001\u5148\u8db3\u3057\u305f`<div id=\"app\">`\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\uff0e\n\n* 8) create src/clj/server.cljs\n\n``` clj\n\n(ns cljstestproject.server\n  (:require [cemerick.austin.repls :refer (browser-connected-repl-js)]\n            [net.cgrand.enlive-html :as enlive]\n            [compojure.route :refer (resources)]\n            [compojure.core :refer (GET defroutes)]\n            ring.adapter.jetty\n            [clojure.java.io :as io]))\n\n; #1\n(enlive/deftemplate page\n  (io/resource \"index.html\")\n  []\n  [:body] (enlive/append\n            (enlive/html [:script (browser-connected-repl-js)])))\n\n; #2\n(defroutes site\n  (resources \"/\")\n  (GET \"/*\" req (page)))\n\n; #3 \n(defn run\n  []\n  (defonce ^:private server\n    (ring.adapter.jetty/run-jetty #'site {:port 8080 :join? false}))\n  server)\n\n; #4\n(defn browser-repl []\n  (let [repl-env (reset! cemerick.austin.repls/browser-repl-env\n                         (cemerick.austin/repl-env))]\n    (cemerick.austin.repls/cljs-repl repl-env)))\n\n```\n\n\u3053\u306eclj\u3092\u7c21\u5358\u306b\u8aac\u660e\u3059\u308b\u3068\uff1a\n\n* `#1` - index.html\u3092template\u5316\u3057\u3066\u3001body\u306bbrowser-repl\u306e\u305f\u3081\u306ejavascript\u3092\u8db3\u3057\u307e\u3059\uff0e\n* `#2` - \u30d5\u30a1\u30a4\u30eb\u306erequest\u304c\u6765\u305f\u3089resources/\u306e\u4e2d\u306e\u30d5\u30a1\u30a4\u30eb\u3068\u305d\u308d\u3063\u305f\u3089\u3001\u305d\u308c\u3092\u51fa\u3057\u307e\u3059\uff0e\u306a\u304b\u3063\u305f\u3089\u3001\u5148\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u51fa\u3057\u307e\u3059.\n* `#3 & #4` - clojure\u306eREPL\u304b\u3089\u547c\u3076\u3001server\u3092\u30b9\u30bf\u30fc\u30c8\u3057\u3066\u3001browser-repl\u3092\u30b9\u30bf\u30fc\u30c8\u3059\u308b\u305f\u3081\u306efunction.\n\n\u7d50\u679c\u306f\u3053\u306e\u74b0\u5883\u3067\u3059\uff1a\n\n```text\n.\n\u251c\u2500\u2500 project.clj\n\u251c\u2500\u2500 resources\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 index.html\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 clj\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 cljstestproject\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 server.clj\n    \u2514\u2500\u2500 cljs\n        \u2514\u2500\u2500 cljstestproject\n            \u2514\u2500\u2500 core.cljs\n\n```\n\n## Browser-REPL\u8a66\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01\n\n``` text\n$ lein do cljsbuild once, repl\nCompiling ClojureScript.\nCompiling \"resources/public/app.js\" from [\"src/cljs\"]...\nSuccessfully compiled \"resources/public/app.js\" in 8.525 seconds.\n\nnREPL server started on port 55622 on host 127.0.0.1 - nrepl://127.0.0.1:55622\nREPL-y 0.3.2, nREPL 0.2.3\nClojure 1.6.0\nJava HotSpot(TM) 64-Bit Server VM 1.7.0_51-b13\n    Docs: (doc function-name-here)\n          (find-doc \"part-of-name-here\")\n  Source: (source function-name-here)\n Javadoc: (javadoc java-object-or-class-here)\n    Exit: Control+D or (exit) or (quit)\n Results: Stored in vars *1, *2, *3, an exception in *e\n\ncljstestproject.server=>\n\n```\n\nClojurescript\u304c\u30d3\u30eb\u30c9\u3057\u3066\u3001repl\u304ccljstestproject.server\u3068\u3044\u3046namespace\u3067\u521d\u3081\u3066\u304f\u308c\u305f\uff0e\n\n``` text\ncljstestproject.server=> (run)\n2014-09-08 15:02:03.219:INFO:oejs.Server:jetty-7.6.8.v20121106\n2014-09-08 15:02:03.227:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080\n#<Server org.eclipse.jetty.server.Server@2ea84a17>\ncljstestproject.server=> (browser-repl)\nBrowser-REPL ready @ http://localhost:55680/6793/repl/start\nType `:cljs/quit` to stop the ClojureScript REPL\nnil\ncljs.user=>\n\n```\n\nhttp://localhost:8080\u3067\u30b5\u30fc\u30d0\u30fc\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u3001browser-repl\u304c\u59cb\u307e\u3063\u305f\uff0e\n\n![Screen Shot 2014-09-08 at 3.03.11 PM.png](https://qiita-image-store.s3.amazonaws.com/0/32921/bb5dcf01-e613-4d3a-b2a4-62daf38f3d62.png)\n\n\u76f8\u5909\u308f\u3089\u305a\u3001hello browser\u304c\u51fa\u3066\u3044\u307e\u3059\uff0e\n\n\n``` text\ncljs.user=> cljstestproject.core/app-element\n#<[object HTMLDivElement]>\n```\n\u3061\u3083\u3093\u3068app-element\u304c\u3042\u308a\u307e\u3059\u3002\n\n``` text \ncljs.user=> (set! (.. cljstestproject.core/app-element -innerHTML) \"banana\")\n\"banana\"\n```\n\n![Screen Shot 2014-09-08 at 3.27.09 PM.png](https://qiita-image-store.s3.amazonaws.com/0/32921/f3d358b7-09e4-a788-7c24-fb8e787c4715.png)\n\n``` text\ncljs.user=> (set! (.. cljstestproject.core/app-element -style -backgroundColor) \"green\")\n\"green\"\ncljs.user=> (set! (.. cljstestproject.core/app-element -style -color) \"white\")\n\"white\"\n```\n\n![Screen Shot 2014-09-08 at 3.29.45 PM.png](https://qiita-image-store.s3.amazonaws.com/0/32921/71e2e31d-3cf2-454e-b1da-36d9b56a7121.png)\n\n\u3053\u306e\u98a8\u306b\u3001\u4fbf\u5229\u306aREPL\u304c\u4f7f\u3048\u307e\u3059\uff0e\n\u4f8b\u3048\u3070\u3001js\u3068cljs\u306e[\u985e\u7fa9\u8a9e](http://himera.herokuapp.com/synonym.html)\u3092\u7df4\u7fd2\u3059\u308b\u3002\n\n\u4eca\u65e5\u306f\u3053\u3053\u307e\u3067\uff01\u6b21\u306f\u3001refresh\u3057\u306a\u304f\u3066\u3082\u3001\u81ea\u52d5\u306b\u65b0\u3057\u304f\u306a\u3063\u305fclojurescript\u304creload\u3059\u308b`figwheel`\u3068\u3044\u3046plugin\u3092\u7d39\u4ecb\u3057\u307e\u3059\uff0e\n\n", "tags": ["ClojureScript", "Beginner"]}