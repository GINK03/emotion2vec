{"context": "Docker for Mac\u3092\u4f7f\u3063\u3066\u3044\u305f\u308950GB\u4f4d\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092\u5727\u8feb\u3057\u3066\u3044\u305f\u306e\u3067\u3044\u308d\u3093\u306a\u3082\u306e\u3092\u524a\u9664\u3059\u308b\n\u624b\u5143\u3067Docker\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u3063\u3066\u306f\u58ca\u3057\u4f5c\u3063\u3066\u306f\u58ca\u3057\u3092\u7e70\u308a\u8fd4\u3057\u3066\u305f\u3089\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u304c10GB\u3092\u5207\u3063\u3066\u3044\u305f\u3002\n$ docker rmi\u30b3\u30de\u30f3\u30c9\u306f\u5e38\u65e5\u9803\u304b\u3089\u53e9\u3044\u3066\u3044\u305f\u304c\u3001\u5168\u7136\u7a7a\u304d\u5bb9\u91cf\u304c\u5897\u3048\u306a\u3044\u306e\u3067\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u6f01\u3063\u305f\u308aGitHub\u3092\u6f01\u3063\u305f\u8a18\u9332\u3002\n\n\u30bf\u30b0\u306e\u3064\u3044\u3066\u3044\u306a\u3044Docker Image\u3092\u524a\u9664\u3059\u308b\n\n\u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u3066\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n\u30bf\u30b0\u306e\u3064\u3044\u3066\u3044\u306a\u3044 <none> \u306aDocker\u30a4\u30e1\u30fc\u30b8\u306e\u4e00\u89a7\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002\n~ $ docker images --filter \"dangling=true\"\nREPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE\n<none>                        <none>              3c3e0fd3f20b        7 hours ago         829.6 MB\n<none>                        <none>              bfe7aa3fa29f        7 hours ago         54.23 MB\n<none>                        <none>              b13ebf1a4999        2 weeks ago         311.2 MB\n<none>                        <none>              2f3c6710d8f2        5 weeks ago         54.23 MB\n\n--filter \"dangling=true\" \u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u3001\u30bf\u30b0\u306e\u3064\u3044\u3066\u3044\u306a\u3044\u30a4\u30e1\u30fc\u30b8\u306e\u307f\u53d6\u5f97\u3067\u304d\u308b\u3002\n\u307e\u305f\u3001-q \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3068\u3001IMAGE ID\u306e\u307f\u8868\u793a\u3055\u308c\u308b\u3002\n~ $ docker images --filter \"dangling=true\" -q\n3c3e0fd3f20b\nbfe7aa3fa29f\nb13ebf1a4999\n2f3c6710d8f2\n\ndocker images - Docker\n\n\u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u305fDocker Image\u306e\u524a\u9664\n$ docker rmi $(docker images -f \"dangling=true\" -q)\n \u307e\u305f\u306f\n$ docker images -qf dangling=true | xargs docker rmi\ndocker rmi - Docker\n\u4e0a\u8a18\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u524d\u8005\u306e\u30b3\u30de\u30f3\u30c9\u304c\u66f8\u3044\u3066\u3042\u308b\u3002\u500b\u4eba\u7684\u306b\u306f xargs \u3092\u4f7f\u3063\u305f\u5f8c\u8005\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\u3061\u306a\u307f\u306b\u3001\u30bf\u30b0\u306e\u4ed8\u3044\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u3082\u307e\u308b\u3063\u3068\u6d88\u3057\u305f\u3044\u5834\u5408\u306b\u306f\n$ docker images -q | xargs docker rmi -f\n\n\u8d77\u52d5\u3057\u3066\u3044\u306a\u3044Docker Container\u3092\u524a\u9664\u3059\u308b\n\n\u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u3066\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n~ $ docker ps -af status=exited\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES\ne7340bde4353        03f4cae76966        \"/bin/bash\"              7 hours ago         Created                                 gloomy_bhabha\nf6a581344af6        9e8c4e00c6a3        \"./bin/catalina.sh ru\"   11 hours ago        Created                                 elated_shannon\n\nps \u30b3\u30de\u30f3\u30c9\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u52d5\u4f5c\u4e2d(running)\u306a\u30b3\u30f3\u30c6\u30ca\u3057\u304b\u8868\u793a\u3055\u308c\u306a\u3044\u3002\n\u305d\u306e\u70ba\u3001\u52d5\u4f5c\u4e2d\u4ee5\u5916\u306e\u30b3\u30f3\u30c6\u30ca\u3082\u8868\u793a\u3059\u308b\u306b\u306f -a \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\ndocker ps - Docker\n\n\u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u305fDocker Container\u306e\u524a\u9664\ndocker rm - Docker \u306b\u306f $ docker rm $(docker ps -a -q) \u3068\u66f8\u3044\u3066\u3042\u308b\u304c\u3001\u3053\u308c\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u3092\u5168\u90e8\u6d88\u3059\u5272\u306b\u7d10\u3065\u304fData Volume\u3092\u6d88\u3055\u306a\u3044\u306e\u3067\u306a\u3093\u3060\u304b\u306a\u30fc\u3068\u601d\u3063\u305f\u3002\n$ docker rm -v $(docker ps -aqf status=exited)\n\u307e\u305f\u306f\n$ docker ps -aqf status=exited | xargs docker rm -v\n\u3068 -v\u3092\u4ed8\u3051\u308b\u3068\u3001\u7d10\u3065\u304fData Volume\u3082\u4e00\u7dd2\u306b\u524a\u9664\u3067\u304d\u308b\u306e\u3067\u3053\u3061\u3089\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n(\u305f\u3060\u3057\u3001\u660e\u793a\u7684\u306b\u540d\u524d\u3092\u4ed8\u3051\u305fData Volume\u306f\u524a\u9664\u3055\u308c\u306a\u3044)\n\n\u3069\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u3082\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044Data Volume\u3092\u524a\u9664\u3059\u308b\n\u3046\u3063\u304b\u308a\u5897\u3048\u3066\u305f\u30e4\u30c4\u3002\n\n\u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u3066\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n$ docker volume ls \u3082 -f dangling=true \u3067\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u3082\u306e\u306b\u9650\u5b9a\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002\n~ $ docker volume ls -f dangling=true\nDRIVER              VOLUME NAME\nlocal               3737418ba886be4252424e1012a6840e418175f14ef7763c08cc629c97c4ae3d\nlocal               9b028e7810266710032c82b2f0aca040100ffc2876e5ad73944838ae8eaf7051\nlocal               c2a61b02d71e67668905354d1e365d0f59966114b66ea2620bc28ab3bdf73b01\nlocal               cbbad0a5be79e712e784cada333ead7df748157e8c004c060ea0fc38d8aa586a\n...\n\ndocker volume ls - Docker\n\u958b\u767a\u74b0\u5883\u3067Docker\u30b3\u30f3\u30c6\u30ca\u3092\u30ac\u30f3\u30ac\u30f3\u4f5c\u3063\u3066\u305f\u3089\u51c4\u3044\u6570\u306b\u306a\u3063\u3066\u305f\u3002\n\n\u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u305fData Volume\u306e\u524a\u9664\n\u30a4\u30e1\u30fc\u30b8\u3084\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u306e\u3068\u5927\u4f53\u540c\u3058\u5f62\u3067\u3001\n$ docker volume ls -qf dangling=true | xargs docker volume rm\ndocker volume rm - Docker\n\nDocker Compose\u3067\u5229\u7528\u3057\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\n\n\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\nDocker Compose\u306b\u95a2\u3057\u3066\u306f\u30d5\u30a3\u30eb\u30bf\u306f\u306a\u3044\u3002\n~ $ docker-compose ps\n       Name                      Command               State                    Ports\n-------------------------------------------------------------------------------------------------------\ntestcompose_db_1      docker-entrypoint.sh mysql ...   Up      0.0.0.0:3306->3306/tcp\ntestcompose_nginx_1   nginx -g daemon off;             Up      0.0.0.0:443->443/tcp, 0.0.0.0:80->80/tcp\ntestcompose_rails_1   bundle exec rails s -p 300 ...   Up      0.0.0.0:3000->3000/tcp\n\n\nDocker Compose\u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664\ndocker-compose.yml\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067Docker Compose\u3067\u4f7f\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u306b\u306f\n$ docker-compose rm -v\n\u3092\u4f7f\u3046\u3002\ndocker-compose rm - Docker\n-v \u30aa\u30d7\u30b7\u30e7\u30f3\u3067Data Volume\u3082\u524a\u9664\u3059\u308b\u3002\u78ba\u8a8d\u304c\u4e0d\u8981\u306a\u3089 -f\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3002\n$ docker-compose rm \u306f $ docker-compose build\u3057\u3066\u4f5c\u3063\u305fDocker\u30b3\u30f3\u30c6\u30ca\u304c\u524a\u9664\u3055\u308c\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u4e0a\u306e\u65b9\u3067\u66f8\u3044\u305fDocker\u30b3\u30f3\u30c6\u30ca\u524a\u9664\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u3044\u3066\u304a\u3051\u3070\u666e\u6bb5\u306f\u554f\u984c\u306a\u3044\u3002\n\n\u524a\u9664\u30b3\u30de\u30f3\u30c9\u3092alias\u3068\u3057\u3066\u767b\u9332\u3057\u3066\u304a\u304f\n\u6020\u60f0\u306f\u7f8e\u5fb3\u3002\n\u81ea\u5206\u306e.zshrc\u306b\u66f8\u3044\u3066\u304a\u304f\u3068\u3001\u5fd8\u308c\u3066\u3082\u53c2\u7167\u3067\u304d\u308b\u3068\u3044\u3046\u306e\u3082\u30dd\u30a4\u30f3\u30c8\u304c\u9ad8\u3044\u3002\n\n.zshrc\nalias d='docker'\nalias dc='docker-compose' # sorry ex-dc...\nalias dc_build_up='docker-compose rm -fv && docker-compose build && docker-compose up'\nalias rm_docker_images='docker images -qf dangling=true | xargs docker rmi'\nalias rm_docker_containers='docker ps -aqf status=exited | xargs docker rm -v' # rm with volumes\nalias rm_docker_volumes='docker volume ls -qf dangling=true | xargs docker volume rm'\nalias rm_docker_compose_containers='docker-compose rm -fv'\n\n\n\u3053\u3053\u3067\u306e\u8ffd\u52a0\u8aac\u660e\u3068\u3057\u3066\u3001 $ dc_bulid_up \u3067 docker-compose rm -fv && docker-compose build && docker-compose up\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067Docker Compose\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u76f4\u3059\u969b\u306b\u65e2\u5b58\u306e\u30b3\u30f3\u30c6\u30ca\u30fb\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3057\u3066\u7dba\u9e97\u306b\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u901a\u5e38\u306e build \u3084 up \u30b3\u30de\u30f3\u30c9\u3068\u5171\u306b\u4f7f\u3044\u5206\u3051\u308b\u3068\u826f\u3044\u3002\n\u4f59\u8ac7\u3060\u304c d, dc\u3092docker, docker-compose\u306ealias\u306b\u3057\u3066\u3044\u308b\u3002\n\u5143\u306e dc \u30b3\u30de\u30f3\u30c9\u306b\u306f\u6b63\u76f4\u7533\u3057\u8a33\u306a\u3044\u304c docker-compose \u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u3053\u3068\u306e\u65b9\u304c\u591a\u3044...\ndc\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002 - \u3053\u3053\u306b\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b|\n\n\u305d\u308c\u3067\u3082\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u304c\u623b\u3089\u306a\u3044\n\u3082\u3057\u3059\u3079\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u3084\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u3066\u3082\u3044\u3044\u306a\u3089\u3001Docker\u3092\u6b62\u3081\u305f\u5f8c\u306b ~/Library/Containers/com.docker.docker/Data/* \u3092\u307e\u308b\u3054\u3068\u6d88\u3059\u3002\nDocker.qcow2 never shrinks - disk space usage leak in docker for mac \u00b7 Issue #371 \u00b7 docker/for-mac\n\u81ea\u5206\u306e\u74b0\u5883\u3067\u306f Docker.qcow2 \u30d5\u30a1\u30a4\u30eb\u304c50GB\u307b\u3069\u3042\u3063\u305f\u306e\u3067\u307b\u307c\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u539f\u56e0\u3060\u3063\u305f\u3002\n\u3053\u306e\u30b9\u30c8\u30c3\u30af\u3092\u66f8\u3044\u3066\u3044\u308b5\u65e5\u524d\u306bissue\u306b ~/Library/Containers/com.docker.docker/Data/database/ \u3092\u76f4\u63a5\u7de8\u96c6\u3057\u3066qcow2\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u4e0a\u9650\u3092\u4e0b\u3052\u308b\u65b9\u6cd5\u304c\u6295\u7a3f\u3055\u308c\u3066\u3044\u308b\u3002\nhttps://github.com/docker/for-mac/issues/371#issuecomment-262826610 \n\u4e0a\u8a18issue\u306e\u76db\u308a\u4e0a\u304c\u308a\u3092\u898b\u308b\u9650\u308a\u3001\u305d\u306e\u5185UI\u63d0\u4f9b\u3055\u308c\u305d\u3046\u306a\u96f0\u56f2\u6c17\u304c\u3042\u308b\u304c\u3082\u3057\u4eca\u73fe\u5728\u554f\u984c\u306b\u82e6\u616e\u3057\u3066\u3044\u308b\u4eba\u306fqcow2\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u4e0a\u9650\u3092\u5909\u66f4\u3059\u308b\u3068\u826f\u3055\u6c17\u3002\n\u3053\u308c\u3089\u3092\u884c\u3063\u3066\u3001\u4f55\u3068\u304b\u5143\u3005\u306e\u7a7a\u304d\u5bb9\u91cf70GB\u7a0b\u307e\u3067\u623b\u3059\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n\n\n\u8ffd\u8a181 2016-11-30 10:42\n@otolab \u3055\u3093\u304b\u3089Docker for Mac\u3067\u306f reset to factory defaults \u3067\u3082 ~/Library/Containers/com.docker.docker/Data/* \u3092\u524a\u9664\u3067\u304d\u308b\u3068\u30a2\u30c9\u30d0\u30a4\u30b9\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n\u3053\u3053\u304b\u3089 Reset to factory default \u3092\u5b9f\u884c\u3059\u308b\u3002\n\u4f7f\u7528\u30e1\u30e2\u30ea\u91cf\u306a\u3069\u306e\u8a2d\u5b9a\u3082\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u304c\u5168\u90e8\u6d88\u305b\u307e\u3059\u3002\u305f\u3060\u4eca\u306f\u3042\u307e\u308a\u4f7f\u308f\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u305d\u3046\u3067\u3059\u3002\n\n\u8ffd\u8a182 2017-01-26 19:46\ndocker 1.13.0 \u304b\u3089\u3001 $ docker system prune \u30b3\u30de\u30f3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\n\n\u505c\u6b62\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3059\u3079\u3066\n\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u30c7\u30fc\u30bf\u30dc\u30ea\u30e5\u30fc\u30e0\u3059\u3079\u3066\n\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3059\u3079\u3066\n\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u30a4\u30e1\u30fc\u30b8\u3059\u3079\u3066\n\n\u304c\u524a\u9664\u53ef\u80fd\u3067\u3059\u3002\nDocker for Mac\u3092\u4f7f\u3063\u3066\u3044\u305f\u308950GB\u4f4d\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u3092\u5727\u8feb\u3057\u3066\u3044\u305f\u306e\u3067\u3044\u308d\u3093\u306a\u3082\u306e\u3092\u524a\u9664\u3059\u308b\n\u624b\u5143\u3067Docker\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u3063\u3066\u306f\u58ca\u3057\u4f5c\u3063\u3066\u306f\u58ca\u3057\u3092\u7e70\u308a\u8fd4\u3057\u3066\u305f\u3089\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u304c10GB\u3092\u5207\u3063\u3066\u3044\u305f\u3002\n\n\n`$ docker rmi`\u30b3\u30de\u30f3\u30c9\u306f\u5e38\u65e5\u9803\u304b\u3089\u53e9\u3044\u3066\u3044\u305f\u304c\u3001\u5168\u7136\u7a7a\u304d\u5bb9\u91cf\u304c\u5897\u3048\u306a\u3044\u306e\u3067\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u6f01\u3063\u305f\u308aGitHub\u3092\u6f01\u3063\u305f\u8a18\u9332\u3002\n\n\n# \u30bf\u30b0\u306e\u3064\u3044\u3066\u3044\u306a\u3044Docker Image\u3092\u524a\u9664\u3059\u308b\n\n## \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u3066\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n\n\u30bf\u30b0\u306e\u3064\u3044\u3066\u3044\u306a\u3044 `<none>` \u306aDocker\u30a4\u30e1\u30fc\u30b8\u306e\u4e00\u89a7\u306f\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n```zsh\n~ $ docker images --filter \"dangling=true\"\nREPOSITORY                    TAG                 IMAGE ID            CREATED             SIZE\n<none>                        <none>              3c3e0fd3f20b        7 hours ago         829.6 MB\n<none>                        <none>              bfe7aa3fa29f        7 hours ago         54.23 MB\n<none>                        <none>              b13ebf1a4999        2 weeks ago         311.2 MB\n<none>                        <none>              2f3c6710d8f2        5 weeks ago         54.23 MB\n```\n\n`--filter \"dangling=true\"` \u3092\u4ed8\u3051\u308b\u3053\u3068\u3067\u3001\u30bf\u30b0\u306e\u3064\u3044\u3066\u3044\u306a\u3044\u30a4\u30e1\u30fc\u30b8\u306e\u307f\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n\u307e\u305f\u3001`-q` \u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3068\u3001IMAGE ID\u306e\u307f\u8868\u793a\u3055\u308c\u308b\u3002\n\n```zsh\n~ $ docker images --filter \"dangling=true\" -q\n3c3e0fd3f20b\nbfe7aa3fa29f\nb13ebf1a4999\n2f3c6710d8f2\n```\n\n[docker images - Docker](https://docs.docker.com/engine/reference/commandline/images/#/filtering)\n\n## \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u305fDocker Image\u306e\u524a\u9664\n\n`$ docker rmi $(docker images -f \"dangling=true\" -q)\n` \u307e\u305f\u306f\n`$ docker images -qf dangling=true | xargs docker rmi`\n[docker rmi - Docker](https://docs.docker.com/engine/reference/commandline/rmi/)\n\n\u4e0a\u8a18\u306e\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3067\u306f\u524d\u8005\u306e\u30b3\u30de\u30f3\u30c9\u304c\u66f8\u3044\u3066\u3042\u308b\u3002\u500b\u4eba\u7684\u306b\u306f xargs \u3092\u4f7f\u3063\u305f\u5f8c\u8005\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u30bf\u30b0\u306e\u4ed8\u3044\u3066\u3044\u308b\u30a4\u30e1\u30fc\u30b8\u3082\u307e\u308b\u3063\u3068\u6d88\u3057\u305f\u3044\u5834\u5408\u306b\u306f\n`$ docker images -q | xargs docker rmi -f`\n\n\n\n\n# \u8d77\u52d5\u3057\u3066\u3044\u306a\u3044Docker Container\u3092\u524a\u9664\u3059\u308b\n\n## \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u3066\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n\n```zsh\n~ $ docker ps -af status=exited\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES\ne7340bde4353        03f4cae76966        \"/bin/bash\"              7 hours ago         Created                                 gloomy_bhabha\nf6a581344af6        9e8c4e00c6a3        \"./bin/catalina.sh ru\"   11 hours ago        Created                                 elated_shannon\n```\n\n`ps` \u30b3\u30de\u30f3\u30c9\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u52d5\u4f5c\u4e2d(running)\u306a\u30b3\u30f3\u30c6\u30ca\u3057\u304b\u8868\u793a\u3055\u308c\u306a\u3044\u3002\n\u305d\u306e\u70ba\u3001\u52d5\u4f5c\u4e2d\u4ee5\u5916\u306e\u30b3\u30f3\u30c6\u30ca\u3082\u8868\u793a\u3059\u308b\u306b\u306f `-a` \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n[docker ps - Docker]\n(https://docs.docker.com/engine/reference/commandline/ps/#/filtering)\n\n## \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u305fDocker Container\u306e\u524a\u9664\n\n[docker rm - Docker](https://docs.docker.com/engine/reference/commandline/rm/#/filtering) \u306b\u306f `$ docker rm $(docker ps -a -q)` \u3068\u66f8\u3044\u3066\u3042\u308b\u304c\u3001\u3053\u308c\u3067\u306f\u30b3\u30f3\u30c6\u30ca\u3092\u5168\u90e8\u6d88\u3059\u5272\u306b\u7d10\u3065\u304fData Volume\u3092\u6d88\u3055\u306a\u3044\u306e\u3067\u306a\u3093\u3060\u304b\u306a\u30fc\u3068\u601d\u3063\u305f\u3002\n\n`$ docker rm -v $(docker ps -aqf status=exited)`\n\u307e\u305f\u306f\n`$ docker ps -aqf status=exited | xargs docker rm -v`\n\n\u3068 `-v `\u3092\u4ed8\u3051\u308b\u3068\u3001\u7d10\u3065\u304fData Volume\u3082\u4e00\u7dd2\u306b\u524a\u9664\u3067\u304d\u308b\u306e\u3067\u3053\u3061\u3089\u3092\u4f7f\u3063\u3066\u3044\u308b\u3002\n(\u305f\u3060\u3057\u3001\u660e\u793a\u7684\u306b\u540d\u524d\u3092\u4ed8\u3051\u305fData Volume\u306f\u524a\u9664\u3055\u308c\u306a\u3044)\n\n# \u3069\u306e\u30b3\u30f3\u30c6\u30ca\u306b\u3082\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044Data Volume\u3092\u524a\u9664\u3059\u308b\n\n\u3046\u3063\u304b\u308a\u5897\u3048\u3066\u305f\u30e4\u30c4\u3002\n\n## \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u3066\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n\n`$ docker volume ls` \u3082 `-f dangling=true` \u3067\u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u3082\u306e\u306b\u9650\u5b9a\u3057\u3066\u53d6\u5f97\u3067\u304d\u308b\u3002\n\n```zsh\n~ $ docker volume ls -f dangling=true\nDRIVER              VOLUME NAME\nlocal               3737418ba886be4252424e1012a6840e418175f14ef7763c08cc629c97c4ae3d\nlocal               9b028e7810266710032c82b2f0aca040100ffc2876e5ad73944838ae8eaf7051\nlocal               c2a61b02d71e67668905354d1e365d0f59966114b66ea2620bc28ab3bdf73b01\nlocal               cbbad0a5be79e712e784cada333ead7df748157e8c004c060ea0fc38d8aa586a\n...\n```\n[docker volume ls - Docker](https://docs.docker.com/engine/reference/commandline/volume_ls/)\n\n\u958b\u767a\u74b0\u5883\u3067Docker\u30b3\u30f3\u30c6\u30ca\u3092\u30ac\u30f3\u30ac\u30f3\u4f5c\u3063\u3066\u305f\u3089\u51c4\u3044\u6570\u306b\u306a\u3063\u3066\u305f\u3002\n\n## \u30d5\u30a3\u30eb\u30bf\u3092\u4f7f\u3063\u305fData Volume\u306e\u524a\u9664\n\n\u30a4\u30e1\u30fc\u30b8\u3084\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u306e\u3068\u5927\u4f53\u540c\u3058\u5f62\u3067\u3001\n`$ docker volume ls -qf dangling=true | xargs docker volume rm`\n[docker volume rm - Docker](https://docs.docker.com/engine/reference/commandline/volume_rm/)\n\n# Docker Compose\u3067\u5229\u7528\u3057\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\n\n## \u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\n\nDocker Compose\u306b\u95a2\u3057\u3066\u306f\u30d5\u30a3\u30eb\u30bf\u306f\u306a\u3044\u3002\n\n```zsh\n~ $ docker-compose ps\n       Name                      Command               State                    Ports\n-------------------------------------------------------------------------------------------------------\ntestcompose_db_1      docker-entrypoint.sh mysql ...   Up      0.0.0.0:3306->3306/tcp\ntestcompose_nginx_1   nginx -g daemon off;             Up      0.0.0.0:443->443/tcp, 0.0.0.0:80->80/tcp\ntestcompose_rails_1   bundle exec rails s -p 300 ...   Up      0.0.0.0:3000->3000/tcp\n```\n\n## Docker Compose\u30b3\u30f3\u30c6\u30ca\u306e\u524a\u9664\n\ndocker-compose.yml\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067Docker Compose\u3067\u4f7f\u3063\u3066\u3044\u308b\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3059\u308b\u306b\u306f\n`$ docker-compose rm -v`\n\u3092\u4f7f\u3046\u3002\n[docker-compose rm - Docker](https://docs.docker.com/compose/reference/rm/)\n\n`-v` \u30aa\u30d7\u30b7\u30e7\u30f3\u3067Data Volume\u3082\u524a\u9664\u3059\u308b\u3002\u78ba\u8a8d\u304c\u4e0d\u8981\u306a\u3089 `-f`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u308b\u3002\n\n\n`$ docker-compose rm` \u306f `$ docker-compose build`\u3057\u3066\u4f5c\u3063\u305fDocker\u30b3\u30f3\u30c6\u30ca\u304c\u524a\u9664\u3055\u308c\u308b\u3060\u3051\u306a\u306e\u3067\u3001\u4e0a\u306e\u65b9\u3067\u66f8\u3044\u305fDocker\u30b3\u30f3\u30c6\u30ca\u524a\u9664\u30b3\u30de\u30f3\u30c9\u3092\u53e9\u3044\u3066\u304a\u3051\u3070\u666e\u6bb5\u306f\u554f\u984c\u306a\u3044\u3002\n\n# \u524a\u9664\u30b3\u30de\u30f3\u30c9\u3092alias\u3068\u3057\u3066\u767b\u9332\u3057\u3066\u304a\u304f\n\n\u6020\u60f0\u306f\u7f8e\u5fb3\u3002\n\u81ea\u5206\u306e.zshrc\u306b\u66f8\u3044\u3066\u304a\u304f\u3068\u3001\u5fd8\u308c\u3066\u3082\u53c2\u7167\u3067\u304d\u308b\u3068\u3044\u3046\u306e\u3082\u30dd\u30a4\u30f3\u30c8\u304c\u9ad8\u3044\u3002\n\n```zsh:.zshrc\nalias d='docker'\nalias dc='docker-compose' # sorry ex-dc...\nalias dc_build_up='docker-compose rm -fv && docker-compose build && docker-compose up'\nalias rm_docker_images='docker images -qf dangling=true | xargs docker rmi'\nalias rm_docker_containers='docker ps -aqf status=exited | xargs docker rm -v' # rm with volumes\nalias rm_docker_volumes='docker volume ls -qf dangling=true | xargs docker volume rm'\nalias rm_docker_compose_containers='docker-compose rm -fv'\n```\n\n\u3053\u3053\u3067\u306e\u8ffd\u52a0\u8aac\u660e\u3068\u3057\u3066\u3001 `$ dc_bulid_up` \u3067 `docker-compose rm -fv && docker-compose build && docker-compose up`\u3092\u5b9f\u884c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u308b\u3002\n\u3053\u3046\u3059\u308b\u3053\u3068\u3067Docker Compose\u3067\u30b3\u30f3\u30c6\u30ca\u3092\u4f5c\u308a\u76f4\u3059\u969b\u306b\u65e2\u5b58\u306e\u30b3\u30f3\u30c6\u30ca\u30fb\u30dc\u30ea\u30e5\u30fc\u30e0\u3092\u524a\u9664\u3057\u3066\u7dba\u9e97\u306b\u4f5c\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\u901a\u5e38\u306e `build` \u3084 `up` \u30b3\u30de\u30f3\u30c9\u3068\u5171\u306b\u4f7f\u3044\u5206\u3051\u308b\u3068\u826f\u3044\u3002\n\n\u4f59\u8ac7\u3060\u304c `d`, `dc`\u3092docker, docker-compose\u306ealias\u306b\u3057\u3066\u3044\u308b\u3002\n\u5143\u306e `dc` \u30b3\u30de\u30f3\u30c9\u306b\u306f\u6b63\u76f4\u7533\u3057\u8a33\u306a\u3044\u304c `docker-compose` \u30b3\u30de\u30f3\u30c9\u3092\u53e9\u304f\u3053\u3068\u306e\u65b9\u304c\u591a\u3044...\n[dc\u3092\u4f7f\u3063\u3066\u307f\u308b\u3002 - \u3053\u3053\u306b\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b|](http://d.hatena.ne.jp/goth_wrist_cut/20080218/1203327063)\n\n\n# \u305d\u308c\u3067\u3082\u30c7\u30a3\u30b9\u30af\u5bb9\u91cf\u304c\u623b\u3089\u306a\u3044\n\n\u3082\u3057\u3059\u3079\u3066\u306e\u30a4\u30e1\u30fc\u30b8\u3084\u30b3\u30f3\u30c6\u30ca\u3092\u524a\u9664\u3057\u3066\u3082\u3044\u3044\u306a\u3089\u3001Docker\u3092\u6b62\u3081\u305f\u5f8c\u306b ~/Library/Containers/com.docker.docker/Data/* \u3092\u307e\u308b\u3054\u3068\u6d88\u3059\u3002\n[Docker.qcow2 never shrinks - disk space usage leak in docker for mac \u00b7 Issue #371 \u00b7 docker/for-mac](https://github.com/docker/for-mac/issues/371#issuecomment-248404423)\n\n\u81ea\u5206\u306e\u74b0\u5883\u3067\u306f Docker.qcow2 \u30d5\u30a1\u30a4\u30eb\u304c50GB\u307b\u3069\u3042\u3063\u305f\u306e\u3067\u307b\u307c\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u539f\u56e0\u3060\u3063\u305f\u3002\n\n\u3053\u306e\u30b9\u30c8\u30c3\u30af\u3092\u66f8\u3044\u3066\u3044\u308b5\u65e5\u524d\u306bissue\u306b ~/Library/Containers/com.docker.docker/Data/database/ \u3092\u76f4\u63a5\u7de8\u96c6\u3057\u3066qcow2\u30d5\u30a1\u30a4\u30eb\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u4e0a\u9650\u3092\u4e0b\u3052\u308b\u65b9\u6cd5\u304c\u6295\u7a3f\u3055\u308c\u3066\u3044\u308b\u3002\nhttps://github.com/docker/for-mac/issues/371#issuecomment-262826610 \n\n\u4e0a\u8a18issue\u306e\u76db\u308a\u4e0a\u304c\u308a\u3092\u898b\u308b\u9650\u308a\u3001\u305d\u306e\u5185UI\u63d0\u4f9b\u3055\u308c\u305d\u3046\u306a\u96f0\u56f2\u6c17\u304c\u3042\u308b\u304c\u3082\u3057\u4eca\u73fe\u5728\u554f\u984c\u306b\u82e6\u616e\u3057\u3066\u3044\u308b\u4eba\u306fqcow2\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30a4\u30ba\u4e0a\u9650\u3092\u5909\u66f4\u3059\u308b\u3068\u826f\u3055\u6c17\u3002\n\n\u3053\u308c\u3089\u3092\u884c\u3063\u3066\u3001\u4f55\u3068\u304b\u5143\u3005\u306e\u7a7a\u304d\u5bb9\u91cf70GB\u7a0b\u307e\u3067\u623b\u3059\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n\n![Screen Shot 2016-11-30 at 02.47.09.png](https://qiita-image-store.s3.amazonaws.com/0/94332/2d9cd2ef-f78d-b4ff-17c9-794751be914b.png)\n\n# \u8ffd\u8a181 2016-11-30 10:42\n\n@otolab \u3055\u3093\u304b\u3089Docker for Mac\u3067\u306f reset to factory defaults \u3067\u3082 ~/Library/Containers/com.docker.docker/Data/* \u3092\u524a\u9664\u3067\u304d\u308b\u3068\u30a2\u30c9\u30d0\u30a4\u30b9\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n![Screen Shot 2016-11-30 at 10.22.42.png](https://qiita-image-store.s3.amazonaws.com/0/94332/34f7d853-f931-4889-8482-84ae0152420c.png)\n\n\u3053\u3053\u304b\u3089 Reset to factory default \u3092\u5b9f\u884c\u3059\u308b\u3002\n\n\u4f7f\u7528\u30e1\u30e2\u30ea\u91cf\u306a\u3069\u306e\u8a2d\u5b9a\u3082\u524a\u9664\u3055\u308c\u3066\u3057\u307e\u3044\u307e\u3059\u304c\u5168\u90e8\u6d88\u305b\u307e\u3059\u3002\u305f\u3060\u4eca\u306f\u3042\u307e\u308a\u4f7f\u308f\u306a\u304f\u3066\u3082\u5927\u4e08\u592b\u305d\u3046\u3067\u3059\u3002\n\n# \u8ffd\u8a182 2017-01-26 19:46\n\ndocker 1.13.0 \u304b\u3089\u3001 `$ docker system prune` \u30b3\u30de\u30f3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\u5b9f\u884c\u3059\u308b\u3053\u3068\u3067\u3001\n\n* \u505c\u6b62\u4e2d\u306e\u30b3\u30f3\u30c6\u30ca\u3059\u3079\u3066\n* \u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u30c7\u30fc\u30bf\u30dc\u30ea\u30e5\u30fc\u30e0\u3059\u3079\u3066\n* \u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3059\u3079\u3066\n* \u7d10\u4ed8\u3044\u3066\u3044\u306a\u3044\u30a4\u30e1\u30fc\u30b8\u3059\u3079\u3066\n\n\u304c\u524a\u9664\u53ef\u80fd\u3067\u3059\u3002\n\n", "tags": ["docker", "docker-compose", "OSX", "Mac", "docker-for-mac"]}