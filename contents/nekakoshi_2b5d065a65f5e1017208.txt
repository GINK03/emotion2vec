{"context": "2016\u5e74\u3082\u3042\u3068\u50c5\u304b\u3002\n\u3053\u30532\u5e74\u307b\u3069\u3067\u9a12\u304c\u308c\u3066\u3044\u305fSHA-1\u8a3c\u660e\u66f8\u304c\u5404\u30d6\u30e9\u30a6\u30b6\u3067\u5229\u7528\u304c\u3067\u304d\u306a\u304f\u306a\u308b\uff12\uff10\uff11\uff17\u5e74\u307e\u3067\u3042\u3068\u50c5\u304b\u3067\u3059\u3002\n\n\u307e\u3060SHA-1\u904b\u7528\u3092\u3057\u3066\u3044\u308b\u3002\u3002\u3002\n\u307e\u3042\u305d\u3093\u306a\u3053\u3068\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4e45\u3005\u306bSSL\u306e\u4f5c\u6210\u624b\u9806\u3092\u8a18\u8f09\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u79d8\u5bc6\u9375\u4f5c\u6210\n### \u79d8\u5bc6\u9375\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ openssl genrsa -out priveteKey.key 2048 -sha256\n### \u4f5c\u6210\u3055\u308c\u305f\u9375\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ openssl rsa -noout -text -in priveteKey.key  |fgrep Private-Key\nPrivate-Key: (2048 bit)\n\n\u30b3\u30de\u30f3\u30c9\u306e\u8aac\u660e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n\n\n\u9805\u76ee\n\u8aac\u660e\n\n\n\n\n2048\n\u9375\u9577\n\n\ndes3\n\u30d1\u30b9\u30d7\u30ec\u30fc\u30ba\u5165\u529b\n\n\n\n\nCSR\u4f5c\u6210\n### CSR\u9375\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo openssl req -new -key priveteKey.key -sha256 -out mofumofu-com.csr -subj \"/C=JP/ST=Tokyo/L=Shinjyuku/O=Mofumofu Inc./OU=mofu division/CN=mofumofu.com/emailAddress=account@mofumofu.com\"\n\n\uff03\uff03\uff03 \u4f5c\u6210\u3057\u305f\u3001CSR\u30d5\u30a1\u30a4\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n$ openssl req -text -noout -in mofumofu-com.csr |grep -A5 'Subject Public'\n\n\uff03\uff03\uff03 \u4f5c\u6210\u3057\u305f\u3001CRT\u30d5\u30a1\u30a4\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n$ openssl x509 -text -noout -in  mofumofu-com.crt |grep -A5 'Subject Public'\n\n\u4e0a\u8a18\u3067\u9375\u306e\u4f5c\u6210\u306f\u5b8c\u4e86\u3057\u307e\u3059\u3002\nnginx\u306e\u8a2d\u5b9a\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u3057\u3066\u3059\u308b\u3068\u52d5\u304f\u304b\u3068\u601d\u3044\u307e\u3059\u3002\nserver {\n  listen       443 ssl http2;\n  server_name  mofumofu.com;\n\n  ssl on;\n  ssl_certificate /usr/local/nginx/conf/mofumofu-com.crt;\n  ssl_certificate_key /usr/local/nginx/conf/priveteKey.key;\n\n[snip]\n}\n\n$ nginx -v\nnginx version: nginx/1.10.1\n\n$ curl -I https://mofumofu.com\nHTTP/1.1 200 OK\n\nSSL\u306e\u8a3c\u660e\u66f8\u8cfc\u5165\u306fRapidSSL\u304b\u306a\u3002\u3002\u3002\n2016\u5e74\u3082\u3042\u3068\u50c5\u304b\u3002\n\u3053\u30532\u5e74\u307b\u3069\u3067\u9a12\u304c\u308c\u3066\u3044\u305fSHA-1\u8a3c\u660e\u66f8\u304c\u5404\u30d6\u30e9\u30a6\u30b6\u3067\u5229\u7528\u304c\u3067\u304d\u306a\u304f\u306a\u308b\uff12\uff10\uff11\uff17\u5e74\u307e\u3067\u3042\u3068\u50c5\u304b\u3067\u3059\u3002\n\n![alt](https://www.cybertrust.ne.jp/sureserver/images/productinfo/00000696.jpg)\n\n\u307e\u3060SHA-1\u904b\u7528\u3092\u3057\u3066\u3044\u308b\u3002\u3002\u3002\n\u307e\u3042\u305d\u3093\u306a\u3053\u3068\u306f\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u304c\u3001\u4e45\u3005\u306bSSL\u306e\u4f5c\u6210\u624b\u9806\u3092\u8a18\u8f09\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u79d8\u5bc6\u9375\u4f5c\u6210\n\n```bash\n### \u79d8\u5bc6\u9375\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ openssl genrsa -out priveteKey.key 2048 -sha256\n### \u4f5c\u6210\u3055\u308c\u305f\u9375\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ openssl rsa -noout -text -in priveteKey.key  |fgrep Private-Key\nPrivate-Key: (2048 bit)\n```\n\n\u30b3\u30de\u30f3\u30c9\u306e\u8aac\u660e\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n| \u9805\u76ee | \u8aac\u660e | \n|:-----------|------------:|\n| 2048       |        \u9375\u9577 |\n| des3       |      \u30d1\u30b9\u30d7\u30ec\u30fc\u30ba\u5165\u529b |\n\n\n### CSR\u4f5c\u6210\n\n```\n### CSR\u9375\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo openssl req -new -key priveteKey.key -sha256 -out mofumofu-com.csr -subj \"/C=JP/ST=Tokyo/L=Shinjyuku/O=Mofumofu Inc./OU=mofu division/CN=mofumofu.com/emailAddress=account@mofumofu.com\"\n\n\uff03\uff03\uff03 \u4f5c\u6210\u3057\u305f\u3001CSR\u30d5\u30a1\u30a4\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n$ openssl req -text -noout -in mofumofu-com.csr |grep -A5 'Subject Public'\n\n\uff03\uff03\uff03 \u4f5c\u6210\u3057\u305f\u3001CRT\u30d5\u30a1\u30a4\u30eb\u3092\u30c1\u30a7\u30c3\u30af\u3057\u307e\u3059\u3002\n$ openssl x509 -text -noout -in  mofumofu-com.crt |grep -A5 'Subject Public'\n```\n\n\u4e0a\u8a18\u3067\u9375\u306e\u4f5c\u6210\u306f\u5b8c\u4e86\u3057\u307e\u3059\u3002\n\nnginx\u306e\u8a2d\u5b9a\u306e\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u3057\u3066\u3059\u308b\u3068\u52d5\u304f\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\nserver {\n  listen       443 ssl http2;\n  server_name  mofumofu.com;\n\n  ssl on;\n  ssl_certificate /usr/local/nginx/conf/mofumofu-com.crt;\n  ssl_certificate_key /usr/local/nginx/conf/priveteKey.key;\n\n[snip]\n}\n```\n\n```\n$ nginx -v\nnginx version: nginx/1.10.1\n\n$ curl -I https://mofumofu.com\nHTTP/1.1 200 OK\n```\n\nSSL\u306e\u8a3c\u660e\u66f8\u8cfc\u5165\u306fRapidSSL\u304b\u306a\u3002\u3002\u3002\n", "tags": ["openssl"]}