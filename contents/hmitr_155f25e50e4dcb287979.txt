{"context": " More than 1 year has passed since last update.s3fs\u3092\u4f7f\u3063\u3066EC2\u304b\u3089S3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u65b9\u6cd5\ns3fs\u3001fuse\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\u3002\n\n\u74b0\u5883\n\n\n\n\n\u9805\u76ee\n\u5185\u5bb9\n\n\n\n\nOS\nAmazon Linux AMI\n\n\ns3fs\n1.73\n\n\nfuse\n2.9.3-1.15.amzn1\n\n\nfuse-devel\n2.9.3-1.15.amzn1\n\n\n\n\n\u624b\u98061. Console Home\u304b\u3089IAM\u3092\u9078\u629e\u3059\u308b\u3002\n\n\n\n\u624b\u98062. s3\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3002(\u753b\u50cf\u3067\u306f\u300cs3-access-user\u300d\u3067\u4f5c\u6210)\n\n\n\n\u300cCreate New Users\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u306e\u300cAccess Key ID\u300d\u3068\u300cSecret Access Key\u300d\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n\u4f5c\u6210\u5f8c\n\n\n\n\u624b\u98063. \u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3092\u9078\u629e\u3057\u3001\u300cPermissions\u300d\u30bf\u30b0\u3092\u9078\u629e\u3057\u3001\u300cAttach User Policy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3092\u8868\u793a\u3059\u308b\u3002\n\n\n\n\u300cAttach User Policy\u300d\u30dc\u30bf\u30f3\n\n\n\n\n\u624b\u98064. \u300cAmazon S3 Full Access\u300d\u3092\u9078\u629e\u3059\u308b\u3002\uff08\u4eca\u56de\u306f\u30d5\u30eb\u30a2\u30af\u30bb\u30b9\uff09\n\n\n\n\u624b\u98065. \u30bf\u30fc\u30df\u30ca\u30eb\u63a5\u7d9a\u3057\u3066\u3001\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\n\n\n\u30de\u30a6\u30f3\u30c8\nsudo echo \"{Access Key ID}:{Secret Access Key}\" > /etc/passwd-s3fs\nsudo chmod 640 /etc/passwd-s3fs\nsudo mkdir /mnt/s3\nsudo /usr/local/bin/s3fs {bucket_name} /mnt/s3 -ouse_cache=/tmp\n\n\n\n\n\n\u9805\u76ee\n\u5024\n\n\n\n\n{Access Key ID}\n\u624b\u98062\u3067\u30e1\u30e2\u3063\u305fAccess Key ID\n\n\n{Secret Access Key}\n\u624b\u98062\u3067\u30e1\u30e2\u3063\u305fSecret Access Key\n\n\n{bucket_name}\ns3\u306e\u30d0\u30b1\u30c3\u30c8\u540d\n\n\n\n\n\u624b\u98066. \u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n\n\n\u78ba\u8a8d\n# df\nFilesystem           1K-blocks      Used Available Use% Mounted on\n/dev/xvda1             8256952   6706132   1466964  83% /\ntmpfs                   304236         0    304236   0% /dev/shm\ns3fs                 274877906944         0 274877906944   0% /mnt/s3\n\n\ns3fs\u3092\u4f7f\u3063\u3066EC2\u304b\u3089S3\u3092\u30de\u30a6\u30f3\u30c8\u3059\u308b\u65b9\u6cd5\ns3fs\u3001fuse\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\u3002\n\n#### \u74b0\u5883\n-----\n\n|\u9805\u76ee|\u5185\u5bb9|\n|:-----------|:------------|\n| OS|Amazon Linux AMI|\n| s3fs|1.73|\n| fuse| 2.9.3-1.15.amzn1|\n| fuse-devel| 2.9.3-1.15.amzn1|\n\n#### \u624b\u98061. Console Home\u304b\u3089IAM\u3092\u9078\u629e\u3059\u308b\u3002\n-----\n![s3fs01.png](https://qiita-image-store.s3.amazonaws.com/0/32509/23eb82d6-684d-f5aa-2920-9396693903d2.png)\n\n\n#### \u624b\u98062. s3\u30a2\u30af\u30bb\u30b9\u7528\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3059\u308b\u3002(\u753b\u50cf\u3067\u306f\u300cs3-access-user\u300d\u3067\u4f5c\u6210)\n-----\n![s3fs03.png](https://qiita-image-store.s3.amazonaws.com/0/32509/82668c99-693c-1add-bf0c-b14afe86be81.png)\n\n* \u300cCreate New Users\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u8868\u793a\u3055\u308c\u308b\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u306e\u300cAccess Key ID\u300d\u3068\u300cSecret Access Key\u300d\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n![s3fs02.png](https://qiita-image-store.s3.amazonaws.com/0/32509/f1c4764d-1980-831a-5c23-bd71e80620f7.png)\n\n* \u4f5c\u6210\u5f8c\n![s3fs04.png](https://qiita-image-store.s3.amazonaws.com/0/32509/20af8007-5651-1be1-31cf-c938e78583d1.png)\n\n\n#### \u624b\u98063. \u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3092\u9078\u629e\u3057\u3001\u300cPermissions\u300d\u30bf\u30b0\u3092\u9078\u629e\u3057\u3001\u300cAttach User Policy\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u4e0b\u3057\u3001\u30dd\u30ea\u30b7\u30fc\u3092\u8ffd\u52a0\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u3092\u8868\u793a\u3059\u308b\u3002\n-----\n![s3fs05.png](https://qiita-image-store.s3.amazonaws.com/0/32509/2fdb3520-6513-4150-5154-d9ad4f731cca.png)\n\n* \u300cAttach User Policy\u300d\u30dc\u30bf\u30f3\n![s3fs06.png](https://qiita-image-store.s3.amazonaws.com/0/32509/6b393fbf-ff38-f131-8b3c-a947769524e6.png)\n\n\n#### \u624b\u98064. \u300cAmazon S3 Full Access\u300d\u3092\u9078\u629e\u3059\u308b\u3002\uff08\u4eca\u56de\u306f\u30d5\u30eb\u30a2\u30af\u30bb\u30b9\uff09\n-----\n![s3fs07.png](https://qiita-image-store.s3.amazonaws.com/0/32509/a86e5743-c8d6-d1ba-6d3d-a19fdc27a9c5.png)\n\n#### \u624b\u98065. \u30bf\u30fc\u30df\u30ca\u30eb\u63a5\u7d9a\u3057\u3066\u3001\u30de\u30a6\u30f3\u30c8\u3059\u308b\u3002\n-----\n```sh:\u30de\u30a6\u30f3\u30c8\nsudo echo \"{Access Key ID}:{Secret Access Key}\" > /etc/passwd-s3fs\nsudo chmod 640 /etc/passwd-s3fs\nsudo mkdir /mnt/s3\nsudo /usr/local/bin/s3fs {bucket_name} /mnt/s3 -ouse_cache=/tmp\n```\n|\u9805\u76ee|\u5024|\n|:-----------|:------------|\n| {Access Key ID}|\u624b\u98062\u3067\u30e1\u30e2\u3063\u305fAccess Key ID|\n| {Secret Access Key}|\u624b\u98062\u3067\u30e1\u30e2\u3063\u305fSecret Access Key|\n| {bucket_name}| s3\u306e\u30d0\u30b1\u30c3\u30c8\u540d|\n\n#### \u624b\u98066. \u30de\u30a6\u30f3\u30c8\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n-----\n```sh:\u78ba\u8a8d\n# df\nFilesystem           1K-blocks      Used Available Use% Mounted on\n/dev/xvda1             8256952   6706132   1466964  83% /\ntmpfs                   304236         0    304236   0% /dev/shm\ns3fs                 274877906944         0 274877906944   0% /mnt/s3\n```", "tags": ["EC2", "S3", "s3fs"]}