{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306fShell Script Advent Calendar 2015 12\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\u3053\u3053\u3067\u306f\u3001\u77f3\u672c\u3055\u3093@atsuoishimoto\u304c\u4f5c\u6210\u3055\u308c\u305f\u3001Python\u306b\u3088\u308b\u30c6\u30ad\u30b9\u30c8\u6574\u5f62\u30c4\u30fc\u30eb\u300ctse\u300d\u3092\u7d39\u4ecb\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u5b9f\u884c\u74b0\u5883\n\nMac OSX 10.11.1\nPython 3.5.0\n\n\ntse\u3068\u306f\uff1f\n\u8a73\u3057\u304f\u306f\u4eca\u5e74\u306ePyCon JP 2015\u3067\u767a\u8868\u3055\u308c\u305f\u30b9\u30e9\u30a4\u30c9\u3092\u898b\u308c\u3070\u3001\u7406\u89e3\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\ntse - Python\u306b\u3088\u308b\u30c6\u30ad\u30b9\u30c8\u6574\u5f62\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u8d85\u7c21\u5358\u306b\u8a00\u3048\u3070\u3001\ntse\u3068\u306f\u3001\n\u300c\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u306b\u5411\u304b\u306a\u3044\u3068\u8a00\u308f\u308c\u308bPython\u3060\u3051\u3069\u3001\u3084\u3063\u3071\u308a\u30c6\u30ad\u30b9\u30c8\u51e6\u7406\u3068\u304bPython\u3067\u3084\u308a\u305f\u3044\u3088\u30fc\u300d\n\u3068\u3044\u3046\u8981\u671b\u306b\u5fdc\u3048\u305f\n\u300cPython\u3067 sed \u3084 awk \u306e\u3088\u3046\u306a\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306eCLI\u30c4\u30fc\u30eb\u300d\n\u3067\u3059\u3002\npip\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\npip install tse\n\n\ntse\u306e\u826f\u3044\u3068\u3053\u308d\n\n\nsys, re, os, os.path \u306f\u81ea\u52d5\u30a4\u30f3\u30dd\u30fc\u30c8\n\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u6307\u5b9a\u3059\u308c\u3070\u3001\u5b9f\u884c\u524d\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\n\u5165\u51fa\u529b\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u6307\u5b9a\n\n\u3042\u3068\u306f\u5b9f\u969b\u306e\u51e6\u7406\u3092\u898b\u305f\u65b9\u304c\u306f\u3084\u3044\u3068\u601d\u3046\u306e\u3067\u3001\u5e7e\u3064\u304b\u53d6\u308a\u4e0a\u3052\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u203b\u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a\u306e\u904e\u53bb\u554f\u3092\u4f7f\u308f\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\n\u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a\u554f\u984c\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\n\n\u7b2c17\u56de\u30b8\u30e5\u30f3\u30af\u5802\u306f\u30b7\u30a7\u30eb\u82b8\u304c\u4e57\u3063\u53d6\u3063\u305f\u52c9\u5f37\u4f1a\nhttps://blog.ueda.asia/?p=6454\n\nQ1\n\u6b21\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\n$ cat data1\na 1\nb 4\na 2\na 3\nb 5\n\n\u6b21\u306e\u3088\u3046\u306b\u5909\u63db\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\na 1 2 3\nb 4 5\n\n\u4f59\u529b\u306e\u3042\u308b\u4eba\u306f\u6b21\u306e\u3088\u3046\u306aJSON\u5f62\u5f0f\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n{a:[1,2,3],b:[4,5]}\n\n\n\u89e3\u7b54\n\n\n--begin\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u30c7\u30a3\u30af\u30b7\u30e7\u30ca\u30ea\u3092\u521d\u671f\u5316\n\n--end\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u30c7\u30a3\u30af\u30b7\u30e7\u30ca\u30ea\u306ekey, value\u3092\u305d\u308c\u305e\u308c\u51fa\u529b\u3059\u308c\u3070OK\n\n$cat data1 | tse -b 'd={\"a\": \"\", \"b\": \"\"}' -s '' 'd[L1] = d[L1] + \" \" + L2' -e 'for k, v in sorted(d.items()):print(k + v)'\na 1 2 3\nb 4 5\n\n\njson\u5f62\u5f0f\u306f\u3001\u6700\u5f8c\u306b\u30c7\u30a3\u30af\u30b7\u30e7\u30ca\u30ea\u3092json.dumps()\u3057\u3066\u3084\u308c\u3070OK\n\n-module\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001json\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\n\n$cat data1 | tse -m json -b 'd={\"a\": [], \"b\": []}' -s '' 'd[L1].append(int(L2))' -e 'print(json.dumps(sorted(d.items())))'\n[[\"a\", [1, 2, 3]], [\"b\", [4, 5]]]\n\n\n\u7b2c18\u56de\u30cb\u30f3\u30cb\u30af\u5165\u308c\u307e\u3059\u304b\u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a\nhttps://blog.ueda.asia/?p=6877\n\nQ1\n\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u306f1\u5217\u76ee\u304c\u30ad\u30fc\u30012\u5217\u76ee\u304c\u5024\u3067\u3059\u304c\u3001\u300c\u30aa\u30c8\u30f3\u300d\u3068\u300c\u30aa\u30ab\u30f3\u300d\u306e\u4e21\u65b9\u306e\u5024\u304c\u3042\u308b\u30ad\u30fc\u3092\u63a2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ cat text \n001 \u30aa\u30c8\u30f3\n001 \u30aa\u30c8\u30f3\n001 \u30a2\u30ab\u30f3\n002 \u30aa\u30ab\u30f3\n003 \u30aa\u30c8\u30f3\n003 \u30e4\u30ab\u30f3\n003 \u30aa\u30ab\u30f3\n004 \u30aa\u30ab\u30f3\n005 \u30aa\u30c8\u30f3\n005 \u30df\u30ab\u30f3\n005 \u30a2\u30ab\u30f3\n\n\n\u89e3\u7b54\n\n\n-s\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u300c\u30aa\u30c8\u30f3\u300d\u307e\u305f\u306f\u300c\u30aa\u30ab\u30f3\u300d\u3092\u542b\u3080\u3068\u3044\u3046\u6b63\u898f\u8868\u73fe\u3092\u6307\u5b9a\u3059\u308c\u3070OK\n\n$uniq text | tse -s '\u30aa\u30c8\u30f3|\u30aa\u30ab\u30f3' 'print L1' | uniq -d\n003\n\n\n\u7b2c19\u56de\u30b7\u30a7\u30eb\u82b83\u5468\u5e74\u8a18\u5ff5\u52c9\u5f37\u4f1a\nhttps://blog.ueda.asia/?p=7146\n\nQ2\n\u4e8c\u3064\u306e\u81ea\u7136\u6570\u3092\n$ echo 1 4\n\n\u3068\u3044\u3046\u3088\u3046\u306becho\u3067\u51fa\u529b\u3057\u305f\u3042\u3068\u3001\n4\n3\n2\n1\n2\n3\n4\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u9593\u306e\u6570\u3092\u57cb\u3081\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u89e3\u7b54\n\n\u3061\u3087\u3063\u3068\u5197\u9577\u3060\u304c\u3001\u5358\u7d14\u306bfor\u6587\u3067\u7e70\u308a\u8fd4\u305b\u3070OK\n\n$echo 1 4 | tse -s '' 'for s in range(int(L1), int(L2)+1)[::-1]: print(s)' 'for s in range(int(L1)+1, int(L2)+1): print(s)'\n\n\n\u304a\u308f\u308a\u306b\n\u3056\u3063\u3068tse\u3092\u6d3b\u7528\u3057\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u666e\u6bb5\u6163\u308c\u3066\u3044\u308bPython\u306esyntax\u3067\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u304c\u66f8\u3051\u3066\u304a\u624b\u8efd\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\u6016\u304f\u3066\u907f\u3051\u3066\u3044\u305f\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3068\u3044\u3046\u5206\u91ce\u306b\u3001\u5c11\u3057\u99b4\u67d3\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3088\u3046\u306a\u6c17\u304c\u3057\u307e\u3059^^\n\u660e\u65e5\u306e\u51fa\u756a\u306f@zayarwinttun\u3055\u3093\u3067\u3059\uff01\n\n## \u306f\u3058\u3081\u306b\n\u3053\u306e\u8a18\u4e8b\u306f[Shell Script Advent Calendar 2015](http://qiita.com/advent-calendar/2015/shell-script) 12\u65e5\u76ee\u306e\u8a18\u4e8b\u3067\u3059\u3002\n\n\u3053\u3053\u3067\u306f\u3001\u77f3\u672c\u3055\u3093[@atsuoishimoto](https://twitter.com/atsuoishimoto)\u304c\u4f5c\u6210\u3055\u308c\u305f\u3001Python\u306b\u3088\u308b\u30c6\u30ad\u30b9\u30c8\u6574\u5f62\u30c4\u30fc\u30eb\u300c[tse](https://pypi.python.org/pypi/tse)\u300d\u3092\u7d39\u4ecb\u3057\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n## \u5b9f\u884c\u74b0\u5883\n+ Mac OSX 10.11.1\n+ Python 3.5.0\n\n## tse\u3068\u306f\uff1f\n\u8a73\u3057\u304f\u306f\u4eca\u5e74\u306ePyCon JP 2015\u3067\u767a\u8868\u3055\u308c\u305f\u30b9\u30e9\u30a4\u30c9\u3092\u898b\u308c\u3070\u3001\u7406\u89e3\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n[tse - Python\u306b\u3088\u308b\u30c6\u30ad\u30b9\u30c8\u6574\u5f62\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3](http://www.slideshare.net/atsuoishimoto/tse-python)\n\n\u8d85\u7c21\u5358\u306b\u8a00\u3048\u3070\u3001\ntse\u3068\u306f\u3001\n\u300c\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u306b\u5411\u304b\u306a\u3044\u3068\u8a00\u308f\u308c\u308bPython\u3060\u3051\u3069\u3001\u3084\u3063\u3071\u308a\u30c6\u30ad\u30b9\u30c8\u51e6\u7406\u3068\u304bPython\u3067\u3084\u308a\u305f\u3044\u3088\u30fc\u300d\n\u3068\u3044\u3046\u8981\u671b\u306b\u5fdc\u3048\u305f\n\u300cPython\u3067 **sed** \u3084 **awk** \u306e\u3088\u3046\u306a\u51e6\u7406\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306eCLI\u30c4\u30fc\u30eb\u300d\n\u3067\u3059\u3002\n\npip\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u307e\u3059\u3002\n\n```\npip install tse\n```\n\n### tse\u306e\u826f\u3044\u3068\u3053\u308d\n+ **sys**, **re**, **os**, **os.path** \u306f\u81ea\u52d5\u30a4\u30f3\u30dd\u30fc\u30c8\n+ \u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u306f\u6307\u5b9a\u3059\u308c\u3070\u3001\u5b9f\u884c\u524d\u306b\u30a4\u30f3\u30dd\u30fc\u30c8\n+ \u5165\u51fa\u529b\u30a8\u30f3\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u306e\u6307\u5b9a\n\n\n\u3042\u3068\u306f\u5b9f\u969b\u306e\u51e6\u7406\u3092\u898b\u305f\u65b9\u304c\u306f\u3084\u3044\u3068\u601d\u3046\u306e\u3067\u3001\u5e7e\u3064\u304b\u53d6\u308a\u4e0a\u3052\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u203b[\u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a\u306e\u904e\u53bb\u554f](https://blog.ueda.asia/?page_id=684)\u3092\u4f7f\u308f\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\n## \u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a\u554f\u984c\u306b\u30c1\u30e3\u30ec\u30f3\u30b8\n### \u7b2c17\u56de\u30b8\u30e5\u30f3\u30af\u5802\u306f\u30b7\u30a7\u30eb\u82b8\u304c\u4e57\u3063\u53d6\u3063\u305f\u52c9\u5f37\u4f1a\nhttps://blog.ueda.asia/?p=6454\n\n#### Q1\n\n\u6b21\u306e\u3088\u3046\u306a\u30c7\u30fc\u30bf\u3092\n\n<pre>\n$ cat data1\na 1\nb 4\na 2\na 3\nb 5\n</pre>\n\u6b21\u306e\u3088\u3046\u306b\u5909\u63db\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n<pre>\na 1 2 3\nb 4 5\n</pre>\n<p>\u4f59\u529b\u306e\u3042\u308b\u4eba\u306f\u6b21\u306e\u3088\u3046\u306aJSON\u5f62\u5f0f\u306b\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002</p>\n<pre>\n{a:[1,2,3],b:[4,5]}\n</pre>\n\n#### \u89e3\u7b54\n\n+ `--begin`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u30c7\u30a3\u30af\u30b7\u30e7\u30ca\u30ea\u3092\u521d\u671f\u5316\n+ `--end`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u30c7\u30a3\u30af\u30b7\u30e7\u30ca\u30ea\u306ekey, value\u3092\u305d\u308c\u305e\u308c\u51fa\u529b\u3059\u308c\u3070OK\n\n\n``` Bash\n$cat data1 | tse -b 'd={\"a\": \"\", \"b\": \"\"}' -s '' 'd[L1] = d[L1] + \" \" + L2' -e 'for k, v in sorted(d.items()):print(k + v)'\na 1 2 3\nb 4 5\n```\n\n+ json\u5f62\u5f0f\u306f\u3001\u6700\u5f8c\u306b\u30c7\u30a3\u30af\u30b7\u30e7\u30ca\u30ea\u3092`json.dumps()`\u3057\u3066\u3084\u308c\u3070OK\n+ `-module`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001`json`\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\n\n```Bash\n$cat data1 | tse -m json -b 'd={\"a\": [], \"b\": []}' -s '' 'd[L1].append(int(L2))' -e 'print(json.dumps(sorted(d.items())))'\n[[\"a\", [1, 2, 3]], [\"b\", [4, 5]]]\n```\n\n### \u7b2c18\u56de\u30cb\u30f3\u30cb\u30af\u5165\u308c\u307e\u3059\u304b\u30b7\u30a7\u30eb\u82b8\u52c9\u5f37\u4f1a\nhttps://blog.ueda.asia/?p=6877\n\n#### Q1\n\u6b21\u306e\u30d5\u30a1\u30a4\u30eb\u306f1\u5217\u76ee\u304c\u30ad\u30fc\u30012\u5217\u76ee\u304c\u5024\u3067\u3059\u304c\u3001\u300c\u30aa\u30c8\u30f3\u300d\u3068\u300c\u30aa\u30ab\u30f3\u300d\u306e\u4e21\u65b9\u306e\u5024\u304c\u3042\u308b\u30ad\u30fc\u3092\u63a2\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n<pre>\n$ cat text \n001 \u30aa\u30c8\u30f3\n001 \u30aa\u30c8\u30f3\n001 \u30a2\u30ab\u30f3\n002 \u30aa\u30ab\u30f3\n003 \u30aa\u30c8\u30f3\n003 \u30e4\u30ab\u30f3\n003 \u30aa\u30ab\u30f3\n004 \u30aa\u30ab\u30f3\n005 \u30aa\u30c8\u30f3\n005 \u30df\u30ab\u30f3\n005 \u30a2\u30ab\u30f3\n</pre>\n\n\n#### \u89e3\u7b54\n\n+ `-s`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u3001\u300c\u30aa\u30c8\u30f3\u300d\u307e\u305f\u306f\u300c\u30aa\u30ab\u30f3\u300d\u3092\u542b\u3080\u3068\u3044\u3046\u6b63\u898f\u8868\u73fe\u3092\u6307\u5b9a\u3059\u308c\u3070OK\n\n```Bash\n$uniq text | tse -s '\u30aa\u30c8\u30f3|\u30aa\u30ab\u30f3' 'print L1' | uniq -d\n003\n```\n\n### \u7b2c19\u56de\u30b7\u30a7\u30eb\u82b83\u5468\u5e74\u8a18\u5ff5\u52c9\u5f37\u4f1a\nhttps://blog.ueda.asia/?p=7146\n\n#### Q2\n\u4e8c\u3064\u306e\u81ea\u7136\u6570\u3092\n\n<pre>\n$ echo 1 4\n</pre>\n\n\u3068\u3044\u3046\u3088\u3046\u306becho\u3067\u51fa\u529b\u3057\u305f\u3042\u3068\u3001\n\n<pre>\n4\n3\n2\n1\n2\n3\n4\n</pre>\n\n\u3068\u3044\u3046\u3088\u3046\u306b\u9593\u306e\u6570\u3092\u57cb\u3081\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n#### \u89e3\u7b54\n\n+ \u3061\u3087\u3063\u3068\u5197\u9577\u3060\u304c\u3001\u5358\u7d14\u306b`for`\u6587\u3067\u7e70\u308a\u8fd4\u305b\u3070OK\n\n```Bash\n$echo 1 4 | tse -s '' 'for s in range(int(L1), int(L2)+1)[::-1]: print(s)' 'for s in range(int(L1)+1, int(L2)+1): print(s)'\n```\n\n## \u304a\u308f\u308a\u306b\n\u3056\u3063\u3068tse\u3092\u6d3b\u7528\u3057\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u666e\u6bb5\u6163\u308c\u3066\u3044\u308bPython\u306esyntax\u3067\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u304c\u66f8\u3051\u3066\u304a\u624b\u8efd\u306b\u306a\u308a\u307e\u3057\u305f\uff01\n\u6016\u304f\u3066\u907f\u3051\u3066\u3044\u305f\u30ef\u30f3\u30e9\u30a4\u30ca\u30fc\u3068\u3044\u3046\u5206\u91ce\u306b\u3001\u5c11\u3057\u99b4\u67d3\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3088\u3046\u306a\u6c17\u304c\u3057\u307e\u3059^^\n\n\u660e\u65e5\u306e\u51fa\u756a\u306f[@zayarwinttun](http://qiita.com/zayarwinttun)\u3055\u3093\u3067\u3059\uff01\n", "tags": ["Tse", "Python", "shell", "awk", "sed"]}