{"tags": ["programming", "Ruby", "\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nRuby\u306b\u3088\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3\u7b2c4\u7ae0\u3002\nStrategy Pattern\u3002\nRuby\u306b\u3088\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f35\u539f\u5247\u306b\u5247\u3063\u3066\u7406\u89e3\u3059\u308b\u3002\n\n\u3069\u3093\u306a\u30d1\u30bf\u30fc\u30f3\u304b\n\u62bd\u8c61\u7684\u306a\u51e6\u7406\u3068\u5177\u4f53\u7684\u306a\u51e6\u7406\u3092\u5206\u96e2\u3059\u308b\u3053\u3068\u3067\u3001\n\u5909\u5316\u306b\u5f37\u3044\u69cb\u9020\u3092\u5b9f\u73fe\u3059\u308b\u3002\n\u2192\u305d\u306e\u76ee\u7684\u306fTemplate Method\u3068\u307b\u307c\u540c\u7b49\n\nTemplate Method\u306e\u8ab2\u984c\n\u3057\u304b\u3057\u3001Template Method\u306b\u306f\u6b20\u70b9\u304c\u3042\u308b\u3002\u305d\u308c\u306f\u3001\n\u7d99\u627f\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u308b\u3053\u3068\u3002\n\u7d99\u627f\u306e\u6b20\u70b9\nhttp://qiita.com/kidachi_/items/4b63de9ad5a97726c50c#2-3\n\n\u30b9\u30fc\u30d1\u30fc\u30af\u30e9\u30b9\u306e\u632f\u308b\u821e\u3044\u306e\u5909\u66f4\u306f\u3001\u30b5\u30d6\u30af\u30e9\u30b9\u306e\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\n\u30b5\u30d6\u30af\u30e9\u30b9\u306f\u30b9\u30fc\u30d1\u30fc\u30af\u30e9\u30b9\u306e\u4e2d\u8eab\u3092\u8997\u304f\u3053\u3068\u304c\u51fa\u6765\u308b\n\n\u305d\u3053\u3067Strategy\u3067\u306f\u3001\n\u5909\u5316\u3057\u3084\u3059\u3044\u30b3\u30fc\u30c9\u306e\u584a\u3092\u62bd\u51fa\u3057\u3001\n\u5168\u304f\u5225\u306e\u30af\u30e9\u30b9\u306b\u9589\u3058\u8fbc\u3081\u308b\u3002\n\u3064\u307e\u308a\u3001\u96c6\u7d04\u3092\u4f7f\u3046\u3002\n\n\u7570\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u5f15\u304d\u51fa\u3059\n\u540c\u3058\u76ee\u7684\u3092\u6301\u3063\u305f\u4e00\u7fa4\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b9\u30c8\u30e9\u30c6\u30b8\uff08\u7fa4\uff09\u3068\u6349\u3048\u308b\u3002\n\u30b9\u30c8\u30e9\u30c6\u30b8\u7fa4\u306f\u3001\u305d\u306e\u3059\u3079\u3066\u304c\u5168\u304f\u540c\u3058\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u3002\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u5229\u7528\u3059\u308b\u5074\uff09\u306f\u3001\u5404\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\n\u53d6\u308a\u66ff\u3048\u53ef\u80fd\u30d1\u30fc\u30c4\u3068\u3057\u3066\u6271\u3046\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u2192\u95a2\u5fc3\u306e\u5206\u96e2 \u3092\u5b9f\u73fe\u3059\u308b\u3002\n\n\u5b9f\u88c5\n\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u5229\u7528\u3059\u308b\u5074\uff09\nclass Report\n  attr_reader :title, :text\n  attr_accessor :formatter\n\n  def initialize(formatter)\n    @title = '\u6708\u6b21\u5831\u544a'\n    @text = ['\u6700\u9ad8\uff01', '\u9806\u8abf', '\u666e\u901a']\n    @formatter = formatter\n  end\n\n  def output_report\n    @formatter.output_report(self)\n  end\nend\n\n\n\u30b9\u30c8\u30e9\u30c6\u30b81\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aHTML\uff09\nclass HTMLFormatter\n  def output_report(context)\n    puts('<html>')\n    puts('  <head>')\n    puts(\"    <title>#{context.title}</title>\")\n    puts('  </head>')\n    puts('  <body>')\n    context.text.each do |line|\n      puts(\"    <p>#{line}</p>\")\n    end\n    puts('  </body>')\n    puts('</html>')\n  end\nend\n\n\n\u30b9\u30c8\u30e9\u30c6\u30b82\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aPlainText\uff09\nclass PlainTextFormatter\n  def output_report(context)\n    puts(\"*** #{context.title} ***\")\n    context.text.each do |line|\n      puts(line)\n    end\n  end\nend\n\n\n\u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u6d3b\u7528\n[9] pry(main)> report = Report.new(HTMLFormatter.new)\n[10] pry(main)> report.output_report\n<html>\n  <head>\n    <title>\u6708\u6b21\u5831\u544a</title>\n  </head>\n  <body>\n    <p>\u6700\u9ad8\uff01</p>\n    <p>\u9806\u8abf</p>\n    <p>\u666e\u901a</p>\n  </body>\n</html>\n\n[12] pry(main)> report.formatter = PlainTextFormatter.new\n[13] pry(main)> report.output_report\n*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n\nTemplate Method\u306b\u3057\u3066\u3082Strategy\u306b\u3057\u3066\u3082\u3001\n\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5207\u308a\u66ff\u3048\u30921\u7b87\u6240\uff08\u304b\u3089\u591a\u304f\u3066\u3082\u6570\u7b87\u6240\uff09\u306b\u96c6\u4e2d\u3067\u304d\u308b\u3002\n\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u9593\u3067\u306e\u30c7\u30fc\u30bf\u5171\u6709\n2\u8005\u306e\u30c7\u30fc\u30bf\u5171\u6709\u306e\u65b9\u6cd5\u3068\u3057\u3066\u306f2\u30d1\u30bf\u30fc\u30f3\u5b58\u5728\u3059\u308b\u3002\n\n\u30b9\u30c8\u30e9\u30c6\u30b8\u3078\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u81ea\u4f53\u306e\u53c2\u7167\uff08self\uff09\u3092\u6e21\u3059\n\u30b9\u30c8\u30e9\u30c6\u30b8\u5074\u3067\u4f7f\u3046\u5fc5\u8981\u306e\u3042\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5074\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5168\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\n\n\u4e0a\u306e\u4f8b\u3067\u306f\u30011\u3092\u7528\u3044\u3066\u3044\u308b\u304c\u30012\u306e\u30d1\u30bf\u30fc\u30f3\u3082\u898b\u3066\u307f\u308b\u3002\n\n\u30b9\u30c8\u30e9\u30c6\u30b8\u5074\u3067\u4f7f\u3046\u5fc5\u8981\u306e\u3042\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5074\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5168\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\nclass Report\n  attr_reader :title, :text\n  attr_accessor :formatter\n\n  def initialize(formatter)\n    @title = '\u6708\u6b21\u5831\u544a'\n    @text = ['\u6700\u9ad8\uff01', '\u9806\u8abf', '\u666e\u901a']\n    @formatter = formatter\n  end\n\n  def output_report\n    @formatter.output_report(@title, @text)  # \uff08\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u306f\u306a\u304f\uff09\u5024\u3092\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\n  end\nend\n\nclass PlainTextFormatter\n  def output_report(title, text)  # \uff08\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u306f\u306a\u304f\uff09\u5024\u3092\u53d7\u3051\u53d6\u308b\n    puts(\"*** #{title} ***\")\n    text.each do |line|\n      puts(line)\n    end\n  end\nend\n\n[3] pry(main)> report = Report.new(PlainTextFormatter.new)\n[4] pry(main)> report.output_report\n*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n\n\n\u30e1\u30ea\u30c3\u30c8\u30fb\u30c7\u30e1\u30ea\u30c3\u30c8\n\n1. \u30b9\u30c8\u30e9\u30c6\u30b8\u3078\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u81ea\u4f53\u306e\u53c2\u7167\uff08self\uff09\u3092\u6e21\u3059\n\u30e1\u30ea\u30c3\u30c8\uff1a\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u304c\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308b\u3002\n\u30c7\u30e1\u30ea\u30c3\u30c8\uff1a\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u7d50\u5408\u5ea6\u304c\u4e0a\u304c\u3063\u3066\u3057\u307e\u3046\u3002\n\n2. \u30b9\u30c8\u30e9\u30c6\u30b8\u5074\u3067\u4f7f\u3046\u5fc5\u8981\u306e\u3042\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5074\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5168\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\n\u30e1\u30ea\u30c3\u30c8\uff1a\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u5206\u96e2\u306f\u4fdd\u3066\u308b\n\u30c7\u30e1\u30ea\u30c3\u30c8\uff1a\u6e21\u3059\u30c7\u30fc\u30bf\u306e\u6570\u306b\u3088\u3063\u3066\u306f\u3001\u8907\u96d1\u3067\u5927\u91cf\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n\u2192\u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u9069\u5207\u306a\u3082\u306e\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3002\n\nProc\u3084\u30d6\u30ed\u30c3\u30af\u3067\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u4f5c\u308b\n\u3053\u3053\u307e\u3067\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u95a2\u4fc2\u3092\u3001\n\u300c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08\u306e\u5206\u96e2\uff09\u300d\u3068\u3057\u3066\u6349\u3048\u3066\u304d\u305f\u304c\u3001\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3060\u3051\u3067\u306a\u304f\u3001\u300c\u30b3\u30fc\u30c9\u300d\u30ec\u30d9\u30eb\u3067\u3082\u3001\n\u5206\u96e2\u3057\u3001\u6301\u3061\u56de\u3059\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\u3060\u308d\u3046\u304b\uff1f\n\n\u2192 Proc/\u30d6\u30ed\u30c3\u30af\u3067\u5b9f\u73fe\u3059\u308b\u3002\n\u203b Proc\u3084\u30d6\u30ed\u30c3\u30af\u306e\u57fa\u790e\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3002\n[Ruby\u57fa\u790e] \u30d6\u30ed\u30c3\u30af\u3068Proc\u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3059\u308b\nhttp://qiita.com/kidachi_/items/15cfee9ec66804c3afd2\n\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c82\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u5229\u7528\u3059\u308b\u5074\uff09\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u521d\u671f\u5316\u6642\u306b\u6e21\u3055\u308c\u3066\u304f\u308b\u30b9\u30c8\u30e9\u30c6\u30b8\u306f\u3001\uff08\u30af\u30e9\u30b9\u3067\u306f\u306a\u304f\uff09\u30d6\u30ed\u30c3\u30af\u3092\u671f\u5f85\u3059\u308b\u3002\nclass Report\n  attr_reader :title, :text\n  attr_accessor :formatter\n\n  def initialize(&formatter)  # \u6e21\u3055\u308c\u3066\u304f\u308b\u30d6\u30ed\u30c3\u30af\u3092proc\u5316\n    @title = '\u6708\u6b21\u5831\u544a'\n    @text = ['\u6700\u9ad8\uff01', '\u9806\u8abf', '\u666e\u901a']\n    @formatter = formatter\n  end\n\n  def output_report\n    @formatter.call(self)  # Proc\u3092call\n  end\nend\n\n\n\u30b9\u30c8\u30e9\u30c6\u30b83\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aPlainText\u3001\u30bf\u30a4\u30d7\uff1a\u30d6\u30ed\u30c3\u30af\uff09\nreport = Report.new do |context|\n  puts(\"*** #{context.title} ***\")\n  context.text.each do |line|\n    puts(line)\n  end\nend\n\n[11] pry(main)> report.output_report\n*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n\n\n\u30b9\u30c8\u30e9\u30c6\u30b84\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aPlainText\u3001\u30bf\u30a4\u30d7\uff1aProc\uff09\nPLAIN_TEXT_FORMATTER = lambda { |context|\n  puts(\"*** #{context.title} ***\")\n  context.text.each do |line|\n    puts(line)\n  end\n}\n\nreport = Report.new(&PLAIN_TEXT_FORMATTER)  # proc\u3092\u30d6\u30ed\u30c3\u30af\u5316\u3057\u3066\u6e21\u3059\n\n\n[15] pry(main)> report.output_report\n\u2028*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n\nproc\u3084\u30d6\u30ed\u30c3\u30af\u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u624b\u8efd\u306b\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u4f5c\u308b\u3053\u3068\u304c\u51fa\u6765\u305f\u3002\n\n\u307e\u3068\u3081\nStrategy\u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308a\u3001\n\n\u5909\u308f\u308b\u3082\u306e\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\uff09\u3068\u5909\u308f\u3089\u306a\u3044\u3082\u306e\uff08\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff09\u3092\u5206\u96e2\u3057\u3066\u3001\u5909\u5316\u306b\u5f37\u3044\u69cb\u9020\u3078\n\n\u7d99\u627f\u3088\u308a\u96c6\u7d04\u3092\u5b9f\u73fe\n\u30d6\u30ed\u30c3\u30af\u306b\u3088\u308b\u30b9\u30c8\u30e9\u30c6\u30b8\u3082\u53ef\u80fd\n\n\n\u4ee5\u4e0b\u3078\u7d9a\u304f\n\u3010Observer\u3011-\u672c\u65e5\u306e\u30cb\u30e5\u30fc\u30b9\u3092\u304a\u5c4a\u3051\u3057\u307e\u3059-\nhttp://qiita.com/kidachi_/items/ce18d2a926c558159689\n\n# \u6982\u8981\n\n[Ruby\u306b\u3088\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f3](http://www.amazon.co.jp/gp/product/4894712857/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=247&creative=1211&creativeASIN=4894712857&linkCode=as2&tag=kidachi-22)\u7b2c4\u7ae0\u3002\nStrategy Pattern\u3002\n\n[Ruby\u306b\u3088\u308b\u30c7\u30b6\u30a4\u30f3\u30d1\u30bf\u30fc\u30f35\u539f\u5247](http://qiita.com/kidachi_/items/4b63de9ad5a97726c50c)\u306b\u5247\u3063\u3066\u7406\u89e3\u3059\u308b\u3002\n\n\n# \u3069\u3093\u306a\u30d1\u30bf\u30fc\u30f3\u304b\n\n\u62bd\u8c61\u7684\u306a\u51e6\u7406\u3068\u5177\u4f53\u7684\u306a\u51e6\u7406\u3092\u5206\u96e2\u3059\u308b\u3053\u3068\u3067\u3001\n***\u5909\u5316\u306b\u5f37\u3044\u69cb\u9020***\u3092\u5b9f\u73fe\u3059\u308b\u3002\n\n\u2192\u305d\u306e\u76ee\u7684\u306f[Template Method](http://qiita.com/kidachi_/items/7c2a80bfc8a87a05051f)\u3068\u307b\u307c\u540c\u7b49\n\n# Template Method\u306e\u8ab2\u984c\n\n\u3057\u304b\u3057\u3001Template Method\u306b\u306f\u6b20\u70b9\u304c\u3042\u308b\u3002\u305d\u308c\u306f\u3001\n**\u7d99\u627f\u3092\u30d9\u30fc\u30b9\u306b\u3057\u3066\u3044\u308b**\u3053\u3068\u3002\n\n\u7d99\u627f\u306e\u6b20\u70b9\nhttp://qiita.com/kidachi_/items/4b63de9ad5a97726c50c#2-3\n\n- \u30b9\u30fc\u30d1\u30fc\u30af\u30e9\u30b9\u306e\u632f\u308b\u821e\u3044\u306e\u5909\u66f4\u306f\u3001\u30b5\u30d6\u30af\u30e9\u30b9\u306e\u632f\u308b\u821e\u3044\u3092\u5909\u3048\u308b\n- \u30b5\u30d6\u30af\u30e9\u30b9\u306f\u30b9\u30fc\u30d1\u30fc\u30af\u30e9\u30b9\u306e\u4e2d\u8eab\u3092\u8997\u304f\u3053\u3068\u304c\u51fa\u6765\u308b\n\n\n\u305d\u3053\u3067Strategy\u3067\u306f\u3001\n***\u5909\u5316\u3057\u3084\u3059\u3044\u30b3\u30fc\u30c9\u306e\u584a***\u3092\u62bd\u51fa\u3057\u3001\n***\u5168\u304f\u5225\u306e\u30af\u30e9\u30b9***\u306b\u9589\u3058\u8fbc\u3081\u308b\u3002\n\n\u3064\u307e\u308a\u3001\u96c6\u7d04\u3092\u4f7f\u3046\u3002\n\n\n## \u7570\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u3092\u5f15\u304d\u51fa\u3059\n\n\n\u540c\u3058\u76ee\u7684\u3092\u6301\u3063\u305f\u4e00\u7fa4\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30b9\u30c8\u30e9\u30c6\u30b8\uff08\u7fa4\uff09\u3068\u6349\u3048\u308b\u3002\n\u30b9\u30c8\u30e9\u30c6\u30b8\u7fa4\u306f\u3001\u305d\u306e\u3059\u3079\u3066\u304c\u5168\u304f\u540c\u3058\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u63d0\u4f9b\u3059\u308b\u3002\n\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u5229\u7528\u3059\u308b\u5074\uff09\u306f\u3001\u5404\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\n**\u53d6\u308a\u66ff\u3048\u53ef\u80fd\u30d1\u30fc\u30c4**\u3068\u3057\u3066\u6271\u3046\u3053\u3068\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n**\u2192\u95a2\u5fc3\u306e\u5206\u96e2** \u3092\u5b9f\u73fe\u3059\u308b\u3002\n\n# \u5b9f\u88c5\n\n## \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u5229\u7528\u3059\u308b\u5074\uff09\n\n```ruby\nclass Report\n  attr_reader :title, :text\n  attr_accessor :formatter\n\n  def initialize(formatter)\n    @title = '\u6708\u6b21\u5831\u544a'\n    @text = ['\u6700\u9ad8\uff01', '\u9806\u8abf', '\u666e\u901a']\n    @formatter = formatter\n  end\n\n  def output_report\n    @formatter.output_report(self)\n  end\nend\n```\n\n## \u30b9\u30c8\u30e9\u30c6\u30b81\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aHTML\uff09\n\n```ruby\nclass HTMLFormatter\n  def output_report(context)\n    puts('<html>')\n    puts('  <head>')\n    puts(\"    <title>#{context.title}</title>\")\n    puts('  </head>')\n    puts('  <body>')\n    context.text.each do |line|\n      puts(\"    <p>#{line}</p>\")\n    end\n    puts('  </body>')\n    puts('</html>')\n  end\nend\n```\n\n## \u30b9\u30c8\u30e9\u30c6\u30b82\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aPlainText\uff09\n\n```ruby\nclass PlainTextFormatter\n  def output_report(context)\n    puts(\"*** #{context.title} ***\")\n    context.text.each do |line|\n      puts(line)\n    end\n  end\nend\n```\n\n## \u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u6d3b\u7528\n\n```ruby\n[9] pry(main)> report = Report.new(HTMLFormatter.new)\n[10] pry(main)> report.output_report\n<html>\n  <head>\n    <title>\u6708\u6b21\u5831\u544a</title>\n  </head>\n  <body>\n    <p>\u6700\u9ad8\uff01</p>\n    <p>\u9806\u8abf</p>\n    <p>\u666e\u901a</p>\n  </body>\n</html>\n\n[12] pry(main)> report.formatter = PlainTextFormatter.new\n[13] pry(main)> report.output_report\n*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n```\n\nTemplate Method\u306b\u3057\u3066\u3082Strategy\u306b\u3057\u3066\u3082\u3001\n\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u5207\u308a\u66ff\u3048\u30921\u7b87\u6240\uff08\u304b\u3089\u591a\u304f\u3066\u3082\u6570\u7b87\u6240\uff09\u306b\u96c6\u4e2d\u3067\u304d\u308b\u3002\n\n\n# \u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u9593\u3067\u306e\u30c7\u30fc\u30bf\u5171\u6709\n\n2\u8005\u306e\u30c7\u30fc\u30bf\u5171\u6709\u306e\u65b9\u6cd5\u3068\u3057\u3066\u306f2\u30d1\u30bf\u30fc\u30f3\u5b58\u5728\u3059\u308b\u3002\n\n1. \u30b9\u30c8\u30e9\u30c6\u30b8\u3078\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u81ea\u4f53\u306e\u53c2\u7167\uff08self\uff09\u3092\u6e21\u3059\n- \u30b9\u30c8\u30e9\u30c6\u30b8\u5074\u3067\u4f7f\u3046\u5fc5\u8981\u306e\u3042\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5074\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5168\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\n\n\u4e0a\u306e\u4f8b\u3067\u306f\u30011\u3092\u7528\u3044\u3066\u3044\u308b\u304c\u30012\u306e\u30d1\u30bf\u30fc\u30f3\u3082\u898b\u3066\u307f\u308b\u3002\n\n## \u30b9\u30c8\u30e9\u30c6\u30b8\u5074\u3067\u4f7f\u3046\u5fc5\u8981\u306e\u3042\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5074\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5168\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\n\n\n```ruby\nclass Report\n  attr_reader :title, :text\n  attr_accessor :formatter\n\n  def initialize(formatter)\n    @title = '\u6708\u6b21\u5831\u544a'\n    @text = ['\u6700\u9ad8\uff01', '\u9806\u8abf', '\u666e\u901a']\n    @formatter = formatter\n  end\n\n  def output_report\n    @formatter.output_report(@title, @text)  # \uff08\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u306f\u306a\u304f\uff09\u5024\u3092\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\n  end\nend\n```\n\n```ruby\nclass PlainTextFormatter\n  def output_report(title, text)  # \uff08\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3067\u306f\u306a\u304f\uff09\u5024\u3092\u53d7\u3051\u53d6\u308b\n    puts(\"*** #{title} ***\")\n    text.each do |line|\n      puts(line)\n    end\n  end\nend\n```\n\n```ruby\n[3] pry(main)> report = Report.new(PlainTextFormatter.new)\n[4] pry(main)> report.output_report\n*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n```\n\n\n## \u30e1\u30ea\u30c3\u30c8\u30fb\u30c7\u30e1\u30ea\u30c3\u30c8\n\n### 1. \u30b9\u30c8\u30e9\u30c6\u30b8\u3078\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u81ea\u4f53\u306e\u53c2\u7167\uff08self\uff09\u3092\u6e21\u3059\n\n\u30e1\u30ea\u30c3\u30c8\uff1a\u30c7\u30fc\u30bf\u306e\u6d41\u308c\u304c\u30b7\u30f3\u30d7\u30eb\u306b\u306a\u308b\u3002\n\u30c7\u30e1\u30ea\u30c3\u30c8\uff1a\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u7d50\u5408\u5ea6\u304c\u4e0a\u304c\u3063\u3066\u3057\u307e\u3046\u3002\n\n### 2. \u30b9\u30c8\u30e9\u30c6\u30b8\u5074\u3067\u4f7f\u3046\u5fc5\u8981\u306e\u3042\u308b\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u5074\u306e\u30c7\u30fc\u30bf\u306f\u3001\u5168\u3066\u5f15\u6570\u3068\u3057\u3066\u6e21\u3059\n\n\u30e1\u30ea\u30c3\u30c8\uff1a\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u5206\u96e2\u306f\u4fdd\u3066\u308b\n\u30c7\u30e1\u30ea\u30c3\u30c8\uff1a\u6e21\u3059\u30c7\u30fc\u30bf\u306e\u6570\u306b\u3088\u3063\u3066\u306f\u3001\u8907\u96d1\u3067\u5927\u91cf\u306b\u306a\u308b\u53ef\u80fd\u6027\u304c\u3042\u308b\u3002\n\n\n\u2192\u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u9069\u5207\u306a\u3082\u306e\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3002\n\n\n# Proc\u3084\u30d6\u30ed\u30c3\u30af\u3067\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u4f5c\u308b\n\n\u3053\u3053\u307e\u3067\u3001\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3068\u30b9\u30c8\u30e9\u30c6\u30b8\u306e\u95a2\u4fc2\u3092\u3001\n\u300c\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3068\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08\u306e\u5206\u96e2\uff09\u300d\u3068\u3057\u3066\u6349\u3048\u3066\u304d\u305f\u304c\u3001\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3060\u3051\u3067\u306a\u304f\u3001\u300c\u30b3\u30fc\u30c9\u300d\u30ec\u30d9\u30eb\u3067\u3082\u3001\n\u5206\u96e2\u3057\u3001\u6301\u3061\u56de\u3059\u3053\u3068\u304c\u51fa\u6765\u306a\u3044\u3060\u308d\u3046\u304b\uff1f\n\n#### \u2192 Proc/\u30d6\u30ed\u30c3\u30af\u3067\u5b9f\u73fe\u3059\u308b\u3002\n\n\u203b Proc\u3084\u30d6\u30ed\u30c3\u30af\u306e\u57fa\u790e\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3002\n[Ruby\u57fa\u790e] \u30d6\u30ed\u30c3\u30af\u3068Proc\u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3059\u308b\nhttp://qiita.com/kidachi_/items/15cfee9ec66804c3afd2\n\n\n## \u30b3\u30f3\u30c6\u30ad\u30b9\u30c82\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u5229\u7528\u3059\u308b\u5074\uff09\n\n\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u521d\u671f\u5316\u6642\u306b\u6e21\u3055\u308c\u3066\u304f\u308b\u30b9\u30c8\u30e9\u30c6\u30b8\u306f\u3001\uff08\u30af\u30e9\u30b9\u3067\u306f\u306a\u304f\uff09\u30d6\u30ed\u30c3\u30af\u3092\u671f\u5f85\u3059\u308b\u3002\n\n```ruby\nclass Report\n  attr_reader :title, :text\n  attr_accessor :formatter\n\n  def initialize(&formatter)  # \u6e21\u3055\u308c\u3066\u304f\u308b\u30d6\u30ed\u30c3\u30af\u3092proc\u5316\n    @title = '\u6708\u6b21\u5831\u544a'\n    @text = ['\u6700\u9ad8\uff01', '\u9806\u8abf', '\u666e\u901a']\n    @formatter = formatter\n  end\n\n  def output_report\n    @formatter.call(self)  # Proc\u3092call\n  end\nend\n```\n\n## \u30b9\u30c8\u30e9\u30c6\u30b83\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aPlainText\u3001\u30bf\u30a4\u30d7\uff1a\u30d6\u30ed\u30c3\u30af\uff09\n\n```ruby\nreport = Report.new do |context|\n  puts(\"*** #{context.title} ***\")\n  context.text.each do |line|\n    puts(line)\n  end\nend\n```\n\n```ruby\n[11] pry(main)> report.output_report\n*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n```\n\n\n## \u30b9\u30c8\u30e9\u30c6\u30b84\uff08\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff1aPlainText\u3001\u30bf\u30a4\u30d7\uff1aProc\uff09\n\n```ruby\nPLAIN_TEXT_FORMATTER = lambda { |context|\n  puts(\"*** #{context.title} ***\")\n  context.text.each do |line|\n    puts(line)\n  end\n}\n\nreport = Report.new(&PLAIN_TEXT_FORMATTER)  # proc\u3092\u30d6\u30ed\u30c3\u30af\u5316\u3057\u3066\u6e21\u3059\n\n```\n\n```ruby\n[15] pry(main)> report.output_report\n\u2028*** \u6708\u6b21\u5831\u544a ***\n\u6700\u9ad8\uff01\n\u9806\u8abf\n\u666e\u901a\n```\n\n\nproc\u3084\u30d6\u30ed\u30c3\u30af\u3092\u6d3b\u7528\u3059\u308b\u3053\u3068\u3067\u3001\u624b\u8efd\u306b\u30b9\u30c8\u30e9\u30c6\u30b8\u3092\u4f5c\u308b\u3053\u3068\u304c\u51fa\u6765\u305f\u3002\n\n\n# \u307e\u3068\u3081\n\nStrategy\u30d1\u30bf\u30fc\u30f3\u306b\u3088\u308a\u3001\n\n\n- \u5909\u308f\u308b\u3082\u306e\uff08\u30b9\u30c8\u30e9\u30c6\u30b8\uff09\u3068\u5909\u308f\u3089\u306a\u3044\u3082\u306e\uff08\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\uff09\u3092\u5206\u96e2\u3057\u3066\u3001\u5909\u5316\u306b\u5f37\u3044\u69cb\u9020\u3078\n- [\u7d99\u627f\u3088\u308a\u96c6\u7d04](http://qiita.com/kidachi_/items/4b63de9ad5a97726c50c#2-3)\u3092\u5b9f\u73fe\n- \u30d6\u30ed\u30c3\u30af\u306b\u3088\u308b\u30b9\u30c8\u30e9\u30c6\u30b8\u3082\u53ef\u80fd\n\n\n# \u4ee5\u4e0b\u3078\u7d9a\u304f\n\n\u3010Observer\u3011-\u672c\u65e5\u306e\u30cb\u30e5\u30fc\u30b9\u3092\u304a\u5c4a\u3051\u3057\u307e\u3059-\nhttp://qiita.com/kidachi_/items/ce18d2a926c558159689\n\n\n\n"}