{"context": " More than 1 year has passed since last update.\n\nChef Client 12.1.0 Released\nChef client 12.1.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\nhttps://www.chef.io/blog/2015/03/03/chef-12-1-0-released/\nhttps://github.com/chef/chef/blob/12-stable/RELEASE_NOTES.md\nhttp://docs.chef.io/release_notes.html\npackage\u306e\u8907\u6570\u4e00\u62ec\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084template/cookbook_file\u7b49\u306e\u4e8b\u524dverify\u306a\u3069\u3001\u304b\u3086\u3044\u3068\u3053\u308d\u306b\u624b\u304c\u5c4a\u304d\u305d\u3046\u306a\u5909\u66f4\u304c\u8272\u3005\u5165\u3063\u3066\u304d\u3066\u3044\u307e\u3059\u304c\u3001\n\u500b\u4eba\u7684\u306b\u4e00\u756a\u6c17\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001\"Audit Mode\"\u3067\u3059\u3002\n\nAudit Mode\n\u203b\u3053\u306e\u6a5f\u80fd\u306fchef-client 12.1.0\u3067\u306fExperimental\u306a\u306e\u3067\u3001\u5c06\u6765\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3084\u4ed5\u69d8\u306e\u5909\u66f4\u304c\u3042\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\nAudit Mode\u3002\u7aef\u7684\u306b\u8a00\u3048\u3070\u3001recipe\u306e\u4e2d\u306bserverspec\u3092\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001apache2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306880\u756a\u30dd\u30fc\u30c8\u306e\u30c1\u30a7\u30c3\u30af\u306e\u3088\u3046\u306a\u3001\u5f93\u6765\u306a\u3089recipe\u3068serverspec\u306b\u5206\u304b\u308c\u3066\u3044\u305f\u8a18\u8ff0\u3092\u4e00\u3064\u306erecipe\u306b\u307e\u3068\u3081\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\npackage 'apache2'\n\ncontrol_group \"#{cookbook_name}::#{recipe_name}\" do\n  control \"port 80\" do\n    it \"should be open\" do\n      expect(port(80)).to be_listening\n    end\n  end\nend\n\n\ncontrol_group\u306e\u30d6\u30ed\u30c3\u30af\u5185\u304cserverspec\u90e8\u5206\u3067\u3059\u3002\ncontrol_group\u3084control\u306a\u3069\u898b\u6163\u308c\u306a\u3044\u8a18\u8ff0\u304c\u591a\u3044\u3067\u3059\u304c\u3001\u4e0a\u306b\u6319\u3052\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306erecipe\u3092--audit-mode enabled\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u305fchef-client\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u5168\u3066\u306eresource\u306econverge\u304c\u7d42\u4e86\u3057\u305f\u5f8c\u306b\u3001\nserverspec\u90e8\u5206\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002(audit phase)\nvagrant@default-ubuntu-1404:~$ sudo chef-client --local-mode -c /tmp/kitchen/client.rb --log_level auto --chef-zero-port 8889 --j /tmp/kitchen/dna.json --audit-mode enabled\n\n\n\n[2015-03-04T15:22:31+00:00] WARN: Chef-client has been configured to run audits after it converges. Audit mode is an experimental feature currently under development. API changes may occur. Use at your own risk.\n* To enable audit mode after converge, use command line option `--audit-mode enabled` or set `:audit_mode = :enabled` in your config file.\n* To disable audit mode, use command line option `--audit-mode disabled` or set `:audit_mode = :disabled` in your config file.\n* To only run audit mode, use command line option `--audit-mode audit-only` or set `:audit_mode = :audit_only` in your config file.\nAudit mode is disabled by default.\nStarting Chef Client, version 12.1.0\n[2015-03-04T15:22:38+00:00] WARN: Child with name 'dna.json' found in multiple directories: /tmp/kitchen/dna.json and /tmp/kitchen/dna.json\nresolving cookbooks for run list: [\"sample::default\"]\nSynchronizing Cookbooks:\n  - sample\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: sample::default\n  * apt_package[apache2] action install\n    - install version 2.4.7-1ubuntu4 of package apache2\nStarting audit phase\n\nsample::default\n  port 80\n    should be open\n\nFinished in 0.12418 seconds (files took 0.27734 seconds to load)\n1 example, 0 failures\nAuditing complete\n\nRunning handlers:\nRunning handlers complete\nChef Client finished, 1/1 resources updated in 10.170761888 seconds\n  1/1 Audits succeeded\n\n\n\u3082\u3057port 80\u304c\u958b\u3044\u3066\u3044\u306a\u3044\u3068\nStarting audit phase\n\nsample::default\n  port 80\n    should be open (FAILED - 1)\n\nFailures:\n\n  1) sample::default port 80 should be open\n     Failure/Error: expect(port(80)).not_to be_listening\n       expected Port \"80\" not to be listening\n\n\u306e\u3088\u3046\u306b\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u3002\n--audit-mode audit_only\u306b\u3059\u308b\u3068\u3001serverspec\u306e\u307f\u5b9f\u884c\u3057converge\u306f\u884c\u3044\u307e\u305b\u3093\u3002\n--audit-mode\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306fdisabled\uff08converge\u306e\u307f\u884c\u3044\u3001serverspec\u306f\u5b9f\u884c\u3057\u306a\u3044\uff09\u3067\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3\u4ee5\u5916\u306b\u3082\u3001client.rb\u306b\naudit_mode :audit_only\n\n\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u304a\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306fport\u306e\u30c1\u30a7\u30c3\u30af\u306e\u307f\u884c\u3044\u307e\u3057\u305f\u304c\u3001serverspec\u306eResource\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u306f\u4f55\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u3067\u3059\u3002\n# User\n  control \"vagrant user\" do\n    it \"should be exist\" do\n      expect(user('vagrant')).to be_exist\n    end\n  end\n\n# Command\n  control \"ls command\" do\n    it \"exits with status 0\" do\n      expect(command('ls').exit_status).to be 0\n    end\n  end\n\n\n\u4f7f\u3044\u9053\n\u3053\u306eAudit Mode\u306b\u3088\u3063\u3066\u3001\u4eca\u307e\u3067\u5225\u3005\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5225\u3005\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304b\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u304b\u3063\u305frecipe\u3068serverspec\u3092\u3001\u540c\u3058recipe\u3068\u3057\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u3001recipe\u306e\u30c6\u30b9\u30c8\u304c\u683c\u6bb5\u306b\u66f8\u304d\u3084\u3059\u304f\u306a\u308b\u3068\u601d\u308f\u308c\u307e\u3059\u3002\n\nrecipe\u3068\u5bfe\u5fdc\u3059\u308bserverspec\u3092\u4e00\u3064\u306erecipe\u30d5\u30a1\u30a4\u30eb\u306b\u307e\u3068\u3081\u308b\u3082\u3088\u3057\u3001\nrecipe\u30d5\u30a1\u30a4\u30eb\u3068serverspec\u30d5\u30a1\u30a4\u30eb\u3092\u5bfe\u306b\u3057\u3066\u7ba1\u7406\u3059\u308b\u3082\u3088\u3057\uff08recipes/hogehoge.rb\u3068recipes/hogehoge_test.rb\uff09\nserverspec\u3092\u66f8\u3044\u305frecipe\u3092include_recipe\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u3082\u3088\u3057\u3001\nserverspec\u3060\u3051\u66f8\u3044\u305fcookbook\u3092\u4f5c\u308a\u3001cookbook\u9593\u3067serverspec\u3092\u518d\u5229\u7528\u3059\u308b\u306e\u3082\u3088\u3057\u3001\n\n\u8272\u3005\u306a\u4f7f\u3044\u65b9\u304c\u3067\u304d\u305d\u3046\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u304c\u697d\u3057\u307f\u3067\u3059\u3002\n\n\u6ce8\u610f\u70b9\n\u4f7f\u3063\u3066\u3044\u3066\u6c17\u3065\u3044\u305f\u6ce8\u610f\u70b9\u3068\u3057\u3066\u3001\n--audit-mode audit_only\u306b\u3057\u3066\u3044\u3066\u3082\u3001\u7d14\u7c8b\u306bserverspec\u306e\u307f\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u305d\u306e\u524d\u306bcookbook\u306ecompile phase\u306f\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u3053\u3053\u3067\u4f55\u304b\u51e6\u7406\u3092\u3084\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u3053\u306eaudit mode\u306fchef-solo\u3067\u306f\u4f7f\u3048\u307e\u305b\u3093\u3067\u3057\u305f\u3002chef-zero + chef-client local-mode\u3067\u306f\u4f7f\u3048\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n\n# Chef Client 12.1.0 Released\n\nChef client 12.1.0\u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\nhttps://www.chef.io/blog/2015/03/03/chef-12-1-0-released/\nhttps://github.com/chef/chef/blob/12-stable/RELEASE_NOTES.md\nhttp://docs.chef.io/release_notes.html\n\npackage\u306e\u8907\u6570\u4e00\u62ec\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084template/cookbook_file\u7b49\u306e\u4e8b\u524dverify\u306a\u3069\u3001\u304b\u3086\u3044\u3068\u3053\u308d\u306b\u624b\u304c\u5c4a\u304d\u305d\u3046\u306a\u5909\u66f4\u304c\u8272\u3005\u5165\u3063\u3066\u304d\u3066\u3044\u307e\u3059\u304c\u3001\n\u500b\u4eba\u7684\u306b\u4e00\u756a\u6c17\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u306f\u3001\"Audit Mode\"\u3067\u3059\u3002\n\n# Audit Mode\n\u203b\u3053\u306e\u6a5f\u80fd\u306fchef-client 12.1.0\u3067\u306fExperimental\u306a\u306e\u3067\u3001\u5c06\u6765\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3084\u4ed5\u69d8\u306e\u5909\u66f4\u304c\u3042\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\n\nAudit Mode\u3002\u7aef\u7684\u306b\u8a00\u3048\u3070\u3001recipe\u306e\u4e2d\u306bserverspec\u3092\u66f8\u3051\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001apache2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306880\u756a\u30dd\u30fc\u30c8\u306e\u30c1\u30a7\u30c3\u30af\u306e\u3088\u3046\u306a\u3001\u5f93\u6765\u306a\u3089recipe\u3068serverspec\u306b\u5206\u304b\u308c\u3066\u3044\u305f\u8a18\u8ff0\u3092\u4e00\u3064\u306erecipe\u306b\u307e\u3068\u3081\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n```ruby\npackage 'apache2'\n\ncontrol_group \"#{cookbook_name}::#{recipe_name}\" do\n  control \"port 80\" do\n    it \"should be open\" do\n      expect(port(80)).to be_listening\n    end\n  end\nend\n\n```\n\ncontrol_group\u306e\u30d6\u30ed\u30c3\u30af\u5185\u304cserverspec\u90e8\u5206\u3067\u3059\u3002\ncontrol_group\u3084control\u306a\u3069\u898b\u6163\u308c\u306a\u3044\u8a18\u8ff0\u304c\u591a\u3044\u3067\u3059\u304c\u3001\u4e0a\u306b\u6319\u3052\u305f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u306erecipe\u3092--audit-mode enabled\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u305fchef-client\u30b3\u30de\u30f3\u30c9\u3067\u5b9f\u884c\u3059\u308b\u3068\u3001\u5168\u3066\u306eresource\u306econverge\u304c\u7d42\u4e86\u3057\u305f\u5f8c\u306b\u3001\nserverspec\u90e8\u5206\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002(audit phase)\n\n```\nvagrant@default-ubuntu-1404:~$ sudo chef-client --local-mode -c /tmp/kitchen/client.rb --log_level auto --chef-zero-port 8889 --j /tmp/kitchen/dna.json --audit-mode enabled\n\n\n\n[2015-03-04T15:22:31+00:00] WARN: Chef-client has been configured to run audits after it converges. Audit mode is an experimental feature currently under development. API changes may occur. Use at your own risk.\n* To enable audit mode after converge, use command line option `--audit-mode enabled` or set `:audit_mode = :enabled` in your config file.\n* To disable audit mode, use command line option `--audit-mode disabled` or set `:audit_mode = :disabled` in your config file.\n* To only run audit mode, use command line option `--audit-mode audit-only` or set `:audit_mode = :audit_only` in your config file.\nAudit mode is disabled by default.\nStarting Chef Client, version 12.1.0\n[2015-03-04T15:22:38+00:00] WARN: Child with name 'dna.json' found in multiple directories: /tmp/kitchen/dna.json and /tmp/kitchen/dna.json\nresolving cookbooks for run list: [\"sample::default\"]\nSynchronizing Cookbooks:\n  - sample\nCompiling Cookbooks...\nConverging 1 resources\nRecipe: sample::default\n  * apt_package[apache2] action install\n    - install version 2.4.7-1ubuntu4 of package apache2\nStarting audit phase\n\nsample::default\n  port 80\n    should be open\n\nFinished in 0.12418 seconds (files took 0.27734 seconds to load)\n1 example, 0 failures\nAuditing complete\n\nRunning handlers:\nRunning handlers complete\nChef Client finished, 1/1 resources updated in 10.170761888 seconds\n  1/1 Audits succeeded\n  \n```\n\n\u3082\u3057port 80\u304c\u958b\u3044\u3066\u3044\u306a\u3044\u3068\n\n```\nStarting audit phase\n\nsample::default\n  port 80\n    should be open (FAILED - 1)\n\nFailures:\n\n  1) sample::default port 80 should be open\n     Failure/Error: expect(port(80)).not_to be_listening\n       expected Port \"80\" not to be listening\n```\n\n\u306e\u3088\u3046\u306b\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u3002\n\n--audit-mode audit_only\u306b\u3059\u308b\u3068\u3001serverspec\u306e\u307f\u5b9f\u884c\u3057converge\u306f\u884c\u3044\u307e\u305b\u3093\u3002\n--audit-mode\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306fdisabled\uff08converge\u306e\u307f\u884c\u3044\u3001serverspec\u306f\u5b9f\u884c\u3057\u306a\u3044\uff09\u3067\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30aa\u30d7\u30b7\u30e7\u30f3\u4ee5\u5916\u306b\u3082\u3001client.rb\u306b\n\n```ruby\naudit_mode :audit_only\n```\n\n\u306e\u3088\u3046\u306b\u66f8\u3044\u3066\u304a\u304f\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n\u4eca\u56de\u306fport\u306e\u30c1\u30a7\u30c3\u30af\u306e\u307f\u884c\u3044\u307e\u3057\u305f\u304c\u3001serverspec\u306eResource\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u306f\u4f55\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u3067\u3059\u3002\n\n```\n# User\n  control \"vagrant user\" do\n    it \"should be exist\" do\n      expect(user('vagrant')).to be_exist\n    end\n  end\n\n# Command\n  control \"ls command\" do\n    it \"exits with status 0\" do\n      expect(command('ls').exit_status).to be 0\n    end\n  end\n```\n\n# \u4f7f\u3044\u9053\n\n\u3053\u306eAudit Mode\u306b\u3088\u3063\u3066\u3001\u4eca\u307e\u3067\u5225\u3005\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u5225\u3005\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304b\u306a\u304f\u3066\u306f\u3044\u3051\u306a\u304b\u3063\u305frecipe\u3068serverspec\u3092\u3001\u540c\u3058recipe\u3068\u3057\u3066\u66f8\u304f\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u3001recipe\u306e\u30c6\u30b9\u30c8\u304c\u683c\u6bb5\u306b\u66f8\u304d\u3084\u3059\u304f\u306a\u308b\u3068\u601d\u308f\u308c\u307e\u3059\u3002\n\n- recipe\u3068\u5bfe\u5fdc\u3059\u308bserverspec\u3092\u4e00\u3064\u306erecipe\u30d5\u30a1\u30a4\u30eb\u306b\u307e\u3068\u3081\u308b\u3082\u3088\u3057\u3001\n- recipe\u30d5\u30a1\u30a4\u30eb\u3068serverspec\u30d5\u30a1\u30a4\u30eb\u3092\u5bfe\u306b\u3057\u3066\u7ba1\u7406\u3059\u308b\u3082\u3088\u3057\uff08recipes/hogehoge.rb\u3068recipes/hogehoge_test.rb\uff09\n- serverspec\u3092\u66f8\u3044\u305frecipe\u3092include_recipe\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u3082\u3088\u3057\u3001\n- serverspec\u3060\u3051\u66f8\u3044\u305fcookbook\u3092\u4f5c\u308a\u3001cookbook\u9593\u3067serverspec\u3092\u518d\u5229\u7528\u3059\u308b\u306e\u3082\u3088\u3057\u3001\n\n\u8272\u3005\u306a\u4f7f\u3044\u65b9\u304c\u3067\u304d\u305d\u3046\u306a\u6c17\u304c\u3057\u307e\u3059\u3002\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u304c\u697d\u3057\u307f\u3067\u3059\u3002\n\n# \u6ce8\u610f\u70b9\n\n\u4f7f\u3063\u3066\u3044\u3066\u6c17\u3065\u3044\u305f\u6ce8\u610f\u70b9\u3068\u3057\u3066\u3001\n--audit-mode audit_only\u306b\u3057\u3066\u3044\u3066\u3082\u3001\u7d14\u7c8b\u306bserverspec\u306e\u307f\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u304f\u3001\u305d\u306e\u524d\u306bcookbook\u306ecompile phase\u306f\u5b9f\u884c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u306a\u306e\u3067\u3001\u3053\u3053\u3067\u4f55\u304b\u51e6\u7406\u3092\u3084\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u6ce8\u610f\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n\u3053\u306eaudit mode\u306fchef-solo\u3067\u306f\u4f7f\u3048\u307e\u305b\u3093\u3067\u3057\u305f\u3002chef-zero + chef-client local-mode\u3067\u306f\u4f7f\u3048\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n", "tags": ["chef12.1.0", "serverspec"]}