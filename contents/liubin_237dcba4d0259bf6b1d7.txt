{"context": " More than 1 year has passed since last update.\n\nWhat happened?\nThe source code:\n\n$config['protocol'] = 'smtp';\n$config['smtp_host'] = $this->config['smtp_host'];\n$config['smtp_user'] = $this->config['smtp_user'];\n$config['smtp_pass'] = $this->config['smtp_pass'];\n$config['smtp_port'] = $this->config['smtp_port'];\n$config['charset'] = 'utf-8';\n$config['wordwrap'] = TRUE;\n\n$this->_CI->email->initialize($config);\n\n$this->_CI->email->from($from_email, $from_name);\n$this->_CI->email->to($to);\n$this->_CI->email->subject($subject);\n$this->_CI->email->message($body);\n\nreturn $this->_CI->email->send();\n\nSame source code, different SMTP server and user/password, some server/user run out with the \"504 Gateway Time-out\" error:\n\nIt seems the action is depending on the SMTP servers.\n\nHow to fix this error?\nAdd these two lines in your code:\n$config['newline'] = \"\\r\\n\";\n$config['crlf'] = \"\\r\\n\";\n\nThis will make it working.\nreference:\nhttps://ellislab.com/forums/viewthread/88690/\n## What happened?\n\nThe source code:\n\n```php\n\n$config['protocol'] = 'smtp';\n$config['smtp_host'] = $this->config['smtp_host'];\n$config['smtp_user'] = $this->config['smtp_user'];\n$config['smtp_pass'] = $this->config['smtp_pass'];\n$config['smtp_port'] = $this->config['smtp_port'];\n$config['charset'] = 'utf-8';\n$config['wordwrap'] = TRUE;\n\n$this->_CI->email->initialize($config);\n\n$this->_CI->email->from($from_email, $from_name);\n$this->_CI->email->to($to);\n$this->_CI->email->subject($subject);\n$this->_CI->email->message($body);\n\nreturn $this->_CI->email->send();\n```\n\nSame source code, different SMTP server and user/password, some server/user run out with the \"504 Gateway Time-out\" error:\n\n![QQ\u622a\u56fe20140916150506.png](https://qiita-image-store.s3.amazonaws.com/0/2179/aadf45b1-50cc-fc34-034c-799a3a76326e.png)\n\n\nIt seems the action is depending on the SMTP servers.\n\n## How to fix this error?\n\nAdd these two lines in your code:\n\n```php\n$config['newline'] = \"\\r\\n\";\n$config['crlf'] = \"\\r\\n\";\n```\n\nThis will make it working.\n\n***reference:***\n\nhttps://ellislab.com/forums/viewthread/88690/\n", "tags": ["CodeIgniter", "PHP"]}