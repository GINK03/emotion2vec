{"tags": ["AppleWatch", "Swift", "WatchKit", "iOS", "watchOS"], "context": "\n\n\u3010Swift 3\u3011Apple Watch\u3067\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u3057\u3066\u8868\u793a\u3059\u308b\n\n\u306f\u3058\u3081\u306b\n\u5df7\u3067\u306f\u3044\u308d\u3044\u308d\u8a00\u308f\u308c\u3066\u307e\u3059\u304c\uff0c\nApple Watch \u306e\u53ef\u80fd\u6027\u3092\u4fe1\u3058\uff0c\u63a2\u6c42\u3059\u308b\u6d3e\u306e\u8005\u3067\u3059\u3002\n\u7686\u69d8\u306f Apple Watch \u4f7f\u3063\u3066\u307e\u3059\u304b\uff1f\n\u79c1\u306f\u521d\u4ee3\u3068 Series 2 \u3092\u4e21\u624b\u306b\u3064\u3051\u3066\u307e\u3059\u3002\n\u304c\uff0c\u4f55\u304c\u3067\u304d\u308b\u306e\uff1f\n\u3063\u3066\u805e\u304b\u308c\u3066\u7b54\u3048\u306b\u7aae\u3059\u308b\u5834\u9762\u3082\u591a\u3044\u3067\u3059\u3002\n\u81ea\u5206\u3067\u3082\u8272\u3005\u4f5c\u3063\u3066\u307e\u3059\u304c\u4eca\u306f\u3042\u304f\u307e\u3067\u3082\u500b\u4eba\u7528\u3002\n\u3068\u308a\u3042\u3048\u305a Series 2 \u304b\u3089 GPS \u304c\u5185\u8535\u3055\u308c\u305f\u306e\u3067\n\u672c\u5f53\u306b\u5358\u72ec\u3067\u4f4d\u7f6e\u60c5\u5831\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u304b\u3069\u3046\u304b\n\u30b5\u30f3\u30d7\u30eb(\u524d\u4f5c\u3063\u3066\u305f Swift 2 \u7cfb\u306e\u4f7f\u3044\u56de\u3057)\u3067\u3082\u4f5c\u308b\u304b\u30fc\n\u3068\u3044\u3046\u3053\u3068\u3067 Swift 3 \u306e\u52c9\u5f37\u3082\u517c\u306d\u3066\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306b\u5024\u304c\u53d6\u308c\u308b\u306e\u304b\u306f\u8272\u3005\u306a\u3068\u3053\u306b\u884c\u3063\u3066\n\u78ba\u304b\u3081\u3066\u304d\u305f\u306e\u3067\u307e\u305f\u5225\u306e\u8a18\u4e8b\u306b\u66f8\u304d\u307e\u3059\u3002(\u2193\u66f8\u304d\u307e\u3057\u305f)\nApple Watch Series 2 \u5358\u72ec\u3067GPS\u306e\u5024\u304c\u53d6\u308c\u308b\u304b\u78ba\u304b\u3081\u3066\u307f\u305f\n\n\u5b9f\u88c5\n\u4eca\u56de\u306f Swift 3 \u3067\u884c\u3044\u307e\u3057\u305f\u3002\niPhone \u5074\u306f\u5185\u8535 GPS \u3092\u4f7f\u3063\u3066\u7def\u5ea6\u7d4c\u5ea6\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u306e\u3082\u306e\u3002\nApple Watch \u5074\u306f\uff0ciPhone \u307e\u305f\u306f\uff0cSeries 2 \u304b\u3089 Apple Watch \u306b\n\u5185\u8535\u3055\u308c\u305f GPS \u3092\u7528\u3044\u3066\u7def\u5ea6\u7d4c\u5ea6\u3092\u8868\u793a\u3057\uff0c\u305d\u308c\u3060\u3051\u3060\u3068\u5bc2\u3057\u3044\u304b\u3089\n\u30de\u30c3\u30d7\u306b\u9077\u79fb\u3057\u3066\u8a72\u5f53\u30dd\u30a4\u30f3\u30c8\u306b\u30d4\u30f3\u3092\u7acb\u3066\u308b\u5b9f\u88c5\u306b\u306a\u308a\u307e\u3059\u3002\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092 GitHub \u306b push \u3057\u307e\u3057\u305f\u306e\u3067\n\u6c17\u306b\u306a\u308b\u65b9\u306f clone \u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n(38mm \u306e\u65b9\u306f\u624b\u5143\u306b\u306a\u304f\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u306a\u3044\u3067\u3059\u3002\u3059\u307f\u307e\u305b\u3093\u3002)\nGitHub \u30ea\u30f3\u30af\n$ cd \u9069\u5207\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n$ git clone git@github.com:MilanistaDev/GPSCheckerforWatch.git\n\n\niOS \u5074\u306e\u5b9f\u88c5\niOS \u5074\u306f\u8a73\u7d30\u306f\u65b0\u898f\u6027\u3082\u306a\u3044\u306e\u3067\u7701\u7565\u3057\u307e\u3059\u3002\n\u4f4d\u7f6e\u60c5\u5831\u3092\u8a31\u53ef\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u4f7f\u7528\u4e2d\u306e\u307f\u306b\u3057\u307e\u3059\u3002\nInfo.plist \u306b\u8ffd\u52a0\u3002\n\nLocationManager \u306f WatchKit \u5074\u3067\u3082\u4f7f\u3044\u305f\u3044\u306e\u3067\u65b0\u898f\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4e00\u5fdc\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\u7279\u6bb5\u7279\u5225\u306a\u3068\u3053\u308d\u306f\u306a\u3044\u3067\u3059\u3002\nWhen in use \u3068 Always \u3067\u30a2\u30d7\u30ea\u6b21\u7b2c\u3067\u4f7f\u3044\u5206\u3051\u308c\u308b\u3088\u3046\u306b\u306f\u3057\u307e\u3057\u305f\u3002\n\nLocationManager.swift\nimport UIKit\nimport CoreLocation\n\nlet LMLocationUpdateNotification: String = \"LMLocationUpdateNotification\"\nlet LMLocationInfoKey: String = \"LMLocationInfoKey\"\n\nclass LocationManager: NSObject, CLLocationManagerDelegate {\n\n    private var locationManager: CLLocationManager\n    private var currentLocation: CLLocation!\n\n    // Singleton\n    struct Singleton {\n        static let sharedInstance = LocationManager()\n    }\n\n    // MARK:- Initialized\n    override init() {\n\n        locationManager = CLLocationManager()\n        locationManager.desiredAccuracy = kCLLocationAccuracyBest\n        locationManager.distanceFilter = 1000\n        super.init()\n\n        locationManager.delegate = self\n\n        // Check Authorization(iOS8 and Later)\n        // \u4f4d\u7f6e\u60c5\u5831\u8a8d\u8a3c\u72b6\u614b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u307e\u3060\u6c7a\u307e\u3063\u3066\u306a\u3051\u308c\u3070\u30a2\u30e9\u30fc\u30c8\u51fa\u3059\n        let status = CLLocationManager.authorizationStatus()\n        if(status == CLAuthorizationStatus.notDetermined) {\n            // Always\n//            if (self.locationManager.responds(to: #selector(CLLocationManager.requestAlwaysAuthorization))) {\n//                self.locationManager.requestAlwaysAuthorization()\n//            }\n            // When in Use\n            if (self.locationManager.responds(to: #selector(CLLocationManager.requestWhenInUseAuthorization))) {\n                self.locationManager.requestWhenInUseAuthorization()\n            }\n        }\n\n        // if App uses background mode(iOS9 and later)\n        // \u4f4d\u7f6e\u60c5\u5831\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u53d6\u5f97\u3059\u308b\u969b\u306b\u5fc5\u8981\n        // \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306e\u30c8\u30b0\u30eb\u5165\u308c\u308b\n        if #available(iOS 9.0, *) {\n            //locationManager.allowsBackgroundLocationUpdates = true\n        }\n    }\n\n    // MARK: - CLLocationManagerDelegate Method\n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u3092\u958b\u59cb\n       Start updating location data\n     */\n    func startUpdatingLocation()\n    {\n        self.locationManager.startUpdatingLocation()\n    }\n\n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u5931\u6557\u6642\u306b\u547c\u3070\u308c\u308b\n       Call when iOS device failed to get location data.\n     */\n    func locationManager(_ manager: CLLocationManager, didFailWithError error: Error) {\n        // print(\"Error: \\(error.localizedDescription)\")\n        // Implement Alert\n    }\n\n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u6210\u529f\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\n       Call when iOS device succeeded to get location data.\n     */\n    func locationManager(_ manager: CLLocationManager, didUpdateLocations locations:[CLLocation]) {\n\n        let locationData = locations.last as CLLocation!\n        self.currentLocation = locationData\n        let locationDataDic = [LMLocationInfoKey : self.currentLocation]\n\n        // Notice and send location data. | \u901a\u77e5\u3057\u3066\u4f4d\u7f6e\u60c5\u5831\u3092\u9001\u4fe1\n        let center = NotificationCenter.default\n        center.post(name: NSNotification.Name(rawValue: LMLocationUpdateNotification), object: self, userInfo: locationDataDic)\n\n        self.locationManager.stopUpdatingLocation()\n    }\n\n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u306e\u8a8d\u8a3c\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5909\u66f4\u6642\u306b\u547c\u3070\u308c\u308b\n       Call when Authorization status changed.\n     */\n    private func locationManager(manager: CLLocationManager, didChangeAuthorizationStatus status:CLAuthorizationStatus) {\n        if (status == .notDetermined) {\n            // Always\n//            if (self.locationManager.responds(to:#selector(CLLocationManager.requestAlwaysAuthorization))) {\n//                self.locationManager.requestAlwaysAuthorization()\n//            }\n            // When in Use\n            if (self.locationManager.responds(to: #selector(CLLocationManager.requestWhenInUseAuthorization))) {\n                self.locationManager.requestWhenInUseAuthorization()\n            }\n        }\n    }\n}\n\n\n\nWatch \u5074\u306e\u5b9f\u88c5\n\n1. Watch \u7528\u306e Target \u3092\u8ffd\u52a0\nFile -> New->Target\u2026\nwatchOS \u306e WatchKit App \u3092\u9078\u629e\u3057\u3066 Next\u3092\u62bc\u3059\u3002\n\nNotification Scene\uff0cComplication \u306f\u4eca\u56de\u89e6\u308a\u307e\u305b\u3093\u3002\n\u30c1\u30a7\u30c3\u30af\u5165\u308c\u308b\u3068 Interface.storyboard \u306b\u753b\u9762\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\n\u4e00\u5fdc Activate \u3057\u3066\u304a\u304f\u3002\n\nTarget \u3092 Extension \u306e\u65b9\u306b\u3057\u3066 info \u306b\u3053\u3061\u3089\u306b\u3082\nPrivacy - Location When In Use Usage Description \u3092\u8ffd\u52a0\u3002\n\n\u3053\u3053\u3067\u8d77\u52d5\u3057\u3066\u898b\u308b\u3068 iPhone \u5074\u306b\u30a2\u30e9\u30fc\u30c8\u304c\u51fa\u308b\u3002\n\n\n2. Interface.storyboard \u306e\u5b9f\u88c5\nAutoLayout \u3068\u304b\u8003\u3048\u305a\u306b(\u5b9f\u969b\u306f\u4f3c\u305f\u3082\u306e\u304c\u5fc5\u8981)\u30d1\u30ba\u30eb\u307f\u305f\u3044\u306b\u914d\u7f6e\u3002\n\u65b0\u3057\u3044 Interface Controller \u306e\u753b\u9762\u3092\u8ffd\u52a0\u3057\u3066 push \u3067\u7d10\u4ed8\u3051\u308b\u3002\n(\u5730\u56f3\u8868\u793a\u7528\u306b\u3059\u308b)\u3053\u306e\u3068\u304d Segue Identifier \u3092\u3064\u3051\u308b\u3002\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u3092 InterfaceController.swift \u306b\u7d10\u4ed8\u3051\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u306f Extension \u306e\u65b9\u306b\u3042\u308b\u3002\n\u3053\u3053\u3067\u306f\u7def\u5ea6\u7d4c\u5ea6\u8868\u793a\u7528\u306e\u30e9\u30d9\u30eb 2 \u3064\u3092\u7d10\u4ed8\u3051\u307e\u3057\u305f\u3002\n\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u306f latLabel \u3068 lonLabel \u306b\u3057\u307e\u3057\u305f\u3002\n\nFile -> New -> File\u2026 \u3067\nMap \u7528\u306e InterfaceController \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nwatchOS \u306e\u6b04\u304b\u3089\u9078\u3076\u3088\u3046\u306b\u3059\u308b\u3002\n\n\u540d\u524d\u306f MapInterfaceController \u306b\u3057\u307e\u3057\u305f\u3002\n\nMap \u3092\u8ffd\u52a0\u3057\u305f\u753b\u9762\u306b MapView \u3092\u914d\u7f6e\u3057\uff0c\n\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\u3057\u305f MapInterfaceController \u306b\u3059\u308b\u3002\n\nMapView \u3092 MapInterfaceController \u306b\u7d10\u4ed8\u3051\u308b\u3002\n\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u306f mapView \u306b\u3057\u307e\u3057\u305f\u3002\n\n\n3. \u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u8868\u793a\u3059\u308b\nInterfaceController \u3068 MapInterfaceController \u306b\u5b9f\u88c5\u3057\u3066\u3044\u304f\u3002\n\u524d\u8005\u306f\u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u8868\u793a\u3055\u305b\u308b\u3053\u3068\uff0c\u30dc\u30bf\u30f3\u304c\u62bc\u4e0b\u3055\u308c\u305f\u3068\u304d\u306b\n\u7def\u5ea6\u3068\u7d4c\u5ea6\u306e\u6570\u5024\u3092 MapInterfaceController \u306b\u6e21\u3059\u5b9f\u88c5\u3092\u3057\u307e\u3059\u3002\n\u5f8c\u8005\u306f\uff0c\u4f4d\u7f6e\u60c5\u5831\u3092\u53d7\u3051\u53d6\u3063\u3066\uff0c\u5730\u56f3\u306b\u30d4\u30f3\u523a\u3057\u3059\u308b\u5b9f\u88c5\u306b\u306a\u308a\u307e\u3059\u3002\n\u524d\u8005\u306e\u5b9f\u88c5\u306f\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\niOS \u5074\u3068\u540c\u3058 LocationManager.swift \u3092\u4f7f\u3044\uff0c\n\u4f4d\u7f6e\u60c5\u5831\u304c\u66f4\u65b0\u3055\u308c\u305f\u3089\u901a\u77e5\u304c\u304f\u308b\u306e\u3067\uff0c\u901a\u77e5\u3092\u53d7\u3051\u3066\u8868\u793a\u30e1\u30bd\u30c3\u30c9\u304c\uff0c\n\u4f4d\u7f6e\u60c5\u5831\u3092\u629c\u304d\u51fa\u3057\u3066\u30e9\u30d9\u30eb\u306b\u8868\u793a\u3059\u308b\u3002\n\nInterfaceController.swift\nimport WatchKit\nimport Foundation\nimport CoreLocation\n\nclass InterfaceController: WKInterfaceController {\n\n    // MARK:- Property\n\n    @IBOutlet var latLabel: WKInterfaceLabel!\n    @IBOutlet var lonLabel: WKInterfaceLabel!\n    var latValue:Double = 100.0 // Impossible value(-90 to 90)\n    var lonValue:Double = 200.0 // Impossible value(-180 to 180)\n\n    // MARK:- Life Cycle\n\n    override func awake(withContext context: Any?) {\n        super.awake(withContext: context)\n        // Configure interface objects here.\n    }\n\n    override func willActivate() {\n        super.willActivate()\n\n        // Access Location Service\n        LocationManager.Singleton.sharedInstance.startUpdatingLocation()\n\n        // Set NSNotification\n        let center = NotificationCenter.default\n        center.addObserver(self,\n                           selector:#selector(displayData(notification:)),\n                           name:NSNotification.Name(rawValue: LMLocationUpdateNotification),\n                           object:nil)\n    }\n\n    override func didDeactivate() {\n        // This method is called when watch view controller is no longer visible\n        super.didDeactivate()\n    }\n\n    deinit {\n         // \u901a\u77e5\u306e\u89e3\u9664\n        let center = NotificationCenter.default\n        center.removeObserver(self)\n    }\n\n    // MARK:- Private Method\n\n    /**\n     \u53d6\u5f97\u3057\u305f\u4f4d\u7f6e\u60c5\u5831\u304b\u3089\u7def\u5ea6\u7d4c\u5ea6\u3092AppleWatch\u306eLabel\u306b\u8868\u793a\n     Acquired latitude and longitude values are displayed on the Apple Watch's labels.\n     - parameter notification:\u901a\u77e5\n     */\n    func displayData(notification:Notification) {\n        let infoDic: Dictionary = notification.userInfo as Dictionary!\n        let location: CLLocation? = infoDic[LMLocationInfoKey] as? CLLocation\n        let coordinate = location!.coordinate\n\n        self.latValue = coordinate.latitude\n        self.lonValue = coordinate.longitude\n\n        self.latLabel.setText((coordinate.latitude).description)\n        self.lonLabel.setText((coordinate.longitude).description)\n    }\n}\n\n\n\u3053\u3053\u3067 LocationManager \u306e\u8b66\u544a\u304c\u51fa\u307e\u3059\u3002\n\nExtension \u5074\u3067\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3067\u304d\u308b\u72b6\u614b\u3067\u306a\u3044\u305f\u3081\u3067\uff0c\nLocationManager.swift \u306e Target MemberShip \u306b \u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n\n4. \u30dc\u30bf\u30f3\u62bc\u4e0b\u3057\u3066\uff0c\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u3092\u5024\u6e21\u3057\n\u3042\u3068\u306f\uff0c\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3068\u304d\u306b\u5024\u3092\u6e21\u305b\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u3084\u308a\u65b9\u306f\u8907\u6570\u3042\u308a\u307e\u3059\u304c\uff0c\u3053\u3053\u3067\u306f Segue Identifier \u3092\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u306e\u3067\ncontextForSegue \u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u3089\u8fba\u304c\uff0ciOS \u5074\u3068\u30e1\u30bd\u30c3\u30c9\u540d\u304c\u9055\u3046\u306e\u3067\u5c11\u3057\u6238\u60d1\u3046\u3068\u3053\u308d\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u30c1\u30a7\u30c3\u30af\u306e\u4ed5\u65b9\u304c\u826f\u3044\u65b9\u6cd5\u304c\u601d\u3044\u3064\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u3042\u308a\u3048\u306a\u3044\u6570\u5024\u3067\n\u521d\u671f\u5316\u3057\u3066\u305d\u308c\u3067\u30c1\u30a7\u30c3\u30af\u304b\u3051\u3066\u307e\u3059\u3002\u3082\u3063\u3068\u826f\u3044\u65b9\u6cd5\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\u307e\u305f Segue Identifier \u304c\u6b63\u3057\u3044\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u3092\u6e21\u3057\u3066\u3044\u308b\u3002\n\nInterfaceController.swift\n/**\n \u7def\u5ea6\u3068\u7d4c\u5ea6\u3092\u9077\u79fb\u5148\u306e\u30de\u30c3\u30d7\u753b\u9762\u306b\u6e21\u3059\n Pass the latitude and longitude values to the next map screen(VC).\n - parameter segueIdentifier: Segue\u306eIdentifier\u540d\n - returns Any\n */\noverride func contextForSegue(withIdentifier segueIdentifier: String) -> Any? {\n\n    guard self.latValue != 100.0 && self.lonValue != 200.0 else {\n        return nil // \u5024\u304c\u53d6\u308c\u306a\u304b\u3063\u305f\u3068\u304d\n    }\n    guard segueIdentifier == \"displayMapSegue\" else {\n        return nil // \u5165\u3089\u306a\u3044\u8a8d\u8b58\n    }\n    let locationData: [String : Double] = [\"latitude\": self.latValue, \"longitude\" : self.lonValue]\n\n    return locationData\n}\n\n\n\n5. \u53d7\u3051\u53d6\u3063\u305f\u7def\u5ea6\u7d4c\u5ea6\u3092\u4f7f\u3063\u3066 Map \u306b\u30d4\u30f3\u523a\u3057\n\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u3092\u53d7\u3051\u53d6\u3063\u3066 Map \u306b\u30d4\u30f3\u3092\u7acb\u3066\u308b\u3088\u3046\u306b\u3057\u305f\u3002\nMapInterfaceController \u5074\u3067\u306f\u5024\u3092\u53d7\u3051\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u7528\u610f\u3057\u3066\uff0c\ncontext \u304c nil \u3067\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066 nil \u3060\u3063\u305f\u3089\n\u524d\u306e\u753b\u9762\u306b\u623b\u3059\u51e6\u7406\u3092\u66f8\u3044\u305f\u3002MapKit \u306b\u95a2\u3059\u308b\u3053\u3068\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n\nMapInterfaceController.swift\nimport WatchKit\nimport Foundation\n\nclass MapInterfaceController: WKInterfaceController {\n\n    // MARK:- Property\n\n    @IBOutlet var mapView: WKInterfaceMap!\n    var locationData: [String : Double] = [:]\n\n    // MARK:- Life Cycle\n\n    override func awake(withContext context: Any?) {\n        super.awake(withContext: context)\n\n        guard let contextData = context else {\n            // \u53d7\u3051\u53d6\u3063\u305f context \u304c nil \u3060\u3063\u305f\u3089\u524d\u306e\u753b\u9762\u306b\u623b\u3059\n            popToRootController()\n            return\n        }\n        self.locationData = contextData as! [String : Double]\n        let latValue = locationData[\"latitude\"]\n        let lonValue = locationData[\"longitude\"]\n\n        let mapLocation = CLLocationCoordinate2DMake(latValue!, lonValue!)\n        let coordinateSpan = MKCoordinateSpanMake(0.02, 0.02)\n\n        self.mapView.addAnnotation(mapLocation, with: WKInterfaceMapPinColor.red)\n        self.mapView.setRegion(MKCoordinateRegionMake(mapLocation, coordinateSpan))\n    }\n\n    override func willActivate() {\n        // This method is called when watch view controller is about to be visible to user\n        super.willActivate()\n    }\n\n    override func didDeactivate() {\n        // This method is called when watch view controller is no longer visible\n        super.didDeactivate()\n    }\n}\n\n\n\n\u5b9f\u884c\u7d50\u679c\n\u5b9f\u6a5f\u306e\u65b9\u304c\u3044\u3044\u3067\u3059\u304c\uff0c\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3067\u3082\u4f4d\u7f6e\u60c5\u5831\u3092\u4ed8\u52a0\u3059\u308c\u3070\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u66f8\u3044\u3066\u308b\u306e\u306f\u5357\u7802\u753a\u306e\u30b9\u30bf\u30d0\u3067\u3059\u304c\uff0c\n\u4f8b\u3048\u3070\u3053\u3053\u3067\u5b9f\u884c\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u304a\u308f\u308a\u306b\n\u4eca\u56de\u306f\uff0cApple Watch \u3067\u4f4d\u7f6e\u60c5\u5831\u3092\u8868\u793a\u3055\u305b\u3066\uff0c\n\u3064\u3044\u3067\u306b Map \u306b\u30d4\u30f3\u523a\u3057\u3059\u308b\u5b9f\u88c5\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3057\u305f\u3002\n\u6b21\u56de\u306f\u5b9f\u969b\u306b\u3069\u3046\u3044\u3046\u72b6\u614b\u3067\u5024\u304c\u53d6\u308c\u308b\u306e\u304b\u306b\u3064\u3044\u3066\uff0c\n\u305d\u3057\u3066\u8a66\u3057\u306b\u3044\u308d\u3044\u308d\u306a\u3068\u3053\u308d\u306b\u884c\u3063\u3066\u78ba\u8a8d\u3057\u3066\u307f\u305f\u306e\u3067\n\u305d\u306e\u3053\u3068\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u3054\u89a7\u3044\u305f\u3060\u304d\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n\u7def\u5ea6\u7d4c\u5ea6\u306e\u521d\u671f\u5316\u5024\u306f\u4f55\u304c\u9069\u5207\u306a\u306e\u304b\uff0c\u307e\u305f\u3053\u3046\u3057\u305f\u65b9\u304c\u3044\u3044\uff0c\n\u3053\u3053\u306f\u9593\u9055\u3063\u3066\u3044\u308b\u306a\u3069\uff0c\u3054\u6307\u6458\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059\u3002\n\u203b \u30d6\u30ed\u30b0\u7528\u306b\u57f7\u7b46\u3057\u305f\u3082\u306e\u3092 md \u5316\u3057\u305f\u3082\u306e\u3067\u3059\u3002\n# \u3010Swift 3\u3011Apple Watch\u3067\u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u3057\u3066\u8868\u793a\u3059\u308b\n## \u306f\u3058\u3081\u306b\n\u5df7\u3067\u306f\u3044\u308d\u3044\u308d\u8a00\u308f\u308c\u3066\u307e\u3059\u304c\uff0c\nApple Watch \u306e\u53ef\u80fd\u6027\u3092\u4fe1\u3058\uff0c\u63a2\u6c42\u3059\u308b\u6d3e\u306e\u8005\u3067\u3059\u3002\n\u7686\u69d8\u306f Apple Watch \u4f7f\u3063\u3066\u307e\u3059\u304b\uff1f\n\u79c1\u306f\u521d\u4ee3\u3068 Series 2 \u3092\u4e21\u624b\u306b\u3064\u3051\u3066\u307e\u3059\u3002\n\u304c\uff0c\u4f55\u304c\u3067\u304d\u308b\u306e\uff1f\n\u3063\u3066\u805e\u304b\u308c\u3066\u7b54\u3048\u306b\u7aae\u3059\u308b\u5834\u9762\u3082\u591a\u3044\u3067\u3059\u3002\n\u81ea\u5206\u3067\u3082\u8272\u3005\u4f5c\u3063\u3066\u307e\u3059\u304c\u4eca\u306f\u3042\u304f\u307e\u3067\u3082\u500b\u4eba\u7528\u3002\n\n\u3068\u308a\u3042\u3048\u305a Series 2 \u304b\u3089 GPS \u304c\u5185\u8535\u3055\u308c\u305f\u306e\u3067\n\u672c\u5f53\u306b\u5358\u72ec\u3067\u4f4d\u7f6e\u60c5\u5831\u53d6\u308c\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u304b\u3069\u3046\u304b\n\u30b5\u30f3\u30d7\u30eb(\u524d\u4f5c\u3063\u3066\u305f Swift 2 \u7cfb\u306e\u4f7f\u3044\u56de\u3057)\u3067\u3082\u4f5c\u308b\u304b\u30fc\n\u3068\u3044\u3046\u3053\u3068\u3067 Swift 3 \u306e\u52c9\u5f37\u3082\u517c\u306d\u3066\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u5b9f\u969b\u306b\u5024\u304c\u53d6\u308c\u308b\u306e\u304b\u306f\u8272\u3005\u306a\u3068\u3053\u306b\u884c\u3063\u3066\n\u78ba\u304b\u3081\u3066\u304d\u305f\u306e\u3067\u307e\u305f\u5225\u306e\u8a18\u4e8b\u306b\u66f8\u304d\u307e\u3059\u3002(\u2193\u66f8\u304d\u307e\u3057\u305f)\n\n[Apple Watch Series 2 \u5358\u72ec\u3067GPS\u306e\u5024\u304c\u53d6\u308c\u308b\u304b\u78ba\u304b\u3081\u3066\u307f\u305f](http://qiita.com/MilanistaDev/items/19cd223ab9940ab95832)\n\n## \u5b9f\u88c5\n\u4eca\u56de\u306f Swift 3 \u3067\u884c\u3044\u307e\u3057\u305f\u3002\niPhone \u5074\u306f\u5185\u8535 GPS \u3092\u4f7f\u3063\u3066\u7def\u5ea6\u7d4c\u5ea6\u3092\u8868\u793a\u3059\u308b\u3060\u3051\u306e\u3082\u306e\u3002\nApple Watch \u5074\u306f\uff0ciPhone \u307e\u305f\u306f\uff0cSeries 2 \u304b\u3089 Apple Watch \u306b\n\u5185\u8535\u3055\u308c\u305f GPS \u3092\u7528\u3044\u3066\u7def\u5ea6\u7d4c\u5ea6\u3092\u8868\u793a\u3057\uff0c\u305d\u308c\u3060\u3051\u3060\u3068\u5bc2\u3057\u3044\u304b\u3089\n\u30de\u30c3\u30d7\u306b\u9077\u79fb\u3057\u3066\u8a72\u5f53\u30dd\u30a4\u30f3\u30c8\u306b\u30d4\u30f3\u3092\u7acb\u3066\u308b\u5b9f\u88c5\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u3092 GitHub \u306b push \u3057\u307e\u3057\u305f\u306e\u3067\n\u6c17\u306b\u306a\u308b\u65b9\u306f clone \u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n(38mm \u306e\u65b9\u306f\u624b\u5143\u306b\u306a\u304f\u3066\u52d5\u4f5c\u78ba\u8a8d\u3057\u3066\u306a\u3044\u3067\u3059\u3002\u3059\u307f\u307e\u305b\u3093\u3002)\n\n[GitHub \u30ea\u30f3\u30af](https://github.com/MilanistaDev/GPSCheckerforWatch)\n\n```bash\n$ cd \u9069\u5207\u306a\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n$ git clone git@github.com:MilanistaDev/GPSCheckerforWatch.git\n```\n\n### iOS \u5074\u306e\u5b9f\u88c5\niOS \u5074\u306f\u8a73\u7d30\u306f\u65b0\u898f\u6027\u3082\u306a\u3044\u306e\u3067\u7701\u7565\u3057\u307e\u3059\u3002\n\n\u4f4d\u7f6e\u60c5\u5831\u3092\u8a31\u53ef\u3059\u308b\u3088\u3046\u306b\u3057\u307e\u3059\u3002\u4eca\u56de\u306f\u4f7f\u7528\u4e2d\u306e\u307f\u306b\u3057\u307e\u3059\u3002\nInfo.plist \u306b\u8ffd\u52a0\u3002\n\n![iOS_00.png](https://qiita-image-store.s3.amazonaws.com/0/88266/15eacf5a-6ed5-f5b3-339e-5caa202aa03d.png \"iOS_00.png\")\n\n\n```LocationManager``` \u306f WatchKit \u5074\u3067\u3082\u4f7f\u3044\u305f\u3044\u306e\u3067\u65b0\u898f\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3057\u305f\u3002\n\u4e00\u5fdc\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\u7279\u6bb5\u7279\u5225\u306a\u3068\u3053\u308d\u306f\u306a\u3044\u3067\u3059\u3002\n**When in use** \u3068 **Always** \u3067\u30a2\u30d7\u30ea\u6b21\u7b2c\u3067\u4f7f\u3044\u5206\u3051\u308c\u308b\u3088\u3046\u306b\u306f\u3057\u307e\u3057\u305f\u3002\n\n```Swift:LocationManager.swift\nimport UIKit\nimport CoreLocation\n\nlet LMLocationUpdateNotification: String = \"LMLocationUpdateNotification\"\nlet LMLocationInfoKey: String = \"LMLocationInfoKey\"\n\nclass LocationManager: NSObject, CLLocationManagerDelegate {\n\n    private var locationManager: CLLocationManager\n    private var currentLocation: CLLocation!\n    \n    // Singleton\n    struct Singleton {\n        static let sharedInstance = LocationManager()\n    }\n    \n    // MARK:- Initialized\n    override init() {\n        \n        locationManager = CLLocationManager()\n        locationManager.desiredAccuracy = kCLLocationAccuracyBest\n        locationManager.distanceFilter = 1000\n        super.init()\n        \n        locationManager.delegate = self\n\n        // Check Authorization(iOS8 and Later)\n        // \u4f4d\u7f6e\u60c5\u5831\u8a8d\u8a3c\u72b6\u614b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u307e\u3060\u6c7a\u307e\u3063\u3066\u306a\u3051\u308c\u3070\u30a2\u30e9\u30fc\u30c8\u51fa\u3059\n        let status = CLLocationManager.authorizationStatus()\n        if(status == CLAuthorizationStatus.notDetermined) {\n            // Always\n//            if (self.locationManager.responds(to: #selector(CLLocationManager.requestAlwaysAuthorization))) {\n//                self.locationManager.requestAlwaysAuthorization()\n//            }\n            // When in Use\n            if (self.locationManager.responds(to: #selector(CLLocationManager.requestWhenInUseAuthorization))) {\n                self.locationManager.requestWhenInUseAuthorization()\n            }\n        }\n        \n        // if App uses background mode(iOS9 and later)\n        // \u4f4d\u7f6e\u60c5\u5831\u3092\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u53d6\u5f97\u3059\u308b\u969b\u306b\u5fc5\u8981\n        // \u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u306e\u30c8\u30b0\u30eb\u5165\u308c\u308b\n        if #available(iOS 9.0, *) {\n            //locationManager.allowsBackgroundLocationUpdates = true\n        }\n    }\n    \n    // MARK: - CLLocationManagerDelegate Method\n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u3092\u958b\u59cb\n       Start updating location data\n     */\n    func startUpdatingLocation()\n    {\n        self.locationManager.startUpdatingLocation()\n    }\n    \n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u5931\u6557\u6642\u306b\u547c\u3070\u308c\u308b\n       Call when iOS device failed to get location data.\n     */\n    func locationManager(_ manager: CLLocationManager, didFailWithError error: Error) {\n        // print(\"Error: \\(error.localizedDescription)\")\n        // Implement Alert\n    }\n\n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u53d6\u5f97\u6210\u529f\u3057\u305f\u3068\u304d\u306b\u547c\u3070\u308c\u308b\n       Call when iOS device succeeded to get location data.\n     */\n    func locationManager(_ manager: CLLocationManager, didUpdateLocations locations:[CLLocation]) {\n        \n        let locationData = locations.last as CLLocation!\n        self.currentLocation = locationData\n        let locationDataDic = [LMLocationInfoKey : self.currentLocation]\n        \n        // Notice and send location data. | \u901a\u77e5\u3057\u3066\u4f4d\u7f6e\u60c5\u5831\u3092\u9001\u4fe1\n        let center = NotificationCenter.default\n        center.post(name: NSNotification.Name(rawValue: LMLocationUpdateNotification), object: self, userInfo: locationDataDic)\n        \n        self.locationManager.stopUpdatingLocation()\n    }\n    \n    /**\n       \u4f4d\u7f6e\u60c5\u5831\u306e\u8a8d\u8a3c\u30b9\u30c6\u30fc\u30bf\u30b9\u306e\u5909\u66f4\u6642\u306b\u547c\u3070\u308c\u308b\n       Call when Authorization status changed.\n     */\n    private func locationManager(manager: CLLocationManager, didChangeAuthorizationStatus status:CLAuthorizationStatus) {\n        if (status == .notDetermined) {\n            // Always\n//            if (self.locationManager.responds(to:#selector(CLLocationManager.requestAlwaysAuthorization))) {\n//                self.locationManager.requestAlwaysAuthorization()\n//            }\n            // When in Use\n            if (self.locationManager.responds(to: #selector(CLLocationManager.requestWhenInUseAuthorization))) {\n                self.locationManager.requestWhenInUseAuthorization()\n            }\n        }\n    }\n}\n```\n\n\n### Watch \u5074\u306e\u5b9f\u88c5\n#### 1. Watch \u7528\u306e Target \u3092\u8ffd\u52a0\n\n**File -> New->Target\u2026**\nwatchOS \u306e WatchKit App \u3092\u9078\u629e\u3057\u3066 Next\u3092\u62bc\u3059\u3002\n\n![watchOS_00.png](https://qiita-image-store.s3.amazonaws.com/0/88266/f9fe0409-b0bd-5946-33ee-8452b1f00c10.png \"watchOS_00.png\")\n\nNotification Scene\uff0cComplication \u306f\u4eca\u56de\u89e6\u308a\u307e\u305b\u3093\u3002\n\u30c1\u30a7\u30c3\u30af\u5165\u308c\u308b\u3068 ```Interface.storyboard``` \u306b\u753b\u9762\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3059\u3002\n\n![watchOS_01.png](https://qiita-image-store.s3.amazonaws.com/0/88266/3dd88a97-83c1-ccbd-90aa-af374701bd22.png \"watchOS_01.png\")\n\n\n\u4e00\u5fdc Activate \u3057\u3066\u304a\u304f\u3002\n\n![watchOS_02.png](https://qiita-image-store.s3.amazonaws.com/0/88266/e15870d0-2e16-1d5f-6a95-ab7d64aa3ec1.png \"watchOS_02.png\")\n\n\nTarget \u3092 Extension \u306e\u65b9\u306b\u3057\u3066 info \u306b\u3053\u3061\u3089\u306b\u3082\n**Privacy - Location When In Use Usage Description** \u3092\u8ffd\u52a0\u3002\n\n![watchOS_03.png](https://qiita-image-store.s3.amazonaws.com/0/88266/9c65bb3a-49a5-4182-5bdc-713369aa3920.png \"watchOS_03.png\")\n\n\n\u3053\u3053\u3067\u8d77\u52d5\u3057\u3066\u898b\u308b\u3068 iPhone \u5074\u306b\u30a2\u30e9\u30fc\u30c8\u304c\u51fa\u308b\u3002\n\n![watchOS_04.png](https://qiita-image-store.s3.amazonaws.com/0/88266/d10c22a4-d324-656c-9ad0-c5a7aad5bcec.png \"watchOS_04.png\")\n\n\n\n#### 2. Interface.storyboard \u306e\u5b9f\u88c5\nAutoLayout \u3068\u304b\u8003\u3048\u305a\u306b(\u5b9f\u969b\u306f\u4f3c\u305f\u3082\u306e\u304c\u5fc5\u8981)\u30d1\u30ba\u30eb\u307f\u305f\u3044\u306b\u914d\u7f6e\u3002\n\u65b0\u3057\u3044 Interface Controller \u306e\u753b\u9762\u3092\u8ffd\u52a0\u3057\u3066 push \u3067\u7d10\u4ed8\u3051\u308b\u3002\n(\u5730\u56f3\u8868\u793a\u7528\u306b\u3059\u308b)\u3053\u306e\u3068\u304d **Segue Identifier** \u3092\u3064\u3051\u308b\u3002\n\n![watchOS_05.png](https://qiita-image-store.s3.amazonaws.com/0/88266/54c8a2ae-b743-dc4d-eeff-d005e8a7732f.png \"watchOS_05.png\")\n\n\n\u30d7\u30ed\u30d1\u30c6\u30a3\u3092 ```InterfaceController.swift``` \u306b\u7d10\u4ed8\u3051\u308b\u3002\n\u30d5\u30a1\u30a4\u30eb\u306f Extension \u306e\u65b9\u306b\u3042\u308b\u3002\n\u3053\u3053\u3067\u306f\u7def\u5ea6\u7d4c\u5ea6\u8868\u793a\u7528\u306e\u30e9\u30d9\u30eb 2 \u3064\u3092\u7d10\u4ed8\u3051\u307e\u3057\u305f\u3002\n\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u306f ```latLabel``` \u3068 ```lonLabel``` \u306b\u3057\u307e\u3057\u305f\u3002\n\n![watchOS_06.png](https://qiita-image-store.s3.amazonaws.com/0/88266/64b97111-df71-00fb-0105-59de65cae1a5.png \"watchOS_06.png\")\n\n**File -> New -> File\u2026** \u3067\nMap \u7528\u306e InterfaceController \u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\nwatchOS \u306e\u6b04\u304b\u3089\u9078\u3076\u3088\u3046\u306b\u3059\u308b\u3002\n\n![watchOS_07.png](https://qiita-image-store.s3.amazonaws.com/0/88266/b9c0e9c8-c08b-d36d-51d2-b7a3e6ea0561.png \"watchOS_07.png\")\n\n\u540d\u524d\u306f ```MapInterfaceController``` \u306b\u3057\u307e\u3057\u305f\u3002\n\n![watchOS_08.png](https://qiita-image-store.s3.amazonaws.com/0/88266/5a793a9c-99ee-1b82-f35b-1031b3309362.png \"watchOS_08.png\")\n\n\nMap \u3092\u8ffd\u52a0\u3057\u305f\u753b\u9762\u306b MapView \u3092\u914d\u7f6e\u3057\uff0c\n\u30af\u30e9\u30b9\u3092\u8ffd\u52a0\u3057\u305f ```MapInterfaceController``` \u306b\u3059\u308b\u3002\n\n![watchOS_09.png](https://qiita-image-store.s3.amazonaws.com/0/88266/11ab5320-14e8-bda6-aff5-e11c42fb8f8d.png \"watchOS_09.png\")\n\n\nMapView \u3092 ```MapInterfaceController``` \u306b\u7d10\u4ed8\u3051\u308b\u3002\n\u30d7\u30ed\u30d1\u30c6\u30a3\u540d\u306f ```mapView``` \u306b\u3057\u307e\u3057\u305f\u3002\n\n![watchOS_10.png](https://qiita-image-store.s3.amazonaws.com/0/88266/3a4a9611-aad6-d622-cdda-15ab4bd19140.png \"watchOS_10.png\")\n\n\n\n#### 3. \u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u8868\u793a\u3059\u308b\n```InterfaceController``` \u3068 ```MapInterfaceController``` \u306b\u5b9f\u88c5\u3057\u3066\u3044\u304f\u3002\n\u524d\u8005\u306f\u4f4d\u7f6e\u60c5\u5831\u3092\u53d6\u5f97\u3057\u3066\u8868\u793a\u3055\u305b\u308b\u3053\u3068\uff0c\u30dc\u30bf\u30f3\u304c\u62bc\u4e0b\u3055\u308c\u305f\u3068\u304d\u306b\n\u7def\u5ea6\u3068\u7d4c\u5ea6\u306e\u6570\u5024\u3092 ```MapInterfaceController``` \u306b\u6e21\u3059\u5b9f\u88c5\u3092\u3057\u307e\u3059\u3002\n\n\u5f8c\u8005\u306f\uff0c\u4f4d\u7f6e\u60c5\u5831\u3092\u53d7\u3051\u53d6\u3063\u3066\uff0c\u5730\u56f3\u306b\u30d4\u30f3\u523a\u3057\u3059\u308b\u5b9f\u88c5\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u524d\u8005\u306e\u5b9f\u88c5\u306f\u4e0b\u8a18\u306b\u306a\u308a\u307e\u3059\u3002\niOS \u5074\u3068\u540c\u3058 ```LocationManager.swift``` \u3092\u4f7f\u3044\uff0c\n\u4f4d\u7f6e\u60c5\u5831\u304c\u66f4\u65b0\u3055\u308c\u305f\u3089\u901a\u77e5\u304c\u304f\u308b\u306e\u3067\uff0c\u901a\u77e5\u3092\u53d7\u3051\u3066\u8868\u793a\u30e1\u30bd\u30c3\u30c9\u304c\uff0c\n\u4f4d\u7f6e\u60c5\u5831\u3092\u629c\u304d\u51fa\u3057\u3066\u30e9\u30d9\u30eb\u306b\u8868\u793a\u3059\u308b\u3002\n\n```Swift:InterfaceController.swift\nimport WatchKit\nimport Foundation\nimport CoreLocation\n\nclass InterfaceController: WKInterfaceController {\n\n    // MARK:- Property\n\n    @IBOutlet var latLabel: WKInterfaceLabel!\n    @IBOutlet var lonLabel: WKInterfaceLabel!\n    var latValue:Double = 100.0 // Impossible value(-90 to 90)\n    var lonValue:Double = 200.0 // Impossible value(-180 to 180)\n\n    // MARK:- Life Cycle\n\n    override func awake(withContext context: Any?) {\n        super.awake(withContext: context)\n        // Configure interface objects here.\n    }\n    \n    override func willActivate() {\n        super.willActivate()\n\n        // Access Location Service\n        LocationManager.Singleton.sharedInstance.startUpdatingLocation()\n\n        // Set NSNotification\n        let center = NotificationCenter.default\n        center.addObserver(self,\n                           selector:#selector(displayData(notification:)),\n                           name:NSNotification.Name(rawValue: LMLocationUpdateNotification),\n                           object:nil)\n    }\n    \n    override func didDeactivate() {\n        // This method is called when watch view controller is no longer visible\n        super.didDeactivate()\n    }\n\n    deinit {\n    \t // \u901a\u77e5\u306e\u89e3\u9664\n        let center = NotificationCenter.default\n        center.removeObserver(self)\n    }\n\n    // MARK:- Private Method\n\n    /**\n     \u53d6\u5f97\u3057\u305f\u4f4d\u7f6e\u60c5\u5831\u304b\u3089\u7def\u5ea6\u7d4c\u5ea6\u3092AppleWatch\u306eLabel\u306b\u8868\u793a\n     Acquired latitude and longitude values are displayed on the Apple Watch's labels.\n     - parameter notification:\u901a\u77e5\n     */\n    func displayData(notification:Notification) {\n        let infoDic: Dictionary = notification.userInfo as Dictionary!\n        let location: CLLocation? = infoDic[LMLocationInfoKey] as? CLLocation\n        let coordinate = location!.coordinate\n\n        self.latValue = coordinate.latitude\n        self.lonValue = coordinate.longitude\n\n        self.latLabel.setText((coordinate.latitude).description)\n        self.lonLabel.setText((coordinate.longitude).description)\n    }\n}\n```\n\n\u3053\u3053\u3067 LocationManager \u306e\u8b66\u544a\u304c\u51fa\u307e\u3059\u3002\n\n![watchOS_11.png](https://qiita-image-store.s3.amazonaws.com/0/88266/1ab9608c-dbfd-4a64-28d8-260c1037a7a2.png \"watchOS_11.png\")\n\n\nExtension \u5074\u3067\u30d5\u30a1\u30a4\u30eb\u304c\u4f7f\u7528\u3067\u304d\u308b\u72b6\u614b\u3067\u306a\u3044\u305f\u3081\u3067\uff0c\n```LocationManager.swift``` \u306e **Target MemberShip** \u306b \u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n![watchOS_12.png](https://qiita-image-store.s3.amazonaws.com/0/88266/11de6d53-4e6f-68a6-d16b-a92cec5c37a9.png \"watchOS_12.png\")\n\n\n#### 4. \u30dc\u30bf\u30f3\u62bc\u4e0b\u3057\u3066\uff0c\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u3092\u5024\u6e21\u3057\n\n\u3042\u3068\u306f\uff0c\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3068\u304d\u306b\u5024\u3092\u6e21\u305b\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\u3084\u308a\u65b9\u306f\u8907\u6570\u3042\u308a\u307e\u3059\u304c\uff0c\u3053\u3053\u3067\u306f Segue Identifier \u3092\u8a2d\u5b9a\u3057\u307e\u3057\u305f\u306e\u3067\n**contextForSegue** \u3092\u4f7f\u3046\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\u3053\u3053\u3089\u8fba\u304c\uff0ciOS \u5074\u3068\u30e1\u30bd\u30c3\u30c9\u540d\u304c\u9055\u3046\u306e\u3067\u5c11\u3057\u6238\u60d1\u3046\u3068\u3053\u308d\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u30c1\u30a7\u30c3\u30af\u306e\u4ed5\u65b9\u304c\u826f\u3044\u65b9\u6cd5\u304c\u601d\u3044\u3064\u304b\u306a\u304b\u3063\u305f\u306e\u3067\u3042\u308a\u3048\u306a\u3044\u6570\u5024\u3067\n\u521d\u671f\u5316\u3057\u3066\u305d\u308c\u3067\u30c1\u30a7\u30c3\u30af\u304b\u3051\u3066\u307e\u3059\u3002\u3082\u3063\u3068\u826f\u3044\u65b9\u6cd5\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\n\u307e\u305f **Segue Identifier** \u304c\u6b63\u3057\u3044\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3066\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u3092\u6e21\u3057\u3066\u3044\u308b\u3002\n\n```Swift:InterfaceController.swift\n/**\n \u7def\u5ea6\u3068\u7d4c\u5ea6\u3092\u9077\u79fb\u5148\u306e\u30de\u30c3\u30d7\u753b\u9762\u306b\u6e21\u3059\n Pass the latitude and longitude values to the next map screen(VC).\n - parameter segueIdentifier: Segue\u306eIdentifier\u540d\n - returns Any\n */\noverride func contextForSegue(withIdentifier segueIdentifier: String) -> Any? {\n\n    guard self.latValue != 100.0 && self.lonValue != 200.0 else {\n        return nil // \u5024\u304c\u53d6\u308c\u306a\u304b\u3063\u305f\u3068\u304d\n    }\n    guard segueIdentifier == \"displayMapSegue\" else {\n        return nil // \u5165\u3089\u306a\u3044\u8a8d\u8b58\n    }\n    let locationData: [String : Double] = [\"latitude\": self.latValue, \"longitude\" : self.lonValue]\n    \n    return locationData\n}\n```\n\n#### 5. \u53d7\u3051\u53d6\u3063\u305f\u7def\u5ea6\u7d4c\u5ea6\u3092\u4f7f\u3063\u3066 Map \u306b\u30d4\u30f3\u523a\u3057\n\n\u7def\u5ea6\u7d4c\u5ea6\u306e\u5024\u3092\u53d7\u3051\u53d6\u3063\u3066 Map \u306b\u30d4\u30f3\u3092\u7acb\u3066\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n\n```MapInterfaceController``` \u5074\u3067\u306f\u5024\u3092\u53d7\u3051\u308b\u30d7\u30ed\u30d1\u30c6\u30a3\u3092\u7528\u610f\u3057\u3066\uff0c\n**context** \u304c ```nil``` \u3067\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066 nil \u3060\u3063\u305f\u3089\n\u524d\u306e\u753b\u9762\u306b\u623b\u3059\u51e6\u7406\u3092\u66f8\u3044\u305f\u3002MapKit \u306b\u95a2\u3059\u308b\u3053\u3068\u306f\u5272\u611b\u3057\u307e\u3059\u3002\n\n```Swift:MapInterfaceController.swift\nimport WatchKit\nimport Foundation\n\nclass MapInterfaceController: WKInterfaceController {\n\n    // MARK:- Property\n\n    @IBOutlet var mapView: WKInterfaceMap!\n    var locationData: [String : Double] = [:]\n\n    // MARK:- Life Cycle\n\n    override func awake(withContext context: Any?) {\n        super.awake(withContext: context)\n        \n        guard let contextData = context else {\n            // \u53d7\u3051\u53d6\u3063\u305f context \u304c nil \u3060\u3063\u305f\u3089\u524d\u306e\u753b\u9762\u306b\u623b\u3059\n            popToRootController()\n            return\n        }\n        self.locationData = contextData as! [String : Double]\n        let latValue = locationData[\"latitude\"]\n        let lonValue = locationData[\"longitude\"]\n\n        let mapLocation = CLLocationCoordinate2DMake(latValue!, lonValue!)\n        let coordinateSpan = MKCoordinateSpanMake(0.02, 0.02)\n\n        self.mapView.addAnnotation(mapLocation, with: WKInterfaceMapPinColor.red)\n        self.mapView.setRegion(MKCoordinateRegionMake(mapLocation, coordinateSpan))\n    }\n\n    override func willActivate() {\n        // This method is called when watch view controller is about to be visible to user\n        super.willActivate()\n    }\n\n    override func didDeactivate() {\n        // This method is called when watch view controller is no longer visible\n        super.didDeactivate()\n    }\n}\n```\n\n## \u5b9f\u884c\u7d50\u679c\n\u5b9f\u6a5f\u306e\u65b9\u304c\u3044\u3044\u3067\u3059\u304c\uff0c\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3067\u3082\u4f4d\u7f6e\u60c5\u5831\u3092\u4ed8\u52a0\u3059\u308c\u3070\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u66f8\u3044\u3066\u308b\u306e\u306f\u5357\u7802\u753a\u306e\u30b9\u30bf\u30d0\u3067\u3059\u304c\uff0c\n\u4f8b\u3048\u3070\u3053\u3053\u3067\u5b9f\u884c\u3059\u308b\u3068\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n![GPSCheckerforWatch.PNG](https://qiita-image-store.s3.amazonaws.com/0/88266/74846d18-4d0a-9000-713c-59cb2503feff.png \"GPSCheckerforWatch.PNG\")\n\n![GPSCheckerforWatchMap.PNG](https://qiita-image-store.s3.amazonaws.com/0/88266/a89cefd6-4fb2-5f9d-3273-5d89c22eb6e3.png \"GPSCheckerforWatchMap.PNG\")\n\n## \u304a\u308f\u308a\u306b\n\n\u4eca\u56de\u306f\uff0cApple Watch \u3067\u4f4d\u7f6e\u60c5\u5831\u3092\u8868\u793a\u3055\u305b\u3066\uff0c\n\u3064\u3044\u3067\u306b Map \u306b\u30d4\u30f3\u523a\u3057\u3059\u308b\u5b9f\u88c5\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3057\u305f\u3002\n\u6b21\u56de\u306f\u5b9f\u969b\u306b\u3069\u3046\u3044\u3046\u72b6\u614b\u3067\u5024\u304c\u53d6\u308c\u308b\u306e\u304b\u306b\u3064\u3044\u3066\uff0c\n\u305d\u3057\u3066\u8a66\u3057\u306b\u3044\u308d\u3044\u308d\u306a\u3068\u3053\u308d\u306b\u884c\u3063\u3066\u78ba\u8a8d\u3057\u3066\u307f\u305f\u306e\u3067\n\u305d\u306e\u3053\u3068\u306b\u3064\u3044\u3066\u66f8\u304d\u307e\u3059\u3002\n\n\u3053\u3053\u307e\u3067\u3054\u89a7\u3044\u305f\u3060\u304d\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\uff01\n\u7def\u5ea6\u7d4c\u5ea6\u306e\u521d\u671f\u5316\u5024\u306f\u4f55\u304c\u9069\u5207\u306a\u306e\u304b\uff0c\u307e\u305f\u3053\u3046\u3057\u305f\u65b9\u304c\u3044\u3044\uff0c\n\u3053\u3053\u306f\u9593\u9055\u3063\u3066\u3044\u308b\u306a\u3069\uff0c\u3054\u6307\u6458\u304a\u9858\u3044\u3044\u305f\u3057\u307e\u3059\u3002\n\n\u203b <u>\u30d6\u30ed\u30b0\u7528\u306b\u57f7\u7b46\u3057\u305f\u3082\u306e\u3092 md \u5316\u3057\u305f\u3082\u306e\u3067\u3059\u3002</u>\n"}