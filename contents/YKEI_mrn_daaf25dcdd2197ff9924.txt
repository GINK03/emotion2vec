{"context": "\u984c\u540d\u901a\u308a\u5371\u306a\u3044\u3002\n\u3082\u3057\u304b\u3057\u305f\u3089Fastlane\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u307e\u305f\u3069\u3053(Fastlane(deliver?) or Apple?)\u306e\u4e0d\u5177\u5408\u306a\u306e\u304b\u672c\u8a18\u4e8b\u3067\u306f\u8ffd\u8de1\u306f\u3057\u3066\u3044\u306a\u3044\u3002\n\n\u4f55\u304c\u5371\u306a\u3044\u306e\u304b\niTunesConnect\u4e0a\u3067\u3001\u914d\u4fe1\u6e96\u5099\u5b8c\u4e86\u3068\u306a\u3063\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3/\u30d3\u30eb\u30c9\u304c\u3001\u5b9f\u969b\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u3068\u7570\u306a\u308b\u3053\u3068\u304c\u767a\u751f\u3059\u308b\u3002\n\n\u4f55\u6545\u7570\u306a\u308b\u4e8b\u306b\u6c17\u304c\u3064\u3044\u305f\u306e\u304b\n\u5b9f\u88c5/\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u6a5f\u80fd\u304c\u52d5\u4f5c\u3057\u306a\u304b\u3063\u305f\u3053\u3068\u3067\u767a\u899a\u3002\n\u307e\u305f\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30a2\u30d7\u30ea\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u30ed\u30ae\u30f3\u30b0\u3057\u3066\u3044\u308b\u306e\u3060\u304c\u3001\n\u305d\u306e\u30ed\u30b0\u306b\u30a2\u30d7\u30ea\u5074\u304b\u3089\u304a\u304f\u3063\u305f\u30d8\u30c3\u30c0\u30fc\u60c5\u5831\u5185\u306b\u542b\u3081\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3084\u30d3\u30eb\u30c9\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u3002\n\u6700\u7d42\u7684\u306b\u7533\u8acb\u4e2d\u306bFastlane\u3067\u7533\u8acb\u3057\u3066\u3044\u308b\u30a2\u30d7\u30ea\u3092\u5909\u66f4\u3057\u305f\u3082\u306e \u306e\u307f \u3053\u306e\u75c7\u72b6\u304c\u51fa\u3066\u3044\u308b\u3053\u3068\u307e\u3067\u7279\u5b9a\u3067\u304d\u3001\u539f\u56e0\u5224\u660e\u3068\u306a\u3063\u305f\u3002\n\n\u3069\u306e\u69d8\u306a\u74b0\u5883/\u72b6\u6cc1\u3067\u3001\u3069\u306e\u3088\u3046\u306aFastlane\u306elane\u3092\u5b9f\u884c\u3057\u305f\u306e\u304b\n\n\u74b0\u5883\nmacOS Sierra 10.12.1\n\u279c  ~ ruby --version\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]\n\u279c  ~  fastlane --version\nfastlane 1.111.0\n\u279c  ~ gym --version\ngym 1.12.1\n\u279c  ~ deliver --version\ndeliver 1.16.1\n\n\u203b12\u670810\u65e5\u306e\u6642\u70b9\u3067\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u306a\u308b\u3002\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u82e5\u5e72\u7570\u306a\u308b\u53ef\u80fd\u6027\u3042\u308a\u3002\n\n\u30d3\u30eb\u30c9\u7528\u306elane\n\u30a2\u30d7\u30ea\u3092Build(gym)\u3057\u3066iTunesConnect\u306bUpload(deliver)\u3059\u308b\u3060\u3051\u3002\n\nFastfile.rb\n  lane :build do\n            gym(scheme: \"jp.foo.baaa.bbb\", use_legacy_build_api:true)\n            deliver(force: true,\n                skip_screenshots:true,\n                submit_for_review:false,\n                skip_metadata:true,\n                app_identifier:scheme_name)\n  end\n\n\n\nTestFlight\u3068Submit\u7528\u306elane\nApple\u5074\u3067\u306e\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3002\n\u7533\u8acb\u3068TestFlight\u3092\u3084\u3063\u3066\u304f\u308c\u308b\u3002\n\nFastfile.rb\nlane :submit_test do\n\nSpaceship::Tunes.login('account', 'pw')\nSpaceship::Tunes.select_team\n\nbegin\n    app = Spaceship::Tunes::Application.find(\"jp.fooo.baaaa.aaaa\")\n    v = app.edit_version\n    v.release_notes[\"ja\"] = \"Thank you guys\"\n    v.release_on_approval = 'true'\n    builds = v.candidate_builds\n    v.select_build(builds.first)\n    v.save!\n\n    # Testflight\n    begin\n      train = app.build_trains[\"77.1.0\"]\n\n\n      # Access all builds for a given train\n      train.builds.count\n      build = train.builds.last\n\n      # Enable beta testing for a build train\n      # This will put the latest build into beta testing mode\n      # and turning off beta testing for all other build trains\n      train.update_testing_status!(true, 'internal', build)\n      slack(message: \"`#{my_address}` Testflight: #{\"jp.fooo.baaaa.aaaa\"} \", success: true)\n    rescue => ex\n      slack(message: \"(2) `#{my_address}` #{\"jp.fooo.baaaa.aaaa\"} #{ex}\", success: false)\n    end\n\n    # Submit\n    begin\n      submission = app.create_submission\n      submission.export_compliance_uses_encryption = false\n      submission.add_id_info_uses_idfa = false\n      submission.content_rights_contains_third_party_content = false\n      submission.content_rights_has_rights = false\n\n      # Finalize app submission\n      submission.complete!\n      slack(message: \"`#{my_address}`: Submit: #{\"jp.fooo.baaaa.aaaa\"} \", success: true)\n    rescue => ex\n      UI.error(\"(3) Something went wrong: #{ex}\")\n      slack(message: \"(3) `#{my_address}` #{\"jp.fooo.baaaa.aaaa\"} #{ex}\", success: false)\n    end\n\n    rescue => ex\n    UI.error(\"(1) Something went wrong: #{ex}\")\n    slack(message: \"(1) `#{my_address}` #{\"jp.fooo.baaaa.aaaa\"} #{ex}\", success: false)\n    end\n\nend\nend\n\n\n\n\u72b6\u6cc1\n\n2016\u5e7411\u670824\u65e5\u301c25\u65e5\u306b\u7533\u8acb\n2016\u5e7412\u67082\u65e5\u306b\u518d\u5ea6Upload\n2016\u5e7412\u67086\u65e5\u306b\u767a\u899a\n\n\n\u6700\u65b0\u7248\u3067\u306f\u5927\u4e08\u592b\u306a\u306e\u304b\uff1f\n\u4e0d\u660e.\n\u305f\u3060\u3057\u3001Reject\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\nhttps://github.com/fastlane/fastlane/commit/3263ea1e0bdc5fc17de500a5efb8ec26345ac3af\nspaceship 1.111.0~\n\n\u6700\u5f8c\u306b\n\u767a\u899a\u3057\u305f\u3068\u304d\u51b7\u3084\u6c57\u304b\u3044\u305f\u3002\n\u304d\u3061\u3093\u3068Reject\u3055\u305b\u3066\u304b\u3089Upload\u3057\u3066\u3084\u3063\u305f\u307b\u3046\u304c\u5b89\u5168\u3068\u3044\u3046\u3053\u3068\u3092\u5b66\u7fd2\u3057\u305f\u3002\n\u984c\u540d\u901a\u308a\u5371\u306a\u3044\u3002\n\u3082\u3057\u304b\u3057\u305f\u3089Fastlane\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u3066\u3042\u308b\u306e\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u307e\u305f\u3069\u3053(Fastlane(deliver?) or Apple?)\u306e\u4e0d\u5177\u5408\u306a\u306e\u304b\u672c\u8a18\u4e8b\u3067\u306f\u8ffd\u8de1\u306f\u3057\u3066\u3044\u306a\u3044\u3002\n\n\n# \u4f55\u304c\u5371\u306a\u3044\u306e\u304b\n\niTunesConnect\u4e0a\u3067\u3001\u914d\u4fe1\u6e96\u5099\u5b8c\u4e86\u3068\u306a\u3063\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3/\u30d3\u30eb\u30c9\u304c\u3001\u5b9f\u969b\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u3068\u7570\u306a\u308b\u3053\u3068\u304c\u767a\u751f\u3059\u308b\u3002\n\n# \u4f55\u6545\u7570\u306a\u308b\u4e8b\u306b\u6c17\u304c\u3064\u3044\u305f\u306e\u304b\n\n\u5b9f\u88c5/\u30ea\u30ea\u30fc\u30b9\u3057\u305f\u6a5f\u80fd\u304c\u52d5\u4f5c\u3057\u306a\u304b\u3063\u305f\u3053\u3068\u3067\u767a\u899a\u3002\n\u307e\u305f\u3001\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30a2\u30d7\u30ea\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d8\u30c3\u30c0\u30fc\u3092\u30ed\u30ae\u30f3\u30b0\u3057\u3066\u3044\u308b\u306e\u3060\u304c\u3001\n\u305d\u306e\u30ed\u30b0\u306b\u30a2\u30d7\u30ea\u5074\u304b\u3089\u304a\u304f\u3063\u305f\u30d8\u30c3\u30c0\u30fc\u60c5\u5831\u5185\u306b\u542b\u3081\u3066\u3044\u308b\u30d0\u30fc\u30b8\u30e7\u30f3\u3084\u30d3\u30eb\u30c9\u304c\u7570\u306a\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u3002\n\u6700\u7d42\u7684\u306b\u7533\u8acb\u4e2d\u306bFastlane\u3067\u7533\u8acb\u3057\u3066\u3044\u308b\u30a2\u30d7\u30ea\u3092\u5909\u66f4\u3057\u305f\u3082\u306e \u306e\u307f \u3053\u306e\u75c7\u72b6\u304c\u51fa\u3066\u3044\u308b\u3053\u3068\u307e\u3067\u7279\u5b9a\u3067\u304d\u3001\u539f\u56e0\u5224\u660e\u3068\u306a\u3063\u305f\u3002\n\n# \u3069\u306e\u69d8\u306a\u74b0\u5883/\u72b6\u6cc1\u3067\u3001\u3069\u306e\u3088\u3046\u306aFastlane\u306elane\u3092\u5b9f\u884c\u3057\u305f\u306e\u304b\n\n## \u74b0\u5883\n\n`macOS Sierra 10.12.1`\n\n```\n\u279c  ~ ruby --version\nruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]\n\u279c  ~  fastlane --version\nfastlane 1.111.0\n\u279c  ~ gym --version\ngym 1.12.1\n\u279c  ~ deliver --version\ndeliver 1.16.1\n```\n\n\n\u203b12\u670810\u65e5\u306e\u6642\u70b9\u3067\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u306a\u308b\u3002\u306e\u3067\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u82e5\u5e72\u7570\u306a\u308b\u53ef\u80fd\u6027\u3042\u308a\u3002\n\n\n## \u30d3\u30eb\u30c9\u7528\u306elane\n\n\u30a2\u30d7\u30ea\u3092Build(`gym`)\u3057\u3066iTunesConnect\u306bUpload(`deliver`)\u3059\u308b\u3060\u3051\u3002\n\n```Fastfile.rb\n  lane :build do\n\t    \tgym(scheme: \"jp.foo.baaa.bbb\", use_legacy_build_api:true)\n\t    \tdeliver(force: true,\n\t    \t\tskip_screenshots:true,\n\t    \t\tsubmit_for_review:false,\n\t    \t\tskip_metadata:true,\n\t    \t\tapp_identifier:scheme_name)\n  end\n```\n\n## TestFlight\u3068Submit\u7528\u306elane\n\nApple\u5074\u3067\u306e\u51e6\u7406\u304c\u5b8c\u4e86\u3057\u305f\u3089\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3002\n\u7533\u8acb\u3068TestFlight\u3092\u3084\u3063\u3066\u304f\u308c\u308b\u3002\n\n```Fastfile.rb\nlane :submit_test do\n\nSpaceship::Tunes.login('account', 'pw')\nSpaceship::Tunes.select_team\n\nbegin\n\tapp = Spaceship::Tunes::Application.find(\"jp.fooo.baaaa.aaaa\")\n\tv = app.edit_version\n\tv.release_notes[\"ja\"] = \"Thank you guys\"\n\tv.release_on_approval = 'true'\n\tbuilds = v.candidate_builds\n\tv.select_build(builds.first)\n\tv.save!\n\n\t# Testflight\n\tbegin\n\t  train = app.build_trains[\"77.1.0\"]\n\n\n\t  # Access all builds for a given train\n\t  train.builds.count\n\t  build = train.builds.last\n\n\t  # Enable beta testing for a build train\n\t  # This will put the latest build into beta testing mode\n\t  # and turning off beta testing for all other build trains\n\t  train.update_testing_status!(true, 'internal', build)\n\t  slack(message: \"`#{my_address}` Testflight: #{\"jp.fooo.baaaa.aaaa\"} \", success: true)\n\trescue => ex\n\t  slack(message: \"(2) `#{my_address}` #{\"jp.fooo.baaaa.aaaa\"} #{ex}\", success: false)\n\tend\n\n\t# Submit\n\tbegin\n\t  submission = app.create_submission\n\t  submission.export_compliance_uses_encryption = false\n\t  submission.add_id_info_uses_idfa = false\n\t  submission.content_rights_contains_third_party_content = false\n\t  submission.content_rights_has_rights = false\n\n\t  # Finalize app submission\n\t  submission.complete!\n\t  slack(message: \"`#{my_address}`: Submit: #{\"jp.fooo.baaaa.aaaa\"} \", success: true)\n\trescue => ex\n\t  UI.error(\"(3) Something went wrong: #{ex}\")\n\t  slack(message: \"(3) `#{my_address}` #{\"jp.fooo.baaaa.aaaa\"} #{ex}\", success: false)\n\tend\n\n\trescue => ex\n\tUI.error(\"(1) Something went wrong: #{ex}\")\n\tslack(message: \"(1) `#{my_address}` #{\"jp.fooo.baaaa.aaaa\"} #{ex}\", success: false)\n\tend\n\nend\nend\n```\n\n\n## \u72b6\u6cc1\n* 2016\u5e7411\u670824\u65e5\u301c25\u65e5\u306b\u7533\u8acb\n* 2016\u5e7412\u67082\u65e5\u306b\u518d\u5ea6Upload\n* 2016\u5e7412\u67086\u65e5\u306b\u767a\u899a\n\n# \u6700\u65b0\u7248\u3067\u306f\u5927\u4e08\u592b\u306a\u306e\u304b\uff1f\n\n\u4e0d\u660e.\n\u305f\u3060\u3057\u3001Reject\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3002\nhttps://github.com/fastlane/fastlane/commit/3263ea1e0bdc5fc17de500a5efb8ec26345ac3af\nspaceship 1.111.0~\n\n\n# \u6700\u5f8c\u306b\n\n\u767a\u899a\u3057\u305f\u3068\u304d\u51b7\u3084\u6c57\u304b\u3044\u305f\u3002\n\u304d\u3061\u3093\u3068Reject\u3055\u305b\u3066\u304b\u3089Upload\u3057\u3066\u3084\u3063\u305f\u307b\u3046\u304c\u5b89\u5168\u3068\u3044\u3046\u3053\u3068\u3092\u5b66\u7fd2\u3057\u305f\u3002\n\n\n", "tags": ["fastlane", "iOS", "iTunesConnect"]}