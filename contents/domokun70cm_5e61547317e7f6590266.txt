{"context": "\u4e88\u7b97\u7ba1\u7406\u6a5f\u80fd\u304c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u307e\u3057\u305f\u3002\nNew AWS Budgets features include API access, usage-based budgets, and more!\nCLI\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306a\u306e\u3067\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\u3076\u3063\u3061\u3083\u3051\u3001Management Console\u3067\u8a2d\u5b9a\u3057\u305f\u65b9\u304c\u697d\u3067\u3059\u3002\nbudgets\n\n\u4e88\u7b97\u306e\u5b9a\u7fa9\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4e88\u7b97\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\nBUDGET_NAME=\"budget\"\nBUDGET_TYPE=\"COST\"\nAMOUNT=\"100\"\nUNIT=\"USD\"\nINCLUDE_TAX=false\nINCLUDE_SUBSCRIPTION=true\nUSE_BLENDED=true\nTIME_UNIT=\"MONTHLY\"\nTIME_PERIOD_START=$(date -d '2017/1/1 00:00:00' +'%s') && echo ${TIME_PERIOD_START}\nTIME_PERIOD_END=$(date -d '2018/1/1 00:00:00' +'%s') && echo ${TIME_PERIOD_END}\n\nNOTIFICATION_TYPE=\"ACTUAL\"\nCOMPARISON_OPERATOR=\"GREATER_THAN\"\nTHRESHOLD=\"80.0\"\n\nSUBSCRIPTION_TYPE=\"EMAIL\"\nADDRESS=\"user@example.com\"\n\n\n\n\u30b3\u30de\u30f3\u30c9\ncat << EOF > budget.json\n{\n  \"BudgetName\": \"${BUDGET_NAME}\",\n  \"BudgetLimit\": {\n    \"Amount\": \"${AMOUNT}\",\n    \"Unit\": \"${UNIT}\"\n  },\n  \"CostTypes\": {\n    \"IncludeTax\": ${INCLUDE_TAX},\n    \"IncludeSubscription\": ${INCLUDE_SUBSCRIPTION},\n    \"UseBlended\": ${USE_BLENDED}\n  },\n  \"TimeUnit\": \"${TIME_UNIT}\",\n  \"TimePeriod\": {\n    \"Start\": \"${TIME_PERIOD_START}\",\n    \"End\": \"${TIME_PERIOD_END}\"\n  },\n  \"BudgetType\": \"${BUDGET_TYPE}\"\n}\nEOF\n\ncat budget.json\n\n\n\n\u30b3\u30de\u30f3\u30c9\njsonlint -q budget.json\n\n\n\n\u30b3\u30de\u30f3\u30c9\ncat << EOF > notifications-with-subscribers.json\n[\n  {\n    \"Notification\": {\n      \"NotificationType\": \"${NOTIFICATION_TYPE}\",\n      \"ComparisonOperator\": \"${COMPARISON_OPERATOR}\",\n      \"Threshold\": ${THRESHOLD}\n    },\n    \"Subscribers\": [\n      {\n        \"SubscriptionType\": \"${SUBSCRIPTION_TYPE}\",\n        \"Address\": \"${ADDRESS}\"\n      }\n    ]\n  }\n]\nEOF\n\ncat notifications-with-subscribers.json\n\n\n\n\u30b3\u30de\u30f3\u30c9\njsonlint -q notifications-with-subscribers.json\n\n\n\n\u4e88\u7b97\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\nAWS_ID=$(aws sts get-caller-identity \\\n    --query Account \\\n    --output text) \\\n    && echo ${AWS_ID}\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws budgets create-budget \\\n    --account-id ${AWS_ID}\\\n    --budget file://budget.json \\\n    --notifications-with-subscribers file://notifications-with-subscribers.json\n\n\n\n\u4e88\u7b97\u306e\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws budgets describe-budgets \\\n    --account-id ${AWS_ID}\n\n\n\n\u7d50\u679c\n{\n    \"Budgets\": [\n        {\n            \"BudgetType\": \"COST\",\n            \"BudgetLimit\": {\n                \"Amount\": \"100\",\n                \"Unit\": \"USD\"\n            },\n            \"CostTypes\": {\n                \"IncludeTax\": false,\n                \"UseBlended\": true,\n                \"IncludeSubscription\": true\n            },\n            \"BudgetName\": \"budget\",\n            \"CalculatedSpend\": {},\n            \"TimeUnit\": \"MONTHLY\",\n            \"TimePeriod\": {\n                \"Start\": 1483228800.0,\n                \"End\": 1514764800.0\n            }\n        }\n    ]\n}\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws budgets describe-budget \\\n    --account-id ${AWS_ID} \\\n    --budget-name ${BUDGET_NAME}\n\n\n\n\u7d50\u679c\n{\n    \"Budget\": {\n        \"BudgetType\": \"COST\",\n        \"BudgetLimit\": {\n            \"Amount\": \"100\",\n            \"Unit\": \"USD\"\n        },\n        \"CostTypes\": {\n            \"IncludeTax\": false,\n            \"UseBlended\": true,\n            \"IncludeSubscription\": true\n        },\n        \"BudgetName\": \"budget\",\n        \"CalculatedSpend\": {},\n        \"TimeUnit\": \"MONTHLY\",\n        \"TimePeriod\": {\n            \"Start\": 1483228800.0,\n            \"End\": 1514764800.0\n        }\n    }\n}\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws budgets describe-notifications-for-budget \\\n    --account-id ${AWS_ID} \\\n    --budget-name ${BUDGET_NAME} \\\n    --query Notifications[0] \\\n    > notification.json \\\n    && cat notification.json\n\n\n\n\u7d50\u679c\n{\n    \"Threshold\": 80.0,\n    \"ComparisonOperator\": \"GREATER_THAN\",\n    \"NotificationType\": \"ACTUAL\"\n}\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws budgets describe-subscribers-for-notification \\\n    --account-id ${AWS_ID}\\\n    --budget-name ${BUDGET_NAME}\\\n    --notification file://notification.json\n\n\n\n\u7d50\u679c\n{\n    \"Subscribers\": [\n        {\n            \"SubscriptionType\": \"EMAIL\",\n            \"Address\": \"user@example.com\"\n        }\n    ]\n}\n\n\n\u4e88\u7b97\u7ba1\u7406\u6a5f\u80fd\u304c\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3055\u308c\u307e\u3057\u305f\u3002\n\n[New AWS Budgets features include API access, usage-based budgets, and more!](https://aws.amazon.com/about-aws/whats-new/2016/10/new-aws-budgets-features-include-api-access-usage-based-budgets-and-more/)\n\n\nCLI\u3067\u3082\u4f7f\u3048\u308b\u3088\u3046\u306a\u306e\u3067\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u3076\u3063\u3061\u3083\u3051\u3001Management Console\u3067\u8a2d\u5b9a\u3057\u305f\u65b9\u304c\u697d\u3067\u3059\u3002\n\n[budgets](http://docs.aws.amazon.com/cli/latest/reference/budgets/index.html)\n\n\n# \u4e88\u7b97\u306e\u5b9a\u7fa9\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4e88\u7b97\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9\nBUDGET_NAME=\"budget\"\nBUDGET_TYPE=\"COST\"\nAMOUNT=\"100\"\nUNIT=\"USD\"\nINCLUDE_TAX=false\nINCLUDE_SUBSCRIPTION=true\nUSE_BLENDED=true\nTIME_UNIT=\"MONTHLY\"\nTIME_PERIOD_START=$(date -d '2017/1/1 00:00:00' +'%s') && echo ${TIME_PERIOD_START}\nTIME_PERIOD_END=$(date -d '2018/1/1 00:00:00' +'%s') && echo ${TIME_PERIOD_END}\n\nNOTIFICATION_TYPE=\"ACTUAL\"\nCOMPARISON_OPERATOR=\"GREATER_THAN\"\nTHRESHOLD=\"80.0\"\n\nSUBSCRIPTION_TYPE=\"EMAIL\"\nADDRESS=\"user@example.com\"\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\ncat << EOF > budget.json\n{\n  \"BudgetName\": \"${BUDGET_NAME}\",\n  \"BudgetLimit\": {\n    \"Amount\": \"${AMOUNT}\",\n    \"Unit\": \"${UNIT}\"\n  },\n  \"CostTypes\": {\n    \"IncludeTax\": ${INCLUDE_TAX},\n    \"IncludeSubscription\": ${INCLUDE_SUBSCRIPTION},\n    \"UseBlended\": ${USE_BLENDED}\n  },\n  \"TimeUnit\": \"${TIME_UNIT}\",\n  \"TimePeriod\": {\n    \"Start\": \"${TIME_PERIOD_START}\",\n    \"End\": \"${TIME_PERIOD_END}\"\n  },\n  \"BudgetType\": \"${BUDGET_TYPE}\"\n}\nEOF\n\ncat budget.json\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\njsonlint -q budget.json\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\ncat << EOF > notifications-with-subscribers.json\n[\n  {\n    \"Notification\": {\n      \"NotificationType\": \"${NOTIFICATION_TYPE}\",\n      \"ComparisonOperator\": \"${COMPARISON_OPERATOR}\",\n      \"Threshold\": ${THRESHOLD}\n    },\n    \"Subscribers\": [\n      {\n        \"SubscriptionType\": \"${SUBSCRIPTION_TYPE}\",\n        \"Address\": \"${ADDRESS}\"\n      }\n    ]\n  }\n]\nEOF\n\ncat notifications-with-subscribers.json\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\njsonlint -q notifications-with-subscribers.json\n```\n\n\n# \u4e88\u7b97\u306e\u4f5c\u6210\n\n```bash:\u30b3\u30de\u30f3\u30c9\nAWS_ID=$(aws sts get-caller-identity \\\n    --query Account \\\n    --output text) \\\n    && echo ${AWS_ID}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\naws budgets create-budget \\\n    --account-id ${AWS_ID}\\\n    --budget file://budget.json \\\n    --notifications-with-subscribers file://notifications-with-subscribers.json\n```\n\n\n# \u4e88\u7b97\u306e\u78ba\u8a8d\n\n```bash:\u30b3\u30de\u30f3\u30c9\naws budgets describe-budgets \\\n    --account-id ${AWS_ID}\n```\n\n```json:\u7d50\u679c\n{\n    \"Budgets\": [\n        {\n            \"BudgetType\": \"COST\",\n            \"BudgetLimit\": {\n                \"Amount\": \"100\",\n                \"Unit\": \"USD\"\n            },\n            \"CostTypes\": {\n                \"IncludeTax\": false,\n                \"UseBlended\": true,\n                \"IncludeSubscription\": true\n            },\n            \"BudgetName\": \"budget\",\n            \"CalculatedSpend\": {},\n            \"TimeUnit\": \"MONTHLY\",\n            \"TimePeriod\": {\n                \"Start\": 1483228800.0,\n                \"End\": 1514764800.0\n            }\n        }\n    ]\n}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\naws budgets describe-budget \\\n    --account-id ${AWS_ID} \\\n    --budget-name ${BUDGET_NAME}\n```\n\n```json:\u7d50\u679c\n{\n    \"Budget\": {\n        \"BudgetType\": \"COST\",\n        \"BudgetLimit\": {\n            \"Amount\": \"100\",\n            \"Unit\": \"USD\"\n        },\n        \"CostTypes\": {\n            \"IncludeTax\": false,\n            \"UseBlended\": true,\n            \"IncludeSubscription\": true\n        },\n        \"BudgetName\": \"budget\",\n        \"CalculatedSpend\": {},\n        \"TimeUnit\": \"MONTHLY\",\n        \"TimePeriod\": {\n            \"Start\": 1483228800.0,\n            \"End\": 1514764800.0\n        }\n    }\n}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\naws budgets describe-notifications-for-budget \\\n    --account-id ${AWS_ID} \\\n    --budget-name ${BUDGET_NAME} \\\n    --query Notifications[0] \\\n    > notification.json \\\n    && cat notification.json\n```\n\n```json:\u7d50\u679c\n{\n    \"Threshold\": 80.0,\n    \"ComparisonOperator\": \"GREATER_THAN\",\n    \"NotificationType\": \"ACTUAL\"\n}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9\naws budgets describe-subscribers-for-notification \\\n    --account-id ${AWS_ID}\\\n    --budget-name ${BUDGET_NAME}\\\n    --notification file://notification.json\n```\n\n```json:\u7d50\u679c\n{\n    \"Subscribers\": [\n        {\n            \"SubscriptionType\": \"EMAIL\",\n            \"Address\": \"user@example.com\"\n        }\n    ]\n}\n```\n", "tags": ["AWS", "aws-cli"]}