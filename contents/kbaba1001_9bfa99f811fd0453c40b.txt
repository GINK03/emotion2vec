{"context": " More than 1 year has passed since last update.\u3068\u308a\u3042\u3048\u305a\u8a66\u3057\u306b\u5c0e\u5165\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306e Vagrant \u4e0a\u306e Ubuntu \u3067\ndrone \u3092\u52d5\u304b\u3057\u3066 github \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\n\ndrone \u3068\u306f\nhttps://github.com/drone/drone \u3053\u308c\u3002\ndrone \u306f Go \u3067\u66f8\u304b\u308c\u305f CI \u3002\u30d3\u30eb\u30c9\u306f Docker \u306e\u4e2d\u3067\u5b9f\u884c\u3059\u308b\u3002\n\u30af\u30e9\u30a6\u30c9\u7248\u306e https://drone.io/ \u3082\u3042\u308b\u3051\u3069\u3001 OSS \u7248\u306f\u304b\u306a\u308a UI \u304c\u9055\u3046\u3002\n\nVagrant \u3067 Ubuntu \u3092\u7528\u610f\u3002\nvagrant init ubuntu/trusty64\n\n\u3053\u308c\u3067 Vagrantfile \u304c\u4f5c\u3089\u308c\u308b\u306e\u3067\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n(\u30b3\u30e1\u30f3\u30c8\u90e8\u5206\u306f\u7701\u7565)\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n  config.vm.network \"forwarded_port\", guest: 80, host: 8080\n  config.ssh.forward_agent = true\nend\n\n\u8d77\u52d5\u3057\u3066\u3001ssh \u3067\u5165\u308b\u3002\nvagrant up\nvagrant ssh\n\n\ndrone \u306e\u8d77\u52d5\nvagrant \u4e0a\u3067\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\nsudo apt-get update\nsudo apt-get upgrade\nsudo apt-get install libsqlite3-dev docker.io\nwget downloads.drone.io/master/drone.deb\nsudo dpkg --install drone.deb\nsudo start drone\n\n\u3053\u308c\u3060\u3051\u3067 drone \u304c\u52d5\u304b\u305b\u308b\u306e\u3067\u3001\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306e\u30d6\u30e9\u30a6\u30b6\u3067\u6b21\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\nhttp://localhost:8080\n\ndrone \u306e\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\n\n\nngrok \u3067 web hook \u3092 local \u3067\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u3059\u308b\ndrone \u306f github \u7b49\u304b\u3089\u306e web hook \u3092\u53d7\u3051\u53d6\u3063\u3066\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u3001\nlocalhost \u3067\u3082 web hook \u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nhttps://ngrok.com/ \u3092\u4f7f\u3046\u3068\u4e00\u6642\u7684\u306b localhost \u306b\u5916\u90e8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3053\u308c\u3092\u4f7f\u3046\u3002\nngrok \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\nngrok -hostname=\"kbaba1001drone.ngrok.com\" 8080\n\nngrok \u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u7121\u3057\u3060\u3068\u9069\u5f53\u306b hostname \u3092\u8a2d\u5b9a\u3059\u308b\u304c\u3001\u5f8c\u3005\u306e\u305f\u3081\u306b\u56fa\u5b9a\u3057\u305f\u3044\u306e\u3067\u6307\u5b9a\u3059\u308b\u3002\n\u3053\u308c\u306b\u3088\u308a http://kbaba1001drone.ngrok.com \u3067 localhost:8080 \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\ngithub \u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\ndrone \u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u6700\u4f4e\u9650\u306e\u8a2d\u5b9a\u3068\u3057\u3066\u3001 github \u3084 BitBucket \u306a\u3069\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u306b\n\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u8a2d\u5b9a\u304c\u5fc5\u8981\u3068\u306a\u308b\u3002\n\u4eca\u56de\u306f github \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u306e\u3067\u3001 https://github.com/settings/applications/new \u3067\n\u6b21\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n\nApplication name: localhost drone\n\nHomepage URL: http://kbaba1001drone.ngrok.com\n\n\nAuthorization callback URL: http://kbaba1001drone.ngrok.com/api/auth/github.com\n\n\n\u767b\u9332\u3059\u308b\u3068 Client ID \u3068 Client Secret \u304c\u767a\u884c\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3092 drone \u306b\u8a2d\u5b9a\u3059\u308b\u3002\ndrone \u306e\u8a2d\u5b9a\u306f /etc/drone/drone.toml \u306b\u66f8\u304f\u3002\n/etc/drone/drone.toml \u306e [github] \u306e\u9805\u76ee\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u5148\u307b\u3069\u306e Client ID \u3068 Client Secret \u3092\u66f8\u304f\u3002\n- [github]\n- client=\"\"\n- secret=\"\"\n+ [github]\n+ client=\"xxxxxxxxxxxxxx\"\n+ secret=\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n# orgs=[]\n# open=false\n\n\u8a2d\u5b9a\u304c\u7d42\u308f\u3063\u305f\u3089 drone \u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\nsudo restart drone\n\n\u3053\u308c\u3067 github \u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308c\u3070\u6210\u529f\u3002\n\n\ndocker \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\ndrone \u306f\u30d3\u30eb\u30c9\u3092\u3059\u3079\u3066 docker \u4e0a\u3067\u884c\u3046\u3002\n\u30d3\u30eb\u30c9\u3092\u884c\u3046\u305f\u3081\u306e\u57fa\u790e\u3068\u306a\u308b image \u304c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u305d\u308c\u3092\u3044\u308c\u308b\u3002\nsudo docker pull bradrydzewski/ubuntu\nsudo docker pull bradrydzewski/base\n\n\u3042\u3068\u306f\u30d3\u30eb\u30c9\u3059\u308b\u8a00\u8a9e\u5225\u306e docker \u304c\u5fc5\u8981\u3068\u306a\u308b\u306e\u3067\u4e0b\u8a18\u3092\u53c2\u8003\u306b\u3057\u3066\u6df9\u308c\u308b\u3002\n\nhttps://github.com/drone/drone/blob/v0.2.1/README.md#images\nhttps://github.com/drone/images#builders\n\n\u524d\u8005\u306f image \u304c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u304c\u5f8c\u8005\u306f\u81ea\u5206\u3067 Dockerfile \u304b\u3089 build \u3059\u308b\u3002\n\u4f8b\u3048\u3070 Ruby 2.0.0 \u3067\u30d3\u30eb\u30c9\u3057\u305f\u3044\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3002\nsudo docker pull bradrydzewski/ruby:2.0.0\n\n\n.drone.yml \u306e\u7528\u610f\n\u30d3\u30eb\u30c9\u3057\u305f\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b .drone.yml \u3092\u7528\u610f\u3057\u3066\u30d3\u30eb\u30c9\u306e\u8a2d\u5b9a\u3092\u66f8\u304f\u3002\n\u4f8b\u3048\u3070 postgresql \u3092\u4f7f\u3063\u3066\u3044\u308b rails \u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u3059\u308b\u3002\nimage: ruby2.0.0\nservices:\n  - postgres\nenv:\n  - SECRET_KEY_BASE=xxxxxxxxxxxx\nscript:\n  - mkdir -p /tmp/bundle\n  - sudo chown -R ubuntu:ubuntu /tmp/bundle\n  - gem update bundler\n  - bundle install -j8 --path /tmp/bundle\n  - cp config/database_drone.yml.example config/database.yml\n  - bundle exec rake db:create db:migrate spec\ncache:\n  - /tmp/bundle\n\n\ndrone \u306b\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u767b\u9332\u3059\u308b\ndrone \u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u691c\u7d22\u3057\u3066 activate \u3059\u308b\u3068 github \u306b web hook \u304c\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n\u3053\u306e\u72b6\u614b\u3067\u30b3\u30df\u30c3\u30c8\u3092 push \u3057\u305f\u308a Pull Request \u3092\u4f5c\u308b\u3068 drone \u3067\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u3002\n\u521d\u56de\u306e\u30d3\u30eb\u30c9\u306f postgres \u306a\u3069 docker image \u3092\u53d6\u5f97\u3059\u308b\u306e\u3067\u6642\u9593\u304c\u304b\u304b\u308b\u3002\n\u6c17\u9577\u306b\u5f85\u3063\u3066\u5931\u6557\u304b\u6210\u529f\u3092\u3059\u308c\u3070ok\n\n\n\u307e\u3068\u3081\ngithub \u3084 ruby \u5411\u3051\u306e\u8a2d\u5b9a\u3092\u53d6\u308a\u9664\u3044\u305f Vagrantfile \u3002\n# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.network \"forwarded_port\", guest: 80, host: 8080\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n  config.ssh.forward_agent = true\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.memory = 2048\n    vb.cpus = 2\n  end\n\n  config.vm.provision :shell, inline: <<-SHELL\napt-get update\napt-get -y upgrade\napt-get install -y libsqlite3-dev docker.io\nwget downloads.drone.io/master/drone.deb\ndpkg --install drone.deb\nrm drone.deb\ndocker pull bradrydzewski/ubuntu\ndocker pull bradrydzewski/base\n  SHELL\nend\n\n\u3068\u308a\u3042\u3048\u305a\u8a66\u3057\u306b\u5c0e\u5165\u3057\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u306e Vagrant \u4e0a\u306e Ubuntu \u3067\ndrone \u3092\u52d5\u304b\u3057\u3066 github \u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3002\n\n## drone \u3068\u306f\n\nhttps://github.com/drone/drone \u3053\u308c\u3002\n\ndrone \u306f Go \u3067\u66f8\u304b\u308c\u305f CI \u3002\u30d3\u30eb\u30c9\u306f Docker \u306e\u4e2d\u3067\u5b9f\u884c\u3059\u308b\u3002\n\u30af\u30e9\u30a6\u30c9\u7248\u306e https://drone.io/ \u3082\u3042\u308b\u3051\u3069\u3001 OSS \u7248\u306f\u304b\u306a\u308a UI \u304c\u9055\u3046\u3002\n\n## Vagrant \u3067 Ubuntu \u3092\u7528\u610f\u3002\n\n```bash\nvagrant init ubuntu/trusty64\n```\n\n\u3053\u308c\u3067 `Vagrantfile` \u304c\u4f5c\u3089\u308c\u308b\u306e\u3067\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n(\u30b3\u30e1\u30f3\u30c8\u90e8\u5206\u306f\u7701\u7565)\n\n```bash\nVAGRANTFILE_API_VERSION = \"2\"\n\nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n  config.vm.network \"forwarded_port\", guest: 80, host: 8080\n  config.ssh.forward_agent = true\nend\n```\n\n\u8d77\u52d5\u3057\u3066\u3001ssh \u3067\u5165\u308b\u3002\n\n```bash\nvagrant up\nvagrant ssh\n```\n\n## drone \u306e\u8d77\u52d5\n\nvagrant \u4e0a\u3067\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```\nsudo apt-get update\nsudo apt-get upgrade\nsudo apt-get install libsqlite3-dev docker.io\nwget downloads.drone.io/master/drone.deb\nsudo dpkg --install drone.deb\nsudo start drone\n```\n\n\u3053\u308c\u3060\u3051\u3067 drone \u304c\u52d5\u304b\u305b\u308b\u306e\u3067\u3001\u30db\u30b9\u30c8\u30de\u30b7\u30f3\u306e\u30d6\u30e9\u30a6\u30b6\u3067\u6b21\u306eURL\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3002\n\n```\nhttp://localhost:8080\n```\n\ndrone \u306e\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\n\n![top01.png](https://qiita-image-store.s3.amazonaws.com/0/8985/0d2155bf-6e20-a168-d4cc-21f110f381bb.png)\n\n\n## ngrok \u3067 web hook \u3092 local \u3067\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u3059\u308b\n\ndrone \u306f github \u7b49\u304b\u3089\u306e web hook \u3092\u53d7\u3051\u53d6\u3063\u3066\u30d3\u30eb\u30c9\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u3001\nlocalhost \u3067\u3082 web hook \u3092\u53d7\u3051\u53d6\u308c\u308b\u3088\u3046\u306b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nhttps://ngrok.com/ \u3092\u4f7f\u3046\u3068\u4e00\u6642\u7684\u306b localhost \u306b\u5916\u90e8\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3053\u308c\u3092\u4f7f\u3046\u3002\n\nngrok \u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```bash\nngrok -hostname=\"kbaba1001drone.ngrok.com\" 8080\n```\n\n`ngrok` \u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u7121\u3057\u3060\u3068\u9069\u5f53\u306b `hostname` \u3092\u8a2d\u5b9a\u3059\u308b\u304c\u3001\u5f8c\u3005\u306e\u305f\u3081\u306b\u56fa\u5b9a\u3057\u305f\u3044\u306e\u3067\u6307\u5b9a\u3059\u308b\u3002\n\u3053\u308c\u306b\u3088\u308a `http://kbaba1001drone.ngrok.com` \u3067 `localhost:8080` \u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n## github \u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\ndrone \u3092\u52d5\u304b\u3059\u305f\u3081\u306e\u6700\u4f4e\u9650\u306e\u8a2d\u5b9a\u3068\u3057\u3066\u3001 github \u3084 BitBucket \u306a\u3069\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u30b5\u30fc\u30d3\u30b9\u306b\n\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u8a2d\u5b9a\u304c\u5fc5\u8981\u3068\u306a\u308b\u3002\n\n\u4eca\u56de\u306f github \u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u306e\u3067\u3001 https://github.com/settings/applications/new \u3067\n\u6b21\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n- **Application name:** localhost drone\n- **Homepage URL:** http://kbaba1001drone.ngrok.com\n- **Authorization callback URL:** http://kbaba1001drone.ngrok.com/api/auth/github.com\n\n\u767b\u9332\u3059\u308b\u3068 `Client ID` \u3068 `Client Secret` \u304c\u767a\u884c\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3092 drone \u306b\u8a2d\u5b9a\u3059\u308b\u3002\ndrone \u306e\u8a2d\u5b9a\u306f `/etc/drone/drone.toml` \u306b\u66f8\u304f\u3002\n\n`/etc/drone/drone.toml` \u306e `[github]` \u306e\u9805\u76ee\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u3066\u5148\u307b\u3069\u306e `Client ID` \u3068 `Client Secret` \u3092\u66f8\u304f\u3002\n\n```diff\n- [github]\n- client=\"\"\n- secret=\"\"\n+ [github]\n+ client=\"xxxxxxxxxxxxxx\"\n+ secret=\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\"\n# orgs=[]\n# open=false\n```\n\n\u8a2d\u5b9a\u304c\u7d42\u308f\u3063\u305f\u3089 drone \u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n```bash\nsudo restart drone\n```\n\n\u3053\u308c\u3067 github \u306b\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308c\u3070\u6210\u529f\u3002\n\n![github_login.png](https://qiita-image-store.s3.amazonaws.com/0/8985/d6f9c1d8-ae6d-0a72-178a-b82acc4a5cc8.png)\n\n## docker \u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\ndrone \u306f\u30d3\u30eb\u30c9\u3092\u3059\u3079\u3066 docker \u4e0a\u3067\u884c\u3046\u3002\n\u30d3\u30eb\u30c9\u3092\u884c\u3046\u305f\u3081\u306e\u57fa\u790e\u3068\u306a\u308b image \u304c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u305d\u308c\u3092\u3044\u308c\u308b\u3002\n\n```bash\nsudo docker pull bradrydzewski/ubuntu\nsudo docker pull bradrydzewski/base\n```\n\n\u3042\u3068\u306f\u30d3\u30eb\u30c9\u3059\u308b\u8a00\u8a9e\u5225\u306e docker \u304c\u5fc5\u8981\u3068\u306a\u308b\u306e\u3067\u4e0b\u8a18\u3092\u53c2\u8003\u306b\u3057\u3066\u6df9\u308c\u308b\u3002\n\n- https://github.com/drone/drone/blob/v0.2.1/README.md#images\n- https://github.com/drone/images#builders\n\n\u524d\u8005\u306f image \u304c\u914d\u5e03\u3055\u308c\u3066\u3044\u308b\u304c\u5f8c\u8005\u306f\u81ea\u5206\u3067 Dockerfile \u304b\u3089 build \u3059\u308b\u3002\n\n\u4f8b\u3048\u3070 Ruby 2.0.0 \u3067\u30d3\u30eb\u30c9\u3057\u305f\u3044\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306b\u3059\u308b\u3002\n\n```bash\nsudo docker pull bradrydzewski/ruby:2.0.0\n```\n\n## `.drone.yml` \u306e\u7528\u610f\n\n\u30d3\u30eb\u30c9\u3057\u305f\u3044\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b `.drone.yml` \u3092\u7528\u610f\u3057\u3066\u30d3\u30eb\u30c9\u306e\u8a2d\u5b9a\u3092\u66f8\u304f\u3002\n\n\u4f8b\u3048\u3070 postgresql \u3092\u4f7f\u3063\u3066\u3044\u308b rails \u30a2\u30d7\u30ea\u3092\u30d3\u30eb\u30c9\u3059\u308b\u5834\u5408\u3001\u6b21\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u3059\u308b\u3002\n\n```yaml\nimage: ruby2.0.0\nservices:\n  - postgres\nenv:\n  - SECRET_KEY_BASE=xxxxxxxxxxxx\nscript:\n  - mkdir -p /tmp/bundle\n  - sudo chown -R ubuntu:ubuntu /tmp/bundle\n  - gem update bundler\n  - bundle install -j8 --path /tmp/bundle\n  - cp config/database_drone.yml.example config/database.yml\n  - bundle exec rake db:create db:migrate spec\ncache:\n  - /tmp/bundle\n```\n\n## drone \u306b\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u767b\u9332\u3059\u308b\n\ndrone \u3067\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u691c\u7d22\u3057\u3066 activate \u3059\u308b\u3068 github \u306b web hook \u304c\u81ea\u52d5\u7684\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n\u3053\u306e\u72b6\u614b\u3067\u30b3\u30df\u30c3\u30c8\u3092 push \u3057\u305f\u308a Pull Request \u3092\u4f5c\u308b\u3068 drone \u3067\u30d3\u30eb\u30c9\u304c\u8d70\u308b\u3002\n\n\u521d\u56de\u306e\u30d3\u30eb\u30c9\u306f postgres \u306a\u3069 docker image \u3092\u53d6\u5f97\u3059\u308b\u306e\u3067\u6642\u9593\u304c\u304b\u304b\u308b\u3002\n\n\u6c17\u9577\u306b\u5f85\u3063\u3066\u5931\u6557\u304b\u6210\u529f\u3092\u3059\u308c\u3070ok\n\n![build_success.png](https://qiita-image-store.s3.amazonaws.com/0/8985/54760141-53e9-60f2-3dc9-32c33ad3be2f.png)\n\n## \u307e\u3068\u3081\n\ngithub \u3084 ruby \u5411\u3051\u306e\u8a2d\u5b9a\u3092\u53d6\u308a\u9664\u3044\u305f Vagrantfile \u3002\n\n```rb\n# Vagrantfile API/syntax version. Don't touch unless you know what you're doing!\nVAGRANTFILE_API_VERSION = \"2\"\n \nVagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.network \"forwarded_port\", guest: 80, host: 8080\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\n  config.ssh.forward_agent = true\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.memory = 2048\n    vb.cpus = 2\n  end\n \n  config.vm.provision :shell, inline: <<-SHELL\napt-get update\napt-get -y upgrade\napt-get install -y libsqlite3-dev docker.io\nwget downloads.drone.io/master/drone.deb\ndpkg --install drone.deb\nrm drone.deb\ndocker pull bradrydzewski/ubuntu\ndocker pull bradrydzewski/base\n  SHELL\nend\n```\n", "tags": ["drone.io", "drone"]}