{"context": " More than 1 year has passed since last update.\u3044\u304f\u3089\u306a\u3093\u3067\u3082MacBook\u3067\u306f\u91cd\u3059\u304e\u308b\u306e\u3067Google Compute Engine\u306b\u7f6e\u304f\u3053\u3068\u306b\u3057\u305f\u3002\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\u3002 \n\nhttp://qiita.com/eielh/items/428e24022955b0be8616\n\n\n\u4e8b\u524d\u6e96\u5099\n\ngcloud \u306e\u6700\u65b0\u7248\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\npip install gcloud\n\n\ngcloud \u306b\u30ed\u30b0\u30a4\u30f3\ngcloud auth login\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u30d6\u30e9\u30a6\u30b6\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u3055\u305b\u3089\u308c\u308b\u3002\n\nGoogle Compute Engine \u3067 Nginx\u30b3\u30f3\u30c6\u30ca\u3092\u52d5\u304b\u3057\u3066\u307f\u308b\n\ndocker-machine \u3092\u4f5c\u6210\u3059\u308b\n\u4f5c\u696d\u7528\u306a\u3089\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d7\u30eb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3060\u3044\u3076\u5b89\u304f\u306a\u308b\u306e\u3068\u3001\u9593\u9055\u3063\u3066\u653e\u7f6e\u3057\u3066\u308224\u6642\u9593\u3067\u6d88\u3048\u3066\u304f\u308c\u308b\u306e\u3067 --google-preemptible \u306f\u6307\u5b9a\u3059\u308b\u3079\u304d\u3002\u3042\u3068\u30bf\u30b0\u3068\u3057\u3066 http-server \u3068 https-server \u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3068\u300180\u3068443\u304c\u7a7a\u304f\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002(\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u306f\u6c17\u3092\u3064\u3051\u3066)\n$ docker-machine create -d google \\\n                        --google-project <PROJECT_NAME> \\\n                        --google-preemptible \\\n                        --google-tags 'http-server,https-server' \\\n                        --google-zone asia-east1-a \\\n                        --google-machine-type \"g1-small\" \\\n                        newton\n\n\u3067\u3051\u305f\u3002\n$ docker-machine ls\nNAME      ACTIVE   DRIVER       STATE     URL                          SWARM\ndefault   -        virtualbox   Running   tcp://192.168.99.100:2376\nnewton    -        google       Running   tcp://XXX.XXX.XXX.XXX:2376\n\ndocker-machine \u3092\u5207\u308a\u66ff\u3048\u308b\u3002\n$ eval $(docker-machine env newton)\n\n$ docker info\nContainers: 1\nImages: 12\nServer Version: 1.9.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 14\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.19.0-28-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 1\nTotal Memory: 3.614 GiB\nName: newton\nID: GSHG:YOET:XXXX:EZ7T:CWX4:S4CC:6HZX:XXXX:OAPR:STQE:WKTH:LCBR\nWARNING: No swap limit support\nLabels:\n provider=google\n\n\nnginx\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\n$ docker pull nginx\n$ docker run -d -p 80:80 --name nginx nginx\nc9ff75a9d98b9f0171e6bbcf7b475c45c8ecff980ca0e67264dc6bd895f85c65\n\n\u7d20\u306e\u307e\u307e\u4f5c\u308b\u3002\n\n\u52d5\u4f5c\u78ba\u8a8d\nhttp\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u8a31\u53ef\u3057\u3066\u3042\u3052\u308c\u3070\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n$ curl http://$(docker-machine ip newton)\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page,\n\n....\n\n\u3088\u3057\u3088\u3057\u3002\n\nhttp \u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u5834\u5408\n$ curl http://$(docker-machine ip newton)\ncurl: (7) Failed to connect to XXX.XXX.XXX.XXX port 80: Operation timed out\n\n\u3042\u308c\u30fb\u30fb\u30fb?\n\u3068\u601d\u3063\u305f\u3051\u3069GCE\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5916\u90e8\u304b\u3089\u306ehttp\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3002\u4e0a\u306e\u624b\u9806\u3067 --google-tag \"http-server\" \u3057\u3066\u308c\u3070\u3064\u306a\u304c\u308b\u3068\u601d\u3046\u3093\u3060\u3051\u3069\u3001\u305f\u307e\u306b\u9593\u9055\u3063\u3066\u305f\u308a\u3059\u308b\u306e\u3067\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u898b\u76f4\u305d\u3046\u3002\n\n\nDocker Machine \u3067 GCE \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u308b\u3068\u767b\u9332\u3055\u308c\u308b\u516c\u958b\u9375\u306e\u5f62\u5f0f\u304c\u5909\nDockerMachine\u3055\u3093\u304c\u81ea\u52d5\u751f\u6210\u3057\u305f\u8a8d\u8a3c\u60c5\u5831\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u81ea\u52d5\u767b\u9332\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u3093\u3060\u3051\u3069\u3001\u516c\u958b\u9375\u306b\u30e6\u30fc\u30b6\u540d\u304c\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u7de8\u96c6\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u4fdd\u5b58\u3067\u304d\u306a\u3044\u3002\u300c\u7121\u52b9\u306a\u30ad\u30fc\u3067\u3059\u300d\u3068\u6012\u3089\u308c\u308b\u3002\n\n\u614c\u3066\u305a\u3001\u672b\u5c3e\u306b\u306a\u3093\u304b\u9069\u5f53\u306a username \u3092\u8ffd\u52a0\u3057\u3066\u3042\u3052\u3088\u3046\u3002username@example.com\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u5f62\u5f0f\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u304c\u3001\u9069\u5f53\u306a\u540d\u524d\u3067\u3088\u3044\u3002\n\n\u4f7f\u3044\u7d42\u308f\u3063\u305f\u3089\ndocker-machine \u30b3\u30de\u30f3\u30c9\u3067\u843d\u3068\u3059\u3068 GCE\u5074\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3061\u3083\u3093\u3068\u6d88\u3048\u3066\u304f\u308c\u308b\u3002\n$ docker-machine rm newton\n\n\n\u3044\u304f\u3089\u306a\u3093\u3067\u3082MacBook\u3067\u306f\u91cd\u3059\u304e\u308b\u306e\u3067Google Compute Engine\u306b\u7f6e\u304f\u3053\u3068\u306b\u3057\u305f\u3002\n\n\u3053\u3061\u3089\u3092\u53c2\u8003\u306b\u3057\u306a\u304c\u3089\u3002 \n\n- http://qiita.com/eielh/items/428e24022955b0be8616\n\n\n# \u4e8b\u524d\u6e96\u5099\n## gcloud \u306e\u6700\u65b0\u7248\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\npip install gcloud\n```\n\n## gcloud \u306b\u30ed\u30b0\u30a4\u30f3\n \n```\ngcloud auth login\n```\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u30d6\u30e9\u30a6\u30b6\u304c\u7acb\u3061\u4e0a\u304c\u3063\u3066\u30ed\u30b0\u30a4\u30f3\u3055\u305b\u3089\u308c\u308b\u3002\n\n# Google Compute Engine \u3067 Nginx\u30b3\u30f3\u30c6\u30ca\u3092\u52d5\u304b\u3057\u3066\u307f\u308b\n\n## docker-machine \u3092\u4f5c\u6210\u3059\u308b\n\n\u4f5c\u696d\u7528\u306a\u3089[\u30d7\u30ea\u30a8\u30f3\u30d7\u30c6\u30a3\u30d7\u30eb\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5229\u7528\u3059\u308b](http://googlecloudplatform-japan.blogspot.jp/2015/05/vm-3-vm.html)\u3053\u3068\u3067\u3060\u3044\u3076\u5b89\u304f\u306a\u308b\u306e\u3068\u3001\u9593\u9055\u3063\u3066\u653e\u7f6e\u3057\u3066\u308224\u6642\u9593\u3067\u6d88\u3048\u3066\u304f\u308c\u308b\u306e\u3067 `--google-preemptible` \u306f\u6307\u5b9a\u3059\u308b\u3079\u304d\u3002\u3042\u3068\u30bf\u30b0\u3068\u3057\u3066 `http-server` \u3068 `https-server` \u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3068\u300180\u3068443\u304c\u7a7a\u304f\u306e\u3067\u4fbf\u5229\u3067\u3059\u3002(\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306b\u306f\u6c17\u3092\u3064\u3051\u3066)\n\n```bash\n$ docker-machine create -d google \\\n                        --google-project <PROJECT_NAME> \\\n                        --google-preemptible \\\n                        --google-tags 'http-server,https-server' \\\n                        --google-zone asia-east1-a \\\n                        --google-machine-type \"g1-small\" \\\n                        newton\n```\n\n\u3067\u3051\u305f\u3002\n\n```\n$ docker-machine ls\nNAME      ACTIVE   DRIVER       STATE     URL                          SWARM\ndefault   -        virtualbox   Running   tcp://192.168.99.100:2376\nnewton    -        google       Running   tcp://XXX.XXX.XXX.XXX:2376\n```\n\ndocker-machine \u3092\u5207\u308a\u66ff\u3048\u308b\u3002\n\n```bash\n$ eval $(docker-machine env newton)\n\n$ docker info\nContainers: 1\nImages: 12\nServer Version: 1.9.0\nStorage Driver: aufs\n Root Dir: /var/lib/docker/aufs\n Backing Filesystem: extfs\n Dirs: 14\n Dirperm1 Supported: true\nExecution Driver: native-0.2\nLogging Driver: json-file\nKernel Version: 3.19.0-28-generic\nOperating System: Ubuntu 14.04.3 LTS\nCPUs: 1\nTotal Memory: 3.614 GiB\nName: newton\nID: GSHG:YOET:XXXX:EZ7T:CWX4:S4CC:6HZX:XXXX:OAPR:STQE:WKTH:LCBR\nWARNING: No swap limit support\nLabels:\n provider=google\n```\n\n## nginx\u3092\u8d77\u52d5\u3057\u3066\u307f\u308b\n\n```bash\n$ docker pull nginx\n$ docker run -d -p 80:80 --name nginx nginx\nc9ff75a9d98b9f0171e6bbcf7b475c45c8ecff980ca0e67264dc6bd895f85c65\n```\n\n\u7d20\u306e\u307e\u307e\u4f5c\u308b\u3002\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\nhttp\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u8a31\u53ef\u3057\u3066\u3042\u3052\u308c\u3070\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n```bash\n$ curl http://$(docker-machine ip newton)\n<!DOCTYPE html>\n<html>\n<head>\n<title>Welcome to nginx!</title>\n<style>\n    body {\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    }\n</style>\n</head>\n<body>\n<h1>Welcome to nginx!</h1>\n<p>If you see this page,\n\n....\n```\n\n\u3088\u3057\u3088\u3057\u3002\n\n### http \u30dd\u30fc\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\u5834\u5408\n\n```bash\n$ curl http://$(docker-machine ip newton)\ncurl: (7) Failed to connect to XXX.XXX.XXX.XXX port 80: Operation timed out\n```\n\n\u3042\u308c\u30fb\u30fb\u30fb?\n\n\u3068\u601d\u3063\u305f\u3051\u3069GCE\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u5916\u90e8\u304b\u3089\u306ehttp\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u53d7\u3051\u4ed8\u3051\u306a\u3044\u3002\u4e0a\u306e\u624b\u9806\u3067 `--google-tag \"http-server\"` \u3057\u3066\u308c\u3070\u3064\u306a\u304c\u308b\u3068\u601d\u3046\u3093\u3060\u3051\u3069\u3001\u305f\u307e\u306b\u9593\u9055\u3063\u3066\u305f\u308a\u3059\u308b\u306e\u3067\u30b3\u30f3\u30bd\u30fc\u30eb\u3067\u898b\u76f4\u305d\u3046\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-07 19.38.01.png](https://qiita-image-store.s3.amazonaws.com/0/17911/fada7c82-24a2-07a5-5cda-09e52500c137.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-07 19.38.01.png\")\n\n### Docker Machine \u3067 GCE \u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u308b\u3068\u767b\u9332\u3055\u308c\u308b\u516c\u958b\u9375\u306e\u5f62\u5f0f\u304c\u5909\n\nDockerMachine\u3055\u3093\u304c\u81ea\u52d5\u751f\u6210\u3057\u305f\u8a8d\u8a3c\u60c5\u5831\u3092\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u81ea\u52d5\u767b\u9332\u3057\u3066\u304f\u308c\u3066\u3044\u308b\u3093\u3060\u3051\u3069\u3001\u516c\u958b\u9375\u306b\u30e6\u30fc\u30b6\u540d\u304c\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u306e\u3067\u3001\u305d\u306e\u307e\u307e\u7de8\u96c6\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u4fdd\u5b58\u3067\u304d\u306a\u3044\u3002\u300c\u7121\u52b9\u306a\u30ad\u30fc\u3067\u3059\u300d\u3068\u6012\u3089\u308c\u308b\u3002\n\n<img width=\"359\" alt=\"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-11-08 9.37.51.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/17911/e66c8e72-275d-21eb-b7f9-243df85b8fad.png\">\n\n\u614c\u3066\u305a\u3001\u672b\u5c3e\u306b\u306a\u3093\u304b\u9069\u5f53\u306a username \u3092\u8ffd\u52a0\u3057\u3066\u3042\u3052\u3088\u3046\u3002<username@example.com>\u3068\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u5f62\u5f0f\u3067\u66f8\u304b\u308c\u3066\u3044\u308b\u304c\u3001\u9069\u5f53\u306a\u540d\u524d\u3067\u3088\u3044\u3002\n\n## \u4f7f\u3044\u7d42\u308f\u3063\u305f\u3089\n\ndocker-machine \u30b3\u30de\u30f3\u30c9\u3067\u843d\u3068\u3059\u3068 GCE\u5074\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u3061\u3083\u3093\u3068\u6d88\u3048\u3066\u304f\u308c\u308b\u3002\n\n```\n$ docker-machine rm newton\n```\n", "tags": ["docker", "gce", "gcp"]}