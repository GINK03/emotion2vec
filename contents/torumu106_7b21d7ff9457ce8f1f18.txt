{"context": "\n\n\u3067\u304d\u308b\u3082\u306e\n\n\u30d0\u30c8\u30eb\u30b7\u30fc\u30f3\u3078\u306e\u9077\u79fb\u306b\u4f7f\u3048\u305d\u3046\u3002\n\u5c11\u306a\u304f\u3068\u3082\u4e00\u77ac\u3067\u30d1\u30c3\u3068\u5909\u308f\u308b\u3088\u308a\u306f\u30de\u30b7\u304b\u306a\u3041?\n\u3061\u306a\u307f\u306b\u96d1\u3067\u3059\u304c\u30a2\u30f3\u30c1\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u304b\u3051\u307e\u3057\u305f\u3002\n(\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u9032\u884c\u5ea6\u5408\u3044\u306e\u5024\u3092\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306f\u3053\u3053)\n(\u305d\u308c\u304c\u5acc\u306a\u3089_Time.y\u306b\u6f14\u7b97\u3092\u5c11\u3057\u65bd\u3057\u3066\u4f7f\u3046\u3068\u3044\u3044\u304b\u3082\u3067\u3059\u3002)\n\n\u30b3\u30fc\u30c9\nShader \"Original/NewImageEffectShader\"\n{\n    Properties\n    {\n        _MainTex (\"Texture\", 2D) = \"white\" {}\n        percent (\"percent\", Range(0, 1)) = 0.5\n        cycletime (\"cycletime\", int) = 3\n    }\n    SubShader\n    {\n        // No culling or depth\n        Cull Off ZWrite Off ZTest Always\n        // \u8ffd\u52a0\n        CGINCLUDE\n\n        #define PI 3.14159\n\n        float mod(float  a, float  b) { return a-b*floor(a/b); } \n        ENDCG\n\n        Pass\n        {\n            CGPROGRAM\n            #pragma vertex vert\n            #pragma fragment frag\n\n            #include \"UnityCG.cginc\"\n\n            struct appdata\n            {\n                float4 vertex : POSITION;\n                float2 uv : TEXCOORD0;\n            };\n\n            struct v2f\n            {\n                float2 uv : TEXCOORD0;\n                float4 vertex : SV_POSITION;\n            };\n\n            v2f vert (appdata v)\n            {\n                v2f o;\n                o.vertex = mul(UNITY_MATRIX_MVP, v.vertex);\n                o.uv = v.uv;\n                return o;\n            }\n\n            sampler2D _MainTex;\n            uniform float percent;\n            uniform int cycletime;\n\n            fixed4 frag (v2f i) : SV_Target\n            {\n                fixed4 col = tex2D(_MainTex, i.uv);\n\n                float2 r = 2.0 * (i.uv - 0.5);\n                float aspectRatio = _ScreenParams.x / _ScreenParams.y;\n                r.x *= aspectRatio;\n\n                fixed4 bgCol = float4(0.0, 0.0, 0.0, 0.0); // black\n\n                float4 cola,colb,colc,cold;\n                cola = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y + 0.001) / (r.x + 0.001)), PI / cycletime)));\n                colb = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y + 0.001) / (r.x - 0.001)), PI / cycletime)));\n                colc = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y - 0.001) / (r.x + 0.001)), PI / cycletime)));\n                cold = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y - 0.001) / (r.x - 0.001)), PI / cycletime)));\n                col = (cola + colb + colc + cold) / 4;\n\n                return col;\n            }\n            ENDCG\n        }\n    }\n}\n\n\ncycletime\u306e\u5024\u3092\u5909\u3048\u308c\u3070\u7d30\u5206\u5316\u306e\u5ea6\u5408\u3044\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4ed5\u7d44\u307f\natan\u3067X\u6b63\u65b9\u5411\u3068\u306e\u89d2\u5ea6\u3092\u53d6\u5f97\u3057\u305d\u306e\u89d2\u5ea6\u306b\u5fdc\u3058\u3066\u5857\u308a\u5206\u3051\u307e\u3059\u3002\n4\u56de\u5c11\u3057\u305a\u3089\u3057\u3066\u51e6\u7406\u3092\u3057\u3066\u3044\u308b\u306e\u306f\u30a2\u30f3\u30c1\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u3059\u3002\n\n\u304a\u307e\u3051\nPercent\u30920.5\u4ed8\u8fd1\u3001cycletime\u30923\u6841\u3068\u304b\u306b\u3059\u308b\u3068\u4e0d\u601d\u8b70\u306a\u6a21\u69d8\u304c\u51fa\u3066\u304d\u307e\u3059\u3002(\u5c11\u306a\u304f\u3068\u3082\u79c1\u306e\u74b0\u5883\u3067\u306f)\n(\u610f\u56f3\u306f\u3057\u3066\u307e\u305b\u3093\u304c\u3053\u308c\u306f\u3053\u308c\u3067\u304b\u3063\u3053\u3044\u3044\u304b\u3082\u3067\u3059)\n#\u3067\u304d\u308b\u3082\u306e\n![1\u6708-15-2017 16-20-06.gif](https://qiita-image-store.s3.amazonaws.com/0/113509/c7c2e5ab-ce77-422b-b3cc-e532e299f897.gif)\n\u30d0\u30c8\u30eb\u30b7\u30fc\u30f3\u3078\u306e\u9077\u79fb\u306b\u4f7f\u3048\u305d\u3046\u3002\n\u5c11\u306a\u304f\u3068\u3082\u4e00\u77ac\u3067\u30d1\u30c3\u3068\u5909\u308f\u308b\u3088\u308a\u306f\u30de\u30b7\u304b\u306a\u3041?\n\u3061\u306a\u307f\u306b\u96d1\u3067\u3059\u304c\u30a2\u30f3\u30c1\u30a8\u30a4\u30ea\u30a2\u30b9\u306f\u304b\u3051\u307e\u3057\u305f\u3002\n(\u30b9\u30af\u30ea\u30d7\u30c8\u304b\u3089\u9032\u884c\u5ea6\u5408\u3044\u306e\u5024\u3092\u5165\u308c\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306f[\u3053\u3053](http://qiita.com/torumu106/items/20fcb7590f653695f26f))\n(\u305d\u308c\u304c\u5acc\u306a\u3089_Time.y\u306b\u6f14\u7b97\u3092\u5c11\u3057\u65bd\u3057\u3066\u4f7f\u3046\u3068\u3044\u3044\u304b\u3082\u3067\u3059\u3002)\n#\u30b3\u30fc\u30c9\n```\nShader \"Original/NewImageEffectShader\"\n{\n\tProperties\n\t{\n\t\t_MainTex (\"Texture\", 2D) = \"white\" {}\n\t\tpercent (\"percent\", Range(0, 1)) = 0.5\n\t\tcycletime (\"cycletime\", int) = 3\n\t}\n\tSubShader\n\t{\n\t\t// No culling or depth\n\t\tCull Off ZWrite Off ZTest Always\n\t\t// \u8ffd\u52a0\n        CGINCLUDE\n\n        #define PI 3.14159\n\n        float mod(float  a, float  b) { return a-b*floor(a/b); } \n        ENDCG\n\n\t\tPass\n\t\t{\n\t\t\tCGPROGRAM\n\t\t\t#pragma vertex vert\n\t\t\t#pragma fragment frag\n\t\t\t\n\t\t\t#include \"UnityCG.cginc\"\n\n\t\t\tstruct appdata\n\t\t\t{\n\t\t\t\tfloat4 vertex : POSITION;\n\t\t\t\tfloat2 uv : TEXCOORD0;\n\t\t\t};\n\n\t\t\tstruct v2f\n\t\t\t{\n\t\t\t\tfloat2 uv : TEXCOORD0;\n\t\t\t\tfloat4 vertex : SV_POSITION;\n\t\t\t};\n\n\t\t\tv2f vert (appdata v)\n\t\t\t{\n\t\t\t\tv2f o;\n\t\t\t\to.vertex = mul(UNITY_MATRIX_MVP, v.vertex);\n\t\t\t\to.uv = v.uv;\n\t\t\t\treturn o;\n\t\t\t}\n\t\t\t\n\t\t\tsampler2D _MainTex;\n\t\t\tuniform float percent;\n\t\t\tuniform int cycletime;\n\n\t\t\tfixed4 frag (v2f i) : SV_Target\n\t\t\t{\n\t\t\t\tfixed4 col = tex2D(_MainTex, i.uv);\n\n\t\t\t\tfloat2 r = 2.0 * (i.uv - 0.5);\n                float aspectRatio = _ScreenParams.x / _ScreenParams.y;\n                r.x *= aspectRatio;\n\n                fixed4 bgCol = float4(0.0, 0.0, 0.0, 0.0); // black\n\n\t\t\t\tfloat4 cola,colb,colc,cold;\n\t\t\t\tcola = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y + 0.001) / (r.x + 0.001)), PI / cycletime)));\n\t\t\t\tcolb = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y + 0.001) / (r.x - 0.001)), PI / cycletime)));\n\t\t\t\tcolc = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y - 0.001) / (r.x + 0.001)), PI / cycletime)));\n\t\t\t\tcold = lerp(col, bgCol, 1.0 - step(PI * percent / cycletime, mod(atan((r.y - 0.001) / (r.x - 0.001)), PI / cycletime)));\n\t\t\t\tcol = (cola + colb + colc + cold) / 4;\n\n\t\t\t\treturn col;\n\t\t\t}\n\t\t\tENDCG\n\t\t}\n\t}\n}\n\n```\ncycletime\u306e\u5024\u3092\u5909\u3048\u308c\u3070\u7d30\u5206\u5316\u306e\u5ea6\u5408\u3044\u3092\u5909\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n#\u4ed5\u7d44\u307f\natan\u3067X\u6b63\u65b9\u5411\u3068\u306e\u89d2\u5ea6\u3092\u53d6\u5f97\u3057\u305d\u306e\u89d2\u5ea6\u306b\u5fdc\u3058\u3066\u5857\u308a\u5206\u3051\u307e\u3059\u3002\n4\u56de\u5c11\u3057\u305a\u3089\u3057\u3066\u51e6\u7406\u3092\u3057\u3066\u3044\u308b\u306e\u306f\u30a2\u30f3\u30c1\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u3059\u3002\n#\u304a\u307e\u3051\nPercent\u30920.5\u4ed8\u8fd1\u3001cycletime\u30923\u6841\u3068\u304b\u306b\u3059\u308b\u3068\u4e0d\u601d\u8b70\u306a\u6a21\u69d8\u304c\u51fa\u3066\u304d\u307e\u3059\u3002(\u5c11\u306a\u304f\u3068\u3082\u79c1\u306e\u74b0\u5883\u3067\u306f)\n(\u610f\u56f3\u306f\u3057\u3066\u307e\u305b\u3093\u304c\u3053\u308c\u306f\u3053\u308c\u3067\u304b\u3063\u3053\u3044\u3044\u304b\u3082\u3067\u3059)\n", "tags": ["Unity", "ImageEffect", "Shader"]}