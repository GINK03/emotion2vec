{"context": " More than 1 year has passed since last update.\n\n\u30b2\u30fc\u30e0\u306bBGM\u306f\u6b20\u304b\u305b\u306a\u3044\u3002\n\u30b2\u30fc\u30e0BGM\u3067\u300c\u61d0\u304b\u3057\u306e\u540d\u66f2\u96c6\u300d\u304cYoutube\u3067\u4eba\u6c17\u306a\u306e\u3082\u3046\u306a\u305a\u3051\u308b\u3002\n\u3057\u304b\u3057\u305b\u3063\u304b\u304f\u306e\u540d\u66f2\u3082\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u305f\u77ac\u9593\u306b\u300c\u3076\u3063\u300d\u3068\u5207\u308c\u3066\u3057\u307e\u3063\u3066\u306f\u60c5\u7dd2\u3082\u3078\u3061\u307e\u3082\u306a\u3044\u3002\n\u5049\u5927\u306a\u97f3\u697d\u306b\u656c\u610f\u3092\u6255\u3044\u3001FadeOut\u3067\u304b\u3063\u3053\u3088\u304f\u66f2\u3092\u505c\u6b62\u3055\u305b\u308b\u65b9\u6cd5\u3092\u30b7\u30a7\u30a2\u3059\u308b\u3002\n\u307e\u305a\u66f2\u3092\u9cf4\u3089\u3059\u969b\u306b\u306fAVAudioPlayer\u3092\u4f7f\u3046\u304c\u3001viewDidLoad\u5185\u3067Path\u3092\u53d6\u5f97\u3057\u305f\u308a\n\u3054\u3061\u3083\u3054\u3061\u3083\u3059\u308b\u306e\u306f\u7f8e\u3057\u304f\u306a\u3044\u3002\n[SEEventhandler sharedManaber] bgmSoundPlay: @\"opening.mp3\"];\n\u3063\u3066\u611f\u3058\u3067\uff11\u884c\u3067\u3070\u3061\u3063\u3068\u547c\u3073\u51fa\u3057\u305f\u3044\u306e\u3067\u3001\n\u30b2\u30fc\u30e0\u5185\u3067\u4f7f\u3046\u30a4\u30d9\u30f3\u30c8(\u97f3\u3092\u9cf4\u3089\u3057\u305f\u308a\u3001\u4ed6\u306b\u3082\u30b2\u30fc\u30e0\u5185\u3067\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u305b\u308b)\u3092\n\u307e\u3068\u3081\u3066\u6271\u3046\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u203bAVAudioPlayer\u306e\u4f7f\u7528\u65b9\u6cd5\u306f\u300cyuky_az\u300d\u3055\u3093\u306e\u4e0b\u8a18\u306e\u30b9\u30c8\u30c3\u30af\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u3053\u306e\u5834\u3092\u501f\u308a\u3066\u3001\u304a\u793c\u3092\u7533\u3057\u4e0a\u3052\u307e\u3059\u3002\nhttp://qiita.com/yuky_az/items/085e30c159cafa8dac1c\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5b9f\u4f8b\n\nSEEventHandlerManager.h\n#import <Foundation/Foundation.h>\n#import <AVFoundation/AVFoundation.h>\n\n@interface SEEventHandlerManager : NSObject\n//***** Class Method *****\n+(SEEventHandlerManager *)sharedManager;\n//***** Instance Method *****\n-(void)bgmSoundPlay: (NSString *)fileName;\n-(void)bgmStopWithFadeOut;\n\n@end\n\n\n\nSEEventHandlerManager.m\n#import \"SEEventHandlerManager.h\"\n\n@interface SEEventHandlerManager ()\n\n@property(nonatomic) NSMutableArray* soundArray;\n@property(nonatomic) float soundVolume;\n\n@end\n\n@implementation SEEventHandlerManager\n\n//--------------------------------------------------------------//\n#pragma mark -- Initialize --\n//--------------------------------------------------------------//\nstatic SEEventHandlerManager *sharedInstance = nil;\n\n+(SEEventHandlerManager *)sharedManager\n{\n  if (!sharedInstance) {\n    sharedInstance = [[SEEventHandlerManager alloc] init];\n  }\n  return sharedInstance;\n}\n\n- (id) init\n{\n  self = [super init];\n  if (self) {\n    _soundArray = [[NSMutableArray alloc] init];\n    _soundVolume = 1.0;\n  }\n\n  return self;\n}\n\n-(void)bgmSoundPlay: (NSString *)fileName\n{\n  NSString *soundPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:fileName];\n  NSURL* soundUrl = [NSURL fileURLWithPath:soundPath];\n  AVAudioPlayer* audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:nil];\n  audioPlayer.numberOfLoops = -1;\n  audioPlayer.volume = _soundVolume;\n  audioPlayer.delegate = (id)self;\n  [_soundArray insertObject:audioPlayer atIndex:0];\n  [audioPlayer prepareToPlay];\n  [audioPlayer play];\n}\n\n-(void)bgmStopWithFadeOut\n{\n  AVAudioPlayer* currentPlayer = [_soundArray objectAtIndex:0];\n  if (currentPlayer.volume > 0.1) {\n    currentPlayer.volume = currentPlayer.volume - 0.1;\n    [self performSelector:@selector(bgmStopWithFadeOut) withObject:nil afterDelay:0.1];\n  }else{\n    [currentPlayer stop];\n    [_soundArray removeAllObjects];\n  }\n\n}\n\n@end\n\n\n\nbgmStopWithFadeOut\u304cFadeOut\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u5225\u306b\u96e3\u3057\u3044\u3053\u3068\u306f\u306a\u304f\u3001\u30e1\u30bd\u30c3\u30c9\u3092Volume\u304c0\u306b\u306a\u308b\u307e\u3067\u547c\u3073\u51fa\u3057\u3064\u3065\u3051\u30010\u306b\u306a\u3063\u305f\u3089\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7834\u68c4\u3059\u308b\u3002\n\u914d\u5217\u306b\u683c\u7d0d\u3057\u305f\u306e\u306f\u5f8c\u306b\u97f3\u3092\u8907\u6570\u9cf4\u3089\u3059\u969b\u306b\u3001\u5fc5\u8981\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3068\u8003\u3048\u3066\u306e\u3053\u3068\u3002\n\n\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u306e\u304a\u304b\u3052\u3067\u3053\u308c\u304c\u3046\u308c\u3057\u3044\n\u307e\u305f\u3001\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u306b\u3088\u3063\u3066\u4e0b\u8a18\u306e\u5229\u70b9\u3092\u5f97\u308b\u3002\n\u25a0\u5229\u70b9\uff1a\u753b\u9762\u9077\u79fb\u306b\u95a2\u4fc2\u306a\u304f\u3001\u597d\u304d\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u97f3\u3092\u518d\u751f\uff08\u505c\u6b62\uff09\u3067\u304d\u308b\u3002\n\n\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3067\u306f\u52d5\u304b\u306a\u3044\u3088\u30fb\u30fb\u30fb\n\u307e\u305f\u3001\u4e0a\u8a18\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u4e0a\u3067\u306f\u52d5\u4f5c\u3057\u306a\u304b\u3063\u305f\u3002\nOS X 10.9.2\nXCode 5.1.1\niOS\u30b7\u30df\u30e5\u30ec\u30fc\u30bf 7.1(iPhone Retina 4-inch 64bit)\n\u300cCannot find executable for CFBundle CertUIFramework.axbundle\u300d\u306a\u308b\n\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u305f\u3002\n\u53c2\u8003URL:http://stackoverflow.com/questions/18888059/cannot-find-executable-for-cfbundle-certuiframework-axbundle\n\u3053\u308c\u306fXCode\u306e\u30d0\u30b0\u306e\u3088\u3046\u3067\u3001\u5b9f\u6a5f\u3067\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u52d5\u4f5c\u3055\u305b\u305f\u5834\u5408\u306b\u306f\u6b63\u5e38\u306b\u97f3\u697d\u304c\u518d\u751f\u3055\u308c\u305f\u306e\u3067\u3001\u30c6\u30b9\u30c8\u3059\u308b\u969b\u306b\u306f\u3054\u6ce8\u610f\u3092\u3002\n\u3067\u306f\uff01HappyBoy\u304c\u304a\u9001\u308a\u3057\u307e\u3057\u305f\uff01\n#\u30b2\u30fc\u30e0\u306bBGM\u306f\u6b20\u304b\u305b\u306a\u3044\u3002\n\u30b2\u30fc\u30e0BGM\u3067\u300c\u61d0\u304b\u3057\u306e\u540d\u66f2\u96c6\u300d\u304cYoutube\u3067\u4eba\u6c17\u306a\u306e\u3082\u3046\u306a\u305a\u3051\u308b\u3002\n\u3057\u304b\u3057\u305b\u3063\u304b\u304f\u306e\u540d\u66f2\u3082\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u305f\u77ac\u9593\u306b\u300c\u3076\u3063\u300d\u3068\u5207\u308c\u3066\u3057\u307e\u3063\u3066\u306f\u60c5\u7dd2\u3082\u3078\u3061\u307e\u3082\u306a\u3044\u3002\n\n\u5049\u5927\u306a\u97f3\u697d\u306b\u656c\u610f\u3092\u6255\u3044\u3001FadeOut\u3067\u304b\u3063\u3053\u3088\u304f\u66f2\u3092\u505c\u6b62\u3055\u305b\u308b\u65b9\u6cd5\u3092\u30b7\u30a7\u30a2\u3059\u308b\u3002\n\n\n\u307e\u305a\u66f2\u3092\u9cf4\u3089\u3059\u969b\u306b\u306fAVAudioPlayer\u3092\u4f7f\u3046\u304c\u3001viewDidLoad\u5185\u3067Path\u3092\u53d6\u5f97\u3057\u305f\u308a\n\u3054\u3061\u3083\u3054\u3061\u3083\u3059\u308b\u306e\u306f\u7f8e\u3057\u304f\u306a\u3044\u3002\n\n`[SEEventhandler sharedManaber] bgmSoundPlay: @\"opening.mp3\"];`\n\u3063\u3066\u611f\u3058\u3067\uff11\u884c\u3067\u3070\u3061\u3063\u3068\u547c\u3073\u51fa\u3057\u305f\u3044\u306e\u3067\u3001\n\n\u30b2\u30fc\u30e0\u5185\u3067\u4f7f\u3046\u30a4\u30d9\u30f3\u30c8(\u97f3\u3092\u9cf4\u3089\u3057\u305f\u308a\u3001\u4ed6\u306b\u3082\u30b2\u30fc\u30e0\u5185\u3067\u306e\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u751f\u3055\u305b\u308b)\u3092\n\u307e\u3068\u3081\u3066\u6271\u3046\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\u203bAVAudioPlayer\u306e\u4f7f\u7528\u65b9\u6cd5\u306f\u300cyuky_az\u300d\u3055\u3093\u306e\u4e0b\u8a18\u306e\u30b9\u30c8\u30c3\u30af\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\n\u3053\u306e\u5834\u3092\u501f\u308a\u3066\u3001\u304a\u793c\u3092\u7533\u3057\u4e0a\u3052\u307e\u3059\u3002\nhttp://qiita.com/yuky_az/items/085e30c159cafa8dac1c\n#\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5b9f\u4f8b\n\n```langcode:SEEventHandlerManager.h\n#import <Foundation/Foundation.h>\n#import <AVFoundation/AVFoundation.h>\n\n@interface SEEventHandlerManager : NSObject\n//***** Class Method *****\n+(SEEventHandlerManager *)sharedManager;\n//***** Instance Method *****\n-(void)bgmSoundPlay: (NSString *)fileName;\n-(void)bgmStopWithFadeOut;\n\n@end\n```\n\n```langcode:SEEventHandlerManager.m\n#import \"SEEventHandlerManager.h\"\n\n@interface SEEventHandlerManager ()\n\n@property(nonatomic) NSMutableArray* soundArray;\n@property(nonatomic) float soundVolume;\n\n@end\n\n@implementation SEEventHandlerManager\n\n//--------------------------------------------------------------//\n#pragma mark -- Initialize --\n//--------------------------------------------------------------//\nstatic SEEventHandlerManager *sharedInstance = nil;\n\n+(SEEventHandlerManager *)sharedManager\n{\n  if (!sharedInstance) {\n    sharedInstance = [[SEEventHandlerManager alloc] init];\n  }\n  return sharedInstance;\n}\n\n- (id) init\n{\n  self = [super init];\n  if (self) {\n    _soundArray = [[NSMutableArray alloc] init];\n    _soundVolume = 1.0;\n  }\n  \n  return self;\n}\n\n-(void)bgmSoundPlay: (NSString *)fileName\n{\n  NSString *soundPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:fileName];\n  NSURL* soundUrl = [NSURL fileURLWithPath:soundPath];\n  AVAudioPlayer* audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:soundUrl error:nil];\n  audioPlayer.numberOfLoops = -1;\n  audioPlayer.volume = _soundVolume;\n  audioPlayer.delegate = (id)self;\n  [_soundArray insertObject:audioPlayer atIndex:0];\n  [audioPlayer prepareToPlay];\n  [audioPlayer play];\n}\n\n-(void)bgmStopWithFadeOut\n{\n  AVAudioPlayer* currentPlayer = [_soundArray objectAtIndex:0];\n  if (currentPlayer.volume > 0.1) {\n    currentPlayer.volume = currentPlayer.volume - 0.1;\n    [self performSelector:@selector(bgmStopWithFadeOut) withObject:nil afterDelay:0.1];\n  }else{\n    [currentPlayer stop];\n    [_soundArray removeAllObjects];\n  }\n\n}\n\n@end\n\n```\n\nbgmStopWithFadeOut\u304cFadeOut\u51e6\u7406\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u5225\u306b\u96e3\u3057\u3044\u3053\u3068\u306f\u306a\u304f\u3001\u30e1\u30bd\u30c3\u30c9\u3092Volume\u304c0\u306b\u306a\u308b\u307e\u3067\u547c\u3073\u51fa\u3057\u3064\u3065\u3051\u30010\u306b\u306a\u3063\u305f\u3089\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u7834\u68c4\u3059\u308b\u3002\n\u914d\u5217\u306b\u683c\u7d0d\u3057\u305f\u306e\u306f\u5f8c\u306b\u97f3\u3092\u8907\u6570\u9cf4\u3089\u3059\u969b\u306b\u3001\u5fc5\u8981\u306b\u306a\u308b\u304b\u3082\u3057\u308c\u306a\u3044\u3068\u8003\u3048\u3066\u306e\u3053\u3068\u3002\n\n#\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u306e\u304a\u304b\u3052\u3067\u3053\u308c\u304c\u3046\u308c\u3057\u3044\n\u307e\u305f\u3001\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u306b\u3088\u3063\u3066\u4e0b\u8a18\u306e\u5229\u70b9\u3092\u5f97\u308b\u3002\n\u25a0\u5229\u70b9\uff1a\u753b\u9762\u9077\u79fb\u306b\u95a2\u4fc2\u306a\u304f\u3001\u597d\u304d\u306a\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u97f3\u3092\u518d\u751f\uff08\u505c\u6b62\uff09\u3067\u304d\u308b\u3002\n\n#\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3067\u306f\u52d5\u304b\u306a\u3044\u3088\u30fb\u30fb\u30fb\n\u307e\u305f\u3001\u4e0a\u8a18\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306f\u4e0b\u8a18\u306e\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u4e0a\u3067\u306f\u52d5\u4f5c\u3057\u306a\u304b\u3063\u305f\u3002\nOS X 10.9.2\nXCode 5.1.1\niOS\u30b7\u30df\u30e5\u30ec\u30fc\u30bf 7.1(iPhone Retina 4-inch 64bit)\n\n\u300cCannot find executable for CFBundle CertUIFramework.axbundle\u300d\u306a\u308b\n\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u3066\u3044\u305f\u3002\n\u53c2\u8003URL:http://stackoverflow.com/questions/18888059/cannot-find-executable-for-cfbundle-certuiframework-axbundle\n\n\n\u3053\u308c\u306fXCode\u306e\u30d0\u30b0\u306e\u3088\u3046\u3067\u3001\u5b9f\u6a5f\u3067\u30b7\u30df\u30e5\u30ec\u30fc\u30bf\u3092\u52d5\u4f5c\u3055\u305b\u305f\u5834\u5408\u306b\u306f\u6b63\u5e38\u306b\u97f3\u697d\u304c\u518d\u751f\u3055\u308c\u305f\u306e\u3067\u3001\u30c6\u30b9\u30c8\u3059\u308b\u969b\u306b\u306f\u3054\u6ce8\u610f\u3092\u3002\n\n\u3067\u306f\uff01HappyBoy\u304c\u304a\u9001\u308a\u3057\u307e\u3057\u305f\uff01\n", "tags": ["iOS7", "AVAudioPlayer", "Objective-C", "Sound"]}