{"context": " More than 1 year has passed since last update.\u516c\u5f0f\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3001\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u307e\u3068\u3081\u307e\u3057\u305f\u3002\nrbenv\u3092\u4f7f\u7528\u3057\u305f\u308a\u3001Ruby 2.0\u3092\u4f7f\u3063\u305f\u308a\u3001SSH\u3068HTTP\u306e\u3069\u3061\u3089\u3067\u3082clone, push\u7b49\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u306b\u304b\u306a\u308a\u82e6\u52b4\u3057\u307e\u3057\u305f\u3002\u3002\n\ngitlabhq/doc/install/installation.md at 5-0-stable \u00b7 gitlabhq/gitlabhq \u00b7 GitHub\nInstalling Gitlab on OS X\n\n\u4ee5\u4e0b\u3001\u30d7\u30ed\u30f3\u30d7\u30c8\u306f\u57fa\u672c\u3001admin\u6a29\u9650\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u306e\u5b9f\u884c\u3067\u3059\u3002\n\u4fbf\u5b9c\u4e0a\u3001\u30de\u30b7\u30f3\u540d\u3092gitlab_server.local\u3068\u3057\u307e\u3059\u3002\n\n\u6e96\u5099\n\u5f8c\u3067git\u30e6\u30fc\u30b6\u30fc\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u3001/home\u4ee5\u4e0b\u3092\u7de8\u96c6\u53ef\u80fd\u306b\u3059\u308b\u3002\n$ sudo vi /etc/auto_master\n\n/home\u306e\u884c\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\u3002\n#\n# Automounter master map\n#\n\n+auto_master            # Use directory service\n/net                    -hosts          -nobrowse,hidefromfinder,nosuid\n# /home                 auto_home       -nobrowse,hidefromfinder\n/Network/Servers        -fstab\n/-                      -static\n\n\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u3001\u30de\u30b7\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\nHomebrew\n\u4f55\u306f\u306a\u304f\u3068\u3082\u307e\u305a\u306fHomebrew\u3002\n$ ruby -e \"$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)\"\n\n\n\u5404\u7a2e\u30d1\u30c3\u30b1\u30fc\u30b8\n$ brew install git\n\n$ brew install redis\n# \u81ea\u52d5\u3067\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n$ launchctl load ~/Library/LaunchAgents/homebrew.mxcl.redis.plist\n\n# gem charlock_holmes \u5468\u308a\u3067\u5fc5\u8981\n$ brew install icu4c\n$ brew link icu4c --force\n\n# python2\u304c\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\n$ sudo ln -s /usr/bin/python /usr/bin/python2\n\n\n\u30e6\u30fc\u30b6\u30fc\n# \u7a7a\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7ID\u3092\u8abf\u3079\u308b\u3002200\u756a\u53f0\u3042\u305f\u308a\u3092\u4f7f\u7528\u3059\u308b\u3002\n$ sudo dscl . -list /Groups PrimaryGroupID | cut -c 32-38 | sort -rn\n# \u7a7a\u3044\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fcID\u3092\u8abf\u3079\u308b\u3002200\u756a\u53f0\u3042\u305f\u308a\u3092\u4f7f\u7528\u3059\u308b\u3002\n$ sudo dscl . -list /Users UniqueID | cut -c 23-28 | sort -rn\n\n$ sudo dscl . -create /Groups/git PrimaryGroupID \uff1c\u7a7a\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7ID\uff1e\n\n$ sudo dscl . -create /Users/git UniqueID \uff1c\u7a7a\u3044\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fcID\uff1e\n$ sudo dscl . -create /Users/git PrimaryGroupID \uff1c\u7a7a\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7ID\uff1e\n$ sudo dscl . -create /Users/git UserShell /bin/bash\n$ sudo dscl . -create /Users/git NFSHomeDirectory /home/git\n$ sudo dscl . -create /Users/git Password \"*\"\n\n$ sudo mkdir /home/git\n$ sudo chown -R git:git /home/git\n$ sudo chmod 755 /home/git\n\n$ sudo -i -u git\n$ cd\n\n# SSH\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u6642\u3092\u8003\u616e\n$ vi .bash_profile\n$ vi .bashrc\n\n$ exit\n\n\n/home/git/.bash_profile\nif [ -f ~/.bashrc ]; then\n    . ~/.bashrc\nfi\n\n\n\n/home/git/.bashrc\nexport PATH=/usr/local/bin:$PATH\nif which rbenv > /dev/null; then eval \"$(rbenv init -)\"; fi\n\n\n\ngit\n$ sudo -i -u git\n\n$ git config --global user.name \"GitLab\"\n$ git config --global user.email \"gitlab@localhost\"\n\n$ exit\n\n\nRuby\n$ echo 'if which rbenv > /dev/null; then eval \"$(rbenv init -)\"; fi' > ~/.bashrc\n$ . ~/.bashrc\n\n$ brew install rbenv ruby-build\n\n# for admin user\n\n$ rbenv install 2.0.0-p0\n$ rbenv global 2.0.0-p0\n$ ruby -v\n# -> ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.3.0]\n\n$ gem install bundler\n$ rbenv rehash\n\n# for git user\n\n$ sudo -i -u git\n\n$ rbenv install 2.0.0-p0\n$ rbenv global 2.0.0-p0\n$ rbenv rehash\n\n$ ruby -v\n# -> ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.3.0]\n\n$ exit\n\n\nSSH\n\u3053\u306e\u8fba\u308a\u306f\u9069\u5b9c\u8a2d\u5b9a\u3059\u308b\u3002\n$ sudo /etc/sshd_config\n\nPermitRootLogin no\n\n\nGitLab shell\n$ sudo -i -u git\n$ cd\n\n$ git clone https://github.com/gitlabhq/gitlab-shell.git\n$ cd gitlab-shell\n\n# \u7279\u5b9a\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\n$ git checkout v1.1.0\n$ git checkout -b v1.1.0\n\n# gitlab_url\u3092\"http://gitlab_server.local/\"\u306b\u5909\u66f4\n$ cp config.yml.example config.yml\n$ vim config.yml\n\n# \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u5b9f\u884c\n$ ./bin/install\n\n$ exit\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n$ brew install mysql\n# \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n$ launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist\n\n# \u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u3001\u4ed6\u30db\u30b9\u30c8\u304b\u3089\u306e\u30eb\u30fc\u30c8\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\u3001\u30a2\u30ce\u30cb\u30de\u30b9\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3001\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3002\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u76f4\u5f8c\u3067\u521d\u671f\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u7a7a\u306e\u305f\u3081\u3001\u6700\u521d\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u306fEnter\u3092\u62bc\u3059\u3002\n$ cd\n$ mysql_secure_installation\n\n# MySQL\u306b\u30ed\u30b0\u30a4\u30f3\n$ mysql -u root -p\n\n# gitlab\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\uff08$password\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\uff09\nmysql> CREATE USER 'gitlab'@'localhost' IDENTIFIED BY '$password';\n\n# \u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\nmysql> CREATE DATABASE IF NOT EXISTS `gitlabhq_production` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`;\n\n# gitlab\u30e6\u30fc\u30b6\u30fc\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\nmysql> GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER ON `gitlabhq_production`.* TO 'gitlab'@'localhost';\n\n# \u30ed\u30b0\u30a2\u30a6\u30c8\nmysql> quit\n\n# gitlab\u30e6\u30fc\u30b6\u30fc\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3057\u3066\u307f\u308b\n$ sudo -u git -H mysql -u gitlab -p -D gitlabhq_production\n\n\nGitLab\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5f15\u3063\u5f35\u3063\u3066\u304f\u308b\u3002\n$ sudo -i -u git\n$ cd\n\n$ git clone https://github.com/gitlabhq/gitlabhq.git gitlab\n\n# 5.0\u7528\u30d6\u30e9\u30f3\u30c1\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\n$ cd gitlab\n$ git checkout 5-0-stable\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\n$ cp config/gitlab.yml.example config/gitlab.yml\n$ vi config/gitlab.yml\n\n# git\u30e6\u30fc\u30b6\u30fc\u3067\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3067\u304d\u3066\u3044\u308c\u3070\u554f\u984c\u306a\u3044\u306f\u305a\u3060\u304c\u3001\n# log, tmp\u306e\u5404\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u30fb\u6240\u6709\u6a29\u3092\u30c1\u30a7\u30c3\u30af\n$ chown -R git log/\n$ chown -R git tmp/\n$ chmod -R u+rwX  log/\n$ chmod -R u+rwX  tmp/\n\n# Create directory for satellites\n$ mkdir ~/gitlab-satellites\n\n# \u30d7\u30ed\u30bb\u30b9ID\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n$ mkdir tmp/pids/\n$ chmod -R u+rwX  tmp/pids/\n\n# Unicorn\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\n$ cp config/unicorn.rb.example config/unicorn.rb\n\n\n/home/git/gitlab/config/gitlab.yml\n\u2026\n\ngitlab:\n  host: gitlab_server.local\n\n...\n\n# Homebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fgit\u3092\u4f7f\u7528\u3059\u308b\ngit:\n  bin_path: /usr/local/bin/git\n\n\u2026\n\n\n\nMySQL\u306e\u8a2d\u5b9a\n# Mysql\n$ cp config/database.yml.mysql config/database.yml\n# \u30e6\u30fc\u30b6\u30fc\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\n$ vi config/database.yml\n\n# git\u30e6\u30fc\u30b6\u30fc\u3092\u7d42\u3048\u308b\n$ exit\n\n\nGem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd ~git/gitlab\n\n$ gem install charlock_holmes --version '0.6.9'\n$ rbenv rehash\n\n# For MySQL (note, the option says \"without\")\n$ sudo -u git -H bundle install --deployment --without development test postgres\n\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n$ sudo -u git -H bundle exec rake gitlab:setup RAILS_ENV=production\n\n\n\u8d77\u52d5\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u7528\u610f\n$ sudo curl --output /etc/init.d/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/master/init.d/gitlab\n$ sudo chmod +x /etc/init.d/gitlab\n\n\n\u8a2d\u5b9a\u72b6\u6cc1\u306e\u78ba\u8a8d\n$ sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production\n$ sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n\n\nAssets Pipeline\n$ sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production\n\n\n\u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3059\u308b\n$ sudo /etc/init.d/gitlab start\n$ sudo /etc/init.d/gitlab status\n# -> Gitlab service / Unicorn with PID <\u30d7\u30ed\u30bb\u30b9ID> is running.\n     Gitlab service / Sidekiq with PID <\u30d7\u30ed\u30bb\u30b9ID> is running.\n\n\nNginx\n\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066nginx\u3092\u4f7f\u7528\u3002\n$ brew install nginx\n$ vi /usr/local/etc/nginx/nginx.conf\n\n\n/usr/local/etc/nginx/nginx.conf\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n    include /usr/local/etc/nginx/sites-enabled/*; #\u8ffd\u52a0\u3059\u308b\n\n    #\u3053\u308c\u3088\u308a\u4ee5\u4e0b\u306f\u3070\u3063\u3055\u308a\u524a\u9664\n\n}\n\n\n$ mkdir /usr/local/etc/nginx/sites-available\n$ mkdir /usr/local/etc/nginx/sites-enabled\n$ curl --output /usr/local/etc/nginx/sites-available/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/master/nginx/gitlab\n$ ln -s /usr/local/etc/nginx/sites-available/gitlab /usr/local/etc/nginx/sites-enabled/gitlab\n$ sudo mkdir /var/log/nginx\n\n# YOUR_SERVER_IP\u3068YOUR_SERVER_FQDN\u3092\u5909\u66f4\u3059\u308b\u3002\n# YOUR_SERVER_IP\u306f\u6d88\u3057\u3066\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u307f\u3067\u3082\u554f\u984c\u306a\u3044\u3002\n# YOUR_SERVER_FQDN\u3092gitlab_server.local\u306b\u5909\u66f4\u3059\u308b\u3002\n$ vi /usr/local/etc/nginx/sites-available/gitlab\n\n# 80\u756a\u30dd\u30fc\u30c8\u3067nginx\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u306b\u3001root\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n$ sudo cp /usr/local/opt/nginx/homebrew.mxcl.nginx.plist /Library/LaunchDaemons\n# UserName\u306e\u7b87\u6240\u3092\u524a\u9664\u3059\u308b\n$ sudo vi /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n$ sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n\n\n\u7d50\u679c\n\u4ee5\u4e0a\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u306eMac, \u307e\u305fiTunes(Bonjour for Windows)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eWindows\u30de\u30b7\u30f3\u304b\u3089\u3082\u3001http://gitlab_server.local\u3067GitLab\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u53c2\u8003\u30ea\u30f3\u30af\n\ngitlabhq/gitlabhq \u00b7 GitHub\ngitlabhq/doc/install/installation.md at 5-0-stable \u00b7 gitlabhq/gitlabhq \u00b7 GitHub\nError 500 on root... \u00b7 Issue #679 \u00b7 gitlabhq/gitlabhq\nGrit::GitRuby::Internal::PackFormatError \u00b7 Issue #2789 \u00b7 gitlabhq/gitlabhq\nHi I've got a issue in the Ruby 2.0 p0 \u00b7 Issue #3080 \u00b7 gitlabhq/gitlabhq\nInstalling Gitlab on OS X\nosx - How can I use the /home directory on Mac OS X - Stack Overflow\ndscl\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9 \u00bb LandEscape Graphics\nMacOSX Leopard \u306e\u30e6\u30fc\u30b6\u4f5c\u6210\u30fb\u524a\u9664\u306f dscl \u30b3\u30de\u30f3\u30c9 - \u306d\u3082\u3077\u3089\u3059\n\n\n\u516c\u5f0f\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3001\u4ee5\u4e0b\u306e\u30d6\u30ed\u30b0\u8a18\u4e8b\u3092\u53c2\u8003\u306b\u307e\u3068\u3081\u307e\u3057\u305f\u3002\nrbenv\u3092\u4f7f\u7528\u3057\u305f\u308a\u3001Ruby 2.0\u3092\u4f7f\u3063\u305f\u308a\u3001SSH\u3068HTTP\u306e\u3069\u3061\u3089\u3067\u3082clone, push\u7b49\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306e\u306b\u304b\u306a\u308a\u82e6\u52b4\u3057\u307e\u3057\u305f\u3002\u3002\n\n- [gitlabhq/doc/install/installation.md at 5-0-stable \u00b7 gitlabhq/gitlabhq \u00b7 GitHub](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md)\n- [Installing Gitlab on OS X](http://thoughtpointers.net/2012/10/07/installing-gitlab-on-os-x/)\n\n\n\u4ee5\u4e0b\u3001\u30d7\u30ed\u30f3\u30d7\u30c8\u306f\u57fa\u672c\u3001admin\u6a29\u9650\u306e\u30e6\u30fc\u30b6\u30fc\u3067\u306e\u5b9f\u884c\u3067\u3059\u3002\n\u4fbf\u5b9c\u4e0a\u3001\u30de\u30b7\u30f3\u540d\u3092`gitlab_server.local`\u3068\u3057\u307e\u3059\u3002\n\n## \u6e96\u5099\n\n\u5f8c\u3067`git`\u30e6\u30fc\u30b6\u30fc\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u3001`/home`\u4ee5\u4e0b\u3092\u7de8\u96c6\u53ef\u80fd\u306b\u3059\u308b\u3002\n\n```\n$ sudo vi /etc/auto_master\n```\n\n`/home`\u306e\u884c\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\u3002\n\n```/etc/auto_master\n#\n# Automounter master map\n#\n\n+auto_master            # Use directory service\n/net                    -hosts          -nobrowse,hidefromfinder,nosuid\n# /home                 auto_home       -nobrowse,hidefromfinder\n/Network/Servers        -fstab\n/-                      -static\n```\n\n\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u308b\u305f\u3081\u3001\u30de\u30b7\u30f3\u3092\u518d\u8d77\u52d5\u3059\u308b\u3002\n\n## Homebrew\n\n\u4f55\u306f\u306a\u304f\u3068\u3082\u307e\u305a\u306fHomebrew\u3002\n\n```\n$ ruby -e \"$(curl -fsSL https://raw.github.com/mxcl/homebrew/go)\"\n```\n\n## \u5404\u7a2e\u30d1\u30c3\u30b1\u30fc\u30b8\n\n```\n$ brew install git\n\n$ brew install redis\n# \u81ea\u52d5\u3067\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3059\u308b\u3088\u3046\u306b\u3059\u308b\n$ launchctl load ~/Library/LaunchAgents/homebrew.mxcl.redis.plist\n\n# gem charlock_holmes \u5468\u308a\u3067\u5fc5\u8981\n$ brew install icu4c\n$ brew link icu4c --force\n\n# python2\u304c\u306a\u3044\u3068\u52d5\u304b\u306a\u3044\n$ sudo ln -s /usr/bin/python /usr/bin/python2\n```\n\n## \u30e6\u30fc\u30b6\u30fc\n\n```\n# \u7a7a\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7ID\u3092\u8abf\u3079\u308b\u3002200\u756a\u53f0\u3042\u305f\u308a\u3092\u4f7f\u7528\u3059\u308b\u3002\n$ sudo dscl . -list /Groups PrimaryGroupID | cut -c 32-38 | sort -rn\n# \u7a7a\u3044\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fcID\u3092\u8abf\u3079\u308b\u3002200\u756a\u53f0\u3042\u305f\u308a\u3092\u4f7f\u7528\u3059\u308b\u3002\n$ sudo dscl . -list /Users UniqueID | cut -c 23-28 | sort -rn\n\n$ sudo dscl . -create /Groups/git PrimaryGroupID \uff1c\u7a7a\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7ID\uff1e\n\n$ sudo dscl . -create /Users/git UniqueID \uff1c\u7a7a\u3044\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fcID\uff1e\n$ sudo dscl . -create /Users/git PrimaryGroupID \uff1c\u7a7a\u3044\u3066\u3044\u308b\u30b0\u30eb\u30fc\u30d7ID\uff1e\n$ sudo dscl . -create /Users/git UserShell /bin/bash\n$ sudo dscl . -create /Users/git NFSHomeDirectory /home/git\n$ sudo dscl . -create /Users/git Password \"*\"\n\n$ sudo mkdir /home/git\n$ sudo chown -R git:git /home/git\n$ sudo chmod 755 /home/git\n```\n\n```\n$ sudo -i -u git\n$ cd\n\n# SSH\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u6642\u3092\u8003\u616e\n$ vi .bash_profile\n$ vi .bashrc\n\n$ exit\n```\n\n```/home/git/.bash_profile\nif [ -f ~/.bashrc ]; then\n    . ~/.bashrc\nfi\n```\n\n```/home/git/.bashrc\nexport PATH=/usr/local/bin:$PATH\nif which rbenv > /dev/null; then eval \"$(rbenv init -)\"; fi\n```\n\n## git\n\n```\n$ sudo -i -u git\n\n$ git config --global user.name \"GitLab\"\n$ git config --global user.email \"gitlab@localhost\"\n\n$ exit\n```\n\n## Ruby\n\n```\n$ echo 'if which rbenv > /dev/null; then eval \"$(rbenv init -)\"; fi' > ~/.bashrc\n$ . ~/.bashrc\n\n$ brew install rbenv ruby-build\n\n# for admin user\n\n$ rbenv install 2.0.0-p0\n$ rbenv global 2.0.0-p0\n$ ruby -v\n# -> ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.3.0]\n\n$ gem install bundler\n$ rbenv rehash\n\n# for git user\n\n$ sudo -i -u git\n\n$ rbenv install 2.0.0-p0\n$ rbenv global 2.0.0-p0\n$ rbenv rehash\n\n$ ruby -v\n# -> ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-darwin12.3.0]\n\n$ exit\n```\n\n## SSH\n\n\u3053\u306e\u8fba\u308a\u306f\u9069\u5b9c\u8a2d\u5b9a\u3059\u308b\u3002\n\n```\n$ sudo /etc/sshd_config\n```\n\n```/etc/sshd_config\nPermitRootLogin no\n```\n\n## GitLab shell\n\n```\n$ sudo -i -u git\n$ cd\n\n$ git clone https://github.com/gitlabhq/gitlab-shell.git\n$ cd gitlab-shell\n\n# \u7279\u5b9a\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\n$ git checkout v1.1.0\n$ git checkout -b v1.1.0\n\n# gitlab_url\u3092\"http://gitlab_server.local/\"\u306b\u5909\u66f4\n$ cp config.yml.example config.yml\n$ vim config.yml\n\n# \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u5b9f\u884c\n$ ./bin/install\n\n$ exit\n```\n\n## \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n```\n$ brew install mysql\n# \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\n$ launchctl load ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist\n\n# \u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306e\u8a2d\u5b9a\u3001\u4ed6\u30db\u30b9\u30c8\u304b\u3089\u306e\u30eb\u30fc\u30c8\u30ed\u30b0\u30a4\u30f3\u306e\u7981\u6b62\u3001\u30a2\u30ce\u30cb\u30de\u30b9\u30e6\u30fc\u30b6\u30fc\u3092\u524a\u9664\u3001\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u524a\u9664\u3002\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u76f4\u5f8c\u3067\u521d\u671f\u30eb\u30fc\u30c8\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u7a7a\u306e\u305f\u3081\u3001\u6700\u521d\u306e\u30d7\u30ed\u30f3\u30d7\u30c8\u306fEnter\u3092\u62bc\u3059\u3002\n$ cd\n$ mysql_secure_installation\n\n# MySQL\u306b\u30ed\u30b0\u30a4\u30f3\n$ mysql -u root -p\n\n# gitlab\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\uff08$password\u306b\u30d1\u30b9\u30ef\u30fc\u30c9\uff09\nmysql> CREATE USER 'gitlab'@'localhost' IDENTIFIED BY '$password';\n\n# \u30d7\u30ed\u30c0\u30af\u30b7\u30e7\u30f3\u7528\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\nmysql> CREATE DATABASE IF NOT EXISTS `gitlabhq_production` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`;\n\n# gitlab\u30e6\u30fc\u30b6\u30fc\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\nmysql> GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER ON `gitlabhq_production`.* TO 'gitlab'@'localhost';\n\n# \u30ed\u30b0\u30a2\u30a6\u30c8\nmysql> quit\n\n# gitlab\u30e6\u30fc\u30b6\u30fc\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u63a5\u7d9a\u3057\u3066\u307f\u308b\n$ sudo -u git -H mysql -u gitlab -p -D gitlabhq_production\n```\n\n## GitLab\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u5f15\u3063\u5f35\u3063\u3066\u304f\u308b\u3002\n\n```\n$ sudo -i -u git\n$ cd\n\n$ git clone https://github.com/gitlabhq/gitlabhq.git gitlab\n\n# 5.0\u7528\u30d6\u30e9\u30f3\u30c1\u3092\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\n$ cd gitlab\n$ git checkout 5-0-stable\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\n$ cp config/gitlab.yml.example config/gitlab.yml\n$ vi config/gitlab.yml\n\n# git\u30e6\u30fc\u30b6\u30fc\u3067\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3067\u304d\u3066\u3044\u308c\u3070\u554f\u984c\u306a\u3044\u306f\u305a\u3060\u304c\u3001\n# log, tmp\u306e\u5404\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u6240\u6709\u8005\u30fb\u6240\u6709\u6a29\u3092\u30c1\u30a7\u30c3\u30af\n$ chown -R git log/\n$ chown -R git tmp/\n$ chmod -R u+rwX  log/\n$ chmod -R u+rwX  tmp/\n\n# Create directory for satellites\n$ mkdir ~/gitlab-satellites\n\n# \u30d7\u30ed\u30bb\u30b9ID\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n$ mkdir tmp/pids/\n$ chmod -R u+rwX  tmp/pids/\n\n# Unicorn\u7528\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u30b3\u30d4\u30fc\n$ cp config/unicorn.rb.example config/unicorn.rb\n```\n\n```/home/git/gitlab/config/gitlab.yml\n\u2026\n\ngitlab:\n  host: gitlab_server.local\n\n...\n\n# Homebrew\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fgit\u3092\u4f7f\u7528\u3059\u308b\ngit:\n  bin_path: /usr/local/bin/git\n\n\u2026\n```\n\n### MySQL\u306e\u8a2d\u5b9a\n\n```\n# Mysql\n$ cp config/database.yml.mysql config/database.yml\n# \u30e6\u30fc\u30b6\u30fc\u540d\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5909\u66f4\u3059\u308b\n$ vi config/database.yml\n```\n\n```\n# git\u30e6\u30fc\u30b6\u30fc\u3092\u7d42\u3048\u308b\n$ exit\n```\n\n### Gem\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ cd ~git/gitlab\n\n$ gem install charlock_holmes --version '0.6.9'\n$ rbenv rehash\n\n# For MySQL (note, the option says \"without\")\n$ sudo -u git -H bundle install --deployment --without development test postgres\n```\n\n### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n```\n$ sudo -u git -H bundle exec rake gitlab:setup RAILS_ENV=production\n```\n\n### \u8d77\u52d5\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u7528\u610f\n\n```\n$ sudo curl --output /etc/init.d/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/master/init.d/gitlab\n$ sudo chmod +x /etc/init.d/gitlab\n```\n\n### \u8a2d\u5b9a\u72b6\u6cc1\u306e\u78ba\u8a8d\n\n```\n$ sudo -u git -H bundle exec rake gitlab:env:info RAILS_ENV=production\n$ sudo -u git -H bundle exec rake gitlab:check RAILS_ENV=production\n```\n\n### Assets Pipeline\n```\n$ sudo -u git -H bundle exec rake assets:precompile RAILS_ENV=production\n```\n\n### \u30a2\u30d7\u30ea\u3092\u8d77\u52d5\u3059\u308b\n\n```\n$ sudo /etc/init.d/gitlab start\n$ sudo /etc/init.d/gitlab status\n# -> Gitlab service / Unicorn with PID <\u30d7\u30ed\u30bb\u30b9ID> is running.\n     Gitlab service / Sidekiq with PID <\u30d7\u30ed\u30bb\u30b9ID> is running.\n```\n\n## Nginx\n\n\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066nginx\u3092\u4f7f\u7528\u3002\n\n```\n$ brew install nginx\n$ vi /usr/local/etc/nginx/nginx.conf\n```\n\n```/usr/local/etc/nginx/nginx.conf\n#user  nobody;\nworker_processes  1;\n\n#error_log  logs/error.log;\n#error_log  logs/error.log  notice;\n#error_log  logs/error.log  info;\n\n#pid        logs/nginx.pid;\n\n\nevents {\n    worker_connections  1024;\n}\n\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n\n    #log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n    #                  '$status $body_bytes_sent \"$http_referer\" '\n    #                  '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    #access_log  logs/access.log  main;\n\n    sendfile        on;\n    #tcp_nopush     on;\n\n    #keepalive_timeout  0;\n    keepalive_timeout  65;\n\n    #gzip  on;\n    include /usr/local/etc/nginx/sites-enabled/*; #\u8ffd\u52a0\u3059\u308b\n\n    #\u3053\u308c\u3088\u308a\u4ee5\u4e0b\u306f\u3070\u3063\u3055\u308a\u524a\u9664\n\n}\n```\n\n```\n$ mkdir /usr/local/etc/nginx/sites-available\n$ mkdir /usr/local/etc/nginx/sites-enabled\n$ curl --output /usr/local/etc/nginx/sites-available/gitlab https://raw.github.com/gitlabhq/gitlab-recipes/master/nginx/gitlab\n$ ln -s /usr/local/etc/nginx/sites-available/gitlab /usr/local/etc/nginx/sites-enabled/gitlab\n$ sudo mkdir /var/log/nginx\n\n# YOUR_SERVER_IP\u3068YOUR_SERVER_FQDN\u3092\u5909\u66f4\u3059\u308b\u3002\n# YOUR_SERVER_IP\u306f\u6d88\u3057\u3066\u30dd\u30fc\u30c8\u756a\u53f7\u306e\u307f\u3067\u3082\u554f\u984c\u306a\u3044\u3002\n# YOUR_SERVER_FQDN\u3092gitlab_server.local\u306b\u5909\u66f4\u3059\u308b\u3002\n$ vi /usr/local/etc/nginx/sites-available/gitlab\n\n# 80\u756a\u30dd\u30fc\u30c8\u3067nginx\u3092\u8d77\u52d5\u3059\u308b\u305f\u3081\u306b\u3001root\u30e6\u30fc\u30b6\u30fc\u3067\u5b9f\u884c\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n$ sudo cp /usr/local/opt/nginx/homebrew.mxcl.nginx.plist /Library/LaunchDaemons\n# UserName\u306e\u7b87\u6240\u3092\u524a\u9664\u3059\u308b\n$ sudo vi /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n$ sudo launchctl load /Library/LaunchDaemons/homebrew.mxcl.nginx.plist\n```\n\n## \u7d50\u679c\n\n\u4ee5\u4e0a\u3067\u3001\u30ed\u30fc\u30ab\u30eb\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5185\u306eMac, \u307e\u305fiTunes(Bonjour for Windows)\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306eWindows\u30de\u30b7\u30f3\u304b\u3089\u3082\u3001http://gitlab_server.local\u3067GitLab\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u306f\u305a\u3067\u3059\u3002\n\n## \u53c2\u8003\u30ea\u30f3\u30af\n\n- [gitlabhq/gitlabhq \u00b7 GitHub](https://github.com/gitlabhq/gitlabhq)\n- [gitlabhq/doc/install/installation.md at 5-0-stable \u00b7 gitlabhq/gitlabhq \u00b7 GitHub](https://github.com/gitlabhq/gitlabhq/blob/5-0-stable/doc/install/installation.md)\n- [Error 500 on root... \u00b7 Issue #679 \u00b7 gitlabhq/gitlabhq](https://github.com/gitlabhq/gitlabhq/issues/679)\n- [Grit::GitRuby::Internal::PackFormatError \u00b7 Issue #2789 \u00b7 gitlabhq/gitlabhq](https://github.com/gitlabhq/gitlabhq/issues/2789#issuecomment-15174961)\n- [Hi I've got a issue in the Ruby 2.0 p0 \u00b7 Issue #3080 \u00b7 gitlabhq/gitlabhq](https://github.com/gitlabhq/gitlabhq/issues/3080)\n- [Installing Gitlab on OS X](http://thoughtpointers.net/2012/10/07/installing-gitlab-on-os-x/)\n- [osx - How can I use the /home directory on Mac OS X - Stack Overflow](http://stackoverflow.com/questions/1362703/how-can-i-use-the-home-directory-on-mac-os-x/1499982#1499982)\n- [dscl\u30b3\u30de\u30f3\u30c9\u306e\u4f7f\u3044\u65b9 \u00bb LandEscape Graphics](http://www.yokada.net/blog/213#h3-4)\n- [MacOSX Leopard \u306e\u30e6\u30fc\u30b6\u4f5c\u6210\u30fb\u524a\u9664\u306f dscl \u30b3\u30de\u30f3\u30c9 - \u306d\u3082\u3077\u3089\u3059](http://nemoplus.hateblo.jp/entry/20090120/1232466123)\n", "tags": ["Git", "OSX", "GitLab", "Mac"]}