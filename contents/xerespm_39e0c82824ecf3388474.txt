{"context": "Ubuntu \u3060\u3068 hosts \u3063\u3066\u5927\u4f53\u3053\u3046\u306a\u3063\u3066\u308b\u3068\u601d\u3046\u3093\u3067\u3059\u3051\u3069\u2026\n\n/etc/hosts\n127.0.0.1       localhost\n<external IP>   <FQDN> <hostname>\n\n# The following lines are desirable for IPv6 capable hosts\n::1             localhost ip6-localhost ip6-loopback\nff02::1         ip6-allnodes\nff02::2         ip6-allrouters\n\n\nMongoDB \u3067\u3053\u3093\u306a\u611f\u3058\u306e\u8a2d\u5b9a\u304c\u3042\u3063\u305f\u3068\u3059\u308b\u3058\u3083\u3093\u3002\n\n/etc/mongod.conf\nstorage:\n  dbPath: /var/lib/mongodb\n  journal:\n    enabled: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n\nreplication:\n    replSetName:  \"001-rs\"\n\n\n\u3067\u3001\u9069\u5f53\u306b\u52d5\u304b\u3059\u3068\u3053\u3046\u306a\u308b\u308f\u3051\u3067\u3059\u3088\u3002\n$ mongo\nMongoDB shell version: 3.2.6\nconnecting to: test\n001-rs:PRIMARY> rs.initiate()\n> rs.initiate()\n{\n        \"info2\" : \"no configuration specified. Using a default configuration for the set\",\n        \"me\" : \"<FQDN>:27017\",\n        \"ok\" : 0,\n        \"errmsg\" : \"No host described in new configuration 1 for replica set 001-rs maps to this node\",\n        \"code\" : 93\n}\n\n\u4ed5\u65b9\u304c\u306a\u3044\u306e\u3067\u4e00\u6642\u7684\u306b /etc/hosts \u3092\u5f04\u3063\u3066\n\n/etc/hosts\n127.0.0.1       localhost <FQDN>\n\n# The following lines are desirable for IPv6 capable hosts\n::1             localhost ip6-localhost ip6-loopback\nff02::1         ip6-allnodes\nff02::2         ip6-allrouters\n\n\n\u305d\u3046\u3059\u308b\u3068 rs.initiate() \u304c\u6210\u529f\u3059\u308b\u306e\u3067\u3001\u305d\u306e\u5f8c replica member \u306e\n\u30db\u30b9\u30c8\u540d\u3092\u5909\u66f4\u3057\u3066\u308b\u306e\u306d\u3002\n$ mongo\nMongoDB shell version: 3.2.6\nconnecting to: test\n001-rs:PRIMARY> rs.initiate()\n> rs.initiate()\n{\n        \"info2\" : \"no configuration specified. Using a default configuration for the set\",\n        \"me\" : \"<FQDN>:27017\",\n        \"ok\" : 1\n}\n001-rs:PRIMARY> cfg = rs.conf()\n001-rs:PRIMARY> cfg.members[0].host = '127.0.0.1:27017'\n001-rs:PRIMARY> rs.reconfig(cfg)\n\n\u3067\u3001/etc/hosts \u3092\u623b\u305b\u3070\u5b8c\u4e86\u3068\u3002\n\u3053\u308c\u3001\u7d76\u5bfe\u3053\u3093\u306a\u30af\u30bd\u307f\u305f\u3044\u306a Workaround \u3058\u3083\u306a\u304f\u3066\u6b63\u3057\u3044\u8a2d\u5b9a\u65b9\u6cd5\u304c\n\u3042\u308b\u3093\u3060\u3068\u601d\u3046\u3093\u3060\u3051\u3069\u3001\u5468\u308a\u306b MongoDB \u5206\u304b\u308b\u4eba\u3044\u306a\u304f\u3066\u805e\u3051\u306a\u3044\u2026\u3002\n\u8ab0\u304b\u6b63\u3057\u3044\u3084\u308a\u65b9\u3092\u6559\u3048\u3066\u307b\u3057\u3044\u3002\nUbuntu \u3060\u3068 hosts \u3063\u3066\u5927\u4f53\u3053\u3046\u306a\u3063\u3066\u308b\u3068\u601d\u3046\u3093\u3067\u3059\u3051\u3069\u2026\n\n```hosts:/etc/hosts\n127.0.0.1       localhost\n<external IP>   <FQDN> <hostname>\n\n# The following lines are desirable for IPv6 capable hosts\n::1             localhost ip6-localhost ip6-loopback\nff02::1         ip6-allnodes\nff02::2         ip6-allrouters\n```\n\nMongoDB \u3067\u3053\u3093\u306a\u611f\u3058\u306e\u8a2d\u5b9a\u304c\u3042\u3063\u305f\u3068\u3059\u308b\u3058\u3083\u3093\u3002\n\n```yaml:/etc/mongod.conf\nstorage:\n  dbPath: /var/lib/mongodb\n  journal:\n    enabled: true\n\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /var/log/mongodb/mongod.log\n\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n\nreplication:\n    replSetName:  \"001-rs\"\n```\n\n\u3067\u3001\u9069\u5f53\u306b\u52d5\u304b\u3059\u3068\u3053\u3046\u306a\u308b\u308f\u3051\u3067\u3059\u3088\u3002\n\n```console\n$ mongo\nMongoDB shell version: 3.2.6\nconnecting to: test\n001-rs:PRIMARY> rs.initiate()\n> rs.initiate()\n{\n        \"info2\" : \"no configuration specified. Using a default configuration for the set\",\n        \"me\" : \"<FQDN>:27017\",\n        \"ok\" : 0,\n        \"errmsg\" : \"No host described in new configuration 1 for replica set 001-rs maps to this node\",\n        \"code\" : 93\n}\n```\n\n\u4ed5\u65b9\u304c\u306a\u3044\u306e\u3067\u4e00\u6642\u7684\u306b `/etc/hosts` \u3092\u5f04\u3063\u3066\n\n```hosts:/etc/hosts\n127.0.0.1       localhost <FQDN>\n\n# The following lines are desirable for IPv6 capable hosts\n::1             localhost ip6-localhost ip6-loopback\nff02::1         ip6-allnodes\nff02::2         ip6-allrouters\n```\n\n\u305d\u3046\u3059\u308b\u3068 `rs.initiate()` \u304c\u6210\u529f\u3059\u308b\u306e\u3067\u3001\u305d\u306e\u5f8c replica member \u306e\n\u30db\u30b9\u30c8\u540d\u3092\u5909\u66f4\u3057\u3066\u308b\u306e\u306d\u3002\n\n```console\n$ mongo\nMongoDB shell version: 3.2.6\nconnecting to: test\n001-rs:PRIMARY> rs.initiate()\n> rs.initiate()\n{\n        \"info2\" : \"no configuration specified. Using a default configuration for the set\",\n        \"me\" : \"<FQDN>:27017\",\n        \"ok\" : 1\n}\n001-rs:PRIMARY> cfg = rs.conf()\n001-rs:PRIMARY> cfg.members[0].host = '127.0.0.1:27017'\n001-rs:PRIMARY> rs.reconfig(cfg)\n```\n\n\u3067\u3001`/etc/hosts` \u3092\u623b\u305b\u3070\u5b8c\u4e86\u3068\u3002\n\n\u3053\u308c\u3001\u7d76\u5bfe\u3053\u3093\u306a\u30af\u30bd\u307f\u305f\u3044\u306a Workaround \u3058\u3083\u306a\u304f\u3066\u6b63\u3057\u3044\u8a2d\u5b9a\u65b9\u6cd5\u304c\n\u3042\u308b\u3093\u3060\u3068\u601d\u3046\u3093\u3060\u3051\u3069\u3001\u5468\u308a\u306b MongoDB \u5206\u304b\u308b\u4eba\u3044\u306a\u304f\u3066\u805e\u3051\u306a\u3044\u2026\u3002\n\n\u8ab0\u304b\u6b63\u3057\u3044\u3084\u308a\u65b9\u3092\u6559\u3048\u3066\u307b\u3057\u3044\u3002\n", "tags": ["Ubuntu", "ubuntu16.04", "MongoDB"]}