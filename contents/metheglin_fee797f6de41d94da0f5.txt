{"context": " More than 1 year has passed since last update.\n\nWhy USVN?\n\nGit\u304c\u4e0d\u5f97\u610f\u306a\u70b9\nhttps://help.github.com/articles/what-is-my-disk-quota\n* 1\u30ea\u30dd\u30b8\u30c8\u30ea1GB\u4ee5\u5185\u30011\u30d5\u30a1\u30a4\u30eb100MB\u4ee5\u5185\u3067\u7ba1\u7406\u3055\u308c\u308b\u3053\u3068\u304c\u63a8\u5968\n* DB dump file, binary\u30d5\u30a1\u30a4\u30eb, \u5727\u7e2e\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb,\u306a\u3069\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u7ba1\u7406\u306b\u9069\u3055\u306a\u3044\n\nSVN\u306e\u5229\u70b9\nhttp://japan.internet.com/webtech/20130620/8.html\n* \u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5de8\u5927\u5316\u3057\u3059\u304e\u3066\u4f7f\u3048\u306a\u304f\u306a\u3063\u305f\u3068\u3044\u3046\u4e8b\u4f8b\u304c\u306a\u3044\n* SVN\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u7ba1\u7406\u3067\u304d\u308b\u305f\u3081Git\u3088\u308a\u3082\u78ba\u5b9f\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\u3092\u691c\u51fa\u3067\u304d\u308b\n\nGoal\n* USVN\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n\nMilestone\n* Apache\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n* mySQL\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n* PHP\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n  * http://qiita.com/metheglin/items/fc3345723537ef400cb7\n  * PDO mySQL\u30c9\u30e9\u30a4\u30d0\u307e\u305f\u306fmysqli\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\n* SVN\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n  * http://qiita.com/metheglin/items/4193c6c0b2fe82d730e1\n  * apache\u306emodules\u4ee5\u4e0b\u306bmod_dav_svn.so, mod_authz_svn.so\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\n* USVN\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306b\u914d\u7f6e\u3059\u308b\n* USVN\u306e\u516c\u958b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea(usvn/public)\u306b\u753b\u9762\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u6700\u4f4e\u9650\u306eApache\u8a2d\u5b9a\u3092\u3044\u308c\u308b\n* USVN\u306e\u521d\u671f\u8a2d\u5b9a(install.php)\u6642\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u5909\u66f4\u3092\u304a\u3053\u306a\u3046\n  * \u305d\u308c\u4ee5\u5916\u306e\u5185\u5bb9\u3092install.php\u3092\u901a\u3055\u305a\u306b\u4fee\u6b63\u3059\u308b\u3068\u30a2\u30d7\u30ea\u304c\u58ca\u308c\u308b\u306e\u3067\u3055\u308f\u3089\u306a\u3044\u3053\u3068\n* mySQL\u63a5\u7d9a\u306e\u554f\u984c\u3092\u4fee\u6b63\u3057\u3064\u3064install.php\u306e\u30a6\u30a3\u30b6\u30fc\u30c9\u3092\u5b8c\u4e86\u3059\u308b\n* \u518d\u5ea6Apache\u306e\u8a2d\u5b9a\u3092\u3044\u308c\u3066apache\u518d\u8d77\u52d5\n\n\nPreparation\n$> uname -a\nLinux *** 2.6.32-431.3.1.el6.x86_64 #1 SMP Fri Jan 3 21:39:27 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n\n$> cat /etc/issue\nCentOS release 6.5 (Final)\nKernel \\r on an \\m\n\n$> /usr/local/apache/bin/apachectl -V | head -n 1\nServer version: Apache/2.4.7 (Unix)\n\n$> /usr/local/php/bin/php -v\nPHP 5.5.4 (cli) (built: Mar  1 2014 20:26:49)\nCopyright (c) 1997-2013 The PHP Group\nZend Engine v2.5.0, Copyright (c) 1998-2013 Zend Technologies\n\n$> /usr/local/mysql/bin/mysql --version\n/usr/local/mysql/bin/mysql  Ver 14.14 Distrib 5.6.16, for linux-glibc2.5 (x86_64) using  EditLine wrapper\n\nmysql> select version();\n+-----------+\n| version() |\n+-----------+\n| 5.6.16    |\n+-----------+\n\n$> ls -l /usr/local/apache/modules/mod_dav_svn.so\n-rwxr-xr-x 1 root root 852576  3\u6708  1 18:51 2014 /usr/local/apache/modules/mod_dav_svn.so\n$> ls -l /usr/local/apache/modules/mod_authz_svn.so\n-rwxr-xr-x 1 root root 53190  3\u6708  1 18:51 2014 /usr/local/apache/modules/mod_authz_svn.so\n\n\n\nManual\n\nDownload / Deploy\ncd /usr/local/src\nwget \"https://github.com/usvn/usvn/archive/1.0.7.tar.gz\" -O usvn-1.0.7.tar.gz\ntar zxvf usvn-1.0.7.tar.gz\nmv -i usvn-1.0.7 /usr/local/services/\n\n## \n## Make symbolic link\n## \ncd /usr/local/services\nln -s usvn-1.0.7 usvn\n\n\nApache Setting\n\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u307e\u305f\u306f\u8ffd\u52a0\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule dav_module modules/mod_dav.so\nLoadModule dav_fs_module modules/mod_dav_fs.so\nLoadModule dav_svn_module modules/mod_dav_svn.so\nLoadModule authz_svn_module modules/mod_authz_svn.so\n\nVirtualHost\u8a2d\u5b9a\n<VirtualHost *:80>\n   ServerName {yourhost}\n   DocumentRoot /usr/local/services/usvn/public\n   Alias /usvn /usr/local/services/usvn/public\n\n   AddType application/x-httpd-php .php\n   DirectoryIndex index.php index.html\n\n   <Directory /usr/local/services/usvn/public>\n      # This relaxes Apache security settings.\n      AllowOverride all\n      # MultiViews must be turned off.\n      Options -MultiViews\n      Order Deny,Allow\n      Allow from all\n      Require all granted\n   </Directory>\n\n   CustomLog /var/log/httpd/usvn.access_log combined\n   ErrorLog  /var/log/httpd/usvn.error_log\n</VirtualHost>\n\n\u3053\u306e\u8a2d\u5b9a\u304c\u3046\u307e\u304f\u3044\u3051\u3070\u3001/install.php\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\nCheck Permissions\ncd /usr/local/services/usvn\nls -l config/config.ini\n  # Apache\u306e\u30a2\u30af\u30bb\u30b9\u30e6\u30fc\u30b6\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u5fc5\u8981\nls -ld public/\n  # .htaccess\u3092\u4f5c\u6210\u3059\u308b\u6a29\u9650\u304c\u5fc5\u8981\n\n\n\nUSVN Install\n* http://yourhost/install.php\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30a6\u30a3\u30b6\u30fc\u30c9\u3092\u958b\u59cb\u3059\u308b\n* mySQL5.6\uff08tarball\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff09\u3067\u5b9f\u65bd\u3057\u305f\u3068\u3053\u308d\u9014\u4e2d\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3001Fix mySQL Problem\u306e\u624b\u9806\u3067\u4fee\u6b63\u3059\u308b\n* DB\u306froot\u30e6\u30fc\u30b6\u3092\u6307\u5b9a\u3057\u3066\u4f5c\u6210\u3059\u308b\n* {USVN\u30d1\u30b9}/svn\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001svn\u30d5\u30a1\u30a4\u30eb\u304c\u76f4\u63a5\u95b2\u89a7\u3067\u304d\u3001\n\n\nFix mySQL Problem\n## \n## \u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u3042\u3068\u306bauto increment\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\u3001SQL\u30a8\u30e9\u30fc\u306b\u306a\u308b\n## \u3053\u308c\u3092\u4fee\u6b63\u3059\u308b\u305f\u3081\u3001auto increment\u6307\u5b9a\u3057\u3066\u3044\u308balter table\u30d6\u30ed\u30c3\u30af\u3092foreign key\u6307\u5b9a\u3059\u308b\u30d6\u30ed\u30c3\u30af\u306e\u524d\u306b\u914d\u7f6e\u3059\u308b\n## \ncd /usr/local/services/usvn/\nls -l  app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\ncp -ip app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\ndiff   app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\n\nvi app/install/sql/mysql.sql\n  # \u4ee5\u4e0bdiff\u3092\u53c2\u8003\n\ndiff app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\n127,131d126\n< ALTER TABLE `usvn_groups` CHANGE `groups_id` `groups_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n< ALTER TABLE `usvn_projects` CHANGE `projects_id` `projects_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n< ALTER TABLE `usvn_users` CHANGE `users_id` `users_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n< ALTER TABLE `usvn_files_rights` CHANGE `files_rights_id` `files_rights_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n<\n158a154,157\n> ALTER TABLE `usvn_groups` CHANGE `groups_id` `groups_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n> ALTER TABLE `usvn_projects` CHANGE `projects_id` `projects_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n> ALTER TABLE `usvn_users` CHANGE `users_id` `users_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n> ALTER TABLE `usvn_files_rights` CHANGE `files_rights_id` `files_rights_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n\n## \n## pdo_mysql\u306e\u30c7\u30d5\u30a9\u30eb\u30c8unix socket\u30d1\u30b9\u304c\u6574\u5408\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u4fee\u6b63\u3059\u308b\n## Unix\u306emySQL\u306f\u3001DB\u30b5\u30fc\u30d0\u3068DB\u63a5\u7d9a\u5143\u30b5\u30fc\u30d0\u304c\u540c\u4e00\u30db\u30b9\u30c8\u3067\u3042\u308b\u5834\u5408\u3001mysql.sock\u30d5\u30a1\u30a4\u30eb\u3092\u4ecb\u3057\u3066\u901a\u4fe1\u3059\u308b\u3089\u3057\u3044\n## mysql.sock\u306f/etc/my.cnf\u3084{mysql install\u30d1\u30b9}/my.cnf\u306a\u3069\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u3067\u3001mysql\u8d77\u52d5\u6642\u306b\u3069\u3053\u306b\u4f5c\u6210\u3059\u308b\u304b\u3092\u6307\u5b9a\u3067\u304d\u308b\n## \n\n## root user\n\ngrep 'mysql.sock' /etc/my.cnf\n  # socket=/var/lib/mysql/mysql.sock\n  # socket=/var/lib/mysql/mysql.sock\nls -l /var/lib/mysql/mysql.sock\n  # \u5b58\u5728\u3092\u78ba\u8a8d\n\nvi /usr/local/php/lib/php.ini\n  # mysql\u30b5\u30fc\u30d0\u304c\u304a\u3044\u3066\u3044\u308bmysql.sock\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3088\u3046\u306bpdo_mysql.default_socket\u3092\u5909\u66f4\u3059\u308b\n  # php.ini\u306e\u30d1\u30b9\u306f\u3001php -i | grep 'php.ini'\u304b\u3001phpinfo()\u3092\u753b\u9762\u3067\u8868\u793a\u3055\u305b\u3066\u78ba\u8a8d\u3059\u308b\ngrep pdo_mysql.default_socket /usr/local/php/lib/php.ini\n  # pdo_mysql.default_socket=/var/lib/mysql/mysql.sock\n\n/usr/local/apache/bin/apachectl graceful\n\n\n\nApache Setting Again\nUSVN\u306e\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u305f\u901a\u308a\u306bVirtualHost\u306bLocation\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u8a18\u8f09\u3059\u308b\nUSVN\u306f\u3001{USVN URL}/svn\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\n\u305d\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3084\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5236\u5fa1\u3059\u308b\u8a2d\u5b9a\n\n## VirtualHost\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u5185\u306b\u8a18\u8f09\n <Location /svn/>\n      ErrorDocument 404 default\n      DAV svn\n      Require valid-user\n      SVNParentPath /usr/local/services/usvn/files/svn\n      SVNListParentPath off\n      AuthType Basic\n      AuthName \"Reivo USVN\"\n      AuthUserFile /usr/local/services/usvn/files/htpasswd\n      AuthzSVNAccessFile /usr/local/services/usvn/files/authz\n  </Location>\n\n/usr/local/apache/bin/apachectl graceful\n\n\nOthers\n* USVN\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092SSL\u3067\u9632\u5fa1\u3059\u308b\u5834\u5408\n  * config/config.ini\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306bhttps\u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u3042\u308a\n  * subversion.url = \"https://yourhost.com/svn/\"\n\n\nReferences\n\nhttps://github.com/usvn/usvn/wiki/Installation\n\n# Why USVN?\n\n### Git\u304c\u4e0d\u5f97\u610f\u306a\u70b9\nhttps://help.github.com/articles/what-is-my-disk-quota\n* 1\u30ea\u30dd\u30b8\u30c8\u30ea1GB\u4ee5\u5185\u30011\u30d5\u30a1\u30a4\u30eb100MB\u4ee5\u5185\u3067\u7ba1\u7406\u3055\u308c\u308b\u3053\u3068\u304c\u63a8\u5968\n* DB dump file, binary\u30d5\u30a1\u30a4\u30eb, \u5727\u7e2e\u3055\u308c\u305f\u30d5\u30a1\u30a4\u30eb,\u306a\u3069\u306e\u30d5\u30a1\u30a4\u30eb\u306e\u7ba1\u7406\u306b\u9069\u3055\u306a\u3044\n\n### SVN\u306e\u5229\u70b9\nhttp://japan.internet.com/webtech/20130620/8.html\n* \u30ea\u30dd\u30b8\u30c8\u30ea\u304c\u5de8\u5927\u5316\u3057\u3059\u304e\u3066\u4f7f\u3048\u306a\u304f\u306a\u3063\u305f\u3068\u3044\u3046\u4e8b\u4f8b\u304c\u306a\u3044\n* SVN\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3082\u7ba1\u7406\u3067\u304d\u308b\u305f\u3081Git\u3088\u308a\u3082\u78ba\u5b9f\u306b\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\u3092\u691c\u51fa\u3067\u304d\u308b\n\n# Goal\n\n```\n* USVN\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n```\n\n# Milestone\n\n```\n* Apache\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n* mySQL\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n* PHP\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n  * http://qiita.com/metheglin/items/fc3345723537ef400cb7\n  * PDO mySQL\u30c9\u30e9\u30a4\u30d0\u307e\u305f\u306fmysqli\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\n* SVN\u304c\u30bd\u30fc\u30b9\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\n  * http://qiita.com/metheglin/items/4193c6c0b2fe82d730e1\n  * apache\u306emodules\u4ee5\u4e0b\u306bmod_dav_svn.so, mod_authz_svn.so\u30e2\u30b8\u30e5\u30fc\u30eb\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\n* USVN\u306e\u30bd\u30fc\u30b9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306b\u914d\u7f6e\u3059\u308b\n* USVN\u306e\u516c\u958b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea(usvn/public)\u306b\u753b\u9762\u304b\u3089\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u6700\u4f4e\u9650\u306eApache\u8a2d\u5b9a\u3092\u3044\u308c\u308b\n* USVN\u306e\u521d\u671f\u8a2d\u5b9a(install.php)\u6642\u306b\u5fc5\u8981\u306a\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u5909\u66f4\u3092\u304a\u3053\u306a\u3046\n  * \u305d\u308c\u4ee5\u5916\u306e\u5185\u5bb9\u3092install.php\u3092\u901a\u3055\u305a\u306b\u4fee\u6b63\u3059\u308b\u3068\u30a2\u30d7\u30ea\u304c\u58ca\u308c\u308b\u306e\u3067\u3055\u308f\u3089\u306a\u3044\u3053\u3068\n* mySQL\u63a5\u7d9a\u306e\u554f\u984c\u3092\u4fee\u6b63\u3057\u3064\u3064install.php\u306e\u30a6\u30a3\u30b6\u30fc\u30c9\u3092\u5b8c\u4e86\u3059\u308b\n* \u518d\u5ea6Apache\u306e\u8a2d\u5b9a\u3092\u3044\u308c\u3066apache\u518d\u8d77\u52d5\n```\n\n# Preparation\n\n```\n$> uname -a\nLinux *** 2.6.32-431.3.1.el6.x86_64 #1 SMP Fri Jan 3 21:39:27 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n\n$> cat /etc/issue\nCentOS release 6.5 (Final)\nKernel \\r on an \\m\n\n$> /usr/local/apache/bin/apachectl -V | head -n 1\nServer version: Apache/2.4.7 (Unix)\n\n$> /usr/local/php/bin/php -v\nPHP 5.5.4 (cli) (built: Mar  1 2014 20:26:49)\nCopyright (c) 1997-2013 The PHP Group\nZend Engine v2.5.0, Copyright (c) 1998-2013 Zend Technologies\n\n$> /usr/local/mysql/bin/mysql --version\n/usr/local/mysql/bin/mysql  Ver 14.14 Distrib 5.6.16, for linux-glibc2.5 (x86_64) using  EditLine wrapper\n\nmysql> select version();\n+-----------+\n| version() |\n+-----------+\n| 5.6.16    |\n+-----------+\n\n$> ls -l /usr/local/apache/modules/mod_dav_svn.so\n-rwxr-xr-x 1 root root 852576  3\u6708  1 18:51 2014 /usr/local/apache/modules/mod_dav_svn.so\n$> ls -l /usr/local/apache/modules/mod_authz_svn.so\n-rwxr-xr-x 1 root root 53190  3\u6708  1 18:51 2014 /usr/local/apache/modules/mod_authz_svn.so\n\n```\n\n# Manual\n\n## Download / Deploy\n\n```bash\ncd /usr/local/src\nwget \"https://github.com/usvn/usvn/archive/1.0.7.tar.gz\" -O usvn-1.0.7.tar.gz\ntar zxvf usvn-1.0.7.tar.gz\nmv -i usvn-1.0.7 /usr/local/services/\n\n## \n## Make symbolic link\n## \ncd /usr/local/services\nln -s usvn-1.0.7 usvn\n```\n\n## Apache Setting\n\n\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u307e\u305f\u306f\u8ffd\u52a0\n\n```\nLoadModule rewrite_module modules/mod_rewrite.so\nLoadModule dav_module modules/mod_dav.so\nLoadModule dav_fs_module modules/mod_dav_fs.so\nLoadModule dav_svn_module modules/mod_dav_svn.so\nLoadModule authz_svn_module modules/mod_authz_svn.so\n```\n\nVirtualHost\u8a2d\u5b9a\n\n```\n<VirtualHost *:80>\n   ServerName {yourhost}\n   DocumentRoot /usr/local/services/usvn/public\n   Alias /usvn /usr/local/services/usvn/public\n\n   AddType application/x-httpd-php .php\n   DirectoryIndex index.php index.html\n\n   <Directory /usr/local/services/usvn/public>\n      # This relaxes Apache security settings.\n      AllowOverride all\n      # MultiViews must be turned off.\n      Options -MultiViews\n      Order Deny,Allow\n      Allow from all\n      Require all granted\n   </Directory>\n\n   CustomLog /var/log/httpd/usvn.access_log combined\n   ErrorLog  /var/log/httpd/usvn.error_log\n</VirtualHost>\n```\n\n\u3053\u306e\u8a2d\u5b9a\u304c\u3046\u307e\u304f\u3044\u3051\u3070\u3001/install.php\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\n## Check Permissions\n\n```bash\ncd /usr/local/services/usvn\nls -l config/config.ini\n  # Apache\u306e\u30a2\u30af\u30bb\u30b9\u30e6\u30fc\u30b6\u306b\u66f8\u304d\u8fbc\u307f\u6a29\u9650\u304c\u5fc5\u8981\nls -ld public/\n  # .htaccess\u3092\u4f5c\u6210\u3059\u308b\u6a29\u9650\u304c\u5fc5\u8981\n\n```\n\n## USVN Install\n\n```\n* http://yourhost/install.php\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30a6\u30a3\u30b6\u30fc\u30c9\u3092\u958b\u59cb\u3059\u308b\n* mySQL5.6\uff08tarball\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff09\u3067\u5b9f\u65bd\u3057\u305f\u3068\u3053\u308d\u9014\u4e2d\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3001Fix mySQL Problem\u306e\u624b\u9806\u3067\u4fee\u6b63\u3059\u308b\n* DB\u306froot\u30e6\u30fc\u30b6\u3092\u6307\u5b9a\u3057\u3066\u4f5c\u6210\u3059\u308b\n* {USVN\u30d1\u30b9}/svn\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001svn\u30d5\u30a1\u30a4\u30eb\u304c\u76f4\u63a5\u95b2\u89a7\u3067\u304d\u3001\n```\n\n### Fix mySQL Problem\n\n```bash\n## \n## \u5916\u90e8\u30ad\u30fc\u5236\u7d04\u306e\u3042\u3068\u306bauto increment\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u305f\u3081\u3001SQL\u30a8\u30e9\u30fc\u306b\u306a\u308b\n## \u3053\u308c\u3092\u4fee\u6b63\u3059\u308b\u305f\u3081\u3001auto increment\u6307\u5b9a\u3057\u3066\u3044\u308balter table\u30d6\u30ed\u30c3\u30af\u3092foreign key\u6307\u5b9a\u3059\u308b\u30d6\u30ed\u30c3\u30af\u306e\u524d\u306b\u914d\u7f6e\u3059\u308b\n## \ncd /usr/local/services/usvn/\nls -l  app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\ncp -ip app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\ndiff   app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\n\nvi app/install/sql/mysql.sql\n  # \u4ee5\u4e0bdiff\u3092\u53c2\u8003\n```\n\n```diff\ndiff app/install/sql/mysql.sql app/install/sql/mysql.sql.backup\n127,131d126\n< ALTER TABLE `usvn_groups` CHANGE `groups_id` `groups_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n< ALTER TABLE `usvn_projects` CHANGE `projects_id` `projects_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n< ALTER TABLE `usvn_users` CHANGE `users_id` `users_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n< ALTER TABLE `usvn_files_rights` CHANGE `files_rights_id` `files_rights_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n<\n158a154,157\n> ALTER TABLE `usvn_groups` CHANGE `groups_id` `groups_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n> ALTER TABLE `usvn_projects` CHANGE `projects_id` `projects_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n> ALTER TABLE `usvn_users` CHANGE `users_id` `users_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n> ALTER TABLE `usvn_files_rights` CHANGE `files_rights_id` `files_rights_id` INT( 11 ) NOT NULL AUTO_INCREMENT ;\n```\n\n```bash\n## \n## pdo_mysql\u306e\u30c7\u30d5\u30a9\u30eb\u30c8unix socket\u30d1\u30b9\u304c\u6574\u5408\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u4fee\u6b63\u3059\u308b\n## Unix\u306emySQL\u306f\u3001DB\u30b5\u30fc\u30d0\u3068DB\u63a5\u7d9a\u5143\u30b5\u30fc\u30d0\u304c\u540c\u4e00\u30db\u30b9\u30c8\u3067\u3042\u308b\u5834\u5408\u3001mysql.sock\u30d5\u30a1\u30a4\u30eb\u3092\u4ecb\u3057\u3066\u901a\u4fe1\u3059\u308b\u3089\u3057\u3044\n## mysql.sock\u306f/etc/my.cnf\u3084{mysql install\u30d1\u30b9}/my.cnf\u306a\u3069\u306b\u8a18\u8f09\u3059\u308b\u3053\u3068\u3067\u3001mysql\u8d77\u52d5\u6642\u306b\u3069\u3053\u306b\u4f5c\u6210\u3059\u308b\u304b\u3092\u6307\u5b9a\u3067\u304d\u308b\n## \n\n## root user\n\ngrep 'mysql.sock' /etc/my.cnf\n  # socket=/var/lib/mysql/mysql.sock\n  # socket=/var/lib/mysql/mysql.sock\nls -l /var/lib/mysql/mysql.sock\n  # \u5b58\u5728\u3092\u78ba\u8a8d\n\nvi /usr/local/php/lib/php.ini\n  # mysql\u30b5\u30fc\u30d0\u304c\u304a\u3044\u3066\u3044\u308bmysql.sock\u306e\u30d1\u30b9\u3092\u6307\u5b9a\u3059\u308b\u3088\u3046\u306bpdo_mysql.default_socket\u3092\u5909\u66f4\u3059\u308b\n  # php.ini\u306e\u30d1\u30b9\u306f\u3001php -i | grep 'php.ini'\u304b\u3001phpinfo()\u3092\u753b\u9762\u3067\u8868\u793a\u3055\u305b\u3066\u78ba\u8a8d\u3059\u308b\ngrep pdo_mysql.default_socket /usr/local/php/lib/php.ini\n  # pdo_mysql.default_socket=/var/lib/mysql/mysql.sock\n\n/usr/local/apache/bin/apachectl graceful\n\n```\n\n## Apache Setting Again\n\n```\nUSVN\u306e\u753b\u9762\u306b\u8868\u793a\u3055\u308c\u305f\u901a\u308a\u306bVirtualHost\u306bLocation\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u8a18\u8f09\u3059\u308b\nUSVN\u306f\u3001{USVN URL}/svn\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\n\u305d\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3084\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u5236\u5fa1\u3059\u308b\u8a2d\u5b9a\n```\n\n```\n## VirtualHost\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u5185\u306b\u8a18\u8f09\n <Location /svn/>\n      ErrorDocument 404 default\n      DAV svn\n      Require valid-user\n      SVNParentPath /usr/local/services/usvn/files/svn\n      SVNListParentPath off\n      AuthType Basic\n      AuthName \"Reivo USVN\"\n      AuthUserFile /usr/local/services/usvn/files/htpasswd\n      AuthzSVNAccessFile /usr/local/services/usvn/files/authz\n  </Location>\n```\n\n```bash\n/usr/local/apache/bin/apachectl graceful\n```\n\n# Others\n\n```\n* USVN\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092SSL\u3067\u9632\u5fa1\u3059\u308b\u5834\u5408\n  * config/config.ini\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306bhttps\u306b\u5909\u66f4\u3059\u308b\u5fc5\u8981\u3042\u308a\n  * subversion.url = \"https://yourhost.com/svn/\"\n```\n\n# References\n\n* https://github.com/usvn/usvn/wiki/Installation", "tags": ["svn", "USVN", "MySQL"]}