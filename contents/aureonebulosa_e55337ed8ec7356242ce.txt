{"tags": ["Python", "Kivy", "SQLite3"], "context": " More than 1 year has passed since last update.\n\nkivy\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\uff08sqlite3\uff09\u3092\u4f7f\u3046\u306e\u3092\u8a66\u3057\u305f\n\n\u521d\u3081\u3066sqlite3\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\npython\u3060\u3068import sqlite3\u3067\u4f7f\u3048\u3066\u697d\u3002\n\u30a2\u30d7\u30ea\u306b\u3057\u305f\u3068\u304d\u3001DB\u4f5c\u6210\u3059\u308b\u6a29\u9650\u304c\u3069\u3046\u306a\u308b\u306e\u304b\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u3002\nSQL\u6587\u306b\u5909\u6570\u5165\u308c\u308b\u306e\u306f\u3001self.cur.execute('''INSERT INTO times VALUES(:time, :count)''',{'time':self.now,'count':self.countnum})\u307f\u305f\u3044\u306b\u3059\u308b\u3068\u3067\u304d\u308b\u3002\n\u3064\u3044\u3067\u306bkivy.storage.jsonstore\u3082\u8a66\u3057\u3066\u307f\u305f\u3002\n\n\u7c21\u6613\u30b5\u30f3\u30d7\u30eb\u306f\u4ee5\u4e0b\u3002\n\u57fa\u672c\u7684\u306b\u65b0\u3057\u3044\u3082\u306e\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff09\u3092\u899a\u3048\u308b\u6642\u306f\u3001\u6a5f\u80fd\u5225\u306bmy***.py\u3068\u304b\u30d5\u30a1\u30a4\u30eb\u4e00\u3064\u3067\u4f5c\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u3066\u3044\u308b\u3002\n\nmystorage.py\n\n\n\nfrom kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.label import Label\nfrom kivy.uix.textinput import TextInput\nfrom kivy.storage.jsonstore import JsonStore\n\nfrom datetime import datetime\nimport sqlite3\n\n\n\nclass MyStorageApp(App):\n\n    conn = sqlite3.connect(\"./data.db\")\n    cur = conn.cursor()\n\n    mydata = JsonStore('./mydata.json')\n\n    countnum = 0\n    now=\"now\"\n\n    def gettime(self):\n        return str(datetime.now())\n\n    def getData(self):\n        self.entry = self.mydata.get('data')\n\n        print(self.entry)\n\n\n# layout\n    def build(self):\n\n        layout = BoxLayout(padding=10, orientation='vertical')\n        btn1 = Button(text=\"PUSH\")\n        btn1.bind(on_press=self.buttonClicked)\n\n        self.lbl1 = Label(text = \"count is \"+str(self.countnum))\n        self.lbl2 = Label(text = self.now)\n\n        layout.add_widget(btn1)\n        layout.add_widget(self.lbl1)\n        layout.add_widget(self.lbl2)\n\n        return layout\n\n# button click function\n# \"bind\" need \"instance\" arg (this case is \"btn\" arg)\n#http://stackoverflow.com/questions/23127203/bind-function-to-kivy-button\n    def buttonClicked(self,btn):\n        self.countnum += 1\n        self.lbl1.text = \"count is \" +str(self.countnum)\n\n        self.now= self.gettime()\n\n        self.lbl2.text = self.now\n\n        try:\n            self.cur.execute(\"\"\"CREATE TABLE times(time text, count int);\"\"\")\n        except:\n            pass\n\n        self.cur.execute('''INSERT INTO times VALUES(:time, :count)''',{'time':self.now,'count':self.countnum})\n        self.conn.commit()\n\n        self.cur.execute(\"select * from times\")\n        for row in self.cur:\n            print row[0],row[1]\n            self.mydata.put('data', mytime=row[0],mycount=row[1])\n\n        self.getData()\n\n        print(\"done\")\n\n# run app\nif __name__ == \"__main__\":\n    MyStorageApp().run()\n\n\n\n\n\n#__kivy\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\uff08sqlite3\uff09\u3092\u4f7f\u3046\u306e\u3092\u8a66\u3057\u305f__\n\n\u521d\u3081\u3066sqlite3\u3068\u3044\u3046\u306e\u3092\u4f7f\u3063\u3066\u307f\u305f\u306e\u3067\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\n* python\u3060\u3068``import sqlite3``\u3067\u4f7f\u3048\u3066\u697d\u3002\n* \u30a2\u30d7\u30ea\u306b\u3057\u305f\u3068\u304d\u3001DB\u4f5c\u6210\u3059\u308b\u6a29\u9650\u304c\u3069\u3046\u306a\u308b\u306e\u304b\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u3002\n* SQL\u6587\u306b\u5909\u6570\u5165\u308c\u308b\u306e\u306f\u3001``self.cur.execute('''INSERT INTO times VALUES(:time, :count)''',{'time':self.now,'count':self.countnum})``\u307f\u305f\u3044\u306b\u3059\u308b\u3068\u3067\u304d\u308b\u3002\n* \u3064\u3044\u3067\u306b``kivy.storage.jsonstore``\u3082\u8a66\u3057\u3066\u307f\u305f\u3002\n\n\u7c21\u6613\u30b5\u30f3\u30d7\u30eb\u306f\u4ee5\u4e0b\u3002\n\u57fa\u672c\u7684\u306b\u65b0\u3057\u3044\u3082\u306e\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff09\u3092\u899a\u3048\u308b\u6642\u306f\u3001\u6a5f\u80fd\u5225\u306bmy***.py\u3068\u304b\u30d5\u30a1\u30a4\u30eb\u4e00\u3064\u3067\u4f5c\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u3066\u3044\u308b\u3002\n\n```python:mystorage.py\n\n\n\nfrom kivy.app import App\nfrom kivy.uix.button import Button\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.label import Label\nfrom kivy.uix.textinput import TextInput\nfrom kivy.storage.jsonstore import JsonStore\n\nfrom datetime import datetime\nimport sqlite3\n\n\n\nclass MyStorageApp(App):\n\n    conn = sqlite3.connect(\"./data.db\")\n    cur = conn.cursor()\n\n    mydata = JsonStore('./mydata.json')\n\n    countnum = 0\n    now=\"now\"\n\n    def gettime(self):\n        return str(datetime.now())\n\n    def getData(self):\n        self.entry = self.mydata.get('data')\n\n        print(self.entry)\n\n\n# layout\n    def build(self):\n\n        layout = BoxLayout(padding=10, orientation='vertical')\n        btn1 = Button(text=\"PUSH\")\n        btn1.bind(on_press=self.buttonClicked)\n\n        self.lbl1 = Label(text = \"count is \"+str(self.countnum))\n        self.lbl2 = Label(text = self.now)\n\n        layout.add_widget(btn1)\n        layout.add_widget(self.lbl1)\n        layout.add_widget(self.lbl2)\n\n        return layout\n\n# button click function\n# \"bind\" need \"instance\" arg (this case is \"btn\" arg)\n#http://stackoverflow.com/questions/23127203/bind-function-to-kivy-button\n    def buttonClicked(self,btn):\n        self.countnum += 1\n        self.lbl1.text = \"count is \" +str(self.countnum)\n\n        self.now= self.gettime()\n\n        self.lbl2.text = self.now\n\n        try:\n            self.cur.execute(\"\"\"CREATE TABLE times(time text, count int);\"\"\")\n        except:\n            pass\n\n        self.cur.execute('''INSERT INTO times VALUES(:time, :count)''',{'time':self.now,'count':self.countnum})\n        self.conn.commit()\n\n        self.cur.execute(\"select * from times\")\n        for row in self.cur:\n            print row[0],row[1]\n            self.mydata.put('data', mytime=row[0],mycount=row[1])\n\n        self.getData()\n\n        print(\"done\")\n\n# run app\nif __name__ == \"__main__\":\n    MyStorageApp().run()\n\n\n\n```\n\n"}