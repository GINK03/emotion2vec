{"context": "\u4f5c\u308a\u305f\u3044\u30a4\u30e1\u30fc\u30b8\n\nIn your local machine\nmkdir nfs_lesson\n\ncd nfs_lesson\n\nvagrant box add \"centos_6.6\" https://github.com/tommy-muehle/puppet-vagrant-boxes/releases/download/1.0.0/centos-6.6-x86_64.box\n\nvagrant init\n\nvi Vagrantfile\n\n\nVagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n\nVagrant.configure(2) do |config|\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.memory = \"256\"\n  end\n\n  config.vm.define \"host\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"host\"\n    node.vm.network :private_network, ip: \"192.168.43.60\"\n  end\n\n  config.vm.define \"web1\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"web1\"\n    node.vm.network :private_network, ip: \"192.168.43.61\"\n  end\n\n  config.vm.define \"web2\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"web2\"\n    node.vm.network :private_network, ip: \"192.168.43.62\"\n  end\n\n  config.vm.define \"nfs\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"nfs\"\n    node.vm.network :private_network, ip: \"192.168.43.63\"\n  end\n\nend\n\n\nvagrant up\n\n\nSet up SSH in Host\nvagrant ssh host\n\nvi ~/.ssh/config\n\nHost web1\n  HostName 192.168.43.61\nHost web2\n  HostName 192.168.43.62\nHost nfs\n  HostName 192.168.43.63\n\nchmod 600 ~/.ssh/config\n\nssh-keygen -t rsa\n\nssh-copy-id web1\n\npassword is vagrant\nssh-copy-id web2\n\nssh-copy-id nfs\n\n\nInstall Ansible in Host\nwget https://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\n\nsudo rpm -Uvh epel-release-6-8.noarch.rpm\n\nsudo yum install -y ansible\n\nvi hosts\n\n[web]\n192.168.43.61\n192.168.43.62\n\n[nfs]\n192.168.43.63\n\nIf it fail, please try it again\nansible -vvvv all -i hosts -m ping\n\n\n\u4f5c\u308a\u305f\u3044\u30a4\u30e1\u30fc\u30b8\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-22 20.03.34.png](https://qiita-image-store.s3.amazonaws.com/0/39073/0e4c9dda-c775-95cb-e51e-0f636149c7a9.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-05-22 20.03.34.png\")\n\n\nIn your local machine\n\n```bash\nmkdir nfs_lesson\n```\n\n```bash\ncd nfs_lesson\n```\n\n```bash\nvagrant box add \"centos_6.6\" https://github.com/tommy-muehle/puppet-vagrant-boxes/releases/download/1.0.0/centos-6.6-x86_64.box\n```\n\n```bash\nvagrant init\n```\n\n```bash\nvi Vagrantfile\n```\n\n```ruby:Vagrantfile\n# -*- mode: ruby -*-\n# vi: set ft=ruby :\n \nVagrant.configure(2) do |config|\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.memory = \"256\"\n  end\n \n  config.vm.define \"host\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"host\"\n    node.vm.network :private_network, ip: \"192.168.43.60\"\n  end\n \n  config.vm.define \"web1\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"web1\"\n    node.vm.network :private_network, ip: \"192.168.43.61\"\n  end\n \n  config.vm.define \"web2\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"web2\"\n    node.vm.network :private_network, ip: \"192.168.43.62\"\n  end\n \n  config.vm.define \"nfs\" do |node|\n    node.vm.box = \"centos_6.6\"\n    node.vm.hostname = \"nfs\"\n    node.vm.network :private_network, ip: \"192.168.43.63\"\n  end\n \nend\n```\n\n```bash\nvagrant up\n```\n\n###Set up SSH in Host\n\n```bash\nvagrant ssh host\n```\n\n```bash\nvi ~/.ssh/config\n```\n\n```bash\nHost web1\n  HostName 192.168.43.61\nHost web2\n  HostName 192.168.43.62\nHost nfs\n  HostName 192.168.43.63\n```\n\n```bash\nchmod 600 ~/.ssh/config\n```\n\n```bash\nssh-keygen -t rsa\n```\n\n```bash\nssh-copy-id web1\n```\npassword is vagrant\n\n```bash\nssh-copy-id web2\n```\n\n```bash\nssh-copy-id nfs\n```\n\n###Install Ansible in Host\n\n```bash\nwget https://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm\n```\n\n```bash\nsudo rpm -Uvh epel-release-6-8.noarch.rpm\n```\n\n```bash\nsudo yum install -y ansible\n```\n\n```bash\nvi hosts\n```\n\n```bash\n[web]\n192.168.43.61\n192.168.43.62\n \n[nfs]\n192.168.43.63\n```\n\nIf it fail, please try it again\n\n```bash\nansible -vvvv all -i hosts -m ping\n```\n", "tags": ["nfs"]}