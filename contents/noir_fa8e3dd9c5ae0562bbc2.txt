{"context": " More than 1 year has passed since last update.\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\uff082015/06/21\u73fe\u5728\uff09\n\nNode.js v0.12.4\nexpress 4.12.4\nect 0.5.9\nsocket.io 1.3.5\uff08\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u306b\u306f\u95a2\u9023\u8a18\u8ff0\u3057\u3066\u307e\u305b\u3093\uff09\n\n// \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ node -v\n$ express -V\n$ npm info ect\n$ npm info socket.io\n\n\n\nNode.js\nNode.js\nhttps://nodejs.org/\nINSTALL\u304b\u3089\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3002\n\nexpress\n\nexpress\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo npm install -g express\n\n\n\n\noption\ndescription\n\n\n\n\n-g\nGlobal install\n\n\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u305f\u5834\u5408\u306f\u30d1\u30b9\u3092\u901a\u3057\u3066\u304a\u304f\uff1f\nNODE_PATH=/usr/local/lib/node_module\n\n\nexpress\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n$ sudo npm install -g express-generator\n\n\n\n\noption\ndescription\n\n\n\n\n-g\nGlobal install\n\n\n\n\u53c2\u8003\nhttp://expressjs.com/ja/\n\nexpress\u30b9\u30b1\u30eb\u30c8\u30f3\u4f5c\u6210\n$ cd ~/Desktop\n$ mkdir node_demo\n$ cd node_demo\n$ express myapp\n\n   create : myapp\n   create : myapp/package.json\n   create : myapp/app.js\n   create : myapp/public\n   create : myapp/public/images\n   create : myapp/public/stylesheets\n   create : myapp/public/stylesheets/style.css\n   create : myapp/routes\n   create : myapp/routes/index.js\n   create : myapp/routes/users.js\n   create : myapp/views\n   create : myapp/views/index.jade\n   create : myapp/views/layout.jade\n   create : myapp/views/error.jade\n   create : myapp/bin\n   create : myapp/bin/www\n\n   install dependencies:\n     $ cd . && npm install\n\n   run the app:\n     $ DEBUG=myapp:* npm start\n\n   create : ./public/javascripts\n\n\u306a\u304a\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u7701\u7565\u6642\u306f\u73fe\u5728\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3055\u308c\u308b\u3002\n// \u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u304cnode_modules\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\n$ cd . && npm install\n\n\n\n\u74b0\u5883\u5909\u6570DEBUG\u306bmyapp:*\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u306e\u306f\u3001debug\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u8868\u793a\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u3082\u3088\u3046\u3002\u3053\u306e\u5834\u5408\u3001\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u6307\u5b9a\u306b\u3088\u3063\u3066myapp\u4ee5\u4e0b\u306e\u5168\u3066\u306e\u30c7\u30d0\u30c3\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n\u8a73\u7d30\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3002\ndebug\nhttps://www.npmjs.com/package/debug\n\n\u5f15\u7528\nExpress\u3092Getting started\u3057\u3066\u307f\u308b - light log\n\n// \u8d77\u52d5\u30dd\u30fc\u30c8\u5909\u66f4\nexport PORT=3001\n\n\nect\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ npm install ect\n\nexpress\u30b9\u30b1\u30eb\u30c8\u30f3\u4f5c\u6210\u3067\u306f\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u6307\u5b9a\u3092\u305b\u305a\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5834\u5408\uff09jade\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306a\u306e\u3067ect\u3078\u5909\u66f4\u3059\u308b\u3002\u306a\u304a\u3001ect\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3002\n\napp.js\npackage.json\nviews/\n\n\nerror.ejs\nindex.ejs\nlayout.ejs\n\n\n\n\napp.js\nect\u3092require\u3057\u3066\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\napp.js\nvar ECT = require('ect');\n\napp.engine('ect', ECT({watch:true,root:__dirname+'/views',ext:'.ect'}).render);\napp.set('view engine','ect');\n\n\n\npackage.json\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u5909\u66f4\u3059\u308b\u3002\n\npackage.json\n{\n    \"ect\": \"*\"\n}\n\n\n\nindex.ejs, layout.ejs, error.ejs\n\n\u62e1\u5f35\u5b50\u3092.ect\u3078\u5909\u66f4\u3059\u308b\n\u30d1\u30e9\u30e1\u30fc\u30bf\u5909\u6570\u3092\u4fee\u6b63\u3059\u308b\n\njade\u5f62\u5f0f\u3067\u69cb\u9020\u8a18\u8ff0\u3055\u308c\u3066\u308b\u306e\u3067\u57fa\u672c\u7684\u306b\u4fee\u6b63\u304c\u5fc5\u8981\u3002\n\nlayout.ect\n<html>\n<body>\n<% content ?> <!--// placeholder -->\n</body>\n</html>\n\n\n\nindex.ect\ntitle= <%= @title %>\n\n\n\u53c2\u8003\uff1aweb\u5e33 | node.js \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 ECT\u304c\u7206\u901f!! \u3089\u3057\u3044\u4ef6\uff08ect\u306e\u4f7f\u3044\u65b9\uff09\n\n\u305d\u306e\u4ed6\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\n\nHTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6271\u3048\u308b\u30e2\u30b8\u30e5\u30fc\u30eb superagent\n\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9jQuery\u304c\u6271\u3048\u308b\u30e2\u30b8\u30e5\u30fc\u30eb cheerio\n\nHTTP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb cheerio-httpcli\n\n\u30d7\u30ed\u30bb\u30b9\u7ba1\u7406 PM2\n\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30d7\u30ed\u30bb\u30b9\u7ba1\u7406\u300cPM2\u300d\u306f\u5165\u308c\u3066\u304a\u304f\u3068\u958b\u767a\u304c\u4fbf\u5229\u305d\u3046\u3002\n// \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ npm install pm2 -g\n\n// \u30b9\u30af\u30ea\u30d7\u30c8\u8d77\u52d5\n$ pm2 start ./bin/www --watch\n// \u30d7\u30ed\u30bb\u30b9\u8a73\u7d30\u8868\u793a\n$ pm2 show [id]\n// \u30d7\u30ed\u30bb\u30b9\u4e00\u89a7\n$ pm2 ls\n// \u30ed\u30b0\u8868\u793a\n$ pm2 logs\n// \u30d7\u30ed\u30bb\u30b9\u505c\u6b62\n$ pm2 stop [id]\n// \u30d7\u30ed\u30bb\u30b9\u524a\u9664\n$ pm2 kill\n\nexpress4\u304b\u3089./bin/www\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3059\u308b\u3068--watch\u304c\u52b9\u304b\u306a\u3044\u3088\u3046\u3067\u3059\u3002\uff08--watch: js\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u76e3\u8996\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u518d\u8d77\u52d5\u3059\u308b\uff09\n\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\u3001\u30d1\u30b9\u306e\u4fee\u6b63\u304c\u5fc5\u8981\u3067\u3059\u3002\n// \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\u3059\u308b\n$ mv ./bin/www .\n\n\npackage.json\n// \u30d1\u30b9\u4fee\u6b63\n\"script\": {\n-   \"start\": \"node ./bin/www\"\n+   \"start\": \"node ./www\"\n}\n\n\n// \u30d1\u30b9\u4fee\u6b63\n- var app = require('../app');\n+ var app = require('./app');\n\n./bin/www \u3067\u8d77\u52d5\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u3092 ./www \u3068\u3057\u3066\u8d77\u52d5\u3059\u308b\u3002\n// start\n$ pm2 start ./www --watch\n\n\u3053\u308c\u3067\u3001 .js \u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u305f\u3089\u76e3\u8996\u518d\u8d77\u52d5\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30d0\u30fc\u30b8\u30e7\u30f3\uff082015/06/21\u73fe\u5728\uff09\n- Node.js v0.12.4\n- express 4.12.4\n- ect 0.5.9\n- socket.io 1.3.5\uff08\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u5185\u306b\u306f\u95a2\u9023\u8a18\u8ff0\u3057\u3066\u307e\u305b\u3093\uff09\n\n```\n// \u30d0\u30fc\u30b8\u30e7\u30f3\u78ba\u8a8d\n$ node -v\n$ express -V\n$ npm info ect\n$ npm info socket.io\n```\n\n---\n\n# Node.js\n\nNode.js\nhttps://nodejs.org/\n\nINSTALL\u304b\u3089\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3002\n\n# express\n\n## express\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ sudo npm install -g express\n```\n\n|option|description|\n|:--|:--|\n|-g|Global install|\n\n\u30b0\u30ed\u30fc\u30d0\u30eb\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u3057\u305f\u5834\u5408\u306f\u30d1\u30b9\u3092\u901a\u3057\u3066\u304a\u304f\uff1f\n\n```.bash_profile\nNODE_PATH=/usr/local/lib/node_module\n```\n\n## express\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3048\u308b\u3088\u3046\u306b\u3059\u308b\n\n```\n$ sudo npm install -g express-generator\n```\n\n|option|description|\n|:--|:--|\n|-g|Global install|\n\n\n\u53c2\u8003\nhttp://expressjs.com/ja/\n\n## express\u30b9\u30b1\u30eb\u30c8\u30f3\u4f5c\u6210\n\n```\n$ cd ~/Desktop\n$ mkdir node_demo\n$ cd node_demo\n$ express myapp\n\n   create : myapp\n   create : myapp/package.json\n   create : myapp/app.js\n   create : myapp/public\n   create : myapp/public/images\n   create : myapp/public/stylesheets\n   create : myapp/public/stylesheets/style.css\n   create : myapp/routes\n   create : myapp/routes/index.js\n   create : myapp/routes/users.js\n   create : myapp/views\n   create : myapp/views/index.jade\n   create : myapp/views/layout.jade\n   create : myapp/views/error.jade\n   create : myapp/bin\n   create : myapp/bin/www\n\n   install dependencies:\n     $ cd . && npm install\n\n   run the app:\n     $ DEBUG=myapp:* npm start\n\n   create : ./public/javascripts\n```\n\n\u306a\u304a\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u540d\u7701\u7565\u6642\u306f\u73fe\u5728\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4f5c\u6210\u3055\u308c\u308b\u3002\n\n```\n// \u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u304cnode_modules\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u308b\n$ cd . && npm install\n```\n\n---\n\n> \u74b0\u5883\u5909\u6570DEBUG\u306bmyapp:*\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u306e\u306f\u3001debug\u30d1\u30c3\u30b1\u30fc\u30b8\u306b\u5bfe\u3057\u3066\u8868\u793a\u3059\u308b\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u308b\u3082\u3088\u3046\u3002\u3053\u306e\u5834\u5408\u3001\u30ef\u30a4\u30eb\u30c9\u30ab\u30fc\u30c9\u6307\u5b9a\u306b\u3088\u3063\u3066myapp\u4ee5\u4e0b\u306e\u5168\u3066\u306e\u30c7\u30d0\u30c3\u30b0\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u529b\u3055\u308c\u308b\u3002\n>\n> \u8a73\u7d30\u306f\u4ee5\u4e0b\u3092\u53c2\u7167\u3002\n>\n> debug\n> https://www.npmjs.com/package/debug\n\n_\u5f15\u7528_\n_[Express\u3092Getting started\u3057\u3066\u307f\u308b - light log](http://yamacent.hatenablog.com/entry/2015/04/01/185529)_\n\n---\n\n```.bash_profile\n// \u8d77\u52d5\u30dd\u30fc\u30c8\u5909\u66f4\nexport PORT=3001\n```\n\n# ect\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ npm install ect\n```\n\nexpress\u30b9\u30b1\u30eb\u30c8\u30f3\u4f5c\u6210\u3067\u306f\uff08\u30aa\u30d7\u30b7\u30e7\u30f3\u6307\u5b9a\u3092\u305b\u305a\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u5834\u5408\uff09jade\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u306a\u306e\u3067ect\u3078\u5909\u66f4\u3059\u308b\u3002\u306a\u304a\u3001ect\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u3002\n\n- app.js\n- package.json\n- views/\n\t- error.ejs\n\t- index.ejs\n\t- layout.ejs\n\n## app.js\n\nect\u3092require\u3057\u3066\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n```app.js\nvar ECT = require('ect');\n\napp.engine('ect', ECT({watch:true,root:__dirname+'/views',ext:'.ect'}).render);\napp.set('view engine','ect');\n```\n\n## package.json\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u5909\u66f4\u3059\u308b\u3002\n\n```package.json\n{\n\t\"ect\": \"*\"\n}\n```\n\n## index.ejs, layout.ejs, error.ejs\n\n- \u62e1\u5f35\u5b50\u3092.ect\u3078\u5909\u66f4\u3059\u308b\n- \u30d1\u30e9\u30e1\u30fc\u30bf\u5909\u6570\u3092\u4fee\u6b63\u3059\u308b\n\njade\u5f62\u5f0f\u3067\u69cb\u9020\u8a18\u8ff0\u3055\u308c\u3066\u308b\u306e\u3067\u57fa\u672c\u7684\u306b\u4fee\u6b63\u304c\u5fc5\u8981\u3002\n\n```layout.ect\n<html>\n<body>\n<% content ?> <!--// placeholder -->\n</body>\n</html>\n```\n\n```index.ect\ntitle= <%= @title %>\n```\n\n_\u53c2\u8003\uff1a[web\u5e33 | node.js \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3 ECT\u304c\u7206\u901f!! \u3089\u3057\u3044\u4ef6\uff08ect\u306e\u4f7f\u3044\u65b9\uff09](http://www.webcyou.com/?p=5173)_\n\n# \u305d\u306e\u4ed6\u3001\u30e2\u30b8\u30e5\u30fc\u30eb\n \n- HTTP\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u6271\u3048\u308b\u30e2\u30b8\u30e5\u30fc\u30eb [superagent](https://github.com/visionmedia/superagent)\n- \u30b5\u30fc\u30d0\u30b5\u30a4\u30c9jQuery\u304c\u6271\u3048\u308b\u30e2\u30b8\u30e5\u30fc\u30eb [cheerio](https://github.com/cheeriojs/cheerio)\n- HTTP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e2\u30b8\u30e5\u30fc\u30eb [cheerio-httpcli](https://www.npmjs.com/package/cheerio-httpcli)\n- \u30d7\u30ed\u30bb\u30b9\u7ba1\u7406 [PM2](https://github.com/Unitech/pm2)\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u30d7\u30ed\u30bb\u30b9\u7ba1\u7406\u300cPM2\u300d\u306f\u5165\u308c\u3066\u304a\u304f\u3068\u958b\u767a\u304c\u4fbf\u5229\u305d\u3046\u3002\n\n```\n// \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ npm install pm2 -g\n\n// \u30b9\u30af\u30ea\u30d7\u30c8\u8d77\u52d5\n$ pm2 start ./bin/www --watch\n// \u30d7\u30ed\u30bb\u30b9\u8a73\u7d30\u8868\u793a\n$ pm2 show [id]\n// \u30d7\u30ed\u30bb\u30b9\u4e00\u89a7\n$ pm2 ls\n// \u30ed\u30b0\u8868\u793a\n$ pm2 logs\n// \u30d7\u30ed\u30bb\u30b9\u505c\u6b62\n$ pm2 stop [id]\n// \u30d7\u30ed\u30bb\u30b9\u524a\u9664\n$ pm2 kill\n```\n\n**<font color=\"red\">express4\u304b\u3089./bin/www\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u8d77\u52d5\u3059\u308b\u3068--watch\u304c\u52b9\u304b\u306a\u3044\u3088\u3046\u3067\u3059\u3002\uff08--watch: js\u30d5\u30a1\u30a4\u30eb\u66f4\u65b0\u76e3\u8996\u3067\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u518d\u8d77\u52d5\u3059\u308b\uff09</font>**\n\n\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u306e\u79fb\u52d5\u3001\u30d1\u30b9\u306e\u4fee\u6b63\u304c\u5fc5\u8981\u3067\u3059\u3002\n\n```./bin/www\n// \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u30b9\u30af\u30ea\u30d7\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u79fb\u52d5\u3059\u308b\n$ mv ./bin/www .\n```\n\n```package.json\n// \u30d1\u30b9\u4fee\u6b63\n\"script\": {\n-\t\"start\": \"node ./bin/www\"\n+\t\"start\": \"node ./www\"\n}\n```\n\n```./www\n// \u30d1\u30b9\u4fee\u6b63\n- var app = require('../app');\n+ var app = require('./app');\n```\n\n./bin/www \u3067\u8d77\u52d5\u3057\u3066\u3044\u305f\u3068\u3053\u308d\u3092 ./www \u3068\u3057\u3066\u8d77\u52d5\u3059\u308b\u3002\n\n```\n// start\n$ pm2 start ./www --watch\n```\n\n\u3053\u308c\u3067\u3001 .js \u30d5\u30a1\u30a4\u30eb\u3092\u66f4\u65b0\u3057\u305f\u3089\u76e3\u8996\u518d\u8d77\u52d5\u3055\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n", "tags": ["Node.js", "Express"]}