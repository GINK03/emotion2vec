{"context": " More than 1 year has passed since last update.ActiveRecord\u3067N+1\u30af\u30a8\u30ea\u3092\u6f70\u3059\u305f\u3081\u306beager loading\u3092\u884c\u3046\u5834\u5408\u3001preload\u3084includes\u3084eager_load\u304c\u5f79\u306b\u7acb\u3064\u3002\nPreload, Eagerload, Includes and Joins\u3068\u3044\u3046\u8a18\u4e8b\u306b\u305d\u308c\u3089\u306e\u9055\u3044\u304c\u3088\u304f\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u308b\u3093\u3060\u3051\u3069\u3001includes\u304c\u6319\u52d5\u3092\u5909\u3048\u308b\u6761\u4ef6\u304c\u3042\u307e\u308a\u6b63\u78ba\u306b\u66f8\u304b\u308c\u3066\u3044\u306a\u304f\u3066\u81ea\u4fe1\u304c\u6301\u3066\u306a\u304b\u3063\u305f\u3057\u3001\u305d\u3082\u305d\u3082\u8a18\u4e8b\u304c\u53e4\u3044\u306e\u3067Rails4.1.5\u306e\u30bd\u30fc\u30b9\u3092\u8aad\u3093\u3067\u8abf\u3079\u305f\u3002\n\u305b\u3063\u304b\u304f\u8abf\u3079\u305f\u306e\u3067\u3001\u5168\u4f53\u3092\u901a\u3057\u3066\u65e5\u672c\u8a9e\u3067\u307e\u3068\u3081\u3066\u307f\u3088\u3046\u3068\u601d\u3046\u3002\n\njoins\nUser.joins(:posts).where(posts: { id: 1 })\n# SELECT `users`.* FROM `users` INNER JOIN `posts` ON `posts`.`user_id` = `users`.`id` WHERE `posts`.`id` = 1\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067INNER JOIN\u3092\u884c\u3046\u3002LEFT OUTER JOIN\u3092\u884c\u3044\u305f\u3044\u6642\u306fleft_joins\u3092\u4f7f\u3046\u3002\n\u4ed6\u306e3\u3064\u3068\u306e\u9055\u3044\u306f\u3001association\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044\u3053\u3068\u3002\nassociation\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044\u306e\u3067eager loading\u306b\u306f\u4f7f\u3048\u306a\u3044\u304c\u3001ActiveRecord\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044\u5206\u30e1\u30e2\u30ea\u306e\u6d88\u8cbb\u3092\u6291\u3048\u3089\u308c\u308b\u3002\n\u306a\u306e\u3067\u3001JOIN\u3057\u3066\u6761\u4ef6\u3092\u7d5e\u308a\u8fbc\u307f\u305f\u3044\u304c\u3001JOIN\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306fjoins\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3002\nUser.joins(*).where(posts: {*})\u3068\u304bUser.joins(*).merge(Post.*)\u307f\u305f\u3044\u306b\u4f7f\u3046\u3002\n\neager_load\nUser.eager_load(:posts)\n# SELECT `users`.`id` AS t0_r0, `users`.`name` AS t0_r1, `users`.`created_at` AS t0_r2, `users`.`updated_at` AS t0_r3, `posts`.`id` AS t1_r0, `posts`.`user_id` AS t1_r1, `posts`.`created_at` AS t1_r2, `posts`.`updated_at` AS t1_r3 FROM `users` LEFT OUTER JOIN `posts` ON `posts`.`user_id` = `users`.`id`\n\nUser.eager_load(:posts).where(posts: { id: 1 })\n# SELECT `users`.`id` AS t0_r0, `users`.`name` AS t0_r1, `users`.`created_at` AS t0_r2, `users`.`updated_at` AS t0_r3, `posts`.`id` AS t1_r0, `posts`.`user_id` AS t1_r1, `posts`.`created_at` AS t1_r2, `posts`.`updated_at` AS t1_r3 FROM `users` LEFT OUTER JOIN `posts` ON `posts`.`user_id` = `users`.`id` WHERE `posts`.`id` = 1\n\n\u6307\u5b9a\u3057\u305fassociation\u3092LEFT OUTER JOIN\u3067\u5f15\u3044\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3002\n\u30af\u30a8\u30ea\u306e\u6570\u304c1\u500b\u3067\u6e08\u3080\u306e\u3067\u5834\u5408\u306b\u3088\u3063\u3066\u306fpreload\u3088\u308a\u901f\u3044\u3002\nJOIN\u3057\u3066\u3044\u308b\u306e\u3067\u3001preload\u3068\u9055\u3063\u3066\u3001joins\u3068\u540c\u3058\u3088\u3046\u306bJOIN\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3067\u7d5e\u8fbc\u304c\u3067\u304d\u308b\u3002\n\npreload\nUser.preload(:posts)\n# SELECT `users`.* FROM `users`\n# SELECT `posts`.* FROM `posts` WHERE `posts`.`user_id` IN (1, 2, 3, ...)\n\nUser.preload(:posts).where(posts: { id: 1 })\n# SELECT `users`.* FROM `users`  WHERE `posts`.`id` = 1\n# => Mysql2::Error: Unknown column 'posts.id' in 'where clause': SELECT `users`.* FROM `users`  WHERE `posts`.`id` = 1\n\n\u6307\u5b9a\u3057\u305fassociation\u3092\u8907\u6570\u306e\u30af\u30a8\u30ea\u306b\u5206\u3051\u3066\u5f15\u3044\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3002\n\u8907\u6570\u306eassociation\u3092eager loading\u3059\u308b\u3068\u304d\u3068\u304b\u3001\u3042\u307e\u308aJOIN\u3057\u305f\u304f\u306a\u3044\u3067\u304b\u3044\u30c6\u30fc\u30d6\u30eb\u3092\u6271\u3046\u3068\u304d\u306fpreload\u3092\u4f7f\u3046\u306e\u304c\u3088\u3055\u305d\u3046\u3002\npreload\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u3088\u3063\u3066\u7d5e\u308a\u8fbc\u3082\u3046\u3068\u3059\u308b\u3068\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u3002\n\nincludes\nUser.includes(:posts)\n# SELECT `users`.* FROM `users`\n# SELECT `posts`.* FROM `posts` WHERE `posts`.`user_id` IN (1, 2, 3, ...)\n\nUser.includes(:posts).where(posts: { id: 1 })\n# SELECT `users`.`id` AS t0_r0, `users`.`name` AS t0_r1, `users`.`created_at` AS t0_r2, `users`.`updated_at` AS t0_r3, `posts`.`id` AS t1_r0, `posts`.`user_id` AS t1_r1, `posts`.`created_at` AS t1_r2, `posts`.`updated_at` AS t1_r3 FROM `users` LEFT OUTER JOIN `posts` ON `posts`.`user_id` = `users`.`id` WHERE `posts`.`id` = 1\n\n\n\nincludes\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3067where\u306b\u3088\u308b\u7d5e\u308a\u8fbc\u307f\u3092\u884c\u3063\u3066\u3044\u308b\n\nincludes\u3057\u305fassociation\u306b\u5bfe\u3057\u3066joins\u304breferences\u3082\u547c\u3093\u3067\u3044\u308b\n\u4efb\u610f\u306eassociation\u306b\u5bfe\u3057\u3066eager_load\u3082\u547c\u3093\u3067\u3044\u308b\n\n\u306e\u3046\u3061\u3044\u305a\u308c\u304b\u3092\u6e80\u305f\u3059\u5834\u5408\u3001eager_load\u3068\u540c\u3058\u6319\u52d5(LEFT JOIN)\u3092\u884c\u3044\u3001\n\u305d\u3046\u3067\u306a\u3051\u308c\u3070preload\u3068\u540c\u3058\u6319\u52d5(\u30af\u30a8\u30ea\u3092\u5206\u3051\u3066\u5b9f\u884c)\u3092\u3059\u308b\u3002\n\u7d5e\u308a\u8fbc\u307f\u304c\u5fc5\u8981\u306a\u6642\u306b\u4f8b\u5916\u3092\u6295\u3052\u305aeager_load\u306bfallback\u3059\u308bpreload\u3002\n\n\u6839\u62e0\ndef eager_loading?\n  @should_eager_load ||=\n    eager_load_values.any? ||\n    includes_values.any? && (joined_includes_values.any? || references_eager_loaded_tables?)\nend\n\nActiveRecord::Relation#eager_loading?\u304ctrue\u306e\u5834\u5408LEFT JOIN\u3092\u884c\u3044\u3001false\u306e\u5834\u5408\u30af\u30a8\u30ea\u3092\u5206\u3051\u3066\u8aad\u307f\u8fbc\u3080\u3002\neager_load_values\u3068\u304bincludes_values\u306feager_load\u3057\u305f\u3084\u3064\u3068includes\u3057\u305f\u3068\u304d\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3084\u3064\u3067\u3001\u305d\u306e\u307e\u307e\u3002\njoined_includes_values\u306fincludes\u3057\u305f\u3084\u3064\u3092\u308f\u3056\u308f\u3056joins\u3082\u3057\u3066\u308b\u5974\u306e\u30ea\u30b9\u30c8\u3002\nreferences_eager_loaded_tables?\u306fJOIN\u5143\u4ee5\u5916\u306breferences\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u5834\u5408\u306btrue\u306b\u306a\u308b\u3002\u306a\u304a\u3001where\u3067\u5225\u30c6\u30fc\u30d6\u30eb\u306b\u3088\u308b\u7d5e\u308a\u8fbc\u307f\u3092\u884c\u3063\u305f\u5834\u5408\u3082references\u304c\u884c\u308f\u308c\u308b\u305f\u3081\u3001\u3053\u306e\u5834\u5408\u3082true\u306b\u306a\u308b\u3002\n\u3061\u306a\u307f\u306b\u3001references\u306fincludes\u306e\u30b9\u30a4\u30c3\u30c1\u30f3\u30b0\u5c02\u7528\u30e1\u30bd\u30c3\u30c9\u3067\u3042\u308b\u3002\n\n\u307e\u3068\u3081\n\n\n\n\u30e1\u30bd\u30c3\u30c9\n\u30ad\u30e3\u30c3\u30b7\u30e5\n\u30af\u30a8\u30ea\n\u7528\u9014\n\n\n\n\njoins\n\u3057\u306a\u3044\n\u5358\u6570\n\u7d5e\u308a\u8fbc\u307f\n\n\neager_load\n\u3059\u308b\n\u5358\u6570\n\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u7d5e\u308a\u8fbc\u307f\n\n\npreload\n\u3059\u308b\n\u8907\u6570\n\u30ad\u30e3\u30c3\u30b7\u30e5\n\n\nincludes\n\u3059\u308b\n\u5834\u5408\u306b\u3088\u308b\n\u30ad\u30e3\u30c3\u30b7\u30e5\u3001\u5fc5\u8981\u306a\u3089\u7d5e\u308a\u8fbc\u307f\n\n\n\n\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u3068\u306eJOIN\u3092\u7981\u6b62\u3057\u305f\u3044\u30b1\u30fc\u30b9\u3067\u306fpreload\u3092\u6307\u5b9a\u3057\u3001JOIN\u3057\u3066\u3082\u554f\u984c\u306a\u304f\u3066\u3068\u308a\u3042\u3048\u305aeager loading\u3057\u305f\u3044\u5834\u5408\u306fincludes\u3092\u4f7f\u3044\u3001\u5fc5\u305aJOIN\u3057\u305f\u3044\u5834\u5408\u306feager_load\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002\nActiveRecord\u3067N+1\u30af\u30a8\u30ea\u3092\u6f70\u3059\u305f\u3081\u306beager loading\u3092\u884c\u3046\u5834\u5408\u3001`preload`\u3084`includes`\u3084`eager_load`\u304c\u5f79\u306b\u7acb\u3064\u3002\n[Preload, Eagerload, Includes and Joins](http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html)\u3068\u3044\u3046\u8a18\u4e8b\u306b\u305d\u308c\u3089\u306e\u9055\u3044\u304c\u3088\u304f\u307e\u3068\u3081\u3089\u308c\u3066\u3044\u308b\u3093\u3060\u3051\u3069\u3001includes\u304c\u6319\u52d5\u3092\u5909\u3048\u308b\u6761\u4ef6\u304c\u3042\u307e\u308a\u6b63\u78ba\u306b\u66f8\u304b\u308c\u3066\u3044\u306a\u304f\u3066\u81ea\u4fe1\u304c\u6301\u3066\u306a\u304b\u3063\u305f\u3057\u3001\u305d\u3082\u305d\u3082\u8a18\u4e8b\u304c\u53e4\u3044\u306e\u3067Rails4.1.5\u306e\u30bd\u30fc\u30b9\u3092\u8aad\u3093\u3067\u8abf\u3079\u305f\u3002\n\n\u305b\u3063\u304b\u304f\u8abf\u3079\u305f\u306e\u3067\u3001\u5168\u4f53\u3092\u901a\u3057\u3066\u65e5\u672c\u8a9e\u3067\u307e\u3068\u3081\u3066\u307f\u3088\u3046\u3068\u601d\u3046\u3002\n\n## joins\n```rb\nUser.joins(:posts).where(posts: { id: 1 })\n# SELECT `users`.* FROM `users` INNER JOIN `posts` ON `posts`.`user_id` = `users`.`id` WHERE `posts`.`id` = 1\n```\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067INNER JOIN\u3092\u884c\u3046\u3002LEFT OUTER JOIN\u3092\u884c\u3044\u305f\u3044\u6642\u306f`left_joins`\u3092\u4f7f\u3046\u3002\n\u4ed6\u306e3\u3064\u3068\u306e\u9055\u3044\u306f\u3001association\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044\u3053\u3068\u3002\nassociation\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044\u306e\u3067eager loading\u306b\u306f\u4f7f\u3048\u306a\u3044\u304c\u3001ActiveRecord\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u306a\u3044\u5206\u30e1\u30e2\u30ea\u306e\u6d88\u8cbb\u3092\u6291\u3048\u3089\u308c\u308b\u3002\n\n\u306a\u306e\u3067\u3001JOIN\u3057\u3066\u6761\u4ef6\u3092\u7d5e\u308a\u8fbc\u307f\u305f\u3044\u304c\u3001JOIN\u3059\u308b\u30c6\u30fc\u30d6\u30eb\u306e\u30c7\u30fc\u30bf\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306f`joins`\u3092\u4f7f\u3046\u306e\u304c\u826f\u3044\u3002\n`User.joins(*).where(posts: {*})`\u3068\u304b`User.joins(*).merge(Post.*)`\u307f\u305f\u3044\u306b\u4f7f\u3046\u3002\n\n## eager_load\n```rb\nUser.eager_load(:posts)\n# SELECT `users`.`id` AS t0_r0, `users`.`name` AS t0_r1, `users`.`created_at` AS t0_r2, `users`.`updated_at` AS t0_r3, `posts`.`id` AS t1_r0, `posts`.`user_id` AS t1_r1, `posts`.`created_at` AS t1_r2, `posts`.`updated_at` AS t1_r3 FROM `users` LEFT OUTER JOIN `posts` ON `posts`.`user_id` = `users`.`id`\n\nUser.eager_load(:posts).where(posts: { id: 1 })\n# SELECT `users`.`id` AS t0_r0, `users`.`name` AS t0_r1, `users`.`created_at` AS t0_r2, `users`.`updated_at` AS t0_r3, `posts`.`id` AS t1_r0, `posts`.`user_id` AS t1_r1, `posts`.`created_at` AS t1_r2, `posts`.`updated_at` AS t1_r3 FROM `users` LEFT OUTER JOIN `posts` ON `posts`.`user_id` = `users`.`id` WHERE `posts`.`id` = 1\n```\n\n\u6307\u5b9a\u3057\u305fassociation\u3092LEFT OUTER JOIN\u3067\u5f15\u3044\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3002\n\u30af\u30a8\u30ea\u306e\u6570\u304c1\u500b\u3067\u6e08\u3080\u306e\u3067\u5834\u5408\u306b\u3088\u3063\u3066\u306f`preload`\u3088\u308a\u901f\u3044\u3002\nJOIN\u3057\u3066\u3044\u308b\u306e\u3067\u3001`preload`\u3068\u9055\u3063\u3066\u3001`joins`\u3068\u540c\u3058\u3088\u3046\u306bJOIN\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3067\u7d5e\u8fbc\u304c\u3067\u304d\u308b\u3002\n\n## preload\n```rb\nUser.preload(:posts)\n# SELECT `users`.* FROM `users`\n# SELECT `posts`.* FROM `posts` WHERE `posts`.`user_id` IN (1, 2, 3, ...)\n\nUser.preload(:posts).where(posts: { id: 1 })\n# SELECT `users`.* FROM `users`  WHERE `posts`.`id` = 1\n# => Mysql2::Error: Unknown column 'posts.id' in 'where clause': SELECT `users`.* FROM `users`  WHERE `posts`.`id` = 1\n```\n\n\u6307\u5b9a\u3057\u305fassociation\u3092\u8907\u6570\u306e\u30af\u30a8\u30ea\u306b\u5206\u3051\u3066\u5f15\u3044\u3066\u30ad\u30e3\u30c3\u30b7\u30e5\u3059\u308b\u3002\n\u8907\u6570\u306eassociation\u3092eager loading\u3059\u308b\u3068\u304d\u3068\u304b\u3001\u3042\u307e\u308aJOIN\u3057\u305f\u304f\u306a\u3044\u3067\u304b\u3044\u30c6\u30fc\u30d6\u30eb\u3092\u6271\u3046\u3068\u304d\u306fpreload\u3092\u4f7f\u3046\u306e\u304c\u3088\u3055\u305d\u3046\u3002\npreload\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306b\u3088\u3063\u3066\u7d5e\u308a\u8fbc\u3082\u3046\u3068\u3059\u308b\u3068\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u3002\n\n## includes\n```rb\nUser.includes(:posts)\n# SELECT `users`.* FROM `users`\n# SELECT `posts`.* FROM `posts` WHERE `posts`.`user_id` IN (1, 2, 3, ...)\n\nUser.includes(:posts).where(posts: { id: 1 })\n# SELECT `users`.`id` AS t0_r0, `users`.`name` AS t0_r1, `users`.`created_at` AS t0_r2, `users`.`updated_at` AS t0_r3, `posts`.`id` AS t1_r0, `posts`.`user_id` AS t1_r1, `posts`.`created_at` AS t1_r2, `posts`.`updated_at` AS t1_r3 FROM `users` LEFT OUTER JOIN `posts` ON `posts`.`user_id` = `users`.`id` WHERE `posts`.`id` = 1\n```\n\n- `includes`\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u3067`where`\u306b\u3088\u308b\u7d5e\u308a\u8fbc\u307f\u3092\u884c\u3063\u3066\u3044\u308b\n- `includes`\u3057\u305fassociation\u306b\u5bfe\u3057\u3066`joins`\u304b`references`\u3082\u547c\u3093\u3067\u3044\u308b\n- \u4efb\u610f\u306eassociation\u306b\u5bfe\u3057\u3066`eager_load`\u3082\u547c\u3093\u3067\u3044\u308b\n\n\u306e\u3046\u3061\u3044\u305a\u308c\u304b\u3092\u6e80\u305f\u3059\u5834\u5408\u3001`eager_load`\u3068\u540c\u3058\u6319\u52d5(LEFT JOIN)\u3092\u884c\u3044\u3001\n\u305d\u3046\u3067\u306a\u3051\u308c\u3070`preload`\u3068\u540c\u3058\u6319\u52d5(\u30af\u30a8\u30ea\u3092\u5206\u3051\u3066\u5b9f\u884c)\u3092\u3059\u308b\u3002\n\u7d5e\u308a\u8fbc\u307f\u304c\u5fc5\u8981\u306a\u6642\u306b\u4f8b\u5916\u3092\u6295\u3052\u305a`eager_load`\u306bfallback\u3059\u308b`preload`\u3002\n\n#### \u6839\u62e0\n```rb\ndef eager_loading?\n  @should_eager_load ||=\n    eager_load_values.any? ||\n    includes_values.any? && (joined_includes_values.any? || references_eager_loaded_tables?)\nend\n```\n\n[ActiveRecord::Relation#eager_loading?](https://github.com/rails/rails/blob/9c297ce93610bcd878f5a5ca8e737bf057fc2d85/activerecord/lib/active_record/relation.rb#L556-L560)\u304c[true\u306e\u5834\u5408](https://github.com/rails/rails/blob/9c297ce93610bcd878f5a5ca8e737bf057fc2d85/activerecord/lib/active_record/relation.rb#L611)LEFT JOIN\u3092\u884c\u3044\u3001[false\u306e\u5834\u5408](https://github.com/rails/rails/blob/9c297ce93610bcd878f5a5ca8e737bf057fc2d85/activerecord/lib/active_record/relation.rb#L614)\u30af\u30a8\u30ea\u3092\u5206\u3051\u3066\u8aad\u307f\u8fbc\u3080\u3002\n\n`eager_load_values`\u3068\u304b`includes_values`\u306feager_load\u3057\u305f\u3084\u3064\u3068includes\u3057\u305f\u3068\u304d\u306b\u8ffd\u52a0\u3055\u308c\u308b\u3084\u3064\u3067\u3001\u305d\u306e\u307e\u307e\u3002\n[joined_includes_values](https://github.com/rails/rails/blob/9c297ce93610bcd878f5a5ca8e737bf057fc2d85/activerecord/lib/active_record/relation.rb#L566-L568)\u306fincludes\u3057\u305f\u3084\u3064\u3092\u308f\u3056\u308f\u3056joins\u3082\u3057\u3066\u308b\u5974\u306e\u30ea\u30b9\u30c8\u3002\n\n[references_eager_loaded_tables?](https://github.com/rails/rails/blob/9c297ce93610bcd878f5a5ca8e737bf057fc2d85/activerecord/lib/active_record/relation.rb#L626-L641)\u306fJOIN\u5143\u4ee5\u5916\u306b`references`\u304c\u884c\u308f\u308c\u3066\u3044\u308b\u5834\u5408\u306btrue\u306b\u306a\u308b\u3002\u306a\u304a\u3001where\u3067\u5225\u30c6\u30fc\u30d6\u30eb\u306b\u3088\u308b\u7d5e\u308a\u8fbc\u307f\u3092\u884c\u3063\u305f\u5834\u5408\u3082[references\u304c\u884c\u308f\u308c\u308b](https://github.com/rails/rails/blob/9c297ce93610bcd878f5a5ca8e737bf057fc2d85/activerecord/lib/active_record/relation/query_methods.rb#L569)\u305f\u3081\u3001\u3053\u306e\u5834\u5408\u3082true\u306b\u306a\u308b\u3002\n\n\u3061\u306a\u307f\u306b\u3001[`references`\u306f`includes`\u306e\u30b9\u30a4\u30c3\u30c1\u30f3\u30b0\u5c02\u7528\u30e1\u30bd\u30c3\u30c9\u3067\u3042\u308b](https://github.com/rails/rails/blob/9c297ce93610bcd878f5a5ca8e737bf057fc2d85/activerecord/lib/active_record/relation/query_methods.rb#L176)\u3002\n\n## \u307e\u3068\u3081\n|\u30e1\u30bd\u30c3\u30c9   |\u30ad\u30e3\u30c3\u30b7\u30e5|\u30af\u30a8\u30ea     | \u7528\u9014         |\n|---------:|:-------:|:--------:|:------------|\n|joins     |\u3057\u306a\u3044    |\u5358\u6570      |\u7d5e\u308a\u8fbc\u307f          |\n|eager_load|\u3059\u308b      |\u5358\u6570      |\u30ad\u30e3\u30c3\u30b7\u30e5\u3068\u7d5e\u308a\u8fbc\u307f|\n|preload   |\u3059\u308b      |\u8907\u6570      |\u30ad\u30e3\u30c3\u30b7\u30e5     |\n|includes  |\u3059\u308b      |\u5834\u5408\u306b\u3088\u308b |\u30ad\u30e3\u30c3\u30b7\u30e5\u3001\u5fc5\u8981\u306a\u3089\u7d5e\u308a\u8fbc\u307f|\n\n\u305d\u306e\u30c6\u30fc\u30d6\u30eb\u3068\u306eJOIN\u3092\u7981\u6b62\u3057\u305f\u3044\u30b1\u30fc\u30b9\u3067\u306f`preload`\u3092\u6307\u5b9a\u3057\u3001JOIN\u3057\u3066\u3082\u554f\u984c\u306a\u304f\u3066\u3068\u308a\u3042\u3048\u305aeager loading\u3057\u305f\u3044\u5834\u5408\u306f`includes`\u3092\u4f7f\u3044\u3001\u5fc5\u305aJOIN\u3057\u305f\u3044\u5834\u5408\u306f`eager_load`\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002\n", "tags": ["Rails", "ActiveRecord"]}