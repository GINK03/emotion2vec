{"context": "This is for communication with GHI Electronics on ALFAT SoC.\n( https://www.ghielectronics.com/community/forum/topic?id=23533 )\n\nEnvironment\nMSC-MOD20 (ALFAT SoC) SD card module\nALFAT SoC version 2.0.0\nI2C Connection used\n\n\nI have a problem on the initialization of the microSD (I command), which is similar to the following post.\nhttps://www.ghielectronics.com/community/forum/topic?id=12544\n\nBehavior\nAfter Power on boot, the first trial of the SD initialization always fails. \nI tried by waiting 3000 msec before the first initialization, but without success.\nThe trials after the first are always successful with wait of 3000 msec inbetween.\n\nRelated code\nI checked with ESP8266 using Arduino IDE, with Wire.h library.\nv0.7 @ github\n\nOther command (V command)\nI tried V command repeatedly. All V commands were successful without any wait inbetween.\n\nOscilloscope outputs\nI checked with oscilloscope (Analog Discovery 2) on the SCL and SDA, together with I2C Busy flag on the failure/success of the SD initialization.\nFollowing is when the initialization fails:\n\nThe 0x49, 0x20, 0x4D, 0x3A, 0x0A\u3000are commands for the SD initialization ( 'I', 0x20, 'M', ':', 0x0A ).\nFollowing is when the initialization succeeds (trials after the first):\n\n\nPossible workaround\nTo initialize the SD correctly, I came up with the following workaroud\n\nSD initialization: fails\nwait for 200 msec\nSD initialization: succeeds\n\nAbout the step 2, the wait needs to be 200 msec. I tried 10, 50, 100 msec, but without success.\nThis is for communication with GHI Electronics on ALFAT SoC.\n( https://www.ghielectronics.com/community/forum/topic?id=23533 )\n\n```txt:Environment\nMSC-MOD20 (ALFAT SoC) SD card module\nALFAT SoC version 2.0.0\nI2C Connection used\n```\n\nI have a problem on the initialization of the microSD (I command), which is similar to the following post.\nhttps://www.ghielectronics.com/community/forum/topic?id=12544\n\n### Behavior\n\nAfter Power on boot, the first trial of the SD initialization always fails. \n\nI tried by waiting 3000 msec before the first initialization, but without success.\n\nThe trials after the first are always successful with wait of 3000 msec inbetween.\n\n### Related code\n\nI checked with ESP8266 using Arduino IDE, with Wire.h library.\n\n[v0.7 @ github](https://github.com/yasokada/esp8266_160730_MSC-MOD20p1/releases/tag/v0.8)\n\n\n### Other command (V command)\n\nI tried V command repeatedly. All V commands were successful without any wait inbetween.\n\n### Oscilloscope outputs\n\nI checked with oscilloscope (Analog Discovery 2) on the SCL and SDA, together with `I2C Busy` flag on the failure/success of the SD initialization.\n\nFollowing is when the initialization fails:\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/fd4b486e-af1b-1c62-475d-07c9c945a453.png)\n\nThe 0x49, 0x20, 0x4D, 0x3A, 0x0A\u3000are commands for the SD initialization ( `'I', 0x20, 'M', ':', 0x0A` ).\n\n\nFollowing is when the initialization succeeds (trials after the first):\n\n![qiita.png](https://qiita-image-store.s3.amazonaws.com/0/32870/fc5da865-9395-2f21-ee85-9a276b6a931a.png)\n\n## Possible workaround\n\nTo initialize the SD correctly, I came up with the following workaroud\n\n1. SD initialization: fails\n2. wait for 200 msec\n3. SD initialization: succeeds\n\nAbout the step 2, the wait needs to be 200 msec. I tried 10, 50, 100 msec, but without success.\n\n", "tags": ["MSC-MOD20"]}