{"context": " More than 1 year has passed since last update.\u82f1\u8a9e\u570f\u306b\u306f\u7121\u7e01\u306e\u554f\u984c\u3068\u3057\u3066\u3001\n\u65e5\u672c\u3067CSV\u3092\u51fa\u529b\u3059\u308b\u306b\u306fSJIS\u3067\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002Excel\u306e\u305b\u3044\u3067\u3002\n\u3067\u3001FuelPHP\u3067CSV\u306e\u51fa\u529b\u306b\u306f\u3001\u672c\u6765RestController\u3092\u4f7f\u3046\u3068\u697d\u306a\u3093\u3060\u3051\u3069\u3001\nto_csv()\u95a2\u6570\u3092override\u3067\u304d\u306a\u3044\u7f60\u3002\n\u51e6\u7406\u3092\u8ffd\u3063\u304b\u3051\u304d\u308c\u3066\u306a\u3044\u3051\u3069\u3001COREPATH/classes/controller/rest.php \u306e\u3001\nresponse()\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u3067\u3001\n$this->response->body(Format::forge($data)->{'to_'.$this->format}());\n\u307f\u305f\u3044\u306bto_csv()\u3092\u8aad\u3093\u3067\u308b\u3093\u3060\u3051\u3069\u3001\nbootstrap.php\u3067override\u3057\u305fFormat\u306f\u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3060\u3068\u6b7b\u3093\u3067\u308b\u307d\u3044\uff1f\u3088\u304f\u308f\u304b\u3093\u306d\u3002\u3002\u3002\nRestController\u4f7f\u308f\u305a\u306bCSV\u3092\u51fa\u529b\u3059\u308b\u4e8b\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u56de\u907f\u3002\n\nformat.php\n<?php\n// app/classes/format.php \u3092\u4f5c\u6210\nclass Format extends Fuel\\Core\\Format {\n    /**\n     * CSV\u51fa\u529b\u3092SJIS-WIN\u3067\u8fd4\u3059\n     * @access public\n     * @param mixed $data\n     * @return string csv(sjis-win)\n     */\n    public function to_csv($data = null){\n        $csv = parent::to_csv($data);\n        $csv = mb_convert_encoding($csv, 'SJIS-win', 'UTF-8');\n        return $csv;\n    }\n}\n\n\n\nbootstrap.php\n<?php\n//(ry\n// app/bootstrap.php \u306e\u4e00\u90e8\u3092\u4fee\u6b63\nAutoloader::add_classes(array(\n    // Add classes you want to override here\n    // Example: 'View' => APPPATH.'classes/view.php',\n    'Format' => APPPATH . 'classes/format.php',\n));\n\n\n\nhoge.php\n<?php\n//(ry\n// TemplateController\u5185\u3067\u306e\u51fa\u529b\npublic function action_hoge(){\n    $data = array(0,1,2,3,4);\n    //\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7121\u52b9\u5316\u3057\u3066CSV\u3068\u3057\u3066\u51fa\u529b\n    $this->template = null;\n    $this->response->set_header('Content-Type', 'application/csv');\n    $this->response->set_header('Content-Disposition', 'attachment; filename=\"hoge.csv\"');\n    echo Format::forge($data)->to_csv();\n    return;\n}\n\n\n\u30c7\u30d0\u30c3\u30b0\u3084\u3063\u3066\u306a\u3044\u3051\u3069\u305f\u3076\u3093\u52d5\u304f\u3002\n\u82f1\u8a9e\u570f\u306b\u306f\u7121\u7e01\u306e\u554f\u984c\u3068\u3057\u3066\u3001\n\u65e5\u672c\u3067CSV\u3092\u51fa\u529b\u3059\u308b\u306b\u306fSJIS\u3067\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u3002Excel\u306e\u305b\u3044\u3067\u3002\n\n\u3067\u3001FuelPHP\u3067CSV\u306e\u51fa\u529b\u306b\u306f\u3001\u672c\u6765RestController\u3092\u4f7f\u3046\u3068\u697d\u306a\u3093\u3060\u3051\u3069\u3001\nto_csv()\u95a2\u6570\u3092override\u3067\u304d\u306a\u3044\u7f60\u3002\n\n\u51e6\u7406\u3092\u8ffd\u3063\u304b\u3051\u304d\u308c\u3066\u306a\u3044\u3051\u3069\u3001COREPATH/classes/controller/rest.php \u306e\u3001\nresponse()\u30e1\u30bd\u30c3\u30c9\u306e\u4e2d\u3067\u3001\n\n`$this->response->body(Format::forge($data)->{'to_'.$this->format}());`\n\n\u307f\u305f\u3044\u306bto_csv()\u3092\u8aad\u3093\u3067\u308b\u3093\u3060\u3051\u3069\u3001\nbootstrap.php\u3067override\u3057\u305fFormat\u306f\u3053\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3060\u3068\u6b7b\u3093\u3067\u308b\u307d\u3044\uff1f\u3088\u304f\u308f\u304b\u3093\u306d\u3002\u3002\u3002\n\nRestController\u4f7f\u308f\u305a\u306bCSV\u3092\u51fa\u529b\u3059\u308b\u4e8b\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u56de\u907f\u3002\n\n```php:format.php\n<?php\n// app/classes/format.php \u3092\u4f5c\u6210\nclass Format extends Fuel\\Core\\Format {\n\t/**\n\t * CSV\u51fa\u529b\u3092SJIS-WIN\u3067\u8fd4\u3059\n\t * @access public\n\t * @param mixed $data\n\t * @return string csv(sjis-win)\n\t */\n\tpublic function to_csv($data = null){\n\t\t$csv = parent::to_csv($data);\n\t\t$csv = mb_convert_encoding($csv, 'SJIS-win', 'UTF-8');\n\t\treturn $csv;\n\t}\n}\n```\n\n```php:bootstrap.php\n<?php\n//(ry\n// app/bootstrap.php \u306e\u4e00\u90e8\u3092\u4fee\u6b63\nAutoloader::add_classes(array(\n\t// Add classes you want to override here\n\t// Example: 'View' => APPPATH.'classes/view.php',\n\t'Format' => APPPATH . 'classes/format.php',\n));\n```\n\n```php:hoge.php\n<?php\n//(ry\n// TemplateController\u5185\u3067\u306e\u51fa\u529b\npublic function action_hoge(){\n\t$data = array(0,1,2,3,4);\n\t//\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u7121\u52b9\u5316\u3057\u3066CSV\u3068\u3057\u3066\u51fa\u529b\n\t$this->template = null;\n\t$this->response->set_header('Content-Type', 'application/csv');\n\t$this->response->set_header('Content-Disposition', 'attachment; filename=\"hoge.csv\"');\n\techo Format::forge($data)->to_csv();\n\treturn;\n}\n```\n\n\u30c7\u30d0\u30c3\u30b0\u3084\u3063\u3066\u306a\u3044\u3051\u3069\u305f\u3076\u3093\u52d5\u304f\u3002", "tags": ["PHP", "FuelPHP"]}