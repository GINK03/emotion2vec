{"context": "\n\n\u3053\u308c\u306f\u306a\u306b\uff1f\n\n\u30bf\u30a4\u30c8\u30eb\u3069\u304a\u308a\nStoryboard\u3092\u4f7f\u3063\u3066\u3084\u308b\u8a18\u4e8b\u306f\u3042\u308b\u304c\u3001\u4f7f\u308f\u305a\u306b\u3084\u308b\u8a18\u4e8b\u306f\u306a\u304b\u3063\u305f\u306e\u3067\nhttp://qiita.com/mishimay/items/619f9ce60b4fabc1612f\n\u306a\u3093\u3068\u304b\u51fa\u6765\u305f\u304c\u3001\u8272\u3005\u3068\u6539\u5584\u70b9\u3068\u304b\u3042\u308a\u3001\u3082\u3063\u3068\u7c21\u5358\u306b\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n\u30c7\u30e2\u306e\u30d3\u30eb\u30c9\u30bf\u30fc\u30b2\u30c3\u30c8\u306fiOS7\u3067\u3059\u3002\niOS7\u3092\u30b5\u30dd\u30fc\u30c8\u5bfe\u8c61\u306b\u542b\u3081\u306a\u3044\u5834\u5408\u306f\u3001inset\u306e\u90e8\u5206\u306a\u3069\u4e0d\u8981\u306a\u51e6\u7406\u304c\u5e7e\u3064\u304b\u51fa\u307e\u3059\u306e\u3067\u305d\u3053\u306f\u826f\u3057\u306a\u306b\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n\n\n\u3084\u308a\u65b9\n\n1. viewDidLoad\u3067 UITableView \u3068 UITextView \u306e\u4f5c\u6210\n\nUITableView\u306e\u30b9\u30bf\u30a4\u30eb\u306f\u3001UITableViewStyleGrouped\n\nUITextView\u306f\u3001cellForRowAtIndexPath\u3067\u30bb\u30eb\u306b\u8cbc\u308a\u4ed8\u3051\n\n\nViewController.m\n// \u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\nCGRect tableViewFrame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);\nself.tableView = [[UITableView alloc] initWithFrame:tableViewFrame\n                                              style:UITableViewStyleGrouped];\nself.tableView.dataSource = self;\nself.tableView.delegate = self;\n[self.view addSubview:self.tableView];\n\n// \u30c6\u30ad\u30b9\u30c8\u30d3\u30e5\u30fc\u4f5c\u6210\nCGRect textVieFrame = CGRectMake(0, 0,\n                                 self.view.frame.size.width,\n                                 [self textViewHeightWithText:nil\n                                                        width:self.view.frame.size.width]);\nself.textView = [[UITextView alloc] initWithFrame:textVieFrame];\nself.textView.font = [UIFont preferredFontForTextStyle:UIFontTextStyleBody];\nself.textView.scrollEnabled = NO;\nself.textView.returnKeyType = UIReturnKeyDefault;\nself.textView.delegate = self;\n\n\n\n2. viewDidLoad\u3067\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u901a\u77e5\u767b\u9332\n\nViewController.m\n// \u30ad\u30fc\u30dc\u30fc\u30c9\u8868\u793a\u30fb\u975e\u8868\u793a\u306e\u901a\u77e5\u767b\u9332\n[[NSNotificationCenter defaultCenter] addObserver:self\n                                         selector:@selector(keyboardWillShow:)\n                                             name:UIKeyboardWillShowNotification\n                                           object:nil];\n\n[[NSNotificationCenter defaultCenter] addObserver:self\n                                         selector:@selector(keyboardWillHide:)\n                                             name:UIKeyboardWillHideNotification\n                                           object:nil];\n\n\n\n3. UITextView \u306e\u9ad8\u3055\u3092\u7b97\u51fa\n\n\n[textView sizeToFit];\u3067\u5165\u529b\u5185\u5bb9\u306b\u5fdc\u3058\u3066\u9ad8\u3055\u3092\u5408\u308f\u305b\u308b\nMAX\u95a2\u6570\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u9ad8\u3055\u3068\u3001\u53ef\u5909\u3059\u308b\u9ad8\u3055\u3092\u6bd4\u8f03\u3057\u3066\u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u8fd4\u3059\n\n\nViewController.m\n- (CGFloat)textViewHeightWithText:(NSString *)text width:(CGFloat)width\n{\n    // \u5165\u529b\u5185\u5bb9\u306b\u5fdc\u3058\u3066\u9ad8\u3055\u3092\u7b97\u51fa\n    UITextView *textView = [[UITextView alloc] init];\n    textView.font = [UIFont preferredFontForTextStyle:UIFontTextStyleBody];\n    textView.text = text;\n    textView.frame = CGRectMake(0, 0, width, 0);\n    [textView sizeToFit];\n\n    return MAX(textView.frame.size.height, 80);\n}\n\n\n\n4. \u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u8868\u793a\u30fb\u975e\u8868\u793a\u306e\u901a\u77e5\n\n\n- (void)setupInsets\u304c\u5927\u4e8b\n\n\n\ninset.top \u306b\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u3068\u30ca\u30d3\u30b2\u30fc\u30b8\u30e7\u30f3\u30d0\u30fc\u306e\u9ad8\u3055\u3092\u8a2d\u5b9a\u3059\u308b\n\ninset.bottom \u306b\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u9ad8\u3055\u3092\u8a2d\u5b9a\u3059\u308b\n\n\n\u30ad\u30fc\u30dc\u30fc\u30c9\u304c\u8868\u793a\u30fb\u975e\u8868\u793a\u3055\u308c\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u4e0b\u8a18\u306e\u5024\u3092\u5207\u308a\u66ff\u3048\u308b\n\n\n self.tableView.contentInset\n\n self.tableView.scrollIndicatorInsets\n\n\n\n\n\nViewController.m\n- (void)keyboardWillShow:(NSNotification *)notification\n{\n    CGRect keyboardBounds = [[notification.userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];\n    self.keyboardHeight = keyboardBounds.size.height;\n\n    // \u5fc5\u8981\u306a\u9ad8\u3055\u3092\u53d6\u5f97\n    self.statusBarHeight = [UIApplication sharedApplication].statusBarFrame.size.height;\n    self.barHeight = self.statusBarHeight + self.navigationController.navigationBar.frame.size.height;\n\n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u30c6\u30ad\u30b9\u30c8\u30d3\u30e5\u30fc\u304c\u96a0\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n    [self setupInsets];\n}\n\n- (void)keyboardWillHide:(NSNotification *)notification\n{\n    self.keyboardHeight = 0;\n\n    // \u5143\u306b\u623b\u3059\n    [self setupInsets];\n}\n\n- (void)setupInsets\n{\n    UIEdgeInsets insets = UIEdgeInsetsMake(self.barHeight,0,self.keyboardHeight,0);\n    self.tableView.contentInset = insets;\n    self.tableView.scrollIndicatorInsets = insets;\n}\n\n\n\n5. UITableView \u306e\u30d8\u30c3\u30c0\u30fc\u306e\u9ad8\u3055\u3068\u30bb\u30eb\u306e\u9ad8\u3055\u3092\u6307\u5b9a\n\n\u30d8\u30c3\u30c0\u30fc\u306e\u9ad8\u3055\u306f\u8a08\u7b97\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u56fa\u5b9a\u306b\u3059\u308b\n\n\n\u56fa\u5b9a\u306b\u305b\u305a\u30d8\u30c3\u30c0\u30fc\u306e\u9ad8\u3055\u3092\u7b97\u51fa\u3067\u304d\u308b\u65b9\u6cd5\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u6b32\u3057\u3044\n\n\n\u30bb\u30eb\u306e\u9ad8\u3055\u306fUITextView\u306e\u9ad8\u3055\u306b\u5408\u308f\u305b\u3066\u66f4\u65b0\u3057\u3066\u3044\u304f \n\n\nViewController.m\n#pragma mark - <UITableViewDelegate>\n- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section\n{\n    return 60;\n}\n\n- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath\n{\n    return [self textViewHeightWithText:self.textView.text\n                                  width:self.view.frame.size.width];\n}\n\n\n\n6. UITextView \u306b\u6587\u5b57\u304c\u5165\u529b\u3055\u308c\u308b\u5ea6\u306b\u9ad8\u3055\u3092\u66f4\u65b0\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u9ad8\u3055\u3092\u8d85\u3048\u305f\u3068\u304d\u3001\u30bb\u30eb\u306e\u9ad8\u3055\u3092 [self.tableView beginUpdates]; \u3068 [self.tableView endUpdates];\u3067\u66f4\u65b0\n\u30ad\u30fc\u30dc\u30fc\u30c9\u3067 UITextView \u304c\u96a0\u308c\u3066\u3057\u307e\u3046\u3068\u304d\u3001\u5897\u3048\u305f\u9ad8\u3055\u306e\u5206\u3060\u3051\u4e0b\u306b\u30b9\u30af\u30ed\u30fc\u30eb\n\n\n\u3053\u3053\u3067\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306e\u9ad8\u3055\u3092\u8003\u616e\u3057\u306a\u3044\u3068\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306e\u9ad8\u3055\u5206\u3060\u3051\u4e0a\u4e0b\u306b\u30d0\u30a4\u30f3\u30d0\u30a4\u30f3\u3059\u308b\n\u306a\u305c\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306e\u9ad8\u3055\u3092\u8003\u616e\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304b\u3001\u307e\u3060\u3088\u304f\u308f\u304b\u3063\u3066\u306a\u3044\n\n\n\n\nViewController.m\n#pragma mark - <UITextViewDelegate>\n- (void)textViewDidChange:(UITextView *)textView\n{\n    [self updateTextViewHeight];\n}\n\n#pragma mark - \u9ad8\u3055\u306e\u8abf\u6574\n- (void)updateTextViewHeight\n{\n    CGFloat currentHeight = self.textView.frame.size.height;\n    CGFloat newHeight = [self textViewHeightWithText:self.textView.text\n                                               width:self.textView.frame.size.width];\n\n    // \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u9ad8\u3055\u3092\u8d85\u3048\u305f\u3068\u304d\n    if (self.textView.frame.size.height != newHeight) {\n        CGRect newFrame = CGRectMake(self.textView.frame.origin.x,self.textView.frame.origin.y,\n                                     self.textView.frame.size.width,newHeight);\n\n        [self.textView setFrame:newFrame];\n        [self.tableView beginUpdates];\n        [self.tableView endUpdates];\n    }\n\n    // UITextView\u304c\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u96a0\u308c\u308b\u3068\u304d\n    CGFloat heightForHeaderInSection = 60;\n    if ((self.barHeight + heightForHeaderInSection + newHeight) >\n         self.view.frame.size.height - self.statusBarHeight - self.keyboardHeight) {\n\n        // \u5897\u3048\u305f\u9ad8\u3055\u306e\u5206\u3060\u3051\u4e0b\u306b\u30b9\u30af\u30ed\u30fc\u30eb\n        [self.tableView setContentOffset:CGPointMake(0, self.tableView.contentOffset.y + (newHeight - currentHeight)) animated:YES];\n    }\n}\n\n\n\n\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fGist\u306b\u8cbc\u3063\u305f\n\nhttps://gist.github.com/masashi-sutou/0013575ed86ab638dd8a\n\n\n\u6539\u5584\u70b9\n\n\u9ad8\u3055\u3092\u66f4\u65b0\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067UITableViewCell\u306e\u5e95\u3068\u3001UITextView\u306e\u5e95\u304c\u6ed1\u3089\u304b\u306b\u8868\u793a\u3055\u308c\u306a\u3044\n\u3069\u3046\u3057\u305f\u3089\u3044\u3044\u306e\u304b\u5206\u304b\u3089\u3093\u304f\u3066\u59a5\u5354\n\n# \u3053\u308c\u306f\u306a\u306b\uff1f\n- \u30bf\u30a4\u30c8\u30eb\u3069\u304a\u308a\n- Storyboard\u3092\u4f7f\u3063\u3066\u3084\u308b\u8a18\u4e8b\u306f\u3042\u308b\u304c\u3001\u4f7f\u308f\u305a\u306b\u3084\u308b\u8a18\u4e8b\u306f\u306a\u304b\u3063\u305f\u306e\u3067\n- http://qiita.com/mishimay/items/619f9ce60b4fabc1612f\n- \u306a\u3093\u3068\u304b\u51fa\u6765\u305f\u304c\u3001\u8272\u3005\u3068\u6539\u5584\u70b9\u3068\u304b\u3042\u308a\u3001\u3082\u3063\u3068\u7c21\u5358\u306b\u3067\u304d\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\n- \u30c7\u30e2\u306e\u30d3\u30eb\u30c9\u30bf\u30fc\u30b2\u30c3\u30c8\u306fiOS7\u3067\u3059\u3002\n- iOS7\u3092\u30b5\u30dd\u30fc\u30c8\u5bfe\u8c61\u306b\u542b\u3081\u306a\u3044\u5834\u5408\u306f\u3001inset\u306e\u90e8\u5206\u306a\u3069\u4e0d\u8981\u306a\u51e6\u7406\u304c\u5e7e\u3064\u304b\u51fa\u307e\u3059\u306e\u3067\u305d\u3053\u306f\u826f\u3057\u306a\u306b\u3067\u304a\u9858\u3044\u3057\u307e\u3059\u3002\n  \n# \u3084\u308a\u65b9\n## 1. `viewDidLoad`\u3067 UITableView \u3068 UITextView \u306e\u4f5c\u6210\n- UITableView\u306e\u30b9\u30bf\u30a4\u30eb\u306f\u3001`UITableViewStyleGrouped`\n- UITextView\u306f\u3001`cellForRowAtIndexPath`\u3067\u30bb\u30eb\u306b\u8cbc\u308a\u4ed8\u3051\n\n```objc:ViewController.m\n// \u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\nCGRect tableViewFrame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);\nself.tableView = [[UITableView alloc] initWithFrame:tableViewFrame\n                                              style:UITableViewStyleGrouped];\nself.tableView.dataSource = self;\nself.tableView.delegate = self;\n[self.view addSubview:self.tableView];\n\n// \u30c6\u30ad\u30b9\u30c8\u30d3\u30e5\u30fc\u4f5c\u6210\nCGRect textVieFrame = CGRectMake(0, 0,\n                                 self.view.frame.size.width,\n                                 [self textViewHeightWithText:nil\n                                                        width:self.view.frame.size.width]);\nself.textView = [[UITextView alloc] initWithFrame:textVieFrame];\nself.textView.font = [UIFont preferredFontForTextStyle:UIFontTextStyleBody];\nself.textView.scrollEnabled = NO;\nself.textView.returnKeyType = UIReturnKeyDefault;\nself.textView.delegate = self;\n```\n\n\n## 2. `viewDidLoad`\u3067\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u901a\u77e5\u767b\u9332\n\n```objc:ViewController.m\n// \u30ad\u30fc\u30dc\u30fc\u30c9\u8868\u793a\u30fb\u975e\u8868\u793a\u306e\u901a\u77e5\u767b\u9332\n[[NSNotificationCenter defaultCenter] addObserver:self\n                                         selector:@selector(keyboardWillShow:)\n                                             name:UIKeyboardWillShowNotification\n                                           object:nil];\n\n[[NSNotificationCenter defaultCenter] addObserver:self\n                                         selector:@selector(keyboardWillHide:)\n                                             name:UIKeyboardWillHideNotification\n                                           object:nil];\n```\n\n\n## 3. UITextView \u306e\u9ad8\u3055\u3092\u7b97\u51fa\n- `[textView sizeToFit];`\u3067\u5165\u529b\u5185\u5bb9\u306b\u5fdc\u3058\u3066\u9ad8\u3055\u3092\u5408\u308f\u305b\u308b\n- MAX\u95a2\u6570\u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u9ad8\u3055\u3068\u3001\u53ef\u5909\u3059\u308b\u9ad8\u3055\u3092\u6bd4\u8f03\u3057\u3066\u72b6\u6cc1\u306b\u5fdc\u3058\u3066\u8fd4\u3059\n\n```objc:ViewController.m\n- (CGFloat)textViewHeightWithText:(NSString *)text width:(CGFloat)width\n{\n    // \u5165\u529b\u5185\u5bb9\u306b\u5fdc\u3058\u3066\u9ad8\u3055\u3092\u7b97\u51fa\n    UITextView *textView = [[UITextView alloc] init];\n    textView.font = [UIFont preferredFontForTextStyle:UIFontTextStyleBody];\n    textView.text = text;\n    textView.frame = CGRectMake(0, 0, width, 0);\n    [textView sizeToFit];\n    \n    return MAX(textView.frame.size.height, 80);\n}\n```\n\n\n## 4. \u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u8868\u793a\u30fb\u975e\u8868\u793a\u306e\u901a\u77e5\n- `- (void)setupInsets`\u304c\u5927\u4e8b\n - `inset.top` \u306b\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u3068\u30ca\u30d3\u30b2\u30fc\u30b8\u30e7\u30f3\u30d0\u30fc\u306e\u9ad8\u3055\u3092\u8a2d\u5b9a\u3059\u308b\n - `inset.bottom` \u306b\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u9ad8\u3055\u3092\u8a2d\u5b9a\u3059\u308b\n- \u30ad\u30fc\u30dc\u30fc\u30c9\u304c\u8868\u793a\u30fb\u975e\u8868\u793a\u3055\u308c\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u4e0b\u8a18\u306e\u5024\u3092\u5207\u308a\u66ff\u3048\u308b\n -  `self.tableView.contentInset`\n -  `self.tableView.scrollIndicatorInsets`\n\n```objc:ViewController.m\n- (void)keyboardWillShow:(NSNotification *)notification\n{\n    CGRect keyboardBounds = [[notification.userInfo objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];\n    self.keyboardHeight = keyboardBounds.size.height;\n    \n    // \u5fc5\u8981\u306a\u9ad8\u3055\u3092\u53d6\u5f97\n    self.statusBarHeight = [UIApplication sharedApplication].statusBarFrame.size.height;\n    self.barHeight = self.statusBarHeight + self.navigationController.navigationBar.frame.size.height;\n    \n    // \u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u30c6\u30ad\u30b9\u30c8\u30d3\u30e5\u30fc\u304c\u96a0\u308c\u306a\u3044\u3088\u3046\u306b\u3059\u308b\n    [self setupInsets];\n}\n\n- (void)keyboardWillHide:(NSNotification *)notification\n{\n    self.keyboardHeight = 0;\n    \n    // \u5143\u306b\u623b\u3059\n    [self setupInsets];\n}\n\n- (void)setupInsets\n{\n    UIEdgeInsets insets = UIEdgeInsetsMake(self.barHeight,0,self.keyboardHeight,0);\n    self.tableView.contentInset = insets;\n    self.tableView.scrollIndicatorInsets = insets;\n}\n```\n\n\n## 5. UITableView \u306e\u30d8\u30c3\u30c0\u30fc\u306e\u9ad8\u3055\u3068\u30bb\u30eb\u306e\u9ad8\u3055\u3092\u6307\u5b9a\n- \u30d8\u30c3\u30c0\u30fc\u306e\u9ad8\u3055\u306f\u8a08\u7b97\u3057\u3084\u3059\u3044\u3088\u3046\u306b\u56fa\u5b9a\u306b\u3059\u308b\n - \u56fa\u5b9a\u306b\u305b\u305a\u30d8\u30c3\u30c0\u30fc\u306e\u9ad8\u3055\u3092\u7b97\u51fa\u3067\u304d\u308b\u65b9\u6cd5\u304c\u3042\u308c\u3070\u6559\u3048\u3066\u6b32\u3057\u3044\n- \u30bb\u30eb\u306e\u9ad8\u3055\u306fUITextView\u306e\u9ad8\u3055\u306b\u5408\u308f\u305b\u3066\u66f4\u65b0\u3057\u3066\u3044\u304f \n\n```objc:ViewController.m\n#pragma mark - <UITableViewDelegate>\n- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section\n{\n    return 60;\n}\n\n- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath\n{\n    return [self textViewHeightWithText:self.textView.text\n                                  width:self.view.frame.size.width];\n}\n```\n\n\n## 6. UITextView \u306b\u6587\u5b57\u304c\u5165\u529b\u3055\u308c\u308b\u5ea6\u306b\u9ad8\u3055\u3092\u66f4\u65b0\n- \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u9ad8\u3055\u3092\u8d85\u3048\u305f\u3068\u304d\u3001\u30bb\u30eb\u306e\u9ad8\u3055\u3092 `[self.tableView beginUpdates];` \u3068 `[self.tableView endUpdates];`\u3067\u66f4\u65b0\n- \u30ad\u30fc\u30dc\u30fc\u30c9\u3067 UITextView \u304c\u96a0\u308c\u3066\u3057\u307e\u3046\u3068\u304d\u3001\u5897\u3048\u305f\u9ad8\u3055\u306e\u5206\u3060\u3051\u4e0b\u306b\u30b9\u30af\u30ed\u30fc\u30eb\n - **\u3053\u3053\u3067\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306e\u9ad8\u3055\u3092\u8003\u616e\u3057\u306a\u3044\u3068\u3001\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306e\u9ad8\u3055\u5206\u3060\u3051\u4e0a\u4e0b\u306b\u30d0\u30a4\u30f3\u30d0\u30a4\u30f3\u3059\u308b**\n - \u306a\u305c\u30b9\u30c6\u30fc\u30bf\u30b9\u30d0\u30fc\u306e\u9ad8\u3055\u3092\u8003\u616e\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u306e\u304b\u3001\u307e\u3060\u3088\u304f\u308f\u304b\u3063\u3066\u306a\u3044\n\n\n```objc:ViewController.m\n#pragma mark - <UITextViewDelegate>\n- (void)textViewDidChange:(UITextView *)textView\n{\n    [self updateTextViewHeight];\n}\n\n#pragma mark - \u9ad8\u3055\u306e\u8abf\u6574\n- (void)updateTextViewHeight\n{\n    CGFloat currentHeight = self.textView.frame.size.height;\n    CGFloat newHeight = [self textViewHeightWithText:self.textView.text\n                                               width:self.textView.frame.size.width];\n    \n    // \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u9ad8\u3055\u3092\u8d85\u3048\u305f\u3068\u304d\n    if (self.textView.frame.size.height != newHeight) {\n        CGRect newFrame = CGRectMake(self.textView.frame.origin.x,self.textView.frame.origin.y,\n                                     self.textView.frame.size.width,newHeight);\n        \n        [self.textView setFrame:newFrame];\n        [self.tableView beginUpdates];\n        [self.tableView endUpdates];\n    }\n    \n    // UITextView\u304c\u30ad\u30fc\u30dc\u30fc\u30c9\u3067\u96a0\u308c\u308b\u3068\u304d\n    CGFloat heightForHeaderInSection = 60;\n    if ((self.barHeight + heightForHeaderInSection + newHeight) >\n         self.view.frame.size.height - self.statusBarHeight - self.keyboardHeight) {\n        \n        // \u5897\u3048\u305f\u9ad8\u3055\u306e\u5206\u3060\u3051\u4e0b\u306b\u30b9\u30af\u30ed\u30fc\u30eb\n        [self.tableView setContentOffset:CGPointMake(0, self.tableView.contentOffset.y + (newHeight - currentHeight)) animated:YES];\n    }\n}\n```\n\n\n# \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fGist\u306b\u8cbc\u3063\u305f\n- https://gist.github.com/masashi-sutou/0013575ed86ab638dd8a\n\n\n# \u6539\u5584\u70b9\n- \u9ad8\u3055\u3092\u66f4\u65b0\u3059\u308b\u30bf\u30a4\u30df\u30f3\u30b0\u3067UITableViewCell\u306e\u5e95\u3068\u3001UITextView\u306e\u5e95\u304c\u6ed1\u3089\u304b\u306b\u8868\u793a\u3055\u308c\u306a\u3044\n- \u3069\u3046\u3057\u305f\u3089\u3044\u3044\u306e\u304b\u5206\u304b\u3089\u3093\u304f\u3066\u59a5\u5354\n", "tags": ["Objective-C", "UITextView", "iOS"]}