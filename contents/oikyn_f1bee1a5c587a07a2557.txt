{"context": " More than 1 year has passed since last update.\u53c2\u8003URL\nhttps://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md\n\n1. Packages / Dependencies\n\n\u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\nsudo apt-get update\nsudo apt-get upgrade\n\nvim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install -y vim\n\n\u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install -y build-essential zlib1g-dev libyaml-dev libssl-dev libgdbm-dev libreadline-dev libncurses5-dev libffi-dev  wget curl git-core openssh-server redis-server postfix checkinstall libxml2-dev libxslt-dev libcurl4-openssl-dev libicu-dev\n\nPython\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install python\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\u304c2.5+\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d (3.x\u306f\u307e\u3060\u30b5\u30dd\u30fc\u30c8\u5916)\npython --version\n\n2. Ruby\n\nRuby\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff06\u30b3\u30f3\u30d1\u30a4\u30eb\nmkdir /tmp/ruby && cd /tmp/ruby\nwget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p327.tar.gz\ntar xfvz ruby-1.9.3-p327.tar.gz\ncd ruby-1.9.3-p327\n./configure\nmake\nsudo make install\n\nBundler Gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo gem install bundler\n\n3. System Users\n\nGit and Gitolite\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210:\nsudo adduser \\\n  --system \\\n  --shell /bin/sh \\\n  --gecos 'Git Version Control' \\\n  --group \\\n  --disabled-password \\\n  --home /home/git \\\n  git\n\nGitLab\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210:\nsudo adduser --disabled-login --gecos 'GitLab' gitlab\n\n\u30b0\u30eb\u30fc\u30d7\u306e\u8ffd\u52a0\nsudo usermod -a -G git gitlab\n\nSSH\u30ad\u30fc\u306e\u751f\u6210\nsudo -u gitlab -H ssh-keygen -q -N '' -t rsa -f /home/gitlab/.ssh/id_rsa\n\n4. Gitolite\n\nGitolite\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30af\u30ed\u30fc\u30f3\u3059\u308b:\ncd /home/git\nsudo -u git -H git clone -b gl-v320 https://github.com/gitlabhq/gitolite.git /home/git/gitolite\n\nGitolite\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u74b0\u5883\u5909\u6570\u306b\u8a2d\u5b9a\nsudo -u git -H mkdir /home/git/bin\nsudo -u git -H sh -c 'printf \"%b\\n%b\\n\" \"PATH=\\$PATH:/home/git/bin\" \"export PATH\" >> /home/git/.profile'\nsudo -u git -H sh -c 'gitolite/install -ln /home/git/bin'\n\ngitlab\u30e6\u30fc\u30b6\u30fc\u306eSSH\u30ad\u30fc\u3092\u30b3\u30d4\u30fc\u3059\u308b\nsudo cp /home/gitlab/.ssh/id_rsa.pub /home/git/gitlab.pub\nsudo chmod 0444 /home/git/gitlab.pub\n\n\u4e0a\u8a18\u306e\u30ad\u30fc\u3092\u7ba1\u7406\u8005\u30ad\u30fc\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nsudo -u git -H sh -c \"PATH=/home/git/bin:$PATH; gitolite setup -pk /home/git/gitlab.pub\"\n\nGitolite\u3092git\u3067\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nsudo chmod 750 /home/git/.gitolite/\nsudo chown -R git:git /home/git/.gitolite/\n\n\u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\nsudo chmod -R ug+rwXs,o-rwx /home/git/repositories/\nsudo chown -R git:git /home/git/repositories/\n\nStrictHostKeyChecking\u3092\u7121\u52b9\u306b\u3059\u308b\necho \"Host localhost\n   StrictHostKeyChecking no\n   UserKnownHostsFile=/dev/null\" | sudo tee -a /etc/ssh/ssh_config\n\n\u8a2d\u5b9a\u30c6\u30b9\u30c8\nsudo -u gitlab -H git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin\n\n\u30c6\u30b9\u30c8\u3057\u3066OK\u3060\u3063\u305f\u3089\u30af\u30ed\u30fc\u30f3\u3057\u305f\u3082\u306e\u3092\u524a\u9664\nsudo rm -rf /tmp/gitolite-admin\n\n5. Database\n\nMySQL\n\nMySQL\u95a2\u9023\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install -y mysql-server mysql-client libmysqlclient-dev\n\nMySQL\u306b\u30ed\u30b0\u30a4\u30f3\n$ mysql -u root -p\n\nGitLab\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\nmysql> CREATE USER 'gitlab'@'localhost' IDENTIFIED BY '{$password}';\n\nGitLab\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\nmysql> CREATE DATABASE IF NOT EXISTS gitlabhq_production DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci;\n\nGitLab\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u8a2d\u5b9a\nmysql> GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER ON gitlabhq_production.* TO 'gitlab'@'localhost';\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5207\u65ad\nmysql> \\q\n\n\u4e0a\u8a18\u3067\u8a2d\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304b\u78ba\u8a8d\nsudo -u gitlab -H mysql -u gitlab -p -D gitlabhq_production\n\n6. GitLab\n\nGitLab\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncd /home/gitlab\n\nGitLab\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3059\u308b\nsudo -u gitlab -H git clone https://github.com/gitlabhq/gitlabhq.git gitlab\n\ngitlab\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3059\u308b\ncd /home/gitlab/gitlab\n\n\u5b89\u5b9a\u7248\u306b\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3059\u308b\nsudo -u gitlab -H git checkout 4-0-stable\n\n\u8a2d\u5b9a\n\ngitlab\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3059\u308b\ncd /home/gitlab/gitlab\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\nsudo -u gitlab -H cp config/gitlab.yml.example config/gitlab.yml\n\nMake sure to change \"localhost\" to the fully-qualified domain name of your\n\nhost serving GitLab where necessary\nsudo -u gitlab -H vim config/gitlab.yml\n\nMake sure GitLab can write to the log/ and tmp/ directories\nsudo chown -R gitlab log/\nsudo chown -R gitlab tmp/\nsudo chmod -R u+rwX  log/\nsudo chmod -R u+rwX  tmp/\n\nCopy the example Unicorn config\nsudo -u gitlab -H cp config/unicorn.rb.example config/unicorn.rb\n\nConfigure GitLab DB settings\n\nMysql\nsudo -u gitlab cp config/database.yml.mysql config/database.yml\n\nMake sure to update username/password in config/database.yml.\n\nInstall Gems\ncd /home/gitlab/gitlab\nsudo gem install charlock_holmes --version '0.6.9'\n\nFor mysql db\nsudo -u gitlab -H bundle install --deployment --without development test postgres\n\nConfigure Git\nsudo -u gitlab -H git config --global user.name \"GitLab\"\nsudo -u gitlab -H git config --global user.email \"gitlab@ec2----.ap-southeast-1.compute.amazonaws.com\"\n\nSetup GitLab Hooks\nsudo cp ./lib/hooks/post-receive /home/git/.gitolite/hooks/common/post-receive\nsudo chown git:git /home/git/.gitolite/hooks/common/post-receive\n\nInitialise Database and Activate Advanced Features\nsudo -u gitlab -H bundle exec rake gitlab:app:setup RAILS_ENV=production\n\nCheck Application Status\nsudo -u gitlab -H bundle exec rake gitlab:env:info RAILS_ENV=production\nsudo -u gitlab -H bundle exec rake gitlab:check RAILS_ENV=production\n\nInstall Init Script\n\nDownload the init script (will be /etc/init.d/gitlab):\nsudo wget https://raw.github.com/gitlabhq/gitlab-recipes/master/init.d/gitlab -P /etc/init.d/\nsudo chmod +x /etc/init.d/gitlab\n\nMake GitLab start on boot:\nsudo update-rc.d gitlab defaults 21\n\nStart your GitLab instance:\nsudo service gitlab start\nor\nsudo /etc/init.d/gitlab restart\n\n7. Nginx\n\nInstallation\nsudo apt-get install nginx\n\nSite Configuration\nsudo wget https://raw.github.com/gitlabhq/gitlab-recipes/master/nginx/gitlab -P /etc/nginx/sites-available/\nsudo ln -s /etc/nginx/sites-available/gitlab /etc/nginx/sites-enabled/gitlab\n\nChange YOUR_SERVER_IP and YOUR_SERVER_FQDN\n\n\nto the IP address and fully-qualified domain name\n\nof your host serving GitLab\nsudo vim /etc/nginx/sites-enabled/gitlab\nsudo rm /etc/nginx/sites-enabled/default\n\nRestart\nsudo /etc/init.d/nginx restart\n\n\u5b8c\u4e86\uff01\nVisit YOUR_SERVER for your first GitLab login. The setup has created an admin account for you. You can use it to log in:\n\n[\u91cd\u8981]\n\nport:60010\u3092\u3042\u3051\u3066\u304a\u304f\n\n\u53c2\u8003URL\nhttps://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md\n\n##1. Packages / Dependencies\n\n###### \u30b7\u30b9\u30c6\u30e0\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\nsudo apt-get update\nsudo apt-get upgrade\n\n###### vim\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install -y vim\n\n###### \u5fc5\u8981\u306a\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install -y build-essential zlib1g-dev libyaml-dev libssl-dev libgdbm-dev libreadline-dev libncurses5-dev libffi-dev  wget curl git-core openssh-server redis-server postfix checkinstall libxml2-dev libxslt-dev libcurl4-openssl-dev libicu-dev\n\n###### Python\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install python\n\n######  \u30d0\u30fc\u30b8\u30e7\u30f3\u304c2.5+\u3067\u3042\u308b\u3053\u3068\u3092\u78ba\u8a8d (3.x\u306f\u307e\u3060\u30b5\u30dd\u30fc\u30c8\u5916)\npython --version\n\n\n##2. Ruby\n###### Ruby\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff06\u30b3\u30f3\u30d1\u30a4\u30eb\nmkdir /tmp/ruby && cd /tmp/ruby\nwget http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p327.tar.gz\ntar xfvz ruby-1.9.3-p327.tar.gz\ncd ruby-1.9.3-p327\n./configure\nmake\nsudo make install\n\n###### Bundler Gem\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo gem install bundler\n\n\n##3. System Users\n###### Git and Gitolite\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210:\nsudo adduser \\\n  --system \\\n  --shell /bin/sh \\\n  --gecos 'Git Version Control' \\\n  --group \\\n  --disabled-password \\\n  --home /home/git \\\n  git\n  \n###### GitLab\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210:\nsudo adduser --disabled-login --gecos 'GitLab' gitlab\n\n###### \u30b0\u30eb\u30fc\u30d7\u306e\u8ffd\u52a0\nsudo usermod -a -G git gitlab\n\n###### SSH\u30ad\u30fc\u306e\u751f\u6210\nsudo -u gitlab -H ssh-keygen -q -N '' -t rsa -f /home/gitlab/.ssh/id_rsa\n\n\n##4. Gitolite\n###### Gitolite\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u30af\u30ed\u30fc\u30f3\u3059\u308b:\ncd /home/git\nsudo -u git -H git clone -b gl-v320 https://github.com/gitlabhq/gitolite.git /home/git/gitolite\n\n###### Gitolite\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u74b0\u5883\u5909\u6570\u306b\u8a2d\u5b9a\nsudo -u git -H mkdir /home/git/bin\nsudo -u git -H sh -c 'printf \"%b\\n%b\\n\" \"PATH=\\$PATH:/home/git/bin\" \"export PATH\" >> /home/git/.profile'\nsudo -u git -H sh -c 'gitolite/install -ln /home/git/bin'\n\n######  gitlab\u30e6\u30fc\u30b6\u30fc\u306eSSH\u30ad\u30fc\u3092\u30b3\u30d4\u30fc\u3059\u308b\nsudo cp /home/gitlab/.ssh/id_rsa.pub /home/git/gitlab.pub\nsudo chmod 0444 /home/git/gitlab.pub\n\n######  \u4e0a\u8a18\u306e\u30ad\u30fc\u3092\u7ba1\u7406\u8005\u30ad\u30fc\u3068\u3057\u3066\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nsudo -u git -H sh -c \"PATH=/home/git/bin:$PATH; gitolite setup -pk /home/git/gitlab.pub\"\n\n######  Gitolite\u3092git\u3067\u7ba1\u7406\u3067\u304d\u308b\u3088\u3046\u306b\u8a2d\u5b9a\nsudo chmod 750 /home/git/.gitolite/\nsudo chown -R git:git /home/git/.gitolite/\n\n###### \u30ec\u30dd\u30b8\u30c8\u30ea\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a2d\u5b9a\nsudo chmod -R ug+rwXs,o-rwx /home/git/repositories/\nsudo chown -R git:git /home/git/repositories/\n\n###### StrictHostKeyChecking\u3092\u7121\u52b9\u306b\u3059\u308b\necho \"Host localhost\n   StrictHostKeyChecking no\n   UserKnownHostsFile=/dev/null\" | sudo tee -a /etc/ssh/ssh_config\n   \n###### \u8a2d\u5b9a\u30c6\u30b9\u30c8\nsudo -u gitlab -H git clone git@localhost:gitolite-admin.git /tmp/gitolite-admin\n\n###### \u30c6\u30b9\u30c8\u3057\u3066OK\u3060\u3063\u305f\u3089\u30af\u30ed\u30fc\u30f3\u3057\u305f\u3082\u306e\u3092\u524a\u9664\nsudo rm -rf /tmp/gitolite-admin\n\n\n##5. Database\n###### MySQL\n###### MySQL\u95a2\u9023\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo apt-get install -y mysql-server mysql-client libmysqlclient-dev\n\n###### MySQL\u306b\u30ed\u30b0\u30a4\u30f3\n$ mysql -u root -p\n\n###### GitLab\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\nmysql> CREATE USER 'gitlab'@'localhost' IDENTIFIED BY '{$password}';\n\n###### GitLab\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\nmysql> CREATE DATABASE IF NOT EXISTS `gitlabhq_production` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`;\n\n###### GitLab\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u8a2d\u5b9a\nmysql> GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER ON `gitlabhq_production`.* TO 'gitlab'@'localhost';\n\n###### \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5207\u65ad\nmysql> \\q\n\n###### \u4e0a\u8a18\u3067\u8a2d\u5b9a\u3057\u305f\u30e6\u30fc\u30b6\u30fc\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u308b\u304b\u78ba\u8a8d\nsudo -u gitlab -H mysql -u gitlab -p -D gitlabhq_production\n\n\n##6. GitLab\n###### GitLab\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\ncd /home/gitlab\n\n###### GitLab\u30ec\u30dd\u30b8\u30c8\u30ea\u3092\u30af\u30ed\u30fc\u30f3\u3059\u308b\nsudo -u gitlab -H git clone https://github.com/gitlabhq/gitlabhq.git gitlab\n\n###### gitlab\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3059\u308b\ncd /home/gitlab/gitlab\n\n###### \u5b89\u5b9a\u7248\u306b\u30c1\u30a7\u30c3\u30af\u30a2\u30a6\u30c8\u3059\u308b\nsudo -u gitlab -H git checkout 4-0-stable\n\n###### \u8a2d\u5b9a\n###### gitlab\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3059\u308b\ncd /home/gitlab/gitlab\n\n###### \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u30b5\u30f3\u30d7\u30eb\u3092\u30b3\u30d4\u30fc\u3059\u308b\nsudo -u gitlab -H cp config/gitlab.yml.example config/gitlab.yml\n\n###### Make sure to change \"localhost\" to the fully-qualified domain name of your\n###### host serving GitLab where necessary\nsudo -u gitlab -H vim config/gitlab.yml\n\n###### Make sure GitLab can write to the log/ and tmp/ directories\nsudo chown -R gitlab log/\nsudo chown -R gitlab tmp/\nsudo chmod -R u+rwX  log/\nsudo chmod -R u+rwX  tmp/\n\n###### Copy the example Unicorn config\nsudo -u gitlab -H cp config/unicorn.rb.example config/unicorn.rb\n\n###### Configure GitLab DB settings\n###### Mysql\nsudo -u gitlab cp config/database.yml.mysql config/database.yml\n\n###### Make sure to update username/password in config/database.yml.\n\n###### Install Gems\ncd /home/gitlab/gitlab\n\nsudo gem install charlock_holmes --version '0.6.9'\n\n###### For mysql db\nsudo -u gitlab -H bundle install --deployment --without development test postgres\n\n\n###### Configure Git\nsudo -u gitlab -H git config --global user.name \"GitLab\"\nsudo -u gitlab -H git config --global user.email \"gitlab@ec2-**-**-**-**.ap-southeast-1.compute.amazonaws.com\"\n\n###### Setup GitLab Hooks\nsudo cp ./lib/hooks/post-receive /home/git/.gitolite/hooks/common/post-receive\nsudo chown git:git /home/git/.gitolite/hooks/common/post-receive\n\n###### Initialise Database and Activate Advanced Features\nsudo -u gitlab -H bundle exec rake gitlab:app:setup RAILS_ENV=production\n\n###### Check Application Status\nsudo -u gitlab -H bundle exec rake gitlab:env:info RAILS_ENV=production\nsudo -u gitlab -H bundle exec rake gitlab:check RAILS_ENV=production\n\n###### Install Init Script\n###### Download the init script (will be /etc/init.d/gitlab):\nsudo wget https://raw.github.com/gitlabhq/gitlab-recipes/master/init.d/gitlab -P /etc/init.d/\nsudo chmod +x /etc/init.d/gitlab\n\n###### Make GitLab start on boot:\nsudo update-rc.d gitlab defaults 21\n\n###### Start your GitLab instance:\nsudo service gitlab start\nor\nsudo /etc/init.d/gitlab restart\n\n\n##7. Nginx\n###### Installation\nsudo apt-get install nginx\n\n###### Site Configuration\nsudo wget https://raw.github.com/gitlabhq/gitlab-recipes/master/nginx/gitlab -P /etc/nginx/sites-available/\nsudo ln -s /etc/nginx/sites-available/gitlab /etc/nginx/sites-enabled/gitlab\n\n###### Change **YOUR_SERVER_IP** and **YOUR_SERVER_FQDN**\n###### to the IP address and fully-qualified domain name\n###### of your host serving GitLab\nsudo vim /etc/nginx/sites-enabled/gitlab\n\nsudo rm /etc/nginx/sites-enabled/default\n\n###### Restart\nsudo /etc/init.d/nginx restart\n \n###### \u5b8c\u4e86\uff01\nVisit YOUR_SERVER for your first GitLab login. The setup has created an admin account for you. You can use it to log in:\n\n##[\u91cd\u8981]\n# port:60010\u3092\u3042\u3051\u3066\u304a\u304f", "tags": ["GitLab", "AWS", "Ubuntu", "GitHub", "gitolite"]}