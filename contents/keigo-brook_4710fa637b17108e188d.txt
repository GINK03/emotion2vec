{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u3000ruby\u306egem\u306fthor\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u7c21\u5358\u306b\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b.  \u30b3\u30de\u30f3\u30c9\u3092\u3064\u3051\u308b\u76ee\u7684\u3068\u3057\u3066\u306f, \u306a\u3093\u3089\u304b\u306e\u64cd\u4f5c\uff08API\u3092\u53e9\u304f\uff0c\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u306a\u3069\uff09\u3092\u81ea\u52d5\u5316\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u304c\u591a\u3044\u3060\u308d\u3046.\n\u3000\u305d\u3046\u3044\u3063\u305f\u64cd\u4f5c\u306b\u306f, \u3057\u3070\u3057\u3070\u5165\u529b\u304c\u5fc5\u8981\u3068\u306a\u308b\u304c, \u6bce\u56de\u540c\u3058\u5165\u529b\u3092\u3059\u308b\u306e\u306f\u975e\u5e38\u306b\u3081\u3093\u3069\u304f\u3055\u3044.\n\u3000\u305d\u3053\u3067, \u5165\u529b\u3059\u308b\u60c5\u5831\u3084\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057, \u305d\u308c\u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u304f.  \u5177\u4f53\u7684\u306b\u306f, config\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3057, \u8a2d\u5b9a\u3092\u4fdd\u5b58\u3059\u308b\u3068\u3068\u3082\u306b, \u4ed6\u306e\u30b3\u30de\u30f3\u30c9\u304b\u3089\u305d\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3066\u307f\u308b.\n\u6700\u7d42\u7684\u306b\u3067\u304d\u3042\u304c\u308b\u3082\u306e\u306f, \u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3042\u308b.\n$ bundle exec mygem config\nInput your name: User name # User name\u3092\u5165\u529b\nUpdate Your name to [User name].\n\n$ bundle exec mygem hello \nHello!, User name # \u4fdd\u5b58\u3057\u305f\u30c7\u30fc\u30bf\u3092\u5229\u7528\u3059\u308b\n\n\n\u6e96\u5099: gem\u306e\u4f5c\u6210\u3068hello\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\n\ngem\u306e\u6e96\u5099\n\u307e\u305a\u306f\u3001bundler\u3092\u5229\u7528\u3057\u3066gem\u3092\u4f5c\u6210\u3059\u308b\u3002\n$ bundle gem mygem\n$ cd mygem\n\nmygem.gemspec\u306eTODO\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\u7de8\u96c6\u3059\u308b\u3002\u307e\u305f\u3001thor\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3057\u3066\u304a\u304f\u3002\n\n./mygem.gemspec\n  .\n  .\n  spec.summary       = %q{mygem}\n  spec.description   = %q{mygem}\n  spec.homepage      = \"#github\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306a\u3069\"\n  .\n  .\n  # thor\u3092\u4f9d\u5b58gem\u306b\u8ffd\u52a0\n  spec.add_dependency \"thor\"\nend\n\n\n\nhello\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\nthor\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u306a\u3044\u65b9\u306e\u305f\u3081\u306b,\n\u672c\u984c\u306b\u5165\u308b\u524d\u306bHello!\u3068\u51fa\u529b\u3059\u308b\u3060\u3051\u306ehello\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u3063\u3066\u307f\u308b.\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3059\u308b.\n\n/lib/mygem/command/hello.rb\nrequire 'mygem'\nrequire 'mygem/command'\n\nmodule Mygem\n  class Command < Thor\n    desc 'hello', 'say Hello!'\n    def hello\n      puts \"Hello!\"\n    end\n  end\nend\n\n\n\n\n/lib/mygem/command.rb\nrequire 'mygem'\nrequire 'thor'\nrequire 'mygem/command/hello'\n\nmodule Mygem\n  class Command < Thor\n  end\nend\n\n\n\n\n/lib/mygem.rb\nrequire \"mygem/version\"\nrequire \"mygem/command\"\n\nmodule Mygem\nend\n\n\n\ngem\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b.\n\n./mygem/exe/mygem\nrequire 'mygem'\nMygem::Command.start\n\n\n\u30d3\u30eb\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u5b9f\u884c\u3059\u308b.\n$ git add -A .\n$ git commit -m 'init'\n$ rake build\n$ rake install\n$ bundle install\n$ bundle exec myconfig\nCommands:\n  mygem hello           # Say Hello!\n  mygem help [COMMAND]  # Describe available commands or one specific command\n$ bundle exec mygem hello\nHello!\n\n\u3053\u308c\u3067mygem\u306bhello\u30b3\u30de\u30f3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u305f.\n\n\u672c\u984c: config\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\u3068\u5b9f\u884c\n\u3000\u4eca\u56de\u306f,\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u5148\u3092\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306e, gem\u540d\u306e\u96a0\u3057\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u3068\u3059\u308b.\n\u3064\u307e\u308a, ~/.mygem/settings.yml \u3067\u3042\u308b.\n\n\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u306e\u4f5c\u6210\n\u3000\u3055\u3066, config\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3059\u308b\u306b\u5f53\u305f\u308a, \u3084\u308a\u305f\u3044\u3053\u3068\u306f\u4ee5\u4e0b\u306e3\u3064\u3067\u3042\u308b.\n\n\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\n\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u4fdd\u5b58\u3059\u308b\n\u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u53d6\u5f97\u3059\u308b\n\n\u3000settings.yml\u306b\u5bfe\u3057\u3066\u4e0a\u306e\uff13\u3064\u3092\u884c\u3046\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3059\u308b.\n\n/lib/mygem/helper/config_helper.rb\nrequire 'fileutils'\nrequire 'yaml'\nrequire 'psych'\n\nmodule Mygem\n  # Configuration defaults\n  @config = {\n      name: 'default'\n  }\n  @valid_config_keys = @config.keys\n\n  # Configure through hash\n  def self.configure(opts = {})\n    self.config\n    opts.each do |k, v|\n      @config[k.to_sym] = v if @valid_config_keys.include? k.to_sym\n    end\n    self.save_config\n  end\n\n  def self.get_config_path\n    config_path = Dir.home + '/.mygem'\n    if Dir.exists?(config_path)\n      # use user settings\n      config_path\n    else\n      raise \"Can't find config directory. please init by command: 'mygem config'.'\"\n    end\n  end\n\n  # config\u3092yaml\u304b\u3089@cofig\u306b\u53d6\u5f97\n  def self.config\n    yml_path = get_config_path + '/settings.yml'\n    yml_file = YAML.load_file(yml_path)\n    if yml_file\n      @config = yml_file\n    else\n      File.open(yml_path, 'w') { |f| YAML.dump(@config, f) }\n    end\n  end\n\n  # \u73fe\u5728\u306e@config\u3092yaml\u306b\u4fdd\u5b58\n  def self.save_config\n    yml_path = get_config_path + '/settings.yml'\n    if File.exists?(yml_path)\n      File.open(yml_path, 'w') { |f| YAML.dump(@config, f) }\n    else\n      raise \"Can't find #{yml_path}. please set configure.\"\n    end\n  end\nend\n\n\n\n\n/lib/mygem.rb\nrequire 'fileutils'\nrequire 'yaml'\nrequire 'psych'\nrequire \"mygem/version\"\nrequire \"mygem/command\"\nrequire 'mygem/helper/config_helper' # \u8ffd\u52a0\n\nmodule Mygem\nend\n\n\nconfig_helper\u3067\u306f, Mygem.configure(name: 'name')\u3068\u3057\u305f\u5f8c\u3067, save_config\u3067\u73fe\u5728\u306econfig\u3092yaml\u306b\u4fdd\u5b58\u3059\u308b.\n\u305d\u3057\u3066, \u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u3057\u3066\u3042\u308c\u3070 Myconfig.config[:name] \u3067\u30c7\u30fc\u30bf\u304c\u53d6\u308a\u51fa\u305b\u308b\u3088\u3046\u306b\u306a\u308b.\n\nconfig\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\n\u3000config\u306e\u8a2d\u5b9a, \u4fdd\u5b58, \u53c2\u7167\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067, \u3044\u3088\u3044\u3088config\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3059\u308b.\n\u3000config\u30b3\u30de\u30f3\u30c9\u3067\u3084\u308b\u3053\u3068\u306f, \u4ee5\u4e0b\u306e\uff13\u3064\u3067\u3042\u308b.\n\n\u521d\u56de\u8d77\u52d5\u6642\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n\u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\n\u5165\u529b\u3092\u8a2d\u5b9a\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\n\n\u3000\u3053\u308c\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3059\u308b.\n\n/mygem/lib/mygem/command/config.rb\nrequire 'mygem'\nrequire 'mygem/command'\n\nmodule Mygem\n  class Command < Thor\n    desc 'config', 'change settings'\n    def config\n      # \u521d\u56de\u8d77\u52d5\u6642\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n      config_path = Dir.home + '/.mygem'\n      if Dir.exists?(config_path)\n        puts \"Your current name is [#{Mygem.config[:name]}].\"\n      else\n        Dir.mkdir(config_path)\n        yml_path = Mygem.get_config_path + '/settings.yml '\n        File.open(yml_path, 'w').close\n      end\n\n      # \u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\n      print 'Input your name: '\n      loop do\n        s = $stdin.gets.chomp!\n        if s.size != 0\n          # \u8a2d\u5b9a\u3092\u66f4\u65b0\n          Mygem.configure(name: s)\n          break\n        else\n          puts 'Invalid Name. please try again:'\n        end\n      end\n      puts \"Update Your name to [#{Mygem.config[:name]}].\"\n    end\n  end\nend\n\n\n\n\n\n/lib/myconfig/command.rb\nrequire 'myconfig'\nrequire 'thor'\nrequire 'myconfig/command/hello'\nrequire 'myconfig/command/config' # \u8ffd\u52a0\n\nmodule Myconfig\n  class Command < Thor\n  end\nend\n\n\n\n\n\u8a2d\u5b9a\u3092\u5229\u7528\u3059\u308b\n\u3000\u3053\u308c\u3067\u81ea\u7531\u306bname\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067, \u6700\u5f8c\u306bhello\u3092\u66f4\u65b0\u3057\u3066\u8a2d\u5b9a\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3059\u308b.\n\n/mygem/lib/mygem/command/hello.rb\nrequire 'mygem'\nrequire 'mygem/command'\n\nmodule Mygem\n  class Command < Thor\n    desc 'hello', 'call your name and say Hello!'\n    def hello\n      puts \"Hello, #{Mygem.config[:name]}!\"\n    end\n  end\nend\n\n\n\n\u4ee5\u4e0a\u3067\u5b8c\u6210\u3057\u305f\u306e\u3067, \u30d3\u30eb\u30c9&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u3063\u3066\u307f\u308b.\n$ rake build; rake install\n$ bundle install\n$ bundle exec mygem\nCommands:\n  mygem config          # Change settings\n  mygem hello           # Call your name and say Hello!\n  mygem help [COMMAND]  # Describe available commands or one specific command\n$ bundle exec mygem hello\n# \u8a2d\u5b9a\u3092\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\n$ bundle exec mygem config                                                                                                                             \nInput your name: Myname\nUpdate Your name to [Myname].\n$ bundle exec mygem hello\nHello!, Myname\n$ bundle exec mygem config\nYour current name is [Myname].  # \u73fe\u5728\u306e\u8a2d\u5b9a\u304c\u8868\u793a\u3055\u308c\u308b\nInput your name: New Name\nUpdate Your name to [New Name]. # \u8a2d\u5b9a\u3092\u66f4\u65b0\n$ bundle exec mygem hello\nHello!, New Name                # \u65b0\u3057\u3044\u540d\u524d\u304c\u8868\u793a\u3055\u308c\u308b\n\n\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3066\u307f\u308b\u3068, \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b.\n\n~/.myconfig/settings.yml\n---\n:name: New Name\n\n\n\u304a\u308f\u308a\n\n\u53c2\u8003\n\u4eca\u56de\u4f5c\u6210\u3057\u305fgem\nhttps://github.com/keigo-brook/gem_myconfig\nhttp://qiita.com/kasaharu/items/c84d393cf7fa13cc4b3d\nhttp://stackoverflow.com/questions/6233124/where-to-place-access-config-file-in-gem\n# \u306f\u3058\u3081\u306b\n\u3000ruby\u306egem\u306fthor\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u7c21\u5358\u306b\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b.  \u30b3\u30de\u30f3\u30c9\u3092\u3064\u3051\u308b\u76ee\u7684\u3068\u3057\u3066\u306f, \u306a\u3093\u3089\u304b\u306e\u64cd\u4f5c\uff08API\u3092\u53e9\u304f\uff0c\u30d5\u30a1\u30a4\u30eb\u751f\u6210\u306a\u3069\uff09\u3092\u81ea\u52d5\u5316\u3059\u308b\u3068\u3044\u3046\u3082\u306e\u304c\u591a\u3044\u3060\u308d\u3046.\n\u3000\u305d\u3046\u3044\u3063\u305f\u64cd\u4f5c\u306b\u306f, \u3057\u3070\u3057\u3070\u5165\u529b\u304c\u5fc5\u8981\u3068\u306a\u308b\u304c, \u6bce\u56de\u540c\u3058\u5165\u529b\u3092\u3059\u308b\u306e\u306f\u975e\u5e38\u306b\u3081\u3093\u3069\u304f\u3055\u3044.\n\u3000\u305d\u3053\u3067, \u5165\u529b\u3059\u308b\u60c5\u5831\u3084\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3057, \u305d\u308c\u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u306b\u3064\u3044\u3066\u66f8\u304f.  \u5177\u4f53\u7684\u306b\u306f, config\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3057, \u8a2d\u5b9a\u3092\u4fdd\u5b58\u3059\u308b\u3068\u3068\u3082\u306b, \u4ed6\u306e\u30b3\u30de\u30f3\u30c9\u304b\u3089\u305d\u306e\u60c5\u5831\u3092\u5229\u7528\u3057\u3066\u307f\u308b.\n\n \u6700\u7d42\u7684\u306b\u3067\u304d\u3042\u304c\u308b\u3082\u306e\u306f, \u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3082\u306e\u3067\u3042\u308b.\n\n```sh\n$ bundle exec mygem config\nInput your name: User name # User name\u3092\u5165\u529b\nUpdate Your name to [User name].\n\n$ bundle exec mygem hello \nHello!, User name # \u4fdd\u5b58\u3057\u305f\u30c7\u30fc\u30bf\u3092\u5229\u7528\u3059\u308b\n```\n\n# \u6e96\u5099: gem\u306e\u4f5c\u6210\u3068hello\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\n\n## gem\u306e\u6e96\u5099\n\u307e\u305a\u306f\u3001bundler\u3092\u5229\u7528\u3057\u3066gem\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n```sh\n$ bundle gem mygem\n$ cd mygem\n```\n\nmygem.gemspec\u306eTODO\u3068\u306a\u3063\u3066\u3044\u308b\u3068\u3053\u308d\u3092\u7de8\u96c6\u3059\u308b\u3002\u307e\u305f\u3001thor\u3092\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3057\u3066\u304a\u304f\u3002\n\n```rb:./mygem.gemspec\n  .\n  .\n  spec.summary       = %q{mygem}\n  spec.description   = %q{mygem}\n  spec.homepage      = \"#github\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306a\u3069\"\n  .\n  .\n  # thor\u3092\u4f9d\u5b58gem\u306b\u8ffd\u52a0\n  spec.add_dependency \"thor\"\nend\n```\n\n## hello\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\nthor\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u306a\u3044\u65b9\u306e\u305f\u3081\u306b,\n\u672c\u984c\u306b\u5165\u308b\u524d\u306bHello!\u3068\u51fa\u529b\u3059\u308b\u3060\u3051\u306ehello\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u3063\u3066\u307f\u308b.\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3059\u308b.\n\n```./lib/mygem/command/hello.rb\nrequire 'mygem'\nrequire 'mygem/command'\n\nmodule Mygem\n  class Command < Thor\n    desc 'hello', 'say Hello!'\n    def hello\n      puts \"Hello!\"\n    end\n  end\nend\n\n```\n\n```./lib/mygem/command.rb\nrequire 'mygem'\nrequire 'thor'\nrequire 'mygem/command/hello'\n\nmodule Mygem\n  class Command < Thor\n  end\nend\n\n```\n\n```./lib/mygem.rb\nrequire \"mygem/version\"\nrequire \"mygem/command\"\n\nmodule Mygem\nend\n\n```\n\ngem\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3059\u308b.\n\n```rb:./mygem/exe/mygem\nrequire 'mygem'\nMygem::Command.start\n```\n\n\u30d3\u30eb\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff06\u5b9f\u884c\u3059\u308b.\n\n```sh\n$ git add -A .\n$ git commit -m 'init'\n$ rake build\n$ rake install\n$ bundle install\n$ bundle exec myconfig\nCommands:\n  mygem hello           # Say Hello!\n  mygem help [COMMAND]  # Describe available commands or one specific command\n$ bundle exec mygem hello\nHello!\n```\n\n\u3053\u308c\u3067mygem\u306bhello\u30b3\u30de\u30f3\u30c9\u304c\u8ffd\u52a0\u3055\u308c\u305f.\n\n# \u672c\u984c: config\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\u3068\u5b9f\u884c\n\u3000\u4eca\u56de\u306f,\u30c7\u30fc\u30bf\u306e\u4fdd\u5b58\u5148\u3092\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306e, gem\u540d\u306e\u96a0\u3057\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u3068\u3059\u308b.\n\u3064\u307e\u308a, ~/.mygem/settings.yml \u3067\u3042\u308b.\n## \u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u306e\u4f5c\u6210\n\u3000\u3055\u3066, config\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3059\u308b\u306b\u5f53\u305f\u308a, \u3084\u308a\u305f\u3044\u3053\u3068\u306f\u4ee5\u4e0b\u306e3\u3064\u3067\u3042\u308b.\n\n- \u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u8a2d\u5b9a\u3059\u308b\n- \u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u4fdd\u5b58\u3059\u308b\n- \u30b3\u30f3\u30d5\u30a3\u30b0\u3092\u53d6\u5f97\u3059\u308b\n\n\u3000settings.yml\u306b\u5bfe\u3057\u3066\u4e0a\u306e\uff13\u3064\u3092\u884c\u3046\u30d8\u30eb\u30d1\u30fc\u30e1\u30bd\u30c3\u30c9\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4f5c\u6210\u3059\u308b.\n\n```./lib/mygem/helper/config_helper.rb\nrequire 'fileutils'\nrequire 'yaml'\nrequire 'psych'\n\nmodule Mygem\n  # Configuration defaults\n  @config = {\n      name: 'default'\n  }\n  @valid_config_keys = @config.keys\n\n  # Configure through hash\n  def self.configure(opts = {})\n    self.config\n    opts.each do |k, v|\n      @config[k.to_sym] = v if @valid_config_keys.include? k.to_sym\n    end\n    self.save_config\n  end\n\n  def self.get_config_path\n    config_path = Dir.home + '/.mygem'\n    if Dir.exists?(config_path)\n      # use user settings\n      config_path\n    else\n      raise \"Can't find config directory. please init by command: 'mygem config'.'\"\n    end\n  end\n\n  # config\u3092yaml\u304b\u3089@cofig\u306b\u53d6\u5f97\n  def self.config\n    yml_path = get_config_path + '/settings.yml'\n    yml_file = YAML.load_file(yml_path)\n    if yml_file\n      @config = yml_file\n    else\n      File.open(yml_path, 'w') { |f| YAML.dump(@config, f) }\n    end\n  end\n\n  # \u73fe\u5728\u306e@config\u3092yaml\u306b\u4fdd\u5b58\n  def self.save_config\n    yml_path = get_config_path + '/settings.yml'\n    if File.exists?(yml_path)\n      File.open(yml_path, 'w') { |f| YAML.dump(@config, f) }\n    else\n      raise \"Can't find #{yml_path}. please set configure.\"\n    end\n  end\nend\n\n```\n\n```./lib/mygem.rb\nrequire 'fileutils'\nrequire 'yaml'\nrequire 'psych'\nrequire \"mygem/version\"\nrequire \"mygem/command\"\nrequire 'mygem/helper/config_helper' # \u8ffd\u52a0\n\nmodule Mygem\nend\n```\n\nconfig_helper\u3067\u306f, Mygem.configure(name: 'name')\u3068\u3057\u305f\u5f8c\u3067, save_config\u3067\u73fe\u5728\u306econfig\u3092yaml\u306b\u4fdd\u5b58\u3059\u308b.\n\u305d\u3057\u3066, \u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u3057\u3066\u3042\u308c\u3070 Myconfig.config[:name] \u3067\u30c7\u30fc\u30bf\u304c\u53d6\u308a\u51fa\u305b\u308b\u3088\u3046\u306b\u306a\u308b.\n\n## config\u30b3\u30de\u30f3\u30c9\u306e\u4f5c\u6210\n\u3000config\u306e\u8a2d\u5b9a, \u4fdd\u5b58, \u53c2\u7167\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067, \u3044\u3088\u3044\u3088config\u30b3\u30de\u30f3\u30c9\u3092\u4f5c\u6210\u3059\u308b.\n\u3000config\u30b3\u30de\u30f3\u30c9\u3067\u3084\u308b\u3053\u3068\u306f, \u4ee5\u4e0b\u306e\uff13\u3064\u3067\u3042\u308b.\n\n- \u521d\u56de\u8d77\u52d5\u6642\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n- \u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\n- \u5165\u529b\u3092\u8a2d\u5b9a\u3068\u3057\u3066\u4fdd\u5b58\u3059\u308b\n\n\u3000\u3053\u308c\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3059\u308b.\n\n``` ./mygem/lib/mygem/command/config.rb\nrequire 'mygem'\nrequire 'mygem/command'\n\nmodule Mygem\n  class Command < Thor\n    desc 'config', 'change settings'\n    def config\n      # \u521d\u56de\u8d77\u52d5\u6642\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n      config_path = Dir.home + '/.mygem'\n      if Dir.exists?(config_path)\n        puts \"Your current name is [#{Mygem.config[:name]}].\"\n      else\n        Dir.mkdir(config_path)\n        yml_path = Mygem.get_config_path + '/settings.yml '\n        File.open(yml_path, 'w').close\n      end\n\n      # \u5165\u529b\u3092\u53d7\u3051\u4ed8\u3051\u308b\n      print 'Input your name: '\n      loop do\n        s = $stdin.gets.chomp!\n        if s.size != 0\n          # \u8a2d\u5b9a\u3092\u66f4\u65b0\n          Mygem.configure(name: s)\n          break\n        else\n          puts 'Invalid Name. please try again:'\n        end\n      end\n      puts \"Update Your name to [#{Mygem.config[:name]}].\"\n    end\n  end\nend\n\n\n```\n\n``` ./lib/myconfig/command.rb\nrequire 'myconfig'\nrequire 'thor'\nrequire 'myconfig/command/hello'\nrequire 'myconfig/command/config' # \u8ffd\u52a0\n\nmodule Myconfig\n  class Command < Thor\n  end\nend\n\n```\n\n## \u8a2d\u5b9a\u3092\u5229\u7528\u3059\u308b\n\u3000\u3053\u308c\u3067\u81ea\u7531\u306bname\u3092\u8a2d\u5b9a\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067, \u6700\u5f8c\u306bhello\u3092\u66f4\u65b0\u3057\u3066\u8a2d\u5b9a\u3092\u5229\u7528\u3059\u308b\u3088\u3046\u306b\u3059\u308b.\n\n``` ./mygem/lib/mygem/command/hello.rb\nrequire 'mygem'\nrequire 'mygem/command'\n\nmodule Mygem\n  class Command < Thor\n    desc 'hello', 'call your name and say Hello!'\n    def hello\n      puts \"Hello, #{Mygem.config[:name]}!\"\n    end\n  end\nend\n\n```\n\n\u4ee5\u4e0a\u3067\u5b8c\u6210\u3057\u305f\u306e\u3067, \u30d3\u30eb\u30c9&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u3063\u3066\u307f\u308b.\n\n```sh\n$ rake build; rake install\n$ bundle install\n$ bundle exec mygem\nCommands:\n  mygem config          # Change settings\n  mygem hello           # Call your name and say Hello!\n  mygem help [COMMAND]  # Describe available commands or one specific command\n$ bundle exec mygem hello\n# \u8a2d\u5b9a\u3092\u3057\u3066\u3044\u306a\u3044\u306e\u3067\u30a8\u30e9\u30fc\u304c\u8868\u793a\u3055\u308c\u308b\n$ bundle exec mygem config                                                                                                                             \nInput your name: Myname\nUpdate Your name to [Myname].\n$ bundle exec mygem hello\nHello!, Myname\n$ bundle exec mygem config\nYour current name is [Myname].  # \u73fe\u5728\u306e\u8a2d\u5b9a\u304c\u8868\u793a\u3055\u308c\u308b\nInput your name: New Name\nUpdate Your name to [New Name]. # \u8a2d\u5b9a\u3092\u66f4\u65b0\n$ bundle exec mygem hello\nHello!, New Name                # \u65b0\u3057\u3044\u540d\u524d\u304c\u8868\u793a\u3055\u308c\u308b\n```\n\n\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u30d5\u30a1\u30a4\u30eb\u3092\u898b\u3066\u307f\u308b\u3068, \u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b.\n\n```yaml:~/.myconfig/settings.yml\n---\n:name: New Name\n```\n\n\u304a\u308f\u308a\n\n# \u53c2\u8003\n\u4eca\u56de\u4f5c\u6210\u3057\u305fgem\nhttps://github.com/keigo-brook/gem_myconfig\n\nhttp://qiita.com/kasaharu/items/c84d393cf7fa13cc4b3d\n\nhttp://stackoverflow.com/questions/6233124/where-to-place-access-config-file-in-gem\n", "tags": ["Ruby", "Gem", "thor"]}