{"tags": ["Unity", "Android", "gradle"], "context": "Unity5.5b6\u3067\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n\nUnity5.5\u3067\u306f\u3001Build Settings\u306b Build System \u3068\u3044\u3046\u9805\u76ee\u304c\u5897\u3048\u3001\nGradle\u306b\u3088\u308b\u30d3\u30eb\u30c9\u304c\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001build.gradle \u304c\u4f7f\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\u3068\u306f\u8a00\u3048\u3001\u5f53\u9762\u306fbuild.gradle\u3092\u624b\u8efd\u306b\u7de8\u96c6\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3001\n\u4e00\u65e6Android\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Export\u3059\u308b\u304b\u3001\u88cf\u6280\u7684\u306b\nPlaybackEngines/AndroidPlayer/Tools/GradleTemplates/\n\u306b\u3042\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u66f8\u304d\u63db\u3048\u308c\u3070\u4e00\u5fdc\u5909\u66f4\u3067\u304d\u308b\u3001\u3068\u3044\u3046\u72b6\u6cc1\u306e\u3088\u3046\u3067\u3059\u3002\nhttps://forum.unity3d.com/threads/android-and-the-new-gradle-build-system.432113/\n\nThat is not supported in the first version. But...\nThe templates used for creating the build.gradle files are in PlaybackEngines/AndroidPlayer/Tools/GradleTemplates\ninside the Unity application directory, so as a hack in the current version you can try changing the mainTemplate.gradle directly.\nMost likely we will add support for providing your own template inside your project in an upcoming patch release.\n\n\u305d\u306e\u3046\u3061\u5bfe\u5fdc\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u73fe\u5728\u306f\u3053\u3046\u3044\u3063\u305f\u72b6\u6cc1\u306a\u306e\u3067\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u7121\u7406\u3084\u308a\u5bfe\u5fdc\u3057\u3066\u307f\u307e\u3059\u3002\n[\u8ffd\u8a18] 5.5.2\u304b\u3089\u306f Plugins/Android/build.gradle \u3067\u4e0a\u66f8\u304d\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002\nAndroid\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092gradle\u5f62\u5f0f\u3067Export\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\n\u4ee5\u4e0b\u306e\u624b\u9806\u3067build.gradle\u3092\u4e0a\u66f8\u304d\u3057\u3064\u3064\u3001\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nAndroid\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(gradle\u5f62\u5f0f)\u3092Export\nExport\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4e2d\u306ebuild.gradle\u3092\u3001Plugins/Android/build.gradle\u306b\u5dee\u3057\u66ff\u3048\u308b\ngradle\u3067\u30d3\u30eb\u30c9\u3059\u308b\n\n\u3053\u308c\u3092\u5b9f\u88c5\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092GitHub\u306b\u4e0a\u3052\u307e\u3057\u305f\u3002 (2016/10/12\u66f4\u65b0)\nhttps://github.com/tkyaji/UnityAndroidGradleBuild\nAndroidGradleBuild.unitypackage\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3068\u3001Editor\u914d\u4e0b\u306b\u30d3\u30eb\u30c9\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u8a2d\u7f6e\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u306b Build -> Gradle Build\u3068\u3044\u3046\u9805\u76ee\u304c\u8ffd\u52a0\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u30d3\u30eb\u30c9\u304c\u8d70\u308a\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3053\u3068\u3067\u3001\u30d3\u30eb\u30c9\u6642\u306bbuild.gradle\u3092\u7de8\u96c6\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n// 1. add classpath\nrootGradleElement.AddElement(new GradleParser.GradleTextElement(\"classpath 'com.google.gms:google-services:3.0.0'\"), \"buildscript\", \"dependencies\");\n// 2. add dependencies compile\nrootGradleElement.AddElement(new GradleParser.GradleTextElement(\"compile 'com.google.firebase:firebase-core:9.6.1'\"), \"dependencies\");\n// 3. add apply plugin\nrootGradleElement.AddElement(new GradleParser.GradleTextElement(\"apply plugin: 'com.google.gms.google-services'\"));\n\n\u8a73\u3057\u304f\u306f\u30b5\u30f3\u30d7\u30eb\u30af\u30e9\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nSampleGradleSettings.cs\nbuild.gradle\u304c\u4f7f\u3048\u308b\u3068\u3001PlayServicesResolver \u3092\u4f7f\u3063\u3066aar\u5165\u308c\u305f\u308a\u3068\u304b\u304c\u4e0d\u8981\u306b\u306a\u3063\u3066\u3001\n\u30e9\u30a4\u30d6\u30e9\u30ea\u5468\u308a\u3067\u306f\u3060\u3044\u3076\u4fbf\u5229\u306b\u306a\u308b\u306e\u3067\u3068\u3066\u3082\u5b09\u3057\u3044\u3067\u3059\u3002\n\n\u4f59\u8ac7\nFirebase\u3092\u4f7f\u3046\u969b\u3001classpath 'com.google.gms:google-services:3.0.0'\n \u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3001\nUnity\u3067\u306f\u30e0\u30ea\u3060\u3068\u8ae6\u3081\u304b\u3051\u3066\u3044\u305f\u3093\u3067\u3059\u304c\u3001\u3053\u308c\u3067\u306a\u3093\u3068\u304b\u52d5\u304b\u305b\u308b\u304b\u306a\uff1f\nUnity5.5b6\u3067\u78ba\u8a8d\u3057\u3066\u3044\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/19872/ccbf64ee-3d84-efa5-0883-3bc8a7f60108.png)\n\nUnity5.5\u3067\u306f\u3001Build Settings\u306b **Build System** \u3068\u3044\u3046\u9805\u76ee\u304c\u5897\u3048\u3001\n**Gradle**\u306b\u3088\u308b\u30d3\u30eb\u30c9\u304c\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3064\u307e\u308a\u3001**build.gradle \u304c\u4f7f\u3048\u308b**\u3088\u3046\u306b\u306a\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u3068\u306f\u8a00\u3048\u3001\u5f53\u9762\u306fbuild.gradle\u3092\u624b\u8efd\u306b\u7de8\u96c6\u3059\u308b\u3053\u3068\u306f\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3001\n\u4e00\u65e6Android\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Export\u3059\u308b\u304b\u3001\u88cf\u6280\u7684\u306b\n`PlaybackEngines/AndroidPlayer/Tools/GradleTemplates/`\n\u306b\u3042\u308b\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u66f8\u304d\u63db\u3048\u308c\u3070\u4e00\u5fdc\u5909\u66f4\u3067\u304d\u308b\u3001\u3068\u3044\u3046\u72b6\u6cc1\u306e\u3088\u3046\u3067\u3059\u3002\n\nhttps://forum.unity3d.com/threads/android-and-the-new-gradle-build-system.432113/\n\n> That is not supported in the first version. But...\nThe templates used for creating the build.gradle files are in PlaybackEngines/AndroidPlayer/Tools/GradleTemplates\ninside the Unity application directory, so as a hack in the current version you can try changing the mainTemplate.gradle directly.\n\n> Most likely we will add support for providing your own template inside your project in an upcoming patch release.\n\n\n\u305d\u306e\u3046\u3061\u5bfe\u5fdc\u3055\u308c\u308b\u3088\u3046\u3067\u3059\u304c\u3001\u73fe\u5728\u306f\u3053\u3046\u3044\u3063\u305f\u72b6\u6cc1\u306a\u306e\u3067\u3001\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u7121\u7406\u3084\u308a\u5bfe\u5fdc\u3057\u3066\u307f\u307e\u3059\u3002\n\n**[\u8ffd\u8a18] 5.5.2\u304b\u3089\u306f `Plugins/Android/build.gradle` \u3067\u4e0a\u66f8\u304d\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3067\u3059\u3002**\n\nAndroid\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092gradle\u5f62\u5f0f\u3067Export\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\n\u4ee5\u4e0b\u306e\u624b\u9806\u3067build.gradle\u3092\u4e0a\u66f8\u304d\u3057\u3064\u3064\u3001\u30d3\u30eb\u30c9\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n1. Android\u30d7\u30ed\u30b8\u30a7\u30af\u30c8(gradle\u5f62\u5f0f)\u3092Export\n2. Export\u3057\u305f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4e2d\u306e`build.gradle`\u3092\u3001`Plugins/Android/build.gradle`\u306b\u5dee\u3057\u66ff\u3048\u308b\n3. gradle\u3067\u30d3\u30eb\u30c9\u3059\u308b\n\n\u3053\u308c\u3092\u5b9f\u88c5\u3057\u305f\u30b9\u30af\u30ea\u30d7\u30c8\u3092GitHub\u306b\u4e0a\u3052\u307e\u3057\u305f\u3002 (2016/10/12\u66f4\u65b0)\nhttps://github.com/tkyaji/UnityAndroidGradleBuild\n\n`AndroidGradleBuild.unitypackage`\u3092\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3068\u3001Editor\u914d\u4e0b\u306b\u30d3\u30eb\u30c9\u7528\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u8a2d\u7f6e\u3055\u308c\u307e\u3059\u3002\n\u30e1\u30cb\u30e5\u30fc\u306b `Build -> Gradle Build`\u3068\u3044\u3046\u9805\u76ee\u304c\u8ffd\u52a0\u3055\u308c\u308b\u306e\u3067\u3001\u3053\u308c\u3092\u5b9f\u884c\u3059\u308b\u3068\u30d3\u30eb\u30c9\u304c\u8d70\u308a\u307e\u3059\u3002\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/19872/ee1f393d-fffb-8c45-11ef-cc36304d920e.png)\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u3053\u3068\u3067\u3001\u30d3\u30eb\u30c9\u6642\u306b`build.gradle`\u3092\u7de8\u96c6\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```csharp\n// 1. add classpath\nrootGradleElement.AddElement(new GradleParser.GradleTextElement(\"classpath 'com.google.gms:google-services:3.0.0'\"), \"buildscript\", \"dependencies\");\n// 2. add dependencies compile\nrootGradleElement.AddElement(new GradleParser.GradleTextElement(\"compile 'com.google.firebase:firebase-core:9.6.1'\"), \"dependencies\");\n// 3. add apply plugin\nrootGradleElement.AddElement(new GradleParser.GradleTextElement(\"apply plugin: 'com.google.gms.google-services'\"));\n```\n\n\u8a73\u3057\u304f\u306f\u30b5\u30f3\u30d7\u30eb\u30af\u30e9\u30b9\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n[SampleGradleSettings.cs](https://github.com/tkyaji/UnityAndroidGradleBuild/blob/master/Assets/Editor/SampleGradleSettings.cs)\n\n\n\nbuild.gradle\u304c\u4f7f\u3048\u308b\u3068\u3001[PlayServicesResolver \u3092\u4f7f\u3063\u3066aar\u5165\u308c\u305f\u308a](http://qiita.com/tkyaji/items/b838c97228f99f194bcd)\u3068\u304b\u304c\u4e0d\u8981\u306b\u306a\u3063\u3066\u3001\n\u30e9\u30a4\u30d6\u30e9\u30ea\u5468\u308a\u3067\u306f\u3060\u3044\u3076\u4fbf\u5229\u306b\u306a\u308b\u306e\u3067\u3068\u3066\u3082\u5b09\u3057\u3044\u3067\u3059\u3002\n\n\n# \u4f59\u8ac7\n\n[Firebase\u3092\u4f7f\u3046\u969b](https://firebase.google.com/docs/android/setup)\u3001`classpath 'com.google.gms:google-services:3.0.0'`\n \u306e\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3001\nUnity\u3067\u306f\u30e0\u30ea\u3060\u3068\u8ae6\u3081\u304b\u3051\u3066\u3044\u305f\u3093\u3067\u3059\u304c\u3001\u3053\u308c\u3067\u306a\u3093\u3068\u304b\u52d5\u304b\u305b\u308b\u304b\u306a\uff1f\n\n"}