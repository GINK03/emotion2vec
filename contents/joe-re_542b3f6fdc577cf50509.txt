{"tags": ["gulp", "Sass"], "context": " More than 1 year has passed since last update.\u5c0f\u3055\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306a\u3089\u3001style\u306f\u5909\u66f4\u304c\u3042\u308b\u5ea6\u306b\u6bce\u56de\u30d5\u30eb\u30d3\u30eb\u30c9\u3057\u3066\u3057\u307e\u3063\u3066\u30821s\u3082\u304b\u304b\u3089\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u3057\u304b\u3057\u5927\u304d\u304f\u306a\u3063\u3066\u30015s\u4ee5\u4e0a\u304b\u304b\u308b\u3068\u975e\u5e38\u306b\u82e6\u75db\u3060\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u5dee\u5206\u30d3\u30eb\u30c9\u3057\u305f\u3044\u3002\n\nSass\u306e\u5dee\u5206\u30d3\u30eb\u30c9\u3067\u554f\u984c\u306b\u306a\u308b\u3053\u3068\n\u5dee\u5206\u30d3\u30eb\u30c9\u81ea\u4f53\u306f\u7c21\u5358\u3067\u3001gulp-cached\u3068\u304b\u3092\u4f7f\u3048\u3070\u3001\u524d\u56de\u3068\u5dee\u5206\u304c\u3042\u308b\u3082\u306e\u3060\u3051\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3002\n\u306a\u3093\u3060\u3051\u3069\u3001\u305d\u306e\u5834\u5408\u306b\u554f\u984c\u306b\u306a\u308b\u306e\u304csass\u306e\u4f9d\u5b58\u95a2\u4fc2(@import)\u306e\u89e3\u6c7a\u3060\u3002\n\u5358\u7d14\u306b\u5dee\u5206\u306e\u3042\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3060\u3068\u3001@import\u5143\u3092\u8fbf\u308c\u306a\u3044\u3002\n\u305d\u3046\u3059\u308b\u3068@import\u5143\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u306b\u3064\u3044\u3066\u3053\u306a\u3044\u3002\n\u3044\u3084\u3001\u3067\u3082node-sass\u306ewatch\u30aa\u30d7\u30b7\u30e7\u30f3\u3063\u3066@import\u5143\u8fbf\u3063\u3066\u308b\u3088\u306a\u3001\u3042\u308c\u3063\u3066\u3069\u3046\u306a\u3063\u3066\u308b\u3093\u3060\uff1f\uff1f\n\u3068\u601d\u3063\u3066\u5b9f\u88c5\u3092\u898b\u3066\u307f\u305f\u3089\u3001sass-graph\u3068\u3044\u3046npm\u3092\u4f7f\u3063\u3066\u8fbf\u3063\u3066\u3044\u305f\u3002\n\u304a\u3001\u3053\u308c\u4f7f\u3048\u3070\u5dee\u5206\u30d3\u30eb\u30c9\u6642\u306b\u4f9d\u5b58\u95a2\u4fc2\u306e\u89e3\u6c7a\u3082\u3067\u304d\u308b\u3093\u3058\u3083\u306d\uff1f\uff1f\n\u3068\u3044\u3046\u3053\u3068\u3067gulp task\u306b\u7d44\u307f\u8fbc\u3093\u3067\u307f\u305f\u3002\n\ngulpfile.coffee\ngulp        = require 'gulp'\nforEach     = require 'gulp-foreach'\nsass        = require 'gulp-sass'\ncache       = require 'gulp-cached'\ngrapher     = require 'sass-graph'\ngulpIf      = require 'gulp-if'\n\ngulp.watching = false\n\ngulp.task 'build:sass', ->\n  baseDir = \"front/stylesheets/\"\n  graph = grapher.parseDir(baseDir)\n  gulp.src \"#{baseDir}/**/*.scss\"\n    .pipe cache('sass')\n    .pipe gulpIf(@watching, forEach (currentStream, file) ->\n      files = [file.path]\n      addParent = (childPath)->\n        # \u3053\u3053\u3067@import\u5143\u3092\u305f\u3069\u308b\n        graph.visitAncestors childPath, (parent) ->\n          files.push(parent) unless _.includes(files, parent)\n          addParent(parent)\n      addParent(file.path)\n      gulp.src files, {base: baseDir}\n    )\n    .pipe sass().on('error', sass.logError)\n    .pipe gulp.dest(\"public/stylesheets\")\n\n\ngulp.task 'watch', ->\n  @watching = true\n  gulp.watch \"front/stylesheets/**/*.scss\", ['build:sass']\n\n\u3053\u308c\u306e\u304a\u304b\u3052\u3067\u300110s\u304b\u304b\u304b\u308b\u30d3\u30eb\u30c9\u304c0.1s\u3067\u6e08\u3080\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u5b09\u3057\u3044\u306d\u3002\n\u5c0f\u3055\u3044\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306a\u3089\u3001style\u306f\u5909\u66f4\u304c\u3042\u308b\u5ea6\u306b\u6bce\u56de\u30d5\u30eb\u30d3\u30eb\u30c9\u3057\u3066\u3057\u307e\u3063\u3066\u30821s\u3082\u304b\u304b\u3089\u306a\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002\n\u3057\u304b\u3057\u5927\u304d\u304f\u306a\u3063\u3066\u30015s\u4ee5\u4e0a\u304b\u304b\u308b\u3068\u975e\u5e38\u306b\u82e6\u75db\u3060\u3002\n\n\u3068\u3044\u3046\u308f\u3051\u3067\u5dee\u5206\u30d3\u30eb\u30c9\u3057\u305f\u3044\u3002\n\n## Sass\u306e\u5dee\u5206\u30d3\u30eb\u30c9\u3067\u554f\u984c\u306b\u306a\u308b\u3053\u3068\n\u5dee\u5206\u30d3\u30eb\u30c9\u81ea\u4f53\u306f\u7c21\u5358\u3067\u3001[gulp-cached](https://github.com/wearefractal/gulp-cached)\u3068\u304b\u3092\u4f7f\u3048\u3070\u3001\u524d\u56de\u3068\u5dee\u5206\u304c\u3042\u308b\u3082\u306e\u3060\u3051\u3092\u30d3\u30eb\u30c9\u3067\u304d\u308b\u3002\n\n\u306a\u3093\u3060\u3051\u3069\u3001\u305d\u306e\u5834\u5408\u306b\u554f\u984c\u306b\u306a\u308b\u306e\u304csass\u306e\u4f9d\u5b58\u95a2\u4fc2(`@import`)\u306e\u89e3\u6c7a\u3060\u3002\n\n\u5358\u7d14\u306b\u5dee\u5206\u306e\u3042\u3063\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u30d3\u30eb\u30c9\u3059\u308b\u3060\u3051\u3060\u3068\u3001`@import`\u5143\u3092\u8fbf\u308c\u306a\u3044\u3002\n\u305d\u3046\u3059\u308b\u3068`@import`\u5143\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u5909\u66f4\u306b\u3064\u3044\u3066\u3053\u306a\u3044\u3002\n\n\u3044\u3084\u3001\u3067\u3082node-sass\u0010\u306ewatch\u30aa\u30d7\u30b7\u30e7\u30f3\u3063\u3066`@import`\u5143\u8fbf\u3063\u3066\u308b\u3088\u306a\u3001\u3042\u308c\u3063\u3066\u3069\u3046\u306a\u3063\u3066\u308b\u3093\u3060\uff1f\uff1f\n\u3068\u601d\u3063\u3066\u5b9f\u88c5\u3092\u898b\u3066\u307f\u305f\u3089\u3001[sass-graph](https://github.com/xzyfer/sass-graph)\u3068\u3044\u3046npm\u3092\u4f7f\u3063\u3066\u8fbf\u3063\u3066\u3044\u305f\u3002\n\n\u304a\u3001\u3053\u308c\u4f7f\u3048\u3070\u5dee\u5206\u30d3\u30eb\u30c9\u6642\u306b\u4f9d\u5b58\u95a2\u4fc2\u306e\u89e3\u6c7a\u3082\u3067\u304d\u308b\u3093\u3058\u3083\u306d\uff1f\uff1f\n\n\u3068\u3044\u3046\u3053\u3068\u3067gulp task\u306b\u7d44\u307f\u8fbc\u3093\u3067\u307f\u305f\u3002\n\n## gulpfile.coffee\n\n```coffeescript\ngulp        = require 'gulp'\nforEach     = require 'gulp-foreach'\nsass        = require 'gulp-sass'\ncache       = require 'gulp-cached'\ngrapher     = require 'sass-graph'\ngulpIf      = require 'gulp-if'\n\ngulp.watching = false\n\ngulp.task 'build:sass', ->\n  baseDir = \"front/stylesheets/\"\n  graph = grapher.parseDir(baseDir)\n  gulp.src \"#{baseDir}/**/*.scss\"\n    .pipe cache('sass')\n    .pipe gulpIf(@watching, forEach (currentStream, file) ->\n      files = [file.path]\n      addParent = (childPath)->\n        # \u3053\u3053\u3067@import\u5143\u3092\u305f\u3069\u308b\n        graph.visitAncestors childPath, (parent) ->\n          files.push(parent) unless _.includes(files, parent)\n          addParent(parent)\n      addParent(file.path)\n      gulp.src files, {base: baseDir}\n    )\n    .pipe sass().on('error', sass.logError)\n    .pipe gulp.dest(\"public/stylesheets\")\n\n\ngulp.task 'watch', ->\n  @watching = true\n  gulp.watch \"front/stylesheets/**/*.scss\", ['build:sass']\n```\n\n\u3053\u308c\u306e\u304a\u304b\u3052\u3067\u300110s\u304b\u304b\u304b\u308b\u30d3\u30eb\u30c9\u304c0.1s\u3067\u6e08\u3080\u3088\u3046\u306b\u306a\u3063\u305f\u3002\u5b09\u3057\u3044\u306d\u3002\n"}