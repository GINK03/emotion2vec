{"context": "\u305f\u3073\u305f\u3073\u540c\u3058\u3088\u3046\u306a\u3053\u3068\u3092\u8abf\u3079\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\u3061\u3087\u3063\u3068\u3057\u305f\u3053\u3068\u3092\u3059\u308b\u305f\u3073\u306b\u8ffd\u8a18\u3057\u3066\u3044\u304d\u305f\u3044\u3002\n\n\u524d\u63d0\u6761\u4ef6\n\nunix\u7cfb\u306e\u74b0\u5883\n\u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u306a\u3069\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\n\n\nawscli\njq\n\n\n\n\nec2\n\n\"hoge-xx\" \u3068\u3044\u3046\u540d\u524d\u306e\u8d77\u52d5\u4e2d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5168\u90e8\u505c\u6b62\u3059\u308b\n$ aws ec2 describe-instances --filters \"Name=tag:Name,Values=hoge-*\" \"Name=instance-state-name,Values=running\" | jq '.Reservations[].Instances[].InstanceId' | xargs -I{} aws ec2 stop-instances --instance-ids {} | jq -c .\n\n\n\"hoge-xx\" \u3068\u3044\u3046\u540d\u524d\u306e\u505c\u6b62\u4e2d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5168\u90e8\u8d77\u52d5\u3059\u308b\n$ aws ec2 describe-instances --filters \"Name=tag:Name,Values=hoge-*\" \"Name=instance-state-name,Values=stopped\" | jq '.Reservations[].Instances[].InstanceId' | xargs -I{} aws ec2 start-instances --instance-ids {} | jq -c .\n\n\n\"hoge-xx\" \u3068\u3044\u3046\u540d\u524d\u306e\u8d77\u52d5\u4e2d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u4e00\u89a7\u3092\u51fa\u529b\u3059\u308b\n$ aws ec2 describe-instances --filters \"Name=tag:Name,Values=hoge-*\" \"Name=instance-state-name,Values=running\" | jq '.Reservations[].Instances[].PublicIpAddress'\n\nDNS\u540d\u4e00\u89a7\u306e\u307b\u3046\u304c\u6709\u7528\u304b\u3082\u3002\n\nroute53\n\n\u4efb\u610f\u306e\u30be\u30fc\u30f3\u306eA\u30ec\u30b3\u30fc\u30c9\u4e00\u89a7\u3092\u51fa\u529b\u3059\u308b\n$ aws route53 list-resource-record-sets --hosted-zone-id xxxxxxxxxxxxxx | jq -r '.ResourceRecordSets[] | select(.Type == \"A\") | .Name'\n\n\u305f\u3073\u305f\u3073\u540c\u3058\u3088\u3046\u306a\u3053\u3068\u3092\u8abf\u3079\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u306e\u3067\u3001\u5fd8\u308c\u306a\u3044\u3088\u3046\u306b\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\u3061\u3087\u3063\u3068\u3057\u305f\u3053\u3068\u3092\u3059\u308b\u305f\u3073\u306b\u8ffd\u8a18\u3057\u3066\u3044\u304d\u305f\u3044\u3002\n\n# \u524d\u63d0\u6761\u4ef6\n* unix\u7cfb\u306e\u74b0\u5883\n* \u4ee5\u4e0b\u306e\u30c4\u30fc\u30eb\u306a\u3069\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\n * awscli\n * jq\n\n# ec2\n## *\"hoge-xx\"* \u3068\u3044\u3046\u540d\u524d\u306e\u8d77\u52d5\u4e2d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5168\u90e8\u505c\u6b62\u3059\u308b\n```\n$ aws ec2 describe-instances --filters \"Name=tag:Name,Values=hoge-*\" \"Name=instance-state-name,Values=running\" | jq '.Reservations[].Instances[].InstanceId' | xargs -I{} aws ec2 stop-instances --instance-ids {} | jq -c .\n```\n\n## *\"hoge-xx\"* \u3068\u3044\u3046\u540d\u524d\u306e\u505c\u6b62\u4e2d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5168\u90e8\u8d77\u52d5\u3059\u308b\n```\n$ aws ec2 describe-instances --filters \"Name=tag:Name,Values=hoge-*\" \"Name=instance-state-name,Values=stopped\" | jq '.Reservations[].Instances[].InstanceId' | xargs -I{} aws ec2 start-instances --instance-ids {} | jq -c .\n```\n\n## *\"hoge-xx\"* \u3068\u3044\u3046\u540d\u524d\u306e\u8d77\u52d5\u4e2d\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u4e00\u89a7\u3092\u51fa\u529b\u3059\u308b\n```\n$ aws ec2 describe-instances --filters \"Name=tag:Name,Values=hoge-*\" \"Name=instance-state-name,Values=running\" | jq '.Reservations[].Instances[].PublicIpAddress'\n```\nDNS\u540d\u4e00\u89a7\u306e\u307b\u3046\u304c\u6709\u7528\u304b\u3082\u3002\n\n# route53\n## \u4efb\u610f\u306e\u30be\u30fc\u30f3\u306eA\u30ec\u30b3\u30fc\u30c9\u4e00\u89a7\u3092\u51fa\u529b\u3059\u308b\n```\n$ aws route53 list-resource-record-sets --hosted-zone-id xxxxxxxxxxxxxx | jq -r '.ResourceRecordSets[] | select(.Type == \"A\") | .Name'\n```\n", "tags": ["AWS", "aws-cli", "jq", "OneLiner"]}