{"context": " More than 1 year has passed since last update.1\u5e74\u8fd1\u304f\u524d\u306b\u793e\u5185\u3067HipChat\u30af\u30ed\u30fc\u30f3\u306eKandan\u3068Hubot\u3092\u52d5\u304b\u3059 - Qiita\u3063\u3066\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u3002\n\u6700\u8fd1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5411\u3051\u306e\u958b\u767a\u57fa\u76e4\u7684\u306a\u74b0\u5883\u3092\u6574\u3048\u3066\u3044\u3066\u3001\u305d\u306e\u4e00\u74b0\u3067\u30c1\u30e3\u30c3\u30c8\u30a2\u30d7\u30ea\u3092\u8abf\u3079\u3066\u305f\u3089Let's Chat\u3092\u898b\u3064\u3051\u305f\u3002(\u30db\u30f3\u30c8\u306fSlack\u3068\u304b\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3044\u305f\u3044\u3093\u3060\u3051\u3069\u3001\u306a\u304b\u306a\u304b\u305d\u3046\u3082\u884c\u304b\u306a\u3044\u2026)\n\u5f53\u6642Kandan\u3092\u4f7f\u3063\u3066\u74b0\u5883\u6574\u3048\u305f\u3051\u3069\u3001\u7d50\u69cb\u9762\u5012\u3060\u3063\u305f\u308a\u9045\u304b\u3063\u305f\u308a\u4e0d\u6e80\u3082\u7d50\u69cb\u3042\u3063\u305f\u3002\u306e\u3067\u3001Let's Chat\u3067\u74b0\u5883\u3092\u6574\u3048\u3066\u307f\u305f\u3002\n\u7d50\u679c\u3092\u5148\u306b\u66f8\u3044\u3066\u304a\u304f\u3068\u3001\u74b0\u5883\u69cb\u7bc9\u306f\u5272\u3068\u7c21\u5358\u3060\u3057\u3001UI\u3082\u30e2\u30c0\u30f3\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u3082\u826f\u304b\u3063\u305f\u306e\u3067\u30aa\u30b9\u30b9\u30e1\u3002\n\n\u74b0\u5883\u69cb\u7bc9\nDocker, Heroku, Vagrant \u3068\u624b\u9806\u304c\u8f09\u3063\u3066\u3044\u308b\u3051\u3069\u3001\u793e\u5185\u3067\u5229\u7528\u3059\u308b\u306e\u3067Local installation \u3092\u53c2\u8003\u306b\u69cb\u7bc9\u3002\n\u4eca\u56de\u306fCentOS6.5\u4e0a\u306b\u69cb\u7bc9\u3057\u305f\u3002\n\nNode.js\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnodebrew\u3067\u3002\n$ wget git.io/nodebrew\n$ perl nodebrew setup\n\nexport PATH=$HOME/.nodebrew/current/bin:$PATH \u3092path\u306b\u8ffd\u52a0\u3057\u308d\u3068\u8a00\u308f\u308c\u308b\u306e\u3067\u8ffd\u52a0\u3059\u308b\u3002\n\u73fe\u6642\u70b9\u3067\u6700\u65b0\u306e v0.12.4 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ nodebrew ls-remote\n$ nodebrew install-binary v0.12.4\n$ nodebrew use v0.12.4\n\n\nMongoDB\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nMongoDB\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n\n/etc/yum.repos.d/mongodb.repo\n[mongodb]\nname=MongoDB Repository\nbaseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/\ngpgcheck=0\nenabled=1\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ yum -y install mongodb-org\n\n\u8d77\u52d5\n$ service mongod start\n\n\nPython2.7\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u6a19\u6e96\u3067Python2.6\u304c\u5165\u3063\u3066\u3044\u305f\u3051\u3069\u3001Python2.7\u4ee5\u4e0a\u304c\u5fc5\u8981\u306a\u306e\u3067\u5165\u308c\u3066\u304a\u304f\u3002\n$ yum -y groupinstall \"Development tools\"\n$ yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libicu-devel.x86_64\n$ curl -O https://www.python.org/ftp/python/2.7.6/Python-2.7.6.tgz\n$ tar zxvf Python-2.7.6.tgz\n$ cd Python-2.7.6\n$ ./configure --prefix=/opt/local\n$ make && make altinstall\n# \u5143\u304b\u3089\u5165\u3063\u3066\u3044\u305fPython\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u3066\u304a\u304f\n$ mv /usr/bin/python /usr/bin/python2.6.6\n$ ln -snf /opt/local/bin/python2.7 /usr/bin/python\n$ python -V\nPython 2.7.6\n\n\u5143\u304b\u3089\u5165\u3063\u3066\u3044\u308bPython\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u308b\u3068yum\u304c\u52d5\u304b\u306a\u304f\u306a\u308b\u306e\u3067\u3001\u30ea\u30cd\u30fc\u30e0\u3057\u305fPython\u3092\u898b\u308b\u3088\u3046\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3002\n\n/usr/bin/yum\n- #!/usr/bin/python\n+ #!/usr/bin/python2.6.6\nimport sys\ntry:\n    import yum\nexcept ImportError:\n    print >> sys.stderr, \"\"\"\\\nThere was a problem importing one of the Python modules\nrequired to run yum. The error leading to this problem was:\n.\n.\n\n\n\nLet's Chat\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ git clone https://github.com/sdelements/lets-chat.git\n$ cd lets-chat\n$ npm install\n\n\n\u8d77\u52d5\n$ npm start\n\n> lets-chat@0.4.0 prestart /opt/lets-chat\n> migroose\n\n\n> lets-chat@0.4.0 start /opt/lets-chat\n> node app.js\n\n\n\u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557  \u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\n\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d    \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u255a\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255d\n\u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2557     \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557    \u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551   \u2588\u2588\u2551\n\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u255d     \u2588\u2588\u2551   \u255a\u2550\u2550\u2550\u2550\u2588\u2588\u2551    \u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551   \u2588\u2588\u2551\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557   \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551    \u255a\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551   \u2588\u2588\u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d   \u255a\u2550\u255d   \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d     \u255a\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d   \u255a\u2550\u255d\n\nRelease 0.4.0\n\nhttp://localhost:5000 \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3002\nport\u756a\u53f7\u3084\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u306e\u8a31\u53ef\u306a\u3069\u306f settings.yml \u3067\u884c\u306a\u3046\u3002Kerberos\u3084LDAP\u306a\u3069\u306e\u8a8d\u8a3c\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u6a21\u69d8\u3002\n\n\u30aa\u30b7\u30e3\u30ec\u306a\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3060\u3002\n\nInit script\u3092\u4f5c\u6210\u3057\u3066\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\nnpm start\u3067\u8d77\u52d5\u3059\u308b\u306e\u306f\u30a4\u30e4\u306a\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\nLet's Chat\u306edaemon\u5316\u306fforever\u3092\u4f7f\u3063\u3066\u884c\u306a\u3046\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3002\n$ npm install -g forever\n\n\u4ee5\u4e0b\u306e\u7528\u306bInit script\u3092\u4f5c\u6210\u3059\u308b\u3002\u30d1\u30b9\u306f\u5404\u74b0\u5883\u306b\u5408\u308f\u305b\u308b\u3053\u3068\u3002\n\n/etc/init.d/lets-chat\n#!/bin/sh\n#\n# Note runlevel 2345, 86 is the Start order and 85 is the Stop order\n#\n# chkconfig: 2345 86 85\n# description: Description of the Service\n#\n# Below is the source function library, leave it be\n. /etc/init.d/functions\n\n# result of whereis forever or whereis node\nexport PATH=/home/tenten0213/.nodebrew/current/bin\n# result of whereis node_modules\nexport NODE_PATH=$NODE_PATH:/home/tenten0213/.nodebrew/current/lib/node_modules\n\nSERVICE_NAME=\"Let's Chat\"\ncd /opt/lets-chat\n\n\nstart(){\n        forever start app.js\n}\n\nstop(){\n        forever stop app.js\n}\n\nrestart(){\n        forever restart app.js\n}\n\ncase \"$1\" in\n        start)\n                echo \"Start service ${SERVICE_NAME}\"\n                start\n                ;;\n        stop)\n                echo \"Stop service ${SERVICE_NAME}\"\n                stop\n                ;;\n        restart)\n                echo \"Restart service ${SERVICE_NAME}\"\n                restart\n                ;;\n        *)\n                echo \"Usage: $0 {start|stop|restart}\"\n                exit 1\n                ;;\nesac\n\n\ninit.d/lets-chat\u3068app.js\u306b\u5b9f\u884c\u6a29\u9650\u3092\u4e0e\u3048\u308b\n$ chmod a+x /etc/init.d/lets-chat\n$ chmod a+x app.js\n\n\u3053\u308c\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n$ service lets-chat start\n\n\nHubot\u3068\u306e\u9023\u643a\nHubot\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u69cb\u7bc9\u306b\u3064\u3044\u3066\u306f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3002\n\u81ea\u8eab\u306eHubot\u3092\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067Let's Chat\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n$ npm install hubot-lets-chat --save\n\nHubot\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4e88\u3081\u4f5c\u6210\u3057\u3001\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3057\u3066\u304a\u304f\u3002\n\n\u53d6\u5f97\u3057\u305f\u30c8\u30fc\u30af\u30f3\u3068\u3001\u53c2\u52a0\u3055\u305b\u305f\u3044\u30eb\u30fc\u30e0\u306eid(http://localhost:5000/#!/room/55825920a58fe99f7c28f232 \u306a\u3089 55825920a58fe99f7c28f232)\u3092 HUBOT_LCB_TOKEN\u3068HUBOT_LCB_ROOMS\u306b\u305d\u308c\u305e\u308c\u8a2d\u5b9a\u3059\u308b\u3002\nexport HUBOT_LCB_TOKEN=NTRiNjg5NmYyMDZiMzEwMDAwYTAxNmZiOjE0ZTg2ODMwYz...\nexport HUBOT_LCB_ROOMS=5279facb1015642226000011,5394ffbabdea44e815000003\n\nLet's Chat\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3084\u3001\u30db\u30b9\u30c8\u540d\u3001\u30dd\u30fc\u30c8\u540d\u306a\u3069\u3082\u6307\u5b9a\u3067\u304d\u308b\u3002\nexport HUBOT_LCB_PROTOCOL=http\nexport HUBOT_LCB_HOSTNAME=localhost\nexport HUBOT_LCB_PORT=5000\n\n\u30a2\u30c0\u30d7\u30bf\u30fc\u3068\u3057\u3066lets-chat\u3092\u6307\u5b9a\u3057\u3066\u8d77\u52d5\u3059\u308b\u3068\u3001Hubot\u304cLet's Chat\u306b\u53c2\u52a0\u3059\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n$ ./bin/hubot -a lets-chat\n\n\n\u4e00\u5fdcHubot\u3082Init script\u66f8\u3044\u3068\u3044\u305f\u3002\n\u8ffd\u8a18\n\u2193\u3060\u3068\u3061\u3083\u3093\u3068\u52d5\u304b\u306a\u3044\u304b\u3082\u2026\u30c0\u30e1\u3060\u3063\u305f\u3089\n\u8d77\u52d5\u3060\u3051 run.sh\u3092\u7528\u610f\u3057\u3066\u3001\u6b62\u3081\u308b\u306e\u306f forever stop \u3059\u308b\u611f\u3058\u3067\u3002\n#!/bin/sh\n#\n# Note runlevel 2345, 86 is the Start order and 85 is the Stop order\n#\n# chkconfig: 2345 86 85\n# description: Description of the Service\n#\n# Below is the source function library, leave it be\n. /etc/init.d/functions\n\n# result of whereis forever or whereis node\nexport PATH=/home/tenten0213/.nodebrew/current/bin\n# result of whereis node_modules\nexport NODE_PATH=$NODE_PATH:/home/tenten0213/.nodebrew/current/lib/node_modules\nexport PATH=$HOME/.nodebrew/current/bin:$PATH\nexport HUBOT_LCB_HOSTNAME=localhost\nexport HUBOT_LCB_PORT=5000\nexport HUBOT_LCB_TOKEN=\"NTRiNjg5NmYyMDZiMzEwMDAwYTAxNmZiOjE0ZTg2ODMwYz...\"\nexport HUBOT_LCB_ROOMS=5279facb1015642226000011,5394ffbabdea44e815000003\n\nSERVICE_NAME=\"Hubot\"\ncd /home/tenten0213/hubot\n\nstart(){\n        forever start -c coffee node_modules/.bin/hubot -a lets-chat\n}\n\nstop(){\n        forever stop -c coffee node_modules/.bin/hubot -a lets-chat\n}\n\nrestart(){\n        forever restart -c coffee node_modules/.bin/hubot -a lets-chat\n}\n\ncase \"$1\" in\n        start)\n                echo \"Start service ${SERVICE_NAME}\"\n                start\n                ;;\n        stop)\n                echo \"Stop service ${SERVICE_NAME}\"\n                stop\n                ;;\n        restart)\n                echo \"Restart service ${SERVICE_NAME}\"\n                restart\n                ;;\n        *)\n                echo \"Usage: $0 {start|stop|restart}\"\n                exit 1\n                ;;\nesac\n\n\n\u3000\u53c2\u8003\n\nNode.js\u306edaemon\u5316\u306b\u3064\u3044\u3066(forever\u3092\u4f7f\u3063\u3066\u307f\u308b) - Qiita\nStarting Node Forever Scripts at Boot w/ CentOS\n\n1\u5e74\u8fd1\u304f\u524d\u306b[\u793e\u5185\u3067HipChat\u30af\u30ed\u30fc\u30f3\u306eKandan\u3068Hubot\u3092\u52d5\u304b\u3059 - Qiita](http://qiita.com/tenten0213/items/7ed9159b96b1d894ee8b)\u3063\u3066\u8a18\u4e8b\u3092\u66f8\u3044\u305f\u3002\n\n\u6700\u8fd1\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5411\u3051\u306e\u958b\u767a\u57fa\u76e4\u7684\u306a\u74b0\u5883\u3092\u6574\u3048\u3066\u3044\u3066\u3001\u305d\u306e\u4e00\u74b0\u3067\u30c1\u30e3\u30c3\u30c8\u30a2\u30d7\u30ea\u3092\u8abf\u3079\u3066\u305f\u3089[Let's Chat](http://sdelements.github.io/lets-chat/)\u3092\u898b\u3064\u3051\u305f\u3002(\u30db\u30f3\u30c8\u306fSlack\u3068\u304b\u30b5\u30fc\u30d3\u30b9\u3092\u4f7f\u3044\u305f\u3044\u3093\u3060\u3051\u3069\u3001\u306a\u304b\u306a\u304b\u305d\u3046\u3082\u884c\u304b\u306a\u3044\u2026)\n\u5f53\u6642Kandan\u3092\u4f7f\u3063\u3066\u74b0\u5883\u6574\u3048\u305f\u3051\u3069\u3001\u7d50\u69cb\u9762\u5012\u3060\u3063\u305f\u308a\u9045\u304b\u3063\u305f\u308a\u4e0d\u6e80\u3082\u7d50\u69cb\u3042\u3063\u305f\u3002\u306e\u3067\u3001Let's Chat\u3067\u74b0\u5883\u3092\u6574\u3048\u3066\u307f\u305f\u3002\n\u7d50\u679c\u3092\u5148\u306b\u66f8\u3044\u3066\u304a\u304f\u3068\u3001\u74b0\u5883\u69cb\u7bc9\u306f\u5272\u3068\u7c21\u5358\u3060\u3057\u3001UI\u3082\u30e2\u30c0\u30f3\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u3082\u826f\u304b\u3063\u305f\u306e\u3067\u30aa\u30b9\u30b9\u30e1\u3002\n\n# \u74b0\u5883\u69cb\u7bc9\n\n[Docker](https://registry.hub.docker.com/u/sdelements/lets-chat/), [Heroku](https://github.com/sdelements/lets-chat/wiki/Heroku), [Vagrant](https://github.com/sdelements/lets-chat/wiki/Vagrant) \u3068\u624b\u9806\u304c\u8f09\u3063\u3066\u3044\u308b\u3051\u3069\u3001\u793e\u5185\u3067\u5229\u7528\u3059\u308b\u306e\u3067[Local installation](https://github.com/sdelements/lets-chat/wiki/Installation) \u3092\u53c2\u8003\u306b\u69cb\u7bc9\u3002\n\n\u4eca\u56de\u306fCentOS6.5\u4e0a\u306b\u69cb\u7bc9\u3057\u305f\u3002\n\n## Node.js\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nnodebrew\u3067\u3002\n\n```bash\n$ wget git.io/nodebrew\n$ perl nodebrew setup\n```\n\n`export PATH=$HOME/.nodebrew/current/bin:$PATH` \u3092path\u306b\u8ffd\u52a0\u3057\u308d\u3068\u8a00\u308f\u308c\u308b\u306e\u3067\u8ffd\u52a0\u3059\u308b\u3002\n\u73fe\u6642\u70b9\u3067\u6700\u65b0\u306e `v0.12.4` \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\n$ nodebrew ls-remote\n$ nodebrew install-binary v0.12.4\n$ nodebrew use v0.12.4\n```\n\n## MongoDB\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nMongoDB\u30ea\u30dd\u30b8\u30c8\u30ea\u8ffd\u52a0\n\n```:/etc/yum.repos.d/mongodb.repo\n[mongodb]\nname=MongoDB Repository\nbaseurl=http://downloads-distro.mongodb.org/repo/redhat/os/x86_64/\ngpgcheck=0\nenabled=1\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ yum -y install mongodb-org\n```\n\n\u8d77\u52d5\n\n```bash\n$ service mongod start\n```\n\n## Python2.7\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u6a19\u6e96\u3067Python2.6\u304c\u5165\u3063\u3066\u3044\u305f\u3051\u3069\u3001Python2.7\u4ee5\u4e0a\u304c\u5fc5\u8981\u306a\u306e\u3067\u5165\u308c\u3066\u304a\u304f\u3002\n\n```bash\n$ yum -y groupinstall \"Development tools\"\n$ yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel libicu-devel.x86_64\n$ curl -O https://www.python.org/ftp/python/2.7.6/Python-2.7.6.tgz\n$ tar zxvf Python-2.7.6.tgz\n$ cd Python-2.7.6\n$ ./configure --prefix=/opt/local\n$ make && make altinstall\n# \u5143\u304b\u3089\u5165\u3063\u3066\u3044\u305fPython\u3092\u30ea\u30cd\u30fc\u30e0\u3057\u3066\u304a\u304f\n$ mv /usr/bin/python /usr/bin/python2.6.6\n$ ln -snf /opt/local/bin/python2.7 /usr/bin/python\n$ python -V\nPython 2.7.6\n```\n\n\u5143\u304b\u3089\u5165\u3063\u3066\u3044\u308bPython\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u4e0a\u3052\u308b\u3068yum\u304c\u52d5\u304b\u306a\u304f\u306a\u308b\u306e\u3067\u3001\u30ea\u30cd\u30fc\u30e0\u3057\u305fPython\u3092\u898b\u308b\u3088\u3046\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3002\n\n```diff:/usr/bin/yum\n- #!/usr/bin/python\n+ #!/usr/bin/python2.6.6\nimport sys\ntry:\n    import yum\nexcept ImportError:\n    print >> sys.stderr, \"\"\"\\\nThere was a problem importing one of the Python modules\nrequired to run yum. The error leading to this problem was:\n.\n.\n```\n\n## Let's Chat\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ git clone https://github.com/sdelements/lets-chat.git\n$ cd lets-chat\n$ npm install\n```\n\n### \u8d77\u52d5\n\n```\n$ npm start\n\n> lets-chat@0.4.0 prestart /opt/lets-chat\n> migroose\n\n\n> lets-chat@0.4.0 start /opt/lets-chat\n> node app.js\n\n\n\u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557     \u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557  \u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\n\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d    \u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u255a\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255d\n\u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2557     \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557    \u2588\u2588\u2551     \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551   \u2588\u2588\u2551\n\u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u255d     \u2588\u2588\u2551   \u255a\u2550\u2550\u2550\u2550\u2588\u2588\u2551    \u2588\u2588\u2551     \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551   \u2588\u2588\u2551\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557   \u2588\u2588\u2551   \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551    \u255a\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551   \u2588\u2588\u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d   \u255a\u2550\u255d   \u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d     \u255a\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d   \u255a\u2550\u255d\n\nRelease 0.4.0\n```\n\nhttp://localhost:5000 \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u308b\u3002\nport\u756a\u53f7\u3084\u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u306e\u8a31\u53ef\u306a\u3069\u306f `settings.yml` \u3067\u884c\u306a\u3046\u3002Kerberos\u3084LDAP\u306a\u3069\u306e\u8a8d\u8a3c\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u6a21\u69d8\u3002\n\n![login.jpg](https://qiita-image-store.s3.amazonaws.com/0/6092/03b978a3-5a09-365d-6a48-add243ae7594.jpeg)\n\n\u30aa\u30b7\u30e3\u30ec\u306a\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3060\u3002\n\n### Init script\u3092\u4f5c\u6210\u3057\u3066\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\nnpm start\u3067\u8d77\u52d5\u3059\u308b\u306e\u306f\u30a4\u30e4\u306a\u306e\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\nLet's Chat\u306edaemon\u5316\u306fforever\u3092\u4f7f\u3063\u3066\u884c\u306a\u3046\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304f\u3002\n\n```bash\n$ npm install -g forever\n```\n\n\u4ee5\u4e0b\u306e\u7528\u306bInit script\u3092\u4f5c\u6210\u3059\u308b\u3002\u30d1\u30b9\u306f\u5404\u74b0\u5883\u306b\u5408\u308f\u305b\u308b\u3053\u3068\u3002\n\n```bash:/etc/init.d/lets-chat\n#!/bin/sh\n#\n# Note runlevel 2345, 86 is the Start order and 85 is the Stop order\n#\n# chkconfig: 2345 86 85\n# description: Description of the Service\n#\n# Below is the source function library, leave it be\n. /etc/init.d/functions\n\n# result of whereis forever or whereis node\nexport PATH=/home/tenten0213/.nodebrew/current/bin\n# result of whereis node_modules\nexport NODE_PATH=$NODE_PATH:/home/tenten0213/.nodebrew/current/lib/node_modules\n\nSERVICE_NAME=\"Let's Chat\"\ncd /opt/lets-chat\n\n\nstart(){\n        forever start app.js\n}\n\nstop(){\n        forever stop app.js\n}\n\nrestart(){\n        forever restart app.js\n}\n\ncase \"$1\" in\n        start)\n                echo \"Start service ${SERVICE_NAME}\"\n                start\n                ;;\n        stop)\n                echo \"Stop service ${SERVICE_NAME}\"\n                stop\n                ;;\n        restart)\n                echo \"Restart service ${SERVICE_NAME}\"\n                restart\n                ;;\n        *)\n                echo \"Usage: $0 {start|stop|restart}\"\n                exit 1\n                ;;\nesac\n```\n\ninit.d/lets-chat\u3068app.js\u306b\u5b9f\u884c\u6a29\u9650\u3092\u4e0e\u3048\u308b\n\n```bash\n$ chmod a+x /etc/init.d/lets-chat\n$ chmod a+x app.js\n```\n\n\u3053\u308c\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n```bash\n$ service lets-chat start\n```\n\n## Hubot\u3068\u306e\u9023\u643a\n\nHubot\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3084\u69cb\u7bc9\u306b\u3064\u3044\u3066\u306f[\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](https://hubot.github.com/docs/)\u3092\u53c2\u7167\u3002\n\n\u81ea\u8eab\u306eHubot\u3092\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067Let's Chat\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3002\n\n```bash\n$ npm install hubot-lets-chat --save\n```\n\nHubot\u7528\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u4e88\u3081\u4f5c\u6210\u3057\u3001\u8a8d\u8a3c\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3057\u3066\u304a\u304f\u3002\n\n![generate_token.jpg](https://qiita-image-store.s3.amazonaws.com/0/6092/d5efa434-e44a-6752-b3fc-18fa9cf8ff82.jpeg)\n\n\u53d6\u5f97\u3057\u305f\u30c8\u30fc\u30af\u30f3\u3068\u3001\u53c2\u52a0\u3055\u305b\u305f\u3044\u30eb\u30fc\u30e0\u306eid(`http://localhost:5000/#!/room/55825920a58fe99f7c28f232` \u306a\u3089 `55825920a58fe99f7c28f232`)\u3092 `HUBOT_LCB_TOKEN`\u3068`HUBOT_LCB_ROOMS`\u306b\u305d\u308c\u305e\u308c\u8a2d\u5b9a\u3059\u308b\u3002\n\n```bash\nexport HUBOT_LCB_TOKEN=NTRiNjg5NmYyMDZiMzEwMDAwYTAxNmZiOjE0ZTg2ODMwYz...\nexport HUBOT_LCB_ROOMS=5279facb1015642226000011,5394ffbabdea44e815000003\n```\n\nLet's Chat\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3084\u3001\u30db\u30b9\u30c8\u540d\u3001\u30dd\u30fc\u30c8\u540d\u306a\u3069\u3082\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n```bash\nexport HUBOT_LCB_PROTOCOL=http\nexport HUBOT_LCB_HOSTNAME=localhost\nexport HUBOT_LCB_PORT=5000\n```\n\n\u30a2\u30c0\u30d7\u30bf\u30fc\u3068\u3057\u3066lets-chat\u3092\u6307\u5b9a\u3057\u3066\u8d77\u52d5\u3059\u308b\u3068\u3001Hubot\u304cLet's Chat\u306b\u53c2\u52a0\u3059\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n```bash\n$ ./bin/hubot -a lets-chat\n```\n\n![hubot.jpg](https://qiita-image-store.s3.amazonaws.com/0/6092/d7c6e3a8-f3d5-01c6-baa3-b5ad76238609.jpeg)\n\n\u4e00\u5fdcHubot\u3082Init script\u66f8\u3044\u3068\u3044\u305f\u3002\n\n**\u8ffd\u8a18**\n\u2193\u3060\u3068\u3061\u3083\u3093\u3068\u52d5\u304b\u306a\u3044\u304b\u3082\u2026\u30c0\u30e1\u3060\u3063\u305f\u3089\n\u8d77\u52d5\u3060\u3051 `run.sh`\u3092\u7528\u610f\u3057\u3066\u3001\u6b62\u3081\u308b\u306e\u306f `forever stop` \u3059\u308b\u611f\u3058\u3067\u3002\n\n```bash\n#!/bin/sh\n#\n# Note runlevel 2345, 86 is the Start order and 85 is the Stop order\n#\n# chkconfig: 2345 86 85\n# description: Description of the Service\n#\n# Below is the source function library, leave it be\n. /etc/init.d/functions\n\n# result of whereis forever or whereis node\nexport PATH=/home/tenten0213/.nodebrew/current/bin\n# result of whereis node_modules\nexport NODE_PATH=$NODE_PATH:/home/tenten0213/.nodebrew/current/lib/node_modules\nexport PATH=$HOME/.nodebrew/current/bin:$PATH\nexport HUBOT_LCB_HOSTNAME=localhost\nexport HUBOT_LCB_PORT=5000\nexport HUBOT_LCB_TOKEN=\"NTRiNjg5NmYyMDZiMzEwMDAwYTAxNmZiOjE0ZTg2ODMwYz...\"\nexport HUBOT_LCB_ROOMS=5279facb1015642226000011,5394ffbabdea44e815000003\n\nSERVICE_NAME=\"Hubot\"\ncd /home/tenten0213/hubot\n\nstart(){\n        forever start -c coffee node_modules/.bin/hubot -a lets-chat\n}\n\nstop(){\n        forever stop -c coffee node_modules/.bin/hubot -a lets-chat\n}\n\nrestart(){\n        forever restart -c coffee node_modules/.bin/hubot -a lets-chat\n}\n\ncase \"$1\" in\n        start)\n                echo \"Start service ${SERVICE_NAME}\"\n                start\n                ;;\n        stop)\n                echo \"Stop service ${SERVICE_NAME}\"\n                stop\n                ;;\n        restart)\n                echo \"Restart service ${SERVICE_NAME}\"\n                restart\n                ;;\n        *)\n                echo \"Usage: $0 {start|stop|restart}\"\n                exit 1\n                ;;\nesac\n```\n\n\n##\u3000\u53c2\u8003\n* [Node.js\u306edaemon\u5316\u306b\u3064\u3044\u3066(forever\u3092\u4f7f\u3063\u3066\u307f\u308b) - Qiita](http://qiita.com/n_morioka/items/837967c0e2711198bd74)\n\n* [Starting Node Forever Scripts at Boot w/ CentOS](http://aronduby.com/starting-node-forever-scripts-at-boot-w-centos/)\n", "tags": ["LetsChat", "Hubot"]}