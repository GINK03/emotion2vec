{"context": "http://qiita.com/jTakasuRyuji/items/12a0582e085ed91698ab \u3088\u308a\n\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u5358\u4f53\u3067\u7ba1\u7406\u8005\u6607\u683c\u304b\u3089\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u307e\u3067\u3084\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u30ab\u30a4\u30bc\u30f3\u3057\u305f\u3002\n\n\u518d\u5e30\u5bfe\u5fdc\u7248\n\nrunas.cmd\n@echo off\n\nREM HINT=http://qiita.com/usagi/items/2623145f22faf54b99e0\n\ncd %~dp0\n\n:checkMandatoryLevel\nREM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d START\nfor /f \"tokens=1 delims=,\" %%i in ('whoami /groups /FO CSV /NH') do (\n    if \"%%~i\"==\"BUILTIN\\Administrators\" set ADMIN=yes\n    if \"%%~i\"==\"Mandatory Label\\High Mandatory Level\" set ELEVATED=yes\n)\n\nif \"%ADMIN%\" neq \"yes\" (\n    echo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{Administrators\u30b0\u30eb\u30fc\u30d7\u3067\u306a\u3044}\n   if \"%1\" neq \"/R\" goto runas\n   goto exit1\n)\nif \"%ELEVATED%\" neq \"yes\" (\n    echo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{\u30d7\u30ed\u30bb\u30b9\u304c\u6607\u683c\u3055\u308c\u3066\u3044\u306a\u3044}\n   if \"%1\" neq \"/R\" goto runas\n   goto exit1\n)\nREM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d END\n\n\n:admins\n    REM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 START\n\n    whoami /groups /FO CSV /NH\n    pause\n\n    REM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 END\n    goto exit1\n\n:runas\n    REM \u2605\u7ba1\u7406\u8005\u3068\u3057\u3066\u518d\u5b9f\u884c\n    powershell -Command Start-Process -Verb runas \"%0\" -ArgumentList \"/R\" \n\n:exit1\n\n\n\n\u7121\u9650\u30eb\u30fc\u30d7\u7248(UAC=No\u3067\u3055\u3089\u306b\u30eb\u30fc\u30d7)\n\nrunasLoopInfinity.cmd\n@echo off\n\nREM HINT=http://qiita.com/usagi/items/2623145f22faf54b99e0\n\ncd %~dp0\n\n:checkMandatoryLevel\nREM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d START\nfor /f \"tokens=1 delims=,\" %%i in ('whoami /groups /FO CSV /NH') do (\n    if \"%%~i\"==\"BUILTIN\\Administrators\" set ADMIN=yes\n    if \"%%~i\"==\"Mandatory Label\\High Mandatory Level\" set ELEVATED=yes\n)\n\nif \"%ADMIN%\" neq \"yes\" (\n    echo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{Administrators\u30b0\u30eb\u30fc\u30d7\u3067\u306a\u3044}\n    goto runas\n)\nif \"%ELEVATED%\" neq \"yes\" (\n    echo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{\u30d7\u30ed\u30bb\u30b9\u304c\u6607\u683c\u3055\u308c\u3066\u3044\u306a\u3044}\n    goto runas\n)\nREM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d END\n\n:admins\n    REM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 START\n\n    whoami /groups /FO CSV /NH\n    pause\n\n    REM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 END\n    goto exit1\n\n:runas\n    REM \u2605\u7ba1\u7406\u8005\u3068\u3057\u3066\u518d\u5b9f\u884c\n    powershell -Command Start-Process -Verb runas \"%0\" \n\n:exit1\n\n\nPowershell\u306e\u304f\u3060\u308a\u306f \nhttp://qiita.com/usagi/items/2623145f22faf54b99e0\n\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\nhttp://qiita.com/jTakasuRyuji/items/12a0582e085ed91698ab \u3088\u308a\n\n\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u5358\u4f53\u3067\u7ba1\u7406\u8005\u6607\u683c\u304b\u3089\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u307e\u3067\u3084\u308a\u305f\u304b\u3063\u305f\u306e\u3067\u30ab\u30a4\u30bc\u30f3\u3057\u305f\u3002\n\n#\u518d\u5e30\u5bfe\u5fdc\u7248\n```bat:runas.cmd\n@echo off\n\nREM HINT=http://qiita.com/usagi/items/2623145f22faf54b99e0\n\ncd %~dp0\n\n:checkMandatoryLevel\nREM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d START\nfor /f \"tokens=1 delims=,\" %%i in ('whoami /groups /FO CSV /NH') do (\n    if \"%%~i\"==\"BUILTIN\\Administrators\" set ADMIN=yes\n    if \"%%~i\"==\"Mandatory Label\\High Mandatory Level\" set ELEVATED=yes\n)\n\nif \"%ADMIN%\" neq \"yes\" (\n    echo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{Administrators\u30b0\u30eb\u30fc\u30d7\u3067\u306a\u3044}\n   if \"%1\" neq \"/R\" goto runas\n   goto exit1\n)\nif \"%ELEVATED%\" neq \"yes\" (\n    echo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{\u30d7\u30ed\u30bb\u30b9\u304c\u6607\u683c\u3055\u308c\u3066\u3044\u306a\u3044}\n   if \"%1\" neq \"/R\" goto runas\n   goto exit1\n)\nREM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d END\n\n\n:admins\n    REM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 START\n\n    whoami /groups /FO CSV /NH\n    pause\n\n    REM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 END\n    goto exit1\n\n:runas\n    REM \u2605\u7ba1\u7406\u8005\u3068\u3057\u3066\u518d\u5b9f\u884c\n    powershell -Command Start-Process -Verb runas \"%0\" -ArgumentList \"/R\" \n\n:exit1\n```\n\n\n#\u7121\u9650\u30eb\u30fc\u30d7\u7248(UAC=No\u3067\u3055\u3089\u306b\u30eb\u30fc\u30d7)\n```bat:runasLoopInfinity.cmd\n@echo off\n\nREM HINT=http://qiita.com/usagi/items/2623145f22faf54b99e0\n\ncd %~dp0\n\n:checkMandatoryLevel\nREM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d START\nfor /f \"tokens=1 delims=,\" %%i in ('whoami /groups /FO CSV /NH') do (\n\tif \"%%~i\"==\"BUILTIN\\Administrators\" set ADMIN=yes\n\tif \"%%~i\"==\"Mandatory Label\\High Mandatory Level\" set ELEVATED=yes\n)\n\nif \"%ADMIN%\" neq \"yes\" (\n\techo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{Administrators\u30b0\u30eb\u30fc\u30d7\u3067\u306a\u3044}\n\tgoto runas\n)\nif \"%ELEVATED%\" neq \"yes\" (\n\techo \u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u7ba1\u7406\u8005\u6a29\u9650\u3067\u306e\u5b9f\u884c\u304c\u5fc5\u8981\u3067\u3059{\u30d7\u30ed\u30bb\u30b9\u304c\u6607\u683c\u3055\u308c\u3066\u3044\u306a\u3044}\n\tgoto runas\n)\nREM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d END\n\n:admins\n\tREM \u25bc\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 START\n\t\n\twhoami /groups /FO CSV /NH\n\tpause\n\n\tREM \u25b2\u7ba1\u7406\u8005\u3068\u3057\u3066\u5b9f\u884c\u3057\u305f\u3044\u30b3\u30de\u30f3\u30c9 END\n\tgoto exit1\n\n:runas\n\tREM \u2605\u7ba1\u7406\u8005\u3068\u3057\u3066\u518d\u5b9f\u884c\n\tpowershell -Command Start-Process -Verb runas \"%0\" \n\n:exit1\n```\n\nPowershell\u306e\u304f\u3060\u308a\u306f \nhttp://qiita.com/usagi/items/2623145f22faf54b99e0\n\n\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n", "tags": ["Windows", "\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb"]}