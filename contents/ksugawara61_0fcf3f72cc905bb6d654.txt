{"context": "\u4eca\u56de\u306fCentOS7.1\u4e0a\u3067\u3001nginx\u3092\u7528\u3044\u305f\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u306e\u3067\u3001\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n\u74b0\u5883\n\n\n\nOS/\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\n\nCentOS\n7.1\n\n\nphp\n7.0.5\n\n\nnginx\n1.8.1\n\n\n\n\n1. \u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n\u307e\u305a\u3001\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u306e\u51e6\u7406\u3092\u884c\u3046\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo groupadd hoge\n$ sudo useradd -g hoge hoge\n\n\u4f5c\u6210\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\u3068\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ sudo usermod -s /bin/false hoge\n\n\n2. PHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u6700\u65b0\u306ePHP\u3092CentOS\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306bEPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u3068Remi\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nEPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n\n$ sudo rpm -ivh http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-5.noarch.rpm\n$ sudo rpm -ivh epel-release-7-5.noarch.rpm\n$ sudo yum -y update epel-release\n\n\nRemi\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n\n$ sudo rpm --import http://rpms.famillecollet.com/RPM-GPG-KEY-remi\n$ sudo rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n$ sudo yum -y update remi-release\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\u304c\u5b8c\u4e86\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067PHP\u3092\u4e00\u5f0f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo yum -y --enablerepo=remi-php70,epel install php-fpm php-gd php-gmp php-mbstring php-mcrypt php-opcache php-pdo php-pear-MDB2-Driver-mysqli php-pecl-memcached php-pecl-msgpack php-xml\n$ php -v\nPHP 7.0.5 (cli) (built: Apr  8 2016 17:45:27) ( NTS )\nCopyright (c) 1997-2016 The PHP Group\nZend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies\n    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies\n\nPHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u5b8c\u4e86\u5f8c\u3001PHP\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\nphp.ini\n\n$ vi /etc/php.ini\n\n\nphp.ini\n\u30fb\n\u30fb\ndate.timezone = \"Asia/Tokyo\"  # \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092 Asia/Tokyo \u306b\u8a2d\u5b9a\n\u30fb\n\u30fb\n\u30fb\n\n\n\n\nwww.conf\nphp-fpm\u306e\u5b9f\u884c\u30e6\u30fc\u30b6\u3092 hoge\uff08\u624b\u98061\u3067\u4f5c\u6210\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\uff09 \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\nFast-CGI\u3092\u53d7\u3051\u5165\u308c\u308b\u30a2\u30c9\u30ec\u30b9\u3092Unix\u30c9\u30e1\u30a4\u30f3\u30bd\u30b1\u30c3\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n$ vi /etc/php-fpm.d/www.conf\n\n\nwww.conf\n\u30fb\n\u30fb\n\u30fb\n# 22\u884c\u76ee\u3042\u305f\u308a\n; RPM: apache Choosed to be able to access some dir as httpd\nuser = hoge\n; RPM: Keep a group allowed to write in log dir.\ngroup = hoge\n\u30fb\n\u30fb\n\u30fb\n# 37\u884c\u76ee\u3042\u305f\u308a\nlisten = /var/run/php-fpm/php-fpm.sock\n\u30fb\n\u30fb\n\u30fb\n# 48\u884c\u76ee\u3042\u305f\u308a\nlisten.owner = hoge\nlisten.group = hoge\nlisten.mode = 0660\n\u30fb\n\u30fb\n\u30fb\n\n\n\n3. nginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306e\u74b0\u5883\u304cCentOS7\u7cfb\u306a\u306e\u3067\u3001nginx-release-centos-7-0.el 7.ngx.noarch.rpm\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ffd\u52a0\u3057\u3001nginx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ sudo rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n$ sudo yum -y update nginx-release-centos\n$ sudo yum -y --enablerepo=nginx install nginx\n$ nginx -v\nnginx version: nginx/1.8.1\n\n\nnginx\u306econf\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\n\nnginx\u306e\u5b9f\u884c\u30e6\u30fc\u30b6\u3092 hoge\uff08\u624b\u98061\u3067\u4f5c\u6210\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\uff09 \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n$ sudo vi /etc/nginx/nginx.conf\n\n\nnginx.conf\n# 2\u884c\u76ee\u3042\u305f\u308a\nuser  hoge;\n\n\nnginx\u3067PHP\u306e\u51e6\u7406\u304c\u884c\u3048\u308b\u3088\u3046\u306bconf\u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n$ sudo vi /etc/nginx/conf.d/default.conf\n\n\ndefault.conf\n    # 30\u884c\u76ee\u3042\u305f\u308a\n    location ~ \\.php$ {\n        root   /usr/share/nginx/html;\n        fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n\n\n\n\n4. PHP-FPM\u30fbnginx\u306e\u8d77\u52d5\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067 php-fpm\u3068nginx\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n$ sudo systemctl start php-fpm.service\n$ sudo systemctl start nginx.service\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067 php-fpm\u3068nginx\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ ps aux | grep -e nginx -e php-fpm\nroot     13785  0.0  4.7 492728 29788 ?        Ss   12:42   0:00 php-fpm: master process (/etc/php-fpm.conf)\nhoge     13786  0.0  1.2 493148  8168 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13787  0.0  1.2 493148  7840 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13788  0.0  0.9 493016  6048 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13789  0.0  0.8 492728  5356 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13790  0.0  0.8 492728  5356 ?        S    12:42   0:00 php-fpm: pool www\nroot     13910  0.0  0.1  47520  1152 ?        Ss   13:29   0:00 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf\nhoge     13911  0.0  0.3  47912  2144 ?        S    13:29   0:00 nginx: worker process\nvagrant  13940  0.0  0.1 112656   964 pts/0    R+   13:44   0:00 grep --color=auto -e nginx -e php-fpm\n\n\u7d9a\u3044\u3066\u3001\u30b5\u30fc\u30d0\u306e\u518d\u8d77\u52d5\u304c\u884c\u308f\u308c\u305f\u5834\u5408\u3067\u3082\u81ea\u52d5\u3067 php-fpm\u3068nginx\u304c\u8d77\u52d5\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n$ sudo systemctl enable php-fpm.service\nCreated symlink from /etc/systemd/system/multi-user.target.wants/php-fpm.service to /usr/lib/systemd/system/php-fpm.service.\n$ sudo systemctl enable nginx.service\nCreated symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u304c\u6b63\u5e38\u306b\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ systemctl list-unit-files -t service | grep -e nginx -e php-fpm\nnginx.service                               enabled \nphp-fpm.service                             enabled\n\n\n5. \u52d5\u4f5c\u78ba\u8a8d\n\u6700\u5f8c\u306b\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n\u30a6\u30a7\u30d6\uff08nginx\uff09\u30b5\u30fc\u30d0\u3067\u6b63\u5e38\u306bPHP\u306e\u51e6\u7406\u304c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8 /usr/share/nginx/html \u914d\u4e0b\u306b index.php \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ sudo vi /usr/share/nginx/html/index.php\n\n\nindex.php\n<?php phpinfo() ?>\n\n\n\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u3066\u3044\u308c\u3070\u5b8c\u4e86\u3067\u3059\u3002\n$ curl localhost/index.php | head\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\"><head>\n<style type=\"text/css\">\nbody {background-color: #fff; color: #222; font-family: sans-serif;}\npre {margin: 0; font-family: monospace;}\na:link {color: #009; text-decoration: none; background-color: #fff;}\na:hover {text-decoration: underline;}\ntable {border-collapse: collapse; border: 0; width: 934px; box-shadow: 1px 2px 3px #ccc;}\n.center {text-align: center;}\n.center table {margin: 1em auto; text-align: left;}\n100 48904    0 48904    0     0   291k      0 --:--:-- --:--:-- --:--:--  292k\ncurl: (23) Failed writing body (248 != 4256)\n\n\n\n\u53c2\u8003\u6587\u732e\n\n\u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u306a\u3044\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5,  https://www.express.nec.co.jp/linux/distributions/knowledge/system/false.html, Online; accessed 9-April-2016.\nPHP-FPM(PHP7) + nginx \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(CentOS 6) - Qiita, http://qiita.com/TatsuNet/items/54d486652377a76104d1#php-fpm-%E3%81%AE%E8%B5%B7%E5%8B%95, Online; accessed 2\u2013February\u20132016.\nnginx\u3067PHP\u3092\u52d5\u304b\u3059 - Qiita, http://qiita.com/duke-gonorego/items/817b5f8ac7cab19a8897, Online; accessed 2-Februrary-2016.\nCentOS 7 \u30b5\u30fc\u30d3\u30b9\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a _ server-memo.net, http://www.server-memo.net/centos-settings/centos7/systemctl-enable.html, Online; accessed 9-April-2016.\n\u4e45\u4fdd \u9054\u5f66, \u9053\u4e95 \u4fca\u4ecb, \"nginx\u5b9f\u8df5\u5165\u9580 (WEB+DB PRESS plus)\", 2016/1/16.\nnginx \u3068 PHP-FPM \u306e\u4ed5\u7d44\u307f\u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3057\u306a\u304c\u3089 PHP \u306e\u5b9f\u884c\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b - Qiita, http://qiita.com/kotarella1110/items/634f6fafeb33ae0f51dc, Online; accessed 9-April-2016.\n\u8abf\u3079\u306a\u304d\u3083\u5bdd\u308c\u306a\u3044\uff01\u3068\u8abf\u3079\u305f\u3089\u4f59\u8a08\u306b\u5bdd\u308c\u306a\u304f\u306a\u3063\u305f\u30bd\u30b1\u30c3\u30c8\u306e\u8a71 - Qiita, http://qiita.com/kuni-nakaji/items/d11219e4ad7c74ece748, Online; accessed 9-April-2016.\n\n\u4eca\u56de\u306fCentOS7.1\u4e0a\u3067\u3001nginx\u3092\u7528\u3044\u305f\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u3092\u69cb\u7bc9\u3057\u305f\u306e\u3067\u3001\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\u3002\n\u69cb\u7bc9\u3057\u305f\u74b0\u5883\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3059\u3002\n\n# \u74b0\u5883\n|OS/\u30df\u30c9\u30eb\u30a6\u30a7\u30a2|\u30d0\u30fc\u30b8\u30e7\u30f3     |\n|:------------|------------:|\n| CentOS      |7.1          |\n| php         |7.0.5        |\n| nginx       |1.8.1        |\n\n# 1. \u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\u306e\u4f5c\u6210\n\n\u307e\u305a\u3001\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u306e\u51e6\u7406\u3092\u884c\u3046\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo groupadd hoge\n$ sudo useradd -g hoge hoge\n```\n\n\u4f5c\u6210\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\u3068\u3057\u3066\u30ed\u30b0\u30a4\u30f3\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5165\u529b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\n$ sudo usermod -s /bin/false hoge\n```\n\n# 2. PHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u6700\u65b0\u306ePHP\u3092CentOS\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u305f\u3081\u306bEPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u3068Remi\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n* EPEL\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n\n```bash\n$ sudo rpm -ivh http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-5.noarch.rpm\n$ sudo rpm -ivh epel-release-7-5.noarch.rpm\n$ sudo yum -y update epel-release\n```\n\n* Remi\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n\n```bash\n$ sudo rpm --import http://rpms.famillecollet.com/RPM-GPG-KEY-remi\n$ sudo rpm -ivh http://rpms.famillecollet.com/enterprise/remi-release-7.rpm\n$ sudo yum -y update remi-release\n```\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\u304c\u5b8c\u4e86\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067PHP\u3092\u4e00\u5f0f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo yum -y --enablerepo=remi-php70,epel install php-fpm php-gd php-gmp php-mbstring php-mcrypt php-opcache php-pdo php-pear-MDB2-Driver-mysqli php-pecl-memcached php-pecl-msgpack php-xml\n$ php -v\nPHP 7.0.5 (cli) (built: Apr  8 2016 17:45:27) ( NTS )\nCopyright (c) 1997-2016 The PHP Group\nZend Engine v3.0.0, Copyright (c) 1998-2016 Zend Technologies\n    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies\n```\n\nPHP\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u5b8c\u4e86\u5f8c\u3001PHP\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7de8\u96c6\u3057\u307e\u3059\u3002\n\n* php.ini\n\n```bash\n$ vi /etc/php.ini\n```\n\n```php:php.ini\n\u30fb\n\u30fb\ndate.timezone = \"Asia/Tokyo\"  # \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092 Asia/Tokyo \u306b\u8a2d\u5b9a\n\u30fb\n\u30fb\n\u30fb\n```\n\n* www.conf\n<br>php-fpm\u306e\u5b9f\u884c\u30e6\u30fc\u30b6\u3092 **hoge\uff08\u624b\u98061\u3067\u4f5c\u6210\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\uff09** \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n<br>Fast-CGI\u3092\u53d7\u3051\u5165\u308c\u308b\u30a2\u30c9\u30ec\u30b9\u3092Unix\u30c9\u30e1\u30a4\u30f3\u30bd\u30b1\u30c3\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```bash\n$ vi /etc/php-fpm.d/www.conf\n```\n\n```op:www.conf\n\u30fb\n\u30fb\n\u30fb\n# 22\u884c\u76ee\u3042\u305f\u308a\n; RPM: apache Choosed to be able to access some dir as httpd\nuser = hoge\n; RPM: Keep a group allowed to write in log dir.\ngroup = hoge\n\u30fb\n\u30fb\n\u30fb\n# 37\u884c\u76ee\u3042\u305f\u308a\nlisten = /var/run/php-fpm/php-fpm.sock\n\u30fb\n\u30fb\n\u30fb\n# 48\u884c\u76ee\u3042\u305f\u308a\nlisten.owner = hoge\nlisten.group = hoge\nlisten.mode = 0660\n\u30fb\n\u30fb\n\u30fb\n```\n\n# 3. nginx\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u4eca\u56de\u306e\u74b0\u5883\u304cCentOS7\u7cfb\u306a\u306e\u3067\u3001nginx-release-centos-**7**-0.el **7**.ngx.noarch.rpm\u3092\u30ea\u30dd\u30b8\u30c8\u30ea\u306b\u8ffd\u52a0\u3057\u3001nginx\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm\n$ sudo yum -y update nginx-release-centos\n$ sudo yum -y --enablerepo=nginx install nginx\n$ nginx -v\nnginx version: nginx/1.8.1\n```\n\n* nginx\u306econf\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\n\nnginx\u306e\u5b9f\u884c\u30e6\u30fc\u30b6\u3092 **hoge\uff08\u624b\u98061\u3067\u4f5c\u6210\u3057\u305f\u30b7\u30b9\u30c6\u30e0\u30e6\u30fc\u30b6\uff09** \u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo vi /etc/nginx/nginx.conf\n```\n\n```op:nginx.conf\n# 2\u884c\u76ee\u3042\u305f\u308a\nuser  hoge;\n```\n\nnginx\u3067PHP\u306e\u51e6\u7406\u304c\u884c\u3048\u308b\u3088\u3046\u306bconf\u30d5\u30a1\u30a4\u30eb\u306b\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo vi /etc/nginx/conf.d/default.conf\n```\n\n```nginx:default.conf\n    # 30\u884c\u76ee\u3042\u305f\u308a\n    location ~ \\.php$ {\n        root   /usr/share/nginx/html;\n        fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n\n```\n\n# 4. PHP-FPM\u30fbnginx\u306e\u8d77\u52d5\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067 php-fpm\u3068nginx\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo systemctl start php-fpm.service\n$ sudo systemctl start nginx.service\n```\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067 php-fpm\u3068nginx\u304c\u6b63\u5e38\u306b\u52d5\u4f5c\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n$ ps aux | grep -e nginx -e php-fpm\nroot     13785  0.0  4.7 492728 29788 ?        Ss   12:42   0:00 php-fpm: master process (/etc/php-fpm.conf)\nhoge     13786  0.0  1.2 493148  8168 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13787  0.0  1.2 493148  7840 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13788  0.0  0.9 493016  6048 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13789  0.0  0.8 492728  5356 ?        S    12:42   0:00 php-fpm: pool www\nhoge     13790  0.0  0.8 492728  5356 ?        S    12:42   0:00 php-fpm: pool www\nroot     13910  0.0  0.1  47520  1152 ?        Ss   13:29   0:00 nginx: master process /usr/sbin/nginx -c /etc/nginx/nginx.conf\nhoge     13911  0.0  0.3  47912  2144 ?        S    13:29   0:00 nginx: worker process\nvagrant  13940  0.0  0.1 112656   964 pts/0    R+   13:44   0:00 grep --color=auto -e nginx -e php-fpm\n```\n\n\u7d9a\u3044\u3066\u3001\u30b5\u30fc\u30d0\u306e\u518d\u8d77\u52d5\u304c\u884c\u308f\u308c\u305f\u5834\u5408\u3067\u3082\u81ea\u52d5\u3067 php-fpm\u3068nginx\u304c\u8d77\u52d5\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo systemctl enable php-fpm.service\nCreated symlink from /etc/systemd/system/multi-user.target.wants/php-fpm.service to /usr/lib/systemd/system/php-fpm.service.\n$ sudo systemctl enable nginx.service\nCreated symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.\n```\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u304c\u6b63\u5e38\u306b\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```bash\n$ systemctl list-unit-files -t service | grep -e nginx -e php-fpm\nnginx.service                               enabled \nphp-fpm.service                             enabled\n```\n\n# 5. \u52d5\u4f5c\u78ba\u8a8d\n\n\u6700\u5f8c\u306b\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u306e\u52d5\u4f5c\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n\n\u30a6\u30a7\u30d6\uff08nginx\uff09\u30b5\u30fc\u30d0\u3067\u6b63\u5e38\u306bPHP\u306e\u51e6\u7406\u304c\u3055\u308c\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8 **/usr/share/nginx/html** \u914d\u4e0b\u306b **index.php** \u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash\n$ sudo vi /usr/share/nginx/html/index.php\n```\n\n```php:index.php\n<?php phpinfo() ?>\n```\n\n\u30a6\u30a7\u30d6\u30b5\u30fc\u30d0\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u51fa\u529b\u3055\u308c\u3066\u3044\u308c\u3070\u5b8c\u4e86\u3067\u3059\u3002\n\n```bash\n$ curl localhost/index.php | head\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"DTD/xhtml1-transitional.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\"><head>\n<style type=\"text/css\">\nbody {background-color: #fff; color: #222; font-family: sans-serif;}\npre {margin: 0; font-family: monospace;}\na:link {color: #009; text-decoration: none; background-color: #fff;}\na:hover {text-decoration: underline;}\ntable {border-collapse: collapse; border: 0; width: 934px; box-shadow: 1px 2px 3px #ccc;}\n.center {text-align: center;}\n.center table {margin: 1em auto; text-align: left;}\n100 48904    0 48904    0     0   291k      0 --:--:-- --:--:-- --:--:--  292k\ncurl: (23) Failed writing body (248 != 4256)\n```\n\n![php7.png](https://qiita-image-store.s3.amazonaws.com/0/69983/da3e08d4-9d46-be79-5cde-41e17e0784f7.png)\n\n# \u53c2\u8003\u6587\u732e\n1. \u30ed\u30b0\u30a4\u30f3\u51fa\u6765\u306a\u3044\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5,  https://www.express.nec.co.jp/linux/distributions/knowledge/system/false.html, Online; accessed 9-April-2016.\n2. PHP-FPM(PHP7) + nginx \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb(CentOS 6) - Qiita, http://qiita.com/TatsuNet/items/54d486652377a76104d1#php-fpm-%E3%81%AE%E8%B5%B7%E5%8B%95, Online; accessed 2\u2013February\u20132016.\n3. nginx\u3067PHP\u3092\u52d5\u304b\u3059 - Qiita, http://qiita.com/duke-gonorego/items/817b5f8ac7cab19a8897, Online; accessed 2-Februrary-2016.\n4. CentOS 7 \u30b5\u30fc\u30d3\u30b9\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a _ server-memo.net, http://www.server-memo.net/centos-settings/centos7/systemctl-enable.html, Online; accessed 9-April-2016.\n5. \u4e45\u4fdd \u9054\u5f66, \u9053\u4e95 \u4fca\u4ecb, \"nginx\u5b9f\u8df5\u5165\u9580 (WEB+DB PRESS plus)\", 2016/1/16.\n6. nginx \u3068 PHP-FPM \u306e\u4ed5\u7d44\u307f\u3092\u3061\u3083\u3093\u3068\u7406\u89e3\u3057\u306a\u304c\u3089 PHP \u306e\u5b9f\u884c\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b - Qiita, http://qiita.com/kotarella1110/items/634f6fafeb33ae0f51dc, Online; accessed 9-April-2016.\n6. \u8abf\u3079\u306a\u304d\u3083\u5bdd\u308c\u306a\u3044\uff01\u3068\u8abf\u3079\u305f\u3089\u4f59\u8a08\u306b\u5bdd\u308c\u306a\u304f\u306a\u3063\u305f\u30bd\u30b1\u30c3\u30c8\u306e\u8a71 - Qiita, http://qiita.com/kuni-nakaji/items/d11219e4ad7c74ece748, Online; accessed 9-April-2016.\n", "tags": ["Linux", "\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9", "CentOS7.1", "nginx", "php-fpm"]}