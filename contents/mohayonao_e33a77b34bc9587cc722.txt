{"tags": ["WebAudioAPI", "JavaScript"], "context": " More than 1 year has passed since last update.\nAbleton Live \u306e FM\u97f3\u6e90 Operator \u3067\u306f Coarse \u3068 Fine \u306e\u5024\u3067\u5404\u30aa\u30b7\u30ec\u30fc\u30bf\u30fc\u306e\u5468\u6ce2\u6570\u306e\u8abf\u7bc0\u304c\u3067\u304d\u307e\u3059\u3002\n\u8abf\u7bc0\u5f8c\u306e\u5468\u6ce2\u6570\u3092\u6c42\u3081\u308b\u5f0f\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\noutputFrequency = inputFrequency * Coarse * (1 + Fine / 1000);\n\n\u4e0a\u8a18\u306e\u5f0f\u3092\u3059\u3054\u304f\u96d1\u306b\u8aac\u660e\u3059\u308b\u3068\u3001\u8a08\u7b97\u524d\u306e\u5468\u6ce2\u6570\u306b\u5bfe\u3059\u308b\u6bd4\u7387\u3092\u8a08\u7b97\u3057\u3066\u3044\u3066\u3001Coarse \u304c\u6574\u6570\u90e8\u5206\u3001Fine \u304c\u5c0f\u6570\u70b9\u4ee5\u4e0b\u306e\u90e8\u5206\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u8a08\u7b97\u5f8c\u306e\u5468\u6ce2\u6570 =\u3000\u8a08\u7b97\u524d\u306e\u5468\u6ce2\u6570 * Coarse.Fine\n\n# Coarse = 11, Fine = 965 \u306e\u3068\u304d\u306a\u3089\u3001\u8a08\u7b97\u524d\u306e\u5468\u6ce2\u6570\u306b 11.965 \u3092\u304b\u3051\u308b\n\n\u305d\u3053\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u7528\u610f\u3059\u308b\u3068..\nfunction convertFineIntoRatio(fine) {\n  if (fine < 0) {\n    return 1 / (1 - fine / 1000);\n  }\n  return 1 + fine / 1000;\n}\n\n\u5192\u982d\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u306e\u8a2d\u5b9a\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\u3002\nopA.frequency.value = frequency *  0.5 * convertFineIntoRatio(993);\nopB.frequency.value = frequency * 12.0 * convertFineIntoRatio(  0);\nopC.frequency.value = frequency *  0.5 * convertFineIntoRatio(995);\nopD.frequency.value = frequency * 11.0 * convertFineIntoRatio(965);\n\n\u30de\u30a4\u30ca\u30b9\u5024\u306e\u8a2d\u5b9a\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u306e\u3088\u3046\u306b\u3082\u66f8\u3051\u308b\u3002\nopA.frequency.value = frequency *  1.0 * convertFineIntoRatio( -7);\nopB.frequency.value = frequency * 12.0 * convertFineIntoRatio(  0);\nopC.frequency.value = frequency *  1.0 * convertFineIntoRatio( -5);\nopD.frequency.value = frequency * 12.0 * convertFineIntoRatio(-35);\n\n\u6bd4\u7387\u304b\u3089MIDI\u30ce\u30fc\u30c8\u756a\u53f7\u3092\u8a08\u7b97\u3057\u3066\u3084\u308c\u3070\u3001\u305d\u306e100\u500d\u304c detune \u306e\u5024\u3068\u306a\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u7528\u610f\u3059\u308b\u3068..\nfunction convertFineIntoDetune(fine) {\n  var sign = fine < 0 ? -1 : +1;\n  var ratio = 1 + Math.abs(fine) / 1000;\n\n  return sign * Math.log(ratio) * Math.LOG2E * 12 * 100;\n}\n\n\u3053\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\u3002\nopA.frequency.value = frequency * 0.5;\nopB.frequency.value = frequency * 12;\nopC.frequency.value = frequency * 0.5;\nopD.frequency.value = frequency * 11;\n\nopA.detune.value = convertFineIntoDetune(993);\nopB.detune.value = convertFineIntoDetune(0);\nopC.detune.value = convertFineIntoDetune(995);\nopD.detune.value = convertFineIntoDetune(965);\n\n\u3082\u3057\u304f\u306f\u30de\u30a4\u30ca\u30b9\u5024\u3092\u4f7f\u3063\u3066\u3053\u3046\u3002\nopA.frequency.value = frequency;\nopB.frequency.value = frequency * 12;\nopC.frequency.value = frequency;\nopD.frequency.value = frequency * 12;\n\nopA.detune.value = convertFineIntoDetune(-7);\nopB.detune.value = convertFineIntoDetune(0);\nopC.detune.value = convertFineIntoDetune(-5);\nopD.detune.value = convertFineIntoDetune(-35);\n\n\u3061\u306a\u307f\u306b Level \u5024\u306e dB \u306f\u4ee5\u4e0b\u306e\u5f0f\u3067\u5909\u63db\u3067\u304d\u308b\u306e\u3067\u3001\nfunction convertDecibelIntoGain(db) {\n  return Math.pow(10, db * 0.05);\n}\n\n\u3053\u3046\u66f8\u3051\u308b\u3002\nopALevel.gain.value = convertDecibelIntoGain(-2.8);\nopBLevel.gain.value = convertDecibelIntoGain(-22);\nopCLevel.gain.value = convertDecibelIntoGain(-5.7);\nopDLevel.gain.value = convertDecibelIntoGain(-40);\n\n\u3051\u3069\u3001\u591a\u5206\u5909\u8abf\u65b9\u5f0f\u304c\u7570\u306a\u308b (\u3088\u304f\u3042\u308b\u4f4d\u76f8\u3067\u5909\u8abf\u3059\u308b\u3084\u308a\u65b9\u306b\u5bfe\u3057\u3066\u3001Web Audio API \u306f\u5468\u6ce2\u6570\u3067\u3057\u304b\u5909\u8abf\u3067\u304d\u306a\u3044) \u306e\u3067\u30b2\u30a4\u30f3\u306e\u5024\u306f\u9069\u5b9c\u8abf\u7bc0\u304c\u5fc5\u8981\u3002\n\u50d5\u306f\u30e2\u30b8\u30e5\u30ec\u30fc\u30bf\u30fc\u306e\u30b2\u30a4\u30f3\u5024\u306f\u52d8\u3067\u8abf\u7bc0\u3057\u3066\u3044\u308b\u3002\nopALevel.gain.value = convertDecibelIntoGain(-2.8);\nopBLevel.gain.value = convertDecibelIntoGain(-22) * frequency * 20;\nopCLevel.gain.value = convertDecibelIntoGain(-5.7);\nopDLevel.gain.value = convertDecibelIntoGain(-40) * frequency * 20;\n\n\u3053\u308c\u3092FM\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306b\u5f93\u3063\u3066\u63a5\u7d9a\u3059\u308c\u3070 \u305d\u3053\u305d\u3053 \u540c\u3058\u97f3\u304c\u3064\u304f\u308c\u308b\u3002\n\u53c2\u8003\u306b\u3057\u305f\u30c8\u30d4\u30c3\u30af\nhttps://forum.ableton.com/viewtopic.php?f=4&t=26560\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2015-08-16 7.05.17.png](https://qiita-image-store.s3.amazonaws.com/0/2568/95743afb-0dfe-d10e-820b-d3cc3ad8111a.png)\n\nAbleton Live \u306e FM\u97f3\u6e90 Operator \u3067\u306f Coarse \u3068 Fine \u306e\u5024\u3067\u5404\u30aa\u30b7\u30ec\u30fc\u30bf\u30fc\u306e\u5468\u6ce2\u6570\u306e\u8abf\u7bc0\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u8abf\u7bc0\u5f8c\u306e\u5468\u6ce2\u6570\u3092\u6c42\u3081\u308b\u5f0f\u306f\u4ee5\u4e0b\u306e\u3068\u304a\u308a\u3002\n\n```js\noutputFrequency = inputFrequency * Coarse * (1 + Fine / 1000);\n```\n\n\u4e0a\u8a18\u306e\u5f0f\u3092\u3059\u3054\u304f\u96d1\u306b\u8aac\u660e\u3059\u308b\u3068\u3001\u8a08\u7b97\u524d\u306e\u5468\u6ce2\u6570\u306b\u5bfe\u3059\u308b\u6bd4\u7387\u3092\u8a08\u7b97\u3057\u3066\u3044\u3066\u3001Coarse \u304c\u6574\u6570\u90e8\u5206\u3001Fine \u304c\u5c0f\u6570\u70b9\u4ee5\u4e0b\u306e\u90e8\u5206\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```\n\u8a08\u7b97\u5f8c\u306e\u5468\u6ce2\u6570 =\u3000\u8a08\u7b97\u524d\u306e\u5468\u6ce2\u6570 * Coarse.Fine\n\n# Coarse = 11, Fine = 965 \u306e\u3068\u304d\u306a\u3089\u3001\u8a08\u7b97\u524d\u306e\u5468\u6ce2\u6570\u306b 11.965 \u3092\u304b\u3051\u308b\n```\n\n\u305d\u3053\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u7528\u610f\u3059\u308b\u3068..\n\n```js\nfunction convertFineIntoRatio(fine) {\n  if (fine < 0) {\n    return 1 / (1 - fine / 1000);\n  }\n  return 1 + fine / 1000;\n}\n```\n\n\u5192\u982d\u306e\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8\u306e\u8a2d\u5b9a\u306f\u3001\u3053\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\u3002\n\n```js\nopA.frequency.value = frequency *  0.5 * convertFineIntoRatio(993);\nopB.frequency.value = frequency * 12.0 * convertFineIntoRatio(  0);\nopC.frequency.value = frequency *  0.5 * convertFineIntoRatio(995);\nopD.frequency.value = frequency * 11.0 * convertFineIntoRatio(965);\n```\n\n\u30de\u30a4\u30ca\u30b9\u5024\u306e\u8a2d\u5b9a\u306b\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u3053\u306e\u3088\u3046\u306b\u3082\u66f8\u3051\u308b\u3002\n\n```js\nopA.frequency.value = frequency *  1.0 * convertFineIntoRatio( -7);\nopB.frequency.value = frequency * 12.0 * convertFineIntoRatio(  0);\nopC.frequency.value = frequency *  1.0 * convertFineIntoRatio( -5);\nopD.frequency.value = frequency * 12.0 * convertFineIntoRatio(-35);\n```\n\n\u6bd4\u7387\u304b\u3089MIDI\u30ce\u30fc\u30c8\u756a\u53f7\u3092\u8a08\u7b97\u3057\u3066\u3084\u308c\u3070\u3001\u305d\u306e100\u500d\u304c detune \u306e\u5024\u3068\u306a\u308b\u306e\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u95a2\u6570\u3092\u7528\u610f\u3059\u308b\u3068..\n\n```js\nfunction convertFineIntoDetune(fine) {\n  var sign = fine < 0 ? -1 : +1;\n  var ratio = 1 + Math.abs(fine) / 1000;\n\n  return sign * Math.log(ratio) * Math.LOG2E * 12 * 100;\n}\n```\n\n\u3053\u306e\u3088\u3046\u306b\u66f8\u3051\u308b\u3002\n\n```js\nopA.frequency.value = frequency * 0.5;\nopB.frequency.value = frequency * 12;\nopC.frequency.value = frequency * 0.5;\nopD.frequency.value = frequency * 11;\n\nopA.detune.value = convertFineIntoDetune(993);\nopB.detune.value = convertFineIntoDetune(0);\nopC.detune.value = convertFineIntoDetune(995);\nopD.detune.value = convertFineIntoDetune(965);\n```\n\n\u3082\u3057\u304f\u306f\u30de\u30a4\u30ca\u30b9\u5024\u3092\u4f7f\u3063\u3066\u3053\u3046\u3002\n\n```js\nopA.frequency.value = frequency;\nopB.frequency.value = frequency * 12;\nopC.frequency.value = frequency;\nopD.frequency.value = frequency * 12;\n\nopA.detune.value = convertFineIntoDetune(-7);\nopB.detune.value = convertFineIntoDetune(0);\nopC.detune.value = convertFineIntoDetune(-5);\nopD.detune.value = convertFineIntoDetune(-35);\n```\n\n\u3061\u306a\u307f\u306b Level \u5024\u306e dB \u306f\u4ee5\u4e0b\u306e\u5f0f\u3067\u5909\u63db\u3067\u304d\u308b\u306e\u3067\u3001\n\n```js\nfunction convertDecibelIntoGain(db) {\n  return Math.pow(10, db * 0.05);\n}\n```\n\n\u3053\u3046\u66f8\u3051\u308b\u3002\n\n```js\nopALevel.gain.value = convertDecibelIntoGain(-2.8);\nopBLevel.gain.value = convertDecibelIntoGain(-22);\nopCLevel.gain.value = convertDecibelIntoGain(-5.7);\nopDLevel.gain.value = convertDecibelIntoGain(-40);\n```\n\n\u3051\u3069\u3001\u591a\u5206\u5909\u8abf\u65b9\u5f0f\u304c\u7570\u306a\u308b (\u3088\u304f\u3042\u308b\u4f4d\u76f8\u3067\u5909\u8abf\u3059\u308b\u3084\u308a\u65b9\u306b\u5bfe\u3057\u3066\u3001Web Audio API \u306f\u5468\u6ce2\u6570\u3067\u3057\u304b\u5909\u8abf\u3067\u304d\u306a\u3044) \u306e\u3067\u30b2\u30a4\u30f3\u306e\u5024\u306f\u9069\u5b9c\u8abf\u7bc0\u304c\u5fc5\u8981\u3002\n\n\u50d5\u306f\u30e2\u30b8\u30e5\u30ec\u30fc\u30bf\u30fc\u306e\u30b2\u30a4\u30f3\u5024\u306f\u52d8\u3067\u8abf\u7bc0\u3057\u3066\u3044\u308b\u3002\n\n```js\nopALevel.gain.value = convertDecibelIntoGain(-2.8);\nopBLevel.gain.value = convertDecibelIntoGain(-22) * frequency * 20;\nopCLevel.gain.value = convertDecibelIntoGain(-5.7);\nopDLevel.gain.value = convertDecibelIntoGain(-40) * frequency * 20;\n```\n\n\u3053\u308c\u3092FM\u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306b\u5f93\u3063\u3066\u63a5\u7d9a\u3059\u308c\u3070 **\u305d\u3053\u305d\u3053** \u540c\u3058\u97f3\u304c\u3064\u304f\u308c\u308b\u3002\n\n\u53c2\u8003\u306b\u3057\u305f\u30c8\u30d4\u30c3\u30af\nhttps://forum.ableton.com/viewtopic.php?f=4&t=26560\n"}