{"tags": ["EngineYard"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nEngine Yard Cloud\u3067\u306f\u3001\u30a4\u30f3\u30d5\u30e9\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308bCustom Chef\u3068\u3001deploy\u30d7\u30ed\u30bb\u30b9\u306b\u30d5\u30c3\u30af\u3092\u5165\u308c\u308bDeploy Hook\u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u3042\u308b\u3002\n\u305d\u306e\u306a\u304b\u3067\u3001\u30a4\u30f3\u30d5\u30e9\u8a2d\u5b9a\u306e\u5024\u3092\u53c2\u7167\u3057\u305f\u3044\u3068\u304d\u306b\u3001node\u3068\u3044\u3046\u5909\u6570\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\n\n\u53c2\u7167\u306e\u4ed5\u65b9\n\nCustom Chef\n\u5404\u30ec\u30b7\u30d4\u306e\u4e2d\u3067\u3001node\u5909\u6570\u304b\u3089\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\nnode[:engineyard]\n\n\nDeploy Hook\nRuby \u30b3\u30fc\u30c9\u3067\u3001config.node\u3044\u304b\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\nconfig.node[:engineyard]\n\n\n\u4f8b\nElasticSearch\u306eUtility Instance\u306b\u5bfe\u3057\u3066\u51e6\u7406\u3092\u3059\u308b\nif node[:name].match(/elasticsearch/i)\n  # ... do things here ...\nend\n\nPHP\u306eWeb Root\u3092\u53d6\u5f97\u3059\u308b\nrepo = \"git://github.com/engineyard/howto.git\" # plz replace your own\n\napp_info = node[:engineyard][:environment][:apps].select{|app| app.values.include? repo}.first\nweb_root = app_info[:components].select{|comp| comp.keys.include? \"php_webroot\"}.first['php_webroot']\n\n\n\u53c2\u8003\nhttps://blog.engineyard.com/2014/engine-yards-chef-node-object\nhttps://support.cloud.engineyard.com/entries/22329616-\u30c7\u30d7\u30ed\u30a4\u30d5\u30c3\u30af\u306e\u5229\u7528?locale=67\nhttps://support.cloud.engineyard.com/entries/30566833-Chef-Recipe%E3%81%AE%E3%83%87%E3%83%90%E3%83%83%E3%82%AF?locale=67\n## \u6982\u8981\n\nEngine Yard Cloud\u3067\u306f\u3001\u30a4\u30f3\u30d5\u30e9\u3092\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308bCustom Chef\u3068\u3001deploy\u30d7\u30ed\u30bb\u30b9\u306b\u30d5\u30c3\u30af\u3092\u5165\u308c\u308bDeploy Hook\u3068\u3044\u3046\u4ed5\u7d44\u307f\u304c\u3042\u308b\u3002\n\u305d\u306e\u306a\u304b\u3067\u3001\u30a4\u30f3\u30d5\u30e9\u8a2d\u5b9a\u306e\u5024\u3092\u53c2\u7167\u3057\u305f\u3044\u3068\u304d\u306b\u3001node\u3068\u3044\u3046\u5909\u6570\u3092\u4f7f\u3046\u3053\u3068\u304c\u3067\u304d\u308b\n\n\n## \u53c2\u7167\u306e\u4ed5\u65b9\n\n### Custom Chef\n\n\u5404\u30ec\u30b7\u30d4\u306e\u4e2d\u3067\u3001node\u5909\u6570\u304b\u3089\u53c2\u7167\u3067\u304d\u307e\u3059\u3002\n\n```\nnode[:engineyard]\n```\n\n\n#### Deploy Hook\n\nRuby \u30b3\u30fc\u30c9\u3067\u3001config.node\u3044\u304b\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u307e\u3059\u3002\n\n```\nconfig.node[:engineyard]\n```\n\n\n### \u4f8b\n\nElasticSearch\u306eUtility Instance\u306b\u5bfe\u3057\u3066\u51e6\u7406\u3092\u3059\u308b\n\n```rb\nif node[:name].match(/elasticsearch/i)\n  # ... do things here ...\nend\n```\n\nPHP\u306eWeb Root\u3092\u53d6\u5f97\u3059\u308b\n\n```rb\nrepo = \"git://github.com/engineyard/howto.git\" # plz replace your own\n\napp_info = node[:engineyard][:environment][:apps].select{|app| app.values.include? repo}.first\nweb_root = app_info[:components].select{|comp| comp.keys.include? \"php_webroot\"}.first['php_webroot']\n```\n\n\n## \u53c2\u8003\n\nhttps://blog.engineyard.com/2014/engine-yards-chef-node-object\nhttps://support.cloud.engineyard.com/entries/22329616-\u30c7\u30d7\u30ed\u30a4\u30d5\u30c3\u30af\u306e\u5229\u7528?locale=67\nhttps://support.cloud.engineyard.com/entries/30566833-Chef-Recipe%E3%81%AE%E3%83%87%E3%83%90%E3%83%83%E3%82%AF?locale=67\n"}