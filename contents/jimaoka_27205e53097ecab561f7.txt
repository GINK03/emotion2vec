{"context": "\n\nKVM\u3092Web\u304b\u3089\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b(WebVirtMgr)\n\n\u6211\u304c\u5bb6\u3067\u306f\u81ea\u5b85\u3067\u4f7f\u7528\u3059\u308b\u30b5\u30fc\u30d0\u3084\u3001\u691c\u8a3c\u306e\u305f\u3081\u306e\u74b0\u5883\u3092KVM\u3092\u4f7f\u7528\u3057\u3066\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u4eca\u307e\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306b\u3001\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u6253\u305f\u306a\u3051\u308c\u3070\u884c\u3051\u306a\u3044\u72b6\u6cc1\u3067\u82e5\u5e72\u9762\u5012\u3067\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001Web\u304b\u3089\u305d\u308c\u3089\u306e\u64cd\u4f5c\u3092\u884c\u3048\u308b\u3082\u306e\u3092\u63a2\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001WebVirtMgr\u304c\u4f7f\u3044\u3084\u3059\u304f\u3066\u3044\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u74b0\u5883\nOS: CentOS 7.1 (virt\u306b\u3088\u308bKVM\u74b0\u5883\u69cb\u7bc9\u6e08\u307f)\n\u203b KVM\u74b0\u5883\u306b\u95a2\u3057\u3066\u306f CentOS7\u4e0a\u306bKVM\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b(CUI\u74b0\u5883) \u3092\u53c2\u7167\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806\nInstall WebVirtMgr\u3092\u53c2\u7167\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\n\u52d5\u4f5c\u306b\u5fc5\u8981\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo yum -y install http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-9.noarch.rpm\n$ sudo yum -y install git python-pip libvirt-python libxml2-python python-websockify supervisor nginx\n$ sudo yum -y install gcc python-devel\n$ sudo pip install numpy\n\n\ngit\u304b\u3089webvirtmgr\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3046\n### git\u304b\u3089\u30af\u30ed\u30fc\u30f3\u3059\u308b\n$ git clone git://github.com/retspen/webvirtmgr.git\n$ cd webvirtmgr\n\n### \u5fc5\u8981\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo pip install -r requirements.txt\n\n### \u521d\u671f\u8a2d\u5b9a\n$ ./manage.py syncdb\n...\nYou just installed Django's auth system, which means you don't have any superusers defined.\nWould you like to create one now? (yes/no): yes\nUsername (leave blank to use 'username'):\nEmail address: hogehoge@yahaoo.co.jp\nPassword:\nPassword (again):\nSuperuser created successfully.\nInstalling custom SQL ...\nInstalling indexes ...\nInstalled 6 object(s) from 1 fixture(s)\n\n### static\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n$ ./manage.py collectstatic\nWARNING:root:No local_settings file found.\n\nYou have requested to collect static files at the destination\nlocation as specified in your settings.\n\nThis will overwrite existing files!\nAre you sure you want to do this?\n\nType 'yes' to continue, or 'no' to cancel: yes\n\n\nnginx\u306e\u8a2d\u5b9a\u3092\u884c\u3046\n### webvirtmgr\u3092\u79fb\u52d5\n$ sudo mv webvirtmgr /var/www\n$ sudo chown -R nginx:nginx /var/www\n\n### nginx\u306e\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\n$ sudo vim /etc/nginx/conf.d/webvirtmgr.conf\nserver {\n    listen 80 default_server;\n\n    server_name $hostname;\n    #access_log /var/log/nginx/webvirtmgr_access_log; \n\n    location /static/ {\n        root /var/www/webvirtmgr/webvirtmgr;\n        expires max;\n    }\n\n    location / {\n        proxy_pass http://127.0.0.1:8000;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-for $proxy_add_x_forwarded_for;\n        proxy_set_header Host $host:$server_port;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_connect_timeout 600;\n        proxy_read_timeout 600;\n        proxy_send_timeout 600;\n        client_max_body_size 1024M;\n    }\n}\n\n### \u30c7\u30d5\u30a9\u30eb\u30c8\u30da\u30fc\u30b8\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\n$ sudo vim /etc/nginx/nginx.conf\n#    server {\n#        listen       80 default_server;\n#        server_name  localhost;\n#        root         /usr/share/nginx/html;\n#\n#        #charset koi8-r;\n#\n#        #access_log  /var/log/nginx/host.access.log  main;\n#\n#        # Load configuration files for the default server block.\n#        include /etc/nginx/default.d/*.conf;\n#\n#        location / {\n#        }\n#\n#        # redirect server error pages to the static page /40x.html\n#        #\n#        error_page  404              /404.html;\n#        location = /40x.html {\n#        }\n#\n#        # redirect server error pages to the static page /50x.html\n#        #\n#        error_page   500 502 503 504  /50x.html;\n#        location = /50x.html {\n#        }\n#    }\n\n### nginx\u306e\u518d\u8d77\u52d5\n$ sudo service nginx restart\n\n\nsupervisor\u306e\u8a2d\u5b9a\n8000/tcp\u3067\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n### \u672b\u5c3e\u306b\u8ffd\u52a0\u3059\u308b\n$ sudo vim /etc/supervisord.conf\n[program:webvirtmgr]\ncommand=/usr/bin/python /var/www/webvirtmgr/manage.py run_gunicorn -c /var/www/webvirtmgr/conf/gunicorn.conf.py\ndirectory=/var/www/webvirtmgr\nautostart=true\nautorestart=true\nlogfile=/var/log/supervisor/webvirtmgr.log\nlog_stderr=true\nuser=nginx\n\n[program:webvirtmgr-console]\ncommand=/usr/bin/python /var/www/webvirtmgr/console/webvirtmgr-console\ndirectory=/var/www/webvirtmgr\nautostart=true\nautorestart=true\nstdout_logfile=/var/log/supervisor/webvirtmgr-console.log\nredirect_stderr=true\nuser=nginx\n\n### \u518d\u8d77\u52d5\n$ sudo service supervisord restart\n\n\nWeb\u30da\u30fc\u30b8\u306e\u78ba\u8a8d\n\u3053\u3053\u307e\u3067\u304f\u308b\u3068\u3001http://hostname\u3067\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n(\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306fSELinux\u306e\u7121\u52b9\u5316\u3084\u3001\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d)\n\n\n\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u3092\u8ffd\u52a0\nWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u4e0a\u304b\u3089\u3001\u64cd\u4f5c\u3059\u308b\u5bfe\u8c61\u306e\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\uff08\u4eca\u56de\u306f\u30ed\u30fc\u30ab\u30eb\uff09\n\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u3078\u306e\u63a5\u7d9a\u65b9\u6cd5\u306fTCP, SSH, TLS, Socket\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u304c\u3001SSH\u3067\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\nSetup SSH Authorization\u3092\u53c2\u8003\u306b\u8a2d\u5b9a\u3057\u3066\u884c\u304d\u307e\u3059\u3002\n\n### nginx\u30e6\u30fc\u30b6\u306b\u5165\u308b\n$ sudo su - nginx -s /bin/bash\n\n### \u9375\u306e\u4f5c\u6210(\u540d\u524d\u306fid_rsa\u3067\u3088\u3044)\n[nginx]$ ssh-keygen -b 4096\n[nginx]$ touch ~/.ssh/config && echo -e \"StrictHostKeyChecking=no\\nUserKnownHostsFile=/dev/null\" >> ~/.ssh/config\n[nginx]$ chmod 0600 ~/.ssh/config\n[nginx]$ exit\n\n### webvirtmgr\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\n$ sudo adduser webvirtmgr\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\n$ sudo passwd webvirtmgr\n\n### libvirt\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\n$ sudo usermod -G libvirt -a webvirtmgr\n\n### nginx\u30e6\u30fc\u30b6\u306b\u5165\u308b\n$ sudo su - nginx -s /bin/bash\n\n###  \u9375\u3092\u9001\u4fe1(\u4ed6\u306e\u65b9\u6cd5\u3067\u3082\u3088\u3044)\n[nginx]$ ssh-copy-id webvirtmgr@qemu-kvm-libvirt-host\n\nWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u304b\u3089\u3001 [Add Connection] -> [SSH Connections] \u3092\u9078\u629e\u3057\u3066\u3001\u5148\u307b\u3069\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\u3046\u307e\u304f\u3044\u304f\u3068\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306bConnections\u306b\u8ffd\u52a0\u3055\u308c\u3001Web\u4e0a\u304b\u3089\u306e\u7ba1\u7406\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u5143\u3005\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u7d4c\u7531\u3067\u30b2\u30b9\u30c8\u30de\u30b7\u30f3\u3092\u5e7e\u3064\u304b\u4f5c\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u5143\u304b\u3089\u30db\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30e1\u30c7\u30a3\u30a2\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3059\u3002\uff08\u4eca\u56de\u306fCentOS7-minimal\uff09\n### Centos7(minimal)\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n$ sudo -u nginx wget -O /var/www/webvirtmgr/images/CentOS-7-x86_64-Minimal-1511.iso http://ftp.nara.wide.ad.jp/pub/Linux/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1511.iso\n\n\u7d42\u308f\u3063\u305f\u3089\u3001\u5bfe\u8c61\u306e\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6 \u2192 \"Storages\" \u2192 \"New Storage\" \u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002\n\n\u51fa\u3066\u304d\u305f\u30a6\u30a3\u30f3\u30c9\u30a6\u306e \"ISO\" \u30bf\u30d6\u3092\u62bc\u3059\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 /var/www/webvirtmgr/images \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u307e\u307e\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u305d\u306e\u5f8c\u3001\"New Instance\"\u30dc\u30bf\u30f3\u304b\u3089\u9069\u5f53\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3001\u201dSettings\u201d \u2192 \"Media\" \u30bf\u30d6\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u5148\u307b\u3069\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fiso\u30d5\u30a1\u30a4\u30eb\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u3001\"Connect\" \u30dc\u30bf\u30f3\u3067\u53d6\u308a\u4ed8\u3051\u307e\u3059\u3002\n\n\u305d\u306e\u5f8c \"Power\" \u2192 \"Start\" \u3067\u30d1\u30ef\u30fc\u30aa\u30f3\n\n\"Access\" \u2192 \"Console\" \u2192 \"Console\" \u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u30db\u30b9\u30c8\u306b\u63a5\u7d9a\u3055\u308c\u308b(\u306f\u305a)\u306e\u3067\u3001\u30dd\u30c1\u30dd\u30c1\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u3092\u9032\u3081\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3067\u3059\u3002\n\n\n\u6240\u611f\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304c\u7c21\u5358\u3067UI\u3082\u3042\u308b\u7a0b\u5ea6\u6574\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u6c17\u306b\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u4f55\u3088\u308a\u3001\u4eca\u307e\u3067\u30b3\u30de\u30f3\u30c9\u7d4c\u7531\u3060\u3063\u305f\u3082\u306e\u304c\u3001Web\u304b\u3089\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u975e\u5e38\u306b\u697d\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n--\n\u3053\u306e\u6295\u7a3f\u306f\u3001\u4ee5\u524d\u306b\u30d6\u30ed\u30b0\u306b\u66f8\u3044\u305f\u3082\u306e\u3068\u540c\u69d8\u306e\u5185\u5bb9\u306b\u306a\u308a\u307e\u3059\u3002\nhttp://jimaoka.hatenablog.jp/entry/WebVirtMgr\n# KVM\u3092Web\u304b\u3089\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b(WebVirtMgr)\n\n![20170105195511.png](https://qiita-image-store.s3.amazonaws.com/0/46188/6eebf48a-dc5e-19eb-16d6-8f5c55974a62.png)\n\n\u6211\u304c\u5bb6\u3067\u306f\u81ea\u5b85\u3067\u4f7f\u7528\u3059\u308b\u30b5\u30fc\u30d0\u3084\u3001\u691c\u8a3c\u306e\u305f\u3081\u306e\u74b0\u5883\u3092KVM\u3092\u4f7f\u7528\u3057\u3066\u4f5c\u3063\u3066\u3044\u307e\u3059\u3002\n\u3057\u304b\u3057\u3001\u4eca\u307e\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306b\u3001\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u30b3\u30de\u30f3\u30c9\u3092\u6253\u305f\u306a\u3051\u308c\u3070\u884c\u3051\u306a\u3044\u72b6\u6cc1\u3067\u82e5\u5e72\u9762\u5012\u3067\u3057\u305f\u3002\n\u305d\u3053\u3067\u3001Web\u304b\u3089\u305d\u308c\u3089\u306e\u64cd\u4f5c\u3092\u884c\u3048\u308b\u3082\u306e\u3092\u63a2\u3057\u3066\u3044\u305f\u306e\u3067\u3059\u304c\u3001[WebVirtMgr](https://github.com/retspen/webvirtmgr)\u304c\u4f7f\u3044\u3084\u3059\u304f\u3066\u3044\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u74b0\u5883\n**OS:** CentOS 7.1 (virt\u306b\u3088\u308bKVM\u74b0\u5883\u69cb\u7bc9\u6e08\u307f)\n\u203b KVM\u74b0\u5883\u306b\u95a2\u3057\u3066\u306f [CentOS7\u4e0a\u306bKVM\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b(CUI\u74b0\u5883)](http://qiita.com/jimaoka/items/d528a7f55e832982c193) \u3092\u53c2\u7167\n\n## \u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u624b\u9806\n[Install WebVirtMgr](https://github.com/retspen/webvirtmgr/wiki/Install-WebVirtMgr)\u3092\u53c2\u7167\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\n\n### \u52d5\u4f5c\u306b\u5fc5\u8981\u306a\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ sudo yum -y install http://dl.fedoraproject.org/pub/epel/7/x86_64/e/epel-release-7-9.noarch.rpm\n$ sudo yum -y install git python-pip libvirt-python libxml2-python python-websockify supervisor nginx\n$ sudo yum -y install gcc python-devel\n$ sudo pip install numpy\n```\n\n### git\u304b\u3089webvirtmgr\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3001\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3046\n\n```bash\n### git\u304b\u3089\u30af\u30ed\u30fc\u30f3\u3059\u308b\n$ git clone git://github.com/retspen/webvirtmgr.git\n$ cd webvirtmgr\n \n### \u5fc5\u8981\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo pip install -r requirements.txt\n \n### \u521d\u671f\u8a2d\u5b9a\n$ ./manage.py syncdb\n...\nYou just installed Django's auth system, which means you don't have any superusers defined.\nWould you like to create one now? (yes/no): yes\nUsername (leave blank to use 'username'):\nEmail address: hogehoge@yahaoo.co.jp\nPassword:\nPassword (again):\nSuperuser created successfully.\nInstalling custom SQL ...\nInstalling indexes ...\nInstalled 6 object(s) from 1 fixture(s)\n \n### static\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\n$ ./manage.py collectstatic\nWARNING:root:No local_settings file found.\n\nYou have requested to collect static files at the destination\nlocation as specified in your settings.\n\nThis will overwrite existing files!\nAre you sure you want to do this?\n\nType 'yes' to continue, or 'no' to cancel: yes\n```\n\n### nginx\u306e\u8a2d\u5b9a\u3092\u884c\u3046\n\n```sh\n### webvirtmgr\u3092\u79fb\u52d5\n$ sudo mv webvirtmgr /var/www\n$ sudo chown -R nginx:nginx /var/www\n\n### nginx\u306e\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\n$ sudo vim /etc/nginx/conf.d/webvirtmgr.conf\nserver {\n    listen 80 default_server;\n\n    server_name $hostname;\n    #access_log /var/log/nginx/webvirtmgr_access_log; \n\n    location /static/ {\n        root /var/www/webvirtmgr/webvirtmgr;\n        expires max;\n    }\n\n    location / {\n        proxy_pass http://127.0.0.1:8000;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-for $proxy_add_x_forwarded_for;\n        proxy_set_header Host $host:$server_port;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_connect_timeout 600;\n        proxy_read_timeout 600;\n        proxy_send_timeout 600;\n        client_max_body_size 1024M;\n    }\n}\n\n### \u30c7\u30d5\u30a9\u30eb\u30c8\u30da\u30fc\u30b8\u90e8\u5206\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3059\u308b\n$ sudo vim /etc/nginx/nginx.conf\n#    server {\n#        listen       80 default_server;\n#        server_name  localhost;\n#        root         /usr/share/nginx/html;\n#\n#        #charset koi8-r;\n#\n#        #access_log  /var/log/nginx/host.access.log  main;\n#\n#        # Load configuration files for the default server block.\n#        include /etc/nginx/default.d/*.conf;\n#\n#        location / {\n#        }\n#\n#        # redirect server error pages to the static page /40x.html\n#        #\n#        error_page  404              /404.html;\n#        location = /40x.html {\n#        }\n#\n#        # redirect server error pages to the static page /50x.html\n#        #\n#        error_page   500 502 503 504  /50x.html;\n#        location = /50x.html {\n#        }\n#    }\n\n### nginx\u306e\u518d\u8d77\u52d5\n$ sudo service nginx restart\n```\n\n### supervisor\u306e\u8a2d\u5b9a\n\n8000/tcp\u3067\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u52d5\u4f5c\u3059\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3092\u884c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n```sh\n### \u672b\u5c3e\u306b\u8ffd\u52a0\u3059\u308b\n$ sudo vim /etc/supervisord.conf\n[program:webvirtmgr]\ncommand=/usr/bin/python /var/www/webvirtmgr/manage.py run_gunicorn -c /var/www/webvirtmgr/conf/gunicorn.conf.py\ndirectory=/var/www/webvirtmgr\nautostart=true\nautorestart=true\nlogfile=/var/log/supervisor/webvirtmgr.log\nlog_stderr=true\nuser=nginx\n\n[program:webvirtmgr-console]\ncommand=/usr/bin/python /var/www/webvirtmgr/console/webvirtmgr-console\ndirectory=/var/www/webvirtmgr\nautostart=true\nautorestart=true\nstdout_logfile=/var/log/supervisor/webvirtmgr-console.log\nredirect_stderr=true\nuser=nginx\n\n### \u518d\u8d77\u52d5\n$ sudo service supervisord restart\n```\n\n### Web\u30da\u30fc\u30b8\u306e\u78ba\u8a8d\n\u3053\u3053\u307e\u3067\u304f\u308b\u3068\u3001http://hostname\u3067\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n(\u3046\u307e\u304f\u3044\u304b\u306a\u3044\u5834\u5408\u306fSELinux\u306e\u7121\u52b9\u5316\u3084\u3001\u30d5\u30a1\u30a4\u30a2\u30a6\u30a9\u30fc\u30eb\u306e\u8a2d\u5b9a\u3092\u78ba\u8a8d)\n\n![20160508222517.png](https://qiita-image-store.s3.amazonaws.com/0/46188/1aa206bc-b47c-bb97-1346-fa5e34ed1f7e.png)\n\n## \u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u3092\u8ffd\u52a0\nWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u4e0a\u304b\u3089\u3001\u64cd\u4f5c\u3059\u308b\u5bfe\u8c61\u306e\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\uff08\u4eca\u56de\u306f\u30ed\u30fc\u30ab\u30eb\uff09\n\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6\u3078\u306e\u63a5\u7d9a\u65b9\u6cd5\u306fTCP, SSH, TLS, Socket\u304c\u3042\u308b\u3088\u3046\u3067\u3059\u304c\u3001SSH\u3067\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n[Setup SSH Authorization](https://github.com/retspen/webvirtmgr/wiki/Setup-SSH-Authorization)\u3092\u53c2\u8003\u306b\u8a2d\u5b9a\u3057\u3066\u884c\u304d\u307e\u3059\u3002\n\n![20160508223211.png](https://qiita-image-store.s3.amazonaws.com/0/46188/33a7d318-2ed0-cd5c-c746-4e0046154aa8.png)\n\n```sh\n### nginx\u30e6\u30fc\u30b6\u306b\u5165\u308b\n$ sudo su - nginx -s /bin/bash\n\n### \u9375\u306e\u4f5c\u6210(\u540d\u524d\u306fid_rsa\u3067\u3088\u3044)\n[nginx]$ ssh-keygen -b 4096\n[nginx]$ touch ~/.ssh/config && echo -e \"StrictHostKeyChecking=no\\nUserKnownHostsFile=/dev/null\" >> ~/.ssh/config\n[nginx]$ chmod 0600 ~/.ssh/config\n[nginx]$ exit\n\n### webvirtmgr\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\n$ sudo adduser webvirtmgr\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\n$ sudo passwd webvirtmgr\n\n### libvirt\u30b0\u30eb\u30fc\u30d7\u306b\u8ffd\u52a0\n$ sudo usermod -G libvirt -a webvirtmgr\n\n### nginx\u30e6\u30fc\u30b6\u306b\u5165\u308b\n$ sudo su - nginx -s /bin/bash\n\n###  \u9375\u3092\u9001\u4fe1(\u4ed6\u306e\u65b9\u6cd5\u3067\u3082\u3088\u3044)\n[nginx]$ ssh-copy-id webvirtmgr@qemu-kvm-libvirt-host\n```\n\nWeb\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9\u304b\u3089\u3001 [Add Connection] -> [SSH Connections] \u3092\u9078\u629e\u3057\u3066\u3001\u5148\u307b\u3069\u306e\u60c5\u5831\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n![20160508224452.png](https://qiita-image-store.s3.amazonaws.com/0/46188/a080daaa-f2ab-77bf-eee5-889c6d7c50b2.png)\n\n\u3046\u307e\u304f\u3044\u304f\u3068\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306bConnections\u306b\u8ffd\u52a0\u3055\u308c\u3001Web\u4e0a\u304b\u3089\u306e\u7ba1\u7406\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u5143\u3005\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u7d4c\u7531\u3067\u30b2\u30b9\u30c8\u30de\u30b7\u30f3\u3092\u5e7e\u3064\u304b\u4f5c\u3063\u3066\u3044\u305f\u306e\u3067\u3001\u5143\u304b\u3089\u30db\u30b9\u30c8\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n![20160508224720.png](https://qiita-image-store.s3.amazonaws.com/0/46188/03cd4da6-a590-f5bd-0c3b-a2d67c7db857.png)\n\n![20160508230857.png](https://qiita-image-store.s3.amazonaws.com/0/46188/cdc1859c-24eb-abbe-5c0f-75cbe6712601.png)\n\n![20160508230903.png](https://qiita-image-store.s3.amazonaws.com/0/46188/1debc94d-57a6-d6a2-de8b-be616b9bb0ae.png)\n\n## \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u4f5c\u6210\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u7528\u306e\u30e1\u30c7\u30a3\u30a2\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304d\u307e\u3059\u3002\uff08\u4eca\u56de\u306fCentOS7-minimal\uff09\n\n```sh\n### Centos7(minimal)\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\n$ sudo -u nginx wget -O /var/www/webvirtmgr/images/CentOS-7-x86_64-Minimal-1511.iso http://ftp.nara.wide.ad.jp/pub/Linux/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-1511.iso\n```\n\n\u7d42\u308f\u3063\u305f\u3089\u3001\u5bfe\u8c61\u306e\u30cf\u30a4\u30d1\u30fc\u30d0\u30a4\u30b6 \u2192 \"Storages\" \u2192 \"New Storage\" \u30dc\u30bf\u30f3\u3092\u62bc\u3057\u307e\u3059\u3002\n\n![20160522221822.png](https://qiita-image-store.s3.amazonaws.com/0/46188/d4ce72f7-77b9-5bce-990f-450de6d94839.png)\n\n\u51fa\u3066\u304d\u305f\u30a6\u30a3\u30f3\u30c9\u30a6\u306e \"ISO\" \u30bf\u30d6\u3092\u62bc\u3059\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 /var/www/webvirtmgr/images \u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u306e\u307e\u307e\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n![20160522221834.png](https://qiita-image-store.s3.amazonaws.com/0/46188/fd9f3e56-f861-175e-2619-823c75c50294.png)\n\n\u305d\u306e\u5f8c\u3001\"New Instance\"\u30dc\u30bf\u30f3\u304b\u3089\u9069\u5f53\u306a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4f5c\u6210\u3057\u3001\u201dSettings\u201d \u2192 \"Media\" \u30bf\u30d6\u3092\u9078\u629e\u3059\u308b\u3068\u3001\u5148\u307b\u3069\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305fiso\u30d5\u30a1\u30a4\u30eb\u304c\u9078\u629e\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u306a\u306e\u3067\u3001\"Connect\" \u30dc\u30bf\u30f3\u3067\u53d6\u308a\u4ed8\u3051\u307e\u3059\u3002\n\n![20160522222341.png](https://qiita-image-store.s3.amazonaws.com/0/46188/1dc1180c-95de-598a-bbac-fda234b73af7.png)\n\n\u305d\u306e\u5f8c \"Power\" \u2192 \"Start\" \u3067\u30d1\u30ef\u30fc\u30aa\u30f3\n\n![20160522231850.png](https://qiita-image-store.s3.amazonaws.com/0/46188/ee363708-bc47-319f-638d-be8bb64e6867.png)\n\n\"Access\" \u2192 \"Console\" \u2192 \"Console\" \u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u30db\u30b9\u30c8\u306b\u63a5\u7d9a\u3055\u308c\u308b(\u306f\u305a)\u306e\u3067\u3001\u30dd\u30c1\u30dd\u30c1\u3068\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4f5c\u696d\u3092\u9032\u3081\u308c\u3070\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b8c\u4e86\u3067\u3059\u3002\n\n![20160522232207.png](https://qiita-image-store.s3.amazonaws.com/0/46188/55a8d41a-6081-af98-655d-71280a0b5c4c.png)\n\n## \u6240\u611f\n\n\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u304c\u7c21\u5358\u3067UI\u3082\u3042\u308b\u7a0b\u5ea6\u6574\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u6c17\u306b\u5165\u3063\u3066\u3044\u307e\u3059\u3002\n\u4f55\u3088\u308a\u3001\u4eca\u307e\u3067\u30b3\u30de\u30f3\u30c9\u7d4c\u7531\u3060\u3063\u305f\u3082\u306e\u304c\u3001Web\u304b\u3089\u64cd\u4f5c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u975e\u5e38\u306b\u697d\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n--\n\n\u3053\u306e\u6295\u7a3f\u306f\u3001\u4ee5\u524d\u306b\u30d6\u30ed\u30b0\u306b\u66f8\u3044\u305f\u3082\u306e\u3068\u540c\u69d8\u306e\u5185\u5bb9\u306b\u306a\u308a\u307e\u3059\u3002\nhttp://jimaoka.hatenablog.jp/entry/WebVirtMgr\n", "tags": ["centos7", "KVM", "Virtualization", "\u4eee\u60f3\u5316"]}