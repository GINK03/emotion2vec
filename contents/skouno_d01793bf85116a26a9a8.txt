{"tags": ["zabbix", "\u6697\u53f7\u5316"], "context": "Zabbix3.0\u306e\u65b0\u6a5f\u80fd\u3068\u3057\u3066\u6697\u53f7\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002PSK\u4ee5\u5916\u306b\u306f\u8a3c\u660e\u66f8\u306b\u3088\u308b\u6697\u53f7\u5316\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u5074\u306fCentOS\u3067\u3059\u3002\n\n\u8a2d\u5b9a\u3059\u308b\u524d\u306b\n\u6697\u53f7\u5316\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u524d\u306b\u3001Zabbix\u30b5\u30fc\u30d0\u306b\u5bfe\u8c61\u30db\u30b9\u30c8\u306e\u76e3\u8996\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u540c\u6642\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n\u5171\u6709\u9375\u306e\u751f\u6210\n\u4eca\u56de\u306fOpenSSL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n# openssl rand -hex 32 > /etc/zabbix/zabbix_agentd.psk\n\n\nZabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8a2d\u5b9a\u5909\u66f4\n\n/etc/zabbix/zabbix_agentd.conf\nTLSConnect=psk\nTLSAccept=psk\nTLSPSKIdentity=(\u4e00\u610f\u306a\u6587\u5b57\u5217)\nTLSPSKFile=/etc/zabbix/zabbix_agentd.psk\n\n\nTLSPSKIdentity\u306f\u4e00\u610f\u306a\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u81ea\u4f53\u306f\u6697\u53f7\u5316\u3055\u308c\u306a\u3044\u306e\u3067\u91cd\u8981\u306a\u60c5\u5831\u306f\u542b\u3081\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u8a2d\u5b9a\u3057\u305f\u3089zabbix-agent\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\nZabbix\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u5909\u66f4\n\u7ba1\u7406\u753b\u9762\u306e\u300c\u8a2d\u5b9a\u300d->\u300c\u30db\u30b9\u30c8\u300d\u304b\u3089\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u3092\u9078\u629e\u3057\u3001\u300e\u6697\u53f7\u5316\u300f\u30bf\u30d6\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n[\u30db\u30b9\u30c8\u3078\u306e\u63a5\u7d9a]\uff1aPSK\n\n[\u30db\u30b9\u30c8\u304b\u3089\u306e\u63a5\u7d9a]\uff1a\u6697\u53f7\u306a\u3057\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057PSK\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n[PSK\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3]\uff1aTLSPSKIdentity\u3067\u8a2d\u5b9a\u3057\u305f\u5024\n[PSK]\uff1aTLSPSKFile\u3067\u8a2d\u5b9a\u3057\u305f\u5024\n\n\n\u6b63\u5e38\u306b\u901a\u4fe1\u3067\u304d\u3066\u3044\u308c\u3070[\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u72b6\u614b]\u3068[\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u6697\u53f7\u5316]\u304c\u7dd1\u3067\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\n\u53c2\u8003\n\nZabbix-Agent\u3068\u306e\u901a\u4fe1\u3092\u6697\u53f7\u5316\u3057\u3066\u307f\u308b. (3.0\u306e\u6a5f\u80fd) - \u30d5\u30ed\u30c3\u30d4\u30fc\u30c7\u30a3\u30b9\u30af\u306e\u6b8b\u9ab8\n2 Using pre-shared keys [Zabbix Documentation 3.0]\n\nZabbix3.0\u306e\u65b0\u6a5f\u80fd\u3068\u3057\u3066\u6697\u53f7\u5316\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u3088\u3046\u3067\u3059\u3002PSK\u4ee5\u5916\u306b\u306f\u8a3c\u660e\u66f8\u306b\u3088\u308b\u6697\u53f7\u5316\u304c\u53ef\u80fd\u3067\u3059\u3002\n\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u5074\u306fCentOS\u3067\u3059\u3002\n\n# \u8a2d\u5b9a\u3059\u308b\u524d\u306b\n\u6697\u53f7\u5316\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u524d\u306b\u3001Zabbix\u30b5\u30fc\u30d0\u306b\u5bfe\u8c61\u30db\u30b9\u30c8\u306e\u76e3\u8996\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u540c\u6642\u306b\u8a2d\u5b9a\u3059\u308b\u3068\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n# \u5171\u6709\u9375\u306e\u751f\u6210\n\u4eca\u56de\u306fOpenSSL\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```\n# openssl rand -hex 32 > /etc/zabbix/zabbix_agentd.psk\n```\n\n# Zabbix\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u8a2d\u5b9a\u5909\u66f4\n\n```text:/etc/zabbix/zabbix_agentd.conf\nTLSConnect=psk\nTLSAccept=psk\nTLSPSKIdentity=(\u4e00\u610f\u306a\u6587\u5b57\u5217)\nTLSPSKFile=/etc/zabbix/zabbix_agentd.psk\n```\n\n`TLSPSKIdentity`\u306f\u4e00\u610f\u306a\u6587\u5b57\u5217\u3092\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u81ea\u4f53\u306f\u6697\u53f7\u5316\u3055\u308c\u306a\u3044\u306e\u3067\u91cd\u8981\u306a\u60c5\u5831\u306f\u542b\u3081\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u8a2d\u5b9a\u3057\u305f\u3089`zabbix-agent`\u3092\u518d\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n# Zabbix\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\u5909\u66f4\n\n\u7ba1\u7406\u753b\u9762\u306e\u300c\u8a2d\u5b9a\u300d->\u300c\u30db\u30b9\u30c8\u300d\u304b\u3089\u5bfe\u8c61\u306e\u30db\u30b9\u30c8\u3092\u9078\u629e\u3057\u3001\u300e\u6697\u53f7\u5316\u300f\u30bf\u30d6\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n- [\u30db\u30b9\u30c8\u3078\u306e\u63a5\u7d9a]\uff1a`PSK`\n- [\u30db\u30b9\u30c8\u304b\u3089\u306e\u63a5\u7d9a]\uff1a`\u6697\u53f7\u306a\u3057`\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057`PSK`\u3092\u30c1\u30a7\u30c3\u30af\u3059\u308b\n- [PSK\u30a2\u30a4\u30c7\u30f3\u30c6\u30a3\u30c6\u30a3]\uff1a`TLSPSKIdentity`\u3067\u8a2d\u5b9a\u3057\u305f\u5024\n- [PSK]\uff1a`TLSPSKFile`\u3067\u8a2d\u5b9a\u3057\u305f\u5024\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-04-05 14.54.22.png](https://qiita-image-store.s3.amazonaws.com/0/48446/581aa8c7-22e5-cfbd-3f20-821f7932b498.png)\n\n\u6b63\u5e38\u306b\u901a\u4fe1\u3067\u304d\u3066\u3044\u308c\u3070[\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u306e\u72b6\u614b]\u3068[\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u6697\u53f7\u5316]\u304c\u7dd1\u3067\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-04-05 14.55.00.png](https://qiita-image-store.s3.amazonaws.com/0/48446/2077ec35-1a3f-807c-71f9-78981c4198c8.png)\n\n# \u53c2\u8003\n- [Zabbix-Agent\u3068\u306e\u901a\u4fe1\u3092\u6697\u53f7\u5316\u3057\u3066\u307f\u308b. (3.0\u306e\u6a5f\u80fd) - \u30d5\u30ed\u30c3\u30d4\u30fc\u30c7\u30a3\u30b9\u30af\u306e\u6b8b\u9ab8](http://328.hateblo.jp/entry/2016/02/27/194430)\n- [2 Using pre-shared keys [Zabbix Documentation 3.0]](https://www.zabbix.com/documentation/3.0/manual/encryption/using_pre_shared_keys)\n"}