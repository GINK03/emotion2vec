{"context": " More than 1 year has passed since last update.\n\n\u30e6\u30fc\u30b6\u5225\u306e\u8a2d\u5b9a\n\nMakefile\nTARGET_FILES = *.cron\nCRON_FILE = crontab\n\nall: file\n\n.PHONY: file\nfile: ${TARGET_FILES}\n    echo \"PATH=/usr/local/bin:/usr/bin:/bin\" > ${CRON_FILE}\n    echo \"CONTENT_TYPE=text/plain; charset=UTF-8\" >> ${CRON_FILE}\n    echo \"\" >> ${CRON_FILE}\n    cat ${TARGET_FILES} >> ${CRON_FILE}\n    echo \"\" >> ${CRON_FILE}\n    crontab ${CRON_FILE}\n\n\nhttps://gist.github.com/aki77/5683114/raw/be282e868cc00a7b21c69db1a4c0195cd452a501/Makefile\n\n01_config.cron\n####################\n# config\n####################\n\nHOGE_DIR=/home/vagrant/project/hoge\nHOGE_ENV=dev\n\nFUGA_DIR=/home/vagrant/project/fuga\nFUGA_ENV=dev\n\n\n\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5225\u306ecron\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\ngit \u306b\u3088\u308a\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\u3067\u3059\u3002\n\nhoge.cron\n####################\n# hoge\n####################\n\n31 * * * *  [ \"$HOGE_ENV\" = \"prod\" ] && php $HOGE_DIR/symfony hoge:task1 --env=\"$HOGE_ENV\"\n10 4 * * *  php $HOGE_DIR/symfony hoge:task2 --env=\"$HOGE_ENV\"\n\n\n\n\nfuga.cron\n####################\n# fuga\n####################\n\n22 10,22 * * *  [ \"$FUGA_ENV\" = \"prod\" ] && php $FUGA_DIR/symfony hoge:task1 --env=\"$FUGA_ENV\"\n10,50 * * * *  php $FUGA_DIR/symfony hoge:task2 --env=\"$FUGA_ENV\"\n\n\n\n\n\u4f7f\u3044\u65b9\n$ pwd\n/home/vagrant/.crontab.d\n$ ls -l      \n\u5408\u8a08 12\n-rw-rw-r-- 1 vagrant vagrant 152  5\u6708 22 22:50 2013 01_config.cron\nlrwxrwxrwx 1 vagrant vagrant  43  5\u6708 22 22:58 2013 10_hoge.cron -> /home/vagrant/project/hoge/config/hoge.cron\nlrwxrwxrwx 1 vagrant vagrant  43  5\u6708 22 22:59 2013 20_fuga.cron -> /home/vagrant/project/fuga/config/fuga.cron\n-rw-r--r-- 1 vagrant vagrant 318  5\u6708 22 23:02 2013 Makefile\n$ make\necho \"PATH=/usr/local/bin:/usr/bin:/bin\" > crontab\necho \"CONTENT_TYPE=text/plain; charset=UTF-8\" >> crontab\necho \"\" >> crontab\ncat *.cron >> crontab\necho \"\" >> crontab\ncrontab crontab\n$ crontab -l\nPATH=/usr/local/bin:/usr/bin:/bin\nCONTENT_TYPE=text/plain; charset=UTF-8\n\n####################\n# config\n####################\n\nHOGE_DIR=/home/vagrant/project/hoge\nHOGE_ENV=dev\n\nFUGA_DIR=/home/vagrant/project/fuga\nFUGA_ENV=dev\n\n####################\n# hoge\n####################\n\n31 * * * *  [ \"$HOGE_ENV\" = \"prod\" ] && php $HOGE_DIR/symfony hoge:task1 --env=\"$HOGE_ENV\"\n10 4 * * *  php $HOGE_DIR/symfony hoge:task2 --env=\"$HOGE_ENV\"\n\n####################\n# fuga\n####################\n\n22 10,22 * * *  [ \"$FUGA_ENV\" = \"prod\" ] && php $FUGA_DIR/symfony hoge:task1 --env=\"$FUGA_ENV\"\n10,50 * * * *  php $FUGA_DIR/symfony hoge:task2 --env=\"$FUGA_ENV\"\n\n\n## \u30e6\u30fc\u30b6\u5225\u306e\u8a2d\u5b9a\n\n```:Makefile\nTARGET_FILES = *.cron\nCRON_FILE = crontab\n\nall: file\n\n.PHONY: file\nfile: ${TARGET_FILES}\n\techo \"PATH=/usr/local/bin:/usr/bin:/bin\" > ${CRON_FILE}\n\techo \"CONTENT_TYPE=text/plain; charset=UTF-8\" >> ${CRON_FILE}\n\techo \"\" >> ${CRON_FILE}\n\tcat ${TARGET_FILES} >> ${CRON_FILE}\n\techo \"\" >> ${CRON_FILE}\n\tcrontab ${CRON_FILE}\n```\n\nhttps://gist.github.com/aki77/5683114/raw/be282e868cc00a7b21c69db1a4c0195cd452a501/Makefile\n\n\n```:01_config.cron\n####################\n# config\n####################\n\nHOGE_DIR=/home/vagrant/project/hoge\nHOGE_ENV=dev\n\nFUGA_DIR=/home/vagrant/project/fuga\nFUGA_ENV=dev\n\n```\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5225\u306ecron\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\n\ngit \u306b\u3088\u308a\u30d0\u30fc\u30b8\u30e7\u30f3\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\u3067\u3059\u3002\n\n```:hoge.cron\n####################\n# hoge\n####################\n\n31 * * * *  [ \"$HOGE_ENV\" = \"prod\" ] && php $HOGE_DIR/symfony hoge:task1 --env=\"$HOGE_ENV\"\n10 4 * * *  php $HOGE_DIR/symfony hoge:task2 --env=\"$HOGE_ENV\"\n\n```\n\n```:fuga.cron\n####################\n# fuga\n####################\n\n22 10,22 * * *  [ \"$FUGA_ENV\" = \"prod\" ] && php $FUGA_DIR/symfony hoge:task1 --env=\"$FUGA_ENV\"\n10,50 * * * *  php $FUGA_DIR/symfony hoge:task2 --env=\"$FUGA_ENV\"\n\n```\n\n## \u4f7f\u3044\u65b9\n\n```\n$ pwd\n/home/vagrant/.crontab.d\n$ ls -l      \n\u5408\u8a08 12\n-rw-rw-r-- 1 vagrant vagrant 152  5\u6708 22 22:50 2013 01_config.cron\nlrwxrwxrwx 1 vagrant vagrant  43  5\u6708 22 22:58 2013 10_hoge.cron -> /home/vagrant/project/hoge/config/hoge.cron\nlrwxrwxrwx 1 vagrant vagrant  43  5\u6708 22 22:59 2013 20_fuga.cron -> /home/vagrant/project/fuga/config/fuga.cron\n-rw-r--r-- 1 vagrant vagrant 318  5\u6708 22 23:02 2013 Makefile\n$ make\necho \"PATH=/usr/local/bin:/usr/bin:/bin\" > crontab\necho \"CONTENT_TYPE=text/plain; charset=UTF-8\" >> crontab\necho \"\" >> crontab\ncat *.cron >> crontab\necho \"\" >> crontab\ncrontab crontab\n$ crontab -l\nPATH=/usr/local/bin:/usr/bin:/bin\nCONTENT_TYPE=text/plain; charset=UTF-8\n\n####################\n# config\n####################\n\nHOGE_DIR=/home/vagrant/project/hoge\nHOGE_ENV=dev\n\nFUGA_DIR=/home/vagrant/project/fuga\nFUGA_ENV=dev\n\n####################\n# hoge\n####################\n\n31 * * * *  [ \"$HOGE_ENV\" = \"prod\" ] && php $HOGE_DIR/symfony hoge:task1 --env=\"$HOGE_ENV\"\n10 4 * * *  php $HOGE_DIR/symfony hoge:task2 --env=\"$HOGE_ENV\"\n\n####################\n# fuga\n####################\n\n22 10,22 * * *  [ \"$FUGA_ENV\" = \"prod\" ] && php $FUGA_DIR/symfony hoge:task1 --env=\"$FUGA_ENV\"\n10,50 * * * *  php $FUGA_DIR/symfony hoge:task2 --env=\"$FUGA_ENV\"\n```", "tags": ["Linux", "cron", "Git"]}