{"context": " More than 1 year has passed since last update.\n\nNokogiri\u306b\u306f\u30ce\u30fc\u30c9\u306e\u6df1\u3055\u3092\u77e5\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u306a\u3044\n\u9700\u8981\u304c\u306a\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001DOM\u30c4\u30ea\u30fc\u4e0a\u3067\u306e\u3042\u308b\u30ce\u30fc\u30c9\u306e\u6839\u30ce\u30fc\u30c9(HTML\u306a\u3089<html>\u3042\u308b\u3044\u306f<body>\u8981\u7d20)\u304b\u3089\u306e\u6df1\u3055\u3092\u8abf\u3079\u305f\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\nNokogiri\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u63a2\u3057\u307e\u3057\u305f\u304c\u3001\u3088\u3057\u306a\u306b\u3084\u3063\u3066\u304f\u308c\u305d\u3046\u306a\u95a2\u6570\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u5f93\u3063\u3066\u72ec\u81ea\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n# HTML\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u8fbc\u3080\nhtml = <<EOS\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Document</title>\n</head>\n<body>\n  <p></p>\n  <p>\n    <div>\n      <span id=\"hello\">hello</span>\n    </div>\n  </p>\n  <p></p>\n</body>\n</html>\nEOS\n\n# id=\"hello\"\u306e\u30ce\u30fc\u30c9\u306e\u6df1\u3055\u3092\u77e5\u308b\u5834\u5408\nnode = Nokogiri::HTML(html).css(\"#hello\")[0]\nparent = node.parent\ndepth = 1\n\nwhile parent && parent.name != \"body\" # body\u3092\u6839\u30ce\u30fc\u30c9\u306b\u3059\u308b\n  parent = parent.parent\n  depth += 1\nend\nputs depth\n\n\u8981\u9818\u3068\u3057\u3066\u306f\u3001\u3072\u305f\u3059\u3089\u89aa\u3092\u305f\u3069\u3063\u3066\u3044\u304d\u3001\u89aa\u304c\u7279\u5b9a\u306e\u30ce\u30fc\u30c9\u306b\u30de\u30c3\u30c1\u3057\u305f\u3089\u7d42\u4e86\u3055\u305b\u307e\u3059\u3002\n\u5358\u7d14\u3059\u304e\u308b\u89e3\u6c7a\u65b9\u6cd5\u3067\u3059\u304c\u81ea\u5206\u7528\u306b\u30e1\u30e2\u3002\nNokogiri\u306b\u306f\u30ce\u30fc\u30c9\u306e\u6df1\u3055\u3092\u77e5\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u306a\u3044\n------\n\n\u9700\u8981\u304c\u306a\u3044\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u3001DOM\u30c4\u30ea\u30fc\u4e0a\u3067\u306e\u3042\u308b\u30ce\u30fc\u30c9\u306e\u6839\u30ce\u30fc\u30c9(HTML\u306a\u3089`<html>`\u3042\u308b\u3044\u306f`<body>`\u8981\u7d20)\u304b\u3089\u306e\u6df1\u3055\u3092\u8abf\u3079\u305f\u3044\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n[Nokogiri\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8](http://www.rubydoc.info/github/sparklemotion/nokogiri)\u3092\u63a2\u3057\u307e\u3057\u305f\u304c\u3001\u3088\u3057\u306a\u306b\u3084\u3063\u3066\u304f\u308c\u305d\u3046\u306a\u95a2\u6570\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u5f93\u3063\u3066\u72ec\u81ea\u306b\u30e1\u30bd\u30c3\u30c9\u3092\u4f5c\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n```ruby\n# HTML\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u307f\u8fbc\u3080\nhtml = <<EOS\n<!DOCTYPE html>\n<html lang=\"ja\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Document</title>\n</head>\n<body>\n  <p></p>\n  <p>\n    <div>\n      <span id=\"hello\">hello</span>\n    </div>\n  </p>\n  <p></p>\n</body>\n</html>\nEOS\n\n# id=\"hello\"\u306e\u30ce\u30fc\u30c9\u306e\u6df1\u3055\u3092\u77e5\u308b\u5834\u5408\nnode = Nokogiri::HTML(html).css(\"#hello\")[0]\nparent = node.parent\ndepth = 1\n\nwhile parent && parent.name != \"body\" # body\u3092\u6839\u30ce\u30fc\u30c9\u306b\u3059\u308b\n  parent = parent.parent\n  depth += 1\nend\nputs depth\n```\n\n\u8981\u9818\u3068\u3057\u3066\u306f\u3001\u3072\u305f\u3059\u3089\u89aa\u3092\u305f\u3069\u3063\u3066\u3044\u304d\u3001\u89aa\u304c\u7279\u5b9a\u306e\u30ce\u30fc\u30c9\u306b\u30de\u30c3\u30c1\u3057\u305f\u3089\u7d42\u4e86\u3055\u305b\u307e\u3059\u3002\n\n\u5358\u7d14\u3059\u304e\u308b\u89e3\u6c7a\u65b9\u6cd5\u3067\u3059\u304c\u81ea\u5206\u7528\u306b\u30e1\u30e2\u3002\n", "tags": ["Ruby", "Nokogiri", "dom"]}