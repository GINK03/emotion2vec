{"context": "\n\u691c\u7d22\n\u30c7\u30fc\u30bf\u306e\u4e00\u90e8\u66f8\u304d\u63db\u3048\n\n\u306e\uff12\u3064\u3060\u3051\u3001\u521d\u3081\u3066SQL\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u3042\u3068\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3082\u767a\u751f\u3057\u305f\u3068\u304d\u306e\u89e3\u6c7a\u6cd5\u3082\u3002\n\n\u30c7\u30fc\u30bf\u3092\u691c\u7d22\uff08\u62bd\u51fa\uff09\n\u300cuser_table \u304b\u3089 new_flg \u304c1\u306e\u3082\u306e\u3092\u691c\u7d22\u3057\u305f\u3044\u300d\nSELECT * FROM user_table WHERE new_flg = 1\n\n\u300c*\u300d \u306f\u300c\u5168\u4ef6\u300d\u3092\u8868\u3059\u3002\n\n\u691c\u7d22\u7d50\u679c\u306e\u4e00\u90e8\u3092\u7f6e\u63db\u3059\u308b\n\u300cuser_table \u306e gender \u3092 'man' \u304b\u3089 'woman' \u306b\u3057\u305f\u5834\u5408\u306e \u7d50\u679c\u3092\u8868\u793a\u3057\u305f\u3044 \u300d\nSELECT REPLACE(gender, 'man', 'woman') FROM user_table;\n\nSELECT FROM \u9593\u306e\u8868\u8a18\u306f\u3001\u300c\u691c\u7d22\u7d50\u679c\u3068\u3057\u3066\u4f55\u3092\u8868\u793a\u3059\u308b\u304b\u300d\u306e\u6307\u5b9a\u3089\u3057\u304f\u3001DB\u304c\u66f8\u304d\u63db\u3048\u3089\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\uff01\n\n\u30c7\u30fc\u30bf\u3092\u66f4\u65b0\n\u300cuser_table \u306e gender \u3092 'man' \u304b\u3089 'woman' \u306b\u66f8\u304d\u63db\u3048\u305f\u3044\u300d\nUPDATE user_table SET gender=REPLACE(gender, 'man', 'woman');\n\nWHERE \u3082\u8ffd\u52a0\u53ef\u80fd\u3002\nUPDATE user_table SET gender=REPLACE(gender, 'man', 'woman') WHERE new_flg = 1;\n\n\n\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d6\u30ed\u30c3\u30af\u5185\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\n[2016-12-22 15:49:29] [25P02] ERROR: current transaction is aborted, commands ignored until end of transaction block\n\n\n\u89e3\u6c7a\u7b56\n\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3057\u305f\u3002\nROLLBACK\n\n\n- \u691c\u7d22\n- \u30c7\u30fc\u30bf\u306e\u4e00\u90e8\u66f8\u304d\u63db\u3048\n\n\u306e\uff12\u3064\u3060\u3051\u3001\u521d\u3081\u3066SQL\u3092\u66f8\u304d\u307e\u3057\u305f\u3002\n\u3042\u3068\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30a8\u30e9\u30fc\u3082\u767a\u751f\u3057\u305f\u3068\u304d\u306e\u89e3\u6c7a\u6cd5\u3082\u3002\n\n# \u30c7\u30fc\u30bf\u3092\u691c\u7d22\uff08\u62bd\u51fa\uff09\n\n\u300cuser_table \u304b\u3089 new_flg \u304c1\u306e\u3082\u306e\u3092\u691c\u7d22\u3057\u305f\u3044\u300d\n\n```\nSELECT * FROM user_table WHERE new_flg = 1\n```\n\n\u300c*\u300d \u306f\u300c\u5168\u4ef6\u300d\u3092\u8868\u3059\u3002\n\n##\u691c\u7d22\u7d50\u679c\u306e\u4e00\u90e8\u3092\u7f6e\u63db\u3059\u308b\n\n\u300cuser_table \u306e gender \u3092 'man' \u304b\u3089 'woman' \u306b\u3057\u305f\u5834\u5408\u306e **\u7d50\u679c\u3092\u8868\u793a\u3057\u305f\u3044** \u300d\n\n```\nSELECT REPLACE(gender, 'man', 'woman') FROM user_table;\n```\n\n`SELECT` `FROM` \u9593\u306e\u8868\u8a18\u306f\u3001\u300c\u691c\u7d22\u7d50\u679c\u3068\u3057\u3066\u4f55\u3092\u8868\u793a\u3059\u308b\u304b\u300d\u306e\u6307\u5b9a\u3089\u3057\u304f\u3001DB\u304c\u66f8\u304d\u63db\u3048\u3089\u308c\u308b\u308f\u3051\u3067\u306f\u306a\u3044\uff01\n\n# \u30c7\u30fc\u30bf\u3092\u66f4\u65b0\n\n\u300cuser_table \u306e gender \u3092 'man' \u304b\u3089 'woman' \u306b\u66f8\u304d\u63db\u3048\u305f\u3044\u300d\n\n```\nUPDATE user_table SET gender=REPLACE(gender, 'man', 'woman');\n```\n\n`WHERE` \u3082\u8ffd\u52a0\u53ef\u80fd\u3002\n\n```\nUPDATE user_table SET gender=REPLACE(gender, 'man', 'woman') WHERE new_flg = 1;\n```\n\n# \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30d6\u30ed\u30c3\u30af\u5185\u3067\u30a8\u30e9\u30fc\u304c\u767a\u751f\n\n```\n[2016-12-22 15:49:29] [25P02] ERROR: current transaction is aborted, commands ignored until end of transaction block\n```\n\n##\u89e3\u6c7a\u7b56\n\n\u30ed\u30fc\u30eb\u30d0\u30c3\u30af\u3057\u305f\u3002\n\n```\nROLLBACK\n```\n", "tags": ["postgres", "SQL", "DB"]}