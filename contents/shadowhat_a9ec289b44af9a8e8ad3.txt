{"context": "\n\n\u306f\u3058\u3081\u306b\nPHP\u306f\u3001\u69d8\u3005\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308a\u5927\u5909\u4fbf\u5229\u3067\u3059\u304c\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u306f\u305d\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u542b\u3081\u3066\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nPHP7\u3068\u3088\u304f\u4f7f\u3046\u3067\u3042\u308d\u3046GD\u5468\u308a\u3092\u542b\u3081\u305f\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u4e00\u5f0f\u306e\u4f5c\u696d\u30e1\u30e2\u3067\u3059\u3002\n\u51e6\u7406\u90e8\u5206\u3092\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30b3\u30d4\u30da\u3059\u308c\u3070\u307b\u307c\u7121\u64cd\u4f5c\u3067\u3001PHP7\u304c\u7a3c\u50cd\u3059\u308b\u74b0\u5883\u304c\u4f5c\u308c\u307e\u3059\u3002\n\n\u3042\u3089\u304b\u3058\u3081Apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\nApache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u95a2\u3057\u3066\u306f\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u3066\u3042\u3089\u304b\u3058\u3081\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\nApache2.4\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u30bd\u30fc\u30b9\u304b\u3089\u30b3\u30f3\u30d1\u30a4\u30eb) for CentOS7.2\n\n\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e8b\u524d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u9069\u5b9c\u5909\u66f4\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u69cb\u3044\u307e\u305b\u3093\u304c\u3001\u6295\u7a3f\u3067\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u30ea\u30f3\u30af\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nOpenSSL1.0\nlibssh2\nzlib\n\n\u4eca\u56de\u63a1\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u7fa4\n\n\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u540d\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\n\nJPEG\nv9b\n\n\nFreeType\n2.7.1\n\n\nlibPNG\n1.6.28\n\n\nzlib\n1.2.11\n\n\nm4\n1.4.18\n\n\nautoconf\n2.69\n\n\nlibiconv\n1.15\n\n\nxml\n2.9.4\n\n\nlibGD\n2.2.4\n\n\nlibmcrypt\n2.5.8\n\n\nimap(c-client)\n2007f\n\n\ncurl\ncurl-7.52.1\n\n\nlibtiff\n4.0.7\n\n\n\n\u203b\u5fc5\u8981\u306b\u5fdc\u3058\u3066MySQL\u3084PostgreSQL\u3082\u8ffd\u52a0\u53ef\u80fd\u3067\u3059\n\n\u5b9f\u8df5\u74b0\u5883\n\n\n\n\u74b0\u5883\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\n\n\nPHP\n7.1.2\n\n\nOS\nCentOS 7.2(7.3\u3082\u78ba\u8a8d\u6e08\u307f)\n\n\n\n\nOS\u6a19\u6e96\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nxorg-x11-proto-devel-7.7-12.el7.noarch.rpm\nlibXpm-devel-3.5.11-2.el7.x86_64.rpm\nlibX11-devel-1.6.3-2.el7.x86_64.rpm\n\n\u95a2\u4fc2\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n#\u30d0\u30a4\u30ca\u30ea\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nmkdir -p /usr/local/src/phpmodule\ncd /usr/local/src/phpmodule\n#JPEG\ncd /usr/local/src/phpmodule\nwget http://www.ijg.org/files/jpegsrc.v9b.tar.gz\ntar xvzf jpegsrc.v9b.tar.gz\n\n#FreeType\nwget http://download.savannah.gnu.org/releases/freetype/freetype-2.7.1.tar.gz\ntar xvzf freetype-2.7.1.tar.gz\n\n#libPNG\nwget --trust-server-names https://downloads.sourceforge.net/project/libpng/libpng16/1.6.28/libpng-1.6.28.tar.gz?r=http%3A%2F%2Fwww.libpng.org%2Fpub%2Fpng%2Flibpng.html&ts=1487394896&use_mirror=jaist\ntar xvzf libpng-1.6.28.tar.gz\n\n\n#zlib\nwget http://zlib.net/zlib-1.2.11.tar.gz\ntar xvzf zlib-1.2.11.tar.gz\n\n#m4\nwget http://ftp.gnu.org/gnu/m4/m4-1.4.18.tar.gz\ntar xvzf m4-1.4.18.tar.gz\n\n#autoconf\nwget http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz\ntar xvzf autoconf-2.69.tar.gz\n\n#libiconv\nwget https://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.15.tar.gz\n\n#xml\nwget http://xmlsoft.org/sources/libxml2-2.9.4.tar.gz\ntar xvzf libxml2-2.9.4.tar.gz\n\n#libGD\nwget https://github.com/libgd/libgd/releases/download/gd-2.2.4/libgd-2.2.4.tar.gz\ntar xvzf libgd-2.2.4.tar.gz\n\n#libmcrypt\nwget --trust-server-names http://downloads.sourceforge.net/project/mcrypt/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.gz?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fmcrypt%2Ffiles%2FLibmcrypt%2F2.5.8%2F&ts=1474546665&use_mirror=jaist\ntar xvzf libmcrypt-2.5.8.tar.gz\n\n#imap\nwget ftp://ftp.cac.washington.edu/imap/imap-2007f.tar.gz\ntar xvzf imap-2007f.tar.gz\n\n#curl\nwget https://curl.haxx.se/download/curl-7.52.1.tar.gz\ntar xvzf curl-7.52.1.tar.gz\n\n\n#libtiff\nwget http://download.osgeo.org/libtiff/tiff-4.0.7.tar.gz\ntar xvzf tiff-4.0.7.tar.gz\n\n\n\n\u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\n#JPEG\ncd /usr/local/src/phpmodule\ncd jpeg-9b\n./configure --enable-shared\nmake\nmake install\n\n#libtiff\ncd /usr/local/src/phpmodule\ncd tiff-4.0.7\n./configure\nmake\nmake install\n\n#FreeType\ncd /usr/local/src/phpmodule\ncd freetype-2.7.1\n./configure --enable-static\nmake\nmake install\n\n#php\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3059\u308b\nln -s /usr/local/include/freetype2 /usr/local/include/freetype\n\n\n#libPNG\ncd /usr/local/src/phpmodule\ncd libpng-1.6.28\ncp scripts/makefile.linux Makefile\nmake\nmake install\n\n\n#zlib\ncd /usr/local/src/phpmodule\ncd zlib-1.2.8\n./configure\nmake\nmake install\n\n\n#m4\ncd /usr/local/src/phpmodule\ncd m4-1.4.18\n./configure\nmake\nmake install\n\n\n#autoconf\ncd /usr/local/src/phpmodule\ncd autoconf-2.69\n./configure\nmake\nmake install\n\n\n#libiconv\ncd /usr/local/src/phpmodule\ncd libiconv-1.15\n./configure\nmake\nmake install\n\n\n\nlibiconv\u3067\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\nIn file included from progname.c:26:0:\n./stdio.h:1010:1: error: 'gets' undeclared here (not in a function)\n _GL_WARN_ON_USE (gets, \"gets is a security hole - use fgets instead\");\n\n\u305d\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\nvi srclib/stdio.h\n\n\u300c_GL_WARN_ON_USE (gets, \"gets is a security hole - use fgets instead\");\u300d\n\u306e\u7b87\u6240\u3092\u78ba\u8a8d\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\n#if defined(__GLIBC__) && !defined(__UCLIBC__) && !__GLIBC_PREREQ(2, 16)\n_GL_WARN_ON_USE (gets, \"gets is a security hole - use fgets instead\");\n#endif\n\n\u7d9a\u304d\n#libxml\ncd /usr/local/src/phpmodule\ncd libxml2-2.9.4\n./configure --with-python=no\nmake\nmake install\n\n\n#libGD\ncd /usr/local/src/phpmodule\ncd libgd-2.2.4\n#cp scripts/makefile.linux Makefile\n./configure \\\n--with-png=/usr/local \\\n--with-freetype=/usr/local \\\n--with-jpeg=/usr/local \\\n--with-xpm=/usr \\\n--with-libiconv-prefix=/usr/local \\\n--disable-werror\nmake\nmake install\n\n\n#mcrypt\ncd /usr/local/src/phpmodule\ncd libmcrypt-2.5.8\n./configure\nmake\nmake install\ncd libltdl\n./configure --enable-ltdl-install\nmake\nmake install\n\n\n#imap\ncd /usr/local/src/phpmodule\ncd imap-2007f\n#REM 32Bit \u3060\u3068 make slx\n#REM 64Bit \u2193\nmake slx CC=\"gcc ${BUILD64}\" EXTRACFLAGS=\"-fPIC\" SSLTYPE=unix SHLIBBASE=c-client SHLIBNAME=libc-client.so.1 IP=6 SSLDIR=/usr/local/ssl SSLLIB=/usr/local/ssl/lib\ny\ny\ncd c-client\ncp -p rfc822.h mail.h linkage.h /usr/include/\ncp -p c-client.a /usr/local/lib/\n\n#curl\ncd /usr/local/src/phpmodule\ncd curl-7.52.1\n\n#OpenSSL\u306e\u5834\u6240\u3092\u660e\u793a\nCPPFLAGS=\"-I/usr/local/ssl/include\" LDFLAGS=\"-L/usr/local/ssl/lib\"\n\n./configure \\\n--enable-http \\\n--enable-ftp \\\n--enable-file \\\n--enable-proxy \\\n--enable-cookies \\\n--with-zlib=/usr/local \\\n--with-ssl=/usr/local/ssl \\\n--with-libssh2=/usr/local\n\nmake\nmake install\n\n\nPHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\ncd /usr/local/src\nwget --trust-server-names http://jp2.php.net/get/php-7.1.2.tar.gz/from/this/mirror\ntar xvzf php-7.1.2.tar.gz\ncd php-7.1.2\n\n\n./configure \\\n--enable-mbstring \\\n--enable-mbregex \\\n--with-apxs2=/usr/local/apache2/bin/apxs \\\n--with-gd=/usr/local \\\n--with-freetype-dir=/usr/local/src/phpmodule/freetype-2.7 \\\n--with-jpeg-dir=/usr/local/lib \\\n--with-png-dir=/usr/local \\\n--with-tiff-dir=/usr/local \\\n--with-zlib-dir=/usr \\\n--with-iconv-dir=/usr/local \\\n--with-libxml-dir=/usr/local \\\n--enable-gd-native-ttf \\\n--enable-gd-jis-conv \\\n--enable-zip \\\n--with-curl=/usr/local \\\n--with-mcrypt=/usr/local \\\n--enable-bcmath \\\n--enable-sockets \\\n--enable-ftp \\\n--enable-opcache=no \\\n--with-openssl=/usr/local/ssl \\\n--with-xpm-dir=/usr \u00a5\n--with-gettext \\\n--with-imap=/usr/local/src/phpmodule/imap-2007f \\\n--with-imap-ssl=/usr/local/ssl\n#\n#PGSQL\u3092\u5165\u308c\u308b\u5834\u5408\n#--with-pgsql=/usr/local/pgsql \\\n#--with-pdo-pgsql=/usr/local/pgsql\n#\n#MySQL(MAriaDB)\u3092\u5165\u308c\u308b\u5834\u5408\n#--with-mysqli=/usr/local/mysql/bin/mysql_config \\\n#--with-pdo-mysql=/usr/local/mysql \\\n#--with-mysql-sock=/tmp/mysql.sock\n\nmake\nmake install\n\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\nIn file included from /usr/local/src/php-7.1.0/ext/gd/gd_compat.c:13:0:\n/usr/local/include/jpeglib.h:974:30: error: unknown type name 'FILE'\n EXTERN(void) jpeg_stdio_dest JPP((j_compress_ptr cinfo, FILE * outfile));\n                              ^\n/usr/local/include/jpeglib.h:975:29: error: unknown type name 'FILE'\n EXTERN(void) jpeg_stdio_src JPP((j_decompress_ptr cinfo, FILE * infile));\n\n\u3053\u306e\u5834\u5408\u3001jpeglib.h\u3092\u7de8\u96c6\u3057\u3001\u300c#include \"jmorecfg.h\" \u300d\u306e\u4e0b\u306b\u3001\u300c#include <stdio.h>\u300d\u3092\u8ffd\u52a0\u3059\u308b\nvi /usr/local/include/jpeglib.h\n\n\u4ee5\u4e0b\u306e\u3092\u8ffd\u52a0\n#include \"jmorecfg.h\"           /* seldom changed options */\n#include <stdio.h>\n//\u2191\u3053\u308c\u3092\u8ffd\u52a0\u3059\u308b\n\n\nDB\u306b\u5bfe\u5fdc\u3059\u308b\u5834\u5408\nPostgreSQL\u306b\u5bfe\u5fdc\u3059\u308b\u5834\u5408\n--with-pgsql=/usr/local/pgsql \\\n--with-pdo-pgsql=/usr/local/pgsql\n\nMySQL\u5bfe\u5fdc\u3059\u308b\u5834\u5408\n--with-mysqli=/usr/local/mysql/bin/mysql_config \\\n--with-pdo-mysql=/usr/local/mysql \\\n--with-mysql-sock=/tmp/mysql.sock\n\n\n\u8a2d\u5b9a\u3092\u884c\u3046\ncp php.ini-production /usr/local/lib/php.ini\n\nhttpd.conf\u306bphp\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\nvi /usr/local/apache2/conf/httpd.conf\n\nLoadModule php7_module        modules/libphp7.so\n\u306e\u4e0b\u306b\u300cAddType application/x-httpd-php .php\u300d\u3092\u8a18\u5165\u3059\u308b\n\nhttpd.copf\nLoadModule php7_module        modules/libphp7.so\n#\u2193\u8ffd\u52a0\u3059\u308b\nAddType application/x-httpd-php .php\n\n\n\u3092\u8ffd\u8a18\u3057\u3066\u4fdd\u5b58\u7d42\u4e86\u3057\u307e\u3059\u3002\n\nphpinfo\u3092\u51fa\u3059\nvi /usr/local/apache2/htdocs/phpinfo.php\n\n\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u5f35\u308a\u4ed8\u3051\u3066\u4fdd\u5b58\u7d42\u4e86\n\nphpinfo\n<?php\n  date_default_timezone_set(\"Asia/Tokyo\");\n  phpinfo();\n?>\n\n\nApache\u3092\u518d\u8d77\u52d5\u5f8c\u3001phpinfo.php\u3092\u958b\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u51fa\u308c\u3070OK\n\n\n\u53c2\u8003\u6587\u732e\nhttp://www.itkb.ro/kb/linux/patch-libiconv-pentru-glibc-216\nhttps://travis-ci.org/libgd/libgd/jobs/151123674/config\nhttps://github.com/libgd/libgd/issues/292\n##\u306f\u3058\u3081\u306b\nPHP\u306f\u3001\u69d8\u3005\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308a\u5927\u5909\u4fbf\u5229\u3067\u3059\u304c\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u306f\u305d\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u542b\u3081\u3066\u30d3\u30eb\u30c9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nPHP7\u3068\u3088\u304f\u4f7f\u3046\u3067\u3042\u308d\u3046GD\u5468\u308a\u3092\u542b\u3081\u305f\u30b3\u30f3\u30d1\u30a4\u30eb\u306e\u4e00\u5f0f\u306e\u4f5c\u696d\u30e1\u30e2\u3067\u3059\u3002\n\u51e6\u7406\u90e8\u5206\u3092\u307e\u3068\u3081\u3066\u3044\u307e\u3059\u306e\u3067\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30b3\u30d4\u30da\u3059\u308c\u3070\u307b\u307c\u7121\u64cd\u4f5c\u3067\u3001PHP7\u304c\u7a3c\u50cd\u3059\u308b\u74b0\u5883\u304c\u4f5c\u308c\u307e\u3059\u3002\n\n##\u3042\u3089\u304b\u3058\u3081Apache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\nApache\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u95a2\u3057\u3066\u306f\u4ee5\u4e0b\u3092\u53c2\u8003\u306b\u3057\u3066\u3042\u3089\u304b\u3058\u3081\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\n[Apache2.4\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u30bd\u30fc\u30b9\u304b\u3089\u30b3\u30f3\u30d1\u30a4\u30eb) for CentOS7.2](http://qiita.com/shadowhat/items/163ee5fdd56c51100e9e)\n\n##\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4e8b\u524d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u9069\u5b9c\u5909\u66f4\u3057\u3066\u3044\u305f\u3060\u3051\u308c\u3070\u69cb\u3044\u307e\u305b\u3093\u304c\u3001\u6295\u7a3f\u3067\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u4e8b\u524d\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u524d\u63d0\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u30ea\u30f3\u30af\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n[OpenSSL1.0](http://qiita.com/shadowhat/items/68fd55b532c04b13acf5)\n[libssh2](http://qiita.com/shadowhat/items/7122eec16161956dc484)\n[zlib](http://qiita.com/shadowhat/items/867d9e06bc42cf862b9a)\n\n\n##\u4eca\u56de\u63a1\u7528\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u7fa4\n| \u30d7\u30ed\u30b0\u30e9\u30e0\u540d | \u30d0\u30fc\u30b8\u30e7\u30f3 |\n|:--|:-:|\n| JPEG | v9b |\n| FreeType  | 2.7.1  |\n|  libPNG |  1.6.28 |\n| zlib  | 1.2.11  |\n|  m4 | 1.4.18 |\n| autoconf  |  2.69 |\n|  libiconv |  1.15 |\n|  xml |  2.9.4 |\n|  libGD | 2.2.4  |\n|  libmcrypt |  2.5.8 |\n|  imap(c-client) |  2007f |\n| curl | curl-7.52.1 |\n| libtiff | 4.0.7 |\n\n\u203b\u5fc5\u8981\u306b\u5fdc\u3058\u3066MySQL\u3084PostgreSQL\u3082\u8ffd\u52a0\u53ef\u80fd\u3067\u3059\n\n##\u5b9f\u8df5\u74b0\u5883\n| \u74b0\u5883 | \u30d0\u30fc\u30b8\u30e7\u30f3 |\n|:-:|:-:|\n|  PHP | 7.1.2  |\n| OS  | CentOS 7.2(7.3\u3082\u78ba\u8a8d\u6e08\u307f) |\n\n##OS\u6a19\u6e96\u306e\u30d0\u30a4\u30ca\u30ea\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\nxorg-x11-proto-devel-7.7-12.el7.noarch.rpm\nlibXpm-devel-3.5.11-2.el7.x86_64.rpm\nlibX11-devel-1.6.3-2.el7.x86_64.rpm\n\n##\u95a2\u4fc2\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\n```bash:\n#\u30d0\u30a4\u30ca\u30ea\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\nmkdir -p /usr/local/src/phpmodule\ncd /usr/local/src/phpmodule\n#JPEG\ncd /usr/local/src/phpmodule\nwget http://www.ijg.org/files/jpegsrc.v9b.tar.gz\ntar xvzf jpegsrc.v9b.tar.gz\n\n#FreeType\nwget http://download.savannah.gnu.org/releases/freetype/freetype-2.7.1.tar.gz\ntar xvzf freetype-2.7.1.tar.gz\n\n#libPNG\nwget --trust-server-names https://downloads.sourceforge.net/project/libpng/libpng16/1.6.28/libpng-1.6.28.tar.gz?r=http%3A%2F%2Fwww.libpng.org%2Fpub%2Fpng%2Flibpng.html&ts=1487394896&use_mirror=jaist\ntar xvzf libpng-1.6.28.tar.gz\n\n\n#zlib\nwget http://zlib.net/zlib-1.2.11.tar.gz\ntar xvzf zlib-1.2.11.tar.gz\n\n#m4\nwget http://ftp.gnu.org/gnu/m4/m4-1.4.18.tar.gz\ntar xvzf m4-1.4.18.tar.gz\n\n#autoconf\nwget http://ftp.gnu.org/gnu/autoconf/autoconf-2.69.tar.gz\ntar xvzf autoconf-2.69.tar.gz\n\n#libiconv\nwget https://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.15.tar.gz\n\n#xml\nwget http://xmlsoft.org/sources/libxml2-2.9.4.tar.gz\ntar xvzf libxml2-2.9.4.tar.gz\n\n#libGD\nwget https://github.com/libgd/libgd/releases/download/gd-2.2.4/libgd-2.2.4.tar.gz\ntar xvzf libgd-2.2.4.tar.gz\n\n#libmcrypt\nwget --trust-server-names http://downloads.sourceforge.net/project/mcrypt/Libmcrypt/2.5.8/libmcrypt-2.5.8.tar.gz?r=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fmcrypt%2Ffiles%2FLibmcrypt%2F2.5.8%2F&ts=1474546665&use_mirror=jaist\ntar xvzf libmcrypt-2.5.8.tar.gz\n\n#imap\nwget ftp://ftp.cac.washington.edu/imap/imap-2007f.tar.gz\ntar xvzf imap-2007f.tar.gz\n\n#curl\nwget https://curl.haxx.se/download/curl-7.52.1.tar.gz\ntar xvzf curl-7.52.1.tar.gz\n\n\n#libtiff\nwget http://download.osgeo.org/libtiff/tiff-4.0.7.tar.gz\ntar xvzf tiff-4.0.7.tar.gz\n\n```\n\n###\u5404\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\n\n```bash\n#JPEG\ncd /usr/local/src/phpmodule\ncd jpeg-9b\n./configure --enable-shared\nmake\nmake install\n\n#libtiff\ncd /usr/local/src/phpmodule\ncd tiff-4.0.7\n./configure\nmake\nmake install\n\n#FreeType\ncd /usr/local/src/phpmodule\ncd freetype-2.7.1\n./configure --enable-static\nmake\nmake install\n\n#php\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3059\u308b\nln -s /usr/local/include/freetype2 /usr/local/include/freetype\n\n\n#libPNG\ncd /usr/local/src/phpmodule\ncd libpng-1.6.28\ncp scripts/makefile.linux Makefile\nmake\nmake install\n\n\n#zlib\ncd /usr/local/src/phpmodule\ncd zlib-1.2.8\n./configure\nmake\nmake install\n\n\n#m4\ncd /usr/local/src/phpmodule\ncd m4-1.4.18\n./configure\nmake\nmake install\n\n\n#autoconf\ncd /usr/local/src/phpmodule\ncd autoconf-2.69\n./configure\nmake\nmake install\n\n\n#libiconv\ncd /usr/local/src/phpmodule\ncd libiconv-1.15\n./configure\nmake\nmake install\n\n```\n\n### libiconv\u3067\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\n\n```\nIn file included from progname.c:26:0:\n./stdio.h:1010:1: error: 'gets' undeclared here (not in a function)\n _GL_WARN_ON_USE (gets, \"gets is a security hole - use fgets instead\");\n```\n\n\u305d\u306e\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u7de8\u96c6\u3059\u308b\n\n```bash:\nvi srclib/stdio.h\n```\n\n\u300c_GL_WARN_ON_USE (gets, \"gets is a security hole - use fgets instead\");\u300d\n\u306e\u7b87\u6240\u3092\u78ba\u8a8d\u3057\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5909\u66f4\u3059\u308b\n\n```c:\n#if defined(__GLIBC__) && !defined(__UCLIBC__) && !__GLIBC_PREREQ(2, 16)\n_GL_WARN_ON_USE (gets, \"gets is a security hole - use fgets instead\");\n#endif\n```\n\n\u7d9a\u304d\n\n```bash:\n#libxml\ncd /usr/local/src/phpmodule\ncd libxml2-2.9.4\n./configure --with-python=no\nmake\nmake install\n\n\n#libGD\ncd /usr/local/src/phpmodule\ncd libgd-2.2.4\n#cp scripts/makefile.linux Makefile\n./configure \\\n--with-png=/usr/local \\\n--with-freetype=/usr/local \\\n--with-jpeg=/usr/local \\\n--with-xpm=/usr \\\n--with-libiconv-prefix=/usr/local \\\n--disable-werror\nmake\nmake install\n\n\n#mcrypt\ncd /usr/local/src/phpmodule\ncd libmcrypt-2.5.8\n./configure\nmake\nmake install\ncd libltdl\n./configure --enable-ltdl-install\nmake\nmake install\n\n\n#imap\ncd /usr/local/src/phpmodule\ncd imap-2007f\n#REM 32Bit \u3060\u3068 make slx\n#REM 64Bit \u2193\nmake slx CC=\"gcc ${BUILD64}\" EXTRACFLAGS=\"-fPIC\" SSLTYPE=unix SHLIBBASE=c-client SHLIBNAME=libc-client.so.1 IP=6 SSLDIR=/usr/local/ssl SSLLIB=/usr/local/ssl/lib\ny\ny\ncd c-client\ncp -p rfc822.h mail.h linkage.h /usr/include/\ncp -p c-client.a /usr/local/lib/\n\n#curl\ncd /usr/local/src/phpmodule\ncd curl-7.52.1\n\n#OpenSSL\u306e\u5834\u6240\u3092\u660e\u793a\nCPPFLAGS=\"-I/usr/local/ssl/include\" LDFLAGS=\"-L/usr/local/ssl/lib\"\n\n./configure \\\n--enable-http \\\n--enable-ftp \\\n--enable-file \\\n--enable-proxy \\\n--enable-cookies \\\n--with-zlib=/usr/local \\\n--with-ssl=/usr/local/ssl \\\n--with-libssh2=/usr/local\n\nmake\nmake install\n```\n\n\n##PHP\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\n\n```\ncd /usr/local/src\nwget --trust-server-names http://jp2.php.net/get/php-7.1.2.tar.gz/from/this/mirror\ntar xvzf php-7.1.2.tar.gz\ncd php-7.1.2\n\n\n./configure \\\n--enable-mbstring \\\n--enable-mbregex \\\n--with-apxs2=/usr/local/apache2/bin/apxs \\\n--with-gd=/usr/local \\\n--with-freetype-dir=/usr/local/src/phpmodule/freetype-2.7 \\\n--with-jpeg-dir=/usr/local/lib \\\n--with-png-dir=/usr/local \\\n--with-tiff-dir=/usr/local \\\n--with-zlib-dir=/usr \\\n--with-iconv-dir=/usr/local \\\n--with-libxml-dir=/usr/local \\\n--enable-gd-native-ttf \\\n--enable-gd-jis-conv \\\n--enable-zip \\\n--with-curl=/usr/local \\\n--with-mcrypt=/usr/local \\\n--enable-bcmath \\\n--enable-sockets \\\n--enable-ftp \\\n--enable-opcache=no \\\n--with-openssl=/usr/local/ssl \\\n--with-xpm-dir=/usr \u00a5\n--with-gettext \\\n--with-imap=/usr/local/src/phpmodule/imap-2007f \\\n--with-imap-ssl=/usr/local/ssl\n#\n#PGSQL\u3092\u5165\u308c\u308b\u5834\u5408\n#--with-pgsql=/usr/local/pgsql \\\n#--with-pdo-pgsql=/usr/local/pgsql\n#\n#MySQL(MAriaDB)\u3092\u5165\u308c\u308b\u5834\u5408\n#--with-mysqli=/usr/local/mysql/bin/mysql_config \\\n#--with-pdo-mysql=/usr/local/mysql \\\n#--with-mysql-sock=/tmp/mysql.sock\n\nmake\nmake install\n```\n####\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u5834\u5408\n\n```bash:\nIn file included from /usr/local/src/php-7.1.0/ext/gd/gd_compat.c:13:0:\n/usr/local/include/jpeglib.h:974:30: error: unknown type name 'FILE'\n EXTERN(void) jpeg_stdio_dest JPP((j_compress_ptr cinfo, FILE * outfile));\n                              ^\n/usr/local/include/jpeglib.h:975:29: error: unknown type name 'FILE'\n EXTERN(void) jpeg_stdio_src JPP((j_decompress_ptr cinfo, FILE * infile));\n```\n\n\u3053\u306e\u5834\u5408\u3001jpeglib.h\u3092\u7de8\u96c6\u3057\u3001\u300c#include \"jmorecfg.h\" \u300d\u306e\u4e0b\u306b\u3001\u300c#include \\<stdio.h>\u300d\u3092\u8ffd\u52a0\u3059\u308b\n\n\n```bash:\nvi /usr/local/include/jpeglib.h\n```\n\n\u4ee5\u4e0b\u306e\u3092\u8ffd\u52a0\n\n```c:\n#include \"jmorecfg.h\"           /* seldom changed options */\n#include <stdio.h>\n//\u2191\u3053\u308c\u3092\u8ffd\u52a0\u3059\u308b\n```\n\n\n\n###DB\u306b\u5bfe\u5fdc\u3059\u308b\u5834\u5408\nPostgreSQL\u306b\u5bfe\u5fdc\u3059\u308b\u5834\u5408\n\n```bash:\n--with-pgsql=/usr/local/pgsql \\\n--with-pdo-pgsql=/usr/local/pgsql\n```\n\nMySQL\u5bfe\u5fdc\u3059\u308b\u5834\u5408\n\n```bash:\n--with-mysqli=/usr/local/mysql/bin/mysql_config \\\n--with-pdo-mysql=/usr/local/mysql \\\n--with-mysql-sock=/tmp/mysql.sock\n```\n\n##\u8a2d\u5b9a\u3092\u884c\u3046\n\n```bash:\ncp php.ini-production /usr/local/lib/php.ini\n```\n\nhttpd.conf\u306bphp\u30d5\u30a1\u30a4\u30eb\u3092\u5b9f\u884c\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\n\n```\nvi /usr/local/apache2/conf/httpd.conf\n```\n\nLoadModule php7_module        modules/libphp7.so\n\u306e\u4e0b\u306b\u300cAddType application/x-httpd-php .php\u300d\u3092\u8a18\u5165\u3059\u308b\n\n```bash:httpd.copf\nLoadModule php7_module        modules/libphp7.so\n#\u2193\u8ffd\u52a0\u3059\u308b\nAddType application/x-httpd-php .php\n```\n\n\u3092\u8ffd\u8a18\u3057\u3066\u4fdd\u5b58\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n\n##phpinfo\u3092\u51fa\u3059\n\n```\nvi /usr/local/apache2/htdocs/phpinfo.php\n```\n\n\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u5f35\u308a\u4ed8\u3051\u3066\u4fdd\u5b58\u7d42\u4e86\n\n```php:phpinfo\n<?php\n  date_default_timezone_set(\"Asia/Tokyo\");\n  phpinfo();\n?>\n```\n\nApache\u3092\u518d\u8d77\u52d5\u5f8c\u3001phpinfo.php\u3092\u958b\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u753b\u9762\u304c\u51fa\u308c\u3070OK\n![image](https://qiita-image-store.s3.amazonaws.com/0/85495/8cf788a9-e06b-101c-17cd-660683775d91.png)\n\n\n###\u53c2\u8003\u6587\u732e\nhttp://www.itkb.ro/kb/linux/patch-libiconv-pentru-glibc-216\nhttps://travis-ci.org/libgd/libgd/jobs/151123674/config\nhttps://github.com/libgd/libgd/issues/292\n\n\n\n", "tags": ["apache2", "PHP", "PHP7", "CentOS", "centos7"]}