{"context": "Ruby\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3001Cisco\u30eb\u30fc\u30bf\u306bSSH\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001CLI\u304b\u308910\u79d2\u9593\u9694\u3067show interface\u53e9\u3044\u3066\u3001\u5b9f\u884c\u7d50\u679c\u304b\u3089\u5fc5\u8981\u306a\u5024\u3092\u6b63\u898f\u8868\u73fe\u3067\u629c\u304d\u51fa\u3057\u3066\u3001InfluxDB\u306b\u4fdd\u5b58\u3057\u3066\u3001Grafana\u3067\u8996\u899a\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nGrafana\u3068InfluxDB\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30bd\u30fc\u30b9\u3092\u8996\u899a\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fInfluxDB\u3001\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u306fGrafana\u3001\u30c7\u30fc\u30bf\u53d6\u5f97\u306fRuby\u30b9\u30af\u30ea\u30d7\u30c8\uff0bexpect4r\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n\u672c\u8a18\u4e8b\u306fUsing InfluxDB + Grafana to Display Network Statistics\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30fc\u30bf\u53d6\u5f97\u306bInfluxsnmp\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u81ea\u4f5c\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3068\u4e0a\u56f3\u306e\u3088\u3046\u306b\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f\u30c7\u30fc\u30bf\u306e\u8996\u899a\u5316\u307e\u3067\u306e\u57fa\u672c\u7684\u306a\u3068\u3053\u308d\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\u76ee\u7684\n\u30eb\u30fc\u30bf\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306a\u3069\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30bd\u30fc\u30b9\u306e\u8996\u899a\u5316\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\u5f93\u6765\u306fSNMP\u3068RRDtool\u306a\u3069\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u8996\u899a\u5316\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u305f\u3060\u3057\u3001\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u4ee5\u5916\u306b\u53d6\u5f97\u9805\u76ee\u304c\u5897\u3048\u305f\u5834\u5408\u3084\u3001\u53d6\u5f97\u9593\u9694\u306e\u5909\u66f4\u306a\u3069\u3001\u624b\u9593\u304c\u304b\u304b\u308a\u307e\u3057\u305f\u3002\u305d\u3053\u3067\u3001\u4ee3\u66ff\u30c4\u30fc\u30eb\u3068\u3057\u3066InfluxDB+Grafana\u3092\u8a66\u7528\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u6642\u7cfb\u5217\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306eInfluxDB\u3092\u4f7f\u3044\u307e\u3059\u3002\u30e1\u30ea\u30c3\u30c8\u3068\u3057\u3066\u3001\u30b9\u30ad\u30fc\u30de\u30ec\u30b9\u306e\u305f\u3081\u3001\u53d6\u5f97\u9805\u76ee\u304c\u5897\u3048\u305f\u5834\u5408\u3067\u3082\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5074\u3067\u8a2d\u5b9a\u5909\u66f4\u4e0d\u8981\u3067\u3059\u3002\u30ac\u30f3\u30ac\u30f3\u76e3\u8996\u9805\u76ee\u306e\u8ffd\u52a0\u3084\u30eb\u30fc\u30bf\u306e\u53f0\u6570\u3092\u5897\u3084\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8996\u899a\u5316\u30c4\u30fc\u30eb\u306fGrafana\u3092\u4f7f\u3063\u3066\u3001\u8868\u793a\u6642\u9593\u306e\u5909\u66f4\u3084\u4e00\u5ea6\u306b\u8907\u6570\u306e\u9805\u76ee\u3092\u8868\u793a\u306a\u3069\u304c\u3067\u304d\u307e\u3059\u3002\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u306b\u6642\u9593\u3092\u5909\u66f4\u3067\u304d\u3001\u304b\u3063\u3053\u826f\u304f\u8868\u793a\u3067\u304d\u307e\u3059\u3002\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30bd\u30fc\u30b9\u306e\u5024\u53d6\u5f97\u306fSNMP\u304c\u6a19\u6e96\u7684\u3067\u3059\u304c\u3001\u4eca\u56de\u306fSSH\u304b\u3089CLI\u3067show\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u305d\u306e\u7d50\u679c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\u60f3\u5b9a\u306fSNMP\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u5024\u3084SNMP\u3067\u304d\u306a\u3044\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u4ed5\u7d44\u307f\n\u30c7\u30fc\u30bf\u53d6\u5f97\u30fb\u4fdd\u5b58\u30fb\u8868\u793a\u306f\u4e0b\u8a18\u306e\u4ed5\u7d44\u307f\u3067\u5b9f\u73fe\u3057\u307e\u3059\u3002\n\n\n\u6e96\u5099\n\u4eca\u56de\u306fDockerHub\u4e0a\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066InfluxDB\u3068Grafana\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\nUbuntu 14.04.04 LTS\n\nDocker v1.6.2\n\ntutum/influxdb v0.10\n\ngrafana/grafana v3.0.0-beta1\nRuby 2.2.4\n\n\nclockwork 1.2.0\nexpect4r 0.0.11\ninfluxdb 0.2.3\n\n\nCisco VIRL\uff1a\u30eb\u30fc\u30bf\n\n\u203bGrafana v3.0.0-beta1\u304cInfluxDB v0.11\u4ee5\u964d\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u4eca\u56de\u306fInfluxDB v0.10\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n\u30eb\u30fc\u30bf\u306e\u6e96\u5099\nCisco VIRL\u3067\u4e0b\u8a18\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u64ec\u4f3c\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u6d41\u3059\u305f\u3081\u3001\u4e21\u7aef\u306blxc-iperf-1/2\u9593\u3067iperf\u3067\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u6d41\u3057\u3066\u3044\u307e\u3059\u3002\n\n\nUbuntu/Docker\u306e\u6e96\u5099\nInfluxDB\u3068Grafana\u3092Docker\u4e0a\u3067\u52d5\u304b\u3059\u305f\u3081\u3001Docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002Ubuntu14.04\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308bdocker.io\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u306fv1.6.2\u3067\u3059\u3002\n$ cat /etc/lsb-release \nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.4 LTS\"\n$ sudo apt install docker.io\n\n\nInfluxDB\u306e\u6e96\u5099\nInfluxDB\u306f\u6642\u7cfb\u5217\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3059\u3002\u30b9\u30ad\u30fc\u30de\u30ec\u30b9\u306e\u305f\u3081\u3001\u52d5\u7684\u306b\u4fdd\u5b58\u3059\u308b\u9805\u76ee\u3092\u5897\u3084\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306fInfluxDB v0.10\u3092DockerHub\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u5229\u7528\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\uff04HOME/influxdb\u306b\u4fdd\u5b58\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002InfluxDB\u306fTCP\u30dd\u30fc\u30c88083,8086\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002TCP8083\u306fWeb\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3001TCP8086\u306fAPI\u306e\u30dd\u30fc\u30c8\u3067\u3059\u3002\n# InfluxDB v0.10\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\n$ sudo docker pull tutum/influxdb:0.10\n\n# InfluxDB\u306e\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\n$ sudo docker run -d --name=influxdb --volume=$HOME/influxdb:/data -p 8083:8083 -p 8086:8086 tutum/influxdb:0.10\n\n# InfluxDB\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\n$ sudo docker ps\nCONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS                                            NAMES\ncb5e24f3065a        tutum/influxdb:0.10   \"/run.sh\"           4 minutes ago       Up 4 minutes        0.0.0.0:8083->8083/tcp, 0.0.0.0:8086->8086/tcp   influxdb            \n\n# \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u305f\u3044\u5834\u5408\u306b\u5b9f\u884c\n$ sudo docker stop influxdb\n\n# \u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\n$ sudo docker start influxdb\n\n\nInfluxDB\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\n\u7d9a\u3044\u3066\u3001Web\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304b\u3089InfluxDB\u4e0a\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4eca\u56de\u306ftraffic1\u3068\u3044\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3067\u30014\u9031\u9593\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\nDocker\u30db\u30b9\u30c8\u306eTCP\u30dd\u30fc\u30c88083\u3092Web\u30d6\u30e9\u30a6\u30b6\u3067\u8868\u793a\u3057\u3001\u4e0b\u8a18\u306e\u30af\u30a8\u30ea\u3092\u767a\u884c\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\u3068\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\nCREATE DATABASE traffic1\n# \u4f5c\u6210\u6e08\u307f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u78ba\u8a8d\nSHOW DATABASES\n\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30dd\u30ea\u30b7\u30fctraffic\u3092\u8a2d\u5b9a\u30014\u9031\u9593\u4fdd\u5b58\u3059\u308b\nCREATE RETENTION POLICY traffic ON traffic1 DURATION 4w REPLICATION 1 DEFAULT\n# \u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\nSHOW RETENTION POLICIES ON \"traffic1\"\n\n\u4eca\u56de\u306f192.168.122.103\u306eDocker\u30db\u30b9\u30c8\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u305f\u3081\u3001Web\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306fhttp://192.168.122.103:8083/ \u3068\u306a\u308a\u307e\u3059\u3002Web\u30d6\u30e9\u30a6\u30b6\u3067Web\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u958b\u304d\u767a\u884c\u3057\u305f\u3044\u30af\u30a8\u30ea\u3092\u300cQuery\u300d\u30d5\u30a9\u30fc\u30e0\u306b\u5165\u529b\u3057\u3001Enter\u3067\u78ba\u5b9a\u3057\u307e\u3059\u3002\u554f\u984c\u306a\u3051\u308c\u3070\u3001Success!\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\u3068\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u3068\u304a\u308a\u3068\u306a\u308a\u307e\u3059\u3002\n\n\n\u30c7\u30fc\u30bf\u53d6\u5f97\u7528\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\n\u4eca\u56de\u306fSNMP\u3092\u4f7f\u308f\u305a\u306b\u624b\u88fd\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30eb\u30fc\u30bf\u306bSSH\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\u60f3\u5b9a\u3068\u3057\u3066\u306fSNMP\u3067\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\u30e1\u30c8\u30ea\u30af\u30b9\u3084\u3001\u305d\u3082\u305d\u3082SNMP\u3067\u304d\u306a\u3044\u30eb\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001CLI\u304b\u3089\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u5024\u3092\u4fdd\u5b58\u3059\u308b\u65b9\u6cd5\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nCisco\u30eb\u30fc\u30bf\u306bSSH\u3057\u3001show interface\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306ftraffic1\u3067\u3001SQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u8a00\u3046\u3044\u308f\u3086\u308b\u30c6\u30fc\u30d6\u30eb\u540d\u306fcisco_showint\u3068\u3057\u3066\u3044\u3057\u307e\u3059\u3002InfluxDB\u3067\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u540d\u306f\u30b7\u30ea\u30fc\u30ba\u540d\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\nshow interface\u304b\u3089\u6b63\u898f\u8868\u73fe\u3092\u5229\u7528\u3057\u3066\u4e0b\u8a18\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002\u62bd\u51fa\u3057\u305f\u7d50\u679c\u306f\u3001\u30db\u30b9\u30c8\u540d\u3068\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u540d\u3092\u7d44\u307f\u5408\u308f\u305b\u305fport\u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\ninterface: \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u540d\nout_drops: \u9001\u4fe1\u30c9\u30ed\u30c3\u30d7\u6570\nin_packets: \u53d7\u4fe1\u30d1\u30b1\u30c3\u30c8\u6570\nin_bytes: \u53d7\u4fe1\u30d0\u30a4\u30c8\u6570\nin_errors: \u53d7\u4fe1\u30a8\u30e9\u30fc\u30d1\u30b1\u30c3\u30c8\u6570\nout_packets: \u9001\u4fe1\u30d1\u30b1\u30c3\u30c8\u6570\nout_bytes: \u9001\u4fe1\u30d0\u30a4\u30c8\u6570\nout_errors: \u9001\u4fe1\u30a8\u30e9\u30fc\u30d1\u30b1\u30c3\u30c8\u6570\nlost_carriers: Ethernet\u30ad\u30e3\u30ea\u30a2\u4fe1\u53f7\u306e\u55aa\u5931\u56de\u6570\n\nexpect4r\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u3001Cisco\u30eb\u30fc\u30bf\u306bSSH\u3057\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306fRuby\u306eexpect4r\u3067Cisco\u30eb\u30fc\u30bf\u306bTelnet/SSH\u3057\u3066\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3059\u308b\u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\ncollector.rb\nrequire 'expect4r'\nrequire 'awesome_print'\nrequire 'clockwork'\nrequire 'influxdb'\nrequire 'parallel'\nrequire 'yaml'\n\n# InfluxDB\u306e\u8a2d\u5b9a\ninfluxdb = InfluxDB::Client.new 'traffic1', host: '192.168.122.103'\n\n# \u53d6\u5f97\u5148\u30db\u30b9\u30c8\nhosts = YAML.load(<<EOL)\n- :hostname: iosv-1\n  :host: 172.16.1.205\n- :hostname: iosv-2\n  :host: 172.16.1.206\nEOL\n\n# show interface\u306e\u7d50\u679c\u304b\u3089\u5024\u3092\u629c\u304d\u51fa\u3059\u6b63\u898f\u8868\u73fe\nREGEX_SHOWINT = %r{\n  ^(?<interface>[\\w\\.\\/]+)\\ is\n  .+?\n  Total\\ output\\ drops:\\ (?<out_drops>\\d+)\n  .+?\n  (?<in_packets>\\d+)\\ packets\\ input,\\ (?<in_bytes>\\d+)\\ bytes\n  .+?\n  (?<in_errors>\\d+)\\ input\\ errors,\n  .+?\n  (?<out_packets>\\d+)\\ packets\\ output,\\ (?<out_bytes>\\d+)\\ bytes\n  .*?\n  (?<out_errors>\\d+)\\ output\\ errors,\n  .+?\n  (?<lost_carriers>\\d+)\\ lost\\ carrier\n}xm\n# \u4e0a\u8a18\u306e\u6b63\u898f\u8868\u73fe\u306f\u4e0b\u8a18\u306eshow interface\u306e\u7d50\u679c\u3092\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u5358\u4f4d\u306b\u62bd\u51fa\u3059\u308b\n# GigabitEthernet0/2 is up, line protocol is up \n#   Hardware is iGbE, address is fa16.3e59.cd19 (bia fa16.3e59.cd19)\n#   Description: to iosv-2\n#   Internet address is 10.0.0.9/30\n#   MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec, \n#      reliability 255/255, txload 1/255, rxload 1/255\n#   Encapsulation ARPA, loopback not set\n#   Keepalive set (10 sec)\n#   Full Duplex, Auto Speed, link type is auto, media type is RJ45\n#   output flow-control is unsupported, input flow-control is unsupported\n#   ARP type: ARPA, ARP Timeout 04:00:00\n#   Last input 00:00:07, output 00:00:00, output hang never\n#   Last clearing of \"show interface\" counters never\n#   Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 842948\n#   Queueing strategy: fifo\n#   Output queue: 0/40 (size/max)\n#   5 minute input rate 115000 bits/sec, 171 packets/sec\n#   5 minute output rate 2092000 bits/sec, 172 packets/sec\n#      3475718 packets input, 286108879 bytes, 0 no buffer\n#      Received 0 broadcasts (0 IP multicasts)\n#      0 runts, 0 giants, 0 throttles \n#      0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored\n#      0 watchdog, 0 multicast, 0 pause input\n#      3517278 packets output, 5302646275 bytes, 0 underruns\n#      0 output errors, 0 collisions, 3 interface resets\n#      0 unknown protocol drops\n#      0 babbles, 0 late collision, 0 deferred\n#      0 lost carrier, 0 no carrier, 0 pause output\n#      0 output buffer failures, 0 output buffers swapped out\n\nhosts.each do |host|\n  ios = Expect4r::Ios.new_ssh(\n    host: host[:host], user: 'cisco',\n    pwd: 'cisco', enable_password: 'cisco'\n  )\n  # 10\u79d2\u9593\u9694\u3067\u5b9a\u671f\u7684\u306b\u5b9f\u884c\u3059\u308b\n  Clockwork.every(10.seconds, \"#{host[:hostname]} collector\") do\n    ios.login\n\n    # Cisco\u30eb\u30fc\u30bf\u3067show interface\u3092\u5b9f\u884c\u3057\u3001\n    # \u6b63\u898f\u8868\u73fe\u3067\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u629c\u304d\u51fa\u3059\n    response = ios.exec('show interface').join.delete(\"\\r\")\n    response.scan(REGEX_SHOWINT) do\n      m = Regexp.last_match\n      data = {\n        values: {\n          out_drops:     m[:out_drops].to_i,\n          in_packets:    m[:in_packets].to_i,\n          in_bytes:      m[:in_bytes].to_i,\n          in_errors:     m[:in_errors].to_i,\n          out_packets:   m[:out_packets].to_i,\n          out_bytes:     m[:out_bytes].to_i,\n          out_errors:    m[:out_errors].to_i,\n          lost_carriers: m[:lost_carriers].to_i\n        },\n        tags: {\n          port: \"#{host[:hostname]} #{m[:interface]}\"\n        }\n      }\n\n      # InfluxDB\u306b\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u4fdd\u5b58\n      influxdb.write_point('cisco_showint', data)\n      ap data\n    end\n  end\nend\n\n\n\n\u30c7\u30fc\u30bf\u53d6\u5f97\u7528\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\u4e0a\u8a18\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u5b9a\u671f\u5b9f\u884c\u3059\u308b\u305f\u3081\u306bclockwork\u3092\u5229\u7528\u3057\u3066\u300110\u79d2\u9593\u9694\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n\u5b9f\u884c\u7d50\u679c\n$ clockwork collector.rb \nI, [2016-04-10T11:30:36.846900 #1318]  INFO -- : Starting clock for 2 events: [ iosv-1 collector iosv-2  collector ]\nI, [2016-04-10T11:30:36.847066 #1318]  INFO -- : Triggering 'iosv-1 collector'\n{\n    :values => {\n            :out_drops => 0,\n           :in_packets => 744202,\n             :in_bytes => 45856886,\n            :in_errors => 0,\n          :out_packets => 780556,\n            :out_bytes => 126581158,\n           :out_errors => 0,\n        :lost_carriers => 1\n    },\n      :tags => {\n        :port => \"iosv-1 GigabitEthernet0/0\"\n    }\n}\n{\n    :values => {\n            :out_drops => 0,\n           :in_packets => 5049224,\n             :in_bytes => 7628494232,\n            :in_errors => 0,\n          :out_packets => 4034600,\n            :out_bytes => 332766793,\n           :out_errors => 0,\n        :lost_carriers => 1\n    },\n      :tags => {\n        :port => \"iosv-1 GigabitEthernet0/1\"\n    }\n}\n{\n    :values => {\n            :out_drops => 988441,\n           :in_packets => 4029369,\n             :in_bytes => 332510281,\n            :in_errors => 0,\n          :out_packets => 4080969,\n            :out_bytes => 6136203204,\n           :out_errors => 0,\n        :lost_carriers => 0\n    },\n      :tags => {\n        :port => \"iosv-1 GigabitEthernet0/2\"\n    }\n}\n\n\n\nInfluxDB\u3067\u30c7\u30fc\u30bf\u4fdd\u5b58\u7d50\u679c\u306e\u78ba\u8a8d\n\u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u304b\u3001InfluxDB\u306eWeb\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u53f3\u4e0a\u304b\u3089\u5bfe\u8c61\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9traffic1\u3092\u9078\u629e\u3057\u3001\u4e0b\u8a18\u306e\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\nselect * from cisco_showint where port = 'iosv-1 GigabitEthernet0/1' order by desc\n\n\ncURL\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30fc\u30bf\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002API\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306fhttp://192.168.122.103:8086/query \u3068\u306a\u308a\u307e\u3059\u3002\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30af\u30a8\u30ea\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u7d50\u679c\u306fJSON\u3068\u306a\u308a\u307e\u3059\u3002\u8a73\u7d30\u306fInfluxDB Querying Data\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n$ curl -G \"http://192.168.122.103:8086/query?pretty=true\" --data-urlencode \"db=trffic1\" --data-urlencode \"q=SELECT * FROM cisco_showint WHERE port = 'iosv-1 GigabitEthernet0/1' order by desc limit 2\"\n{\n    \"results\": [\n        {\n            \"series\": [\n                {\n                    \"name\": \"cisco_showint\",\n                    \"columns\": [\n                        \"time\",\n                        \"in_bytes\",\n                        \"in_errors\",\n                        \"in_packets\",\n                        \"lost_carriers\",\n                        \"out_bytes\",\n                        \"out_drops\",\n                        \"out_errors\",\n                        \"out_packets\",\n                        \"port\"\n                    ],\n                    \"values\": [\n                        [\n                            \"2016-04-10T02:51:33Z\",\n                            7.628494232e+09,\n                            0,\n                            5.049224e+06,\n                            1,\n                            3.32786237e+08,\n                            0,\n                            0,\n                            4.034858e+06,\n                            \"iosv-1 GigabitEthernet0/1\"\n                        ],\n                        [\n                            \"2016-04-10T02:51:23Z\",\n                            7.628494232e+09,\n                            0,\n                            5.049224e+06,\n                            1,\n                            3.32786087e+08,\n                            0,\n                            0,\n                            4.034856e+06,\n                            \"iosv-1 GigabitEthernet0/1\"\n                        ]\n                    ]\n                }\n            ]\n        }\n    ]\n}\n\n\nGrafana\u306e\u6e96\u5099\n\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u306eGrafana\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306fv3.0.0\u306e\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u524d\u3060\u3063\u305f\u305f\u3081\u3001v3.0.0-beta1\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$HOME/grafana\u306b\u8a2d\u5b9a\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002TCP3000\u30dd\u30fc\u30c8\u3067\u7a3c\u50cd\u3057\u307e\u3059\u3002\n# Grafana v3.0.0-beta1\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\n$ sudo docker pull grafana/grafana:3.0.0-beta1\n\n# Grafana\u306e\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\nsudo docker run -d --name=grafana --volume=$HOME/grafana/:/var/lib/grafana -p 3000:3000 grafana/grafana:3.0.0-beta1\n\n# InfluxDB\u3068Grafana\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\n$ sudo docker ps\nCONTAINER ID        IMAGE                         COMMAND             CREATED             STATUS              PORTS                                            NAMES\n813046bdf50e        grafana/grafana:3.0.0-beta1   \"/run.sh\"           6 seconds ago       Up 6 seconds        0.0.0.0:3000->3000/tcp                           grafana             \ncb5e24f3065a        tutum/influxdb:0.10           \"/run.sh\"           58 minutes ago      Up 58 minutes       0.0.0.0:8083->8083/tcp, 0.0.0.0:8086->8086/tcp   influxdb            \n\n# \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u305f\u3044\u5834\u5408\u306b\u5b9f\u884c\n$ sudo docker stop grafana\n\n# \u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\n$ sudo docker start grafana\n\n\nGrafana\u306b\u30ed\u30b0\u30a4\u30f3\nGrafana\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u305f\u3081\u306b\u3001Web\u30d6\u30e9\u30a6\u30b6\u304b\u3089Grafana\u3092\u8868\u793a\u3057\u307e\u3059\u3002\nWeb\u30d6\u30e9\u30a6\u30b6\u3067http://192.168.122.103:3000 \u3092\u958b\u304f\u3068\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001\u30e6\u30fc\u30b6\u540d\uff1aadmin\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\uff1aadmin\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002\n\n\nGrafana\u3067\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u6307\u5b9a\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u6700\u521d\u306b\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306bInfluxDB\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u6307\u5b9a\u3057\u307e\u3059\u3002\n\u5de6\u4e0a\u306eGrafana\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30e1\u30cb\u30e5\u30fc\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u3001Data Sources\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Data Sources\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\nData Sources\u753b\u9762\u3067Add data source\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n\nAdd data source\u753b\u9762\u3067\u4e0b\u8a18\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\nName: traffic1  \u203b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3068\u540c\u3058\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\nDefault: ON\nType: InfluxDB  \u203b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306bInfluxDB\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3059\u308b\u3068\u5165\u529b\u9805\u76ee\u304cInfluxDB\u306b\u5408\u308f\u305b\u3066\u5909\u5316\u3057\u307e\u3059\nHttp Settings\n\n\nUrl: http://192.168.122.130:8086 \u203bInfluxDB\u306eTCP8086\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\nAccess: direct \u203b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3088\u3046\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\nInfluxDB Details\n\n\nDatabase: traffic1 \u203bInfluxDB\u3067\u4f5c\u6210\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6307\u5b9a\nUser: admin  \u203b\u5165\u529b\u5fc5\u9808\u9805\u76ee\u306e\u305f\u3081\u30c0\u30df\u30fc\u3067\u5165\u529b\nPassword: admin  \u203b\u5165\u529b\u5fc5\u9808\u9805\u76ee\u306e\u305f\u3081\u30c0\u30df\u30fc\u3067\u5165\u529b\n\n\n\nAdd\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n\u8ffd\u52a0\u5f8c\u306b\u30c6\u30b9\u30c8\u63a5\u7d9a\u3057\u3001\u554f\u984c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001Test Connection\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Success\u3068\u8868\u793a\u304c\u3067\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u554f\u984c\u306a\u3051\u308c\u3070\u3001Save\u30dc\u30bf\u30f3\u3067\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\nGrafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u4f5c\u6210\nGrafana\u30a2\u30a4\u30b3\u30f3 => Dashboards => New\u304b\u3089\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u4f5c\u6210\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n\u65b0\u3057\u3044\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30b0\u30e9\u30d5\u30d1\u30cd\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002ROW\u30a2\u30a4\u30b3\u30f3 => Add Panel => Graph\u304b\u3089\u30b0\u30e9\u30d5\u30d1\u30cd\u30eb\u4f5c\u6210\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n\n\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u8ffd\u52a0\u306f\u4e0b\u8a18\u306eYouTube\u306e\u52d5\u753b\u306e\u3068\u304a\u308a\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u203b\u8ffd\u8a18\uff1a\u52d5\u753b\u3067\u306fGraph Metrics\u3067fill(null)\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001fill(none)\u306b\u5909\u66f4\u304c\u5fc5\u8981\u3067\u3059\u3002fill(null)\u3067\u8868\u793a\u6642\u9593\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u3001\u3046\u307e\u304f\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\nGraph General\u306e\u8a2d\u5b9a\u3002\u30b0\u30e9\u30d5\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nGraph Metrics\u306e\u8a2d\u5b9a\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u9078\u629e\u3057\u3001\u8868\u793a\u5bfe\u8c61\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306e\u5834\u5408\u3001\u7d2f\u7a4d\u30ab\u30a6\u30f3\u30bf\u3068\u306a\u308b\u305f\u3081\u3001\u76f4\u524d\u306e\u5024\u3068\u5dee\u5206\u3092\u53d6\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002non_negative_derivative(1s)\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3001\u76f4\u524d\u3068\u306e\u5dee\u5206\u306e1\u79d2\u9593\u9694\u306e\u5e73\u5747\u3092\u30b0\u30e9\u30d5\u306b\u30d7\u30ed\u30c3\u30c8\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u30e9\u30c3\u30d7\u30a2\u30e9\u30a6\u30f3\u30c9\u306f\u8003\u616e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u5024\u304c\u30d0\u30a4\u30c8\u306e\u305f\u3081\u3001\u30d3\u30c3\u30c8\u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306bmath(*8)\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3066\u30018\u500d\u3057\u3066\u3044\u307e\u3059\u3002GROUP BY\u3067fill(none)\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n\nGraph Axes\u306e\u8a2d\u5b9a\u3002X-Y\u8ef8\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002Unit\uff08\u5358\u4f4d\uff09\u3092bits/sec\u3001Y-Min\u30920\u3001Right Y\u3092OFF\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\nGraph Legend\u306e\u8a2d\u5b9a\u3002\u5224\u4f8b\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u5224\u4f8b\u306b\u6700\u5927\u3068\u73fe\u5728\u306e\u5024\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n\u6700\u5f8c\u306b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n\u4eca\u56de\u306f\u5fc5\u8981\u6700\u5c0f\u9650\u306e\u8a2d\u5b9a\u306e\u307f\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\u4eca\u56de\u8aac\u660e\u3057\u3066\u3044\u306a\u3044Templating\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u52d5\u7684\u306b\u30dd\u30fc\u30c8\u3092\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306fUsing InfluxDB + Grafana to Display Network Statistics\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u53c2\u8003\u6587\u732e\n\nUsing InfluxDB + Grafana to Display Network Statistics\nInfluxDB \u3092 Ruby \u304b\u3089\u64cd\u4f5c\u3059\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\nInfluxDB\u3068Grafana\u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d0\u30fc\u30ea\u30bd\u30fc\u30b9\u306e\u53ef\u8996\u5316\u3092\u3059\u308b - Qiita\nInfluxDB\u3068Grafana\u3068fluentd\u3067\u3001twitter\u30c7\u30fc\u30bf\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u96c6\u8a08\u30fb\u53ef\u8996\u5316 - Qiita\nNetwork Interface Traffic Calculation #363 - GitHub\nSNMP Counter calculation using InfluxDB #844 - GitHub\n\nRuby\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u3001Cisco\u30eb\u30fc\u30bf\u306bSSH\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001CLI\u304b\u308910\u79d2\u9593\u9694\u3067show interface\u53e9\u3044\u3066\u3001\u5b9f\u884c\u7d50\u679c\u304b\u3089\u5fc5\u8981\u306a\u5024\u3092\u6b63\u898f\u8868\u73fe\u3067\u629c\u304d\u51fa\u3057\u3066\u3001InfluxDB\u306b\u4fdd\u5b58\u3057\u3066\u3001Grafana\u3067\u8996\u899a\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nGrafana\u3068InfluxDB\u3067\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30bd\u30fc\u30b9\u3092\u8996\u899a\u5316\u3057\u3066\u307f\u307e\u3057\u305f\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306fInfluxDB\u3001\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u306fGrafana\u3001\u30c7\u30fc\u30bf\u53d6\u5f97\u306fRuby\u30b9\u30af\u30ea\u30d7\u30c8\uff0bexpect4r\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u5b9f\u88c5\u3057\u3066\u3044\u307e\u3059\u3002\n\u672c\u8a18\u4e8b\u306f[Using InfluxDB + Grafana to Display Network Statistics](http://lkhill.com/using-influxdb-grafana-to-display-network-statistics/)\u3092\u53c2\u8003\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30fc\u30bf\u53d6\u5f97\u306bInfluxsnmp\u3092\u5229\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u4eca\u56de\u306f\u81ea\u4f5c\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_032.png](https://qiita-image-store.s3.amazonaws.com/0/12026/2b27ee62-f371-7e1f-da22-9a0d508cbc0b.png)\n\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u3059\u308b\u3068\u4e0a\u56f3\u306e\u3088\u3046\u306b\u3067\u304d\u307e\u3059\u3002\u4eca\u56de\u306f\u30c7\u30fc\u30bf\u306e\u8996\u899a\u5316\u307e\u3067\u306e\u57fa\u672c\u7684\u306a\u3068\u3053\u308d\u3092\u8aac\u660e\u3057\u307e\u3059\u3002\n\n# \u76ee\u7684\n\u30eb\u30fc\u30bf\u306e\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306a\u3069\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30bd\u30fc\u30b9\u306e\u8996\u899a\u5316\u3059\u308b\u3053\u3068\u3092\u76ee\u7684\u3068\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u5f93\u6765\u306fSNMP\u3068RRDtool\u306a\u3069\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u8996\u899a\u5316\u3057\u3066\u3044\u307e\u3057\u305f\u3002\u305f\u3060\u3057\u3001\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u4ee5\u5916\u306b\u53d6\u5f97\u9805\u76ee\u304c\u5897\u3048\u305f\u5834\u5408\u3084\u3001\u53d6\u5f97\u9593\u9694\u306e\u5909\u66f4\u306a\u3069\u3001\u624b\u9593\u304c\u304b\u304b\u308a\u307e\u3057\u305f\u3002\u305d\u3053\u3067\u3001\u4ee3\u66ff\u30c4\u30fc\u30eb\u3068\u3057\u3066InfluxDB+Grafana\u3092\u8a66\u7528\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u4eca\u56de\u306f\u6642\u7cfb\u5217\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306eInfluxDB\u3092\u4f7f\u3044\u307e\u3059\u3002\u30e1\u30ea\u30c3\u30c8\u3068\u3057\u3066\u3001\u30b9\u30ad\u30fc\u30de\u30ec\u30b9\u306e\u305f\u3081\u3001\u53d6\u5f97\u9805\u76ee\u304c\u5897\u3048\u305f\u5834\u5408\u3067\u3082\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5074\u3067\u8a2d\u5b9a\u5909\u66f4\u4e0d\u8981\u3067\u3059\u3002\u30ac\u30f3\u30ac\u30f3\u76e3\u8996\u9805\u76ee\u306e\u8ffd\u52a0\u3084\u30eb\u30fc\u30bf\u306e\u53f0\u6570\u3092\u5897\u3084\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u8996\u899a\u5316\u30c4\u30fc\u30eb\u306fGrafana\u3092\u4f7f\u3063\u3066\u3001\u8868\u793a\u6642\u9593\u306e\u5909\u66f4\u3084\u4e00\u5ea6\u306b\u8907\u6570\u306e\u9805\u76ee\u3092\u8868\u793a\u306a\u3069\u304c\u3067\u304d\u307e\u3059\u3002\u30c0\u30a4\u30ca\u30df\u30c3\u30af\u306b\u6642\u9593\u3092\u5909\u66f4\u3067\u304d\u3001\u304b\u3063\u3053\u826f\u304f\u8868\u793a\u3067\u304d\u307e\u3059\u3002\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30ea\u30bd\u30fc\u30b9\u306e\u5024\u53d6\u5f97\u306fSNMP\u304c\u6a19\u6e96\u7684\u3067\u3059\u304c\u3001\u4eca\u56de\u306fSSH\u304b\u3089CLI\u3067show\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3001\u305d\u306e\u7d50\u679c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059\u3002\u60f3\u5b9a\u306fSNMP\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u5024\u3084SNMP\u3067\u304d\u306a\u3044\u74b0\u5883\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n# \u4ed5\u7d44\u307f\n\u30c7\u30fc\u30bf\u53d6\u5f97\u30fb\u4fdd\u5b58\u30fb\u8868\u793a\u306f\u4e0b\u8a18\u306e\u4ed5\u7d44\u307f\u3067\u5b9f\u73fe\u3057\u307e\u3059\u3002\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-04-12 7.35.31.png](https://qiita-image-store.s3.amazonaws.com/0/12026/162387c7-f875-6929-e1e7-108225057a69.png)\n\n\n# \u6e96\u5099\n\u4eca\u56de\u306fDockerHub\u4e0a\u306e\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066InfluxDB\u3068Grafana\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n- [Ubuntu](http://www.ubuntu.com/) 14.04.04 LTS\n- [Docker](https://www.docker.com/) v1.6.2\n- [tutum/influxdb](https://hub.docker.com/r/tutum/influxdb/) v0.10\n- [grafana/grafana](https://hub.docker.com/r/grafana/grafana/) v3.0.0-beta1\n- Ruby 2.2.4\n    - clockwork 1.2.0\n    - expect4r 0.0.11\n    - influxdb 0.2.3\n- Cisco VIRL\uff1a\u30eb\u30fc\u30bf\n\n\u203bGrafana v3.0.0-beta1\u304cInfluxDB v0.11\u4ee5\u964d\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u4eca\u56de\u306fInfluxDB v0.10\u3092\u5229\u7528\u3057\u307e\u3059\u3002\n\n# \u30eb\u30fc\u30bf\u306e\u6e96\u5099\nCisco VIRL\u3067\u4e0b\u8a18\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002\u64ec\u4f3c\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u6d41\u3059\u305f\u3081\u3001\u4e21\u7aef\u306blxc-iperf-1/2\u9593\u3067iperf\u3067\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u3092\u6d41\u3057\u3066\u3044\u307e\u3059\u3002\n![VM Maestro _031.png](https://qiita-image-store.s3.amazonaws.com/0/12026/e42eb4b5-9aff-f08e-46ac-4776b662595f.png)\n\n# Ubuntu/Docker\u306e\u6e96\u5099\nInfluxDB\u3068Grafana\u3092Docker\u4e0a\u3067\u52d5\u304b\u3059\u305f\u3081\u3001Docker\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002Ubuntu14.04\u3067\u63d0\u4f9b\u3055\u308c\u3066\u3044\u308bdocker.io\u30d1\u30c3\u30b1\u30fc\u30b8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u30d0\u30fc\u30b8\u30e7\u30f3\u306fv1.6.2\u3067\u3059\u3002\n\n```\n$ cat /etc/lsb-release \nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.4 LTS\"\n$ sudo apt install docker.io\n```\n\n# InfluxDB\u306e\u6e96\u5099\nInfluxDB\u306f\u6642\u7cfb\u5217\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u3059\u3002\u30b9\u30ad\u30fc\u30de\u30ec\u30b9\u306e\u305f\u3081\u3001\u52d5\u7684\u306b\u4fdd\u5b58\u3059\u308b\u9805\u76ee\u3092\u5897\u3084\u3057\u305f\u308a\u3067\u304d\u307e\u3059\u3002\n\u4eca\u56de\u306fInfluxDB v0.10\u3092DockerHub\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3063\u3066\u5229\u7528\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306f\uff04HOME/influxdb\u306b\u4fdd\u5b58\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002InfluxDB\u306fTCP\u30dd\u30fc\u30c88083,8086\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002TCP8083\u306fWeb\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3001TCP8086\u306fAPI\u306e\u30dd\u30fc\u30c8\u3067\u3059\u3002\n\n```\n# InfluxDB v0.10\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\n$ sudo docker pull tutum/influxdb:0.10\n\n# InfluxDB\u306e\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\n$ sudo docker run -d --name=influxdb --volume=$HOME/influxdb:/data -p 8083:8083 -p 8086:8086 tutum/influxdb:0.10\n\n# InfluxDB\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\n$ sudo docker ps\nCONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS              PORTS                                            NAMES\ncb5e24f3065a        tutum/influxdb:0.10   \"/run.sh\"           4 minutes ago       Up 4 minutes        0.0.0.0:8083->8083/tcp, 0.0.0.0:8086->8086/tcp   influxdb            \n\n# \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u305f\u3044\u5834\u5408\u306b\u5b9f\u884c\n$ sudo docker stop influxdb\n\n# \u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\n$ sudo docker start influxdb\n```\n\n## InfluxDB\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\n\n\u7d9a\u3044\u3066\u3001Web\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u304b\u3089InfluxDB\u4e0a\u3067\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\u4eca\u56de\u306ftraffic1\u3068\u3044\u3046\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3067\u30014\u9031\u9593\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\n\nDocker\u30db\u30b9\u30c8\u306eTCP\u30dd\u30fc\u30c88083\u3092Web\u30d6\u30e9\u30a6\u30b6\u3067\u8868\u793a\u3057\u3001\u4e0b\u8a18\u306e\u30af\u30a8\u30ea\u3092\u767a\u884c\u3057\u3001\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\u3068\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\n```\n# \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u4f5c\u6210\nCREATE DATABASE traffic1\n# \u4f5c\u6210\u6e08\u307f\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u78ba\u8a8d\nSHOW DATABASES\n\n# \u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30dd\u30ea\u30b7\u30fctraffic\u3092\u8a2d\u5b9a\u30014\u9031\u9593\u4fdd\u5b58\u3059\u308b\nCREATE RETENTION POLICY traffic ON traffic1 DURATION 4w REPLICATION 1 DEFAULT\n# \u30dd\u30ea\u30b7\u30fc\u306e\u78ba\u8a8d\nSHOW RETENTION POLICIES ON \"traffic1\"\n```\n\n\u4eca\u56de\u306f192.168.122.103\u306eDocker\u30db\u30b9\u30c8\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u305f\u3081\u3001Web\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306fhttp://192.168.122.103:8083/ \u3068\u306a\u308a\u307e\u3059\u3002Web\u30d6\u30e9\u30a6\u30b6\u3067Web\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3092\u958b\u304d\u767a\u884c\u3057\u305f\u3044\u30af\u30a8\u30ea\u3092\u300cQuery\u300d\u30d5\u30a9\u30fc\u30e0\u306b\u5165\u529b\u3057\u3001Enter\u3067\u78ba\u5b9a\u3057\u307e\u3059\u3002\u554f\u984c\u306a\u3051\u308c\u3070\u3001Success!\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_001.png](https://qiita-image-store.s3.amazonaws.com/0/12026/2169c772-8ca7-1f23-d0f3-738d0de91fa1.png)\n\n\u4e0a\u8a18\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4f5c\u6210\u3068\u30dd\u30ea\u30b7\u30fc\u3092\u8a2d\u5b9a\u3059\u308b\u3068\u3001\u4e0b\u8a18\u306e\u3068\u304a\u308a\u3068\u306a\u308a\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_002.png](https://qiita-image-store.s3.amazonaws.com/0/12026/3c387e22-71ec-14d1-a169-697440552636.png)\n\n\n# \u30c7\u30fc\u30bf\u53d6\u5f97\u7528\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\n\u4eca\u56de\u306fSNMP\u3092\u4f7f\u308f\u305a\u306b\u624b\u88fd\u30b9\u30af\u30ea\u30d7\u30c8\u3067\u30eb\u30fc\u30bf\u306bSSH\u3057\u3066\u3001\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\u60f3\u5b9a\u3068\u3057\u3066\u306fSNMP\u3067\u306f\u53d6\u5f97\u3067\u304d\u306a\u3044\u30e1\u30c8\u30ea\u30af\u30b9\u3084\u3001\u305d\u3082\u305d\u3082SNMP\u3067\u304d\u306a\u3044\u30eb\u30fc\u30bf\u306b\u5bfe\u3057\u3066\u3001CLI\u304b\u3089\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066\u3001\u5024\u3092\u4fdd\u5b58\u3059\u308b\u65b9\u6cd5\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nCisco\u30eb\u30fc\u30bf\u306bSSH\u3057\u3001show interface\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306ftraffic1\u3067\u3001SQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u8a00\u3046\u3044\u308f\u3086\u308b\u30c6\u30fc\u30d6\u30eb\u540d\u306fcisco_showint\u3068\u3057\u3066\u3044\u3057\u307e\u3059\u3002InfluxDB\u3067\u306f\u3001\u30c6\u30fc\u30d6\u30eb\u540d\u306f\u30b7\u30ea\u30fc\u30ba\u540d\u3068\u8a00\u308f\u308c\u307e\u3059\u3002\n\nshow interface\u304b\u3089\u6b63\u898f\u8868\u73fe\u3092\u5229\u7528\u3057\u3066\u4e0b\u8a18\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u62bd\u51fa\u3057\u307e\u3059\u3002\u62bd\u51fa\u3057\u305f\u7d50\u679c\u306f\u3001\u30db\u30b9\u30c8\u540d\u3068\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u540d\u3092\u7d44\u307f\u5408\u308f\u305b\u305fport\u3068\u3044\u3046\u30bf\u30b0\u3092\u3064\u3051\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u4fdd\u5b58\u3057\u307e\u3059\u3002\n\n- interface: \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u540d\n- out_drops: \u9001\u4fe1\u30c9\u30ed\u30c3\u30d7\u6570\n- in_packets: \u53d7\u4fe1\u30d1\u30b1\u30c3\u30c8\u6570\n- in_bytes: \u53d7\u4fe1\u30d0\u30a4\u30c8\u6570\n- in_errors: \u53d7\u4fe1\u30a8\u30e9\u30fc\u30d1\u30b1\u30c3\u30c8\u6570\n- out_packets: \u9001\u4fe1\u30d1\u30b1\u30c3\u30c8\u6570\n- out_bytes: \u9001\u4fe1\u30d0\u30a4\u30c8\u6570\n- out_errors: \u9001\u4fe1\u30a8\u30e9\u30fc\u30d1\u30b1\u30c3\u30c8\u6570\n- lost_carriers: Ethernet\u30ad\u30e3\u30ea\u30a2\u4fe1\u53f7\u306e\u55aa\u5931\u56de\u6570\n\nexpect4r\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u3001Cisco\u30eb\u30fc\u30bf\u306bSSH\u3057\u3066\u3044\u307e\u3059\u3002\u8a73\u7d30\u306f[Ruby\u306eexpect4r\u3067Cisco\u30eb\u30fc\u30bf\u306bTelnet/SSH\u3057\u3066\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3059\u308b](http://qiita.com/kooshin/items/27f2b9ed5c8896279bcf)\u3092\u898b\u3066\u304f\u3060\u3055\u3044\u3002\n\n```rb:collector.rb\nrequire 'expect4r'\nrequire 'awesome_print'\nrequire 'clockwork'\nrequire 'influxdb'\nrequire 'parallel'\nrequire 'yaml'\n\n# InfluxDB\u306e\u8a2d\u5b9a\ninfluxdb = InfluxDB::Client.new 'traffic1', host: '192.168.122.103'\n\n# \u53d6\u5f97\u5148\u30db\u30b9\u30c8\nhosts = YAML.load(<<EOL)\n- :hostname: iosv-1\n  :host: 172.16.1.205\n- :hostname: iosv-2\n  :host: 172.16.1.206\nEOL\n\n# show interface\u306e\u7d50\u679c\u304b\u3089\u5024\u3092\u629c\u304d\u51fa\u3059\u6b63\u898f\u8868\u73fe\nREGEX_SHOWINT = %r{\n  ^(?<interface>[\\w\\.\\/]+)\\ is\n  .+?\n  Total\\ output\\ drops:\\ (?<out_drops>\\d+)\n  .+?\n  (?<in_packets>\\d+)\\ packets\\ input,\\ (?<in_bytes>\\d+)\\ bytes\n  .+?\n  (?<in_errors>\\d+)\\ input\\ errors,\n  .+?\n  (?<out_packets>\\d+)\\ packets\\ output,\\ (?<out_bytes>\\d+)\\ bytes\n  .*?\n  (?<out_errors>\\d+)\\ output\\ errors,\n  .+?\n  (?<lost_carriers>\\d+)\\ lost\\ carrier\n}xm\n# \u4e0a\u8a18\u306e\u6b63\u898f\u8868\u73fe\u306f\u4e0b\u8a18\u306eshow interface\u306e\u7d50\u679c\u3092\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u5358\u4f4d\u306b\u62bd\u51fa\u3059\u308b\n# GigabitEthernet0/2 is up, line protocol is up \n#   Hardware is iGbE, address is fa16.3e59.cd19 (bia fa16.3e59.cd19)\n#   Description: to iosv-2\n#   Internet address is 10.0.0.9/30\n#   MTU 1500 bytes, BW 1000000 Kbit/sec, DLY 10 usec, \n#      reliability 255/255, txload 1/255, rxload 1/255\n#   Encapsulation ARPA, loopback not set\n#   Keepalive set (10 sec)\n#   Full Duplex, Auto Speed, link type is auto, media type is RJ45\n#   output flow-control is unsupported, input flow-control is unsupported\n#   ARP type: ARPA, ARP Timeout 04:00:00\n#   Last input 00:00:07, output 00:00:00, output hang never\n#   Last clearing of \"show interface\" counters never\n#   Input queue: 0/75/0/0 (size/max/drops/flushes); Total output drops: 842948\n#   Queueing strategy: fifo\n#   Output queue: 0/40 (size/max)\n#   5 minute input rate 115000 bits/sec, 171 packets/sec\n#   5 minute output rate 2092000 bits/sec, 172 packets/sec\n#      3475718 packets input, 286108879 bytes, 0 no buffer\n#      Received 0 broadcasts (0 IP multicasts)\n#      0 runts, 0 giants, 0 throttles \n#      0 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored\n#      0 watchdog, 0 multicast, 0 pause input\n#      3517278 packets output, 5302646275 bytes, 0 underruns\n#      0 output errors, 0 collisions, 3 interface resets\n#      0 unknown protocol drops\n#      0 babbles, 0 late collision, 0 deferred\n#      0 lost carrier, 0 no carrier, 0 pause output\n#      0 output buffer failures, 0 output buffers swapped out\n\nhosts.each do |host|\n  ios = Expect4r::Ios.new_ssh(\n    host: host[:host], user: 'cisco',\n    pwd: 'cisco', enable_password: 'cisco'\n  )\n  # 10\u79d2\u9593\u9694\u3067\u5b9a\u671f\u7684\u306b\u5b9f\u884c\u3059\u308b\n  Clockwork.every(10.seconds, \"#{host[:hostname]} collector\") do\n    ios.login\n\n    # Cisco\u30eb\u30fc\u30bf\u3067show interface\u3092\u5b9f\u884c\u3057\u3001\n    # \u6b63\u898f\u8868\u73fe\u3067\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u629c\u304d\u51fa\u3059\n    response = ios.exec('show interface').join.delete(\"\\r\")\n    response.scan(REGEX_SHOWINT) do\n      m = Regexp.last_match\n      data = {\n        values: {\n          out_drops:     m[:out_drops].to_i,\n          in_packets:    m[:in_packets].to_i,\n          in_bytes:      m[:in_bytes].to_i,\n          in_errors:     m[:in_errors].to_i,\n          out_packets:   m[:out_packets].to_i,\n          out_bytes:     m[:out_bytes].to_i,\n          out_errors:    m[:out_errors].to_i,\n          lost_carriers: m[:lost_carriers].to_i\n        },\n        tags: {\n          port: \"#{host[:hostname]} #{m[:interface]}\"\n        }\n      }\n\n      # InfluxDB\u306b\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u4fdd\u5b58\n      influxdb.write_point('cisco_showint', data)\n      ap data\n    end\n  end\nend\n```\n\n## \u30c7\u30fc\u30bf\u53d6\u5f97\u7528\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\n\n\u4e0a\u8a18\u306eRuby\u30b9\u30af\u30ea\u30d7\u30c8\u306f\u5b9a\u671f\u5b9f\u884c\u3059\u308b\u305f\u3081\u306bclockwork\u3092\u5229\u7528\u3057\u3066\u300110\u79d2\u9593\u9694\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash:\u5b9f\u884c\u7d50\u679c\n$ clockwork collector.rb \nI, [2016-04-10T11:30:36.846900 #1318]  INFO -- : Starting clock for 2 events: [ iosv-1 collector iosv-2  collector ]\nI, [2016-04-10T11:30:36.847066 #1318]  INFO -- : Triggering 'iosv-1 collector'\n{\n    :values => {\n            :out_drops => 0,\n           :in_packets => 744202,\n             :in_bytes => 45856886,\n            :in_errors => 0,\n          :out_packets => 780556,\n            :out_bytes => 126581158,\n           :out_errors => 0,\n        :lost_carriers => 1\n    },\n      :tags => {\n        :port => \"iosv-1 GigabitEthernet0/0\"\n    }\n}\n{\n    :values => {\n            :out_drops => 0,\n           :in_packets => 5049224,\n             :in_bytes => 7628494232,\n            :in_errors => 0,\n          :out_packets => 4034600,\n            :out_bytes => 332766793,\n           :out_errors => 0,\n        :lost_carriers => 1\n    },\n      :tags => {\n        :port => \"iosv-1 GigabitEthernet0/1\"\n    }\n}\n{\n    :values => {\n            :out_drops => 988441,\n           :in_packets => 4029369,\n             :in_bytes => 332510281,\n            :in_errors => 0,\n          :out_packets => 4080969,\n            :out_bytes => 6136203204,\n           :out_errors => 0,\n        :lost_carriers => 0\n    },\n      :tags => {\n        :port => \"iosv-1 GigabitEthernet0/2\"\n    }\n}\n```\n\n# InfluxDB\u3067\u30c7\u30fc\u30bf\u4fdd\u5b58\u7d50\u679c\u306e\u78ba\u8a8d\n\n\u30c7\u30fc\u30bf\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u304b\u3001InfluxDB\u306eWeb\u7ba1\u7406\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\u53f3\u4e0a\u304b\u3089\u5bfe\u8c61\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9traffic1\u3092\u9078\u629e\u3057\u3001\u4e0b\u8a18\u306e\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\nselect * from cisco_showint where port = 'iosv-1 GigabitEthernet0/1' order by desc\n```\n\n![InfluxDB - Admin Interface - Mozilla Firefox_004.png](https://qiita-image-store.s3.amazonaws.com/0/12026/223a5508-c4c0-af12-c711-c09c3d1950d2.png)\n\ncURL\u30b3\u30de\u30f3\u30c9\u3067\u30c7\u30fc\u30bf\u4e00\u89a7\u3092\u53d6\u5f97\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002API\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306fhttp://192.168.122.103:8086/query \u3068\u306a\u308a\u307e\u3059\u3002\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3068\u30af\u30a8\u30ea\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u7d50\u679c\u306fJSON\u3068\u306a\u308a\u307e\u3059\u3002\u8a73\u7d30\u306f[InfluxDB Querying Data](https://docs.influxdata.com/influxdb/v0.10/guides/querying_data/)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```bash\n$ curl -G \"http://192.168.122.103:8086/query?pretty=true\" --data-urlencode \"db=trffic1\" --data-urlencode \"q=SELECT * FROM cisco_showint WHERE port = 'iosv-1 GigabitEthernet0/1' order by desc limit 2\"\n{\n    \"results\": [\n        {\n            \"series\": [\n                {\n                    \"name\": \"cisco_showint\",\n                    \"columns\": [\n                        \"time\",\n                        \"in_bytes\",\n                        \"in_errors\",\n                        \"in_packets\",\n                        \"lost_carriers\",\n                        \"out_bytes\",\n                        \"out_drops\",\n                        \"out_errors\",\n                        \"out_packets\",\n                        \"port\"\n                    ],\n                    \"values\": [\n                        [\n                            \"2016-04-10T02:51:33Z\",\n                            7.628494232e+09,\n                            0,\n                            5.049224e+06,\n                            1,\n                            3.32786237e+08,\n                            0,\n                            0,\n                            4.034858e+06,\n                            \"iosv-1 GigabitEthernet0/1\"\n                        ],\n                        [\n                            \"2016-04-10T02:51:23Z\",\n                            7.628494232e+09,\n                            0,\n                            5.049224e+06,\n                            1,\n                            3.32786087e+08,\n                            0,\n                            0,\n                            4.034856e+06,\n                            \"iosv-1 GigabitEthernet0/1\"\n                        ]\n                    ]\n                }\n            ]\n        }\n    ]\n}\n```\n\n\n# Grafana\u306e\u6e96\u5099\n\u30d3\u30b8\u30e5\u30a2\u30e9\u30a4\u30bc\u30fc\u30b7\u30e7\u30f3\u30c4\u30fc\u30eb\u306eGrafana\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\u4eca\u56de\u306fv3.0.0\u306e\u6b63\u5f0f\u30ea\u30ea\u30fc\u30b9\u524d\u3060\u3063\u305f\u305f\u3081\u3001v3.0.0-beta1\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$HOME/grafana\u306b\u8a2d\u5b9a\u30c7\u30fc\u30bf\u3092\u4fdd\u5b58\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002TCP3000\u30dd\u30fc\u30c8\u3067\u7a3c\u50cd\u3057\u307e\u3059\u3002\n\n```\n# Grafana v3.0.0-beta1\u306e\u30b3\u30f3\u30c6\u30ca\u30a4\u30e1\u30fc\u30b8\u3092\u53d6\u5f97\n$ sudo docker pull grafana/grafana:3.0.0-beta1\n\n# Grafana\u306e\u30b3\u30f3\u30c6\u30ca\u8d77\u52d5\nsudo docker run -d --name=grafana --volume=$HOME/grafana/:/var/lib/grafana -p 3000:3000 grafana/grafana:3.0.0-beta1\n\n# InfluxDB\u3068Grafana\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\n$ sudo docker ps\nCONTAINER ID        IMAGE                         COMMAND             CREATED             STATUS              PORTS                                            NAMES\n813046bdf50e        grafana/grafana:3.0.0-beta1   \"/run.sh\"           6 seconds ago       Up 6 seconds        0.0.0.0:3000->3000/tcp                           grafana             \ncb5e24f3065a        tutum/influxdb:0.10           \"/run.sh\"           58 minutes ago      Up 58 minutes       0.0.0.0:8083->8083/tcp, 0.0.0.0:8086->8086/tcp   influxdb            \n\n# \u30b3\u30f3\u30c6\u30ca\u3092\u505c\u6b62\u3057\u305f\u3044\u5834\u5408\u306b\u5b9f\u884c\n$ sudo docker stop grafana\n\n# \u505c\u6b62\u3057\u305f\u30b3\u30f3\u30c6\u30ca\u3092\u8d77\u52d5\n$ sudo docker start grafana\n```\n\n## Grafana\u306b\u30ed\u30b0\u30a4\u30f3\nGrafana\u306e\u8a2d\u5b9a\u3092\u3059\u308b\u305f\u3081\u306b\u3001Web\u30d6\u30e9\u30a6\u30b6\u304b\u3089Grafana\u3092\u8868\u793a\u3057\u307e\u3059\u3002\nWeb\u30d6\u30e9\u30a6\u30b6\u3067http://192.168.122.103:3000 \u3092\u958b\u304f\u3068\u3001\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306f\u3001\u30e6\u30fc\u30b6\u540d\uff1aadmin\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\uff1aadmin\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_006.png](https://qiita-image-store.s3.amazonaws.com/0/12026/8efeac6c-b4de-abc6-ac55-6310e84c9613.png)\n\n## Grafana\u3067\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u6307\u5b9a\n\u30ed\u30b0\u30a4\u30f3\u5f8c\u3001\u6700\u521d\u306b\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u306bInfluxDB\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n\u5de6\u4e0a\u306eGrafana\u30a2\u30a4\u30b3\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30e1\u30cb\u30e5\u30fc\u304c\u8868\u793a\u3055\u308c\u305f\u3089\u3001Data Sources\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Data Sources\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_007.png](https://qiita-image-store.s3.amazonaws.com/0/12026/a7fdda70-dc19-7e57-6175-d6ab8484d2e0.png)\n\nData Sources\u753b\u9762\u3067Add data source\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_008.png](https://qiita-image-store.s3.amazonaws.com/0/12026/9137b767-bc2b-5389-fab1-dc56c8989e6b.png)\n\nAdd data source\u753b\u9762\u3067\u4e0b\u8a18\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u5165\u529b\u3057\u307e\u3059\u3002\n\n\n\n- Name: traffic1  \u203b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u540d\u3068\u540c\u3058\u540d\u524d\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n- Default: ON\n- Type: InfluxDB  \u203b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306bInfluxDB\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3059\u308b\u3068\u5165\u529b\u9805\u76ee\u304cInfluxDB\u306b\u5408\u308f\u305b\u3066\u5909\u5316\u3057\u307e\u3059\n- Http Settings\n    - Url: http://192.168.122.130:8086 \u203bInfluxDB\u306eTCP8086\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n    - Access: direct \u203b\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3088\u3046\u306b\u6307\u5b9a\u3057\u307e\u3059\u3002\n- InfluxDB Details\n    - Database: traffic1 \u203bInfluxDB\u3067\u4f5c\u6210\u3057\u305f\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u6307\u5b9a\n    - User: admin  \u203b\u5165\u529b\u5fc5\u9808\u9805\u76ee\u306e\u305f\u3081\u30c0\u30df\u30fc\u3067\u5165\u529b\n    - Password: admin  \u203b\u5165\u529b\u5fc5\u9808\u9805\u76ee\u306e\u305f\u3081\u30c0\u30df\u30fc\u3067\u5165\u529b\n\nAdd\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001\u30c7\u30fc\u30bf\u30bd\u30fc\u30b9\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_009.png](https://qiita-image-store.s3.amazonaws.com/0/12026/df406215-d293-4e13-43f5-50ca57649455.png)\n\n\u8ffd\u52a0\u5f8c\u306b\u30c6\u30b9\u30c8\u63a5\u7d9a\u3057\u3001\u554f\u984c\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001Test Connection\u30dc\u30bf\u30f3\u3092\u30af\u30ea\u30c3\u30af\u3057\u3001Success\u3068\u8868\u793a\u304c\u3067\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u554f\u984c\u306a\u3051\u308c\u3070\u3001Save\u30dc\u30bf\u30f3\u3067\u4fdd\u5b58\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_010.png](https://qiita-image-store.s3.amazonaws.com/0/12026/44dff8e1-ab35-8e3b-e588-c19d42355c6a.png)\n\n## Grafana\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u4f5c\u6210\nGrafana\u30a2\u30a4\u30b3\u30f3 => Dashboards => New\u304b\u3089\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u4f5c\u6210\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n![Screenshot from 2016-04-10 13:06:32.png](https://qiita-image-store.s3.amazonaws.com/0/12026/e7f477d7-dfd9-5c1b-49fb-6b35f9ae6752.png)\n\n\u65b0\u3057\u3044\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4f5c\u6210\u3057\u305f\u3089\u3001\u30b0\u30e9\u30d5\u30d1\u30cd\u30eb\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002ROW\u30a2\u30a4\u30b3\u30f3 => Add Panel => Graph\u304b\u3089\u30b0\u30e9\u30d5\u30d1\u30cd\u30eb\u4f5c\u6210\u753b\u9762\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n![\u30ef\u30fc\u30af\u30b9\u30da\u30fc\u30b9 1_020.png](https://qiita-image-store.s3.amazonaws.com/0/12026/ae851f4f-2668-950b-58b5-cc6a422bf0f3.png)\n\n\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u8ffd\u52a0\u306f\u4e0b\u8a18\u306eYouTube\u306e\u52d5\u753b\u306e\u3068\u304a\u308a\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n[![Grafana\u306e\u8a2d\u5b9a](https://qiita-image-store.s3.amazonaws.com/0/12026/29d8d40b-caab-5292-593c-996df83ac8b0.png)](http://www.youtube.com/watch?v=KF3DlE8mwho)\n\u203b\u8ffd\u8a18\uff1a\u52d5\u753b\u3067\u306fGraph Metrics\u3067fill(null)\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001fill(none)\u306b\u5909\u66f4\u304c\u5fc5\u8981\u3067\u3059\u3002fill(null)\u3067\u8868\u793a\u6642\u9593\u3092\u5909\u66f4\u3057\u305f\u5834\u5408\u3001\u3046\u307e\u304f\u8868\u793a\u3055\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\nGraph General\u306e\u8a2d\u5b9a\u3002\u30b0\u30e9\u30d5\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_023.png](https://qiita-image-store.s3.amazonaws.com/0/12026/b68b29b0-52ee-22ad-7c62-06d464cb6125.png)\n\nGraph Metrics\u306e\u8a2d\u5b9a\u3002\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u9078\u629e\u3057\u3001\u8868\u793a\u5bfe\u8c61\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30c8\u30e9\u30d5\u30a3\u30c3\u30af\u306e\u5834\u5408\u3001\u7d2f\u7a4d\u30ab\u30a6\u30f3\u30bf\u3068\u306a\u308b\u305f\u3081\u3001\u76f4\u524d\u306e\u5024\u3068\u5dee\u5206\u3092\u53d6\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002non_negative_derivative(1s)\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3001\u76f4\u524d\u3068\u306e\u5dee\u5206\u306e1\u79d2\u9593\u9694\u306e\u5e73\u5747\u3092\u30b0\u30e9\u30d5\u306b\u30d7\u30ed\u30c3\u30c8\u3057\u307e\u3059\u3002\u305f\u3060\u3057\u3001\u30e9\u30c3\u30d7\u30a2\u30e9\u30a6\u30f3\u30c9\u306f\u8003\u616e\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u5024\u304c\u30d0\u30a4\u30c8\u306e\u305f\u3081\u3001\u30d3\u30c3\u30c8\u306b\u5909\u63db\u3059\u308b\u305f\u3081\u306bmath(*8)\u95a2\u6570\u3092\u4f7f\u7528\u3057\u3066\u30018\u500d\u3057\u3066\u3044\u307e\u3059\u3002GROUP BY\u3067fill(none)\u3092\u9078\u629e\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_029.png](https://qiita-image-store.s3.amazonaws.com/0/12026/f6a6a266-89e1-1531-b47f-b74fe7407994.png)\n\nGraph Axes\u306e\u8a2d\u5b9a\u3002X-Y\u8ef8\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002Unit\uff08\u5358\u4f4d\uff09\u3092bits/sec\u3001Y-Min\u30920\u3001Right Y\u3092OFF\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_026.png](https://qiita-image-store.s3.amazonaws.com/0/12026/5f47d332-d035-8e37-c1ec-c4b4ca7a2858.png)\n\nGraph Legend\u306e\u8a2d\u5b9a\u3002\u5224\u4f8b\u306e\u8a2d\u5b9a\u3092\u3057\u307e\u3059\u3002\u5224\u4f8b\u306b\u6700\u5927\u3068\u73fe\u5728\u306e\u5024\u3092\u8868\u793a\u3059\u308b\u3088\u3046\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n![\u7bc4\u56f2\u3092\u9078\u629e_027.png](https://qiita-image-store.s3.amazonaws.com/0/12026/6fb26483-240d-934c-bbec-da36fcb11c8c.png)\n\n\u6700\u5f8c\u306b\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3092\u4fdd\u5b58\u3057\u307e\u3059\u3002\n![Screenshot from 2016-04-10 13:44:35.png](https://qiita-image-store.s3.amazonaws.com/0/12026/889d44d3-edf1-983e-a3e7-46608c2e2a05.png)\n\n\u4eca\u56de\u306f\u5fc5\u8981\u6700\u5c0f\u9650\u306e\u8a2d\u5b9a\u306e\u307f\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\u4eca\u56de\u8aac\u660e\u3057\u3066\u3044\u306a\u3044Templating\u3092\u4f7f\u3046\u3053\u3068\u3067\u3001\u52d5\u7684\u306b\u30dd\u30fc\u30c8\u3092\u9078\u629e\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u8a73\u3057\u304f\u306f[Using InfluxDB + Grafana to Display Network Statistics](http://lkhill.com/using-influxdb-grafana-to-display-network-statistics/)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u53c2\u8003\u6587\u732e\n- [Using InfluxDB + Grafana to Display Network Statistics](http://lkhill.com/using-influxdb-grafana-to-display-network-statistics/)\n- [InfluxDB \u3092 Ruby \u304b\u3089\u64cd\u4f5c\u3059\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb](http://inokara.hateblo.jp/entry/2014/06/01/092905)\n- [InfluxDB\u3068Grafana\u3092\u4f7f\u3063\u3066\u30b5\u30fc\u30d0\u30fc\u30ea\u30bd\u30fc\u30b9\u306e\u53ef\u8996\u5316\u3092\u3059\u308b - Qiita](http://qiita.com/airtoxin/items/806e0bfbdecba115b3be)\n- [InfluxDB\u3068Grafana\u3068fluentd\u3067\u3001twitter\u30c7\u30fc\u30bf\u306e\u30ea\u30a2\u30eb\u30bf\u30a4\u30e0\u96c6\u8a08\u30fb\u53ef\u8996\u5316 - Qiita](http://qiita.com/ixixi/items/a56ea15b582c7f014a57)\n- [Network Interface Traffic Calculation #363 - GitHub](https://github.com/grafana/grafana/issues/363)\n- [SNMP Counter calculation using InfluxDB #844 - GitHub](https://github.com/grafana/grafana/issues/844)\n", "tags": ["grafana", "influxdb", "Network", "Cisco", "Ruby"]}