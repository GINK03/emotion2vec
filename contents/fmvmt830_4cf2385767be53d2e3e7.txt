{"tags": ["UICollectionView", "iOS"], "context": " More than 1 year has passed since last update.registerClass:forCellWithReuseIdentifier:\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u30d8\u30c3\u30c0\u30fc\u3084\u30d5\u30c3\u30bf\u30fc\u3092\u4f7f\u3046\u306a\u3089\nregisterClass:forSupplementaryViewOfKind:withReuseIdentifier:\u3092\u4f7f\u3044\u307e\u3059\u3002\u305d\u306e\u6642\u306f flowLayout.headerReferenceSize\u306b\u5024\u3092\u30bb\u30c3\u30c8\u3057\u306a\u3044\u3068\u3001collectionView:viewForSupplementaryElementOfKind:atIndexPath:\u304c\u547c\u3070\u308c\u307e\u305b\u3093\u3002\n\nCollectinViewController.h\n#import <UIKit/UIKit.h>\n\n@interface CustomCollectionSectionView : UICollectionReusableView\n@property (nonatomic, readonly) UILabel *titleLabel;\n@end\n\n\n\n@interface CollectionViewController : UIViewController <UICollectionViewDelegate, UICollectionViewDataSource>\n\n@property (retain, nonatomic) UICollectionViewFlowLayout *flowLayout;\n@property (retain, nonatomic) UICollectionView *collectionView;\n\n@end\n\n\n\nCollectionViewController.m\n#import \"CollectionViewController.h\"\n\n@implementation CustomCollectionSectionView\n-(id)initWithFrame:(CGRect)frame {\n    self = [super initWithFrame:frame];\n    if (self) {\n        self.backgroundColor = [UIColor whiteColor];\n        CGRect rect = frame;\n        rect.origin.x = 8;\n        rect.origin.y = 0;\n        _titleLabel = [[UILabel alloc] initWithFrame:rect];\n        [self addSubview:_titleLabel];\n    }\n    return self;\n}\n@end\n\n\n@interface CollectionViewController ()\n\n@end\n\n@implementation CollectionViewController\nstatic NSString * const cellID = @\"cell\";\nstatic NSString * const headerID = @\"header\";\n\n- (void)viewDidLoad {\n    [super viewDidLoad];\n    self.flowLayout = [[UICollectionViewFlowLayout alloc]init];\n    self.flowLayout.itemSize = CGSizeMake(100, 100);\n    self.flowLayout.sectionInset = UIEdgeInsetsMake(16, 16, 32, 16);\n    self.flowLayout.headerReferenceSize = CGSizeMake(100, 30);\n//  self.flowLayout.minimumLineSpacing = 16;\n//  self.flowLayout.minimumInteritemSpacing = 16;\n\n    self.collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) collectionViewLayout:self.flowLayout];\n    [self.view addSubview:self.collectionView];\n    self.collectionView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;\n    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:cellID];\n    [self.collectionView registerClass:[CustomCollectionSectionView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:headerID];\n    self.collectionView.delegate = self;\n    self.collectionView.dataSource = self;\n}\n\n\n- (void)didReceiveMemoryWarning {\n    [super didReceiveMemoryWarning];\n}\n\n\n#pragma mark - UICollectionViewDelegate\n-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {\n    return 3;\n}\n\n\n-(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {\n\n    if (kind == UICollectionElementKindSectionHeader) {\n        CustomCollectionSectionView *headerView = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:headerID forIndexPath:indexPath];\n        NSArray *titles = @[@\"Red\",@\"Blue\",@\"Yellow\"];\n        headerView.titleLabel.text = titles[ indexPath.section ];\n        return headerView;\n    } else {\n        return nil;\n    }\n}\n\n\n-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {\n    int nums[] = {8,5,10};\n    return nums[section];\n}\n\n\n#pragma mark - UICollectionViewDataSource\n- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {\n\n    UICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellID forIndexPath:indexPath];\n    NSArray *colors = @[[UIColor redColor], [UIColor blueColor], [UIColor yellowColor]];\n    cell.backgroundColor = colors[ indexPath.section ];\n    return cell;\n}\n\n\n-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {\n    NSLog(@\"section = %d, row = %d\", indexPath.section, indexPath.row);\n}\n@end\n\n\nregisterClass:forCellWithReuseIdentifier:\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u30d8\u30c3\u30c0\u30fc\u3084\u30d5\u30c3\u30bf\u30fc\u3092\u4f7f\u3046\u306a\u3089\nregisterClass:forSupplementaryViewOfKind:withReuseIdentifier:\u3092\u4f7f\u3044\u307e\u3059\u3002\u305d\u306e\u6642\u306f flowLayout.headerReferenceSize\u306b\u5024\u3092\u30bb\u30c3\u30c8\u3057\u306a\u3044\u3068\u3001collectionView:viewForSupplementaryElementOfKind:atIndexPath:\u304c\u547c\u3070\u308c\u307e\u305b\u3093\u3002\n\n\n```objc:CollectinViewController.h\n#import <UIKit/UIKit.h>\n\n@interface CustomCollectionSectionView : UICollectionReusableView\n@property (nonatomic, readonly) UILabel *titleLabel;\n@end\n\n\n\n@interface CollectionViewController : UIViewController <UICollectionViewDelegate, UICollectionViewDataSource>\n\n@property (retain, nonatomic) UICollectionViewFlowLayout *flowLayout;\n@property (retain, nonatomic) UICollectionView *collectionView;\n\n@end\n```\n\n```objc:CollectionViewController.m\n#import \"CollectionViewController.h\"\n\n@implementation CustomCollectionSectionView\n-(id)initWithFrame:(CGRect)frame {\n\tself = [super initWithFrame:frame];\n\tif (self) {\n\t\tself.backgroundColor = [UIColor whiteColor];\n\t\tCGRect rect = frame;\n\t\trect.origin.x = 8;\n\t\trect.origin.y = 0;\n\t\t_titleLabel = [[UILabel alloc] initWithFrame:rect];\n\t\t[self addSubview:_titleLabel];\n\t}\n\treturn self;\n}\n@end\n\n\n@interface CollectionViewController ()\n\n@end\n\n@implementation CollectionViewController\nstatic NSString * const cellID = @\"cell\";\nstatic NSString * const headerID = @\"header\";\n\n- (void)viewDidLoad {\n\t[super viewDidLoad];\n\tself.flowLayout = [[UICollectionViewFlowLayout alloc]init];\n\tself.flowLayout.itemSize = CGSizeMake(100, 100);\n\tself.flowLayout.sectionInset = UIEdgeInsetsMake(16, 16, 32, 16);\n\tself.flowLayout.headerReferenceSize = CGSizeMake(100, 30);\n//\tself.flowLayout.minimumLineSpacing = 16;\n//\tself.flowLayout.minimumInteritemSpacing = 16;\n\t\n\tself.collectionView = [[UICollectionView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) collectionViewLayout:self.flowLayout];\n\t[self.view addSubview:self.collectionView];\n\tself.collectionView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;\n\t[self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:cellID];\n\t[self.collectionView registerClass:[CustomCollectionSectionView class] forSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:headerID];\n\tself.collectionView.delegate = self;\n\tself.collectionView.dataSource = self;\n}\n\n\n- (void)didReceiveMemoryWarning {\n\t[super didReceiveMemoryWarning];\n}\n\n\n#pragma mark - UICollectionViewDelegate\n-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {\n\treturn 3;\n}\n\n\n-(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {\n\t\n\tif (kind == UICollectionElementKindSectionHeader) {\n\t\tCustomCollectionSectionView *headerView = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:headerID forIndexPath:indexPath];\n\t\tNSArray *titles = @[@\"Red\",@\"Blue\",@\"Yellow\"];\n\t\theaderView.titleLabel.text = titles[ indexPath.section ];\n\t\treturn headerView;\n\t} else {\n\t\treturn nil;\n\t}\n}\n\n\n-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {\n\tint nums[] = {8,5,10};\n\treturn nums[section];\n}\n\n\n#pragma mark - UICollectionViewDataSource\n- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {\n\t\n\tUICollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:cellID forIndexPath:indexPath];\n\tNSArray *colors = @[[UIColor redColor], [UIColor blueColor], [UIColor yellowColor]];\n\tcell.backgroundColor = colors[ indexPath.section ];\n\treturn cell;\n}\n\n\n-(void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {\n\tNSLog(@\"section = %d, row = %d\", indexPath.section, indexPath.row);\n}\n@end\n```\n"}