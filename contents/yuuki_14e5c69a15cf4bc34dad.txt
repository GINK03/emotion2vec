{"context": "\u5fd8\u308c\u3084\u3059\u3044\u3053\u3068\u3092\u4e2d\u5fc3\u306b\u66f8\u3044\u3066\u307e\u3059\u3002\n\n\u30e6\u30fc\u30b6\n\u8a72\u5f53\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 : https://dev.mysql.com/doc/refman/5.6/en/account-management-sql.html\n\n\u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u30fb\u524a\u9664\n-- \u8ffd\u52a0\nCREATE USER\n    'user_name'@'host' IDENTIFIED BY 'password',\n    'user_name'@'host' IDENTIFIED BY 'password', ...;\n-- \u78ba\u8a8d\nSELECT User, Host FROM mysql.user;\n-- \u524a\u9664\nDROP USER\n    'user1'@'host2',\n    'user2'@'host2', ...;\n\n\n\u30e6\u30fc\u30b6\u306e\u4e00\u89a7\nSELECT User, Host FROM mysql.user;\n\n\n\u6a29\u9650\u3092\u4ed8\u4e0e\u30fb\u5265\u596a\n-- \u4ed8\u4e0e\nGRANT '\u6a29\u9650' ON '\u30ec\u30d9\u30eb' TO '\u30e6\u30fc\u30b6';\n-- \u78ba\u8a8d\nSHOW GRANTS FOR '\u30e6\u30fc\u30b6';\n-- \u5265\u596a\nREVOKE '\u6a29\u9650' ON '\u30ec\u30d9\u30eb' FROM '\u30e6\u30fc\u30b6';\n\n\u6a29\u9650\u306fSELECT, INSERT, UPDATE, DELETE, CREATE, DROP\u306a\u3069\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\n\n\u65e2\u5b58\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u30fb\u8ffd\u52a0\u30fb\u524a\u9664\nALTER TABLE 'table_name'\nPARTITION BY RANGE COLUMNS(timestamp) (\nPARTITION p_201501 VALUES LESS THAN ('2015-01-01 00:00:00'),\nPARTITION p_201502 VALUES LESS THAN ('2015-02-01 00:00:00')\n);\n\nALTER TABLE 'table_name' ADD PARTITION (\nPARTITION p_future VALUES LESS THAN (MAXVALUE)\n);\n\nALTER TABLE 'table_name' DROP PARTITION p_201501, p_201502;\n\nhttps://dev.mysql.com/doc/refman/5.5/en/alter-table.html\nhttps://dev.mysql.com/doc/refman/5.5/en/alter-table-partition-operations.html\n\n\u305d\u306e\u4ed6\n\nREORGANIZE PARTITION \u3059\u308b\u306b\u3082 ADD PARTITION \u3059\u308b\u306b\u3082\u30c6\u30fc\u30d6\u30eb\u30ed\u30c3\u30af\u304c\u907f\u3051\u3089\u308c\u306a\u3044\u306e\u3067\u3001\u4e8b\u524d\u306b\u307e\u3068\u3081\u3066\u30ac\u30ac\u30c3\u3068\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u3063\u3061\u3083\u3046\u5834\u5408\u304c\u591a\u3044\u307f\u305f\u3044\u3067\u3059\u306d\u3002\nhttp://blog.livedoor.jp/sasata299/archives/51882315.html\n\n\n\u6ce8\u610f\u70b9\n\u524a\u9664\u5bfe\u8c61\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u524d\u5f8c\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3059\u308b\u3068\u3001\u9045\u304f\u306a\u308b\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3002\nhttp://lab.adn-mobasia.net/?p=182\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f7f\u7528\u72b6\u6cc1\u3092\u78ba\u8a8d\nSELECT TABLE_SCHEMA, TABLE_NAME, PARTITION_NAME, PARTITION_ORDINAL_POSITION, TABLE_ROWS\nFROM INFORMATION_SCHEMA.PARTITIONS\nWHERE TABLE_NAME='table_name';\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u5217\nDESC 'table_name';\n\nhttps://dev.mysql.com/doc/refman/5.6/ja/describe.html\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u8a73\u7d30\u60c5\u5831\u3092\u5f97\u308b\n-- \u73fe\u5728\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306e\u5168\u3066\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u3064\u3044\u3066\u8868\u793a\nSHOW TABLE STATUS \\G\n-- \u6307\u5b9a\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306e\u307f\u8868\u793a\nSHOW TABLE STATUS LIKE 'table_name' \\G\n\n\u30c7\u30fc\u30d6\u30eb\u306e\u30b5\u30a4\u30ba\u3084\u3001auto_incliment\u306e\u73fe\u5728\u306e\u5024\u306a\u3069\u304c\u8abf\u3079\u3089\u308c\u308b\u3002\n\n\u6ce8\u610f\u70b9\nInnoDB\u3067\u306f\u884c\u6570\u306b\u95a2\u3059\u308b\u30c7\u30fc\u30bf\u306f\u304b\u306a\u308a\u30a2\u30d0\u30a6\u30c8\u306a\u5024\u306a\u306e\u3067\u3042\u307e\u308a\u4fe1\u7528\u3057\u306a\u3044\u307b\u3046\u304c\u3044\u3044\u3002\n\nSSL\n\n\u9375\u3092\u4f5c\u308b\n\u6ce8\u610f:\n\n\u9375\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306b\u306f\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002mysql\u3068\u7ba1\u7406\u8005\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u304b\u3089\u9375\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u72b6\u614b\u306f\u597d\u307e\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n\u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u3068\u304dCN\u306b\u3001\u4e00\u610f\u306a\u30db\u30b9\u30c8\u540d\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002MySQL\u306fCA\u3068\u540c\u3058CN\u306e\u8a3c\u660e\u66f8\u3067\u306f\u3001SSL\u63a5\u7d9a\u304c\u51fa\u6765\u307e\u305b\u3093\u3002\n\n\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u540d:\n\nca: \u8a8d\u8a3c\u5c40\u306e\u5f79\u5272\u3092\u3059\u308b\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3002\u624b\u5143\u306ePC\u306e\u3053\u3068\u3060\u3068\u601d\u3063\u3066\u304f\u3060\u3055\u3044\ndb: MySQL\u304c\u7a3c\u50cd\u3059\u308b\u30b5\u30fc\u30d0\nclient: MySQL\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u30b5\u30fc\u30d0\n\n\u5909\u6570:\n\nCA_HOST: CA(\u8a8d\u8a3c\u5c40)\u306eCommon Name\nDB_HOST: DB\u30b5\u30fc\u30d0\u306eCommon Name\nCLIENT_HOST: MySQL\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306eCommon Name\n\n# ca -- CA(\u8a8d\u8a3c\u5c40)\u306e\u9375\u30da\u30a2\u3092\u4f5c\u308b\n$ openssl genrsa 2048 > ca-key.pem\n$ openssl req -new -x509 -nodes -days 3600 \\\n    -key ca-key.pem -out ca-cert.pem \\\n    -subj \"/CN=$CA_HOST\"\n# ca -- ca-cert.pem\u3092db\u3068client\u306b\u30b3\u30d4\u30fc\n\n# db -- DB\u30b5\u30fc\u30d0\u306e\u9375\u30da\u30a2\u3092\u4f5c\u308b\n$ openssl req -newkey rsa:2048 -days 3600  \\\n    -nodes -keyout server-key.pem -out server-req.pem \\\n    -subj \"/CN=$DB_HOST\"\n$ openssl rsa -in server-key.pem -out server-key.pem\n\n# \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3057\u306a\u3044\u306a\u3089\u3001\u3053\u306e\u4f5c\u696d\u306f\u5fc5\u8981\u306a\u3044\u3002\n# client -- \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9375\u30da\u30a2\u3092\u4f5c\u308b\n$ openssl req -newkey rsa:2048 -days 3600 \\\n    -nodes -keyout client-key.pem -out client-req.pem \\\n    -subj \"/CN=$CLIENT_HOST\"\n$ openssl rsa -in client-key.pem -out client-key.pem\n\n# ca -- server-req.pem\u3092db\u304b\u3089\u30b3\u30d4\u30fc\n# ca -- CA\u306e\u9375\u30da\u30a2\u3092\u4f7f\u3063\u3066DB\u30b5\u30fc\u30d0\u306e\u9375\u306b\u7f72\u540d\u3059\u308b\n$ openssl x509 -req -in server-req.pem -days 3600 \\\n    -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 \\\n    -out server-cert.pem\n# ca -- \u7f72\u540d\u6e08\u307f\u306eDB\u30b5\u30fc\u30d0\u306e\u9375(server-cert.pem)\u3092db\u306b\u30b3\u30d4\u30fc\n\n# \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3057\u306a\u3044\u306a\u3089\u3001\u3053\u306e\u4f5c\u696d\u306f\u5fc5\u8981\u306a\u3044\u3002\n# ca -- client-req.pem\u3092client\u304b\u3089\u30b3\u30d4\u30fc\n# ca -- CA\u306e\u9375\u30da\u30a2\u3092\u4f7f\u3063\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9375\u306b\u7f72\u540d\u3059\u308b\n$ openssl x509 -req -in client-req.pem -days 3600 \\\n    -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 \\\n    -out client-cert.pem\n# ca -- \u7f72\u540d\u6e08\u307f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9375(client-cert.pem)\u3092client\u306b\u30b3\u30d4\u30fc\n\n\nMySQL\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\n$ mkdir /etc/mysql/ssl\n$ chown root:mysql /etc/mysql/ssl\n$ chmod 750 /etc/mysql/ssl\n\n# MySQL 5.6.3\u4ee5\u964d\u3092\u4f7f\u7528\u3059\u308b\u306a\u3089\u3001\u8a3c\u660e\u66f8\u5931\u52b9\u30ea\u30b9\u30c8\u3082\u4f5c\u3063\u3066\u304a\u304f\ntouch /etc/mysql/ssl/crl.pem\n\n# /etc/mysql/conf.d/ssl.cnf\n[mysqld]\n# SSL\u63a5\u7d9a\u306e\u8a2d\u5b9a\nssl-key  = /etc/mysql/ssl/server-key.pem\nssl-cert = /etc/mysql/ssl/server-cert.pem\n\n# (MySQL 5.6.3\u4ee5\u964d) \u8a3c\u660e\u66f8\u5931\u52b9\u30ea\u30b9\u30c8\nssl-crl  = /etc/mysql/ssl/crl.pem\n\n# \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3059\u308b\u306a\u3089\u3053\u308c\u3082\u6307\u5b9a\u3059\u308b\nssl-ca   = /etc/mysql/ssl/ca-cert.pem\n\n\nmysql\u30b3\u30de\u30f3\u30c9\u3067SSL\u63a5\u7d9a\u3092\u3059\u308b\n\u5f15\u6570:\n - --ssl-ca: SSL\u63a5\u7d9a\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002ca-cert.pem\u3092\u6307\u5b9a\n - --ssl-verify-server-cert: CN\u3068\u63a5\u7d9a\u5148\u30db\u30b9\u30c8\u540d\u3092\u6bd4\u8f03\u3057\u3001\u4e00\u81f4\u3057\u306a\u3044\u5834\u5408\u306f\u63a5\u7d9a\u3057\u306a\u3044\n - --ssl-cert: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u4f7f\u7528\u3059\u308b\u3002client-cert.pem\u3092\u6307\u5b9a\n - --ssl-key: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u4f7f\u7528\u3059\u308b\u3002client-key.pem\u3092\u6307\u5b9a\n - --ssl-crl: \u8a3c\u660e\u66f8\u5931\u52b9\u30ea\u30b9\u30c8\u3092\u6307\u5b9a (MySQL 5.6.3\u4ee5\u964d)\n\u30e1\u30e2:\n\nlocalhost\u3078\u63a5\u7d9a\u3059\u308b\u5834\u5408\u3001\u901a\u5e38\u306fSSL\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u305b\u3093\u3002\n\u5f15\u6570\u306b-h 127.0.0.1\u3092\u8ffd\u52a0\u3059\u308b\u3068SSL\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nSSL\u3092\u4f7f\u7528\u3057\u3066\u63a5\u7d9a\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\n$ mysql -h example.com -utest -p --ssl-ca /path/to/ca-cert.pem\nEnter password:\nmysql> \\s\n(\u524d\u7565)\nSSL: Cipher in use in DHE-RSA-AES256-SHA\n(\u5f8c\u7565)\n\n\nSSL\u63a5\u7d9a\u3092\u5f37\u5236\u3059\u308b\n-- test@127.0.0.1\u306fSSL\u63a5\u7d9a\u3092\u5fc5\u9808\u306b\u3059\u308b\nGRANT USAGE ON test.* TO test@127.0.0.1 IDENTIFIED BY ${password} REQUIRE SSL;\n\n-- test@127.0.0.1\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5fc5\u9808\u306b\u3059\u308b\nGRANT USAGE ON test.* to test@127.0.0.1 IDENTIFIED BY ${password} REQUIRE X509;\n\n\u5fd8\u308c\u3084\u3059\u3044\u3053\u3068\u3092\u4e2d\u5fc3\u306b\u66f8\u3044\u3066\u307e\u3059\u3002\n\n# \u30e6\u30fc\u30b6\n\u8a72\u5f53\u3059\u308b\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8 : https://dev.mysql.com/doc/refman/5.6/en/account-management-sql.html\n## \u30e6\u30fc\u30b6\u3092\u8ffd\u52a0\u30fb\u524a\u9664\n```sql\n-- \u8ffd\u52a0\nCREATE USER\n    'user_name'@'host' IDENTIFIED BY 'password',\n    'user_name'@'host' IDENTIFIED BY 'password', ...;\n-- \u78ba\u8a8d\nSELECT User, Host FROM mysql.user;\n-- \u524a\u9664\nDROP USER\n    'user1'@'host2',\n    'user2'@'host2', ...;\n```\n## \u30e6\u30fc\u30b6\u306e\u4e00\u89a7\n```sql\nSELECT User, Host FROM mysql.user;\n```\n## \u6a29\u9650\u3092\u4ed8\u4e0e\u30fb\u5265\u596a\n```sql\n-- \u4ed8\u4e0e\nGRANT '\u6a29\u9650' ON '\u30ec\u30d9\u30eb' TO '\u30e6\u30fc\u30b6';\n-- \u78ba\u8a8d\nSHOW GRANTS FOR '\u30e6\u30fc\u30b6';\n-- \u5265\u596a\nREVOKE '\u6a29\u9650' ON '\u30ec\u30d9\u30eb' FROM '\u30e6\u30fc\u30b6';\n```\n\u6a29\u9650\u306fSELECT, INSERT, UPDATE, DELETE, CREATE, DROP\u306a\u3069\n\n# \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\n## \u65e2\u5b58\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u30fb\u8ffd\u52a0\u30fb\u524a\u9664\n```sql\nALTER TABLE 'table_name'\nPARTITION BY RANGE COLUMNS(timestamp) (\nPARTITION p_201501 VALUES LESS THAN ('2015-01-01 00:00:00'),\nPARTITION p_201502 VALUES LESS THAN ('2015-02-01 00:00:00')\n);\n\nALTER TABLE 'table_name' ADD PARTITION (\nPARTITION p_future VALUES LESS THAN (MAXVALUE)\n);\n\nALTER TABLE 'table_name' DROP PARTITION p_201501, p_201502;\n```\nhttps://dev.mysql.com/doc/refman/5.5/en/alter-table.html\nhttps://dev.mysql.com/doc/refman/5.5/en/alter-table-partition-operations.html\n\n### \u305d\u306e\u4ed6\n> REORGANIZE PARTITION \u3059\u308b\u306b\u3082 ADD PARTITION \u3059\u308b\u306b\u3082\u30c6\u30fc\u30d6\u30eb\u30ed\u30c3\u30af\u304c\u907f\u3051\u3089\u308c\u306a\u3044\u306e\u3067\u3001\u4e8b\u524d\u306b\u307e\u3068\u3081\u3066\u30ac\u30ac\u30c3\u3068\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u3063\u3061\u3083\u3046\u5834\u5408\u304c\u591a\u3044\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n> http://blog.livedoor.jp/sasata299/archives/51882315.html\n\n### \u6ce8\u610f\u70b9\n\u524a\u9664\u5bfe\u8c61\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u524d\u5f8c\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3059\u308b\u3068\u3001\u9045\u304f\u306a\u308b\u30b1\u30fc\u30b9\u304c\u3042\u308b\u3002\nhttp://lab.adn-mobasia.net/?p=182\n\n## \u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u306e\u4f7f\u7528\u72b6\u6cc1\u3092\u78ba\u8a8d\n```sql\nSELECT TABLE_SCHEMA, TABLE_NAME, PARTITION_NAME, PARTITION_ORDINAL_POSITION, TABLE_ROWS\nFROM INFORMATION_SCHEMA.PARTITIONS\nWHERE TABLE_NAME='table_name';\n```\n\n# \u30c6\u30fc\u30d6\u30eb\u306e\u5217\n## \n```sql\nDESC 'table_name';\n```\nhttps://dev.mysql.com/doc/refman/5.6/ja/describe.html\n\n# \u30c6\u30fc\u30d6\u30eb\u306e\u8a73\u7d30\u60c5\u5831\u3092\u5f97\u308b\n```sql\n-- \u73fe\u5728\u306e\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5185\u306e\u5168\u3066\u306e\u30c6\u30fc\u30d6\u30eb\u306b\u3064\u3044\u3066\u8868\u793a\nSHOW TABLE STATUS \\G\n-- \u6307\u5b9a\u3057\u305f\u30c6\u30fc\u30d6\u30eb\u306e\u307f\u8868\u793a\nSHOW TABLE STATUS LIKE 'table_name' \\G\n```\n\u30c7\u30fc\u30d6\u30eb\u306e\u30b5\u30a4\u30ba\u3084\u3001auto_incliment\u306e\u73fe\u5728\u306e\u5024\u306a\u3069\u304c\u8abf\u3079\u3089\u308c\u308b\u3002\n## \u6ce8\u610f\u70b9\nInnoDB\u3067\u306f\u884c\u6570\u306b\u95a2\u3059\u308b\u30c7\u30fc\u30bf\u306f\u304b\u306a\u308a\u30a2\u30d0\u30a6\u30c8\u306a\u5024\u306a\u306e\u3067\u3042\u307e\u308a\u4fe1\u7528\u3057\u306a\u3044\u307b\u3046\u304c\u3044\u3044\u3002\n\n\n# SSL\n\n## \u9375\u3092\u4f5c\u308b\n**\u6ce8\u610f:**\n\n - \u9375\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306b\u306f\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002mysql\u3068\u7ba1\u7406\u8005\u4ee5\u5916\u306e\u30e6\u30fc\u30b6\u304b\u3089\u9375\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u72b6\u614b\u306f\u597d\u307e\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3002\n - \u8a3c\u660e\u66f8\u3092\u4f5c\u6210\u3059\u308b\u3068\u304dCN\u306b\u3001\u4e00\u610f\u306a\u30db\u30b9\u30c8\u540d\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002MySQL\u306fCA\u3068\u540c\u3058CN\u306e\u8a3c\u660e\u66f8\u3067\u306f\u3001SSL\u63a5\u7d9a\u304c\u51fa\u6765\u307e\u305b\u3093\u3002\n\n**\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u540d:**\n\n - ca: \u8a8d\u8a3c\u5c40\u306e\u5f79\u5272\u3092\u3059\u308b\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u3002\u624b\u5143\u306ePC\u306e\u3053\u3068\u3060\u3068\u601d\u3063\u3066\u304f\u3060\u3055\u3044\n - db: MySQL\u304c\u7a3c\u50cd\u3059\u308b\u30b5\u30fc\u30d0\n - client: MySQL\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u30b5\u30fc\u30d0\n\n**\u5909\u6570:**\n\n - CA_HOST: CA(\u8a8d\u8a3c\u5c40)\u306eCommon Name\n - DB_HOST: DB\u30b5\u30fc\u30d0\u306eCommon Name\n - CLIENT_HOST: MySQL\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306eCommon Name\n\n```bash\n# ca -- CA(\u8a8d\u8a3c\u5c40)\u306e\u9375\u30da\u30a2\u3092\u4f5c\u308b\n$ openssl genrsa 2048 > ca-key.pem\n$ openssl req -new -x509 -nodes -days 3600 \\\n    -key ca-key.pem -out ca-cert.pem \\\n    -subj \"/CN=$CA_HOST\"\n# ca -- ca-cert.pem\u3092db\u3068client\u306b\u30b3\u30d4\u30fc\n\n# db -- DB\u30b5\u30fc\u30d0\u306e\u9375\u30da\u30a2\u3092\u4f5c\u308b\n$ openssl req -newkey rsa:2048 -days 3600  \\\n    -nodes -keyout server-key.pem -out server-req.pem \\\n    -subj \"/CN=$DB_HOST\"\n$ openssl rsa -in server-key.pem -out server-key.pem\n\n# \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3057\u306a\u3044\u306a\u3089\u3001\u3053\u306e\u4f5c\u696d\u306f\u5fc5\u8981\u306a\u3044\u3002\n# client -- \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9375\u30da\u30a2\u3092\u4f5c\u308b\n$ openssl req -newkey rsa:2048 -days 3600 \\\n    -nodes -keyout client-key.pem -out client-req.pem \\\n    -subj \"/CN=$CLIENT_HOST\"\n$ openssl rsa -in client-key.pem -out client-key.pem\n\n# ca -- server-req.pem\u3092db\u304b\u3089\u30b3\u30d4\u30fc\n# ca -- CA\u306e\u9375\u30da\u30a2\u3092\u4f7f\u3063\u3066DB\u30b5\u30fc\u30d0\u306e\u9375\u306b\u7f72\u540d\u3059\u308b\n$ openssl x509 -req -in server-req.pem -days 3600 \\\n    -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 \\\n    -out server-cert.pem\n# ca -- \u7f72\u540d\u6e08\u307f\u306eDB\u30b5\u30fc\u30d0\u306e\u9375(server-cert.pem)\u3092db\u306b\u30b3\u30d4\u30fc\n\n# \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3057\u306a\u3044\u306a\u3089\u3001\u3053\u306e\u4f5c\u696d\u306f\u5fc5\u8981\u306a\u3044\u3002\n# ca -- client-req.pem\u3092client\u304b\u3089\u30b3\u30d4\u30fc\n# ca -- CA\u306e\u9375\u30da\u30a2\u3092\u4f7f\u3063\u3066\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9375\u306b\u7f72\u540d\u3059\u308b\n$ openssl x509 -req -in client-req.pem -days 3600 \\\n    -CA ca-cert.pem -CAkey ca-key.pem -set_serial 01 \\\n    -out client-cert.pem\n# ca -- \u7f72\u540d\u6e08\u307f\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u9375(client-cert.pem)\u3092client\u306b\u30b3\u30d4\u30fc\n```\n\n## MySQL\u30b5\u30fc\u30d0\u306e\u8a2d\u5b9a\n```bash\n$ mkdir /etc/mysql/ssl\n$ chown root:mysql /etc/mysql/ssl\n$ chmod 750 /etc/mysql/ssl\n\n# MySQL 5.6.3\u4ee5\u964d\u3092\u4f7f\u7528\u3059\u308b\u306a\u3089\u3001\u8a3c\u660e\u66f8\u5931\u52b9\u30ea\u30b9\u30c8\u3082\u4f5c\u3063\u3066\u304a\u304f\ntouch /etc/mysql/ssl/crl.pem\n```\n\n```ini\n# /etc/mysql/conf.d/ssl.cnf\n[mysqld]\n# SSL\u63a5\u7d9a\u306e\u8a2d\u5b9a\nssl-key  = /etc/mysql/ssl/server-key.pem\nssl-cert = /etc/mysql/ssl/server-cert.pem\n\n# (MySQL 5.6.3\u4ee5\u964d) \u8a3c\u660e\u66f8\u5931\u52b9\u30ea\u30b9\u30c8\nssl-crl  = /etc/mysql/ssl/crl.pem\n\n# \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5229\u7528\u3059\u308b\u306a\u3089\u3053\u308c\u3082\u6307\u5b9a\u3059\u308b\nssl-ca   = /etc/mysql/ssl/ca-cert.pem\n```\n\n\n## mysql\u30b3\u30de\u30f3\u30c9\u3067SSL\u63a5\u7d9a\u3092\u3059\u308b\n**\u5f15\u6570:**\n - --ssl-ca: SSL\u63a5\u7d9a\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002`ca-cert.pem`\u3092\u6307\u5b9a\n - --ssl-verify-server-cert: CN\u3068\u63a5\u7d9a\u5148\u30db\u30b9\u30c8\u540d\u3092\u6bd4\u8f03\u3057\u3001\u4e00\u81f4\u3057\u306a\u3044\u5834\u5408\u306f\u63a5\u7d9a\u3057\u306a\u3044\n - --ssl-cert: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u4f7f\u7528\u3059\u308b\u3002`client-cert.pem`\u3092\u6307\u5b9a\n - --ssl-key: \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u4f7f\u7528\u3059\u308b\u3002`client-key.pem`\u3092\u6307\u5b9a\n - --ssl-crl: \u8a3c\u660e\u66f8\u5931\u52b9\u30ea\u30b9\u30c8\u3092\u6307\u5b9a (MySQL 5.6.3\u4ee5\u964d)\n\n**\u30e1\u30e2:**\n\n - localhost\u3078\u63a5\u7d9a\u3059\u308b\u5834\u5408\u3001\u901a\u5e38\u306fSSL\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u305b\u3093\u3002\n   \u5f15\u6570\u306b`-h 127.0.0.1`\u3092\u8ffd\u52a0\u3059\u308b\u3068SSL\u304c\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002\n\n## SSL\u3092\u4f7f\u7528\u3057\u3066\u63a5\u7d9a\u3057\u3066\u3044\u308b\u304b\u78ba\u8a8d\n```bash\n$ mysql -h example.com -utest -p --ssl-ca /path/to/ca-cert.pem\nEnter password:\nmysql> \\s\n(\u524d\u7565)\nSSL: Cipher in use in DHE-RSA-AES256-SHA\n(\u5f8c\u7565)\n```\n\n## SSL\u63a5\u7d9a\u3092\u5f37\u5236\u3059\u308b\n```mysql\n-- test@127.0.0.1\u306fSSL\u63a5\u7d9a\u3092\u5fc5\u9808\u306b\u3059\u308b\nGRANT USAGE ON test.* TO test@127.0.0.1 IDENTIFIED BY ${password} REQUIRE SSL;\n\n-- test@127.0.0.1\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a3c\u660e\u66f8\u3092\u5fc5\u9808\u306b\u3059\u308b\nGRANT USAGE ON test.* to test@127.0.0.1 IDENTIFIED BY ${password} REQUIRE X509;\n```\n\n", "tags": ["MySQL", "MySQL5.5", "mysql5.6", "mysql5.7"]}