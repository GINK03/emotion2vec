{"context": " More than 1 year has passed since last update.CakePHP3\u306fDB\u30b9\u30ad\u30fc\u30de\u306e\u66f4\u65b0\u7ba1\u7406\u306bPhinx\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u5c11\u306a\u3044\u2026\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001Migration\u30d5\u30a1\u30a4\u30eb\u306e\u4f8b\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\u4e00\u5fdc\u53c2\u8003\uff1a\nCookbook 3.x - Migrations\nPhinx - Writing Migrations\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u8ffd\u52a0\nchange()\u306b\u66f8\u3051\u308b\n$table = $this->table('table_name');\n$table->addColumn('name', 'string')\n      ->addColumn('description', 'text')\n      ->addColumn('created', 'datetime')\n      ->addColumn('modified', 'datetime')\n      ->create();\n\n\n\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u5909\u66f4\nchange()\u306b\u66f8\u3051\u308b\n$table = $this->table('old_table_name');\n$table->rename('new_table_name');\n\n\n\u30c6\u30fc\u30d6\u30eb\u306e\u524a\u9664\nchange()\u306b\u66f8\u3051\u306a\u3044\n$this->dropTable('table_name');\n\n\n\u30ab\u30e9\u30e0\u306e\u8ffd\u52a0\nchange()\u306b\u66f8\u3051\u308b\n$table = $this->table('table_name');\n$table->addColumn('col_name', 'integer', [\n    'default' => 0,\n    'limit' => 4,\n    'null' => false,\n    'after' => 'prev_col_name',\n]);\n$table->update();\n\n\n\u30ab\u30e9\u30e0\u540d\u306e\u5909\u66f4\nchange()\u306b\u66f8\u3051\u308b\n$table = $this->table('table_name');\n$table->renameColumn('old_col_name', 'new_col_name');\n\n\n\u30ab\u30e9\u30e0\u5b9a\u7fa9\u306e\u5909\u66f4\nchange()\u306b\u66f8\u3051\u306a\u3044\n$table = $this->table('table_name');\n$table->changeColumn('col_name', 'integer', [\n    'default' => null,\n    'null' => true,\n]);\n\n\n\u30ab\u30e9\u30e0\u306e\u524a\u9664\nchange()\u306b\u66f8\u3051\u306a\u3044\n$table = $this->table('table_name');\n$table->removeColumn('col_name');\n\nCakePHP3\u306fDB\u30b9\u30ad\u30fc\u30de\u306e\u66f4\u65b0\u7ba1\u7406\u306bPhinx\u3092\u63a1\u7528\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u5c11\u306a\u3044\u2026\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001Migration\u30d5\u30a1\u30a4\u30eb\u306e\u4f8b\u3092\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u4e00\u5fdc\u53c2\u8003\uff1a\n[Cookbook 3.x - Migrations](http://book.cakephp.org/3.0/en/migrations.html)\n[Phinx - Writing Migrations](http://phinx.readthedocs.org/en/latest/migrations.html)\n\n# \u30c6\u30fc\u30d6\u30eb\u306e\u8ffd\u52a0\n`change()`\u306b\u66f8\u3051\u308b\n\n```php\n$table = $this->table('table_name');\n$table->addColumn('name', 'string')\n      ->addColumn('description', 'text')\n      ->addColumn('created', 'datetime')\n      ->addColumn('modified', 'datetime')\n      ->create();\n```\n\n# \u30c6\u30fc\u30d6\u30eb\u540d\u306e\u5909\u66f4\n`change()`\u306b\u66f8\u3051\u308b\n\n```php\n$table = $this->table('old_table_name');\n$table->rename('new_table_name');\n```\n\n# \u30c6\u30fc\u30d6\u30eb\u306e\u524a\u9664\n`change()`\u306b\u66f8\u3051\u306a\u3044\n\n```php\n$this->dropTable('table_name');\n```\n\n# \u30ab\u30e9\u30e0\u306e\u8ffd\u52a0\n`change()`\u306b\u66f8\u3051\u308b\n\n```php\n$table = $this->table('table_name');\n$table->addColumn('col_name', 'integer', [\n    'default' => 0,\n    'limit' => 4,\n    'null' => false,\n    'after' => 'prev_col_name',\n]);\n$table->update();\n```\n\n# \u30ab\u30e9\u30e0\u540d\u306e\u5909\u66f4\n`change()`\u306b\u66f8\u3051\u308b\n\n```php\n$table = $this->table('table_name');\n$table->renameColumn('old_col_name', 'new_col_name');\n```\n\n# \u30ab\u30e9\u30e0\u5b9a\u7fa9\u306e\u5909\u66f4\n`change()`\u306b\u66f8\u3051\u306a\u3044\n\n```php\n$table = $this->table('table_name');\n$table->changeColumn('col_name', 'integer', [\n    'default' => null,\n    'null' => true,\n]);\n```\n\n# \u30ab\u30e9\u30e0\u306e\u524a\u9664\n`change()`\u306b\u66f8\u3051\u306a\u3044\n\n```php\n$table = $this->table('table_name');\n$table->removeColumn('col_name');\n```\n", "tags": ["cakephp3", "CakePHP3", "Phinx"]}