{"context": " More than 1 year has passed since last update.\n\n\u76ee\u7684\n\nJava\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\uff11\u3064\u3067\u3042\u308b Map \u306b\u3064\u3044\u3066\u3001\u6574\u7406\u3057\u3066\u307f\u307e\u3059\u3002\n\u5404\u30af\u30e9\u30b9\u3084\u30e1\u30bd\u30c3\u30c9\u306e\u8a73\u7d30\u306a\u8aac\u660e\u306f\u3057\u307e\u305b\u3093\u3002\n\n\n\u4e3b\u8981\u306a\u30af\u30e9\u30b9\n\njava.util.HashMap\n\n\n\n\u3044\u308f\u3086\u308b\u30cf\u30c3\u30b7\u30e5\u30de\u30c3\u30d7\u3001\u30cf\u30c3\u30b7\u30e5\u30c6\u30fc\u30d6\u30eb\n\n\u30ad\u30fc\u3068\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f hashCode() \u3068 equals() \u304c\u6b63\u3057\u304f\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n\n\njava.util.LinkedHashMap\n\n\n\n\u57fa\u672c\u7684\u306b\u306f HashMap \u3068\u540c\u3058\n\n\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u8fd4\u3059\u9806\u756a\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\uff08\u57fa\u672c\u306f\u633f\u5165\u9806\uff09\n\n\u9806\u756a\u306f\u300c\u633f\u5165\u9806\u300d\u306e\u307b\u304b\u306b\u300c\u30a2\u30af\u30bb\u30b9\u9806\u300d\u306b\u3067\u304d\u308b\u3002LRU\u65b9\u65b9\u5f0f\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4f5c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\u53c2\u8003\uff1aLRU\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u5b9f\u88c5\n\n\n\njava.util.TreeMap\n\n\n\n\u30c4\u30ea\u30fc\u69cb\u9020\u3092\u6301\u3064\u30de\u30c3\u30d7\n\n\u30ad\u30fc\u3068\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f java.lang.Comparable \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u304b\u3001\u5225\u9014 java.util.Comparator \u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u307e\u305f\u3001\u305d\u306e\u7d50\u679c\u3068 equals() \u304c\u77db\u76fe\u3057\u306a\u3044\u3053\u3068\u3002\n\n\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u8fd4\u3059\u9806\u756a\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\uff08\u30bd\u30fc\u30c8\u9806\uff09\n\n\n\njava.util.EnumMap\n\n\n\n\u30ad\u30fc\u304c\uff11\u7a2e\u985e\u306e enum \u578b\u306e\u5834\u5408\u306b\u5229\u7528\u3067\u304d\u308b\u3002\u30e1\u30e2\u30ea\u52b9\u7387\u304c\u826f\u3044\u3002\n\n\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u8fd4\u3059\u9806\u756a\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\uff08ordinal\u9806\uff09\n\n\n\njava.util.Hashtable\n\n\n\n\u53e4\u3044\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n\u57fa\u672c\u4f7f\u308f\u306a\u3044\u3053\u3068\n\n\n\njava.util.Properties\n\n\n\n\u53e4\u3044\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n\n\u8ca0\u306e\u907a\u7523\n\n\u3044\u308d\u3044\u308d\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u3067\u6368\u3066\u308b\u306b\u6368\u3066\u3089\u308c\u306a\u3044\n\n\n\n\u305d\u306e\u4ed6\u30af\u30e9\u30b9\n\n\n\njava.util.concurrent.ConcurrentHashMap\n\njava.util.IdentityHashMap\n\njava.util.WeakHashMap\n\n\u3044\u308d\u3044\u308d\n\n\n\n\n\n\u4fbf\u5229\u306a\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\u57fa\u672c\u306f java.util.Collections \u306b\u307e\u3068\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u7a7a\u306e\u30de\u30c3\u30d7\n\njava.util.Collections#emptyMap()\n\n\u7a7a\u306e\u30de\u30c3\u30d7\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306f\u3001\u7121\u99c4\u306b new HashMap() \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u306a\u3044\u3067\u3001\u30a4\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3044\u307e\u308f\u3059\u307b\u3046\u304c\u826f\u3044\u304b\u3068\u3002\n\u5909\u66f4\u4e0d\u53ef\u306a\u306e\u3067\u6ce8\u610f\u3002\n\n\u8981\u7d20\u304c1\u3064\u3060\u3051\u306e\u30de\u30c3\u30d7\n\njava.util.Collections#singletonMap()\n\n\u5909\u66f4\u4e0d\u53ef\u306a\u306e\u3067\u6ce8\u610f\u3002\n\n\u5909\u66f4\u4e0d\u53ef\u30de\u30c3\u30d7\u5316\n\njava.util.Collections#unmodifiableMap()\njava.util.Collections#unmodifiableSortedMap()\n\n\n\u540c\u671f\u30de\u30c3\u30d7\u5316\n\njava.util.Collections#synchronizedMap()\njava.util.Collections#synchronizedSortedMap()\n\n\n\u52d5\u7684\u578b\u4fdd\u8a3c\n\njava.util.Collections#checkedMap()\n\n\nHashMap \u3088\u308a LinkedHashMap \u3092\u4f7f\u3046\nHashMap \u3067\u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u306a\u3069\u3067\u5168\u4ef6\u53d6\u5f97\u3059\u308b\u969b\u306b\u53d6\u5f97\u3067\u304d\u308b\u9806\u756a\u306f\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u305d\u306e\u305f\u3081\u3001\u5358\u4f53\u30c6\u30b9\u30c8\u306e\u691c\u8a3c\u3084\u3001\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c8\u6642\u306e\u518d\u73fe\u30c6\u30b9\u30c8\u3067\u5c11\u3005\u56f0\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n\u4ed5\u69d8\u3067\u53d6\u5f97\u9806\u756a\u304c\u660e\u78ba\u5316\u3055\u308c\u3066\u3044\u308b LinkedHashMap \u3092\u4f7f\u3046\u307b\u3046\u304c\u4fbf\u5229\u306a\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u308f\u308c\u307e\u3059\u3002\n\u203b\u5b9f\u969b\u306b\u306f Java8 \u304b\u3089\u306f HashMap \u3082 LinkedHashMap \u540c\u69d8\u306e\u5b9f\u88c5\u306b\u306a\u3063\u3066\u3044\u308b\u307f\u305f\u3044\u3067\u3059\u304c\u3002\u3067\u3082\u3001\u4ed5\u69d8\u3067\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\u3068\u5b89\u5fc3\u3067\u3059\u3088\u306d\u3002\n\nMap \u306e\u521d\u671f\u5316\n\n\u533f\u540d\u30af\u30e9\u30b9\u3068\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\nMap\u3092\u521d\u671f\u5316\u3059\u308b\u5834\u5408\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u533f\u540d\u30af\u30e9\u30b9\u3068\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30c6\u30af\u30cb\u30c3\u30af\u304c\u4f7f\u308f\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n// \u4f7f\u3044\u65b9\nMap<String, String> map = new HashMap<String, String>() {\n    {\n        put(\"one\", \"1st\");\n        put(\"two\", \"2nd\");\n        put(\"three\", \"3rd\");\n    }\n};\n\n\u3053\u306e\u65b9\u6cd5\u306b\u306f\u5927\u5c0f\u3044\u304f\u3064\u304b\u306e\u554f\u984c\u70b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u521d\u671f\u5316\u3054\u3068\u306b\u533f\u540d\u30af\u30e9\u30b9\u304c\u4f5c\u3089\u308c\u308b\uff08\u5f71\u97ff\uff1a\u5c0f\uff09\n\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044\uff08\u5f71\u97ff\uff1a\u6975\u5c0f\uff09\nHashMap \u306a\u3069\u306f\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u53ef\u80fd\u3060\u304c\u3001serialVersionUID \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\uff08\u5f71\u97ff\uff1a\u5c0f\uff09\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\u5185\u306a\u3069\u3067\u751f\u6210\u3057\u305f\u5834\u5408\u3001\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6697\u9ed9\u306e\u3046\u3061\u306b\u4fdd\u6301\u3055\u308c\u308b\uff08\u5f71\u97ff\uff1a\u5927\uff09\n\n\u7279\u306b\u6700\u5f8c\u306e\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u62b1\u3048\u8fbc\u3093\u3067\u3057\u307e\u3046\u3053\u3068\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u8d77\u304d\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\uff08\u30af\u30e9\u30b9\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306a\u30b9\u30b3\u30fc\u30d7\u3067\u751f\u6210\u3059\u308c\u3070\u5927\u4e08\u592b\uff09\u3002\n\n\u30e1\u30e2\u30ea\u30ea\u30fc\u30af\uff08\u5fc5\u8981\u306a\u306e\u306fMap\u3060\u3051\u306a\u306e\u306b\u3001\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3082\u305a\u3063\u3068\u4fdd\u6301\u3057\u3066\u3057\u307e\u3046\uff09\n\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u5931\u6557\uff08Map\u3092\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u3057\u305f\u3044\u304c\u3001\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u304c\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u4e0d\u53ef\u80fd\u306e\u5834\u5408\uff09\n\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u30b5\u30a4\u30ba\u304c\u7121\u99c4\u306b\u5927\u304d\u304f\u306a\u308b\uff08\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u3082\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u53ef\u80fd\u306a\u5834\u5408\uff09\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30b3\u30fc\u30d7\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306bMap\u3092\u751f\u6210\u3057\u305f\u3068\u3057\u307e\u3059\u3002\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class Test {\n\n    public void test() {\n        Map<String, String> map = new HashMap<String, String>() {\n            {\n                put(\"one\", \"1st\");\n                put(\"two\", \"2nd\");\n                put(\"three\", \"3rd\");\n            }\n        };\n    }\n}\n\n\u533f\u540d\u30af\u30e9\u30b9\u306e\u9006\u30b3\u30f3\u30d1\u30a4\u30eb\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\uff08\u3053\u3053\u3067\u306f Test \u30af\u30e9\u30b9\uff09\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\nimport java.util.HashMap;\n\nclass Test$1 extends HashMap\n{\n\n    final Test this$0;\n\n    Test$1()\n    {\n        this$0 = Test.this;\n        super();\n        put(\"one\", \"1st\");\n        put(\"two\", \"2nd\");\n        put(\"three\", \"3rd\");\n    }\n}\n\n\n\u30d3\u30eb\u30c0\u30fc\u30d1\u30bf\u30fc\u30f3\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d3\u30eb\u30c0\u30fc\u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u751f\u6210\u3059\u308b\u65b9\u6cd5\u3082\u826f\u304f\u4f7f\u308f\u308c\u307e\u3059\u3002\nimport java.util.Collections;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\n/**\n * Map\u30d3\u30eb\u30c0\u30fc.<br>\n * \u5404\u30e1\u30bd\u30c3\u30c9\u306f\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u547c\u3073\u51fa\u3059\u3053\u3068\u3092\u60f3\u5b9a.<br>\n */\npublic class MapBuilder<K, V> {\n\n    /** \u751f\u6210\u3057\u305fMap */\n    private final Map<K, V> map;\n\n    /** Map\u30d3\u30eb\u30c0\u30fc\u3092\u751f\u6210 */\n    public MapBuilder() {\n        map = new LinkedHashMap<>();\n    }\n\n    /** Map\u306b\u5024\u3092\u767b\u9332 */\n    public MapBuilder<K, V> put(K key, V value) {\n        map.put(key, value);\n        return this;\n    }\n\n    /** \u7de8\u96c6\u53ef\u80fd\u306aMap\u3092\u8fd4\u3059 */\n    public Map<K, V> toMap() {\n        return map;\n    }\n\n    /** \u7de8\u96c6\u4e0d\u53ef\u306aMap\u3092\u8fd4\u3059 */\n    public Map<K, V> toConst() {\n        return Collections.unmodifiableMap(map);\n    }\n}\n\n// \u4f7f\u3044\u65b9\nMap<String, String> map = new MapBuilder<String, String>()\n    .put(\"one\", \"1st\")\n    .put(\"two\", \"2nd\")\n    .put(\"three\", \"3rd\")\n    .toConst();\n\n\u30e1\u30ea\u30c3\u30c8\u306f\u7de8\u96c6\u53ef\u80fd\u306a\u30de\u30c3\u30d7\u3082\u3001\u7de8\u96c6\u4e0d\u80fd\u306a\u30de\u30c3\u30d7\u3082\u4f5c\u308c\u308b\u3053\u3068\u3002\n\u30c7\u30e1\u30ea\u30c3\u30c8\u306f\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u4f7f\u3048\u306a\u3044\u3053\u3068\u3002\n\n\u30e9\u30e0\u30c0\u5f0f\n\u3069\u3046\u3057\u3066\u3082\u7dcf\u79f0\u578b\u3092\uff12\u56de\u66f8\u304d\u305f\u304f\u306a\u3044\u5834\u5408\u306b\u306f\u3001\u30e9\u30e0\u30c0\u5f0f\u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u3042\u308a\u305d\u3046\u3067\u3059\u3002\npublic static <K, V> Map<K, V> toMap(Consumer<Map<K, V>> initializer) {\n    Map<K, V> map = new LinkedHashMap<>();\n    initializer.accept(map);\n    return map;\n}\n\n// \u4f7f\u3044\u65b9\nMap<String, String> map = toMap(m -> {\n    m.put(\"one\", \"1st\");\n    m.put(\"two\", \"2nd\");\n    m.put(\"three\", \"3rd\");\n});\n\n\n\u30e9\u30e0\u30c0\uff0b\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\uff08Java8u60 \u4ee5\u964d\u306e\u5834\u5408\uff09\nJava8u60 \u4ee5\u964d\u3067\u3042\u308c\u3070\u3001\u30e9\u30e0\u30c0\u5f0f\u306e\u5f15\u6570\u540d\u304c\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u53d6\u5f97\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u308b\u3089\u3057\u304f\u3001\u9762\u767d\u3044\u521d\u671f\u5316\u306e\u4ed5\u65b9\u304c\u3067\u304d\u308b\u307f\u305f\u3044\u3067\u3059\u3002\n\u53c2\u8003\uff1aJava 8u60\u3067\u3001Map\u306e\u521d\u671f\u5316\u3068\u304b\u304c\u3059\u3054\u3044\u697d\u306b\u306a\u3063\u3066\u308b\u4ef6\n\u95a2\u4fc2\u3057\u305d\u3046\u306a\u90e8\u5206\u3060\u3051\u5207\u308a\u51fa\u3057\u3066\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nimport java.io.Serializable;\nimport java.lang.invoke.SerializedLambda;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Parameter;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Map;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\n/** \u30e9\u30e0\u30c0\u5f0f\u306e\u5909\u6570\u540d\u3092\u53d6\u5f97\u3057\u3066\u30de\u30c3\u30d7\u3092\u5b9a\u7fa9\u3059\u308b\u30c6\u30b9\u30c8 */\npublic class LambdaNameMap {\n\n    /** \u30c6\u30b9\u30c8\u5b9f\u884c */\n    public static void main(String[] args) throws Exception {\n        System.out.println(System.getProperty(\"java.version\"));\n\n        // \u3053\u3093\u306a\u611f\u3058\u3067\u30de\u30c3\u30d7\u304c\u4f5c\u308c\u308b\n        Map<String, String> map = toConstMap(\n                one -> \"1st\",\n                two -> \"2nd\",\n                three -> \"3rd\");\n\n        System.out.println(map);\n    }\n\n    /** \u540d\u524d\u4ed8\u304d\u306e\u5024\u306e\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9 */\n    public interface NamedValue<T> extends Function<String, T>, Serializable {\n\n        default T value() {\n            return apply(name());\n        }\n\n        default String name() {\n            return getName(this);\n        }\n    }\n\n    /** \u5909\u66f4\u4e0d\u80fd\u30de\u30c3\u30d7\u3092\u751f\u6210 */\n    @SafeVarargs\n    public static <T> Map<String, T> toConstMap(NamedValue<T>... namedValues) {\n        Map<String, T> map = Arrays.stream(namedValues)\n                .collect(Collectors.toMap(namedValue -> namedValue.name(), namedValue->namedValue.value()));\n        return Collections.unmodifiableMap(map);\n    }\n\n    /** \u30e9\u30e0\u30c0\u5f0f\u304b\u3089\u5909\u6570\u306e\u540d\u524d\u3092\u53d6\u5f97 */\n    private static <T> String getName(Function<String, T> func) {\n        SerializedLambda lambdaInfo = toSerializedLambda(func);\n        Method method = getMethod(lambdaInfo, String.class);\n\n        Parameter parameter = method.getParameters()[0];\n        if (!parameter.isNamePresent()) {\n            throw new IllegalStateException(\"no name\");\n        }\n        return parameter.getName();\n    }\n\n    /** SerializedLambda \u304b\u3089\u6307\u5b9a\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u53d6\u5f97 */\n    private static Method getMethod(SerializedLambda lambdaInfo, Class<?>... argClasses) {\n        try {\n            // \u5b9f\u88c5\u30af\u30e9\u30b9\u540d\n            String implClassName = lambdaInfo.getImplClass().replace('/', '.');\n            Class<?> implClass = Class.forName(implClassName);\n\n            // \u5b9f\u88c5\u30e1\u30bd\u30c3\u30c9\u540d\n            String implMethodName = lambdaInfo.getImplMethodName();\n            Method implMethod = implClass.getDeclaredMethod(implMethodName, argClasses);\n            return implMethod;\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    /** \u30e9\u30e0\u30c0\u5f0f\u304b\u3089 SerializedLambda \u3092\u53d6\u5f97 */\n    private static SerializedLambda toSerializedLambda(Object lambda) {\n        try {\n            Method replaceMethod = lambda.getClass().getDeclaredMethod(\"writeReplace\");\n            replaceMethod.setAccessible(true);\n            return (SerializedLambda) replaceMethod.invoke(lambda);\n\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u306f javac \u306b -parameters \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u3082\u3057Eclipse \u306e\u5834\u5408\u306b\u306f\u3001-parameters \u306e\u4ee3\u308f\u308a\u306b\u30d7\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306eJava/Compiler\u306e\"Store inforation about method parameters (usable via reflection)\" \u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\uff08\u3042\u308b\u3044\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e Java Compiler \u306e\u540c\u540d\u306e\u9805\u76ee\uff09\n\u5b9f\u884c\u7d50\u679c\u306f\u3053\u3046\u306a\u308a\u307e\u3057\u305f\u3002\n1.8.0_65\n{one=1st, three=3rd, two=2nd}\n\n\u975e\u5e38\u306b\u8208\u5473\u6df1\u3044\u3067\u3059\u304c\u3001\u30c7\u30e1\u30ea\u30c3\u30c8\u3082\u3042\u308b\u304b\u3068\u3002\n\n\u30ad\u30fc\u306f\u5909\u6570\u540d\u306b\u4f7f\u3048\u308b\u3082\u306e\u3060\u3051\n\u73fe\u6642\u70b9\u3067\u306f\u52d5\u4f5c\u74b0\u5883\u304c\u5c11\u306a\u3044\uff08Java9\u306a\u3069\u306b\u5207\u308a\u66ff\u308f\u3063\u305f\u5f8c\u306a\u3089\u5b89\u5fc3\u3057\u3066\u4f7f\u3048\u308b\u304b\u3082\u306d\uff09\n\u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3057\u306a\u3044\u3068\u4f7f\u3048\u306a\u3044\n\n\n\u666e\u901a\u306e\u521d\u671f\u5316\n\u5927\u62b5\u306e\u5834\u5408\u306b\u306f\u3001\u5909\u306a\u6280\u5de7\u3092\u3053\u3089\u3055\u305a\u611a\u76f4\u306b\u521d\u671f\u5316\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u30af\u30e9\u30b9\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306a\u5909\u6570\u306e\u5834\u5408\u306b\u306fstatic\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u3002\nprivate static final Map<String, String> CONST_MAP;\nstatic {\n    Map<String, string> map = new LinkedHashMap<>();\n    map.put(\"one\", \"1st\");\n    map.put(\"two\", \"2nd\");\n    map.put(\"three\", \"3rd\");\n    CONST_MAP = Collections.unmodifiableMap(map);\n}\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306a\u5909\u6570\u306e\u5834\u5408\u306b\u306f\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u304b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\nprivate final Map<String, String> map;\n{\n    map = new LinkedHashMap<>();\n    map.put(\"one\", \"1st\");\n    map.put(\"two\", \"2nd\");\n    map.put(\"three\", \"3rd\");\n}\n\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306a\u3089\u751f\u6210\u5f8c\u306b\u9806\u6b21\u3002\nMap<String, string> map = new LinkedHashMap<>();\nmap.put(\"one\", \"1st\");\nmap.put(\"two\", \"2nd\");\nmap.put(\"three\", \"3rd\");\n\n\u3042\u308b\u3044\u306f\u3001\u30de\u30c3\u30d7\u3092\u751f\u6210\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u5225\u9014\u7528\u610f\u3059\u308b\u65b9\u6cd5\u3082\u826f\u304f\u4f7f\u308f\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\nprivate static final Map<String, String> CONST_MAP = createMap();\n\nprivate static Map<String, String> createMap() {\n    Map<String, string> map = new LinkedHashMap<>();\n    map.put(\"one\", \"1st\");\n    map.put(\"two\", \"2nd\");\n    map.put(\"three\", \"3rd\");\n    return Collections.unmodifiableMap(map);\n}\n\n\nHashtable \u306e contains() \u30e1\u30bd\u30c3\u30c9\nMap \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306b\u306f containsKey(), containsValue() \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u3068\u3053\u308d\u304c\u3001Hashtable \u3084\u305d\u306e\u5b50\u30af\u30e9\u30b9\u306e Properties \u306b\u306f\u3053\u306e\u307b\u304b\u306b contains() \u30e1\u30bd\u30c3\u30c9\u3082\u3042\u308a\u307e\u3059\u3002\u52d5\u4f5c\u7684\u306b\u306f containsValue()\u3068\u540c\u3058\u3082\u306e\u3067\u3059\u3002\n\u540d\u524d\u304c\u4f3c\u3066\u3044\u308b\u306e\u3067 containsKey() \u3068\u9593\u9055\u3048\u306a\u3044\u3088\u3046\u306b\u3054\u6ce8\u610f\u3092\u3002\n\n# \u76ee\u7684\n\n- Java\u306e\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\uff11\u3064\u3067\u3042\u308b Map \u306b\u3064\u3044\u3066\u3001\u6574\u7406\u3057\u3066\u307f\u307e\u3059\u3002\n- \u5404\u30af\u30e9\u30b9\u3084\u30e1\u30bd\u30c3\u30c9\u306e\u8a73\u7d30\u306a\u8aac\u660e\u306f\u3057\u307e\u305b\u3093\u3002\n\n# \u4e3b\u8981\u306a\u30af\u30e9\u30b9\n\n<dl>\n<dt>java.util.HashMap\n<dd>\n<ul>\n<li>\u3044\u308f\u3086\u308b\u30cf\u30c3\u30b7\u30e5\u30de\u30c3\u30d7\u3001\u30cf\u30c3\u30b7\u30e5\u30c6\u30fc\u30d6\u30eb\n<li>\u30ad\u30fc\u3068\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f hashCode() \u3068 equals() \u304c\u6b63\u3057\u304f\u5b9f\u88c5\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\n</ul>\n\n<dt>java.util.LinkedHashMap\n<dd>\n<ul>\n<li>\u57fa\u672c\u7684\u306b\u306f HashMap \u3068\u540c\u3058\n<li>\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u8fd4\u3059\u9806\u756a\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\uff08\u57fa\u672c\u306f\u633f\u5165\u9806\uff09\n<li>\u9806\u756a\u306f\u300c\u633f\u5165\u9806\u300d\u306e\u307b\u304b\u306b\u300c\u30a2\u30af\u30bb\u30b9\u9806\u300d\u306b\u3067\u304d\u308b\u3002LRU\u65b9\u65b9\u5f0f\u306e\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u4f5c\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002<br>\n\u53c2\u8003\uff1a<a href=\"http://qiita.com/yoshi389111/items/230ce4f6f3d9ee5f6867\">LRU\u30ad\u30e3\u30c3\u30b7\u30e5\u306e\u5b9f\u88c5</a>\n</ul>\n\n<dt>java.util.TreeMap\n<dd>\n<ul>\n<li>\u30c4\u30ea\u30fc\u69cb\u9020\u3092\u6301\u3064\u30de\u30c3\u30d7\n<li>\u30ad\u30fc\u3068\u306a\u308b\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306f java.lang.Comparable \u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u304b\u3001\u5225\u9014 java.util.Comparator \u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\u307e\u305f\u3001\u305d\u306e\u7d50\u679c\u3068 equals() \u304c\u77db\u76fe\u3057\u306a\u3044\u3053\u3068\u3002\n<li>\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u8fd4\u3059\u9806\u756a\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\uff08\u30bd\u30fc\u30c8\u9806\uff09\n</ul>\n\n<dt>java.util.EnumMap\n<dd>\n<ul>\n<li>\u30ad\u30fc\u304c\uff11\u7a2e\u985e\u306e enum \u578b\u306e\u5834\u5408\u306b\u5229\u7528\u3067\u304d\u308b\u3002\u30e1\u30e2\u30ea\u52b9\u7387\u304c\u826f\u3044\u3002\n<li>\u30a4\u30c6\u30ec\u30fc\u30bf\u3067\u8fd4\u3059\u9806\u756a\u304c\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\uff08ordinal\u9806\uff09\n</ul>\n\n<dt>java.util.Hashtable\n<dd>\n<ul>\n<li>\u53e4\u3044\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n<li>\u57fa\u672c\u4f7f\u308f\u306a\u3044\u3053\u3068\n</ul>\n\n<dt>java.util.Properties\n<dd>\n<ul>\n<li>\u53e4\u3044\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\n<li>\u8ca0\u306e\u907a\u7523\n<li>\u3044\u308d\u3044\u308d\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u4f7f\u308f\u308c\u3066\u3044\u308b\u306e\u3067\u6368\u3066\u308b\u306b\u6368\u3066\u3089\u308c\u306a\u3044\n</ul>\n\n<dt>\u305d\u306e\u4ed6\u30af\u30e9\u30b9\n<dd>\n<ul>\n<li>java.util.concurrent.ConcurrentHashMap\n<li>java.util.IdentityHashMap\n<li>java.util.WeakHashMap\n<li>\u3044\u308d\u3044\u308d\n</ul>\n</dl>\n\n# \u4fbf\u5229\u306a\u30e6\u30fc\u30c6\u30a3\u30ea\u30c6\u30a3\n\n\u57fa\u672c\u306f java.util.Collections \u306b\u307e\u3068\u307e\u3063\u3066\u3044\u307e\u3059\u3002\n\n## \u7a7a\u306e\u30de\u30c3\u30d7\n\n- java.util.Collections#emptyMap()\n\n\u7a7a\u306e\u30de\u30c3\u30d7\u304c\u5fc5\u8981\u306a\u5834\u5408\u306b\u306f\u3001\u7121\u99c4\u306b new HashMap() \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u751f\u6210\u3057\u306a\u3044\u3067\u3001\u30a4\u30df\u30e5\u30fc\u30bf\u30d6\u30eb\u306a\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u4f7f\u3044\u307e\u308f\u3059\u307b\u3046\u304c\u826f\u3044\u304b\u3068\u3002\n\u5909\u66f4\u4e0d\u53ef\u306a\u306e\u3067\u6ce8\u610f\u3002\n\n## \u8981\u7d20\u304c1\u3064\u3060\u3051\u306e\u30de\u30c3\u30d7\n\n- java.util.Collections#singletonMap()\n\n\u5909\u66f4\u4e0d\u53ef\u306a\u306e\u3067\u6ce8\u610f\u3002\n\n## \u5909\u66f4\u4e0d\u53ef\u30de\u30c3\u30d7\u5316\n\n- java.util.Collections#unmodifiableMap()\n- java.util.Collections#unmodifiableSortedMap()\n\n## \u540c\u671f\u30de\u30c3\u30d7\u5316\n\n- java.util.Collections#synchronizedMap()\n- java.util.Collections#synchronizedSortedMap()\n\n## \u52d5\u7684\u578b\u4fdd\u8a3c\n\n- java.util.Collections#checkedMap()\n\n# HashMap \u3088\u308a LinkedHashMap \u3092\u4f7f\u3046\n\nHashMap \u3067\u306f\u30a4\u30c6\u30ec\u30fc\u30bf\u306a\u3069\u3067\u5168\u4ef6\u53d6\u5f97\u3059\u308b\u969b\u306b\u53d6\u5f97\u3067\u304d\u308b\u9806\u756a\u306f\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\n\u305d\u306e\u305f\u3081\u3001\u5358\u4f53\u30c6\u30b9\u30c8\u306e\u691c\u8a3c\u3084\u3001\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c8\u6642\u306e\u518d\u73fe\u30c6\u30b9\u30c8\u3067\u5c11\u3005\u56f0\u308b\u3053\u3068\u3082\u3042\u308a\u307e\u3059\u3002\n\n\u4ed5\u69d8\u3067\u53d6\u5f97\u9806\u756a\u304c\u660e\u78ba\u5316\u3055\u308c\u3066\u3044\u308b LinkedHashMap \u3092\u4f7f\u3046\u307b\u3046\u304c\u4fbf\u5229\u306a\u3053\u3068\u304c\u591a\u3044\u3068\u601d\u308f\u308c\u307e\u3059\u3002\n\n\u203b\u5b9f\u969b\u306b\u306f Java8 \u304b\u3089\u306f HashMap \u3082 LinkedHashMap \u540c\u69d8\u306e\u5b9f\u88c5\u306b\u306a\u3063\u3066\u3044\u308b\u307f\u305f\u3044\u3067\u3059\u304c\u3002\u3067\u3082\u3001\u4ed5\u69d8\u3067\u4fdd\u8a3c\u3055\u308c\u3066\u3044\u308b\u3068\u5b89\u5fc3\u3067\u3059\u3088\u306d\u3002\n\n# Map \u306e\u521d\u671f\u5316\n\n## \u533f\u540d\u30af\u30e9\u30b9\u3068\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\n\nMap\u3092\u521d\u671f\u5316\u3059\u308b\u5834\u5408\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u533f\u540d\u30af\u30e9\u30b9\u3068\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u3092\u7d44\u307f\u5408\u308f\u305b\u305f\u30c6\u30af\u30cb\u30c3\u30af\u304c\u4f7f\u308f\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\n\n```java\n// \u4f7f\u3044\u65b9\nMap<String, String> map = new HashMap<String, String>() {\n    {\n        put(\"one\", \"1st\");\n        put(\"two\", \"2nd\");\n        put(\"three\", \"3rd\");\n    }\n};\n```\n\n\u3053\u306e\u65b9\u6cd5\u306b\u306f\u5927\u5c0f\u3044\u304f\u3064\u304b\u306e\u554f\u984c\u70b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n- \u521d\u671f\u5316\u3054\u3068\u306b\u533f\u540d\u30af\u30e9\u30b9\u304c\u4f5c\u3089\u308c\u308b\uff08\u5f71\u97ff\uff1a\u5c0f\uff09\n- \u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u4f7f\u7528\u3067\u304d\u306a\u3044\uff08\u5f71\u97ff\uff1a\u6975\u5c0f\uff09\n- HashMap \u306a\u3069\u306f\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u53ef\u80fd\u3060\u304c\u3001serialVersionUID \u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\uff08\u5f71\u97ff\uff1a\u5c0f\uff09\n- \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9\u5185\u306a\u3069\u3067\u751f\u6210\u3057\u305f\u5834\u5408\u3001\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u304c\u6697\u9ed9\u306e\u3046\u3061\u306b\u4fdd\u6301\u3055\u308c\u308b\uff08\u5f71\u97ff\uff1a\u5927\uff09\n\n\u7279\u306b\u6700\u5f8c\u306e\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u62b1\u3048\u8fbc\u3093\u3067\u3057\u307e\u3046\u3053\u3068\u3067\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u8d77\u304d\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\uff08\u30af\u30e9\u30b9\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306a\u30b9\u30b3\u30fc\u30d7\u3067\u751f\u6210\u3059\u308c\u3070\u5927\u4e08\u592b\uff09\u3002\n\n- \u30e1\u30e2\u30ea\u30ea\u30fc\u30af\uff08\u5fc5\u8981\u306a\u306e\u306fMap\u3060\u3051\u306a\u306e\u306b\u3001\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3082\u305a\u3063\u3068\u4fdd\u6301\u3057\u3066\u3057\u307e\u3046\uff09\n- \u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u5931\u6557\uff08Map\u3092\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u3057\u305f\u3044\u304c\u3001\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u304c\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u4e0d\u53ef\u80fd\u306e\u5834\u5408\uff09\n- \u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u30b5\u30a4\u30ba\u304c\u7121\u99c4\u306b\u5927\u304d\u304f\u306a\u308b\uff08\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\u3082\u30b7\u30ea\u30a2\u30e9\u30a4\u30ba\u53ef\u80fd\u306a\u5834\u5408\uff09\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30b9\u30b3\u30fc\u30d7\u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306bMap\u3092\u751f\u6210\u3057\u305f\u3068\u3057\u307e\u3059\u3002\n\n```java\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class Test {\n\n\tpublic void test() {\n\t\tMap<String, String> map = new HashMap<String, String>() {\n\t\t\t{\n\t\t\t\tput(\"one\", \"1st\");\n\t\t\t\tput(\"two\", \"2nd\");\n\t\t\t\tput(\"three\", \"3rd\");\n\t\t\t}\n\t\t};\n\t}\n}\n```\n\n\u533f\u540d\u30af\u30e9\u30b9\u306e\u9006\u30b3\u30f3\u30d1\u30a4\u30eb\u7d50\u679c\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u30a2\u30a6\u30bf\u30fc\u30af\u30e9\u30b9\uff08\u3053\u3053\u3067\u306f Test \u30af\u30e9\u30b9\uff09\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```java\nimport java.util.HashMap;\n\nclass Test$1 extends HashMap\n{\n\n    final Test this$0;\n\n    Test$1()\n    {\n        this$0 = Test.this;\n        super();\n        put(\"one\", \"1st\");\n        put(\"two\", \"2nd\");\n        put(\"three\", \"3rd\");\n    }\n}\n```\n\n## \u30d3\u30eb\u30c0\u30fc\u30d1\u30bf\u30fc\u30f3\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30d3\u30eb\u30c0\u30fc\u30af\u30e9\u30b9\u3092\u4f7f\u3063\u3066\u751f\u6210\u3059\u308b\u65b9\u6cd5\u3082\u826f\u304f\u4f7f\u308f\u308c\u307e\u3059\u3002\n\n```java\nimport java.util.Collections;\nimport java.util.LinkedHashMap;\nimport java.util.Map;\n\n/**\n * Map\u30d3\u30eb\u30c0\u30fc.<br>\n * \u5404\u30e1\u30bd\u30c3\u30c9\u306f\u30e1\u30bd\u30c3\u30c9\u30c1\u30a7\u30fc\u30f3\u3067\u547c\u3073\u51fa\u3059\u3053\u3068\u3092\u60f3\u5b9a.<br>\n */\npublic class MapBuilder<K, V> {\n\n\t/** \u751f\u6210\u3057\u305fMap */\n\tprivate final Map<K, V> map;\n\n\t/** Map\u30d3\u30eb\u30c0\u30fc\u3092\u751f\u6210 */\n\tpublic MapBuilder() {\n\t\tmap = new LinkedHashMap<>();\n\t}\n\n\t/** Map\u306b\u5024\u3092\u767b\u9332 */\n\tpublic MapBuilder<K, V> put(K key, V value) {\n\t\tmap.put(key, value);\n\t\treturn this;\n\t}\n\n\t/** \u7de8\u96c6\u53ef\u80fd\u306aMap\u3092\u8fd4\u3059 */\n\tpublic Map<K, V> toMap() {\n\t\treturn map;\n\t}\n\n\t/** \u7de8\u96c6\u4e0d\u53ef\u306aMap\u3092\u8fd4\u3059 */\n\tpublic Map<K, V> toConst() {\n\t\treturn Collections.unmodifiableMap(map);\n\t}\n}\n```\n\n```java\n// \u4f7f\u3044\u65b9\nMap<String, String> map = new MapBuilder<String, String>()\n    .put(\"one\", \"1st\")\n    .put(\"two\", \"2nd\")\n    .put(\"three\", \"3rd\")\n    .toConst();\n```\n\n\u30e1\u30ea\u30c3\u30c8\u306f\u7de8\u96c6\u53ef\u80fd\u306a\u30de\u30c3\u30d7\u3082\u3001\u7de8\u96c6\u4e0d\u80fd\u306a\u30de\u30c3\u30d7\u3082\u4f5c\u308c\u308b\u3053\u3068\u3002\n\n\u30c7\u30e1\u30ea\u30c3\u30c8\u306f\u30c0\u30a4\u30e4\u30e2\u30f3\u30c9\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u4f7f\u3048\u306a\u3044\u3053\u3068\u3002\n\n## \u30e9\u30e0\u30c0\u5f0f\n\n\u3069\u3046\u3057\u3066\u3082\u7dcf\u79f0\u578b\u3092\uff12\u56de\u66f8\u304d\u305f\u304f\u306a\u3044\u5834\u5408\u306b\u306f\u3001\u30e9\u30e0\u30c0\u5f0f\u3092\u4f7f\u3046\u65b9\u6cd5\u3082\u3042\u308a\u305d\u3046\u3067\u3059\u3002\n\n```java\npublic static <K, V> Map<K, V> toMap(Consumer<Map<K, V>> initializer) {\n    Map<K, V> map = new LinkedHashMap<>();\n    initializer.accept(map);\n    return map;\n}\n```\n\n```java\n// \u4f7f\u3044\u65b9\nMap<String, String> map = toMap(m -> {\n    m.put(\"one\", \"1st\");\n    m.put(\"two\", \"2nd\");\n    m.put(\"three\", \"3rd\");\n});\n```\n\n## \u30e9\u30e0\u30c0\uff0b\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\uff08Java8u60 \u4ee5\u964d\u306e\u5834\u5408\uff09\n\nJava8u60 \u4ee5\u964d\u3067\u3042\u308c\u3070\u3001\u30e9\u30e0\u30c0\u5f0f\u306e\u5f15\u6570\u540d\u304c\u30ea\u30d5\u30ec\u30af\u30b7\u30e7\u30f3\u3067\u53d6\u5f97\u53ef\u80fd\u306b\u306a\u3063\u3066\u3044\u308b\u3089\u3057\u304f\u3001\u9762\u767d\u3044\u521d\u671f\u5316\u306e\u4ed5\u65b9\u304c\u3067\u304d\u308b\u307f\u305f\u3044\u3067\u3059\u3002\n\n\u53c2\u8003\uff1a[Java 8u60\u3067\u3001Map\u306e\u521d\u671f\u5316\u3068\u304b\u304c\u3059\u3054\u3044\u697d\u306b\u306a\u3063\u3066\u308b\u4ef6](http://mike-neck.hatenadiary.com/entry/2015/08/21/034542)\n\n\u95a2\u4fc2\u3057\u305d\u3046\u306a\u90e8\u5206\u3060\u3051\u5207\u308a\u51fa\u3057\u3066\u5b9f\u884c\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```java\nimport java.io.Serializable;\nimport java.lang.invoke.SerializedLambda;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Parameter;\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.Map;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\n/** \u30e9\u30e0\u30c0\u5f0f\u306e\u5909\u6570\u540d\u3092\u53d6\u5f97\u3057\u3066\u30de\u30c3\u30d7\u3092\u5b9a\u7fa9\u3059\u308b\u30c6\u30b9\u30c8 */\npublic class LambdaNameMap {\n\t\n\t/** \u30c6\u30b9\u30c8\u5b9f\u884c */\n\tpublic static void main(String[] args) throws Exception {\n\t\tSystem.out.println(System.getProperty(\"java.version\"));\n\t\t\n        // \u3053\u3093\u306a\u611f\u3058\u3067\u30de\u30c3\u30d7\u304c\u4f5c\u308c\u308b\n\t\tMap<String, String> map = toConstMap(\n\t\t\t\tone -> \"1st\",\n\t\t\t\ttwo -> \"2nd\",\n\t\t\t\tthree -> \"3rd\");\n\t\t\n\t\tSystem.out.println(map);\n\t}\n\n\t/** \u540d\u524d\u4ed8\u304d\u306e\u5024\u306e\u305f\u3081\u306e\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9 */\n\tpublic interface NamedValue<T> extends Function<String, T>, Serializable {\n\t\t\n\t\tdefault T value() {\n\t\t\treturn apply(name());\n\t\t}\n\t\t\n\t\tdefault String name() {\n\t\t\treturn getName(this);\n\t\t}\n\t}\n\t\n\t/** \u5909\u66f4\u4e0d\u80fd\u30de\u30c3\u30d7\u3092\u751f\u6210 */\n\t@SafeVarargs\n\tpublic static <T> Map<String, T> toConstMap(NamedValue<T>... namedValues) {\n\t\tMap<String, T> map = Arrays.stream(namedValues)\n\t\t\t\t.collect(Collectors.toMap(namedValue -> namedValue.name(), namedValue->namedValue.value()));\n\t\treturn Collections.unmodifiableMap(map);\n\t}\n\n\t/** \u30e9\u30e0\u30c0\u5f0f\u304b\u3089\u5909\u6570\u306e\u540d\u524d\u3092\u53d6\u5f97 */\n\tprivate static <T> String getName(Function<String, T> func) {\n\t\tSerializedLambda lambdaInfo = toSerializedLambda(func);\n\t\tMethod method = getMethod(lambdaInfo, String.class);\n\t\t\n\t\tParameter parameter = method.getParameters()[0];\n\t\tif (!parameter.isNamePresent()) {\n\t\t\tthrow new IllegalStateException(\"no name\");\n\t\t}\n\t\treturn parameter.getName();\n\t}\n\t\n\t/** SerializedLambda \u304b\u3089\u6307\u5b9a\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u53d6\u5f97 */\n\tprivate static Method getMethod(SerializedLambda lambdaInfo, Class<?>... argClasses) {\n\t\ttry {\n\t\t\t// \u5b9f\u88c5\u30af\u30e9\u30b9\u540d\n\t\t\tString implClassName = lambdaInfo.getImplClass().replace('/', '.');\n\t\t\tClass<?> implClass = Class.forName(implClassName);\n\t\t\t\n\t\t\t// \u5b9f\u88c5\u30e1\u30bd\u30c3\u30c9\u540d\n\t\t\tString implMethodName = lambdaInfo.getImplMethodName();\n\t\t\tMethod implMethod = implClass.getDeclaredMethod(implMethodName, argClasses);\n\t\t\treturn implMethod;\n\t\t} catch (Exception e) {\n\t\t\tthrow new RuntimeException(e);\n\t\t}\n\t}\n\t\n\t/** \u30e9\u30e0\u30c0\u5f0f\u304b\u3089 SerializedLambda \u3092\u53d6\u5f97 */\n\tprivate static SerializedLambda toSerializedLambda(Object lambda) {\n\t\ttry {\n\t\t\tMethod replaceMethod = lambda.getClass().getDeclaredMethod(\"writeReplace\");\n\t\t\treplaceMethod.setAccessible(true);\n\t\t\treturn (SerializedLambda) replaceMethod.invoke(lambda);\n\n\t\t} catch (Exception e) {\n\t\t\tthrow new RuntimeException(e);\n\t\t}\n\t}\n}\n```\n\n\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u306f javac \u306b `-parameters` \u3092\u4ed8\u3051\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3082\u3057Eclipse \u306e\u5834\u5408\u306b\u306f\u3001`-parameters` \u306e\u4ee3\u308f\u308a\u306b\u30d7\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\u306eJava/Compiler\u306e\"Store inforation about method parameters (usable via reflection)\" \u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u3066\u304f\u3060\u3055\u3044\u3002\n\uff08\u3042\u308b\u3044\u306f\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u30d7\u30ed\u30d1\u30c6\u30a3\u306e Java Compiler \u306e\u540c\u540d\u306e\u9805\u76ee\uff09\n\n\u5b9f\u884c\u7d50\u679c\u306f\u3053\u3046\u306a\u308a\u307e\u3057\u305f\u3002\n\n```\n1.8.0_65\n{one=1st, three=3rd, two=2nd}\n```\n\n\u975e\u5e38\u306b\u8208\u5473\u6df1\u3044\u3067\u3059\u304c\u3001\u30c7\u30e1\u30ea\u30c3\u30c8\u3082\u3042\u308b\u304b\u3068\u3002\n\n- \u30ad\u30fc\u306f\u5909\u6570\u540d\u306b\u4f7f\u3048\u308b\u3082\u306e\u3060\u3051\n- \u73fe\u6642\u70b9\u3067\u306f\u52d5\u4f5c\u74b0\u5883\u304c\u5c11\u306a\u3044\uff08Java9\u306a\u3069\u306b\u5207\u308a\u66ff\u308f\u3063\u305f\u5f8c\u306a\u3089\u5b89\u5fc3\u3057\u3066\u4f7f\u3048\u308b\u304b\u3082\u306d\uff09\n- \u30b3\u30f3\u30d1\u30a4\u30eb\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u5909\u66f4\u3057\u306a\u3044\u3068\u4f7f\u3048\u306a\u3044\n\n## \u666e\u901a\u306e\u521d\u671f\u5316\n\n\u5927\u62b5\u306e\u5834\u5408\u306b\u306f\u3001\u5909\u306a\u6280\u5de7\u3092\u3053\u3089\u3055\u305a\u611a\u76f4\u306b\u521d\u671f\u5316\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30af\u30e9\u30b9\u30b9\u30bf\u30c6\u30a3\u30c3\u30af\u306a\u5909\u6570\u306e\u5834\u5408\u306b\u306fstatic\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u3002\n\n```java\nprivate static final Map<String, String> CONST_MAP;\nstatic {\n    Map<String, string> map = new LinkedHashMap<>();\n    map.put(\"one\", \"1st\");\n    map.put(\"two\", \"2nd\");\n    map.put(\"three\", \"3rd\");\n    CONST_MAP = Collections.unmodifiableMap(map);\n}\n```\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306a\u5909\u6570\u306e\u5834\u5408\u306b\u306f\u30a4\u30cb\u30b7\u30e3\u30e9\u30a4\u30b6\u304b\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3002\n\n```java\nprivate final Map<String, String> map;\n{\n    map = new LinkedHashMap<>();\n    map.put(\"one\", \"1st\");\n    map.put(\"two\", \"2nd\");\n    map.put(\"three\", \"3rd\");\n}\n```\n\n\u30ed\u30fc\u30ab\u30eb\u5909\u6570\u306a\u3089\u751f\u6210\u5f8c\u306b\u9806\u6b21\u3002\n\n```java\nMap<String, string> map = new LinkedHashMap<>();\nmap.put(\"one\", \"1st\");\nmap.put(\"two\", \"2nd\");\nmap.put(\"three\", \"3rd\");\n```\n\n\u3042\u308b\u3044\u306f\u3001\u30de\u30c3\u30d7\u3092\u751f\u6210\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3092\u5225\u9014\u7528\u610f\u3059\u308b\u65b9\u6cd5\u3082\u826f\u304f\u4f7f\u308f\u308c\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```java\nprivate static final Map<String, String> CONST_MAP = createMap();\n\nprivate static Map<String, String> createMap() {\n    Map<String, string> map = new LinkedHashMap<>();\n    map.put(\"one\", \"1st\");\n    map.put(\"two\", \"2nd\");\n    map.put(\"three\", \"3rd\");\n    return Collections.unmodifiableMap(map);\n}\n```\n\n# Hashtable \u306e contains() \u30e1\u30bd\u30c3\u30c9\n\nMap \u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306b\u306f containsKey(), containsValue() \u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u3068\u3053\u308d\u304c\u3001Hashtable \u3084\u305d\u306e\u5b50\u30af\u30e9\u30b9\u306e Properties \u306b\u306f\u3053\u306e\u307b\u304b\u306b contains() \u30e1\u30bd\u30c3\u30c9\u3082\u3042\u308a\u307e\u3059\u3002\u52d5\u4f5c\u7684\u306b\u306f containsValue()\u3068\u540c\u3058\u3082\u306e\u3067\u3059\u3002\n\u540d\u524d\u304c\u4f3c\u3066\u3044\u308b\u306e\u3067 containsKey() \u3068\u9593\u9055\u3048\u306a\u3044\u3088\u3046\u306b\u3054\u6ce8\u610f\u3092\u3002\n", "tags": ["Java", "map"]}