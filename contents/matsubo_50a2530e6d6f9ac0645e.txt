{"context": " More than 1 year has passed since last update.\n\nCLI\u3067\u30e6\u30fc\u30b6\u8ffd\u52a0\u3059\u308b\n\nMac\u3067\u306e\u30e6\u30fc\u30b6\u7ba1\u7406\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30b5\u30fc\u30d3\u30b9\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001dscl\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066\u64cd\u4f5c\u3057\u307e\u3059\u3002\n Web\u4e0a\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001UID\u3084GID\u306f\u81ea\u52d5\u7684\u306b\u63a1\u756a\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n\n\nTARGETUSER\u3068PASSWORD\u3092\u5909\u66f4\u3057\u3066\u3054\u5229\u7528\u304f\u3060\u3055\u3044\u3002\nroot\u6a29\u9650\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\n\n#!/bin/zsh\n\nTARGETUSER=newuser\nPASSWORD=\"newpassword\"\n\nGID=`dscl . list groups gid|grep \\^staff | tail  -1  | awk '{print $2}'`\n\ndscl . -create /Users/$TARGETUSER\ndscl . -create /Users/$TARGETUSER UserShell /bin/bash\ndscl . -create /Users/$TARGETUSER RealName $TARGETUSER\n\nmaxid=$(dscl . -list /Users UniqueID | awk '{print $2}' | sort -ug | tail -1)\nnewid=$((maxid+1))\n\ndscl . -create /Users/$TARGETUSER UniqueID         $newid\ndscl . -create /Users/$TARGETUSER PrimaryGroupID   $GID\ndscl . -create /Users/$TARGETUSER NFSHomeDirectory /Users/$TARGETUSER\n\ncp -a /System/Library/User\\ Template/English.lproj /Users/$TARGETUSER\nchown -R $TARGETUSER\\:staff /Users/$TARGETUSER\nchmod 701 /Users/$TARGETUSER\ndscl . -passwd /Users/$TARGETUSER $PASSWORD\n\n# CLI\u3067\u30e6\u30fc\u30b6\u8ffd\u52a0\u3059\u308b\n* Mac\u3067\u306e\u30e6\u30fc\u30b6\u7ba1\u7406\u306f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30b5\u30fc\u30d3\u30b9\u306b\u3088\u3063\u3066\u7ba1\u7406\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001dscl\u30b3\u30de\u30f3\u30c9\u306b\u3088\u3063\u3066\u64cd\u4f5c\u3057\u307e\u3059\u3002\n*  Web\u4e0a\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u30b5\u30f3\u30d7\u30eb\u3067\u306f\u3001UID\u3084GID\u306f\u81ea\u52d5\u7684\u306b\u63a1\u756a\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n# \u30b5\u30f3\u30d7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\n* `TARGETUSER`\u3068`PASSWORD`\u3092\u5909\u66f4\u3057\u3066\u3054\u5229\u7528\u304f\u3060\u3055\u3044\u3002\n* root\u6a29\u9650\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\n\n```zsh\n#!/bin/zsh\n\nTARGETUSER=newuser\nPASSWORD=\"newpassword\"\n\nGID=`dscl . list groups gid|grep \\^staff | tail  -1  | awk '{print $2}'`\n\ndscl . -create /Users/$TARGETUSER\ndscl . -create /Users/$TARGETUSER UserShell /bin/bash\ndscl . -create /Users/$TARGETUSER RealName $TARGETUSER\n\nmaxid=$(dscl . -list /Users UniqueID | awk '{print $2}' | sort -ug | tail -1)\nnewid=$((maxid+1))\n\ndscl . -create /Users/$TARGETUSER UniqueID         $newid\ndscl . -create /Users/$TARGETUSER PrimaryGroupID   $GID\ndscl . -create /Users/$TARGETUSER NFSHomeDirectory /Users/$TARGETUSER\n\ncp -a /System/Library/User\\ Template/English.lproj /Users/$TARGETUSER\nchown -R $TARGETUSER\\:staff /Users/$TARGETUSER\nchmod 701 /Users/$TARGETUSER\ndscl . -passwd /Users/$TARGETUSER $PASSWORD\n```\n", "tags": ["MacOSX10.8", "Zsh", "Bash", "cli", "devops"]}