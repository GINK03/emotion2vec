{"context": "\u5927\u91cf\u306e\u51e6\u7406\u3092\u3055\u3070\u304f\u305f\u3081\u306b\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O\u3068\u3044\u3046\u30e2\u30c7\u30eb\u3092\u63a1\u7528\u3057\u305f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3002\n\u4eca\u56de\u306f\u300cnodejs\u300d\u3000\u306e\u6700\u5c0f\u69cb\u6210\u3092\u69cb\u7bc9\u3057\u3066\u884c\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nnodejs\u3068\u306f\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9javascript\u3002\ngoogle\u304c\u958b\u767a\u3057\u305fV8\u30a8\u30f3\u30b8\u30f3\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u8a00\u8a9e\u3002\n\nexpress\u3068\u306f\nNode.js \u5411\u3051\u306e\u9ad8\u901f\u3067\u6700\u5c0f\u9650\u306e Web \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\nsequelize\u3068\u306f\nNoje.js\u5411\u3051\u306eORM\u3002PostgreSQL, MySQL, SQLite\u3000, MSSQL\u7b49\u3092\u30b5\u30dd\u30fc\u30c8\u3002\n\n\u74b0\u5883\u3068IDE\nmac osx 10.9.5\nmysql 5.6.31\neclipse neon + nodeclipse\n\nnodejs\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhomebrew\u3067nodejs\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nnpm\u3068\u3044\u3046nodejs\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb\u3082\u540c\u6642\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n$ brew install node\n\n\nexpress-generator\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nexpress-generator\u306fexpress\u306e\u30b9\u30b1\u30eb\u30c8\u30f3\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u96db\u5f62\uff09\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3059\u3002\n$ npm install express-generator -g\n\n\nexpress\u30b9\u30b1\u30eb\u30c8\u30f3\u4f5c\u6210\n$ express node_base\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\nnode_base(workfolder)\n\u251c\u2500app.js\n\u251c\u2500package.json\n\u251c\u2500public\n\u2502\u3000\u251c\u2500images\n\u2502\u3000\u251c\u2500javascripts\n\u2502\u3000\u2514\u2500stylesheets\n\u2502\u3000 \u3000\u2514\u2500style.css\n\u251c\u2500routes\n\u2502\u3000\u251c\u2500index.js\n\u2502\u3000\u2514\u2500users.js\n\u251c\u2500bin\n\u2502\u3000\u2514\u2500www\n\u2514\u2500views\n \u3000\u251c\u2500error.jade\n \u3000\u251c\u2500layout.jade\n \u3000\u2514\u2500index.jade\n\n\nsequelize\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u306fnode_base\u5185\u306epackage.json\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\npackage.json\u306fnpm\u3067\u306e\u4f9d\u5b58\u95a2\u4fc2\u7b49\u3092\u307e\u3068\u3081\u3066\u3044\u308bjson\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n\ndependencies\u306b\u8ffd\u52a0\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3002\n\"mysql\": \"~2.11.1\",\n\"sequelize\": \"~3.23.6\",\n\n\nnode_base/package.json\n{\n  \"name\": \"node_base\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"node ./bin/www\"\n  },\n  \"dependencies\": {\n    \"body-parser\": \"~1.15.1\",\n    \"cookie-parser\": \"~1.4.3\",\n    \"debug\": \"~2.2.0\",\n    \"express\": \"~4.13.4\",\n    \"jade\": \"~1.11.0\",\n    \"morgan\": \"~1.7.0\",\n    \"serve-favicon\": \"~2.3.0\",\n    \"mysql\": \"~2.11.1\",\n    \"sequelize\": \"~3.23.6\"\n  }\n}\n\n\n\nnpm install\n\u8ffd\u52a0\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ pwd \npath/to/workspace/node_base\n$ npm install\n\n\nsequelize-cli\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsequelize-cli\u306fSequelize\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u3059\u3002\n\u8272\u3005\u4fbf\u5229\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\n$ npm install -g sequelize-cli\n\n\nDB\u4f5c\u6210\u3000& db migration\u5b9f\u884c\n\u307e\u305a\u306f\u3001sequelize\u306e\u74b0\u5883\u3092\u4f5c\u308b\u305f\u3081\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n$ sequelize init\n\nnode_base\u30d5\u30a9\u30eb\u30c0\u5185\u306b\u4e0b\u8a18\u306e\u30d5\u30a9\u30eb\u30c0\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\nnode_base(workfolder)\n\u251c\u2500config\n\u2502\u3000\u2514\u2500config.json # DB\u5468\u308a\u306e\u8a2d\u5b9a\u60c5\u5831\u304c\u8a18\u8f09\n\u251c\u2500migrations\u3000\u3000# sequelize-cli\u3067migration\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u969b\u306b\u683c\u7d0d\u3055\u308c\u308b\u30d5\u30a9\u30eb\u30c0\n\u251c\u2500seeders\n\u2514\u2500models  # sequelize-cli\u3067model\u3092\u4f5c\u6210\u3057\u305f\u969b\u306b\u683c\u7d0d\u3055\u308c\u308b\u30d5\u30a9\u30eb\u30c0\n\n\u4f5c\u6210\u3057\u305fmodel\u306b\u5bfe\u5fdc\u3057\u305fDB\u306e\u30c6\u30fc\u30d6\u30eb\u3092migration\u3059\u308b\u305f\u3081\u306bmysql\u306bDB\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u6d41\u3057\u8fbc\u307e\u308c\u308bDB\u306e\u60c5\u5831\u306fconfig/config.json\u5185\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nconfig/config.json\n{\n  \"development\": {\n    \"username\": \"root\",\n    \"password\": null,\n    \"database\": \"node_base\",\n    \"host\": \"127.0.0.1\",\n    \"dialect\": \"mysql\"\n  },\n  \"test\": {\n    \"username\": \"root\",\n    \"password\": null,\n    \"database\": \"node_base_test\",\n    \"host\": \"127.0.0.1\",\n    \"dialect\": \"mysql\"\n  },\n  \"production\": {\n    \"username\": \"root\",\n    \"password\": null,\n    \"database\": \"node_base\",\n    \"host\": \"127.0.0.1\",\n    \"dialect\": \"mysql\"\n  }\n}\n\n\nconfig.json\u306b\u306f\u5404\u74b0\u5883\u6bce\u306bDB\u8a2d\u5b9a\u60c5\u5831\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nSQL\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 & \u6d41\u3057\u8fbc\u307f\nSQL\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nconfig/db.sql\nCREATE DATABASE node_base;\n\n\nDB\u306b\u6d41\u3057\u8fbc\u307f\u307e\u3059\u3002\n$ mysql -u root < config/db.sql \n\n\nmodel & migration\u4f5c\u6210\nsequelize-cli\u3067model\u3084db\u5468\u308a\u3092\u4f5c\u6210\u3057\u3066\u884c\u304d\u307e\u3059\u3002\n\nmodel\u4f5c\u6210\nUser\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068models\u30d5\u30a9\u30eb\u30c0\u5185\u306buser.js\u304c\u4f5c\u3089\u308cmigrations\u30d5\u30a9\u30eb\u30c0\u306bmodel\u306ecreate\u7528\u306emigration\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n$ sequelize model:create --name User --attributes name:string\n\n\nmigration\u4f5c\u6210\n\u4e0a\u8a18\u3067\u65e2\u306bUser model\u306emigration\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3053\u3067migration\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002db:migrate\u3092\u5b9f\u884c\u3059\u308b\u6642\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067migration\u3092\u4f5c\u6210\u3057\u3066\u3044\u306a\u3044\u3068\u5b9f\u884c\u3067\u304d\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u304a\u305d\u3089\u304f\u5fc5\u8981\u306a\u3093\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n$ sequelize migration:create\n\n\ndb migration\u5b9f\u884c\n$ sequelize db:migrate\n\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b8c\u4e86\u3059\u308b\u3068DB\u5185\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fUser\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\nuserAPI\u4f5c\u6210\nexpress-generator\u3067\u30b9\u30b1\u30eb\u30c8\u30f3\u3092\u4f5c\u308b\u3068\u65e2\u306buserAPI\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u3061\u3089\u3092\u3044\u3058\u3063\u3066user\u306eid\u3068name\u3092\u6e21\u3057\u305f\u3089Users\u30c6\u30fc\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u4f5c\u6210 or \u691c\u7d22\u3092\u884c\u3046\u3088\u3046\u306aAPI\u3092\u4f5c\u308a\u307e\u3059\u3002\n\nroutes/users.js\nvar express = require('express');\nvar models = require(\"../models\");\n\nvar router = express.Router();\n\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n  var user_id = req.query.user_id;\n  var name = req.query.name;\n  models.User.findOrCreate(\n    {\"where\": {\"id\": user_id}, \n     \"defaults\": {\"id\": user_id, \"name\": name}}\n  ).spread(function(user, created){\n    res.send({\"user\": user, \"created\": created});\n  });\n});\n\nmodule.exports = router;\n\n\n\n\u30b5\u30fc\u30d0\u8d77\u52d5 & API\u30c6\u30b9\u30c8\n\u30b5\u30fc\u30d0\u8d77\u52d5\u3092\u8d77\u52d5\u3057\u3066API\u306e\u78ba\u8a8d\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n$ npm start\n\nhttp://127.0.0.1:3000/users/?user_id=1&name=test\n\u3053\u3061\u3089\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\n\n\ngithub\n\u4e0a\u8a18\u5bfe\u5fdc\u3092\u884c\u3063\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092github\u306b\u3042\u3052\u3066\u3044\u308b\u306e\u3067\u3001\u8208\u5473\u304c\u3042\u308b\u65b9\u306fclone\u3057\u3066\u307f\u3066\u4e0b\u3055\u3044\u3002\nhttps://github.com/yu-sa/node_base\n\n\u3000\u307e\u3068\u3081\n\ndefacto standard\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u7b49\u304c\u5145\u5b9f\u3057\u3066\u304a\u308a\u3001\u7c21\u5358\u306aweb\u30b5\u30fc\u30d0\u306f\u3059\u3050\u4f5c\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O\u30e2\u30c7\u30eb\u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u4e8b\u306b\u3088\u308a\u3001\u51e6\u7406\u3092\u975e\u540c\u671f\u3067\u5b9f\u884c\u3057\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u901f\u3084\u304b\u306b\u8fd4\u3059\u9803\u304c\u51fa\u6765\u308b\u305f\u3081\u3001\u8a2d\u8a08\u7b49\u3092\u3057\u3063\u304b\u308a\u3068\u884c\u3048\u3070\u9ad8\u901f\u306aweb\u30b5\u30fc\u30d0\u3092\u4f5c\u6210\u3059\u308b\u4e8b\u304c\u51fa\u6765\u305d\u3046\u3067\u3001\u4f5c\u3063\u3066\u3044\u3066\u9762\u767d\u305d\u3046\u306a\u8a00\u8a9e\u3067\u3042\u308b\u3068\u611f\u3058\u307e\u3057\u305f\u3002\n\n\n\u5927\u91cf\u306e\u51e6\u7406\u3092\u3055\u3070\u304f\u305f\u3081\u306b\u3001\u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O\u3068\u3044\u3046\u30e2\u30c7\u30eb\u3092\u63a1\u7528\u3057\u305f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3002\n\u4eca\u56de\u306f\u300cnodejs\u300d\u3000\u306e\u6700\u5c0f\u69cb\u6210\u3092\u69cb\u7bc9\u3057\u3066\u884c\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# nodejs\u3068\u306f\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9javascript\u3002\ngoogle\u304c\u958b\u767a\u3057\u305fV8\u30a8\u30f3\u30b8\u30f3\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u8a00\u8a9e\u3002\n\n# express\u3068\u306f\nNode.js \u5411\u3051\u306e\u9ad8\u901f\u3067\u6700\u5c0f\u9650\u306e Web \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3002\n\n# sequelize\u3068\u306f\nNoje.js\u5411\u3051\u306eORM\u3002PostgreSQL, MySQL, SQLite\u3000, MSSQL\u7b49\u3092\u30b5\u30dd\u30fc\u30c8\u3002\n\n# \u74b0\u5883\u3068IDE\nmac osx 10.9.5\nmysql 5.6.31\neclipse neon + nodeclipse\n\n# nodejs\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nhomebrew\u3067nodejs\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\nnpm\u3068\u3044\u3046nodejs\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u7ba1\u7406\u30c4\u30fc\u30eb\u3082\u540c\u6642\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\n```\n$ brew install node\n```\n\n# express-generator\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nexpress-generator\u306fexpress\u306e\u30b9\u30b1\u30eb\u30c8\u30f3\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u96db\u5f62\uff09\u3092\u4f5c\u6210\u3059\u308b\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3067\u3059\u3002\n\n```\n$ npm install express-generator -g\n```\n\n# express\u30b9\u30b1\u30eb\u30c8\u30f3\u4f5c\u6210\n\n```\n$ express node_base\n```\n\n\u30d5\u30a9\u30eb\u30c0\u69cb\u6210\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\n\n```\nnode_base(workfolder)\n\u251c\u2500app.js\n\u251c\u2500package.json\n\u251c\u2500public\n\u2502\u3000\u251c\u2500images\n\u2502\u3000\u251c\u2500javascripts\n\u2502\u3000\u2514\u2500stylesheets\n\u2502\u3000 \u3000\u2514\u2500style.css\n\u251c\u2500routes\n\u2502\u3000\u251c\u2500index.js\n\u2502\u3000\u2514\u2500users.js\n\u251c\u2500bin\n\u2502\u3000\u2514\u2500www\n\u2514\u2500views\n \u3000\u251c\u2500error.jade\n \u3000\u251c\u2500layout.jade\n \u3000\u2514\u2500index.jade\n```\n\n# sequelize\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u306fnode_base\u5185\u306epackage.json\u3092\u4fee\u6b63\u3057\u307e\u3059\u3002\npackage.json\u306fnpm\u3067\u306e\u4f9d\u5b58\u95a2\u4fc2\u7b49\u3092\u307e\u3068\u3081\u3066\u3044\u308bjson\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\n\n### dependencies\u306b\u8ffd\u52a0\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3002\n\n```\n\"mysql\": \"~2.11.1\",\n\"sequelize\": \"~3.23.6\",\n```\n\n``` node_base/package.json\n{\n  \"name\": \"node_base\",\n  \"version\": \"0.0.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"start\": \"node ./bin/www\"\n  },\n  \"dependencies\": {\n    \"body-parser\": \"~1.15.1\",\n    \"cookie-parser\": \"~1.4.3\",\n    \"debug\": \"~2.2.0\",\n    \"express\": \"~4.13.4\",\n    \"jade\": \"~1.11.0\",\n    \"morgan\": \"~1.7.0\",\n    \"serve-favicon\": \"~2.3.0\",\n    \"mysql\": \"~2.11.1\",\n    \"sequelize\": \"~3.23.6\"\n  }\n}\n```\n\n### npm install\n\u8ffd\u52a0\u3057\u305f\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n$ pwd \npath/to/workspace/node_base\n$ npm install\n```\n\n#### sequelize-cli\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsequelize-cli\u306fSequelize\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u3067\u3059\u3002\n\u8272\u3005\u4fbf\u5229\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\n\n```\n$ npm install -g sequelize-cli\n```\n\n\n\n# DB\u4f5c\u6210\u3000& db migration\u5b9f\u884c\n\u307e\u305a\u306f\u3001sequelize\u306e\u74b0\u5883\u3092\u4f5c\u308b\u305f\u3081\u521d\u671f\u5316\u3057\u307e\u3059\u3002\n\n```\n$ sequelize init\n```\n\nnode_base\u30d5\u30a9\u30eb\u30c0\u5185\u306b\u4e0b\u8a18\u306e\u30d5\u30a9\u30eb\u30c0\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```\nnode_base(workfolder)\n\u251c\u2500config\n\u2502\u3000\u2514\u2500config.json # DB\u5468\u308a\u306e\u8a2d\u5b9a\u60c5\u5831\u304c\u8a18\u8f09\n\u251c\u2500migrations\u3000\u3000# sequelize-cli\u3067migration\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u969b\u306b\u683c\u7d0d\u3055\u308c\u308b\u30d5\u30a9\u30eb\u30c0\n\u251c\u2500seeders\n\u2514\u2500models  # sequelize-cli\u3067model\u3092\u4f5c\u6210\u3057\u305f\u969b\u306b\u683c\u7d0d\u3055\u308c\u308b\u30d5\u30a9\u30eb\u30c0\n```\n\n\u4f5c\u6210\u3057\u305fmodel\u306b\u5bfe\u5fdc\u3057\u305fDB\u306e\u30c6\u30fc\u30d6\u30eb\u3092migration\u3059\u308b\u305f\u3081\u306bmysql\u306bDB\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u6d41\u3057\u8fbc\u307e\u308c\u308bDB\u306e\u60c5\u5831\u306f`config/config.json`\u5185\u306b\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n``` config/config.json \n{\n  \"development\": {\n    \"username\": \"root\",\n    \"password\": null,\n    \"database\": \"node_base\",\n    \"host\": \"127.0.0.1\",\n    \"dialect\": \"mysql\"\n  },\n  \"test\": {\n    \"username\": \"root\",\n    \"password\": null,\n    \"database\": \"node_base_test\",\n    \"host\": \"127.0.0.1\",\n    \"dialect\": \"mysql\"\n  },\n  \"production\": {\n    \"username\": \"root\",\n    \"password\": null,\n    \"database\": \"node_base\",\n    \"host\": \"127.0.0.1\",\n    \"dialect\": \"mysql\"\n  }\n}\n```\n\nconfig.json\u306b\u306f\u5404\u74b0\u5883\u6bce\u306bDB\u8a2d\u5b9a\u60c5\u5831\u304c\u8a18\u8f09\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n### SQL\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210 & \u6d41\u3057\u8fbc\u307f\nSQL\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n``` config/db.sql\nCREATE DATABASE node_base;\n```\n\nDB\u306b\u6d41\u3057\u8fbc\u307f\u307e\u3059\u3002\n\n```\n$ mysql -u root < config/db.sql \n```\n\n# model & migration\u4f5c\u6210\nsequelize-cli\u3067model\u3084db\u5468\u308a\u3092\u4f5c\u6210\u3057\u3066\u884c\u304d\u307e\u3059\u3002\n\n### model\u4f5c\u6210\nUser\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068models\u30d5\u30a9\u30eb\u30c0\u5185\u306buser.js\u304c\u4f5c\u3089\u308cmigrations\u30d5\u30a9\u30eb\u30c0\u306bmodel\u306ecreate\u7528\u306emigration\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```\n$ sequelize model:create --name User --attributes name:string\n```\n\n### migration\u4f5c\u6210\n\u4e0a\u8a18\u3067\u65e2\u306bUser model\u306emigration\u30d5\u30a1\u30a4\u30eb\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3053\u3067migration\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002db:migrate\u3092\u5b9f\u884c\u3059\u308b\u6642\u4e0b\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u3067migration\u3092\u4f5c\u6210\u3057\u3066\u3044\u306a\u3044\u3068\u5b9f\u884c\u3067\u304d\u306a\u304b\u3063\u305f\u305f\u3081\u3001\u304a\u305d\u3089\u304f\u5fc5\u8981\u306a\u3093\u3060\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\n$ sequelize migration:create\n```\n\n\n# db migration\u5b9f\u884c\n\n```\n$ sequelize db:migrate\n```\n\n\u4e0a\u8a18\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b8c\u4e86\u3059\u308b\u3068DB\u5185\u306b\u5148\u307b\u3069\u4f5c\u6210\u3057\u305fUser\u306e\u30c6\u30fc\u30d6\u30eb\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n# userAPI\u4f5c\u6210\nexpress-generator\u3067\u30b9\u30b1\u30eb\u30c8\u30f3\u3092\u4f5c\u308b\u3068\u65e2\u306buserAPI\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u305d\u3061\u3089\u3092\u3044\u3058\u3063\u3066user\u306eid\u3068name\u3092\u6e21\u3057\u305f\u3089Users\u30c6\u30fc\u30d6\u30eb\u306b\u30c7\u30fc\u30bf\u3092\u4f5c\u6210 or \u691c\u7d22\u3092\u884c\u3046\u3088\u3046\u306aAPI\u3092\u4f5c\u308a\u307e\u3059\u3002\n\n``` routes/users.js \nvar express = require('express');\nvar models = require(\"../models\");\n\nvar router = express.Router();\n\n\n/* GET users listing. */\nrouter.get('/', function(req, res, next) {\n  var user_id = req.query.user_id;\n  var name = req.query.name;\n  models.User.findOrCreate(\n    {\"where\": {\"id\": user_id}, \n     \"defaults\": {\"id\": user_id, \"name\": name}}\n  ).spread(function(user, created){\n    res.send({\"user\": user, \"created\": created});\n  });\n});\n\nmodule.exports = router;\n```\n\n# \u30b5\u30fc\u30d0\u8d77\u52d5 & API\u30c6\u30b9\u30c8\n\u30b5\u30fc\u30d0\u8d77\u52d5\u3092\u8d77\u52d5\u3057\u3066API\u306e\u78ba\u8a8d\u3092\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ npm start\n```\n\nhttp://127.0.0.1:3000/users/?user_id=1&name=test\n\u3053\u3061\u3089\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-07-24 11.43.01.png](https://qiita-image-store.s3.amazonaws.com/0/98305/17fc8320-fe74-de2e-abd5-6c0e7b04e25f.png)\n\n\n# github\n\u4e0a\u8a18\u5bfe\u5fdc\u3092\u884c\u3063\u305f\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092github\u306b\u3042\u3052\u3066\u3044\u308b\u306e\u3067\u3001\u8208\u5473\u304c\u3042\u308b\u65b9\u306fclone\u3057\u3066\u307f\u3066\u4e0b\u3055\u3044\u3002\nhttps://github.com/yu-sa/node_base\n\n#\u3000\u307e\u3068\u3081\n* defacto standard\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u7b49\u304c\u5145\u5b9f\u3057\u3066\u304a\u308a\u3001\u7c21\u5358\u306aweb\u30b5\u30fc\u30d0\u306f\u3059\u3050\u4f5c\u308c\u308b\u3088\u3046\u3067\u3059\u3002\n* \u30ce\u30f3\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0I/O\u30e2\u30c7\u30eb\u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u4e8b\u306b\u3088\u308a\u3001\u51e6\u7406\u3092\u975e\u540c\u671f\u3067\u5b9f\u884c\u3057\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u901f\u3084\u304b\u306b\u8fd4\u3059\u9803\u304c\u51fa\u6765\u308b\u305f\u3081\u3001\u8a2d\u8a08\u7b49\u3092\u3057\u3063\u304b\u308a\u3068\u884c\u3048\u3070\u9ad8\u901f\u306aweb\u30b5\u30fc\u30d0\u3092\u4f5c\u6210\u3059\u308b\u4e8b\u304c\u51fa\u6765\u305d\u3046\u3067\u3001\u4f5c\u3063\u3066\u3044\u3066\u9762\u767d\u305d\u3046\u306a\u8a00\u8a9e\u3067\u3042\u308b\u3068\u611f\u3058\u307e\u3057\u305f\u3002\n", "tags": ["nodejs", "Express", "sequelize", "npm", "JavaScript"]}