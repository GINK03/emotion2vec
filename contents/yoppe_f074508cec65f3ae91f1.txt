{"context": " More than 1 year has passed since last update.\u30d7\u30ed\u30b0\u30e9\u30de\u306e\u4e09\u5927\u7f8e\u5fb3\u306b\n\n\u6020\u6162(Laziness)\n\u77ed\u6c17(Impatience)\n\u50b2\u6162(Hubris)\n\n\u3063\u3066\u3042\u308a\u307e\u3059\u304c\u3001\u5927\u3057\u3066\u77ed\u6c17\u3067\u3082\u50b2\u6162\u3067\u3082\u306a\u3044\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u306f\u6020\u6162\u306b\u306a\u308d\u3046\u3068\u3057\u3066\u3044\u308b\u65b0\u5352\uff11\u5e74\u76ee\u306e\u6020\u6162\u30a8\u30f3\u30b8\u30cb\u30a2\u3067\u3059\u3002\n\n\u65e5\u3005\u306e\u3061\u3087\u3063\u3068\u3057\u305f\u30b9\u30c8\u30ec\u30b9\n\u30c1\u30fc\u30e0\u3067\u958b\u767a\u3057\u3066\u3044\u308b\u3068\u958b\u767a\u30e1\u30f3\u30d0\u30fc\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u5834\u9762\u3066\u591a\u304f\u3042\u308a\u307e\u305b\u3093\u304b\uff1f\n\u4f8b\u3048\u3070\u3001\n\n\u30d7\u30eb\u30ea\u30af\u306e\u30ec\u30d3\u30e5\u30ef\u30fc\u3092\u30bb\u30c3\u30c8\u3059\u308b\n\n\n\n\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3067\u9001\u308a\u5148\u3092\u6307\u5b9a\u3059\u308b\n\n\n\u30c1\u30fc\u30e0\u304c\uff13\u3001\uff14\u4eba\u7a0b\u5ea6\u306a\u3089\u307e\u3060\u82e6\u3067\u3082\u306a\u3044\u306e\u3067\u3059\u304c\uff11\uff10\u4eba\u3050\u3089\u3044\u306e\u30c1\u30fc\u30e0\u306b\u306a\u308b\u3068\u3001\n\u30d7\u30eb\u30ea\u30af\u3084\u30ec\u30d3\u30e5\u30fc\u3092\u304a\u9858\u3044\u3059\u308b\u5ea6\u306b\u3001\n\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u9001\u4fe1\u76f8\u624b\u306b\u6f0f\u308c\u304c\u306a\u3044\u304b\u78ba\u8a8d\u3057\u3066\u3068\u3044\u3046\u4f5c\u696d\u3092\u3001\n\u4e00\u65e5\u306b\u4f55\u5ea6\u3082\u4f55\u5ea6\u3082\u4f55\u5ea6\u3082\u3001\u3001\u3001\n\n(# \uff9f\u0414\uff9f)\uff92\uff9d\uff84\uff9e\uff78\uff7e\uff6a\uff6a!!\n\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u3092\u30ef\u30f3\u30dd\u30c1\u3067\u30ec\u30d3\u30e5\u30ef\u30fc\u3084\u9001\u4fe1\u76f8\u624b\u306b\u6307\u5b9a\u3067\u304d\u308b\u30dc\u30bf\u30f3\u3092\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3067\u4f5c\u3063\u3066\u3084\u308d\u3046\u3068\u601d\u3044\u7acb\u3061\u307e\u3057\u305f\uff08\uff3e\u03c9\uff3e#\uff09\n\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u306f\u3001\n\n\u30d6\u30c3\u30af\u30de\u30fc\u30af (\u304a\u6c17\u306b\u5165\u308a) \u3092\u5229\u7528\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306b\u4fbf\u5229\u306a\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b\u3082\u306e\u3067\u3059\u3002(\u5f15\u7528\uff1a\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8)\n\n\n\u4f5c\u308b\u3082\u306e\n\nTo\u4ed8\u304d\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\u6642\u3001\u56fa\u5b9a\u30e1\u30f3\u30d0\u30fc\u3092\u4e00\u62ec\u8ffd\u52a0\u3067\u304d\u308b\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\n\n\u203b\u4f1a\u793e\u3067\u306fChatwork\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u30b3\u30fc\u30c9\u306fChatwork\u7528\u3067\u3059\u3002\n\n\u5fc5\u8981\u6700\u5c0f\u9650\u306e\u6a5f\u80fd\u306e\u307f\n\nbookmarklet\njavascript: (function(d) {\n    cw_textarea = d.getElementById('_chatText');\n    cw_textarea.value = cw_textarea.value + '[To:0000]hoge [To:0000]fuga [To:0000]foo ';\n    cw_textarea.focus();\n})(document);\n\n\n\u3053\u308c\u3092\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306eURL\u306b\u8ffd\u52a0\u3059\u308c\u3070\u5b8c\u6210\u3067\u3059\u306d\u3002\n\n\u30d6\u30c3\u30af\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\n\nhoge\u3055\u3093\u3068fuga\u3055\u3093\u3068foo\u3055\u3093\u3092\u8ffd\u52a0\u3067\u304d\u307e\u3057\u305f\u306d\u3002\n\u3044\u3044\u611f\u3058\u3067\u3059\uff01\n\u3053\u308c\u306f\u3053\u308c\u3067\u30b7\u30f3\u30d7\u30eb\u3067\u3044\u3044\u306e\u3067\u3059\u304c\u3001\n\u4e00\u3064\u306e\u56fa\u5b9a\u30e1\u30f3\u30d0\u30fc\u3057\u304b\u8ffd\u52a0\u3067\u304d\u307e\u305b\u3093\u3057\u3001\u3082\u3046\u5c11\u3057\u9ad8\u6a5f\u80fd\u306b\u3057\u305f\u3044\u306a\u3068\u3001\u3001\n\n\u3061\u3087\u3063\u3068\u4fbf\u5229\u306b\n\u3055\u3063\u304d\u306e\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u6539\u826f\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u958b\u767a\u30e1\u30f3\u30d0\u30fc\u304b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30e1\u30f3\u30d0\u30fc\u5168\u54e1\u304b\u3092\u9078\u3079\u308b\n\u540d\u524d\u306e\u3042\u308aor\u306a\u3057\u3092\u8a2d\u5b9a\u3067\u304d\u308b\n\u540d\u524d\u306e\u6700\u5f8c\u306b\u6539\u884c\u3092\u8ffd\u52a0\u3059\u308b\u304b\u3092\u8a2d\u5b9a\u3067\u304d\u308b\n\u30c7\u30b6\u30a4\u30f3\u3044\u3044\u611f\u3058\u306b\n\n\nbookmarklet\njavascript: (function(d) {\n  var url = location.href,\n    bookmarklet = d.createElement('div');\n  bookmarklet.id = 'bookmarklet';\n  bookmarklet.innerHTML += '<div class=\"buttons\">' +\n      '<div class=\"cw-wrapper\">' +\n        '<div class=\"cw-buttons clearfix\">' +\n          '<span class=\"buttons-name\">' +\n            '<img src=\"https://www.chatwork.com/image/favicon/favicon00.ico\">Chatwork:' +\n          '</span>' +\n          '<button type=\"button\" onclick=\"setChatworkMember(\\'dev\\')\">\u30a8\u30f3\u30b8\u30cb\u30a2\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n          '<button type=\"button\" onclick=\"setChatworkMember(\\'all\\')\">\u3059\u3079\u3066\u306e\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n        '</div>' +\n        '<div class=\"cw-checkboxes\" clearfix>' +\n          '<input id=\"delete_newline\" type=\"checkbox\" name=\"delete_newline\" checked><label for=\"delete_newline\">\u6539\u884c\u524a\u9664</label>' +\n          '<input id=\"has_name\" type=\"checkbox\" name=\"has_name\" checked><label for=\"has_name\">\u540d\u524d\u3042\u308a</label>' +\n      '</div>' +\n    '</div>' +\n\n    '<div onclick=\"document.body.removeChild(document.body.firstChild);\" class=\"close\">\u9589\u3058\u308b</div>' +\n\n    '<style>' +\n    '#bookmarklet {position: fixed; z-index: 10000; top: 10px; right: 10px; width: 340px; height: 105px; border: solid 6px #C5DCEA; border-radius: 5px; box-shadow: black 1px 1px 8px; font-size: 13px; font-family: sans-serif; color: #4f4f4f; text-align: left; padding: 0; margin: 0; background-color: rgb(223, 244, 255); } #bookmarklet .buttons {margin: 10px 0;padding: 10px; height: 68px; } #bookmarklet .buttons button {width: 200px; float: right; } #bookmarklet .cw-buttons, #bookmarklet .stash-buttons {margin: 5px 10px 5px 0px; } #bookmarklet .cw-checkboxes label {margin-right: 10px; } #bookmarklet .buttons-name {font-size: 15px; font-weight: bold; text-align: right; width: 100px; } #bookmarklet .buttons-name img {width:17px; margin: 0px 3px -1px; } #bookmarklet .close {height:20px; width:80px; background-color:#009fff; color:white; text-align:center; font-size:15px; top:-10px; left:240px; line-height:1; padding:4px 0 0 0; position:absolute; cursor:pointer; } #bookmarklet .clearfix:after {content: \"\"; clear: both; display: block; }' +\n    '</style>';\n\n  setChatworkMember = function(group) {\n    if (location.hostname.indexOf('chatwork') == -1) {\n      alert('\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30da\u30fc\u30b8\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044');\n      return;\n    }\n    var cw_textarea = d.getElementById('_chatText');\n    cw_textarea.value = cw_textarea.value + getChatworkToMmmbers(group);\n    cw_textarea.focus();\n  };\n\n  getChatworkToMmmbers = function(group) {\n    var members = [\n      {'id': 5000000, 'position': 'engineer', 'name': 'Engineer1'},\n      {'id': 5000001, 'position': 'engineer', 'name': 'Engineer2'},\n      {'id': 5000002, 'position': 'engineer', 'name': 'Engineer3'},\n      {'id': 5000003, 'position': 'director', 'name': 'Director1'},\n      {'id': 5000004, 'position': 'director', 'name': 'Director2'},\n      {'id': 5000005, 'position': 'director', 'name': 'Director3'}\n    ];\n    var to_texts = {};\n    for (var i in members) {\n      var to_text = '[To:' + members[i].id + ']';\n      if (d.getElementById('has_name').checked) {\n        to_text += members[i].name;\n      }\n      to_text += (!d.getElementById('delete_newline').checked) ? '\\n' : ' ';\n      to_texts[members[i].id] = to_text;\n    }\n    var to_members = '';\n    switch (group) {\n      case 'dev':\n        for (var i in members) {\n          if (members[i].position === 'engineer') {\n            to_members += to_texts[members[i].id];\n          }\n        }\n        break;\n      case 'all':\n        for (var i in members) {\n          to_members += to_texts[members[i].id];\n        }\n        break;\n    }\n    return to_members;\n  };\n  d.body.insertBefore(bookmarklet, document.body.firstChild);\n})(document);\n\n\n\u767b\u9332\u3057\u305f\u30d6\u30c3\u30af\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u3001\n\n\u30d6\u30e9\u30a6\u30b6\u306e\u53f3\u4e0a\u306b\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u3067\u30dc\u30bf\u30f3\u3092\u30dd\u30c1\u308b\u3060\u3051\u3067\u3001\n\nEngineer1, Engineer2, Engineer3\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\n\u3044\u3044\u611f\u3058\u3067\u3059\u306d\u3002\n\u305f\u3060\u3001\u81ea\u5206\u4e00\u4eba\u3060\u3051\u304c\u4f7f\u3046\u3060\u3051\u306a\u3089\u3053\u308c\u3067\u554f\u984c\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u4f5c\u3063\u305f\u306e\u3067\u30e1\u30f3\u30d0\u30fc\u306b\u914d\u5e03\u3057\u305f\u3044\u306a\u3068\u3001\n\u3067\u3082\u30e1\u30f3\u30d0\u30fc\u304c\u5897\u3048\u305f\u308a\u6e1b\u3063\u305f\u308a\u3059\u308b\u5ea6\u306b\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u914d\u5e03\u3057\u306a\u304a\u3057\u3066\u518d\u5ea6\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u767b\u9332\u3057\u3066\u3082\u3089\u3046\u306e\u306f\u624b\u9593\u3060\u306a\u30fc\u3068\u3001\u3001\n\n\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u305f\u3081\u306b\n\u3082\u3063\u3068\u60f0\u6027\u3092\u8ffd\u6c42\u3057\u305f\u3044\u306e\u3067\u3001\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u914d\u4fe1\u3059\u308b\u304b\u305f\u3061\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\nbookmarklet\njavascript: (function(d) {\n    var s = d.createElement('script');\n    s.id = 'bookmarklet';\n    s.charset = 'UTF-8';\n    s.src = 'https://[\u914d\u4fe1\u30b5\u30fc\u30d0\u30fc\u306e\u30db\u30b9\u30c8]:8443/bookmarklet?time=' + (new Date()).getTime();\n    d.body.appendChild(s)\n})(document);\n\n\n\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u306e\u65b9\u306f\u3060\u3044\u3076\u30b9\u30c3\u30ad\u30ea\u3057\u307e\u3057\u305f\u306d\u3002\n\u7d9a\u3044\u3066\u3001JavaScript\u3092\u914d\u4fe1\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u3059\u3002\n\n\u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067\u4f7f\u3063\u305f\u3082\u306e\n\n\u8a00\u8a9e\uff1aRuby(2.1.3p242)\n\u30b5\u30fc\u30d0\u30fc:Webrick\n\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff1aSinatra\n\nSSL\u3092\u4f7f\u3063\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u4e0a\u304b\u3089\u306f\u5916\u90e8\u306eJavaScript\u3092\u52dd\u624b\u306b\u8aad\u307f\u8fbc\u3080\u3053\u3068\u306f\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u914d\u4fe1\u30b5\u30fc\u30d0\u30fc\u3067\u3082SSL\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\u3061\u306a\u307f\u306b\u3001\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3059\u308b\u3068SSL\u901a\u4fe1\u3058\u3083\u306a\u3044\u3068\u30c0\u30e1\u3060\u304a\u3063\u3066\u30a8\u30e9\u30fc\u304c\u5410\u304b\u308c\u307e\u3059\u3002\n\nMixed Content: The page at 'https://www.chatwork.com/' was loaded over HTTPS, but requested an insecure script 'http://localhost:8443/bookmarklet'. This request has been blocked; the content must be served over HTTPS.\n\nSSL\u306b\u95a2\u3057\u3066\u306f\u8a3c\u660e\u66f8\u3092\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u306e\u4f5c\u6210\u3092\u53c2\u8003\u306b\u4f5c\u308a\u3001myCA\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u8a2d\u7f6e\u3057\u307e\u3057\u305f\u3002\n\n\nGemfile\nsource \"https://rubygems.org\"\n\ngem \"rack\"\ngem \"webrick\"\ngem \"openssl\"\ngem \"net\"\ngem \"sinatra\"\ngem \"sinatra-contrib\"\ngem \"sinatra-cross_origin\", \"~> 0.3.1\"\ngem \"json\"\n\n\nconfig.yml\u3067\u30dd\u30fc\u30c8\u3068\u8a3c\u660e\u66f8\u30d1\u30b9\u306e\u8a2d\u5b9a\n\nconfig.yml\nport: 8443\ncert_path:\n  certificate: ./myCA/server.crt\n  private_key: ./myCA/server.key\n\n\nmembers.yml\u3067\u30e1\u30f3\u30d0\u30fc\u306e\u60c5\u5831\u3092\u7ba1\u7406\n\nmembers.yml\n- {id: 5000000, position: engineer, name: Engineer1}\n- {id: 5000001, position: engineer, name: Engineer2}\n- {id: 5000002, position: engineer, name: Engineer3}\n- {id: 5000003, position: director, name: Director1}\n- {id: 5000004, position: director, name: Director2}\n- {id: 5000005, position: director, name: Director3}\n\n\n\u4ee5\u4e0b\u304c\u30e1\u30a4\u30f3\u306e\u914d\u4fe1\u30b5\u30fc\u30d0\u30fc\u3067\u3059\u3002\n\nbookmarklet_provider.rb\nrequire 'webrick'\nrequire 'webrick/https'\nrequire 'openssl'\nrequire 'sinatra'\nrequire 'sinatra/base'\nrequire 'sinatra/cross_origin'\nrequire 'sinatra/reloader'\nrequire 'net/https'\nrequire 'json'\nrequire 'yaml'\n\nset :environment, :production\n\nconf = YAML.load_file('config.yml')\nCURRENT_DIR_PATH = Dir.pwd\n\nclass BookmarkletProvider < Sinatra::Base\n    register Sinatra::CrossOrigin\n\n    before do\n        cross_origin\n        content_type :js\n    end\n\n    get '/bookmarklet' do\n        members = YAML.load_file(File.join(CURRENT_DIR_PATH, 'members.yml'))\n\n        <<-EOS\n        (function(d) {\n          var url = location.href,\n            bookmarklet = d.createElement('div');\n          bookmarklet.id = 'bookmarklet';\n          bookmarklet.innerHTML += '<div class=\"buttons\">' +\n            '<div class=\"cw-wrapper\">' +\n            '<div class=\"cw-buttons clearfix\">' +\n            '<span class=\"buttons-name\">' +\n            '<img src=\"https://www.chatwork.com/image/favicon/favicon00.ico\">Chatwork:' +\n            '</span>' +\n            '<button type=\"button\" onclick=\"setChatworkMember(\\\\'dev\\\\')\">\u30a8\u30f3\u30b8\u30cb\u30a2\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n            '<button type=\"button\" onclick=\"setChatworkMember(\\\\'all\\\\')\">\u3059\u3079\u3066\u306e\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n            '</div>' +\n            '<div class=\"cw-checkboxes\" clearfix>' +\n            '<input id=\"delete_newline\" type=\"checkbox\" name=\"delete_newline\" checked><label for=\"delete_newline\">\u6539\u884c\u524a\u9664</label>' +\n            '<input id=\"has_name\" type=\"checkbox\" name=\"has_name\" checked><label for=\"has_name\">\u540d\u524d\u3042\u308a</label>' +\n            '</div>' +\n            '</div>' +\n\n            '<div onclick=\"document.body.removeChild(document.body.firstChild);\" class=\"close\">\u9589\u3058\u308b</div>' +\n\n            '<style>' +\n            '#bookmarklet {position: fixed; z-index: 10000; top: 10px; right: 10px; width: 340px; height: 105px; border: solid 6px #C5DCEA; border-radius: 5px; box-shadow: black 1px 1px 8px; font-size: 13px; font-family: sans-serif; color: #4f4f4f; text-align: left; padding: 0; margin: 0; background-color: rgb(223, 244, 255); } #bookmarklet .buttons {margin: 10px 0;padding: 10px; height: 68px; } #bookmarklet .buttons button {width: 200px; float: right; } #bookmarklet .cw-buttons, #bookmarklet .stash-buttons {margin: 5px 10px 5px 0px; } #bookmarklet .cw-checkboxes label {margin-right: 10px; } #bookmarklet .buttons-name {font-size: 15px; font-weight: bold; text-align: right; width: 100px; } #bookmarklet .buttons-name img {width:17px; margin: 0px 3px -1px; } #bookmarklet .close {height:20px; width:80px; background-color:#009fff; color:white; text-align:center; font-size:15px; top:-10px; left:240px; line-height:1; padding:4px 0 0 0; position:absolute; cursor:pointer; } #bookmarklet .clearfix:after {content: \"\"; clear: both; display: block; }' +\n            '</style>';\n\n          setChatworkMember = function(group) {\n            if (location.hostname.indexOf('chatwork') == -1) {\n              alert('\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30da\u30fc\u30b8\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044');\n              return;\n            }\n            var cw_textarea = d.getElementById('_chatText');\n            cw_textarea.value = cw_textarea.value + getChatworkToMmmbers(group);\n            cw_textarea.focus();\n          };\n\n          getChatworkToMmmbers = function(group) {\n            var members = #{members.to_json};\n            var to_texts = {};\n            for (var i in members) {\n              var to_text = '[To:' + members[i].id + ']';\n              if (d.getElementById('has_name').checked) {\n                to_text += members[i].name;\n              }\n              to_text += (!d.getElementById('delete_newline').checked) ? '\\\\n' : ' ';\n              to_texts[members[i].id] = to_text;\n            }\n            var to_members = '';\n            switch (group) {\n              case 'dev':\n                for (var i in members) {\n                  if (members[i].position === 'engineer') {\n                    to_members += to_texts[members[i].id];\n                  }\n                }\n                break;\n              case 'all':\n                for (var i in members) {\n                  to_members += to_texts[members[i].id];\n                }\n                break;\n            }\n            return to_members;\n          };\n          d.body.insertBefore(bookmarklet, document.body.firstChild);\n        })(document);\n\n        EOS\n    end\n\n    get '/permission_for_ssl' do\n        'You can SSL connection with your browser.'\n    end\n\nend\n\nwebrick_options = {\n    :Port            => conf['port'],\n    :ServerType      => WEBrick::Daemon,\n    :SSLEnable       => true,\n    :SSLVerifyClient => OpenSSL::SSL::VERIFY_NONE,\n    :SSLCertificate  => OpenSSL::X509::Certificate.new(  File.open(conf['cert_path']['certificate']).read),\n    :SSLPrivateKey   => OpenSSL::PKey::RSA.new(          File.open(conf['cert_path']['private_key']).read),\n    :SSLCertName     => [ [ 'CN',WEBrick::Utils::getservername ] ],\n}\nRack::Handler::WEBrick.run BookmarkletProvider, webrick_options\n\n\n\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5bfe\u7b56\u306e\u305f\u3081\u306bCrossOrigin\u3092before\u3067\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n/bookmarklet\u306b\u306f\u3001\u5148\u307b\u3069\u306e\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u76f4\u66f8\u304d\u3057\u3066members\u3092yaml\u304b\u3089\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u3057\u305f\u611f\u3058\u3067\u3059\u306d\u3002\n\u307e\u305f\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u306a\u306e\u3067\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u6700\u521d\u306b\u3053\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u304d\u8b66\u544a\u304c\u51fa\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u5177\u4f53\u7684\u306b\u306f\u3001\u4ee5\u4e0b\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u3059\u3002\nChrome\u306e\u5834\u5408\n\nGET https://localhost:8443/bookmarklet?time=1419733313579 net::ERR_INSECURE_RESPONSE\n\nSafari\u306e\u5834\u5408\n\nFailed to load resource: \u3053\u306e\u30b5\u30fc\u30d0\u306e\u8a3c\u660e\u66f8\u306f\u7121\u52b9\u3067\u3059\u3002\u201clocalhost\u201d\u306b\u507d\u88c5\u3057\u305f\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u6a5f\u5bc6\u60c5\u5831\u304c\u6f0f\u3048\u3044\u3059\u308b\u304a\u305d\u308c\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u305d\u306e\u305f\u3081\u3001\u521d\u56de\u306e\u307f\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a\u3001\u305d\u306e\u3068\u304d\u3088\u3046\u306b/permission_for_ssl\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\nwebrick_options\u3067\u306f\u30dd\u30fc\u30c8\u756a\u53f7\u3068SSL\u3001\u305d\u308c\u3068\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\u3053\u308c\u3067\u5b8c\u6210\u3067\u3059\uff01\n$ ruby bookmarklet_provider.rb\n\n\u3092\u5b9f\u884c\u3059\u308c\u3070\u30b5\u30fc\u30d0\u30fc\u304c\u8d77\u52d5\u3067\u304d\u308b\u306e\u3067\u3001\u3042\u3068\u306f\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u30dd\u30c1\u308b\u3060\u3051\u3067\u3059\u306d\uff01\uff01\n\n\u307e\u3068\u3081\u7684\u306a\u3084\u3064\n\u3053\u308c\u3067\u6020\u6162\u30a8\u30f3\u30b8\u30cb\u30a2\u306b\u307e\u305f\u4e00\u6b69\u8fd1\u3065\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\n\u3061\u3087\u3063\u3068\u3053\u3060\u308f\u308a\u3059\u304e\u3066\u30b5\u30fc\u30d0\u30fc\u307e\u3067\u8a2d\u7f6e\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u3001\n\u4f1a\u793e\u306eAWS\u306a\u3089\u6708\uff11\u4e07\u5186\u3050\u3089\u3044\u307e\u3067\u81ea\u7531\u306b\u4f7f\u3048\u308b\u306e\u3067\u3001\u305d\u3053\u306b\u8a2d\u7f6e\u3057\u3066\u30c1\u30fc\u30e0\u3067\u904b\u7528\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u306fGithub\u306b\u7f6e\u3044\u3066\u304a\u304f\u306e\u3067\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u3054\u81ea\u7531\u306b\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u3001\u62d9\u3044\u30b3\u30fc\u30c9\u3067\u3059\u306e\u3067\u6539\u826f\u70b9\u306a\u3069\u306e\u3054\u6307\u6458\u306f\u5927\u6b53\u8fce\u3067\u3059\u3002\n\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u4f5c\u6210\u6642\u306b\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u30b5\u30a4\u30c8\u30bd\u30fc\u30b7\u30e3\u30eb\u3066\u3093\u3053\u76db\u308a - actyway -\n\n\u30d7\u30ed\u30b0\u30e9\u30de\u306e\u4e09\u5927\u7f8e\u5fb3\u306b\n\n* \u6020\u6162(Laziness)\n* \u77ed\u6c17(Impatience)\n* \u50b2\u6162(Hubris)\n\n\u3063\u3066\u3042\u308a\u307e\u3059\u304c\u3001\u5927\u3057\u3066\u77ed\u6c17\u3067\u3082\u50b2\u6162\u3067\u3082\u306a\u3044\u306e\u3067\u3001\u3068\u308a\u3042\u3048\u305a\u306f\u6020\u6162\u306b\u306a\u308d\u3046\u3068\u3057\u3066\u3044\u308b\u65b0\u5352\uff11\u5e74\u76ee\u306e\u6020\u6162\u30a8\u30f3\u30b8\u30cb\u30a2\u3067\u3059\u3002\n\n## \u65e5\u3005\u306e\u3061\u3087\u3063\u3068\u3057\u305f\u30b9\u30c8\u30ec\u30b9\n\n\u30c1\u30fc\u30e0\u3067\u958b\u767a\u3057\u3066\u3044\u308b\u3068**\u958b\u767a\u30e1\u30f3\u30d0\u30fc\u306e\u540d\u524d\u3092\u5165\u529b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u5834\u9762**\u3066\u591a\u304f\u3042\u308a\u307e\u305b\u3093\u304b\uff1f\n\n\u4f8b\u3048\u3070\u3001\n\n* **\u30d7\u30eb\u30ea\u30af\u306e\u30ec\u30d3\u30e5\u30ef\u30fc\u3092\u30bb\u30c3\u30c8\u3059\u308b**\n\n![20151228174228.png](https://qiita-image-store.s3.amazonaws.com/0/7885/191e9367-b276-750e-fb7a-95a48cc5ef00.png \"20151228174228.png\")\n\n* **\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u30c4\u30fc\u30eb\u3067\u9001\u308a\u5148\u3092\u6307\u5b9a\u3059\u308b**\n\n![20151228174538.png](https://qiita-image-store.s3.amazonaws.com/0/7885/35ab8132-0cf5-e67e-fe55-877873c69394.png \"20151228174538.png\")\n\n\u30c1\u30fc\u30e0\u304c\uff13\u3001\uff14\u4eba\u7a0b\u5ea6\u306a\u3089\u307e\u3060\u82e6\u3067\u3082\u306a\u3044\u306e\u3067\u3059\u304c\uff11\uff10\u4eba\u3050\u3089\u3044\u306e\u30c1\u30fc\u30e0\u306b\u306a\u308b\u3068\u3001\n\n\u30d7\u30eb\u30ea\u30af\u3084\u30ec\u30d3\u30e5\u30fc\u3092\u304a\u9858\u3044\u3059\u308b\u5ea6\u306b\u3001\n**\u540d\u524d\u3092\u5165\u529b\u3057\u3066\u9001\u4fe1\u76f8\u624b\u306b\u6f0f\u308c\u304c\u306a\u3044\u304b\u78ba\u8a8d\u3057\u3066**\u3068\u3044\u3046\u4f5c\u696d\u3092\u3001\n\u4e00\u65e5\u306b\u4f55\u5ea6\u3082\u4f55\u5ea6\u3082\u4f55\u5ea6\u3082\u3001\u3001\u3001\n\n## (# \uff9f\u0414\uff9f)\uff92\uff9d\uff84\uff9e\uff78\uff7e\uff6a\uff6a!!\n\n\u3068\u306a\u3063\u3066\u3057\u307e\u3063\u305f\u306e\u3067\u3001\u30c1\u30fc\u30e0\u30e1\u30f3\u30d0\u30fc\u3092\u30ef\u30f3\u30dd\u30c1\u3067\u30ec\u30d3\u30e5\u30ef\u30fc\u3084\u9001\u4fe1\u76f8\u624b\u306b\u6307\u5b9a\u3067\u304d\u308b\u30dc\u30bf\u30f3\u3092\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3067\u4f5c\u3063\u3066\u3084\u308d\u3046\u3068\u601d\u3044\u7acb\u3061\u307e\u3057\u305f\uff08\uff3e\u03c9\uff3e#\uff09\n\n**\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3068\u306f\u3001**\n> *\u30d6\u30c3\u30af\u30de\u30fc\u30af (\u304a\u6c17\u306b\u5165\u308a) \u3092\u5229\u7528\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306b\u4fbf\u5229\u306a\u6a5f\u80fd\u3092\u8ffd\u52a0\u3059\u308b\u3082\u306e\u3067\u3059\u3002*(\u5f15\u7528\uff1a[\u306f\u3066\u306a\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8](http://www.hatena.ne.jp/tool/bookmarklet))\n\n## \u4f5c\u308b\u3082\u306e\n#### **To\u4ed8\u304d\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u9001\u308b\u6642\u3001\u56fa\u5b9a\u30e1\u30f3\u30d0\u30fc\u3092\u4e00\u62ec\u8ffd\u52a0\u3067\u304d\u308b\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8**\n\n\u203b\u4f1a\u793e\u3067\u306fChatwork\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u306e\u3067\u30b3\u30fc\u30c9\u306fChatwork\u7528\u3067\u3059\u3002\n\n## \u5fc5\u8981\u6700\u5c0f\u9650\u306e\u6a5f\u80fd\u306e\u307f\n\n```javascript:bookmarklet\njavascript: (function(d) {\n    cw_textarea = d.getElementById('_chatText');\n    cw_textarea.value = cw_textarea.value + '[To:0000]hoge [To:0000]fuga [To:0000]foo ';\n    cw_textarea.focus();\n})(document);\n```\n\u3053\u308c\u3092\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306eURL\u306b\u8ffd\u52a0\u3059\u308c\u3070\u5b8c\u6210\u3067\u3059\u306d\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 19.49.57.png](https://qiita-image-store.s3.amazonaws.com/0/7885/1089c872-fd34-7320-af61-9a01a2d04266.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 19.49.57.png\")\n\n\u30d6\u30c3\u30af\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 20.17.39.png](https://qiita-image-store.s3.amazonaws.com/0/7885/8338f18a-de6a-bb33-ad6c-e0cb43a7be3f.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 20.17.39.png\")\n\nhoge\u3055\u3093\u3068fuga\u3055\u3093\u3068foo\u3055\u3093\u3092\u8ffd\u52a0\u3067\u304d\u307e\u3057\u305f\u306d\u3002\n\u3044\u3044\u611f\u3058\u3067\u3059\uff01\n\n\u3053\u308c\u306f\u3053\u308c\u3067\u30b7\u30f3\u30d7\u30eb\u3067\u3044\u3044\u306e\u3067\u3059\u304c\u3001\n\u4e00\u3064\u306e\u56fa\u5b9a\u30e1\u30f3\u30d0\u30fc\u3057\u304b\u8ffd\u52a0\u3067\u304d\u307e\u305b\u3093\u3057\u3001\u3082\u3046\u5c11\u3057\u9ad8\u6a5f\u80fd\u306b\u3057\u305f\u3044\u306a\u3068\u3001\u3001\n\n\n## \u3061\u3087\u3063\u3068\u4fbf\u5229\u306b\n\n\u3055\u3063\u304d\u306e\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u6539\u826f\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n * \u958b\u767a\u30e1\u30f3\u30d0\u30fc\u304b\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30e1\u30f3\u30d0\u30fc\u5168\u54e1\u304b\u3092\u9078\u3079\u308b\n * \u540d\u524d\u306e\u3042\u308aor\u306a\u3057\u3092\u8a2d\u5b9a\u3067\u304d\u308b\n * \u540d\u524d\u306e\u6700\u5f8c\u306b\u6539\u884c\u3092\u8ffd\u52a0\u3059\u308b\u304b\u3092\u8a2d\u5b9a\u3067\u304d\u308b\n * \u30c7\u30b6\u30a4\u30f3\u3044\u3044\u611f\u3058\u306b\n\n\n```javascript:bookmarklet\njavascript: (function(d) {\n  var url = location.href,\n    bookmarklet = d.createElement('div');\n  bookmarklet.id = 'bookmarklet';\n  bookmarklet.innerHTML += '<div class=\"buttons\">' +\n      '<div class=\"cw-wrapper\">' +\n        '<div class=\"cw-buttons clearfix\">' +\n          '<span class=\"buttons-name\">' +\n            '<img src=\"https://www.chatwork.com/image/favicon/favicon00.ico\">Chatwork:' +\n          '</span>' +\n          '<button type=\"button\" onclick=\"setChatworkMember(\\'dev\\')\">\u30a8\u30f3\u30b8\u30cb\u30a2\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n          '<button type=\"button\" onclick=\"setChatworkMember(\\'all\\')\">\u3059\u3079\u3066\u306e\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n        '</div>' +\n        '<div class=\"cw-checkboxes\" clearfix>' +\n          '<input id=\"delete_newline\" type=\"checkbox\" name=\"delete_newline\" checked><label for=\"delete_newline\">\u6539\u884c\u524a\u9664</label>' +\n          '<input id=\"has_name\" type=\"checkbox\" name=\"has_name\" checked><label for=\"has_name\">\u540d\u524d\u3042\u308a</label>' +\n      '</div>' +\n    '</div>' +\n\n    '<div onclick=\"document.body.removeChild(document.body.firstChild);\" class=\"close\">\u9589\u3058\u308b</div>' +\n\n    '<style>' +\n    '#bookmarklet {position: fixed; z-index: 10000; top: 10px; right: 10px; width: 340px; height: 105px; border: solid 6px #C5DCEA; border-radius: 5px; box-shadow: black 1px 1px 8px; font-size: 13px; font-family: sans-serif; color: #4f4f4f; text-align: left; padding: 0; margin: 0; background-color: rgb(223, 244, 255); } #bookmarklet .buttons {margin: 10px 0;padding: 10px; height: 68px; } #bookmarklet .buttons button {width: 200px; float: right; } #bookmarklet .cw-buttons, #bookmarklet .stash-buttons {margin: 5px 10px 5px 0px; } #bookmarklet .cw-checkboxes label {margin-right: 10px; } #bookmarklet .buttons-name {font-size: 15px; font-weight: bold; text-align: right; width: 100px; } #bookmarklet .buttons-name img {width:17px; margin: 0px 3px -1px; } #bookmarklet .close {height:20px; width:80px; background-color:#009fff; color:white; text-align:center; font-size:15px; top:-10px; left:240px; line-height:1; padding:4px 0 0 0; position:absolute; cursor:pointer; } #bookmarklet .clearfix:after {content: \"\"; clear: both; display: block; }' +\n    '</style>';\n\n  setChatworkMember = function(group) {\n    if (location.hostname.indexOf('chatwork') == -1) {\n      alert('\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30da\u30fc\u30b8\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044');\n      return;\n    }\n    var cw_textarea = d.getElementById('_chatText');\n    cw_textarea.value = cw_textarea.value + getChatworkToMmmbers(group);\n    cw_textarea.focus();\n  };\n\n  getChatworkToMmmbers = function(group) {\n    var members = [\n      {'id': 5000000, 'position': 'engineer', 'name': 'Engineer1'},\n      {'id': 5000001, 'position': 'engineer', 'name': 'Engineer2'},\n      {'id': 5000002, 'position': 'engineer', 'name': 'Engineer3'},\n      {'id': 5000003, 'position': 'director', 'name': 'Director1'},\n      {'id': 5000004, 'position': 'director', 'name': 'Director2'},\n      {'id': 5000005, 'position': 'director', 'name': 'Director3'}\n    ];\n    var to_texts = {};\n    for (var i in members) {\n      var to_text = '[To:' + members[i].id + ']';\n      if (d.getElementById('has_name').checked) {\n        to_text += members[i].name;\n      }\n      to_text += (!d.getElementById('delete_newline').checked) ? '\\n' : ' ';\n      to_texts[members[i].id] = to_text;\n    }\n    var to_members = '';\n    switch (group) {\n      case 'dev':\n        for (var i in members) {\n          if (members[i].position === 'engineer') {\n            to_members += to_texts[members[i].id];\n          }\n        }\n        break;\n      case 'all':\n        for (var i in members) {\n          to_members += to_texts[members[i].id];\n        }\n        break;\n    }\n    return to_members;\n  };\n  d.body.insertBefore(bookmarklet, document.body.firstChild);\n})(document);\n```\n\n\u767b\u9332\u3057\u305f\u30d6\u30c3\u30af\u30de\u30fc\u30af\u3092\u30af\u30ea\u30c3\u30af\u3059\u308b\u3053\u3068\u3067\u3001\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 21.12.26.png](https://qiita-image-store.s3.amazonaws.com/0/7885/c5ef7822-b5bb-701b-c652-0d08fc48ce8c.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 21.12.26.png\")\n\n\u30d6\u30e9\u30a6\u30b6\u306e\u53f3\u4e0a\u306b\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30c4\u30fc\u30eb\u30bb\u30c3\u30c8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u30dc\u30bf\u30f3\u3092\u30dd\u30c1\u308b\u3060\u3051\u3067\u3001\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 21.20.37.png](https://qiita-image-store.s3.amazonaws.com/0/7885/2c903723-3d1e-997a-53a9-4754ba79fb27.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-28 21.20.37.png\")\n\nEngineer1, Engineer2, Engineer3\u3092\u30bb\u30c3\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\n\n\u3044\u3044\u611f\u3058\u3067\u3059\u306d\u3002\n\n\n\u305f\u3060\u3001\u81ea\u5206\u4e00\u4eba\u3060\u3051\u304c\u4f7f\u3046\u3060\u3051\u306a\u3089\u3053\u308c\u3067\u554f\u984c\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u4f5c\u3063\u305f\u306e\u3067\u30e1\u30f3\u30d0\u30fc\u306b\u914d\u5e03\u3057\u305f\u3044\u306a\u3068\u3001\n\n\u3067\u3082\u30e1\u30f3\u30d0\u30fc\u304c\u5897\u3048\u305f\u308a\u6e1b\u3063\u305f\u308a\u3059\u308b\u5ea6\u306b\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u914d\u5e03\u3057\u306a\u304a\u3057\u3066\u518d\u5ea6\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u767b\u9332\u3057\u3066\u3082\u3089\u3046\u306e\u306f\u624b\u9593\u3060\u306a\u30fc\u3068\u3001\u3001\n\n\n## \u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u3092\u9ad8\u3081\u308b\u305f\u3081\u306b\n\u3082\u3063\u3068\u60f0\u6027\u3092\u8ffd\u6c42\u3057\u305f\u3044\u306e\u3067\u3001**\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u30b5\u30fc\u30d0\u30fc\u304b\u3089\u914d\u4fe1\u3059\u308b**\u304b\u305f\u3061\u306b\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```javascript:bookmarklet\njavascript: (function(d) {\n    var s = d.createElement('script');\n    s.id = 'bookmarklet';\n    s.charset = 'UTF-8';\n    s.src = 'https://[\u914d\u4fe1\u30b5\u30fc\u30d0\u30fc\u306e\u30db\u30b9\u30c8]:8443/bookmarklet?time=' + (new Date()).getTime();\n    d.body.appendChild(s)\n})(document);\n```\n\n\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u306e\u65b9\u306f\u3060\u3044\u3076\u30b9\u30c3\u30ad\u30ea\u3057\u307e\u3057\u305f\u306d\u3002\n\u7d9a\u3044\u3066\u3001JavaScript\u3092\u914d\u4fe1\u3059\u308b\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u3059\u3002\n\n#### \u30b5\u30fc\u30d0\u30b5\u30a4\u30c9\u3067\u4f7f\u3063\u305f\u3082\u306e\n * \u8a00\u8a9e\uff1aRuby(2.1.3p242)\n * \u30b5\u30fc\u30d0\u30fc:Webrick\n * \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff1aSinatra\n\nSSL\u3092\u4f7f\u3063\u3066\u3044\u308b\u30b5\u30fc\u30d3\u30b9\u4e0a\u304b\u3089\u306f\u5916\u90e8\u306eJavaScript\u3092\u52dd\u624b\u306b\u8aad\u307f\u8fbc\u3080\u3053\u3068\u306f\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u914d\u4fe1\u30b5\u30fc\u30d0\u30fc\u3067\u3082SSL\u3092\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3061\u306a\u307f\u306b\u3001\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3059\u308b\u3068SSL\u901a\u4fe1\u3058\u3083\u306a\u3044\u3068\u30c0\u30e1\u3060\u304a\u3063\u3066\u30a8\u30e9\u30fc\u304c\u5410\u304b\u308c\u307e\u3059\u3002\n> Mixed Content: The page at 'https://www.chatwork.com/' was loaded over HTTPS, but requested an insecure script 'http://localhost:8443/bookmarklet'. This request has been blocked; the content must be served over HTTPS.\n\nSSL\u306b\u95a2\u3057\u3066\u306f\u8a3c\u660e\u66f8\u3092[\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u306e\u4f5c\u6210](http://qiita.com/kawa123/items/81a71cb55db87cdbba4d)\u3092\u53c2\u8003\u306b\u4f5c\u308a\u3001myCA\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u306b\u8a2d\u7f6e\u3057\u307e\u3057\u305f\u3002\n<br>\n\n```Ruby:Gemfile\nsource \"https://rubygems.org\"\n\ngem \"rack\"\ngem \"webrick\"\ngem \"openssl\"\ngem \"net\"\ngem \"sinatra\"\ngem \"sinatra-contrib\"\ngem \"sinatra-cross_origin\", \"~> 0.3.1\"\ngem \"json\"\n```\n\nconfig.yml\u3067\u30dd\u30fc\u30c8\u3068\u8a3c\u660e\u66f8\u30d1\u30b9\u306e\u8a2d\u5b9a\n\n```ruby:config.yml\nport: 8443\ncert_path:\n  certificate: ./myCA/server.crt\n  private_key: ./myCA/server.key\n```\n\nmembers.yml\u3067\u30e1\u30f3\u30d0\u30fc\u306e\u60c5\u5831\u3092\u7ba1\u7406\n\n```ruby:members.yml\n- {id: 5000000, position: engineer, name: Engineer1}\n- {id: 5000001, position: engineer, name: Engineer2}\n- {id: 5000002, position: engineer, name: Engineer3}\n- {id: 5000003, position: director, name: Director1}\n- {id: 5000004, position: director, name: Director2}\n- {id: 5000005, position: director, name: Director3}\n```\n\n\u4ee5\u4e0b\u304c\u30e1\u30a4\u30f3\u306e\u914d\u4fe1\u30b5\u30fc\u30d0\u30fc\u3067\u3059\u3002\n\n```ruby:bookmarklet_provider.rb\nrequire 'webrick'\nrequire 'webrick/https'\nrequire 'openssl'\nrequire 'sinatra'\nrequire 'sinatra/base'\nrequire 'sinatra/cross_origin'\nrequire 'sinatra/reloader'\nrequire 'net/https'\nrequire 'json'\nrequire 'yaml'\n\nset :environment, :production\n\nconf = YAML.load_file('config.yml')\nCURRENT_DIR_PATH = Dir.pwd\n\nclass BookmarkletProvider < Sinatra::Base\n    register Sinatra::CrossOrigin\n\n    before do\n        cross_origin\n        content_type :js\n    end\n\n    get '/bookmarklet' do\n        members = YAML.load_file(File.join(CURRENT_DIR_PATH, 'members.yml'))\n\n        <<-EOS\n        (function(d) {\n          var url = location.href,\n            bookmarklet = d.createElement('div');\n          bookmarklet.id = 'bookmarklet';\n          bookmarklet.innerHTML += '<div class=\"buttons\">' +\n            '<div class=\"cw-wrapper\">' +\n            '<div class=\"cw-buttons clearfix\">' +\n            '<span class=\"buttons-name\">' +\n            '<img src=\"https://www.chatwork.com/image/favicon/favicon00.ico\">Chatwork:' +\n            '</span>' +\n            '<button type=\"button\" onclick=\"setChatworkMember(\\\\'dev\\\\')\">\u30a8\u30f3\u30b8\u30cb\u30a2\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n            '<button type=\"button\" onclick=\"setChatworkMember(\\\\'all\\\\')\">\u3059\u3079\u3066\u306e\u30e1\u30f3\u30d0\u30fc\u3092\u30bb\u30c3\u30c8</button>' +\n            '</div>' +\n            '<div class=\"cw-checkboxes\" clearfix>' +\n            '<input id=\"delete_newline\" type=\"checkbox\" name=\"delete_newline\" checked><label for=\"delete_newline\">\u6539\u884c\u524a\u9664</label>' +\n            '<input id=\"has_name\" type=\"checkbox\" name=\"has_name\" checked><label for=\"has_name\">\u540d\u524d\u3042\u308a</label>' +\n            '</div>' +\n            '</div>' +\n\n            '<div onclick=\"document.body.removeChild(document.body.firstChild);\" class=\"close\">\u9589\u3058\u308b</div>' +\n\n            '<style>' +\n            '#bookmarklet {position: fixed; z-index: 10000; top: 10px; right: 10px; width: 340px; height: 105px; border: solid 6px #C5DCEA; border-radius: 5px; box-shadow: black 1px 1px 8px; font-size: 13px; font-family: sans-serif; color: #4f4f4f; text-align: left; padding: 0; margin: 0; background-color: rgb(223, 244, 255); } #bookmarklet .buttons {margin: 10px 0;padding: 10px; height: 68px; } #bookmarklet .buttons button {width: 200px; float: right; } #bookmarklet .cw-buttons, #bookmarklet .stash-buttons {margin: 5px 10px 5px 0px; } #bookmarklet .cw-checkboxes label {margin-right: 10px; } #bookmarklet .buttons-name {font-size: 15px; font-weight: bold; text-align: right; width: 100px; } #bookmarklet .buttons-name img {width:17px; margin: 0px 3px -1px; } #bookmarklet .close {height:20px; width:80px; background-color:#009fff; color:white; text-align:center; font-size:15px; top:-10px; left:240px; line-height:1; padding:4px 0 0 0; position:absolute; cursor:pointer; } #bookmarklet .clearfix:after {content: \"\"; clear: both; display: block; }' +\n            '</style>';\n\n          setChatworkMember = function(group) {\n            if (location.hostname.indexOf('chatwork') == -1) {\n              alert('\u30c1\u30e3\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30da\u30fc\u30b8\u3067\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044');\n              return;\n            }\n            var cw_textarea = d.getElementById('_chatText');\n            cw_textarea.value = cw_textarea.value + getChatworkToMmmbers(group);\n            cw_textarea.focus();\n          };\n\n          getChatworkToMmmbers = function(group) {\n            var members = #{members.to_json};\n            var to_texts = {};\n            for (var i in members) {\n              var to_text = '[To:' + members[i].id + ']';\n              if (d.getElementById('has_name').checked) {\n                to_text += members[i].name;\n              }\n              to_text += (!d.getElementById('delete_newline').checked) ? '\\\\n' : ' ';\n              to_texts[members[i].id] = to_text;\n            }\n            var to_members = '';\n            switch (group) {\n              case 'dev':\n                for (var i in members) {\n                  if (members[i].position === 'engineer') {\n                    to_members += to_texts[members[i].id];\n                  }\n                }\n                break;\n              case 'all':\n                for (var i in members) {\n                  to_members += to_texts[members[i].id];\n                }\n                break;\n            }\n            return to_members;\n          };\n          d.body.insertBefore(bookmarklet, document.body.firstChild);\n        })(document);\n\n        EOS\n    end\n\n    get '/permission_for_ssl' do\n        'You can SSL connection with your browser.'\n    end\n\nend\n\nwebrick_options = {\n    :Port            => conf['port'],\n    :ServerType      => WEBrick::Daemon,\n    :SSLEnable       => true,\n    :SSLVerifyClient => OpenSSL::SSL::VERIFY_NONE,\n    :SSLCertificate  => OpenSSL::X509::Certificate.new(  File.open(conf['cert_path']['certificate']).read),\n    :SSLPrivateKey   => OpenSSL::PKey::RSA.new(          File.open(conf['cert_path']['private_key']).read),\n    :SSLCertName     => [ [ 'CN',WEBrick::Utils::getservername ] ],\n}\nRack::Handler::WEBrick.run BookmarkletProvider, webrick_options\n```\n\n\u30af\u30ed\u30b9\u30c9\u30e1\u30a4\u30f3\u5bfe\u7b56\u306e\u305f\u3081\u306bCrossOrigin\u3092before\u3067\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\n/bookmarklet\u306b\u306f\u3001\u5148\u307b\u3069\u306e\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u76f4\u66f8\u304d\u3057\u3066members\u3092yaml\u304b\u3089\u8aad\u307f\u8fbc\u3080\u3088\u3046\u306b\u3057\u305f\u611f\u3058\u3067\u3059\u306d\u3002\n\n\u307e\u305f\u30aa\u30ec\u30aa\u30ec\u8a3c\u660e\u66f8\u306a\u306e\u3067\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u6700\u521d\u306b\u3053\u306e\u30b5\u30fc\u30d0\u30fc\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u304d\u8b66\u544a\u304c\u51fa\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u5177\u4f53\u7684\u306b\u306f\u3001\u4ee5\u4e0b\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u3059\u3002\n\n*Chrome\u306e\u5834\u5408*\n> GET https://localhost:8443/bookmarklet?time=1419733313579 net::ERR_INSECURE_RESPONSE\n\n*Safari\u306e\u5834\u5408*\n> Failed to load resource: \u3053\u306e\u30b5\u30fc\u30d0\u306e\u8a3c\u660e\u66f8\u306f\u7121\u52b9\u3067\u3059\u3002\u201clocalhost\u201d\u306b\u507d\u88c5\u3057\u305f\u30b5\u30fc\u30d0\u306b\u63a5\u7d9a\u3057\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u3001\u6a5f\u5bc6\u60c5\u5831\u304c\u6f0f\u3048\u3044\u3059\u308b\u304a\u305d\u308c\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u305d\u306e\u305f\u3081\u3001**\u521d\u56de\u306e\u307f\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u3092\u51fa\u3059\u5fc5\u8981\u304c\u3042\u308a**\u3001\u305d\u306e\u3068\u304d\u3088\u3046\u306b/permission_for_ssl\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002\n\nwebrick_options\u3067\u306f\u30dd\u30fc\u30c8\u756a\u53f7\u3068SSL\u3001\u305d\u308c\u3068\u30c7\u30fc\u30e2\u30f3\u8d77\u52d5\u306e\u8a2d\u5b9a\u3092\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u308c\u3067\u5b8c\u6210\u3067\u3059\uff01\n\n```\n$ ruby bookmarklet_provider.rb\n```\n\u3092\u5b9f\u884c\u3059\u308c\u3070\u30b5\u30fc\u30d0\u30fc\u304c\u8d77\u52d5\u3067\u304d\u308b\u306e\u3067\u3001\u3042\u3068\u306f\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u3092\u30dd\u30c1\u308b\u3060\u3051\u3067\u3059\u306d\uff01\uff01\n\n## \u307e\u3068\u3081\u7684\u306a\u3084\u3064\n\n\u3053\u308c\u3067\u6020\u6162\u30a8\u30f3\u30b8\u30cb\u30a2\u306b\u307e\u305f\u4e00\u6b69\u8fd1\u3065\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u3057\u305f\uff01\n\n\u3061\u3087\u3063\u3068\u3053\u3060\u308f\u308a\u3059\u304e\u3066\u30b5\u30fc\u30d0\u30fc\u307e\u3067\u8a2d\u7f6e\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u304c\u3001\u3001\n\n\u4f1a\u793e\u306eAWS\u306a\u3089\u6708\uff11\u4e07\u5186\u3050\u3089\u3044\u307e\u3067\u81ea\u7531\u306b\u4f7f\u3048\u308b\u306e\u3067\u3001\u305d\u3053\u306b\u8a2d\u7f6e\u3057\u3066\u30c1\u30fc\u30e0\u3067\u904b\u7528\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\u306f[Github](https://github.com/yoppe/bookmarklet)\u306b\u7f6e\u3044\u3066\u304a\u304f\u306e\u3067\u8208\u5473\u306e\u3042\u308b\u65b9\u306f\u3054\u81ea\u7531\u306b\u304a\u4f7f\u3044\u304f\u3060\u3055\u3044\u3002\n\n\u307e\u305f\u3001\u62d9\u3044\u30b3\u30fc\u30c9\u3067\u3059\u306e\u3067\u6539\u826f\u70b9\u306a\u3069\u306e\u3054\u6307\u6458\u306f\u5927\u6b53\u8fce\u3067\u3059\u3002\n\n\u30d6\u30c3\u30af\u30de\u30fc\u30af\u30ec\u30c3\u30c8\u4f5c\u6210\u6642\u306b\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u30b5\u30a4\u30c8[\u30bd\u30fc\u30b7\u30e3\u30eb\u3066\u3093\u3053\u76db\u308a - actyway -](http://actyway.com/t/%E3%82%BD%E3%83%BC%E3%82%B7%E3%83%A3%E3%83%AB%E3%81%A6%E3%82%93%E3%81%93%E7%9B%9B%E3%82%8A)\n", "tags": ["Ruby", "JavaScript", "bookmarklet", "SSL", "Sinatra"]}