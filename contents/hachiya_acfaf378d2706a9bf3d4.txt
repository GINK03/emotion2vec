{"tags": ["Ubuntu15.10", "Ubuntu", "resolvconf"], "context": "\u79c1\u306e\u74b0\u5883\u3060\u3068\u3001 ubuntu 15.10 \u306b\u304a\u3051\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e resolvconf \u8a2d\u5b9a\u3060\u3068\u3001\n\u983b\u7e41\u306b google.com \u306e\u540d\u524d\u89e3\u6c7a\u304c\u3067\u304d\u306a\u304f\u306a\u308b\u73fe\u8c61\u304c\u767a\u751f\u3057\u305f\u3002\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u305f\u3002\n\neth0 \u306b\u56fa\u5b9a\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\n\n/etc/avahi/avahi-daemon.conf \u306e domain-name \u306e\u7b87\u6240\u3092 domain-name=.alocal \u3068\u4fee\u6b63\n\n/etc/nsswitch.conf \u3092\u4fee\u6b63\n\n/etc/NetworkManager/NetworkManager.conf \u306e dns=dnsmasq \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n\n\neth0 \u306b\u56fa\u5b9a\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\neth0 \u306b\u56fa\u5b9a\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n(/etc/network/interfaces, /etc/resolvconf/resolv.conf/base \u306a\u3069\u3092\u8a2d\u5b9a\u3057\u305f)\n\u4f8b:\n\n/etc/network/interfaces\n\nauto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n    address 192.168.11.2\n    netmask 255.255.255.0\n    gateway 192.168.11.1\n    dns-servers 8.8.8.8 8.8.4.4\n\n\u7d50\u679c\u3068\u3057\u3066\u3001 /etc/resolv.conf \u304c\u751f\u6210\u3055\u308c\u308b\n\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001 resolvconf \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308c\u3070\u826f\u3044\u3002\n$ sudo resolvconf -u\n\n\n/etc/avahi/avahi-daemon.conf \u3092\u4fee\u6b63\n/etc/avahi/avahi-daemon.conf \u306e # domain-name=local \u306e\u7b87\u6240\u306b\u3001\ndomain-name=.alocal\n\n\u3068\u8ffd\u8a18\u3002\n\n/etc/nsswitch.conf \u3092\u4fee\u6b63\n/etc/nsswitch.conf \u306e\u6b21\u306e\u7b87\u6240\u3092\u4fee\u6b63\u3059\u308b\u3002\n\u5909\u66f4\u524d:\nfiles mdns4_minimal [NOTFOUND=return] dns mdns4\n\n\u5909\u66f4\u5f8c:\nfiles dns\n\n\n/etc/NetworkManager/NetworkManager.conf \u306e dns=dnsmasq \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\ndns=dnsmasq \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3002\n\nTrouble Shooting\n\n\"ping: unknown host google.com\" but IP's works fine\n\n\u306e\u6642\u306f resolvconf \u3092\u5165\u308c\u306a\u304a\u3057\u305f\u3002\nsudo apt-get remove --purge resolvconf && sudo apt-get install --reinstall resolvconf\n\n\nReferences\n\nhttp://www.tecmint.com/set-static-ip-address-in-ubuntu-15-10-server/\nhttp://www.asterisk-works.jp/wiki/index.php/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%A8%AD%E5%AE%9A(Ubuntu)\nhttp://d.hatena.ne.jp/zzkater/20140713/1405250096\nhttp://askubuntu.com/questions/368435/how-do-i-fix-dns-resolving-which-doesnt-work-after-upgrading-to-ubuntu-13-10-s\nhttp://askubuntu.com/questions/455338/ping-unknown-host-google-com-but-ips-works-fine\nhttp://askubuntu.com/questions/465729/ping-unknown-host-google-com-in-ubuntu-server\nhttps://forums.ubuntulinux.jp/viewtopic.php?id=17345\nhttp://geektrainee.hatenablog.jp/entry/2014/09/23/002443\nhttps://forums.ubuntulinux.jp/viewtopic.php?id=16090\nhttp://stuartfeeser.com/2013/02/11/ubuntu/\nhttp://askubuntu.com/questions/688557/after-15-10-upgrade-networkmanager-using-30-cpu\nhttp://askubuntu.com/questions/134121/how-to-restore-recreate-etc-resolv-conf-files\n\n\u79c1\u306e\u74b0\u5883\u3060\u3068\u3001 ubuntu 15.10 \u306b\u304a\u3051\u308b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e resolvconf \u8a2d\u5b9a\u3060\u3068\u3001\n\u983b\u7e41\u306b google.com \u306e\u540d\u524d\u89e3\u6c7a\u304c\u3067\u304d\u306a\u304f\u306a\u308b\u73fe\u8c61\u304c\u767a\u751f\u3057\u305f\u3002\n\n\u3053\u308c\u3092\u89e3\u6c7a\u3059\u308b\u305f\u3081\u306b\u3001\u4ee5\u4e0b\u3092\u5b9f\u65bd\u3057\u305f\u3002\n\n* eth0 \u306b\u56fa\u5b9a\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\n* `/etc/avahi/avahi-daemon.conf` \u306e domain-name \u306e\u7b87\u6240\u3092 `domain-name=.alocal` \u3068\u4fee\u6b63\n* `/etc/nsswitch.conf` \u3092\u4fee\u6b63\n* `/etc/NetworkManager/NetworkManager.conf` \u306e `dns=dnsmasq` \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n\n\n## eth0 \u306b\u56fa\u5b9a\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\n\neth0 \u306b\u56fa\u5b9a\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u305f\u3002\n(`/etc/network/interfaces`, `/etc/resolvconf/resolv.conf/base` \u306a\u3069\u3092\u8a2d\u5b9a\u3057\u305f)\n\n\u4f8b:\n\n* /etc/network/interfaces\n\n```\nauto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n    address 192.168.11.2\n    netmask 255.255.255.0\n    gateway 192.168.11.1\n    dns-servers 8.8.8.8 8.8.4.4\n```\n\n\u7d50\u679c\u3068\u3057\u3066\u3001 `/etc/resolv.conf` \u304c\u751f\u6210\u3055\u308c\u308b\n\n\u8a2d\u5b9a\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001 `resolvconf` \u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308c\u3070\u826f\u3044\u3002\n\n```\n$ sudo resolvconf -u\n```\n\n\n## `/etc/avahi/avahi-daemon.conf` \u3092\u4fee\u6b63\n\n\n`/etc/avahi/avahi-daemon.conf` \u306e `# domain-name=local` \u306e\u7b87\u6240\u306b\u3001\n\n```\ndomain-name=.alocal\n```\n\n\u3068\u8ffd\u8a18\u3002\n\n## `/etc/nsswitch.conf` \u3092\u4fee\u6b63\n\n`/etc/nsswitch.conf` \u306e\u6b21\u306e\u7b87\u6240\u3092\u4fee\u6b63\u3059\u308b\u3002\n\n\u5909\u66f4\u524d:\n\n```\nfiles mdns4_minimal [NOTFOUND=return] dns mdns4\n```\n\n\u5909\u66f4\u5f8c:\n\n```\nfiles dns\n```\n\n\n## `/etc/NetworkManager/NetworkManager.conf` \u306e `dns=dnsmasq` \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\n\n`dns=dnsmasq` \u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3002\n\n\n\n## Trouble Shooting\n\n> \"ping: unknown host google.com\" but IP's works fine\n\n\u306e\u6642\u306f `resolvconf` \u3092\u5165\u308c\u306a\u304a\u3057\u305f\u3002\n\n```\nsudo apt-get remove --purge resolvconf && sudo apt-get install --reinstall resolvconf\n```\n\n## References\n\n* http://www.tecmint.com/set-static-ip-address-in-ubuntu-15-10-server/\n* http://www.asterisk-works.jp/wiki/index.php/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E8%A8%AD%E5%AE%9A(Ubuntu)\n* http://d.hatena.ne.jp/zzkater/20140713/1405250096\n* http://askubuntu.com/questions/368435/how-do-i-fix-dns-resolving-which-doesnt-work-after-upgrading-to-ubuntu-13-10-s\n* http://askubuntu.com/questions/455338/ping-unknown-host-google-com-but-ips-works-fine\n* http://askubuntu.com/questions/465729/ping-unknown-host-google-com-in-ubuntu-server\n* https://forums.ubuntulinux.jp/viewtopic.php?id=17345\n* http://geektrainee.hatenablog.jp/entry/2014/09/23/002443\n\n* https://forums.ubuntulinux.jp/viewtopic.php?id=16090\n* http://stuartfeeser.com/2013/02/11/ubuntu/\n* http://askubuntu.com/questions/688557/after-15-10-upgrade-networkmanager-using-30-cpu\n\n* http://askubuntu.com/questions/134121/how-to-restore-recreate-etc-resolv-conf-files\n"}