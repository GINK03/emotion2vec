{"context": " More than 1 year has passed since last update.\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://nabetani.sakura.ne.jp/hena/ord29devdice/\n\u5f53\u65e5\u53c2\u52a0\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u4eca\u65e5\u89e3\u304d\u307e\u3057\u305f\u3002\nPAT\u3092\u81ea\u529b\u3067\u66f8\u304d\u51fa\u3059\u6c17\u529b\u304c\u7121\u304b\u3063\u305f\u306e\u3067\u3001\u554f\u984c\u3068\u89e3\u7b54\u304b\u3089\u751f\u6210\u3059\u308b\u3068\u3044\u3046\u8d85\u53cd\u5247\u6280\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\nPAT=[\n\"12S453\", \"14653D\", \"15S3D4\", \"1T6D45\",\n\"215T64\", \"2S541T\", \"354S21\", \"3D415S\",\n\"41T2S5\", \"45312S\", \"46T512\", \"4D3S51\",\n\"51246T\", \"53D146\", \"54D6T1\", \"5S2T14\",\n\"641D35\", \"6T154D\", \"D35641\", \"D451T6\",\n\"S21354\", \"S514D3\", \"T145S2\", \"T64215\",\n]\ndef solve(q)\n  xs = q.chars.select{|x| x=~/[a-z]/}\n  r = Regexp.new(xs.inject(q.gsub('/','')){|w,x| w.gsub(x,'(.)')})\n  as = PAT.each_with_object([]){|pat,as|\n    ms = pat.scan(r).flatten\n    as << xs.zip(ms).map{|x,m| \"#{x}=#{m}\"}.join(\",\") unless ms.empty?\n  }\n  case as.size\n  when 0\n    'none'\n  when 1\n    as[0]\n  else\n    'many'\n  end\nend\n\nDATA.readlines.each do |line|\n  no,q,a = line.strip.split(/\\s+/)\n  ans = solve(q)\n  print no + \"\\t\" + ans\n  puts ans == a ? ' o' : ' x'\nend\n__END__\n0   Tx4/5yz x=1,y=S,z=2\n1   14S/xyz none\n2   1w6/xyz many\n3   4w3/12S w=5\n4   4w3/S51 w=D\n5   15S/wD4 w=3\n6   54D/6Tw w=1\n7   S21/35w w=4\n8   w2x/354 w=S,x=1\n9   wx1/54D w=6,x=T\n10  45w/12x w=3,x=S\n11  5w2/x14 w=S,x=T\n12  Dw5/x41 w=3,x=6\n13  w4x/1y6 w=D,x=5,y=T\n14  15w/xy4 w=S,x=3,y=D\n15  D35/wxy w=6,x=4,y=1\n16  4wx/51y w=6,x=T,y=2\n17  wTx/D4y w=1,x=6,y=5\n18  wxy/z3D w=1,x=4,y=6,z=5\n19  wx5/1yz w=D,x=4,y=T,z=6\n20  w53/xyz w=4,x=1,y=2,z=S\n21  wx1/yzD w=6,x=T,y=5,z=4\n22  wxS/3yz w=1,x=5,y=D,z=4\n23  wx2/y1z w=5,x=S,y=T,z=4\n24  4wx/2yz w=1,x=T,y=S,z=5\n25  T6w/xyz w=4,x=2,y=1,z=5\n26  Swx/yDz w=5,x=1,y=4,z=3\n27  wDx/yzS w=3,x=4,y=1,z=5\n28  wxy/5Sz w=T,x=1,y=4,z=2\n29  wSx/4yz w=2,x=5,y=1,z=T\n30  wxS/y5z w=1,x=2,y=4,z=3\n31  wxy/35z w=S,x=2,y=1,z=4\n32  wxy/T6z w=2,x=1,y=5,z=4\n33  wxD/yz1 w=5,x=4,y=6,z=T\n34  1wx/yz5 w=T,x=6,y=D,z=4\n35  wx3/y5z w=4,x=D,y=S,z=1\n36  6wx/y3z w=4,x=1,y=D,z=5\n37  5wx/4yz w=1,x=2,y=6,z=T\n38  wx4/Syz w=3,x=5,y=2,z=1\n39  w3D/xyz w=5,x=1,y=4,z=6\n40  w3x/6yz w=D,x=5,y=4,z=1\n41  wxy/z12 w=4,x=6,y=T,z=5\n42  1wS/xyz many\n43  wxy/Dz5 many\n44  3w4/xyz many\n45  wxy/5zD many\n46  wxy/Tz4 many\n47  5wD/xyz many\n48  wDx/y5z many\n49  wxy/3z4 many\n50  wxy/5z2 many\n51  Dyz/S1x none\n52  w1z/xyS none\n53  15x/T6y none\n54  zy4/5x6 none\n55  2xy/4Tz none\n56  xzS/y1w none\n57  Syx/4z5 none\n58  xwS/Tzy none\n59  D5z/xwy none\n60  yxD/z35 none\n\n\nPAT\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8\n\u3053\u306e\u7d50\u679c\u3092\u30b3\u30d4\u30da\u6574\u5f62\u3057\u307e\u3057\u305f\u3002\npat=[]\nDATA.readlines.each do |line|\n  no,q,a = line.strip.split(/\\s+/)\n  next if a == 'none'\n  next if a == 'many'\n  q = q.split('/').join\n  a.scan(/(.)=(.)/) {|fm,to|\n    q.gsub!(fm,to)\n  }\n  pat << q\nend\np pat.uniq.sort\n__END__\n0   Tx4/5yz x=1,y=S,z=2\n1   14S/xyz none\n2   1w6/xyz many\n\u4ee5\u4e0b\u5168\u90e8\u306e\u554f\u984c\u6587\n\n\u554f\u984c\u306f\u3053\u3061\u3089\nhttp://nabetani.sakura.ne.jp/hena/ord29devdice/\n\n\u5f53\u65e5\u53c2\u52a0\u3067\u304d\u306a\u304b\u3063\u305f\u306e\u3067\u4eca\u65e5\u89e3\u304d\u307e\u3057\u305f\u3002\nPAT\u3092\u81ea\u529b\u3067\u66f8\u304d\u51fa\u3059\u6c17\u529b\u304c\u7121\u304b\u3063\u305f\u306e\u3067\u3001\u554f\u984c\u3068\u89e3\u7b54\u304b\u3089\u751f\u6210\u3059\u308b\u3068\u3044\u3046\u8d85\u53cd\u5247\u6280\u3092\u4f7f\u3044\u307e\u3057\u305f\u3002\n\n```rb\nPAT=[\n\"12S453\", \"14653D\", \"15S3D4\", \"1T6D45\",\n\"215T64\", \"2S541T\", \"354S21\", \"3D415S\",\n\"41T2S5\", \"45312S\", \"46T512\", \"4D3S51\",\n\"51246T\", \"53D146\", \"54D6T1\", \"5S2T14\",\n\"641D35\", \"6T154D\", \"D35641\", \"D451T6\",\n\"S21354\", \"S514D3\", \"T145S2\", \"T64215\",\n]\ndef solve(q)\n  xs = q.chars.select{|x| x=~/[a-z]/}\n  r = Regexp.new(xs.inject(q.gsub('/','')){|w,x| w.gsub(x,'(.)')})\n  as = PAT.each_with_object([]){|pat,as|\n    ms = pat.scan(r).flatten\n    as << xs.zip(ms).map{|x,m| \"#{x}=#{m}\"}.join(\",\") unless ms.empty?\n  }\n  case as.size\n  when 0\n    'none'\n  when 1\n    as[0]\n  else\n    'many'\n  end\nend\n\nDATA.readlines.each do |line|\n  no,q,a = line.strip.split(/\\s+/)\n  ans = solve(q)\n  print no + \"\\t\" + ans\n  puts ans == a ? ' o' : ' x'\nend\n__END__\n0\tTx4/5yz\tx=1,y=S,z=2\n1\t14S/xyz\tnone\n2\t1w6/xyz\tmany\n3\t4w3/12S\tw=5\n4\t4w3/S51\tw=D\n5\t15S/wD4\tw=3\n6\t54D/6Tw\tw=1\n7\tS21/35w\tw=4\n8\tw2x/354\tw=S,x=1\n9\twx1/54D\tw=6,x=T\n10\t45w/12x\tw=3,x=S\n11\t5w2/x14\tw=S,x=T\n12\tDw5/x41\tw=3,x=6\n13\tw4x/1y6\tw=D,x=5,y=T\n14\t15w/xy4\tw=S,x=3,y=D\n15\tD35/wxy\tw=6,x=4,y=1\n16\t4wx/51y\tw=6,x=T,y=2\n17\twTx/D4y\tw=1,x=6,y=5\n18\twxy/z3D\tw=1,x=4,y=6,z=5\n19\twx5/1yz\tw=D,x=4,y=T,z=6\n20\tw53/xyz\tw=4,x=1,y=2,z=S\n21\twx1/yzD\tw=6,x=T,y=5,z=4\n22\twxS/3yz\tw=1,x=5,y=D,z=4\n23\twx2/y1z\tw=5,x=S,y=T,z=4\n24\t4wx/2yz\tw=1,x=T,y=S,z=5\n25\tT6w/xyz\tw=4,x=2,y=1,z=5\n26\tSwx/yDz\tw=5,x=1,y=4,z=3\n27\twDx/yzS\tw=3,x=4,y=1,z=5\n28\twxy/5Sz\tw=T,x=1,y=4,z=2\n29\twSx/4yz\tw=2,x=5,y=1,z=T\n30\twxS/y5z\tw=1,x=2,y=4,z=3\n31\twxy/35z\tw=S,x=2,y=1,z=4\n32\twxy/T6z\tw=2,x=1,y=5,z=4\n33\twxD/yz1\tw=5,x=4,y=6,z=T\n34\t1wx/yz5\tw=T,x=6,y=D,z=4\n35\twx3/y5z\tw=4,x=D,y=S,z=1\n36\t6wx/y3z\tw=4,x=1,y=D,z=5\n37\t5wx/4yz\tw=1,x=2,y=6,z=T\n38\twx4/Syz\tw=3,x=5,y=2,z=1\n39\tw3D/xyz\tw=5,x=1,y=4,z=6\n40\tw3x/6yz\tw=D,x=5,y=4,z=1\n41\twxy/z12\tw=4,x=6,y=T,z=5\n42\t1wS/xyz\tmany\n43\twxy/Dz5\tmany\n44\t3w4/xyz\tmany\n45\twxy/5zD\tmany\n46\twxy/Tz4\tmany\n47\t5wD/xyz\tmany\n48\twDx/y5z\tmany\n49\twxy/3z4\tmany\n50\twxy/5z2\tmany\n51\tDyz/S1x\tnone\n52\tw1z/xyS\tnone\n53\t15x/T6y\tnone\n54\tzy4/5x6\tnone\n55\t2xy/4Tz\tnone\n56\txzS/y1w\tnone\n57\tSyx/4z5\tnone\n58\txwS/Tzy\tnone\n59\tD5z/xwy\tnone\n60\tyxD/z35\tnone\n```\n\n###PAT\u751f\u6210\u30b9\u30af\u30ea\u30d7\u30c8\n\u3053\u306e\u7d50\u679c\u3092\u30b3\u30d4\u30da\u6574\u5f62\u3057\u307e\u3057\u305f\u3002\n\n```rb\npat=[]\nDATA.readlines.each do |line|\n  no,q,a = line.strip.split(/\\s+/)\n  next if a == 'none'\n  next if a == 'many'\n  q = q.split('/').join\n  a.scan(/(.)=(.)/) {|fm,to|\n    q.gsub!(fm,to)\n  }\n  pat << q\nend\np pat.uniq.sort\n__END__\n0\tTx4/5yz\tx=1,y=S,z=2\n1\t14S/xyz\tnone\n2\t1w6/xyz\tmany\n\u4ee5\u4e0b\u5168\u90e8\u306e\u554f\u984c\u6587\n```\n", "tags": ["Ruby", "yhpg", "\u3069\u3046\u66f8\u304f"]}