{"context": " More than 1 year has passed since last update.\u3044\u308d\u3044\u308d\u3068\u6539\u5909\u306f\u5fc5\u8981\u3060\u3063\u305f\u3051\u3069(\u7279\u306b\u6587\u5b57\u30b3\u30fc\u30c9) \u3079\u3064\u306b\u3068\u304f\u306b\u5927\u3057\u305f\u3053\u3068\u306f\u306a\u304b\u3063\u305f\u3002\nslurp\u306e\u30b3\u30fc\u30c9\u306f\u501f\u308a\u3066\u304d\u305f\u3002\n(ql:quickload :alexandria)\n(ql:quickload :inferior-shell)\n(ql:quickload :cl-csv)\n(ql:quickload :osicat)\n(in-package :cl-user)\n(use-package :alexandria)\n(use-package :inferior-shell)\n(use-package :cl-csv)\n(use-package :osicat) ;; 2 conflict\n\n;; http://www.ymeme.com/slurping-a-file-common-lisp-83.html\n\n(defun slurp (stream)\n  (let ((seq (make-array (file-length stream)\n                         :element-type 'character\n                         :fill-pointer t)))\n    (setf (fill-pointer seq) (read-sequence seq stream))\n    seq))\n\n(defun read-file-to-string (path)\n  (with-input-from-file (s path)\n    (slurp s)))\n\n;; http://homepage2.nifty.com/domae/tex/atena.html\n;; \u53e4\u3044\u306e\u3067 sjis + DOS\u6539\u884c\u30b3\u30fc\u30c9\n;; \n;; atena.sty --> dos2unix , nkf --in-place -J -w8\n;; \n\n(defun take-tex ()\n  (read-file-to-string \"atena/2014.tex\"))\n\n(defun format-tex (data s)\n  (format s (take-tex) data))\n\n(format-tex '((\"\u306a\u304b\u3058\u307e\" \"123-0348\" \"\u5343\u8449\u6771\u4eac\u30c7\u30a3\u30ba\u30cb\u30fc\u30e9\u30f3\u30c9\")\n             (\"\u306a\u304b\u3058\u307e2\" \"124-0348\" \"\u5317\u6d77\u9053\u672d\u5e4c1-1-1-1-1-1-1\"))\n             t)\n\n(defun %make-pdf (data)\n  (with-open-file (s \"atena/temp.tex\"\n                     :direction :output\n                     :if-does-not-exist :create\n                     :if-exists :supersede)\n    (format-tex data s))\n  (run/s `(progn (cd \"atena\")\n                 (platex \"temp.tex\")\n                 (dvipdfm \"temp.dvi\")\n                 (mv \"temp.pdf\" \"../2014-atena.pdf\"))\n         :show t))\n\n(%make-pdf '((\"\u306a\u304b\u3058\u307e\" \"123-0348\" \"\u5343\u8449\u6771\u4eac\u30c7\u30a3\u30ba\u30cb\u30fc\u30e9\u30f3\u30c9\")\n             (\"\u306a\u304b\u3058\u307e2\" \"124-0348\" \"\u5317\u6d77\u9053\u672d\u5e4c1-1-1-1-1-1-1\")))\n\n\n(defun make-pdf (csv-path)\n  (%make-pdf (csv-data csv-path)))\n\n(defun csv-data (path)\n  (with-input-from-file (s path)\n    (read-csv s)))\n\n(csv-data \"addresses.csv\")\n\n;; \u306a\u304b\u3084\u307e\u304d\u3093\u306b\u541b,000-0000,\u672d\u5e4c1-1-1-1-1-1\n\n(make-pdf \"addresses.csv\")\n\n\u4ee5\u4e0b 2014.tex\n\\documentclass{jarticle}\n\\usepackage[hagaki,nenga]{atena}\n\\usepackage{graphicx}\n\n\\begin{document}\n\n%=======\u5dee\u51fa\u4eba\u8a2d\u5b9a================\n\\sasidasinin{\u6d45\u4e95 \u653f\u592a\u90ce}{000-0000}{\u6771\u4eac\u90fd\u76ee\u9ed2\u533a\u99d2\u58343-8-1 \u6771\u4eac\u5927\u5b66\u99d2\u5834\u30ad\u30e3\u30f3\u30d1\u30b9}\n\n%=======\u8868\u66f8\u304d\u958b\u59cb==============\n\\begin{atena}\n\n~:{\n\\personal{~a}{~a}{~a}\n~}\n\n\\end{atena}\n\\end{document}\n\n\u3044\u308d\u3044\u308d\u3068\u6539\u5909\u306f\u5fc5\u8981\u3060\u3063\u305f\u3051\u3069(\u7279\u306b\u6587\u5b57\u30b3\u30fc\u30c9) \u3079\u3064\u306b\u3068\u304f\u306b\u5927\u3057\u305f\u3053\u3068\u306f\u306a\u304b\u3063\u305f\u3002\nslurp\u306e\u30b3\u30fc\u30c9\u306f\u501f\u308a\u3066\u304d\u305f\u3002\n\n```cl\n(ql:quickload :alexandria)\n(ql:quickload :inferior-shell)\n(ql:quickload :cl-csv)\n(ql:quickload :osicat)\n(in-package :cl-user)\n(use-package :alexandria)\n(use-package :inferior-shell)\n(use-package :cl-csv)\n(use-package :osicat) ;; 2 conflict\n\n;; http://www.ymeme.com/slurping-a-file-common-lisp-83.html\n\n(defun slurp (stream)\n  (let ((seq (make-array (file-length stream)\n                         :element-type 'character\n                         :fill-pointer t)))\n    (setf (fill-pointer seq) (read-sequence seq stream))\n    seq))\n\n(defun read-file-to-string (path)\n  (with-input-from-file (s path)\n    (slurp s)))\n\n;; http://homepage2.nifty.com/domae/tex/atena.html\n;; \u53e4\u3044\u306e\u3067 sjis + DOS\u6539\u884c\u30b3\u30fc\u30c9\n;; \n;; atena.sty --> dos2unix , nkf --in-place -J -w8\n;; \n\n(defun take-tex ()\n  (read-file-to-string \"atena/2014.tex\"))\n\n(defun format-tex (data s)\n  (format s (take-tex) data))\n\n(format-tex '((\"\u306a\u304b\u3058\u307e\" \"123-0348\" \"\u5343\u8449\u6771\u4eac\u30c7\u30a3\u30ba\u30cb\u30fc\u30e9\u30f3\u30c9\")\n             (\"\u306a\u304b\u3058\u307e2\" \"124-0348\" \"\u5317\u6d77\u9053\u672d\u5e4c1-1-1-1-1-1-1\"))\n             t)\n\n(defun %make-pdf (data)\n  (with-open-file (s \"atena/temp.tex\"\n                     :direction :output\n                     :if-does-not-exist :create\n                     :if-exists :supersede)\n    (format-tex data s))\n  (run/s `(progn (cd \"atena\")\n                 (platex \"temp.tex\")\n                 (dvipdfm \"temp.dvi\")\n                 (mv \"temp.pdf\" \"../2014-atena.pdf\"))\n         :show t))\n\n(%make-pdf '((\"\u306a\u304b\u3058\u307e\" \"123-0348\" \"\u5343\u8449\u6771\u4eac\u30c7\u30a3\u30ba\u30cb\u30fc\u30e9\u30f3\u30c9\")\n             (\"\u306a\u304b\u3058\u307e2\" \"124-0348\" \"\u5317\u6d77\u9053\u672d\u5e4c1-1-1-1-1-1-1\")))\n\n\n(defun make-pdf (csv-path)\n  (%make-pdf (csv-data csv-path)))\n\n(defun csv-data (path)\n  (with-input-from-file (s path)\n    (read-csv s)))\n\n(csv-data \"addresses.csv\")\n\n;; \u306a\u304b\u3084\u307e\u304d\u3093\u306b\u541b,000-0000,\u672d\u5e4c1-1-1-1-1-1\n\n(make-pdf \"addresses.csv\")\n```\n\n\u4ee5\u4e0b `2014.tex`\n\n```tex\n\\documentclass{jarticle}\n\\usepackage[hagaki,nenga]{atena}\n\\usepackage{graphicx}\n\n\\begin{document}\n\n%=======\u5dee\u51fa\u4eba\u8a2d\u5b9a================\n\\sasidasinin{\u6d45\u4e95 \u653f\u592a\u90ce}{000-0000}{\u6771\u4eac\u90fd\u76ee\u9ed2\u533a\u99d2\u58343-8-1 \u6771\u4eac\u5927\u5b66\u99d2\u5834\u30ad\u30e3\u30f3\u30d1\u30b9}\n\n%=======\u8868\u66f8\u304d\u958b\u59cb==============\n\\begin{atena}\n\n~:{\n\\personal{~a}{~a}{~a}\n~}\n\n\\end{atena}\n\\end{document}\n```", "tags": ["common-lisp", "TeX", "lisp"]}