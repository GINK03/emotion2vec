{"context": "Pickle\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044KeyPoint\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u305d\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u306e\u3067\n\u305d\u306e\u6642\u306e\u5bfe\u5fdc\u7b56\u306e\u30e1\u30e2\u3067\u3059\u3002\n\u691c\u7d22\u3059\u308c\u3070\u5272\u3068\u3059\u3050\u51fa\u3066\u304d\u305f\u306e\u3067\u3042\u307e\u308a\u9700\u8981\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u4e00\u5fdc\u3002\n\n\u74b0\u5883\n\nPython 3.5.2\nOpenCV 3.1.0\n\n\n\u53c2\u8003URL\nhttp://stackoverflow.com/questions/26501193/opencv-python-find-a-code-for-writing-keypoins-to-a-file\n\u3053\u3053\u3067\u306e\u56de\u7b54\u3068\u307b\u307c\u540c\u3058\u3067\u3059\n\n\u5931\u6557\u4f8b\n\nout_kp_and_des.py\nimport cv2\nimport pickle\n\n\nimg = cv2.imread('XXXX.jpg')\ndetector = cv2.AKAZE_create()\n# keypoints\u3068descriptors\nkp, des = detector.detectAndCompute(img, None)\n\nwith open('XXXX.pickle', mode='wb') as f:\n    pickle.dump((kp, des), f)\n\n\nKeyPoint\u3092\u305d\u306e\u307e\u307ePickle\u5316\u3057\u3088\u3046\u3068\u3059\u308b\u3068PicklingError: Can't pickle <class 'cv2.KeyPoint'>: it's not the same object as cv2.KeyPoint\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\n\n\u89e3\u6c7a\u7b56\n\nout_kp_and_des.py\nimport cv2\nimport pickle\n\n\nimg = cv2.imread('XXXX.jpg')\ndetector = cv2.AKAZE_create()\nkp, des = detector.detectAndCompute(img, None)\n\nindex = []\nfor p in kp:\n    temp = (p.pt, p.size, p.angle, p.response, p.octave, p.class_id)\n    index.append(temp)\nwith open('XXXX.pickle', mode='wb') as f:\n    pickle.dump((index, des), f)\n\n\nKeyPoint\u306e\u30a2\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8\u3092\u53d6\u308a\u51fa\u3057\u3066\u305d\u308c\u3092\u30ea\u30b9\u30c8\u306b\u5165\u308c\u3066Pickle\u5316\u3063\u3066\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\nload_kp_and_des.py\nimport cv2\nimport pickle\n\n\nwith open('XXXX.pickle', mode='rb') as f:\n    index, des = pickle.load(f)\nkp = []\nfor p in index:\n    temp = cv2.KeyPoint(x=p[0][0], y=p[0][1], _size=p[1], _angle=p[2],\n                        _response=p[3], _octave=p[4], _class_id=p[5])\n    kp.append(temp)\n\n\nPickle\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044KeyPoint\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u66f8\u304d\u51fa\u305d\u3046\u3068\u3057\u305f\u3068\u3053\u308d\u30a8\u30e9\u30fc\u304c\u51fa\u305f\u306e\u3067\n\u305d\u306e\u6642\u306e\u5bfe\u5fdc\u7b56\u306e\u30e1\u30e2\u3067\u3059\u3002\n\u691c\u7d22\u3059\u308c\u3070\u5272\u3068\u3059\u3050\u51fa\u3066\u304d\u305f\u306e\u3067\u3042\u307e\u308a\u9700\u8981\u306f\u306a\u3044\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c\u4e00\u5fdc\u3002\n\n## \u74b0\u5883\n- Python 3.5.2\n- OpenCV 3.1.0\n\n## \u53c2\u8003URL\nhttp://stackoverflow.com/questions/26501193/opencv-python-find-a-code-for-writing-keypoins-to-a-file\n\u3053\u3053\u3067\u306e\u56de\u7b54\u3068\u307b\u307c\u540c\u3058\u3067\u3059\n\n## \u5931\u6557\u4f8b\n```python:out_kp_and_des.py\nimport cv2\nimport pickle\n\n\nimg = cv2.imread('XXXX.jpg')\ndetector = cv2.AKAZE_create()\n# keypoints\u3068descriptors\nkp, des = detector.detectAndCompute(img, None)\n\nwith open('XXXX.pickle', mode='wb') as f:\n    pickle.dump((kp, des), f)\n```\nKeyPoint\u3092\u305d\u306e\u307e\u307ePickle\u5316\u3057\u3088\u3046\u3068\u3059\u308b\u3068```PicklingError: Can't pickle <class 'cv2.KeyPoint'>: it's not the same object as cv2.KeyPoint```\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u307e\u3059\u3002\n\n## \u89e3\u6c7a\u7b56\n```python:out_kp_and_des.py\nimport cv2\nimport pickle\n\n\nimg = cv2.imread('XXXX.jpg')\ndetector = cv2.AKAZE_create()\nkp, des = detector.detectAndCompute(img, None)\n\nindex = []\nfor p in kp:\n    temp = (p.pt, p.size, p.angle, p.response, p.octave, p.class_id)\n    index.append(temp)\nwith open('XXXX.pickle', mode='wb') as f:\n    pickle.dump((index, des), f)\n```\nKeyPoint\u306e\u30a2\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8\u3092\u53d6\u308a\u51fa\u3057\u3066\u305d\u308c\u3092\u30ea\u30b9\u30c8\u306b\u5165\u308c\u3066Pickle\u5316\u3063\u3066\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\u30d5\u30a1\u30a4\u30eb\u8aad\u307f\u8fbc\u307f\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u3067\u3059\u3002\n\n```python:load_kp_and_des.py\nimport cv2\nimport pickle\n\n\nwith open('XXXX.pickle', mode='rb') as f:\n    index, des = pickle.load(f)\nkp = []\nfor p in index:\n    temp = cv2.KeyPoint(x=p[0][0], y=p[0][1], _size=p[1], _angle=p[2],\n                        _response=p[3], _octave=p[4], _class_id=p[5])\n    kp.append(temp)\n```\n", "tags": ["Python", "python3", "OpenCV", "OpenCV-Python"]}