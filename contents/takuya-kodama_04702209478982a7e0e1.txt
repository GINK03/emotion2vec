{"context": "\u305b\u3063\u304b\u304fPersonality insights\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u305f\u306e\u306b\u8868\u793a\u306b\u95a2\u3059\u308b\u30bd\u30fc\u30b9\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u6295\u7a3f\u3057\u307e\u3057\u305f\u3002\n\n1 JS\u30d5\u30a1\u30a4\u30eb\u306e\u6e96\u5099\n\u30b3\u30fc\u30c9\u3092\u66f8\u304f\u524d\u306bD3js\u306e\u8aad\u307f\u8fbc\u307f\u3092\u5b8c\u4e86\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002 https://github.com/d3/d3/wiki\n  $(document).ready(function(){\n    //\u68d2\u30b0\u30e9\u30d5\u3092\u8868\u793a\u3059\u308b\u3002\n    var margin = {top: 20, right: 20, bottom: 30, left: 40},\n    width = 1000 - margin.left - margin.right,\n    height = 600 - margin.top - margin.bottom;\n\n    var formatPercent = d3.format(\".0%\");\n\n    var x = d3.scale.ordinal()\n        .rangeRoundBands([0, width], .1);\n\n    var y = d3.scale.linear()\n        .range([height, 0]);\n\n    var xAxis = d3.svg.axis()\n        .scale(x)\n        .innerTickSize(0)\n        .orient(\"bottom\");\n\n    var yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\")\n        .tickFormat(formatPercent);\n\n    var svg = d3.select(\"\u8868\u793a\u3057\u305f\u3044\u90e8\u5206\").append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    d3.json(\"\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u5148![Screen Shot 2017-01-26 at 19.26.12.png](https://qiita-image-store.s3.amazonaws.com/0/155726/1bfd885a-c31a-bac6-2fb1-167032465980.png)\n\", function(error, data) {\n\n      data.forEach(function(d) {\n          d.frequency = +d.frequency;\n      });\n\n      $.each(data , function(i , dat){\n      });\n\n      x.domain(data.map(function(d) { return d.name; }));\n      y.domain([0, d3.max(data, function(d) { return d.percentile; })]);\n\n\n      svg.append(\"g\")\n          .attr(\"class\", \"y axis\")\n          .call(yAxis)\n\n      svg.selectAll(\".bar\")\n          .data(data)\n        .enter().append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"x\", function(d) { return x(d.name); })\n          .attr(\"width\", x.rangeBand())\n          .attr(\"y\", function(d) { return y(d.percentile); })\n          .attr(\"height\", function(d) { return height - y(d.percentile); });\n\n      svg.append(\"g\")\n          .attr(\"class\", \"x axis\")\n          .attr(\"transform\", \"translate(0,\" + (height-100) + \")\")\n          .call(xAxis)\n          .selectAll(\"text\")\n          .style(\"text-anchor\", \"end\")\n          .attr(\"dx\", \"1em\")\n          .attr(\"dy\", \"0.3em\")\n          .attr(\"transform\", \"rotate(-90)\" );\n      });\n  });\n\n\n2 CSS\u30d5\u30a1\u30a4\u30eb\ncss\u306e\u30d5\u30a1\u30a4\u30eb\n\n.axis path,\n.axis line {\n  fill: none;\n  stroke: #000;\n}\n.bar {\n  fill: rgb(229,45,39);\n}\n\n.x.axis path {\n  display: none;\n}\n\n\n3 \u53d7\u3051\u6e21\u3059\u30c7\u30fc\u30bf\u306e\u30b3\u30fc\u30c9\n\u3000\u4eca\u56de\u306frails\u3067\u5b9f\u88c5\u3057\u305f\u306e\u3067rails\u306e\u30b3\u30fc\u30c9\u3092\u8f09\u305b\u307e\u3059\u3002\u5b9f\u88c5\u8005\u304c\u521d\u5fc3\u8005\u3067\u3059\u306e\u3067\u3082\u3063\u3068\u826f\u3044\u30b3\u30fc\u30c9\u306e\u66f8\u304d\u65b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u81ea\u5206\u306e\u7d0d\u5f97\u3044\u304f\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n    data = []\n    @insights[\"personality\"].each do |insights|\n      data += insights[\"children\"]\n    end\n    respond_to do |format|\n      format.html\n      format.json {render json: data}\n    end\n\n\n\u5b8c\u6210\u56f3\n\u3000\u3053\u306e\u3088\u3046\u306a\u5f62\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3000\u3053\u308c\u3092\u5143\u306b\u30a2\u30ec\u30f3\u30b8\u7b49\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u305b\u3063\u304b\u304fPersonality insights\u304b\u3089\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u305f\u306e\u306b\u8868\u793a\u306b\u95a2\u3059\u308b\u30bd\u30fc\u30b9\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u6295\u7a3f\u3057\u307e\u3057\u305f\u3002\n\n#1 JS\u30d5\u30a1\u30a4\u30eb\u306e\u6e96\u5099\n \u30b3\u30fc\u30c9\u3092\u66f8\u304f\u524d\u306bD3js\u306e\u8aad\u307f\u8fbc\u307f\u3092\u5b8c\u4e86\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002 https://github.com/d3/d3/wiki\n\n```\n  $(document).ready(function(){\n    //\u68d2\u30b0\u30e9\u30d5\u3092\u8868\u793a\u3059\u308b\u3002\n    var margin = {top: 20, right: 20, bottom: 30, left: 40},\n    width = 1000 - margin.left - margin.right,\n    height = 600 - margin.top - margin.bottom;\n\n    var formatPercent = d3.format(\".0%\");\n\n    var x = d3.scale.ordinal()\n        .rangeRoundBands([0, width], .1);\n\n    var y = d3.scale.linear()\n        .range([height, 0]);\n\n    var xAxis = d3.svg.axis()\n        .scale(x)\n        .innerTickSize(0)\n        .orient(\"bottom\");\n\n    var yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\")\n        .tickFormat(formatPercent);\n\n    var svg = d3.select(\"\u8868\u793a\u3057\u305f\u3044\u90e8\u5206\").append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n      .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n    d3.json(\"\u30c7\u30fc\u30bf\u306e\u53d6\u5f97\u5148![Screen Shot 2017-01-26 at 19.26.12.png](https://qiita-image-store.s3.amazonaws.com/0/155726/1bfd885a-c31a-bac6-2fb1-167032465980.png)\n\", function(error, data) {\n\n      data.forEach(function(d) {\n          d.frequency = +d.frequency;\n      });\n\n      $.each(data , function(i , dat){\n      });\n\n      x.domain(data.map(function(d) { return d.name; }));\n      y.domain([0, d3.max(data, function(d) { return d.percentile; })]);\n\n\n      svg.append(\"g\")\n          .attr(\"class\", \"y axis\")\n          .call(yAxis)\n\n      svg.selectAll(\".bar\")\n          .data(data)\n        .enter().append(\"rect\")\n          .attr(\"class\", \"bar\")\n          .attr(\"x\", function(d) { return x(d.name); })\n          .attr(\"width\", x.rangeBand())\n          .attr(\"y\", function(d) { return y(d.percentile); })\n          .attr(\"height\", function(d) { return height - y(d.percentile); });\n\n      svg.append(\"g\")\n          .attr(\"class\", \"x axis\")\n          .attr(\"transform\", \"translate(0,\" + (height-100) + \")\")\n          .call(xAxis)\n          .selectAll(\"text\")\n          .style(\"text-anchor\", \"end\")\n          .attr(\"dx\", \"1em\")\n          .attr(\"dy\", \"0.3em\")\n          .attr(\"transform\", \"rotate(-90)\" );\n      });\n  });\n```\n#2 CSS\u30d5\u30a1\u30a4\u30eb\n```\ncss\u306e\u30d5\u30a1\u30a4\u30eb\n\n.axis path,\n.axis line {\n  fill: none;\n  stroke: #000;\n}\n.bar {\n  fill: rgb(229,45,39);\n}\n\n.x.axis path {\n  display: none;\n}\n```\n\n#3 \u53d7\u3051\u6e21\u3059\u30c7\u30fc\u30bf\u306e\u30b3\u30fc\u30c9\n\u3000\u4eca\u56de\u306frails\u3067\u5b9f\u88c5\u3057\u305f\u306e\u3067rails\u306e\u30b3\u30fc\u30c9\u3092\u8f09\u305b\u307e\u3059\u3002\u5b9f\u88c5\u8005\u304c\u521d\u5fc3\u8005\u3067\u3059\u306e\u3067\u3082\u3063\u3068\u826f\u3044\u30b3\u30fc\u30c9\u306e\u66f8\u304d\u65b9\u304c\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u306e\u3067\u3001\u81ea\u5206\u306e\u7d0d\u5f97\u3044\u304f\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n    data = []\n    @insights[\"personality\"].each do |insights|\n      data += insights[\"children\"]\n    end\n    respond_to do |format|\n      format.html\n      format.json {render json: data}\n    end\n```\n\n#\u5b8c\u6210\u56f3\n\u3000\u3053\u306e\u3088\u3046\u306a\u5f62\u306b\u306a\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u3000\u3053\u308c\u3092\u5143\u306b\u30a2\u30ec\u30f3\u30b8\u7b49\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n![Screen Shot 2017-01-26 at 19.26.12.png](https://qiita-image-store.s3.amazonaws.com/0/155726/322f953d-a145-d885-f277-c9a30f85da21.png)\n", "tags": ["Watson", "PersonalityInsights", "d3.js", "RubyOnRails"]}