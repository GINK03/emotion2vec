{"context": "2016\u5e7412\u67081\u65e5\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305fAmazon Lightsail\u306b\naws-sdk\u304c\u306f\u3084\u304f\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u305f\u306e\u3067\u65e9\u901f\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\nLightsail?\n\u3053\u3053\u306b\u304d\u3066EC2\u3088\u308a\u624b\u8efd\u306b\u4f7f\u3048\u308bVPS\u30b5\u30fc\u30d3\u30b9\u767b\u5834\u3067\u3059\u306d\u3002\nEC2\u3082VPS\u306e\u3088\u3046\u306b\u7d39\u4ecb\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001Route53\u3092\u306f\u3058\u3081\u3068\u3059\u308b\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3044\u308d\u3044\u308d\u306a\u3053\u3068\u304c\u3067\u304d\u308b\u5206\u3001\u6280\u8853\u8005\u4ee5\u5916\u306b\u306f\u6271\u3044\u3065\u3089\u3044\u3082\u306e\u3067\u3057\u305f\u3002\nLightsail\u306e\u767b\u5834\u306b\u3088\u308a\u6577\u5c45\u304c\u3050\u3063\u3068\u4f4e\u304f\u306a\u308a\u305d\u3046\u3067\u3059\u3057\u3001\u6280\u8853\u8005\u306b\u3068\u3063\u3066\u3082\u300cRedmine\u300d\u300cGitLab\u300d\u300cWordpress\u300d\u306a\u3069\u6025\u306b\u5fc5\u8981\u306b\u306a\u3063\u305f\u3068\u304d\u3071\u3071\u3063\u3068\u7528\u610f\u3067\u304d\u3066\u3068\u3066\u3082\u4fbf\u5229\u306b\u4f7f\u3048\u305d\u3046\u3067\u3059\u3002\nAmazon Lightsail \u2013 AWS\u306e\u529b\u3001VPS\u306e\u7c21\u5358\u3055 | Amazon Web Services \u30d6\u30ed\u30b0\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nGem\n$ gem install aws-sdk -v 2.6.30\n\n\u307e\u305f\u306f\n$ vi Gemfile\n\n# frozen_string_literal: true\nsource 'https://rubygems.org'\n\ngem 'aws-sdk', '~> 2.6', '>= 2.6.30'\n\n\n$ bundle install\n\n\nAWS\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\naws configure\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u306a\u3069\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068Ruby\u5074\u3067\u7279\u306b\u8a2d\u5b9a\u305b\u305a\u306b\u8a66\u305b\u308b\u306e\u3067\u697d\u3067\u3059\u3002\nAWS CLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n$ aws configure\n\n\u307e\u305f\u306f\u74b0\u5883\u5909\u6570\u3067\u4e0e\u3048\u308b\n$ export AWS_ACCESS_KEY=xxxxxxxxxxxxxx\n$ export AWS_SECRET_KEY=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyy\n$ export AWS_REGION=us-east-1\n$ bundle exec ruby ....\n\n\n\u8d77\u52d5\u3057\u3066\u307f\u308b\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\nAws::Lightsail::Client#create_instances\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u4eca\u56de\u306fLAMP\u74b0\u5883\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fVPS\u30923\u53f0\u307b\u3069\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\nresp = lightsail.create_instances(\n  instance_names: %w(vps1 vps2 vps3),\n  availability_zone: 'us-east-1a',\n  blueprint_id: 'lamp_5_6_27',\n  bundle_id: 'nano_1_0',\n)\npp resp.operations\n\n\u7ba1\u7406\u753b\u9762\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u78ba\u304b\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n\nBlueprint ID\u306e\u53d6\u5f97\ncreate_instances\u306b\u6e21\u3059blueprint_id\u306fAws::Lightsail::Client#get_blueprints\u3067\u5f97\u3089\u308c\u307e\u3059\u3002\nresp = lightsail.get_blueprints\npp resp.blueprints.map(&:blueprint_id)\n# => [\"amazon_linux_2016_09_0\", \"ubuntu_16_04\", \"wordpress_4_6_1\", \"lamp_5_6_27\", \"nodejs_6_9_1\", \"joomla_3_6_3\", \"magento_2_1_2\", \"mean_3_2_10\", \"drupal_8_2_1\", \"gitlab_8_12_6\", \"redmine_3_3_1\", \"nginx_1_10_2\"]\n\n\u9752\u5199\u771f\u3068\u3044\u3046\u901a\u308a\u57fa\u672c\u7684\u306a\u69cb\u7bc9\u8a08\u753b\u306e\u3088\u3046\u3067\u3059\u306d\u3002\n\nBundle ID\u306e\u53d6\u5f97\ncreate_instances\u306b\u6e21\u3059bundle_id\u306fAws::Lightsail::Client#get_bundles\u3067\u5f97\u3089\u308c\u307e\u3059\u3002\nresp = lightsail.get_bundles\np resp.bundles.map(&:bundle_id)\n# => [\"nano_1_0\", \"micro_1_0\", \"small_1_0\", \"medium_1_0\", \"large_1_0\"]\n\n\u6599\u91d1\u30d7\u30e9\u30f3\u3067\u3059\u306d\u3002\nLightsail Pricing: $5 Virtual Private Servers from AWS\n\n\u8d77\u52d5\u72b6\u614b\u306e\u78ba\u8a8d\nrunning\u306b\u306a\u3063\u305f\u3089\u4f7f\u3048\u308b\u307f\u305f\u3044\u3067\u3059\u3002\u8d77\u52d5\u306f\u3068\u3066\u3082\u901f\u3044\u5370\u8c61\u3067\u3057\u305f\u3002\nresp = lightsail.get_instance_state(\n    instance_name: 'vps1'\n)\np resp.state\n# => #<struct Aws::Lightsail::Types::InstanceState code=16, name=\"running\">\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u78ba\u8a8d\n\u3082\u3063\u3068\u8a73\u3057\u3044\u60c5\u5831\u306f\u53d6\u5f97get_instance\u3067\u3067\u304d\u307e\u3059\u3002\nresp = lightsail.get_instance(\n    instance_name: 'vps1'\n)\npp resp.instance\n=begin\n#<struct Aws::Lightsail::Types::Instance\n name=\"vps1\",\n arn=\n  \"arn:aws:lightsail:us-east-1:764044168140:Instance/1eb1f2d7-d6b0-40ce-a023-XXXXXXXXXXXX\",\n support_code=\"775094070140/i-XXXXXXXXXXXXXXXXX\",\n created_at=2016-12-01 21:56:57 +0900,\n location=\n  #<struct Aws::Lightsail::Types::ResourceLocation\n   availability_zone=\"us-east-1a\",\n   region_name=\"us-east-1\">,\n resource_type=\"Instance\",\n blueprint_id=\"lamp_5_6_27\",\n blueprint_name=\"LAMP Stack\",\n bundle_id=\"nano_1_0\",\n is_static_ip=false,\n private_ip_address=\"172.XX.XX.XXX\",\n public_ip_address=\"54.XXX.XXX.XX\",\n ipv6_address=nil,\n hardware=\n  #<struct Aws::Lightsail::Types::InstanceHardware\n   cpu_count=1,\n   disks=nil,\n   ram_size_in_gb=0.5>,\n networking=\n  #<struct Aws::Lightsail::Types::InstanceNetworking\n   monthly_transfer=\n    #<struct Aws::Lightsail::Types::MonthlyTransfer\n     gb_per_month_allocated=1000>,\n   ports=\n    [#<struct Aws::Lightsail::Types::InstancePortInfo\n      from_port=80,\n      to_port=80,\n      protocol=\"tcp\",\n      access_from=\"Anywhere (0.0.0.0/0)\",\n      access_type=\"public\",\n      common_name=\"\",\n      access_direction=\"inbound\">,\n     #<struct Aws::Lightsail::Types::InstancePortInfo\n      from_port=22,\n      to_port=22,\n      protocol=\"tcp\",\n      access_from=\"Anywhere (0.0.0.0/0)\",\n      access_type=\"public\",\n      common_name=\"\",\n      access_direction=\"inbound\">,\n     #<struct Aws::Lightsail::Types::InstancePortInfo\n      from_port=443,\n      to_port=443,\n      protocol=\"tcp\",\n      access_from=\"Anywhere (0.0.0.0/0)\",\n      access_type=\"public\",\n      common_name=\"\",\n      access_direction=\"inbound\">]>,\n state=#<struct Aws::Lightsail::Types::InstanceState code=16, name=\"running\">,\n username=\"bitnami\",\n ssh_key_name=\"LightsailDefaultKeyPair\">\n=end\n\n\n\u63a5\u7d9a\u60c5\u5831\u306e\u53d6\u5f97\n\u8d77\u52d5\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3078\u306eSSH\u63a5\u7d9a\u60c5\u5831\u3082API\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\nSSH\n\u9375\u3082\u3068\u308c\u307e\u3059\u3002\nresp = lightsail.get_instance_access_details(\n  instance_name: 'vps1'\n)\npp resp.access_details\n=begin\n#<struct Aws::Lightsail::Types::InstanceAccessDetails\n cert_key=\n  \"ssh-rsa-cert-v01@openssh.com \u5171\u6709\u9375\",\n expires_at=nil,\n ip_address=\"XXX.XXX.XXX.XXX\",\n password=nil,\n private_key=\n  \"-----BEGIN RSA PRIVATE KEY-----\\n\u79d8\u5bc6\u9375\\n-----END RSA PRIVATE KEY-----\\n\",\n protocol=\"ssh\",\n instance_name=\"vps1\",\n username=\"bitnami\">\n=end\n\n\nRDP\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308b\u3068protocol: 'rdp'\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u8a66\u3057\u305f\u74b0\u5883\u3067\u306f\u610f\u5473\u304c\u7121\u304b\u3063\u305f\u3067\u3059\u304c\u3001\u4f7f\u3048\u308b\u30b1\u30fc\u30b9\u3082\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\nresp = lightsail.get_instance_access_details(\n  instance_name: 'vps1',\n  protocol: 'rdp'\n)\npp resp.access_details\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\nget_instance\u306epublic_ip_address\u3084get_instance_access_details\u306eip_address\u306b\u30d6\u30e9\u30a6\u30b6\u3067HTTP\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u5148\u307b\u3069\u9078\u629e\u3057\u305fLAMP\u74b0\u5883\u306e\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u505c\u6b62\nstop_instance\u3067\u505c\u6b62\u3067\u304d\u307e\u3059\u3002\nresp = lightsail.stop_instance(\n   instance_name: instance_name\n)\npp resp.operations\n\n\u505c\u6b62\u304c\u5b8c\u4e86\u3057\u305f\u3089stopped\u306b\u306a\u308a\u307e\u3059\u3002\np lightsail.get_instance_status(instance_name: 'vps1').status\n#<struct Aws::Lightsail::Types::InstanceState code=64, name=\"stopping\">\np lightsail.get_instance_status(instance_name: 'vps1').status\n#<struct Aws::Lightsail::Types::InstanceState code=80, name=\"stopped\">\n\n\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u518d\u958b\n\u505c\u6b62\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306fstart_instance\u3067\u518d\u958b\u3067\u304d\u307e\u3059\u3002\nresp = lightsail.start_instance(\n   instance_name: 'vps1'\n)\npp resp.operations\n\n\n\u6b21\u56de\n\u904b\u7528\u3057\u3066\u3044\u304f\u4e0a\u3067\u3068\u3066\u3082\u3042\u308a\u304c\u305f\u3044\u5b58\u5728\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u307e\u308f\u308a\u3092\u8a66\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n2016\u5e7412\u67081\u65e5\u306b\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u305f[Amazon Lightsail](https://amazonlightsail.com/)\u306b\n[aws-sdk](https://rubygems.org/gems/aws-sdk)\u304c\u306f\u3084\u304f\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u305f\u306e\u3067\u65e9\u901f\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\n### Lightsail?\n\n\u3053\u3053\u306b\u304d\u3066EC2\u3088\u308a\u624b\u8efd\u306b\u4f7f\u3048\u308bVPS\u30b5\u30fc\u30d3\u30b9\u767b\u5834\u3067\u3059\u306d\u3002\n\nEC2\u3082VPS\u306e\u3088\u3046\u306b\u7d39\u4ecb\u3055\u308c\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3057\u305f\u304c\u3001Route53\u3092\u306f\u3058\u3081\u3068\u3059\u308b\u8907\u6570\u306e\u30b5\u30fc\u30d3\u30b9\u3092\u7d44\u307f\u5408\u308f\u305b\u3066\u3044\u308d\u3044\u308d\u306a\u3053\u3068\u304c\u3067\u304d\u308b\u5206\u3001\u6280\u8853\u8005\u4ee5\u5916\u306b\u306f\u6271\u3044\u3065\u3089\u3044\u3082\u306e\u3067\u3057\u305f\u3002\n\nLightsail\u306e\u767b\u5834\u306b\u3088\u308a\u6577\u5c45\u304c\u3050\u3063\u3068\u4f4e\u304f\u306a\u308a\u305d\u3046\u3067\u3059\u3057\u3001\u6280\u8853\u8005\u306b\u3068\u3063\u3066\u3082\u300cRedmine\u300d\u300cGitLab\u300d\u300cWordpress\u300d\u306a\u3069\u6025\u306b\u5fc5\u8981\u306b\u306a\u3063\u305f\u3068\u304d\u3071\u3071\u3063\u3068\u7528\u610f\u3067\u304d\u3066\u3068\u3066\u3082\u4fbf\u5229\u306b\u4f7f\u3048\u305d\u3046\u3067\u3059\u3002\n\n[Amazon Lightsail \u2013 AWS\u306e\u529b\u3001VPS\u306e\u7c21\u5358\u3055 | Amazon Web Services \u30d6\u30ed\u30b0](https://aws.amazon.com/jp/blogs/news/amazon-lightsail-the-power-of-aws-the-simplicity-of-a-vps/)\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n### Gem\n\n```sh\n$ gem install aws-sdk -v 2.6.30\n```\n\n\u307e\u305f\u306f\n\n```sh\n$ vi Gemfile\n```\n\n```ruby\n# frozen_string_literal: true\nsource 'https://rubygems.org'\n\ngem 'aws-sdk', '~> 2.6', '>= 2.6.30'\n\n```\n\n```sh\n$ bundle install\n```\n\n### AWS\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\n\n`aws configure`\u30b3\u30de\u30f3\u30c9\u3067\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u306a\u3069\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3068Ruby\u5074\u3067\u7279\u306b\u8a2d\u5b9a\u305b\u305a\u306b\u8a66\u305b\u308b\u306e\u3067\u697d\u3067\u3059\u3002\n\n[AWS CLI \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a](http://docs.aws.amazon.com/ja_jp/streams/latest/dev/kinesis-tutorial-cli-installation.html)\n\n```sh\n$ aws configure\n```\n\n\u307e\u305f\u306f\u74b0\u5883\u5909\u6570\u3067\u4e0e\u3048\u308b\n\n```sh\n$ export AWS_ACCESS_KEY=xxxxxxxxxxxxxx\n$ export AWS_SECRET_KEY=yyyyyyyyyyyyyyyyyyyyyyyyyyyyyy\n$ export AWS_REGION=us-east-1\n$ bundle exec ruby ....\n```\n\n\n## \u8d77\u52d5\u3057\u3066\u307f\u308b\n\n### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4f5c\u6210\n\n[Aws::Lightsail::Client#create_instances](http://docs.aws.amazon.com/sdkforruby/api/Aws/Lightsail/Client.html#create_instances-instance_method)\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\u4eca\u56de\u306fLAMP\u74b0\u5883\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305fVPS\u30923\u53f0\u307b\u3069\u4f5c\u3063\u3066\u307f\u307e\u3059\u3002\n\n```ruby\nresp = lightsail.create_instances(\n  instance_names: %w(vps1 vps2 vps3),\n  availability_zone: 'us-east-1a',\n  blueprint_id: 'lamp_5_6_27',\n  bundle_id: 'nano_1_0',\n)\npp resp.operations\n```\n\n[\u7ba1\u7406\u753b\u9762](https://lightsail.aws.amazon.com/ls/webapp/home/resources)\u3092\u898b\u3066\u307f\u308b\u3068\u3001\u78ba\u304b\u306b\u8ffd\u52a0\u3055\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\n![create_instances.PNG](https://qiita-image-store.s3.amazonaws.com/0/7000/adafb266-6cc1-87be-3b49-801495403f47.png)\n\n#### Blueprint ID\u306e\u53d6\u5f97\n\n`create_instances`\u306b\u6e21\u3059`blueprint_id`\u306f[Aws::Lightsail::Client#get_blueprints](http://docs.aws.amazon.com/sdkforruby/api/Aws/Lightsail/Client.html#get_blueprints-instance_method)\u3067\u5f97\u3089\u308c\u307e\u3059\u3002\n\n```ruby\nresp = lightsail.get_blueprints\npp resp.blueprints.map(&:blueprint_id)\n# => [\"amazon_linux_2016_09_0\", \"ubuntu_16_04\", \"wordpress_4_6_1\", \"lamp_5_6_27\", \"nodejs_6_9_1\", \"joomla_3_6_3\", \"magento_2_1_2\", \"mean_3_2_10\", \"drupal_8_2_1\", \"gitlab_8_12_6\", \"redmine_3_3_1\", \"nginx_1_10_2\"]\n```\n\n\u9752\u5199\u771f\u3068\u3044\u3046\u901a\u308a\u57fa\u672c\u7684\u306a\u69cb\u7bc9\u8a08\u753b\u306e\u3088\u3046\u3067\u3059\u306d\u3002\n\n\n##### Bundle ID\u306e\u53d6\u5f97\n\n`create_instances`\u306b\u6e21\u3059`bundle_id`\u306f[Aws::Lightsail::Client#get_bundles](http://docs.aws.amazon.com/sdkforruby/api/Aws/Lightsail/Client.html#get_bundles-instance_method)\u3067\u5f97\u3089\u308c\u307e\u3059\u3002\n\n```ruby\nresp = lightsail.get_bundles\np resp.bundles.map(&:bundle_id)\n# => [\"nano_1_0\", \"micro_1_0\", \"small_1_0\", \"medium_1_0\", \"large_1_0\"]\n```\n\n\u6599\u91d1\u30d7\u30e9\u30f3\u3067\u3059\u306d\u3002\n\n[Lightsail Pricing: $5 Virtual Private Servers from AWS](https://amazonlightsail.com/pricing/)\n\n\n### \u8d77\u52d5\u72b6\u614b\u306e\u78ba\u8a8d\n\n`running`\u306b\u306a\u3063\u305f\u3089\u4f7f\u3048\u308b\u307f\u305f\u3044\u3067\u3059\u3002\u8d77\u52d5\u306f\u3068\u3066\u3082\u901f\u3044\u5370\u8c61\u3067\u3057\u305f\u3002\n\n```ruby\nresp = lightsail.get_instance_state(\n    instance_name: 'vps1'\n)\np resp.state\n# => #<struct Aws::Lightsail::Types::InstanceState code=16, name=\"running\">\n```\n\n### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u78ba\u8a8d\n\n\u3082\u3063\u3068\u8a73\u3057\u3044\u60c5\u5831\u306f\u53d6\u5f97[get_instance](http://docs.aws.amazon.com/sdkforruby/api/Aws/Lightsail/Client.html#get_instance-instance_method)\u3067\u3067\u304d\u307e\u3059\u3002\n\n```ruby\nresp = lightsail.get_instance(\n    instance_name: 'vps1'\n)\npp resp.instance\n=begin\n#<struct Aws::Lightsail::Types::Instance\n name=\"vps1\",\n arn=\n  \"arn:aws:lightsail:us-east-1:764044168140:Instance/1eb1f2d7-d6b0-40ce-a023-XXXXXXXXXXXX\",\n support_code=\"775094070140/i-XXXXXXXXXXXXXXXXX\",\n created_at=2016-12-01 21:56:57 +0900,\n location=\n  #<struct Aws::Lightsail::Types::ResourceLocation\n   availability_zone=\"us-east-1a\",\n   region_name=\"us-east-1\">,\n resource_type=\"Instance\",\n blueprint_id=\"lamp_5_6_27\",\n blueprint_name=\"LAMP Stack\",\n bundle_id=\"nano_1_0\",\n is_static_ip=false,\n private_ip_address=\"172.XX.XX.XXX\",\n public_ip_address=\"54.XXX.XXX.XX\",\n ipv6_address=nil,\n hardware=\n  #<struct Aws::Lightsail::Types::InstanceHardware\n   cpu_count=1,\n   disks=nil,\n   ram_size_in_gb=0.5>,\n networking=\n  #<struct Aws::Lightsail::Types::InstanceNetworking\n   monthly_transfer=\n    #<struct Aws::Lightsail::Types::MonthlyTransfer\n     gb_per_month_allocated=1000>,\n   ports=\n    [#<struct Aws::Lightsail::Types::InstancePortInfo\n      from_port=80,\n      to_port=80,\n      protocol=\"tcp\",\n      access_from=\"Anywhere (0.0.0.0/0)\",\n      access_type=\"public\",\n      common_name=\"\",\n      access_direction=\"inbound\">,\n     #<struct Aws::Lightsail::Types::InstancePortInfo\n      from_port=22,\n      to_port=22,\n      protocol=\"tcp\",\n      access_from=\"Anywhere (0.0.0.0/0)\",\n      access_type=\"public\",\n      common_name=\"\",\n      access_direction=\"inbound\">,\n     #<struct Aws::Lightsail::Types::InstancePortInfo\n      from_port=443,\n      to_port=443,\n      protocol=\"tcp\",\n      access_from=\"Anywhere (0.0.0.0/0)\",\n      access_type=\"public\",\n      common_name=\"\",\n      access_direction=\"inbound\">]>,\n state=#<struct Aws::Lightsail::Types::InstanceState code=16, name=\"running\">,\n username=\"bitnami\",\n ssh_key_name=\"LightsailDefaultKeyPair\">\n=end\n```\n\n\n### \u63a5\u7d9a\u60c5\u5831\u306e\u53d6\u5f97\n\n\u8d77\u52d5\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3078\u306eSSH\u63a5\u7d9a\u60c5\u5831\u3082API\u3067\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002\n\n#### SSH\n\n\u9375\u3082\u3068\u308c\u307e\u3059\u3002\n\n```ruby\nresp = lightsail.get_instance_access_details(\n  instance_name: 'vps1'\n)\npp resp.access_details\n=begin\n#<struct Aws::Lightsail::Types::InstanceAccessDetails\n cert_key=\n  \"ssh-rsa-cert-v01@openssh.com \u5171\u6709\u9375\",\n expires_at=nil,\n ip_address=\"XXX.XXX.XXX.XXX\",\n password=nil,\n private_key=\n  \"-----BEGIN RSA PRIVATE KEY-----\\n\u79d8\u5bc6\u9375\\n-----END RSA PRIVATE KEY-----\\n\",\n protocol=\"ssh\",\n instance_name=\"vps1\",\n username=\"bitnami\">\n=end\n```\n\n#### RDP\n\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3088\u308b\u3068`protocol: 'rdp'`\u3092\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3067\u3059\u3002\u8a66\u3057\u305f\u74b0\u5883\u3067\u306f\u610f\u5473\u304c\u7121\u304b\u3063\u305f\u3067\u3059\u304c\u3001\u4f7f\u3048\u308b\u30b1\u30fc\u30b9\u3082\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u304b\uff1f\n\n```ruby\nresp = lightsail.get_instance_access_details(\n  instance_name: 'vps1',\n  protocol: 'rdp'\n)\npp resp.access_details\n```\n\n### \u30d6\u30e9\u30a6\u30b6\u3067\u30a2\u30af\u30bb\u30b9\n\n\n`get_instance`\u306e`public_ip_address`\u3084`get_instance_access_details`\u306e`ip_address`\u306b\u30d6\u30e9\u30a6\u30b6\u3067HTTP\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u5148\u307b\u3069\u9078\u629e\u3057\u305fLAMP\u74b0\u5883\u306e\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3057\u305f\u3002\n\n![browser.png](https://qiita-image-store.s3.amazonaws.com/0/7000/e8bb9037-a19b-b707-1d36-bf41743bdfd6.png)\n\n### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u505c\u6b62\n\n[stop_instance](http://docs.aws.amazon.com/sdkforruby/api/Aws/Lightsail/Client.html#stop_instance-instance_method)\u3067\u505c\u6b62\u3067\u304d\u307e\u3059\u3002\n\n```ruby\nresp = lightsail.stop_instance(\n   instance_name: instance_name\n)\npp resp.operations\n```\n\n\u505c\u6b62\u304c\u5b8c\u4e86\u3057\u305f\u3089`stopped`\u306b\u306a\u308a\u307e\u3059\u3002\n\n```ruby\np lightsail.get_instance_status(instance_name: 'vps1').status\n#<struct Aws::Lightsail::Types::InstanceState code=64, name=\"stopping\">\np lightsail.get_instance_status(instance_name: 'vps1').status\n#<struct Aws::Lightsail::Types::InstanceState code=80, name=\"stopped\">\n```\n\n### \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306e\u518d\u958b\n\n\u505c\u6b62\u3057\u305f\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f[start_instance](http://docs.aws.amazon.com/sdkforruby/api/Aws/Lightsail/Client.html#start_instance-instance_method)\u3067\u518d\u958b\u3067\u304d\u307e\u3059\u3002\n\n```ruby\nresp = lightsail.start_instance(\n   instance_name: 'vps1'\n)\npp resp.operations\n```\n\n\n## \u6b21\u56de\n\n\u904b\u7528\u3057\u3066\u3044\u304f\u4e0a\u3067\u3068\u3066\u3082\u3042\u308a\u304c\u305f\u3044\u5b58\u5728\u306e\u30b9\u30ca\u30c3\u30d7\u30b7\u30e7\u30c3\u30c8\u307e\u308f\u308a\u3092\u8a66\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\n", "tags": ["Ruby", "AWS", "AmazonLightsail", "aws-sdk"]}