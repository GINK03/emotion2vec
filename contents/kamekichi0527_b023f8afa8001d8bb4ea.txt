{"tags": ["rails3", "iOS"], "context": " More than 1 year has passed since last update.\n\n\u901a\u77e5\u306e\u9001\u4fe1\u5148\n\u25a0\u30b5\u30f3\u30c9\u30dc\u30c3\u30af\u30b9\u74b0\u5883(development\u74b0\u5883)\ngateway.sandbox.push.apple.com\n\u25a0adhoc\ngateway.push.apple.com\n\u25a0production\ngateway.push.apple.com\n\ngrocer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ cd /rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n$ vim Gemfile\n\n\nGemfile\ngem 'grocer'\n\n\n$ bundle install\n\n\n\u901a\u77e5\u90e8\u5206\u306e\u30b3\u30fc\u30c9\n\nsend.rb\nrequire 'grocer'\npusher = Grocer.pusher(\n  certificate: \"\u8a3c\u660e\u66f8\u3078\u306e\u30d1\u30b9\"\n  passphrase:  \"\",\n  gateway:     \u201d\u901a\u77e5\u306e\u9001\u4fe1\u5148\u201d,\n  port:        2195,\n  retries:     3\n)\n\nnotification = Grocer::Notification.new(\n  device_token:      \"\u30c7\u30d0\u30a4\u30b9\u30c8\u30fc\u30af\u30f3\",\n      alert:            \"\u30e1\u30c3\u30bb\u30fc\u30b8\",\n      badge:             1,\n      sound:             \"default\",\n      expiry:            Time.now + 60*60,\n      identifier:        1234,\n      content_available: true,\n      custom: { option_value: \"\u8ffd\u52a0\u3067\u9001\u4fe1\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30fc\u30bf\" }\n    )\npusher.push(notification)\n\n\n\n\u5931\u6557\u306e\u53d6\u5f97\nfeedback\u306f\u30a2\u30d7\u30ea\u304c\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u5834\u5408\u306b\u30c7\u30d0\u30a4\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u8a18\u9332\u3055\u308c\u308b\u3089\u3057\u3044\u3002\n\u9593\u9055\u3063\u3066\u305f\u3089\u3059\u3044\u307e\u305b\u3093\u30fb\u30fb\u30fb\n\nsend.rb\nfeedback = Grocer.feedback(\n    certificate: \"\u30c7\u30d0\u30a4\u30b9\u30c8\u30fc\u30af\u30f3\",       # required\n    passphrase:  \"\",                        # optional\n    gateway:     \"feedback.push.apple.com\", # optional; See note below.\n    port:        2196,                      # optional\n    retries:     3                          # optional\n  )\n\n  feedback_count = 0\n  feedback.each do |attempt|\n    feedback_count += 1\n    puts \"Device #{attempt.device_token} failed at #{attempt.timestamp}\"\n  end\n\n\n\niOS\u5074\n\nAppDelegate.m\n-(void)application:(UIApplication *)application didReceiveRemoteNotification:\n  (NSDictionary *)userInfo{\n    NSString *apn= [userInfo objectForKey:@\"apn\"];\n  }\n  (NSDictionary *)userInfo{\n    NSString *option_value= [userInfo objectForKey:@\"option_value\"];\n  }\n}\n\n\n## \u901a\u77e5\u306e\u9001\u4fe1\u5148\n\n\u25a0\u30b5\u30f3\u30c9\u30dc\u30c3\u30af\u30b9\u74b0\u5883(development\u74b0\u5883)\ngateway.sandbox.push.apple.com\n\n\u25a0adhoc\ngateway.push.apple.com\n\n\u25a0production\ngateway.push.apple.com\n\n## grocer\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```command\n$ cd /rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n$ vim Gemfile\n```\n```rb:Gemfile\ngem 'grocer'\n```\n```command\n$ bundle install\n```\n\n## \u901a\u77e5\u90e8\u5206\u306e\u30b3\u30fc\u30c9\n```rb:send.rb\nrequire 'grocer'\npusher = Grocer.pusher(\n  certificate: \"\u8a3c\u660e\u66f8\u3078\u306e\u30d1\u30b9\"\n  passphrase:  \"\",\n  gateway:     \u201d\u901a\u77e5\u306e\u9001\u4fe1\u5148\u201d,\n  port:        2195,\n  retries:     3\n)\n\nnotification = Grocer::Notification.new(\n  device_token:      \"\u30c7\u30d0\u30a4\u30b9\u30c8\u30fc\u30af\u30f3\",\n      alert:            \"\u30e1\u30c3\u30bb\u30fc\u30b8\",\n      badge:             1,\n      sound:             \"default\",\n      expiry:            Time.now + 60*60,\n      identifier:        1234,\n      content_available: true,\n      custom: { option_value: \"\u8ffd\u52a0\u3067\u9001\u4fe1\u3057\u305f\u3044\u30d1\u30e9\u30e1\u30fc\u30bf\" }\n    )\npusher.push(notification)\n```\n## \u5931\u6557\u306e\u53d6\u5f97\nfeedback\u306f\u30a2\u30d7\u30ea\u304c\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u305f\u5834\u5408\u306b\u30c7\u30d0\u30a4\u30b9\u30c8\u30fc\u30af\u30f3\u304c\u8a18\u9332\u3055\u308c\u308b\u3089\u3057\u3044\u3002\n\u9593\u9055\u3063\u3066\u305f\u3089\u3059\u3044\u307e\u305b\u3093\u30fb\u30fb\u30fb\n\n```rb:send.rb\nfeedback = Grocer.feedback(\n    certificate: \"\u30c7\u30d0\u30a4\u30b9\u30c8\u30fc\u30af\u30f3\",       # required\n    passphrase:  \"\",                        # optional\n    gateway:     \"feedback.push.apple.com\", # optional; See note below.\n    port:        2196,                      # optional\n    retries:     3                          # optional\n  )\n\n  feedback_count = 0\n  feedback.each do |attempt|\n    feedback_count += 1\n    puts \"Device #{attempt.device_token} failed at #{attempt.timestamp}\"\n  end\n```\n\n## iOS\u5074\n\n```objc:AppDelegate.m\n-(void)application:(UIApplication *)application didReceiveRemoteNotification:\n  (NSDictionary *)userInfo{\n    NSString *apn= [userInfo objectForKey:@\"apn\"];\n  }\n  (NSDictionary *)userInfo{\n    NSString *option_value= [userInfo objectForKey:@\"option_value\"];\n  }\n}\n```\n"}