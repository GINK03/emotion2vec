{"context": " More than 1 year has passed since last update.Packer\u3068Ansible\u3092\u4f7f\u3063\u3066AMI\u3092\u4f5c\u308d\u3046\u3068\u3057\u3066\u5c11\u3057\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\nPacker\u3067Ansible\u3092Provisioner\u3068\u3057\u3066\u4f7f\u3046\u305f\u3081\u306b\u3001Packer\u304b\u3089\u5bfe\u8c61\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Ubuntu)\u306bAnsible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u304b\u3063\u305f\u3002\n(Packer\u3067\u306f ansible-local \u3092\u4f7f\u3046\u306e\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4e0a\u306bAnsible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002)\n\n\u74b0\u5883\n\nPacker: v1.6.6\nAMI: Ubuntu 12.04 LTS(ami-1b50031a)\nPython: 2.7.4\n\n\n\u6210\u529f\u4f8b\n\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068Ubuntu 12.04\u306e\u74b0\u5883\u3060\u3068ansible\u306fapt\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u304c\u826f\u3044\u3002\nAnsible\u306f\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u3067Shell Provisioner\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\napt\u3067ansible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u6210\u529f)\n \"provisioners\": [\n    {\n      \"type\": \"shell\",\n      \"inline\": [\n        \"sudo apt-get -y install software-properties-common\",\n        \"sudo apt-add-repository -y ppa:ansible/ansible\",\n        \"sudo apt-get -y update\",\n        \"sudo apt-get -y install ansible\"\n      ]\n    },\n    {\n      \"type\": \"ansible-local\",\n      ...\n    }\n ]\n\n\n\u5931\u6557\u4f8b\npip\u304b\u3089ansible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u5931\u6557\u3059\u308b\u3002\n\u3061\u306a\u307f\u306bPacker\u4f7f\u308f\u305a\u306b\u540c\u3058\u30bd\u30fc\u30b9\u304b\u3089\u7acb\u3066\u305fAMI\u3067\u76f4\u63a5\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u6210\u529f\u3059\u308b\u306e\u3067\u3001Packer\u56fa\u6709\u306e\u554f\u984c\u3060\u3068\u601d\u3046\u3002\napt\u3067pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u5931\u6557)\n\"inline\": [\n  \"sudo apt-get -y install python-pip\",\n  \"sudo pip install ansible\"\n]\n\n\u305d\u3082\u305d\u3082pip\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u3002\neasy_install\u3067pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u5931\u6557)\n \"inline\": [\n  \"sudo easy_install pip\",\n  \"sudo pip install ansible\"\n ]\n\n\u3053\u3061\u3089\u3082\u5931\u6557\u3059\u308b\u3002pip\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3051\u3069ansible\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u30d3\u30eb\u30c9\u304c\u5931\u6557\u3059\u308b\u3002\nget-pip.py\u3067pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u5931\u6557)\n \"inline\": [\n  \"sudo curl --silent https://bootstrap.pypa.io/get-pip.py | python\",\n  \"sudo pip install ansible\"\n ]\n\n\u540c\u69d8\u306bpip\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3051\u3069ansible\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u30d3\u30eb\u30c9\u304c\u5931\u6557\u3059\u308b\u3002\n\n\u53c2\u8003\n\nInstallation \u2014 Ansible Documentation\nInstallation \u2014 pip 1.5.6 documentation\nAMIs created by amazon-instance have corrupted APT lists while amazon-ebs works fine. \u00b7 Issue #1137 \u00b7 mitchellh/packer\n\nPacker\u3068Ansible\u3092\u4f7f\u3063\u3066AMI\u3092\u4f5c\u308d\u3046\u3068\u3057\u3066\u5c11\u3057\u30cf\u30de\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n\n## \u3084\u308a\u305f\u304b\u3063\u305f\u3053\u3068\n\nPacker\u3067Ansible\u3092Provisioner\u3068\u3057\u3066\u4f7f\u3046\u305f\u3081\u306b\u3001Packer\u304b\u3089\u5bfe\u8c61\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Ubuntu)\u306bAnsible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u304b\u3063\u305f\u3002\n\n(Packer\u3067\u306f `ansible-local` \u3092\u4f7f\u3046\u306e\u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u4e0a\u306bAnsible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002)\n\n\n\n## \u74b0\u5883\n\n- Packer: v1.6.6\n- AMI: Ubuntu 12.04 LTS(ami-1b50031a)\n- Python: 2.7.4\n\n\n## \u6210\u529f\u4f8b\n\n\u7d50\u8ad6\u304b\u3089\u8a00\u3046\u3068Ubuntu 12.04\u306e\u74b0\u5883\u3060\u3068ansible\u306fapt\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u304c\u826f\u3044\u3002\n\nAnsible\u306f\u30b3\u30de\u30f3\u30c9\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u3067Shell Provisioner\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u3002\n\n**apt\u3067ansible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u6210\u529f)**\n\n```\n \"provisioners\": [\n    {\n      \"type\": \"shell\",\n      \"inline\": [\n        \"sudo apt-get -y install software-properties-common\",\n        \"sudo apt-add-repository -y ppa:ansible/ansible\",\n        \"sudo apt-get -y update\",\n        \"sudo apt-get -y install ansible\"\n      ]\n    },\n    {\n      \"type\": \"ansible-local\",\n      ...\n    }\n ]\n``` \n\n\n\n## \u5931\u6557\u4f8b\n\npip\u304b\u3089ansible\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u5931\u6557\u3059\u308b\u3002\n\n\u3061\u306a\u307f\u306bPacker\u4f7f\u308f\u305a\u306b\u540c\u3058\u30bd\u30fc\u30b9\u304b\u3089\u7acb\u3066\u305fAMI\u3067\u76f4\u63a5\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u3068\u6210\u529f\u3059\u308b\u306e\u3067\u3001Packer\u56fa\u6709\u306e\u554f\u984c\u3060\u3068\u601d\u3046\u3002\n\n**apt\u3067pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u5931\u6557)**\n\n```\n\"inline\": [\n  \"sudo apt-get -y install python-pip\",\n  \"sudo pip install ansible\"\n]\n``` \n\n\u305d\u3082\u305d\u3082pip\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u3002\n\n\n**easy_install\u3067pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u5931\u6557)**\n\n```\n \"inline\": [\n  \"sudo easy_install pip\",\n  \"sudo pip install ansible\"\n ]\n  ``` \n\n\u3053\u3061\u3089\u3082\u5931\u6557\u3059\u308b\u3002pip\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3051\u3069ansible\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u30d3\u30eb\u30c9\u304c\u5931\u6557\u3059\u308b\u3002\n\n\n**get-pip.py\u3067pip\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b(\u5931\u6557)**\n\n```\n \"inline\": [\n  \"sudo curl --silent https://bootstrap.pypa.io/get-pip.py | python\",\n  \"sudo pip install ansible\"\n ]\n  ``` \n\n\u540c\u69d8\u306bpip\u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u308b\u3051\u3069ansible\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u4e2d\u306b\u30d3\u30eb\u30c9\u304c\u5931\u6557\u3059\u308b\u3002\n\n\n## \u53c2\u8003\n\n- [Installation \u2014 Ansible Documentation](http://docs.ansible.com/intro_installation.html#latest-releases-via-apt-ubuntu)\n- [Installation \u2014 pip 1.5.6 documentation](http://pip.readthedocs.org/en/latest/installing.html)\n- [AMIs created by amazon-instance have corrupted APT lists while amazon-ebs works fine. \u00b7 Issue #1137 \u00b7 mitchellh/packer](https://github.com/mitchellh/packer/issues/1137)\n", "tags": ["packer", "Ansible", "Ubuntu"]}