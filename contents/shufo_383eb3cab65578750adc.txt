{"tags": ["vagrant", "CentOS", "Hubot", "skype", "Ansible"], "context": " More than 1 year has passed since last update.============================================\n\n\u74b0\u5883\n\nVagrant\nAnsible\nCentOS 6.5\nSkype for Linux >= 4.3 (4.1, 4.2\u306fSkype\u306eDesktop API\u5ec3\u6b62\u306e\u4ed5\u69d8\u5909\u66f4\u306b\u3088\u308a\u6b63\u5e38\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059)\nSkype4Py \nPython >= 2.6\n\n\nOverview\n\nAnsible\u3067Vagrant\u4e0a\u306bHubot+Skype bot\u306a\u74b0\u5883\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nSlack\u304c\u6d41\u884c\u3063\u3066\u307e\u3059\u304c\u3001\u307e\u3060Skype\u304c\u30e1\u30a4\u30f3\u306e\u74b0\u5883\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067...\nSkype Desktop API\u5ec3\u6b62\u306b\u3088\u308b\u5236\u9650\u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3066\u3042\u308a\u307e\u3059\u3002\n\nInstall\n\nwith Ansible\n\u69cb\u7bc9\u624b\u9806\u306fplaybook\u3068\u3057\u3066\u516c\u958b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\nhttps://github.com/shufo/ansible-skype-hubot\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ngit clone git@github.com:shufo/ansible-skype-hubot.git\ncd ansible-skype-hubot\nvim vars/main.yml\n\nvars/main.yml\u306bbot\u5316\u3055\u305b\u305f\u3044Skype\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3001\u3042\u3068\u7acb\u3061\u4e0a\u3052\u6642\u306b\u4e00\u6642\u7684\u306bVNC\u63a5\u7d9a\u3092\u4f7f\u3046\u306e\u3067x11vnc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\n\nvars/main.yml\nskype_username: Skype\u30e6\u30fc\u30b6\u540d \nskype_password: \u30d1\u30b9\u30ef\u30fc\u30c9\nx11vnc_password: password\n\n\nvagrant up\n\n\u3067ansible provisioner\u304c\u8d70\u308a\u3001Vagrant\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u306bSkype+Hubot\u306a\u74b0\u5883\u304c\u51fa\u6765\u307e\u3059\u3002\n\u203b \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u6700\u5f8c\u306bVNC\u63a5\u7d9a\u3057\u3066Skype API\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u7b87\u6240\u306e\u307f\u624b\u52d5\u306b\u306a\u308a\u307e\u3059\u3002\nInstall Finished! Please connect your VNC viewer to port 5900 on target host, and accept Skype public API access(check remember).\n\n\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u3089Mac\u306a\u3089Chicken VNC\u7b49\u306eVNC\u30d3\u30e5\u30fc\u30ef\u3067192.168.50.11\u306bVNC\u63a5\u7d9a\u3057\u3001Skype API\u306e\u5229\u7528\u8a31\u53ef\u30c0\u30a4\u30a2\u30ed\u30b0\u3067\u300c\u8a18\u61b6\u3059\u308b\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308cHubot\u304b\u3089\u306eAPI\u4f7f\u7528\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\u63a5\u7d9a\u3059\u308b\u969b\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306fx11vnc_password\u306b\u8a2d\u5b9a\u3057\u305f\u5024\u3067\u3059\u3002\n\n\u78ba\u8a8d\n\n\u30c1\u30e3\u30c3\u30c8\u4e0a\u3067\nhubot ping\n\n\u3068\u767a\u8a00\u3057\u3001\u6b63\u5e38\u52d5\u4f5c\u3057\u3066\u3044\u308c\u3070\n> PONG\n\n\u3068bot\u304c\u53cd\u5fdc\u3057\u307e\u3059\u3002\n\nbot\u304c\u53cd\u5fdc\u3057\u306a\u3044\u5834\u5408\n\nSkype\u304c\u5229\u7528\u3057\u3066\u3044\u308bdbus\u304c\u6b7b\u3093\u3067\u3044\u308b\u304bSkype\u30d7\u30ed\u30bb\u30b9\u304c\u30cf\u30f3\u30b0\u3001\u3082\u3057\u304f\u306fHubot\u81ea\u4f53\u304c\u6b7b\u3093\u3067\u3044\u308b\u306e\u3067\nservice skype restart\nsupervisorctl restart hubot\n\n\u3067\u3001Skype\u3084Hubot\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30ea\u30e2\u30fc\u30c8\u306b\u69cb\u7bc9\u3059\u308b\u5834\u5408\n\nansible_hosts\u3092\u7de8\u96c6\u3057\ndefault ansible_ssh_host=127.0.0.1 ansible_ssh_port=22\n\n\u4efb\u610f\u306e\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9\u3068port\u306b\u7f6e\u304d\u63db\u3048\u3001playbook\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nansible-playbook site.yml -i ansible_hosts \n\n\u69cb\u7bc9\u306e\u969b\u306bi686\u7528\u30d1\u30c3\u30b1\u30fc\u30b8\u3068\u304b\u8272\u3005\u5165\u308c\u3066\u308b\u306e\u3067\u3001\u307e\u3063\u3055\u3089\u306a\u74b0\u5883\u3058\u3083\u306a\u3044\u5834\u5408\u4e00\u5fdcplaybook\u3092\u78ba\u8a8d\u306e\u4e0a\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u624b\u52d5\n\u4ee5\u4e0b\u624b\u52d5\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3067\u3059\u3002\n\nSkype for Linux\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\ncd /opt\ncurl -L -O http://download.skype.com/linux/skype-4.3.0.37.tar.bz2\ntar jxvf skype-4.3.0.37.tar.bz2\nln -s skype-4.3.0.37 skype\n\n\n\u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n$ yum install glibc.i686 nss-softokn-freebl.i686 alsa-lib.i686 libXv.i686 \\\n libXScrnSaver.i686 libtiff.i686 glib2.i686 libSM.i686 libXrender.i686 fontconfig.i686 \\\n pulseaudio-libs.i686 alsa-plugins-pulseaudio.i686 libQtDBus.so.4 libQtWebKit.so.4 \\\n Xvfb python-devel python-setuptools x11vnc ipa-gothic-fonts\n\n$ easy_install pip\n$ pip install Skype4Py\n\n\n\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\n\ncurl -L -o /etc/init.d/skype https://gist.githubusercontent.com/shufo/70d8ca05305f8848196b/raw/144870dda3a3fe320563c732d4b846c5e17297cb/skype\nuseradd skype -s /sbin/nologin\nmkdir /var/db/skype /var/run/skype/ /var/log/skype/\nchown skype:skype /var/db/skype /var/run/skype/ /var/log/skype/\nchmod +x /etc/init.d/skype\n\nvi /etc/init.d/skype # \u4ee5\u4e0b\u3092bot\u5316\u3059\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306eUSERNAME/PASSWORD\u306b\u66f8\u304d\u63db\u3048\u308b\n    USERNAME=<username>\n    PASSWORD=<password>\n\n\n\nSELinux\u306e\u7121\u52b9\u5316\n\nsetenforce 0\n\n\nmachine-id\u306e\u751f\u6210\n\ndbus-uuidgen > /var/lib/dbus/machine-id\n\n\n\u30d5\u30a9\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum install ipa-gothic-fonts\n\n\n\u8d77\u52d5\n\nservice skype start\nchkconfig skype --add\nchkconfig skype on\n\n\nHubot\n\nHubot\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nyum install npm redis\n\nnpm install -g hubot coffee-script yo generator-hubot\n\n$ mkdir -p /opt/hubot\n$ cd /opt/hubot\n$ yo hubot\n\n[?] ==========================================================================\nWe're constantly looking for ways to make yo better! \nMay we anonymously report usage statistics to improve the tool over time? \nMore info: https://github.com/yeoman/insight & http://yeoman.io\n==========================================================================: Yes\n                     _____________________________  \n                    /                             \\ \n   //\\              |      Extracting input for    |\n  ////\\    _____    |   self-replication process   |\n //////\\  /_____\\   \\                             / \n ======= |[^_/\\_]|   /----------------------------  \n  |   | _|___@@__|__                                \n  +===+/  ///     \\_\\                               \n   | |_\\ /// HUBOT/\\\\                             \n   |___/\\//      /  \\\\                            \n         \\      /   +---+                            \n          \\____/    |   |                            \n           | //|    +===+                            \n            \\//      |xx|                            \n\n[?] Owner:  <>\n[?] Bot name: hubot\n[?] Description: A simple helpful robot for your Company\n[?] Bot adapter: (campfire) skype\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\nservice redis start\nexport DISPLAY=:20\nexport XAUTHORITY=/var/run/skype/Xauthority\n./bin/hubot -a skype\n\n\u30c1\u30e3\u30c3\u30c8\u3067hubot ping\u3068\u6253\u3066\u3070\u6b7b\u6d3b\u78ba\u8a8d\u304c\u51fa\u6765\u307e\u3059\u3002\n\u65e5\u4ed8\uff1a 2014/11/02 \u6642\u523b\uff1a 21:51 \u9001\u4fe1\u8005\uff1a ****\n> hubot ping\n\n\u65e5\u4ed8\uff1a 2014/11/02 \u6642\u523b\uff1a 21:51 \u9001\u4fe1\u8005\uff1a shufo\n> PONG\n\n\n\u6c38\u7d9a\u5316\n\npip install supervisor\necho_supervisord_conf > /etc/supervisord.conf\n\n\n/etc/supervisord.conf\n\u301c\u4e2d\u7565\u301c\n[program:hubot]\ndirectory=/opt/hubot\ncommand= /opt/hubot/bin/hubot -a skype\n\n\n\nsupervisord\u8d77\u52d5\n\nsupervisord -n\n\n\nx11vnc\u3092\u8d77\u52d5\n\n/usr/bin/x11vnc -display :20 -xauth /var/run/skype/Xauthority\n\n\nVNC\u63a5\u7d9a\u3059\u308b\n\nWindows\u306a\u3089UltraVNC\u3001Mac\u306a\u3089Chicken VNC\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30bd\u30d5\u30c8\u3067\u4e0a\u3067\u8d77\u52d5\u3057\u305fx11vnc\u306b5900\u756a\u30dd\u30fc\u30c8\u3067\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\nSkype\u306eAPI\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u8a31\u53ef\u3059\u308b\n\nenv DISPLAY=:20 XAUTHORITY=/var/run/skype/Xauthority python\n>>>import Skype4Py\n>>>skype = Skype4Py.Skype(Transport='x11')\n>>>skype.Attach() # \u3053\u3053\u3067\u8a31\u53ef\u3092\u6c42\u3081\u308b\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u5148\u307b\u3069\u958b\u3044\u305fVNC\u306b\u51fa\u308b\u306e\u3067\u300c\u8a18\u61b6\u3059\u308b\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u8a31\u53ef\u3059\u308b\u3002\n>>>chat = skype.CreateChatWith('skypeID')\n>>>chat.SendMessage('test')\n\n\nBot\u904b\u7528\u6642\u306e\u6ce8\u610f\u70b9\n\nSkype\u304c\u983b\u7e41\u306b\u6b7b\u306c\n\n\u8ca0\u8377\u304c\u9ad8\u304f\u306a\u308b\u3068\u7d50\u69cb\u306a\u983b\u5ea6\u3067dbus\u304c\u6b7b\u3093\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u3068\u3044\u3046\u304b\u8ca0\u8377\u304c\u9ad8\u307e\u3089\u306a\u304f\u3066\u3082\u30cf\u30f3\u30b0\u3057\u307e\u3059...\u5b9a\u671f\u7684\u306bcron\u7b49\u3067\u518d\u8d77\u52d5\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\n0 4 * * * /etc/init.d/skype restart\n\n\nBot\u3082\u6b7b\u306c\n\nBot\u3082\u9577\u3044\u9593\u8d77\u52d5\u3057\u3066\u308b\u3068\u7a81\u7136\u6b7b\u3093\u3060\u308a\u53cd\u5fdc\u304c\u60aa\u304f\u306a\u308b\u306e\u3067\u5b9a\u671f\u7684\u306b\u518d\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\n0 4 * * * /usr/bin/supervisord restart hubot\n\n\nSkype Desktop API\u306e\u5ec3\u6b62\n2013\u5e7412\u6708\u306bSkype Desktop API\u304c\u5ec3\u6b62\u3055\u308c\u305f\u305f\u3081\u30012014\u4ee5\u964d\u65b0\u898f\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3067\u4e00\u90e8Skype API\u3092\u4f7f\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3064\u307e\u308a Desktop API\u5ec3\u6b62\u4ee5\u964d\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3067\u306f\u5b9f\u8ceaHubot\u304c\u4f7f\u3048\u307e\u305b\u3093 \u3002\n\u3044\u3064\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304b\u3089\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b0\u30eb\u30fc\u30d7\u304c\u30af\u30e9\u30a6\u30c9\u5bfe\u5fdc\u30b0\u30eb\u30fc\u30d7\u306b\u306a\u3063\u305f\u304b\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u4ee5\u4e0b\u306e\u65b9\u6cd5\u3067API\u3092\u4f7f\u3048\u308b\u304b\u3069\u3046\u304b\u78ba\u8a8d\u51fa\u6765\u307e\u3059\u3002\n\nSkype API\u3092\u4f7f\u3048\u308b\u304b\u3069\u3046\u304b\u306e\u78ba\u8a8d\u65b9\u6cd5\u3002\n\n/get name\u3092Skype\u306e\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u3067\u53e9\u304d\n/get name\nname=#shufo/$fa4e0c236b3c0e7a\n\n\u306e\u3088\u3046\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u5834\u5408P2P\u30d9\u30fc\u30b9\u306e\u30b0\u30eb\u30fc\u30d7\u306a\u306e\u3067API\u306f\u4f7f\u3048\u307e\u3059\u3002\n/get name\nname=19:f14000bfa456406abdf2f245b22eb5bb@thread.skype\n\n\u3053\u306e\u3088\u3046\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u5834\u5408\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u306e\u30b0\u30eb\u30fc\u30d7\u306a\u306e\u3067\u6b8b\u5ff5\u306a\u304c\u3089API\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\n\u53c2\u7167: skype4py doesnt play well with API from skype version skype-ubuntu-lucid_4.3.0.37-1_i386.deb \u00b7 Issue #34 \u00b7 awahlig/skype4py\n============================================\n\n## \u74b0\u5883\n\n- Vagrant\n- Ansible\n- CentOS 6.5\n- Skype for Linux >= 4.3 (4.1, 4.2\u306fSkype\u306eDesktop API\u5ec3\u6b62\u306e\u4ed5\u69d8\u5909\u66f4\u306b\u3088\u308a\u6b63\u5e38\u52d5\u4f5c\u3057\u306a\u3044\u53ef\u80fd\u6027\u304c\u9ad8\u3044\u3067\u3059)\n- Skype4Py \n- Python >= 2.6\n\n## Overview\n\n![skype-logo-feb_2012_rgb_500.png](https://qiita-image-store.s3.amazonaws.com/0/47983/da7bb850-ee61-5f22-a3c3-9e73a39ea28f.png \"skype-logo-feb_2012_rgb_500.png\")\n\nAnsible\u3067Vagrant\u4e0a\u306bHubot+Skype bot\u306a\u74b0\u5883\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nSlack\u304c\u6d41\u884c\u3063\u3066\u307e\u3059\u304c\u3001\u307e\u3060Skype\u304c\u30e1\u30a4\u30f3\u306e\u74b0\u5883\u3082\u3042\u308b\u3068\u601d\u3046\u306e\u3067...\nSkype Desktop API\u5ec3\u6b62\u306b\u3088\u308b\u5236\u9650\u306b\u3064\u3044\u3066\u3082\u89e6\u308c\u3066\u3042\u308a\u307e\u3059\u3002\n\n\n## Install\n\n### with Ansible\n\n\u69cb\u7bc9\u624b\u9806\u306fplaybook\u3068\u3057\u3066\u516c\u958b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\nhttps://github.com/shufo/ansible-skype-hubot\n\n- \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\ngit clone git@github.com:shufo/ansible-skype-hubot.git\ncd ansible-skype-hubot\nvim vars/main.yml\n```\n\nvars/main.yml\u306bbot\u5316\u3055\u305b\u305f\u3044Skype\u30e6\u30fc\u30b6\u540d\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3001\u3042\u3068\u7acb\u3061\u4e0a\u3052\u6642\u306b\u4e00\u6642\u7684\u306bVNC\u63a5\u7d9a\u3092\u4f7f\u3046\u306e\u3067x11vnc\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\u3057\n\n```vars/main.yml\nskype_username: Skype\u30e6\u30fc\u30b6\u540d \nskype_password: \u30d1\u30b9\u30ef\u30fc\u30c9\nx11vnc_password: password\n```\n\n```\nvagrant up\n```\n\n\u3067ansible provisioner\u304c\u8d70\u308a\u3001Vagrant\u4eee\u60f3\u30de\u30b7\u30f3\u4e0a\u306bSkype+Hubot\u306a\u74b0\u5883\u304c\u51fa\u6765\u307e\u3059\u3002\n\u203b \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u6700\u5f8c\u306bVNC\u63a5\u7d9a\u3057\u3066Skype API\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\u7b87\u6240\u306e\u307f\u624b\u52d5\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nInstall Finished! Please connect your VNC viewer to port 5900 on target host, and accept Skype public API access(check remember).\n```\n\n\u3068\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u305f\u3089Mac\u306a\u3089[Chicken VNC](http://sourceforge.net/projects/cotvnc/)\u7b49\u306eVNC\u30d3\u30e5\u30fc\u30ef\u3067`192.168.50.11`\u306bVNC\u63a5\u7d9a\u3057\u3001Skype API\u306e\u5229\u7528\u8a31\u53ef\u30c0\u30a4\u30a2\u30ed\u30b0\u3067\u300c\u8a18\u61b6\u3059\u308b\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308cHubot\u304b\u3089\u306eAPI\u4f7f\u7528\u3092\u8a31\u53ef\u3057\u307e\u3059\u3002\u63a5\u7d9a\u3059\u308b\u969b\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f`x11vnc_password`\u306b\u8a2d\u5b9a\u3057\u305f\u5024\u3067\u3059\u3002\n\n- \u78ba\u8a8d\n\n\u30c1\u30e3\u30c3\u30c8\u4e0a\u3067\n\n```\nhubot ping\n```\n\n\u3068\u767a\u8a00\u3057\u3001\u6b63\u5e38\u52d5\u4f5c\u3057\u3066\u3044\u308c\u3070\n\n```\n> PONG\n```\n\n\u3068bot\u304c\u53cd\u5fdc\u3057\u307e\u3059\u3002\n\n- bot\u304c\u53cd\u5fdc\u3057\u306a\u3044\u5834\u5408\n\nSkype\u304c\u5229\u7528\u3057\u3066\u3044\u308bdbus\u304c\u6b7b\u3093\u3067\u3044\u308b\u304bSkype\u30d7\u30ed\u30bb\u30b9\u304c\u30cf\u30f3\u30b0\u3001\u3082\u3057\u304f\u306fHubot\u81ea\u4f53\u304c\u6b7b\u3093\u3067\u3044\u308b\u306e\u3067\n\n```\nservice skype restart\nsupervisorctl restart hubot\n```\n\n\u3067\u3001Skype\u3084Hubot\u3092\u518d\u8d77\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n- \u30ea\u30e2\u30fc\u30c8\u306b\u69cb\u7bc9\u3059\u308b\u5834\u5408\n\n`ansible_hosts`\u3092\u7de8\u96c6\u3057\n\n```\ndefault ansible_ssh_host=127.0.0.1 ansible_ssh_port=22\n```\n\n\u4efb\u610f\u306e\u30db\u30b9\u30c8\u306eIP\u30a2\u30c9\u30ec\u30b9\u3068port\u306b\u7f6e\u304d\u63db\u3048\u3001playbook\u3092\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\nansible-playbook site.yml -i ansible_hosts \n```\n\n\u69cb\u7bc9\u306e\u969b\u306bi686\u7528\u30d1\u30c3\u30b1\u30fc\u30b8\u3068\u304b\u8272\u3005\u5165\u308c\u3066\u308b\u306e\u3067\u3001\u307e\u3063\u3055\u3089\u306a\u74b0\u5883\u3058\u3083\u306a\u3044\u5834\u5408\u4e00\u5fdcplaybook\u3092\u78ba\u8a8d\u306e\u4e0a\u5b9f\u884c\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n### \u624b\u52d5\n\n\u4ee5\u4e0b\u624b\u52d5\u3067\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u3067\u3059\u3002\n\n- Skype for Linux\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9&\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\ncd /opt\ncurl -L -O http://download.skype.com/linux/skype-4.3.0.37.tar.bz2\ntar jxvf skype-4.3.0.37.tar.bz2\nln -s skype-4.3.0.37 skype\n```\n\n- \u4f9d\u5b58\u30d1\u30c3\u30b1\u30fc\u30b8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\n$ yum install glibc.i686 nss-softokn-freebl.i686 alsa-lib.i686 libXv.i686 \\\n libXScrnSaver.i686 libtiff.i686 glib2.i686 libSM.i686 libXrender.i686 fontconfig.i686 \\\n pulseaudio-libs.i686 alsa-plugins-pulseaudio.i686 libQtDBus.so.4 libQtWebKit.so.4 \\\n Xvfb python-devel python-setuptools x11vnc ipa-gothic-fonts\n\n$ easy_install pip\n$ pip install Skype4Py\n```\n\n- \u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u4f5c\u6210\n\n```bash\ncurl -L -o /etc/init.d/skype https://gist.githubusercontent.com/shufo/70d8ca05305f8848196b/raw/144870dda3a3fe320563c732d4b846c5e17297cb/skype\nuseradd skype -s /sbin/nologin\nmkdir /var/db/skype /var/run/skype/ /var/log/skype/\nchown skype:skype /var/db/skype /var/run/skype/ /var/log/skype/\nchmod +x /etc/init.d/skype\n\nvi /etc/init.d/skype # \u4ee5\u4e0b\u3092bot\u5316\u3059\u308b\u30a2\u30ab\u30a6\u30f3\u30c8\u306eUSERNAME/PASSWORD\u306b\u66f8\u304d\u63db\u3048\u308b\n    USERNAME=<username>\n    PASSWORD=<password>\n\n```\n\n- SELinux\u306e\u7121\u52b9\u5316\n\n```\nsetenforce 0\n```\n\n- machine-id\u306e\u751f\u6210\n\n```bash\ndbus-uuidgen > /var/lib/dbus/machine-id\n```\n\n- \u30d5\u30a9\u30f3\u30c8\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nyum install ipa-gothic-fonts\n```\n\n- \u8d77\u52d5\n\n```\nservice skype start\nchkconfig skype --add\nchkconfig skype on\n```\n\n###  Hubot\n\n- Hubot\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```bash\nyum install npm redis\n```\n\n```\nnpm install -g hubot coffee-script yo generator-hubot\n```\n\n```bash\n$ mkdir -p /opt/hubot\n$ cd /opt/hubot\n$ yo hubot\n\n[?] ==========================================================================\nWe're constantly looking for ways to make yo better! \nMay we anonymously report usage statistics to improve the tool over time? \nMore info: https://github.com/yeoman/insight & http://yeoman.io\n==========================================================================: Yes\n                     _____________________________  \n                    /                             \\ \n   //\\              |      Extracting input for    |\n  ////\\    _____    |   self-replication process   |\n //////\\  /_____\\   \\                             / \n ======= |[^_/\\_]|   /----------------------------  \n  |   | _|___@@__|__                                \n  +===+/  ///     \\_\\                               \n   | |_\\ /// HUBOT/\\\\                             \n   |___/\\//      /  \\\\                            \n         \\      /   +---+                            \n          \\____/    |   |                            \n           | //|    +===+                            \n            \\//      |xx|                            \n\n[?] Owner:  <>\n[?] Bot name: hubot\n[?] Description: A simple helpful robot for your Company\n[?] Bot adapter: (campfire) skype\n```\n\n- \u52d5\u4f5c\u78ba\u8a8d\n\n```bash\nservice redis start\nexport DISPLAY=:20\nexport XAUTHORITY=/var/run/skype/Xauthority\n./bin/hubot -a skype\n```\n\n\u30c1\u30e3\u30c3\u30c8\u3067`hubot ping`\u3068\u6253\u3066\u3070\u6b7b\u6d3b\u78ba\u8a8d\u304c\u51fa\u6765\u307e\u3059\u3002\n\n```\n\u65e5\u4ed8\uff1a 2014/11/02 \u6642\u523b\uff1a 21:51 \u9001\u4fe1\u8005\uff1a ****\n> hubot ping\n\n\u65e5\u4ed8\uff1a 2014/11/02 \u6642\u523b\uff1a 21:51 \u9001\u4fe1\u8005\uff1a shufo\n> PONG\n```\n\n- \u6c38\u7d9a\u5316\n\n```\npip install supervisor\necho_supervisord_conf > /etc/supervisord.conf\n```\n\n```/etc/supervisord.conf\n\u301c\u4e2d\u7565\u301c\n[program:hubot]\ndirectory=/opt/hubot\ncommand= /opt/hubot/bin/hubot -a skype\n```\n\n- supervisord\u8d77\u52d5\n\n```\nsupervisord -n\n```\n\n- x11vnc\u3092\u8d77\u52d5\n\n```\n/usr/bin/x11vnc -display :20 -xauth /var/run/skype/Xauthority\n```\n\n- VNC\u63a5\u7d9a\u3059\u308b\n\nWindows\u306a\u3089[UltraVNC](http://www.uvnc.com/)\u3001Mac\u306a\u3089[Chicken VNC](http://sourceforge.net/projects/cotvnc/)\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u3089\u306e\u30bd\u30d5\u30c8\u3067\u4e0a\u3067\u8d77\u52d5\u3057\u305fx11vnc\u306b5900\u756a\u30dd\u30fc\u30c8\u3067\u63a5\u7d9a\u3057\u307e\u3059\u3002\n\n- Skype\u306eAPI\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u8a31\u53ef\u3059\u308b\n\n```\nenv DISPLAY=:20 XAUTHORITY=/var/run/skype/Xauthority python\n>>>import Skype4Py\n>>>skype = Skype4Py.Skype(Transport='x11')\n>>>skype.Attach() # \u3053\u3053\u3067\u8a31\u53ef\u3092\u6c42\u3081\u308b\u30dd\u30c3\u30d7\u30a2\u30c3\u30d7\u304c\u5148\u307b\u3069\u958b\u3044\u305fVNC\u306b\u51fa\u308b\u306e\u3067\u300c\u8a18\u61b6\u3059\u308b\u300d\u306b\u30c1\u30a7\u30c3\u30af\u3092\u5165\u308c\u8a31\u53ef\u3059\u308b\u3002\n>>>chat = skype.CreateChatWith('skypeID')\n>>>chat.SendMessage('test')\n```\n\n## Bot\u904b\u7528\u6642\u306e\u6ce8\u610f\u70b9\n\n- Skype\u304c\u983b\u7e41\u306b\u6b7b\u306c\n\n\u8ca0\u8377\u304c\u9ad8\u304f\u306a\u308b\u3068\u7d50\u69cb\u306a\u983b\u5ea6\u3067dbus\u304c\u6b7b\u3093\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u3089\u306a\u304f\u306a\u308a\u307e\u3059\u3002\n\u3068\u3044\u3046\u304b\u8ca0\u8377\u304c\u9ad8\u307e\u3089\u306a\u304f\u3066\u3082\u30cf\u30f3\u30b0\u3057\u307e\u3059...\u5b9a\u671f\u7684\u306bcron\u7b49\u3067\u518d\u8d77\u52d5\u3057\u3066\u3042\u3052\u307e\u3057\u3087\u3046\u3002\n\n```\n0 4 * * * /etc/init.d/skype restart\n```\n\n- Bot\u3082\u6b7b\u306c\n\nBot\u3082\u9577\u3044\u9593\u8d77\u52d5\u3057\u3066\u308b\u3068\u7a81\u7136\u6b7b\u3093\u3060\u308a\u53cd\u5fdc\u304c\u60aa\u304f\u306a\u308b\u306e\u3067\u5b9a\u671f\u7684\u306b\u518d\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\n0 4 * * * /usr/bin/supervisord restart hubot\n```\n\n## Skype Desktop API\u306e\u5ec3\u6b62\n\n2013\u5e7412\u6708\u306bSkype Desktop API\u304c\u5ec3\u6b62\u3055\u308c\u305f\u305f\u3081\u30012014\u4ee5\u964d\u65b0\u898f\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3067\u4e00\u90e8Skype API\u3092\u4f7f\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u305b\u3093\u3002\n\u3064\u307e\u308a **Desktop API\u5ec3\u6b62\u4ee5\u964d\u306b\u4f5c\u6210\u3055\u308c\u305f\u30b0\u30eb\u30fc\u30d7\u3067\u306f\u5b9f\u8ceaHubot\u304c\u4f7f\u3048\u307e\u305b\u3093** \u3002\n\u3044\u3064\u306e\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304b\u3089\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b0\u30eb\u30fc\u30d7\u304c\u30af\u30e9\u30a6\u30c9\u5bfe\u5fdc\u30b0\u30eb\u30fc\u30d7\u306b\u306a\u3063\u305f\u304b\u306f\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u3001\u4ee5\u4e0b\u306e\u65b9\u6cd5\u3067API\u3092\u4f7f\u3048\u308b\u304b\u3069\u3046\u304b\u78ba\u8a8d\u51fa\u6765\u307e\u3059\u3002\n\n- Skype API\u3092\u4f7f\u3048\u308b\u304b\u3069\u3046\u304b\u306e\u78ba\u8a8d\u65b9\u6cd5\u3002\n\n`/get name`\u3092Skype\u306e\u30b0\u30eb\u30fc\u30d7\u30c1\u30e3\u30c3\u30c8\u3067\u53e9\u304d\n\n```\n/get name\nname=#shufo/$fa4e0c236b3c0e7a\n```\n\n\u306e\u3088\u3046\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u5834\u5408P2P\u30d9\u30fc\u30b9\u306e\u30b0\u30eb\u30fc\u30d7\u306a\u306e\u3067API\u306f\u4f7f\u3048\u307e\u3059\u3002\n\n```\n/get name\nname=19:f14000bfa456406abdf2f245b22eb5bb@thread.skype\n```\n\n\u3053\u306e\u3088\u3046\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u5834\u5408\u30af\u30e9\u30a6\u30c9\u30d9\u30fc\u30b9\u306e\u30b0\u30eb\u30fc\u30d7\u306a\u306e\u3067\u6b8b\u5ff5\u306a\u304c\u3089API\u306f\u4f7f\u3048\u307e\u305b\u3093\u3002\n\n\u53c2\u7167: [skype4py doesnt play well with API from skype version skype-ubuntu-lucid_4.3.0.37-1_i386.deb \u00b7 Issue #34 \u00b7 awahlig/skype4py](https://github.com/awahlig/skype4py/issues/34)\n"}