{"context": " More than 1 year has passed since last update.\n\n\u76ee\u7684\nCMake \u306e ExternalProject \u306b\u3088\u3063\u3066\u65e2\u5b58\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078 zlib \u3068 libpng \u3092\u53d6\u308a\u8fbc\u307f\u6271\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3002\n\nexternalproject \u4f8b\n\nexternal_zlib.cmake\ncmake_minimum_required( VERSION 3.2 )\n\ninclude_directories(${CMAKE_CURRENT_BINARY_DIR}/include)\nlink_directories(${CMAKE_CURRENT_BINARY_DIR}/lib)\n\ninclude( ExternalProject )\n\nset( zlib_source_path ${CMAKE_CURRENT_BINARY_DIR}/external/zlib/src/external_zlib/ )\nset( zlib_cmake_file_path ${zlib_source_path}/CMakeLists.txt )\n\nExternalProject_Add( external_zlib\n  PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/external/zlib\n  INSTALL_DIR       ${CMAKE_CURRENT_BINARY_DIR}\n  # http://www.zlib.net/\n  GIT_REPOSITORY    git@github.com:madler/zlib.git\n  GIT_TAG           v1.2.8\n  CMAKE_ARGS        -DASM686=off\n                    -DAMD64=off\n                    -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}\n                    -DCMAKE_COMPILER_IS_GNUCXX=${CMAKE_COMPILER_IS_GNUCXX}\n                    -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER}\n                    -DCMAKE_C_FLAGS=${GL_BINDING_C_FLAGS}\n)\n\n\nexternal_libpng.cmake\ncmake_minimum_required( VERSION 3.2 )\n\ninclude_directories(${CMAKE_CURRENT_BINARY_DIR}/include)\nlink_directories(${CMAKE_CURRENT_BINARY_DIR}/lib)\n\ninclude( ExternalProject )\n\nset( libpng_source_path ${CMAKE_CURRENT_BINARY_DIR}/external/libpng/src/external_libpng/ )\nset( libpng_cmake_file_path ${libpng_source_path}/CMakeLists.txt )\n\nExternalProject_Add( external_libpng\n  DEPENDS           external_zlib\n  PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/external/libpng\n  INSTALL_DIR       ${CMAKE_CURRENT_BINARY_DIR}\n  # http://www.libpng.org/pub/png/libpng.html\n  GIT_REPOSITORY    git://git.code.sf.net/p/libpng/code\n  GIT_TAG           v1.6.9\n  CMAKE_ARGS        -DPNG_SHARED=off\n                    -DPNG_STATIC=on\n                    -DPNG_TESTS=on\n                    -DPNG_DEBUG=off\n                    -DPNGARG=off\n                    -DBUILD_SHARED_LIBS=FALSE\n                    -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}\n                    -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}\n                    -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE}\n                    -DCMAKE_COMPILER_IS_GNUCXX=${CMAKE_COMPILER_IS_GNUCXX}\n                    -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER}\n                    -DCMAKE_C_FLAGS=${GL_BINDING_C_FLAGS}\n)\n\n\n\u65e2\u5b58\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 my_app \u3078\u306e\u4f9d\u5b58\u6027\u3068\u30ea\u30f3\u30af\u5b9a\u7fa9\u306e\u4f8b\ninclude( external_zlib.cmake )\ninclude( external_libpng.cmake )\n\nadd_executable( my_app main.cxx )\n\nadd_dependencies( my_app\n  external_zlib\n  external_libpng\n)\n\ntarget_link_libraries( my_app\n  png\n  zlibstatic\n)\n\n\nNote\n\n\u4f8b\u306e target_link_libraries \u3067\u306f png \u3088\u308a\u5f8c\u308d\u306b zlibstatic \u3092\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u9806\u5e8f\u3092\u9006\u306b\u3059\u308b\u3068\u30ea\u30f3\u30af\u30a8\u30e9\u30fc\u3068\u306a\u308b\u3002\n\n\nReferences\n\nhttps://cmake.org/cmake/help/v3.2/module/ExternalProject.html\nhttp://www.zlib.net/\nhttp://www.libpng.org/pub/png/libpng.html\n\n# \u76ee\u7684\n\nCMake \u306e ExternalProject \u306b\u3088\u3063\u3066\u65e2\u5b58\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3078 zlib \u3068 libpng \u3092\u53d6\u308a\u8fbc\u307f\u6271\u3048\u308b\u3088\u3046\u306b\u3059\u308b\u65b9\u6cd5\u3092\u7d39\u4ecb\u3057\u305f\u3044\u3002\n\n# externalproject \u4f8b\n\n## external_zlib.cmake\n\n```cmake\ncmake_minimum_required( VERSION 3.2 )\n\ninclude_directories(${CMAKE_CURRENT_BINARY_DIR}/include)\nlink_directories(${CMAKE_CURRENT_BINARY_DIR}/lib)\n\ninclude( ExternalProject )\n\nset( zlib_source_path ${CMAKE_CURRENT_BINARY_DIR}/external/zlib/src/external_zlib/ )\nset( zlib_cmake_file_path ${zlib_source_path}/CMakeLists.txt )\n\nExternalProject_Add( external_zlib\n  PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/external/zlib\n  INSTALL_DIR       ${CMAKE_CURRENT_BINARY_DIR}\n  # http://www.zlib.net/\n  GIT_REPOSITORY    git@github.com:madler/zlib.git\n  GIT_TAG           v1.2.8\n  CMAKE_ARGS        -DASM686=off\n                    -DAMD64=off\n                    -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}\n                    -DCMAKE_COMPILER_IS_GNUCXX=${CMAKE_COMPILER_IS_GNUCXX}\n                    -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER}\n                    -DCMAKE_C_FLAGS=${GL_BINDING_C_FLAGS}\n)\n```\n\n## external_libpng.cmake\n\n```cmake\ncmake_minimum_required( VERSION 3.2 )\n\ninclude_directories(${CMAKE_CURRENT_BINARY_DIR}/include)\nlink_directories(${CMAKE_CURRENT_BINARY_DIR}/lib)\n\ninclude( ExternalProject )\n\nset( libpng_source_path ${CMAKE_CURRENT_BINARY_DIR}/external/libpng/src/external_libpng/ )\nset( libpng_cmake_file_path ${libpng_source_path}/CMakeLists.txt )\n\nExternalProject_Add( external_libpng\n  DEPENDS           external_zlib\n  PREFIX            ${CMAKE_CURRENT_BINARY_DIR}/external/libpng\n  INSTALL_DIR       ${CMAKE_CURRENT_BINARY_DIR}\n  # http://www.libpng.org/pub/png/libpng.html\n  GIT_REPOSITORY    git://git.code.sf.net/p/libpng/code\n  GIT_TAG           v1.6.9\n  CMAKE_ARGS        -DPNG_SHARED=off\n                    -DPNG_STATIC=on\n                    -DPNG_TESTS=on\n                    -DPNG_DEBUG=off\n                    -DPNGARG=off\n                    -DBUILD_SHARED_LIBS=FALSE\n                    -DCMAKE_INSTALL_PREFIX=${CMAKE_CURRENT_BINARY_DIR}\n                    -DCMAKE_BUILD_TYPE=${CMAKE_BUILD_TYPE}\n                    -DCMAKE_TOOLCHAIN_FILE=${CMAKE_TOOLCHAIN_FILE}\n                    -DCMAKE_COMPILER_IS_GNUCXX=${CMAKE_COMPILER_IS_GNUCXX}\n                    -DCMAKE_C_COMPILER=${CMAKE_C_COMPILER}\n                    -DCMAKE_C_FLAGS=${GL_BINDING_C_FLAGS}\n)\n```\n\n# \u65e2\u5b58\u30d7\u30ed\u30b8\u30a7\u30af\u30c8 `my_app` \u3078\u306e\u4f9d\u5b58\u6027\u3068\u30ea\u30f3\u30af\u5b9a\u7fa9\u306e\u4f8b\n\n```cmake\ninclude( external_zlib.cmake )\ninclude( external_libpng.cmake )\n\nadd_executable( my_app main.cxx )\n\nadd_dependencies( my_app\n  external_zlib\n  external_libpng\n)\n\ntarget_link_libraries( my_app\n  png\n  zlibstatic\n)\n```\n\n## Note\n\n- \u4f8b\u306e `target_link_libraries` \u3067\u306f `png` \u3088\u308a\u5f8c\u308d\u306b `zlibstatic` \u3092\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001\u9806\u5e8f\u3092\u9006\u306b\u3059\u308b\u3068\u30ea\u30f3\u30af\u30a8\u30e9\u30fc\u3068\u306a\u308b\u3002\n\n# References\n\n- https://cmake.org/cmake/help/v3.2/module/ExternalProject.html\n- http://www.zlib.net/\n- http://www.libpng.org/pub/png/libpng.html\n", "tags": ["CMake", "externalproject", "zlib", "libpng"]}