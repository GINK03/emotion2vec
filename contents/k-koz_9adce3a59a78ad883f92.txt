{"context": "\n\n\u3010squid \u3067 proxy server \u3092\u69cb\u7bc9\u3059\u308b\u624b\u9806\u3011\n\n\u25c7 \u6f14\u7fd2\u74b0\u5883\n\nCentOS7\n\n\n\u25c7 \u69cb\u7bc9\u624b\u9806\n\n1. squid \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nyum install squid\n\n\n2. \u8a2d\u5b9a\n\n\u57fa\u672c\u7684\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067 OK\u3002\n\u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u8a2d\u5b9a\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b localnet \u306e\u7bc4\u56f2\u5185\u306b\u53ce\u307e\u308c\u3070\u8a2d\u5b9a\u5909\u66f4\u4e0d\u8981\u3002\nPort \u306f 3128 \u3092\u4f7f\u7528\u3002\n\n\n/etc/squid/squid.conf\n#\n# Recommended minimum configuration:\n#\n\n# Example rule allowing access from your local networks.\n# Adapt to list your (internal) IP networks from where browsing\n# should be allowed\nacl localnet src 10.0.0.0/8     # RFC1918 possible internal network\nacl localnet src 172.16.0.0/12  # RFC1918 possible internal network\nacl localnet src 192.168.0.0/16 # RFC1918 possible internal network\nacl localnet src fc00::/7       # RFC 4193 local private network range\nacl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines\n\nacl SSL_ports port 443\nacl Safe_ports port 80          # http\nacl Safe_ports port 21          # ftp\nacl Safe_ports port 443         # https\nacl Safe_ports port 70          # gopher\nacl Safe_ports port 210         # wais\nacl Safe_ports port 1025-65535  # unregistered ports\nacl Safe_ports port 280         # http-mgmt\nacl Safe_ports port 488         # gss-http\nacl Safe_ports port 591         # filemaker\nacl Safe_ports port 777         # multiling http\nacl CONNECT method CONNECT\n\n#\n# Recommended minimum Access Permission configuration:\n#\n# Deny requests to certain unsafe ports\nhttp_access deny !Safe_ports\n\n# Deny CONNECT to other than secure SSL ports\nhttp_access deny CONNECT !SSL_ports\n\n# Only allow cachemgr access from localhost\nhttp_access allow localhost manager\nhttp_access deny manager\n\n# We strongly recommend the following be uncommented to protect innocent\n# web applications running on the proxy server who think the only\n# one who can access services on \"localhost\" is a local user\n#http_access deny to_localhost\n\n#\n# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS\n#\n\n# Example rule allowing access from your local networks.\n# Adapt localnet in the ACL section to list your (internal) IP networks\n# from where browsing should be allowed\nhttp_access allow localnet\nhttp_access allow localhost\n\n# And finally deny all other access to this proxy\nhttp_access deny all\n\n# Squid normally listens to port 3128\nhttp_port 3128\n\n# Uncomment and adjust the following to add a disk cache directory.\n#cache_dir ufs /var/spool/squid 100 16 256\n\n# Leave coredumps in the first cache dir\ncoredump_dir /var/spool/squid\n\n#\n# Add any of your own refresh_pattern entries above these.\n#\nrefresh_pattern ^ftp:           1440    20%     10080\nrefresh_pattern ^gopher:        1440    0%      1440\nrefresh_pattern -i (/cgi-bin/|\\?) 0     0%      0\nrefresh_pattern .               0       20%     4320\n\n\n\n3. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u8a2d\u5b9a\na. \u30b5\u30fc\u30d3\u30b9\u958b\u59cb\nsystemctl start squid\n\nb. \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u306e\u8ffd\u52a0\nsystemctl enable squid \n\nc. \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u78ba\u8a8d\nsystemctl status squid \n\n\n\u4e0b\u8a18\u5354\u8abf\u9805\u76ee\u306e\u901a\u308a\u306b enable \u3068 active \u304c\u8868\u793a\u3055\u308c\u308c\u3070\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u5b8c\u4e86\n\n\nLoaded: loaded (/usr/lib/systemd/system/squid.service; enabled; vendor preset: disabled)\nActive: active (running) since \u6728 2016-05-05 14:01:29 JST; 8s ago\n\n\n\n#\u3010squid \u3067 proxy server \u3092\u69cb\u7bc9\u3059\u308b\u624b\u9806\u3011\n\n# \u25c7 \u6f14\u7fd2\u74b0\u5883\n* CentOS7\n\n# \u25c7 \u69cb\u7bc9\u624b\u9806\n\n## 1. squid \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\nyum install squid\n```\n\n## 2. \u8a2d\u5b9a\n* \u57fa\u672c\u7684\u306b\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\u3067 OK\u3002\n* \u30a2\u30af\u30bb\u30b9\u8a31\u53ef\u8a2d\u5b9a\u3082\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b localnet \u306e\u7bc4\u56f2\u5185\u306b\u53ce\u307e\u308c\u3070\u8a2d\u5b9a\u5909\u66f4\u4e0d\u8981\u3002\n* Port \u306f 3128 \u3092\u4f7f\u7528\u3002\n\n```/etc/squid/squid.conf\n#\n# Recommended minimum configuration:\n#\n\n# Example rule allowing access from your local networks.\n# Adapt to list your (internal) IP networks from where browsing\n# should be allowed\nacl localnet src 10.0.0.0/8     # RFC1918 possible internal network\nacl localnet src 172.16.0.0/12  # RFC1918 possible internal network\nacl localnet src 192.168.0.0/16 # RFC1918 possible internal network\nacl localnet src fc00::/7       # RFC 4193 local private network range\nacl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines\n\nacl SSL_ports port 443\nacl Safe_ports port 80          # http\nacl Safe_ports port 21          # ftp\nacl Safe_ports port 443         # https\nacl Safe_ports port 70          # gopher\nacl Safe_ports port 210         # wais\nacl Safe_ports port 1025-65535  # unregistered ports\nacl Safe_ports port 280         # http-mgmt\nacl Safe_ports port 488         # gss-http\nacl Safe_ports port 591         # filemaker\nacl Safe_ports port 777         # multiling http\nacl CONNECT method CONNECT\n\n#\n# Recommended minimum Access Permission configuration:\n#\n# Deny requests to certain unsafe ports\nhttp_access deny !Safe_ports\n\n# Deny CONNECT to other than secure SSL ports\nhttp_access deny CONNECT !SSL_ports\n\n# Only allow cachemgr access from localhost\nhttp_access allow localhost manager\nhttp_access deny manager\n\n# We strongly recommend the following be uncommented to protect innocent\n# web applications running on the proxy server who think the only\n# one who can access services on \"localhost\" is a local user\n#http_access deny to_localhost\n\n#\n# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS\n#\n\n# Example rule allowing access from your local networks.\n# Adapt localnet in the ACL section to list your (internal) IP networks\n# from where browsing should be allowed\nhttp_access allow localnet\nhttp_access allow localhost\n\n# And finally deny all other access to this proxy\nhttp_access deny all\n\n# Squid normally listens to port 3128\nhttp_port 3128\n\n# Uncomment and adjust the following to add a disk cache directory.\n#cache_dir ufs /var/spool/squid 100 16 256\n\n# Leave coredumps in the first cache dir\ncoredump_dir /var/spool/squid\n\n#\n# Add any of your own refresh_pattern entries above these.\n#\nrefresh_pattern ^ftp:           1440    20%     10080\nrefresh_pattern ^gopher:        1440    0%      1440\nrefresh_pattern -i (/cgi-bin/|\\?) 0     0%      0\nrefresh_pattern .               0       20%     4320\n```\n\n\n## 3. \u30b5\u30fc\u30d3\u30b9\u8d77\u52d5\u8a2d\u5b9a\n\na. \u30b5\u30fc\u30d3\u30b9\u958b\u59cb\n\n```bash\nsystemctl start squid\n```\n\nb. \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u306e\u8ffd\u52a0\n\n```bash\nsystemctl enable squid \n```\n\nc. \u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u78ba\u8a8d\n\n```bash\nsystemctl status squid \n```\n\n* \u4e0b\u8a18\u5354\u8abf\u9805\u76ee\u306e\u901a\u308a\u306b enable \u3068 active \u304c\u8868\u793a\u3055\u308c\u308c\u3070\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\u5b8c\u4e86\n * Loaded: loaded (/usr/lib/systemd/system/squid.service; __enabled__; vendor preset: disabled)\n * Active: __active (running)__ since \u6728 2016-05-05 14:01:29 JST; 8s ago\n", "tags": ["squid", "CentOS", "proxy"]}