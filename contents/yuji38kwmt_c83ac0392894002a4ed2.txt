{"context": "org.dom4j.io.SAXReader\u306fxml\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080Java\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\nSAXReader\u306b\u95a2\u3059\u308b\u30e1\u30e2\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\npom.xml\n<dependency>\n    <groupId>dom4j</groupId>\n    <artifactId>dom4j</artifactId>\n    <version>1.6.1</version>\n</dependency>\n\n<dependency>\n    <groupId>jaxen</groupId>\n    <artifactId>jaxen</artifactId>\n    <version>1.1.1</version>\n</dependency>\n\n\n\nSAXReader\u3067UnknownHostException\n\u30aa\u30d5\u30e9\u30a4\u30f3\u3067xml\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3060\u3089\u3001Exception\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\ntest2.java\nSAXReader reader = new SAXReader();\nDocument doc = reader.read(\"struts-config.xml\");\n\n\n\nstruts-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE struts-config PUBLIC\n          \"-//Apache Software Foundation//DTD Struts Configuration 1.2//EN\"\n          \"http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd\">\n\n<struts-config>\n\uff5e\uff5e\uff5e\n</struts-config>\n\n\n\nException\norg.dom4j.DocumentException: jakarta.apache.org Nested exception: jakarta.apache.org\n    at org.dom4j.io.SAXReader.read(SAXReader.java:484)\n    at org.dom4j.io.SAXReader.read(SAXReader.java:321)\n    at test2.Test2.main(Test2.java:24)\nNested exception: \njava.net.UnknownHostException: jakarta.apache.org\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\n    \uff5e\uff5e\uff5e\n\n\n\u539f\u56e0\u306f\u3001DOCTYPE\u5ba3\u8a00\u306b\u6307\u5b9a\u3055\u308c\u305fdtd\u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u307f\u8fbc\u3081\u306a\u3044\u304b\u3089\u3067\u3059\u3002\n\u5916\u90e8\u306eDTD\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307e\u306a\u3044\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\ntest2.java\nreader.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false);\n\n\n\u4ee5\u4e0b\u3001\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u3067\u3059\u3002\nhttps://xerces.apache.org/xerces2-j/features.html\nhttp://qiita.com/yoshi389111/items/3d0da72b1f2ccd947052\nhttp://k-motohashi.hatenablog.com/entry/2013/04/24/115413 \n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u540d\u524d\u7a7a\u9593\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bXML\u3067\u3001XPath\u3092\u4f7f\u3046\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3001\u540d\u524d\u7a7a\u9593\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bXML\u3092XPath\u3067\u53d6\u5f97\u3059\u308b\u3068\u304d\u3092\u8003\u3048\u307e\u3059\u3002\n\nweb.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<web-app xmlns=\"http://java.sun.com/xml/ns/j2ee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"\n         version=\"2.4\">\n  <context-param>\n    <param-name>version</param-name>\n    <param-value>1.2.3</param-value>\n  </context-param>\n </web-apps>\n\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u306f\u3001\u7a7a\u6587\u5b57\u304c\u8fd4\u3063\u3066\u304d\u3066\u6b63\u3057\u304f\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002\n\nBad.java\n BaseXPath xpath = new Dom4jXPath(//context-param/param-name[text()='version']/following-sibling::param-value\");\nString version = xpath.stringValueOf(doc); //\u21d2\u7a7a\u6587\u5b57\n\n\n\u540d\u524d\u7a7a\u9593\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nGood.java\n //\u30c7\u30d5\u30a9\u30eb\u30c8\u540d\u524d\u7a7a\u9593\u3092\"p\"\u3068\u3044\u3046\u63a5\u982d\u8f9e\u306b\u3059\u308b\u3002\nBaseXPath xpath = new Dom4jXPath(//p:context-param/p:param-name[text()='version']/following-sibling::p:param-value\");\nxpath.addNamespace(\"p\", \"http://java.sun.com/xml/ns/j2ee\");\nString version = xpath.stringValueOf(doc); //\u21d21.2.3\n\n\n\u4ee5\u4e0b\u3001\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u3067\u3059\u3002\nhttp://waman.hatenablog.com/entry/20091030/1256858160\nhttp://www.edankert.com/defaultnamespaces.html#What_s_the_Problem_\n\n`org.dom4j.io.SAXReader`\u306fxml\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080Java\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\nSAXReader\u306b\u95a2\u3059\u308b\u30e1\u30e2\u3092\u66f8\u3044\u3066\u3044\u304d\u307e\u3059\u3002\n\n\n```xml:pom.xml\n<dependency>\n    <groupId>dom4j</groupId>\n    <artifactId>dom4j</artifactId>\n    <version>1.6.1</version>\n</dependency>\n  \t\n<dependency>\n    <groupId>jaxen</groupId>\n    <artifactId>jaxen</artifactId>\n    <version>1.1.1</version>\n</dependency>\n```\n\n### SAXReader\u3067UnknownHostException\n\n\u30aa\u30d5\u30e9\u30a4\u30f3\u3067xml\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3060\u3089\u3001Exception\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n```java:test2.java\nSAXReader reader = new SAXReader();\nDocument doc = reader.read(\"struts-config.xml\");\n```\n\n```xml:struts-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE struts-config PUBLIC\n          \"-//Apache Software Foundation//DTD Struts Configuration 1.2//EN\"\n          \"http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd\">\n\n<struts-config>\n\uff5e\uff5e\uff5e\n</struts-config>\n```\n\n```txt:Exception\norg.dom4j.DocumentException: jakarta.apache.org Nested exception: jakarta.apache.org\n\tat org.dom4j.io.SAXReader.read(SAXReader.java:484)\n\tat org.dom4j.io.SAXReader.read(SAXReader.java:321)\n\tat test2.Test2.main(Test2.java:24)\nNested exception: \njava.net.UnknownHostException: jakarta.apache.org\n\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:184)\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\n    \uff5e\uff5e\uff5e\n```\n\n\u539f\u56e0\u306f\u3001DOCTYPE\u5ba3\u8a00\u306b\u6307\u5b9a\u3055\u308c\u305fdtd\u30d5\u30a1\u30a4\u30eb\u304c\u8aad\u307f\u8fbc\u3081\u306a\u3044\u304b\u3089\u3067\u3059\u3002\n\u5916\u90e8\u306eDTD\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u307e\u306a\u3044\u3088\u3046\u306b\u3059\u308c\u3070\u3001\u89e3\u6c7a\u3057\u307e\u3059\u3002\n\n```java:test2.java\nreader.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false);\n```\n\n\u4ee5\u4e0b\u3001\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u3067\u3059\u3002\nhttps://xerces.apache.org/xerces2-j/features.html\nhttp://qiita.com/yoshi389111/items/3d0da72b1f2ccd947052\nhttp://k-motohashi.hatenablog.com/entry/2013/04/24/115413    \n\n\n### \u30c7\u30d5\u30a9\u30eb\u30c8\u540d\u524d\u7a7a\u9593\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bXML\u3067\u3001XPath\u3092\u4f7f\u3046\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u3001\u540d\u524d\u7a7a\u9593\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308bXML\u3092XPath\u3067\u53d6\u5f97\u3059\u308b\u3068\u304d\u3092\u8003\u3048\u307e\u3059\u3002\n\n```xml:web.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<web-app xmlns=\"http://java.sun.com/xml/ns/j2ee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"\n         version=\"2.4\">\n  <context-param>\n    <param-name>version</param-name>\n    <param-value>1.2.3</param-value>\n  </context-param>\n </web-apps>\n ```\n \n \u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u306f\u3001\u7a7a\u6587\u5b57\u304c\u8fd4\u3063\u3066\u304d\u3066\u6b63\u3057\u304f\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3002\n \n  ```java:Bad.java\n BaseXPath xpath = new Dom4jXPath(//context-param/param-name[text()='version']/following-sibling::param-value\");\nString version = xpath.stringValueOf(doc); //\u21d2\u7a7a\u6587\u5b57\n ```\n \n \u540d\u524d\u7a7a\u9593\u3092\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n \n ```java:Good.java\n //\u30c7\u30d5\u30a9\u30eb\u30c8\u540d\u524d\u7a7a\u9593\u3092\"p\"\u3068\u3044\u3046\u63a5\u982d\u8f9e\u306b\u3059\u308b\u3002\nBaseXPath xpath = new Dom4jXPath(//p:context-param/p:param-name[text()='version']/following-sibling::p:param-value\");\nxpath.addNamespace(\"p\", \"http://java.sun.com/xml/ns/j2ee\");\nString version = xpath.stringValueOf(doc); //\u21d21.2.3\n ```\n \n \u4ee5\u4e0b\u3001\u53c2\u8003\u306b\u3057\u305f\u30b5\u30a4\u30c8\u3067\u3059\u3002\n http://waman.hatenablog.com/entry/20091030/1256858160\n http://www.edankert.com/defaultnamespaces.html#What_s_the_Problem_\n    \n", "tags": ["Java", "XML"]}