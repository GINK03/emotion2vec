{"context": "\n\n\u767a\u7aef\nrails-bootstrap-forms\u3092\u4f7f\u3063\u3066\u3044\u3066\u3001\u4f55\u6545\u304b\u30e9\u30d9\u30eb\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3082\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306e\u64cd\u4f5c\u304c\u3067\u304d\u306a\u3044\uff01\u3068\u306a\u3063\u305f\u306e\u3067\u3001\u539f\u56e0\u3092\u8abf\u67fb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u539f\u56e0\n\u30e9\u30d9\u30eb\u306efor\u5c5e\u6027\u3068\u3001\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306eid\u304c\u4e00\u81f4\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u3002\n\u554f\u984c\u306eerb\u304c\u3053\u3061\u3089\u3002\n<%= bootstrap_form_tag method: :get, url: search_path, layout: :horizontal do |f| %>\n  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Alpha\") }, \"Test::Alpha\" %>\n  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Beta\") }, \"Test::Beta\" %>\n  <%= f.submit \"Search\", class: 'btn btn-primary' %>\n<% end %>\n\n\u751f\u6210\u3055\u308c\u308bhtml\uff08\u554f\u984c\u306e\u90e8\u5206\u306e\u307f\u62bd\u51fa\uff09\n<div class=\"checkbox\">\n  <label for=\"_target_types_Test::Alpha\">\n    <input checked=\"checked\" id=\"_target_types_testalpha\" name=\"[target_types][]\" type=\"checkbox\" value=\"Test::Alpha\"> Target types\n  </label>\n</div>\n\nlabel\u306efor\u5c5e\u6027\u304c\"_target_types_Test::Alpha\"\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001input\u306eid\u304c\"_target_types_testalpha\"\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\u3088\u308a\u8a73\u3057\u3044\u539f\u56e0\u3092\u7a76\u660e\u3059\u308b\u305f\u3081\u306b\u3001rails-bootstrap-forms\u306e\u5b9f\u88c5\u3092\u8ffd\u3063\u3066\u3044\u304f\u3002\nhttps://github.com/atipugin/rails-bootstrap-forms/blob/master/lib/bootstrap_form/form_builder.rb#L101-L118\ndef check_box_with_bootstrap(name, options = {}, checked_value = \"1\", unchecked_value = \"0\", &block)\n  options = options.symbolize_keys!\n\n  html = check_box_without_bootstrap(name, options.except(:label, :help, :inline), checked_value, unchecked_value)\n  label_content = block_given? ? capture(&block) : options[:label]\n  html.concat(\" \").concat(label_content || (object && object.class.human_attribute_name(name)) || name.to_s.humanize)\n\n  label_name = name\n  label_name = \"#{name}_#{checked_value}\" if options[:multiple]\n\n  if options[:inline]\n    label(label_name, html, class: \"checkbox-inline\")\n  else\n    content_tag(:div, class: \"checkbox\") do\n      label(label_name, html)\n    end\n  end\nend\n\n\u3053\u3053\u3089\u3078\u3093\u306bbinding.pry\u3092\u4ed5\u639b\u3051\u3066\u51e6\u7406\u3092\u8ffd\u3063\u3066\u3044\u304f\u3002\n\u307e\u305a\u30e9\u30d9\u30eb\u306e\u751f\u6210\u306flabel(label_name, html)\u3067\u3001ActionView::Helpers::FormBuilder#label\u306b\u98db\u3070\u3057\u3066\u3044\u308b\u3002\nmultiple: true\u306b\u3057\u305f\u5834\u5408\u3001\nlabel_name = \"#{name}_#{checked_value}\" if options[:multiple]\u3067\u3001\u3053\u3053\u3067\u306f\"_target_types_Test::Alpha\"\u304c\u5165\u3063\u3066\u3044\u308b\u3002\ndef label(method, text = nil, options = {}, &block)\n  @template.label(@object_name, method, text, objectify_options(options), &block)\nend\n\nmethod = \"_target_types_Test::Alpha\"\u3002\n\u3053\u3053\u3067\u3053\u3063\u3061\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\ndef label(object_name, method, content_or_options = nil, options = nil, &block)\n  Tags::Label.new(object_name, method, self, content_or_options, options).render(&block)\nend\n\n\u305d\u306e\u5f8c\u306a\u3093\u3084\u304b\u3093\u3084\u3042\u3063\u3066method = \"_target_types_Test::Alpha\"\u304clabel\u306efor\u5c5e\u6027\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\uff08\u7701\u7565\uff09\n\u4e00\u65b9\u3001input\u306eid\u306b\u3064\u3044\u3066\u8ffd\u3063\u3066\u3044\u304f\u3068\u3001input\u30bf\u30b0\u306e\u751f\u6210\u306fcheck_box_without_bootstrap\u3067Rails\u5074\u306b\u6295\u3052\u3066\u304a\u308a\u3001\u3053\u3053\u3067\u3001value\u306e\u5024\uff08\"Test::Alpha\"\uff09\u3092sanitized\u3057\u305f\u3082\u306e\u304cid\u3068\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u308b\u3002\noptions[\"id\"] += \"_#{sanitized_value(tag_value)}\"\n\ndef sanitized_value(value)\n  value.to_s.gsub(/\\s/, \"_\").gsub(/[^-\\w]/, \"\").downcase\nend\n\n\u3053\u308c\u3067\"Test::Alpha\" -> \"testalpha\"\u306b\u5909\u63db\u3055\u308c\u3001id\u304c\"_target_types_testalpha\"\u306b\u306a\u308b\u3002\nRails\u306e\u4ed5\u69d8\u306b\u3088\u308a\u3001input\u306eid\u306fsanitized\u3055\u308c\u305f\u3082\u306e\u304c\u4f7f\u308f\u308c\u308b\u304c\u3001rails-bootstrap-forms\u5185\u3067label\u306efor\u5c5e\u6027\u306b\u5f53\u3066\u308b\u6587\u5b57\u5217\u3092sanitized\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u304c\u539f\u56e0\u3002\n\n\u89e3\u6c7a\u7b56\n\u3068\u308a\u3042\u3048\u305a\u306e\u89e3\u6c7a\u7b56\u3068\u3057\u3066\u306f\u3001checkbox\u306bid\u3092\u6307\u5b9a\u3059\u308b\n<%= bootstrap_form_tag method: :get, url: search_path, layout: :horizontal do |f| %>\n-  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Alpha\") }, \"Test::Alpha\" %>\n+  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Alpha\"), id: \"_target_types_Test::Alpha\" }, \"Test::Alpha\" %>\n-  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Beta\") }, \"Test::Beta\" %>\n+  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Beta\"), id: \"_target_types_Test::Beta\" }, \"Test::Beta\" %>\n  <%= f.submit \"Search\", class: 'btn btn-primary' %>\n<% end %>\n\n\u304c\u3001\u3069\u3046\u898b\u3066\u3082rails-bootstrap-forms\u306e\u30d0\u30b0\u306a\u306e\u3067\u3001Pull Request\u3092\u9001\u308d\u3046\u304b\u306a\u3042\u3068\u601d\u3063\u305f\u3089\u65e2\u306b\u3042\u3063\u305f\u3002\n\u653e\u7f6e\u3055\u308c\u3066\u308b\u3063\u307d\u3044\u2026\u3046\u301c\u3093\u3002\n\u3044\u3064\u306e\u307e\u306b\u304bMerge\u3055\u308c\u3066\u307e\u3057\u305f\u3002\u3081\u3067\u305f\u3057\u3081\u3067\u305f\u3057\u3002\n# \u767a\u7aef\n\n[rails-bootstrap-forms](https://github.com/bootstrap-ruby/rails-bootstrap-forms)\u3092\u4f7f\u3063\u3066\u3044\u3066\u3001\u4f55\u6545\u304b\u30e9\u30d9\u30eb\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3082\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306e\u64cd\u4f5c\u304c\u3067\u304d\u306a\u3044\uff01\u3068\u306a\u3063\u305f\u306e\u3067\u3001\u539f\u56e0\u3092\u8abf\u67fb\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n# \u539f\u56e0\n\n\u30e9\u30d9\u30eb\u306efor\u5c5e\u6027\u3068\u3001\u30c1\u30a7\u30c3\u30af\u30dc\u30c3\u30af\u30b9\u306eid\u304c\u4e00\u81f4\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u3002\n\u554f\u984c\u306eerb\u304c\u3053\u3061\u3089\u3002\n\n```erb\n<%= bootstrap_form_tag method: :get, url: search_path, layout: :horizontal do |f| %>\n  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Alpha\") }, \"Test::Alpha\" %>\n  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Beta\") }, \"Test::Beta\" %>\n  <%= f.submit \"Search\", class: 'btn btn-primary' %>\n<% end %>\n```\n\n\u751f\u6210\u3055\u308c\u308bhtml\uff08\u554f\u984c\u306e\u90e8\u5206\u306e\u307f\u62bd\u51fa\uff09\n\n```html\n<div class=\"checkbox\">\n  <label for=\"_target_types_Test::Alpha\">\n    <input checked=\"checked\" id=\"_target_types_testalpha\" name=\"[target_types][]\" type=\"checkbox\" value=\"Test::Alpha\"> Target types\n  </label>\n</div>\n```\n\nlabel\u306efor\u5c5e\u6027\u304c`\"_target_types_Test::Alpha\"`\u306b\u306a\u3063\u3066\u3044\u308b\u304c\u3001input\u306eid\u304c`\"_target_types_testalpha\"`\u3068\u306a\u3063\u3066\u3044\u308b\u3002\n\n\u3088\u308a\u8a73\u3057\u3044\u539f\u56e0\u3092\u7a76\u660e\u3059\u308b\u305f\u3081\u306b\u3001rails-bootstrap-forms\u306e\u5b9f\u88c5\u3092\u8ffd\u3063\u3066\u3044\u304f\u3002\n\nhttps://github.com/atipugin/rails-bootstrap-forms/blob/master/lib/bootstrap_form/form_builder.rb#L101-L118\n\n```rb\ndef check_box_with_bootstrap(name, options = {}, checked_value = \"1\", unchecked_value = \"0\", &block)\n  options = options.symbolize_keys!\n\n  html = check_box_without_bootstrap(name, options.except(:label, :help, :inline), checked_value, unchecked_value)\n  label_content = block_given? ? capture(&block) : options[:label]\n  html.concat(\" \").concat(label_content || (object && object.class.human_attribute_name(name)) || name.to_s.humanize)\n\n  label_name = name\n  label_name = \"#{name}_#{checked_value}\" if options[:multiple]\n\n  if options[:inline]\n    label(label_name, html, class: \"checkbox-inline\")\n  else\n    content_tag(:div, class: \"checkbox\") do\n      label(label_name, html)\n    end\n  end\nend\n```\n\n\u3053\u3053\u3089\u3078\u3093\u306bbinding.pry\u3092\u4ed5\u639b\u3051\u3066\u51e6\u7406\u3092\u8ffd\u3063\u3066\u3044\u304f\u3002\n\n\u307e\u305a\u30e9\u30d9\u30eb\u306e\u751f\u6210\u306f`label(label_name, html)`\u3067\u3001[ActionView::Helpers::FormBuilder#label](https://github.com/rails/rails/blob/9f44aa08636dfbba9261f4350ec14684425c4b7b/actionview/lib/action_view/helpers/form_helper.rb#L1649-L1651)\u306b\u98db\u3070\u3057\u3066\u3044\u308b\u3002\nmultiple: true\u306b\u3057\u305f\u5834\u5408\u3001\n`label_name = \"#{name}_#{checked_value}\" if options[:multiple]`\u3067\u3001\u3053\u3053\u3067\u306f`\"_target_types_Test::Alpha\"`\u304c\u5165\u3063\u3066\u3044\u308b\u3002\n\n```rb\ndef label(method, text = nil, options = {}, &block)\n  @template.label(@object_name, method, text, objectify_options(options), &block)\nend\n```\n\n`method = \"_target_types_Test::Alpha\"`\u3002\n\u3053\u3053\u3067[\u3053\u3063\u3061](https://github.com/rails/rails/blob/9f44aa08636dfbba9261f4350ec14684425c4b7b/actionview/lib/action_view/helpers/form_helper.rb#L765-L767)\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\n\n```rb\ndef label(object_name, method, content_or_options = nil, options = nil, &block)\n  Tags::Label.new(object_name, method, self, content_or_options, options).render(&block)\nend\n```\n\n\u305d\u306e\u5f8c\u306a\u3093\u3084\u304b\u3093\u3084\u3042\u3063\u3066`method = \"_target_types_Test::Alpha\"`\u304clabel\u306efor\u5c5e\u6027\u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3002\uff08\u7701\u7565\uff09\n\n\u4e00\u65b9\u3001input\u306eid\u306b\u3064\u3044\u3066\u8ffd\u3063\u3066\u3044\u304f\u3068\u3001input\u30bf\u30b0\u306e\u751f\u6210\u306f`check_box_without_bootstrap`\u3067Rails\u5074\u306b\u6295\u3052\u3066\u304a\u308a\u3001[\u3053\u3053\u3067](https://github.com/rails/rails/blob/52ce6ece8c8f74064bb64e0a0b1ddd83092718e1/actionview/lib/action_view/helpers/tags/base.rb#L76)\u3001value\u306e\u5024\uff08\"Test::Alpha\"\uff09\u3092[sanitized](https://github.com/rails/rails/blob/52ce6ece8c8f74064bb64e0a0b1ddd83092718e1/actionview/lib/action_view/helpers/tags/base.rb#L116-L118)\u3057\u305f\u3082\u306e\u304cid\u3068\u3057\u3066\u8a2d\u5b9a\u3055\u308c\u308b\u3002\n\n```rb\noptions[\"id\"] += \"_#{sanitized_value(tag_value)}\"\n```\n\n```rb\ndef sanitized_value(value)\n  value.to_s.gsub(/\\s/, \"_\").gsub(/[^-\\w]/, \"\").downcase\nend\n```\n\n\u3053\u308c\u3067`\"Test::Alpha\" -> \"testalpha\"`\u306b\u5909\u63db\u3055\u308c\u3001id\u304c`\"_target_types_testalpha\"`\u306b\u306a\u308b\u3002\n\nRails\u306e\u4ed5\u69d8\u306b\u3088\u308a\u3001input\u306eid\u306fsanitized\u3055\u308c\u305f\u3082\u306e\u304c\u4f7f\u308f\u308c\u308b\u304c\u3001rails-bootstrap-forms\u5185\u3067label\u306efor\u5c5e\u6027\u306b\u5f53\u3066\u308b\u6587\u5b57\u5217\u3092sanitized\u3057\u3066\u3044\u306a\u304b\u3063\u305f\u306e\u304c\u539f\u56e0\u3002\n\n# \u89e3\u6c7a\u7b56\n\n\u3068\u308a\u3042\u3048\u305a\u306e\u89e3\u6c7a\u7b56\u3068\u3057\u3066\u306f\u3001checkbox\u306bid\u3092\u6307\u5b9a\u3059\u308b\n\n```diff\n<%= bootstrap_form_tag method: :get, url: search_path, layout: :horizontal do |f| %>\n-  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Alpha\") }, \"Test::Alpha\" %>\n+  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Alpha\"), id: \"_target_types_Test::Alpha\" }, \"Test::Alpha\" %>\n-  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Beta\") }, \"Test::Beta\" %>\n+  <%= f.check_box :target_types, { multiple: true, include_hidden: false, checked: params[:target_types].blank? || params[:target_types].include?(\"Test::Beta\"), id: \"_target_types_Test::Beta\" }, \"Test::Beta\" %>\n  <%= f.submit \"Search\", class: 'btn btn-primary' %>\n<% end %>\n```\n\n\u304c\u3001\u3069\u3046\u898b\u3066\u3082rails-bootstrap-forms\u306e\u30d0\u30b0\u306a\u306e\u3067\u3001Pull Request\u3092\u9001\u308d\u3046\u304b\u306a\u3042\u3068\u601d\u3063\u305f\u3089[\u65e2\u306b\u3042\u3063\u305f](https://github.com/bootstrap-ruby/rails-bootstrap-forms/pull/258)\u3002\n~~\u653e\u7f6e\u3055\u308c\u3066\u308b\u3063\u307d\u3044\u2026\u3046\u301c\u3093\u3002~~\n\u3044\u3064\u306e\u307e\u306b\u304bMerge\u3055\u308c\u3066\u307e\u3057\u305f\u3002\u3081\u3067\u305f\u3057\u3081\u3067\u305f\u3057\u3002\n", "tags": ["Rails", "bootstrap"]}