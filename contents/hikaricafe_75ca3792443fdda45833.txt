{"context": " More than 1 year has passed since last update.SpritKit\u3067\u91ce\u7403\u30b2\u30fc\u30e0\u3092\u3064\u304f\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u753b\u9762\u53f3\u4e0b\u306e\u300c\u30d0\u30c3\u30c6\u30a3\u30f3\u30b0\u30dc\u30bf\u30f3\u300d\u3092\u62bc\u3057\u305f\u3068\u304d\u306b\u8d64\u4e38\u3092\n\u8868\u793a\u3055\u305b\u3066\u3001\u8d64\u4e38\u3068\u30dc\u30fc\u30eb\u304c\u885d\u7a81\u3057\u305f\u3068\u304d\u306b\u30dc\u30fc\u30eb\u304c\n\u524d\u306b\u98db\u3076\u3068\u3044\u3046\u3053\u3068\u3092\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u300coverride func touchesBegan(touches: NSSet, withEvent event: UIEvent)\u300d\u3067\n\u8d64\u4e38\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u305a\u3063\u3068\u300c\u30d0\u30c3\u30c6\u30a3\u30f3\u30b0\u30dc\u30bf\u30f3\u300d\u3092\u62bc\u3057\u3066\u3044\u308b\u3068\n\u8d64\u4e38\u306f\u8868\u793a\u3055\u308c\u305f\u307e\u307e\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3069\u3046\u3057\u305f\u3089\u300c\u30d0\u30c3\u30c6\u30a3\u30f3\u30b0\u30dc\u30bf\u30f3\u300d\u3092\u62bc\u3057\u3063\u3071\u306a\u3057\u306b\u3057\u305f\u6642\u306b\u306f\n\u3059\u3050\u306b\u8d64\u4e38\u304c\u6d88\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3057\u3087\u3046\u3002\u3002\u3002\uff1f\uff1f\nimport SpriteKit\nclass GameScene: SKScene,SKPhysicsContactDelegate {\nvar batter = SKSpriteNode()\nvar pitcher = SKSpriteNode()\nvar ball = SKSpriteNode()\nvar maru = SKSpriteNode()\n\nvar last:CFTimeInterval!\n\nlet ballCategory:       UInt32 = 0x1 << 0\nlet maruCategory:       UInt32 = 0x1 << 1\nlet pitcherCategory:    UInt32 = 0x1 << 2\n\n\noverride func didMoveToView(view: SKView) {\n\n    self.physicsWorld.gravity = CGVectorMake(0.0, -2.0)\n    self.physicsWorld.contactDelegate = self\n\n\n    //pitcher\n    var pitcherTexture = SKTexture(imageNamed: \"pitcher\")\n    pitcherTexture.filteringMode = SKTextureFilteringMode.Nearest\n\n    pitcher = SKSpriteNode(texture: pitcherTexture)\n    pitcher.setScale(1.0)\n    pitcher.position = CGPointMake(self.frame.size.width * 0.05, self.frame.size.height * 0.5 )\n\n    pitcher.physicsBody = SKPhysicsBody(circleOfRadius: pitcher.size.height/2.0)\n    pitcher.physicsBody?.dynamic = false\n    pitcher.physicsBody?.allowsRotation = false\n    pitcher.physicsBody?.friction = 1.0\n    pitcher.physicsBody?.mass = 1000000000.0\n\n    pitcher.physicsBody?.categoryBitMask = pitcherCategory\n\n\n    self.addChild(pitcher)\n\n\n\n    //battingbtn\n    var battingbtnTexture = SKTexture(imageNamed: \"batting\")\n\n    var battingbtn = SKSpriteNode(texture: battingbtnTexture)\n    battingbtn.setScale(1.0)\n    battingbtn.position = CGPointMake(self.size.width/2 + 100, 150)\n    battingbtn.name = \"maru\"\n\n    maru.physicsBody?.categoryBitMask = maruCategory\n    maru.physicsBody?.collisionBitMask = ballCategory\n\n    self.addChild(battingbtn)\n\n\n}\n\nfunc shoot() {\n\n\n    var BallTexture = SKTexture(imageNamed: \"ball\")\n    ball = SKSpriteNode(texture: BallTexture)\n    ball.position = CGPointMake(self.pitcher.position.x + 50, self.pitcher.position.y )\n\n    ball.physicsBody = SKPhysicsBody(circleOfRadius: ball.size.height/2.0)\n    ball.physicsBody?.mass = 100.0\n    ball.physicsBody?.affectedByGravity = false\n    ball.physicsBody?.dynamic = true\n    self .addChild(ball)\n\n    ball.physicsBody?.applyImpulse(CGVectorMake(150000, 0))\n    ball.physicsBody?.restitution = 1.5\n    ball.physicsBody?.categoryBitMask = ballCategory\n    ball.physicsBody?.contactTestBitMask = maruCategory\n}\n\nfunc hit() {\n\n    var maruTexture = SKTexture(imageNamed: \"maru\")\n    maru = SKSpriteNode(texture: maruTexture)\n    maru.position = CGPointMake(self.size.width/2 + 400, self.pitcher.position.y  )\n    maru.physicsBody = SKPhysicsBody(rectangleOfSize: CGSizeMake(maruTexture.size().width, maruTexture.size().height))\n    maru.physicsBody?.dynamic = false\n    maru.physicsBody?.allowsRotation = false\n\n    self .addChild(maru)\n\n}\n\n\noverride func touchesBegan(touches: NSSet, withEvent event: UIEvent) {\n    /* Called when a touch begins */\n\n    for touch: AnyObject in touches {\n        let location = touch.locationInNode(self)\n\n        if nodeAtPoint(location).name == \"shoot\" {\n            shoot()\n        }\n\n    }\n\n    for touch: AnyObject in touches {\n\n        let location = touch.locationInNode(self)\n\n        if nodeAtPoint(location).name == \"maru\" {\n                  println(\"maru\")\n            hit()\n        }\n    }\n}\n\noverride func touchesEnded(touches: NSSet, withEvent event: UIEvent) {\n    maru.removeFromParent()\n\n}\n\noverride func update(currentTime: CFTimeInterval) {\n\n    if !(last != nil) {\n        last = currentTime\n    }\n\n    if last + 1 <= currentTime {\n\n        self.shoot()\n\n        last = currentTime\n    }\n\n\n}\n\n\n\nfunc dakyu(){\n    ball.runAction(SKAction .moveTo(CGPointMake(100,600), duration:0.5))\n\n}\n\n\nfunc didBeginContact(contact: SKPhysicsContact!) {\n\n    var firstBody, secondBody: SKPhysicsBody\n\n    if contact.bodyA.categoryBitMask < contact.bodyB.categoryBitMask {\n        firstBody = contact.bodyA\n        secondBody = contact.bodyB\n    } else {\n        firstBody = contact.bodyB\n        secondBody = contact.bodyA\n    }\n\n    if firstBody.categoryBitMask & ballCategory != 0 &&\n        secondBody.categoryBitMask & maruCategory != 0 {\n            secondBody.node?.removeFromParent()\n            dakyu()\n\n    }\n\n}\n\n}\nSpritKit\u3067\u91ce\u7403\u30b2\u30fc\u30e0\u3092\u3064\u304f\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.45.11.png](https://qiita-image-store.s3.amazonaws.com/0/55102/c1b09acb-c3a3-23b7-5c37-e0a6663f8a87.png)\n\n\u753b\u9762\u53f3\u4e0b\u306e\u300c\u30d0\u30c3\u30c6\u30a3\u30f3\u30b0\u30dc\u30bf\u30f3\u300d\u3092\u62bc\u3057\u305f\u3068\u304d\u306b\u8d64\u4e38\u3092\n\u8868\u793a\u3055\u305b\u3066\u3001\u8d64\u4e38\u3068\u30dc\u30fc\u30eb\u304c\u885d\u7a81\u3057\u305f\u3068\u304d\u306b\u30dc\u30fc\u30eb\u304c\n\u524d\u306b\u98db\u3076\u3068\u3044\u3046\u3053\u3068\u3092\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-09-28 9.55.36.png](https://qiita-image-store.s3.amazonaws.com/0/55102/f07f9be9-8a07-5c44-083b-bdcf94c1e838.png)\n\n\u300coverride func touchesBegan(touches: NSSet, withEvent event: UIEvent)\u300d\u3067\n\u8d64\u4e38\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u306e\u3067\u3059\u304c\u3001\u305a\u3063\u3068\u300c\u30d0\u30c3\u30c6\u30a3\u30f3\u30b0\u30dc\u30bf\u30f3\u300d\u3092\u62bc\u3057\u3066\u3044\u308b\u3068\n\u8d64\u4e38\u306f\u8868\u793a\u3055\u308c\u305f\u307e\u307e\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u3069\u3046\u3057\u305f\u3089\u300c\u30d0\u30c3\u30c6\u30a3\u30f3\u30b0\u30dc\u30bf\u30f3\u300d\u3092\u62bc\u3057\u3063\u3071\u306a\u3057\u306b\u3057\u305f\u6642\u306b\u306f\n\u3059\u3050\u306b\u8d64\u4e38\u304c\u6d88\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u306e\u3067\u3057\u3087\u3046\u3002\u3002\u3002\uff1f\uff1f\n\n\nimport SpriteKit\n\nclass GameScene: SKScene,SKPhysicsContactDelegate {\n    \n    \n    var batter = SKSpriteNode()\n    var pitcher = SKSpriteNode()\n    var ball = SKSpriteNode()\n    var maru = SKSpriteNode()\n    \n    var last:CFTimeInterval!\n    \n    let ballCategory:       UInt32 = 0x1 << 0\n    let maruCategory:       UInt32 = 0x1 << 1\n    let pitcherCategory:    UInt32 = 0x1 << 2\n\n\n    override func didMoveToView(view: SKView) {\n\n        self.physicsWorld.gravity = CGVectorMake(0.0, -2.0)\n        self.physicsWorld.contactDelegate = self\n    \n        \n        //pitcher\n        var pitcherTexture = SKTexture(imageNamed: \"pitcher\")\n        pitcherTexture.filteringMode = SKTextureFilteringMode.Nearest\n        \n        pitcher = SKSpriteNode(texture: pitcherTexture)\n        pitcher.setScale(1.0)\n        pitcher.position = CGPointMake(self.frame.size.width * 0.05, self.frame.size.height * 0.5 )\n        \n        pitcher.physicsBody = SKPhysicsBody(circleOfRadius: pitcher.size.height/2.0)\n        pitcher.physicsBody?.dynamic = false\n        pitcher.physicsBody?.allowsRotation = false\n        pitcher.physicsBody?.friction = 1.0\n        pitcher.physicsBody?.mass = 1000000000.0\n        \n        pitcher.physicsBody?.categoryBitMask = pitcherCategory\n\n        \n        self.addChild(pitcher)\n        \n\n        \n        //battingbtn\n        var battingbtnTexture = SKTexture(imageNamed: \"batting\")\n        \n        var battingbtn = SKSpriteNode(texture: battingbtnTexture)\n        battingbtn.setScale(1.0)\n        battingbtn.position = CGPointMake(self.size.width/2 + 100, 150)\n        battingbtn.name = \"maru\"\n        \n        maru.physicsBody?.categoryBitMask = maruCategory\n        maru.physicsBody?.collisionBitMask = ballCategory\n        \n        self.addChild(battingbtn)\n\n    \n    }\n    \n    func shoot() {\n    \n        \n        var BallTexture = SKTexture(imageNamed: \"ball\")\n        ball = SKSpriteNode(texture: BallTexture)\n        ball.position = CGPointMake(self.pitcher.position.x + 50, self.pitcher.position.y )\n\n        ball.physicsBody = SKPhysicsBody(circleOfRadius: ball.size.height/2.0)\n        ball.physicsBody?.mass = 100.0\n        ball.physicsBody?.affectedByGravity = false\n        ball.physicsBody?.dynamic = true\n        self .addChild(ball)\n\n        ball.physicsBody?.applyImpulse(CGVectorMake(150000, 0))\n        ball.physicsBody?.restitution = 1.5\n        ball.physicsBody?.categoryBitMask = ballCategory\n        ball.physicsBody?.contactTestBitMask = maruCategory\n    }\n    \n    func hit() {\n\n        var maruTexture = SKTexture(imageNamed: \"maru\")\n        maru = SKSpriteNode(texture: maruTexture)\n        maru.position = CGPointMake(self.size.width/2 + 400, self.pitcher.position.y  )\n        maru.physicsBody = SKPhysicsBody(rectangleOfSize: CGSizeMake(maruTexture.size().width, maruTexture.size().height))\n        maru.physicsBody?.dynamic = false\n        maru.physicsBody?.allowsRotation = false\n\n        self .addChild(maru)\n        \n    }\n    \n    \n    override func touchesBegan(touches: NSSet, withEvent event: UIEvent) {\n        /* Called when a touch begins */\n        \n        for touch: AnyObject in touches {\n            let location = touch.locationInNode(self)\n            \n            if nodeAtPoint(location).name == \"shoot\" {\n                shoot()\n            }\n        \n        }\n        \n        for touch: AnyObject in touches {\n            \n            let location = touch.locationInNode(self)\n            \n            if nodeAtPoint(location).name == \"maru\" {\n                      println(\"maru\")\n                hit()\n            }\n        }\n    }\n    \n    override func touchesEnded(touches: NSSet, withEvent event: UIEvent) {\n        maru.removeFromParent()\n        \n    }\n   \n    override func update(currentTime: CFTimeInterval) {\n        \n        if !(last != nil) {\n            last = currentTime\n        }\n        \n        if last + 1 <= currentTime {\n            \n            self.shoot()\n            \n            last = currentTime\n        }\n\n\n    }\n    \n\n\n    func dakyu(){\n        ball.runAction(SKAction .moveTo(CGPointMake(100,600), duration:0.5))\n        \n    }\n    \n    \n    func didBeginContact(contact: SKPhysicsContact!) {\n        \n        var firstBody, secondBody: SKPhysicsBody\n        \n        if contact.bodyA.categoryBitMask < contact.bodyB.categoryBitMask {\n            firstBody = contact.bodyA\n            secondBody = contact.bodyB\n        } else {\n            firstBody = contact.bodyB\n            secondBody = contact.bodyA\n        }\n        \n        if firstBody.categoryBitMask & ballCategory != 0 &&\n            secondBody.categoryBitMask & maruCategory != 0 {\n                secondBody.node?.removeFromParent()\n                dakyu()\n                \n        }\n        \n    }\n}\n\n\n\n\n\n\n\n\n\n", "tags": ["Swift", "Xcode6.0", "SpriteKit"]}