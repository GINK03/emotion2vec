{"context": " More than 1 year has passed since last update.Aerospike\u3092\u89e6\u308b\u5fc5\u8981\u304c\u3067\u3066\u304d\u305f\u306e\u3067\u89e6\u3063\u3066\u307f\u307e\u3059\u3002\nMac\u306bAerospike\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066AQL\u3067\u4e00\u901a\u308a\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u30b4\u30fc\u30eb\u3067\u3059\u3002\n\n\u74b0\u5883\nMacOSX Yosemite 10.10.5\nVagrant 1.7.3\n\nInstall\nMaxOSX\u7528\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306b\u305d\u3063\u3066\u884c\u3044\u307e\u3059\u3002\n\n\u624b\u9806\n\u307e\u305aVM(\u4eee\u60f3\u74b0\u5883)\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nVM\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210&\u79fb\u52d5\nmkdir ~/aerospike-vm && cd ~/aerospike-vm\n\n\n\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067Vagrantfile\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u304a\u597d\u307f\u3067\n\nVagrantfile\u4f5c\u6210\nvagrant init aerospike/centos-6.5\n\n\nVM\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\nAerospike\u8d77\u52d5\nvagrant up\n\n\n\u3053\u306e\u3042\u3068AQL\u3092\u4f7f\u3044\u305f\u3044\u306e\u3067VM\u306bssh\u3067\u5165\u308a\u307e\u3059\u3002\n\nssh\nvagrant ssh\n\n\nAerospike\u3068AMC\u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nAMC\u306fAerospike Management Console\u306e\u7565\u3067\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u3088\u3046\u306a\u3082\u306e\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n\n\u72b6\u614b\u78ba\u8a8d\nsudo service aerospike status\nsudo service amc status\n\n\n\u4e21\u65b9\u3068\u3082running\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\uff01\n\u6210\u529f\u3059\u308b\u3068\u30b5\u30fc\u30d0\u30ed\u30b0\u306b\u300c\u3082\u3046\u3059\u3050\u30b1\u30fc\u30ad\u3060\u3088\u300d\u306e\u66f8\u304d\u8fbc\u307f\u304c\u3042\u308b\u305d\u3046\u3067\u3059\u3002\n\uff08Web+DB Press\u306b\u3088\u308b\u3068\u3001Aerospike\u306e\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u30b1\u30fc\u30ad\u3067\u304a\u795d\u3044\u3057\u305f\u3053\u3068\u304c\u95a2\u9023\u3057\u3066\u3044\u308b\u3068\u304b\u3057\u3066\u3044\u306a\u3044\u3068\u304b\uff09\nsudo grep -i cake /var/log/aerospike/aerospike.log\n\n\u79c1\u306f\u78ba\u8a8d\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3002\u30b1\u30fc\u30ad\u306f\u304a\u3042\u305a\u3051\u3067\u3059\n\u3057\u304b\u3057\u3001AQL\u306b\u5165\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\nAQL\u30b3\u30de\u30f3\u30c9\n\n\u8d77\u52d5\naql\n\n\nInfo\nshow namespaces\n\nshow sets\n\nshow indexes\n\n\nRecord\n\ninsert\nINSERT INTO <ns>[.<set>] (PK, <bins>) VALUES (<key>, <values>)\n\ninsert into test.hoge (PK, name, age) values (1, 'fuga', 20)\ninsert into test.hoge (PK, name, age) values (100, 'piyo', 30)\n\n\nselect\nSELECT * FROM <ns>[.<set>]\n\nselect * from test.hoge\n+--------+-----+\n| name   | age |\n+--------+-----+\n| \"fuga\" | 20  |\n| \"piyo\" | 30  |\n+--------+-----+\n\nselect * from test.hoge where PK = 1\n+--------+-----+\n| name   | age |\n+--------+-----+\n| \"fuga\" | 20  |\n+--------+-----+\n\n\nupdate\nselect * from test.hoge where PK = 1\n+--------+-----+\n| name   | age |\n+--------+-----+\n| \"fuga\" | 20  |\n+--------+-----+\n\ninsert into test.hoge (PK, name, age) values (1, 'fugagaga', 50)\n\nselect * from test.hoge where PK = 1\n+------------+-----+\n| name       | age |\n+------------+-----+\n| \"fugagaga\" | 50  |\n+------------+-----+\n\n\ndelete\ndelete from test.hoge where pk = 1\n\nAerospike\u306f\u30ad\u30fc\u306f\u4fdd\u5b58\u305b\u305a\u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u306e\u307f\u4fdd\u5b58\u3057\u3066\u3044\u308b\u305d\u3046\u3067\u3001AQL\u304b\u3089\u30ad\u30fc\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\u3069\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3082WritePolicy.sendKey\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u304c\u3042\u308a\u3001\u3053\u3053\u3092true\u306b\u3059\u308c\u3070\u30ad\u30fc\u3082\u4fdd\u5b58\u3055\u308c\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n\uff08\u5168\u90e8\u3053\u306e\u30d6\u30ed\u30b0\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3057\u305fm(_ _)m\uff09\n\nPHP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\n\u516c\u5f0f\u30de\u30cb\u30e5\u30a2\u30eb\n\u5f8c\u307b\u3069\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u307e\u3059\u3002\n\nAerospike\u3092\u89e6\u308b\u5fc5\u8981\u304c\u3067\u3066\u304d\u305f\u306e\u3067\u89e6\u3063\u3066\u307f\u307e\u3059\u3002\nMac\u306bAerospike\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066AQL\u3067\u4e00\u901a\u308a\u30b3\u30de\u30f3\u30c9\u3092\u767a\u884c\u3057\u3066\u78ba\u8a8d\u3059\u308b\u3053\u3068\u304c\u30b4\u30fc\u30eb\u3067\u3059\u3002\n\n## \u74b0\u5883\nMacOSX Yosemite 10.10.5\nVagrant 1.7.3\n\n## Install\nMaxOSX\u7528\u306e[\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806](http://www.aerospike.com/docs/operations/install/vagrant/mac/)\u306b\u305d\u3063\u3066\u884c\u3044\u307e\u3059\u3002\n\n### \u624b\u9806\n\u307e\u305aVM(\u4eee\u60f3\u74b0\u5883)\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```:VM\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210&\u79fb\u52d5\nmkdir ~/aerospike-vm && cd ~/aerospike-vm\n```\n\n\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u3067Vagrantfile\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n[\u30aa\u30d7\u30b7\u30e7\u30f3](https://www.vagrantup.com/docs/cli/init.html)\u306f\u304a\u597d\u307f\u3067\n\n```:Vagrantfile\u4f5c\u6210\nvagrant init aerospike/centos-6.5\n```\n\nVM\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```:Aerospike\u8d77\u52d5\nvagrant up\n```\n\n\u3053\u306e\u3042\u3068AQL\u3092\u4f7f\u3044\u305f\u3044\u306e\u3067VM\u306bssh\u3067\u5165\u308a\u307e\u3059\u3002\n\n```:ssh\nvagrant ssh\n```\n\nAerospike\u3068AMC\u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nAMC\u306f[Aerospike Management Console](http://www.aerospike.com/docs/amc/)\u306e\u7565\u3067\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306e\u3088\u3046\u306a\u3082\u306e\u307f\u305f\u3044\u3067\u3059\u306d\u3002\n\n```:\u72b6\u614b\u78ba\u8a8d\nsudo service aerospike status\nsudo service amc status\n```\n\n\u4e21\u65b9\u3068\u3082running\u306b\u306a\u3063\u3066\u3044\u308c\u3070OK\u3067\u3059\uff01\n\u6210\u529f\u3059\u308b\u3068\u30b5\u30fc\u30d0\u30ed\u30b0\u306b\u300c\u3082\u3046\u3059\u3050\u30b1\u30fc\u30ad\u3060\u3088\u300d\u306e\u66f8\u304d\u8fbc\u307f\u304c\u3042\u308b\u305d\u3046\u3067\u3059\u3002\n\uff08Web+DB Press\u306b\u3088\u308b\u3068\u3001Aerospike\u306e\u30ea\u30ea\u30fc\u30b9\u6642\u306b\u30b1\u30fc\u30ad\u3067\u304a\u795d\u3044\u3057\u305f\u3053\u3068\u304c\u95a2\u9023\u3057\u3066\u3044\u308b\u3068\u304b\u3057\u3066\u3044\u306a\u3044\u3068\u304b\uff09\n\n```\u30ed\u30b0\u78ba\u8a8d\nsudo grep -i cake /var/log/aerospike/aerospike.log\n```\n\n\u79c1\u306f\u78ba\u8a8d\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u3002\u30b1\u30fc\u30ad\u306f\u304a\u3042\u305a\u3051\u3067\u3059\n\u3057\u304b\u3057\u3001AQL\u306b\u5165\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n## AQL\u30b3\u30de\u30f3\u30c9\n\n### \u8d77\u52d5\n```AQL\u8d77\u52d5\naql\n```\n\n### Info\n\n```namespace\u4e00\u89a7\nshow namespaces\n```\n```sets\u4e00\u89a7\nshow sets\n```\n```indes\u4e00\u89a7\nshow indexes\n```\n\n### Record\n\n#### insert\n\n```\nINSERT INTO <ns>[.<set>] (PK, <bins>) VALUES (<key>, <values>)\n```\n```\u4f8b\ninsert into test.hoge (PK, name, age) values (1, 'fuga', 20)\ninsert into test.hoge (PK, name, age) values (100, 'piyo', 30)\n```\n\n#### select\n```\nSELECT * FROM <ns>[.<set>]\n```\n```\u4f8b\nselect * from test.hoge\n+--------+-----+\n| name   | age |\n+--------+-----+\n| \"fuga\" | 20  |\n| \"piyo\" | 30  |\n+--------+-----+\n\nselect * from test.hoge where PK = 1\n+--------+-----+\n| name   | age |\n+--------+-----+\n| \"fuga\" | 20  |\n+--------+-----+\n```\n\n#### update\n```\nselect * from test.hoge where PK = 1\n+--------+-----+\n| name   | age |\n+--------+-----+\n| \"fuga\" | 20  |\n+--------+-----+\n\ninsert into test.hoge (PK, name, age) values (1, 'fugagaga', 50)\n\nselect * from test.hoge where PK = 1\n+------------+-----+\n| name       | age |\n+------------+-----+\n| \"fugagaga\" | 50  |\n+------------+-----+\n```\n\n#### delete\n```\ndelete from test.hoge where pk = 1\n```\n\n\nAerospike\u306f\u30ad\u30fc\u306f\u4fdd\u5b58\u305b\u305a\u30c0\u30a4\u30b8\u30a7\u30b9\u30c8\u306e\u307f\u4fdd\u5b58\u3057\u3066\u3044\u308b\u305d\u3046\u3067\u3001AQL\u304b\u3089\u30ad\u30fc\u3092\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u3044\u3088\u3046\u3067\u3059\u3002\n\n\u3069\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u3082`WritePolicy.sendKey`\u306e\u3088\u3046\u306a\u8a2d\u5b9a\u304c\u3042\u308a\u3001\u3053\u3053\u3092true\u306b\u3059\u308c\u3070\u30ad\u30fc\u3082\u4fdd\u5b58\u3055\u308c\u53c2\u7167\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3089\u3057\u3044\u3067\u3059\u3002\n\uff08\u5168\u90e8[\u3053\u306e\u30d6\u30ed\u30b0](http://skatsuta.github.io/2015/10/20/aerospike-key/)\u3067\u8aac\u660e\u3055\u308c\u3066\u3044\u307e\u3057\u305fm(_ _)m\uff09\n\n## PHP\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\n[\u516c\u5f0f\u30de\u30cb\u30e5\u30a2\u30eb](http://skatsuta.github.io/2015/10/20/aerospike-key/)\n\n\u5f8c\u307b\u3069\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u307e\u3059\u3002\n\n", "tags": ["Aerospike"]}