{"context": "liblinear\u306finstance\u3084\u7279\u5fb4\u304c100\u4e07\u6841\u306e\u30c7\u30fc\u30bf\u3092\u7dda\u5f62\u5206\u96e2\u3059\u308b\u305f\u3081\u306e\u6a5f\u4f1a\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30ea\n\u3000\u3000https://www.csie.ntu.edu.tw/~cjlin/liblinear/\n\u7279\u5fb4\u3068\u3057\u3066\u306f\u3001\u7d20\u6027\u6570\u304c\u81a8\u5927\u306a\u3082\u306e\u3092\u65e9\u304f\u51e6\u7406\u3059\u308b\u3067\u304d\u308b\u306e\u304c\u4ed6\u3068\u306e\u9055\u3044\n\u3068\u306b\u304b\u304f\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306b\u5165\u308c\u3066\u3001\u6253\u3063\u3066\u307f\u308b\u3002\u307e\u305a\u306f\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3082\u306e\u3092\u5165\u308c\u308b\u3002\n\u30bf\u30fc\u30df\u30ca\u30eb (\u3042\u308b\u3044\u306f cmd) \u3092\u958b\u3044\u3066\u3059\u3050\u306b ipython \u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u306e\u3067\u306f\u306a\u304f\u3001\u4f5c\u696d\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea (\u30d5\u30a9\u30eb\u30c0) \u307e\u3067\u884c\u3063\u3066\u304b\u3089 ipython \u3092\u7acb\u3061\u4e0a\u3052\u308b\nimport sys\nsys.path.append('/Users/xxxx/Desktop/liblinear-2.1/python')\nfrom liblinearutil import *\nfrom liblinear import *\n\n\u4f7f\u3046\u30c7\u30fc\u30bf\u306f\u4ee5\u4e0b\u306enews20\nhttps://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/multiclass.html\nliblinear\u306e\u30c7\u30fc\u30bf\u306e\u5f62\u306f\u7279\u6b8a\u3002\u5b9f\u969b\u306b\u4f7f\u3046\u6642\u306f\u3001\u3053\u306e\u5f62\u306b\u52a0\u5de5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\ny, x = svm_read_problem('news20.txt')\n\ntrain\u2192predict\u3059\u308b\nIn [20]: len(y)\nOut[20]: 15935\n#15935\u500b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u306e\u3067\u30015000\u500b\u307e\u3067\u3092\u6559\u5e2b\u30c7\u30fc\u30bf\u3068\u3057\u3066\u5b66\u7fd2\u3055\u305b\u308b\nm = train(y[:5000], x[:5000])\nsave_model('news20.model', m)\n\n\noptimization finished, #iter = 1000\nWARNING: reaching max number of iterations\nUsing -s 2 may be faster (also see FAQ)\nObjective value = -38.201637\nnSV = 1028\n.*\noptimization finished, #iter = 17\nObjective value = -18.665411\nnSV = 903\n\n\u306a\u3093\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u304c\u3001\u5b66\u7fd2\u3067\u304d\u305f\u307f\u305f\u3044\n\u3067\u304d\u305f\u30e2\u30c7\u30eb\u3092save\u3057\u3066\u3001\u4e2d\u3092\u898b\u3066\u307f\u308b\u3002news20.model\u3068\u3057\u3066\u30d5\u30a9\u30eb\u30c0\u306b\u751f\u6210\u3055\u308c\u3066\u3044\u308b\nweight = open('news20.model').readlines()\nweight[:10]\n\n\n['solver_type L2R_L2LOSS_SVC_DUAL\\n',\n 'nr_class 20\\n',\n 'label 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20\\n',\n 'nr_feature 62017\\n',\n 'bias -1\\n',\n 'w\\n',\n '-0.339495505987624 -0.2729835882642053 -0.1726449590446147 -0.2479101793530862 -0.4274669775000416 -0.2412066297893888 -0.2293917779069297 -0.1540898055174211 -0.215426735582579 -0.2955027766952972 -0.07665514316560521 -0.2067955978156952 -0.2129682323900661 -0.3178416173675406 -0.1100450398128613 -0.1089058297966 0.2118441015471185 -0.1789025390838444 -0.2308991526979358 -0.3216302447541755 \\n',\n '0.03464116990799743 0.03296276686709169 -0.005516289618528965 0 0 8.487270131488089e-19 -0.03693284638681263 0 0 0 -0.0005436471560843025 0 4.336808689942018e-19 0 0 0 -1.355252715606881e-20 0.005881877772996123 0.0004078249397363432 -0.005592803559260878 \\n',\n '0 0 0 0 -0.006337527074141217 0 -0.01043809306013021 -0.02848401075118318 -0.02192217208113558 0 -0.002743696876587976 -0.002823046244597745 5.421010862427522e-19 0 -0.01184141317622985 -0.00327656833111874 -0.00300798970221013 0.07620931881353635 0.07709902339068471 -0.007496992406231962 \\n',\n '0 0.000336438903090087 -0.002105522336459381 -0.003408253600602967 0.04532864192038737 0.00358490636419236 -0.01288493688454648 -0.03829009043077678 -0.02192217208113558 0 -0.002743696876587976 -0.006148372938504376 0.04416917489366715 0 -0.03749035441444219 0.00486249738297638 -0.003188508027714593 0.1323725656877747 0.09645265180639011 -0.01123137774909418 \\n']\n\n\u30e9\u30d9\u30eb\u304c20\u500b\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u306b\u5bfe\u3057\u3066\u306e\u91cd\u307f\u306b\u6210\u3063\u3066\u3044\u308b\u3002\nhttp://qwone.com/~jason/20Newsgroups/\u3000\n\u306evocabulary.txt\u3000\u304cindex\u306b\u306a\u3063\u3066\u3044\u3044\u308b\u3002\u3053\u308c\u3067\u3069\u306e\u5358\u8a9e\u304c\u5206\u985e\u306b\u52b9\u3044\u3066\u3044\u308b\u304b\u304c\u308f\u304b\u308b\npredict\u3059\u308b\np_label, p_acc, p_val = predict(y[5000:], x[5000:], m)\n\n\nAccuracy = 74.3576% (8131/10935) (classification)\n\n\u7cbe\u5ea6\u306f74%\u3067\u307e\u305a\u307e\u305a\u3001\u3001\u3001\u306e\u3088\u3046\u3060\n\u4e88\u6e2c\u306e\u7d50\u679c\u3092\u898b\u3066\u307f\u308b\u3002\u307e\u305a\u306f\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u6b63\u89e3y\u3001\u4e88\u6e2c\u30e9\u30d9\u30ebp_label\u3001\u5404\u30e9\u30d9\u30eb\u306e\u30b9\u30b3\u30a2p_val\u3092\u5165\u308c\u308b\nimport pandas as pd\na=pd.DataFrame([y[5000:],p_label,p_val])\na[0]\na[0][2]\n\n\n0                                                    1\n1                                                    1\n2    [-0.434941406833, -2.4992939688, -1.9156773889...\nName: 0, dtype: object\n[-0.43494140683299093,\n -2.499293968803961,\n -1.9156773889387406,\n -1.652996684855934,\n -0.64663025115734,\n -1.981531321375946,\n -2.0506304515990794,\n -1.9845217707935987,\n -1.816531448715213,\n -1.9993917151454117,\n -2.6192052686130403,\n -2.375782174561902,\n -2.1841316767499994,\n -2.787946449405093,\n -1.981463462884227,\n -2.4769599630955956,\n -1.3508140247538216,\n -1.7235783924583472,\n -1.7785165908522975,\n -2.2096245620379604]\n\n1\u304c\u6700\u3082\u8fd1\u304f\u3001\u6b63\u89e3\u30c7\u30fc\u30bf\u3068\u540c\u3058\u306b\u306a\u3063\u3066\u3044\u308b\n\u3069\u3093\u3050\u3089\u3044\u3042\u3063\u3066\u3044\u308b\u306e\u304b\u898b\u3066\u307f\u308b\nb=pd.DataFrame([y[5000:],p_label])\nb\n\n\n0      1      2      3      4      5      6      7      8      9      \\\n0      1      2      3      4      5      6      7      8      9     10\n1      1      2      2      4      5      7      4      8      9      4\n...    10925  10926  10927  10928  10929  10930  10931  10932  10933  10934\n0  ...       18     19      7      9     15     16     17     18     19     17\n1  ...       18     18      7      9     15     16     17     15     19     17\n\n\u307e\u3042\u307e\u3042\u5206\u985e\u3067\u304d\u3066\u3044\u305d\u3046\n\u3061\u306a\u307f\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u306a\u3044\u3001\u3001\u3001\n\u305d\u3057\u3066\u3001\u554f\u984c\u306f\u3053\u306e\u30c7\u30fc\u30bf\u306e\u65b9\u3092\u3069\u3046\u4f5c\u308b\u304b\u3001\u3001\u3001\nhttps://github.com/zygmuntz/phraug\nhttps://github.com/zygmuntz/phraug/blob/master/csv2libsvm.py\nCSV\u304b\u3089\u306e\u5909\u63db\u306f\u3053\u308c\u3092\u898b\u3064\u3051\u305f\n\u3053\u3046\u3057\u305f\u3089\u3044\u3044\u3088\u3068\u304b\u3042\u3063\u305f\u3089\u662f\u975e\u6559\u3048\u3066\u304f\u3060\u3055\u3044\nliblinear\u306finstance\u3084\u7279\u5fb4\u304c100\u4e07\u6841\u306e\u30c7\u30fc\u30bf\u3092\u7dda\u5f62\u5206\u96e2\u3059\u308b\u305f\u3081\u306e\u6a5f\u4f1a\u5b66\u7fd2\u30e9\u30a4\u30d6\u30e9\u30ea\n\u3000\u3000https://www.csie.ntu.edu.tw/~cjlin/liblinear/\n\u7279\u5fb4\u3068\u3057\u3066\u306f\u3001\u7d20\u6027\u6570\u304c\u81a8\u5927\u306a\u3082\u306e\u3092\u65e9\u304f\u51e6\u7406\u3059\u308b\u3067\u304d\u308b\u306e\u304c\u4ed6\u3068\u306e\u9055\u3044\n\n\u3068\u306b\u304b\u304f\u30c7\u30b9\u30af\u30c8\u30c3\u30d7\u306b\u5165\u308c\u3066\u3001\u6253\u3063\u3066\u307f\u308b\u3002\u307e\u305a\u306f\u30a4\u30f3\u30dd\u30fc\u30c8\u3059\u308b\u3082\u306e\u3092\u5165\u308c\u308b\u3002\n\u30bf\u30fc\u30df\u30ca\u30eb (\u3042\u308b\u3044\u306f cmd) \u3092\u958b\u3044\u3066\u3059\u3050\u306b ipython \u30b3\u30de\u30f3\u30c9\u3092\u6253\u3064\u306e\u3067\u306f\u306a\u304f\u3001\u4f5c\u696d\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea (\u30d5\u30a9\u30eb\u30c0) \u307e\u3067\u884c\u3063\u3066\u304b\u3089 ipython \u3092\u7acb\u3061\u4e0a\u3052\u308b\n\n```py\nimport sys\nsys.path.append('/Users/xxxx/Desktop/liblinear-2.1/python')\nfrom liblinearutil import *\nfrom liblinear import *\n```\n\u4f7f\u3046\u30c7\u30fc\u30bf\u306f\u4ee5\u4e0b\u306enews20\nhttps://www.csie.ntu.edu.tw/~cjlin/libsvmtools/datasets/multiclass.html\nliblinear\u306e\u30c7\u30fc\u30bf\u306e\u5f62\u306f\u7279\u6b8a\u3002\u5b9f\u969b\u306b\u4f7f\u3046\u6642\u306f\u3001\u3053\u306e\u5f62\u306b\u52a0\u5de5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\n\n```py\ny, x = svm_read_problem('news20.txt')\n```\ntrain\u2192predict\u3059\u308b\n\n```py\nIn [20]: len(y)\nOut[20]: 15935\n#15935\u500b\u30c7\u30fc\u30bf\u304c\u3042\u308b\u306e\u3067\u30015000\u500b\u307e\u3067\u3092\u6559\u5e2b\u30c7\u30fc\u30bf\u3068\u3057\u3066\u5b66\u7fd2\u3055\u305b\u308b\nm = train(y[:5000], x[:5000])\nsave_model('news20.model', m)\n```\n>optimization finished, #iter = 1000\n\n>WARNING: reaching max number of iterations\n>Using -s 2 may be faster (also see FAQ)\n\n>Objective value = -38.201637\n>nSV = 1028\n>.*\n>optimization finished, #iter = 17\n>Objective value = -18.665411\n>nSV = 903\n\n\u306a\u3093\u304b\u3088\u304f\u308f\u304b\u3089\u306a\u3044\u304c\u3001\u5b66\u7fd2\u3067\u304d\u305f\u307f\u305f\u3044\n\u3067\u304d\u305f\u30e2\u30c7\u30eb\u3092save\u3057\u3066\u3001\u4e2d\u3092\u898b\u3066\u307f\u308b\u3002news20.model\u3068\u3057\u3066\u30d5\u30a9\u30eb\u30c0\u306b\u751f\u6210\u3055\u308c\u3066\u3044\u308b\n\n```\nweight = open('news20.model').readlines()\nweight[:10]\n```\n\n>['solver_type L2R_L2LOSS_SVC_DUAL\\n',\n 'nr_class 20\\n',\n 'label 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20\\n',\n 'nr_feature 62017\\n',\n 'bias -1\\n',\n 'w\\n',\n '-0.339495505987624 -0.2729835882642053 -0.1726449590446147 -0.2479101793530862 -0.4274669775000416 -0.2412066297893888 -0.2293917779069297 -0.1540898055174211 -0.215426735582579 -0.2955027766952972 -0.07665514316560521 -0.2067955978156952 -0.2129682323900661 -0.3178416173675406 -0.1100450398128613 -0.1089058297966 0.2118441015471185 -0.1789025390838444 -0.2308991526979358 -0.3216302447541755 \\n',\n '0.03464116990799743 0.03296276686709169 -0.005516289618528965 0 0 8.487270131488089e-19 -0.03693284638681263 0 0 0 -0.0005436471560843025 0 4.336808689942018e-19 0 0 0 -1.355252715606881e-20 0.005881877772996123 0.0004078249397363432 -0.005592803559260878 \\n',\n '0 0 0 0 -0.006337527074141217 0 -0.01043809306013021 -0.02848401075118318 -0.02192217208113558 0 -0.002743696876587976 -0.002823046244597745 5.421010862427522e-19 0 -0.01184141317622985 -0.00327656833111874 -0.00300798970221013 0.07620931881353635 0.07709902339068471 -0.007496992406231962 \\n',\n '0 0.000336438903090087 -0.002105522336459381 -0.003408253600602967 0.04532864192038737 0.00358490636419236 -0.01288493688454648 -0.03829009043077678 -0.02192217208113558 0 -0.002743696876587976 -0.006148372938504376 0.04416917489366715 0 -0.03749035441444219 0.00486249738297638 -0.003188508027714593 0.1323725656877747 0.09645265180639011 -0.01123137774909418 \\n']\n\n\u30e9\u30d9\u30eb\u304c20\u500b\u3042\u308a\u3001\u305d\u308c\u305e\u308c\u306b\u5bfe\u3057\u3066\u306e\u91cd\u307f\u306b\u6210\u3063\u3066\u3044\u308b\u3002\nhttp://qwone.com/~jason/20Newsgroups/\u3000\n\u306evocabulary.txt\u3000\u304cindex\u306b\u306a\u3063\u3066\u3044\u3044\u308b\u3002\u3053\u308c\u3067\u3069\u306e\u5358\u8a9e\u304c\u5206\u985e\u306b\u52b9\u3044\u3066\u3044\u308b\u304b\u304c\u308f\u304b\u308b\n\npredict\u3059\u308b\n\n```\np_label, p_acc, p_val = predict(y[5000:], x[5000:], m)\n```\n>Accuracy = 74.3576% (8131/10935) (classification)\n\n\u7cbe\u5ea6\u306f74%\u3067\u307e\u305a\u307e\u305a\u3001\u3001\u3001\u306e\u3088\u3046\u3060\n\n\u4e88\u6e2c\u306e\u7d50\u679c\u3092\u898b\u3066\u307f\u308b\u3002\u307e\u305a\u306f\u5206\u304b\u308a\u3084\u3059\u3044\u3088\u3046\u306b\u30c7\u30fc\u30bf\u30d5\u30ec\u30fc\u30e0\u306b\u6b63\u89e3y\u3001\u4e88\u6e2c\u30e9\u30d9\u30ebp_label\u3001\u5404\u30e9\u30d9\u30eb\u306e\u30b9\u30b3\u30a2p_val\u3092\u5165\u308c\u308b\n\n```\nimport pandas as pd\na=pd.DataFrame([y[5000:],p_label,p_val])\na[0]\na[0][2]\n```\n>0                                                    1\n1                                                    1\n2    [-0.434941406833, -2.4992939688, -1.9156773889...\nName: 0, dtype: object\n\n\n>[-0.43494140683299093,\n -2.499293968803961,\n -1.9156773889387406,\n -1.652996684855934,\n -0.64663025115734,\n -1.981531321375946,\n -2.0506304515990794,\n -1.9845217707935987,\n -1.816531448715213,\n -1.9993917151454117,\n -2.6192052686130403,\n -2.375782174561902,\n -2.1841316767499994,\n -2.787946449405093,\n -1.981463462884227,\n -2.4769599630955956,\n -1.3508140247538216,\n -1.7235783924583472,\n -1.7785165908522975,\n -2.2096245620379604]\n\n1\u304c\u6700\u3082\u8fd1\u304f\u3001\u6b63\u89e3\u30c7\u30fc\u30bf\u3068\u540c\u3058\u306b\u306a\u3063\u3066\u3044\u308b\n\n\u3069\u3093\u3050\u3089\u3044\u3042\u3063\u3066\u3044\u308b\u306e\u304b\u898b\u3066\u307f\u308b\n\n```\nb=pd.DataFrame([y[5000:],p_label])\nb\n```\n\n>   0      1      2      3      4      5      6      7      8      9      \\\n0      1      2      3      4      5      6      7      8      9     10\n1      1      2      2      4      5      7      4      8      9      4\n\n>   ...    10925  10926  10927  10928  10929  10930  10931  10932  10933  10934\n0  ...       18     19      7      9     15     16     17     18     19     17\n1  ...       18     18      7      9     15     16     17     15     19     17\n\n\n\u307e\u3042\u307e\u3042\u5206\u985e\u3067\u304d\u3066\u3044\u305d\u3046\n\n\u3061\u306a\u307f\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u306f\u3088\u304f\u5206\u304b\u3089\u306a\u3044\u306a\u3044\u3001\u3001\u3001\n\u305d\u3057\u3066\u3001\u554f\u984c\u306f\u3053\u306e\u30c7\u30fc\u30bf\u306e\u65b9\u3092\u3069\u3046\u4f5c\u308b\u304b\u3001\u3001\u3001\n\nhttps://github.com/zygmuntz/phraug\nhttps://github.com/zygmuntz/phraug/blob/master/csv2libsvm.py\nCSV\u304b\u3089\u306e\u5909\u63db\u306f\u3053\u308c\u3092\u898b\u3064\u3051\u305f\n\n\u3053\u3046\u3057\u305f\u3089\u3044\u3044\u3088\u3068\u304b\u3042\u3063\u305f\u3089\u662f\u975e\u6559\u3048\u3066\u304f\u3060\u3055\u3044\n", "tags": ["liblinear", "Python", "\u6a5f\u68b0\u5b66\u7fd2", "svm"]}