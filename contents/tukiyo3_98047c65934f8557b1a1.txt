{"context": " More than 1 year has passed since last update.\n\nThe Spamhaus Project - Frequently Asked Questions (FAQ)\u65e5\u672c\u8a9e\u8a33\nRBL.JP\n\u5236\u9650\u306e\u8a2d\u5b9a\nCBL\nSpamhaus\u306eXBL\u306b\u3064\u3044\u3066\u30c6\u30ad\u30c8\u30a6\u306b\u7ffb\u8a33\u3057\u3066\u307f\u305f | \u304d\u305f\u3053\u308c\uff0e\u3042\u3058\u3042\uff0e\u3076\u308d\u3050\u3002\n\n\n/etc/postfix/main.cf\nsmtpd_recipient_restrictions =\n  ...\n+    reject_rbl_client all.rbl.jp\n+    reject_rbl_client bl.spamcop.net,\n+    reject_rbl_client zen.spamhaus.org,\n  ...\n\n\n\nsyntax\u00a0check\n/usr/sbin/postfix check\nservice postfix restart\n\n\n\nreject\u3057\u305f\u30e1\u30fc\u30eb\u304c\u3042\u308b\u304b\u691c\u7d22\ngrep \"reject:\" /var/log/maillog\n\n\n\nSpamhaus\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\n\u516c\u5f0fFAQ\n\n11.22.33.44\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u30c1\u30a7\u30c3\u30af\n*/10 * * * * /usr/bin/dig +short 44.33.22.11.zen.spamhaus.org\n\n\n\u5fdc\u7b54\u304c\u3042\u308c\u3070\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3002\n\u4f8b: 127.0.0.4\u3068\u8fd4\u7b54\u304c\u6765\u308b\u3002\n\n\u5927\u91cf\u306b\u30c1\u30a7\u30c3\u30af\u3057\u305f\u3044\u5834\u5408\n\nchecker.sh\n#!/bin/sh\n\nreverse_ip() {\n    echo $1 | awk -F . '{printf \"%d.%d.%d.%d\", $4,$3,$2,$1}'\n}\n\ncheck_spamhaus() {\n  for i in `seq -w $2 $3`\n  do\n    RESULT=$(dig +short ${i}.${1}.zen.spamhaus.org)\n    if [ ! -z \"$RESULT\" ];then\n        echo -n \"http://www.spamhaus.org/query/bl?ip=\"\n        reverse_ip \"${i}.$1\"\n    fi\n  done\n}\n\n\ncheck_spamhaus \"33.22.11\" 1 254\n\n11.22.33.1\uff5e.254\u307e\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u308b\u3002\n* [The Spamhaus Project - Frequently Asked Questions (FAQ)](http://www.spamhaus.org/faq/pblfaqjp.html)\u65e5\u672c\u8a9e\u8a33\n* [RBL.JP](http://www.rbl.jp)\n* [\u5236\u9650\u306e\u8a2d\u5b9a](http://unixservermemo.web.fc2.com/sv/postfix-maincf-seigen.htm)\n* [CBL](http://cbl.abuseat.org/)\n* [Spamhaus\u306eXBL\u306b\u3064\u3044\u3066\u30c6\u30ad\u30c8\u30a6\u306b\u7ffb\u8a33\u3057\u3066\u307f\u305f | \u304d\u305f\u3053\u308c\uff0e\u3042\u3058\u3042\uff0e\u3076\u308d\u3050\u3002](http://blog.kitakore.asia/?p=828)\n\n```diff:/etc/postfix/main.cf\nsmtpd_recipient_restrictions =\n  ...\n+    reject_rbl_client all.rbl.jp\n+    reject_rbl_client bl.spamcop.net,\n+    reject_rbl_client zen.spamhaus.org,\n  ...\n```\n\n```bash:syntax&nbsp;check\n/usr/sbin/postfix check\nservice postfix restart\n```\n\n```bash:reject\u3057\u305f\u30e1\u30fc\u30eb\u304c\u3042\u308b\u304b\u691c\u7d22\ngrep \"reject:\" /var/log/maillog\n```\n\n## Spamhaus\u306b\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u304b\u30c1\u30a7\u30c3\u30af\n\n\n[\u516c\u5f0fFAQ](http://www.spamhaus.org/faq/section/DNSBL%20Usage)\n\n```bash:11.22.33.44\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u30c1\u30a7\u30c3\u30af\n*/10 * * * * /usr/bin/dig +short 44.33.22.11.zen.spamhaus.org\n```\n\n\u5fdc\u7b54\u304c\u3042\u308c\u3070\u767b\u9332\u3055\u308c\u3066\u3044\u308b\u3002\n\n\u4f8b: `127.0.0.4`\u3068\u8fd4\u7b54\u304c\u6765\u308b\u3002\n\n### \u5927\u91cf\u306b\u30c1\u30a7\u30c3\u30af\u3057\u305f\u3044\u5834\u5408\n\n```bash:checker.sh\n#!/bin/sh\n\nreverse_ip() {\n    echo $1 | awk -F . '{printf \"%d.%d.%d.%d\", $4,$3,$2,$1}'\n}\n\ncheck_spamhaus() {\n  for i in `seq -w $2 $3`\n  do\n    RESULT=$(dig +short ${i}.${1}.zen.spamhaus.org)\n    if [ ! -z \"$RESULT\" ];then\n        echo -n \"http://www.spamhaus.org/query/bl?ip=\"\n        reverse_ip \"${i}.$1\"\n    fi\n  done\n}\n```\n\n```bash:\ncheck_spamhaus \"33.22.11\" 1 254\n```\n\n`11.22.33.1\uff5e.254`\u307e\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u308b\u3002\n", "tags": ["postfix", "spamhaus"]}