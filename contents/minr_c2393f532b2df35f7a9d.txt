{"tags": ["PowerShell", "cmd", "Windows10"], "context": " More than 1 year has passed since last update.Windows \u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8 \u30dd\u30b1\u30c3\u30c8\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08\u66f8\u7c4d\uff09\u3092\u8aad\u3093\u3067\u3044\u308b\u3068\u300c\u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u300d\u3068\u3044\u3046\u7528\u8a9e\u304c\u767b\u5834\u3057\u3001\u6c17\u306b\u306a\u3063\u305f\u306e\u3067\u8272\u3005\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u3063\u3066\u4f55\uff1f\n\uff11\uff0eNTFS\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30d5\u30a1\u30a4\u30eb\uff0f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3067\u304d\u308b\u3001\u96a0\u3057\u30d5\u30a1\u30a4\u30eb\n\uff12\uff0e\uff11\u3064\u306e\u30d5\u30a1\u30a4\u30eb\uff0f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5bfe\u3057\u3066\u8907\u6570\u306eADS\u3092\u4fdd\u5b58\u3067\u304d\u308b\n\uff13\uff0e\u7528\u9014\u306e\u4f8b\u3068\u3057\u3066\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\u6642\u306b\u8b66\u544a\u753b\u9762\u3092\u8868\u793a\u3055\u305b\u308b\u3001\u306a\u3069\n\uff14\uff0ePoison Ivy\uff08\u30c8\u30ed\u30a4\u306e\u6728\u99ac\uff09\u306a\u3069\u306e\u30de\u30eb\u30a6\u30a7\u30a2\u306e\u96a0\u3057\u5834\u6240\u3068\u3057\u3066\u3082\u60aa\u7528\u3055\u308c\u3066\u3044\u308b\u3089\u3057\u3044\n\uff15\uff0estreams.exe\u3067ADS\u306e\u691c\u7d22\uff0f\u524a\u9664\u304c\u53ef\u80fd\n\uff16\uff0eWindows\u6a19\u6e96\u6a5f\u80fd(\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3001PowerShell\u542b\u3080\uff09\u3067\u3082\u3001ADS\u306e\u4f5c\u6210\uff0f\u691c\u7d22\uff0f\u524a\u9664\u304c\u53ef\u80fd\n\u4eca\u56de\u306f\u3001\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3068PowerShell\u3092\u5229\u7528\u3057\u3066ADS\u306e\u4f5c\u6210\uff0f\u691c\u7d22\uff0f\u524a\u9664\u3092\u884c\u3063\u3066\u307f\u305f\n\u203bstreams.exe\u3092\u5229\u7528\u3057\u305fADS\u306e\u691c\u7d22\uff0f\u524a\u9664\u306e\u65b9\u6cd5\u306f\u3001\u53c2\u8003\u8a18\u4e8b\u3092\u53c2\u7167\n\n\u5b9f\u884c\u74b0\u5883\nOS\uff1aWindows 10 Home\uff0864bit\uff09\nPowerShell\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a5.0\n\n\u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\nC:\\test>mkdir foo\n\nC:\\test>echo bar>foo:hoge.txt\n\u3000\n\n\n\u4e0a\u8a18\u4f8b\u3067\u306f\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30eafoo\u3092\u4f5c\u6210\u5f8c\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30eafoo\u306b\u300cbar\u300d\u3068\u3044\u3046\u5185\u5bb9\u304c\u66f8\u304b\u308c\u305f\u300choge.txt\u300d\u3068\u3044\u3046\u540d\u79f0\u306eADS\u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\n\n\u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u306e\u691c\u7d22\nADS\u3092\u542b\u3080\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u3092\u8868\u793a\u3055\u305b\u305f\u3044\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\nc:\\test>dir /r\n \u30c9\u30e9\u30a4\u30d6 C \u306e\u30dc\u30ea\u30e5\u30fc\u30e0 \u30e9\u30d9\u30eb\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n \u30dc\u30ea\u30e5\u30fc\u30e0 \u30b7\u30ea\u30a2\u30eb\u756a\u53f7\u306f 344F-DD0A \u3067\u3059\n\n c:\\test \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n\n2015/11/01  01:19    <DIR>          .\n2015/11/01  01:19    <DIR>          ..\n2015/11/01  01:16    <DIR>          foo\n                                  5 foo:hoge.txt:$DATA\n               0 \u500b\u306e\u30d5\u30a1\u30a4\u30eb                   0 \u30d0\u30a4\u30c8\n               3 \u500b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea  68,721,668,096 \u30d0\u30a4\u30c8\u306e\u7a7a\u304d\u9818\u57df\n\n\nADS\u306e\u884c\u3060\u3051\u3092\u62bd\u51fa\u3057\u305f\u3044\u5834\u5408\u3001PowerShell\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\nPowerShell\nPS C:\\test> cmd /c 'dir /r' | ?{$_.Contains('$DATA')}\n                                  5 foo:hoge.txt:$DATA\n\n\nADS\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\n\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\nC:\\test>more < foo:hoge.txt\nbar\n\n\n\n\u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u306e\u524a\u9664\nADS\u3092\u524a\u9664\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\nPowerShell\nPS C:\\test> Remove-Item foo -Stream hoge.txt\n\n\n\n\u307e\u3068\u3081\n\u6d3b\u7528\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u4f8b\u3048\u3070\u3001\u958b\u767a\u6642\u306b\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\uff08PHP\u306a\u3069\uff09\u306b\u30ea\u30d3\u30b8\u30e7\u30f3\u756a\u53f7\u306a\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u3092ADS\u3068\u3057\u3066\u4ed8\u4e0e\u3057\u3066\u304a\u3051\u3070\u3001\u4e07\u304c\u4e00\u3001\u30c7\u30d7\u30ed\u30a4\u5f8c\u306b\u73fe\u5730\u3067\u30bd\u30fc\u30b9\u5909\u66f4\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u958b\u767a\u74b0\u5883\u3078\u306e\u30de\u30fc\u30b8\u304c\u3057\u3084\u3059\u304f\u306a\u308a\u305d\u3046\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u305f\u3060\u3057\u3001\u30de\u30eb\u30a6\u30a7\u30a2\u306b\u60aa\u7528\u3055\u308c\u308b\u306a\u3069\u306e\u30b1\u30fc\u30b9\u3082\u767a\u751f\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001ADS\u306f\u614e\u91cd\u306b\u6271\u3063\u305f\u65b9\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\n\u53c2\u8003\nWindows \u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8 \u30dd\u30b1\u30c3\u30c8\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08\u66f8\u7c4d\uff09\nstreams\u30b3\u30de\u30f3\u30c9\u3067NTFS\u306e\u4ee3\u66ff\u30c7\u30fc\u30bf\u30fb\u30b9\u30c8\u30ea\u30fc\u30e0\u60c5\u5831\u3092\u8868\u793a\uff0f\u524a\u9664\u3059\u308b\nPoison Ivy\u306b\u307f\u308b\u30de\u30eb\u30a6\u30a7\u30a2\u306e\u96a0\u3057\u5834\u6240\n[Windows \u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8 \u30dd\u30b1\u30c3\u30c8\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08\u66f8\u7c4d\uff09](http://www.amazon.co.jp/Windows-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88-%E3%83%9D%E3%82%B1%E3%83%83%E3%83%88%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9-%E5%B1%B1%E8%BF%91-%E6%85%B6%E4%B8%80/dp/4774149543)\u3092\u8aad\u3093\u3067\u3044\u308b\u3068\u300c\u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u300d\u3068\u3044\u3046\u7528\u8a9e\u304c\u767b\u5834\u3057\u3001\u6c17\u306b\u306a\u3063\u305f\u306e\u3067\u8272\u3005\u8abf\u3079\u3066\u307f\u307e\u3057\u305f\u3002\n\n## \u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u3063\u3066\u4f55\uff1f\n\uff11\uff0eNTFS\u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u306e\u30d5\u30a1\u30a4\u30eb\uff0f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u4fdd\u5b58\u3067\u304d\u308b\u3001\u96a0\u3057\u30d5\u30a1\u30a4\u30eb\n\uff12\uff0e\uff11\u3064\u306e\u30d5\u30a1\u30a4\u30eb\uff0f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u5bfe\u3057\u3066\u8907\u6570\u306eADS\u3092\u4fdd\u5b58\u3067\u304d\u308b\n\uff13\uff0e\u7528\u9014\u306e\u4f8b\u3068\u3057\u3066\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\u6642\u306b\u8b66\u544a\u753b\u9762\u3092\u8868\u793a\u3055\u305b\u308b\u3001\u306a\u3069\n\uff14\uff0ePoison Ivy\uff08\u30c8\u30ed\u30a4\u306e\u6728\u99ac\uff09\u306a\u3069\u306e\u30de\u30eb\u30a6\u30a7\u30a2\u306e\u96a0\u3057\u5834\u6240\u3068\u3057\u3066\u3082\u60aa\u7528\u3055\u308c\u3066\u3044\u308b\u3089\u3057\u3044\n\uff15\uff0e[streams.exe](https://technet.microsoft.com/ja-jp/sysinternals/bb897440)\u3067ADS\u306e\u691c\u7d22\uff0f\u524a\u9664\u304c\u53ef\u80fd\n\uff16\uff0eWindows\u6a19\u6e96\u6a5f\u80fd(\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3001PowerShell\u542b\u3080\uff09\u3067\u3082\u3001ADS\u306e\u4f5c\u6210\uff0f\u691c\u7d22\uff0f\u524a\u9664\u304c\u53ef\u80fd\n\n\n\u4eca\u56de\u306f\u3001\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3068PowerShell\u3092\u5229\u7528\u3057\u3066ADS\u306e\u4f5c\u6210\uff0f\u691c\u7d22\uff0f\u524a\u9664\u3092\u884c\u3063\u3066\u307f\u305f\n\u203b[streams.exe](https://technet.microsoft.com/ja-jp/sysinternals/bb897440)\u3092\u5229\u7528\u3057\u305fADS\u306e\u691c\u7d22\uff0f\u524a\u9664\u306e\u65b9\u6cd5\u306f\u3001[\u53c2\u8003\u8a18\u4e8b](http://www.atmarkit.co.jp/fwin2k/win2ktips/1363streams/streams.html)\u3092\u53c2\u7167\n\n## \u5b9f\u884c\u74b0\u5883\nOS\uff1aWindows 10 Home\uff0864bit\uff09\nPowerShell\u30d0\u30fc\u30b8\u30e7\u30f3\uff1a5.0\n\n\n## \u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u306e\u4f5c\u6210\n\n```bat:\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\nC:\\test>mkdir foo\n\nC:\\test>echo bar>foo:hoge.txt\n\u3000\n```\n\n\u4e0a\u8a18\u4f8b\u3067\u306f\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30eafoo\u3092\u4f5c\u6210\u5f8c\u3001\u30c7\u30a3\u30ec\u30af\u30c8\u30eafoo\u306b\u300cbar\u300d\u3068\u3044\u3046\u5185\u5bb9\u304c\u66f8\u304b\u308c\u305f\u300choge.txt\u300d\u3068\u3044\u3046\u540d\u79f0\u306eADS\u3092\u4fdd\u5b58\u3057\u3066\u3044\u308b\n\n## \u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u306e\u691c\u7d22\n\nADS\u3092\u542b\u3080\u30d5\u30a1\u30a4\u30eb\u4e00\u89a7\u3092\u8868\u793a\u3055\u305b\u305f\u3044\u5834\u5408\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\n```bat:\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\nc:\\test>dir /r\n \u30c9\u30e9\u30a4\u30d6 C \u306e\u30dc\u30ea\u30e5\u30fc\u30e0 \u30e9\u30d9\u30eb\u304c\u3042\u308a\u307e\u305b\u3093\u3002\n \u30dc\u30ea\u30e5\u30fc\u30e0 \u30b7\u30ea\u30a2\u30eb\u756a\u53f7\u306f 344F-DD0A \u3067\u3059\n\n c:\\test \u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\n\n2015/11/01  01:19    <DIR>          .\n2015/11/01  01:19    <DIR>          ..\n2015/11/01  01:16    <DIR>          foo\n                                  5 foo:hoge.txt:$DATA\n               0 \u500b\u306e\u30d5\u30a1\u30a4\u30eb                   0 \u30d0\u30a4\u30c8\n               3 \u500b\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea  68,721,668,096 \u30d0\u30a4\u30c8\u306e\u7a7a\u304d\u9818\u57df\n```\n\nADS\u306e\u884c\u3060\u3051\u3092\u62bd\u51fa\u3057\u305f\u3044\u5834\u5408\u3001PowerShell\u3068\u7d44\u307f\u5408\u308f\u305b\u3066\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\n```ps1:PowerShell\nPS C:\\test> cmd /c 'dir /r' | ?{$_.Contains('$DATA')}\n                                  5 foo:hoge.txt:$DATA\n```\n\n\nADS\u306e\u5185\u5bb9\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\n```bat:\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\nC:\\test>more < foo:hoge.txt\nbar\n```\n\n\n## \u4ee3\u66ff\u30c7\u30fc\u30bf\u30b9\u30c8\u30ea\u30fc\u30e0\uff08ADS\uff09\u306e\u524a\u9664\n\nADS\u3092\u524a\u9664\u3057\u305f\u3044\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3088\u3044\n\n```ps1:PowerShell\nPS C:\\test> Remove-Item foo -Stream hoge.txt\n```\n\n## \u307e\u3068\u3081\n\u6d3b\u7528\u65b9\u6cd5\u3068\u3057\u3066\u306f\u3001\u4f8b\u3048\u3070\u3001\u958b\u767a\u6642\u306b\u3001\u30bd\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\uff08PHP\u306a\u3069\uff09\u306b\u30ea\u30d3\u30b8\u30e7\u30f3\u756a\u53f7\u306a\u3069\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u60c5\u5831\u3092ADS\u3068\u3057\u3066\u4ed8\u4e0e\u3057\u3066\u304a\u3051\u3070\u3001\u4e07\u304c\u4e00\u3001\u30c7\u30d7\u30ed\u30a4\u5f8c\u306b\u73fe\u5730\u3067\u30bd\u30fc\u30b9\u5909\u66f4\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u958b\u767a\u74b0\u5883\u3078\u306e\u30de\u30fc\u30b8\u304c\u3057\u3084\u3059\u304f\u306a\u308a\u305d\u3046\u3060\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u305f\u3060\u3057\u3001\u30de\u30eb\u30a6\u30a7\u30a2\u306b\u60aa\u7528\u3055\u308c\u308b\u306a\u3069\u306e\u30b1\u30fc\u30b9\u3082\u767a\u751f\u3057\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3001ADS\u306f\u614e\u91cd\u306b\u6271\u3063\u305f\u65b9\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\n\n\n## \u53c2\u8003\n[Windows \u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8 \u30dd\u30b1\u30c3\u30c8\u30ea\u30d5\u30a1\u30ec\u30f3\u30b9\uff08\u66f8\u7c4d\uff09](http://www.amazon.co.jp/Windows-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88-%E3%83%9D%E3%82%B1%E3%83%83%E3%83%88%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9-%E5%B1%B1%E8%BF%91-%E6%85%B6%E4%B8%80/dp/4774149543)\n[streams\u30b3\u30de\u30f3\u30c9\u3067NTFS\u306e\u4ee3\u66ff\u30c7\u30fc\u30bf\u30fb\u30b9\u30c8\u30ea\u30fc\u30e0\u60c5\u5831\u3092\u8868\u793a\uff0f\u524a\u9664\u3059\u308b](http://www.atmarkit.co.jp/fwin2k/win2ktips/1363streams/streams.html)\n[Poison Ivy\u306b\u307f\u308b\u30de\u30eb\u30a6\u30a7\u30a2\u306e\u96a0\u3057\u5834\u6240](http://security.excite.co.jp/fsecureblog/article/1483)\n"}