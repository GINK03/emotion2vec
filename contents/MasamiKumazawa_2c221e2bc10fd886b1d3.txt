{"context": "\n\n\u6d41\u308c\u30fb\u4e88\u5b9a\n\n\u7d20\u306eVirtualHost\u3092\u8a2d\u5b9a\nGem\u3067\u672c\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\napache\u7528\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\napache\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u8a2d\u5b9a\n\u30c6\u30b9\u30c8\u7528\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u8a2d\u5b9a\nRackApp\u3067\u8d77\u52d5\u30c6\u30b9\u30c8\n\n\n\u74b0\u5883\nMacOS OSX El Capitan 10.11.6\nRuby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]\nGem -v 2.6.6\napachectl -v\nServer version: Apache/2.4.23 (Unix)\nServer built:   Aug  8 2016 16:31:34\n\n\u7d20\u306eVirtualHost\u3092\u8a2d\u5b9a\n\u554f\u984c\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u3001Passenger\u306e\u554f\u984c\u306a\u306e\u304b\u3001Apache\u306eVirtualHost\u304c\u554f\u984c\u306a\u306e\u304b\u3092\u5207\u308a\u5206\u3051\u308b\u305f\u3081\u3001\u5148\u306b\u7d20\u306eVirtualHost\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n/etc/apache2/httpd.conf\u306e\u4ee5\u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3059(449\u884c\u76ee\u4ed8\u8fd1\uff09\nbash Include /private/etc/apache2/extra/httpd-vhosts.conf\n\n\u524d\u7f6e\u304d\n\u6c17\u4ed8\u304b\u306a\u304b\u3063\u305f\u304c\u3001Marvericks\u3042\u305f\u308a\u304b\u3089Web\u5171\u6709\u3084\u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306eSites\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u305f\u3088\u3046\u3060\u3002\n\u95a2\u9023\u3057\u3066\u3001\u4e00\u5ea6\u3082Apache\u3092\u7acb\u3061\u4e0a\u3052\u305f\u3053\u3068\u304c\u306a\u3051\u308c\u3070\u3001\u81ea\u52d5\u3067\u306fApache\u306f\u52d5\u3044\u3066\u3044\u306a\u3044\u3088\u3046\u3060\u3002\n\u305f\u3060\u3001\u4e00\u5ea6 sudo apachectrl start \u3068\u3059\u308b\u3068\u3001\u6b21\u56de\u304b\u3089\u306f\u52dd\u624b\u306b\u8d77\u52d5\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3060\u3002\n\nhttpd.conf\u306e\u7de8\u96c6\n/etc/apache2/httpd.conf\u306e499\u884c\u76ee\u4ed8\u8fd1\u306b\u3042\u308bVirtualHost\u306e\u8aad\u307f\u8fbc\u307f\u8a2d\u5b9a\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u3066include\u3092\u6709\u52b9\u306b\u3057\u3066\u3001Apache\u3092\u518d\u8d77\u52d5\u3055\u305b\u308b\u3002\nbash Include /private/etc/apache2/extra/httpd-vhosts.conf\n\nlocalhost\u306e\u8868\u793a\nVirtualHost\u304c\u6709\u52b9\u306b\u306a\u308b\u3068\u3001localhost\u306e\u304cDocumentRoot\u304c\n/etc/apache2/extra/httpd-vhosts.conf\u306b\u3088\u3063\u3066\u66f8\u304d\u63db\u3048\u3089\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u3053\u308c\u3092\u3082\u3068\u3082\u3068\u306eIt works!\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u3066\u307f\u308b\u3002\nspirytus:apache2 saima$ cd /etc/apache2/\nspirytus:apache2 saima$ mv extra/httpd-vhosts.conf extra/httpd-vhosts.conf.dev\nspirytus:apache2 saima$ vi extra/httpd-vhosts.conf\n\n\nextra/httpd-vhosts.conf\n<VirtualHost *:80>\n    ServerAdmin webmaster@dummy-host.example.com\n    DocumentRoot \"/Library/WebServer/Documents\"\n    ServerName localhost\n    ServerAlias www.localhost\n    ErrorLog \"/private/var/log/apache2/dummy-host.example.com-error_log\"\n    CustomLog \"/private/var/log/apache2/dummy-host.example.com-access_log\" common\n</VirtualHost>\n\n\n\nVirtualHost\nlocal.test.com\u3068\u3044\u3046\u30db\u30b9\u30c8\u3067\u52d5\u304b\u3057\u3066\u307f\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u3092\u8ffd\u52a0\nApache\u306e2.2\u7cfb\u30682.4\u7cfb\u3067\u306f\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306e\u66f8\u304d\u65b9\u304c\u30ac\u30e9\u30c3\u3068\u5909\u308f\u3063\u3066\u3044\u308b\u306e\u3067\u6ce8\u610f\n\nextra/httpd-vhosts.conf\n<VirtualHost *:80>\n    DocumentRoot \"/Users/saima/Develop/vhost\"\n    ServerName local.test.com\n    ErrorLog \"/private/var/log/apache2/local.test.com-error_log\"\n    CustomLog \"/private/var/log/apache2/local.test.com-access_log\" common   \n    <Directory \"/Users/saima/Develop/vhost\">\n        Require all granted\n    </Directory>    \n</VirtualHost>\n\n\n\nGem\u3067\u672c\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nGem\u3060\u3051\u3067\u666e\u901a\u306b\u5165\u308b\u3089\u3057\u3044\nspirytus:~ saima$ sudo gem install passenger\nFetching: passenger-5.0.30.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed passenger-5.0.30\nParsing documentation for passenger-5.0.30\nInstalling ri documentation for passenger-5.0.30\nDone installing documentation for passenger after 108 seconds\n1 gem installed\n\n\nOSX Sierra\nMarverics\u307e\u3067\u306fBash'spirytus:~ saima$ passenger-install-apache2-module'\u3067\u666e\u901a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u3068\u8a18\u61b6\u3057\u3066\u3044\u308b\u304c\u3001Sierra\u306b\u30a2\u30d7\u30c7\u3057\u305f\u304b\u3089\u3001xcode-select --install\u3092\u3057\u3066\u3001APR\u3068APU\u3092\u5165\u308c\u308d\u3068\u8a00\u308f\u308c\u308b\u304c\u3001Sierra\u304b\u3089xcode-select\u306bAPR\u3068APU\u304c\u542b\u307e\u308c\u306a\u304f\u306a\u3063\u305f\u3088\u3046\u3060\u3002\n...(\u7565)\n      Location: /usr/local/include/ruby-2.3.0/ruby.h\n * Checking for rack...\n      Found: yes\n * Checking for Apache Portable Runtime (APR) development headers...\n      Found: no\n * Checking for Apache Portable Runtime Utility (APU) development headers...\n      Found: no\n\nSome required software is not installed.\nBut don't worry, this installer will tell you how to install them.\nPress Enter to continue, or Ctrl-C to abort.\n\n--------------------------------------------\n\nInstallation instructions for required software\n\n * To install Apache Portable Runtime (APR) development headers:\n   Please install the Xcode command line tools: sudo xcode-select --install\n\n * To install Apache Portable Runtime Utility (APU) development headers:\n   Please install the Xcode command line tools: sudo xcode-select --install\n\nIf the aforementioned instructions didn't solve your problem, then please take\na look at our documentation for troubleshooting tips:\n\n  https://www.phusionpassenger.com/library/install/apache/\n  https://www.phusionpassenger.com/library/admin/apache/troubleshooting/\n\n\u305d\u3053\u3067\u3001ARP\u3068APU\u306e\u30bd\u30fc\u30b9\u3092Apache\u306e\uff28\uff30\u304b\u3089\u3044\u305f\u3060\u3044\u3066\u6765\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u3002\nARP\u3068APU\u306f\u57fa\u672c\u7684\u306b./configure,make,make install\u3067\u304d\u308b\u304c\u3001APU\u306econfigure\u306b\u306fAPR\u306e\u30d1\u30b9\u3092\u6559\u3048\u3066\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u306e\u3067\u3001./configure --with-apr=/usr/local/apr\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u3002\n\u3053\u308c\u3060\u3051\u3067\u306fpassenger-install-apache2-module\u306fARP\u3068APU\u3092\u8a8d\u8b58\u3057\u3066\u304f\u308c\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001\u3053\u3053\u3092\u53c2\u8003\u306bAPR\u3068APU\u306e\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3057\u305f\u3002\n# \u73fe\u5728\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u78ba\u8a8d\nspirytus:~ saima$ ls /Applications/Xcode.app/Contents/Developer/Toolchains/\nSwift_2.3.xctoolchain       XcodeDefault.xctoolchain\n\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\nspirytus:~ saima$ sudo mkdir -p /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.12.xctoolchain/usr/local/bin/\n\n# apr-1-conf\u306e\u30ea\u30f3\u30af\nspirytus:~ saima$ sudo ln -s /usr/local/apr/bin/apr-1-config /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.12.xctoolchain/usr/local/bin/\n\n# apu-1-conf\u306e\u30ea\u30f3\u30af\nspirytus:~ saima$ sudo ln -s /usr/local/apr/bin/apu-1-config /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.12.xctoolchain/usr/local/bin/\n\n\napache\u7528\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u672c\u4f53\u3068\u306f\u5225\u306bApache\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u3044\u3002\nbash'$sudo passenger-install-apache2-module\n\uff08Nogix\u3068\u304b\u3067\u3082\u4f7f\u3048\u308b\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u9078\u629e\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u305f\u3081)\nspirytus:~ saima$ passenger-install-apache2-module\nWelcome to the Phusion Passenger Apache 2 module installer, v5.0.30.\n\nThis installer will guide you through the entire installation process. It\nshouldn't take more than 3 minutes in total.\n\nHere's what you can expect from the installation process:\n\n 1. The Apache 2 module will be installed for you.\n 2. You'll learn how to configure Apache.\n 3. You'll learn how to deploy a Ruby on Rails application.\n\nDon't worry if anything goes wrong. This installer will advise you on how to\nsolve any problems.\n\nPress Enter to continue, or Ctrl-C to abort.\n .\n .\n .\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u9014\u4e2d\u3067Apache.conf\u3078\u66f8\u304d\u8fbc\u3080\u30b5\u30f3\u30d7\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n .\n .\n .\n--------------------------------------------\nAlmost there!\n\nPlease edit your Apache configuration file, and add these lines:\n\n   LoadModule passenger_module /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30\n     PassengerDefaultRuby /usr/local/bin/ruby\n   </IfModule>\n\nAfter you restart Apache, you are ready to deploy any number of web\napplications on Apache, with a minimum amount of configuration!\n\nPress ENTER when you are done editing.\n .\n .\n .\n\nWarning\u304c\u4e00\u3064\u51fa\u3066\u3044\u308b\u304c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u3088\u3046\u3060\u3002\n .\n .\n .\n--------------------------------------------\n\nValidating installation...\n\n * Checking whether this Passenger install is in PATH... \u2713\n * Checking whether there are no other Passenger installations... \u2713\n * Checking whether Apache is installed... \u2713\n * Checking whether the Passenger module is correctly configured in Apache... (!)\n\n   You did not specify 'LoadModule passenger_module' in any of your Apache\n   configuration files. Please paste the configuration snippet that this\n   installer printed earlier, into one of your Apache configuration files, such\n   as /private/etc/apache2/httpd.conf.\n\n\nDetected 0 error(s), 1 warning(s).\nPress ENTER to continue.\n\n\n--------------------------------------------\n\nDeploying a web application\n\nTo learn how to deploy a web app on Passenger, please follow the deployment\nguide:\n\n  https://www.phusionpassenger.com/library/deploy/apache/deploy/\n\nEnjoy Phusion Passenger, a product of Phusion (www.phusion.nl) :-)\nhttps://www.phusionpassenger.com\n\nPhusion Passenger is a registered trademark of Hongli Lai & Ninh Bui.\n\n\n\napache\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u8a2d\u5b9a\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u8868\u793a\u3055\u308c\u305f\u8a18\u8ff0\u3092/etc/apache2/httpd.conf\u306b\u8ffd\u8a18\u3059\u308b\u3002\n\u8a18\u8ff0\u5834\u6240\u306f\u89e3\u308a\u3084\u3059\u3044\u3088\u3046\u306bVirtualHost\u306e\u4e0b\u306e\u884c\u3068\u3057\u305f\u3002\n\n/etc/apache2/httpd.conf\n# Passenger \nLoadModule passenger_module /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n   PassengerRoot /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30\n   PassengerDefaultRuby /usr/local/bin/ruby\n</IfModule>\n\n\nApache\u3092\u518d\u8d77\u52d5\u3057\u3066\u3001passenger-status\u3067\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\nspirytus:~ saima$ sudo apachectl restart\nPassword:\nspirytus:~ saima$ passenger-status\nVersion : 5.0.30\nDate    : 2016-09-05 12:33:12 +0900\nInstance: kFHYy3Tk (Apache/2.4.18 (Unix) Phusion_Passenger/5.0.30)\n\nPhusion Passenger is currently not serving any applications.\n\n\nRackup\u3067\u8d77\u52d5\u78ba\u8a8d\n\nRack\u30d5\u30a1\u30a4\u30eb\u306e\u6e96\u5099\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\nspirytus:~ saima$ cd Develop/\nspirytus:Develop saima$ mkdir rackapp\nspirytus:Develop saima$ mkdir rackapp/public\nspirytus:Develop saima$ mkdir rackapp/tmp\n\n/etc/hosts\u306b127.0.0.1 www.rackexample.com\u3092\u8ffd\u8a18\nrackapp\u5185\u306bconfig.ru\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4f5c\u6210\n\n/rackapp/config.ru\napp = proc do |env|\n [200, { \"Content-Type\" => \"text/html\" }, [\"hello <b>Rack world</b>\"]]\nend\nrun app\n\n\nhttpd-vhosts.conf\u306b\u4e0b\u8a18\u3092\u8ffd\u8a18\n\n/etc/apache2/extra/httpd-vhosts.conf\n<VirtualHost *:80>\n   DocumentRoot \"/Users/saima/Develop/rackapp/public\"\n   ServerName www.rackexample.com\n   ErrorLog \"/private/var/log/apache2/rackexample.com-error_log\"\n   CustomLog \"/private/var/log/apache2/rackexample.com-access_log\" common   \n   <Directory \"/Users/saima/Develop/rackapp/public\">\n      Allow from all    \n      Options -MultiViews   \n      Require all granted\n   </Directory> \n</VirtualHost>\n\n\napache\u3092\u518d\u8d77\u52d5\u3057\u3066\u3001\u30d6\u30e9\u30a6\u30b6\u3067www.rackexample.com\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001hello Rack word\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3002\n\n# \u6d41\u308c\u30fb\u4e88\u5b9a\n* \u7d20\u306eVirtualHost\u3092\u8a2d\u5b9a\n* Gem\u3067\u672c\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n* apache\u7528\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n* apache\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u8a2d\u5b9a\n* \u30c6\u30b9\u30c8\u7528\u306e\u30d0\u30fc\u30c1\u30e3\u30eb\u30db\u30b9\u30c8\u306e\u8a2d\u5b9a\n* RackApp\u3067\u8d77\u52d5\u30c6\u30b9\u30c8\n\n# \u74b0\u5883\nMacOS OSX El Capitan 10.11.6\nRuby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]\nGem -v 2.6.6\napachectl -v\nServer version: Apache/2.4.23 (Unix)\nServer built:   Aug  8 2016 16:31:34\n\n# \u7d20\u306eVirtualHost\u3092\u8a2d\u5b9a\n\n\u554f\u984c\u304c\u3042\u3063\u305f\u3068\u304d\u306b\u3001Passenger\u306e\u554f\u984c\u306a\u306e\u304b\u3001Apache\u306eVirtualHost\u304c\u554f\u984c\u306a\u306e\u304b\u3092\u5207\u308a\u5206\u3051\u308b\u305f\u3081\u3001\u5148\u306b\u7d20\u306eVirtualHost\u3092\u8a2d\u5b9a\u3057\u3066\u304a\u304f\u3002\n\n/etc/apache2/httpd.conf\u306e\u4ee5\u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3059(449\u884c\u76ee\u4ed8\u8fd1\uff09\n`bash` Include /private/etc/apache2/extra/httpd-vhosts.conf\n\n## \u524d\u7f6e\u304d\n\u6c17\u4ed8\u304b\u306a\u304b\u3063\u305f\u304c\u3001Marvericks\u3042\u305f\u308a\u304b\u3089Web\u5171\u6709\u3084\u30e6\u30fc\u30b6\u30fc\u3054\u3068\u306eSites\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u524a\u9664\u3055\u308c\u3066\u3044\u305f\u3088\u3046\u3060\u3002\n\u95a2\u9023\u3057\u3066\u3001\u4e00\u5ea6\u3082Apache\u3092\u7acb\u3061\u4e0a\u3052\u305f\u3053\u3068\u304c\u306a\u3051\u308c\u3070\u3001\u81ea\u52d5\u3067\u306fApache\u306f\u52d5\u3044\u3066\u3044\u306a\u3044\u3088\u3046\u3060\u3002\n\u305f\u3060\u3001\u4e00\u5ea6 sudo apachectrl start \u3068\u3059\u308b\u3068\u3001\u6b21\u56de\u304b\u3089\u306f\u52dd\u624b\u306b\u8d77\u52d5\u3057\u3066\u304f\u308c\u308b\u3088\u3046\u3060\u3002\n\n## httpd.conf\u306e\u7de8\u96c6\n/etc/apache2/httpd.conf\u306e499\u884c\u76ee\u4ed8\u8fd1\u306b\u3042\u308bVirtualHost\u306e\u8aad\u307f\u8fbc\u307f\u8a2d\u5b9a\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u3066include\u3092\u6709\u52b9\u306b\u3057\u3066\u3001Apache\u3092\u518d\u8d77\u52d5\u3055\u305b\u308b\u3002\n`bash` Include /private/etc/apache2/extra/httpd-vhosts.conf\n\n## localhost\u306e\u8868\u793a\nVirtualHost\u304c\u6709\u52b9\u306b\u306a\u308b\u3068\u3001localhost\u306e\u304cDocumentRoot\u304c\n/etc/apache2/extra/httpd-vhosts.conf\u306b\u3088\u3063\u3066\u66f8\u304d\u63db\u3048\u3089\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u3053\u308c\u3092\u3082\u3068\u3082\u3068\u306eIt works!\u304c\u8868\u793a\u3055\u308c\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u3066\u307f\u308b\u3002\n\n``` Bash \nspirytus:apache2 saima$ cd /etc/apache2/\nspirytus:apache2 saima$ mv extra/httpd-vhosts.conf extra/httpd-vhosts.conf.dev\nspirytus:apache2 saima$ vi extra/httpd-vhosts.conf\n```\n\n``` Apache:extra/httpd-vhosts.conf\n<VirtualHost *:80>\n    ServerAdmin webmaster@dummy-host.example.com\n    DocumentRoot \"/Library/WebServer/Documents\"\n    ServerName localhost\n    ServerAlias www.localhost\n    ErrorLog \"/private/var/log/apache2/dummy-host.example.com-error_log\"\n    CustomLog \"/private/var/log/apache2/dummy-host.example.com-access_log\" common\n</VirtualHost>\n```\n\n## VirtualHost\nlocal.test.com\u3068\u3044\u3046\u30db\u30b9\u30c8\u3067\u52d5\u304b\u3057\u3066\u307f\u308b\u305f\u3081\u3001\u4ee5\u4e0b\u3092\u8ffd\u52a0\nApache\u306e2.2\u7cfb\u30682.4\u7cfb\u3067\u306f\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\u306e\u66f8\u304d\u65b9\u304c\u30ac\u30e9\u30c3\u3068\u5909\u308f\u3063\u3066\u3044\u308b\u306e\u3067\u6ce8\u610f\n\n``` Apache:extra/httpd-vhosts.conf\n<VirtualHost *:80>\n\tDocumentRoot \"/Users/saima/Develop/vhost\"\n\tServerName local.test.com\n\tErrorLog \"/private/var/log/apache2/local.test.com-error_log\"\n    CustomLog \"/private/var/log/apache2/local.test.com-access_log\" common\t\n\t<Directory \"/Users/saima/Develop/vhost\">\n\t    Require all granted\n\t</Directory>\t\n</VirtualHost>\n```\n\n# Gem\u3067\u672c\u4f53\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nGem\u3060\u3051\u3067\u666e\u901a\u306b\u5165\u308b\u3089\u3057\u3044\n\n```Bash\nspirytus:~ saima$ sudo gem install passenger\nFetching: passenger-5.0.30.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed passenger-5.0.30\nParsing documentation for passenger-5.0.30\nInstalling ri documentation for passenger-5.0.30\nDone installing documentation for passenger after 108 seconds\n1 gem installed\n```\n# OSX Sierra\nMarverics\u307e\u3067\u306f`Bash'spirytus:~ saima$ passenger-install-apache2-module'`\u3067\u666e\u901a\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u3068\u8a18\u61b6\u3057\u3066\u3044\u308b\u304c\u3001Sierra\u306b\u30a2\u30d7\u30c7\u3057\u305f\u304b\u3089\u3001xcode-select --install\u3092\u3057\u3066\u3001APR\u3068APU\u3092\u5165\u308c\u308d\u3068\u8a00\u308f\u308c\u308b\u304c\u3001Sierra\u304b\u3089xcode-select\u306bAPR\u3068APU\u304c\u542b\u307e\u308c\u306a\u304f\u306a\u3063\u305f\u3088\u3046\u3060\u3002\n\n```Bash\n...(\u7565)\n      Location: /usr/local/include/ruby-2.3.0/ruby.h\n * Checking for rack...\n      Found: yes\n * Checking for Apache Portable Runtime (APR) development headers...\n      Found: no\n * Checking for Apache Portable Runtime Utility (APU) development headers...\n      Found: no\n\nSome required software is not installed.\nBut don't worry, this installer will tell you how to install them.\nPress Enter to continue, or Ctrl-C to abort.\n\n--------------------------------------------\n\nInstallation instructions for required software\n\n * To install Apache Portable Runtime (APR) development headers:\n   Please install the Xcode command line tools: sudo xcode-select --install\n\n * To install Apache Portable Runtime Utility (APU) development headers:\n   Please install the Xcode command line tools: sudo xcode-select --install\n\nIf the aforementioned instructions didn't solve your problem, then please take\na look at our documentation for troubleshooting tips:\n\n  https://www.phusionpassenger.com/library/install/apache/\n  https://www.phusionpassenger.com/library/admin/apache/troubleshooting/\n```\n\n\u305d\u3053\u3067\u3001ARP\u3068APU\u306e\u30bd\u30fc\u30b9\u3092[Apache\u306e\uff28\uff30](https://apr.apache.org/download.cgi)\u304b\u3089\u3044\u305f\u3060\u3044\u3066\u6765\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3053\u3068\u306b\u3057\u305f\u3002\nARP\u3068APU\u306f\u57fa\u672c\u7684\u306b./configure,make,make install\u3067\u304d\u308b\u304c\u3001APU\u306econfigure\u306b\u306fAPR\u306e\u30d1\u30b9\u3092\u6559\u3048\u3066\u3084\u3089\u306a\u3051\u308c\u3070\u306a\u3089\u306a\u3044\u306e\u3067\u3001```./configure --with-apr=/usr/local/apr```\u3068\u3057\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u3002\n\n\u3053\u308c\u3060\u3051\u3067\u306fpassenger-install-apache2-module\u306fARP\u3068APU\u3092\u8a8d\u8b58\u3057\u3066\u304f\u308c\u306a\u3044\u3088\u3046\u306a\u306e\u3067\u3001[\u3053\u3053](https://github.com/Homebrew/homebrew-php/issues/3594)\u3092\u53c2\u8003\u306bAPR\u3068APU\u306e\u30ea\u30f3\u30af\u3092\u4f5c\u6210\u3057\u305f\u3002\n\n```Bash\n# \u73fe\u5728\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u78ba\u8a8d\nspirytus:~ saima$ ls /Applications/Xcode.app/Contents/Developer/Toolchains/\nSwift_2.3.xctoolchain\t\tXcodeDefault.xctoolchain\n\n# \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u4f5c\u6210\nspirytus:~ saima$ sudo mkdir -p /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.12.xctoolchain/usr/local/bin/\n\n# apr-1-conf\u306e\u30ea\u30f3\u30af\nspirytus:~ saima$ sudo ln -s /usr/local/apr/bin/apr-1-config /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.12.xctoolchain/usr/local/bin/\n\n# apu-1-conf\u306e\u30ea\u30f3\u30af\nspirytus:~ saima$ sudo ln -s /usr/local/apr/bin/apu-1-config /Applications/Xcode.app/Contents/Developer/Toolchains/OSX10.12.xctoolchain/usr/local/bin/\n```\n \n# apache\u7528\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u672c\u4f53\u3068\u306f\u5225\u306bApache\u306b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3051\u308c\u3070\u306a\u3089\u3044\u3002\n`bash'$sudo passenger-install-apache2-module`\n\uff08Nogix\u3068\u304b\u3067\u3082\u4f7f\u3048\u308b\u306e\u3067\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u9078\u629e\u3057\u306a\u3051\u308c\u3070\u3044\u3051\u306a\u3044\u305f\u3081)\n\n```Bash\nspirytus:~ saima$ passenger-install-apache2-module\nWelcome to the Phusion Passenger Apache 2 module installer, v5.0.30.\n\nThis installer will guide you through the entire installation process. It\nshouldn't take more than 3 minutes in total.\n\nHere's what you can expect from the installation process:\n\n 1. The Apache 2 module will be installed for you.\n 2. You'll learn how to configure Apache.\n 3. You'll learn how to deploy a Ruby on Rails application.\n\nDon't worry if anything goes wrong. This installer will advise you on how to\nsolve any problems.\n\nPress Enter to continue, or Ctrl-C to abort.\n .\n .\n .\n```\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u9014\u4e2d\u3067Apache.conf\u3078\u66f8\u304d\u8fbc\u3080\u30b5\u30f3\u30d7\u30eb\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\u3063\u3066\u304a\u304f\u3002\n\n``` Bash\n .\n .\n .\n--------------------------------------------\nAlmost there!\n\nPlease edit your Apache configuration file, and add these lines:\n\n   LoadModule passenger_module /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30/buildout/apache2/mod_passenger.so\n   <IfModule mod_passenger.c>\n     PassengerRoot /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30\n     PassengerDefaultRuby /usr/local/bin/ruby\n   </IfModule>\n\nAfter you restart Apache, you are ready to deploy any number of web\napplications on Apache, with a minimum amount of configuration!\n\nPress ENTER when you are done editing.\n .\n .\n .\n```\n\nWarning\u304c\u4e00\u3064\u51fa\u3066\u3044\u308b\u304c\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u305f\u3088\u3046\u3060\u3002\n\n```Bash\n .\n .\n .\n--------------------------------------------\n\nValidating installation...\n\n * Checking whether this Passenger install is in PATH... \u2713\n * Checking whether there are no other Passenger installations... \u2713\n * Checking whether Apache is installed... \u2713\n * Checking whether the Passenger module is correctly configured in Apache... (!)\n\n   You did not specify 'LoadModule passenger_module' in any of your Apache\n   configuration files. Please paste the configuration snippet that this\n   installer printed earlier, into one of your Apache configuration files, such\n   as /private/etc/apache2/httpd.conf.\n\n\nDetected 0 error(s), 1 warning(s).\nPress ENTER to continue.\n\n\n--------------------------------------------\n\nDeploying a web application\n\nTo learn how to deploy a web app on Passenger, please follow the deployment\nguide:\n\n  https://www.phusionpassenger.com/library/deploy/apache/deploy/\n\nEnjoy Phusion Passenger, a product of Phusion (www.phusion.nl) :-)\nhttps://www.phusionpassenger.com\n\nPhusion Passenger is a registered trademark of Hongli Lai & Ninh Bui.\n\n```\n\n\n# apache\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u8a2d\u5b9a\n\n\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u8868\u793a\u3055\u308c\u305f\u8a18\u8ff0\u3092/etc/apache2/httpd.conf\u306b\u8ffd\u8a18\u3059\u308b\u3002\n\u8a18\u8ff0\u5834\u6240\u306f\u89e3\u308a\u3084\u3059\u3044\u3088\u3046\u306bVirtualHost\u306e\u4e0b\u306e\u884c\u3068\u3057\u305f\u3002\n\n``` conf:/etc/apache2/httpd.conf\n# Passenger\t\nLoadModule passenger_module /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30/buildout/apache2/mod_passenger.so\n<IfModule mod_passenger.c>\n   PassengerRoot /usr/local/lib/ruby/gems/2.3.0/gems/passenger-5.0.30\n   PassengerDefaultRuby /usr/local/bin/ruby\n</IfModule>\n```\nApache\u3092\u518d\u8d77\u52d5\u3057\u3066\u3001passenger-status\u3067\u30ed\u30fc\u30c9\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\n\n```Bash\nspirytus:~ saima$ sudo apachectl restart\nPassword:\nspirytus:~ saima$ passenger-status\nVersion : 5.0.30\nDate    : 2016-09-05 12:33:12 +0900\nInstance: kFHYy3Tk (Apache/2.4.18 (Unix) Phusion_Passenger/5.0.30)\n\nPhusion Passenger is currently not serving any applications.\n```\n# Rackup\u3067\u8d77\u52d5\u78ba\u8a8d\n## Rack\u30d5\u30a1\u30a4\u30eb\u306e\u6e96\u5099\n\n\u4e0b\u8a18\u306e\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\n\n```Bash\nspirytus:~ saima$ cd Develop/\nspirytus:Develop saima$ mkdir rackapp\nspirytus:Develop saima$ mkdir rackapp/public\nspirytus:Develop saima$ mkdir rackapp/tmp\n```\n/etc/hosts\u306b``127.0.0.1 www.rackexample.com``\u3092\u8ffd\u8a18\n\nrackapp\u5185\u306bconfig.ru\u3092\u4e0b\u8a18\u306e\u3088\u3046\u306b\u4f5c\u6210\n\n```Ruby:/rackapp/config.ru\napp = proc do |env|\n [200, { \"Content-Type\" => \"text/html\" }, [\"hello <b>Rack world</b>\"]]\nend\nrun app\n```\nhttpd-vhosts.conf\u306b\u4e0b\u8a18\u3092\u8ffd\u8a18\n\n```Apache:/etc/apache2/extra/httpd-vhosts.conf\n<VirtualHost *:80>\n   DocumentRoot \"/Users/saima/Develop/rackapp/public\"\n   ServerName www.rackexample.com\n   ErrorLog \"/private/var/log/apache2/rackexample.com-error_log\"\n   CustomLog \"/private/var/log/apache2/rackexample.com-access_log\" common\t\n   <Directory \"/Users/saima/Develop/rackapp/public\">\n      Allow from all\t\n\t  Options -MultiViews\t\n\t  Require all granted\n   </Directory>\t\n</VirtualHost>\n```\n\napache\u3092\u518d\u8d77\u52d5\u3057\u3066\u3001\u30d6\u30e9\u30a6\u30b6\u3067www.rackexample.com\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001hello Rack word\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u304b\u3092\u78ba\u8a8d\u3002\n", "tags": ["Ruby", "passenger", "OSX", "rack"]}