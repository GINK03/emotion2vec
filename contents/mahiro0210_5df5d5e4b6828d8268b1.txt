{"tags": ["VyOS"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\nvyos\u306eU\u30bf\u30fc\u30f3NAT\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u30b7\u30a7\u30a2\n\n\u69cb\u6210\ninternet gw --- eth0(outside) vyos eth1(inside) --- servers...\n\u554f\u984c\u70b9\n\u4e0a\u8a18\u69cb\u6210\u3067inside server \u304cGIP\u7d4c\u7531\u3067\u5185\u90e8\u306eserver\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u304d\u3001\nU\u30bf\u30fc\u30f3NAT\u8a2d\u5b9a\u304c\u306a\u3044\u3068\u901a\u4fe1\u304c\u307b\u3052\u308b\u3002\n\u89e3\u6c7a\u7b56\nvyos\u306bU\u30bf\u30fc\u30f3NAT\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\ndestinationNAT\n\n set nat destination rule 998 description 'Hair-pin NAT from Inside'\n set nat destination rule 998 destination address '1.1.1.10'\n set nat destination rule 998 inbound-interface 'eth1'\n set nat destination rule 998 translation address '192.168.1.10'\n\n\nsource-NAT\n\n set nat source rule 998 description 'Hair-pin NAT to Inside'\n set nat source rule 998 destination address '192.168.1.0/24'\n set nat source rule 998 outbound-interface 'eth1'\n set nat source rule 998 source address '192.168.1.0/24'\n set nat source rule 998 translation address 'masquerade'\n\n# vyos\u306eU\u30bf\u30fc\u30f3NAT\u3067\u306f\u307e\u3063\u305f\u306e\u3067\u30b7\u30a7\u30a2\n\n+ \u69cb\u6210\n`internet gw --- eth0(outside) vyos eth1(inside) --- servers...`\n\n+ \u554f\u984c\u70b9\n\u4e0a\u8a18\u69cb\u6210\u3067inside server \u304cGIP\u7d4c\u7531\u3067\u5185\u90e8\u306eserver\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u304d\u3001\nU\u30bf\u30fc\u30f3NAT\u8a2d\u5b9a\u304c\u306a\u3044\u3068\u901a\u4fe1\u304c\u307b\u3052\u308b\u3002\n+ \u89e3\u6c7a\u7b56\nvyos\u306bU\u30bf\u30fc\u30f3NAT\u306e\u8a2d\u5b9a\u3092\u8ffd\u52a0\n\n* destinationNAT\n\n```\n set nat destination rule 998 description 'Hair-pin NAT from Inside'\n set nat destination rule 998 destination address '1.1.1.10'\n set nat destination rule 998 inbound-interface 'eth1'\n set nat destination rule 998 translation address '192.168.1.10'\n```\n\n* source-NAT\n\n```\n set nat source rule 998 description 'Hair-pin NAT to Inside'\n set nat source rule 998 destination address '192.168.1.0/24'\n set nat source rule 998 outbound-interface 'eth1'\n set nat source rule 998 source address '192.168.1.0/24'\n set nat source rule 998 translation address 'masquerade'\n"}