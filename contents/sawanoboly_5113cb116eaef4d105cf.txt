{"context": "Swagger\u3063\u3066\u306e\u304c\u3042\u3063\u3066\u306d\u3002\u6982\u8981\u306f\u6b21\u306e\u30b9\u30e9\u30a4\u30c9\u3067\u3002\n\n\u30b9\u30e9\u30a4\u30c9: Swagger\u3067\u59cb\u3081\u308b\u30e2\u30c7\u30eb\u30d5\u30a1\u30fc\u30b9\u30c8\u306aAPI\u958b\u767a (Takuro Sasaki, Software Developer)\n\n\n\u3067\u3001\u4ee5\u524d\u306bSTNS\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u4ed5\u69d8\u3092\u8abf\u3079\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u306eSTNS API\u306f\u30d0\u30fc\u30b8\u30e7\u30f31(\u4ee5\u4e0b\u3001V1\u3068\u304b)\u3067\u3059\u3002\nSTNS\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u3064\u304f\u308d\u3046 - Qiita\n\u3055\u3066\u3001Swagger\u306e\u624b\u7fd2\u3044\u3067\u4f5c\u3063\u3066\u307f\u308bAPI\u3068\u3057\u3066\u3001STNS\u306eAPI \u30d0\u30fc\u30b8\u30e7\u30f32.1\u3092\u6a21\u3059\u308c\u3070\u4e8c\u514e\u304b\u3082\u3057\u308c\u306a\u3044\u3068\u8003\u3048\u305f\u3068\u3053\u308d\u3001\u3053\u308c\u30df\u30b9\u30de\u30c3\u30c1\u3060\u3063\u305f\u3068\u3044\u3046\u304a\u8a71\u3002\n\u4f55\u304b\u306e\u5f79\u306b\u7acb\u3064\u308f\u3051\u3067\u3082\u306a\u3044\u304c\u3001\u624b\u8a18\u3068\u3057\u3066\u3057\u305f\u305f\u3081\u3066\u304a\u304f\u3002\n\nSTNS\u306eAPI Version 2\nSTNS Api Version 2 \u306b\u3064\u3044\u3066\u3002\n\n\u30d7\u30ec\u30d5\u30a3\u30af\u30b9/v2\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u306fmetadata\u3068items\u3068\u3044\u30462\u8981\u7d20\u3067\u69cb\u6210\n\n\nitems\u306e\u4e2d\u8eab\u306fV1\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u540c\u3058\nmetadata\u306f\u306a\u3093\u3060\u304b\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u60c5\u5831\n\n\nsudo\u30ea\u30bd\u30fc\u30b9\n\u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u306f\u30d7\u30ec\u30d5\u30a3\u30af\u30b9\u306a\u3057\u306ev1\u3068\u5171\u901a\n\n\u3046\u3080\u3001\u3053\u3053\u307e\u3067\u3088\u3057\u3002\n\n\u30ec\u30b9\u30dd\u30f3\u30b9v2\n\u30ea\u30b9\u30c8/v2/user/list\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n{\n  \"metadata\": {\n    \"api_version\": 2.1,\n    \"result\": \"success\",\n    \"min_id\": 1001\n  },\n  \"items\": {\n    \"example1\": {\n      \"id\": 1001,\n      \"password\": \"\",\n      \"group_id\": 0,\n      \"directory\": \"\",\n      \"shell\": \"\",\n      \"gecos\": \"\",\n      \"keys\": [\n        \"ssh-rsa xxxx\"\n      ],\n      \"link_users\": null\n    },\n    \"example2\": {\n      \"id\": 1002,\n      \"password\": \"\",\n      \"group_id\": 0,\n      \"directory\": \"\",\n      \"shell\": \"\",\n      \"gecos\": \"\",\n      \"keys\": [\n        \"ssh-rsa xxxx\"\n      ],\n      \"link_users\": null\n    }\n  }\n}\n\n\u5358\u54c1/v2/user/name/example1\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3053\u3046\u306a\u3063\u305f\u3002\n{\n  \"metadata\": {\n    \"api_version\": 2.1,\n    \"result\": \"success\",\n    \"min_id\": 1001\n  },\n  \"items\": {\n    \"example1\": {\n      \"id\": 1001,\n      \"password\": \"\",\n      \"group_id\": 1001,\n      \"directory\": \"\",\n      \"shell\": \"\",\n      \"gecos\": \"\",\n      \"keys\": [\n        \"ssh-rsa xxxx\"\n      ],\n      \"link_users\": null\n    }\n  }\n}\n\n\u4e00\u898bSwagger\u3067\u3082\u5b9a\u7fa9\u306f\u4f5c\u308a\u3084\u3059\u305d\u3046\u306b\u898b\u3048\u305f\u3093\u3060\u3051\u3069\u3002\u3002\n\n\u306a\u306b\u304c\u56f0\u3063\u305f\u306e\u304b1: \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\n\u307e\u305a\u3001\u30c7\u30fc\u30bf\u306e\u30ad\u30fc\u540d\u306b\u30e6\u30cb\u30fc\u30af\u306aID\u3092\u3064\u304b\u3046\u3068Swagger\u3067\u5b9a\u7fa9\u3059\u308b\u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u56f0\u308b\u306e\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u6b21\u306e\u5f62\u3067\u30b5\u30f3\u30d7\u30eb\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u4f5c\u308b\u306b\u306f\u30d9\u30bf\u6253\u3061\u3057\u304b\u65b9\u6cd5\u304c\u306a\u3044\u3063\u307d\u3044\u3002\n\"example1\": {\n  \"id\": 1001,\n...\n\n\u69cb\u9020\u7684\u306b\u3053\u3046\u306a\u3063\u3066\u308b\u3068\u3002Google Bigtable\u3068\u304b\u306e\u3088\u3046\u306a\u6301\u3061\u65b9\u3002\n|          example1          |\n| id   | password | group_id |\n|------|----------|----------|\n| 1001 | $6....   | 1001     |\n\n\u3053\u3046\u3044\u3046\u72b6\u614b\u3060\u3068\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u5074\u306e\u30e2\u30c7\u30eb\u306f\u4f5c\u308c\u308b\u3093\u3060\u3051\u3069\u3082\u3001\u305d\u308c\u3092\u4f7f\u3044\u307e\u308f\u3059\u5f62\u3067\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u4f5c\u6210\u3067\u304d\u306a\u304b\u3063\u305f\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u306a\u3089\u5168\u90e8\u30b5\u30f3\u30d7\u30eb\u30ec\u30b9\u30dd\u30f3\u30b9\u624b\u6253\u3061\u3067\u3088\u3044\u306e\u3060\u3051\u3069\u3082\u3001OpenAPI Spec\u3068\u3057\u3066\u306f\u305d\u3046\u3082\u3044\u304b\u306a\u3044\u3002\n\u3042\u304f\u307e\u3067Swagger\u306edefinitions\u3067\u5b9a\u7fa9\u3059\u308b\u3068\u306a\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u69cb\u9020\u304c\u5fc5\u8981\u3060\u3063\u305f\u3002\n{\n  \"name\": \"example1\",\n  \"id\": 1001,\n...\n\n\n\u3064\u307e\u308a\u3053\u3093\u306a\u72b6\u614b\u3002RDB\u7684\u306a\u30ec\u30b3\u30fc\u30c9\u3002\n| name     | id   | password | group_id |\n|----------|------|----------|----------|\n| example1 | 1001 | $6....   | 1001     |\n\n\n\u6bd4\u3079\u308b\u3068\u3001\u3042\u3042\u305d\u3046\u3060\u3088\u306d\u3048\u3002\u3002\u3068\u3057\u304b\u3002\n\n\u306a\u306b\u304c\u56f0\u3063\u305f\u306e\u304b2: metadata\u306emin_id\n\u3082\u3046\u4e00\u3064\u3001metadata\u306emin_id\u304c\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u542b\u3080\u542b\u307e\u306a\u3044\u95a2\u4fc2\u306a\u3057\u3067\u3001\u5e38\u306b\u30ec\u30b3\u30fc\u30c9\u5168\u4f53\u304b\u3089\u7b97\u51fa\u3057\u305f\u5024\u3067\u3042\u308b\u3053\u3068\u304c\u30cd\u30c3\u30af\u306b\u306a\u308a\u305d\u3046\u3060\u3063\u305f\u3002\n\u3053\u3061\u3089\u306fSwagger\u304b\u3089\u3059\u3053\u3057\u5916\u308c\u308b\u8a71\u3067\u305f\u3060\u306e\u611f\u60f3\u306a\u3093\u3060\u3051\u3069\u3082\u3001\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u6b21\u7b2c\u3067\u3061\u3087\u3063\u3068\u56f0\u308b\u306a\u3068\u3002\n\"metadata\": {\n    \"api_version\": 2.1,\n    \"result\": \"success\",\n    \"min_id\": 1001\n  }\n\nmin_id\u306b\u5165\u308c\u308b\u5024\u306b\u3064\u3044\u3066\u306fRDB\u306a\u3089MIN\u306a\u95a2\u6570\u3067\u3044\u3044\u3051\u3069\u3001\u4f8b\u3048\u3070DynamoDB\u306a\u3093\u304b\u3060\u3068\u6a2a\u65ad\u3057\u3066MAX\u3068\u304bMIN\u3068\u304b\u3068\u308c\u306a\u3044\u3002\njava - MAX operations in Amazon DynamoDB - Stack Overflow\n\u3053\u306e\u5834\u5408\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u66f4\u65b0\u6642\u306b\u30d5\u30c3\u30af\u3057\u3066\u30c1\u30a7\u30c3\u30af\uff06\u66f4\u65b0\u3092\u304b\u3051\u308b\u5c02\u7528\u30c6\u30fc\u30d6\u30eb(\u30a2\u30a4\u30c6\u30e0)\u304c\u5fc5\u8981\u306a\u306e\u3088\u306d\u3002\u3002\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u9078\u5b9a\u306b\u5f71\u97ff\u3059\u308b\u306e\u3060\u3002\n\n\u5b8c\n\u307e\u305a\u3053\u3053\u3067\u5b8c\u5168\u79fb\u690d\u7528\u306e\u5b9a\u7fa9\u3092\u3064\u304f\u308b\u306e\u306f\u8ae6\u3081\u305f\u3002\u3042\u3068\u306f\u304a\u307e\u3051\u3002\n\nSwagger\u307d\u3044\u30e2\u30c7\u30eb\u306b\u3057\u3066\u307f\u308b\n\n\u5143\u3005\u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u578b\u306e\u30c7\u30fc\u30bf\u306a\u306e\u3067\u3001\u30ad\u30fc\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u7d44\u307f\u5408\u308f\u305b\u3068\u3044\u3046\u30ec\u30b9\u30dd\u30f3\u30b9\u3067\u5f53\u305f\u308a\u524d\u3067\u3042\u308b\u3053\u3068\u306f\u3072\u3068\u307e\u305a\u7f6e\u3044\u3068\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5f53\u521d\u306e\u76ee\u7684\u306e\u3046\u3061\u3001Swagger\u306e\u7df4\u7fd2\u304f\u3089\u3044\u306f\u3084\u3063\u3066\u304a\u304d\u305f\u3044\u3002\u6298\u89d2\u306a\u306e\u3067Swagger\u3067\u4f5c\u308c\u308b\u3088\u3046\u306bAPI\u4ed5\u69d8\u3092\u6539\u5909\u3057\u3066\u307f\u3088\u3046\u3002\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306b\u3002\n\nPetStore | Swagger UI\nswagger\u306e\u57fa\u790e\u3002swagger\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u304d\u65b9\u3068\u304b - Qiita\n\n\n\u5909\u66f4\u70b91: metadata\u3092\u306a\u304f\u3059\nmetadata\u81ea\u4f53\u306f\u30ad\u30fc\u540d\u304c\u56fa\u5b9a\u306a\u306e\u3067\u666e\u901a\u306b\u30e2\u30c7\u30eb\u5b9a\u7fa9\u3067\u304d\u308b\u3002\u5b9f\u306f\u6b8b\u3057\u3066\u3082\u3044\u3044\u3002\n\u3057\u304b\u3057api_version\u306f\u305d\u3082\u305d\u3082\u30ea\u30af\u30a8\u30b9\u30c8\u5074\u304c\u6307\u5b9a\u3067\u304d\u308c\u3070\u3044\u3044\u6c17\u304c\u3059\u308b\u305e\u3002\u3002\u3059\u3067\u306b/v2\u30d7\u30ec\u30d5\u30a3\u30af\u30b9\u3082\u3042\u308b\u3057\u3002\n\u3082\u3061\u308d\u3093\u30c7\u30d5\u30a9\u30eb\u30c8\u304c\u3042\u308b\u304b\u3089\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u5165\u308c\u308b\u3068\u3057\u3066\u3082X-API-VERSION\u3068\u3044\u3046\u30d8\u30c3\u30c0\u306b\u3067\u3082\u3044\u308c\u3061\u3083\u304a\u3046\u3002\nresult\u306fHTTP\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u306e\u304b\u306a\u3042\u3002\nmin_id\u304c\u53b3\u3057\u3044\u3002\u3061\u3087\u3044\u4e0d\u81ea\u7136\u3060\u304c...\u30d8\u30c3\u30c0\u3060\u3002X-MIN-ID\u306b\u3044\u308c\u3061\u3083\u3046\u3002\n\n\u5909\u66f4\u70b92: user_name, group_name\u3092\u30e2\u30c7\u30eb\u306b\u542b\u3081\u308b\n\u307e\u3042API v1\u306b\u8fd1\u304f\u306a\u3061\u3083\u3046\u306d\u3002\u30ad\u30fc\u3092name\u306b\u3057\u307e\u3063\u305f\u3060\u3051\u3002\n\u307b\u304b\u3001null\u3082\u306a\u3093\u3060\u304b\u307e\u305a\u3044\u6c17\u304c\u3059\u308b\u306e\u3067link_users\u306a\u3069\u306f\u7121\u3057\u306e\u5834\u5408\u306b\u7a7a\u914d\u5217\u3068\u3057\u3088\u3046\u3002\n> GET /user/name/example1\n\nHTTP/1.1 200 OK\nContent-Type: application/json; charset=utf-8\nX-API-VERSION: 2.1\nX-MIN-ID: 1001\nDate: xxxxxxxx\nContent-Length: xxx\n\n{\n  \"name\": \"example1\",\n  \"id\": 1001,\n  \"password\": \"\",\n  \"group_id\": 1001,\n  \"directory\": \"\",\n  \"shell\": \"\",\n  \"gecos\": \"\",\n  \"keys\": [\n    \"ssh-rsa xxxx\"\n  ],\n  \"link_users\": []\n}\n\n\n\u5909\u66f4\u70b93: Get_By_ID\u306f\u5358\u54c1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u3001\u30ea\u30b9\u30c8\u306f\u30a2\u30ec\u30a4\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\nv2\u306eitems\u306b\u3042\u305f\u308b\u3068\u3053\u308d\u3092\u5909\u3048\u3066\u3057\u307e\u304a\u3046\u3002\n\u5358\u54c1\u306eGET\u306b\u3064\u3044\u3066\u306f\u5909\u66f4\u70b92\u306e\u3068\u304a\u308a\u3001\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u5834\u5408\u306f\u30a2\u30ec\u30a4\u306b\u3059\u308b\u3002\u3053\u308c\u306a\u3089\u540c\u3058\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4e26\u3076\u3060\u3051\u3060\u3002\n> GET /user/list\n\nHTTP/1.1 200 OK\nContent-Type: application/json; charset=utf-8\nX-API-VERSION: 2.1\nX-MIN-ID: 1001\nDate: xxxxxxxx\nContent-Length: xxx\n\n[\n  {\n    \"name\": \"example1\",\n    \"id\": 1001,\n    \"password\": \"\",\n    \"group_id\": 1001,\n    \"directory\": \"\",\n    \"shell\": \"\",\n    \"gecos\": \"\",\n    \"keys\": [\n      \"ssh-rsa xxxx\"\n    ],\n    \"link_users\": []\n  },\n  {\n    \"name\": \"example2\",\n    \"id\": 1002,\n    \"password\": \"\",\n    \"group_id\": 1001,\n    \"directory\": \"\",\n    \"shell\": \"\",\n    \"gecos\": \"\",\n    \"keys\": [\n      \"ssh-rsa xxxx\"\n    ],\n    \"link_users\": []\n  }\n]\n\n\n\u5909\u66f4\u70b94: 404\u306fmessage\u3067\nV2\u3067\u306f\"items\": null\u3067\u8fd4\u3063\u3066\u304f\u308b\u3002Swagger\u30b5\u30f3\u30d7\u30eb\u3092\u53c2\u8003\u306b\u3059\u308b\u3068\u3053\u308c\u3082V1\u306b\u5bc4\u308b\u306a\u3042\u3002\n> GET /user/name/example1\n\nHTTP/1.1 404 Not Found\nContent-Type: application/json; charset=utf-8\nX-API-VERSION: 2.1\nX-MIN-ID: 1001\nDate: xxxxxxxx\nContent-Length: xxx\n\n{\n  \"message\": \"Resource not found\"\n}\n\n\n\u3067\u304d\u305fSwagger\u306eSpec (\u30d1\u30c1\u3082\u3093API)\n\u3068\u308a\u3042\u3048\u305a/v2/user/name/{id}\u3068/v2/user/list\u3060\u3051\u5b9f\u88c5\u3002\n\u4e00\u5fdc\u3053\u3061\u3089\u3067\u30bd\u30fc\u30b9\u3068\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u898b\u3089\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n=> https://app.swaggerhub.com/api/sawanoboly/sandbox1/2.1\nswaggerhub\u3060\u3068\u30d8\u30c3\u30c0\u304c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u542b\u307e\u308c\u306a\u304b\u3063\u305f\u308a\u3068\u5999\u306a\u6319\u52d5\u3092\u3057\u3066\u307e\u3059\u304c\u3001editor.swagger.io\u306e\u65b9\u306b\u8cbc\u308a\u4ed8\u3051\u308c\u3070\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u3082\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u542b\u307e\u308c\u3066\u307e\u3057\u305f\u3002\n---\nswagger: '2.0'\ninfo:\n  version: \"2.1\"\n  title: mysandbox1\n  description: example 1\npaths:\n  /healthcheck:\n    get:\n      description: health check url\n      produces:\n        - application/json\n      responses:\n        '200':\n          description: 'returns success'\n          schema:\n            $ref: \"#/definitions/Healty\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\n  /v2/metadata:\n    get:\n      description: Returns metadata (demo)\n      produces:\n        - application/json\n      responses:\n        '200':\n          description: 'Metadata'\n          schema:\n            $ref: \"#/definitions/Metadata\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\n  /v2/user/name/{id}:\n    parameters:\n      - name: id\n        in: path\n        required: true\n        type: string\n    get:\n      description: find by user name\n      produces:\n        - application/json\n      responses:\n        '404':\n          description: '404 error'\n          schema:\n            $ref: \"#/definitions/NotFound\"\n        '200':\n          description: '404 error'\n          schema:\n            $ref: \"#/definitions/User\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\n  /v2/user/list:\n    get:\n      description: list of all users\n      produces:\n        - application/json\n      responses:\n        '404':\n          description: '404 error'\n          schema:\n            $ref: \"#/definitions/NotFound\"\n        '200':\n          description: '404 error'\n          schema:\n            type: array\n            items:\n              $ref: \"#/definitions/User\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\ndefinitions:\n  Healty:\n    description: Healty response\n    type: string\n    example: \"success\"\n  NotFound:\n    description: 404 response\n    type: object\n    properties:\n      message:\n        type: string\n        example: \"Resource not found\"\n      items:\n        example: null\n  Metadata:\n    description: metadata object\n    type: object\n    required:\n      - api_version\n      - result\n      - min_id\n    properties:\n      api_version:\n        description: api version\n        type: number\n        example: 2.1\n      result:\n        description: success only\n        type: string\n        example: \"success\"\n      min_id:\n        description: please return the minimum Id in the All users, group\n        type: integer\n        example: 1001\n  User:\n    description: User object\n    type: object\n    required:\n      - name\n      - id\n    properties:\n      name:\n        type: string\n        example: example1\n      id:\n        description: uid\n        type: integer\n        example: 1001\n      password:\n        description: login password by /etc/shadow format\n        type: string\n        example: \"$6$salt$hash\"\n      group_id:\n        description: gid\n        type: integer\n        example: 1001\n      directory:\n        description: home directory\n        type: string\n        example: \"/home/example1\"\n      shell:\n        description: default shell\n        type: string\n        example: \"/bin/bash\"\n      keys:\n        description: public keys\n        type: array\n        items:\n          type: string\n          example: \"ssh-rsa xxxxx\"\n      gecos:\n        description: general information about the account\n        type: string\n        example: \"example user\"\n      link_users:\n        description: stns link users\n        type: array\n        items:\n          type: string\n          example: \"example2\"\n# Added by API Auto Mocking Plugin\nhost: virtserver.swaggerhub.com\nbasePath: /sawanoboly/sandbox1/2.1\nschemes:\n - https\n\n\u3061\u306a\u307f\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u306fmetadata+items\u3068\u3044\u3046\u69cb\u6210\u306b\u3082\u3061\u3083\u3093\u3068\u3067\u304d\u308b\u3002items\u306f\u30a2\u30ec\u30a4\u306b\u306a\u3063\u3061\u3083\u3046\u3051\u3069\u3082\u305f\u3057\u304b\u3053\u3093\u306a\u611f\u3058\u3002\nschema:\n  type: object\n  properties:\n    metadata:\n      $ref: \"#/definitions/Metadata\"\n    items:\n      type: array\n      items:\n        $ref: \"#/definitions/User\"\n\n(\u524d\u56de\u306e\u3060\u3051\u3069)\u666e\u901a\u306b\u5b9f\u88c5\u3057\u305fSinatra\u306e\u30b3\u30fc\u30c9\u3088\u308a\u9577\u3044\u305c\u3002\ncurl\u3067\u53d6\u3063\u3066\u307f\u308b\u3002(\u203b\u30e2\u30c3\u30af\u306evirtserver\u306f\u30d8\u30c3\u30c0\u5b9a\u7fa9\u304c\u7121\u52b9\u3063\u307d\u3044)\n$ curl -i https://virtserver.swaggerhub.com/sawanoboly/sandbox1/2.1/v2/user/list\nHTTP/1.1 200 OK\nAccess-Control-Allow-Headers: Content-Type\nAccess-Control-Allow-Methods: *\nAccess-Control-Allow-Origin: *\nContent-Type: application/json\nServer: Jetty(6.1.26)\nContent-Length: 212\nConnection: keep-alive\n\n[ {\n  \"name\" : \"example1\",\n  \"password\" : \"$6$salt$hash\",\n  \"directory\" : \"/home/example1\",\n  \"shell\" : \"/bin/bash\",\n  \"keys\" : [ \"ssh-rsa xxxxx\" ],\n  \"gecos\" : \"example user\",\n  \"link_users\" : [ \"example2\" ]\n} ]\n\n\u307e\u3042\u3088\u3057\u3002\n\n\u3067\u3001\u3069\u3046\u306a\u308b\u306e\nSTNS\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3092Swagger\u306b\u5bc4\u305b\u308b(\u8981\u306fREST\u307d\u304f\u3059\u308b)\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u79fb\u690d\u306f\u3057\u3084\u3059\u304f\u3001POST/PUT\u3067\u306e\u30c7\u30fc\u30bf\u7ba1\u7406\u304c\u5b9f\u88c5\u3057\u3084\u3059\u304f\u306a\u308b\u3051\u3069\u3082\u3001\u809d\u5fc3\u306eLinux\u3067\u52d5\u304fNSS/PAM\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u306e\u30c7\u30fc\u30bf\u306e\u53d6\u308a\u56de\u3057\u304c\u7169\u96d1\u306b\u306a\u308a\u305d\u3046\u3060\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\u4ee5\u524dV1\u3092\u81ea\u5206\u304csinatra\u3067\u4f5c\u3063\u3066\u307f\u305f\u308a\u3001cloudpack\u3055\u3093\u304cDynamoDB\u76f4\u8aad\u307f\u3067\u4f5c\u3063\u305f(\u4e0b\u8a18\u30ea\u30f3\u30af)\u3088\u3046\u306b\u3001STNS\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u5b9f\u88c5\u81ea\u4f53\u306f\u7c21\u5358\u3067\u3001\u305d\u308c\u306fV2\u3067\u3082\u540c\u3058\u3067\u3059\u3002\n\u7d50\u5c40Swagger\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u3057\u305f\u6642\u70b9\u3067\u9078\u629e\u3092\u8aa4\u3063\u3066\u3044\u305f\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\nLinux\u30e6\u30fc\u30b6\u7ba1\u7406\u306e\u6c7a\u5b9a\u7248\uff1f \u301cSTNS\u3068\u30b5\u30fc\u30d0\u30ec\u30b9\u3067\u5922\u304c\u5e83\u304c\u308b\u301c\u3010cloudpack\u5927\u962a\u30d6\u30ed\u30b0\u3011 - Qiita\n\u305d\u3082\u305d\u3082\u5143\u304c\u30b7\u30f3\u30d7\u30eb\u306a\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u306a\u306e\u3067\u611a\u76f4\u306b\u5b9f\u88c5\u3059\u308c\u3070\u3088\u3044\u3093\u3060\u3088\u306a\u3002\n\u3055\u3066\u4eca\u56de\u5f97\u3089\u308c\u305f\u3082\u306e\u306f\u3002\n\nSwagger Spec\u306e\u66f8\u304d\u65b9\n\u30e2\u30c7\u30eb\u30d5\u30a1\u30fc\u30b9\u30c8\u3067\u4f5c\u308c\u308bAPI\u306e\u5224\u5b9a\u65b9\u6cd5\u3092\u3072\u3068\u3064\nSTNS\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u30d1\u30c1\u3082\u3093\n\n\u306e3\u70b9\u3067\u3057\u305f\u3002\n[Swagger](http://swagger.io)\u3063\u3066\u306e\u304c\u3042\u3063\u3066\u306d\u3002\u6982\u8981\u306f\u6b21\u306e\u30b9\u30e9\u30a4\u30c9\u3067\u3002\n\n- \u30b9\u30e9\u30a4\u30c9: [Swagger\u3067\u59cb\u3081\u308b\u30e2\u30c7\u30eb\u30d5\u30a1\u30fc\u30b9\u30c8\u306aAPI\u958b\u767a (Takuro Sasaki, Software Developer)](http://www.slideshare.net/takurosasaki/swaggerapi)\n\n\u3067\u3001\u4ee5\u524d\u306bSTNS\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u4ed5\u69d8\u3092\u8abf\u3079\u305f\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u306eSTNS API\u306f\u30d0\u30fc\u30b8\u30e7\u30f31(\u4ee5\u4e0b\u3001`V1`\u3068\u304b)\u3067\u3059\u3002\n\n[STNS\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3092\u3064\u304f\u308d\u3046 - Qiita](http://qiita.com/sawanoboly/items/d8b017760d8b51d7ded4)\n\n\u3055\u3066\u3001Swagger\u306e\u624b\u7fd2\u3044\u3067\u4f5c\u3063\u3066\u307f\u308bAPI\u3068\u3057\u3066\u3001STNS\u306eAPI \u30d0\u30fc\u30b8\u30e7\u30f32.1\u3092\u6a21\u3059\u308c\u3070\u4e8c\u514e\u304b\u3082\u3057\u308c\u306a\u3044\u3068\u8003\u3048\u305f\u3068\u3053\u308d\u3001\u3053\u308c\u30df\u30b9\u30de\u30c3\u30c1\u3060\u3063\u305f\u3068\u3044\u3046\u304a\u8a71\u3002\n\u4f55\u304b\u306e\u5f79\u306b\u7acb\u3064\u308f\u3051\u3067\u3082\u306a\u3044\u304c\u3001\u624b\u8a18\u3068\u3057\u3066\u3057\u305f\u305f\u3081\u3066\u304a\u304f\u3002\n\n## STNS\u306eAPI Version 2\n\n[STNS Api Version 2](http://stns.jp/en/interface) \u306b\u3064\u3044\u3066\u3002\n\n- \u30d7\u30ec\u30d5\u30a3\u30af\u30b9`/v2`\n- \u30ec\u30b9\u30dd\u30f3\u30b9\u306f`metadata`\u3068`items`\u3068\u3044\u30462\u8981\u7d20\u3067\u69cb\u6210\n    - items\u306e\u4e2d\u8eab\u306fV1\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3068\u540c\u3058\n    - metadata\u306f\u306a\u3093\u3060\u304b\u30b0\u30ed\u30fc\u30d0\u30eb\u306a\u60c5\u5831\n- sudo\u30ea\u30bd\u30fc\u30b9\n- \u30d8\u30eb\u30b9\u30c1\u30a7\u30c3\u30af\u306f\u30d7\u30ec\u30d5\u30a3\u30af\u30b9\u306a\u3057\u306ev1\u3068\u5171\u901a\n\n\u3046\u3080\u3001\u3053\u3053\u307e\u3067\u3088\u3057\u3002\n\n### \u30ec\u30b9\u30dd\u30f3\u30b9v2\n\n\u30ea\u30b9\u30c8`/v2/user/list`\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3053\u3093\u306a\u611f\u3058\u3002\n\n```json:\n{\n  \"metadata\": {\n    \"api_version\": 2.1,\n    \"result\": \"success\",\n    \"min_id\": 1001\n  },\n  \"items\": {\n    \"example1\": {\n      \"id\": 1001,\n      \"password\": \"\",\n      \"group_id\": 0,\n      \"directory\": \"\",\n      \"shell\": \"\",\n      \"gecos\": \"\",\n      \"keys\": [\n        \"ssh-rsa xxxx\"\n      ],\n      \"link_users\": null\n    },\n    \"example2\": {\n      \"id\": 1002,\n      \"password\": \"\",\n      \"group_id\": 0,\n      \"directory\": \"\",\n      \"shell\": \"\",\n      \"gecos\": \"\",\n      \"keys\": [\n        \"ssh-rsa xxxx\"\n      ],\n      \"link_users\": null\n    }\n  }\n}\n```\n\n\u5358\u54c1`/v2/user/name/example1`\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f\u3053\u3046\u306a\u3063\u305f\u3002\n\n```json:\n{\n  \"metadata\": {\n    \"api_version\": 2.1,\n    \"result\": \"success\",\n    \"min_id\": 1001\n  },\n  \"items\": {\n    \"example1\": {\n      \"id\": 1001,\n      \"password\": \"\",\n      \"group_id\": 1001,\n      \"directory\": \"\",\n      \"shell\": \"\",\n      \"gecos\": \"\",\n      \"keys\": [\n        \"ssh-rsa xxxx\"\n      ],\n      \"link_users\": null\n    }\n  }\n}\n```\n\n\u4e00\u898bSwagger\u3067\u3082\u5b9a\u7fa9\u306f\u4f5c\u308a\u3084\u3059\u305d\u3046\u306b\u898b\u3048\u305f\u3093\u3060\u3051\u3069\u3002\u3002\n\n### \u306a\u306b\u304c\u56f0\u3063\u305f\u306e\u304b1: \u30c7\u30fc\u30bf\u30e2\u30c7\u30eb\n\n\u307e\u305a\u3001\u30c7\u30fc\u30bf\u306e\u30ad\u30fc\u540d\u306b\u30e6\u30cb\u30fc\u30af\u306aID\u3092\u3064\u304b\u3046\u3068Swagger\u3067\u5b9a\u7fa9\u3059\u308b\u30e2\u30c7\u30eb\u4f5c\u6210\u306b\u56f0\u308b\u306e\u3067\u3059\u3002\n\u4f8b\u3048\u3070\u6b21\u306e\u5f62\u3067\u30b5\u30f3\u30d7\u30eb\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u4f5c\u308b\u306b\u306f\u30d9\u30bf\u6253\u3061\u3057\u304b\u65b9\u6cd5\u304c\u306a\u3044\u3063\u307d\u3044\u3002\n\n```\n\"example1\": {\n  \"id\": 1001,\n...\n```\n\n\u69cb\u9020\u7684\u306b\u3053\u3046\u306a\u3063\u3066\u308b\u3068\u3002Google Bigtable\u3068\u304b\u306e\u3088\u3046\u306a\u6301\u3061\u65b9\u3002\n\n```\n|          example1          |\n| id   | password | group_id |\n|------|----------|----------|\n| 1001 | $6....   | 1001     |\n```\n\n\u3053\u3046\u3044\u3046\u72b6\u614b\u3060\u3068\u3001\u30d7\u30ed\u30d1\u30c6\u30a3\u5074\u306e\u30e2\u30c7\u30eb\u306f\u4f5c\u308c\u308b\u3093\u3060\u3051\u3069\u3082\u3001\u305d\u308c\u3092\u4f7f\u3044\u307e\u308f\u3059\u5f62\u3067\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u4f5c\u6210\u3067\u304d\u306a\u304b\u3063\u305f\u3002\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3068\u3057\u3066\u306a\u3089\u5168\u90e8\u30b5\u30f3\u30d7\u30eb\u30ec\u30b9\u30dd\u30f3\u30b9\u624b\u6253\u3061\u3067\u3088\u3044\u306e\u3060\u3051\u3069\u3082\u3001OpenAPI Spec\u3068\u3057\u3066\u306f\u305d\u3046\u3082\u3044\u304b\u306a\u3044\u3002\n\n\u3042\u304f\u307e\u3067Swagger\u306edefinitions\u3067\u5b9a\u7fa9\u3059\u308b\u3068\u306a\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u69cb\u9020\u304c\u5fc5\u8981\u3060\u3063\u305f\u3002\n\n```\n{\n  \"name\": \"example1\",\n  \"id\": 1001,\n...\n\n```\n\n\u3064\u307e\u308a\u3053\u3093\u306a\u72b6\u614b\u3002RDB\u7684\u306a\u30ec\u30b3\u30fc\u30c9\u3002\n\n```\n| name     | id   | password | group_id |\n|----------|------|----------|----------|\n| example1 | 1001 | $6....   | 1001     |\n\n```\n\n\u6bd4\u3079\u308b\u3068\u3001\u3042\u3042\u305d\u3046\u3060\u3088\u306d\u3048\u3002\u3002\u3068\u3057\u304b\u3002\n\n### \u306a\u306b\u304c\u56f0\u3063\u305f\u306e\u304b2: metadata\u306emin_id\n\n\u3082\u3046\u4e00\u3064\u3001metadata\u306emin_id\u304c\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u542b\u3080\u542b\u307e\u306a\u3044\u95a2\u4fc2\u306a\u3057\u3067\u3001\u5e38\u306b\u30ec\u30b3\u30fc\u30c9\u5168\u4f53\u304b\u3089\u7b97\u51fa\u3057\u305f\u5024\u3067\u3042\u308b\u3053\u3068\u304c\u30cd\u30c3\u30af\u306b\u306a\u308a\u305d\u3046\u3060\u3063\u305f\u3002\n\u3053\u3061\u3089\u306fSwagger\u304b\u3089\u3059\u3053\u3057\u5916\u308c\u308b\u8a71\u3067\u305f\u3060\u306e\u611f\u60f3\u306a\u3093\u3060\u3051\u3069\u3082\u3001\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u30c7\u30fc\u30bf\u30b9\u30c8\u30a2\u6b21\u7b2c\u3067\u3061\u3087\u3063\u3068\u56f0\u308b\u306a\u3068\u3002\n\n```json:\n\"metadata\": {\n    \"api_version\": 2.1,\n    \"result\": \"success\",\n    \"min_id\": 1001\n  }\n```\n\nmin_id\u306b\u5165\u308c\u308b\u5024\u306b\u3064\u3044\u3066\u306fRDB\u306a\u3089MIN\u306a\u95a2\u6570\u3067\u3044\u3044\u3051\u3069\u3001\u4f8b\u3048\u3070DynamoDB\u306a\u3093\u304b\u3060\u3068\u6a2a\u65ad\u3057\u3066MAX\u3068\u304bMIN\u3068\u304b\u3068\u308c\u306a\u3044\u3002\n\n[java - MAX operations in Amazon DynamoDB - Stack Overflow](http://stackoverflow.com/questions/18219562/max-operations-in-amazon-dynamodb)\n\n\u3053\u306e\u5834\u5408\u3001\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u66f4\u65b0\u6642\u306b\u30d5\u30c3\u30af\u3057\u3066\u30c1\u30a7\u30c3\u30af\uff06\u66f4\u65b0\u3092\u304b\u3051\u308b\u5c02\u7528\u30c6\u30fc\u30d6\u30eb(\u30a2\u30a4\u30c6\u30e0)\u304c\u5fc5\u8981\u306a\u306e\u3088\u306d\u3002\u3002\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u9078\u5b9a\u306b\u5f71\u97ff\u3059\u308b\u306e\u3060\u3002\n\n## \u5b8c\n\n\u307e\u305a\u3053\u3053\u3067\u5b8c\u5168\u79fb\u690d\u7528\u306e\u5b9a\u7fa9\u3092\u3064\u304f\u308b\u306e\u306f\u8ae6\u3081\u305f\u3002\u3042\u3068\u306f\u304a\u307e\u3051\u3002\n\n## Swagger\u307d\u3044\u30e2\u30c7\u30eb\u306b\u3057\u3066\u307f\u308b\n\n> \u5143\u3005\u304c\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u578b\u306e\u30c7\u30fc\u30bf\u306a\u306e\u3067\u3001\u30ad\u30fc\u3068\u30d7\u30ed\u30d1\u30c6\u30a3\u306e\u7d44\u307f\u5408\u308f\u305b\u3068\u3044\u3046\u30ec\u30b9\u30dd\u30f3\u30b9\u3067\u5f53\u305f\u308a\u524d\u3067\u3042\u308b\u3053\u3068\u306f\u3072\u3068\u307e\u305a\u7f6e\u3044\u3068\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u5f53\u521d\u306e\u76ee\u7684\u306e\u3046\u3061\u3001Swagger\u306e\u7df4\u7fd2\u304f\u3089\u3044\u306f\u3084\u3063\u3066\u304a\u304d\u305f\u3044\u3002\u6298\u89d2\u306a\u306e\u3067Swagger\u3067\u4f5c\u308c\u308b\u3088\u3046\u306bAPI\u4ed5\u69d8\u3092\u6539\u5909\u3057\u3066\u307f\u3088\u3046\u3002\n\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306b\u3002\n\n- [PetStore | Swagger UI](http://petstore.swagger.io/)\n- [swagger\u306e\u57fa\u790e\u3002swagger\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u66f8\u304d\u65b9\u3068\u304b - Qiita](http://qiita.com/magaya0403/items/0419d84d8df7784ac465)\n\n### \u5909\u66f4\u70b91: metadata\u3092\u306a\u304f\u3059\n\n`metadata`\u81ea\u4f53\u306f\u30ad\u30fc\u540d\u304c\u56fa\u5b9a\u306a\u306e\u3067\u666e\u901a\u306b\u30e2\u30c7\u30eb\u5b9a\u7fa9\u3067\u304d\u308b\u3002\u5b9f\u306f\u6b8b\u3057\u3066\u3082\u3044\u3044\u3002\n\n\u3057\u304b\u3057`api_version`\u306f\u305d\u3082\u305d\u3082\u30ea\u30af\u30a8\u30b9\u30c8\u5074\u304c\u6307\u5b9a\u3067\u304d\u308c\u3070\u3044\u3044\u6c17\u304c\u3059\u308b\u305e\u3002\u3002\u3059\u3067\u306b`/v2`\u30d7\u30ec\u30d5\u30a3\u30af\u30b9\u3082\u3042\u308b\u3057\u3002\n\u3082\u3061\u308d\u3093\u30c7\u30d5\u30a9\u30eb\u30c8\u304c\u3042\u308b\u304b\u3089\u30ec\u30b9\u30dd\u30f3\u30b9\u306b\u5165\u308c\u308b\u3068\u3057\u3066\u3082`X-API-VERSION`\u3068\u3044\u3046\u30d8\u30c3\u30c0\u306b\u3067\u3082\u3044\u308c\u3061\u3083\u304a\u3046\u3002\n\n`result`\u306fHTTP\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u3067\u3044\u3044\u3093\u3058\u3083\u306a\u3044\u306e\u304b\u306a\u3042\u3002\n\n`min_id`\u304c\u53b3\u3057\u3044\u3002\u3061\u3087\u3044\u4e0d\u81ea\u7136\u3060\u304c...\u30d8\u30c3\u30c0\u3060\u3002`X-MIN-ID`\u306b\u3044\u308c\u3061\u3083\u3046\u3002\n\n\n### \u5909\u66f4\u70b92: user_name, group_name\u3092\u30e2\u30c7\u30eb\u306b\u542b\u3081\u308b\n\n\u307e\u3042API v1\u306b\u8fd1\u304f\u306a\u3061\u3083\u3046\u306d\u3002\u30ad\u30fc\u3092name\u306b\u3057\u307e\u3063\u305f\u3060\u3051\u3002\n\u307b\u304b\u3001null\u3082\u306a\u3093\u3060\u304b\u307e\u305a\u3044\u6c17\u304c\u3059\u308b\u306e\u3067link_users\u306a\u3069\u306f\u7121\u3057\u306e\u5834\u5408\u306b\u7a7a\u914d\u5217\u3068\u3057\u3088\u3046\u3002\n\n```\n> GET /user/name/example1\n\nHTTP/1.1 200 OK\nContent-Type: application/json; charset=utf-8\nX-API-VERSION: 2.1\nX-MIN-ID: 1001\nDate: xxxxxxxx\nContent-Length: xxx\n\n{\n  \"name\": \"example1\",\n  \"id\": 1001,\n  \"password\": \"\",\n  \"group_id\": 1001,\n  \"directory\": \"\",\n  \"shell\": \"\",\n  \"gecos\": \"\",\n  \"keys\": [\n    \"ssh-rsa xxxx\"\n  ],\n  \"link_users\": []\n}\n```\n\n\n### \u5909\u66f4\u70b93: Get_By_ID\u306f\u5358\u54c1\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u3001\u30ea\u30b9\u30c8\u306f\u30a2\u30ec\u30a4\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\n\nv2\u306e`items`\u306b\u3042\u305f\u308b\u3068\u3053\u308d\u3092\u5909\u3048\u3066\u3057\u307e\u304a\u3046\u3002\n\n\u5358\u54c1\u306eGET\u306b\u3064\u3044\u3066\u306f\u5909\u66f4\u70b92\u306e\u3068\u304a\u308a\u3001\u30ea\u30b9\u30c8\u3092\u53d6\u5f97\u3059\u308b\u5834\u5408\u306f\u30a2\u30ec\u30a4\u306b\u3059\u308b\u3002\u3053\u308c\u306a\u3089\u540c\u3058\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u4e26\u3076\u3060\u3051\u3060\u3002\n\n```\n> GET /user/list\n\nHTTP/1.1 200 OK\nContent-Type: application/json; charset=utf-8\nX-API-VERSION: 2.1\nX-MIN-ID: 1001\nDate: xxxxxxxx\nContent-Length: xxx\n\n[\n  {\n    \"name\": \"example1\",\n    \"id\": 1001,\n    \"password\": \"\",\n    \"group_id\": 1001,\n    \"directory\": \"\",\n    \"shell\": \"\",\n    \"gecos\": \"\",\n    \"keys\": [\n      \"ssh-rsa xxxx\"\n    ],\n    \"link_users\": []\n  },\n  {\n    \"name\": \"example2\",\n    \"id\": 1002,\n    \"password\": \"\",\n    \"group_id\": 1001,\n    \"directory\": \"\",\n    \"shell\": \"\",\n    \"gecos\": \"\",\n    \"keys\": [\n      \"ssh-rsa xxxx\"\n    ],\n    \"link_users\": []\n  }\n]\n```\n\n\n### \u5909\u66f4\u70b94: 404\u306fmessage\u3067\n\nV2\u3067\u306f`\"items\": null`\u3067\u8fd4\u3063\u3066\u304f\u308b\u3002Swagger\u30b5\u30f3\u30d7\u30eb\u3092\u53c2\u8003\u306b\u3059\u308b\u3068\u3053\u308c\u3082V1\u306b\u5bc4\u308b\u306a\u3042\u3002\n\n```\n> GET /user/name/example1\n\nHTTP/1.1 404 Not Found\nContent-Type: application/json; charset=utf-8\nX-API-VERSION: 2.1\nX-MIN-ID: 1001\nDate: xxxxxxxx\nContent-Length: xxx\n\n{\n  \"message\": \"Resource not found\"\n}\n```\n\n### \u3067\u304d\u305fSwagger\u306eSpec (\u30d1\u30c1\u3082\u3093API)\n\n\u3068\u308a\u3042\u3048\u305a`/v2/user/name/{id}`\u3068`/v2/user/list`\u3060\u3051\u5b9f\u88c5\u3002\n\n\u4e00\u5fdc\u3053\u3061\u3089\u3067\u30bd\u30fc\u30b9\u3068\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u304c\u898b\u3089\u308c\u308b\u306f\u305a\u3067\u3059\u3002\n=> https://app.swaggerhub.com/api/sawanoboly/sandbox1/2.1\n\n`swaggerhub`\u3060\u3068\u30d8\u30c3\u30c0\u304c\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u542b\u307e\u308c\u306a\u304b\u3063\u305f\u308a\u3068\u5999\u306a\u6319\u52d5\u3092\u3057\u3066\u307e\u3059\u304c\u3001[editor.swagger.io](http://editor.swagger.io/)\u306e\u65b9\u306b\u8cbc\u308a\u4ed8\u3051\u308c\u3070\u30ec\u30b9\u30dd\u30f3\u30b9\u30d8\u30c3\u30c0\u3082\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u542b\u307e\u308c\u3066\u307e\u3057\u305f\u3002\n\n\n```yaml:\n---\nswagger: '2.0'\ninfo:\n  version: \"2.1\"\n  title: mysandbox1\n  description: example 1\npaths:\n  /healthcheck:\n    get:\n      description: health check url\n      produces:\n        - application/json\n      responses:\n        '200':\n          description: 'returns success'\n          schema:\n            $ref: \"#/definitions/Healty\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\n  /v2/metadata:\n    get:\n      description: Returns metadata (demo)\n      produces:\n        - application/json\n      responses:\n        '200':\n          description: 'Metadata'\n          schema:\n            $ref: \"#/definitions/Metadata\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\n  /v2/user/name/{id}:\n    parameters:\n      - name: id\n        in: path\n        required: true\n        type: string\n    get:\n      description: find by user name\n      produces:\n        - application/json\n      responses:\n        '404':\n          description: '404 error'\n          schema:\n            $ref: \"#/definitions/NotFound\"\n        '200':\n          description: '404 error'\n          schema:\n            $ref: \"#/definitions/User\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\n  /v2/user/list:\n    get:\n      description: list of all users\n      produces:\n        - application/json\n      responses:\n        '404':\n          description: '404 error'\n          schema:\n            $ref: \"#/definitions/NotFound\"\n        '200':\n          description: '404 error'\n          schema:\n            type: array\n            items:\n              $ref: \"#/definitions/User\"\n          headers:\n            X-API-VERSION:\n              description: api version\n              type: number\n              default: 2.1\n            X-MIN-ID:\n              description: please return the minimum Id in the All users, group\n              type: number\ndefinitions:\n  Healty:\n    description: Healty response\n    type: string\n    example: \"success\"\n  NotFound:\n    description: 404 response\n    type: object\n    properties:\n      message:\n        type: string\n        example: \"Resource not found\"\n      items:\n        example: null\n  Metadata:\n    description: metadata object\n    type: object\n    required:\n      - api_version\n      - result\n      - min_id\n    properties:\n      api_version:\n        description: api version\n        type: number\n        example: 2.1\n      result:\n        description: success only\n        type: string\n        example: \"success\"\n      min_id:\n        description: please return the minimum Id in the All users, group\n        type: integer\n        example: 1001\n  User:\n    description: User object\n    type: object\n    required:\n      - name\n      - id\n    properties:\n      name:\n        type: string\n        example: example1\n      id:\n        description: uid\n        type: integer\n        example: 1001\n      password:\n        description: login password by /etc/shadow format\n        type: string\n        example: \"$6$salt$hash\"\n      group_id:\n        description: gid\n        type: integer\n        example: 1001\n      directory:\n        description: home directory\n        type: string\n        example: \"/home/example1\"\n      shell:\n        description: default shell\n        type: string\n        example: \"/bin/bash\"\n      keys:\n        description: public keys\n        type: array\n        items:\n          type: string\n          example: \"ssh-rsa xxxxx\"\n      gecos:\n        description: general information about the account\n        type: string\n        example: \"example user\"\n      link_users:\n        description: stns link users\n        type: array\n        items:\n          type: string\n          example: \"example2\"\n# Added by API Auto Mocking Plugin\nhost: virtserver.swaggerhub.com\nbasePath: /sawanoboly/sandbox1/2.1\nschemes:\n - https\n```\n\n\u3061\u306a\u307f\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u306f`metadata`+`items`\u3068\u3044\u3046\u69cb\u6210\u306b\u3082\u3061\u3083\u3093\u3068\u3067\u304d\u308b\u3002items\u306f\u30a2\u30ec\u30a4\u306b\u306a\u3063\u3061\u3083\u3046\u3051\u3069\u3082\u305f\u3057\u304b\u3053\u3093\u306a\u611f\u3058\u3002\n\n```yaml:\nschema:\n  type: object\n  properties:\n    metadata:\n      $ref: \"#/definitions/Metadata\"\n    items:\n      type: array\n      items:\n        $ref: \"#/definitions/User\"\n```\n\n(\u524d\u56de\u306e\u3060\u3051\u3069)\u666e\u901a\u306b\u5b9f\u88c5\u3057\u305fSinatra\u306e\u30b3\u30fc\u30c9\u3088\u308a\u9577\u3044\u305c\u3002\n\ncurl\u3067\u53d6\u3063\u3066\u307f\u308b\u3002(\u203b\u30e2\u30c3\u30af\u306evirtserver\u306f\u30d8\u30c3\u30c0\u5b9a\u7fa9\u304c\u7121\u52b9\u3063\u307d\u3044)\n\n```\n$ curl -i https://virtserver.swaggerhub.com/sawanoboly/sandbox1/2.1/v2/user/list\nHTTP/1.1 200 OK\nAccess-Control-Allow-Headers: Content-Type\nAccess-Control-Allow-Methods: *\nAccess-Control-Allow-Origin: *\nContent-Type: application/json\nServer: Jetty(6.1.26)\nContent-Length: 212\nConnection: keep-alive\n\n[ {\n  \"name\" : \"example1\",\n  \"password\" : \"$6$salt$hash\",\n  \"directory\" : \"/home/example1\",\n  \"shell\" : \"/bin/bash\",\n  \"keys\" : [ \"ssh-rsa xxxxx\" ],\n  \"gecos\" : \"example user\",\n  \"link_users\" : [ \"example2\" ]\n} ]\n```\n\n\u307e\u3042\u3088\u3057\u3002\n\n\n## \u3067\u3001\u3069\u3046\u306a\u308b\u306e\n\nSTNS\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3092Swagger\u306b\u5bc4\u305b\u308b(\u8981\u306fREST\u307d\u304f\u3059\u308b)\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u79fb\u690d\u306f\u3057\u3084\u3059\u304f\u3001POST/PUT\u3067\u306e\u30c7\u30fc\u30bf\u7ba1\u7406\u304c\u5b9f\u88c5\u3057\u3084\u3059\u304f\u306a\u308b\u3051\u3069\u3082\u3001\u809d\u5fc3\u306eLinux\u3067\u52d5\u304fNSS/PAM\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u3067\u306e\u30c7\u30fc\u30bf\u306e\u53d6\u308a\u56de\u3057\u304c\u7169\u96d1\u306b\u306a\u308a\u305d\u3046\u3060\u306a\u3068\u601d\u3044\u307e\u3057\u305f\u3002\n\n\u4ee5\u524dV1\u3092\u81ea\u5206\u304csinatra\u3067\u4f5c\u3063\u3066\u307f\u305f\u308a\u3001cloudpack\u3055\u3093\u304cDynamoDB\u76f4\u8aad\u307f\u3067\u4f5c\u3063\u305f(\u4e0b\u8a18\u30ea\u30f3\u30af)\u3088\u3046\u306b\u3001STNS\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u5b9f\u88c5\u81ea\u4f53\u306f\u7c21\u5358\u3067\u3001\u305d\u308c\u306fV2\u3067\u3082\u540c\u3058\u3067\u3059\u3002\n\u7d50\u5c40Swagger\u3092\u4f7f\u3063\u3066\u307f\u3088\u3046\u3068\u3057\u305f\u6642\u70b9\u3067\u9078\u629e\u3092\u8aa4\u3063\u3066\u3044\u305f\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\n\n[Linux\u30e6\u30fc\u30b6\u7ba1\u7406\u306e\u6c7a\u5b9a\u7248\uff1f \u301cSTNS\u3068\u30b5\u30fc\u30d0\u30ec\u30b9\u3067\u5922\u304c\u5e83\u304c\u308b\u301c\u3010cloudpack\u5927\u962a\u30d6\u30ed\u30b0\u3011 - Qiita](http://qiita.com/shogomuranushi/items/f09fcdeb146b45452403)\n\n\u305d\u3082\u305d\u3082\u5143\u304c\u30b7\u30f3\u30d7\u30eb\u306a\u30ad\u30fc\u30d0\u30ea\u30e5\u30fc\u306a\u306e\u3067\u611a\u76f4\u306b\u5b9f\u88c5\u3059\u308c\u3070\u3088\u3044\u3093\u3060\u3088\u306a\u3002\n\n\u3055\u3066\u4eca\u56de\u5f97\u3089\u308c\u305f\u3082\u306e\u306f\u3002\n\n- Swagger Spec\u306e\u66f8\u304d\u65b9\n- \u30e2\u30c7\u30eb\u30d5\u30a1\u30fc\u30b9\u30c8\u3067\u4f5c\u308c\u308bAPI\u306e\u5224\u5b9a\u65b9\u6cd5\u3092\u3072\u3068\u3064\n- STNS\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u306e\u30d1\u30c1\u3082\u3093\n\n\u306e3\u70b9\u3067\u3057\u305f\u3002\n", "tags": ["STNS", "swagger"]}