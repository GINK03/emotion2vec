{"context": " More than 1 year has passed since last update.useDynamicUpdate\u306b\u3064\u3044\u3066\u8ffd\u8a18(2013\u5e7412\u67083\u65e5)\u3002\nPhalcon 1.2.3\u3067\u3069\u306e\u3088\u3046\u306a\u30af\u30a8\u30ea\u30fc\u304c\u751f\u6210\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\nModel\u306eSave\nfind\u30e1\u30bd\u30c3\u30c9\u3067SELECT\u3001save\u30e1\u30bd\u30c3\u30c9\u3067UPDATE\u3002\n\nmodel_save.php\n$robots = TheRobots::find(array('id=1'))->getFirst();\n$robots->year = $robots->year + 1;\n$robots->save();\n\n\n\u5b9f\u884c\u3055\u308c\u308bSQL\u3002\n\nmodel_save.sql\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nUPDATE `the_robots` SET `name` = 'doraemon', `type` = 'cat', `year` = 2056 WHERE `id` = '1'\n\n\n\u5168\u30ab\u30e9\u30e0\u304cUPDATE\u3055\u308c\u307e\u3057\u305f\u3002\n\u3067\u304d\u308c\u3070\u5909\u66f4\u306e\u306a\u3044\u30ab\u30e9\u30e0\u66f4\u65b0\u306f\u907f\u3051\u305f\u3044\u3002\n\nModel\u306euseDynamicUpdate\nuseDynamicUpdate\u3067\u5909\u66f4\u306e\u306a\u3044\u30ab\u30e9\u30e0\u3092UPDATE\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3067\u304d\u307e\u3059\u3002\nhttp://docs.phalconphp.com/en/latest/reference/models.html#dynamic-update\nModel\u306einitialize\u30e1\u30bd\u30c3\u30c9\u3067useDynamicUpdate(true)\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nTheRobots.php\nclass TheRobots extends \\Phalcon\\Mvc\\Model\n{\n    public function initialize() {\n        $this->useDynamicUpdate(true);\n    }\n\n\n\nmodel_save.php\n$robots = TheRobots::find(array('id=1'))->getFirst();\n$robots->year = $robots->year + 1;\n$robots->save();\n\n\n\u5b9f\u884c\u3055\u308c\u308bSQL\u3002\n\nmodel_save.sql\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nUPDATE `the_robots` SET `year` = 2076 WHERE `id` = '1'\n\n\n\nModelManager\u306eexecuteQuery\nModelManager\u3067PHQL\u3068\u3044\u3046\u72ec\u81ea\u306e\u30af\u30a8\u30ea\u30fc\u8a00\u8a9e\u3067\u4efb\u610f\u306e\u30af\u30a8\u30ea\u30fc\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\nmodelmanager.php\n$this->modelsManager->executeQuery('UPDATE TheRobots SET year = year + 1 WHERE id = 1');\n\n\n\u307b\u307c\u666e\u901a\u306eSQL\u3067\u3059\u304c\u3001\u4e0a\u306e1\u884c\u3067\u6b21\u306eSQL\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002useDynamicUpdate\u306f\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\nmodelmanager.sql\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nSTART TRANSACTION\nUPDATE `the_robots` SET `name` = 'doraemon', `type` = 'cat', `year` = `the_robots`.`year` + 1 WHERE `id` = '1'\nCOMMIT\n\n\n\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u3001\u5168\u30ab\u30e9\u30e0\u66f4\u65b0\u3068\u306a\u308a\u307e\u3057\u305f\u3002\nTheRobots\u306buseDynamicUpdate(true)\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u6b21\u306e\u69d8\u306b\u5024\u306e\u5909\u66f4\u304c\u3042\u3063\u305f\u30ab\u30e9\u30e0\u306e\u307f\u306b\u306a\u308a\u307e\u3059\u3002\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nSTART TRANSACTION\nUPDATE `the_robots` SET `year` = `the_robots`.`year` + 1 WHERE `id` = '1'\nCOMMIT\n\n\u3061\u306a\u307f\u306bPHQL\u3067\u306fUPDATE\u306e\u5f8c\u308d\u306f\u300c\u30c6\u30fc\u30d6\u30eb\u540d\u300d\u3067\u306f\u306a\u304f\u3066\u300c\u30e2\u30c7\u30eb\u540d\u300d\u3067\u3059\u3002\n\u30e2\u30c7\u30eb\u306b\u30e2\u30c7\u30eb\u540d\u3068\u306f\u7570\u306a\u308b\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u305f\u5834\u5408\u306b\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\u6b21\u306e\u30b3\u30fc\u30c9\u306e\u3088\u3046\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u305f\u5834\u5408\u306fUPDATE TheRobots\u306b\u306a\u308a\u307e\u3059\u3002\n\nTheRobots.php\nclass TheRobots extends \\Phalcon\\Mvc\\Model\n{\n    public function getSource() {\n        return 'the_robots';\n    }\n\n\n\nPhalcon\\Db\\Adapter\\Pdo\\Mysql\u306eexecute\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f7f\u3046\u3068\u4efb\u610f\u306eSQL\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\nDI\u306bset\u3057\u3066\u3044\u308b\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u4f8b\u3067\u3059\u3002\n\nadapter.php\n$adapter = $this->di->get('db');\n$adapter->execute('UPDATE the_robots SET year = year + 1 WHERE id = 1');\n\n\n\nadapter.sql\nUPDATE the_robots SET year = year + 1 WHERE id = 1\n\n\n\u4efb\u610f\u306eSQL\u3092\u5b9f\u884c\u3057\u305f\u3051\u308c\u3070\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002\n\n**useDynamicUpdate\u306b\u3064\u3044\u3066\u8ffd\u8a18(2013\u5e7412\u67083\u65e5)\u3002**\n\nPhalcon 1.2.3\u3067\u3069\u306e\u3088\u3046\u306a\u30af\u30a8\u30ea\u30fc\u304c\u751f\u6210\u3055\u308c\u308b\u304b\u78ba\u8a8d\u3057\u307e\u3057\u305f\u3002\n\n# Model\u306eSave\n\nfind\u30e1\u30bd\u30c3\u30c9\u3067SELECT\u3001save\u30e1\u30bd\u30c3\u30c9\u3067UPDATE\u3002\n\n```model_save.php\n$robots = TheRobots::find(array('id=1'))->getFirst();\n$robots->year = $robots->year + 1;\n$robots->save();\n```\n\n\u5b9f\u884c\u3055\u308c\u308bSQL\u3002\n\n```model_save.sql\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nUPDATE `the_robots` SET `name` = 'doraemon', `type` = 'cat', `year` = 2056 WHERE `id` = '1'\n```\n\n\u5168\u30ab\u30e9\u30e0\u304cUPDATE\u3055\u308c\u307e\u3057\u305f\u3002\n\u3067\u304d\u308c\u3070\u5909\u66f4\u306e\u306a\u3044\u30ab\u30e9\u30e0\u66f4\u65b0\u306f\u907f\u3051\u305f\u3044\u3002\n\n# Model\u306euseDynamicUpdate\n\nuseDynamicUpdate\u3067\u5909\u66f4\u306e\u306a\u3044\u30ab\u30e9\u30e0\u3092UPDATE\u3055\u308c\u306a\u3044\u3088\u3046\u306b\u3067\u304d\u307e\u3059\u3002\n\nhttp://docs.phalconphp.com/en/latest/reference/models.html#dynamic-update\n\nModel\u306einitialize\u30e1\u30bd\u30c3\u30c9\u3067useDynamicUpdate(true)\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```TheRobots.php\nclass TheRobots extends \\Phalcon\\Mvc\\Model\n{\n    public function initialize() {\n        $this->useDynamicUpdate(true);\n    }\n```\n\n```model_save.php\n$robots = TheRobots::find(array('id=1'))->getFirst();\n$robots->year = $robots->year + 1;\n$robots->save();\n```\n\n\u5b9f\u884c\u3055\u308c\u308bSQL\u3002\n\n```model_save.sql\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nUPDATE `the_robots` SET `year` = 2076 WHERE `id` = '1'\n```\n\n# ModelManager\u306eexecuteQuery\n\nModelManager\u3067PHQL\u3068\u3044\u3046\u72ec\u81ea\u306e\u30af\u30a8\u30ea\u30fc\u8a00\u8a9e\u3067\u4efb\u610f\u306e\u30af\u30a8\u30ea\u30fc\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\n\n```modelmanager.php\n$this->modelsManager->executeQuery('UPDATE TheRobots SET year = year + 1 WHERE id = 1');\n```\n\n\u307b\u307c\u666e\u901a\u306eSQL\u3067\u3059\u304c\u3001\u4e0a\u306e1\u884c\u3067\u6b21\u306eSQL\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002useDynamicUpdate\u306f\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u305b\u3093\u3002\n\n```modelmanager.sql\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nSTART TRANSACTION\nUPDATE `the_robots` SET `name` = 'doraemon', `type` = 'cat', `year` = `the_robots`.`year` + 1 WHERE `id` = '1'\nCOMMIT\n```\n\n\u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u304c\u5b9f\u884c\u3055\u308c\u3001\u5168\u30ab\u30e9\u30e0\u66f4\u65b0\u3068\u306a\u308a\u307e\u3057\u305f\u3002\n\nTheRobots\u306buseDynamicUpdate(true)\u3092\u5b9f\u884c\u3057\u3066\u3044\u305f\u5834\u5408\u306f\u6b21\u306e\u69d8\u306b\u5024\u306e\u5909\u66f4\u304c\u3042\u3063\u305f\u30ab\u30e9\u30e0\u306e\u307f\u306b\u306a\u308a\u307e\u3059\u3002\n\n```\nSELECT `the_robots`.`id`, `the_robots`.`name`, `the_robots`.`type`, `the_robots`.`year` FROM `the_robots` WHERE `the_robots`.`id` = 1\nSTART TRANSACTION\nUPDATE `the_robots` SET `year` = `the_robots`.`year` + 1 WHERE `id` = '1'\nCOMMIT\n```\n\n\u3061\u306a\u307f\u306bPHQL\u3067\u306fUPDATE\u306e\u5f8c\u308d\u306f\u300c\u30c6\u30fc\u30d6\u30eb\u540d\u300d\u3067\u306f\u306a\u304f\u3066\u300c\u30e2\u30c7\u30eb\u540d\u300d\u3067\u3059\u3002\n\u30e2\u30c7\u30eb\u306b\u30e2\u30c7\u30eb\u540d\u3068\u306f\u7570\u306a\u308b\u30c6\u30fc\u30d6\u30eb\u540d\u3092\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u305f\u5834\u5408\u306b\u6ce8\u610f\u3057\u307e\u3057\u3087\u3046\u3002\n\u6b21\u306e\u30b3\u30fc\u30c9\u306e\u3088\u3046\u306b\u30de\u30c3\u30d4\u30f3\u30b0\u3057\u3066\u3044\u305f\u5834\u5408\u306f```UPDATE TheRobots```\u306b\u306a\u308a\u307e\u3059\u3002\n\n```TheRobots.php\nclass TheRobots extends \\Phalcon\\Mvc\\Model\n{\n    public function getSource() {\n        return 'the_robots';\n    }\n```\n\n# Phalcon\\Db\\Adapter\\Pdo\\Mysql\u306eexecute\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306e\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f7f\u3046\u3068\u4efb\u610f\u306eSQL\u3092\u5b9f\u884c\u3067\u304d\u307e\u3059\u3002\nDI\u306bset\u3057\u3066\u3044\u308b\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u4f8b\u3067\u3059\u3002\n\n```adapter.php\n$adapter = $this->di->get('db');\n$adapter->execute('UPDATE the_robots SET year = year + 1 WHERE id = 1');\n```\n\n```adapter.sql\nUPDATE the_robots SET year = year + 1 WHERE id = 1\n```\n\n\u4efb\u610f\u306eSQL\u3092\u5b9f\u884c\u3057\u305f\u3051\u308c\u3070\u30a2\u30c0\u30d7\u30bf\u30fc\u3092\u4f7f\u3044\u307e\u3057\u3087\u3046\u3002", "tags": ["Phalcon", "PHP"]}