{"tags": ["DynamoDB", "PHP", "AWS"], "context": " More than 1 year has passed since last update.\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8(Performance Guide)\u3092\u898b\u3066\u3044\u3066\u3001\u4f55\u304bDynamoDB\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3067\u304d\u306a\u3044\u304b\u3068\u601d\u3063\u3066\u8a66\u3057\u3066\u307f\u305f\u30e1\u30e2\u3067\u3059\u3002\n\u8a66\u3057\u3066\u307f\u305f\u306e\u306f\u3001 \u4e0b\u8a18\u306e3\u7a2e\u985e\u3068\u305d\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u3059\u3002\n\npecl \u306e uri_template\u3092\u5165\u308c\u3066\u307f\u308b\nvalidation \u3092 false\u306b\u3057\u3066\u307f\u308b\nhttp\u63a5\u7d9a\u306b\u3059\u308b (https\u3092\u3084\u3081\u308b)\n\n(http\u306b\u3059\u308b\u3068\u65e9\u304f\u306a\u308b\u3089\u3057\u3044\u3068\u3044\u3046\u306e\u306f\u3001\u3069\u3053\u304b\u3067\u898b\u304b\u3051\u305f\u306e\u3060\u3051\u3069\u3001\u899a\u3048\u3066\u306a\u3044\u2026\uff09\n\n\u30c6\u30b9\u30c8\u5185\u5bb9\n\n$client->getItem() \u3067 1\u4ef6\u53d6\u5f97 \u30921000\u56de\u7e70\u308a\u8fd4\u3057\u3066\u30011\u4ef6\u3054\u3068\u306b\u6d88\u8cbb\u3057\u305f\u79d2\u6570\u306e\u5e73\u5747\u3092\u8a08\u7b97\nRead Capacity\u306f\u4e88\u3081\u591a\u3081\u306b\u3057\u3066\u304a\u304f\u3002\n\n\n\u7d50\u679c\n\n\n\n\u30d1\u30bf\u30fc\u30f3\n\u5e73\u5747\u79d2\u6570\n\n\n\n\nnormal\n0.282\n\n\nuri_template\n0.262\n\n\nvalidation=false\n0.268\n\n\nscheme=http\n0.087\n\n\n\nuri_template \u3068\u3001validation = false\u3000\u306f\u5c11\u3057\u65e9\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u304c\u3001\u65ad\u7136\u65e9\u304f\u306a\u3063\u305f\u306e\u306f\u3001\u300chttp\u63a5\u7d9a\u306b\u3059\u308b\u300d\u3067\u3001\u7d043.2\u500d\u306e\u901f\u5ea6\u304c\u3067\u307e\u3057\u305f\u3002\n\u6b21\u306b\u3001\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n\n\u30d1\u30bf\u30fc\u30f3\n\u5e73\u5747\u79d2\u6570\n\n\n\n\nscheme=http, uri_template\n0.058\n\n\nscheme=http, uri_template, validation=false\n0.056\n\n\n\nhttp\u63a5\u7d9a\uff0buri_template \u306b\u3059\u308b\u3068\u3001\u901a\u5e38\u306e4.8\u500d\u7a0b\u5ea6\u306e\u901f\u5ea6\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nvalidation=false\u3082\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u3042\u307e\u308a\u5909\u308f\u3089\u305a\u3002\n\u4f55\u5ea6\u304b\u8a66\u3057\u3066\u3044\u308b\u3068\u9006\u306b\u9045\u304f\u306a\u308b\u30b1\u30fc\u30b9\u3082\u3042\u308a\u3001\u8aa4\u5dee\u306e\u7bc4\u56f2\u306e\u3088\u3046\u3067\u3059\u3002\n\n\n\u30b3\u30fc\u30c9\n\nhttp\u63a5\u7d9a\u306b\u3059\u308b\n$client = Aws\\DynamoDb\\DynamoDbClient::factory(array(\n    'region' => 'ap-northeast-1',\n    'scheme' => 'http',\n));\n\n\nvalidation \u3092 off\u306b\u3059\u308b\n$client = Aws\\DynamoDb\\DynamoDbClient::factory(array(\n    'region' => 'ap-northeast-1',\n    'validation' => false\n));\n\n\nuri_template\n$ sudo pecl install uri_template\n$ sudo echo \"extension=uri_template.so\" > /etc/php.d/uri_template.ini\n\n\n\u307e\u3068\u3081\n\nhttp\u63a5\u7d9a \uff0b uri_template \u306b\u3059\u308b\u3068\u3001\u901a\u5e38\u306e4.8\u500d\u304f\u3089\u3044\u306b\u306a\u308b\u3088\u3002\n\u5f53\u7136\u306a\u304c\u3089\u6697\u53f7\u5316\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u3054\u5229\u7528\u306f\u81ea\u5df1\u8cac\u4efb\u3067\u3002\n\n\n\u8ffd\u8a18\uff082015/03/07\uff09\nDynamoDB\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b 200\u30df\u30easec\u3068\u304b\u304b\u304b\u3063\u3066\u3066\u3001\u9045\u3059\u304e\u3058\u3083\u306d\uff1f\u3068\u601d\u3063\u3066\u8abf\u3079\u305f\u3089\u3001\nAws\\DynamoDb\\DynamoDbClient::factory \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u3057\u3066\u3001\u521d\u56de\u306egetItem\u306e\u307f\u3001200ms\u304f\u3089\u3044\u304b\u304b\u3063\u3066\u3001\u305d\u308c\u4ee5\u964d\u306f\u6570ms\u306b\u306a\u3063\u305f\u3002\n0.228\n0.007\n0.013\n0.013\n0.01\n0.007\n0.015\n0.013\n0.012\n0.018\n\nhttps \u3067\u3082 http \u3067\u3082\u540c\u69d8\u306b2\u56de\u3081\u4ee5\u964d\u306f \u6570ms\u304b\u3089\u657010ms\u306e\u7bc4\u56f2\u3060\u3063\u305f\u306e\u3067\u3001\u307b\u307c\u5dee\u306f\u307f\u3089\u308c\u306a\u304b\u3063\u305f\u3002\n\u300c\u521d\u56de\u306e\u9045\u3055\u300d\u304c\u4f55\u306b\u8d77\u56e0\u3057\u3066\u3044\u308b\u306e\u304b\u8abf\u67fb\u304c\u5fc5\u8981\u3002\n\n\n\u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8([Performance Guide](http://docs.aws.amazon.com/aws-sdk-php/guide/latest/performance.html))\u3092\u898b\u3066\u3044\u3066\u3001\u4f55\u304bDynamoDB\u306e\u30a2\u30af\u30bb\u30b9\u3092\u30c1\u30e5\u30fc\u30cb\u30f3\u30b0\u3067\u304d\u306a\u3044\u304b\u3068\u601d\u3063\u3066\u8a66\u3057\u3066\u307f\u305f\u30e1\u30e2\u3067\u3059\u3002\n\n\u8a66\u3057\u3066\u307f\u305f\u306e\u306f\u3001 \u4e0b\u8a18\u306e3\u7a2e\u985e\u3068\u305d\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u3059\u3002\n\n1. pecl \u306e uri_template\u3092\u5165\u308c\u3066\u307f\u308b\n2. validation \u3092 false\u306b\u3057\u3066\u307f\u308b\n3. http\u63a5\u7d9a\u306b\u3059\u308b (https\u3092\u3084\u3081\u308b)\n\n(http\u306b\u3059\u308b\u3068\u65e9\u304f\u306a\u308b\u3089\u3057\u3044\u3068\u3044\u3046\u306e\u306f\u3001\u3069\u3053\u304b\u3067\u898b\u304b\u3051\u305f\u306e\u3060\u3051\u3069\u3001\u899a\u3048\u3066\u306a\u3044\u2026\uff09\n\n## \u30c6\u30b9\u30c8\u5185\u5bb9\n\n* $client->getItem() \u3067 1\u4ef6\u53d6\u5f97 \u30921000\u56de\u7e70\u308a\u8fd4\u3057\u3066\u30011\u4ef6\u3054\u3068\u306b\u6d88\u8cbb\u3057\u305f\u79d2\u6570\u306e\u5e73\u5747\u3092\u8a08\u7b97\n* Read Capacity\u306f\u4e88\u3081\u591a\u3081\u306b\u3057\u3066\u304a\u304f\u3002\n\n\n## \u7d50\u679c\n\n| \u30d1\u30bf\u30fc\u30f3 | \u5e73\u5747\u79d2\u6570 |\n|:-----------|------------:|\n| normal | 0.282|\n| uri_template       |  0.262      |\n| validation=false |0.268 | \n| scheme=http | 0.087 |\n\nuri_template \u3068\u3001validation = false\u3000\u306f\u5c11\u3057\u65e9\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\u304c\u3001\u65ad\u7136\u65e9\u304f\u306a\u3063\u305f\u306e\u306f\u3001\u300chttp\u63a5\u7d9a\u306b\u3059\u308b\u300d\u3067\u3001\u7d043.2\u500d\u306e\u901f\u5ea6\u304c\u3067\u307e\u3057\u305f\u3002\n\n\u6b21\u306b\u3001\u4e0a\u8a18\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u8a66\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\n| \u30d1\u30bf\u30fc\u30f3 | \u5e73\u5747\u79d2\u6570 |\n|:-----------|------------:|\n| scheme=http, uri_template | 0.058  |\n| scheme=http, uri_template, validation=false | 0.056 |\n\nhttp\u63a5\u7d9a\uff0buri_template \u306b\u3059\u308b\u3068\u3001\u901a\u5e38\u306e4.8\u500d\u7a0b\u5ea6\u306e\u901f\u5ea6\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nvalidation=false\u3082\u7d44\u307f\u5408\u308f\u305b\u3066\u307f\u307e\u3057\u305f\u304c\u3001\u3042\u307e\u308a\u5909\u308f\u3089\u305a\u3002\n\u4f55\u5ea6\u304b\u8a66\u3057\u3066\u3044\u308b\u3068\u9006\u306b\u9045\u304f\u306a\u308b\u30b1\u30fc\u30b9\u3082\u3042\u308a\u3001\u8aa4\u5dee\u306e\u7bc4\u56f2\u306e\u3088\u3046\u3067\u3059\u3002\n\n![DynamoDB-Performance-Test.png](https://qiita-image-store.s3.amazonaws.com/0/18743/86fc8c81-80aa-970d-1704-306cdbb9d10b.png \"DynamoDB-Performance-Test.png\")\n\n\n## \u30b3\u30fc\u30c9\n\n### http\u63a5\u7d9a\u306b\u3059\u308b\n\n```php\n$client = Aws\\DynamoDb\\DynamoDbClient::factory(array(\n    'region' => 'ap-northeast-1',\n    'scheme' => 'http',\n));\n```\n\n### validation \u3092 off\u306b\u3059\u308b\n\n```php\n$client = Aws\\DynamoDb\\DynamoDbClient::factory(array(\n    'region' => 'ap-northeast-1',\n    'validation' => false\n));\n```\n\n### uri_template\n\n```\n$ sudo pecl install uri_template\n$ sudo echo \"extension=uri_template.so\" > /etc/php.d/uri_template.ini\n```\n\n## \u307e\u3068\u3081\n\n* http\u63a5\u7d9a \uff0b uri_template \u306b\u3059\u308b\u3068\u3001\u901a\u5e38\u306e4.8\u500d\u304f\u3089\u3044\u306b\u306a\u308b\u3088\u3002\n* \u5f53\u7136\u306a\u304c\u3089\u6697\u53f7\u5316\u3055\u308c\u306a\u3044\u306e\u3067\u3001\u3054\u5229\u7528\u306f\u81ea\u5df1\u8cac\u4efb\u3067\u3002\n\n## \u8ffd\u8a18\uff082015/03/07\uff09\n\nDynamoDB\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306b 200\u30df\u30easec\u3068\u304b\u304b\u304b\u3063\u3066\u3066\u3001\u9045\u3059\u304e\u3058\u3083\u306d\uff1f\u3068\u601d\u3063\u3066\u8abf\u3079\u305f\u3089\u3001\nAws\\DynamoDb\\DynamoDbClient::factory \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u751f\u6210\u3057\u3066\u3001\u521d\u56de\u306egetItem\u306e\u307f\u3001200ms\u304f\u3089\u3044\u304b\u304b\u3063\u3066\u3001\u305d\u308c\u4ee5\u964d\u306f\u6570ms\u306b\u306a\u3063\u305f\u3002\n\n```\n0.228\n0.007\n0.013\n0.013\n0.01\n0.007\n0.015\n0.013\n0.012\n0.018\n```\n\nhttps \u3067\u3082 http \u3067\u3082\u540c\u69d8\u306b2\u56de\u3081\u4ee5\u964d\u306f \u6570ms\u304b\u3089\u657010ms\u306e\u7bc4\u56f2\u3060\u3063\u305f\u306e\u3067\u3001\u307b\u307c\u5dee\u306f\u307f\u3089\u308c\u306a\u304b\u3063\u305f\u3002\n\n\u300c\u521d\u56de\u306e\u9045\u3055\u300d\u304c\u4f55\u306b\u8d77\u56e0\u3057\u3066\u3044\u308b\u306e\u304b\u8abf\u67fb\u304c\u5fc5\u8981\u3002\n\n\n\n\n\n\n\n\n"}