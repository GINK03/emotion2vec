{"context": "\n\n\u25a0\u53c2\u8003\u30b5\u30a4\u30c8\n\neb\u30b3\u30de\u30f3\u30c9\u6e96\u5099\n\n\u3044\u3064\u306e\u9593\u306b\u304bpip\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u697d\u306b\u306a\u3063\u3066\u305f\u4ef6 - Qiita\npip - Python\u5165\u9580\nAmazon Linux \u306ePython \u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066boto\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 | \u30ca\u30ec\u30b3\u30e0AWS\u30ec\u30b7\u30d4\nInstall the EB Command Line Interface (CLI) - AWS Elastic Beanstalk\n\n\n\u305d\u306e\u4ed6\n\nAWS\u3067\u30b8\u30e7\u30d6Worker\u3092\u69cb\u6210\u3059\u308b\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9 \u301c Beanstalk worker tier\u306e\u5dfb \uff5c Developers.IO\n\uff08\u8d85\u30e1\u30e2\uff09Elastic Beanstalk \u306e Worker Tier \u306b\u3064\u3044\u3066\uff08cron \u3063\u307d\u3044\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u308b\uff09 - \u3088\u3046\u3078\u3044\u306e\u65e5\u3005\u7cbe\u9032XP\nAmazon Web Services \u30d6\u30ed\u30b0: AWS Elastic Beanstalk - Eb\u3092\u4f7f\u3063\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u7c21\u5358\u64cd\u4f5c!\nAWS Elastic Beanstalk\u304cIAMRole\u306b\u5bfe\u5fdc\u3057\u305f\u3088\u3046\u3067\u3059 \uff5c Developers.IO\namazon web services - AWS Elastic Beanstalk ServiceRole Error When Logging In To A Role - Stack Overflow\n2\u79d2\u3067\u8a2d\u5b9a\uff01 AWS Elastic Beanstalk \u306b\u3088\u308b\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u306a\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\uff5cDX.univ\nElasticBeanstalk .ebextensions \u9006\u5f15\u304d\u8f9e\u5178 - Qiita\nAWS Elastic Beanstalk\u3067\u74b0\u5883\u69cb\u7bc9\u81ea\u52d5\u5316 - Qiita\nAmazon Web Services (AWS) users | New Relic Documentation\nAmazon ElasticBeanstalk\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092NewRelic\u3067\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3059\u308b - yustam.jp\n\n\n\u25a0\u5b9f\u884c\u3057\u305f\u624b\u9806\n\n\u306f\u3058\u3081\u306b\n\n\u30ed\u30fc\u30ab\u30eb\u306e\u74b0\u5883\u3060\u3068\u3001python2.7\u304cyum\u304b\u3089\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u74b0\u5883\u3063\u307d\u304b\u3063\u305f\u306e\u3067\u3042\u304d\u3089\u3081\u307e\u3057\u305f\u3002\n$ cat /etc/redhat-release \nCentOS release 6.4 (Final)\n\n\n\u624b\u9806\u5909\u66f4\n\n\u4eca\u306edev\u74b0\u5883\u306eEC2\u3067\u8a66\u3057\u3066\u307f\u305f\n# pip\u304c\u3044\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30d1\u30a4\u30d7\u5f8c\u306bsudo\u5165\u308c\u306a\u304b\u3063\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u30fb\u30fb\n$ curl -kL https://bootstrap.pypa.io/get-pip.py | sudo python\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c\uff01\u3051\u3069\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3061\u3083\u3063\u305f\u30fb\u30fb\u30fb\n$ sudo pip install awsebcli\n    error: invalid command 'egg_info'\n\n    ----------------------------------------\nCommand \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-build-BsqCf2/awsebcli/\n\n# \u4e0b\u8a18\u3067\u89e3\u6c7a\u3059\u308b\u3089\u3057\u3044\u306e\u3067\u3001\u5b9f\u884c\uff01\u3053\u308c\u3082\u5931\u6557\u3059\u308b\u304b\u3068\u601d\u3063\u305f\u3051\u3069\u3001\u6210\u529f\u3057\u305f\u307f\u305f\u3044\n$ sudo pip install --upgrade setuptools\n....\nSuccessfully installed setuptools-20.7.0\n\n# \u524d\u306b\u623b\u3063\u3066\u3001awsebcli\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo pip install awsebcli\n.....\nSuccessfully installed awsebcli-3.7.5 backports.ssl-match-hostname-3.5.0.1 blessed-1.9.5 botocore-1.4.11 cement-2.8.2 colorama-0.3.7 docker-py-1.7.2 dockerpty-0.4.1 docopt-0.6.2 jmespath-0.9.0 pathspec-0.3.4 pyyaml-3.11 requests-2.9.1 semantic-version-2.5.0 texttable-0.8.4 wcwidth-0.1.6 websocket-client-0.37.0\n\n# init\u3057\u3066\u307f\u305f\u3051\u3069\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30ed\u30fc\u30eb\u304c\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fborz\n$ eb init -p PHP\nERROR: Elastic Beanstalk could not find any platforms. Ensure you have the necessary permissions to access Elastic Beanstalk.\n\n\n\u307e\u305f\u624b\u9806\u5909\u66f4\n\n\u5225\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3067\u8a66\u3059\u304c\u3001\u307e\u305f\u30a8\u30e9\u30fc\u30fb\u30fb\u30fb\n# \u4e0a\u8a18\u306e\u9806\u756a\u3067 pip \u3068 setuptools \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5f8c\u3001awsebcli \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u8a66\u3059\u3068\u3001\u3001\u3001\u3001\u30a8\u30e9\u30fc\u30fb\u30fb\u30fb\n$ sudo /usr/local/bin/pip install awsebcli\n....\n  compilation terminated.\n  error: command 'gcc' failed with exit status 1\n\n  ----------------------------------------\n  Failed building wheel for pyyaml\n  Running setup.py clean for pyyaml\nFailed to build pyyaml\n    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c ext/_yaml.c -o build/temp.linux-x86_64-2.7/ext/_yaml.o\n    ext/_yaml.c:8:22: fatal error: pyconfig.h: \u305d\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093\n     #include \"pyconfig.h\"\n                          ^\n    compilation terminated.\n    error: command 'gcc' failed with exit status 1\n\n    ----------------------------------------\n  Rolling back uninstall of PyYAML\nCommand \"/usr/bin/python27 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-OUqEgT/pyyaml/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-4aVRaP-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-OUqEgT/pyyaml/\n\n\n\u56f0\u308a\u679c\u3066\u3001\u3068\u308a\u3042\u3048\u305aEC2\u3078 python2.7 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u6bb5\u3092\u30b0\u30b0\u308b\u3068\u3001\u53c2\u8003\u30b5\u30a4\u30c8\u306eURL\u3092\u767a\u898b\u3057\u3001\u305d\u306e\u624b\u9806\u901a\u308a\u9032\u3081\u308b\u3002\n$ sudo yum install python27\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:priorities, update-motd, upgrade-helper\namzn-main/latest                                                                                                             | 2.1 kB     00:00     \namzn-updates/latest                                                                                                          | 2.3 kB     00:00     \n\u30d1\u30c3\u30b1\u30fc\u30b8 python27-2.7.10-4.120.amzn1.x86_64 \u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u304b\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059\n\n#\u3053\u308c\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u306a\u304b\u3063\u305f\u6a21\u69d8\u3002\u3002\u3002orz\n$ sudo yum install python27-devel\n\u5b8c\u4e86\u3057\u307e\u3057\u305f!\n$ sudo rm /usr/bin/python\n$ sudo ln -s /usr/bin/python2.7 /usr/bin/python\n$ sudo cp /usr/bin/yum /usr/bin/_yum_old\n\n#\u3000\u3053\u3053\u306f\u3001URL\u306e\u901a\u308a\u305f\u305f\u304f\u3068\u30c0\u30e1\u3067\u3057\u305f\u3002\n$ sudo sed -i s/python/python2.6/g /usr/bin/yum\n$ python --version\nPython 2.7.10\n\n$ sudo curl -o /usr/local/src/ez_setup.py https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py\n$ cd /usr/local/src/\n$ sudo python ez_setup.py \n$ which easy_install-2.7\n/usr/local/bin/easy_install-2.7\n\n$ sudo /usr/local/bin/easy_install-2.7 pip\nFinished processing dependencies for pip\n\n# \u3053\u3053\u3082\u305d\u306e\u307e\u307e\u3067\u306f\u306a\u304b\u3063\u305f\u3088\u3046\u3067\u3001\u300cpip\u300d\u3068\u3057\u3066\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3057\u305f\u3002\n$ which pip\n/usr/local/bin/pip\n$ sudo /usr/local/bin/pip install awsebcli\nSuccessfully installed awsebcli-3.7.5 cement-2.8.2 colorama-0.3.7 docker-py-1.7.2 docopt-0.6.2 pathspec-0.3.4 pyyaml-3.11 semantic-version-2.5.0 texttable-0.8.4\n\n#\u3067\u304d\u305f\u30fc\uff01\n$ eb --version\nEB CLI 3.7.5 (Python 2.7.1)\n\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u65e9\u901f\u4f5c\u3063\u3066\u307f\u308b\n$ eb init\nSelect a default region\n1) us-east-1 : US East (N. Virginia)\n2) us-west-1 : US West (N. California)\n3) us-west-2 : US West (Oregon)\n4) eu-west-1 : EU (Ireland)\n5) eu-central-1 : EU (Frankfurt)\n6) ap-southeast-1 : Asia Pacific (Singapore)\n7) ap-southeast-2 : Asia Pacific (Sydney)\n8) ap-northeast-1 : Asia Pacific (Tokyo)\n9) ap-northeast-2 : Asia Pacific (Seoul)\n10) sa-east-1 : South America (Sao Paulo)\n11) cn-north-1 : China (Beijing)\n(default is 3): 8 # Asia Pacific (Tokyo)\u3092\u6307\u5b9a\u3002\n\nSelect an application to use\n1) \u521d\u3081\u3066\u306e Elastic Beanstalk \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n2) [ Create new Application ]\n(default is 2): 2\u3000# \u65b0\u898f\u3067\u4f5c\u6210\n\nEnter Application Name\n(default is \"ec2-user\"): dev-XXXXX-XXXXX-worker\u3000# Worker tier\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\nApplication dev-XXXXX-XXXXX-worker has been created.\n\nSelect a platform.\n1) Node.js\n2) PHP\n3) Python\n4) Ruby\n5) Tomcat\n6) IIS\n7) Docker\n8) Multi-container Docker\n9) GlassFish\n10) Go\n11) Java\n(default is 1): 2\u3000# PHP\u306a\u306e\u3067\u3002\n\nSelect a platform version.\n1) PHP 5.4\n2) PHP 5.5\n3) PHP 5.6\n4) PHP 5.3\n(default is 1): 1\u3000# 5.4\u3092\u9078\u629e\nDo you want to set up SSH for your instances?\u3000#\u3000SSH\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u3059\u308b\u304b\n(y/n): y\n\nSelect a keypair.\n1) XXXXXdev\n2) XXXXXproxy\n3) [ Create new KeyPair ]\n(default is 3): 1\u3000# \u3068\u308a\u3042\u3048\u305a\u65e2\u5b58\u306e\u3082\u306e\u3092\u4f7f\u3046\u3002\n\n#\u3000\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3000\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066\u3001\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3002\n$ eb create --tier worker --instance_profile aws-elasticbeanstalk-ec2-role\nEnter Environment Name\n(default is dev-XXXXX-XXXXX-XXXXX): \nCreating application version archive \"app-XXXXX_XXXXX\".\nUploading dev-XXXXX-XXXXX-XXXXX/app-XXXXX_XXXXX.zip to S3. This may take a while.\nUpload Complete.\nEnvironment details for: dev-XXXXX-XXXXX-XXXXX\n  Application name: dev-XXXXX-XXXXX-XXXXX\n  Region: ap-northeast-1\n  Deployed Version: app-XXXXX_XXXXX\n  Environment ID: e-XXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXXXX+00:00\nPrinting Status:\nINFO: createEnvironment is starting.\nINFO: Using elasticbeanstalk-ap-northeast-1-XXXXXXXXX as Amazon S3 storage bucket for environment data.\nERROR: Unable to assign role. Please verify that you have permission to pass this role: aws-elasticbeanstalk-service-role.\nERROR: Failed to launch environment.\n\nERROR: Failed to launch environment.\n# \u307e\u305f\u30a8\u30e9\u30fc\u3002\u3002\u3002\u3002\n\n\n\u3082\u308d\u3082\u308d\u8a66\u3057\u3066\u307f\u308b\u3068\u3001eb\u30b3\u30de\u30f3\u30c9\u306b\u8a2d\u5b9a\u3057\u305fAPI\u30ad\u30fc\u3092\u6301\u3064\u30e6\u30fc\u30b6\u306e\u6a29\u9650\u306b ElasticBeanstalk \u306e\u6a29\u9650\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u4e0b\u8a18\u306e\u6a29\u9650\u3092\u4e00\u65e6\u4ed8\u4e0e\u3002\n\nAWSElasticBeanstalkFullAccess\n\n\n\u3082\u3046\u4e00\u5ea6\u5b9f\u884c\n$ eb create --tier worker --instance_profile aws-elasticbeanstalk-ec2-role\nEnter Environment Name\n(default is dev-XXXXX-XXXXX-eb-0): \nCreating application version archive \"app-XXXXX_XXXXX\".\nUploading dev-XXXXX-XXXXX-eb/app-XXXXX_XXXXX.zip to S3. This may take a while.\nUpload Complete.\nApplication dev-XXXXX-XXXXX-eb has been created.\nEnvironment details for: dev-XXXXX-XXXXX-eb-0\n  Application name: dev-XXXXX-XXXXX-eb\n  Region: ap-northeast-1\n  Deployed Version: app-XXXXX_XXXXX\n  Environment ID: e-XXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXX000+00:00\nPrinting Status:\nINFO: createEnvironment is starting.\nINFO: Using elasticbeanstalk-ap-northeast-1-XXXXXXXXX as Amazon S3 storage bucket for environment data.\nINFO: Created security group named: awseb-e-XXXXXX-stack-AWSEBSecurityGroup-XXXXXXXXXX\nINFO: Created Auto Scaling launch configuration named: awseb-e-XXXXXXXX-stack-AWSEBAutoScalingLaunchConfiguration-XXXXXXXXXXXX\nINFO: Environment health has transitioned to Pending. Initialization in progress (running for 25 seconds). There are no instances.\nINFO: Created Auto Scaling group named: awseb-e-XXXXXXXX-stack-AWSEBAutoScalingGroup-XXXXXXXXXXXX\nINFO: Waiting for EC2 instances to launch. This may take a few minutes.\nINFO: Added instance [i-XXXXXXXXXX] to your environment.\n# \u30ad\u30bf\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\uff01\n\n# \u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u72b6\u6cc1\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u306e\u3053\u3068\n$ eb status\nEnvironment details for: dev-XXXXX-XXXXX-eb-0\n  Application name: dev-XXXXX-XXXXX-eb\n  Region: ap-northeast-1\n  Deployed Version: None\n  Environment ID: e-XXXXXXXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXXXX+00:00\n  Status: Launching\n  Health: Grey\u3000\u3000\u3000\u3000\u2190\u3000\u307e\u3060Grey\u306a\u306e\u3067\u3001\u672a\u5b8c\u6210\u3002Green\u306b\u306a\u308b\u306e\u3067\u3001\u5f85\u3064\u3002\n\n# \u51fa\u6765\u305f\uff01\uff01\uff01\uff01\n$ eb status\nEnvironment details for: dev-XXXXX-XXXXX-eb-0\n  Application name: dev-XXXXX-XXXXX-eb\n  Region: ap-northeast-1\n  Deployed Version: None\n  Environment ID: e-XXXXXXXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXXXX+00:00\n  Status: Ready\n  Health: Green\n\n# \u51fa\u6765\u305f\u3089\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067SSH\u3067\u304d\u308b\u3089\u3057\u3044\u3002\n$ eb ssh\nINFO: Attempting to open port 22.\nINFO: SSH port 22 open.\nThe authenticity of host 'XXX.XXX.XXX.XXX (XXX.XXX.XXX.XXX)' can't be established.\nECDSA key fingerprint is XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added 'XXX.XXX.XXX.XXX' (ECDSA) to the list of known hosts.\n _____ _           _   _      ____                       _        _ _\n| ____| | __ _ ___| |_(_) ___| __ )  ___  __ _ _ __  ___| |_ __ _| | | __\n|  _| | |/ _` / __| __| |/ __|  _ \\ / _ \\/ _` | '_ \\/ __| __/ _` | | |/ /\n| |___| | (_| \\__ \\ |_| | (__| |_) |  __/ (_| | | | \\__ \\ || (_| | |   <\n|_____|_|\\__,_|___/\\__|_|\\___|____/ \\___|\\__,_|_| |_|___/\\__\\__,_|_|_|\\_\\\n                                       Amazon Linux AMI\n\nThis EC2 instance is managed by AWS Elastic Beanstalk. Changes made via SSH \nWILL BE LOST if the instance is replaced by auto-scaling. For more information \non customizing your Elastic Beanstalk environment, see our documentation here: \nhttp://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html\n\n$ \n\n\n\u25a0\u307e\u3068\u3081\n\n\u4e0a\u8a18\u3092\u898b\u308b\u3068\u3001\u3042\u308b\u7a0b\u5ea6\u3059\u3093\u306a\u308a\u9032\u3093\u3060\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u7d50\u69cb\u82e6\u6226\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u3002\u3002TT  \u3042\u3042\u9577\u304b\u3063\u305f\u30fb\u30fb\u30fb\n\n#\u25a0\u53c2\u8003\u30b5\u30a4\u30c8\n## eb\u30b3\u30de\u30f3\u30c9\u6e96\u5099\n- [\u3044\u3064\u306e\u9593\u306b\u304bpip\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u697d\u306b\u306a\u3063\u3066\u305f\u4ef6 - Qiita](http://qiita.com/who_you_me/items/831d62f396e6d66dda66)\n- [pip - Python\u5165\u9580](http://kaworu.jpn.org/python/pip#python_setup.py_egg_info)\n- [Amazon Linux \u306ePython \u3092\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3057\u3066boto\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002 | \u30ca\u30ec\u30b3\u30e0AWS\u30ec\u30b7\u30d4](http://recipe.kc-cloud.jp/archives/4296)\n- [Install the EB Command Line Interface (CLI) - AWS Elastic Beanstalk](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb-cli3-install.html?icmpid=docs_elasticbeanstalk_console)\n\n## \u305d\u306e\u4ed6\n- [AWS\u3067\u30b8\u30e7\u30d6Worker\u3092\u69cb\u6210\u3059\u308b\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9 \u301c Beanstalk worker tier\u306e\u5dfb \uff5c Developers.IO](http://dev.classmethod.jp/cloud/aws/aws-job-worker-beanstalk/#note-1-2)\n- [\uff08\u8d85\u30e1\u30e2\uff09Elastic Beanstalk \u306e Worker Tier \u306b\u3064\u3044\u3066\uff08cron \u3063\u307d\u3044\u3053\u3068\u3092\u3084\u3063\u3066\u307f\u308b\uff09 - \u3088\u3046\u3078\u3044\u306e\u65e5\u3005\u7cbe\u9032XP](http://inokara.hateblo.jp/entry/2015/11/29/230124)\n- [Amazon Web Services \u30d6\u30ed\u30b0: AWS Elastic Beanstalk - Eb\u3092\u4f7f\u3063\u3066\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u304b\u3089\u7c21\u5358\u64cd\u4f5c!](http://aws.typepad.com/aws_japan/2012/06/aws-elastic-beanstalk-simplified-command-line-access-with-eb.html)\n- [AWS Elastic Beanstalk\u304cIAMRole\u306b\u5bfe\u5fdc\u3057\u305f\u3088\u3046\u3067\u3059 \uff5c Developers.IO](http://dev.classmethod.jp/cloud/eb-iamrole/)\n- [amazon web services - AWS Elastic Beanstalk ServiceRole Error When Logging In To A Role - Stack Overflow](http://stackoverflow.com/questions/31977441/aws-elastic-beanstalk-servicerole-error-when-logging-in-to-a-role)\n- [2\u79d2\u3067\u8a2d\u5b9a\uff01 AWS Elastic Beanstalk \u306b\u3088\u308b\u30aa\u30fc\u30c8\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u306a\u30b5\u30fc\u30d0\u30fc\u69cb\u7bc9\uff5cDX.univ](http://dx.24-7.co.jp/beanstalk/)\n- [ElasticBeanstalk .ebextensions \u9006\u5f15\u304d\u8f9e\u5178 - Qiita](http://qiita.com/inouet/items/e8b39962c0de0f866531)\n- [AWS Elastic Beanstalk\u3067\u74b0\u5883\u69cb\u7bc9\u81ea\u52d5\u5316 - Qiita](http://qiita.com/supertaihei02/items/b2373890b7e739ded318)\n- [Amazon Web Services (AWS) users | New Relic Documentation](https://docs.newrelic.com/docs/accounts-partnerships/partnerships/partner-based-installation/amazon-web-services-aws-users)\n- [Amazon ElasticBeanstalk\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092NewRelic\u3067\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u3059\u308b - yustam.jp](http://yustam.hatenablog.com/entry/2014/04/09/142410)\n\n\n#\u25a0\u5b9f\u884c\u3057\u305f\u624b\u9806\n## \u306f\u3058\u3081\u306b\n###\u30ed\u30fc\u30ab\u30eb\u306e\u74b0\u5883\u3060\u3068\u3001python2.7\u304cyum\u304b\u3089\u7c21\u5358\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u304d\u306a\u3044\u74b0\u5883\u3063\u307d\u304b\u3063\u305f\u306e\u3067\u3042\u304d\u3089\u3081\u307e\u3057\u305f\u3002\n```bash\n$ cat /etc/redhat-release \nCentOS release 6.4 (Final)\n```\n\n## \u624b\u9806\u5909\u66f4\n###\u4eca\u306edev\u74b0\u5883\u306eEC2\u3067\u8a66\u3057\u3066\u307f\u305f\n```bash\n# pip\u304c\u3044\u308b\u307f\u305f\u3044\u306a\u306e\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3001\u30d1\u30a4\u30d7\u5f8c\u306bsudo\u5165\u308c\u306a\u304b\u3063\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u30fb\u30fb\n$ curl -kL https://bootstrap.pypa.io/get-pip.py | sudo python\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5b9f\u884c\uff01\u3051\u3069\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3061\u3083\u3063\u305f\u30fb\u30fb\u30fb\n$ sudo pip install awsebcli\n    error: invalid command 'egg_info'\n    \n    ----------------------------------------\nCommand \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-build-BsqCf2/awsebcli/\n\n# \u4e0b\u8a18\u3067\u89e3\u6c7a\u3059\u308b\u3089\u3057\u3044\u306e\u3067\u3001\u5b9f\u884c\uff01\u3053\u308c\u3082\u5931\u6557\u3059\u308b\u304b\u3068\u601d\u3063\u305f\u3051\u3069\u3001\u6210\u529f\u3057\u305f\u307f\u305f\u3044\n$ sudo pip install --upgrade setuptools\n....\nSuccessfully installed setuptools-20.7.0\n\n# \u524d\u306b\u623b\u3063\u3066\u3001awsebcli\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo pip install awsebcli\n.....\nSuccessfully installed awsebcli-3.7.5 backports.ssl-match-hostname-3.5.0.1 blessed-1.9.5 botocore-1.4.11 cement-2.8.2 colorama-0.3.7 docker-py-1.7.2 dockerpty-0.4.1 docopt-0.6.2 jmespath-0.9.0 pathspec-0.3.4 pyyaml-3.11 requests-2.9.1 semantic-version-2.5.0 texttable-0.8.4 wcwidth-0.1.6 websocket-client-0.37.0\n\n# init\u3057\u3066\u307f\u305f\u3051\u3069\u3001\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306b\u30ed\u30fc\u30eb\u304c\u306a\u304b\u3063\u305f\u30fb\u30fb\u30fborz\n$ eb init -p PHP\nERROR: Elastic Beanstalk could not find any platforms. Ensure you have the necessary permissions to access Elastic Beanstalk.\n```\n\n## \u307e\u305f\u624b\u9806\u5909\u66f4\n###\u5225\u306eEC2\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9(Amazon Linux)\u3067\u8a66\u3059\u304c\u3001\u307e\u305f\u30a8\u30e9\u30fc\u30fb\u30fb\u30fb\n```bash\n# \u4e0a\u8a18\u306e\u9806\u756a\u3067 pip \u3068 setuptools \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u5f8c\u3001awsebcli \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3092\u8a66\u3059\u3068\u3001\u3001\u3001\u3001\u30a8\u30e9\u30fc\u30fb\u30fb\u30fb\n$ sudo /usr/local/bin/pip install awsebcli\n....\n  compilation terminated.\n  error: command 'gcc' failed with exit status 1\n  \n  ----------------------------------------\n  Failed building wheel for pyyaml\n  Running setup.py clean for pyyaml\nFailed to build pyyaml\n    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c ext/_yaml.c -o build/temp.linux-x86_64-2.7/ext/_yaml.o\n    ext/_yaml.c:8:22: fatal error: pyconfig.h: \u305d\u306e\u3088\u3046\u306a\u30d5\u30a1\u30a4\u30eb\u3084\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u3042\u308a\u307e\u305b\u3093\n     #include \"pyconfig.h\"\n                          ^\n    compilation terminated.\n    error: command 'gcc' failed with exit status 1\n    \n    ----------------------------------------\n  Rolling back uninstall of PyYAML\nCommand \"/usr/bin/python27 -u -c \"import setuptools, tokenize;__file__='/tmp/pip-build-OUqEgT/pyyaml/setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\\r\\n', '\\n'), __file__, 'exec'))\" install --record /tmp/pip-4aVRaP-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-OUqEgT/pyyaml/\n```\n\n###\u56f0\u308a\u679c\u3066\u3001\u3068\u308a\u3042\u3048\u305aEC2\u3078 python2.7 \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u624b\u6bb5\u3092\u30b0\u30b0\u308b\u3068\u3001[\u53c2\u8003\u30b5\u30a4\u30c8\u306eURL](http://recipe.kc-cloud.jp/archives/4296)\u3092\u767a\u898b\u3057\u3001\u305d\u306e\u624b\u9806\u901a\u308a\u9032\u3081\u308b\u3002\n```bash\n$ sudo yum install python27\n\u8aad\u307f\u8fbc\u3093\u3060\u30d7\u30e9\u30b0\u30a4\u30f3:priorities, update-motd, upgrade-helper\namzn-main/latest                                                                                                             | 2.1 kB     00:00     \namzn-updates/latest                                                                                                          | 2.3 kB     00:00     \n\u30d1\u30c3\u30b1\u30fc\u30b8 python27-2.7.10-4.120.amzn1.x86_64 \u306f\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u304b\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3059\n\n#\u3053\u308c\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u306a\u304b\u3063\u305f\u6a21\u69d8\u3002\u3002\u3002orz\n$ sudo yum install python27-devel\n\u5b8c\u4e86\u3057\u307e\u3057\u305f!\n$ sudo rm /usr/bin/python\n$ sudo ln -s /usr/bin/python2.7 /usr/bin/python\n$ sudo cp /usr/bin/yum /usr/bin/_yum_old\n\n#\u3000\u3053\u3053\u306f\u3001URL\u306e\u901a\u308a\u305f\u305f\u304f\u3068\u30c0\u30e1\u3067\u3057\u305f\u3002\n$ sudo sed -i s/python/python2.6/g /usr/bin/yum\n$ python --version\nPython 2.7.10\n\n$ sudo curl -o /usr/local/src/ez_setup.py https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py\n$ cd /usr/local/src/\n$ sudo python ez_setup.py \n$ which easy_install-2.7\n/usr/local/bin/easy_install-2.7\n\n$ sudo /usr/local/bin/easy_install-2.7 pip\nFinished processing dependencies for pip\n\n# \u3053\u3053\u3082\u305d\u306e\u307e\u307e\u3067\u306f\u306a\u304b\u3063\u305f\u3088\u3046\u3067\u3001\u300cpip\u300d\u3068\u3057\u3066\u4e0a\u66f8\u304d\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3057\u305f\u3002\n$ which pip\n/usr/local/bin/pip\n$ sudo /usr/local/bin/pip install awsebcli\nSuccessfully installed awsebcli-3.7.5 cement-2.8.2 colorama-0.3.7 docker-py-1.7.2 docopt-0.6.2 pathspec-0.3.4 pyyaml-3.11 semantic-version-2.5.0 texttable-0.8.4\n\n#\u3067\u304d\u305f\u30fc\uff01\n$ eb --version\nEB CLI 3.7.5 (Python 2.7.1)\n```\n\n###\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u3067\u304d\u305f\u306e\u3067\u3001\u65e9\u901f\u4f5c\u3063\u3066\u307f\u308b\n```bash\n$ eb init\nSelect a default region\n1) us-east-1 : US East (N. Virginia)\n2) us-west-1 : US West (N. California)\n3) us-west-2 : US West (Oregon)\n4) eu-west-1 : EU (Ireland)\n5) eu-central-1 : EU (Frankfurt)\n6) ap-southeast-1 : Asia Pacific (Singapore)\n7) ap-southeast-2 : Asia Pacific (Sydney)\n8) ap-northeast-1 : Asia Pacific (Tokyo)\n9) ap-northeast-2 : Asia Pacific (Seoul)\n10) sa-east-1 : South America (Sao Paulo)\n11) cn-north-1 : China (Beijing)\n(default is 3): 8 # Asia Pacific (Tokyo)\u3092\u6307\u5b9a\u3002\n\nSelect an application to use\n1) \u521d\u3081\u3066\u306e Elastic Beanstalk \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\n2) [ Create new Application ]\n(default is 2): 2\u3000# \u65b0\u898f\u3067\u4f5c\u6210\n\nEnter Application Name\n(default is \"ec2-user\"): dev-XXXXX-XXXXX-worker\u3000# Worker tier\u3092\u4f7f\u3063\u3066\u307f\u305f\u3002\nApplication dev-XXXXX-XXXXX-worker has been created.\n\nSelect a platform.\n1) Node.js\n2) PHP\n3) Python\n4) Ruby\n5) Tomcat\n6) IIS\n7) Docker\n8) Multi-container Docker\n9) GlassFish\n10) Go\n11) Java\n(default is 1): 2\u3000# PHP\u306a\u306e\u3067\u3002\n\nSelect a platform version.\n1) PHP 5.4\n2) PHP 5.5\n3) PHP 5.6\n4) PHP 5.3\n(default is 1): 1\u3000# 5.4\u3092\u9078\u629e\nDo you want to set up SSH for your instances?\u3000#\u3000SSH\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u3092\u3059\u308b\u304b\n(y/n): y\n\nSelect a keypair.\n1) XXXXXdev\n2) XXXXXproxy\n3) [ Create new KeyPair ]\n(default is 3): 1\u3000# \u3068\u308a\u3042\u3048\u305a\u65e2\u5b58\u306e\u3082\u306e\u3092\u4f7f\u3046\u3002\n\n#\u3000\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3000\u30d7\u30ed\u30d5\u30a1\u30a4\u30eb\u3092\u6307\u5b9a\u3057\u3066\u3001\u30ed\u30fc\u30eb\u3092\u8a2d\u5b9a\u3002\n$ eb create --tier worker --instance_profile aws-elasticbeanstalk-ec2-role\nEnter Environment Name\n(default is dev-XXXXX-XXXXX-XXXXX): \nCreating application version archive \"app-XXXXX_XXXXX\".\nUploading dev-XXXXX-XXXXX-XXXXX/app-XXXXX_XXXXX.zip to S3. This may take a while.\nUpload Complete.\nEnvironment details for: dev-XXXXX-XXXXX-XXXXX\n  Application name: dev-XXXXX-XXXXX-XXXXX\n  Region: ap-northeast-1\n  Deployed Version: app-XXXXX_XXXXX\n  Environment ID: e-XXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXXXX+00:00\nPrinting Status:\nINFO: createEnvironment is starting.\nINFO: Using elasticbeanstalk-ap-northeast-1-XXXXXXXXX as Amazon S3 storage bucket for environment data.\nERROR: Unable to assign role. Please verify that you have permission to pass this role: aws-elasticbeanstalk-service-role.\nERROR: Failed to launch environment.\n                                \nERROR: Failed to launch environment.\n# \u307e\u305f\u30a8\u30e9\u30fc\u3002\u3002\u3002\u3002\n```\n\n### \u3082\u308d\u3082\u308d\u8a66\u3057\u3066\u307f\u308b\u3068\u3001eb\u30b3\u30de\u30f3\u30c9\u306b\u8a2d\u5b9a\u3057\u305fAPI\u30ad\u30fc\u3092\u6301\u3064\u30e6\u30fc\u30b6\u306e\u6a29\u9650\u306b ElasticBeanstalk \u306e\u6a29\u9650\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u4e0b\u8a18\u306e\u6a29\u9650\u3092\u4e00\u65e6\u4ed8\u4e0e\u3002\n* AWSElasticBeanstalkFullAccess\n\n### \u3082\u3046\u4e00\u5ea6\u5b9f\u884c\n```bash\n$ eb create --tier worker --instance_profile aws-elasticbeanstalk-ec2-role\nEnter Environment Name\n(default is dev-XXXXX-XXXXX-eb-0): \nCreating application version archive \"app-XXXXX_XXXXX\".\nUploading dev-XXXXX-XXXXX-eb/app-XXXXX_XXXXX.zip to S3. This may take a while.\nUpload Complete.\nApplication dev-XXXXX-XXXXX-eb has been created.\nEnvironment details for: dev-XXXXX-XXXXX-eb-0\n  Application name: dev-XXXXX-XXXXX-eb\n  Region: ap-northeast-1\n  Deployed Version: app-XXXXX_XXXXX\n  Environment ID: e-XXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXX000+00:00\nPrinting Status:\nINFO: createEnvironment is starting.\nINFO: Using elasticbeanstalk-ap-northeast-1-XXXXXXXXX as Amazon S3 storage bucket for environment data.\nINFO: Created security group named: awseb-e-XXXXXX-stack-AWSEBSecurityGroup-XXXXXXXXXX\nINFO: Created Auto Scaling launch configuration named: awseb-e-XXXXXXXX-stack-AWSEBAutoScalingLaunchConfiguration-XXXXXXXXXXXX\nINFO: Environment health has transitioned to Pending. Initialization in progress (running for 25 seconds). There are no instances.\nINFO: Created Auto Scaling group named: awseb-e-XXXXXXXX-stack-AWSEBAutoScalingGroup-XXXXXXXXXXXX\nINFO: Waiting for EC2 instances to launch. This may take a few minutes.\nINFO: Added instance [i-XXXXXXXXXX] to your environment.\n# \u30ad\u30bf\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\u30fc\uff01\n\n# \u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067\u4f5c\u6210\u72b6\u6cc1\u304c\u78ba\u8a8d\u3067\u304d\u308b\u3068\u306e\u3053\u3068\n$ eb status\nEnvironment details for: dev-XXXXX-XXXXX-eb-0\n  Application name: dev-XXXXX-XXXXX-eb\n  Region: ap-northeast-1\n  Deployed Version: None\n  Environment ID: e-XXXXXXXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXXXX+00:00\n  Status: Launching\n  Health: Grey\u3000\u3000\u3000\u3000\u2190\u3000\u307e\u3060Grey\u306a\u306e\u3067\u3001\u672a\u5b8c\u6210\u3002Green\u306b\u306a\u308b\u306e\u3067\u3001\u5f85\u3064\u3002\n\n# \u51fa\u6765\u305f\uff01\uff01\uff01\uff01\n$ eb status\nEnvironment details for: dev-XXXXX-XXXXX-eb-0\n  Application name: dev-XXXXX-XXXXX-eb\n  Region: ap-northeast-1\n  Deployed Version: None\n  Environment ID: e-XXXXXXXXXX\n  Platform: 64bit Amazon Linux 2016.03 vX.X.X running PHP 5.4\n  Tier: Worker-SQS/HTTP\n  CNAME: UNKNOWN\n  Updated: 2016-XX-XX XX:XX:XX.XXXXXX+00:00\n  Status: Ready\n  Health: Green\n\n# \u51fa\u6765\u305f\u3089\u3001\u4e0b\u8a18\u30b3\u30de\u30f3\u30c9\u3067SSH\u3067\u304d\u308b\u3089\u3057\u3044\u3002\n$ eb ssh\nINFO: Attempting to open port 22.\nINFO: SSH port 22 open.\nThe authenticity of host 'XXX.XXX.XXX.XXX (XXX.XXX.XXX.XXX)' can't be established.\nECDSA key fingerprint is XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX:XX.\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added 'XXX.XXX.XXX.XXX' (ECDSA) to the list of known hosts.\n _____ _           _   _      ____                       _        _ _\n| ____| | __ _ ___| |_(_) ___| __ )  ___  __ _ _ __  ___| |_ __ _| | | __\n|  _| | |/ _` / __| __| |/ __|  _ \\ / _ \\/ _` | '_ \\/ __| __/ _` | | |/ /\n| |___| | (_| \\__ \\ |_| | (__| |_) |  __/ (_| | | | \\__ \\ || (_| | |   <\n|_____|_|\\__,_|___/\\__|_|\\___|____/ \\___|\\__,_|_| |_|___/\\__\\__,_|_|_|\\_\\\n                                       Amazon Linux AMI\n\nThis EC2 instance is managed by AWS Elastic Beanstalk. Changes made via SSH \nWILL BE LOST if the instance is replaced by auto-scaling. For more information \non customizing your Elastic Beanstalk environment, see our documentation here: \nhttp://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-ec2.html\n\n$ \n```\n\n#\u25a0\u307e\u3068\u3081\n* \u4e0a\u8a18\u3092\u898b\u308b\u3068\u3001\u3042\u308b\u7a0b\u5ea6\u3059\u3093\u306a\u308a\u9032\u3093\u3060\u3088\u3046\u306b\u898b\u3048\u307e\u3059\u304c\u3001\u7d50\u69cb\u82e6\u6226\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\u3002\u3002TT  \u3042\u3042\u9577\u304b\u3063\u305f\u30fb\u30fb\u30fb\n", "tags": ["AWS", "ElasticBeanstalk", "python2.7", "EC2"]}