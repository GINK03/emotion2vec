{"context": " More than 1 year has passed since last update.\u30a4\u30f3\u30c8\u30e9\u30cd\u30c3\u30c8\u74b0\u5883\u4e0b\u3067\u3001mac \u306e launchctl \u3068\u3001\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306e\u4ee3\u66ff\u3092\u691c\u8a0e\u3059\u308b\u305f\u3081\u306b\u3002\n\nACL\nACL(Access Control Lists) \u3092\u4e00\u5fdc\u78ba\u8a8d\u3002\n\n\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u78ba\u8a8d\n$ df -T\n\nACL \u306b\u5bfe\u5fdc\u3057\u3066\u308b xfs \u3002\n\n\u30b3\u30de\u30f3\u30c9\u78ba\u8a8d\n$ which getfacl\n/usr/bin/getfacl\n$ which setfacl\n/usr/bin/setfacl\n\n\nsamba\n$ yum update\n$ yum list installed | grep samba\n\nsamba \u4e00\u5f0f\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3002\n\n\u8a2d\u5b9a\n# mkdir /home/share \n# chmod 777 /home/share \n# cd /etc/samba\n# cp smb.conf smb.conf.bak\n\n\u7de8\u96c6\u5f8c\n# diff smb.conf smb.conf.bak\n66,71c66\n< dos charset = CP932\n< unix charset = UTF8\n< unix extensions = no\n< unix password sync = yes\n< passwd program = /usr/bin/passwd %u\n< passwd chat = *new*password* %n\\n *new*password %n\\n *succes*fully*\n---\n> \n94,95c89\n<   workgroup = XXXXXX \n<   hosts allow = XXX.XXX.XXX.\n---\n>   workgroup = MYGROUP\n288,292c282,285\n< ;[homes]\n< ; comment = Home Directories\n< ; readonly = no\n< ; browseable = no\n< ; writable = yes\n---\n> [homes]\n>   comment = Home Directories\n>   browseable = no\n>   writable = yes\n328,335d320\n< \n< [Share]\n<   path = /home/share\n<   writable = yes\n<   create mode = 0777\n<   directory mode = 0777\n< \n\n\u30ef\u30fc\u30af\u30b0\u30eb\u30fc\u30d7\u3068\u30db\u30b9\u30c8\u306f\u4f0f\u305b\u5b57\u306b\u3002\n\n\u6709\u52b9\u5316\n# systemctl start smb \n# systemctl start nmb \n# systemctl enable smb \n# systemctl enable nmb \n\n# systemctl status smb \n\n\u3067\u78ba\u8a8d\n\ncentos 6 \u3067\u306f\u3002\n# /etc/rc.d/init.d/smb start\nSMB \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u4e2d:                                      [  OK  ]\n# /etc/rc.d/init.d/nmb start\nNMB \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u4e2d:                                      [  OK  ]\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u8d77\u52d5\n# chkconfig smb on\n# chkconfig nmb on\n\n\nsamba \u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\n\u30eb\u30fc\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\n\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\n# smbpasswd -a root\nNew SMB password:\nRetype new SMB password:\nAdded user root \n\n# smbpasswd -a XXXXXX\nNew SMB password:\nRetype new SMB password:\nAdded user XXXXXX \n\n\u3057\u304b\u3057\u3001\u4eca\u4e00\u30d1\u30b9\u30ef\u30fc\u30c9\u56de\u308a\u304c\u540c\u671f\u3057\u3066\u304f\u308c\u306a\u3044\u611f\u3058\u306a\u306e\u3060\u304c\u3001\u3069\u3046\u3057\u305f\u3082\u3093\u3060\u308d\u3046\u3001\u3001\u3001\n\nfirewalld\nfirewalld \u3092\u5207\u308b\u524d\u306b\u3082\u3061\u3087\u3053\u3061\u3087\u3053\u5f04\u3063\u3066\u3044\u305f\u306e\u3067\u3001 firewalld \u306e\u5099\u5fd8\u3068\u3057\u3066\u3002\n\nfirewall \u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u3002\n# firewall-cmd --state\nrunning\n\n\n\u4eca\u306e\u30be\u30fc\u30f3\n# firewall-cmd --get-active-zone\npublic\n  interfaces: eno1\n\n\n\u73fe\u5728\u6709\u52b9\u306a\u30b5\u30fc\u30d3\u30b9\n# firewall-cmd --list-services\ndhcpv6-client ssh\n\n# firewall-cmd --add-service=samba\nsuccess\n# firewall-cmd --permanent --add-service=samba\nsuccess\n\n# getsebool samba_enable_home_dirs\nsamba_enable_home_dirs \u2013> off \n\n\u3053\u308c\u304cOFF\u306b\u306a\u3063\u3066\u3044\u308b\u3068NG\u3002\n\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\n# setsebool -P samba_enable_home_dirs 1 \n# setsebool -P samba_export_all_rw 1\n\n\n\u30a4\u30f3\u30c8\u30e9\u30cd\u30c3\u30c8\u74b0\u5883\u4e0b\u3067\u3001mac \u306e launchctl \u3068\u3001\u5171\u6709\u30d5\u30a9\u30eb\u30c0\u306e\u4ee3\u66ff\u3092\u691c\u8a0e\u3059\u308b\u305f\u3081\u306b\u3002\n\n\n## ACL\nACL(Access Control Lists) \u3092\u4e00\u5fdc\u78ba\u8a8d\u3002\n\n### \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u78ba\u8a8d\n```\n$ df -T\n```\n\nACL \u306b\u5bfe\u5fdc\u3057\u3066\u308b xfs \u3002\n\n### \u30b3\u30de\u30f3\u30c9\u78ba\u8a8d\n```\n$ which getfacl\n/usr/bin/getfacl\n$ which setfacl\n/usr/bin/setfacl\n```\n\n# samba\n\n```\n$ yum update\n$ yum list installed | grep samba\n```\n\nsamba \u4e00\u5f0f\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u4e8b\u3092\u78ba\u8a8d\u3002\n\n## \u8a2d\u5b9a\n\n```\n# mkdir /home/share \n# chmod 777 /home/share \n# cd /etc/samba\n# cp smb.conf smb.conf.bak\n```\n\n\u7de8\u96c6\u5f8c\n\n```\n# diff smb.conf smb.conf.bak\n66,71c66\n< dos charset = CP932\n< unix charset = UTF8\n< unix extensions = no\n< unix password sync = yes\n< passwd program = /usr/bin/passwd %u\n< passwd chat = *new*password* %n\\n *new*password %n\\n *succes*fully*\n---\n> \n94,95c89\n< \tworkgroup = XXXXXX \n< \thosts allow = XXX.XXX.XXX.\n---\n> \tworkgroup = MYGROUP\n288,292c282,285\n< ;[homes]\n< ;\tcomment = Home Directories\n< ;\treadonly = no\n< ;\tbrowseable = no\n< ;\twritable = yes\n---\n> [homes]\n> \tcomment = Home Directories\n> \tbrowseable = no\n> \twritable = yes\n328,335d320\n< \n< [Share]\n< \tpath = /home/share\n< \twritable = yes\n< \tcreate mode = 0777\n< \tdirectory mode = 0777\n< \n```\n\n\u30ef\u30fc\u30af\u30b0\u30eb\u30fc\u30d7\u3068\u30db\u30b9\u30c8\u306f\u4f0f\u305b\u5b57\u306b\u3002\n\n\n## \u6709\u52b9\u5316\n\n```\n# systemctl start smb \n# systemctl start nmb \n# systemctl enable smb \n# systemctl enable nmb \n```\n\n\n```\n# systemctl status smb \n```\n\n\u3067\u78ba\u8a8d\n\n### centos 6 \u3067\u306f\u3002\n\n```\n# /etc/rc.d/init.d/smb start\nSMB \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u4e2d:                                      [  OK  ]\n# /etc/rc.d/init.d/nmb start\nNMB \u30b5\u30fc\u30d3\u30b9\u3092\u8d77\u52d5\u4e2d:                                      [  OK  ]\n```\n\n\u30b5\u30fc\u30d3\u30b9\u306e\u81ea\u52d5\u8d77\u52d5\n\n```\n# chkconfig smb on\n# chkconfig nmb on\n```\n\n## samba \u30d1\u30b9\u30ef\u30fc\u30c9\u8a2d\u5b9a\n\n\u30eb\u30fc\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\n\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\n\n```\n# smbpasswd -a root\nNew SMB password:\nRetype new SMB password:\nAdded user root \n```\n\n```\n# smbpasswd -a XXXXXX\nNew SMB password:\nRetype new SMB password:\nAdded user XXXXXX \n```\n\n\u3057\u304b\u3057\u3001\u4eca\u4e00\u30d1\u30b9\u30ef\u30fc\u30c9\u56de\u308a\u304c\u540c\u671f\u3057\u3066\u304f\u308c\u306a\u3044\u611f\u3058\u306a\u306e\u3060\u304c\u3001\u3069\u3046\u3057\u305f\u3082\u3093\u3060\u308d\u3046\u3001\u3001\u3001\n\n\n## firewalld\n\nfirewalld \u3092\u5207\u308b\u524d\u306b\u3082\u3061\u3087\u3053\u3061\u3087\u3053\u5f04\u3063\u3066\u3044\u305f\u306e\u3067\u3001 firewalld \u306e\u5099\u5fd8\u3068\u3057\u3066\u3002\n\n### firewall \u304c\u52d5\u3044\u3066\u3044\u308b\u304b\u3002\n```\n# firewall-cmd --state\nrunning\n```\n\n### \u4eca\u306e\u30be\u30fc\u30f3\n```\n# firewall-cmd --get-active-zone\npublic\n  interfaces: eno1\n```\n\n### \u73fe\u5728\u6709\u52b9\u306a\u30b5\u30fc\u30d3\u30b9\n\n```\n# firewall-cmd --list-services\ndhcpv6-client ssh\n```\n\n```\n# firewall-cmd --add-service=samba\nsuccess\n# firewall-cmd --permanent --add-service=samba\nsuccess\n```\n\n```\n# getsebool samba_enable_home_dirs\nsamba_enable_home_dirs \u2013> off \n```\n\n\u3053\u308c\u304cOFF\u306b\u306a\u3063\u3066\u3044\u308b\u3068NG\u3002\n\n\u30a2\u30af\u30bb\u30b9\u3092\u8a31\u53ef\u3059\u308b\n\n```\n# setsebool -P samba_enable_home_dirs 1 \n# setsebool -P samba_export_all_rw 1\n```\n", "tags": ["CentOS", "command"]}