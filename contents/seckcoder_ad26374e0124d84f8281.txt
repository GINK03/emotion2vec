{"tags": ["hadoop", "Java"], "context": " More than 1 year has passed since last update.How to convert org.apache.hadoop.io.Text to byte array?\nThis class has a \"sweet\" method named getBytes. Seems we can directly convert it to byte array using this method.\nIf you have similar idea, don't do that! It takes me almost an hour to find this stupid bug. \nAccording to official documentation: \n\ngetBytes():\nReturns the raw bytes; however, only data up to getLength() is valid\n\nSo the bytes you get may contain invalid data!\nI think one solution is through Bytes.toByte\n\nstupid.java\n\nBytes.toByte(text.toString())\n\n\n\nWho or what kind of application will use the getBytes method? I totally have no idea.\nWhat can we learn from this?\nAs library developer,\n\nDon't expect everyone will read the whole documentation especially when your library contains tens of thousands of methods.\nNever expose dangerous methods like getBytes. Or you can name it differently like getBytesUnsafe to call the attention of library users.\n\nAs programmer,\n\nBe familiar with every method you have called.\n\n\n\nHow to convert `org.apache.hadoop.io.Text` to byte array?\n\nThis class has a \"sweet\" method named `getBytes`. Seems we can directly convert it to byte array using this method.\n\nIf you have similar idea, don't do that! It takes me almost an hour to find this stupid bug. \n\nAccording to official documentation: \n\n> getBytes():\n>\n> Returns the raw bytes; however, only data up to getLength() is valid\n\nSo the bytes you get may contain invalid data!\n\nI think one solution is through `Bytes.toByte`\n\n\n```java:stupid.java\n\nBytes.toByte(text.toString())\n\n```\n\nWho or what kind of application will use the `getBytes` method? I totally have no idea.\n\nWhat can we learn from this?\n\nAs library developer,\n\n- Don't expect everyone will read the whole documentation especially when your library contains tens of thousands of methods.\n\n- Never expose dangerous methods like `getBytes`. Or you can name it differently like `getBytesUnsafe` to call the attention of library users.\n\nAs programmer,\n\n- Be familiar with every method you have called.\n\n\n"}