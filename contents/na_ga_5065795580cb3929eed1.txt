{"context": " More than 1 year has passed since last update.\u5927\u96d1\u628a\u306a\u610f\u8a33\u3001\u8a33\u3057\u306b\u304f\u3044\u7b87\u6240\u306f\u82f1\u6587\u306e\u307e\u307e\u8ee2\u8f09\u3057\u307e\u3059\u3002\nhttp://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/\n\nOverview - TODO:\u5f8c\u3067\u8aad\u3080\u304b\u3082\nApril 26, 2012\nHere at Basho we want to make sure that your Riak implementations are set up from the beginning to succeed. While you can use the Riak Fast Track to quickly set up a 3-node dev/test environment, we recommend that all production deployments use a minimum of 5 nodes, ensuring you benefit from the architectural principles that underpin Riak\u2019s availability, fault-tolerance and scaling properties.\nTL;DR: Deployments of five nodes or greater will provide a foundation for the best performance and growth as the cluster expands. Since Riak scales linearly with the addition of more nodes, users find improved performance, reliability, and throughput with larger clusters. Smaller deployments can compromise the fault-tolerance of the system: with a \u201csane\u201d replication requirement for availability (we default to three copies), node failures in smaller clusters mean that replication requirements may not be met. This can result in degraded performance and risk of data loss. Additionally, clusters smaller than five nodes mean that with a sane replication requirement of 3, a high percentage (75-100% of the nodes) will need to respond to each request, putting undue load on the cluster that may degrade performance.\nLet\u2019s take a closer look in the scenario of a three- and four-node cluster.\n\nPerformance and Fault Tolerance Concerns in a 3-Node Cluster\nCluster \u304c read/write \u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5e38\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u3067\u304d\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u306b\u3001Basho \u306f\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3001\u7570\u306a\u308b 3 \u53f0\u306e\u30ce\u30fc\u30c9\u306b\u30b3\u30d4\u30fc\u304c\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3092\u63a8\u5968\u3057\u307e\u3059\u3002Riak \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306f\u3001\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30ab\u3092\u5358\u4e00\u30ce\u30fc\u30c9\u304c\u3072\u3068\u3064\u3088\u308a\u591a\u304f\u6301\u305f\u306a\u3044\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u306b\u3001\u5c11\u306a\u304f\u3066\u3082 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3092\u8981\u6c42\u3057\u307e\u3059\u3002Riak \u306e\u4eca\u5f8c\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001\u5404\u30ec\u30d7\u30ea\u30ab\u306f\u500b\u5225\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3055\u308c\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u3002\u3053\u308c\u306f\u3001\u307b\u3068\u3093\u3069 100% \u5b9f\u88c5\u3055\u308c\u307e\u3059\u304c\u3001\u79c1\u9054\u306f\u305d\u306e\u72b6\u614b\u306b\u306a\u308b\u307e\u3067\u306f\u3042\u306a\u305f\u306b\u4fdd\u8a3c\u3055\u308c\u308b\u3068\u306f\u4f1d\u3048\u306a\u3044\u3067\u3057\u3087\u3046\u30023 \u500b\u306e\u30ec\u30d7\u30ea\u30ab\u304c 3 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u8a2d\u5b9a\u306f\u3067\u304d\u307e\u3059\u304c\u3001\u30ce\u30fc\u30c9\u969c\u5bb3\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u3057\u305f\u5834\u5408\u306b\u30ec\u30d7\u30ea\u30ab\u3092\u914d\u7f6e\u3059\u308b\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u3067\u3057\u3087\u3046\u3002\n\u30ce\u30fc\u30c9\u969c\u5bb3\u3042\u308b\u3044\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u304c 3 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u3067\u767a\u751f\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u305f\u3081\u306e\u8981\u6c42\u6570\u306f 3 \u306e\u307e\u307e\u3067\u3059\u3002\u3057\u304b\u3057\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u305f\u3081\u306b\u5229\u7528\u3067\u304d\u308b\u7269\u7406\u30ce\u30fc\u30c9\u306f 2 \u53f0\u3057\u304b\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3068\u30c7\u30fc\u30bf\u30ed\u30b9\u30c8\u306e\u30ea\u30b9\u30af\u3092\u3082\u305f\u3089\u3057\u307e\u3059\u3002\n\nPerformance and Fault Tolerance Concerns in a 4-Node Cluster\n4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u3067 3 \u500b\u306e\u30ec\u30d7\u30ea\u30ab\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u3001\u3042\u308b\u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u3072\u3068\u3064\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001Cluster \u5185\u306e 75-100% \u306e\u7269\u7406\u30ce\u30fc\u30c9\u304c\u5fdc\u7b54\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002\u3053\u308c\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3092\u5f15\u304d\u8d77\u3053\u3059\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u30ce\u30fc\u30c9\u969c\u5bb3\u3042\u308b\u3044\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u304c 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u3067\u767a\u751f\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u3055\u304d\u307b\u3069\u8a18\u8f09\u3057\u305f\u554f\u984c\u306b\u623b\u308a\u307e\u3059\u3002\n\nWhat if I want to change the replication default?\n\u3082\u3057\u3001\u3042\u306a\u305f\u306e\u8981\u4ef6\u306e\u305f\u3081\u306b\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30ab\u6570\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001N \u3092\u30ec\u30d7\u30ea\u30ab\u6570\u3068\u3059\u308b\u3068 N+2 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067 Cluster \u3092\u69cb\u6210\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\nGoing With 5 Nodes\n5 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u306b\u65b0\u3057\u3044\u7269\u7406\u30ce\u30fc\u30c9\u3092\u52a0\u3048\u308b\u3068\u3068\u3082\u306b\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u5404\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u305f\u3081\u306b\u5fc5\u8981\u3068\u3055\u308c\u308b Cluster \u5185\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306e\u5272\u5408\u306f\u4e0b\u304c\u308a\u307e\u3059\u3002Riak \u306f\u3001\u3053\u306e\u70b9\u304b\u3089\u4e88\u60f3\u3055\u308c\u308b\u3088\u3046\u306b\u6bd4\u4f8b\u3057\u3066\u5909\u5316\u3057\u307e\u3059\u3002\u7269\u7406\u30ce\u30fc\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u30a2\u30a6\u30c8\u3042\u308b\u3044\u306f\u969c\u5bb3\u304c\u767a\u751f\u3057\u3066\u3082\u3001\u6b8b\u308a\u306e\u7269\u7406\u30ce\u30fc\u30c9\u53f0\u6570\u306f\u3042\u306a\u305f\u3092\u30c7\u30fc\u30bf\u30ed\u30b9\u30c8\u304b\u3089\u4fdd\u8b77\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u307b\u3069\u5341\u5206\u306b\u591a\u3044\u3067\u3059\u3002\u3057\u305f\u304c\u3063\u3066\u3001\u3042\u306a\u305f\u306e\u958b\u767a\u304a\u3088\u3073\u30c6\u30b9\u30c8\u306f\u5c0f\u3055\u306a Cluster \u3067\u884c\u306a\u3063\u3066\u3082\u3001\u672c\u7a3c\u50cd\u6642\u306b\u306f 5 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u306f\u3058\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30b3\u30e1\u30f3\u30c8\n\u91cd\u8981\u305d\u3046\u306a\u90e8\u5206\u3060\u3051\u610f\u8a33\u3057\u3066\u307f\u305f\u3002\n\u5c11\u3057\u4ed8\u3051\u52a0\u3048\u308b\u3068\u3001\u73fe\u6642\u70b9\u3067\u306e Riak doc (version-1.3.2) \u306e Replication \u306b\u300cSo what does N=3 really mean\u300d\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\u5185\u5bb9\u3092\u5927\u96d1\u628a\u306b\u610f\u8a33\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\nN=3 \u306f\u30c7\u30fc\u30bf\u304c Cluster \u5185\u306e 3 \u30ab\u6240\u306b\u683c\u7d0d\u3055\u308c\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\u5f93\u3063\u3066\u30013 \u3064\u306e\u7570\u306a\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u30c7\u30fc\u30bf\u306e\u30b3\u30d4\u30fc\u3092\u53d7\u3051\u307e\u3059\u3002\u307e\u305f 3 \u3064\u306e\u30ec\u30d7\u30ea\u30ab\u306f 3 \u3064\u306e\u7570\u306a\u308b\u7269\u7406\u30ce\u30fc\u30c9\u306b\u683c\u7d0d\u3055\u308c\u308b\u3068\u3044\u3046\u4fdd\u8a3c\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u3001\u30ec\u30d7\u30ea\u30ab\u3092\u5747\u7b49\u306b\u5206\u6563\u3057\u3088\u3046\u3068\u3059\u308b\u7d44\u307f\u8fbc\u307f\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u305d\u306e\u305f\u3081\u3001\u4eca\u56de\u306e \"Why Your Riak Cluster Should Have At Least Five Nodes\" \u306f\u5c11\u3057\u53e4\u3044\u8a18\u4e8b\u3060\u3051\u3069\u3001\u3053\u306e\u5185\u5bb9\u306f\u73fe\u5728\u3067\u3082\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u3068\u601d\u308f\u308c\u308b\u3002\u5b9f\u969b\u306b 3 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u306b\u5bfe\u3057\u3042\u308b\u7a0b\u5ea6\u306e\u30c7\u30fc\u30bf\u3092\u66f8\u8fbc\u307f\u3057\u305f\u5f8c\u3044\u304f\u3064\u304b\u306e\u30ce\u30fc\u30c9\u3092\u843d\u3068\u3057\u3066 pr=all \u3067 fetch \u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30ab\u304c\u540c\u3058\u7269\u7406\u30ce\u30fc\u30c9\u306b\u8907\u6570\u500b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\u307e\u305f\u3001\u73fe\u6642\u70b9\u3067\u306e Riak doc (version-1.3.2) \u306e Configuration File \u306b\u300ctarget_n_val\u300d\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\u5185\u5bb9\u3092\u5927\u96d1\u628a\u306b\u610f\u8a33\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n\"target_n_val\" \u306f\u3001\u3042\u306a\u305f\u304c\u4f7f\u3046\u4e88\u5b9a\u3067\u3042\u308b\u6700\u3082\u5927\u304d\u3044 n_val \u3067\u3059\u3002\u3053\u308c\u306f cluster \u4e2d\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u3069\u306e\u3088\u3046\u306b\u5206\u6563\u3059\u308b\u304b\u3001\u305d\u3057\u3066\u3069\u306e\u3088\u3046\u306b preflists \u3092\u8a08\u7b97\u3059\u308b\u304b\u306b\u5f71\u97ff\u3092\u53ca\u307c\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u304c\u540c\u3058\u7269\u7406\u30ce\u30fc\u30c9\u306b\u4e00\u5ea6\u3088\u308a\u591a\u304f\u683c\u7d0d\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u5b9f\u306b\u3059\u308b\u306e\u3092\u52a9\u3051\u307e\u3059\u3002\u7a00\u306a\u72b6\u6cc1\u3067\u8a2d\u5b9a\u3092\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002\n\"ring_creation_size\" \u304c 2 \u306e\u7d2f\u4e57\u3067\u3042\u308b\u3068\u4eee\u5b9a\u3059\u308b\u3068\u3001\u3053\u306e\u8a2d\u5b9a\u306e\u7406\u60f3\u7684\u306a\u8a2d\u5b9a\u5024\u306f\u3001\u3042\u3089\u3086\u308b bucket \u3067\u6700\u3082\u5927\u304d\u3044 v_val \u3088\u308a\u5927\u304d\u3044\u304b\u7b49\u3057\u304f\u3001\u305d\u3057\u3066 \"ring_creation_size\" \u3092\u5076\u6570\u306b\u3059\u308b\u9664\u6570\u3067\u3059\u3002\"target_n_val\" \u306e\u521d\u671f\u5024\u306f 4 \u3067\u3059\u3002\u30db\u30c3\u30c8\u30b9\u30dd\u30c3\u30c8\u3092\u52b9\u7387\u7684\u306b\u9632\u3050\u305f\u3081\u306b\u3001\u3042\u306a\u305f\u306e cluster \u306e\u7269\u7406\u30ce\u30fc\u30c9\u6570\u306f \"target_n_val\" \u3088\u308a\u5927\u304d\u3044\u304b\u7b49\u3057\u3044\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u3053\u304b\u3089\u3082\u30013 \u500b\u306e\u30ec\u30d7\u30ea\u30ab\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u3089\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u306b\u306f\u5c11\u306a\u304f\u3066\u3082 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u304c\u5fc5\u8981\u3068\u306a\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\u5b9f\u969b\u306b 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3057\u305f Cluster \u306b\u5bfe\u3057\u3066\u3001\u3055\u304d\u307b\u3069\u3068\u540c\u3058\u65b9\u6cd5\u3067\u78ba\u8a8d\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u6b63\u5e38\u306b\u5225\u3005\u306e\u7269\u7406\u30b5\u30fc\u30d0\u306b\u30ec\u30d7\u30ea\u30ab\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3002\u30ce\u30fc\u30c9\u969c\u5bb3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u306b\u3082\u5099\u3048\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3055\u305b\u306a\u3044\u3053\u3068\u3092\u8003\u616e\u3059\u308b\u3068\u6700\u4f4e\u3067\u3082 5 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u306f\u3058\u3081\u308b\u306e\u304c\u6700\u3082\u826f\u3044\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u3002\n\u9593\u9055\u3063\u3066\u3044\u305f\u3089\u6307\u6458\u3057\u3066\u304f\u3060\u3055\u3044\u3002Happy scaling !!\n\n\u5927\u96d1\u628a\u306a\u610f\u8a33\u3001\u8a33\u3057\u306b\u304f\u3044\u7b87\u6240\u306f\u82f1\u6587\u306e\u307e\u307e\u8ee2\u8f09\u3057\u307e\u3059\u3002\nhttp://basho.com/why-your-riak-cluster-should-have-at-least-five-nodes/\n\n## Overview - TODO:\u5f8c\u3067\u8aad\u3080\u304b\u3082\n\nApril 26, 2012\n\nHere at Basho we want to make sure that your Riak implementations are set up from the beginning to succeed. While you can use the Riak Fast Track to quickly set up a 3-node dev/test environment, we recommend that all production deployments use a minimum of 5 nodes, ensuring you benefit from the architectural principles that underpin Riak\u2019s availability, fault-tolerance and scaling properties.\n\nTL;DR: Deployments of five nodes or greater will provide a foundation for the best performance and growth as the cluster expands. Since Riak scales linearly with the addition of more nodes, users find improved performance, reliability, and throughput with larger clusters. Smaller deployments can compromise the fault-tolerance of the system: with a \u201csane\u201d replication requirement for availability (we default to three copies), node failures in smaller clusters mean that replication requirements may not be met. This can result in degraded performance and risk of data loss. Additionally, clusters smaller than five nodes mean that with a sane replication requirement of 3, a high percentage (75-100% of the nodes) will need to respond to each request, putting undue load on the cluster that may degrade performance.\n\nLet\u2019s take a closer look in the scenario of a three- and four-node cluster.\n\n## Performance and Fault Tolerance Concerns in a 3-Node Cluster\n\nCluster \u304c read/write \u30ea\u30af\u30a8\u30b9\u30c8\u306b\u5e38\u306b\u30ec\u30b9\u30dd\u30f3\u30b9\u3067\u304d\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u306b\u3001Basho \u306f\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3001\u7570\u306a\u308b 3 \u53f0\u306e\u30ce\u30fc\u30c9\u306b\u30b3\u30d4\u30fc\u304c\u4f5c\u6210\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3055\u308c\u305f\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3092\u63a8\u5968\u3057\u307e\u3059\u3002Riak \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306f\u3001\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30ab\u3092\u5358\u4e00\u30ce\u30fc\u30c9\u304c\u3072\u3068\u3064\u3088\u308a\u591a\u304f\u6301\u305f\u306a\u3044\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u305f\u3081\u306b\u3001\u5c11\u306a\u304f\u3066\u3082 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3092\u8981\u6c42\u3057\u307e\u3059\u3002Riak \u306e\u4eca\u5f8c\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u3001\u5404\u30ec\u30d7\u30ea\u30ab\u306f\u500b\u5225\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3055\u308c\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3067\u3057\u3087\u3046\u3002\u3053\u308c\u306f\u3001\u307b\u3068\u3093\u3069 100% \u5b9f\u88c5\u3055\u308c\u307e\u3059\u304c\u3001\u79c1\u9054\u306f\u305d\u306e\u72b6\u614b\u306b\u306a\u308b\u307e\u3067\u306f\u3042\u306a\u305f\u306b\u4fdd\u8a3c\u3055\u308c\u308b\u3068\u306f\u4f1d\u3048\u306a\u3044\u3067\u3057\u3087\u3046\u30023 \u500b\u306e\u30ec\u30d7\u30ea\u30ab\u304c 3 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306b\u4fdd\u5b58\u3059\u308b\u3053\u3068\u3092\u4fdd\u8a3c\u3059\u308b\u8a2d\u5b9a\u306f\u3067\u304d\u307e\u3059\u304c\u3001\u30ce\u30fc\u30c9\u969c\u5bb3\u304c\u767a\u751f\u3057\u305f\u5834\u5408\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u3057\u305f\u5834\u5408\u306b\u30ec\u30d7\u30ea\u30ab\u3092\u914d\u7f6e\u3059\u308b\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u30ce\u30fc\u30c9\u969c\u5bb3\u3042\u308b\u3044\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u304c 3 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u3067\u767a\u751f\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u305f\u3081\u306e\u8981\u6c42\u6570\u306f 3 \u306e\u307e\u307e\u3067\u3059\u3002\u3057\u304b\u3057\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u305f\u3081\u306b\u5229\u7528\u3067\u304d\u308b\u7269\u7406\u30ce\u30fc\u30c9\u306f 2 \u53f0\u3057\u304b\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u308c\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3068\u30c7\u30fc\u30bf\u30ed\u30b9\u30c8\u306e\u30ea\u30b9\u30af\u3092\u3082\u305f\u3089\u3057\u307e\u3059\u3002\n\n## Performance and Fault Tolerance Concerns in a 4-Node Cluster\n\n4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u3067 3 \u500b\u306e\u30ec\u30d7\u30ea\u30ab\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u3001\u3042\u308b\u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u3072\u3068\u3064\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u306f\u3001Cluster \u5185\u306e 75-100% \u306e\u7269\u7406\u30ce\u30fc\u30c9\u304c\u5fdc\u7b54\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002\u3053\u308c\u306f\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3092\u5f15\u304d\u8d77\u3053\u3059\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u30ce\u30fc\u30c9\u969c\u5bb3\u3042\u308b\u3044\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u304c 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u3067\u767a\u751f\u3057\u305f\u5834\u5408\u3067\u3082\u3001\u3055\u304d\u307b\u3069\u8a18\u8f09\u3057\u305f\u554f\u984c\u306b\u623b\u308a\u307e\u3059\u3002\n\n## What if I want to change the replication default?\n\n\u3082\u3057\u3001\u3042\u306a\u305f\u306e\u8981\u4ef6\u306e\u305f\u3081\u306b\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30ab\u6570\u3092\u5909\u66f4\u3059\u308b\u5834\u5408\u306f\u3001N \u3092\u30ec\u30d7\u30ea\u30ab\u6570\u3068\u3059\u308b\u3068 N+2 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067 Cluster \u3092\u69cb\u6210\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## Going With 5 Nodes\n\n5 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u306b\u65b0\u3057\u3044\u7269\u7406\u30ce\u30fc\u30c9\u3092\u52a0\u3048\u308b\u3068\u3068\u3082\u306b\u3001\u30b5\u30fc\u30d3\u30b9\u306e\u5404\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u305f\u3081\u306b\u5fc5\u8981\u3068\u3055\u308c\u308b Cluster \u5185\u306e\u7269\u7406\u30ce\u30fc\u30c9\u306e\u5272\u5408\u306f\u4e0b\u304c\u308a\u307e\u3059\u3002Riak \u306f\u3001\u3053\u306e\u70b9\u304b\u3089\u4e88\u60f3\u3055\u308c\u308b\u3088\u3046\u306b\u6bd4\u4f8b\u3057\u3066\u5909\u5316\u3057\u307e\u3059\u3002\u7269\u7406\u30ce\u30fc\u30c9\u3092\u30b5\u30fc\u30d3\u30b9\u30a2\u30a6\u30c8\u3042\u308b\u3044\u306f\u969c\u5bb3\u304c\u767a\u751f\u3057\u3066\u3082\u3001\u6b8b\u308a\u306e\u7269\u7406\u30ce\u30fc\u30c9\u53f0\u6570\u306f\u3042\u306a\u305f\u3092\u30c7\u30fc\u30bf\u30ed\u30b9\u30c8\u304b\u3089\u4fdd\u8b77\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u307b\u3069\u5341\u5206\u306b\u591a\u3044\u3067\u3059\u3002\u3057\u305f\u304c\u3063\u3066\u3001\u3042\u306a\u305f\u306e\u958b\u767a\u304a\u3088\u3073\u30c6\u30b9\u30c8\u306f\u5c0f\u3055\u306a Cluster \u3067\u884c\u306a\u3063\u3066\u3082\u3001\u672c\u7a3c\u50cd\u6642\u306b\u306f 5 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u306f\u3058\u3081\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u30b3\u30e1\u30f3\u30c8\n\n\u91cd\u8981\u305d\u3046\u306a\u90e8\u5206\u3060\u3051\u610f\u8a33\u3057\u3066\u307f\u305f\u3002\n\n\u5c11\u3057\u4ed8\u3051\u52a0\u3048\u308b\u3068\u3001\u73fe\u6642\u70b9\u3067\u306e Riak doc (version-1.3.2) \u306e [Replication](http://docs.basho.com/riak/1.3.2/references/appendices/concepts/Replication/) \u306b\u300cSo what does N=3 really mean\u300d\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\u5185\u5bb9\u3092\u5927\u96d1\u628a\u306b\u610f\u8a33\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n> N=3 \u306f\u30c7\u30fc\u30bf\u304c Cluster \u5185\u306e 3 \u30ab\u6240\u306b\u683c\u7d0d\u3055\u308c\u308b\u3053\u3068\u3092\u610f\u5473\u3057\u307e\u3059\u3002\u5f93\u3063\u3066\u30013 \u3064\u306e\u7570\u306a\u308b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u304c\u30c7\u30fc\u30bf\u306e\u30b3\u30d4\u30fc\u3092\u53d7\u3051\u307e\u3059\u3002\u307e\u305f 3 \u3064\u306e\u30ec\u30d7\u30ea\u30ab\u306f 3 \u3064\u306e\u7570\u306a\u308b\u7269\u7406\u30ce\u30fc\u30c9\u306b\u683c\u7d0d\u3055\u308c\u308b\u3068\u3044\u3046\u4fdd\u8a3c\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u3057\u304b\u3057\u3001\u30ec\u30d7\u30ea\u30ab\u3092\u5747\u7b49\u306b\u5206\u6563\u3057\u3088\u3046\u3068\u3059\u308b\u7d44\u307f\u8fbc\u307f\u95a2\u6570\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u305d\u306e\u305f\u3081\u3001\u4eca\u56de\u306e \"Why Your Riak Cluster Should Have At Least Five Nodes\" \u306f\u5c11\u3057\u53e4\u3044\u8a18\u4e8b\u3060\u3051\u3069\u3001\u3053\u306e\u5185\u5bb9\u306f\u73fe\u5728\u3067\u3082\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u3068\u601d\u308f\u308c\u308b\u3002\u5b9f\u969b\u306b 3 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3055\u308c\u308b Cluster \u306b\u5bfe\u3057\u3042\u308b\u7a0b\u5ea6\u306e\u30c7\u30fc\u30bf\u3092\u66f8\u8fbc\u307f\u3057\u305f\u5f8c\u3044\u304f\u3064\u304b\u306e\u30ce\u30fc\u30c9\u3092\u843d\u3068\u3057\u3066 pr=all \u3067 fetch \u3059\u308b\u3068\u3001\u30c7\u30fc\u30bf\u306e\u30ec\u30d7\u30ea\u30ab\u304c\u540c\u3058\u7269\u7406\u30ce\u30fc\u30c9\u306b\u8907\u6570\u500b\u683c\u7d0d\u3055\u308c\u3066\u3044\u308b\u72b6\u6cc1\u3092\u78ba\u8a8d\u3067\u304d\u308b\u3002\u307e\u305f\u3001\u73fe\u6642\u70b9\u3067\u306e Riak doc (version-1.3.2) \u306e [Configuration File](http://docs.basho.com/riak/1.3.2/references/Configuration-Files/) \u306b\u300ctarget_n_val\u300d\u3068\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3002\u5185\u5bb9\u3092\u5927\u96d1\u628a\u306b\u610f\u8a33\u3059\u308b\u3068\u6b21\u306e\u3088\u3046\u306b\u306a\u308b\u3002\n\n> \"target_n_val\" \u306f\u3001\u3042\u306a\u305f\u304c\u4f7f\u3046\u4e88\u5b9a\u3067\u3042\u308b\u6700\u3082\u5927\u304d\u3044 n_val \u3067\u3059\u3002\u3053\u308c\u306f cluster \u4e2d\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u3069\u306e\u3088\u3046\u306b\u5206\u6563\u3059\u308b\u304b\u3001\u305d\u3057\u3066\u3069\u306e\u3088\u3046\u306b preflists \u3092\u8a08\u7b97\u3059\u308b\u304b\u306b\u5f71\u97ff\u3092\u53ca\u307c\u3057\u307e\u3059\u3002\u30c7\u30fc\u30bf\u304c\u540c\u3058\u7269\u7406\u30ce\u30fc\u30c9\u306b\u4e00\u5ea6\u3088\u308a\u591a\u304f\u683c\u7d0d\u3055\u308c\u306a\u3044\u3053\u3068\u3092\u78ba\u5b9f\u306b\u3059\u308b\u306e\u3092\u52a9\u3051\u307e\u3059\u3002\u7a00\u306a\u72b6\u6cc1\u3067\u8a2d\u5b9a\u3092\u5909\u3048\u308b\u5fc5\u8981\u304c\u3042\u308b\u3067\u3057\u3087\u3046\u3002\n>\n> \"ring_creation_size\" \u304c 2 \u306e\u7d2f\u4e57\u3067\u3042\u308b\u3068\u4eee\u5b9a\u3059\u308b\u3068\u3001\u3053\u306e\u8a2d\u5b9a\u306e\u7406\u60f3\u7684\u306a\u8a2d\u5b9a\u5024\u306f\u3001\u3042\u3089\u3086\u308b bucket \u3067\u6700\u3082\u5927\u304d\u3044 v_val \u3088\u308a\u5927\u304d\u3044\u304b\u7b49\u3057\u304f\u3001\u305d\u3057\u3066 \"ring_creation_size\" \u3092\u5076\u6570\u306b\u3059\u308b\u9664\u6570\u3067\u3059\u3002\"target_n_val\" \u306e\u521d\u671f\u5024\u306f 4 \u3067\u3059\u3002\u30db\u30c3\u30c8\u30b9\u30dd\u30c3\u30c8\u3092\u52b9\u7387\u7684\u306b\u9632\u3050\u305f\u3081\u306b\u3001\u3042\u306a\u305f\u306e cluster \u306e\u7269\u7406\u30ce\u30fc\u30c9\u6570\u306f \"target_n_val\" \u3088\u308a\u5927\u304d\u3044\u304b\u7b49\u3057\u3044\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u3053\u3053\u304b\u3089\u3082\u30013 \u500b\u306e\u30ec\u30d7\u30ea\u30ab\u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u5408\u306f\u3001\u3053\u308c\u3089\u306e\u6761\u4ef6\u3092\u6e80\u305f\u3059\u306b\u306f\u5c11\u306a\u304f\u3066\u3082 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u304c\u5fc5\u8981\u3068\u306a\u308b\u3053\u3068\u304c\u5206\u304b\u308b\u3002\u5b9f\u969b\u306b 4 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u69cb\u6210\u3057\u305f Cluster \u306b\u5bfe\u3057\u3066\u3001\u3055\u304d\u307b\u3069\u3068\u540c\u3058\u65b9\u6cd5\u3067\u78ba\u8a8d\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u6b63\u5e38\u306b\u5225\u3005\u306e\u7269\u7406\u30b5\u30fc\u30d0\u306b\u30ec\u30d7\u30ea\u30ab\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3002\u30ce\u30fc\u30c9\u969c\u5bb3\u3084\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u5206\u65ad\u306b\u3082\u5099\u3048\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u52a3\u5316\u3055\u305b\u306a\u3044\u3053\u3068\u3092\u8003\u616e\u3059\u308b\u3068\u6700\u4f4e\u3067\u3082 5 \u53f0\u306e\u7269\u7406\u30ce\u30fc\u30c9\u3067\u306f\u3058\u3081\u308b\u306e\u304c\u6700\u3082\u826f\u3044\u3053\u3068\u304c\u5206\u304b\u3063\u305f\u3002\n\n\u9593\u9055\u3063\u3066\u3044\u305f\u3089\u6307\u6458\u3057\u3066\u304f\u3060\u3055\u3044\u3002Happy scaling !!", "tags": ["riak"]}