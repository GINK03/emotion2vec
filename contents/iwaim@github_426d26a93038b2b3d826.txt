{"context": " More than 1 year has passed since last update.SELinux\u304c\u6709\u52b9\u306a\u74b0\u5883\u3067\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306eSSH\u516c\u958b\u9375\u3092\u914d\u7f6e\u3059\u308b\u3068\u304d\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30e9\u30d9\u30eb\u306b\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u4f8b\u3048\u3070\u3001root\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u6700\u521d\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3002\uff08root\u3067\u4f5c\u696d\u3059\u308b\u662f\u975e\u306f\u5225\u9014\u691c\u8a0e\u3059\u3079\u304d\uff09\n# ls -Z foo-id_rsa.pub\n-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 foo-id_rsa.pub\n#\n\n\u3053\u308c\u3092sshd\u304c\u8aad\u3081\u308b\u30e9\u30d9\u30eb\u306b\u8a2d\u5b9a\u3057\u306a\u304a\u3059\u5fc5\u8981\u304c\u3067\u3066\u304f\u308b\u3002\n\nCentOS 6.x\nCentOS 6.x\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u300cssh_home_t\u300d\u306b\u5909\u66f4\u3057\u3066\u3084\u308c\u3070\u3088\u3044\u3002\n# ls -Z foo-id_rsa.pub\n-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 foo-id_rsa.pub\n# mkdir /home/foo/.ssh\n# mv foo-id_rsa.pub /home/foo/.ssh/authorized_keys\n# chcon -t ssh_home_t /home/foo/.ssh/authorized_keys\n# chmod 700 /home/foo/.ssh\n# chmod 600 /home/foo/.ssh/authorized_keys\n# chown -R foo:foo /home/foo/.ssh\n#\n\nchcon(1)\u3067\u306f\u306a\u304frestorecon(8)\u3092\u4f7f\u3046\u624b\u3082\u3042\u308b\u3002\n\n# restorecon -R /home/foo/.ssh\n# \n\nSELinux\u304c\u6709\u52b9\u306a\u74b0\u5883\u3067\u4ed6\u306e\u30e6\u30fc\u30b6\u30fc\u306eSSH\u516c\u958b\u9375\u3092\u914d\u7f6e\u3059\u308b\u3068\u304d\u306f\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u30e9\u30d9\u30eb\u306b\u6ce8\u610f\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n\u4f8b\u3048\u3070\u3001root\u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u30fc\u306b\u6700\u521d\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3057\u305f\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3002\uff08root\u3067\u4f5c\u696d\u3059\u308b\u662f\u975e\u306f\u5225\u9014\u691c\u8a0e\u3059\u3079\u304d\uff09\n\n```shell-session\n# ls -Z foo-id_rsa.pub\n-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 foo-id_rsa.pub\n#\n```\n\n\u3053\u308c\u3092sshd\u304c\u8aad\u3081\u308b\u30e9\u30d9\u30eb\u306b\u8a2d\u5b9a\u3057\u306a\u304a\u3059\u5fc5\u8981\u304c\u3067\u3066\u304f\u308b\u3002\n\n## CentOS 6.x\n\nCentOS 6.x\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u300cssh_home_t\u300d\u306b\u5909\u66f4\u3057\u3066\u3084\u308c\u3070\u3088\u3044\u3002\n\n```shell-session\n# ls -Z foo-id_rsa.pub\n-rw-r--r--. root root unconfined_u:object_r:admin_home_t:s0 foo-id_rsa.pub\n# mkdir /home/foo/.ssh\n# mv foo-id_rsa.pub /home/foo/.ssh/authorized_keys\n# chcon -t ssh_home_t /home/foo/.ssh/authorized_keys\n# chmod 700 /home/foo/.ssh\n# chmod 600 /home/foo/.ssh/authorized_keys\n# chown -R foo:foo /home/foo/.ssh\n#\n```\n\nchcon(1)\u3067\u306f\u306a\u304frestorecon(8)\u3092\u4f7f\u3046\u624b\u3082\u3042\u308b\u3002\n\n```shell-session\n\n# restorecon -R /home/foo/.ssh\n# \n```\n\n", "tags": ["CentOS6", "SELinux", "SSH"]}