{"tags": ["adobe", "analytics", "PHP", "api"], "context": "\n\nadobe\u306e\u30da\u30fc\u30b8\u3092\u898b\u306a\u304c\u3089\u8a66\u3057\u3066\u307f\u305f\u30e1\u30e2\n\n\u307e\u305a\u306f\u6982\u8981\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306b\u3002\nhttps://marketing.adobe.com/developer/documentation/analytics-reporting-1-4/get-started\nhttps://marketing.adobe.com/developer/get-started/enterprise-api/c-enterprise-api\nhttps://marketing.adobe.com/developer/ja/~ \u306b\u3044\u3051\u3070\u65e5\u672c\u8a9e\u7248\u304c\u7f6e\u3044\u3066\u3042\u308b\u3051\u3069\u3082\u3001\u6700\u65b0\u7248\u3067\u306f\u306a\u3044\u3089\u3057\u304f\u3001\u5c11\u3057\u66f8\u3044\u3066\u3042\u308b\u5185\u5bb9\u304c\u9055\u3046\u3088\u3046\u3002\n\n\u4f7f\u3044\u65b9\n\u2460\u3000Report.Queue\u3067\u30ec\u30dd\u30fc\u30c8\u4f5c\u6210\u3092\u547d\u4ee4\u3002\u30ec\u30dd\u30fc\u30c8ID\u3092\u53d7\u3051\u53d6\u308b\u3002\n\u2461\u3000Report.Get\u3067\u30ec\u30dd\u30fc\u30c8ID\u3092\u6e21\u3057\u3066\u3001\u7d50\u679c\u3092\u53d6\u5f97\uff08\u4f5c\u6210\u4e2d\u306e\u5834\u5408\u306fnotReady\u304c\u8fd4\u3063\u3066\u304f\u308b\uff09\n\u2462\u3000Report.Get\u3067\u7d50\u679c\u3092\u53d6\u5f97\uff08\u30ec\u30dd\u30fc\u30c8\u304c\u51fa\u6765\u4e0a\u304c\u3063\u3066\u5165\u308c\u3070\u3001\u7d50\u679c\u304c\u8fd4\u3063\u3066\u304f\u308b\uff09\n\n\u307a\u30b9\u30d7\u30e9\n\u30fb\u6570\u79d2\u306b1\u56de\u304f\u3089\u3044\u30c1\u30a7\u30c3\u30af\u3059\u3079\u3057\uff08\u6bce\u79d21\u56de\u4ee5\u4e0a\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u308b\u306a\u3002\uff09\n\u30fb\u30ad\u30e5\u30fc\u306f\u4e26\u5217\u3067\u6295\u3052\u3066\u3082OK\n\n\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n\u30fbREST\u306e\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\nhttps://api4.omniture.com/admin/1.4/rest/?method=Report.Queue\n\u30fb\u5730\u57df\u306b\u3088\u3063\u3066\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u7570\u306a\u308b\u306e\u3067\u3001\u5b9a\u671f\u7684\u306b\u30c1\u30a7\u30c3\u30af\u3057\u305f\u65b9\u304c\u3044\u3044\u3089\u3057\u3044\u3002\uff08Company.GetEndpoint\u3067\u30c1\u30a7\u30c3\u30af\uff09\n\u30fb\u3068\u308a\u3042\u3048\u305a\u8a66\u3057\u305f\u3068\u3053\u308d\u3001\u306a\u305c\u304b\u30b7\u30f3\u30ac\u30dd\u30fc\u30eb\u3001\u592a\u5e73\u6d0b\u5317\u897f\u5730\u57df\u3069\u3061\u3089\u3067\u3082\u53e9\u3051\u305f\u3002\n\n\u6e96\u5099\u304c\u5fc5\u8981\u306a\u3082\u306e\n\u30fb\u30e6\u30fc\u30b6\u30fc\u540d\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u4f5c\u3063\u3066\u3082\u3089\u3046\u3002\n\u30fb\u6697\u53f7\u9375\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u4f5c\u3063\u3066\u3082\u3089\u3046\u3002\n\u30fbWeb Service Access\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u4ed8\u4e0e\u3057\u3066\u3082\u3089\u3046\u3002\n\u30fbrsid\uff08\u30ec\u30dd\u30fc\u30c8\u30b9\u30a4\u30fc\u30c8ID\uff09\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u805e\u304f\u3002\n\n\u30ec\u30dd\u30fc\u30c8\u30b9\u30a4\u30fc\u30c8ID\u306e\u78ba\u8a8d\u65b9\u6cd5\n\u30fb\u4e0a\u8a18\u306e\u901a\u308a\u3001\u7ba1\u7406\u8005\u306banalytics\u306e\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u78ba\u8a8d\u3057\u3066\u3082\u3089\u3046\u3002\n\u30fb\u3082\u3057\u304f\u306f\u3001s_code.js\u306es_account\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5024\u304b\u3089\u78ba\u8a8d\u3082\u53ef\u80fd\u3002\n\n\u53e9\u3044\u3066\u307f\u308b\uff08REST 1.4\uff09\n\u3053\u3053\u3067\u8a66\u305b\u308b\nhttps://marketing.adobe.com/developer/api-explorer\n\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u53d6\u5f97\uff08\u3053\u306e\u6642\u306f\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304c\u4e0d\u660e\u306a\u306e\u3067 api.omniture.com \u306b\u5411\u3051\u3066\u53e9\u304f\uff09\n\n\u30fb\u9001\u4fe1\u5185\u5bb9\u3068\u7d50\u679c\uff08***\u306f\u7f6e\u304d\u63db\u3048\u3002\uff09\n\nhttps://api4.omniture.com/admin/1.4/rest/\n\u304c\u6b63\u89e3\u3089\u3057\u3044\u3002\n\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4eca\u78ba\u8a8d\u3057\u305f\u5834\u6240\uff08\u4eca\u56de\u306fSingapore\uff09\u306b\u8a2d\u5b9a\u3057\u3066Report.Queue\u3092\u305f\u305f\u304f\n\n\u30fb\u9001\u4fe1\u5185\u5bb9\u3068\u7d50\u679c\uff08***\u3068999\u306f\u7f6e\u304d\u63db\u3048\u3002\uff09\nhttps://marketing.adobe.com/developer/documentation/analytics-reporting-1-4/get-started\n\u3092\u53c2\u8003\u306b\u3001Ranked Report \u3092\u8a66\u3057\u3066\u307f\u308b\n\n\u30fb\u30ec\u30dd\u30fc\u30c8\u3092\u53d6\u5f97\n\n\u30fb\u9001\u4fe1\u5185\u5bb9\u3068\u7d50\u679c\uff08\u3053\u3053\u3082id\u7684\u306a\u3082\u306e\u306f\u9069\u5b9c\u7f6e\u304d\u63db\u3048\u3066\uff09\nreportID\u306b\u306f\u5148\u307b\u3069\u8fd4\u3063\u3066\u304d\u305f\u5024\u3092\u30bb\u30c3\u30c8\u3002\n\n\u30da\u30fc\u30b8\u306e\u95b2\u89a7\u30e9\u30f3\u30ad\u30f3\u30b0\u304c\u914d\u5217\u3067\u8fd4\u3063\u3066\u304f\u308b\u3002\u3042\u3068\u306f\u597d\u304d\u306b\u52a0\u5de5\u3059\u308c\u3070OK\u3002\n\n\u6700\u5f8c\u306b\u3001Report.Queue\u306e\u90e8\u5206\u3060\u3051PHP\u3067\u66f8\u3044\u3066\u307f\u305f\u306e\u3067\u8f09\u305b\u3066\u304a\u304f\n\u203b\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://d.hatena.ne.jp/i_ogi/20100214/wsse\nhttp://d.hatena.ne.jp/ryster/20070907/1189148449\n<?php\n$url = 'https://api4.omniture.com/admin/1.4/rest/?method=Report.Queue';\n$user_name = \"**********\";\n$password = \"**********\";\n\n$data = array(\n        'reportDescription' => array(\n                        'reportSuiteID' => '**********',\n                        'elements' => array( array(\n                                 'id' => 'page'\n                       ))\n        )\n);\n\n$data_json = json_encode($data);\n\n$nonce = md5(mt_rand());\n$created = date(DATE_ISO8601);\n\n$x_wsse = sprintf('UsernameToken Username=\"%s\", PasswordDigest=\"%s\", Nonce=\"%s\", Created=\"%s\"',\n          $user_name,\n          base64_encode(sha1($nonce . $created . $password, true)),\n          base64_encode($nonce),\n          $created);\n$context = stream_context_create(\n             array(\n                 'http' => array(\n                     'method' => \"POST\",\n                     'header' => \"X-WSSE: $x_wsse\",\n                     'content' => $data_json\n                 )\n             )\n);\n\necho file_get_contents($url, 0, $context);\n?>\n\n\u30fb\u7d30\u304b\u3044\u6761\u4ef6\u6307\u5b9a\u306a\u3069\u306f\u307e\u305f\u4eca\u5ea6\u78ba\u8a8d\u3002\n\u30fb\u30d0\u30fc\u30b8\u30e7\u30f31.4\u304b\u3089OAuth2\u306b\u5bfe\u5fdc\u3057\u3066\u308b\u3068\u306e\u3053\u3068\u3067\u3001WSSE\u3088\u308a\u3082\u305d\u3063\u3061\u3092\u4f7f\u3044\u305f\u3044\u3002\n#adobe\u306e\u30da\u30fc\u30b8\u3092\u898b\u306a\u304c\u3089\u8a66\u3057\u3066\u307f\u305f\u30e1\u30e2\n\n###\u307e\u305a\u306f\u6982\u8981\n\n\u3053\u306e\u8fba\u3092\u53c2\u8003\u306b\u3002\nhttps://marketing.adobe.com/developer/documentation/analytics-reporting-1-4/get-started\nhttps://marketing.adobe.com/developer/get-started/enterprise-api/c-enterprise-api\n\nhttps://marketing.adobe.com/developer/ja/~ \u306b\u3044\u3051\u3070\u65e5\u672c\u8a9e\u7248\u304c\u7f6e\u3044\u3066\u3042\u308b\u3051\u3069\u3082\u3001\u6700\u65b0\u7248\u3067\u306f\u306a\u3044\u3089\u3057\u304f\u3001\u5c11\u3057\u66f8\u3044\u3066\u3042\u308b\u5185\u5bb9\u304c\u9055\u3046\u3088\u3046\u3002\n\n\n###\u4f7f\u3044\u65b9\n\u2460\u3000Report.Queue\u3067\u30ec\u30dd\u30fc\u30c8\u4f5c\u6210\u3092\u547d\u4ee4\u3002\u30ec\u30dd\u30fc\u30c8ID\u3092\u53d7\u3051\u53d6\u308b\u3002\n\u2461\u3000Report.Get\u3067\u30ec\u30dd\u30fc\u30c8ID\u3092\u6e21\u3057\u3066\u3001\u7d50\u679c\u3092\u53d6\u5f97\uff08\u4f5c\u6210\u4e2d\u306e\u5834\u5408\u306fnotReady\u304c\u8fd4\u3063\u3066\u304f\u308b\uff09\n\u2462\u3000Report.Get\u3067\u7d50\u679c\u3092\u53d6\u5f97\uff08\u30ec\u30dd\u30fc\u30c8\u304c\u51fa\u6765\u4e0a\u304c\u3063\u3066\u5165\u308c\u3070\u3001\u7d50\u679c\u304c\u8fd4\u3063\u3066\u304f\u308b\uff09\n\n###\u307a\u30b9\u30d7\u30e9\n\u30fb\u6570\u79d2\u306b1\u56de\u304f\u3089\u3044\u30c1\u30a7\u30c3\u30af\u3059\u3079\u3057\uff08\u6bce\u79d21\u56de\u4ee5\u4e0a\u30c1\u30a7\u30c3\u30af\u3057\u3066\u304f\u308c\u308b\u306a\u3002\uff09\n\u30fb\u30ad\u30e5\u30fc\u306f\u4e26\u5217\u3067\u6295\u3052\u3066\u3082OK\n\n###\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\n\u30fbREST\u306e\u5834\u5408\u306f\u3053\u3093\u306a\u611f\u3058\nhttps://api4.omniture.com/admin/1.4/rest/?method=Report.Queue\n\u30fb\u5730\u57df\u306b\u3088\u3063\u3066\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u7570\u306a\u308b\u306e\u3067\u3001\u5b9a\u671f\u7684\u306b\u30c1\u30a7\u30c3\u30af\u3057\u305f\u65b9\u304c\u3044\u3044\u3089\u3057\u3044\u3002\uff08Company.GetEndpoint\u3067\u30c1\u30a7\u30c3\u30af\uff09\n\u30fb\u3068\u308a\u3042\u3048\u305a\u8a66\u3057\u305f\u3068\u3053\u308d\u3001\u306a\u305c\u304b\u30b7\u30f3\u30ac\u30dd\u30fc\u30eb\u3001\u592a\u5e73\u6d0b\u5317\u897f\u5730\u57df\u3069\u3061\u3089\u3067\u3082\u53e9\u3051\u305f\u3002\n\n###\u6e96\u5099\u304c\u5fc5\u8981\u306a\u3082\u306e\n\u30fb\u30e6\u30fc\u30b6\u30fc\u540d\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u4f5c\u3063\u3066\u3082\u3089\u3046\u3002\n\u30fb\u6697\u53f7\u9375\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u4f5c\u3063\u3066\u3082\u3089\u3046\u3002\n\u30fbWeb Service Access\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u4ed8\u4e0e\u3057\u3066\u3082\u3089\u3046\u3002\n\u30fbrsid\uff08\u30ec\u30dd\u30fc\u30c8\u30b9\u30a4\u30fc\u30c8ID\uff09\u3000\u2192\u3000\u7ba1\u7406\u8005\u306b\u805e\u304f\u3002\n\n###\u30ec\u30dd\u30fc\u30c8\u30b9\u30a4\u30fc\u30c8ID\u306e\u78ba\u8a8d\u65b9\u6cd5\n\u30fb\u4e0a\u8a18\u306e\u901a\u308a\u3001\u7ba1\u7406\u8005\u306banalytics\u306e\u7ba1\u7406\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u78ba\u8a8d\u3057\u3066\u3082\u3089\u3046\u3002\n\u30fb\u3082\u3057\u304f\u306f\u3001s_code.js\u306es_account\u306b\u8a2d\u5b9a\u3057\u3066\u3044\u308b\u5024\u304b\u3089\u78ba\u8a8d\u3082\u53ef\u80fd\u3002\n\n###\u53e9\u3044\u3066\u307f\u308b\uff08REST 1.4\uff09\n\n\u3053\u3053\u3067\u8a66\u305b\u308b\nhttps://marketing.adobe.com/developer/api-explorer\n\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u53d6\u5f97\uff08\u3053\u306e\u6642\u306f\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u304c\u4e0d\u660e\u306a\u306e\u3067 api.omniture.com \u306b\u5411\u3051\u3066\u53e9\u304f\uff09\n![image](https://qiita-image-store.s3.amazonaws.com/0/141758/f7e0280d-5f4c-7071-4ca7-9cf3944a5d13.png)\n\n\u30fb\u9001\u4fe1\u5185\u5bb9\u3068\u7d50\u679c\uff08***\u306f\u7f6e\u304d\u63db\u3048\u3002\uff09\n![image](https://qiita-image-store.s3.amazonaws.com/0/141758/e5b65319-de6c-52d3-6b07-03c50de03c51.png)\nhttps://api4.omniture.com/admin/1.4/rest/\n\u304c\u6b63\u89e3\u3089\u3057\u3044\u3002\n\n\u30fb\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4eca\u78ba\u8a8d\u3057\u305f\u5834\u6240\uff08\u4eca\u56de\u306fSingapore\uff09\u306b\u8a2d\u5b9a\u3057\u3066Report.Queue\u3092\u305f\u305f\u304f\n![image](https://qiita-image-store.s3.amazonaws.com/0/141758/2b94f7bd-5278-d292-dcc9-cf3a7886a605.png)\n\n\u30fb\u9001\u4fe1\u5185\u5bb9\u3068\u7d50\u679c\uff08***\u3068999\u306f\u7f6e\u304d\u63db\u3048\u3002\uff09\nhttps://marketing.adobe.com/developer/documentation/analytics-reporting-1-4/get-started\n\u3092\u53c2\u8003\u306b\u3001Ranked Report \u3092\u8a66\u3057\u3066\u307f\u308b\n![image](https://qiita-image-store.s3.amazonaws.com/0/141758/59dc39f9-fc16-ce96-c1bb-2a77f9092ae2.png)\n\n\u30fb\u30ec\u30dd\u30fc\u30c8\u3092\u53d6\u5f97\n![image](https://qiita-image-store.s3.amazonaws.com/0/141758/02b221da-7f2a-e814-dd00-410e74493e44.png)\n\n\n\u30fb\u9001\u4fe1\u5185\u5bb9\u3068\u7d50\u679c\uff08\u3053\u3053\u3082id\u7684\u306a\u3082\u306e\u306f\u9069\u5b9c\u7f6e\u304d\u63db\u3048\u3066\uff09\nreportID\u306b\u306f\u5148\u307b\u3069\u8fd4\u3063\u3066\u304d\u305f\u5024\u3092\u30bb\u30c3\u30c8\u3002\n![image](https://qiita-image-store.s3.amazonaws.com/0/141758/9b12639f-e057-0546-b718-e15e0a7b9e93.png)\n\u30da\u30fc\u30b8\u306e\u95b2\u89a7\u30e9\u30f3\u30ad\u30f3\u30b0\u304c\u914d\u5217\u3067\u8fd4\u3063\u3066\u304f\u308b\u3002\u3042\u3068\u306f\u597d\u304d\u306b\u52a0\u5de5\u3059\u308c\u3070OK\u3002\n\n###\u6700\u5f8c\u306b\u3001Report.Queue\u306e\u90e8\u5206\u3060\u3051PHP\u3067\u66f8\u3044\u3066\u307f\u305f\u306e\u3067\u8f09\u305b\u3066\u304a\u304f\n\n\u203b\u3053\u3061\u3089\u306e\u30b5\u30a4\u30c8\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u9802\u304d\u307e\u3057\u305f\u3002\nhttp://d.hatena.ne.jp/i_ogi/20100214/wsse\nhttp://d.hatena.ne.jp/ryster/20070907/1189148449\n\n    <?php\n    $url = 'https://api4.omniture.com/admin/1.4/rest/?method=Report.Queue';\n    $user_name = \"**********\";\n    $password = \"**********\";\n    \n    $data = array(\n            'reportDescription' => array(\n                            'reportSuiteID' => '**********',\n                            'elements' => array( array(\n                                     'id' => 'page'\n                           ))\n            )\n    );\n    \n    $data_json = json_encode($data);\n    \n    $nonce = md5(mt_rand());\n    $created = date(DATE_ISO8601);\n    \n    $x_wsse = sprintf('UsernameToken Username=\"%s\", PasswordDigest=\"%s\", Nonce=\"%s\", Created=\"%s\"',\n              $user_name,\n              base64_encode(sha1($nonce . $created . $password, true)),\n              base64_encode($nonce),\n              $created);\n    $context = stream_context_create(\n                 array(\n                     'http' => array(\n                         'method' => \"POST\",\n                         'header' => \"X-WSSE: $x_wsse\",\n                         'content' => $data_json\n                     )\n                 )\n    );\n    \n    echo file_get_contents($url, 0, $context);\n    ?>\n\n\u30fb\u7d30\u304b\u3044\u6761\u4ef6\u6307\u5b9a\u306a\u3069\u306f\u307e\u305f\u4eca\u5ea6\u78ba\u8a8d\u3002\n\u30fb\u30d0\u30fc\u30b8\u30e7\u30f31.4\u304b\u3089OAuth2\u306b\u5bfe\u5fdc\u3057\u3066\u308b\u3068\u306e\u3053\u3068\u3067\u3001WSSE\u3088\u308a\u3082\u305d\u3063\u3061\u3092\u4f7f\u3044\u305f\u3044\u3002\n"}