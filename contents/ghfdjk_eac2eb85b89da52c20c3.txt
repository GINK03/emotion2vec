{"context": "\n\n[\u6982\u8981]\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u3067Proxmox\u3092NUC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u306e\u3067\u3001\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3046\u3002\nProxmox VE\u3092NUC\u306b\u5165\u308c\u3066\u304a\u904a\u3073\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\n\n[\u4e8b\u524d\u6e96\u5099]\n\u66f8\u304d\u3092\u53c2\u8003\u306bProxmox\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\n\nProxmox VE\u3092NUC\u306b\u5165\u308c\u3066\u304a\u904a\u3073\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b\n\n\n[\u4f5c\u696d\u5185\u5bb9]\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u4f5c\u6210\n\u4f5c\u696d\u3059\u308b\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\n### \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\nroot@proxmox:~# mkdir /home/ghfdjk\n\nroot@proxmox:~# useradd ghfdjk -d /home/ghfdjk\n\n\n\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\nroot@proxmox:~# passwd ghfdjk\nEnter new UNIX password:\nRetype new UNIX password:\npasswd: password updated successfully\n\n\nsshd\u306e\u8a2d\u5b9a\n\nsudo \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get update\n$ sudo apt-get -y install sudo\n\nroot@proxmox:~# visudo\n\n# User privilege specification\nroot    ALL=(ALL:ALL) ALL\nghfdjk    ALL=(ALL:ALL) ALL\n\n\n\u4e00\u65e6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u3067\u78ba\u8a8d\nssh-copy-id\u30b3\u30de\u30f3\u30c9\u3067\u9375\u767b\u9332\u3092\u5b9f\u65bd\u3059\u308b\u3002\nLinux\u3060\u3063\u305f\u3089\u591a\u5206\u5927\u4f53\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f\u5165\u3063\u3066\u307e\u3059\u3002\n$ ssh-copy-id ghfdjk@192.168.172.101\n\n[Tips]\n\u9375\u3092\u4f5c\u6210\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066\u7a7aEnter\u3067\u5fdc\u7b54\u3059\u308b\n$ ssh-keygen -t rsa -b 4096 \n\nMac\u3067ssh-copy-id\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u3001GitHub\u306b\u4e0a\u304c\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3046\n$ curl https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/ssh-copy-id.sh -o /usr/local/bin/ssh-copy-id\n$ chmod +x /usr/local/bin/ssh-copy-id\n\n\nsshd_config \u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\nsudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config_org\n\n\nroot\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u8a31\u53ef\u3057\u306a\u3044\n$ sudo sed -i -e \"s/PermitRootLogin yes/PermitRootLogin no/g\" /etc/ssh/sshd_config\n\n\n\u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u7981\u6b62\n$ sudo sed -i -e \"s/#PasswordAuthentication yes/PasswordAuthentication no/g\" /etc/ssh/sshd_config\n\n\nsshd\u306e\u8a2d\u5b9a\u53cd\u6620\n$ sudo /etc/init.d/ssh restart\nRestarting ssh (via systemctl): ssh.service.\n\n\u4e00\u65e6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u5148\u7a0b\u4f5c\u3063\u305f\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u304f\n\n\u65e5\u672c\u8a9e\u5316\u5bfe\u5fdc\n\nNTP\u30b5\u30fc\u30d0\u306e\u5909\u66f4\n$ sudo vi /etc/systemd/timesyncd.conf\n\nntp.nict.jp\u306b\u5909\u66f4\u3059\u308b\n\n/etc/systemd/timesyncd.conf\n[Time]\nServers=ntp.nict.jp\n\n\n\nNTP\u8a2d\u5b9a\u306e\u53cd\u6620\n$ sudo systemctl restart systemd-timesyncd.service\n\n\nlocale\u5909\u66f4\n$ sudo sed -i -r 's/^#? *(ja_JP\\.UTF-8 UTF-8)$/\\1/' /etc/locale.gen\n\n\nlocale\u53cd\u6620\n$ sudo locale-gen\nGenerating locales (this might take a while)...\n  en_US.UTF-8... done\n  ja_JP.UTF-8... done\nGeneration complete.\n\n$ sudo update-locale LANG=ja_JP.UTF-8\n\n\nProxmox VE \u30ea\u30dd\u30b8\u30c8\u30ea\u5909\u66f4\n\u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5fc5\u8981\u306a\u6709\u6599\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u7121\u52b9\u5316\u3057\u3066\u30d5\u30ea\u30fc\u3067\u4f7f\u3048\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n$ sudo sed -i -r 's!^(deb https://enterprise\\.proxmox\\.com/debian jessie pve-enterprise)$!#\\1!' /etc/apt/sources.list.d/pve-enterprise.list\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n$ sudo vi /etc/apt/sources.list\n\n\n/etc/apt/sources.list\ndeb http://ftp.debian.org/debian jessie main contrib\n\n# PVE pve-no-subscription repository provided by proxmox.com,\n# NOT recommended for production use\ndeb http://download.proxmox.com/debian jessie pve-no-subscription\n\n# security updates\ndeb http://security.debian.org jessie/updates main contrib\n\n\n\n\u30d1\u30c3\u30b1\u30fc\u30b8\u66f4\u65b0\n$ sudo apt-get update\n### \u9014\u4e2d `q` \u3092\u62bc\u305b\u3068\u51fa\u308b\u306e\u3067 `q`\u3092\u62bc\u3059\n$ sudo apt-get upgrade\n$ apt-get dist-upgrade\n\n\n\u30e1\u30fc\u30eb\u9001\u4fe1\u5148\u8a2d\u5b9a(Gmail)\n\n\u5fc5\u8981\u306a\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ sudo apt-get install -y postfix libsasl2-modules sasl2-bin\n\n\ngmail\u7528\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\n/etc/postfix/gmail\n\n[smtp.gmail.com]:587 <Gmail\u30a2\u30c9\u30ec\u30b9>:<\u30d1\u30b9\u30ef\u30fc\u30c9>\n\n\ngmail\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u3092\u5909\u66f4\n$ sudo chmod 600 /etc/postfix/gmail\n\n\nPostfix\u306eDB\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n$ sudo postmap /etc/postfix/gmail\n\n\nPostfix\u8a2d\u5b9a\n$ sudo vi /etc/postfix/main.cf\n\n\u4e0b\u8a18\u3092\u8ffd\u8a18\u3059\u308b\u3002\n\n/etc/postfix/main.cf\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_password_maps = hash:/etc/postfix/gmail\nsmtp_sasl_security_options = noanonymous\nsmtp_sasl_tls_security_options = noanonymous\nsmtp_sasl_mechanism_filter = plain\nsmtp_use_tls = yes\n\n\nsed \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3059\u308b\u3002\nsudo sed \"s/^relayhost \\=/relayhost = [smtp.gmail.com]:587/g\" /etc/postfix/main.cf | grep relayhost\n\n\nPostfix\u306e\u8a2d\u5b9a\u53cd\u6620\n$ sudo postfix reload\n\n\n\u30c6\u30b9\u30c8\u3067\u9001\u4fe1\u3057\u3066\u307f\u308b\n$ sudo date | mail -s test user@gmail.com\n\n\n[\u4e8b\u5f8c\u78ba\u8a8d\u30fb\u4f5c\u696d]\n\u8af8\u3005\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u639b\u3051\u3066\u3044\u308b\u306e\u3067\u3001rboot\u3057\u3066\u554f\u984c\u306a\u304f\u8d77\u52d5\u3059\u308b\u78ba\u8a8d\u3057\u3066\u304a\u304f\u3002\n# [\u6982\u8981]\n\u4e0b\u8a18\u306e\u8a18\u4e8b\u3067Proxmox\u3092NUC\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f\u306e\u3067\u3001\u521d\u671f\u8a2d\u5b9a\u3092\u884c\u3046\u3002\n\n[Proxmox VE\u3092NUC\u306b\u5165\u308c\u3066\u304a\u904a\u3073\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b](http://qiita.com/ghfdjk/items/1840ca3934be85c194f9)\n\n# [\u4e8b\u524d\u6e96\u5099]\n\u66f8\u304d\u3092\u53c2\u8003\u306bProxmox\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u3053\u3068\n\n* [Proxmox VE\u3092NUC\u306b\u5165\u308c\u3066\u304a\u904a\u3073\u74b0\u5883\u3092\u69cb\u7bc9\u3059\u308b](http://qiita.com/ghfdjk/items/1840ca3934be85c194f9)\n\n\n# [\u4f5c\u696d\u5185\u5bb9]\n## \u4e00\u822c\u30e6\u30fc\u30b6\u4f5c\u6210\n\u4f5c\u696d\u3059\u308b\u30e6\u30fc\u30b6\u3092\u4f5c\u6210\n\n```bash\n### \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\nroot@proxmox:~# mkdir /home/ghfdjk\n\nroot@proxmox:~# useradd ghfdjk -d /home/ghfdjk\n```\n\n### \u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u8a2d\u5b9a\n```bash\nroot@proxmox:~# passwd ghfdjk\nEnter new UNIX password:\nRetype new UNIX password:\npasswd: password updated successfully\n```\n\n## sshd\u306e\u8a2d\u5b9a\n### sudo \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ sudo apt-get update\n$ sudo apt-get -y install sudo\n```\n\n```bash\nroot@proxmox:~# visudo\n```\n\n```visudo\n# User privilege specification\nroot    ALL=(ALL:ALL) ALL\nghfdjk    ALL=(ALL:ALL) ALL\n```\n\n### \u4e00\u65e6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u4f5c\u6210\u3057\u305f\u30e6\u30fc\u30b6\u3067\u78ba\u8a8d\n`ssh-copy-id`\u30b3\u30de\u30f3\u30c9\u3067\u9375\u767b\u9332\u3092\u5b9f\u65bd\u3059\u308b\u3002\nLinux\u3060\u3063\u305f\u3089\u591a\u5206\u5927\u4f53\u3053\u306e\u30b3\u30de\u30f3\u30c9\u306f\u5165\u3063\u3066\u307e\u3059\u3002\n\n```bash\n$ ssh-copy-id ghfdjk@192.168.172.101\n```\n\n[Tips]\n\u9375\u3092\u4f5c\u6210\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u4e0b\u8a18\u3092\u5b9f\u884c\u3057\u3066\u7a7aEnter\u3067\u5fdc\u7b54\u3059\u308b\n\n```bash\n$ ssh-keygen -t rsa -b 4096 \n```\n\nMac\u3067`ssh-copy-id`\u3092\u4f7f\u3044\u305f\u3044\u5834\u5408\u306f\u3001GitHub\u306b\u4e0a\u304c\u3063\u3066\u3044\u308b\u306e\u3067\u3001\u305d\u308c\u3092\u4f7f\u3046\n\n```bash\n$ curl https://raw.githubusercontent.com/beautifulcode/ssh-copy-id-for-OSX/master/ssh-copy-id.sh -o /usr/local/bin/ssh-copy-id\n$ chmod +x /usr/local/bin/ssh-copy-id\n```\n\n### sshd_config \u306e\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\n```bash\nsudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config_org\n```\n\n### root\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u3092\u8a31\u53ef\u3057\u306a\u3044\n```bash\n$ sudo sed -i -e \"s/PermitRootLogin yes/PermitRootLogin no/g\" /etc/ssh/sshd_config\n```\n\n### \u30d1\u30b9\u30ef\u30fc\u30c9\u8a8d\u8a3c\u3092\u7981\u6b62\n```bash\n$ sudo sed -i -e \"s/#PasswordAuthentication yes/PasswordAuthentication no/g\" /etc/ssh/sshd_config\n```\n\n### sshd\u306e\u8a2d\u5b9a\u53cd\u6620\n```bash\n$ sudo /etc/init.d/ssh restart\nRestarting ssh (via systemctl): ssh.service.\n```\n\n__\u4e00\u65e6\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3001\u5148\u7a0b\u4f5c\u3063\u305f\u30e6\u30fc\u30b6\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u304f__\n\n## \u65e5\u672c\u8a9e\u5316\u5bfe\u5fdc\n### NTP\u30b5\u30fc\u30d0\u306e\u5909\u66f4\n```bash\n$ sudo vi /etc/systemd/timesyncd.conf\n```\n\n`ntp.nict.jp`\u306b\u5909\u66f4\u3059\u308b\n\n```/etc/systemd/timesyncd.conf\n[Time]\nServers=ntp.nict.jp\n```\n\n### NTP\u8a2d\u5b9a\u306e\u53cd\u6620\n```bash\n$ sudo systemctl restart systemd-timesyncd.service\n```\n\n### locale\u5909\u66f4\n```bash\n$ sudo sed -i -r 's/^#? *(ja_JP\\.UTF-8 UTF-8)$/\\1/' /etc/locale.gen\n```\n\n### locale\u53cd\u6620\n```bash\n$ sudo locale-gen\nGenerating locales (this might take a while)...\n  en_US.UTF-8... done\n  ja_JP.UTF-8... done\nGeneration complete.\n```\n\n```\n$ sudo update-locale LANG=ja_JP.UTF-8\n```\n\n## Proxmox VE \u30ea\u30dd\u30b8\u30c8\u30ea\u5909\u66f4\n\u30e9\u30a4\u30bb\u30f3\u30b9\u304c\u5fc5\u8981\u306a\u6709\u6599\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u7121\u52b9\u5316\u3057\u3066\u30d5\u30ea\u30fc\u3067\u4f7f\u3048\u308b\u30ea\u30dd\u30b8\u30c8\u30ea\u3092\u8ffd\u52a0\n\n```bash\n$ sudo sed -i -r 's!^(deb https://enterprise\\.proxmox\\.com/debian jessie pve-enterprise)$!#\\1!' /etc/apt/sources.list.d/pve-enterprise.list\n```\n\n\u30ea\u30dd\u30b8\u30c8\u30ea\u306e\u8ffd\u52a0\n\n```bash\n$ sudo vi /etc/apt/sources.list\n```\n\n```/etc/apt/sources.list\ndeb http://ftp.debian.org/debian jessie main contrib\n\n# PVE pve-no-subscription repository provided by proxmox.com,\n# NOT recommended for production use\ndeb http://download.proxmox.com/debian jessie pve-no-subscription\n\n# security updates\ndeb http://security.debian.org jessie/updates main contrib\n```\n\n## \u30d1\u30c3\u30b1\u30fc\u30b8\u66f4\u65b0\n```bash\n$ sudo apt-get update\n### \u9014\u4e2d `q` \u3092\u62bc\u305b\u3068\u51fa\u308b\u306e\u3067 `q`\u3092\u62bc\u3059\n$ sudo apt-get upgrade\n$ apt-get dist-upgrade\n```\n\n## \u30e1\u30fc\u30eb\u9001\u4fe1\u5148\u8a2d\u5b9a(Gmail)\n### \u5fc5\u8981\u306a\u30df\u30c9\u30eb\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```bash\n$ sudo apt-get install -y postfix libsasl2-modules sasl2-bin\n```\n\n### gmail\u7528\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210 \n```bash\n/etc/postfix/gmail\n```\n\n```/etc/postfix/gmail\n[smtp.gmail.com]:587 <Gmail\u30a2\u30c9\u30ec\u30b9>:<\u30d1\u30b9\u30ef\u30fc\u30c9>\n```\n\n#### gmail\u30d5\u30a1\u30a4\u30eb\u306e\u6a29\u9650\u3092\u5909\u66f4\n```bash\n$ sudo chmod 600 /etc/postfix/gmail\n```\n\n#### Postfix\u306eDB\u30d5\u30a1\u30a4\u30eb\u4f5c\u6210\n```bash\n$ sudo postmap /etc/postfix/gmail\n```\n\n### Postfix\u8a2d\u5b9a\n```bash\n$ sudo vi /etc/postfix/main.cf\n```\n\n\u4e0b\u8a18\u3092\u8ffd\u8a18\u3059\u308b\u3002\n\n```/etc/postfix/main.cf\nsmtp_sasl_auth_enable = yes\nsmtp_sasl_password_maps = hash:/etc/postfix/gmail\nsmtp_sasl_security_options = noanonymous\nsmtp_sasl_tls_security_options = noanonymous\nsmtp_sasl_mechanism_filter = plain\nsmtp_use_tls = yes\n```\n\nsed \u3067\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u4fee\u6b63\u3059\u308b\u3002\n\n```bash\nsudo sed \"s/^relayhost \\=/relayhost = [smtp.gmail.com]:587/g\" /etc/postfix/main.cf | grep relayhost\n```\n\n### Postfix\u306e\u8a2d\u5b9a\u53cd\u6620\n```bash\n$ sudo postfix reload\n```\n\n### \u30c6\u30b9\u30c8\u3067\u9001\u4fe1\u3057\u3066\u307f\u308b\n```bash\n$ sudo date | mail -s test user@gmail.com\n```\n\n# [\u4e8b\u5f8c\u78ba\u8a8d\u30fb\u4f5c\u696d]\n\u8af8\u3005\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u639b\u3051\u3066\u3044\u308b\u306e\u3067\u3001`rboot`\u3057\u3066\u554f\u984c\u306a\u304f\u8d77\u52d5\u3059\u308b\u78ba\u8a8d\u3057\u3066\u304a\u304f\u3002\n", "tags": ["proxmox"]}