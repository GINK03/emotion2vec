{"context": "EC2\u4e0a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bnginx\u3068PHP5.6\u3092\u5165\u308c\u3066\u3001PHP\u306e\u5b9f\u884c\u74b0\u5883\u3092\u6700\u901f\u3067\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\n\u30b4\u30fc\u30eb\n\nAmazon Linux AMI\u306e\u6a19\u6e96\u30ea\u30dd\u30b8\u30c8\u30ea\u306enginx\u3068php5.6, php-fpm\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089PHP\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\nnginx\u3068php-fpm\u9593\u306e\u3084\u308a\u3068\u308a\u3092Unix\u30c9\u30e1\u30a4\u30f3\u30bd\u30b1\u30c3\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\n\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306f\u3001/var/www/default\u306b\u3057\u307e\u3059\n\n\nEC2 \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\nAmazon Linux AMI 2015.03 (HVM), SSD Volume Type \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5efa\u3066\u308b\u3002\u666e\u901a\u306b\u7acb\u3066\u308c\u3070OK\u3002\n\u6700\u5f8c\u306b\u5916\u304b\u3089\u898b\u3048\u308b\u304b\u307f\u305f\u3044\u4eba\u306f\u3001Elastic-IP\u304b\u30d1\u30d6\u30ea\u30c3\u30afIP\u3092\u632f\u308a\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a\u3067TCP80\u756a\u3092\u958b\u3051\u3066\u304a\u304d\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nnginx, php56 , php56-fpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nsudo yum install nginx -y\nsudo yum install php56 php56-fpm -y\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\n\u307e\u305a\u306fnginx\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u304b\u3089\u3002\n\n/etc/nginx/nginx.conf\n\n+ server_tokens off;\n\n  http {\n-   index index.html index.htm;\n+   index index.php\n      server {\n-       root /usr/share/nginx/html; \n+       root /var/www/default;\n\n-       #location ~ \\.php$ {\n-       #    root           html;\n-       #    fastcgi_pass   127.0.0.1:9000;\n-       #    fastcgi_index  index.php;\n-       #    fastcgi_param  SCRIPT_FILENAME/scripts$fastcgi_script_name;\n-       #    include        fastcgi_params;\n-       #}\n+       location ~ \\.php$ {\n+       root           /var/www/default;\n+       fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;\n+       fastcgi_index  index.php;\n+       fastcgi_param  SCRIPT_FILENAME /var/www/default$fastcgi_script_name;\n+       include        fastcgi_params;\n+     }\n\n\n\u6b21\u306bphp-fpm\u306e\u8a2d\u5b9a\u3002\n\n/etc/php-fpm-5.6.d/www.conf\n- user = apache\n+ user = nginx\n\n- group = apache\n+ group = nginx\n\n-   listen = 127.0.0.1:9000\n+   listen =  /var/run/php-fpm/php-fpm.sock\n\n-   ;listen.owner = nobody\n-   ;listen.group = nobody\n+   listen.owner = nginx  \n+   listen.group = nginx\n\n\n\n\u8d77\u52d5\u3068\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\nnginx, php\u3092\u305d\u308c\u305e\u308c\u8d77\u52d5\u3057\u307e\u3059\u3002\nsudo service nginx start\nsudo chkconfig nginx on\nsudo chkconfig --list nginx\n\nsudo service php-fpm start\nsudo chkconfig php-fpm on\nsudo chkconfig --list php-fpm\n\n\n\u8868\u793a\u78ba\u8a8d\n# \u9069\u5f53\u306a\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u5909\u66f4\necho \"<?php phpinfo();\" >> /var/www/default/hogehogehoge.php\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001phpinfo\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u78ba\u8a8d\u3057\u305f\u3089\u3059\u3050\u306b\u6d88\u3057\u307e\u3057\u3087\u3046\u3002\nhttp://[\u30b5\u30fc\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9]/hogehogehoge.php\n\n\n\u53c2\u8003\nAmazonLinux\u306bnginx+PHP5.6+PHP-fpm+PHP-redis\u74b0\u5883\u3092\u4f5c\u308b - Qiita\nEC2\u4e0a\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306bnginx\u3068PHP5.6\u3092\u5165\u308c\u3066\u3001PHP\u306e\u5b9f\u884c\u74b0\u5883\u3092\u6700\u901f\u3067\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3067\u3059\u3002\n\n# \u30b4\u30fc\u30eb\n\n- Amazon Linux AMI\u306e\u6a19\u6e96\u30ea\u30dd\u30b8\u30c8\u30ea\u306enginx\u3068php5.6, php-fpm\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\n- \u30d6\u30e9\u30a6\u30b6\u304b\u3089PHP\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u72b6\u614b\u306b\u306a\u308a\u307e\u3059\n- nginx\u3068php-fpm\u9593\u306e\u3084\u308a\u3068\u308a\u3092Unix\u30c9\u30e1\u30a4\u30f3\u30bd\u30b1\u30c3\u30c8\u306b\u5909\u66f4\u3057\u307e\u3059\n- \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u30eb\u30fc\u30c8\u306f\u3001`/var/www/default`\u306b\u3057\u307e\u3059\n\n# EC2 \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u8d77\u52d5\n\nAmazon Linux AMI 2015.03 (HVM), SSD Volume Type \u3067\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u5efa\u3066\u308b\u3002\u666e\u901a\u306b\u7acb\u3066\u308c\u3070OK\u3002\n\u6700\u5f8c\u306b\u5916\u304b\u3089\u898b\u3048\u308b\u304b\u307f\u305f\u3044\u4eba\u306f\u3001Elastic-IP\u304b\u30d1\u30d6\u30ea\u30c3\u30afIP\u3092\u632f\u308a\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30b0\u30eb\u30fc\u30d7\u306e\u8a2d\u5b9a\u3067TCP80\u756a\u3092\u958b\u3051\u3066\u304a\u304d\u307e\u3059\u3002\n\n# \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nnginx, php56 , php56-fpm\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\nsudo yum install nginx -y\nsudo yum install php56 php56-fpm -y\n```\n\n## \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\n\n\u307e\u305a\u306fnginx\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u5909\u66f4\u304b\u3089\u3002\n\n```diff:/etc/nginx/nginx.conf\n\n+ server_tokens off;\n\n  http {\n-   index index.html index.htm;\n+   index index.php\n      server {\n-       root /usr/share/nginx/html; \n+       root /var/www/default;\n\n-       #location ~ \\.php$ {\n-       #    root           html;\n-       #    fastcgi_pass   127.0.0.1:9000;\n-       #    fastcgi_index  index.php;\n-       #    fastcgi_param  SCRIPT_FILENAME/scripts$fastcgi_script_name;\n-       #    include        fastcgi_params;\n-       #}\n+       location ~ \\.php$ {\n+       root           /var/www/default;\n+       fastcgi_pass unix:/var/run/php-fpm/php-fpm.sock;\n+       fastcgi_index  index.php;\n+       fastcgi_param  SCRIPT_FILENAME /var/www/default$fastcgi_script_name;\n+       include        fastcgi_params;\n+     }\n```\n\n\u6b21\u306bphp-fpm\u306e\u8a2d\u5b9a\u3002\n\n```diff:/etc/php-fpm-5.6.d/www.conf\n- user = apache\n+ user = nginx\n\n- group = apache\n+ group = nginx\n\n-   listen = 127.0.0.1:9000\n+   listen =  /var/run/php-fpm/php-fpm.sock\n\n-   ;listen.owner = nobody\n-   ;listen.group = nobody\n+   listen.owner = nginx  \n+   listen.group = nginx\n```\n\n## \u8d77\u52d5\u3068\u81ea\u52d5\u8d77\u52d5\u8a2d\u5b9a\n\nnginx, php\u3092\u305d\u308c\u305e\u308c\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\nsudo service nginx start\nsudo chkconfig nginx on\nsudo chkconfig --list nginx\n\nsudo service php-fpm start\nsudo chkconfig php-fpm on\nsudo chkconfig --list php-fpm\n```\n\n## \u8868\u793a\u78ba\u8a8d\n\n```\n# \u9069\u5f53\u306a\u30d5\u30a1\u30a4\u30eb\u540d\u306b\u5909\u66f4\necho \"<?php phpinfo();\" >> /var/www/default/hogehogehoge.php\n```\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u4ee5\u4e0b\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u3001phpinfo\u304c\u8868\u793a\u3055\u308c\u308c\u3070OK\u3067\u3059\u3002\n\u3053\u306e\u30d5\u30a1\u30a4\u30eb\u306f\u78ba\u8a8d\u3057\u305f\u3089\u3059\u3050\u306b\u6d88\u3057\u307e\u3057\u3087\u3046\u3002\n\n```\nhttp://[\u30b5\u30fc\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9]/hogehogehoge.php\n```\n\n\n## \u53c2\u8003\n\n[AmazonLinux\u306bnginx+PHP5.6+PHP-fpm+PHP-redis\u74b0\u5883\u3092\u4f5c\u308b - Qiita](http://qiita.com/toshihirock/items/77835f83f679423874ea)\n", "tags": ["nginx", "PHP", "EC2", "php-fpm"]}