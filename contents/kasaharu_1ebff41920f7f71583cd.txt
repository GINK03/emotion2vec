{"tags": ["Hubot", "Slack", "Heroku"], "context": " More than 1 year has passed since last update.\n\nHubot \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6e96\u5099 (Mac)\n\nHubot \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nshell\n$ npm install -g yo generator-hubot\n\n\n\nHubot \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\nshell\n$ mkdir mybot(\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d)\n$ cd mybot\n$ yo hubot\n# \u4eca\u56de\u306f Slack \u3068\u9023\u643a\u3057\u305f\u3044\u306e\u3067 Bot adapter \u306b\u306f slack \u3092\u6307\u5b9a\n\n\n\nslack bot \u306e\u7528\u610f\n\nslack \u3067\u9069\u5f53\u306a\u30c1\u30fc\u30e0\u3092\u7528\u610f\u3059\u308b\n\nhttps://slack.com/\n\n\nslack \u3067 hubot \u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u3059\u308b\n\nApps & Custom Integrations \u3092\u9078\u629e\n\n\n\nhubot \u3092\u691c\u7d22\n\n\n\u898b\u3064\u304b\u3063\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u540d\u524d\u3092\u8a2d\u5b9a (\u4eca\u56de\u306f mybot)\n\nAPI token \u304c\u767a\u884c\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\nHUBOT_SLACK_TOKEN=xxx\n\n\n\n\nHeroku \u306e\u8a2d\u5b9a\n\n\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 Heroku \u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\n\n\u4e0b\u8a18\u3092\u53c2\u8003\u306b toolbelt \u3092\u53d6\u5f97\u3059\u308b\n\n\nhttps://toolbelt.heroku.com/osx\n\n\nheroku \u306b\u30ed\u30b0\u30a4\u30f3\n\n$ heroku login\n\n\nHeroku \u4e0a\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\n\nshell\n$ heroku create app_name\nCreating app_name... done, stack is cedar-14\nhttps://app_name.herokuapp.com/ | https://git.heroku.com/app_name.git\nGit remote heroku added\n# \u3061\u306a\u307f\u306b heroku \u4e0a\u3067\u30e6\u30cb\u30fc\u30af\u306a\u540d\u524d\u3058\u3083\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3063\u307d\u3044\n$ git remote -v\nheroku  https://git.heroku.com/app_name.git (fetch)\nheroku  https://git.heroku.com/app_name.git (push)\n\n\n\nHeroku \u306e config \u3092\u8ffd\u52a0\n\nshell\n$ heroku config:add HUBOT_SLACK_TOKEN=xxx\n# slack \u306e token \u3092\u8a2d\u5b9a\u3059\u308b(\u4e0a\u3067\u767a\u884c\u3055\u308c\u305f API token)\n$ heroku config:add HUBOT_CHATWORK_ROOMS=\"room_id\"\n# slack \u3067 hubot \u3092\u53c2\u52a0\u3055\u305b\u305f\u3044 room id \u3092\u8a2d\u5b9a\n$ heroku config:add TZ=Asia/Tokyo \n# \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u65e5\u672c\u306b\u8a2d\u5b9a\n\n\n\nHeroku \u304c\u8d77\u304d\u3066\u3044\u308b\u6642\u9593\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u3067\u8a2d\u5b9a\n\n\u7121\u6599\u30d7\u30e9\u30f3\u306f 1 \u65e5 6 \u6642\u9593\u7720\u3063\u3066\u3057\u307e\u3046\u306e\u3067 Process Scheduler \u3068\u3044\u3046\u30a2\u30c9\u30aa\u30f3\u3067\u6642\u9593\u3092\u7ba1\u7406\n\n\nhttps://elements.heroku.com/addons/process-scheduler\n\n\n\n\nkeep-alive \u8a2d\u5b9a\n\nheroku \u306f 30 \u5206\u9593\u30a2\u30af\u30bb\u30b9\u304c\u306a\u3044\u3068 sleep \u3059\u308b\u306e\u3067 hubot-heroku-keepalive \u3092\u8a2d\u5b9a\n\n\nshell\n$ npm install hubot-heroku-keepalive --save\n$ heroku config:set HUBOT_HEROKU_KEEPALIVE_URL=https://app_name.herokuapp.com/\n# Process Scheduler \u3068\u5408\u308f\u305b\u3066 wakeup time \u3068 sleep time \u3092\u8a2d\u5b9a\u3059\u308b\n$ heroku config:add HUBOT_HEROKU_WAKEUP_TIME=7:00\n$ heroku config:add HUBOT_HEROKU_SLEEP_TIME=24:00\n\n\n\nHeroku \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n\nbot \u304c\u3084\u308b\u3053\u3068\n\n\u6bce\u6b63\u6642\u306b\u6642\u523b\u3092\u77e5\u3089\u305b\u308b\u6a5f\u80fd\u3092\u8ffd\u52a0\n\n\nscript/notice.coffee\ncronJob = require('cron').CronJob\nmodule.exports = (robot) ->\n  new cronJob('0 0 * * * *', () =>\n    date     = new Date()\n    hour     = date.getHours()\n    envelope = room: process.env.HUBOT_CHATWORK_ROOMS\n    robot.send envelope, \"#{hour} \u6642\u3067\u3059\u3002\"\n  ).start()\n\n\n\n\u30c7\u30d7\u30ed\u30a4\n\nheroku \u306b push\n\n$ git push heroku master\n\n\n\u7d50\u679c\n\n\u3053\u3093\u306a\u611f\u3058\u3067\u6c7a\u307e\u3063\u305f\u6642\u9593\u306b\u6c7a\u307e\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092 post \u3067\u304d\u308b\n\n\n\n\u53c2\u8003\n\nhttps://hubot.github.com/\nhttps://github.com/hubot-scripts/hubot-heroku-keepalive\nhttps://elements.heroku.com/addons/process-scheduler\n\n# Hubot \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6e96\u5099 (Mac)\n## Hubot \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```:shell\n$ npm install -g yo generator-hubot\n```\n\n## Hubot \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\n\n```:shell\n$ mkdir mybot(\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u540d)\n$ cd mybot\n$ yo hubot\n# \u4eca\u56de\u306f Slack \u3068\u9023\u643a\u3057\u305f\u3044\u306e\u3067 Bot adapter \u306b\u306f slack \u3092\u6307\u5b9a\n```\n\n\n# slack bot \u306e\u7528\u610f\n## slack \u3067\u9069\u5f53\u306a\u30c1\u30fc\u30e0\u3092\u7528\u610f\u3059\u308b\n* https://slack.com/\n\n## slack \u3067 hubot \u3092\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u8a2d\u5b9a\u3092\u3059\u308b\n* Apps & Custom Integrations \u3092\u9078\u629e\n\n![Apps & Custom Integrations.png](https://qiita-image-store.s3.amazonaws.com/0/28573/ad706f72-0ef7-5a34-ae6b-e06350119f2a.png)\n\n* hubot \u3092\u691c\u7d22\n![Search_hubot.png](https://qiita-image-store.s3.amazonaws.com/0/28573/c14af0a7-2579-cadf-4a91-9f5b3d2ed00f.png)\n\n* \u898b\u3064\u304b\u3063\u305f\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3001\u540d\u524d\u3092\u8a2d\u5b9a (\u4eca\u56de\u306f mybot)\n    * API token \u304c\u767a\u884c\u3055\u308c\u308b\u306e\u3067\u30e1\u30e2\n    * HUBOT_SLACK_TOKEN=xxx\n\n\n# Heroku \u306e\u8a2d\u5b9a\n## \u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 Heroku \u3092\u64cd\u4f5c\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\n* \u4e0b\u8a18\u3092\u53c2\u8003\u306b toolbelt \u3092\u53d6\u5f97\u3059\u308b\n    * https://toolbelt.heroku.com/osx\n* heroku \u306b\u30ed\u30b0\u30a4\u30f3\n\n```\n$ heroku login\n```\n\n## Heroku \u4e0a\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\n\n```:shell\n$ heroku create app_name\nCreating app_name... done, stack is cedar-14\nhttps://app_name.herokuapp.com/ | https://git.heroku.com/app_name.git\nGit remote heroku added\n# \u3061\u306a\u307f\u306b heroku \u4e0a\u3067\u30e6\u30cb\u30fc\u30af\u306a\u540d\u524d\u3058\u3083\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3063\u307d\u3044\n$ git remote -v\nheroku  https://git.heroku.com/app_name.git (fetch)\nheroku  https://git.heroku.com/app_name.git (push)\n```\n\n## Heroku \u306e config \u3092\u8ffd\u52a0\n\n```:shell\n$ heroku config:add HUBOT_SLACK_TOKEN=xxx\n# slack \u306e token \u3092\u8a2d\u5b9a\u3059\u308b(\u4e0a\u3067\u767a\u884c\u3055\u308c\u305f API token)\n$ heroku config:add HUBOT_CHATWORK_ROOMS=\"room_id\"\n# slack \u3067 hubot \u3092\u53c2\u52a0\u3055\u305b\u305f\u3044 room id \u3092\u8a2d\u5b9a\n$ heroku config:add TZ=Asia/Tokyo \n# \u30bf\u30a4\u30e0\u30be\u30fc\u30f3\u3092\u65e5\u672c\u306b\u8a2d\u5b9a\n```\n\n## Heroku \u304c\u8d77\u304d\u3066\u3044\u308b\u6642\u9593\u3092\u30b9\u30b1\u30b8\u30e5\u30fc\u30e9\u3067\u8a2d\u5b9a\n\n* \u7121\u6599\u30d7\u30e9\u30f3\u306f 1 \u65e5 6 \u6642\u9593\u7720\u3063\u3066\u3057\u307e\u3046\u306e\u3067 Process Scheduler \u3068\u3044\u3046\u30a2\u30c9\u30aa\u30f3\u3067\u6642\u9593\u3092\u7ba1\u7406\n    * https://elements.heroku.com/addons/process-scheduler\n\n## keep-alive \u8a2d\u5b9a\n* heroku \u306f 30 \u5206\u9593\u30a2\u30af\u30bb\u30b9\u304c\u306a\u3044\u3068 sleep \u3059\u308b\u306e\u3067 hubot-heroku-keepalive \u3092\u8a2d\u5b9a\n\n```:shell\n$ npm install hubot-heroku-keepalive --save\n$ heroku config:set HUBOT_HEROKU_KEEPALIVE_URL=https://app_name.herokuapp.com/\n# Process Scheduler \u3068\u5408\u308f\u305b\u3066 wakeup time \u3068 sleep time \u3092\u8a2d\u5b9a\u3059\u308b\n$ heroku config:add HUBOT_HEROKU_WAKEUP_TIME=7:00\n$ heroku config:add HUBOT_HEROKU_SLEEP_TIME=24:00\n```\n\n# Heroku \u3078\u306e\u30c7\u30d7\u30ed\u30a4\n## bot \u304c\u3084\u308b\u3053\u3068\n* \u6bce\u6b63\u6642\u306b\u6642\u523b\u3092\u77e5\u3089\u305b\u308b\u6a5f\u80fd\u3092\u8ffd\u52a0\n\n```coffeescript:script/notice.coffee\ncronJob = require('cron').CronJob\nmodule.exports = (robot) ->\n  new cronJob('0 0 * * * *', () =>\n    date     = new Date()\n    hour     = date.getHours()\n    envelope = room: process.env.HUBOT_CHATWORK_ROOMS\n    robot.send envelope, \"#{hour} \u6642\u3067\u3059\u3002\"\n  ).start()\n```\n\n\n## \u30c7\u30d7\u30ed\u30a4\n\n* heroku \u306b push\n\n```\n$ git push heroku master\n```\n\n# \u7d50\u679c\n\n* \u3053\u3093\u306a\u611f\u3058\u3067\u6c7a\u307e\u3063\u305f\u6642\u9593\u306b\u6c7a\u307e\u3063\u305f\u30e1\u30c3\u30bb\u30fc\u30b8\u3092 post \u3067\u304d\u308b\n\n![notice.png](https://qiita-image-store.s3.amazonaws.com/0/28573/4c1cba42-6d71-6b5d-a8e2-ab266b3b14f3.png)\n\n# \u53c2\u8003\n* https://hubot.github.com/\n* https://github.com/hubot-scripts/hubot-heroku-keepalive\n* https://elements.heroku.com/addons/process-scheduler\n"}