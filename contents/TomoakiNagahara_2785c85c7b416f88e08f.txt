{"context": " More than 1 year has passed since last update.\nhttp://uniwebview.onevcat.com/manual.html\nhttp://every-studio.com/wordpress/2015/04/01/unity5%E3%81%A7webview%E3%82%92%E4%BD%BF%E3%81%86%EF%BC%81/\nhttps://twitter.com/onevcat/status/532176093822722048\n\n\nusing UnityEngine;\nusing System.Collections;\n\npublic class Main : MonoBehaviour {\n\n    private UniWebView _webView;\n    private string _errorMessage;\n\n    // Use this for initialization\n    void Start () {\n        Debug.Log (this._errorMessage);\n\n        _webView = GetComponent<UniWebView>();\n        if (_webView == null) {\n\n            //  User agent masquerade.\n            UniWebView.SetUserAgent (\"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Version/8.0 Mobile/12A365 Safari/600.1.4\");\n\n            _webView = gameObject.AddComponent<UniWebView>();\n            _webView.OnReceivedMessage += OnReceivedMessage;\n            _webView.OnLoadComplete += OnLoadComplete;\n            _webView.OnWebViewShouldClose += OnWebViewShouldClose;\n            _webView.OnEvalJavaScriptFinished += OnEvalJavaScriptFinished;\n            _webView.InsetsForScreenOreitation += InsetsForScreenOreitation;\n        }\n        _webView.url = \"http://uqunie.com/useragent/\";\n        _webView.Load();\n        _webView.Show ();\n        _errorMessage = null;\n    }\n\n    void OnLoadComplete(UniWebView webView, bool success, string errorMessage) {\n        if (success) {\n            webView.Show();\n        } else {\n            Debug.Log(\"Something wrong in webview loading: \" + errorMessage);\n            _errorMessage = errorMessage;\n        }\n    }\n\n    bool OnWebViewShouldClose(UniWebView webView) {\n        if (webView == _webView) {\n            _webView = null;\n            return true;\n        }\n        return false;\n    }\n\n    void OnReceivedMessage(UniWebView webView, UniWebViewMessage message) {\n        /**\n         * From WebView's message.\n         * \n         * Ex:\n         * uniwebview://command?foo=true&bar=false&num=1\n         */\n        Debug.Log(message.rawMessage);\n        Debug.Log(message.path); // command\n        Debug.Log(message.args[\"foo\"]); // true  (string)\n        Debug.Log(message.args[\"bar\"]); // false (string)\n        Debug.Log(message.args[\"num\"]); // 1     (string)\n    }\n\n    void OnEvalJavaScriptFinished(UniWebView webView, string result) {\n        Debug.Log(\"js result: \" + result);\n    //  tipTextMesh.text = \"<color=#000000>\" + result + \"</color>\";\n    }\n\n    UniWebViewEdgeInsets InsetsForScreenOreitation(UniWebView webView, UniWebViewOrientation orientation) {\n        /*\n        int bottomInset = (int)(UniWebViewHelper.screenHeight * 0.1f);\n\n        if (orientation == UniWebViewOrientation.Portrait) {\n            return new UniWebViewEdgeInsets(5,5,bottomInset,5);\n        } else {\n            return new UniWebViewEdgeInsets(5,5,bottomInset,5);\n        }\n        */\n        return new UniWebViewEdgeInsets(0, 0, 0, 0);\n    }\n\n    // Update is called once per frame\n    void Update () {\n\n    }\n}\n\n\nCall from html.\n<a href=\"uniwebview://command?foo=bar\">button</a>\n\nCall from javascript.\nlocation.href = \"uniwebview://command?foo=bar\";\n\n\n* http://uniwebview.onevcat.com/manual.html\n* http://every-studio.com/wordpress/2015/04/01/unity5%E3%81%A7webview%E3%82%92%E4%BD%BF%E3%81%86%EF%BC%81/\n* https://twitter.com/onevcat/status/532176093822722048\n\n```csharp\n\nusing UnityEngine;\nusing System.Collections;\n\npublic class Main : MonoBehaviour {\n\n\tprivate UniWebView _webView;\n\tprivate string _errorMessage;\n\n\t// Use this for initialization\n\tvoid Start () {\n\t\tDebug.Log (this._errorMessage);\n\n\t\t_webView = GetComponent<UniWebView>();\n\t\tif (_webView == null) {\n\n\t\t\t//\tUser agent masquerade.\n\t\t\tUniWebView.SetUserAgent (\"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.4 (KHTML, like Gecko) Version/8.0 Mobile/12A365 Safari/600.1.4\");\n\n\t\t\t_webView = gameObject.AddComponent<UniWebView>();\n\t\t\t_webView.OnReceivedMessage += OnReceivedMessage;\n\t\t\t_webView.OnLoadComplete += OnLoadComplete;\n\t\t\t_webView.OnWebViewShouldClose += OnWebViewShouldClose;\n\t\t\t_webView.OnEvalJavaScriptFinished += OnEvalJavaScriptFinished;\n\t\t\t_webView.InsetsForScreenOreitation += InsetsForScreenOreitation;\n\t\t}\n\t\t_webView.url = \"http://uqunie.com/useragent/\";\n\t\t_webView.Load();\n\t\t_webView.Show ();\n\t\t_errorMessage = null;\n\t}\n\n\tvoid OnLoadComplete(UniWebView webView, bool success, string errorMessage) {\n\t\tif (success) {\n\t\t\twebView.Show();\n\t\t} else {\n\t\t\tDebug.Log(\"Something wrong in webview loading: \" + errorMessage);\n\t\t\t_errorMessage = errorMessage;\n\t\t}\n\t}\n\n\tbool OnWebViewShouldClose(UniWebView webView) {\n\t\tif (webView == _webView) {\n\t\t\t_webView = null;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tvoid OnReceivedMessage(UniWebView webView, UniWebViewMessage message) {\n\t\t/**\n\t\t * From WebView's message.\n\t\t * \n\t\t * Ex:\n\t\t * uniwebview://command?foo=true&bar=false&num=1\n\t\t */\n\t\tDebug.Log(message.rawMessage);\n\t\tDebug.Log(message.path); // command\n\t\tDebug.Log(message.args[\"foo\"]); // true  (string)\n\t\tDebug.Log(message.args[\"bar\"]); // false (string)\n\t\tDebug.Log(message.args[\"num\"]); // 1     (string)\n\t}\n\n\tvoid OnEvalJavaScriptFinished(UniWebView webView, string result) {\n\t\tDebug.Log(\"js result: \" + result);\n\t//\ttipTextMesh.text = \"<color=#000000>\" + result + \"</color>\";\n\t}\n\n\tUniWebViewEdgeInsets InsetsForScreenOreitation(UniWebView webView, UniWebViewOrientation orientation) {\n\t\t/*\n\t\tint bottomInset = (int)(UniWebViewHelper.screenHeight * 0.1f);\n\n\t\tif (orientation == UniWebViewOrientation.Portrait) {\n\t\t\treturn new UniWebViewEdgeInsets(5,5,bottomInset,5);\n\t\t} else {\n\t\t\treturn new UniWebViewEdgeInsets(5,5,bottomInset,5);\n\t\t}\n\t\t*/\n\t\treturn new UniWebViewEdgeInsets(0, 0, 0, 0);\n\t}\n\n\t// Update is called once per frame\n\tvoid Update () {\n\t\n\t}\n}\n\n```\n\nCall from html.\n\n```html\n<a href=\"uniwebview://command?foo=bar\">button</a>\n```\n\nCall from javascript.\n\n```js\nlocation.href = \"uniwebview://command?foo=bar\";\n```\n", "tags": ["Unity", "webView", "uniwebview", "userAgent"]}