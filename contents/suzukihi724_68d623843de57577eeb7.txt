{"context": "\u53c2\u8003\u30b5\u30a4\u30c8\nhttp://qiita.com/soushiy/items/f4d2d91d7ac79669e0dd\nhttp://jubat.us/ja/tutorial_distributed.html\nhttp://www.atmarkit.co.jp/ait/articles/1206/22/news142_3.html\nhttps://zookeeper.apache.org/\n\nzookeeper\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\uff08\u5197\u9577\u5316\u30e2\u30fc\u30c9\uff09\n\n\u4e8b\u524d\u6e96\u5099\nAWS\u3067CentOS7\u306eAMI\u3067\u30af\u30e9\u30b9\u30bf\u3092\uff13\u53f0\u8d77\u52d5\u3002\n\u203bCentOS7\u306fAmazonMarketplace\u304b\u3089\nsudo su\nyum -y update\nyum -y install java-1.8.0-openjdk-devel\nyum -y install wget\nmkdir /usr/local/downloadcd /usr/local/download\n\n\nzookeeper\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nwget http://ftp.kddilabs.jp/infosystems/apache/zookeeper/zookeeper-3.4.8/zookeeper-3.4.8.tar.gz\ntar xvf  zookeeper-3.4.8.tar.gz \nmv -f /usr/local/download/zookeeper-3.4.8 /usr/local/download/zookeeper;\ncp -r -f /usr/local/download/zookeeper /usr/local/;\nrm -r -f /usr/local/download/zookeeper;\n\n\n\u30d1\u30b9\u306e\u8a2d\u5b9a\necho \"export PATH=\\$PATH:/usr/local/zookeeper/bin\" >> /etc/profile;\nexport PATH=$PATH:/usr/local/zookeeper/bin\n\n\nzookeeper\u306econfig\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\ncd /usr/local/zookeeper/conf/\ncp -p zoo_sample.cfg zoo.cfg\nsed -i -e 's/^dataDir/#dataDir/g' /usr/local/zookeeper/conf/zoo.cfg;\nsed -i -e '/^#dataDir/a dataDir=\\/usr\\/local\\/zookeeper\\/data' /usr/local/zookeeper/conf/zoo.cfg;\nsed -i -e 's/^clientPort/#clientPort/g'\nsed -i -e 's/^clientPort/#clientPort/g' /usr/local/zookeeper/conf/zoo.cfg;\nsed -i -e '/^#clientPort/a clientPort=2181' /usr/local/zookeeper/conf/zoo.cfg;\n\nvi /usr/local/zookeeper/conf/zoo.cfg\n==============\n# The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial\n# synchronization phase can take\ninitLimit=10\n# The number of ticks that can pass between\n# sending a request and getting an acknowledgement\nsyncLimit=5\n# the directory where the snapshot is stored.\n# do not use /tmp for storage, /tmp here is just\n# example sakes.\n#dataDir=/tmp/zookeeper\ndataDir=/usr/local/zookeeper/data\n# the port at which the clients will connect\n#clientPort=2181\nclientPort=2181\n# the maximum number of client connections.\n# increase this if you need to handle more clients\n#maxClientCnxns=60\n#\n# Be sure to read the maintenance section of the\n# administrator guide before turning on autopurge.\n#\n# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance\n#\n# The number of snapshots to retain in dataDir\n#autopurge.snapRetainCount=3\n# Purge task interval in hours\n# Set to \"0\" to disable auto purge feature\n#autopurge.purgeInterval=1\nserver.1=192.168.0.10:2888:3888\nserver.2=192.168.0.11:2888:3888\nserver.3=192.168.0.12:2888:3888\n==============\n\nvi /usr/local/zookeeper/data/myid \n==============\n1\n==============\n\n\u2191zoo.cfg\u306eserver.X\u306eX\u3092\u30af\u30e9\u30b9\u30bf\u6bce\u306b\u8a18\u8f09\n\n\u30ed\u30b0\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63\ncd /usr/local/zookeeper/\ncp log4j.properties log4j.properties.bak# zookeeper.root.logger=INFO, CONSOLE\n\nsed -i -e 's/^zookeeper\\.root\\.logger/#zookeeper\\.root\\.logger/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.root\\.logger/a zookeeper\\.root\\.logger=INFO, CONSOLE' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.console.threshold=INFO\nsed -i -e 's/^zookeeper\\.console\\.threshold/#zookeeper\\.console\\.threshold/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.console\\.threshold/a zookeeper\\.console\\.threshold=INFO' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.log.dir=/usr/local/zookeeper/log/\nsed -i -e 's/^zookeeper\\.log\\.dir/#zookeeper\\.log\\.dir/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.log\\.dir/a zookeeper\\.log\\.dir=\\/usr\\/local\\/zookeeper\\/log\\/' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.log.file=zookeeper.log\nsed -i -e 's/^zookeeper\\.log\\.file/#zookeeper\\.log\\.file/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.log\\.file/a zookeeper\\.log\\.file=zookeeper.log' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.log.threshold=DEBUG\nsed -i -e 's/^zookeeper\\.log\\.threshold/#zookeeper\\.log\\.threshold/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.log\\.threshold/a zookeeper\\.log\\.threshold=DEBUG' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.tracelog.dir=/usr/local/zookeeper/log/\nsed -i -e 's/^zookeeper\\.tracelog\\.dir/#zookeeper\\.tracelog\\.dir/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.tracelog\\.dir/a zookeeper\\.tracelog\\.dir=\\/usr\\/local\\/zookeeper\\/log\\/' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.tracelog.file=zookeeper_trace.log\nsed -i -e 's/^zookeeper\\.tracelog\\.file/#zookeeper\\.tracelog\\.file/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.tracelog\\.file/a zookeeper\\.tracelog\\.file=zookeeper_trace.log' /usr/local/zookeeper/conf/log4j.properties;\n# DEFAULT: console appender only#log4j.rootLogger=${zookeeper.root.logger}\nsed -i -e 's/^log4j\\.rootLogger/#log4j\\.rootLogger/g' /usr/local/zookeeper/conf/log4j.properties;\n# Rolling log file\nsed -i -e 's/^#log4j\\.rootLogger=DEBUG, CONSOLE, ROLLINGFILE/log4j\\.rootLogger=DEBUG, CONSOLE, ROLLINGFILE/' /usr/local/zookeeper/conf/log4j.properties;\n\n\n\u30c7\u30fc\u30bf\uff06\u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\nmkdir /usr/local/zookeeper/data/\nmkdir /usr/local/zookeeper/log/\n\n\nzookeeper\u8d77\u52d5\nbin/zkServer.sh start\n\n\n\u52d5\u4f5c\u78ba\u8a8d\nyum -y install nc\necho ruok | nc localhost 2181\n\n\u203bimok\u3068\u3044\u3046\u5fdc\u7b54\u304c\u3042\u308c\u3070\u6b63\u5e38\u8d77\u52d5\n\n\u30af\u30e9\u30b9\u30bf\u9593\u306e\u540c\u671f\u306e\u78ba\u8a8d\nbin/zkCli.sh -server localhost:2181\ncreate /test dummy\nls /\n\n\u203b\u4ed6\u306e\u30af\u30e9\u30b9\u30bf\u3067test\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308c\u3070\u540c\u671f\u3055\u308c\u3066\u3044\u308b\n\u53c2\u8003\u30b5\u30a4\u30c8\nhttp://qiita.com/soushiy/items/f4d2d91d7ac79669e0dd\nhttp://jubat.us/ja/tutorial_distributed.html\nhttp://www.atmarkit.co.jp/ait/articles/1206/22/news142_3.html\nhttps://zookeeper.apache.org/\n\n## zookeeper\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\uff08\u5197\u9577\u5316\u30e2\u30fc\u30c9\uff09\n#\u4e8b\u524d\u6e96\u5099\nAWS\u3067CentOS7\u306eAMI\u3067\u30af\u30e9\u30b9\u30bf\u3092\uff13\u53f0\u8d77\u52d5\u3002\n\u203bCentOS7\u306fAmazonMarketplace\u304b\u3089\n\n```\nsudo su\nyum -y update\nyum -y install java-1.8.0-openjdk-devel\nyum -y install wget\nmkdir /usr/local/downloadcd /usr/local/download\n```\n\n#zookeeper\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\uff06\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n```\nwget http://ftp.kddilabs.jp/infosystems/apache/zookeeper/zookeeper-3.4.8/zookeeper-3.4.8.tar.gz\ntar xvf  zookeeper-3.4.8.tar.gz \nmv -f /usr/local/download/zookeeper-3.4.8 /usr/local/download/zookeeper;\ncp -r -f /usr/local/download/zookeeper /usr/local/;\nrm -r -f /usr/local/download/zookeeper;\n```\n\n#\u30d1\u30b9\u306e\u8a2d\u5b9a\n```\necho \"export PATH=\\$PATH:/usr/local/zookeeper/bin\" >> /etc/profile;\nexport PATH=$PATH:/usr/local/zookeeper/bin\n```\n\n#zookeeper\u306econfig\u30d5\u30a1\u30a4\u30eb\u8a2d\u5b9a\n```\ncd /usr/local/zookeeper/conf/\ncp -p zoo_sample.cfg zoo.cfg\nsed -i -e 's/^dataDir/#dataDir/g' /usr/local/zookeeper/conf/zoo.cfg;\nsed -i -e '/^#dataDir/a dataDir=\\/usr\\/local\\/zookeeper\\/data' /usr/local/zookeeper/conf/zoo.cfg;\nsed -i -e 's/^clientPort/#clientPort/g'\nsed -i -e 's/^clientPort/#clientPort/g' /usr/local/zookeeper/conf/zoo.cfg;\nsed -i -e '/^#clientPort/a clientPort=2181' /usr/local/zookeeper/conf/zoo.cfg;\n```\n\n```\nvi /usr/local/zookeeper/conf/zoo.cfg\n==============\n# The number of milliseconds of each tick\ntickTime=2000\n# The number of ticks that the initial\n# synchronization phase can take\ninitLimit=10\n# The number of ticks that can pass between\n# sending a request and getting an acknowledgement\nsyncLimit=5\n# the directory where the snapshot is stored.\n# do not use /tmp for storage, /tmp here is just\n# example sakes.\n#dataDir=/tmp/zookeeper\ndataDir=/usr/local/zookeeper/data\n# the port at which the clients will connect\n#clientPort=2181\nclientPort=2181\n# the maximum number of client connections.\n# increase this if you need to handle more clients\n#maxClientCnxns=60\n#\n# Be sure to read the maintenance section of the\n# administrator guide before turning on autopurge.\n#\n# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance\n#\n# The number of snapshots to retain in dataDir\n#autopurge.snapRetainCount=3\n# Purge task interval in hours\n# Set to \"0\" to disable auto purge feature\n#autopurge.purgeInterval=1\nserver.1=192.168.0.10:2888:3888\nserver.2=192.168.0.11:2888:3888\nserver.3=192.168.0.12:2888:3888\n==============\n```\n\n```\nvi /usr/local/zookeeper/data/myid \n==============\n1\n==============\n```\n\u2191zoo.cfg\u306eserver.X\u306eX\u3092\u30af\u30e9\u30b9\u30bf\u6bce\u306b\u8a18\u8f09\n\n#\u30ed\u30b0\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u4fee\u6b63\n```\ncd /usr/local/zookeeper/\ncp log4j.properties log4j.properties.bak# zookeeper.root.logger=INFO, CONSOLE\n\nsed -i -e 's/^zookeeper\\.root\\.logger/#zookeeper\\.root\\.logger/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.root\\.logger/a zookeeper\\.root\\.logger=INFO, CONSOLE' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.console.threshold=INFO\nsed -i -e 's/^zookeeper\\.console\\.threshold/#zookeeper\\.console\\.threshold/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.console\\.threshold/a zookeeper\\.console\\.threshold=INFO' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.log.dir=/usr/local/zookeeper/log/\nsed -i -e 's/^zookeeper\\.log\\.dir/#zookeeper\\.log\\.dir/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.log\\.dir/a zookeeper\\.log\\.dir=\\/usr\\/local\\/zookeeper\\/log\\/' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.log.file=zookeeper.log\nsed -i -e 's/^zookeeper\\.log\\.file/#zookeeper\\.log\\.file/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.log\\.file/a zookeeper\\.log\\.file=zookeeper.log' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.log.threshold=DEBUG\nsed -i -e 's/^zookeeper\\.log\\.threshold/#zookeeper\\.log\\.threshold/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.log\\.threshold/a zookeeper\\.log\\.threshold=DEBUG' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.tracelog.dir=/usr/local/zookeeper/log/\nsed -i -e 's/^zookeeper\\.tracelog\\.dir/#zookeeper\\.tracelog\\.dir/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.tracelog\\.dir/a zookeeper\\.tracelog\\.dir=\\/usr\\/local\\/zookeeper\\/log\\/' /usr/local/zookeeper/conf/log4j.properties;\n# zookeeper.tracelog.file=zookeeper_trace.log\nsed -i -e 's/^zookeeper\\.tracelog\\.file/#zookeeper\\.tracelog\\.file/g' /usr/local/zookeeper/conf/log4j.properties;\nsed -i -e '/^#zookeeper\\.tracelog\\.file/a zookeeper\\.tracelog\\.file=zookeeper_trace.log' /usr/local/zookeeper/conf/log4j.properties;\n# DEFAULT: console appender only#log4j.rootLogger=${zookeeper.root.logger}\nsed -i -e 's/^log4j\\.rootLogger/#log4j\\.rootLogger/g' /usr/local/zookeeper/conf/log4j.properties;\n# Rolling log file\nsed -i -e 's/^#log4j\\.rootLogger=DEBUG, CONSOLE, ROLLINGFILE/log4j\\.rootLogger=DEBUG, CONSOLE, ROLLINGFILE/' /usr/local/zookeeper/conf/log4j.properties;\n```\n\n#\u30c7\u30fc\u30bf\uff06\u30ed\u30b0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4f5c\u6210\n```\nmkdir /usr/local/zookeeper/data/\nmkdir /usr/local/zookeeper/log/\n```\n\n#zookeeper\u8d77\u52d5\n```\nbin/zkServer.sh start\n```\n\n#\u52d5\u4f5c\u78ba\u8a8d\n```\nyum -y install nc\necho ruok | nc localhost 2181\n```\n\u203bimok\u3068\u3044\u3046\u5fdc\u7b54\u304c\u3042\u308c\u3070\u6b63\u5e38\u8d77\u52d5\n\n#\u30af\u30e9\u30b9\u30bf\u9593\u306e\u540c\u671f\u306e\u78ba\u8a8d\n```\nbin/zkCli.sh -server localhost:2181\ncreate /test dummy\nls /\n```\n\u203b\u4ed6\u306e\u30af\u30e9\u30b9\u30bf\u3067test\u304c\u751f\u6210\u3055\u308c\u3066\u3044\u308c\u3070\u540c\u671f\u3055\u308c\u3066\u3044\u308b\n", "tags": ["ZooKeeper", "AWS"]}