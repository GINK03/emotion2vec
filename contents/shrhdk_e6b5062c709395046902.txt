{"context": " More than 1 year has passed since last update.Java\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3067\u975e\u540c\u671f\u51e6\u7406\u3092\u30c6\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u3001\nMockito\u306eVerificationWithTimeout\u3092\u4f7f\u3046\u3068\u7c21\u6f54\u306b\u30c6\u30b9\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n\u4f8b\u3068\u3057\u3066\u3001\u975e\u540c\u671f\u51e6\u7406Foo#request\u3068\u305d\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u793a\u3057\u307e\u3059\u3002\n\u3053\u306e\u30c6\u30b9\u30c8\u306fFoo#request\u306e\u4e2d\u3067Callback#onSuccess\u304c10\u79d2\u4ee5\u5185\u306b\u547c\u3070\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\ntimeout\u30e1\u30bd\u30c3\u30c9\u304c\u809d\u3067\u3059\u3002timeout\u306e\u5f15\u6570\u306b\u306f\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u5024\u3092\u30df\u30ea\u79d2\u5358\u4f4d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nFoo.java\npublic class Foo {\n    public static void request(Callback callback) {\n        new Thread() {\n            ...\n            callback.onSuccess();\n        }.start();\n    }\n}\n\n\n\nFooTest.java\nimport static org.mockito.Mockito.*;\n\npublic class FooTest {\n    @Test\n    public void test() {\n        Callback callbackMock = mock(Callback.class);\n        Foo.request(callbackMock);\n\n        verify(callbackMock, timeout(10000)).onSuccess();\n    }\n}\n\n\n\u66f4\u306b\u3001times\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\nFooTest.java\nimport static org.mockito.Mockito.*;\n\npublic class FooTest {\n    @Test\n    public void test() {\n        Callback callbackMock = mock(Callback.class);\n        Foo.request(callbackMock);\n\n        verify(callbackMock, timeout(10000).times(2)).onSuccess();\n    }\n}\n\n\nJava\u306e\u30e6\u30cb\u30c3\u30c8\u30c6\u30b9\u30c8\u3067\u975e\u540c\u671f\u51e6\u7406\u3092\u30c6\u30b9\u30c8\u3057\u305f\u3044\u5834\u5408\u3001\n[Mockito](https://github.com/mockito/mockito)\u306e[VerificationWithTimeout](http://docs.mockito.googlecode.com/hg/1.9.5/org/mockito/verification/VerificationWithTimeout.html)\u3092\u4f7f\u3046\u3068\u7c21\u6f54\u306b\u30c6\u30b9\u30c8\u3092\u8a18\u8ff0\u3067\u304d\u307e\u3059\u3002\n\n\u4f8b\u3068\u3057\u3066\u3001\u975e\u540c\u671f\u51e6\u7406`Foo#request`\u3068\u305d\u306e\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u3092\u793a\u3057\u307e\u3059\u3002\n\u3053\u306e\u30c6\u30b9\u30c8\u306f`Foo#request`\u306e\u4e2d\u3067`Callback#onSuccess`\u304c10\u79d2\u4ee5\u5185\u306b\u547c\u3070\u308c\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n`timeout`\u30e1\u30bd\u30c3\u30c9\u304c\u809d\u3067\u3059\u3002`timeout`\u306e\u5f15\u6570\u306b\u306f\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u5024\u3092\u30df\u30ea\u79d2\u5358\u4f4d\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```java:Foo.java\npublic class Foo {\n\tpublic static void request(Callback callback) {\n\t\tnew Thread() {\n\t\t\t...\n\t\t\tcallback.onSuccess();\n\t\t}.start();\n\t}\n}\n```\n\n```java:FooTest.java\nimport static org.mockito.Mockito.*;\n\npublic class FooTest {\n\t@Test\n\tpublic void test() {\n\t\tCallback callbackMock = mock(Callback.class);\n\t\tFoo.request(callbackMock);\n\n\t\tverify(callbackMock, timeout(10000)).onSuccess();\n\t}\n}\n```\n\n\u66f4\u306b\u3001`times`\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```java:FooTest.java\nimport static org.mockito.Mockito.*;\n\npublic class FooTest {\n\t@Test\n\tpublic void test() {\n\t\tCallback callbackMock = mock(Callback.class);\n\t\tFoo.request(callbackMock);\n\n\t\tverify(callbackMock, timeout(10000).times(2)).onSuccess();\n\t}\n}\n```\n", "tags": ["Java", "Mockito", "JUnit"]}