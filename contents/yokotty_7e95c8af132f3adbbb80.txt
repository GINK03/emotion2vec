{"context": " More than 1 year has passed since last update.\u3068\u308a\u3042\u3048\u305a\u3055\u308f\u3063\u3066\u307f\u305f\u306e\u3067\uff0c\u307e\u3068\u3081\u307e\u3059\uff0e\nUDF\u306f\u4fbf\u5229\u305d\u3046\u306a\u306e\u3067\uff0c\u3053\u308c\u304b\u3089\u7a4d\u6975\u7684\u306b\u6d3b\u7528\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\uff0e\n\nUDF\u306e\u4f5c\u6210\n\u8a18\u6cd5\u306a\u3069\u306e\u8a73\u7d30\u306f\u516c\u5f0f\u30b5\u30a4\u30c8\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\n\u3053\u306e\u8a18\u4e8b\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\uff0cURL\u306e\u30db\u30b9\u30c8\u540d\u3092\u53d6\u5f97\u3059\u308b\u95a2\u6570 f_hostname \u3092\u7a81\u3063\u8fbc\u3093\u3067\u307f\u307e\u3059\uff0e\nCREATE FUNCTION f_hostname(url VARCHAR)\nRETURNS varchar\nIMMUTABLE AS $$\nimport urlparse\nreturn urlparse.urlparse(url).hostname\n$$ LANGUAGE plpythonu;\n\n\u203b UDF \u306e\u95a2\u6570\u540d\u306f f_ \u304b\u3089\u59cb\u307e\u308b\u540d\u524d\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\n\u95a2\u6570\u5b9f\u884c\nhoge=> SELECT f_hostname('http://qiita.com/yokotty/items/7e95c8af132f3adbbb80');\n f_hostname\n------------\n qiita.com\n(1 row)\n\n\n\u4f5c\u6210\u3057\u305fUDF\u4e00\u89a7\u306e\u53c2\u7167\nSELECT proname FROM pg_proc WHERE proname LIKE 'f$_%' ESCAPE '$';\n\n\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\n\nUDF\u306e\u524a\u9664\nDROP FUNCTION f_hostname(varchar);\n\n\u5f15\u6570\u306e\u578b\u307e\u3067\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff0e\n\n\u53c2\u7167URL\n\n\u3010AWS\u767a\u8868\u3011Amazon Redshift\u306bUDF(\u30e6\u30fc\u30b6\u5b9a\u7fa9\u95a2\u6570)\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f - Amazon Web Services \u30d6\u30ed\u30b0\n\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u95a2\u6570\u306e\u4f5c\u6210 - Amazon Redshift \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u958b\u767a\u8005\u30ac\u30a4\u30c9\nAmazon Redshift: \u767b\u9332\u6e08\u307fUDF\u306e\u4e00\u89a7\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b - \u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u682a\u5f0f\u4f1a\u793e\u30d6\u30ed\u30b0\n\n\u3068\u308a\u3042\u3048\u305a\u3055\u308f\u3063\u3066\u307f\u305f\u306e\u3067\uff0c\u307e\u3068\u3081\u307e\u3059\uff0e\nUDF\u306f\u4fbf\u5229\u305d\u3046\u306a\u306e\u3067\uff0c\u3053\u308c\u304b\u3089\u7a4d\u6975\u7684\u306b\u6d3b\u7528\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\uff0e\n## UDF\u306e\u4f5c\u6210\n\u8a18\u6cd5\u306a\u3069\u306e\u8a73\u7d30\u306f[\u516c\u5f0f\u30b5\u30a4\u30c8](http://docs.aws.amazon.com/ja_jp/redshift/latest/dg/user-defined-functions.html)\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff0e\n[\u3053\u306e\u8a18\u4e8b](http://aws.typepad.com/aws_japan/2015/09/amazon-redshift-udf.html)\u3067\u7d39\u4ecb\u3055\u308c\u3066\u3044\u308b\uff0cURL\u306e\u30db\u30b9\u30c8\u540d\u3092\u53d6\u5f97\u3059\u308b\u95a2\u6570 f_hostname \u3092\u7a81\u3063\u8fbc\u3093\u3067\u307f\u307e\u3059\uff0e\n\n```\nCREATE FUNCTION f_hostname(url VARCHAR)\nRETURNS varchar\nIMMUTABLE AS $$\nimport urlparse\nreturn urlparse.urlparse(url).hostname\n$$ LANGUAGE plpythonu;\n```\n\n\u203b UDF \u306e\u95a2\u6570\u540d\u306f f_ \u304b\u3089\u59cb\u307e\u308b\u540d\u524d\u304c\u63a8\u5968\u3055\u308c\u3066\u3044\u307e\u3059\uff0e\n\n## \u95a2\u6570\u5b9f\u884c\n\n```\nhoge=> SELECT f_hostname('http://qiita.com/yokotty/items/7e95c8af132f3adbbb80');\n f_hostname\n------------\n qiita.com\n(1 row)\n```\n\n## \u4f5c\u6210\u3057\u305fUDF\u4e00\u89a7\u306e\u53c2\u7167\n```\nSELECT proname FROM pg_proc WHERE proname LIKE 'f$_%' ESCAPE '$';\n```\n\n\u3067\u53c2\u7167\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\uff0e\n\n## UDF\u306e\u524a\u9664\n\n```\nDROP FUNCTION f_hostname(varchar);\n```\n\n\u5f15\u6570\u306e\u578b\u307e\u3067\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff0e\n\n\n\n## \u53c2\u7167URL\n- [\u3010AWS\u767a\u8868\u3011Amazon Redshift\u306bUDF(\u30e6\u30fc\u30b6\u5b9a\u7fa9\u95a2\u6570)\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f - Amazon Web Services \u30d6\u30ed\u30b0]\n(http://aws.typepad.com/aws_japan/2015/09/amazon-redshift-udf.html)\n\n- [\u30e6\u30fc\u30b6\u30fc\u5b9a\u7fa9\u95a2\u6570\u306e\u4f5c\u6210 - Amazon Redshift \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u958b\u767a\u8005\u30ac\u30a4\u30c9](http://docs.aws.amazon.com/ja_jp/redshift/latest/dg/user-defined-functions.html)\n\n- [Amazon Redshift: \u767b\u9332\u6e08\u307fUDF\u306e\u4e00\u89a7\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b - \u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u682a\u5f0f\u4f1a\u793e\u30d6\u30ed\u30b0](http://dev.classmethod.jp/cloud/aws/amazon-redshift-how-to-get-a-list-of-udfs/)\n", "tags": ["PostgreSQL", "redshift", "AWS"]}