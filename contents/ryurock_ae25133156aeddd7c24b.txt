{"context": " More than 1 year has passed since last update.\u74b0\u5883 centos6.3\uff08\u30b2\u30b9\u30c8OS\uff09macosx10.8(\u30db\u30b9\u30c8OS)\n\nruby1.9.1\u4ee5\u4e0agem1.8.1\u4ee5\u4e0a\u304c\u5165\u3063\u3066\u308b\u524d\u63d0\u3068\u3059\u308b\nhttpd(apache)\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u3068\u3059\u308b\n\n\nfluentd\u3068\u306f\n\u30ed\u30b0\u306a\u3069\u3092json\u5316\u3067\u304d\u308b\u3082\u306e\u3067\u65e5\u672c\u4eba\u306e\u53e4\u6a4b\u3055\u3093\u304c\u958b\u767a\u3057\u305f\u3082\u306e\u3067\u3059\u3002\nhttp://d.hatena.ne.jp/viver/20110929/p1\n\u6709\u540d\u4f01\u696d\u3067\u3082\u5c0e\u5165\u304c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nslideshare\nGREE \u7b49\n\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nhttp://docs.fluentd.org/articles/quickstart\n\u65e5\u672c\u8a9e\u7248\uff08\u975e\u516c\u5f0f??\uff09\nhttp://documents.mazgi.com/fluentd/doc/index.html\n\u958b\u767a\u3067\u3088\u304f\u3042\u308b\u300c\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092\u89e3\u6790\u3057\u3066\u304f\u308c\u30fc\u30fc\u30fc\u300d\u3063\u3066\u6642\u306b\njson\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5316\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e\u7cbe\u67fb\u304c\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229\u305d\u3046\u3067\u3059\u3002\n\uff08\u307e\u3060\u4f7f\u3044\u59cb\u3081\u306a\u306e\u3067\u3088\u304f\u308f\u304b\u3089\u3093\u304c\u3002\u3002\u3002\u3002\uff09\n\ngem\u306eupdate\u3092\u3059\u308b\n\u4e00\u756a\u306f\u3058\u3081\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u901a\u308a\u3084\u308d\u3046\u3068\u601d\u3063\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u3070\u3057\u60a9\u3093\u3060\u3002\u3002\u3002\ngem install fluentd --no-ri --no-rdoc\n\nWARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/latest_specs.4.8.gz)\nERROR:  Could not find a valid gem 'fluentd' (>= 0) in any repository\nERROR:  Possible alternatives: fluentd\n\n\n\u60a9\u3080\u3053\u3068\uff11\u6642\u9593\u307e\u305a\u306fupdate\u304b\u3068\u6c17\u3065\u304f\n\u306a\u3093\u304b\u306e\u4f9d\u5b58\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u5f15\u3063\u639b\u304b\u3093\u3060\u3068\u601d\u3046\u3002\ngem update\n\nUpdating installed gems\nWARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/latest_specs.4.8.gz)\nUpdating io-console\nWARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/specs.4.8.gz)\nFetching: io-console-0.4.1.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed io-console-0.4.1\nUpdating minitest\nFetching: minitest-4.5.0.gem (100%)\nSuccessfully installed minitest-4.5.0\nUpdating rake\nFetching: rake-10.0.3.gem (100%)\nSuccessfully installed rake-10.0.3\nUpdating rdoc\nFetching: rdoc-3.12.1.gem (100%)\nDepending on your version of ruby, you may need to install ruby rdoc/ri data:\n\n<= 1.8.6 : unsupported\n = 1.8.7 : gem install rdoc-data; rdoc-data --install\n = 1.9.1 : gem install rdoc-data; rdoc-data --install\n>= 1.9.2 : nothing to do! Yay!\nSuccessfully installed rdoc-3.12.1\nGems updated: io-console, minitest, rake, rdoc\nInstalling ri documentation for io-console-0.4.1...\nInstalling ri documentation for minitest-4.5.0...\nInstalling ri documentation for rake-10.0.3...\nInstalling ri documentation for rdoc-3.12.1...\nInstalling RDoc documentation for io-console-0.4.1...\nInstalling RDoc documentation for minitest-4.5.0...\nInstalling RDoc documentation for rake-10.0.3...\nInstalling RDoc documentation for rdoc-3.12.1...\n\n\n\n\u3082\u3046\u4e00\u5ea6\u30ea\u30c8\u30e9\u30a4\ngem install fluentd\n\nFetching: msgpack-0.4.7.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: iobuffer-1.1.2.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: cool.io-1.1.0.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: http_parser.rb-0.5.3.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: fluentd-0.10.31.gem (100%)\nSuccessfully installed msgpack-0.4.7\nSuccessfully installed iobuffer-1.1.2\nSuccessfully installed cool.io-1.1.0\nSuccessfully installed http_parser.rb-0.5.3\nSuccessfully installed fluentd-0.10.31\n5 gems installed\nInstalling ri documentation for msgpack-0.4.7...\nInstalling ri documentation for iobuffer-1.1.2...\nInstalling ri documentation for cool.io-1.1.0...\nInstalling ri documentation for http_parser.rb-0.5.3...\nInstalling ri documentation for fluentd-0.10.31...\nInstalling RDoc documentation for msgpack-0.4.7...\nInstalling RDoc documentation for iobuffer-1.1.2...\nInstalling RDoc documentation for cool.io-1.1.0...\nInstalling RDoc documentation for http_parser.rb-0.5.3...\nInstalling RDoc documentation for fluentd-0.10.31... #\u5165\u3063\u305f\n\n\n\u203b\u30b3\u30de\u30f3\u30c9\u3067\u6700\u521dfluentd\u304c\u898b\u3064\u304b\u3089\u306a\u304f\u3066\u56f0\u3063\u305f\u304c\u4e00\u65e6virtualbox\u304b\u3089exit\u3067\u629c\u3051\u3066\u5165\u308a\u306a\u304a\u3057\u305f\u3089\u5165\u3063\u3066\u3044\u305f\u3002\n\u591a\u5206PATH\u306e\u8a2d\u5b9a\u304crbenv\u3060\u3068\u4e00\u65e6\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u629c\u3051\u306a\u3044\u3068\u30c0\u30e1\u3063\u307d\u3044\u3002\u3002\n\uff08\u3068\u3044\u3046\u304binit\u306e\u51e6\u7406\u304c\u5fc5\u8981\u3060\u3063\u305f\u307f\u305f\u3044\uff09\n\nfluentd\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\u307e\u3042/etc/\u4ee5\u4e0b\u306b\u3042\u308c\u3070\u3044\u3044\u3060\u308d\u3046\u3068\u3044\u3046\u3053\u3068\u3067\nfluentd --setup /etc/fluent\n\ninstalled ./fluent/fluent.conf.\n\n\n\u52d5\u4f5c\u691c\u8a3c\n\u3053\u308c\u3082\u30de\u30cb\u30e5\u30a2\u30eb\u3069\u304a\u308a\u306b\u3084\u3063\u3066\u307f\u308b\nfluentd -c /etc/fluent/fluent.conf -vv &\n\n[1] 4075\n[root@localhost fluent]# 2013-02-15 11:45:51 +0900: fluent/supervisor.rb:153:supervise: starting fluentd-0.10.31\n2013-02-15 11:45:51 +0900: fluent/supervisor.rb:235:read_config: reading config file path=\"fluent.conf\"\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'file'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'memory'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'debug_agent'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'exec'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'forward'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'gc_stat'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'http'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'object_space'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'status'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tcp'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'unix'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'syslog'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tail'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'copy'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec_filter'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'file'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'forward'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'null'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'roundrobin'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'stdout'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'tcp'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'unix'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'test'\n2013-02-15 11:45:51 +0900: fluent/engine.rb:61:configure: using configuration file: <ROOT>\n  <source>\n    type forward\n  </source>\n  <source>\n    type http\n    port 8888\n  </source>\n  <source>\n    type debug_agent\n    port 24230\n  </source>\n  <match debug.**>\n    type stdout\n  </match>\n</ROOT>\n2013-02-15 11:45:51 +0900: fluent/engine.rb:70:block in configure: adding source type=\"forward\"\n2013-02-15 11:45:51 +0900: fluent/engine.rb:70:block in configure: adding source type=\"http\"\n2013-02-15 11:45:51 +0900: fluent/engine.rb:70:block in configure: adding source type=\"debug_agent\"\n2013-02-15 11:45:51 +0900: fluent/engine.rb:86:block in configure: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-02-15 11:45:51 +0900: plugin/in_forward.rb:63:listen: listening fluent socket on 0.0.0.0:24224\n2013-02-15 11:45:51 +0900: plugin/in_http.rb:74:start: listening http on 0.0.0.0:8888\n2013-02-15 11:45:51 +0900: plugin/in_debug_agent.rb:46:start: listening dRuby uri=\"druby://0.0.0.0:24230\" object=\"Engine\"\n\n\n\u5b9f\u969b\u3084\u3063\u3066\u307f\u308b\necho '{\"json\":\"message\"}' | fluent-cat debug.test\n\n2013-02-15 11:46:08 +0900: plugin/in_forward.rb:147:initialize: accepted fluent socket object_id=14395860\n2013-02-15 11:46:08 +0900 debug.test: {\"json\":\"message\"}\n2013-02-15 11:46:08 +0900: plugin/in_forward.rb:188:on_close: closed fluent socket object_id=14395860\n\n\n\u52d5\u3044\u3066\u308b\n\nfluentd\u306e\u8d77\u52d5\u3068\u505c\u6b62\u65b9\u6cd5\n\n\u8d77\u52d5\nfluentd -c fluent.conf\u306e\u30d1\u30b9 -vv &\n\n\n\u505c\u6b62\n#\u30c7\u30d5\u30a9\u30eb\u30c8\u306f24224\u3063\u307d\u3044\n/usr/sbin/lsof | grep 24224\n\nfluentd   6428      root    6u     IPv4              44926      0t0        TCP *:24224 (LISTEN)\nfluentd   6428      root    7u     IPv4              44928      0t0        UDP *:24224 \n\n\u30d7\u30ed\u30bb\u30b9\u304c\u751f\u304d\u3066\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\npkill fluentd\n\n\n\u6bba\u3059\uff01\uff01\n\u203b\u4e00\u90e8\u306e\u30d6\u30ed\u30b0\u3067\u4e0b\u8a18\u306e\u65b9\u6cd5\u3067\u505c\u6b62\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u305f\u307e\u306b\u30d7\u30ed\u30bb\u30b9\u304c\u91cd\u8907\u8d77\u52d5\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u304c\u6bba\u3057\u304d\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n#\u307e\u305a\u306fjob\u306e\u78ba\u8a8d\njobs -l\n[1]+  4075 Running                 fluentd -c fluent.conf -vv &\n\n\n#\u305d\u3057\u3066kill\nkill 4075\n# 2013-02-15 12:09:17 +0900: fluent/engine.rb:167:stop: shutting down fluentd\n2013-02-15 12:09:18 +0900: fluent/supervisor.rb:170:supervise: process finished code=0\n\n[1]+  Done                    fluentd -c fluent.conf -vv\n\n\n\napache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092json\u3067\u51fa\u529b\u3059\u308b\n\n/etc/fluent/fluent.conf\nvim /etc/fluent/fluent.conf\n\n#\u4fee\u6b63\u524d\n#<source>\n#  type tail\n#  format apache\n#  path /var/log/httpd/access_log\n#  tag apache.access\n#</source>\n\n\n#\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3057\u3066path\u306e\u90e8\u5206\u3092\u5909\u66f4\u3059\u308b\n#\u4fee\u6b63\u5f8c\n<source>\n  type tail\n  format apache\n  path /var/log/httpd/access_log\n  tag apache.access\n</source>\n\n# \u4fee\u6b63\u524d\n#<match apache.access>\n#  type file\n#  path /var/log/fluent/access\n#</match>\n\n#\u4fee\u6b63\u5f8c\n<match apache.access>\n  type file\n  path /var/log/fluent/access\n</match>\n\n\n\nfluentd\u306e\u518d\u8d77\u52d5\n\u518d\u8d77\u52d5\u3057\u306a\u3044\u3068\u8aad\u307f\u8fbc\u307e\u306a\u304b\u3063\u305f\u306e\u3067\n\n\u505c\u6b62\npkill fluentd\n\n\n\u518d\u8d77\u52d5\nfluentd -c /etc/fluent/fluent.conf -vv &\n\n\n[1] 4171\n[root@localhost fluent]# 2013-02-15 12:21:53 +0900: fluent/supervisor.rb:153:supervise: starting fluentd-0.10.31\n2013-02-15 12:21:53 +0900: fluent/supervisor.rb:235:read_config: reading config file path=\"/etc/fluent/fluent.conf\"\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'file'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'memory'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'debug_agent'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'exec'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'forward'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'gc_stat'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'http'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'object_space'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'status'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tcp'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'unix'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'syslog'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tail'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'copy'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec_filter'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'file'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'forward'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'null'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'roundrobin'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'stdout'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'tcp'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'unix'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'test'\n2013-02-15 12:21:53 +0900: fluent/engine.rb:61:configure: using configuration file: <ROOT>\n  <source>\n    type forward\n  </source>\n  <source>\n    type http\n    port 8888\n  </source>\n  <source>\n    type tail\n    format apache\n    path /var/log/httpd/access_log\n    tag apache.access\n  </source>\n  <source>\n    type debug_agent\n    port 24230\n  </source>\n  <match apache.access>\n    type file\n    path /var/log/fluent/access\n  </match>\n  <match debug.**>\n    type stdout\n  </match>\n</ROOT>\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"forward\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"http\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"tail\"\n2013-02-15 12:21:53 +0900: plugin/in_tail.rb:49:configure: 'pos_file PATH' parameter is not set to a 'tail' source.\n2013-02-15 12:21:53 +0900: plugin/in_tail.rb:50:configure: this parameter is highly recommended to save the position to resume tailing.\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"debug_agent\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:86:block in configure: adding match pattern=\"apache.access\" type=\"file\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:86:block in configure: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-02-15 12:21:53 +0900: plugin/in_forward.rb:63:listen: listening fluent socket on 0.0.0.0:24224\n2013-02-15 12:21:53 +0900: plugin/in_http.rb:74:start: listening http on 0.0.0.0:8888\n2013-02-15 12:21:53 +0900: plugin/in_tail.rb:289:initialize: following tail of /var/log/httpd/access_log\n2013-02-15 12:21:53 +0900: plugin/in_debug_agent.rb:46:start: listening dRuby uri=\"druby://0.0.0.0:24230\" object=\"Engine\"\n\n\n\n\u30a8\u30e9\u30fc\u3068\u304b\u304c\u3067\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\n\u51fa\u529b\u5185\u5bb9\u306e\u78ba\u8a8d\n\u5834\u6240\u306f/var/log/fluent/httpd/access.\u65e5\u4ed8.\u30c8\u30fc\u30af\u30f3\ntail -f /var/log/fluent/httpd/access.20130215.b4d5bdcc431c4eeec\n\n\n\u958b\u767a\u74b0\u5883\u7b49\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u76e3\u8996\u3057\u3066\u307f\u308b\n\u4f8b\uff09 http://localhost\u306a\u3069\u306b\u8907\u6570\u56de\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\n\u51fa\u529b\u3055\u308c\u3066\u3044\u308c\u3070OK!!\n\u5f8c\u306f\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u304b\u3042\u3063\u305f\u3089\u4fbf\u5229\u3060\u3051\u3069\u3001\u5fc3\u304c\u6298\u308c\u305f\u306e\u3067\u3053\u3053\u307e\u3067\uff01\uff01\n\u74b0\u5883 centos6.3\uff08\u30b2\u30b9\u30c8OS\uff09macosx10.8(\u30db\u30b9\u30c8OS)\n\n* ruby1.9.1\u4ee5\u4e0agem1.8.1\u4ee5\u4e0a\u304c\u5165\u3063\u3066\u308b\u524d\u63d0\u3068\u3059\u308b\n* httpd(apache)\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u3068\u3059\u308b\n\n## fluentd\u3068\u306f\n\n\u30ed\u30b0\u306a\u3069\u3092json\u5316\u3067\u304d\u308b\u3082\u306e\u3067\u65e5\u672c\u4eba\u306e\u53e4\u6a4b\u3055\u3093\u304c\u958b\u767a\u3057\u305f\u3082\u306e\u3067\u3059\u3002\nhttp://d.hatena.ne.jp/viver/20110929/p1\n\n\u6709\u540d\u4f01\u696d\u3067\u3082\u5c0e\u5165\u304c\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n* slideshare\n* GREE \u7b49\n\n\n\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\nhttp://docs.fluentd.org/articles/quickstart\n\u65e5\u672c\u8a9e\u7248\uff08\u975e\u516c\u5f0f??\uff09\nhttp://documents.mazgi.com/fluentd/doc/index.html\n\n\u958b\u767a\u3067\u3088\u304f\u3042\u308b\u300c\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092\u89e3\u6790\u3057\u3066\u304f\u308c\u30fc\u30fc\u30fc\u300d\u3063\u3066\u6642\u306b\njson\u3067\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u5316\u3055\u308c\u305f\u30c7\u30fc\u30bf\u306e\u7cbe\u67fb\u304c\u3067\u304d\u308b\u306e\u3067\u4fbf\u5229\u305d\u3046\u3067\u3059\u3002\n\uff08\u307e\u3060\u4f7f\u3044\u59cb\u3081\u306a\u306e\u3067\u3088\u304f\u308f\u304b\u3089\u3093\u304c\u3002\u3002\u3002\u3002\uff09\n\n\n## gem\u306eupdate\u3092\u3059\u308b\n\n\u4e00\u756a\u306f\u3058\u3081\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u901a\u308a\u3084\u308d\u3046\u3068\u601d\u3063\u305f\u3089\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u3070\u3057\u60a9\u3093\u3060\u3002\u3002\u3002\n\n```shell\ngem install fluentd --no-ri --no-rdoc\n\nWARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/latest_specs.4.8.gz)\nERROR:  Could not find a valid gem 'fluentd' (>= 0) in any repository\nERROR:  Possible alternatives: fluentd\n\n```\n\n\u60a9\u3080\u3053\u3068\uff11\u6642\u9593\u307e\u305a\u306fupdate\u304b\u3068\u6c17\u3065\u304f\n\u306a\u3093\u304b\u306e\u4f9d\u5b58\u30e2\u30b8\u30e5\u30fc\u30eb\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u3067\u5f15\u3063\u639b\u304b\u3093\u3060\u3068\u601d\u3046\u3002\n\n```shell\ngem update\n\nUpdating installed gems\nWARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/latest_specs.4.8.gz)\nUpdating io-console\nWARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/specs.4.8.gz)\nFetching: io-console-0.4.1.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed io-console-0.4.1\nUpdating minitest\nFetching: minitest-4.5.0.gem (100%)\nSuccessfully installed minitest-4.5.0\nUpdating rake\nFetching: rake-10.0.3.gem (100%)\nSuccessfully installed rake-10.0.3\nUpdating rdoc\nFetching: rdoc-3.12.1.gem (100%)\nDepending on your version of ruby, you may need to install ruby rdoc/ri data:\n\n<= 1.8.6 : unsupported\n = 1.8.7 : gem install rdoc-data; rdoc-data --install\n = 1.9.1 : gem install rdoc-data; rdoc-data --install\n>= 1.9.2 : nothing to do! Yay!\nSuccessfully installed rdoc-3.12.1\nGems updated: io-console, minitest, rake, rdoc\nInstalling ri documentation for io-console-0.4.1...\nInstalling ri documentation for minitest-4.5.0...\nInstalling ri documentation for rake-10.0.3...\nInstalling ri documentation for rdoc-3.12.1...\nInstalling RDoc documentation for io-console-0.4.1...\nInstalling RDoc documentation for minitest-4.5.0...\nInstalling RDoc documentation for rake-10.0.3...\nInstalling RDoc documentation for rdoc-3.12.1...\n\n\n```\n\n\u3082\u3046\u4e00\u5ea6\u30ea\u30c8\u30e9\u30a4\n\n```shell\ngem install fluentd\n\nFetching: msgpack-0.4.7.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: iobuffer-1.1.2.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: cool.io-1.1.0.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: http_parser.rb-0.5.3.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: fluentd-0.10.31.gem (100%)\nSuccessfully installed msgpack-0.4.7\nSuccessfully installed iobuffer-1.1.2\nSuccessfully installed cool.io-1.1.0\nSuccessfully installed http_parser.rb-0.5.3\nSuccessfully installed fluentd-0.10.31\n5 gems installed\nInstalling ri documentation for msgpack-0.4.7...\nInstalling ri documentation for iobuffer-1.1.2...\nInstalling ri documentation for cool.io-1.1.0...\nInstalling ri documentation for http_parser.rb-0.5.3...\nInstalling ri documentation for fluentd-0.10.31...\nInstalling RDoc documentation for msgpack-0.4.7...\nInstalling RDoc documentation for iobuffer-1.1.2...\nInstalling RDoc documentation for cool.io-1.1.0...\nInstalling RDoc documentation for http_parser.rb-0.5.3...\nInstalling RDoc documentation for fluentd-0.10.31... #\u5165\u3063\u305f\n\n```\n\n\u203b\u30b3\u30de\u30f3\u30c9\u3067\u6700\u521dfluentd\u304c\u898b\u3064\u304b\u3089\u306a\u304f\u3066\u56f0\u3063\u305f\u304c\u4e00\u65e6virtualbox\u304b\u3089exit\u3067\u629c\u3051\u3066\u5165\u308a\u306a\u304a\u3057\u305f\u3089\u5165\u3063\u3066\u3044\u305f\u3002\n\u591a\u5206PATH\u306e\u8a2d\u5b9a\u304crbenv\u3060\u3068\u4e00\u65e6\u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u629c\u3051\u306a\u3044\u3068\u30c0\u30e1\u3063\u307d\u3044\u3002\u3002\n\uff08\u3068\u3044\u3046\u304binit\u306e\u51e6\u7406\u304c\u5fc5\u8981\u3060\u3063\u305f\u307f\u305f\u3044\uff09\n\n\n## fluentd\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\n\u307e\u3042/etc/\u4ee5\u4e0b\u306b\u3042\u308c\u3070\u3044\u3044\u3060\u308d\u3046\u3068\u3044\u3046\u3053\u3068\u3067\n\n```shell\nfluentd --setup /etc/fluent\n\ninstalled ./fluent/fluent.conf.\n```\n\n\n## \u52d5\u4f5c\u691c\u8a3c\n\n\u3053\u308c\u3082\u30de\u30cb\u30e5\u30a2\u30eb\u3069\u304a\u308a\u306b\u3084\u3063\u3066\u307f\u308b\n\n```shell\nfluentd -c /etc/fluent/fluent.conf -vv &\n\n[1] 4075\n[root@localhost fluent]# 2013-02-15 11:45:51 +0900: fluent/supervisor.rb:153:supervise: starting fluentd-0.10.31\n2013-02-15 11:45:51 +0900: fluent/supervisor.rb:235:read_config: reading config file path=\"fluent.conf\"\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'file'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'memory'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'debug_agent'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'exec'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'forward'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'gc_stat'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'http'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'object_space'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'status'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tcp'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'unix'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'syslog'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tail'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'copy'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec_filter'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'file'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'forward'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'null'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'roundrobin'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'stdout'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'tcp'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'unix'\n2013-02-15 11:45:51 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'test'\n2013-02-15 11:45:51 +0900: fluent/engine.rb:61:configure: using configuration file: <ROOT>\n  <source>\n    type forward\n  </source>\n  <source>\n    type http\n    port 8888\n  </source>\n  <source>\n    type debug_agent\n    port 24230\n  </source>\n  <match debug.**>\n    type stdout\n  </match>\n</ROOT>\n2013-02-15 11:45:51 +0900: fluent/engine.rb:70:block in configure: adding source type=\"forward\"\n2013-02-15 11:45:51 +0900: fluent/engine.rb:70:block in configure: adding source type=\"http\"\n2013-02-15 11:45:51 +0900: fluent/engine.rb:70:block in configure: adding source type=\"debug_agent\"\n2013-02-15 11:45:51 +0900: fluent/engine.rb:86:block in configure: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-02-15 11:45:51 +0900: plugin/in_forward.rb:63:listen: listening fluent socket on 0.0.0.0:24224\n2013-02-15 11:45:51 +0900: plugin/in_http.rb:74:start: listening http on 0.0.0.0:8888\n2013-02-15 11:45:51 +0900: plugin/in_debug_agent.rb:46:start: listening dRuby uri=\"druby://0.0.0.0:24230\" object=\"Engine\"\n\n```\n\n\u5b9f\u969b\u3084\u3063\u3066\u307f\u308b\n\n```shell\necho '{\"json\":\"message\"}' | fluent-cat debug.test\n\n2013-02-15 11:46:08 +0900: plugin/in_forward.rb:147:initialize: accepted fluent socket object_id=14395860\n2013-02-15 11:46:08 +0900 debug.test: {\"json\":\"message\"}\n2013-02-15 11:46:08 +0900: plugin/in_forward.rb:188:on_close: closed fluent socket object_id=14395860\n\n```\n\n\u52d5\u3044\u3066\u308b\n\n\n## fluentd\u306e\u8d77\u52d5\u3068\u505c\u6b62\u65b9\u6cd5\n\n### \u8d77\u52d5\n\n```shell\nfluentd -c fluent.conf\u306e\u30d1\u30b9 -vv &\n```\n\n### \u505c\u6b62\n\n```shell\n#\u30c7\u30d5\u30a9\u30eb\u30c8\u306f24224\u3063\u307d\u3044\n/usr/sbin/lsof | grep 24224\n\nfluentd   6428      root    6u     IPv4              44926      0t0        TCP *:24224 (LISTEN)\nfluentd   6428      root    7u     IPv4              44928      0t0        UDP *:24224 \n```\n\n\u30d7\u30ed\u30bb\u30b9\u304c\u751f\u304d\u3066\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u3066\n\n```shell\npkill fluentd\n\n```\n\n\u6bba\u3059\uff01\uff01\n\n\u203b\u4e00\u90e8\u306e\u30d6\u30ed\u30b0\u3067\u4e0b\u8a18\u306e\u65b9\u6cd5\u3067\u505c\u6b62\u3092\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u305f\u307e\u306b\u30d7\u30ed\u30bb\u30b9\u304c\u91cd\u8907\u8d77\u52d5\u3057\u3066\u30d7\u30ed\u30bb\u30b9\u304c\u6bba\u3057\u304d\u308c\u306a\u3044\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n```shell\n#\u307e\u305a\u306fjob\u306e\u78ba\u8a8d\njobs -l\n[1]+  4075 Running                 fluentd -c fluent.conf -vv &\n\n\n#\u305d\u3057\u3066kill\nkill 4075\n# 2013-02-15 12:09:17 +0900: fluent/engine.rb:167:stop: shutting down fluentd\n2013-02-15 12:09:18 +0900: fluent/supervisor.rb:170:supervise: process finished code=0\n\n[1]+  Done                    fluentd -c fluent.conf -vv\n\n```\n\n\n## apache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u3092json\u3067\u51fa\u529b\u3059\u308b\n\n```shell:/etc/fluent/fluent.conf\nvim /etc/fluent/fluent.conf\n\n#\u4fee\u6b63\u524d\n#<source>\n#  type tail\n#  format apache\n#  path /var/log/httpd/access_log\n#  tag apache.access\n#</source>\n\n\n#\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3092\u5916\u3057\u3066path\u306e\u90e8\u5206\u3092\u5909\u66f4\u3059\u308b\n#\u4fee\u6b63\u5f8c\n<source>\n  type tail\n  format apache\n  path /var/log/httpd/access_log\n  tag apache.access\n</source>\n\n# \u4fee\u6b63\u524d\n#<match apache.access>\n#  type file\n#  path /var/log/fluent/access\n#</match>\n\n#\u4fee\u6b63\u5f8c\n<match apache.access>\n  type file\n  path /var/log/fluent/access\n</match>\n```\n\n## fluentd\u306e\u518d\u8d77\u52d5\n\n\u518d\u8d77\u52d5\u3057\u306a\u3044\u3068\u8aad\u307f\u8fbc\u307e\u306a\u304b\u3063\u305f\u306e\u3067\n\n### \u505c\u6b62\n\n```shell\npkill fluentd\n```\n\n### \u518d\u8d77\u52d5\n```shell\nfluentd -c /etc/fluent/fluent.conf -vv &\n\n\n[1] 4171\n[root@localhost fluent]# 2013-02-15 12:21:53 +0900: fluent/supervisor.rb:153:supervise: starting fluentd-0.10.31\n2013-02-15 12:21:53 +0900: fluent/supervisor.rb:235:read_config: reading config file path=\"/etc/fluent/fluent.conf\"\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'file'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered buffer plugin 'memory'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'debug_agent'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'exec'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'forward'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'gc_stat'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'http'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'object_space'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'status'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tcp'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'unix'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'syslog'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered input plugin 'tail'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'copy'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'exec_filter'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'file'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'forward'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'null'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'roundrobin'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'stdout'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'tcp'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'unix'\n2013-02-15 12:21:53 +0900: fluent/plugin.rb:89:register_impl: registered output plugin 'test'\n2013-02-15 12:21:53 +0900: fluent/engine.rb:61:configure: using configuration file: <ROOT>\n  <source>\n    type forward\n  </source>\n  <source>\n    type http\n    port 8888\n  </source>\n  <source>\n    type tail\n    format apache\n    path /var/log/httpd/access_log\n    tag apache.access\n  </source>\n  <source>\n    type debug_agent\n    port 24230\n  </source>\n  <match apache.access>\n    type file\n    path /var/log/fluent/access\n  </match>\n  <match debug.**>\n    type stdout\n  </match>\n</ROOT>\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"forward\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"http\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"tail\"\n2013-02-15 12:21:53 +0900: plugin/in_tail.rb:49:configure: 'pos_file PATH' parameter is not set to a 'tail' source.\n2013-02-15 12:21:53 +0900: plugin/in_tail.rb:50:configure: this parameter is highly recommended to save the position to resume tailing.\n2013-02-15 12:21:53 +0900: fluent/engine.rb:70:block in configure: adding source type=\"debug_agent\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:86:block in configure: adding match pattern=\"apache.access\" type=\"file\"\n2013-02-15 12:21:53 +0900: fluent/engine.rb:86:block in configure: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-02-15 12:21:53 +0900: plugin/in_forward.rb:63:listen: listening fluent socket on 0.0.0.0:24224\n2013-02-15 12:21:53 +0900: plugin/in_http.rb:74:start: listening http on 0.0.0.0:8888\n2013-02-15 12:21:53 +0900: plugin/in_tail.rb:289:initialize: following tail of /var/log/httpd/access_log\n2013-02-15 12:21:53 +0900: plugin/in_debug_agent.rb:46:start: listening dRuby uri=\"druby://0.0.0.0:24230\" object=\"Engine\"\n\n\n```\n\n\u30a8\u30e9\u30fc\u3068\u304b\u304c\u3067\u3066\u3044\u306a\u3044\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\n\n## \u51fa\u529b\u5185\u5bb9\u306e\u78ba\u8a8d\n\n\u5834\u6240\u306f/var/log/fluent/httpd/access.\u65e5\u4ed8.\u30c8\u30fc\u30af\u30f3\n\n```shell\ntail -f /var/log/fluent/httpd/access.20130215.b4d5bdcc431c4eeec\n\n```\n\n\u958b\u767a\u74b0\u5883\u7b49\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u76e3\u8996\u3057\u3066\u307f\u308b\n\n\u4f8b\uff09 http://localhost\u306a\u3069\u306b\u8907\u6570\u56de\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\n\n\u51fa\u529b\u3055\u308c\u3066\u3044\u308c\u3070OK!!\n\n\u5f8c\u306f\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u3068\u304b\u3042\u3063\u305f\u3089\u4fbf\u5229\u3060\u3051\u3069\u3001\u5fc3\u304c\u6298\u308c\u305f\u306e\u3067\u3053\u3053\u307e\u3067\uff01\uff01\n", "tags": ["Apache", "fluentd"]}