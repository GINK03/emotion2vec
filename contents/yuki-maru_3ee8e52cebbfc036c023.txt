{"tags": ["docker", "Ruby", "RubyOnRails", "docker-compose"], "context": "\n\nDocker + Ruby on Rails 5 \u306e\u30e1\u30e2\n\nDockerfile\nFROM ruby:2.3.1\nENV LANG C.UTF-8\nRUN apt-get update -qq && apt-get install -y build-essential libpq-dev nodejs\n\nENV APP_HOME /myapp\nRUN mkdir $APP_HOME\nWORKDIR $APP_HOME\n\nADD Gemfile* $APP_HOME/\n\nRUN bundle install\n\n\n\ndocker-compose.yml\nversion: '2'\nservices:\n  web:\n    build: .\n    command: bundle exec rails s -p 3000 -b '0.0.0.0'\n    volumes:\n      - .:/myapp\n    ports:\n      - \"3000:3000\"\n\n\n\nGemfile\nsource \"https://rubygems.org\"\ngem 'rails', '~> 5.0.0'\n\n\n$ touch Gemfile.lock \u3067\u7a7a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3002\n$ docker-compose build \u3067 Rails \u30d3\u30eb\u30c9\u3002\n$ docker-compose run web rails new . --force --skip-bundle \u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a2\u30d7\u30ea\u4f5c\u6210\u3002\n\u2191 \u3053\u3053\u306eweb\u306fdocker-compose.yml\u306eservices\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308bweb\u3002\nrails new\u3067\u65b0\u305f\u306bGemfile\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067$ docker-compose build \u3067\u518d\u5ea6\u30d3\u30eb\u30c9\u3002\n$ docker-compose up\u3067\u30a2\u30d7\u30ea\u8d77\u52d5\u3002\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089 0.0.0.0:3000 \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u3002\n\u3010\u53c2\u8003\u3011 https://docs.docker.com/compose/rails/\n# Docker + Ruby on Rails 5 \u306e\u30e1\u30e2\n\n```:Dockerfile\nFROM ruby:2.3.1\nENV LANG C.UTF-8\nRUN apt-get update -qq && apt-get install -y build-essential libpq-dev nodejs\n\nENV APP_HOME /myapp\nRUN mkdir $APP_HOME\nWORKDIR $APP_HOME\n\nADD Gemfile* $APP_HOME/\n\nRUN bundle install\n```\n\n```:docker-compose.yml\nversion: '2'\nservices:\n  web:\n    build: .\n    command: bundle exec rails s -p 3000 -b '0.0.0.0'\n    volumes:\n      - .:/myapp\n    ports:\n      - \"3000:3000\"\n```\n\n```ruby:Gemfile\nsource \"https://rubygems.org\"\ngem 'rails', '~> 5.0.0'\n```\n\n`$ touch Gemfile.lock` \u3067\u7a7a\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u4f5c\u6210\u3002\n\n`$ docker-compose build` \u3067 Rails \u30d3\u30eb\u30c9\u3002\n`$ docker-compose run web rails new . --force --skip-bundle` \u3067\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30a2\u30d7\u30ea\u4f5c\u6210\u3002\n\u2191 \u3053\u3053\u306e`web`\u306f`docker-compose.yml`\u306e`services`\u3067\u5b9a\u7fa9\u3057\u3066\u3044\u308b`web`\u3002\n\n`rails new`\u3067\u65b0\u305f\u306b`Gemfile`\u304c\u751f\u6210\u3055\u308c\u308b\u306e\u3067`$ docker-compose build` \u3067\u518d\u5ea6\u30d3\u30eb\u30c9\u3002\n\n`$ docker-compose up`\u3067\u30a2\u30d7\u30ea\u8d77\u52d5\u3002\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089 [0.0.0.0:3000](http://0.0.0.0:3000) \u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u52d5\u4f5c\u78ba\u8a8d\u3002\n\n\u3010\u53c2\u8003\u3011 https://docs.docker.com/compose/rails/\n"}