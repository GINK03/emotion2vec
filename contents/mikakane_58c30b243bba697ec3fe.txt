{"context": "composer require guzzlehttp/guzzle\n\n\n\u901a\u4fe1\u51e6\u7406\n\u57fa\u672c\u7684\u306a\u901a\u4fe1\u306e\u4ed5\u65b9\nuse GuzzleHttp\\Client;\n\n$client = new Client();\n$res = $client->requestAsync($method,$url,$options)->wait();\n\n\u69d8\u3005\u306a\u8a18\u6cd5\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u304c\u6982\u306d\u4ee5\u4e0b\u306e\u69d8\u306a\u5f62\u3067\u307e\u3068\u307e\u308b\u3002\nrequest()\u306b\u3088\u308b\u547c\u3073\u51fa\u3057\u306f \u5185\u90e8\u3067 requestAsync()->wait() \u3092\u547c\u3073\u51fa\u3059\u3002\nget post \u3068\u8a00\u3063\u305f\u30e1\u30bd\u30c9\u540d\u547c\u3073\u51fa\u3057\u306f\u3001\u52d5\u7684\u306b\u30e1\u30bd\u30c9\u540d\u3092\u7b2c\u4e00\u5f15\u6570\u306b\u636e\u3048\u3066request \u3092\u547c\u3073\u51fa\u3059\u3002\ngetAsync postAsync \u3068\u8a00\u3063\u305f\u30e1\u30bd\u30c9\u540d\u547c\u3073\u51fa\u3057\u306f\u3001\u52d5\u7684\u306b\u30e1\u30bd\u30c9\u540d\u3092\u7b2c\u4e00\u5f15\u6570\u306b\u636e\u3048\u3066request Async\u3092\u547c\u3073\u51fa\u3059\u3002\n\nPSR7 \u306b\u3088\u308b\u30ea\u30af\u30a8\u30b9\u30c8\nPSR7\u5f62\u5f0f\u3067\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306b\u306f send\u30e1\u30bd\u30c9\u304c\u5229\u7528\u3067\u304d\u308b\u3002\nuse GuzzleHttp\\Psr7\\Request;\n$request = new Request('GET', 'http://foo.com', ['X-Foo' => 'test']);\n$client->send($request,$options);\n\nsend \u3068 sendAsync \u306e\u95a2\u4fc2\u306f request / requestAsync\u306e\u95a2\u4fc2\u3068\u307b\u307c\u540c\u3058\u3002\npsr7 \u3060\u3051\u3069\u9001\u4fe1\u6642\u306boption\u3092\u4e0a\u66f8\u304d\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\n\nOptions\n\u8a73\u3057\u304f\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\nhttp://docs.guzzlephp.org/en/latest/request-options.html\n\nbody / json / form_params / query\n\u6587\u5b57\u5217\u3001\u30ea\u30bd\u30fc\u30b9\u307e\u305f\u306fPsr\\Http\\Message\\StreamInterface\u3067\u6307\u5b9a\u3059\u308b\u3002\n$client->request('PUT', '/put', ['body' => 'some big body string data...']);\n\njson \u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306b\u306fjson \u30ad\u30fc\u3067\u914d\u5217\u3092\u6e21\u3059\u307b\u3046\u304c\u697d\u305d\u3046\n$client->request('PUT', '/put', ['json' => ['foo' => 'bar']]);\n\n\u30d5\u30a9\u30fc\u30e0\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u3044\u305f\u3044\u6642\u306b\u306fform_params\n$client->request('POST', '/post', [\n    'form_params' => [\n        'foo' => 'bar',\n        'baz' => ['hi', 'there!']\n    ]\n]);\n\n\u307e\u305fGET\u3067\u4f7f\u7528\u3059\u308bURL\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306f query \u3092\u4f7f\u7528\u3059\u308b\u4e8b\n$client->request('GET', '/get', ['query' => ['foo' => 'bar']]);\n\n\nheaders\n\u9023\u60f3\u914d\u5217\u3067\u6307\u5b9a\u3059\u308b\u3002\n$client->request('GET', '/get', [\n    'headers' => [\n        'User-Agent' => 'testing/1.0',\n        'Accept'     => 'application/json',\n        'X-Foo'      => ['Bar', 'Baz']\n    ]\n]);\n\n\nhttp_errors\nfalse \u306b\u3059\u308b\u3068\u30a8\u30e9\u30fc\u3092\u306f\u304b\u306a\u304f\u306a\u308b\u3002\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f4xx 5xx\u3067\u4f8b\u5916\u3092\u6295\u3052\u3066\u304f\u308b\u3002\n\nClient \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5f79\u5272\nClient \u95a2\u6570\u306b\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3059\u4e8b\u304c\u53ef\u80fd\u3068\u306a\u3063\u3066\u304a\u308a\u3001\n\u5b9a\u578b\u7684\u306a\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u8907\u6570\u9001\u308a\u305f\u3044\u6642\u306a\u3069\u306b\u4fbf\u5229\u3002\noption \u306e handler\u3068\u3044\u3046\u9805\u76ee\u306bHandlerStack \u3092\u8ffd\u52a0\u3059\u308b\u3068\u3001\n\u30ea\u30af\u30a8\u30b9\u30c8\u51e6\u7406\u306bMiddleware\u3092\u8ffd\u52a0\u3059\u308b\u4e8b\u304c\u3067\u304d\u308b\u305d\u3046\u3002\u3053\u306e\u8fba\u306f\u307e\u305f\u6b21\u56de\u6687\u3092\u898b\u3066\u66f8\u304d\u305f\u3044\u3002\nhttp://docs.guzzlephp.org/en/latest/handlers-and-middleware.html\n\n````\ncomposer require guzzlehttp/guzzle\n````\n\n## \u901a\u4fe1\u51e6\u7406\n\n\u57fa\u672c\u7684\u306a\u901a\u4fe1\u306e\u4ed5\u65b9\n\n````\nuse GuzzleHttp\\Client;\n\n$client = new Client();\n$res = $client->requestAsync($method,$url,$options)->wait();\n````\n\n\u69d8\u3005\u306a\u8a18\u6cd5\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u304c\u6982\u306d\u4ee5\u4e0b\u306e\u69d8\u306a\u5f62\u3067\u307e\u3068\u307e\u308b\u3002\n\n`request()`\u306b\u3088\u308b\u547c\u3073\u51fa\u3057\u306f \u5185\u90e8\u3067 requestAsync()->wait() \u3092\u547c\u3073\u51fa\u3059\u3002\n\n`get` `post` \u3068\u8a00\u3063\u305f\u30e1\u30bd\u30c9\u540d\u547c\u3073\u51fa\u3057\u306f\u3001\u52d5\u7684\u306b\u30e1\u30bd\u30c9\u540d\u3092\u7b2c\u4e00\u5f15\u6570\u306b\u636e\u3048\u3066request \u3092\u547c\u3073\u51fa\u3059\u3002\n\n`getAsync` `postAsync` \u3068\u8a00\u3063\u305f\u30e1\u30bd\u30c9\u540d\u547c\u3073\u51fa\u3057\u306f\u3001\u52d5\u7684\u306b\u30e1\u30bd\u30c9\u540d\u3092\u7b2c\u4e00\u5f15\u6570\u306b\u636e\u3048\u3066request Async\u3092\u547c\u3073\u51fa\u3059\u3002\n\n### PSR7 \u306b\u3088\u308b\u30ea\u30af\u30a8\u30b9\u30c8\n\nPSR7\u5f62\u5f0f\u3067\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u306b\u306f send\u30e1\u30bd\u30c9\u304c\u5229\u7528\u3067\u304d\u308b\u3002\n\n````\nuse GuzzleHttp\\Psr7\\Request;\n$request = new Request('GET', 'http://foo.com', ['X-Foo' => 'test']);\n$client->send($request,$options);\n````\n\nsend \u3068 sendAsync \u306e\u95a2\u4fc2\u306f request / requestAsync\u306e\u95a2\u4fc2\u3068\u307b\u307c\u540c\u3058\u3002\n\npsr7 \u3060\u3051\u3069\u9001\u4fe1\u6642\u306boption\u3092\u4e0a\u66f8\u304d\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\n\n## Options \n\n\u8a73\u3057\u304f\u306f\u3053\u3061\u3089\u3092\u53c2\u7167\nhttp://docs.guzzlephp.org/en/latest/request-options.html\n\n### body / json / form_params / query\n \n\u6587\u5b57\u5217\u3001\u30ea\u30bd\u30fc\u30b9\u307e\u305f\u306f`Psr\\Http\\Message\\StreamInterface`\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n````\n$client->request('PUT', '/put', ['body' => 'some big body string data...']);\n````\n\njson \u3092\u4f7f\u7528\u3057\u305f\u3044\u5834\u5408\u306b\u306fjson \u30ad\u30fc\u3067\u914d\u5217\u3092\u6e21\u3059\u307b\u3046\u304c\u697d\u305d\u3046\n\n````\n$client->request('PUT', '/put', ['json' => ['foo' => 'bar']]);\n````\n\n\u30d5\u30a9\u30fc\u30e0\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u884c\u3044\u305f\u3044\u6642\u306b\u306fform_params\n\n```` \n$client->request('POST', '/post', [\n    'form_params' => [\n        'foo' => 'bar',\n        'baz' => ['hi', 'there!']\n    ]\n]);\n````\n\n\u307e\u305fGET\u3067\u4f7f\u7528\u3059\u308bURL\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u306f query \u3092\u4f7f\u7528\u3059\u308b\u4e8b\n\n````\n$client->request('GET', '/get', ['query' => ['foo' => 'bar']]);\n````\n\n### headers\n\n\u9023\u60f3\u914d\u5217\u3067\u6307\u5b9a\u3059\u308b\u3002\n\n````\n$client->request('GET', '/get', [\n    'headers' => [\n        'User-Agent' => 'testing/1.0',\n        'Accept'     => 'application/json',\n        'X-Foo'      => ['Bar', 'Baz']\n    ]\n]);\n````\n\n### http_errors\n\nfalse \u306b\u3059\u308b\u3068\u30a8\u30e9\u30fc\u3092\u306f\u304b\u306a\u304f\u306a\u308b\u3002\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f4xx 5xx\u3067\u4f8b\u5916\u3092\u6295\u3052\u3066\u304f\u308b\u3002\n\n## Client \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u5f79\u5272\n\nClient \u95a2\u6570\u306b\u306f\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6e21\u3059\u4e8b\u304c\u53ef\u80fd\u3068\u306a\u3063\u3066\u304a\u308a\u3001\n\u5b9a\u578b\u7684\u306a\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3092\u8907\u6570\u9001\u308a\u305f\u3044\u6642\u306a\u3069\u306b\u4fbf\u5229\u3002\n\noption \u306e `handler`\u3068\u3044\u3046\u9805\u76ee\u306bHandlerStack \u3092\u8ffd\u52a0\u3059\u308b\u3068\u3001\n\u30ea\u30af\u30a8\u30b9\u30c8\u51e6\u7406\u306bMiddleware\u3092\u8ffd\u52a0\u3059\u308b\u4e8b\u304c\u3067\u304d\u308b\u305d\u3046\u3002\u3053\u306e\u8fba\u306f\u307e\u305f\u6b21\u56de\u6687\u3092\u898b\u3066\u66f8\u304d\u305f\u3044\u3002\n\nhttp://docs.guzzlephp.org/en/latest/handlers-and-middleware.html\n\n\n", "tags": ["PHP", "Guzzle"]}