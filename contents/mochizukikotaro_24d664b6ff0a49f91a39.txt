{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u4e0b\u306e\u3088\u3046\u306aURL\u30ea\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3002\n\nurl-data.txt\nhttp://gihyo.jp/\nhttp://www.yahoo.co.jp/\nhttp://qiita.com/mochizukikotaro\nhttp://qiita.com/\n\n\n\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3068\u3057\u3066\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u6b32\u3057\u3044\u3002\n\u300cURL\u300d\u3068\u300c\u305d\u306e\u30da\u30fc\u30b8\u306etitle\u300d\u3092\u30bf\u30d6\u3067\u533a\u5207\u3063\u305f\u3082\u306e\u3067\u3059\u3002\n\nout.txt\nhttp://gihyo.jp/    \u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e\nhttp://www.yahoo.co.jp/ Yahoo! JAPAN\nhttp://qiita.com/mochizukikotaro    mochizukikotaro - Qiita\nhttp://qiita.com/   Qiita - \u30d7\u30ed\u30b0\u30e9\u30de\u306e\u6280\u8853\u60c5\u5831\u5171\u6709\u30b5\u30fc\u30d3\u30b9\n\n\n\n\u4e0b\u90e8\u306b\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\u4fee\u6b63\u30dd\u30a4\u30f3\u30c8\u3002\n\n500\u30a8\u30e9\u30fc\u306a\u3069\u306e\u30a8\u30e9\u30fc\u306b\u5bfe\u5fdc\u3059\u308b\n\u30bf\u30a4\u30c8\u30eb\u306b\u6539\u884c\u304c\u542b\u307e\u308c\u3066\u3044\u3066\u3082\u4e00\u884c\u3067\u7d0d\u3081\u308b\n\n\n\u6e96\u5099\n\u6b21\u306e\u4e8c\u3064\u306egem\u3092\u4f7f\u3044\u307e\u3059\u3002\n\nnokogiri\nopen_uri_redirections\n\n\u50d5\u306fbundler\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nGemfile\nsource \"https://rubygems.org\"\n\ngem \"nokogiri\"\ngem \"open_uri_redirections\"\n\n\n\n\u300copen_uri_redirections\u300d\u306f\u4f55\u306e\u305f\u3081\u306b\u3044\u308c\u308b\u304b\u3002\nhttp\u304b\u3089https\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u30b5\u30a4\u30c8URL\u304c\u30a4\u30f3\u30d7\u30c3\u30c8\u30c7\u30fc\u30bf\u3067\u3042\u308b\u6642\u3001open(url)\u304c\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u308c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306egem\u3067\u3059\u3002\n\n\u30bd\u30fc\u30b9\n\nscrape.rb\nrequire 'open-uri'\nrequire 'rubygems'\nrequire 'bundler/setup'\nrequire 'nokogiri'\nrequire 'open_uri_redirections'\n\nFile.open 'out.txt', 'w' do |out|\n  File.open('url-data.txt') do |f|\n    f.each_line do |line|\n      doc = Nokogiri::HTML(open(line, :allow_redirections => :all))\n      out.write line.rstrip + \"\\t\" + doc.title + \"\\n\"\n    end\n  end\nend\n\n\n\n\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n% ruby scrape.rb && cat out.txt\nhttp://gihyo.jp/    \u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e\nhttp://www.yahoo.co.jp/ Yahoo! JAPAN\nhttp://qiita.com/mochizukikotaro    mochizukikotaro - Qiita\nhttp://qiita.com/   Qiita - \u30d7\u30ed\u30b0\u30e9\u30de\u306e\u6280\u8853\u60c5\u5831\u5171\u6709\u30b5\u30fc\u30d3\u30b9\n\n\n\u4ee5\u4e0a\u3067\u3059\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\n\u8ffd\u8a18\uff1a\u4fee\u6b63\u7248\ngist\u3092\u4f7f\u3063\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u3053\u3061\u3089\u306b\u30a2\u30c3\u30d7\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nhttps://gist.github.com/mochizukikotaro/9227944441c06e1f901c\n\u4e0a\u306e\u30b3\u30fc\u30c9\u3060\u3068500\u30a8\u30e9\u30fc\u306eURL\u304c\u6df7\u3056\u3063\u3066\u3044\u308b\u3068\u9014\u4e2d\u3067\u6b62\u307e\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001begin\u3067\u4f8b\u5916\u51e6\u7406\u3092\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u308c\u3068\u3001\u30bf\u30a4\u30c8\u30eb\u306b\u6539\u884c\u304c\u3042\u308b\u3068\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u30c7\u30fc\u30bf\u304c\u6c5a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u524a\u9664\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\nscrape.rb\n\nrequire 'open-uri'\nrequire 'rubygems'\nrequire 'bundler/setup'\nrequire 'nokogiri'\nrequire 'open_uri_redirections'\n\nFile.open 'out.txt', 'w' do |out|\n  File.open('url-data.txt') do |f|\n    f.each_line do |line|\n      begin\n        doc = Nokogiri::HTML(open(line, :allow_redirections => :all))\n        unless doc.title.nil?\n          title = doc.title.strip.delete(\"\\n\\r\")\n          out.write line.rstrip + \"\\t\" + title + \"\\n\"\n        end\n      rescue\n        out.write line.rstrip + \"\\t\" + \"error\\n\"\n      end\n    end\n  end\nend\n\n\n# \u6982\u8981\n\n\u4e0b\u306e\u3088\u3046\u306aURL\u30ea\u30b9\u30c8\u30c7\u30fc\u30bf\u304c\u3042\u3063\u305f\u3068\u3057\u3066\u3002\n\n```txt:url-data.txt\nhttp://gihyo.jp/\nhttp://www.yahoo.co.jp/\nhttp://qiita.com/mochizukikotaro\nhttp://qiita.com/\n```\n\n\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u3068\u3057\u3066\u6b21\u306e\u3088\u3046\u306a\u3082\u306e\u304c\u6b32\u3057\u3044\u3002\n\u300cURL\u300d\u3068\u300c\u305d\u306e\u30da\u30fc\u30b8\u306etitle\u300d\u3092\u30bf\u30d6\u3067\u533a\u5207\u3063\u305f\u3082\u306e\u3067\u3059\u3002\n\n```out.txt\nhttp://gihyo.jp/\t\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e\nhttp://www.yahoo.co.jp/\tYahoo! JAPAN\nhttp://qiita.com/mochizukikotaro\tmochizukikotaro - Qiita\nhttp://qiita.com/\tQiita - \u30d7\u30ed\u30b0\u30e9\u30de\u306e\u6280\u8853\u60c5\u5831\u5171\u6709\u30b5\u30fc\u30d3\u30b9\n```\n\n## \u4e0b\u90e8\u306b\u8ffd\u8a18\u3057\u307e\u3057\u305f\u3002\u4fee\u6b63\u30dd\u30a4\u30f3\u30c8\u3002\n\n* 500\u30a8\u30e9\u30fc\u306a\u3069\u306e\u30a8\u30e9\u30fc\u306b\u5bfe\u5fdc\u3059\u308b\n* \u30bf\u30a4\u30c8\u30eb\u306b\u6539\u884c\u304c\u542b\u307e\u308c\u3066\u3044\u3066\u3082\u4e00\u884c\u3067\u7d0d\u3081\u308b\n\n\n# \u6e96\u5099\n\n\u6b21\u306e\u4e8c\u3064\u306egem\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n* nokogiri\n* open_uri_redirections\n\n\u50d5\u306fbundler\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```vim:Gemfile\nsource \"https://rubygems.org\"\n\ngem \"nokogiri\"\ngem \"open_uri_redirections\"\n```\n\n###\u300copen_uri_redirections\u300d\u306f\u4f55\u306e\u305f\u3081\u306b\u3044\u308c\u308b\u304b\u3002\n\nhttp\u304b\u3089https\u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u30b5\u30a4\u30c8URL\u304c\u30a4\u30f3\u30d7\u30c3\u30c8\u30c7\u30fc\u30bf\u3067\u3042\u308b\u6642\u3001`open(url)`\u304c\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\u3002\u305d\u308c\u3092\u56de\u907f\u3059\u308b\u305f\u3081\u306egem\u3067\u3059\u3002\n\n# \u30bd\u30fc\u30b9\n\n```rb:scrape.rb\nrequire 'open-uri'\nrequire 'rubygems'\nrequire 'bundler/setup'\nrequire 'nokogiri'\nrequire 'open_uri_redirections'\n\nFile.open 'out.txt', 'w' do |out|\n  File.open('url-data.txt') do |f|\n    f.each_line do |line|\n      doc = Nokogiri::HTML(open(line, :allow_redirections => :all))\n      out.write line.rstrip + \"\\t\" + doc.title + \"\\n\"\n    end\n  end\nend\n```\n\n```zsh:\u5b9f\u884c\u3057\u3066\u307f\u308b\u3002\n% ruby scrape.rb && cat out.txt\nhttp://gihyo.jp/\t\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\uff5cgihyo.jp \u2026 \u6280\u8853\u8a55\u8ad6\u793e\nhttp://www.yahoo.co.jp/\tYahoo! JAPAN\nhttp://qiita.com/mochizukikotaro\tmochizukikotaro - Qiita\nhttp://qiita.com/\tQiita - \u30d7\u30ed\u30b0\u30e9\u30de\u306e\u6280\u8853\u60c5\u5831\u5171\u6709\u30b5\u30fc\u30d3\u30b9\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002\u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3057\u305f\u3002\n\n\n# \u8ffd\u8a18\uff1a\u4fee\u6b63\u7248\n\ngist\u3092\u4f7f\u3063\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u3053\u3061\u3089\u306b\u30a2\u30c3\u30d7\u3057\u3066\u307f\u307e\u3057\u305f\u3002\nhttps://gist.github.com/mochizukikotaro/9227944441c06e1f901c\n\n\u4e0a\u306e\u30b3\u30fc\u30c9\u3060\u3068500\u30a8\u30e9\u30fc\u306eURL\u304c\u6df7\u3056\u3063\u3066\u3044\u308b\u3068\u9014\u4e2d\u3067\u6b62\u307e\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001`begin`\u3067\u4f8b\u5916\u51e6\u7406\u3092\u5bfe\u5fdc\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u308c\u3068\u3001\u30bf\u30a4\u30c8\u30eb\u306b\u6539\u884c\u304c\u3042\u308b\u3068\u30a2\u30a6\u30c8\u30d7\u30c3\u30c8\u30c7\u30fc\u30bf\u304c\u6c5a\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001\u524a\u9664\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n```rb:scrape.rb\n\nrequire 'open-uri'\nrequire 'rubygems'\nrequire 'bundler/setup'\nrequire 'nokogiri'\nrequire 'open_uri_redirections'\n \nFile.open 'out.txt', 'w' do |out|\n  File.open('url-data.txt') do |f|\n    f.each_line do |line|\n      begin\n        doc = Nokogiri::HTML(open(line, :allow_redirections => :all))\n        unless doc.title.nil?\n          title = doc.title.strip.delete(\"\\n\\r\")\n          out.write line.rstrip + \"\\t\" + title + \"\\n\"\n        end\n      rescue\n        out.write line.rstrip + \"\\t\" + \"error\\n\"\n      end\n    end\n  end\nend\n```\n\n\n", "tags": ["Nokogiri", "Ruby"]}