{"context": "\n\n\u3084\u308a\u305f\u3044\u3053\u3068\nwww.\u5171\u5186.net\u3067\u3001\u3042\u308bhtml\u304c\u8fd4\u5374\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n\u4e8b\u524d\u6e96\u5099\n\u304a\u540d\u524d.com\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3002\n\nTerraform\u306e\u8a2d\u5b9a\n\nmain.tf\nprovider \"aws\" {\n  region = \"ap-northeast-1\"\n}\n\nresource \"aws_route53_zone\" \"kyouen-net\" {\n  name = \"xn--b6qvb.net\"\n}\n\nresource \"aws_s3_bucket\" \"main\" {\n    bucket = \"www.xn--b6qvb.net\"\n    acl = \"public-read\"\n    policy = <<EOF\n{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:s3:::www.xn--b6qvb.net/*\",\"Sid\":\"PublicReadForGetBucketObjects\"}],\"Version\":\"2012-10-17\"}\nEOF\n\n    website {\n        index_document = \"index.html\"\n        error_document = \"error.html\"\n    }\n}\n\nresource \"aws_route53_record\" \"www\" {\n  zone_id = \"${aws_route53_zone.kyouen-net.zone_id}\"\n  name = \"www.xn--b6qvb.net\"\n  type = \"A\"\n\n  alias {\n    name = \"${aws_s3_bucket.main.website_domain}\"\n    zone_id = \"${aws_s3_bucket.main.hosted_zone_id}\"\n    evaluate_target_health = true\n  }\n}\n\noutput \"name_servers.0\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.0}\"\n}\noutput \"name_servers.1\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.1}\"\n}\noutput \"name_servers.2\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.2}\"\n}\noutput \"name_servers.3\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.3}\"\n}\n\n\n\naws_route53_zone\n\nzone\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\nPunycode\u8868\u8a18\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u3001name\u5c5e\u6027\u3068\u3057\u3066\u4e0e\u3048\u307e\u3059\u3002\n\naws_s3_bucket\n\nStatic Website Hosting\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\npolicy\u90e8\u5206\u306f\u30011\u5ea6\u5b9f\u884c\u3057\u305f\u5f8c\u306eterraform.tfstate\u304b\u3089\u6301\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\uff08JSON\u306e\u30ad\u30fc\u30fb\u5024\u304c\u4e00\u81f4\u3057\u3066\u3066\u3082\u3001\u6587\u5b57\u5217\u3068\u3057\u3066\u9055\u3063\u3066\u305f\u3089\u5909\u66f4\u3042\u308a\u3068\u3055\u308c\u308b\u3063\u307d\u3044\uff09\n\naws_route53_record\n\n\u4f5c\u6210\u3057\u305fzone\u3084\u3001S3 bucket\u306e\u60c5\u5831\u3092\u5143\u306b\u3001\nwww.\u5171\u5186.net\u3068\u3044\u3046\u30c9\u30e1\u30a4\u30f3\u3067\u3001\u540c\u540d\u306eS3 bucket\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nTerraform\u306e\u5b9f\u884c\n\u8a08\u753b\u306e\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\nterraform plan\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\nterraform apply\n\n\u6570\u5206\u5f85\u3063\u3066\u3044\u308b\u3068\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306bname server\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\nOutputs:\n\n  name_servers.0 = ns-NNNN.awsdns-NN.org\n  name_servers.1 = ns-NNNN.awsdns-NN.co.uk\n  name_servers.2 = ns-NNNN.awsdns-NN.com\n  name_servers.3 = ns-NNNN.awsdns-NN.net\n\n\nname server\u306e\u8a2d\u5b9a\n\u304a\u540d\u524d.com\u306e\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u5909\u66f4\u753b\u9762\u306b\u3066\u3001Terraform\u3067\u51fa\u529b\u3055\u308c\u305f\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\nS3\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3001\u78ba\u8a8d\u3059\u308b\u3002\nManagement Console\u3068\u304b\u3067\u3055\u304f\u3063\u3068\u30c6\u30ad\u30c8\u30fc\u306aindex.html\u3092\u914d\u7f6e\u3059\u308b\u3002\nhttp://www.\u5171\u5186.net/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308c\u3070OK\u3002\n\n\u611f\u60f3\n\u53d6\u5f97\u3057\u305f\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u3001\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3092\u7c21\u5358\u306b\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u51fa\u6765\u307e\u3057\u305f\u3002\nS3\u306a\u306e\u3067\u3001\u4e0b\u624b\u306aVPS\u3068\u304bIaaS\u4f7f\u3046\u3088\u308a\u306f\u5b89\u304f\u30fb\u9ad8\u3044\u4fe1\u983c\u6027\u3067\u914d\u4fe1\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001Terraform\u3067\u69cb\u7bc9\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u518d\u73fe\u6027\u304c\u9ad8\u304f\u3001\u7834\u68c4\u3082\u4e00\u77ac\u3067\u51fa\u6765\u307e\u3059\u3002\n\n## \u3084\u308a\u305f\u3044\u3053\u3068\n\n`www.\u5171\u5186.net`\u3067\u3001\u3042\u308bhtml\u304c\u8fd4\u5374\u3055\u308c\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3059\u308b\u3002\n\n## \u4e8b\u524d\u6e96\u5099\n\n\u304a\u540d\u524d.com\u3067\u30c9\u30e1\u30a4\u30f3\u3092\u53d6\u5f97\u3002\n\n## Terraform\u306e\u8a2d\u5b9a\n\n```main.tf\nprovider \"aws\" {\n  region = \"ap-northeast-1\"\n}\n\nresource \"aws_route53_zone\" \"kyouen-net\" {\n  name = \"xn--b6qvb.net\"\n}\n\nresource \"aws_s3_bucket\" \"main\" {\n    bucket = \"www.xn--b6qvb.net\"\n    acl = \"public-read\"\n    policy = <<EOF\n{\"Statement\":[{\"Action\":\"s3:GetObject\",\"Effect\":\"Allow\",\"Principal\":\"*\",\"Resource\":\"arn:aws:s3:::www.xn--b6qvb.net/*\",\"Sid\":\"PublicReadForGetBucketObjects\"}],\"Version\":\"2012-10-17\"}\nEOF\n\n    website {\n        index_document = \"index.html\"\n        error_document = \"error.html\"\n    }\n}\n\nresource \"aws_route53_record\" \"www\" {\n  zone_id = \"${aws_route53_zone.kyouen-net.zone_id}\"\n  name = \"www.xn--b6qvb.net\"\n  type = \"A\"\n\n  alias {\n    name = \"${aws_s3_bucket.main.website_domain}\"\n    zone_id = \"${aws_s3_bucket.main.hosted_zone_id}\"\n    evaluate_target_health = true\n  }\n}\n\noutput \"name_servers.0\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.0}\"\n}\noutput \"name_servers.1\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.1}\"\n}\noutput \"name_servers.2\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.2}\"\n}\noutput \"name_servers.3\" {\n  value = \"${aws_route53_zone.kyouen-net.name_servers.3}\"\n}\n```\n\n### [aws_route53_zone](https://www.terraform.io/docs/providers/aws/r/route53_zone.html)\n\nzone\u306e\u8a2d\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\nPunycode\u8868\u8a18\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u3001name\u5c5e\u6027\u3068\u3057\u3066\u4e0e\u3048\u307e\u3059\u3002\n\n### [aws_s3_bucket](https://www.terraform.io/docs/providers/aws/r/s3_bucket.html)\n\nStatic Website Hosting\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\npolicy\u90e8\u5206\u306f\u30011\u5ea6\u5b9f\u884c\u3057\u305f\u5f8c\u306e`terraform.tfstate`\u304b\u3089\u6301\u3063\u3066\u304d\u307e\u3057\u305f\u3002\n\uff08JSON\u306e\u30ad\u30fc\u30fb\u5024\u304c\u4e00\u81f4\u3057\u3066\u3066\u3082\u3001\u6587\u5b57\u5217\u3068\u3057\u3066\u9055\u3063\u3066\u305f\u3089\u5909\u66f4\u3042\u308a\u3068\u3055\u308c\u308b\u3063\u307d\u3044\uff09\n\n### [aws_route53_record](https://www.terraform.io/docs/providers/aws/r/route53_record.html)\n\n\u4f5c\u6210\u3057\u305fzone\u3084\u3001S3 bucket\u306e\u60c5\u5831\u3092\u5143\u306b\u3001\n`www.\u5171\u5186.net`\u3068\u3044\u3046\u30c9\u30e1\u30a4\u30f3\u3067\u3001\u540c\u540d\u306eS3 bucket\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n## Terraform\u306e\u5b9f\u884c\n\n\u8a08\u753b\u306e\u78ba\u8a8d\u3092\u3057\u307e\u3059\u3002\n\n```\nterraform plan\n```\n\n\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```\nterraform apply\n```\n\n\u6570\u5206\u5f85\u3063\u3066\u3044\u308b\u3068\u3001\u4e0b\u8a18\u306e\u3088\u3046\u306bname server\u304c\u51fa\u529b\u3055\u308c\u307e\u3059\u3002\n\n```\nOutputs:\n\n  name_servers.0 = ns-NNNN.awsdns-NN.org\n  name_servers.1 = ns-NNNN.awsdns-NN.co.uk\n  name_servers.2 = ns-NNNN.awsdns-NN.com\n  name_servers.3 = ns-NNNN.awsdns-NN.net\n```\n\n## name server\u306e\u8a2d\u5b9a\n\n\u304a\u540d\u524d.com\u306e\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u30fc\u5909\u66f4\u753b\u9762\u306b\u3066\u3001Terraform\u3067\u51fa\u529b\u3055\u308c\u305f\u30cd\u30fc\u30e0\u30b5\u30fc\u30d0\u306e\u30c9\u30e1\u30a4\u30f3\u540d\u3092\u8a2d\u5b9a\u3059\u308b\u3002\n\n## S3\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3001\u78ba\u8a8d\u3059\u308b\u3002\n\nManagement Console\u3068\u304b\u3067\u3055\u304f\u3063\u3068\u30c6\u30ad\u30c8\u30fc\u306a`index.html`\u3092\u914d\u7f6e\u3059\u308b\u3002\n\nhttp://www.\u5171\u5186.net/ \u3067\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308c\u3070OK\u3002\n\n## \u611f\u60f3\n\n\u53d6\u5f97\u3057\u305f\u72ec\u81ea\u30c9\u30e1\u30a4\u30f3\u3067\u3001\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3092\u7c21\u5358\u306b\u30db\u30b9\u30c6\u30a3\u30f3\u30b0\u51fa\u6765\u307e\u3057\u305f\u3002\n\nS3\u306a\u306e\u3067\u3001\u4e0b\u624b\u306aVPS\u3068\u304bIaaS\u4f7f\u3046\u3088\u308a\u306f\u5b89\u304f\u30fb\u9ad8\u3044\u4fe1\u983c\u6027\u3067\u914d\u4fe1\u3067\u304d\u307e\u3059\u3002\n\n\u307e\u305f\u3001Terraform\u3067\u69cb\u7bc9\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u518d\u73fe\u6027\u304c\u9ad8\u304f\u3001\u7834\u68c4\u3082\u4e00\u77ac\u3067\u51fa\u6765\u307e\u3059\u3002\n", "tags": ["Terraform", "S3", "AWS"]}