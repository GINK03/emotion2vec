{"tags": ["node-red", "websocket", "gauge"], "context": " More than 1 year has passed since last update.\n\n\u6982\u8981\nnode-red\u3067websocket\u3092\u4f7f\u3063\u3066\u3001\u30b2\u30fc\u30b8\u8868\u793a\u3059\u308b\u3002\njsdo.it\u306b\u3001\u7f6e\u304f\u3002\n\n\u5199\u771f\n\n\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\ngoogle.load('visualization', '1', {\n    packages : ['gauge']\n});\nvar tmp = 0;\nvar opt2 = {\n    min: -20,\n    max: 80,\n    width: 300, \n    height: 300,            \n    yellowFrom: 40, \n    yellowTo: 60,\n    redFrom: 60, \n    redTo: 80,\n    minorTicks: 4\n};\nvar chart2;\nfunction reloadData() {\n    var table2 = [['Label', 'Value'], ['\u2103', tmp]];\n    var data2 = google.visualization.arrayToDataTable(table2);\n    chart2.draw(data2, opt2);\n}    \nfunction sendData(str) {\n    window.external.onData(str);\n}\nvar websocket;\nfunction setup() { \n    websocket = new WebSocket(\"ws://node-red/test0\");\n    websocket.onopen = function() {\n        alert(\"CONNECTED\"); \n    };\n    websocket.onmessage = function(e) {\n        tmp = parseFloat(e.data);\n        reloadData();\n    };\n    websocket.onerror = function(e) {\n        alert(\"ERROR: \" + e.data);\n    };\n    google.setOnLoadCallback(drawChart);\n    function drawChart() {\n        chart2 = new google.visualization.Gauge(document.getElementById('chart2'));\n        reloadData();\n    }\n}\nsetup();\n\n\n#\u6982\u8981\nnode-red\u3067websocket\u3092\u4f7f\u3063\u3066\u3001\u30b2\u30fc\u30b8\u8868\u793a\u3059\u308b\u3002\njsdo.it\u306b\u3001\u7f6e\u304f\u3002\n#\u5199\u771f\n\n![guage.jpg](https://qiita-image-store.s3.amazonaws.com/0/18104/8780643c-eab5-9633-a69d-2253526710b8.jpeg)\n\n![websocket.jpg](https://qiita-image-store.s3.amazonaws.com/0/18104/51923f7c-c3f3-8006-ee05-98c9a3f2bd2e.jpeg)\n\n#\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n```\ngoogle.load('visualization', '1', {\n    packages : ['gauge']\n});\nvar tmp = 0;\nvar opt2 = {\n    min: -20,\n    max: 80,\n    width: 300, \n    height: 300,            \n    yellowFrom: 40, \n    yellowTo: 60,\n    redFrom: 60, \n    redTo: 80,\n    minorTicks: 4\n};\nvar chart2;\nfunction reloadData() {\n    var table2 = [['Label', 'Value'], ['\u2103', tmp]];\n    var data2 = google.visualization.arrayToDataTable(table2);\n    chart2.draw(data2, opt2);\n}    \nfunction sendData(str) {\n    window.external.onData(str);\n}\nvar websocket;\nfunction setup() { \n    websocket = new WebSocket(\"ws://node-red/test0\");\n    websocket.onopen = function() {\n        alert(\"CONNECTED\"); \n    };\n    websocket.onmessage = function(e) {\n        tmp = parseFloat(e.data);\n        reloadData();\n    };\n    websocket.onerror = function(e) {\n        alert(\"ERROR: \" + e.data);\n    };\n    google.setOnLoadCallback(drawChart);\n    function drawChart() {\n        chart2 = new google.visualization.Gauge(document.getElementById('chart2'));\n        reloadData();\n    }\n}\nsetup();\n\n```\n"}