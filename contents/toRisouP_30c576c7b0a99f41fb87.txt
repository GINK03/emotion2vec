{"context": "UniRx\u5165\u9580\u30b7\u30ea\u30fc\u30ba \u76ee\u6b21\u306f\u3053\u3061\u3089\n\n\n0.\u524d\u56de\u306e\u304a\u3055\u3089\u3044\n\u524d\u56de\u306f\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u69cb\u7bc9\u65b9\u6cd5\u3092\u3044\u304f\u3064\u304b\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u4eca\u56de\u306f\u3082\u3063\u3068\u5b9f\u7528\u6027\u306e\u9ad8\u3044\u300cUpdate\u3092\u5909\u63db\u3059\u308b\u65b9\u6cd5\u300d\u306b\u7126\u70b9\u3092\u7d5e\u3063\u3066\u8aac\u660e\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u3053\u306e\u8a18\u4e8b\u3067\u89e6\u308c\u308b\u5185\u5bb9\u306f\u904e\u53bb\u306b\u66f8\u3044\u305f \u3010UniRx\u3011Update()\u3092Observable\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5 \u306b\u3064\u3044\u3066\u66f8\u304d\u76f4\u3057\u305f\u5185\u5bb9\u306b\u306a\u308a\u307e\u3059\u3002\n\n1.Update()\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\nUnity\u306eUpdate()\u30b3\u30fc\u30eb\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\u306f2\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\nUniRx.Triggers\u306eUpdateAsObservable\u3092\u5229\u7528\u3059\u308b\nObservable.EveryUpdate\u3092\u5229\u7528\u3059\u308b\n\n\u4e0a\u8a182\u3064\u306f\u4f7f\u3044\u65b9\u3084\u52d5\u4f5c\u81ea\u4f53\u306f\u4f3c\u3066\u3044\u307e\u3059\u304c\u3001\u5185\u90e8\u5b9f\u88c5\u304c\u5927\u304d\u304f\u7570\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u307e\u305a\u306f\u305d\u308c\u305e\u308c\u306e\u4f7f\u3044\u65b9\u3068\u4ed5\u7d44\u307f\u3092\u89e3\u8aac\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\nUniRx.Triggers\u306eUpdateAsObservable\u3092\u5229\u7528\u3059\u308b\n\n\u4f7f\u3044\u65b9\n\u547c\u3073\u51fa\u3057\u65b9\n\n\nusing UniRx.Triggers; \u3092\u8ffd\u52a0\n\nthis.UpdateAsObservable() \u3092\u547c\u3073\u51fa\u3059\n\n\u767a\u884c\u3055\u308c\u308b\u578b\nUnit\n\nUpdateAsObservable\nusing UnityEngine;\nusing UniRx;\nusing UniRx.Triggers; //\u3053\u306eusing\u304c\u5fc5\u8981\n\npublic class UpdateSample : MonoBehaviour\n{\n    void Start()\n    {\n        // UpdateAsObservable\u306fComponent\u306b\u5bfe\u3059\u308b\n        // \u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u547c\u3073\u51fa\u3059\u969b\u306f\n        // \"this.\"\u304c\u5fc5\u8981\n        this.UpdateAsObservable()\n            .Subscribe(_ => Debug.Log(\"Update!\"));\n    }\n}\n\n\n\u4ee5\u4e0a\u3067Update\u30a4\u30d9\u30f3\u30c8\u3092UniRx\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3057\u3066\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001 UpdateAsObservable \u306fGameObject\u304c\u7834\u68c4\u3055\u308c\u305f\u969b\u306b\u81ea\u52d5\u7684\u306bOnCompleted\u304c\u767a\u884c\u3055\u308c\u308b\u305f\u3081\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5bff\u547d\u7ba1\u7406\u304c\u3057\u3084\u3059\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nGameObject\u304c\u7834\u68c4\u3055\u308c\u308b\u3068OnCompleted\u304c\u767a\u884c\u3055\u308c\u308b\nusing UnityEngine;\nusing UniRx;\nusing UniRx.Triggers;\n\npublic class UpdateSample : MonoBehaviour\n{\n    void Start()\n    {\n        this.UpdateAsObservable()\n            .Subscribe(\n                _ => Debug.Log(\"Update!\"), //OnNext\n                () => Debug.Log(\"OnCompleted\") //OnCompleted\n            );\n\n        // OnDestory\u3092\u53d7\u3051\u3066\u30ed\u30b0\u306b\u51fa\u3059\n        this.OnDestroyAsObservable()\n            .Subscribe(_ => Debug.Log(\"Destroy!\"));\n\n        // 1\u79d2\u5f8c\u306b\u7834\u68c4\n        Destroy(gameObject, 1.0f);\n    }\n}\n\n\n\n\uff08Destory\u6642\u306bOnCompleted\u304c\u767a\u884c\u3055\u308c\u3066\u3044\u308b\uff09\n\n\u4ed5\u7d44\u307f\nUpdateAsObservable\u306fObservableUpdateTrigger\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306b\u5b9f\u4f53\u3092\u6301\u3064\u30b9\u30c8\u30ea\u30fc\u30e0\u3067\u3059\u3002\nUpdateAsObservable\u3092\u547c\u3073\u51fa\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u8a72\u5f53\u306eGameObject\u306b\u5bfe\u3057\u3066ObservableUpdateTrigger\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092UniRx\u304c\u81ea\u52d5\u7684\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u3001\u3053\u306eObservableUpdateTrigger\u304c\u767a\u884c\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\nUpdateAsbservable\u306fObservableUpdateTrigger\u3092\u521d\u671f\u5316\u3059\u308b\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\npublic static IObservable<Unit> UpdateAsObservable(this Component component)\n{\n    if (component == null || component.gameObject == null) return Observable.Empty<Unit>();\n    return GetOrAddComponent<ObservableUpdateTrigger>(component.gameObject).UpdateAsObservable();\n}\n\n\n\nUpdateAsObservable\u306e\u672c\u4f53\nusing System; // require keep for Windows Universal App\nusing UnityEngine;\n\nnamespace UniRx.Triggers\n{\n    [DisallowMultipleComponent]\n    public class ObservableUpdateTrigger : ObservableTriggerBase\n    {\n        Subject<Unit> update;\n\n        /// <summary>Update is called every frame, if the MonoBehaviour is enabled.</summary>\n        void Update()\n        {\n            if (update != null) update.OnNext(Unit.Default);\n        }\n\n        /// <summary>Update is called every frame, if the MonoBehaviour is enabled.</summary>\n        public IObservable<Unit> UpdateAsObservable()\n        {\n            return update ?? (update = new Subject<Unit>());\n        }\n\n        protected override void RaiseOnCompletedOnDestroy()\n        {\n            if (update != null)\n            {\n                update.OnCompleted();\n            }\n        }\n    }\n}\n\n\n(\u30b3\u30fc\u30c9\u306f\u3053\u3061\u3089\u304b\u3089\u306e\u5f15\u7528)\n\n\u3053\u306e\u3088\u3046\u306b\u3001UpdateAsObservable\u306f\u547c\u3073\u51fa\u3059\u3053\u3068\u3067ObservableUpdateTrigger\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092GameObject\u306b\u8cbc\u308a\u4ed8\u3051\u3001ObservableUpdateTrigger\u3067\u5b9f\u884c\u3055\u308c\u308bUpdate()\u3092\u5185\u90e8\u306b\u6301\u3064Subject\u3092\u4f7f\u3063\u3066\u305f\u3060\u30a4\u30d9\u30f3\u30c8\u3068\u3057\u3066\u767a\u884c\u3057\u3066\u3044\u308b\u3060\u3051\u306e\u5358\u7d14\u306a\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\u3053\u3053\u3067\u6ce8\u610f\u3057\u3066\u9802\u304d\u305f\u3044\u70b9\u306f\u6b21\u306e2\u3064\u3067\u3059\u3002\n\nObservableUpdateTrigger\u3068\u3044\u3046\u8b0e\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u7a81\u7136\u5897\u3048\u3066\u3044\u3066\u3082\u3001\u305d\u308c\u304c\u6b63\u5e38\u52d5\u4f5c\u306a\u306e\u3067\u524a\u9664\u3057\u3066\u306f\u3044\u3051\u306a\u3044\n1\u500b\u306eGameObject\u3054\u3068\u306b1\u500b\u306eObservableUpdateTrigger\u3092\u5171\u6709\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u3001UpdateAsObservable\u81ea\u4f53\u3092\u5927\u91cf\u306bSubscribe\u3057\u3066\u3082\u3055\u307b\u3069\u30b3\u30b9\u30c8\u306b\u306a\u308b\u3053\u3068\u306b\u306a\u308b\u3053\u3068\u306f\u306a\u3044\n\n\u7279\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u7a81\u7136\u5897\u3048\u3066\u3044\u3066\u3082\u3001\u305d\u308c\u304c\u6b63\u5e38\u52d5\u4f5c\u306a\u306e\u3067\u524a\u9664\u3057\u3066\u306f\u3044\u3051\u306a\u3044\u3068\u3044\u3046\u70b9\u3060\u3051\u899a\u3048\u3066\u304a\u3051\u3070\u3088\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\nObservable.EveryUpdate\u3092\u5229\u7528\u3059\u308b\n\n\u4f7f\u3044\u65b9\n\u547c\u3073\u51fa\u3057\u65b9\n\n\nObservable.EveryUpdate() \u3092\u76f4\u63a5Subscribe\u3059\u308b\n\n\u767a\u884c\u3055\u308c\u308b\u578b\nlong (Subscribe\u3057\u3066\u304b\u3089\u306e\u7d4c\u904e\u30d5\u30ec\u30fc\u30e0\u6570\uff09\n\nObservable.EveryUpdate\nusing UnityEngine;\nusing UniRx;\n\npublic class UpdateSample : MonoBehaviour\n{\n    void Start()\n    {\n        Observable.EveryUpdate()\n            .Subscribe(\n                _ => Debug.Log(\"Update!\")\n            );\n    }\n}\n\n\n\u57fa\u672c\u7684\u306b\u4f7f\u3044\u65b9\u306f\u5148\u7a0b\u306eUpdateAsObservable\u3068\u540c\u3058\u3067\u3059\u3002\u3067\u3059\u304c\u3001\u4e00\u3064\u3060\u3051\u5927\u304d\u306a\u9055\u3044\u304c\u3042\u308a\u3001Observable.EveryUpdate()\u306f\u81ea\u3089OnCompleted\u3092\u767a\u884c\u3057\u307e\u305b\u3093\u3002\u3064\u307e\u308a\u3001Observable.EveryUpdate()\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u5fc5\u305a\u81ea\u5206\u3067\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5bff\u547d\u7ba1\u7406\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u4ed5\u7d44\u307f\nObservable.EveryUpdate()\u306fUniRx\u306e\u6a5f\u80fd\u306e1\u3064\u3067\u3042\u308b\u300c\u30de\u30a4\u30af\u30ed\u30b3\u30eb\u30fc\u30c1\u30f3\u300d\u3092\u5229\u7528\u3057\u3066\u52d5\u4f5c\u3057\u3066\u304a\u308a\u3001\u4ed5\u7d44\u307f\u306fUpdateAsObservable\u3068\u6bd4\u8f03\u3057\u3066\u8907\u96d1\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3059\u3054\u304f\u7c21\u6f54\u306b\u307e\u3068\u3081\u3066\u3057\u307e\u3048\u3070\u3001\u300cObservable.EveryUpdate()\u306f\u547c\u3073\u51fa\u3055\u308c\u308b\u305f\u3073\u306b\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u4e0a\u3067\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u8d77\u52d5\u3059\u308b\u300d\u3068\u3044\u3046\u52d5\u4f5c\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u624b\u52d5\u3067\u6b62\u3081\u306a\u3044\u9650\u308a\u305a\u3063\u3068\u52d5\u4f5c\u3057\u7d9a\u3051\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5bff\u547d\u7ba1\u7406\u3092\u3057\u3063\u304b\u308a\u3057\u306a\u3044\u3068\u305d\u306e2\u3067\u89e6\u308c\u305f\u3088\u3046\u306a\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\u305f\u3060\u3057\u305d\u306e\u53cd\u9762\u3001Observable.EveryUpdate()\u306b\u306f\u6b21\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u3082\u5b58\u5728\u3057\u307e\u3059\u3002\n\n\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u305f\u3081\u3001\u30b2\u30fc\u30e0\u304c\u9032\u884c\u4e2d\u305a\u3063\u3068\u5b58\u5728\u3059\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u751f\u6210\u3067\u304d\u308b\n\u5927\u91cf\u306bSubscribe\u3057\u3066\u3082\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u4f4e\u4e0b\u3057\u306a\u3044\uff08\u30de\u30a4\u30af\u30ed\u30b3\u30eb\u30fc\u30c1\u30f3\u306e\u6027\u8cea\uff09\n\n\u306a\u304a\u3001UniRx\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u306f\u300cMainThreadDispatcher\u300d\u3068\u3044\u3046GameObject\u3067\u3059\u3002UniRx\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u3044\u3064\u306e\u307e\u306b\u304b\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u3082UniRx\u306e\u52d5\u4f5c\u306b\u306f\u7d76\u5bfe\u306b\u5fc5\u8981\u306a\u305f\u3081\u3001\u52dd\u624b\u306b\u524a\u9664\u3057\u305f\u308a\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n\uff08MainThreadDispatcher\u306fUniRx\u304c\u7ba1\u7406\u30fb\u5229\u7528\u3057\u3066\u3044\u308b\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u305f\u3081\u52dd\u624b\u306b\u524a\u9664\u3057\u3066\u306f\u3044\u3051\u306a\u3044\uff09\n\nUpdateAsObservable()\u3068Observable.EveryUpdate()\u306e\u4f7f\u3044\u5206\u3051\n\u3053\u308c\u30892\u3064\u306f\u52d5\u4f5c\u3053\u305d\u4f3c\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u5185\u90e8\u5b9f\u88c5\u306f\u5927\u304d\u304f\u7570\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u305d\u308c\u305e\u308c\u306e\u52d5\u4f5c\u306e\u4ed5\u7d44\u307f\u3092\u3057\u3063\u304b\u308a\u3068\u628a\u63e1\u3057\u3001\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u306b\u5fdc\u3058\u3066\u9069\u5207\u306a\u65b9\u3092\u5229\u7528\u3059\u308b\u3068\u3088\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n\nUpdateAsObservable() : GameObject\u304c\u7834\u68c4\u3055\u308c\u305f\u3089\u52dd\u624b\u306b\u6b62\u307e\u308b\n\nObservabye.EveryUpdate() : \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u826f\u3044\u3051\u3069Dispose\u3092\u624b\u52d5\u3067\u884c\u3046\u5fc5\u8981\u304c\u3042\u308b\n\n\nUpdateAsObservable\u3092\u4f7f\u3046\u3068\u3088\u3055\u305d\u3046\u306a\u5834\u6240\n\n\nGameObject\u306b\u7d10\u4ed8\u3044\u305f\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u5229\u7528\u3059\u308b\n\nOnDestory\u6642\u306bOnCompleted\u304c\u767a\u884c\u3055\u308c\u308b\u305f\u3081\u5bff\u547d\u7ba1\u7406\u304c\u697d\u306b\u306a\u308b\u305f\u3081\n\n\n\nObservable.EveryUpdate()\u3092\u4f7f\u3046\u3068\u3088\u3055\u305d\u3046\u306a\u5834\u5408\n\n\nGameObject\u3092\u5229\u7528\u3057\u306a\u3044Pure\u306aclass\u3067Update\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3057\u305f\u3044\u3068\u304d\n\n\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u7d4c\u7531\u3067Update\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u305f\u3081\u3001MonoBehaviour\u3092\u7d99\u627f\u3057\u306a\u304f\u3066\u3082Update\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3067\u304d\u308b\n\n\n\n\u30b2\u30fc\u30e0\u4e2d\u3067\u5e38\u306b\u5b58\u5728\u3057\u3066\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u6e96\u5099\u3057\u305f\u3044\u3068\u304d\n\n \u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081OnCompleted\u304c\u52dd\u624b\u306b\u767a\u884c\u3055\u308c\u306a\u3044\u305f\u3081\n \u53c2\u8003: UniRx\u3067FPS\u30ab\u30a6\u30f3\u30bf\u3092\u4f5c\u3063\u3066\u307f\u308b\n\n\n\n\n\u5927\u91cf\u306bUpdate()\u547c\u3073\u51fa\u3057\u304c\u5fc5\u8981\u306b\u306a\u3063\u305f\u3068\u304d\n\n\u7d20\u306eUpdate()\u547c\u3073\u51fa\u3057\u3088\u308a\u5727\u5012\u7684\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u51fa\u308b\u305f\u3081\n\n\n\n\n\u6b63\u76f4\u306a\u3068\u3053\u308d\u3001\u3069\u3063\u3061\u3092\u4f7f\u3046\u3079\u304d\u304b\u306f\u597d\u307f\u306e\u554f\u984c\u3060\u3063\u305f\u308a\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002Observable.EveryUpdate()\u306e\u65b9\u304c\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u51fa\u308b\u306e\u3067\u3059\u304c\u3001Dispose\u3057\u5fd8\u308c\u305f\u3068\u304d\u306e\u4e8b\u6545\u304c\u3084\u306f\u308a\u6016\u3044\u3068\u3044\u3046\u306e\u304c\u3042\u308a\u307e\u3059\u3002\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u6b62\u307e\u308b\u306a\u3089\u307e\u3060\u826f\u304f\u3066\u3001\u4e00\u756a\u6016\u3044\u306e\u306f\u30a8\u30e9\u30fc\u3082\u51fa\u3055\u3059\u306b\u88cf\u3067\u305a\u3063\u3068\u52d5\u304d\u7d9a\u3051\u3066\u3057\u307e\u3046\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\u6c17\u3065\u3044\u305f\u3089\u30b4\u30df\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u88cf\u3067\u5927\u91cf\u306b\u8d70\u308a\u3063\u3071\u306a\u3057\u3060\u3063\u305f\u307f\u305f\u3044\u306a\u3002\n\u306a\u306e\u3067\u3001\u3044\u304f\u3089\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5dee\u304c\u3042\u308b\u3068\u8a00\u3063\u3066\u3082\u3001\u305d\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5dee\u304c\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306b\u30b2\u30fc\u30e0\u306e\u52d5\u4f5c\u306b\u5f71\u97ff\u3059\u308b\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u3063\u3066\u6ec5\u591a\u306b\u306a\u3044\uff08\u81a8\u5927\u306a\u91cf\u306eGameObject\u3092\u540c\u6642\u306b\u751f\u6210\u3057\u3066\u52d5\u304b\u3057\u305f\u3068\u304d\u3068\u304b\uff1f\uff09\u306e\u3067\u3001\u500b\u4eba\u7684\u306b\u306f\u3088\u308a\u5b89\u5168\u306aUpdateAsObservable()\u304b\u3089\u4f7f\u3044\u59cb\u3081\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002\n\n2.Update\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u30e1\u30ea\u30c3\u30c8\nUniRx\u3092\u5229\u7528\u3059\u308b\u3079\u304d\u7406\u7531\u306e1\u3064\u304c\u3053\u306e\u300cUpdate\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3067\u304d\u308b\u300d\u3068\u3044\u3046\u70b9\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u3092\u4eab\u53d7\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nUniRx\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u3092\u5229\u7528\u3057\u3066\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\u30ed\u30b8\u30c3\u30af\u306e\u51e6\u7406\u5358\u4f4d\u304c\u660e\u78ba\u306b\u306a\u308b\n\n\n\u30aa\u30da\u30ec\u30fc\u30bf\u3092\u5229\u7528\u3057\u305f\u30ed\u30b8\u30c3\u30af\u306e\u8a18\u8ff0\nUniRx\u306f\u6642\u9593\u306b\u95a2\u4fc2\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u591a\u6570\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001UniRx\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u3067\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8ff0\u3057\u3066\u3057\u307e\u3048\u3070\u6642\u9593\u304c\u95a2\u4fc2\u3059\u308b\u30ed\u30b8\u30c3\u30af\u3092\u7c21\u6f54\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u3044\u308b\u9593\u4e00\u5b9a\u9593\u9694\u3067\u653b\u6483\u3059\u308b\u3068\u3044\u3046\u51e6\u7406\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u3044\u308b\u9593\u4e00\u5b9a\u9593\u9694\u3067\u653b\u6483\u3059\u308b\u3001\u3068\u3044\u3046\u306e\u306f\u4f8b\u3048\u3070\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u306e\u5f3e\u306e\u767a\u5c04\u306a\u3069\u3067\u5229\u7528\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u300c\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u7d9a\u3051\u3066\u3044\u308b\u9593n\u79d2\u3054\u3068\u306b\u5f3e\u3092\u767a\u5c04\u3059\u308b\u300d\u3068\u3044\u3063\u305f\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\u3053\u308c\u3092UniRx\u3092\u5229\u7528\u305b\u305a\u306b\u5b9f\u88c5\u3057\u305f\u5834\u5408\u3001\u6700\u5f8c\u306b\u5b9f\u884c\u3057\u305f\u6642\u523b\u3092\u8a18\u9332\u3057\u3066\u6bce\u30d5\u30ec\u30fc\u30e0\u6bd4\u8f03\u3059\u308b\u306a\u3069\u7169\u96d1\u3067\u9762\u5012\u304f\u3055\u3044\u5b9f\u88c5\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u3067\u3059\u304c\u3001UniRx\u3092\u4f7f\u3046\u3068\u6b21\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u4e00\u5b9a\u9593\u9694\u3067\u653b\u6483\u3059\u308b\nusing System;\nusing UniRx;\nusing UniRx.Triggers;\nusing UnityEngine;\n\npublic class UpdateSample : MonoBehaviour\n{\n    //\u5b9f\u884c\u9593\u9694\n    [SerializeField]\n    private float intervalSeconds = 0.25f;\n\n    void Start()\n    {\n        // ThrottleFirst\u306f\u6700\u5f8c\u306b\u5b9f\u884c\u3057\u3066\u304b\u3089\n        // \u4e00\u5b9a\u6642\u9593OnNext\u3092\u906e\u65ad\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30bf\n        this.UpdateAsObservable()\n            .Where(_ => Input.GetKey(KeyCode.Z))\n            .ThrottleFirst(TimeSpan.FromSeconds(intervalSeconds))\n            .Subscribe(_ => Attack());\n    }\n\n    void Attack()\n    {\n        Debug.Log(\"Attack\");\n    }\n}\n\n\n\u3053\u306e\u3088\u3046\u306bUniRx\u3092\u4f7f\u3046\u3068\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3078\u306e\u7169\u96d1\u306a\u51e6\u7406\u3092LINQ\u3067\u7c21\u6f54\u306b\u66f8\u304f\u306e\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u30b2\u30fc\u30e0\u30ed\u30b8\u30c3\u30af\u3092\u5ba3\u8a00\u7684\u306b\u7c21\u6f54\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30ed\u30b8\u30c3\u30af\u304c\u660e\u78ba\u306b\u306a\u308b\nUnity\u3067\u958b\u767a\u3092\u9032\u3081\u3066\u308b\u3068\u3001Update()\u5185\u306b\u306f\u30b2\u30fc\u30e0\u30ed\u30b8\u30c3\u30af\u304c\u8a70\u3081\u8fbc\u307e\u308c\u3001\u3050\u3061\u3083\u3050\u3061\u3083\u306b\u306a\u3063\u3066\u3044\u304f\u3053\u3068\u5834\u5408\u304c\u307b\u3068\u3093\u3069\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u308c\u3082UniRx\u3092\u4f7f\u3046\u3053\u3068\u3067\u6574\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u79fb\u52d5\u30fb\u30b8\u30e3\u30f3\u30d7\u30fb\u7740\u5730\u52b9\u679c\u97f3\u306e\u518d\u751f\u3092\u3059\u308b\u30ed\u30b8\u30c3\u30af\u306e\u4f8b\n\u79fb\u52d5\u30fb\u30b8\u30e3\u30f3\u30d7\u30fb\u7740\u5730\u6642\u306b\u52b9\u679c\u97f3\u306e\u518d\u751f\u3092\u884c\u3046\u3068\u3044\u3046\u30ed\u30b8\u30c3\u30af\u3092UniRx\u3092\u4f7f\u3063\u305f\u5834\u5408\u3068\u4f7f\u308f\u306a\u304b\u3063\u305f\u5834\u5408\u3067\u8a18\u8ff0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nUniRx\u3092\u4f7f\u308f\u305a\u306b\u30ed\u30b8\u30c3\u30af\u3092\u66f8\u304f\nusing System;\nusing UnityEngine;\n\npublic class Sample : MonoBehaviour\n{\n    private CharacterController characterController;\n\n    //\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\n    private bool isJumping;\n\n    void Start()\n    {\n        characterController = GetComponent<CharacterController>();\n    }\n\n    void Update()\n    {\n        if (!isJumping)\n        {\n            var inputVector = new Vector3(\n                Input.GetAxis(\"Horizontal\"),\n                0,\n                Input.GetAxis(\"Vertical\")\n            );\n\n            if (inputVector.magnitude > 0.1f)\n            {\n                var dir = inputVector.normalized;\n                Move(dir);\n            }\n            if (Input.GetKeyDown(KeyCode.Space) && characterController.isGrounded)\n            {\n                Jump();\n                isJumping = true;\n            }\n        }\n        else\n        {\n            if (characterController.isGrounded)\n            {\n                isJumping = false;\n                PlaySoundEffect();\n            }\n        }\n\n\n    }\n\n    void Jump()\n    {\n        //Jump\u51e6\u7406\n    }\n\n    void PlaySoundEffect()\n    {\n        //\u52b9\u679c\u97f3\u306e\u518d\u751f\n    }\n\n    void Move(Vector3 direction)\n    {\n        //\u79fb\u52d5\u51e6\u7406\n    }\n}\n\n\n\nUniRx\u3092\u4f7f\u3063\u3066\u30ed\u30b8\u30c3\u30af\u3092\u66f8\u304f\nusing System;\nusing UniRx;\nusing UniRx.Triggers;\nusing UnityEngine;\n\npublic class Sample : MonoBehaviour\n{\n    private CharacterController characterController;\n\n    //\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\n    private BoolReactiveProperty isJumping = new BoolReactiveProperty();\n\n    void Start()\n    {\n        characterController = GetComponent<CharacterController>();\n\n        //\u30b8\u30e3\u30f3\u30d7\u4e2d\u3067\u306a\u3051\u308c\u3070\u79fb\u52d5\u3059\u308b\n        this.UpdateAsObservable()\n            .Where(_ => !isJumping.Value)\n            .Select(_ => new Vector3(Input.GetAxis(\"Horizontal\"), 0, Input.GetAxis(\"Vertical\")))\n            .Where(x => x.magnitude > 0.1f)\n            .Subscribe(x => Move(x.normalized));\n\n        //\u30b8\u30e3\u30f3\u30d7\u4e2d\u3067\u306a\u3044\u306a\u3089\u30b8\u30e3\u30f3\u30d7\u3059\u308b\n        this.UpdateAsObservable()\n            .Where(_ => Input.GetKeyDown(KeyCode.Space) && !isJumping.Value && characterController.isGrounded)\n            .Subscribe(_ =>\n            {\n                Jump();\n                isJumping.Value = true;\n            });\n\n        //\u7740\u5730\u30d5\u30e9\u30b0\u304c\u5909\u5316\u3057\u305f\u3068\u304d\u306b\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\u3092\u623b\u3059\n        characterController\n            .ObserveEveryValueChanged(x => x.isGrounded)\n            .Where(x => x && isJumping.Value)\n            .Subscribe(_ => isJumping.Value = false)\n            .AddTo(gameObject);\n\n        //\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\u304cfalse\u306b\u306a\u3063\u305f\u3089\u52b9\u679c\u97f3\u3092\u9cf4\u3089\u3059\n        isJumping.Where(x => !x)\n            .Subscribe(_ => PlaySoundEffect());\n    }\n\n    void Jump()\n    {\n        //Jump\u51e6\u7406\n    }\n\n    void PlaySoundEffect()\n    {\n        //\u52b9\u679c\u97f3\u306e\u518d\u751f\n    }\n\n    void Move(Vector3 direction)\n    {\n        //\u79fb\u52d5\u51e6\u7406\n    }\n}\n\n\n\u4e0a\u8a182\u3064\u3092\u6bd4\u8f03\u3057\u3066\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\nUniRx\u3092\u4f7f\u308f\u306a\u304b\u3063\u305f\u5834\u5408\u3001Update\u5185\u306b\u51e6\u7406\u3092\u8907\u6570\u306e\u51e6\u7406\u3092\u307e\u3068\u3081\u3066\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081if\u6587\u306b\u3088\u308a\u30cd\u30b9\u30c8\u304c\u767a\u751f\u3057\u305f\u308a\u3001\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u304c\u66d6\u6627\u306b\u306a\u308b\u306a\u3069\u306e\u554f\u984c\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u3067\u3059\u304c\u3001UniRx\u3092\u4f7f\u3063\u3066Update\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3057\u305f\u5834\u5408\u3001\u30ed\u30b8\u30c3\u30af\u5358\u4f4d\u3067\u51e6\u7406\u3092\u5206\u5272\u3057\u4e26\u3079\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u3001\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u3082\u30b9\u30c8\u30ea\u30fc\u30e0\u5185\u306b\u9589\u3058\u305f\u5b9f\u88c5\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\u3053\u306e\u3088\u3046\u306b\u3001Update\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3059\u308b\u3053\u3068\u3067\u51e6\u7406\u3092\u9069\u5207\u306a\u5358\u4f4d\u3067\u533a\u5207\u3063\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u3001\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u3082\u660e\u78ba\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u306a\u304a\u3001ObserveEveryValueChanged\u306b\u3064\u3044\u3066\u306f\u672b\u5c3e\u306e\u88dc\u8db3\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\n3.\u307e\u3068\u3081\nUpdate()\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\u306f2\u3064\u3042\u308b\n\n\u666e\u901a\u4f7f\u3046\u306e\u306fUpdateAsObservable()\u3067\u3088\u3044\n\u7279\u6b8a\u306a\u7528\u9014\u306e\u5834\u5408\u306bObservable.EveryUpdate()\u3092\u4f7f\u3046\u3079\u304d\n\nUpdate()\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u3068\u30ed\u30b8\u30c3\u30af\u304c\u8a18\u8ff0\u3057\u3084\u3059\u304f\u306a\u308b\n\nUniRx\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u305d\u306e\u307e\u307e\u30b2\u30fc\u30e0\u30ed\u30b8\u30c3\u30af\u306b\u6d41\u7528\u3067\u304d\u308b\n\u51e6\u7406\u3092\u5ba3\u8a00\u7684\u306b\u3001\u7c21\u6f54\u306b\u8aad\u307f\u3084\u3059\u304f\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\n\n4.\u88dc\u8db3\n\nObserveEveryValueChanged\u306b\u3064\u3044\u3066\n\nObserveEveryValueChanged\u306b\u3064\u3044\u3066\nvar charcterController = GetComponent<CharacterController>();\n\n//CharacterController\u306eIsGrounded\u3092\u76e3\u8996\n//false \u2192 true\u306b\u306a\u3063\u305f\u3089\u30ed\u30b0\u306b\u51fa\u3059\ncharcterController\n    .ObserveEveryValueChanged(c => c.isGrounded)\n    .Where(x => x)\n    .Subscribe(_ => Debug.Log(\"\u7740\u5730!\"))\n    .AddTo(gameObject);\n\n// \u2191\u306e\u30b3\u30fc\u30c9\u306f\u2193\u3068\u307b\u307c\u540c\u7fa9\nObservable.EveryUpdate()\n    .Select(_=>charcterController.isGrounded)\n    .DistinctUntilChanged()\n    .Where(x=>x)\n    .Subscribe(_ => Debug.Log(\"\u7740\u5730!\"))\n    .AddTo(gameObject);\n\n\n\u524d\u56de\u3001 ObserveEveryValueChanged\u306f\u3001Observable.EveryUpdate + Select + DistinctUntilChanged\u306e\u7701\u7565\u8a18\u6cd5\u76f8\u5f53\u3067\u3042\u308b\u3068\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\u5b9f\u306f\u3053\u306e\u8aac\u660e\u306f\u5fae\u5999\u306b\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\nObserveEveryValueChanged\u306f\u76e3\u8996\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5f31\u53c2\u7167(WeakReference)\u3067\u53c2\u7167\u3057\u307e\u3059\u3002\u3064\u307e\u308a\u3001 ObserveEveryValueChanged\u3067\u306e\u76e3\u8996\u306fGC\u306e\u53c2\u7167\u30ab\u30a6\u30f3\u30c8\u306b\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u307e\u305b\u3093\u3002 \u307e\u305f\u3001ObserveEveryValueChanged\u306f\u76e3\u8996\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304cGC\u306b\u56de\u53ce\u3055\u308c\u308b\u3068OnCompleted\u3092\u81ea\u52d5\u7684\u306b\u767a\u884c\u3057\u307e\u3059\u3002\n\u3053\u306e\u70b9\u306b\u6ce8\u610f\u3057\u3066ObserveEveryValueChanged\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n[UniRx\u5165\u9580\u30b7\u30ea\u30fc\u30ba \u76ee\u6b21\u306f\u3053\u3061\u3089](http://qiita.com/toRisouP/items/00b8a5bb8e7b68e0686c)\n\n----\n\n\n#0.\u524d\u56de\u306e\u304a\u3055\u3089\u3044\n\n\u524d\u56de\u306f\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u69cb\u7bc9\u65b9\u6cd5\u3092\u3044\u304f\u3064\u304b\u7d39\u4ecb\u3057\u307e\u3057\u305f\u3002\u4eca\u56de\u306f\u3082\u3063\u3068\u5b9f\u7528\u6027\u306e\u9ad8\u3044\u300cUpdate\u3092\u5909\u63db\u3059\u308b\u65b9\u6cd5\u300d\u306b\u7126\u70b9\u3092\u7d5e\u3063\u3066\u8aac\u660e\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3053\u306e\u8a18\u4e8b\u3067\u89e6\u308c\u308b\u5185\u5bb9\u306f\u904e\u53bb\u306b\u66f8\u3044\u305f [\u3010UniRx\u3011Update()\u3092Observable\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5](http://qiita.com/toRisouP/items/972b97367df12c3457d2) \u306b\u3064\u3044\u3066\u66f8\u304d\u76f4\u3057\u305f\u5185\u5bb9\u306b\u306a\u308a\u307e\u3059\u3002\n\n#1.Update()\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\n\nUnity\u306eUpdate()\u30b3\u30fc\u30eb\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\u306f2\u3064\u304b\u3042\u308a\u307e\u3059\u3002\n\n * UniRx.Triggers\u306eUpdateAsObservable\u3092\u5229\u7528\u3059\u308b\n * Observable.EveryUpdate\u3092\u5229\u7528\u3059\u308b\n\n\n\u4e0a\u8a182\u3064\u306f\u4f7f\u3044\u65b9\u3084\u52d5\u4f5c\u81ea\u4f53\u306f\u4f3c\u3066\u3044\u307e\u3059\u304c\u3001\u5185\u90e8\u5b9f\u88c5\u304c\u5927\u304d\u304f\u7570\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u307e\u305a\u306f\u305d\u308c\u305e\u308c\u306e\u4f7f\u3044\u65b9\u3068\u4ed5\u7d44\u307f\u3092\u89e3\u8aac\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n## UniRx.Triggers\u306eUpdateAsObservable\u3092\u5229\u7528\u3059\u308b\n\n###\u4f7f\u3044\u65b9\n\n**\u547c\u3073\u51fa\u3057\u65b9**\n\n1. `using UniRx.Triggers;` \u3092\u8ffd\u52a0\n2. `this.UpdateAsObservable()` \u3092\u547c\u3073\u51fa\u3059\n\n**\u767a\u884c\u3055\u308c\u308b\u578b**\nUnit\n\n```csharp:UpdateAsObservable\nusing UnityEngine;\nusing UniRx;\nusing UniRx.Triggers; //\u3053\u306eusing\u304c\u5fc5\u8981\n\npublic class UpdateSample : MonoBehaviour\n{\n    void Start()\n    {\n        // UpdateAsObservable\u306fComponent\u306b\u5bfe\u3059\u308b\n        // \u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u547c\u3073\u51fa\u3059\u969b\u306f\n        // \"this.\"\u304c\u5fc5\u8981\n        this.UpdateAsObservable()\n            .Subscribe(_ => Debug.Log(\"Update!\"));\n    }\n}\n```\n\n\u4ee5\u4e0a\u3067Update\u30a4\u30d9\u30f3\u30c8\u3092UniRx\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3057\u3066\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305f\u3001 `UpdateAsObservable` \u306fGameObject\u304c\u7834\u68c4\u3055\u308c\u305f\u969b\u306b\u81ea\u52d5\u7684\u306bOnCompleted\u304c\u767a\u884c\u3055\u308c\u308b\u305f\u3081\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5bff\u547d\u7ba1\u7406\u304c\u3057\u3084\u3059\u304f\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n```csharp:GameObject\u304c\u7834\u68c4\u3055\u308c\u308b\u3068OnCompleted\u304c\u767a\u884c\u3055\u308c\u308b\nusing UnityEngine;\nusing UniRx;\nusing UniRx.Triggers;\n\npublic class UpdateSample : MonoBehaviour\n{\n    void Start()\n    {\n        this.UpdateAsObservable()\n            .Subscribe(\n                _ => Debug.Log(\"Update!\"), //OnNext\n                () => Debug.Log(\"OnCompleted\") //OnCompleted\n            );\n\n        // OnDestory\u3092\u53d7\u3051\u3066\u30ed\u30b0\u306b\u51fa\u3059\n        this.OnDestroyAsObservable()\n            .Subscribe(_ => Debug.Log(\"Destroy!\"));\n\n        // 1\u79d2\u5f8c\u306b\u7834\u68c4\n        Destroy(gameObject, 1.0f);\n    }\n}\n```\n\n![1.png](https://qiita-image-store.s3.amazonaws.com/0/47146/bda08749-d92b-1f94-ebb0-d22926f56725.png)\n\uff08Destory\u6642\u306bOnCompleted\u304c\u767a\u884c\u3055\u308c\u3066\u3044\u308b\uff09\n\n\n###\u4ed5\u7d44\u307f\n\n`UpdateAsObservable`\u306f`ObservableUpdateTrigger\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8`\u306b\u5b9f\u4f53\u3092\u6301\u3064\u30b9\u30c8\u30ea\u30fc\u30e0\u3067\u3059\u3002\n`UpdateAsObservable`\u3092\u547c\u3073\u51fa\u3057\u305f\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u8a72\u5f53\u306eGameObject\u306b\u5bfe\u3057\u3066`ObservableUpdateTrigger\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8`\u3092UniRx\u304c\u81ea\u52d5\u7684\u306b\u30a2\u30bf\u30c3\u30c1\u3057\u3001\u3053\u306eObservableUpdateTrigger\u304c\u767a\u884c\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u4ed5\u7d44\u307f\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\n```csharp:UpdateAsbservable\u306fObservableUpdateTrigger\u3092\u521d\u671f\u5316\u3059\u308b\u62e1\u5f35\u30e1\u30bd\u30c3\u30c9\npublic static IObservable<Unit> UpdateAsObservable(this Component component)\n{\n    if (component == null || component.gameObject == null) return Observable.Empty<Unit>();\n    return GetOrAddComponent<ObservableUpdateTrigger>(component.gameObject).UpdateAsObservable();\n}\n```\n\n```csharp:UpdateAsObservable\u306e\u672c\u4f53\nusing System; // require keep for Windows Universal App\nusing UnityEngine;\n\nnamespace UniRx.Triggers\n{\n    [DisallowMultipleComponent]\n    public class ObservableUpdateTrigger : ObservableTriggerBase\n    {\n        Subject<Unit> update;\n\n        /// <summary>Update is called every frame, if the MonoBehaviour is enabled.</summary>\n        void Update()\n        {\n            if (update != null) update.OnNext(Unit.Default);\n        }\n\n        /// <summary>Update is called every frame, if the MonoBehaviour is enabled.</summary>\n        public IObservable<Unit> UpdateAsObservable()\n        {\n            return update ?? (update = new Subject<Unit>());\n        }\n\n        protected override void RaiseOnCompletedOnDestroy()\n        {\n            if (update != null)\n            {\n                update.OnCompleted();\n            }\n        }\n    }\n}\n```\n(\u30b3\u30fc\u30c9\u306f[\u3053\u3061\u3089](https://github.com/neuecc/UniRx)\u304b\u3089\u306e\u5f15\u7528)\n\n![2.png](https://qiita-image-store.s3.amazonaws.com/0/47146/d2743bff-dea4-b48a-b76a-55992b85909a.png)\n\n\u3053\u306e\u3088\u3046\u306b\u3001UpdateAsObservable\u306f\u547c\u3073\u51fa\u3059\u3053\u3068\u3067`ObservableUpdateTrigger\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8`\u3092GameObject\u306b\u8cbc\u308a\u4ed8\u3051\u3001`ObservableUpdateTrigger`\u3067\u5b9f\u884c\u3055\u308c\u308bUpdate()\u3092\u5185\u90e8\u306b\u6301\u3064Subject\u3092\u4f7f\u3063\u3066\u305f\u3060\u30a4\u30d9\u30f3\u30c8\u3068\u3057\u3066\u767a\u884c\u3057\u3066\u3044\u308b\u3060\u3051\u306e\u5358\u7d14\u306a\u69cb\u9020\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n\u3053\u3053\u3067\u6ce8\u610f\u3057\u3066\u9802\u304d\u305f\u3044\u70b9\u306f\u6b21\u306e2\u3064\u3067\u3059\u3002\n\n * ObservableUpdateTrigger\u3068\u3044\u3046\u8b0e\u306e\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u7a81\u7136\u5897\u3048\u3066\u3044\u3066\u3082\u3001\u305d\u308c\u304c\u6b63\u5e38\u52d5\u4f5c\u306a\u306e\u3067\u524a\u9664\u3057\u3066\u306f\u3044\u3051\u306a\u3044\n * 1\u500b\u306eGameObject\u3054\u3068\u306b1\u500b\u306eObservableUpdateTrigger\u3092\u5171\u6709\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u3001UpdateAsObservable\u81ea\u4f53\u3092\u5927\u91cf\u306bSubscribe\u3057\u3066\u3082\u3055\u307b\u3069\u30b3\u30b9\u30c8\u306b\u306a\u308b\u3053\u3068\u306b\u306a\u308b\u3053\u3068\u306f\u306a\u3044\n\n\u7279\u306b**\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u304c\u7a81\u7136\u5897\u3048\u3066\u3044\u3066\u3082\u3001\u305d\u308c\u304c\u6b63\u5e38\u52d5\u4f5c\u306a\u306e\u3067\u524a\u9664\u3057\u3066\u306f\u3044\u3051\u306a\u3044**\u3068\u3044\u3046\u70b9\u3060\u3051\u899a\u3048\u3066\u304a\u3051\u3070\u3088\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n##Observable.EveryUpdate\u3092\u5229\u7528\u3059\u308b\n\n### \u4f7f\u3044\u65b9\n\n**\u547c\u3073\u51fa\u3057\u65b9**\n\n 1. `Observable.EveryUpdate()` \u3092\u76f4\u63a5Subscribe\u3059\u308b\n\n**\u767a\u884c\u3055\u308c\u308b\u578b**\n\nlong (Subscribe\u3057\u3066\u304b\u3089\u306e\u7d4c\u904e\u30d5\u30ec\u30fc\u30e0\u6570\uff09\n\n```csharp:Observable.EveryUpdate\nusing UnityEngine;\nusing UniRx;\n\npublic class UpdateSample : MonoBehaviour\n{\n    void Start()\n    {\n        Observable.EveryUpdate()\n            .Subscribe(\n                _ => Debug.Log(\"Update!\")\n            );\n    }\n}\n```\n\n\u57fa\u672c\u7684\u306b\u4f7f\u3044\u65b9\u306f\u5148\u7a0b\u306e`UpdateAsObservable`\u3068\u540c\u3058\u3067\u3059\u3002\u3067\u3059\u304c\u3001\u4e00\u3064\u3060\u3051\u5927\u304d\u306a\u9055\u3044\u304c\u3042\u308a\u3001**Observable.EveryUpdate()\u306f\u81ea\u3089OnCompleted\u3092\u767a\u884c\u3057\u307e\u305b\u3093\u3002**\u3064\u307e\u308a\u3001`Observable.EveryUpdate()`\u3092\u5229\u7528\u3059\u308b\u5834\u5408\u306f\u5fc5\u305a\u81ea\u5206\u3067\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5bff\u547d\u7ba1\u7406\u3092\u884c\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n### \u4ed5\u7d44\u307f\n\nObservable.EveryUpdate()\u306fUniRx\u306e\u6a5f\u80fd\u306e1\u3064\u3067\u3042\u308b\u300c\u30de\u30a4\u30af\u30ed\u30b3\u30eb\u30fc\u30c1\u30f3\u300d\u3092\u5229\u7528\u3057\u3066\u52d5\u4f5c\u3057\u3066\u304a\u308a\u3001\u4ed5\u7d44\u307f\u306fUpdateAsObservable\u3068\u6bd4\u8f03\u3057\u3066\u8907\u96d1\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3059\u3054\u304f\u7c21\u6f54\u306b\u307e\u3068\u3081\u3066\u3057\u307e\u3048\u3070\u3001\u300c**Observable.EveryUpdate()\u306f\u547c\u3073\u51fa\u3055\u308c\u308b\u305f\u3073\u306b\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u4e0a\u3067\u30b3\u30eb\u30fc\u30c1\u30f3\u3092\u8d77\u52d5\u3059\u308b**\u300d\u3068\u3044\u3046\u52d5\u4f5c\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30b3\u30eb\u30fc\u30c1\u30f3\u306f\u624b\u52d5\u3067\u6b62\u3081\u306a\u3044\u9650\u308a\u305a\u3063\u3068\u52d5\u4f5c\u3057\u7d9a\u3051\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u5bff\u547d\u7ba1\u7406\u3092\u3057\u3063\u304b\u308a\u3057\u306a\u3044\u3068[\u305d\u306e2](http://qiita.com/toRisouP/items/851087b4c990d87641e6#3%E3%82%B9%E3%83%88%E3%83%AA%E3%83%BC%E3%83%A0%E3%81%AE%E5%AF%BF%E5%91%BD%E3%81%A8subscribe%E3%81%AE%E7%B5%82%E4%BA%86%E3%82%BF%E3%82%A4%E3%83%9F%E3%83%B3%E3%82%B0)\u3067\u89e6\u308c\u305f\u3088\u3046\u306a\u554f\u984c\u3092\u5f15\u304d\u8d77\u3053\u3059\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u305f\u3060\u3057\u305d\u306e\u53cd\u9762\u3001`Observable.EveryUpdate()`\u306b\u306f\u6b21\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u3082\u5b58\u5728\u3057\u307e\u3059\u3002\n\n * **\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u305f\u3081\u3001\u30b2\u30fc\u30e0\u304c\u9032\u884c\u4e2d\u305a\u3063\u3068\u5b58\u5728\u3059\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u751f\u6210\u3067\u304d\u308b**\n * **\u5927\u91cf\u306bSubscribe\u3057\u3066\u3082\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u4f4e\u4e0b\u3057\u306a\u3044\uff08[\u30de\u30a4\u30af\u30ed\u30b3\u30eb\u30fc\u30c1\u30f3](http://neue.cc/2016/05/14_529.html)\u306e\u6027\u8cea\uff09**\n\n\n\u306a\u304a\u3001UniRx\u304c\u7ba1\u7406\u3057\u3066\u3044\u308b\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u306f\u300cMainThreadDispatcher\u300d\u3068\u3044\u3046GameObject\u3067\u3059\u3002UniRx\u3092\u4f7f\u3063\u3066\u3044\u308b\u3068\u3044\u3064\u306e\u307e\u306b\u304b\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u3042\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u3082UniRx\u306e\u52d5\u4f5c\u306b\u306f\u7d76\u5bfe\u306b\u5fc5\u8981\u306a\u305f\u3081\u3001\u52dd\u624b\u306b\u524a\u9664\u3057\u305f\u308a\u3057\u306a\u3044\u3088\u3046\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\n![3.png](https://qiita-image-store.s3.amazonaws.com/0/47146/056bf847-5bda-5f2e-31ba-daf277df8aa5.png)\n\uff08MainThreadDispatcher\u306fUniRx\u304c\u7ba1\u7406\u30fb\u5229\u7528\u3057\u3066\u3044\u308b\u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u305f\u3081\u52dd\u624b\u306b\u524a\u9664\u3057\u3066\u306f\u3044\u3051\u306a\u3044\uff09\n\n## UpdateAsObservable()\u3068Observable.EveryUpdate()\u306e\u4f7f\u3044\u5206\u3051\n\n\u3053\u308c\u30892\u3064\u306f\u52d5\u4f5c\u3053\u305d\u4f3c\u3066\u3044\u308b\u3082\u306e\u306e\u3001\u5185\u90e8\u5b9f\u88c5\u306f\u5927\u304d\u304f\u7570\u306a\u3063\u3066\u3044\u307e\u3057\u305f\u3002\u305d\u308c\u305e\u308c\u306e\u52d5\u4f5c\u306e\u4ed5\u7d44\u307f\u3092\u3057\u3063\u304b\u308a\u3068\u628a\u63e1\u3057\u3001\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u306b\u5fdc\u3058\u3066\u9069\u5207\u306a\u65b9\u3092\u5229\u7528\u3059\u308b\u3068\u3088\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n---\n\n * **UpdateAsObservable()** : GameObject\u304c\u7834\u68c4\u3055\u308c\u305f\u3089\u52dd\u624b\u306b\u6b62\u307e\u308b\n * **Observabye.EveryUpdate()** : \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u826f\u3044\u3051\u3069Dispose\u3092\u624b\u52d5\u3067\u884c\u3046\u5fc5\u8981\u304c\u3042\u308b\n\n---\n\n**UpdateAsObservable\u3092\u4f7f\u3046\u3068\u3088\u3055\u305d\u3046\u306a\u5834\u6240**\n\n * **GameObject\u306b\u7d10\u4ed8\u3044\u305f\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u5229\u7528\u3059\u308b**\n    * OnDestory\u6642\u306bOnCompleted\u304c\u767a\u884c\u3055\u308c\u308b\u305f\u3081\u5bff\u547d\u7ba1\u7406\u304c\u697d\u306b\u306a\u308b\u305f\u3081\n   \n**Observable.EveryUpdate()\u3092\u4f7f\u3046\u3068\u3088\u3055\u305d\u3046\u306a\u5834\u5408**\n\n * **GameObject\u3092\u5229\u7528\u3057\u306a\u3044Pure\u306aclass\u3067Update\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3057\u305f\u3044\u3068\u304d**\n    * \u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u7d4c\u7531\u3067Update\u30a4\u30d9\u30f3\u30c8\u3092\u53d6\u5f97\u3067\u304d\u308b\u305f\u3081\u3001MonoBehaviour\u3092\u7d99\u627f\u3057\u306a\u304f\u3066\u3082Update\u30a4\u30d9\u30f3\u30c8\u3092\u5229\u7528\u3067\u304d\u308b\n * **\u30b2\u30fc\u30e0\u4e2d\u3067\u5e38\u306b\u5b58\u5728\u3057\u3066\u52d5\u4f5c\u3057\u3066\u3044\u308b\u30b9\u30c8\u30ea\u30fc\u30e0\u3092\u6e96\u5099\u3057\u305f\u3044\u3068\u304d**\n    *  \u30b7\u30f3\u30b0\u30eb\u30c8\u30f3\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081OnCompleted\u304c\u52dd\u624b\u306b\u767a\u884c\u3055\u308c\u306a\u3044\u305f\u3081\n    *  \u53c2\u8003: [UniRx\u3067FPS\u30ab\u30a6\u30f3\u30bf\u3092\u4f5c\u3063\u3066\u307f\u308b](http://qiita.com/toRisouP/items/1d0682e7a35cdb04bc38)\n * **\u5927\u91cf\u306bUpdate()\u547c\u3073\u51fa\u3057\u304c\u5fc5\u8981\u306b\u306a\u3063\u305f\u3068\u304d**\n    * \u7d20\u306eUpdate()\u547c\u3073\u51fa\u3057\u3088\u308a\u5727\u5012\u7684\u306b\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u304c\u51fa\u308b\u305f\u3081\n\n---\n\n\u6b63\u76f4\u306a\u3068\u3053\u308d\u3001\u3069\u3063\u3061\u3092\u4f7f\u3046\u3079\u304d\u304b\u306f\u597d\u307f\u306e\u554f\u984c\u3060\u3063\u305f\u308a\u3059\u308b\u3068\u601d\u3044\u307e\u3059\u3002`Observable.EveryUpdate()`\u306e\u65b9\u304c\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306f\u51fa\u308b\u306e\u3067\u3059\u304c\u3001Dispose\u3057\u5fd8\u308c\u305f\u3068\u304d\u306e\u4e8b\u6545\u304c\u3084\u306f\u308a\u6016\u3044\u3068\u3044\u3046\u306e\u304c\u3042\u308a\u307e\u3059\u3002\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u6b62\u307e\u308b\u306a\u3089\u307e\u3060\u826f\u304f\u3066\u3001\u4e00\u756a\u6016\u3044\u306e\u306f\u30a8\u30e9\u30fc\u3082\u51fa\u3055\u3059\u306b\u88cf\u3067\u305a\u3063\u3068\u52d5\u304d\u7d9a\u3051\u3066\u3057\u307e\u3046\u30d1\u30bf\u30fc\u30f3\u3067\u3059\u3002\u6c17\u3065\u3044\u305f\u3089\u30b4\u30df\u30b9\u30c8\u30ea\u30fc\u30e0\u304c\u88cf\u3067\u5927\u91cf\u306b\u8d70\u308a\u3063\u3071\u306a\u3057\u3060\u3063\u305f\u307f\u305f\u3044\u306a\u3002\n\n\u306a\u306e\u3067\u3001\u3044\u304f\u3089\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306b\u5dee\u304c\u3042\u308b\u3068\u8a00\u3063\u3066\u3082\u3001\u305d\u306e\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u5dee\u304c\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u306b\u30b2\u30fc\u30e0\u306e\u52d5\u4f5c\u306b\u5f71\u97ff\u3059\u308b\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u3063\u3066\u6ec5\u591a\u306b\u306a\u3044\uff08\u81a8\u5927\u306a\u91cf\u306eGameObject\u3092\u540c\u6642\u306b\u751f\u6210\u3057\u3066\u52d5\u304b\u3057\u305f\u3068\u304d\u3068\u304b\uff1f\uff09\u306e\u3067\u3001\u500b\u4eba\u7684\u306b\u306f**\u3088\u308a\u5b89\u5168\u306aUpdateAsObservable()\u304b\u3089\u4f7f\u3044\u59cb\u3081\u308b\u3053\u3068\u3092\u304a\u3059\u3059\u3081\u3057\u307e\u3059\u3002**\n\n\n#2.Update\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u30e1\u30ea\u30c3\u30c8\n\nUniRx\u3092\u5229\u7528\u3059\u308b\u3079\u304d\u7406\u7531\u306e1\u3064\u304c\u3053\u306e\u300cUpdate\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3067\u304d\u308b\u300d\u3068\u3044\u3046\u70b9\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30ea\u30c3\u30c8\u3092\u4eab\u53d7\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n * **UniRx\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u3092\u5229\u7528\u3057\u3066\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b**\n * **\u30ed\u30b8\u30c3\u30af\u306e\u51e6\u7406\u5358\u4f4d\u304c\u660e\u78ba\u306b\u306a\u308b**\n \n\n## \u30aa\u30da\u30ec\u30fc\u30bf\u3092\u5229\u7528\u3057\u305f\u30ed\u30b8\u30c3\u30af\u306e\u8a18\u8ff0\n\nUniRx\u306f\u6642\u9593\u306b\u95a2\u4fc2\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u591a\u6570\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001UniRx\u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u3067\u30ed\u30b8\u30c3\u30af\u3092\u8a18\u8ff0\u3057\u3066\u3057\u307e\u3048\u3070\u6642\u9593\u304c\u95a2\u4fc2\u3059\u308b\u30ed\u30b8\u30c3\u30af\u3092\u7c21\u6f54\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u4f8b\u3048\u3070\u3001**\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u3044\u308b\u9593\u4e00\u5b9a\u9593\u9694\u3067\u653b\u6483\u3059\u308b**\u3068\u3044\u3046\u51e6\u7406\u3092\u8003\u3048\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u3044\u308b\u9593\u4e00\u5b9a\u9593\u9694\u3067\u653b\u6483\u3059\u308b\u3001\u3068\u3044\u3046\u306e\u306f\u4f8b\u3048\u3070\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u30b2\u30fc\u30e0\u306e\u5f3e\u306e\u767a\u5c04\u306a\u3069\u3067\u5229\u7528\u3067\u304d\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\u300c\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u7d9a\u3051\u3066\u3044\u308b\u9593n\u79d2\u3054\u3068\u306b\u5f3e\u3092\u767a\u5c04\u3059\u308b\u300d\u3068\u3044\u3063\u305f\u30b7\u30c1\u30e5\u30a8\u30fc\u30b7\u30e7\u30f3\u3067\u3059\u3002\n\n\u3053\u308c\u3092UniRx\u3092\u5229\u7528\u305b\u305a\u306b\u5b9f\u88c5\u3057\u305f\u5834\u5408\u3001\u6700\u5f8c\u306b\u5b9f\u884c\u3057\u305f\u6642\u523b\u3092\u8a18\u9332\u3057\u3066\u6bce\u30d5\u30ec\u30fc\u30e0\u6bd4\u8f03\u3059\u308b\u306a\u3069\u7169\u96d1\u3067\u9762\u5012\u304f\u3055\u3044\u5b9f\u88c5\u304c\u5fc5\u8981\u306b\u306a\u308a\u307e\u3059\u3002\u3067\u3059\u304c\u3001UniRx\u3092\u4f7f\u3046\u3068\u6b21\u306e\u3088\u3046\u306b\u5b9f\u88c5\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```csharp:\u4e00\u5b9a\u9593\u9694\u3067\u653b\u6483\u3059\u308b\nusing System;\nusing UniRx;\nusing UniRx.Triggers;\nusing UnityEngine;\n\npublic class UpdateSample : MonoBehaviour\n{\n    //\u5b9f\u884c\u9593\u9694\n    [SerializeField]\n    private float intervalSeconds = 0.25f;\n\n    void Start()\n    {\n        // ThrottleFirst\u306f\u6700\u5f8c\u306b\u5b9f\u884c\u3057\u3066\u304b\u3089\n        // \u4e00\u5b9a\u6642\u9593OnNext\u3092\u906e\u65ad\u3059\u308b\u30aa\u30da\u30ec\u30fc\u30bf\n        this.UpdateAsObservable()\n            .Where(_ => Input.GetKey(KeyCode.Z))\n            .ThrottleFirst(TimeSpan.FromSeconds(intervalSeconds))\n            .Subscribe(_ => Attack());\n    }\n\n    void Attack()\n    {\n        Debug.Log(\"Attack\");\n    }\n}\n```\n\n\u3053\u306e\u3088\u3046\u306bUniRx\u3092\u4f7f\u3046\u3068\u3001\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3078\u306e\u7169\u96d1\u306a\u51e6\u7406\u3092LINQ\u3067\u7c21\u6f54\u306b\u66f8\u304f\u306e\u3068\u540c\u3058\u3088\u3046\u306b\u3001\u30b2\u30fc\u30e0\u30ed\u30b8\u30c3\u30af\u3092**\u5ba3\u8a00\u7684\u306b\u7c21\u6f54\u306b\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd**\u306b\u306a\u308a\u307e\u3059\u3002\n\n## \u30ed\u30b8\u30c3\u30af\u304c\u660e\u78ba\u306b\u306a\u308b\n\nUnity\u3067\u958b\u767a\u3092\u9032\u3081\u3066\u308b\u3068\u3001Update()\u5185\u306b\u306f\u30b2\u30fc\u30e0\u30ed\u30b8\u30c3\u30af\u304c\u8a70\u3081\u8fbc\u307e\u308c\u3001\u3050\u3061\u3083\u3050\u3061\u3083\u306b\u306a\u3063\u3066\u3044\u304f\u3053\u3068\u5834\u5408\u304c\u307b\u3068\u3093\u3069\u3067\u3042\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\u305d\u308c\u3082UniRx\u3092\u4f7f\u3046\u3053\u3068\u3067\u6574\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\n### \u79fb\u52d5\u30fb\u30b8\u30e3\u30f3\u30d7\u30fb\u7740\u5730\u52b9\u679c\u97f3\u306e\u518d\u751f\u3092\u3059\u308b\u30ed\u30b8\u30c3\u30af\u306e\u4f8b\n\n\u79fb\u52d5\u30fb\u30b8\u30e3\u30f3\u30d7\u30fb\u7740\u5730\u6642\u306b\u52b9\u679c\u97f3\u306e\u518d\u751f\u3092\u884c\u3046\u3068\u3044\u3046\u30ed\u30b8\u30c3\u30af\u3092UniRx\u3092\u4f7f\u3063\u305f\u5834\u5408\u3068\u4f7f\u308f\u306a\u304b\u3063\u305f\u5834\u5408\u3067\u8a18\u8ff0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```csharp:UniRx\u3092\u4f7f\u308f\u305a\u306b\u30ed\u30b8\u30c3\u30af\u3092\u66f8\u304f\nusing System;\nusing UnityEngine;\n\npublic class Sample : MonoBehaviour\n{\n    private CharacterController characterController;\n\n    //\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\n    private bool isJumping;\n\n    void Start()\n    {\n        characterController = GetComponent<CharacterController>();\n    }\n\n    void Update()\n    {\n        if (!isJumping)\n        {\n            var inputVector = new Vector3(\n                Input.GetAxis(\"Horizontal\"),\n                0,\n                Input.GetAxis(\"Vertical\")\n            );\n\n            if (inputVector.magnitude > 0.1f)\n            {\n                var dir = inputVector.normalized;\n                Move(dir);\n            }\n            if (Input.GetKeyDown(KeyCode.Space) && characterController.isGrounded)\n            {\n                Jump();\n                isJumping = true;\n            }\n        }\n        else\n        {\n            if (characterController.isGrounded)\n            {\n                isJumping = false;\n                PlaySoundEffect();\n            }\n        }\n\n\n    }\n\n    void Jump()\n    {\n        //Jump\u51e6\u7406\n    }\n\n    void PlaySoundEffect()\n    {\n        //\u52b9\u679c\u97f3\u306e\u518d\u751f\n    }\n\n    void Move(Vector3 direction)\n    {\n        //\u79fb\u52d5\u51e6\u7406\n    }\n}\n```\n\n```csharp:UniRx\u3092\u4f7f\u3063\u3066\u30ed\u30b8\u30c3\u30af\u3092\u66f8\u304f\nusing System;\nusing UniRx;\nusing UniRx.Triggers;\nusing UnityEngine;\n\npublic class Sample : MonoBehaviour\n{\n    private CharacterController characterController;\n\n    //\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\n    private BoolReactiveProperty isJumping = new BoolReactiveProperty();\n\n    void Start()\n    {\n        characterController = GetComponent<CharacterController>();\n\n        //\u30b8\u30e3\u30f3\u30d7\u4e2d\u3067\u306a\u3051\u308c\u3070\u79fb\u52d5\u3059\u308b\n        this.UpdateAsObservable()\n            .Where(_ => !isJumping.Value)\n            .Select(_ => new Vector3(Input.GetAxis(\"Horizontal\"), 0, Input.GetAxis(\"Vertical\")))\n            .Where(x => x.magnitude > 0.1f)\n            .Subscribe(x => Move(x.normalized));\n\n        //\u30b8\u30e3\u30f3\u30d7\u4e2d\u3067\u306a\u3044\u306a\u3089\u30b8\u30e3\u30f3\u30d7\u3059\u308b\n        this.UpdateAsObservable()\n            .Where(_ => Input.GetKeyDown(KeyCode.Space) && !isJumping.Value && characterController.isGrounded)\n            .Subscribe(_ =>\n            {\n                Jump();\n                isJumping.Value = true;\n            });\n\n        //\u7740\u5730\u30d5\u30e9\u30b0\u304c\u5909\u5316\u3057\u305f\u3068\u304d\u306b\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\u3092\u623b\u3059\n        characterController\n            .ObserveEveryValueChanged(x => x.isGrounded)\n            .Where(x => x && isJumping.Value)\n            .Subscribe(_ => isJumping.Value = false)\n            .AddTo(gameObject);\n\n        //\u30b8\u30e3\u30f3\u30d7\u4e2d\u30d5\u30e9\u30b0\u304cfalse\u306b\u306a\u3063\u305f\u3089\u52b9\u679c\u97f3\u3092\u9cf4\u3089\u3059\n        isJumping.Where(x => !x)\n            .Subscribe(_ => PlaySoundEffect());\n    }\n\n    void Jump()\n    {\n        //Jump\u51e6\u7406\n    }\n\n    void PlaySoundEffect()\n    {\n        //\u52b9\u679c\u97f3\u306e\u518d\u751f\n    }\n\n    void Move(Vector3 direction)\n    {\n        //\u79fb\u52d5\u51e6\u7406\n    }\n}\n```\n\n\u4e0a\u8a182\u3064\u3092\u6bd4\u8f03\u3057\u3066\u3069\u3046\u3067\u3057\u3087\u3046\u304b\uff1f\u3000\n\nUniRx\u3092\u4f7f\u308f\u306a\u304b\u3063\u305f\u5834\u5408\u3001Update\u5185\u306b\u51e6\u7406\u3092\u8907\u6570\u306e\u51e6\u7406\u3092\u307e\u3068\u3081\u3066\u8a18\u8ff0\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u305f\u3081if\u6587\u306b\u3088\u308a\u30cd\u30b9\u30c8\u304c\u767a\u751f\u3057\u305f\u308a\u3001\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u304c\u66d6\u6627\u306b\u306a\u308b\u306a\u3069\u306e\u554f\u984c\u70b9\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\n\u3067\u3059\u304c\u3001UniRx\u3092\u4f7f\u3063\u3066Update\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3057\u305f\u5834\u5408\u3001**\u30ed\u30b8\u30c3\u30af\u5358\u4f4d\u3067\u51e6\u7406\u3092\u5206\u5272\u3057\u4e26\u3079\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd**\u306b\u306a\u308a\u3001\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u3082\u30b9\u30c8\u30ea\u30fc\u30e0\u5185\u306b\u9589\u3058\u305f\u5b9f\u88c5\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n\u3053\u306e\u3088\u3046\u306b\u3001Update\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u5316\u3059\u308b\u3053\u3068\u3067\u51e6\u7406\u3092\u9069\u5207\u306a\u5358\u4f4d\u3067\u533a\u5207\u3063\u3066\u8a18\u8ff0\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u306b\u306a\u308a\u3001\u5909\u6570\u306e\u30b9\u30b3\u30fc\u30d7\u3082\u660e\u78ba\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u306a\u304a\u3001ObserveEveryValueChanged\u306b\u3064\u3044\u3066\u306f\u672b\u5c3e\u306e\u88dc\u8db3\u3092\u5fa1\u89a7\u304f\u3060\u3055\u3044\u3002\n\n#3.\u307e\u3068\u3081\n**Update()\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u65b9\u6cd5\u306f2\u3064\u3042\u308b**\n\n * \u666e\u901a\u4f7f\u3046\u306e\u306f`UpdateAsObservable()`\u3067\u3088\u3044\n * \u7279\u6b8a\u306a\u7528\u9014\u306e\u5834\u5408\u306b`Observable.EveryUpdate()`\u3092\u4f7f\u3046\u3079\u304d\n\n**Update()\u3092\u30b9\u30c8\u30ea\u30fc\u30e0\u306b\u5909\u63db\u3059\u308b\u3068\u30ed\u30b8\u30c3\u30af\u304c\u8a18\u8ff0\u3057\u3084\u3059\u304f\u306a\u308b**\n\n * UniRx\u306e\u30aa\u30da\u30ec\u30fc\u30bf\u304c\u305d\u306e\u307e\u307e\u30b2\u30fc\u30e0\u30ed\u30b8\u30c3\u30af\u306b\u6d41\u7528\u3067\u304d\u308b\n * \u51e6\u7406\u3092\u5ba3\u8a00\u7684\u306b\u3001\u7c21\u6f54\u306b\u8aad\u307f\u3084\u3059\u304f\u8a18\u8ff0\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n\n#4.\u88dc\u8db3\n## ObserveEveryValueChanged\u306b\u3064\u3044\u3066\n\n\n```csharp:ObserveEveryValueChanged\u306b\u3064\u3044\u3066\nvar charcterController = GetComponent<CharacterController>();\n\n//CharacterController\u306eIsGrounded\u3092\u76e3\u8996\n//false \u2192 true\u306b\u306a\u3063\u305f\u3089\u30ed\u30b0\u306b\u51fa\u3059\ncharcterController\n    .ObserveEveryValueChanged(c => c.isGrounded)\n    .Where(x => x)\n    .Subscribe(_ => Debug.Log(\"\u7740\u5730!\"))\n    .AddTo(gameObject);\n\n// \u2191\u306e\u30b3\u30fc\u30c9\u306f\u2193\u3068\u307b\u307c\u540c\u7fa9\nObservable.EveryUpdate()\n    .Select(_=>charcterController.isGrounded)\n    .DistinctUntilChanged()\n    .Where(x=>x)\n    .Subscribe(_ => Debug.Log(\"\u7740\u5730!\"))\n    .AddTo(gameObject);\n```\n\u524d\u56de\u3001 `ObserveEveryValueChanged`\u306f\u3001`Observable.EveryUpdate` + `Select` + `DistinctUntilChanged`\u306e\u7701\u7565\u8a18\u6cd5\u76f8\u5f53\u3067\u3042\u308b\u3068\u8aac\u660e\u3057\u307e\u3057\u305f\u3002\u5b9f\u306f\u3053\u306e\u8aac\u660e\u306f\u5fae\u5999\u306b\u6b63\u3057\u304f\u3042\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n`ObserveEveryValueChanged`\u306f\u76e3\u8996\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092[\u5f31\u53c2\u7167(WeakReference)](https://msdn.microsoft.com/ja-jp/library/system.weakreference(v=vs.110).aspx)\u3067\u53c2\u7167\u3057\u307e\u3059\u3002\u3064\u307e\u308a\u3001 **ObserveEveryValueChanged\u3067\u306e\u76e3\u8996\u306fGC\u306e\u53c2\u7167\u30ab\u30a6\u30f3\u30c8\u306b\u30ab\u30a6\u30f3\u30c8\u3055\u308c\u307e\u305b\u3093\u3002** \u307e\u305f\u3001ObserveEveryValueChanged\u306f\u76e3\u8996\u5bfe\u8c61\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304cGC\u306b\u56de\u53ce\u3055\u308c\u308b\u3068**OnCompleted\u3092\u81ea\u52d5\u7684\u306b\u767a\u884c**\u3057\u307e\u3059\u3002\n\n\u3053\u306e\u70b9\u306b\u6ce8\u610f\u3057\u3066`ObserveEveryValueChanged`\u3092\u5229\u7528\u3059\u308b\u3068\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n", "tags": ["Unity", "UniRx"]}