{"tags": ["GoogleDrive", "Java1.7"], "context": " More than 1 year has passed since last update.\u65b0\u3057\u3044\u30cd\u30bf\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001GoogleDrive\u306b\u30c7\u30fc\u30bf\u3092\u6d41\u3057\u8fbc\u3080\u51e6\u7406\u3092\u3059\u308b\u6642\u306e\u624b\u9806\u306a\u3069\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\n\n\u524d\u63d0\n\nGoogle Developers\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3066\u304a\u304f\nGoogle Drive API, Google Drive SDK\u3092\u6709\u52b9\u306b\u3001OAuth\u3067ClientId, Client secret \u3092\u4f5c\u6210\n\u52d5\u4f5c\u78ba\u8a8d\u7528\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n\n\n\u3084\u3063\u3066\u307f\u308b\n\n\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\n\nDriveCommandLine.java\npackage sample;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Arrays;\n\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleCredential;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse;\nimport com.google.api.client.http.FileContent;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.jackson2.JacksonFactory;\nimport com.google.api.services.drive.Drive;\nimport com.google.api.services.drive.DriveScopes;\nimport com.google.api.services.drive.model.File;\n\npublic class DriveCommandLine {\n\n    private static String CLIENT_ID = \"id.apps.googleusercontent.com\";\n    private static String CLIENT_SECRET = \"key\";\n\n    private static String REDIRECT_URL = \"urn:ietf:wg:oauth:2.0:oob\";\n\n    public static void main(String[] args) throws IOException {\n\n        HttpTransport httpTransport = new NetHttpTransport();\n        JsonFactory jsonFactory = new JacksonFactory();\n\n        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n                httpTransport,\n                jsonFactory,\n                CLIENT_ID,\n                CLIENT_SECRET,\n                Arrays.asList(DriveScopes.DRIVE)\n                ).setAccessType(\"online\").setApprovalPrompt(\"auto\").build();\n\n        String url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URL).build();\n        System.out.println(\"Please open the following URL in your browser then type the autorization code:\");\n        System.out.println(\" \" + url);\n        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n        String code = br.readLine();\n\n        GoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URL).execute();\n        GoogleCredential credential = new GoogleCredential().setFromTokenResponse(response);\n\n        // \u65b0\u898f\u8a8d\u8a3cAPI\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f5c\u6210\n        Drive service = new Drive.Builder(httpTransport, jsonFactory, credential).build();\n\n        // \u30d5\u30a1\u30a4\u30eb\u3092\u633f\u5165\n        File body = new File();\n        body.setTitle(\"My document\");\n        body.setDescription(\"A test document\");\n        body.setMimeType(\"text/plain\");\n\n        java.io.File fileContent = new java.io.File(\"\u30b5\u30f3\u30d7\u30eburl/document.txt\");\n        FileContent mediaContent = new FileContent(\"text/plain\", fileContent);\n\n        File file = service.files().insert(body, mediaContent).execute();\n        System.out.println(\"File ID: \" + file.getId());\n    }\n\n}\n\n\n\npom.xml\u306e\u30b5\u30f3\u30d7\u30eb\n\npom.xml\n        <dependency>\n            <groupId>com.google.apis</groupId>\n            <artifactId>google-api-services-drive</artifactId>\n            <version>v2-rev123-1.18.0-rc</version>\n        </dependency>\n        <dependency>\n            <groupId>com.fasterxml.jackson.datatype</groupId>\n            <artifactId>jackson-datatype-guava</artifactId>\n            <version>2.3.3</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.httpcomponents</groupId>\n            <artifactId>httpclient</artifactId>\n            <version>4.3.3</version>\n        </dependency>\n        <dependency>\n            <groupId>org.apache.httpcomponents</groupId>\n            <artifactId>httpcore</artifactId>\n            <version>4.3.2</version>\n        </dependency>\n        <dependency>\n            <groupId>org.codehaus.jackson</groupId>\n            <artifactId>jackson-core-asl</artifactId>\n            <version>1.9.13</version>\n        </dependency>\n        <dependency>\n            <groupId>net.sourceforge.findbugs</groupId>\n            <artifactId>jsr305</artifactId>\n            <version>1.3.7</version>\n        </dependency>\n        <dependency>\n            <groupId>com.google.protobuf</groupId>\n            <artifactId>protobuf-java</artifactId>\n            <version>2.5.0</version>\n        </dependency>\n        <dependency>\n            <groupId>xpp3</groupId>\n            <artifactId>xpp3</artifactId>\n            <version>1.1.4c</version>\n        </dependency>\n        <dependency>\n            <groupId>com.google.http-client</groupId>\n            <artifactId>google-http-client-jackson2</artifactId>\n            <version>1.18.0-rc</version>\n        </dependency>\n\n\n\n\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3059\n\n\u5b9f\u884c\u3059\u308b\u3068\u51fa\u529b\u3055\u308c\u305fURL\u306b\u30a2\u30af\u30bb\u30b9\ninput box\u306e\u30ad\u30fc\u3092\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8cbc\u4ed8\u3051\u308c\u3070\u8a31\u5bb9\u3057\u305f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30c9\u30e9\u30a4\u30d6\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u4e0a\u304c\u3063\u3066\u3044\u308b\u306f\u305a\nPlease open the following URL in your browser then type the autorization code:\nhttps://accounts.google.com/o/oauth2/auth?access_type=online&approval_prompt=auto&client_id=id.apps.googleusercontent.com&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/drive\n\n\n\n\u3082\u3057\u6c17\u306b\u306a\u3063\u305f\u3089\u4f7f\u3063\u3066\u307f\u3066\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b\u3001\u666e\u901a\u306b\u4fbf\u5229\u306a\u306e\u3067\u3044\u3044\u611f\u3058\u3067\u3059\n\n\u6ce8\u610f\u70b9\n\njava.io.File\u3067\u6307\u5b9a\u3057\u305f\u30d1\u30b9\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u3068\u3082\u3061\u308d\u3093\u30c9\u30e9\u30a4\u30d6\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306f\u3055\u308c\u306a\u3044\u3067\u3059\nAPI\u3092\u6709\u52b9\u306b\u3057\u5fd8\u308c\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\n\n\u65b0\u3057\u3044\u30cd\u30bf\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001GoogleDrive\u306b\u30c7\u30fc\u30bf\u3092\u6d41\u3057\u8fbc\u3080\u51e6\u7406\u3092\u3059\u308b\u6642\u306e\u624b\u9806\u306a\u3069\u3092\u307e\u3068\u3081\u3066\u304a\u304d\u307e\u3059\n\n \n#\u524d\u63d0\n1. Google Developers\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u65b0\u898f\u4f5c\u6210\u3057\u3066\u304a\u304f\n2. Google Drive API, Google Drive SDK\u3092\u6709\u52b9\u306b\u3001OAuth\u3067ClientId, Client secret \u3092\u4f5c\u6210\n3. \u52d5\u4f5c\u78ba\u8a8d\u7528\u306e\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\n\n#\u3084\u3063\u3066\u307f\u308b\n##\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\n```java:DriveCommandLine.java\npackage sample;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.Arrays;\n\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleCredential;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleTokenResponse;\nimport com.google.api.client.http.FileContent;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.jackson2.JacksonFactory;\nimport com.google.api.services.drive.Drive;\nimport com.google.api.services.drive.DriveScopes;\nimport com.google.api.services.drive.model.File;\n\npublic class DriveCommandLine {\n\n\tprivate static String CLIENT_ID = \"id.apps.googleusercontent.com\";\n\tprivate static String CLIENT_SECRET = \"key\";\n\n\tprivate static String REDIRECT_URL = \"urn:ietf:wg:oauth:2.0:oob\";\n\n\tpublic static void main(String[] args) throws IOException {\n\n\t\tHttpTransport httpTransport = new NetHttpTransport();\n\t\tJsonFactory jsonFactory = new JacksonFactory();\n\n\t\tGoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n\t\t\t\thttpTransport,\n\t\t\t\tjsonFactory,\n\t\t\t\tCLIENT_ID,\n\t\t\t\tCLIENT_SECRET,\n\t\t\t\tArrays.asList(DriveScopes.DRIVE)\n\t\t\t\t).setAccessType(\"online\").setApprovalPrompt(\"auto\").build();\n\n\t\tString url = flow.newAuthorizationUrl().setRedirectUri(REDIRECT_URL).build();\n\t\tSystem.out.println(\"Please open the following URL in your browser then type the autorization code:\");\n\t\tSystem.out.println(\" \" + url);\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n\t\tString code = br.readLine();\n\n\t\tGoogleTokenResponse response = flow.newTokenRequest(code).setRedirectUri(REDIRECT_URL).execute();\n\t\tGoogleCredential credential = new GoogleCredential().setFromTokenResponse(response);\n\n\t\t// \u65b0\u898f\u8a8d\u8a3cAPI\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3092\u4f5c\u6210\n\t\tDrive service = new Drive.Builder(httpTransport, jsonFactory, credential).build();\n\n\t\t// \u30d5\u30a1\u30a4\u30eb\u3092\u633f\u5165\n\t\tFile body = new File();\n\t\tbody.setTitle(\"My document\");\n\t\tbody.setDescription(\"A test document\");\n\t\tbody.setMimeType(\"text/plain\");\n\n\t\tjava.io.File fileContent = new java.io.File(\"\u30b5\u30f3\u30d7\u30eburl/document.txt\");\n\t\tFileContent mediaContent = new FileContent(\"text/plain\", fileContent);\n\n\t\tFile file = service.files().insert(body, mediaContent).execute();\n\t\tSystem.out.println(\"File ID: \" + file.getId());\n\t}\n\n}\n```\n    \n##pom.xml\u306e\u30b5\u30f3\u30d7\u30eb\n```xml:pom.xml\n\t    <dependency>\n\t\t\t<groupId>com.google.apis</groupId>\n\t\t\t<artifactId>google-api-services-drive</artifactId>\n\t\t\t<version>v2-rev123-1.18.0-rc</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>com.fasterxml.jackson.datatype</groupId>\n\t\t\t<artifactId>jackson-datatype-guava</artifactId>\n\t\t\t<version>2.3.3</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.apache.httpcomponents</groupId>\n\t\t\t<artifactId>httpclient</artifactId>\n\t\t\t<version>4.3.3</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.apache.httpcomponents</groupId>\n\t\t\t<artifactId>httpcore</artifactId>\n\t\t\t<version>4.3.2</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>org.codehaus.jackson</groupId>\n\t\t\t<artifactId>jackson-core-asl</artifactId>\n\t\t\t<version>1.9.13</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>net.sourceforge.findbugs</groupId>\n\t\t\t<artifactId>jsr305</artifactId>\n\t\t\t<version>1.3.7</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>com.google.protobuf</groupId>\n\t\t\t<artifactId>protobuf-java</artifactId>\n\t\t\t<version>2.5.0</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>xpp3</groupId>\n\t\t\t<artifactId>xpp3</artifactId>\n\t\t\t<version>1.1.4c</version>\n\t\t</dependency>\n\t\t<dependency>\n\t\t\t<groupId>com.google.http-client</groupId>\n\t\t\t<artifactId>google-http-client-jackson2</artifactId>\n\t\t\t<version>1.18.0-rc</version>\n\t\t</dependency>\n```\n\n \n\n##\u52d5\u4f5c\u78ba\u8a8d\u3057\u307e\u3059\n\n* \u5b9f\u884c\u3059\u308b\u3068\u51fa\u529b\u3055\u308c\u305fURL\u306b\u30a2\u30af\u30bb\u30b9\n* input box\u306e\u30ad\u30fc\u3092\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u8cbc\u4ed8\u3051\u308c\u3070\u8a31\u5bb9\u3057\u305f\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30c9\u30e9\u30a4\u30d6\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u4e0a\u304c\u3063\u3066\u3044\u308b\u306f\u305a\n<pre>Please open the following URL in your browser then type the autorization code:\n https://accounts.google.com/o/oauth2/auth?access_type=online&approval_prompt=auto&client_id=id.apps.googleusercontent.com&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/drive</pre>\n\n\u3082\u3057\u6c17\u306b\u306a\u3063\u305f\u3089\u4f7f\u3063\u3066\u307f\u3066\u306f\u3069\u3046\u3067\u3057\u3087\u3046\u304b\u3001\u666e\u901a\u306b\u4fbf\u5229\u306a\u306e\u3067\u3044\u3044\u611f\u3058\u3067\u3059\n\n \n\n#\u6ce8\u610f\u70b9\n* java.io.File\u3067\u6307\u5b9a\u3057\u305f\u30d1\u30b9\u306b\u30d5\u30a1\u30a4\u30eb\u304c\u306a\u3044\u3068\u3082\u3061\u308d\u3093\u30c9\u30e9\u30a4\u30d6\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306f\u3055\u308c\u306a\u3044\u3067\u3059\n* API\u3092\u6709\u52b9\u306b\u3057\u5fd8\u308c\u308b\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3059\n"}