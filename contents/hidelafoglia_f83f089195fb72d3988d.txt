{"context": " More than 1 year has passed since last update.Ticket-Order\u306e\u30e2\u30c7\u30eb\n\nadmin.py: OrderAdminForm\n\n\u901a\u5e38\u306e\u30e2\u30c7\u30eb\u30d5\u30a9\u30fc\u30e0\n\nclass OrderAdminForm(forms.ModelForm):\n    class Meta:\n        model = Order\n        exclude = []\n\n\nadmin.py: OrderAdmin\n\nOrderAdminForm\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308b\nget_form()\nURI\u306e\u30af\u30a8\u30ea\u306b\u3044\u308c\u305f ticket_id \u304b\u3089Ticket\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\nbase_fields['ticket'].initial\u306b\u30bb\u30c3\u30c8\u3059\u308b\n\nclass OrderAdmin(admin.ModelAdmin):\n\n    form = OrderAdminForm\n\n    def get_form(self, request, obj=None, **kwargs):\n        form_class = super(OrderAdmin, self).get_form(request, obj, **kwargs)\n        ticket_id = request.REQUEST.get('ticket_id', None)\n        form_class.base_fields['ticket'].initial = ticket_id and Ticket.objects.get(id=ticket_id)\n        return form_class \n\n\ntemplates/admin/tickets/ticket/change_form.html\n\nDjango \u306e\u6a19\u6e96\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b3\u30d4\u308b\nTicket\u306e\u7de8\u96c6\u753b\u9762\u3067\u3001Order\u306e\u8ffd\u52a0\u753b\u9762\u3078\u306e\u30a2\u30f3\u30ab\u30fc\u3092\u8ffd\u52a0\u3059\u308b\n\n<a href=\"history/\">{% trans \"History\" %}</a> \u306e\u96a3\u3068\u304b\n\n<a href=\"{% url 'admin:tickets_order_add' %}?ticket_id={{ object_id }}\">\u6ce8\u6587 </a><\n\n\nTicket-Order\u306e\u30e2\u30c7\u30eb\n\n## admin.py: OrderAdminForm\n\n- \u901a\u5e38\u306e\u30e2\u30c7\u30eb\u30d5\u30a9\u30fc\u30e0\n\n~~~py\nclass OrderAdminForm(forms.ModelForm):\n    class Meta:\n        model = Order\n        exclude = []\n~~~        \n\n## admin.py: OrderAdmin\n\n- OrderAdminForm\u3092\u4f7f\u3046\u3088\u3046\u306b\u3059\u308b\n- get_form()\n- URI\u306e\u30af\u30a8\u30ea\u306b\u3044\u308c\u305f ticket_id \u304b\u3089Ticket\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\n- base_fields['ticket'].initial\u306b\u30bb\u30c3\u30c8\u3059\u308b\n\n~~~y\nclass OrderAdmin(admin.ModelAdmin):\n\n    form = OrderAdminForm\n\n    def get_form(self, request, obj=None, **kwargs):\n        form_class = super(OrderAdmin, self).get_form(request, obj, **kwargs)\n  \t    ticket_id = request.REQUEST.get('ticket_id', None)\n        form_class.base_fields['ticket'].initial = ticket_id and Ticket.objects.get(id=ticket_id)\n        return form_class \n~~~\n\n## templates/admin/tickets/ticket/change_form.html\n\n- Django \u306e\u6a19\u6e96\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3092\u30b3\u30d4\u308b\n- Ticket\u306e\u7de8\u96c6\u753b\u9762\u3067\u3001Order\u306e\u8ffd\u52a0\u753b\u9762\u3078\u306e\u30a2\u30f3\u30ab\u30fc\u3092\u8ffd\u52a0\u3059\u308b\n- `<a href=\"history/\">{% trans \"History\" %}</a>` \u306e\u96a3\u3068\u304b\n\n~~~html\n<a href=\"{% url 'admin:tickets_order_add' %}?ticket_id={{ object_id }}\">\u6ce8\u6587 </a><\n~~~\n", "tags": ["Django", "admin"]}