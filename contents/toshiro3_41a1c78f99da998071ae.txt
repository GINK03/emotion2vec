{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\nCDH5\u3067Hive(Embedded Mode)\u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n\u74b0\u5883\n\nCentOS 6.5\nCDH 5\nHive 0.12.0-cdh5.1.3\njdk 1.7.0_55\n\n\n\u69cb\u6210\n\n\n\n\u30db\u30b9\u30c8\u540d\nIP\u30a2\u30c9\u30ec\u30b9\nResourceManager\nNamenode\nNodeManager\nDatanode\nJobHistoryServer\n\n\n\n\nhadoop-master\n192.168.122.101\n\u25cb\n\u25cb\n-\n-\n\u25cb\n\n\nhadoop-master2\n192.168.122.102\n\u25cb\n\u25cb\n-\n-\n-\n\n\nhadoop-slave\n192.168.122.111\n-\n-\n\u25cb\n\u25cb\n-\n\n\nhadoop-slave2\n192.168.122.112\n-\n-\n\u25cb\n\u25cb\n-\n\n\nhadoop-slave3\n192.168.122.113\n-\n-\n\u25cb\n\u25cb\n-\n\n\nhadoop-client\n192.168.122.201\n-\n-\n-\n-\n-\n\n\n\n\u203b Hadoop\u306e\u30af\u30e9\u30b9\u30bf\u306e\u69cb\u7bc9\u65b9\u6cd5\u306f\u3001CDH5\u3067hadoop\u306e\u30af\u30e9\u30b9\u30bf\u3092\u69cb\u7bc9\u3059\u308b\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\nHive\u306e\u8a2d\u5b9a\n\u203b hadoop-client\u306bHive\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nHive\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n$ sudo yum install hive\n\n\nHive\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092HDFS\u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n$ sudo -u hdfs hadoop fs -mkdir /user/hive\n$ sudo -u hdfs hadoop fs -chown hive:hadoop /user/hive\n$ sudo -u hdfs hadoop fs ls /user/\nFound 3 items\ndrwxr-xr-x   - hdfs   hadoop          0 2014-09-20 08:09 /user/hdfs\ndrwxrwxrwt   - mapred hadoop          0 2014-09-20 05:39 /user/history\ndrwxr-xr-x   - hive   hadoop          0 2014-10-06 13:34 /user/hive\n\n\n\u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u8abf\u6574\n\n$ sudo chown hive /var/lib/hive\n$ ls -ld /var/lib/hive\ndrwxr-xr-x 3 hive root 4096 Oct  6 13:34 /var/lib/hive\n\n\n\u30c7\u30fc\u30bf\u306e\u6e96\u5099\n\u4eca\u56de\u306f\u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n$ cd /tmp\n$ curl -O http://www.post.japanpost.jp/zipcode/dl/roman/ken_all_rome.zip\n$ unzip ken_all_rome.zip\n$ nkf -S -w ken_all_rome/KEN_ALL_ROME.CSV > ken_all_rome/KEN_ALL_ROME.UTF8.CSV\n$ head ken_all_rome/KEN_ALL_ROME.UTF8.CSV\n\"0600000\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u4ee5\u4e0b\u306b\u63b2\u8f09\u304c\u306a\u3044\u5834\u5408\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"IKANIKEISAIGANAIBAAI\"\n\"0640941\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u65ed\u30b1\u4e18\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ASAHIGAOKA\"\n\"0600041\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5927\u901a\u6771\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ODORIHIGASHI\"\n\"0600042\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5927\u901a\u897f\uff08\uff11\uff5e\uff11\uff19\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ODORINISHI(1-19-CHOME)\"\n\"0640820\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5927\u901a\u897f\uff08\uff12\uff10\uff5e\uff12\uff18\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ODORINISHI(20-28-CHOME)\"\n\"0600031\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e00\u6761\u6771\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA1-JOHIGASHI\"\n\"0600001\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e00\u6761\u897f\uff08\uff11\uff5e\uff11\uff19\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA1-JONISHI(1-19-CHOME)\"\n\"0640821\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e00\u6761\u897f\uff08\uff12\uff10\uff5e\uff12\uff18\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA1-JONISHI(20-28-CHOME)\"\n\"0600032\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e8c\u6761\u6771\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA2-JOHIGASHI\"\n\"0600002\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e8c\u6761\u897f\uff08\uff11\uff5e\uff11\uff19\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA2-JONISHI(1-19-CHOME)\"\n\n\u203b \u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306f\u3001\u300cSHIFT_JIS\u300d\u3067\u3059\u304c\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u6271\u3044\u306b\u304f\u3044\u306e\u3067\u300cUTF8\u300d\u306b\u5909\u63db\u3057\u3066\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u30c7\u30fc\u30bf\u306e\u6295\u5165\n\n\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u53ca\u3073\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n$ cd /tmp\n$ sudo -u hive hive\n\nhive> create database sample;\nOK\n\nhive> show databases;\nOK\ndefault\nsample\nTime taken: 5.021 seconds, Fetched: 2 row(s)\n\nhive> use sample;\nOK\n\nhive> create table zip_all (\n    > zip string,\n    > pref string,\n    > city string,\n    > town string,\n    > pref_r string,\n    > city_r string,\n    > town_r string\n    > )\n    > row format delimited\n    > fields terminated by ','\n    > lines terminated by '\\n'\n    > ;\n\nhive> show tables;\nOK\nzip_all\nTime taken: 0.022 seconds, Fetched: 1 row(s)\n\nhive> load data local inpath '/tmp/ken_all_rome/KEN_ALL_ROME.UTF8.CSV' into table zip_all;\nCopying data from file:/tmp/ken_all_rome/KEN_ALL_ROME.UTF8.CSV\nCopying file: file:/tmp/ken_all_rome/KEN_ALL_ROME.UTF8.CSV\nLoading data to table sample.zip_all\nTable sample.zip_all stats: [num_partitions: 0, num_files: 1, num_rows: 0, total_size: 12527284, raw_data_size: 0]\nOK\nTime taken: 0.817 seconds\n\n\n\u30c7\u30fc\u30bf\u306e\u691c\u7d22\nhive> select count(*) from zip_all;\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks determined at compile time: 1\nIn order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n  set mapred.reduce.tasks=<number>\n14/10/06 15:19:14 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-19-10_668_7801925482149728044-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n14/10/06 15:19:14 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-19-10_668_7801925482149728044-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.input.dir.recursive is deprecated. Instead, use mapreduce.input.fileinputformat.input.dir.recursive\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.max.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.maxsize\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.min.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.min.split.size.per.rack is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.rack\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.min.split.size.per.node is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.node\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.reduce.tasks is deprecated. Instead, use mapreduce.job.reduces\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.reduce.tasks.speculative.execution is deprecated. Instead, use mapreduce.reduce.speculative\nExecution log at: /tmp/hive/hive_20141006151919_0ae7a324-9f85-4b3f-8036-61e18070c4bd.log\nJob running in-process (local Hadoop)\n2014-10-06 15:19:18,218 null map = 100%,  reduce = 0%\n2014-10-06 15:19:19,226 null map = 100%,  reduce = 100%\nEnded Job = job_local1780116823_0001\nExecution completed successfully\nMapredLocal task succeeded\nOK\n123699\nTime taken: 9.292 seconds, Fetched: 1 row(s)\n\nhive> select * from zip_all where pref_r = '\"TOKYO TO\"' and city_r = '\"SHIBUYA KU\"' and town_r = '\"SHIBUYA\"';\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks is set to 0 since there's no reduce operator\n14/10/06 15:22:59 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-22-56_612_8533133809152280651-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n14/10/06 15:22:59 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-22-56_612_8533133809152280651-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.input.dir.recursive is deprecated. Instead, use mapreduce.input.fileinputformat.input.dir.recursive\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.max.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.maxsize\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.min.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.min.split.size.per.rack is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.rack\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.min.split.size.per.node is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.node\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.reduce.tasks is deprecated. Instead, use mapreduce.job.reduces\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.reduce.tasks.speculative.execution is deprecated. Instead, use mapreduce.reduce.speculative\nExecution log at: /tmp/hive/hive_20141006152222_ad9fa2f4-76da-4d3b-b083-6d84a7c48ab8.log\nJob running in-process (local Hadoop)\n2014-10-06 15:23:03,607 null map = 0%,  reduce = 0%\n2014-10-06 15:23:04,617 null map = 100%,  reduce = 0%\nEnded Job = job_local2040699265_0001\nExecution completed successfully\nMapredLocal task succeeded\nOK\n\"1500002\"       \"\u6771\u4eac\u90fd\"        \"\u6e0b\u8c37\u533a\"        \"\u6e0b\u8c37\"  \"TOKYO TO\"      \"SHIBUYA KU\"    \"SHIBUYA\"\nTime taken: 8.706 seconds, Fetched: 1 row(s)\n\n\n\u53c2\u8003\n\nHive Installation\nConfiguring the Hive Metastore\nHadoop\uff0bHive\u691c\u8a3c\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u307f\u308b (1/3)\nSQL\u30e9\u30a4\u30af\u306bHadoop Hive\u3092\u4f7f\u3044\u5012\u3059! (1/3)\n\n\n## \u306f\u3058\u3081\u306b\n\nCDH5\u3067Hive(Embedded Mode)\u3092\u5229\u7528\u3059\u308b\u65b9\u6cd5\u3092\u8a18\u8ff0\u3057\u307e\u3059\u3002\n\n## \u74b0\u5883\n\n* CentOS 6.5\n* CDH 5\n* Hive 0.12.0-cdh5.1.3\n* jdk 1.7.0_55\n\n## \u69cb\u6210\n\n|\u30db\u30b9\u30c8\u540d      |IP\u30a2\u30c9\u30ec\u30b9     |ResourceManager|Namenode|NodeManager|Datanode|JobHistoryServer|\n|:-------------|:--------------|:-------------:|:------:|:---------:|:------:|:--------------:|\n|hadoop-master |192.168.122.101|\u25cb             |\u25cb      |-          |-       |\u25cb              |\n|hadoop-master2|192.168.122.102|\u25cb             |\u25cb      |-          |-       |-               |\n|hadoop-slave  |192.168.122.111|-              |-       |\u25cb         |\u25cb      |-               |\n|hadoop-slave2 |192.168.122.112|-              |-       |\u25cb         |\u25cb      |-               |\n|hadoop-slave3 |192.168.122.113|-              |-       |\u25cb         |\u25cb      |-               |\n|hadoop-client |192.168.122.201|-              |-       |-          |-       |-               |\n\n\u203b Hadoop\u306e\u30af\u30e9\u30b9\u30bf\u306e\u69cb\u7bc9\u65b9\u6cd5\u306f\u3001[CDH5\u3067hadoop\u306e\u30af\u30e9\u30b9\u30bf\u3092\u69cb\u7bc9\u3059\u308b](http://qiita.com/toshiro3/items/6e010b837246598a92ee)\u3092\u3054\u53c2\u7167\u304f\u3060\u3055\u3044\u3002\n\n## Hive\u306e\u8a2d\u5b9a\n\n\u203b hadoop-client\u306bHive\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n* Hive\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```shell\n$ sudo yum install hive\n```\n\n* Hive\u7528\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092HDFS\u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```shell\n$ sudo -u hdfs hadoop fs -mkdir /user/hive\n$ sudo -u hdfs hadoop fs -chown hive:hadoop /user/hive\n$ sudo -u hdfs hadoop fs ls /user/\nFound 3 items\ndrwxr-xr-x   - hdfs   hadoop          0 2014-09-20 08:09 /user/hdfs\ndrwxrwxrwt   - mapred hadoop          0 2014-09-20 05:39 /user/history\ndrwxr-xr-x   - hive   hadoop          0 2014-10-06 13:34 /user/hive\n```\n\n* \u30ed\u30fc\u30ab\u30eb\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u306e\u8abf\u6574\n\n```shell\n$ sudo chown hive /var/lib/hive\n$ ls -ld /var/lib/hive\ndrwxr-xr-x 3 hive root 4096 Oct  6 13:34 /var/lib/hive\n```\n\n## \u30c7\u30fc\u30bf\u306e\u6e96\u5099\n\n\u4eca\u56de\u306f\u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n```shell\n$ cd /tmp\n$ curl -O http://www.post.japanpost.jp/zipcode/dl/roman/ken_all_rome.zip\n$ unzip ken_all_rome.zip\n$ nkf -S -w ken_all_rome/KEN_ALL_ROME.CSV > ken_all_rome/KEN_ALL_ROME.UTF8.CSV\n$ head ken_all_rome/KEN_ALL_ROME.UTF8.CSV\n\"0600000\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u4ee5\u4e0b\u306b\u63b2\u8f09\u304c\u306a\u3044\u5834\u5408\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"IKANIKEISAIGANAIBAAI\"\n\"0640941\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u65ed\u30b1\u4e18\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ASAHIGAOKA\"\n\"0600041\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5927\u901a\u6771\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ODORIHIGASHI\"\n\"0600042\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5927\u901a\u897f\uff08\uff11\uff5e\uff11\uff19\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ODORINISHI(1-19-CHOME)\"\n\"0640820\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5927\u901a\u897f\uff08\uff12\uff10\uff5e\uff12\uff18\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"ODORINISHI(20-28-CHOME)\"\n\"0600031\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e00\u6761\u6771\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA1-JOHIGASHI\"\n\"0600001\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e00\u6761\u897f\uff08\uff11\uff5e\uff11\uff19\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA1-JONISHI(1-19-CHOME)\"\n\"0640821\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e00\u6761\u897f\uff08\uff12\uff10\uff5e\uff12\uff18\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA1-JONISHI(20-28-CHOME)\"\n\"0600032\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e8c\u6761\u6771\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA2-JOHIGASHI\"\n\"0600002\",\"\u5317\u6d77\u9053\",\"\u672d\u5e4c\u5e02\u3000\u4e2d\u592e\u533a\",\"\u5317\u4e8c\u6761\u897f\uff08\uff11\uff5e\uff11\uff19\u4e01\u76ee\uff09\",\"HOKKAIDO\",\"SAPPORO SHI CHUO KU\",\"KITA2-JONISHI(1-19-CHOME)\"\n```\n\n\u203b \u90f5\u4fbf\u756a\u53f7\u30c7\u30fc\u30bf\u306e\u6587\u5b57\u30b3\u30fc\u30c9\u306f\u3001\u300cSHIFT_JIS\u300d\u3067\u3059\u304c\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u6271\u3044\u306b\u304f\u3044\u306e\u3067\u300cUTF8\u300d\u306b\u5909\u63db\u3057\u3066\u4f7f\u7528\u3057\u3066\u3044\u307e\u3059\u3002\n\n## \u30c7\u30fc\u30bf\u306e\u6295\u5165\n\n* \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u53ca\u3073\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\n\n```shell\n$ cd /tmp\n$ sudo -u hive hive\n```\n\n```hive\nhive> create database sample;\nOK\n\nhive> show databases;\nOK\ndefault\nsample\nTime taken: 5.021 seconds, Fetched: 2 row(s)\n\nhive> use sample;\nOK\n\nhive> create table zip_all (\n    > zip string,\n    > pref string,\n    > city string,\n    > town string,\n    > pref_r string,\n    > city_r string,\n    > town_r string\n    > )\n    > row format delimited\n    > fields terminated by ','\n    > lines terminated by '\\n'\n    > ;\n\nhive> show tables;\nOK\nzip_all\nTime taken: 0.022 seconds, Fetched: 1 row(s)\n\nhive> load data local inpath '/tmp/ken_all_rome/KEN_ALL_ROME.UTF8.CSV' into table zip_all;\nCopying data from file:/tmp/ken_all_rome/KEN_ALL_ROME.UTF8.CSV\nCopying file: file:/tmp/ken_all_rome/KEN_ALL_ROME.UTF8.CSV\nLoading data to table sample.zip_all\nTable sample.zip_all stats: [num_partitions: 0, num_files: 1, num_rows: 0, total_size: 12527284, raw_data_size: 0]\nOK\nTime taken: 0.817 seconds\n```\n\n## \u30c7\u30fc\u30bf\u306e\u691c\u7d22\n\n```hive\nhive> select count(*) from zip_all;\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks determined at compile time: 1\nIn order to change the average load for a reducer (in bytes):\n  set hive.exec.reducers.bytes.per.reducer=<number>\nIn order to limit the maximum number of reducers:\n  set hive.exec.reducers.max=<number>\nIn order to set a constant number of reducers:\n  set mapred.reduce.tasks=<number>\n14/10/06 15:19:14 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-19-10_668_7801925482149728044-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n14/10/06 15:19:14 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-19-10_668_7801925482149728044-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.input.dir.recursive is deprecated. Instead, use mapreduce.input.fileinputformat.input.dir.recursive\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.max.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.maxsize\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.min.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.min.split.size.per.rack is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.rack\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.min.split.size.per.node is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.node\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.reduce.tasks is deprecated. Instead, use mapreduce.job.reduces\n14/10/06 15:19:14 INFO Configuration.deprecation: mapred.reduce.tasks.speculative.execution is deprecated. Instead, use mapreduce.reduce.speculative\nExecution log at: /tmp/hive/hive_20141006151919_0ae7a324-9f85-4b3f-8036-61e18070c4bd.log\nJob running in-process (local Hadoop)\n2014-10-06 15:19:18,218 null map = 100%,  reduce = 0%\n2014-10-06 15:19:19,226 null map = 100%,  reduce = 100%\nEnded Job = job_local1780116823_0001\nExecution completed successfully\nMapredLocal task succeeded\nOK\n123699\nTime taken: 9.292 seconds, Fetched: 1 row(s)\n\nhive> select * from zip_all where pref_r = '\"TOKYO TO\"' and city_r = '\"SHIBUYA KU\"' and town_r = '\"SHIBUYA\"';\nTotal MapReduce jobs = 1\nLaunching Job 1 out of 1\nNumber of reduce tasks is set to 0 since there's no reduce operator\n14/10/06 15:22:59 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-22-56_612_8533133809152280651-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.\n14/10/06 15:22:59 WARN conf.Configuration: file:/tmp/hive/hive_2014-10-06_15-22-56_612_8533133809152280651-1/-local-10002/jobconf.xml:an attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.input.dir.recursive is deprecated. Instead, use mapreduce.input.fileinputformat.input.dir.recursive\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.max.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.maxsize\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.min.split.size is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.min.split.size.per.rack is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.rack\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.min.split.size.per.node is deprecated. Instead, use mapreduce.input.fileinputformat.split.minsize.per.node\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.reduce.tasks is deprecated. Instead, use mapreduce.job.reduces\n14/10/06 15:22:59 INFO Configuration.deprecation: mapred.reduce.tasks.speculative.execution is deprecated. Instead, use mapreduce.reduce.speculative\nExecution log at: /tmp/hive/hive_20141006152222_ad9fa2f4-76da-4d3b-b083-6d84a7c48ab8.log\nJob running in-process (local Hadoop)\n2014-10-06 15:23:03,607 null map = 0%,  reduce = 0%\n2014-10-06 15:23:04,617 null map = 100%,  reduce = 0%\nEnded Job = job_local2040699265_0001\nExecution completed successfully\nMapredLocal task succeeded\nOK\n\"1500002\"       \"\u6771\u4eac\u90fd\"        \"\u6e0b\u8c37\u533a\"        \"\u6e0b\u8c37\"  \"TOKYO TO\"      \"SHIBUYA KU\"    \"SHIBUYA\"\nTime taken: 8.706 seconds, Fetched: 1 row(s)\n```\n\n## \u53c2\u8003\n\n* [Hive Installation](http://www.cloudera.com/content/cloudera/en/documentation/cdh5/latest/CDH5-Installation-Guide/cdh5ig_hive_installation.html)\n* [Configuring the Hive Metastore](http://www.cloudera.com/content/cloudera/en/documentation/cdh5/latest/CDH5-Installation-Guide/cdh5ig_hive_metastore_configure.html)\n* [Hadoop\uff0bHive\u691c\u8a3c\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u3066\u307f\u308b (1/3)](http://www.atmarkit.co.jp/ait/articles/0902/27/news129.html)\n* [SQL\u30e9\u30a4\u30af\u306bHadoop Hive\u3092\u4f7f\u3044\u5012\u3059! (1/3)](http://www.atmarkit.co.jp/ait/articles/0903/09/news094.html)\n", "tags": ["jdk1.7", "CDH5", "hive", "CentOS6"]}