{"context": " More than 1 year has passed since last update.\n\nLayer\u3084Node\u3092\u7d99\u627f\u3059\u308b\u3068\u304d\u306e\u30a2\u30ec\u3092C++\u3068\u3057\u3066\u66f8\u304d\u76f4\u3059\n\u65b0\u3057\u3044\u30b7\u30fc\u30f3\u306a\u3069\u3092\u751f\u6210\u3059\u308b\u969b\u306bcocos2d::Layer\u3084cocos2d::Node\u3092\u7d99\u627f\u3057\u3001\u305d\u306e\u5f8cCREATE_FUNC()\u306a\u308b\u30de\u30af\u30ed\u3092\u5229\u7528\u3057\u307e\u3059\u304c\u3053\u306e\u90e8\u5206\u3092C++\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u66f8\u304d\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u305f\u3060\u305d\u308c\u3060\u3051\u306e\u3053\u3068\u3067\u3059\u3002\n\u66f8\u304d\u76f4\u3057\u305f\u7d50\u679c\u304c\u3053\u308c\u2193\ntemplate< class T, class S>\nclass CocosObject {\npublic:\n  static T* create(){\n    auto object = new T();\n\n    if( object && object->S::init() && object->init() ){\n      object->autorelease();\n      return object;\n    } else {\n      delete object;\n      return nullptr;\n  }\n};\n\nclass HelloWorldScene : public CocosObject< HelloWorldScene, cocos2d::Layer > {\npublic:\n\n  // \u30b7\u30fc\u30f3\u306e\u751f\u6210\n  static cocos2d::Scene* createScene(){\n    auto scene = cocos2d::Scene::create();\n    auto layer = create();\n\n    scene->addChild( layer );\n\n    return scene;\n  }\n\n  // \u521d\u671f\u5316\n  bool init(){\n    // cocos2d::Layer->init();\u306fCocosObject\u30af\u30e9\u30b9\u3067\u3059\u308b\u305f\u3081\u8a18\u8ff0\u4e0d\u8981\n\n    return bool;\n  }\n};\n\n\u624b\u5143\u3067\u4f7f\u3063\u3066\u308b\u306f\u30c6\u30fc\u30de\u3068\u306f\u95a2\u4fc2\u306a\u3044\u90e8\u5206\u3082\u3042\u3063\u305f\u306e\u3067\u3001\u624b\u3067\u4fee\u6b63\u3057\u3066\u3044\u308b\u306e\u3067\u904e\u4e0d\u8db3\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u30b7\u30fc\u30f3\u7279\u5316\u3067\u3042\u308c\u3070createScene()\u306fCocosObject\u5074\u3078\u6301\u3063\u3066\u884c\u3051\u308b\u306e\u3067\u3082\u3063\u3068\u3059\u3063\u304d\u308a\u3068\u66f8\u3051\u307e\u3059\u306d\u3002\nP.S.\nHelloWorldScene: CocosObject<HelloWorldScene, cocos2d::layer>\n\n\u3068\u304b\u3044\u3066\u308b\u90e8\u5206\u306e\"HelloWorldScene\"\u304c\u4e8c\u56de\u3042\u308b\u306e\u304c\u5197\u9577\u3067\u7701\u7565\u3057\u305f\u3044\u3051\u3069\u66f8\u304d\u65b9\u5206\u304b\u3089\u306a\u3044\u3067\u3059\u30fb\u30fb\u30fb\u30fb\n# Layer\u3084Node\u3092\u7d99\u627f\u3059\u308b\u3068\u304d\u306e\u30a2\u30ec\u3092C++\u3068\u3057\u3066\u66f8\u304d\u76f4\u3059\n\n\u65b0\u3057\u3044\u30b7\u30fc\u30f3\u306a\u3069\u3092\u751f\u6210\u3059\u308b\u969b\u306bcocos2d::Layer\u3084cocos2d::Node\u3092\u7d99\u627f\u3057\u3001\u305d\u306e\u5f8cCREATE_FUNC()\u306a\u308b\u30de\u30af\u30ed\u3092\u5229\u7528\u3057\u307e\u3059\u304c\u3053\u306e\u90e8\u5206\u3092C++\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u66f8\u304d\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\u305f\u3060\u305d\u308c\u3060\u3051\u306e\u3053\u3068\u3067\u3059\u3002\n\n\u66f8\u304d\u76f4\u3057\u305f\u7d50\u679c\u304c\u3053\u308c\u2193\n\n```cpp\ntemplate< class T, class S>\nclass CocosObject {\npublic:\n  static T* create(){\n    auto object = new T();\n            \n    if( object && object->S::init() && object->init() ){\n      object->autorelease();\n      return object;\n    } else {\n      delete object;\n      return nullptr;\n  }\n};\n\nclass HelloWorldScene : public CocosObject< HelloWorldScene, cocos2d::Layer > {\npublic:\n\n  // \u30b7\u30fc\u30f3\u306e\u751f\u6210\n  static cocos2d::Scene* createScene(){\n    auto scene = cocos2d::Scene::create();\n    auto layer = create();\n\n    scene->addChild( layer );\n\n    return scene;\n  }\n\n  // \u521d\u671f\u5316\n  bool init(){\n    // cocos2d::Layer->init();\u306fCocosObject\u30af\u30e9\u30b9\u3067\u3059\u308b\u305f\u3081\u8a18\u8ff0\u4e0d\u8981\n\n    return bool;\n  }\n};\n```\n\n\u624b\u5143\u3067\u4f7f\u3063\u3066\u308b\u306f\u30c6\u30fc\u30de\u3068\u306f\u95a2\u4fc2\u306a\u3044\u90e8\u5206\u3082\u3042\u3063\u305f\u306e\u3067\u3001\u624b\u3067\u4fee\u6b63\u3057\u3066\u3044\u308b\u306e\u3067\u904e\u4e0d\u8db3\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\n\u30b7\u30fc\u30f3\u7279\u5316\u3067\u3042\u308c\u3070createScene()\u306fCocosObject\u5074\u3078\u6301\u3063\u3066\u884c\u3051\u308b\u306e\u3067\u3082\u3063\u3068\u3059\u3063\u304d\u308a\u3068\u66f8\u3051\u307e\u3059\u306d\u3002\n\nP.S.\n\n```cpp\nHelloWorldScene: CocosObject<HelloWorldScene, cocos2d::layer>\n```\n\u3068\u304b\u3044\u3066\u308b\u90e8\u5206\u306e\"HelloWorldScene\"\u304c\u4e8c\u56de\u3042\u308b\u306e\u304c\u5197\u9577\u3067\u7701\u7565\u3057\u305f\u3044\u3051\u3069\u66f8\u304d\u65b9\u5206\u304b\u3089\u306a\u3044\u3067\u3059\u30fb\u30fb\u30fb\u30fb\n", "tags": ["cocos2dx3.x", "C++"]}