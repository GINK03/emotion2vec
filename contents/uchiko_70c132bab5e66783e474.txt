{"context": " More than 1 year has passed since last update.Test::Mojo\u306b\u306f\u3001json\u3092\u30c6\u30b9\u30c8\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u4e3b\u306bjson_is\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001JSON\u69cb\u9020\u3092\u30dd\u30a4\u30f3\u30bf\u3067\u6307\u5b9a\u3057\u3066\u3001\u5024\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nt/base.t\n# {\"status\":\"ok\"}\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is('/status' => 'ok');\n\n\n# {\n#     \"status\":\"ok\",\n#     \"list\":[\n#         {\n#             \"id\":1,\n#             \"name\":\"\u592a\u90ce\"\n#         },\n#         {\n#             \"id\":2,\n#             \"name\":\"\u82b1\u5b50\"\n#         },\n#         {\n#             \"id\":3,\n#             \"name\":\"\u51b4\u5b50\"\n#         }\n#     ]\n# }\n$t->get_ok('/case2')\n  ->status_is(200)\n  ->json_has('/status')\n  ->json_is('/status' => 'ok')\n  ->json_is('/list/0/id' => 1)\n  ->json_is('/list/0/name' => '\u592a\u90ce')\n  ->json_is('/list/1/id' => 2)\n  ->json_is('/list/1/name' => '\u82b1\u5b50')\n  ->json_is('/list/2/id' => 3)\n  ->json_is('/list/2/name' => '\u51b4\u5b50');\n\n\nJSON\u5168\u4f53\u3092\u30c6\u30b9\u30c8\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bPerl\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nt/base.t\n# {\"status\":\"ok\"}\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is({status => 'ok'});\n\n# {\n#     \"status\":\"ok\",\n#     \"list\":[\n#         {\n#             \"id\":1,\n#             \"name\":\"\u592a\u90ce\"\n#         },\n#         {\n#             \"id\":2,\n#             \"name\":\"\u82b1\u5b50\"\n#         },\n#         {\n#             \"id\":3,\n#             \"name\":\"\u51b4\u5b50\"\n#         }\n#     ]\n# }\n$t->get_ok('/case2')\n  ->json_is({\n      status => 'ok',\n      list => [\n          {\n              id   => 1,\n              name => '\u592a\u90ce',\n          },\n          {\n              id   => 2,\n              name => '\u82b1\u5b50',\n          },\n          {\n              id   => 3,\n              name => '\u51b4\u5b50',\n          }\n      ]\n  });\n\n\n\n\u4ee5\u4e0b\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u5168\u4f53\u3067\u3059\u3002\n\nmyapp.pl\nuse Mojolicious::Lite;\nuse utf8;\n\nmy %case = (\n    case1 => {\n        status => 'ok',\n    },\n    case2 => {\n        status => 'ok',\n        list => [\n            {\n                id   => 1,\n                name => '\u592a\u90ce',\n            },\n            {\n                id   => 2,\n                name => '\u82b1\u5b50',\n            },\n            {\n                id   => 3,\n                name => '\u51b4\u5b50',\n            }\n        ],\n    },\n);\n\nget '/:case' => sub {\n  my $self = shift;\n  $self->render(\n      json => $case{$self->param('case')}\n  );\n};\n\napp->start;\n\n\n\nt/base.t\nuse strict;\nuse warnings;\nuse utf8;\nuse Test::More;\nuse Test::Mojo;\n\nuse File::Basename;\n\n$ENV{MOJO_HOME} = dirname(__FILE__) . '/../';\nrequire \"$ENV{MOJO_HOME}/myapp.pl\";\n\nmy $t = Test::Mojo->new;\n\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is({status => 'ok'});\n\n$t->get_ok('/case2')\n  ->json_is({\n      status => 'ok',\n      list => [\n          {\n              id   => 1,\n              name => '\u592a\u90ce',\n          },\n          {\n              id   => 2,\n              name => '\u82b1\u5b50',\n          },\n          {\n              id   => 3,\n              name => '\u51b4\u5b50',\n          }\n      ]\n  });\n\n\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is('/status' => 'ok');\n\n$t->get_ok('/case2')\n  ->status_is(200)\n  ->json_has('/status')\n  ->json_is('/status' => 'ok')\n  ->json_is('/list/0/id' => 1)\n  ->json_is('/list/0/name' => '\u592a\u90ce')\n  ->json_is('/list/1/id' => 2)\n  ->json_is('/list/1/name' => '\u82b1\u5b50')\n  ->json_is('/list/2/id' => 3)\n  ->json_is('/list/2/name' => '\u51b4\u5b50');\n\n\ndone_testing;\n\n\n\nTest::Mojo\u306b\u306f\u3001json\u3092\u30c6\u30b9\u30c8\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u304c\u3042\u308a\u307e\u3059\u3002\n\u4e3b\u306bjson_is\u30e1\u30bd\u30c3\u30c9\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001JSON\u69cb\u9020\u3092\u30dd\u30a4\u30f3\u30bf\u3067\u6307\u5b9a\u3057\u3066\u3001\u5024\u3092\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```pl:t/base.t\n# {\"status\":\"ok\"}\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is('/status' => 'ok');\n\n\n# {\n#     \"status\":\"ok\",\n#     \"list\":[\n#         {\n#             \"id\":1,\n#             \"name\":\"\u592a\u90ce\"\n#         },\n#         {\n#             \"id\":2,\n#             \"name\":\"\u82b1\u5b50\"\n#         },\n#         {\n#             \"id\":3,\n#             \"name\":\"\u51b4\u5b50\"\n#         }\n#     ]\n# }\n$t->get_ok('/case2')\n  ->status_is(200)\n  ->json_has('/status')\n  ->json_is('/status' => 'ok')\n  ->json_is('/list/0/id' => 1)\n  ->json_is('/list/0/name' => '\u592a\u90ce')\n  ->json_is('/list/1/id' => 2)\n  ->json_is('/list/1/name' => '\u82b1\u5b50')\n  ->json_is('/list/2/id' => 3)\n  ->json_is('/list/2/name' => '\u51b4\u5b50');\n```\n\n\nJSON\u5168\u4f53\u3092\u30c6\u30b9\u30c8\u3059\u308b\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bPerl\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3067\u30c6\u30b9\u30c8\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```pl:t/base.t\n# {\"status\":\"ok\"}\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is({status => 'ok'});\n\n# {\n#     \"status\":\"ok\",\n#     \"list\":[\n#         {\n#             \"id\":1,\n#             \"name\":\"\u592a\u90ce\"\n#         },\n#         {\n#             \"id\":2,\n#             \"name\":\"\u82b1\u5b50\"\n#         },\n#         {\n#             \"id\":3,\n#             \"name\":\"\u51b4\u5b50\"\n#         }\n#     ]\n# }\n$t->get_ok('/case2')\n  ->json_is({\n      status => 'ok',\n      list => [\n          {\n              id   => 1,\n              name => '\u592a\u90ce',\n          },\n          {\n              id   => 2,\n              name => '\u82b1\u5b50',\n          },\n          {\n              id   => 3,\n              name => '\u51b4\u5b50',\n          }\n      ]\n  });\n\n```\n\n\n\n\u4ee5\u4e0b\u3001\u30c6\u30b9\u30c8\u30b3\u30fc\u30c9\u5168\u4f53\u3067\u3059\u3002\n\n\n```pl:myapp.pl\nuse Mojolicious::Lite;\nuse utf8;\n\nmy %case = (\n    case1 => {\n        status => 'ok',\n    },\n    case2 => {\n        status => 'ok',\n        list => [\n            {\n                id   => 1,\n                name => '\u592a\u90ce',\n            },\n            {\n                id   => 2,\n                name => '\u82b1\u5b50',\n            },\n            {\n                id   => 3,\n                name => '\u51b4\u5b50',\n            }\n        ],\n    },\n);\n\nget '/:case' => sub {\n  my $self = shift;\n  $self->render(\n      json => $case{$self->param('case')}\n  );\n};\n\napp->start;\n```\n\n\n```pl:t/base.t\nuse strict;\nuse warnings;\nuse utf8;\nuse Test::More;\nuse Test::Mojo;\n\nuse File::Basename;\n\n$ENV{MOJO_HOME} = dirname(__FILE__) . '/../';\nrequire \"$ENV{MOJO_HOME}/myapp.pl\";\n\nmy $t = Test::Mojo->new;\n\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is({status => 'ok'});\n\n$t->get_ok('/case2')\n  ->json_is({\n      status => 'ok',\n      list => [\n          {\n              id   => 1,\n              name => '\u592a\u90ce',\n          },\n          {\n              id   => 2,\n              name => '\u82b1\u5b50',\n          },\n          {\n              id   => 3,\n              name => '\u51b4\u5b50',\n          }\n      ]\n  });\n\n\n$t->get_ok('/case1')\n  ->status_is(200)\n  ->json_is('/status' => 'ok');\n\n$t->get_ok('/case2')\n  ->status_is(200)\n  ->json_has('/status')\n  ->json_is('/status' => 'ok')\n  ->json_is('/list/0/id' => 1)\n  ->json_is('/list/0/name' => '\u592a\u90ce')\n  ->json_is('/list/1/id' => 2)\n  ->json_is('/list/1/name' => '\u82b1\u5b50')\n  ->json_is('/list/2/id' => 3)\n  ->json_is('/list/2/name' => '\u51b4\u5b50');\n\n\ndone_testing;\n```\n", "tags": ["mojo", "Mojolicious"]}