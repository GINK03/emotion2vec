{"context": " More than 1 year has passed since last update.js \u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u304b\u3089\u3082 msgpack \u306a\u30c7\u30fc\u30bf\u3092 werkzeug \u306a\u74b0\u5883\u306b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u9001\u308a\u307e\u3059\u305f\u3002\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\n\nninja.coffee\nsendMsgPack:(event)=>\n  event.preventDefault()\n  arr = $('#hogehogeForm').serializeArray()\n  data = msgpack.pack(arr)\n  arrayBinary = new Uint8Array(data)\n  xhr = new XMLHttpRequest()\n  xhr.open('POST', '/api/url', true)\n  xhr.onreadystatechange = ()->\n  if xhr.readyState is 4 and xhr.status is 200\n      console.log xhr.responseText\n  else if xhr.readyState is 4 and xhr.status isnt 200\n      console.log xhr, \"hogehoge\"\n  xhr.setRequestHeader('Content-Type', 'application/x-msgpack; charset=x-user-defined')\n  xhr.send(arrayBinary.buffer)\n\n\n\n\u30b5\u30fc\u30d0\u30fc\u5074\n\ntasukete.py\nimport msgpack\nfrom shimehari import Response, ApplicationController, request\nimport msgpack\n\nclass FooController(ApplicationController):\n    def __init__(self, name):\n        ApplicationController.__init__(self, name)\n\n    def index(self, *args, **kwargs):\n        return 'hidebu'\n\n    def create(self, *args, **kwargs):\n        #\u307b\u3093\u3068\u306f\u3061\u3083\u3093\u3068\u30d8\u30c3\u30c0\u898b\u3088\u3046\u306d\n        print msgpack.unpackb(request.data)\n        return Response('aaa')\n\n\n$ ({'name': 'name', 'value': 'aaaaa'},)\n\n\nmsgpack.js \u306b\u306f msgpack.upload \u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3059\u304c\n\u30e1\u30bd\u30c3\u30c9\u304c PUT \u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u306e Content-Type \u304c application/x-www-form-urlencoded \u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3057\u3066\u3001\n\u50d5\u306b\u306f\u306f\u304b\u308a\u3057\u308c\u306a\u3044\u4f55\u304b\u3092\u611f\u3058\u305f\u306e\u3067\u3068\u308a\u3042\u3048\u305a\u751f\u306e XMLHttpRequest \u3092\u4f7f\u3063\u305f\u6b21\u7b2c\u3067\u3059\u3002\njQuery.ajax \u3060\u3068 ArrayBuffer \u304c\u9001\u308c\u306a\u3044\u306e\u3067\u3060\u3081\u307d\u3067\u3059\u3002\nContent-Type \u3092 x-www-form-urlencoded \u306b\u3059\u308b\u3068\u3001\u9001\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u304c werkzeug \u306e Request.data \u3067\u306f\u306a\u304f\u3001 Request.form \u306b\u5165\u3063\u3066\u3057\u307e\u3046\u306e\u304c\u306a\u3093\u3068\u306a\u304f\u3053\u308c\u3058\u3083\u306a\u3044\u611f\u304c\u3042\u3063\u305f\u306e\u3067\u306a\u3093\u3068\u304b\u304b\u3093\u3068\u304b\u3057\u305f\u6b21\u7b2c\u3067\u3059\u3002\n\u3053\u3053\u307e\u3067\u3084\u3063\u3068\u3044\u3066\u5b9f\u969b\u306f WebSocket \u3067\u9001\u308b\u3053\u3068\u306b\u3057\u305f\u6b21\u7b2c\u3067\u3042\u308a\u307e\u3059\u3002\n\u307e\u3041 WebSocket \u4f7f\u3048\u306a\u3044\u72b6\u6cc1\u306e\u307b\u3046\u304c\u591a\u3044\u6c17\u304c\u3059\u308b\u306e\u3067\u3082\u3046\u3061\u3087\u3044\u4fbf\u5229\u306b\u30d6\u30e9\u30c3\u30b7\u30e5\u30a2\u30c3\u30d7\u3059\u308c\u3070\u4f7f\u3044\u7269\u306b\u306a\u308b\u3093\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\u3063\u3066\u3044\u3046\u304b\u7a81\u3063\u8fbc\u307f\u3069\u3053\u308d\u306f\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u8a73\u3057\u3044\u4eba\u304c\u3044\u305f\u3089\u6559\u3048\u3066\u4e0b\u3055\u3044\u3002\njs \u3067\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\u304b\u3089\u3082 msgpack \u306a\u30c7\u30fc\u30bf\u3092 werkzeug \u306a\u74b0\u5883\u306b\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u3066\u9001\u308a\u307e\u3059\u305f\u3002\n\n##\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074\n```coffeescript:ninja.coffee\nsendMsgPack:(event)=>\n  event.preventDefault()\n  arr = $('#hogehogeForm').serializeArray()\n  data = msgpack.pack(arr)\n  arrayBinary = new Uint8Array(data)\n  xhr = new XMLHttpRequest()\n  xhr.open('POST', '/api/url', true)\n  xhr.onreadystatechange = ()->\n  if xhr.readyState is 4 and xhr.status is 200\n      console.log xhr.responseText\n  else if xhr.readyState is 4 and xhr.status isnt 200\n      console.log xhr, \"hogehoge\"\n  xhr.setRequestHeader('Content-Type', 'application/x-msgpack; charset=x-user-defined')\n  xhr.send(arrayBinary.buffer)\n```\n\n##\u30b5\u30fc\u30d0\u30fc\u5074\n```python:tasukete.py\nimport msgpack\nfrom shimehari import Response, ApplicationController, request\nimport msgpack\n\nclass FooController(ApplicationController):\n    def __init__(self, name):\n        ApplicationController.__init__(self, name)\n\n    def index(self, *args, **kwargs):\n        return 'hidebu'\n\n    def create(self, *args, **kwargs):\n        #\u307b\u3093\u3068\u306f\u3061\u3083\u3093\u3068\u30d8\u30c3\u30c0\u898b\u3088\u3046\u306d\n        print msgpack.unpackb(request.data)\n        return Response('aaa')\n```\n\n```\n$ ({'name': 'name', 'value': 'aaaaa'},)\n```\n\n-----------------------------\n\nmsgpack.js \u306b\u306f `msgpack.upload` \u3068\u3044\u3046\u30e1\u30bd\u30c3\u30c9\u304c\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306a\u306e\u3067\u3059\u304c\n\u30e1\u30bd\u30c3\u30c9\u304c PUT \u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u306e Content-Type \u304c `application/x-www-form-urlencoded` \u306b\u306a\u3063\u3066\u3044\u305f\u308a\u3057\u3066\u3001\n\u50d5\u306b\u306f\u306f\u304b\u308a\u3057\u308c\u306a\u3044\u4f55\u304b\u3092\u611f\u3058\u305f\u306e\u3067\u3068\u308a\u3042\u3048\u305a\u751f\u306e XMLHttpRequest \u3092\u4f7f\u3063\u305f\u6b21\u7b2c\u3067\u3059\u3002\njQuery.ajax \u3060\u3068 ArrayBuffer \u304c\u9001\u308c\u306a\u3044\u306e\u3067\u3060\u3081\u307d\u3067\u3059\u3002\n\nContent-Type \u3092 `x-www-form-urlencoded` \u306b\u3059\u308b\u3068\u3001\u9001\u4fe1\u3057\u305f\u30c7\u30fc\u30bf\u304c werkzeug \u306e `Request.data` \u3067\u306f\u306a\u304f\u3001 `Request.form` \u306b\u5165\u3063\u3066\u3057\u307e\u3046\u306e\u304c\u306a\u3093\u3068\u306a\u304f\u3053\u308c\u3058\u3083\u306a\u3044\u611f\u304c\u3042\u3063\u305f\u306e\u3067\u306a\u3093\u3068\u304b\u304b\u3093\u3068\u304b\u3057\u305f\u6b21\u7b2c\u3067\u3059\u3002\n\n\u3053\u3053\u307e\u3067\u3084\u3063\u3068\u3044\u3066\u5b9f\u969b\u306f WebSocket \u3067\u9001\u308b\u3053\u3068\u306b\u3057\u305f\u6b21\u7b2c\u3067\u3042\u308a\u307e\u3059\u3002\n\u307e\u3041 WebSocket \u4f7f\u3048\u306a\u3044\u72b6\u6cc1\u306e\u307b\u3046\u304c\u591a\u3044\u6c17\u304c\u3059\u308b\u306e\u3067\u3082\u3046\u3061\u3087\u3044\u4fbf\u5229\u306b\u30d6\u30e9\u30c3\u30b7\u30e5\u30a2\u30c3\u30d7\u3059\u308c\u3070\u4f7f\u3044\u7269\u306b\u306a\u308b\u3093\u3067\u306f\u306a\u3044\u3067\u3057\u3087\u3046\u304b\u3002\n\n\u3063\u3066\u3044\u3046\u304b\u7a81\u3063\u8fbc\u307f\u3069\u3053\u308d\u306f\u591a\u3044\u3068\u601d\u3046\u306e\u3067\u8a73\u3057\u3044\u4eba\u304c\u3044\u305f\u3089\u6559\u3048\u3066\u4e0b\u3055\u3044\u3002", "tags": ["CoffeeScript", "Python", "Ajax", "msgpack"]}