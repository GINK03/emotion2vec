{"context": " More than 1 year has passed since last update.NGINX\u306bLet's Encrypt\u306eSSL\u8a3c\u660e\u66f8\u3092\u5165\u308c\u308b\u6642\u3001--nginx\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070\u4e00\u767a\u3067\u5b8c\u4e86\u3057\u307e\u3059\u3002\u7c21\u5358\u3059\u304e\u3002\n\n\u306f\u3058\u3081\u306b\n\u4e45\u3005\u306b\u3001\u3068\u3042\u308b\u30b5\u30fc\u30d0\u306bLet's Encrypt\u306e\u8a3c\u660e\u66f8\u3092\u5c0e\u5165\u3057\u3088\u3046\u3068\u3057\u305f\u3082\u306e\u306e\u3001\u624b\u9806\u3092\u3059\u3063\u304b\u308a\u5fd8\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\u4ee5\u524d\u81ea\u5206\u3067\u3082\u624b\u9806\u306e\u7d39\u4ecb\u30a8\u30f3\u30c8\u30ea\u3092\u66f8\u3044\u305f1\u306e\u3067\u3059\u304c\u3001\u6539\u3081\u3066\u78ba\u8a8d\u3059\u308b\u3068\u5c11\u3057\u9762\u5012\u3067\u3059\u3002\n(\u9762\u5012\u3068\u3044\u3063\u3066\u3082\u3001\u8a3c\u660e\u66f8\u306e\u767a\u884c\u3068nginx\u306e\u8a2d\u5b9a\u3060\u3051\u306a\u3093\u3067\u3059\u304c\u306d\u30fb\u30fb\u30fb)\n\u3068\u3053\u308d\u3067\u3001\u524d\u56de\u8abf\u3079\u305f\u969b\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u300c\u52d5\u304b\u306a\u3044\u300d\u3068\u660e\u8a18\u3055\u308c\u3066\u3044\u305f\u305f\u3081\u8a66\u3057\u3066\u3082\u898b\u306a\u304b\u3063\u305fnginx\u30d7\u30e9\u30b0\u30a4\u30f3(\u300c--nginx\u300d\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6709\u52b9\u5316)\u3092\u8a66\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u8a3c\u660e\u66f8\u306e\u53d6\u5f97\u304b\u3089\u8a2d\u5b9a\u307e\u3067\u5168\u3066\u3084\u3063\u3066\u304f\u308c\u307e\u3057\u305f\u3002\n\u5197\u8ac7\u3067\u306f\u306a\u304f\u672c\u5f53\u306b10\u79d2\u3082\u639b\u304b\u3089\u305a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\u307e\u3067\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\u975e\u5e38\u306b\u4fbf\u5229\u3060\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u3054\u7d39\u4ecb\u3067\u3059\u3002\n(\u3082\u3063\u3068\u3082\u3001\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u306f\u300c\u307e\u3060\u5b9f\u9a13\u7684\u6a5f\u80fd\u300d\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u4e0d\u5b89\u5b9a\u306a\u3068\u3053\u308d\u304c\u6b8b\u3063\u3066\u3044\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c)\n\n\u52d5\u4f5c\u78ba\u8a8d\u74b0\u5883\n\u30fbArchLinux (Linux 4.4.3)\n\u30fbNGINX 1.8.1\n\u30fbletsencrypt 0.4.2\n\u30fbletsencypt-nginx 0.4.2 (\u30d7\u30e9\u30b0\u30a4\u30f3)\n\n\u7c21\u5358\u306a\u307e\u3068\u3081 (TL;DR)\n\n\u691c\u8a3c\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u53d6\u5f97 letsencrypt --nginx --staging\n\n\u30d6\u30e9\u30a6\u30b6\u7b49\u3067\u52d5\u4f5c\u78ba\u8a8d\n\u672c\u756a\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u53d6\u5f97 letsencrypt --nginx\n\n\n\nletsencrypt\u30b3\u30de\u30f3\u30c9\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nArchLinux\u306e\u5834\u5408\u3067\u3059\u3002\nsudo pacman -S letsencrypt\nsudo pacman -S letsencrypt-nginx\n\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u6e96\u5099 (cli.ini)\nSSL\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3057\u3066\u3082\u3089\u3046\u30c9\u30e1\u30a4\u30f3\u540d\u306a\u3069\u3001\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u3042\u3089\u304b\u3058\u3081\n/etc/letsencrypt/cli.ini\n\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u30d0\u30e9\u30e1\u30fc\u30bf\u3092\u5168\u90e8\u6307\u5b9a\u3059\u308b\u3068\u9577\u304f\u3066\u7169\u96d1\u306a\u305f\u3081\u3002\nexample.com\u3092\u3054\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306b\u7f6e\u63db\u3057\u3066\u4e0b\u3055\u3044\n\n/etc/letsencrypt/cli.ini\nrsa-key-size = 2048\nserver = https://acme-v01.api.letsencrypt.org/directory\nemail = admin@example.com\ndomains = test.example.com\ntext = True\nwebroot-path = /var/www/html\nagree-tos = True\nrenew-by-default = True\n\n\n\n\u624b\u9806\n\u30eb\u30fc\u30c8\u3067\u4f5c\u696d\u3057\u307e\u3059\u3002\n% sudo -i\n[root@vultr-server-01 ~]# \n\nNGINX\u306f\u8d77\u52d5\u3057\u305f\u72b6\u614b\u306e\u307e\u307e\u3067OK\u3067\u3059\u3002\n[root@vultr-server-01 ~]# curl -sI localhost | head -3\nHTTP/1.1 200 OK\nServer: nginx/1.8.1\nDate: Sun, 06 Mar 2016 20:35:37 GMT\n\n\n(Let's Encrypt\u306e)\u30c6\u30b9\u30c8\u74b0\u5883\u304b\u3089\u30c6\u30b9\u30c8\u7528\u8a3c\u660e\u66f8\u53d6\u5f97\nletsencrypt --nginx --staging\n\n\u30ed\u30b0\n(\u9014\u4e2d\u3001\u5165\u529b\u304c\u6c42\u3081\u3089\u308c\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3067\u306f1\u3092\u5165\u529b\u3057\u307e\u3057\u305f)\n[root@vultr-server-01 ~]# letsencrypt --nginx --staging\n\nPlease choose whether HTTPS access is required or optional.\n-------------------------------------------------------------------------------\n1: Easy - Allow both HTTP and HTTPS access to these sites\n2: Secure - Make all requests redirect to secure HTTPS access\n-------------------------------------------------------------------------------\nSelect the appropriate number [1-2] then [enter] (press 'c' to cancel): 1\n\n-------------------------------------------------------------------------------\nCongratulations! You have successfully enabled https://test.example.com\nYou should test your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d=test.example.com\n-------------------------------------------------------------------------------\n\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at\n   /etc/letsencrypt/live/test.example.com/fullchain.pem. Your cert\n   will expire on 2016-06-04. To obtain a new version of the\n   certificate in the future, simply run Let's Encrypt again.\n\n\n\u52d5\u4f5c\u78ba\u8a8d\n\u30d6\u30e9\u30a6\u30b6\u3067\u4eca\u8a2d\u5b9a\u4e2d\u306eNGINX\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u8a3c\u660e\u66f8\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u30c6\u30b9\u30c8\u7528\u306e\u8a3c\u660e\u66f8(Happy hacker fake CA)\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\u767a\u884c\u8005\u304cLet's Encrypt\u3067\u3042\u308b\u3053\u3068\u3001\u6709\u52b9\u671f\u9650\u306e\u6b63\u3057\u3055(\u4eca\u304b\u30893\u30f5\u6708\u9593)\u306a\u3069\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\u610f\u56f3\u3057\u305f\u3068\u304a\u308a\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001(Let's Encrypt\u306e)\u672c\u756a\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n(Let's Encrypt\u306e) \u672c\u756a\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u53d6\u5f97\n# --staging \u3092\u5916\u3059\u3060\u3051\nletsencrypt --nginx\n\n\u30ed\u30b0\n(\u9014\u4e2d\u3001\u5165\u529b\u304c\u6c42\u3081\u3089\u308c\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3067\u306f1\u3092\u5165\u529b\u3057\u307e\u3057\u305f)\n\u4eca\u56de\u306f\u91cd\u8981\u306aE-\u30e1\u30fc\u30eb\u3082\u9001\u3089\u308c\u3066\u3044\u308b\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u3001\u305d\u3061\u3089\u3082\u5225\u9014\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n[root@vultr-server-01 ~]# letsencrypt --nginx\n\nPlease choose whether HTTPS access is required or optional.\n-------------------------------------------------------------------------------\n1: Easy - Allow both HTTP and HTTPS access to these sites\n2: Secure - Make all requests redirect to secure HTTPS access\n-------------------------------------------------------------------------------\nSelect the appropriate number [1-2] then [enter] (press 'c' to cancel): 1\n\n-------------------------------------------------------------------------------\nYour existing certificate has been successfully renewed, and the new certificate\nhas been installed.\n\nThe new certificate covers the following domains: https://test.example.com\n\nYou should test your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d=test.example.com\n-------------------------------------------------------------------------------\n\nIMPORTANT NOTES:\n - If you lose your account credentials, you can recover through\n   e-mails sent to admin@example.com.\n - Congratulations! Your certificate and chain have been saved at\n   /etc/letsencrypt/live/test.example.com/fullchain.pem. Your cert\n   will expire on 2016-06-04. To obtain a new version of the\n   certificate in the future, simply run Let's Encrypt again.\n - Your account credentials have been saved in your Let's Encrypt\n   configuration directory at /etc/letsencrypt. You should make a\n   secure backup of this folder now. This configuration directory will\n   also contain certificates and private keys obtained by Let's\n   Encrypt so making regular backups of this folder is ideal.\n - If you like Let's Encrypt, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n\n\n\u901a\u5e38\u3068\u9055\u3046\u30d1\u30b9\u306bNGINX\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u5834\u5408\nnginx\u304c\u65e2\u77e5\u306e\u30d1\u30b9\u306b\u306a\u3044\u5834\u5408\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070\u826f\u3044\u3068\u306e\u3053\u3068\u3002\n --nginx-server-root NGINX\u306e\u30b5\u30fc\u30d0\u30eb\u30fc\u30c8(nginx.conf\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea)\n --nginx-ctl NGINX\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\n\n\u4e0a\u8a18\u306e\u8aac\u660e\u3092\u542b\u3093\u3060\u8a73\u7d30\u306a\u30d8\u30eb\u30d7\u306f\u3001letsencrypt -h all\u3067\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n(\u3061\u306a\u307f\u306b\u3001/opt/openresty \u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fOpenResty\u3067\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u6b8b\u5ff5\u306a\u304c\u3089\u5931\u6557\u3057\u307e\u3057\u305f\u3002\nmime.types\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u9055\u3046\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3060\u3063\u305f\u306e\u3067\u3001\u672c\u8cea\u7684\u3067\u306f\u306a\u3044\u6c17\u304c\u3057\u307e\u3059)\n\nnginx.conf\u306b\u81ea\u52d5\u3067\u8ffd\u52a0\u3055\u308c\u305f\u5185\u5bb9\n\n/etc/nginx/nginx.conf\nhttp {\n    server {\n        server_name test.example.com;\n        listen 443 ssl;\n        ssl_certificate /etc/letsencrypt/live/test.example.com-0001/fullchain.pem;\n        ssl_certificate_key /etc/letsencrypt/live/test.example.com-0001/privkey.pem;\n        include /etc/letsencrypt/options-ssl-nginx.conf;\n        ssl_trusted_certificate /etc/letsencrypt/live/test.example.com-0001/chain.pem;\n        ssl_stapling on;\n        ssl_stapling_verify on;\n    }\n    # ...\u4ee5\u4e0b\u7565...\n}\n\n\nSSL\u95a2\u9023\u306e\u8a2d\u5b9a\u306f\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5207\u308a\u5206\u3051\u3089\u308c\u3001\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3057\u305f\u3002\n\n/etc/letsencrypt/options-ssl-nginx.conf\nssl_session_cache shared:SSL:1m;\nssl_session_timeout 1440m;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2;\nssl_prefer_server_ciphers on;\n# Using list of ciphers from \"Bulletproof SSL and TLS\"\nssl_ciphers \"ECDHE-ECDSA-AES128-GCM-SHA256 ECDHE-ECDSA-AES256-GCM-SHA384 ECDHE-ECDSA-AES128-SHA ECDHE-ECDSA-AES256-SHA ECDHE-ECDSA-AES128-SHA256 ECDHE-ECDSA-AES256-SHA384 ECDHE-RSA-AES128-GCM-SHA256 ECDHE-RSA-AES256-GCM-SHA384 ECDHE-RSA-AES128-SHA ECDHE-RSA-AES128-SHA256 ECDHE-RSA-AES256-SHA384 DHE-RSA-AES128-GCM-SHA256 DHE-RSA-AES256-GCM-SHA384 DHE-RSA-AES128-SHA DHE-RSA-AES256-SHA DHE-RSA-AES128-SHA256 DHE-RSA-AES256-SHA256 EDH-RSA-DES-CBC3-SHA\";\n\n\n\n\u304a\u308f\u308a\u306b\nLet's Encrypt\u304c\u767a\u884c\u3057\u305f\u8a3c\u660e\u66f8\u306f500,000\u3092\u8d8a\u3048\u305f\u305d\u3046\u3067\u3059\u3002\u30b3\u30de\u30f3\u30c9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u30012016/3/8\u6642\u70b9\u3067v0.4.2\u307e\u3067\u4e0a\u304c\u3063\u3066\u304a\u308a\u3001\u4f7f\u3044\u65b9\u3082\u5c11\u3057\u5909\u5316\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u6c17\u306b\u306a\u308b\u90e8\u5206\u3060\u3051\u62fe\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\nletsencrypt-0.4.0\u4ee5\u964d\u3001letsencrypt-auto\u306f\u975e\u63a8\u5968\u306b\u306a\u308a\u3001letsencrypt\u30b3\u30de\u30f3\u30c9\u304c\u63a8\u5968\u306b\nletsencrypt-0.4.0\u4ee5\u964d\u3001ECDSA\u5f62\u5f0f\u306eSSL\u8a3c\u660e\u66f8\u304c\u767a\u884c\u53ef\u80fd\u306b (\u53c2\u8003: Let's Encrypt \u306e\u8a3c\u660e\u66f8\u3092ECDSA(ECC: \u6955\u5186\u66f2\u7dda\u6697\u53f7)\u3067\u4f5c\u6210\u3059\u308b)\n\u8a3c\u660e\u66f8\u306e\u66f4\u65b0\u306f letsencrypt renew\u3067\u3002\u30ed\u30fc\u30ab\u30eb\u306b\u5b58\u5728\u3059\u308b30\u65e5\u672a\u6e80\u3067\u671f\u9650\u5207\u308c\u3092\u8fce\u3048\u308b\u8a3c\u660e\u66f8\u3092\u5168\u3066\u66f4\u65b0\u3002\n\n\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u7d9a\u3005\u767b\u5834\u3002plesk\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u4fbf\u5229\u305d\u3046\u3002\n\n\n\u53c2\u8003\n\nLet's Encrypt User Guide\n\n\n\n\n\nLet's Encrypt\u304b\u3089\u7121\u6599\u30fb\u5b89\u5168\u306aSSL\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u3066Nginx\u306b\u8a2d\u5b9a\u3059\u308b\u307e\u3067\u00a0\u21a9\n\n\n\nNGINX\u306bLet's Encrypt\u306eSSL\u8a3c\u660e\u66f8\u3092\u5165\u308c\u308b\u6642\u3001--nginx\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070\u4e00\u767a\u3067\u5b8c\u4e86\u3057\u307e\u3059\u3002\u7c21\u5358\u3059\u304e\u3002\n\n# \u306f\u3058\u3081\u306b\n\u4e45\u3005\u306b\u3001\u3068\u3042\u308b\u30b5\u30fc\u30d0\u306bLet's Encrypt\u306e\u8a3c\u660e\u66f8\u3092\u5c0e\u5165\u3057\u3088\u3046\u3068\u3057\u305f\u3082\u306e\u306e\u3001\u624b\u9806\u3092\u3059\u3063\u304b\u308a\u5fd8\u308c\u3066\u3044\u307e\u3057\u305f\u3002\n\u4ee5\u524d\u81ea\u5206\u3067\u3082\u624b\u9806\u306e\u7d39\u4ecb\u30a8\u30f3\u30c8\u30ea\u3092\u66f8\u3044\u305f[^1]\u306e\u3067\u3059\u304c\u3001\u6539\u3081\u3066\u78ba\u8a8d\u3059\u308b\u3068\u5c11\u3057\u9762\u5012\u3067\u3059\u3002\n(\u9762\u5012\u3068\u3044\u3063\u3066\u3082\u3001\u8a3c\u660e\u66f8\u306e\u767a\u884c\u3068nginx\u306e\u8a2d\u5b9a\u3060\u3051\u306a\u3093\u3067\u3059\u304c\u306d\u30fb\u30fb\u30fb)\n\n\u3068\u3053\u308d\u3067\u3001\u524d\u56de\u8abf\u3079\u305f\u969b\u306f\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u300c\u52d5\u304b\u306a\u3044\u300d\u3068\u660e\u8a18\u3055\u308c\u3066\u3044\u305f\u305f\u3081\u8a66\u3057\u3066\u3082\u898b\u306a\u304b\u3063\u305fnginx\u30d7\u30e9\u30b0\u30a4\u30f3(\u300c--nginx\u300d\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u6709\u52b9\u5316)\u3092\u8a66\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u3001\u8a3c\u660e\u66f8\u306e\u53d6\u5f97\u304b\u3089\u8a2d\u5b9a\u307e\u3067\u5168\u3066\u3084\u3063\u3066\u304f\u308c\u307e\u3057\u305f\u3002\n\u5197\u8ac7\u3067\u306f\u306a\u304f\u672c\u5f53\u306b10\u79d2\u3082\u639b\u304b\u3089\u305a\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\u307e\u3067\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002\n\u975e\u5e38\u306b\u4fbf\u5229\u3060\u3063\u305f\u306e\u3067\u3001\u305d\u306e\u3054\u7d39\u4ecb\u3067\u3059\u3002\n(\u3082\u3063\u3068\u3082\u3001\u30de\u30cb\u30e5\u30a2\u30eb\u306b\u306f\u300c\u307e\u3060\u5b9f\u9a13\u7684\u6a5f\u80fd\u300d\u3068\u66f8\u304b\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u4e0d\u5b89\u5b9a\u306a\u3068\u3053\u308d\u304c\u6b8b\u3063\u3066\u3044\u308b\u306e\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u304c)\n\n# \u52d5\u4f5c\u78ba\u8a8d\u74b0\u5883\n\u30fbArchLinux (Linux 4.4.3)\n\u30fbNGINX 1.8.1\n\u30fbletsencrypt 0.4.2\n\u30fb[letsencypt-nginx](https://github.com/letsencrypt/letsencrypt/tree/master/letsencrypt-nginx) 0.4.2 (\u30d7\u30e9\u30b0\u30a4\u30f3)\n\n# \u7c21\u5358\u306a\u307e\u3068\u3081 (TL;DR)\n\n1. \u691c\u8a3c\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u53d6\u5f97 `letsencrypt --nginx --staging`\n2. \u30d6\u30e9\u30a6\u30b6\u7b49\u3067\u52d5\u4f5c\u78ba\u8a8d\n3. \u672c\u756a\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u53d6\u5f97 `letsencrypt --nginx`\n\n# letsencrypt\u30b3\u30de\u30f3\u30c9\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\nArchLinux\u306e\u5834\u5408\u3067\u3059\u3002\n\n```bash\nsudo pacman -S letsencrypt\nsudo pacman -S letsencrypt-nginx\n```\n\n# \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306e\u6e96\u5099 (cli.ini)\nSSL\u30b5\u30fc\u30d0\u8a3c\u660e\u66f8\u3092\u767a\u884c\u3057\u3066\u3082\u3089\u3046\u30c9\u30e1\u30a4\u30f3\u540d\u306a\u3069\u3001\u5fc5\u8981\u306a\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u3042\u3089\u304b\u3058\u3081\n/etc/letsencrypt/cli.ini\n\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\n\u30b3\u30de\u30f3\u30c9\u30e9\u30a4\u30f3\u306b\u30d0\u30e9\u30e1\u30fc\u30bf\u3092\u5168\u90e8\u6307\u5b9a\u3059\u308b\u3068\u9577\u304f\u3066\u7169\u96d1\u306a\u305f\u3081\u3002\n\n*example.com\u3092\u3054\u81ea\u5206\u306e\u30c9\u30e1\u30a4\u30f3\u306b\u7f6e\u63db\u3057\u3066\u4e0b\u3055\u3044*\n\n```ini:/etc/letsencrypt/cli.ini\nrsa-key-size = 2048\nserver = https://acme-v01.api.letsencrypt.org/directory\nemail = admin@example.com\ndomains = test.example.com\ntext = True\nwebroot-path = /var/www/html\nagree-tos = True\nrenew-by-default = True\n```\n\n# \u624b\u9806\n\n\u30eb\u30fc\u30c8\u3067\u4f5c\u696d\u3057\u307e\u3059\u3002\n\n```shell-session\n% sudo -i\n[root@vultr-server-01 ~]# \n```\n\nNGINX\u306f\u8d77\u52d5\u3057\u305f\u72b6\u614b\u306e\u307e\u307e\u3067OK\u3067\u3059\u3002\n\n```shell-session\n[root@vultr-server-01 ~]# curl -sI localhost | head -3\nHTTP/1.1 200 OK\nServer: nginx/1.8.1\nDate: Sun, 06 Mar 2016 20:35:37 GMT\n```\n\n## (Let's Encrypt\u306e)\u30c6\u30b9\u30c8\u74b0\u5883\u304b\u3089\u30c6\u30b9\u30c8\u7528\u8a3c\u660e\u66f8\u53d6\u5f97\n```bash\nletsencrypt --nginx --staging\n```\n\n\u30ed\u30b0\n(\u9014\u4e2d\u3001\u5165\u529b\u304c\u6c42\u3081\u3089\u308c\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3067\u306f1\u3092\u5165\u529b\u3057\u307e\u3057\u305f)\n\n```shell-session\n[root@vultr-server-01 ~]# letsencrypt --nginx --staging\n\nPlease choose whether HTTPS access is required or optional.\n-------------------------------------------------------------------------------\n1: Easy - Allow both HTTP and HTTPS access to these sites\n2: Secure - Make all requests redirect to secure HTTPS access\n-------------------------------------------------------------------------------\nSelect the appropriate number [1-2] then [enter] (press 'c' to cancel): 1\n\n-------------------------------------------------------------------------------\nCongratulations! You have successfully enabled https://test.example.com\nYou should test your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d=test.example.com\n-------------------------------------------------------------------------------\n\nIMPORTANT NOTES:\n - Congratulations! Your certificate and chain have been saved at\n   /etc/letsencrypt/live/test.example.com/fullchain.pem. Your cert\n   will expire on 2016-06-04. To obtain a new version of the\n   certificate in the future, simply run Let's Encrypt again.\n```\n\n## \u52d5\u4f5c\u78ba\u8a8d\n\u30d6\u30e9\u30a6\u30b6\u3067\u4eca\u8a2d\u5b9a\u4e2d\u306eNGINX\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u8a3c\u660e\u66f8\u30a8\u30e9\u30fc\u3068\u306a\u308a\u307e\u3059\u304c\u3001\u3053\u308c\u306f\u30c6\u30b9\u30c8\u7528\u306e\u8a3c\u660e\u66f8(Happy hacker fake CA)\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3067\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\u767a\u884c\u8005\u304cLet's Encrypt\u3067\u3042\u308b\u3053\u3068\u3001\u6709\u52b9\u671f\u9650\u306e\u6b63\u3057\u3055(\u4eca\u304b\u30893\u30f5\u6708\u9593)\u306a\u3069\u3092\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\u610f\u56f3\u3057\u305f\u3068\u304a\u308a\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u308b\u4e8b\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3089\u3001(Let's Encrypt\u306e)\u672c\u756a\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n## (Let's Encrypt\u306e) \u672c\u756a\u74b0\u5883\u304b\u3089\u8a3c\u660e\u66f8\u53d6\u5f97\n```bash\n# --staging \u3092\u5916\u3059\u3060\u3051\nletsencrypt --nginx\n```\n\n\u30ed\u30b0\n(\u9014\u4e2d\u3001\u5165\u529b\u304c\u6c42\u3081\u3089\u308c\u307e\u3059\u3002\u3053\u306e\u5834\u5408\u3067\u306f1\u3092\u5165\u529b\u3057\u307e\u3057\u305f)\n\u4eca\u56de\u306f\u91cd\u8981\u306aE-\u30e1\u30fc\u30eb\u3082\u9001\u3089\u308c\u3066\u3044\u308b\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u3001\u305d\u3061\u3089\u3082\u5225\u9014\u78ba\u8a8d\u3057\u307e\u3057\u3087\u3046\u3002\n\n```shell-session\n[root@vultr-server-01 ~]# letsencrypt --nginx\n\nPlease choose whether HTTPS access is required or optional.\n-------------------------------------------------------------------------------\n1: Easy - Allow both HTTP and HTTPS access to these sites\n2: Secure - Make all requests redirect to secure HTTPS access\n-------------------------------------------------------------------------------\nSelect the appropriate number [1-2] then [enter] (press 'c' to cancel): 1\n\n-------------------------------------------------------------------------------\nYour existing certificate has been successfully renewed, and the new certificate\nhas been installed.\n\nThe new certificate covers the following domains: https://test.example.com\n\nYou should test your configuration at:\nhttps://www.ssllabs.com/ssltest/analyze.html?d=test.example.com\n-------------------------------------------------------------------------------\n\nIMPORTANT NOTES:\n - If you lose your account credentials, you can recover through\n   e-mails sent to admin@example.com.\n - Congratulations! Your certificate and chain have been saved at\n   /etc/letsencrypt/live/test.example.com/fullchain.pem. Your cert\n   will expire on 2016-06-04. To obtain a new version of the\n   certificate in the future, simply run Let's Encrypt again.\n - Your account credentials have been saved in your Let's Encrypt\n   configuration directory at /etc/letsencrypt. You should make a\n   secure backup of this folder now. This configuration directory will\n   also contain certificates and private keys obtained by Let's\n   Encrypt so making regular backups of this folder is ideal.\n - If you like Let's Encrypt, please consider supporting our work by:\n\n   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n   Donating to EFF:                    https://eff.org/donate-le\n```\n\n## \u901a\u5e38\u3068\u9055\u3046\u30d1\u30b9\u306bNGINX\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u3044\u308b\u5834\u5408\nnginx\u304c\u65e2\u77e5\u306e\u30d1\u30b9\u306b\u306a\u3044\u5834\u5408\u306b\u306f\u3001\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4f7f\u3048\u3070\u826f\u3044\u3068\u306e\u3053\u3068\u3002\n\n```bash\n --nginx-server-root NGINX\u306e\u30b5\u30fc\u30d0\u30eb\u30fc\u30c8(nginx.conf\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea)\n --nginx-ctl NGINX\u306e\u5b9f\u884c\u30d5\u30a1\u30a4\u30eb\u306e\u30d1\u30b9\n```\n\n\u4e0a\u8a18\u306e\u8aac\u660e\u3092\u542b\u3093\u3060\u8a73\u7d30\u306a\u30d8\u30eb\u30d7\u306f\u3001`letsencrypt -h all`\u3067\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n(\u3061\u306a\u307f\u306b\u3001/opt/openresty \u4ee5\u4e0b\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305fOpenResty\u3067\u8a66\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u6b8b\u5ff5\u306a\u304c\u3089\u5931\u6557\u3057\u307e\u3057\u305f\u3002\nmime.types\u306e\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u9055\u3046\u3068\u3044\u3046\u30a8\u30e9\u30fc\u3060\u3063\u305f\u306e\u3067\u3001\u672c\u8cea\u7684\u3067\u306f\u306a\u3044\u6c17\u304c\u3057\u307e\u3059)\n\n## nginx.conf\u306b\u81ea\u52d5\u3067\u8ffd\u52a0\u3055\u308c\u305f\u5185\u5bb9\n```nginx:/etc/nginx/nginx.conf\nhttp {\n    server {\n        server_name test.example.com;\n        listen 443 ssl;\n        ssl_certificate /etc/letsencrypt/live/test.example.com-0001/fullchain.pem;\n        ssl_certificate_key /etc/letsencrypt/live/test.example.com-0001/privkey.pem;\n        include /etc/letsencrypt/options-ssl-nginx.conf;\n        ssl_trusted_certificate /etc/letsencrypt/live/test.example.com-0001/chain.pem;\n        ssl_stapling on;\n        ssl_stapling_verify on;\n    }\n    # ...\u4ee5\u4e0b\u7565...\n}\n```\nSSL\u95a2\u9023\u306e\u8a2d\u5b9a\u306f\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u5207\u308a\u5206\u3051\u3089\u308c\u3001\u30a4\u30f3\u30af\u30eb\u30fc\u30c9\u3055\u308c\u3066\u3044\u307e\u3059\u3002\u5185\u5bb9\u306f\u4ee5\u4e0b\u306e\u901a\u308a\u3067\u3057\u305f\u3002\n\n```config:/etc/letsencrypt/options-ssl-nginx.conf\nssl_session_cache shared:SSL:1m;\nssl_session_timeout 1440m;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2;\nssl_prefer_server_ciphers on;\n# Using list of ciphers from \"Bulletproof SSL and TLS\"\nssl_ciphers \"ECDHE-ECDSA-AES128-GCM-SHA256 ECDHE-ECDSA-AES256-GCM-SHA384 ECDHE-ECDSA-AES128-SHA ECDHE-ECDSA-AES256-SHA ECDHE-ECDSA-AES128-SHA256 ECDHE-ECDSA-AES256-SHA384 ECDHE-RSA-AES128-GCM-SHA256 ECDHE-RSA-AES256-GCM-SHA384 ECDHE-RSA-AES128-SHA ECDHE-RSA-AES128-SHA256 ECDHE-RSA-AES256-SHA384 DHE-RSA-AES128-GCM-SHA256 DHE-RSA-AES256-GCM-SHA384 DHE-RSA-AES128-SHA DHE-RSA-AES256-SHA DHE-RSA-AES128-SHA256 DHE-RSA-AES256-SHA256 EDH-RSA-DES-CBC3-SHA\";\n```\n\n# \u304a\u308f\u308a\u306b\nLet's Encrypt\u304c\u767a\u884c\u3057\u305f\u8a3c\u660e\u66f8\u306f500,000\u3092\u8d8a\u3048\u305f\u305d\u3046\u3067\u3059\u3002\u30b3\u30de\u30f3\u30c9\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3082\u30012016/3/8\u6642\u70b9\u3067v0.4.2\u307e\u3067\u4e0a\u304c\u3063\u3066\u304a\u308a\u3001\u4f7f\u3044\u65b9\u3082\u5c11\u3057\u5909\u5316\u304c\u3042\u308a\u307e\u3057\u305f\u3002\n\u6c17\u306b\u306a\u308b\u90e8\u5206\u3060\u3051\u62fe\u3063\u3066\u307f\u307e\u3057\u305f\u3002\n\n* letsencrypt-0.4.0\u4ee5\u964d\u3001`letsencrypt-auto`\u306f\u975e\u63a8\u5968\u306b\u306a\u308a\u3001`letsencrypt`\u30b3\u30de\u30f3\u30c9\u304c\u63a8\u5968\u306b\n* letsencrypt-0.4.0\u4ee5\u964d\u3001ECDSA\u5f62\u5f0f\u306eSSL\u8a3c\u660e\u66f8\u304c\u767a\u884c\u53ef\u80fd\u306b (\u53c2\u8003: [Let's Encrypt \u306e\u8a3c\u660e\u66f8\u3092ECDSA(ECC: \u6955\u5186\u66f2\u7dda\u6697\u53f7)\u3067\u4f5c\u6210\u3059\u308b](http://qiita.com/TsutomuNakamura/items/e2e7be7c1f4d1638454d))\n* \u8a3c\u660e\u66f8\u306e\u66f4\u65b0\u306f `letsencrypt renew`\u3067\u3002\u30ed\u30fc\u30ab\u30eb\u306b\u5b58\u5728\u3059\u308b30\u65e5\u672a\u6e80\u3067\u671f\u9650\u5207\u308c\u3092\u8fce\u3048\u308b\u8a3c\u660e\u66f8\u3092\u5168\u3066\u66f4\u65b0\u3002\n* [\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u30d7\u30e9\u30b0\u30a4\u30f3](https://github.com/letsencrypt/letsencrypt/wiki/Plugins)\u304c\u7d9a\u3005\u767b\u5834\u3002plesk\u30d7\u30e9\u30b0\u30a4\u30f3\u304c\u4fbf\u5229\u305d\u3046\u3002\n\n# \u53c2\u8003\n- [Let's Encrypt User Guide](http://letsencrypt.readthedocs.org/en/latest/using.html)\n\n[^1]: [Let's Encrypt\u304b\u3089\u7121\u6599\u30fb\u5b89\u5168\u306aSSL\u8a3c\u660e\u66f8\u3092\u53d6\u5f97\u3057\u3066Nginx\u306b\u8a2d\u5b9a\u3059\u308b\u307e\u3067](http://qiita.com/dseg/items/908c1b8aab19a5b26d92)\n", "tags": ["nginx", "letsencrypt", "SSL", "HTTPS"]}