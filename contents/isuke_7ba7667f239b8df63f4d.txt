{"tags": ["vue.js"], "context": "vue.js\u3067file post\u3059\u308b\u4f8b\u3067\u3059\u3002\n\u4f55\u304b\u306e\u3054\u53c2\u8003\u306b\u306a\u308c\u3070\u3002\ntemplate#file_new\n  = file_field_tag :files, multiple: true, 'v-on:change' => 'fileInputChange'\n  = submit_tag 'Upload', 'v-on:click.prevent' => 'fileUpload'\n\n$ ->\n  Vue.component 'file-new',\n    template: '#file_new'\n    data: ->\n      file_input: undefined\n      files: undefined\n    methods:\n      fileInputChange: (e) ->\n        @file_input = e.target\n        @files = @file_input.files\n      fileUpload: ->\n        return if @files.length <= 0\n        $.each Array.prototype.slice.call(@files, 0), (i, file) =>\n          @_handleUpload(file)\n        @file_input.value = ''\n      _handleUpload: (file) ->\n        form = new FormData()\n        form.append('Content-Type', file.type || 'application/octet-stream')\n        form.append('file', file)\n\n        $.ajax\n          url: \"/api/hoge.json\"\n          type: 'POST'\n          data: form\n          cache: false\n          contentType: false\n          processData: false\n        .done (response) =>\n          console.log response\n        .fail (response) =>\n          console.error response\n\nvue.js\u3067file post\u3059\u308b\u4f8b\u3067\u3059\u3002\n\u4f55\u304b\u306e\u3054\u53c2\u8003\u306b\u306a\u308c\u3070\u3002\n\n```\ntemplate#file_new\n  = file_field_tag :files, multiple: true, 'v-on:change' => 'fileInputChange'\n  = submit_tag 'Upload', 'v-on:click.prevent' => 'fileUpload'\n```\n\n\n```coffeescript\n$ ->\n  Vue.component 'file-new',\n    template: '#file_new'\n    data: ->\n      file_input: undefined\n      files: undefined\n    methods:\n      fileInputChange: (e) ->\n        @file_input = e.target\n        @files = @file_input.files\n      fileUpload: ->\n        return if @files.length <= 0\n        $.each Array.prototype.slice.call(@files, 0), (i, file) =>\n          @_handleUpload(file)\n        @file_input.value = ''\n      _handleUpload: (file) ->\n        form = new FormData()\n        form.append('Content-Type', file.type || 'application/octet-stream')\n        form.append('file', file)\n\n        $.ajax\n          url: \"/api/hoge.json\"\n          type: 'POST'\n          data: form\n          cache: false\n          contentType: false\n          processData: false\n        .done (response) =>\n          console.log response\n        .fail (response) =>\n          console.error response\n```\n"}