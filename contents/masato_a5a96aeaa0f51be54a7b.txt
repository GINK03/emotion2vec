{"context": " More than 1 year has passed since last update.ES6\u3067\u66f8\u304fIsomorphic\u30a2\u30d7\u30ea\u306eBoilerplate\u3092\u8abf\u3079\u307e\u3057\u305f\u3002\u3044\u304f\u3064\u304b\u624b\u3092\u52d5\u304b\u3057\u306a\u304c\u3089\u52c9\u5f37\u3057\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u6700\u521d\u306f\u306a\u308b\u3079\u304f\u30b7\u30f3\u30d7\u30eb\u306aIsomorphic\u306a\u52d5\u4f5c\u3092\u9078\u3073\u305f\u3044\u306e\u3067\u3059\u304c\u3001React\u30a2\u30d7\u30ea\u306f\u8907\u96d1\u306b\u306a\u308a\u304c\u3061\u3067\u5468\u8fba\u30c4\u30fc\u30eb\u3082\u591a\u304f\u3069\u306e\u69cb\u6210\u3092\u9078\u3093\u3060\u3089\u826f\u3044\u304b\u60a9\u307f\u307e\u3059\u3002Tutorial: Setting Up a Simple Isomorphic React app\u306e\u30dd\u30b9\u30c8\u304c\u3068\u3066\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u5199\u7d4c\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\nIsomorphic\u306a\u7279\u5fb4\nIsomorphic\u306aReact\u30a2\u30d7\u30ea\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30b3\u30fc\u30c9\u306f1\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30d0\u30f3\u30c9\u30eb\u3057\u3066\u3001HTML\u304b\u3089\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u6700\u521d\u306bHTML\u3092\u958b\u3044\u305f\u3068\u304d\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3055\u308c\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u8868\u793a\u3057\u307e\u3059\u304c\u3001\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u305fReact\u30a2\u30d7\u30ea\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u3089\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\nTutorial: Setting Up a Simple Isomorphic React app\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306freact-isomorphic-boilerplate\u3067\u3059\u3002\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u3059\u3002\u4f5c\u696d\u30ea\u30dd\u30b8\u30c8\u30ea\u306f\u3053\u3061\u3089\u3067\u3059\u3002\n$ cd ~/node_apps/react-isomorphic-boilerplate-app\n$ tree\n.\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 css\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 node_modules -> /dist/node_modules\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 src\n\u2502  \u251c\u2500\u2500 client\n\u2502  \u2502   \u2514\u2500\u2500 entry.js\n\u2502  \u251c\u2500\u2500 server\n\u2502  \u2502   \u251c\u2500\u2500 server.js\n\u2502  \u2502   \u2514\u2500\u2500 webpack.js\n\u2502  \u2514\u2500\u2500 shared\n\u2502      \u251c\u2500\u2500 components\n\u2502      \u2502  \u2514\u2500\u2500 AppHandler.js\n\u2502      \u2514\u2500\u2500 routes.js\n\u251c\u2500\u2500 views\n\u2502  \u2514\u2500\u2500 index.jade\n\u2514\u2500\u2500 webpack.config.dev.js\n\n\nDockerfile\nio.js\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3044Dockerfile\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/Dockerfile\nFROM iojs:2.3\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\nRUN mkdir -p /app\nWORKDIR /app\n\nRUN adduser --disabled-password --gecos '' --uid 1000 docker && \\\n    mkdir -p /dist/node_modules && \\\n    ln -s /dist/node_modules /app/node_modules && \\\n    chown -R docker:docker /app /dist/node_modules\n\nUSER docker\nCOPY package.json /app/\nRUN  npm install\n\nCOPY . /app\nCMD [\"npm\",\"start\"]\n\n\n\ndocker-compose.yml\ndocker-compose.yml\u306b\u306f\u74b0\u5883\u5909\u6570\u3068\u3057\u3066public ip address\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002HTML\u304b\u3089Webpack dev server\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306eIP\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306f\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306f\u30ea\u30e2\u30fc\u30c8\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002PUBLIC_IP\u306b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u63a5\u7d9a\u3067\u304d\u308bIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/docker-compose.yml\nnpm:\n  build: .\n  volumes:\n    - .:/app\n    - /etc/localtime:/etc/localtime:ro\n  environment:\n    - PUBLIC_IP=xxx.xxx.xxx.xxx\n    - EXPRESS_PORT=3030\n    - WEBPACK_PORT=8090\n  ports:\n    - 3030:3030\n    - 8090:8090\n\n\ndocker-compose\u30b3\u30de\u30f3\u30c9\u3092\u77ed\u7e2e\u3059\u308b\u305f\u3081\u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n~/.bashrc\nalias iojs-run='docker-compose run --rm npm'\nalias iojs-up='docker-compose up npm'\n\n\npackage.json\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6700\u5c0f\u9650\u3092\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/package.json\n{\n    \"name\": \"react-isomorphic\",\n    \"description\": \"react-isomorphic\",\n    \"version\": \"0.0.1\",\n    \"private\": true\n}\n\n\ndocker-compose\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4f7f\u3063\u3066\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092npm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ iojs-run npm install --save-dev react webpack react-router react-hot-loader webpack-dev-server babel-loader\n\n\u7528\u610f\u3057\u3066\u304a\u3044\u305fpackage.json\u306bdevDependencies\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/package.json\n{\n    \"name\": \"react-isomorphic\",\n    \"description\": \"react-isomorphic\",\n    \"version\": \"0.0.1\",\n    \"private\": true,\n    \"devDependencies\": {\n        \"babel\": \"^5.6.14\",\n        \"babel-core\": \"^5.6.17\",\n        \"babel-loader\": \"^5.3.1\",\n        \"express\": \"^4.13.1\",\n        \"jade\": \"^1.11.0\",\n        \"node-libs-browser\": \"^0.5.2\",\n        \"nodemon\": \"^1.3.7\",\n        \"react\": \"^0.13.3\",\n        \"react-hot-loader\": \"^1.2.8\",\n        \"react-router\": \"^0.13.3\",\n        \"webpack\": \"^1.10.1\",\n        \"webpack-dev-server\": \"^1.10.1\"\n    },\n    \"scripts\": {\n        \"clean\": \"rm -rf lib\",\n        \"watch-js\": \"babel src -d lib --experimental -w\",\n        \"dev-server\": \"node lib/server/webpack.js\",\n        \"server\": \"nodemon lib/server/server.js\",\n        \"start\": \"npm run watch-js & npm run dev-server & npm run server\",\n        \"build\": \"npm run clean && babel src -d lib --experimental\"\n    }\n}\n\n\nscripts\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u958b\u767a\u306b\u5fc5\u8981\u306a\u30b3\u30de\u30f3\u30c9\u3092\u7528\u610f\u3057\u307e\u3059\u3002\u3054\u3061\u3083\u3054\u3061\u3083\u3057\u3066\u3044\u308b\u306e\u3067Gulp\u3067\u307e\u3068\u3081\u305f\u65b9\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\u30db\u30c3\u30c8\u30ed\u30fc\u30c9\u3082\u3057\u307e\u3059\u304c\u3001ES6\u3067\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u306fbuild\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308bExpress\u306e\u30b5\u30fc\u30d0\u30fc\u3068\u3001\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u305fReact\u30a2\u30d7\u30ea\u3092\u8fd4\u3059Webpack dev server\u306e2\u3064\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\npackage.json\u304c\u51fa\u6765\u4e0a\u304c\u3063\u305f\u306e\u3067\u30a4\u30e1\u30fc\u30b8\u306b\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n$ docker-compose build\n\n\n\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n$ mkdir -p src/{server,shared,client} views\n\n\nserver: Express\u3068Webpack dev server\nclient: Reace bundle\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\nshared: components\u3068routes\n\n\nviews/index.jade\n\u30d3\u30e5\u30fc\u306fJade\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u4f7f\u3044\u307e\u3059\u3002#app!= content\u306e\u8a18\u8ff0\u3067<div id=\"app\">\u8981\u7d20\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/views/index.jade\nhtml\n  head\n    title=\"React Isomorphic App\"\n    meta(charset='utf-8')\n    meta(http-equiv='X-UA-Compatible', content='IE=edge')\n    meta(name='description', content='')\n    meta(name='viewport', content='width=device-width, initial-scale=1')\n\n  body\n    #app!= content\n    script(src='http://'+public_ip+':'+webpack_port+'/js/app.js', defer)\n\n\n\nsrc/server/server.js\nExpress\u306e\u30b3\u30fc\u30c9\u3082ES6\u3067\u66f8\u304d\u307e\u3059\u3002route\u306f/*\u3067\u5168\u90e8\u62fe\u3063\u3066react-router\u306b\u6e21\u3057\u307e\u3059\u3002\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u306ffavicon.ico\u3092\u7528\u610f\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001static\u306a\u30b3\u30f3\u30c6\u30f3\u30c4\u3082react-router\u306brouting\u306e\u5f79\u5272\u304c\u56de\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\nWarning: No route matches path \"/favicon.ico\". Make sure you have <Route path=\"/favicon.ico\"> somewhere in your routes\n\nreact-router\u306f\u30b5\u30fc\u30d0\u30fc\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067shared/routes\u3092\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u3060\u3068\u540c\u3058\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001Express\u304c<div id=\"app\">\u306brender\u3057\u305fcontent\u3068\u3001React bundle\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u5f8c\u306b\u3001document.getElementById('app')\u3067render\u3059\u308b\u5185\u5bb9\u306e\u533a\u5225\u304c\u3064\u304d\u307e\u305b\u3093\u3002Isomorphic\u3067\u306f\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u51e6\u7406\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306bcontents\u5909\u6570\u306b\u306f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3067\u306f\u306a\u304f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/src/server/server.js\nimport express from 'express';\nimport React from 'react';\nimport Router from 'react-router';\nconst app = express();\n\n// set up Jade\napp.set('views', './views');\napp.set('view engine', 'jade');\n\nimport routes from '../shared/routes';\n\napp.get('/*', function(req, res) {\n    Router.run(routes, req.url, Handler => {\n        //let content = React.renderToString(<Handler />);\n        let content = 'empty!';\n        res.render('index', { public_ip_port: process.env.PUBLIC_IP_PORT,\n                              content: content });\n    });\n});\n\nvar server = app.listen(process.env.EXPRESS_PORT, function() {\n    var host = server.address().address;\n    var port = server.address().port;\n    console.log('Example app listening at http://%s:%s', host, port);\n});\n\n\n\nsrc/server/webpack.js\nReact\u30a2\u30d7\u30ea\u3092\u30ec\u30f3\u30c0\u30fc\u3059\u308b\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u3067\u3059\u3002Node.js\u306e\u30b5\u30fc\u30d0\u30fc\u3068\u306f\u5225\u306b\u52d5\u4f5c\u3057\u307e\u3059\u3002WebpackDevServer\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001webpack.config.dev.js\u306b\u66f8\u304b\u308c\u305f\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3093\u3067\u4f7f\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u304c\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u305f\u3081\u3001Webpack dev server\u306f\u30ea\u30e2\u30fc\u30c8\u304b\u3089\u63a5\u7d9a\u3057\u307e\u3059\u3002localhost\u3067\u306a\u304f0.0.0.0\u3067LISTEN\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/src/server/webpack.js\n\nimport WebpackDevServer from \"webpack-dev-server\";\nimport webpack from \"webpack\";\nimport config from \"../../webpack.config.dev\";\n\nvar server = new WebpackDevServer(webpack(config), {\n    // webpack-dev-server options\n    publicPath: config.output.publicPath,\n    hot: true,\n    stats: {colors: true},\n});\n\nserver.listen(process.env.WEBPACK_PORT, \"0.0.0.0\", function() {});\n\n\n\nwebpack.config.dev.js\nentry\u306bapp.js\u306bbundle\u3059\u308b\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3092\u8907\u6570\u6307\u5b9a\u3057\u307e\u3059\u3002\n\nwebpack-dev-server\u306e\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\n\u30db\u30c3\u30c8\u30ed\u30fc\u30c9\n\u30a2\u30d7\u30ea\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\n\n~/node_apps/react-isomorphic-boilerplate-app/webpack.config.dev.js\nvar webpack = require('webpack');\n\nvar public_url = 'http://'+process.env.PUBLIC_IP+':'+process.env.WEBPACK_PORT;\n\nmodule.exports = {\n    devtool: 'inline-source-map',\n    entry: [\n        'webpack-dev-server/client?'+public_url,\n        'webpack/hot/only-dev-server',\n        './src/client/entry',\n    ],\n    output: {\n        path: __dirname + '/public/js/',\n        filename: 'app.js',\n        publicPath: public_url+'/js/',\n    },\n    plugins: [\n        new webpack.HotModuleReplacementPlugin(),\n        new webpack.NoErrorsPlugin(),\n    ],\n    resolve: {\n        extensions: ['', '.js']\n    },\n    module: {\n        loaders: [\n            { test: /\\.jsx?$/, loaders: ['react-hot', 'babel-loader?experimental'], exclude: /node_modules/ }\n        ]\n    }\n}\n\n\n\n\u5171\u6709\n\nsrc/shared/components/AppHandler.js\nAppHandler.js\u306f\u30b5\u30fc\u30d0\u30fc\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u5171\u6709\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3067\u3059\u3002\u4eca\u56de\u306e\u30c6\u30b9\u30c8\u3067\u306fExpress\u304b\u3089Isomorphic\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u5171\u6709\u3057\u3066\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u5f8c\u3001\u9759\u7684\u306a\u6587\u5b57\u5217\u306b\u5909\u66f4\u3057\u3066\u3044\u307e\u3059\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/src/shared/components/AppHandler.js\nimport React from 'react';\n\nexport default class AppHandler extends React.Component {\n    render() {\n        return <div>Hello App Handler</div>;\n    }\n}\n\n\n\nsrc/shared/routes.js\nreact-router\u306eroutes\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002Route\u306fpath\u306e/\u306bAppHandler\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/src/shared/routes.js\nimport { Route } from 'react-router';\nimport React from 'react';\n\nimport AppHandler from './components/AppHandler';\n\nexport default (\n    <Route handler={ AppHandler } path=\"/\" />\n);\n\n\n\n\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\nsrc/client/entry.js\nReact bundle\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306fReact.renderToString(<Handler />);\u3067Jade\u3067\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308bcontents\u5909\u6570\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u3067\u306fReact.render(<Handler />, document.getElementById('app'));\u3092\u4f7f\u3063\u3066\u3001\u76f4\u63a5div\u306eid\u3092\u6307\u5b9a\u3057\u3066\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n~/node_apps/react-isomorphic-boilerplate-app/src/client/entry.js\nimport React from 'react';\nimport Router from 'react-router';\nimport routes from '../shared/routes';\n\nRouter.run(routes, Router.HistroyLocation, (Handler, state) => {\n    React.render(<Handler />, document.getElementById('app'));\n});\n\n\n\n\u8d77\u52d5\u3068\u30c6\u30b9\u30c8\n\u4e00\u5fdc\u30af\u30ea\u30fc\u30f3\u30d3\u30eb\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n$ iojs-run npm run clean\n$ iojs-run npm run build\n...\nnpm info postclean react-isomorphic@0.0.1\nnpm info ok\nsrc/client/entry.js -> lib/client/entry.js\nsrc/server/server.js -> lib/server/server.js\nsrc/server/webpack.js -> lib/server/webpack.js\nsrc/shared/components/AppHandler.js -> lib/shared/components/AppHandler.js\nsrc/shared/routes.js -> lib/shared/routes.js\nnpm info postbuild react-isomorphic@0.0.1\nnpm info ok\n\ndocker-compose up npm\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u3042\u308b\u3001iojs-up\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n$ iojs-up\n...\nnpm_1 | webpack: bundle is now VALID.\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089Docker\u30db\u30b9\u30c8\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u63a5\u7d9a\u5148\u306fExpress\u30b5\u30fc\u30d0\u30fc\u306e3030\u30dd\u30fc\u30c8\u3067\u3059\u3002\nhttp://xxx.xxx.xxx.xxx:3030/\n\u672c\u6765\u306fIsomorphic\u306b\u5171\u6709\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067render\u3057\u307e\u3059\u3002React bundle\u304c\u4e0a\u66f8\u304d\u3059\u308b\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001'empty!'\u306e\u9759\u7684\u306a\u6587\u5b57\u5217\u304c\u6700\u521d\u306brender\u3057\u307e\u3059\u3002index.html\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u3042\u3068\u3001React bundle\u304cWebpack dev server\u304b\u3089\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002react-router\u306e/path\u306b\u5f93\u3044AppHandler.js\u304ccomponent\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n\u8ab2\u984c\n\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3068\u3066\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u304c\u3001Express\u306eroute\u3092/*\u3068\u3057\u3066\u3059\u3079\u3066react-router\u306b\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u53cd\u9762favicon.ico\u306a\u3069\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3082react-router\u3067\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u304c\u5fc5\u8981\u306b\u306a\u3063\u305f\u308a\u3001Isomorphic\u3067\u5171\u6709\u3044\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u52d5\u4f5c\u304c\u898b\u3048\u3065\u3089\u3044\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\nES6\u3067\u66f8\u304fIsomorphic\u30a2\u30d7\u30ea\u306eBoilerplate\u3092[\u8abf\u3079\u307e\u3057\u305f](http://qiita.com/masato/items/b4fff7e885f78cd96edb)\u3002\u3044\u304f\u3064\u304b\u624b\u3092\u52d5\u304b\u3057\u306a\u304c\u3089\u52c9\u5f37\u3057\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002\u6700\u521d\u306f\u306a\u308b\u3079\u304f\u30b7\u30f3\u30d7\u30eb\u306aIsomorphic\u306a\u52d5\u4f5c\u3092\u9078\u3073\u305f\u3044\u306e\u3067\u3059\u304c\u3001React\u30a2\u30d7\u30ea\u306f\u8907\u96d1\u306b\u306a\u308a\u304c\u3061\u3067\u5468\u8fba\u30c4\u30fc\u30eb\u3082\u591a\u304f\u3069\u306e\u69cb\u6210\u3092\u9078\u3093\u3060\u3089\u826f\u3044\u304b\u60a9\u307f\u307e\u3059\u3002[Tutorial: Setting Up a Simple Isomorphic React app](http://jmfurlott.com/tutorial-setting-up-a-simple-isomorphic-react-app/)\u306e\u30dd\u30b9\u30c8\u304c\u3068\u3066\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u306e\u3067\u5199\u7d4c\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\n## Isomorphic\u306a\u7279\u5fb4\n\nIsomorphic\u306aReact\u30a2\u30d7\u30ea\u306f\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306e\u30b3\u30fc\u30c9\u306f1\u3064\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30d0\u30f3\u30c9\u30eb\u3057\u3066\u3001HTML\u304b\u3089\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\u6700\u521d\u306bHTML\u3092\u958b\u3044\u305f\u3068\u304d\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3055\u308c\u305f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u8868\u793a\u3057\u307e\u3059\u304c\u3001\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u305fReact\u30a2\u30d7\u30ea\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u3089\u4e0a\u66f8\u304d\u3057\u307e\u3059\u3002\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\n\n[Tutorial: Setting Up a Simple Isomorphic React app](http://jmfurlott.com/tutorial-setting-up-a-simple-isomorphic-react-app/)\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u306f[react-isomorphic-boilerplate](https://github.com/jmfurlott/react-isomorphic-boilerplate)\u3067\u3059\u3002\n\n\u4eca\u56de\u4f5c\u6210\u3057\u305f\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u69cb\u9020\u3067\u3059\u3002\u4f5c\u696d\u30ea\u30dd\u30b8\u30c8\u30ea\u306f[\u3053\u3061\u3089](https://github.com/masato/react-isomorphic-boilerplate-app)\u3067\u3059\u3002\n\n```bash\n$ cd ~/node_apps/react-isomorphic-boilerplate-app\n$ tree\n.\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 css\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 node_modules -> /dist/node_modules\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 src\n\u2502  \u251c\u2500\u2500 client\n\u2502  \u2502   \u2514\u2500\u2500 entry.js\n\u2502  \u251c\u2500\u2500 server\n\u2502  \u2502   \u251c\u2500\u2500 server.js\n\u2502  \u2502   \u2514\u2500\u2500 webpack.js\n\u2502  \u2514\u2500\u2500 shared\n\u2502      \u251c\u2500\u2500 components\n\u2502      \u2502  \u2514\u2500\u2500 AppHandler.js\n\u2502      \u2514\u2500\u2500 routes.js\n\u251c\u2500\u2500 views\n\u2502  \u2514\u2500\u2500 index.jade\n\u2514\u2500\u2500 webpack.config.dev.js\n```\n\n### Dockerfile\n\nio.js\u306e\u30d9\u30fc\u30b9\u30a4\u30e1\u30fc\u30b8\u3092\u4f7f\u3044Dockerfile\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```bash:~/node_apps/react-isomorphic-boilerplate-app/Dockerfile\nFROM iojs:2.3\nMAINTAINER Masato Shimizu <ma6ato@gmail.com>\n\nRUN mkdir -p /app\nWORKDIR /app\n\nRUN adduser --disabled-password --gecos '' --uid 1000 docker && \\\n    mkdir -p /dist/node_modules && \\\n    ln -s /dist/node_modules /app/node_modules && \\\n    chown -R docker:docker /app /dist/node_modules\n\nUSER docker\nCOPY package.json /app/\nRUN  npm install\n\nCOPY . /app\nCMD [\"npm\",\"start\"]\n```\n\n### docker-compose.yml\n\ndocker-compose.yml\u306b\u306f\u74b0\u5883\u5909\u6570\u3068\u3057\u3066public ip address\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002HTML\u304b\u3089Webpack dev server\u306b\u63a5\u7d9a\u3059\u308b\u305f\u3081\u306eIP\u30a2\u30c9\u30ec\u30b9\u3067\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u306f\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306f\u30ea\u30e2\u30fc\u30c8\u3067\u30a2\u30af\u30bb\u30b9\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002PUBLIC_IP\u306b\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u304b\u3089\u63a5\u7d9a\u3067\u304d\u308bIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n```yml:~/node_apps/react-isomorphic-boilerplate-app/docker-compose.yml\nnpm:\n  build: .\n  volumes:\n    - .:/app\n    - /etc/localtime:/etc/localtime:ro\n  environment:\n    - PUBLIC_IP=xxx.xxx.xxx.xxx\n    - EXPRESS_PORT=3030\n    - WEBPACK_PORT=8090\n  ports:\n    - 3030:3030\n    - 8090:8090\n```\n\ndocker-compose\u30b3\u30de\u30f3\u30c9\u3092\u77ed\u7e2e\u3059\u308b\u305f\u3081\u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u7528\u610f\u3057\u307e\u3059\u3002\n\n```bash:~/.bashrc\nalias iojs-run='docker-compose run --rm npm'\nalias iojs-up='docker-compose up npm'\n```\n\npackage.json\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u6700\u5c0f\u9650\u3092\u66f8\u3044\u3066\u304a\u304d\u307e\u3059\u3002\n\n```json:~/node_apps/react-isomorphic-boilerplate-app/package.json\n{\n    \"name\": \"react-isomorphic\",\n    \"description\": \"react-isomorphic\",\n    \"version\": \"0.0.1\",\n    \"private\": true\n}\n```\n\ndocker-compose\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u4f7f\u3063\u3066\u5fc5\u8981\u306a\u30e2\u30b8\u30e5\u30fc\u30eb\u3092npm\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ iojs-run npm install --save-dev react webpack react-router react-hot-loader webpack-dev-server babel-loader\n```\n\n\u7528\u610f\u3057\u3066\u304a\u3044\u305fpackage.json\u306b`devDependencies`\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u304c\u8ffd\u52a0\u3055\u308c\u307e\u3057\u305f\u3002\n\n```json:~/node_apps/react-isomorphic-boilerplate-app/package.json\n{\n    \"name\": \"react-isomorphic\",\n    \"description\": \"react-isomorphic\",\n    \"version\": \"0.0.1\",\n    \"private\": true,\n    \"devDependencies\": {\n        \"babel\": \"^5.6.14\",\n        \"babel-core\": \"^5.6.17\",\n        \"babel-loader\": \"^5.3.1\",\n        \"express\": \"^4.13.1\",\n        \"jade\": \"^1.11.0\",\n        \"node-libs-browser\": \"^0.5.2\",\n        \"nodemon\": \"^1.3.7\",\n        \"react\": \"^0.13.3\",\n        \"react-hot-loader\": \"^1.2.8\",\n        \"react-router\": \"^0.13.3\",\n        \"webpack\": \"^1.10.1\",\n        \"webpack-dev-server\": \"^1.10.1\"\n    },\n    \"scripts\": {\n        \"clean\": \"rm -rf lib\",\n        \"watch-js\": \"babel src -d lib --experimental -w\",\n        \"dev-server\": \"node lib/server/webpack.js\",\n        \"server\": \"nodemon lib/server/server.js\",\n        \"start\": \"npm run watch-js & npm run dev-server & npm run server\",\n        \"build\": \"npm run clean && babel src -d lib --experimental\"\n    }\n}\n```\n\n`scripts`\u30bb\u30af\u30b7\u30e7\u30f3\u306b\u958b\u767a\u306b\u5fc5\u8981\u306a\u30b3\u30de\u30f3\u30c9\u3092\u7528\u610f\u3057\u307e\u3059\u3002\u3054\u3061\u3083\u3054\u3061\u3083\u3057\u3066\u3044\u308b\u306e\u3067Gulp\u3067\u307e\u3068\u3081\u305f\u65b9\u304c\u826f\u3055\u305d\u3046\u3067\u3059\u3002\u30db\u30c3\u30c8\u30ed\u30fc\u30c9\u3082\u3057\u307e\u3059\u304c\u3001ES6\u3067\u66f8\u3044\u305f\u30b3\u30fc\u30c9\u306f`build`\u3067\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u304a\u304d\u307e\u3059\u3002\u30d6\u30e9\u30a6\u30b6\u304b\u3089\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51e6\u7406\u3059\u308bExpress\u306e\u30b5\u30fc\u30d0\u30fc\u3068\u3001\u30d0\u30f3\u30c9\u30eb\u3055\u308c\u305fReact\u30a2\u30d7\u30ea\u3092\u8fd4\u3059Webpack dev server\u306e2\u3064\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\npackage.json\u304c\u51fa\u6765\u4e0a\u304c\u3063\u305f\u306e\u3067\u30a4\u30e1\u30fc\u30b8\u306b\u30d3\u30eb\u30c9\u3057\u307e\u3059\u3002\n\n```bash\n$ docker-compose build\n```\n\n## \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u914d\u7f6e\u3059\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```bash \n$ mkdir -p src/{server,shared,client} views\n```\n\n* server: Express\u3068Webpack dev server\n* client: Reace bundle\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\n* shared: components\u3068routes\n\n### views/index.jade\n\n\u30d3\u30e5\u30fc\u306f[Jade](http://jade-lang.com/)\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30a8\u30f3\u30b8\u30f3\u3092\u4f7f\u3044\u307e\u3059\u3002`#app!= content`\u306e\u8a18\u8ff0\u3067`<div id=\"app\">`\u8981\u7d20\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n```jade:~/node_apps/react-isomorphic-boilerplate-app/views/index.jade\nhtml\n  head\n    title=\"React Isomorphic App\"\n    meta(charset='utf-8')\n    meta(http-equiv='X-UA-Compatible', content='IE=edge')\n    meta(name='description', content='')\n    meta(name='viewport', content='width=device-width, initial-scale=1')\n\n  body\n    #app!= content\n    script(src='http://'+public_ip+':'+webpack_port+'/js/app.js', defer)\n```\n\n### src/server/server.js\n\nExpress\u306e\u30b3\u30fc\u30c9\u3082ES6\u3067\u66f8\u304d\u307e\u3059\u3002route\u306f`/*`\u3067\u5168\u90e8\u62fe\u3063\u3066`react-router`\u306b\u6e21\u3057\u307e\u3059\u3002\u3053\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u306ffavicon.ico\u3092\u7528\u610f\u3057\u3066\u3044\u307e\u305b\u3093\u304c\u3001static\u306a\u30b3\u30f3\u30c6\u30f3\u30c4\u3082react-router\u306brouting\u306e\u5f79\u5272\u304c\u56de\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n```bash\nWarning: No route matches path \"/favicon.ico\". Make sure you have <Route path=\"/favicon.ico\"> somewhere in your routes\n```\n\n`react-router`\u306f\u30b5\u30fc\u30d0\u30fc\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067`shared/routes`\u3092\u5171\u6709\u3057\u3066\u3044\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30b5\u30f3\u30d7\u30eb\u3060\u3068\u540c\u3058\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u4f7f\u3063\u3066\u3044\u308b\u306e\u3067\u3001Express\u304c``<div id=\"app\">``\u306brender\u3057\u305fcontent\u3068\u3001React bundle\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u5f8c\u306b\u3001`document.getElementById('app')`\u3067render\u3059\u308b\u5185\u5bb9\u306e\u533a\u5225\u304c\u3064\u304d\u307e\u305b\u3093\u3002Isomorphic\u3067\u306f\u306a\u304f\u306a\u308a\u307e\u3059\u304c\u3001\u51e6\u7406\u3092\u308f\u304b\u308a\u3084\u3059\u304f\u3059\u308b\u305f\u3081\u306bcontents\u5909\u6570\u306b\u306f\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3067\u306f\u306a\u304f\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u6587\u5b57\u5217\u3092\u5165\u308c\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\n```js:~/node_apps/react-isomorphic-boilerplate-app/src/server/server.js\nimport express from 'express';\nimport React from 'react';\nimport Router from 'react-router';\nconst app = express();\n\n// set up Jade\napp.set('views', './views');\napp.set('view engine', 'jade');\n\nimport routes from '../shared/routes';\n\napp.get('/*', function(req, res) {\n    Router.run(routes, req.url, Handler => {\n        //let content = React.renderToString(<Handler />);\n        let content = 'empty!';\n        res.render('index', { public_ip_port: process.env.PUBLIC_IP_PORT,\n                              content: content });\n    });\n});\n\nvar server = app.listen(process.env.EXPRESS_PORT, function() {\n    var host = server.address().address;\n    var port = server.address().port;\n    console.log('Example app listening at http://%s:%s', host, port);\n});\n```\n\n### src/server/webpack.js\n\nReact\u30a2\u30d7\u30ea\u3092\u30ec\u30f3\u30c0\u30fc\u3059\u308b\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u3067\u3059\u3002Node.js\u306e\u30b5\u30fc\u30d0\u30fc\u3068\u306f\u5225\u306b\u52d5\u4f5c\u3057\u307e\u3059\u3002WebpackDevServer\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u306f\u3001`webpack.config.dev.js`\u306b\u66f8\u304b\u308c\u305f\u8a2d\u5b9a\u3092\u8aad\u307f\u8fbc\u3093\u3067\u4f7f\u3044\u307e\u3059\u3002\u4eca\u56de\u306f\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u304c\u30af\u30e9\u30a6\u30c9\u4e0a\u3067\u52d5\u4f5c\u3057\u3066\u3044\u308b\u305f\u3081\u3001Webpack dev server\u306f\u30ea\u30e2\u30fc\u30c8\u304b\u3089\u63a5\u7d9a\u3057\u307e\u3059\u3002`localhost`\u3067\u306a\u304f`0.0.0.0`\u3067LISTEN\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u307e\u3057\u305f\u3002\n\n```js:~/node_apps/react-isomorphic-boilerplate-app/src/server/webpack.js\n\nimport WebpackDevServer from \"webpack-dev-server\";\nimport webpack from \"webpack\";\nimport config from \"../../webpack.config.dev\";\n\nvar server = new WebpackDevServer(webpack(config), {\n    // webpack-dev-server options\n    publicPath: config.output.publicPath,\n    hot: true,\n    stats: {colors: true},\n});\n\nserver.listen(process.env.WEBPACK_PORT, \"0.0.0.0\", function() {});\n```\n\n### webpack.config.dev.js\n\nentry\u306bapp.js\u306bbundle\u3059\u308b\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3092\u8907\u6570\u6307\u5b9a\u3057\u307e\u3059\u3002\n\n* webpack-dev-server\u306e\u30db\u30b9\u30c8\u3068\u30dd\u30fc\u30c8\n* \u30db\u30c3\u30c8\u30ed\u30fc\u30c9\n* \u30a2\u30d7\u30ea\u306e\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\n\n```js:~/node_apps/react-isomorphic-boilerplate-app/webpack.config.dev.js\nvar webpack = require('webpack');\n\nvar public_url = 'http://'+process.env.PUBLIC_IP+':'+process.env.WEBPACK_PORT;\n\nmodule.exports = {\n    devtool: 'inline-source-map',\n    entry: [\n        'webpack-dev-server/client?'+public_url,\n        'webpack/hot/only-dev-server',\n        './src/client/entry',\n    ],\n    output: {\n        path: __dirname + '/public/js/',\n        filename: 'app.js',\n        publicPath: public_url+'/js/',\n    },\n    plugins: [\n        new webpack.HotModuleReplacementPlugin(),\n        new webpack.NoErrorsPlugin(),\n    ],\n    resolve: {\n        extensions: ['', '.js']\n    },\n    module: {\n        loaders: [\n            { test: /\\.jsx?$/, loaders: ['react-hot', 'babel-loader?experimental'], exclude: /node_modules/ }\n        ]\n    }\n}\n```\n\n## \u5171\u6709\n\n### src/shared/components/AppHandler.js\n\nAppHandler.js\u306f\u30b5\u30fc\u30d0\u30fc\u3068\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u3067\u5171\u6709\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3067\u3059\u3002\u4eca\u56de\u306e\u30c6\u30b9\u30c8\u3067\u306fExpress\u304b\u3089Isomorphic\u306b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u5171\u6709\u3057\u3066\u3001\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u5f8c\u3001\u9759\u7684\u306a\u6587\u5b57\u5217\u306b\u5909\u66f4\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js:~/node_apps/react-isomorphic-boilerplate-app/src/shared/components/AppHandler.js\nimport React from 'react';\n\nexport default class AppHandler extends React.Component {\n    render() {\n        return <div>Hello App Handler</div>;\n    }\n}\n```\n\n### src/shared/routes.js\n\n`react-router`\u306eroutes\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002Route\u306fpath\u306e`/`\u306bAppHandler\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u8868\u793a\u3057\u307e\u3059\u3002\n\n\n```js:~/node_apps/react-isomorphic-boilerplate-app/src/shared/routes.js\nimport { Route } from 'react-router';\nimport React from 'react';\n\nimport AppHandler from './components/AppHandler';\n\nexport default (\n    <Route handler={ AppHandler } path=\"/\" />\n);\n```\n\n## \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n\n### src/client/entry.js\n\nReact bundle\u306e\u30a8\u30f3\u30c8\u30ea\u30dd\u30a4\u30f3\u30c8\u3067\u3059\u3002\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u306f`React.renderToString(<Handler />);`\u3067Jade\u3067\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u3059\u308bcontents\u5909\u6570\u3092\u4f5c\u6210\u3057\u307e\u3057\u305f\u304c\u3001\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u3067\u306f` React.render(<Handler />, document.getElementById('app'));`\u3092\u4f7f\u3063\u3066\u3001\u76f4\u63a5div\u306eid\u3092\u6307\u5b9a\u3057\u3066\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30de\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n\n```js:~/node_apps/react-isomorphic-boilerplate-app/src/client/entry.js\nimport React from 'react';\nimport Router from 'react-router';\nimport routes from '../shared/routes';\n\nRouter.run(routes, Router.HistroyLocation, (Handler, state) => {\n    React.render(<Handler />, document.getElementById('app'));\n});\n```\n\n## \u8d77\u52d5\u3068\u30c6\u30b9\u30c8\n\n\u4e00\u5fdc\u30af\u30ea\u30fc\u30f3\u30d3\u30eb\u30c9\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```bash\n$ iojs-run npm run clean\n$ iojs-run npm run build\n...\nnpm info postclean react-isomorphic@0.0.1\nnpm info ok\nsrc/client/entry.js -> lib/client/entry.js\nsrc/server/server.js -> lib/server/server.js\nsrc/server/webpack.js -> lib/server/webpack.js\nsrc/shared/components/AppHandler.js -> lib/shared/components/AppHandler.js\nsrc/shared/routes.js -> lib/shared/routes.js\nnpm info postbuild react-isomorphic@0.0.1\nnpm info ok\n```\n\n\n`docker-compose up npm`\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3067\u3042\u308b\u3001`iojs-up`\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n```bash\n$ iojs-up\n...\nnpm_1 | webpack: bundle is now VALID.\n```\n\n\u30d6\u30e9\u30a6\u30b6\u304b\u3089Docker\u30db\u30b9\u30c8\u306e\u30d1\u30d6\u30ea\u30c3\u30afIP\u30a2\u30c9\u30ec\u30b9\u3092\u5b9f\u884c\u3057\u307e\u3059\u3002\u63a5\u7d9a\u5148\u306fExpress\u30b5\u30fc\u30d0\u30fc\u306e3030\u30dd\u30fc\u30c8\u3067\u3059\u3002\n\nhttp://xxx.xxx.xxx.xxx:3030/\n\n\u672c\u6765\u306fIsomorphic\u306b\u5171\u6709\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u3092\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067render\u3057\u307e\u3059\u3002React bundle\u304c\u4e0a\u66f8\u304d\u3059\u308b\u52d5\u4f5c\u3092\u78ba\u8a8d\u3059\u308b\u305f\u3081\u3001'empty!'\u306e\u9759\u7684\u306a\u6587\u5b57\u5217\u304c\u6700\u521d\u306brender\u3057\u307e\u3059\u3002index.html\u304c\u30ed\u30fc\u30c9\u3055\u308c\u305f\u3042\u3068\u3001React bundle\u304cWebpack dev server\u304b\u3089\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002`react-router`\u306e`/`path\u306b\u5f93\u3044AppHandler.js\u304ccomponent\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n## \u8ab2\u984c\n\n\u30b7\u30f3\u30d7\u30eb\u306a\u30b5\u30f3\u30d7\u30eb\u306a\u306e\u3067\u3068\u3066\u3082\u308f\u304b\u308a\u3084\u3059\u3044\u3067\u3059\u304c\u3001Express\u306eroute\u3092`/*`\u3068\u3057\u3066\u3059\u3079\u3066react-router\u306b\u6e21\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u53cd\u9762favicon.ico\u306a\u3069\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3082react-router\u3067\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u304c\u5fc5\u8981\u306b\u306a\u3063\u305f\u308a\u3001Isomorphic\u3067\u5171\u6709\u3044\u3057\u3066\u3044\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u52d5\u4f5c\u304c\u898b\u3048\u3065\u3089\u3044\u3068\u3053\u308d\u304c\u3042\u308a\u307e\u3059\u3002\n\n", "tags": ["es6", "isomorphic", "reactjs0.13.3", "io.js2.3.4", "webpack1.10.1"]}