{"context": " More than 1 year has passed since last update.\n\n\u52c9\u5f37\u4f1a\u60c5\u5831\n\n2015/12/04(\u91d1) 19:30  \u301c  20:30\nhttp://fukuoka-cam-study.connpass.com/event/23438/\nJavaScript\u3067\u30b0\u30e9\u30d5\u4f5c\u308d\u3046\u52c9\u5f37\u4f1a \n\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066D3.js\u3067\u306e\u30b0\u30e9\u30d5\u4f5c\u6210\u3092\u5b66\u3076\u52c9\u5f37\u4f1a\n\n\n\u5185\u5bb9\n\n\u52c9\u5f37\u4f1a\u306e\u74b0\u5883\n\n\u30d6\u30e9\u30a6\u30b6\u306fChrome\u3067\u8aac\u660e\u3057\u307e\u3059\nRunstant\u3092\u4f7f\u3063\u3066\u30d6\u30e9\u30a6\u30b6\u306e\u307f\u3067\u5b66\u7fd2\u3059\u308b\nhttp://goo.gl/s2tfqa\n\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u8a66\u3059\nhttps://d3js.org/ \n\n\u4f8b)d3.zip\u3092\u89e3\u51cd\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u306bhtml\u3068js\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\n\nindex.html\n<!DOCTYPE html>\n<html lang=\"jp\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <title>D3 Test</title>\n  <script type=\"text/javascript\" src=\"d3.js\"></script>\n  <script type=\"text/javascript\" src=\"index.js\"></script>\n  <style>\n\n  </style>\n</head>\n\n<body>\n  <h1>Hello, D3</h1>\n  <div class=\"graph\"></div>\n</body>\n\n</html>\n\n\n\nindex.js\nwindow.onload = function() {\n  updateGraph();\n};\n\nfunction updateGraph () {\n  // CSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u9078\u629e\u3057\u307e\u3059\n  // \u8981\u7d20\u306f\u914d\u5217[]\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\n  // \u914d\u5217[]\u306bD3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u3064\u3051\u3066\u69d8\u3005\u306a\u52d5\u304d\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n  var graphPane = d3.select(\".graph\");\n\n  console.log(graphPane);\n}\n\n\n\nCSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u53d6\u5f97\nsource: http://goo.gl/L7fOW7\nfunction updateGraph () {\n  var graphPane = d3.select(\".graph\");\n}\n\n\nCSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u9078\u629e\u3057\u307e\u3059\n\u8981\u7d20\u306f\u914d\u5217[]\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\n\u914d\u5217[]\u306bD3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u3064\u3051\u3066\u69d8\u3005\u306a\u52d5\u304d\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\nmbostock/d3 Selections\nhttps://github.com/mbostock/d3/wiki/Selections\n\n\u2606\u8ab2\u984c\u2606\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u3092\u51fa\u3057\u3066\u307f\u307e\u3057\u3087\u3046\nconsole.log(graphPane);\n\nresult: http://goo.gl/45rY1X\n\n\u30b0\u30e9\u30d5\u30c7\u30fc\u30bf\u3068\u8981\u7d20\u3092\u7d10\u3065\u3051\nsource: http://goo.gl/PH55Ux\n\ndiv\u8981\u7d20\u306f\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u7a7a\u914d\u5217[]\u3092\u4f5c\u6210\u3057\u7a7a\u914d\u5217[]\u306bD3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4ed8\u3051\u308b\n\u30c7\u30fc\u30bf\u3068\u7d10\u3065\u304f\u3068 enter \u3068 exit \u3068\u3044\u3046\u72b6\u614b\u304c\u5897\u3048\u308b\n\nwindow.onload = function() {\n  updateGraph([200, 150, 300]);\n};\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n}\n\n\u2606\u8ab2\u984c\u2606 .data(dataList) \u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\nresult: http://goo.gl/lFzkEJ\n\nEnter(\u30c7\u30fc\u30bf\u304c\u8981\u7d20\u3088\u308a\u591a\u3044)\u3001Exit(\u30c7\u30fc\u30bf\u304c\u8981\u7d20\u3088\u308a\u5c11\u306a\u3044)\nsource: http://goo.gl/hu6AJx\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n\n  // enter\u306f\u8868\u793a\u8981\u7d20\u3088\u308a\u3082\u30c7\u30fc\u30bf\u304c\u591a\u3044\u3068\u30c7\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u308b\n  var enter = divBindList.enter();\n  console.log(\"enter=\", enter);\n\n  // exit\u306f\u8868\u793a\u8981\u7d20\u3088\u308a\u30c7\u30fc\u30bf\u304c\u5c11\u306a\u3044\u3068\u30c7\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u308b\n  var exit = divBindList.exit();\n  console.log(\"exit=\", exit);\n}\n\n\u203b\u521d\u56de\u52d5\u4f5c\u6642\u306f\u30b0\u30e9\u30d5\u8981\u7d20\u306f\u4e00\u3064\u3082\u306a\u3044\u306e\u3067\u5168\u3066enter\u5074\u306b\u767b\u9332\u3055\u308c\u307e\u3059\n\u2606\u8ab2\u984c\u2606console.log\u3092\u8ffd\u52a0\u3057\u3066 enter\u3068exit\u306e\u4e2d\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\nresult: http://goo.gl/1zBeY4\n\nd3.js - \u4e09\u3064\u306e\u5c0f\u5186 [\u8981\u7d20\u306e\u751f\u6210]\nhttp://ja.d3js.node.ws/document/tutorial/circle.html\n\n\nEnter\u72b6\u614b\u306e\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\nsource: http://goo.gl/duCqyb\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n\n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u5fdc\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u306e\u3067div\u8ffd\u52a0\n  divBindList\n    .enter()\n    .append(\"div\")\n    .classed(\"bar\", true);\n\n}\n\n\nappend \u3067\u8981\u7d20\u306e\u8ffd\u52a0\nclassed \u3067\u8ffd\u52a0\u3057\u305f\u8981\u7d20\u306e CSS\u306e\u30af\u30e9\u30b9\u540d\u3092\u4ed8\u4e0e\n\n.bar { border: solid 1px;  width: 10px;  height: 10px; }\n\n\u2606\u8ab2\u984c\u2606 .append(\"div\").classed(\"bar\", true); \u3092\u8ffd\u52a0\u3057\u307e\u3057\u3087\u3046\nresult: http://goo.gl/FPv6GT\n\nExit\u72b6\u614b\u3092\u4f5c\u3063\u3066\u307f\u308b\nsource: http://goo.gl/gu8dzS\nwindow.onload = function() {\n  updateGraph([200, 150, 300]);\n\n  setTimeout(function() {\n    updateGraph([200, 150]);\n  }, 2000);\n};\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n\n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList.enter()\n    .append(\"div\")\n    .classed(\"bar\", true);\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList\n    .exit()\n    .classed(\"red\", true);\n}\n\n\n\nsetTimeout\u3067 2\u79d2\u5f8c\u306b\u4e00\u3064\u3059\u304f\u306a\u3044\u30c7\u30fc\u30bf\u3092\u6e21\u3059\nExit\u72b6\u614b\u306e\u8981\u7d20\u306b classed \u3067 CSS\u30af\u30e9\u30b9\u540d\u3092\u4ed8\u4e0e\u3059\u308b\n\n.red { background-color: red; }\n\n\u2606\u8ab2\u984c\u2606exit\u72b6\u614b\u306ediv\u306b.red\u30af\u30e9\u30b9\u3092\u3064\u3051\u3066\u8d64\u304f\u3057\u307e\u3057\u3087\u3046\nsource: http://goo.gl/BhZJAh\n\n\u30c7\u30fc\u30bf\u3068\u8981\u7d20\u304c\u4e00\u81f4\u3059\u308b\u72b6\u614b\nsource: http://goo.gl/1L3Zi4\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n\n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList\n    .enter()\n    .append(\"div\")\n    .classed(\"bar\", true);\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList\n    .exit()\n    .remove();\n\n  // \u8981\u7d20\u3068\u30c7\u30fc\u30bf\u304c\u4e00\u81f4\u3059\u308b\u3068\u304d\uff5e\n  divBindList\n    .style(\"width\", function(d, i){\n      console.log(d, i);\n      return d + \"px\";\n    });\n}\n\n\nremove()\u306f\u524a\u9664 (\u88dc\u8db3)\nstyle()\u3067 CSS\u306ewidth\u3092 \u95a2\u6570\u3067 \u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n\u5f15\u6570d \u306f\u914d\u5217\u306e\u5024\u3001i\u306f\u914d\u5217\u306e\u6dfb\u3048\u5b57\n\n\u2606\u8ab2\u984c\u2606 return d+ \"px\"; \u306b\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\nresult: http://goo.gl/1hZFgK\n\nSVG\u3067\u63cf\u304f\nsource: http://goo.gl/fVBq9S\n    <svg class=\"graph\" ></svg>\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n\n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .enter()\n    .append(\"rect\")\n    .classed(\"bar\", true);\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .exit()\n    .remove();\n\n  // \u8981\u7d20\u3068\u30c7\u30fc\u30bf\u304c\u4e00\u81f4\u3059\u308b\u3068\u304d\uff5e\n  barBindList\n    .attr({\n      \"width\": function(d, i){ return d; },\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n}\n\n\n.graph\u306e\u30bf\u30b0\u3092 svg\u306b\u5909\u66f4\ndiv\u8981\u7d20\u3092rect\u8981\u7d20\u306b\u5909\u66f4\nstyle\u3067\u5e45\u6307\u5b9a\u3057\u3066\u3044\u305f\u3082\u306e\u3092 attr\u6307\u5b9a\u306b\u5909\u66f4\n\n\u2606\u8ab2\u984c\u2606\"y\"\u306ey\u5ea7\u6a19\u8a08\u7b97\u3092 i*10 \u306b\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\nresult: http://goo.gl/08WtTZ\n\n\u606f\u629c\u304d\uff08\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3)\nsource: http://goo.gl/BpIAs3\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n\n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n\n  // \u8981\u7d20\u3068\u30c7\u30fc\u30bf\u304c\u4e00\u81f4\u3059\u308b\u3068\u304d\uff5e\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return d; });\n\n}\n\n\ntransition() \u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3059\u308b\nduration()\u3067\u6642\u9593\u3092\u8a2d\u5b9a\u3059\u308b\nwidth\u306e\u5e45\u3092\u521d\u671f\u5024\uff10\u3067append\u3057\u3066\u304b\u3089\u5e45\u3092\u6307\u5b9a\u3059\u308b\n\n\u2606\u8ab2\u984c\u2606transition()\u3092\u8ffd\u52a0\u3057\u307e\u3057\u3087\u3046\nresult: http://goo.gl/9u65oQ\n\n\u30b9\u30b1\u30fc\u30eb\n\n\u3068\u3066\u3082\u5927\u304d\u306a\u5024\u3092\u3044\u308c\u308b\u3068\u30b0\u30e9\u30d5\u3092\u306f\u307f\u51fa\u3059...(ToT)\nsource: http://goo.gl/XmpmIr\n  updateGraph([2000, 1500, 3000]);\n\n\n\u753b\u9762\u8868\u793a\u5e45\u306b\u5408\u308f\u305b\u7e2e\u5c0f\u62e1\u5927\nsource: http://goo.gl/LZM4xR\n\u753b\u9762\u8868\u793a\u5e45\u306b\u5408\u308f\u305b\u3066\u7e2e\u5c0f\u62e1\u5927\u3092\u884c\u3046X\u5ea7\u6a19\u306e\u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u3092\u4f5c\u308b\n\nd3.js\u306a\u65e5\u3005 \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\uff1adomain\u3068range\nhttp://d3js.hatenadiary.jp/entry/2013/04/22/074725\n\nvar CANVAS_WIDTH = 300;\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\").attr(\"width\", CANVAS_WIDTH);\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n\n  var xScale = d3.scale.linear();\n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, CANVAS_WIDTH]);\n\n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); }); // <- POINT!\n}\n\n\nd3.scale.linear()\u3067\u7dda\u5f62\u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u304c\u51fa\u6765\u308b\ndomain \u304c\u5165\u529b\u5024\u306e\u5e45\nrange\u304c\u51fa\u529b\u5024\u306e\u5e45\n\u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u306b\u5024\u3092\u6e21\u3059\u3068\u753b\u9762\u8868\u793a\u4f4d\u7f6e\u5ea7\u6a19\u3092\u8a08\u7b97\u3057\u3066\u304f\u308c\u308b\n\n\u2606\u8ab2\u984c\u2606\u4e00\u756a\u4e0b\u306ewidth\u306e\u8a08\u7b97\u3092return xScale(d);\u3000\u306b\u4fee\u6b63\u3059\u308b\nresult: http://goo.gl/ZKtppI\n\n\u606f\u629c\u304d \u3061\u3087\u3063\u3068\u30bd\u30fc\u30b9\u3092\u6574\u7406\nsource: http://goo.gl/qgcQE2\nvar CANVAS_WIDTH = 300;\n\nwindow.onload = function() {\n  var barGraph = new BarGraph();\n\n  barGraph.updateGraph([2000, 1500, 3000]);\n\n  setTimeout(function() {\n    barGraph.updateGraph([2000, 1500]);\n  }, 2000);\n};\n\nvar BarGraph = function (){\n  this.graphPane = d3.select(\".graph\").attr(\"width\", CANVAS_WIDTH);\n  this.xScale = d3.scale.linear();\n};\n\nBarGraph.prototype.updateGraph = function (dataList) {\n  var graphPane = this.graphPane,\n      xScale = this.xScale;\n\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n\n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, CANVAS_WIDTH]);\n\n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); });\n};\n\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3067\u521d\u671f\u51e6\u7406\n\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9(BarGraph#updateGraph)\u3067\u5b9f\u884c\n\n\n\u8ef8\u3092\u4f5c\u308b\nX\u5ea7\u6a19\u306e\u30b9\u30b1\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30b0\u30e9\u30d5\u306bX\u5ea7\u6a19\u8ef8\u3092\u4f5c\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\nsource: http://goo.gl/A4U7JE\nvar BarGraph = function (){\n  this.graphPane = d3.select(\".graph\").attr(\"width\", CANVAS_WIDTH);\n  this.xScale = d3.scale.linear();\n  // X\u8ef8\u8ffd\u52a0\uff01\n  this.xAxis = d3.svg.axis().scale(this.xScale);\n  this.graphPane.append(\"g\")\n                .classed(\"x-axis-pane\", true)\n                .attr(\"transform\", \"translate(0, 100)\");\n};\n\nBarGraph.prototype.updateGraph = function (dataList) {\n  var graphPane = this.graphPane,\n      xScale = this.xScale,\n      xAxis  = this.xAxis;\n\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n\n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, CANVAS_WIDTH]);\n\n  // X\u8ef8\u3092\u8a08\u7b97\u3057\u3066\u63cf\u753b\n  graphPane.select(\"g.x-axis-pane\").call(xAxis);\n\n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); });\n};\n\n\u2606\u8ab2\u984c\u2606graphPane.select(\"g.x-axis-pane\")\u306e\u5f8c\u308d\u306b.call(xAxis);\u3092\u3064\u3051\u308b\nresult: http://goo.gl/h3TRW1\n\n\u8ef8\u304c\u5165\u308a\u304d\u308c\u306a\u3044\u306e\u3067\u4f59\u767d\u3092\u3064\u3051\u308b\nsource: http://goo.gl/lxPj6y\n\u30b0\u30e9\u30d5\u306fSVG\u306e\u8868\u793a\u9818\u57df\u3088\u308a\u3082\u5c0f\u3055\u304f\u3059\u308b\nvar CANVAS_WIDTH = 440,\n    PADDING = 20; // <- \u4f59\u767d\n\nwindow.onload = function() {\n  var barGraph = new BarGraph();\n\n  barGraph.updateGraph([2000, 1500, 3000]);\n\n  setTimeout(function() {\n    barGraph.updateGraph([2000, 1500]);\n  }, 2000);\n};\n\nvar BarGraph = function (){\n  this.graphPane = d3.select(\".graph\")\n                     .attr(\"width\", CANVAS_WIDTH)\n                     .append(\"g\")\n                     .attr(\"transform\", \"translate(\" + PADDING + \", 0)\");  // <- \u30b0\u30e9\u30d5\u5de6\u4f59\u767d\n  this.xScale = d3.scale.linear();\n  // X\u8ef8\u8ffd\u52a0\uff01\n  this.xAxis = d3.svg.axis().scale(this.xScale);\n  this.graphPane.append(\"g\")\n                .classed(\"x-axis-pane\", true)\n                .attr(\"transform\", \"translate(0, 100)\");\n};\n\nBarGraph.prototype.updateGraph = function (dataList) {\n  var graphPane = this.graphPane,\n      xScale = this.xScale,\n      xAxis  = this.xAxis,\n      graphWidth = CANVAS_WIDTH - PADDING*2; // <- \u63cf\u753b\u5e45\n\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n\n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, graphWidth]); // <- \u30b9\u30b1\u30fc\u30eb\u3082\u4f59\u767d\u306b\u5408\u308f\u305b\u3066\u8a2d\u5b9a\n\n  // X\u8ef8\u3092\u8a08\u7b97\u3057\u3066\u63cf\u753b\n  graphPane.select(\"g.x-axis-pane\").call(xAxis);\n\n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); });\n};\n\n\u2606\u8ab2\u984c\u2606PADDING = 0\u304b\u308920\u306b\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\nresult: http://goo.gl/epr7ov\n\n\u8272\nsource: http://goo.gl/yAF3Th\n\n\u30b9\u30b1\u30fc\u30eb\u306b\u5408\u308f\u305b\u3066\u8272\u4ed8\u3051\n\u9752\u304b\u3089\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u8d64\u306b\u3059\u308b\n  // \u5e45\u306b\u5408\u308f\u305b\u3066\u8272\u3092\u3064\u3051\u308b\n  var colorScale = d3.scale.linear()\n                        .domain([0, d3.max(dataList, function(d){ return d;})])\n                        .range([\"blue\",\"red\"]);\n\nsvg\u306e\u5c5e\u6027 fill\u3067\u8272\u3092\u5857\u308b\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); })\n    .attr(\"fill\", function(d){ return colorScale(d); });\n\n\n\u304a\u4efb\u305b\u306e\u8272\n\u2606\u8ab2\u984c\u2606 colorScale\u3092\u304a\u4efb\u305b\u306ed3.scale.category10\u306b\u5909\u66f4\u3059\u308b\nvar colorScale = d3.scale.category10();\n\nresult: http://goo.gl/I5fbF0\n\n\u8ef8\u3092\u88c5\u98fe\u3059\u308b\nsource: http://goo.gl/rFeiKr\n\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3092\u6574\u3048\u308b\n.x-axis-pane path,\n.x-axis-pane line {\n  /*\u5857\u308a\u3064\u3076\u3055\u306a\u3044*/\n  fill: none;\n  /*\u7dda\u306f\u9ed2*/\n  stroke: black;\n  /*\u7d30\u3044\u30b7\u30e3\u30fc\u30d7\u306a\u7dda\u3067*/\n  shape-rendering: crispEdges;\n}\n\n.tick line{\n  /*\u30b0\u30e9\u30d5\u4e2d\u306e\u7dda\u306f\u8584\u3081\u306e\u8272*/\n  opacity: 0.2;\n}\n\n\u63cf\u753b\u9818\u57df\u306e\u9ad8\u3055\u3092\u5b9a\u6570\u306b\u7528\u610f\nvar CANVAS_WIDTH = 440,\n    CANVAS_HEIGHT = 150, // <- \u7e26\u7dda\u3092\u5165\u308c\u308b\u70ba\u30b0\u30e9\u30d5\u306e\u9ad8\u3055\u3092\u8a2d\u5b9a\n    PADDING = 20; \n\nSVG\u30b5\u30a4\u30ba\u306b\u9ad8\u3055\u3092\u6307\u5b9a\n  this.graphPane = d3.select(\".graph\")\n                     .attr(\"width\", CANVAS_WIDTH)\n                     .attr(\"height\", CANVAS_HEIGHT) // <- \u63cf\u753bSVG\u5168\u4f53\u306e\u9ad8\u3055\n                     .append(\"g\")\n                     .attr(\"transform\", \"translate(\" + PADDING + \", 0)\"); \n\n\n\u9ad8\u3055\u5206\u4e0a\u306b\u7dda\u3092\u5f15\u304f\n  this.xAxis = d3.svg.axis().scale(this.xScale)\n                            .orient(\"bottom\") // \u6587\u5b57\u3092\u4e0b\u306b\n                            .innerTickSize(-CANVAS_HEIGHT) // \u30b0\u30e9\u30d5\u5185\u7dda\u3092\u4e0a\u306b\u5f15\u304f\n                            .outerTickSize(-CANVAS_HEIGHT) // \u30b0\u30e9\u30d5\u5916\u7dda\u3092\u4e0a\u306b\u5f15\u304f\n                            .tickPadding(10); // \u30b0\u30e9\u30d5\u8ef8\u3068\u6587\u5b57\u3068\u306e\u8ddd\u96e2\n\n\n\u2606\u8ab2\u984c\u2606 innerTickSize\u3068outerTickSize\u3092\u30de\u30a4\u30ca\u30b9\u5024\u306b\u5909\u66f4\u3057\u307e\u3057\u3087\u3046\nresult: http://goo.gl/7ncu65\n\n\u30a4\u30d9\u30f3\u30c8\u51e6\u7406\n\non\u3067\u30a4\u30d9\u30f3\u30c8\u3092\u767b\u9332\u3067\u304d\u307e\u3059\u3002\nthis\u306b\u81ea\u8eab\u306e\u8981\u7d20\u304c\u5165\u308b\u306e\u3067d3.select(this)\u3067\u64cd\u4f5c\u304c\u51fa\u6765\u307e\u3059\u3002\n  barBindList\n    .on(\"mouseover\", function(d, i){\n      d3.select(this).attr(\"stroke\", \"black\");\n    })\n    .on(\"mouseout\", function(d, i){\n      d3.select(this).attr(\"stroke\", null);\n    });\n\nsource : http://goo.gl/i2Qzb5\n\u2606\u8ab2\u984c\u2606 console.log\u3092 d3.select(this).attr(\"stroke\", \"black\");\nresult : http://goo.gl/RKdkOM\n\nselection.attr(name[, value])\nA null value will remove the specified attribute.\nhttps://github.com/mbostock/d3/wiki/Selections#attr\n\n\n# \u52c9\u5f37\u4f1a\u60c5\u5831\n\n- 2015/12/04(\u91d1) 19:30  \u301c  20:30\n- http://fukuoka-cam-study.connpass.com/event/23438/\n- JavaScript\u3067\u30b0\u30e9\u30d5\u4f5c\u308d\u3046\u52c9\u5f37\u4f1a \n- \u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066D3.js\u3067\u306e\u30b0\u30e9\u30d5\u4f5c\u6210\u3092\u5b66\u3076\u52c9\u5f37\u4f1a\n\n# \u5185\u5bb9\n\n## \u52c9\u5f37\u4f1a\u306e\u74b0\u5883\n\n- \u30d6\u30e9\u30a6\u30b6\u306fChrome\u3067\u8aac\u660e\u3057\u307e\u3059\n\n- Runstant\u3092\u4f7f\u3063\u3066\u30d6\u30e9\u30a6\u30b6\u306e\u307f\u3067\u5b66\u7fd2\u3059\u308b\nhttp://goo.gl/s2tfqa\n\n- \u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u30ed\u30fc\u30ab\u30eb\u74b0\u5883\u3067\u8a66\u3059  \nhttps://d3js.org/  \n\n\u4f8b)d3.zip\u3092\u89e3\u51cd\u3057\u305f\u30d5\u30a9\u30eb\u30c0\u306bhtml\u3068js\u30d5\u30a1\u30a4\u30eb\u3092\u7f6e\u304f\n\n```html:index.html\n<!DOCTYPE html>\n<html lang=\"jp\">\n\n<head>\n  <meta charset=\"utf-8\">\n  <title>D3 Test</title>\n  <script type=\"text/javascript\" src=\"d3.js\"></script>\n  <script type=\"text/javascript\" src=\"index.js\"></script>\n  <style>\n\n  </style>\n</head>\n\n<body>\n  <h1>Hello, D3</h1>\n  <div class=\"graph\"></div>\n</body>\n\n</html>\n```\n\n```javascript:index.js\nwindow.onload = function() {\n  updateGraph();\n};\n\nfunction updateGraph () {\n  // CSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u9078\u629e\u3057\u307e\u3059\n  // \u8981\u7d20\u306f\u914d\u5217[]\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\n  // \u914d\u5217[]\u306bD3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u3064\u3051\u3066\u69d8\u3005\u306a\u52d5\u304d\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n  var graphPane = d3.select(\".graph\");\n\n  console.log(graphPane);\n}\n```\n\n\n## CSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u53d6\u5f97\n\nsource: http://goo.gl/L7fOW7\n\n\n```javascript\nfunction updateGraph () {\n  var graphPane = d3.select(\".graph\");\n}\n```\n- CSS\u30bb\u30ec\u30af\u30bf\u3067\u8981\u7d20\u3092\u9078\u629e\u3057\u307e\u3059\n- \u8981\u7d20\u306f\u914d\u5217[]\u306b\u683c\u7d0d\u3055\u308c\u307e\u3059\n- \u914d\u5217[]\u306bD3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u3064\u3051\u3066\u69d8\u3005\u306a\u52d5\u304d\u304c\u51fa\u6765\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n> mbostock/d3 Selections\n> https://github.com/mbostock/d3/wiki/Selections\n\n*\u2606\u8ab2\u984c\u2606\u30b3\u30f3\u30bd\u30fc\u30eb\u306b\u30ed\u30b0\u3092\u51fa\u3057\u3066\u307f\u307e\u3057\u3087\u3046*\n\n```javascript\nconsole.log(graphPane);\n```\n\nresult: http://goo.gl/45rY1X\n\n\n## \u30b0\u30e9\u30d5\u30c7\u30fc\u30bf\u3068\u8981\u7d20\u3092\u7d10\u3065\u3051\n\nsource: http://goo.gl/PH55Ux\n\n- div\u8981\u7d20\u306f\u5b58\u5728\u3057\u306a\u3044\u306e\u3067\u7a7a\u914d\u5217[]\u3092\u4f5c\u6210\u3057\u7a7a\u914d\u5217[]\u306bD3.js\u306e\u30e1\u30bd\u30c3\u30c9\u3092\u4ed8\u3051\u308b\n- \u30c7\u30fc\u30bf\u3068\u7d10\u3065\u304f\u3068 **enter** \u3068 **exit** \u3068\u3044\u3046\u72b6\u614b\u304c\u5897\u3048\u308b\n\n```javascript\nwindow.onload = function() {\n  updateGraph([200, 150, 300]);\n};\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n}\n```\n\n\u2606\u8ab2\u984c\u2606 .data(dataList) \u3092\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\n\nresult: http://goo.gl/lFzkEJ\n\n## Enter(\u30c7\u30fc\u30bf\u304c\u8981\u7d20\u3088\u308a\u591a\u3044)\u3001Exit(\u30c7\u30fc\u30bf\u304c\u8981\u7d20\u3088\u308a\u5c11\u306a\u3044)\n\nsource: http://goo.gl/hu6AJx\n\n```javascript\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n  \n  // enter\u306f\u8868\u793a\u8981\u7d20\u3088\u308a\u3082\u30c7\u30fc\u30bf\u304c\u591a\u3044\u3068\u30c7\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u308b\n  var enter = divBindList.enter();\n  console.log(\"enter=\", enter);\n  \n  // exit\u306f\u8868\u793a\u8981\u7d20\u3088\u308a\u30c7\u30fc\u30bf\u304c\u5c11\u306a\u3044\u3068\u30c7\u30fc\u30bf\u304c\u8a2d\u5b9a\u3055\u308c\u308b\n  var exit = divBindList.exit();\n  console.log(\"exit=\", exit);\n}\n```\n\n\u203b\u521d\u56de\u52d5\u4f5c\u6642\u306f\u30b0\u30e9\u30d5\u8981\u7d20\u306f\u4e00\u3064\u3082\u306a\u3044\u306e\u3067\u5168\u3066enter\u5074\u306b\u767b\u9332\u3055\u308c\u307e\u3059\n\n\u2606\u8ab2\u984c\u2606console.log\u3092\u8ffd\u52a0\u3057\u3066 enter\u3068exit\u306e\u4e2d\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\n\nresult: http://goo.gl/1zBeY4\n\n> d3.js - \u4e09\u3064\u306e\u5c0f\u5186 [\u8981\u7d20\u306e\u751f\u6210]\n> http://ja.d3js.node.ws/document/tutorial/circle.html\n\n## Enter\u72b6\u614b\u306e\u30c7\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\n\nsource: http://goo.gl/duCqyb\n\n```javascript\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n  \n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u5fdc\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u306e\u3067div\u8ffd\u52a0\n  divBindList\n    .enter()\n    .append(\"div\")\n    .classed(\"bar\", true);\n\n}\n```\n\n- append \u3067\u8981\u7d20\u306e\u8ffd\u52a0\n- classed \u3067\u8ffd\u52a0\u3057\u305f\u8981\u7d20\u306e CSS\u306e\u30af\u30e9\u30b9\u540d\u3092\u4ed8\u4e0e\n\n```css\n.bar { border: solid 1px;  width: 10px;  height: 10px; }\n```\n\n\u2606\u8ab2\u984c\u2606 .append(\"div\").classed(\"bar\", true); \u3092\u8ffd\u52a0\u3057\u307e\u3057\u3087\u3046\n\nresult: http://goo.gl/FPv6GT\n\n\n## Exit\u72b6\u614b\u3092\u4f5c\u3063\u3066\u307f\u308b\n\nsource: http://goo.gl/gu8dzS\n\n```javascript\nwindow.onload = function() {\n  updateGraph([200, 150, 300]);\n  \n  setTimeout(function() {\n    updateGraph([200, 150]);\n  }, 2000);\n};\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n  \n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList.enter()\n    .append(\"div\")\n    .classed(\"bar\", true);\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList\n    .exit()\n    .classed(\"red\", true);\n}\n\n```\n\n- setTimeout\u3067 2\u79d2\u5f8c\u306b\u4e00\u3064\u3059\u304f\u306a\u3044\u30c7\u30fc\u30bf\u3092\u6e21\u3059\n- Exit\u72b6\u614b\u306e\u8981\u7d20\u306b classed \u3067 CSS\u30af\u30e9\u30b9\u540d\u3092\u4ed8\u4e0e\u3059\u308b\n\n```css\n.red { background-color: red; }\n```\n\n\u2606\u8ab2\u984c\u2606exit\u72b6\u614b\u306ediv\u306b.red\u30af\u30e9\u30b9\u3092\u3064\u3051\u3066\u8d64\u304f\u3057\u307e\u3057\u3087\u3046\n\nsource: http://goo.gl/BhZJAh\n\n\n\n## \u30c7\u30fc\u30bf\u3068\u8981\u7d20\u304c\u4e00\u81f4\u3059\u308b\u72b6\u614b\n\nsource: http://goo.gl/1L3Zi4\n\n```javascript\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var divBindList = graphPane.selectAll(\"div\").data(dataList);\n  \n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList\n    .enter()\n    .append(\"div\")\n    .classed(\"bar\", true);\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  divBindList\n    .exit()\n    .remove();\n    \n  // \u8981\u7d20\u3068\u30c7\u30fc\u30bf\u304c\u4e00\u81f4\u3059\u308b\u3068\u304d\uff5e\n  divBindList\n    .style(\"width\", function(d, i){\n      console.log(d, i);\n      return d + \"px\";\n    });\n}\n```\n\n- remove()\u306f\u524a\u9664 (\u88dc\u8db3)\n- style()\u3067 CSS\u306ewidth\u3092 **\u95a2\u6570\u3067** \u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\n- \u5f15\u6570d \u306f\u914d\u5217\u306e\u5024\u3001i\u306f\u914d\u5217\u306e\u6dfb\u3048\u5b57\n\n\u2606\u8ab2\u984c\u2606 return d+ \"px\"; \u306b\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\n\nresult: http://goo.gl/1hZFgK\n\n\n## SVG\u3067\u63cf\u304f\n\nsource: http://goo.gl/fVBq9S\n\n```html\n    <svg class=\"graph\" ></svg>\n```\n\n```javascript\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n  \n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .enter()\n    .append(\"rect\")\n    .classed(\"bar\", true);\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .exit()\n    .remove();\n    \n  // \u8981\u7d20\u3068\u30c7\u30fc\u30bf\u304c\u4e00\u81f4\u3059\u308b\u3068\u304d\uff5e\n  barBindList\n    .attr({\n      \"width\": function(d, i){ return d; },\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n}\n```\n\n- .graph\u306e\u30bf\u30b0\u3092 svg\u306b\u5909\u66f4\n- div\u8981\u7d20\u3092rect\u8981\u7d20\u306b\u5909\u66f4\n- style\u3067\u5e45\u6307\u5b9a\u3057\u3066\u3044\u305f\u3082\u306e\u3092 attr\u6307\u5b9a\u306b\u5909\u66f4\n\n\u2606\u8ab2\u984c\u2606\"y\"\u306ey\u5ea7\u6a19\u8a08\u7b97\u3092 i*10 \u306b\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\n\nresult: http://goo.gl/08WtTZ\n\n## \u606f\u629c\u304d\uff08\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3)\n\nsource: http://goo.gl/BpIAs3\n\n```javascript\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\");\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n  \n  // \u30c7\u30fc\u30bf\u306b\u5bfe\u3059\u308b\u8981\u7d20\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  // \u8981\u7d20\u306b\u5bfe\u5fdc\u3059\u308b\u30c7\u30fc\u30bf\u304c\u8db3\u308a\u306a\u3044\u6642\uff5e\n  barBindList\n    .exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n    \n  // \u8981\u7d20\u3068\u30c7\u30fc\u30bf\u304c\u4e00\u81f4\u3059\u308b\u3068\u304d\uff5e\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return d; });\n    \n}\n```\n\n- transition() \u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3059\u308b\n- duration()\u3067\u6642\u9593\u3092\u8a2d\u5b9a\u3059\u308b\n- width\u306e\u5e45\u3092\u521d\u671f\u5024\uff10\u3067append\u3057\u3066\u304b\u3089\u5e45\u3092\u6307\u5b9a\u3059\u308b\n\n\u2606\u8ab2\u984c\u2606transition()\u3092\u8ffd\u52a0\u3057\u307e\u3057\u3087\u3046\n\nresult: http://goo.gl/9u65oQ\n\n## \u30b9\u30b1\u30fc\u30eb\n\n### \u3068\u3066\u3082\u5927\u304d\u306a\u5024\u3092\u3044\u308c\u308b\u3068\u30b0\u30e9\u30d5\u3092\u306f\u307f\u51fa\u3059...(ToT)\n\nsource: http://goo.gl/XmpmIr\n\n```javascript\n  updateGraph([2000, 1500, 3000]);\n```\n\n### \u753b\u9762\u8868\u793a\u5e45\u306b\u5408\u308f\u305b\u7e2e\u5c0f\u62e1\u5927\n\nsource: http://goo.gl/LZM4xR\n\n\u753b\u9762\u8868\u793a\u5e45\u306b\u5408\u308f\u305b\u3066\u7e2e\u5c0f\u62e1\u5927\u3092\u884c\u3046X\u5ea7\u6a19\u306e\u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u3092\u4f5c\u308b\n\n> d3.js\u306a\u65e5\u3005 \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\uff1adomain\u3068range\n> http://d3js.hatenadiary.jp/entry/2013/04/22/074725\n\n\n```javascript\nvar CANVAS_WIDTH = 300;\n\nfunction updateGraph (dataList) {\n  var graphPane = d3.select(\".graph\").attr(\"width\", CANVAS_WIDTH);\n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n  \n  var xScale = d3.scale.linear();\n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, CANVAS_WIDTH]);\n  \n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n    \n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); }); // <- POINT!\n}\n```\n- d3.scale.linear()\u3067\u7dda\u5f62\u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u304c\u51fa\u6765\u308b\n- domain \u304c\u5165\u529b\u5024\u306e\u5e45\n- range\u304c\u51fa\u529b\u5024\u306e\u5e45\n- \u30b9\u30b1\u30fc\u30eb\u95a2\u6570\u306b\u5024\u3092\u6e21\u3059\u3068\u753b\u9762\u8868\u793a\u4f4d\u7f6e\u5ea7\u6a19\u3092\u8a08\u7b97\u3057\u3066\u304f\u308c\u308b\n\n\u2606\u8ab2\u984c\u2606\u4e00\u756a\u4e0b\u306ewidth\u306e\u8a08\u7b97\u3092return xScale(d);\u3000\u306b\u4fee\u6b63\u3059\u308b\n\nresult: http://goo.gl/ZKtppI\n\n## \u606f\u629c\u304d \u3061\u3087\u3063\u3068\u30bd\u30fc\u30b9\u3092\u6574\u7406\n\nsource: http://goo.gl/qgcQE2\n\n```javascript\nvar CANVAS_WIDTH = 300;\n\nwindow.onload = function() {\n  var barGraph = new BarGraph();\n  \n  barGraph.updateGraph([2000, 1500, 3000]);\n  \n  setTimeout(function() {\n    barGraph.updateGraph([2000, 1500]);\n  }, 2000);\n};\n\nvar BarGraph = function (){\n  this.graphPane = d3.select(\".graph\").attr(\"width\", CANVAS_WIDTH);\n  this.xScale = d3.scale.linear();\n};\n\nBarGraph.prototype.updateGraph = function (dataList) {\n  var graphPane = this.graphPane,\n      xScale = this.xScale;\n  \n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n  \n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, CANVAS_WIDTH]);\n  \n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n    \n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); });\n};\n```\n\n- \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u95a2\u6570\u3067\u521d\u671f\u51e6\u7406\n- \u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u30e1\u30bd\u30c3\u30c9(BarGraph#updateGraph)\u3067\u5b9f\u884c\n\n## \u8ef8\u3092\u4f5c\u308b\n\nX\u5ea7\u6a19\u306e\u30b9\u30b1\u30fc\u30eb\u3092\u4f7f\u3063\u3066\u30b0\u30e9\u30d5\u306bX\u5ea7\u6a19\u8ef8\u3092\u4f5c\u308b\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\nsource: http://goo.gl/A4U7JE\n\n```javascript\nvar BarGraph = function (){\n  this.graphPane = d3.select(\".graph\").attr(\"width\", CANVAS_WIDTH);\n  this.xScale = d3.scale.linear();\n  // X\u8ef8\u8ffd\u52a0\uff01\n  this.xAxis = d3.svg.axis().scale(this.xScale);\n  this.graphPane.append(\"g\")\n                .classed(\"x-axis-pane\", true)\n                .attr(\"transform\", \"translate(0, 100)\");\n};\n\nBarGraph.prototype.updateGraph = function (dataList) {\n  var graphPane = this.graphPane,\n      xScale = this.xScale,\n      xAxis  = this.xAxis;\n  \n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n  \n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, CANVAS_WIDTH]);\n  \n  // X\u8ef8\u3092\u8a08\u7b97\u3057\u3066\u63cf\u753b\n  graphPane.select(\"g.x-axis-pane\").call(xAxis);\n  \n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n    \n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); });\n};\n```\n\n\u2606\u8ab2\u984c\u2606graphPane.select(\"g.x-axis-pane\")\u306e\u5f8c\u308d\u306b.call(xAxis);\u3092\u3064\u3051\u308b\n\nresult: http://goo.gl/h3TRW1\n\n## \u8ef8\u304c\u5165\u308a\u304d\u308c\u306a\u3044\u306e\u3067\u4f59\u767d\u3092\u3064\u3051\u308b\n\nsource: http://goo.gl/lxPj6y\n\n\u30b0\u30e9\u30d5\u306fSVG\u306e\u8868\u793a\u9818\u57df\u3088\u308a\u3082\u5c0f\u3055\u304f\u3059\u308b\n\n```javascript\nvar CANVAS_WIDTH = 440,\n    PADDING = 20; // <- \u4f59\u767d\n\nwindow.onload = function() {\n  var barGraph = new BarGraph();\n  \n  barGraph.updateGraph([2000, 1500, 3000]);\n  \n  setTimeout(function() {\n    barGraph.updateGraph([2000, 1500]);\n  }, 2000);\n};\n\nvar BarGraph = function (){\n  this.graphPane = d3.select(\".graph\")\n                     .attr(\"width\", CANVAS_WIDTH)\n                     .append(\"g\")\n                     .attr(\"transform\", \"translate(\" + PADDING + \", 0)\");  // <- \u30b0\u30e9\u30d5\u5de6\u4f59\u767d\n  this.xScale = d3.scale.linear();\n  // X\u8ef8\u8ffd\u52a0\uff01\n  this.xAxis = d3.svg.axis().scale(this.xScale);\n  this.graphPane.append(\"g\")\n                .classed(\"x-axis-pane\", true)\n                .attr(\"transform\", \"translate(0, 100)\");\n};\n\nBarGraph.prototype.updateGraph = function (dataList) {\n  var graphPane = this.graphPane,\n      xScale = this.xScale,\n      xAxis  = this.xAxis,\n      graphWidth = CANVAS_WIDTH - PADDING*2; // <- \u63cf\u753b\u5e45\n  \n  var barBindList = graphPane.selectAll(\"rect\").data(dataList);\n  \n  xScale.domain([0, d3.max(dataList, function(d){ return d;})]);\n  xScale.range([0, graphWidth]); // <- \u30b9\u30b1\u30fc\u30eb\u3082\u4f59\u767d\u306b\u5408\u308f\u305b\u3066\u8a2d\u5b9a\n  \n  // X\u8ef8\u3092\u8a08\u7b97\u3057\u3066\u63cf\u753b\n  graphPane.select(\"g.x-axis-pane\").call(xAxis);\n  \n  barBindList.enter()\n    .append(\"rect\")\n    .classed(\"bar\", true)\n    .attr({\n      \"width\": 0,\n      \"height\": 8,\n      \"x\": 0,\n      \"y\": function(d, i){ return i*10; }\n    });\n\n  barBindList.exit()\n    .transition().duration(1000)\n    .attr(\"width\", 0)\n    .remove();\n    \n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); });\n};\n```\n\n\u2606\u8ab2\u984c\u2606PADDING = 0\u304b\u308920\u306b\u4fee\u6b63\u3057\u307e\u3057\u3087\u3046\n\nresult: http://goo.gl/epr7ov\n\n\n## \u8272\n\nsource: http://goo.gl/yAF3Th\n\n### \u30b9\u30b1\u30fc\u30eb\u306b\u5408\u308f\u305b\u3066\u8272\u4ed8\u3051\n\n\u9752\u304b\u3089\u5024\u304c\u5927\u304d\u3044\u307b\u3069\u8d64\u306b\u3059\u308b\n\n```javascript\n  // \u5e45\u306b\u5408\u308f\u305b\u3066\u8272\u3092\u3064\u3051\u308b\n  var colorScale = d3.scale.linear()\n                        .domain([0, d3.max(dataList, function(d){ return d;})])\n                        .range([\"blue\",\"red\"]);\n```\n\nsvg\u306e\u5c5e\u6027 fill\u3067\u8272\u3092\u5857\u308b\n\n```javascript\n  barBindList\n    .transition().duration(1000)\n    .attr(\"width\", function(d, i){ return xScale(d); })\n    .attr(\"fill\", function(d){ return colorScale(d); });\n```\n\n### \u304a\u4efb\u305b\u306e\u8272\n\n\u2606\u8ab2\u984c\u2606 colorScale\u3092\u304a\u4efb\u305b\u306ed3.scale.category10\u306b\u5909\u66f4\u3059\u308b\n\n```javascript\nvar colorScale = d3.scale.category10();\n```\n\nresult: http://goo.gl/I5fbF0\n\n\n## \u8ef8\u3092\u88c5\u98fe\u3059\u308b\n\nsource: http://goo.gl/rFeiKr\n\n\u30b9\u30bf\u30a4\u30eb\u30b7\u30fc\u30c8\u3092\u6574\u3048\u308b\n\n```css\n.x-axis-pane path,\n.x-axis-pane line {\n  /*\u5857\u308a\u3064\u3076\u3055\u306a\u3044*/\n  fill: none;\n  /*\u7dda\u306f\u9ed2*/\n  stroke: black;\n  /*\u7d30\u3044\u30b7\u30e3\u30fc\u30d7\u306a\u7dda\u3067*/\n  shape-rendering: crispEdges;\n}\n\n.tick line{\n  /*\u30b0\u30e9\u30d5\u4e2d\u306e\u7dda\u306f\u8584\u3081\u306e\u8272*/\n  opacity: 0.2;\n}\n```\n\n\u63cf\u753b\u9818\u57df\u306e\u9ad8\u3055\u3092\u5b9a\u6570\u306b\u7528\u610f\n\n```javascript\nvar CANVAS_WIDTH = 440,\n    CANVAS_HEIGHT = 150, // <- \u7e26\u7dda\u3092\u5165\u308c\u308b\u70ba\u30b0\u30e9\u30d5\u306e\u9ad8\u3055\u3092\u8a2d\u5b9a\n    PADDING = 20; \n```\n\nSVG\u30b5\u30a4\u30ba\u306b\u9ad8\u3055\u3092\u6307\u5b9a\n\n```javascript\n  this.graphPane = d3.select(\".graph\")\n                     .attr(\"width\", CANVAS_WIDTH)\n                     .attr(\"height\", CANVAS_HEIGHT) // <- \u63cf\u753bSVG\u5168\u4f53\u306e\u9ad8\u3055\n                     .append(\"g\")\n                     .attr(\"transform\", \"translate(\" + PADDING + \", 0)\"); \n\n```\n\n\u9ad8\u3055\u5206\u4e0a\u306b\u7dda\u3092\u5f15\u304f\n\n```javascript\n  this.xAxis = d3.svg.axis().scale(this.xScale)\n                            .orient(\"bottom\") // \u6587\u5b57\u3092\u4e0b\u306b\n                            .innerTickSize(-CANVAS_HEIGHT) // \u30b0\u30e9\u30d5\u5185\u7dda\u3092\u4e0a\u306b\u5f15\u304f\n                            .outerTickSize(-CANVAS_HEIGHT) // \u30b0\u30e9\u30d5\u5916\u7dda\u3092\u4e0a\u306b\u5f15\u304f\n                            .tickPadding(10); // \u30b0\u30e9\u30d5\u8ef8\u3068\u6587\u5b57\u3068\u306e\u8ddd\u96e2\n\n```\n\n\u2606\u8ab2\u984c\u2606 innerTickSize\u3068outerTickSize\u3092\u30de\u30a4\u30ca\u30b9\u5024\u306b\u5909\u66f4\u3057\u307e\u3057\u3087\u3046\n\nresult: http://goo.gl/7ncu65\n\n\n## \u30a4\u30d9\u30f3\u30c8\u51e6\u7406\n\n### on\u3067\u30a4\u30d9\u30f3\u30c8\u3092\u767b\u9332\u3067\u304d\u307e\u3059\u3002\n\nthis\u306b\u81ea\u8eab\u306e\u8981\u7d20\u304c\u5165\u308b\u306e\u3067d3.select(this)\u3067\u64cd\u4f5c\u304c\u51fa\u6765\u307e\u3059\u3002\n\n```javascript\n  barBindList\n    .on(\"mouseover\", function(d, i){\n      d3.select(this).attr(\"stroke\", \"black\");\n    })\n    .on(\"mouseout\", function(d, i){\n      d3.select(this).attr(\"stroke\", null);\n    });\n```\nsource : http://goo.gl/i2Qzb5\n\n\u2606\u8ab2\u984c\u2606 console.log\u3092 d3.select(this).attr(\"stroke\", \"black\");\n\nresult : http://goo.gl/RKdkOM\n\n> selection.attr(name[, value])\n> A null value will remove the specified attribute.\n> https://github.com/mbostock/d3/wiki/Selections#attr\n", "tags": ["d3.js", "JavaScript"]}