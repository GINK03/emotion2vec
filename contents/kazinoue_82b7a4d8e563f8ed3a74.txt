{"context": "Delphi\u3067\u4f5c\u3063\u305f\u30b9\u30de\u30db\u30a2\u30d7\u30ea\u3067\u3001iOS/Android\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3084\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3092\u8abf\u3079\u3066\u307f\u305f\u3089\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u4f9d\u5b58\u306e\u7b87\u6240\u304c\u3042\u3063\u3066\u610f\u5916\u306b\u624b\u9593\u53d6\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n\u5b9f\u88c5\u4f8b\n\u4ee5\u4e0b\u306e\u5b9f\u88c5\u4f8b\u3067\u306f FMX \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d5\u30a9\u30fc\u30e0\u540d (TForm1) \u3092\u7528\u3044\u3066\u3044\u308b\u3002\nunit uOSVersionAndLocale;\n\ninterface\n\nuses\n  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,\n  FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs, FMX.StdCtrls,\n  FMX.Controls.Presentation, FMX.ScrollBox, FMX.Memo, FMX.Platform\n{$IFDEF Android}\n  ,Androidapi.JNI.Os\n  ,Androidapi.Helpers\n{$ENDIF}\n{$IFDEF IOS}\n  ,iOSapi.UIKit\n  ,Posix.SysSysctl\n  ,Posix.StdDef\n{$ENDIF}\n  ;\n\ntype\n  TForm1 = class(TForm)\n    Memo1: TMemo;\n    ToolBar1: TToolBar;\n    Button1: TButton;\n    procedure Button1Click(Sender: TObject);\n  private\n{$IFDEF IOS}\n    function GetDeviceModelString: String;\n{$ENDIF}\n    { private \u5ba3\u8a00 }\n  public\n    { public \u5ba3\u8a00 }\n  end;\n\nvar\n  Form1: TForm1;\n\nimplementation\n\n{$R *.fmx}\n\n{$IFDEF IOS}\nfunction TForm1.GetDeviceModelString: String;\nvar\n  Size: size_t;\n  DeviceModelBuffer: array of Byte;\nbegin\n  sysctlbyname('hw.machine', nil, @Size, nil, 0);\n\n  if Size > 0 then\n  begin\n    SetLength(DeviceModelBuffer, Size);\n    sysctlbyname('hw.machine', @DeviceModelBuffer[0], @Size, nil, 0);\n    Result := UTF8ToString(MarshaledAString(DeviceModelBuffer));\n  end\n  else\n    Result := EmptyStr;\nend;\n{$ENDIF}\n\n\nprocedure TForm1.Button1Click(Sender: TObject);\nvar\n  OSVersion: TOSVersion;\n  OSLang: String;\n  LocaleService: IFMXLocaleService;\n\n  ModelName: String;\nbegin\n  ModelName := 'unknown';\n{$IFDEF Android}\n  ModelName := JStringToString(TJBuild.JavaClass.MODEL);\n{$ENDIF}\n{$IFDEF IOS}\n  ModelName := GetDeviceModelString;\n{$ENDIF}\n\n  Memo1.Lines.Add(Format('ModelName=%s', [ ModelName ] ));\n  Memo1.Lines.Add(Format('OSName=%s', [OSVersion.Name]));\n  Memo1.Lines.Add(Format('Platform=%d', [Ord(OSVersion.Platform)]));\n  Memo1.Lines.Add(Format('Version=%d.%d', [OSVersion.Major,OSVersion.Minor]));\n\n  OSLang := '';\n  if TPlatformServices.Current.SupportsPlatformService(IFMXLocaleService, IInterface(LocaleService)) then\n  begin\n    OSLang := LocaleService.GetCurrentLangID();\n\n    // Android \u306f\u65e5\u672c\u8a9e\u74b0\u5883\u3067 Locale = jp \u3092\u8fd4\u3059\u306e\u3067\u3001\u3053\u308c\u3092 ja \u306b\u4ed8\u3051\u66ff\u3048\u308b\n    if (OSLang = 'jp') then OSLang := 'ja';\n  end;\n  Memo1.Lines.Add(Format('Lang=%s', [ OSLang ] ));\n\nend;\n\nend.\n\n\n\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\u306a\u3069\n\u6761\u4ef6\u4ed8\u304d\u30b3\u30f3\u30d1\u30a4\u30eb\uff08Delphi\uff09\nhttp://docwiki.embarcadero.com/RADStudio/Seattle/ja/%E6%9D%A1%E4%BB%B6%E4%BB%98%E3%81%8D%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%EF%BC%88Delphi%EF%BC%89\nDelphi XE7\u3067OS\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\nhttp://www.gesource.jp/weblog/?p=6895\n\u73fe\u5728\u306e\u30ed\u30b1\u30fc\u30eb\uff08en\u3001 fr\u3001ja \u306a\u3069\uff09\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\nhttp://www.gesource.jp/weblog/?p=7121\nDelphi XE5\u3067Android\u306e\u30b7\u30b9\u30c6\u30e0\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\nhttp://www.gesource.jp/weblog/?p=6314\nHow to get the iOS device model?\nhttps://plus.google.com/112344597455394727345/posts/ToHHsAh6XoW\nDelphi\u3067\u4f5c\u3063\u305f\u30b9\u30de\u30db\u30a2\u30d7\u30ea\u3067\u3001iOS/Android\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3084\u30c7\u30d0\u30a4\u30b9\u540d\u3092\u78ba\u8a8d\u3059\u308b\u65b9\u6cd5\u3092\u8abf\u3079\u3066\u307f\u305f\u3089\u3001\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u4f9d\u5b58\u306e\u7b87\u6240\u304c\u3042\u3063\u3066\u610f\u5916\u306b\u624b\u9593\u53d6\u3063\u305f\u306e\u3067\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n## \u5b9f\u88c5\u4f8b\n\n\u4ee5\u4e0b\u306e\u5b9f\u88c5\u4f8b\u3067\u306f FMX \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30d5\u30a9\u30fc\u30e0\u540d (TForm1) \u3092\u7528\u3044\u3066\u3044\u308b\u3002\n\n```Delphi\nunit uOSVersionAndLocale;\n\ninterface\n\nuses\n  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,\n  FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs, FMX.StdCtrls,\n  FMX.Controls.Presentation, FMX.ScrollBox, FMX.Memo, FMX.Platform\n{$IFDEF Android}\n  ,Androidapi.JNI.Os\n  ,Androidapi.Helpers\n{$ENDIF}\n{$IFDEF IOS}\n  ,iOSapi.UIKit\n  ,Posix.SysSysctl\n  ,Posix.StdDef\n{$ENDIF}\n  ;\n\ntype\n  TForm1 = class(TForm)\n    Memo1: TMemo;\n    ToolBar1: TToolBar;\n    Button1: TButton;\n    procedure Button1Click(Sender: TObject);\n  private\n{$IFDEF IOS}\n    function GetDeviceModelString: String;\n{$ENDIF}\n    { private \u5ba3\u8a00 }\n  public\n    { public \u5ba3\u8a00 }\n  end;\n\nvar\n  Form1: TForm1;\n\nimplementation\n\n{$R *.fmx}\n\n{$IFDEF IOS}\nfunction TForm1.GetDeviceModelString: String;\nvar\n  Size: size_t;\n  DeviceModelBuffer: array of Byte;\nbegin\n  sysctlbyname('hw.machine', nil, @Size, nil, 0);\n\n  if Size > 0 then\n  begin\n    SetLength(DeviceModelBuffer, Size);\n    sysctlbyname('hw.machine', @DeviceModelBuffer[0], @Size, nil, 0);\n    Result := UTF8ToString(MarshaledAString(DeviceModelBuffer));\n  end\n  else\n    Result := EmptyStr;\nend;\n{$ENDIF}\n\n\nprocedure TForm1.Button1Click(Sender: TObject);\nvar\n  OSVersion: TOSVersion;\n  OSLang: String;\n  LocaleService: IFMXLocaleService;\n\n  ModelName: String;\nbegin\n  ModelName := 'unknown';\n{$IFDEF Android}\n  ModelName := JStringToString(TJBuild.JavaClass.MODEL);\n{$ENDIF}\n{$IFDEF IOS}\n  ModelName := GetDeviceModelString;\n{$ENDIF}\n\n  Memo1.Lines.Add(Format('ModelName=%s', [ ModelName ] ));\n  Memo1.Lines.Add(Format('OSName=%s', [OSVersion.Name]));\n  Memo1.Lines.Add(Format('Platform=%d', [Ord(OSVersion.Platform)]));\n  Memo1.Lines.Add(Format('Version=%d.%d', [OSVersion.Major,OSVersion.Minor]));\n\n  OSLang := '';\n  if TPlatformServices.Current.SupportsPlatformService(IFMXLocaleService, IInterface(LocaleService)) then\n  begin\n    OSLang := LocaleService.GetCurrentLangID();\n\n    // Android \u306f\u65e5\u672c\u8a9e\u74b0\u5883\u3067 Locale = jp \u3092\u8fd4\u3059\u306e\u3067\u3001\u3053\u308c\u3092 ja \u306b\u4ed8\u3051\u66ff\u3048\u308b\n    if (OSLang = 'jp') then OSLang := 'ja';\n  end;\n  Memo1.Lines.Add(Format('Lang=%s', [ OSLang ] ));\n\nend;\n\nend.\n```\n\n\n## \u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8\u306a\u3069\n\u6761\u4ef6\u4ed8\u304d\u30b3\u30f3\u30d1\u30a4\u30eb\uff08Delphi\uff09\nhttp://docwiki.embarcadero.com/RADStudio/Seattle/ja/%E6%9D%A1%E4%BB%B6%E4%BB%98%E3%81%8D%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%EF%BC%88Delphi%EF%BC%89\n\nDelphi XE7\u3067OS\u306e\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u3068\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\nhttp://www.gesource.jp/weblog/?p=6895\n\n\u73fe\u5728\u306e\u30ed\u30b1\u30fc\u30eb\uff08en\u3001 fr\u3001ja \u306a\u3069\uff09\u3092\u53d6\u5f97\u3059\u308b\u306b\u306f\nhttp://www.gesource.jp/weblog/?p=7121\n\nDelphi XE5\u3067Android\u306e\u30b7\u30b9\u30c6\u30e0\u60c5\u5831\u3092\u53d6\u5f97\u3059\u308b\nhttp://www.gesource.jp/weblog/?p=6314\n\nHow to get the iOS device model?\nhttps://plus.google.com/112344597455394727345/posts/ToHHsAh6XoW\n\n", "tags": ["Delphi", "RadStudio", "iOS", "Android", "FireMonkey"]}