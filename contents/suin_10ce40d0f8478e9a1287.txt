{"context": " More than 1 year has passed since last update.PlayFramework\u3067\u72ec\u81ea\u306e\u8a8d\u8a3c\u3092play2-auth\u3067\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e\u81ea\u5206\u5411\u3051\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u3059\u3002\u72ec\u81ea\u3068\u3044\u3046\u306e\u306f\u3001\u3088\u304f\u3042\u308a\u305d\u3046\u306aMySQL\u306a\u3069\u306eRDBMS\u3092\u4f7f\u3046\u8a8d\u8a3c\u3067\u306f\u306a\u304f\u3001\u793e\u5185\u306bRESTful API\u3067\u8a8d\u8a3c\u3092\u884c\u3046\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u5099\u3048\u3066\u3044\u308b\u8a8d\u8a3c\u30b5\u30fc\u30d0\u304c\u3042\u308a\u3001\u305d\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u3092\u5b9f\u88c5\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\u30b4\u30fc\u30eb\n\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u304c\u76ee\u6307\u3059\u30b4\u30fc\u30eb\u306f\u4e0b\u306e\u76ee\u6a19\u3092\u5168\u3066\u9054\u6210\u3059\u308b\u3053\u3068\u3067\u3059\u3002\n\nplay2-auth\u3092\u4f7f\u3063\u3066\nAjax\u7528\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8/api/auth\u3092\u4f5c\u6210\u3057\u3001POST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308a\u3001\u8a8d\u8a3c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\nAjax\u7528\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8/api/user\u3092\u4f5c\u6210\u3057\u3001\u8a8d\u53ef\u3055\u308c\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u304c\u898b\u308c\u308b\u3088\u3046\u306b\u306a\u308b\n\n\u306a\u304a\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u6210\u679c\u7269\u306fsuin/php-scala-migration-example\u306b\u3042\u3052\u3066\u3042\u308a\u307e\u3059\u3002\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n\n\u30d9\u30fc\u30b9\n\u4eca\u56de\u306f\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001play-scala\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u3063\u305fPlay\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d9\u30fc\u30b9\u306b\u5b9f\u88c5\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nactivator new new-ui play-scala\n\n\nbuild.sbt\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\nbuild.sbt\u306bplay2-auth\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nbuild.sbt\nname := \"\"\"new-ui\"\"\"\n\nversion := \"1.0-SNAPSHOT\"\n\nlazy val root = (project in file(\".\")).enablePlugins(PlayScala)\n\nscalaVersion := \"2.11.6\"\n\nlibraryDependencies ++= Seq(\n  jdbc,\n  anorm,\n  cache,\n  ws,\n  \"jp.t2v\" %% \"play2-auth\"      % \"0.13.2\",\n  \"jp.t2v\" %% \"play2-auth-test\" % \"0.13.2\" % \"test\"\n)\n\n\nactivator\u3092\u8d77\u52d5\u3057\u3066\u3001run\u3092\u5b9f\u884c\u3059\u308b\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u308c\u3070\u3001build.sbt\u306e\u8a2d\u5b9a\u306fOK\u3067\u3059\u3002\nactivator\n> run\n\nCtrl + D \u2192 Ctrl + C\u306e\u9806\u3067\u30ad\u30fc\u3092\u62bc\u4e0b\u3057\u3066\u3001activator\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\n\u8a8d\u8a3c\u306e\u8a2d\u5b9a(AuthConfig)\u3092\u5b9f\u88c5\u3059\u308b\n\u3053\u3053\u304b\u3089Scala\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u50d5\u306f\u3001IntelliJ\u3092\u4f7f\u3046\u306e\u3067\u3001IDE\u7528\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\nactivator\n> gen-idea\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u6c7a\u3081\u3066\u3057\u307e\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u9055\u3044\u3001play2-auth\u3067\u306f\u81ea\u5206\u304c\u5b9a\u7fa9\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8a8d\u8a3c\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u304c\u3044\u3044\u3068\u3053\u308d\u3067\u3059\u3002\u306a\u306e\u3067\u3001\u306f\u3058\u3081\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u307e\u308f\u308a\u306e\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u6700\u4f4e\u9650\u3001\u30e6\u30fc\u30b6\u3092\u8868\u73fe\u3059\u308b\u30af\u30e9\u30b9\u3068\u3001\u30ed\u30fc\u30eb\u3092\u8868\u73fe\u3059\u308b\u30af\u30e9\u30b9\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u306fUser\u3068Role\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u30af\u30e9\u30b9\u540d\u306f\u81ea\u7531\u3067\u3059\u3002\u3053\u3053\u3067\u306eUser\u306fAccount\u3067\u3082\u3044\u3044\u3067\u3059\u3057\u3001Role\u306fUserType\u3067\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\napp/models/account/package.scala\npackage models\n\npackage object account {\n\n  case class User(\n                   id: String,\n                   username: String,\n                   role: Role)\n\n\n  sealed trait Role\n\n  object Role {\n    case object Administrator extends Role\n    case object NormalUser extends Role\n  }\n}\n\n\n\n\u307e\u305f\u3001\u8a8d\u8a3c\u30b5\u30fc\u30d0\u3068\u3084\u308a\u3068\u308a\u3057\u3066\u3001User\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u3072\u3063\u3071\u3066\u304f\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u3053\u3067\u306fAccountService\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002\n\napp/services/AccountService.scala\npackage services\n\nimport models.account.User\n\n// \u672c\u5f53\u306f\u8a8d\u8a3c\u30b5\u30fc\u30d0\u306bREST\u3067\u554f\u3044\u5408\u308f\u305b\u308b\nobject AccountService {\n  private val users = List[User](\n    User(\"6E7D8ACD-C36E-4ACC-87B7-5EC35CBA1423\", \"admin\", models.account.Role.Administrator),\n    User(\"D4EAF402-54CC-469A-AACB-66EF0A0CB0AF\", \"alice\", models.account.Role.Administrator)\n  )\n\n  def userOfId(id: String): Option[User] = {\n    users.find(_.id == id)\n  }\n\n  def authenticate(username: String, password: String): Option[User] = {\n    users.find(_.username == username)\n  }\n}\n\n\n\n\u81ea\u524d\u306e\u8a8d\u8a3c\u3092\u4f5c\u308b\u305f\u3081\u306btrait\u30921\u3064\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306fProprietaryAuthConfig.scala\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002\u3053\u306etrait\u306fjp.t2v.lab.play2.auth.AuthConfig\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3001\u7d99\u627f\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\napp/controllers/ProprietaryAuthConfig.scala\npackage controllers\n\nimport jp.t2v.lab.play2.auth._\n\ntrait ProprietaryAuthConfig extends AuthConfig {\n\n}\n\n\n\n\u7d9a\u3044\u3066\u3001ProprietaryAuthConfig\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u5b9f\u88c5\u304c\u5fc5\u8981\u306a\u30e1\u30f3\u30d0\u306f\u3001\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u793a\u3059\u3068\u304a\u308a\u3067\u3059\u3002\n\u6700\u5f8c\u306eauthorizationFailed\u306b\u3064\u3044\u3066\u306f\u975e\u63a8\u5968\u306e\u3082\u306e\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u3044\u3044\u3088\u3046\u3067\u3059\u3002\u5c06\u6765\u7684\u306b\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u5b9f\u88c5\u3057\u306a\u304f\u3066\u3082\u3088\u304f\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001\u3053\u3053\u3067\u6ce8\u610f\u3057\u3066\u304a\u304d\u305f\u3044\u306e\u306foverride val idTag: ClassTag[Id]\u306b\u306fimplicit\u3092\u3064\u3051\u3066\u306f\u3044\u3051\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u50d5\u306e\u5834\u5408\u306f\u3001IDE\u306e\u30b3\u30fc\u30c9\u751f\u6210\u3067\u52dd\u624b\u306bimplicit\u304c\u3064\u3044\u3066\u3057\u307e\u3044\u3001\u7121\u9650\u30eb\u30fc\u30d7\uff1f\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u2026  \n\napp/controllers/ProprietaryAuthConfig.scala\npackage controllers\n\nimport jp.t2v.lab.play2.auth._\nimport play.api.mvc.{Result, RequestHeader}\nimport play.api.mvc.Results.{Redirect, Forbidden, Unauthorized}\nimport scala.concurrent.{Future, ExecutionContext}\nimport scala.reflect.{ClassTag,classTag}\nimport models.account.Role._\nimport services.AccountService\n\ntrait ProprietaryAuthConfig extends AuthConfig {\n\n  /**\n   * \u30e6\u30fc\u30b6\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u578b\u3002\n   * `String`, `Int`, `Long` \u306a\u3069\u3002\n   */\n  override type Id = String\n\n  /**\n   * \u30e6\u30fc\u30b6\u3092\u8868\u73fe\u3059\u308b\u578b\u3002model\u306a\u3069\u306b\u5b9a\u7fa9\u3057\u305fclass\u306e\u578b\u3092\u6307\u5b9a\u3059\u308b\u3002\n   */\n  override type User = models.account.User\n\n  /**\n   * \u8a8d\u53ef\u306e\u305f\u3081\u306b\u4f7f\u3046\u6a29\u9650\u3092\u8868\u73fe\u3057\u305f\u578b\u3002\n   */\n  override type Authority = models.account.Role\n\n  /**\n   * A `ClassTag` is used to retrieve an id from the Cache API.\n   * Use something like this:\n   */\n  override val idTag: ClassTag[Id] = classTag[Id]\n\n  /**\n   * \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3059\u308b\u307e\u3067\u306e\u6642\u9593(\u79d2)\n   */\n  override def sessionTimeoutInSeconds: Int = 3600 // 1\u6642\u9593\n\n  /**\n   * `Id`\u304b\u3089\u30e6\u30fc\u30b6\u3092\u63a2\u3059\u65b9\u6cd5\u3002\n   */\n  override def resolveUser(id: Id)(implicit context: ExecutionContext): Future[Option[User]] = {\n    Future.successful(AccountService.userOfId(id))\n  }\n\n  /**\n   * \u30ed\u30b0\u30a4\u30f3\u3067\u304d\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def loginSucceeded(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Redirect(routes.Application.index))\n  }\n\n  /**\n   * \u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def logoutSucceeded(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Redirect(routes.Application.index))\n  }\n\n  /**\n   * \u8a8d\u8a3c\u306b\u5931\u6557\u3057\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def authenticationFailed(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Unauthorized(\"Bad credentials\"))\n  }\n\n  /**\n   * \u6a29\u9650\u304c\u306a\u3044\u30a2\u30af\u30bb\u30b9\u306f\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def authorizationFailed(request: RequestHeader, user: User, authority: Option[Authority])(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Forbidden(\"No permission\"))\n  }\n\n  /**\n   * \u30e6\u30fc\u30b6\u304c\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u3092\u5224\u5b9a\u3059\u308b\u95a2\u6570\u3002\n   */\n  override def authorize(user: User, authority: Authority)(implicit context: ExecutionContext): Future[Boolean] = Future.successful {\n    (user.role, authority) match {\n      case (Administrator, _)       => true // Admin\u306a\u3089\u3069\u3093\u306aAction\u3067\u3082\u5168\u6a29\u9650\u3092\u958b\u653e\n      case (NormalUser, NormalUser) => true // \u30e6\u30fc\u30b6\u304cNormalUser\u3067\u3001Action\u304cNormalUser\u306a\u3089\u6a29\u9650\u3042\u308a\u3002\u3082\u3057Action\u304cAdmin\u3060\u3051\u306a\u3089\u6a29\u9650\u306a\u3057\u306b\u306a\u308b\u3002\n      case _                        => false\n    }\n  }\n\n  override def authorizationFailed(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = throw new AssertionError(\"don't use\")\n}\n\n\n\n\u3072\u3068\u307e\u305a\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u304c\u3067\u306a\u3051\u308c\u3070OK\u3067\u3059\u3002\n> compile\n\n\n\u30ed\u30b0\u30a4\u30f3\u306eAPI\u3092\u5b9f\u88c5\u3059\u308b(Authentication)\n\u305d\u308c\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u306eAPI\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306f\u8a8d\u8a3c(Authentication)\u3092\u5b9f\u88c5\u3059\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\u305d\u306e\u524d\u306b\u3001\u3053\u3053\u304b\u3089HTTP\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u78ba\u8a8d\u3057\u306a\u304c\u3089\u958b\u767a\u3057\u3066\u3044\u304d\u305f\u3044\u306e\u3067\u3001HTTP\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n> run\n\nhttp://localhost:9000/ \u3092\u958b\u3044\u3066\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u8d77\u52d5\u306fOK\u3067\u3059\u3002\n\n\u8a8d\u8a3c\u306fAjax\u3067\u3084\u308a\u305f\u3044\u3068\u601d\u3046\u306e\u3067\u3001Ajax\u7528\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u4e0b\u306eURL\u306b\u6c7a\u3081\u307e\u3059\u3002\nPOST http://localhost:9000/api/auth\n\nAction\u3092\u4f5c\u308a\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u3001AuthApi.scala\u3068\u3057\u307e\u3059\u3002\n\napp/controllers/AuthApi.scala\npackage controllers\n\nimport play.api.mvc._\n\nobject AuthApi extends Controller {\n\n  def auth = Action {\n    Ok(\"Successfully authenticated!\")\n  }\n\n}\n\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3082\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nconf/routes\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Auth APIs\nPOST    /api/auth                   controllers.AuthApi.auth\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\n\nPlay\u306e\u30b5\u30fc\u30d0\u304c\u7acb\u3061\u4e0a\u304c\u3063\u305f\u307e\u307e\u3060\u3068\u601d\u3046\u306e\u3067\u3001\u8a66\u3057\u306bPOST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u3059\u306b\u306fHTTP\u307e\u308f\u308a\u306e\u30c7\u30d0\u30c3\u30b0\u306b\u4fbf\u5229\u306ahttpie\u3092\u4f7f\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n$ http -v  POST localhost:9000/api/auth\nPOST /api/auth HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nContent-Length: 0\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n\n\nHTTP/1.1 200 OK\nContent-Length: 27\nContent-Type: text/plain; charset=utf-8\n\nSuccessfully authenticated!\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304c200 OK\u3068\u306a\u3063\u3066\u3044\u308c\u3070\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u307e\u3067\u304c\u3046\u307e\u304f\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u306e\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u5148\u307b\u3069\u306eAuthApi\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3067jp.t2v.lab.play2.auth.LoginLogout\u3068ProprietaryAuthConfig\u3092\u7d99\u627f\u3057\u307e\u3059\u3002\u52a0\u3048\u3066auth\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\napp/controllers/AuthApi.scala\npackage controllers\n\nimport play.api.mvc._\nimport play.api.libs.json._\nimport jp.t2v.lab.play2.auth.LoginLogout\nimport scala.concurrent.Future\nimport scala.concurrent.ExecutionContext.Implicits.global\nimport services.AccountService\n\nobject AuthApi extends Controller with LoginLogout with ProprietaryAuthConfig {\n\n  // POST\u3067\u6e21\u3063\u3066\u304f\u308b\u30c7\u30fc\u30bf\u306e\u5f62\u5f0f\n  case class AuthData(username: String, password: String)\n\n  // JSON\u3092\u30d1\u30fc\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u5ba3\u8a00\n  implicit val authDataReads = Json.reads[AuthData]\n\n  def auth = Action.async(BodyParsers.parse.json) { implicit request =>\n    request.body.validate[AuthData].fold(\n      errors => {\n        Future.successful(BadRequest(Json.obj(\"message\" -> JsError.toFlatJson(errors))))\n      },\n      data => {\n        AccountService.authenticate(data.username, data.password) match {\n          case None => Future.successful(Unauthorized(Json.obj(\"message\" -> \"authentication failed\")))\n          case Some(user) => gotoLoginSucceeded(user.id)\n        }\n      }\n    )\n  }\n}\n\n\n\n\u3053\u3053\u307e\u3067\u5b9f\u88c5\u3057\u305f\u3089\u3001POST /api/auth\u306b\u3066\u8a8d\u8a3c\u3067\u304d\u308b\u304b\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n$ http -v POST localhost:9000/api/auth username=alice password=secret\nPOST /api/auth HTTP/1.1\nAccept: application/json\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nContent-Length: 43\nContent-Type: application/json; charset=utf-8\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n{\n    \"password\": \"secret\",\n    \"username\": \"alice\"\n}\n\nHTTP/1.1 303 See Other\nContent-Length: 0\nLocation: /\nSet-Cookie: PLAY2AUTH_SESS_ID=f25da3108fa744895a79b135bb9b75734dfb18fe_5hdnvje'cvef)5e'f964b7i~l)6)x5hmex1e~w.5v_kdv~2hwy)qc55nwzs4wf6; Max-Age=3600; Expires=Tue, 26 May 2015 08:48:46 GMT; Path=/; HTTPOnly\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u304c303\u3067\u3001Set-Cookie\u30d8\u30c3\u30c0\u30fc\u304c\u51fa\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\u3064\u3044\u3067\u306b\u8a8d\u8a3c\u306b\u5931\u6557\u3059\u308b\u5834\u5408\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\n$ http -v POST localhost:9000/api/auth username=bob password=secret\nPOST /api/auth HTTP/1.1\nAccept: application/json\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nContent-Length: 41\nContent-Type: application/json; charset=utf-8\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n{\n    \"password\": \"secret\",\n    \"username\": \"bob\"\n}\n\nHTTP/1.1 401 Unauthorized\nContent-Length: 35\nContent-Type: application/json; charset=utf-8\n\n{\n    \"message\": \"authentication failed\"\n}\n\n\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u305f\u3089\u3001401\u306b\u306a\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u671f\u5f85\u901a\u308a401\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308bAPI\u3092\u8ffd\u52a0\u3059\u308b(Authorization)\n\u8a8d\u8a3c\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u4eca\u5ea6\u306f\u30ed\u30b0\u30a4\u30f3\u4e2d\u306e\u30e6\u30fc\u30b6\u304c\u3001\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092API\u7d4c\u7531\u3067\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3053\u304b\u3089\u306f\u3001\u8a8d\u53ef(Authorization)\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\nAPI\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u4e0b\u8a18\u306eURL\u306b\u3057\u307e\u3059\u3002\nGET /api/user\n\n\u3055\u3063\u305d\u304fController\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306fUserApi.scala\u3068\u3057\u307e\u3059\u3002\n\napp/controllers/UserApi.scala\npackage controllers\n\nimport play.api.mvc._\n\nobject UserApi extends Controller {\n  def user = Action {\n    Ok(\"your account info will be shown here\")\n  }\n}\n\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3082\u5fd8\u308c\u305a\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\nconf/routes\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Auth APIs\nPOST    /api/auth                   controllers.AuthApi.auth\n\n# User APIs\nGET     /api/user                   controllers.UserApi.user\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n\n\n\u3072\u3068\u307e\u305a\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3060\u3051\u3067\u3082\u3046\u307e\u304f\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002200\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u6765\u308c\u3070OK\u3067\u3059\u3002\n$ http localhost:9000/api/user\nHTTP/1.1 200 OK\nContent-Length: 36\nContent-Type: text/plain; charset=utf-8\n\nyour account info will be shown here\n\n\u3067\u306f\u3001\u3053\u306eUserApi\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306euser\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8a8d\u53ef\u3055\u308c\u305f\u30e6\u30fc\u30b6\u3060\u3051\u304c\u898b\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\u8a8d\u53ef\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u306b\u306f\u3001jp.t2v.lab.play2.auth.AuthElement\u3068\u3001\u81ea\u4f5c\u3057\u305fProprietaryAuthConfig\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306bmix-in\u3057\u307e\u3059\u3002\n\napp/controllers/UserApi.scala\npackage controllers\n\nimport jp.t2v.lab.play2.auth.AuthElement\nimport models.account.Role.NormalUser\nimport play.api.mvc._\nimport play.api.libs.json._\n\nobject UserApi extends Controller with AuthElement with ProprietaryAuthConfig {\n  def user = StackAction(AuthorityKey -> NormalUser) { implicit request =>\n    val user = loggedIn\n    Ok(Json.obj(\"id\" -> user.id, \"username\" -> user.username))\n  }\n}\n\n\n\u3053\u306eStackAction\u30e1\u30bd\u30c3\u30c9\u306f\u3001StackAction(AuthorityKey -> \u30ed\u30fc\u30eb\u540d)\u3068\u3044\u3046\u5f62\u3067\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002loggedIn\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u73fe\u5728\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30e6\u30fc\u30b6\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u5b9f\u88c5\u3067\u304d\u305f\u3001\u8a8d\u53ef\u306e\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3059\u3002httpie\u306f--session=name\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4efb\u610f\u306ename\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4fdd\u6301\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n$ http --session=alice POST localhost:9000/api/auth username=alice password=secret\nHTTP/1.1 303 See Other\nContent-Length: 0\nLocation: /\nSet-Cookie: PLAY2AUTH_SESS_ID=af8da1226ff979822d26ed9025c0b8b198fcf282*vl'4jrg!rk_77*cdxu174m('us~*wgu9rsx4o(ik9'e39hedjvs9ntyh2(fvsac; Max-Age=3600; Expires=Tue, 26 May 2015 09:29:53 GMT; Path=/; HTTPOnly\n\n\u6b21\u306b\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4fdd\u3063\u305f\u307e\u307e/api/user\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n$ http -v --session=alice localhost:9000/api/user\nGET /api/user HTTP/1.1\nAccept: application/json\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nCookie: PLAY2AUTH_SESS_ID=af8da1226ff979822d26ed9025c0b8b198fcf282*vl'4jrg!rk_77*cdxu174m('us~*wgu9rsx4o(ik9'e39hedjvs9ntyh2(fvsac\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n\n\nHTTP/1.1 200 OK\nContent-Length: 64\nContent-Type: application/json; charset=utf-8\nSet-Cookie: PLAY2AUTH_SESS_ID=af8da1226ff979822d26ed9025c0b8b198fcf282*vl'4jrg!rk_77*cdxu174m('us~*wgu9rsx4o(ik9'e39hedjvs9ntyh2(fvsac; Max-Age=3600; Expires=Tue, 26 May 2015 09:32:19 GMT; Path=/; HTTPOnly\n\n{\n    \"id\": \"D4EAF402-54CC-469A-AACB-66EF0A0CB0AF\",\n    \"username\": \"alice\"\n}\n\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304c200\u3067\u3001alice\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u304c\u51fa\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\u52a0\u3048\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n$ http -v localhost:9000/api/user\nGET /api/user HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n\n\nHTTP/1.1 401 Unauthorized\nContent-Length: 15\nContent-Type: text/plain; charset=utf-8\n\nBad credentials\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304c401\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\u3053\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306fProprietaryAuthConfig.authenticationFailed\u3067\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\n\n\u3064\u3065\u304f\n\u3064\u3065\u304d\u3068\u3057\u3066UI\u3092\u5b9f\u88c5\u3057\u3066Ajax\u3067\u30ed\u30b0\u30a4\u30f3\u30fb\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u306e\u8868\u793a\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nPlayFramework\u3067\u72ec\u81ea\u306e\u8a8d\u8a3c\u3092play2-auth\u3067\u5b9f\u88c5\u3059\u308b\u305f\u3081\u306e\u81ea\u5206\u5411\u3051\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u3067\u3059\u3002\u72ec\u81ea\u3068\u3044\u3046\u306e\u306f\u3001\u3088\u304f\u3042\u308a\u305d\u3046\u306aMySQL\u306a\u3069\u306eRDBMS\u3092\u4f7f\u3046\u8a8d\u8a3c\u3067\u306f\u306a\u304f\u3001\u793e\u5185\u306bRESTful API\u3067\u8a8d\u8a3c\u3092\u884c\u3046\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30a4\u30b9\u3092\u5099\u3048\u3066\u3044\u308b\u8a8d\u8a3c\u30b5\u30fc\u30d0\u304c\u3042\u308a\u3001\u305d\u306e\u30d7\u30ed\u30c8\u30b3\u30eb\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u3092\u5b9f\u88c5\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n## \u30b4\u30fc\u30eb\n\n\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u304c\u76ee\u6307\u3059\u30b4\u30fc\u30eb\u306f\u4e0b\u306e\u76ee\u6a19\u3092\u5168\u3066\u9054\u6210\u3059\u308b\u3053\u3068\u3067\u3059\u3002\n\n1. play2-auth\u3092\u4f7f\u3063\u3066\n2. Ajax\u7528\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8`/api/auth`\u3092\u4f5c\u6210\u3057\u3001POST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308a\u3001\u8a8d\u8a3c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\n3. Ajax\u7528\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8`/api/user`\u3092\u4f5c\u6210\u3057\u3001\u8a8d\u53ef\u3055\u308c\u305f\u30bb\u30c3\u30b7\u30e7\u30f3\u3067\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u304c\u898b\u308c\u308b\u3088\u3046\u306b\u306a\u308b\n\n\u306a\u304a\u3053\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306e\u6210\u679c\u7269\u306f[suin/php-scala-migration-example](https://github.com/suin/php-scala-migration-example/tree/master/new-ui)\u306b\u3042\u3052\u3066\u3042\u308a\u307e\u3059\u3002\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n\n## \u30d9\u30fc\u30b9\n\n\n\u4eca\u56de\u306f\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001`play-scala`\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u3063\u305fPlay\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u30d9\u30fc\u30b9\u306b\u5b9f\u88c5\u3057\u3066\u3044\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n```\nactivator new new-ui play-scala\n```\n\n## build.sbt\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\n\nbuild.sbt\u306b`play2-auth`\u3092\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```scala:build.sbt\nname := \"\"\"new-ui\"\"\"\n\nversion := \"1.0-SNAPSHOT\"\n\nlazy val root = (project in file(\".\")).enablePlugins(PlayScala)\n\nscalaVersion := \"2.11.6\"\n\nlibraryDependencies ++= Seq(\n  jdbc,\n  anorm,\n  cache,\n  ws,\n  \"jp.t2v\" %% \"play2-auth\"      % \"0.13.2\",\n  \"jp.t2v\" %% \"play2-auth-test\" % \"0.13.2\" % \"test\"\n)\n```\n\nactivator\u3092\u8d77\u52d5\u3057\u3066\u3001run\u3092\u5b9f\u884c\u3059\u308b\u3068\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u308c\u3070\u3001build.sbt\u306e\u8a2d\u5b9a\u306fOK\u3067\u3059\u3002\n\n```\nactivator\n> run\n```\n\nCtrl + D \u2192 Ctrl + C\u306e\u9806\u3067\u30ad\u30fc\u3092\u62bc\u4e0b\u3057\u3066\u3001activator\u3092\u505c\u6b62\u3057\u307e\u3059\u3002\n\n## \u8a8d\u8a3c\u306e\u8a2d\u5b9a(AuthConfig)\u3092\u5b9f\u88c5\u3059\u308b\n\n\u3053\u3053\u304b\u3089Scala\u30b3\u30fc\u30c9\u3092\u66f8\u304d\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u50d5\u306f\u3001IntelliJ\u3092\u4f7f\u3046\u306e\u3067\u3001IDE\u7528\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```\nactivator\n> gen-idea\n```\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30b7\u30b0\u30cd\u30c1\u30e3\u3092\u6c7a\u3081\u3066\u3057\u307e\u3046\u30e9\u30a4\u30d6\u30e9\u30ea\u3068\u9055\u3044\u3001play2-auth\u3067\u306f\u81ea\u5206\u304c\u5b9a\u7fa9\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8a8d\u8a3c\u306b\u7d44\u307f\u8fbc\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u306e\u304c\u3044\u3044\u3068\u3053\u308d\u3067\u3059\u3002\u306a\u306e\u3067\u3001\u306f\u3058\u3081\u306b\u30a2\u30ab\u30a6\u30f3\u30c8\u307e\u308f\u308a\u306e\u30c9\u30e1\u30a4\u30f3\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5b9a\u7fa9\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\n\u6700\u4f4e\u9650\u3001\u30e6\u30fc\u30b6\u3092\u8868\u73fe\u3059\u308b\u30af\u30e9\u30b9\u3068\u3001\u30ed\u30fc\u30eb\u3092\u8868\u73fe\u3059\u308b\u30af\u30e9\u30b9\u304c\u5fc5\u8981\u306b\u306a\u308b\u306e\u3067\u3001\u3053\u3053\u3067\u306f`User`\u3068`Role`\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\u306a\u304a\u3001\u30af\u30e9\u30b9\u540d\u306f\u81ea\u7531\u3067\u3059\u3002\u3053\u3053\u3067\u306e`User`\u306f`Account`\u3067\u3082\u3044\u3044\u3067\u3059\u3057\u3001`Role`\u306f`UserType`\u3067\u3082\u304b\u307e\u3044\u307e\u305b\u3093\u3002\n\n```scala:app/models/account/package.scala\npackage models\n\npackage object account {\n\n  case class User(\n                   id: String,\n                   username: String,\n                   role: Role)\n\n\n  sealed trait Role\n\n  object Role {\n    case object Administrator extends Role\n    case object NormalUser extends Role\n  }\n}\n\n```\n\n\u307e\u305f\u3001\u8a8d\u8a3c\u30b5\u30fc\u30d0\u3068\u3084\u308a\u3068\u308a\u3057\u3066\u3001`User`\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u3072\u3063\u3071\u3066\u304f\u308b\u30b5\u30fc\u30d3\u30b9\u3092\u4f5c\u3063\u3066\u304a\u304d\u307e\u3059\u3002\u3053\u3053\u3067\u306f`AccountService`\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002\n\n```scala:app/services/AccountService.scala\npackage services\n\nimport models.account.User\n\n// \u672c\u5f53\u306f\u8a8d\u8a3c\u30b5\u30fc\u30d0\u306bREST\u3067\u554f\u3044\u5408\u308f\u305b\u308b\nobject AccountService {\n  private val users = List[User](\n    User(\"6E7D8ACD-C36E-4ACC-87B7-5EC35CBA1423\", \"admin\", models.account.Role.Administrator),\n    User(\"D4EAF402-54CC-469A-AACB-66EF0A0CB0AF\", \"alice\", models.account.Role.Administrator)\n  )\n\n  def userOfId(id: String): Option[User] = {\n    users.find(_.id == id)\n  }\n\n  def authenticate(username: String, password: String): Option[User] = {\n    users.find(_.username == username)\n  }\n}\n\n```\n\n\u81ea\u524d\u306e\u8a8d\u8a3c\u3092\u4f5c\u308b\u305f\u3081\u306btrait\u30921\u3064\u4f5c\u6210\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u306f`ProprietaryAuthConfig.scala`\u3068\u3044\u3046\u540d\u524d\u306b\u3057\u307e\u3059\u3002\u3053\u306etrait\u306fjp.t2v.lab.play2.auth.AuthConfig\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u306b\u306a\u308b\u306e\u3067\u3001\u7d99\u627f\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n\n\n```scala:app/controllers/ProprietaryAuthConfig.scala\npackage controllers\n\nimport jp.t2v.lab.play2.auth._\n\ntrait ProprietaryAuthConfig extends AuthConfig {\n\n}\n\n```\n\n\u7d9a\u3044\u3066\u3001`ProprietaryAuthConfig`\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u5b9f\u88c5\u304c\u5fc5\u8981\u306a\u30e1\u30f3\u30d0\u306f\u3001\u4e0b\u306e\u30b3\u30fc\u30c9\u3067\u793a\u3059\u3068\u304a\u308a\u3067\u3059\u3002\n\n\u6700\u5f8c\u306e`authorizationFailed`\u306b\u3064\u3044\u3066\u306f\u975e\u63a8\u5968\u306e\u3082\u306e\u3067\u3059\u304c\u3001\u3068\u308a\u3042\u3048\u305a\u3001\u4f8b\u5916\u3092\u6295\u3052\u308b\u3088\u3046\u306b\u3057\u3066\u304a\u3051\u3070\u3044\u3044\u3088\u3046\u3067\u3059\u3002\u5c06\u6765\u7684\u306b\u3053\u306e\u30e1\u30bd\u30c3\u30c9\u306f\u5b9f\u88c5\u3057\u306a\u304f\u3066\u3082\u3088\u304f\u306a\u308b\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u3053\u3053\u3067\u6ce8\u610f\u3057\u3066\u304a\u304d\u305f\u3044\u306e\u306f`override val idTag: ClassTag[Id]`\u306b\u306f`implicit`\u3092\u3064\u3051\u3066\u306f\u3044\u3051\u306a\u3044\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\u50d5\u306e\u5834\u5408\u306f\u3001IDE\u306e\u30b3\u30fc\u30c9\u751f\u6210\u3067\u52dd\u624b\u306b`implicit`\u304c\u3064\u3044\u3066\u3057\u307e\u3044\u3001\u7121\u9650\u30eb\u30fc\u30d7\uff1f\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u2026 :sweat: \n\n```scala:app/controllers/ProprietaryAuthConfig.scala\npackage controllers\n\nimport jp.t2v.lab.play2.auth._\nimport play.api.mvc.{Result, RequestHeader}\nimport play.api.mvc.Results.{Redirect, Forbidden, Unauthorized}\nimport scala.concurrent.{Future, ExecutionContext}\nimport scala.reflect.{ClassTag,classTag}\nimport models.account.Role._\nimport services.AccountService\n\ntrait ProprietaryAuthConfig extends AuthConfig {\n\n  /**\n   * \u30e6\u30fc\u30b6\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306e\u578b\u3002\n   * `String`, `Int`, `Long` \u306a\u3069\u3002\n   */\n  override type Id = String\n\n  /**\n   * \u30e6\u30fc\u30b6\u3092\u8868\u73fe\u3059\u308b\u578b\u3002model\u306a\u3069\u306b\u5b9a\u7fa9\u3057\u305fclass\u306e\u578b\u3092\u6307\u5b9a\u3059\u308b\u3002\n   */\n  override type User = models.account.User\n\n  /**\n   * \u8a8d\u53ef\u306e\u305f\u3081\u306b\u4f7f\u3046\u6a29\u9650\u3092\u8868\u73fe\u3057\u305f\u578b\u3002\n   */\n  override type Authority = models.account.Role\n\n  /**\n   * A `ClassTag` is used to retrieve an id from the Cache API.\n   * Use something like this:\n   */\n  override val idTag: ClassTag[Id] = classTag[Id]\n\n  /**\n   * \u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u3059\u308b\u307e\u3067\u306e\u6642\u9593(\u79d2)\n   */\n  override def sessionTimeoutInSeconds: Int = 3600 // 1\u6642\u9593\n\n  /**\n   * `Id`\u304b\u3089\u30e6\u30fc\u30b6\u3092\u63a2\u3059\u65b9\u6cd5\u3002\n   */\n  override def resolveUser(id: Id)(implicit context: ExecutionContext): Future[Option[User]] = {\n    Future.successful(AccountService.userOfId(id))\n  }\n\n  /**\n   * \u30ed\u30b0\u30a4\u30f3\u3067\u304d\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def loginSucceeded(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Redirect(routes.Application.index))\n  }\n\n  /**\n   * \u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def logoutSucceeded(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Redirect(routes.Application.index))\n  }\n\n  /**\n   * \u8a8d\u8a3c\u306b\u5931\u6557\u3057\u305f\u3089\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def authenticationFailed(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Unauthorized(\"Bad credentials\"))\n  }\n\n  /**\n   * \u6a29\u9650\u304c\u306a\u3044\u30a2\u30af\u30bb\u30b9\u306f\u3069\u3046\u3059\u308b\u304b\uff1f\n   */\n  override def authorizationFailed(request: RequestHeader, user: User, authority: Option[Authority])(implicit context: ExecutionContext): Future[Result] = {\n    Future.successful(Forbidden(\"No permission\"))\n  }\n\n  /**\n   * \u30e6\u30fc\u30b6\u304c\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u3092\u5224\u5b9a\u3059\u308b\u95a2\u6570\u3002\n   */\n  override def authorize(user: User, authority: Authority)(implicit context: ExecutionContext): Future[Boolean] = Future.successful {\n    (user.role, authority) match {\n      case (Administrator, _)       => true // Admin\u306a\u3089\u3069\u3093\u306aAction\u3067\u3082\u5168\u6a29\u9650\u3092\u958b\u653e\n      case (NormalUser, NormalUser) => true // \u30e6\u30fc\u30b6\u304cNormalUser\u3067\u3001Action\u304cNormalUser\u306a\u3089\u6a29\u9650\u3042\u308a\u3002\u3082\u3057Action\u304cAdmin\u3060\u3051\u306a\u3089\u6a29\u9650\u306a\u3057\u306b\u306a\u308b\u3002\n      case _                        => false\n    }\n  }\n\n  override def authorizationFailed(request: RequestHeader)(implicit context: ExecutionContext): Future[Result] = throw new AssertionError(\"don't use\")\n}\n\n```\n\n\u3072\u3068\u307e\u305a\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\u3066\u307f\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u30b3\u30f3\u30d1\u30a4\u30eb\u30a8\u30e9\u30fc\u304c\u3067\u306a\u3051\u308c\u3070OK\u3067\u3059\u3002\n\n```\n> compile\n```\n\n## \u30ed\u30b0\u30a4\u30f3\u306eAPI\u3092\u5b9f\u88c5\u3059\u308b(Authentication)\n\n\u305d\u308c\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u306eAPI\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u3053\u306e\u30bb\u30af\u30b7\u30e7\u30f3\u306f\u8a8d\u8a3c(Authentication)\u3092\u5b9f\u88c5\u3059\u308b\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u305d\u306e\u524d\u306b\u3001\u3053\u3053\u304b\u3089HTTP\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u78ba\u8a8d\u3057\u306a\u304c\u3089\u958b\u767a\u3057\u3066\u3044\u304d\u305f\u3044\u306e\u3067\u3001HTTP\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u307e\u3059\u3002\n\n```\n> run\n```\n\nhttp://localhost:9000/ \u3092\u958b\u3044\u3066\u30c8\u30c3\u30d7\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308c\u3070\u3001\u8d77\u52d5\u306fOK\u3067\u3059\u3002\n\n\n![Welcome_to_Play.png](https://qiita-image-store.s3.amazonaws.com/0/889/84164cb2-61fb-01fa-b38a-12eecb8f72be.png)\n\n\n\u8a8d\u8a3c\u306fAjax\u3067\u3084\u308a\u305f\u3044\u3068\u601d\u3046\u306e\u3067\u3001Ajax\u7528\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4f5c\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u306f\u3001\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u4e0b\u306eURL\u306b\u6c7a\u3081\u307e\u3059\u3002\n\n```\nPOST http://localhost:9000/api/auth\n```\n\nAction\u3092\u4f5c\u308a\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f\u3001AuthApi.scala\u3068\u3057\u307e\u3059\u3002\n\n```scala:app/controllers/AuthApi.scala\npackage controllers\n\nimport play.api.mvc._\n\nobject AuthApi extends Controller {\n\n  def auth = Action {\n    Ok(\"Successfully authenticated!\")\n  }\n\n}\n\n```\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3082\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\n```nginx:conf/routes\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Auth APIs\nPOST    /api/auth                   controllers.AuthApi.auth\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n```\n\nPlay\u306e\u30b5\u30fc\u30d0\u304c\u7acb\u3061\u4e0a\u304c\u3063\u305f\u307e\u307e\u3060\u3068\u601d\u3046\u306e\u3067\u3001\u8a66\u3057\u306bPOST\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u3057\u3066\u307f\u307e\u3059\u3002\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u3059\u306b\u306fHTTP\u307e\u308f\u308a\u306e\u30c7\u30d0\u30c3\u30b0\u306b\u4fbf\u5229\u306a[httpie](https://github.com/jakubroztocil/httpie)\u3092\u4f7f\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n\n```console\n$ http -v  POST localhost:9000/api/auth\nPOST /api/auth HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nContent-Length: 0\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n\n\nHTTP/1.1 200 OK\nContent-Length: 27\nContent-Type: text/plain; charset=utf-8\n\nSuccessfully authenticated!\n```\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304c200 OK\u3068\u306a\u3063\u3066\u3044\u308c\u3070\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306e\u8a2d\u5b9a\u307e\u3067\u304c\u3046\u307e\u304f\u3067\u304d\u3066\u3044\u307e\u3059\u3002\n\n\u3067\u306f\u30ed\u30b0\u30a4\u30f3\u306e\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\u5148\u307b\u3069\u306e`AuthApi`\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u3067`jp.t2v.lab.play2.auth.LoginLogout`\u3068`ProprietaryAuthConfig`\u3092\u7d99\u627f\u3057\u307e\u3059\u3002\u52a0\u3048\u3066`auth`\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u5b9f\u88c5\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n```scala:app/controllers/AuthApi.scala\npackage controllers\n\nimport play.api.mvc._\nimport play.api.libs.json._\nimport jp.t2v.lab.play2.auth.LoginLogout\nimport scala.concurrent.Future\nimport scala.concurrent.ExecutionContext.Implicits.global\nimport services.AccountService\n\nobject AuthApi extends Controller with LoginLogout with ProprietaryAuthConfig {\n\n  // POST\u3067\u6e21\u3063\u3066\u304f\u308b\u30c7\u30fc\u30bf\u306e\u5f62\u5f0f\n  case class AuthData(username: String, password: String)\n\n  // JSON\u3092\u30d1\u30fc\u30b9\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u305f\u3081\u306e\u5ba3\u8a00\n  implicit val authDataReads = Json.reads[AuthData]\n\n  def auth = Action.async(BodyParsers.parse.json) { implicit request =>\n    request.body.validate[AuthData].fold(\n      errors => {\n        Future.successful(BadRequest(Json.obj(\"message\" -> JsError.toFlatJson(errors))))\n      },\n      data => {\n        AccountService.authenticate(data.username, data.password) match {\n          case None => Future.successful(Unauthorized(Json.obj(\"message\" -> \"authentication failed\")))\n          case Some(user) => gotoLoginSucceeded(user.id)\n        }\n      }\n    )\n  }\n}\n\n```\n\n\u3053\u3053\u307e\u3067\u5b9f\u88c5\u3057\u305f\u3089\u3001`POST /api/auth`\u306b\u3066\u8a8d\u8a3c\u3067\u304d\u308b\u304b\u8a66\u3057\u3066\u307f\u307e\u3059\u3002\n\n\n```console\n$ http -v POST localhost:9000/api/auth username=alice password=secret\nPOST /api/auth HTTP/1.1\nAccept: application/json\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nContent-Length: 43\nContent-Type: application/json; charset=utf-8\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n{\n    \"password\": \"secret\",\n    \"username\": \"alice\"\n}\n\nHTTP/1.1 303 See Other\nContent-Length: 0\nLocation: /\nSet-Cookie: PLAY2AUTH_SESS_ID=f25da3108fa744895a79b135bb9b75734dfb18fe_5hdnvje'cvef)5e'f964b7i~l)6)x5hmex1e~w.5v_kdv~2hwy)qc55nwzs4wf6; Max-Age=3600; Expires=Tue, 26 May 2015 08:48:46 GMT; Path=/; HTTPOnly\n```\n\n\u30b9\u30c6\u30fc\u30bf\u30b9\u30b3\u30fc\u30c9\u304c303\u3067\u3001`Set-Cookie`\u30d8\u30c3\u30c0\u30fc\u304c\u51fa\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n\u3064\u3044\u3067\u306b\u8a8d\u8a3c\u306b\u5931\u6557\u3059\u308b\u5834\u5408\u3082\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n```console\n$ http -v POST localhost:9000/api/auth username=bob password=secret\nPOST /api/auth HTTP/1.1\nAccept: application/json\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nContent-Length: 41\nContent-Type: application/json; charset=utf-8\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n{\n    \"password\": \"secret\",\n    \"username\": \"bob\"\n}\n\nHTTP/1.1 401 Unauthorized\nContent-Length: 35\nContent-Type: application/json; charset=utf-8\n\n{\n    \"message\": \"authentication failed\"\n}\n```\n\n\u8a8d\u8a3c\u306b\u5931\u6557\u3057\u305f\u3089\u3001401\u306b\u306a\u308b\u3088\u3046\u306b\u5b9f\u88c5\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u671f\u5f85\u901a\u308a401\u306b\u306a\u308b\u306f\u305a\u3067\u3059\u3002\n\n## \u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092\u53d6\u5f97\u3067\u304d\u308bAPI\u3092\u8ffd\u52a0\u3059\u308b(Authorization)\n\n\u8a8d\u8a3c\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u3063\u305f\u306e\u3067\u3001\u4eca\u5ea6\u306f\u30ed\u30b0\u30a4\u30f3\u4e2d\u306e\u30e6\u30fc\u30b6\u304c\u3001\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u3092API\u7d4c\u7531\u3067\u53d6\u5f97\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\u3053\u3053\u304b\u3089\u306f\u3001\u8a8d\u53ef(Authorization)\u306e\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb\u306b\u306a\u308a\u307e\u3059\u3002\n\nAPI\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306f\u4e0b\u8a18\u306eURL\u306b\u3057\u307e\u3059\u3002\n\n```\nGET /api/user\n```\n\n\u3055\u3063\u305d\u304fController\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\u30d5\u30a1\u30a4\u30eb\u540d\u306f`UserApi.scala`\u3068\u3057\u307e\u3059\u3002\n\n```scala:app/controllers/UserApi.scala\npackage controllers\n\nimport play.api.mvc._\n\nobject UserApi extends Controller {\n  def user = Action {\n    Ok(\"your account info will be shown here\")\n  }\n}\n\n```\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u8a2d\u5b9a\u3082\u5fd8\u308c\u305a\u306b\u8ffd\u52a0\u3057\u307e\u3059\u3002\n\n```nginx:conf/routes\n# Routes\n# This file defines all application routes (Higher priority routes first)\n# ~~~~\n\n# Home page\nGET     /                           controllers.Application.index\n\n# Auth APIs\nPOST    /api/auth                   controllers.AuthApi.auth\n\n# User APIs\nGET     /api/user                   controllers.UserApi.user\n\n# Map static resources from the /public folder to the /assets URL path\nGET     /assets/*file               controllers.Assets.at(path=\"/public\", file)\n```\n\n\u3072\u3068\u307e\u305a\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3060\u3051\u3067\u3082\u3046\u307e\u304f\u3067\u304d\u3066\u3044\u308b\u304b\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002200\u3067\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u6765\u308c\u3070OK\u3067\u3059\u3002\n\n```console\n$ http localhost:9000/api/user\nHTTP/1.1 200 OK\nContent-Length: 36\nContent-Type: text/plain; charset=utf-8\n\nyour account info will be shown here\n```\n\n\u3067\u306f\u3001\u3053\u306e`UserApi`\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306e`user`\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8a8d\u53ef\u3055\u308c\u305f\u30e6\u30fc\u30b6\u3060\u3051\u304c\u898b\u308c\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u307e\u3059\u3002\u8a8d\u53ef\u306e\u6a5f\u80fd\u3092\u4f7f\u3046\u306b\u306f\u3001`jp.t2v.lab.play2.auth.AuthElement`\u3068\u3001\u81ea\u4f5c\u3057\u305f`ProprietaryAuthConfig`\u3092\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u306bmix-in\u3057\u307e\u3059\u3002\n\n```scala:app/controllers/UserApi.scala\npackage controllers\n\nimport jp.t2v.lab.play2.auth.AuthElement\nimport models.account.Role.NormalUser\nimport play.api.mvc._\nimport play.api.libs.json._\n\nobject UserApi extends Controller with AuthElement with ProprietaryAuthConfig {\n  def user = StackAction(AuthorityKey -> NormalUser) { implicit request =>\n    val user = loggedIn\n    Ok(Json.obj(\"id\" -> user.id, \"username\" -> user.username))\n  }\n}\n```\n\n\u3053\u306e`StackAction`\u30e1\u30bd\u30c3\u30c9\u306f\u3001`StackAction(AuthorityKey -> \u30ed\u30fc\u30eb\u540d)`\u3068\u3044\u3046\u5f62\u3067\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002`loggedIn`\u30e1\u30bd\u30c3\u30c9\u306f\u3001\u73fe\u5728\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u30e6\u30fc\u30b6\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002\n\n\u3053\u3053\u307e\u3067\u5b9f\u88c5\u3067\u304d\u305f\u3001\u8a8d\u53ef\u306e\u30c6\u30b9\u30c8\u3092\u3057\u3066\u307f\u307e\u3059\u3002httpie\u306f`--session=name`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u4efb\u610f\u306ename\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4fdd\u6301\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3067\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3059\u3002\n\n```console\n$ http --session=alice POST localhost:9000/api/auth username=alice password=secret\nHTTP/1.1 303 See Other\nContent-Length: 0\nLocation: /\nSet-Cookie: PLAY2AUTH_SESS_ID=af8da1226ff979822d26ed9025c0b8b198fcf282*vl'4jrg!rk_77*cdxu174m('us~*wgu9rsx4o(ik9'e39hedjvs9ntyh2(fvsac; Max-Age=3600; Expires=Tue, 26 May 2015 09:29:53 GMT; Path=/; HTTPOnly\n```\n\n\u6b21\u306b\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4fdd\u3063\u305f\u307e\u307e`/api/user`\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u307e\u3059\u3002\n\n```console\n$ http -v --session=alice localhost:9000/api/user\nGET /api/user HTTP/1.1\nAccept: application/json\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nCookie: PLAY2AUTH_SESS_ID=af8da1226ff979822d26ed9025c0b8b198fcf282*vl'4jrg!rk_77*cdxu174m('us~*wgu9rsx4o(ik9'e39hedjvs9ntyh2(fvsac\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n\n\nHTTP/1.1 200 OK\nContent-Length: 64\nContent-Type: application/json; charset=utf-8\nSet-Cookie: PLAY2AUTH_SESS_ID=af8da1226ff979822d26ed9025c0b8b198fcf282*vl'4jrg!rk_77*cdxu174m('us~*wgu9rsx4o(ik9'e39hedjvs9ntyh2(fvsac; Max-Age=3600; Expires=Tue, 26 May 2015 09:32:19 GMT; Path=/; HTTPOnly\n\n{\n    \"id\": \"D4EAF402-54CC-469A-AACB-66EF0A0CB0AF\",\n    \"username\": \"alice\"\n}\n\n```\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304c200\u3067\u3001`alice`\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u304c\u51fa\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n\u52a0\u3048\u3066\u3001\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u30e6\u30fc\u30b6\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u51fa\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```console\n$ http -v localhost:9000/api/user\nGET /api/user HTTP/1.1\nAccept: */*\nAccept-Encoding: gzip, deflate\nConnection: keep-alive\nHost: localhost:9000\nUser-Agent: HTTPie/0.8.0\n\n\n\nHTTP/1.1 401 Unauthorized\nContent-Length: 15\nContent-Type: text/plain; charset=utf-8\n\nBad credentials\n```\n\n\u30ec\u30b9\u30dd\u30f3\u30b9\u304c401\u306b\u306a\u3063\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\u3053\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u306f`ProprietaryAuthConfig.authenticationFailed`\u3067\u8a2d\u5b9a\u3057\u305f\u5185\u5bb9\u306b\u306a\u3063\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\n\n\n## \u3064\u3065\u304f\n\n\u3064\u3065\u304d\u3068\u3057\u3066UI\u3092\u5b9f\u88c5\u3057\u3066Ajax\u3067\u30ed\u30b0\u30a4\u30f3\u30fb\u30a2\u30ab\u30a6\u30f3\u30c8\u60c5\u5831\u306e\u8868\u793a\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n", "tags": ["Play2-Auth0.13.2", "Scala2.11.6", "PlayFramework2.3.9"]}