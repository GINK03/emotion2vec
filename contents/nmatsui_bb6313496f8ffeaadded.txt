{"tags": ["serf0.6.3", "SoftLayer"], "context": " More than 1 year has passed since last update.AWS VPC\u4e0a\u306e\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306fmulticast\u3068broadcast\u3092\u660e\u793a\u7684\u306b\u7981\u3058\u3066\u3044\u308b\u304c\u3001SoftLayer\u306e\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u306f\u305d\u306e\u3088\u3046\u306a\u8a18\u8ff0\u306f\u898b\u5f53\u305f\u3089\u306a\u3044\u3002\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001Serf0.4\u304b\u3089\u5b9f\u88c5\u3055\u308c\u305fmulticastDNS\u3092\u7528\u3044\u305fdiscover\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3001SoftLayer\u306ePrivateVLAN\u4e0a\u3067multicast\u304c\u901a\u308b\u306e\u304b\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3002\n--11/01\u8ffd\u8a18--\n\u7570\u306a\u308bPrivateVLAN\u306b\u6240\u5c5e\u3059\u308b\u30ce\u30fc\u30c9\u3067\u3082\u81ea\u52d5\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3067\u304d\u308b\u304b\u8ffd\u52a0\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3002\n\n\u5b9f\u9a13\uff11\nSoftLayer\u30673\u53f0\u306eVirtual Server\u3092\u8d77\u52d5\uff08DC\u306fSan Jose 1\u3001OS\u306fUbuntu Server 14.04\uff09\u3002\n\u3053\u308c\u3089\u306eeth0\u306f\u540c\u4e00\u306ePriavateVLAN\uff08VLAN 2603\uff09 & Private Subnet\uff0810.54.222.128/26\uff09\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3002\n\u30db\u30b9\u30c81 (serf-test01)\neth0      Link encap:Ethernet  HWaddr 06:8a:90:33:68:cf  \n          inet addr:10.54.222.131  Bcast:10.54.222.191  Mask:255.255.255.192\n          inet6 addr: fe80::48a:90ff:fe33:68cf/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:15304 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:12198 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:3621123 (3.6 MB)  TX bytes:2601189 (2.6 MB)\n\n\u30db\u30b9\u30c82 (serf-test02)\neth0      Link encap:Ethernet  HWaddr 06:6c:77:46:6b:d4  \n          inet addr:10.54.222.132  Bcast:10.54.222.191  Mask:255.255.255.192\n          inet6 addr: fe80::46c:77ff:fe46:6bd4/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:116676 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:113720 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:23876099 (23.8 MB)  TX bytes:13363864 (13.3 MB)\n\n\u30db\u30b9\u30c83 (serf-test03)\neth0      Link encap:Ethernet  HWaddr 06:97:7c:fd:95:c7  \n          inet addr:10.54.222.133  Bcast:10.54.222.191  Mask:255.255.255.192\n          inet6 addr: fe80::497:7cff:fefd:95c7/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:48778 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:17324 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:49923945 (49.9 MB)  TX bytes:3495874 (3.4 MB)\n\n\u3053\u306e\u72b6\u6cc1\u3067\u3001\u5404\u30db\u30b9\u30c8\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3001serf\u30af\u30e9\u30b9\u30bf\u3092\u81ea\u52d5\u69cb\u7bc9\u3057\u3066\u307f\u308b\u3002\nroot@serf-test01:~# serf agent -iface=eth0 -discover=test-cluster &  \n==> Using interface 'eth0' address '10.54.222.131'\n==> Starting Serf agent...\n==> Starting Serf agent RPC...\n==> Serf agent running!\n         Node name: 'serf-test01'\n         Bind addr: '10.54.222.131:7946'\n          RPC addr: '127.0.0.1:7373'\n         Encrypted: false\n          Snapshot: false\n           Profile: lan\n      mDNS cluster: test-cluster\n\n\n\u7d50\u679c\n\u30af\u30e9\u30b9\u30bf\u53c2\u52a0\u6e08\u307f\u30ce\u30fc\u30c9\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u3066JOIN\u3057\u306a\u304f\u3066\u3082\u3001multicastDNS\u306b\u3088\u3063\u3066\u81ea\u52d5\u7684\u306btest-cluster\u306b\u53c2\u52a0\u3057\u3066member-join\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\u3057\u3001Serf\u30af\u30e9\u30b9\u30bf\u304c\u81ea\u52d5\u69cb\u7bc9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3002\nroot@serf-test01:~# serf monitor\n    2014/11/01 13:55:37 [INFO] agent.ipc: Accepted client: 127.0.0.1:57271\n2014/11/01 13:53:31 [INFO] agent: Serf agent starting\n2014/11/01 13:53:31 [INFO] serf: EventMemberJoin: serf-test01 10.54.222.131\n2014/11/01 13:53:32 [INFO] agent: joining: [10.54.222.131:7946] replay: false\n2014/11/01 13:53:32 [INFO] agent: joined: 1 nodes\n2014/11/01 13:53:32 [INFO] agent.mdns: Joined 1 hosts\n2014/11/01 13:53:32 [INFO] agent: Received event: member-join\n2014/11/01 13:55:16 [INFO] serf: EventMemberJoin: serf-test02 10.54.222.132\n2014/11/01 13:55:17 [INFO] agent: Received event: member-join\n2014/11/01 13:55:21 [INFO] serf: EventMemberJoin: serf-test03 10.54.222.133\n2014/11/01 13:55:22 [INFO] agent: Received event: member-join\n2014/11/01 13:55:32 [INFO] agent: joining: [10.54.222.133:7946 10.54.222.132:7946] replay: false\n2014/11/01 13:55:32 [INFO] agent: joined: 2 nodes\n2014/11/01 13:55:32 [INFO] agent.mdns: Joined 2 hosts\n2014/11/01 13:55:37 [INFO] agent.ipc: Accepted client: 127.0.0.1:57271\n\nroot@serf-test01:~# serf members\n    2014/11/01 13:56:09 [INFO] agent.ipc: Accepted client: 127.0.0.1:57273\nserf-test01  10.54.222.131:7946  alive  \nserf-test02  10.54.222.132:7946  alive  \nserf-test03  10.54.222.133:7946  alive\n\n\n\u5b9f\u9a13\uff12\nSoftLayer\u306b1\u53f0\u306eBare Metal Server\u3092\u8d77\u52d5\uff08DC\u306fSan Jose 1\u3001OS\u306fUbuntu Server 14.04\uff09\u3002\n\u3053\u308c\u306f\u4e0a\u8a183\u53f0\u3068\u306f\u7570\u306a\u308bPrivateVLAN\uff08VLAN 2224\uff09\u3001\u7570\u306a\u308b\u30b5\u30d6\u30cd\u30c3\u30c8\uff0810.91.83.0/26\uff09\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3002\n\u30db\u30b9\u30c8\uff10 (serf-test00)\neth0      Link encap:Ethernet  HWaddr 00:25:90:6c:6b:2e  \n          inet addr:10.91.83.2  Bcast:10.91.83.63  Mask:255.255.255.192\n          inet6 addr: fe80::225:90ff:fe6c:6b2e/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:2500 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:2498 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:384802 (384.8 KB)  TX bytes:181186 (181.1 KB)\n          Memory:df980000-dfa00000 \n\nVLAN Spanning\u3092ON\u306b\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30b5\u30d6\u30cd\u30c3\u30c8\u304c\u7570\u306a\u3063\u3066\u3082\u901a\u4fe1\u53ef\u80fd\u3002\nroot@serf-test00:~# ping -c1 10.54.222.131\nPING 10.54.222.131 (10.54.222.131) 56(84) bytes of data.\n64 bytes from 10.54.222.131: icmp_seq=1 ttl=61 time=0.333 ms\n\n--- 10.54.222.131 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 0.333/0.333/0.333/0.000 ms\n\n\u305f\u3060\u3057boradcast\u30c9\u30e1\u30a4\u30f3\u306f\u7570\u306a\u308b\u306e\u3067arp\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u4e57\u3089\u306a\u3044\uff0810.91.83.1\u306fGateway\uff09\u3002\nroot@serf-test00:~# arp -an -i eth0\n? (10.91.83.1) at cc:ef:48:85:70:c0 [ether] on eth0\n\n\n\u30db\u30b9\u30c8\uff11\u301c\uff13\u306eSerf\u30af\u30e9\u30b9\u30bf\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u3067\u30db\u30b9\u30c8\uff10\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3001serf\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\nroot@serf-test00:~# serf agent -iface=eth0 -discover=test-cluster &\n==> Using interface 'eth0' address '10.91.83.2'\n==> Starting Serf agent...\n==> Starting Serf agent RPC...\n==> Serf agent running!\n         Node name: 'serf-test00'\n         Bind addr: '10.91.83.2:7946'\n          RPC addr: '127.0.0.1:7373'\n         Encrypted: false\n          Snapshot: false\n           Profile: lan\n      mDNS cluster: test-cluster\n\n\n\u7d50\u679c\n\u65e2\u5b58\u306eSerf\u30af\u30e9\u30b9\u30bf\u306b\u81ea\u52d5JOIN\u3067\u304d\u306a\u304b\u3063\u305f\u3002\nroot@serf-test01:~# serf members\n    2014/11/01 14:37:35 [INFO] agent.ipc: Accepted client: 127.0.0.1:57241\nserf-test01  10.54.222.131:7946  alive  \nserf-test02  10.54.222.132:7946  alive  \nserf-test03  10.54.222.133:7946  alive\n\nroot@serf-test00:~# serf members\n    2014/11/01 14:38:19 [INFO] agent.ipc: Accepted client: 127.0.0.1:54992\nserf-test00  10.91.83.2:7946  alive\n\nVLAN Spanning\u3055\u308c\u305fVLAN\u9593\u3067\u3042\u3063\u3066\u3082\u3001\u30b5\u30d6\u30cd\u30c3\u30c8\u9593\u3067multicast\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3055\u308c\u306a\u3044\u6a21\u69d8\u3002\n\n\u30af\u30e9\u30b9\u30bf\u306e\u81ea\u52d5\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u304c\u3067\u304d\u306a\u304f\u3066\u3082\u3001\u30af\u30e9\u30b9\u30bf\u30e1\u30f3\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308c\u3070\u3001\u7570\u306a\u308b\u30b5\u30d6\u30cd\u30c3\u30c8\u3067\u3042\u3063\u3066\u3082JOIN\u3067\u304d\u308b\u3002\nroot@serf-test00:~# serf join 10.54.222.131\n    2014/11/01 14:40:08 [INFO] agent.ipc: Accepted client: 127.0.0.1:54993\n    2014/11/01 14:40:08 [INFO] agent: joining: [10.54.222.131] replay: false\n    2014/11/01 14:40:08 [INFO] serf: EventMemberJoin: serf-test01 10.54.222.131\n    2014/11/01 14:40:08 [INFO] serf: EventMemberJoin: serf-test03 10.54.222.133\n    2014/11/01 14:40:08 [INFO] serf: EventMemberJoin: serf-test02 10.54.222.132\n    2014/11/01 14:40:08 [INFO] agent: joined: 1 nodes\nSuccessfully joined cluster by contacting 1 nodes.\nroot@serf-test00:~# serf members\n    2014/11/01 14:40:33 [INFO] agent.ipc: Accepted client: 127.0.0.1:54996\nserf-test00  10.91.83.2:7946     alive  \nserf-test01  10.54.222.131:7946  alive  \nserf-test03  10.54.222.133:7946  alive  \nserf-test02  10.54.222.132:7946  alive\n\nAWS VPC\u4e0a\u306e\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306fmulticast\u3068broadcast\u3092[\u660e\u793a\u7684\u306b\u7981\u3058\u3066\u3044\u308b](http://aws.amazon.com/jp/vpc/faqs/)\u304c\u3001SoftLayer\u306e\u4eee\u60f3\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u306f\u305d\u306e\u3088\u3046\u306a\u8a18\u8ff0\u306f\u898b\u5f53\u305f\u3089\u306a\u3044\u3002\n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001Serf0.4\u304b\u3089\u5b9f\u88c5\u3055\u308c\u305fmulticastDNS\u3092\u7528\u3044\u305fdiscover\u6a5f\u80fd\u3092\u4f7f\u3063\u3066\u3001SoftLayer\u306ePrivateVLAN\u4e0a\u3067multicast\u304c\u901a\u308b\u306e\u304b\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3002\n\n--11/01\u8ffd\u8a18--\n\u7570\u306a\u308bPrivateVLAN\u306b\u6240\u5c5e\u3059\u308b\u30ce\u30fc\u30c9\u3067\u3082\u81ea\u52d5\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u3067\u304d\u308b\u304b\u8ffd\u52a0\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3002\n\n## \u5b9f\u9a13\uff11\n\nSoftLayer\u30673\u53f0\u306eVirtual Server\u3092\u8d77\u52d5\uff08DC\u306fSan Jose 1\u3001OS\u306fUbuntu Server 14.04\uff09\u3002\n\u3053\u308c\u3089\u306eeth0\u306f\u540c\u4e00\u306ePriavateVLAN\uff08VLAN 2603\uff09 & Private Subnet\uff0810.54.222.128/26\uff09\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3002\n\n\u30db\u30b9\u30c81 (serf-test01)\n\n```\neth0      Link encap:Ethernet  HWaddr 06:8a:90:33:68:cf  \n          inet addr:10.54.222.131  Bcast:10.54.222.191  Mask:255.255.255.192\n          inet6 addr: fe80::48a:90ff:fe33:68cf/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:15304 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:12198 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:3621123 (3.6 MB)  TX bytes:2601189 (2.6 MB)\n```\n\n\u30db\u30b9\u30c82 (serf-test02)\n\n```\neth0      Link encap:Ethernet  HWaddr 06:6c:77:46:6b:d4  \n          inet addr:10.54.222.132  Bcast:10.54.222.191  Mask:255.255.255.192\n          inet6 addr: fe80::46c:77ff:fe46:6bd4/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:116676 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:113720 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:23876099 (23.8 MB)  TX bytes:13363864 (13.3 MB)\n```\n\n\u30db\u30b9\u30c83 (serf-test03)\n\n```\neth0      Link encap:Ethernet  HWaddr 06:97:7c:fd:95:c7  \n          inet addr:10.54.222.133  Bcast:10.54.222.191  Mask:255.255.255.192\n          inet6 addr: fe80::497:7cff:fefd:95c7/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:48778 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:17324 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:49923945 (49.9 MB)  TX bytes:3495874 (3.4 MB)\n```\n\n\u3053\u306e\u72b6\u6cc1\u3067\u3001\u5404\u30db\u30b9\u30c8\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3001serf\u30af\u30e9\u30b9\u30bf\u3092\u81ea\u52d5\u69cb\u7bc9\u3057\u3066\u307f\u308b\u3002\n\n```\nroot@serf-test01:~# serf agent -iface=eth0 -discover=test-cluster &  \n==> Using interface 'eth0' address '10.54.222.131'\n==> Starting Serf agent...\n==> Starting Serf agent RPC...\n==> Serf agent running!\n         Node name: 'serf-test01'\n         Bind addr: '10.54.222.131:7946'\n          RPC addr: '127.0.0.1:7373'\n         Encrypted: false\n          Snapshot: false\n           Profile: lan\n      mDNS cluster: test-cluster\n```\n\n### \u7d50\u679c\n\n\u30af\u30e9\u30b9\u30bf\u53c2\u52a0\u6e08\u307f\u30ce\u30fc\u30c9\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u6307\u5b9a\u3057\u3066JOIN\u3057\u306a\u304f\u3066\u3082\u3001multicastDNS\u306b\u3088\u3063\u3066\u81ea\u52d5\u7684\u306btest-cluster\u306b\u53c2\u52a0\u3057\u3066member-join\u30a4\u30d9\u30f3\u30c8\u304c\u767a\u751f\u3057\u3001Serf\u30af\u30e9\u30b9\u30bf\u304c\u81ea\u52d5\u69cb\u7bc9\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u78ba\u8a8d\u3067\u304d\u305f\u3002\n\n```\nroot@serf-test01:~# serf monitor\n    2014/11/01 13:55:37 [INFO] agent.ipc: Accepted client: 127.0.0.1:57271\n2014/11/01 13:53:31 [INFO] agent: Serf agent starting\n2014/11/01 13:53:31 [INFO] serf: EventMemberJoin: serf-test01 10.54.222.131\n2014/11/01 13:53:32 [INFO] agent: joining: [10.54.222.131:7946] replay: false\n2014/11/01 13:53:32 [INFO] agent: joined: 1 nodes\n2014/11/01 13:53:32 [INFO] agent.mdns: Joined 1 hosts\n2014/11/01 13:53:32 [INFO] agent: Received event: member-join\n2014/11/01 13:55:16 [INFO] serf: EventMemberJoin: serf-test02 10.54.222.132\n2014/11/01 13:55:17 [INFO] agent: Received event: member-join\n2014/11/01 13:55:21 [INFO] serf: EventMemberJoin: serf-test03 10.54.222.133\n2014/11/01 13:55:22 [INFO] agent: Received event: member-join\n2014/11/01 13:55:32 [INFO] agent: joining: [10.54.222.133:7946 10.54.222.132:7946] replay: false\n2014/11/01 13:55:32 [INFO] agent: joined: 2 nodes\n2014/11/01 13:55:32 [INFO] agent.mdns: Joined 2 hosts\n2014/11/01 13:55:37 [INFO] agent.ipc: Accepted client: 127.0.0.1:57271\n```\n\n```\nroot@serf-test01:~# serf members\n    2014/11/01 13:56:09 [INFO] agent.ipc: Accepted client: 127.0.0.1:57273\nserf-test01  10.54.222.131:7946  alive  \nserf-test02  10.54.222.132:7946  alive  \nserf-test03  10.54.222.133:7946  alive\n```\n\n## \u5b9f\u9a13\uff12\n\nSoftLayer\u306b1\u53f0\u306eBare Metal Server\u3092\u8d77\u52d5\uff08DC\u306fSan Jose 1\u3001OS\u306fUbuntu Server 14.04\uff09\u3002\n\u3053\u308c\u306f\u4e0a\u8a183\u53f0\u3068\u306f\u7570\u306a\u308bPrivateVLAN\uff08VLAN 2224\uff09\u3001\u7570\u306a\u308b\u30b5\u30d6\u30cd\u30c3\u30c8\uff0810.91.83.0/26\uff09\u306b\u6240\u5c5e\u3057\u3066\u3044\u308b\u3002\n\n\u30db\u30b9\u30c8\uff10 (serf-test00)\n\n```\neth0      Link encap:Ethernet  HWaddr 00:25:90:6c:6b:2e  \n          inet addr:10.91.83.2  Bcast:10.91.83.63  Mask:255.255.255.192\n          inet6 addr: fe80::225:90ff:fe6c:6b2e/64 Scope:Link\n          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1\n          RX packets:2500 errors:0 dropped:0 overruns:0 frame:0\n          TX packets:2498 errors:0 dropped:0 overruns:0 carrier:0\n          collisions:0 txqueuelen:1000 \n          RX bytes:384802 (384.8 KB)  TX bytes:181186 (181.1 KB)\n          Memory:df980000-dfa00000 \n```\n\nVLAN Spanning\u3092ON\u306b\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30b5\u30d6\u30cd\u30c3\u30c8\u304c\u7570\u306a\u3063\u3066\u3082\u901a\u4fe1\u53ef\u80fd\u3002\n\n```\nroot@serf-test00:~# ping -c1 10.54.222.131\nPING 10.54.222.131 (10.54.222.131) 56(84) bytes of data.\n64 bytes from 10.54.222.131: icmp_seq=1 ttl=61 time=0.333 ms\n\n--- 10.54.222.131 ping statistics ---\n1 packets transmitted, 1 received, 0% packet loss, time 0ms\nrtt min/avg/max/mdev = 0.333/0.333/0.333/0.000 ms\n```\n\n\u305f\u3060\u3057boradcast\u30c9\u30e1\u30a4\u30f3\u306f\u7570\u306a\u308b\u306e\u3067arp\u30c6\u30fc\u30d6\u30eb\u306b\u306f\u4e57\u3089\u306a\u3044\uff0810.91.83.1\u306fGateway\uff09\u3002\n\n```\nroot@serf-test00:~# arp -an -i eth0\n? (10.91.83.1) at cc:ef:48:85:70:c0 [ether] on eth0\n\n```\n\n\u30db\u30b9\u30c8\uff11\u301c\uff13\u306eSerf\u30af\u30e9\u30b9\u30bf\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u3067\u30db\u30b9\u30c8\uff10\u3067\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6295\u3052\u3001serf\u30af\u30e9\u30b9\u30bf\u306b\u53c2\u52a0\u3067\u304d\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n\n```\nroot@serf-test00:~# serf agent -iface=eth0 -discover=test-cluster &\n==> Using interface 'eth0' address '10.91.83.2'\n==> Starting Serf agent...\n==> Starting Serf agent RPC...\n==> Serf agent running!\n         Node name: 'serf-test00'\n         Bind addr: '10.91.83.2:7946'\n          RPC addr: '127.0.0.1:7373'\n         Encrypted: false\n          Snapshot: false\n           Profile: lan\n      mDNS cluster: test-cluster\n```\n\n### \u7d50\u679c\n\n\u65e2\u5b58\u306eSerf\u30af\u30e9\u30b9\u30bf\u306b\u81ea\u52d5JOIN\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\n```\nroot@serf-test01:~# serf members\n    2014/11/01 14:37:35 [INFO] agent.ipc: Accepted client: 127.0.0.1:57241\nserf-test01  10.54.222.131:7946  alive  \nserf-test02  10.54.222.132:7946  alive  \nserf-test03  10.54.222.133:7946  alive\n```\n```\nroot@serf-test00:~# serf members\n    2014/11/01 14:38:19 [INFO] agent.ipc: Accepted client: 127.0.0.1:54992\nserf-test00  10.91.83.2:7946  alive\n```\n\nVLAN Spanning\u3055\u308c\u305fVLAN\u9593\u3067\u3042\u3063\u3066\u3082\u3001\u30b5\u30d6\u30cd\u30c3\u30c8\u9593\u3067multicast\u306f\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3055\u308c\u306a\u3044\u6a21\u69d8\u3002\n\n----\n\u30af\u30e9\u30b9\u30bf\u306e\u81ea\u52d5\u30c7\u30a3\u30b9\u30ab\u30d0\u30ea\u304c\u3067\u304d\u306a\u304f\u3066\u3082\u3001\u30af\u30e9\u30b9\u30bf\u30e1\u30f3\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u660e\u793a\u7684\u306b\u6307\u5b9a\u3059\u308c\u3070\u3001\u7570\u306a\u308b\u30b5\u30d6\u30cd\u30c3\u30c8\u3067\u3042\u3063\u3066\u3082JOIN\u3067\u304d\u308b\u3002\n\n```\nroot@serf-test00:~# serf join 10.54.222.131\n    2014/11/01 14:40:08 [INFO] agent.ipc: Accepted client: 127.0.0.1:54993\n    2014/11/01 14:40:08 [INFO] agent: joining: [10.54.222.131] replay: false\n    2014/11/01 14:40:08 [INFO] serf: EventMemberJoin: serf-test01 10.54.222.131\n    2014/11/01 14:40:08 [INFO] serf: EventMemberJoin: serf-test03 10.54.222.133\n    2014/11/01 14:40:08 [INFO] serf: EventMemberJoin: serf-test02 10.54.222.132\n    2014/11/01 14:40:08 [INFO] agent: joined: 1 nodes\nSuccessfully joined cluster by contacting 1 nodes.\nroot@serf-test00:~# serf members\n    2014/11/01 14:40:33 [INFO] agent.ipc: Accepted client: 127.0.0.1:54996\nserf-test00  10.91.83.2:7946     alive  \nserf-test01  10.54.222.131:7946  alive  \nserf-test03  10.54.222.133:7946  alive  \nserf-test02  10.54.222.132:7946  alive\n```\n\n\n\n"}