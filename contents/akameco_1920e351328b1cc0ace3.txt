{"context": "\u7814\u7a76\u5ba4\u306e\u5148\u8f29\u306belixir\u3068phoenix\u3092\u5e03\u6559\u3055\u308c\u305f\u306e\u3067\u8efd\u304f\u89e6\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u7c21\u5358\u306aREST API\u3064\u304f\u3063\u3066React\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u524d\u63d0\u3068\u3057\u3066mac\u74b0\u5883\u3068\u3057\u307e\u3059\u3002\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ brew install elixir\n$ mix local.hex\n$ mix archive.install https://github.com/phoenixframework/archives/raw/master/phoenix_new.ez\n\n\u3053\u308c\u3067phoenix\u306e\u74b0\u5883\u304c\u6574\u3044\u307e\u3057\u305f\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u30cf\u30de\u308b\u3068\u3053\u308d\u306a\u304f\u3044\u3044\u611f\u3058\u3067\u3059\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\u4eca\u56de\u306f\u3068\u308a\u3042\u3048\u305a\u30de\u30a4\u30af\u30ed\u30d6\u30ed\u30b0\u3092\u3064\u304f\u3063\u3066\u307f\u308b\u3053\u3068\u3057\u307e\u3059\u3002\nRails\u306erails new\u3068\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\u3067phoenix.new\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\ndb\u306f\u624b\u8efd\u306a\u306e\u3067sqlite\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001Phoenix\u306fbrunch.io\u3068\u3044\u3046\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb\u3092\u63a1\u7528\u3057\u3066\u308b\u3088\u3046\u3067\u3059\u304c\u3001API\u304c\u76ee\u7684\u3067\u3059\u306e\u3067--no-brunch\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u7701\u7565\u3057\u307e\u3059\u3002\n$ mix phoenix.new blog --database sqlite --no-brunch\n\n\u4f9d\u5b58\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u304b\u805e\u304b\u308c\u308b\u306e\u3067Y\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n...\nFetch and install dependencies? [Yn] Y\n\n\u8868\u793a\u3055\u308c\u308b\u6307\u793a\u3069\u3046\u308a\u306b\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\n$ cd blog\n$ mix phoenix.server\n\nhttp://localhost:4000\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u52d5\u3044\u3066\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\u3088\u3055\u305d\u3046\u3067\u3059\u3002\n\nAPI\u4f5c\u6210\n\u3055\u3066\u3001Phoenix\u306b\u306fRails\u306escaffold\u3068\u4f3c\u305f\u6a5f\u80fd\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u305d\u308c\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u9055\u3044\u3068\u3057\u3066\u306f\u30e2\u30c7\u30eb\u540d\u306e\u4ed6\u306b\u30ab\u30e9\u30e0\u540d\u3092\u5225\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u3053\u308d\u3067\u3059\u3002\n\nMix.Tasks.Phoenix.Gen.Json \u2013 Phoenix v1.1.4\n\n$ mix phoenix.gen.json Post posts title:string body:text\n* creating web/controllers/post_controller.ex\n.\n.\n.\nAdd the resource to your api scope in web/router.ex:\n\n    resources \"/posts\", PostController, except: [:new, :edit]\n\nRemember to update your repository by running migrations:\n\n    $ mix ecto.migrate\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3084\u30e2\u30c7\u30eb\u304c\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\nrouter.ex\u306b\u8ffd\u8a18\u3057\u308d\u3068\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u305d\u306e\u901a\u308a\u306b\u3057\u307e\u3059\u3002\n\u3064\u3044\u3067\u306bAPI\u306e\u90e8\u5206\u304c\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u89e3\u9664\u3057\u307e\u3059\u3002\n\nweb/router.ex\n...\n  scope \"/api\", Blog do\n    pipe_through :api\n    resources \"/posts\", PostController, except: [:new, :edit]\n  end\n...\n\n\n\u307e\u3060DB\u3092\u4f5c\u6210\u3057\u3066\u306a\u3044\u306e\u3067\u307e\u305a\u306fcreate\u3057\u3066\u304b\u3089migrate\u3092\u884c\u3044\u307e\u3059\u3002\n$ mix ecto.create \n$ mix ecto.migrate\n\n\u3053\u308c\u3067API\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nCURL\u3067\u53e9\u3044\u3066\u307f\u307e\u3059\u3002\n$ curl -v -H \"Accept: application/json\" -H \"Content-type: application/json\" -X POST -d '{\"post\": {\"title\": \"phoenix\u3067API\u3092\u3064\u304f\u3063\u3066\u307f\u308b\", \"body\": \"API\u306e\u30c6\u30b9\u30c8\u3060\u3088\u30fc\" }}' http://localhost:4000/api/posts\n\nCURL\u3067\u3059\u3079\u3066\u306ePost\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n$ curl -v -H \"Accept: application/json\" -H \"Content-type: application/json\" http://localhost:4000/api/posts\n.\n.\n.\n{\"data\":[{\"title\":\"phoenix\u3067API\u3092\u3064\u304f\u3063\u3066\u307f\u308b\",\"id\":1,\"body\":\"API\u306e\u30c6\u30b9\u30c8\u3060\u3088\u30fc\"}]}\n\n\u5927\u4e08\u592b\u305d\u3046\u3067\u3059\u306d\u3002\n\nReact\u3067\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u4f5c\u6210\nAPI\u3060\u3051\u3060\u3068\u5473\u6c17\u306a\u3044\u306e\u3067React\u3067\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u3064\u304f\u3063\u3066\u307f\u307e\u3059\u3002\n\u898b\u305f\u611f\u3058/web/templates/layout/app.html.eex\u304b\u3089bundle.js\u304c\u547c\u3079\u308c\u3070\u306a\u3093\u3067\u3082\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\u5143\u306e\u30b3\u30fc\u30c9\u3092\u6d88\u3057\u3066\u4ee5\u4e0b\u306e\uff12\u884c\u3092\u8ffd\u8a18\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\nweb/templates/layout/app.html.eex\n<div class='main'></div>\n<script src=\"<%= static_path(@conn, \"/js/bundle.js\") %>\"></script>\n\n\n\u3068\u308a\u3042\u3048\u305apriv/static\u4ee5\u4e0b\u306b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u30b3\u30fc\u30c9\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n$ cd /priv/static\n$ npm init\n$ npm i -S react react-dom superagent\n$ npm i -D browserify babelify babel-preset-es2015 babel-preset-react watchify\n\n\n.babelrc\n{\n  \"presets\": [\"react\", \"es2015\"]\n}\n\n\n\npackage.json\n{\n  \"name\": \"blog-frontend\",\n  \"scripts\": {\n    \"watch\": \"watchify -t babelify index.js -o ./js/bundle.js\",\n    \"build\": \"browserify -t babelify index.js -o ./js/bundle.js\"\n  },\n  \"dependencies\": {\n    \"react\": \"^0.14.7\",\n    \"react-dom\": \"^0.14.7\",\n    \"superagent\": \"^1.7.2\"\n  },\n  \"devDependencies\": {\n    \"babel-preset-es2015\": \"^6.5.0\",\n    \"babel-preset-react\": \"^6.5.0\",\n    \"babelify\": \"^7.2.0\",\n    \"browserify\": \"^13.0.0\",\n    \"watchify\": \"^3.7.0\"\n  }\n}\n\n\n\u3053\u308c\u3067\u3044\u3064\u3082\u3069\u304a\u308anpm script\u3092\u53e9\u3044\u3066\u958b\u767a\u3092\u884c\u3048\u307e\u3059\u3002\n$ npm run watch\n\n\u96d1\u306bAPI\u3092\u53e9\u304fReact\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u7d20\u306ehtml\u3060\u3068\u5bc2\u3057\u304b\u3063\u305f\u306e\u3067\u3001bootstrap\u8ffd\u52a0\u3057\u3066\u3001\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\nindex.js\nimport React, {Component} from 'react';\nimport {render} from 'react-dom';\nimport request from 'superagent';\n\nclass Blog extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n    this.loadPostsFromServer();\n  }\n\n  loadPostsFromServer() {\n    request\n      .get('/api/posts')\n      .set('Accept', 'application/json')\n      .set('Content-type', 'application/json')\n      .end((err, res) => {\n        this.setState({data: res.body.data.reverse()});\n      });\n  }\n\n  handlePostSubmit(post) {\n    request\n      .post('/api/posts')\n      .set('Accept', 'application/json')\n      .set('Content-type', 'application/json')\n      .send(JSON.stringify({post: post}))\n      .end((err, res) => {\n        this.setState({data: [res.body.data].concat(this.state.data)});\n      });\n  }\n\n  componentWillMount() {\n    setInterval(this.loadPostsFromServer.bind(this), 2000);\n  }\n\n  render() {\n    const posts = this.state.data.map(post => {\n      return (\n        <Post data={post} key={post.id} />\n      );\n    });\n\n    return (\n      <div className='container'>\n        <h1>Phoenix+React Blog Sample</h1>\n        <div className='col-md-3'>\n          <Submit onPostSubmit={this.handlePostSubmit.bind(this)}/>\n        </div>\n        <div className='col-md-9'>\n          {posts}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst Post = props => {\n  return (\n    <div className='panel panel-default'>\n      <div className='panel-heading'>\n        <h4 className='panel-title'>{props.data.title}</h4>\n      </div>\n      <div className='panel-body'>\n        {props.data.body}\n      </div>\n    </div>\n  );\n};\n\nclass Submit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {title: '', body: ''};\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const title = this.state.title.trim();\n    const body = this.state.body.trim();\n    if (!title || !body) {\n      return;\n    }\n    this.props.onPostSubmit({title, body});\n    this.setState({title: '', body: ''});\n  }\n\n  handleTitleChange(e) {\n    this.setState({title: e.target.value});\n  }\n\n  handleBodyChange(e) {\n    this.setState({body: e.target.value});\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit.bind(this)}>\n        <div className='form-group'>\n          <input className='form-control' type='text' placeholder='\u30bf\u30a4\u30c8\u30eb' value={this.state.title} onChange={this.handleTitleChange.bind(this)}/>\n        </div>\n        <div className='form-group'>\n          <textarea className='form-control' type='text' placeholder='\u5185\u5bb9' value={this.state.body} onChange={this.handleBodyChange.bind(this)}/>\n        </div>\n        <input className='btn btn-default pull-right' type='submit' value='Post' />\n      </form>\n    );\n  }\n}\n\nrender(<Blog />, document.querySelector('.main'));\n\n\n2\u79d2\u3054\u3068\u306b\u30dd\u30fc\u30ea\u30f3\u30b0\u3057\u3066\u753b\u9762\u3092\u66f4\u65b0\u3057\u3066\u307e\u3059\u3002\n\u5b8c\u6210\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n\u4f5c\u6210\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306f\u53c2\u8003\u306b\u306a\u308b\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001akameco/phoenix-react-sample-app\u306b\u3042\u308a\u307e\u3059\u3002\n\n\u304a\u308f\u308a\u306b\n\u3068\u308a\u3042\u3048\u305a\u89e6\u308a\u3060\u3051\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nRails\u30e9\u30a4\u30af\u3067\u7c21\u5358\u306b\u4f7f\u3048\u3066\u3044\u3044\u3067\u3059\u306d\u3002\nwebsocket\u3082\u7c21\u5358\u306b\u4f7f\u3048\u308b\u3088\u3046\u306a\u306e\u3067\u3053\u308c\u304b\u3089\u8a66\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u53c2\u8003\n\nUp And Running \u00b7 Phoenix\n\n\n\u7814\u7a76\u5ba4\u306e\u5148\u8f29\u306belixir\u3068phoenix\u3092\u5e03\u6559\u3055\u308c\u305f\u306e\u3067\u8efd\u304f\u89e6\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n\u3068\u308a\u3042\u3048\u305a\u3001\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u7c21\u5358\u306aREST API\u3064\u304f\u3063\u3066React\u304b\u3089\u4f7f\u3063\u3066\u307f\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u524d\u63d0\u3068\u3057\u3066mac\u74b0\u5883\u3068\u3057\u307e\u3059\u3002\n\n## \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ brew install elixir\n$ mix local.hex\n$ mix archive.install https://github.com/phoenixframework/archives/raw/master/phoenix_new.ez\n```\n\n\u3053\u308c\u3067phoenix\u306e\u74b0\u5883\u304c\u6574\u3044\u307e\u3057\u305f\u3002\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u30cf\u30de\u308b\u3068\u3053\u308d\u306a\u304f\u3044\u3044\u611f\u3058\u3067\u3059\u3002\n\n## \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\u4eca\u56de\u306f\u3068\u308a\u3042\u3048\u305a\u30de\u30a4\u30af\u30ed\u30d6\u30ed\u30b0\u3092\u3064\u304f\u3063\u3066\u307f\u308b\u3053\u3068\u3057\u307e\u3059\u3002\nRails\u306e`rails new`\u3068\u4f3c\u305f\u3088\u3046\u306a\u611f\u3058\u3067`phoenix.new`\u3067\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\ndb\u306f\u624b\u8efd\u306a\u306e\u3067`sqlite`\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u307e\u305f\u3001Phoenix\u306f[brunch.io](http://brunch.io/)\u3068\u3044\u3046\u30d3\u30eb\u30c9\u30c4\u30fc\u30eb\u3092\u63a1\u7528\u3057\u3066\u308b\u3088\u3046\u3067\u3059\u304c\u3001API\u304c\u76ee\u7684\u3067\u3059\u306e\u3067`--no-brunch`\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u7701\u7565\u3057\u307e\u3059\u3002\n\n```\n$ mix phoenix.new blog --database sqlite --no-brunch\n```\n\n\u4f9d\u5b58\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u304b\u805e\u304b\u308c\u308b\u306e\u3067`Y`\u3067\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```\n...\nFetch and install dependencies? [Yn] Y\n```\n\n\u8868\u793a\u3055\u308c\u308b\u6307\u793a\u3069\u3046\u308a\u306b\u30b5\u30fc\u30d0\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ cd blog\n$ mix phoenix.server\n```\n\n`http://localhost:4000`\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u52d5\u3044\u3066\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n\n![Hello_Blog2_.png](https://qiita-image-store.s3.amazonaws.com/0/15319/8ee79163-7f88-a6e3-4891-76458f7705ae.png \"Hello_Blog2_.png\")\n\n\u3088\u3055\u305d\u3046\u3067\u3059\u3002\n\n## API\u4f5c\u6210\n\n\u3055\u3066\u3001Phoenix\u306b\u306fRails\u306escaffold\u3068\u4f3c\u305f\u6a5f\u80fd\u304c\u3042\u308b\u3088\u3046\u306a\u306e\u3067\u305d\u308c\u3092\u4f7f\u3044\u307e\u3059\u3002\n\u9055\u3044\u3068\u3057\u3066\u306f\u30e2\u30c7\u30eb\u540d\u306e\u4ed6\u306b\u30ab\u30e9\u30e0\u540d\u3092\u5225\u306b\u8a2d\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3068\u3053\u308d\u3067\u3059\u3002\n\n- [Mix.Tasks.Phoenix.Gen.Json \u2013 Phoenix v1.1.4](http://hexdocs.pm/phoenix/Mix.Tasks.Phoenix.Gen.Json.html)\n\n```\n$ mix phoenix.gen.json Post posts title:string body:text\n* creating web/controllers/post_controller.ex\n.\n.\n.\nAdd the resource to your api scope in web/router.ex:\n\n    resources \"/posts\", PostController, except: [:new, :edit]\n\nRemember to update your repository by running migrations:\n\n    $ mix ecto.migrate\n```\n\n\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3084\u30e2\u30c7\u30eb\u304c\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\n`router.ex`\u306b\u8ffd\u8a18\u3057\u308d\u3068\u3068\u306e\u3053\u3068\u306a\u306e\u3067\u305d\u306e\u901a\u308a\u306b\u3057\u307e\u3059\u3002\n\u3064\u3044\u3067\u306bAPI\u306e\u90e8\u5206\u304c\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u89e3\u9664\u3057\u307e\u3059\u3002\n\n```ex:web/router.ex\n...\n  scope \"/api\", Blog do\n    pipe_through :api\n    resources \"/posts\", PostController, except: [:new, :edit]\n  end\n...\n```\n\n\u307e\u3060DB\u3092\u4f5c\u6210\u3057\u3066\u306a\u3044\u306e\u3067\u307e\u305a\u306fcreate\u3057\u3066\u304b\u3089migrate\u3092\u884c\u3044\u307e\u3059\u3002\n\n```\n$ mix ecto.create \n$ mix ecto.migrate\n```\n\n\u3053\u308c\u3067API\u304c\u3067\u304d\u307e\u3057\u305f\u3002\nCURL\u3067\u53e9\u3044\u3066\u307f\u307e\u3059\u3002\n\n```\n$ curl -v -H \"Accept: application/json\" -H \"Content-type: application/json\" -X POST -d '{\"post\": {\"title\": \"phoenix\u3067API\u3092\u3064\u304f\u3063\u3066\u307f\u308b\", \"body\": \"API\u306e\u30c6\u30b9\u30c8\u3060\u3088\u30fc\" }}' http://localhost:4000/api/posts\n```\n\nCURL\u3067\u3059\u3079\u3066\u306ePost\u3092\u53d6\u5f97\u3057\u3066\u307f\u307e\u3059\u3002\n\n```\n$ curl -v -H \"Accept: application/json\" -H \"Content-type: application/json\" http://localhost:4000/api/posts\n.\n.\n.\n{\"data\":[{\"title\":\"phoenix\u3067API\u3092\u3064\u304f\u3063\u3066\u307f\u308b\",\"id\":1,\"body\":\"API\u306e\u30c6\u30b9\u30c8\u3060\u3088\u30fc\"}]}\n```\n\n\u5927\u4e08\u592b\u305d\u3046\u3067\u3059\u306d\u3002\n\n## React\u3067\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u4f5c\u6210\nAPI\u3060\u3051\u3060\u3068\u5473\u6c17\u306a\u3044\u306e\u3067React\u3067\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u3092\u3064\u304f\u3063\u3066\u307f\u307e\u3059\u3002\n\n\u898b\u305f\u611f\u3058`/web/templates/layout/app.html.eex`\u304b\u3089`bundle.js`\u304c\u547c\u3079\u308c\u3070\u306a\u3093\u3067\u3082\u3067\u304d\u305d\u3046\u3067\u3059\u3002\n\u5143\u306e\u30b3\u30fc\u30c9\u3092\u6d88\u3057\u3066\u4ee5\u4e0b\u306e\uff12\u884c\u3092\u8ffd\u8a18\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n```html:web/templates/layout/app.html.eex\n<div class='main'></div>\n<script src=\"<%= static_path(@conn, \"/js/bundle.js\") %>\"></script>\n```\n\n\u3068\u308a\u3042\u3048\u305a`priv/static`\u4ee5\u4e0b\u306b\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306e\u30b3\u30fc\u30c9\u3092\u914d\u7f6e\u3059\u308b\u3053\u3068\u306b\u3057\u307e\u3059\u3002\n\u5fc5\u8981\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u3084\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u6e96\u5099\u3057\u307e\u3059\u3002\n\n```\n$ cd /priv/static\n$ npm init\n$ npm i -S react react-dom superagent\n$ npm i -D browserify babelify babel-preset-es2015 babel-preset-react watchify\n```\n\n\n```json:.babelrc\n{\n  \"presets\": [\"react\", \"es2015\"]\n}\n```\n\n\n```json:package.json\n{\n  \"name\": \"blog-frontend\",\n  \"scripts\": {\n    \"watch\": \"watchify -t babelify index.js -o ./js/bundle.js\",\n    \"build\": \"browserify -t babelify index.js -o ./js/bundle.js\"\n  },\n  \"dependencies\": {\n    \"react\": \"^0.14.7\",\n    \"react-dom\": \"^0.14.7\",\n    \"superagent\": \"^1.7.2\"\n  },\n  \"devDependencies\": {\n    \"babel-preset-es2015\": \"^6.5.0\",\n    \"babel-preset-react\": \"^6.5.0\",\n    \"babelify\": \"^7.2.0\",\n    \"browserify\": \"^13.0.0\",\n    \"watchify\": \"^3.7.0\"\n  }\n}\n```\n\n\u3053\u308c\u3067\u3044\u3064\u3082\u3069\u304a\u308anpm script\u3092\u53e9\u3044\u3066\u958b\u767a\u3092\u884c\u3048\u307e\u3059\u3002\n\n```sh:\n$ npm run watch\n```\n\n\u96d1\u306bAPI\u3092\u53e9\u304fReact\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u7d20\u306ehtml\u3060\u3068\u5bc2\u3057\u304b\u3063\u305f\u306e\u3067\u3001bootstrap\u8ffd\u52a0\u3057\u3066\u3001\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n\n```js:index.js\nimport React, {Component} from 'react';\nimport {render} from 'react-dom';\nimport request from 'superagent';\n\nclass Blog extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: []\n    };\n    this.loadPostsFromServer();\n  }\n\n  loadPostsFromServer() {\n    request\n      .get('/api/posts')\n      .set('Accept', 'application/json')\n      .set('Content-type', 'application/json')\n      .end((err, res) => {\n        this.setState({data: res.body.data.reverse()});\n      });\n  }\n\n  handlePostSubmit(post) {\n    request\n      .post('/api/posts')\n      .set('Accept', 'application/json')\n      .set('Content-type', 'application/json')\n      .send(JSON.stringify({post: post}))\n      .end((err, res) => {\n        this.setState({data: [res.body.data].concat(this.state.data)});\n      });\n  }\n\n  componentWillMount() {\n    setInterval(this.loadPostsFromServer.bind(this), 2000);\n  }\n\n  render() {\n    const posts = this.state.data.map(post => {\n      return (\n        <Post data={post} key={post.id} />\n      );\n    });\n\n    return (\n      <div className='container'>\n        <h1>Phoenix+React Blog Sample</h1>\n        <div className='col-md-3'>\n          <Submit onPostSubmit={this.handlePostSubmit.bind(this)}/>\n        </div>\n        <div className='col-md-9'>\n          {posts}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst Post = props => {\n  return (\n    <div className='panel panel-default'>\n      <div className='panel-heading'>\n        <h4 className='panel-title'>{props.data.title}</h4>\n      </div>\n      <div className='panel-body'>\n        {props.data.body}\n      </div>\n    </div>\n  );\n};\n\nclass Submit extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {title: '', body: ''};\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const title = this.state.title.trim();\n    const body = this.state.body.trim();\n    if (!title || !body) {\n      return;\n    }\n    this.props.onPostSubmit({title, body});\n    this.setState({title: '', body: ''});\n  }\n\n  handleTitleChange(e) {\n    this.setState({title: e.target.value});\n  }\n\n  handleBodyChange(e) {\n    this.setState({body: e.target.value});\n  }\n\n  render() {\n    return (\n      <form onSubmit={this.handleSubmit.bind(this)}>\n        <div className='form-group'>\n          <input className='form-control' type='text' placeholder='\u30bf\u30a4\u30c8\u30eb' value={this.state.title} onChange={this.handleTitleChange.bind(this)}/>\n        </div>\n        <div className='form-group'>\n          <textarea className='form-control' type='text' placeholder='\u5185\u5bb9' value={this.state.body} onChange={this.handleBodyChange.bind(this)}/>\n        </div>\n        <input className='btn btn-default pull-right' type='submit' value='Post' />\n      </form>\n    );\n  }\n}\n\nrender(<Blog />, document.querySelector('.main'));\n```\n\n2\u79d2\u3054\u3068\u306b\u30dd\u30fc\u30ea\u30f3\u30b0\u3057\u3066\u753b\u9762\u3092\u66f4\u65b0\u3057\u3066\u307e\u3059\u3002\n\u5b8c\u6210\u30a4\u30e1\u30fc\u30b8\u306f\u3053\u3093\u306a\u611f\u3058\u3067\u3059\u3002\n\n![blog_sample.png](https://qiita-image-store.s3.amazonaws.com/0/15319/a61f85e3-0cfa-5666-6715-d8b8808a199f.png \"blog_sample.png\")\n\n\n\u4f5c\u6210\u3057\u305f\u30b5\u30f3\u30d7\u30eb\u306f\u53c2\u8003\u306b\u306a\u308b\u304b\u308f\u304b\u308a\u307e\u305b\u3093\u304c\u3001[akameco/phoenix-react-sample-app](https://github.com/akameco/phoenix-react-sample-app)\u306b\u3042\u308a\u307e\u3059\u3002\n\n## \u304a\u308f\u308a\u306b\n\u3068\u308a\u3042\u3048\u305a\u89e6\u308a\u3060\u3051\u4f7f\u3063\u3066\u307f\u307e\u3057\u305f\u3002\nRails\u30e9\u30a4\u30af\u3067\u7c21\u5358\u306b\u4f7f\u3048\u3066\u3044\u3044\u3067\u3059\u306d\u3002\nwebsocket\u3082\u7c21\u5358\u306b\u4f7f\u3048\u308b\u3088\u3046\u306a\u306e\u3067\u3053\u308c\u304b\u3089\u8a66\u3057\u3066\u307f\u3088\u3046\u3068\u601d\u3044\u307e\u3059\u3002\n\n\n## \u53c2\u8003\n- [Up And Running \u00b7 Phoenix](http://www.phoenixframework.org/docs/up-and-running)\n", "tags": ["React", "Elixir", "Phoenix"]}