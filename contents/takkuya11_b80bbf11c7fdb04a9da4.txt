{"context": "\n\n\u6982\u8981\ndevise\u3067\u4f5c\u6210\u3057\u305f\u65b0\u898f\u767b\u9332/\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u306e\u524d\u306b\u30db\u30fc\u30e0\u753b\u9762\u3092\u4f5c\u6210\u3002\n\u30db\u30fc\u30e0\u753b\u9762\u304b\u3089\u65b0\u898f\u767b\u9332/\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u3078\u305d\u308c\u305e\u308c\u9077\u79fb\u3002\n\u30db\u30fc\u30e0\uff08/users\uff09\n\u30fb\u65b0\u898f\u767b\u9332\u3000\u2192\u3000/users/sign_up\n\u30fb\u30ed\u30b0\u30a4\u30f3\u3000\u2192\u3000/users/sign_in\n\n\u6d41\u308c\nregistrations_controller.rb\u306bindex\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\n\ncontrollers/users/registrations_controller.rb\ndef index\nend\n\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u4f5c\u6210\n\nconfig/routes.rb\ndevise_scope :user do\n get 'users' => 'users/registrations#index'\nend\n\n\ndevise.rb\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\nconfig/initializers/devise.rb\nconfig.warden do |manager|\n\u3000manager.failure_app = CustomFailure\nend\n\n\nlib\u306bcustom_failure.rb\u3092\u4f5c\u6210\u3057\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u5148\u3092\u6307\u5b9a\n\nlib/custom_failure.rb\nclass CustomFailure < Devise::FailureApp\n def redirect_url\n  users_url\n end\n\n def respond\n  if http_auth?\n   http_auth\n  else\n   redirect\n  end\n end\nend\n\n\napplication.rb\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\nconfig/initializers/application.rb\nconfig.autoload_paths << Rails.root.join('lib')\n\n\n\n\u53c2\u8003\nHow To: Redirect to a specific page when the user can not be authenticated\n#\u6982\u8981\ndevise\u3067\u4f5c\u6210\u3057\u305f\u65b0\u898f\u767b\u9332/\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u306e\u524d\u306b\u30db\u30fc\u30e0\u753b\u9762\u3092\u4f5c\u6210\u3002\n\u30db\u30fc\u30e0\u753b\u9762\u304b\u3089\u65b0\u898f\u767b\u9332/\u30ed\u30b0\u30a4\u30f3\u30da\u30fc\u30b8\u3078\u305d\u308c\u305e\u308c\u9077\u79fb\u3002\n\n\u30db\u30fc\u30e0\uff08/users\uff09\n\u30fb\u65b0\u898f\u767b\u9332\u3000\u2192\u3000/users/sign_up\n\u30fb\u30ed\u30b0\u30a4\u30f3\u3000\u2192\u3000/users/sign_in\n\n##\u6d41\u308c\nregistrations_controller.rb\u306bindex\u30a2\u30af\u30b7\u30e7\u30f3\u3092\u8ffd\u52a0\n\n```ruby:controllers/users/registrations_controller.rb\ndef index\nend\n```\n\n\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3092\u4f5c\u6210\n\n```ruby:config/routes.rb\ndevise_scope :user do\n get 'users' => 'users/registrations#index'\nend\n```\n\ndevise.rb\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\n```ruby:config/initializers/devise.rb\nconfig.warden do |manager|\n\u3000manager.failure_app = CustomFailure\nend\n```\n\nlib\u306bcustom_failure.rb\u3092\u4f5c\u6210\u3057\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u5148\u3092\u6307\u5b9a\n\n```ruby:lib/custom_failure.rb\nclass CustomFailure < Devise::FailureApp\n def redirect_url\n  users_url\n end\n\n def respond\n  if http_auth?\n   http_auth\n  else\n   redirect\n  end\n end\nend\n```\n\napplication.rb\u306b\u4ee5\u4e0b\u3092\u8ffd\u8a18\n\n```ruby:config/initializers/application.rb\nconfig.autoload_paths << Rails.root.join('lib')\n```\n\n##\u53c2\u8003\n[How To: Redirect to a specific page when the user can not be authenticated](https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-when-the-user-can-not-be-authenticated)\n", "tags": ["devise", "Rails"]}