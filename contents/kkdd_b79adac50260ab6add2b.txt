{"context": "\u3053\u3093\u306b\u3061\u306f\u3002\n\u300c\u8907\u6570\u306e\u4e8c\u6b21\u5143\u591a\u89d2\u5f62\u9818\u57df(polygon)\u304c\u4e92\u3044\u306b\u7d20\u3067\u3001\u5e73\u9762\u3092\u4f59\u3055\u305a\u88ab\u8986\u300d\u306e\u96c6\u5408\u3068\u306a\u308b\u3088\u3046\u8abf\u6574\u4fee\u6b63\u3092\u65bd\u3059\u65b9\u6cd5\u3092\u63a2\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u76ee\u7684\u306f polygon\u540c\u58eb\u306e\u30ae\u30e3\u30c3\u30d7\u3084\u91cd\u306a\u308a\u3092\u7121\u304f\u3059\u3053\u3068\u3067\u3059\u3002\u3053\u308c\u3089\u306f\u691c\u51fa\u304c\u5bb9\u6613\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001\u7d50\u5408\u3055\u305b\u3066\u307f\u308b\u3068\u30ae\u30e3\u30c3\u30d7\u306e\u5b58\u5728\u304c\u5206\u304b\u308a\u307e\u30591\u3002\npolygon \u306e\u96c6\u5408\u306f GeoJSON \u5f62\u5f0f\u3092\u4eee\u5b9a\u3057\u307e\u3057\u305f\uff08\u5165\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\uff09\u3002\n\nogr2ogr (GDAL) \u3067\u3001ST_MakeValid\u3092\u65bd\u3057\u3001\u5404 polygon \u306e self-intersection \u3092\u4fee\u6b63\u3059\u308b\u3002\n\n$ ogr2ogr -f GeoJSON -explodecollections output.json input.json -dialect sqlite -sql \"select ST_MakeValid(geometry) as geometry from OGRGeoJSON\"\n\n\n\npprepair (planar partition repair) \uff1a\u5165\u529b\u5f62\u5f0f\u306f\u81ea\u52d5\u7684\u306b\u5404\u7a2e\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u304c\u3001\u51fa\u529b\u5f62\u5f0f\u306f\u4eca\u306e\u3068\u3053\u308d\u3001 cmake \u306e\u5f15\u6570\u3067\u6307\u5b9a\u3057\u305f\u4e00\u7a2e\u985e\u3067\u3059\u3002\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u5185\u3067 \"properties\": {} \u306e\u3088\u3046\u306b\u7a7a\u306b\u306a\u3063\u3066\u3044\u308b\u3068 segment fault \u306b\u306a\u308a\u307e\u3059\u3002\n\n$ cmake -DDRIVER=\"GeoJSON\" .\n$ make\n$ ./pprepair -h\n$ ./pprepair -i input.json -v\n$ ./pprepair -i input.json -o output.json -rrlb\n\n\n\n\n\n\n\u5b9f\u4f8b\u306f\u3001\u300c\u7d50\u5408\u3067\u3067\u304d\u305f\u300c\u9699\u9593\u300d\u3092\u6392\u9664\u3059\u308b\u300d\u3002\u00a0\u21a9\n\n\n\n\u3053\u3093\u306b\u3061\u306f\u3002\n\u300c\u8907\u6570\u306e\u4e8c\u6b21\u5143\u591a\u89d2\u5f62\u9818\u57df(polygon)\u304c\u4e92\u3044\u306b\u7d20\u3067\u3001\u5e73\u9762\u3092\u4f59\u3055\u305a\u88ab\u8986\u300d\u306e\u96c6\u5408\u3068\u306a\u308b\u3088\u3046\u8abf\u6574\u4fee\u6b63\u3092\u65bd\u3059\u65b9\u6cd5\u3092\u63a2\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u76ee\u7684\u306f polygon\u540c\u58eb\u306e\u30ae\u30e3\u30c3\u30d7\u3084\u91cd\u306a\u308a\u3092\u7121\u304f\u3059\u3053\u3068\u3067\u3059\u3002\u3053\u308c\u3089\u306f\u691c\u51fa\u304c\u5bb9\u6613\u3067\u306f\u306a\u3044\u3067\u3059\u304c\u3001[\u7d50\u5408](http://qiita.com/kkdd/items/775588319f01f5e03b11)\u3055\u305b\u3066\u307f\u308b\u3068\u30ae\u30e3\u30c3\u30d7\u306e\u5b58\u5728\u304c\u5206\u304b\u308a\u307e\u3059[^1]\u3002\n\npolygon \u306e\u96c6\u5408\u306f GeoJSON \u5f62\u5f0f\u3092\u4eee\u5b9a\u3057\u307e\u3057\u305f\uff08\u5165\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\uff09\u3002\n\n- ogr2ogr ([GDAL](http://www.gdal.org/index.html)) \u3067\u3001```ST_MakeValid```\u3092\u65bd\u3057\u3001\u5404 polygon \u306e self-intersection \u3092\u4fee\u6b63\u3059\u308b\u3002\n\n```console\n$ ogr2ogr -f GeoJSON -explodecollections output.json input.json -dialect sqlite -sql \"select ST_MakeValid(geometry) as geometry from OGRGeoJSON\"\n```\n\n- [pprepair](https://github.com/tudelft3d/pprepair) (planar partition repair) \uff1a\u5165\u529b\u5f62\u5f0f\u306f\u81ea\u52d5\u7684\u306b\u5404\u7a2e\u306b\u5bfe\u5fdc\u3057\u307e\u3059\u304c\u3001\u51fa\u529b\u5f62\u5f0f\u306f\u4eca\u306e\u3068\u3053\u308d\u3001 cmake \u306e\u5f15\u6570\u3067\u6307\u5b9a\u3057\u305f\u4e00\u7a2e\u985e\u3067\u3059\u3002\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u5185\u3067 ```\"properties\": {}``` \u306e\u3088\u3046\u306b\u7a7a\u306b\u306a\u3063\u3066\u3044\u308b\u3068 segment fault \u306b\u306a\u308a\u307e\u3059\u3002\n\n```\n$ cmake -DDRIVER=\"GeoJSON\" .\n$ make\n$ ./pprepair -h\n$ ./pprepair -i input.json -v\n$ ./pprepair -i input.json -o output.json -rrlb\n```\n\n----------\n[^1]: \u5b9f\u4f8b\u306f\u3001\u300c[\u7d50\u5408\u3067\u3067\u304d\u305f\u300c\u9699\u9593\u300d\u3092\u6392\u9664\u3059\u308b](http://qiita.com/yellow_73/items/739a8745d9f9513a0a38)\u300d\u3002\n", "tags": ["GIS", "geojson", "GDAL"]}