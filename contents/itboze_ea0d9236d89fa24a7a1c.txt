{"context": " More than 1 year has passed since last update.\u30c7\u30a3\u30fc\u30d7\u30e9\u30fc\u30cb\u30f3\u30b0\u3082\u3001\u4e00\u6642\u7684\u306a\u6d41\u884c\u308a\u3067\u7d42\u308f\u308b\u306e\u304b\u306a\u3041\u301c\u3002\n\u6700\u8fd1\u3001\u6570\u5b66\u306b\u30cf\u30de\u3063\u3066\u307e\u3059(\uff40\u30fb\u03c9\u30fb\u00b4)\uff77\uff98\uff6f\n\u3069\u3082\u3063\u3002ITBOZE\u3067\u3059\u3002\nRails\u3067Devise\u3092\u4f7f\u304a\u3046\u3068\u601d\u3063\u3066\u3001Google\u306e\u6ce2\u3092\u304b\u304d\u5206\u3051\u305f\u3002\n\u3067\u3001\u81ea\u5206\u306a\u308a\u306b\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u307f\u305f\u3002\n--- \u5168\u4f53\u306e\u6d41\u308c ---\n\u305d\u306e1\u3000\u5c0e\u5165\u7de8 \u2190\u4eca\u30b3\u30b3\n\u305d\u306e2\u3000View\u3068Controller\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u7de8\n\u305d\u306e3\u3000Devise\u306e\u65e5\u672c\u8a9e\u5316\u7de8\n\u305d\u306e4\u3000\u30e6\u30fc\u30b6\u30fcID\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u8a8d\u8a3c\u7de8 \n\u307e\u305a\u306f\u3001\u5c0e\u5165\u7de8\u3002\n\n1. \u4e8b\u524d\u6e96\u5099\n\nRails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\nPostfix\u306e\u8a2d\u5b9a\u3092\u6e08\u307e\u305b\u3066\u304a\u304f(\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u306e\u969b\u3001\u30e1\u30fc\u30eb\u3092\u98db\u3070\u3057\u305f\u3044\u5834\u5408)\n\n\n2. Gemfile\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\ngem 'devise'\n\n\n3. bundle install \u3092\u5b9f\u884c\n$ bundle install\n\n\n4. Rails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3001devise\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ rails g devise:install\n\n      create  config/initializers/devise.rb\n      create  config/locales/devise.en.yml\n===================================================================\n\nSome setup you must do manually if you haven't yet:\n\n  1. Ensure you have defined default url options in your environments files. Here\n     is an example of default_url_options appropriate for a development environment\n     in config/environments/development.rb:\n\n       config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\n     In production, :host should be set to the actual host of your application.\n\n  2. Ensure you have defined root_url to *something* in your config/routes.rb.\n     For example:\n\n       root to: \"home#index\"\n\n  3. Ensure you have flash messages in app/views/layouts/application.html.erb.\n     For example:\n\n       <p class=\"notice\"><%= notice %></p>\n       <p class=\"alert\"><%= alert %></p>\n\n  4. If you are deploying on Heroku with Rails 3.2 only, you may want to set:\n\n       config.assets.initialize_on_precompile = false\n\n     On config/application.rb forcing your application to not access the DB\n     or load models when precompiling your assets.\n\n  5. You can copy Devise views (for customization) to your app by running:\n\n       rails g devise:views\n\n===================================================================\n\n\n5. root\u306eURL\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f5c\u6210\n$ rails g controller Home index show\n\n\n6. root\u306eURL\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u8a2d\u5b9a\n\n\nconfig/routes.rb\u306b\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u8a18\u8ff0\n\n  get 'home/index'             \n  get 'home/show'              \n\n  root to: \"home#index\"\n\n\n7. \u30e1\u30c3\u30bb\u30fc\u30b8\u8868\u793a\u9818\u57df\u3092\u8ffd\u52a0\n\n\u3068\u308a\u3042\u3048\u305aapp/views/layouts/application.html.erb\u306ebody\u306e\u4e00\u756a\u4e0a\u306b\u8ffd\u8a18\n\u3068\u308a\u3042\u3048\u305a\u3001\u5168\u3066\u306e\u753b\u9762\u306e\u4e0a\u90e8\u306b\u3001\n\n\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u300c\u30b5\u30a4\u30f3\u30a4\u30f3\u300d\u3068\u300c\u30ed\u30b0\u30a4\u30f3\u300d\u306e\u30ea\u30f3\u30af\n\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u300c\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4\u300d\u3068\u300c\u30ed\u30b0\u30a2\u30a6\u30c8\u300d\u306e\u30ea\u30f3\u30af\n\u3092\u8868\u793a\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\n<body>\n\n  <header>\n    <nav>\n      <!-- user_signed_in? \u306f\u30e6\u30fc\u30b6\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u304b\u8abf\u3079\u308bdevise\u306eHelper\u30e1\u30bd\u30c3\u30c9 -->\n      <% if user_signed_in? %> \n        <!-- current_user \u306f\u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059devise\u306eHelper\u30e1\u30bd\u30c3\u30c9 -->\n        <!-- *_path \u306fUser\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3068\u304d\u306b\u3001\n        devise\u306b\u3088\u308a\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u3066\u307e\u3059\u306e\u3067\u3001rake routes\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059 -->\n        Logged in as <strong><%= current_user.email %></strong>.\n        <%= link_to '\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4', edit_user_registration_path %> |\n        <%= link_to \"\u30ed\u30b0\u30a2\u30a6\u30c8\", sign_out_path %>\n      <% else %>\n        <%= link_to \"\u30b5\u30a4\u30f3\u30a4\u30f3\", new_user_registration_path %> |\n        <%= link_to \"\u30ed\u30b0\u30a4\u30f3\", new_user_session_path %>\n      <% end %>\n    </nav>\n  </header>\n\n  <p class=\"notice\"><%= notice %></p>\n  <p class=\"alert\"><%= alert %></p>\n\n  <%= yield %>\n</body>\n\n\n\n\u6ce8\u610f\u70b9 : \u30ed\u30b0\u30a2\u30a6\u30c8\u306e\u30ea\u30f3\u30af\u30bf\u30b0\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3068\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002\n\n<%= link_to \"\u30ed\u30b0\u30a2\u30a6\u30c8\", destroy_user_session_path, method: :delete %>\n\n\n\u4e0a\u8a18\u306e\u30a8\u30e9\u30fc\u3092\u56de\u907f\u3059\u308b\u306b\u306f\u3001config/initializers/devise.rb\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u4ee5\u4e0b\u306e\u4fee\u6b63\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\nconfig.sign_out_via = :delete\n    \u2193\nconfig.sign_out_via = :get\n\n\n\u305f\u3060\u3001\u4e0a\u8a18\u306e\u4fee\u6b63\u65b9\u6cd5\u306f\u3001\u3042\u307e\u308a\u826f\u3044\u6c17\u304c\u3057\u306a\u3044\u306e\u3067\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u306e\u30ea\u30f3\u30af\u30bf\u30b0\u306f\u3001sign_out_path\u304c\u7121\u96e3\u3060\u3068\u601d\u3046\u3002\n\n\n8. \u30e1\u30bd\u30c3\u30c9\u306b\u3064\u3044\u3066\n\n\u8a8d\u53ef\u3092\u5fc5\u8981\u3068\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e before_action \u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3002\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u30e2\u30c7\u30eb\u540d\u304c User \u306e\u5834\u5408\u306f\u4ee5\u4e0b\u3002\nbefore_action :authenticate_user!\n\n\n\n\u30e6\u30fc\u30b6\u30fc\u304c\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3002\nuser_signed_in?\n\n\n\n\u73fe\u5728\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u3092\u53d6\u5f97\u3002\ncurrent_user\n\n\n\n\u30e6\u30fc\u30b6\u30fc\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u306b\u30a2\u30af\u30bb\u30b9\u3002\nuser_session\n\n\n\n\n9. \u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u7528\u306eModel\u3092\u4f5c\u6210\n\n\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u7528\u306eModel\u540d\u306f\u4efb\u610f\n\u4eca\u56de\u306f\u3001User\u3068\u3059\u308b\n\n$ rails g devise User\n\n\n8. \u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u6642\u306b\u78ba\u8a8d\u30e1\u30fc\u30eb\u3092\u51fa\u3059\u5834\u5408\n\ndb/migrate/nnnnnn_devise_create_users.rb\u306et.confirmable\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u307e\u3059\u3002\n\n      ## Confirmable\n      t.string   :confirmation_token\n      t.datetime :confirmed_at\n      t.datetime :confirmation_sent_at\n      t.string   :unconfirmed_email # Only if using reconfirmable\n\n\n\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3082\u6709\u52b9\u306b\u3059\u308b\n\n    add_index :users, :confirmation_token,   unique: true\n\n\n9. Model\u3092DB\u306b\u53cd\u6620\n$ rake db:migrate\n\n\n10. \u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af(\u30a2\u30af\u30bb\u30b9\u5236\u9650)\u306b\u3064\u3044\u3066\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066Controller\u306b\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\n\nbefore_filter :authenticate_user!\n\n\nHome\u306eshow\u753b\u9762\u3078\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u8ffd\u52a0\u3059\u308b\u4f8b\n\nclass HomeController < ApplicationController\n  # \u30e6\u30fc\u30b6\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u3068\"show\"\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\n  before_action :authenticate_user!, only: :show\n\n  def index\n  end\n\n  def show\n  end\nend\n\n\n11. \u30e1\u30fc\u30eb\u9001\u4fe1\u306e\u8a2d\u5b9a\n\n1. config/environments/development.rb\n\n\n\u5fc5\u8981\u306b\u5fdc\u3058\u3066test.rb,production.rb\u306b\u3082\u8ffd\u8a18\n\u5024\u306f\u74b0\u5883\u306b\u5fdc\u3058\u3066\u5909\u66f4\u3059\u308b\n\nconfig.action_mailer.default_url_options = { :host => 'localhost:3000' }\n\nconfig.action_mailer.raise_delivery_errors = true\n\n ActionMailer::Base.delivery_method = :smtp\n ActionMailer::Base.smtp_settings = {\n   :address => \"smtp.gmail.com\", # smtp\u30b5\u30fc\u30d0\u30fc\u306e\u30db\u30b9\u30c8\u540d\n   :port => 587,\n   :authentication => :plain,\n   :user_name => \"\u9001\u4fe1\u5143\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\",\n   :password => \"\u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\"\n }\n\n\n2. config/initializers/device.rb\n\nconfig.mailer_sender = 'xxxxx@xxxx.com'  # \u9001\u4fe1\u5143\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n\n\n3. app/models/user.rb\n\n\n\nconfirmable\u3092\u8ffd\u52a0\n\n  devise :database_authenticatable, :registerable,:confirmable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n\n12. Rails\u3092\u8d77\u52d5\u3057\u3001\u52d5\u4f5c\u78ba\u8a8d\n$ rails s\n\n\n\u3069\u3046\u3067\u3059\u304b\uff1f\u3000\u3053\u3053\u307e\u3067\u3046\u307e\u304f\u3067\u304d\u307e\u3057\u305f\u304b\u30fc\uff1f\n\n\n\u203bITBOZE\u306b\u3088\u308bIT\u6280\u8853\u306e\u5099\u5fd8\u9332\u30d6\u30ed\u30b0\n\u574a\u4e3b\u304c\u4e0a\u624b\u306bHatena\u306b\u574a\u4e3b\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f\n\u3082\u3088\u308d\u3057\u304f\u306d!\n\n\u30c7\u30a3\u30fc\u30d7\u30e9\u30fc\u30cb\u30f3\u30b0\u3082\u3001\u4e00\u6642\u7684\u306a\u6d41\u884c\u308a\u3067\u7d42\u308f\u308b\u306e\u304b\u306a\u3041\u301c\u3002\n\u6700\u8fd1\u3001\u6570\u5b66\u306b\u30cf\u30de\u3063\u3066\u307e\u3059(\uff40\u30fb\u03c9\u30fb\u00b4)\uff77\uff98\uff6f\n\n\u3069\u3082\u3063\u3002ITBOZE\u3067\u3059\u3002\n\nRails\u3067Devise\u3092\u4f7f\u304a\u3046\u3068\u601d\u3063\u3066\u3001Google\u306e\u6ce2\u3092\u304b\u304d\u5206\u3051\u305f\u3002\n\u3067\u3001\u81ea\u5206\u306a\u308a\u306b\u624b\u9806\u3092\u307e\u3068\u3081\u3066\u307f\u305f\u3002\n\n\n--- \u5168\u4f53\u306e\u6d41\u308c ---\n[\u305d\u306e1\u3000\u5c0e\u5165\u7de8](http://qiita.com/itboze/items/ea0d9236d89fa24a7a1c) \u2190\u4eca\u30b3\u30b3\n[\u305d\u306e2\u3000View\u3068Controller\u306e\u30ab\u30b9\u30bf\u30de\u30a4\u30ba\u7de8](http://qiita.com/itboze/items/f991d54ff527edb844d9)\n[\u305d\u306e3\u3000Devise\u306e\u65e5\u672c\u8a9e\u5316\u7de8](http://qiita.com/itboze/items/a1b532004a9a8a57e296)\n[\u305d\u306e4\u3000\u30e6\u30fc\u30b6\u30fcID\u3067\u3001\u30ed\u30b0\u30a4\u30f3\u8a8d\u8a3c\u7de8](http://qiita.com/itboze/items/385d3cd539fc7578b52a) \n\n\n\u307e\u305a\u306f\u3001\u5c0e\u5165\u7de8\u3002\n\n### 1. \u4e8b\u524d\u6e96\u5099\n\n* Rails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u304a\u304f\n* Postfix\u306e\u8a2d\u5b9a\u3092\u6e08\u307e\u305b\u3066\u304a\u304f(\u30e6\u30fc\u30b6\u30fc\u767b\u9332\u306e\u969b\u3001\u30e1\u30fc\u30eb\u3092\u98db\u3070\u3057\u305f\u3044\u5834\u5408)\n\n### 2. Gemfile\u306b\u4ee5\u4e0b\u3092\u8ffd\u52a0\n\n```\ngem 'devise'\n```\n\n### 3. bundle install \u3092\u5b9f\u884c\n\n```\n$ bundle install\n```\n\n### 4. Rails\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306b\u3001devise\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ rails g devise:install\n```\n\n```\n      create  config/initializers/devise.rb\n      create  config/locales/devise.en.yml\n===================================================================\n\nSome setup you must do manually if you haven't yet:\n\n  1. Ensure you have defined default url options in your environments files. Here\n     is an example of default_url_options appropriate for a development environment\n     in config/environments/development.rb:\n\n       config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\n\n     In production, :host should be set to the actual host of your application.\n\n  2. Ensure you have defined root_url to *something* in your config/routes.rb.\n     For example:\n\n       root to: \"home#index\"\n\n  3. Ensure you have flash messages in app/views/layouts/application.html.erb.\n     For example:\n\n       <p class=\"notice\"><%= notice %></p>\n       <p class=\"alert\"><%= alert %></p>\n\n  4. If you are deploying on Heroku with Rails 3.2 only, you may want to set:\n\n       config.assets.initialize_on_precompile = false\n\n     On config/application.rb forcing your application to not access the DB\n     or load models when precompiling your assets.\n\n  5. You can copy Devise views (for customization) to your app by running:\n\n       rails g devise:views\n\n===================================================================\n```\n\n### 5. root\u306eURL\u7528\u306e\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u3092\u4f5c\u6210\n\n```\n$ rails g controller Home index show\n```\n\n### 6. root\u306eURL\u3092\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u306b\u8a2d\u5b9a\n\n* `config/routes.rb`\u306b\u3001\u4ee5\u4e0b\u306e\u5185\u5bb9\u3092\u8a18\u8ff0\n\n```\n  get 'home/index'             \n  get 'home/show'              \n  \n  root to: \"home#index\"\n```\n\n### 7. \u30e1\u30c3\u30bb\u30fc\u30b8\u8868\u793a\u9818\u57df\u3092\u8ffd\u52a0\n\n* \u3068\u308a\u3042\u3048\u305aapp/views/layouts/application.html.erb\u306ebody\u306e\u4e00\u756a\u4e0a\u306b\u8ffd\u8a18\n* \u3068\u308a\u3042\u3048\u305a\u3001\u5168\u3066\u306e\u753b\u9762\u306e\u4e0a\u90e8\u306b\u3001\n\t* \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u5834\u5408\u306f\u3001\u300c\u30b5\u30a4\u30f3\u30a4\u30f3\u300d\u3068\u300c\u30ed\u30b0\u30a4\u30f3\u300d\u306e\u30ea\u30f3\u30af\n\t* \u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u300c\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4\u300d\u3068\u300c\u30ed\u30b0\u30a2\u30a6\u30c8\u300d\u306e\u30ea\u30f3\u30af\n\u3092\u8868\u793a\u3055\u305b\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n```\n<body>\n\n  <header>\n    <nav>\n      <!-- user_signed_in? \u306f\u30e6\u30fc\u30b6\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308b\u304b\u8abf\u3079\u308bdevise\u306eHelper\u30e1\u30bd\u30c3\u30c9 -->\n      <% if user_signed_in? %> \n        <!-- current_user \u306f\u73fe\u5728\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u308bUser\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u8fd4\u3059devise\u306eHelper\u30e1\u30bd\u30c3\u30c9 -->\n        <!-- *_path \u306fUser\u30e2\u30c7\u30eb\u3092\u4f5c\u6210\u3057\u305f\u3068\u304d\u306b\u3001\n        devise\u306b\u3088\u308a\u81ea\u52d5\u3067\u4f5c\u6210\u3055\u308c\u3066\u307e\u3059\u306e\u3067\u3001rake routes\u3067\u78ba\u8a8d\u3067\u304d\u307e\u3059 -->\n        Logged in as <strong><%= current_user.email %></strong>.\n        <%= link_to '\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u5909\u66f4', edit_user_registration_path %> |\n        <%= link_to \"\u30ed\u30b0\u30a2\u30a6\u30c8\", sign_out_path %>\n      <% else %>\n        <%= link_to \"\u30b5\u30a4\u30f3\u30a4\u30f3\", new_user_registration_path %> |\n        <%= link_to \"\u30ed\u30b0\u30a4\u30f3\", new_user_session_path %>\n      <% end %>\n    </nav>\n  </header>\n\n  <p class=\"notice\"><%= notice %></p>\n  <p class=\"alert\"><%= alert %></p>\n  \n  <%= yield %>\n</body>\n```\n\n* **\u6ce8\u610f\u70b9** : **\u30ed\u30b0\u30a2\u30a6\u30c8**\u306e\u30ea\u30f3\u30af\u30bf\u30b0\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3068\u3001\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u3002\n\n```\n<%= link_to \"\u30ed\u30b0\u30a2\u30a6\u30c8\", destroy_user_session_path, method: :delete %>\n``` \n\n* \u4e0a\u8a18\u306e\u30a8\u30e9\u30fc\u3092\u56de\u907f\u3059\u308b\u306b\u306f\u3001`config/initializers/devise.rb`\u30d5\u30a1\u30a4\u30eb\u3067\u3001\u4ee5\u4e0b\u306e\u4fee\u6b63\u3092\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```\nconfig.sign_out_via = :delete\n\t\u2193\nconfig.sign_out_via = :get\n```\n\n* \u305f\u3060\u3001\u4e0a\u8a18\u306e\u4fee\u6b63\u65b9\u6cd5\u306f\u3001\u3042\u307e\u308a\u826f\u3044\u6c17\u304c\u3057\u306a\u3044\u306e\u3067\u3001\u30ed\u30b0\u30a2\u30a6\u30c8\u306e\u30ea\u30f3\u30af\u30bf\u30b0\u306f\u3001`sign_out_path`\u304c\u7121\u96e3\u3060\u3068\u601d\u3046\u3002\n\n\n### 8. \u30e1\u30bd\u30c3\u30c9\u306b\u3064\u3044\u3066\n\n* \u8a8d\u53ef\u3092\u5fc5\u8981\u3068\u3059\u308b\u30b3\u30f3\u30c8\u30ed\u30fc\u30e9\u30fc\u306e before_action \u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u6307\u5b9a\u3002\n* \u30e6\u30fc\u30b6\u30fc\u306e\u30e2\u30c7\u30eb\u540d\u304c User \u306e\u5834\u5408\u306f\u4ee5\u4e0b\u3002\n\n\t```\nbefore_action :authenticate_user!\n\t```\n\n* \u30e6\u30fc\u30b6\u30fc\u304c\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u3092\u691c\u8a3c\u3059\u308b\u30e1\u30bd\u30c3\u30c9\u3002\n\n\t```\nuser_signed_in?\n\t```\n\n* \u73fe\u5728\u30b5\u30a4\u30f3\u30a4\u30f3\u3057\u3066\u3044\u308b\u30e6\u30fc\u30b6\u30fc\u3092\u53d6\u5f97\u3002\n\n\t```\ncurrent_user\n\t```\n\n* \u30e6\u30fc\u30b6\u30fc\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u306b\u30a2\u30af\u30bb\u30b9\u3002\n\n\t```\nuser_session\n\t```\n\n### 9. \u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u7528\u306eModel\u3092\u4f5c\u6210\n\n* \u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u7528\u306eModel\u540d\u306f\u4efb\u610f\n* \u4eca\u56de\u306f\u3001`User`\u3068\u3059\u308b\n\n```\n$ rails g devise User\n```\n\n### 8. \u30b5\u30a4\u30f3\u30a2\u30c3\u30d7\u6642\u306b\u78ba\u8a8d\u30e1\u30fc\u30eb\u3092\u51fa\u3059\u5834\u5408\n\n* db/migrate/nnnnnn_devise_create_users.rb\u306et.confirmable\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3057\u307e\u3059\u3002\n\n```\n      ## Confirmable\n      t.string   :confirmation_token\n      t.datetime :confirmed_at\n      t.datetime :confirmation_sent_at\n      t.string   :unconfirmed_email # Only if using reconfirmable\n```\n\n* \u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u3082\u6709\u52b9\u306b\u3059\u308b\n\n```\n    add_index :users, :confirmation_token,   unique: true\n```\n\n### 9. Model\u3092DB\u306b\u53cd\u6620\n\n```\n$ rake db:migrate\n```\n\n### 10. \u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af(\u30a2\u30af\u30bb\u30b9\u5236\u9650)\u306b\u3064\u3044\u3066\n\n* \u5fc5\u8981\u306b\u5fdc\u3058\u3066Controller\u306b\u8a8d\u8a3c\u30c1\u30a7\u30c3\u30af\u3092\u8ffd\u52a0\n\n```\nbefore_filter :authenticate_user!\n```\n\n* Home\u306eshow\u753b\u9762\u3078\u306e\u30a2\u30af\u30bb\u30b9\u5236\u9650\u3092\u8ffd\u52a0\u3059\u308b\u4f8b\n\n```\nclass HomeController < ApplicationController\n  # \u30e6\u30fc\u30b6\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3044\u306a\u3044\u3068\"show\"\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u306a\u3044\n  before_action :authenticate_user!, only: :show\n\n  def index\n  end\n\n  def show\n  end\nend\n```\n\n### 11. \u30e1\u30fc\u30eb\u9001\u4fe1\u306e\u8a2d\u5b9a\n\n##### 1. `config/environments/development.rb`\n\n* \u5fc5\u8981\u306b\u5fdc\u3058\u3066test.rb,production.rb\u306b\u3082\u8ffd\u8a18\n* \u5024\u306f\u74b0\u5883\u306b\u5fdc\u3058\u3066\u5909\u66f4\u3059\u308b\n\n```\nconfig.action_mailer.default_url_options = { :host => 'localhost:3000' }\n  \nconfig.action_mailer.raise_delivery_errors = true\n\n ActionMailer::Base.delivery_method = :smtp\n ActionMailer::Base.smtp_settings = {\n   :address => \"smtp.gmail.com\", # smtp\u30b5\u30fc\u30d0\u30fc\u306e\u30db\u30b9\u30c8\u540d\n   :port => 587,\n   :authentication => :plain,\n   :user_name => \"\u9001\u4fe1\u5143\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u540d\",\n   :password => \"\u30e1\u30fc\u30eb\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\"\n }\n```\n\n##### 2. `config/initializers/device.rb`\n\n```\nconfig.mailer_sender = 'xxxxx@xxxx.com'  # \u9001\u4fe1\u5143\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\n```\n\n##### 3. `app/models/user.rb`\n\n* **`confirmable`**\u3092\u8ffd\u52a0\n\n```\n  devise :database_authenticatable, :registerable,:confirmable,\n         :recoverable, :rememberable, :trackable, :validatable\n```\n\n### 12. Rails\u3092\u8d77\u52d5\u3057\u3001\u52d5\u4f5c\u78ba\u8a8d\n\n```\n$ rails s\n```\n\n* \u3069\u3046\u3067\u3059\u304b\uff1f\u3000\u3053\u3053\u307e\u3067\u3046\u307e\u304f\u3067\u304d\u307e\u3057\u305f\u304b\u30fc\uff1f\n\n> \u203bITBOZE\u306b\u3088\u308bIT\u6280\u8853\u306e\u5099\u5fd8\u9332\u30d6\u30ed\u30b0\n> [\u574a\u4e3b\u304c\u4e0a\u624b\u306bHatena\u306b\u574a\u4e3b\u306e\u30b3\u30fc\u30c9\u3092\u66f8\u3044\u305f](http://itboze.hatenablog.com/)\n> \u3082\u3088\u308d\u3057\u304f\u306d!\n", "tags": ["devise", "Rails", "Rails4"]}