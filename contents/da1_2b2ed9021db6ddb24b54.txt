{"context": " More than 1 year has passed since last update.Ruby\u304b\u3089Solr\u3092\u4f7f\u3046\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30earsolr\u306e\u4f7f\u3044\u65b9\u899a\u3048\u66f8\u304d\nsolr-ruby\u3068\u3044\u3046\u306e\u3082\u898b\u3064\u3051\u305f\u3051\u3069\u3001Solr4.1\u3067\u306f\u4f7f\u3048\u306a\u3044\u307f\u305f\u3044\n\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n$ gem install rsolr\n\nSolr\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u7701\u7565\u3001\u8a2d\u5b9a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\n\n\u4f7f\u3063\u3066\u307f\u308b\n\nrsolr_sample.rb\nrequire 'rubygems'\nrequire 'rsolr'\n\nurl = \"http://localhost:8983/solr\"\nsolr = RSolr.connect :url => url\n\nsolr.add :id => 1234, :name => \"rsolr sample\", :price => 100\nsolr.commit #commit\u3057\u306a\u3044\u3068\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u53cd\u6620\u3055\u308c\u306a\u3044\u306e\u3067\u6ce8\u610f\n\ncontents = (0..10).map do |id|\n    {:id => id, :name => \"sample-#{id}\", :price => id * 100}\nend\n\nsolr.add contents\nsolr.optimize\nsolr.commit\n\n#\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u7d50\u679c\u306fHash\u3067\u8fd4\u3063\u3066\u304f\u308b\n#:wt => json \u7b49\u306e\u6307\u5b9a\u3067json\u3084xml\u3067\u306e\u53d6\u5f97\u3082\u53ef\u80fd\nres = solr.get 'select', :params => {:q=>'*:*', :start => 5, :rows => 5}\n\nputs \"get contents: #{res['response']['numFound']}\"\nres['response']['docs'].each do |doc|\n    puts \"#{doc['name']} #{doc['price']}\"\nend\n\nsolr.delete_by_id 1234\nsolr.delete_by_query 'name:\"sample-5\"'\nsolr.commit\n\nres = solr.get 'select', :params => {:q=>'*:*'}\nputs \"get contents: #{res['response']['numFound']}\"\nres['response']['docs'].each do |doc|\n    puts \"#{doc['name']} #{doc['price']}\"\nend\n\n\n\n\u7d50\u679c\n$ ruby rsolr_sample.rb\nget contents: 12\nsample-5 500.0\nsample-6 600.0\nsample-7 700.0\nsample-8 800.0\nsample-9 900.0\nget contents: 10\nsample-0 0.0\nsample-1 100.0\nsample-2 200.0\nsample-3 300.0\nsample-4 400.0\nsample-6 600.0\nsample-7 700.0\nsample-8 800.0\nsample-9 900.0\nsample-10 1000.0\n\n\u7c21\u5358\u3067\u3059\u306d\nRuby\u304b\u3089Solr\u3092\u4f7f\u3046\u305f\u3081\u306e\u30e9\u30a4\u30d6\u30e9\u30ea[rsolr](https://github.com/mwmitchell/rsolr)\u306e\u4f7f\u3044\u65b9\u899a\u3048\u66f8\u304d\n[solr-ruby](https://github.com/erikhatcher/solr-ruby-flare)\u3068\u3044\u3046\u306e\u3082\u898b\u3064\u3051\u305f\u3051\u3069\u3001Solr4.1\u3067\u306f\u4f7f\u3048\u306a\u3044\u307f\u305f\u3044\n\n####\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```\n$ gem install rsolr\n```\n\nSolr\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u624b\u9806\u306f\u7701\u7565\u3001\u8a2d\u5b9a\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u307e\u307e\n\n####\u4f7f\u3063\u3066\u307f\u308b\n\n```ruby:rsolr_sample.rb\nrequire 'rubygems'\nrequire 'rsolr'\n\nurl = \"http://localhost:8983/solr\"\nsolr = RSolr.connect :url => url\n\nsolr.add :id => 1234, :name => \"rsolr sample\", :price => 100\nsolr.commit #commit\u3057\u306a\u3044\u3068\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306b\u53cd\u6620\u3055\u308c\u306a\u3044\u306e\u3067\u6ce8\u610f\n\ncontents = (0..10).map do |id|\n    {:id => id, :name => \"sample-#{id}\", :price => id * 100}\nend\n\nsolr.add contents\nsolr.optimize\nsolr.commit\n\n#\u30c7\u30d5\u30a9\u30eb\u30c8\u3060\u3068\u7d50\u679c\u306fHash\u3067\u8fd4\u3063\u3066\u304f\u308b\n#:wt => json \u7b49\u306e\u6307\u5b9a\u3067json\u3084xml\u3067\u306e\u53d6\u5f97\u3082\u53ef\u80fd\nres = solr.get 'select', :params => {:q=>'*:*', :start => 5, :rows => 5}\n\nputs \"get contents: #{res['response']['numFound']}\"\nres['response']['docs'].each do |doc|\n    puts \"#{doc['name']} #{doc['price']}\"\nend\n\nsolr.delete_by_id 1234\nsolr.delete_by_query 'name:\"sample-5\"'\nsolr.commit\n\nres = solr.get 'select', :params => {:q=>'*:*'}\nputs \"get contents: #{res['response']['numFound']}\"\nres['response']['docs'].each do |doc|\n    puts \"#{doc['name']} #{doc['price']}\"\nend\n```\n\n####\u7d50\u679c\n\n```\n$ ruby rsolr_sample.rb\nget contents: 12\nsample-5 500.0\nsample-6 600.0\nsample-7 700.0\nsample-8 800.0\nsample-9 900.0\nget contents: 10\nsample-0 0.0\nsample-1 100.0\nsample-2 200.0\nsample-3 300.0\nsample-4 400.0\nsample-6 600.0\nsample-7 700.0\nsample-8 800.0\nsample-9 900.0\nsample-10 1000.0\n```\n\n\u7c21\u5358\u3067\u3059\u306d\n", "tags": ["Ruby1.9.3", "solr4.1"]}