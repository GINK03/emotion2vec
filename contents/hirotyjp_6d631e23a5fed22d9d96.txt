{"context": "\n\n\u306f\u3058\u3081\u306b\nGraphite \u306b\u306f\u6a19\u6e96\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u306eWhisper\u304c\u3042\u308a\u307e\u3059\u304c\u3001Ceres\u3068\u3044\u3046\u5225\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\nWhisper\u306f\u56fa\u5b9a\u9577\u306e\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u304c\u3001Ceres\u306f\u30c4\u30ea\u30fc\u578b\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3068\u306a\u3063\u3066\u304a\u308a\u3001\u5fc5\u8981\u4ee5\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u6301\u305f\u306a\u3044\u306e\u3067\u3001\u30c7\u30a3\u30b9\u30af\u306e\u7bc0\u7d04\u306b\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\nGraphite\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u307e\u305a\u306f\u6700\u65b0\u306eGraphite\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002CentOS 7\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nroot\u3067\u306e\u4f5c\u696d\uff1a\nyum install python-virtualenv\nyum install libffi-devel\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u3067\u306e\u4f5c\u696d\uff1a\nvirtualenv env\nsource env/bin/activate\n\npip install cffi\npip install cairocffi\npip install incremental\npip install Django==1.9.12 django-tagging==0.4.3\npip install constantly fadvise gunicorn mocker\npip install pycparser pyparsing==2.0.7 pytz python-memcached\npip install simplejson txAMQP uWSGI whitenoise zope.interface Twisted\n\npip install https://github.com/graphite-project/ceres/tarball/master\npip install https://github.com/graphite-project/whisper/tarball/master\ngit clone https://github.com/graphite-project/graphite-web.git\n\npython setup.py install \n   --install-data=~/var/data/ \\\n   --install-lib=~/usr/graphite/webapp \\\n   --install-scripts=~/usr/graphite/bin\n\n\u521d\u671f\u8a2d\u5b9a\uff1a\ncd ~/usr/graphite/webapp/graphite\nmv local_settings.py.example local_settings.py\nvi local_settings.py\n  # GRAPHITE_ROOT\u306e\u4fee\u6b63\uff08~/var/data/\u3092\u30d5\u30eb\u30d1\u30b9\u3067\u6307\u5b9a\uff09\n\n# DB\u306e\u521d\u671f\u5316\nPYTHONPATH=~/usr/graphite/webapp django-admin.py migrate \\\n  --run-syncdb --settings=graphite.settings\n\n\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u306e\u5909\u66f4\uff08Whisper->Ceres\uff09\uff1a\n~/usr/graphite/webapp/graphite/settings.py\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\nSTORAGE_FINDERS = (\n    'graphite.finders.ceres.CeresFinder',\n)\n\n\nGraphite\u306e\u8d77\u52d5\nPYTHONPATH=~/usr/graphite/webapp uwsgi --http :8080 \\\n   --wsgi-file ~/usr/graphite/webapp/graphite/wsgi.py \\\n   --static-map=/static=$(pwd)/var/data/webapp/content/\n\n\n\u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u767b\u9332\nceres-node-create, ceres-node-write \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n# \u30c4\u30ea\u30fc\u306e\u4f5c\u6210\ncd ~/var/data/storage/ceres/\nceres-tree-create test\n\n# \u30ce\u30fc\u30c9\u306e\u4f5c\u6210\nceres-node-create test/node1 \nceres-node-create test/node2 --step 60  (\u89e3\u50cf\u5ea6\u309260\u79d2\u306b\u8a2d\u5b9a)\n\n# \u30c7\u30fc\u30bf\u306e\u767b\u9332\nceres-node-write test/node1 N:1\nceres-node-write test/node2 N:1\n\uff08N\u3092\u6307\u5b9a\u3059\u308b\u3068\u73fe\u5728\u6642\u523b\u306b\u306a\u308a\u307e\u3059\uff09\n\n# \u30e9\u30f3\u30c0\u30e0\u306b\u3044\u308c\u3066\u307f\u308b\nceres-node-write test/node1 1482304620:$RANDOM\nceres-node-write test/node1 1482304680:$RANDOM\nceres-node-write test/node1 1482304740:$RANDOM\n\n\nGraphite-web\u304b\u3089\u306e\u78ba\u8a8d\n\u3046\u307e\u304f\u30c7\u30fc\u30bf\u304c\u5165\u3063\u3066\u3044\u308c\u3070\u3001\u3053\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3067\u3057\u3087\u3046\u3002\n\n\n\u7dcf\u62ec\nCeres\u306f\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u306e\u6291\u5236\u306b\u306f\u52b9\u679c\u304c\u3042\u308a\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30a2\u30c3\u30d7\u3082\u671f\u5f85\u3067\u304d\u307e\u3059\u304c\u3001\uff08Whisper\u306b\u3082\u3042\u308b\uff09\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u306e\u554f\u984c\u306f\u89e3\u6c7a\u3067\u304d\u307e\u305b\u3093\u3002\u3067\u3059\u304c\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u304c\u591a\u3044\u5834\u5408\u3001\u305d\u308c\u306a\u308a\u306b\u30e1\u30ea\u30c3\u30c8\u306f\u3042\u308b\u3067\u3057\u3087\u3046\u3002\n\u4e00\u3064\u554f\u984c\u306f\u3001\u7d30\u304b\u3044\u30d5\u30a1\u30a4\u30eb\u304c\u5927\u91cf\u306b\u751f\u6210\u3055\u308c\u308b\u305f\u3081\u3001\u30c7\u30a3\u30b9\u30af\u306e\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u306e\u5f71\u97ff\u3092\u3046\u3051\u3066\u3001\u7279\u306b\u5b9f\u30c7\u30fc\u30bf\u304c\u591a\u3044\u5834\u5408\u3001Whisper\u3068\u6bd4\u8f03\u3057\u3066\u4f55\u500d\u3082\u30c7\u30a3\u30b9\u30af\u3092\u6d88\u8cbb\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\nconvert-wsp-to-ceres\u3068\u3044\u3046\u4ed8\u5c5e\u30c4\u30fc\u30eb\u3067\u5909\u63db\u3082\u3067\u304d\u308b\u306e\u3067\u3001\u5b9f\u969b\u306b\u691c\u8a3c\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n#\u306f\u3058\u3081\u306b\n\nGraphite \u306b\u306f\u6a19\u6e96\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u306eWhisper\u304c\u3042\u308a\u307e\u3059\u304c\u3001Ceres\u3068\u3044\u3046\u5225\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002\nWhisper\u306f\u56fa\u5b9a\u9577\u306e\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u307e\u3059\u304c\u3001Ceres\u306f\u30c4\u30ea\u30fc\u578b\u306e\u30c7\u30fc\u30bf\u69cb\u9020\u3068\u306a\u3063\u3066\u304a\u308a\u3001\u5fc5\u8981\u4ee5\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u6301\u305f\u306a\u3044\u306e\u3067\u3001\u30c7\u30a3\u30b9\u30af\u306e\u7bc0\u7d04\u306b\u306a\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n\n# Graphite\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u307e\u305a\u306f\u6700\u65b0\u306eGraphite\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3057\u3087\u3046\u3002CentOS 7\u3092\u60f3\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\n\nroot\u3067\u306e\u4f5c\u696d\uff1a\n\n```\nyum install python-virtualenv\nyum install libffi-devel\n```\n\n\u4e00\u822c\u30e6\u30fc\u30b6\u3067\u306e\u4f5c\u696d\uff1a\n\n```\nvirtualenv env\nsource env/bin/activate\n\npip install cffi\npip install cairocffi\npip install incremental\npip install Django==1.9.12 django-tagging==0.4.3\npip install constantly fadvise gunicorn mocker\npip install pycparser pyparsing==2.0.7 pytz python-memcached\npip install simplejson txAMQP uWSGI whitenoise zope.interface Twisted\n\npip install https://github.com/graphite-project/ceres/tarball/master\npip install https://github.com/graphite-project/whisper/tarball/master\ngit clone https://github.com/graphite-project/graphite-web.git\n\npython setup.py install \n   --install-data=~/var/data/ \\\n   --install-lib=~/usr/graphite/webapp \\\n   --install-scripts=~/usr/graphite/bin\n```\n\n\u521d\u671f\u8a2d\u5b9a\uff1a\n\n```\ncd ~/usr/graphite/webapp/graphite\nmv local_settings.py.example local_settings.py\nvi local_settings.py\n  # GRAPHITE_ROOT\u306e\u4fee\u6b63\uff08~/var/data/\u3092\u30d5\u30eb\u30d1\u30b9\u3067\u6307\u5b9a\uff09\n\n# DB\u306e\u521d\u671f\u5316\nPYTHONPATH=~/usr/graphite/webapp django-admin.py migrate \\\n  --run-syncdb --settings=graphite.settings\n```\n\n\u30b9\u30c8\u30ec\u30fc\u30b8\u30a8\u30f3\u30b8\u30f3\u306e\u5909\u66f4\uff08Whisper->Ceres\uff09\uff1a\n~/usr/graphite/webapp/graphite/settings.py\u3092\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u4fee\u6b63\n\n```\nSTORAGE_FINDERS = (\n    'graphite.finders.ceres.CeresFinder',\n)\n```\n\n# Graphite\u306e\u8d77\u52d5\n\n\n```\nPYTHONPATH=~/usr/graphite/webapp uwsgi --http :8080 \\\n   --wsgi-file ~/usr/graphite/webapp/graphite/wsgi.py \\\n   --static-map=/static=$(pwd)/var/data/webapp/content/\n```\n\n# \u30c6\u30b9\u30c8\u30c7\u30fc\u30bf\u306e\u767b\u9332\n\n`ceres-node-create`, `ceres-node-write` \u306a\u3069\u306e\u30b3\u30de\u30f3\u30c9\u304c\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002\n \n```\n# \u30c4\u30ea\u30fc\u306e\u4f5c\u6210\ncd ~/var/data/storage/ceres/\nceres-tree-create test\n\n# \u30ce\u30fc\u30c9\u306e\u4f5c\u6210\nceres-node-create test/node1 \nceres-node-create test/node2 --step 60  (\u89e3\u50cf\u5ea6\u309260\u79d2\u306b\u8a2d\u5b9a)\n\n# \u30c7\u30fc\u30bf\u306e\u767b\u9332\nceres-node-write test/node1 N:1\nceres-node-write test/node2 N:1\n\uff08N\u3092\u6307\u5b9a\u3059\u308b\u3068\u73fe\u5728\u6642\u523b\u306b\u306a\u308a\u307e\u3059\uff09\n\n# \u30e9\u30f3\u30c0\u30e0\u306b\u3044\u308c\u3066\u307f\u308b\nceres-node-write test/node1 1482304620:$RANDOM\nceres-node-write test/node1 1482304680:$RANDOM\nceres-node-write test/node1 1482304740:$RANDOM\n```\n\n# Graphite-web\u304b\u3089\u306e\u78ba\u8a8d\n\n\u3046\u307e\u304f\u30c7\u30fc\u30bf\u304c\u5165\u3063\u3066\u3044\u308c\u3070\u3001\u3053\u306e\u3088\u3046\u306b\u8868\u793a\u3055\u308c\u308b\u3067\u3057\u3087\u3046\u3002\n\n![graphite.png](https://qiita-image-store.s3.amazonaws.com/0/130972/c7c0c14e-1402-dbd2-021c-d64c4f4ccec0.png)\n\n# \u7dcf\u62ec\n\nCeres\u306f\u30c7\u30fc\u30bf\u30b5\u30a4\u30ba\u306e\u6291\u5236\u306b\u306f\u52b9\u679c\u304c\u3042\u308a\u3001\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30a2\u30c3\u30d7\u3082\u671f\u5f85\u3067\u304d\u307e\u3059\u304c\u3001\uff08Whisper\u306b\u3082\u3042\u308b\uff09\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u306e\u554f\u984c\u306f\u89e3\u6c7a\u3067\u304d\u307e\u305b\u3093\u3002\u3067\u3059\u304c\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u304c\u591a\u3044\u5834\u5408\u3001\u305d\u308c\u306a\u308a\u306b\u30e1\u30ea\u30c3\u30c8\u306f\u3042\u308b\u3067\u3057\u3087\u3046\u3002\n\n\u4e00\u3064\u554f\u984c\u306f\u3001\u7d30\u304b\u3044\u30d5\u30a1\u30a4\u30eb\u304c\u5927\u91cf\u306b\u751f\u6210\u3055\u308c\u308b\u305f\u3081\u3001\u30c7\u30a3\u30b9\u30af\u306e\u30d6\u30ed\u30c3\u30af\u30b5\u30a4\u30ba\u306e\u5f71\u97ff\u3092\u3046\u3051\u3066\u3001\u7279\u306b\u5b9f\u30c7\u30fc\u30bf\u304c\u591a\u3044\u5834\u5408\u3001Whisper\u3068\u6bd4\u8f03\u3057\u3066\u4f55\u500d\u3082\u30c7\u30a3\u30b9\u30af\u3092\u6d88\u8cbb\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\n`convert-wsp-to-ceres`\u3068\u3044\u3046\u4ed8\u5c5e\u30c4\u30fc\u30eb\u3067\u5909\u63db\u3082\u3067\u304d\u308b\u306e\u3067\u3001\u5b9f\u969b\u306b\u691c\u8a3c\u3057\u305f\u307b\u3046\u304c\u3044\u3044\u3067\u3057\u3087\u3046\u3002\n", "tags": ["graphite"]}