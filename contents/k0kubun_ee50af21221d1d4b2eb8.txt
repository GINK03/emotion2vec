{"tags": ["Rails", "Ruby", "Ajax"], "context": " More than 1 year has passed since last update.\n\najax_render gem\nrails\u3067ajax\u5b9f\u88c5\u3059\u308b\u306e\u3061\u3087\u3063\u3068\u3081\u3093\u3069\u304f\u3055\u3044\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067ajax_render\u3068\u3044\u3046gem\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\n\u666e\u901a\u306eajax\u5b9f\u88c5\n# config/routes.rb\nDummy::Application.routes.draw do\n  resource :test, only: [:index] do\n    member do\n      post :ajax\n    end\n  end\nend\n\n# app/controllers/tests_controller.rb\nclass TestsController < ApplicationController\n  def index\n  end\n\n  def ajax\n    @value = params[:id]\n    respond_to do |format|\n      format.js\n    end\n  end\nend\n\n-# app/views/tests/index.html.haml\n.document\n  %p some content\n  .partial\n    Loading ...\n\n-# app/views/tests/ajax.js.haml\n:plain\n  $(\".partial\").html(\n    \"#{escape_javascript(render '/tests/partial', locals: { value: @value })}\"\n  );\n\n-# app/views/tests/_partial.html.haml\npartial content: #{value}\n\n# app/assets/javascripts/test.js.coffee\njQuery ($) ->\n  id = 100\n  $.post('/tests/ajax', {\"id\": id})\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u306d\n\n\u5b9f\u88c5\u3059\u308b\u306e\u304c\u3053\u308c\u3060\u3051\u306a\u3089\u3044\u3044\u3067\u3059\u304c\u3001\u305f\u304f\u3055\u3093ajax\u306a\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u305f\u3044\u5834\u5408\u306f\u7d50\u69cb\u5927\u5909\u3067\u3059\u3002\n\najax_render\u3092\u4f7f\u3046\n\u305d\u3053\u3067\u3001ajax_render gem\u3092\u4f7f\u3063\u3066tests_controller.rb\u3068ajax.js.haml\u306e\u5b9f\u88c5\u3092\u7c21\u7565\u5316\u3057\u307e\u3059\u3002\n# Gemfile\ngem 'ajax_render'\n\n# app/controllers/tests_controller.rb\nclass TestsController < ApplicationController\n  def index\n  end\n\n  def ajax\n    ajax_render '/test/partial', replace: '.partial', locals: { value: params[:id] }\n  end\nend\n\n-# app/views/tests/ajax.js.haml\n-# \u4e0d\u8981\uff01\n\najax_render\u304cajax.js.haml\u307f\u305f\u3044\u306a\u306e\u3092render\u3057\u3066\u304f\u308c\u308b\u306e\u3067ajax.js.haml\u306f\u4e0d\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3067\u5b9f\u88c5\u3059\u308b\u306e\u304c\u697d\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u662f\u975e\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002\n# ajax_render gem\nrails\u3067ajax\u5b9f\u88c5\u3059\u308b\u306e\u3061\u3087\u3063\u3068\u3081\u3093\u3069\u304f\u3055\u3044\u306a\u3068\u601d\u3063\u3066\u3044\u305f\u306e\u3067[ajax_render](https://github.com/tkkbn/ajax_render)\u3068\u3044\u3046gem\u3092\u3064\u304f\u308a\u307e\u3057\u305f\u3002\n\n## \u666e\u901a\u306eajax\u5b9f\u88c5\n```rb\n# config/routes.rb\nDummy::Application.routes.draw do\n  resource :test, only: [:index] do\n    member do\n      post :ajax\n    end\n  end\nend\n```\n\n```rb\n# app/controllers/tests_controller.rb\nclass TestsController < ApplicationController\n  def index\n  end\n\n  def ajax\n    @value = params[:id]\n    respond_to do |format|\n      format.js\n    end\n  end\nend\n```\n\n```haml\n-# app/views/tests/index.html.haml\n.document\n  %p some content\n  .partial\n    Loading ...\n```\n\n```haml\n-# app/views/tests/ajax.js.haml\n:plain\n  $(\".partial\").html(\n    \"#{escape_javascript(render '/tests/partial', locals: { value: @value })}\"\n  );\n```\n\n```haml\n-# app/views/tests/_partial.html.haml\npartial content: #{value}\n```\n\n```coffeescript\n# app/assets/javascripts/test.js.coffee\njQuery ($) ->\n  id = 100\n  $.post('/tests/ajax', {\"id\": id})\n```\n\n\u3053\u3046\u306a\u308a\u307e\u3059\u306d\n![](http://gyazo.com/92981121e81b0119ad200ae960bb04f9.gif)\n\n\u5b9f\u88c5\u3059\u308b\u306e\u304c\u3053\u308c\u3060\u3051\u306a\u3089\u3044\u3044\u3067\u3059\u304c\u3001\u305f\u304f\u3055\u3093ajax\u306a\u51e6\u7406\u3092\u5b9f\u88c5\u3057\u305f\u3044\u5834\u5408\u306f\u7d50\u69cb\u5927\u5909\u3067\u3059\u3002\n\n## ajax_render\u3092\u4f7f\u3046\n\u305d\u3053\u3067\u3001ajax_render gem\u3092\u4f7f\u3063\u3066`tests_controller.rb`\u3068`ajax.js.haml`\u306e\u5b9f\u88c5\u3092\u7c21\u7565\u5316\u3057\u307e\u3059\u3002\n\n```rb\n# Gemfile\ngem 'ajax_render'\n```\n\n```rb\n# app/controllers/tests_controller.rb\nclass TestsController < ApplicationController\n  def index\n  end\n\n  def ajax\n    ajax_render '/test/partial', replace: '.partial', locals: { value: params[:id] }\n  end\nend\n```\n\n```haml\n-# app/views/tests/ajax.js.haml\n-# \u4e0d\u8981\uff01\n```\n\najax_render\u304c`ajax.js.haml`\u307f\u305f\u3044\u306a\u306e\u3092render\u3057\u3066\u304f\u308c\u308b\u306e\u3067`ajax.js.haml`\u306f\u4e0d\u8981\u306b\u306a\u308a\u307e\u3059\u3002\n\u3053\u308c\u3067\u5b9f\u88c5\u3059\u308b\u306e\u304c\u697d\u306b\u306a\u308a\u307e\u3057\u305f\u3002\u662f\u975e\u3054\u6d3b\u7528\u304f\u3060\u3055\u3044\u3002"}