{"context": " More than 1 year has passed since last update.\n\n\u3010 \u30b3\u30fc\u30c9\u5199\u7d4c\u5143 \u30a6\u30a7\u30d6\u30da\u30fc\u30b8 \u3011\n\n\nHatena::Diary \u4e3b\u306b\u8a00\u8a9e\u3068\u30b7\u30b9\u30c6\u30e0\u958b\u767a\u306b\u95a2\u3057\u3066 (2011/02/18) \u300cPREPARE\u6587\u3068\uff0cPL/pgSQL \u306e\u5165\u9580\u3000\u3000\uff08PostgreSQL\u3067\u300c\u52d5\u7684\u306b\u300dSQL\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\uff0c\u30d7\u30ea\u30da\u30a2\u30c9\u30fb\u30af\u30a8\u30ea\u3084\u30b9\u30c8\u30a2\u30c9\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3057\u3088\u3046\uff09\u300d\n\n\n\n\u3010 \u5199\u7d4c\u3057\u305f pl/pgsql \u30b3\u30fc\u30c9 \u3011\n\n\npl/pgsql\nCREATE OR REPLACE FUNCTION func_hoge( arg_num int ) RETURNS int\nAS $$\n  DECLARE\n    temp_num int;\n  BEGIN\n    -- \u5f15\u6570\u306b\uff11\u3092\u8db3\u3057\u3066\u8fd4\u5374\u3059\u308b\n    temp_num = arg_num + 1;\n    RETURN temp_num;\n  END;\n$$ LANGUAGE plpgsql\n;\n\n\n\n\npostgresql\nSELECT func_hoge( 1 ); -- 2\u304c\u8fd4\u308b\nSELECT func_hoge( 2 ); -- 3\u304c\u8fd4\u308b\n\n\n\n\n\n\u4f5c\u3063\u305f\u95a2\u6570\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\n-- prosrc\u30ab\u30e9\u30e0\u306e\u4e2d\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\n\n\npostgresql\nSELECT\n  *\nFROM\n  pg_proc\nWHERE\n  proname = 'func_hoge'\n;\n\n\n\n\n\n#### __\u3010 \u30b3\u30fc\u30c9\u5199\u7d4c\u5143 \u30a6\u30a7\u30d6\u30da\u30fc\u30b8 \u3011__\n\n* [Hatena::Diary \u4e3b\u306b\u8a00\u8a9e\u3068\u30b7\u30b9\u30c6\u30e0\u958b\u767a\u306b\u95a2\u3057\u3066 (2011/02/18) \u300cPREPARE\u6587\u3068\uff0cPL/pgSQL \u306e\u5165\u9580\u3000\u3000\uff08PostgreSQL\u3067\u300c\u52d5\u7684\u306b\u300dSQL\u3092\u5b9f\u884c\u3059\u308b\u305f\u3081\u306b\uff0c\u30d7\u30ea\u30da\u30a2\u30c9\u30fb\u30af\u30a8\u30ea\u3084\u30b9\u30c8\u30a2\u30c9\u30d5\u30a1\u30f3\u30af\u30b7\u30e7\u30f3\u3092\u5b9a\u7fa9\u3057\u3088\u3046\uff09\u300d](http://d.hatena.ne.jp/language_and_engineering/20110218/p1)\n\n___\n\n#### __\u3010 \u5199\u7d4c\u3057\u305f pl/pgsql \u30b3\u30fc\u30c9 \u3011__\n\n```{sql:pl/pgsql}\nCREATE OR REPLACE FUNCTION func_hoge( arg_num int ) RETURNS int\nAS $$\n  DECLARE\n    temp_num int;\n  BEGIN\n    -- \u5f15\u6570\u306b\uff11\u3092\u8db3\u3057\u3066\u8fd4\u5374\u3059\u308b\n    temp_num = arg_num + 1;\n    RETURN temp_num;\n  END;\n$$ LANGUAGE plpgsql\n;\n```\n\n![1.PNG](https://qiita-image-store.s3.amazonaws.com/0/43487/1e16f434-4aa2-d271-50a1-472fd2a8b5b5.png)\n\n\n```{sql:postgresql}\nSELECT func_hoge( 1 ); -- 2\u304c\u8fd4\u308b\nSELECT func_hoge( 2 ); -- 3\u304c\u8fd4\u308b\n```\n\n![2.PNG](https://qiita-image-store.s3.amazonaws.com/0/43487/4757c696-d416-275b-879e-42e57e8c2af1.png)\n\n___\n\n> \u4f5c\u3063\u305f\u95a2\u6570\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u78ba\u8a8d\n> -- prosrc\u30ab\u30e9\u30e0\u306e\u4e2d\u306b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u304c\u8868\u793a\u3055\u308c\u308b\n\n```{sql:postgresql}\nSELECT\n  *\nFROM\n  pg_proc\nWHERE\n  proname = 'func_hoge'\n;\n```\n\n![3.PNG](https://qiita-image-store.s3.amazonaws.com/0/43487/a5da5d6b-8666-5d7b-94a1-72686f9d1ea3.png)\n\n\n![4.PNG](https://qiita-image-store.s3.amazonaws.com/0/43487/e83d96ab-424a-5ee0-7ead-df1fb14efa67.png)\n\n\n\n\n", "tags": ["PostgreSQL", "PLpgSQL", "\u5165\u9580", "\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9", "plsql"]}