{"tags": ["webpack", "riot.js"], "context": "\u89e3\u6c7a\u3057\u305f\u3088\u3002\u305d\u308c\u306b\u3057\u3066\u3082\u3001loader\u3063\u3066\u3001\u3044\u304f\u3064\u3042\u308b\u3093\u3060\uff1f\uff1f\uff1f\n\n\u56f0\u3063\u305f\u3068\u304d\u306b\u306f\u3001custom-loader!\u3042\u3068webpack-stringify-loaders!\n\u3063\u3066\u3001\u307b\u307c\u9ed2\u9b54\u6cd5\u3060\u3051\u3069\u3002\n\ninstall\nnpm install --save-dev custom-loader\n\n\n\nwebpack.config.js(before)\nconst stringify = require('webpack-stringify-loaders');\n\nmodule.exports = {\n  module: {\n    loaders: [{\n      test: /\\.tag\\.pug$/,\n      exclude: /node_modules/,\n      loader: stringify([{\n        loader: 'riotjs',\n      }, {\n        loader: 'pug-html',\n        query: {\n          pretty: true,\n          exports: false,\n          plugins: ['pug-plugin-no-yield'],\n        },\n      }]),\n    }, {\n\n\n\nwebpack.config.js(before)\nconst stringify = require('webpack-stringify-loaders');\n\nmodule.exports = {\n  module: {\n    loaders: [{\n      test: /\\.tag\\.pug$/,\n      exclude: /node_modules/,\n      loader: stringify([{\n        loader: 'riotjs',\n      }, {\n        loader: 'pug-html',\n        query: {\n          pretty: true,\n          exports: false,\n          plugins: ['pug-plugin-no-yield'],\n        },\n      }]),\n    }, {\n\n\n\nwebpack.config.js(after)\nconst customLoader = require('custom-loader');\nconst riot = require('riot-compiler');\nconst utils = require('loader-utils');\n\n// customLoder.loaders\u306b\u81ea\u5206\u7528\u306eloader(riot)\u3092\u3076\u3089\u4e0b\u3052\u308b\u3002\n// query.name='riot'\u3068\u304b\u3059\u308b\u3068\u81ea\u5206\u306e\u304c\u547c\u3079\u308b\u3002\ncustomLoader.loaders.riot = function(source) {\n  const query = utils.parseQuery(this.query);\n  return riot.compile(source, query.options || {});\n};\n\nmodule.exports = {\n  module: {\n    loaders: [{\n      test: /\\.tag\\.pug$/,\n      exclude: /node_modules/,\n      loader: stringify([{\n        loader: 'custom',   // custom-loader\u306b\u8ffd\u52a0\u3057\u305f\u3001\n        query: {\n          name: 'riot',     // riot\u304c\u547c\u3076\u3002\n        },\n      }, {\n        loader: 'pug-html',\n        query: {\n          pretty: true,\n          exports: false,\n          plugins: ['pug-plugin-no-yield'],\n        },\n      }]),\n    }, {\n\n\n\n\u304a\u307e\u3051\uff1aloader\u306e\u60c5\u5831\u3092dump\u3059\u308bloader\ncustomLoader.loaders.dummy = function(source) {\n  \"version,context,request,query,data,cacheable,loaders,loaderIndex,resource,resourcePath,resourceQuery,value,inputValue,options,debug,minimize,sourceMap,target,webpack\".split(\",\").forEach((name) => {\n    console.log(name, this[name]);\n  });\n  \"ext,name,path,folder\".split(\",\").forEach((name) => {\n    var value = utils.interpolateName(this, `[${name}]`, {context: this.options.context});\n    console.log(name, value);\n  });\n  return source;\n};\n\n\u3053\u306e\u3042\u305f\u308a\u306e\u30d1\u30b9\u540d\u3092\u7d44\u307f\u7acb\u3066\u3066\u3001\u3054\u306b\u3087\u3054\u306b\u3087\u3059\u308c\u3070\u3001tee\u3063\u307d\u304f\u3001\u4e2d\u9593\u306e\u5185\u5bb9\u3092\u66f8\u304d\u51fa\u3057\u3066\u304a\u304f\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\uff03\u30c7\u30d0\u30c3\u30b0\u306e\u6642\u3057\u304b\u4f7f\u308f\u306a\u3044\u3051\u3069\u306d......\n\u89e3\u6c7a\u3057\u305f\u3088\u3002\u305d\u308c\u306b\u3057\u3066\u3082\u3001loader\u3063\u3066\u3001\u3044\u304f\u3064\u3042\u308b\u3093\u3060\uff1f\uff1f\uff1f\n\n# \u56f0\u3063\u305f\u3068\u304d\u306b\u306f\u3001custom-loader!\u3042\u3068webpack-stringify-loaders!\n\n\u3063\u3066\u3001\u307b\u307c\u9ed2\u9b54\u6cd5\u3060\u3051\u3069\u3002\n\n```shell-session:install \nnpm install --save-dev custom-loader\n```\n\n```js:webpack.config.js(before)\nconst stringify = require('webpack-stringify-loaders');\n\nmodule.exports = {\n  module: {\n    loaders: [{\n      test: /\\.tag\\.pug$/,\n      exclude: /node_modules/,\n      loader: stringify([{\n        loader: 'riotjs',\n      }, {\n        loader: 'pug-html',\n        query: {\n          pretty: true,\n          exports: false,\n          plugins: ['pug-plugin-no-yield'],\n        },\n      }]),\n    }, {\n```\n\n```js:webpack.config.js(before)\nconst stringify = require('webpack-stringify-loaders');\n\nmodule.exports = {\n  module: {\n    loaders: [{\n      test: /\\.tag\\.pug$/,\n      exclude: /node_modules/,\n      loader: stringify([{\n        loader: 'riotjs',\n      }, {\n        loader: 'pug-html',\n        query: {\n          pretty: true,\n          exports: false,\n          plugins: ['pug-plugin-no-yield'],\n        },\n      }]),\n    }, {\n```\n\n```js:webpack.config.js(after)\nconst customLoader = require('custom-loader');\nconst riot = require('riot-compiler');\nconst utils = require('loader-utils');\n\n// customLoder.loaders\u306b\u81ea\u5206\u7528\u306eloader(riot)\u3092\u3076\u3089\u4e0b\u3052\u308b\u3002\n// query.name='riot'\u3068\u304b\u3059\u308b\u3068\u81ea\u5206\u306e\u304c\u547c\u3079\u308b\u3002\ncustomLoader.loaders.riot = function(source) {\n  const query = utils.parseQuery(this.query);\n  return riot.compile(source, query.options || {});\n};\n\nmodule.exports = {\n  module: {\n    loaders: [{\n      test: /\\.tag\\.pug$/,\n      exclude: /node_modules/,\n      loader: stringify([{\n        loader: 'custom',   // custom-loader\u306b\u8ffd\u52a0\u3057\u305f\u3001\n        query: {\n          name: 'riot',     // riot\u304c\u547c\u3076\u3002\n        },\n      }, {\n        loader: 'pug-html',\n        query: {\n          pretty: true,\n          exports: false,\n          plugins: ['pug-plugin-no-yield'],\n        },\n      }]),\n    }, {\n```\n\n## \u304a\u307e\u3051\uff1aloader\u306e\u60c5\u5831\u3092dump\u3059\u308bloader\n\n```\ncustomLoader.loaders.dummy = function(source) {\n  \"version,context,request,query,data,cacheable,loaders,loaderIndex,resource,resourcePath,resourceQuery,value,inputValue,options,debug,minimize,sourceMap,target,webpack\".split(\",\").forEach((name) => {\n    console.log(name, this[name]);\n  });\n  \"ext,name,path,folder\".split(\",\").forEach((name) => {\n    var value = utils.interpolateName(this, `[${name}]`, {context: this.options.context});\n    console.log(name, value);\n  });\n  return source;\n};\n```\n\n\u3053\u306e\u3042\u305f\u308a\u306e\u30d1\u30b9\u540d\u3092\u7d44\u307f\u7acb\u3066\u3066\u3001\u3054\u306b\u3087\u3054\u306b\u3087\u3059\u308c\u3070\u3001tee\u3063\u307d\u304f\u3001\u4e2d\u9593\u306e\u5185\u5bb9\u3092\u66f8\u304d\u51fa\u3057\u3066\u304a\u304f\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\uff03\u30c7\u30d0\u30c3\u30b0\u306e\u6642\u3057\u304b\u4f7f\u308f\u306a\u3044\u3051\u3069\u306d......\n"}