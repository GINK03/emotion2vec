{"context": "\n\n\u300cbash\u3060\u3051\u3067\u52d5\u304b\u306a\u3044\u8a18\u8ff0\u300d\u304c\u7d50\u69cb\u3042\u308b\n\u4ed6\u306e\u30b7\u30a7\u30eb\u3060\u3068\u554f\u984c\u7121\u304f\u52d5\u304f\u306e\u306b\u3001bash\u306b\u6301\u3063\u3066\u304d\u305f\u3089\u52d5\u304b\u306a\u304f\u306a\u308b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u3063\u3066\u3053\u308c\u307e\u3067\u4f55\u5ea6\u304b\u60a9\u307e\u3055\u308c\u3066\u304d\u305f\u306e\u3067\u3001\u305d\u308d\u305d\u308d\u3053\u3053\u3089\u3067\u307e\u3068\u3081\u308b\u3053\u3068\u306b\u3057\u305f\u3002\nbash\u306e\u30d0\u30b0\u306a\u306e\u304b\u4ed5\u69d8\u306a\u306e\u304b\u5b9a\u304b\u3067\u306f\u306a\u3044\u304c\u3001\u3069\u3061\u3089\u306b\u305b\u3088\u3001\u3069\u306e\u74b0\u5883\u3067\u3082\u52d5\u304f\u7a76\u6975\u306e\u30dd\u30fc\u30bf\u30d3\u30ea\u30c6\u30a3\u30fc\u3092\u76ee\u6307\u3059\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u3059\u306a\u308f\u3061POSIX\u539f\u7406\u4e3b\u7fa9\u3092\u5b9f\u8df5\u3059\u308b\u3046\u3048\u3067\u306f\u3053\u306e\u77e5\u8b58\u306f\u907f\u3051\u3066\u306f\u901a\u308c\u306a\u3044\u3060\u308d\u3046\u3002\n\n$(\u301c)\u306e\u4e2d\u306e$$\u3068'\u301c'\n\n$ echo $(echo $$'')   # PID\u304c\u51fa\u306a\u3044\uff01\n                      #\n$ \n\n\n\u5bfe\u7b56\n$$\u3092\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u56f2\u3093\u3060\u308a\u3001$()\u306e\u4e2d\u3067\u4f7f\u308f\u306a\u304b\u3063\u305f\u308a\u3001\u76f4\u5f8c\u306b\u30b7\u30f3\u30b0\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u66f8\u304b\u306a\u3051\u308c\u3070\u3088\u3044\u3002\u9006\u306b\u305d\u308c\u3089\u306e\u6761\u4ef6\u304c\u3059\u3079\u3066\u91cd\u306a\u308b\u3068\u8d77\u3053\u308b\u3088\u3046\u3060\u3002\n$ echo $$''           # $()\u306e\u5916\u306a\u3089\u51fa\u308b\n12345                 # \n$ echo $(echo \"$$''\") # \u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u56f2\u3048\u3070\u51fa\u308b\n12345                 #\n$ echo $(echo $$)     # \u76f4\u5f8c\u306b'\u301c'\u304c\u306a\u304f\u3066\u3082\u51fa\u308b\n12345                 #\n$ \n\n\n\u5099\u8003\n\u3061\u306a\u307f\u306b$?\u7b49\u306e\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u5909\u6570\u3067\u306f\u8d77\u3053\u3089\u306a\u3044\u3002\n$ echo $(echo $?'')\n0\n$ \n\n\n$(\u301c)\u306e\u4e2d\u3067case\u6587\u304c\u4f7f\u3048\u306a\u3044\uff08ver.3\u307e\u3067\uff09\n\n$ echo $(case 1 in 1) echo OK;; esac)\n-bash: syntax error near unexpected token `;;'\n$ \n\n\u3053\u308c\u306f\u3069\u3046\u3084\u3089case\u6587\u306b\u304a\u3051\u308b\u30d1\u30bf\u30fc\u30f3\u6307\u5b9a\u306b\u4f7f\u3046)\u3092\u3001$(\u301c)\u306e\u9589\u3058\u62ec\u5f27\u3068\u8aa4\u8a8d\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u539f\u56e0\u306e\u3088\u3046\u3060\u3002\u3053\u306e\u554f\u984c\u306f\u30d0\u30fc\u30b8\u30e7\u30f34\u4ee5\u964d\u306ebash\u3067\u306f\u89e3\u6d88\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u3002\n\n\u5bfe\u7b56\n$(\u301c)\u306e\u4ee3\u308f\u308a\u306b\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u3092\u4f7f\u3048\u3070\u3088\u3044\u3002\n$ echo `case 1 in 1) echo OK;; esac`\nOK\n$ \n\n\nif\u3084case\u69cb\u6587\u306b\u304a\u3051\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u30b3\u30e1\u30f3\u30c8\u3060\u3051\u3067\u306f\u6e08\u307e\u3055\u308c\u306a\u3044\n\nif\u3084case\u69cb\u6587\u3067\u3001\u3042\u308b\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u305f\u6642\u306b\u5b9f\u884c\u3055\u305b\u305f\u3044\u52d5\u4f5c\u3092\u8a18\u8ff0\u3059\u308b\u5834\u6240\u306b\u3001\u4f55\u3082\u30b3\u30de\u30f3\u30c9\u304c\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\u30b3\u30e1\u30f3\u30c8\u3060\u3051\u66f8\u3044\u3066\u3082\u30c0\u30e1\u3002\n$ if true; then\n>   # \u4f55\u3082\u3057\u306a\u3044\n> fi\n-bash: syntax error near unexpected token `fi'\n$ \n\n\n\u5bfe\u7b56\n\u6700\u3082\u5dee\u3057\u969c\u308a\u306e\u7121\u3044\u30cc\u30eb\u30b3\u30de\u30f3\u30c9:\u3092\u66f8\u3051\u3070\u3088\u3044\u3002\n$ if true; then\n>   # \u4f55\u3082\u3057\u306a\u3044\n>   :\n> fi\n$ \n\n\n\u672a\u5b9a\u7fa9\u5909\u6570\u53c2\u7167\u304c\u898b\u9003\u3055\u308c\u308b\n\u8d77\u52d5\u6642\u306b-u\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u305f\u308a\u8d77\u52d5\u5f8c\u306bset -u\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u672a\u5b9a\u7fa9\u306a\u30b7\u30a7\u30eb\u5909\u6570\u3092\u53c2\u7167\u3057\u305f\u6642\u306b\u30a8\u30e9\u30fc\u6271\u3044\u306b\u3057\u3066\u304f\u308c\u308b\u3002\u2026\u2026\u306f\u305a\u306a\u306e\u3060\u304c\u3001${filepath%/*}\u306e\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u5c55\u958b\u306b\u3088\u308a\u9593\u63a5\u7684\u306a\u53c2\u7167\u3092\u3057\u305f\u6642\u306f\u898b\u9003\u3057\u3066\u3057\u307e\u3046\u3002\n$ set -u\n$ echo $filepath\n-bash: filepath: unbound variable\n$ echo ${filepath%/*}\n\n$ \n\n\u3082\u3061\u308d\u3093${filepath:-/DEFAULTPATH}\u306a\u3069\u3068\u3057\u3066\u3001\u300c\u30b7\u30a7\u30eb\u5909\u6570$filepath\u304c\u672a\u5b9a\u7fa9\u3060\u3063\u305f\u3089\u201c/DEFAULTPATH\u201d\u3092\u8fd4\u3059\u300d\u3068\u3044\u3046\u3053\u3068\u304c\u3057\u305f\u3044\u5834\u5408\u306f\u30a8\u30e9\u30fc\u6271\u3044\u3057\u306a\u304f\u3066\u3088\u3044\u3057\u3001\u5b9f\u969b\u3001\u4ed6\u306e\u30b7\u30a7\u30eb\u3067\u3082\u305d\u3046\u306a\u3063\u3066\u3044\u308b\u306e\u3060\u304c\u3001POSIX\u6587\u66f8\u306b\u8f09\u3063\u3066\u3044\u308b-u\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u539f\u7fa9\u3092\u6c72\u307f\u53d6\u308b\u306a\u3089\u3001\u4eca\u4f8b\u793a\u3057\u305f\u3088\u3046\u306a\u4f8b\u5916\u3092\u9664\u3044\u3066\u539f\u5247\u7684\u306b\u30a8\u30e9\u30fc\u6271\u3044\u3059\u3079\u304d\u3060\u3002\n\u305f\u3060\u3001\u3053\u306e\u554f\u984c\u306b\u95a2\u3057\u3066\u306f\u300cbash\u306e\u307f\u300d\u3067\u306f\u306a\u304f\u3001\u5c11\u306a\u304f\u3068\u3082zsh\u3001ksh\u3067\u3082\u8d77\u3053\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3002\n# \u300cbash\u3060\u3051\u3067\u52d5\u304b\u306a\u3044\u8a18\u8ff0\u300d\u304c\u7d50\u69cb\u3042\u308b\n\n\u4ed6\u306e\u30b7\u30a7\u30eb\u3060\u3068\u554f\u984c\u7121\u304f\u52d5\u304f\u306e\u306b\u3001bash\u306b\u6301\u3063\u3066\u304d\u305f\u3089\u52d5\u304b\u306a\u304f\u306a\u308b\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u3042\u3063\u3066\u3053\u308c\u307e\u3067\u4f55\u5ea6\u304b\u60a9\u307e\u3055\u308c\u3066\u304d\u305f\u306e\u3067\u3001\u305d\u308d\u305d\u308d\u3053\u3053\u3089\u3067\u307e\u3068\u3081\u308b\u3053\u3068\u306b\u3057\u305f\u3002\n\nbash\u306e\u30d0\u30b0\u306a\u306e\u304b\u4ed5\u69d8\u306a\u306e\u304b\u5b9a\u304b\u3067\u306f\u306a\u3044\u304c\u3001\u3069\u3061\u3089\u306b\u305b\u3088\u3001\u3069\u306e\u74b0\u5883\u3067\u3082\u52d5\u304f\u7a76\u6975\u306e\u30dd\u30fc\u30bf\u30d3\u30ea\u30c6\u30a3\u30fc\u3092\u76ee\u6307\u3059\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3001\u3059\u306a\u308f\u3061POSIX\u539f\u7406\u4e3b\u7fa9\u3092\u5b9f\u8df5\u3059\u308b\u3046\u3048\u3067\u306f\u3053\u306e\u77e5\u8b58\u306f\u907f\u3051\u3066\u306f\u901a\u308c\u306a\u3044\u3060\u308d\u3046\u3002\n\n# `$(\u301c)`\u306e\u4e2d\u306e`$$`\u3068`'\u301c'`\n\n```bash:\n$ echo $(echo $$'')   # PID\u304c\u51fa\u306a\u3044\uff01\n                      #\n$ \n```\n\n## \u5bfe\u7b56\n\n`$$`\u3092\u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u56f2\u3093\u3060\u308a\u3001$()\u306e\u4e2d\u3067\u4f7f\u308f\u306a\u304b\u3063\u305f\u308a\u3001\u76f4\u5f8c\u306b\u30b7\u30f3\u30b0\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3092\u66f8\u304b\u306a\u3051\u308c\u3070\u3088\u3044\u3002\u9006\u306b\u305d\u308c\u3089\u306e\u6761\u4ef6\u304c\u3059\u3079\u3066\u91cd\u306a\u308b\u3068\u8d77\u3053\u308b\u3088\u3046\u3060\u3002\n\n```bash:\n$ echo $$''           # $()\u306e\u5916\u306a\u3089\u51fa\u308b\n12345                 # \n$ echo $(echo \"$$''\") # \u30c0\u30d6\u30eb\u30af\u30a9\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u3067\u56f2\u3048\u3070\u51fa\u308b\n12345                 #\n$ echo $(echo $$)     # \u76f4\u5f8c\u306b'\u301c'\u304c\u306a\u304f\u3066\u3082\u51fa\u308b\n12345                 #\n$ \n```\n\n## \u5099\u8003\n\n\u3061\u306a\u307f\u306b`$?`\u7b49\u306e\u4ed6\u306e\u30b7\u30b9\u30c6\u30e0\u5909\u6570\u3067\u306f\u8d77\u3053\u3089\u306a\u3044\u3002\n\n```bash:\n$ echo $(echo $?'')\n0\n$ \n```\n\n# [`$(\u301c)`\u306e\u4e2d\u3067case\u6587\u304c\u4f7f\u3048\u306a\u3044\uff08ver.3\u307e\u3067\uff09](http://qiita.com/richmikan@github/items/8eebbacc73f80c18a728)\n\n```bash:\n$ echo $(case 1 in 1) echo OK;; esac)\n-bash: syntax error near unexpected token `;;'\n$ \n```\n\n\u3053\u308c\u306f\u3069\u3046\u3084\u3089case\u6587\u306b\u304a\u3051\u308b\u30d1\u30bf\u30fc\u30f3\u6307\u5b9a\u306b\u4f7f\u3046`)`\u3092\u3001`$(\u301c)`\u306e\u9589\u3058\u62ec\u5f27\u3068\u8aa4\u8a8d\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u539f\u56e0\u306e\u3088\u3046\u3060\u3002\u3053\u306e\u554f\u984c\u306f\u30d0\u30fc\u30b8\u30e7\u30f34\u4ee5\u964d\u306ebash\u3067\u306f\u89e3\u6d88\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3060\u3002\n\n## \u5bfe\u7b56\n\n`$(\u301c)`\u306e\u4ee3\u308f\u308a\u306b\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u3092\u4f7f\u3048\u3070\u3088\u3044\u3002\n\n```bash:\n$ echo `case 1 in 1) echo OK;; esac`\nOK\n$ \n```\n\n# [if\u3084case\u69cb\u6587\u306b\u304a\u3051\u308b\u30a2\u30af\u30b7\u30e7\u30f3\u304c\u30b3\u30e1\u30f3\u30c8\u3060\u3051\u3067\u306f\u6e08\u307e\u3055\u308c\u306a\u3044](http://qiita.com/richmikan@github/items/eefbaed716e5ed198973)\n\nif\u3084case\u69cb\u6587\u3067\u3001\u3042\u308b\u6761\u4ef6\u304c\u6e80\u305f\u3055\u308c\u305f\u6642\u306b\u5b9f\u884c\u3055\u305b\u305f\u3044\u52d5\u4f5c\u3092\u8a18\u8ff0\u3059\u308b\u5834\u6240\u306b\u3001\u4f55\u3082\u30b3\u30de\u30f3\u30c9\u304c\u66f8\u304b\u308c\u3066\u3044\u306a\u3044\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u3002\u30b3\u30e1\u30f3\u30c8\u3060\u3051\u66f8\u3044\u3066\u3082\u30c0\u30e1\u3002\n\n```bash:\n$ if true; then\n>   # \u4f55\u3082\u3057\u306a\u3044\n> fi\n-bash: syntax error near unexpected token `fi'\n$ \n```\n\n## \u5bfe\u7b56\n\n\u6700\u3082\u5dee\u3057\u969c\u308a\u306e\u7121\u3044\u30cc\u30eb\u30b3\u30de\u30f3\u30c9`:`\u3092\u66f8\u3051\u3070\u3088\u3044\u3002\n\n```bash:\n$ if true; then\n>   # \u4f55\u3082\u3057\u306a\u3044\n>   :\n> fi\n$ \n```\n\n# \u672a\u5b9a\u7fa9\u5909\u6570\u53c2\u7167\u304c\u898b\u9003\u3055\u308c\u308b\n\n\u8d77\u52d5\u6642\u306b`-u`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u3064\u3051\u305f\u308a\u8d77\u52d5\u5f8c\u306b`set -u`\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001\u672a\u5b9a\u7fa9\u306a\u30b7\u30a7\u30eb\u5909\u6570\u3092\u53c2\u7167\u3057\u305f\u6642\u306b\u30a8\u30e9\u30fc\u6271\u3044\u306b\u3057\u3066\u304f\u308c\u308b\u3002\u2026\u2026\u306f\u305a\u306a\u306e\u3060\u304c\u3001`${filepath%/*}`\u306e\u3088\u3046\u306b\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u5c55\u958b\u306b\u3088\u308a\u9593\u63a5\u7684\u306a\u53c2\u7167\u3092\u3057\u305f\u6642\u306f\u898b\u9003\u3057\u3066\u3057\u307e\u3046\u3002\n\n```bash:\n$ set -u\n$ echo $filepath\n-bash: filepath: unbound variable\n$ echo ${filepath%/*}\n\n$ \n```\n\n\u3082\u3061\u308d\u3093`${filepath:-/DEFAULTPATH}`\u306a\u3069\u3068\u3057\u3066\u3001\u300c\u30b7\u30a7\u30eb\u5909\u6570`$filepath`\u304c\u672a\u5b9a\u7fa9\u3060\u3063\u305f\u3089\u201c/DEFAULTPATH\u201d\u3092\u8fd4\u3059\u300d\u3068\u3044\u3046\u3053\u3068\u304c\u3057\u305f\u3044\u5834\u5408\u306f\u30a8\u30e9\u30fc\u6271\u3044\u3057\u306a\u304f\u3066\u3088\u3044\u3057\u3001\u5b9f\u969b\u3001\u4ed6\u306e\u30b7\u30a7\u30eb\u3067\u3082\u305d\u3046\u306a\u3063\u3066\u3044\u308b\u306e\u3060\u304c\u3001[POSIX\u6587\u66f8\u306b\u8f09\u3063\u3066\u3044\u308b-u\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u539f\u7fa9](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_25_03)\u3092\u6c72\u307f\u53d6\u308b\u306a\u3089\u3001\u4eca\u4f8b\u793a\u3057\u305f\u3088\u3046\u306a\u4f8b\u5916\u3092\u9664\u3044\u3066\u539f\u5247\u7684\u306b\u30a8\u30e9\u30fc\u6271\u3044\u3059\u3079\u304d\u3060\u3002\n\n\u305f\u3060\u3001\u3053\u306e\u554f\u984c\u306b\u95a2\u3057\u3066\u306f\u300cbash\u306e\u307f\u300d\u3067\u306f\u306a\u304f\u3001\u5c11\u306a\u304f\u3068\u3082zsh\u3001ksh\u3067\u3082\u8d77\u3053\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3057\u305f\u3002\n", "tags": ["Bash", "POSIX", "shell", "ShellScript"]}