{"context": "Nginx\u3092\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u65b9\u6cd5\u3068\u500b\u4eba\u7528\u30e1\u30e2\n\n\u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\nNginx\u3092\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001/etc/nginx/conf.d \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308c\u3070\u3088\u3044\n\u30d5\u30a1\u30a4\u30eb\u540d\u306f {ConfigName}.conf\n\u4eca\u56de\u306f server.conf \u3068\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u305f\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b server.conf \u3092\u7528\u610f\u3057\u3066 Nginx \u3092\u518d\u8d77\u52d5\u3059\u308b\n\nserver.conf\nserver{\n    server_name    example.com;\n\n    proxy_set_header    Host    $host;\n    proxy_set_header    X-Real-IP    $remote_addr;\n    proxy_set_header    X-Forwarded-Host       $host;\n    proxy_set_header    X-Forwarded-Server    $host;\n    proxy_set_header    X-Forwarded-For    $proxy_add_x_forwarded_for;\n\n    location /example/ {\n        proxy_pass    http://localhost:8080/app/;\n    }\n\n    location /example2/ {\n        proxy_pass    http://example2.com/example/;\n    }\n}\n\n\nproxy_set_header \u306e\u8a18\u8ff0\u306b\u3088\u308a\u3001\u8ee2\u9001\u5148\u306b\u30a2\u30af\u30bb\u30b9\u5143\u306eIP\u3084\u30db\u30b9\u30c8\u60c5\u5831\u3092\u901a\u77e5\u3059\u308b\nlocation \u306f\u8907\u6570\u8a18\u8ff0\u53ef\u80fd\n\u30af\u30c3\u30ad\u30fc\u306e\u66f8\u304d\u63db\u3048\u3082\u53ef\u80fd\u3067\u3001\u66f8\u304d\u65b9\u306f proxy_cookie_path /abc/ /edf/; \u306e\u3088\u3046\u306b\u306a\u308b\n\nrewrite\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\nrewrite\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067 apache \u306e mod_rewrite\u3068\u540c\u69d8\u306e\u3053\u3068\u304c\u3067\u304d\u308b\n\u66f8\u304d\u65b9\u306f rewrite regexp replacement option \u3068\u306a\u3063\u3066\u3044\u308b\n\u5177\u4f53\u4f8b\u306f\u4ee5\u4e0b\nrewrite /reg/(.*) /replace/$1 last;\n\noption \u306b\u306f\u4ee5\u4e0b\u306e\u3069\u308c\u304b\u3092\u6307\u5b9a\u53ef\u80fd\n\n\n\n\u30aa\u30d7\u30b7\u30e7\u30f3\n\u8aac\u660e\n\n\n\n\nlast\nrewrite\u30eb\u30fc\u30eb\u304c\u9069\u7528\u3055\u308c\u308b\u3068URL\u3092\u4e0a\u66f8\u304d\u3057\u3066\u51e6\u7406\u3092\u7d42\u4e86\n\n\nbreak\nURL\u3092\u4e0a\u66f8\u304d\u3057\u3066\u51e6\u7406\u3092\u7d9a\u884c\n\n\nredirect\nHTTP 302 temporary redirect \u3092\u8fd4\u3059\n\n\npermanent\nHTTP 301 redirect \u3092\u8fd4\u3059\n\n\n\n\n\u53c2\u8003\u30b5\u30a4\u30c8\n\nNginx\u3067\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\u3059\u308b http://9ensan.com/blog/server/sakura-vps-nginx-reverse-proxy/\n\nNginx\u306erewrite\u6a5f\u80fd\u3067URL\u306e\u66f8\u304d\u63db\u3048\u3092\u3057\u3066\u307f\u308b http://komeiy.hatenablog.com/entry/2014/12/10/231714\n\nnginx\u3068Tomcat\u306e\u9023\u643a http://sekai.hatenablog.jp/entry/2013/02/13/185900\n\nnginx \u3068 Tomcat \u306e\u9023\u643a http://fujishinko.exblog.jp/8362059/\n\nWeb\u958b\u767a/\u672c\u756a\u74b0\u5883\u69cb\u7bc9\u306b\u3064\u3044\u3066\u307e\u308b\u3063\u3068\u307e\u3068\u3081\u308bWIKI http://sakudevel.wiki.fc2.com/wiki/Nginx\n\n\nNginx\u3092\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u306e\u65b9\u6cd5\u3068\u500b\u4eba\u7528\u30e1\u30e2\n\n## \u30d7\u30ed\u30ad\u30b7\u8a2d\u5b9a\n\nNginx\u3092\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u305f\u3081\u306b\u306f\u3001/etc/nginx/conf.d \u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3059\u308c\u3070\u3088\u3044\n\u30d5\u30a1\u30a4\u30eb\u540d\u306f {ConfigName}.conf\n\u4eca\u56de\u306f server.conf \u3068\u3057\u3066\u30d5\u30a1\u30a4\u30eb\u3092\u914d\u7f6e\u3057\u305f\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b server.conf \u3092\u7528\u610f\u3057\u3066 Nginx \u3092\u518d\u8d77\u52d5\u3059\u308b\n\n```server.conf\nserver{\n    server_name    example.com;\n\n    proxy_set_header    Host    $host;\n    proxy_set_header    X-Real-IP    $remote_addr;\n    proxy_set_header    X-Forwarded-Host       $host;\n    proxy_set_header    X-Forwarded-Server    $host;\n    proxy_set_header    X-Forwarded-For    $proxy_add_x_forwarded_for;\n\n    location /example/ {\n        proxy_pass    http://localhost:8080/app/;\n    }\n\n    location /example2/ {\n        proxy_pass    http://example2.com/example/;\n    }\n}\n```\n\nproxy_set_header \u306e\u8a18\u8ff0\u306b\u3088\u308a\u3001\u8ee2\u9001\u5148\u306b\u30a2\u30af\u30bb\u30b9\u5143\u306eIP\u3084\u30db\u30b9\u30c8\u60c5\u5831\u3092\u901a\u77e5\u3059\u308b\nlocation \u306f\u8907\u6570\u8a18\u8ff0\u53ef\u80fd\n\u30af\u30c3\u30ad\u30fc\u306e\u66f8\u304d\u63db\u3048\u3082\u53ef\u80fd\u3067\u3001\u66f8\u304d\u65b9\u306f proxy_cookie_path /abc/ /edf/; \u306e\u3088\u3046\u306b\u306a\u308b\n\n## rewrite\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\n\nrewrite\u30c7\u30a3\u30ec\u30af\u30c6\u30a3\u30d6\u3092\u8a18\u8ff0\u3059\u308b\u3053\u3068\u3067 apache \u306e mod_rewrite\u3068\u540c\u69d8\u306e\u3053\u3068\u304c\u3067\u304d\u308b\n\n\u66f8\u304d\u65b9\u306f rewrite regexp replacement option \u3068\u306a\u3063\u3066\u3044\u308b\n\u5177\u4f53\u4f8b\u306f\u4ee5\u4e0b\n\n```\nrewrite /reg/(.*) /replace/$1 last;\n```\n\noption \u306b\u306f\u4ee5\u4e0b\u306e\u3069\u308c\u304b\u3092\u6307\u5b9a\u53ef\u80fd\n\n|\u30aa\u30d7\u30b7\u30e7\u30f3|\u8aac\u660e|\n|--------------|-----|\n|last|rewrite\u30eb\u30fc\u30eb\u304c\u9069\u7528\u3055\u308c\u308b\u3068URL\u3092\u4e0a\u66f8\u304d\u3057\u3066\u51e6\u7406\u3092\u7d42\u4e86|\n|break|URL\u3092\u4e0a\u66f8\u304d\u3057\u3066\u51e6\u7406\u3092\u7d9a\u884c|\n|redirect|HTTP 302 temporary redirect \u3092\u8fd4\u3059|\n|permanent|HTTP 301 redirect \u3092\u8fd4\u3059|\n\n## \u53c2\u8003\u30b5\u30a4\u30c8\n\n- Nginx\u3067\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7\u3092\u8a2d\u5b9a\u3059\u308b http://9ensan.com/blog/server/sakura-vps-nginx-reverse-proxy/\n- Nginx\u306erewrite\u6a5f\u80fd\u3067URL\u306e\u66f8\u304d\u63db\u3048\u3092\u3057\u3066\u307f\u308b http://komeiy.hatenablog.com/entry/2014/12/10/231714\n- nginx\u3068Tomcat\u306e\u9023\u643a http://sekai.hatenablog.jp/entry/2013/02/13/185900\n- nginx \u3068 Tomcat \u306e\u9023\u643a http://fujishinko.exblog.jp/8362059/\n- Web\u958b\u767a/\u672c\u756a\u74b0\u5883\u69cb\u7bc9\u306b\u3064\u3044\u3066\u307e\u308b\u3063\u3068\u307e\u3068\u3081\u308bWIKI http://sakudevel.wiki.fc2.com/wiki/Nginx\n", "tags": ["nginx", "\u30ea\u30d0\u30fc\u30b9\u30d7\u30ed\u30ad\u30b7", "\u8a2d\u5b9a"]}