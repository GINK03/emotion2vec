{"context": " More than 1 year has passed since last update.\u540c\u3058\u65e5\u306b\u3079\u3064\u306eAdvent Calandar\u306e\u6295\u7a3f\u304c\u88ab\u3063\u3066\u3057\u307e\u3063\u3066\u6ce3\u304d\u305d\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u5927\u6a4b\u3067\u3059\u3002\n\u521d\u65e5\u306b\u306f\u6700\u8fd1\u306eGAS\u306e\u50be\u5411\u3092\u66f8\u304d\u305d\u306e\u4e2d\u3067\u3001GAS\u3067Google\u306eService Account\u8a8d\u8a3c\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u89e6\u308c\u307e\u3057\u305f\u3002\n\u4eca\u56de\u306f\u3053\u306eService Account\u8a8d\u8a3c\u3092\u5229\u7528\u3057\u3066\u3001AppEngine\u306e\u30c7\u30d7\u30ed\u30a4\u6e08\u307f\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u306a\u304aService Account\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u4eca\u307e\u3067\u306eOAuth2\u306e\u69d8\u306b\u308f\u3056\u308f\u3056\u753b\u9762\u3084\u3001\u30c8\u30fc\u30af\u30f3\u4fdd\u5b58\u306e\u305f\u3081\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5fc5\u8981\u3068\u305b\u305a\u3001\n\u76f4\u3050\u306b\u5229\u7528\u304c\u53ef\u80fd\u306b\u306a\u308b\u3068\u3053\u308d\u304c\u975e\u5e38\u306b\u826f\u3044\u70b9\u3067\u3059\u3002\n\n\u6e96\u5099\n\n1. Service Account\u306e\u4f5c\u6210\n\u307e\u305a\u4eca\u56de\u306fService Account\u306e\u4f5c\u6210\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u4f5c\u6210\u65b9\u6cd5\u306f \u3081\u3093\u3069\u304f \u4ed6\u306e\u7686\u3055\u3093\u304c\u65e2\u306b\u3044\u3063\u3071\u3044\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u9069\u5f53\u306bQiita\u3067\u691c\u7d22\u3057\u3066Service Account\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4f5c\u6210\u3059\u308b\u969b\u306fJSON\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4e0b\u3055\u3044\u3002\n\u306a\u304a\u3064\u3044\u3067\u306bGoogle App Engine Admin API\u3082Developer Console\u4e0a\u3067\u5229\u7528\u53ef\u80fd\u72b6\u614b\u306b\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n2. GAS\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\u9069\u5f53\u306aGAS\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nSpreadsheet\u304b\u3089\u3067\u3082Standalone\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\nhttps://script.google.com\n\n3. \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\n\u7d30\u304b\u304fService Account\u306e\u8a8d\u8a3c\u65b9\u6cd5\u3092\u66f8\u3044\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c\u6b63\u76f4\u3081\u3093\u3069\u304f\u3059\u3070\u3089\u3057\u3044\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u65e2\u306b\u3042\u308b\u306e\u3067\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\n\u30b3\u30fc\u30c9\n\n\nApps-Script-GSApp-Library\n\n\n\u30e9\u30a4\u30d6\u30e9\u30ea\u30ad\u30fc\n\n\nMJ5317VIFJyKpi9HCkXOfS0MLm9v2IJHf\n\n\n\n\u8aad\u307f\u8fbc\u307f\u65b9\u6cd5\u306f\u300cGAS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u697d\u3057\u305f\u3044\u2460 \u3068\u308a\u3042\u3048\u305a\u4f7f\u3063\u3066\u307f\u308b_ (:3\u300d\u2220)_ \u300d\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n4. \u8a8d\u8a3c\u30ad\u30fc\u60c5\u5831\u306e\u4fdd\u5b58\n1.\u3067\u53d6\u5f97\u3057\u305fJSON\u30b3\u30fc\u30c9\u3092GAS\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d7\u30ed\u30d1\u30c6\u30a3\u306bKEY\u540djsonKey\u306a\u3069\u3067\u4fdd\u5b58\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u30b3\u30fc\u30c9\n\u305d\u308c\u3067\u306f\u30b3\u30fc\u30c9\u3067\u3059\u3002\n//APPID\u3092\u8a2d\u5b9a\nvar APP_ID = \"APPID\";\n\n//\u30e2\u30b8\u30e5\u30fc\u30ebID\u3092\u8a2d\u5b9a\nvar MODULE_ID = \"default\";\n\nfunction myFunction() {\n\n  // \u8a8d\u8a3c\u60c5\u5831\u306eJSON\u3092\u53d6\u5f97\n  var jsonKey = JSON.parse(PropertiesService.getScriptProperties().getProperty(\"jsonKey\"));\n\n  // GSApp\u306e\u6e96\u5099 Scope\u3092 https://www.googleapis.com/auth/cloud-platform \u306b\u8a2d\u5b9a\n  var serverToken = new GSApp.init(jsonKey.private_key, [\"https://www.googleapis.com/auth/cloud-platform\"], jsonKey.client_email);\n\n  //\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\u30e6\u30fc\u30b6\u3092\u8a2d\u5b9a\u3057\u3066\u3001\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\n  var tokens = serverToken.addUser(jsonKey.client_email).requestToken().getTokens();\n\n  //\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u8a2d\u5b9a \n  var fetchOptions = {method:\"GET\",muteHttpExceptions:true, contentType:\"application/json\", headers:{Authorization:\"Bearer \"+tokens[jsonKey.client_email].token}};\n\n  //\u30ea\u30af\u30a8\u30b9\u30c8URL\u3092\u4f5c\u6210  \n  var url = \"https://appengine.googleapis.com/v1beta4/apps/\" + APP_ID + \"/modules/\" + MODULE_ID + \"/versions\";\n\n  //fetch\n  var res = UrlFetchApp.fetch(url, fetchOptions);\n\n  // \u30ed\u30b0\n  JSON.parse(res.getContentText()).versions.forEach(function(versionData){\n    Logger.log(Utilities.formatString(\"ID: %s\\tRuntime: %s\\tdeployer: %s\\tcreationTime: %s\", versionData.id || \"\", versionData.runtime || \"\", versionData.deployer || \"\", versionData.creationTime || \"\"));\n  });\n\n}\n\n\u3053\u308c\u3060\u3051\u3067\u8a8d\u8a3c\u3057\u3066AppEngine\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7\u304c\u53d6\u308c\u3061\u3083\u3044\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3046\u307e\u304f\u4f5c\u308c\u3070\u30c7\u30d7\u30ed\u30a4\u3084\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048\u306a\u3069\u3082\u5b9f\u88c5\u53ef\u80fd\u3067\u3059\u3002\n\u7d20\u6674\u3089\u3057\u3067\u3059\u306d\uff01\n\n\u307e\u3068\u3081\n\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3088\u308a\u69d8\u3005\u306aGoogle API\u3092\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u66f4\u306b\u81ea\u52d5\u5316\u3057\u305f\u308aSlack\u306a\u3069\u304b\u3089ChatOps\u304c\u3084\u308a\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u306d\uff01\n\u3000\n\n\u540c\u3058\u65e5\u306b\u3079\u3064\u306eAdvent Calandar\u306e\u6295\u7a3f\u304c\u88ab\u3063\u3066\u3057\u307e\u3063\u3066\u6ce3\u304d\u305d\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u5927\u6a4b\u3067\u3059\u3002\n\u521d\u65e5\u306b\u306f\u6700\u8fd1\u306eGAS\u306e\u50be\u5411\u3092\u66f8\u304d\u305d\u306e\u4e2d\u3067\u3001GAS\u3067Google\u306eService Account\u8a8d\u8a3c\u304c\u53ef\u80fd\u306b\u306a\u3063\u305f\u3053\u3068\u3092\u89e6\u308c\u307e\u3057\u305f\u3002\n\n\u4eca\u56de\u306f\u3053\u306eService Account\u8a8d\u8a3c\u3092\u5229\u7528\u3057\u3066\u3001AppEngine\u306e\u30c7\u30d7\u30ed\u30a4\u6e08\u307f\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7\u3092\u53d6\u5f97\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u306a\u304aService Account\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u4eca\u307e\u3067\u306eOAuth2\u306e\u69d8\u306b\u308f\u3056\u308f\u3056\u753b\u9762\u3084\u3001\u30c8\u30fc\u30af\u30f3\u4fdd\u5b58\u306e\u305f\u3081\u306e\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3092\u5fc5\u8981\u3068\u305b\u305a\u3001\n\u76f4\u3050\u306b\u5229\u7528\u304c\u53ef\u80fd\u306b\u306a\u308b\u3068\u3053\u308d\u304c\u975e\u5e38\u306b\u826f\u3044\u70b9\u3067\u3059\u3002\n\n## \u6e96\u5099\n\n### 1. Service Account\u306e\u4f5c\u6210\n\n\u307e\u305a\u4eca\u56de\u306fService Account\u306e\u4f5c\u6210\u304c\u5fc5\u8981\u3067\u3059\u3002\n\u4f5c\u6210\u65b9\u6cd5\u306f ~~\u3081\u3093\u3069\u304f~~ \u4ed6\u306e\u7686\u3055\u3093\u304c\u65e2\u306b\u3044\u3063\u3071\u3044\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u9069\u5f53\u306bQiita\u3067\u691c\u7d22\u3057\u3066Service Account\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u4f5c\u6210\u3059\u308b\u969b\u306fJSON\u30b3\u30fc\u30c9\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4e0b\u3055\u3044\u3002\n\n\u306a\u304a\u3064\u3044\u3067\u306bGoogle App Engine Admin API\u3082Developer Console\u4e0a\u3067\u5229\u7528\u53ef\u80fd\u72b6\u614b\u306b\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n### 2. GAS\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\n\u9069\u5f53\u306aGAS\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\u3066\u304f\u3060\u3055\u3044\u3002\nSpreadsheet\u304b\u3089\u3067\u3082Standalone\u3067\u3082\u69cb\u3044\u307e\u305b\u3093\u3002\n\nhttps://script.google.com\n\n### 3. \u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\n\n\u7d30\u304b\u304fService Account\u306e\u8a8d\u8a3c\u65b9\u6cd5\u3092\u66f8\u3044\u3066\u3082\u3044\u3044\u306e\u3067\u3059\u304c~~\u6b63\u76f4\u3081\u3093\u3069\u304f~~\u3059\u3070\u3089\u3057\u3044\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u65e2\u306b\u3042\u308b\u306e\u3067\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3044\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u8aad\u307f\u8fbc\u3093\u3067\u304f\u3060\u3055\u3044\u3002\n\n* \u30b3\u30fc\u30c9\n    * [Apps-Script-GSApp-Library](https://github.com/Spencer-Easton/Apps-Script-GSApp-Library)\n* \u30e9\u30a4\u30d6\u30e9\u30ea\u30ad\u30fc\n    * MJ5317VIFJyKpi9HCkXOfS0MLm9v2IJHf\n\n\u8aad\u307f\u8fbc\u307f\u65b9\u6cd5\u306f\u300c[GAS\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3063\u3066\u697d\u3057\u305f\u3044\u2460 \u3068\u308a\u3042\u3048\u305a\u4f7f\u3063\u3066\u307f\u308b_ (:3\u300d\u2220)_](http://qiita.com/soundTricker/items/7bbd86425ae8d0641d50) \u300d\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n###  4. \u8a8d\u8a3c\u30ad\u30fc\u60c5\u5831\u306e\u4fdd\u5b58\n\n1.\u3067\u53d6\u5f97\u3057\u305fJSON\u30b3\u30fc\u30c9\u3092GAS\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u30d7\u30ed\u30d1\u30c6\u30a3\u306bKEY\u540d`jsonKey`\u306a\u3069\u3067\u4fdd\u5b58\u3057\u3066\u304a\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u30b3\u30fc\u30c9\n\n\u305d\u308c\u3067\u306f\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n```js\n//APPID\u3092\u8a2d\u5b9a\nvar APP_ID = \"APPID\";\n\n//\u30e2\u30b8\u30e5\u30fc\u30ebID\u3092\u8a2d\u5b9a\nvar MODULE_ID = \"default\";\n\nfunction myFunction() {\n  \n  // \u8a8d\u8a3c\u60c5\u5831\u306eJSON\u3092\u53d6\u5f97\n  var jsonKey = JSON.parse(PropertiesService.getScriptProperties().getProperty(\"jsonKey\"));\n\n  // GSApp\u306e\u6e96\u5099 Scope\u3092 https://www.googleapis.com/auth/cloud-platform \u306b\u8a2d\u5b9a\n  var serverToken = new GSApp.init(jsonKey.private_key, [\"https://www.googleapis.com/auth/cloud-platform\"], jsonKey.client_email);\n  \n  //\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3059\u308b\u30e6\u30fc\u30b6\u3092\u8a2d\u5b9a\u3057\u3066\u3001\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\n  var tokens = serverToken.addUser(jsonKey.client_email).requestToken().getTokens();\n  \n  //\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u8a2d\u5b9a \n  var fetchOptions = {method:\"GET\",muteHttpExceptions:true, contentType:\"application/json\", headers:{Authorization:\"Bearer \"+tokens[jsonKey.client_email].token}};\n  \n  //\u30ea\u30af\u30a8\u30b9\u30c8URL\u3092\u4f5c\u6210  \n  var url = \"https://appengine.googleapis.com/v1beta4/apps/\" + APP_ID + \"/modules/\" + MODULE_ID + \"/versions\";\n  \n  //fetch\n  var res = UrlFetchApp.fetch(url, fetchOptions);\n  \n  // \u30ed\u30b0\n  JSON.parse(res.getContentText()).versions.forEach(function(versionData){\n    Logger.log(Utilities.formatString(\"ID: %s\\tRuntime: %s\\tdeployer: %s\\tcreationTime: %s\", versionData.id || \"\", versionData.runtime || \"\", versionData.deployer || \"\", versionData.creationTime || \"\"));\n  });\n  \n}\n```\n\n\u3053\u308c\u3060\u3051\u3067\u8a8d\u8a3c\u3057\u3066AppEngine\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u4e00\u89a7\u304c\u53d6\u308c\u3061\u3083\u3044\u307e\u3059\u3002\n\u3082\u3061\u308d\u3093\u3046\u307e\u304f\u4f5c\u308c\u3070\u30c7\u30d7\u30ed\u30a4\u3084\u3001\u30d0\u30fc\u30b8\u30e7\u30f3\u5207\u308a\u66ff\u3048\u306a\u3069\u3082\u5b9f\u88c5\u53ef\u80fd\u3067\u3059\u3002\n\n\u7d20\u6674\u3089\u3057\u3067\u3059\u306d\uff01\n\n## \u307e\u3068\u3081\n\n\u30b5\u30fc\u30d3\u30b9\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u5229\u7528\u3059\u308b\u3053\u3068\u3067\u3088\u308a\u69d8\u3005\u306aGoogle API\u3092\u5229\u7528\u53ef\u80fd\u306b\u306a\u308a\u307e\u3059\u3002\n\u66f4\u306b\u81ea\u52d5\u5316\u3057\u305f\u308aSlack\u306a\u3069\u304b\u3089ChatOps\u304c\u3084\u308a\u3084\u3059\u304f\u306a\u308a\u307e\u3059\u306d\uff01\n\n\n\n\n\n\u3000\n", "tags": ["GoogleAppsScript", "gas", "gasja", "GoogleCloudPlatform"]}