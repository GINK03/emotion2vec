{"context": " More than 1 year has passed since last update.\u52d5\u4f5c\u74b0\u5883\u306f Amazon Linux \u4e0a\u306e httpd24 (+ httpd24-devel)\u3092\u60f3\u5b9a\u3002\n\u76ee\u7684\u306f--enable-fds-setsize\u306e\u5024\u3092\u5909\u66f4\u3057\u305f\u30d3\u30eb\u30c9\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u3002\n\u4f7f\u7528\u3057\u305fSRPM\u306f IUS \u306e\nphp55u-5.5.12-1.ius.centos6.src.rpm\nIUS \u306eRPM\u3068EPEL\u306eRPM\u3092\u7121\u7406\u3084\u308a\u6df7\u5728\u3055\u305b\u3066\u3044\u308b\u306e\u3067.rpmmacros\u3067\u5e33\u5c3b\u3092\u5408\u308f\u305b\u308b\u3002\n$ cat ~/.rpmmacros\n%dist .centos6\n\nEPEL\u306ehttpd24\u3092\u5c0e\u5165\n# rpm -e apr-util apr apr-devel httpd httpd-devel httpd-tools apr-util-ldap apr-util-devel\n# curl -s http://repos.fedorapeople.org/repos/jkaluza/httpd24/epel-httpd24.repo > /etc/yum.repos.d/epel-httpd24.repo\n# yum install -y httpd24-httpd-devel\n\nrpmbuild\u3059\u308b\u3068\u304d\u306bPKG_CONFIG_PATH\u3082\u8abf\u6574\u304c\u5fc5\u8981\nexport PKG_CONFIG_PATH=/opt/rh/httpd24/root/usr/lib64/pkgconfig\n\nEPEL+IUS\u3068\u3044\u3046\u7279\u6b8a\u306a\u7d44\u307f\u5408\u308f\u305b\u306e\u305f\u3081\u3001\u8a66\u884c\u932f\u8aa4\u3057\u3066\u751f\u307e\u308c\u305fpatch \u304c\u2193\u306e\u3068\u304a\u308a\n(\u52d5\u7684\u306b\u5024\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u3092\u76f4\u66f8\u304d\u306b\u3057\u3066\u3044\u308b\u306e\u306f\u5358\u306a\u308b\u624b\u629c\u304d)\n\nphp55u-spec.patch\n--- php55u.spec.orig    2014-05-23 07:18:03.606275541 +0000\n+++ php55u.spec 2014-05-23 08:06:17.001012367 +0000\n@@ -35,8 +35,8 @@\n %endif\n\n # /usr/sbin/apsx with httpd < 2.4 and defined as /usr/bin/apxs with httpd >= 2.4\n-%{!?_httpd_apxs:       %{expand: %%global _httpd_apxs       %%{_sbindir}/apxs}}\n-%{!?_httpd_mmn:        %{expand: %%global _httpd_mmn        %%(cat %{_includedir}/httpd/.mmn 2>/dev/null || echo missing-httpd-devel)}}\n+%{!?_httpd_apxs:       %{expand: %%global _httpd_apxs       /opt/rh/httpd24/root/usr/bin/apxs}}\n+%{!?_httpd_mmn:        %{expand: %%global _httpd_mmn        20120211x86-64}}\n %{!?_httpd_confdir:    %{expand: %%global _httpd_confdir    %%{_sysconfdir}/httpd/conf.d}}\n # /etc/httpd/conf.d with httpd < 2.4 and defined as /etc/httpd/conf.modules.d with httpd >= 2.4\n %{!?_httpd_modconfdir: %{expand: %%global _httpd_modconfdir %%{_sysconfdir}/httpd/conf.d}}\n@@ -123,7 +123,7 @@\n Patch47: php-5.4.9-phpinfo.patch\n\n BuildRequires: bzip2-devel, curl-devel >= 7.9\n-BuildRequires: httpd-devel >= 2.0.46-1, pam-devel\n+BuildRequires: httpd24-httpd-devel >= 2.4, pam-devel\n BuildRequires: libstdc++-devel, openssl-devel\n BuildRequires: sqlite-devel >= 3.6.0\n BuildRequires: zlib-devel, smtpdaemon, libedit-devel\n@@ -1020,6 +1020,7 @@\n\n ln -sf ../configure\n %configure \\\n+    --enable-fd-setsize=32767 \\\n     --cache-file=../config.cache \\\n     --with-libdir=%{_lib} \\\n     --with-config-file-path=%{_sysconfdir} \\\n\n\n\u52d5\u4f5c\u74b0\u5883\u306f Amazon Linux \u4e0a\u306e httpd24 (+ httpd24-devel)\u3092\u60f3\u5b9a\u3002\n\u76ee\u7684\u306f--enable-fds-setsize\u306e\u5024\u3092\u5909\u66f4\u3057\u305f\u30d3\u30eb\u30c9\u3092\u5229\u7528\u3059\u308b\u305f\u3081\u3002\n\n\u4f7f\u7528\u3057\u305fSRPM\u306f IUS \u306e\nphp55u-5.5.12-1.ius.centos6.src.rpm\n\nIUS \u306eRPM\u3068EPEL\u306eRPM\u3092\u7121\u7406\u3084\u308a\u6df7\u5728\u3055\u305b\u3066\u3044\u308b\u306e\u3067.rpmmacros\u3067\u5e33\u5c3b\u3092\u5408\u308f\u305b\u308b\u3002\n\n```\n$ cat ~/.rpmmacros\n%dist .centos6\n```\n\nEPEL\u306ehttpd24\u3092\u5c0e\u5165\n\n```\n# rpm -e apr-util apr apr-devel httpd httpd-devel httpd-tools apr-util-ldap apr-util-devel\n# curl -s http://repos.fedorapeople.org/repos/jkaluza/httpd24/epel-httpd24.repo > /etc/yum.repos.d/epel-httpd24.repo\n# yum install -y httpd24-httpd-devel\n```\n\nrpmbuild\u3059\u308b\u3068\u304d\u306bPKG_CONFIG_PATH\u3082\u8abf\u6574\u304c\u5fc5\u8981\n\n```\nexport PKG_CONFIG_PATH=/opt/rh/httpd24/root/usr/lib64/pkgconfig\n```\n\nEPEL+IUS\u3068\u3044\u3046\u7279\u6b8a\u306a\u7d44\u307f\u5408\u308f\u305b\u306e\u305f\u3081\u3001\u8a66\u884c\u932f\u8aa4\u3057\u3066\u751f\u307e\u308c\u305fpatch \u304c\u2193\u306e\u3068\u304a\u308a\n(\u52d5\u7684\u306b\u5024\u3092\u53d6\u5f97\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u3092\u76f4\u66f8\u304d\u306b\u3057\u3066\u3044\u308b\u306e\u306f\u5358\u306a\u308b\u624b\u629c\u304d)\n\n```patch:php55u-spec.patch\n--- php55u.spec.orig\t2014-05-23 07:18:03.606275541 +0000\n+++ php55u.spec\t2014-05-23 08:06:17.001012367 +0000\n@@ -35,8 +35,8 @@\n %endif\n\n # /usr/sbin/apsx with httpd < 2.4 and defined as /usr/bin/apxs with httpd >= 2.4\n-%{!?_httpd_apxs:       %{expand: %%global _httpd_apxs       %%{_sbindir}/apxs}}\n-%{!?_httpd_mmn:        %{expand: %%global _httpd_mmn        %%(cat %{_includedir}/httpd/.mmn 2>/dev/null || echo missing-httpd-devel)}}\n+%{!?_httpd_apxs:       %{expand: %%global _httpd_apxs       /opt/rh/httpd24/root/usr/bin/apxs}}\n+%{!?_httpd_mmn:        %{expand: %%global _httpd_mmn        20120211x86-64}}\n %{!?_httpd_confdir:    %{expand: %%global _httpd_confdir    %%{_sysconfdir}/httpd/conf.d}}\n # /etc/httpd/conf.d with httpd < 2.4 and defined as /etc/httpd/conf.modules.d with httpd >= 2.4\n %{!?_httpd_modconfdir: %{expand: %%global _httpd_modconfdir %%{_sysconfdir}/httpd/conf.d}}\n@@ -123,7 +123,7 @@\n Patch47: php-5.4.9-phpinfo.patch\n\n BuildRequires: bzip2-devel, curl-devel >= 7.9\n-BuildRequires: httpd-devel >= 2.0.46-1, pam-devel\n+BuildRequires: httpd24-httpd-devel >= 2.4, pam-devel\n BuildRequires: libstdc++-devel, openssl-devel\n BuildRequires: sqlite-devel >= 3.6.0\n BuildRequires: zlib-devel, smtpdaemon, libedit-devel\n@@ -1020,6 +1020,7 @@\n\n ln -sf ../configure\n %configure \\\n+    --enable-fd-setsize=32767 \\\n     --cache-file=../config.cache \\\n     --with-libdir=%{_lib} \\\n     --with-config-file-path=%{_sysconfdir} \\\n```\n", "tags": ["PHP", "rpm"]}