{"context": "ASP.NET MVC5 & Entity Framework & Identity2 \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001Oracle \u306b\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u7d50\u679c\u3068\u3057\u3066\u3001\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\u3084\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u308b\u72b6\u614b\u306b\u3059\u308b\u3002\n\u4e0a\u8a18\u306e\u69cb\u6210\u3067\u5c11\u3057\u3064\u307e\u3065\u3044\u305f\u6240\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u8a18\u4e8b\u3068\u3057\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\nASP.NET MVC \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u8a8d\u8a3c\u306f\u500b\u4eba\u30d9\u30fc\u30b9\u3002\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3082\u3042\u308b\uff09\n\u30c6\u30b9\u30c8\u306b\u95a2\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3002\n\nNuGet\nOracle Managed Data Access \u3092\u53d6\u5f97\u3059\u308b\u3002\n\nOracle.ManagedDataAccess\nOracle.ManagedDataAccess.EntityFramework\n\n\nGAC \u3078\u306e\u767b\u9332\n\n\u4f55\u6545\uff1f\n\u3053\u308c\u304c\u306a\u3044\u3068\u3001\u5f8c\u3067\u884c\u3046 Update-Database \u304c\u5931\u6557\u3057\u3066\u3057\u307e\u3046\u3002\n\nGAC\u306b\u767b\u9332\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u30a8\u30e9\u30fc\u4f8b\nPM> Update-Database\n :\nSystem.Runtime.Serialization.SerializationException: \u30e1\u30f3\u30d0\u30fc 'Oracle.ManagedDataAccess.Client.OracleException,Oracle.ManagedDataAccess, Version=4.121.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342' \u306e\u578b\u304c\u89e3\u6c7a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\n\n\ngacutil \u3067\u767b\u9332\u3059\u308b\n\u3053\u306e stack overflow \u3092\u898b\u3066\u89e3\u6c7a\u3002\n\u7ba1\u7406\u8005\u6a29\u9650\u3067\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8d77\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n\u5b9f\u884c\npushd {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a9\u30eb\u30c0}\\packages\\Oracle.ManagedDataAccess.12.1.2400\\lib\\net40\n\"c:\\Program Files\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\gacutil.exe\" /i Oracle.ManagedDataAccess.dll\n\n\n\u30d1\u30b9\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u4e0b\u3055\u3044\u3002\n\nOracle \u3078\u306e\u63a5\u7d9a\u8a2d\u5b9a\n\n\u307e\u305a\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u3092\u7528\u610f\n\u3066\u304d\u3068\u30fc\u306b\u30c6\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc EFTEST \u3092\u4f5c\u6210\u3002\nCREATE USER EFTEST IDENTIFIED BY pasuwado\n    DEFAULT TABLESPACE EFTEST_TABLESPACE \n    TEMPORARY TABLESPACE TEMP \n    ACCOUNT UNLOCK;\nGRANT ALL privileges TO EFTEST;\nGRANT DBA TO EFTEST;\n\n\nWeb.config \u306e connectionStrings \u3092\u7de8\u96c6\n\nWeb.config\u306e\u7de8\u96c6\u7b87\u6240\u306e\u307f\n  <connectionStrings>\n    <!-- \n      <add name=\"DefaultConnection\"\n            connectionString=\"Data Source=(LocalDb)\\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\\aspnet-WebApplication2-20160902013704.mdf;Initial Catalog=aspnet-WebApplication2-20160902013704;Integrated Security=True\" \n            providerName=\"System.Data.SqlClient\" />\n      <add name=\"OracleDbContext\"\n            providerName=\"Oracle.ManagedDataAccess.Client\"\n            connectionString=\"User Id=oracle_user;Password=oracle_user_password;Data Source=oracle\" />\n    -->\n    <add name=\"DefaultConnection\"\n            providerName=\"Oracle.ManagedDataAccess.Client\"\n            connectionString=\"User Id=EFTEST;Password=pasuwado;Data Source=dbserver/orcl\" />\n  </connectionStrings>\n\n\nDefaultConnection \u3067\u3001\u5148\u7a0b\u7528\u610f\u3057\u305fDB\u306b\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3002\nEntity Framework \u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5f04\u308b\u3068\u82e5\u5e72\u9762\u5012\u306a\u306e\u3067\u3001\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001IdentityDbContext \u304c\u53c2\u7167\u3057\u3066\u3044\u308b\u3053\u306e DefaultConnection \u3092\u4f7f\u3063\u3066\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u3066\u3044\u304f\u3002\n\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b DefaultConnection \u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u3067\u3001SQL Server Express LocalDB \u306b\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u4eca\u56de\u306f Oracle \u306b\u63a5\u7d9a\u3059\u308b\u306e\u3067\u3001\u3053\u306e connectionString \u306f\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u4f7f\u3048\u306a\u3044\u3002\n\u307e\u305f\u3001\u540c\u69d8\u306b\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b OracleDbContext \u306f\u3001\u5148\u7a0b\u306e NuGet \u306e\u6642\u70b9\u3067\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3002\n\u63a5\u7d9a\u5148\u3084\u4f7f\u3046\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u60c5\u5831\u3068\u3057\u3066\u306f\u3053\u3061\u3089\u304c\u6700\u7d42\u5f62\u306b\u8fd1\u3044\u3002\n\u7d50\u679c\u3068\u3057\u3066\u3001\u6700\u7d42\u884c\u306e\u8a2d\u5b9a\u3068\u306a\u308b\u3002\n\n\u63a5\u7d9a\u5148\u30e6\u30fc\u30b6\u30fc\u306e\u6307\u5b9a\u3092\u3059\u308b\n\u305d\u306e\u307e\u307e\u3060\u3068\u3001dbo \u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u306b\u63a5\u7d9a\u3057\u3088\u3046\u3068\u3059\u308b\u3002\n\u3053\u3053\u3067\u306f IdentityDbContext \u306b\u5bfe\u3057\u3066\u3001\u30b3\u30fc\u30c9\u3067\u660e\u793a\u7684\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3059\u308b\u3002\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u2192\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089ASP.NET MVC5 EntityFramework6 for Oracle\u3092\u8a66\u3059 \u306b\u3042\u308b\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3002\nPublic Class ApplicationDbContext\n    Inherits IdentityDbContext(Of ApplicationUser)\n    Public Sub New()\n        MyBase.New(\"DefaultConnection\", throwIfV1Schema:=False)\n    End Sub\n\n    '\u3053\u306e\u30b5\u30d6\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u3002\n    Protected Overrides Sub OnModelCreating(modelBuilder As DbModelBuilder)\n        MyBase.OnModelCreating(modelBuilder)\n\n        ' \u3053\u3053\u3067 Oracle \u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n        modelBuilder.HasDefaultSchema(\"EFTEST\")\n    End Sub\n\n    Public Shared Function Create() As ApplicationDbContext\n        Return New ApplicationDbContext()\n    End Function\nEnd Class\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3092\u3059\u308b\n\u4eca\u56de\u306f AutomaticMigration \u306f\u6709\u52b9\u306b\u3057\u306a\u3044\u3002\n\u30d1\u30c3\u30b1\u30fc\u30b8 \u30de\u30cd\u30fc\u30b8\u30e3\u30fc \u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\nPM> Enable-Migrations\n\nChecking if the context targets an existing database...\nCode First Migrations enabled for project WebApplication2.\n\nPM> Add-Migration Initial\n\nScaffolding migration 'Initial'.\nThe Designer Code for this migration file includes a snapshot of your current Code First model. This snapshot is used to calculate the changes to your model when you scaffold the next migration. If you make additional changes to your model that you want to include in this migration, then you can re-scaffold it by running 'Add-Migration Initial' again.\n\nPM> Update-Database -Verbose\n\n\n\u5b9f\u884c\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0\u3068\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b\u7528\u610f\u3055\u308c\u308b\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u3001Register \u3057\u305f\u308a Log off / Log in \u3057\u305f\u308a\u3057\u3066\u307f\u308b\u3002\n\u30c6\u30fc\u30d6\u30eb EFTEST.AspNetUsers \u306b\u30ec\u30b3\u30fc\u30c9\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\nselect * from \"AspNetUsers\";\n\n\n\u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u305f\u3044\u5834\u5408\n__MigrationHistory \u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3068\u3001AspNet\u3067\u59cb\u307e\u308b\u540d\u524d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08\u30c6\u30fc\u30d6\u30eb\u3084\u9806\u5e8f\uff09\u3092 DROP \u3059\u308b\u3002\n\n\u524a\u9664\u5bfe\u8c61\u3092\u6d17\u3044\u51fa\u3059SQL\u6587\nselect * from user_objects where object_name like '%Asp%' order by object_name;\n\n\n\n\u7d50\u679c\u7684\u306b\u5b9f\u884c\u3057\u305fDROP\u6587\ndrop table \"__MigrationHistory\";\n-- \u2193\u5916\u90e8\u30ad\u30fc\u306e\u53c2\u7167\u304c\u3042\u308b\u305f\u3081\u9806\u756a\u3092\u5165\u308c\u66ff\u3048\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\ndrop table \"AspNetUserClaims\";\ndrop table \"AspNetUserRoles\";\ndrop table \"AspNetUserLogins\";\ndrop table \"AspNetUsers\";\ndrop table \"AspNetRoles\";\ndrop sequence \"SQ_AspNetUserClaims\";\n\n\nASP.NET MVC5 & Entity Framework & Identity2 \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u308a\u3001Oracle \u306b\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u3059\u308b\u3002\n\u7d50\u679c\u3068\u3057\u3066\u3001\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u30e6\u30fc\u30b6\u30fc\u306e\u767b\u9332\u3084\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u308b\u72b6\u614b\u306b\u3059\u308b\u3002\n\n\u4e0a\u8a18\u306e\u69cb\u6210\u3067\u5c11\u3057\u3064\u307e\u3065\u3044\u305f\u6240\u304c\u3042\u3063\u305f\u306e\u3067\u3001\u8a18\u4e8b\u3068\u3057\u3066\u307e\u3068\u3081\u307e\u3057\u305f\u3002\n\n# \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\n\nASP.NET MVC \u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3059\u308b\u3002\n\n\u8a8d\u8a3c\u306f\u500b\u4eba\u30d9\u30fc\u30b9\u3002\uff08\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3082\u3042\u308b\uff09\n\u30c6\u30b9\u30c8\u306b\u95a2\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3002\n\n# NuGet\n\nOracle Managed Data Access \u3092\u53d6\u5f97\u3059\u308b\u3002\n\n* Oracle.ManagedDataAccess\n* Oracle.ManagedDataAccess.EntityFramework\n\n## GAC \u3078\u306e\u767b\u9332\n\n### \u4f55\u6545\uff1f\n\n\u3053\u308c\u304c\u306a\u3044\u3068\u3001\u5f8c\u3067\u884c\u3046 Update-Database \u304c\u5931\u6557\u3057\u3066\u3057\u307e\u3046\u3002\n\n```:GAC\u306b\u767b\u9332\u3057\u306a\u304b\u3063\u305f\u5834\u5408\u306e\u30a8\u30e9\u30fc\u4f8b\nPM> Update-Database\n :\nSystem.Runtime.Serialization.SerializationException: \u30e1\u30f3\u30d0\u30fc 'Oracle.ManagedDataAccess.Client.OracleException,Oracle.ManagedDataAccess, Version=4.121.2.0, Culture=neutral, PublicKeyToken=89b483f429c47342' \u306e\u578b\u304c\u89e3\u6c7a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n```\n\n### gacutil \u3067\u767b\u9332\u3059\u308b\n\n[\u3053\u306e stack overflow](http://stackoverflow.com/questions/32006884/entity-framework-seed-method-exception) \u3092\u898b\u3066\u89e3\u6c7a\u3002\n\n\u7ba1\u7406\u8005\u6a29\u9650\u3067\u30b3\u30de\u30f3\u30c9\u30d7\u30ed\u30f3\u30d7\u30c8\u3092\u8d77\u52d5\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```:\u5b9f\u884c\npushd {\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u30d5\u30a9\u30eb\u30c0}\\packages\\Oracle.ManagedDataAccess.12.1.2400\\lib\\net40\n\"c:\\Program Files\\Microsoft SDKs\\Windows\\v10.0A\\bin\\NETFX 4.6.1 Tools\\gacutil.exe\" /i Oracle.ManagedDataAccess.dll\n```\n\n\u30d1\u30b9\u306f\u9069\u5b9c\u8aad\u307f\u66ff\u3048\u3066\u4e0b\u3055\u3044\u3002\n\n# Oracle \u3078\u306e\u63a5\u7d9a\u8a2d\u5b9a\n## \u307e\u305a\u306f\u3001\u30e6\u30fc\u30b6\u30fc\u3092\u7528\u610f\n\n\u3066\u304d\u3068\u30fc\u306b\u30c6\u30b9\u30c8\u30e6\u30fc\u30b6\u30fc __EFTEST__ \u3092\u4f5c\u6210\u3002\n\n```sql\nCREATE USER EFTEST IDENTIFIED BY pasuwado\n    DEFAULT TABLESPACE EFTEST_TABLESPACE \n    TEMPORARY TABLESPACE TEMP \n    ACCOUNT UNLOCK;\nGRANT ALL privileges TO EFTEST;\nGRANT DBA TO EFTEST;\n```\n\n## Web.config \u306e connectionStrings \u3092\u7de8\u96c6\n\n```xml:Web.config\u306e\u7de8\u96c6\u7b87\u6240\u306e\u307f\n  <connectionStrings>\n    <!-- \n      <add name=\"DefaultConnection\"\n            connectionString=\"Data Source=(LocalDb)\\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\\aspnet-WebApplication2-20160902013704.mdf;Initial Catalog=aspnet-WebApplication2-20160902013704;Integrated Security=True\" \n            providerName=\"System.Data.SqlClient\" />\n      <add name=\"OracleDbContext\"\n            providerName=\"Oracle.ManagedDataAccess.Client\"\n            connectionString=\"User Id=oracle_user;Password=oracle_user_password;Data Source=oracle\" />\n    -->\n    <add name=\"DefaultConnection\"\n            providerName=\"Oracle.ManagedDataAccess.Client\"\n            connectionString=\"User Id=EFTEST;Password=pasuwado;Data Source=dbserver/orcl\" />\n  </connectionStrings>\n```\n\nDefaultConnection \u3067\u3001\u5148\u7a0b\u7528\u610f\u3057\u305fDB\u306b\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u8a18\u8ff0\u3059\u308b\u3002\n\nEntity Framework \u306e\u30b3\u30f3\u30c6\u30ad\u30b9\u30c8\u3092\u5f04\u308b\u3068\u82e5\u5e72\u9762\u5012\u306a\u306e\u3067\u3001\u3053\u306e\u8a18\u4e8b\u3067\u306f\u3001IdentityDbContext \u304c\u53c2\u7167\u3057\u3066\u3044\u308b\u3053\u306e DefaultConnection \u3092\u4f7f\u3063\u3066\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u5909\u66f4\u3057\u3066\u3044\u304f\u3002\n\n\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b DefaultConnection \u306f\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b\u7528\u610f\u3055\u308c\u3066\u3044\u308b\u3082\u306e\u3067\u3001SQL Server Express LocalDB \u306b\u63a5\u7d9a\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\u4eca\u56de\u306f Oracle \u306b\u63a5\u7d9a\u3059\u308b\u306e\u3067\u3001\u3053\u306e connectionString \u306f\u3001\u305d\u306e\u307e\u307e\u3067\u306f\u4f7f\u3048\u306a\u3044\u3002\n\n\u307e\u305f\u3001\u540c\u69d8\u306b\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3055\u308c\u3066\u3044\u308b OracleDbContext \u306f\u3001\u5148\u7a0b\u306e NuGet \u306e\u6642\u70b9\u3067\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u3002\n\u63a5\u7d9a\u5148\u3084\u4f7f\u3046\u30d7\u30ed\u30d0\u30a4\u30c0\u306e\u60c5\u5831\u3068\u3057\u3066\u306f\u3053\u3061\u3089\u304c\u6700\u7d42\u5f62\u306b\u8fd1\u3044\u3002\n\n\u7d50\u679c\u3068\u3057\u3066\u3001\u6700\u7d42\u884c\u306e\u8a2d\u5b9a\u3068\u306a\u308b\u3002\n\n# \u63a5\u7d9a\u5148\u30e6\u30fc\u30b6\u30fc\u306e\u6307\u5b9a\u3092\u3059\u308b\n\n\u305d\u306e\u307e\u307e\u3060\u3068\u3001dbo \u3068\u3044\u3046\u30e6\u30fc\u30b6\u30fc\u306b\u63a5\u7d9a\u3057\u3088\u3046\u3068\u3059\u308b\u3002\n\n\u3053\u3053\u3067\u306f IdentityDbContext \u306b\u5bfe\u3057\u3066\u3001\u30b3\u30fc\u30c9\u3067\u660e\u793a\u7684\u306b\u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u2192[\u7a7a\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089ASP.NET MVC5 EntityFramework6 for Oracle\u3092\u8a66\u3059](http://qiita.com/yaju/items/3b1b5fb77ff684d564f9#%E4%BE%8B%E5%A4%96%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E7%99%BA%E7%94%9F) \u306b\u3042\u308b\u3088\u3046\u306b\u4fee\u6b63\u3059\u308b\u3002\n\n```vbnet\nPublic Class ApplicationDbContext\n    Inherits IdentityDbContext(Of ApplicationUser)\n    Public Sub New()\n        MyBase.New(\"DefaultConnection\", throwIfV1Schema:=False)\n    End Sub\n\n    '\u3053\u306e\u30b5\u30d6\u30d7\u30ed\u30b7\u30fc\u30b8\u30e3\u30fc\u3092\u8ffd\u52a0\u3059\u308b\u3002\n    Protected Overrides Sub OnModelCreating(modelBuilder As DbModelBuilder)\n        MyBase.OnModelCreating(modelBuilder)\n\n        ' \u3053\u3053\u3067 Oracle \u30e6\u30fc\u30b6\u30fc\u3092\u6307\u5b9a\u3057\u3066\u3044\u308b\u3002\n        modelBuilder.HasDefaultSchema(\"EFTEST\")\n    End Sub\n\n    Public Shared Function Create() As ApplicationDbContext\n        Return New ApplicationDbContext()\n    End Function\nEnd Class\n```\n\n# \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a2d\u5b9a\u3092\u3059\u308b\n\n\u4eca\u56de\u306f AutomaticMigration \u306f\u6709\u52b9\u306b\u3057\u306a\u3044\u3002\n\n\u30d1\u30c3\u30b1\u30fc\u30b8 \u30de\u30cd\u30fc\u30b8\u30e3\u30fc \u30b3\u30f3\u30bd\u30fc\u30eb\u304b\u3089\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3002\n\n```:\nPM> Enable-Migrations\n\nChecking if the context targets an existing database...\nCode First Migrations enabled for project WebApplication2.\n\nPM> Add-Migration Initial\n\nScaffolding migration 'Initial'.\nThe Designer Code for this migration file includes a snapshot of your current Code First model. This snapshot is used to calculate the changes to your model when you scaffold the next migration. If you make additional changes to your model that you want to include in this migration, then you can re-scaffold it by running 'Add-Migration Initial' again.\n\nPM> Update-Database -Verbose\n```\n\n# \u5b9f\u884c\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u306e\u8ffd\u52a0\u3068\u30ed\u30b0\u30a4\u30f3\u304c\u3067\u304d\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u4f5c\u6210\u6642\u306b\u7528\u610f\u3055\u308c\u308b\u30b5\u30f3\u30d7\u30eb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u5b9f\u884c\u3057\u3001Register \u3057\u305f\u308a Log off / Log in \u3057\u305f\u308a\u3057\u3066\u307f\u308b\u3002\n\n\u30c6\u30fc\u30d6\u30eb EFTEST.AspNetUsers \u306b\u30ec\u30b3\u30fc\u30c9\u304c\u4f5c\u6210\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u3092\u78ba\u8a8d\u3059\u308b\u3002\n\n```sql\nselect * from \"AspNetUsers\";\n```\n\n# \u30de\u30a4\u30b0\u30ec\u30fc\u30b7\u30e7\u30f3\u3092\u6700\u521d\u304b\u3089\u3084\u308a\u76f4\u3057\u305f\u3044\u5834\u5408\n\n__MigrationHistory \u3068\u3044\u3046\u30c6\u30fc\u30d6\u30eb\u3068\u3001AspNet\u3067\u59cb\u307e\u308b\u540d\u524d\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\uff08\u30c6\u30fc\u30d6\u30eb\u3084\u9806\u5e8f\uff09\u3092 DROP \u3059\u308b\u3002\n\n```sql:\u524a\u9664\u5bfe\u8c61\u3092\u6d17\u3044\u51fa\u3059SQL\u6587\nselect * from user_objects where object_name like '%Asp%' order by object_name;\n```\n\n```sql:\u7d50\u679c\u7684\u306b\u5b9f\u884c\u3057\u305fDROP\u6587\ndrop table \"__MigrationHistory\";\n-- \u2193\u5916\u90e8\u30ad\u30fc\u306e\u53c2\u7167\u304c\u3042\u308b\u305f\u3081\u9806\u756a\u3092\u5165\u308c\u66ff\u3048\u3066\u5b9f\u884c\u3057\u307e\u3059\u3002\ndrop table \"AspNetUserClaims\";\ndrop table \"AspNetUserRoles\";\ndrop table \"AspNetUserLogins\";\ndrop table \"AspNetUsers\";\ndrop table \"AspNetRoles\";\ndrop sequence \"SQ_AspNetUserClaims\";\n```\n", "tags": ["ASP.NET", "ASP.NET_Identity", "EntityFramework", "oracle"]}