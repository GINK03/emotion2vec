{"context": "TOPPERS/EV3RT\u74b0\u5883\u3067C\u8a00\u8a9e\u3092\u4f7f\u3063\u3066\u3001\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n\u74b0\u5883\u958b\u767a\u306e\u8a18\u4e8b\u306f\u3053\u3061\u3089\n\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u672c\u4f53\u306b\u3064\u306a\u3050\n\n\u4e0a\u306e\u753b\u50cf\u306e\u3088\u3046\u306b\u63a5\u7d9a\u3057\u307e\u3057\u305f\u3002\u30dd\u30fc\u30c81\u306b\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u3001\u30dd\u30fc\u30c8A\u306bL\u30e2\u30fc\u30bf\u30fc\u3092\u63a5\u7d9a\u3057\u307e\u3057\u305f\u3002\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u306e\u52d5\u304d\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3044\u3044\u306e\u3067\u3001\u62bc\u3057\u3066\u3044\u308b\u9593\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u8ee2\u3059\u308b\u3082\u306e\u3092\u4f5c\u308a\u307e\u3059\u3002\u540d\u524d\u306ftouch-test\u306b\u3059\u308b\u3068\u3057\u3066\u3001\u524d\u56de\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u3001\u672c\u4f53\u306e\u30a8\u30f3\u30bf\u30fc\u30dc\u30bf\u30f3\u306e\u4ee3\u308f\u308a\u306b\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u7528\u3044\u308b\u3060\u3051\u3067\u51fa\u6765\u4e0a\u304c\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001cp -r motor-test touch-test\u3067\u3001motor-test\u306e\u4e2d\u8eab\u3092\u4e38\u3054\u3068\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n\u3055\u3066\u3001\u4eca\u5ea6\u306f\u4e2d\u8eab\u306e\u7de8\u96c6\u3067\u3059\u3002main.c\u306e\u4e2d\u8eab\u3092\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\nmain.c\n\n/**\n ******************************************************************************\n ** \u30d5\u30a1\u30a4\u30eb\u540d   : app.c\n ** \u8aac\u660e       : \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u62bc\u3057\u3066\u308b\u9593\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u308b \n ******************************************************************************\n **/\n\n#include \"ev3api.h\"\n#include \"app.h\"\n\n#if defined(BUILD_MODULE)\n#include \"module_cfg.h\"\n#else\n#include \"kernel_cfg.h\"\n#endif\n\n#define DEBUG\n\n#ifdef DEBUG\n#define _debug(x) (x)\n#else\n#define _debug(x)\n#endif\n\n/* \u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a */\nstatic const motor_port_t\n    L_motor      = EV3_PORT_A;\n\n/* \u30bb\u30f3\u30b5\u30fc\u306e\u8a2d\u5b9a */\nstatic const sensor_port_t\n    touch_sensor = EV3_PORT_1;\n\n/* \u30e1\u30a4\u30f3\u30bf\u30b9\u30af */\nvoid main_task(intptr_t unused)\n{\n    /* \u30eb\u30fc\u30d7\u306b\u5165\u3063\u3066\u3057\u307e\u3046\u524d\u306b\u30e2\u30fc\u30bf\u30fc\u3068\u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n    ev3_motor_config (L_motor, LARGE_MOTOR);\n    /* \u540c\u3058\u304f\u30bb\u30f3\u30b5\u30fc\u3068\u30bb\u30f3\u30b5\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n    ev3_sensor_config (touch_sensor, TOUCH_SENSOR);\n    ev3_led_set_color(LED_ORANGE); \n    /* \u30eb\u30fc\u30d7\u306e\u4e2d\u306b\u5165\u308b */\n    while(1)\n    {   /* \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u9593\u3068\u305d\u3046\u3067\u306a\u3044\u3068\u304d\u3067\u51e6\u7406\u3092\u5206\u3051\u308b */\n        if(ev3_touch_sensor_is_pressed(touch_sensor) == true){\n            /* L\u30e2\u30fc\u30bf\u30fc\u3092\u6700\u5927\u30d1\u30ef\u30fc\u3067\u56de\u3059 */\n            ev3_motor_set_power(L_motor,100);\n        }else{\n            /* L\u30e2\u30fc\u30bf\u30fc\u3092\u6b62\u3081\u308b */\n            ev3_motor_stop(L_motor, false);\n        }\n    }\n    ev3_motor_stop(L_motor, false);\n    ext_tsk();\n}\n\n\n\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u9593\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u8ee2\u3057\u3001\u96e2\u3059\u3068\u6b62\u307e\u308b\u3068\u3044\u3046\u5185\u5bb9\u3067\u3059\u3002\n\u3053\u306e\u4ed6\u306b\u3082\u3001\u66f8\u304d\u65b9\u6b21\u7b2c\u3067\u30c8\u30b0\u30eb\u64cd\u4f5c\u306b\u5207\u308a\u66ff\u3048\u305f\u308a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3063\u305f\u30c8\u30b0\u30eb\u64cd\u4f5c\n\u30c8\u30b0\u30eb\u64cd\u4f5c\u3068\u306f:\n\u5bb6\u96fb\u88fd\u54c1\u306e\u96fb\u6e90\u30dc\u30bf\u30f3\u3092\u30a4\u30e1\u30fc\u30b8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u8d77\u52d5\u3057\u3001\u6b21\u306b\u62bc\u3059\u3068\u52d5\u4f5c\u304c\u7d42\u4e86\u3057\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u3001\u540c\u4e00\u306e\u64cd\u4f5c\u306b\u3088\u308a\u5185\u90e8\u306e\u72b6\u614b\u3092\u5207\u308a\u66ff\u3048\u308b\u64cd\u4f5c\u3092\u30c8\u30b0\u30eb\u64cd\u4f5c\u3068\u3044\u3044\u307e\u3059\u3002\nOn/Off\u306e\u5207\u308a\u66ff\u3048\u304c\u6700\u3082\u591a\u3044\u3067\u3059\u306d\u3002\u5148\u307b\u3069\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6539\u826f\u3057\u3001\u30c8\u30b0\u30eb\u64cd\u4f5c\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\nmain.c\n\n/**\n ******************************************************************************\n ** \u30d5\u30a1\u30a4\u30eb\u540d   : app.c\n ** \u8aac\u660e       : \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3044\u30c8\u30b0\u30eb\u64cd\u4f5c\u3067\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u308b \n ******************************************************************************\n **/\n\n#include \"ev3api.h\"\n#include \"app.h\"\n\n#if defined(BUILD_MODULE)\n#include \"module_cfg.h\"\n#else\n#include \"kernel_cfg.h\"\n#endif\n\n#define DEBUG\n\n#ifdef DEBUG\n#define _debug(x) (x)\n#else\n#define _debug(x)\n#endif\n/* \u30d5\u30e9\u30b0ON\u3068OFF\u306e\u30de\u30af\u30ed\u5b9a\u7fa9 */\n#define ON 1\n#define OFF 0\n/* \u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a */\nstatic const motor_port_t\n    L_motor      = EV3_PORT_A;\n\n/* \u30bb\u30f3\u30b5\u30fc\u306e\u8a2d\u5b9a */\nstatic const sensor_port_t\n    touch_sensor = EV3_PORT_1;\n\n/* \u95a2\u6570\u306e\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u5ba3\u8a00 */\nvoid toggle_control(void);\n\n/* \u5927\u57df\u5909\u6570\u3067\u30d5\u30e9\u30b0\u3092\u5b9a\u7fa9 */\nstatic int flag = 0;\n/* \u30e1\u30a4\u30f3\u30bf\u30b9\u30af */\nvoid main_task(intptr_t unused)\n{\n    /* \u30eb\u30fc\u30d7\u306b\u5165\u3063\u3066\u3057\u307e\u3046\u524d\u306b\u30e2\u30fc\u30bf\u30fc\u3068\u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n    ev3_motor_config (L_motor, LARGE_MOTOR);\n    /* \u540c\u3058\u304f\u30bb\u30f3\u30b5\u30fc\u3068\u30bb\u30f3\u30b5\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n    ev3_sensor_config (touch_sensor, TOUCH_SENSOR);\n    ev3_led_set_color(LED_ORANGE); \n    /* \u30eb\u30fc\u30d7\u306e\u4e2d\u306b\u5165\u308b */\n    while(1)\n    {   /* \u30c8\u30b0\u30eb\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059 */\n        toggle_control();\n        /* \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u9593\u3068\u305d\u3046\u3067\u306a\u3044\u3068\u304d\u3067\u51e6\u7406\u3092\u5206\u3051\u308b */\n        /* \u30d5\u30e9\u30b0ON\u3067\u30e2\u30fc\u30bf\u30fc\u99c6\u52d5\u3001OFF\u3067\u52d5\u4f5c\u505c\u6b62 */\n        if(flag == OFF){\n            ev3_motor_set_power(L_motor, 0);\n        }else{\n            ev3_motor_set_power(L_motor, 100);\n        }\n    }\n    ev3_motor_stop(L_motor, false);\n    ext_tsk();\n}\n\n/* \u30c8\u30b0\u30eb\u64cd\u4f5c\u306e\u95a2\u6570 */\nvoid toggle_control()\n{\n    /* \u30dc\u30bf\u30f3\u306e\u73fe\u5728\u3068\u76f4\u524d\u306e\u72b6\u614b\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570 */\n    static int now = 0;\n    static int before = 0;\n\n    /* \u30dc\u30bf\u30f3\u306e\u73fe\u5728\u5024\u3092\u8a18\u9332\u3059\u308b */\n    now = ev3_touch_sensor_is_pressed(touch_sensor);\n    /* \u76f4\u524d\u306e\u30dc\u30bf\u30f3\u306e\u72b6\u614b\u3068\u73fe\u5728\u306e\u30dc\u30bf\u30f3\u306e\u72b6\u614b\u3092\u6bd4\u8f03\u3057\u3001\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u77ac\u9593\u306b\u6761\u4ef6\u306e\u306a\u304b\u306b\u5165\u308b */\n    if(now == 1 && before == 0){ /*\u524d\u56de\u306e\u30bf\u30b9\u30af\u5468\u671f\u3067\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u4eca\u56de\u306e\u30bf\u30b9\u30af\u5468\u671f\u3067\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u3068\u304d(\u7acb\u3061\u4e0a\u304c\u308a\u5224\u5b9a) */\n        /* \u30d5\u30e9\u30b0\u5909\u6570\u306e\u72b6\u614b\u306b\u5fdc\u3058\u3066\u30d5\u30e9\u30b0\u5909\u6570\u306eON\u3068OFF\u3092\u5207\u308a\u66ff\u3048\u308b */\n        if(flag == OFF){\n            flag = ON;\n        }else{\n            flag = OFF;\n        }\n    }\n    /* \u95a2\u6570\u306e\u7d42\u308f\u308a\u306b\u73fe\u5728\u5024\u3092\u904e\u53bb\u5024\u5909\u6570\u306b\u4ee3\u5165\u3059\u308b */\n    before = now;\n}\n\n\n\n\u3053\u308c\u3067\u30c8\u30b0\u30eb\u64cd\u4f5c\u304c\u5b9f\u88c5\u3055\u308c\u307e\u3057\u305f\u3002\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u62bc\u3059\u3068\u52d5\u4f5c\u3068\u505c\u6b62\u306e\u5207\u308a\u66ff\u3048\u304c\u3067\u304d\u307e\u3059\u3002\ntoggle_control()\u306eif\u6587\u306e\u3042\u305f\u308a\u304c\u30df\u30bd\u3067\u3059\u3002EV3\u306f\u3001\u5b9a\u3081\u3089\u308c\u305f\u30bf\u30b9\u30af\u5468\u671f\u306b\u5f93\u3063\u3066\u7e70\u308a\u8fd4\u3057\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u30021\u5468\u671f\u3042\u305f\u308a\u306f\u4eba\u9593\u306b\u3068\u3063\u3066\u306f\u4e00\u77ac\u3067\u3059\u304c\u3001EV3\u306e\u4e2d\u3067\u306f\u3057\u3063\u304b\u308a\u3068\u305d\u306e\u6642\u9593\u306e\u4e2d\u3067\u51e6\u7406\u3092\u884c\u3048\u307e\u3059\u3002(LCD\u8868\u793a\u306a\u3069\u306e\u91cd\u3044\u51e6\u7406\u3092\u7e70\u308a\u8fd4\u3055\u305b\u308b\u5834\u5408\u306f\u4f8b\u5916\u3067\u3059\u304c)\u305d\u306e\u8d85\u9ad8\u901f\u306a\u5468\u671f\u3067\u52d5\u3044\u3066\u3044\u308b\u9593\u3067\u3001\u4eba\u9593\u306b\u3068\u3063\u3066\u306e\u611f\u899a\u3067\u4e00\u77ac\u3060\u3051\u3001\u30bf\u30c3\u30c1\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\u5468\u671f\u56de\u6570\u3092\u6a2a\u8ef8\u3001\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u306e\u8fd4\u308a\u5024\u3092\u7e26\u8ef8\u3068\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u30b0\u30e9\u30d5\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u304b\u3089\u96e2\u3055\u308c\u308b\u307e\u3067\u306e\u9593\u306b\u3082\u5468\u671f\u306f\u4f55\u5468\u304b\u3059\u308b\u305f\u3081\u3001\u30b0\u30e9\u30d5\u306f0\u304c\u7d9a\u304f\u533a\u9593\u30010\u304b\u30891\u306b\u306a\u308b\u77ac\u9593\u30011\u304c\u7d9a\u304f\u533a\u9593\u30011\u304b\u30890\u306b\u306a\u308b\u77ac\u9593\u306b\u5206\u3051\u3089\u308c\u307e\u3059\u3002if\u6587\u306e\u6761\u4ef6\u3067\u306f\u3001\u8d64\u3044\u4e38\u3067\u56f2\u3063\u305f\u3001\"0\u304b\u30891\u306b\u5909\u308f\u308b\u77ac\u9593\"\u3092\u3068\u3089\u3048\u3066\u3001\u30e2\u30fc\u30bf\u30fc\u306eON/OFF\u3092\u5207\u308a\u66ff\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u306e0\u304b\u30891\u306b\u306a\u3063\u305f\u77ac\u9593\u3092\u5224\u5b9a\u3059\u308b\u3053\u3068\u3092\u7acb\u3061\u4e0a\u304c\u308a\u5224\u5b9a\u3068\u3044\u3044\u3001\u9006\u306b1\u304b\u30890\u306b\u306a\u3063\u305f\u77ac\u9593\u3092\u5224\u5b9a\u3059\u308b\u3053\u3068\u306f\u7acb\u4e0b\u308a\u5224\u5b9a\u3068\u3044\u3044\u307e\u3059\u3002if\u6587\u306e\u6761\u4ef6\u3092\u3001now == 0 && before == 1\u306b\u3059\u308b\u3060\u3051\u3067\u7acb\u4e0b\u308a\u5224\u5b9a\u306b\u3082\u3067\u304d\u308b\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\nTOPPERS/EV3RT\u74b0\u5883\u3067C\u8a00\u8a9e\u3092\u4f7f\u3063\u3066\u3001\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3063\u3066\u307f\u307e\u3059\u3002\n[\u74b0\u5883\u958b\u767a\u306e\u8a18\u4e8b\u306f\u3053\u3061\u3089](http://qiita.com/tkzw102/items/93dd959cccf2efc8d4a6)\n#\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u672c\u4f53\u306b\u3064\u306a\u3050\n\n![touch_sensor.png](https://qiita-image-store.s3.amazonaws.com/0/152243/a09a5774-9bd8-861e-2a74-29578404e8fe.png)\n\n\n\u4e0a\u306e\u753b\u50cf\u306e\u3088\u3046\u306b\u63a5\u7d9a\u3057\u307e\u3057\u305f\u3002\u30dd\u30fc\u30c81\u306b\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u3001\u30dd\u30fc\u30c8A\u306bL\u30e2\u30fc\u30bf\u30fc\u3092\u63a5\u7d9a\u3057\u307e\u3057\u305f\u3002\n\n#\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\u3059\u308b\n\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u306e\u52d5\u304d\u304c\u78ba\u8a8d\u3067\u304d\u308c\u3070\u3044\u3044\u306e\u3067\u3001\u62bc\u3057\u3066\u3044\u308b\u9593\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u8ee2\u3059\u308b\u3082\u306e\u3092\u4f5c\u308a\u307e\u3059\u3002\u540d\u524d\u306ftouch-test\u306b\u3059\u308b\u3068\u3057\u3066\u3001[\u524d\u56de](http://qiita.com/tkzw102/private/e05ef4266fbddbc4b56d)\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u3001\u672c\u4f53\u306e\u30a8\u30f3\u30bf\u30fc\u30dc\u30bf\u30f3\u306e\u4ee3\u308f\u308a\u306b\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u7528\u3044\u308b\u3060\u3051\u3067\u51fa\u6765\u4e0a\u304c\u3063\u3066\u3057\u307e\u3046\u306e\u3067\u3001`cp -r motor-test touch-test`\u3067\u3001motor-test\u306e\u4e2d\u8eab\u3092\u4e38\u3054\u3068\u30b3\u30d4\u30fc\u3057\u307e\u3059\u3002\n\n<img width=\"237\" alt=\"cpapp.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/152243/d5e16012-54e7-0c33-9713-38d9cd32e0e1.png\">\n\n\u3055\u3066\u3001\u4eca\u5ea6\u306f\u4e2d\u8eab\u306e\u7de8\u96c6\u3067\u3059\u3002main.c\u306e\u4e2d\u8eab\u3092\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```C:main.c\n\n/**\n ******************************************************************************\n ** \u30d5\u30a1\u30a4\u30eb\u540d   : app.c\n ** \u8aac\u660e       : \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u62bc\u3057\u3066\u308b\u9593\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u308b \n ******************************************************************************\n **/\n\n#include \"ev3api.h\"\n#include \"app.h\"\n\n#if defined(BUILD_MODULE)\n#include \"module_cfg.h\"\n#else\n#include \"kernel_cfg.h\"\n#endif\n\n#define DEBUG\n\n#ifdef DEBUG\n#define _debug(x) (x)\n#else\n#define _debug(x)\n#endif\n\n/* \u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a */\nstatic const motor_port_t\n    L_motor      = EV3_PORT_A;\n\n/* \u30bb\u30f3\u30b5\u30fc\u306e\u8a2d\u5b9a */\nstatic const sensor_port_t\n    touch_sensor = EV3_PORT_1;\n\n/* \u30e1\u30a4\u30f3\u30bf\u30b9\u30af */\nvoid main_task(intptr_t unused)\n{\n\t/* \u30eb\u30fc\u30d7\u306b\u5165\u3063\u3066\u3057\u307e\u3046\u524d\u306b\u30e2\u30fc\u30bf\u30fc\u3068\u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n\tev3_motor_config (L_motor, LARGE_MOTOR);\n    /* \u540c\u3058\u304f\u30bb\u30f3\u30b5\u30fc\u3068\u30bb\u30f3\u30b5\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n    ev3_sensor_config (touch_sensor, TOUCH_SENSOR);\n    ev3_led_set_color(LED_ORANGE); \n    /* \u30eb\u30fc\u30d7\u306e\u4e2d\u306b\u5165\u308b */\n    while(1)\n    {   /* \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u9593\u3068\u305d\u3046\u3067\u306a\u3044\u3068\u304d\u3067\u51e6\u7406\u3092\u5206\u3051\u308b */\n    \tif(ev3_touch_sensor_is_pressed(touch_sensor) == true){\n    \t\t/* L\u30e2\u30fc\u30bf\u30fc\u3092\u6700\u5927\u30d1\u30ef\u30fc\u3067\u56de\u3059 */\n\t\t\tev3_motor_set_power(L_motor,100);\n\t\t}else{\n            /* L\u30e2\u30fc\u30bf\u30fc\u3092\u6b62\u3081\u308b */\n\t\t\tev3_motor_stop(L_motor, false);\n\t\t}\n    }\n    ev3_motor_stop(L_motor, false);\n    ext_tsk();\n}\n\n```\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u9593\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u8ee2\u3057\u3001\u96e2\u3059\u3068\u6b62\u307e\u308b\u3068\u3044\u3046\u5185\u5bb9\u3067\u3059\u3002\n\n\u3053\u306e\u4ed6\u306b\u3082\u3001\u66f8\u304d\u65b9\u6b21\u7b2c\u3067\u30c8\u30b0\u30eb\u64cd\u4f5c\u306b\u5207\u308a\u66ff\u3048\u305f\u308a\u3059\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n#\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3063\u305f\u30c8\u30b0\u30eb\u64cd\u4f5c\n\n\u30c8\u30b0\u30eb\u64cd\u4f5c\u3068\u306f:\n\u5bb6\u96fb\u88fd\u54c1\u306e\u96fb\u6e90\u30dc\u30bf\u30f3\u3092\u30a4\u30e1\u30fc\u30b8\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u8d77\u52d5\u3057\u3001\u6b21\u306b\u62bc\u3059\u3068\u52d5\u4f5c\u304c\u7d42\u4e86\u3057\u307e\u3059\u3002\n\u3053\u306e\u3088\u3046\u306b\u3001**\u540c\u4e00\u306e\u64cd\u4f5c\u306b\u3088\u308a\u5185\u90e8\u306e\u72b6\u614b\u3092\u5207\u308a\u66ff\u3048\u308b\u64cd\u4f5c**\u3092\u30c8\u30b0\u30eb\u64cd\u4f5c\u3068\u3044\u3044\u307e\u3059\u3002\nOn/Off\u306e\u5207\u308a\u66ff\u3048\u304c\u6700\u3082\u591a\u3044\u3067\u3059\u306d\u3002\u5148\u307b\u3069\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u6539\u826f\u3057\u3001\u30c8\u30b0\u30eb\u64cd\u4f5c\u3092\u5b9f\u88c5\u3057\u307e\u3059\u3002\n\n```C:main.c\n\n/**\n ******************************************************************************\n ** \u30d5\u30a1\u30a4\u30eb\u540d   : app.c\n ** \u8aac\u660e       : \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u4f7f\u3044\u30c8\u30b0\u30eb\u64cd\u4f5c\u3067\u30e2\u30fc\u30bf\u30fc\u304c\u56de\u308b \n ******************************************************************************\n **/\n\n#include \"ev3api.h\"\n#include \"app.h\"\n\n#if defined(BUILD_MODULE)\n#include \"module_cfg.h\"\n#else\n#include \"kernel_cfg.h\"\n#endif\n\n#define DEBUG\n\n#ifdef DEBUG\n#define _debug(x) (x)\n#else\n#define _debug(x)\n#endif\n/* \u30d5\u30e9\u30b0ON\u3068OFF\u306e\u30de\u30af\u30ed\u5b9a\u7fa9 */\n#define ON 1\n#define OFF 0\n/* \u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u306e\u8a2d\u5b9a */\nstatic const motor_port_t\n    L_motor      = EV3_PORT_A;\n\n/* \u30bb\u30f3\u30b5\u30fc\u306e\u8a2d\u5b9a */\nstatic const sensor_port_t\n    touch_sensor = EV3_PORT_1;\n\n/* \u95a2\u6570\u306e\u30d7\u30ed\u30c8\u30bf\u30a4\u30d7\u5ba3\u8a00 */\nvoid toggle_control(void);\n\n/* \u5927\u57df\u5909\u6570\u3067\u30d5\u30e9\u30b0\u3092\u5b9a\u7fa9 */\nstatic int flag = 0;\n/* \u30e1\u30a4\u30f3\u30bf\u30b9\u30af */\nvoid main_task(intptr_t unused)\n{\n\t/* \u30eb\u30fc\u30d7\u306b\u5165\u3063\u3066\u3057\u307e\u3046\u524d\u306b\u30e2\u30fc\u30bf\u30fc\u3068\u30e2\u30fc\u30bf\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n\tev3_motor_config (L_motor, LARGE_MOTOR);\n    /* \u540c\u3058\u304f\u30bb\u30f3\u30b5\u30fc\u3068\u30bb\u30f3\u30b5\u30fc\u30dd\u30fc\u30c8\u3092\u63a5\u7d9a\u3059\u308b */\n    ev3_sensor_config (touch_sensor, TOUCH_SENSOR);\n    ev3_led_set_color(LED_ORANGE); \n    /* \u30eb\u30fc\u30d7\u306e\u4e2d\u306b\u5165\u308b */\n    while(1)\n    {   /* \u30c8\u30b0\u30eb\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059 */\n    \ttoggle_control();\n        /* \u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u3044\u308b\u9593\u3068\u305d\u3046\u3067\u306a\u3044\u3068\u304d\u3067\u51e6\u7406\u3092\u5206\u3051\u308b */\n        /* \u30d5\u30e9\u30b0ON\u3067\u30e2\u30fc\u30bf\u30fc\u99c6\u52d5\u3001OFF\u3067\u52d5\u4f5c\u505c\u6b62 */\n        if(flag == OFF){\n            ev3_motor_set_power(L_motor, 0);\n        }else{\n            ev3_motor_set_power(L_motor, 100);\n        }\n    }\n    ev3_motor_stop(L_motor, false);\n    ext_tsk();\n}\n\n/* \u30c8\u30b0\u30eb\u64cd\u4f5c\u306e\u95a2\u6570 */\nvoid toggle_control()\n{\n    /* \u30dc\u30bf\u30f3\u306e\u73fe\u5728\u3068\u76f4\u524d\u306e\u72b6\u614b\u3092\u4fdd\u6301\u3059\u308b\u5909\u6570 */\n    static int now = 0;\n    static int before = 0;\n\n    /* \u30dc\u30bf\u30f3\u306e\u73fe\u5728\u5024\u3092\u8a18\u9332\u3059\u308b */\n    now = ev3_touch_sensor_is_pressed(touch_sensor);\n    /* \u76f4\u524d\u306e\u30dc\u30bf\u30f3\u306e\u72b6\u614b\u3068\u73fe\u5728\u306e\u30dc\u30bf\u30f3\u306e\u72b6\u614b\u3092\u6bd4\u8f03\u3057\u3001\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u77ac\u9593\u306b\u6761\u4ef6\u306e\u306a\u304b\u306b\u5165\u308b */\n    if(now == 1 && before == 0){ /*\u524d\u56de\u306e\u30bf\u30b9\u30af\u5468\u671f\u3067\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u3066\u304a\u3089\u305a\u3001\u4eca\u56de\u306e\u30bf\u30b9\u30af\u5468\u671f\u3067\u30dc\u30bf\u30f3\u304c\u62bc\u3055\u308c\u305f\u3068\u304d(\u7acb\u3061\u4e0a\u304c\u308a\u5224\u5b9a) */\n        /* \u30d5\u30e9\u30b0\u5909\u6570\u306e\u72b6\u614b\u306b\u5fdc\u3058\u3066\u30d5\u30e9\u30b0\u5909\u6570\u306eON\u3068OFF\u3092\u5207\u308a\u66ff\u3048\u308b */\n        if(flag == OFF){\n            flag = ON;\n        }else{\n            flag = OFF;\n        }\n    }\n    /* \u95a2\u6570\u306e\u7d42\u308f\u308a\u306b\u73fe\u5728\u5024\u3092\u904e\u53bb\u5024\u5909\u6570\u306b\u4ee3\u5165\u3059\u308b */\n    before = now;\n}\n\n```\n\u3053\u308c\u3067\u30c8\u30b0\u30eb\u64cd\u4f5c\u304c\u5b9f\u88c5\u3055\u308c\u307e\u3057\u305f\u3002\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u3092\u62bc\u3059\u3068\u52d5\u4f5c\u3068\u505c\u6b62\u306e\u5207\u308a\u66ff\u3048\u304c\u3067\u304d\u307e\u3059\u3002\n\ntoggle_control()\u306eif\u6587\u306e\u3042\u305f\u308a\u304c\u30df\u30bd\u3067\u3059\u3002EV3\u306f\u3001\u5b9a\u3081\u3089\u308c\u305f\u30bf\u30b9\u30af\u5468\u671f\u306b\u5f93\u3063\u3066\u7e70\u308a\u8fd4\u3057\u51e6\u7406\u3092\u3057\u3066\u3044\u307e\u3059\u30021\u5468\u671f\u3042\u305f\u308a\u306f\u4eba\u9593\u306b\u3068\u3063\u3066\u306f\u4e00\u77ac\u3067\u3059\u304c\u3001EV3\u306e\u4e2d\u3067\u306f\u3057\u3063\u304b\u308a\u3068\u305d\u306e\u6642\u9593\u306e\u4e2d\u3067\u51e6\u7406\u3092\u884c\u3048\u307e\u3059\u3002(LCD\u8868\u793a\u306a\u3069\u306e\u91cd\u3044\u51e6\u7406\u3092\u7e70\u308a\u8fd4\u3055\u305b\u308b\u5834\u5408\u306f\u4f8b\u5916\u3067\u3059\u304c)\u305d\u306e\u8d85\u9ad8\u901f\u306a\u5468\u671f\u3067\u52d5\u3044\u3066\u3044\u308b\u9593\u3067\u3001\u4eba\u9593\u306b\u3068\u3063\u3066\u306e\u611f\u899a\u3067\u4e00\u77ac\u3060\u3051\u3001\u30bf\u30c3\u30c1\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u305f\u3068\u3057\u307e\u3057\u3087\u3046\u3002\u5468\u671f\u56de\u6570\u3092\u6a2a\u8ef8\u3001\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u306e\u8fd4\u308a\u5024\u3092\u7e26\u8ef8\u3068\u3059\u308b\u3068\u3001\u4ee5\u4e0b\u306e\u30b0\u30e9\u30d5\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n<img width=\"490\" alt=\"toggle-graph.png\" src=\"https://qiita-image-store.s3.amazonaws.com/0/152243/3ee355ee-0612-dbbb-8fc2-8703ecb02a02.png\">\n\n\n\u30bf\u30c3\u30c1\u30bb\u30f3\u30b5\u30fc\u304c\u62bc\u3055\u308c\u3066\u304b\u3089\u96e2\u3055\u308c\u308b\u307e\u3067\u306e\u9593\u306b\u3082\u5468\u671f\u306f\u4f55\u5468\u304b\u3059\u308b\u305f\u3081\u3001\u30b0\u30e9\u30d5\u306f0\u304c\u7d9a\u304f\u533a\u9593\u30010\u304b\u30891\u306b\u306a\u308b\u77ac\u9593\u30011\u304c\u7d9a\u304f\u533a\u9593\u30011\u304b\u30890\u306b\u306a\u308b\u77ac\u9593\u306b\u5206\u3051\u3089\u308c\u307e\u3059\u3002if\u6587\u306e\u6761\u4ef6\u3067\u306f\u3001\u8d64\u3044\u4e38\u3067\u56f2\u3063\u305f\u3001\"0\u304b\u30891\u306b\u5909\u308f\u308b\u77ac\u9593\"\u3092\u3068\u3089\u3048\u3066\u3001\u30e2\u30fc\u30bf\u30fc\u306eON/OFF\u3092\u5207\u308a\u66ff\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u306e0\u304b\u30891\u306b\u306a\u3063\u305f\u77ac\u9593\u3092\u5224\u5b9a\u3059\u308b\u3053\u3068\u3092**\u7acb\u3061\u4e0a\u304c\u308a\u5224\u5b9a**\u3068\u3044\u3044\u3001\u9006\u306b1\u304b\u30890\u306b\u306a\u3063\u305f\u77ac\u9593\u3092\u5224\u5b9a\u3059\u308b\u3053\u3068\u306f**\u7acb\u4e0b\u308a\u5224\u5b9a**\u3068\u3044\u3044\u307e\u3059\u3002if\u6587\u306e\u6761\u4ef6\u3092\u3001`now == 0 && before == 1`\u306b\u3059\u308b\u3060\u3051\u3067\u7acb\u4e0b\u308a\u5224\u5b9a\u306b\u3082\u3067\u304d\u308b\u306e\u3067\u3001\u8a66\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n", "tags": ["C", "TOPPERS", "EV3RT", "ET\u30ed\u30dc\u30b3\u30f3", "EV3"]}