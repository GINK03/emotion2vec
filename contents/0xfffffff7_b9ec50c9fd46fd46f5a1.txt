{"context": " More than 1 year has passed since last update.\n\n\u6982\u8981\n\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u6307\u5b9a\u3092\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u3063\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\u6700\u521d\u306bMX\u30ec\u30b3\u30fc\u30c9\u3092\u5f15\u304f\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5165\u308c\u307e\u3059\u3002\npip install dnspython\n\n\n\u5b9f\u884c\n\u5f15\u6570\u306b\u5b9b\u5148\u3068\u5dee\u51fa\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u6e21\u3059\u3002\npython sendmail.py to@example.com from@example.com\n\n\n\u5b9f\u88c5\nsendmail.py\n# -*- coding: utf-8 -*-\n\nimport smtplib\nfrom email.MIMEText import MIMEText\nfrom email.Header import Header\nfrom email.Utils import formatdate\nimport sys\nimport dns.resolver\n\nif __name__ == \"__main__\":\n\n    argvs = sys.argv\n\n    if len(argvs) != 3:\n        print 'Usage arg1 = to_address, arg2 = from_address'\n        quit()\n\n    to_address   = argvs[1]\n    from_address = argvs[2]\n    to_list = to_address.split('@')\n\n    to_address = '<' + to_address + '>'\n    from_address = '<' + from_address + '>'\n\n    if len(to_list) < 2:\n        print 'format error to_address'\n        quit()\n\n    domain = to_list[1]\n    mailserver = dns.resolver.query(domain, 'MX')\n\n    if len(mailserver) < 1:\n        print 'not found mx recored'\n        quit()\n\n    mailserver = mailserver[0].to_text().split(' ')\n    mailserver = mailserver[1][:-1]\n    print mailserver\n\n    charset = \"ISO-2022-JP\"\n    subject = u\"this is Python test mail!\"\n    text    = u\"this is Python test mail!\"\n\n    msg = MIMEText(text.encode(charset),\"plain\",charset)\n    msg[\"Subject\"] = Header(subject,charset)\n    msg[\"From\"]    = from_address\n    msg[\"To\"]      = to_address\n    msg[\"Date\"]    = formatdate(localtime=True) \n\n    smtp = smtplib.SMTP(mailserver)\n    smtp.sendmail(from_address,to_address,msg.as_string())\n    smtp.close()\n\nGmail\u306f\u30b9\u30d1\u30e0\u5bfe\u7b56\u306a\u306e\u304b\u3001\u306a\u3093\u3089\u304b\u306e\u5236\u9650\u3092\u304b\u3051\u3066\u3044\u308b\u3088\u3046\u3067\u3001\u9001\u4fe1\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\nsmtplib.SMTPServerDisconnected: Connection unexpectedly closed: [Errno 54] Connection reset by peer\n\n#\u6982\u8981\n\n\u30e1\u30fc\u30eb\u30b5\u30fc\u30d0\u30fc\u306e\u6307\u5b9a\u3092\u3057\u306a\u304f\u3066\u3082\u3044\u3044\u30d7\u30ed\u30b0\u30e9\u30e0\u3092\u4f5c\u3063\u3066\u307f\u305f\u304b\u3063\u305f\u306e\u3067\u66f8\u3044\u3066\u307f\u307e\u3057\u305f\u3002\n\n\u6700\u521d\u306bMX\u30ec\u30b3\u30fc\u30c9\u3092\u5f15\u304f\u305f\u3081\u306e\u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u5165\u308c\u307e\u3059\u3002\n\n```\npip install dnspython\n```\n\n#\u5b9f\u884c\n\n\u5f15\u6570\u306b\u5b9b\u5148\u3068\u5dee\u51fa\u4eba\u306e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u6e21\u3059\u3002\n\n```\npython sendmail.py to@example.com from@example.com\n```\n\n#\u5b9f\u88c5\n\nsendmail.py\n\n```\n# -*- coding: utf-8 -*-\n\nimport smtplib\nfrom email.MIMEText import MIMEText\nfrom email.Header import Header\nfrom email.Utils import formatdate\nimport sys\nimport dns.resolver\n\nif __name__ == \"__main__\":\n\n    argvs = sys.argv\n\n    if len(argvs) != 3:\n        print 'Usage arg1 = to_address, arg2 = from_address'\n        quit()\n\n    to_address   = argvs[1]\n    from_address = argvs[2]\n    to_list = to_address.split('@')\n\n    to_address = '<' + to_address + '>'\n    from_address = '<' + from_address + '>'\n\n    if len(to_list) < 2:\n        print 'format error to_address'\n        quit()\n\n    domain = to_list[1]\n    mailserver = dns.resolver.query(domain, 'MX')\n\n    if len(mailserver) < 1:\n        print 'not found mx recored'\n        quit()\n\n    mailserver = mailserver[0].to_text().split(' ')\n    mailserver = mailserver[1][:-1]\n    print mailserver\n\n    charset = \"ISO-2022-JP\"\n    subject = u\"this is Python test mail!\"\n    text    = u\"this is Python test mail!\"\n\n    msg = MIMEText(text.encode(charset),\"plain\",charset)\n    msg[\"Subject\"] = Header(subject,charset)\n    msg[\"From\"]    = from_address\n    msg[\"To\"]      = to_address\n    msg[\"Date\"]    = formatdate(localtime=True) \n\n    smtp = smtplib.SMTP(mailserver)\n    smtp.sendmail(from_address,to_address,msg.as_string())\n    smtp.close()\n```\n\n\nGmail\u306f\u30b9\u30d1\u30e0\u5bfe\u7b56\u306a\u306e\u304b\u3001\u306a\u3093\u3089\u304b\u306e\u5236\u9650\u3092\u304b\u3051\u3066\u3044\u308b\u3088\u3046\u3067\u3001\u9001\u4fe1\u3059\u308b\u3068\u4e0b\u8a18\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\n\n```\nsmtplib.SMTPServerDisconnected: Connection unexpectedly closed: [Errno 54] Connection reset by peer\n```\n", "tags": ["Python", "\u30e1\u30fc\u30eb\u9001\u4fe1", "SMTP"]}