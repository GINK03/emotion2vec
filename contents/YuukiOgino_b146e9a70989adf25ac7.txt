{"context": "Flash\u306eStage3D\u3067Spine\u304c\u52d5\u304f\u306e\u304b\u691c\u8a3c\u3057\u307e\u3057\u305f\u3002\n\u691c\u8a3c\u306b\u3042\u305f\u308a\u3001kikkisnrdec\u69d8\u306ekikki's tech note\u306b\u8a18\u8f09\u3055\u308c\u305fSpine\u3092Action Script(Flash)\u3067\u4f7f\u3063\u3066\u307f\u305f\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\n\u65e9\u901fStage3\uff24\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\u3092\u884c\u3044\u307e\u3059\u3002\n\nSpine\u30e9\u30a4\u30d6\u30e9\u30ea\nSpine\u516c\u5f0f\u30b5\u30a4\u30c8\u3088\u308a\u3001\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u305f\u304f\u3055\u3093\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u4e2d\u3001\u5fc5\u8981\u306a\u306e\u306f\u4ee5\u4e0b\u306e\u4e8c\u3064\u3067\u3059\n\u30fbspine-as3\n\u30fbspine-starling\n\nStarling\u30e9\u30a4\u30d6\u30e9\u30ea\n\u4eca\u56de\u4f7f\u7528\u3057\u305fStarling\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.7\u3067\u3059\u3002\n\nSpine\u30c7\u30fc\u30bf\nSpine\u518d\u751f\u306b\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306f\u4ee5\u4e0b\u306e\u4e09\u3064\u3067\u3059\n\u30fbatlas\n\u30fbjson or anim\n\u30fbpng\n\u305f\u3060\u8868\u793a\u3059\u308b\u3060\u3051\u306a\u3089json\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8868\u793a\uff08\u518d\u751f\uff09\u3057\u305f\u3044\u5834\u5408\u306fanim\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\nSWF\u306b\u57cb\u3081\u8fbc\u3080\u306a\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u306b\u7f6e\u304f\u306a\u308a\u3057\u3066spine\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3081\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u3053\u308c\u3067\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\n\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u3067\u3059\u3002\n\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u306fspine\u30c7\u30fc\u30bf\u304c\u30b5\u30fc\u30d0\u30fc\u306b\u914d\u7f6e\u3057\u3066\u3042\u308b\u3068\u4eee\u5b9a\u3057\u3066\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\nSpineCharacterComponent\n    /**\n     * Spine\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n     * \n     * @author ogino\n     */\n    public class SpineCharacterComponent extends Sprite \n    {\n\n        //-----------------------------------------------------\n        //\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n        //-----------------------------------------------------         \n\n        /** \u30b9\u30b1\u30eb\u30c8\u30f3\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3 */\n        private var skeleton:SkeletonAnimation;\n\n        /** \u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u753b\u50cf */\n        private var image:Bitmap;\n\n        /** \u30c6\u30af\u30b9\u30c1\u30e3\u30fc */\n        private var texture:Texture;\n\n        /** \u30a2\u30bf\u30c3\u30c1\u30e1\u30f3\u30c8\u30ed\u30fc\u30c0\u30fc */\n        private var attachmentLoader:AttachmentLoader;      \n\n        //-----------------------------------------------------\n        //\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n        //-----------------------------------------------------         \n\n        /**\n         * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n         */\n        public function SpineCharacterComponent() \n        {\n            loadSpine();\n        }\n\n        //-----------------------------------------------------\n        //\u30e1\u30bd\u30c3\u30c9\n        //-----------------------------------------------------         \n\n        /**\n         * Spine\u30c7\u30fc\u30bf\u3092\u30ed\u30fc\u30c9\n         */\n        public function loadSpine():void \n        {\n\n            var loader:Loader = new Loader();\n            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, textureLoadComplete);\n            var assetUrl:String = \"\u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\uff35\uff32\uff2c(png\u30d5\u30a1\u30a4\u30eb\uff09\";\n            loader.load(new URLRequest(assetUrl), new LoaderContext());         \n        }\n\n        /**\n         * \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n         * \n         * @param   name\n         */\n        public function animationPlay(name:String):void \n        {\n            skeleton.state.setAnimationByName(0, name, true);\n        }\n\n        //-----------------------------------------------------\n        //\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n        //-----------------------------------------------------         \n\n        /**\n         * \u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u30ed\u30fc\u30c9\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n         * \n         * @param   e\n         */\n        private function textureLoadComplete(e:Event):void \n        {\n            LoaderInfo(e.currentTarget).removeEventListener(Event.COMPLETE, textureLoadComplete);\n\n            // \u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u306b\u5909\u63db\n            image = Bitmap(LoaderInfo(e.currentTarget).content);\n            texture = Texture.fromBitmap(image);\n\n            // atlas\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n            var loader:URLLoader = new URLLoader();\n            loader.addEventListener(Event.COMPLETE, atlasLoadComplete);\n            var assetUrl:String = \"atlas\u30d5\u30a1\u30a4\u30eb\u306e\uff35\uff32\uff2c\";\n            loader.load(new URLRequest(assetUrl));          \n        }\n\n        /**\n         * \u30a2\u30c8\u30e9\u30b9\u30ed\u30fc\u30c9\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n         * \n         * @param   e\n         */\n        private function atlasLoadComplete(e:Event):void \n        {\n            URLLoader(e.currentTarget).removeEventListener(Event.COMPLETE, atlasLoadComplete);\n\n            var spineAtlas:Atlas = new Atlas(URLLoader(e.currentTarget).data, new StarlingTextureLoader(image));\n            attachmentLoader = new AtlasAttachmentLoader(spineAtlas);\n\n            // anim\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n            var loader:URLLoader = new URLLoader();\n            loader.addEventListener(Event.COMPLETE, animLoadComplete);\n            var animUrl:String = \"anim\u30d5\u30a1\u30a4\u30eb\u306e\uff35\uff32\uff2c\";\n            loader.load(new URLRequest(animUrl));                   \n        }\n\n        /**\n         * \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n         * \n         * @param   e\n         */\n        private function animLoadComplete(e:Event):void \n        {\n            URLLoader(e.currentTarget).removeEventListener(Event.COMPLETE, animLoadComplete);\n\n            var json:SkeletonJson  = new SkeletonJson(attachmentLoader);\n            var skeletonData:SkeletonData = json.readSkeletonData(URLLoader(e.currentTarget).data);\n            var stateData:AnimationStateData = new AnimationStateData(skeletonData);\n\n            // Spine\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n            skeleton = new SkeletonAnimation(skeletonData, false, stateData);\n\n            // \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u518d\u751f\u3000\u3053\u3053\u3067\u306fwait\u3068\u3044\u3046\u540d\u524d\u3092\u6307\u5b9a\n            animationPlay(\"wait\");\n\n            // Stage3D\u306bSpine\u63cf\u753b\n            addChild(skeleton);\n            Starling.juggler.add(skeleton);         \n        }   \n\n    }\n\n\n\u3053\u308c\u3067Spine\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u518d\u751f\u3055\u308c\u307e\u3059\u3002\n\u4e88\u60f3\u4ee5\u4e0a\u306b\u7c21\u5358\u306b\u5b9f\u88c5\u3067\u304d\u307e\u3057\u305f\u3002\nStage3D\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u304a\u304b\u3052\u3067\u975e\u5e38\u306b\u697d\u306bSpine\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\nFlash\u306eStage3D\u3067Spine\u304c\u52d5\u304f\u306e\u304b\u691c\u8a3c\u3057\u307e\u3057\u305f\u3002\n\n\u691c\u8a3c\u306b\u3042\u305f\u308a\u3001kikkisnrdec\u69d8\u306ekikki's tech note\u306b\u8a18\u8f09\u3055\u308c\u305f[Spine\u3092Action Script(Flash)\u3067\u4f7f\u3063\u3066\u307f\u305f](http://kikki.hatenablog.com/entry/2015/06/17/171749)\u3092\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u304d\u307e\u3057\u305f\u3002\n\n#\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\n\n\u65e9\u901fStage3\uff24\u3067\u4f7f\u7528\u3059\u308b\u305f\u3081\u306e\u6e96\u5099\u3092\u884c\u3044\u307e\u3059\u3002\n\n##Spine\u30e9\u30a4\u30d6\u30e9\u30ea\n\nSpine\u516c\u5f0f\u30b5\u30a4\u30c8\u3088\u308a\u3001[\u30e9\u30a4\u30d6\u30e9\u30ea](https://github.com/EsotericSoftware/spine-runtimes)\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002\n\u305f\u304f\u3055\u3093\u306e\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u4e2d\u3001\u5fc5\u8981\u306a\u306e\u306f\u4ee5\u4e0b\u306e\u4e8c\u3064\u3067\u3059\n\n\u30fbspine-as3\n\u30fbspine-starling\n\n##Starling\u30e9\u30a4\u30d6\u30e9\u30ea\n\n\u4eca\u56de\u4f7f\u7528\u3057\u305fStarling\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306f1.7\u3067\u3059\u3002\n\n##Spine\u30c7\u30fc\u30bf\n\nSpine\u518d\u751f\u306b\u5fc5\u8981\u306a\u30c7\u30fc\u30bf\u306f\u4ee5\u4e0b\u306e\u4e09\u3064\u3067\u3059\n\n\u30fbatlas\n\u30fbjson or anim\n\u30fbpng\n\n\u305f\u3060\u8868\u793a\u3059\u308b\u3060\u3051\u306a\u3089json\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u8868\u793a\uff08\u518d\u751f\uff09\u3057\u305f\u3044\u5834\u5408\u306fanim\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002\nSWF\u306b\u57cb\u3081\u8fbc\u3080\u306a\u308a\u3001\u30b5\u30fc\u30d0\u30fc\u306b\u7f6e\u304f\u306a\u308a\u3057\u3066spine\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3081\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u3053\u308c\u3067\u6e96\u5099\u304c\u6574\u3044\u307e\u3057\u305f\u3002\n\n#\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\n\n\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u3067\u3059\u3002\n\u3053\u306e\u30b5\u30f3\u30d7\u30eb\u30bd\u30fc\u30b9\u306fspine\u30c7\u30fc\u30bf\u304c\u30b5\u30fc\u30d0\u30fc\u306b\u914d\u7f6e\u3057\u3066\u3042\u308b\u3068\u4eee\u5b9a\u3057\u3066\u4f5c\u6210\u3057\u3066\u3044\u307e\u3059\u3002\n\n```lang:SpineCharacterComponent \n\t/**\n\t * Spine\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\t * \n\t * @author ogino\n\t */\n\tpublic class SpineCharacterComponent extends Sprite \n\t{\n\t\t\n\t\t//-----------------------------------------------------\n\t\t//\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\n\t\t//-----------------------------------------------------\t\t\t\n\t\t\n\t\t/** \u30b9\u30b1\u30eb\u30c8\u30f3\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3 */\n\t\tprivate var skeleton:SkeletonAnimation;\n\t\t\n\t\t/** \u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u753b\u50cf */\n\t\tprivate var image:Bitmap;\n\t\t\n\t\t/** \u30c6\u30af\u30b9\u30c1\u30e3\u30fc */\n\t\tprivate var texture:Texture;\n\t\t\n\t\t/** \u30a2\u30bf\u30c3\u30c1\u30e1\u30f3\u30c8\u30ed\u30fc\u30c0\u30fc */\n\t\tprivate var attachmentLoader:AttachmentLoader;\t\t\n\t\t\n\t\t//-----------------------------------------------------\n\t\t//\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\t\t//-----------------------------------------------------\t\t\t\n\t\t\n\t\t/**\n\t\t * \u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\n\t\t */\n\t\tpublic function SpineCharacterComponent() \n\t\t{\n\t\t\tloadSpine();\n\t\t}\n\t\t\n\t\t//-----------------------------------------------------\n\t\t//\u30e1\u30bd\u30c3\u30c9\n\t\t//-----------------------------------------------------\t\t\t\n\t\t\n\t\t/**\n\t\t * Spine\u30c7\u30fc\u30bf\u3092\u30ed\u30fc\u30c9\n\t\t */\n\t\tpublic function loadSpine():void \n\t\t{\n\n\t\t\tvar loader:Loader = new Loader();\n\t\t\tloader.contentLoaderInfo.addEventListener(Event.COMPLETE, textureLoadComplete);\n\t\t\tvar assetUrl:String = \"\u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u30d5\u30a1\u30a4\u30eb\u306e\uff35\uff32\uff2c(png\u30d5\u30a1\u30a4\u30eb\uff09\";\n\t\t\tloader.load(new URLRequest(assetUrl), new LoaderContext());\t\t\t\n\t\t}\n\t\t\n\t\t/**\n\t\t * \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u518d\u751f\n\t\t * \n\t\t * @param\tname\n\t\t */\n\t\tpublic function animationPlay(name:String):void \n\t\t{\n\t\t\tskeleton.state.setAnimationByName(0, name, true);\n\t\t}\n\t\t\n\t\t//-----------------------------------------------------\n\t\t//\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n\t\t//-----------------------------------------------------\t\t\t\n\t\t\n\t\t/**\n\t\t * \u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u30ed\u30fc\u30c9\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n\t\t * \n\t\t * @param\te\n\t\t */\n\t\tprivate function textureLoadComplete(e:Event):void \n\t\t{\n\t\t\tLoaderInfo(e.currentTarget).removeEventListener(Event.COMPLETE, textureLoadComplete);\n\n\t\t\t// \u30c6\u30af\u30b9\u30c1\u30e3\u30fc\u306b\u5909\u63db\n\t\t\timage = Bitmap(LoaderInfo(e.currentTarget).content);\n\t\t\ttexture = Texture.fromBitmap(image);\n\t\t\t\n\t\t\t// atlas\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n\t\t\tvar loader:URLLoader = new URLLoader();\n\t\t\tloader.addEventListener(Event.COMPLETE, atlasLoadComplete);\n\t\t\tvar assetUrl:String = \"atlas\u30d5\u30a1\u30a4\u30eb\u306e\uff35\uff32\uff2c\";\n\t\t\tloader.load(new URLRequest(assetUrl));\t\t\t\n\t\t}\n\t\t\n\t\t/**\n\t\t * \u30a2\u30c8\u30e9\u30b9\u30ed\u30fc\u30c9\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n\t\t * \n\t\t * @param\te\n\t\t */\n\t\tprivate function atlasLoadComplete(e:Event):void \n\t\t{\n\t\t\tURLLoader(e.currentTarget).removeEventListener(Event.COMPLETE, atlasLoadComplete);\n\t\t\t\n\t\t\tvar spineAtlas:Atlas = new Atlas(URLLoader(e.currentTarget).data, new StarlingTextureLoader(image));\n\t\t\tattachmentLoader = new AtlasAttachmentLoader(spineAtlas);\n\t\t\t\n\t\t\t// anim\u30d5\u30a1\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3080\n\t\t\tvar loader:URLLoader = new URLLoader();\n\t\t\tloader.addEventListener(Event.COMPLETE, animLoadComplete);\n\t\t\tvar animUrl:String = \"anim\u30d5\u30a1\u30a4\u30eb\u306e\uff35\uff32\uff2c\";\n\t\t\tloader.load(new URLRequest(animUrl));\t\t\t\t\t\n\t\t}\n\t\t\n\t\t/**\n\t\t * \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30ed\u30fc\u30c9\u5b8c\u4e86\u30a4\u30d9\u30f3\u30c8\u30cf\u30f3\u30c9\u30e9\u30fc\n\t\t * \n\t\t * @param\te\n\t\t */\n\t\tprivate function animLoadComplete(e:Event):void \n\t\t{\n\t\t\tURLLoader(e.currentTarget).removeEventListener(Event.COMPLETE, animLoadComplete);\n\t\t\t\n\t\t\tvar json:SkeletonJson  = new SkeletonJson(attachmentLoader);\n\t\t\tvar skeletonData:SkeletonData = json.readSkeletonData(URLLoader(e.currentTarget).data);\n\t\t\tvar stateData:AnimationStateData = new AnimationStateData(skeletonData);\n\t\t\t\n\t\t\t// Spine\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u30c7\u30fc\u30bf\u3092\u30bb\u30c3\u30c8\n\t\t\tskeleton = new SkeletonAnimation(skeletonData, false, stateData);\n\n\t\t\t// \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u518d\u751f\u3000\u3053\u3053\u3067\u306fwait\u3068\u3044\u3046\u540d\u524d\u3092\u6307\u5b9a\n\t\t\tanimationPlay(\"wait\");\n\n\t\t\t// Stage3D\u306bSpine\u63cf\u753b\n\t\t\taddChild(skeleton);\n\t\t\tStarling.juggler.add(skeleton);\t\t\t\n\t\t}\t\n\t\t\n\t}\n```\n\n\u3053\u308c\u3067Spine\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u518d\u751f\u3055\u308c\u307e\u3059\u3002\n\u4e88\u60f3\u4ee5\u4e0a\u306b\u7c21\u5358\u306b\u5b9f\u88c5\u3067\u304d\u307e\u3057\u305f\u3002\n\nStage3D\u306f\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u304a\u304b\u3052\u3067\u975e\u5e38\u306b\u697d\u306bSpine\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n", "tags": ["flash", "ActionScript3", "Spine", "Staling", "Stage3D"]}