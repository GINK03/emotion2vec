{"context": "\n\n\u666e\u901a\u306b\u4f5c\u308b\u3068 jsonp \u306b\u306f\u3067\u304d\u306a\u3044\nAWS API Gateway x Lambda x Python \u306e API \u3092\u4f5c\u308a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306e\u307e\u307e retuen \u3067 dict \u3092\u8fd4\u5374\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b json \u306b\u30d1\u30fc\u30b9\u3055\u308c\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u308b\u3002\n\u6587\u5b57\u5217\u3092\u8fd4\u3059\u3068\u30af\u30aa\u30fc\u30c8\u3067\u56f2\u307e\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001 Lambda \u304b\u3089\u76f4\u63a5 js \u3092\u8fd4\u5374\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\u4f8b\uff09 callback({\"hoge\":\"foo\"}) \u3092 return \u3059\u308b\u3068 \"callback({\\\"hoge\\\":\\\"foo\\\"})\" \u306e\u3088\u3046\u306b\u6587\u5b57\u5217\u3068\u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\n\u3084\u3063\u305f\u3053\u3068\nAPI Gateway \u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u52a0\u5de5\u3059\u308b\u6a5f\u80fd\u304c\u3042\u3063\u305f\u306e\u3067\u305d\u308c\u3092\u5229\u7528\u3057\u305f\u3002\n\u307e\u305a\u306f Amazon API Gateway > APIs > hogeAPI > Resources > /foo \u304b\u3089 Method Execution \u3092\u958b\u304f\u3002\n\nMethod Response \u306e\u8a2d\u5b9a\n\nMethod Execution \u304b\u3089 Method Response \u3092\u9078\u629e\nHTTP Status 200 \u3092\u9078\u629e\nResponse Models \u306b application/javascript \u3092\u8ffd\u52a0\n\n\n\n\nIntegration Response \u306e\u8a2d\u5b9a\n\nMethod Execution \u304b\u3089 Integration Response \u3092\u9078\u629e\nMethod response status 200 \u3092\u9078\u629e\nBody Mapping Templates \u3092\u958b\u304f\nContent-Type application/json \u3092\u958b\u304f\n\u4e0b\u8a18\u3092\u5165\u529b\u3059\u308b \n\n\nBodyMappingTemplates\n## format to jsonp\ncallback($input.json('$'))\n\n\n\n\n\u307e\u3068\u3081\n\u3053\u308c\u3067 application/javascript \u3067 jsonp \u3092\u8fd4\u5374\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\nLambda \u304b\u3089 json \u3092\u8fd4\u5374\nIntegration Response \u3067 body \u3092\u6574\u5f62\nMethod Response header \u3092\u6574\u5f62\n\nBodyMappingTemplates \u3092\u30b4\u30ea\u30b4\u30ea\u3068\u4f5c\u308a\u3053\u3081\u3070\u52d5\u7684\u306a callbak \u306b\u3082\u5bfe\u5fdc\u3067\u304d\u305d\u3046\u3002\n\n\u53c2\u8003\nAmazon API Gateway \u2013 JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092HTML\u5f62\u5f0f\u306b\u52a0\u5de5\u3057\u3066\u8fd4\u3057\u3066\u307f\u308b\n\n\u88dc\u8db3\nAPI Gateway \u306f\u30c7\u30d5\u30a9\u30eb\u30c8 CORS \u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u5225\u9014\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\u3002\n## \u666e\u901a\u306b\u4f5c\u308b\u3068 jsonp \u306b\u306f\u3067\u304d\u306a\u3044\n\nAWS API Gateway x Lambda x Python \u306e API \u3092\u4f5c\u308a\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u306e\u307e\u307e retuen \u3067 dict \u3092\u8fd4\u5374\u3059\u308b\u3068\u81ea\u52d5\u7684\u306b json \u306b\u30d1\u30fc\u30b9\u3055\u308c\u30ec\u30b9\u30dd\u30f3\u30b9\u304c\u8fd4\u308b\u3002\n\u6587\u5b57\u5217\u3092\u8fd4\u3059\u3068\u30af\u30aa\u30fc\u30c8\u3067\u56f2\u307e\u308c\u3066\u3057\u307e\u3046\u306e\u3067\u3001 Lambda \u304b\u3089\u76f4\u63a5 js \u3092\u8fd4\u5374\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u306a\u304b\u3063\u305f\u3002\n\n\u4f8b\uff09 `callback({\"hoge\":\"foo\"})` \u3092 return \u3059\u308b\u3068 `\"callback({\\\"hoge\\\":\\\"foo\\\"})\"` \u306e\u3088\u3046\u306b\u6587\u5b57\u5217\u3068\u3057\u3066\u30ec\u30b9\u30dd\u30f3\u30b9\u3055\u308c\u3066\u3057\u307e\u3046\u3002\n\n## \u3084\u3063\u305f\u3053\u3068\n\nAPI Gateway \u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u52a0\u5de5\u3059\u308b\u6a5f\u80fd\u304c\u3042\u3063\u305f\u306e\u3067\u305d\u308c\u3092\u5229\u7528\u3057\u305f\u3002\n\u307e\u305a\u306f `Amazon API Gateway > APIs > hogeAPI > Resources > /foo` \u304b\u3089 Method Execution \u3092\u958b\u304f\u3002\n\n### Method Response \u306e\u8a2d\u5b9a\n\n1. Method Execution \u304b\u3089 Method Response \u3092\u9078\u629e\n2. HTTP Status `200` \u3092\u9078\u629e\n3. Response Models \u306b `application/javascript` \u3092\u8ffd\u52a0  \n![Method Response.PNG](https://qiita-image-store.s3.amazonaws.com/0/68136/4ed89f31-0662-b7df-bc29-2b64907dcd2a.png)\n\n### Integration Response \u306e\u8a2d\u5b9a\n\n1. Method Execution \u304b\u3089 Integration Response \u3092\u9078\u629e\n2. Method response status `200` \u3092\u9078\u629e\n3. Body Mapping Templates \u3092\u958b\u304f\n4. Content-Type `application/json` \u3092\u958b\u304f\n5. \u4e0b\u8a18\u3092\u5165\u529b\u3059\u308b \n \n```js:BodyMappingTemplates\n## format to jsonp\ncallback($input.json('$'))\n```\n![Integration Response.PNG](https://qiita-image-store.s3.amazonaws.com/0/68136/970251d3-7df8-3861-a994-1c8f35ac82cd.png)\n\n## \u307e\u3068\u3081\n\n\u3053\u308c\u3067 `application/javascript` \u3067 jsonp \u3092\u8fd4\u5374\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\u30c7\u30fc\u30bf\u30d5\u30ed\u30fc\u3068\u3057\u3066\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u308b\u3002\n\n1. Lambda \u304b\u3089 json \u3092\u8fd4\u5374\n2. Integration Response \u3067 body \u3092\u6574\u5f62\n3. Method Response header \u3092\u6574\u5f62\n\nBodyMappingTemplates \u3092\u30b4\u30ea\u30b4\u30ea\u3068\u4f5c\u308a\u3053\u3081\u3070\u52d5\u7684\u306a callbak \u306b\u3082\u5bfe\u5fdc\u3067\u304d\u305d\u3046\u3002\n\n### \u53c2\u8003\n\n[Amazon API Gateway \u2013 JSON\u5f62\u5f0f\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u3092HTML\u5f62\u5f0f\u306b\u52a0\u5de5\u3057\u3066\u8fd4\u3057\u3066\u307f\u308b](http://dev.classmethod.jp/cloud/aws/api-gateway-2/)\n\n## \u88dc\u8db3\n\nAPI Gateway \u306f\u30c7\u30d5\u30a9\u30eb\u30c8 CORS \u304c\u7121\u52b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u3067\u5225\u9014\u8a2d\u5b9a\u304c\u5fc5\u8981\u3067\u3059\u3002\n", "tags": ["AWS", "APIGateway"]}