{"context": "\n\n\u74b0\u5883\n\nPython3\nDjango1.9.2\n\n\n\u306f\u3058\u3081\u306b\n\u30c1\u30e9\u3063\u3068\u898b\u308b\u7528\u3067\u3059\u3002\n\n\u53c2\u7167\n\nhttps://docs.djangoproject.com\nDocumentation: https://docs.djangoproject.com/en/1.9/\n\nModels: https://docs.djangoproject.com/en/1.9/ref/models/instances/\n\nTemplate: https://docs.djangoproject.com/en/1.9/ref/templates/\n\nStatic files: http://hideharaaws.hatenablog.com/entry/2014/12/12/230825\n\nHTTP Status: https://ja.wikipedia.org/wiki/HTTP%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\n\n\n\n\u7528\u8a9e\n\npk ... primary key\n\n\nVersion\nDjango\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3002\n\nversion\n$ python -c \"import django; print(django.get_version())\"\n\n\n\nInstall\n\nProject\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u3002\n\nproject\n$ django-admin startproject MY-PROJECT-NAME\n\n\n\nApplication\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u3002\n\napp\n$ python manage.py startapp MY-APP-NAME\n$ # TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306esettings.py:INSTALLED_APPS\u306e\u7de8\u96c6\n$ # TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eurls.py\u3092\u5fc5\u8981\u306a\u3089\u7de8\u96c6\n$ # TODO: models.py\u7de8\u96c6\u5f8c \u2192 Model\n\n\n\nServer\n\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u3002\n\nserver\n$ python manage.py runserver\n$ python manage.py runserver 0.0.0.0:8000\n\n\n\nAdmin\n\u7ba1\u7406\u30b5\u30a4\u30c8\u306e\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3002\n\nadmin\n$ python manage.py createsuperuser\n\n\n\nShell\nDjango \u306e\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u64cd\u4f5c\u3002\n\u8a2d\u5b9a\u4e2d\u306e DB \u3092 Django \u304b\u3089\u64cd\u4f5c\u51fa\u6765\u308b\u4ed6\u3001\u5404\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u52d5\u4f5c\u78ba\u8a8d\u3082\u51fa\u6765\u308b\u3002\n\nshell\n$ python manage.py shell\n\n\n\nexample\n$ python manage.py shell\n>>> from MY-APP-NAME.models import MyModel\n>>> MyModel.objects.all()\n[]\n>>> m = MyModel()\n>>> m.save()\n>>> m.id\n1\n>>>\n\n\n\n\nDB\n\nMySQL\nsettings.py \u306eMySQL\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u5207\u308a\u66ff\u3048\u3002\n\nsettings.py\n# Database\n# https://docs.djangoproject.com/en/1.9/ref/settings/#databases\n\nDATABASES = { \n    'default': {                                                              \n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'MY-DB-NAME',\n        'USER': 'MY-DB-USER',\n        'PASSWORD': 'MY-DB-PASSWORD',\n        'HOST': '127.0.0.1',\n        'PORT': '3306',\n    }   \n}\n\n\n\nMySQL\u306e\u30dd\u30fc\u30c8\u306e\u78ba\u8a8d\u65b9\u6cd5\u3002\n\nmysql\nSHOW GLOBAL VARIABLES LIKE 'PORT';\n\n\n\nMigrate\n\u66f4\u65b0\u3068DB\u3078\u306e\u9069\u7528\u3002Model\u3092\u8ffd\u52a0\u3057\u305f\u3089\u884c\u3046\u3002\n\u3053\u3053\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u5168\u822c\u7684\u306b\u8907\u96d1\u306a\u30ed\u30b8\u30c3\u30af\u304c\u5fc5\u8981\u306a\u305f\u3081\u30a8\u30e9\u30fc\u304c\u983b\u767a\u3057\u3084\u3059\u3044\u64cd\u4f5c\u3002\u30ad\u30e3\u30c3\u30b7\u30e5\u7d61\u307f\u3084 Foreign Key \u306e\u4e0d\u6574\u5408\u306a\u3069\u8272\u3005\u8d77\u3053\u308b\u3002\n\nmigrate\n$ python manage.py makemigrations MY-APP-NAME\n$ python manage.py migrate\n\n\nSQL\u306e\u78ba\u8a8d\u3002\n\nsqlmigrate\n$ python manage.py sqlmigrate MY-APP-NAME 0001\n\n\n\ncreatedb\nDB\u306e\u4f5c\u6210\u3002settings.py\u3067SQLite\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306fSQLite\u306b\u69cb\u7bc9\u3055\u308c\u308b\u3002\n\u305f\u3068\u3048\u3070CMS\u306eMezzanine\u3092\u8a66\u3059\u6642\u3068\u304b\u3002\n\ncreatedb\n$ python manage.py createdb\n\n\n--noinput\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5bfe\u8a71\u30e2\u30fc\u30c9\u306b\u5165\u3089\u305a\u81ea\u52d5\u8a2d\u5b9a\u3002\n\ncreatedb\n$ python manage.py createdb --noinput\n\n\n\nModel\n\nhttps://docs.djangoproject.com/en/1.9/topics/db/models/\n\n@see: DB/Migrate\n\n\nField\n\u3000Field \u306e\u30bf\u30a4\u30d7\u306f https://docs.djangoproject.com/en/1.9/ref/models/fields/#model-field-types \u3092\u53c2\u7167\u3002\n\u3000\u5404 Field \u306f Field \u30af\u30e9\u30b9 (https://docs.djangoproject.com/en/1.9/_modules/django/db/models/fields/#Field) \u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u3002Field \u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u4ee5\u4e0b\u306e\u4eee\u5f15\u6570\u3092\u53d6\u308b\u3002\ndef __init__(self,\n    verbose_name=None,\n    name=None,\n    primary_key=False,\n    max_length=None,\n    unique=False,\n    blank=False,\n    null=False,\n    db_index=False,\n    rel=None,\n    default=NOT_PROVIDED,\n    editable=True,\n    serialize=True,\n    unique_for_date=None,\n    unique_for_month=None,\n    unique_for_year=None,\n    choices=None,\n    help_text='',\n    db_column=None,\n    db_tablespace=None,\n    auto_created=False,\n    validators=[],\n    error_messages=None\n):\n\n\n\u3000\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u4e00\u89a7\u3002\n\nAutoField\nBigIntegerField\nBinaryField\nBooleanField\nCharField\nCommaSeparatedIntegerField\nDateField\nDateTimeField\nDecimalField\nDurationField\nEmailField\nFileField\nFilePathField\nFloatField\nImageField\nIntegerField\nGenericIPAddressField\nNullBooleanField\nPositiveIntegerField\nPositiveSmallIntegerField\nSlugField\nSmallIntegerField\nTextField\nTimeField\nURLField\nUUIDField\nForeignKey\nManyToManyField\nOneToOneField\n\n\nClass\n\u3000models.py \u306e\u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\u4f8b\u3002\n\nmodels.py\nfrom django.db import models\n\nclass Person(models.Model):\n    name = models.CharField(max_length=128)\n\n\n\n\nSelect\nDB\u304b\u3089\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5168\u3066\u53d6\u5f97\u3002\n\nall\nobjs = MyModel.objects.all()\n\n\npk\u3092\u6307\u5b9a\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3002\n\nget\nobj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\n\n\n\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306e\u4f8b\u5916\u3002\n\nexception\ntry:\n    obj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\nexcept MyModel.DoesNotExist:\n    pass\n\n\nWHERE\u306ffilter\u3067\u6307\u5b9a\u3002\n\nfilter\nobjs = MyModel.objects.filter(name='myname').all()\n\n\nraw\u30af\u30a8\u30ea\u30fc\u3068\u30ea\u30b9\u30c8\u5185\u5305\u8a18\u6cd5\u3002objects.all() \u3068\u7b49\u4fa1\u3002\n\nraw\nobjs = [obj for obj in User.objects.raw('SELECT * FROM myapp_user')]\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u53d6\u5f97\u307e\u305f\u306f 404 \u4f8b\u5916\u306e\u9001\u51fa\u3002\n\nget_object_or_404\nfrom django.shortcuts import get_object_or_404\n\nobj = get_object_or_404(MyModel, pk=1)\n\n\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30ea\u30b9\u30c8\u53d6\u5f97\u307e\u305f\u306f 404 \u4f8b\u5916\u306e\u9001\u51fa\u3002\n\nget_list_or_404\nfrom django.shortcuts import get_list_or_404\n\nobjs = get_list_or_404(MyModel)\nobjs = get_list_or_404(MyModel.objects.order_by('-pub_date'))[:5]\n\n\n\n\nInsert\nDB\u306b\u30e2\u30c7\u30eb\u3092\u4e00\u3064\u633f\u5165\u3002\n\npost\nobj = MyModel()\nobj.id # -> None\nobj.save()\nobj.id # -> Number of id\n\n\n\nUpdate\n\u633f\u5165\u6e08\u307f\u306e\u30e2\u30c7\u30eb\u304b\u3089DB\u3092\u66f4\u65b0\u3002\n\nupdate\nobj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\nobj.my_field = 'Update my field'\nobj.save()\n\n\n\nDelete\nDB\u304b\u3089\u30e2\u30c7\u30eb\u3092\u4e00\u3064\u524a\u9664\u3002\n\ndelete\nobj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\nobj.delete()\n\n\n\nValidate\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3002\n\nvalidate\nobj.full_clean()\n\n\n\nForeignKey\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e2\u30c7\u30eb\u306e\n\nmodels.py\nclass Parent(models.Model):\n    name = models.CharField(default='my name is parent', max_length=32)\n\nclass Child(models.Model):\n    parent = models.ForeignKey(Parent, on_delete=models.CASCADE)\n\n\n\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u5468\u308a\u306e\u64cd\u4f5c\u3002\nparent = Parent()\nparent.save()\n\nc = parent.child_set.create() # Parent \u304b\u3089 Child \u306e\u4f5c\u6210\nc.parent.id # Child \u304b\u3089 Parent \u306e ID \u3092\u53c2\u7167\nparent.child_set.all() # Parent \u304b\u3089\u95a2\u9023\u3059\u308b\u5168\u3066\u306e Child \u3092\u53d6\u5f97\nparent.child_set.count() # Parent \u304b\u3089\u95a2\u9023\u3059\u308b Child \u6570\u3092\u8fd4\u3059\n\n\n\nurls.py\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e urls.py \u3078\u306e\u59d4\u8b72\u3002\n\nmyprj/urls.py\nfrom django.conf.urls import include, url\nfrom django.contrib import admin\n\nurlpatterns = [\n    url(r'^admin/', admin.site.urls),\n\n    # myapp\u306b\u59d4\u8b72\n    url(r'^myapp/', include('myapp.urls')),\n]\n\n\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e views.py \u3078\u306e\u59d4\u8b72\u3002\n\nmyapp/urls.py\nfrom django.conf.urls import url \nfrom . import views\n\nurlpatterns = [                          \n    # views.py \u5185\u306e index \u95a2\u6570\u306b\u59d4\u8b72\u3002name \u306f\u540d\u524d\u7a7a\u9593\u3092\u8868\u3057\u3001template \u30d5\u30a1\u30a4\u30eb\u5185\u306e {% url 'namespace' %} \u306a\u3069\u3067\u53c2\u7167\u3055\u308c\u308b\u3002                                    \n    url(r'^', views.index, name='index'),\n]\n\n\n\n\nviews.py\nHTTP\u30e1\u30bd\u30c3\u30c9\u540d\u3067\u5206\u5c90\u3002\n\nmethod_test\nfrom django.http import HttpResponse\n\ndef method_test(request):\n    if 'GET' in request.method:\n        return HttpResponse('Success to GET')\n\n    elif 'POST' in request.method:\n        return HttpResponse(status=200)\n\n    else:\n        return HttpResponse(status=501)\n\n\n\ntemplate\u306e\u63cf\u753b\u3002\u30d1\u30b9\u306e\u30aa\u30ea\u30b8\u30f3\u306f MY-APP-NAME/templates.\n\nrender_test\nfrom django.shortcuts import render\nfrom django.http import HttpResponse\n\ndef render_test(request):\n    if 'GET' in request.method:\n        return render(request, 'MY-APP-NAME/MY-TEMPLATE-FILE-NAME', {\n            'title': 'Render Test',\n        })\n\n    else:\n        return HttpResponse(status=501)\n\n\n\nadmin.py\n\u3000\u53c2\u7167: https://docs.djangoproject.com/ja/1.9/ref/contrib/admin/actions/\n\u3000/admin \u7ba1\u7406\u753b\u9762\u3067\u81ea\u4f5c\u30e2\u30c7\u30eb\u3092\u7ba1\u7406\u3057\u305f\u3044\u5834\u5408\u306f admin.py \u3092\u7de8\u96c6\u3059\u308b\u3002\u81ea\u4f5c\u30e2\u30c7\u30eb\u3068 ModelAdmin \u3092\u7d99\u627f\u3057\u305f\u81ea\u4f5c\u30e2\u30c7\u30eb\u7528\u306e Admin \u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001\u81ea\u4f5c\u30e2\u30c7\u30eb\u3068\u4e00\u7dd2\u306b\u767b\u9332\u3059\u308b\u3002\n\nadmin.py\nfrom django.contrib import admin\nfrom .models import User\n\nclass UserAdmin(admin.ModelAdmin):\n    list_display = ('id', 'name', 'modified')\n\nadmin.site.register(User, UserAdmin)\n\n\n\n\nTemplates and Static directory\n\u958b\u767a\u6642\u306e\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u65b9\u6cd5\u3002\u3053\u308c\u306f\u5236\u9650\u304c\u3086\u308b\u304f\u3001\u3042\u308b\u7a0b\u5ea6\u3092\u30e6\u30fc\u30b6\u30fc\u5074\u306b\u3086\u3060\u306d\u3066\u3044\u308b\u5370\u8c61\u3002\u9078\u629e\u80a2\u304c\u3044\u304f\u3064\u304b\u3042\u308b\u3002\nviews.py\u304b\u3089\u30ed\u30fc\u30c9\u3055\u308c\u308btemplate\u30d5\u30a1\u30a4\u30eb\u3001\u305d\u308c\u304b\u3089\u7d76\u5bfe\u30d1\u30b9\u3067\u53c2\u7167\u3055\u308c\u308bstatic\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u6642\u306b\u9078\u629e\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\u524d\u63d0\u3068\u3057\u3066settings.py\u306eSTATIC_URL\u306e\u8a2d\u5b9a\u5024\u306f/static/\u3068\u3059\u308b\u3002 \n\u4e00\u3064\u76ee\u306e\u914d\u7f6e\u65b9\u6cd5\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6bce\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3002\nmyapp00/\n    templates/myapp00/\n        index.html\n\n    static/\n        js/jquery.min.js\n\n    static/myapp00/\n        js/myapp00.js\n\nmyapp01/\n    templates/myapp01/\n        index.html\n\n    static/myapp01/\n        js/myapp00.js\n\n\n\u3053\u306e\u914d\u7f6e\u3060\u3068\u4f8b\u3048\u3070static\u306eURL\u3067\u306f/static/myapp00/js/myapp00.js\u7b49\u3067\u8868\u73fe\u3055\u308c\u308b\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308b\u3002\njquery.min.js\u306f/static/js/jquery.min.js\u3067\u53c2\u7167\u53ef\u80fd\u3002\u5168\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u5171\u6709\u3055\u308c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u7701\u7565\u3057\u3066\u3044\u308b\u3002\n\u4e8c\u3064\u76ee\u306e\u914d\u7f6e\u65b9\u6cd5\u3002\u4e00\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5168\u90e8\u653e\u308a\u8fbc\u3080\u65b9\u6cd5\u3002\nmyapp00/\n    templates/myapp00/\n        index.html\n\n    templates/myapp01/\n        index.html\n\n    static/\n        js/jquery.min.js\n\n    static/myapp00/\n        js/myapp00.js\n\n    static/myapp01/\n        js/myapp00.js\n\n\n\u3053\u306e\u65b9\u6cd5\u3060\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb/\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u624b\u52d5\u306e\u524a\u9664\uff09\u3067\u524a\u9664\u5fd8\u308c\u306e\u30b4\u30df\u304c\u6b8b\u308b\u53ef\u80fd\u6027\u306a\u3069\u304c\u3042\u308a\u3001\u8a2d\u8a08\u3068\u3057\u3066\u306f\u3042\u307e\u308a\u7dba\u9e97\u3067\u306f\u306a\u3044\u6c17\u304c\u3059\u308b\u3002\u3057\u304b\u3057\u3001\u4e00\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3054\u3068\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\uff09\u3092\u898b\u6e21\u305b\u308b\u306e\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u7ba1\u7406\u306f\u697d\u3002\n\u3061\u306a\u307f\u306bURL\u306f\u4e00\u3064\u76ee\u3068\u5dee\u7570\u304c\u7121\u3044\u306e\u3067\u3001\u4e00\u3064\u76ee\u306b\u79fb\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3055\u305b\u308c\u3070\u304a\uff4b\u3002\n\nStatic\nJS\u30e9\u30a4\u30d6\u30e9\u30ea\u3084CSS\u3001\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3002Django\u306fCDN\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\n\n\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u306e\u5834\u5408\nMY-PROJECT-NAME/setting.py\u3092\u7de8\u96c6\u3059\u308b\u3002\n\nsetting.py\nINSTALLED_APPS = [\n...\n    'django.contrib.staticfiles', # <- \u3053\u308c\u304c\u5fc5\u8981\n...\n]\n\n\n\nsetting.py\nSTATIC_URL = '/static/' # <- \u3053\u308c\u3082\u5fc5\u8981\n\n\n\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u306bstatic\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u52a0\u3048\u308b\u3002\n\ncase-of-linux\n$ mkdir myapp/static\n\n\n\u3053\u3053\u3067\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\u6163\u4f8b\u3067\u30a2\u30d7\u30ea\u540d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002startapp\u3067\u81ea\u52d5\u4f5c\u6210\u3057\u3066\u304f\u308c\u3066\u3082\u826f\u3044\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u4f5c\u6210\u3057\u306a\u3044\u306e\u306f\u4f55\u304b\u7406\u7531\u304c\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u304b\u3002\n\ncase-of-linux\n$ mkdir myapp/static/myapp\n\n\n\u3053\u308c\u3067http://localhost:8000/static/myapp/file.txt\u7b49\u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3002\n\u3053\u306e\u914d\u7f6e\u306f\u958b\u767a\u6642\u306b\u306f\u9069\u3057\u3066\u3044\u308b\u304c\u3001\u672c\u756a\u52d5\u4f5c\u6642\u3067\u306f\u9069\u5207\u3067\u306f\u306a\u3044\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u3066\u3042\u308b\u3002\n\n\u672c\u756a\u52d5\u4f5c\u6642\u306e\u5834\u5408\n\u3000\u672c\u756a\u52d5\u4f5c\u3067\u306f Apache2 \u3068 WSGI \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3059\u308b\u3002\u30c7\u30a3\u30b9\u30c8\u30ed\u3054\u3068\u306b\u74b0\u5883\u4f9d\u5b58\u306e\u624b\u9806\u304c\u3042\u308b\u3002\n\u3000\u53c2\u7167: How to deploy with WSGI\n\u3000\u958b\u767a\u74b0\u5883\u3082\u542b\u3081\u308b\u3068\u3001Django\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u516c\u958b\u65b9\u6cd5\u306f\uff13\u901a\u308a\u4ee5\u4e0a\u3042\u308b\u3089\u3057\u3044\u3002\n\u30001. \u958b\u767a\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u308b\u516c\u958b\uff08python manage.py runserver 0.0.0.0:80 \u7b49\uff09\n\u30002. Apache2 + WSGI \u306b\u3088\u308b\u516c\u958b\u3000\n\u30003. Apache2 + WSGI + \u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\uff08nginx \u7b49\uff09\u306b\u3088\u308b\u516c\u958b\n\u30001. \u306f\u958b\u767a\u6642\u306e\u516c\u958b\u65b9\u6cd5\u3002\u516c\u958b\u306b\u3042\u305f\u3063\u3066 2. \u307e\u305f\u306f 3. \u306e\u65b9\u6cd5\u3092\u9078\u629e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u3000\u307e\u305f\u3001\u672c\u756a\u52d5\u4f5c\u6642\u3067\u306f setting.py \u5185\u306e\u8a2d\u5b9a\u3082\u5fc5\u8981\u306b\u306a\u308b\u3002\n\nsetting.py\n##\n# DEBUG \u304c False \u306e\u6642\u3001\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u306b\u30c7\u30a3\u30c6\u30a3\u30fc\u30eb\u306f\u8868\u793a\u3055\u308c\u305a\u3001ALLOWED_HOSTS \u306e\u8a2d\u5b9a\u304c\u53c2\u7167\u3055\u308c\u308b\u3002\n# \u307e\u305f\u3001Django \u306f static \u30d5\u30a1\u30a4\u30eb\u306e\u7ba1\u7406\u3092\u3057\u306a\u304f\u306a\u308b\u3002static \u30d5\u30a1\u30a4\u30eb\u3092\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3059\u308b\u306b\u306f\u3001VirtualHost \u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u304b\u3001\u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n# VirtualHost \u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u306f https://docs.djangoproject.com/ja/1.10/howto/deployment/wsgi/modwsgi/ \u3092\u53c2\u7167\u3002\n# Django \u3092 Apache2 + wsgi \u3067\u52d5\u304b\u3059\u5834\u5408\u3001\u958b\u767a\u8005\u306f\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u306a\u3044\u306e\u3067\u3053\u306e\u5024\u306f False \u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3060\u308d\u3046\u3002\n# \u3053\u306e\u6642\u3001static \u30d5\u30a1\u30a4\u30eb\u306e\u904b\u7528\u65b9\u6cd5\u3082\u6c7a\u5b9a\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n#\nDEBUG = True\n\nALLOWED_HOSTS = ['*'] # DEBUG \u304c False \u306e\u3068\u304d\u53c2\u7167\u3055\u308c\u308b\n\n\n\n\nStatic\n\u3000static \u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u4f8b\u3002\n\nsetting.py\n##\n# STATIC_URL \u306f template \u306e {% static 'my/file.html' %} \u306a\u3069\u306e\u30bf\u30b0\u3067\u4f7f\u7528\u3055\u308c\u308b\u3002\n# STATIC_URL \u304c '/static/' \u306e\u5834\u5408\u3001 \u30bf\u30b0\u306f 'http://localhost/static/my/file.html' \u306a\u3069\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n# STATIC_URL \u304c 'http://localhost:8080/static' \u306e\u5834\u5408\u3001\u30bf\u30b0\u306f 'http://localhost:8080/static/my/file.html' \u306a\u3069\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n# static \u7528\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\u304c\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u3092\u53c2\u7167\u3059\u308b\u5834\u5408\u3001STATIC_URL \u306f 'https://my.static.file.server.com/' \u306a\u3069\u306b\u306a\u308b\u3060\u308d\u3046\u3002\n#\nSTATIC_URL = '/static/'\n\n##\n# STATIC_ROOT \u306f collectstatic \u306e\u53ce\u96c6\u30d5\u30a1\u30a4\u30eb\u306e\u3076\u3061\u307e\u3051\u5148\u3002\n# \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d1\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u3002\n# STATIC_ROOT \u304c '/tmp/mystatic/' \u306e\u5834\u5408\u3001collectstatic \u306f /tmp/mystatic/ \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u96c6\u3081\u308b\u3002\n# \u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u305f\u3060\u306e\u53ce\u96c6\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5148\u3067\u3042\u308a\u3001Django \u306f\u3053\u308c\u3092\u7ba1\u7406\u30fb\u4f7f\u7528\u3057\u306a\u3044\u3002\n# STATICFILES_DIRS \u3082\u53c2\u7167\u306e\u3053\u3068\u3002\n#\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static') # \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u306e static \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30eb\u30fc\u30c8\u306b\u6307\u5b9a\n\n##\n# STATICFILES_DIRS \u306f\u3001collectstatic \u306e\u53ce\u96c6\u5143\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a18\u8ff0\u3059\u308b\u3002\n# os.path.join(BASE_DIR, 'myapp/static') \u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u305f\u5834\u5408\u3001collectstatic \u306f myapp/static \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u53ce\u96c6\u3059\u308b\u3002\n#\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR, 'myapp/static'), # myapp \u4ee5\u4e0b\u306e static \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53ce\u96c6\u3059\u308b\n]\n\n\n\n\nTemplate\nDjango/template \u306e\u6587\u6cd5\u306f\u591a\u5f69\u3067\u3059(\u00b4\u0391\uff40)\n\nextends\n\u62e1\u5f35\u3002Django/template \u3067\u306f extends \u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u62e1\u5f35\u3057\u3066\u304b\u3089\u63cf\u753b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\n\ntree\nmyprj/                     # Project Root\n    myapp/                 # Application Root\n        templates/         # Application template files\n            base.html      # Base html for the extend\n            myapp/         # Application namespace\n                index.html # Extends file from here\n\n\n\u62e1\u5f35\u306e\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u3002\n\nbase.html\n<!DOCTYPE html>\n<html>\n<head>\n        <title>myprj - {% block title %}{% endblock %}</title>\n</script>\n</head>\n<body>\n{% block content %}{% endblock %}\n</body>\n</html>\n\n\n\n\u62e1\u5f35\u4f8b\u3002 block ~ endblock \u3092\u4f7f\u3046\u3053\u3068\u3067\u30d9\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306b\u6307\u5b9a\u306e\u6587\u5b57\u5217\u3092\u6d41\u3057\u8fbc\u3081\u308b\u3002\u4f8b\u3067\u306f\u30d9\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e block title \u3068 block content \u306b\u6587\u5b57\u5217\u3092\u6d41\u3057\u8fbc\u3093\u3067\u62e1\u5f35\u3057\u3066\u3044\u308b\u3002\n\nindex.html\n{% extends 'base.html' %}\n\n{% block title %}My title{% endblock %}\n\n{% block content %}\n        <h1>Hello, World!</h1>\n{% endblock %}\n\n\n\ncomment\n\u30b3\u30e1\u30f3\u30c8\u306f\u4e00\u884c\u5358\u4f4d\u3002\n{# my_comment #}\n\n\nvarialble\n\u5909\u6570\u306e\u53c2\u7167\u3002\n\nvar\n{{ my_variable }}\n\n\n\u53c2\u7167\u6642\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3002\n\nvar-with-default\n{{ my_variable|default:'This is default value' }}\n\n\n\u9577\u3055\u3002\n\nlength\n{{ my_list|length }}\n\n\n\u30ea\u30b9\u30c8\u3092\u6dfb\u5b57\u3067\u53c2\u7167\u3002\n\nindex\n{{ my_list.0 }}\n\n\n\nCSRF\nCSRF\u30c8\u30fc\u30af\u30f3\u306e\u53c2\u7167\u3002\u901a\u4fe1\u5468\u308a\u3067\u4f7f\u3046\u3002\n\ncsrf\n{{ csrf_token }}\n\n\n\nstatic\nstatic\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u3068\u30d1\u30b9\u306e\u53c2\u7167\u3002\u524d\u8ff0\u306eStatic\u3082\u53c2\u7167\u306e\u3053\u3068\u3002\n\nstatic\n{% load staticfiles %}\n\n{% static 'myapp/jquery.min.js' %}\n{% static 'myapp/style.css' %}\n{% static 'myapp/image.png' %}\n\n\n\ninclude\n\u30d1\u30b9\u306fMY-APP-NAME/templates/\u304c\u30aa\u30ea\u30b8\u30f3\u3002\n\ninclude\n{% include 'myapp/template.html' %}\n\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u6307\u5b9a\u3002\n\ninclude\n{% include 'myapp/template.html' with title='The Title' message='Hello' %}\n\n\n\nwith\n\u30b9\u30b3\u30fc\u30d7\u4ed8\u304d\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3002\n\nwith\n{% with 'myapp/template.html' as fname %}\n{%   include fname %}\n{% endwith %}\n\n\n\nif\nif-else\u69cb\u6587\u3002\n\nif-else\n{% if duck %}\n    <div>{{ duck }}</div>\n{% else %}\n    <div>Nothing...</div>\n{% endif %}\n\n\n\u6bd4\u8f03\u6f14\u7b97\u3002\n\nif-eq\n{% if duck == 'Duck' %}\n    <div>{{ duck }}</div>\n{% endif %}\n\n\n\nif-compare\n{% if duck|length > 0 %}\n    <div>{{ duck }}</div>\n{% endif %}\n\n\n\nfor\n\nfor\n{% for obj in objs %}\n    <p>{{ obj }}</p>\n{% endfor %}\n\n\nforloop.counter\u306e\u53c2\u7167\u3002\u30eb\u30fc\u30d7\u4e2d\u306b\u6dfb\u3048\u5b57\u304c\u6b32\u3057\u3044\u3068\u304d\u3002\nforloop.counter0\u30670\u30aa\u30ea\u30b8\u30f3\u306a\u6dfb\u3048\u5b57\u3092\u5f97\u3089\u308c\u308b\u3002\n\nfor\n{% for obj in objs %}\n    <p>{{ forloop.counter }}</p>\n    <p>{{ forloop.counter0 }}</p>\n{% endfor %}\n\n\nDjango/template\u306e for \u69cb\u6587\u3067\u306f range\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u3002\n\u4ee3\u4fa1\u3048\u3068\u3057\u3066\u30ea\u30b9\u30c8\u3092\u4f7f\u3046\u3002\n\nfor-range\n'mylist': range(0, 10),\n\n...\n\n{% for el in mylist %}\n{% endfor %}\n\n\n\ntemplate tags\n\u3000template \u30bf\u30b0\u306e\u81ea\u4f5c\u3002\n\u3000\u53c2\u7167: https://docs.djangoproject.com/ja/1.9/howto/custom-template-tags/\n\u3000\n\u3000\u30a2\u30d7\u30ea\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b templatetags \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u3053\u306b\u30bf\u30b0\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u653e\u308b\u3002\n$ mkdir myapp/templatetags\n$ vi myapp/templatetags/mytag.py\n\n\u3000\u30bf\u30b0\u306f\u7528\u9014\u3054\u3068\u306b\u5206\u5225\u3055\u308c\u3066\u3044\u308b\u3063\u307d\u3044\u3002\u4ee5\u4e0b\u306f assignment_tag \u306e\u4e00\u4f8b\u3002\n\nmytag.py\nfrom django import template\n\nregister = template.Library()\n\n@register.assignment_tag\ndef my_ass_tag():\n    return {'message': 'This is ass******* tag.'}\n\n\n\n\u3000\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u306e\u4f7f\u7528\u4f8b\u3002\n{# \u8aad\u307f\u8fbc\u307f #}\n{% load mytag %}\n\n{# assignment_tag \u3092\u4f7f\u3046 #}\n{% my_ass_tag as data %}\n\n{{ data.message }}\n\n\n\nForm\n\u3000\u30d5\u30a9\u30fc\u30e0\u3002\n\u3000\u53c2\u7167: https://docs.djangoproject.com/en/1.9/topics/forms/\n\u3000Django \u3067\u306f\u30d5\u30a9\u30fc\u30e0\u306e\u4f5c\u6210\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\u30d5\u30a9\u30fc\u30e0\u3092\u4f7f\u3046\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3084 HTML \u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u91cf\u8efd\u6e1b\u304c\u53ef\u80fd\u306b\u306a\u308b\u3002\n\u3000\u30d5\u30a9\u30fc\u30e0\u3092\u4f7f\u3046\u306b\u306f\u307e\u305a myapp/forms.py \u306b\u81ea\u4f5c\u30d5\u30a9\u30fc\u30e0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\u305d\u3057\u3066 views.py \u3067 POST/GET \u306b\u5fdc\u3058\u3066\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u3092\u884c\u3044\u3001template \u306b\u30d5\u30a9\u30fc\u30e0\u30fb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3053\u3068\u3067\u30d5\u30a9\u30fc\u30e0\u3092\u63cf\u753b\u3092\u88dc\u52a9\u3059\u308b\u3002\u30d5\u30a9\u30fc\u30e0\u306e\u30c7\u30fc\u30bf\u306f\u4e00\u9023\u306e\u51e6\u7406\u306e\u9593 myapp/forms.py \u306e\u30d5\u30a9\u30fc\u30e0\u3067\u7ba1\u7406\u3055\u308c\u308b\u3002\n\u3000\u30ed\u30b0\u30a4\u30f3\u30fb\u30d5\u30a9\u30fc\u30e0\u306e\u4f5c\u6210\u4f8b\u3002\n\nforms.py\nfrom django import forms\n\nclass LoginForm(forms.Form):\n        username = forms.CharField(label='User name', max_length=128)\n        password = forms.CharField(label='Password', widget=forms.PasswordInput)\n\n\n\n\nAuth\n\u3000\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u3002\n\u3000\u53c2\u7167: https://docs.djangoproject.com/ja/1.9/ref/contrib/auth/\n\nUser\n\u3000\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u306e\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306f\u30e2\u30c7\u30eb User \u3067\u7ba1\u7406\u3055\u308c\u308b\u3002\u73fe\u5728\u306e\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306e\u4e00\u89a7\u3002\nfrom django.contrib.auth.models import User\n\nusers = User.objects.all()\nprint(users)\n\n\n\u3000User \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u306a\u5c5e\u6027\u4e00\u89a7\u3002\nDoesNotExist\nMeta\nMultipleObjectsReturned\nREQUIRED_FIELDS\nUSERNAME_FIELD\nbackend\ncheck\ncheck_password\nclean\nclean_fields\ndate_error_message\ndate_joined\ndelete\nemail\nemail_user\nfirst_name\nfrom_db\nfull_clean\nget_all_permissions\nget_deferred_fields\nget_full_name\nget_group_permissions\nget_next_by_date_joined\nget_previous_by_date_joined\nget_session_auth_hash\nget_short_name\nget_username\ngroups\nhas_module_perms\nhas_perm\nhas_perms\nhas_usable_password\nid\nis_active\nis_anonymous\nis_authenticated\nis_staff\nis_superuser\nlast_login\nlast_name\nlogentry_set\nnatural_key\nnormalize_username\nobjects\npassword\npk\nprepare_database_save\nrefresh_from_db\nsave\nsave_base\nserializable_value\nset_password\nset_unusable_password\nunique_error_message\nuser_permissions\nusername\nusername_validator\nvalidate_unique\n\n\nCreate\n\u3000\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u3068\u4fdd\u5b58\u3002\nfrom django.contrib.auth.models import User\n\nuser = User.objects.create_user('ono', 'lennon@thebeatles.com', 'onopassword')\nuser.last_name = 'Yoko'\nuser.save()\n\n\n\nUpdate\n\u3000\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306e\u66f4\u65b0\u3068\u4fdd\u5b58\u3002\nfrom django.contrib.auth.models import User\n\nuser = User.objects.get(username='ono')\nuser.set_password('new password')\nuser.save()\n\n\n\nAuthenticate and Processing\n\u3000Authenticate(\u8a8d\u8a3c\u3059\u308b\uff09\u3068\u5206\u5c90\u51e6\u7406\u3002\nfrom django.contrib.auth import authenticate\n\nuser = authenticate(username='ono', password='secret')\nif user is not None:\n    # \u8a8d\u8a3c\u306b\u6210\u529f\nelse:\n    # \u8a8d\u8a3c\u306b\u5931\u6557\n\n\n\nPermission\n\u3000\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306f\u30c7\u30fc\u30bf\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u6301\u3064\u3002\u6a29\u9650\u306f\u30e2\u30c7\u30eb Permission \u3067\u5b9a\u7fa9\u3055\u308c\u308b\u3002\u5404\u30e2\u30c7\u30eb\u306b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 add, change, delete \u306e\u6a29\u9650\u304c\u7528\u610f\u3055\u308c\u308b\u3002\nfrom django.contrib.auth.models import Permission\n\nperms = Permission.objects.all()\nprint(perms)\n\n\n\nhas_perm\n\u3000\u30e6\u30fc\u30b6\u30fc\u304c\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066 add, change, delete \u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306f has_perm() \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002Foo \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30e2\u30c7\u30eb Bar \u306b\u3064\u3044\u3066\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u5f0f\u3092\u6e21\u3057\u3066\u771f\u507d\u5024\u3092\u53d6\u308b\u3002\nuser.has_perm('foo.add_bar') # \u30e6\u30fc\u30b6\u30fc\u304c Foo \u30a2\u30d7\u30ea\u306e Bar \u30e2\u30c7\u30eb\u306b add \u6a29\u9650\u3092\u6301\u3064\u306a\u3089 True\nuser.has_perm('foo.change_bar')\nuser.has_perm('foo.delete_bar')\n\n\n\nCreate, Add, Remove\n\u3000\u30e6\u30fc\u30b6\u30fc\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u5834\u5408\u306f\u3001\u307e\u305a Permission \u3067\u6a29\u9650\u3092\u53d6\u5f97\u3059\u308b\u304b\u4f5c\u6210\u3059\u308b\u3002\u305d\u306e\u6a29\u9650\u3092 user.user_permissions.add(Permission) \u3067\u30e6\u30fc\u30b6\u30fc\u306b\u4ed8\u4e0e\u3059\u308b\u3002\n\u3000Django \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 add, change, delete \u306e\u6a29\u9650\u3092\u30e2\u30c7\u30eb\u306b\u5408\u308f\u305b\u3066 DB \u306e\u30c6\u30fc\u30d6\u30eb auth_permission \u306b\u4f5c\u6210\u3059\u308b\u306e\u3067\u3001\u3053\u308c\u3089\u306e\u6a29\u9650\u306b\u3064\u3044\u3066\u306f DB \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\u4ed8\u4e0e\u3057\u305f\u6a29\u9650\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u53cd\u6620\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u3001DB \u304b\u3089\u30e6\u30fc\u30b6\u30fc\u3092\u518d\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nfrom django.contrib.auth.models import User, Permission\n\nuser = User.objects.get(username='ono')\n\n# ono \u306e Foo \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e Bar \u30e2\u30c7\u30eb\u306b\u5bfe\u3059\u308b change \u306e\u6a29\u9650\u306f \nprint(user.has_perm('foo.change_bar'))\n\n# Bar \u30e2\u30c7\u30eb\u3078\u306e change \u6a29\u9650\u3092\u53d6\u5f97\u5f8c\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u4ed8\u4e0e\u3059\u308b\nperm = Permission.objects.get(codename='change_bar')\nuser.user_permissions.add(perm)\n\n# \u6a29\u9650\u3092\u518d\u78ba\u8a8d\u3059\u308b\u304c False\nprint(user.has_perm('foo.change_bar'))\n\n# \u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u305f\u3089 DB \u304b\u3089\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u518d\u53d6\u5f97(fetch)\u3059\u308b\nuser = User.objects.get(pk=user.id)\nprint(user.has_perm('foo.change_bar'))\n\n# \u6a29\u9650\u306e\u5265\u596a\u306f user_permissions.remove(Permission) \u3092\u4f7f\u3046\nuser.user_permissions.remove(perm)\nuser = User.objects.get(pk=user.id)\nprint(user.has_perm('foo.change_bar'))\n\n\nUser's permissions\n\u3000\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u4e00\u89a7\u3002\nperms = user.get_all_permissions()\nprint(perms)\n\nperms = user.user_permissions.all()\nprint(perms)\n\n\n\nIn views.py\n\u3000views.py \u3067\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u3092\u5224\u5225\u3059\u308b\u3002\ndef example_view(request):\n    if request.user.is_authenticated:\n        # \u3053\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u8a8d\u8a3c\u6e08\u307f\n    else:\n        # \u3053\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u672a\u8a8d\u8a3c\n\n\n# \u74b0\u5883\n\n* Python3\n* Django1.9.2\n\n# \u306f\u3058\u3081\u306b\n\n\u30c1\u30e9\u3063\u3068\u898b\u308b\u7528\u3067\u3059\u3002\n\n# \u53c2\u7167\n\n* https://docs.djangoproject.com\n* Documentation: https://docs.djangoproject.com/en/1.9/\n* Models: https://docs.djangoproject.com/en/1.9/ref/models/instances/\n* Template: https://docs.djangoproject.com/en/1.9/ref/templates/\n* Static files: http://hideharaaws.hatenablog.com/entry/2014/12/12/230825\n* HTTP Status: https://ja.wikipedia.org/wiki/HTTP%E3%82%B9%E3%83%86%E3%83%BC%E3%82%BF%E3%82%B9%E3%82%B3%E3%83%BC%E3%83%89\n\n# \u7528\u8a9e\n\n* pk ... primary key\n\n# Version\n\nDjango\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u78ba\u8a8d\u3002\n\n```bash:version\n$ python -c \"import django; print(django.get_version())\"\n```\n\n# Install\n\n## Project\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u4f5c\u6210\u3002\n\n```bash:project\n$ django-admin startproject MY-PROJECT-NAME\n```\n\n## Application\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4f5c\u6210\u3002\n\n```bash:app\n$ python manage.py startapp MY-APP-NAME\n$ # TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306esettings.py:INSTALLED_APPS\u306e\u7de8\u96c6\n$ # TODO: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306eurls.py\u3092\u5fc5\u8981\u306a\u3089\u7de8\u96c6\n$ # TODO: models.py\u7de8\u96c6\u5f8c \u2192 Model\n```\n\n# Server\n\n\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u306e\u8d77\u52d5\u3002\n\n```bash:server\n$ python manage.py runserver\n$ python manage.py runserver 0.0.0.0:8000\n```\n\n# Admin\n\n\u7ba1\u7406\u30b5\u30a4\u30c8\u306e\u30b9\u30fc\u30d1\u30fc\u30e6\u30fc\u30b6\u30fc\u3092\u4f5c\u6210\u3002\n\n```bash:admin\n$ python manage.py createsuperuser\n```\n\n# Shell\n\nDjango \u306e\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6\u306a\u64cd\u4f5c\u3002\n\u8a2d\u5b9a\u4e2d\u306e DB \u3092 Django \u304b\u3089\u64cd\u4f5c\u51fa\u6765\u308b\u4ed6\u3001\u5404\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u52d5\u4f5c\u78ba\u8a8d\u3082\u51fa\u6765\u308b\u3002\n\n```bash:shell\n$ python manage.py shell\n```\n\n```bash:example\n$ python manage.py shell\n>>> from MY-APP-NAME.models import MyModel\n>>> MyModel.objects.all()\n[]\n>>> m = MyModel()\n>>> m.save()\n>>> m.id\n1\n>>>\n\n```\n\n# DB\n\n## MySQL\n\nsettings.py \u306eMySQL\u30b5\u30fc\u30d0\u30fc\u3078\u306e\u5207\u308a\u66ff\u3048\u3002\n\n```py3:settings.py\n# Database\n# https://docs.djangoproject.com/en/1.9/ref/settings/#databases\n\nDATABASES = { \n    'default': {                                                              \n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'MY-DB-NAME',\n        'USER': 'MY-DB-USER',\n        'PASSWORD': 'MY-DB-PASSWORD',\n        'HOST': '127.0.0.1',\n        'PORT': '3306',\n    }   \n}\n\n```\n\nMySQL\u306e\u30dd\u30fc\u30c8\u306e\u78ba\u8a8d\u65b9\u6cd5\u3002\n\n```mysql:mysql\nSHOW GLOBAL VARIABLES LIKE 'PORT';\n```\n\n## Migrate\n\n\u66f4\u65b0\u3068DB\u3078\u306e\u9069\u7528\u3002Model\u3092\u8ffd\u52a0\u3057\u305f\u3089\u884c\u3046\u3002\n\u3053\u3053\u306f\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u5168\u822c\u7684\u306b\u8907\u96d1\u306a\u30ed\u30b8\u30c3\u30af\u304c\u5fc5\u8981\u306a\u305f\u3081\u30a8\u30e9\u30fc\u304c\u983b\u767a\u3057\u3084\u3059\u3044\u64cd\u4f5c\u3002\u30ad\u30e3\u30c3\u30b7\u30e5\u7d61\u307f\u3084 Foreign Key \u306e\u4e0d\u6574\u5408\u306a\u3069\u8272\u3005\u8d77\u3053\u308b\u3002\n\n```bash:migrate\n$ python manage.py makemigrations MY-APP-NAME\n$ python manage.py migrate\n```\n\nSQL\u306e\u78ba\u8a8d\u3002\n\n```bash:sqlmigrate\n$ python manage.py sqlmigrate MY-APP-NAME 0001\n```\n\n## createdb\n\nDB\u306e\u4f5c\u6210\u3002settings.py\u3067SQLite\u3092\u4f7f\u3063\u3066\u3044\u308b\u5834\u5408\u306fSQLite\u306b\u69cb\u7bc9\u3055\u308c\u308b\u3002\n\u305f\u3068\u3048\u3070CMS\u306eMezzanine\u3092\u8a66\u3059\u6642\u3068\u304b\u3002\n\n```bash:createdb\n$ python manage.py createdb\n```\n\n--noinput\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5bfe\u8a71\u30e2\u30fc\u30c9\u306b\u5165\u3089\u305a\u81ea\u52d5\u8a2d\u5b9a\u3002\n\n\n```bash:createdb\n$ python manage.py createdb --noinput\n```\n\n\n# Model\n\n* https://docs.djangoproject.com/en/1.9/topics/db/models/\n* @see: DB/Migrate\n\n## Field\n\n\u3000Field \u306e\u30bf\u30a4\u30d7\u306f https://docs.djangoproject.com/en/1.9/ref/models/fields/#model-field-types \u3092\u53c2\u7167\u3002\n\u3000\u5404 Field \u306f `Field` \u30af\u30e9\u30b9 (https://docs.djangoproject.com/en/1.9/_modules/django/db/models/fields/#Field) \u3092\u7d99\u627f\u3057\u3066\u3044\u308b\u3002`Field` \u30af\u30e9\u30b9\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306f\u4ee5\u4e0b\u306e\u4eee\u5f15\u6570\u3092\u53d6\u308b\u3002\n\n```py3:\ndef __init__(self,\n\tverbose_name=None,\n\tname=None,\n\tprimary_key=False,\n\tmax_length=None,\n\tunique=False,\n\tblank=False,\n\tnull=False,\n\tdb_index=False,\n\trel=None,\n\tdefault=NOT_PROVIDED,\n\teditable=True,\n\tserialize=True,\n\tunique_for_date=None,\n\tunique_for_month=None,\n\tunique_for_year=None,\n\tchoices=None,\n\thelp_text='',\n\tdb_column=None,\n\tdb_tablespace=None,\n\tauto_created=False,\n\tvalidators=[],\n\terror_messages=None\n):\n\n```\n\n\u3000\u30d5\u30a3\u30fc\u30eb\u30c9\u306e\u4e00\u89a7\u3002\n\n* AutoField\n* BigIntegerField\n* BinaryField\n* BooleanField\n* CharField\n* CommaSeparatedIntegerField\n* DateField\n* DateTimeField\n* DecimalField\n* DurationField\n* EmailField\n* FileField\n* FilePathField\n* FloatField\n* ImageField\n* IntegerField\n* GenericIPAddressField\n* NullBooleanField\n* PositiveIntegerField\n* PositiveSmallIntegerField\n* SlugField\n* SmallIntegerField\n* TextField\n* TimeField\n* URLField\n* UUIDField\n* ForeignKey\n* ManyToManyField\n* OneToOneField\n\n## Class\n\n\u3000models.py \u306e\u30af\u30e9\u30b9\u306e\u5b9a\u7fa9\u4f8b\u3002\n\n```py3:models.py\nfrom django.db import models\n\nclass Person(models.Model):\n\tname = models.CharField(max_length=128)\n\n```\n\n## Select\n\nDB\u304b\u3089\u30e2\u30c7\u30eb\u306e\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u5168\u3066\u53d6\u5f97\u3002\n\n```django:all\nobjs = MyModel.objects.all()\n```\n\npk\u3092\u6307\u5b9a\u3057\u3066\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u53d6\u5f97\u3002\n\n```django:get\nobj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\n```\n\n\u5b58\u5728\u3057\u306a\u3044\u5834\u5408\u306e\u4f8b\u5916\u3002\n\n```django:exception\ntry:\n    obj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\nexcept MyModel.DoesNotExist:\n    pass\n```\n\nWHERE\u306ffilter\u3067\u6307\u5b9a\u3002\n\n```django:filter\nobjs = MyModel.objects.filter(name='myname').all()\n```\n\nraw\u30af\u30a8\u30ea\u30fc\u3068\u30ea\u30b9\u30c8\u5185\u5305\u8a18\u6cd5\u3002objects.all() \u3068\u7b49\u4fa1\u3002\n\n```django:raw\nobjs = [obj for obj in User.objects.raw('SELECT * FROM myapp_user')]\n```\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u53d6\u5f97\u307e\u305f\u306f 404 \u4f8b\u5916\u306e\u9001\u51fa\u3002\n\n```django:get_object_or_404\nfrom django.shortcuts import get_object_or_404\n\nobj = get_object_or_404(MyModel, pk=1)\n\n```\n\n\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30ea\u30b9\u30c8\u53d6\u5f97\u307e\u305f\u306f 404 \u4f8b\u5916\u306e\u9001\u51fa\u3002\n\n```django:get_list_or_404\nfrom django.shortcuts import get_list_or_404\n\nobjs = get_list_or_404(MyModel)\nobjs = get_list_or_404(MyModel.objects.order_by('-pub_date'))[:5]\n\n```\n\n## Insert\n\nDB\u306b\u30e2\u30c7\u30eb\u3092\u4e00\u3064\u633f\u5165\u3002\n\n```py3:post\nobj = MyModel()\nobj.id # -> None\nobj.save()\nobj.id # -> Number of id\n```\n\n## Update\n\n\u633f\u5165\u6e08\u307f\u306e\u30e2\u30c7\u30eb\u304b\u3089DB\u3092\u66f4\u65b0\u3002\n\n```py3:update\nobj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\nobj.my_field = 'Update my field'\nobj.save()\n```\n\n## Delete\n\nDB\u304b\u3089\u30e2\u30c7\u30eb\u3092\u4e00\u3064\u524a\u9664\u3002\n\n```py3:delete\nobj = MyModel.objects.get(pk=MY-PRIMARY-KEY)\nobj.delete()\n```\n\n## Validate\n\n\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3002\n\n```py3:validate\nobj.full_clean()\n```\n\n## ForeignKey\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e2\u30c7\u30eb\u306e\n\n```py3:models.py\nclass Parent(models.Model):\n    name = models.CharField(default='my name is parent', max_length=32)\n\nclass Child(models.Model):\n    parent = models.ForeignKey(Parent, on_delete=models.CASCADE)\n\n```\n\n\u30ea\u30ec\u30fc\u30b7\u30e7\u30f3\u5468\u308a\u306e\u64cd\u4f5c\u3002\n\n```py3:\nparent = Parent()\nparent.save()\n\nc = parent.child_set.create() # Parent \u304b\u3089 Child \u306e\u4f5c\u6210\nc.parent.id # Child \u304b\u3089 Parent \u306e ID \u3092\u53c2\u7167\nparent.child_set.all() # Parent \u304b\u3089\u95a2\u9023\u3059\u308b\u5168\u3066\u306e Child \u3092\u53d6\u5f97\nparent.child_set.count() # Parent \u304b\u3089\u95a2\u9023\u3059\u308b Child \u6570\u3092\u8fd4\u3059\n\n```\n\n# urls.py\n\n\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e urls.py \u3078\u306e\u59d4\u8b72\u3002\n\n```py3:myprj/urls.py\nfrom django.conf.urls import include, url\nfrom django.contrib import admin\n\nurlpatterns = [\n\turl(r'^admin/', admin.site.urls),\n\t\n\t# myapp\u306b\u59d4\u8b72\n\turl(r'^myapp/', include('myapp.urls')),\n]\n\n```\n\n\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e views.py \u3078\u306e\u59d4\u8b72\u3002\n\n```py3:myapp/urls.py\nfrom django.conf.urls import url \nfrom . import views\n\nurlpatterns = [                          \n    # views.py \u5185\u306e index \u95a2\u6570\u306b\u59d4\u8b72\u3002name \u306f\u540d\u524d\u7a7a\u9593\u3092\u8868\u3057\u3001template \u30d5\u30a1\u30a4\u30eb\u5185\u306e {% url 'namespace' %} \u306a\u3069\u3067\u53c2\u7167\u3055\u308c\u308b\u3002                                    \n    url(r'^', views.index, name='index'),\n]\n\n```\n\n\n# views.py\n\nHTTP\u30e1\u30bd\u30c3\u30c9\u540d\u3067\u5206\u5c90\u3002\n\n```py3:method_test\nfrom django.http import HttpResponse\n\ndef method_test(request):\n\tif 'GET' in request.method:\n\t\treturn HttpResponse('Success to GET')\n\t\n\telif 'POST' in request.method:\n\t\treturn HttpResponse(status=200)\n\t\n\telse:\n\t\treturn HttpResponse(status=501)\n\n```\n\ntemplate\u306e\u63cf\u753b\u3002\u30d1\u30b9\u306e\u30aa\u30ea\u30b8\u30f3\u306f `MY-APP-NAME/templates`.\n\n```py3:render_test\nfrom django.shortcuts import render\nfrom django.http import HttpResponse\n\ndef render_test(request):\n\tif 'GET' in request.method:\n\t\treturn render(request, 'MY-APP-NAME/MY-TEMPLATE-FILE-NAME', {\n\t\t\t'title': 'Render Test',\n\t\t})\n\n\telse:\n\t\treturn HttpResponse(status=501)\n```\n\n# admin.py\n\n\u3000\u53c2\u7167: https://docs.djangoproject.com/ja/1.9/ref/contrib/admin/actions/\n\n\u3000`/admin` \u7ba1\u7406\u753b\u9762\u3067\u81ea\u4f5c\u30e2\u30c7\u30eb\u3092\u7ba1\u7406\u3057\u305f\u3044\u5834\u5408\u306f `admin.py` \u3092\u7de8\u96c6\u3059\u308b\u3002\u81ea\u4f5c\u30e2\u30c7\u30eb\u3068 ModelAdmin \u3092\u7d99\u627f\u3057\u305f\u81ea\u4f5c\u30e2\u30c7\u30eb\u7528\u306e Admin \u30af\u30e9\u30b9\u3092\u4f5c\u6210\u3057\u3001\u81ea\u4f5c\u30e2\u30c7\u30eb\u3068\u4e00\u7dd2\u306b\u767b\u9332\u3059\u308b\u3002\n\n```py3:admin.py\nfrom django.contrib import admin\nfrom .models import User\n\nclass UserAdmin(admin.ModelAdmin):\n\tlist_display = ('id', 'name', 'modified')\n\nadmin.site.register(User, UserAdmin)\n\n```\n\n# Templates and Static directory\n\n***\u958b\u767a\u6642***\u306e\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u65b9\u6cd5\u3002\u3053\u308c\u306f\u5236\u9650\u304c\u3086\u308b\u304f\u3001\u3042\u308b\u7a0b\u5ea6\u3092\u30e6\u30fc\u30b6\u30fc\u5074\u306b\u3086\u3060\u306d\u3066\u3044\u308b\u5370\u8c61\u3002\u9078\u629e\u80a2\u304c\u3044\u304f\u3064\u304b\u3042\u308b\u3002\n``` views.py ```\u304b\u3089\u30ed\u30fc\u30c9\u3055\u308c\u308b``` template ```\u30d5\u30a1\u30a4\u30eb\u3001\u305d\u308c\u304b\u3089\u7d76\u5bfe\u30d1\u30b9\u3067\u53c2\u7167\u3055\u308c\u308b``` static ```\u30d5\u30a1\u30a4\u30eb\u306e\u914d\u7f6e\u6642\u306b\u9078\u629e\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\n\n\u524d\u63d0\u3068\u3057\u3066``` settings.py ```\u306e``` STATIC_URL ```\u306e\u8a2d\u5b9a\u5024\u306f``` /static/ ```\u3068\u3059\u308b\u3002 \n\n\n\u4e00\u3064\u76ee\u306e\u914d\u7f6e\u65b9\u6cd5\u306f\u3001\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u6bce\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u65b9\u6cd5\u3002\n\n```\nmyapp00/\n    templates/myapp00/\n        index.html\n\n    static/\n        js/jquery.min.js\n\n    static/myapp00/\n        js/myapp00.js\n\nmyapp01/\n    templates/myapp01/\n        index.html\n\n    static/myapp01/\n        js/myapp00.js\n\n```\n\n\u3053\u306e\u914d\u7f6e\u3060\u3068\u4f8b\u3048\u3070``` static ```\u306eURL\u3067\u306f``` /static/myapp00/js/myapp00.js ```\u7b49\u3067\u8868\u73fe\u3055\u308c\u308b\u3002\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u306b\u306a\u3063\u3066\u3044\u308b\u306e\u304c\u308f\u304b\u308b\u3002\n``` jquery.min.js ```\u306f``` /static/js/jquery.min.js ```\u3067\u53c2\u7167\u53ef\u80fd\u3002\u5168\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u5171\u6709\u3055\u308c\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u3092\u7701\u7565\u3057\u3066\u3044\u308b\u3002\n\n\u4e8c\u3064\u76ee\u306e\u914d\u7f6e\u65b9\u6cd5\u3002\u4e00\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306b\u5168\u90e8\u653e\u308a\u8fbc\u3080\u65b9\u6cd5\u3002\n\n```\nmyapp00/\n    templates/myapp00/\n        index.html\n\n    templates/myapp01/\n        index.html\n\n    static/\n        js/jquery.min.js\n\n    static/myapp00/\n        js/myapp00.js\n\n    static/myapp01/\n        js/myapp00.js\n\n```\n\n\u3053\u306e\u65b9\u6cd5\u3060\u3068\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb/\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\uff08\u624b\u52d5\u306e\u524a\u9664\uff09\u3067\u524a\u9664\u5fd8\u308c\u306e\u30b4\u30df\u304c\u6b8b\u308b\u53ef\u80fd\u6027\u306a\u3069\u304c\u3042\u308a\u3001\u8a2d\u8a08\u3068\u3057\u3066\u306f\u3042\u307e\u308a\u7dba\u9e97\u3067\u306f\u306a\u3044\u6c17\u304c\u3059\u308b\u3002\u3057\u304b\u3057\u3001\u4e00\u3064\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304b\u3089\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\uff08\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3054\u3068\u306e\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\uff09\u3092\u898b\u6e21\u305b\u308b\u306e\u3067\u30d5\u30a1\u30a4\u30eb\u306e\u7ba1\u7406\u306f\u697d\u3002\n\u3061\u306a\u307f\u306bURL\u306f\u4e00\u3064\u76ee\u3068\u5dee\u7570\u304c\u7121\u3044\u306e\u3067\u3001\u4e00\u3064\u76ee\u306b\u79fb\u884c\u3057\u305f\u3044\u5834\u5408\u306f\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u79fb\u52d5\u3055\u305b\u308c\u3070\u304a\uff4b\u3002\n\n# Static\n\nJS\u30e9\u30a4\u30d6\u30e9\u30ea\u3084CSS\u3001\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u306a\u3069\u3002Django\u306fCDN\u3082\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\n\n## \u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u306e\u5834\u5408\n\n``` MY-PROJECT-NAME/setting.py ```\u3092\u7de8\u96c6\u3059\u308b\u3002\n\n```py3:setting.py\nINSTALLED_APPS = [\n...\n    'django.contrib.staticfiles', # <- \u3053\u308c\u304c\u5fc5\u8981\n...\n]\n```\n\n```py3:setting.py\nSTATIC_URL = '/static/' # <- \u3053\u308c\u3082\u5fc5\u8981\n```\n\n\u4f5c\u6210\u3057\u305f\u30a2\u30d7\u30ea\u306b``` static ```\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u52a0\u3048\u308b\u3002\n\n```bash:case-of-linux\n$ mkdir myapp/static\n```\n\n\u3053\u3053\u3067\u30cd\u30fc\u30e0\u30b9\u30da\u30fc\u30b9\u7528\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u304c\u5fc5\u8981\u306b\u306a\u308b\u3002\u6163\u4f8b\u3067\u30a2\u30d7\u30ea\u540d\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3059\u308b\u3002``` startapp ```\u3067\u81ea\u52d5\u4f5c\u6210\u3057\u3066\u304f\u308c\u3066\u3082\u826f\u3044\u6c17\u304c\u3057\u307e\u3059\u304c\u3001\u4f5c\u6210\u3057\u306a\u3044\u306e\u306f\u4f55\u304b\u7406\u7531\u304c\u3042\u308b\u306e\u3067\u3057\u3087\u3046\u304b\u3002\n\n```bash:case-of-linux\n$ mkdir myapp/static/myapp\n```\n\n\u3053\u308c\u3067``` http://localhost:8000/static/myapp/file.txt ```\u7b49\u3067\u30a2\u30af\u30bb\u30b9\u51fa\u6765\u308b\u3002\n\u3053\u306e\u914d\u7f6e\u306f\u958b\u767a\u6642\u306b\u306f\u9069\u3057\u3066\u3044\u308b\u304c\u3001\u672c\u756a\u52d5\u4f5c\u6642\u3067\u306f\u9069\u5207\u3067\u306f\u306a\u3044\u3068\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u66f8\u3044\u3066\u3042\u308b\u3002\n\n\n## \u672c\u756a\u52d5\u4f5c\u6642\u306e\u5834\u5408\n\n\u3000\u672c\u756a\u52d5\u4f5c\u3067\u306f Apache2 \u3068 WSGI \u30e2\u30b8\u30e5\u30fc\u30eb\u3092\u4f7f\u3044\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3059\u308b\u3002\u30c7\u30a3\u30b9\u30c8\u30ed\u3054\u3068\u306b\u74b0\u5883\u4f9d\u5b58\u306e\u624b\u9806\u304c\u3042\u308b\u3002\n\u3000\u53c2\u7167: [How to deploy with WSGI](https://docs.djangoproject.com/ja/1.9/howto/deployment/wsgi/)\n\n\u3000\u958b\u767a\u74b0\u5883\u3082\u542b\u3081\u308b\u3068\u3001Django\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u516c\u958b\u65b9\u6cd5\u306f\uff13\u901a\u308a\u4ee5\u4e0a\u3042\u308b\u3089\u3057\u3044\u3002\n\n\u30001. \u958b\u767a\u30b5\u30fc\u30d0\u30fc\u306b\u3088\u308b\u516c\u958b\uff08`python manage.py runserver 0.0.0.0:80` \u7b49\uff09\n\u30002. Apache2 + WSGI \u306b\u3088\u308b\u516c\u958b\u3000\n\u30003. Apache2 + WSGI + \u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\uff08`nginx` \u7b49\uff09\u306b\u3088\u308b\u516c\u958b\n\n\u30001. \u306f\u958b\u767a\u6642\u306e\u516c\u958b\u65b9\u6cd5\u3002\u516c\u958b\u306b\u3042\u305f\u3063\u3066 2. \u307e\u305f\u306f 3. \u306e\u65b9\u6cd5\u3092\u9078\u629e\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\u3000\u307e\u305f\u3001\u672c\u756a\u52d5\u4f5c\u6642\u3067\u306f `setting.py` \u5185\u306e\u8a2d\u5b9a\u3082\u5fc5\u8981\u306b\u306a\u308b\u3002\n\n\n```py3:setting.py\n##\n# DEBUG \u304c False \u306e\u6642\u3001\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u306b\u30c7\u30a3\u30c6\u30a3\u30fc\u30eb\u306f\u8868\u793a\u3055\u308c\u305a\u3001ALLOWED_HOSTS \u306e\u8a2d\u5b9a\u304c\u53c2\u7167\u3055\u308c\u308b\u3002\n# \u307e\u305f\u3001Django \u306f static \u30d5\u30a1\u30a4\u30eb\u306e\u7ba1\u7406\u3092\u3057\u306a\u304f\u306a\u308b\u3002static \u30d5\u30a1\u30a4\u30eb\u3092\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3059\u308b\u306b\u306f\u3001VirtualHost \u306b\u30a8\u30a4\u30ea\u30a2\u30b9\u3092\u8a2d\u5b9a\u3059\u308b\u304b\u3001\u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\u3092\u7acb\u3066\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n# VirtualHost \u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u8a2d\u5b9a\u306f https://docs.djangoproject.com/ja/1.10/howto/deployment/wsgi/modwsgi/ \u3092\u53c2\u7167\u3002\n# Django \u3092 Apache2 + wsgi \u3067\u52d5\u304b\u3059\u5834\u5408\u3001\u958b\u767a\u8005\u306f\u958b\u767a\u7528\u30b5\u30fc\u30d0\u30fc\u3092\u4f7f\u7528\u3057\u306a\u3044\u306e\u3067\u3053\u306e\u5024\u306f False \u306b\u8a2d\u5b9a\u3055\u308c\u308b\u3060\u308d\u3046\u3002\n# \u3053\u306e\u6642\u3001static \u30d5\u30a1\u30a4\u30eb\u306e\u904b\u7528\u65b9\u6cd5\u3082\u6c7a\u5b9a\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n#\nDEBUG = True\n\nALLOWED_HOSTS = ['*'] # DEBUG \u304c False \u306e\u3068\u304d\u53c2\u7167\u3055\u308c\u308b\n\n```\n\n## Static\n\n\u3000`static` \u30d5\u30a1\u30a4\u30eb\u306e\u8a2d\u5b9a\u4f8b\u3002\n\n```py3:setting.py\n##\n# STATIC_URL \u306f template \u306e {% static 'my/file.html' %} \u306a\u3069\u306e\u30bf\u30b0\u3067\u4f7f\u7528\u3055\u308c\u308b\u3002\n# STATIC_URL \u304c '/static/' \u306e\u5834\u5408\u3001 \u30bf\u30b0\u306f 'http://localhost/static/my/file.html' \u306a\u3069\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n# STATIC_URL \u304c 'http://localhost:8080/static' \u306e\u5834\u5408\u3001\u30bf\u30b0\u306f 'http://localhost:8080/static/my/file.html' \u306a\u3069\u306b\u5909\u63db\u3055\u308c\u308b\u3002\n# static \u7528\u306e\u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc\u304c\u30cd\u30c3\u30c8\u306b\u516c\u958b\u3055\u308c\u3066\u3044\u3066\u3001\u305d\u308c\u3092\u53c2\u7167\u3059\u308b\u5834\u5408\u3001STATIC_URL \u306f 'https://my.static.file.server.com/' \u306a\u3069\u306b\u306a\u308b\u3060\u308d\u3046\u3002\n#\nSTATIC_URL = '/static/'\n\n##\n# STATIC_ROOT \u306f collectstatic \u306e\u53ce\u96c6\u30d5\u30a1\u30a4\u30eb\u306e\u3076\u3061\u307e\u3051\u5148\u3002\n# \u30d5\u30a1\u30a4\u30eb\u30b7\u30b9\u30c6\u30e0\u4e0a\u306e\u30d1\u30b9\u3092\u8a18\u8ff0\u3059\u308b\u3002\n# STATIC_ROOT \u304c '/tmp/mystatic/' \u306e\u5834\u5408\u3001collectstatic \u306f /tmp/mystatic/ \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u5185\u306b\u30d5\u30a1\u30a4\u30eb\u3092\u96c6\u3081\u308b\u3002\n# \u3053\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306f\u305f\u3060\u306e\u53ce\u96c6\u30d5\u30a1\u30a4\u30eb\u306e\u683c\u7d0d\u5148\u3067\u3042\u308a\u3001Django \u306f\u3053\u308c\u3092\u7ba1\u7406\u30fb\u4f7f\u7528\u3057\u306a\u3044\u3002\n# STATICFILES_DIRS \u3082\u53c2\u7167\u306e\u3053\u3068\u3002\n#\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static') # \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u76f4\u4e0b\u306e static \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u30eb\u30fc\u30c8\u306b\u6307\u5b9a\n\n##\n# STATICFILES_DIRS \u306f\u3001collectstatic \u306e\u53ce\u96c6\u5143\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u8a18\u8ff0\u3059\u308b\u3002\n# os.path.join(BASE_DIR, 'myapp/static') \u304c\u8ffd\u52a0\u3055\u308c\u3066\u3044\u305f\u5834\u5408\u3001collectstatic \u306f myapp/static \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u4ee5\u4e0b\u304b\u3089\u30d5\u30a1\u30a4\u30eb\u3092\u53ce\u96c6\u3059\u308b\u3002\n#\nSTATICFILES_DIRS = [\n    os.path.join(BASE_DIR, 'myapp/static'), # myapp \u4ee5\u4e0b\u306e static \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53ce\u96c6\u3059\u308b\n]\n\n```\n\n# Template\n\nDjango/template \u306e\u6587\u6cd5\u306f\u591a\u5f69\u3067\u3059(*\u00b4\u0391\uff40*)\n\n## extends\n\n\u62e1\u5f35\u3002Django/template \u3067\u306f `extends` \u3067\u6307\u5b9a\u3057\u305f\u30d5\u30a1\u30a4\u30eb\u3092\u5225\u306e\u30d5\u30a1\u30a4\u30eb\u3067\u62e1\u5f35\u3057\u3066\u304b\u3089\u63cf\u753b\u3059\u308b\u3053\u3068\u304c\u51fa\u6765\u308b\u3002\n\n```bash:tree\nmyprj/                     # Project Root\n    myapp/                 # Application Root\n        templates/         # Application template files\n            base.html      # Base html for the extend\n            myapp/         # Application namespace\n                index.html # Extends file from here\n```\n\n\u62e1\u5f35\u306e\u30d9\u30fc\u30b9\u3068\u306a\u308b\u30d5\u30a1\u30a4\u30eb\u3002\n\n```html+django:base.html\n<!DOCTYPE html>\n<html>\n<head>\n        <title>myprj - {% block title %}{% endblock %}</title>\n</script>\n</head>\n<body>\n{% block content %}{% endblock %}\n</body>\n</html>\n\n````\n\n\u62e1\u5f35\u4f8b\u3002 `block ~ endblock` \u3092\u4f7f\u3046\u3053\u3068\u3067\u30d9\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306b\u6307\u5b9a\u306e\u6587\u5b57\u5217\u3092\u6d41\u3057\u8fbc\u3081\u308b\u3002\u4f8b\u3067\u306f\u30d9\u30fc\u30b9\u30d5\u30a1\u30a4\u30eb\u306e `block title` \u3068 `block content` \u306b\u6587\u5b57\u5217\u3092\u6d41\u3057\u8fbc\u3093\u3067\u62e1\u5f35\u3057\u3066\u3044\u308b\u3002\n\n```html+django:index.html\n{% extends 'base.html' %}\n\n{% block title %}My title{% endblock %}\n\n{% block content %}\n        <h1>Hello, World!</h1>\n{% endblock %}\n```\n\n## comment\n\n\u30b3\u30e1\u30f3\u30c8\u306f\u4e00\u884c\u5358\u4f4d\u3002\n\n```html+django\n{# my_comment #}\n```\n\n## varialble\n\n\u5909\u6570\u306e\u53c2\u7167\u3002\n\n```html+django:var\n{{ my_variable }}\n```\n\n\u53c2\u7167\u6642\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u5024\u3002\n\n```html+django:var-with-default\n{{ my_variable|default:'This is default value' }}\n```\n\n\u9577\u3055\u3002\n\n```html+django:length\n{{ my_list|length }}\n```\n\n\u30ea\u30b9\u30c8\u3092\u6dfb\u5b57\u3067\u53c2\u7167\u3002\n\n```html+django:index\n{{ my_list.0 }}\n```\n\n## CSRF\n\nCSRF\u30c8\u30fc\u30af\u30f3\u306e\u53c2\u7167\u3002\u901a\u4fe1\u5468\u308a\u3067\u4f7f\u3046\u3002\n\n```django:csrf\n{{ csrf_token }}\n```\n\n## static\n\nstatic\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u3068\u30d1\u30b9\u306e\u53c2\u7167\u3002\u524d\u8ff0\u306eStatic\u3082\u53c2\u7167\u306e\u3053\u3068\u3002\n\n```html+django:static\n{% load staticfiles %}\n\n{% static 'myapp/jquery.min.js' %}\n{% static 'myapp/style.css' %}\n{% static 'myapp/image.png' %}\n```\n\n## include\n\n\u30d1\u30b9\u306f``` MY-APP-NAME/templates/ ```\u304c\u30aa\u30ea\u30b8\u30f3\u3002\n\n\n```html+django:include\n{% include 'myapp/template.html' %}\n```\n\n\u30d1\u30e9\u30e1\u30fc\u30bf\u6307\u5b9a\u3002\n\n```html+django:include\n{% include 'myapp/template.html' with title='The Title' message='Hello' %}\n```\n\n## with \n\n\u30b9\u30b3\u30fc\u30d7\u4ed8\u304d\u306e\u30a8\u30a4\u30ea\u30a2\u30b9\u3002\n\n```html+django:with\n{% with 'myapp/template.html' as fname %}\n{%   include fname %}\n{% endwith %}\n```\n\n## if\n\nif-else\u69cb\u6587\u3002\n\n```django:if-else\n{% if duck %}\n\t<div>{{ duck }}</div>\n{% else %}\n\t<div>Nothing...</div>\n{% endif %}\n```\n\n\u6bd4\u8f03\u6f14\u7b97\u3002\n\n```django:if-eq\n{% if duck == 'Duck' %}\n\t<div>{{ duck }}</div>\n{% endif %}\n```\n\n```django:if-compare\n{% if duck|length > 0 %}\n\t<div>{{ duck }}</div>\n{% endif %}\n```\n\n## for\n\n```html+django:for\n{% for obj in objs %}\n    <p>{{ obj }}</p>\n{% endfor %}\n```\n\nforloop.counter\u306e\u53c2\u7167\u3002\u30eb\u30fc\u30d7\u4e2d\u306b\u6dfb\u3048\u5b57\u304c\u6b32\u3057\u3044\u3068\u304d\u3002\nforloop.counter0\u30670\u30aa\u30ea\u30b8\u30f3\u306a\u6dfb\u3048\u5b57\u3092\u5f97\u3089\u308c\u308b\u3002\n\n```html+django:for\n{% for obj in objs %}\n    <p>{{ forloop.counter }}</p>\n    <p>{{ forloop.counter0 }}</p>\n{% endfor %}\n```\n\nDjango/template\u306e `for` \u69cb\u6587\u3067\u306f `range`\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u3002\n\u4ee3\u4fa1\u3048\u3068\u3057\u3066\u30ea\u30b9\u30c8\u3092\u4f7f\u3046\u3002\n\n```html+django:for-range\n'mylist': range(0, 10),\n\n...\n\n{% for el in mylist %}\n{% endfor %}\n```\n\n## template tags\n\n\u3000template \u30bf\u30b0\u306e\u81ea\u4f5c\u3002\n\u3000\u53c2\u7167: https://docs.djangoproject.com/ja/1.9/howto/custom-template-tags/\n\u3000\n\u3000\u30a2\u30d7\u30ea\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u76f4\u4e0b\u306b `templatetags` \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u305d\u3053\u306b\u30bf\u30b0\u306e\u30d5\u30a1\u30a4\u30eb\u3092\u653e\u308b\u3002\n\n```bash:\n$ mkdir myapp/templatetags\n$ vi myapp/templatetags/mytag.py\n```\n\n\u3000\u30bf\u30b0\u306f\u7528\u9014\u3054\u3068\u306b\u5206\u5225\u3055\u308c\u3066\u3044\u308b\u3063\u307d\u3044\u3002\u4ee5\u4e0b\u306f `assignment_tag` \u306e\u4e00\u4f8b\u3002\n\n```py3:mytag.py\nfrom django import template\n\nregister = template.Library()\n\n@register.assignment_tag\ndef my_ass_tag():\n    return {'message': 'This is ass******* tag.'}\n\n```\n\n\u3000\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u306e\u4f7f\u7528\u4f8b\u3002\n\n```py3:\n{# \u8aad\u307f\u8fbc\u307f #}\n{% load mytag %}\n\n{# assignment_tag \u3092\u4f7f\u3046 #}\n{% my_ass_tag as data %}\n\n{{ data.message }}\n\n```\n\n# Form\n\n\u3000\u30d5\u30a9\u30fc\u30e0\u3002\n\u3000\u53c2\u7167: https://docs.djangoproject.com/en/1.9/topics/forms/\n\n\u3000Django \u3067\u306f\u30d5\u30a9\u30fc\u30e0\u306e\u4f5c\u6210\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3002\u30d5\u30a9\u30fc\u30e0\u3092\u4f7f\u3046\u3068\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u3084 HTML \u306e\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u91cf\u8efd\u6e1b\u304c\u53ef\u80fd\u306b\u306a\u308b\u3002\n\u3000\u30d5\u30a9\u30fc\u30e0\u3092\u4f7f\u3046\u306b\u306f\u307e\u305a myapp/forms.py \u306b\u81ea\u4f5c\u30d5\u30a9\u30fc\u30e0\u3092\u5b9a\u7fa9\u3059\u308b\u3002\u305d\u3057\u3066 views.py \u3067 POST/GET \u306b\u5fdc\u3058\u3066\u30d0\u30ea\u30c7\u30fc\u30b7\u30e7\u30f3\u306a\u3069\u3092\u884c\u3044\u3001template \u306b\u30d5\u30a9\u30fc\u30e0\u30fb\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u6e21\u3059\u3053\u3068\u3067\u30d5\u30a9\u30fc\u30e0\u3092\u63cf\u753b\u3092\u88dc\u52a9\u3059\u308b\u3002\u30d5\u30a9\u30fc\u30e0\u306e\u30c7\u30fc\u30bf\u306f\u4e00\u9023\u306e\u51e6\u7406\u306e\u9593 myapp/forms.py \u306e\u30d5\u30a9\u30fc\u30e0\u3067\u7ba1\u7406\u3055\u308c\u308b\u3002\n\u3000\u30ed\u30b0\u30a4\u30f3\u30fb\u30d5\u30a9\u30fc\u30e0\u306e\u4f5c\u6210\u4f8b\u3002\n\n```py3:forms.py\nfrom django import forms\n\nclass LoginForm(forms.Form):\n        username = forms.CharField(label='User name', max_length=128)\n        password = forms.CharField(label='Password', widget=forms.PasswordInput)\n\n```\n\n# Auth\n\n\u3000\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u3002\n\u3000\u53c2\u7167: https://docs.djangoproject.com/ja/1.9/ref/contrib/auth/\n\n## User\n\n\u3000\u8a8d\u8a3c\u30b7\u30b9\u30c6\u30e0\u306e\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306f\u30e2\u30c7\u30eb `User` \u3067\u7ba1\u7406\u3055\u308c\u308b\u3002\u73fe\u5728\u306e\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306e\u4e00\u89a7\u3002\n\n```py3:\nfrom django.contrib.auth.models import User\n\nusers = User.objects.all()\nprint(users)\n\n```\n\n\u3000`User` \u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u30d1\u30d6\u30ea\u30c3\u30af\u306a\u5c5e\u6027\u4e00\u89a7\u3002\n\n```py3:\nDoesNotExist\nMeta\nMultipleObjectsReturned\nREQUIRED_FIELDS\nUSERNAME_FIELD\nbackend\ncheck\ncheck_password\nclean\nclean_fields\ndate_error_message\ndate_joined\ndelete\nemail\nemail_user\nfirst_name\nfrom_db\nfull_clean\nget_all_permissions\nget_deferred_fields\nget_full_name\nget_group_permissions\nget_next_by_date_joined\nget_previous_by_date_joined\nget_session_auth_hash\nget_short_name\nget_username\ngroups\nhas_module_perms\nhas_perm\nhas_perms\nhas_usable_password\nid\nis_active\nis_anonymous\nis_authenticated\nis_staff\nis_superuser\nlast_login\nlast_name\nlogentry_set\nnatural_key\nnormalize_username\nobjects\npassword\npk\nprepare_database_save\nrefresh_from_db\nsave\nsave_base\nserializable_value\nset_password\nset_unusable_password\nunique_error_message\nuser_permissions\nusername\nusername_validator\nvalidate_unique\n```\n\n## Create\n\n\u3000\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306e\u4f5c\u6210\u3068\u4fdd\u5b58\u3002\n\n```py3:\nfrom django.contrib.auth.models import User\n\nuser = User.objects.create_user('ono', 'lennon@thebeatles.com', 'onopassword')\nuser.last_name = 'Yoko'\nuser.save()\n\n```\n\n## Update\n\n\u3000\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306e\u66f4\u65b0\u3068\u4fdd\u5b58\u3002\n\n```py3:\nfrom django.contrib.auth.models import User\n\nuser = User.objects.get(username='ono')\nuser.set_password('new password')\nuser.save()\n\n```\n\n## Authenticate and Processing\n\n\u3000Authenticate(\u8a8d\u8a3c\u3059\u308b\uff09\u3068\u5206\u5c90\u51e6\u7406\u3002\n\n```py3:\nfrom django.contrib.auth import authenticate\n\nuser = authenticate(username='ono', password='secret')\nif user is not None:\n    # \u8a8d\u8a3c\u306b\u6210\u529f\nelse:\n    # \u8a8d\u8a3c\u306b\u5931\u6557\n\n```\n\n## Permission\n\n\u3000\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u306f\u30c7\u30fc\u30bf\u3078\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u9650\u3092\u6301\u3064\u3002\u6a29\u9650\u306f\u30e2\u30c7\u30eb `Permission` \u3067\u5b9a\u7fa9\u3055\u308c\u308b\u3002\u5404\u30e2\u30c7\u30eb\u306b\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 add, change, delete \u306e\u6a29\u9650\u304c\u7528\u610f\u3055\u308c\u308b\u3002\n\n```py3:\nfrom django.contrib.auth.models import Permission\n\nperms = Permission.objects.all()\nprint(perms)\n\n```\n\n### has_perm\n\n\u3000\u30e6\u30fc\u30b6\u30fc\u304c\u7279\u5b9a\u306e\u30e2\u30c7\u30eb\u306b\u5bfe\u3057\u3066 add, change, delete \u306e\u6a29\u9650\u3092\u6301\u3063\u3066\u3044\u308b\u304b\u3069\u3046\u304b\u306f has_perm() \u3067\u78ba\u8a8d\u3067\u304d\u308b\u3002Foo \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30e2\u30c7\u30eb Bar \u306b\u3064\u3044\u3066\u78ba\u8a8d\u3059\u308b\u5834\u5408\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306b\u66f8\u5f0f\u3092\u6e21\u3057\u3066\u771f\u507d\u5024\u3092\u53d6\u308b\u3002\n\n```py3:\nuser.has_perm('foo.add_bar') # \u30e6\u30fc\u30b6\u30fc\u304c Foo \u30a2\u30d7\u30ea\u306e Bar \u30e2\u30c7\u30eb\u306b add \u6a29\u9650\u3092\u6301\u3064\u306a\u3089 True\nuser.has_perm('foo.change_bar')\nuser.has_perm('foo.delete_bar')\n\n```\n\n### Create, Add, Remove\n\n\u3000\u30e6\u30fc\u30b6\u30fc\u306b\u6a29\u9650\u3092\u4ed8\u4e0e\u3059\u308b\u5834\u5408\u306f\u3001\u307e\u305a Permission \u3067\u6a29\u9650\u3092\u53d6\u5f97\u3059\u308b\u304b\u4f5c\u6210\u3059\u308b\u3002\u305d\u306e\u6a29\u9650\u3092 user.user_permissions.add(Permission) \u3067\u30e6\u30fc\u30b6\u30fc\u306b\u4ed8\u4e0e\u3059\u308b\u3002\n\u3000Django \u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u3067 add, change, delete \u306e\u6a29\u9650\u3092\u30e2\u30c7\u30eb\u306b\u5408\u308f\u305b\u3066 DB \u306e\u30c6\u30fc\u30d6\u30eb auth_permission \u306b\u4f5c\u6210\u3059\u308b\u306e\u3067\u3001\u3053\u308c\u3089\u306e\u6a29\u9650\u306b\u3064\u3044\u3066\u306f DB \u304b\u3089\u53d6\u5f97\u3067\u304d\u308b\u3002\u4ed8\u4e0e\u3057\u305f\u6a29\u9650\u3092\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306b\u53cd\u6620\u3055\u305b\u305f\u3044\u5834\u5408\u306f\u3001DB \u304b\u3089\u30e6\u30fc\u30b6\u30fc\u3092\u518d\u53d6\u5f97\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n```py3:\nfrom django.contrib.auth.models import User, Permission\n\nuser = User.objects.get(username='ono')\n\n# ono \u306e Foo \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e Bar \u30e2\u30c7\u30eb\u306b\u5bfe\u3059\u308b change \u306e\u6a29\u9650\u306f \nprint(user.has_perm('foo.change_bar'))\n\n# Bar \u30e2\u30c7\u30eb\u3078\u306e change \u6a29\u9650\u3092\u53d6\u5f97\u5f8c\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u4ed8\u4e0e\u3059\u308b\nperm = Permission.objects.get(codename='change_bar')\nuser.user_permissions.add(perm)\n\n# \u6a29\u9650\u3092\u518d\u78ba\u8a8d\u3059\u308b\u304c False\nprint(user.has_perm('foo.change_bar'))\n\n# \u6a29\u9650\u3092\u4ed8\u4e0e\u3057\u305f\u3089 DB \u304b\u3089\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u3092\u518d\u53d6\u5f97(fetch)\u3059\u308b\nuser = User.objects.get(pk=user.id)\nprint(user.has_perm('foo.change_bar'))\n\n# \u6a29\u9650\u306e\u5265\u596a\u306f user_permissions.remove(Permission) \u3092\u4f7f\u3046\nuser.user_permissions.remove(perm)\nuser = User.objects.get(pk=user.id)\nprint(user.has_perm('foo.change_bar'))\n```\n\n### User's permissions\n\n\u3000\u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u4e00\u89a7\u3002\n\n```py3:\nperms = user.get_all_permissions()\nprint(perms)\n\nperms = user.user_permissions.all()\nprint(perms)\n\n```\n\n### In views.py\n\n\u3000views.py \u3067\u8a8d\u8a3c\u30e6\u30fc\u30b6\u30fc\u3092\u5224\u5225\u3059\u308b\u3002\n\n```py3:\ndef example_view(request):\n\tif request.user.is_authenticated:\n\t    # \u3053\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u8a8d\u8a3c\u6e08\u307f\n\telse:\n\t    # \u3053\u306e\u30e6\u30fc\u30b6\u30fc\u306f\u672a\u8a8d\u8a3c\n\n```\n", "tags": ["python3", "Django"]}