{"context": "\u6700\u8fd1Apache CloudStack\u306b\u8a66\u3057\u305f\u3044\u6a5f\u80fd\u304c\u8272\u3005\u3068\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3055\u304f\u3063\u3068\u8a66\u305b\u308b\u3088\u3046\u306bVagrant+VirtualBox\u3067Apache CloudStack\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002\n\nDevCloud\u3068\u306f\nDevCloud\u306fVagrant\u3068VirtualBox\u3067\u7c21\u5358\u306bApache CloudStack\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\nDevCloud - Apache Cloudstack - Apache Software Foundation\nDevCloud\u81ea\u4f53\u306f\u6570\u5e74\u524d\u304b\u3089\u3042\u308a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7d39\u4ecb\u8a18\u4e8b\u3082\u3042\u308a\u307e\u3059\u3002\u57fa\u672c\u7684\u306a\u90e8\u5206\u306f\u5927\u304d\u304f\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\u3001\u6570\u5e74\u524d\u306e\u8a18\u4e8b\u3067\u5909\u308f\u3063\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308b\u306e\u3067\u4eca\u56de\u306f\u65b0\u3057\u304f\u3084\u308a\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\nCloud OS\u300cApache CloudStack\u300d\u3092\u304a\u624b\u8efd\u306b\u4f7f\u3063\u3066\u307f\u308b\u65b9\u6cd5\n\nDevCloud\u304c\u4f5c\u6210\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\nDevCloud\u306f\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc(management)\u3068\u30db\u30b9\u30c8(xenserver)\u306e2\u53f0\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092VirtualBox\u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc\u306b\u306fCloudStack\u306e\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc\u306e\u4ed6\u306b\u3082NFS\u3084MySQL\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u306b\u306fXenServer 6.2\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\u3053\u306e2\u53f0\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306bCloudStack\u306e\u52d5\u4f5c\u306b\u5fc5\u8981\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u307b\u3068\u3093\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001CloudStack\u306e\u8a2d\u5b9a\u3060\u3051\u3067\u69d8\u3005\u306a\u69cb\u6210\u3092\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nDevCloud\u3092\u4f7f\u3063\u305fCloudStack\u69cb\u7bc9\u624b\u9806\n\n\u4f5c\u6210\u3059\u308b\u74b0\u5883\u306b\u3064\u3044\u3066\n\n\u691c\u8a3c\u6a5f\n\nMac OS X 10.11.6 (El Capitan)\n\n\n\u30d7\u30ed\u30bb\u30c3\u30b5 1.4GHz Intel Core i5\n\u30e1\u30e2\u30ea 8GB 1600MHz DDR3\n\n\n\n\n\u30d0\u30fc\u30b8\u30e7\u30f3\n\nVirtualBox (5.0.26)\nVagrant (1.8.5)\nvagrant-berkshelf (5.0.0)\nvagrant-omnibus (1.4.1)\nChefDK (0.17.17)\n\n\nCloudStack\n\u4eca\u56de\u306fApache CloudStack 4.9\u3000\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u4ed6\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3082\u5927\u304d\u304f\u624b\u9806\u306f\u5909\u308f\u3089\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\nCloudStack Packages | The CloudStack Company\n\n\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u6210\n\u4eca\u56de\u306fAdvanced\u30be\u30fc\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nMarvin\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308c\u3070Basic\u30be\u30fc\u30f3\u3082\u540c\u3058\u3084\u308a\u65b9\u3067\u4f5c\u6210\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u30d7\u30e9\u30a4\u30de\u30ea\u30b9\u30c8\u30ec\u30fc\u30b8\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306eMarvin\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u306f\u30d7\u30e9\u30a4\u30de\u30ea\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30db\u30b9\u30c8(xenserver)\u306e\u30ed\u30fc\u30ab\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u30ed\u30fc\u30ab\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3068NFS\u3067\u306f\u4f7f\u3044\u65b9\u304c\u7570\u306a\u308b\u3068\u3053\u308d\u304c\u3044\u304f\u3064\u304b\u3042\u308b\u306e\u3067\u3069\u3061\u3089\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u3066\u898b\u307e\u3059\u3002\n\n\u5fc5\u8981\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n\u307e\u305a\u3001\u4ee5\u4e0b\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\nVirtualBox\nVagrant\nChefDK\n\nDevCloud\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092Chef\u3067\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3057\u307e\u3059\u3002Chef\u3067\u306e\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306b\u5fc5\u8981\u3068\u306a\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ vagrant plugin install vagrant-berkshelf vagrant-omnibus\n\n\nMarvin\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\u30be\u30fc\u30f3\u3092\u69cb\u7bc9\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308bMarvin\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306bJenkins\u306e\u6210\u679c\u7269\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u304c\u697d\u3060\u3068\u601d\u3044\u307e\u3059\u3002Marvin\u304c\u306a\u304f\u3066\u3082CloudStack\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3067\u304d\u308b\u306e\u3067\u3001\u4e0a\u624b\u304f\u884c\u304b\u306a\u3051\u308c\u3070\u3068\u308a\u3042\u3048\u305a\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u3082\u826f\u3044\u3067\u3059\u3002\n$ pip install http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-2.0.4.zip\n$ curl -O https://builds.apache.org/job/cloudstack-marvin/lastBuild/artifact/tools/marvin/dist/Marvin*.tar.gz/*zip*/dist.zip\n$ unzip -o dist.zip\n$ pip install Marvin*.tar.gz\n\n\u4f9d\u5b58\u95a2\u4fc2\u306b\u3042\u308bcryptography\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u306f\u3001\u4e0b\u8a18\u30ea\u30f3\u30af\u3092\u53c2\u8003\u306bcryptography\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304b\u3089\u518d\u5ea6pip install Marvin*.tar.gz\u3059\u308b\u3068\u3046\u307e\u304f\u3044\u304f\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\nInstallation \u2014 Cryptography 1.6.dev1 documentation\n\nVirtaulBox\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\nMac\u306e\u5834\u5408\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306bVirtualBox\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\uff08Windows\u306e\u5834\u5408\u306f\u30a2\u30c0\u30d7\u30bf\u306e\u540d\u524d\u304c\u9055\u3046\u3088\u3046\u3067\u3059\u3002README\u306b\u3057\u305f\u304c\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff09\n\nVirtualBox\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u74b0\u5883\u8a2d\u5b9a\u300d\u3092\u958b\u304d\u307e\u3059\u3002\n\u300c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u300d\u30bf\u30d6\u306e\u300c\u30db\u30b9\u30c8\u30aa\u30f3\u30ea\u30fc\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u300d\u3092\u958b\u304d\u307e\u3059\u3002\nvboxnet0, vboxnet1, vboxnet2\u3092\u305d\u308c\u305e\u308c\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\uff08DHCP\u30b5\u30fc\u30d0\u30fc\u306f\u300cDHCP\u30b5\u30fc\u30d0\u30fc\u300d\u30bf\u30d6\u306e\u300c\u30b5\u30fc\u30d0\u30fc\u3092\u6709\u52b9\u5316\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057\u3066\u304f\u3060\u3055\u3044\uff09\n\n\nvboxnet0\n\n\nIPv4\u30a2\u30c9\u30ec\u30b9: 192.168.22.1\nIPv4\u30cd\u30c3\u30c8\u30de\u30b9\u30af: 255.255.0\nDHCP\u30b5\u30fc\u30d0\u30fc: \u7121\u52b9\n\n\nvboxnet1\n\n\nIPv4\u30a2\u30c9\u30ec\u30b9: 192.168.23.1\nIPv4\u30cd\u30c3\u30c8\u30de\u30b9\u30af: 255.255.0\nDHCP\u30b5\u30fc\u30d0\u30fc: \u7121\u52b9\n\n\nvboxnet2\n\n\nIPv4\u30a2\u30c9\u30ec\u30b9: 192.168.24.1\nIPv4\u30cd\u30c3\u30c8\u30de\u30b9\u30af: 255.255.0\nDHCP\u30b5\u30fc\u30d0\u30fc: \u7121\u52b9\n\n\n\n\nVagrant 1.8.5\u306e\u4e0d\u5177\u5408\u5bfe\u5fdc\nVagrant\u306e\u30d0\u30fc\u30b8\u30e7\u30f31.8.5\u306b\u306fauthorized_keys\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u306a\u3044\u4e0d\u5177\u5408\u304c\u3042\u308b\u306e\u3067plugins/guests/linux/cap/public_key.rb\u3092\u63a2\u3057\u3066\uff08\u79c1\u306e\u74b0\u5883\u3067\u306f/opt/vagrant/embedded/gems/gems/vagrant-1.8.5/plugins/guests/linux/cap/public_key.rb\uff09\u6b21\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n1.8.5\u4ee5\u5916\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u4fee\u6b63\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\nfix for #7610 (incorrect permissions on ~/.ssh/authorized_keys causes authentication failure after insecure keypair replacement) by Poohblah \u00b7 Pull Request #7611 \u00b7 mitchellh/vagrant \u00b7 GitHub\n\nplugins/guests/linux/cap/public_key.rb\n             if test -f ~/.ssh/authorized_keys; then\n               grep -v -x -f '#{remote_path}' ~/.ssh/authorized_keys > ~/.ssh/authorized_keys.tmp\n               mv ~/.ssh/authorized_keys.tmp ~/.ssh/authorized_keys\n+              chmod 0600 ~/.ssh/authorized_keys\n             fi\n\n\n\nCloudStack\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\nDevCloud\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fCloudStack\u306e\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067git clone\u7b49\u3067\u53d6\u5f97\u3057\u307e\u3059\u3002\n$ git clone https://github.com/apache/cloudstack.git\n\nAdvanced\u30be\u30fc\u30f3\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\ncloudstack/tools/devcloud4\u306b\u306fBasic\u30be\u30fc\u30f3\u7528\u306e\u8a2d\u5b9a\u3082\u3042\u308b\u306e\u3067\u3001Basic\u30be\u30fc\u30f3\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u305d\u3061\u3089\u3092\u4f7f\u3046\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n$ cd cloudstack/tools/devcloud4/binary-installation-advanced\n\n\nVagrantfile\u3068chef_configuration.json\u306e\u4fee\u6b63\n\nChef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092latest\u306b\u5909\u66f4\n\u5143\u306eVagrantfile\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bChef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b11.16.4\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u306e\u307e\u307e\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067:latest\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\nVagrantfile\n-    management.omnibus.chef_version = \"11.16.4\" \n+    management.omnibus.chef_version = :latest\n\n\n\nSyncedFolder\u3092\u7121\u52b9\u5316\n\u79c1\u306e\u74b0\u5883\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306eSyncedFolder\u3092\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u306e\u3067\u7121\u52b9\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nVagrantfile\n@@ -40,6 +40,7 @@ end\n\n Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n\n+  config.vm.synced_folder \".\", \"/vagrant\", disabled: true\n   config.vm.define 'xenserver' do |xenserver|\n     xenserver.vm.box = 'duffy/xenserver'\n\n\n\nChef\u30ec\u30b7\u30d4\u306e\u4fee\u6b63\n\u305d\u306e\u307e\u307e\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u6642\u306bMarvin\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3059\u308b\u306e\u3067../common/binary-installation/recipes/management_server.rb\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u51e6\u7406\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\n\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3044\u305f\u30ed\u30fc\u30ab\u30eb\u306eMarvin\u3067\u30be\u30fc\u30f3\u306e\u4f5c\u6210\u3092\u884c\u3046\u306e\u3067\u3001\u3053\u306e\u51e6\u7406\u306f\u5b9f\u884c\u3055\u308c\u306a\u304f\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n../common/binary-installation/recipes/management_server.rb\n@@ -17,7 +17,7 @@\n #  under the License.\n #\n\n-include_recipe 'cloudstack::marvin'\n+# include_recipe 'cloudstack::marvin'\n include_recipe 'cloudstack::management_server'\n\n cloudstack_setup_database node['cloudstack']['db']['host'] do\n\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u306e\u5909\u66f4\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u306fxenserver\u304c6GB\u3001management\u304c2GB\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u4f7f\u7528\u3059\u308b\u30de\u30b7\u30f3\u306b\u3088\u3063\u3066\u306f\u5927\u304d\u3059\u304e\u3066\u52d5\u304b\u305b\u306a\u3044\u306e\u3067\u8abf\u6574\u3057\u307e\u3059\u3002\n\u79c1\u306e\u74b0\u5883\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\nVagrantfile\n@@ -75,7 +75,7 @@ Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n       v.customize ['modifyvm', :id, '--hostonlyadapter2', virtualbox_interface_0]\n       v.customize ['modifyvm', :id, '--hostonlyadapter3', virtualbox_interface_1]\n       v.customize ['modifyvm', :id, '--hostonlyadapter4', virtualbox_interface_2]\n-      v.customize ['modifyvm', :id, '--memory', 6144]\n+      v.customize ['modifyvm', :id, '--memory', 2048]\n     end\n\n     ## Tweak kernel\n@@ -92,7 +92,7 @@ Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n     management.vm.network 'forwarded_port', guest: 8080, host: 8080\n\n     management.vm.provider 'virtualbox' do |v|\n-      v.customize ['modifyvm', :id, '--memory', 2048]\n+      v.customize ['modifyvm', :id, '--memory', 512]\n       v.customize ['modifyvm', :id, '--hostonlyadapter2', virtualbox_interface_0]\n       v.customize ['modifyvm', :id, '--hostonlyadapter3', virtualbox_interface_1]\n     end\n\n\n\nCloudStack\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u5909\u66f4\nchef_configuration.json\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u3068\u30b7\u30b9\u30c6\u30e0VM\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306eURL\u3092\u69cb\u7bc9\u3057\u305f\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3057\u307e\u3059\u3002\n\nchef_configuration.json\n@@ -24,12 +24,11 @@\n         \"path\": \"/exports/primary\"\n       },\n       \"hypervisor_tpl\": {\n-        \"xenserver\": \"http://packages.shapeblue.com/systemvmtemplate/4.5/systemvm64template-4.5-xen.vhd.bz2\"\n+        \"xenserver\": \"https://packages.shapeblue.com/systemvmtemplate/4.6/systemvm64template-master-4.6.0-xen.vhd.bz2\"\n       },\n       \"configuration\": \"/vagrant/marvin.cfg.erb\",\n-      \"yum_repo\": \"http://packages.shapeblue.com/cloudstack/testing/centos/4.5/\",\n-      \"apt_repo\": \"http://packages.shapeblue.com/cloudstack/testing/debian/4.5/\",\n-      \"version\": \"4.5.0\"\n+      \"yum_repo\": \"http://packages.shapeblue.com/cloudstack/main/centos/4.9/\",\n+      \"version\": \"4.9.0\"\n   },\n   \"iptables\": {\n     \"lans\": [\"eth1\", \"eth2\"]\n\n\n\nCloudStack\u8a2d\u5b9a\u306e\u521d\u671f\u5024\u306e\u5909\u66f4\nCloudStack\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306bMarvin\u3092\u4f7f\u3063\u3066\u8a2d\u5b9a\u3092\u884c\u3046\u305f\u30818096\u756a\u30dd\u30fc\u30c8\u3092\u8a31\u53ef\u3057\u305f\u308a\u3001CPU\u3084\u30e1\u30e2\u30ea\u304c\u5c11\u306a\u3044\u74b0\u5883\u3067\u3082\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u306e\u30b9\u30da\u30c3\u30af\u3092\u5909\u66f4\u3057\u305f\u308a\u3057\u307e\u3059\u3002\n\u8a2d\u5b9a\u5909\u66f4\u306fprefill.sql\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u76f4\u63a5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\nSyncedFolder\u3092\u7121\u52b9\u306b\u3057\u305f\u306e\u3067\u30d1\u30b9\u3092\u4fee\u6b63\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\nVagrantfile\n@@ -110,6 +111,7 @@ Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n\n     CHEF_CONFIGURATION = JSON.parse(Pathname(__FILE__).dirname.join('chef_configuration.json').read)\n\n+    management.vm.provision :file, source: \"./prefill.sql\", destination: \"/tmp/prefill.sql\"\n     management.vm.provision :chef_solo do |chef|\n       chef.log_level = :debug\n       chef.run_list = CHEF_CONFIGURATION.delete('run_list')\n\n\n\nchef_configuration.json\n@@ -15,7 +15,7 @@\n         \"rootpassword\": \"password\",\n         \"management_server_key\": \"password\",\n         \"database_key\": \"password\",\n-        \"prefill\": \"/vagrant/prefill.sql\"\n+        \"prefill\": \"/tmp/prefill.sql\"\n       },\n       \"secondary\": {\n         \"path\": \"/exports/secondary\"\n\n\n\u5143\u306eprefill.sql\u306fcloudstack/tools/devcloud4/prefill.sql\u306b\u3042\u308b\u306e\u3067\u30b3\u30d4\u30fc\u3057\u3066\u5fc5\u8981\u306a\u7b87\u6240\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\u4e3b\u306a\u5909\u66f4\u70b9\u306f\u4ee5\u4e0b\u306e2\u3064\u3067\u3059\u3002\n\nNFS\u7528\u306e\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u3092\u8ffd\u52a0\n\u30aa\u30fc\u30d0\u30fc\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u4fc2\u6570\u3068\u95be\u5024\u3092\u5f15\u304d\u4e0a\u3052\n\n$ cp ../prefill.sql .\n\n\nprefill.sql\n@@ -15,9 +15,12 @@\n -- specific language governing permissions and limitations\n -- under the License.\n\n-REPLACE INTO `cloud`.`disk_offering` (id, name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES (17, 'Devcloud4 offering', UUID(), 'Devcloud4 offering', NOW(), 1, 'Service', 0);\n+REPLACE INTO `cloud`.`disk_offering` (id, name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES (17, 'Devcloud4 offering - Local Storage', UUID(), 'Devcloud4 offering - Local Storage', NOW(), 1, 'Service', 0);\n REPLACE INTO `cloud`.`service_offering` (id, cpu, speed, ram_size) VALUES (17, 1, 200, 256);\n-REPLACE INTO `cloud`.`disk_offering` (name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES ('Devcloud4 disk offering', UUID(), 'Devcloud4 disk offering', NOW(), 1, 'Disk', 1073741824);\n+REPLACE INTO `cloud`.`disk_offering` (name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES ('Devcloud4 disk offering - Local Storage', UUID(), 'Devcloud4 disk offering - Local Storage', NOW(), 1, 'Disk', 1073741824);\n+REPLACE INTO `cloud`.`disk_offering` (id, name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES (19, 'Devcloud4 offering', UUID(), 'Devcloud4 offering', NOW(), 0, 'Service', 0);\n+REPLACE INTO `cloud`.`service_offering` (id, cpu, speed, ram_size) VALUES (19, 1, 200, 256);\n+REPLACE INTO `cloud`.`disk_offering` (name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES ('Devcloud4 disk offering', UUID(), 'Devcloud4 disk offering', NOW(), 0, 'Disk', 1073741824);\n REPLACE INTO `cloud`.`configuration` (category, instance, component, name, value) VALUES ('Advanced', 'DEFAULT', 'management-server', 'integration.api.port', '8096');\n REPLACE INTO `cloud`.`configuration` (instance, name,value) VALUE('DEFAULT','router.ram.size', '256');\n REPLACE INTO `cloud`.`configuration` (instance, name,value) VALUE('DEFAULT','router.cpu.mhz','256');\n@@ -31,4 +34,10 @@\n REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'expunge.interval', '60');\n REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'management.network.cidr', '0.0.0.0/0');\n REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'secstorage.allowed.internal.sites', '0.0.0.0/0');\n-UPDATE `cloud`.`vm_template` SET unique_name=\"Macchinina\",name=\"Macchinina\",url=\"http://dl.openvm.eu/cloudstack/macchinina/x86_64/macchinina-xen.vhd.bz2\",checksum=\"30985504bc31bf0cd3b9d2c6ca7944d3\",display_text=\"Macchinina\" where id=5;\n\\ No newline at end of file\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'cluster.cpu.allocated.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'cluster.memory.allocated.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'pool.storage.allocated.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'pool.storage.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'storage.overprovisioning.factor', '3');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'mem.overprovisioning.factor', '3');\n+UPDATE `cloud`.`vm_template` SET unique_name=\"Macchinina\",name=\"Macchinina\",url=\"http://dl.openvm.eu/cloudstack/macchinina/x86_64/macchinina-xen.vhd.bz2\",checksum=\"30985504bc31bf0cd3b9d2c6ca7944d3\",display_text=\"Macchinina\" where id=5;\n\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u8d77\u52d5\nvagrant up\u3092\u5b9f\u884c\u3059\u308b\u3068xenserver\u3068management\u306e2\u53f0\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u304c\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3059\u3002\n$ vagrant up\n\n\u5b8c\u4e86\u5f8c\u306b\u30d6\u30e9\u30a6\u30b6\u3067http://192.168.22.5:8080/client/\u307e\u305f\u306fhttp://localhost:8080/client/\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068CluodStack\u306eUI\u304c\u958b\u304d\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u30fc\u30cd\u30fc\u30e0: admin\u3001\u30d1\u30b9\u30ef\u30fc\u30c9: password\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002\n\uff08CloudStack\u306eUI\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u5b8c\u4e86\u3057\u3066\u304b\u3089\u6570\u5206\u304b\u304b\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\uff09\n\n\u30be\u30fc\u30f3\u4f5c\u6210\nMarvin\u3092\u4f7f\u3063\u3066\u30be\u30fc\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\nmarvin.cfg.erb\u3092\u30b3\u30d4\u30fc\u3057\u3066\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n$ cp marvin.cfg.erb marvin.cfg\n\n\nmarvin.cfg\n@@ -109,15 +109,15 @@\n     },\n     \"mgtSvr\": [\n         {\n-            \"mgtSvrIp\": \"<%= @management_server_ip %>\",\n-            \"port\": <%= @management_server_port %>\n+            \"mgtSvrIp\": \"192.168.22.5\",\n+            \"port\": 8096\n         }\n     ],\n     \"dbSvr\": {\n-        \"dbSvr\": \"<%= @database_server_ip %>\",\n-        \"port\": <%= @database_server_port %>,\n-        \"user\": \"<%= @database_user %>\",\n-        \"passwd\": \"<%= @database_password %>\",\n-        \"db\": \"<%= @database %>\"\n+        \"dbSvr\": \"192.168.22.5\",\n+        \"port\": 3306,\n+        \"user\": \"cloud\",\n+        \"passwd\": \"cloud\",\n+        \"db\": \"cloud\"\n     }\n\n\n\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30be\u30fc\u30f3\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n$ python ../../../tools/marvin/marvin/deployDataCenter.py -i marvin.cfg\n\nUI\u304b\u3089\u300cInfrastructure > System VMs\u300d\u3092\u78ba\u8a8d\u3057\u3066\u30012\u53f0\u306eVM(SSVM, CPVM)\u304c\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n\n\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210\n\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\u57fa\u672c\u7684\u306b\u306f\u901a\u5e38\u901a\u308a\u306b\u4f5c\u6210\u3059\u308c\u3070\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u666e\u901a\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u3092\u4f7f\u3046\u3068\u5927\u304d\u3059\u304e\u3066\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u306e\u5236\u9650\u306b\u5f15\u3063\u304b\u304b\u3063\u305f\u308a\u3059\u308b\u306e\u3067prefill.sql\u3067\u8ffd\u52a0\u3057\u305f\u4ee5\u4e0b\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u3092\u4f7f\u3046\u3068\u826f\u3044\u3067\u3059\u3002\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8: Macchinina\nCompute Offering\n\n\nDevcloud4 offering\nDevcloud4 offering - Local Storage\n\n\nDisk Offering\n\n\nDevcloud4 disk offering\nDevcloud4 disk offering - Local Storage\n\n\n\nMacchinina\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u6210\u3057\u305fVM\u306b\u306f\u3001\u30e6\u30fc\u30b6\u30fc: root\u3001\u30d1\u30b9\u30ef\u30fc\u30c9: password\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002\n\n\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\n\u30b7\u30b9\u30c6\u30e0VM\u304c\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u306a\u304b\u3063\u305f\u308a\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u3066\u3057\u307e\u3046\u5834\u5408\u306fmanagent\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u306e\u5236\u9650\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u3044\u308b\u30b1\u30fc\u30b9\u304c\u591a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n$ vagrant ssh management\n$ sudo less /var/log/cloudstack/management/management-server.log\n\n\u6700\u8fd1Apache CloudStack\u306b\u8a66\u3057\u305f\u3044\u6a5f\u80fd\u304c\u8272\u3005\u3068\u8ffd\u52a0\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001\u3055\u304f\u3063\u3068\u8a66\u305b\u308b\u3088\u3046\u306bVagrant+VirtualBox\u3067Apache CloudStack\u3092\u52d5\u304b\u3057\u3066\u307f\u307e\u3059\u3002\n\n# DevCloud\u3068\u306f\n\nDevCloud\u306fVagrant\u3068VirtualBox\u3067\u7c21\u5358\u306bApache CloudStack\u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3067\u304d\u308b\u30c4\u30fc\u30eb\u3067\u3059\u3002\n\n[DevCloud - Apache Cloudstack - Apache Software Foundation](https://cwiki.apache.org/confluence/display/CLOUDSTACK/DevCloud)\n\nDevCloud\u81ea\u4f53\u306f\u6570\u5e74\u524d\u304b\u3089\u3042\u308a\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7d39\u4ecb\u8a18\u4e8b\u3082\u3042\u308a\u307e\u3059\u3002\u57fa\u672c\u7684\u306a\u90e8\u5206\u306f\u5927\u304d\u304f\u5909\u308f\u3063\u3066\u3044\u306a\u3044\u3067\u3059\u304c\u3001\u6570\u5e74\u524d\u306e\u8a18\u4e8b\u3067\u5909\u308f\u3063\u3066\u3044\u308b\u90e8\u5206\u3082\u3042\u308b\u306e\u3067\u4eca\u56de\u306f\u65b0\u3057\u304f\u3084\u308a\u76f4\u3057\u3066\u307f\u307e\u3059\u3002\n\n[Cloud OS\u300cApache CloudStack\u300d\u3092\u304a\u624b\u8efd\u306b\u4f7f\u3063\u3066\u307f\u308b\u65b9\u6cd5](http://www.slideshare.net/samemoon/20131116-osc-fukuoka)\n\n## DevCloud\u304c\u4f5c\u6210\u3059\u308b\u4eee\u60f3\u30de\u30b7\u30f3\n\nDevCloud\u306f\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc(management)\u3068\u30db\u30b9\u30c8(xenserver)\u306e2\u53f0\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u3092VirtualBox\u4e0a\u306b\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc\u306b\u306fCloudStack\u306e\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc\u306e\u4ed6\u306b\u3082NFS\u3084MySQL\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\u30db\u30b9\u30c8\u306b\u306fXenServer 6.2\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059\u3002\n\n\u3053\u306e2\u53f0\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u306bCloudStack\u306e\u52d5\u4f5c\u306b\u5fc5\u8981\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306f\u307b\u3068\u3093\u3069\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u306e\u3067\u3001CloudStack\u306e\u8a2d\u5b9a\u3060\u3051\u3067\u69d8\u3005\u306a\u69cb\u6210\u3092\u8a66\u3059\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n# DevCloud\u3092\u4f7f\u3063\u305fCloudStack\u69cb\u7bc9\u624b\u9806\n\n## \u4f5c\u6210\u3059\u308b\u74b0\u5883\u306b\u3064\u3044\u3066\n\n### \u691c\u8a3c\u6a5f\n\n* Mac OS X 10.11.6 (El Capitan)\n    * \u30d7\u30ed\u30bb\u30c3\u30b5 1.4GHz Intel Core i5\n    * \u30e1\u30e2\u30ea 8GB 1600MHz DDR3\n\n### \u30d0\u30fc\u30b8\u30e7\u30f3\n\n* VirtualBox (5.0.26)\n* Vagrant (1.8.5)\n* vagrant-berkshelf (5.0.0)\n* vagrant-omnibus (1.4.1)\n* ChefDK (0.17.17)\n\n### CloudStack\n\n\u4eca\u56de\u306fApache CloudStack 4.9\u3000\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\u4ed6\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u3082\u5927\u304d\u304f\u624b\u9806\u306f\u5909\u308f\u3089\u306a\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n[CloudStack Packages | The CloudStack Company](http://www.shapeblue.com/packages/)\n\n#### \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u69cb\u6210\n\n\u4eca\u56de\u306fAdvanced\u30be\u30fc\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\nMarvin\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u5909\u66f4\u3059\u308c\u3070Basic\u30be\u30fc\u30f3\u3082\u540c\u3058\u3084\u308a\u65b9\u3067\u4f5c\u6210\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n#### \u30d7\u30e9\u30a4\u30de\u30ea\u30b9\u30c8\u30ec\u30fc\u30b8\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306eMarvin\u306e\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3067\u306f\u30d7\u30e9\u30a4\u30de\u30ea\u30b9\u30c8\u30ec\u30fc\u30b8\u306b\u30db\u30b9\u30c8(xenserver)\u306e\u30ed\u30fc\u30ab\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u4f7f\u7528\u3059\u308b\u3088\u3046\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u30ed\u30fc\u30ab\u30eb\u30b9\u30c8\u30ec\u30fc\u30b8\u3068NFS\u3067\u306f\u4f7f\u3044\u65b9\u304c\u7570\u306a\u308b\u3068\u3053\u308d\u304c\u3044\u304f\u3064\u304b\u3042\u308b\u306e\u3067\u3069\u3061\u3089\u3082\u4f7f\u3048\u308b\u3088\u3046\u306b\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u66f8\u304d\u63db\u3048\u3066\u898b\u307e\u3059\u3002\n\n## \u5fc5\u8981\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a\n\n\u307e\u305a\u3001\u4ee5\u4e0b\u306e\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n* [VirtualBox](https://www.virtualbox.org/)\n* [Vagrant](https://www.vagrantup.com/)\n* [ChefDK](https://downloads.chef.io/chef-dk/)\n\nDevCloud\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092Chef\u3067\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u3057\u307e\u3059\u3002Chef\u3067\u306e\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u306b\u5fc5\u8981\u3068\u306a\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```bash\n$ vagrant plugin install vagrant-berkshelf vagrant-omnibus\n```\n\n### Marvin\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n\u30be\u30fc\u30f3\u3092\u69cb\u7bc9\u3059\u308b\u969b\u306b\u4f7f\u7528\u3059\u308bMarvin\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u6b21\u306e\u3088\u3046\u306b[Jenkins\u306e\u6210\u679c\u7269](https://builds.apache.org/job/cloudstack-marvin/)\u3092\u4f7f\u3063\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u306e\u304c\u697d\u3060\u3068\u601d\u3044\u307e\u3059\u3002Marvin\u304c\u306a\u304f\u3066\u3082CloudStack\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3067\u304d\u308b\u306e\u3067\u3001\u4e0a\u624b\u304f\u884c\u304b\u306a\u3051\u308c\u3070\u3068\u308a\u3042\u3048\u305a\u30b9\u30ad\u30c3\u30d7\u3057\u3066\u3082\u826f\u3044\u3067\u3059\u3002\n\n```bash\n$ pip install http://cdn.mysql.com/Downloads/Connector-Python/mysql-connector-python-2.0.4.zip\n$ curl -O https://builds.apache.org/job/cloudstack-marvin/lastBuild/artifact/tools/marvin/dist/Marvin*.tar.gz/*zip*/dist.zip\n$ unzip -o dist.zip\n$ pip install Marvin*.tar.gz\n```\n\n\u4f9d\u5b58\u95a2\u4fc2\u306b\u3042\u308bcryptography\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3067\u5931\u6557\u3059\u308b\u5834\u5408\u306f\u3001\u4e0b\u8a18\u30ea\u30f3\u30af\u3092\u53c2\u8003\u306bcryptography\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304b\u3089\u518d\u5ea6`pip install Marvin*.tar.gz`\u3059\u308b\u3068\u3046\u307e\u304f\u3044\u304f\u304b\u3082\u3057\u308c\u306a\u3044\u3067\u3059\u3002\n\n[Installation \u2014 Cryptography 1.6.dev1 documentation](https://cryptography.io/en/latest/installation/)\n\n### VirtaulBox\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\n\nMac\u306e\u5834\u5408\u306f\u4e0b\u8a18\u306e\u3088\u3046\u306bVirtualBox\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u8a2d\u5b9a\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\n\uff08Windows\u306e\u5834\u5408\u306f\u30a2\u30c0\u30d7\u30bf\u306e\u540d\u524d\u304c\u9055\u3046\u3088\u3046\u3067\u3059\u3002[README](https://github.com/apache/cloudstack/blob/master/tools/devcloud4/README.md)\u306b\u3057\u305f\u304c\u3063\u3066\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002\uff09\n\n1. VirtualBox\u306e\u30e1\u30cb\u30e5\u30fc\u304b\u3089\u300c\u74b0\u5883\u8a2d\u5b9a\u300d\u3092\u958b\u304d\u307e\u3059\u3002\n2. \u300c\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u300d\u30bf\u30d6\u306e\u300c\u30db\u30b9\u30c8\u30aa\u30f3\u30ea\u30fc\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u300d\u3092\u958b\u304d\u307e\u3059\u3002\n3. vboxnet0, vboxnet1, vboxnet2\u3092\u305d\u308c\u305e\u308c\u4e0b\u8a18\u306e\u3088\u3046\u306b\u8a2d\u5b9a\u3057\u307e\u3059\u3002\uff08DHCP\u30b5\u30fc\u30d0\u30fc\u306f\u300cDHCP\u30b5\u30fc\u30d0\u30fc\u300d\u30bf\u30d6\u306e\u300c\u30b5\u30fc\u30d0\u30fc\u3092\u6709\u52b9\u5316\u300d\u306e\u30c1\u30a7\u30c3\u30af\u3092\u5916\u3057\u3066\u304f\u3060\u3055\u3044\uff09\n\n* vboxnet0\n    * IPv4\u30a2\u30c9\u30ec\u30b9: 192.168.22.1\n    * IPv4\u30cd\u30c3\u30c8\u30de\u30b9\u30af: 255.255.0\n    * DHCP\u30b5\u30fc\u30d0\u30fc: \u7121\u52b9\n* vboxnet1\n    * IPv4\u30a2\u30c9\u30ec\u30b9: 192.168.23.1\n    * IPv4\u30cd\u30c3\u30c8\u30de\u30b9\u30af: 255.255.0\n    * DHCP\u30b5\u30fc\u30d0\u30fc: \u7121\u52b9\n* vboxnet2\n    * IPv4\u30a2\u30c9\u30ec\u30b9: 192.168.24.1\n    * IPv4\u30cd\u30c3\u30c8\u30de\u30b9\u30af: 255.255.0\n    * DHCP\u30b5\u30fc\u30d0\u30fc: \u7121\u52b9\n\n### Vagrant 1.8.5\u306e\u4e0d\u5177\u5408\u5bfe\u5fdc\n\nVagrant\u306e\u30d0\u30fc\u30b8\u30e7\u30f31.8.5\u306b\u306fauthorized_keys\u306e\u30d1\u30fc\u30df\u30c3\u30b7\u30e7\u30f3\u304c\u6b63\u3057\u304f\u8a2d\u5b9a\u3055\u308c\u306a\u3044\u4e0d\u5177\u5408\u304c\u3042\u308b\u306e\u3067`plugins/guests/linux/cap/public_key.rb`\u3092\u63a2\u3057\u3066\uff08\u79c1\u306e\u74b0\u5883\u3067\u306f`/opt/vagrant/embedded/gems/gems/vagrant-1.8.5/plugins/guests/linux/cap/public_key.rb`\uff09\u6b21\u306e\u3088\u3046\u306b\u4fee\u6b63\u3057\u307e\u3059\u3002\n1.8.5\u4ee5\u5916\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u306f\u4fee\u6b63\u306e\u5fc5\u8981\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n[fix for #7610 (incorrect permissions on ~/.ssh/authorized_keys causes authentication failure after insecure keypair replacement) by Poohblah \u00b7 Pull Request #7611 \u00b7 mitchellh/vagrant \u00b7 GitHub](https://github.com/mitchellh/vagrant/pull/7611/files)\n\n```diff:plugins/guests/linux/cap/public_key.rb\n             if test -f ~/.ssh/authorized_keys; then\n               grep -v -x -f '#{remote_path}' ~/.ssh/authorized_keys > ~/.ssh/authorized_keys.tmp\n               mv ~/.ssh/authorized_keys.tmp ~/.ssh/authorized_keys\n+              chmod 0600 ~/.ssh/authorized_keys\n             fi\n```\n\n### CloudStack\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u53d6\u5f97\n\nDevCloud\u306e\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u306fCloudStack\u306e\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u306b\u542b\u307e\u308c\u3066\u3044\u308b\u306e\u3067`git clone`\u7b49\u3067\u53d6\u5f97\u3057\u307e\u3059\u3002\n\n```bash\n$ git clone https://github.com/apache/cloudstack.git\n```\n\nAdvanced\u30be\u30fc\u30f3\u7528\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\n`cloudstack/tools/devcloud4`\u306b\u306fBasic\u30be\u30fc\u30f3\u7528\u306e\u8a2d\u5b9a\u3082\u3042\u308b\u306e\u3067\u3001Basic\u30be\u30fc\u30f3\u3092\u69cb\u7bc9\u3059\u308b\u5834\u5408\u306f\u305d\u3061\u3089\u3092\u4f7f\u3046\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n```bash\n$ cd cloudstack/tools/devcloud4/binary-installation-advanced\n```\n\n## Vagrantfile\u3068chef_configuration.json\u306e\u4fee\u6b63\n\n### Chef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3092latest\u306b\u5909\u66f4\n\n\u5143\u306eVagrantfile\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308bChef\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306b`11.16.4`\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u3059\u304c\u3001\u305d\u306e\u307e\u307e\u3060\u3068\u30a8\u30e9\u30fc\u306b\u306a\u308b\u306e\u3067`:latest`\u306b\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```diff:Vagrantfile\n-    management.omnibus.chef_version = \"11.16.4\" \n+    management.omnibus.chef_version = :latest\n```\n\n### SyncedFolder\u3092\u7121\u52b9\u5316\n\n\u79c1\u306e\u74b0\u5883\u3067\u306f\u30c7\u30d5\u30a9\u30eb\u30c8\u306eSyncedFolder\u3092\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u3068\u30a8\u30e9\u30fc\u306b\u306a\u3063\u305f\u306e\u3067\u7121\u52b9\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```diff:Vagrantfile\n@@ -40,6 +40,7 @@ end\n \n Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n \n+  config.vm.synced_folder \".\", \"/vagrant\", disabled: true\n   config.vm.define 'xenserver' do |xenserver|\n     xenserver.vm.box = 'duffy/xenserver'\n```\n\n### Chef\u30ec\u30b7\u30d4\u306e\u4fee\u6b63\n\n\u305d\u306e\u307e\u307e\u3067\u306f\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u6642\u306bMarvin\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306b\u5931\u6557\u3059\u308b\u306e\u3067`../common/binary-installation/recipes/management_server.rb`\u304b\u3089\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306e\u51e6\u7406\u3092\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u3057\u307e\u3059\u3002\n\n[\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304a\u3044\u305f\u30ed\u30fc\u30ab\u30eb\u306eMarvin](#\u5fc5\u8981\u306a\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3068\u8a2d\u5b9a)\u3067\u30be\u30fc\u30f3\u306e\u4f5c\u6210\u3092\u884c\u3046\u306e\u3067\u3001\u3053\u306e\u51e6\u7406\u306f\u5b9f\u884c\u3055\u308c\u306a\u304f\u3066\u3082\u554f\u984c\u3042\u308a\u307e\u305b\u3093\u3002\n\n```diff:../common/binary-installation/recipes/management_server.rb\n@@ -17,7 +17,7 @@\n #  under the License.\n #\n \n-include_recipe 'cloudstack::marvin'\n+# include_recipe 'cloudstack::marvin'\n include_recipe 'cloudstack::management_server'\n \n cloudstack_setup_database node['cloudstack']['db']['host'] do\n```\n\n### \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u306e\u5909\u66f4\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30e1\u30e2\u30ea\u30b5\u30a4\u30ba\u306fxenserver\u304c6GB\u3001management\u304c2GB\u3068\u306a\u3063\u3066\u3044\u307e\u3059\u304c\u3001\u4f7f\u7528\u3059\u308b\u30de\u30b7\u30f3\u306b\u3088\u3063\u3066\u306f\u5927\u304d\u3059\u304e\u3066\u52d5\u304b\u305b\u306a\u3044\u306e\u3067\u8abf\u6574\u3057\u307e\u3059\u3002\n\n\u79c1\u306e\u74b0\u5883\u3067\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n```diff:Vagrantfile\n@@ -75,7 +75,7 @@ Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n       v.customize ['modifyvm', :id, '--hostonlyadapter2', virtualbox_interface_0]\n       v.customize ['modifyvm', :id, '--hostonlyadapter3', virtualbox_interface_1]\n       v.customize ['modifyvm', :id, '--hostonlyadapter4', virtualbox_interface_2]\n-      v.customize ['modifyvm', :id, '--memory', 6144]\n+      v.customize ['modifyvm', :id, '--memory', 2048]\n     end\n \n     ## Tweak kernel\n@@ -92,7 +92,7 @@ Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n     management.vm.network 'forwarded_port', guest: 8080, host: 8080\n \n     management.vm.provider 'virtualbox' do |v|\n-      v.customize ['modifyvm', :id, '--memory', 2048]\n+      v.customize ['modifyvm', :id, '--memory', 512]\n       v.customize ['modifyvm', :id, '--hostonlyadapter2', virtualbox_interface_0]\n       v.customize ['modifyvm', :id, '--hostonlyadapter3', virtualbox_interface_1]\n     end\n```\n\n### CloudStack\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u5909\u66f4\n\n`chef_configuration.json`\u306e\u30ec\u30dd\u30b8\u30c8\u30ea\u3068\u30b7\u30b9\u30c6\u30e0VM\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u306eURL\u3092\u69cb\u7bc9\u3057\u305f\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306b\u5408\u308f\u305b\u3066\u5909\u66f4\u3057\u307e\u3059\u3002\n\n```diff:chef_configuration.json\n@@ -24,12 +24,11 @@\n         \"path\": \"/exports/primary\"\n       },\n       \"hypervisor_tpl\": {\n-        \"xenserver\": \"http://packages.shapeblue.com/systemvmtemplate/4.5/systemvm64template-4.5-xen.vhd.bz2\"\n+        \"xenserver\": \"https://packages.shapeblue.com/systemvmtemplate/4.6/systemvm64template-master-4.6.0-xen.vhd.bz2\"\n       },\n       \"configuration\": \"/vagrant/marvin.cfg.erb\",\n-      \"yum_repo\": \"http://packages.shapeblue.com/cloudstack/testing/centos/4.5/\",\n-      \"apt_repo\": \"http://packages.shapeblue.com/cloudstack/testing/debian/4.5/\",\n-      \"version\": \"4.5.0\"\n+      \"yum_repo\": \"http://packages.shapeblue.com/cloudstack/main/centos/4.9/\",\n+      \"version\": \"4.9.0\"\n   },\n   \"iptables\": {\n     \"lans\": [\"eth1\", \"eth2\"]\n```\n\n### CloudStack\u8a2d\u5b9a\u306e\u521d\u671f\u5024\u306e\u5909\u66f4\n\nCloudStack\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5f8c\u306bMarvin\u3092\u4f7f\u3063\u3066\u8a2d\u5b9a\u3092\u884c\u3046\u305f\u30818096\u756a\u30dd\u30fc\u30c8\u3092\u8a31\u53ef\u3057\u305f\u308a\u3001CPU\u3084\u30e1\u30e2\u30ea\u304c\u5c11\u306a\u3044\u74b0\u5883\u3067\u3082\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u8d77\u52d5\u3067\u304d\u308b\u3088\u3046\u30c7\u30d5\u30a9\u30eb\u30c8\u306e\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u306e\u30b9\u30da\u30c3\u30af\u3092\u5909\u66f4\u3057\u305f\u308a\u3057\u307e\u3059\u3002\n\n\u8a2d\u5b9a\u5909\u66f4\u306f`prefill.sql`\u3068\u3044\u3046\u30d5\u30a1\u30a4\u30eb\u3092\u4f7f\u7528\u3057\u3066\u76f4\u63a5\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u66f4\u65b0\u3057\u307e\u3059\u3002\n[SyncedFolder\u3092\u7121\u52b9\u306b\u3057\u305f](#syncedfolder%E3%82%92%E7%84%A1%E5%8A%B9%E5%8C%96)\u306e\u3067\u30d1\u30b9\u3092\u4fee\u6b63\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```diff:Vagrantfile \n@@ -110,6 +111,7 @@ Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|\n \n     CHEF_CONFIGURATION = JSON.parse(Pathname(__FILE__).dirname.join('chef_configuration.json').read)\n \n+    management.vm.provision :file, source: \"./prefill.sql\", destination: \"/tmp/prefill.sql\"\n     management.vm.provision :chef_solo do |chef|\n       chef.log_level = :debug\n       chef.run_list = CHEF_CONFIGURATION.delete('run_list')\n```\n\n```diff:chef_configuration.json\n@@ -15,7 +15,7 @@\n         \"rootpassword\": \"password\",\n         \"management_server_key\": \"password\",\n         \"database_key\": \"password\",\n-        \"prefill\": \"/vagrant/prefill.sql\"\n+        \"prefill\": \"/tmp/prefill.sql\"\n       },\n       \"secondary\": {\n         \"path\": \"/exports/secondary\"\n```\n\n\u5143\u306e`prefill.sql`\u306f`cloudstack/tools/devcloud4/prefill.sql`\u306b\u3042\u308b\u306e\u3067\u30b3\u30d4\u30fc\u3057\u3066\u5fc5\u8981\u306a\u7b87\u6240\u3092\u5909\u66f4\u3057\u307e\u3059\u3002\u4e3b\u306a\u5909\u66f4\u70b9\u306f\u4ee5\u4e0b\u306e2\u3064\u3067\u3059\u3002\n\n* NFS\u7528\u306e\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u3092\u8ffd\u52a0\n* \u30aa\u30fc\u30d0\u30fc\u30d7\u30ed\u30d3\u30b8\u30e7\u30cb\u30f3\u30b0\u4fc2\u6570\u3068\u95be\u5024\u3092\u5f15\u304d\u4e0a\u3052\n\n```bash\n$ cp ../prefill.sql .\n```\n\n```diff:prefill.sql\n@@ -15,9 +15,12 @@\n -- specific language governing permissions and limitations\n -- under the License.\n \n-REPLACE INTO `cloud`.`disk_offering` (id, name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES (17, 'Devcloud4 offering', UUID(), 'Devcloud4 offering', NOW(), 1, 'Service', 0);\n+REPLACE INTO `cloud`.`disk_offering` (id, name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES (17, 'Devcloud4 offering - Local Storage', UUID(), 'Devcloud4 offering - Local Storage', NOW(), 1, 'Service', 0);\n REPLACE INTO `cloud`.`service_offering` (id, cpu, speed, ram_size) VALUES (17, 1, 200, 256);\n-REPLACE INTO `cloud`.`disk_offering` (name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES ('Devcloud4 disk offering', UUID(), 'Devcloud4 disk offering', NOW(), 1, 'Disk', 1073741824);\n+REPLACE INTO `cloud`.`disk_offering` (name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES ('Devcloud4 disk offering - Local Storage', UUID(), 'Devcloud4 disk offering - Local Storage', NOW(), 1, 'Disk', 1073741824);\n+REPLACE INTO `cloud`.`disk_offering` (id, name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES (19, 'Devcloud4 offering', UUID(), 'Devcloud4 offering', NOW(), 0, 'Service', 0);\n+REPLACE INTO `cloud`.`service_offering` (id, cpu, speed, ram_size) VALUES (19, 1, 200, 256);\n+REPLACE INTO `cloud`.`disk_offering` (name, uuid, display_text, created, use_local_storage, type, disk_size) VALUES ('Devcloud4 disk offering', UUID(), 'Devcloud4 disk offering', NOW(), 0, 'Disk', 1073741824);\n REPLACE INTO `cloud`.`configuration` (category, instance, component, name, value) VALUES ('Advanced', 'DEFAULT', 'management-server', 'integration.api.port', '8096');\n REPLACE INTO `cloud`.`configuration` (instance, name,value) VALUE('DEFAULT','router.ram.size', '256');\n REPLACE INTO `cloud`.`configuration` (instance, name,value) VALUE('DEFAULT','router.cpu.mhz','256');\n@@ -31,4 +34,10 @@\n REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'expunge.interval', '60');\n REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'management.network.cidr', '0.0.0.0/0');\n REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'secstorage.allowed.internal.sites', '0.0.0.0/0');\n-UPDATE `cloud`.`vm_template` SET unique_name=\"Macchinina\",name=\"Macchinina\",url=\"http://dl.openvm.eu/cloudstack/macchinina/x86_64/macchinina-xen.vhd.bz2\",checksum=\"30985504bc31bf0cd3b9d2c6ca7944d3\",display_text=\"Macchinina\" where id=5;\n\\ No newline at end of file\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'cluster.cpu.allocated.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'cluster.memory.allocated.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'pool.storage.allocated.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'pool.storage.capacity.disablethreshold', '1');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'storage.overprovisioning.factor', '3');\n+REPLACE INTO `cloud`.`configuration` (instance, name, value) VALUE('DEFAULT', 'mem.overprovisioning.factor', '3');\n+UPDATE `cloud`.`vm_template` SET unique_name=\"Macchinina\",name=\"Macchinina\",url=\"http://dl.openvm.eu/cloudstack/macchinina/x86_64/macchinina-xen.vhd.bz2\",checksum=\"30985504bc31bf0cd3b9d2c6ca7944d3\",display_text=\"Macchinina\" where id=5;\n```\n\n### \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u8d77\u52d5\n\n`vagrant up`\u3092\u5b9f\u884c\u3059\u308b\u3068`xenserver`\u3068`management`\u306e2\u53f0\u306e\u4eee\u60f3\u30de\u30b7\u30f3\u304c\u7acb\u3061\u4e0a\u304c\u308a\u307e\u3059\u3002\n\n```bash\n$ vagrant up\n```\n\n\u5b8c\u4e86\u5f8c\u306b\u30d6\u30e9\u30a6\u30b6\u3067[http://192.168.22.5:8080/client/](http://192.168.22.5:8080/client/)\u307e\u305f\u306f[http://localhost:8080/client/](http://localhost:8080/client/)\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068CluodStack\u306eUI\u304c\u958b\u304d\u307e\u3059\u3002\n\u30e6\u30fc\u30b6\u30fc\u30cd\u30fc\u30e0: admin\u3001\u30d1\u30b9\u30ef\u30fc\u30c9: password\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002\n\uff08CloudStack\u306eUI\u304c\u898b\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u307e\u3067\u5b8c\u4e86\u3057\u3066\u304b\u3089\u6570\u5206\u304b\u304b\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\uff09\n\n### \u30be\u30fc\u30f3\u4f5c\u6210\n\nMarvin\u3092\u4f7f\u3063\u3066\u30be\u30fc\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n`marvin.cfg.erb`\u3092\u30b3\u30d4\u30fc\u3057\u3066\u7ba1\u7406\u30b5\u30fc\u30d0\u30fc\u306eIP\u30a2\u30c9\u30ec\u30b9\u3092\u66f8\u304d\u63db\u3048\u307e\u3059\u3002\n\n```bash\n$ cp marvin.cfg.erb marvin.cfg\n```\n\n```diff:marvin.cfg\n@@ -109,15 +109,15 @@\n     },\n     \"mgtSvr\": [\n         {\n-            \"mgtSvrIp\": \"<%= @management_server_ip %>\",\n-            \"port\": <%= @management_server_port %>\n+            \"mgtSvrIp\": \"192.168.22.5\",\n+            \"port\": 8096\n         }\n     ],\n     \"dbSvr\": {\n-        \"dbSvr\": \"<%= @database_server_ip %>\",\n-        \"port\": <%= @database_server_port %>,\n-        \"user\": \"<%= @database_user %>\",\n-        \"passwd\": \"<%= @database_password %>\",\n-        \"db\": \"<%= @database %>\"\n+        \"dbSvr\": \"192.168.22.5\",\n+        \"port\": 3306,\n+        \"user\": \"cloud\",\n+        \"passwd\": \"cloud\",\n+        \"db\": \"cloud\"\n     }\n```\n\n\u6b21\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u30be\u30fc\u30f3\u304c\u4f5c\u6210\u3055\u308c\u307e\u3059\u3002\n\n```bash\n$ python ../../../tools/marvin/marvin/deployDataCenter.py -i marvin.cfg\n```\n\nUI\u304b\u3089\u300cInfrastructure > System VMs\u300d\u3092\u78ba\u8a8d\u3057\u3066\u30012\u53f0\u306eVM(SSVM, CPVM)\u304c\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u3066\u3044\u308c\u3070\u6210\u529f\u3067\u3059\u3002\n\n![\u30b7\u30b9\u30c6\u30e0VM\u306e\u8d77\u52d5\u3092\u78ba\u8a8d.png](https://qiita-image-store.s3.amazonaws.com/0/15114/45dee1db-a91a-6efa-8241-a012045060fc.png)\n\n### \u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210\n\n\u52d5\u4f5c\u78ba\u8a8d\u306e\u305f\u3081\u4eee\u60f3\u30de\u30b7\u30f3\u3092\u4f5c\u6210\u3057\u3066\u307f\u307e\u3059\u3002\n\u57fa\u672c\u7684\u306b\u306f\u901a\u5e38\u901a\u308a\u306b\u4f5c\u6210\u3059\u308c\u3070\u826f\u3044\u306e\u3067\u3059\u304c\u3001\u666e\u901a\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u3092\u4f7f\u3046\u3068\u5927\u304d\u3059\u304e\u3066\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u306e\u5236\u9650\u306b\u5f15\u3063\u304b\u304b\u3063\u305f\u308a\u3059\u308b\u306e\u3067`prefill.sql`\u3067\u8ffd\u52a0\u3057\u305f\u4ee5\u4e0b\u306e\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3001\u30aa\u30d5\u30a1\u30ea\u30f3\u30b0\u3092\u4f7f\u3046\u3068\u826f\u3044\u3067\u3059\u3002\n\n* \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8: Macchinina\n* Compute Offering\n    * Devcloud4 offering\n    * Devcloud4 offering - Local Storage\n* Disk Offering\n    * Devcloud4 disk offering\n    * Devcloud4 disk offering - Local Storage\n\n`Macchinina`\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u304b\u3089\u4f5c\u6210\u3057\u305fVM\u306b\u306f\u3001\u30e6\u30fc\u30b6\u30fc: root\u3001\u30d1\u30b9\u30ef\u30fc\u30c9: password\u3067\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u307e\u3059\u3002\n\n## \u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\n\n\u30b7\u30b9\u30c6\u30e0VM\u304c\u6b63\u5e38\u306b\u8d77\u52d5\u3057\u306a\u304b\u3063\u305f\u308a\u3001\u4eee\u60f3\u30de\u30b7\u30f3\u306e\u4f5c\u6210\u306b\u5931\u6557\u3057\u3066\u3057\u307e\u3046\u5834\u5408\u306fmanagent\u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u30ad\u30e3\u30d1\u30b7\u30c6\u30a3\u306e\u5236\u9650\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u3044\u308b\u30b1\u30fc\u30b9\u304c\u591a\u3044\u306e\u3067\u306f\u306a\u3044\u304b\u3068\u601d\u3044\u307e\u3059\u3002\n\n```bash\n$ vagrant ssh management\n$ sudo less /var/log/cloudstack/management/management-server.log\n```\n", "tags": ["CloudStack", "vagrant", "XenServer", "VirtualBox"]}