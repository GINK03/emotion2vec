{"tags": ["SoftLayer", "vyatta"], "context": " More than 1 year has passed since last update.\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30d9\u30fc\u30b9\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4Vyatta\u306e\u6709\u6599\u306eVyatta Subscription Edition(VSE)\u3067\u306f\u3001REST API\u3092\u63d0\u4f9b\u3057\u3066\u3044\u3066\u3001\u5916\u90e8\u304b\u3089API\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u30fb\u7ba1\u7406\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\nSoftLayer\u3067\u306f\u3001Vyatta Gateway Appliance\u3067\u3053\u306eVSE\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30a4\u30f3\u30d5\u30e9\u5168\u4f53\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u306f\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u6210\u7ba1\u7406\u3060\u3051\u3067\u306f\u4e0d\u5341\u5206\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30b9\u30c8\u30ec\u30fc\u30b8\u3082\u3042\u308f\u305b\u3066\u3001\u7d71\u5408\u7684\u306b\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001Vyatta API\u3092\u6d3b\u7528\u3059\u308c\u3070\u3001\u30b5\u30fc\u30d0\u30fc\u3060\u3051\u3067\u306a\u304f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u9023\u643a\u3057\u3066\u30a4\u30f3\u30d5\u30e9\u3092\u5236\u5fa1\u3067\u304d\u308b\u306e\u3067\u3001\u3088\u308a\u7d71\u5408\u7684\u306a\u5f62\u3067\u30a4\u30f3\u30d5\u30e9\u5168\u4f53\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u307e\u305a\u306f\u3001Vyatta API\u306b\u95a2\u3059\u308b\u60c5\u5831\u3068\u3001curl\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u4f7f\u3044\u65b9\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3059\u3002\n\nVyatta\u5074\u306e\u8a2d\u5b9a\n\nHTTPS\u306e\u6709\u52b9\u5316\u3068\u30d0\u30a4\u30f3\u30c9\n\u30ea\u30e2\u30fc\u30c8\u304b\u3089API\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u3001Vyatta\u5074\u3067HTTPS\u3092\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nvyatta# set service https listen-address 10.x.x.x\nvyatta# commit\nvyatta# save\n\nSoftLayer\u306eVyatta Gateway Appliance\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fPrivate\u5074\u306e\u307fHTTPS\u30b5\u30fc\u30d3\u30b9\u304cBIND\u3055\u308c\u3066\u3044\u307e\u3059\u3002\nvyatta@vyatta-tok02# show service https\n listen-address 10.x.x.x\n[edit]\n\nvyatta@vyatta-tok02# netstat -nat\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN\ntcp        0      0 10.x.x.x:443            0.0.0.0:*               LISTEN\ntcp        0      0 127.0.0.1:443           0.0.0.0:*               LISTEN\ntcp        0      0 10.x.x.x:80             0.0.0.0:*               LISTEN\ntcp6       0      0 :::22                   :::*                    LISTEN\n[edit]\n\n\nVyatta REST API\u306e\u57fa\u672c\n\nAPI\u306e\u8a8d\u8a3c\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u65b9\u6cd5\u3067API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306e\u8a8d\u8a3c\u304c\u53ef\u80fd\u3067\u3059\u3002\n\nHTTP BASIC\u8a8d\u8a3c (Vyatta\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fcID\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092base64 encode)\nTemporary Session Key\u3092\u4f7f\u3046\n\n\nSoftware Engineering Crunch and more...: Session support in the Vyatta REST API\n\n\n\n\nBASIC\u8a8d\u8a3c\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bcurl\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001HTTP request\u306bAuthorization: Basic dnlhdHRhxxxxxzgyQk1l\u3068\u3044\u3046\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u52a0\u3048\u3089\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304cBASIC\u8a8d\u8a3c\u306e\u8a8d\u8a3c\u30c7\u30fc\u30bf\u3067\u3001base64\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9001\u4fe1\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\nBASIC\u8a8d\u8a3c\u306e\u4f8b\n$ curl -v -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf\n* Hostname was NOT found in DNS cache\n*   Trying 10.x.x.x...\n* Connected to 10.x.x.x (10.x.x.x) port 443 (#0)\n* TLS 1.0 connection using TLS_RSA_WITH_AES_256_CBC_SHA\n* Server certificate: Vyatta Web GUI\n* Server auth using Basic with user 'vyatta'\n> POST /rest/conf HTTP/1.1\n> Authorization: Basic dnlhdHRhxxxxxzgyQk1l\n> User-Agent: curl/7.37.1\n> Host: 10.x.x.x\n> content-length:0\n> Accept: application/json\n>\n< HTTP/1.1 201 Created\nHTTP/1.1 201 Created\n< Content-Type: application/json\nContent-Type: application/json\n< Location: rest/conf/BF7017C544FBC2B5\nLocation: rest/conf/BF7017C544FBC2B5\n< Vyatta-Specification-Version: 0.3\nVyatta-Specification-Version: 0.3\n< Cache-Control: no-cache\nCache-Control: no-cache\n< Transfer-Encoding: chunked\nTransfer-Encoding: chunked\n< Date: Sat, 21 Feb 2015 12:59:27 GMT\nDate: Sat, 21 Feb 2015 12:59:27 GMT\n* Server lighttpd/1.4.28 is not blacklisted\n< Server: lighttpd/1.4.28\nServer: lighttpd/1.4.28\n\n\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5f62\u5f0f\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\u3068URI\u306b\u3088\u3063\u3066\u3001\u30a2\u30af\u30bb\u30b9\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3084API\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nURI\u306e\u5f62\u5f0f\nVyatta\u306b\u306f\u4ee5\u4e0b\u306e2\u7a2e\u985e\u306e\u64cd\u4f5c\u30e2\u30fc\u30c9\u304c\u3042\u308a\u3001REST API\u3067\u3082\u305d\u308c\u305e\u308c\u306b\u5bfe\u5fdc\u3057\u305fURI\u304c\u5b58\u5728\u3057\u307e\u3059\u3002\n\nOperational Mode: \u30b7\u30b9\u30c6\u30e0\u306e\u72b6\u614b\u3084\u8a2d\u5b9a\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u3059\u308b\u30e2\u30fc\u30c9\u3002\u8a2d\u5b9a\u306e\u5909\u66f4\u306f\u3067\u304d\u306a\u3044\nConfiguration Mode: \u8a2d\u5b9a\u60c5\u5831\u3092\u5909\u66f4\u30fb\u524a\u9664\u30fbcommit\u3067\u304d\u308b\u30e2\u30fc\u30c9\n\nhttps://<vyatta IP>/rest/op/<path>      # Operational Mode\nhttps://<vyatta IP>/rest/conf/<path>    # Configuration Mode\n\n\nvyatta IP: vyatta\u306eIP\u30a2\u30c9\u30ec\u30b9\n\nrest: REST\u3067\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8868\u3059\n\nop: Operational mode\u306eAPI\u3092\u4f7f\u7528\n conf: Configuration mode\u306eAPI\u3092\u4f7f\u7528\n path : \u5b9f\u884c\u3059\u308bVyatta\u30b3\u30de\u30f3\u30c9\u3092\u30d1\u30b9\u5f62\u5f0f\u3067\u6307\u5b9a\u3002Vyatta\u30b3\u30de\u30f3\u30c9\u304c show vpn ipsec sa \u3067\u3042\u308c\u3070 show/vpn/ipsec/sa \u3068\u6307\u5b9a\n\n\n\u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\n\ncurl\u30b3\u30de\u30f3\u30c9\u3067\u4f7f\u3046\ncurl\u30b3\u30de\u30f3\u30c9\u3067URI\u3092\u6307\u5b9a\u3057\u3066REST API\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nGET\u306e\u4f8b\n\n$ curl -k -s -i -u vyatta:vyatta -X GET http://192.168.1.202/rest/conf\n\n\nPOST\u306e\u4f8b\n\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X\n\ufffcPOST http://192.168.1.202/rest/conf\n\nHTTP/1.1 201 Created\nTransfer-Encoding: chunked\nContent-Type: application/json\nLocation: rest/op/D462E45FCEFBB5A5\nDate: Fri, 19 Feb 2010 21:28:39 GMT\nServer: lighttpd/1.4.19\n\n\n\u30c7\u30d0\u30c3\u30af\nHTTP request/response\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u3001curl -v\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3068\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ curl -v -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf\n* About to connect() to 10.x.x.x port 443 (#0)\n*   Trying 10.x.x.x...\n* Connected to 10.x.x.x (10.x.x.x) port 443 (#0)\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n* skipping SSL peer certificate verification\n* SSL connection using TLS_RSA_WITH_AES_256_CBC_SHA\n* Server certificate:\n*   subject: L=Belmont,ST=CA,O=Vyatta Inc.,CN=Vyatta Web GUI,C=US\n*   start date: Feb 15 08:05:29 2015 GMT\n*   expire date: Feb 12 08:05:29 2025 GMT\n*   common name: Vyatta Web GUI\n*   issuer: L=Belmont,ST=CA,O=Vyatta Inc.,CN=Vyatta Web GUI,C=US\n* Server auth using Basic with user 'vyatta'\n> GET /rest/conf HTTP/1.1\n> Authorization: Basic dnlhdHRhOkfdsfgyQk1l\n> User-Agent: curl/7.29.0\n> Host: 10.x.x.x\n> Accept: */*\n>\n< HTTP/1.1 200 OK\nHTTP/1.1 200 OK\n< Content-Type: application/json\nContent-Type: application/json\n< Vyatta-Specification-Version: 0.3\nVyatta-Specification-Version: 0.3\n< Cache-Control: no-cache\nCache-Control: no-cache\n< Content-Length: 21\nContent-Length: 21\n< Date: Sun, 15 Feb 2015 15:09:14 GMT\nDate: Sun, 15 Feb 2015 15:09:14 GMT\n< Server: lighttpd/1.4.28\nServer: lighttpd/1.4.28\n\n<\n{\n  \"message\": \" \"\n}\n* Connection #0 to host 10.x.x.x left intact\n\n\n\u3088\u304f\u4f7f\u3046Vyatta REST API\u306eReference\n\u3088\u304f\u4f7f\u308f\u308c\u308bVyatta\u306eREST API\u3092\u6574\u7406\u3057\u307e\u3059\u3002\n\nConfiguration Mode\n\n\n\nREST API Command\nVyatta CLI command\n\u5099\u8003\n\n\n\n\nPOST /rest/conf\n$ configure\nConfig\u30bb\u30c3\u30b7\u30e7\u30f3ID(conf-id)\u3092\u53d6\u5f97\u3057\u3066Configuration Mode\u306b\u79fb\u884c\u3002\u4ee5\u5f8c\u3053\u306econf-id\u3092\u901a\u3057\u3066\u8a2d\u5b9a\u306e\u5909\u66f4\u30fb\u9069\u7528\u3092\u884c\u3046\n\n\nGET /rest/conf\n-\nActive\u306aconf-id\u3092\u53d6\u5f97\n\n\nGET /rest/conf/<session-id>/<param>\n\n# set\u306e\u5f8cTAB\u30ad\u30fc\u3067\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u5019\u88dc\u3092\u8868\u793a\nConfig Mode\u306eset\u30b3\u30de\u30f3\u30c9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u7b49\u3092\u8868\u793a\n\n\nPUT /rest/conf/<session-id>/set/xxx/yyy\n# set xxx yyy\nconf-id\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066set\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n\n\nPUT /rest/conf/<session-id>/delete/xxx/yyy\n# delete xxx yyy\nconf-id\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066delete\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\n\n\nPOST /rest/conf/<session-id>/commit\n# commit\nconfig\u306ecommit\n\n\nPOST /rest/conf/<session-id>/save\n# save\nconfig\u306e\u4fdd\u5b58\n\n\nDELETE /rest/conf/<session-id>\n# exit\nConfig Mode\u304b\u3089exit\u3002conf-id\u304c\u7834\u68c4\u3055\u308c\u308b\n\n\n\n\nOperational Mode\n\n\n\nREST API Command\nVyatta CLI command\n\u5099\u8003\n\n\n\n\nPOST /rest/op/<path>\n\n<path>\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\nOperational Mode\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066Location\u3092\u53d6\u5f97\u3002\n\n\nGET /rest/op/<Location>\n\n<path>\u306e\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u3092\u8868\u793a\nLocation\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u304c\u5f97\u3089\u308c\u308b\n\n\nGET /rest/op/<path>\nTAB\u30ad\u30fc\u3067\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u5019\u88dc\u3092\u8868\u793a\nOperational mode\u306e\u30b3\u30de\u30f3\u30c9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u7b49\u3092\u8868\u793a\n\n\nGET /rest/op\n-\nOperational Mode\u3067\u5b9f\u884c\u4e2d\u306e\u30b3\u30de\u30f3\u30c9\u3001\u51fa\u529b\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u306a\u3044\u30d7\u30ed\u30bb\u30b9\u3092\u8868\u793a\n\n\nDELETE /rest/op/<process-id>\n-\nOperational mode\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7d42\u4e86\n\n\n\n\nVyatta REST API\u306e\u4f7f\u7528\u4f8b\n\nConfiguration Mode\nConfiguration Mode\u3067\u306e\u51e6\u7406\u306f\u4ee5\u4e0b\u306e\u9806\u5e8f\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nConfiguration Mode\u306econf-id\u3092\u53d6\u5f97 (POST /rest/conf)\nconf-id\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066Configuration\u3092\u884c\u3046 (PUT /rest/conf/<conf-id>/set/<path>, PUT /rest/conf/<conf-id>/delete/<path>)\nConfig\u3092Commit (POST /rest/conf/<conf-id>/commit)\nConfig\u3092Save (POST /rest/conf/<conf-id>/save)\n\n\nConfiguration Mode\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/conf/CDAAF2AA11A9D45F\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 13:18:37 GMT\nServer: lighttpd/1.4.28\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306bdescription\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf/CONFIG_BY_API\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/conf/5460F22FE50CFCFD\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 14:04:22 GMT\nServer: lighttpd/1.4.28\n\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\n\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u4f5c\u6210\u3057\u305f2\u3064\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 425\nDate: Sat, 21 Feb 2015 14:04:34 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"session\": [\n    {\n      \"id\": \"5460F22FE50CFCFD\",\n      \"username\": \"vyatta\",\n      \"description\": \"CONFIG_BY_API\",\n      \"started\": \"1424527462\",\n      \"modified\": \"false\",\n      \"updated\": \"1424527462\"\n    },\n    {\n      \"id\": \"CDAAF2AA11A9D45F\",\n      \"username\": \"vyatta\",\n      \"description\": \"\",\n      \"started\": \"1424524717\",\n      \"modified\": \"false\",\n      \"updated\": \"1424524717\"\n    }\n  ],\n  \"message\": \" \"\n}\n\n\u4ee5\u964d\u3067\u306f5460F22FE50CFCFD\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\u30bb\u30c3\u30b7\u30e7\u30f3ID\u306b\u5bfe\u3057\u3066Configuration\u3092\u5b9f\u884c\n\u4ee5\u4e0b\u3067\u306f\u3001set\u30b3\u30de\u30f3\u30c9\u3067bond0\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306bIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nVyatta\u3067\u306eIP\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a\u3067\u306f\u30cd\u30c3\u30c8\u30de\u30af\u30b9\u3092/\u3067\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304cREST API\u3067\u306f\u3001\u30cd\u30c3\u30c8\u30de\u30b9\u30af\u3092\u8868\u3059/\u3068\u3001URI\u306e/\u3068\u533a\u5225\u304c\u3064\u304b\u306a\u3044\u305f\u3081\u3001/\u306e\u307e\u307e\u3067\u306f\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002/\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bURL\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f%2F\u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n$ curl -k -s -i -u vyatta:vyatta -X PUT https://10.x.x.x/rest/conf/5460F22FE50CFCFD/set/interfaces/bonding/bond0/address/192.168.10.1%2F24\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 14:12:35 GMT\nServer: lighttpd/1.4.28\n\ndelete\u30b3\u30de\u30f3\u30c9\u3082\u3001\u540c\u69d8\u306bPUT\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u884c\u53ef\u80fd\u3067\u3059\u3002\n\nConfig\u306eCommit & Save\n\u3053\u306e\u6642\u70b9\u3067\u306f\u307e\u3060\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002Config\u3092Commit\u3057\u3066\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf/5460F22FE50CFCFD/commit\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 21\nDate: Sat, 21 Feb 2015 14:15:05 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"message\": \" \"\n}\n\n\u3053\u308c\u3067\u3001\u5b9f\u884c\u4e2d\u306eVyatta\u306b\u306f\u8a2d\u5b9a\u304c\u53cd\u6620\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u307e\u3060\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u8a2d\u5b9a\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u5143\u306e\u8a2d\u5b9a\u306b\u623b\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002save\u3092\u5b9f\u884c\u3057\u3066\u8a2d\u5b9a\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u307e\u3059\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf/5460F22FE50CFCFD/save\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 79\nDate: Sat, 21 Feb 2015 14:16:43 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"message\": \" Saving configuration to '/config/config.boot'...\\n Done\\n \"\n}\n\n\n\u30b3\u30de\u30f3\u30c9\u5b9a\u7fa9\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8868\u793a\nVyatta\u306eConfiguration Mode\u3067\u3001set\u30b3\u30de\u30f3\u30c9\u306e\u5f8cTAB\u30ad\u30fc\u3092\u62bc\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5019\u88dc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\nvyatta@vyatta-tok02# set\nPossible completions:\n > cluster      Clustering\n > firewall     Firewall\n > interfaces   Network interfaces\n > load-balancing\n                Configure load-balancing\n > nat          Network Address Translation (NAT) parameters\n > policy       Routing policy\n > protocols    Routing protocol parameters\n > service      Services\n > system       System parameters\n > test-definition\n                Configure the definition of a test\n > traffic-policy\n                Quality of Service (QOS) policy type\n > vpn          Virtual Private Network (VPN)\n > zone-policy  Configure zone-policy\n\n\u540c\u69d8\u306e\u64cd\u4f5c\u3092API\u3067\u3082\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf/5460F22FE50CFCFD/\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 1408\nDate: Sat, 21 Feb 2015 13:48:51 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    {\n      \"name\": \"service\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"system\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"protocols\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"interfaces\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"firewall\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"nat\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"zone-policy\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"vpn\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"cluster\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"test-definition\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"policy\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"load-balancing\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"traffic-policy\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    }\n  ],\n  \"type\": [\n    \"none\"\n  ],\n  \"deactivate_state\": \"enable\",\n  \"is_changed\": \"true\",\n  \"state\": \"active\"\n}\n\n\u3055\u3089\u306b\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u308f\u305f\u3063\u3066\u3082\u5019\u88dc\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf/5460F22FE50CFCFD/vpn\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 565\nDate: Sat, 21 Feb 2015 13:49:34 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    {\n      \"name\": \"pptp\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"l2tp\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"rsa-keys\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"ipsec\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    }\n  ],\n  \"type\": [\n    \"none\"\n  ],\n  \"deactivate_state\": \"enable\",\n  \"help\": \" Virtual Private Network (VPN)\",\n  \"is_changed\": \"false\",\n  \"name\": \"vpn\",\n  \"state\": \"none\"\n}\n\n\nOperational Mode\nOperational Mode\u3067\u306e\u51e6\u7406\u306f\u4ee5\u4e0b\u306e\u9806\u5e8f\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\nPOST\u3067\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u30ea\u30af\u30a8\u30b9\u30c8 (POST /rest/op/)\nResponse\u304b\u3089Location\u3092\u53d6\u5f97 (Location: /rest/op/xxxxxxxxxxxxxxx)\nGET\u3067Location\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u306e\u6a19\u6e96\u51fa\u529b\u304c\u5f97\u3089\u308c\u308b (GET /rest/op/xxxxxxxxxxxxxxx)\n\n\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/op/show/version\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/op/46826F1EB88B80F4\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 15:06:28 GMT\nServer: lighttpd/1.4.28\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Response\u3067Location: rest/op/46826F1EB88B80F4\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\n\u53d6\u5f97\u3057\u305fLocation\u306b\u30a2\u30af\u30bb\u30b9\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u51fa\u529b\u3059\u308b\u305f\u3081\u306b\u3001\u3053\u306eLocation\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066API\u306e\u5b9f\u884c\u7d50\u679c\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bshow version\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op/46826F1EB88B80F4\nHTTP/1.1 200 OK\nContent-Type: text/plain\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 456\nDate: Sat, 21 Feb 2015 15:06:46 GMT\nServer: lighttpd/1.4.28\n\nVersion:      VSE6.6R6\nDescription:  Brocade Vyatta 5415 vRouter 6.6 R6\nCopyright:    2006-2014 Vyatta, Inc.\nBuilt by:     autobuild@vyatta.com\nBuilt on:     Thu Jun 26 23:44:07 UTC 2014\nBuild ID:     1406262347-dd268ed\nSystem type:  Intel 64bit\nBoot via:     disk\nHW model:     X10SLH-N6-ST031\nHW S/N:       0123456789\nHW UUID:      00000000-0000-0000-0000-0CC47A1E8DA8\nUptime:       09:06:29 up 6 days, 53 min,  1 user,  load average: 0.07, 0.17, 0.17\n\n\n\u8aa4\u3063\u305f\u30b3\u30de\u30f3\u30c9\u306e\u5834\u5408\n\u8aa4\u3063\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u305d\u306e\u307e\u307e\u8fd4\u3055\u308c\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:Fkc82BMe -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/op/show/veersion\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/op/9A11F8E835A36056\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 15:46:59 GMT\nServer: lighttpd/1.4.28\n\n\n$ curl -k -s -i -u vyatta:Fkc82BMe -X GET https://10.x.x.x/rest/op/9A11F8E835A36056\nHTTP/1.1 200 OK\nContent-Type: text/plain\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 37\nDate: Sat, 21 Feb 2015 15:47:13 GMT\nServer: lighttpd/1.4.28\n\n\n  Invalid command: show [veersion]\n\n\nLocation\u306b\u30a2\u30af\u30bb\u30b9\u3057\u306a\u3044\u5834\u5408\nLocation\u306b\u30a2\u30af\u30bb\u30b9\u3057\u306a\u3044\u5834\u5408\u3001\u51fa\u529b\u7d50\u679c\u306f\u524a\u9664\u3055\u308c\u305a\u306b\u3069\u3093\u3069\u3093\u84c4\u7a4d\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 356\nDate: Sat, 21 Feb 2015 15:08:25 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"process\": [\n    {\n      \"username\": \"vyatta\",\n      \"started\": \"1424435506\",\n      \"updated\": \"16466314\",\n      \"id\": \"1F8C6DD257234D32\",\n      \"command\": \"show 'version'\"\n    },\n    {\n      \"username\": \"vyatta\",\n      \"started\": \"1424531188\",\n      \"updated\": \"16466314\",\n      \"id\": \"46826F1EB88B80F4\",\n      \"command\": \"show 'version'\"\n    }\n  ]\n}\n\n\n\u30b3\u30de\u30f3\u30c9\u5b9a\u7fa9\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8868\u793a\nOperational Mode\u3067TAB\u30ad\u30fc\u3092\u62bc\u3059\u3068\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5019\u88dc\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3068\u540c\u69d8\u306e\u64cd\u4f5c\u3092\u3001API\u3067\u3082\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op/\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 437\nDate: Sat, 21 Feb 2015 15:19:24 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    \"renew\",\n    \"force\",\n    \"test\",\n    \"telnet\",\n    \"show\",\n    \"monitor\",\n    \"update\",\n    \"poweroff\",\n    \"clear\",\n    \"reboot\",\n    \"install\",\n    \"mtrace\",\n    \"format\",\n    \"delete\",\n    \"set\",\n    \"release\",\n    \"generate\",\n    \"ping\",\n    \"restart\",\n    \"disconnect\",\n    \"configure\",\n    \"add\",\n    \"rename\",\n    \"reset\",\n    \"copy\",\n    \"connect\",\n    \"clone\",\n    \"traceroute\"\n  ],\n  \"action\": \"false\"\n}\n\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op/show/interfaces/ethernet/eth0\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 278\nDate: Fri, 20 Feb 2015 12:28:58 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    \"queue\",\n    \"physical\",\n    \"brief\",\n    \"vif\",\n    \"identify\",\n    \"statistics\"\n  ],\n  \"enum\": [\n    \"eth0\",\n    \"eth1\",\n    \"eth2\",\n    \"eth3\",\n    \"eth4\",\n    \"eth5\"\n  ],\n  \"action\": \"true\",\n  \"help\": \" Show specified ethernet interface information\"\n}\n\n\n\u53c2\u8003\n\n20140404 vyatta users Group / REST API\u89e3\u8aac\nVyatta Documentation: Remote Access API\nVyatta\u306e\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30b5\u30f3\u30d7\u30eb\u3042\u308a\n\n\n/opt/vyatta/sbin/vyatta\u2010webgui2\u2010shell.pl\n/opt/vyatta/sbin/vyatta\u2010webgui2\u2010op.pl\n\n\nSoftware Engineering Crunch and more...: Session support in the Vyatta REST API\n\nShell API - VyOS jp Shell API\u3068\u3044\u3046\u306e\u3082\u3042\u308b\u3089\u3057\u3044\n\n\u30bd\u30d5\u30c8\u30a6\u30a7\u30a2\u30d9\u30fc\u30b9\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4Vyatta\u306e\u6709\u6599\u306eVyatta Subscription Edition(VSE)\u3067\u306f\u3001REST API\u3092\u63d0\u4f9b\u3057\u3066\u3044\u3066\u3001\u5916\u90e8\u304b\u3089API\u3092\u4f7f\u3063\u3066\u64cd\u4f5c\u30fb\u7ba1\u7406\u3092\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\nSoftLayer\u3067\u306f\u3001Vyatta Gateway Appliance\u3067\u3053\u306eVSE\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30a4\u30f3\u30d5\u30e9\u5168\u4f53\u3092\u7ba1\u7406\u3059\u308b\u305f\u3081\u306b\u306f\u30b5\u30fc\u30d0\u30fc\u306e\u69cb\u6210\u7ba1\u7406\u3060\u3051\u3067\u306f\u4e0d\u5341\u5206\u3067\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3084\u30b9\u30c8\u30ec\u30fc\u30b8\u3082\u3042\u308f\u305b\u3066\u3001\u7d71\u5408\u7684\u306b\u7ba1\u7406\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304c\u3001Vyatta API\u3092\u6d3b\u7528\u3059\u308c\u3070\u3001\u30b5\u30fc\u30d0\u30fc\u3060\u3051\u3067\u306a\u304f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3068\u9023\u643a\u3057\u3066\u30a4\u30f3\u30d5\u30e9\u3092\u5236\u5fa1\u3067\u304d\u308b\u306e\u3067\u3001\u3088\u308a\u7d71\u5408\u7684\u306a\u5f62\u3067\u30a4\u30f3\u30d5\u30e9\u5168\u4f53\u3092\u7ba1\u7406\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u307e\u305a\u306f\u3001Vyatta API\u306b\u95a2\u3059\u308b\u60c5\u5831\u3068\u3001curl\u30b3\u30de\u30f3\u30c9\u306b\u3088\u308b\u4f7f\u3044\u65b9\u3092\u307e\u3068\u3081\u3066\u307f\u307e\u3059\u3002\n\n\n# Vyatta\u5074\u306e\u8a2d\u5b9a\n\n## HTTPS\u306e\u6709\u52b9\u5316\u3068\u30d0\u30a4\u30f3\u30c9\n\n\u30ea\u30e2\u30fc\u30c8\u304b\u3089API\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u305f\u3081\u3001Vyatta\u5074\u3067HTTPS\u3092\u6709\u52b9\u306b\u3057\u3066\u304a\u304f\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\n```bash\nvyatta# set service https listen-address 10.x.x.x\nvyatta# commit\nvyatta# save\n```\n\nSoftLayer\u306eVyatta Gateway Appliance\u306e\u5834\u5408\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306fPrivate\u5074\u306e\u307fHTTPS\u30b5\u30fc\u30d3\u30b9\u304cBIND\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\nvyatta@vyatta-tok02# show service https\n listen-address 10.x.x.x\n[edit]\n\nvyatta@vyatta-tok02# netstat -nat\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN\ntcp        0      0 10.x.x.x:443            0.0.0.0:*               LISTEN\ntcp        0      0 127.0.0.1:443           0.0.0.0:*               LISTEN\ntcp        0      0 10.x.x.x:80             0.0.0.0:*               LISTEN\ntcp6       0      0 :::22                   :::*                    LISTEN\n[edit]\n```\n\n\n# Vyatta REST API\u306e\u57fa\u672c\n\n## API\u306e\u8a8d\u8a3c\n\n\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u306e\u65b9\u6cd5\u3067API\u3078\u306e\u30a2\u30af\u30bb\u30b9\u306e\u8a8d\u8a3c\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n- HTTP BASIC\u8a8d\u8a3c (Vyatta\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fcID\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u3092base64 encode)\n- Temporary Session Key\u3092\u4f7f\u3046\n - [Software Engineering Crunch and more...: Session support in the Vyatta REST API](http://softengcrunch.blogspot.jp/2011/03/session-support-in-vyatta-rest-api.html)\n\n### BASIC\u8a8d\u8a3c\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306bcurl\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001HTTP request\u306b`Authorization: Basic dnlhdHRhxxxxxzgyQk1l`\u3068\u3044\u3046\u30d5\u30a3\u30fc\u30eb\u30c9\u304c\u52a0\u3048\u3089\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u308c\u304cBASIC\u8a8d\u8a3c\u306e\u8a8d\u8a3c\u30c7\u30fc\u30bf\u3067\u3001base64\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f\u30e6\u30fc\u30b6\u30fcID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9001\u4fe1\u3055\u308c\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```bash:BASIC\u8a8d\u8a3c\u306e\u4f8b\n$ curl -v -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf\n* Hostname was NOT found in DNS cache\n*   Trying 10.x.x.x...\n* Connected to 10.x.x.x (10.x.x.x) port 443 (#0)\n* TLS 1.0 connection using TLS_RSA_WITH_AES_256_CBC_SHA\n* Server certificate: Vyatta Web GUI\n* Server auth using Basic with user 'vyatta'\n> POST /rest/conf HTTP/1.1\n> Authorization: Basic dnlhdHRhxxxxxzgyQk1l\n> User-Agent: curl/7.37.1\n> Host: 10.x.x.x\n> content-length:0\n> Accept: application/json\n>\n< HTTP/1.1 201 Created\nHTTP/1.1 201 Created\n< Content-Type: application/json\nContent-Type: application/json\n< Location: rest/conf/BF7017C544FBC2B5\nLocation: rest/conf/BF7017C544FBC2B5\n< Vyatta-Specification-Version: 0.3\nVyatta-Specification-Version: 0.3\n< Cache-Control: no-cache\nCache-Control: no-cache\n< Transfer-Encoding: chunked\nTransfer-Encoding: chunked\n< Date: Sat, 21 Feb 2015 12:59:27 GMT\nDate: Sat, 21 Feb 2015 12:59:27 GMT\n* Server lighttpd/1.4.28 is not blacklisted\n< Server: lighttpd/1.4.28\nServer: lighttpd/1.4.28\n```\n\n## \u30ea\u30af\u30a8\u30b9\u30c8\u306e\u5f62\u5f0f\n\n\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u30e1\u30bd\u30c3\u30c9\u3068URI\u306b\u3088\u3063\u3066\u3001\u30a2\u30af\u30bb\u30b9\u3059\u308b\u30ea\u30bd\u30fc\u30b9\u3084API\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n### URI\u306e\u5f62\u5f0f\n\nVyatta\u306b\u306f\u4ee5\u4e0b\u306e2\u7a2e\u985e\u306e\u64cd\u4f5c\u30e2\u30fc\u30c9\u304c\u3042\u308a\u3001REST API\u3067\u3082\u305d\u308c\u305e\u308c\u306b\u5bfe\u5fdc\u3057\u305fURI\u304c\u5b58\u5728\u3057\u307e\u3059\u3002\n\n- Operational Mode: \u30b7\u30b9\u30c6\u30e0\u306e\u72b6\u614b\u3084\u8a2d\u5b9a\u60c5\u5831\u3092\u53c2\u7167\u3059\u308b\u3059\u308b\u30e2\u30fc\u30c9\u3002\u8a2d\u5b9a\u306e\u5909\u66f4\u306f\u3067\u304d\u306a\u3044\n- Configuration Mode: \u8a2d\u5b9a\u60c5\u5831\u3092\u5909\u66f4\u30fb\u524a\u9664\u30fbcommit\u3067\u304d\u308b\u30e2\u30fc\u30c9\n\n```\nhttps://<vyatta IP>/rest/op/<path>      # Operational Mode\nhttps://<vyatta IP>/rest/conf/<path>    # Configuration Mode\n```\n\n- vyatta IP: vyatta\u306eIP\u30a2\u30c9\u30ec\u30b9\n- `rest`: REST\u3067\u306e\u30a2\u30af\u30bb\u30b9\u3092\u8868\u3059\n- `op`: Operational mode\u306eAPI\u3092\u4f7f\u7528\n-  `conf`: Configuration mode\u306eAPI\u3092\u4f7f\u7528\n-  path : \u5b9f\u884c\u3059\u308bVyatta\u30b3\u30de\u30f3\u30c9\u3092\u30d1\u30b9\u5f62\u5f0f\u3067\u6307\u5b9a\u3002Vyatta\u30b3\u30de\u30f3\u30c9\u304c `show vpn ipsec sa` \u3067\u3042\u308c\u3070 `show/vpn/ipsec/sa` \u3068\u6307\u5b9a\n\n\n\n## \u57fa\u672c\u7684\u306a\u4f7f\u3044\u65b9\n\n### curl\u30b3\u30de\u30f3\u30c9\u3067\u4f7f\u3046\n\ncurl\u30b3\u30de\u30f3\u30c9\u3067URI\u3092\u6307\u5b9a\u3057\u3066REST API\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n- GET\u306e\u4f8b\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET http://192.168.1.202/rest/conf\n```\n\n- POST\u306e\u4f8b\n\n```\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X\n\ufffcPOST http://192.168.1.202/rest/conf\n\nHTTP/1.1 201 Created\nTransfer-Encoding: chunked\nContent-Type: application/json\nLocation: rest/op/D462E45FCEFBB5A5\nDate: Fri, 19 Feb 2010 21:28:39 GMT\nServer: lighttpd/1.4.19\n```\n\n#### \u30c7\u30d0\u30c3\u30af\n\nHTTP request/response\u3092\u78ba\u8a8d\u3057\u305f\u3044\u5834\u5408\u3001`curl -v`\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3068\u8a73\u7d30\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```bash\n$ curl -v -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf\n* About to connect() to 10.x.x.x port 443 (#0)\n*   Trying 10.x.x.x...\n* Connected to 10.x.x.x (10.x.x.x) port 443 (#0)\n* Initializing NSS with certpath: sql:/etc/pki/nssdb\n* skipping SSL peer certificate verification\n* SSL connection using TLS_RSA_WITH_AES_256_CBC_SHA\n* Server certificate:\n* \tsubject: L=Belmont,ST=CA,O=Vyatta Inc.,CN=Vyatta Web GUI,C=US\n* \tstart date: Feb 15 08:05:29 2015 GMT\n* \texpire date: Feb 12 08:05:29 2025 GMT\n* \tcommon name: Vyatta Web GUI\n* \tissuer: L=Belmont,ST=CA,O=Vyatta Inc.,CN=Vyatta Web GUI,C=US\n* Server auth using Basic with user 'vyatta'\n> GET /rest/conf HTTP/1.1\n> Authorization: Basic dnlhdHRhOkfdsfgyQk1l\n> User-Agent: curl/7.29.0\n> Host: 10.x.x.x\n> Accept: */*\n>\n< HTTP/1.1 200 OK\nHTTP/1.1 200 OK\n< Content-Type: application/json\nContent-Type: application/json\n< Vyatta-Specification-Version: 0.3\nVyatta-Specification-Version: 0.3\n< Cache-Control: no-cache\nCache-Control: no-cache\n< Content-Length: 21\nContent-Length: 21\n< Date: Sun, 15 Feb 2015 15:09:14 GMT\nDate: Sun, 15 Feb 2015 15:09:14 GMT\n< Server: lighttpd/1.4.28\nServer: lighttpd/1.4.28\n\n<\n{\n  \"message\": \" \"\n}\n* Connection #0 to host 10.x.x.x left intact\n```\n\n\n# \u3088\u304f\u4f7f\u3046Vyatta REST API\u306eReference\n\n\u3088\u304f\u4f7f\u308f\u308c\u308bVyatta\u306eREST API\u3092\u6574\u7406\u3057\u307e\u3059\u3002\n\n## Configuration Mode\n\n\n| REST API Command       | Vyatta CLI command  |  \u5099\u8003       |\n|----------------------|------------------------|-----------|\n| `POST /rest/conf` | `$ configure` | Config\u30bb\u30c3\u30b7\u30e7\u30f3ID(conf-id)\u3092\u53d6\u5f97\u3057\u3066Configuration Mode\u306b\u79fb\u884c\u3002\u4ee5\u5f8c\u3053\u306econf-id\u3092\u901a\u3057\u3066\u8a2d\u5b9a\u306e\u5909\u66f4\u30fb\u9069\u7528\u3092\u884c\u3046 |\n| `GET /rest/conf` | - | Active\u306aconf-id\u3092\u53d6\u5f97 |\n| `GET /rest/conf/<session-id>/<param>` | `# set`\u306e\u5f8cTAB\u30ad\u30fc\u3067\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u5019\u88dc\u3092\u8868\u793a | Config Mode\u306eset\u30b3\u30de\u30f3\u30c9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u7b49\u3092\u8868\u793a |\n| `PUT /rest/conf/<session-id>/set/xxx/yyy` | `# set xxx yyy` | conf-id\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066set\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c |\n| `PUT /rest/conf/<session-id>/delete/xxx/yyy` | `# delete xxx yyy` | conf-id\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066delete\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c |\n| `POST /rest/conf/<session-id>/commit` | `# commit` | config\u306ecommit |\n| `POST /rest/conf/<session-id>/save` | `# save` | config\u306e\u4fdd\u5b58 |\n| `DELETE /rest/conf/<session-id>` | `# exit` | Config Mode\u304b\u3089exit\u3002conf-id\u304c\u7834\u68c4\u3055\u308c\u308b |\n\n\n## Operational Mode\n\n| REST API Command       | Vyatta CLI command  |  \u5099\u8003       |\n|----------------------|------------------------|-----------|\n| `POST /rest/op/<path>` | `<path>`\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c | Operational Mode\u306e\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u3066Location\u3092\u53d6\u5f97\u3002 |\n| `GET /rest/op/<Location>` | `<path>`\u306e\u30b3\u30de\u30f3\u30c9\u306e\u7d50\u679c\u3092\u8868\u793a | Location\u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30b3\u30de\u30f3\u30c9\u306e\u51fa\u529b\u304c\u5f97\u3089\u308c\u308b |\n| `GET /rest/op/<path>` | TAB\u30ad\u30fc\u3067\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u5019\u88dc\u3092\u8868\u793a | Operational mode\u306e\u30b3\u30de\u30f3\u30c9\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30fc\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u7b49\u3092\u8868\u793a |\n| `GET /rest/op` | - | Operational Mode\u3067\u5b9f\u884c\u4e2d\u306e\u30b3\u30de\u30f3\u30c9\u3001\u51fa\u529b\u7d50\u679c\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u306a\u3044\u30d7\u30ed\u30bb\u30b9\u3092\u8868\u793a |\n| `DELETE /rest/op/<process-id>` | - | Operational mode\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7d42\u4e86 |\n\n\n# Vyatta REST API\u306e\u4f7f\u7528\u4f8b\n\n\n## Configuration Mode\n\nConfiguration Mode\u3067\u306e\u51e6\u7406\u306f\u4ee5\u4e0b\u306e\u9806\u5e8f\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n1. Configuration Mode\u306econf-id\u3092\u53d6\u5f97 (`POST /rest/conf`)\n1. conf-id\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u5bfe\u3057\u3066Configuration\u3092\u884c\u3046 (`PUT /rest/conf/<conf-id>/set/<path>`, `PUT /rest/conf/<conf-id>/delete/<path>`)\n1. Config\u3092Commit (`POST /rest/conf/<conf-id>/commit`)\n1. Config\u3092Save (`POST /rest/conf/<conf-id>/save`)\n\n\n### Configuration Mode\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\n\n#### \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u53d6\u5f97\n\n```\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/conf/CDAAF2AA11A9D45F\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 13:18:37 GMT\nServer: lighttpd/1.4.28\n```\n\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u8b58\u5225\u3059\u308b\u305f\u3081\u306bdescription\u3092\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf/CONFIG_BY_API\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/conf/5460F22FE50CFCFD\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 14:04:22 GMT\nServer: lighttpd/1.4.28\n```\n\n#### \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\n\n\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\u4f5c\u6210\u3057\u305f2\u3064\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u8868\u793a\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 425\nDate: Sat, 21 Feb 2015 14:04:34 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"session\": [\n    {\n      \"id\": \"5460F22FE50CFCFD\",\n      \"username\": \"vyatta\",\n      \"description\": \"CONFIG_BY_API\",\n      \"started\": \"1424527462\",\n      \"modified\": \"false\",\n      \"updated\": \"1424527462\"\n    },\n    {\n      \"id\": \"CDAAF2AA11A9D45F\",\n      \"username\": \"vyatta\",\n      \"description\": \"\",\n      \"started\": \"1424524717\",\n      \"modified\": \"false\",\n      \"updated\": \"1424524717\"\n    }\n  ],\n  \"message\": \" \"\n}\n```\n\n\u4ee5\u964d\u3067\u306f`5460F22FE50CFCFD`\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\n\n\n### \u30bb\u30c3\u30b7\u30e7\u30f3ID\u306b\u5bfe\u3057\u3066Configuration\u3092\u5b9f\u884c\n\n\u4ee5\u4e0b\u3067\u306f\u3001set\u30b3\u30de\u30f3\u30c9\u3067bond0\u30a4\u30f3\u30bf\u30d5\u30a7\u30fc\u30b9\u306bIP\u30a2\u30c9\u30ec\u30b9\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u307e\u3059\u3002\nVyatta\u3067\u306eIP\u30a2\u30c9\u30ec\u30b9\u306e\u8a2d\u5b9a\u3067\u306f\u30cd\u30c3\u30c8\u30de\u30af\u30b9\u3092/\u3067\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u304cREST API\u3067\u306f\u3001\u30cd\u30c3\u30c8\u30de\u30b9\u30af\u3092\u8868\u3059/\u3068\u3001URI\u306e/\u3068\u533a\u5225\u304c\u3064\u304b\u306a\u3044\u305f\u3081\u3001/\u306e\u307e\u307e\u3067\u306f\u30a8\u30e9\u30fc\u306b\u306a\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002/\u3092\u4f7f\u3046\u5834\u5408\u306f\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306bURL\u30a8\u30f3\u30b3\u30fc\u30c9\u3055\u308c\u305f`%2F`\u3092\u4f7f\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X PUT https://10.x.x.x/rest/conf/5460F22FE50CFCFD/set/interfaces/bonding/bond0/address/192.168.10.1%2F24\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 14:12:35 GMT\nServer: lighttpd/1.4.28\n```\n\ndelete\u30b3\u30de\u30f3\u30c9\u3082\u3001\u540c\u69d8\u306bPUT\u30e1\u30bd\u30c3\u30c9\u3067\u5b9f\u884c\u53ef\u80fd\u3067\u3059\u3002\n\n\n### Config\u306eCommit & Save\n\n\u3053\u306e\u6642\u70b9\u3067\u306f\u307e\u3060\u8a2d\u5b9a\u304c\u9069\u7528\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002Config\u3092Commit\u3057\u3066\u8a2d\u5b9a\u3092\u53cd\u6620\u3055\u305b\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf/5460F22FE50CFCFD/commit\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 21\nDate: Sat, 21 Feb 2015 14:15:05 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"message\": \" \"\n}\n```\n\n\u3053\u308c\u3067\u3001\u5b9f\u884c\u4e2d\u306eVyatta\u306b\u306f\u8a2d\u5b9a\u304c\u53cd\u6620\u3055\u308c\u307e\u3057\u305f\u304c\u3001\u307e\u3060\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u306b\u306f\u8a2d\u5b9a\u304c\u4fdd\u5b58\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u518d\u8d77\u52d5\u3059\u308b\u3068\u5143\u306e\u8a2d\u5b9a\u306b\u623b\u3063\u3066\u3057\u307e\u3044\u307e\u3059\u3002save\u3092\u5b9f\u884c\u3057\u3066\u8a2d\u5b9a\u3092\u30d5\u30a1\u30a4\u30eb\u306b\u4fdd\u5b58\u3057\u307e\u3059\n\n```\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/conf/5460F22FE50CFCFD/save\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 79\nDate: Sat, 21 Feb 2015 14:16:43 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"message\": \" Saving configuration to '/config/config.boot'...\\n Done\\n \"\n}\n```\n\n\n### \u30b3\u30de\u30f3\u30c9\u5b9a\u7fa9\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8868\u793a\n\nVyatta\u306eConfiguration Mode\u3067\u3001set\u30b3\u30de\u30f3\u30c9\u306e\u5f8cTAB\u30ad\u30fc\u3092\u62bc\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5019\u88dc\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\n```\nvyatta@vyatta-tok02# set\nPossible completions:\n > cluster      Clustering\n > firewall     Firewall\n > interfaces   Network interfaces\n > load-balancing\n                Configure load-balancing\n > nat          Network Address Translation (NAT) parameters\n > policy       Routing policy\n > protocols    Routing protocol parameters\n > service      Services\n > system       System parameters\n > test-definition\n                Configure the definition of a test\n > traffic-policy\n                Quality of Service (QOS) policy type\n > vpn          Virtual Private Network (VPN)\n > zone-policy  Configure zone-policy\n```\n\n\u540c\u69d8\u306e\u64cd\u4f5c\u3092API\u3067\u3082\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf/5460F22FE50CFCFD/\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 1408\nDate: Sat, 21 Feb 2015 13:48:51 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    {\n      \"name\": \"service\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"system\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"protocols\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"interfaces\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"firewall\",\n      \"state\": \"active\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"nat\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"zone-policy\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"vpn\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"cluster\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"test-definition\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"policy\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"load-balancing\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"traffic-policy\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    }\n  ],\n  \"type\": [\n    \"none\"\n  ],\n  \"deactivate_state\": \"enable\",\n  \"is_changed\": \"true\",\n  \"state\": \"active\"\n}\n```\n\n\u3055\u3089\u306b\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306b\u308f\u305f\u3063\u3066\u3082\u5019\u88dc\u3092\u8868\u793a\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/conf/5460F22FE50CFCFD/vpn\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 565\nDate: Sat, 21 Feb 2015 13:49:34 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    {\n      \"name\": \"pptp\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"l2tp\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"rsa-keys\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    },\n    {\n      \"name\": \"ipsec\",\n      \"state\": \"none\",\n      \"deactivate_state\": \"enable\"\n    }\n  ],\n  \"type\": [\n    \"none\"\n  ],\n  \"deactivate_state\": \"enable\",\n  \"help\": \" Virtual Private Network (VPN)\",\n  \"is_changed\": \"false\",\n  \"name\": \"vpn\",\n  \"state\": \"none\"\n}\n```\n\n\n## Operational Mode\n\nOperational Mode\u3067\u306e\u51e6\u7406\u306f\u4ee5\u4e0b\u306e\u9806\u5e8f\u3067\u5b9f\u884c\u3057\u307e\u3059\u3002\n\n1. POST\u3067\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u3092\u30ea\u30af\u30a8\u30b9\u30c8 (`POST /rest/op/`)\n1. Response\u304b\u3089Location\u3092\u53d6\u5f97 (`Location: /rest/op/xxxxxxxxxxxxxxx`)\n1. GET\u3067Location\u3078\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u30b3\u30de\u30f3\u30c9\u5b9f\u884c\u7d50\u679c\u306e\u6a19\u6e96\u51fa\u529b\u304c\u5f97\u3089\u308c\u308b (`GET /rest/op/xxxxxxxxxxxxxxx`)\n\n\n### \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\n```\n$ curl -k -s -i -u vyatta:vyatta -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/op/show/version\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/op/46826F1EB88B80F4\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 15:06:28 GMT\nServer: lighttpd/1.4.28\n```\n\n\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3059\u308b\u3068\u3001Response\u3067`Location: rest/op/46826F1EB88B80F4`\u3092\u53d6\u5f97\u3057\u3066\u3044\u307e\u3059\u3002\n\n### \u53d6\u5f97\u3057\u305fLocation\u306b\u30a2\u30af\u30bb\u30b9\n\n\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u3092\u51fa\u529b\u3059\u308b\u305f\u3081\u306b\u3001\u3053\u306eLocation\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066API\u306e\u5b9f\u884c\u7d50\u679c\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u3088\u3046\u306b`show version`\u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\u7d50\u679c\u304c\u8fd4\u3055\u308c\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op/46826F1EB88B80F4\nHTTP/1.1 200 OK\nContent-Type: text/plain\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 456\nDate: Sat, 21 Feb 2015 15:06:46 GMT\nServer: lighttpd/1.4.28\n\nVersion:      VSE6.6R6\nDescription:  Brocade Vyatta 5415 vRouter 6.6 R6\nCopyright:    2006-2014 Vyatta, Inc.\nBuilt by:     autobuild@vyatta.com\nBuilt on:     Thu Jun 26 23:44:07 UTC 2014\nBuild ID:     1406262347-dd268ed\nSystem type:  Intel 64bit\nBoot via:     disk\nHW model:     X10SLH-N6-ST031\nHW S/N:       0123456789\nHW UUID:      00000000-0000-0000-0000-0CC47A1E8DA8\nUptime:       09:06:29 up 6 days, 53 min,  1 user,  load average: 0.07, 0.17, 0.17\n```\n\n#### \u8aa4\u3063\u305f\u30b3\u30de\u30f3\u30c9\u306e\u5834\u5408\n\n\u8aa4\u3063\u305f\u30b3\u30de\u30f3\u30c9\u3092\u5b9f\u884c\u3057\u305f\u5834\u5408\u3001\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u305d\u306e\u307e\u307e\u8fd4\u3055\u308c\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:Fkc82BMe -H \"Content-Length: 0\" -H \"Accept: application/json\" -X POST https://10.x.x.x/rest/op/show/veersion\nHTTP/1.1 201 Created\nContent-Type: application/json\nLocation: rest/op/9A11F8E835A36056\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nTransfer-Encoding: chunked\nDate: Sat, 21 Feb 2015 15:46:59 GMT\nServer: lighttpd/1.4.28\n\n\n$ curl -k -s -i -u vyatta:Fkc82BMe -X GET https://10.x.x.x/rest/op/9A11F8E835A36056\nHTTP/1.1 200 OK\nContent-Type: text/plain\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 37\nDate: Sat, 21 Feb 2015 15:47:13 GMT\nServer: lighttpd/1.4.28\n\n\n  Invalid command: show [veersion]\n```\n\n#### Location\u306b\u30a2\u30af\u30bb\u30b9\u3057\u306a\u3044\u5834\u5408\n\nLocation\u306b\u30a2\u30af\u30bb\u30b9\u3057\u306a\u3044\u5834\u5408\u3001\u51fa\u529b\u7d50\u679c\u306f\u524a\u9664\u3055\u308c\u305a\u306b\u3069\u3093\u3069\u3093\u84c4\u7a4d\u3055\u308c\u3066\u3044\u304d\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 356\nDate: Sat, 21 Feb 2015 15:08:25 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"process\": [\n    {\n      \"username\": \"vyatta\",\n      \"started\": \"1424435506\",\n      \"updated\": \"16466314\",\n      \"id\": \"1F8C6DD257234D32\",\n      \"command\": \"show 'version'\"\n    },\n    {\n      \"username\": \"vyatta\",\n      \"started\": \"1424531188\",\n      \"updated\": \"16466314\",\n      \"id\": \"46826F1EB88B80F4\",\n      \"command\": \"show 'version'\"\n    }\n  ]\n}\n```\n\n### \u30b3\u30de\u30f3\u30c9\u5b9a\u7fa9\u3001\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u8868\u793a\n\nOperational Mode\u3067TAB\u30ad\u30fc\u3092\u62bc\u3059\u3068\u5b50\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5019\u88dc\u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3068\u540c\u69d8\u306e\u64cd\u4f5c\u3092\u3001API\u3067\u3082\u5b9f\u884c\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op/\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 437\nDate: Sat, 21 Feb 2015 15:19:24 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    \"renew\",\n    \"force\",\n    \"test\",\n    \"telnet\",\n    \"show\",\n    \"monitor\",\n    \"update\",\n    \"poweroff\",\n    \"clear\",\n    \"reboot\",\n    \"install\",\n    \"mtrace\",\n    \"format\",\n    \"delete\",\n    \"set\",\n    \"release\",\n    \"generate\",\n    \"ping\",\n    \"restart\",\n    \"disconnect\",\n    \"configure\",\n    \"add\",\n    \"rename\",\n    \"reset\",\n    \"copy\",\n    \"connect\",\n    \"clone\",\n    \"traceroute\"\n  ],\n  \"action\": \"false\"\n}\n```\n\n```\n$ curl -k -s -i -u vyatta:vyatta -X GET https://10.x.x.x/rest/op/show/interfaces/ethernet/eth0\nHTTP/1.1 200 OK\nContent-Type: application/json\nVyatta-Specification-Version: 0.3\nCache-Control: no-cache\nContent-Length: 278\nDate: Fri, 20 Feb 2015 12:28:58 GMT\nServer: lighttpd/1.4.28\n\n{\n  \"children\": [\n    \"queue\",\n    \"physical\",\n    \"brief\",\n    \"vif\",\n    \"identify\",\n    \"statistics\"\n  ],\n  \"enum\": [\n    \"eth0\",\n    \"eth1\",\n    \"eth2\",\n    \"eth3\",\n    \"eth4\",\n    \"eth5\"\n  ],\n  \"action\": \"true\",\n  \"help\": \" Show specified ethernet interface information\"\n}\n```\n\n\n# \u53c2\u8003\n\n- [20140404 vyatta users Group / REST API\u89e3\u8aac](http://www.slideshare.net/YukihiroKikuchi/20140404-vyatta-users-group)\n- [Vyatta Documentation: Remote Access API](http://www.brocade.com/downloads/documents/html_product_manuals/vyatta/vyatta_5400_manual/Remote%20Access%20API/wwhelp/wwhimpl/js/html/wwhelp.htm)\n- Vyatta\u306e\u4ee5\u4e0b\u306e\u30d5\u30a1\u30a4\u30eb\u306b\u30b5\u30f3\u30d7\u30eb\u3042\u308a\n - /opt/vyatta/sbin/vyatta\u2010webgui2\u2010shell.pl\n - /opt/vyatta/sbin/vyatta\u2010webgui2\u2010op.pl\n- [Software Engineering Crunch and more...: Session support in the Vyatta REST API](http://softengcrunch.blogspot.jp/2011/03/session-support-in-vyatta-rest-api.html)\n- [Shell API - VyOS jp](http://wiki.vyos-users.jp/Shell_API) Shell API\u3068\u3044\u3046\u306e\u3082\u3042\u308b\u3089\u3057\u3044\n"}