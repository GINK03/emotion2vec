{"context": "Git\u30b3\u30ef\u30a4 \u30af\u30e9\u30a6\u30c9\u30b3\u30ef\u30a4 \u3063\u3066\u5148\u8f29\u8a00\u3063\u3066\u308b\u3051\u3069\n\u30aa\u30f3\u30d7\u30ec\u306a\u3089\u3048\u3048\u3093\u3084\u308d\u3063\u3066\u3053\u3068\u3067\u3001\u3001\u3001\nCentOS 7 \u306e\u74b0\u5883\u3067\u3064\u304f\u3063\u3066\u307e\u3059\n\n\u53bb\u5e74\u50d5\u304c\u884c\u3063\u305f\u30a4\u30f3\u30c9\u30cd\u30b7\u30a2\u6700\u5927\u306e\u5cf6\u3068\u540c\u3058\u540d\u524d\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3092\u6271\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3059\n\u5f53\u6642\u306fversion \"1.8.0_71\" \u304c\u6700\u65b0\u3067\u3057\u305f\n\n# yum search openjdk\n# yum install java-1.8.0-openjdk-devel.x86_64\n# java -version\nopenjdk version \"1.8.0_71\"\nOpenJDK Runtime Environment (build 1.8.0_71-b15)\nOpenJDK 64-Bit Server VM (build 25.71-b15, mixed mode)\n# su kuchidake\n$ export JAVA_HOME=/usr/bin/java\n$ source .bashrc\n$ echo $JAVA_HOME\n/usr/bin/java\n\n\napplication server \u306f\u4f55\u304c\u3044\u3044\u3067\u3059\u304b?  tomcat\u3067\u3044\u3044\u3067\u3059\u304b?\n\u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044tomcat\u30e6\u30fc\u30b6\u3092\u3064\u304f\u308b\n\n# yum install tomcat\n# yum install httpd\n# useradd -s /sbin/nologin tomcat\n# chown -R tomcat:tomcat /usr/share/tomcat/\n\nApache\u3068\u9023\u643a\u3055\u305b\u308b\u305f\u3081\u3001http\u306e\u30b3\u30cd\u30af\u30bf\u30dd\u30fc\u30c8\u306f\u7121\u52b9\u306b\u3057\u3001ajp\u3067\u9023\u643a\u3059\u308b\u3002\n# vi /usr/share/tomcat/conf/server.xml\n<!--\n  <connector port=\"8080\" protocol=\"HTTP/1.1\"\n             connectionTimeout=\"20000\"\n             redirectPort=\"8443\">\n-->\n\n<connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\">\n\n\n\n\n# vi /etc/httpd/conf.d/vhosts.conf\n\n<VirtualHost *:80>\nDocumentRoot /usr/share/tomcat/webapps/gitbucket\nServerName gitbucket.com\nErrorLog logs/gitbucket_error_log\nCustomLog logs/gitbucket_access_log common\n<Proxy *>\n  Order deny,allow\n  Allow from all\n</Proxy>\nProxyPass /assets !\nProxyPass /gitbucket ajp://localhost:8009/gitbucket\nProxyPassReverse /gitbucket ajp://localhost:8009/gitbucket\nProxyPreserveHost on\n</VirtualHost>\n\n# systemctl restart httpd\n\n\n# cd /usr/share/tomcat/webapps\n# wget https://github.com/gitbucket/gitbucket/releases/download/3.11/gitbucket.war\n# systemctl start tomcat\n\n\n\n# firewall-cmd --zone=public --add-port=8009/tcp --permanent\n# firewall-cmd --reload\n\n\n\n# systemctl enable httpd\n# systemctl enable tomcat\n\n* Nmap\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f7f\u7528\u4e2d\u306e\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3059\u308b\n# yum install -y nmap\n# nmap localhost\n\n\n\u305d\u3046\u304b\u304a\u524d\u306fjetty \u304c\u3044\u3044\u306e\u304b\u3002\n\n# java -jar /usr/share/tomcat/webapps/gitbucket/gitbucket.war\n2016-02-16 17:15:29.841:INFO::main: Logging initialized @171ms\n2016-02-16 17:15:29.918:INFO:oejs.Server:main: jetty-9.3.z-SNAPSHOT\n2016-02-16 17:15:30.940:INFO:oejw.StandardDescriptorProcessor:main: NO JSP Support for /, did not find org.eclipse.jetty.jsp.JettyJspServlet\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/root/.gitbucket/tmp/webapp/WEB-INF/lib/logback-classic-1.1.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/root/.gitbucket/tmp/webapp/WEB-INF/lib/slf4j-jdk14-1.7.12.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\n17:15:31.309 [MLog-Init-Reporter] INFO  com.mchange.v2.log.MLog - MLog clients using slf4j logging.\n17:15:31.420 [main] INFO  com.mchange.v2.c3p0.C3P0Registry - Initializing c3p0-0.9.5.2 [built 08-December-2015 22:06:04 -0800; debug? true; trace: 10]\n17:15:31.568 [main] INFO  c.m.v.c.i.AbstractPoolBackedDataSource - Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, contextClassLoaderSource -> library, dataSourceName -> z8kflt9e1souujr1eg1d92|15c43bd9, debugUnreturnedConnectionStackTraces -> false, description -> null, driverClass -> org.h2.Driver, extensions -> {}, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, forceSynchronousCheckins -> false, forceUseNamedDriverClass -> false, identityToken -> z8kflt9e1souujr1eg1d92|15c43bd9, idleConnectionTestPeriod -> 0, initialPoolSize -> 3, jdbcUrl -> jdbc:h2:/root/.gitbucket/data;MVCC=true, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 0, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 15, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 3, numHelperThreads -> 3, preferredTestQuery -> null, privilegeSpawnedThreads -> true, properties -> {user=******, password=******}, propertyCycle -> 0, statementCacheNumDeferredCloseThreads -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, userOverrides -> {}, usesTraditionalReflectiveProxies -> false ]\n17:15:32.998 [main] INFO  o.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n17:15:32.999 [main] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.2.1 created.\n17:15:33.002 [main] INFO  org.quartz.simpl.RAMJobStore - RAMJobStore initialized.\n17:15:33.003 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'QuartzScheduler~job' with instanceId 'job'\n  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n  NOT STARTED.\n  Currently in standby mode.\n  Number of jobs executed: 0\n  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 1 threads.\n  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.\n\n17:15:33.003 [main] INFO  o.quartz.impl.DirectSchedulerFactory - Quartz scheduler 'QuartzScheduler~job\n17:15:33.003 [main] INFO  o.quartz.impl.DirectSchedulerFactory - Quartz scheduler version: 2.2.1\n17:15:33.004 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler QuartzScheduler~job_$_job started.\n[INFO] [02/16/2016 17:15:33.010] [main] [[QuartzScheduler~job]] Setting up scheduled job 'Daily', with 'com.typesafe.akka.extension.quartz.QuartzCronSchedule@2ceb80a1'\n17:15:33.023 [main] INFO  o.scalatra.servlet.ScalatraListener - The cycle class name from the config: ScalatraBootstrap\n17:15:33.025 [main] INFO  o.scalatra.servlet.ScalatraListener - Initializing life cycle class: ScalatraBootstrap\n2016-02-16 17:15:33.575:INFO:oejsh.ContextHandler:main: Started o.e.j.w.WebAppContext@62d0ac62{/,file:///root/.gitbucket/tmp/webapp/,AVAILABLE}{/gitbucket/gitbucket.war}\nException in thread \"main\" java.net.BindException: Address already in use\n        at sun.nio.ch.Net.bind0(Native Method)\n        at sun.nio.ch.Net.bind(Net.java:433)\n        at sun.nio.ch.Net.bind(Net.java:425)\n        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\n        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\n        at org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:326)\n        at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\n        at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:244)\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n        at org.eclipse.jetty.server.Server.doStart(Server.java:384)\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n        at JettyLauncher.main(JettyLauncher.java:64)\n\n\n\u3068\u3044\u3046\u3053\u3068\u3067 tomcat\u3092\u6d88\u3057\u307e\u3059\nrm -r tomcat \u306f\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u3044\u30e6\u30fc\u30b6\u306a\u3093\u3060\u304b\u3089 -r \u3044\u3089\u306a\u304b\u3063\u305f\u3067\u3059\n\n# systemctl stop tomcat\n# yum list installed | grep tomcat\ntomcat.noarch                        7.0.54-2.el7_1                    @base\ntomcat-el-2.2-api.noarch             7.0.54-2.el7_1                    @base\ntomcat-jsp-2.2-api.noarch            7.0.54-2.el7_1                    @base\ntomcat-lib.noarch                    7.0.54-2.el7_1                    @base\ntomcat-servlet-3.0-api.noarch        7.0.54-2.el7_1                    @base\n# yum remove -y tomcat.noarch tomcat-el-2.2-api.noarch tomcat-jsp-2.2-api.noarch tomcat-lib.noarch tomcat-servlet-3.0-api.noarch\n# cd /usr/share/\n# rm -r tomcat\n\n\n\n\u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066Jetty(\u521d\u3081\u3066\u4f7f\u3046)\u3067\u3084\u3063\u3066\u307f\u307e\u3059 \u2190\u8ae6\u3081\u304c\u60aa\u3044\n$ cd ~\n$ wget http://download.eclipse.org/jetty/stable-9/dist/jetty-distribution-9.3.7.v20160115.tar.gz\n$ tar zxvf jetty-distribution-9.3.7.v20160115.tar.gz\n$ rm jetty-distribution-9.3.7.v20160115.tar.gz\n$ sudo mv jetty-distribution-9.3.7.v20160115 /opt/gitbucket\n$ sudo useradd -m jetty\n$ sudo chown -R jetty:jetty /opt/gitbucket/\n$ sudo ln -s /opt/gitbucket/bin/jetty.sh /etc/init.d/gitbucket\n$ sudo chkconfig --add gitbucket\n$ sudo chkconfig --level 345 gitbucket on\n$ sudo chkconfig --list\n\nNote: This output shows SysV services only and does not include native\n      systemd services. SysV configuration data might be overridden by native\n      systemd configuration.\n\n      If you want to list systemd services use 'systemctl list-unit-files'.\n      To see services enabled on particular target use\n      'systemctl list-dependencies [target]'.\n\ngitbucket       0:off   1:off   2:off   3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\n\n$ sudo vi /etc/default/gitbucket\nJETTY_HOME=/opt/gitbucket\nJETTY_USER=jetty\nJETTY_PORT=8080\nJETTY_HOST=[CentOS\u306eIP\u30a2\u30c9\u30ec\u30b9]\nJETTY_LOGS=/opt/gitbucket/logs/\n\n$ sudo wget https://github.com/gitbucket/gitbucket/releases/download/3.11/gitbucket.war\n$ sudo service gitbucket start\n$ sudo firewall-cmd --zone=public --add-port=8080/tcp --permanent\nsuccess\n$ sudo firewall-cmd --reload\nsuccess\n\n\n\u30d6\u30e9\u30a6\u30b6\u3067http://[CentOS\u306eIP\u30a2\u30c9\u30ec\u30b9]:8080/gitbucket/ \u306b\u3064\u306a\u304c\u3063\u305f\u306e\u3067\u52dd\u3061\u3067\u3059\n\u30dd\u30fc\u30c8\u306e\u958b\u653e\u306f\u6700\u4f4e\u9650\u3067\u3059\n\n$ nmap localhost\n\nStarting Nmap 6.40 ( http://nmap.org ) at 2016-02-17 14:29 JST\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.00096s latency).\nOther addresses for localhost (not scanned): 127.0.0.1\nNot shown: 996 closed ports\nPORT     STATE SERVICE\n22/tcp   open  ssh\n25/tcp   open  smtp\n80/tcp   open  http\n8080/tcp open  http-proxy\n\nNmap done: 1 IP address (1 host up) scanned in 0.14 seconds\n\n\n\u79fb\u884c\u3059\u308b\u3068\u304d\u306f base_url \u3092\u65b0\u3057\u3044 IP \u30a2\u30c9\u30ec\u30b9\u306b\u66f8\u304d\u63db\u3048\u308b\u3060\u3051\n\n# vi /home/jetty/.gitbucket/gitbucket.conf\n\n\n\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\nCentOS\u306bGitBucket\u3092\u305f\u3066\u3066\u307f\u305f\nGitBucket3.9\u3092CentOS7\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057Apache2.4\u3068\u9023\u643a\u3059\u308b\u624b\u9806\u307e\u3068\u3081\nCentOS\u306bGitBucket\u3092\u69cb\u7bc9\u3057\u3066\u307f\u305f\u3002\n\n\nGit\u30b3\u30ef\u30a4 \u30af\u30e9\u30a6\u30c9\u30b3\u30ef\u30a4 \u3063\u3066\u5148\u8f29\u8a00\u3063\u3066\u308b\u3051\u3069\n\u30aa\u30f3\u30d7\u30ec\u306a\u3089\u3048\u3048\u3093\u3084\u308d\u3063\u3066\u3053\u3068\u3067\u3001\u3001\u3001\n\nCentOS 7 \u306e\u74b0\u5883\u3067\u3064\u304f\u3063\u3066\u307e\u3059\n\n\n\n* \u53bb\u5e74\u50d5\u304c\u884c\u3063\u305f\u30a4\u30f3\u30c9\u30cd\u30b7\u30a2\u6700\u5927\u306e\u5cf6\u3068\u540c\u3058\u540d\u524d\u306e\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u3092\u6271\u3048\u308b\u3088\u3046\u306b\u3057\u307e\u3059  \n\u5f53\u6642\u306fversion \"1.8.0_71\" \u304c\u6700\u65b0\u3067\u3057\u305f\n\n```\n# yum search openjdk\n# yum install java-1.8.0-openjdk-devel.x86_64\n# java -version\nopenjdk version \"1.8.0_71\"\nOpenJDK Runtime Environment (build 1.8.0_71-b15)\nOpenJDK 64-Bit Server VM (build 25.71-b15, mixed mode)\n# su kuchidake\n$ export JAVA_HOME=/usr/bin/java\n$ source .bashrc\n$ echo $JAVA_HOME\n/usr/bin/java\n```\n\n* application server \u306f\u4f55\u304c\u3044\u3044\u3067\u3059\u304b?  tomcat\u3067\u3044\u3044\u3067\u3059\u304b?\n* \u30ed\u30b0\u30a4\u30f3\u3067\u304d\u306a\u3044tomcat\u30e6\u30fc\u30b6\u3092\u3064\u304f\u308b\n\n```\n# yum install tomcat\n# yum install httpd\n# useradd -s /sbin/nologin tomcat\n# chown -R tomcat:tomcat /usr/share/tomcat/\n```\n\nApache\u3068\u9023\u643a\u3055\u305b\u308b\u305f\u3081\u3001http\u306e\u30b3\u30cd\u30af\u30bf\u30dd\u30fc\u30c8\u306f\u7121\u52b9\u306b\u3057\u3001ajp\u3067\u9023\u643a\u3059\u308b\u3002\n\n```\n# vi /usr/share/tomcat/conf/server.xml\n<!--\n  <connector port=\"8080\" protocol=\"HTTP/1.1\"\n             connectionTimeout=\"20000\"\n             redirectPort=\"8443\">\n-->\n\n<connector port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\">\n\n\n\n\n# vi /etc/httpd/conf.d/vhosts.conf\n\n<VirtualHost *:80>\nDocumentRoot /usr/share/tomcat/webapps/gitbucket\nServerName gitbucket.com\nErrorLog logs/gitbucket_error_log\nCustomLog logs/gitbucket_access_log common\n<Proxy *>\n  Order deny,allow\n  Allow from all\n</Proxy>\nProxyPass /assets !\nProxyPass /gitbucket ajp://localhost:8009/gitbucket\nProxyPassReverse /gitbucket ajp://localhost:8009/gitbucket\nProxyPreserveHost on\n</VirtualHost>\n\n# systemctl restart httpd\n\n\n# cd /usr/share/tomcat/webapps\n# wget https://github.com/gitbucket/gitbucket/releases/download/3.11/gitbucket.war\n# systemctl start tomcat\n\n\n\n# firewall-cmd --zone=public --add-port=8009/tcp --permanent\n# firewall-cmd --reload\n\n\n\n# systemctl enable httpd\n# systemctl enable tomcat\n\n* Nmap\u30b3\u30de\u30f3\u30c9\u3067\u3001\u4f7f\u7528\u4e2d\u306e\u30dd\u30fc\u30c8\u3092\u78ba\u8a8d\u3059\u308b\n# yum install -y nmap\n# nmap localhost\n```\n\n* \u305d\u3046\u304b\u304a\u524d\u306fjetty \u304c\u3044\u3044\u306e\u304b\u3002\n\n\n```\n# java -jar /usr/share/tomcat/webapps/gitbucket/gitbucket.war\n2016-02-16 17:15:29.841:INFO::main: Logging initialized @171ms\n2016-02-16 17:15:29.918:INFO:oejs.Server:main: jetty-9.3.z-SNAPSHOT\n2016-02-16 17:15:30.940:INFO:oejw.StandardDescriptorProcessor:main: NO JSP Support for /, did not find org.eclipse.jetty.jsp.JettyJspServlet\nSLF4J: Class path contains multiple SLF4J bindings.\nSLF4J: Found binding in [jar:file:/root/.gitbucket/tmp/webapp/WEB-INF/lib/logback-classic-1.1.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Found binding in [jar:file:/root/.gitbucket/tmp/webapp/WEB-INF/lib/slf4j-jdk14-1.7.12.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]\n17:15:31.309 [MLog-Init-Reporter] INFO  com.mchange.v2.log.MLog - MLog clients using slf4j logging.\n17:15:31.420 [main] INFO  com.mchange.v2.c3p0.C3P0Registry - Initializing c3p0-0.9.5.2 [built 08-December-2015 22:06:04 -0800; debug? true; trace: 10]\n17:15:31.568 [main] INFO  c.m.v.c.i.AbstractPoolBackedDataSource - Initializing c3p0 pool... com.mchange.v2.c3p0.ComboPooledDataSource [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, contextClassLoaderSource -> library, dataSourceName -> z8kflt9e1souujr1eg1d92|15c43bd9, debugUnreturnedConnectionStackTraces -> false, description -> null, driverClass -> org.h2.Driver, extensions -> {}, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, forceSynchronousCheckins -> false, forceUseNamedDriverClass -> false, identityToken -> z8kflt9e1souujr1eg1d92|15c43bd9, idleConnectionTestPeriod -> 0, initialPoolSize -> 3, jdbcUrl -> jdbc:h2:/root/.gitbucket/data;MVCC=true, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 0, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 15, maxStatements -> 0, maxStatementsPerConnection -> 0, minPoolSize -> 3, numHelperThreads -> 3, preferredTestQuery -> null, privilegeSpawnedThreads -> true, properties -> {user=******, password=******}, propertyCycle -> 0, statementCacheNumDeferredCloseThreads -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, userOverrides -> {}, usesTraditionalReflectiveProxies -> false ]\n17:15:32.998 [main] INFO  o.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl\n17:15:32.999 [main] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.2.1 created.\n17:15:33.002 [main] INFO  org.quartz.simpl.RAMJobStore - RAMJobStore initialized.\n17:15:33.003 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.2.1) 'QuartzScheduler~job' with instanceId 'job'\n  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.\n  NOT STARTED.\n  Currently in standby mode.\n  Number of jobs executed: 0\n  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 1 threads.\n  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.\n\n17:15:33.003 [main] INFO  o.quartz.impl.DirectSchedulerFactory - Quartz scheduler 'QuartzScheduler~job\n17:15:33.003 [main] INFO  o.quartz.impl.DirectSchedulerFactory - Quartz scheduler version: 2.2.1\n17:15:33.004 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler QuartzScheduler~job_$_job started.\n[INFO] [02/16/2016 17:15:33.010] [main] [[QuartzScheduler~job]] Setting up scheduled job 'Daily', with 'com.typesafe.akka.extension.quartz.QuartzCronSchedule@2ceb80a1'\n17:15:33.023 [main] INFO  o.scalatra.servlet.ScalatraListener - The cycle class name from the config: ScalatraBootstrap\n17:15:33.025 [main] INFO  o.scalatra.servlet.ScalatraListener - Initializing life cycle class: ScalatraBootstrap\n2016-02-16 17:15:33.575:INFO:oejsh.ContextHandler:main: Started o.e.j.w.WebAppContext@62d0ac62{/,file:///root/.gitbucket/tmp/webapp/,AVAILABLE}{/gitbucket/gitbucket.war}\nException in thread \"main\" java.net.BindException: Address already in use\n        at sun.nio.ch.Net.bind0(Native Method)\n        at sun.nio.ch.Net.bind(Net.java:433)\n        at sun.nio.ch.Net.bind(Net.java:425)\n        at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:223)\n        at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)\n        at org.eclipse.jetty.server.ServerConnector.open(ServerConnector.java:326)\n        at org.eclipse.jetty.server.AbstractNetworkConnector.doStart(AbstractNetworkConnector.java:80)\n        at org.eclipse.jetty.server.ServerConnector.doStart(ServerConnector.java:244)\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n        at org.eclipse.jetty.server.Server.doStart(Server.java:384)\n        at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:68)\n        at JettyLauncher.main(JettyLauncher.java:64)\n```\n\n* \u3068\u3044\u3046\u3053\u3068\u3067 tomcat\u3092\u6d88\u3057\u307e\u3059  \nrm -r tomcat \u306f\u30ed\u30b0\u30a4\u30f3\u3057\u306a\u3044\u30e6\u30fc\u30b6\u306a\u3093\u3060\u304b\u3089 -r \u3044\u3089\u306a\u304b\u3063\u305f\u3067\u3059\n\n```\n# systemctl stop tomcat\n# yum list installed | grep tomcat\ntomcat.noarch                        7.0.54-2.el7_1                    @base\ntomcat-el-2.2-api.noarch             7.0.54-2.el7_1                    @base\ntomcat-jsp-2.2-api.noarch            7.0.54-2.el7_1                    @base\ntomcat-lib.noarch                    7.0.54-2.el7_1                    @base\ntomcat-servlet-3.0-api.noarch        7.0.54-2.el7_1                    @base\n# yum remove -y tomcat.noarch tomcat-el-2.2-api.noarch tomcat-jsp-2.2-api.noarch tomcat-lib.noarch tomcat-servlet-3.0-api.noarch\n# cd /usr/share/\n# rm -r tomcat\n\n```\n\n## \u6c17\u3092\u53d6\u308a\u76f4\u3057\u3066Jetty(\u521d\u3081\u3066\u4f7f\u3046)\u3067\u3084\u3063\u3066\u307f\u307e\u3059 \u2190\u8ae6\u3081\u304c\u60aa\u3044\n\n```\n$ cd ~\n$ wget http://download.eclipse.org/jetty/stable-9/dist/jetty-distribution-9.3.7.v20160115.tar.gz\n$ tar zxvf jetty-distribution-9.3.7.v20160115.tar.gz\n$ rm jetty-distribution-9.3.7.v20160115.tar.gz\n$ sudo mv jetty-distribution-9.3.7.v20160115 /opt/gitbucket\n$ sudo useradd -m jetty\n$ sudo chown -R jetty:jetty /opt/gitbucket/\n$ sudo ln -s /opt/gitbucket/bin/jetty.sh /etc/init.d/gitbucket\n$ sudo chkconfig --add gitbucket\n$ sudo chkconfig --level 345 gitbucket on\n$ sudo chkconfig --list\n\nNote: This output shows SysV services only and does not include native\n      systemd services. SysV configuration data might be overridden by native\n      systemd configuration.\n\n      If you want to list systemd services use 'systemctl list-unit-files'.\n      To see services enabled on particular target use\n      'systemctl list-dependencies [target]'.\n\ngitbucket       0:off   1:off   2:off   3:on    4:on    5:on    6:off\nnetconsole      0:off   1:off   2:off   3:off   4:off   5:off   6:off\nnetwork         0:off   1:off   2:on    3:on    4:on    5:on    6:off\n\n$ sudo vi /etc/default/gitbucket\nJETTY_HOME=/opt/gitbucket\nJETTY_USER=jetty\nJETTY_PORT=8080\nJETTY_HOST=[CentOS\u306eIP\u30a2\u30c9\u30ec\u30b9]\nJETTY_LOGS=/opt/gitbucket/logs/\n\n$ sudo wget https://github.com/gitbucket/gitbucket/releases/download/3.11/gitbucket.war\n$ sudo service gitbucket start\n$ sudo firewall-cmd --zone=public --add-port=8080/tcp --permanent\nsuccess\n$ sudo firewall-cmd --reload\nsuccess\n```\n\n* \u30d6\u30e9\u30a6\u30b6\u3067http://[CentOS\u306eIP\u30a2\u30c9\u30ec\u30b9]:8080/gitbucket/ \u306b\u3064\u306a\u304c\u3063\u305f\u306e\u3067\u52dd\u3061\u3067\u3059\n\u30dd\u30fc\u30c8\u306e\u958b\u653e\u306f\u6700\u4f4e\u9650\u3067\u3059\n\n```\n$ nmap localhost\n\nStarting Nmap 6.40 ( http://nmap.org ) at 2016-02-17 14:29 JST\nNmap scan report for localhost (127.0.0.1)\nHost is up (0.00096s latency).\nOther addresses for localhost (not scanned): 127.0.0.1\nNot shown: 996 closed ports\nPORT     STATE SERVICE\n22/tcp   open  ssh\n25/tcp   open  smtp\n80/tcp   open  http\n8080/tcp open  http-proxy\n\nNmap done: 1 IP address (1 host up) scanned in 0.14 seconds\n```\n\n\n* \u79fb\u884c\u3059\u308b\u3068\u304d\u306f base_url \u3092\u65b0\u3057\u3044 IP \u30a2\u30c9\u30ec\u30b9\u306b\u66f8\u304d\u63db\u3048\u308b\u3060\u3051\n\n\n```\n# vi /home/jetty/.gitbucket/gitbucket.conf\n```\n\n* \u53c2\u8003\u306b\u3057\u307e\u3057\u305f\n[CentOS\u306bGitBucket\u3092\u305f\u3066\u3066\u307f\u305f](http://syobochim.hatenablog.com/entry/2015/05/31/232650)\n[GitBucket3.9\u3092CentOS7\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057Apache2.4\u3068\u9023\u643a\u3059\u308b\u624b\u9806\u307e\u3068\u3081](http://tech.pjin.jp/blog/2015/12/06/gitbucket-install-to-centos7/)\n[CentOS\u306bGitBucket\u3092\u69cb\u7bc9\u3057\u3066\u307f\u305f\u3002](http://qiita.com/YN0314/items/d205dfed2e968bf8f408)\n", "tags": ["centos7", "GitBucket"]}