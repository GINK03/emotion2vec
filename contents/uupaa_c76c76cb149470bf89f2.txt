{"context": "\n\n\u8ffd\u8a18\n2016/02/16 \u306b ffmpeg version 3.0 \u304c\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f\u3002\nver 3.0 \u3067\u306f libaacplus libvo-aacenc \u304c\u524a\u9664\u3055\u308c\u308b\u306a\u3069\u3001\u30b3\u30fc\u30c7\u30c3\u30af\u3068\u30b3\u30f3\u30c6\u30ca\u306e\u7d71\u5ec3\u5408\u304c\u884c\u308f\u308c\u305f\u3088\u3046\u3067\u3059\u3002\n\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u306f ffmpeg version 2.x \u306b\u3064\u3044\u3066\u8a18\u8ff0\u3057\u3066\u3044\u308b\u305f\u3081\u3001\nver 3.x \u3067\u306f\u305d\u306e\u307e\u307e\u3067\u306f\u52d5\u304b\u306a\u3044\u90e8\u5206\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3054\u7559\u610f\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u3001 libfdk_aac \u304c\u4f7f\u3048\u306a\u3044\u5834\u5408\u306f\u3001 libfaac \u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u672c\u6587\nffmpeg \u3092\u4f7f\u3044 HLS \u3092\u4f7f\u3063\u305f\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092 mp4 \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u4fdd\u5b58\u3057\u305f\u308a\u3001\u305d\u306e\u53cd\u5bfe\u306b mp4 \u304b\u3089\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u884c\u3046(m3u8 \u3068 ts \u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b)\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\u307e\u305a\u306f\u3001ffmpeg \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001AAC, H264, MP4, MPEG-2 TS \u304c\u5229\u7528\u53ef\u80fd\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\nffmpeg \u3067\u5229\u7528\u3067\u304d\u308b format \u3068 codec \u3092\u78ba\u8a8d\u3059\u308b\n$ ffmpeg -formats \u3084 $ ffmpeg -codecs \u3067\u5229\u7528\u53ef\u80fd\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u30b3\u30fc\u30c7\u30c3\u30af\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\nffmpeg version 2.8.1 Copyright (c) 2000-2015 the FFmpeg developers\n  built with Apple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/2.8.1 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-opencl --enable-libx264 --enable-libmp3lame --enable-libvo-aacenc --enable-libxvid --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libfdk-aac --enable-libopenjpeg --disable-decoder=jpeg2000 --extra-cflags='-I/usr/local/Cellar/openjpeg/1.5.2_1/include/openjpeg-1.5 ' --enable-nonfree --enable-vda\n  libavutil      54. 31.100 / 54. 31.100\n  libavcodec     56. 60.100 / 56. 60.100\n  libavformat    56. 40.101 / 56. 40.101\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 40.101 /  5. 40.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.101 /  1.  2.101\n  libpostproc    53.  3.100 / 53.  3.100\nFile formats:\n D. = Demuxing supported\n .E = Muxing supported\n --\n D  aac             raw ADTS AAC (Advanced Audio Coding)\n DE h264            raw H.264 video\n  E mp4             MP4 (MPEG-4 Part 14)\n DE mpegts          MPEG-TS (MPEG-2 Transport Stream)\n\nffmpeg version 2.8.1 Copyright (c) 2000-2015 the FFmpeg developers\n  built with Apple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/2.8.1 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-opencl --enable-libx264 --enable-libmp3lame --enable-libvo-aacenc --enable-libxvid --enable-vda\n  libavutil      54. 31.100 / 54. 31.100\n  libavcodec     56. 60.100 / 56. 60.100\n  libavformat    56. 40.101 / 56. 40.101\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 40.101 /  5. 40.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.101 /  1.  2.101\n  libpostproc    53.  3.100 / 53.  3.100\nCodecs:\n D..... = Decoding supported\n .E.... = Encoding supported\n ..V... = Video codec\n ..A... = Audio codec\n ..S... = Subtitle codec\n ...I.. = Intra frame-only codec\n ....L. = Lossy compression\n .....S = Lossless compression\n -------\n DEV.LS h264                 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (decoders: h264 h264_vda ) (encoders: libx264 libx264rgb )\n DEA.L. aac                  AAC (Advanced Audio Coding) (decoders: aac aac_fixed ) (encoders: aac libvo_aacenc )\n\n\u5229\u7528\u3067\u304d\u306a\u3044\u30b3\u30f3\u30c6\u30ca\u3084\u30b3\u30fc\u30c7\u30c3\u30af\u304c\u3042\u308b\u5834\u5408\u306f\u3001ffmpeg \u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\nffmpeg \u3067 AAC \u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u5834\u5408\u306f brew uninstall ffmpeg \u306e\u5f8c\u306b\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n$ brew install ffmpeg --with-fdk-aac --with-libvo-aacenc\n\n\nffmpeg options\nffmpeg \u306e\u4ee3\u8868\u7684\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u3001\u7c21\u5358\u306b\u8aac\u660e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\nMAIN OPTIONS\n\n-i \u5165\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u6307\u5b9a\u3002URL\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059(-i http://domain:port/path/file.ext)\n\n\n\u8907\u6570\u6307\u5b9a\u304c\u53ef\u80fd\u3067\u3059 -i a.ext -i b.ext\n\n\u9023\u756a\u6307\u5b9a\u304c\u53ef\u80fd\u3067\u3059 -i \"test_0%01d.png\" \u3068\u3059\u308b\u3068 test_00.png \u301c test_09.png \u3092\u81ea\u52d5\u7684\u306b\u8aad\u307f\u8fbc\u307f\u307e\u3059(\u5b58\u5728\u3057\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u306f\u30a8\u30e9\u30fc\u306b\u306a\u3089\u305a\u7121\u8996\u3055\u308c\u307e\u3059)\n\n\n-f \u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u6307\u5b9a\u3067\u3059\n-y \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u540c\u540d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u5834\u5408\u306b\u4e0a\u66f8\u3057\u307e\u3059\n-fs \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u6700\u5927\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u5358\u4f4d\u306fbyte\u3067\u3059\n\u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3002printf \u306b\u4f3c\u305f\u66f8\u5f0f\u3067\u9023\u756a\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3059\u308b\u4e8b\u3082\u53ef\u80fd\u3067\u3059 (\u4f8b: media%03d.ts)\n\n\n\nVIDEO OPTIONS\n\n-b \u52d5\u753b\u90e8\u5206\u306e\u30d3\u30c3\u30c8\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u521d\u671f\u8a2d\u5b9a\u306f 200kbps \u3067\u3059\n-r \u30d5\u30ec\u30fc\u30e0\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u521d\u671f\u8a2d\u5b9a\u306f25\u3067\u3059\n-s \u52d5\u753b\u306e\u30b5\u30a4\u30ba\u3092 \u5e45x\u9ad8\u3055\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002(\u4f8b: 800x600)\n-aspect \u30a2\u30b9\u30da\u30af\u30c8\u6bd4\u3092\u6307\u5b9a\u3057\u307e\u3059\n-vn \u30d3\u30c7\u30aa\u3092\u30ab\u30c3\u30c8\u3057\u307e\u3059\u3002\u97f3\u58f0\u3060\u3051\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\n-vcodec \u30d3\u30c7\u30aa\u30b3\u30fc\u30c7\u30c3\u30af\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u30b3\u30fc\u30c7\u30c3\u30af\u306b\u306a\u308a\u307e\u3059\n-movflags faststart \u9332\u753b\u7d42\u4e86\u5f8c\u306b\u30e1\u30bf\u30c7\u30fc\u30bf\u3092mp4\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u90e8\u5206\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\u518d\u751f\u958b\u59cb\u307e\u3067\u306e\u6642\u9593\u304c\u77ed\u7e2e\u3055\u308c\u307e\u3059\n\n\n\nAUDIO OPTIONS\n\n-ar \u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5468\u6ce2\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\n-ac \u97f3\u58f0\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\n-an \u30aa\u30fc\u30c7\u30a3\u30aa\u3092\u30ab\u30c3\u30c8\u3057\u307e\u3059\u3002\u6620\u50cf\u3060\u3051\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\n-acodec \u97f3\u58f0\u30b3\u30fc\u30c7\u30c3\u30af\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u30b3\u30fc\u30c7\u30c3\u30af\u306b\u306a\u308a\u307e\u3059\n\n\n\nffmpeg \u3067\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u9806\u756a\u306b\u3088\u3063\u3066\u7d50\u679c\u304c\u7570\u306a\u308a\u307e\u3059\u3002\u6620\u50cf\u7cfb\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u97f3\u58f0\u7cfb\u3068\u6df7\u305c\u305a\u306b\u9023\u7d9a\u3067\u6307\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\u307e\u305f\u4e0a\u624b\u304f\u884c\u304b\u306a\u3044\u5834\u5408\u306f\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u9806\u756a\u3092\u5909\u3048\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\nHLS\u306e\u30b9\u30c8\u30ea\u30fc\u30e0 \u3092 mp4 \u306b\u4fdd\u5b58\u3059\u308b\n\u3055\u3066\u3084\u3063\u3068\u672c\u984c\u3067\u3059\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001HLS \u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u3092 mp4 \u306b\u76f4\u63a5\u4fdd\u5b58\u3067\u304d\u307e\u3059\u3002\n$ ffmpeg -i https://example.com/.../playlist.m3u8 -movflags faststart -c copy -bsf:a aac_adtstoasc rec.mp4\n\n\n\u6620\u50cf\u3068\u97f3\u58f0\u3092\u5206\u96e2\u3059\u308b\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3068\u3001input.mp4 \u306e\u6620\u50cf\u3068\u97f3\u58f0\u3092\u5225\u3005\u306e\u30d5\u30a1\u30a4\u30eb(audio.m4a, video.mp4)\u306b\u5206\u96e2\u3067\u304d\u307e\u3059\u3002\n$ ffmpeg -i input.mp4 -bsf:a aac_adtstoasc -vn -acodec copy audio.m4a\n\n$ ffmpeg -i input.mp4 -bsf:a aac_adtstoasc -vcodec copy -an video.mp4\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001stream/a001.ts \u304b\u3089 stream/a001.aac \u3092\u62bd\u51fa\u3067\u304d\u307e\u3059\u3002\n$ ffmpeg -i stream/a000.ts -acodec copy stream/a000.aac\n\n\nmp4 \u30d5\u30a1\u30a4\u30eb\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3059\u308b\ninput.mp4 \u3092 HLS \u3067\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u53ef\u80fd\u306a\u3088\u3046\u306b stream/playlist.m3u8 \u3068 stream/a{nnn}.ts \u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6539\u884c\u305b\u305a\u4e00\u884c\u3067\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n$ ffmpeg\n    -i input.mp4                  // input source\n    -vcodec libx264               // video codec    (H264)\n    -movflags faststart           // video fast decode(mov box moov to header)\n    -vprofile baseline -level 3.0 // video profile  (Baseline, Lv 3.0)\n    -g 150                        // ?\n    -b:v 519k                     // video bitrate  (519kbps)\n    -s 768x432                    // video size     (768 x 432 px)\n//  -acodec libfaac               // audio codec    (AAC)\n    -acodec libfdk_aac\n    -b:a 63.4k                    // audio bitrate  (63.4kbps)\n    -ar 44100                     // audio sampling rate (44.1kHz)\n    -flags +loop-global_header\n    -map 0\n    -bsf h264_mp4toannexb\n    -f segment\n    -segment_format mpegts\n    -segment_time 5               // ts duration\n    -segment_list stream/playlist.m3u8  // playlist filename \n    stream/v%03d.ts               // ts file name format\n\n\u4f8b.\n$ ffmpeg -i input.mp4 -vcodec libx264 -movflags faststart -vprofile baseline -level 3.0 -g 150 -b:v 519k -s 768x432 -acodec libfdk_aac -b:a 63.4k -ar 44100 -flags +loop-global_header -map 0 -bsf h264_mp4toannexb -f segment -segment_format mpegts -segment_time 5 -segment_list stream/playlist.m3u8 stream/a%03d.ts\n\n\nhls_time\n-segment_time n \u3067\u30a4\u30e1\u30fc\u30b8\u901a\u308a\u306e\u79d2\u6570\u3092\u6301\u3064ts\u3092\u4f5c\u6210\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001 -segment_time \u306e\u4ee3\u308f\u308a\u306b -hls_time \u3092\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n$ ffmpeg -i input.mp4 -vcodec libx264 -movflags faststart -vprofile baseline -level 3.0 -g 150 -b:v 519k -s 768x432 -acodec libfdk_aac -b:a 63.4k -ar 44100 -flags +loop-global_header -map 0 -bsf h264_mp4toannexb -f segment -segment_format mpegts -hls_time 5 -segment_list stream/playlist.m3u8 stream/a%03d.ts\n\n\n\u30d5\u30a1\u30a4\u30eb\u306e\u60c5\u5831\u3092\u898b\u308b\nffprobe \u30b3\u30de\u30f3\u30c9\u3067 mp4 \u30d5\u30a1\u30a4\u30eb\u306e\u60c5\u5831\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n(ffprobe \u30b3\u30de\u30f3\u30c9\u306f ffmpeg \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u4e00\u7dd2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059)\n$ ffprobe input.mp4\n\n> Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'input.mp4':\n>   Metadata:\n>     major_brand     : isom\n>     minor_version   : 512\n>     compatible_brands: isomiso2avc1mp41\n>     encoder         : Lavf56.40.101\n>   Duration: 00:02:02.81, start: 0.000000, bitrate: 591 kb/s\n>     Stream #0:0(und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 432x768, 519 kb/s, 26.89 fps, 90k tbr, 90k tbn, 180k tbc (default)\n>     Metadata:\n>       handler_name    : VideoHandler\n>     Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 63 kb/s (default)\n>     Metadata:\n>       handler_name    : SoundHandler\n\n\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\n-show_format Show information about the container format of the input multimedia stream.\n\n-show_packets Show information about each packet contained in the input multimedia stream.\n\n-show_frames Show information about each frame and subtitle contained in the input multimedia stream.\n\n-show_streams Show information about each media stream contained in the input multimedia stream.\n\n-show_programs Show information about programs and their streams contained in the input multimedia stream.\n\n-count_frames Count the number of frames per stream and report it in the corresponding stream section.\n\n-count_packets Count the number of packets per stream and report it in the corresponding stream section.\n\n-of json output to JSON format.\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u7c21\u5358\u306b\u30c1\u30a7\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u3001JSON \u3067\u51fa\u529b\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n$ ffprobe -of json -show_format  rec.mp4  >  a.format.json    # format \u60c5\u5831\u3092\u53d6\u5f97\n$ ffprobe -of json -show_packets rec.mp4  >  a.packet.json    # \u30d1\u30b1\u30c3\u30c8\u60c5\u5831\u3092\u53d6\u5f97\n$ ffprobe -of json -show_streams rec.mp4  >  a.stream.json    # \u6620\u50cf\u3068\u97f3\u58f0\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u60c5\u5831\u3092\u53d6\u5f97\n\nffprobe \u306e\u4ed6\u306b mediainfo \u30b3\u30de\u30f3\u30c9\u3067\u3082\u60c5\u5831\u3092\u307f\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n$ mediainfo input.mp4\n\n> General\n> Complete name                            : input.mp4\n> Format                                   : MPEG-4\n> Format profile                           : Base Media\n> Codec ID                                 : isom\n> File size                                : 8.66 MiB\n> Duration                                 : 2mn 2s\n> Overall bit rate mode                    : Variable\n> Overall bit rate                         : 591 Kbps\n> Encoded date                             : UTC 1904-01-01 00:00:00\n> Tagged date                              : UTC 1904-01-01 00:00:00\n> Writing application                      : Lavf56.40.101\n>\n> Video\n> ID                                       : 1\n> Format                                   : AVC\n> Format/Info                              : Advanced Video Codec\n> Format profile                           : Baseline@L3\n> Format settings, CABAC                   : No\n> Format settings, ReFrames                : 1 frame\n> Format settings, GOP                     : M=1, N=30\n> Codec ID                                 : avc1\n> Codec ID/Info                            : Advanced Video Coding\n> Duration                                 : 2mn 2s\n> Bit rate                                 : 519 Kbps\n> Width                                    : 432 pixels\n> Height                                   : 768 pixels\n> Display aspect ratio                     : 0.562\n> Frame rate mode                          : Variable\n> Frame rate                               : 26.889 fps\n> Minimum frame rate                       : 0.850 fps\n> Maximum frame rate                       : 90 000.000 fps\n> Color space                              : YUV\n> Chroma subsampling                       : 4:2:0\n> Bit depth                                : 8 bits\n> Scan type                                : Progressive\n> Bits/(Pixel*Frame)                       : 0.058\n> Stream size                              : 7.60 MiB (88%)\n> Encoded date                             : UTC 1904-01-01 00:00:00\n> Tagged date                              : UTC 1904-01-01 00:00:00\n>\n> Audio\n> ID                                       : 2\n> Format                                   : AAC\n> Format/Info                              : Advanced Audio Codec\n> Format profile                           : LC\n> Codec ID                                 : 40\n> Duration                                 : 2mn 2s\n> Bit rate mode                            : Variable\n> Bit rate                                 : 63.4 Kbps\n> Maximum bit rate                         : 65.1 Kbps\n> Channel(s)                               : 2 channels\n> Channel(s)_Original                      : 1 channel\n> Channel positions                        : Front: C\n> Sampling rate                            : 44.1 KHz\n> Compression mode                         : Lossy\n> Stream size                              : 950 KiB (11%)\n> Encoded date                             : UTC 1904-01-01 00:00:00\n> Tagged date                              : UTC 1904-01-01 00:00:00\n\nMP4\u306e\u30b3\u30f3\u30c6\u30ca\u69cb\u9020(box)\u3092\u30d3\u30b8\u30e5\u30a2\u30eb\u5316\u3059\u308b\u30c4\u30fc\u30eb\u3082\u3042\u308a\u307e\u3059\u3002\n\n\nMP4 Reader (Windows\u7248\u306e\u307f\u3001Mac\u306e\u65b9\u306f VirtualBox + modern.IE \u306a\u3069 \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5225\u9014\u5fc5\u8981\u306b\u306a\u308b\u3067\u3057\u3087\u3046)\n\n\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u30c4\u30fc\u30eb\u3082\u3042\u308a\u307e\u3059\u3002\n- MP4Box.js / ISOBMFF Box Structure Viewer\n\nMP4 Reader \u3068 MP4Box.js \u306e\u89e3\u6790\u7d50\u679c\u306e\u7d30\u90e8(stbl\u4ee5\u4e0b\u306ebox)\u304c\u7570\u306a\u308b\u5834\u5408\u304c\u898b\u3089\u308c\u307e\u3059\u3002\u53c2\u8003\u7a0b\u5ea6\u306b\u898b\u3066\u304a\u304f\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\u53c2\u8003\u306b\u306a\u3055\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n# \u8ffd\u8a18\n\n2016/02/16 \u306b ffmpeg version 3.0 \u304c[\u30ea\u30ea\u30fc\u30b9\u3055\u308c\u307e\u3057\u305f](https://osdn.jp/magazine/16/02/16/155500)\u3002\n\nver 3.0 \u3067\u306f libaacplus libvo-aacenc \u304c\u524a\u9664\u3055\u308c\u308b\u306a\u3069\u3001\u30b3\u30fc\u30c7\u30c3\u30af\u3068\u30b3\u30f3\u30c6\u30ca\u306e\u7d71\u5ec3\u5408\u304c\u884c\u308f\u308c\u305f\u3088\u3046\u3067\u3059\u3002\n\n\u3053\u306e\u30a8\u30f3\u30c8\u30ea\u306f ffmpeg version 2.x \u306b\u3064\u3044\u3066\u8a18\u8ff0\u3057\u3066\u3044\u308b\u305f\u3081\u3001\nver 3.x \u3067\u306f\u305d\u306e\u307e\u307e\u3067\u306f\u52d5\u304b\u306a\u3044\u90e8\u5206\u304c\u3042\u308b\u304b\u3082\u3057\u308c\u307e\u305b\u3093\u3002\u3054\u7559\u610f\u304f\u3060\u3055\u3044\u3002\n\n\u307e\u305f\u3001 libfdk_aac \u304c\u4f7f\u3048\u306a\u3044\u5834\u5408\u306f\u3001 libfaac \u3092\u4f7f\u7528\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n# \u672c\u6587\n\nffmpeg \u3092\u4f7f\u3044 HLS \u3092\u4f7f\u3063\u305f\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092 mp4 \u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u4fdd\u5b58\u3057\u305f\u308a\u3001\u305d\u306e\u53cd\u5bfe\u306b mp4 \u304b\u3089\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3092\u884c\u3046(m3u8 \u3068 ts \u30d5\u30a1\u30a4\u30eb\u3092\u751f\u6210\u3059\u308b)\u65b9\u6cd5\u306b\u3064\u3044\u3066\u8aac\u660e\u3057\u307e\u3059\u3002\n\n\n\u307e\u305a\u306f\u3001ffmpeg \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u308b\u5834\u5408\u306f\u3001AAC, H264, MP4, MPEG-2 TS \u304c\u5229\u7528\u53ef\u80fd\u304b\u3069\u3046\u304b\u3092\u78ba\u8a8d\u3057\u307e\u3059\u3002\n\n## ffmpeg \u3067\u5229\u7528\u3067\u304d\u308b format \u3068 codec \u3092\u78ba\u8a8d\u3059\u308b\n\n`$ ffmpeg -formats` \u3084 `$ ffmpeg -codecs` \u3067\u5229\u7528\u53ef\u80fd\u306a\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3068\u30b3\u30fc\u30c7\u30c3\u30af\u3092\u78ba\u8a8d\u3067\u304d\u307e\u3059\u3002\n\n```\nffmpeg version 2.8.1 Copyright (c) 2000-2015 the FFmpeg developers\n  built with Apple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/2.8.1 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-opencl --enable-libx264 --enable-libmp3lame --enable-libvo-aacenc --enable-libxvid --enable-libtheora --enable-libvorbis --enable-libvpx --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libfdk-aac --enable-libopenjpeg --disable-decoder=jpeg2000 --extra-cflags='-I/usr/local/Cellar/openjpeg/1.5.2_1/include/openjpeg-1.5 ' --enable-nonfree --enable-vda\n  libavutil      54. 31.100 / 54. 31.100\n  libavcodec     56. 60.100 / 56. 60.100\n  libavformat    56. 40.101 / 56. 40.101\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 40.101 /  5. 40.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.101 /  1.  2.101\n  libpostproc    53.  3.100 / 53.  3.100\nFile formats:\n D. = Demuxing supported\n .E = Muxing supported\n --\n D  aac             raw ADTS AAC (Advanced Audio Coding)\n DE h264            raw H.264 video\n  E mp4             MP4 (MPEG-4 Part 14)\n DE mpegts          MPEG-TS (MPEG-2 Transport Stream)\n```\n\n```\nffmpeg version 2.8.1 Copyright (c) 2000-2015 the FFmpeg developers\n  built with Apple LLVM version 6.0 (clang-600.0.57) (based on LLVM 3.5svn)\n  configuration: --prefix=/usr/local/Cellar/ffmpeg/2.8.1 --enable-shared --enable-pthreads --enable-gpl --enable-version3 --enable-hardcoded-tables --enable-avresample --cc=clang --host-cflags= --host-ldflags= --enable-opencl --enable-libx264 --enable-libmp3lame --enable-libvo-aacenc --enable-libxvid --enable-vda\n  libavutil      54. 31.100 / 54. 31.100\n  libavcodec     56. 60.100 / 56. 60.100\n  libavformat    56. 40.101 / 56. 40.101\n  libavdevice    56.  4.100 / 56.  4.100\n  libavfilter     5. 40.101 /  5. 40.101\n  libavresample   2.  1.  0 /  2.  1.  0\n  libswscale      3.  1.101 /  3.  1.101\n  libswresample   1.  2.101 /  1.  2.101\n  libpostproc    53.  3.100 / 53.  3.100\nCodecs:\n D..... = Decoding supported\n .E.... = Encoding supported\n ..V... = Video codec\n ..A... = Audio codec\n ..S... = Subtitle codec\n ...I.. = Intra frame-only codec\n ....L. = Lossy compression\n .....S = Lossless compression\n -------\n DEV.LS h264                 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (decoders: h264 h264_vda ) (encoders: libx264 libx264rgb )\n DEA.L. aac                  AAC (Advanced Audio Coding) (decoders: aac aac_fixed ) (encoders: aac libvo_aacenc )\n```\n\n\u5229\u7528\u3067\u304d\u306a\u3044\u30b3\u30f3\u30c6\u30ca\u3084\u30b3\u30fc\u30c7\u30c3\u30af\u304c\u3042\u308b\u5834\u5408\u306f\u3001ffmpeg \u3092\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\nffmpeg \u3067 AAC \u304c\u5229\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u4ed8\u3051\u3066\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u65e2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6e08\u307f\u306e\u5834\u5408\u306f `brew uninstall ffmpeg` \u306e\u5f8c\u306b\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u307e\u3059\u3002\n\n```sh\n$ brew install ffmpeg --with-fdk-aac --with-libvo-aacenc\n```\n\n## ffmpeg options\n\nffmpeg \u306e\u4ee3\u8868\u7684\u306a\u30aa\u30d7\u30b7\u30e7\u30f3\u306b\u3064\u3044\u3066\u3001\u7c21\u5358\u306b\u8aac\u660e\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n- MAIN OPTIONS\n    - -i \u5165\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u6307\u5b9a\u3002URL\u3082\u6307\u5b9a\u3067\u304d\u307e\u3059(`-i http://domain:port/path/file.ext`)\n        - \u8907\u6570\u6307\u5b9a\u304c\u53ef\u80fd\u3067\u3059 `-i a.ext -i b.ext`\n        - \u9023\u756a\u6307\u5b9a\u304c\u53ef\u80fd\u3067\u3059 `-i \"test_0%01d.png\"` \u3068\u3059\u308b\u3068 `test_00.png` \u301c `test_09.png` \u3092\u81ea\u52d5\u7684\u306b\u8aad\u307f\u8fbc\u307f\u307e\u3059(\u5b58\u5728\u3057\u306a\u3044\u30d5\u30a1\u30a4\u30eb\u306f\u30a8\u30e9\u30fc\u306b\u306a\u3089\u305a\u7121\u8996\u3055\u308c\u307e\u3059)\n    - -f \u51fa\u529b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u306e\u6307\u5b9a\u3067\u3059\n    - -y \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3068\u540c\u540d\u306e\u30d5\u30a1\u30a4\u30eb\u304c\u3042\u308b\u5834\u5408\u306b\u4e0a\u66f8\u3057\u307e\u3059\n    - -fs \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u306e\u6700\u5927\u30b5\u30a4\u30ba\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u5358\u4f4d\u306fbyte\u3067\u3059\n    - \u51fa\u529b\u30d5\u30a1\u30a4\u30eb\u540d\u3002printf \u306b\u4f3c\u305f\u66f8\u5f0f\u3067\u9023\u756a\u306e\u30d5\u30a1\u30a4\u30eb\u540d\u3092\u6307\u5b9a\u3059\u308b\u4e8b\u3082\u53ef\u80fd\u3067\u3059 (\u4f8b: media%03d.ts)\n\n- VIDEO OPTIONS\n    - -b \u52d5\u753b\u90e8\u5206\u306e\u30d3\u30c3\u30c8\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u521d\u671f\u8a2d\u5b9a\u306f 200kbps \u3067\u3059\n    - -r \u30d5\u30ec\u30fc\u30e0\u30ec\u30fc\u30c8\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u521d\u671f\u8a2d\u5b9a\u306f25\u3067\u3059\n    - -s \u52d5\u753b\u306e\u30b5\u30a4\u30ba\u3092 `\u5e45x\u9ad8\u3055`\u3067\u6307\u5b9a\u3057\u307e\u3059\u3002(\u4f8b: 800x600)\n    - -aspect \u30a2\u30b9\u30da\u30af\u30c8\u6bd4\u3092\u6307\u5b9a\u3057\u307e\u3059\n    - -vn \u30d3\u30c7\u30aa\u3092\u30ab\u30c3\u30c8\u3057\u307e\u3059\u3002\u97f3\u58f0\u3060\u3051\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\n    - -vcodec \u30d3\u30c7\u30aa\u30b3\u30fc\u30c7\u30c3\u30af\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u30b3\u30fc\u30c7\u30c3\u30af\u306b\u306a\u308a\u307e\u3059\n    - -movflags faststart \u9332\u753b\u7d42\u4e86\u5f8c\u306b\u30e1\u30bf\u30c7\u30fc\u30bf\u3092mp4\u30d5\u30a1\u30a4\u30eb\u306e\u5148\u982d\u90e8\u5206\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002\u518d\u751f\u958b\u59cb\u307e\u3067\u306e\u6642\u9593\u304c\u77ed\u7e2e\u3055\u308c\u307e\u3059\n\n- AUDIO OPTIONS\n    - -ar \u30b5\u30f3\u30d7\u30ea\u30f3\u30b0\u5468\u6ce2\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\n    - -ac \u97f3\u58f0\u306e\u30c1\u30e3\u30f3\u30cd\u30eb\u6570\u3092\u6307\u5b9a\u3057\u307e\u3059\n    - -an \u30aa\u30fc\u30c7\u30a3\u30aa\u3092\u30ab\u30c3\u30c8\u3057\u307e\u3059\u3002\u6620\u50cf\u3060\u3051\u3092\u53d6\u308a\u51fa\u3057\u307e\u3059\n    - -acodec \u97f3\u58f0\u30b3\u30fc\u30c7\u30c3\u30af\u3092\u6307\u5b9a\u3057\u307e\u3059\u3002\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306f\u5165\u529b\u30d5\u30a1\u30a4\u30eb\u3068\u540c\u3058\u30b3\u30fc\u30c7\u30c3\u30af\u306b\u306a\u308a\u307e\u3059\n\nffmpeg \u3067\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u9806\u756a\u306b\u3088\u3063\u3066\u7d50\u679c\u304c\u7570\u306a\u308a\u307e\u3059\u3002\u6620\u50cf\u7cfb\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u306f\u97f3\u58f0\u7cfb\u3068\u6df7\u305c\u305a\u306b\u9023\u7d9a\u3067\u6307\u5b9a\u3059\u308b\u3088\u3046\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002  \n\u307e\u305f\u4e0a\u624b\u304f\u884c\u304b\u306a\u3044\u5834\u5408\u306f\u3001\u30aa\u30d7\u30b7\u30e7\u30f3\u306e\u9806\u756a\u3092\u5909\u3048\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n## HLS\u306e\u30b9\u30c8\u30ea\u30fc\u30e0 \u3092 mp4 \u306b\u4fdd\u5b58\u3059\u308b\n\n\u3055\u3066\u3084\u3063\u3068\u672c\u984c\u3067\u3059\u3001\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001HLS \u306e\u30b9\u30c8\u30ea\u30fc\u30e0\u3092 mp4 \u306b\u76f4\u63a5\u4fdd\u5b58\u3067\u304d\u307e\u3059\u3002\n\n```sh\n$ ffmpeg -i https://example.com/.../playlist.m3u8 -movflags faststart -c copy -bsf:a aac_adtstoasc rec.mp4\n```\n\n<!--\n\u4ee5\u4e0b\u306f\u3001[Mirrativ](https://www.mirrativ.com/dashboard) \u306e\u30e9\u30a4\u30d6\u30b9\u30c8\u30ea\u30fc\u30e0\u3092 mp4 \u306b\u9332\u753b\u3059\u308b\u4f8b\u3067\u3059\u3002\n\n```sh\n$ ffmpeg -i https://wowza-edge0004.example.com:443/stream/xxx/playlist.m3u8 -movflags faststart -c copy -bsf:a aac_adtstoasc rec.mp4\n```\n\n-->\n\n## \u6620\u50cf\u3068\u97f3\u58f0\u3092\u5206\u96e2\u3059\u308b\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3046\u3068\u3001input.mp4 \u306e\u6620\u50cf\u3068\u97f3\u58f0\u3092\u5225\u3005\u306e\u30d5\u30a1\u30a4\u30eb(audio.m4a, video.mp4)\u306b\u5206\u96e2\u3067\u304d\u307e\u3059\u3002\n\n```sh\n$ ffmpeg -i input.mp4 -bsf:a aac_adtstoasc -vn -acodec copy audio.m4a\n```\n\n```sh\n$ ffmpeg -i input.mp4 -bsf:a aac_adtstoasc -vcodec copy -an video.mp4\n```\n\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3067\u3001stream/a001.ts \u304b\u3089 stream/a001.aac \u3092\u62bd\u51fa\u3067\u304d\u307e\u3059\u3002\n\n```sh\n$ ffmpeg -i stream/a000.ts -acodec copy stream/a000.aac\n```\n\n\n\n## mp4 \u30d5\u30a1\u30a4\u30eb\u3092\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u3059\u308b\n\ninput.mp4 \u3092 HLS \u3067\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u53ef\u80fd\u306a\u3088\u3046\u306b stream/playlist.m3u8 \u3068 stream/a{nnn}.ts \u3092\u751f\u6210\u3057\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30de\u30f3\u30c9\u3092\u6539\u884c\u305b\u305a\u4e00\u884c\u3067\u66f8\u3044\u3066\u304f\u3060\u3055\u3044\u3002\n\n```\n$ ffmpeg\n    -i input.mp4                  // input source\n    -vcodec libx264               // video codec    (H264)\n    -movflags faststart           // video fast decode(mov box moov to header)\n    -vprofile baseline -level 3.0 // video profile  (Baseline, Lv 3.0)\n    -g 150                        // ?\n    -b:v 519k                     // video bitrate  (519kbps)\n    -s 768x432                    // video size     (768 x 432 px)\n//  -acodec libfaac               // audio codec    (AAC)\n    -acodec libfdk_aac\n    -b:a 63.4k                    // audio bitrate  (63.4kbps)\n    -ar 44100                     // audio sampling rate (44.1kHz)\n    -flags +loop-global_header\n    -map 0\n    -bsf h264_mp4toannexb\n    -f segment\n    -segment_format mpegts\n    -segment_time 5               // ts duration\n    -segment_list stream/playlist.m3u8  // playlist filename \n    stream/v%03d.ts               // ts file name format\n```\n\n\u4f8b.\n\n```sh\n$ ffmpeg -i input.mp4 -vcodec libx264 -movflags faststart -vprofile baseline -level 3.0 -g 150 -b:v 519k -s 768x432 -acodec libfdk_aac -b:a 63.4k -ar 44100 -flags +loop-global_header -map 0 -bsf h264_mp4toannexb -f segment -segment_format mpegts -segment_time 5 -segment_list stream/playlist.m3u8 stream/a%03d.ts\n```\n\n## hls_time\n\n`-segment_time n` \u3067\u30a4\u30e1\u30fc\u30b8\u901a\u308a\u306e\u79d2\u6570\u3092\u6301\u3064ts\u3092\u4f5c\u6210\u3067\u304d\u306a\u3044\u5834\u5408\u306f\u3001 `-segment_time` \u306e\u4ee3\u308f\u308a\u306b [-hls_time](http://ffmpeg.org/ffmpeg-formats.html#hls-1) \u3092\u4f7f\u3063\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n```sh\n$ ffmpeg -i input.mp4 -vcodec libx264 -movflags faststart -vprofile baseline -level 3.0 -g 150 -b:v 519k -s 768x432 -acodec libfdk_aac -b:a 63.4k -ar 44100 -flags +loop-global_header -map 0 -bsf h264_mp4toannexb -f segment -segment_format mpegts -hls_time 5 -segment_list stream/playlist.m3u8 stream/a%03d.ts\n```\n\n\n### \u30d5\u30a1\u30a4\u30eb\u306e\u60c5\u5831\u3092\u898b\u308b\n\nffprobe \u30b3\u30de\u30f3\u30c9\u3067 mp4 \u30d5\u30a1\u30a4\u30eb\u306e\u60c5\u5831\u3092\u898b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n(ffprobe \u30b3\u30de\u30f3\u30c9\u306f ffmpeg \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3059\u308b\u3068\u4e00\u7dd2\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u307e\u3059)\n\n```sh\n$ ffprobe input.mp4\n\n> Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'input.mp4':\n>   Metadata:\n>     major_brand     : isom\n>     minor_version   : 512\n>     compatible_brands: isomiso2avc1mp41\n>     encoder         : Lavf56.40.101\n>   Duration: 00:02:02.81, start: 0.000000, bitrate: 591 kb/s\n>     Stream #0:0(und): Video: h264 (Baseline) (avc1 / 0x31637661), yuv420p, 432x768, 519 kb/s, 26.89 fps, 90k tbr, 90k tbn, 180k tbc (default)\n>     Metadata:\n>       handler_name    : VideoHandler\n>     Stream #0:1(und): Audio: aac (LC) (mp4a / 0x6134706D), 44100 Hz, mono, fltp, 63 kb/s (default)\n>     Metadata:\n>       handler_name    : SoundHandler\n```\n\n\u4ee5\u4e0b\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u3082\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n- `-show_format` Show information about the container format of the input multimedia stream.\n- `-show_packets` Show information about each packet contained in the input multimedia stream.\n- `-show_frames` Show information about each frame and subtitle contained in the input multimedia stream.\n- `-show_streams` Show information about each media stream contained in the input multimedia stream.\n- `-show_programs` Show information about programs and their streams contained in the input multimedia stream.\n- `-count_frames` Count the number of frames per stream and report it in the corresponding stream section.\n- `-count_packets` Count the number of packets per stream and report it in the corresponding stream section.\n- `-of json` output to JSON format.\n\n\u30d7\u30ed\u30b0\u30e9\u30e0\u304b\u3089\u7c21\u5358\u306b\u30c1\u30a7\u30c3\u30af\u3067\u304d\u308b\u3088\u3046\u306b\u3001JSON \u3067\u51fa\u529b\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002\n\n```sh\n$ ffprobe -of json -show_format  rec.mp4  >  a.format.json    # format \u60c5\u5831\u3092\u53d6\u5f97\n$ ffprobe -of json -show_packets rec.mp4  >  a.packet.json    # \u30d1\u30b1\u30c3\u30c8\u60c5\u5831\u3092\u53d6\u5f97\n$ ffprobe -of json -show_streams rec.mp4  >  a.stream.json    # \u6620\u50cf\u3068\u97f3\u58f0\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u60c5\u5831\u3092\u53d6\u5f97\n```\n\nffprobe \u306e\u4ed6\u306b [mediainfo](https://itunes.apple.com/app/mediainfo/id510620098) \u30b3\u30de\u30f3\u30c9\u3067\u3082\u60c5\u5831\u3092\u307f\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n```sh\n$ mediainfo input.mp4\n\n> General\n> Complete name                            : input.mp4\n> Format                                   : MPEG-4\n> Format profile                           : Base Media\n> Codec ID                                 : isom\n> File size                                : 8.66 MiB\n> Duration                                 : 2mn 2s\n> Overall bit rate mode                    : Variable\n> Overall bit rate                         : 591 Kbps\n> Encoded date                             : UTC 1904-01-01 00:00:00\n> Tagged date                              : UTC 1904-01-01 00:00:00\n> Writing application                      : Lavf56.40.101\n>\n> Video\n> ID                                       : 1\n> Format                                   : AVC\n> Format/Info                              : Advanced Video Codec\n> Format profile                           : Baseline@L3\n> Format settings, CABAC                   : No\n> Format settings, ReFrames                : 1 frame\n> Format settings, GOP                     : M=1, N=30\n> Codec ID                                 : avc1\n> Codec ID/Info                            : Advanced Video Coding\n> Duration                                 : 2mn 2s\n> Bit rate                                 : 519 Kbps\n> Width                                    : 432 pixels\n> Height                                   : 768 pixels\n> Display aspect ratio                     : 0.562\n> Frame rate mode                          : Variable\n> Frame rate                               : 26.889 fps\n> Minimum frame rate                       : 0.850 fps\n> Maximum frame rate                       : 90 000.000 fps\n> Color space                              : YUV\n> Chroma subsampling                       : 4:2:0\n> Bit depth                                : 8 bits\n> Scan type                                : Progressive\n> Bits/(Pixel*Frame)                       : 0.058\n> Stream size                              : 7.60 MiB (88%)\n> Encoded date                             : UTC 1904-01-01 00:00:00\n> Tagged date                              : UTC 1904-01-01 00:00:00\n>\n> Audio\n> ID                                       : 2\n> Format                                   : AAC\n> Format/Info                              : Advanced Audio Codec\n> Format profile                           : LC\n> Codec ID                                 : 40\n> Duration                                 : 2mn 2s\n> Bit rate mode                            : Variable\n> Bit rate                                 : 63.4 Kbps\n> Maximum bit rate                         : 65.1 Kbps\n> Channel(s)                               : 2 channels\n> Channel(s)_Original                      : 1 channel\n> Channel positions                        : Front: C\n> Sampling rate                            : 44.1 KHz\n> Compression mode                         : Lossy\n> Stream size                              : 950 KiB (11%)\n> Encoded date                             : UTC 1904-01-01 00:00:00\n> Tagged date                              : UTC 1904-01-01 00:00:00\n```\n\nMP4\u306e\u30b3\u30f3\u30c6\u30ca\u69cb\u9020(box)\u3092\u30d3\u30b8\u30e5\u30a2\u30eb\u5316\u3059\u308b\u30c4\u30fc\u30eb\u3082\u3042\u308a\u307e\u3059\u3002\n\n- [MP4 Reader](http://www.thinmultimedia.co.kr/products/MP4Reader.html) (Windows\u7248\u306e\u307f\u3001Mac\u306e\u65b9\u306f [VirtualBox](https://www.virtualbox.org/) + [modern.IE](https://dev.windows.com/en-us/microsoft-edge/tools/vms/mac/) \u306a\u3069 \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304c\u5225\u9014\u5fc5\u8981\u306b\u306a\u308b\u3067\u3057\u3087\u3046)\n\n![](https://gyazo.com/db8f3a5b806738f7187957c876924d2d.png)\n\n\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u52d5\u4f5c\u3059\u308b\u30c4\u30fc\u30eb\u3082\u3042\u308a\u307e\u3059\u3002\n- [MP4Box.js / ISOBMFF Box Structure Viewer](http://download.tsi.telecom-paristech.fr/gpac/mp4box.js/filereader.html)\n\n![](https://gyazo.com/1992b5e94ad3bf2c1dc724f828e54511.png)\n\nMP4 Reader \u3068 MP4Box.js \u306e\u89e3\u6790\u7d50\u679c\u306e\u7d30\u90e8(stbl\u4ee5\u4e0b\u306ebox)\u304c\u7570\u306a\u308b\u5834\u5408\u304c\u898b\u3089\u308c\u307e\u3059\u3002\u53c2\u8003\u7a0b\u5ea6\u306b\u898b\u3066\u304a\u304f\u3068\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\n\n\n\u53c2\u8003\u306b\u306a\u3055\u3063\u3066\u304f\u3060\u3055\u3044\u3002\n", "tags": ["ffmpeg", "HLS", "mp4"]}