{"tags": ["C#", "Xamarin"], "context": " More than 1 year has passed since last update.\n\nProblem\n\u30d5\u30a1\u30a4\u30eb\u30c0\u30a4\u30a2\u30ed\u30b0\u3082\u30b7\u30fc\u30c8\u3067\u51fa\u305b\u307e\u3059\u3002\n\u30b7\u30fc\u30c8\u3067\u51fa\u3059\u3053\u3068\u306b\u3088\u308a\uff0c\u3069\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u304b\u304c\u660e\u78ba\u306b\u306a\u308b\u306e\u3067\uff0c\u3067\u304d\u308c\u3070\u4f7f\u3063\u3066\u3044\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u30b7\u30fc\u30c8\u3092\u4e71\u767a\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u304b\uff0c\u305d\u3057\u3066\u3053\u308c\u3092\u9632\u3050\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3082\u672c\u7a3f\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\nPrerequisite\nXamarin.Mac \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\uff0cMainWindow.xib\u3092XCode\u3067\u958b\u3044\u3066\uff0c\u3053\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n\n\nNSOpenPanel\n\u3044\u308f\u3086\u308b\u30aa\u30fc\u30d7\u30f3\u30d5\u30a1\u30a4\u30eb\u30c0\u30a4\u30a2\u30ed\u30b0\u3067\u3059\u3002\n\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30d5\u30a9\u30eb\u30c0\u9078\u629e\u30c0\u30a4\u30a2\u30ed\u30b0\u306b\u4ed5\u7acb\u3066\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\nMainWindowController.cs\npublic override void WindowDidLoad()\n{\n    base.WindowDidLoad();\n\n    OpenButton.Activated += (sender, _) => ShowOpenPanel((NSObject)sender);\n}\n\n[Export(\"openDocument:\")]\nvoid ShowOpenPanel(NSObject sender)\n{\n    using(var panel = new NSOpenPanel()){\n        // \u8907\u6570\u9078\u629e\u306e\u53ef\u5426\n        panel.AllowsMultipleSelection = false;\n        // \u30d5\u30a1\u30a4\u30eb\u9078\u629e\u306e\u53ef\u5426\n        panel.CanChooseFiles = true;\n        // \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u9078\u629e\u306e\u53ef\u5426\n        panel.CanChooseDirectories = true;\n        // \u53d7\u3051\u5165\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u30bf\u30a4\u30d7\n        // \u62e1\u5f35\u5b50\u306e\u307f\uff0c\u30d4\u30ea\u30aa\u30c9\u306a\u3057\uff0c\u8907\u6570\u6307\u5b9a\u53ef\u80fd\n        panel.AllowedFileTypes = new[]{ \"txt\" };\n        // \u958b\u304f\u30dc\u30bf\u30f3\u306e\u30c6\u30ad\u30b9\u30c8\uff0c\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306fOS\u6a19\u6e96\n        panel.Prompt = \"\u958b\u304f\";\n        // \u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30bf\u30a4\u30c8\u30eb\n        panel.Title = \"\u30a6\u30a3\u30f3\u30c9\u30a6\u30bf\u30a4\u30c8\u30eb\";\n\n        // \u30e2\u30fc\u30c0\u30eb\u8868\u793a\n        var ret = panel.RunModal();\n\n        // \u30ad\u30e3\u30f3\u30bb\u30eb\u304c\u62bc\u3055\u308c\u305f\u5834\u5408 0 \u304c\u8fd4\u308b\n        if (ret > 0)\n            PathField.StringValue = panel.Url.Path;\n    }\n}\n\n\n\n\u5148\u982d\u306e[Export]\u306b\u3088\u308a\u30bb\u30ec\u30af\u30bf\u3092\u5ba3\u8a00\u3059\u308b\u3053\u3068\u3067\uff0c\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e\u300c\u958b\u304f\u300d\u306b\u95a2\u9023\u4ed8\u3051\u3066\u3044\u307e\u3059\u3002\nRunModal \u3057\u3066\u3044\u308b\u306e\u3067\u30e2\u30fc\u30c0\u30eb\u30c0\u30a4\u30a2\u30ed\u30b0\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u3092\u30b7\u30fc\u30c8\u306b\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nMainWindowController.cs\n[Export(\"openDocument:\")]\nvoid ShowOpenPanel(NSObject sender)\n{\n    var panel = new NSOpenPanel{ CanChooseFiles = true, AllowedFileTypes = new[]{ \"cs\" }, ReleasedWhenClosed = true };\n\n    panel.BeginSheet(Window, ret =>\n        {\n            panel.EndSheet(Window);\n            if (ret > 0)\n                PathField.StringValue = panel.Url.Path;\n        });\n}\n\n\nBeginSheet\u3068EndSheet\u306f\u5bfe\u5fdc\u3055\u305b\u306a\u304f\u3066\u306f\u306a\u308a\u307e\u305b\u3093\u3002\u307e\u305f\uff0cusing\u53e5\u3067\u304f\u304f\u308b\u3068\u7834\u68c4\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u3088\u308d\u3057\u304f\u306a\u3044\u306e\u3067\uff0c\u4ee3\u308f\u308a\u306bReleasedWhenClosed\u3092true\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n\nNSSavePanel\n\u4fdd\u5b58\u5148\u306e\u9078\u629e\u306b\u4f7f\u3044\u307e\u3059\u3002NSOpenPanel\u306f\u3053\u308c\u3092\u7d99\u627f\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u306f\u30b7\u30fc\u30c8\u3067\u8868\u793a\u3059\u308b\u5834\u5408\u3060\u3051\u3002\n\nMainWindowController.cs\n[Export(\"saveDocumentAs:\")]\nvoid ShowSavePanel(NSObject sender)\n{\n    var panel = new NSSavePanel();\n    // \u8a31\u5bb9\u3059\u308b\u62e1\u5f35\u5b50\n    panel.AllowedFileTypes = new[]{ \"cs\" };\n    // \u30d5\u30a9\u30eb\u30c0\u306e\u4f5c\u6210\u30dc\u30bf\u30f3\u3092\u8868\u793a\n    panel.CanCreateDirectories = true;\n    panel.ReleasedWhenClosed = true;\n    panel.Message = \"SavePanel\u3092\u901a\u3057\u3066\u4f1d\u3048\u305f\u3044\u3053\u3068\";\n\n    panel.BeginSheet(Window, ret =>\n        {\n            panel.EndSheet(Window);\n            if (ret > 0)\n                PathField.StringValue = panel.Url.Path;\n        });\n}\n\n\n\n\u5fc5\u8981\u3067\u3042\u308c\u3070AccessoryView\u3067\u4f55\u3067\u3082\u8ffd\u52a0\u53ef\u80fd\u3002\n\nMainWindowController.cs\nvar img = new NSImageView(new System.Drawing.RectangleF(0, 0, 64, 64))\n    { Image = NSImage.ImageNamed(NSImageName.QuickLookTemplate), ImageScaling = NSImageScale.ProportionallyUpOrDown };\npanel.AccessoryView = img;\n\n\n\n\nConclusion\nXamarin.Mac\u306b\u304a\u3051\u308b\u30b7\u30fc\u30c8\u3044\u308d\u3044\u308d\u306f\u3053\u308c\u3067\u5b8c\u7d50\u3067\u3059\u3002\n\u672c\u5f53\u306f\u30b7\u30fc\u30c8\u4e71\u767a\u6642\u306e\u5371\u967a\u306a\u52d5\u4f5c\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u3044\u3067\u3059\u304c\uff0c10.9\u4ee5\u964d\u306eAPI\u3092\u4f7f\u3046\u5834\u5408\u306f\u8d77\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\uff0c\u5927\u4e08\u592b\u3060\u3068\u4fe1\u3058\u3066\u5272\u611b\u3057\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u306e\u30b7\u30fc\u30c8\u3044\u308d\u3044\u308d\u307e\u3068\u3081\u306fUnified API\u3067\u3082\u307b\u307c\u540c\u3058\u30b3\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002\n##Problem\n\u30d5\u30a1\u30a4\u30eb\u30c0\u30a4\u30a2\u30ed\u30b0\u3082\u30b7\u30fc\u30c8\u3067\u51fa\u305b\u307e\u3059\u3002\n\u30b7\u30fc\u30c8\u3067\u51fa\u3059\u3053\u3068\u306b\u3088\u308a\uff0c\u3069\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c0\u30a4\u30a2\u30ed\u30b0\u304b\u304c\u660e\u78ba\u306b\u306a\u308b\u306e\u3067\uff0c\u3067\u304d\u308c\u3070\u4f7f\u3063\u3066\u3044\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u30b7\u30fc\u30c8\u3092\u4e71\u767a\u3059\u308b\u3068\u3069\u3046\u306a\u308b\u304b\uff0c\u305d\u3057\u3066\u3053\u308c\u3092\u9632\u3050\u65b9\u6cd5\u306b\u3064\u3044\u3066\u3082\u672c\u7a3f\u3067\u3054\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n##Prerequisite\nXamarin.Mac \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092\u4f5c\u6210\u3057\uff0cMainWindow.xib\u3092XCode\u3067\u958b\u3044\u3066\uff0c\u3053\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u3057\u3066\u3042\u308a\u307e\u3059\u3002\n![XCode\u4e0a\u306eUI\u30c7\u30b6\u30a4\u30f3](https://qiita-image-store.s3.amazonaws.com/0/34563/71dc9108-1c22-a6d6-b6d6-1716bd12e068.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-26 13.44.24.png\")\n\n\n##NSOpenPanel\n\u3044\u308f\u3086\u308b\u30aa\u30fc\u30d7\u30f3\u30d5\u30a1\u30a4\u30eb\u30c0\u30a4\u30a2\u30ed\u30b0\u3067\u3059\u3002\n\u30aa\u30d7\u30b7\u30e7\u30f3\u3092\u6307\u5b9a\u3059\u308b\u3053\u3068\u3067\u30d5\u30a9\u30eb\u30c0\u9078\u629e\u30c0\u30a4\u30a2\u30ed\u30b0\u306b\u4ed5\u7acb\u3066\u308b\u3053\u3068\u3082\u53ef\u80fd\u3067\u3059\u3002\n\n```csharp:MainWindowController.cs\npublic override void WindowDidLoad()\n{\n\tbase.WindowDidLoad();\n\n\tOpenButton.Activated += (sender, _) => ShowOpenPanel((NSObject)sender);\n}\n\n[Export(\"openDocument:\")]\nvoid ShowOpenPanel(NSObject sender)\n{\n\tusing(var panel = new NSOpenPanel()){\n\t\t// \u8907\u6570\u9078\u629e\u306e\u53ef\u5426\n\t\tpanel.AllowsMultipleSelection = false;\n\t\t// \u30d5\u30a1\u30a4\u30eb\u9078\u629e\u306e\u53ef\u5426\n\t\tpanel.CanChooseFiles = true;\n\t\t// \u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u9078\u629e\u306e\u53ef\u5426\n\t\tpanel.CanChooseDirectories = true;\n\t\t// \u53d7\u3051\u5165\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u30bf\u30a4\u30d7\n\t\t// \u62e1\u5f35\u5b50\u306e\u307f\uff0c\u30d4\u30ea\u30aa\u30c9\u306a\u3057\uff0c\u8907\u6570\u6307\u5b9a\u53ef\u80fd\n\t\tpanel.AllowedFileTypes = new[]{ \"txt\" };\n\t\t// \u958b\u304f\u30dc\u30bf\u30f3\u306e\u30c6\u30ad\u30b9\u30c8\uff0c\u6307\u5b9a\u3057\u306a\u3044\u5834\u5408\u306fOS\u6a19\u6e96\n\t\tpanel.Prompt = \"\u958b\u304f\";\n\t\t// \u30e2\u30fc\u30c0\u30eb\u30a6\u30a3\u30f3\u30c9\u30a6\u306e\u30bf\u30a4\u30c8\u30eb\n\t\tpanel.Title = \"\u30a6\u30a3\u30f3\u30c9\u30a6\u30bf\u30a4\u30c8\u30eb\";\n\t\t\n\t\t// \u30e2\u30fc\u30c0\u30eb\u8868\u793a\n\t\tvar ret = panel.RunModal();\n\t\t\n\t\t// \u30ad\u30e3\u30f3\u30bb\u30eb\u304c\u62bc\u3055\u308c\u305f\u5834\u5408 0 \u304c\u8fd4\u308b\n\t\tif (ret > 0)\n\t\t\tPathField.StringValue = panel.Url.Path;\n\t}\n}\n```\n![\u30e2\u30fc\u30c0\u30eb\u3068\u3057\u3066\u8868\u793a](https://qiita-image-store.s3.amazonaws.com/0/34563/6aed05ef-49e1-dd0b-76ac-fb54dab139c6.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-26 13.50.08.png\")\n\n\u5148\u982d\u306e`[Export]`\u306b\u3088\u308a\u30bb\u30ec\u30af\u30bf\u3092\u5ba3\u8a00\u3059\u308b\u3053\u3068\u3067\uff0c\u30e1\u30cb\u30e5\u30fc\u30d0\u30fc\u306e\u300c\u958b\u304f\u300d\u306b\u95a2\u9023\u4ed8\u3051\u3066\u3044\u307e\u3059\u3002\n`RunModal` \u3057\u3066\u3044\u308b\u306e\u3067\u30e2\u30fc\u30c0\u30eb\u30c0\u30a4\u30a2\u30ed\u30b0\u3068\u3057\u3066\u8868\u793a\u3055\u308c\u307e\u3059\u3002\n\u3053\u308c\u3092\u30b7\u30fc\u30c8\u306b\u3059\u308b\u5834\u5408\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n```csharp:MainWindowController.cs\n[Export(\"openDocument:\")]\nvoid ShowOpenPanel(NSObject sender)\n{\n\tvar panel = new NSOpenPanel{ CanChooseFiles = true, AllowedFileTypes = new[]{ \"cs\" }, ReleasedWhenClosed = true };\n\n\tpanel.BeginSheet(Window, ret =>\n\t\t{\n\t\t\tpanel.EndSheet(Window);\n\t\t\tif (ret > 0)\n\t\t\t\tPathField.StringValue = panel.Url.Path;\n\t\t});\n}\n```\n\n`BeginSheet`\u3068`EndSheet`\u306f\u5bfe\u5fdc\u3055\u305b\u306a\u304f\u3066\u306f\u306a\u308a\u307e\u305b\u3093\u3002\u307e\u305f\uff0c`using`\u53e5\u3067\u304f\u304f\u308b\u3068\u7834\u68c4\u30bf\u30a4\u30df\u30f3\u30b0\u304c\u3088\u308d\u3057\u304f\u306a\u3044\u306e\u3067\uff0c\u4ee3\u308f\u308a\u306b`ReleasedWhenClosed`\u3092`true`\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n![ShowAsSheet](https://qiita-image-store.s3.amazonaws.com/0/34563/d5af6d57-bc18-255a-a9c8-505ba21c699b.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-26 13.58.06.png\")\n\n##NSSavePanel\n\u4fdd\u5b58\u5148\u306e\u9078\u629e\u306b\u4f7f\u3044\u307e\u3059\u3002NSOpenPanel\u306f\u3053\u308c\u3092\u7d99\u627f\u3057\u3066\u3044\u307e\u3059\u3002\u3053\u3061\u3089\u306f\u30b7\u30fc\u30c8\u3067\u8868\u793a\u3059\u308b\u5834\u5408\u3060\u3051\u3002\n\n```csharp:MainWindowController.cs\n[Export(\"saveDocumentAs:\")]\nvoid ShowSavePanel(NSObject sender)\n{\n\tvar panel = new NSSavePanel();\n\t// \u8a31\u5bb9\u3059\u308b\u62e1\u5f35\u5b50\n\tpanel.AllowedFileTypes = new[]{ \"cs\" };\n\t// \u30d5\u30a9\u30eb\u30c0\u306e\u4f5c\u6210\u30dc\u30bf\u30f3\u3092\u8868\u793a\n\tpanel.CanCreateDirectories = true;\n\tpanel.ReleasedWhenClosed = true;\n\tpanel.Message = \"SavePanel\u3092\u901a\u3057\u3066\u4f1d\u3048\u305f\u3044\u3053\u3068\";\n\n\tpanel.BeginSheet(Window, ret =>\n\t\t{\n\t\t\tpanel.EndSheet(Window);\n\t\t\tif (ret > 0)\n\t\t\t\tPathField.StringValue = panel.Url.Path;\n\t\t});\n}\n```\n![NSSavePanel](https://qiita-image-store.s3.amazonaws.com/0/34563/6185bf0a-af3b-1dbc-7cf0-120204ed21d2.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-26 14.14.59.png\")\n\n\u5fc5\u8981\u3067\u3042\u308c\u3070`AccessoryView`\u3067\u4f55\u3067\u3082\u8ffd\u52a0\u53ef\u80fd\u3002\n\n```csharp:MainWindowController.cs\nvar img = new NSImageView(new System.Drawing.RectangleF(0, 0, 64, 64))\n\t{ Image = NSImage.ImageNamed(NSImageName.QuickLookTemplate), ImageScaling = NSImageScale.ProportionallyUpOrDown };\npanel.AccessoryView = img;\n```\n\n![accview](https://qiita-image-store.s3.amazonaws.com/0/34563/748fd037-d070-2836-d41b-cd2a2cdb8abb.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-12-26 14.23.19.png\")\n\n##Conclusion\nXamarin.Mac\u306b\u304a\u3051\u308b\u30b7\u30fc\u30c8\u3044\u308d\u3044\u308d\u306f\u3053\u308c\u3067\u5b8c\u7d50\u3067\u3059\u3002\n\u672c\u5f53\u306f\u30b7\u30fc\u30c8\u4e71\u767a\u6642\u306e\u5371\u967a\u306a\u52d5\u4f5c\u306b\u3064\u3044\u3066\u307e\u3068\u3081\u305f\u3044\u3067\u3059\u304c\uff0c10.9\u4ee5\u964d\u306eAPI\u3092\u4f7f\u3046\u5834\u5408\u306f\u8d77\u304d\u306a\u3044\u3088\u3046\u306a\u306e\u3067\uff0c\u5927\u4e08\u592b\u3060\u3068\u4fe1\u3058\u3066\u5272\u611b\u3057\u307e\u3059\u3002\n\u3053\u3053\u307e\u3067\u306e\u30b7\u30fc\u30c8\u3044\u308d\u3044\u308d\u307e\u3068\u3081\u306fUnified API\u3067\u3082\u307b\u307c\u540c\u3058\u30b3\u30fc\u30c9\u3067\u52d5\u4f5c\u3057\u307e\u3059\u3002\n"}