{"context": "\n\n\u3084\u308a\u305f\u3044\u3053\u3068\npriv/static\u4ee5\u4e0b\u306e\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3092mix\u306e\u30bf\u30b9\u30af\u304b\u3089S3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3001CloudFront\u304b\u3089\u30a2\u30bb\u30c3\u30c8\u3092\u914d\u4fe1\u3057\u305f\u3044\n\n\u3084\u3063\u305f\u3053\u3068\nPHP\u3067Laravel\u5411\u3051\u306bvinelab/cdn\u3068\u3044\u3046\u30a2\u30bb\u30c3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u306e\u3060\u3051\u3069Elixir\u306b\u4f3c\u305f\u3088\u3046\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u30dd\u30fc\u30c8\u3057\u305f\u306e\u3092\u4f5c\u3063\u3066S3 + CloudFront\u3067\u914d\u4fe1\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u305f\ncdn | Hex (GitHub)\n\nInstallation\n\nmix.exs\u306b\u4f9d\u5b58\u3092\u8ffd\u52a0\n\n{:cdn, \"~> 0.0.4\"}\n\n\n\u4f9d\u5b58\u66f4\u65b0\n\nmix deps.get\n\n\nconfig\u3092\u8ffd\u52a0\n\nconfig/config.exs\nconfig :cdn,  include: [\n                directories: [\"priv/static\"],\n                patterns: [\"**/*\"],\n                hidden: true\n              ],\n              exclude: [\n                directories: [],\n                patterns: [],\n                hidden: true\n              ],\n              acl: :public_read,\n              bypass: true,\n              cache_control: \"max-age=#{86400 * 30}\",\n              expires_after: 86400 * 30\n\n\n\n\n\u9805\u76ee\n\u8aac\u660e\n\n\n\n\ninclude\n\ndirectories: \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5bfe\u8c61\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30eapatterns: Glob pattern\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5bfe\u8c61\u306e\u7d5e\u8fbc\u3002\u8907\u6570\u6307\u5b9a\u53ef\u3002hidden: \u96a0\u3057\u30d5\u30a1\u30a4\u30eb\u3092\u542b\u3081\u308b\u304b\u3069\u3046\u304b\u3092true, false\u3067\u6307\u5b9a\n\n\nexclude\n\u9664\u5916\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3002include\u3068\u540c\u3058\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u30d1\u30bf\u30fc\u30f3\u3092\u6307\u5b9a\u3002\n\n\nacl\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6a29\u9650\u3002\u30a2\u30bb\u30c3\u30c8\u3068\u3057\u3066\u516c\u958b\u3055\u308c\u308b\u306e\u3067\u901a\u5e38\u306fpublic_read\u306b\u3059\u308b\u3002\n\n\ncache_control\n\nCache-Control\u30d8\u30c3\u30c0\u306b\u6307\u5b9a\u3059\u308b\u5024\n\n\nexpires_after\n\nExpires\u30d8\u30c3\u30c0\u306b\u6307\u5b9a\u3059\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u671f\u9650\u5207\u308c\u307e\u3067\u306e\u79d2\u6570\n\n\n\nconfig/dev.exs\nconfig :cdn, bucket: \"foobar.assets\",\n             cloudfront_url: \"https://foobar.cloudfront.net\",\n             bypass: true\n\n\n\n\n\u9805\u76ee\n\u8aac\u660e\n\n\n\n\nbucket\n\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5bfe\u8c61\u306eS3\u30d0\u30b1\u30c3\u30c8\n\n\ncloudfront_url\nS3\u3068\u7d10\u4ed8\u3051\u3089\u308c\u3066\u3044\u308bCloudFront\u306eURL\n\n\nbypass\n\ntrue\u306e\u5834\u5408\u30d3\u30e5\u30fc\u7528\u306e\u30d8\u30eb\u30d1\u30fc\u3067URL\u3092\u88dc\u5b8c\u3057\u306a\u3044\u3002e.g. cdn(\"/css/app.css\") => \"/css/app.css\"\n\n\n\n\nconfig/prod.exs\nconfig :cdn,  bucket: System.get_env(\"ASSET_BUCKET\") || \"foobar.production.assets\",\n              cloudfront_url: System.get_env(\"ASSET_HOST\") || \"https://foobar.cloudfront.net\",\n              bypass: false\n\n\n\n\n\u9805\u76ee\n\u8aac\u660e\n\n\n\n\nbypass\n\nfalse\u306e\u5834\u5408\u30d3\u30e5\u30fc\u7528\u30d8\u30eb\u30d1\u30fc\u3067URL\u3092\u88dc\u5b8c\u3059\u308b\u3002e.g. cdn(\"/css/app.css\") => \"https://foobar.cloudfront.net/css/app.css\"\n\n\n\n\n\nAWS\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3092\u74b0\u5883\u5909\u6570\u306b\u30bb\u30c3\u30c8\n\nexport AWS_ACCESS_KEY_ID=foo\nexport AWS_SECRET_ACCESS_KEY=bar\n\n\nUsage\n\n\u30a2\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\nmix cdn.push\n\n\n\u524a\u9664\n\nmix cdn.empty\n\n\n\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\n\nweb/web.ex\ndef view do\n\uff5e\u4e2d\u7565\uff5e\n  # \u8ffd\u52a0\n  import Cdn.Helpers\n\nend\n\napp.html.eex\n<script src=\"<%= cdn static_path(@conn, \"/js/vendor.js\") %>\"></script>\n\n# bypass=true\u306e\u5834\u5408\n#=> \"<script src=\"/js/vendor.js\"></script>\"\n\n# bypass=false\u306e\u5834\u5408\n#=> \"<script src=\"https://foobar.cloudfront.net/js/vendor.js\"></script>\"\n\n\n\u307e\u3068\u3081\n\nPhoenix\u3067S3 + CloudFront\u3067\u30a2\u30bb\u30c3\u30c8\u3092\u914d\u4fe1\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u305f\nElixir\u5185\u3067\u5b8c\u7d50\u3059\u308b\u306e\u3067\u4ed6\u306e\u30c4\u30fc\u30eb\u4f7f\u3044\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u3044\u3044\u304b\u3082\n\u4eca\u6c17\u3065\u3044\u305f\u3051\u3069asset_sync\u3063\u3066\u4f3c\u305f\u3088\u3046\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u65e2\u306b\u3042\u308a\u307e\u3059\u306d\uff08\u9045\uff09\n\n\n## \u3084\u308a\u305f\u3044\u3053\u3068\n\n`priv/static`\u4ee5\u4e0b\u306e\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u3092`mix`\u306e\u30bf\u30b9\u30af\u304b\u3089S3\u306b\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u3001CloudFront\u304b\u3089\u30a2\u30bb\u30c3\u30c8\u3092\u914d\u4fe1\u3057\u305f\u3044\n\n## \u3084\u3063\u305f\u3053\u3068\n\nPHP\u3067Laravel\u5411\u3051\u306b[`vinelab/cdn`](https://github.com/Vinelab/cdn)\u3068\u3044\u3046\u30a2\u30bb\u30c3\u30c8\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u3042\u308b\u306e\u3060\u3051\u3069Elixir\u306b\u4f3c\u305f\u3088\u3046\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u30dd\u30fc\u30c8\u3057\u305f\u306e\u3092[\u4f5c\u3063\u3066](https://github.com/shufo/cdn)S3 + CloudFront\u3067\u914d\u4fe1\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u305f\n\n[cdn | Hex](https://hex.pm/packages/cdn/) ([GitHub](https://github.com/shufo/cdn))\n\n## Installation\n\n- mix.exs\u306b\u4f9d\u5b58\u3092\u8ffd\u52a0\n\n```elixir\n{:cdn, \"~> 0.0.4\"}\n```\n\n- \u4f9d\u5b58\u66f4\u65b0\n\n```elixir\nmix deps.get\n```\n\n- config\u3092\u8ffd\u52a0\n\n`config/config.exs`\n\n```elixir\nconfig :cdn,  include: [\n                directories: [\"priv/static\"],\n                patterns: [\"**/*\"],\n                hidden: true\n              ],\n              exclude: [\n                directories: [],\n                patterns: [],\n                hidden: true\n              ],\n              acl: :public_read,\n              bypass: true,\n              cache_control: \"max-age=#{86400 * 30}\",\n              expires_after: 86400 * 30\n```\n\n|\u9805\u76ee|\u8aac\u660e|\n|--:|:--|\n|`include`|`directories`: \u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5bfe\u8c61\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea<br>`patterns`: Glob pattern\u3067\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5bfe\u8c61\u306e\u7d5e\u8fbc\u3002\u8907\u6570\u6307\u5b9a\u53ef\u3002<br>`hidden`: \u96a0\u3057\u30d5\u30a1\u30a4\u30eb\u3092\u542b\u3081\u308b\u304b\u3069\u3046\u304b\u3092true, false\u3067\u6307\u5b9a|\n|`exclude`|\u9664\u5916\u5bfe\u8c61\u306e\u30d5\u30a1\u30a4\u30eb\u3002`include`\u3068\u540c\u3058\u3088\u3046\u306b\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3068\u30d1\u30bf\u30fc\u30f3\u3092\u6307\u5b9a\u3002|\n|`acl`|\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u3057\u305f\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u306e\u6a29\u9650\u3002\u30a2\u30bb\u30c3\u30c8\u3068\u3057\u3066\u516c\u958b\u3055\u308c\u308b\u306e\u3067\u901a\u5e38\u306f`public_read`\u306b\u3059\u308b\u3002|\n|`cache_control`|`Cache-Control`\u30d8\u30c3\u30c0\u306b\u6307\u5b9a\u3059\u308b\u5024|\n|`expires_after`|`Expires`\u30d8\u30c3\u30c0\u306b\u6307\u5b9a\u3059\u308b\u30ad\u30e3\u30c3\u30b7\u30e5\u671f\u9650\u5207\u308c\u307e\u3067\u306e\u79d2\u6570|\n\n`config/dev.exs`\n\n```elixir\nconfig :cdn, bucket: \"foobar.assets\",\n             cloudfront_url: \"https://foobar.cloudfront.net\",\n             bypass: true\n```\n\n\n|\u9805\u76ee|\u8aac\u660e|\n|--:|:--|\n|`bucket`|\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u5bfe\u8c61\u306eS3\u30d0\u30b1\u30c3\u30c8|\n|`cloudfront_url`|S3\u3068\u7d10\u4ed8\u3051\u3089\u308c\u3066\u3044\u308bCloudFront\u306eURL|\n|`bypass`|`true`\u306e\u5834\u5408\u30d3\u30e5\u30fc\u7528\u306e\u30d8\u30eb\u30d1\u30fc\u3067URL\u3092\u88dc\u5b8c\u3057\u306a\u3044\u3002<br>e.g. `cdn(\"/css/app.css\") => \"/css/app.css\"`|\n\n`config/prod.exs`\n\n```elixir\nconfig :cdn,  bucket: System.get_env(\"ASSET_BUCKET\") || \"foobar.production.assets\",\n              cloudfront_url: System.get_env(\"ASSET_HOST\") || \"https://foobar.cloudfront.net\",\n              bypass: false\n```\n\n|\u9805\u76ee|\u8aac\u660e|\n|--:|:--|\n|`bypass`|`false`\u306e\u5834\u5408\u30d3\u30e5\u30fc\u7528\u30d8\u30eb\u30d1\u30fc\u3067URL\u3092\u88dc\u5b8c\u3059\u308b\u3002<br>e.g. `cdn(\"/css/app.css\") => \"https://foobar.cloudfront.net/css/app.css\"`|\n\n- AWS\u306e\u30a2\u30af\u30bb\u30b9\u30ad\u30fc\u3092\u74b0\u5883\u5909\u6570\u306b\u30bb\u30c3\u30c8\n\n```elixir\nexport AWS_ACCESS_KEY_ID=foo\nexport AWS_SECRET_ACCESS_KEY=bar\n```\n\n## Usage\n\n- \u30a2\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\n\n`mix cdn.push`\n\n![](https://raw.githubusercontent.com/wiki/shufo/cdn/img/upload.gif)\n\n- \u524a\u9664\n\n`mix cdn.empty`\n\n![image](https://qiita-image-store.s3.amazonaws.com/0/47983/105db105-df4c-dddf-3a6c-dea012a68eac.png)\n\n- \u30c6\u30f3\u30d7\u30ec\u30fc\u30c8\u3067\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\n\n`web/web.ex`\n\n```elixir\ndef view do\n\uff5e\u4e2d\u7565\uff5e\n  # \u8ffd\u52a0\n  import Cdn.Helpers\n\nend\n```\n\n`app.html.eex`\n\n```elixir\n<script src=\"<%= cdn static_path(@conn, \"/js/vendor.js\") %>\"></script>\n\n# bypass=true\u306e\u5834\u5408\n#=> \"<script src=\"/js/vendor.js\"></script>\"\n\n# bypass=false\u306e\u5834\u5408\n#=> \"<script src=\"https://foobar.cloudfront.net/js/vendor.js\"></script>\"\n```\n\n## \u307e\u3068\u3081\n\n- Phoenix\u3067S3 + CloudFront\u3067\u30a2\u30bb\u30c3\u30c8\u3092\u914d\u4fe1\u51fa\u6765\u308b\u3088\u3046\u306b\u3057\u305f\n- Elixir\u5185\u3067\u5b8c\u7d50\u3059\u308b\u306e\u3067\u4ed6\u306e\u30c4\u30fc\u30eb\u4f7f\u3044\u305f\u304f\u306a\u3044\u5834\u5408\u306f\u3044\u3044\u304b\u3082\n- \u4eca\u6c17\u3065\u3044\u305f\u3051\u3069[asset_sync](https://github.com/ohr486/asset_sync)\u3063\u3066\u4f3c\u305f\u3088\u3046\u306a\u30e9\u30a4\u30d6\u30e9\u30ea\u304c\u65e2\u306b\u3042\u308a\u307e\u3059\u306d\uff08\u9045\uff09\n", "tags": ["Elixir", "Phoenix"]}