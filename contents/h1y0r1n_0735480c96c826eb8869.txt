{"context": " More than 1 year has passed since last update.\n\n\u306f\u3058\u3081\u306b\n\u3000SendGrid\u306e\u30e1\u30fc\u30eb\u30b5\u30fc\u30d3\u30b9\u3092\u89e6\u3063\u3066\u307f\u305f\u3002\n\u3000\u4eca\u56de\u306f\u3001SendGrid\u306eSMTP\u30ea\u30af\u30a8\u30b9\u30c8\u3068SendGrid EventWebhook\u3092\u4f7f\u3044AWS\u5074\u3067\u53d7\u3051\u53d6\u308b\u3068\u3053\u308d\u307e\u3067\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\uff08\u307b\u3093\u3068\u306f\u5206\u6790\u3088\u3046\u306bKibana\u307e\u3067\u884c\u304d\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u305d\u308c\u306f\u5225\u3067\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059(*^_^*)\n\nSendGrid\u3068\u306f\n\u3000SendGrid\u306f\u6708\u9593200\u5104\u901a\u3092\u8d85\u3048\u308b\u30e1\u30fc\u30eb\u914d\u4fe1\u3092\u884c\u3044\u3001\u4e16\u754c\u306e\u30e1\u30fc\u30eb\u696d\u754c\u3092\u652f\u3048\u3066\u3044\u307e\u3059\u3002\n\u3000\u305f\u3060\u5927\u91cf\u306e\u914d\u4fe1\u3092\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u914d\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u306e\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u6a5f\u80fd\u3082\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n  \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30e1\u30fc\u30eb\u306a\u3093\u304b\u3082\u9001\u308c\u308b\u306e\u3067\u3001\u5229\u7528\u306e\u5e45\u306f\u5e83\u3044\u3067\u3059\u306d\u3002\n\u3000\n\n\u30d5\u30ed\u30fc\n\n\n\u5b9f\u88c5\n\nSendGrid SMTP API\u3092\u4f7f\u3063\u305f\u30ea\u30af\u30a8\u30b9\u30c8\nSMTP API\u3067\u306fX-SMTPAPI\u30d8\u30c3\u30c0\u3092\u5229\u7528\u3057\u3066\u30e1\u30fc\u30eb\u306e\u30ab\u30b9\u30bf\u30e0\u51e6\u7406\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\ncomposer.json\n{\n    \"minimum-stability\" : \"dev\",\n    \"require\": {\n        \"sendgrid/smtpapi\": \"~0.5\",\n        \"swiftmailer/swiftmailer\": \"@stable\"\n    }\n}\n\n\n\nsendMail.php\n<?php\ndate_default_timezone_set('Asia/Tokyo');\n\nrequire_once dirname( __FILE__ ).\"/lib/vendor/autoload.php\";\nuse Smtpapi\\Header;\n// \u30ab\u30b9\u30bf\u30e0\u30d8\u30c3\u30c0\u4f8b\u3000\u540d\u524d\u306e\u57cb\u3081\u8fbc\u307f\n$to = array('kazuki.mitani+01@nijibox.co.jp', 'kazuki.mitani+02@nijibox.co.jp');\n$from = \"smtp-testmail@nijibox.co.jp\";\n$subject = \"\u304a\u4e45\u3057\u3076\u308a\";\n$body    = <<<EOF\n%how%\u3055\u3093\u3053\u3093\u306b\u3061\u306f\uff01 \\r\\n\n\u6700\u8fd1\u5143\u6c17\u3067\u3059\u304b\uff1f\nEOF;\n$substitution = array('\u4e09\u8c37', '\u4f0a\u85e4', '\u5409\u7530');\n\n//\n$message = new \\Swift_Message();\n$message->setTo($to);\n$message->setFrom($from);\n$message->setSubject($subject);\n$message->setBody($body);\n\n// SMTP \u30b5\u30fc\u30d0\u30fc\u3068\u306e\u63a5\u7d9a\u8a2d\u5b9a\n$transport = \\Swift_SmtpTransport::newInstance('smtp.sendgrid.net', 587);\n$transport->setUsername('SENDGRID_USER');\n$transport->setPassword('SENDGRID_PASS');\n$mailer = \\Swift_Mailer::newInstance($transport);\n\n// \u30d8\u30c3\u30c0\u30fc\u306e\u8a2d\u5b9a\n$header = new Header();\n$header->addSubstitution('%how%', $substitution);\n\n$message_headers = $message->getHeaders();\n$message_headers->addTextHeader(HEADER::NAME, $header->jsonString());\n\n// \u9001\u4fe1\ntry {\n    $response = $mailer->send($message);\n    print_r($response);\n} catch(\\Swift_TransportException $e) {\n    print_r($e->getMessage());\n}\n\n\n\n\nDynamoDB\u306e\u4f5c\u6210\nDynamoDB\n \u2193\n \u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n \u30c6\u30fc\u30d6\u30eb\u540d\uff1aSendGridEvents\n \u30d7\u30e9\u30a4\u30de\u30ea\u30fc\u30ad\u30fc\uff1asg_event_id \u6587\u5b57\u5217\n\u3067\u4f5c\u6210\u3002\n\nLambda\u306e\u8a2d\u5b9a\n\u53d7\u3051\u53d6\u3063\u305fWebhook\u306e\u30dd\u30b9\u30c8\u3092\u30d1\u30fc\u30b9\u3057\u3066DynamoDB\u306b\u5165\u308c\u308b\u305f\u3081\u306eLambda Function\u3092\u4f5c\u308a\u307e\u3059\n AWS Lambda\n \u2193\n Create a Lambda function\n \u2193\n \u5143\u306b\u4f7f\u3048\u305d\u3046\u306ablueprint\u3092\u9078\u629e\u3002\n \u4eca\u56de\u306f\u3001microserice-http-endpoint\u3092\u9078\u629e\u3057\u307e\u3057\u305f\n \u2193\n \u8a2d\u5b9a\n name:SendGrid-EventWebhook\n Description:\u30c0\u30a4\u30ca\u30e2DB\u306b\u5165\u308c\u308b\n Runtime:NodeJS\n \u2193\n \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\nlambda.js\nvar doc = require('dynamodb-doc');\nvar dynamo = new doc.DynamoDB();\n\nexports.handler = function(event, context) {\n  function logArrayElements(element, index, array){\n    var params = {\n      TableName: 'SendGridEvents',\n      Item:element\n    };\n    dynamo.putItem(params, function (err, data) {\n      if (err) {\n        console.log(err, err.stack);\n      } else {\n        console.log(data);\n      }\n    });\n  }\nevent.forEach(logArrayElements);\n};\n\n\n\nAPI Gateway\u306e\u8a2d\u5b9a\nSendGrid\u304b\u3089\u98db\u3093\u3067\u304f\u308bWebhook\u306e\u53d7\u3051\u5834\u6240\u3092\u4f5c\u308a\u307e\u3059\u3002\n AWS API Gateway\n \u2193\n Create API\n \u2193\n Create Method\n \u2193\n POST\u3092\u9078\u629e\n Integration type:Lambda Function\n Lambda Region:ap-northeast-1(\u4f5c\u88fd\u3057\u305fLambda\u306eRegion)\n Lambda Function:SendGrid-EventWebhook(\u4f5c\u88fd\u3057\u305fLambda\u306eFunction\u540d)\n\nEventWebhook\u5230\u9054\u78ba\u8a8d\n\nINTEGRATION TESTING TOOL\nAWS\u5074\u306e\u8a2d\u5b9a\u306f\u3053\u3053\u307e\u3067\u3067\u7d42\u4e86\u3057\u305f\u306e\u3067\u3001\u758e\u901a\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n SendGrid\u3067\u306f\u5b9f\u969b\u306b\u30e1\u30fc\u30eb\u3092\u9001\u3089\u305a\u3001\u53d7\u3051\u53d6\u308a\u5074\u306e\u30c6\u30b9\u30c8\u3060\u3051\u884c\u3048\u308b\u201dINTEGRATION TESTING TOOL\u201d\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n SendGrid\n \u2193\n \u30ed\u30b0\u30a4\u30f3\n \u2193\n \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\n \u2193\n Mail Settings\n \u2193\n Event Notification\n \u2193\n HTTP POST URL:API Gateway\u306eURL\n \u2193\n SELECT ACTIONS\u306e\u3059\u3079\u3066\u306b\u30c1\u30a7\u30c3\u30af\u3092\u4ed8\u3051\u308b\n \u2193\n \u4fdd\u5b58\u3057\u3066TestYourIntegration\u3092\u30af\u30ea\u30c3\u30af\u3002\n \u2193\n DynamoDB\u306e\u683c\u7d0d\u78ba\u8a8d\u304c\u51fa\u6765\u305f\u3089\u6210\u529f\uff01\n\nSMTPAPI\u3092\u4f7f\u3063\u305f\u758e\u901a\u78ba\u8a8d\n\u5148\u306b\u4f5c\u6210\u3057\u305fphp\u3092\u5b9f\u884c\u3057\u3066\u3001\u30e1\u30fc\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u3053\u3068\u3067\u5b9f\u969b\u306eWebhook\u3092\u53d7\u3051\u53d6\u308c\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n $ php sendMail.php\n \u2193\n \u30e1\u30fc\u30eb\u304c\u5c4a\u304f\n \u2193\n \u3067\u3082Webhook\u306f\u5c4a\u304b\u306a\u3044\uff01\uff01\uff01\n\u72b6\u6cc1\u78ba\u8a8d\n 1.INTEGRATION TESTING TOOL\u3067\u306f\u52d5\u304f\u3002\n   \u2193AWS\u306f\u60aa\u304f\u306a\u3044\u3002\n 2.SendGrid\u306eEventWebhook\u304c\u305d\u3082\u305d\u3082APIGateway\u306b\u5230\u9054\u3057\u3066\u3044\u306a\u3044\u3002\n   \u2193SendGrid\u5074\u304c\u602a\u3057\u3044\u3002\n 3.ngrok\u3092\u4f7f\u3063\u3066EventWebhook\u306ePOST\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u53d7\u3051\u53d6\u308c\u305f\u3002\n   \u2193Webhook\u306f\u9001\u3089\u308c\u3066\u3044\u308b\u3002\n\u7d50\u679c\uff1aSendGrid\u306eWebhook\u306e\u6319\u52d5\u304c\u602a\u3057\u3044\u3002\n\u3053\u3053\u3067\u5929\u304b\u3089\u821e\u3044\u964d\u308a\u305f\u9db4\u306e\u4e00\u58f0\u3067AWS API Gateway\u306eCustom Domain Names\u3092\u4f7f\u7528\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3002\n \u203bhttps\u901a\u4fe1\u3059\u308b\u305f\u3081\u306bAWS\u306bCertificate body, Certificate private key, Certificate chain\u3092\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\nAWS API Gateway\n \u2193\n Custom Domain Names\n \u2193\n Base path:api-gateway\n API:SendGrid-EventWebhook\n Stage:\u306a\u3057\n \u2193\n https://\u4f7f\u3044\u305f\u3044\u30c9\u30e1\u30a4\u30f3/BasePath/Stage\u540d/API\u540d\n \u4f8b\uff1a https://DOMAINNAME/api-gateway/prod/SendGrid-EventWebhook\n \u2193\n SMTPAPI\u30c6\u30b9\u30c8\n \u2193\n \u30e1\u30fc\u30eb\u304c\u5c4a\u304f\n \u2193\n DynamoDB\u306b\u30c7\u30fc\u30bf\u304c\u5165\u308b\uff01\u6210\u529f\uff01\uff01\n\n\u307e\u3068\u3081\nSendGrid\u3068\u3001\u4f7f\u3063\u3066\u307f\u305f\u304b\u3063\u305fAWS\u306b\u89e6\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n \u5168\u304f\u7406\u89e3\u4e0d\u80fd\u306a\u3068\u3053\u308d\u3067\u8a70\u307e\u3063\u305f\u308a\u3001\u60a9\u3093\u3067\u305f\u5272\u306b\u3059\u3093\u306a\u308a\u3068\u8a2d\u5b9a\u51fa\u6765\u305f\u308a\u3068\u3044\u308d\u3044\u308d\u7d4c\u9a13\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n\u304a\u308f\u308a\n# \u306f\u3058\u3081\u306b\n\u3000SendGrid\u306e\u30e1\u30fc\u30eb\u30b5\u30fc\u30d3\u30b9\u3092\u89e6\u3063\u3066\u307f\u305f\u3002\n\u3000\u4eca\u56de\u306f\u3001SendGrid\u306eSMTP\u30ea\u30af\u30a8\u30b9\u30c8\u3068SendGrid EventWebhook\u3092\u4f7f\u3044AWS\u5074\u3067\u53d7\u3051\u53d6\u308b\u3068\u3053\u308d\u307e\u3067\u3092\u7d39\u4ecb\u3057\u307e\u3059\u3002\uff08\u307b\u3093\u3068\u306f\u5206\u6790\u3088\u3046\u306bKibana\u307e\u3067\u884c\u304d\u305f\u304b\u3063\u305f\u306e\u3067\u3001\u305d\u308c\u306f\u5225\u3067\u66f8\u3053\u3046\u3068\u601d\u3044\u307e\u3059(\\*^_^\\*)\n\n# SendGrid\u3068\u306f\n\u3000SendGrid\u306f\u6708\u9593200\u5104\u901a\u3092\u8d85\u3048\u308b\u30e1\u30fc\u30eb\u914d\u4fe1\u3092\u884c\u3044\u3001\u4e16\u754c\u306e\u30e1\u30fc\u30eb\u696d\u754c\u3092\u652f\u3048\u3066\u3044\u307e\u3059\u3002\n\u3000\u305f\u3060\u5927\u91cf\u306e\u914d\u4fe1\u3092\u3059\u308b\u3060\u3051\u3067\u306a\u304f\u3001\u914d\u4fe1\u3057\u305f\u30e1\u30fc\u30eb\u306e\u30a2\u30ca\u30ea\u30c6\u30a3\u30af\u30b9\u6a5f\u80fd\u3082\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n  \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u30e1\u30fc\u30eb\u306a\u3093\u304b\u3082\u9001\u308c\u308b\u306e\u3067\u3001\u5229\u7528\u306e\u5e45\u306f\u5e83\u3044\u3067\u3059\u306d\u3002\n\u3000\n# \u30d5\u30ed\u30fc\n![1.png](https://qiita-image-store.s3.amazonaws.com/0/101531/d7b8fc1c-fdf7-c362-2294-69d47ebc0837.png)\n\n# \u5b9f\u88c5\n## SendGrid SMTP API\u3092\u4f7f\u3063\u305f\u30ea\u30af\u30a8\u30b9\u30c8\n SMTP API\u3067\u306fX-SMTPAPI\u30d8\u30c3\u30c0\u3092\u5229\u7528\u3057\u3066\u30e1\u30fc\u30eb\u306e\u30ab\u30b9\u30bf\u30e0\u51e6\u7406\u3092\u6307\u5b9a\u3067\u304d\u308b\u3002\n\n```json:composer.json\n{\n    \"minimum-stability\" : \"dev\",\n    \"require\": {\n        \"sendgrid/smtpapi\": \"~0.5\",\n        \"swiftmailer/swiftmailer\": \"@stable\"\n    }\n}\n```\n\n```php:sendMail.php\n<?php\ndate_default_timezone_set('Asia/Tokyo');\n\nrequire_once dirname( __FILE__ ).\"/lib/vendor/autoload.php\";\nuse Smtpapi\\Header;\n// \u30ab\u30b9\u30bf\u30e0\u30d8\u30c3\u30c0\u4f8b\u3000\u540d\u524d\u306e\u57cb\u3081\u8fbc\u307f\n$to = array('kazuki.mitani+01@nijibox.co.jp', 'kazuki.mitani+02@nijibox.co.jp');\n$from = \"smtp-testmail@nijibox.co.jp\";\n$subject = \"\u304a\u4e45\u3057\u3076\u308a\";\n$body    = <<<EOF\n%how%\u3055\u3093\u3053\u3093\u306b\u3061\u306f\uff01 \\r\\n\n\u6700\u8fd1\u5143\u6c17\u3067\u3059\u304b\uff1f\nEOF;\n$substitution = array('\u4e09\u8c37', '\u4f0a\u85e4', '\u5409\u7530');\n\n//\n$message = new \\Swift_Message();\n$message->setTo($to);\n$message->setFrom($from);\n$message->setSubject($subject);\n$message->setBody($body);\n\n// SMTP \u30b5\u30fc\u30d0\u30fc\u3068\u306e\u63a5\u7d9a\u8a2d\u5b9a\n$transport = \\Swift_SmtpTransport::newInstance('smtp.sendgrid.net', 587);\n$transport->setUsername('SENDGRID_USER');\n$transport->setPassword('SENDGRID_PASS');\n$mailer = \\Swift_Mailer::newInstance($transport);\n\n// \u30d8\u30c3\u30c0\u30fc\u306e\u8a2d\u5b9a\n$header = new Header();\n$header->addSubstitution('%how%', $substitution);\n\n$message_headers = $message->getHeaders();\n$message_headers->addTextHeader(HEADER::NAME, $header->jsonString());\n\n// \u9001\u4fe1\ntry {\n    $response = $mailer->send($message);\n    print_r($response);\n} catch(\\Swift_TransportException $e) {\n    print_r($e->getMessage());\n}\n\n```\n\n## DynamoDB\u306e\u4f5c\u6210\n DynamoDB\n \u2193\n \u30c6\u30fc\u30d6\u30eb\u4f5c\u6210\n \u30c6\u30fc\u30d6\u30eb\u540d\uff1aSendGridEvents\n \u30d7\u30e9\u30a4\u30de\u30ea\u30fc\u30ad\u30fc\uff1asg_event_id \u6587\u5b57\u5217\n\n \u3067\u4f5c\u6210\u3002\n\n## Lambda\u306e\u8a2d\u5b9a\n \u53d7\u3051\u53d6\u3063\u305fWebhook\u306e\u30dd\u30b9\u30c8\u3092\u30d1\u30fc\u30b9\u3057\u3066DynamoDB\u306b\u5165\u308c\u308b\u305f\u3081\u306eLambda Function\u3092\u4f5c\u308a\u307e\u3059\n AWS Lambda\n \u2193\n Create a Lambda function\n \u2193\n \u5143\u306b\u4f7f\u3048\u305d\u3046\u306ablueprint\u3092\u9078\u629e\u3002\n \u4eca\u56de\u306f\u3001microserice-http-endpoint\u3092\u9078\u629e\u3057\u307e\u3057\u305f\n \u2193\n \u8a2d\u5b9a\n name:SendGrid-EventWebhook\n Description:\u30c0\u30a4\u30ca\u30e2DB\u306b\u5165\u308c\u308b\n Runtime:NodeJS\n \u2193\n \u30b3\u30fc\u30c9\u3092\u66f8\u304f\n\n```js:lambda.js\nvar doc = require('dynamodb-doc');\nvar dynamo = new doc.DynamoDB();\n\nexports.handler = function(event, context) {\n  function logArrayElements(element, index, array){\n    var params = {\n      TableName: 'SendGridEvents',\n      Item:element\n    };\n    dynamo.putItem(params, function (err, data) {\n      if (err) {\n        console.log(err, err.stack);\n      } else {\n        console.log(data);\n      }\n    });\n  }\nevent.forEach(logArrayElements);\n};\n```\n\n## API Gateway\u306e\u8a2d\u5b9a\n SendGrid\u304b\u3089\u98db\u3093\u3067\u304f\u308bWebhook\u306e\u53d7\u3051\u5834\u6240\u3092\u4f5c\u308a\u307e\u3059\u3002\n AWS API Gateway\n \u2193\n Create API\n \u2193\n Create Method\n \u2193\n POST\u3092\u9078\u629e\n Integration type:Lambda Function\n Lambda Region:ap-northeast-1(\u4f5c\u88fd\u3057\u305fLambda\u306eRegion)\n Lambda Function:SendGrid-EventWebhook(\u4f5c\u88fd\u3057\u305fLambda\u306eFunction\u540d)\n\n## EventWebhook\u5230\u9054\u78ba\u8a8d\n### INTEGRATION TESTING TOOL\n AWS\u5074\u306e\u8a2d\u5b9a\u306f\u3053\u3053\u307e\u3067\u3067\u7d42\u4e86\u3057\u305f\u306e\u3067\u3001\u758e\u901a\u78ba\u8a8d\u3092\u884c\u3044\u307e\u3059\u3002\n SendGrid\u3067\u306f\u5b9f\u969b\u306b\u30e1\u30fc\u30eb\u3092\u9001\u3089\u305a\u3001\u53d7\u3051\u53d6\u308a\u5074\u306e\u30c6\u30b9\u30c8\u3060\u3051\u884c\u3048\u308b\u201dINTEGRATION TESTING TOOL\u201d\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002\n SendGrid\n \u2193\n \u30ed\u30b0\u30a4\u30f3\n \u2193\n \u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\n \u2193\n Mail Settings\n \u2193\n Event Notification\n \u2193\n HTTP POST URL:API Gateway\u306eURL\n \u2193\n SELECT ACTIONS\u306e\u3059\u3079\u3066\u306b\u30c1\u30a7\u30c3\u30af\u3092\u4ed8\u3051\u308b\n \u2193\n \u4fdd\u5b58\u3057\u3066TestYourIntegration\u3092\u30af\u30ea\u30c3\u30af\u3002\n \u2193\n DynamoDB\u306e\u683c\u7d0d\u78ba\u8a8d\u304c\u51fa\u6765\u305f\u3089\u6210\u529f\uff01\n\n### SMTPAPI\u3092\u4f7f\u3063\u305f\u758e\u901a\u78ba\u8a8d\n \u5148\u306b\u4f5c\u6210\u3057\u305fphp\u3092\u5b9f\u884c\u3057\u3066\u3001\u30e1\u30fc\u30eb\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u308b\u3053\u3068\u3067\u5b9f\u969b\u306eWebhook\u3092\u53d7\u3051\u53d6\u308c\u308b\u304b\u78ba\u8a8d\u3059\u308b\u3002\n $ php sendMail.php\n \u2193\n \u30e1\u30fc\u30eb\u304c\u5c4a\u304f\n \u2193\n \u3067\u3082Webhook\u306f\u5c4a\u304b\u306a\u3044\uff01\uff01\uff01\n\n \u72b6\u6cc1\u78ba\u8a8d\n 1.INTEGRATION TESTING TOOL\u3067\u306f\u52d5\u304f\u3002\n   \u2193AWS\u306f\u60aa\u304f\u306a\u3044\u3002\n 2.SendGrid\u306eEventWebhook\u304c\u305d\u3082\u305d\u3082APIGateway\u306b\u5230\u9054\u3057\u3066\u3044\u306a\u3044\u3002\n   \u2193SendGrid\u5074\u304c\u602a\u3057\u3044\u3002\n 3.ngrok\u3092\u4f7f\u3063\u3066EventWebhook\u306ePOST\u3092\u30ed\u30fc\u30ab\u30eb\u3067\u53d7\u3051\u53d6\u308c\u305f\u3002\n   \u2193Webhook\u306f\u9001\u3089\u308c\u3066\u3044\u308b\u3002\n\n \u7d50\u679c\uff1aSendGrid\u306eWebhook\u306e\u6319\u52d5\u304c\u602a\u3057\u3044\u3002\n\n \u3053\u3053\u3067\u5929\u304b\u3089\u821e\u3044\u964d\u308a\u305f\u9db4\u306e\u4e00\u58f0\u3067AWS API Gateway\u306eCustom Domain Names\u3092\u4f7f\u7528\u3057\u3066\u307f\u308b\u3053\u3068\u306b\u3002\n \u203bhttps\u901a\u4fe1\u3059\u308b\u305f\u3081\u306bAWS\u306bCertificate body, Certificate private key, Certificate chain\u3092\u767b\u9332\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b\u3002\n\n AWS API Gateway\n \u2193\n Custom Domain Names\n \u2193\n Base path:api-gateway\n API:SendGrid-EventWebhook\n Stage:\u306a\u3057\n \u2193\n https://\u4f7f\u3044\u305f\u3044\u30c9\u30e1\u30a4\u30f3/BasePath/Stage\u540d/API\u540d\n \u4f8b\uff1a https://DOMAINNAME/api-gateway/prod/SendGrid-EventWebhook\n \u2193\n SMTPAPI\u30c6\u30b9\u30c8\n \u2193\n \u30e1\u30fc\u30eb\u304c\u5c4a\u304f\n \u2193\n DynamoDB\u306b\u30c7\u30fc\u30bf\u304c\u5165\u308b\uff01\u6210\u529f\uff01\uff01\n\n## \u307e\u3068\u3081\n SendGrid\u3068\u3001\u4f7f\u3063\u3066\u307f\u305f\u304b\u3063\u305fAWS\u306b\u89e6\u308c\u3066\u307f\u307e\u3057\u305f\u3002\n \u5168\u304f\u7406\u89e3\u4e0d\u80fd\u306a\u3068\u3053\u308d\u3067\u8a70\u307e\u3063\u305f\u308a\u3001\u60a9\u3093\u3067\u305f\u5272\u306b\u3059\u3093\u306a\u308a\u3068\u8a2d\u5b9a\u51fa\u6765\u305f\u308a\u3068\u3044\u308d\u3044\u308d\u7d4c\u9a13\u304c\u51fa\u6765\u307e\u3057\u305f\u3002\n \n\n\u304a\u308f\u308a\n", "tags": ["SendGrid", "Webhook", "AWS"]}