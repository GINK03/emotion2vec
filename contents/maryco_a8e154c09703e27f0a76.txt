{"tags": ["fluentd", "Cygwin"], "context": " More than 1 year has passed since last update.\u6687\u3064\u3076\u3057\u306b\u3001Cygwin\u4e0a\u306bfluentd\u3092\u5165\u308c\u3066\u52d5\u4f5c\u3055\u305b\u308b\u307e\u3067\u306e\u30e1\u30e2\n\napache\u306fvirtualbox\u4e0a\ncygwin\u5074\u306bruby\u3068fluentd\u3092\u5165\u308c\u3066\u52d5\u4f5c\u3055\u305b\u308b(virtualbox\u306e\u958b\u767a\u74b0\u5883\u3092\u3042\u307e\u308a\u5909\u66f4\u3057\u305f\u304f\u306a\u3044\u305f\u3081)\nruby\u95a2\u9023\u307e\u3063\u305f\u304f\u77e5\u308a\u307e\u305b\u3093\n\n\n\u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u305f\u30b5\u30a4\u30c8\n\nfluentd\u3092\u4efb\u610f\u306e\u5834\u6240\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u3063\u3066\u307f\u308b\u30c6\u30b9\u30c8\nvirtualbox(centos)\u3067\u306efluentd\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30e2(apache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u53ce\u96c6\u307e\u3067)\n\n\nCygwin\u5074\u306e\u4f5c\u696d\n\ncygwin\u306esetup.exe\u3067ruby\u3092\u5165\u308c\u308b\n\n\u7d50\u679c\n$ ruby --version\nruby 1.9.3p448 (2013-06-27) [i386-cygwin]\n\n\n\ngem\u3068\u304b\u3044\u3046\u306e\u3092update\u3057\u3066fluentd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\nupdate\u7d50\u679c\n$ gem update --http-proxy http://proxy.xxx.yyy.zzz:8080\nUpdating installed gems\nUpdating bigdecimal\nFetching: bigdecimal-1.2.5.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed bigdecimal-1.2.5\nUpdating io-console\nFetching: io-console-0.4.2.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed io-console-0.4.2\nUpdating json\nFetching: json-1.8.1.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed json-1.8.1\nUpdating minitest\nFetching: minitest-5.2.2.gem (100%)\nSuccessfully installed minitest-5.2.2\nUpdating rake\nFetching: rake-10.1.1.gem (100%)\nSuccessfully installed rake-10.1.1\nUpdating rdoc\nFetching: rdoc-4.1.1.gem (100%)\nDepending on your version of ruby, you may need to install ruby rdoc/ri data:\n\n<= 1.8.6 : unsupported\n = 1.8.7 : gem install rdoc-data; rdoc-data --install\n = 1.9.1 : gem install rdoc-data; rdoc-data --install\n>= 1.9.2 : nothing to do! Yay!\nSuccessfully installed rdoc-4.1.1\nGems updated: bigdecimal, io-console, json, minitest, rake, rdoc\nInstalling ri documentation for bigdecimal-1.2.5...\nInstalling ri documentation for io-console-0.4.2...\nInstalling ri documentation for json-1.8.1...\nInstalling ri documentation for minitest-5.2.2...\nInstalling ri documentation for rake-10.1.1...\nInstalling ri documentation for rdoc-4.1.1...\nInstalling RDoc documentation for bigdecimal-1.2.5...\nInstalling RDoc documentation for io-console-0.4.2...\nInstalling RDoc documentation for json-1.8.1...\nInstalling RDoc documentation for minitest-5.2.2...\nInstalling RDoc documentation for rake-10.1.1...\nInstalling RDoc documentation for rdoc-4.1.1...\n\n\n\ninstall\u7d50\u679c\n$ gem install fluentd --no-ri --no-rdoc --http-proxy http://proxy.xxx.yyy.zzz:8080\nFetching: msgpack-0.5.8.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: yajl-ruby-1.2.0.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: iobuffer-1.1.2.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: cool.io-1.1.1.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: http_parser.rb-0.5.3.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: fluentd-0.10.42.gem (100%)\nSuccessfully installed msgpack-0.5.8\nSuccessfully installed yajl-ruby-1.2.0\nSuccessfully installed iobuffer-1.1.2\nSuccessfully installed cool.io-1.1.1\nSuccessfully installed http_parser.rb-0.5.3\nSuccessfully installed fluentd-0.10.42\n6 gems installed\n\n$ fluentd --version\nfluentd 0.10.42\n\n\n\nfluentd\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\uff08\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a\u3067\uff09\n$ fluentd --setup ./fluentd/fluent\nInstalled ./fluentd/fluent/fluent.conf.\n\n\nfluentd\u306e\u8d77\u52d5\uff06\u505c\u6b62\n\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\uff08conf\u30d5\u30a1\u30a4\u30eb\u6307\u5b9a\u3067\uff09\n\nfluentd -c ./fluentd/fluent/fluent.conf -vv &\n\n\n\u8d77\u52d5\u7d50\u679c\n$ fluentd -c ./fluentd/fluent/fluent.conf -vv &\n[1] 6880\n\n$ 2013-12-03 17:51:18 +0900 [info]: fluent/supervisor.rb:171:supervise: starting fluentd-0.10.42\n2013-12-03 17:51:18 +0900 [info]: fluent/supervisor.rb:273:read_config: reading config file path=\"./fluentd/fluent/fluent.conf\"\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'file'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'memory'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'debug_agent'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'exec'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'forward'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'gc_stat'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'http'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'monitor_agent'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'object_space'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'status'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tcp'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'unix'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'syslog'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tail'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'copy'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec_filter'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'file'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'forward'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'null'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'roundrobin'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'stdout'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'tcp'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'unix'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'test'\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:85:block in configure: gem 'fluentd' version '0.10.42'\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:89:configure: using configuration file: <ROOT>\n  <source>\n    type forward\n  </source>\n  <source>\n    type http\n    port 8888\n  </source>\n  <source>\n    type monitor_agent\n    port 24220\n  </source>\n  <source>\n    type debug_agent\n    port 24230\n  </source>\n  <match debug.**>\n    type stdout\n  </match>\n  <match system.**>\n    type forward\n    host 192.168.0.11\n    <secondary>\n      host 192.168.0.12\n    </secondary>\n  </match>\n</ROOT>\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"forward\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"http\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"monitor_agent\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"debug_agent\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"system.**\" type=\"forward\"\n2013-12-03 17:51:19 +0900 [warn]: plugin/out_forward.rb:57:configure: 'host' option in forward output is obsoleted. Use '<server> host xxx </server>' instead.\n2013-12-03 17:51:19 +0900 [info]: plugin/out_forward.rb:87:block in configure: adding forwarding server '192.168.0.12:24224' host=\"192.168.0.12\" port=24224 weight=60\n2013-12-03 17:51:19 +0900 [warn]: plugin/out_forward.rb:57:configure: 'host' option in forward output is obsoleted. Use '<server> host xxx </server>' instead.\n2013-12-03 17:51:19 +0900 [info]: plugin/out_forward.rb:87:block in configure: adding forwarding server '192.168.0.11:24224' host=\"192.168.0.11\" port=24224 weight=60\n2013-12-03 17:51:19 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=0\n2013-12-03 17:51:19 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=0\n2013-12-03 17:51:19 +0900 [info]: plugin/in_forward.rb:64:listen: listening fluent socket on 0.0.0.0:24224\n2013-12-03 17:51:19 +0900 [debug]: plugin/in_http.rb:73:start: listening http on 0.0.0.0:8888\n2013-12-03 17:51:19 +0900 [debug]: plugin/in_monitor_agent.rb:157:start: listening monitoring http server on http://0.0.0.0:24220/api/plugins\n2013-12-03 17:51:19 +0900 [info]: plugin/in_debug_agent.rb:44:start: listening dRuby uri=\"druby://0.0.0.0:24230\" object=\"Engine\"\n2013-12-03 17:51:56 +0900 [warn]: plugin/out_forward.rb:406:tick: detached forwarding server '192.168.0.12:24224' host=\"192.168.0.12\" port=24224 phi=16.405017259743943\n2013-12-03 17:51:56 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=60\n2013-12-03 17:51:56 +0900 [warn]: plugin/out_forward.rb:406:tick: detached forwarding server '192.168.0.11:24224' host=\"192.168.0.11\" port=24224 phi=16.408709530721485\n2013-12-03 17:51:56 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=60\n\n\nCtrl+c\u3067\u7d42\u4e86\u3055\u305b\u3066\u518d\u5ea6\u8d77\u52d5\u3057\u3066\u307f\u305f\u3089\u3001\u518d\u8d77\u52d5\u30eb\u30fc\u30d7\u304c\u767a\u751f\n$ 2013-12-04 12:09:30 +0900 [info]: fluent/supervisor.rb:171:supervise: starting fluentd-0.10.42\n2013-12-04 12:09:30 +0900 [info]: fluent/supervisor.rb:273:read_config: reading config file path=\"./fluentd/fluent/fluent.conf\"\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'file'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'memory'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'debug_agent'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'exec'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'forward'\n\u30fb\u30fb\u30fb\u7701\u7565\u30fb\u30fb\u30fb\n2013-12-04 12:09:31 +0900 [info]: plugin/in_forward.rb:64:listen: listening fluent socket on 0.0.0.0:24224\n2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:218:rescue in run: unexpected error error_class=Errno::EADDRINUSE error=#<Errno::EADDRINUSE: Address already in use - bind(2)>\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/server.rb:57:in `initialize'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/server.rb:57:in `new'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/server.rb:57:in `initialize'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/plugin/in_forward.rb:65:in `new'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/plugin/in_forward.rb:65:in `listen'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/plugin/in_forward.rb:40:in `start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:250:in `block in start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:249:in `each'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:249:in `start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:204:in `run'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:386:in `run_engine'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:94:in `block in start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:198:in `call'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:198:in `main_process'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:173:in `block in supervise'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:172:in `fork'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:172:in `supervise'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:87:in `start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/command/fluentd.rb:146:in `<top (required)>'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/bin/fluentd:6:in `<top (required)>'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/bin/fluentd:23:in `load'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/bin/fluentd:23:in `<main>'\n2013-12-04 12:09:31 +0900 [info]: fluent/engine.rb:221:run: shutting down fluentd\n2013-12-04 12:09:33 +0900 [info]: fluent/supervisor.rb:188:supervise: process finished code=0\n2013-12-04 12:09:33 +0900 [error]: fluent/supervisor.rb:97:start: fluentd main process died unexpectedly. restarting.\n\u4ee5\u964d\u6700\u521d\u306b\u623b\u3063\u3066\u4ee5\u4e0b\u30eb\u30fc\u30d7\u30fb\u30fb\u30fb\n\n\u3068\u308a\u3042\u3048\u305aruby\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7247\u3063\u7aef\u304b\u3089kill\u3057\u305f\u3089\u6b62\u307e\u3063\u305f\u3002\n$kill -9 xxxx xxxx xxxx xxxx\n$ 2013-12-04 12:27:36 +0900 [debug]: fluent/supervisor.rb:354:block in install_main_process_signal_handlers: fluentd main process get SIGTERM\n2013-12-04 12:27:36 +0900 [debug]: fluent/supervisor.rb:357:block in install_main_process_signal_handlers: getting start to shutdown main process\n2013-12-04 12:27:36 +0900 [info]: fluent/engine.rb:221:run: shutting down fluentd\n\n\u8d77\u52d5\u3059\u308b\u3068ruby\u306e\u30d7\u30ed\u30bb\u30b9\u304c2\u3064\u8d77\u3061\u4e0a\u304c\u308b\u3089\u3057\u3044\u306e\u3067\u3001\n\u3053\u308c\u3092\u4e21\u65b9\u3068\u3082kill\u3059\u308c\u3070\u518d\u8d77\u52d5\u30eb\u30fc\u30d7\u306f\u767a\u751f\u3057\u306a\u3044(\u3053\u306e\u6b62\u3081\u65b9\u304c\u6b63\u3057\u3044\u304b\u306f\u4e0d\u660e)\n$ ps -a\n      PID    PPID    PGID     WINPID   TTY     UID    STIME COMMAND\n     7148    6768    7148       1608  pty1    21751 14:05:57 /usr/bin/ruby\n     2256    7148    7148       2256  pty1    21751 14:05:59 /usr/bin/ruby\n\n\nVirtualBox\u5074\u306e\u4f5c\u696d\n\napache\u306e\u8a2d\u5b9a\napache\u306eaccess\u30ed\u30b0\u3092cygwin\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3068\u3053\u308d\u306b\u3082\u5410\u304f\u3088\u3046\u306b\nCustomLog\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066apache\u518d\u8d77\u52d5\n\nhttpd.conf\nCustomLog /media/sf_share/logs/access_log combined\n\n\n\u4ee5\u4e0a\u3002\n\napache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u2192fluent\u3067\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3092\u8a66\u3057\u3066\u307f\u308b\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8abf\u6574(\u203b\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u306f\u305a\u3057\u3066\u30d1\u30b9\u3092\u5909\u3048\u305f\u3060\u3051)\n\nfluent.conf\n## File input\n## read apache logs with tag=apache.access\n<source>\n  type tail\n  format apache\n  path /cygdrive/c/share/logs/access_log\n  tag apache.access\n</source>\n\n## match tag=apache.access and write to file\n<match apache.access>\n  type file\n  path /cygdrive/c/share/logs/fluent/access\n</match>\n\n\n\u4f8b\u3048\u3070\u3053\u308c\u304c\u3001\n\n10.0.2.2 - abc@aaa.bbb.ccc.co.jp [04/Dec/2013:11:41:12 +0900] \"GET /testapp/controller_b/action_1 HTTP/1.1\" 500 3280 \"http://127.0.0.1/testapp/index.php/controller_a/action_1/param\" \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.107 Safari/537.36\"\n\n\u3053\u3046\u51fa\u529b\u3055\u308c\u308b\u3002\n\n2013-12-04T11:41:12+09:00 apache.access   {\"host\":\"10.0.2.2\",\"user\":\"abc@aaa.bbb.ccc.co.jp\",\"method\":\"GET\",\"path\":\"/testapp/controller_b/action_1\",\"code\":\"500\",\"size\":\"3280\",\"referer\":\"http://127.0.0.1/testapp/index.php/controller_a/action_1/param\",\"agent\":\"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.107 Safari/537.36\"}\n\n\u3067\u3001\u4f55\u306b\u4f7f\u3046\u3093\u3060\u308d\u3046\u306d\u3002\n\u6687\u3064\u3076\u3057\u306b\u3001Cygwin\u4e0a\u306bfluentd\u3092\u5165\u308c\u3066\u52d5\u4f5c\u3055\u305b\u308b\u307e\u3067\u306e\u30e1\u30e2\n\n* apache\u306fvirtualbox\u4e0a\n* cygwin\u5074\u306bruby\u3068fluentd\u3092\u5165\u308c\u3066\u52d5\u4f5c\u3055\u305b\u308b(virtualbox\u306e\u958b\u767a\u74b0\u5883\u3092\u3042\u307e\u308a\u5909\u66f4\u3057\u305f\u304f\u306a\u3044\u305f\u3081)\n* ruby\u95a2\u9023\u307e\u3063\u305f\u304f\u77e5\u308a\u307e\u305b\u3093\n\n## \u53c2\u8003\u306b\u3055\u305b\u3066\u3044\u305f\u3060\u3044\u305f\u30b5\u30a4\u30c8\n* [fluentd\u3092\u4efb\u610f\u306e\u5834\u6240\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u4f7f\u3063\u3066\u307f\u308b\u30c6\u30b9\u30c8](http://d.hatena.ne.jp/tweeeety/20131129/1385734403)\n* [virtualbox(centos)\u3067\u306efluentd\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30e1\u30e2(apache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u53ce\u96c6\u307e\u3067)](http://qiita.com/ryurock/items/ae25133156aeddd7c24b)\n\n## Cygwin\u5074\u306e\u4f5c\u696d\n\n### cygwin\u306esetup.exe\u3067ruby\u3092\u5165\u308c\u308b\n\n```:\u7d50\u679c\n$ ruby --version\nruby 1.9.3p448 (2013-06-27) [i386-cygwin]\n```\n\n### gem\u3068\u304b\u3044\u3046\u306e\u3092update\u3057\u3066fluentd\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\n\n```:update\u7d50\u679c\n$ gem update --http-proxy http://proxy.xxx.yyy.zzz:8080\nUpdating installed gems\nUpdating bigdecimal\nFetching: bigdecimal-1.2.5.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed bigdecimal-1.2.5\nUpdating io-console\nFetching: io-console-0.4.2.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed io-console-0.4.2\nUpdating json\nFetching: json-1.8.1.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed json-1.8.1\nUpdating minitest\nFetching: minitest-5.2.2.gem (100%)\nSuccessfully installed minitest-5.2.2\nUpdating rake\nFetching: rake-10.1.1.gem (100%)\nSuccessfully installed rake-10.1.1\nUpdating rdoc\nFetching: rdoc-4.1.1.gem (100%)\nDepending on your version of ruby, you may need to install ruby rdoc/ri data:\n\n<= 1.8.6 : unsupported\n = 1.8.7 : gem install rdoc-data; rdoc-data --install\n = 1.9.1 : gem install rdoc-data; rdoc-data --install\n>= 1.9.2 : nothing to do! Yay!\nSuccessfully installed rdoc-4.1.1\nGems updated: bigdecimal, io-console, json, minitest, rake, rdoc\nInstalling ri documentation for bigdecimal-1.2.5...\nInstalling ri documentation for io-console-0.4.2...\nInstalling ri documentation for json-1.8.1...\nInstalling ri documentation for minitest-5.2.2...\nInstalling ri documentation for rake-10.1.1...\nInstalling ri documentation for rdoc-4.1.1...\nInstalling RDoc documentation for bigdecimal-1.2.5...\nInstalling RDoc documentation for io-console-0.4.2...\nInstalling RDoc documentation for json-1.8.1...\nInstalling RDoc documentation for minitest-5.2.2...\nInstalling RDoc documentation for rake-10.1.1...\nInstalling RDoc documentation for rdoc-4.1.1...\n```\n\n```:install\u7d50\u679c\n$ gem install fluentd --no-ri --no-rdoc --http-proxy http://proxy.xxx.yyy.zzz:8080\nFetching: msgpack-0.5.8.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: yajl-ruby-1.2.0.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: iobuffer-1.1.2.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: cool.io-1.1.1.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: http_parser.rb-0.5.3.gem (100%)\nBuilding native extensions.  This could take a while...\nFetching: fluentd-0.10.42.gem (100%)\nSuccessfully installed msgpack-0.5.8\nSuccessfully installed yajl-ruby-1.2.0\nSuccessfully installed iobuffer-1.1.2\nSuccessfully installed cool.io-1.1.1\nSuccessfully installed http_parser.rb-0.5.3\nSuccessfully installed fluentd-0.10.42\n6 gems installed\n\n$ fluentd --version\nfluentd 0.10.42\n```\n\n### fluentd\u306e\u30bb\u30c3\u30c8\u30a2\u30c3\u30d7\uff08\u4efb\u610f\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u6307\u5b9a\u3067\uff09\n\n```\n$ fluentd --setup ./fluentd/fluent\nInstalled ./fluentd/fluent/fluent.conf.\n```\n\n### fluentd\u306e\u8d77\u52d5\uff06\u505c\u6b62\n\n\u8d77\u52d5\u30b3\u30de\u30f3\u30c9\uff08conf\u30d5\u30a1\u30a4\u30eb\u6307\u5b9a\u3067\uff09\n> fluentd -c ./fluentd/fluent/fluent.conf -vv &\n\n```:\u8d77\u52d5\u7d50\u679c\n$ fluentd -c ./fluentd/fluent/fluent.conf -vv &\n[1] 6880\n\n$ 2013-12-03 17:51:18 +0900 [info]: fluent/supervisor.rb:171:supervise: starting fluentd-0.10.42\n2013-12-03 17:51:18 +0900 [info]: fluent/supervisor.rb:273:read_config: reading config file path=\"./fluentd/fluent/fluent.conf\"\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'file'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'memory'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'debug_agent'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'exec'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'forward'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'gc_stat'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'http'\n2013-12-03 17:51:18 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'monitor_agent'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'object_space'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'status'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tcp'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'unix'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'syslog'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'tail'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'copy'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'exec_filter'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'file'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'forward'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'null'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'roundrobin'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'stdout'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'tcp'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'unix'\n2013-12-03 17:51:19 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered output plugin 'test'\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:85:block in configure: gem 'fluentd' version '0.10.42'\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:89:configure: using configuration file: <ROOT>\n  <source>\n    type forward\n  </source>\n  <source>\n    type http\n    port 8888\n  </source>\n  <source>\n    type monitor_agent\n    port 24220\n  </source>\n  <source>\n    type debug_agent\n    port 24230\n  </source>\n  <match debug.**>\n    type stdout\n  </match>\n  <match system.**>\n    type forward\n    host 192.168.0.11\n    <secondary>\n      host 192.168.0.12\n    </secondary>\n  </match>\n</ROOT>\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"forward\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"http\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"monitor_agent\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:99:block in configure: adding source type=\"debug_agent\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"debug.**\" type=\"stdout\"\n2013-12-03 17:51:19 +0900 [info]: fluent/engine.rb:115:block in configure: adding match pattern=\"system.**\" type=\"forward\"\n2013-12-03 17:51:19 +0900 [warn]: plugin/out_forward.rb:57:configure: 'host' option in forward output is obsoleted. Use '<server> host xxx </server>' instead.\n2013-12-03 17:51:19 +0900 [info]: plugin/out_forward.rb:87:block in configure: adding forwarding server '192.168.0.12:24224' host=\"192.168.0.12\" port=24224 weight=60\n2013-12-03 17:51:19 +0900 [warn]: plugin/out_forward.rb:57:configure: 'host' option in forward output is obsoleted. Use '<server> host xxx </server>' instead.\n2013-12-03 17:51:19 +0900 [info]: plugin/out_forward.rb:87:block in configure: adding forwarding server '192.168.0.11:24224' host=\"192.168.0.11\" port=24224 weight=60\n2013-12-03 17:51:19 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=0\n2013-12-03 17:51:19 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=0\n2013-12-03 17:51:19 +0900 [info]: plugin/in_forward.rb:64:listen: listening fluent socket on 0.0.0.0:24224\n2013-12-03 17:51:19 +0900 [debug]: plugin/in_http.rb:73:start: listening http on 0.0.0.0:8888\n2013-12-03 17:51:19 +0900 [debug]: plugin/in_monitor_agent.rb:157:start: listening monitoring http server on http://0.0.0.0:24220/api/plugins\n2013-12-03 17:51:19 +0900 [info]: plugin/in_debug_agent.rb:44:start: listening dRuby uri=\"druby://0.0.0.0:24230\" object=\"Engine\"\n2013-12-03 17:51:56 +0900 [warn]: plugin/out_forward.rb:406:tick: detached forwarding server '192.168.0.12:24224' host=\"192.168.0.12\" port=24224 phi=16.405017259743943\n2013-12-03 17:51:56 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=60\n2013-12-03 17:51:56 +0900 [warn]: plugin/out_forward.rb:406:tick: detached forwarding server '192.168.0.11:24224' host=\"192.168.0.11\" port=24224 phi=16.408709530721485\n2013-12-03 17:51:56 +0900 [debug]: plugin/out_forward.rb:170:rebuild_weight_array: rebuilding weight array lost_weight=60\n```\n\n**Ctrl+c\u3067\u7d42\u4e86\u3055\u305b\u3066\u518d\u5ea6\u8d77\u52d5\u3057\u3066\u307f\u305f\u3089\u3001\u518d\u8d77\u52d5\u30eb\u30fc\u30d7\u304c\u767a\u751f**\n\n```\uff1a\u75c7\u72b6\n$ 2013-12-04 12:09:30 +0900 [info]: fluent/supervisor.rb:171:supervise: starting fluentd-0.10.42\n2013-12-04 12:09:30 +0900 [info]: fluent/supervisor.rb:273:read_config: reading config file path=\"./fluentd/fluent/fluent.conf\"\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'file'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered buffer plugin 'memory'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'debug_agent'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'exec'\n2013-12-04 12:09:30 +0900 [trace]: fluent/plugin.rb:87:register_impl: registered input plugin 'forward'\n\u30fb\u30fb\u30fb\u7701\u7565\u30fb\u30fb\u30fb\n2013-12-04 12:09:31 +0900 [info]: plugin/in_forward.rb:64:listen: listening fluent socket on 0.0.0.0:24224\n2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:218:rescue in run: unexpected error error_class=Errno::EADDRINUSE error=#<Errno::EADDRINUSE: Address already in use - bind(2)>\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/server.rb:57:in `initialize'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/server.rb:57:in `new'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/cool.io-1.1.1/lib/cool.io/server.rb:57:in `initialize'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/plugin/in_forward.rb:65:in `new'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/plugin/in_forward.rb:65:in `listen'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/plugin/in_forward.rb:40:in `start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:250:in `block in start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:249:in `each'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:249:in `start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/engine.rb:204:in `run'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:386:in `run_engine'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:94:in `block in start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:198:in `call'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:198:in `main_process'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:173:in `block in supervise'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:172:in `fork'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:172:in `supervise'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/supervisor.rb:87:in `start'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/lib/fluent/command/fluentd.rb:146:in `<top (required)>'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/lib/ruby/gems/1.9.1/gems/fluentd-0.10.42/bin/fluentd:6:in `<top (required)>'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/bin/fluentd:23:in `load'\n  2013-12-04 12:09:31 +0900 [error]: fluent/engine.rb:219:rescue in run: /usr/bin/fluentd:23:in `<main>'\n2013-12-04 12:09:31 +0900 [info]: fluent/engine.rb:221:run: shutting down fluentd\n2013-12-04 12:09:33 +0900 [info]: fluent/supervisor.rb:188:supervise: process finished code=0\n2013-12-04 12:09:33 +0900 [error]: fluent/supervisor.rb:97:start: fluentd main process died unexpectedly. restarting.\n\u4ee5\u964d\u6700\u521d\u306b\u623b\u3063\u3066\u4ee5\u4e0b\u30eb\u30fc\u30d7\u30fb\u30fb\u30fb\n```\n\n\u3068\u308a\u3042\u3048\u305aruby\u306e\u30d7\u30ed\u30bb\u30b9\u3092\u7247\u3063\u7aef\u304b\u3089kill\u3057\u305f\u3089\u6b62\u307e\u3063\u305f\u3002\n\n```\n$kill -9 xxxx xxxx xxxx xxxx\n$ 2013-12-04 12:27:36 +0900 [debug]: fluent/supervisor.rb:354:block in install_main_process_signal_handlers: fluentd main process get SIGTERM\n2013-12-04 12:27:36 +0900 [debug]: fluent/supervisor.rb:357:block in install_main_process_signal_handlers: getting start to shutdown main process\n2013-12-04 12:27:36 +0900 [info]: fluent/engine.rb:221:run: shutting down fluentd\n```\n\n\u8d77\u52d5\u3059\u308b\u3068ruby\u306e\u30d7\u30ed\u30bb\u30b9\u304c2\u3064\u8d77\u3061\u4e0a\u304c\u308b\u3089\u3057\u3044\u306e\u3067\u3001\n\u3053\u308c\u3092\u4e21\u65b9\u3068\u3082kill\u3059\u308c\u3070\u518d\u8d77\u52d5\u30eb\u30fc\u30d7\u306f\u767a\u751f\u3057\u306a\u3044(\u3053\u306e\u6b62\u3081\u65b9\u304c\u6b63\u3057\u3044\u304b\u306f\u4e0d\u660e)\n\n```\n$ ps -a\n      PID    PPID    PGID     WINPID   TTY     UID    STIME COMMAND\n     7148    6768    7148       1608  pty1    21751 14:05:57 /usr/bin/ruby\n     2256    7148    7148       2256  pty1    21751 14:05:59 /usr/bin/ruby\n```\n\n## VirtualBox\u5074\u306e\u4f5c\u696d\n\n### apache\u306e\u8a2d\u5b9a\n\napache\u306eaccess\u30ed\u30b0\u3092cygwin\u304b\u3089\u53c2\u7167\u3067\u304d\u308b\u3068\u3053\u308d\u306b\u3082\u5410\u304f\u3088\u3046\u306b\nCustomLog\u8a2d\u5b9a\u3092\u8ffd\u52a0\u3057\u3066apache\u518d\u8d77\u52d5\n\n```:httpd.conf\nCustomLog /media/sf_share/logs/access_log combined\n```\n\u4ee5\u4e0a\u3002\n\n## apache\u306e\u30a2\u30af\u30bb\u30b9\u30ed\u30b0\u30d5\u30a1\u30a4\u30eb\u2192fluent\u3067\u5225\u30d5\u30a1\u30a4\u30eb\u306b\u51fa\u529b\u3092\u8a66\u3057\u3066\u307f\u308b\n\n\u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb\u3092\u8abf\u6574(\u203b\u30b3\u30e1\u30f3\u30c8\u30a2\u30a6\u30c8\u306f\u305a\u3057\u3066\u30d1\u30b9\u3092\u5909\u3048\u305f\u3060\u3051)\n\n```:fluent.conf\n## File input\n## read apache logs with tag=apache.access\n<source>\n  type tail\n  format apache\n  path /cygdrive/c/share/logs/access_log\n  tag apache.access\n</source>\n\n## match tag=apache.access and write to file\n<match apache.access>\n  type file\n  path /cygdrive/c/share/logs/fluent/access\n</match>\n```\n\n\u4f8b\u3048\u3070\u3053\u308c\u304c\u3001\n> 10.0.2.2 - abc@aaa.bbb.ccc.co.jp [04/Dec/2013:11:41:12 +0900] \"GET /testapp/controller_b/action_1 HTTP/1.1\" 500 3280 \"http://127.0.0.1/testapp/index.php/controller_a/action_1/param\" \"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.107 Safari/537.36\"\n\n\u3053\u3046\u51fa\u529b\u3055\u308c\u308b\u3002\n> 2013-12-04T11:41:12+09:00\tapache.access\t{\"host\":\"10.0.2.2\",\"user\":\"abc@aaa.bbb.ccc.co.jp\",\"method\":\"GET\",\"path\":\"/testapp/controller_b/action_1\",\"code\":\"500\",\"size\":\"3280\",\"referer\":\"http://127.0.0.1/testapp/index.php/controller_a/action_1/param\",\"agent\":\"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/32.0.1700.107 Safari/537.36\"}\n\n*\u3067\u3001\u4f55\u306b\u4f7f\u3046\u3093\u3060\u308d\u3046\u306d\u3002*\n"}