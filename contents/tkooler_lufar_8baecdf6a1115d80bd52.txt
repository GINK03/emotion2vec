{"tags": ["homebrew", "macOSSierra", "macos10.12"], "context": "\n\n\u524d\u63d0\n\u7b46\u8005\u306e PC \u306e\u30b9\u30da\u30c3\u30af\u3002\n\n  OS: macOS Sierra\n  \u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8: \u4ee5\u4e0b\u306e2\u3064\n\n\n  \u7ba1\u7406\u8005 (\u4ee5\u4e0b admin) \u203b root \u3068\u306f\u5225\u7269\n  \u901a\u5e38\u4f7f\u7528 (\u4ee5\u4e0b myuser)\n\n\n  Homebrew: Yosemite \u6642\u4ee3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f(\u3068\u8a18\u61b6\u3057\u3066\u3044\u308b)\u3082\u306e\u3092\u4f7f\u3044\u7d9a\u3051\u3066\u307e\u3059\n\nHomebrew \u4f7f\u7528\u6642\u3060\u3051\u3001\u901a\u5e38\u4f7f\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 sudo -uadmin brew \u306a\u3069\u3068\u3057\u3066\u4f7f\u7528\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\n\n\u60a9\u307f\u4e8b\nSierra \u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u4e45\u3057\u3044\u3042\u308b\u65e5\u3001 brew install \u3057\u3088\u3046\u3068\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n$ sudo -uadmin brew install bar\nError: Permission denied - /Users/myuser/Library \n\n\u30a8\u30e9\u30fc\u6587\u3067\u30b0\u30b0\u3063\u3066\u3082\u6709\u529b\u306a\u60c5\u5831\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067 formulae \u3092\u30e1\u30e2\u3063\u3066\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\nnote-formulae\nbrew list > ~/Desktop/formulae.txt\n\n\n\nreinstall\nsudo -uadmin ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)\"\nsudo -uadmin ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n\n\n(\u203b\u6700\u65b0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u306f\u516c\u5f0f\u3092\u53c2\u7167)\n\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3046\u307e\u304f\u3044\u3063\u305f\u3063\u307d\u3044\u306e\u3067\u3059\u304c\u3001(\u518d)\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u5931\u6557\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\nwarning: unable to access '/Users/myuser/.config/git/attributes': Permission denied \n\n\n\n\u539f\u56e0\n\u30b0\u30b0\u3063\u3066\u51fa\u3066\u304d\u305f\u60c5\u5831\u3092\u6539\u3081\u3066\u3058\u3063\u304f\u308a\u773a\u3081\u3066\u3044\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\nhttp://stackoverflow.com/a/27151021/7509299\n\u3069\u3046\u3084\u3089 sudo \u3059\u308b\u3068\u304d\u306b\u74b0\u5883\u5909\u6570 $HOME \u304c\u5143\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u307e\u307e\u3060\u3063\u305f\u306e\u304c\u3044\u3051\u306a\u304b\u3063\u305f\u3089\u3057\u3044\u3067\u3059\u3002\nsudo \u3059\u308b\u3068\u304d\u306b $HOME \u306e\u5b9a\u7fa9\u304c\u5143\u306e\u307e\u307e\u3060\u3068\u3001 admin \u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u3067 myuser \u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53c2\u7167\u3057\u3061\u3083\u3046\u3063\u3066\u3053\u3068\u3067\u3059\u306d\u3002\n$ echo 'echo $HOME' | sudo -uadmin bash\n/Users/myuser\n\n\n\n\u89e3\u6c7a\u65b9\u6cd5\n\u306a\u3093\u3068\u304b\u3059\u308b\u65b9\u6cd5\u306a\u3044\u304b\u3068 man sudo \u3057\u3066 'HOME' \u3092\u691c\u7d22\u2026\u3063\u3068\u3001\u3042\u308a\u307e\u3057\u305f!\n(\u4ee5\u4e0b man 8 sudo \u304b\u3089\u5f15\u7528)\n\n\n-H, --set-home\nRequest that the security policy set the HOME environment variable to the home directory specified by the target user's password database entry.  Depending on the policy, this may be the default behavior.\n\n\n\u3064\u307e\u308a\u306f\u3053\u3046\u3044\u3046\u3053\u3068\n$ echo 'echo $HOME' | sudo -uadmin bash\n/Users/myuser\n$ echo 'echo $HOME' | sudo -H -uadmin bash\n/Users/admin\n\n\u3068\u3044\u3046\u308f\u3051\u3067 brew \u3059\u308b\u3068\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u3089\u3061\u3083\u3093\u3068\u52d5\u304d\u307e\u3057\u305f\u3002\n\ninstall\nsudo -H -uadmin ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n\n\n(\u203b\u6700\u65b0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u306f\u516c\u5f0f\u3092\u53c2\u7167)\n\nuse\nsudo -H -uadmin brew doctor\n\n\n# \u524d\u63d0\n\n\u7b46\u8005\u306e PC \u306e\u30b9\u30da\u30c3\u30af\u3002\n\n*   OS: macOS Sierra\n*   \u30e6\u30fc\u30b6\u30fc\u30a2\u30ab\u30a6\u30f3\u30c8: \u4ee5\u4e0b\u306e2\u3064\n    *   \u7ba1\u7406\u8005 (\u4ee5\u4e0b admin) \u203b root \u3068\u306f\u5225\u7269\n    *   \u901a\u5e38\u4f7f\u7528 (\u4ee5\u4e0b myuser)\n*   Homebrew: Yosemite \u6642\u4ee3\u306b\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u305f(\u3068\u8a18\u61b6\u3057\u3066\u3044\u308b)\u3082\u306e\u3092\u4f7f\u3044\u7d9a\u3051\u3066\u307e\u3059\n\nHomebrew \u4f7f\u7528\u6642\u3060\u3051\u3001\u901a\u5e38\u4f7f\u7528\u30a2\u30ab\u30a6\u30f3\u30c8\u306e\u30bf\u30fc\u30df\u30ca\u30eb\u304b\u3089 `sudo -uadmin brew` \u306a\u3069\u3068\u3057\u3066\u4f7f\u7528\u3057\u3066\u3044\u307e\u3057\u305f\u3002\n\n----\n\n# \u60a9\u307f\u4e8b\n\nSierra \u306b\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3057\u3066\u4e45\u3057\u3044\u3042\u308b\u65e5\u3001 `brew install` \u3057\u3088\u3046\u3068\u3057\u305f\u3089\u4ee5\u4e0b\u306e\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\n\n```bash\n$ sudo -uadmin brew install bar\nError: Permission denied - /Users/myuser/Library \n```\n\n\u30a8\u30e9\u30fc\u6587\u3067\u30b0\u30b0\u3063\u3066\u3082\u6709\u529b\u306a\u60c5\u5831\u304c\u898b\u3064\u304b\u3089\u306a\u304b\u3063\u305f\u306e\u3067 formulae \u3092\u30e1\u30e2\u3063\u3066\u518d\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3002\n\n```bash:note-formulae\nbrew list > ~/Desktop/formulae.txt\n```\n\n```bash:reinstall\nsudo -uadmin ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall)\"\nsudo -uadmin ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\n(\u203b\u6700\u65b0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u306f[\u516c\u5f0f](http://brew.sh/)\u3092\u53c2\u7167)\n\n\u30a2\u30f3\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u306f\u3046\u307e\u304f\u3044\u3063\u305f\u3063\u307d\u3044\u306e\u3067\u3059\u304c\u3001(\u518d)\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u6642\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u304c\u51fa\u3066\u5931\u6557\u3057\u3066\u3057\u307e\u3044\u307e\u3057\u305f\u3002\n\n```\nwarning: unable to access '/Users/myuser/.config/git/attributes': Permission denied \n```\n\n----\n\n# \u539f\u56e0\n\n\u30b0\u30b0\u3063\u3066\u51fa\u3066\u304d\u305f\u60c5\u5831\u3092\u6539\u3081\u3066\u3058\u3063\u304f\u308a\u773a\u3081\u3066\u3044\u305f\u3089\u3001\u4ee5\u4e0b\u306e\u8a18\u4e8b\u304c\u53c2\u8003\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\nhttp://stackoverflow.com/a/27151021/7509299\n\n\u3069\u3046\u3084\u3089 `sudo` \u3059\u308b\u3068\u304d\u306b\u74b0\u5883\u5909\u6570 `$HOME` \u304c\u5143\u306e\u30e6\u30fc\u30b6\u30fc\u306e\u307e\u307e\u3060\u3063\u305f\u306e\u304c\u3044\u3051\u306a\u304b\u3063\u305f\u3089\u3057\u3044\u3067\u3059\u3002\n`sudo` \u3059\u308b\u3068\u304d\u306b `$HOME` \u306e\u5b9a\u7fa9\u304c\u5143\u306e\u307e\u307e\u3060\u3068\u3001 admin \u30e6\u30fc\u30b6\u30fc\u306e\u6a29\u9650\u3067 myuser \u306e\u30db\u30fc\u30e0\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u53c2\u7167\u3057\u3061\u3083\u3046\u3063\u3066\u3053\u3068\u3067\u3059\u306d\u3002\n\n```bash\n$ echo 'echo $HOME' | sudo -uadmin bash\n/Users/myuser\n```\n\n----\n\n# \u89e3\u6c7a\u65b9\u6cd5\n\n\u306a\u3093\u3068\u304b\u3059\u308b\u65b9\u6cd5\u306a\u3044\u304b\u3068 `man sudo` \u3057\u3066 'HOME' \u3092\u691c\u7d22\u2026\u3063\u3068\u3001\u3042\u308a\u307e\u3057\u305f!\n\n(\u4ee5\u4e0b `man 8 sudo` \u304b\u3089\u5f15\u7528)\n\n> <dl><dt>-H, --set-home</dt><dd>Request that the security policy set the HOME environment variable to the home directory specified by the target user's password database entry.  Depending on the policy, this may be the default behavior.</dd></dl>\n\n\u3064\u307e\u308a\u306f\u3053\u3046\u3044\u3046\u3053\u3068\n\n\n```bash\n$ echo 'echo $HOME' | sudo -uadmin bash\n/Users/myuser\n$ echo 'echo $HOME' | sudo -H -uadmin bash\n/Users/admin\n```\n\n\u3068\u3044\u3046\u308f\u3051\u3067 brew \u3059\u308b\u3068\u304d\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u3057\u305f\u3089\u3061\u3083\u3093\u3068\u52d5\u304d\u307e\u3057\u305f\u3002\n\n```bash:install\nsudo -H -uadmin ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n```\n\n(\u203b\u6700\u65b0\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30b3\u30de\u30f3\u30c9\u306f[\u516c\u5f0f](http://brew.sh/)\u3092\u53c2\u7167)\n\n```bash:use\nsudo -H -uadmin brew doctor\n```\n"}