{"tags": ["lisp", "Emacs"], "context": "Emacs Adevent Calendar 2016 \u306e 12/9 \u304c\u7a7a\u3060\u3063\u305f\u305f\u3081\u3001Emacs Lisp \u306e\u8c46\u77e5\u8b58\u3092\u5165\u308c\u307e\u3059\u3002\nEmacs Lisp\u3067\u306f\u3001\u5f15\u6570\u3092\u8a55\u4fa1\u3057\u306a\u3044\u7279\u6b8a\u5f62\u5f0f quote \u306f\u983b\u51fa\u3059\u308b\u305f\u3081\u3001 ' \u3067\u4ee3\u7528\u3067\u304d\u307e\u3059\u3002\n\u3059\u306a\u308f\u3061\u4ee5\u4e0b\u306e\uff12\u5f0f\u306f\u7b49\u4fa1\u3067\u3001\u4e0a\u5074\u306e\u5f0f\u306f\u62ec\u5f27\u304c\u4e0d\u8981\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n'a\n(quote a)\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u62ec\u5f27\u3092\u7701\u7565\u3067\u304d\u308b\u5f0f\u3068\u3057\u3066\u6271\u3048\u308b\u30b7\u30f3\u30dc\u30eb\u304c\u3001Emacs Lisp \u3067\u306f\u4ed6\u306b4\u3064\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\uff08\u3059\u3067\u306b backquote\u30de\u30af\u30ed\u3068\u3057\u3066\u5b9a\u7fa9\u6e08\u3067\u3059\uff09\n`a\n(\\` a)\n\n\u30ab\u30f3\u30de \uff08\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u5185\u3067\u3001\u7279\u6b8a\u30b7\u30f3\u30dc\u30eb\u3068\u3057\u3066\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\uff09\n,a\n(\\, a)\n\n\u30ab\u30f3\u30de\u30fb\u30a2\u30c3\u30c8\uff08\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u5185\u3067\u3001\u7279\u6b8a\u30b7\u30f3\u30dc\u30eb\u3068\u3057\u3066\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\uff09\n,@a\n(\\,@ a)\n\n\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\n,.a\n(\\,. a)\n\n\u4e0a\u8a18\u306e\u3046\u3061\u3001\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u4ee5\u5916\u306f\u3001\u95a2\u6570\u3084\u30de\u30af\u30ed\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u81ea\u5206\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\u306f1995\u5e74\u9803\u3001 Common Lisp \u306e\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u306e\u300c\u7834\u58ca\u7684\u306a\u30b9\u30d7\u30e9\u30a4\u30b7\u30f3\u30b0\u300d\u3068\u4e92\u63db\u6027\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306b Reader \u306b\u5c0e\u5165\u3055\u308c\u307e\u3057\u305f\u3002\u3057\u304b\u3057\u3001\u7834\u58ca\u7684\u306a\u30b9\u30d7\u30e9\u30a4\u30b7\u30f3\u30b0\u305d\u306e\u3082\u306e\u304c\u4f7f\u3044\u306b\u304f\u3068\u3044\u3046\u7406\u7531\u306e\u305f\u3081\u3001 backquote.el \u672c\u4f53\u306b\u306f\u5b9f\u88c5\u3055\u308c\u305a\u3001\u304b\u3068\u3044\u3063\u3066\u3001Reader \u304b\u3089\u3082\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\u306f\u524a\u9664\u3055\u308c\u305a\u3001\u653e\u7f6e\u72b6\u614b\u304c\u7d9a\u3044\u3066\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306b\u3001\u3053\u308c\u3089\u306e\u30b7\u30f3\u30dc\u30eb\u3092\u5c40\u6240\u7684\u306a\u95a2\u6570\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n(defun example (info)\n  (concat\n     \"name=\" (assoc-default :name info) \"\\n\"\n     \"address=\" (assoc-default :address info) \"\\n\"\n     \"tel=\" (assoc-default :tel info) \"\\n\"\n     ...))\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5f15\u6570\u304c\uff11\u3064\u3060\u3051\u7570\u306a\u308b\u95a2\u6570\u3092\u5927\u91cf\u306b\u547c\u3073\u51fa\u3059\u5834\u5408\u3001\u305d\u308c\u3092 cl-flet \u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u308b\u3068\n(defun example (info)\n  (cl-flet ((\\, (key) (assoc-default key info))))\n    (concat\n      \"name=\" ,:name \"\\n\"\n      \"address=\" ,:address \"\\n\"\n      \"tel=\" ,:tel \"\\n\"\n      ...)))\n\n\u3053\u306e\u3088\u3046\u306b\u30b3\u30fc\u30c9\u3092\u3059\u3063\u304d\u308a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\u30b3\u30fc\u30c9\u3092\u5909\u6570\u5316\u3057\u3001\u5225\u306b\u5206\u96e2\u3059\u308b\u969b\u306b\u306f\u3001 eval \u6642\u306b backquote \u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u9762\u304c\u3057\u3070\u3057\u3070\u3042\u308b\u305f\u3081\u3001 backquote \u30de\u30af\u30ed\u306b\u5f71\u97ff\u3055\u308c\u306a\u3044\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\u306f\u7279\u306b\u6709\u7528\u3067\u3059\u3002\n(defvar info\n  '((:name . \"hoge\") (:address . \"page\") (:tel . \"num\")))\n\n;; \u3053\u3053\u3067 format \u3092\u5909\u6570\u3068\u3057\u3066\u5206\u96e2\u3057\u305f\u3044\u3002\n(defvar format\n  '(\"name=\" ,.:name \"\\n\"\n    \"address=\" ,.:address \"\\n\"\n    \"tel=\" ,.:tel \"\\n\"))\n\n;; \u5b9f\u969b\u306e\u8a55\u4fa1\n(defun example (info)\n  \"Test INFO.\"\n  (eval `(cl-flet ((\\,. (key) (assoc-default key info)))\n           ,(cons 'concat format)) t))\n\nEmacs Adevent Calendar 2016 \u306e 12/9 \u304c\u7a7a\u3060\u3063\u305f\u305f\u3081\u3001Emacs Lisp \u306e\u8c46\u77e5\u8b58\u3092\u5165\u308c\u307e\u3059\u3002\n\nEmacs Lisp\u3067\u306f\u3001\u5f15\u6570\u3092\u8a55\u4fa1\u3057\u306a\u3044\u7279\u6b8a\u5f62\u5f0f `quote` \u306f\u983b\u51fa\u3059\u308b\u305f\u3081\u3001 `'` \u3067\u4ee3\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u3059\u306a\u308f\u3061\u4ee5\u4e0b\u306e\uff12\u5f0f\u306f\u7b49\u4fa1\u3067\u3001\u4e0a\u5074\u306e\u5f0f\u306f\u62ec\u5f27\u304c\u4e0d\u8981\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u3002\n\n````lisp\n'a\n(quote a)\n````\n\n\u3053\u306e\u3088\u3046\u306b\u3001\u62ec\u5f27\u3092\u7701\u7565\u3067\u304d\u308b\u5f0f\u3068\u3057\u3066\u6271\u3048\u308b\u30b7\u30f3\u30dc\u30eb\u304c\u3001Emacs Lisp \u3067\u306f\u4ed6\u306b4\u3064\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\uff08\u3059\u3067\u306b backquote\u30de\u30af\u30ed\u3068\u3057\u3066\u5b9a\u7fa9\u6e08\u3067\u3059\uff09\n\n````lisp\n`a\n(\\` a)\n````\n\n\u30ab\u30f3\u30de \uff08\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u5185\u3067\u3001\u7279\u6b8a\u30b7\u30f3\u30dc\u30eb\u3068\u3057\u3066\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\uff09\n\n````lisp\n,a\n(\\, a)\n````\n\n\u30ab\u30f3\u30de\u30fb\u30a2\u30c3\u30c8\uff08\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u5185\u3067\u3001\u7279\u6b8a\u30b7\u30f3\u30dc\u30eb\u3068\u3057\u3066\u5229\u7528\u3055\u308c\u3066\u3044\u307e\u3059\uff09\n\n````lisp\n,@a\n(\\,@ a)\n````\n\n\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\n\n````lisp\n,.a\n(\\,. a)\n````\n\n\u4e0a\u8a18\u306e\u3046\u3061\u3001\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u4ee5\u5916\u306f\u3001\u95a2\u6570\u3084\u30de\u30af\u30ed\u3068\u3057\u3066\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u81ea\u5206\u3067\u5229\u7528\u3067\u304d\u307e\u3059\u3002\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\u306f1995\u5e74\u9803\u3001 Common Lisp \u306e\u30d0\u30c3\u30af\u30af\u30a9\u30fc\u30c8\u306e\u300c\u7834\u58ca\u7684\u306a\u30b9\u30d7\u30e9\u30a4\u30b7\u30f3\u30b0\u300d\u3068\u4e92\u63db\u6027\u3092\u6301\u305f\u305b\u308b\u305f\u3081\u306b Reader \u306b\u5c0e\u5165\u3055\u308c\u307e\u3057\u305f\u3002\u3057\u304b\u3057\u3001\u7834\u58ca\u7684\u306a\u30b9\u30d7\u30e9\u30a4\u30b7\u30f3\u30b0\u305d\u306e\u3082\u306e\u304c\u4f7f\u3044\u306b\u304f\u3068\u3044\u3046\u7406\u7531\u306e\u305f\u3081\u3001 backquote.el \u672c\u4f53\u306b\u306f\u5b9f\u88c5\u3055\u308c\u305a\u3001\u304b\u3068\u3044\u3063\u3066\u3001Reader \u304b\u3089\u3082\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\u306f\u524a\u9664\u3055\u308c\u305a\u3001\u653e\u7f6e\u72b6\u614b\u304c\u7d9a\u3044\u3066\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306b\u3001\u3053\u308c\u3089\u306e\u30b7\u30f3\u30dc\u30eb\u3092\u5c40\u6240\u7684\u306a\u95a2\u6570\u3068\u3057\u3066\u5229\u7528\u3059\u308b\u4f8b\u3092\u793a\u3057\u307e\u3059\u3002\n\n````lisp\n(defun example (info)\n  (concat\n     \"name=\" (assoc-default :name info) \"\\n\"\n     \"address=\" (assoc-default :address info) \"\\n\"\n     \"tel=\" (assoc-default :tel info) \"\\n\"\n     ...))\n````\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u5f15\u6570\u304c\uff11\u3064\u3060\u3051\u7570\u306a\u308b\u95a2\u6570\u3092\u5927\u91cf\u306b\u547c\u3073\u51fa\u3059\u5834\u5408\u3001\u305d\u308c\u3092 cl-flet \u3067\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u7f6e\u304d\u63db\u3048\u308b\u3068\n\n````lisp\n(defun example (info)\n  (cl-flet ((\\, (key) (assoc-default key info))))\n    (concat\n      \"name=\" ,:name \"\\n\"\n      \"address=\" ,:address \"\\n\"\n      \"tel=\" ,:tel \"\\n\"\n      ...)))\n````\n\n\u3053\u306e\u3088\u3046\u306b\u30b3\u30fc\u30c9\u3092\u3059\u3063\u304d\u308a\u3055\u305b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u30b3\u30fc\u30c9\u3092\u5909\u6570\u5316\u3057\u3001\u5225\u306b\u5206\u96e2\u3059\u308b\u969b\u306b\u306f\u3001 eval \u6642\u306b backquote \u3092\u5fc5\u8981\u3068\u3059\u308b\u5834\u9762\u304c\u3057\u3070\u3057\u3070\u3042\u308b\u305f\u3081\u3001 backquote \u30de\u30af\u30ed\u306b\u5f71\u97ff\u3055\u308c\u306a\u3044\u30ab\u30f3\u30de\u30fb\u30c9\u30c3\u30c8\u306f\u7279\u306b\u6709\u7528\u3067\u3059\u3002\n\n````lisp\n(defvar info\n  '((:name . \"hoge\") (:address . \"page\") (:tel . \"num\")))\n\n;; \u3053\u3053\u3067 format \u3092\u5909\u6570\u3068\u3057\u3066\u5206\u96e2\u3057\u305f\u3044\u3002\n(defvar format\n  '(\"name=\" ,.:name \"\\n\"\n    \"address=\" ,.:address \"\\n\"\n    \"tel=\" ,.:tel \"\\n\"))\n\n;; \u5b9f\u969b\u306e\u8a55\u4fa1\n(defun example (info)\n  \"Test INFO.\"\n  (eval `(cl-flet ((\\,. (key) (assoc-default key info)))\n           ,(cons 'concat format)) t))\n````\n"}