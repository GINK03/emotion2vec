{"context": "\n\n\u306f\u3058\u3081\u306b\nES6 (EcmaScript 6)\u3092\u8a66\u305d\u3046\u3068\u3001Babel\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u3044\u305f\u3068\u3053\u308d\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\uff08Tail Call\uff09\u306e\u6700\u9069\u5316\u3092\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u3073\u3063\u304f\u308a\u3002\u516c\u5f0f\u30ea\u30ea\u30fc\u30b9\uff082015\u5e746\u6708\uff09\u304b\u3089\uff13\u30f6\u6708\u3042\u307e\u308a\u7d4c\u3063\u3066\u306f\u3044\u307e\u3059\u304c\u3001ES6\u304c\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u4ed5\u69d8\u3068\u3057\u3066\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u3088\u3046\u3084\u304f\u77e5\u308a\u307e\u3057\u305f\u3002\n\u73fe\u72b6\u3067\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\u306f\u306a\u304f\uff08\u30d6\u30e9\u30a6\u30b6\u3084altJS\u306a\u3069\u306eES6\u4e92\u63db\u8868\u3092\u53c2\u7167\uff09\u3001\u552f\u4e00\u3001ES6\u304b\u3089ES5\u3078\u306e\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30e9\u3067\u3042\u308bBabel\u306e\u307f\u304c\u90e8\u5206\u7684\uff08\u76f4\u63a5\u7684\u306a\u672b\u5c3e\u518d\u5e30\u306e\u307f\uff09\u3067\u306f\u3042\u308a\u306a\u304c\u3089\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n\u4eca\u56de\u306e\u8a18\u4e8b\u3067\u306f\u3001\u6765\u305f\u308bES6\u6642\u4ee3\uff08\u3044\u307e\u3055\u3089\u306e\u611f\u306f\u3042\u308a\u307e\u3059\u304c\uff09\u306b\u5099\u3048\u3066\u3001\u672b\u5c3e\u518d\u5e30\u3068\u305d\u306e\u6700\u9069\u5316\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u89e3\u8aac\u3057\u305f\u4e0a\u3067\u3001Babel\u3092\u5229\u7528\u3057\u3066\u5b9f\u969b\u306bJavaScript\u3067\u306e\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u3092\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n\u3056\u3063\u304f\u308a\u6982\u8981\n\n\n\u518d\u5e30\u95a2\u6570 \u306f\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u968e\u6570\u304c\u6df1\u304f\u306a\u308a\u3059\u304e\u308b\u3068 \u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc \u304c\u767a\u751f\u3059\u308b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u30b3\u30fc\u30c9\u6700\u9069\u5316 \u6280\u8853\u306b\u3088\u308a\u3001\u518d\u5e30\u95a2\u6570\u3092 \u672b\u5c3e\u518d\u5e30 \u306b\u5909\u63db\u3059\u308b\u3068\u3053\u306e\u554f\u984c\u306f\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\n\u305f\u3060\u3057\u3001\u30b3\u30fc\u30c9\u6700\u9069\u5316\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u74b0\u5883\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u3068\u305d\u306e\u6069\u6075\u3092\u53d7\u3051\u3089\u308c\u307e\u305b\u3093\u3002\n\u6b21\u4e16\u4ee3JavaScript\u306e\u4ed5\u69d8\u3068\u306a\u308bES6\u3067\u306f \u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u30b3\u30fc\u30c9\u6700\u9069\u5316\u304c\u4ed5\u69d8\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\u305d\u306e\u305f\u3081\u3001\u5404\u30d6\u30e9\u30a6\u30b6\u3084node.js\u306a\u3069\u306e\u5b9f\u884c\u74b0\u5883\u306f\u3001ES6\u306b\u6e96\u62e0\u3059\u308b\u306b\u306f\u30b3\u30fc\u30c9\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n\u73fe\u6642\u70b9\uff082015/10\uff09\u3067\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\uff08\u5b9f\u884c\u74b0\u5883\uff09\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\u305f\u3060\u3057\u3001ES6\u304b\u3089ES5\u3078\u306e\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30e9\u3067\u3042\u308b Babel \u306f\u5236\u9650\u4ed8\u304d\u306a\u304c\u3089\u6700\u9069\u5316\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\nBabel\u306fES6\u306e\u672b\u5c3e\u518d\u5e30\u306e\u30b3\u30fc\u30c9\u3092\u901a\u5e38\u306e\u30eb\u30fc\u30d7\uff08while\u306a\u3069\uff09\u306b\u3088\u308b\u30b3\u30fc\u30c9\u306b\u5909\u63db\u3057\u307e\u3059\u3002\n\n\n\u518d\u5e30\u95a2\u6570\u306e\u554f\u984c\n\n\u518d\u5e30\u95a2\u6570\n\u81ea\u5206\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\u95a2\u6570\u3092 \u518d\u5e30\u95a2\u6570\uff08recursive function\uff09 \u3068\u547c\u3073\u307e\u3059\u3002\u3088\u304f\u3042\u308b\u4f8b\u3067\u3059\u304c\u3001\u4e0e\u3048\u3089\u308c\u305f\u6570n\u306e\u968e\u4e57\uff081\u304b\u3089n\u307e\u3067\u306e\u3059\u3079\u3066\u306e\u6570\u5024\u306e\u7a4d\uff09\u3092\u8a08\u7b97\u3059\u308b\u4ee5\u4e0b\u306e\u95a2\u6570factorial\u306f\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\nfunction factorial(n) {\n    if (n === 0) {\n        return 1;\n    }\n    return n * factorial(n - 1); // \u81ea\u5206\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n}\n\nconsole.log(factorial(3)); // 6\u3068\u306a\u308b\n\n\n\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\n\u518d\u5e30\u95a2\u6570\u306f\u81ea\u5206\u81ea\u8eab\u3092\u518d\u5e30\u7684\u306b\u547c\u3073\u51fa\u3059\u305f\u3081\u3001\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u6df1\u304f\u306a\u308a\u304c\u3061\u3067\u3059\u3002\u5185\u90e8\u7684\u306b\u306f\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u3054\u3068\u306b\u30e1\u30e2\u30ea\u9818\u57df\u304c\u6d88\u8cbb\u3055\u308c\u308b\u305f\u3081\u3001\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u6df1\u304f\u306a\u308a\u3059\u304e\u308b\u3068\u5b9f\u884c\u6642\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u5b9f\u969b\u3001\u4e0a\u8a18\u306efactorial\u95a2\u6570\u3092\u624b\u5143\u306enode.js\uff08v0.12.6\uff09\u4e0a\u3067\u5b9f\u884c\u3057\u305f\u3068\u3053\u308d\u3001\u5f15\u6570\u304c100000\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3057\u305f\u3002\uff08Infinity\u306f\u6570\u5024\u306e\u4e0a\u9650\u3092\u8d85\u3048\u305f\u304b\u3089\u3067\u3059\u3002\u4eca\u56de\u306e\u30a8\u30e9\u30fc\u3068\u306f\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u3002\uff09\n> function factorial(n) {\n...     if (n === 0) {\n.....         return 1;\n.....     }\n...     return n * factorial(n - 1);\n... }\nundefined\n> factorial(100);\n9.33262154439441e+157\n> factorial(1000);\nInfinity\n> factorial(10000);\nInfinity\n> factorial(100000);\nRangeError: Maximum call stack size exceeded\n    at factorial (repl)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n> \n\nfactorial(100000)\u306e\u7d50\u679c\u3068\u3057\u3066\u3001\"RangeError: Maximum call stack size exceeded\"\uff08\u30b9\u30bf\u30c3\u30af\u306e\u4e0a\u9650\u3092\u8d85\u3048\u305f\u3088\uff01\uff09\u3068\u3042\u308a\u307e\u3059\u3088\u306d\u3002\u3053\u308c\u306f\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u4e0a\u9650\u3092\u8d85\u3048\u305f\u3053\u3068\u3092\u8868\u3059\u5b9f\u884c\u30a8\u30e9\u30fc\u3067\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u4e00\u822c\u7684\u306b \u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc \u3068\u547c\u3073\u307e\u3059\u3002\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306b\u95a2\u4fc2\u306a\u304f\u3001\u30d7\u30ed\u30b0\u30e9\u30de\u306a\u3089\u3070\u4e00\u5ea6\u306f\u906d\u9047\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u30a8\u30e9\u30fc\u3067\u3059\u3088\u306d\u3002\n\n\u89e3\u6c7a\u65b9\u6cd5\u306f\uff1f\n\u4e00\u3064\u306e\u65b9\u6cd5\u306f\u3001\u518d\u5e30\u3092\u901a\u5e38\u306e\u30eb\u30fc\u30d7\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3067\u3059\u3002\u4ee5\u4e0b\u306f\u3001for\u30eb\u30fc\u30d7\u3092\u4f7f\u7528\u3057\u305ffactorial\u306e\u5b9f\u88c5\u3067\u3059\u3002\u3053\u306e\u95a2\u6570\u306f\u5f15\u6570\u306e\u5927\u304d\u3055\u306b\u304b\u304b\u308f\u3089\u305a\u3001\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u968e\u5c64\u306f\u4e00\u5b9a\uff08\uff11\u3064\u3060\u3051\uff09\u306a\u306e\u3067\u3001\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u767a\u751f\u3057\u307e\u305b\u3093\u3002\nfunction factorial(n) {\n    var result = 1;\n    for (var i = 1; i <= n; i++) {\n        result = result * i;\n    }\n    return result;\n}\n\n\u5b9f\u969b\u3001\u5f15\u6570100000\u3067\u5b9f\u884c\u3057\u3066\u3082\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n> function factorial(n) {\n... var result = 1;\n... for (var i = 1; i <= n; i++) {\n..... result = result * i;\n..... }\n... return result;\n... }\nundefined\n> factorial(100000);\nInfinity\n> \n\n\n\u7d50\u5c40\u518d\u5e30\u95a2\u6570\u3063\u3066\u4f7f\u3048\u306a\u3044\u306e\uff1f\n\u3053\u308c\u307e\u3067\u306eJavaScript\u306b\u5bfe\u3059\u308b\u7b54\u3048\u3068\u3057\u3066\u306f\u3001\u300c\u306f\u3044\u3002\u6ce8\u610f\u3057\u3066\u4f7f\u7528\u3057\u306a\u3044\u3068\u3060\u3081\u3067\u3059\u3002\u300d \u3068\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u4e0a\u8a18\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3001\u518d\u5e30\u304c\u3042\u307e\u308a\u306b\u3082\u6df1\u304f\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3059\u308b\u306a\u3069\u3001\u9650\u5b9a\u7684\u306a\u72b6\u6cc1\u3067\u3057\u304b\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u6b21\u4e16\u4ee3\u306eJavaScript\uff08ES6\uff09\u306b\u5bfe\u3059\u308b\u7b54\u3048\u3068\u3057\u3066\u306f\u3001\u300c\u3044\u3044\u3048\u3002\u305d\u3093\u306a\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u672b\u5c3e\u518d\u5e30\u306b\u5909\u63db\u3059\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u3002\u300d \u3068\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u518d\u5e30\u95a2\u6570\u306f \u672b\u5c3e\u518d\u5e30 \u3068\u547c\u3070\u308c\u308b\u7279\u6b8a\u306a\u5f62\u306e\u518d\u5e30\u95a2\u6570\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u672b\u5c3e\u518d\u5e30\u306b\u3059\u308b\u3068\u3001 \u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316 \u3068\u547c\u3070\u308c\u308b\u30b3\u30fc\u30c9\u6700\u9069\u5316\u6280\u8853\u306e\u6069\u6075\u3092\u53d7\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u30b3\u30fc\u30c9\u6700\u9069\u5316\u306e\u6280\u8853\u306b\u3088\u308a\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u767a\u751f\u3057\u306a\u304f\u306a\u308a\u307e\u3059\u3002ES6\u306f\u4ed5\u69d8\u3068\u3057\u3066\u3001JavaScript\u306e\u5b9f\u884c\u74b0\u5883\u5074\u306b\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u8981\u6c42\u3057\u3066\u3044\u308b\u305f\u3081\u3001ES6\u306b\u6e96\u62e0\u3057\u305f\u30d6\u30e9\u30a6\u30b6\u3084\u5b9f\u884c\u74b0\u5883\u3067\u3042\u308c\u3070\u672b\u5c3e\u518d\u5e30\u3092\u5229\u7528\u3059\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u3002\n\u3067\u306f\u3001\u4ee5\u964d\u3067\u306f\u672b\u5c3e\u518d\u5e30\u3084\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u6280\u8853\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u307f\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\n\u3042\u308b\u95a2\u6570f\u304c\u3001\u5225\u306e\u95a2\u6570g\u3092\u547c\u3073\u51fa\u3059\u3068\u3057\u307e\u3059\u3002g\u306e\u547c\u3073\u51fa\u3057\u304cf\u306e\u30ea\u30bf\u30fc\u30f3\u524d\u306e\u6700\u5f8c\u306e\u51e6\u7406\u3067\u3042\u308b\u3068\u304d\u3001g\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u3092 \u672b\u5c3e\u547c\u3073\u51fa\u3057\uff08tail call\uff09 \u3068\u547c\u3073\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u6b21\u306e\u95a2\u6570f\u306b\u304a\u3044\u3066\u3001\u95a2\u6570g\u306e\u5b9f\u884c\u5f8c\u306b\u305d\u306e\u7d50\u679c\u3092f\u306f\u30ea\u30bf\u30fc\u30f3\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u3001g\u306e\u547c\u3073\u51fa\u3057\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u306a\u308a\u307e\u3059\u3002\nfunction f() {\n    return g(); // g()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\n}\n\n\u4ee5\u4e0b\u306eg\u304a\u3088\u3073h\u306e\u547c\u3073\u51fa\u3057\u3082\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u306a\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001b\u306e\u547c\u3073\u51fa\u3057\u5f8c\u306bf\u306e\u51e6\u7406\u304c\u7d9a\u304f\u305f\u3081\u3001b\u306e\u547c\u3073\u51fa\u3057\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u308a\u307e\u305b\u3093\u3002\nfunction f() {\n    if (b()) { // b()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\n        return g(); // g()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\n    }\n    else {\n        return h(); // h()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\n    }\n}\n\n\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e0a\u3001h\u306e\u547c\u3073\u51fa\u3057\u306ff\u306e\u6700\u5f8c\u306b\u3042\u308a\u307e\u3059\u304c\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u306a\u305c\u306a\u3089\u3001h\u306e\u547c\u3073\u51fa\u3057\u5f8c\u306b+\u306b\u3088\u308b\u52a0\u7b97\u51e6\u7406\u304c\u7d9a\u304f\u305f\u3081\u3067\u3059\u3002\nfunction f() {\n    return g() + h(); // h()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\u3002\u5f53\u7136\u306a\u304c\u3089g()\u3082\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\u3002\n}\n\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\u901a\u5e38\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u30e2\u30c7\u30eb\u3067\u306f\u3001\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3068\u3001\u95a2\u6570\u81ea\u8eab\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff08\u5f15\u6570\u3084\u5c40\u6240\u5909\u6570\uff09\u3084\u623b\u308a\u5148\u60c5\u5831\u3092\u4fdd\u6301\u3059\u308b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff08\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ec\u30b3\u30fc\u30c9\uff09\u304c\u751f\u6210\u3055\u308c\u3066\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u3068\u547c\u3070\u308c\u308b\u30b9\u30bf\u30c3\u30af\u306bpush\u3055\u308c\u307e\u3059\u3002\u95a2\u6570\u306f\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306b\u8a08\u7b97\u9014\u4e2d\u306e\u5024\u3092\u4fdd\u6301\u3057\u3064\u3064\u51e6\u7406\u3092\u7d9a\u3051\u307e\u3059\u3002\u95a2\u6570\u306e\u5b9f\u884c\u304c\u7d42\u308f\u308b\u3068\u5bfe\u5fdc\u3059\u308b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpop\u3055\u308c\u3066\u547c\u3073\u51fa\u3057\u5143\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306b\u5fa9\u5e30\u3057\u3001\u547c\u3073\u51fa\u3057\u5143\u95a2\u6570\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u984c\u6750\u3068\u3057\u3066\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u52d5\u304d\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\nfunction squareSum(x) {\n    var xs = square(x); //(A)\n    var result = sum(xs); //(B)\n    return result; //(C)\n}\n\nfunction square(n) {\n    return n * n;\n}\n\nfunction sum(n) {\n    return n + n;\n}\n\n//\u7d50\u679c\u306f8\nsquareSum(2); //(X)\n\n\n\u8868\u8a18\n\u4ee5\u4e0b\u3067\u306f\u3001\u95a2\u6570f\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092f:{x:1, y:2}:returnTo:\u623b\u308a\u5148\u306e\u4f4d\u7f6e\u3067\u8868\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u3001x\u3068y\u306ff\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff08\u5f15\u6570\u3092\u542b\u3080\uff09\u3068\u3057\u3001\u305d\u308c\u305e\u308c\u50241\u30682\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002f\u95a2\u6570\u306e\u7d42\u4e86\u6642\u306e\u623b\u308a\u5148\u306freturnTo\u304c\u8868\u3059\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\n\u3055\u3066\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u958b\u59cb\u6642\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u7a7a\u3067\u3059\u3002\uff08X\uff09\u306e\u4f4d\u7f6e\u3067squareSum\u95a2\u6570\u304c\u5f15\u65702\u3067\u547c\u3073\u51fa\u3055\u308c\u305f\u76f4\u5f8c\u306f\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306bsquareSum\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpush\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u5c40\u6240\u5909\u6570xs\u3068result\u306f\u307e\u3060\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u623b\u308a\u5148\u306b\u306f\u4f4d\u7f6e(X)\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nsqureSum:{x:2, xs:undefined, result:undefined}:returnTo:(X)\n\n\n\n\u6b21\u306b\u3001(A)\u3067suqare\u95a2\u6570\u304c\u5f15\u65702(=x)\u3067\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306b\u306f\u5f15\u6570n\u304c2\u3067\u521d\u671f\u5316\u3055\u308c\u305f\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpush\u3055\u308c\u307e\u3059\u3002\u95a2\u6570\u7d42\u4e86\u5f8c\u306b\u623b\u308a\u5148\u306f(A)\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nsquare:{n:2}:returnTo:(A)\n\n\nsqureSum:{x:2, xs:undefined, result:undefined}:returnTo:(X)\n\n\n\n\u95a2\u6570square\u306fn\u306e\u4e8c\u4e57\u3092\u8a08\u7b97\u3057\u305f\u5f8c\u3001\u547c\u3073\u51fa\u3057\u5143\u306esquareSum\u306b\u623b\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u3001square\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306fpop\u3055\u308c\u3066\u3001\u547c\u3073\u51fa\u3057\u5143\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306exs\u306b\u306fsquare\u306e\u8a08\u7b97\u7d50\u679c4\u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002returnTo\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u305f(A)\u306e\u4f4d\u7f6e\u304b\u3089\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nsqureSum:{x:2, xs:4, result:undefined}:returnTo(X)\n\n\n\n\u6b21\u306b\u3001\u4f4d\u7f6e(B)\u3067sum\u95a2\u6570\u304c\u5f15\u65704(=xs)\u3067\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nsum:{n:4}:returnTo:(B)\n\n\nsqureSum:{x:2, xs:4, result:undefined}:returnTo(X)\n\n\n\n\u95a2\u6570sum\u306e\u5b9f\u884c\u304c\u7d42\u4e86\u3059\u308b\u3068\u3001sum\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306fpop\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001result\u306e\u5024\u306fsum\u306e\u5b9f\u884c\u7d50\u679c\u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002returnTo\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u305f(B)\u306e\u4f4d\u7f6e\u304b\u3089\u3001squareSum\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nsqureSum:{x:2, xs:4, result:8}:returnTo(X)\n\n\n\n\u6700\u5f8c\u306bsquareSum\u306fresult\u306e\u50248\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u3066\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u4f4d\u7f6e(X)\u306b\u623b\u3063\u3066\u7d42\u4e86\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u7a7a\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\n\u4e0a\u8a18\u306esquareSum\u95a2\u6570\u306f\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306b\u8a08\u7b97\u9014\u4e2d\u306e\u5024\uff08xs\u3084result\uff09\u3092\u4fdd\u6301\u3057\u3066\u5b9f\u884c\u3092\u7d9a\u3051\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306b\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u95a2\u6570\u306e\u5b9f\u884c\u9014\u4e2d\u306e\u5024\u3092\u4fdd\u6301\u3059\u308b\u4e00\u6642\u9818\u57df\u3068\u3057\u3066\u306e\u5f79\u5272\u3092\u6301\u3061\u307e\u3059\u304c\u3001\u518d\u5e30\u95a2\u6570\u306e\u4f8b\u3067\u65e2\u306b\u307f\u305f\u3088\u3046\u306b\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u3042\u307e\u308a\u306b\u3082\u6df1\u304f\u306a\u308b\u3068\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u6570\u304c\u5927\u304d\u304f\u306a\u308a\u3001\u30e1\u30e2\u30ea\u9818\u57df\u3092\u98df\u3044\u3064\u3076\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u4e0d\u8981\u306a\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u751f\u6210\u306f\u3067\u304d\u308c\u3070\u907f\u3051\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u95a2\u6570\u306e\u8a08\u7b97\u9014\u4e2d\u306e\u5024\u3092\u4fdd\u6301\u3059\u308b\u306e\u306b\u5fc5\u8981\u3067\u3059\u304c\u3001\u8a00\u3044\u63db\u3048\u308b\u3068\u3001\u8a08\u7b97\u9014\u4e2d\u306e\u5024\u304c\u305d\u308c\u4ee5\u4e0a\u4f7f\u7528\u3055\u308c\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3082\u4e0d\u8981\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u95a2\u6570\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306b\u7740\u76ee\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3042\u308b\u95a2\u6570f\u304c\u5225\u306e\u95a2\u6570g\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3057\u3066\u3044\u308b\u3068\u304d\u3001f\u306e\u7d50\u679c\uff08\u30ea\u30bf\u30fc\u30f3\u5024\uff09\u306fg\u306e\u7d50\u679c\u305d\u306e\u3082\u306e\u3067\u3059\u3002\u3064\u307e\u308a\u3001g\u306e\u547c\u3073\u51fa\u3057\u5f8c\u306bf\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002\u3057\u305f\u304c\u3063\u3066\u3001g\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092\u65b0\u305f\u306b\u751f\u6210\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001f\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092g\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3068\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u3053\u308c\u3092 \u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\uff08tail call elimination\uff09 \u3068\u547c\u3073\u307e\u3059\u3002\u30b3\u30f3\u30d1\u30a4\u30e9\u3084\u5b9f\u884c\u74b0\u5883\u304c\u884c\u3046\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092 \u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\uff08tail call optimization\uff09 \u3068\u3044\u3044\u307e\u3059\u3002\n\u4ee5\u4e0b\u306e\u7c21\u5358\u306a\u30b3\u30fc\u30c9\u3092\u307f\u3066\u304f\u3060\u3055\u3044\u3002foo\u306fsum\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3057\u3066\u3044\u307e\u3059\u3002\nfunction foo(x) {\n    return sum(x, x); // (A)\n}\n\nfunction sum(a, b) {\n    return a + b;\n}\n\nfoo(2); // (X)\n\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u308f\u306a\u3044\u30b1\u30fc\u30b9\n\u3053\u306e\u30b3\u30fc\u30c9\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u52d5\u304d\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u308f\u306a\u3044\u901a\u5e38\u306e\u30b1\u30fc\u30b9\u3067\u3059\u3002\n\u4f4d\u7f6e(X)\u3067foo\u3092\u547c\u3073\u51fa\u3057\u305f\u76f4\u5f8c\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfoo:{x:2}:returnTo:(X)\n\n\n\n\u6b21\u306b\u3001(A)\u306e\u4f4d\u7f6e\u3067sum\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u305f\u76f4\u5f8c\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nsum:{a:2, b:2}:returnTo:(A)\n\n\nfoo:{x:2}:returnTo:(X)\n\n\n\n\u95a2\u6570sum\u304c\u7d42\u4e86\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpop\u3055\u308c\u3001returnTo\u304c\u793a\u3059(A)\u306e\u4f4d\u7f6e\u304b\u3089foo\u306e\u95a2\u6570\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001sum\u306e\u623b\u308a\u5024\u3092\u4fdd\u6301\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u7684\u306a\u9818\u57df\u304c\u5185\u90e8\u7684\u306b\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u3053\u306e\u4f8b\u3067\u306f_tmp\u5909\u6570\u306bsum\u306e\u623b\u308a\u5024\u304c\u683c\u7d0d\u3055\u308c\u308b\u3068\u3057\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfoo:{x:2, _tmp:4}:returnTo:(X)\n\n\n\n\u6700\u5f8c\u306bfoo\u306f_tmp\u306e\u5024\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u3066\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u3046\u30b1\u30fc\u30b9\n\u6b21\u306b\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u3046\u5834\u5408\u306e\u6319\u52d5\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u307e\u305a\u3001foo\u306e\u547c\u3073\u51fa\u3057\u76f4\u5f8c\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfoo:{x:2}:returnTo:(X)\n\n\n\n\u6b21\u306b\u3001(A)\u3067sum\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\u901a\u5e38\uff08\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u308f\u306a\u3044\u5834\u5408\uff09\u306f\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304c\u751f\u6210\u3055\u308c\u3066push\u3055\u308c\u308b\u3053\u3068\u308d\u3067\u3059\u304c\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u3046\u5834\u5408\u3001foo\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092sum\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u3068\u3057\u3066\u518d\u5229\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u3001foo\u306e\u623b\u308a\u5148\u3068\u3057\u3066\u3001sum\u306e\u623b\u308a\u5148\uff08X\uff09\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3053\u3068\u306b\u6ce8\u76ee\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3064\u307e\u308a\u3001sum\u306e\u30ea\u30bf\u30fc\u30f3\u5024\uff08\u5b9f\u884c\u7d50\u679c\uff09\u304c\u305d\u306e\u307e\u307efoo\u306e\u30ea\u30bf\u30fc\u30f3\u5024\u3068\u306a\u308b\u306e\u3067\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nsum:{a:2, b:2}:returnTo:(X)\n\n\n\n\u95a2\u6570sum\u306f\u8a08\u7b97\u7d50\u679c4\u3092returnTo\u304c\u793a\u3059\u4f4d\u7f6e(X)\u306b\u30ea\u30bf\u30fc\u30f3\u3057\u307e\u3059\u3002\n\n\u672b\u5c3e\u518d\u5e30\u3068\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\n\n\u672b\u5c3e\u518d\u5e30\n\u518d\u5e30\u95a2\u6570\u306e\u3046\u3061\u3001\u81ea\u5206\u81ea\u8eab\u306e\u547c\u3073\u51fa\u3057\u304c\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u306a\u3063\u3066\u3044\u308b\u518d\u5e30\u95a2\u6570\u3092 \u672b\u5c3e\u518d\u5e30\uff08tail recursive\uff09 \u3068\u547c\u3073\u307e\u3059\u3002\n\u672c\u8a18\u4e8b\u306e\u6700\u521d\u306b\u4f8b\u793a\u3057\u305f\u4ee5\u4e0b\u306e\u968e\u4e57\u8a08\u7b97\u95a2\u6570\u306f\u81ea\u5206\u81ea\u8eab\u3092\u518d\u5e30\u547c\u3073\u51fa\u3057\u3057\u305f\u3042\u3068\u3001*\u306b\u3088\u308b\u6f14\u7b97\u3092\u884c\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\uff08\u3064\u307e\u308a\u3001\u672b\u5c3e\u518d\u5e30\uff09\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u518d\u5e30\u95a2\u6570\uff08\u672b\u5c3e\u518d\u5e30\u3067\u306f\u306a\u3044\uff09\nfunction factorial(n) {\n    if (n === 0) {\n        return 1;\n    }\n    return n * factorial(n - 1); // \u81ea\u5206\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3057\u305f\u5f8c\u306b\u3001* \u306b\u3088\u308b\u6f14\u7b97\u3092\u884c\u3063\u3066\u3044\u308b\u306e\u3067\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\u3002\n}\n\n\u3053\u306e\u95a2\u6570\u3092\u3092\u672b\u5c3e\u518d\u5e30\u306b\u66f8\u304d\u76f4\u3057\u305f\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u5185\u90e8\u95a2\u6570factorialTailCall\u306f\u81ea\u5206\u81ea\u8eab\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3057\u3066\u3044\u307e\u3059\u3002\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u6f14\u7b97\u7d50\u679c\u3092\u95a2\u6570\u306e\u5f15\u6570\u3068\u3057\u3066\u7d2f\u7a4d\u3057\u3066\u304f\u3068\u3053\u308d\u3067\u3059\u3002\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\uff08\u672b\u5c3e\u518d\u5e30\u30d0\u30fc\u30b8\u30e7\u30f3\uff09\nfunction factorial(n) {\n\n    // \u672b\u5c3e\u518d\u5e30\u95a2\u6570\n    function factorialTailCall(n, accum) {\n        if (n === 0) {\n            return accum;\n        }\n        return factorialTailCall(n - 1, n * accum); // \u81ea\u5206\u81ea\u8eab\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\n    }\n\n    var result = factorialTailCall(n, 1); // (Y)\n\n    return result;\n}\n\nconsole.log(factorial(3)); // (X)\n\n\n\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\n\u672b\u5c3e\u518d\u5e30\u306f\u81ea\u5206\u81ea\u8eab\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3059\u308b\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\u3064\u307e\u308a\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u306e\u30c6\u30af\u30cb\u30c3\u30af\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\u4e0a\u8a18\u306efactorialTailCall\u95a2\u6570\u304c\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u306b\u3088\u308b\u6700\u9069\u5316\u304c\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u3088\u3063\u3066\u884c\u308f\u308c\u3066\u3044\u308b\u3068\u4eee\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u3068\u304d\u3001factorial(3)\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u9077\u79fb\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\u307e\u305a\u3001factorial\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpush\u3055\u308c\u307e\u3059\u3002result\u306e\u5024\u306f\u307e\u3060undefined\u3067\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfactorial:{n:3, result:undefined}:returnTo(X)\n\n\n\n\u6b21\u306b\u3001(Y)\u306e\u4f4d\u7f6e\u3067\u3001factorialTailCall(3, 1)\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u305f\u3081\u3001factorialTailCall\u306e\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304c\u751f\u6210\u3055\u308c\u3066push\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001n\u3068accum\u306e\u5024\u306f\u305d\u308c\u305e\u308c\u30013\u30681\u306b\u521d\u671f\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfactorialTailCall:{n:3, accum:1}:returnTo(Y)\n\n\nfactorial:{n:3, result:undefined}:returnTo(X)\n\n\n\n\u6b21\u306b\u3001factorialTailCall\u304c\u518d\u5e30\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u3001\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u751f\u6210\u3055\u308c\u305a\u3001\u65e2\u306b\u3042\u308b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306en\u3068accum\u306e\u5024\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\u305d\u3057\u3066\u3001factorialTailCall\u306e\u5b9f\u884c\u304c\u958b\u59cb\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfactorialTailCall:{n:2, accum:3}:returnTo(Y)\n\n\nfactorial:{n:3, result:undefined}:returnTo(X)\n\n\n\n\u3055\u3089\u306b\u3001factorialTailCall\u304c\u518d\u5e30\u7684\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306en\u3068accum\u306e\u5024\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfactorialTailCall:{n:1, accum:6}:returnTo(Y)\n\n\nfactorial:{n:3, result:undefined}:returnTo(X)\n\n\n\n\u6700\u5f8c\u306e\u518d\u5e30\u547c\u3073\u51fa\u3057\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfactorialTailCall:{n:0, accum:6}:returnTo(Y)\n\n\nfactorial:{n:3, result:undefined}:returnTo(X)\n\n\n\n\u95a2\u6570factorialTailCall\u306faccum\u306e\u50246\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306fpop\u3055\u308c\u3066\u3001\u4f4d\u7f6e(Y)\u304b\u3089factorial\u95a2\u6570\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002result\u306faccum\u306e\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n\n\n\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\n\n\nfactorial:{n:3, result:6}:returnTo(X)\n\n\n\n\u95a2\u6570factorial\u306fresult\u306e\u5024\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u3001(X)\u306e\u4f4d\u7f6e\u304b\u3089\u51e6\u7406\u304c\u518d\u958b\u3057\u307e\u3059\u3002\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3001\u672b\u5c3e\u518d\u5e30\u95a2\u6570factorialTailCall\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u6d88\u8cbb\u6570\u306f\u5e38\u306b\uff11\u3064\u3067\u3059\u3002\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306b\u3088\u308a\u3001\u672b\u5c3e\u518d\u5e30\u306f\u52b9\u7387\u7684\u306b\u5b9f\u884c\u3067\u304d\u308b\u3053\u3068\u304c\u7406\u89e3\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\nJavaScript\u3067\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30c6\u30af\u30cb\u30c3\u30af\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u30b3\u30f3\u30d1\u30a4\u30e9\u306a\u3069\u306e\u8a00\u8a9e\u51e6\u7406\u7cfb\u306b\u3088\u308b\u30b3\u30fc\u30c9\u6700\u9069\u5316\u306e\u6280\u8853\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001Java\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u540c\u3058JVM\u8a00\u8a9e\u3067\u3082Scala\u306f\u5236\u9650\u4ed8\u304d\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002Scheme\u306f\u8a00\u8a9e\u306e\u5b9f\u88c5\u4ed5\u69d8\u3068\u3057\u3066\u8981\u6c42\u3057\u3066\u3044\u307e\u3059\u3002\nJavaScript\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u308c\u307e\u3067\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306f\u5b9f\u884c\u74b0\u5883\u306e\u5b9f\u88c5\u8005\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3057\u305f\u3002ES6\u3067\u306fScheme\u3068\u540c\u3058\u3088\u3046\u306b\u8a00\u8a9e\u4ed5\u69d8\u3068\u3057\u3066\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u6c42\u3081\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u4eca\u5f8c\u3001\u5404\u30d6\u30e9\u30a6\u30b6\u306fES6\u306b\u6e96\u62e0\u3059\u308b\u305f\u3081\u306b\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3059\u308b\u3067\u3057\u3087\u3046\u3002\u305f\u3060\u3057\u3001\u73fe\u6642\u70b9\u3067\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\u306f\u306a\u3044\u3088\u3046\u3067\u3059\uff08\u30d6\u30e9\u30a6\u30b6\u3084altJS\u306a\u3069\u306eES6\u4e92\u63db\u8868\u3092\u53c2\u7167\uff09\u3002\n\u305f\u3060\u3057\u3001\u5f8c\u8ff0\u3059\u308bBabel\u3092\u5229\u7528\u3059\u308b\u3068\u3001JavaScript\u3067\u3082\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u306e\u6069\u6075\u3092\u53d7\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\nBabel\u306b\u3088\u308b\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\nBabel\u306fES6\u306e\u30b3\u30fc\u30c9\u304b\u3089ES5\u306e\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30e9\u306e\u4e00\u7a2e\u3067\u3059\u3002Babel\u3067\u306f\u3001ES5\u3092\u751f\u6210\u3059\u308b\u904e\u7a0b\u3067\u3001\u672b\u5c3e\u518d\u5e30\u3092\u901a\u5e38\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u3067\u3001\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3057\u3001Babel\u304c\u53ef\u80fd\u306a\u6700\u9069\u5316\u306b\u306f\u5236\u7d04\u304c\u3042\u308a\u3001\u76f8\u4e92\u518d\u5e30\uff08\u4ed8\u9332\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff09\u306a\u3069\u306e\u8907\u96d1\u306a\u518d\u5e30\u95a2\u6570\u306e\u6700\u9069\u5316\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u81ea\u5206\u81ea\u8eab\u3092\u76f4\u63a5\u547c\u3073\u51fa\u3059\u672b\u5c3e\u518d\u5e30\u306e\u307f\u304c\u6700\u9069\u5316\u5bfe\u8c61\u3067\u3059\u3002\n\u3067\u306f\u3001Babel\u306b\u3088\u308b\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u306e\u5b9f\u9a13\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u672c\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u672b\u5c3e\u518d\u5e30\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u518d\u5e30\u95a2\u6570\u3092\u518d\u63b2\u3057\u307e\u3059\u3002\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\uff08\u672b\u5c3e\u518d\u5e30\u30d0\u30fc\u30b8\u30e7\u30f3\uff09\nfunction factorial(n) {\n    function factorialTailCall(n, accum) {\n        if (n === 0) {\n            return accum;\n        }\n        return factorialTailCall(n - 1, n * accum);\n    }\n    return factorialTailCall(n, 1);\n}\n\n\u3053\u306e\u95a2\u6570\u3092Babel\u306b\u3088\u308aES5\u306e\u30b3\u30fc\u30c9\u306b\u5909\u63db\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u4eca\u56de\u306e\u5909\u63db\u306f\u3001Babel\u304c\u63d0\u4f9b\u3059\u308bWeb\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\nfunction factorial(n) {\n    function factorialTailCall(_x, _x2) {\n        var _again = true;\n\n        _function: while (_again) {\n            var n = _x,\n                accum = _x2;\n            _again = false;\n\n            if (n === 0) {\n                return accum;\n            }\n            _x = n - 1;\n            _x2 = n * accum;\n            _again = true;\n            continue _function;\n        }\n    }\n    return factorialTailCall(n, 1);\n}\n\n\u95a2\u6570factorialTailCall\u304cwhile\u3092\u4f7f\u3063\u305f\u30eb\u30fc\u30d7\u306b\u5909\u63db\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308a\u307e\u3059\u306d\uff01\n\n\u307e\u3068\u3081\n\u518d\u5e30\u95a2\u6570\u3092\u5229\u7528\u3059\u308b\u3068\u30eb\u30fc\u30d7\u3088\u308a\u3082\u30a8\u30ec\u30ac\u30f3\u30c8\u306b\u30b3\u30fc\u30c9\u304c\u66f8\u3051\u308b\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u3001\u3053\u308c\u304b\u3089\u306eJavaScript(ES6)\u3067\u306f\u7a4d\u6975\u7684\u306b\u4f7f\u3063\u3066\u3044\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u901a\u5e38\u306e\u518d\u5e30\u3067\u306f\u306a\u304f\u3001\u672b\u5c3e\u518d\u5e30\u3067\u306a\u3051\u308c\u3070\u5b9f\u884c\u6642\u306e\u52b9\u7387\u304c\u60aa\u3044\u3068\u3044\u3046\u8ab2\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u65b9\u91dd\u3068\u3057\u3066\u306f\u3001\u307e\u305a\u306f\u901a\u5e38\u306e\u518d\u5e30\u95a2\u6570\u3067\u30b3\u30fc\u30c9\u5316\u3057\u305f\u5f8c\u3001\u518d\u5e30\u95a2\u6570\u3092\u672b\u5c3e\u518d\u5e30\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u518d\u5e30\u95a2\u6570\u306e\u4f5c\u6210\u306e\u79d8\u8a23\u306f\u3001\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0Haskell\u306b\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u662f\u975e\u53c2\u7167\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u4ed8\u9332\n\n\u591a\u91cd\u518d\u5e30\n\u81ea\u5206\u81ea\u8eab\u3092\u8907\u6570\u56de\u547c\u3073\u51fa\u3059\u518d\u5e30\u95a2\u6570\u3092 \u591a\u91cd\u518d\u5e30\u95a2\u6570 \u3068\u547c\u3073\u307e\u3059\u3002\u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u3092\u6c42\u3081\u308b\u4ee5\u4e0b\u306e\u95a2\u6570\u306f\u591a\u91cd\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\n// \u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u3092\u6c42\u3081\u308b\u95a2\u6570\nfunction fibonacci(n) {\n    if (n === 0 || n === 1) {\n        return n;\n    }\n    return fibonacci(n - 1) + fibonacci(n - 2);\n}\n\nconsole.log(fibonacci(0)); // 0\nconsole.log(fibonacci(1)); // 1\nconsole.log(fibonacci(2)); // 1\nconsole.log(fibonacci(3)); // 2\nconsole.log(fibonacci(4)); // 3\n\n\n\u76f8\u4e92\u518d\u5e30\n\u8907\u6570\u306e\u95a2\u6570\u304c\u3001\u305d\u308c\u305e\u308c\u3092\u547c\u3073\u51fa\u3057\u5408\u3046\u5834\u5408\u3001\u3053\u308c\u3089\u306e\u95a2\u6570\u3092 \u76f8\u4e92\u518d\u5e30\u95a2\u6570 \u3068\u547c\u3073\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u4ee5\u4e0b\u306e\u5076\u6570\u30fb\u5947\u6570\u3092\u5224\u5b9a\u3059\u308b\u95a2\u6570\u306f\u76f8\u4e92\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\n// n\u304c\u5076\u6570\u306a\u3089\u3070true\u3092\u8fd4\u3059\u95a2\u6570\nfunction isEven(n) {\n    if (n === 0) {\n        return true;\n    }\n    return isOdd(n - 1);\n}\n\n// n\u304c\u5947\u6570\u306a\u3089\u3070true\u3092\u8fd4\u3059\u95a2\u6570\nfunction isOdd(n) {\n    if (n === 0) {\n        return false;\n    }\n    return isEven(n - 1);\n}\n\n\nES6\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306e\u4ed5\u69d8\nES6\u3067\u306f\u62bd\u8c61\u64cd\u4f5c\u95a2\u6570\u306ePrepareForTailCall\u306e\u5b9f\u884c\u6642\u306e\u610f\u5473\u8ad6\u3068\u3057\u3066\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6642\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u52d5\u4f5c\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002PrepareForTailCall\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u4f4d\u7f6e\u306b\u3042\u308b\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u524d\u306b\u73fe\u5728\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u5148\u982d\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff08\u3064\u307e\u308a\u547c\u3073\u51fa\u3057\u5143\u95a2\u6570\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff09\u3092pop\u3057\u307e\u3059\u3002\u6b21\u306b\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u304c\u767a\u751f\u3059\u308b\u3068\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092push\u3057\u307e\u3059\u3002\u672c\u8a18\u4e8b\u3067\u306f\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092\u518d\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u524d\u63d0\u3067\u89e3\u8aac\u3057\u307e\u3057\u305f\u304c\u3001ES6\u3067\u306f\u3001\u3044\u3063\u305f\u3093pop\u3057\u3066\u304b\u3089\u518d\u5ea6push\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n\u307e\u305f\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092pop\u3059\u308b\u3068\u95a2\u6570\u306e\u623b\u308a\u5148\u306f\u6d88\u3048\u308b\u3060\u308d\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u304c\u3001ES6\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u623b\u308a\u5148\u306e\u4f4d\u7f6e\u3067\u306f\u306a\u304f\u3001\u73fe\u5728\u5b9f\u884c\u4e2d\u306e\u4f4d\u7f6e\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u3064\u307e\u308a\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u6642\u306b\u73fe\u5728\u306e\u4f4d\u7f6e\u3092\u4fdd\u6301\u3057\u3066\u304b\u3089\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092push\u3057\u307e\u3059\u3002\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u304c\u7d42\u4e86\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092pop\u3057\u3001\u8a18\u61b6\u3057\u3066\u3044\u308b\u4f4d\u7f6e\u304b\u3089\u5b9f\u884c\u3092\u518d\u958b\u3059\u308b\u308f\u3051\u3067\u3059\u3002\u3053\u306e\u8fba\u306f\u5b8c\u5168\u306b\u7406\u89e3\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u9593\u9055\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u304c\u3054\u5bb9\u8d66\u304f\u3060\u3055\u3044\u3002\nPrepareForTailCall\u306e\u610f\u5473\u8ad6\u306eNOTE\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\nFor example, a tail position call should only grow an implementation\u2019s activation record stack by the amount that the size of the target function\u2019s activation record exceeds the size of the calling function\u2019s activation record. If the target function\u2019s activation record is smaller, then the total size of the stack should decrease.\n\n\u3064\u307e\u308a\u3001\u547c\u3073\u51fa\u3057\u5148\u95a2\u6570\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff08\u539f\u6587\u3067\u306f\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ec\u30b3\u30fc\u30c9\u3068\u3042\u308a\u307e\u3059\uff09\u306e\u30b5\u30a4\u30ba\u304c\u547c\u3073\u51fa\u3057\u5143\u95a2\u6570\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3088\u308a\u8d85\u904e\u3057\u305f\u5206\u3060\u3051\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u7dcf\u30b5\u30a4\u30ba\u306f\u5927\u304d\u304f\u306a\u308b\uff08\u3042\u308b\u3044\u306f\u5c0f\u3055\u304f\u306a\u308b\uff09\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\n\n\u53c2\u8003\u30b5\u30a4\u30c8\u3068\u66f8\u7c4d\n\nEcmaScript6\u306e\u8a00\u8a9e\u4ed5\u69d8\u66f8\nBabel\u306eES6\u306e\u89e3\u8aac\n\u30d6\u30e9\u30a6\u30b6\u3084altJS\u306a\u3069\u306eES6\u4e92\u63db\u8868\nEcmaScript6\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306b\u95a2\u3059\u308b\u89e3\u8aac\n\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0Haskell\n\n# \u306f\u3058\u3081\u306b\n\nES6 (EcmaScript 6)\u3092\u8a66\u305d\u3046\u3068\u3001[Babel](https://babeljs.io/)\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u8aad\u3093\u3067\u3044\u305f\u3068\u3053\u308d\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\uff08Tail Call\uff09\u306e\u6700\u9069\u5316\u3092\u3057\u3066\u3044\u308b\u3053\u3068\u306b\u3073\u3063\u304f\u308a\u3002\u516c\u5f0f\u30ea\u30ea\u30fc\u30b9\uff082015\u5e746\u6708\uff09\u304b\u3089\uff13\u30f6\u6708\u3042\u307e\u308a\u7d4c\u3063\u3066\u306f\u3044\u307e\u3059\u304c\u3001ES6\u304c\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u4ed5\u69d8\u3068\u3057\u3066\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u3088\u3046\u3084\u304f\u77e5\u308a\u307e\u3057\u305f\u3002\n\n\u73fe\u72b6\u3067\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\u306f\u306a\u304f\uff08[\u30d6\u30e9\u30a6\u30b6\u3084altJS\u306a\u3069\u306eES6\u4e92\u63db\u8868](http://kangax.github.io/compat-table/es6/)\u3092\u53c2\u7167\uff09\u3001\u552f\u4e00\u3001ES6\u304b\u3089ES5\u3078\u306e\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30e9\u3067\u3042\u308bBabel\u306e\u307f\u304c\u90e8\u5206\u7684\uff08\u76f4\u63a5\u7684\u306a\u672b\u5c3e\u518d\u5e30\u306e\u307f\uff09\u3067\u306f\u3042\u308a\u306a\u304c\u3089\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n\n\u4eca\u56de\u306e\u8a18\u4e8b\u3067\u306f\u3001\u6765\u305f\u308bES6\u6642\u4ee3\uff08\u3044\u307e\u3055\u3089\u306e\u611f\u306f\u3042\u308a\u307e\u3059\u304c\uff09\u306b\u5099\u3048\u3066\u3001\u672b\u5c3e\u518d\u5e30\u3068\u305d\u306e\u6700\u9069\u5316\u306b\u3064\u3044\u3066\u7c21\u5358\u306b\u89e3\u8aac\u3057\u305f\u4e0a\u3067\u3001Babel\u3092\u5229\u7528\u3057\u3066\u5b9f\u969b\u306bJavaScript\u3067\u306e\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u3092\u5b9f\u9a13\u3057\u3066\u307f\u305f\u3044\u3068\u601d\u3044\u307e\u3059\u3002\n\n# \u3056\u3063\u304f\u308a\u6982\u8981\n\n* **\u518d\u5e30\u95a2\u6570** \u306f\u95a2\u6570\u547c\u3073\u51fa\u3057\u306e\u968e\u6570\u304c\u6df1\u304f\u306a\u308a\u3059\u304e\u308b\u3068 **\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc** \u304c\u767a\u751f\u3059\u308b\u554f\u984c\u304c\u3042\u308a\u307e\u3059\u3002\n* **\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u30b3\u30fc\u30c9\u6700\u9069\u5316** \u6280\u8853\u306b\u3088\u308a\u3001\u518d\u5e30\u95a2\u6570\u3092 **\u672b\u5c3e\u518d\u5e30** \u306b\u5909\u63db\u3059\u308b\u3068\u3053\u306e\u554f\u984c\u306f\u89e3\u6c7a\u3067\u304d\u307e\u3059\u3002\n* \u305f\u3060\u3057\u3001\u30b3\u30fc\u30c9\u6700\u9069\u5316\u306f\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u74b0\u5883\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u3068\u305d\u306e\u6069\u6075\u3092\u53d7\u3051\u3089\u308c\u307e\u305b\u3093\u3002\n* \u6b21\u4e16\u4ee3JavaScript\u306e\u4ed5\u69d8\u3068\u306a\u308bES6\u3067\u306f \u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u30b3\u30fc\u30c9\u6700\u9069\u5316\u304c\u4ed5\u69d8\u5316\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n* \u305d\u306e\u305f\u3081\u3001\u5404\u30d6\u30e9\u30a6\u30b6\u3084node.js\u306a\u3069\u306e\u5b9f\u884c\u74b0\u5883\u306f\u3001ES6\u306b\u6e96\u62e0\u3059\u308b\u306b\u306f\u30b3\u30fc\u30c9\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002\n* \u73fe\u6642\u70b9\uff082015/10\uff09\u3067\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\uff08\u5b9f\u884c\u74b0\u5883\uff09\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n* \u305f\u3060\u3057\u3001ES6\u304b\u3089ES5\u3078\u306e\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30e9\u3067\u3042\u308b **Babel** \u306f\u5236\u9650\u4ed8\u304d\u306a\u304c\u3089\u6700\u9069\u5316\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\n* Babel\u306fES6\u306e\u672b\u5c3e\u518d\u5e30\u306e\u30b3\u30fc\u30c9\u3092\u901a\u5e38\u306e\u30eb\u30fc\u30d7\uff08while\u306a\u3069\uff09\u306b\u3088\u308b\u30b3\u30fc\u30c9\u306b\u5909\u63db\u3057\u307e\u3059\u3002\n\n# \u518d\u5e30\u95a2\u6570\u306e\u554f\u984c\n\n## \u518d\u5e30\u95a2\u6570\n\n\u81ea\u5206\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\u95a2\u6570\u3092 **\u518d\u5e30\u95a2\u6570\uff08recursive function\uff09** \u3068\u547c\u3073\u307e\u3059\u3002\u3088\u304f\u3042\u308b\u4f8b\u3067\u3059\u304c\u3001\u4e0e\u3048\u3089\u308c\u305f\u6570```n```\u306e\u968e\u4e57\uff08```1```\u304b\u3089```n```\u307e\u3067\u306e\u3059\u3079\u3066\u306e\u6570\u5024\u306e\u7a4d\uff09\u3092\u8a08\u7b97\u3059\u308b\u4ee5\u4e0b\u306e\u95a2\u6570```factorial```\u306f\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\n\n```js\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\nfunction factorial(n) {\n\tif (n === 0) {\n\t\treturn 1;\n\t}\n\treturn n * factorial(n - 1); // \u81ea\u5206\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3059\n}\n\nconsole.log(factorial(3)); // 6\u3068\u306a\u308b\n```\n\n## \u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\n\n\u518d\u5e30\u95a2\u6570\u306f\u81ea\u5206\u81ea\u8eab\u3092\u518d\u5e30\u7684\u306b\u547c\u3073\u51fa\u3059\u305f\u3081\u3001\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u6df1\u304f\u306a\u308a\u304c\u3061\u3067\u3059\u3002\u5185\u90e8\u7684\u306b\u306f\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u3054\u3068\u306b\u30e1\u30e2\u30ea\u9818\u57df\u304c\u6d88\u8cbb\u3055\u308c\u308b\u305f\u3081\u3001\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u6df1\u304f\u306a\u308a\u3059\u304e\u308b\u3068\u5b9f\u884c\u6642\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002\u5b9f\u969b\u3001\u4e0a\u8a18\u306e```factorial```\u95a2\u6570\u3092\u624b\u5143\u306enode.js\uff08v0.12.6\uff09\u4e0a\u3067\u5b9f\u884c\u3057\u305f\u3068\u3053\u308d\u3001\u5f15\u6570\u304c```100000```\u3067\u30a8\u30e9\u30fc\u306b\u306a\u308a\u307e\u3057\u305f\u3002\uff08```Infinity```\u306f\u6570\u5024\u306e\u4e0a\u9650\u3092\u8d85\u3048\u305f\u304b\u3089\u3067\u3059\u3002\u4eca\u56de\u306e\u30a8\u30e9\u30fc\u3068\u306f\u95a2\u4fc2\u3042\u308a\u307e\u305b\u3093\u3002\uff09\n\n```shell\n> function factorial(n) {\n...     if (n === 0) {\n.....         return 1;\n.....     }\n...     return n * factorial(n - 1);\n... }\nundefined\n> factorial(100);\n9.33262154439441e+157\n> factorial(1000);\nInfinity\n> factorial(10000);\nInfinity\n> factorial(100000);\nRangeError: Maximum call stack size exceeded\n    at factorial (repl)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n    at factorial (repl:5:24)\n> \n```\n\n```factorial(100000)```\u306e\u7d50\u679c\u3068\u3057\u3066\u3001\"RangeError: Maximum call stack size exceeded\"\uff08\u30b9\u30bf\u30c3\u30af\u306e\u4e0a\u9650\u3092\u8d85\u3048\u305f\u3088\uff01\uff09\u3068\u3042\u308a\u307e\u3059\u3088\u306d\u3002\u3053\u308c\u306f\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u4e0a\u9650\u3092\u8d85\u3048\u305f\u3053\u3068\u3092\u8868\u3059\u5b9f\u884c\u30a8\u30e9\u30fc\u3067\u3059\u3002\u3053\u306e\u3088\u3046\u306a\u30a8\u30e9\u30fc\u3092\u4e00\u822c\u7684\u306b **\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc** \u3068\u547c\u3073\u307e\u3059\u3002\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u8a00\u8a9e\u306b\u95a2\u4fc2\u306a\u304f\u3001\u30d7\u30ed\u30b0\u30e9\u30de\u306a\u3089\u3070\u4e00\u5ea6\u306f\u906d\u9047\u3057\u305f\u3053\u3068\u304c\u3042\u308b\u30a8\u30e9\u30fc\u3067\u3059\u3088\u306d\u3002\n\n## \u89e3\u6c7a\u65b9\u6cd5\u306f\uff1f\n\n\u4e00\u3064\u306e\u65b9\u6cd5\u306f\u3001\u518d\u5e30\u3092\u901a\u5e38\u306e\u30eb\u30fc\u30d7\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u3067\u3059\u3002\u4ee5\u4e0b\u306f\u3001```for```\u30eb\u30fc\u30d7\u3092\u4f7f\u7528\u3057\u305f```factorial```\u306e\u5b9f\u88c5\u3067\u3059\u3002\u3053\u306e\u95a2\u6570\u306f\u5f15\u6570\u306e\u5927\u304d\u3055\u306b\u304b\u304b\u308f\u3089\u305a\u3001\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u968e\u5c64\u306f\u4e00\u5b9a\uff08\uff11\u3064\u3060\u3051\uff09\u306a\u306e\u3067\u3001\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n\n```js\nfunction factorial(n) {\n\tvar result = 1;\n\tfor (var i = 1; i <= n; i++) {\n\t\tresult = result * i;\n\t}\n\treturn result;\n}\n```\n\n\u5b9f\u969b\u3001\u5f15\u6570```100000```\u3067\u5b9f\u884c\u3057\u3066\u3082\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u767a\u751f\u3057\u307e\u305b\u3093\u3002\n\n```shell\n> function factorial(n) {\n... var result = 1;\n... for (var i = 1; i <= n; i++) {\n..... result = result * i;\n..... }\n... return result;\n... }\nundefined\n> factorial(100000);\nInfinity\n> \n```\n\n## \u7d50\u5c40\u518d\u5e30\u95a2\u6570\u3063\u3066\u4f7f\u3048\u306a\u3044\u306e\uff1f\n\n**\u3053\u308c\u307e\u3067\u306eJavaScript\u306b\u5bfe\u3059\u308b\u7b54\u3048\u3068\u3057\u3066\u306f\u3001\u300c\u306f\u3044\u3002\u6ce8\u610f\u3057\u3066\u4f7f\u7528\u3057\u306a\u3044\u3068\u3060\u3081\u3067\u3059\u3002\u300d** \u3068\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u4e0a\u8a18\u306e\u3088\u3046\u306a\u554f\u984c\u304c\u767a\u751f\u3059\u308b\u305f\u3081\u3001\u518d\u5e30\u304c\u3042\u307e\u308a\u306b\u3082\u6df1\u304f\u306a\u3089\u306a\u3044\u3088\u3046\u306b\u6ce8\u610f\u3059\u308b\u306a\u3069\u3001\u9650\u5b9a\u7684\u306a\u72b6\u6cc1\u3067\u3057\u304b\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n**\u6b21\u4e16\u4ee3\u306eJavaScript\uff08ES6\uff09\u306b\u5bfe\u3059\u308b\u7b54\u3048\u3068\u3057\u3066\u306f\u3001\u300c\u3044\u3044\u3048\u3002\u305d\u3093\u306a\u3053\u3068\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u672b\u5c3e\u518d\u5e30\u306b\u5909\u63db\u3059\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u3002\u300d** \u3068\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u518d\u5e30\u95a2\u6570\u306f **\u672b\u5c3e\u518d\u5e30** \u3068\u547c\u3070\u308c\u308b\u7279\u6b8a\u306a\u5f62\u306e\u518d\u5e30\u95a2\u6570\u306b\u66f8\u304d\u63db\u3048\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u672b\u5c3e\u518d\u5e30\u306b\u3059\u308b\u3068\u3001 **\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316** \u3068\u547c\u3070\u308c\u308b\u30b3\u30fc\u30c9\u6700\u9069\u5316\u6280\u8853\u306e\u6069\u6075\u3092\u53d7\u3051\u3089\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u306e\u30b3\u30fc\u30c9\u6700\u9069\u5316\u306e\u6280\u8853\u306b\u3088\u308a\u3001\u4e0a\u8a18\u306e\u3088\u3046\u306a\u30b9\u30bf\u30c3\u30af\u30aa\u30fc\u30d0\u30fc\u30d5\u30ed\u30fc\u306f\u767a\u751f\u3057\u306a\u304f\u306a\u308a\u307e\u3059\u3002ES6\u306f\u4ed5\u69d8\u3068\u3057\u3066\u3001JavaScript\u306e\u5b9f\u884c\u74b0\u5883\u5074\u306b\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u8981\u6c42\u3057\u3066\u3044\u308b\u305f\u3081\u3001ES6\u306b\u6e96\u62e0\u3057\u305f\u30d6\u30e9\u30a6\u30b6\u3084\u5b9f\u884c\u74b0\u5883\u3067\u3042\u308c\u3070\u672b\u5c3e\u518d\u5e30\u3092\u5229\u7528\u3059\u308c\u3070\u3088\u3044\u306e\u3067\u3059\u3002\n\n\u3067\u306f\u3001\u4ee5\u964d\u3067\u306f\u672b\u5c3e\u518d\u5e30\u3084\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u6280\u8853\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u307f\u3066\u3044\u304d\u307e\u3057\u3087\u3046\u3002\n\n\n\n# \u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\n\n## \u672b\u5c3e\u547c\u3073\u51fa\u3057\n\n\u3042\u308b\u95a2\u6570```f```\u304c\u3001\u5225\u306e\u95a2\u6570```g```\u3092\u547c\u3073\u51fa\u3059\u3068\u3057\u307e\u3059\u3002```g```\u306e\u547c\u3073\u51fa\u3057\u304c```f```\u306e\u30ea\u30bf\u30fc\u30f3\u524d\u306e\u6700\u5f8c\u306e\u51e6\u7406\u3067\u3042\u308b\u3068\u304d\u3001```g```\u306e\u95a2\u6570\u547c\u3073\u51fa\u3057\u3092 **\u672b\u5c3e\u547c\u3073\u51fa\u3057\uff08tail call\uff09** \u3068\u547c\u3073\u307e\u3059\u3002\n\u4f8b\u3048\u3070\u3001\u6b21\u306e\u95a2\u6570```f```\u306b\u304a\u3044\u3066\u3001\u95a2\u6570```g```\u306e\u5b9f\u884c\u5f8c\u306b\u305d\u306e\u7d50\u679c\u3092```f```\u306f\u30ea\u30bf\u30fc\u30f3\u3059\u308b\u3060\u3051\u306a\u306e\u3067\u3001```g```\u306e\u547c\u3073\u51fa\u3057\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u306a\u308a\u307e\u3059\u3002\n\n```js\nfunction f() {\n\treturn g(); // g()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\n}\n```\n\n\u4ee5\u4e0b\u306e```g```\u304a\u3088\u3073```h```\u306e\u547c\u3073\u51fa\u3057\u3082\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u306a\u308a\u307e\u3059\u3002\u3057\u304b\u3057\u3001```b```\u306e\u547c\u3073\u51fa\u3057\u5f8c\u306b```f```\u306e\u51e6\u7406\u304c\u7d9a\u304f\u305f\u3081\u3001```b```\u306e\u547c\u3073\u51fa\u3057\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u308a\u307e\u305b\u3093\u3002\n\n```js\nfunction f() {\n\tif (b()) { // b()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\n\t\treturn g(); // g()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\n\t}\n\telse {\n\t\treturn h(); // h()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\n\t}\n}\n```\n\n\u4ee5\u4e0b\u306e\u4f8b\u3067\u306f\u3001\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u4e0a\u3001```h```\u306e\u547c\u3073\u51fa\u3057\u306f```f```\u306e\u6700\u5f8c\u306b\u3042\u308a\u307e\u3059\u304c\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u306a\u305c\u306a\u3089\u3001```h```\u306e\u547c\u3073\u51fa\u3057\u5f8c\u306b```+```\u306b\u3088\u308b\u52a0\u7b97\u51e6\u7406\u304c\u7d9a\u304f\u305f\u3081\u3067\u3059\u3002\n\n```js\nfunction f() {\n\treturn g() + h(); // h()\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\u3002\u5f53\u7136\u306a\u304c\u3089g()\u3082\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\u3002\n}\n```\n\n\n## \u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\n\n### \u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\n\n\u901a\u5e38\u306e\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u5b9f\u884c\u30e2\u30c7\u30eb\u3067\u306f\u3001\u95a2\u6570\u3092\u547c\u3073\u51fa\u3059\u3068\u3001\u95a2\u6570\u81ea\u8eab\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff08\u5f15\u6570\u3084\u5c40\u6240\u5909\u6570\uff09\u3084\u623b\u308a\u5148\u60c5\u5831\u3092\u4fdd\u6301\u3059\u308b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff08\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ec\u30b3\u30fc\u30c9\uff09\u304c\u751f\u6210\u3055\u308c\u3066\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u3068\u547c\u3070\u308c\u308b\u30b9\u30bf\u30c3\u30af\u306bpush\u3055\u308c\u307e\u3059\u3002\u95a2\u6570\u306f\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306b\u8a08\u7b97\u9014\u4e2d\u306e\u5024\u3092\u4fdd\u6301\u3057\u3064\u3064\u51e6\u7406\u3092\u7d9a\u3051\u307e\u3059\u3002\u95a2\u6570\u306e\u5b9f\u884c\u304c\u7d42\u308f\u308b\u3068\u5bfe\u5fdc\u3059\u308b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpop\u3055\u308c\u3066\u547c\u3073\u51fa\u3057\u5143\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306b\u5fa9\u5e30\u3057\u3001\u547c\u3073\u51fa\u3057\u5143\u95a2\u6570\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u30b3\u30fc\u30c9\u3092\u984c\u6750\u3068\u3057\u3066\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u52d5\u304d\u3092\u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n```js\nfunction squareSum(x) {\n\tvar xs = square(x); //(A)\n\tvar result = sum(xs); //(B)\n\treturn result; //(C)\n}\n\nfunction square(n) {\n\treturn n * n;\n}\n\nfunction sum(n) {\n\treturn n + n;\n}\n\n//\u7d50\u679c\u306f8\nsquareSum(2); //(X)\n```\n\n#### \u8868\u8a18\n\n\u4ee5\u4e0b\u3067\u306f\u3001\u95a2\u6570```f```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092```f:{x:1, y:2}:returnTo:\u623b\u308a\u5148\u306e\u4f4d\u7f6e```\u3067\u8868\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u3001```x```\u3068```y```\u306f```f```\u306e\u30ed\u30fc\u30ab\u30eb\u5909\u6570\uff08\u5f15\u6570\u3092\u542b\u3080\uff09\u3068\u3057\u3001\u305d\u308c\u305e\u308c\u5024```1```\u3068```2```\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u3082\u306e\u3068\u3057\u307e\u3059\u3002```f```\u95a2\u6570\u306e\u7d42\u4e86\u6642\u306e\u623b\u308a\u5148\u306f```returnTo```\u304c\u8868\u3059\u3082\u306e\u3068\u3057\u307e\u3059\u3002\n\n#### \u30b7\u30df\u30e5\u30ec\u30fc\u30b7\u30e7\u30f3\n\n\u3055\u3066\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u306e\u958b\u59cb\u6642\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u7a7a\u3067\u3059\u3002\uff08X\uff09\u306e\u4f4d\u7f6e\u3067```squareSum```\u95a2\u6570\u304c\u5f15\u6570```2```\u3067\u547c\u3073\u51fa\u3055\u308c\u305f\u76f4\u5f8c\u306f\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306b```squareSum```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpush\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u5c40\u6240\u5909\u6570```xs```\u3068```result```\u306f\u307e\u3060\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u623b\u308a\u5148\u306b\u306f\u4f4d\u7f6e(X)\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|squreSum:{x:2, xs:undefined, result:undefined}:returnTo:(X)| \n\n\u6b21\u306b\u3001(A)\u3067```suqare```\u95a2\u6570\u304c\u5f15\u6570```2(=x)```\u3067\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306b\u306f\u5f15\u6570```n```\u304c```2```\u3067\u521d\u671f\u5316\u3055\u308c\u305f\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpush\u3055\u308c\u307e\u3059\u3002\u95a2\u6570\u7d42\u4e86\u5f8c\u306b\u623b\u308a\u5148\u306f(A)\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|square:{n:2}:returnTo:(A)| \n|squreSum:{x:2, xs:undefined, result:undefined}:returnTo:(X)|\n\n\u95a2\u6570```square```\u306f```n```\u306e\u4e8c\u4e57\u3092\u8a08\u7b97\u3057\u305f\u5f8c\u3001\u547c\u3073\u51fa\u3057\u5143\u306e```squareSum```\u306b\u623b\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u3001```square```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306fpop\u3055\u308c\u3066\u3001\u547c\u3073\u51fa\u3057\u5143\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e```xs```\u306b\u306f```square```\u306e\u8a08\u7b97\u7d50\u679c```4```\u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002```returnTo```\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u305f(A)\u306e\u4f4d\u7f6e\u304b\u3089\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|squreSum:{x:2, xs:4, result:undefined}:returnTo(X)|\n\n\n\u6b21\u306b\u3001\u4f4d\u7f6e(B)\u3067```sum```\u95a2\u6570\u304c\u5f15\u6570```4(=xs)```\u3067\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|sum:{n:4}:returnTo:(B)|\n|squreSum:{x:2, xs:4, result:undefined}:returnTo(X)|\n\n\u95a2\u6570```sum```\u306e\u5b9f\u884c\u304c\u7d42\u4e86\u3059\u308b\u3068\u3001```sum```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306fpop\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001```result```\u306e\u5024\u306f```sum```\u306e\u5b9f\u884c\u7d50\u679c\u304c\u4ee3\u5165\u3055\u308c\u307e\u3059\u3002```returnTo```\u306b\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u305f(B)\u306e\u4f4d\u7f6e\u304b\u3089\u3001```squareSum```\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|squreSum:{x:2, xs:4, result:8}:returnTo(X)|\n\n\u6700\u5f8c\u306b```squareSum```\u306f```result```\u306e\u5024```8```\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u3066\u30d7\u30ed\u30b0\u30e9\u30e0\u306f\u4f4d\u7f6e(X)\u306b\u623b\u3063\u3066\u7d42\u4e86\u3057\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u7a7a\u306b\u306a\u308a\u307e\u3059\u3002\n\n### \u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\n\n\u4e0a\u8a18\u306e```squareSum```\u95a2\u6570\u306f\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306b\u8a08\u7b97\u9014\u4e2d\u306e\u5024\uff08```xs```\u3084```result```\uff09\u3092\u4fdd\u6301\u3057\u3066\u5b9f\u884c\u3092\u7d9a\u3051\u307e\u3059\u3002\u3053\u306e\u3088\u3046\u306b\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u95a2\u6570\u306e\u5b9f\u884c\u9014\u4e2d\u306e\u5024\u3092\u4fdd\u6301\u3059\u308b\u4e00\u6642\u9818\u57df\u3068\u3057\u3066\u306e\u5f79\u5272\u3092\u6301\u3061\u307e\u3059\u304c\u3001\u518d\u5e30\u95a2\u6570\u306e\u4f8b\u3067\u65e2\u306b\u307f\u305f\u3088\u3046\u306b\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u968e\u5c64\u304c\u3042\u307e\u308a\u306b\u3082\u6df1\u304f\u306a\u308b\u3068\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u6570\u304c\u5927\u304d\u304f\u306a\u308a\u3001\u30e1\u30e2\u30ea\u9818\u57df\u3092\u98df\u3044\u3064\u3076\u3057\u3066\u3057\u307e\u3046\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002\u4e0d\u8981\u306a\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u751f\u6210\u306f\u3067\u304d\u308c\u3070\u907f\u3051\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\n\n\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u95a2\u6570\u306e\u8a08\u7b97\u9014\u4e2d\u306e\u5024\u3092\u4fdd\u6301\u3059\u308b\u306e\u306b\u5fc5\u8981\u3067\u3059\u304c\u3001\u8a00\u3044\u63db\u3048\u308b\u3068\u3001\u8a08\u7b97\u9014\u4e2d\u306e\u5024\u304c\u305d\u308c\u4ee5\u4e0a\u4f7f\u7528\u3055\u308c\u306a\u3044\u306e\u3067\u3042\u308c\u3070\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3082\u4e0d\u8981\u3068\u3044\u3046\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u3001\u95a2\u6570\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306b\u7740\u76ee\u3057\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u3042\u308b\u95a2\u6570```f```\u304c\u5225\u306e\u95a2\u6570```g```\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3057\u3066\u3044\u308b\u3068\u304d\u3001```f```\u306e\u7d50\u679c\uff08\u30ea\u30bf\u30fc\u30f3\u5024\uff09\u306f```g```\u306e\u7d50\u679c\u305d\u306e\u3082\u306e\u3067\u3059\u3002\u3064\u307e\u308a\u3001```g```\u306e\u547c\u3073\u51fa\u3057\u5f8c\u306b```f```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093\u3002\u3057\u305f\u304c\u3063\u3066\u3001```g```\u306e\u547c\u3073\u51fa\u3057\u6642\u306b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092\u65b0\u305f\u306b\u751f\u6210\u3059\u308b\u306e\u3067\u306f\u306a\u304f\u3001```f```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092```g```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3068\u3057\u3066\u518d\u5229\u7528\u3059\u308b\u3053\u3068\u304c\u53ef\u80fd\u3067\u3059\u3002\u3053\u308c\u3092 **\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\uff08tail call elimination\uff09** \u3068\u547c\u3073\u307e\u3059\u3002\u30b3\u30f3\u30d1\u30a4\u30e9\u3084\u5b9f\u884c\u74b0\u5883\u304c\u884c\u3046\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092 **\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\uff08tail call optimization\uff09** \u3068\u3044\u3044\u307e\u3059\u3002\n\n\u4ee5\u4e0b\u306e\u7c21\u5358\u306a\u30b3\u30fc\u30c9\u3092\u307f\u3066\u304f\u3060\u3055\u3044\u3002```foo```\u306f```sum```\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3057\u3066\u3044\u307e\u3059\u3002\n\n```js\nfunction foo(x) {\n\treturn sum(x, x); // (A)\n}\n\nfunction sum(a, b) {\n\treturn a + b;\n}\n\nfoo(2); // (X)\n```\n\n#### \u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u308f\u306a\u3044\u30b1\u30fc\u30b9\n\n\u3053\u306e\u30b3\u30fc\u30c9\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u52d5\u304d\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u307e\u305a\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u308f\u306a\u3044\u901a\u5e38\u306e\u30b1\u30fc\u30b9\u3067\u3059\u3002\n\n\u4f4d\u7f6e(X)\u3067```foo```\u3092\u547c\u3073\u51fa\u3057\u305f\u76f4\u5f8c\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|foo:{x:2}:returnTo:(X)|\n\n\u6b21\u306b\u3001(A)\u306e\u4f4d\u7f6e\u3067```sum```\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u305f\u76f4\u5f8c\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|sum:{a:2, b:2}:returnTo:(A)|\n|foo:{x:2}:returnTo:(X)|\n\n\u95a2\u6570```sum```\u304c\u7d42\u4e86\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpop\u3055\u308c\u3001```returnTo```\u304c\u793a\u3059(A)\u306e\u4f4d\u7f6e\u304b\u3089```foo```\u306e\u95a2\u6570\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002\u3053\u3053\u3067\u3001```sum```\u306e\u623b\u308a\u5024\u3092\u4fdd\u6301\u3059\u308b\u305f\u3081\u306e\u4e00\u6642\u7684\u306a\u9818\u57df\u304c\u5185\u90e8\u7684\u306b\u751f\u6210\u3055\u308c\u3066\u3044\u308b\u306f\u305a\u3067\u3059\u3002\u3053\u306e\u4f8b\u3067\u306f```_tmp```\u5909\u6570\u306b```sum```\u306e\u623b\u308a\u5024\u304c\u683c\u7d0d\u3055\u308c\u308b\u3068\u3057\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|foo:{x:2, _tmp:4}:returnTo:(X)|\n\n\u6700\u5f8c\u306b```foo```\u306f```_tmp```\u306e\u5024\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u3066\u7d42\u4e86\u3057\u307e\u3059\u3002\n\n#### \u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u3046\u30b1\u30fc\u30b9\n\n\u6b21\u306b\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u3046\u5834\u5408\u306e\u6319\u52d5\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u307e\u305a\u3001```foo```\u306e\u547c\u3073\u51fa\u3057\u76f4\u5f8c\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|foo:{x:2}:returnTo:(X)|\n\n\u6b21\u306b\u3001(A)\u3067```sum```\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u307e\u3059\u3002\u901a\u5e38\uff08\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u308f\u306a\u3044\u5834\u5408\uff09\u306f\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304c\u751f\u6210\u3055\u308c\u3066push\u3055\u308c\u308b\u3053\u3068\u308d\u3067\u3059\u304c\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u3092\u884c\u3046\u5834\u5408\u3001```foo```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092```sum```\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u3068\u3057\u3066\u518d\u5229\u7528\u3057\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306f\u6b21\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u3053\u3053\u3067\u3001```foo```\u306e\u623b\u308a\u5148\u3068\u3057\u3066\u3001```sum```\u306e\u623b\u308a\u5148\uff08X\uff09\u304c\u8a2d\u5b9a\u3055\u308c\u308b\u3053\u3068\u306b\u6ce8\u76ee\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3064\u307e\u308a\u3001```sum```\u306e\u30ea\u30bf\u30fc\u30f3\u5024\uff08\u5b9f\u884c\u7d50\u679c\uff09\u304c\u305d\u306e\u307e\u307e```foo```\u306e\u30ea\u30bf\u30fc\u30f3\u5024\u3068\u306a\u308b\u306e\u3067\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|sum:{a:2, b:2}:returnTo:(X)|\n\n\u95a2\u6570```sum```\u306f\u8a08\u7b97\u7d50\u679c```4```\u3092```returnTo```\u304c\u793a\u3059\u4f4d\u7f6e(X)\u306b\u30ea\u30bf\u30fc\u30f3\u3057\u307e\u3059\u3002\n\n# \u672b\u5c3e\u518d\u5e30\u3068\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\n\n## \u672b\u5c3e\u518d\u5e30\n\n\u518d\u5e30\u95a2\u6570\u306e\u3046\u3061\u3001\u81ea\u5206\u81ea\u8eab\u306e\u547c\u3073\u51fa\u3057\u304c\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3068\u306a\u3063\u3066\u3044\u308b\u518d\u5e30\u95a2\u6570\u3092 **\u672b\u5c3e\u518d\u5e30\uff08tail recursive\uff09** \u3068\u547c\u3073\u307e\u3059\u3002\n\n\u672c\u8a18\u4e8b\u306e\u6700\u521d\u306b\u4f8b\u793a\u3057\u305f\u4ee5\u4e0b\u306e\u968e\u4e57\u8a08\u7b97\u95a2\u6570\u306f\u81ea\u5206\u81ea\u8eab\u3092\u518d\u5e30\u547c\u3073\u51fa\u3057\u3057\u305f\u3042\u3068\u3001```*```\u306b\u3088\u308b\u6f14\u7b97\u3092\u884c\u3063\u3066\u3044\u308b\u305f\u3081\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\uff08\u3064\u307e\u308a\u3001\u672b\u5c3e\u518d\u5e30\uff09\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\n\n```js\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u518d\u5e30\u95a2\u6570\uff08\u672b\u5c3e\u518d\u5e30\u3067\u306f\u306a\u3044\uff09\nfunction factorial(n) {\n\tif (n === 0) {\n\t\treturn 1;\n\t}\n\treturn n * factorial(n - 1); // \u81ea\u5206\u81ea\u8eab\u3092\u547c\u3073\u51fa\u3057\u305f\u5f8c\u306b\u3001* \u306b\u3088\u308b\u6f14\u7b97\u3092\u884c\u3063\u3066\u3044\u308b\u306e\u3067\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3067\u306f\u306a\u3044\u3002\n}\n```\n\n\u3053\u306e\u95a2\u6570\u3092\u3092\u672b\u5c3e\u518d\u5e30\u306b\u66f8\u304d\u76f4\u3057\u305f\u30b3\u30fc\u30c9\u306f\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\u5185\u90e8\u95a2\u6570```factorialTailCall```\u306f\u81ea\u5206\u81ea\u8eab\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3057\u3066\u3044\u307e\u3059\u3002\u30dd\u30a4\u30f3\u30c8\u306f\u3001\u6f14\u7b97\u7d50\u679c\u3092\u95a2\u6570\u306e\u5f15\u6570\u3068\u3057\u3066\u7d2f\u7a4d\u3057\u3066\u304f\u3068\u3053\u308d\u3067\u3059\u3002\n\n```js\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\uff08\u672b\u5c3e\u518d\u5e30\u30d0\u30fc\u30b8\u30e7\u30f3\uff09\nfunction factorial(n) {\n\n\t// \u672b\u5c3e\u518d\u5e30\u95a2\u6570\n\tfunction factorialTailCall(n, accum) {\n\t\tif (n === 0) {\n\t\t\treturn accum;\n\t\t}\n\t\treturn factorialTailCall(n - 1, n * accum); // \u81ea\u5206\u81ea\u8eab\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\n\t}\n\t\n\tvar result = factorialTailCall(n, 1); // (Y)\n\t\n\treturn result;\n}\n\nconsole.log(factorial(3)); // (X)\n```\n\n## \u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\n\n\u672b\u5c3e\u518d\u5e30\u306f\u81ea\u5206\u81ea\u8eab\u3092\u672b\u5c3e\u547c\u3073\u51fa\u3057\u3059\u308b\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\u3064\u307e\u308a\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u306e\u30c6\u30af\u30cb\u30c3\u30af\u304c\u5229\u7528\u3067\u304d\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e```factorialTailCall```\u95a2\u6570\u304c\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u9664\u53bb\u306b\u3088\u308b\u6700\u9069\u5316\u304c\u30b3\u30f3\u30d1\u30a4\u30e9\u306b\u3088\u3063\u3066\u884c\u308f\u308c\u3066\u3044\u308b\u3068\u4eee\u5b9a\u3057\u307e\u3057\u3087\u3046\u3002\u3053\u306e\u3068\u304d\u3001```factorial(3)```\u3092\u5b9f\u884c\u3057\u305f\u3068\u304d\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u72b6\u614b\u9077\u79fb\u3092\u307f\u3066\u307f\u307e\u3057\u3087\u3046\u3002\n\n\u307e\u305a\u3001```factorial```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304cpush\u3055\u308c\u307e\u3059\u3002```result```\u306e\u5024\u306f\u307e\u3060```undefined```\u3067\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|factorial:{n:3, result:undefined}:returnTo(X)|\n\n\n\u6b21\u306b\u3001(Y)\u306e\u4f4d\u7f6e\u3067\u3001```factorialTailCall(3, 1)```\u304c\u547c\u3073\u51fa\u3055\u308c\u308b\u305f\u3081\u3001```factorialTailCall```\u306e\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u304c\u751f\u6210\u3055\u308c\u3066push\u3055\u308c\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001```n```\u3068```accum```\u306e\u5024\u306f\u305d\u308c\u305e\u308c\u3001```3```\u3068```1```\u306b\u521d\u671f\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|factorialTailCall:{n:3, accum:1}:returnTo(Y)|\n|factorial:{n:3, result:undefined}:returnTo(X)|\n\n\n\u6b21\u306b\u3001```factorialTailCall```\u304c\u518d\u5e30\u547c\u3073\u51fa\u3055\u308c\u308b\u3068\u3001\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u751f\u6210\u3055\u308c\u305a\u3001\u65e2\u306b\u3042\u308b\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e```n```\u3068```accum```\u306e\u5024\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\u305d\u3057\u3066\u3001```factorialTailCall```\u306e\u5b9f\u884c\u304c\u958b\u59cb\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|factorialTailCall:{n:2, accum:3}:returnTo(Y)|\n|factorial:{n:3, result:undefined}:returnTo(X)|\n\n\u3055\u3089\u306b\u3001```factorialTailCall```\u304c\u518d\u5e30\u7684\u306b\u547c\u3073\u51fa\u3055\u308c\u307e\u3059\u3002\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e```n```\u3068```accum```\u306e\u5024\u304c\u66f4\u65b0\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|factorialTailCall:{n:1, accum:6}:returnTo(Y)|\n|factorial:{n:3, result:undefined}:returnTo(X)|\n\n\u6700\u5f8c\u306e\u518d\u5e30\u547c\u3073\u51fa\u3057\u304c\u5b9f\u884c\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|factorialTailCall:{n:0, accum:6}:returnTo(Y)|\n|factorial:{n:3, result:undefined}:returnTo(X)|\n\n\u95a2\u6570```factorialTailCall```\u306f```accum```\u306e\u5024```6```\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u307e\u3059\u3002\u3053\u306e\u3068\u304d\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306fpop\u3055\u308c\u3066\u3001\u4f4d\u7f6e(Y)\u304b\u3089```factorial```\u95a2\u6570\u306e\u5b9f\u884c\u304c\u518d\u958b\u3055\u308c\u307e\u3059\u3002```result```\u306f```accum```\u306e\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u307e\u3059\u3002\n\n|\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af|\n|----|\n|factorial:{n:3, result:6}:returnTo(X)|\n\n\u95a2\u6570```factorial```\u306f```result```\u306e\u5024\u3092\u30ea\u30bf\u30fc\u30f3\u3057\u3001(X)\u306e\u4f4d\u7f6e\u304b\u3089\u51e6\u7406\u304c\u518d\u958b\u3057\u307e\u3059\u3002\n\n\u4e0a\u8a18\u306e\u3088\u3046\u306b\u3001\u672b\u5c3e\u518d\u5e30\u95a2\u6570```factorialTailCall```\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u6d88\u8cbb\u6570\u306f\u5e38\u306b\uff11\u3064\u3067\u3059\u3002\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306b\u3088\u308a\u3001\u672b\u5c3e\u518d\u5e30\u306f\u52b9\u7387\u7684\u306b\u5b9f\u884c\u3067\u304d\u308b\u3053\u3068\u304c\u7406\u89e3\u3067\u304d\u308b\u3068\u601d\u3044\u307e\u3059\u3002\n\n# JavaScript\u3067\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\n\n\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306f\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u30c6\u30af\u30cb\u30c3\u30af\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u30b3\u30f3\u30d1\u30a4\u30e9\u306a\u3069\u306e\u8a00\u8a9e\u51e6\u7406\u7cfb\u306b\u3088\u308b\u30b3\u30fc\u30c9\u6700\u9069\u5316\u306e\u6280\u8853\u3067\u3059\u3002\u4f8b\u3048\u3070\u3001Java\u306f\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u540c\u3058JVM\u8a00\u8a9e\u3067\u3082Scala\u306f\u5236\u9650\u4ed8\u304d\u3067\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u3059\u3002Scheme\u306f\u8a00\u8a9e\u306e\u5b9f\u88c5\u4ed5\u69d8\u3068\u3057\u3066\u8981\u6c42\u3057\u3066\u3044\u307e\u3059\u3002\n\nJavaScript\u306b\u3064\u3044\u3066\u306f\u3001\u3053\u308c\u307e\u3067\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306f\u5b9f\u884c\u74b0\u5883\u306e\u5b9f\u88c5\u8005\u306b\u4f9d\u5b58\u3057\u3066\u3044\u307e\u3057\u305f\u3002ES6\u3067\u306fScheme\u3068\u540c\u3058\u3088\u3046\u306b\u8a00\u8a9e\u4ed5\u69d8\u3068\u3057\u3066\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u6c42\u3081\u3066\u3044\u307e\u3059\u3002\u305d\u306e\u305f\u3081\u3001\u4eca\u5f8c\u3001\u5404\u30d6\u30e9\u30a6\u30b6\u306fES6\u306b\u6e96\u62e0\u3059\u308b\u305f\u3081\u306b\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3059\u308b\u3067\u3057\u3087\u3046\u3002\u305f\u3060\u3057\u3001\u73fe\u6642\u70b9\u3067\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u3092\u5b9f\u88c5\u3057\u3066\u3044\u308b\u30d6\u30e9\u30a6\u30b6\u306f\u306a\u3044\u3088\u3046\u3067\u3059\uff08[\u30d6\u30e9\u30a6\u30b6\u3084altJS\u306a\u3069\u306eES6\u4e92\u63db\u8868](http://kangax.github.io/compat-table/es6/)\u3092\u53c2\u7167\uff09\u3002\n\n\u305f\u3060\u3057\u3001\u5f8c\u8ff0\u3059\u308bBabel\u3092\u5229\u7528\u3059\u308b\u3068\u3001JavaScript\u3067\u3082\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u306e\u6069\u6075\u3092\u53d7\u3051\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n# Babel\u306b\u3088\u308b\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\n\nBabel\u306fES6\u306e\u30b3\u30fc\u30c9\u304b\u3089ES5\u306e\u30b3\u30fc\u30c9\u3092\u751f\u6210\u3059\u308b\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30e9\u306e\u4e00\u7a2e\u3067\u3059\u3002Babel\u3067\u306f\u3001ES5\u3092\u751f\u6210\u3059\u308b\u904e\u7a0b\u3067\u3001\u672b\u5c3e\u518d\u5e30\u3092\u901a\u5e38\u306e\u30eb\u30fc\u30d7\u51e6\u7406\u306b\u5909\u63db\u3059\u308b\u3053\u3068\u3067\u3001\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u3092\u5b9f\u73fe\u3057\u3066\u3044\u307e\u3059\u3002\u305f\u3060\u3057\u3001Babel\u304c\u53ef\u80fd\u306a\u6700\u9069\u5316\u306b\u306f\u5236\u7d04\u304c\u3042\u308a\u3001\u76f8\u4e92\u518d\u5e30\uff08\u4ed8\u9332\u3092\u53c2\u7167\u3057\u3066\u304f\u3060\u3055\u3044\uff09\u306a\u3069\u306e\u8907\u96d1\u306a\u518d\u5e30\u95a2\u6570\u306e\u6700\u9069\u5316\u306f\u3067\u304d\u307e\u305b\u3093\u3002\u81ea\u5206\u81ea\u8eab\u3092\u76f4\u63a5\u547c\u3073\u51fa\u3059\u672b\u5c3e\u518d\u5e30\u306e\u307f\u304c\u6700\u9069\u5316\u5bfe\u8c61\u3067\u3059\u3002\n\n\u3067\u306f\u3001Babel\u306b\u3088\u308b\u672b\u5c3e\u518d\u5e30\u306e\u6700\u9069\u5316\u306e\u5b9f\u9a13\u3092\u884c\u3063\u3066\u307f\u307e\u3057\u3087\u3046\u3002\u672c\u8a18\u4e8b\u3067\u7d39\u4ecb\u3057\u305f\u672b\u5c3e\u518d\u5e30\u30d0\u30fc\u30b8\u30e7\u30f3\u306e\u518d\u5e30\u95a2\u6570\u3092\u518d\u63b2\u3057\u307e\u3059\u3002\n\n```js\n// \u968e\u4e57\u3092\u8a08\u7b97\u3059\u308b\u95a2\u6570\uff08\u672b\u5c3e\u518d\u5e30\u30d0\u30fc\u30b8\u30e7\u30f3\uff09\nfunction factorial(n) {\n\tfunction factorialTailCall(n, accum) {\n\t\tif (n === 0) {\n\t\t\treturn accum;\n\t\t}\n\t\treturn factorialTailCall(n - 1, n * accum);\n\t}\n\treturn factorialTailCall(n, 1);\n}\n```\n\n\u3053\u306e\u95a2\u6570\u3092Babel\u306b\u3088\u308aES5\u306e\u30b3\u30fc\u30c9\u306b\u5909\u63db\u3059\u308b\u3068\u3001\u6b21\u306e\u3088\u3046\u306a\u30b3\u30fc\u30c9\u304c\u751f\u6210\u3055\u308c\u307e\u3059\u3002\u4eca\u56de\u306e\u5909\u63db\u306f\u3001Babel\u304c\u63d0\u4f9b\u3059\u308b[Web\u30b5\u30fc\u30d3\u30b9](https://babeljs.io/repl/)\u3092\u5229\u7528\u3057\u307e\u3057\u305f\u3002\n\n```js\nfunction factorial(n) {\n\tfunction factorialTailCall(_x, _x2) {\n\t\tvar _again = true;\n\n\t\t_function: while (_again) {\n\t\t\tvar n = _x,\n\t\t\t    accum = _x2;\n\t\t\t_again = false;\n\n\t\t\tif (n === 0) {\n\t\t\t\treturn accum;\n\t\t\t}\n\t\t\t_x = n - 1;\n\t\t\t_x2 = n * accum;\n\t\t\t_again = true;\n\t\t\tcontinue _function;\n\t\t}\n\t}\n\treturn factorialTailCall(n, 1);\n}\n```\n\n\u95a2\u6570```factorialTailCall```\u304c```while```\u3092\u4f7f\u3063\u305f\u30eb\u30fc\u30d7\u306b\u5909\u63db\u3055\u308c\u3066\u3044\u308b\u306e\u304c\u5206\u304b\u308a\u307e\u3059\u306d\uff01\n\n# \u307e\u3068\u3081\n\n\u518d\u5e30\u95a2\u6570\u3092\u5229\u7528\u3059\u308b\u3068\u30eb\u30fc\u30d7\u3088\u308a\u3082\u30a8\u30ec\u30ac\u30f3\u30c8\u306b\u30b3\u30fc\u30c9\u304c\u66f8\u3051\u308b\u5834\u5408\u304c\u3042\u308b\u306e\u3067\u3001\u3053\u308c\u304b\u3089\u306eJavaScript(ES6)\u3067\u306f\u7a4d\u6975\u7684\u306b\u4f7f\u3063\u3066\u3044\u304d\u305f\u3044\u3068\u3053\u308d\u3067\u3059\u3002\u305f\u3060\u3057\u3001\u901a\u5e38\u306e\u518d\u5e30\u3067\u306f\u306a\u304f\u3001\u672b\u5c3e\u518d\u5e30\u3067\u306a\u3051\u308c\u3070\u5b9f\u884c\u6642\u306e\u52b9\u7387\u304c\u60aa\u3044\u3068\u3044\u3046\u8ab2\u984c\u304c\u3042\u308a\u307e\u3059\u3002\u65b9\u91dd\u3068\u3057\u3066\u306f\u3001\u307e\u305a\u306f\u901a\u5e38\u306e\u518d\u5e30\u95a2\u6570\u3067\u30b3\u30fc\u30c9\u5316\u3057\u305f\u5f8c\u3001\u518d\u5e30\u95a2\u6570\u3092\u672b\u5c3e\u518d\u5e30\u306b\u30ea\u30d5\u30a1\u30af\u30bf\u30ea\u30f3\u30b0\u3059\u308b\u3068\u3044\u3046\u6d41\u308c\u306b\u306a\u308b\u3067\u3057\u3087\u3046\u3002\u518d\u5e30\u95a2\u6570\u306e\u4f5c\u6210\u306e\u79d8\u8a23\u306f\u3001[\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0Haskell](http://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0Haskell-Graham-Hutton/dp/4274067815)\u306b\u7d39\u4ecb\u3055\u308c\u3066\u3044\u307e\u3059\u306e\u3067\u662f\u975e\u53c2\u7167\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002\n\n\n# \u4ed8\u9332\n\n## \u591a\u91cd\u518d\u5e30\n\n\u81ea\u5206\u81ea\u8eab\u3092\u8907\u6570\u56de\u547c\u3073\u51fa\u3059\u518d\u5e30\u95a2\u6570\u3092 **\u591a\u91cd\u518d\u5e30\u95a2\u6570** \u3068\u547c\u3073\u307e\u3059\u3002[\u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570](https://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A3%E3%83%9C%E3%83%8A%E3%83%83%E3%83%81%E6%95%B0)\u3092\u6c42\u3081\u308b\u4ee5\u4e0b\u306e\u95a2\u6570\u306f\u591a\u91cd\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\n\n```js\n// \u30d5\u30a3\u30dc\u30ca\u30c3\u30c1\u6570\u3092\u6c42\u3081\u308b\u95a2\u6570\nfunction fibonacci(n) {\n\tif (n === 0 || n === 1) {\n\t\treturn n;\n\t}\n\treturn fibonacci(n - 1) + fibonacci(n - 2);\n}\n\nconsole.log(fibonacci(0)); // 0\nconsole.log(fibonacci(1)); // 1\nconsole.log(fibonacci(2)); // 1\nconsole.log(fibonacci(3)); // 2\nconsole.log(fibonacci(4)); // 3\n```\n\n## \u76f8\u4e92\u518d\u5e30\n\n\u8907\u6570\u306e\u95a2\u6570\u304c\u3001\u305d\u308c\u305e\u308c\u3092\u547c\u3073\u51fa\u3057\u5408\u3046\u5834\u5408\u3001\u3053\u308c\u3089\u306e\u95a2\u6570\u3092 **\u76f8\u4e92\u518d\u5e30\u95a2\u6570** \u3068\u547c\u3073\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u4ee5\u4e0b\u306e\u5076\u6570\u30fb\u5947\u6570\u3092\u5224\u5b9a\u3059\u308b\u95a2\u6570\u306f\u76f8\u4e92\u518d\u5e30\u95a2\u6570\u3067\u3059\u3002\n\n```js\n// n\u304c\u5076\u6570\u306a\u3089\u3070true\u3092\u8fd4\u3059\u95a2\u6570\nfunction isEven(n) {\n\tif (n === 0) {\n\t\treturn true;\n\t}\n\treturn isOdd(n - 1);\n}\n\n// n\u304c\u5947\u6570\u306a\u3089\u3070true\u3092\u8fd4\u3059\u95a2\u6570\nfunction isOdd(n) {\n\tif (n === 0) {\n\t\treturn false;\n\t}\n\treturn isEven(n - 1);\n}\n```\n\n## ES6\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306e\u4ed5\u69d8\n\nES6\u3067\u306f\u62bd\u8c61\u64cd\u4f5c\u95a2\u6570\u306e[PrepareForTailCall](http://www.ecma-international.org/ecma-262/6.0/#sec-preparefortailcall)\u306e\u5b9f\u884c\u6642\u306e\u610f\u5473\u8ad6\u3068\u3057\u3066\u3001\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6642\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u52d5\u4f5c\u304c\u5b9a\u7fa9\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002PrepareForTailCall\u306f\u672b\u5c3e\u547c\u3073\u51fa\u3057\u306e\u4f4d\u7f6e\u306b\u3042\u308b\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u524d\u306b\u73fe\u5728\u306e\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u5148\u982d\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff08\u3064\u307e\u308a\u547c\u3073\u51fa\u3057\u5143\u95a2\u6570\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff09\u3092pop\u3057\u307e\u3059\u3002\u6b21\u306b\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u304c\u767a\u751f\u3059\u308b\u3068\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092push\u3057\u307e\u3059\u3002\u672c\u8a18\u4e8b\u3067\u306f\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092\u518d\u5229\u7528\u3059\u308b\u3068\u3044\u3046\u524d\u63d0\u3067\u89e3\u8aac\u3057\u307e\u3057\u305f\u304c\u3001ES6\u3067\u306f\u3001\u3044\u3063\u305f\u3093pop\u3057\u3066\u304b\u3089\u518d\u5ea6push\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u306d\u3002\n\n\u307e\u305f\u3001\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092pop\u3059\u308b\u3068\u95a2\u6570\u306e\u623b\u308a\u5148\u306f\u6d88\u3048\u308b\u3060\u308d\u3046\u3068\u601d\u3044\u307e\u3057\u305f\u304c\u3001ES6\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306f\u623b\u308a\u5148\u306e\u4f4d\u7f6e\u3067\u306f\u306a\u304f\u3001\u73fe\u5728\u5b9f\u884c\u4e2d\u306e\u4f4d\u7f6e\u3092\u4fdd\u6301\u3057\u3066\u3044\u308b\u3088\u3046\u3067\u3059\u3002\u3064\u307e\u308a\u3001\u95a2\u6570\u547c\u3073\u51fa\u3057\u6642\u306b\u73fe\u5728\u306e\u4f4d\u7f6e\u3092\u4fdd\u6301\u3057\u3066\u304b\u3089\u65b0\u3057\u3044\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092push\u3057\u307e\u3059\u3002\u95a2\u6570\u306e\u547c\u3073\u51fa\u3057\u304c\u7d42\u4e86\u3059\u308b\u3068\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u3092pop\u3057\u3001\u8a18\u61b6\u3057\u3066\u3044\u308b\u4f4d\u7f6e\u304b\u3089\u5b9f\u884c\u3092\u518d\u958b\u3059\u308b\u308f\u3051\u3067\u3059\u3002\u3053\u306e\u8fba\u306f\u5b8c\u5168\u306b\u7406\u89e3\u3057\u3066\u3044\u308b\u308f\u3051\u3067\u306f\u306a\u3044\u306e\u3067\u9593\u9055\u3063\u3066\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u304c\u3054\u5bb9\u8d66\u304f\u3060\u3055\u3044\u3002\n\nPrepareForTailCall\u306e\u610f\u5473\u8ad6\u306eNOTE\u3068\u3057\u3066\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306b\u8a18\u8ff0\u3055\u308c\u3066\u3044\u307e\u3059\u3002\n\n>For example, a tail position call should only grow an implementation\u2019s activation record stack by the amount that the size of the target function\u2019s activation record exceeds the size of the calling function\u2019s activation record. If the target function\u2019s activation record is smaller, then the total size of the stack should decrease.\n\n\u3064\u307e\u308a\u3001\u547c\u3073\u51fa\u3057\u5148\u95a2\u6570\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\uff08\u539f\u6587\u3067\u306f\u30a2\u30af\u30c6\u30a3\u30d9\u30fc\u30b7\u30e7\u30f3\u30ec\u30b3\u30fc\u30c9\u3068\u3042\u308a\u307e\u3059\uff09\u306e\u30b5\u30a4\u30ba\u304c\u547c\u3073\u51fa\u3057\u5143\u95a2\u6570\u306e\u30b9\u30bf\u30c3\u30af\u30d5\u30ec\u30fc\u30e0\u306e\u30b5\u30a4\u30ba\u3088\u308a\u8d85\u904e\u3057\u305f\u5206\u3060\u3051\u3001\u30b3\u30fc\u30eb\u30b9\u30bf\u30c3\u30af\u306e\u7dcf\u30b5\u30a4\u30ba\u306f\u5927\u304d\u304f\u306a\u308b\uff08\u3042\u308b\u3044\u306f\u5c0f\u3055\u304f\u306a\u308b\uff09\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u306d\u3002\n\n\n# \u53c2\u8003\u30b5\u30a4\u30c8\u3068\u66f8\u7c4d\n\n* [EcmaScript6\u306e\u8a00\u8a9e\u4ed5\u69d8\u66f8](http://www.ecma-international.org/ecma-262/6.0/)\n\n* [Babel\u306eES6\u306e\u89e3\u8aac](https://babeljs.io/docs/learn-es2015/)\n\n* [\u30d6\u30e9\u30a6\u30b6\u3084altJS\u306a\u3069\u306eES6\u4e92\u63db\u8868](http://kangax.github.io/compat-table/es6/)\n\n* [EcmaScript6\u306e\u672b\u5c3e\u547c\u3073\u51fa\u3057\u6700\u9069\u5316\u306b\u95a2\u3059\u308b\u89e3\u8aac](http://www.2ality.com/2015/06/tail-call-optimization.html)\n\n* [\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0Haskell](http://www.amazon.co.jp/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0Haskell-Graham-Hutton/dp/4274067815)\n", "tags": ["JavaScript", "es6", "babel"]}