{"context": "\n\nCakePHP3 \u3067\u3001\u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306bsort \u3059\u308b\u65b9\u6cd5\n\u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306bsort \u3057\u305f\u304b\u3063\u305f\u3002\n\u307e\u305a\u306f\u4f8b\u3002  \n\u4f8b1  \n\n\n\nid\nfruits\n\n\n\n\n1\nApple\n\n\n2\nOrange\n\n\n3\nPeach\n\n\n4\napple\n\n\n5\norange\n\n\n6\npeach\n\n\n\nView \u3067\u4f8b1 \u307f\u305f\u3044\u306a\u611f\u3058\u306b\u4e26\u3093\u3067\u3044\u305f\u3068\u3059\u308b\u3002  \n\u3053\u308c\u3092  \n\u4f8b2 \n\n\n\nid\nfruits\n\n\n\n\n1\nApple\n\n\n4\napple\n\n\n2\nOrange\n\n\n5\norange\n\n\n3\nPeach\n\n\n6\npeach\n\n\n\n\u4f8b2 \u307f\u305f\u3044\u306b\u3057\u305f\u3044\uff01  \n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u8abf\u3079\u305f\u3002(\u6559\u3048\u3066\u3082\u3089\u3063\u305f)  \n\u65b9\u6cd5\u306f\u3001\nview\u5074\u3002\u3064\u307e\u308ahoge.ctp\u3067\u3001\n\n$this->paginator->sort('lower(fruits)')\n\n\u3068\u66f8\u304f\u3002\nlower() \u3067\u3001 \u5168\u90e8\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3057\u3066\u304b\u3089SELECT\u3057\u3066\u3044\u308b\u3089\u3057\u3044(SQL\u306e\u8a71)  \n\u305d\u306e\u5f8c\u3001Controller \u5074\u3067\u3001\n$paginate = [\n    // 'limit' => 10,\n    'sortWhitelist' => [\n        'lower(fruits)'\n    ],\n]\n\n\u3068\u3044\u3046\u611f\u3058\u3067 sortWhitelist \u3068\u3044\u3046\u914d\u5217\u306b lower(fruits) \u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u7a81\u3063\u8fbc\u3080\uff01\nsortWhitelist\u306b\u95a2\u3057\u3066\u306f\u3001\u3053\u3061\u3089\u3092\u53c2\u7167\uff01\n\u3053\u308c\u306b\u3066\u5b8c\u6210\uff01  \n\u3061\u306a\u307f\u306b\u3001 sortWhitelist \u3092\u4f7f\u3046\u3068\u304d\u306f\u3001\nsort \u306e\u5bfe\u8c61\u3068\u306a\u308b\u6587\u5b57\u5217\u3092\u5168\u90e8\u7a81\u3063\u8fbc\u307e\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u3089\u3057\u3044\u3002\n\u3064\u307e\u308a\u3001\u521d\u671f\u6761\u4ef6\u3068\u3057\u3066id \u964d\u9806\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u3001\n$paginate = [\n    // 'limit' => 10,\n    'order' => ['id' => 'asc'],\n    'sortWhitelist' => [\n        'lower(fruits)', 'id'\n    ],\n]\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u66f8\u304b\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u3002\n\u5730\u5473\u306b\u30cf\u30de\u308a\u305d\u3046\u306a\u306e\u3067\u3001\u982d\u306e\u7247\u9685\u306b\u7f6e\u3044\u3066\u304a\u3044\u3066\u4e0b\u3055\u3044\uff01\n\u4ee5\u4e0a\uff01\n# CakePHP3 \u3067\u3001\u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306bsort \u3059\u308b\u65b9\u6cd5\n\n\u5927\u6587\u5b57\u3068\u5c0f\u6587\u5b57\u3092\u533a\u5225\u305b\u305a\u306bsort \u3057\u305f\u304b\u3063\u305f\u3002  \n\u307e\u305a\u306f\u4f8b\u3002  \n\n\u4f8b1  \n\n| id |  fruits   |\n|:--:|:---------:|\n| 1  |     Apple |\n| 2  |    Orange |\n| 3  |     Peach |\n| 4  |     apple |\n| 5  |    orange |\n| 6  |     peach |\n\n\nView \u3067\u4f8b1 \u307f\u305f\u3044\u306a\u611f\u3058\u306b\u4e26\u3093\u3067\u3044\u305f\u3068\u3059\u308b\u3002  \n\n\u3053\u308c\u3092  \n\n\u4f8b2 \n\n| id |  fruits   |\n|:--:|:---------:|\n| 1  |     Apple |\n| 4  |     apple |\n| 2  |    Orange |\n| 5  |    orange |\n| 3  |     Peach |\n| 6  |     peach |\n\n\u4f8b2 \u307f\u305f\u3044\u306b\u3057\u305f\u3044\uff01  \n\n\u3068\u3044\u3046\u3053\u3068\u3067\u3001\u8abf\u3079\u305f\u3002(\u6559\u3048\u3066\u3082\u3089\u3063\u305f)  \n\n\n\u65b9\u6cd5\u306f\u3001  \n`view`\u5074\u3002\u3064\u307e\u308a`hoge.ctp`\u3067\u3001  \n```\n$this->paginator->sort('lower(fruits)')\n```\n\n\u3068\u66f8\u304f\u3002  \n`lower()` \u3067\u3001 \u5168\u90e8\u5c0f\u6587\u5b57\u306b\u5909\u63db\u3057\u3066\u304b\u3089`SELECT`\u3057\u3066\u3044\u308b\u3089\u3057\u3044(SQL\u306e\u8a71)  \n\n\u305d\u306e\u5f8c\u3001Controller \u5074\u3067\u3001\n\n```php\n$paginate = [\n    // 'limit' => 10,\n    'sortWhitelist' => [\n        'lower(fruits)'\n    ],\n]\n```\n\u3068\u3044\u3046\u611f\u3058\u3067 `sortWhitelist` \u3068\u3044\u3046\u914d\u5217\u306b `lower(fruits)` \u3068\u3044\u3046\u6587\u5b57\u5217\u3092\u7a81\u3063\u8fbc\u3080\uff01  \n`sortWhitelist`\u306b\u95a2\u3057\u3066\u306f\u3001[\u3053\u3061\u3089](http://book.cakephp.org/3.0/ja/controllers/components/pagination.html#id3)\u3092\u53c2\u7167\uff01\n\n\u3053\u308c\u306b\u3066\u5b8c\u6210\uff01  \n\n\n\u3061\u306a\u307f\u306b\u3001 `sortWhitelist` \u3092\u4f7f\u3046\u3068\u304d\u306f\u3001  \n`sort` \u306e\u5bfe\u8c61\u3068\u306a\u308b\u6587\u5b57\u5217\u3092\u5168\u90e8\u7a81\u3063\u8fbc\u307e\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u3089\u3057\u3044\u3002\n\u3064\u307e\u308a\u3001\u521d\u671f\u6761\u4ef6\u3068\u3057\u3066`id` \u964d\u9806\u3092\u6307\u5b9a\u3059\u308b\u5834\u5408\u3001\n\n```php\n$paginate = [\n    // 'limit' => 10,\n    'order' => ['id' => 'asc'],\n    'sortWhitelist' => [\n        'lower(fruits)', 'id'\n    ],\n]\n```\n\n\u307f\u305f\u3044\u306a\u611f\u3058\u3067\u66f8\u304b\u306a\u304f\u3066\u306f\u306a\u3089\u306a\u3044\u3002\n\u5730\u5473\u306b\u30cf\u30de\u308a\u305d\u3046\u306a\u306e\u3067\u3001\u982d\u306e\u7247\u9685\u306b\u7f6e\u3044\u3066\u304a\u3044\u3066\u4e0b\u3055\u3044\uff01\n\n\u4ee5\u4e0a\uff01\n\n", "tags": ["cakephp3", "paginate", "sort"]}