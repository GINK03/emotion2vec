{"tags": ["tmlib.js"], "context": " \u3053\u306e\u8a18\u4e8b\u306f\u6700\u7d42\u66f4\u65b0\u65e5\u304b\u30891\u5e74\u4ee5\u4e0a\u304c\u7d4c\u904e\u3057\u3066\u3044\u307e\u3059\u3002\n\ntmlib\u3067\u5b66\u3076\u3001\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u578b\u306e\u30af\u30e9\u30b9\u8a2d\u8a08\n\u306a\u3093\u3066\u96e3\u3057\u305d\u3046\u306a\u3053\u3068\u3044\u3063\u3066\u307e\u3059\u304c\u2026\u30b2\u30fc\u30e0\u958b\u767a\u3092\u3084\u3063\u3066\u3044\u3066\u3001\u5f8c\u3067\u5373\u6b7b\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3068\u304b\u305d\u3046\u3044\u3046\u306e\u306e\u30e1\u30e2\u3067\u3059\u3002\n\u307e\u305a\u306f\u30e2\u30c7\u30eb\u3068\u306a\u308b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8cbc\u308a\u307e\u3059\u3002\n\u30b2\u30fc\u30e0\u306e\u52d5\u4f5c\u3092\u66f8\u304fGameScene\u30af\u30e9\u30b9\u3068\u3001\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u66f8\u304fEffect\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3059\u3002\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\u969b\u306b\u3001\u6c4e\u7528\u6027\u306e\u3042\u308b(\u3068\u3044\u3046\u304b\u3001\u3042\u308b\u7a0b\u5ea6\u306e\u4ed5\u69d8\u5909\u66f4\u306b\u8010\u3048\u3089\u308c\u308b)Effect\u30af\u30e9\u30b9\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\nvar SCREEN_WIDTH  = 640;\nvar SCREEN_HEIGHT = 960;\nvar SCREEN_CENTER_X = SCREEN_WIDTH/2;\nvar SCREEN_CENTER_Y = SCREEN_HEIGHT/2;\n\ntm.main(function() {\n    var app = tm.display.CanvasApp(\"#world\");\n    app.resize(SCREEN_WIDTH, SCREEN_HEIGHT);\n    app.fitWindow();\n    app.replaceScene(GameScene());\n    app.run();\n});\n\n\ntm.define(\"GameScene\", {\n    superClass: \"tm.app.Scene\",\n\n    init: function() {\n        var self = this;\n        self.superInit();\n\n        self.fromJSON({\n            children: {\n                \"label\": {\n                    type: \"tm.display.Label\",\n                    init: [\"\u30bf\u30c3\u30c1\u3059\u308b\u3068\u30a8\u30d5\u30a7\u30af\u30c8\u304c\u51fa\u308b\u3088\"],\n                    x: SCREEN_CENTER_X,\n                    y: 800,\n                }\n            },\n        });\n\n        // \u30a8\u30d5\u30a7\u30af\u30c8\u4f5c\u6210\n        self.onpointingstart = function () {\n            Effect().addChildTo(self);\n        };\n    },\n\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            self.gameOver();\n            self.update = function () {};\n        }\n    },\n    // \u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u30b7\u30fc\u30f3\u3078\u306e\u9077\u79fb\u306a\u3069\n    gameOver: function () {\n        var self = this;\n        tm.display.Label(\"GAME OVER\")\n            .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y)\n            .setFontSize(40)\n            .addChildTo(self);\n    },\n});\n\ntm.define(\"Effect\", {\n    superClass: \"tm.display.CanvasElement\",\n\n    init: function () {\n        var self = this;\n        self.superInit();\n        self.startEffect();\n    },\n\n    startEffect: function () {\n        var self = this;\n        // 10\u500b\u4f5c\u308b\n        (10).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                });\n        });\n    },\n});\n\n\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089\n\n\u65b0\u3057\u3044\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\n\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u524d\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u8868\u793a\u3057\u3066\u3001\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u3092\u5b9f\u884c\u3057\u305f\u3044(\u3055\u305b\u3066\u307b\u3057\u3044)\u3068\u3044\u3046\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u3068\u3057\u307e\u3059\u3002\u3069\u3046\u5b9f\u88c5\u3059\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\n\n\u4e00\u756a\u30c0\u30e1\u306a\u30d1\u30bf\u30fc\u30f3\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089)\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect(self).addChildTo(self);\n            self.update = function () {};\n        }\n    },\n\n    // Effect\u30af\u30e9\u30b9\n    init: function (scene) {\n        var self = this;\n        self.gameScene = scene;\n        self.superInit();\n        self.startEffect();\n    },\n\n    startEffect: function () {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        self.gameScene.gameOver();\n                    }\n                });\n        });\n    },\n\nGameScene\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3054\u3068\u3001Effect\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3057\u3066\u4fdd\u6301\u3057\u3061\u3083\u3063\u3066\u307e\u3059\u3002100\uff05\u5f8c\u6094\u3057\u307e\u3059\u3002\u3082\u306f\u3084\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u3084\u308a\u76f4\u3057\u305f\u3089\uff1f\u3068\u3044\u308f\u308c\u308b\u30ec\u30d9\u30eb\u3067\u3059\u3002\u4ed6\u4eba\u304c\u30b3\u30fc\u30c9\u3092\u898b\u305f\u3068\u304d\u8ffd\u3044\u304b\u3051\u308b\u3053\u3068\u3059\u3089\u56f0\u96e3\u306b\u306a\u308a\u307e\u3059\u3002\u76f8\u4e92\u53c2\u7167\u3067\u3059\u3002\u3067\u3082\u305f\u307e\u306b\u898b\u307e\u3059\u3002(\u3054\u3081\u3093\u306a\u3055\u3044)\n\n\u3053\u308c\u3082\u3082\u3061\u308d\u3093\u30c0\u30e1\n\u8a00\u308f\u305a\u3082\u304c\u30fc\u306a\u30fc\u3002\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089)\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect().startEffect(self).addChildTo(self);\n            self.update = function () {};\n        }\n    },\n\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function (scene) {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        scene.gameOver();\n                    }\n                });\n        });\n\n        return self;\n    },\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u5b9f\u884c\u3092\u884c\u3046\u306e\u3067\u306f\u306a\u304f\u3001\u76f4\u63a5Scene\u5074\u304b\u3089\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u308c\u81ea\u4f53\u306f\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3082GameScene\u3092\u5f15\u6570\u3067\u6e21\u3057\u3066\u3001Effect\u5074\u3067GameScene\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\u3055\u3063\u304d\u3088\u308a\u306f\u307e\u3060\u30de\u30b7\u3067\u3059\u3051\u3069\u3001\u3053\u308c\u3082\u6c4e\u7528\u6027\u306a\u3044\u3063\u3059\u3002\u3068\u3044\u3046\u304b\u3001GameScene\u30af\u30e9\u30b9\u306egameOver\u95a2\u6570\u3092\u3001\u6c4e\u7528\u7684\u306b\u4f5c\u308b\u3079\u304dEffect\u30af\u30e9\u30b9\u3067\u547c\u3076\u3088\u3046\u306a\u69cb\u9020\u306f\u3084\u3081\u305f\u65b9\u304c\u3044\u3044\u3067\u3059\u3002\u4ed6\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u4f7f\u3044\u305f\u3044\u3068\u304b\u7121\u7406\u306b\u306a\u308b\u306e\u3067\u3002\n\n\u3060\u3044\u305f\u3044\u6b63\u89e3\uff1f\n\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3057\u3066\u30ad\u30e3\u30c3\u30c1\u3059\u308b\u69cb\u9020\u304c\u306a\u304b\u3063\u305f\u308a\u3057\u305f\u3089\u4f7f\u3044\u307e\u3059\u3002callback\u3067\u3059\u3002\u3053\u308c\u3067\u76f8\u4e92\u53c2\u7167\u7121\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089)\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect().addChildTo(self).startEffect(function () {\n                self.gameOver();\n            });\n            self.update = function () {};\n        }\n    },\n\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function (callback) {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        callback();\n                    }\n                });\n        });\n\n        return self;\n    },\n\n\n\u3053\u306e\u8003\u3048\u65b9\u3092tmlib\u3067\u899a\u3048\u307e\u3057\u305f\ncallback\u3068\u540c\u3058\u8003\u3048\u65b9\u3067\u3059\u3002\u5f15\u6570\u306b\u3059\u3089\u7e1b\u3089\u308c\u306a\u3044\u306e\u3067\u3001\u3055\u3089\u306b\u6c4e\u7528\u6027\u9ad8\u3057\u3002tmlib\u3060\u3068\u30a4\u30d9\u30f3\u30c8\u3092\u7ba1\u7406\u3057\u3066\u3044\u308b\u306e\u3067\u3053\u3063\u3061\u306e\u65b9\u304c\u3044\u3044\u3067\u3059\u3002\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f\u3053\u3061\u3089)\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect().addChildTo(self).startEffect().on(\"effectend\", function () {\n                self.gameOver();\n            });\n            self.update = function () {};\n        }\n    },\n\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function () {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        self.fire(tm.event.Event(\"effectend\"));\n                        // \u4ee5\u4e0b\u3067\u3082OK\n                        // self.flare(\"effectend\");\n                    }\n                });\n        });\n\n        return self;\n    },\n\n\u304b\u306a\u308a\u5f71\u97ff\u3092\u53d7\u3051\u305f\u8003\u3048\u65b9\u3060\u3063\u305f\u306e\u3067\u5099\u5fd8\u9332\u3068\u3057\u3066\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\ntmlib\u306b\u30de\u30b8\u611f\u8b1d\u3002YO YO\n\n\u6700\u5f8c\u306b\n\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u306fcounter\u3067\u6570\u3048\u3066\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u98a8\u306b\u66f8\u304f\u3068\u3088\u308a\u304b\u3063\u3053\u3044\u3044\u3067\u3059\u3002\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function () {\n        var self = this;\n        var counter = 10;\n        // 10\u56de flow.pass\u304c\u547c\u3070\u308c\u305f\u3089\u5b9f\u884c\u3055\u308c\u308b\n        var flow = tm.util.Flow(counter, function () {\n            self.fire(tm.event.Event(\"effectend\"));\n            // \u4ee5\u4e0b\u3067\u3082OK\n            // self.flare(\"effectend\");\n        });\n\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    flow.pass();\n                });\n        });\n\n        return self;\n    },\n\n## tmlib\u3067\u5b66\u3076\u3001\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u578b\u306e\u30af\u30e9\u30b9\u8a2d\u8a08\n\n\u306a\u3093\u3066\u96e3\u3057\u305d\u3046\u306a\u3053\u3068\u3044\u3063\u3066\u307e\u3059\u304c\u2026\u30b2\u30fc\u30e0\u958b\u767a\u3092\u3084\u3063\u3066\u3044\u3066\u3001\u5f8c\u3067\u5373\u6b7b\u3059\u308b\u30d1\u30bf\u30fc\u30f3\u3068\u304b\u305d\u3046\u3044\u3046\u306e\u306e\u30e1\u30e2\u3067\u3059\u3002\n\n\u307e\u305a\u306f\u30e2\u30c7\u30eb\u3068\u306a\u308b\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u8cbc\u308a\u307e\u3059\u3002\n\u30b2\u30fc\u30e0\u306e\u52d5\u4f5c\u3092\u66f8\u304f`GameScene`\u30af\u30e9\u30b9\u3068\u3001\u4eca\u56de\u306f\u30b5\u30f3\u30d7\u30eb\u3068\u3057\u3066\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u66f8\u304f`Effect`\u30af\u30e9\u30b9\u3092\u4f5c\u308a\u307e\u3059\u3002\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\u969b\u306b\u3001\u6c4e\u7528\u6027\u306e\u3042\u308b(\u3068\u3044\u3046\u304b\u3001\u3042\u308b\u7a0b\u5ea6\u306e\u4ed5\u69d8\u5909\u66f4\u306b\u8010\u3048\u3089\u308c\u308b)`Effect`\u30af\u30e9\u30b9\u3092\u4f5c\u3063\u3066\u3044\u304d\u307e\u3059\u3002\n\n```js\n\nvar SCREEN_WIDTH  = 640;\nvar SCREEN_HEIGHT = 960;\nvar SCREEN_CENTER_X = SCREEN_WIDTH/2;\nvar SCREEN_CENTER_Y = SCREEN_HEIGHT/2;\n\ntm.main(function() {\n    var app = tm.display.CanvasApp(\"#world\");\n    app.resize(SCREEN_WIDTH, SCREEN_HEIGHT);\n    app.fitWindow();\n    app.replaceScene(GameScene());\n    app.run();\n});\n\n\ntm.define(\"GameScene\", {\n    superClass: \"tm.app.Scene\",\n    \n    init: function() {\n        var self = this;\n        self.superInit();\n        \n        self.fromJSON({\n            children: {\n                \"label\": {\n                    type: \"tm.display.Label\",\n                    init: [\"\u30bf\u30c3\u30c1\u3059\u308b\u3068\u30a8\u30d5\u30a7\u30af\u30c8\u304c\u51fa\u308b\u3088\"],\n                    x: SCREEN_CENTER_X,\n                    y: 800,\n                }\n            },\n        });\n        \n        // \u30a8\u30d5\u30a7\u30af\u30c8\u4f5c\u6210\n        self.onpointingstart = function () {\n            Effect().addChildTo(self);\n        };\n    },\n    \n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            self.gameOver();\n            self.update = function () {};\n        }\n    },\n    // \u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u30b7\u30fc\u30f3\u3078\u306e\u9077\u79fb\u306a\u3069\n    gameOver: function () {\n        var self = this;\n        tm.display.Label(\"GAME OVER\")\n            .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y)\n            .setFontSize(40)\n            .addChildTo(self);\n    },\n});\n\ntm.define(\"Effect\", {\n    superClass: \"tm.display.CanvasElement\",\n    \n    init: function () {\n        var self = this;\n        self.superInit();\n        self.startEffect();\n    },\n    \n    startEffect: function () {\n        var self = this;\n        // 10\u500b\u4f5c\u308b\n        (10).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                });\n        });\n    },\n});\n```\n\n\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f[\u3053\u3061\u3089](http://phi-jp.github.io/runstant/release/alpha/#UEsDBAoAAAAAAJpyiEVblx+SzQwAAM0MAAAEAAAAZGF0YXsidmVyc2lvbiI6IjAuMC4xIiwiY3VycmVudCI6InNjcmlwdCIsInNldHRpbmciOnsidGl0bGUiOiJ0ZW1wbGF0ZSAtIHRtbGliLmpzIiwiZGV0YWlsIjoidG1saWIuanMg55So5YWs5byP44Ko44OH44Kj44K/LiDoibLjgIXjgajkvb/jgYjjgb7jgZnjgojimaoifSwiY29kZSI6eyJodG1sIjp7InR5cGUiOiJodG1sIiwidmFsdWUiOiI8IURPQ1RZUEUgaHRtbD5cbiBcbjxodG1sPlxuICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCB1c2VyLXNjYWxhYmxlPW5vXCIgLz5cbiAgICAgICAgPG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGVcIiBjb250ZW50PVwieWVzXCIgLz5cbiBcbiAgICAgICAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cIiR7ZGVzY3JpcHRpb259XCIgLz5cblxuICAgICAgICA8c3R5bGU+JHtzdHlsZX08L3N0eWxlPlxuXG4gICAgICAgIDxzY3JpcHQgc3JjPVwiaHR0cDovL3Jhd2dpdGh1Yi5jb20vcGhpLWpwL3RtbGliLmpzL2Q4MTk2Y2M1ZTYxOTk3OTE0NmE0MTIyNjA4YjNiMzIzYjNjZWJkMTMvYnVpbGQvdG1saWIuanNcIj48L3NjcmlwdD5cblx0XHQ8c2NyaXB0PiR7c2NyaXB0fTwvc2NyaXB0PlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgICAgPGNhbnZhcyBpZD1cIndvcmxkXCI+PC9jYW52YXM+XG4gICAgPC9ib2R5PlxuPC9odG1sPiJ9LCJzdHlsZSI6eyJ0eXBlIjoiY3NzIiwidmFsdWUiOiJib2R5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xufSJ9LCJzY3JpcHQiOnsidHlwZSI6ImphdmFzY3JpcHQiLCJ2YWx1ZSI6IlxudmFyIFNDUkVFTl9XSURUSCAgPSA2NDA7XG52YXIgU0NSRUVOX0hFSUdIVCA9IDk2MDtcbnZhciBTQ1JFRU5fQ0VOVEVSX1ggPSBTQ1JFRU5fV0lEVEgvMjtcbnZhciBTQ1JFRU5fQ0VOVEVSX1kgPSBTQ1JFRU5fSEVJR0hULzI7XG5cbnRtLm1haW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFwcCA9IHRtLmRpc3BsYXkuQ2FudmFzQXBwKFwiI3dvcmxkXCIpO1xuICAgIGFwcC5yZXNpemUoU0NSRUVOX1dJRFRILCBTQ1JFRU5fSEVJR0hUKTtcbiAgICBhcHAuZml0V2luZG93KCk7XG4gICAgYXBwLnJlcGxhY2VTY2VuZShHYW1lU2NlbmUoKSk7XG4gICAgYXBwLnJ1bigpO1xufSk7XG5cblxudG0uZGVmaW5lKFwiR2FtZVNjZW5lXCIsIHtcbiAgICBzdXBlckNsYXNzOiBcInRtLmFwcC5TY2VuZVwiLFxuICAgIFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuc3VwZXJJbml0KCk7XG4gICAgICAgIFxuICAgICAgICBzZWxmLmZyb21KU09OKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB7XG4gICAgICAgICAgICAgICAgXCJsYWJlbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG0uZGlzcGxheS5MYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbml0OiBbXCLjgr/jg4Pjg4HjgZnjgovjgajjgqjjg5Xjgqfjgq/jg4jjgYzlh7rjgovjgohcIl0sXG4gICAgICAgICAgICAgICAgICAgIHg6IFNDUkVFTl9DRU5URVJfWCxcbiAgICAgICAgICAgICAgICAgICAgeTogODAwLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44OV44Kn44Kv44OI5L2c5oiQXG4gICAgICAgIHNlbGYub25wb2ludGluZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgRWZmZWN0KCkuYWRkQ2hpbGRUbyhzZWxmKTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vIDPnp5LjgaDjgaPjgZ/jgonjgrLjg7zjg6Djgqrjg7zjg5Djg7xcbiAgICAgICAgaWYgKHNlbGYuYXBwLmZyYW1lID4gMzAqMikge1xuICAgICAgICAgICAgc2VsZi5nYW1lT3ZlcigpO1xuICAgICAgICAgICAgc2VsZi51cGRhdGUgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8g44Ky44O844Og44Kq44O844OQ44O844K344O844Oz44G444Gu6YG356e744Gq44GpXG4gICAgZ2FtZU92ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0bS5kaXNwbGF5LkxhYmVsKFwiR0FNRSBPVkVSXCIpXG4gICAgICAgICAgICAuc2V0UG9zaXRpb24oU0NSRUVOX0NFTlRFUl9YLCBTQ1JFRU5fQ0VOVEVSX1kpXG4gICAgICAgICAgICAuc2V0Rm9udFNpemUoNDApXG4gICAgICAgICAgICAuYWRkQ2hpbGRUbyhzZWxmKTtcbiAgICB9LFxufSk7XG5cbnRtLmRlZmluZShcIkVmZmVjdFwiLCB7XG4gICAgc3VwZXJDbGFzczogXCJ0bS5kaXNwbGF5LkNhbnZhc0VsZW1lbnRcIixcbiAgICBcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5zdXBlckluaXQoKTtcbiAgICAgICAgc2VsZi5zdGFydEVmZmVjdCgpO1xuICAgIH0sXG4gICAgXG4gICAgc3RhcnRFZmZlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyAxMOWAi+S9nOOCi1xuICAgICAgICAoMTApLnRpbWVzKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgZWZmZWN0ID0gdG0uZGlzcGxheS5SZWN0YW5nbGVTaGFwZSgzMCwzMClcbiAgICAgICAgICAgICAgICAuYWRkQ2hpbGRUbyhzZWxmKVxuICAgICAgICAgICAgICAgIC5zZXRQb3NpdGlvbihTQ1JFRU5fQ0VOVEVSX1gsIFNDUkVFTl9DRU5URVJfWSk7XG4gICAgICAgICAgICBlZmZlY3QudHdlZW5lci5jbGVhcigpXG4gICAgICAgICAgICAgICAgLnRvKHtcbiAgICAgICAgICAgICAgICAgICAgeDogdG0udXRpbC5SYW5kb20ucmFuZGludCgtMTAwLCBTQ1JFRU5fV0lEVEgrMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgeTogdG0udXRpbC5SYW5kb20ucmFuZGludCgtMTAwLCBTQ1JFRU5fSEVJR0hUKzEwMCksXG4gICAgICAgICAgICAgICAgICAgIGFscGhhOiAwLFxuICAgICAgICAgICAgICAgIH0sIDYwMClcbiAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSxcbn0pOyJ9fX1QSwECFAAKAAAAAACacohFW5cfks0MAADNDAAABAAAAAAAAAAAAAAAAAAAAAAAZGF0YVBLBQYAAAAAAQABADIAAADvDAAAAAA=)\n\n\n## \u65b0\u3057\u3044\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\n\n\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u524d\u306b\u30a8\u30d5\u30a7\u30af\u30c8\u3092\u8868\u793a\u3057\u3066\u3001\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\u3092\u5b9f\u884c\u3057\u305f\u3044(\u3055\u305b\u3066\u307b\u3057\u3044)\u3068\u3044\u3046\u4ed5\u69d8\u3092\u8ffd\u52a0\u3059\u308b\u3053\u3068\u306b\u306a\u3063\u305f\u3068\u3057\u307e\u3059\u3002\u3069\u3046\u5b9f\u88c5\u3059\u308b\u3067\u3057\u3087\u3046\u304b\uff1f\n\n### \u4e00\u756a\u30c0\u30e1\u306a\u30d1\u30bf\u30fc\u30f3\n\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f[\u3053\u3061\u3089](http://phi-jp.github.io/runstant/release/alpha/#UEsDBAoAAAAAAMCUiEXLP7CqAw4AAAMOAAAEAAAAZGF0YXsidmVyc2lvbiI6IjAuMC4xIiwiY3VycmVudCI6InNjcmlwdCIsInNldHRpbmciOnsidGl0bGUiOiJ0ZW1wbGF0ZSAtIHRtbGliLmpzIiwiZGV0YWlsIjoidG1saWIuanMg55So5YWs5byP44Ko44OH44Kj44K/LiDoibLjgIXjgajkvb/jgYjjgb7jgZnjgojimaoifSwiY29kZSI6eyJodG1sIjp7InR5cGUiOiJodG1sIiwidmFsdWUiOiI8IURPQ1RZUEUgaHRtbD5cbiBcbjxodG1sPlxuICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCB1c2VyLXNjYWxhYmxlPW5vXCIgLz5cbiAgICAgICAgPG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGVcIiBjb250ZW50PVwieWVzXCIgLz5cbiBcbiAgICAgICAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cIiR7ZGVzY3JpcHRpb259XCIgLz5cblxuICAgICAgICA8c3R5bGU+JHtzdHlsZX08L3N0eWxlPlxuXG4gICAgICAgIDxzY3JpcHQgc3JjPVwiaHR0cDovL3Jhd2dpdGh1Yi5jb20vcGhpLWpwL3RtbGliLmpzL2Q4MTk2Y2M1ZTYxOTk3OTE0NmE0MTIyNjA4YjNiMzIzYjNjZWJkMTMvYnVpbGQvdG1saWIuanNcIj48L3NjcmlwdD5cblx0XHQ8c2NyaXB0PiR7c2NyaXB0fTwvc2NyaXB0PlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgICAgPGNhbnZhcyBpZD1cIndvcmxkXCI+PC9jYW52YXM+XG4gICAgPC9ib2R5PlxuPC9odG1sPiJ9LCJzdHlsZSI6eyJ0eXBlIjoiY3NzIiwidmFsdWUiOiJib2R5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xufSJ9LCJzY3JpcHQiOnsidHlwZSI6ImphdmFzY3JpcHQiLCJ2YWx1ZSI6IlxudmFyIFNDUkVFTl9XSURUSCAgPSA2NDA7XG52YXIgU0NSRUVOX0hFSUdIVCA9IDk2MDtcbnZhciBTQ1JFRU5fQ0VOVEVSX1ggPSBTQ1JFRU5fV0lEVEgvMjtcbnZhciBTQ1JFRU5fQ0VOVEVSX1kgPSBTQ1JFRU5fSEVJR0hULzI7XG5cbnRtLm1haW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFwcCA9IHRtLmRpc3BsYXkuQ2FudmFzQXBwKFwiI3dvcmxkXCIpO1xuICAgIGFwcC5yZXNpemUoU0NSRUVOX1dJRFRILCBTQ1JFRU5fSEVJR0hUKTtcbiAgICBhcHAuZml0V2luZG93KCk7XG4gICAgYXBwLnJlcGxhY2VTY2VuZShHYW1lU2NlbmUoKSk7XG4gICAgYXBwLnJ1bigpO1xufSk7XG5cblxudG0uZGVmaW5lKFwiR2FtZVNjZW5lXCIsIHtcbiAgICBzdXBlckNsYXNzOiBcInRtLmFwcC5TY2VuZVwiLFxuICAgIFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuc3VwZXJJbml0KCk7XG4gICAgICAgIFxuICAgICAgICBzZWxmLmZyb21KU09OKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB7XG4gICAgICAgICAgICAgICAgXCJsYWJlbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG0uZGlzcGxheS5MYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbml0OiBbXCLjgr/jg4Pjg4HjgZnjgovjgajjgqjjg5Xjgqfjgq/jg4jjgYzlh7rjgovjgohcIl0sXG4gICAgICAgICAgICAgICAgICAgIHg6IFNDUkVFTl9DRU5URVJfWCxcbiAgICAgICAgICAgICAgICAgICAgeTogODAwLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44OV44Kn44Kv44OI5L2c5oiQXG4gICAgICAgIHNlbGYub25wb2ludGluZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgRWZmZWN0KCkuYWRkQ2hpbGRUbyhzZWxmKTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIFxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vIDPnp5LjgaDjgaPjgZ/jgonjgrLjg7zjg6Djgqrjg7zjg5Djg7xcbiAgICAgICAgaWYgKHNlbGYuYXBwLmZyYW1lID4gMzAqMikge1xuICAgICAgICAgICAgRWZmZWN0KHNlbGYpLmFkZENoaWxkVG8oc2VsZik7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvLyDjgrLjg7zjg6Djgqrjg7zjg5Djg7zjgrfjg7zjg7Pjgbjjga7pgbfnp7vjgarjgalcbiAgICBnYW1lT3ZlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRtLmRpc3BsYXkuTGFiZWwoXCJHQU1FIE9WRVJcIilcbiAgICAgICAgICAgIC5zZXRQb3NpdGlvbihTQ1JFRU5fQ0VOVEVSX1gsIFNDUkVFTl9DRU5URVJfWSlcbiAgICAgICAgICAgIC5zZXRGb250U2l6ZSg0MClcbiAgICAgICAgICAgIC5hZGRDaGlsZFRvKHNlbGYpO1xuICAgIH0sXG59KTtcblxudG0uZGVmaW5lKFwiRWZmZWN0XCIsIHtcbiAgICBzdXBlckNsYXNzOiBcInRtLmRpc3BsYXkuQ2FudmFzRWxlbWVudFwiLFxuICAgIFxuICAgIGluaXQ6IGZ1bmN0aW9uIChzY2VuZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuZ2FtZVNjZW5lID0gc2NlbmU7XG4gICAgICAgIHNlbGYuc3VwZXJJbml0KCk7XG4gICAgICAgIHNlbGYuc3RhcnRFZmZlY3QoKTtcbiAgICB9LFxuICAgIFxuICAgIHN0YXJ0RWZmZWN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNvdW50ZXIgPSAxMDtcbiAgICAgICAgLy8gMTDlgIvkvZzjgotcbiAgICAgICAgKGNvdW50ZXIpLnRpbWVzKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgZWZmZWN0ID0gdG0uZGlzcGxheS5SZWN0YW5nbGVTaGFwZSgzMCwzMClcbiAgICAgICAgICAgICAgICAuYWRkQ2hpbGRUbyhzZWxmKVxuICAgICAgICAgICAgICAgIC5zZXRQb3NpdGlvbihTQ1JFRU5fQ0VOVEVSX1gsIFNDUkVFTl9DRU5URVJfWSk7XG4gICAgICAgICAgICBlZmZlY3QudHdlZW5lci5jbGVhcigpXG4gICAgICAgICAgICAgICAgLnRvKHtcbiAgICAgICAgICAgICAgICAgICAgeDogdG0udXRpbC5SYW5kb20ucmFuZGludCgtMTAwLCBTQ1JFRU5fV0lEVEgrMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgeTogdG0udXRpbC5SYW5kb20ucmFuZGludCgtMTAwLCBTQ1JFRU5fSEVJR0hUKzEwMCksXG4gICAgICAgICAgICAgICAgICAgIGFscGhhOiAwLFxuICAgICAgICAgICAgICAgIH0sIDYwMClcbiAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgLS1jb3VudGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRlciA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5nYW1lU2NlbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmdhbWVTY2VuZS5nYW1lT3ZlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0sXG59KTsifX19UEsBAhQACgAAAAAAwJSIRcs/sKoDDgAAAw4AAAQAAAAAAAAAAAAAAAAAAAAAAGRhdGFQSwUGAAAAAAEAAQAyAAAAJQ4AAAAA))\n\n```js\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect(self).addChildTo(self);\n            self.update = function () {};\n        }\n    },\n```\n\n```js\n    // Effect\u30af\u30e9\u30b9\n    init: function (scene) {\n        var self = this;\n        self.gameScene = scene;\n        self.superInit();\n        self.startEffect();\n    },\n\n    startEffect: function () {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        self.gameScene.gameOver();\n                    }\n                });\n        });\n    },\n```\n\n`GameScene`\u30af\u30e9\u30b9\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3054\u3068\u3001`Effect`\u306e\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u306b\u6e21\u3057\u3066\u4fdd\u6301\u3057\u3061\u3083\u3063\u3066\u307e\u3059\u3002100\uff05\u5f8c\u6094\u3057\u307e\u3059\u3002\u3082\u306f\u3084\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u6307\u5411\u3084\u308a\u76f4\u3057\u305f\u3089\uff1f\u3068\u3044\u308f\u308c\u308b\u30ec\u30d9\u30eb\u3067\u3059\u3002\u4ed6\u4eba\u304c\u30b3\u30fc\u30c9\u3092\u898b\u305f\u3068\u304d\u8ffd\u3044\u304b\u3051\u308b\u3053\u3068\u3059\u3089\u56f0\u96e3\u306b\u306a\u308a\u307e\u3059\u3002\u76f8\u4e92\u53c2\u7167\u3067\u3059\u3002\u3067\u3082\u305f\u307e\u306b\u898b\u307e\u3059\u3002(\u3054\u3081\u3093\u306a\u3055\u3044)\n\n### \u3053\u308c\u3082\u3082\u3061\u308d\u3093\u30c0\u30e1\n\n\u8a00\u308f\u305a\u3082\u304c\u30fc\u306a\u30fc\u3002\n\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f[\u3053\u3061\u3089](http://phi-jp.github.io/runstant/release/alpha/#UEsDBAoAAAAAAAyViEUrEmpiEA4AABAOAAAEAAAAZGF0YXsidmVyc2lvbiI6IjAuMC4xIiwiY3VycmVudCI6InNjcmlwdCIsInNldHRpbmciOnsidGl0bGUiOiJ0ZW1wbGF0ZSAtIHRtbGliLmpzIiwiZGV0YWlsIjoidG1saWIuanMg55So5YWs5byP44Ko44OH44Kj44K/LiDoibLjgIXjgajkvb/jgYjjgb7jgZnjgojimaoifSwiY29kZSI6eyJodG1sIjp7InR5cGUiOiJodG1sIiwidmFsdWUiOiI8IURPQ1RZUEUgaHRtbD5cbiBcbjxodG1sPlxuICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCB1c2VyLXNjYWxhYmxlPW5vXCIgLz5cbiAgICAgICAgPG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGVcIiBjb250ZW50PVwieWVzXCIgLz5cbiBcbiAgICAgICAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cIiR7ZGVzY3JpcHRpb259XCIgLz5cblxuICAgICAgICA8c3R5bGU+JHtzdHlsZX08L3N0eWxlPlxuXG4gICAgICAgIDxzY3JpcHQgc3JjPVwiaHR0cDovL3Jhd2dpdGh1Yi5jb20vcGhpLWpwL3RtbGliLmpzL2Q4MTk2Y2M1ZTYxOTk3OTE0NmE0MTIyNjA4YjNiMzIzYjNjZWJkMTMvYnVpbGQvdG1saWIuanNcIj48L3NjcmlwdD5cblx0XHQ8c2NyaXB0PiR7c2NyaXB0fTwvc2NyaXB0PlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgICAgPGNhbnZhcyBpZD1cIndvcmxkXCI+PC9jYW52YXM+XG4gICAgPC9ib2R5PlxuPC9odG1sPiJ9LCJzdHlsZSI6eyJ0eXBlIjoiY3NzIiwidmFsdWUiOiJib2R5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xufSJ9LCJzY3JpcHQiOnsidHlwZSI6ImphdmFzY3JpcHQiLCJ2YWx1ZSI6IlxudmFyIFNDUkVFTl9XSURUSCAgPSA2NDA7XG52YXIgU0NSRUVOX0hFSUdIVCA9IDk2MDtcbnZhciBTQ1JFRU5fQ0VOVEVSX1ggPSBTQ1JFRU5fV0lEVEgvMjtcbnZhciBTQ1JFRU5fQ0VOVEVSX1kgPSBTQ1JFRU5fSEVJR0hULzI7XG5cbnRtLm1haW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFwcCA9IHRtLmRpc3BsYXkuQ2FudmFzQXBwKFwiI3dvcmxkXCIpO1xuICAgIGFwcC5yZXNpemUoU0NSRUVOX1dJRFRILCBTQ1JFRU5fSEVJR0hUKTtcbiAgICBhcHAuZml0V2luZG93KCk7XG4gICAgYXBwLnJlcGxhY2VTY2VuZShHYW1lU2NlbmUoKSk7XG4gICAgYXBwLnJ1bigpO1xufSk7XG5cblxudG0uZGVmaW5lKFwiR2FtZVNjZW5lXCIsIHtcbiAgICBzdXBlckNsYXNzOiBcInRtLmFwcC5TY2VuZVwiLFxuICAgIFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuc3VwZXJJbml0KCk7XG4gICAgICAgIFxuICAgICAgICBzZWxmLmZyb21KU09OKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB7XG4gICAgICAgICAgICAgICAgXCJsYWJlbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG0uZGlzcGxheS5MYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbml0OiBbXCLjgr/jg4Pjg4HjgZnjgovjgajjgqjjg5Xjgqfjgq/jg4jjgYzlh7rjgovjgohcIl0sXG4gICAgICAgICAgICAgICAgICAgIHg6IFNDUkVFTl9DRU5URVJfWCxcbiAgICAgICAgICAgICAgICAgICAgeTogODAwLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44OV44Kn44Kv44OI5L2c5oiQXG4gICAgICAgIHNlbGYub25wb2ludGluZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgRWZmZWN0KCkuc3RhcnRFZmZlY3QoKS5hZGRDaGlsZFRvKHNlbGYpO1xuICAgICAgICB9O1xuICAgIH0sXG4gICAgXG4gICAgLy8gR2FtZVNjZW5l44Kv44Op44K5XG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgLy8gM+enkuOBoOOBo+OBn+OCieOCsuODvOODoOOCquODvOODkOODvFxuICAgICAgICBpZiAoc2VsZi5hcHAuZnJhbWUgPiAzMCoyKSB7XG4gICAgICAgICAgICBFZmZlY3QoKS5zdGFydEVmZmVjdChzZWxmKS5hZGRDaGlsZFRvKHNlbGYpO1xuICAgICAgICAgICAgc2VsZi51cGRhdGUgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgXG4gICAgLy8g44Ky44O844Og44Kq44O844OQ44O844K344O844Oz44G444Gu6YG356e744Gq44GpXG4gICAgZ2FtZU92ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0bS5kaXNwbGF5LkxhYmVsKFwiR0FNRSBPVkVSXCIpXG4gICAgICAgICAgICAuc2V0UG9zaXRpb24oU0NSRUVOX0NFTlRFUl9YLCBTQ1JFRU5fQ0VOVEVSX1kpXG4gICAgICAgICAgICAuc2V0Rm9udFNpemUoNDApXG4gICAgICAgICAgICAuYWRkQ2hpbGRUbyhzZWxmKTtcbiAgICB9LFxufSk7XG5cbnRtLmRlZmluZShcIkVmZmVjdFwiLCB7XG4gICAgc3VwZXJDbGFzczogXCJ0bS5kaXNwbGF5LkNhbnZhc0VsZW1lbnRcIixcbiAgICBcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5zdXBlckluaXQoKTtcbiAgICB9LFxuICAgIFxuICAgIHN0YXJ0RWZmZWN0OiBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgY291bnRlciA9IDEwO1xuICAgICAgICAvLyAxMOWAi+S9nOOCi1xuICAgICAgICAoY291bnRlcikudGltZXMoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgIHZhciBlZmZlY3QgPSB0bS5kaXNwbGF5LlJlY3RhbmdsZVNoYXBlKDMwLDMwKVxuICAgICAgICAgICAgICAgIC5hZGRDaGlsZFRvKHNlbGYpXG4gICAgICAgICAgICAgICAgLnNldFBvc2l0aW9uKFNDUkVFTl9DRU5URVJfWCwgU0NSRUVOX0NFTlRFUl9ZKTtcbiAgICAgICAgICAgIGVmZmVjdC50d2VlbmVyLmNsZWFyKClcbiAgICAgICAgICAgICAgICAudG8oe1xuICAgICAgICAgICAgICAgICAgICB4OiB0bS51dGlsLlJhbmRvbS5yYW5kaW50KC0xMDAsIFNDUkVFTl9XSURUSCsxMDApLFxuICAgICAgICAgICAgICAgICAgICB5OiB0bS51dGlsLlJhbmRvbS5yYW5kaW50KC0xMDAsIFNDUkVFTl9IRUlHSFQrMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGE6IDAsXG4gICAgICAgICAgICAgICAgfSwgNjAwKVxuICAgICAgICAgICAgICAgIC5jYWxsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAtLWNvdW50ZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudGVyIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY2VuZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjZW5lLmdhbWVPdmVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxufSk7In19fVBLAQIUAAoAAAAAAAyViEUrEmpiEA4AABAOAAAEAAAAAAAAAAAAAAAAAAAAAABkYXRhUEsFBgAAAAABAAEAMgAAADIOAAAAAA==))\n\n```js\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect().startEffect(self).addChildTo(self);\n            self.update = function () {};\n        }\n    },\n```\n\n```js\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function (scene) {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        scene.gameOver();\n                    }\n                });\n        });\n        \n        return self;\n    },\n```\n\n\u30b3\u30f3\u30b9\u30c8\u30e9\u30af\u30bf\u3067\u30a8\u30d5\u30a7\u30af\u30c8\u306e\u5b9f\u884c\u3092\u884c\u3046\u306e\u3067\u306f\u306a\u304f\u3001\u76f4\u63a5Scene\u5074\u304b\u3089\u547c\u3073\u51fa\u3059\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\u305d\u308c\u81ea\u4f53\u306f\u3044\u3044\u306e\u3067\u3059\u304c\u3001\u3053\u308c\u3082`GameScene`\u3092\u5f15\u6570\u3067\u6e21\u3057\u3066\u3001`Effect`\u5074\u3067`GameScene`\u306e\u95a2\u6570\u3092\u547c\u3073\u51fa\u3057\u3066\u3044\u307e\u3059\u3002\u3055\u3063\u304d\u3088\u308a\u306f\u307e\u3060\u30de\u30b7\u3067\u3059\u3051\u3069\u3001\u3053\u308c\u3082\u6c4e\u7528\u6027\u306a\u3044\u3063\u3059\u3002\u3068\u3044\u3046\u304b\u3001`GameScene`\u30af\u30e9\u30b9\u306e`gameOver`\u95a2\u6570\u3092\u3001\u6c4e\u7528\u7684\u306b\u4f5c\u308b\u3079\u304d`Effect`\u30af\u30e9\u30b9\u3067\u547c\u3076\u3088\u3046\u306a\u69cb\u9020\u306f\u3084\u3081\u305f\u65b9\u304c\u3044\u3044\u3067\u3059\u3002\u4ed6\u306e\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3067\u4f7f\u3044\u305f\u3044\u3068\u304b\u7121\u7406\u306b\u306a\u308b\u306e\u3067\u3002\n\n### \u3060\u3044\u305f\u3044\u6b63\u89e3\uff1f\n\n\u30a4\u30d9\u30f3\u30c8\u3092\u767a\u706b\u3057\u3066\u30ad\u30e3\u30c3\u30c1\u3059\u308b\u69cb\u9020\u304c\u306a\u304b\u3063\u305f\u308a\u3057\u305f\u3089\u4f7f\u3044\u307e\u3059\u3002callback\u3067\u3059\u3002\u3053\u308c\u3067\u76f8\u4e92\u53c2\u7167\u7121\u304f\u306a\u308a\u307e\u3057\u305f\u3002\n\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f[\u3053\u3061\u3089](http://phi-jp.github.io/runstant/release/alpha/#UEsDBAoAAAAAACB4iEWmfVDnDA4AAAwOAAAEAAAAZGF0YXsidmVyc2lvbiI6IjAuMC4xIiwiY3VycmVudCI6InNjcmlwdCIsInNldHRpbmciOnsidGl0bGUiOiJ0ZW1wbGF0ZSAtIHRtbGliLmpzIiwiZGV0YWlsIjoidG1saWIuanMg55So5YWs5byP44Ko44OH44Kj44K/LiDoibLjgIXjgajkvb/jgYjjgb7jgZnjgojimaoifSwiY29kZSI6eyJodG1sIjp7InR5cGUiOiJodG1sIiwidmFsdWUiOiI8IURPQ1RZUEUgaHRtbD5cbiBcbjxodG1sPlxuICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCB1c2VyLXNjYWxhYmxlPW5vXCIgLz5cbiAgICAgICAgPG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGVcIiBjb250ZW50PVwieWVzXCIgLz5cbiBcbiAgICAgICAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cIiR7ZGVzY3JpcHRpb259XCIgLz5cblxuICAgICAgICA8c3R5bGU+JHtzdHlsZX08L3N0eWxlPlxuXG4gICAgICAgIDxzY3JpcHQgc3JjPVwiaHR0cDovL3Jhd2dpdGh1Yi5jb20vcGhpLWpwL3RtbGliLmpzL2Q4MTk2Y2M1ZTYxOTk3OTE0NmE0MTIyNjA4YjNiMzIzYjNjZWJkMTMvYnVpbGQvdG1saWIuanNcIj48L3NjcmlwdD5cblx0XHQ8c2NyaXB0PiR7c2NyaXB0fTwvc2NyaXB0PlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgICAgPGNhbnZhcyBpZD1cIndvcmxkXCI+PC9jYW52YXM+XG4gICAgPC9ib2R5PlxuPC9odG1sPiJ9LCJzdHlsZSI6eyJ0eXBlIjoiY3NzIiwidmFsdWUiOiJib2R5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xufSJ9LCJzY3JpcHQiOnsidHlwZSI6ImphdmFzY3JpcHQiLCJ2YWx1ZSI6IlxudmFyIFNDUkVFTl9XSURUSCAgPSA2NDA7XG52YXIgU0NSRUVOX0hFSUdIVCA9IDk2MDtcbnZhciBTQ1JFRU5fQ0VOVEVSX1ggPSBTQ1JFRU5fV0lEVEgvMjtcbnZhciBTQ1JFRU5fQ0VOVEVSX1kgPSBTQ1JFRU5fSEVJR0hULzI7XG5cbnRtLm1haW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFwcCA9IHRtLmRpc3BsYXkuQ2FudmFzQXBwKFwiI3dvcmxkXCIpO1xuICAgIGFwcC5yZXNpemUoU0NSRUVOX1dJRFRILCBTQ1JFRU5fSEVJR0hUKTtcbiAgICBhcHAuZml0V2luZG93KCk7XG4gICAgYXBwLnJlcGxhY2VTY2VuZShHYW1lU2NlbmUoKSk7XG4gICAgYXBwLnJ1bigpO1xufSk7XG5cblxudG0uZGVmaW5lKFwiR2FtZVNjZW5lXCIsIHtcbiAgICBzdXBlckNsYXNzOiBcInRtLmFwcC5TY2VuZVwiLFxuICAgIFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuc3VwZXJJbml0KCk7XG4gICAgICAgIFxuICAgICAgICBzZWxmLmZyb21KU09OKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB7XG4gICAgICAgICAgICAgICAgXCJsYWJlbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG0uZGlzcGxheS5MYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbml0OiBbXCLjgr/jg4Pjg4HjgZnjgovjgajjgqjjg5Xjgqfjgq/jg4jjgYzlh7rjgovjgohcIl0sXG4gICAgICAgICAgICAgICAgICAgIHg6IFNDUkVFTl9DRU5URVJfWCxcbiAgICAgICAgICAgICAgICAgICAgeTogODAwLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44OV44Kn44Kv44OI5L2c5oiQXG4gICAgICAgIHNlbGYub25wb2ludGluZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgRWZmZWN0KCkuYWRkQ2hpbGRUbyhzZWxmKTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIFxuICAgIC8vIEdhbWVTY2VuZeOCr+ODqeOCuVxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vIDPnp5LjgaDjgaPjgZ/jgonjgrLjg7zjg6Djgqrjg7zjg5Djg7xcbiAgICAgICAgaWYgKHNlbGYuYXBwLmZyYW1lID4gMzAqMikge1xuICAgICAgICAgICAgRWZmZWN0KCkuYWRkQ2hpbGRUbyhzZWxmKS5zdGFydEVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5nYW1lT3ZlcigpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZWxmLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgICB9XG4gICAgfSxcbiAgICBcbiAgICAvLyDjgrLjg7zjg6Djgqrjg7zjg5Djg7zjgrfjg7zjg7Pjgbjjga7pgbfnp7vjgarjgalcbiAgICBnYW1lT3ZlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRtLmRpc3BsYXkuTGFiZWwoXCJHQU1FIE9WRVJcIilcbiAgICAgICAgICAgIC5zZXRQb3NpdGlvbihTQ1JFRU5fQ0VOVEVSX1gsIFNDUkVFTl9DRU5URVJfWSlcbiAgICAgICAgICAgIC5zZXRGb250U2l6ZSg0MClcbiAgICAgICAgICAgIC5hZGRDaGlsZFRvKHNlbGYpO1xuICAgIH0sXG59KTtcblxudG0uZGVmaW5lKFwiRWZmZWN0XCIsIHtcbiAgICBzdXBlckNsYXNzOiBcInRtLmRpc3BsYXkuQ2FudmFzRWxlbWVudFwiLFxuICAgIFxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBzZWxmLnN1cGVySW5pdCgpO1xuICAgIH0sXG4gICAgXG4gICAgLy8gRWZmZWN044Kv44Op44K5XG4gICAgc3RhcnRFZmZlY3Q6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBjb3VudGVyID0gMTA7XG4gICAgICAgIC8vIDEw5YCL5L2c44KLXG4gICAgICAgIChjb3VudGVyKS50aW1lcyhmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgdmFyIGVmZmVjdCA9IHRtLmRpc3BsYXkuUmVjdGFuZ2xlU2hhcGUoMzAsMzApXG4gICAgICAgICAgICAgICAgLmFkZENoaWxkVG8oc2VsZilcbiAgICAgICAgICAgICAgICAuc2V0UG9zaXRpb24oU0NSRUVOX0NFTlRFUl9YLCBTQ1JFRU5fQ0VOVEVSX1kpO1xuICAgICAgICAgICAgZWZmZWN0LnR3ZWVuZXIuY2xlYXIoKVxuICAgICAgICAgICAgICAgIC50byh7XG4gICAgICAgICAgICAgICAgICAgIHg6IHRtLnV0aWwuUmFuZG9tLnJhbmRpbnQoLTEwMCwgU0NSRUVOX1dJRFRIKzEwMCksXG4gICAgICAgICAgICAgICAgICAgIHk6IHRtLnV0aWwuUmFuZG9tLnJhbmRpbnQoLTEwMCwgU0NSRUVOX0hFSUdIVCsxMDApLFxuICAgICAgICAgICAgICAgICAgICBhbHBoYTogMCxcbiAgICAgICAgICAgICAgICB9LCA2MDApXG4gICAgICAgICAgICAgICAgLmNhbGwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlZmZlY3QucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC0tY291bnRlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ZXIgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzZWxmO1xuICAgIH0sXG59KTsifX19UEsBAhQACgAAAAAAIHiIRaZ9UOcMDgAADA4AAAQAAAAAAAAAAAAAAAAAAAAAAGRhdGFQSwUGAAAAAAEAAQAyAAAALg4AAAAA))\n\n```js\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect().addChildTo(self).startEffect(function () {\n                self.gameOver();\n            });\n            self.update = function () {};\n        }\n    },\n```\n\n```js\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function (callback) {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        callback();\n                    }\n                });\n        });\n        \n        return self;\n    },\n```\n\n\n### \u3053\u306e\u8003\u3048\u65b9\u3092tmlib\u3067\u899a\u3048\u307e\u3057\u305f\n\ncallback\u3068\u540c\u3058\u8003\u3048\u65b9\u3067\u3059\u3002\u5f15\u6570\u306b\u3059\u3089\u7e1b\u3089\u308c\u306a\u3044\u306e\u3067\u3001\u3055\u3089\u306b\u6c4e\u7528\u6027\u9ad8\u3057\u3002tmlib\u3060\u3068\u30a4\u30d9\u30f3\u30c8\u3092\u7ba1\u7406\u3057\u3066\u3044\u308b\u306e\u3067\u3053\u3063\u3061\u306e\u65b9\u304c\u3044\u3044\u3067\u3059\u3002\n\n(\u52d5\u4f5c\u3059\u308b\u30b5\u30f3\u30d7\u30eb\u306f[\u3053\u3061\u3089](http://phi-jp.github.io/runstant/release/alpha/#UEsDBAoAAAAAALV4iEWMDH8CoA4AAKAOAAAEAAAAZGF0YXsidmVyc2lvbiI6IjAuMC4xIiwiY3VycmVudCI6InNjcmlwdCIsInNldHRpbmciOnsidGl0bGUiOiJ0ZW1wbGF0ZSAtIHRtbGliLmpzIiwiZGV0YWlsIjoidG1saWIuanMg55So5YWs5byP44Ko44OH44Kj44K/LiDoibLjgIXjgajkvb/jgYjjgb7jgZnjgojimaoifSwiY29kZSI6eyJodG1sIjp7InR5cGUiOiJodG1sIiwidmFsdWUiOiI8IURPQ1RZUEUgaHRtbD5cbiBcbjxodG1sPlxuICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBjaGFyc2V0PVwiVVRGLThcIiAvPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCB1c2VyLXNjYWxhYmxlPW5vXCIgLz5cbiAgICAgICAgPG1ldGEgbmFtZT1cImFwcGxlLW1vYmlsZS13ZWItYXBwLWNhcGFibGVcIiBjb250ZW50PVwieWVzXCIgLz5cbiBcbiAgICAgICAgPHRpdGxlPiR7dGl0bGV9PC90aXRsZT5cbiAgICAgICAgPG1ldGEgbmFtZT1cImRlc2NyaXB0aW9uXCIgY29udGVudD1cIiR7ZGVzY3JpcHRpb259XCIgLz5cblxuICAgICAgICA8c3R5bGU+JHtzdHlsZX08L3N0eWxlPlxuXG4gICAgICAgIDxzY3JpcHQgc3JjPVwiaHR0cDovL3Jhd2dpdGh1Yi5jb20vcGhpLWpwL3RtbGliLmpzL2Q4MTk2Y2M1ZTYxOTk3OTE0NmE0MTIyNjA4YjNiMzIzYjNjZWJkMTMvYnVpbGQvdG1saWIuanNcIj48L3NjcmlwdD5cblx0XHQ8c2NyaXB0PiR7c2NyaXB0fTwvc2NyaXB0PlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgICAgPGNhbnZhcyBpZD1cIndvcmxkXCI+PC9jYW52YXM+XG4gICAgPC9ib2R5PlxuPC9odG1sPiJ9LCJzdHlsZSI6eyJ0eXBlIjoiY3NzIiwidmFsdWUiOiJib2R5IHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xufSJ9LCJzY3JpcHQiOnsidHlwZSI6ImphdmFzY3JpcHQiLCJ2YWx1ZSI6IlxudmFyIFNDUkVFTl9XSURUSCAgPSA2NDA7XG52YXIgU0NSRUVOX0hFSUdIVCA9IDk2MDtcbnZhciBTQ1JFRU5fQ0VOVEVSX1ggPSBTQ1JFRU5fV0lEVEgvMjtcbnZhciBTQ1JFRU5fQ0VOVEVSX1kgPSBTQ1JFRU5fSEVJR0hULzI7XG5cbnRtLm1haW4oZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFwcCA9IHRtLmRpc3BsYXkuQ2FudmFzQXBwKFwiI3dvcmxkXCIpO1xuICAgIGFwcC5yZXNpemUoU0NSRUVOX1dJRFRILCBTQ1JFRU5fSEVJR0hUKTtcbiAgICBhcHAuZml0V2luZG93KCk7XG4gICAgYXBwLnJlcGxhY2VTY2VuZShHYW1lU2NlbmUoKSk7XG4gICAgYXBwLnJ1bigpO1xufSk7XG5cblxudG0uZGVmaW5lKFwiR2FtZVNjZW5lXCIsIHtcbiAgICBzdXBlckNsYXNzOiBcInRtLmFwcC5TY2VuZVwiLFxuICAgIFxuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuc3VwZXJJbml0KCk7XG4gICAgICAgIFxuICAgICAgICBzZWxmLmZyb21KU09OKHtcbiAgICAgICAgICAgIGNoaWxkcmVuOiB7XG4gICAgICAgICAgICAgICAgXCJsYWJlbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwidG0uZGlzcGxheS5MYWJlbFwiLFxuICAgICAgICAgICAgICAgICAgICBpbml0OiBbXCLjgr/jg4Pjg4HjgZnjgovjgajjgqjjg5Xjgqfjgq/jg4jjgYzlh7rjgovjgohcIl0sXG4gICAgICAgICAgICAgICAgICAgIHg6IFNDUkVFTl9DRU5URVJfWCxcbiAgICAgICAgICAgICAgICAgICAgeTogODAwLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8g44Ko44OV44Kn44Kv44OI5L2c5oiQXG4gICAgICAgIHNlbGYub25wb2ludGluZ3N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgRWZmZWN0KCkuYWRkQ2hpbGRUbyhzZWxmKTtcbiAgICAgICAgfTtcbiAgICB9LFxuICAgIFxuICAgIC8vIEdhbWVTY2VuZeOCr+ODqeOCuVxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIC8vIDPnp5LjgaDjgaPjgZ/jgonjgrLjg7zjg6Djgqrjg7zjg5Djg7xcbiAgICAgICAgaWYgKHNlbGYuYXBwLmZyYW1lID4gMzAqMikge1xuICAgICAgICAgICAgRWZmZWN0KCkuYWRkQ2hpbGRUbyhzZWxmKS5zdGFydEVmZmVjdCgpLm9uKFwiZWZmZWN0ZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLmdhbWVPdmVyKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNlbGYudXBkYXRlID0gZnVuY3Rpb24gKCkge307XG4gICAgICAgIH1cbiAgICB9LFxuICAgIFxuICAgIC8vIOOCsuODvOODoOOCquODvOODkOODvOOCt+ODvOODs+OBuOOBrumBt+enu+OBquOBqVxuICAgIGdhbWVPdmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdG0uZGlzcGxheS5MYWJlbChcIkdBTUUgT1ZFUlwiKVxuICAgICAgICAgICAgLnNldFBvc2l0aW9uKFNDUkVFTl9DRU5URVJfWCwgU0NSRUVOX0NFTlRFUl9ZKVxuICAgICAgICAgICAgLnNldEZvbnRTaXplKDQwKVxuICAgICAgICAgICAgLmFkZENoaWxkVG8oc2VsZik7XG4gICAgfSxcbn0pO1xuXG50bS5kZWZpbmUoXCJFZmZlY3RcIiwge1xuICAgIHN1cGVyQ2xhc3M6IFwidG0uZGlzcGxheS5DYW52YXNFbGVtZW50XCIsXG4gICAgXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuc3VwZXJJbml0KCk7XG4gICAgfSxcbiAgICBcbiAgICAvLyBFZmZlY3Tjgq/jg6njgrlcbiAgICBzdGFydEVmZmVjdDogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNvdW50ZXIgPSAxMDtcbiAgICAgICAgLy8gMTDlgIvkvZzjgotcbiAgICAgICAgKGNvdW50ZXIpLnRpbWVzKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICB2YXIgZWZmZWN0ID0gdG0uZGlzcGxheS5SZWN0YW5nbGVTaGFwZSgzMCwzMClcbiAgICAgICAgICAgICAgICAuYWRkQ2hpbGRUbyhzZWxmKVxuICAgICAgICAgICAgICAgIC5zZXRQb3NpdGlvbihTQ1JFRU5fQ0VOVEVSX1gsIFNDUkVFTl9DRU5URVJfWSk7XG4gICAgICAgICAgICBlZmZlY3QudHdlZW5lci5jbGVhcigpXG4gICAgICAgICAgICAgICAgLnRvKHtcbiAgICAgICAgICAgICAgICAgICAgeDogdG0udXRpbC5SYW5kb20ucmFuZGludCgtMTAwLCBTQ1JFRU5fV0lEVEgrMTAwKSxcbiAgICAgICAgICAgICAgICAgICAgeTogdG0udXRpbC5SYW5kb20ucmFuZGludCgtMTAwLCBTQ1JFRU5fSEVJR0hUKzEwMCksXG4gICAgICAgICAgICAgICAgICAgIGFscGhhOiAwLFxuICAgICAgICAgICAgICAgIH0sIDYwMClcbiAgICAgICAgICAgICAgICAuY2FsbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVmZmVjdC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgLS1jb3VudGVyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRlciA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmZpcmUodG0uZXZlbnQuRXZlbnQoXCJlZmZlY3RlbmRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Lul5LiL44Gn44KCT0tcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbGYuZmxhcmUoXCJlZmZlY3RlbmRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2VsZjtcbiAgICB9LFxufSk7In19fVBLAQIUAAoAAAAAALV4iEWMDH8CoA4AAKAOAAAEAAAAAAAAAAAAAAAAAAAAAABkYXRhUEsFBgAAAAABAAEAMgAAAMIOAAAAAA==))\n\n```js\n    // GameScene\u30af\u30e9\u30b9\n    update: function () {\n        var self = this;\n        // 3\u79d2\u3060\u3063\u305f\u3089\u30b2\u30fc\u30e0\u30aa\u30fc\u30d0\u30fc\n        if (self.app.frame > 30*2) {\n            Effect().addChildTo(self).startEffect().on(\"effectend\", function () {\n                self.gameOver();\n            });\n            self.update = function () {};\n        }\n    },\n```\n\n```js\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function () {\n        var self = this;\n        var counter = 10;\n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    --counter;\n                    if (counter <= 0) {\n                        self.fire(tm.event.Event(\"effectend\"));\n                        // \u4ee5\u4e0b\u3067\u3082OK\n                        // self.flare(\"effectend\");\n                    }\n                });\n        });\n        \n        return self;\n    },\n```\n\n\u304b\u306a\u308a\u5f71\u97ff\u3092\u53d7\u3051\u305f\u8003\u3048\u65b9\u3060\u3063\u305f\u306e\u3067\u5099\u5fd8\u9332\u3068\u3057\u3066\u307e\u3068\u3081\u3066\u307f\u307e\u3057\u305f\u3002\ntmlib\u306b\u30de\u30b8\u611f\u8b1d\u3002YO YO\n\n### \u6700\u5f8c\u306b\n\n\u30a4\u30d9\u30f3\u30c8\u306e\u767a\u706b\u306f`counter`\u3067\u6570\u3048\u3066\u5b9f\u884c\u3057\u3066\u3044\u307e\u3059\u304c\u3001\u3053\u3046\u3044\u3046\u98a8\u306b\u66f8\u304f\u3068\u3088\u308a\u304b\u3063\u3053\u3044\u3044\u3067\u3059\u3002\n\n```js\n    // Effect\u30af\u30e9\u30b9\n    startEffect: function () {\n        var self = this;\n        var counter = 10;\n        // 10\u56de flow.pass\u304c\u547c\u3070\u308c\u305f\u3089\u5b9f\u884c\u3055\u308c\u308b\n        var flow = tm.util.Flow(counter, function () {\n            self.fire(tm.event.Event(\"effectend\"));\n            // \u4ee5\u4e0b\u3067\u3082OK\n            // self.flare(\"effectend\");\n        });\n        \n        // 10\u500b\u4f5c\u308b\n        (counter).times(function (i) {\n            var effect = tm.display.RectangleShape(30,30)\n                .addChildTo(self)\n                .setPosition(SCREEN_CENTER_X, SCREEN_CENTER_Y);\n            effect.tweener.clear()\n                .to({\n                    x: tm.util.Random.randint(-100, SCREEN_WIDTH+100),\n                    y: tm.util.Random.randint(-100, SCREEN_HEIGHT+100),\n                    alpha: 0,\n                }, 600)\n                .call(function () {\n                    effect.remove();\n                    flow.pass();\n                });\n        });\n        \n        return self;\n    },\n```\n"}