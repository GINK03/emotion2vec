{"context": "\u8868\u984c\u306e\u4ef6\u3001\u8abf\u3079\u305f\u7d50\u679c\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\u74b0\u5883\n* Amazon Linux AMI release 2016.09\n* Redash Version: 0.12.0.b2449\n\n\u80cc\u666f\nEC2\u4e0a\u306bRedash\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u304c\u3001Data Source\u306bTreasureData\u3092\u8a2d\u5b9a\u3057\u305f\u3068\u3053\u308dPresto\u306f\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u304c\u3001Hive\u304cTest Connection\u3067\u3053\u3051\u308b\u4e8b\u8c61\u304c\u767a\u751f\u3057\u305f\u3002\n\n\u8abf\u67fb\nTest Connection\u304c\u5931\u6557\u3057\u305f\u3068\u304d\u306eRedash\u306eapi_error.log\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u305f\u3002\n[2016-12-01 23:57:06 +0000] [13701] [CRITICAL] WORKER TIMEOUT (pid:13716)\n[2016-12-01 23:57:06,207][PID:13716][INFO][metrics] method=POST path=/api/data_sources/3/test endpoint=datasourcetestresource status=500 content_type=? content_length=-1 duration=30242.46 query_count=5 query_duration=33.58\n[2016-12-01 23:57:06 +0000] [13716] [INFO] Worker exiting (pid: 13716)\n[2016-12-01 23:57:06 +0000] [7475] [INFO] Booting worker with pid: 7475\n\n\u3053\u308c\u3092\u8abf\u3079\u305f\u3068\u3053\u308d\u3001Redash\u304c\u4f7f\u3063\u3066\u3044\u308bGunicorn\u3068\u3044\u3046WSGI server\u304c\u51fa\u3057\u3066\u3044\u308b\u30a8\u30e9\u30fc\u3060\u3063\u305f\u3002\n\u3053\u306eWGSI server\u3092\u4f7f\u3063\u3066Redash\u306eserver\u30d7\u30ed\u30bb\u30b9\u306f\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9+worker\u30d7\u30ed\u30bb\u30b9(\u30c7\u30d5\u30a9\u30eb\u30c8\u30674\u500b)\u3068\u3044\u3046\u69cb\u6210\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u634c\u3044\u3066\u3044\u308b\u3002\nGunicorn\u306e\u6a5f\u80fd\u3068\u3057\u3066\u3001\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9\u3068worker\u30d7\u30ed\u30bb\u30b9\u9593\u3067\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u901a\u4fe1\u3092\u3057\u3066\u3044\u3066\u3001\u4e00\u5b9a\u6642\u9593\uff08\u30c7\u30d5\u30a9\u30eb\u30c830\u79d2\uff09\u4ee5\u4e0a\u5fdc\u7b54\u304c\u306a\u3044worker\u30d7\u30ed\u30bb\u30b9\u3092\u5f37\u5236\u7684\u306b\u30d7\u30ed\u30bb\u30b9\u505c\u6b62\u3057\u3001\u65b0\u898fworker\u30d7\u30ed\u30bb\u30b9\u7acb\u3061\u4e0a\u3052\u3092\u3059\u308b\u6a5f\u69cb\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u3002\n\u4e0a\u8a18\u306eCRITICAL\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8WORKER TIMEOUT\u306f\u3053\u306e\u969b\u306b\u767a\u751f\u3059\u308b\u3002\n\u3064\u307e\u308a\u3001\n\nHive\u306eData Source\u306b\u5bfe\u3057\u3066Test Connection\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u3044\u305a\u308c\u304b\u306eWorker\u30d7\u30ed\u30bb\u30b9\u304c\u5b9f\u969b\u306e\u51e6\u7406\u3092\u958b\u59cb\u3059\u308b\n\u51e6\u7406\u304c30\u79d2\u305f\u3063\u3066\u3082\u7d42\u308f\u3089\u306a\u3044\u305f\u3081\u3001\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9\u306b\u3088\u308a\u5f53\u8a72Worker\u30d7\u30ed\u30bb\u30b9\u304c\u5f37\u5236\u505c\u6b62\u3055\u308c\u3066\u3057\u307e\u3046\n\n\u3068\u3044\u3046\u4e8b\u8c61\u304c\u8d77\u304d\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u308b\u3002\nPresto\u306fOK\u3067Hive\u304c\u30c0\u30e1\u3060\u3063\u305f\u306e\u306f\u3001Hive\u7279\u6709\u306e\u521d\u671f\u5316\u51e6\u7406\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u3044\u3046\u7279\u5fb4\u3067\u3053\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u3057\u307e\u3063\u305f\u305f\u3081\u3060\u308d\u3046\u3002\n\n\u5bfe\u7b56\nGunicorn\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u304c\u3042\u308b\u3002\nhttp://docs.gunicorn.org/en/stable/settings.html\n\nWorker\u30d7\u30ed\u30bb\u30b9\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u901a\u4fe1\u5fdc\u7b54\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u5024\u3092\u4f38\u3070\u3059\nworker\u30d7\u30ed\u30bb\u30b9\u306e\u30bf\u30a4\u30d7\u3092\u5909\u3048\u3066\u51e6\u7406\u3068\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u5fdc\u7b54\u3092\u975e\u540c\u671f\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n1\u3064\u76ee\u306f\u5bfe\u51e6\u7642\u6cd5\u306a\u306e\u3067\u3001\u306a\u308b\u3079\u304f\u306a\u30892\u3064\u76ee\u3092\u53d6\u308a\u305f\u3044\u3068\u3053\u308d\u3002\n1\u3064\u76ee\u306fgunicorn\u8d77\u52d5\u6642\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30aa\u30d7\u30b7\u30e7\u30f3-t/--timeout\u306b\u79d2\u6570\u3092\u6e21\u305b\u3070\u3088\u3044\u3002\n2\u3064\u3081\u306f\u3001gunicorn\u8d77\u52d5\u6642\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30aa\u30d7\u30b7\u30e7\u30f3-k/--worker_class\u306bWorker\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n\u6307\u5b9a\u3067\u304d\u308bWorker\u306e\u30bf\u30a4\u30d7\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3001\u4ee5\u4e0b\u306e\u30af\u30e9\u30b9\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3060\u3002\u305d\u308c\u305e\u308c\u3001Python\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u5fc5\u8981\u306a\u306e\u3067pip\u3067\u5225\u9014\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\nsync : \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306e\u8a2d\u5b9a\neventlet : eventlet >= 0.9.7 \u304c\u5fc5\u8981\ngevent : gevent >= 0.13 \u304c\u5fc5\u8981\ntornado : tornado >= 0.2 \u304c\u5fc5\u8981\ngthread - Python 2 requires the futures package to be installed\ngaiohttp - Requires Python 3.4 and aiohttp >= 0.21.5\n\n\u305d\u306e\u307b\u304b\u3001\u81ea\u5206\u3067\u72ec\u81ea\u306eWorker\u30af\u30e9\u30b9\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\nRedash\u7528\u306e\u5bfe\u7b56\n\u4eca\u56de\u306f\u3001Worker\u30af\u30e9\u30b9\u306bgevent\u3092\u6307\u5b9a\u3059\u308b\u65b9\u6cd5\u3067\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n$ sudo pip install gevent\n\n\u3057\u305f\u4e0a\u3067\u3001Redash\u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3066gunicorn\u8d77\u52d5\u3092\u884c\u306a\u3063\u3066\u3044\u308b\u7b87\u6240\u3067\u8d77\u52d5\u6642\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\nsupervisord.conf\n[program:redash_server]\ncommand=/opt/redash/current/bin/run /usr/local/bin/gunicorn -b 127.0.0.1:5000 --name redash -w 4 -k gevent redash.wsgi:app\n\n\n\u3053\u308c\u3067\u3001Worker\u30d7\u30ed\u30bb\u30b9\u306b\u304a\u3044\u3066\u3001Hive\u306eTest Connection\u306e\u51e6\u7406\u3068\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9\u3068\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u901a\u4fe1\u5fdc\u7b54\u51e6\u7406\u304c\u975e\u540c\u671f\u306b\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u3001Hive\u306eData Source\u3082Redash\u304b\u3089\u6271\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\u8003\u5bdf\nGunicorn\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3066\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5834\u5408\u306b\u306fWorker\u30af\u30e9\u30b9\u306e\u8a2d\u5b9a\u3092\u975e\u540c\u671f\u306b\u3059\u308b\u691c\u8a0e\u3092\u3057\u305f\u65b9\u304c\u3088\u3044\u3002\n\n\u9577\u6642\u9593\u306e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u547c\u3073\u51fa\u3057\u3092\u5b9f\u884c\u3059\u308b\uff08\u5916\u90e8\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3059\u308b\uff09\n\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u8d8a\u3057\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u5fdc\u7b54\u3092\u884c\u3046\n\u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u51e6\u7406\u3092\u884c\u3046\n\u3042\u308b\u7a0b\u5ea6\u9577\u3044\u6642\u9593\u306e\u30dd\u30fc\u30ea\u30f3\u30b0\u51e6\u7406\u3092\u884c\u3046\nWebSockets\u3092\u5229\u7528\nComet\u3092\u5229\u7528\n\nhttp://docs.gunicorn.org/en/stable/design.html#choosing-a-worker-type\n\u4eca\u56de\u306e\u5834\u5408\u3001Redash\u304b\u3089\u5916\u90e8\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308bTreasure Data\u306eHive\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u307e\u3055\u306b\u8a72\u5f53\u3057\u3066\u3044\u305f\u3068\u3044\u3046\u308f\u3051\u3002\n\u30af\u30e9\u30a6\u30c9\u3067\u306a\u304f\u3066\u3082Redash\u304b\u308930\u79d2\u4ee5\u4e0a\u304b\u304b\u308b\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u666e\u901a\u306b\u3042\u308b\u3068\u601d\u308f\u308c\u308b\u306e\u3067\u3001Redash\u3092\u4f7f\u3046\u969b\u306b\u306fWorker\u30af\u30e9\u30b9\u306e\u8a2d\u5b9a\u306f\u975e\u540c\u671f\u306b\u5909\u3048\u3066\u304a\u304f\u306e\u304c\u826f\u3055\u305d\u3046\u3002\n\u4ee5\u4e0a\u3002\n\u8868\u984c\u306e\u4ef6\u3001\u8abf\u3079\u305f\u7d50\u679c\u3092\u30e1\u30e2\u3057\u3066\u304a\u304f\u3002\n\n\u74b0\u5883\n* Amazon Linux AMI release 2016.09\n* Redash Version: 0.12.0.b2449\n\n# \u80cc\u666f\nEC2\u4e0a\u306bRedash\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u305f\u304c\u3001Data Source\u306bTreasureData\u3092\u8a2d\u5b9a\u3057\u305f\u3068\u3053\u308dPresto\u306f\u6b63\u5e38\u306b\u52d5\u4f5c\u3059\u308b\u304c\u3001Hive\u304cTest Connection\u3067\u3053\u3051\u308b\u4e8b\u8c61\u304c\u767a\u751f\u3057\u305f\u3002\n\n# \u8abf\u67fb\n\nTest Connection\u304c\u5931\u6557\u3057\u305f\u3068\u304d\u306eRedash\u306eapi_error.log\u306b\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u51fa\u529b\u3055\u308c\u3066\u3044\u305f\u3002\n\n```\n[2016-12-01 23:57:06 +0000] [13701] [CRITICAL] WORKER TIMEOUT (pid:13716)\n[2016-12-01 23:57:06,207][PID:13716][INFO][metrics] method=POST path=/api/data_sources/3/test endpoint=datasourcetestresource status=500 content_type=? content_length=-1 duration=30242.46 query_count=5 query_duration=33.58\n[2016-12-01 23:57:06 +0000] [13716] [INFO] Worker exiting (pid: 13716)\n[2016-12-01 23:57:06 +0000] [7475] [INFO] Booting worker with pid: 7475\n```\n\n\u3053\u308c\u3092\u8abf\u3079\u305f\u3068\u3053\u308d\u3001Redash\u304c\u4f7f\u3063\u3066\u3044\u308b[Gunicorn](http://docs.gunicorn.org/en/stable/index.html#)\u3068\u3044\u3046WSGI server\u304c\u51fa\u3057\u3066\u3044\u308b\u30a8\u30e9\u30fc\u3060\u3063\u305f\u3002\n\n\n\u3053\u306eWGSI server\u3092\u4f7f\u3063\u3066Redash\u306eserver\u30d7\u30ed\u30bb\u30b9\u306f\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9+worker\u30d7\u30ed\u30bb\u30b9(\u30c7\u30d5\u30a9\u30eb\u30c8\u30674\u500b)\u3068\u3044\u3046\u69cb\u6210\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u634c\u3044\u3066\u3044\u308b\u3002\n\nGunicorn\u306e\u6a5f\u80fd\u3068\u3057\u3066\u3001\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9\u3068worker\u30d7\u30ed\u30bb\u30b9\u9593\u3067\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u901a\u4fe1\u3092\u3057\u3066\u3044\u3066\u3001\u4e00\u5b9a\u6642\u9593\uff08\u30c7\u30d5\u30a9\u30eb\u30c830\u79d2\uff09\u4ee5\u4e0a\u5fdc\u7b54\u304c\u306a\u3044worker\u30d7\u30ed\u30bb\u30b9\u3092\u5f37\u5236\u7684\u306b\u30d7\u30ed\u30bb\u30b9\u505c\u6b62\u3057\u3001\u65b0\u898fworker\u30d7\u30ed\u30bb\u30b9\u7acb\u3061\u4e0a\u3052\u3092\u3059\u308b\u6a5f\u69cb\u304c\u5b58\u5728\u3057\u3066\u3044\u308b\u3002\n\u4e0a\u8a18\u306eCRITICAL\u30a8\u30e9\u30fc\u30e1\u30c3\u30bb\u30fc\u30b8`WORKER TIMEOUT`\u306f\u3053\u306e\u969b\u306b\u767a\u751f\u3059\u308b\u3002\n\n\u3064\u307e\u308a\u3001\n\n1. Hive\u306eData Source\u306b\u5bfe\u3057\u3066Test Connection\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u3044\u305a\u308c\u304b\u306eWorker\u30d7\u30ed\u30bb\u30b9\u304c\u5b9f\u969b\u306e\u51e6\u7406\u3092\u958b\u59cb\u3059\u308b\n2. \u51e6\u7406\u304c30\u79d2\u305f\u3063\u3066\u3082\u7d42\u308f\u3089\u306a\u3044\u305f\u3081\u3001\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9\u306b\u3088\u308a\u5f53\u8a72Worker\u30d7\u30ed\u30bb\u30b9\u304c\u5f37\u5236\u505c\u6b62\u3055\u308c\u3066\u3057\u307e\u3046\n\n\u3068\u3044\u3046\u4e8b\u8c61\u304c\u8d77\u304d\u3066\u3044\u308b\u3068\u601d\u308f\u308c\u308b\u3002\nPresto\u306fOK\u3067Hive\u304c\u30c0\u30e1\u3060\u3063\u305f\u306e\u306f\u3001Hive\u7279\u6709\u306e\u521d\u671f\u5316\u51e6\u7406\u306b\u6642\u9593\u304c\u304b\u304b\u308b\u3068\u3044\u3046\u7279\u5fb4\u3067\u3053\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u306b\u5f15\u3063\u304b\u304b\u3063\u3066\u3057\u307e\u3063\u305f\u305f\u3081\u3060\u308d\u3046\u3002\n\n\n# \u5bfe\u7b56\n\nGunicorn\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u53c2\u7167\u3057\u305f\u3068\u3053\u308d\u3001\u4ee5\u4e0b\u306e\u3044\u305a\u308c\u304b\u304c\u3042\u308b\u3002\nhttp://docs.gunicorn.org/en/stable/settings.html\n\n* Worker\u30d7\u30ed\u30bb\u30b9\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u901a\u4fe1\u5fdc\u7b54\u306e\u30bf\u30a4\u30e0\u30a2\u30a6\u30c8\u5024\u3092\u4f38\u3070\u3059\n* worker\u30d7\u30ed\u30bb\u30b9\u306e\u30bf\u30a4\u30d7\u3092\u5909\u3048\u3066\u51e6\u7406\u3068\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u5fdc\u7b54\u3092\u975e\u540c\u671f\u306b\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\n\n1\u3064\u76ee\u306f\u5bfe\u51e6\u7642\u6cd5\u306a\u306e\u3067\u3001\u306a\u308b\u3079\u304f\u306a\u30892\u3064\u76ee\u3092\u53d6\u308a\u305f\u3044\u3068\u3053\u308d\u3002\n\n1\u3064\u76ee\u306fgunicorn\u8d77\u52d5\u6642\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30aa\u30d7\u30b7\u30e7\u30f3`-t/--timeout`\u306b\u79d2\u6570\u3092\u6e21\u305b\u3070\u3088\u3044\u3002\n2\u3064\u3081\u306f\u3001gunicorn\u8d77\u52d5\u6642\u306e\u30d1\u30e9\u30e1\u30fc\u30bf\u30aa\u30d7\u30b7\u30e7\u30f3`-k/--worker_class`\u306bWorker\u306e\u30bf\u30a4\u30d7\u3092\u6307\u5b9a\u3059\u308b\u3002\n\n## \u6307\u5b9a\u3067\u304d\u308bWorker\u306e\u30bf\u30a4\u30d7\n\n\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u3001\u4ee5\u4e0b\u306e\u30af\u30e9\u30b9\u304c\u6307\u5b9a\u3067\u304d\u308b\u3088\u3046\u3060\u3002\u305d\u308c\u305e\u308c\u3001Python\u306e\u30d1\u30c3\u30b1\u30fc\u30b8\u304c\u5fc5\u8981\u306a\u306e\u3067`pip`\u3067\u5225\u9014\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\n* sync : \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306e\u8a2d\u5b9a\n* eventlet : eventlet >= 0.9.7 \u304c\u5fc5\u8981\n* gevent : gevent >= 0.13 \u304c\u5fc5\u8981\n* tornado : tornado >= 0.2 \u304c\u5fc5\u8981\n* gthread - Python 2 requires the futures package to be installed\n* gaiohttp - Requires Python 3.4 and aiohttp >= 0.21.5\n\n\u305d\u306e\u307b\u304b\u3001\u81ea\u5206\u3067\u72ec\u81ea\u306eWorker\u30af\u30e9\u30b9\u3092\u5b9f\u88c5\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u308b\u3002\n\n## Redash\u7528\u306e\u5bfe\u7b56\n\n\u4eca\u56de\u306f\u3001Worker\u30af\u30e9\u30b9\u306bgevent\u3092\u6307\u5b9a\u3059\u308b\u65b9\u6cd5\u3067\u89e3\u6c7a\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u305f\u3002\n\n```\n$ sudo pip install gevent\n```\n\n\u3057\u305f\u4e0a\u3067\u3001Redash\u306e\u8d77\u52d5\u30b9\u30af\u30ea\u30d7\u30c8\u306b\u3066gunicorn\u8d77\u52d5\u3092\u884c\u306a\u3063\u3066\u3044\u308b\u7b87\u6240\u3067\u8d77\u52d5\u6642\u306e\u30aa\u30d7\u30b7\u30e7\u30f3\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\u3002\n\n```supervisord.conf\n[program:redash_server]\ncommand=/opt/redash/current/bin/run /usr/local/bin/gunicorn -b 127.0.0.1:5000 --name redash -w 4 -k gevent redash.wsgi:app\n```\n\n\u3053\u308c\u3067\u3001Worker\u30d7\u30ed\u30bb\u30b9\u306b\u304a\u3044\u3066\u3001Hive\u306eTest Connection\u306e\u51e6\u7406\u3068\u30de\u30b9\u30bf\u30d7\u30ed\u30bb\u30b9\u3068\u306e\u30cf\u30fc\u30c8\u30d3\u30fc\u30c8\u901a\u4fe1\u5fdc\u7b54\u51e6\u7406\u304c\u975e\u540c\u671f\u306b\u884c\u308f\u308c\u308b\u3088\u3046\u306b\u306a\u308a\u3001Hive\u306eData Source\u3082Redash\u304b\u3089\u6271\u3048\u308b\u3088\u3046\u306b\u306a\u308b\u3002\n\n\n# \u8003\u5bdf\nGunicorn\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3066\u8a18\u8f09\u3055\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u3001\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u5834\u5408\u306b\u306fWorker\u30af\u30e9\u30b9\u306e\u8a2d\u5b9a\u3092\u975e\u540c\u671f\u306b\u3059\u308b\u691c\u8a0e\u3092\u3057\u305f\u65b9\u304c\u3088\u3044\u3002\n\n* \u9577\u6642\u9593\u306e\u30d6\u30ed\u30c3\u30ad\u30f3\u30b0\u547c\u3073\u51fa\u3057\u3092\u5b9f\u884c\u3059\u308b\uff08\u5916\u90e8\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3059\u308b\uff09\n* \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u8d8a\u3057\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u5fdc\u7b54\u3092\u884c\u3046\n* \u30b9\u30c8\u30ea\u30fc\u30df\u30f3\u30b0\u51e6\u7406\u3092\u884c\u3046\n* \u3042\u308b\u7a0b\u5ea6\u9577\u3044\u6642\u9593\u306e\u30dd\u30fc\u30ea\u30f3\u30b0\u51e6\u7406\u3092\u884c\u3046\n* WebSockets\u3092\u5229\u7528\n* Comet\u3092\u5229\u7528\n\nhttp://docs.gunicorn.org/en/stable/design.html#choosing-a-worker-type\n\n\u4eca\u56de\u306e\u5834\u5408\u3001Redash\u304b\u3089\u5916\u90e8\u306eWeb\u30b5\u30fc\u30d3\u30b9\u3067\u3042\u308bTreasure Data\u306eHive\u30b5\u30fc\u30d3\u30b9\u3092\u5229\u7528\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u305f\u306e\u3067\u3001\u307e\u3055\u306b\u8a72\u5f53\u3057\u3066\u3044\u305f\u3068\u3044\u3046\u308f\u3051\u3002\n\n\u30af\u30e9\u30a6\u30c9\u3067\u306a\u304f\u3066\u3082Redash\u304b\u308930\u79d2\u4ee5\u4e0a\u304b\u304b\u308b\u30af\u30a8\u30ea\u3092\u5b9f\u884c\u3059\u308b\u3053\u3068\u306f\u666e\u901a\u306b\u3042\u308b\u3068\u601d\u308f\u308c\u308b\u306e\u3067\u3001Redash\u3092\u4f7f\u3046\u969b\u306b\u306fWorker\u30af\u30e9\u30b9\u306e\u8a2d\u5b9a\u306f\u975e\u540c\u671f\u306b\u5909\u3048\u3066\u304a\u304f\u306e\u304c\u826f\u3055\u305d\u3046\u3002\n\n\u4ee5\u4e0a\u3002\n\n\n\n\n\n\n", "tags": ["redash", "gunicorn"]}