{"context": "\n\n\u306f\u3058\u3081\u306b\n\n\u3053\u3061\u3089\u306e\u8a18\u4e8b\u306e\u5f8c\u65e5\u8ac7\u3068\u306a\u308a\u307e\u3059\u3002\n\n\u7d50\u5c40\u305d\u306e\u5f8c\u3069\u3046\u306a\u3063\u305f\u306e\u304b\n\n\n\nsync_action\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3066\u308b\u9014\u4e2d\u3067\u5b8c\u5168\u306bHDD\u304c\u8a8d\u8b58\u3057\u306a\u304f\u306a\u308b\n\u5fd9\u3057\u304f\u3066HDD\u8cb7\u3044\u306b\u884c\u304f\u6687\u3082\u306a\u304f\uff08\u3081\u3093\u3069\u304f\u3055\u3044\uff09\u653e\u7f6e\n\u4ed6\u306e\u30c7\u30a3\u30b9\u30af\u304c\u58ca\u308c\u308b\u3068\u5384\u4ecb\u306a\u306e\u3067\u3084\u3063\u3068\u306e\u3053\u3068\u3067\u91cd\u3044\u8170\u3092\u4e0a\u3052\u308b\u30fb\u30fb\u30fb\n\n\n\u524d\u63d0\n\n\nCentOS7\nHDD500GB \u00d7 4\u672c\u3000RAID10\u3000\u306e\u69cb\u6210\n\u4ea4\u63db\u3057\u305fHDD\u306f/dev/sdb\u306b\u5272\u308a\u5f53\u3066\u3055\u308c\u3066\u3044\u308b\n\n\n\u3084\u3063\u305f\u3053\u3068\n\n\n\nfdisk\u30b3\u30de\u30f3\u30c9\u3067\u65b0HDD\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\n\nmdadm\u30b3\u30de\u30f3\u30c9\u3067\u65b0HDD\u3092RAID\u3078\u7d44\u307f\u8fbc\u3080\n\n\n\u624b\u9806\u8a73\u7d30\n\n\n\u65b0HDD\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210\n\n\n\u4ed6\u306e\u30c7\u30a3\u30b9\u30af\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u78ba\u8a8d\n\n[root@localhost ~]# fdisk -l /dev/sda\n\nDisk /dev/sda: 500.1 GB, 500107862016 bytes, 976773168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8\nDisk label type: dos\n\u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x000e56b2\n\n\u30c7\u30d0\u30a4\u30b9 \u30d6\u30fc\u30c8      \u59cb\u70b9        \u7d42\u70b9     \u30d6\u30ed\u30c3\u30af   Id  \u30b7\u30b9\u30c6\u30e0\n/dev/sda1            2048   945397759   472697856   fd  Linux raid autodetect\n/dev/sda2       945397760   972118015    13360128   fd  Linux raid autodetect\n/dev/sda3   *   972118016   972632063      257024   fd  Linux raid autodetect\n/dev/sda4       972632064   976773119     2070528    5  Extended\n/dev/sda5       972634112   976773119     2069504   fd  Linux raid autodetect\n\n\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210\n\n[root@localhost ~]# fdisk /dev/sdb\nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0x248708bf.\n\nThe device presents a logical sector size that is smaller than\nthe physical sector size. Aligning to a physical sector (or optimal\nI/O) size boundary is recommended, or performance may be impacted.\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): p\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-4, default 1): 1\n\u6700\u521d sector (2048-976773167, \u521d\u671f\u5024 2048): 2048\nLast sector, +sectors or +size{K,M,G} (2048-976773167, \u521d\u671f\u5024 976773167): 945397759\nPartition 1 of type Linux and of size 450.8 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): p\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (2-4, default 2): 2\n\u6700\u521d sector (945397760-976773167, \u521d\u671f\u5024 945397760): 945397760\nLast sector, +sectors or +size{K,M,G} (945397760-976773167, \u521d\u671f\u5024 976773167): 972118015\nPartition 2 of type Linux and of size 12.8 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (2 primary, 0 extended, 2 free)\n   e   extended\nSelect (default p): p\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (3,4, default 3): 3\n\u6700\u521d sector (972118016-976773167, \u521d\u671f\u5024 972118016): 972118016\nLast sector, +sectors or +size{K,M,G} (972118016-976773167, \u521d\u671f\u5024 976773167): 972632063\nPartition 3 of type Linux and of size 251 MiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (3 primary, 0 extended, 1 free)\n   e   extended\nSelect (default e): e\nSelected partition 4\n\u6700\u521d sector (972632064-976773167, \u521d\u671f\u5024 972632064): 972632064\nLast sector, +sectors or +size{K,M,G} (972632064-976773167, \u521d\u671f\u5024 976773167): 976773119\nPartition 4 of type Extended and of size 2 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nAll primary partitions are in use\nAdding logical partition 5\n\u6700\u521d sector (972634112-976773119, \u521d\u671f\u5024 972634112): 972634112\nLast sector, +sectors or +size{K,M,G} (972634112-976773119, \u521d\u671f\u5024 976773119): 976773119\nPartition 5 of type Linux and of size 2 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 1\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 2\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 3\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 5\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): a\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 3\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p\n\nDisk /dev/sdb: 500.1 GB, 500107862016 bytes, 976773168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 4096 \u30d0\u30a4\u30c8 / 4096 \u30d0\u30a4\u30c8\nDisk label type: dos\n\u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x248708bf\n\n\u30c7\u30d0\u30a4\u30b9 \u30d6\u30fc\u30c8      \u59cb\u70b9        \u7d42\u70b9     \u30d6\u30ed\u30c3\u30af   Id  \u30b7\u30b9\u30c6\u30e0\n/dev/sdb1            2048   945397759   472697856   fd  Linux raid autodetect\n/dev/sdb2       945397760   972118015    13360128   fd  Linux raid autodetect\n/dev/sdb3   *   972118016   972632063      257024   fd  Linux raid autodetect\n/dev/sdb4       972632064   976773119     2070528    5  Extended\n/dev/sdb5       972634112   976773119     2069504   fd  Linux raid autodetect\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): w\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u306f\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\uff01\n\nioctl() \u3092\u547c\u3073\u51fa\u3057\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u3092\u518d\u8aad\u8fbc\u307f\u3057\u307e\u3059\u3002\n\u30c7\u30a3\u30b9\u30af\u3092\u540c\u671f\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\u78ba\u8a8d\n\n[root@localhost ~]# fdisk -l /dev/sdb\n\nDisk /dev/sdb: 500.1 GB, 500107862016 bytes, 976773168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 4096 \u30d0\u30a4\u30c8 / 4096 \u30d0\u30a4\u30c8\nDisk label type: dos\n\u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x248708bf\n\n\u30c7\u30d0\u30a4\u30b9 \u30d6\u30fc\u30c8      \u59cb\u70b9        \u7d42\u70b9     \u30d6\u30ed\u30c3\u30af   Id  \u30b7\u30b9\u30c6\u30e0\n/dev/sdb1            2048   945397759   472697856   fd  Linux raid autodetect\n/dev/sdb2       945397760   972118015    13360128   fd  Linux raid autodetect\n/dev/sdb3   *   972118016   972632063      257024   fd  Linux raid autodetect\n/dev/sdb4       972632064   976773119     2070528    5  Extended\n/dev/sdb5       972634112   976773119     2069504   fd  Linux raid autodetect\n\n\n\u65b0HDD\u3092RAID\u3078\u7d44\u307f\u8fbc\u3080\n\n\nRAID\u306e\u72b6\u614b\u3092\u78ba\u8a8d\n\n[root@localhost ~]# cat /proc/mdstat\nPersonalities : [raid10]\nmd124 : active raid10 sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 2/8 pages [8KB], 65536KB chunk\n\nmd125 : active raid10 sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd126 : active raid10 sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd127 : active raid10 sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n\nunused devices: <none>\n\n\n/dev/sdb1\u3092/dev/md124\u3078\u7d44\u307f\u8fbc\u3080\n\n[root@localhost ~]# mdadm -a /dev/md124 /dev/sdb1\nmdadm: added /dev/sdb1\n\n\n\u78ba\u8a8d\n\n[root@localhost ~]# cat /proc/mdstat\nPersonalities : [raid10]\nmd124 : active raid10 sdb1[4] sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      [>....................]  recovery =  0.3% (1615808/472566784) finish=140.8min speed=55717K/sec\n      bitmap: 2/8 pages [8KB], 65536KB chunk\n\nmd125 : active raid10 sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd126 : active raid10 sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd127 : active raid10 sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n\nunused devices: <none>\n\n\n\u4ed6\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3082\u8ffd\u52a0\n\n[root@localhost ~]# mdadm -a /dev/md125 /dev/sdb2\nmdadm: added /dev/sdb2\n[root@localhost ~]# mdadm -a /dev/md126 /dev/sdb3\nmdadm: added /dev/sdb3\n[root@localhost ~]# mdadm -a /dev/md127 /dev/sdb5\nmdadm: added /dev/sdb5\n\n\n\u518d\u5ea6\u78ba\u8a8d\n\n[root@localhost ~]# cat /proc/mdstat\nPersonalities : [raid10]\nmd124 : active raid10 sdb1[4] sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      [>....................]  recovery =  2.8% (13591424/472566784) finish=135.8min speed=56320K/sec\n      bitmap: 2/8 pages [8KB], 65536KB chunk\n\nmd125 : active raid10 sdb2[4] sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n        resync=DELAYED\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd126 : active raid10 sdb3[4] sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/3] [U_UU]\n        resync=DELAYED\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd127 : active raid10 sdb5[4] sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n        resync=DELAYED\n\nunused devices: <none>\n\n\n\u30ea\u30ab\u30d0\u30ea\u5b8c\u4e86\u5f8c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d\n\n\n\u7d04\u4e09\u6642\u9593\u5f8c\n\n[root@localhost ~]# cat /proc/mdstat ; date\nPersonalities : [raid10]\nmd124 : active raid10 sdb1[4] sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/4] [UUUU]\n      bitmap: 0/8 pages [0KB], 65536KB chunk\n\nmd125 : active raid10 sdb2[4] sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/4] [UUUU]\n      bitmap: 0/1 pages [0KB], 65536KB chunk\n\nmd126 : active raid10 sdb3[4] sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/4] [UUUU]\n      bitmap: 0/1 pages [0KB], 65536KB chunk\n\nmd127 : active raid10 sdb5[4] sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/4] [UUUU]\n\nunused devices: <none>\n\n\n\u304a\u308f\u308a\u306b\n\n\u3068\u308a\u3042\u3048\u305a\u521d\u81ea\u5b85RAID\u3001\u521d\u81ea\u5b85\u9bd6\u306eHDD\u4ea4\u63db\u304c\u7121\u4e8b\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\nHDD\u969c\u5bb3\u691c\u77e5\u306e\u4ed5\u7d44\u307f\u3092\u5165\u308c\u305f\u308a\u3001Docker\u5165\u308c\u305f\u308a\u3057\u3066\u8272\u3005\u3068\u904a\u3079\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\uff01\n\n\u53c2\u8003\n\nhttps://centossrv.com/centos5-raid-3.shtml\n# **\u306f\u3058\u3081\u306b**\n[\u3053\u3061\u3089\u306e\u8a18\u4e8b](http://qiita.com/Tocyuki/items/c8427dfb07af4cdc2106)\u306e\u5f8c\u65e5\u8ac7\u3068\u306a\u308a\u307e\u3059\u3002\n\n# **\u7d50\u5c40\u305d\u306e\u5f8c\u3069\u3046\u306a\u3063\u305f\u306e\u304b**\n- `sync_action`\u3067\u30c1\u30a7\u30c3\u30af\u3057\u3066\u308b\u9014\u4e2d\u3067\u5b8c\u5168\u306bHDD\u304c\u8a8d\u8b58\u3057\u306a\u304f\u306a\u308b\n- \u5fd9\u3057\u304f\u3066HDD\u8cb7\u3044\u306b\u884c\u304f\u6687\u3082\u306a\u304f\uff08\u3081\u3093\u3069\u304f\u3055\u3044\uff09\u653e\u7f6e\n- \u4ed6\u306e\u30c7\u30a3\u30b9\u30af\u304c\u58ca\u308c\u308b\u3068\u5384\u4ecb\u306a\u306e\u3067\u3084\u3063\u3068\u306e\u3053\u3068\u3067\u91cd\u3044\u8170\u3092\u4e0a\u3052\u308b\u30fb\u30fb\u30fb\n\n# **\u524d\u63d0**\n- CentOS7\n- HDD500GB \u00d7 4\u672c\u3000RAID10\u3000\u306e\u69cb\u6210\n- \u4ea4\u63db\u3057\u305fHDD\u306f`/dev/sdb`\u306b\u5272\u308a\u5f53\u3066\u3055\u308c\u3066\u3044\u308b\n\n# **\u3084\u3063\u305f\u3053\u3068**\n- `fdisk`\u30b3\u30de\u30f3\u30c9\u3067\u65b0HDD\u306b\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3092\u4f5c\u6210\n- `mdadm`\u30b3\u30de\u30f3\u30c9\u3067\u65b0HDD\u3092RAID\u3078\u7d44\u307f\u8fbc\u3080\n\n\n# **\u624b\u9806\u8a73\u7d30**\n## **\u65b0HDD\u3067\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210**\n### **\u4ed6\u306e\u30c7\u30a3\u30b9\u30af\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u78ba\u8a8d**\n```shell-session\n[root@localhost ~]# fdisk -l /dev/sda\n\nDisk /dev/sda: 500.1 GB, 500107862016 bytes, 976773168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 512 bytes\nI/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 512 \u30d0\u30a4\u30c8 / 512 \u30d0\u30a4\u30c8\nDisk label type: dos\n\u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x000e56b2\n\n\u30c7\u30d0\u30a4\u30b9 \u30d6\u30fc\u30c8      \u59cb\u70b9        \u7d42\u70b9     \u30d6\u30ed\u30c3\u30af   Id  \u30b7\u30b9\u30c6\u30e0\n/dev/sda1            2048   945397759   472697856   fd  Linux raid autodetect\n/dev/sda2       945397760   972118015    13360128   fd  Linux raid autodetect\n/dev/sda3   *   972118016   972632063      257024   fd  Linux raid autodetect\n/dev/sda4       972632064   976773119     2070528    5  Extended\n/dev/sda5       972634112   976773119     2069504   fd  Linux raid autodetect\n```\n\n### **\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u4f5c\u6210**\n```shell-session\n[root@localhost ~]# fdisk /dev/sdb\nWelcome to fdisk (util-linux 2.23.2).\n\nChanges will remain in memory only, until you decide to write them.\nBe careful before using the write command.\n\nDevice does not contain a recognized partition table\nBuilding a new DOS disklabel with disk identifier 0x248708bf.\n\nThe device presents a logical sector size that is smaller than\nthe physical sector size. Aligning to a physical sector (or optimal\nI/O) size boundary is recommended, or performance may be impacted.\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): p\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-4, default 1): 1\n\u6700\u521d sector (2048-976773167, \u521d\u671f\u5024 2048): 2048\nLast sector, +sectors or +size{K,M,G} (2048-976773167, \u521d\u671f\u5024 976773167): 945397759\nPartition 1 of type Linux and of size 450.8 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (1 primary, 0 extended, 3 free)\n   e   extended\nSelect (default p): p\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (2-4, default 2): 2\n\u6700\u521d sector (945397760-976773167, \u521d\u671f\u5024 945397760): 945397760\nLast sector, +sectors or +size{K,M,G} (945397760-976773167, \u521d\u671f\u5024 976773167): 972118015\nPartition 2 of type Linux and of size 12.8 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (2 primary, 0 extended, 2 free)\n   e   extended\nSelect (default p): p\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (3,4, default 3): 3\n\u6700\u521d sector (972118016-976773167, \u521d\u671f\u5024 972118016): 972118016\nLast sector, +sectors or +size{K,M,G} (972118016-976773167, \u521d\u671f\u5024 976773167): 972632063\nPartition 3 of type Linux and of size 251 MiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nPartition type:\n   p   primary (3 primary, 0 extended, 1 free)\n   e   extended\nSelect (default e): e\nSelected partition 4\n\u6700\u521d sector (972632064-976773167, \u521d\u671f\u5024 972632064): 972632064\nLast sector, +sectors or +size{K,M,G} (972632064-976773167, \u521d\u671f\u5024 976773167): 976773119\nPartition 4 of type Extended and of size 2 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): n\nAll primary partitions are in use\nAdding logical partition 5\n\u6700\u521d sector (972634112-976773119, \u521d\u671f\u5024 972634112): 972634112\nLast sector, +sectors or +size{K,M,G} (972634112-976773119, \u521d\u671f\u5024 976773119): 976773119\nPartition 5 of type Linux and of size 2 GiB is set\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 1\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 2\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 3\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): t\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 5\nHex code (type L to list all codes): fd\nChanged type of partition 'Linux' to 'Linux raid autodetect'\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): a\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u756a\u53f7 (1-5, default 5): 3\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): p\n\nDisk /dev/sdb: 500.1 GB, 500107862016 bytes, 976773168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 4096 \u30d0\u30a4\u30c8 / 4096 \u30d0\u30a4\u30c8\nDisk label type: dos\n\u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x248708bf\n\n\u30c7\u30d0\u30a4\u30b9 \u30d6\u30fc\u30c8      \u59cb\u70b9        \u7d42\u70b9     \u30d6\u30ed\u30c3\u30af   Id  \u30b7\u30b9\u30c6\u30e0\n/dev/sdb1            2048   945397759   472697856   fd  Linux raid autodetect\n/dev/sdb2       945397760   972118015    13360128   fd  Linux raid autodetect\n/dev/sdb3   *   972118016   972632063      257024   fd  Linux raid autodetect\n/dev/sdb4       972632064   976773119     2070528    5  Extended\n/dev/sdb5       972634112   976773119     2069504   fd  Linux raid autodetect\n\n\u30b3\u30de\u30f3\u30c9 (m \u3067\u30d8\u30eb\u30d7): w\n\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u306f\u5909\u66f4\u3055\u308c\u307e\u3057\u305f\uff01\n\nioctl() \u3092\u547c\u3073\u51fa\u3057\u3066\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u30c6\u30fc\u30d6\u30eb\u3092\u518d\u8aad\u8fbc\u307f\u3057\u307e\u3059\u3002\n\u30c7\u30a3\u30b9\u30af\u3092\u540c\u671f\u3057\u3066\u3044\u307e\u3059\u3002\n```\n\n### **\u78ba\u8a8d**\n```shell-session\n[root@localhost ~]# fdisk -l /dev/sdb\n\nDisk /dev/sdb: 500.1 GB, 500107862016 bytes, 976773168 sectors\nUnits = sectors of 1 * 512 = 512 bytes\nSector size (logical/physical): 512 bytes / 4096 bytes\nI/O \u30b5\u30a4\u30ba (\u6700\u5c0f / \u63a8\u5968): 4096 \u30d0\u30a4\u30c8 / 4096 \u30d0\u30a4\u30c8\nDisk label type: dos\n\u30c7\u30a3\u30b9\u30af\u8b58\u5225\u5b50: 0x248708bf\n\n\u30c7\u30d0\u30a4\u30b9 \u30d6\u30fc\u30c8      \u59cb\u70b9        \u7d42\u70b9     \u30d6\u30ed\u30c3\u30af   Id  \u30b7\u30b9\u30c6\u30e0\n/dev/sdb1            2048   945397759   472697856   fd  Linux raid autodetect\n/dev/sdb2       945397760   972118015    13360128   fd  Linux raid autodetect\n/dev/sdb3   *   972118016   972632063      257024   fd  Linux raid autodetect\n/dev/sdb4       972632064   976773119     2070528    5  Extended\n/dev/sdb5       972634112   976773119     2069504   fd  Linux raid autodetect\n```\n\n## **\u65b0HDD\u3092RAID\u3078\u7d44\u307f\u8fbc\u3080**\n### **RAID\u306e\u72b6\u614b\u3092\u78ba\u8a8d**\n```shell-session\n[root@localhost ~]# cat /proc/mdstat\nPersonalities : [raid10]\nmd124 : active raid10 sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 2/8 pages [8KB], 65536KB chunk\n\nmd125 : active raid10 sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd126 : active raid10 sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd127 : active raid10 sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n\nunused devices: <none>\n```\n\n### **`/dev/sdb1`\u3092`/dev/md124`\u3078\u7d44\u307f\u8fbc\u3080**\n```shell-session\n[root@localhost ~]# mdadm -a /dev/md124 /dev/sdb1\nmdadm: added /dev/sdb1\n```\n\n### **\u78ba\u8a8d**\n```shell-session\n[root@localhost ~]# cat /proc/mdstat\nPersonalities : [raid10]\nmd124 : active raid10 sdb1[4] sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      [>....................]  recovery =  0.3% (1615808/472566784) finish=140.8min speed=55717K/sec\n      bitmap: 2/8 pages [8KB], 65536KB chunk\n\nmd125 : active raid10 sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd126 : active raid10 sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/3] [U_UU]\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd127 : active raid10 sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n\nunused devices: <none>\n```\n\n### **\u4ed6\u306e\u30d1\u30fc\u30c6\u30a3\u30b7\u30e7\u30f3\u3082\u8ffd\u52a0**\n```shell-session\n[root@localhost ~]# mdadm -a /dev/md125 /dev/sdb2\nmdadm: added /dev/sdb2\n[root@localhost ~]# mdadm -a /dev/md126 /dev/sdb3\nmdadm: added /dev/sdb3\n[root@localhost ~]# mdadm -a /dev/md127 /dev/sdb5\nmdadm: added /dev/sdb5\n```\n\n### **\u518d\u5ea6\u78ba\u8a8d**\n```shell-session\n[root@localhost ~]# cat /proc/mdstat\nPersonalities : [raid10]\nmd124 : active raid10 sdb1[4] sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n      [>....................]  recovery =  2.8% (13591424/472566784) finish=135.8min speed=56320K/sec\n      bitmap: 2/8 pages [8KB], 65536KB chunk\n\nmd125 : active raid10 sdb2[4] sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n        resync=DELAYED\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd126 : active raid10 sdb3[4] sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/3] [U_UU]\n        resync=DELAYED\n      bitmap: 1/1 pages [4KB], 65536KB chunk\n\nmd127 : active raid10 sdb5[4] sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/3] [U_UU]\n        resync=DELAYED\n\nunused devices: <none>\n```\n\n### **\u30ea\u30ab\u30d0\u30ea\u5b8c\u4e86\u5f8c\u306e\u30b9\u30c6\u30fc\u30bf\u30b9\u3092\u78ba\u8a8d**\n- \u7d04\u4e09\u6642\u9593\u5f8c\n\n```shell-session\n[root@localhost ~]# cat /proc/mdstat ; date\nPersonalities : [raid10]\nmd124 : active raid10 sdb1[4] sda1[0] sdd1[3] sdc1[2]\n      945133568 blocks super 1.2 512K chunks 2 near-copies [4/4] [UUUU]\n      bitmap: 0/8 pages [0KB], 65536KB chunk\n\nmd125 : active raid10 sdb2[4] sdc2[2] sdd2[3] sda2[0]\n      26703872 blocks super 1.2 512K chunks 2 near-copies [4/4] [UUUU]\n      bitmap: 0/1 pages [0KB], 65536KB chunk\n\nmd126 : active raid10 sdb3[4] sdc3[2] sdd3[3] sda3[0]\n      513024 blocks super 1.0 512K chunks 2 near-copies [4/4] [UUUU]\n      bitmap: 0/1 pages [0KB], 65536KB chunk\n\nmd127 : active raid10 sdb5[4] sdd5[3] sdc5[2] sda5[0]\n      4136960 blocks super 1.2 512K chunks 2 near-copies [4/4] [UUUU]\n\nunused devices: <none>\n```\n\n# **\u304a\u308f\u308a\u306b**\n\u3068\u308a\u3042\u3048\u305a\u521d\u81ea\u5b85RAID\u3001\u521d\u81ea\u5b85\u9bd6\u306eHDD\u4ea4\u63db\u304c\u7121\u4e8b\u7d42\u308f\u308a\u307e\u3057\u305f\u3002\nHDD\u969c\u5bb3\u691c\u77e5\u306e\u4ed5\u7d44\u307f\u3092\u5165\u308c\u305f\u308a\u3001Docker\u5165\u308c\u305f\u308a\u3057\u3066\u8272\u3005\u3068\u904a\u3079\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3068\u601d\u3044\u307e\u3059\uff01\n\n\n\n# **\u53c2\u8003**\nhttps://centossrv.com/centos5-raid-3.shtml\n", "tags": ["CentOS", "mdadm", "RAID", "Linux"]}