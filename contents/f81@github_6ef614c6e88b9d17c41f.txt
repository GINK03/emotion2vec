{"tags": ["Bash", "CentOS6.3", "sendmail", "base64"], "context": " More than 1 year has passed since last update.\n\n\u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u4ed8\u304d\u30e1\u30fc\u30eb\u306e\u5b9f\u88c5\n\u3053\u306e\u5b9f\u88c5\u304c\u6b63\u89e3\u3068\u3044\u3046\u8a33\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\n\nuuencode\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u305f\u304f\u306a\u304b\u3063\u305f\u3002\necho \u3067\u30e1\u30fc\u30eb\u30d8\u30c3\u30c0\u3092\u4f5c\u308a\u305f\u304f\u306a\u304b\u3063\u305f\u3002\n\n\u3068\u3044\u3046\u3068\u3053\u308d\u3060\u3051\u306f\u3001\u5b88\u308a\u307e\u3057\u305fw\n\n\u74b0\u5883\n\nCentOS release 6.3\nsendmail-8.14.4-8.el6.x86_64\n\n\n\u5b9f\u88c5\n\n\u305d\u3093\u306a\u96e3\u3057\u3044\u3053\u3068\u306f\u3057\u3066\u307e\u305b\u3093\u3002\u30b7\u30f3\u30d7\u30eb\u306b\u3002\n\n#/bin/sh\n\n# commands.\nSENDMAIL=/usr/lib/sendmail\nECHO=/bin/echo\nGZIP=/bin/gzip\nCAT=/bin/cat\nRM=/bin/rm\n\n# attachment file info.\nATTACH_FILE=attachmail.txt\nATTACH_PATH=/tmp/$ATTACH_FILE\n\n# mail head settings.\nMAIL_BODY=/tmp/mail_body.txt\nMAIL_FROM=xxx@abc.com\nMAIL_TO=yyy@abc.com\nMAIL_SUBJECT=\"TEST ATTACHMENT MAIL.\"\nMAIL_BOUNDARY=`date +%Y%m%d%H%M%N`\n\n# make attachment file (test data).\n$ECHO \"1,2,3,4,5\" > $ATTACH_PATH\n$ECHO \"6,7,8,9,10\" >> $ATTACH_PATH\n\n# attachment compression.\ncd /tmp\n$GZIP $ATTACH_FILE\n\n\uff03make body.\n$ECHO \"this is Body.\" > $MAIL_BODY\n\n# send mail.\n$SENDMAIL -t << EOF\nFrom: ${MAIL_FROM}\nTo: ${MAIL_TO}\nSubject: ${MAIL_SUBJECT}\nMIME-Version: 1.0\nContent-type: multipart/mixed; boundary=${MAIL_BOUNDARY}\nContent-Transfer-Encoding: 7bit\n\n--${MAIL_BOUNDARY}\nContent-type: text/plain; charset=iso-2022-jp\nContent-Transfer-Encoding: 7bit\n\n`${CAT} ${MAIL_BODY}`\n\n--${MAIL_BOUNDARY}\nContent-type: application/zip;\n name=${ATTACH_FILE}.gz\nContent-Transfer-Encoding: base64\nContent-Disposition : attachment;\n filename=${ATTACH_FILE}.gz\n\n`${CAT} ${ATTACH_PATH}.gz | base64`\n\n--${MAIL_BOUNDARY}--\nEOF\n\n$RM -fr ${ATTACH_PATH}.gz\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n# \u6dfb\u4ed8\u30d5\u30a1\u30a4\u30eb\u4ed8\u304d\u30e1\u30fc\u30eb\u306e\u5b9f\u88c5\n\n\u3053\u306e\u5b9f\u88c5\u304c\u6b63\u89e3\u3068\u3044\u3046\u8a33\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u304c\u3001\n\n> uuencode\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u3044\u305f\u304f\u306a\u304b\u3063\u305f\u3002\n> echo \u3067\u30e1\u30fc\u30eb\u30d8\u30c3\u30c0\u3092\u4f5c\u308a\u305f\u304f\u306a\u304b\u3063\u305f\u3002\n\n\u3068\u3044\u3046\u3068\u3053\u308d\u3060\u3051\u306f\u3001\u5b88\u308a\u307e\u3057\u305fw\n\n## \u74b0\u5883\n- CentOS release 6.3\n- sendmail-8.14.4-8.el6.x86_64\n\n## \u5b9f\u88c5\n- \u305d\u3093\u306a\u96e3\u3057\u3044\u3053\u3068\u306f\u3057\u3066\u307e\u305b\u3093\u3002\u30b7\u30f3\u30d7\u30eb\u306b\u3002\n\n```\n#/bin/sh\n\n# commands.\nSENDMAIL=/usr/lib/sendmail\nECHO=/bin/echo\nGZIP=/bin/gzip\nCAT=/bin/cat\nRM=/bin/rm\n\n# attachment file info.\nATTACH_FILE=attachmail.txt\nATTACH_PATH=/tmp/$ATTACH_FILE\n\n# mail head settings.\nMAIL_BODY=/tmp/mail_body.txt\nMAIL_FROM=xxx@abc.com\nMAIL_TO=yyy@abc.com\nMAIL_SUBJECT=\"TEST ATTACHMENT MAIL.\"\nMAIL_BOUNDARY=`date +%Y%m%d%H%M%N`\n\n# make attachment file (test data).\n$ECHO \"1,2,3,4,5\" > $ATTACH_PATH\n$ECHO \"6,7,8,9,10\" >> $ATTACH_PATH\n\n# attachment compression.\ncd /tmp\n$GZIP $ATTACH_FILE\n\n\uff03make body.\n$ECHO \"this is Body.\" > $MAIL_BODY\n\n# send mail.\n$SENDMAIL -t << EOF\nFrom: ${MAIL_FROM}\nTo: ${MAIL_TO}\nSubject: ${MAIL_SUBJECT}\nMIME-Version: 1.0\nContent-type: multipart/mixed; boundary=${MAIL_BOUNDARY}\nContent-Transfer-Encoding: 7bit\n\n--${MAIL_BOUNDARY}\nContent-type: text/plain; charset=iso-2022-jp\nContent-Transfer-Encoding: 7bit\n\n`${CAT} ${MAIL_BODY}`\n\n--${MAIL_BOUNDARY}\nContent-type: application/zip;\n name=${ATTACH_FILE}.gz\nContent-Transfer-Encoding: base64\nContent-Disposition : attachment;\n filename=${ATTACH_FILE}.gz\n\n`${CAT} ${ATTACH_PATH}.gz | base64`\n\n--${MAIL_BOUNDARY}--\nEOF\n\n$RM -fr ${ATTACH_PATH}.gz\n```\n\n\u4ee5\u4e0a\u3067\u3059\u3002\n"}