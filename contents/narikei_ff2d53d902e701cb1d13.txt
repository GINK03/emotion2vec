{"tags": ["Arduino", "IoT", "\u96fb\u5b50\u5de5\u4f5c", "\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3"], "context": "\u5bdd\u308b\u524d\u306b\u96fb\u6c17\u3092\u6d88\u3059\u306e\u306f\u9762\u5012\u3067\u3059\u306d\u3001\u7acb\u3061\u4e0a\u304c\u308a\u305f\u304f\u306a\u3044\u3067\u3059\u306d\u3002\u9762\u5012\u304f\u3055\u3044\uff01\n\u6211\u304c\u5bb6\u3067\u306f\u60b2\u3057\u3044\u3053\u3068\u306b\u30ea\u30e2\u30b3\u30f3\u3067\u64cd\u4f5c\u3067\u304d\u308b\u7cfb\u306e\u30b7\u30fc\u30ea\u30f3\u30b0\u30e9\u30a4\u30c8\u304c\u53d6\u308a\u4ed8\u3051\u3067\u304d\u306a\u3044\u611f\u3058\u306e\u304a\u90e8\u5c4b\u3067\u3059\u3002\n\n\n\u30ea\u30e2\u30b3\u30f3\u3067\u30b9\u30a4\u30c3\u30c1\u3092\u64cd\u4f5c\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\uff01\n\n\n\n\u6750\u6599\n\nArduino Uno\n\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\uff08\uff33\uff27\uff19\uff12\uff32\uff09\n\u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\uff08PL-IRM2121\uff09\n\u30ea\u30e2\u30b3\u30f3\n\n\n\u3061\u3087\u3046\u3069\u58ca\u308c\u3066\u3057\u307e\u3063\u305f\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u4ed8\u3044\u3066\u3044\u305f\u3001\u4f7f\u3044\u9053\u306e\u306a\u304f\u306a\u3063\u305f\u30ea\u30e2\u30b3\u30f3\uff08RU-DM114\uff09\u304c\u3042\u3063\u305f\u306e\u3067\u3053\u308c\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n\n\n\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\u3092\u52d5\u304b\u3059\n\n\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\u306b\u306f\u305d\u308c\u305e\u308c5V\u3001GND\u30015\u756aPIN\u3092\u63a5\u7d9a\n\n\n#include<Servo.h>\n#define SERVO_PIN 5\n\nServo servo;\n\nvoid setup(){\n    servo.attach(SERVO_PIN);\n}\n\nvoid loop() {\n  servo.write(0);\n  delay(500);\n  servo.write(100);  \n  delay(500);\n}\n\n\n\n\n\n\u8d64\u5916\u7dda\u3092\u53d7\u4fe1\u3059\u308b\n\n\n\n#define READ_PIN 7\n#define LOW_STATE 0\n#define HIGH_STATE 1\n\nvoid setup(){\n  Serial.begin(9600);\n  pinMode(READ_PIN, INPUT);\n}\n\nint waitHigh() {\n  unsigned long start = micros();\n  while (digitalRead(READ_PIN) == HIGH) {\n    if (micros() - start > 5000000) {\n      return 1;\n    }\n  }\n  return 0;\n}\n\nunsigned long now = micros();\nunsigned long lastStateChangedMicros = micros();\nint state = HIGH_STATE;\n\nvoid loop() {\n  if (state == LOW_STATE) {\n    while (digitalRead(IR_READ_PIN) == LOW);\n  } else {\n    int ret = waitHigh();\n    if (ret == 1) {\n      Serial.print(\"\\n\");\n      return;\n    }\n  }\n\n  now = micros();\n  Serial.print((now - lastStateChangedMicros) / 10, DEC);\n  Serial.print(\",\");\n  lastStateChangedMicros = now;\n  if (state == HIGH_STATE) {\n    state = LOW_STATE;\n  } else {\n    state = HIGH_STATE;\n  }\n}\n\n\n\n\u8d64\u5916\u7dda\u30bb\u30f3\u30b5\u30fc\u304c\u53cd\u5fdc\u3057\u305f\u3089LED\u304c\u5149\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n\n\u53d7\u4fe1\u3057\u305f\u8d64\u5916\u7dda\u3092\u8b58\u5225\u3059\u308b\n\n\u3053\u306e\u307e\u307e\u3067\u306f\u3059\u3079\u3066\u306e\u8d64\u5916\u7dda\u306b\u53cd\u5fdc\u3057\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u30c6\u30ec\u30d3\u306e\u30ea\u30e2\u30b3\u30f3\u3067\u3082\u30a8\u30a2\u30b3\u30f3\u306e\u30ea\u30e2\u30b3\u30f3\u3067\u3082\u30bb\u30f3\u30b5\u30fc\u304c\u53cd\u5fdc\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u5bfe\u5fdc\u3055\u305b\u308b\u30ea\u30e2\u30b3\u30f3\u306e\u96fb\u6e90\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u306b\u306e\u307f\u306b\u53cd\u5fdc\u3055\u305b\u308b\u305f\u3081\u3001\u53d7\u4fe1\u3057\u305f\u3068\u304d\u306e\u4fe1\u53f7\u3092\u8abf\u3079\u307e\u3059\u3002\n\n\u96fb\u6e90\u30dc\u30bf\u30f3\u306e\u8d64\u5916\u7dda\u3092\u53d7\u4fe1\u3059\u308b\u3068\u30b7\u30ea\u30a2\u30eb\u30e2\u30cb\u30bf\u3067\u3053\u3093\u306a\u611f\u3058\u306e\u6570\u5024\u306e\u7f85\u5217\u304c\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u3002\n2028,803,384,54,46,56,44,60,136,59,40,60,41,60,135,60,136,59,135,60,384,59,136,59,136,59,41,56,43,60,41,59,41,60,41,59,40,59,2026,803,387,54,46,59,41,59,136,59,41,59,41,59,136,59,136,60,135,60,384,59,136,59,136,60,40,60,41,57,44,59,41,59,40,58,43,59,2026,803,387,56,44,59,41,59,136,56,44,59,41,59,136,59,136,59,135,60,384,59,136,59,136,59,41,60,41,59,41,60,41,59,41,59,40,59,2026,803,387,54,46,59,41,60,136,59,41,59,41,59,136,56,138,60,134,57,387,59,136,60,136,59,41,60,41,59,41,60,41,59,41,59,40,60,2026,805,384,54,46,60,41,59,136,59,41,59,41,59,136,59,136,59,135,60,384,57,138,59,136,59,41,60,41,59,41,59,41,60,42,58,40,60\n\n\u30a2\u30ca\u30ed\u30b0\u306a\u306e\u3067\u6570\u5024\u306f\u591a\u5c11\u524d\u5f8c\u3057\u307e\u3059\u304c\u3001\n\u3088\u304f\u89b3\u5bdf\u3059\u308b\u3068\u30012026,803,384,54,\u30fb\u30fb\u30fb\u3068\u3044\u3046\u30d1\u30bf\u30fc\u30f3\u304c\u4f55\u5ea6\u3082\u3067\u3066\u304f\u308b\u306e\u304c\u89b3\u6e2c\u3067\u304d\u307e\u3059\u3002\n\n\u3053\u308c\u3092\u30d1\u30bf\u30fc\u30f3\u6bce\u306b\u5206\u89e3\u3057\u3066\u3001Excel\u306b\u7a81\u3063\u8fbc\u307f\u307e\u3059\u3002\n\nMODE\u95a2\u6570\u3067\u6700\u983b\u5024\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u3053\u306e\u5024\u304c\u96fb\u6e90\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u3060\u3068\u63a8\u6e2c\u3067\u304d\u307e\u3059\u3002\n\n\n\u3053\u306e\uff12\u3064\u3092\u304f\u3063\u4ed8\u3051\u3066\u5b8c\u6210\uff01\n\n\n\u554f\u984c\u3044\u308d\u3044\u308d\n\n\n\u554f\u984c\u305d\u306e\uff11\u3000\u3042\u307e\u308a\u8d64\u5916\u7dda\u3092\u691c\u77e5\u3057\u306a\u3044\n\n\u5b8c\u5168\u306a\u4fe1\u53f7\u306f\u306a\u304b\u306a\u304b\u6765\u306a\u3044\u306e\u3067\u3001\u6570\u5024\u306e\u63fa\u3089\u304e\u306f\u3042\u308b\u7a0b\u5ea6\u8a31\u5bb9\u3059\u308b\nif (abs(value - pattern[number]) < 10) {\n  // OK\n}\n\n\n\n\u554f\u984c\u305d\u306e\uff12\u3000\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\u304c\u3046\u308b\u3055\u3044\n\n\u5f85\u6a5f\u97f3\u304c\u3046\u308b\u3055\u3044\u306e\u3067\n\u666e\u6bb5\u306fdetach\u3057\u3066\u304a\u304f\nservo.detach(SERVO_PIN);\n\nservo.attach(SERVO_PIN);\n\n\n\n\u96d1\u3067\u3059\u304c\u6700\u7d42\u7684\u306b\u3053\u3093\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308a\u307e\u3057\u305f\n#include<Servo.h>\n\n#define IR_READ_PIN 7\n#define SERVO_PIN 5\n#define LOW_STATE 0\n#define HIGH_STATE 1\n\nServo servo;\n\nvoid setup(){\n  Serial.begin(9600);\n  pinMode(IR_READ_PIN, INPUT);\n}\n\nint waitHigh() {\n  unsigned long start = micros();\n  while (digitalRead(IR_READ_PIN) == HIGH) {\n    if (micros() - start > 5000000) {\n      return 1;\n    }\n  }\n  return 0;\n}\n\nunsigned long now = micros();\nunsigned long lastStateChangedMicros = micros();\nint state = HIGH_STATE;\nint number = 0;\nint pattern[38] = {2026, 805,384,54,46,59,41,59,136,59,41,59,41,59,136,59,136,59,135,60,384,59,136,59,136,59,41,60,41,59,41,59,41,59,41,59,40,60};\n\nvoid loop() {\n  if (state == LOW_STATE) {\n    while (digitalRead(IR_READ_PIN) == LOW);\n  } else {\n    if (1 == waitHigh()) {\n      if (servo.attached()) {\n        servo.detach();\n      }\n\n      Serial.println(\"off\");\n      return;\n    }\n  }\n\n  now = micros();\n\n  long value = (now - lastStateChangedMicros) / 10;\n  Serial.print(value);\n  Serial.print(\", \");\n\n  number++;\n  if (value > 2000 || number >= 38) {\n    number = 0;\n  } else {\n    if (abs(value - pattern[number]) > 10) {\n      number = 0;\n    }\n    if (number == 38) {\n      push();\n      number = 0;\n    }\n  }\n\n  if (state == HIGH_STATE) {\n    state = LOW_STATE;\n  } else {\n    state = HIGH_STATE;\n  }\n\n  lastStateChangedMicros = now;\n}\n\nvoid push() {\n  Serial.println(\"\");\n  Serial.println(\"push!\");\n\n  if (!servo.attached()) {\n    servo.attach(SERVO_PIN);\n    delay(5000);\n  }\n\n  servo.write(170);\n  delay(1000);\n  servo.write(90);  \n  delay(500);\n}\n\n\n\n\u554f\u984c\u305d\u306e\uff13\u3000\u3069\u3046\u3084\u3063\u3066\u56fa\u5b9a\u3057\u3088\u3046\u30fb\u30fb\u30fb\n\n\u30c0\u30f3\u30dc\u30fc\u30eb\u3068\u30d3\u30cb\u30bf\u30a4\u3067\u56fa\u5b9a\u3057\u305f\n\n\n\n\u3068\u308a\u3042\u3048\u305a\u3067\u304d\u305f\uff01\n\n\n\ngood night \ud83c\udf19\n\n\n\u3053\u3046\u3084\u3063\u3066\u4eba\u985e\u306f\u9000\u5316\u3057\u3066\u3044\u304f\u306e\u3067\u3057\u305f\u3002\ud83d\udca4\n\n\n\u53c2\u8003\nhttp://eikatou.net/blog/2012/07/1796/\n\u5bdd\u308b\u524d\u306b\u96fb\u6c17\u3092\u6d88\u3059\u306e\u306f\u9762\u5012\u3067\u3059\u306d\u3001\u7acb\u3061\u4e0a\u304c\u308a\u305f\u304f\u306a\u3044\u3067\u3059\u306d\u3002\u9762\u5012\u304f\u3055\u3044\uff01\n\n\u6211\u304c\u5bb6\u3067\u306f\u60b2\u3057\u3044\u3053\u3068\u306b\u30ea\u30e2\u30b3\u30f3\u3067\u64cd\u4f5c\u3067\u304d\u308b\u7cfb\u306e\u30b7\u30fc\u30ea\u30f3\u30b0\u30e9\u30a4\u30c8\u304c\u53d6\u308a\u4ed8\u3051\u3067\u304d\u306a\u3044\u611f\u3058\u306e\u304a\u90e8\u5c4b\u3067\u3059\u3002\n\n---\n\n## \u30ea\u30e2\u30b3\u30f3\u3067\u30b9\u30a4\u30c3\u30c1\u3092\u64cd\u4f5c\u3067\u304d\u308b\u4ed5\u7d44\u307f\u3092\u4f5c\u308a\u307e\u3057\u3087\u3046\uff01\n\n![Artboard 1.png](https://qiita-image-store.s3.amazonaws.com/0/7132/cb11878d-fe5e-b79f-bfdb-57b2578d7258.png)\n\n---\n\n## \u6750\u6599\n\n* Arduino Uno\n* \u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\uff08\uff33\uff27\uff19\uff12\uff32\uff09\n* \u8d64\u5916\u7dda\u30ea\u30e2\u30b3\u30f3\u53d7\u4fe1\u30e2\u30b8\u30e5\u30fc\u30eb\uff08PL-IRM2121\uff09\n* \u30ea\u30e2\u30b3\u30f3\n\n> \u3061\u3087\u3046\u3069\u58ca\u308c\u3066\u3057\u307e\u3063\u305f\u30c7\u30a3\u30b9\u30d7\u30ec\u30a4\u306b\u4ed8\u3044\u3066\u3044\u305f\u3001\u4f7f\u3044\u9053\u306e\u306a\u304f\u306a\u3063\u305f\u30ea\u30e2\u30b3\u30f3\uff08RU-DM114\uff09\u304c\u3042\u3063\u305f\u306e\u3067\u3053\u308c\u3092\u4f7f\u3044\u307e\u3059\u3002\n\n---\n\n## \u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\u3092\u52d5\u304b\u3059\n\n---\n\n\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\u306b\u306f\u305d\u308c\u305e\u308c5V\u3001GND\u30015\u756aPIN\u3092\u63a5\u7d9a\n\n![fj_\u30d5\u3099\u30ec\u30c3\u30c8\u3099\u30db\u3099\u30fc\u30c8\u3099.png](https://qiita-image-store.s3.amazonaws.com/0/7132/6d5bdefe-6737-1eb3-0fda-41a6923a8952.png)\n\n---\n\n```cpp\n#include<Servo.h>\n#define SERVO_PIN 5\n\nServo servo;\n\nvoid setup(){\n    servo.attach(SERVO_PIN);\n}\n\nvoid loop() {\n  servo.write(0);\n  delay(500);\n  servo.write(100);  \n  delay(500);\n}\n```\n\n---\n\n[![image](https://qiita-image-store.s3.amazonaws.com/0/7132/a93d75da-7983-c239-6c59-a7e622b72d22.png)](https://www.instagram.com/p/BHPpw1mhwPc/)\n\n---\n\n## \u8d64\u5916\u7dda\u3092\u53d7\u4fe1\u3059\u308b\n\n---\n\n![fj_\u30d5\u3099\u30ec\u30c3\u30c8\u3099\u30db\u3099\u30fc\u30c8\u3099_2.png](https://qiita-image-store.s3.amazonaws.com/0/7132/eb1ea19b-4302-9093-f95f-4f9ff1a7d3b9.png)\n\n---\n\n```cpp\n#define READ_PIN 7\n#define LOW_STATE 0\n#define HIGH_STATE 1\n \nvoid setup(){\n  Serial.begin(9600);\n  pinMode(READ_PIN, INPUT);\n}\n \nint waitHigh() {\n  unsigned long start = micros();\n  while (digitalRead(READ_PIN) == HIGH) {\n    if (micros() - start > 5000000) {\n      return 1;\n    }\n  }\n  return 0;\n}\n \nunsigned long now = micros();\nunsigned long lastStateChangedMicros = micros();\nint state = HIGH_STATE;\n \nvoid loop() {\n  if (state == LOW_STATE) {\n    while (digitalRead(IR_READ_PIN) == LOW);\n  } else {\n    int ret = waitHigh();\n    if (ret == 1) {\n      Serial.print(\"\\n\");\n      return;\n    }\n  }\n     \n  now = micros();\n  Serial.print((now - lastStateChangedMicros) / 10, DEC);\n  Serial.print(\",\");\n  lastStateChangedMicros = now;\n  if (state == HIGH_STATE) {\n    state = LOW_STATE;\n  } else {\n    state = HIGH_STATE;\n  }\n}\n```\n\n---\n\n[![image](https://qiita-image-store.s3.amazonaws.com/0/7132/ae7bde6b-fd3d-261f-eb80-bd8b53bedf62.png)](https://www.instagram.com/p/BHPt9Xeh9GH/)\n\n\u8d64\u5916\u7dda\u30bb\u30f3\u30b5\u30fc\u304c\u53cd\u5fdc\u3057\u305f\u3089LED\u304c\u5149\u308b\u3088\u3046\u306b\u3057\u3066\u3044\u307e\u3059\u3002\n\n---\n\n## \u53d7\u4fe1\u3057\u305f\u8d64\u5916\u7dda\u3092\u8b58\u5225\u3059\u308b\n\n---\n\n\u3053\u306e\u307e\u307e\u3067\u306f\u3059\u3079\u3066\u306e\u8d64\u5916\u7dda\u306b\u53cd\u5fdc\u3057\u3066\u3057\u307e\u3046\u305f\u3081\u3001\u30c6\u30ec\u30d3\u306e\u30ea\u30e2\u30b3\u30f3\u3067\u3082\u30a8\u30a2\u30b3\u30f3\u306e\u30ea\u30e2\u30b3\u30f3\u3067\u3082\u30bb\u30f3\u30b5\u30fc\u304c\u53cd\u5fdc\u3057\u3066\u3057\u307e\u3044\u307e\u3059\u3002\n\u5bfe\u5fdc\u3055\u305b\u308b\u30ea\u30e2\u30b3\u30f3\u306e\u96fb\u6e90\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u306b\u306e\u307f\u306b\u53cd\u5fdc\u3055\u305b\u308b\u305f\u3081\u3001\u53d7\u4fe1\u3057\u305f\u3068\u304d\u306e\u4fe1\u53f7\u3092\u8abf\u3079\u307e\u3059\u3002\n\n---\n\n\u96fb\u6e90\u30dc\u30bf\u30f3\u306e\u8d64\u5916\u7dda\u3092\u53d7\u4fe1\u3059\u308b\u3068\u30b7\u30ea\u30a2\u30eb\u30e2\u30cb\u30bf\u3067\u3053\u3093\u306a\u611f\u3058\u306e\u6570\u5024\u306e\u7f85\u5217\u304c\u53d6\u5f97\u3067\u304d\u307e\u3057\u305f\u3002\n\n```\n2028,803,384,54,46,56,44,60,136,59,40,60,41,60,135,60,136,59,135,60,384,59,136,59,136,59,41,56,43,60,41,59,41,60,41,59,40,59,2026,803,387,54,46,59,41,59,136,59,41,59,41,59,136,59,136,60,135,60,384,59,136,59,136,60,40,60,41,57,44,59,41,59,40,58,43,59,2026,803,387,56,44,59,41,59,136,56,44,59,41,59,136,59,136,59,135,60,384,59,136,59,136,59,41,60,41,59,41,60,41,59,41,59,40,59,2026,803,387,54,46,59,41,60,136,59,41,59,41,59,136,56,138,60,134,57,387,59,136,60,136,59,41,60,41,59,41,60,41,59,41,59,40,60,2026,805,384,54,46,60,41,59,136,59,41,59,41,59,136,59,136,59,135,60,384,57,138,59,136,59,41,60,41,59,41,59,41,60,42,58,40,60\n```\n\n\u30a2\u30ca\u30ed\u30b0\u306a\u306e\u3067\u6570\u5024\u306f\u591a\u5c11\u524d\u5f8c\u3057\u307e\u3059\u304c\u3001\n\u3088\u304f\u89b3\u5bdf\u3059\u308b\u3068\u3001```2026,803,384,54,\u30fb\u30fb\u30fb```\u3068\u3044\u3046\u30d1\u30bf\u30fc\u30f3\u304c\u4f55\u5ea6\u3082\u3067\u3066\u304f\u308b\u306e\u304c\u89b3\u6e2c\u3067\u304d\u307e\u3059\u3002\n\n---\n\n\u3053\u308c\u3092\u30d1\u30bf\u30fc\u30f3\u6bce\u306b\u5206\u89e3\u3057\u3066\u3001Excel\u306b\u7a81\u3063\u8fbc\u307f\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2016-07-04 3.08.28.png](https://qiita-image-store.s3.amazonaws.com/0/7132/f8246f4f-1372-95e7-af8e-2f4f2824a9ce.png)\n\n**MODE\u95a2\u6570**\u3067\u6700\u983b\u5024\u304c\u53d6\u5f97\u3067\u304d\u307e\u3059\u306e\u3067\u3001\u3053\u306e\u5024\u304c\u96fb\u6e90\u30dc\u30bf\u30f3\u306e\u4fe1\u53f7\u3060\u3068\u63a8\u6e2c\u3067\u304d\u307e\u3059\u3002\n\n---\n\n## \u3053\u306e\uff12\u3064\u3092\u304f\u3063\u4ed8\u3051\u3066\u5b8c\u6210\uff01\n\n---\n\n## \u554f\u984c\u3044\u308d\u3044\u308d\n\n---\n\n### \u554f\u984c\u305d\u306e\uff11\u3000\u3042\u307e\u308a\u8d64\u5916\u7dda\u3092\u691c\u77e5\u3057\u306a\u3044\n\n---\n\n\u5b8c\u5168\u306a\u4fe1\u53f7\u306f\u306a\u304b\u306a\u304b\u6765\u306a\u3044\u306e\u3067\u3001\u6570\u5024\u306e\u63fa\u3089\u304e\u306f\u3042\u308b\u7a0b\u5ea6\u8a31\u5bb9\u3059\u308b\n\n```cpp\nif (abs(value - pattern[number]) < 10) {\n  // OK\n}\n```\n\n---\n\n### \u554f\u984c\u305d\u306e\uff12\u3000\u30b5\u30fc\u30dc\u30e2\u30fc\u30bf\u30fc\u304c\u3046\u308b\u3055\u3044\n\n---\n\n\u5f85\u6a5f\u97f3\u304c\u3046\u308b\u3055\u3044\u306e\u3067\n\n\u666e\u6bb5\u306f***detach***\u3057\u3066\u304a\u304f\n\n```cpp\nservo.detach(SERVO_PIN);\n```\n\n```cpp\nservo.attach(SERVO_PIN);\n```\n\n---\n\n## \u96d1\u3067\u3059\u304c\u6700\u7d42\u7684\u306b\u3053\u3093\u306a\u30b3\u30fc\u30c9\u306b\u306a\u308a\u307e\u3057\u305f\n\n```cpp\n#include<Servo.h>\n\n#define IR_READ_PIN 7\n#define SERVO_PIN 5\n#define LOW_STATE 0\n#define HIGH_STATE 1\n\nServo servo;\n\nvoid setup(){\n  Serial.begin(9600);\n  pinMode(IR_READ_PIN, INPUT);\n}\n\nint waitHigh() {\n  unsigned long start = micros();\n  while (digitalRead(IR_READ_PIN) == HIGH) {\n    if (micros() - start > 5000000) {\n      return 1;\n    }\n  }\n  return 0;\n}\n \nunsigned long now = micros();\nunsigned long lastStateChangedMicros = micros();\nint state = HIGH_STATE;\nint number = 0;\nint pattern[38] = {2026, 805,384,54,46,59,41,59,136,59,41,59,41,59,136,59,136,59,135,60,384,59,136,59,136,59,41,60,41,59,41,59,41,59,41,59,40,60};\n\nvoid loop() {\n  if (state == LOW_STATE) {\n    while (digitalRead(IR_READ_PIN) == LOW);\n  } else {\n    if (1 == waitHigh()) {\n      if (servo.attached()) {\n        servo.detach();\n      }\n\n      Serial.println(\"off\");\n      return;\n    }\n  }\n   \n  now = micros();\n\n  long value = (now - lastStateChangedMicros) / 10;\n  Serial.print(value);\n  Serial.print(\", \");\n\n  number++;\n  if (value > 2000 || number >= 38) {\n    number = 0;\n  } else {\n    if (abs(value - pattern[number]) > 10) {\n      number = 0;\n    }\n    if (number == 38) {\n      push();\n      number = 0;\n    }\n  }\n\n  if (state == HIGH_STATE) {\n    state = LOW_STATE;\n  } else {\n    state = HIGH_STATE;\n  }\n\n  lastStateChangedMicros = now;\n}\n\nvoid push() {\n  Serial.println(\"\");\n  Serial.println(\"push!\");\n\n  if (!servo.attached()) {\n    servo.attach(SERVO_PIN);\n    delay(5000);\n  }\n\n  servo.write(170);\n  delay(1000);\n  servo.write(90);  \n  delay(500);\n}\n```\n\n---\n\n### \u554f\u984c\u305d\u306e\uff13\u3000\u3069\u3046\u3084\u3063\u3066\u56fa\u5b9a\u3057\u3088\u3046\u30fb\u30fb\u30fb\n\n---\n\n\u30c0\u30f3\u30dc\u30fc\u30eb\u3068\u30d3\u30cb\u30bf\u30a4\u3067\u56fa\u5b9a\u3057\u305f\n\n![IMG_0245.jpg](https://qiita-image-store.s3.amazonaws.com/0/7132/eac607c2-22ef-69d4-59eb-10739f3c2b2b.jpeg)\n\n---\n\n## \u3068\u308a\u3042\u3048\u305a\u3067\u304d\u305f\uff01\n\n[![image](https://qiita-image-store.s3.amazonaws.com/0/7132/a5b6fa2f-bbde-d661-43fb-06fe52a06e62.png)](https://www.instagram.com/p/BHQAa6pB90g/)\n\n---\n\n## good night \ud83c\udf19\n\n---\n\n## \u3053\u3046\u3084\u3063\u3066\u4eba\u985e\u306f\u9000\u5316\u3057\u3066\u3044\u304f\u306e\u3067\u3057\u305f\u3002\ud83d\udca4\n\n---\n\n## \u53c2\u8003\nhttp://eikatou.net/blog/2012/07/1796/\n"}