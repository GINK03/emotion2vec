{"context": " More than 1 year has passed since last update.\u30b8\u30e7\u30a4\u30f3\u30c8\u306e\u8a08\u7b97\u306b\u5fc5\u8981\u306b\u306a\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\narc\n\n        /**\n         * v1\u304b\u3089v2\u3078\u3068\u5411\u304b\u3046\u5186\u5f27\u306e\u56de\u8ee2\u3092\u8868\u3059\u30af\u30a9\u30fc\u30bf\u30cb\u30aa\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n         * v1\u3068v2\u306f\u6b63\u898f\u5316\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n         * @param   v1 \u958b\u59cb\n         * @param   v2 \u7d42\u4e86\n         * @return\n         */\n        public function arc(v1:Vec3, v2:Vec3):Quat {\n            var x1:Number = v1.x;\n            var y1:Number = v1.y;\n            var z1:Number = v1.z;\n            var x2:Number = v2.x;\n            var y2:Number = v2.y;\n            var z2:Number = v2.z;\n            var d:Number = x1 * x2 + y1 * y2 + z1 * z2; // v1\u3068v2\u304c\u6b63\u898f\u5316\u3055\u308c\u3066\u3044\u308c\u3070\u5185\u7a4d\u306f cos(theta) \u3092\u8868\u3059\n            if (d == -1) { // cos(theta) = -1 \u3067\u3042\u308b\u306e\u3067180\u5ea6\u56de\u8ee2\u3057\u3066\u3044\u308b\n                x2 = y1 * x1 - z1 * z1;\n                y2 = -z1 * y1 - x1 * x1;\n                z2 = x1 * z1 + y1 * y1;\n                d = 1 / Math.sqrt(x2 * x2 + y2 * y2 + z2 * z2);\n                s = 0;\n                x = x2 * d; // v1\u306b\u5782\u76f4\u306a\u30d9\u30af\u30c8\u30eb\u3092\u8a2d\u5b9a\n                y = y2 * d;\n                z = z2 * d;\n                return this;\n            }\n            var cx:Number = y1 * z2 - z1 * y2; // \u5916\u7a4d\n            var cy:Number = z1 * x2 - x1 * z2;\n            var cz:Number = x1 * y2 - y1 * x2;\n            s = Math.sqrt((1 + d) * 0.5); // \u534a\u89d2\u306e\u516c\u5f0f\u306b\u3088\u308a cos(theta/2) \u3092\u5f97\u308b\n            d = 0.5 / s;\n            // \u3053\u3053\u3067 d = sin(theta/2) / sin(theta)\n            x = cx * d;\n            y = cy * d;\n            z = cz * d;\n            return this;\n        }\n\n\n\u30af\u30a9\u30fc\u30bf\u30cb\u30aa\u30f3\u30af\u30e9\u30b9\u306e\u6982\u8981\n\nQuat.as\npublic class Quat {\n    public var s:Number; // \u5b9f\u90e8\n    public var x:Number; // \u4ee5\u4e0b\u865a\u90e8\n    public var y:Number;\n    public var z:Number;\n}\n\n\n\u30d9\u30af\u30c8\u30eb\u30af\u30e9\u30b9\u306e\u6982\u8981\n\nVec3.as\npublic class Vec3 {\n    public var x:Number;\n    public var y:Number;\n    public var z:Number;\n}\n\n\n\u30b8\u30e7\u30a4\u30f3\u30c8\u306e\u8a08\u7b97\u306b\u5fc5\u8981\u306b\u306a\u3063\u305f\u306e\u3067\u30e1\u30e2\u3002\n\n```as:arc\n\n\t\t/**\n\t\t * v1\u304b\u3089v2\u3078\u3068\u5411\u304b\u3046\u5186\u5f27\u306e\u56de\u8ee2\u3092\u8868\u3059\u30af\u30a9\u30fc\u30bf\u30cb\u30aa\u30f3\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\t\t * v1\u3068v2\u306f\u6b63\u898f\u5316\u3055\u308c\u3066\u3044\u308b\u5fc5\u8981\u304c\u3042\u308b\u3053\u3068\u306b\u6ce8\u610f\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\t\t * @param\tv1 \u958b\u59cb\n\t\t * @param\tv2 \u7d42\u4e86\n\t\t * @return\n\t\t */\n\t\tpublic function arc(v1:Vec3, v2:Vec3):Quat {\n\t\t\tvar x1:Number = v1.x;\n\t\t\tvar y1:Number = v1.y;\n\t\t\tvar z1:Number = v1.z;\n\t\t\tvar x2:Number = v2.x;\n\t\t\tvar y2:Number = v2.y;\n\t\t\tvar z2:Number = v2.z;\n\t\t\tvar d:Number = x1 * x2 + y1 * y2 + z1 * z2; // v1\u3068v2\u304c\u6b63\u898f\u5316\u3055\u308c\u3066\u3044\u308c\u3070\u5185\u7a4d\u306f cos(theta) \u3092\u8868\u3059\n\t\t\tif (d == -1) { // cos(theta) = -1 \u3067\u3042\u308b\u306e\u3067180\u5ea6\u56de\u8ee2\u3057\u3066\u3044\u308b\n\t\t\t\tx2 = y1 * x1 - z1 * z1;\n\t\t\t\ty2 = -z1 * y1 - x1 * x1;\n\t\t\t\tz2 = x1 * z1 + y1 * y1;\n\t\t\t\td = 1 / Math.sqrt(x2 * x2 + y2 * y2 + z2 * z2);\n\t\t\t\ts = 0;\n\t\t\t\tx = x2 * d; // v1\u306b\u5782\u76f4\u306a\u30d9\u30af\u30c8\u30eb\u3092\u8a2d\u5b9a\n\t\t\t\ty = y2 * d;\n\t\t\t\tz = z2 * d;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tvar cx:Number = y1 * z2 - z1 * y2; // \u5916\u7a4d\n\t\t\tvar cy:Number = z1 * x2 - x1 * z2;\n\t\t\tvar cz:Number = x1 * y2 - y1 * x2;\n\t\t\ts = Math.sqrt((1 + d) * 0.5); // \u534a\u89d2\u306e\u516c\u5f0f\u306b\u3088\u308a cos(theta/2) \u3092\u5f97\u308b\n\t\t\td = 0.5 / s;\n\t\t\t// \u3053\u3053\u3067 d = sin(theta/2) / sin(theta)\n\t\t\tx = cx * d;\n\t\t\ty = cy * d;\n\t\t\tz = cz * d;\n\t\t\treturn this;\n\t\t}\n```\n\n\u30af\u30a9\u30fc\u30bf\u30cb\u30aa\u30f3\u30af\u30e9\u30b9\u306e\u6982\u8981\n\n```as:Quat.as\npublic class Quat {\n\tpublic var s:Number; // \u5b9f\u90e8\n\tpublic var x:Number; // \u4ee5\u4e0b\u865a\u90e8\n\tpublic var y:Number;\n\tpublic var z:Number;\n}\n```\n\n\u30d9\u30af\u30c8\u30eb\u30af\u30e9\u30b9\u306e\u6982\u8981\n\n```as:Vec3.as\npublic class Vec3 {\n\tpublic var x:Number;\n\tpublic var y:Number;\n\tpublic var z:Number;\n}\n```\n", "tags": ["Mathematics", "Quaternion", "ActionScript"]}