{"context": "\n\n\u306f\u3058\u3081\u306b\nruby\u3067DB2CSV\u3092\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n \u4e16\u306e\u4e2d\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u305f\u3089\u4e00\u77ac\u3060\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001ruby\u306e\u7df4\u7fd2\u306e\u305f\u3081\u3067\u3059\u3002\n DB\u306f\u7279\u306b\u3053\u3060\u308f\u308a\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u7c21\u5358\u306b\u4f7f\u7528\u3067\u304d\u308bsqlite\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\n\u524d\u63d0\nMac OS X(El Capitan)\nruby 2.0.0\nselite3(1.3.7)\n\n\u30c7\u30fc\u30bf\u6e96\u5099\n\u5e74\u3054\u3068\u306e\u5e74\u9f62\u5225\u7537\u5973\u306e\u4eba\u53e3\u6570\u3067\u3059\u3002\n\u798f\u4e95\u770c\u9bd6\u6c5f\u5e02\uff1e\u30c7\u30fc\u30bf\u30b7\u30c6\u30a3\u9bd6\u6c5f\uff08XML,RDF\u306b\u3088\u308b\u30aa\u30fc\u30d7\u30f3\u30c7\u30fc\u30bf\u5316\u306e\u63a8\u9032\uff09\u3088\u308a\u5f15\u7528\u3002\n\u4e0a\u8a18\u306e\u4eba\u53e3XML\u30d5\u30a1\u30a4\u30eb\u3092\u3082\u3068\u306b\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n\n\nColumn_name\nData_type\nLength\n\n\n\n\nNO\nnumber\n10\n\n\nYEAR\nnumber\n4\n\n\nAGE\nnumber\n3\n\n\nMAN\nnumber\n6\n\n\nFEM\nnumber\n6\n\n\n\n\u3042\u3089\u304b\u3058\u3081insert\u6587\u3092\u767a\u884c\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\ninsertM_POPULATION.sql\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('1','2003','0','341','329');\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('2','2003','1','366','374');\n\n...(\u4e2d\u7565)...\n\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('1095','2013','84','160','255');\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('1096','2013','85','151','248');\n\n\n\nRuby\u3067DB2CSV\u3092\u5b9f\u88c5\n\nselectM_POPULATION.sql\n/* \u5358\u7d14\u306b\u5168\u4ef6\u3092select */\nselect * from m_population order by 1;\n\n\n\nmakeCsv.ruby\n# -*- coding: utf-8 -*-\nrequire 'rubygems'\nrequire 'sqlite3'\n\nseparetor = \",\"\nsql = \"\"\nline = \"\"\n\nputs \"makeCSV start.\"\n#ruby\u306e\u5f15\u6570\u3067sql\u3092\u6307\u5b9a\nFile.open(\"#{ARGV[0]}.sql\", \"r\") do |sqlLines|\n  while sqlLine = sqlLines.gets\n    sql += sqlLine\n  end\nend\n\nSQLite3::Database.new('population.sqlite3') do |dbh|\n  dbh.execute(sql) do |row|\n    for i in 0..row.size - 1 do\n      line.concat(\"#{row[i]}\")\n      if i != row.size - 1\n        line.concat(separetor)\n      else\n        line.concat(\"\\n\")\n      end\n    end\n  end\nend\n\nFile.write(\"output.csv\", line)\nputs \"makeCSV finish.\"\n\n\n\u5b9f\u884c\u3059\u308b\nruby makeCsv.ruby selectM_POPULATION\n\u7d50\u679c\n\noutput.csv\n1,2003,0,341,329\n2,2003,1,366,374\n3,2003,2,360,367\n\n...(\u4e2d\u7565)...\n\n1109,2013,98,9,26\n1110,2013,99,1,17\n1111,2013,100,5,33\n\n\n\u60f3\u5b9a\u901a\u308a\u3001CSV\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\nruby\u3067\u306e\u7c21\u5358\u306a\u5b9f\u88c5\u3067\u3057\u305f\u3002\u5f15\u304d\u7d9a\u304druby\u306e\u52c9\u5f37\u3092\u3057\u3066\u3044\u3053\u3046\u304b\u3068\u3002\n# \u306f\u3058\u3081\u306b\n ruby\u3067DB2CSV\u3092\u30b3\u30fc\u30c7\u30a3\u30f3\u30b0\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n \u4e16\u306e\u4e2d\u306e\u30c4\u30fc\u30eb\u3092\u4f7f\u7528\u3057\u305f\u3089\u4e00\u77ac\u3060\u3068\u601d\u3046\u306e\u3067\u3059\u304c\u3001ruby\u306e\u7df4\u7fd2\u306e\u305f\u3081\u3067\u3059\u3002\n DB\u306f\u7279\u306b\u3053\u3060\u308f\u308a\u304c\u306a\u304b\u3063\u305f\u306e\u3067\u3001\u7c21\u5358\u306b\u4f7f\u7528\u3067\u304d\u308bsqlite\u3092\u4f7f\u7528\u3057\u307e\u3057\u305f\u3002\n\n# \u524d\u63d0\nMac OS X(El Capitan)\nruby 2.0.0\nselite3(1.3.7)\n\n# \u30c7\u30fc\u30bf\u6e96\u5099\n\n\u5e74\u3054\u3068\u306e\u5e74\u9f62\u5225\u7537\u5973\u306e\u4eba\u53e3\u6570\u3067\u3059\u3002\n[\u798f\u4e95\u770c\u9bd6\u6c5f\u5e02\uff1e\u30c7\u30fc\u30bf\u30b7\u30c6\u30a3\u9bd6\u6c5f\uff08XML,RDF\u306b\u3088\u308b\u30aa\u30fc\u30d7\u30f3\u30c7\u30fc\u30bf\u5316\u306e\u63a8\u9032\uff09](http://www.city.sabae.fukui.jp/pageview.html?id=11753)\u3088\u308a\u5f15\u7528\u3002\n\u4e0a\u8a18\u306e\u4eba\u53e3XML\u30d5\u30a1\u30a4\u30eb\u3092\u3082\u3068\u306b\u3057\u3066\u304a\u308a\u307e\u3059\u3002\n\n| Column_name | Data_type | Length |\n|:-----------:|:--------:|:------:|\n| NO          | number   | 10     |\n| YEAR        | number   | 4      |\n| AGE         | number   | 3      |\n| MAN         | number   | 6      |\n| FEM         | number   | 6      |\n\n\u3042\u3089\u304b\u3058\u3081insert\u6587\u3092\u767a\u884c\u3057\u3066\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```insertM_POPULATION.sql\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('1','2003','0','341','329');\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('2','2003','1','366','374');\n\n...(\u4e2d\u7565)...\n\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('1095','2013','84','160','255');\ninsert into M_POPULATION (NO,YEAR,AGE,MAN,FEM)\nvalues ('1096','2013','85','151','248');\n```\n\n# Ruby\u3067DB2CSV\u3092\u5b9f\u88c5\n\n```selectM_POPULATION.sql\n/* \u5358\u7d14\u306b\u5168\u4ef6\u3092select */\nselect * from m_population order by 1;\n```\n\n```makeCsv.ruby\n# -*- coding: utf-8 -*-\nrequire 'rubygems'\nrequire 'sqlite3'\n\nseparetor = \",\"\nsql = \"\"\nline = \"\"\n\nputs \"makeCSV start.\"\n#ruby\u306e\u5f15\u6570\u3067sql\u3092\u6307\u5b9a\nFile.open(\"#{ARGV[0]}.sql\", \"r\") do |sqlLines|\n  while sqlLine = sqlLines.gets\n    sql += sqlLine\n  end\nend\n\nSQLite3::Database.new('population.sqlite3') do |dbh|\n  dbh.execute(sql) do |row|\n    for i in 0..row.size - 1 do\n      line.concat(\"#{row[i]}\")\n      if i != row.size - 1\n        line.concat(separetor)\n      else\n        line.concat(\"\\n\")\n      end\n    end\n  end\nend\n\nFile.write(\"output.csv\", line)\nputs \"makeCSV finish.\"\n```\n\n\u5b9f\u884c\u3059\u308b\n`ruby makeCsv.ruby selectM_POPULATION`\n\n\u7d50\u679c\n\n```output.csv\n1,2003,0,341,329\n2,2003,1,366,374\n3,2003,2,360,367\n\n...(\u4e2d\u7565)...\n\n1109,2013,98,9,26\n1110,2013,99,1,17\n1111,2013,100,5,33\n```\n\n\u60f3\u5b9a\u901a\u308a\u3001CSV\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002\nruby\u3067\u306e\u7c21\u5358\u306a\u5b9f\u88c5\u3067\u3057\u305f\u3002\u5f15\u304d\u7d9a\u304druby\u306e\u52c9\u5f37\u3092\u3057\u3066\u3044\u3053\u3046\u304b\u3068\u3002\n", "tags": ["Ruby", "CSV"]}