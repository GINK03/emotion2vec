{"context": " More than 1 year has passed since last update.http://jawsug-cli.doorkeeper.jp/events/18571 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001DynamoDB\u306eitem\u3092\u4f5c\u6210\u3001\u66f4\u65b0\u3001\u524a\u9664\u3057\u3066\u307f\u307e\u3059\u3002\n\u3042\u308f\u305b\u3066\u3001\u7c21\u5358\u306a\u30b9\u30ad\u30e3\u30f3\u3084\u30af\u30a8\u30ea\u30fc\u306e\u4f7f\u3044\u65b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\nput-item\nget-item\ndelete-item\nscan\nquery\n\n\n\u524d\u63d0\u6761\u4ef6\n\nDynamoDB\u3078\u306e\u6a29\u9650\n\nDynamoDB\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n\nAWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\nAWS CLI 1.7.7\n\n\n0. \u4e8b\u524d\u4f5c\u696d\n\n0.1. \u5909\u6570\u306e\u78ba\u8a8d\n\n\u5909\u6570\u306e\u78ba\u8a8d\ncat << ETX\n\nAWS_DEFAULT_REGION: ${AWS_DEFAULT_REGION}\nDYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n\nETX\n\n\n\n0.2. DynamoDB\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u6307\u5b9a\nDYNAMO_TABLE_NAME\u304c\u7a7a\u304b\u3001\u60f3\u5b9a\u3068\u7570\u306a\u308b\u5834\u5408\u306f\u6307\u5b9a\u3057\u306a\u304a\u3057\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9(\u4f8b)\nDYNAMO_TABLE_NAME='ProductCatalog'\n\n\n\n1. \u30a2\u30a4\u30c6\u30e0\u306e\u4f5c\u6210 (put-item)\nhttp://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/GettingStartedCreateTables.html \u306e\u300c\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9 1: \u88fd\u54c1\u30ab\u30bf\u30ed\u30b0\u300d\u306e\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u307e\u3059\u3002\n\n\u30a8\u30f3\u30c8\u30ea101\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"101\"},\"Title\":{\"S\":\"Book101Title\"},\"ISBN\":{\"S\":\"111-1111111111\"},\"Authors\":{\"SS\":[\"Author1\"]},\"Price\":{\"N\":\"2\"},\"Dimensions\":{\"S\":\"8.5x11.0x0.5\"},\"PageCount\":{\"N\":\"500\"},\"InPublication\":{\"B\":\"true\"},\"ProductCategory\":{\"S\":\"Book\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30a8\u30f3\u30c8\u30ea102\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"102\"},\"Title\":{\"S\":\"Book102Title\"},\"ISBN\":{\"S\":\"222-2222222222\"},\"Authors\":{\"SS\":[\"Author1\",\"Author2\"]},\"Price\":{\"N\":\"20\"},\"Dimensions\":{\"S\":\"8.5x11.0x0.8\"},\"PageCount\":{\"N\":\"600\"},\"InPublication\":{\"B\":\"true\"},\"ProductCategory\":{\"S\":\"Book\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\n      echo ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30a8\u30f3\u30c8\u30ea103\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"103\"},\"Title\":{\"S\":\"Book103Title\"},\"ISBN\":{\"S\":\"333-3333333333\"},\"Authors\":{\"SS\":[\"Author1\",\"Author2\"]},\"Price\":{\"N\":\"2000\"},\"Dimensions\":{\"S\":\"8.5x11.0x1.5\"},\"PageCount\":{\"N\":\"600\"},\"InPublication\":{\"B\":\"false\"},\"ProductCategory\":{\"S\":\"Book\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30a8\u30f3\u30c8\u30ea201\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"201\"},\"Title\":{\"S\":\"18-Bike-201\"},\"Description\":{\"S\":\"201Description\"},\"BicycleType\":{\"S\":\"Road\"},\"Brand\":{\"S\":\"MountainA\"},\"Price\":{\"N\":\"100\"},\"Gender\":{\"S\":\"M\"},\"Color\":{\"SS\":[\"Red\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n     JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30a8\u30f3\u30c8\u30ea202\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"202\"},\"Title\":{\"S\":\"21-Bike-202\"},\"Description\":{\"S\":\"202Description\"},\"BicycleType\":{\"S\":\"Road\"},\"Brand\":{\"S\":\"Brand-CompanyA\"},\"Price\":{\"N\":\"200\"},\"Gender\":{\"S\":\"M\"},\"Color\":{\"SS\":[\"Green\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30a8\u30f3\u30c8\u30ea203\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"203\"},\"Title\":{\"S\":\"19-Bike-203\"},\"Description\":{\"S\":\"203Description\"},\"BicycleType\":{\"S\":\"Road\"},\"Brand\":{\"S\":\"Brand-CompanyB\"},\"Price\":{\"N\":\"300\"},\"Gender\":{\"S\":\"W\"},\"Color\":{\"SS\":[\"Red\",\"Green\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30a8\u30f3\u30c8\u30ea204\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"204\"},\"Title\":{\"S\":\"18-Bike-204\"},\"Description\":{\"S\":\"204Description\"},\"BicycleType\":{\"S\":\"Mountain\"},\"Brand\":{\"S\":\"Brand-CompanyB\"},\"Price\":{\"N\":\"400\"},\"Gender\":{\"S\":\"W\"},\"Color\":{\"SS\":[\"Red\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30a8\u30f3\u30c8\u30ea205\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"205\"},\"Title\":{\"S\":\"20-Bike-205\"},\"Description\":{\"S\":\"205Description\"},\"BicycleType\":{\"S\":\"Hybrid\"},\"Brand\":{\"S\":\"Brand-CompanyC\"},\"Price\":{\"N\":\"500\"},\"Gender\":{\"S\":\"B\"},\"Color\":{\"SS\":[\"Red\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n2. \u30b9\u30ad\u30e3\u30f3\n\n2.1. \u5168\u4ef6\u8868\u793a\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME}\n\n\n\n\u7d50\u679c\n{\n    \"Count\": 8, \n    \"Items\": [\n        {\n            \"BicycleType\": {\n                \"S\": \"Hybrid\"\n            }, \n            \"Description\": {\n                \"S\": \"205Description\"\n            }, \n            \"Title\": {\n                \"S\": \"20-Bike-205\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"B\"\n            }, \n            \"Price\": {\n                \"N\": \"500\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"205\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyC\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"203Description\"\n            }, \n            \"Title\": {\n                \"S\": \"19-Bike-203\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Green\", \n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"W\"\n            }, \n            \"Price\": {\n                \"N\": \"300\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"203\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyB\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"202Description\"\n            }, \n            \"Title\": {\n                \"S\": \"21-Bike-202\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Green\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"M\"\n            }, \n            \"Price\": {\n                \"N\": \"200\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"202\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyA\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"201Description\"\n            }, \n            \"Title\": {\n                \"S\": \"18-Bike-201\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"M\"\n            }, \n            \"Price\": {\n                \"N\": \"100\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"201\"\n            }, \n            \"Brand\": {\n                \"S\": \"MountainA\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Mountain\"\n            }, \n            \"Description\": {\n                \"S\": \"204Description\"\n            }, \n            \"Title\": {\n                \"S\": \"18-Bike-204\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"W\"\n            }, \n            \"Price\": {\n                \"N\": \"400\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"204\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyB\"\n            }\n        }, \n        {\n            \"ISBN\": {\n                \"S\": \"222-2222222222\"\n            }, \n            \"Dimensions\": {\n                \"S\": \"8.5x11.0x0.8\"\n            }, \n            \"PageCount\": {\n                \"N\": \"600\"\n            }, \n            \"Price\": {\n                \"N\": \"20\"\n            }, \n            \"Title\": {\n                \"S\": \"Book102Title\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Book\"\n            }, \n            \"InPublication\": {\n                \"B\": \"dHJ1ZQ==\"\n            }, \n            \"Authors\": {\n                \"SS\": [\n                    \"Author1\", \n                    \"Author2\"\n                ]\n            }, \n            \"Id\": {\n                \"N\": \"102\"\n            }\n        }, \n        {\n            \"ISBN\": {\n                \"S\": \"333-3333333333\"\n            }, \n            \"Dimensions\": {\n                \"S\": \"8.5x11.0x1.5\"\n            }, \n            \"PageCount\": {\n                \"N\": \"600\"\n            }, \n            \"Price\": {\n                \"N\": \"2000\"\n            }, \n            \"Title\": {\n                \"S\": \"Book103Title\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Book\"\n            }, \n            \"InPublication\": {\n                \"B\": \"ZmFsc2U=\"\n            }, \n            \"Authors\": {\n                \"SS\": [\n                    \"Author1\", \n                    \"Author2\"\n                ]\n            }, \n            \"Id\": {\n                \"N\": \"103\"\n            }\n        }, \n        {\n            \"ISBN\": {\n                \"S\": \"111-1111111111\"\n            }, \n            \"Dimensions\": {\n                \"S\": \"8.5x11.0x0.5\"\n            }, \n            \"PageCount\": {\n                \"N\": \"500\"\n            }, \n            \"Price\": {\n                \"N\": \"2\"\n            }, \n            \"Title\": {\n                \"S\": \"Book101Title\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Book\"\n            }, \n            \"InPublication\": {\n                \"B\": \"dHJ1ZQ==\"\n            }, \n            \"Authors\": {\n                \"SS\": [\n                    \"Author1\"\n                ]\n            }, \n            \"Id\": {\n                \"N\": \"101\"\n            }\n        }\n    ], \n    \"ScannedCount\": 8, \n    \"ConsumedCapacity\": null\n}\n\n\n\n2.2. \u30a2\u30a4\u30c6\u30e0\u6570\u78ba\u8a8d\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME} --query 'Count'\n\n\n\n\u7d50\u679c\n8\n\n\n\n3. \u30a2\u30a4\u30c6\u30e0\u306e\u64cd\u4f5c\n\n3.1. \u30a2\u30a4\u30c6\u30e0\u306e\u53d6\u5f97 (get-item)\n\n\u30b3\u30de\u30f3\u30c9\nk=Id\nt=N\nv=103\nDYNAMO_KEY_STRING=\"{\\\"${k}\\\":{\\\"${t}\\\":\\\"${v}\\\"}}\"; echo ${DYNAMO_KEY_STRING}\n\n\n\n\u7d50\u679c\n      {\"Id\":{\"N\":\"103\"}}\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n\n\n\n\u7d50\u679c\n{\n    \"Item\": {\n        \"ISBN\": {\n            \"S\": \"333-3333333333\"\n        }, \n        \"Dimensions\": {\n            \"S\": \"8.5x11.0x1.5\"\n        }, \n        \"PageCount\": {\n            \"N\": \"600\"\n        }, \n        \"Price\": {\n            \"N\": \"2000\"\n        }, \n        \"Title\": {\n            \"S\": \"Book103Title\"\n        }, \n        \"ProductCategory\": {\n            \"S\": \"Book\"\n        }, \n        \"InPublication\": {\n            \"B\": \"ZmFsc2U=\"\n        }, \n        \"Authors\": {\n            \"SS\": [\n                \"Author1\", \n                \"Author2\"\n            ]\n        }, \n        \"Id\": {\n            \"N\": \"103\"\n        }\n    }\n}\n\n\n\n3.2. \u30a2\u30a4\u30c6\u30e0\u306e\u66f4\u65b0 (update-item: \u5c5e\u6027\u5024\u306e\u5909\u66f4)\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_UPDATE_STRING='{\"Title\":{\"Action\":\"PUT\",\"Value\":{\"S\":\"Book103Title2\"}}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_UPDATE_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb update-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\" \\\n        --attribute-updates \"${DYNAMO_UPDATE_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n\n\n\n\u7d50\u679c\n      {\n        \"Item\": {\n          \"ISBN\": {\n              \"S\": \"333-3333333333\"\n          },\n          \"Dimensions\": {\n              \"S\": \"8.5x11.0x1.5\"\n          },\n          \"PageCount\": {\n              \"N\": \"600\"\n          },\n          \"Price\": {\n              \"N\": \"2000\"\n          },\n          \"Title\": {\n              \"S\": \"Book103Title2\"\n          },\n          \"ProductCategory\": {\n              \"S\": \"Book\"\n          },\n          \"InPublication\": {\n              \"B\": \"ZmFsc2U=\"\n          },\n          \"Authors\": {\n              \"SS\": [\n                  \"Author1\",\n                  \"Author2\"\n              ]\n          },\n          \"Id\": {\n              \"N\": \"103\"\n          }\n        }\n      }\n\n\n\n3.3. \u30a2\u30a4\u30c6\u30e0\u306e\u66f4\u65b0 (update-item: \u5c5e\u6027\u306e\u524a\u9664)\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_UPDATE_STRING='{\"PageCount\":{\"Action\":\"DELETE\"}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_UPDATE_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb update-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\" \\\n        --attribute-updates \"${DYNAMO_UPDATE_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n\n\n\n\u7d50\u679c\n      {\n        \"Item\": {\n          \"ISBN\": {\n              \"S\": \"333-3333333333\"\n          },\n          \"Dimensions\": {\n              \"S\": \"8.5x11.0x1.5\"\n          },\n          \"Title\": {\n              \"S\": \"Book103Title2\"\n          },\n          \"Price\": {\n              \"N\": \"2000\"\n          },\n          \"ProductCategory\": {\n              \"S\": \"Book\"\n          },\n          \"InPublication\": {\n              \"B\": \"ZmFsc2U=\"\n          },\n          \"Authors\": {\n              \"SS\": [\n                  \"Author1\",\n                  \"Author2\"\n              ]\n          },\n          \"Id\": {\n              \"N\": \"103\"\n          }\n        }\n      }\n\n\n\n3.4. \u30a2\u30a4\u30c6\u30e0\u306e\u66f4\u65b0 (update-item: \u5c5e\u6027\u306e\u8ffd\u52a0)\n\n\u30b3\u30de\u30f3\u30c9\nDYNAMO_UPDATE_STRING='{\"PageCount\":{\"Action\":\"PUT\",\"Value\":{\"N\":\"601\"}}}'\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_UPDATE_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb update-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\" \\\n        --attribute-updates \"${DYNAMO_UPDATE_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n\n\n\n\u7d50\u679c\n      {\n        \"Item\": {\n          \"ISBN\": {\n              \"S\": \"333-3333333333\"\n          },\n          \"Dimensions\": {\n              \"S\": \"8.5x11.0x1.5\"\n          },\n          \"PageCount\": {\n              \"N\": \"601\"\n          },\n          \"Price\": {\n              \"N\": \"2000\"\n          },\n          \"Title\": {\n              \"S\": \"Book103Title2\"\n          },\n          \"ProductCategory\": {\n              \"S\": \"Book\"\n          },\n          \"InPublication\": {\n              \"B\": \"ZmFsc2U=\"\n          },\n          \"Authors\": {\n              \"SS\": [\n                  \"Author1\",\n                  \"Author2\"\n              ]\n          },\n          \"Id\": {\n              \"N\": \"103\"\n          }\n        }\n      }\n\n\n\n3.5. \u30a2\u30a4\u30c6\u30e0\u306e\u524a\u9664 (delete-item)\n\n\u30b3\u30de\u30f3\u30c9\nk=Id\nt=N\nv=103\nDYNAMO_KEY_STRING=\"{\\\"${k}\\\":{\\\"${t}\\\":\\\"${v}\\\"}}\"; echo ${DYNAMO_KEY_STRING}\n\n\n\n\u30b3\u30de\u30f3\u30c9\necho ${DYNAMO_ITEM_STRING} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb delete-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n\n\n\n\u7d50\u679c\n      (\u623b\u308a\u5024\u306a\u3057)\n\n\n\u30a2\u30a4\u30c6\u30e0\u6570\u78ba\u8a8d\u3092\u78ba\u8a8d\u3059\u308b\u3068\u30011\u4ef6\u6e1b\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME} --query 'Count'\n\n\n\n\u7d50\u679c\n7\n\n\n\n4. \u30af\u30a8\u30ea\u306e\u8a66\u884c\n\n4.1. \u30af\u30a8\u30ea\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\n\n\u30b3\u30de\u30f3\u30c9\nFILE_DYNAMO_QUERY='product-catalog-query.json'\n\n\n\n\u30b3\u30de\u30f3\u30c9\nk=Id\nt=N\nv=202\n\n\n\n\u30b3\u30de\u30f3\u30c9\ncat << EOS > ${FILE_DYNAMO_QUERY}\n{\n        \"${k}\": {\n          \"AttributeValueList\": [\n              {\n                  \"${t}\": \"${v}\"\n              }\n          ],\n          \"ComparisonOperator\": \"EQ\"\n        }\n}\nEOS\n\n\n\n\u30b3\u30de\u30f3\u30c9\ncat ${FILE_DYNAMO_QUERY} | json_verify\n\n\n\n\u7d50\u679c\n      JSON is valid\n\n\n\n4.2. \u30af\u30a8\u30ea\u306e\u5b9f\u884c\n\n\u30b3\u30de\u30f3\u30c9\naws dynamodb query \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key-conditions file://${FILE_DYNAMO_QUERY}\n\n\n\n\u7d50\u679c\n{\n    \"Count\": 1, \n    \"Items\": [\n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"202Description\"\n            }, \n            \"Title\": {\n                \"S\": \"21-Bike-202\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Green\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"M\"\n            }, \n            \"Price\": {\n                \"N\": \"200\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"202\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyA\"\n            }\n        }\n    ], \n    \"ScannedCount\": 1, \n    \"ConsumedCapacity\": null\n}\n\n\n\n\u5b8c\u4e86\n\u6b21\u306b\u3001update-table\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u5c5e\u6027\u3092\u5909\u66f4\u3057\u3066\u307f\u307e\u3059\u3002\nhttp://qiita.com/tcsh/items/721453b3abbdefed78cb\n\u4f59\u88d5\u304c\u3042\u308c\u3070\u3001CloudWatch\u306b\u3088\u308b\u30d7\u30ed\u30d3\u30b8\u30e7\u30f3\u30c9\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u306e\u30a2\u30e9\u30fc\u30e0\u8a2d\u5b9a\u3092\u3057\u3066\u307f\u3066\u3082\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n\nhttp://jawsug-cli.doorkeeper.jp/events/18571 \u3067\u306e\u30cf\u30f3\u30ba\u30aa\u30f3\u8cc7\u6599\u3067\u3059\u3002\n\nAWS CLI\u3092\u5229\u7528\u3057\u3066\u3001DynamoDB\u306eitem\u3092\u4f5c\u6210\u3001\u66f4\u65b0\u3001\u524a\u9664\u3057\u3066\u307f\u307e\u3059\u3002\n\u3042\u308f\u305b\u3066\u3001\u7c21\u5358\u306a\u30b9\u30ad\u30e3\u30f3\u3084\u30af\u30a8\u30ea\u30fc\u306e\u4f7f\u3044\u65b9\u3092\u78ba\u8a8d\u3057\u3066\u307f\u307e\u3059\u3002\n\n* put-item\n* get-item\n* delete-item\n* scan\n* query\n\n\n\u524d\u63d0\u6761\u4ef6\n========\n\n## DynamoDB\u3078\u306e\u6a29\u9650\n\n* DynamoDB\u306b\u5bfe\u3057\u3066\u30d5\u30eb\u6a29\u9650\u304c\u3042\u308b\u3053\u3068\u3002\n\n## AWS CLI\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\n\n\u4ee5\u4e0b\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3067\u52d5\u4f5c\u78ba\u8a8d\u6e08\n\n* AWS CLI 1.7.7\n\n\n0. \u4e8b\u524d\u4f5c\u696d\n===========\n\n0.1. \u5909\u6570\u306e\u78ba\u8a8d\n------------------------\n\n```bash:\u5909\u6570\u306e\u78ba\u8a8d:\ncat << ETX\n\nAWS_DEFAULT_REGION: ${AWS_DEFAULT_REGION}\nDYNAMO_TABLE_NAME:  ${DYNAMO_TABLE_NAME}\n\nETX\n```\n\n0.2. DynamoDB\u30c6\u30fc\u30d6\u30eb\u540d\u306e\u6307\u5b9a\n------------------------\n\nDYNAMO_TABLE_NAME\u304c\u7a7a\u304b\u3001\u60f3\u5b9a\u3068\u7570\u306a\u308b\u5834\u5408\u306f\u6307\u5b9a\u3057\u306a\u304a\u3057\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9(\u4f8b):\nDYNAMO_TABLE_NAME='ProductCatalog'\n```\n\n\n1. \u30a2\u30a4\u30c6\u30e0\u306e\u4f5c\u6210 (put-item)\n============================\n\nhttp://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/GettingStartedCreateTables.html \u306e\u300c\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9 1: \u88fd\u54c1\u30ab\u30bf\u30ed\u30b0\u300d\u306e\u30c7\u30fc\u30bf\u3092\u6295\u5165\u3057\u307e\u3059\u3002\n\n\u30a8\u30f3\u30c8\u30ea101\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"101\"},\"Title\":{\"S\":\"Book101Title\"},\"ISBN\":{\"S\":\"111-1111111111\"},\"Authors\":{\"SS\":[\"Author1\"]},\"Price\":{\"N\":\"2\"},\"Dimensions\":{\"S\":\"8.5x11.0x0.5\"},\"PageCount\":{\"N\":\"500\"},\"InPublication\":{\"B\":\"true\"},\"ProductCategory\":{\"S\":\"Book\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a8\u30f3\u30c8\u30ea102\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"102\"},\"Title\":{\"S\":\"Book102Title\"},\"ISBN\":{\"S\":\"222-2222222222\"},\"Authors\":{\"SS\":[\"Author1\",\"Author2\"]},\"Price\":{\"N\":\"20\"},\"Dimensions\":{\"S\":\"8.5x11.0x0.8\"},\"PageCount\":{\"N\":\"600\"},\"InPublication\":{\"B\":\"true\"},\"ProductCategory\":{\"S\":\"Book\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\n      echo ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a8\u30f3\u30c8\u30ea103\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"103\"},\"Title\":{\"S\":\"Book103Title\"},\"ISBN\":{\"S\":\"333-3333333333\"},\"Authors\":{\"SS\":[\"Author1\",\"Author2\"]},\"Price\":{\"N\":\"2000\"},\"Dimensions\":{\"S\":\"8.5x11.0x1.5\"},\"PageCount\":{\"N\":\"600\"},\"InPublication\":{\"B\":\"false\"},\"ProductCategory\":{\"S\":\"Book\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a8\u30f3\u30c8\u30ea201\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"201\"},\"Title\":{\"S\":\"18-Bike-201\"},\"Description\":{\"S\":\"201Description\"},\"BicycleType\":{\"S\":\"Road\"},\"Brand\":{\"S\":\"MountainA\"},\"Price\":{\"N\":\"100\"},\"Gender\":{\"S\":\"M\"},\"Color\":{\"SS\":[\"Red\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n     JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a8\u30f3\u30c8\u30ea202\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"202\"},\"Title\":{\"S\":\"21-Bike-202\"},\"Description\":{\"S\":\"202Description\"},\"BicycleType\":{\"S\":\"Road\"},\"Brand\":{\"S\":\"Brand-CompanyA\"},\"Price\":{\"N\":\"200\"},\"Gender\":{\"S\":\"M\"},\"Color\":{\"SS\":[\"Green\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a8\u30f3\u30c8\u30ea203\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"203\"},\"Title\":{\"S\":\"19-Bike-203\"},\"Description\":{\"S\":\"203Description\"},\"BicycleType\":{\"S\":\"Road\"},\"Brand\":{\"S\":\"Brand-CompanyB\"},\"Price\":{\"N\":\"300\"},\"Gender\":{\"S\":\"W\"},\"Color\":{\"SS\":[\"Red\",\"Green\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a8\u30f3\u30c8\u30ea204\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"204\"},\"Title\":{\"S\":\"18-Bike-204\"},\"Description\":{\"S\":\"204Description\"},\"BicycleType\":{\"S\":\"Mountain\"},\"Brand\":{\"S\":\"Brand-CompanyB\"},\"Price\":{\"N\":\"400\"},\"Gender\":{\"S\":\"W\"},\"Color\":{\"SS\":[\"Red\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a8\u30f3\u30c8\u30ea205\n-----------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_ITEM_STRING='{\"Id\":{\"N\":\"205\"},\"Title\":{\"S\":\"20-Bike-205\"},\"Description\":{\"S\":\"205Description\"},\"BicycleType\":{\"S\":\"Hybrid\"},\"Brand\":{\"S\":\"Brand-CompanyC\"},\"Price\":{\"N\":\"500\"},\"Gender\":{\"S\":\"B\"},\"Color\":{\"SS\":[\"Red\",\"Black\"]},\"ProductCategory\":{\"S\":\"Bicycle\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb put-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --item \"${DYNAMO_ITEM_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n2. \u30b9\u30ad\u30e3\u30f3\n===========\n\n\n2.1. \u5168\u4ef6\u8868\u793a\n-------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME}\n```\n\n```json:\u7d50\u679c\n{\n    \"Count\": 8, \n    \"Items\": [\n        {\n            \"BicycleType\": {\n                \"S\": \"Hybrid\"\n            }, \n            \"Description\": {\n                \"S\": \"205Description\"\n            }, \n            \"Title\": {\n                \"S\": \"20-Bike-205\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"B\"\n            }, \n            \"Price\": {\n                \"N\": \"500\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"205\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyC\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"203Description\"\n            }, \n            \"Title\": {\n                \"S\": \"19-Bike-203\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Green\", \n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"W\"\n            }, \n            \"Price\": {\n                \"N\": \"300\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"203\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyB\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"202Description\"\n            }, \n            \"Title\": {\n                \"S\": \"21-Bike-202\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Green\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"M\"\n            }, \n            \"Price\": {\n                \"N\": \"200\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"202\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyA\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"201Description\"\n            }, \n            \"Title\": {\n                \"S\": \"18-Bike-201\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"M\"\n            }, \n            \"Price\": {\n                \"N\": \"100\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"201\"\n            }, \n            \"Brand\": {\n                \"S\": \"MountainA\"\n            }\n        }, \n        {\n            \"BicycleType\": {\n                \"S\": \"Mountain\"\n            }, \n            \"Description\": {\n                \"S\": \"204Description\"\n            }, \n            \"Title\": {\n                \"S\": \"18-Bike-204\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Red\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"W\"\n            }, \n            \"Price\": {\n                \"N\": \"400\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"204\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyB\"\n            }\n        }, \n        {\n            \"ISBN\": {\n                \"S\": \"222-2222222222\"\n            }, \n            \"Dimensions\": {\n                \"S\": \"8.5x11.0x0.8\"\n            }, \n            \"PageCount\": {\n                \"N\": \"600\"\n            }, \n            \"Price\": {\n                \"N\": \"20\"\n            }, \n            \"Title\": {\n                \"S\": \"Book102Title\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Book\"\n            }, \n            \"InPublication\": {\n                \"B\": \"dHJ1ZQ==\"\n            }, \n            \"Authors\": {\n                \"SS\": [\n                    \"Author1\", \n                    \"Author2\"\n                ]\n            }, \n            \"Id\": {\n                \"N\": \"102\"\n            }\n        }, \n        {\n            \"ISBN\": {\n                \"S\": \"333-3333333333\"\n            }, \n            \"Dimensions\": {\n                \"S\": \"8.5x11.0x1.5\"\n            }, \n            \"PageCount\": {\n                \"N\": \"600\"\n            }, \n            \"Price\": {\n                \"N\": \"2000\"\n            }, \n            \"Title\": {\n                \"S\": \"Book103Title\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Book\"\n            }, \n            \"InPublication\": {\n                \"B\": \"ZmFsc2U=\"\n            }, \n            \"Authors\": {\n                \"SS\": [\n                    \"Author1\", \n                    \"Author2\"\n                ]\n            }, \n            \"Id\": {\n                \"N\": \"103\"\n            }\n        }, \n        {\n            \"ISBN\": {\n                \"S\": \"111-1111111111\"\n            }, \n            \"Dimensions\": {\n                \"S\": \"8.5x11.0x0.5\"\n            }, \n            \"PageCount\": {\n                \"N\": \"500\"\n            }, \n            \"Price\": {\n                \"N\": \"2\"\n            }, \n            \"Title\": {\n                \"S\": \"Book101Title\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Book\"\n            }, \n            \"InPublication\": {\n                \"B\": \"dHJ1ZQ==\"\n            }, \n            \"Authors\": {\n                \"SS\": [\n                    \"Author1\"\n                ]\n            }, \n            \"Id\": {\n                \"N\": \"101\"\n            }\n        }\n    ], \n    \"ScannedCount\": 8, \n    \"ConsumedCapacity\": null\n}\n```\n\n2.2. \u30a2\u30a4\u30c6\u30e0\u6570\u78ba\u8a8d\n-------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME} --query 'Count'\n```\n\n```text:\u7d50\u679c:\n8\n```\n\n\n3. \u30a2\u30a4\u30c6\u30e0\u306e\u64cd\u4f5c\n=================\n\n\n3.1. \u30a2\u30a4\u30c6\u30e0\u306e\u53d6\u5f97 (get-item)\n------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nk=Id\nt=N\nv=103\nDYNAMO_KEY_STRING=\"{\\\"${k}\\\":{\\\"${t}\\\":\\\"${v}\\\"}}\"; echo ${DYNAMO_KEY_STRING}\n```\n\n```json:\u7d50\u679c:\n      {\"Id\":{\"N\":\"103\"}}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n```\n\n\n```json:\u7d50\u679c:\n{\n    \"Item\": {\n        \"ISBN\": {\n            \"S\": \"333-3333333333\"\n        }, \n        \"Dimensions\": {\n            \"S\": \"8.5x11.0x1.5\"\n        }, \n        \"PageCount\": {\n            \"N\": \"600\"\n        }, \n        \"Price\": {\n            \"N\": \"2000\"\n        }, \n        \"Title\": {\n            \"S\": \"Book103Title\"\n        }, \n        \"ProductCategory\": {\n            \"S\": \"Book\"\n        }, \n        \"InPublication\": {\n            \"B\": \"ZmFsc2U=\"\n        }, \n        \"Authors\": {\n            \"SS\": [\n                \"Author1\", \n                \"Author2\"\n            ]\n        }, \n        \"Id\": {\n            \"N\": \"103\"\n        }\n    }\n}\n```\n\n3.2. \u30a2\u30a4\u30c6\u30e0\u306e\u66f4\u65b0 (update-item: \u5c5e\u6027\u5024\u306e\u5909\u66f4)\n-----------------------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_UPDATE_STRING='{\"Title\":{\"Action\":\"PUT\",\"Value\":{\"S\":\"Book103Title2\"}}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_UPDATE_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb update-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\" \\\n        --attribute-updates \"${DYNAMO_UPDATE_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n```\n\n\n```json:\u7d50\u679c:\n      {\n        \"Item\": {\n          \"ISBN\": {\n              \"S\": \"333-3333333333\"\n          },\n          \"Dimensions\": {\n              \"S\": \"8.5x11.0x1.5\"\n          },\n          \"PageCount\": {\n              \"N\": \"600\"\n          },\n          \"Price\": {\n              \"N\": \"2000\"\n          },\n          \"Title\": {\n              \"S\": \"Book103Title2\"\n          },\n          \"ProductCategory\": {\n              \"S\": \"Book\"\n          },\n          \"InPublication\": {\n              \"B\": \"ZmFsc2U=\"\n          },\n          \"Authors\": {\n              \"SS\": [\n                  \"Author1\",\n                  \"Author2\"\n              ]\n          },\n          \"Id\": {\n              \"N\": \"103\"\n          }\n        }\n      }\n```\n\n\n3.3. \u30a2\u30a4\u30c6\u30e0\u306e\u66f4\u65b0 (update-item: \u5c5e\u6027\u306e\u524a\u9664)\n---------------------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_UPDATE_STRING='{\"PageCount\":{\"Action\":\"DELETE\"}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_UPDATE_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb update-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\" \\\n        --attribute-updates \"${DYNAMO_UPDATE_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n```\n\n\n```json:\u7d50\u679c:\n      {\n        \"Item\": {\n          \"ISBN\": {\n              \"S\": \"333-3333333333\"\n          },\n          \"Dimensions\": {\n              \"S\": \"8.5x11.0x1.5\"\n          },\n          \"Title\": {\n              \"S\": \"Book103Title2\"\n          },\n          \"Price\": {\n              \"N\": \"2000\"\n          },\n          \"ProductCategory\": {\n              \"S\": \"Book\"\n          },\n          \"InPublication\": {\n              \"B\": \"ZmFsc2U=\"\n          },\n          \"Authors\": {\n              \"SS\": [\n                  \"Author1\",\n                  \"Author2\"\n              ]\n          },\n          \"Id\": {\n              \"N\": \"103\"\n          }\n        }\n      }\n```\n\n\n3.4. \u30a2\u30a4\u30c6\u30e0\u306e\u66f4\u65b0 (update-item: \u5c5e\u6027\u306e\u8ffd\u52a0)\n---------------------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nDYNAMO_UPDATE_STRING='{\"PageCount\":{\"Action\":\"PUT\",\"Value\":{\"N\":\"601\"}}}'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_UPDATE_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb update-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\" \\\n        --attribute-updates \"${DYNAMO_UPDATE_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n```\n\n\n```json:\u7d50\u679c:\n      {\n        \"Item\": {\n          \"ISBN\": {\n              \"S\": \"333-3333333333\"\n          },\n          \"Dimensions\": {\n              \"S\": \"8.5x11.0x1.5\"\n          },\n          \"PageCount\": {\n              \"N\": \"601\"\n          },\n          \"Price\": {\n              \"N\": \"2000\"\n          },\n          \"Title\": {\n              \"S\": \"Book103Title2\"\n          },\n          \"ProductCategory\": {\n              \"S\": \"Book\"\n          },\n          \"InPublication\": {\n              \"B\": \"ZmFsc2U=\"\n          },\n          \"Authors\": {\n              \"SS\": [\n                  \"Author1\",\n                  \"Author2\"\n              ]\n          },\n          \"Id\": {\n              \"N\": \"103\"\n          }\n        }\n      }\n```\n\n\n3.5. \u30a2\u30a4\u30c6\u30e0\u306e\u524a\u9664 (delete-item)\n---------------------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nk=Id\nt=N\nv=103\nDYNAMO_KEY_STRING=\"{\\\"${k}\\\":{\\\"${t}\\\":\\\"${v}\\\"}}\"; echo ${DYNAMO_KEY_STRING}\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\necho ${DYNAMO_ITEM_STRING} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb delete-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n```\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb get-item \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key \"${DYNAMO_KEY_STRING}\"\n```\n\n\n```text:\u7d50\u679c:\n      (\u623b\u308a\u5024\u306a\u3057)\n```\n\n\n\u30a2\u30a4\u30c6\u30e0\u6570\u78ba\u8a8d\u3092\u78ba\u8a8d\u3059\u308b\u3068\u30011\u4ef6\u6e1b\u3063\u3066\u3044\u308b\u3053\u3068\u304c\u308f\u304b\u308a\u307e\u3059\u3002\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb scan --table-name ${DYNAMO_TABLE_NAME} --query 'Count'\n```\n\n```text:\u7d50\u679c:\n7\n```\n\n4. \u30af\u30a8\u30ea\u306e\u8a66\u884c\n===============\n\n\n\n4.1. \u30af\u30a8\u30ea\u30c7\u30fc\u30bf\u306e\u4f5c\u6210\n-----------------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nFILE_DYNAMO_QUERY='product-catalog-query.json'\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\nk=Id\nt=N\nv=202\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\ncat << EOS > ${FILE_DYNAMO_QUERY}\n{\n        \"${k}\": {\n          \"AttributeValueList\": [\n              {\n                  \"${t}\": \"${v}\"\n              }\n          ],\n          \"ComparisonOperator\": \"EQ\"\n        }\n}\nEOS\n```\n\n```bash:\u30b3\u30de\u30f3\u30c9:\ncat ${FILE_DYNAMO_QUERY} | json_verify\n```\n\n```text:\u7d50\u679c:\n      JSON is valid\n```\n\n\n4.2. \u30af\u30a8\u30ea\u306e\u5b9f\u884c\n-----------------\n\n```bash:\u30b3\u30de\u30f3\u30c9:\naws dynamodb query \\\n        --table-name ${DYNAMO_TABLE_NAME} \\\n        --key-conditions file://${FILE_DYNAMO_QUERY}\n```\n\n```json:\u7d50\u679c:\n{\n    \"Count\": 1, \n    \"Items\": [\n        {\n            \"BicycleType\": {\n                \"S\": \"Road\"\n            }, \n            \"Description\": {\n                \"S\": \"202Description\"\n            }, \n            \"Title\": {\n                \"S\": \"21-Bike-202\"\n            }, \n            \"Color\": {\n                \"SS\": [\n                    \"Black\", \n                    \"Green\"\n                ]\n            }, \n            \"Gender\": {\n                \"S\": \"M\"\n            }, \n            \"Price\": {\n                \"N\": \"200\"\n            }, \n            \"ProductCategory\": {\n                \"S\": \"Bicycle\"\n            }, \n            \"Id\": {\n                \"N\": \"202\"\n            }, \n            \"Brand\": {\n                \"S\": \"Brand-CompanyA\"\n            }\n        }\n    ], \n    \"ScannedCount\": 1, \n    \"ConsumedCapacity\": null\n}\n```\n\n\u5b8c\u4e86\n======\n\n\u6b21\u306b\u3001update-table\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\u3057\u3066\u3001\u30c6\u30fc\u30d6\u30eb\u306e\u5c5e\u6027\u3092\u5909\u66f4\u3057\u3066\u307f\u307e\u3059\u3002\nhttp://qiita.com/tcsh/items/721453b3abbdefed78cb\n\n\u4f59\u88d5\u304c\u3042\u308c\u3070\u3001CloudWatch\u306b\u3088\u308b\u30d7\u30ed\u30d3\u30b8\u30e7\u30f3\u30c9\u30b9\u30eb\u30fc\u30d7\u30c3\u30c8\u306e\u30a2\u30e9\u30fc\u30e0\u8a2d\u5b9a\u3092\u3057\u3066\u307f\u3066\u3082\u826f\u3044\u3067\u3057\u3087\u3046\u3002\n", "tags": ["AWS", "aws-cli", "DynamoDB"]}