{"context": " More than 1 year has passed since last update.Amazon CloudWatch\u306e\u7d71\u8a08\u30c7\u30fc\u30bf\u3001SampleCount\u304c\u3082\u3084\u3063\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u78ba\u8a8d\u3057\u3066\u307f\u308b\n\n\u57fa\u672c\u30e1\u30c8\u30ea\u30af\u30b9\u3067\u53ce\u96c6\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30b5\u30f3\u30d7\u30eb\u6570\u306f\uff1f\nEC2\u306eCPU\u8ca0\u8377\u72b6\u6cc1(CPUUtilization)\u306e\u30c7\u30fc\u30bf\u30b5\u30f3\u30d7\u30eb\u6570(SampleCount)\u3092\u78ba\u8a8d\n$ aws cloudwatch get-metric-statistics --metric-name \"CPUUtilization\"  --namespace \"AWS/EC2\" --statistics \"SampleCount\" --period 300 --start-time `date -u -d \"1 days ago\" \"+%Y-%m-%dT%H:%M:%SZ\"` --end-time `date -u \"+%Y-%m-%dT%H:%M:%SZ\"` --output table --dimensions Name=InstanceId,Value=i-XXXXXXXX\n\n\u7d50\u679c\uff1a1\u5206\u3054\u3068\u306b\u30c7\u30fc\u30bf\u304cCloudWatch\u306bput\u3055\u308c\u3066\u3044\u305f\n+---------------+------------------------------------+\n||                  Datapoints                      ||\n|+--------------+------------------------+----------+|\n||  SampleCount |       Timestamp        |  Unit    ||\n|+--------------+------------------------+----------+|\n||  5.0         |  2014-12-27T21:59:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:04:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:09:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:14:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:19:00Z  |  Percent ||\n\n\u305d\u306e\u4ed6\uff1a\u8a73\u7d30\u30e1\u30c8\u30ea\u30af\u30b9(1\u5206\u9593\u9694\u3067\u7d71\u8a08\u60c5\u5831\u304c\u53d6\u5f97\u53ef\u80fd)\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u3066\u3082\u3044\u306a\u304f\u3066\u3082\u3001SampleCount\u306f\u5909\u308f\u3089\u306a\u3044\n\n\n\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30af\u30b9\u3067\u53ce\u96c6\u3067\u304d\u308b\u30c7\u30fc\u30bf\u30b5\u30f3\u30d7\u30eb\u6570\u306f\uff1f\n\u307e\u305a\u306f\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf(\u4eca\u56de\u306f\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u3092\u60f3\u5b9a)\u3092put\n\u4f55\u5ea6\u304b\u4ee5\u4e0b\u3092\u5b9f\u884c\n$ aws cloudwatch put-metric-data --metric-name \"Memory Usage\" --namespace \"Custom\" --timestamp `date -u +%Y-%m-%dT%H:%M:%SZ` --value `free  | grep '^-' | tr -s ' ' | cut -d ' ' -f 4`\n\n\u305d\u3057\u3066\u30c7\u30fc\u30bf\u3092get\n$ aws cloudwatch get-metric-statistics --metric-name \"Memory Usage\" --namespace \"Custom\" --statistics \"SampleCount\" --period 60 --start-time `date -u -d \"1 days ago\" \"+%Y-%m-%dT%H:%M:%SZ\"` --end-time `date -u \"+%Y-%m-%dT%H:%M:%SZ\"` --output table\n\n\u7d50\u679c\uff1a\u77ed\u3044\u9593\u9694\uff081\u5206\u4ee5\u5185\uff09\u306e\u3082\u306e\u3082\u542b\u3081\u3001\u30c7\u30fc\u30bf\u306f\u3059\u3079\u3066CloudWatch\u306bput\u3055\u308c\u3066\u3044\u305f\n+----------------+--------------------------------+\n||                  Datapoints                   ||\n|+--------------+------------------------+-------+|\n||  SampleCount |       Timestamp        | Unit  ||\n|+--------------+------------------------+-------+|\n||  2.0         |  2014-12-28T14:28:00Z  |  None ||\n||  1.0         |  2014-12-28T14:24:00Z  |  None ||\n||  4.0         |  2014-12-28T14:22:00Z  |  None ||\n\n\u305d\u306e\u4ed6\uff1aAverage\u306f\u3001\u3061\u3083\u3093\u3068put\u3057\u305f\u5206\u304c\u8db3\u3055\u308c\u3001\u5272\u308a\u7b97\u3055\u308c\u3066\u3044\u308b\n$ aws cloudwatch get-metric-statistics --metric-name \"Memory Usage\" --namespace \"Custom\" --statistics \"Average\" --period 60 --start-time `date -u -d \"1 days ago\" \"+%Y-%m-%dT%H:%M:%SZ\"` --end-time `date -u \"+%Y-%m-%dT%H:%M:%SZ\"` --output table\n\u7d50\u679c\u4e00\u90e8\u7701\u7565\n+---------------+------------------------------+\n||                 Datapoints                 ||\n|+-----------+------------------------+-------+|\n||  Average  |       Timestamp        | Unit  ||\n|+-----------+------------------------+-------+|\n||  934584.0 |  2014-12-28T14:28:00Z  |  None ||\n||  934616.0 |  2014-12-28T14:24:00Z  |  None ||\n||  934595.0 |  2014-12-28T14:22:00Z  |  None ||\n\n\u3082\u3084\u3063\u3068\u3057\u3066\u305f\u3053\u3068\u304c\u78ba\u304b\u3081\u3089\u308c\u307e\u3057\u305f\uff01\nCLI\u306e\u8a73\u7d30\u306fhttp://docs.aws.amazon.com/cli/latest/reference/cloudwatch/index.html\n\u4ee5\u4e0a\nAmazon CloudWatch\u306e\u7d71\u8a08\u30c7\u30fc\u30bf\u3001SampleCount\u304c\u3082\u3084\u3063\u3068\u3057\u3066\u3044\u308b\u306e\u3067\u3001\u78ba\u8a8d\u3057\u3066\u307f\u308b\n\n## \u57fa\u672c\u30e1\u30c8\u30ea\u30af\u30b9\u3067\u53ce\u96c6\u3057\u3066\u3044\u308b\u30c7\u30fc\u30bf\u30b5\u30f3\u30d7\u30eb\u6570\u306f\uff1f\n\nEC2\u306eCPU\u8ca0\u8377\u72b6\u6cc1(CPUUtilization)\u306e\u30c7\u30fc\u30bf\u30b5\u30f3\u30d7\u30eb\u6570(SampleCount)\u3092\u78ba\u8a8d\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>$ aws cloudwatch get-metric-statistics --metric-name \"CPUUtilization\"  --namespace \"AWS/EC2\" --statistics \"SampleCount\" --period 300 --start-time \\`date -u -d \"1 days ago\" \"+%Y-%m-%dT%H:%M:%SZ\"\\` --end-time \\`date -u \"+%Y-%m-%dT%H:%M:%SZ\"\\` --output table --dimensions Name=InstanceId,Value=i-XXXXXXXX</pre></div></div>\n\n**\u7d50\u679c\uff1a1\u5206\u3054\u3068\u306b\u30c7\u30fc\u30bf\u304cCloudWatch\u306bput\u3055\u308c\u3066\u3044\u305f**\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n+---------------+------------------------------------+\n||                  Datapoints                      ||\n|+--------------+------------------------+----------+|\n||  SampleCount |       Timestamp        |  Unit    ||\n|+--------------+------------------------+----------+|\n||  5.0         |  2014-12-27T21:59:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:04:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:09:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:14:00Z  |  Percent ||\n||  5.0         |  2014-12-27T22:19:00Z  |  Percent ||\n</pre></div></div>\n\u305d\u306e\u4ed6\uff1a\u8a73\u7d30\u30e1\u30c8\u30ea\u30af\u30b9(1\u5206\u9593\u9694\u3067\u7d71\u8a08\u60c5\u5831\u304c\u53d6\u5f97\u53ef\u80fd)\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u3066\u3082\u3044\u306a\u304f\u3066\u3082\u3001SampleCount\u306f\u5909\u308f\u3089\u306a\u3044\n\n## \u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30af\u30b9\u3067\u53ce\u96c6\u3067\u304d\u308b\u30c7\u30fc\u30bf\u30b5\u30f3\u30d7\u30eb\u6570\u306f\uff1f\n\n\u307e\u305a\u306f\u30b5\u30f3\u30d7\u30eb\u30c7\u30fc\u30bf(\u4eca\u56de\u306f\u30e1\u30e2\u30ea\u4f7f\u7528\u7387\u3092\u60f3\u5b9a)\u3092put\n\u4f55\u5ea6\u304b\u4ee5\u4e0b\u3092\u5b9f\u884c\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n$ aws cloudwatch put-metric-data --metric-name \"Memory Usage\" --namespace \"Custom\" --timestamp \\`date -u +%Y-%m-%dT%H:%M:%SZ\\` --value \\`free  | grep '^-' | tr -s ' ' | cut -d ' ' -f 4\\`\n</pre></div></div>\n\u305d\u3057\u3066\u30c7\u30fc\u30bf\u3092get\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n$ aws cloudwatch get-metric-statistics --metric-name \"Memory Usage\" --namespace \"Custom\" --statistics \"SampleCount\" --period 60 --start-time \\`date -u -d \"1 days ago\" \"+%Y-%m-%dT%H:%M:%SZ\"\\` --end-time \\`date -u \"+%Y-%m-%dT%H:%M:%SZ\"\\` --output table</pre></div></div>\n**\u7d50\u679c\uff1a\u77ed\u3044\u9593\u9694\uff081\u5206\u4ee5\u5185\uff09\u306e\u3082\u306e\u3082\u542b\u3081\u3001\u30c7\u30fc\u30bf\u306f\u3059\u3079\u3066CloudWatch\u306bput\u3055\u308c\u3066\u3044\u305f**\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n+----------------+--------------------------------+\n||                  Datapoints                   ||\n|+--------------+------------------------+-------+|\n||  SampleCount |       Timestamp        | Unit  ||\n|+--------------+------------------------+-------+|\n||  2.0         |  2014-12-28T14:28:00Z  |  None ||\n||  1.0         |  2014-12-28T14:24:00Z  |  None ||\n||  4.0         |  2014-12-28T14:22:00Z  |  None ||\n</pre></div></div>\n\u305d\u306e\u4ed6\uff1aAverage\u306f\u3001\u3061\u3083\u3093\u3068put\u3057\u305f\u5206\u304c\u8db3\u3055\u308c\u3001\u5272\u308a\u7b97\u3055\u308c\u3066\u3044\u308b\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre>\n$ aws cloudwatch get-metric-statistics --metric-name \"Memory Usage\" --namespace \"Custom\" --statistics \"Average\" --period 60 --start-time \\`date -u -d \"1 days ago\" \"+%Y-%m-%dT%H:%M:%SZ\"\\` --end-time \\`date -u \"+%Y-%m-%dT%H:%M:%SZ\"\\` --output table\n\u7d50\u679c\u4e00\u90e8\u7701\u7565\n+---------------+------------------------------+\n||                 Datapoints                 ||\n|+-----------+------------------------+-------+|\n||  Average  |       Timestamp        | Unit  ||\n|+-----------+------------------------+-------+|\n||  934584.0 |  2014-12-28T14:28:00Z  |  None ||\n||  934616.0 |  2014-12-28T14:24:00Z  |  None ||\n||  934595.0 |  2014-12-28T14:22:00Z  |  None ||\n</pre></div></div>\n\n\u3082\u3084\u3063\u3068\u3057\u3066\u305f\u3053\u3068\u304c\u78ba\u304b\u3081\u3089\u308c\u307e\u3057\u305f\uff01\nCLI\u306e\u8a73\u7d30\u306f[http://docs.aws.amazon.com/cli/latest/reference/cloudwatch/index.html](http://docs.aws.amazon.com/cli/latest/reference/cloudwatch/index.html)\n\u4ee5\u4e0a\n", "tags": ["AWS", "CloudWatch"]}