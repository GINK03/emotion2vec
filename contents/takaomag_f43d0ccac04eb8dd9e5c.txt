{"tags": ["SO_REUSEPORT", "socket", "python3", "IPv6"], "context": "\n\n\u6982\u8981\npython\u3092\u4f7f\u3063\u3066\u3001socket\u30b5\u30fc\u30d0\u30fc\u3092\u66f8\u3044\u3066\u3001SO_REUSEPORT\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u5834\u5408\u306e\u52d5\u4f5c\u3092\u7c21\u5358\u306b\u78ba\u8a8d\u3059\u308b\u3002\n\n\u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9\u3002\u3061\u306a\u307f\u306bpython3\u3002python2\u306f\u3001TOKYO\u30aa\u30ea\u30f3\u30d4\u30c3\u30af\u304f\u3089\u3044\u307e\u3067\u306e\u547d\u3060\u304b\u3089\u3001\u3082\u3046\u66f8\u304b\u306a\u3044\u306e\u3002\n\u5b9f\u884c\u3059\u308b\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067[::1]:60001\u3067listen\u3059\u308bTCP echo server\u304c\u7acb\u3061\u4e0a\u304c\u308b\u3088\u3046\u306b\u66f8\u3044\u3066\u308b\u3064\u3082\u308a\u3002\uff08IPv6\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u53ef\u80fd\uff09\n\nso-reuseport-test.py\n\n#!/usr/bin/env python3\n\nimport logging\nimport contextlib\nimport os\nimport socket\n\n\nlogger = logging.getLogger()\n\ndef start(\n    host='::1',\n    port=60001,\n    set_reuseport=True,\n):\n    receiver_name = 'Receiver-{}'.format(os.getpid())\n    logger.info(\n        '{}: pid={}'.format(receiver_name, os.getpid()),\n    )\n    sock = socket.socket(\n        family=socket.AF_INET6,\n        type=socket.SOCK_STREAM,\n    )\n    with contextlib.closing(sock):\n        sock.setsockopt(\n            socket.SOL_SOCKET,\n            socket.SO_REUSEADDR,\n            1,\n        )\n        if set_reuseport is True:\n            sock.setsockopt(\n                socket.SOL_SOCKET,\n                socket.SO_REUSEPORT,\n                1,\n            )\n\n        logger.info(\n            '{}: so_reuseaddr={}'.format(\n                receiver_name,\n                sock.getsockopt(\n                    socket.SOL_SOCKET,\n                    socket.SO_REUSEADDR,\n                ),\n            ),\n        )\n        logger.info(\n            '{}: so_reuseport={}'.format(\n                receiver_name,\n                sock.getsockopt(\n                    socket.SOL_SOCKET,\n                    socket.SO_REUSEPORT,\n                ),\n            ),\n        )\n        sock.bind((host,port))\n        sock.listen(1)\n        logger.info(\n            '{}: Listening sockname={}'.format(receiver_name, sock.getsockname()),\n        )\n        while True:\n            bound_sock, addr = sock.accept()\n            logger.info(\n                '{}: accepted sockname={}'.format(\n                    receiver_name,\n                    bound_sock.getsockname(),\n                ),\n            )\n            with contextlib.closing(bound_sock):\n                msg = bound_sock.recv(4096)\n                return_msg = '{}: recv message={}'.format(receiver_name, msg)\n                logger.info(return_msg)\n                bound_sock.send((return_msg + '\\n').encode())\n    return\n\nif __name__ == '__main__':\n    import argparse\n\n    logger.addHandler(\n        hdlr=logging.StreamHandler(),\n    )\n    logger.setLevel(\n        level=logging.INFO,\n    )\n    parser=argparse.ArgumentParser(\n        description='SO_REUSEPORT example',\n    )\n    parser.add_argument(\n        '--listen-addr',\n        required=False,\n        default='::1',\n    )\n    parser.add_argument(\n        '--listen-port',\n        required=False,\n        type=int,\n        default=60001,\n    )\n    parser.add_argument(\n        '--without-reuseport',\n        required=False,\n        action='store_true',\n        default=False,\n    )\n\n    args = parser.parse_args()\n    start(\n        host=args.listen_addr,\n        port=args.listen_port,\n        set_reuseport=not args.without_reuseport,\n    )\n\n\nSO_REUSEPORT\u7121\u3057\u306e\u5834\u5408\n\n1\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u307e\u305a\u306f\u3001SO_REUSEPORT\u7121\u3057\u3067\u7acb\u3061\u4e0a\u3052\u308b\u3002\u300cReceiver-XXX\u300d\u306e\u300cXXX\u300d\u306f\u3001\u8d77\u52d5\u3057\u305f\u30b5\u30fc\u30d0\u30fc\u306e\u30d7\u30ed\u30bb\u30b9\u756a\u53f7\u3002\n$ python3 so-reuseport-test.py without-reuseport\nReceiver-191: pid=191\nReceiver-191: so_reuseaddr=1\nReceiver-191: so_reuseport=0\nReceiver-191: Listening sockname=('::1', 60001, 0, 0)\n\n\n2\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u4e0a\u306e1\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u3001\u540c\u3058\u30db\u30b9\u30c8\u306e\u9055\u3046\u30b7\u30a7\u30eb\u3067\u30012\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u540c\u3058listen address/port\u3067\u7acb\u3061\u4e0a\u3052\u308b\u3002\n$ python3 so-reuseport-test.py --without-reuseport\nReceiver-192: pid=192\nReceiver-192: so_reuseaddr=1\nReceiver-192: so_reuseport=0\nTraceback (most recent call last):\n  File \"so-reuseport-test.py\", line 109, in <module>\n    set_reuseport=not args.without_reuseport,\n  File \"so-reuseport-test.py\", line 55, in start\n    sock.bind((host,port))\nOSError: [Errno 98] Address already in use\n\n\u306f\u3044\u3001\u3082\u3061\u308d\u3093\u5931\u6557\u30021\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u3055\u3063\u3055\u3068Ctrl+c\u3067\u7d42\u4e86\u3057\u3066\u306d\u3002\n\nSO_REUSEPORT\u6709\u308a\u306e\u5834\u5408\n\n1\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u6b21\u306b\u3001SO_REUSEPORT\u6709\u308a\u3067\u7acb\u3061\u4e0a\u3052\u308b\u30021\u500b\u76ee\u306f\u666e\u901a\u306b\u898b\u3048\u308b\u3002\n$ python3 so-reuseport-test.py\nReceiver-193: pid=193\nReceiver-193: so_reuseaddr=1\nReceiver-193: so_reuseport=1\nReceiver-193: Listening sockname=('::1', 60001, 0, 0)\n\n\n2\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u4e0a\u306e1\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u3001\u540c\u3058\u30db\u30b9\u30c8\u3067\u30012\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u540c\u3058listen address/port\u3067\u7acb\u3061\u4e0a\u3052\u308b\u3002\n$ python3 so-reuseport-test.py\nReceiver-194: pid=194\nReceiver-194: so_reuseaddr=1\nReceiver-194: so_reuseport=1\nReceiver-194: Listening sockname=('::1', 60001, 0, 0)\n\n\u307b\u308c\u3002\u7121\u4e8b\u306b\u8d77\u52d5\u3057\u305f\u3002\n\nsocat\u3067\u4f55\u304b\u9001\u3063\u3066\u307f\u308b\n\u3053\u308c\u3067\u3001\u540c\u3058listen address/port\u3067\u30012\u3064\u306e\u30d7\u30ed\u30bb\u30b9\u304cbind/listen\u3057\u3066\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001socat\u3092\u4f7f\u3063\u3066\u4f55\u304b\u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u308b\u3002\n$ echo 'Hello' | socat - tcp6-connect:[::1]:60001\nReceiver-193: recv message=b'Hello\\n'\n\nPID 193\u306e\u30d7\u30ed\u30bb\u30b9\u304caccept\u3057\u3066\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\u3057\u3066\u304f\u308c\u305f\u307f\u305f\u3044\u3002\u3053\u308c\u3092\u4f55\u56de\u304b\u7e70\u308a\u8fd4\u3057\u3066\u307f\u308b\u3002\n$ for i in $(seq 1 10);do\n    echo 'AAAA' | socat - tcp6-connect:[::1]:60001\ndone\nReceiver-194: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\n\n\u3061\u3083\u3093\u3068\u632f\u308a\u5206\u3051\u3057\u3066\u304f\u308c\u3066\u3044\u308bYO!\nHAHAHAHA!\n\nSO_REUSEPORT\u3063\u3066\uff1f\n\nSO_REUSEPORT\uff08\u3068SO_REUSEADDR\uff09\u3092\u6709\u52b9\u306b\u3059\u308b\u3068\u3001\u540c\u3058listen address/port\u3067\u8907\u6570\u306e\u30d7\u30ed\u30bb\u30b9\uff08\u30b9\u30ec\u30c3\u30c9\uff09\u304clisten\u3067\u304d\u308b\u3002\n\u305f\u3060\u3057\u3001\u5168\u30d7\u30ed\u30bb\u30b9\u304cSO_REUSEPORT\uff08\u3068SO_REUSEADDR\uff09\u3092\u6709\u52b9\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\u3055\u3089\u306b\u5168\u30d7\u30ed\u30bb\u30b9\u3001\u540c\u3058\u30e6\u30fc\u30b6\u30fc\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n\u632f\u308a\u5206\u3051\u306f\u3001listen socket\u3092accept\u4e2d\u306e\uff08\u3064\u307e\u308a\u6687\u306a\uff09\u30d7\u30ed\u30bb\u30b9\u7fa4\u306e\u306a\u304b\u304b\u3089\u3001\u30ab\u30fc\u30cd\u30eb\u304c\u9069\u5f53\u306b\u9078\u3093\u3067\u304f\u308c\u308b\u3088\u3002\n\u3064\u307e\u308a\u3001python\u307f\u305f\u3044\u306b\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u6027\u80fd\u51fa\u3059\u305f\u3081\u306b\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u4f7f\u3046\u3093\u3060\u3051\u3069\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u632f\u308a\u5206\u3051\u76ee\u7684\u306enginx\u3084gunicorn\u307f\u305f\u3044\u306a\u306e\u306f\u4e0d\u8981\u3063\u3066\u3053\u3068\u3002\n\u6700\u4f4e1\u30d7\u30ed\u30bb\u30b9\u751f\u304d\u3066\u3044\u308c\u3070\u3001\u305d\u308c\u4ee5\u5916\u306e\u30d7\u30ed\u30bb\u30b9\u7fa4\u3092restart\u3057\u3088\u3046\u304c\u843d\u3068\u305d\u3046\u304c\u554f\u984c\u306a\u3044\uff08\u30d7\u30ed\u30bb\u30b9\u7d42\u4e86\u6642\u306fgraceful\u306b\u306d\uff09\u3002\nsystemd\u3067\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u304b\u3089\u3001\u6b21\u56de\u306f\u305d\u306e\u3053\u3068\u306b\u3064\u3044\u3066\u3082\u66f8\u3053\u3046\u3002\n\n# \u6982\u8981\npython\u3092\u4f7f\u3063\u3066\u3001socket\u30b5\u30fc\u30d0\u30fc\u3092\u66f8\u3044\u3066\u3001SO_REUSEPORT\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308b\u5834\u5408\u306e\u52d5\u4f5c\u3092\u7c21\u5358\u306b\u78ba\u8a8d\u3059\u308b\u3002\n\n## \u30b5\u30f3\u30d7\u30eb\u30b3\u30fc\u30c9\n\u3053\u3093\u306a\u611f\u3058\u306e\u30b3\u30fc\u30c9\u3002\u3061\u306a\u307f\u306bpython3\u3002python2\u306f\u3001TOKYO\u30aa\u30ea\u30f3\u30d4\u30c3\u30af\u304f\u3089\u3044\u307e\u3067\u306e\u547d\u3060\u304b\u3089\u3001\u3082\u3046\u66f8\u304b\u306a\u3044\u306e\u3002\n\n\u5b9f\u884c\u3059\u308b\u3068\u3001\u30c7\u30d5\u30a9\u30eb\u30c8\u3067[::1]:60001\u3067listen\u3059\u308bTCP echo server\u304c\u7acb\u3061\u4e0a\u304c\u308b\u3088\u3046\u306b\u66f8\u3044\u3066\u308b\u3064\u3082\u308a\u3002\uff08IPv6\u30a2\u30c9\u30ec\u30b9\u3068\u30dd\u30fc\u30c8\u306f\u30aa\u30d7\u30b7\u30e7\u30f3\u3067\u5909\u66f4\u53ef\u80fd\uff09\n\n- so-reuseport-test.py\n\n```py3\n#!/usr/bin/env python3\n\nimport logging\nimport contextlib\nimport os\nimport socket\n\n\nlogger = logging.getLogger()\n\ndef start(\n    host='::1',\n    port=60001,\n    set_reuseport=True,\n):\n    receiver_name = 'Receiver-{}'.format(os.getpid())\n    logger.info(\n        '{}: pid={}'.format(receiver_name, os.getpid()),\n    )\n    sock = socket.socket(\n        family=socket.AF_INET6,\n        type=socket.SOCK_STREAM,\n    )\n    with contextlib.closing(sock):\n        sock.setsockopt(\n            socket.SOL_SOCKET,\n            socket.SO_REUSEADDR,\n            1,\n        )\n        if set_reuseport is True:\n            sock.setsockopt(\n                socket.SOL_SOCKET,\n                socket.SO_REUSEPORT,\n                1,\n            )\n\n        logger.info(\n            '{}: so_reuseaddr={}'.format(\n                receiver_name,\n                sock.getsockopt(\n                    socket.SOL_SOCKET,\n                    socket.SO_REUSEADDR,\n                ),\n            ),\n        )\n        logger.info(\n            '{}: so_reuseport={}'.format(\n                receiver_name,\n                sock.getsockopt(\n                    socket.SOL_SOCKET,\n                    socket.SO_REUSEPORT,\n                ),\n            ),\n        )\n        sock.bind((host,port))\n        sock.listen(1)\n        logger.info(\n            '{}: Listening sockname={}'.format(receiver_name, sock.getsockname()),\n        )\n        while True:\n            bound_sock, addr = sock.accept()\n            logger.info(\n                '{}: accepted sockname={}'.format(\n                    receiver_name,\n                    bound_sock.getsockname(),\n                ),\n            )\n            with contextlib.closing(bound_sock):\n                msg = bound_sock.recv(4096)\n                return_msg = '{}: recv message={}'.format(receiver_name, msg)\n                logger.info(return_msg)\n                bound_sock.send((return_msg + '\\n').encode())\n    return\n\nif __name__ == '__main__':\n    import argparse\n\n    logger.addHandler(\n        hdlr=logging.StreamHandler(),\n    )\n    logger.setLevel(\n        level=logging.INFO,\n    )\n    parser=argparse.ArgumentParser(\n        description='SO_REUSEPORT example',\n    )\n    parser.add_argument(\n        '--listen-addr',\n        required=False,\n        default='::1',\n    )\n    parser.add_argument(\n        '--listen-port',\n        required=False,\n        type=int,\n        default=60001,\n    )\n    parser.add_argument(\n        '--without-reuseport',\n        required=False,\n        action='store_true',\n        default=False,\n    )\n\n    args = parser.parse_args()\n    start(\n        host=args.listen_addr,\n        port=args.listen_port,\n        set_reuseport=not args.without_reuseport,\n    )\n```\n\n## SO_REUSEPORT\u7121\u3057\u306e\u5834\u5408\n### 1\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u307e\u305a\u306f\u3001SO_REUSEPORT\u7121\u3057\u3067\u7acb\u3061\u4e0a\u3052\u308b\u3002\u300cReceiver-XXX\u300d\u306e\u300cXXX\u300d\u306f\u3001\u8d77\u52d5\u3057\u305f\u30b5\u30fc\u30d0\u30fc\u306e\u30d7\u30ed\u30bb\u30b9\u756a\u53f7\u3002\n\n```bash\n$ python3 so-reuseport-test.py without-reuseport\nReceiver-191: pid=191\nReceiver-191: so_reuseaddr=1\nReceiver-191: so_reuseport=0\nReceiver-191: Listening sockname=('::1', 60001, 0, 0)\n```\n\n### 2\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u4e0a\u306e1\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u3001\u540c\u3058\u30db\u30b9\u30c8\u306e\u9055\u3046\u30b7\u30a7\u30eb\u3067\u30012\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u540c\u3058listen address/port\u3067\u7acb\u3061\u4e0a\u3052\u308b\u3002\n\n```bash\n$ python3 so-reuseport-test.py --without-reuseport\nReceiver-192: pid=192\nReceiver-192: so_reuseaddr=1\nReceiver-192: so_reuseport=0\nTraceback (most recent call last):\n  File \"so-reuseport-test.py\", line 109, in <module>\n    set_reuseport=not args.without_reuseport,\n  File \"so-reuseport-test.py\", line 55, in start\n    sock.bind((host,port))\nOSError: [Errno 98] Address already in use\n```\n\n\u306f\u3044\u3001\u3082\u3061\u308d\u3093\u5931\u6557\u30021\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u3055\u3063\u3055\u3068Ctrl+c\u3067\u7d42\u4e86\u3057\u3066\u306d\u3002\n\n\n## SO_REUSEPORT\u6709\u308a\u306e\u5834\u5408\n### 1\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u6b21\u306b\u3001SO_REUSEPORT\u6709\u308a\u3067\u7acb\u3061\u4e0a\u3052\u308b\u30021\u500b\u76ee\u306f\u666e\u901a\u306b\u898b\u3048\u308b\u3002\n\n```bash\n$ python3 so-reuseport-test.py\nReceiver-193: pid=193\nReceiver-193: so_reuseaddr=1\nReceiver-193: so_reuseport=1\nReceiver-193: Listening sockname=('::1', 60001, 0, 0)\n```\n\n### 2\u3064\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u8d77\u52d5\n\u4e0a\u306e1\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3092\u8d77\u52d5\u3057\u305f\u307e\u307e\u3001\u540c\u3058\u30db\u30b9\u30c8\u3067\u30012\u500b\u76ee\u306e\u30b5\u30fc\u30d0\u30fc\u3082\u540c\u3058listen address/port\u3067\u7acb\u3061\u4e0a\u3052\u308b\u3002\n\n```bash\n$ python3 so-reuseport-test.py\nReceiver-194: pid=194\nReceiver-194: so_reuseaddr=1\nReceiver-194: so_reuseport=1\nReceiver-194: Listening sockname=('::1', 60001, 0, 0)\n```\n\n\u307b\u308c\u3002\u7121\u4e8b\u306b\u8d77\u52d5\u3057\u305f\u3002\n\n## socat\u3067\u4f55\u304b\u9001\u3063\u3066\u307f\u308b\n\u3053\u308c\u3067\u3001\u540c\u3058listen address/port\u3067\u30012\u3064\u306e\u30d7\u30ed\u30bb\u30b9\u304cbind/listen\u3057\u3066\u308b\u3053\u3068\u306b\u306a\u308b\u3002\n\u3068\u3044\u3046\u308f\u3051\u3067\u3001socat\u3092\u4f7f\u3063\u3066\u4f55\u304b\u30c7\u30fc\u30bf\u3092\u9001\u3063\u3066\u307f\u308b\u3002\n\n```bash\n$ echo 'Hello' | socat - tcp6-connect:[::1]:60001\nReceiver-193: recv message=b'Hello\\n'\n```\n\nPID 193\u306e\u30d7\u30ed\u30bb\u30b9\u304caccept\u3057\u3066\u30c7\u30fc\u30bf\u3092\u53d7\u4fe1\u3057\u3066\u304f\u308c\u305f\u307f\u305f\u3044\u3002\u3053\u308c\u3092\u4f55\u56de\u304b\u7e70\u308a\u8fd4\u3057\u3066\u307f\u308b\u3002\n\n```bash\n$ for i in $(seq 1 10);do\n    echo 'AAAA' | socat - tcp6-connect:[::1]:60001\ndone\nReceiver-194: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\nReceiver-194: recv message=b'Hello\\n'\nReceiver-193: recv message=b'Hello\\n'\n```\n\n\u3061\u3083\u3093\u3068\u632f\u308a\u5206\u3051\u3057\u3066\u304f\u308c\u3066\u3044\u308bYO!\nHAHAHAHA!\n\n# SO_REUSEPORT\u3063\u3066\uff1f\n- SO_REUSEPORT\uff08\u3068SO_REUSEADDR\uff09\u3092\u6709\u52b9\u306b\u3059\u308b\u3068\u3001\u540c\u3058listen address/port\u3067\u8907\u6570\u306e\u30d7\u30ed\u30bb\u30b9\uff08\u30b9\u30ec\u30c3\u30c9\uff09\u304clisten\u3067\u304d\u308b\u3002\n- \u305f\u3060\u3057\u3001\u5168\u30d7\u30ed\u30bb\u30b9\u304cSO_REUSEPORT\uff08\u3068SO_REUSEADDR\uff09\u3092\u6709\u52b9\u306b\u3057\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n- \u3055\u3089\u306b\u5168\u30d7\u30ed\u30bb\u30b9\u3001\u540c\u3058\u30e6\u30fc\u30b6\u30fc\u3067\u306a\u3044\u3068\u3044\u3051\u306a\u3044\u3002\n- \u632f\u308a\u5206\u3051\u306f\u3001listen socket\u3092accept\u4e2d\u306e\uff08\u3064\u307e\u308a\u6687\u306a\uff09\u30d7\u30ed\u30bb\u30b9\u7fa4\u306e\u306a\u304b\u304b\u3089\u3001\u30ab\u30fc\u30cd\u30eb\u304c\u9069\u5f53\u306b\u9078\u3093\u3067\u304f\u308c\u308b\u3088\u3002\n- \u3064\u307e\u308a\u3001python\u307f\u305f\u3044\u306b\u3001\u30b5\u30fc\u30d0\u30fc\u306e\u6027\u80fd\u51fa\u3059\u305f\u3081\u306b\u8907\u6570\u30d7\u30ed\u30bb\u30b9\u4f7f\u3046\u3093\u3060\u3051\u3069\u3001\u30ea\u30af\u30a8\u30b9\u30c8\u632f\u308a\u5206\u3051\u76ee\u7684\u306enginx\u3084gunicorn\u307f\u305f\u3044\u306a\u306e\u306f\u4e0d\u8981\u3063\u3066\u3053\u3068\u3002\n- \u6700\u4f4e1\u30d7\u30ed\u30bb\u30b9\u751f\u304d\u3066\u3044\u308c\u3070\u3001\u305d\u308c\u4ee5\u5916\u306e\u30d7\u30ed\u30bb\u30b9\u7fa4\u3092restart\u3057\u3088\u3046\u304c\u843d\u3068\u305d\u3046\u304c\u554f\u984c\u306a\u3044\uff08\u30d7\u30ed\u30bb\u30b9\u7d42\u4e86\u6642\u306fgraceful\u306b\u306d\uff09\u3002\n- systemd\u3067\u3082\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u304b\u3089\u3001\u6b21\u56de\u306f\u305d\u306e\u3053\u3068\u306b\u3064\u3044\u3066\u3082\u66f8\u3053\u3046\u3002\n"}