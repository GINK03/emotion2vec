{"context": " More than 1 year has passed since last update.Rails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u958b\u767a\u4e2d\u306b\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\u65e5\u6642\u304c\u6b32\u3057\u304f\u306a\u3063\u305f\u306e\u3067\u3001\u3084\u308a\u65b9\u3092\u8abf\u3079\u305f\u308a\u3057\u305f\u306e\u3067\u5171\u6709\u3067\u3059\u3002\u53c2\u8003\u306b\u3057\u305f\u306e\u306f\u3001rails/abstract_mysql_adapter.rb#L135 \u3042\u305f\u308a\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\n# HACK: \u30af\u30e9\u30b9\u3092\u518d\u30aa\u30fc\u30d7\u30f3\u3057\u3066\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\nclass ActiveRecord::Base\n  def self.table_status\n    query = \"SHOW TABLE STATUS LIKE '#{self.table_name}'\"\n    connection.select_one(query)\n  end\nend\n\nirb(main):001:0> User.table_status\n   (1.7ms)  SHOW TABLE STATUS LIKE 'users'\n=> {\"Name\"=>\"users\",\n \"Engine\"=>\"InnoDB\",\n \"Version\"=>10,\n \"Row_format\"=>\"Compact\",\n \"Rows\"=>10,\n \"Avg_row_length\"=>1638,\n \"Data_length\"=>16384,\n \"Max_data_length\"=>0,\n \"Index_length\"=>180224,\n \"Data_free\"=>0,\n \"Auto_increment\"=>11,\n \"Create_time\"=>2015-02-28 07:48:06 +0900,\n \"Update_time\"=>nil,\n \"Check_time\"=>nil,\n \"Collation\"=>\"utf8_unicode_ci\",\n \"Checksum\"=>nil,\n \"Create_options\"=>\"\",\n \"Comment\"=>\"\"}\n\nRails\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u958b\u767a\u4e2d\u306b\u30c6\u30fc\u30d6\u30eb\u306e\u4f5c\u6210\u65e5\u6642\u304c\u6b32\u3057\u304f\u306a\u3063\u305f\u306e\u3067\u3001\u3084\u308a\u65b9\u3092\u8abf\u3079\u305f\u308a\u3057\u305f\u306e\u3067\u5171\u6709\u3067\u3059\u3002\u53c2\u8003\u306b\u3057\u305f\u306e\u306f\u3001[rails/abstract_mysql_adapter.rb#L135](https://github.com/rails/rails/blob/2164646eb4abac76712520f3a0afb9a4438727c2/activerecord/lib/active_record/connection_adapters/abstract_mysql_adapter.rb#L135) \u3042\u305f\u308a\u306e\u30b3\u30fc\u30c9\u3067\u3059\u3002\n\n```rb\n# HACK: \u30af\u30e9\u30b9\u3092\u518d\u30aa\u30fc\u30d7\u30f3\u3057\u3066\u30af\u30e9\u30b9\u30e1\u30bd\u30c3\u30c9\u3092\u5b9a\u7fa9\u3059\u308b\nclass ActiveRecord::Base\n  def self.table_status\n    query = \"SHOW TABLE STATUS LIKE '#{self.table_name}'\"\n    connection.select_one(query)\n  end\nend\n```\n\n```irb\nirb(main):001:0> User.table_status\n   (1.7ms)  SHOW TABLE STATUS LIKE 'users'\n=> {\"Name\"=>\"users\",\n \"Engine\"=>\"InnoDB\",\n \"Version\"=>10,\n \"Row_format\"=>\"Compact\",\n \"Rows\"=>10,\n \"Avg_row_length\"=>1638,\n \"Data_length\"=>16384,\n \"Max_data_length\"=>0,\n \"Index_length\"=>180224,\n \"Data_free\"=>0,\n \"Auto_increment\"=>11,\n \"Create_time\"=>2015-02-28 07:48:06 +0900,\n \"Update_time\"=>nil,\n \"Check_time\"=>nil,\n \"Collation\"=>\"utf8_unicode_ci\",\n \"Checksum\"=>nil,\n \"Create_options\"=>\"\",\n \"Comment\"=>\"\"}\n```\n", "tags": ["Rails", "ActiveRecord", "MySQL"]}