{"context": "\n\n\u75c7\u72b6\n2016/12/25\u73fe\u5728\uff0c Faster R-CNN\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\uff0c\u52d5\u304b\u3059\u969b\u306b\uff0c\u4ee5\u4e0b\u306e\u554f\u984c\u304c\u751f\u3058\u308b\uff0e\n\n\ncaffe-fast-rcnn\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u3067\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u306a\u3044\ntype \"int\" is incompatible with parameter of type \"cudnnNanPropagation_t\"\n\n\n\u4e0a\u8a18\u30a8\u30e9\u30fc\u306b\u306a\u3093\u3068\u304b\u5bfe\u51e6\u3057\u3066\u3082\u3001\u5b9f\u884c\u6642\u306b\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u3067\u3066\u505c\u6b62\u3059\u308b\nFile \"/mnt/mqs02/home/ahashimoto/py-faster-rcnn/tools/../lib/rpn/proposal_target_layer.py\", line 167, in _sample_rois\nfg_inds = npr.choice(fg_inds, size=fg_rois_per_this_image, replace=False)\nFile \"mtrand.pyx\", line 1070, in mtrand.RandomState.choice (numpy/random/mtrand/mtrand.c:8044)\nTypeError: 'numpy.float64' object cannot be interpreted as an index\n\n\n\n\n\u75c7\u72b61\u306e\u539f\u56e0\n\n\u304a\u305d\u3089\u304f\uff0c\u307e\u3060fast-rcnn\u304c\u6700\u65b0\u306ecudnn (cudnn5.1.5)\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u305f\u3081\uff0c\u578b\u306e\u4e0d\u4e00\u81f4\u306b\u3088\u308b\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u3066\u3044\u308b\uff0e\n\n\n\u75c7\u72b61\u3078\u306e\u5bfe\u51e6\u65b9\u6cd5\n\n\u6700\u65b0\u306ecaffe\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u3067\uff0c\u305d\u308c\u3092\u30de\u30fc\u30b8\u3059\u308b\uff0e\n\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8: https://github.com/rbgirshick/py-faster-rcnn/issues/237\n\n\u624b\u9806(faster-rcnn\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c)\n\u30001. \u6700\u65b0\u306epy-faster-rcnn\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\uff0c\u6700\u65b0\u306ecaffe\u3068fast-rcnn\u3092\u30de\u30fc\u30b8\u3059\u308b\uff0e\u3000\n\u3000cd caffe-fast-rcnn  \n\u3000git remote add caffe https://github.com/BVLC/caffe.git  \n\u3000git fetch caffe  \n\u3000git merge caffe/master\n\n\u30002. include/caffe/layers/python_layer.hpp\u3092\u958b\u304d\uff0c\u4e0b\u8a18\u306e\u8a18\u8ff0\u3092\u6d88\u53bb\nself_.attr(\"phase\") = static_cast<int>(this->phase_)\n\n\n\u30003. caffe-fast-rcnn\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\uff0e\n\n\u75c7\u72b62\u306e\u539f\u56e0\n\u540c\u3058\u30bf\u30a4\u30df\u30f3\u30b0\u3067numpy\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u3082\u5bfe\u5fdc\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u3044\u308b??\n\n\u75c7\u72b62\u3078\u306e\u5bfe\u51e6\u65b9\u6cd5\n\n\u30a8\u30e9\u30fc\u3092\u8d77\u3053\u3057\u3066\u3044\u308bpython\u306e\u30b3\u30fc\u30c9\u3092\u624b\u52d5\u3067\u4fee\u6b63\u3059\u308b\n\u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8:https://github.com/rbgirshick/py-faster-rcnn/issues/13\n\n\u624b\u9806(faster-rcnn\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c)\n\n\u8a72\u5f53\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\nvim lib/rpn/proposal_target_layer.py\n\n\n1\u7b87\u6240\u76ee(167\u884c\u76ee\u4ed8\u8fd1)\u306e\u4fee\u6b63\u3059\u308b\uff0e\n\n\n\u5909\u66f4\u524d\nif fg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000fg_inds = npr.choice(fg_inds, size=fg_rois_per_this_image, replace=False)\n\n\n\n\u5909\u66f4\u5f8c\nif fg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000fg_inds = [int(v) for v in fg_inds]\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000fg_inds = npr.choice(fg_inds, size=int(fg_rois_per_this_image), replace=False)\n\n\n\n\n\n2\u7b87\u6240\u76ee(1\uff17\uff18\u884c\u76ee\u4ed8\u8fd1)\u306e\u4fee\u6b63\u3059\u308b\uff0e\n\n\n\u5909\u66f4\u524d\nif bg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000bg_inds = npr.choice(bg_inds, size=bg_rois_per_this_image, replace=False)\n\n\n\n\u5909\u66f4\u5f8c\nif bg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000bg_inds = [int(v) for v in bg_inds]\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000bg_inds = npr.choice(bg_inds, size=int(bg_rois_per_this_image), replace=False)\n\n\n\n\n\n\n\n# \u75c7\u72b6\n2016/12/25\u73fe\u5728\uff0c Faster R-CNN\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3057\uff0c\u52d5\u304b\u3059\u969b\u306b\uff0c\u4ee5\u4e0b\u306e\u554f\u984c\u304c\u751f\u3058\u308b\uff0e\n\n1. caffe-fast-rcnn\u306e\u30b3\u30f3\u30d1\u30a4\u30eb\u6642\u306b\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u3067\u3066\u30b3\u30f3\u30d1\u30a4\u30eb\u3067\u304d\u306a\u3044\n\n    ```type \"int\" is incompatible with parameter of type \"cudnnNanPropagation_t\"```\n2. \u4e0a\u8a18\u30a8\u30e9\u30fc\u306b\u306a\u3093\u3068\u304b\u5bfe\u51e6\u3057\u3066\u3082\u3001\u5b9f\u884c\u6642\u306b\u4e0b\u8a18\u306e\u30a8\u30e9\u30fc\u304c\u3067\u3066\u505c\u6b62\u3059\u308b\n\n    ```\n  File \"/mnt/mqs02/home/ahashimoto/py-faster-rcnn/tools/../lib/rpn/proposal_target_layer.py\", line 167, in _sample_rois\n    fg_inds = npr.choice(fg_inds, size=fg_rois_per_this_image, replace=False)\n  File \"mtrand.pyx\", line 1070, in mtrand.RandomState.choice (numpy/random/mtrand/mtrand.c:8044)\nTypeError: 'numpy.float64' object cannot be interpreted as an index\n```\n\n# \u75c7\u72b61\u306e\u539f\u56e0\n- \u304a\u305d\u3089\u304f\uff0c\u307e\u3060fast-rcnn\u304c\u6700\u65b0\u306ecudnn (cudnn5.1.5)\u306b\u5bfe\u5fdc\u3057\u3066\u3044\u306a\u3044\u305f\u3081\uff0c\u578b\u306e\u4e0d\u4e00\u81f4\u306b\u3088\u308b\u30a8\u30e9\u30fc\u304c\u8d77\u304d\u3066\u3044\u308b\uff0e\n\n# \u75c7\u72b61\u3078\u306e\u5bfe\u51e6\u65b9\u6cd5\n- \u6700\u65b0\u306ecaffe\u306f\u5bfe\u5fdc\u3057\u3066\u3044\u308b\u306e\u3067\uff0c\u305d\u308c\u3092\u30de\u30fc\u30b8\u3059\u308b\uff0e\n- \u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8: https://github.com/rbgirshick/py-faster-rcnn/issues/237\n\n- \u624b\u9806(faster-rcnn\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c)\n\u30001. \u6700\u65b0\u306epy-faster-rcnn\u306e\u30ea\u30dd\u30b8\u30c8\u30ea\u3067\u4ee5\u4e0b\u3092\u5b9f\u884c\u3057\uff0c\u6700\u65b0\u306ecaffe\u3068fast-rcnn\u3092\u30de\u30fc\u30b8\u3059\u308b\uff0e\u3000\n\n    ```\n\u3000cd caffe-fast-rcnn  \n\u3000git remote add caffe https://github.com/BVLC/caffe.git  \n\u3000git fetch caffe  \n\u3000git merge caffe/master\n```\n\u30002. include/caffe/layers/python_layer.hpp\u3092\u958b\u304d\uff0c\u4e0b\u8a18\u306e\u8a18\u8ff0\u3092\u6d88\u53bb\n\n    ```self_.attr(\"phase\") = static_cast<int>(this->phase_)```\n\n\u30003. caffe-fast-rcnn\u3092\u30b3\u30f3\u30d1\u30a4\u30eb\u3059\u308b\uff0e\n\n# \u75c7\u72b62\u306e\u539f\u56e0\n\u540c\u3058\u30bf\u30a4\u30df\u30f3\u30b0\u3067numpy\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u30a2\u30c3\u30d7\u306b\u3082\u5bfe\u5fdc\u304c\u5fc5\u8981\u306b\u306a\u3063\u3066\u3044\u308b??\n# \u75c7\u72b62\u3078\u306e\u5bfe\u51e6\u65b9\u6cd5\n- \u30a8\u30e9\u30fc\u3092\u8d77\u3053\u3057\u3066\u3044\u308bpython\u306e\u30b3\u30fc\u30c9\u3092\u624b\u52d5\u3067\u4fee\u6b63\u3059\u308b\n- \u53c2\u8003\u306b\u3057\u305f\u30da\u30fc\u30b8:https://github.com/rbgirshick/py-faster-rcnn/issues/13\n\n- \u624b\u9806(faster-rcnn\u306e\u30eb\u30fc\u30c8\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3067\u5b9f\u884c)\n    1. \u8a72\u5f53\u30d5\u30a1\u30a4\u30eb\u3092\u958b\u304f\n    ```vim lib/rpn/proposal_target_layer.py```\n    2. 1\u7b87\u6240\u76ee(167\u884c\u76ee\u4ed8\u8fd1)\u306e\u4fee\u6b63\u3059\u308b\uff0e\n        - \u5909\u66f4\u524d\n        \n            ```\nif fg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000fg_inds = npr.choice(fg_inds, size=fg_rois_per_this_image, replace=False)\n```\n        - \u5909\u66f4\u5f8c\n\n            ```\nif fg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000fg_inds = [int(v) for v in fg_inds]\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000fg_inds = npr.choice(fg_inds, size=int(fg_rois_per_this_image), replace=False)\n```\n    2. 2\u7b87\u6240\u76ee(1\uff17\uff18\u884c\u76ee\u4ed8\u8fd1)\u306e\u4fee\u6b63\u3059\u308b\uff0e\n        - \u5909\u66f4\u524d\n        \n            ```\nif bg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000bg_inds = npr.choice(bg_inds, size=bg_rois_per_this_image, replace=False)\n```\n        - \u5909\u66f4\u5f8c\n\n            ```\nif bg_inds.size > 0:\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000bg_inds = [int(v) for v in bg_inds]\n\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000\u3000bg_inds = npr.choice(bg_inds, size=int(bg_rois_per_this_image), replace=False)\n```\n\n", "tags": ["py-faster-rcnn", "Caffe", "cudnnNanPropagation_t", "proposal_target_layer.py", "numpy.float64"]}