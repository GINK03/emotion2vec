{"context": "\u305f\u3060\u306e\u30e1\u30e2\u66f8\u304d\u3002\nSQL\u306eTips\u306a\u3069\u306a\u3069\u3002\n\n\u6708\u521d\u3092\u51fa\u3059\u3002\n\u2605bigquery\u304c\u6301\u3063\u3066\u3044\u308b\u95a2\u6570\u3067\u6708\u521d\u3092\u51fa\u3057\u3066\u3001\u305d\u308c\u4ee5\u4e0a\u3092\u6c42\u3081\u308b\u3002\nhogehoge >= TIMESTAMP(DATE(DATE_ADD(CURRENT_TIMESTAMP(),\n-DAY(DATE_ADD(CURRENT_TIMESTAMP(),-1,\"DAY\")),\"DAY\")))\n\u3000\u203bDATE\u3067\u5909\u63db\uff08\u6642\u9593\u5207\u308a\u6368\u3066\uff09\u3059\u308bSTRING\u306b\u306a\u308b\u3002\u4e0d\u4fbf\u3002\n\u2605\u3046\u3061\u304c\u6301\u3063\u3066\u3044\u308b\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u5909\u63db\u3057\u3066=\u3067\u7e4b\u3052\u3066\u307f\u308b\u3002\n\u3000YEAR(hogehoge) = YEAR(CURRENT_TIMESTAMP()) AND\n\u3000MONTH(hogehoge) = MONTH(CURRENT_TIMESTAMP())\n\n\u65e5\u672c\u6642\u9593\nDATE_ADD(CURRENT_TIMESTAMP(),+9,\"HOUR\")\n\n\u540c\u5e74\u540c\u6708\u6bd4\nTIMESTAMP(DATE(DATE_ADD(DATE_ADD(CURRENT_TIMESTAMP(),-1,\"YEAR\"),-DAY(DATE_ADD(CURRENT_DATE(),-1,\"DAY\")),\"DAY\")))\n\n\u5e74\u9f62\nBIRTH\u3063\u3066\u3044\u3046\u30ab\u30e9\u30e0\u304c\u751f\u5e74\u6708\u65e5\u3002\u3046\u308b\u3046\u5e74\u306f\u3069\u30fc\u3057\u3088\u3046\u304b\u30fb\u30fb\u30fb\u3002\nSELECT\n  CASE WHEN DAYOFYEAR(CURRENT_DATE()) < DAYOFYEAR(BIRTH) THEN YEAR(CURRENT_DATE()) - YEAR(BIRTH) - 1\n  ELSE YEAR(CURRENT_DATE()) - YEAR(BIRTH) END AS AGE\nFROM [HOGEHOGE.HOGE]\n\nView\u306f\u4fbf\u5229\u3060\u3051\u3069\u3001\u3042\u308b\u7a0b\u5ea6\u306b\u3057\u3088\u3046\u3002\nView\u306f\u4fbf\u5229\u306a\u3093\u3060\u3069\u3001\u3042\u308b\u7a0b\u5ea6\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\u30d0\u30c3\u30c1\u3067\u30c6\u30fc\u30d6\u30eb\u4f5c\u3063\u305f\u65b9\u304c\u3044\u3044\u3088\u3002\n\nbigquery-public-data\u306e\u89b3\u6e2c\u6240\u3092\u6d17\u3044\u51fa\u3059\u3002\nhttp://googlecloudplatform-japan.blogspot.jp/2016/10/ghcn-bigquery.html?m=1\n\u3060\u3044\u305f\u3044\u4eba\u304c\u4f4f\u3093\u3067\u308b\u3067\u3042\u308d\u3046\u65e5\u672c\u306e\u89b3\u6e2c\u6240\u3092\u51fa\u3057\u3066\u307f\u308b\u3002\n\u306a\u3093\u3066\u3053\u3068\u306f\u306a\u3044\u3067\u3059\u3002\u65e5\u672c\u3092\u3059\u3063\u307d\u308a\u5165\u308c\u305f\u7def\u5ea6\u7d4c\u5ea6\u3092\u5165\u308c\u305f\u3060\u3051\u3067\u3059\u3002\n\u6c96\u7e04\u3060\u3051\u98db\u3093\u3067\u3044\u308b\u306e\u3067UNION\u3057\u3066\u3044\u307e\u3059\u3002\nselect *\nfrom\n(SELECT\n  *\nFROM\n  [bigquery-public-data:ghcn_d.ghcnd_stations]\nwhere\n latitude between 30 and 45 and\n longitude between 130 and 145),\n(SELECT\n  *\nFROM\n  [bigquery-public-data:ghcn_d.ghcnd_stations]\nwhere\n latitude between 25 and 30 and\n longitude between 125 and 130)\n\u305f\u3060\u306e\u30e1\u30e2\u66f8\u304d\u3002\nSQL\u306eTips\u306a\u3069\u306a\u3069\u3002\n\n#\u6708\u521d\u3092\u51fa\u3059\u3002\n \u2605bigquery\u304c\u6301\u3063\u3066\u3044\u308b\u95a2\u6570\u3067\u6708\u521d\u3092\u51fa\u3057\u3066\u3001\u305d\u308c\u4ee5\u4e0a\u3092\u6c42\u3081\u308b\u3002\n`hogehoge >= TIMESTAMP(DATE(DATE_ADD(CURRENT_TIMESTAMP(),\n-DAY(DATE_ADD(CURRENT_TIMESTAMP(),-1,\"DAY\")),\"DAY\")))`\n\u3000\u203bDATE\u3067\u5909\u63db\uff08\u6642\u9593\u5207\u308a\u6368\u3066\uff09\u3059\u308bSTRING\u306b\u306a\u308b\u3002\u4e0d\u4fbf\u3002\n\n\u2605\u3046\u3061\u304c\u6301\u3063\u3066\u3044\u308b\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u3092\u5909\u63db\u3057\u3066=\u3067\u7e4b\u3052\u3066\u307f\u308b\u3002\n\u3000`YEAR(hogehoge) = YEAR(CURRENT_TIMESTAMP()) AND\n\u3000MONTH(hogehoge) = MONTH(CURRENT_TIMESTAMP())`\n#\u65e5\u672c\u6642\u9593\n`DATE_ADD(CURRENT_TIMESTAMP(),+9,\"HOUR\")`\n#\u540c\u5e74\u540c\u6708\u6bd4\n`TIMESTAMP(DATE(DATE_ADD(DATE_ADD(CURRENT_TIMESTAMP(),-1,\"YEAR\"),-DAY(DATE_ADD(CURRENT_DATE(),-1,\"DAY\")),\"DAY\")))`\n#\u5e74\u9f62\nBIRTH\u3063\u3066\u3044\u3046\u30ab\u30e9\u30e0\u304c\u751f\u5e74\u6708\u65e5\u3002\u3046\u308b\u3046\u5e74\u306f\u3069\u30fc\u3057\u3088\u3046\u304b\u30fb\u30fb\u30fb\u3002\n`SELECT\n  CASE WHEN DAYOFYEAR(CURRENT_DATE()) < DAYOFYEAR(BIRTH) THEN YEAR(CURRENT_DATE()) - YEAR(BIRTH) - 1\n  ELSE YEAR(CURRENT_DATE()) - YEAR(BIRTH) END AS AGE\nFROM [HOGEHOGE.HOGE]`\n\n#View\u306f\u4fbf\u5229\u3060\u3051\u3069\u3001\u3042\u308b\u7a0b\u5ea6\u306b\u3057\u3088\u3046\u3002\nView\u306f\u4fbf\u5229\u306a\u3093\u3060\u3069\u3001\u3042\u308b\u7a0b\u5ea6\u306b\u3057\u307e\u3057\u3087\u3046\u3002\n\u30d0\u30c3\u30c1\u3067\u30c6\u30fc\u30d6\u30eb\u4f5c\u3063\u305f\u65b9\u304c\u3044\u3044\u3088\u3002\n\n#bigquery-public-data\u306e\u89b3\u6e2c\u6240\u3092\u6d17\u3044\u51fa\u3059\u3002\nhttp://googlecloudplatform-japan.blogspot.jp/2016/10/ghcn-bigquery.html?m=1\n\u3060\u3044\u305f\u3044\u4eba\u304c\u4f4f\u3093\u3067\u308b\u3067\u3042\u308d\u3046\u65e5\u672c\u306e\u89b3\u6e2c\u6240\u3092\u51fa\u3057\u3066\u307f\u308b\u3002\n\u306a\u3093\u3066\u3053\u3068\u306f\u306a\u3044\u3067\u3059\u3002\u65e5\u672c\u3092\u3059\u3063\u307d\u308a\u5165\u308c\u305f\u7def\u5ea6\u7d4c\u5ea6\u3092\u5165\u308c\u305f\u3060\u3051\u3067\u3059\u3002\n\u6c96\u7e04\u3060\u3051\u98db\u3093\u3067\u3044\u308b\u306e\u3067UNION\u3057\u3066\u3044\u307e\u3059\u3002\n\n`select *\nfrom\n(SELECT\n  *\nFROM\n  [bigquery-public-data:ghcn_d.ghcnd_stations]\nwhere\n latitude between 30 and 45 and\n longitude between 130 and 145),\n(SELECT\n  *\nFROM\n  [bigquery-public-data:ghcn_d.ghcnd_stations]\nwhere\n latitude between 25 and 30 and\n longitude between 125 and 130)`\n", "tags": ["bigquery", "GoogleBigQuery", "GoogleCloudPlatform"]}