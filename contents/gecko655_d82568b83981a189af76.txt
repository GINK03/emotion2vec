{"context": "\n\n\u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\nUnity\u306eiOS\u5411\u3051\u30c7\u30d0\u30c3\u30b0\u30d3\u30eb\u30c9\u3068\u5b9f\u6a5f\u30c7\u30d7\u30ed\u30a4\u304c\u9045\u304f\u3066\u5f85\u3063\u3066\u3089\u308c\u306a\u3044\u3002\n\u3057\u304b\u3082Unity\u4e0a\u3067Run\u3057\u3066\u3082Xcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5410\u304d\u51fa\u3055\u308c\u308b\u3060\u3051\u306a\u306e\u3067\u3001\n1. Unity\u4e0a\u3067Run\n2. \u5410\u304d\u51fa\u3055\u308c\u305fXcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Xcode\u4e0a\u3067Run\n\u30682\u56deRun\u30dc\u30bf\u30f3\u3092\u62bc\u3055\u306a\u3044\u3068\u5b9f\u6a5f\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u306a\u3044\u3002\u3081\u3093\u3069\u304f\u3055\u3044\u3002\u30c8\u30a4\u30ec\u884c\u3051\u306a\u3044\u3002\n\u30b3\u30de\u30f3\u30c91\u56de\u53e9\u3044\u305f\u3089\u30c8\u30a4\u30ec\u306b\u884c\u3063\u3066\u3066\u3082iOS\u5b9f\u6a5f\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\n\n\u624b\u9806\n\n1 \u52d5\u4f5c\u8981\u4ef6\n\n(iOS\u306a\u306e\u3067)Mac OS X\u304c\u5165\u3063\u3066\u3044\u308b\u30de\u30b7\u30f3\nios-deploy (https://github.com/phonegap/ios-deploy)\n\n\n\nbrew install ios-deploy\u3067\u5165\u308b\u3002\n\n\nXcode\u3068\u304bUnity\u3068\u304b\n\n\n2 \u30d0\u30c3\u30c1\u5b9f\u884c\u306e\u6e96\u5099\nAssets\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u76f4\u4e0b\u306bEditor\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u4ee5\u4e0b\u306eBatchBuild.cs\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u540d\u524d\u304c\u91cd\u8981\u306a\u306e\u3067\u3001\"Editor\"\u306e\u30b9\u30da\u30eb\u3068\u30ad\u30e3\u30d4\u30bf\u30e9\u30a4\u30ba\u306b\u6ce8\u610f\u3002\nAndroid\u7b49\u5411\u3051\u306e\u30b3\u30fc\u30c9\u3082\u5165\u3063\u3066\u3044\u307e\u3059\u304c\u4eca\u56de\u306f\u4f7f\u3044\u307e\u305b\u3093\n\nBatchBuild.cs\nusing UnityEngine;\nusing UnityEditor;\nusing System.Collections;\nusing System.Collections.Generic;\nusing System.Linq;\n\npublic class BatchBuild : MonoBehaviour {\n\n    static private string ApplicationName = \"Hoge-application\";\n    //for Android\n    static void BuildProject_Android(){\n\n        Debug.Log (\"AndroidBuild...\");\n\n\n        string[]        scenePaths  = GetEnabledScenePaths();\n        string          outputPath  = Application.dataPath + \"/../\"+ApplicationName+\".apk\";\n        BuildTarget     target      = BuildTarget.Android;\n        BuildOptions    opt         = BuildOptions.None;\n\n        ApplicationBuild(scenePaths,outputPath,target,opt);\n    }\n\n    //for iOS Device\n    static void BuildProject_iOS(){\n\n        Debug.Log (\"iOSBuild...\");\n\n        string[]        scenePaths  = GetEnabledScenePaths();\n        string          outputPath  = \"Device\";\n        BuildTarget     target      = BuildTarget.iOS;\n        BuildOptions    opt         = BuildOptions.SymlinkLibraries;\n\n        //ProjectDataSize Reduction\n        EditorUserBuildSettings.symlinkLibraries = true;\n        //Prevent SimulatorBuild\n        PlayerSettings.iOS.sdkVersion = iOSSdkVersion.DeviceSDK;\n\n        ApplicationBuild(scenePaths,outputPath,target,opt);\n    }\n\n    //RunBuild\n    static void ApplicationBuild(string[] scenePaths,string outputPath,BuildTarget target,BuildOptions opt){\n\n        string error = BuildPipeline.BuildPlayer(scenePaths,outputPath,target,opt);\n\n        if (!string.IsNullOrEmpty(error))\n            Debug.LogError(error);      //BuildFailed\n        EditorApplication.Exit(string.IsNullOrEmpty(error) ? 0 : 1);\n\n    }\n\n    //return Enabled Scene in BuildSettings's Scenes In Build \n    static string[] GetEnabledScenePaths() {\n\n        List<string> sceneList = new List<string>();\n\n        //Check Scenes Enabled\n        foreach(var scene in EditorBuildSettings.scenes){\n            if(scene.enabled)\n                sceneList.Add (scene.path);\n        }\n        return sceneList.ToArray();\n    }\n\n}\n\n\n\n3 \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\u7a7a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u7528\u610f\u3057\u3001\u4ee5\u4e0b\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u914d\u7f6e\u3001\u5b9f\u884c\u3059\u308b\u3002\nUnity\u306e\u30d3\u30eb\u30c9\u3001Xcode\u306e\u30d3\u30eb\u30c9\u304c\u8d70\u3063\u305f\u306e\u3061\u3001iOS\u5b9f\u6a5f\u4e0a\u3067Unity\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u305f\u3089\u6210\u529f\n$BASH_SOURCE\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081bash or zsh\u7cfb\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\u6c17\u304c\u3057\u307e\u3059\n\ndeploy_to_ios.sh\n#Locate this script under an empty directory.\n\nPROJECT_BUILD_DIR=`pwd`/`dirname $BASH_SOURCE` # <= Must be absolute path\nPROJECT_BASE=/path/to/unity-project-base-directory # <= Edit this\nAPP_NAME=Hoge-application.app # <= Edit this\n\ncd $PROJECT_BUILD_DIR\n\necho \"Copying sources\"\nrm -r Assets 2>/dev/null\nrm -r ProjectSettings 2>/dev/null\ncp -r $PROJECT_BASE/Assets/ Assets/\ncp -r $PROJECT_BASE/ProjectSettings/ ProjectSettings/\n\necho \"Building Unity\"\n/Applications/Unity/Unity.app/Contents/MacOS/Unity -batchmode -projectPath $PROJECT_BUILD_DIR -executeMethod BatchBuild.BuildProject_iOS -quit\nif [ $? != 0 ]; then\n  echo \"Unity Build failed\"\n  exit $?\nfi\n\necho \"Building Xcode Project\"\nxcodebuild -project $PROJECT_BUILD_DIR/Device/Unity-iPhone.xcodeproj -target Unity-iPhone -configuration Release build\nif [ $? != 0 ]; then\n  echo \"Xcode Build failed\"\n  exit $?\nfi\n\necho \"Deploying to the device\"\nios-deploy --debug --bundle $PROJECT_BUILD_DIR/Device/build/Release-iphoneos/$APP_NAME\nif [ $? -eq 254 ]; then\n  echo \"Deploying finished, but couldn't run app\"\n  exit $?\nelif [ $? -ne 0 ]; then\n  echo \"Deploying failed\"\n  exit $?\nfi\n\n\n\n4 \u5099\u8003\nUnity\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304d\u306b\u3001Assets\u30d5\u30a9\u30eb\u30c0\u3068ProjectSettings\u30d5\u30a9\u30eb\u30c0\u3092\u307e\u308b\u307e\u308b\u30b3\u30d4\u30fc\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u304c\u91cd\u8981\u3067\u3059\u3002\nUnity\u958b\u767a\u74b0\u5883\u3092\u958b\u3044\u305f\u307e\u307e\u3001Assets\u3084ProjectSettings\u3092\u30b3\u30d4\u30fc\u305b\u305a\u306b\u30d3\u30eb\u30c9\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\n\nIt looks like another Unity instance is running with this project open.\n\n\u306a\u3069\u3068\u8a00\u308f\u308c\u3046\u307e\u304f\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3002\n\u307e\u305f\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u7b49\u3067\u306f\u3001Unity\u306b\n\nAssets is a symbolic link. Using symlinks in Unity projects may cause your project to become corrupted if you create multiple references to the same asset, use recursive symlinks or use symlinks to share assets between projects used with different versions of Unity. Make sure you know what you are doing.\n\n\u306a\u3069\u3068\u6012\u3089\u308c\u3066\u540c\u3058\u304f\u3046\u307e\u304f\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3002\n\u8ae6\u3081\u3066\u5225\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u307e\u308b\u307e\u308b\u30b3\u30d4\u30fc\u3057\u3066\u304d\u307e\u3057\u3087\u3046\u3002\niOS\u5b9f\u6a5f\u306b\u30d1\u30b9\u30b3\u30fc\u30c9\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u30c7\u30d7\u30ed\u30a4\u306f\u3067\u304d\u308b\u3082\u306e\u306e\u8d77\u52d5\u306f\u3057\u3066\u304f\u308c\u307e\u305b\u3093\u3002\u8ae6\u3081\u3066\u81ea\u5206\u3067\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\n\u672c\u5f53\u306fMakefile\u66f8\u304d\u305f\u304b\u3063\u305f\u3051\u3069\u3081\u3093\u3069\u304f\u3055\u304f\u3066\u3084\u3081\u305f\n\n\u51fa\u5178\nUnity\u306e\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u306b\u3064\u3044\u3066\u306f\u3053\u3053\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u53c2\u8003\u3068\u3044\u3046\u3088\u308a\u4e38\u30d1\u30af\u30ea\u3067\u3059\u3002\nXcode\u306e\u30d3\u30eb\u30c9\u306b\u3064\u3044\u3066\u306f\u3053\u306e\u3078\u3093\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n# \u30e2\u30c1\u30d9\u30fc\u30b7\u30e7\u30f3\nUnity\u306eiOS\u5411\u3051\u30c7\u30d0\u30c3\u30b0\u30d3\u30eb\u30c9\u3068\u5b9f\u6a5f\u30c7\u30d7\u30ed\u30a4\u304c\u9045\u304f\u3066\u5f85\u3063\u3066\u3089\u308c\u306a\u3044\u3002\n\u3057\u304b\u3082Unity\u4e0a\u3067Run\u3057\u3066\u3082Xcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u304c\u5410\u304d\u51fa\u3055\u308c\u308b\u3060\u3051\u306a\u306e\u3067\u3001\n1. Unity\u4e0a\u3067Run\n2. \u5410\u304d\u51fa\u3055\u308c\u305fXcode\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u3092Xcode\u4e0a\u3067Run\n\u30682\u56deRun\u30dc\u30bf\u30f3\u3092\u62bc\u3055\u306a\u3044\u3068\u5b9f\u6a5f\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u306a\u3044\u3002\u3081\u3093\u3069\u304f\u3055\u3044\u3002\u30c8\u30a4\u30ec\u884c\u3051\u306a\u3044\u3002\n\n\u30b3\u30de\u30f3\u30c91\u56de\u53e9\u3044\u305f\u3089\u30c8\u30a4\u30ec\u306b\u884c\u3063\u3066\u3066\u3082iOS\u5b9f\u6a5f\u306b\u30c7\u30d7\u30ed\u30a4\u3067\u304d\u308b\u3088\u3046\u306b\u3057\u305f\u3044\u3002\n\n\n# \u624b\u9806\n##1 \u52d5\u4f5c\u8981\u4ef6\n- (iOS\u306a\u306e\u3067)Mac OS X\u304c\u5165\u3063\u3066\u3044\u308b\u30de\u30b7\u30f3\n- ios-deploy (https://github.com/phonegap/ios-deploy)\n  - ``brew install ios-deploy``\u3067\u5165\u308b\u3002\n- Xcode\u3068\u304bUnity\u3068\u304b\n\n##2 \u30d0\u30c3\u30c1\u5b9f\u884c\u306e\u6e96\u5099\nAssets\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306e\u76f4\u4e0b\u306b``Editor``\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u3092\u4f5c\u6210\u3057\u3001\u4ee5\u4e0b\u306eBatchBuild.cs\u3092\u4f5c\u6210\u3059\u308b\u3002\n\u540d\u524d\u304c\u91cd\u8981\u306a\u306e\u3067\u3001\"Editor\"\u306e\u30b9\u30da\u30eb\u3068\u30ad\u30e3\u30d4\u30bf\u30e9\u30a4\u30ba\u306b\u6ce8\u610f\u3002\n\n*Android\u7b49\u5411\u3051\u306e\u30b3\u30fc\u30c9\u3082\u5165\u3063\u3066\u3044\u307e\u3059\u304c\u4eca\u56de\u306f\u4f7f\u3044\u307e\u305b\u3093*\n\n```BatchBuild.cs\nusing UnityEngine;\nusing UnityEditor;\nusing System.Collections;\nusing System.Collections.Generic;\nusing System.Linq;\n\npublic class BatchBuild : MonoBehaviour {\n\n    static private string ApplicationName = \"Hoge-application\";\n\t//for Android\n\tstatic void BuildProject_Android(){\n\n\t\tDebug.Log (\"AndroidBuild...\");\n\n\n\t\tstring[]\t\tscenePaths\t= GetEnabledScenePaths();\n\t\tstring\t\t\toutputPath\t= Application.dataPath + \"/../\"+ApplicationName+\".apk\";\n\t\tBuildTarget\t\ttarget\t\t= BuildTarget.Android;\n\t\tBuildOptions\topt\t\t\t= BuildOptions.None;\n\n\t\tApplicationBuild(scenePaths,outputPath,target,opt);\n\t}\n\n\t//for iOS Device\n\tstatic void BuildProject_iOS(){\n\n\t\tDebug.Log (\"iOSBuild...\");\n\n\t\tstring[]\t\tscenePaths\t= GetEnabledScenePaths();\n\t\tstring\t\t\toutputPath\t= \"Device\";\n\t\tBuildTarget\t\ttarget\t\t= BuildTarget.iOS;\n\t\tBuildOptions\topt\t\t\t= BuildOptions.SymlinkLibraries;\n\n\t\t//ProjectDataSize Reduction\n\t\tEditorUserBuildSettings.symlinkLibraries = true;\n\t\t//Prevent SimulatorBuild\n\t\tPlayerSettings.iOS.sdkVersion = iOSSdkVersion.DeviceSDK;\n\n\t\tApplicationBuild(scenePaths,outputPath,target,opt);\n\t}\n\n\t//RunBuild\n\tstatic void ApplicationBuild(string[] scenePaths,string outputPath,BuildTarget target,BuildOptions opt){\n\n\t\tstring error = BuildPipeline.BuildPlayer(scenePaths,outputPath,target,opt);\n\n\t\tif (!string.IsNullOrEmpty(error))\n\t\t\tDebug.LogError(error);\t\t//BuildFailed\n\t\tEditorApplication.Exit(string.IsNullOrEmpty(error) ? 0 : 1);\n\n\t}\n\n\t//return Enabled Scene in BuildSettings's Scenes In Build \n\tstatic string[] GetEnabledScenePaths() {\n\n\t\tList<string> sceneList = new List<string>();\n\n\t\t//Check Scenes Enabled\n\t\tforeach(var scene in EditorBuildSettings.scenes){\n\t\t\tif(scene.enabled)\n\t\t\t\tsceneList.Add (scene.path);\n\t\t}\n\t\treturn sceneList.ToArray();\n\t}\n\n}\n```\n\n##3 \u30b3\u30de\u30f3\u30c9\u306e\u5b9f\u884c\n\n**\u7a7a\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea**\u3092\u7528\u610f\u3057\u3001\u4ee5\u4e0b\u306e\u30b7\u30a7\u30eb\u30b9\u30af\u30ea\u30d7\u30c8\u3092\u914d\u7f6e\u3001\u5b9f\u884c\u3059\u308b\u3002\nUnity\u306e\u30d3\u30eb\u30c9\u3001Xcode\u306e\u30d3\u30eb\u30c9\u304c\u8d70\u3063\u305f\u306e\u3061\u3001iOS\u5b9f\u6a5f\u4e0a\u3067Unity\u30a2\u30d7\u30ea\u304c\u8d77\u52d5\u3057\u305f\u3089\u6210\u529f\n*$BASH_SOURCE\u3092\u5229\u7528\u3057\u3066\u3044\u308b\u305f\u3081bash or zsh\u7cfb\u3067\u3057\u304b\u52d5\u304b\u306a\u3044\u6c17\u304c\u3057\u307e\u3059*\n\n```deploy_to_ios.sh\n#Locate this script under an empty directory.\n\nPROJECT_BUILD_DIR=`pwd`/`dirname $BASH_SOURCE` # <= Must be absolute path\nPROJECT_BASE=/path/to/unity-project-base-directory # <= Edit this\nAPP_NAME=Hoge-application.app # <= Edit this\n\ncd $PROJECT_BUILD_DIR\n\necho \"Copying sources\"\nrm -r Assets 2>/dev/null\nrm -r ProjectSettings 2>/dev/null\ncp -r $PROJECT_BASE/Assets/ Assets/\ncp -r $PROJECT_BASE/ProjectSettings/ ProjectSettings/\n\necho \"Building Unity\"\n/Applications/Unity/Unity.app/Contents/MacOS/Unity -batchmode -projectPath $PROJECT_BUILD_DIR -executeMethod BatchBuild.BuildProject_iOS -quit\nif [ $? != 0 ]; then\n  echo \"Unity Build failed\"\n  exit $?\nfi\n\necho \"Building Xcode Project\"\nxcodebuild -project $PROJECT_BUILD_DIR/Device/Unity-iPhone.xcodeproj -target Unity-iPhone -configuration Release build\nif [ $? != 0 ]; then\n  echo \"Xcode Build failed\"\n  exit $?\nfi\n\necho \"Deploying to the device\"\nios-deploy --debug --bundle $PROJECT_BUILD_DIR/Device/build/Release-iphoneos/$APP_NAME\nif [ $? -eq 254 ]; then\n  echo \"Deploying finished, but couldn't run app\"\n  exit $?\nelif [ $? -ne 0 ]; then\n  echo \"Deploying failed\"\n  exit $?\nfi\n```\n\n##4 \u5099\u8003\nUnity\u30d3\u30eb\u30c9\u3059\u308b\u3068\u304d\u306b\u3001``Assets``\u30d5\u30a9\u30eb\u30c0\u3068``ProjectSettings``\u30d5\u30a9\u30eb\u30c0\u3092\u307e\u308b\u307e\u308b\u30b3\u30d4\u30fc\u3057\u3066\u3044\u308b\u3068\u3053\u308d\u304c\u91cd\u8981\u3067\u3059\u3002\nUnity\u958b\u767a\u74b0\u5883\u3092\u958b\u3044\u305f\u307e\u307e\u3001``Assets``\u3084``ProjectSettings``\u3092\u30b3\u30d4\u30fc\u305b\u305a\u306b\u30d3\u30eb\u30c9\u3057\u3088\u3046\u3068\u3059\u308b\u3068\u3001\n> It looks like another Unity instance is running with this project open.\n\n\u306a\u3069\u3068\u8a00\u308f\u308c\u3046\u307e\u304f\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3002\n\n\u307e\u305f\u3001\u30b7\u30f3\u30dc\u30ea\u30c3\u30af\u30ea\u30f3\u30af\u7b49\u3067\u306f\u3001Unity\u306b\n> Assets is a symbolic link. Using symlinks in Unity projects may cause your project to become corrupted if you create multiple references to the same asset, use recursive symlinks or use symlinks to share assets between projects used with different versions of Unity. Make sure you know what you are doing.\n\n\u306a\u3069\u3068\u6012\u3089\u308c\u3066\u540c\u3058\u304f\u3046\u307e\u304f\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3002\n\u8ae6\u3081\u3066\u5225\u306e\u30c7\u30a3\u30ec\u30af\u30c8\u30ea\u306b\u307e\u308b\u307e\u308b\u30b3\u30d4\u30fc\u3057\u3066\u304d\u307e\u3057\u3087\u3046\u3002\n\niOS\u5b9f\u6a5f\u306b\u30d1\u30b9\u30b3\u30fc\u30c9\u304c\u304b\u304b\u3063\u3066\u3044\u308b\u5834\u5408\u306f\u30c7\u30d7\u30ed\u30a4\u306f\u3067\u304d\u308b\u3082\u306e\u306e\u8d77\u52d5\u306f\u3057\u3066\u304f\u308c\u307e\u305b\u3093\u3002\u8ae6\u3081\u3066\u81ea\u5206\u3067\u8d77\u52d5\u3057\u307e\u3057\u3087\u3046\u3002\n\n*\u672c\u5f53\u306fMakefile\u66f8\u304d\u305f\u304b\u3063\u305f\u3051\u3069\u3081\u3093\u3069\u304f\u3055\u304f\u3066\u3084\u3081\u305f*\n\n#\u51fa\u5178\nUnity\u306e\u30d0\u30c3\u30c1\u30d5\u30a1\u30a4\u30eb\u306e\u4f5c\u6210\u306b\u3064\u3044\u3066\u306f[\u3053\u3053](http://yutakaseda3216.hatenablog.com/entry/2015/12/07/221714)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\u53c2\u8003\u3068\u3044\u3046\u3088\u308a\u4e38\u30d1\u30af\u30ea\u3067\u3059\u3002\n\nXcode\u306e\u30d3\u30eb\u30c9\u306b\u3064\u3044\u3066\u306f[\u3053\u306e\u3078\u3093](http://blog.ch3cooh.jp/entry/20150210/1423573065)\u3092\u53c2\u8003\u306b\u3057\u307e\u3057\u305f\u3002\n\n", "tags": ["Unity", "Unity3D", "iOS", "ShellScript", "Xcode"]}