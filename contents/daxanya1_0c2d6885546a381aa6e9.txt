{"context": " More than 1 year has passed since last update.\u524d\u56ded3.js\u3067\u3001\u2460\u2192\u2461\u3092\u63cf\u753b\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u56de\u3057\u305f\u304f\u306a\u3063\u305f\u306e\u3067\u56de\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n\u3053\u306e\u8a18\u4e8b\u3067\u884c\u3046\u3053\u3068\n\nd3.js\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\n\u305d\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092gif\u5316\u3059\u308b\n\n\n\u57fa\u790e\u77e5\u8b58\nd3.js\u8d85\u521d\u5fc3\u8005\u5411\u3051\u3000\u2460\u2192\u2461\u3092\u8868\u73fe\u3057\u3066\u307f\u308b\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n\u6e96\u5099\nhtml\u3068javascript\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u3001javascript\u30d5\u30a1\u30a4\u30eb\u5074\u3060\u3051\u7de8\u96c6\u3059\u308c\u3070\u3044\u3044\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\narrownode.html\n<!DOCTYPE html>\n<head>\n<meta charset=\"utf-8\">\n<script src=\"d3.v3.min.js\"></script>\n</head>\n<body>\n<div id='example'></div>\n<script src=\"arrownode_move.js\"></script>\n</body>\n</html>\n\n\n\u4ee5\u5f8c\u3001arrownode_move.js\u3092\u7de8\u96c6\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u305f\u3081\u306e\u8003\u3048\u65b9\nd3.js\u306f\u5dee\u5206\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u6a5f\u80fd\u304c\u5099\u308f\u3063\u3066\u3044\u3066\u3001\u4eca\u63cf\u753b\u3057\u3066\u3044\u308b\u72b6\u614b\u3068\u3001\u6700\u7d42\u7684\u306b\u63cf\u753b\u3057\u305f\u3044\u72b6\u614b\u3092\u6307\u793a\u3059\u308b\u3068\u3001\u305d\u306e\u9593\u3092\u88dc\u5b8c\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\u4eca\u56de\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u5192\u982d\u306b\u3042\u3063\u305f\u3088\u3046\u306b\u3001\u2460\u3092\u4e2d\u5fc3\u306b\u3057\u3066\u2461\u3092\u5468\u56de\u3055\u305b\u308b\u3001\u305d\u306e\u6642\u77e2\u5370\u7dda\u3082\u3044\u3063\u3057\u3087\u306b\u52d5\u304b\u3059\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u3057\u307e\u3059\u3002\n\u305d\u306e\u969b\u306b\u3001\u3044\u3061\u3044\u3061\u5186\u8ecc\u9053\u3092\u8a08\u7b97\u3057\u3066\u52d5\u304b\u3059\u306e\u3067\u306f\u306a\u304f\u3066\u3001svg\u3067\u5468\u56de\u8ecc\u9053\u306e\u30d1\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001\u305d\u306e\u30d1\u30b9\u306e\u4e0a\u3092\u2461\u304c\u52d5\u3044\u3066\u3044\u304f\u3001\u3068\u3044\u3046\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n\u5186\u306e\u30d1\u30b9\u3092\u4f5c\u308b\n\u8abf\u3079\u65b9\u304c\u60aa\u3044\u3060\u3051\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3059\u304c\u3001d3.js\u3067\u5186\u578b\u306epath\u306e\u4f5c\u308a\u65b9\u304c\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\u3069\u3046\u3082d3.svg.line.radial\u3092\u4f7f\u3063\u3066\u70b9\u309250\u500b\u3050\u3089\u3044\u7f6e\u3044\u3066\u3001\u305d\u306e\u70b9\u3092\u6ed1\u3089\u304b\u306b\u7e4b\u3050\u3068\u3044\u3046\u5b9f\u88c5\u3092\u898b\u304b\u3051\u308b\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3082\u3057\u3063\u304f\u308a\u304d\u307e\u305b\u3093\u3002\n\u306a\u305c\u304b\u3068\u3044\u3046\u3068\u3001svg\u3067\u306f\u3001SVG(\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u30d9\u30af\u30bf\u30fc\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30b9)\u5b66\u7fd2\u8f9e\u5178\u7b49\u53c2\u8003\u8cc7\u6599\u306b\u3042\u308b\u3088\u3046\u306b\u3001\u5186\u5f27\u306epath\u304c\u4f5c\u308c\u308b\u306e\u3067svg\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u305f\u65b9\u304c\u65e9\u305d\u3046\u3060\u304b\u3089\u3067\u3059\u3002\n\u8abf\u3079\u305f\u3068\u3053\u308d\u3001\u5186\u306e\u30d1\u30b9\u3092\u4f5c\u308b\u306e\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u5185\u5bb9\u3067\u3044\u3051\u305d\u3046\u3067\u3059\u3002Circle drawing with SVG's arc path\n\u5b9f\u88c5\u3059\u308b\u3068\u3001\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\narrownode_move.js(\u4e00\u90e8)\n  var t = path.node().getTotalLength();\n  var t2 = t*2;\n\n  // path\u3068\u3057\u3066\u306e\u5186\u3092\u63cf\u304f\u306e\u306b\u3001d3.svg.line\u3067\u70b9\u3092\u4e26\u3079\u3066\u3064\u306a\u3050\u65b9\u6cd5\u306f\u9045\u3044\u306e\u3067\u3001svg\u306epath\u306earc\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\n  // \u53c2\u8003\uff1ahttp://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path\n  var str = \"M0,0 M-\" + t + \",0 a\" + t + \",\"+ t + \" 0 1,1 \" + t2 + \",0 a\" + t + \",\" + t + \" 0 1,1 -\" + t2 + \",0\";\n  var path3 = svg.append(\"path\")\n    .attr({\n      'd': str,\n      'fill': \"none\",\n      'stroke': \"lightgreen\",\n      'transform': \"translate(\"+c1[0]+\",\"+c1[1]+\")\",\n    });\n}\n\n\n\u30d1\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u6642\u306f\u3001\u539f\u70b9\u306f(0,0)\u3068\u3057\u3066\u304a\u304d\u3001\u534a\u5f84\u3092\u5909\u6570\u3068\u3057\u3066\u76f4\u63a5path:d\u306e\u6587\u5b57\u5217\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\u305d\u306e\u5f8c\u3001transform\u3067\u539f\u70b9\u306e\u4f4d\u7f6e\u3092\u2460\u306e\u4f4d\u7f6e\u306b\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n\u5b9f\u969b\u306b\u52d5\u304b\u3059\u3068\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n\u30d1\u30b9\u304c\u5947\u9e97\u306b\u63cf\u3051\u307e\u3057\u305f\uff01\u3000\u3053\u306e\u30d1\u30b9\u4e0a\u3092\u2461\u304c\u52d5\u3051\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\n\n\u2461\u3092\u52d5\u304b\u3059\n\u30d1\u30b9\u4e0a\u3092\u52d5\u304b\u3059\u3068\u3044\u3046\u306e\u306f\u3001\u8a00\u3044\u65b9\u3092\u5909\u3048\u308b\u3068\u3001\u30d1\u30b9\u4e0a\u306e\u9577\u3055\uff08\u5186\u306a\u306e\u3067\u59cb\u70b9\u3068\u7d42\u70b9\u304c\u3044\u3063\u3057\u3087\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u5186\u5468\u3092\u30d1\u30b9\u306e\u9577\u3055\u3068\u3057\u307e\u3059\uff09\u3092\uff11\u3068\u3057\u305f\u6642\u306b\u3001\uff10\u3068\uff11\u3092\u4e0e\u3048\u308b\u3068\u305d\u306e\u9593\u3092\u88dc\u5b8c\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\uff10\u304b\u3089\uff11\u307e\u3067\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6307\u5b9a\u306f\u3001d3.ease()\u3067\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\u3068\u306f\u3044\u3063\u3066\u3082\u3001\u81ea\u52d5\u3067\u306f\u88dc\u5b8c\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u9014\u4e2d\u306e\u5ea7\u6a19\u306e\u8a08\u7b97\u5f0f\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u5bfe\u5fdc\u3057\u307e\u3059\u3002\n\u307e\u305f\u3001\u5ea7\u6a19\u3092\u5909\u66f4\u3059\u308b\u969b\u306b\u3001\u5408\u308f\u305b\u3066\u77e2\u5370\u7dda\u306e\u5ea7\u6a19\u66f4\u65b0\u3092\u884c\u3044\u307e\u3059\u3002\u4e00\u56de\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u3067\u3001\u540c\u6642\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u305a\u308c\u306a\u304f\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u3067\u304d\u307e\u3059\u3002\n\u305d\u306e\u3042\u305f\u308a\u3092\u3075\u307e\u3048\u3066\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\narrownode_move.js\ncreatesvg();\n\nfunction createsvg () {\n  var svg = d3.select(\"#example\").append(\"svg\")\n      .attr({\n        width: 640,\n        height: 480,\n      });\n  var r1 = 30;\n  var r2 = 20;\n  var ref1 = 8;\n  var c1 = [150, 140, r1,\"id1\"];\n  var c2 = [250, 170, r2, \"id2\"];\n  var carray = [c1, c2];\n  // defs/marker\u3068\u3044\u3046\u69cb\u9020\u3067\u3001svg\u306e\u4e0b\u306b\u77e2\u5370\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n  var marker = svg.append(\"defs\").append(\"marker\")\n      .attr({\n        'id': \"arrowhead\",\n        'refX': ref1,\n        'refY': 2,\n        'markerWidth': 4,\n        'markerHeight': 4,\n        'orient': \"auto\"\n      });\n  // \u77e2\u5370\u306e\u5f62\u3092path\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n  marker.append(\"path\")\n      .attr({\n        d: \"M 0,0 V 4 L4,2 Z\",\n        fill: \"steelblue\"\n      });\n\n\n  // 10\u7a2e\u985e\u306e\u8272\u3092\u8fd4\u3059\u95a2\u6570\u3092\u4f7f\u3046\n  var color = d3.scale.category10();\n\n  var g = svg.selectAll('g')\n    .data(carray).enter().append('g')\n    .attr({\n    // \u5ea7\u6a19\u8a2d\u5b9a\u3092\u52d5\u7684\u306b\u884c\u3046\n      id: function(d) { return d[3]; },\n      transform: function(d) {\n    return \"translate(\" + d[0] + \",\" + d[1] + \")\";\n      },\n    });\n\n  g.append('circle')\n    .attr({\n      'r': function(d) { return d[2]; },\n      'fill': function(d,i) { return color(i); },\n    });\n\n  g.append('text')\n    .attr({\n      'text-anchor': \"middle\",\n      'dy': \".35em\",\n      'fill': 'white',\n    })\n    .text(function(d,i) { return i+1; });\n\n  var line = d3.svg.line()\n      .interpolate('basis')\n      .x(function(d) {return d[0];})\n      .y(function(d) {return d[1];});\n\n  var path = svg.append('path')\n      .attr({\n        'd': line(carray),\n        'id': 'nodepath',\n        'stroke': 'lightgreen',\n        'stroke-width': 5,\n        'fill': 'none',\n        // path\u306e\u30a2\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8\u3068\u3057\u3066\u3001\u4e0a\u3067\u5b9a\u7fa9\u3057\u305f\u77e2\u5370\u3092\u6307\u5b9a\u3057\u307e\u3059\n        'marker-end':\"url(#arrowhead)\",\n      });\n  var t = path.node().getTotalLength();\n  var tdiff = t - (r1+r2+ref1);\n  path.attr({\n    'stroke-dasharray': \"0 \" + r1 + \" \" + tdiff + \" \" + r2,\n    'stroke-dashoffset': 0,\n  });\n  var t2 = t*2;\n  // path\u3068\u3057\u3066\u306e\u5186\u3092\u63cf\u304f\u306e\u306b\u3001d3.svg.line\u3067\u70b9\u3092\u4e26\u3079\u3066\u3064\u306a\u3050\u65b9\u6cd5\u306f\u9045\u3044\u306e\u3067\u3001svg\u306epath:a\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\n  // \u53c2\u8003\uff1ahttp://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path\n  // \u30d1\u30b9\u306f\u8868\u793a\u3057\u306a\u3044\u306e\u3067\u3001stroke\u3092\u5b9a\u7fa9\u3057\u306a\u3044\u3002\n  var str = \"M0,0 M-\" + t + \",0 a\" + t + \",\"+ t + \" 0 1,1 \" + t2 + \",0 a\" + t + \",\" + t + \" 0 1,1 -\" + t2 + \",0\";\n  var path3 = svg.append(\"path\")\n    .attr({\n      'd': str,\n      'fill': \"none\",\n      // \u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3059\u3068\u3001path\u304c\u8868\u793a\u3067\u304d\u308b\n      // 'stroke': \"lightgreen\",\n      'transform': \"translate(\"+c1[0]+\",\"+c1[1]+\")\",\n    });\n\n  // \u52d5\u304b\u3057\u305f\u3044\u5186\u3092\u6307\u5b9a\u3059\u308b\uff08\u3042\u3089\u304b\u3058\u3081id\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\uff09 \n  function movecircle(){\n    svg.selectAll('#id2')\n    .transition()\n    // \uff15\u79d2\u304b\u3051\u3066\u4e00\u5468\u3055\u305b\u308b\n    .duration(5000)\n    // ease\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001transition\u3067\u5909\u5316\u3055\u305b\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092[0->1]\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n    .ease(\"linear\")\n    .attrTween(\n    // \u5ea7\u6a19\u8a2d\u5b9a\u3092\u52d5\u7684\u306b\u884c\u3046\n      'transform', function(d,i) {\n        // ease\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u304ct\u3068\u306a\u3063\u3066\u6e21\u3063\u3066\u304f\u308b\n        return function(t) {\n          // path(\u3053\u3053\u3067\u306f\u5186)\u306e\u5ea7\u6a19\u3092\u53d6\u5f97\u3059\u308b\n          var p = path3.node().getPointAtLength(path3.node().getTotalLength()*t);\n          c2[0] = c1[0]+p.x;\n          c2[1] = c1[1]+p.y;\n          // \u77e2\u5370\u7dda\u306e\u5ea7\u6a19\u3082\u5909\u66f4\u3059\u308b\u3002\u3053\u3061\u3089\u3082id\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\n          svg.selectAll('#nodepath').attr('d', line(carray));\n          return \"translate(\" + c2[0] + \",\" + c2[1] + \")\";\n        };\n      }\n    )\n    // \u6b21\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u3068\u30eb\u30fc\u30d7\u3057\u306a\u304f\u306a\u308b\n    .each(\"end\", function() {movecircle()});\n  };\n  movecircle();\n};\n\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u30ea\u30d4\u30fc\u30c8\u3055\u305b\u308b\u6642\u306f\u3001transition\u306e\u6700\u5f8c\u3067each(\"end\")\u3068\u3057\u3066\u3001\u3082\u3046\u4e00\u5ea6\u540c\u3058\u95a2\u6570\u3092\u547c\u3076\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u3088\u3044\u3088\u3046\u3067\u3059\u3002\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092gif\u5316\u3059\u308b\nd3.js\u3068\u306f\u95a2\u4fc2\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u306e\u306b\u305d\u308c\u3092\u9759\u6b62\u753b\u50cf\u3067\u63d0\u4f9b\u3059\u308b\u3068\u30a4\u30f3\u30d1\u30af\u30c8\u304c\u8584\u304f\u306a\u308a\u307e\u3059\u3002\n\u7c21\u5358\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3gif\u4f5c\u308c\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u305f\u3089\u3001LICEcap\u306a\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3042\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u3001\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\u4f7f\u3044\u65b9\u306f\u672c\u5f53\u306b\u7c21\u5358\u3067\u3001\u67a0\u3060\u3051\u306e\u30a2\u30d7\u30ea\u304c\u7acb\u3061\u4e0a\u304c\u308b\u306e\u3067\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3gif\u306b\u3057\u305f\u3044\u90e8\u5206\u306b\u6301\u3063\u3066\u3044\u3063\u3066Recode\u3092\u62bc\u3059\u3068\u3001\u81ea\u52d5\u7684\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3gif\u306b\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n\n\u307e\u3068\u3081\nd3.js\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u3088\u3046\u3068\u3059\u308b\u6642\u306f\u3001\u4f55\u3092\u3069\u3046\u5909\u5316\u3055\u305b\u305f\u3044\u306e\u304b\u3092\u5341\u5206\u610f\u8b58\u3057\u306a\u3044\u3068\u3001\u306a\u304b\u306a\u304b\u601d\u3046\u3088\u3046\u306b\u52d5\u3044\u3066\u304f\u308c\u307e\u305b\u3093\u3002\n\u3046\u307e\u304f\u52d5\u3044\u305f\u3089\u795d\u676f\u3092\u3042\u3052\u307e\u3057\u3087\u3046\uff01\n\n\u524d\u56ded3.js\u3067\u3001\u2460\u2192\u2461\u3092\u63cf\u753b\u3057\u3066\u307f\u305f\u306e\u3067\u3059\u304c\u3001\u56de\u3057\u305f\u304f\u306a\u3063\u305f\u306e\u3067\u56de\u3057\u3066\u307f\u307e\u3057\u305f\u3002\n\u3053\u3093\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3059\u3002\n\n\n![nodepath.gif](https://qiita-image-store.s3.amazonaws.com/0/32778/dd90457a-bcbb-89d7-4cef-5704afca5c06.gif \"nodepath.gif\")\n\n\n\n## \u3053\u306e\u8a18\u4e8b\u3067\u884c\u3046\u3053\u3068\n+ d3.js\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\n+ \u305d\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092gif\u5316\u3059\u308b\n\n## \u57fa\u790e\u77e5\u8b58\n[d3.js\u8d85\u521d\u5fc3\u8005\u5411\u3051\u3000\u2460\u2192\u2461\u3092\u8868\u73fe\u3057\u3066\u307f\u308b](http://qiita.com/daxanya1/items/734e65a7ca58bbe2a98c)\u3092\u53c2\u8003\u306b\u3057\u3066\u304f\u3060\u3055\u3044\u3002\n\n## \u6e96\u5099\n\nhtml\u3068javascript\u30d5\u30a1\u30a4\u30eb\u3092\u5206\u3051\u3066\u3001javascript\u30d5\u30a1\u30a4\u30eb\u5074\u3060\u3051\u7de8\u96c6\u3059\u308c\u3070\u3044\u3044\u3088\u3046\u306b\u3057\u3066\u304a\u304d\u307e\u3059\u3002\n\n```arrownode.html\n<!DOCTYPE html>\n<head>\n<meta charset=\"utf-8\">\n<script src=\"d3.v3.min.js\"></script>\n</head>\n<body>\n<div id='example'></div>\n<script src=\"arrownode_move.js\"></script>\n</body>\n</html>\n```\n\n\u4ee5\u5f8c\u3001arrownode_move.js\u3092\u7de8\u96c6\u3057\u3066\u3044\u304d\u307e\u3059\u3002\n\n## \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u308b\u305f\u3081\u306e\u8003\u3048\u65b9\n\nd3.js\u306f\u5dee\u5206\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306e\u6a5f\u80fd\u304c\u5099\u308f\u3063\u3066\u3044\u3066\u3001\u4eca\u63cf\u753b\u3057\u3066\u3044\u308b\u72b6\u614b\u3068\u3001\u6700\u7d42\u7684\u306b\u63cf\u753b\u3057\u305f\u3044\u72b6\u614b\u3092\u6307\u793a\u3059\u308b\u3068\u3001\u305d\u306e\u9593\u3092\u88dc\u5b8c\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n\u4eca\u56de\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u306f\u3001\u5192\u982d\u306b\u3042\u3063\u305f\u3088\u3046\u306b\u3001\u2460\u3092\u4e2d\u5fc3\u306b\u3057\u3066\u2461\u3092\u5468\u56de\u3055\u305b\u308b\u3001\u305d\u306e\u6642\u77e2\u5370\u7dda\u3082\u3044\u3063\u3057\u3087\u306b\u52d5\u304b\u3059\u3001\u3068\u3044\u3046\u3053\u3068\u3092\u3057\u307e\u3059\u3002\n\n\u305d\u306e\u969b\u306b\u3001\u3044\u3061\u3044\u3061\u5186\u8ecc\u9053\u3092\u8a08\u7b97\u3057\u3066\u52d5\u304b\u3059\u306e\u3067\u306f\u306a\u304f\u3066\u3001svg\u3067\u5468\u56de\u8ecc\u9053\u306e\u30d1\u30b9\u3092\u4f5c\u6210\u3057\u3066\u3001\u305d\u306e\u30d1\u30b9\u306e\u4e0a\u3092\u2461\u304c\u52d5\u3044\u3066\u3044\u304f\u3001\u3068\u3044\u3046\u3088\u3046\u306b\u3057\u307e\u3059\u3002\n\n## \u5186\u306e\u30d1\u30b9\u3092\u4f5c\u308b\n\n\u8abf\u3079\u65b9\u304c\u60aa\u3044\u3060\u3051\u304b\u3082\u3057\u308c\u306a\u3044\u306e\u3067\u3059\u304c\u3001d3.js\u3067\u5186\u578b\u306epath\u306e\u4f5c\u308a\u65b9\u304c\u308f\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002\n\n\u3069\u3046\u3082d3.svg.line.radial\u3092\u4f7f\u3063\u3066\u70b9\u309250\u500b\u3050\u3089\u3044\u7f6e\u3044\u3066\u3001\u305d\u306e\u70b9\u3092\u6ed1\u3089\u304b\u306b\u7e4b\u3050\u3068\u3044\u3046\u5b9f\u88c5\u3092\u898b\u304b\u3051\u308b\u306e\u3067\u3059\u304c\u3001\u3069\u3046\u3082\u3057\u3063\u304f\u308a\u304d\u307e\u305b\u3093\u3002\n\n\u306a\u305c\u304b\u3068\u3044\u3046\u3068\u3001svg\u3067\u306f\u3001[SVG(\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u30d9\u30af\u30bf\u30fc\u30b0\u30e9\u30d5\u30a3\u30c3\u30af\u30b9)\u5b66\u7fd2\u8f9e\u5178](http://www3.ocn.ne.jp/~dhrname/svgpath.htm)\u7b49\u53c2\u8003\u8cc7\u6599\u306b\u3042\u308b\u3088\u3046\u306b\u3001\u5186\u5f27\u306epath\u304c\u4f5c\u308c\u308b\u306e\u3067svg\u306e\u6a5f\u80fd\u3092\u4f7f\u3063\u305f\u65b9\u304c\u65e9\u305d\u3046\u3060\u304b\u3089\u3067\u3059\u3002\n\n\u8abf\u3079\u305f\u3068\u3053\u308d\u3001\u5186\u306e\u30d1\u30b9\u3092\u4f5c\u308b\u306e\u306f\u3001\u3053\u306e\u8a18\u4e8b\u306e\u5185\u5bb9\u3067\u3044\u3051\u305d\u3046\u3067\u3059\u3002[Circle drawing with SVG's arc path](http://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path)\n\n\u5b9f\u88c5\u3059\u308b\u3068\u3001\u3053\u3046\u306a\u308a\u307e\u3059\u3002\n\n```arrownode_move.js(\u4e00\u90e8)\n  var t = path.node().getTotalLength();\n  var t2 = t*2;\n\n  // path\u3068\u3057\u3066\u306e\u5186\u3092\u63cf\u304f\u306e\u306b\u3001d3.svg.line\u3067\u70b9\u3092\u4e26\u3079\u3066\u3064\u306a\u3050\u65b9\u6cd5\u306f\u9045\u3044\u306e\u3067\u3001svg\u306epath\u306earc\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\n  // \u53c2\u8003\uff1ahttp://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path\n  var str = \"M0,0 M-\" + t + \",0 a\" + t + \",\"+ t + \" 0 1,1 \" + t2 + \",0 a\" + t + \",\" + t + \" 0 1,1 -\" + t2 + \",0\";\n  var path3 = svg.append(\"path\")\n    .attr({\n      'd': str,\n      'fill': \"none\",\n      'stroke': \"lightgreen\",\n      'transform': \"translate(\"+c1[0]+\",\"+c1[1]+\")\",\n    });\n}\n```\n\n\u30d1\u30b9\u3092\u5b9a\u7fa9\u3059\u308b\u6642\u306f\u3001\u539f\u70b9\u306f(0,0)\u3068\u3057\u3066\u304a\u304d\u3001\u534a\u5f84\u3092\u5909\u6570\u3068\u3057\u3066\u76f4\u63a5path:d\u306e\u6587\u5b57\u5217\u3092\u4f5c\u6210\u3057\u307e\u3059\u3002\n\n\u305d\u306e\u5f8c\u3001transform\u3067\u539f\u70b9\u306e\u4f4d\u7f6e\u3092\u2460\u306e\u4f4d\u7f6e\u306b\u79fb\u52d5\u3055\u305b\u307e\u3059\u3002\n\n\u5b9f\u969b\u306b\u52d5\u304b\u3059\u3068\u3053\u306e\u3088\u3046\u306b\u306a\u308a\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-03-01 21.07.42.png](https://qiita-image-store.s3.amazonaws.com/0/32778/7c21f39b-ac2e-f71e-da6c-01d69350a154.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-03-01 21.07.42.png\")\n\n\u30d1\u30b9\u304c\u5947\u9e97\u306b\u63cf\u3051\u307e\u3057\u305f\uff01\u3000\u3053\u306e\u30d1\u30b9\u4e0a\u3092\u2461\u304c\u52d5\u3051\u3070\u3088\u3055\u305d\u3046\u3067\u3059\u3002\n\n\n## \u2461\u3092\u52d5\u304b\u3059\n\n\u30d1\u30b9\u4e0a\u3092\u52d5\u304b\u3059\u3068\u3044\u3046\u306e\u306f\u3001\u8a00\u3044\u65b9\u3092\u5909\u3048\u308b\u3068\u3001\u30d1\u30b9\u4e0a\u306e\u9577\u3055\uff08\u5186\u306a\u306e\u3067\u59cb\u70b9\u3068\u7d42\u70b9\u304c\u3044\u3063\u3057\u3087\u3067\u3059\u304c\u3001\u3053\u3053\u3067\u306f\u5186\u5468\u3092\u30d1\u30b9\u306e\u9577\u3055\u3068\u3057\u307e\u3059\uff09\u3092\uff11\u3068\u3057\u305f\u6642\u306b\u3001\uff10\u3068\uff11\u3092\u4e0e\u3048\u308b\u3068\u305d\u306e\u9593\u3092\u88dc\u5b8c\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3059\u308b\u3068\u3044\u3046\u3053\u3068\u3067\u3059\u3002\n\n\uff10\u304b\u3089\uff11\u307e\u3067\u3068\u3044\u3046\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u6307\u5b9a\u306f\u3001d3.ease()\u3067\u884c\u3046\u3053\u3068\u304c\u51fa\u6765\u307e\u3059\u3002\n\n\u3068\u306f\u3044\u3063\u3066\u3082\u3001\u81ea\u52d5\u3067\u306f\u88dc\u5b8c\u3057\u3066\u304f\u308c\u306a\u3044\u306e\u3067\u3001\u9014\u4e2d\u306e\u5ea7\u6a19\u306e\u8a08\u7b97\u5f0f\u3092\u4e0e\u3048\u308b\u3053\u3068\u3067\u5bfe\u5fdc\u3057\u307e\u3059\u3002\n\n\u307e\u305f\u3001\u5ea7\u6a19\u3092\u5909\u66f4\u3059\u308b\u969b\u306b\u3001\u5408\u308f\u305b\u3066\u77e2\u5370\u7dda\u306e\u5ea7\u6a19\u66f4\u65b0\u3092\u884c\u3044\u307e\u3059\u3002\u4e00\u56de\u306e\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u51e6\u7406\u3067\u3001\u540c\u6642\u306b\u5909\u66f4\u3059\u308b\u3053\u3068\u3067\u305a\u308c\u306a\u304f\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u304c\u3067\u304d\u307e\u3059\u3002\n\n\u305d\u306e\u3042\u305f\u308a\u3092\u3075\u307e\u3048\u3066\u3001\u30d7\u30ed\u30b0\u30e9\u30e0\u306b\u3057\u3066\u307f\u307e\u3059\u3002\n\n```arrownode_move.js\ncreatesvg();\n\nfunction createsvg () {\n  var svg = d3.select(\"#example\").append(\"svg\")\n      .attr({\n        width: 640,\n        height: 480,\n      });\n  var r1 = 30;\n  var r2 = 20;\n  var ref1 = 8;\n  var c1 = [150, 140, r1,\"id1\"];\n  var c2 = [250, 170, r2, \"id2\"];\n  var carray = [c1, c2];\n  // defs/marker\u3068\u3044\u3046\u69cb\u9020\u3067\u3001svg\u306e\u4e0b\u306b\u77e2\u5370\u3092\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n  var marker = svg.append(\"defs\").append(\"marker\")\n      .attr({\n        'id': \"arrowhead\",\n        'refX': ref1,\n        'refY': 2,\n        'markerWidth': 4,\n        'markerHeight': 4,\n        'orient': \"auto\"\n      });\n  // \u77e2\u5370\u306e\u5f62\u3092path\u3067\u5b9a\u7fa9\u3057\u307e\u3059\u3002\n  marker.append(\"path\")\n      .attr({\n        d: \"M 0,0 V 4 L4,2 Z\",\n        fill: \"steelblue\"\n      });\n\n\n  // 10\u7a2e\u985e\u306e\u8272\u3092\u8fd4\u3059\u95a2\u6570\u3092\u4f7f\u3046\n  var color = d3.scale.category10();\n\n  var g = svg.selectAll('g')\n    .data(carray).enter().append('g')\n    .attr({\n    // \u5ea7\u6a19\u8a2d\u5b9a\u3092\u52d5\u7684\u306b\u884c\u3046\n      id: function(d) { return d[3]; },\n      transform: function(d) {\n    return \"translate(\" + d[0] + \",\" + d[1] + \")\";\n      },\n    });\n\n  g.append('circle')\n    .attr({\n      'r': function(d) { return d[2]; },\n      'fill': function(d,i) { return color(i); },\n    });\n\n  g.append('text')\n    .attr({\n      'text-anchor': \"middle\",\n      'dy': \".35em\",\n      'fill': 'white',\n    })\n    .text(function(d,i) { return i+1; });\n\n  var line = d3.svg.line()\n      .interpolate('basis')\n      .x(function(d) {return d[0];})\n      .y(function(d) {return d[1];});\n\n  var path = svg.append('path')\n      .attr({\n        'd': line(carray),\n        'id': 'nodepath',\n        'stroke': 'lightgreen',\n        'stroke-width': 5,\n        'fill': 'none',\n        // path\u306e\u30a2\u30c8\u30ea\u30d3\u30e5\u30fc\u30c8\u3068\u3057\u3066\u3001\u4e0a\u3067\u5b9a\u7fa9\u3057\u305f\u77e2\u5370\u3092\u6307\u5b9a\u3057\u307e\u3059\n        'marker-end':\"url(#arrowhead)\",\n      });\n  var t = path.node().getTotalLength();\n  var tdiff = t - (r1+r2+ref1);\n  path.attr({\n    'stroke-dasharray': \"0 \" + r1 + \" \" + tdiff + \" \" + r2,\n    'stroke-dashoffset': 0,\n  });\n  var t2 = t*2;\n  // path\u3068\u3057\u3066\u306e\u5186\u3092\u63cf\u304f\u306e\u306b\u3001d3.svg.line\u3067\u70b9\u3092\u4e26\u3079\u3066\u3064\u306a\u3050\u65b9\u6cd5\u306f\u9045\u3044\u306e\u3067\u3001svg\u306epath:a\u30b3\u30de\u30f3\u30c9\u3092\u4f7f\u7528\n  // \u53c2\u8003\uff1ahttp://stackoverflow.com/questions/5737975/circle-drawing-with-svgs-arc-path\n  // \u30d1\u30b9\u306f\u8868\u793a\u3057\u306a\u3044\u306e\u3067\u3001stroke\u3092\u5b9a\u7fa9\u3057\u306a\u3044\u3002\n  var str = \"M0,0 M-\" + t + \",0 a\" + t + \",\"+ t + \" 0 1,1 \" + t2 + \",0 a\" + t + \",\" + t + \" 0 1,1 -\" + t2 + \",0\";\n  var path3 = svg.append(\"path\")\n    .attr({\n      'd': str,\n      'fill': \"none\",\n      // \u4e0b\u306e\u30b3\u30e1\u30f3\u30c8\u3092\u5916\u3059\u3068\u3001path\u304c\u8868\u793a\u3067\u304d\u308b\n      // 'stroke': \"lightgreen\",\n      'transform': \"translate(\"+c1[0]+\",\"+c1[1]+\")\",\n    });\n\n  // \u52d5\u304b\u3057\u305f\u3044\u5186\u3092\u6307\u5b9a\u3059\u308b\uff08\u3042\u3089\u304b\u3058\u3081id\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\uff09 \n  function movecircle(){\n    svg.selectAll('#id2')\n    .transition()\n    // \uff15\u79d2\u304b\u3051\u3066\u4e00\u5468\u3055\u305b\u308b\n    .duration(5000)\n    // ease\u3092\u6307\u5b9a\u3059\u308b\u3068\u3001transition\u3067\u5909\u5316\u3055\u305b\u308b\u30d1\u30e9\u30e1\u30fc\u30bf\u3092[0->1]\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u308b\u3002\n    .ease(\"linear\")\n    .attrTween(\n    // \u5ea7\u6a19\u8a2d\u5b9a\u3092\u52d5\u7684\u306b\u884c\u3046\n      'transform', function(d,i) {\n        // ease\u3067\u8a2d\u5b9a\u3057\u305f\u30d1\u30e9\u30e1\u30fc\u30bf\u304ct\u3068\u306a\u3063\u3066\u6e21\u3063\u3066\u304f\u308b\n        return function(t) {\n          // path(\u3053\u3053\u3067\u306f\u5186)\u306e\u5ea7\u6a19\u3092\u53d6\u5f97\u3059\u308b\n          var p = path3.node().getPointAtLength(path3.node().getTotalLength()*t);\n          c2[0] = c1[0]+p.x;\n          c2[1] = c1[1]+p.y;\n          // \u77e2\u5370\u7dda\u306e\u5ea7\u6a19\u3082\u5909\u66f4\u3059\u308b\u3002\u3053\u3061\u3089\u3082id\u3092\u8a2d\u5b9a\u3057\u3066\u3044\u308b\n          svg.selectAll('#nodepath').attr('d', line(carray));\n          return \"translate(\" + c2[0] + \",\" + c2[1] + \")\";\n        };\n      }\n    )\n    // \u6b21\u306e\u884c\u306e\u30b3\u30e1\u30f3\u30c8\u3059\u308b\u3068\u30eb\u30fc\u30d7\u3057\u306a\u304f\u306a\u308b\n    .each(\"end\", function() {movecircle()});\n  };\n  movecircle();\n};\n```\n\n\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092\u30ea\u30d4\u30fc\u30c8\u3055\u305b\u308b\u6642\u306f\u3001transition\u306e\u6700\u5f8c\u3067each(\"end\")\u3068\u3057\u3066\u3001\u3082\u3046\u4e00\u5ea6\u540c\u3058\u95a2\u6570\u3092\u547c\u3076\u3088\u3046\u306b\u3059\u308b\u306e\u304c\u3088\u3044\u3088\u3046\u3067\u3059\u3002\n\n## \u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3092gif\u5316\u3059\u308b\n\nd3.js\u3068\u306f\u95a2\u4fc2\u306a\u3044\u306e\u3067\u3059\u304c\u3001\u305b\u3063\u304b\u304f\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u306e\u306b\u305d\u308c\u3092\u9759\u6b62\u753b\u50cf\u3067\u63d0\u4f9b\u3059\u308b\u3068\u30a4\u30f3\u30d1\u30af\u30c8\u304c\u8584\u304f\u306a\u308a\u307e\u3059\u3002\n\n\u7c21\u5358\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3gif\u4f5c\u308c\u306a\u3044\u304b\u306a\u3068\u601d\u3063\u305f\u3089\u3001LICEcap\u306a\u308b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u304c\u3042\u308b\u3068\u3044\u3046\u3053\u3068\u304c\u308f\u304b\u3063\u305f\u306e\u3067\u3001\u7d39\u4ecb\u3057\u307e\u3059\u3002\n\n\u4f7f\u3044\u65b9\u306f\u672c\u5f53\u306b\u7c21\u5358\u3067\u3001\u67a0\u3060\u3051\u306e\u30a2\u30d7\u30ea\u304c\u7acb\u3061\u4e0a\u304c\u308b\u306e\u3067\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3gif\u306b\u3057\u305f\u3044\u90e8\u5206\u306b\u6301\u3063\u3066\u3044\u3063\u3066Recode\u3092\u62bc\u3059\u3068\u3001\u81ea\u52d5\u7684\u306b\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3gif\u306b\u3057\u3066\u304f\u308c\u307e\u3059\u3002\n\n![\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-03-01 21.35.29.png](https://qiita-image-store.s3.amazonaws.com/0/32778/7b1c3850-e6a1-fe4d-56e9-0b29a05588d3.png \"\u30b9\u30af\u30ea\u30fc\u30f3\u30b7\u30e7\u30c3\u30c8 2014-03-01 21.35.29.png\")\n\n\n## \u307e\u3068\u3081\n\nd3.js\u3067\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u3055\u305b\u3088\u3046\u3068\u3059\u308b\u6642\u306f\u3001\u4f55\u3092\u3069\u3046\u5909\u5316\u3055\u305b\u305f\u3044\u306e\u304b\u3092\u5341\u5206\u610f\u8b58\u3057\u306a\u3044\u3068\u3001\u306a\u304b\u306a\u304b\u601d\u3046\u3088\u3046\u306b\u52d5\u3044\u3066\u304f\u308c\u307e\u305b\u3093\u3002\n\n\u3046\u307e\u304f\u52d5\u3044\u305f\u3089\u795d\u676f\u3092\u3042\u3052\u307e\u3057\u3087\u3046\uff01\n\n", "tags": ["LICEcap", "d3.js"]}